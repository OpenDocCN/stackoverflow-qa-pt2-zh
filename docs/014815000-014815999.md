# StackOverflow 问答 14815000-14815999

# symfony - 我的回复是有效的 JSON 吗？

> ID：14815001
> 
> 赞同：0
> 
> 时间：2013-02-11T15:14:03.473
> 
> 标签：symfony, json

我正在尝试从我的数据库中获取数据并将它们转换为 JSON (Symfony2) 这是我在访问 json 页面时得到的回复：

```
HTTP/1.0 200 OK Cache-Control: no-cache Content-Type: application/json Date: Mon, 11 Feb 2013 15:05:03 GMT "[{\"id\":1,\"iam\":1,\"youare\":2,\"lat\":50.8275853,\"lng\":4.3809764,\"msgbody\":\"I saw you over there what's up!\"},{\"id\":2,\"iam\":1,\"youare\":2,\"lat\":50.8275853,\"lng\":4.3809764,\"msgbody\":\"I saw you over there what's up!\"},{\"id\":3,\"iam\":1,\"youare\":2,\"lat\":50.8275853,\"lng\":4.3809764,\"msgbody\":\"I saw you over there what's up!\"},{\"id\":4,\"iam\":1,\"youare\":2,\"lat\":50.8275853,\"lng\":4.3809764,\"msgbody\":\"I saw you over there what's up!\"},{\"id\":5,\"iam\":1,\"youare\":2,\"lat\":50.8275853,\"lng\":4.3809764,\"msgbody\":\"I saw you over there what's up!\"},{\"id\":6,\"iam\":1,\"youare\":2,\"lat\":50.8275853,\"lng\":4.3809764,\"msgbody\":\"I saw you over there what's up!\"}]" 
```

1.  我应该看到实际的标题吗？
2.  双引号这样转义是否正常？
3.  整个事情应该以文件的形式出现吗？foo.json？
4.  你知道如何正确地将 Doctrine Entity 转换为 JSON 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T12:20:54.873

您必须为您的浏览器下载 json 插件。就像我使用 chrome json 插件 [https://chrome.google.com/webstore/detail/jsonview/chklaanhfefbnpoihckbnefhakgolnmc?hl=en](https://chrome.google.com/webstore/detail/jsonview/chklaanhfefbnpoihckbnefhakgolnmc?hl=en)

# php - 如何使用 php 测试谷歌市场 api

> ID：14815018
> 
> 赞同：1
> 
> 时间：2013-02-11T15:14:39.763
> 
> 标签：php, google-play-services, google-api-php-client

我正在尝试使用这个 api [http://code.google.com/p/android-market-api/](http://code.google.com/p/android-market-api/)。我想从游戏商店买一些。比如应用名称、描述、截图和下载评分（总下载量、周下载量......）

我正在使用php版本。我将所有代码上传到我的个人服务器。www.example.com/test/。除了 local.php、电子邮件和密码字段之外，我还应该配置其他任何内容吗？我只这样做了。

我有这个错误：

```
Uncaught exception 'Exception' with message 'HTTP request returned code 400' in /homepages/31/d229886149/htdocs/carlos/test/Market/MarketSession.php:212 Stack trace:
#0 /homepages/31/d229886149/htdocs/carlos/test/Market/MarketSession.php(160): MarketSession->executeRawHttpQuery('??????DQAAAMkAA...')
#1 /homepages/31/d229886149/htdocs/carlos/test/Market/MarketSession.php(147): MarketSession->executeProtobuf(Object(Request))
#2 /homepages/31/d229886149/htdocs/carlos/test/examples/test_categories.php(15): MarketSession->execute(Object(Request_RequestGroup))
#3 {main} thrown in /homepages/31/d229886149/htdocs/carlos/test/Market/MarketSession.php 
```

在线 212

谢谢你。

之后我想用 codeIgniter 来实现它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T18:57:25.853

尝试使用 '0123456789123456' 作为 ANDROID_DEVICEID

```
define('GOOGLE_EMAIL','someone@gmail.com');
define('GOOGLE_PASSWD','SomePassword');
define('ANDROID_DEVICEID','0123456789123456'); 
```

# security - 如何仅在网站的一半上使用 SSL？

> ID：14815032
> 
> 赞同：0
> 
> 时间：2013-02-11T15:15:22.873
> 
> 标签：security, ssl, joomla, https

我的网站是一半的电子商务商店和一半的社区博客。我已经在整个站点中启用了 SSL，但是当社区成员发布非 HTTPS 链接时，根据 SSL 证书，整个站点变得“不安全”。

如何仅在网站的电子商务部分要求 SSL？

有人告诉我，我可能必须将我的社区博客和电子商务网站作为单独的 Joomla！安装。肯定有更好的方法吗？

这样您就可以看到网站[www.DetourJournal.com](http://www.DetourJournal.com)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T19:15:23.680

对我来说，为什么你会因为有一些指向 http 站点的链接而收到警告是没有意义的。

但是我有一个类似的设置，但我只为电子商务部分启用了 SSL。[用这个插件](http://www.yireo.com/software/joomla-extensions/ssl-redirect)做起来很简单。

# ios - iCarousel – 使所有项目都可选择，而不仅仅是居中的项目

> ID：14815042
> 
> 赞同：1
> 
> 时间：2013-02-11T15:16:04.340
> 
> 标签：ios, objective-c, user-interface, icarousel

我正在使用出色的 iOS control类型，我希望它包含`iCarousel`的`Wheel`所有按钮都可以随时使用/可选择（即，我可以点击其中任何一个，无论哪个当前位于轮子顶部） . 用户仍然可以正常滚动滚轮，但无论他们点击哪个按钮，它都应该注册。

当前的行为似乎不一致：如果我直接点击中心按钮旁边的一个按钮（在其左侧或右侧），则该按钮将移动到中心插槽中。单击“有时”两个位置之外的按钮之一会使其滚动到该字母，有时会被忽略。任何其他按钮总是被忽略。

这是否可以设置，最好不要对课程进行大量修改？我绝不是专家，但我每天都在学习:)

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T16:18:30.847

设置 carousel.centerItemWhenSelected = NO;

当您点击它们时，这将禁用除中心按钮以外的按钮滚动到中心的行为。

至于为什么有些根本不响应点击的原因，很可能是因为您的轮播视图的框架太小，并且点击事件超出了框架。

如果你设置 carousel.clipsToBounds = YES; 它也会将轮播视图裁剪到框架中，这样您就可以准确地看到轮播的实际尺寸。

# asp.net - 在 DotNetNuke 中，身份验证提供者和会员提供者有什么区别？

> ID：14815044
> 
> 赞同：0
> 
> 时间：2013-02-11T15:16:07.837
> 
> 标签：asp.net, dotnetnuke, dotnetnuke-6

我正在与一个产品负责人合作，他拥有一个现有的 ASP.NET Web 应用程序来进行一些报告。为了便于讨论，我们称之为“WebApp1”。

她要求我们提供一个 DotNetNuke 门户以提供论坛功能。

作为要求的一部分，DotNetNuke 门户的主登录屏幕应根据“WebApp1”的用户数据库对用户进行身份验证。“WebApp1”的现有用户表具有散列密码。

当我一直在研究这些需求时，我发现 MemberShipProvider 模式和 AuthenticationProvider 似乎都满足了相同的需求。

从 DotNetNuke 的角度来看，这些提供商之间有什么区别？哪种模式引入的复杂性最低？

请注意，我在 DotNetNuke 方面的经验有限。

请知道，我感谢 StackOverflow 社区的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:10:31.053

身份验证仅处理登录（您是谁{用户名}，您是否拥有正确的密码）。

会员资格处理这更像是授权（现在我知道你是谁，你可以这样做）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T19:26:44.663

---- 我为[PowerDNN.com](http://www.POWERDNN.com)工作----

嗨 Michael， 几个月前，我写了一个会员提供商来做类似的事情，我们将 DotNetNuke 网站连接到基于 linux 的后端系统以进行授权。我觉得我有点作弊，但我的解决方案效果很好。

以下是我所做的： 1) 我从 DotNetNuke 的会员提供商那里继承。2）我用自定义代码覆盖了“登录”功能。2.1) 它在远程系统中找到用户。2.2) 它验证远程用户的凭据。2.3）如果用户不存在，它会在 DNN 中创建用户。2.4）它将任何权限同步到 DNN 2.5）我登录用户。

作为一个仅供参考，当我创建本地用户时，我给它一个前缀，比如“CUSTOM-#####”，其中##### 是他们在远程系统中的 ID。这样我就可以很容易地分辨出哪些用户是“常规”dnn 用户，哪些用户是同步用户。

此外，如果我在远程数据库中找不到用户，那么我对 DNN 本身进行身份验证（这样，像“主机”和“管理员”这样的用户也可以工作）。

我希望这有帮助！

# javascript - KnockoutJS Observables 的 Observable 对象

> ID：14815047
> 
> 赞同：4
> 
> 时间：2013-02-11T15:16:16.977
> 
> 标签：javascript, knockout.js

我想制作可观察对象的可观察对象。例如：

```
 var Project = function(id, name, custId) {
            this.id = ko.observable(id);
            this.name = ko.observable(name);
            this.custId = ko.observable(custId);
        }

        var viewModel = function() {

                    this.newUpProj = ko.observable(new Project(null,null,null));
            ...
            } 
```

像这样的东西......我想`newUpProject`成为可观察的，它的属性是可观察的。我也试过`this.newUpProj = ko.mapping.fromJS(new Project());`

Edit1：它创建了对象，但它的属性（id，名称...）不是可观察的...

Edit2：在 html 中使用：

```
<div class="modal-body">
                <p><input type="text" id="projNameTx" data-bind="value: newUpProj.name()" /></p><br>
                <p><select data-bind="options: customers, optionsCaption: 'Choose...', value: newUpProj.custId(), optionsText: 'name', optionsValue: 'id'" 
                    size="1"></select></p>

            </div>
            <div class="modal-footer">
                <button class="btn" data-bind="click: clearModal" aria-hidden="true">Close</button>
                <button class="btn btn-primary" data-bind="click: updateFlag() ? updateProject : addProject, enable: newUpProj.custId() && newUpProj.name()">Save</button>
            </div> 
```

输入和选择中加载了正确的值，但如果输入为空（例如），则保存按钮永远不会禁用，因为更改不会转到模型。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T16:18:32.237

可能只需要在绑定中执行 newUpProj 吗？

```
enable: newUpProj().custId() && newUpProj().name() 
```

如果做不到这一点，您可以尝试根据 custId 和 name 的状态将计算的 observable 设置为 true 或 false

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-12T10:08:04.323

设法做到这一点：http: [//jsfiddle.net/wF7xY/1/](http://jsfiddle.net/wF7xY/1/)

```
var Model = function() {
    this.data = ko.observable({}); // It doesn't work
};

var Data = {
    field1: 'test1',
    field2: 'test2'
};

var model = new Model();
ko.applyBindings(model);

ko.mapping.fromJS(Data, {}, model.data);
model.data.valueHasMutated(); 
```

HTML：

```
<div data-bind="text: data().field1 ? data().field1() : ''"></div> 
```

谢谢您的帮助。

# dynamics-crm - 如何在 CRM Dynamics 4.0 中解锁实体的字段

> ID：14815050
> 
> 赞同：1
> 
> 时间：2013-02-11T15:16:25.060
> 
> 标签：dynamics-crm, dynamics-crm-4

我有一个电子邮件实体，其中包含一个被锁定的主题字段。它已经在属性选项中解锁。但它仍然显示锁定。

欢迎提出任何意见和建议。

![在此处输入图像描述](../Images/2661d005eef80a4fb166a3757f608b08.png)

在选择“主题”属性时，我点击了“更改属性”，我发现它已经解锁了。请帮助如何解锁。见下文 ![在此处输入图像描述](../Images/f6e31f660f0715472b0d3b25ab8a92eb.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T15:59:11.663

某些字段是系统必需的，不能从表单中删除。理想情况下，Microsoft 可能应该将该字段设置为锁定并禁用该选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T08:46:31.067

由于这是 CRM 4，因此进行隐藏的语法与 nairware 发布的 CRM 2011 有所不同。在[此博客](http://sliong.wordpress.com/2011/03/12/crm-4-0-hide-field-section-tab-with-javascript/)中，您可以了解如何隐藏表单上的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T13:17:44.497

感谢大家的支持。我想修改电子邮件实体上的主题字段。不要以任何方式隐藏它。我通过导出电子邮件实体完成了它，通过删除主题单元（）修改了 XML 文件，然后保存了它。然后最后在导入自定义中导入xml文件并发布。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T23:10:53.193

如果字段上有红色锁，则与业务要求不同（红色星号）。该字段上的红色锁表示您不能做任何事情，只能将该字段留在表单上。

解决这种情况的解决方法是创建一个隐藏选项卡。所有字段都显示在选项卡中。如果您只是创建一个选项卡 - 将其标记为“隐藏”选项卡 - 那么您可以将所有要隐藏的字段放入该选项卡中。

使用 JavaScript 隐藏选项卡：

```
document.getElementById("tab<tabNo>Tab").style.display = "none"; //CRM 4.0 syntax 
```

或者

```
Xrm.Page.ui.tabs.get("Hidden").setVisible(false); //CRM 2011 syntax 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T15:58:15.153

这是因为 CRM 总是要填充的除外（您多久发送一次没有主题的电子邮件？）。

在 CRM 中有几个类似的字段，我猜你正试图隐藏它，这可能最容易用 JavaScript 完成。

# symfony - Symfony2 持久化相关对象

> ID：14815052
> 
> 赞同：3
> 
> 时间：2013-02-11T15:16:25.580
> 
> 标签：symfony, doctrine-orm

这是我的问题： **Entity AddressBook** *1-N* **Entity Number**

控制器显示带有地址簿及其编号的编辑表单，但是当我保存表单时，出现此错误： **致命错误：调用非对象上的成员函数 setTipo()**

然而，奇怪的是，数据被正确保存

这是我的代码：

```
 /**
 * Modifica dati Anagrafica
 * @Route("/contatto/{id}/modifica", name="_anagrafica_modifica")
 * @Template()
 */
public function modificaAction($id)
{
    $em = $this->getDoctrine()->getManager();
    $anagrafica = $em->getRepository('MercurioInterfaceBundle:Anagrafica')->find($id);

    if (!$anagrafica) {
        throw $this->createNotFoundException('No anagrafica found for id '.$id);
    }

    $form = $this->createForm(new \Mercurio\InterfaceBundle\Form\Anagrafica\FormAnagrafica(), $anagrafica);

    $request = $this->getRequest();

    if ($request->getMethod() == 'POST')
    {
        $form->bind($request);
        if ($form->isValid())
        {
            $chiave = $request->request->get('anagrafica');

            $em = $this->getDoctrine()->getManager();
            $anagrafica = $em->getRepository('MercurioInterfaceBundle:Anagrafica')->find($id);

            $anagrafica->setNominativo($chiave['nominativo']);
            $anagrafica->setIndirizzo($chiave['indirizzo']);
            $anagrafica->setCap($chiave['cap']);
            $anagrafica->setCitta($chiave['citta']);
            $anagrafica->setNote($chiave['note']);
            $em->flush();

            $dettaglio = $em->getRepository('MercurioInterfaceBundle:AnagDettaglio')->findBy(array('anagrafica_id' => $id,));
            foreach ($chiave['anag_dettagli'] as $d)
            {
                $dettaglio->setTipo($d['tipo']);
                $dettaglio->setValore($d['valore']);
                $dettaglio->setRiferimento($d['riferimento']);
            }
            $em->flush();

            return $this->redirect($this->generateUrl('_anagrafica_contatto', array('id' => $id)));
        }
    }

    return array(
        'form' => $form->createView(),
        'id' => $id
    );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T16:16:56.500

解决了：

```
$form = $this->createForm(new \Mercurio\InterfaceBundle\Form\Anagrafica\FormAnagrafica(),$anagrafica);
if ($request->isMethod('POST')){
  $form->bind($request);

  if ($form->isValid()) {
    $em->persist($anagrafica);
    $em->flush();
    return $this->redirect(....)
  }
} 
```

# xcode - Xcode 4 无法创建 Subversion 存储库

> ID：14815054
> 
> 赞同：3
> 
> 时间：2013-02-11T15:16:39.093
> 
> 标签：xcode, svn

我们有 4 名开发人员使用 Xcode 并在位于远程服务器上的 Subversion 存储库中工作。一位新开发人员正在使用 Xcode 4.6，但无法创建存储库条目。

在您为其命名的“添加存储库”窗口中，输入一个 url 并选择一个类型 - 他的机器上唯一可用的类型是“git”。颠覆不是一种选择。

Subversion 安装在他的机器上 - 1.6.18（和我们其他人一样），他可以从命令行使用它。

任何想法为什么 Xcode 不允许它作为选项？

# bash - 在 bash 脚本中缺少与 su -c 匹配的引号

> ID：14815055
> 
> 赞同：0
> 
> 时间：2013-02-11T15:16:39.453
> 
> 标签：bash, su

我想写类似的东西

```
EXEC="sudo su -m root -c \"java Something\""
$EXEC & 
```

但我收到以下错误：

```
Something": -c: line 0: unexpected EOF while looking for matching `"'
Something": -c: line 1: syntax error: unexpected end of file 
```

如果我在命令行上编写命令，它就会执行。如果我将它存储在一个变量中并试图推断它 - 它不会。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:23:27.877

试试这个：

```
exec="ls -l \"/a b c\""
$exec 
```

你会看到类似的东西：

```
ls: cannot access "/a: No such file or directory
ls: cannot access b: No such file or directory
ls: cannot access c": No such file or directory 
```

这准确地显示了问题出在哪里 - 也就是说 - 变量的扩展是在分词**之后**完成的。

要使其工作，您可以使用 eval：

```
=$ eval "$exec"
ls: cannot access /a b c: No such file or directory 
```

甚至：

```
=$ sh -c "$exec" 
```

或者更好的是，不要运行这样的命令。不确定它的目的是什么，但考虑避免在变量中构建完整的命令行。

# ruby-on-rails - 为什么这个 rspec 请求规范不更新模型？

> ID：14815057
> 
> 赞同：10
> 
> 时间：2013-02-11T15:16:43.027
> 
> 标签：ruby-on-rails, devise, capybara, cancan, rspec-rails

我有一个与用户模型交互的请求规范。我想确保具有管理员角色的用户可以创建/编辑/销毁用户。我现在遇到一个问题，即编辑操作没有更新用户。当我手动完成网站本身的操作时，一切正常，但测试无法更新用户。

这是我的规格：

```
it 'edits a user' do
  @user = FactoryGirl.create(:user)
  visit new_user_session_path unless current_path == new_user_session_path
  fill_in "Email", :with => @user.email
  fill_in "Password", :with => @user.password
  click_button "Sign In"
  user_to_edit = FactoryGirl.create(:user, first_name: "John", last_name: "Smith")
  visit edit_user_path(user_to_edit) unless current_path == edit_user_path(user_to_edit)
  fill_in 'user_last_name', with: "Changed"
  expect{
    click_button "Do it"
  }.to change { user_to_edit.last_name }.from("Smith").to("Changed")
  page.should have_content "John Changed"
end 
```

我得到的错误是：

```
Failure/Error: expect{
       result should have been changed to "Changed", but is now "Smith" 
```

如果我将测试的最后几行更改为：

```
 fill_in 'user_last_name', with: "Changed"
  click_button "Do it"
  page.should have_content "John Changed" 
```

然后测试成功。这似乎不对，因为如果`user_to_edit`没有更新，页面不应该显示“John Changed”。

我的删除请求规范工作正常：

```
it "deletes a user" do
  @user = FactoryGirl.create(:user)
  visit new_user_session_path unless current_path == new_user_session_path
  fill_in "Email", :with => @user.email
  fill_in "Password", :with => @user.password
  click_button "Sign In"
  user_to_delete = FactoryGirl.create(:user, first_name: "John", last_name: "Smith")
  visit users_path unless current_path == users_path
  expect{
    within ".user_#{user_to_delete.id}" do
      click_link 'Delete'
    end
  }.to change(User,:count).by(-1)
  page.should_not have_content "John Smith"
end 
```

我有一个用户模型：

```
class User < ActiveRecord::Base
  ROLES = %w[renter landlord admin]
  devise :database_authenticatable, :registerable, :recoverable, :rememberable, :trackable, :validatable
  attr_accessible :email, :password, :password_confirmation :first_name, :last_name, :role

  validates :password, :presence => true, :on => :create
  validates :first_name, :presence => true
  validates :last_name, :presence => true

  before_save :set_phones

  def set_phones
    self.fax = Phoner::Phone.parse(self.fax).format("%a%n") unless self.fax.blank?
    self.land_phone = Phoner::Phone.parse(self.land_phone).format("%a%n") unless land_phone.blank?
    self.mobile_phone = Phoner::Phone.parse(self.mobile_phone).format("%a%n") unless mobile_phone.blank?
  end
end 
```

我有这个工厂：

```
require 'faker'

FactoryGirl.define do
  factory :user do |f|
    f.first_name { Faker::Name.first_name }
    f.last_name { Faker::Name.last_name }
    f.email {Faker::Internet.email}
    f.password { "oq2847hrowihgfoigq278o4r7qgo4" }
    f.role { "admin" }
  end
end 
```

我的用户控制器中有这些操作：

```
 def edit
    @user = User.find_by_id(params[:id])

    respond_to do |format|
      format.html
    end
  end

  def update
    if params[:user][:password].blank?
      [:password,:password_confirmation].collect{|p| params[:user].delete(p) }
    end

    respond_to do |format|
      if @user.errors[:base].empty? and @user.update_attributes(params[:user])
        flash.now[:notice] = "Your account has been updated"
        format.html { render :action => :show }
      else
        format.html { render :action => :edit, :status => :unprocessable_entity }
      end
    end
  end 
```

该`routes.rb`文件也是相关的，因为我使用的是设计并有一个自定义用户控制器：

```
 devise_for :users, :skip => [:sessions, :registrations]

  devise_scope :user do
    get "login" => "devise/sessions#new", :as => :new_user_session
    post 'login' => 'devise/sessions#create', :as => :user_session
    delete "logout" => "devise/sessions#destroy", :as => :destroy_user_session
    get "signup" => "devise/registrations#new", :as => :new_user_registration
    put "update-registration" => "devise/registrations#update", :as => :update_user_registration
    delete "delete-registration" => "devise/registrations#destroy", :as => :delete_user_registration
    get "edit-registration" => "devise/registrations#edit", :as => :edit_user_registration
    get "cancel-registration" => "devise/registrations#cancel", :as => :cancel_user_registration
    post "create-registration" => "devise/registrations#create", :as => :user_registration
  end

  resources :users, :controller => "users" 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-11T16:04:24.020

您被智能测试框架的外观所迷惑 :) 您当然希望*db 条目*发生`user_to_edit`变化。`user_to_edit`是一个局部变量，所以`user_to_edit.last_name`无论你点击什么按钮都不会改变。尝试`{ user_to_edit.reload.last_name }`

# facebook - 获取“me()”发表的所有帖子和评论

> ID：14815058
> 
> 赞同：0
> 
> 时间：2013-02-11T15:16:46.687
> 
> 标签：facebook, facebook-graph-api, facebook-fql

我正在尝试检索创建的所有帖子和评论“me()”。但我没有找到任何方法来做到这一点。似乎只有一种方法可以检索“me()”墙上的帖子 - 但无法检索“me()”在其他用户的墙上创建的所有帖子。

显而易见的方法是使用流表中的 actor_id 字段，但那没有索引，因此查询将不起作用。

谷歌也没有返回解决方案——即使我认为这是一个常见问题？

我已经知道如何检索所有状态和喜欢，但帖子和评论似乎无法解决......

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T17:52:01.957

`https://graph.facebook.com/me/posts`将返回您要查找的内容。您需要`read_stream`访问此资源的权限。（[文档](https://developers.facebook.com/docs/reference/api/user/#posts)）

你肯定想要`type` `status`和的帖子`wall_post`。

目前，似乎没有办法通过 FQL 检索相同的数据。

# c - 使用终端而不是 Xcode 运行 C 脚本

> ID：14815061
> 
> 赞同：1
> 
> 时间：2013-02-11T15:16:49.557
> 
> 标签：c, xcode, compiler-construction, terminal, user-input

目前我正在使用 Xcode 在我的 Mac 上开发几个 C 程序。但是有1个问题。我的学习要求我通过编码使用某种输入字段。例如，如果用户想要运行程序 10 次或想要程序创建 10 个答案。我使用“atoi(argv[1])”只是为了从用户那里获取输入。

这正是问题所在。一旦我运行程序，它就会开始出现错误，这很正常，因为他正在等待输入并且没有收到它或其他东西。无论如何，我试图通过这个链接解决这个问题：[如何从终端运行命令行应用程序？](https://stackoverflow.com/questions/7780301/how-to-run-command-line-application-from-the-terminal)

不幸的是，这也没有解决它。我已经尝试重新安装 xcode，因为在我的终端中输入 gcc 也不起作用，但每次应用商店都会自动为我安装它。

有没有人可以解决我的问题。我将不胜感激，因为下周五我还有另一个截止日期:(如果我的用户输入不起作用，我将无法获得足够的成绩。

再次非常感谢您的帮助！

问候，

基普特斯克里迪

编辑：澄清问题。运行脚本时，我希望它在终端中弹出，并且是否需要输入字段，它应该要求输入。目前，由于缺乏输入，他正在立即崩溃。他不是在等待用户传递参数。他正在跳过那部分

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T16:03:48.800

HOWTO 将命令行参数从 Xcode IDE 传递给您的程序

1.  打开项目的活动**方案**。最简单的方法是从主菜单。选择**产品/方案/编辑方案...**
2.  在模式编辑器中，您会在左侧看到几个构建目标；您想要的是**“Run YourProjectName”**目标。选择它。
3.  在右侧，您将看到四个子选项卡，包括信息、参数、选项和诊断。选择**参数**
4.  添加/删除您需要的任何参数。在您的情况下，添加`/phi`为第一个参数，然后添加为`10`第二个。

值得注意的是：这也是您可以在启动时指定程序的当前工作目录的地方，而不是 Xcode 在构建二进制文件时使用的长临时路径。为此：

1.  从上面执行步骤 1-2。
2.  选择**选项**子选项卡
3.  单击“使用自定义工作目录”复选框。
4.  指定您希望 Xcode 从中执行程序的完整路径。

结合在程序中修复参数处理应该可以让您启动并运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T16:09:07.770

听起来你想从命令行获取你的参数，如果它们丢失，提示用户输入它们

让我们假设您想要参数：数字字号

```
#include <stdio.h>
#include <string.h>

int number1;
char word[128];
int number2;

int main(int argc, const char **argv)
{
    if (argc == 4)
    {
        number1 = atoi(argv[1]);
        strcpy(word, argv[2]);
        number2 = atoi(argv[3]);
    }
    else
    {
        do
            printf("Enter number word number: ");
        while (scanf("%d %s %d", &number1, word, &number2) != 3);
    }

    printf("I got %d '%s' %d\n", number1, word, number2);
    return 0;
} 
```

这使：

```
$ ./test
Enter number word number: 1 andy 12
I got 1 'andy' 12
$ ./test 2 pandy 56
I got 2 'pandy' 56 
```

请注意，此示例中的错误检查很差，可以进行很多改进（不使用`atoi()`是一种开始方式）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T15:57:27.837

正如RageD指出的那样，听起来您需要在程序中检查argc，否则在启动程序时参数不足会导致问题。

gcc 是 c 编译器 - 它生成一个可执行文件。当您在 Xcode 中点击“运行”时，它会编译您的程序，然后运行创建的可执行文件。创建的可执行文件的名称与您的 Xcode 项目名称相同。

要从命令行运行您在 Xcode 中构建的程序：

*   在 Xcode 的项目导航器中，在“产品”文件夹中找到可执行文件
*   将可执行文件拖入终端（您将获得可执行文件的绝对网址）
*   添加运行程序所需的任何参数
*   点击进入！

结果将类似于下面的代码片段（对于我的“MyCommandLineApp”项目）：

```
$ /Users/pliskin/Library/Developer/Xcode/DerivedData/MyCommandLineApp-hbpuxhguakaagvdlpdmqczucadim/Build/Products/Debug/MyCommandLineApp argument1 argument2 
```

# android - Android：应用程序在按钮单击时崩溃

> ID：14815064
> 
> 赞同：0
> 
> 时间：2013-02-11T15:17:03.153
> 
> 标签：android, button, android-intent, onclicklistener

我正在实现一个简单的照片共享客户端。

我的 UI 中有两个按钮：一个用于浏览图像，另一个用于发送图像。

问题是，当我按下发送按钮浏览并选择图像后，应用程序突然崩溃。

这是代码：

```
public class FileTransfer extends Activity {
    /** Called when the activity is first created. */

    private static final int SELECT_PICTURE = 1;

    private String selectedImagePath;
    private ImageView img;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_fs);
        img = (ImageView) findViewById(R.id.ivPic);
        Button Browse = (Button) findViewById(R.id.bBrowse);
        Button send = (Button) findViewById(R.id.bSend);
        final TextView status = (TextView) findViewById(R.id.tvStatus);

        Browse.setOnClickListener(new OnClickListener() {
                    public void onClick(View arg0) {
                        Intent intent = new Intent();
                        intent.setType("image/*");
                        intent.setAction(Intent.ACTION_GET_CONTENT);
                        startActivityForResult(Intent.createChooser(intent, "Select Picture"), SELECT_PICTURE);

                    }
                });
        send.setOnClickListener(new OnClickListener() {
            public void onClick(View arg0) {
                Socket sock;
                try {
                    sock = new Socket("MY_PCs_IP", 1149); 
                    File myFile = new File (selectedImagePath); 
                    byte [] mybytearray  = new byte [(int)myFile.length()];
                    FileInputStream fis = new FileInputStream(myFile);
                    BufferedInputStream bis = new BufferedInputStream(fis);

  bis.read(mybytearray,0,mybytearray.length);
                OutputStream os = sock.getOutputStream();
                System.out.println("Sending...");
                os.write(mybytearray,0,mybytearray.length);
                os.flush();
                sock.close();
            } catch (UnknownHostException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    });
}
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode == RESULT_OK) {
        if (requestCode == SELECT_PICTURE) {
            Uri selectedImageUri = data.getData();
            selectedImagePath = getPath(selectedImageUri);
            TextView path = (TextView) findViewById(R.id.tvPath);
            path.setText("Image Path : " + selectedImagePath);
            img.setImageURI(selectedImageUri);
        }
    }
}

public String getPath(Uri uri) {
    String[] projection = { MediaStore.Images.Media.DATA };
    Cursor cursor = managedQuery(uri, projection, null, null, null);
    int column_index = cursor
            .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
    cursor.moveToFirst();
    return cursor.getString(column_index);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-12T14:15:46.023

您正在 UI（主）线程上执行长时间运行的任务。最好考虑使用 AsyncTask 来执行发送操作。

# java - 对于使用记录器框架的 apache-tomcat 与将 STDOUT 重定向到 catalina.out

> ID：14815065
> 
> 赞同：1
> 
> 时间：2013-02-11T15:17:06.217
> 
> 标签：java, apache, tomcat, logging

在 apache-tomcat 中，使用 log4j 或 java.util.logging 等日志记录框架是否有任何**性能优势**，而不是打印到 stdout，后者被转储到 catalina.out（这是默认行为）？

在我的用例中，两者在功能上都是相同的，因为我不需要对记录的消息进行任何额外的格式化。

我想知道在这里使用日志框架的好处。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:30:56.660

从这个角度来看，您不会看到性能优势，只需使用提供您功能的任何东西。

无论如何，添加 log4j 之类的东西非常容易，并且提供了更多未来的灵活性，我什至不会想到依赖 stdout 来输出 webapp，无论我目前的要求有多么有限。

编辑：这不仅仅是消息的格式，包括编写日志条目的类、代码行、线程名称等 - 一旦你使用所有这些都可以“免费”包含在日志中日志框架，它们只是在标准输出中不可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T15:37:58.123

除了格式化之外，使用记录器代替打印到控制台还有很多优点。还有性能。例如，您可以在日志级别之前简单地切换以实现更好的性能。使用正确的记录器（如 logback）时，您可以获得额外的性能。例如 logback 在日志消息中有功能使用占位符

```
log.debug ("Result of big function = {}", bigAndLongMethod()) 
```

这会更快

```
log.debug("Result of big function = " + bigAndLongMethod()) 
```

因为在第一种情况下，`bigAndLongMethod()`如果您的日志级别高于调试，则不会执行。

使用一些额外的附加程序可以提高性能，即将日志重定向到其他主机或登录到数据库。

作为额外的好处，您将在您的项目中获得更多符合标准的日志支持，并且您将来会对它更加满意，即使您现在看不到任何差异。

# javascript - 如果 iframe 被删除，SoundCloud javascript api 错误

> ID：14815068
> 
> 赞同：1
> 
> 时间：2013-02-11T15:17:16.000
> 
> 标签：javascript, soundcloud

我正在使用 soundcloud 小部件 html5：[https](https://developers.soundcloud.com/docs/api/html5-widget) ://developers.soundcloud.com/docs/api/html5-widget我有一个问题：

用户可以在我的页面上播放 soundcloud 声音。当他们点击播放时，我使用 javascript 创建了一个 soundcloud 小部件。一切都是正确的。但是我页面的 dom 经常被 javascript 修改，当删除 soundcloud iframe 时 soundcloud javascript api 会出错：所有未来的小部件创建都将在这部分代码上失败（因为缺少以前的 iframe）：

```
_player = SC.Widget(document.getElementById(_iframe_id)); 
```

萤火虫追踪：

```
TypeError: e.contentDocument is null 
```

您知道解决/绕过此问题的方法吗？谢谢 ！

jsbin 上的示例代码：http: [//jsbin.com/adixoq/1/edit](http://jsbin.com/adixoq/1/edit)。使用它：

1.  按下按钮 1：创建一个小部件；准备好警报消息时。
2.  按下按钮 2：创建第二个小部件；准备好警报消息时。
3.  按下按钮 3：删除 iframe1 的 dom，创建第三个小部件。出现错误并且未抛出就绪事件

# c# - 混合模式程序集是针对“v2.0.50727”错误构建的

> ID：14815076
> 
> 赞同：9
> 
> 时间：2013-02-11T15:17:42.947
> 
> 标签：c#, .net, .net-4.0, .net-2.0, mixed-mode

首先，我在[这里](https://stackoverflow.com/questions/1604663/what-does-uselegacyv2runtimeactivationpolicy-do-in-the-net-4-config/2467255#2467255)找到了 StackOverflow 上的其他帖子，但它并没有解决我的错误。

我有 3 个不同的环境/域，每个位置都有一个构建服务器。我的 Dev 和 UAT 环境构建得很好，但生产版本不起作用。

我收到错误

> 混合模式程序集是针对运行时版本“v2.0.50727”构建的，如果没有额外的配置信息，则无法在 4.0 运行时中加载

我已将此标签添加到我的 app.config 文件中（这是我上面链接中的建议修复）

```
 <startup useLegacyV2RuntimeActivationPolicy="true">
    <supportedRuntime version="v4.0"/>
  </startup> 
```

我的构建服务器/环境/域之间还有什么不同会导致这个问题？

在回答艾伦的问题时，我相信这就是您要问的：

```
<Project ToolsVersion="4.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
    <Platform Condition=" '$(Platform)' == '' ">x86</Platform>
    <ProductVersion>8.0.30703</ProductVersion>
    <SchemaVersion>2.0</SchemaVersion>
    <ProjectGuid>{D3D87C05-2811-489B-9F0D-7676B6485AA0}</ProjectGuid>
    <OutputType>Exe</OutputType>
    <AppDesignerFolder>Properties</AppDesignerFolder>
    <RootNamespace>MVST.Batch.CorrespondenceConversion</RootNamespace>
    <AssemblyName>MVST.Batch.CorrespondenceConversion</AssemblyName>
    <TargetFrameworkVersion>v3.5</TargetFrameworkVersion>
    <FileAlignment>512</FileAlignment>
  </PropertyGroup> 
```

我有超过 100 个其他项目以完全相同的方式设置并且构建正常。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-10-04T08:31:37.490

[http://support.microsoft.com/kb/2572158](http://support.microsoft.com/kb/2572158)

将下面的措辞添加到`useLegacyV2RuntimeActivationPolicy="true"`以下任一位置：

1.  sgen.exe.config 文件位于以下位置：..\Program Files\Microsoft SDKs\Windows\v7.0A\bin\NETFX 4.0 Tools\
2.  应用程序的 app.config 文件

```
<startup useLegacyV2RuntimeActivationPolicy="true">

            <supportedRuntime version="v4.0" />

</startup> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-24T20:19:43.140

如果您在 64 位中运行，则可能必须将其添加到 Visual Studio 测试引擎配置中：

> C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\CommonExtensions\Microsoft\TestWindow\vstest.executionengine.exe.config

像这样添加启动节点：

```
<startup useLegacyV2RuntimeActivationPolicy="true">
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
    <requiredRuntime version="v4.0.20506" />
</startup> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T18:37:04.320

这是有效的修复...仍然不确定为什么我的项目需要 2.0 而其他项目（在我的问题中的链接中）需要 4.0。

```
 <startup>
    <supportedRuntime version="v2.0.50727"/>
  </startup> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-16T17:58:47.173

在单元测试的情况下，如果您使用 Resharper 进行单元测试，那么您已经知道其他答案都不适合您。

Resharper 启动 ResharperTestRunner（32 位或 64 位）以执行您的单元测试。该文件位于（至少在我的系统中）C:\Users[user]\AppData\Local\JetBrains\Installations\ResharperPlatform[version] 下。此文件的配置应位于同一位置并应具有相同的名称，但带有 .config 后缀。在我的系统中，它不存在。所以，我创建了它并添加了这个：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <startup useLegacyV2RuntimeActivationPolicy="true">
    <!-- 4.0 RTM -->
    <supportedRuntime version="v4.0.30319"/>

    <!-- 2.0 RTM -->
    <supportedRuntime version="v2.0.50727"/>
  </startup>
</configuration> 
```

然后，我的测试开始起作用。希望这可以帮助。

# c# - 调用 #2 的目标已引发异常

> ID：14815082
> 
> 赞同：-1
> 
> 时间：2013-02-11T15:18:03.910
> 
> 标签：c#

```
 public static ItemCollection Deserialize(string file)
    {
        ItemCollection Items;
        ItemData[] _Items;
        Stream stream = File.Open(file, FileMode.OpenOrCreate);
        BinaryFormatter formatter = new BinaryFormatter();            
        _Items = (ItemData[])formatter.Deserialize(stream); //Im getting the error here
        Items = new ItemCollection();
        Items.AddRange(_Items);
        stream.Close();
        return Items;
    } 
```

你好！我已经在互联网上搜索了这个问题，但似乎没有任何帮助。请记住，我在编写 c# 方面有一些经验，我每周上 1 次课！所以，如果你能看看我的问题并尝试帮助我，那将会很有帮助！

这是异常-调用的目标已引发异常。

我查看了它说的异常快照 - {“未找到成员'ItemData'。”}

我正在尝试制作一个程序，将我的文本框中的一本书信息序列化为文本文件。我得到了那个工作，但我无法将信息加载回文本框中。

[这是我的商品数据类]

```
using System;
using System.Runtime.Serialization;
using System.Runtime.Serialization.Formatters.Binary;

namespace FurnatureSaver
{
[Serializable()]

class ItemData : ISerializable
{

    private string _Color;

    public ItemData()
    {
    }
    public ItemData(SerializationInfo Information, StreamingContext X101)
    {
        _Color = (String)Information.GetValue(_Color, typeof(string));

    }
    public String Color
    {
        get { return _Color; }
        set {_Color = value;}

    }
    public void GetObjectData(SerializationInfo Information, StreamingContext X101)
    {
        Information.AddValue("Color", _Color );

    }
    public void Set()
   {
    _Color = Color.ToString();
    }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:56:06.417

如果你这样写它会改变什么吗？

```
namespace FurnatureSaver
{
    [Serializable()]    
    class ItemData : ISerializable
    {
        public String Color
        {
            get;
            set;
        }

        public ItemData()
        {
        }

        public ItemData(SerializationInfo Information, StreamingContext X101)
        {
            Color = (String)Information.GetValue("Color", typeof(string));

        }
        public void GetObjectData(SerializationInfo Information, StreamingContext X101)
        {
            Information.AddValue("Color", Color);

        }

        // I don't see the point of this method. 
        public void Set()
        {
            Color = Color;
        }
    }
} 
```

希望这会有所帮助

# types - 获取列表clojure中的元素类型

> ID：14815084
> 
> 赞同：1
> 
> 时间：2013-02-11T15:18:15.873
> 
> 标签：types, clojure, quote

我有一个引用的表达式，例如

```
(def foo '(+ 1 (bar))) 
```

我希望能够找到此列表中任何元素的类型，例如执行类似的操作

```
(type (second foo)) 
```

根据值的类型，我得到不同的结果，例如以下两者都评估为 java.lang.Double，这就是我想要的

```
(type '3.0)
(type 3.0) 
```

然而

```
(type '+)
(type +) 
```

分别产率

```
clojure.lang.Symbol
clojure.core$_PLUS_ 
```

我想也许解决键会有所帮助

```
(type (resolve '+)) 
```

评估为：

clojure.lang.Var

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T15:56:38.653

您的列表中只有符号`'+`和`'bar`自我评估对象`1`（长）

```
(= '(+ 1 (bar))
   (list '+ '1 (list 'bar)))
=> true 
```

使用`eval`.

```
(type (eval '+)) 
=> clojure.core$_PLUS_ 
```

和

```
(type '3.0) = (type 3.0) = (type (eval '3.0)) = java.lang.Double 
```

因为数字是自我评估的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T15:56:49.940

取消引用已解析的 Var：

```
(type (deref (resolve '+))) 
```

# c# - 使用 Linq 正确测验和按主题分组

> ID：14815086
> 
> 赞同：0
> 
> 时间：2013-02-11T15:18:16.860
> 
> 标签：c#, linq, collections

我有 3 个列表和课程：

```
List<student_Answers> student_answer = new List<student_Answers>
{new student_Answers {id = "1", q1 ="*C", q2= "*D", q3 =  "*B", q4= "*A" },
new student_Answers {id = "2", q1 ="*D", q2= "*E", q3 =  "*B", q4= "*A" }};

List<answer> correct_answer = new List<answer> 
{new answer{r1 ="*C", r2= "*D", r3 =  "*B", r4= "*C" }};

List<Topic> topic_question = new List<Topic>
{ new Topic{ q1_topic ="Verb to be", q2_topic= "Verb to be", q3_topic =  "Listening", q4_topic= "Listening" }}; 
```

我试过了：

```
foreach (var na in student_answer)
    {var grade = from n in student_answer where !na.Contains(n) select n;} 
```

它不起作用，我不知道如何将我的问题按主题分组。

**预期输出**：

失败的问题：

```
Id= 1 : 失败的问题 = 4 : Topic = "Listening"

Id= 2 : 失败的问题 = 1 : Topic = "动词 to be"

Id= 2 : 失败的问题 = 4 : Topic = "Listening"
```

主题百分比：

```
听力 = 2/4 = 50% 不正确

动词 to be = 1/4 = 25% 不正确
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:47:54.503

这里有一些代码可以为您指明正确的方向。

```
public class StudentQuestion : List<Question>
{
    public int StudentId { get; set; }

    public StudentQuestion(int studentId, IEnumerable<Question> questions)
    :base(questions)
    {
        StudentId = studentId;
    }

    public bool AddAnswer(int id, string response)
    {
        Question question = null;
        if((question = this.SingleOrDefault(q => q.Id == id)) == null)
            return false;

        question.Answer = response;
        return true;
    }

    public bool RemoveAnswer(int id)
    {
        Question question = null;
        if((question = this.SingleOrDefault(q => q.Id == id)) == null)
            return false;

        question.Answer = string.Empty;
        return true;
    }

    public double ScoreTest(IEnumerable<Answer> answers)
    {
        List<bool> score = this.Join(answers, a1 => a1.Answer.Response, a2 => a2.Response, (a1, a2) => a1.HasCorrectAnswer(a2)).ToList();
        return ((double)score.Where(s => s).Count()) / score.Count;
    }
}

public class Question
{
    public int Id { get; set; }
    public string Text { get; set; }
    public Answer Answer { get; set; }

    public bool HasCorrectAnswer(Answer correctAnswer)
    {
        return correctAnswer == Answer;
    }
}

public class Answer : IEquatable<Answer>
{
    public string Response { get; set; }

    public bool Equals(Answer answer)
    {
        if(answer == null) return false;

        return string.Compare(this.Response, answer.Response, true) == 0;
    }

    public override bool Equals(object obj)
    {
        if(obj == null)
            return false;

        var answerObj = obj as Answer;
        return answerObj == null ? false : Equals(answerObj);
    }

    public override int GetHashCode()
    {
        return Response.GetHashCode();
    }

    public static bool operator == (Answer answer1, Answer answer2)
    {
        if ((object)answer1 == null || ((object)answer2) == null)
            return object.Equals(answer1, answer2);

        return answer1.Equals(answer2);
    }

    public static bool operator != (Answer answer1, Answer answer2)
    {
        if ((object)answer1 == null || ((object)answer2) == null)
            return ! object.Equals(answer1, answer2);

        return ! (answer1.Equals(answer2));
    }
} 
```

# java - 在 Joda-Time 中时区关闭 10 小时

> ID：14815089
> 
> 赞同：3
> 
> 时间：2013-02-11T15:18:23.210
> 
> 标签：java, datetime, timezone, jodatime, datetime-format

我需要将字符串解析为[Joda-Time](http://www.joda.org/joda-time/) [DateTime](http://www.joda.org/joda-time/apidocs/org/joda/time/DateTime.html)（或 java.util.Date。）这是我得到的字符串的一个示例：

```
eventDateStr = 2013-02-07T16:05:54-0800 
```

我正在使用的代码：

```
DateTimeFormatter presentation = DateTimeFormat.forPattern("yyyy-MM-dd kk:mm:ssZ");
DateTime eveDate = presentation.parseDateTime(eventDateStr); 
```

上面抛出了这个异常：

```
Invalid format: "2013-02-07T16:05:54-0800" is malformed at "T04:03:20-0800" 
```

所以我从那里解析'T'：

```
eventDateStr = eventDateStr.indexOf("T") > 0 ? eventDateStr.replace("T", " ") : eventDateStr; 
```

并再次尝试。这次也不例外，但时区关闭：

```
2013-02-08T02:05:54.000+02:00 
```

请注意区别：在原始字符串中，时区是“-0800”，而这里是“+02:00”。这反过来又改变了整个日期，现在是一天后。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T15:58:56.370

调用对象[`withOffsetParsed`](http://joda-time.sourceforge.net/apidocs/org/joda/time/format/DateTimeFormatter.html#withOffsetParsed%28%29)上的方法`DateTimeFormatter`以获取`DateTimeFormatter`保持从字符串解析的时区，而不是将其偏移到本地时区的方法。

关于`T`打印输出时显示的原因`DateTime`，[Basil Bourque](https://stackoverflow.com/users/642706/basil-bourque)在下面的评论中有一个很好的解释。

> 关于`T`， a`DateTime`不是字符串，也不包含字符串。实例可以[`DateTimeFormatter`](http://www.joda.org/joda-time/apidocs/org/joda/time/format/DateTimeFormatter.html)生成存储在`DateTime`. 当您在（[隐式或显式](https://stackoverflow.com/q/328661/642706)`toString`）上调用该方法时，将自动使用基于[ISO 8601](https://en.wikipedia.org/wiki/ISO_8601)的内置格式化程序。该格式化程序使用格式。`DateTime``YYYY-MM-DDTHH:MM:SS.ssssss+00:00`

# java - 制作字典的正确方法

> ID：14815092
> 
> 赞同：-1
> 
> 时间：2013-02-11T15:18:30.050
> 
> 标签：java, dictionary, map

我需要为我的 java 程序制作一本字典（英语到英语）。我只想找到一个单词和含义的数据库，然后我为每个单词运行搜索查询以获取它的含义。我搜索`StackoverFlow`并看到了关于如何制作字典的相同问题。每个人都建议使用该`Map`课程。例如：[如何在java中制作字典？](https://stackoverflow.com/questions/9480292/how-to-make-a-dictionary-in-java) 这是正确的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:24:55.583

嵌入式数据库也没有那么困难。尝试几个示例，使用不同的操作策略。数据库可以保持持久性。java Derby 数据库就在那里，但 H2SQL 和其他一些数据库可能更有价值。

您需要比地图更多的管道，但您还可以进行*查询*，例如同义词 - 如果您正在深入研究这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T15:20:23.083

是的，地图适用于字典实现。来自`Map`的 JavaDoc：

> 将键映射到值的对象。地图不能包含重复的键；每个键最多可以映射到一个值。
> 
> 这个接口代替了 Dictionary 类，它是一个完全抽象的类，而不是一个接口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T15:22:11.410

字典只要将单词映射到定义也可以包含将单词映射到单词。

所以使用 Map 是最有意义的，特别是你可以拥有你的`Key`：

```
public class Key  
{  
     private String keyName;
     ...
} 
```

你`value`是一组键：

```
Map<Key,Set<Key>> dictionary = ...;  
Set<Key> catKeys = new HashSet<Key>();  
catKeys.add('kitty');  
catKeys.add('kitten');  //technically true just a small one  
dictionary.put(new Key('Cat'), catKeys); 
```

# drupal - Drupal 7 主题配置

> ID：14815093
> 
> 赞同：0
> 
> 时间：2013-02-11T15:18:30.820
> 
> 标签：drupal, drupal-theming

我正在为具有功能的 Drupal 7 制作自定义主题（我的意思是 .info 文件中的那些项目）。所以我可以使用复选框来打开/关闭它们。

问题是我希望将功能配置为字符串（文本输入）而不是复选框。

你知道如何实现这一目标吗？

tnx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:22:36.400

这些是 drupal.org 上的高级功能：http: [//drupal.org/node/177868](http://drupal.org/node/177868)

# iphone - iphone 开发：如何在 UITableView 上放置 UIView

> ID：14815101
> 
> 赞同：2
> 
> 时间：2013-02-11T15:19:01.730
> 
> 标签：iphone, ios, objective-c, uitableview, uiview

在我的应用程序中，我使用故事板。我在故事板中的元素之一是 UITableViewController。所以它里面有一个tableview。

我的问题是如何在这个 tableview 上放置一个 UIView。它将被隐藏，我想在按下 tableview 中的 tableviewcell 时使其可见。那可能吗？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T10:48:01.913

最好的解决方案是在 StoryBoard 中使用普通视图控制器 (UIViewController)。您的控制器将需要实现两个协议（UITableViewDataSource 和 UITableViewDelegate），并且您需要在视图控制器的视图中添加 UITablewView。

在这种情况下，在界面生成器中，您将能够将任何视图放在视图控制器的视图中（可以将其放在表视图上方）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T15:27:41.597

使用 tableHeaderView 属性。

返回显示在表格上方的附件视图。

```
@property(nonatomic, retain) UIView *tableHeaderView 
```

表头视图不同于节头。

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T15:38:14.000

让我们假设您的视图隐藏/显示在表视图顶部是 topView，声明为全局变量。将 .h 中的 topView 声明为

```
 UIView *topView; 
```

现在让我们假设你有 UITableViewController 对象作为 tableViewController 然后，在 tableViewController 类的 viewDidLoad 中初始化 topView

```
-(void)viewDidLoad
{
         topView=[[UIView alloc] initWithFrame:yourNeededFrameSize];
         [self.tableView addSubview:topView];//tableView is a property for UITableViewController inherited class 
         topView.hidden=YES;//Hide it initially for the first time. 
} 
```

假设您在这里实现了 UITableViewDelegate 方法，您将在 didSelectRowAtIndexPath 中执行此操作

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if(topView.isHidden==YES)
    {
        topView.hidden=NO;
    }
    else
    {
        topView.hidden=NO;
    }

} 
```

希望能帮助到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T10:42:50.533

你也可以看到前面。

```
[view bringsubviewtofront]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-22T07:35:04.457

我有一个类似的问题，我想在我的 UITableViewController 上添加一个加载指示器。为了解决这个问题，我将 UIView 添加为窗口的子视图。这解决了问题。我就是这样做的。

```
-(void)viewDidLoad{
            [super viewDidLoad];
            //get the app delegate
            XYAppDelegate *delegate = [[UIApplication sharedApplication] delegate];

            //define the position of the rect based on the screen bounds
            CGRect loadingViewRect = CGRectMake(self.view.bounds.size.width/2, self.view.bounds.size.height/2, 50, 50);
            //create the custom view. The custom view is a property of the VIewController
            self.loadingView = [[XYLoadingView alloc] initWithFrame:loadingViewRect];
            //use the delegate's window object to add the custom view on top of the view controller
            [delegate.window addSubview: loadingView]; 
        } 
```

# java - Android：将相机流式传输为 mjpeg

> ID：14815103
> 
> 赞同：18
> 
> 时间：2013-02-11T15:19:05.273
> 
> 标签：java, android, streaming, mjpeg

经过几天的 SO 和谷歌搜索后，我开始放弃，所以我想我不妨在这里发帖。

我正在创建一个应该提供某种视频聊天的 android 应用程序。由于这应该尽可能接近实时，我阅读了各种协议并决定尝试 MJPEG 作为初学者（暂时不关心音频）。

现在流式传输数据让我发疯。连接建立，应用程序开始将相机预览帧写入流，但 VLC 和 mplayer 都没有开始播放视频。监控连接显示数据正在到达。

**连接** 此代码由异步任务执行，成功通知侦听器：

```
try
    {
        ServerSocket server = new ServerSocket(8080);

        socket = server.accept();

        server.close();

        Log.i(TAG, "New connection to :" + socket.getInetAddress());

        stream = new DataOutputStream(socket.getOutputStream());
        prepared = true;
    }
    catch (IOException e)
    {
        Log.e(TAG, e.getMessage();
    } 
```

在我的 PC 上，我执行“mplayer `http://tabletIP:8080`”并且平板电脑注册了一个连接（从而启动了我的流媒体和相机预览）。这也适用于 VLC。

**流**式 这会将标头写入流：

```
if (stream != null)
{
    try
    {
        // send the header
        stream.write(("HTTP/1.0 200 OK\r\n" +
                      "Server: iRecon\r\n" +
                      "Connection: close\r\n" +
                      "Max-Age: 0\r\n" +
                      "Expires: 0\r\n" +
                      "Cache-Control: no-cache, private\r\n" + 
                      "Pragma: no-cache\r\n" + 
                      "Content-Type: multipart/x-mixed-replace; " +
                      "boundary=--" + boundary +
                      "\r\n\r\n").getBytes());

        stream.flush();

        streaming = true;
    }
    catch (IOException e)
    {
        notifyOnEncoderError(this, "Error while writing header: " + e.getMessage());
        stop();
    }
} 
```

之后通过 Camera.onPreviewFrame() 回调触发流式传输：

```
@Override
public void onPreviewFrame(byte[] data, Camera camera)
{
    frame = data;

    if (streaming)
        mHandler.post(this);
}

@Override
public void run()
{
    // TODO: cache not filling?
    try
    {
                    // buffer is a ByteArrayOutputStream
        buffer.reset();

        switch (imageFormat)
        {
            case ImageFormat.JPEG:
                // nothing to do, leave it that way
                buffer.write(frame);
                break;

            case ImageFormat.NV16:
            case ImageFormat.NV21:
            case ImageFormat.YUY2:
            case ImageFormat.YV12:
                new YuvImage(frame, imageFormat, w, h, null).compressToJpeg(area, 100, buffer);
                break;

            default:
                throw new IOException("Error while encoding: unsupported image format");
        }

        buffer.flush();

        // write the content header
        stream.write(("--" + boundary + "\r\n" + 
                      "Content-type: image/jpg\r\n" + 
                      "Content-Length: " + buffer.size() + 
                      "\r\n\r\n").getBytes());

        // Should omit the array copy
        buffer.writeTo(stream);

        stream.write("\r\n\r\n".getBytes());
        stream.flush();
    }
    catch (IOException e)
    {
        stop();
        notifyOnEncoderError(this, e.getMessage());
    }
} 
```

没有抛出异常。mHandler 在它自己的 HandlerThread 中运行。只是为了确保我尝试使用 AsyncTask，但无济于事（顺便说一句，这更好吗？）。

编码帧在 android 端很好，我将它们保存为 jpg 文件并可以打开它们。

我的猜测是我必须以某种方式对数据进行聚类，或者必须为套接字或其他东西设置一些选项，但是....好吧，我被卡住了。

**tl;dr:** VLC 没有播放流，mplayer 说'缓存没有填充'，问题可能在最后一个代码段，需要帮助~ :)

非常感谢你！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-12T14:59:13.857

我得到了它。好像我的 http-/content-headers 搞砸了。正确的标题应该是：

```
stream.write(("HTTP/1.0 200 OK\r\n" +
                          "Server: iRecon\r\n" +
                          "Connection: close\r\n" +
                          "Max-Age: 0\r\n" +
                          "Expires: 0\r\n" +
                          "Cache-Control: no-store, no-cache, must-revalidate, pre-check=0, post-check=0, max-age=0\r\n" +
                          "Pragma: no-cache\r\n" + 
                          "Content-Type: multipart/x-mixed-replace; " +
                          "boundary=" + boundary + "\r\n" +
                          "\r\n" +
                          "--" + boundary + "\r\n").getBytes()); 
```

和

```
stream.write(("Content-type: image/jpeg\r\n" +
                      "Content-Length: " + buffer.size() + "\r\n" +
                      "X-Timestamp:" + timestamp + "\r\n" +
                      "\r\n").getBytes());

buffer.writeTo(stream);
stream.write(("\r\n--" + boundary + "\r\n").getBytes()); 
```

当然，把边界放在哪里是你自己的选择。也可能有一些字段是可选的（例如大多数在 Cache-Control 中），但这是可行的，直到现在我都懒得把它们去掉。重要的部分是记住换行符（`\r\n`东西）......

# regex - 正则表达式从完整文件路径获取文件名而不扩展

> ID：14815105
> 
> 赞同：2
> 
> 时间：2013-02-11T15:19:19.633
> 
> 标签：regex

如何从以下文件路径中提取不带扩展名的文件名：

```
D:\Projects\Extract\downtown - second.pdf 
```

以下正则表达式为我提供了带扩展名的文件名：`[^\\]*$` 例如`downtown - second.pdf` ，以下正则表达式为我提供了不带扩展名的文件名：`(.+)(?=(\.))` 例如`D:\Projects\Extract\downtown - second`

我正在努力将两者组合成一个正则表达式，以提供我想要的结果： Downtown - second

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T15:23:12.040

我怀疑您的第二个正则表达式不会给您显示的输出。它会给你完整的字符串，直到第一个`period (.)`。

要仅获取不带扩展名的文件名，您可以使用此正则表达式：-

```
[^\\]*(?=[.][a-zA-Z]+$) 
```

我刚刚用你的第一个正`(.+)`则表达式替换了你的第二个正则`[^\\]*`表达式，并添加了匹配`pdf`到最后的模式。

现在，此模式将匹配`0 or more`任何字符的重复，但是`backslash(\)`，然后是 a `.`，然后`1 or more`是组成扩展名的字母的重复。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-11-16T15:02:00.270

我做了这个，它可以捕捉到大部分的可能性：

```
/[^\\\/]+(?=\.[\w]+$)|[^\\\/]+$/ 
```

/路径/到/**文件**

/path/to/**文件**.txt

/path.with/dots.to/**文件**.txt

/path/to/ **file.with.dots** .txt

**文件**.txt

C:\path\to\**文件**.txt

等等...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-25T22:40:23.633

我用这个模式

```
[^\/]+[.+\.].*$  for / path separator
[^\\]+[.+\.].*$  for \ path separator 
```

hich 匹配字符串末尾的文件名，而不用担心字符。有一个例外，如果路径出于某种原因有一个带有句点的文件夹，这会令人不安。以 . 开头的 Linux 隐藏目录。像 .rvm 不受影响。

希望这可以帮助。 [http://rubular.com/r/LNrI4inMU1](http://rubular.com/r/LNrI4inMU1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T16:07:15.107

我必须在第一个 ']' 之前使用一个额外的反斜杠来完成这项工作

```
[^\\\]*(?=[.][a-zA-Z]+$) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-03T21:19:22.233

我使用以下正则表达式从 /path/to/file.pdf 捕获文件：

```
[^/]*(?=\.[^.]+($|\?)) 
```

希望这可以帮助你

# java - 如何在java中捕获一个groovy抛出的异常？

> ID：14815106
> 
> 赞同：2
> 
> 时间：2013-02-11T15:19:19.773
> 
> 标签：java, exception, groovy

我正在尝试扩展一些遗留代码以使其更能容忍网络中断。我有一些（遗留）groovy 代码，它通过 wslite 封装了对 web 服务（CallWebService）的调用。有时，此调用会引发 wslite.http.HTTPClientException 或 java.net.ConnectException 异常（这已通过添加 `log.info("Exception " + ex.getClass().getName() + " throw");` 到我的 log4j 日志记录中来确定）

调用这个 groovy 代码的代码在 java 中，如下所示：

```
public static String getDataFromWebService(String webServiceUrl, String referenceNumber) {
try {       
    ReturnedData returnedData = new CallWebService(webServiceUrl, referenceNumber);
    return (String)returnedData.toXml();
}
catch (Exception ex) {
    log.info("Exception caught: class of exception is " + ex.getClass().getName());
    throw ex;
} 
```

我想要做的是捕获抛出的异常（wslite.http.HTTPClientException 或 java.net.ConnectException）并重试调用（因为它可能是一个小故障）一次或两次。

当我尝试添加

```
catch (java.net.ConnectException ex) 
```

并构建，构建失败

```
exception ConnectException is never thrown in body of corresponding try statement 
```

我应该怎么做才能捕捉到适当的异常并做出反应？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T20:57:00.727

在您的 Java 代码中，我会执行以下操作：

```
try {
  callGroovy();
} catch (RuntimeException e) {  // EDIT --- Should be Exception, RuntimeException
  if (e instanceof HTTPClientException || e.getCause() instanceof ConnectException) {
    throw e;
  }
  // log other exception...
} 
```

这比捕获单个异常类型要安全一些。以我的经验，像 groovy 这样的动态语言更有可能抛出意料之外的运行时异常。捕获所有运行时异常将确保常规异常不会感染程序的其余部分。

# java - 如何从文件中的 Uri id 获取路径？

> ID：14815107
> 
> 赞同：0
> 
> 时间：2013-02-11T15:19:21.287
> 
> 标签：java, android, windows, path, uri

我试图用我的应用创建的视频制作画廊。当我单击其中一张缩略图时，我想将所选视频保存在我的首选项中。

为了获得缩略图，我编写了以下代码：

公共无效 addVidsToArray() {

```
 String[] projection = { MediaStore.Video.Media._ID };
    String selection = MEDIA_DATA + " like ? ";
    String [] selectionArgs = new String[] {"%Bla%"};
    int columIndex;
    int id;

    Cursor videoCursor = managedQuery(MediaStore.Video.Media.EXTERNAL_CONTENT_URI,
            projection, 
            selection, 
            selectionArgs, 
            null);

    videoCursor.moveToFirst();

    if(videoCursor.getCount() >= 1)
    {
        while (videoCursor.moveToNext()) {
            columIndex = videoCursor.getColumnIndexOrThrow(MediaStore.Video.Media._ID) ;
            id = videoCursor.getInt(columIndex);                
            bitmaps.add(getThumbnail(id));
        }
    } 

}

public Bitmap getThumbnail(int id)
{
    ContentResolver crThumb = getContentResolver();
    BitmapFactory.Options options=new BitmapFactory.Options();
    options.inSampleSize = 1;
    Bitmap curThumb = MediaStore.Video.Thumbnails.getThumbnail(crThumb, id, MediaStore.Video.Thumbnails.MICRO_KIND, options);

    curThumb = Bitmap.createScaledBitmap(curThumb, 300, 300, false);

    return curThumb;
} 
```

由于 Uri id，我得到了缩略图图片。现在我的问题是如何将其恢复到新文件中的正常路径以保存它。

以下代码是应该将视频保存到首选项的 onClickListener。但是，如果我将 Uri 添加到新文件中，则该文件不存在。

我不明白。

```
ga.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView parent, View v, int position, long id)
        {               
            String[] projection = { MediaStore.Video.Media._ID };
            String selection = MEDIA_DATA + " like ? ";
            String [] selectionArgs = new String[] {"%Bla%"};
            int columIndex;
            int id1;

            Cursor videoCursor = managedQuery(MediaStore.Video.Media.EXTERNAL_CONTENT_URI,
                    projection, 
                    selection, 
                    selectionArgs, 
                    null);

            videoCursor.moveToFirst();

            if(videoCursor.getCount() >= 1)
            {
                while (videoCursor.moveToNext()) {
                    columIndex = videoCursor.getColumnIndexOrThrow(MediaStore.Video.Media._ID) ;
                    id1 = videoCursor.getInt(columIndex);
                    daten.add(id1+"");                      
                }
            } 
            Log.v("vid id", ""+daten.get(position));

            int idData = Integer.parseInt(daten.get(position));

            saveVideo(idData);                              
        }
    });

}

public void saveVideo(int idData)
{
    String uriString = "content://media/external/video/media/" + idData;
    Uri uri = Uri.parse(uriString);
    File mVideoFile = new File(uriString);

    Log.v("testpfad", ""+ mVideoFile.getAbsolutePath() + " " + mVideoFile.getParentFile().getAbsolutePath() + " " + mVideoFile.exists());               
    mVideoFileLen = getDurationFromURI(uri);
    //setPreferences(mVideoFile.getAbsolutePath(), PICKED_VIDEO);
    //setPreferences(mVideoFileLen, VIDEO_LEN);     
    //startActivity(new Intent(this, Finished.class));  
} 
```

最后，我需要借助 Uri 中的 Id 创建一个文件。

# html - 如何在响应式网格中创建两个可独立滚动的列？

> ID：14815108
> 
> 赞同：1
> 
> 时间：2013-02-11T15:19:23.673
> 
> 标签：html, css, twitter-bootstrap, scrollable

我需要呈现一个主从屏幕，其中主和详细信息在响应式网格中各自独立可滚动、并排列。当浏览器宽度减小到某个阈值以下时，两列会堆叠在一起，只有一个整页滚动。

理想情况下，我希望在 twitter-bootstrap 中完成此操作。看来这应该很简单吧？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T15:25:47.287

我想你在 Bootstrap 中想要这样的东西，其中 .scrollable div 设置为在它们上具有“溢出：自动”。

Bootstrap 将在较低的分辨率下自动堆叠。

```
<div class="row-fluid">
    <div class="span6">
        <div class="scrollable"></div>
    </div>
    <div class="span6">
        <div class="scrollable"></div>
    </div>
</div> 
```

# css - rails redirect_to 通知 - 如何应用 css

> ID：14815123
> 
> 赞同：1
> 
> 时间：2013-02-11T15:20:27.360
> 
> 标签：css, ruby-on-rails-3

我在 users_controller.rb 中发出以下命令：

```
format.html { redirect_to root_url, notice: 'User was successfully updated.' } 
```

该通知正确显示在我的根页面顶部，但我似乎无法对其应用任何 CSS 样式。

在 application.css 我放了以下内容：

```
#flash_notice {
  padding: 5px 8px;
  margin: 10px 0;
  width: 70%;
  background-color: #CFC;
  border: solid 1px #6C6;
} 
```

但它没有效果。我也尝试过 .notice 和 #notice 但它们也没有效果。那么如何将样式应用于通知？

谢谢你的帮助。

轨道纽曼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:25:04.313

看看你的`application.html.erb`。你应该有类似的东西：

```
<% flash.each do |key, value| %>
  <div class="flash <%= key %>"><%= value %></div>
<% end %> 
```

如果是这样，`class`将是`.success`or `.error`：

```
.success {
}
.error {
} 
```

# extjs - 如何在 Sencha Touch 中禁用存储的缓存？

> ID：14815126
> 
> 赞同：0
> 
> 时间：2013-02-11T15:20:41.227
> 
> 标签：extjs, sencha-touch, sencha-touch-2

如何在 Sencha Touch 中禁用特定存储的缓存？

你知道有什么方法可以禁用应用程序中所有存储的缓存吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:38:07.107

你指的是哪个缓存？如果它是浏览器缓存（例如，使用[ajax 代理](http://docs.sencha.com/touch/2-1/#!/api/Ext.data.proxy.Ajax-cfg-noCache)时），那么默认情况下应该启用（默认情况下，它在每个请求中使用单独的查询参数`_dc`）。如果您的意思是模型记录存储在内存中，您可能需要[`useCache`查看](http://docs.sencha.com/touch/2-1/#!/api/Ext.data.Model-cfg-useCache)`Model`.

# parsing - 如何让词法分析器在 Scala TokenParser 中输出 EOF？

> ID：14815132
> 
> 赞同：1
> 
> 时间：2013-02-11T15:21:15.570
> 
> 标签：parsing, scala

如果我定义 a`Lexical`来提供 a `TokenParser`，那么我将无法`TokenParser`真正输出`EOF`令牌。特别是`Parser[T]`( `acceptIf`, `acceptMatch`, 和`phrase`) 中的某些方法直接检查是否`Reader`是，因此在返回错误之前`atEnd`没有机会将令牌添加到令牌流中。`EOF`

由于`Tokens`特征实际上定义了一个`EOF`标记，我确信必须有一些简单的方法来输出它，但在这一点上，我能想到的就是创建我自己的，直到至少一个之后才会`Reader`返回输出或向输入添加一个字符，这样直到它发出该字符后才意识到它已经结束。`true``atEnd``EOF``'\032'``Reader`

请告诉我我错过了一个更简单的方法......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T15:20:35.883

你根本不需要这样做。采用

```
new YourLexical.Scanner("foo") 
```

创建一个 Reader[YourLexical.Token]，它将自动响应 #atEnd。

然后，您可以将此 Reader 交给 TokenParser 直接实现您的语法作为输入：

```
class YourTokenParser ... {
    ...
    def program: Parser[...] = ...

    def parse(s: String) =
        phrase(program)(new YourLexical.Scanner(s))
} 
```

# jsf - 单例来保存行的集合

> ID：14815136
> 
> 赞同：1
> 
> 时间：2013-02-11T15:21:30.187
> 
> 标签：jsf, java-ee-6, cdi, ejb-3.1

在 Web App 中，需要通过 JSF 每页显示 6 个对象（表 DB 的行）的视图。要前进到下一个视图，将显示另一个不同的随机 6 个对象，依此类推......

所以我想有一个*@Singleton在给定的时间间隔内使用**@Schedule*作业查询表的所有行，假设每1 小时一次。它将有一个*getCollection()*方法。

然后每个访问者都会有一个*@SessionScoped* CDI bean，它将查询*@Singleton*的集合，然后对其进行随机播放以对特定用户进行随机查看。

与许多访问一样，将创建许多同时访问 getCollection() 方法的 CDI bean。

这个想法正确吗？这种情况需要任何特定的注释吗？还有其他方法吗？

- - -更新 - -

在与朋友交谈后，特别是 Luiggi Mendoza，他们告诉我最好的办法是使用 EHCACHE 或类似的，而不是 Singleon。我认为就是这样。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T16:50:23.283

你会有一个网络服务器集群吗？在这种情况下，您需要一个分布式缓存，或者您需要通过数据库更新状态。

否则，我只会在 bean 中找到一个简单的地图`@ApplicationScoped`。

我在大量数据几乎总是相同的解决方案中使用 JPA。涉及不止一个 tomcat，因此 bean 中的纯缓存是`@ApplicationScoped`行不通的。为了解决这个问题，我没有二级缓存，而是缓存数据库查询的结果。这意味着每个 tomcat 都有自己的缓存。

对于每次登录，都会读取一个时间戳，如果缓存中的数据不是陈旧的，则会使用它。否则更新缓存。在数据库触发器的帮助下发生更改时更新时间戳。

```
@PrePersist
@PreUpdate
@PreRemove
public void newTimeStamp() {
// save a new timestamp
} 
```

`@Singleton`不是 CDI 规范的一部分，所以我会避免使用它。

此外，我会保留我的客户端 bean`@RequestScoped`并使用`@PostConstruct`. 这样，您将为每个请求获得一个新的 6。

或者，如果这可能是短暂的`@ViewScoped`（需要 myfaces codi），`@ConversationScoped`或者`@ViewAccessScoped`（需要 myfaces codi）。

# php - 安全远程服务器 Windows 上的 php LDAP 绑定失败

> ID：14815142
> 
> 赞同：2
> 
> 时间：2013-02-11T15:21:48.603
> 
> 标签：php, windows, security, bind

我正在尝试在 Windows php 本地测试环境中的安全连接中查询远程 LDAP 服务器。我认为我必须正确授予访问权限，因为我可以使用 LDAP 浏览器应用程序并且可以很好地连接到远程服务器。另外，如果我执行“telnet remoteserverurl.com 636”，那么命令提示符中会出现一个空白屏幕，所以我至少可以连接。但是在我的以下 .php 代码中，我在绑定时遇到错误：“PHP 警告：ldap_bind()：无法绑定到服务器：无法在线联系 LDAP 服务器...”

相同的代码适用于 Linux 服务器。我认为在我的本地 php 环境中缺少某种用于安全 LDAP 连接的 LDAP 库？无论如何，这是代码：

```
$ds=ldap_connect("ldaps://serveraddress.com", "636");  // remote server
//$ds=ldap_connect("ldap://localhost", 389);  // works
//putenv('LDAPTLS_REQCERT=never');//doesn't help with secure ldap
//ldap_set_option($ds, LDAP_OPT_PROTOCOL_VERSION, 3); //works for local LDAP server (Open LDAP)
$r=ldap_bind($ds, "cn=xxx,ou=proxy,o=xxx", "passwordxxxx");//throws error for remote 
```

任何想法？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-11-12T03:39:59.520

知道这是旧的，但我最近在 windows 2008 和 2012 上使用 wordpress 3.x 和 4.x 时遇到了类似的问题（IIS 7.x 和 8.x，PHP 5.6）。

我已经为 wordpress 编写了一个用于 ldap 身份验证的插件 - 就像试图让 LDAPS 一样（通过端口 636 工作的 ldap 安全）。

几件事：

1.  使用 PHP LDAPS 时，文档说明您只需在 LDAP 服务器前加上`ldaps://`. 所以`server1.domain.com`对于 LDAPS 应该是`ldaps://server1.domain.com/`......请注意，您根本不需要为连接方法传递端口（根据[http://php.net/manual/en/function.ldap-connect.php](http://php.net/manual/en/function.ldap-connect.php)）。这与原始问题在其提交中的内容非常相似。
2.  Windows PHP 库经过硬编码，可以`ldap.conf`在 `C:\openldap\sysconf\ldap.conf`.
3.  创建上面 #2 中提到的文本文件 - 这是您指向证书存储的位置。一旦你创建了这个文件，你*就可以*输入`TLS_REQCERT never`......但这意味着**没有证书被验证并且所有证书都被自动信任**（本质上） -*应该只用于测试......永远不要用于生产*，因为您破坏了部分 TLS/SSL 安全措施（即证明您确实在与您认为您连接的主机交谈）。
4.  `TLS_REQCERT never`而不是似乎是互联网上流行（并且可能被误导）建议的不安全选项......获取 curl 和类似使用的公共公共证书颁发机构列表 - [http://curl.haxx.se/ca/cacert。佩姆](http://curl.haxx.se/ca/cacert.pem)_ 这本质上是 firefox 为公共证书颁发机构信任提供的（即，这就是为什么您可以安装 firefox 并在没有证书警告的情况下访问[https://amazon.com](https://amazon.com)等）。
5.  在 PHP 安装中删除您下载的 cacert.pem 文件（它只是一个包含一堆证书哈希和描述的文本文件）。例如，假设我用我的 php install in 倾倒了它`c:\php5\cacert.pem`。您的位置可能不同，但将其放在可以访问的地方，并且由于它是相关的，因此将与 php 内容分组。这是`cacert.pem`文件内容的几张照片，让您了解里面的内容。 ![示例 cacert.pem 内容](../Images/506a27d86dfdc18dd385d9723840f432.png) ![cacert.pem 中的哈希示例](../Images/5a6a56ff3697d49f92444bb5cb499283.png)
6.  编辑`C:\openldap\sysconf\ldap.conf`并为命令添加一行，`TLS_CACERT`如图所示。 ![示例 ldap.conf 文件](../Images/81dd84b2bdcd053dad0fcc73a947bd82.png)
7.  这应该允许您现在像现代 Web 浏览器一样信任公共的、有效的证书等。请注意，它不会解决内部颁发或自签名证书的信任问题。但是您也可以通过将自己的证书哈希添加到 cacert.pem 文件中轻松地做到这一点。
8.  要在 cacert.pem 文件中添加另一个证书作为受信任的证书，只需获取相关证书的副本（您只需将其导出为`.cer`base64 格式 - 不需要私钥，扩展名真的没关系- 只需要是一个哈希输出）。如果您以正确的格式导出它，您可以打开证书文件并查看哈希 - 它与 Thawte Server CA 示例的屏幕截图类似（但不完全相同）。只需将您导出的哈希附加到 cacert.pem 文件，它就会被信任。如果您想变得聪明，您可以改为为您的私人颁发的证书导入颁发证书 - 这将信任由导入的证书签名的任何证书。如果有疑问，您可以随时导入提供的证书。
9.  进行此类更改后，我发现最好重新启动 Web 服务器（iis 管理器 -> Web 服务器节点 -> 重启选项），这样使用 php 的所有内容都被重置。
10.  对于额外的功劳，您可以通过编辑 php.ini 文件并将 cacert.pem 文件的完整路径放在行中来为 curl 实现使用相同的 cacert.pem 文件`curl.cainfo =`。
11.  同样，我知道这是一篇较旧的帖子，但我想分享我在通过 LDAPS 将 wordpress 连接到 eDirectory 时所学到的知识。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T15:30:17.537

检查您的 PHP 库

```
<?php phpinfo() ?> 
```

由于您可以使用 LDAP 客户端进行连接，因此我希望您的 LDAP 运行 SSL

您是否复制了 SSL 证书？

> 1.  将服务器证书复制到 sys:/php5/cert 目录。此位置可在 php.ini 文件中配置。
>     
>     
> 2.  在 ldap_connect 调用中使用“ldaps://”前缀作为主机名参数或端口号参数的值 636。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T17:08:40.447

我得到了这个工作！@s.lenders 的“答案”（谢谢）指出了一些证书问题，确实是证书问题。删除 LDAP 服务器的证书处于过期状态——即使我使用桌面应用程序（SoftTerra LDAP 浏览器）连接时，我也会收到警告。因此，将证书导入我的 Windows 证书——SoftTerra LDAP 浏览器应用程序允许我使用该选项。而且，瞧！SSL LDAP 调用正在运行。

** 更新：不确定上述证书是否有帮助，但这里有一些更具体的东西对我有帮助：看起来 php LDAP 库正在寻找某个 conf 文件；硬编码为：C\OpenLDAP\sysconf\ldap.conf ?! 因此，我基本上根据此信息创建了新文件夹，并放置了一个 ldap.conf 文件，其中只有“TLS_REQCERT never”，这很有帮助！我已经对其进行了测试..如果我要删除此文件，那么我的安全 LDAP 查询将不起作用并且在“绑定”步骤中失败。请注意，我对 conf 中的“从不”感到满意，因为这只会在我自己的工作站上。

另请注意，我在运行 IIS 7+ 的 Windows 7 上**

希望这可以帮助某人。

# c++ - STL 容器的奇怪行为（构造/销毁和范围）

> ID：14815145
> 
> 赞同：2
> 
> 时间：2013-02-11T15:21:51.363
> 
> 标签：c++, stl, scope

我不确定 STL 容器在传递时是否被完全复制。首先，它起作用了（所以没有添加“fluttershy”元素，这很好）。然后我想跟踪条目的构建和销毁....

```
#include <vector>
#include <string>
#include <cstdio>
#include <cstdlib>
using namespace std;

int nextid = 0;

class Entry {
public:
    string data;
    int myid;
    Entry(string in) {
        data = in;
        myid = nextid;
        nextid++;
        printf("Entry%02d\n", myid);
    }
    ~Entry() { printf("~Entry%02d\n", myid); }
};

class Meep {
public:
    vector<Entry> stuff;
};

void think(Meep m) {
    m.stuff.push_back(Entry(string("fluttershy")));
}

int main() {

    Meep a;
    a.stuff.push_back(Entry(string("applejack")));
    think(a);
    vector<Entry>::iterator it;
    int i = 0;
    for (it=a.stuff.begin(); it!=a.stuff.end(); it++) {
        printf("a.stuff[%d] = %s\n", i, (*it).data.c_str());
        i++;
    }

    return 0;
} 
```

产生以下意外输出（[http://ideone.com/FK2Pbp](http://ideone.com/FK2Pbp)）：

```
Entry00
~Entry00
Entry01
~Entry00
~Entry01
~Entry00
~Entry01
a.stuff[0] = applejack
~Entry00 
```

预期只有一个元素，这`a`不是问题。让我非常困惑的是，一个条目怎​​么会被破坏多次？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T15:27:01.333

您所看到的是临时实例的破坏。

```
a.stuff.push_back(Entry(string("applejack"))); 
```

此行创建一个临时实例，然后将其复制到容器中的另一个新实例。然后临时被销毁。当条目被删除或容器被销毁时，容器中的实例被销毁。

# delphi - 将字符串写入 TMemoryStream

> ID：14815146
> 
> 赞同：9
> 
> 时间：2013-02-11T15:21:53.050
> 
> 标签：delphi, stream, memorystream

我在这里阅读了很多关于将字符串写入 TMemoryStream 并保存到文件并将字符串读回 TMemoryStream 的讨论

我不知道我在这里做错了什么，但我的 SaveData 或我的 LoadData 是错误的。我可以在调用 SaveData 之前检查 Title 的值，它符合我的预期。但是，当我调用 LoadData 并检查 Title 的值时，它是垃圾。谁能告诉我我做错了什么

```
procedure SaveData(FileName: TFileName);
var
 MemStr: TMemoryStream;
 Title: String;
begin
 MemStr:= TMemoryStream.Create;
try
 MemStr.Seek(0, soFromBeginning);
 WriteStreamStr( MemStr, TItle );
 MemStr.SaveToFile(FileName);
finally
 MemStr.Free;
end;
end;

procedure LoadData(FileName: TFileName);
var
 MemStr: TMemoryStream;
 Title: String;
begin
 MemStr:= TMemoryStream.Create;
 try
  MemStr.LoadFromFile(FileName);
  MemStr.Seek(0, soFromBeginning);
  Title := ReadStreamStr( MemStr );
 finally
   MemStr.Free;
  end;
end;

procedure WriteStreamInt(Stream : TStream; Num : integer);
 {writes an integer to the stream}
begin
 Stream.WriteBuffer(Num, SizeOf(Integer));
end;

procedure WriteStreamStr(Stream : TStream; Str : string);
 {writes a string to the stream}
var
 StrLen : integer;
begin
 {get length of string}
 StrLen := Length(Str);
 {write length of string}
 WriteStreamInt(Stream, StrLen);
 if StrLen > 0 then
 {write characters}
 Stream.Write(Str[1], StrLen);
end;

function ReadStreamInt(Stream : TStream) : integer;
 {returns an integer from stream}
begin
 Stream.ReadBuffer(Result, SizeOf(Integer));
end;

function ReadStreamStr(Stream : TStream) : string;
 {returns a string from the stream}
var
 LenStr : integer;
begin
 Result := '';
 {get length of string}
 LenStr := ReadStreamInt(Stream);
 {set string to get memory}
 SetLength(Result, LenStr);
 {read characters}
 Stream.Read(Result[1], LenStr);
end; 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-11T15:32:57.890

当你使用

```
Stream.Write(Str[1], StrLen); 
```

您正在将第一个`StrLen`字节写入流。但是（unicode）字符串数据实际上是`StrLen * SizeOf(Char)`字节（您必须考虑 char 类型的大小）。所以以下应该工作：

```
Stream.Write(Str[1], StrLen * SizeOf(Str[1])); 
```

从流中读回数据时相同。

# java - 在单独的活动/类中创建数据库会出错

> ID：14815149
> 
> 赞同：0
> 
> 时间：2013-02-11T15:21:58.930
> 
> 标签：java, android, sqlite, nullpointerexception

请看下面的代码

**表单.java**

*Form.java 是 Main 活动，表示第一页的 Java 文件。删除了许多与创建“列表”和菜单相关的代码。*

```
 package com.example.esoftcallmanager;

import android.os.Bundle;
import android.app.Activity;
import android.app.AlertDialog;
import android.app.AlertDialog.Builder;
import android.content.Context;
import android.content.DialogInterface;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.ImageView;
import android.widget.ListView;
import android.widget.TextView;

public class Form extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_form);

        DatabaseConnector databaseConnector = new DatabaseHandler(); 
        databaseConnector.createConnection();

        ListView lv = (ListView)findViewById(android.R.id.list);
        String arr[] = getResources().getStringArray(R.array.branch_list);

        //lv.setAdapter(new MyAdapter(this,android.R.layout.simple_list_item_1,R.id.listText,arr));

        lv.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
            long arg3) {
            // TODO Auto-generated method stub

            }
            });
    }
} 
```

**数据库连接器.java**

*这是执行数据库操作的代码接口*

```
package com.example.esoftcallmanager;

public interface DatabaseConnector 
{
    public void createConnection();
    public void closeConnection();
    public String getPhoneNumber();
} 
```

**数据库处理程序.java**

*这是执行数据库操作的那个*

```
package com.example.esoftcallmanager;

import android.app.Activity;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.widget.Toast;

public class DatabaseHandler extends Activity implements DatabaseConnector
{
    private SQLiteDatabase database;
    private String dbPath = "data//data//com.example.esoftcallmanager.sqllite//esoftDatabase";

    @Override
    public void createConnection() 
    {

        try
        {
            database = this.openOrCreateDatabase("esoftDatabase", MODE_PRIVATE, null);

        database.execSQL("create table BranchNetwork(" +
                "brID integer primary key autoincrement,"
                +"city text,"
                +"steetAddress text"
                +"phoneNumber1 text"
                +"phoneNumber2 text"
                +"email text"
                +");");
        }
        catch(SQLException sql)
        {
            Toast.makeText(this, sql.getMessage(), Toast.LENGTH_LONG).show();
        }

    }

    @Override
    public void closeConnection() {
        // TODO Auto-generated method stub

    }

    @Override
    public String getPhoneNumber() {
        // TODO Auto-generated method stub
        return null;
    }

} 
```

但是，我无法运行代码，因为我收到以下错误。

```
02-11 20:35:59.350: D/dalvikvm(434): GC_EXTERNAL_ALLOC freed 52K, 53% free 2552K/5379K, external 1949K/2137K, paused 80ms
02-11 20:40:34.021: D/dalvikvm(1131): GC_EXTERNAL_ALLOC freed 42K, 53% free 2552K/5379K, external 1949K/2137K, paused 122ms
02-11 20:40:34.361: D/AndroidRuntime(1131): Shutting down VM
02-11 20:40:34.361: W/dalvikvm(1131): threadid=1: thread exiting with uncaught exception (group=0x40015560)
02-11 20:40:34.401: E/AndroidRuntime(1131): FATAL EXCEPTION: main
02-11 20:40:34.401: E/AndroidRuntime(1131): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.esoftcallmanager/com.example.esoftcallmanager.Form}: java.lang.NullPointerException
02-11 20:40:34.401: E/AndroidRuntime(1131):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
02-11 20:40:34.401: E/AndroidRuntime(1131):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
02-11 20:40:34.401: E/AndroidRuntime(1131):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
02-11 20:40:34.401: E/AndroidRuntime(1131):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
02-11 20:40:34.401: E/AndroidRuntime(1131):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-11 20:40:34.401: E/AndroidRuntime(1131):     at android.os.Looper.loop(Looper.java:123)
02-11 20:40:34.401: E/AndroidRuntime(1131):     at android.app.ActivityThread.main(ActivityThread.java:3683)
02-11 20:40:34.401: E/AndroidRuntime(1131):     at java.lang.reflect.Method.invokeNative(Native Method)
02-11 20:40:34.401: E/AndroidRuntime(1131):     at java.lang.reflect.Method.invoke(Method.java:507)
02-11 20:40:34.401: E/AndroidRuntime(1131):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
02-11 20:40:34.401: E/AndroidRuntime(1131):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
02-11 20:40:34.401: E/AndroidRuntime(1131):     at dalvik.system.NativeStart.main(Native Method)
02-11 20:40:34.401: E/AndroidRuntime(1131): Caused by: java.lang.NullPointerException
02-11 20:40:34.401: E/AndroidRuntime(1131):     at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:203)
02-11 20:40:34.401: E/AndroidRuntime(1131):     at com.example.esoftcallmanager.DatabaseHandler.createConnection(DatabaseHandler.java:19)
02-11 20:40:34.401: E/AndroidRuntime(1131):     at com.example.esoftcallmanager.Form.onCreate(Form.java:30)
02-11 20:40:34.401: E/AndroidRuntime(1131):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
02-11 20:40:34.401: E/AndroidRuntime(1131):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
02-11 20:40:34.401: E/AndroidRuntime(1131):     ... 11 more
02-11 20:40:37.381: I/Process(1131): Sending signal. PID: 1131 SIG: 9 
```

每当我从 Form.java 中删除数据库连接部分时，它都可以正常工作！所以错误一定在下面的代码中

```
DatabaseConnector databaseConnector = new DatabaseHandler();
        databaseConnector.createConnection(); 
```

我不想在 Form.java 中添加所有数据库操作。我需要像我所做的那样拆分工作。但是，我该怎么做呢？请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T15:31:52.310

我看到的一件事是：

```
 database.execSQL("create table BranchNetwork(" +
            "brID integer primary key autoincrement,"
            +"city text,"
            +"steetAddress text"
            +"phoneNumber1 text"
            +"phoneNumber2 text"
            +"email text"
            +");"); 
```

你必须写：

```
 database.execSQL("create table BranchNetwork(" +
            "brID integer primary key autoincrement,"
            +"city text,"
            +"steetAddress text," //forgot comma
            +"phoneNumber1 text," //forgot comma
            +"phoneNumber2 text," // forgot commas
            +"email text"
            +");"); 
```

我不知道这是否是错误，但请尝试...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T15:32:22.637

如果`DatabaseHandler`是非 Activity 类，则无需将 Activity 扩展到它。您将需要创建一个参数化构造函数`DatabaseHandler`来将 Activity 上下文传递给它以创建数据库。将您的 DatabaseHandler 类更改为：

```
public class DatabaseHandler implements DatabaseConnector
{
    private SQLiteDatabase database;
     ....
    Context context;

   public DatabaseHandler(Context context){

       this.context=context;
   }

    @Override
    public void createConnection() 
    {

        try
        {
            database = context.openOrCreateDatabase("esoftDatabase", 
                           MODE_PRIVATE, null);
            // your code here....
        }
        catch(SQLException sql)
        {
            Toast.makeText(context, sql.getMessage(), 
                    Toast.LENGTH_LONG).show();
        }

    } 
```

并从 Form Activity 传递 Activity Context ：

```
DatabaseConnector databaseConnector = 
                    new DatabaseHandler(Form.this);
databaseConnector.createConnection(); 
```

# php - 在 FancyBox Iframe 中打开了一个 FancyBox Widget，但由于 FancyBox Widget Width/Height=0 而无法查看数据

> ID：14815153
> 
> 赞同：0
> 
> 时间：2013-02-11T15:22:12.283
> 
> 标签：php, javascript, ajax, yii, fancybox

我在一个`FancyBox Widget`内开了一个`FancyBox Iframe`。

在 FancyBox Iframe 中，我看到了我想要的所有数据；

现在，当 FancyBox Widget 出现时，我无法设置宽度和高度；

如何设置`Height and Width`FancyBox Widget？

这就是我初始化 FancyBox Iframe 的方式：

```
$this->widget('application.extensions.fancybox.EFancyBox', array(
    'target' => 'a.referrallink',
    'id' => 'referrallink',
    'config' => array(
        'type' => 'iframe',
        'width' => 1000,
        'height' => 600,
    ),)); 
```

这就是我初始化 FancyBox 小部件的方式：

```
$this->widget('application.extensions.fancybox.EFancyBox', array(
    'target' => 'a.fitGraphic',
    'id' => 'fitGraphic',
    'config' => array(
        'min-width' => 300,
        'min-height' => 300,
        'width'=>300,
        'height'=>300,
        'autoDimensions'=> true,
    ),)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:53:38.250

解决方案是：

```
 $this->widget('application.extensions.fancybox.EFancyBox', array(
        'target' => 'a.fitGraphic',
        'id' => 'fitGraphic',
        'config' => array(
            'type' => 'inline',
            'min-width' => '300px',
            'min-height' => '300px',
//            'height' => '300px',
//            'width' => '300px',
            'autoDimensions' => false,
        ),
            )
    ); 
```

# c# - 在自定义分页中查找所选项目

> ID：14815156
> 
> 赞同：1
> 
> 时间：2013-02-11T15:22:18.883
> 
> 标签：c#, asp.net

我将自定义分页写入转发器。下面是代码。当我单击链接按钮时，如何设置选中它或如何设置 css 类？

首先，我尝试像这样在 lbl_Click 函数中设置 css 类在`lnk.CssClass = "classname";` 每次尝试时，它都会将 css 类设置为所有单击的链接按钮。

```
private void CreatePagingControl()
    {                           
         for (int i = 0; i < pages; i++)
         {
            LinkButton lnk = new LinkButton();
            lnk.Click += new EventHandler(lbl_Click);
            lnk.ID = "lnkPage" + (i + 1).ToString();
            lnk.Text = (i + 1).ToString();
            plcPaging.Controls.Add(lnk);
            Label spacer = new Label();
            spacer.Text = "&nbsp;|&nbsp;";
            plcPaging.Controls.Add(spacer);
         }            
    }

    void lbl_Click(object sender, EventArgs e)
    {
        LinkButton lnk = sender as LinkButton;
        int currentPage = int.Parse(lnk.Text);
        int take = currentPage * 15;
        int skip = currentPage == 1 ? 0 : take - 15;
        FetchData(take, skip);
    } 
```

aspx

```
 <asp:PlaceHolder ID="plcPaging" runat="server" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:49:03.793

也许你可以尝试这样的事情，当 CssClass 包含多个类时它也应该工作。

```
// removing a cssClass
protected String removeCssClass(string cssClass, string toRemove)
{
    return String.Join(" ", cssClass.Split(' ').Except(new[] {toRemove}).ToArray());
}

void lbl_Click(object sender, EventArgs e)
{
    // resetting all selected items
    plcPaging.Controls
      .OfType<Label>()
      .Where(l => l.ID.StartsWith("lnkPage") && l.CssClass.Split(' ').Contains("selectedClassName")).ToList()
      .ForEach(l => l.CssClass = removeCssClass(l.CssClass, "classname"));
    LinkButton lnk = sender as LinkButton;
    // setting selected item
    lnk.CssClass = "classname";
    int currentPage = int.Parse(lnk.Text);
    int take = currentPage * 15;
    int skip = currentPage == 1 ? 0 : take - 15;
    FetchData(take, skip);
} 
```

希望这会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T15:26:58.830

尝试这个

把你的 aspx 改成这个

```
<div id="pageingDiv">
<asp:PlaceHolder ID="plcPaging" runat="server" />
<asp:HiddenField id="currentId" runatserver" value="1" />
</div> 
```

调用这个 Jquery 脚本`$(document).ready()`

```
$("#pageingDiv a").removeClass();
var hvId = $('[id$=currentId]').val();
$("#lnkPage" _ hvId).AddClass('ClassName'); 
```

然后在你的代码隐藏中添加 css

```
void lbl_Click(object sender, EventArgs e)
{
LinkButton lnk = sender as LinkButton;
int currentPage = int.Parse(lnk.Text);
int take = currentPage * 15;
int skip = currentPage == 1 ? 0 : take - 15;
FetchData(take, skip);
//add css here
currentId.Value=currentPage.ToString();
} 
```

# redis - 如何将一个redis实例一分为二？

> ID：14815158
> 
> 赞同：1
> 
> 时间：2013-02-11T15:22:33.510
> 
> 标签：redis

我在一台 4G 内存机器上有一个 4G 大的 redis，我想把它分成两个 2G redis 实例，这样我就可以在两台不同的机器上运行这两个实例。

怎么做？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:45:21.513

AFAIK 没有简单的方法可以做到这一点。

一种方法是使用来自 Sripathi Krishnan 的 redis-rdb-tools 包。程序是：

*   选择一种策略来分片您的数据（即在实例上分配密钥的函数）
*   编写 Python 脚本来解析 Redis 转储文件，连接到多个实例，并应用命令将数据插入到正确的实例上
*   转储 Redis 实例
*   刷新实例
*   创建并启动第二个实例
*   在第一个实例的转储上运行脚本

[在https://github.com/sripathikrishnan/redis-rdb-tools](https://github.com/sripathikrishnan/redis-rdb-tools)查看更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-28T23:11:25.637

你可以使用redis集群

> Redis Cluster 提供了一种运行 Redis 安装的方法，其中数据在多个 Redis 节点之间自动分片。
> 
> 每个 Redis 集群节点都需要打开两个 TCP 连接。

[http://redis.io/topics/cluster-tutorial](http://redis.io/topics/cluster-tutorial)

# regex - 记事本++正则表达式替换

> ID：14815162
> 
> 赞同：0
> 
> 时间：2013-02-11T15:22:54.750
> 
> 标签：regex, notepad++

我有一个很大的 XML 文件，我应该修改一个标签。

原来的：

```
<MyTag>13/19/59/70/68/32'</MyTag>' 
```

我想要的正则表达式：

```
<MyTag>13,19,59,70,68,32</MyTag> 
```

如果我每次都得到相同数量的数字，但我可以有 8 个数字或 5 个或 6 个或更少，那可能会很容易。

我怎样才能一次做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:33:52.837

正如评论中已经指出的那样，Notepad++ 的正则表达式似乎不够强大，无法进行替换。一般来说，我认为裸正则表达式替换对于这个替换来说不够强大，你最多可以`13/19/59/70/68/32`进入一个捕获组，并通过其他方式对该字符串执行替换`/`。`,`这就是为什么我可能会考虑使用另一个您精通的工具（perl、java 等）来代替。

使用记事本++，我会先进行普通替换，将所有出现的 to 更改`'</MyTag>'`为`</MyTag>`，然后用这个正则表达式进行正则表达式替换：`(\d+)/`. 替换应该是 `\1,`. 单击*全部替换*应替换所有匹配项。

如果您想避免替换`/`其他标签中由分隔的数字，也许您可​​以使用此正则表达式`<MyTag>(.*)(\d+)/(.*)</MyTag>`并将其替换为`<MyTag>\1\2,\3</MyTag>`. 此替换必须执行 N 次，因此如果您想使用它，您可能会对录制宏或类似内容感兴趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-23T17:04:45.973

**可以在一个正则表达式中完成。**

搜索：

```
/([0-9]+)('(<){1}/(MyTag>){1}')? 
```

用。。。来代替：

```
,\1\3\4 
```

# android - Android OpenGLES 2.0 按钮

> ID：14815164
> 
> 赞同：-1
> 
> 时间：2013-02-11T15:22:58.183
> 
> 标签：android, button, opengl-es-2.0

我是 android OpenGL 的新手，我正在尝试使用 OpenGL 绘制按钮我已经为 GLSurface 视图添加了一个手势监听器，现在当用户触摸时我有运动事件。我的问题是如何将motionevent.getx 和motionevent.gety（在像素范围内）转换为视图的窗口或对象坐标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:48:48.903

如果有人需要，我找到了这个问题的解决方案。

```
 public float[] convertToObjectCoordinates(MotionEvent event) {
        float[] worldPos = new float[2];
        float[] invertedMatrix, transformMatrix,
                normalizedInPoint, outPoint, mProjMatrix, mVMatrix;
        invertedMatrix = new float[16];
        transformMatrix = new float[16];
        mProjMatrix = new float[16];
        mProjMatrix = mRenderer.getmProjMatrix();
        mVMatrix = new float[16];
        //Change the Proj and ModelView matrix according to your model and view matrix or you can use your mvpMatrix directly instead of transform Matrix                                     
        Matrix.setLookAtM(mVMatrix, 0, 0, 0, -3, 0, 0, 0f, 0.0f, 1.0f, 0.0f);
        normalizedInPoint = new float[4];
        outPoint = new float[4];
        float y = screenHeight - event.getY();
        setHeightAndWidth();
        normalizedInPoint[0] = (float) ((event.getX()) * 2.0f / screenWidth - 1.0);
        normalizedInPoint[1] = (float) ((y) * 2.0f / screenHeight - 1.0);
        normalizedInPoint[2] = - 1.0f;
        normalizedInPoint[3] = 1.0f;
        Matrix.multiplyMM( transformMatrix, 0, mProjMatrix, 0, mVMatrix, 0);
        Matrix.invertM(invertedMatrix, 0, transformMatrix, 0);
        Matrix.multiplyMV(outPoint, 0, invertedMatrix, 0, normalizedInPoint, 0);
        if (outPoint[3] !=  0.0)
        {
            worldPos[0] = outPoint[0] / outPoint[3];
            worldPos[1] = outPoint[1] / outPoint[3];
        } else {
            Log.e("Error", "Normalised Zero Error");
        }
        return worldPos;
    } 
```

这是对 Android OpenGL2.0 的以下帖子的重制： [Android OpenGL ES 2.0 屏幕坐标到世界坐标](https://stackoverflow.com/questions/10985487/android-opengl-es-2-0-screen-coordinates-to-world-coordinates) EROl 的回答感谢 EROl 的回复。

```
 public void setHeightAndWidth() {
         screenHeight = this.getHeight();
         screenWidth = this.getWidth();
      } 
```

上面的方法应该写在 GLSurfaceView 类中，以便它给出确切的视图的高度和宽度。如果您的视图占据整个屏幕，您还可以使用显示指标来获取完整的屏幕宽度和高度。

# jquery - 在 ASP.NET MVC 中使用带有 jQ uery 的 Regex 表达式时出现编译错误

> ID：14815166
> 
> 赞同：3
> 
> 时间：2013-02-11T15:23:08.907
> 
> 标签：jquery, asp.net-mvc

我尝试使用 jQuery 在 asp.net mvc 中验证如下电子邮件，如下所示

```
<script type="text/javascript">
   function validateEmail(sEmail) {
    var filter = /^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;
    if (filter.test(sEmail)) {
        return true;
    }
    else {
        return false;
    }
      $(document).ready(function() {
   $('#create').click(function() {
        var sEmail = $('#UserName').val();
        if ($.trim(sEmail).length == 0) {
            alert('Please enter valid email address');
            e.preventDefault();
        }
        if (validateEmail(sEmail)) {
            alert('Email is valid');
        }
        else {
            alert('Invalid Email Address');
            e.preventDefault();
        }
    });
});
    });
</script> 
```

渲染视图时出现编译错误**Unexpected character '\'** in that regex pression。如何解决此错误？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-12-11T10:29:24.617

我有同样的错误。[这](https://stackoverflow.com/a/4690148/989462)是答案。这个对我有用。需要使用@@ 而不是@。

在您的情况下，它是：

```
var filter = /^([\w-\.]+)@@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T15:28:20.683

你的牙套有点奇怪。具体来说，您没有正确关闭 validateEmail 函数。这是更正后的 Javascript 代码：

```
 function validateEmail(sEmail) {
        var filter = /^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;
        if (filter.test(sEmail)) {
            return true;
        }
        else {
            return false;
        }
    }
    $(document).ready(function() {

        $('#create').click(function() {
            var sEmail = $('#UserName').val();
            if ($.trim(sEmail).length == 0) {
                alert('Please enter valid email address');
                e.preventDefault();
            }
            if (validateEmail(sEmail)) {
                alert('Email is valid');
            }
            else {
                alert('Invalid Email Address');
                e.preventDefault();
            }
        });
    }); 
```

编辑：另外，不相关的，你可以使 validateEmail 函数更简洁一些，因为 test 返回一个布尔值。见如下：

```
 function validateEmail(sEmail) {
        var filter = /^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;

        return filter.test(sEmail);
    } 
```

# python-2.7 - py2exe 找不到 msvcp90.dll

> ID：14815173
> 
> 赞同：9
> 
> 时间：2013-02-11T15:23:23.607
> 
> 标签：python-2.7, py2exe

我正在使用 py2exe 将使用 Python 2.7 和 Pyqt4 编写的简单 GUI 脚本转换为独立的可执行文件。我不断收到“不存在这样的文件”错误，我已经设法修复了一些错误，尽管这个似乎很顽固。它找不到 msvcp90.dll，并返回一条错误消息，其中包含对 distutils 的简短回溯，然后返回到我的 py2exe 脚本，这不是很有启发性。我已经按照建议安装了 MS C++ 可再发行运行时

[py2exe 无法生成可执行文件](https://stackoverflow.com/questions/323424/py2exe-fails-to-generate-an-executable)

但我的脚本仍然找不到.dll。下面是我的 py2exe 脚本，我的脚本名称被屏蔽了：

```
from distutils.core import setup
from py2exe.build_exe import py2exe
import sys, os, zmq

sys.argv.append('py2exe')

os.environ["PATH"] = \
os.environ["PATH"] + \
os.path.pathsep + os.path.split(zmq.__file__)[0]

setup(
    options = {'py2exe':{'bundle_files':1,"includes":["zmq.utils", 
            "zmq.utils.jsonapi","zmq.utils.strtypes"]}},
    console = [{'script':"#######.py"}],
    zipfile = None
) 
```

我已经解决了 zmq 的一个问题（据我所知，我的脚本或我的 GUI 从未使用过它）。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-24T11:17:43.337

是的，我已经设法构建了我的应用程序，虽然这个问题现在已经有点老了，但我希望这最终对某人有用。

**首先，** py2exe 可能是错误的工具。它很旧而且 AFAICT 无人维护。请考虑使用 PyInstaller。使用 PyInstaller 就像安装它、安装 PyWin32，然后运行`python %path_to_pyinstaller%/pyinstaller.py --onefile --windowed source.py`​​. PyInstaller 可以处理所有杂乱无章的并行程序集等，而您无需做任何事情。

*简而言之，使用 PyInstaller。*

**但是，**要回答您的问题，这对我有用：

1.  您链接到的问题 - 特别是[这个答案](https://stackoverflow.com/a/325456/463510)是正确的开始。找到正确的 DLL 并将它们复制到 C:\Python27\DLLs
2.  丢弃现有`setup.py`文件。如果您不使用`zmq`，则没有理由导入它。`windows=`此外，对于您不希望的窗口应用程序`console=`。我的文件去（用于包装`show.py`）：

    ```
    #!/usr/bin/python

    from distutils.core import setup
    import py2exe

    setup(options={'py2exe':{'bundle_files':1}},
          windows=['show.py']) 
    ```

    （这被扼杀了[http://www.blog.pythonlibrary.org/2010/07/31/a-py2exe-tutorial-build-a-binary-series/](http://www.blog.pythonlibrary.org/2010/07/31/a-py2exe-tutorial-build-a-binary-series/)）

# xml - 在 IDV 上访问 NOAA CO-OPS 海洋模型时出错

> ID：14815176
> 
> 赞同：1
> 
> 时间：2013-02-11T15:23:54.373
> 
> 标签：xml, metadata, netcdf

在使用 Unidata IDV 通过 OPeNDAP 访问加尔维斯顿湾的 NOAA CO-OPS 海洋模型时：

[http://opendap.co-ops.nos.noaa.gov/thredds/catalog/NOAA/GBOFS/MODELS/201302/catalog.html?dataset=NOAA/GBOFS/MODELS/201302/nos.gbofs_hsc.fields.nowcast。 20130201.t09z.nc](http://opendap.co-ops.nos.noaa.gov/thredds/catalog/NOAA/GBOFS/MODELS/201302/catalog.html?dataset=NOAA/GBOFS/MODELS/201302/nos.gbofs_hsc.fields.nowcast.20130201.t09z.nc)

我收到一条错误消息“创建数据源时出错”。从他们的[OPeNDAP 数据表](http://opendap.co-ops.nos.noaa.gov/thredds/dodsC/NOAA/GBOFS/MODELS/201302/nos.gbofs_hsc.fields.nowcast.20130201.t09z.nc.html)中可以看出，许多[NetCDF 气候和预报 (CF) 元数据约定](http://cf-pcmdi.llnl.gov/)都得到了满足，但显然不是全部。

有谁知道缺少什么或错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T22:42:10.783

你是对的，这个数据集有一些问题需要修复才能在[IDV](http://www.unidata.ucar.edu/software/idv/)中工作：

1.  Conventions 属性显示“COARDS”，但[COARDS](http://ferret.wrc.noaa.gov/noaa_coop/coop_cdf_profile.html)适用于直线网格（1D 坐标变量），并且该数据是曲线网格（2D lon,lat 坐标变量）。[CF 约定](http://cf-pcmdi.llnl.gov/documents/cf-conventions)在这里是合适的，因此“约定”全局属性需要为 CF-1.0 或更高版本。

2.  要符合 CF，需要为每个变量指定“坐标”属性。

3.  这个模型有一个无量纲的垂直坐标，它要求“正”属性是“向上”，并且 sigma 值是负的，而不是正的。

幸运的是，您可以使用 NcML 解决这些问题。尝试使用以下内容创建文件“gbofs.ncml”并将其加载到 IDV 而不是 OPeNDAP URL。这种方法适用于任何使用 Unidata NetCDF-Java 库的软件，因此它不仅适用于 IDV，而且适用于[Panoply](http://www.giss.nasa.gov/tools/panoply/)和[Matlab 的 NCTOOLBOX](http://nctoolbox.github.com/nctoolbox/)。

```
<?xml version="1.0" encoding="UTF-8"?>
<netcdf xmlns="http://www.unidata.ucar.edu/namespaces/netcdf/ncml-2.2"
  location="http://opendap.co-ops.nos.noaa.gov/thredds/dodsC/NOAA/GBOFS/MODELS/201302/nos.gbofs.fields.nowcast.20130201.t03z.nc">
  <!--Change conventions from COARDS to CF-1.6 -->
  <attribute name="Conventions" value="CF-1.6"/>
  <!--The "positive" attribute is only for the z coordinate variable, so remove it from depth and elevation-->
  <variable name="zeta">
    <remove type="attribute" name="positive"/>
  </variable>
  <variable name="depth">
    <remove type="attribute" name="positive"/>
  </variable>
  <!-- Dimensionless vertical coordinates need "positive"=up, and negative sigma values -->
  <variable name="sigma">
    <attribute name="positive" value="up"/>
    <values> -0.1667 -0.4167 -0.5833 -0.7643 -0.9167 </values>
  </variable>
  <!-- Curvilinear grids need a "coordinates" attribute that identifies the coordinate variables-->
  <variable name="temp" shape="time sigma ny nx" type="float">
    <attribute name="coordinates" value="lon lat sigma time"/>
  </variable>
</netcdf> 
```

我会向 NOAA CO-OPS 报告这个问题，希望他们将来能解决这个问题。这是来自 IDV 的屏幕截图，只是为了表明它有效： ![来自 IDV 的屏幕抓取](../Images/04438a86fa2f3adf125305d2e194ab07.png)

# html - 如何在 ASP.NET 中将 div 元素居中？

> ID：14815177
> 
> 赞同：2
> 
> 时间：2013-02-11T15:23:55.427
> 
> 标签：html, css

我有以下代码：

```
 <%@ Page Language="C#" AutoEventWireup="true" CodeFile="Main.aspx.cs" Inherits="Main" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <link rel="stylesheet" type="text/css" href="Styles/TomsStyleSheet.css" />
</head>
<body>
    <form id="form1" runat="server">
    <div class="centerBlock">
        <asp:GridView ID="GridView1" runat="server" CcsClass="center">
        </asp:GridView>
    </div>
    <br />
    <div class="centerBlock">
        <asp:Label ID="Label1" runat="server" Text="Enter Directory Path: "></asp:Label>
        <asp:TextBox ID="TextBox" Width="200px" runat="server"></asp:TextBox>
        <br />
        <br />
        <asp:Button ID="checksumBtn" runat="server" Text="Calculate Checksum" OnClick="CalculateChecksum" />
        <br />
        <asp:Label ID="errorMsg" runat="server" Text="" CssClass="error"></asp:Label>
    </div>
    </form>
</body>
</html> 
```

这是CSS：

```
.centerBlock
{
    margin-left:auto;
    margin-right:auto;
    width:50%;
} 
```

我想要做的只是将它居中......现在水平但垂直也很好，所以它在页面中间轻拍。

我知道引用外部样式表不是问题，因为最后一行的 CssClass="error" 可以正常工作。我也`<div style="margin-left:auto;margin-right:auto;">`按照[这个建议](https://stackoverflow.com/questions/3616112/how-to-center-one-div-in-form)尝试过，但似乎没有任何效果。输出当前是左对齐的，而不是居中的。我正在使用 IE 7。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T15:29:11.963

如果您希望它恰好位于页面中间，请尝试以下操作：

```
.centerBlock {
    position: fixed;
    top: 50%;
    left: 50%;
    width: 50%;
    height: 200px;
    margin: -100px 0 0 -25%;
} 
```

请参阅此[**jsFiddle 演示**](http://jsfiddle.net/9Eych/)。

您显然需要相应地调整高度和上边距。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T15:36:39.237

自动边距仅在 Internet Explorer 处于标准模式时才有效。在 quirks 模式下，它将模拟 IE 5 并且不支持它们。

添加将触发标准模式的 Doctype。例如

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
   "http://www.w3.org/TR/html4/strict.dtd"> 
```

或者

```
<!DOCTYPE html> 
```

另见[维基百科：怪癖模式](http://en.wikipedia.org/wiki/Quirks_mode)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T16:52:31.627

事实证明，简单地刷新浏览器似乎解决了我的问题。我注意到，当我更新我的 CSS 时，它没有确认 Web 浏览器中更改的值 - 当我在 Chrome 中执行右键单击 > 检查元素时，它仍然显示旧值，即使在停止调试、停止服务器之后，或退出并重新打开 Visual Studio。

我进行了搜索，发现了[这篇有用的帖子](https://stackoverflow.com/questions/1563648/visual-studio-development-server-not-updating-css-and-javascript)，它让我知道问题出在浏览器上。

# c# - asp.net mvc 中的后期绑定问题

> ID：14815178
> 
> 赞同：0
> 
> 时间：2013-02-11T15:23:59.263
> 
> 标签：c#, asp.net, .net, asp.net-mvc, asp.net-mvc-3

我正在做这样的事情：

```
return View("XXXXXX", new
        {
            Message = "ok"
        }); 
```

但是，当尝试通过 Model.Message 读取变量时，会引发异常：

> “对象”不包含“消息”的定义

即使`Model`在调试器中悬停显示`Message = "ok"`

知道为什么会发生这种情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:36:59.433

正如评论中提到的，您遇到的问题是您试图使用匿名类型来传递到视图。这意味着它将显示在您的调试器中，但您的页面会爆炸，因为它会将其解释为`object`您正在尝试的类型而不是类型。

最好的解决方案是创建一个新的 Model 类，其中包含 Message 属性，并将您的 View 强输入到该 Model。

# mysql - EJB 中的动态实体管理器

> ID：14815179
> 
> 赞同：1
> 
> 时间：2013-02-11T15:23:59.780
> 
> 标签：mysql, glassfish, ejb, entitymanager

我有一个使用 Spring MVC 和 Spring Security 的应用程序。

应用程序项目有 ejbs 和 web 应用程序。

我有一个用户通用数据库和一个用户组数据库。

因此，当用户进行身份验证时，Spring Security 使用公共数据库来检查登录名/密码，并且当控制器调用 ejb 时，实体管理器连接到用户的组数据库。

我的目标是：即时创建用户/组及其关联的数据库。

# 例子 ：

公共数据库**localhost:3306 database_schema1**包含

```
 USERS
----------------------
| NAME    | GROUP_ID |
----------------------
| Pierre  |        1 |
| Paul    |        1 |
| Jacques |        2 |
----------------------

  GROUPS
------------------------------------------
| ID | URL            | SCHEMA_NAME      |
------------------------------------------
|  1 | localhost:3307 | database_schema1 |
|  2 | localhost:3308 | database_schema1 |
------------------------------------------ 
```

当 Pierre 进行身份验证时，主页会调用一个 ejb。这个 ejb 有一个实体管理器，它必须使用模式**database_schema1**连接到组 1 数据库**localhost:3307**

 **如果 Jacques 验证，它必须是组 2 数据库。

我该如何告诉实体经理使用我在构建项目时不知道的给定数据库？

我的意思是，我不想在我的 ejb 中使用 persistence.xml，而是根据经过身份验证的用户动态初始化实体管理器。

Persistence.createEntityManagerFactory() 会在这种情况下工作吗？如果是这样，这是最好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:18:39.077

您可以通过从中删除数据库 URL`persistence.xml`并在运行时指定它来执行此操作：

```
Map<String, String> params = new HashMap<String, String>();
// put the correct URL here
// you can also specify any other parameter from 'persistence.xml'
String dbUrl = "jdbc:mysql://localhost:3308/database_schema1"; 
params.put("javax.persistence.jdbc.url", dbUrl);
EntityManagerFactory factory = 
  Persistence.createEntityManagerFactory("...", params);
```

然后，根据需要使用此`factory`对象创建`EntityManager`实例。**

# c - 保证 C 数据类型的最小大小/范围

> ID：14815180
> 
> 赞同：3
> 
> 时间：2013-02-11T15:24:00.870
> 
> 标签：c, variables

对于这个问题，我找到了不同的答案，而且我知道肯定有一个明确的答案。C 中四种主要数据类型的最小分配内存大小是多少？`int`, `double`, `float`, 和`char`是我的想法。`signed`or类型是否`unsigned`以任何方式改变大小？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-12T02:23:52.513

ANSI C 为各种原始数据类型定义了以下大小。

*   字符
    *   最小有符号范围：-128 .. 127
    *   最小无符号范围：0 .. 255
    *   可以更大，但不管大小，sizeof(char) == 1
    *   sizeof(unsigned char) == 1
*   短的
    *   最小有符号范围：-32768 .. 32767
    *   最小无符号范围：0 .. 65535
    *   可以更大
*   长
    *   最小符号范围：-2147483648 .. 2147483647
    *   最小无符号范围：0 .. 4294967295
    *   可以更大
*   整数
    *   必须至少具有与短路相同的范围
    *   可以具有与 long 相同的范围
    *   范围不能大于 long
    *   short <= int，int <= long，但是 short < long

浮点数和双精度数还有很多规则，但一般来说，浮点数的范围 <= 双精度数的范围（对于现代机器——浮点数是 4 个字节，双精度数是 8）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T15:29:28.287

> 有符号或无符号类型是否以任何方式改变大小？

不会。它只影响保存的数据范围。有关短数据类型（2 个字节），请参见下面的示例。

*   签名 -32,768 至 +32,767
*   无符号 0 到 65,535

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T15:25:12.723

只有标准`char`保证是`1`字节。
其余类型具有实现定义的大小。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T17:23:35.537

这是一个很好的问题。我建议您参考 C99 6.2.5。维基[百科 C 数据类型](http://en.wikipedia.org/wiki/C_data_types)文章很好。

*   char 足够大，可以存储基本执行字符集的任何成员。它不是一个字节（由 8 位定义），考虑它的一个好方法是它是最小可寻址/可分配单元（MAU），正如您在问题中所写，但在某些系统上不是一个字节.
*   整数有点有趣。我认为它们应该至少保持 2^15-1（16 位），但我目前在 C99 中找不到它。在标准的较新版本中，我相信它们实际上被定义为至少 32 位，因为很多人都认为它们是。但总的来说，您必须假设它们是根据 MA​​U ( `sizeof()`) 定义的实现。不仅如此，规范还允许填充位（例如用于纠错）。因此，在 8 位字符系统上，如果`sizeof(int)`是 4，则最大 int 不一定是 2^31-1，因为规范允许将其中一些位用作“填充”。因此，唯一确定的方法是使用`limits.h`!
*   float/double 也是实现定义的，尽管 double 总是大于 float。通常这些由实现定义为与 IEEE-754 规范兼容（分别需要至少 32 位和 64 位），但 C99 不需要它。但是如果你的 char 大小是 32 位，那么 sizeof(float) 可能只有 1。

*   有符号/无符号不改变大小。

由于这些原因`<stdint.h>`，是 C 语言最重要的新增功能之一。在此之前，编写跨平台代码非常困难。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T15:25:47.130

您可以使用`sizeof(variable)`：

作为在我的本地机器上运行的示例：

```
sizeof (char)   = 1
sizeof (double) = 8
sizeof (float)  = 4
sizeof (int)    = 4
sizeof (long)   = 4
sizeof (long long)  = 8
sizeof (short)  = 2
sizeof (void *) = 4 
```

注意：您获得的值可能由操作系统/编译器/CPU 架构决定。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-11T15:29:00.327

写一个小测试程序，自己看看：

```
int main(int argc, char* argv[])
{
    printf("%d\n", sizeof(char) );
    printf("%d\n", sizeof(int) );
    printf("%d\n", sizeof(unsigned char) );
    printf("%d\n", sizeof(unsigned int) );
    printf("%d\n", sizeof(double) );
    printf("%d\n", sizeof(float) );
    return 0;
} 
```

“int、float、double”取决于平台（16、32、64）。符号不影响大小，只影响解释。

# php - 如何在此代码库中水平显示复选框

> ID：14815184
> 
> 赞同：0
> 
> 时间：2013-02-11T15:24:15.253
> 
> 标签：php, html

我们在 php 中有一个 autogen 表单，我们吐出复选框的方式如下面的代码所示：

```
case FIELD_CHECK_BOX:
                $fieldHtml = printCheckbox($mode, $field->getId().'[]', $field->getOptions(), $field->getValue(), true, '&nbsp;&nbsp', $isReq, array( "class"=>$isReq,$jsFunctionCalls));
            break; 
```

问题是，例如，如果您有五个复选框，它们会垂直打印，但我有一个客户端有大量复选框并希望它们水平打印。

我如何编写代码以将复选框彼此相邻吐出，直到达到五个框，然后中断到下一行。

**HTML 输出：**

```
<tr class="tr-11-16 tr-11" id="field-16"><td width='30%' valign='top' align='left' class='labeltext'>Requestor Email :<span style='text-decoration:none' class='required' id='lfspan'> * </span></td><td width='70%' align='left'><table border='0' style='table-layout:auto'><tr><td><div id='td-16[]'><table cellpadding='0' cellspacing='0'><tr><td class="valuetext fld-3-16-required" ><input type="checkbox" name="16[]" id="16[]" value="Home"class="valuetext fld-3-16-required" 0="">Home</td></tr><tr><td class="valuetext fld-3-16-required" ><input type="checkbox" name="16[]" id="16[]" value="Play"class="valuetext fld-3-16-required" 0="">Play</td></tr><tr><td class="valuetext fld-3-16-required" ><input type="checkbox" name="16[]" id="16[]" value="Theatre"class="valuetext fld-3-16-required" 0="">Theatre</td></tr><tr><td class="valuetext fld-3-16-required" ><input type="checkbox" name="16[]" id="16[]" value="Work"class="valuetext fld-3-16-required" 0="">Work</td></tr></table></div></td><td valign='top'></td></tr></table></td></tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:28:00.450

简单的方法是桌子。

更好的方法是使用`display:table`和它的块。

最好的方法可能是将每个复选框 + 标签包装在一个包装元素中，并为该元素提供 20% 的宽度。然后这些包装器元素中的每一个都可以具有`display:inline-block;`或`display:block; float:left;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T17:08:40.843

使用 Firebug，`tr { display:inline }`允许复选框像一行中的输入元素一样流动。

很棒的是，如果您的函数将输出`<input><input><input>`，而不是嵌套`<table>`

# javascript - magento 的 Javascript/jquery 年龄验证弹出窗口

> ID：14815185
> 
> 赞同：0
> 
> 时间：2013-02-11T15:24:15.410
> 
> 标签：javascript, jquery, magento, verification

好的，所以我尝试[将此日期选择器](http://jquerywall.com/demo-age-verification-jquery-ui-datepicker/)集成到我的 magento 页面中，以进行年龄验证。

我已成功将所需的 CSS 和 jQuery 脚本文件添加到我的 magento 页面的 head 部分，但我不知道在哪里添加 html。

包源与 html 和 javascript 文件一起在[此处提供。](http://jquerywall.com/jquery-download/age-verification-jquery-ui-datepicker.zip)我想修改它，以便当一个人超过 18 岁时，他们会留在页面上，如果没有，他们会被重定向到 google.com。

无法使其正常工作，因为我不确定如何将 index.html 文件的代码添加到我的 magento 页面。我真的很感激一些帮助。

或者是否有另一种（更简单）的方式将“年龄验证”与 cookie 放在一起，而不使用 PHP 脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:55:48.707

您需要将部分/全部 html 放入模板中，可能是每个页面上的某个位置。例如 /app/design/frontend/*包*/_theme_/template/page/html/header.phtml

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-18T11:28:39.150

您可以使用以下脚本进行此验证，这可能会对您有所帮助。

```
<script>
function check_dob()
{
    var month = document.getElementById('month').value;
    var day = document.getElementById('day').value;
    var year = document.getElementById('year').value;
    var dbDate = year+'-'+month+'-'+day;
    var today = new Date();
    var birthDate = new Date(dbDate);
    var age = today.getFullYear() - birthDate.getFullYear();
    var m = today.getMonth() - birthDate.getMonth();
    if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {
    age--;
    }

    if(age<=20)
    {
        alert("You are under "+age+" Year")
    }
}
</script> 
```

# javascript - 一个容器中几个项目的延迟效果自动化

> ID：14815189
> 
> 赞同：1
> 
> 时间：2013-02-11T15:24:49.467
> 
> 标签：javascript, jquery, jquery-selectors, settimeout

我有一个这样的html代码：

```
<div id="buttons">
    <a id="b1" href="#"><img src="http://content.captive-portal.com/campaigns/redbull/_images/b6.jpg" /></a>
    <a id="b2" href="#"><img src="http://content.captive-portal.com/campaigns/redbull/_images/b6.jpg" /></a>
    <a id="b3" href="#"><img src="http://content.captive-portal.com/campaigns/redbull/_images/b6.jpg" /></a>
    <a id="b5" href="#"><img src="http://content.captive-portal.com/campaigns/redbull/_images/b6.jpg" /></a>
    <a id="b6" href="#"><img src="http://content.captive-portal.com/campaigns/redbull/_images/b6.jpg" /></a>
    <a id="b7" href="#"><img src="http://content.captive-portal.com/campaigns/redbull/_images/b6.jpg" /></a>
    <a id="b8" href="#"><img src="http://content.captive-portal.com/campaigns/redbull/_images/b6.jpg" /></a>
</div> 
```

和 jquery 喜欢这个：

```
 $('#b1, #b2, #b3, #b4, #b5, #b6, #b7, #b8, #b9').hide();

    setTimeout(function() {
        $('#b1').fadeIn(500)
    }, 600);

    setTimeout(function() {
        $('#b2').fadeIn(500)
    }, 700);

    setTimeout(function() {
        $('#b3').fadeIn(500)
    }, 800);

    setTimeout(function() {
        $('#b4').fadeIn(500)
    }, 900);

    setTimeout(function() {
        $('#b5').fadeIn(500)
    }, 1000);

    setTimeout(function() {
        $('#b6').fadeIn(500)
    }, 1100);

    setTimeout(function() {
        $('#b7').fadeIn(500)
    }, 1200);

    setTimeout(function() {
        $('#b8').fadeIn(500)
    }, 1300); 
```

如何自动延迟“按钮”div中所有项目的延迟，以便下一个每个项目都会延迟出现，但一个接一个？因此，不要为每个单独的项目编写 setTimeout 函数，而是执行一次，所以如果我再添加 100 个项目，它仍然可以正常工作吗？示例在这里：[jsFiddle](http://jsfiddle.net/tucado/5JNyk/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T15:26:30.700

你可以这样做 ：

```
$('[id^=b]').hide();
for (var i=1; i<9; i++) {
  (function(i){
    setTimeout(function() {
       $('#b'+i).fadeIn(500);
     }, 500+100*i);
  })(i);
} 
```

[示范](http://jsbin.com/egufag/1/)

请注意，您不必为每个元素指定 id ，*也*`a`不必在 js 中设置限制：您可以使用简单的类 ( `<a class=au...`) 并执行以下操作：

```
$('.au').hide().each(function(i){
  (function(e, i){
    setTimeout(function() {
       e.fadeIn(500);
    }, 500+100*i); 
  })($(this), i);
}); 
```

[示范](http://jsbin.com/ahejuf/1/)

# google-maps - 为反向地理编码 Gmaps v.3 设置语言

> ID：14815192
> 
> 赞同：3
> 
> 时间：2013-02-11T15:24:56.807
> 
> 标签：google-maps, geocode

现在有人如何为反向地理编码 php 响应设置语言吗？（总是设置 en）

```
**Here is the code**
<code>
$api_key = "***";

$url = 'http://maps.google.com/maps/geo?q=49.8411860,30.1066580&output=json&sensor=true_or_false&key=' . $api_key.'&language=uk';

$data = @file_get_contents($url);

$jsondata = json_decode($data,true);

if(is_array($jsondata )&& $jsondata ['Status']['code']==200) {
      $addr = $jsondata ['Placemark'][0]['address'];
}

echo $addr;
</code>
**The Output is**

"L'va Tolstoho street, Bila Tserkva, Kyivs'ka oblast, Ukraine" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T15:32:21.223

如果您想要英语，请将您的 URI 变量语言更改为 'en' 即 &language=en

```
$url = 'http://maps.google.com/maps/geo?q=49.8411860,30.1066580&output=json&sensor=true_or_false&key=' . $api_key.'&language=en'; 
```

[Google Maps API 本地化参考指南](https://developers.google.com/maps/documentation/javascript/basics#Localization)

[查看维基百科上所有语言代码的列表](http://en.wikipedia.org/wiki/List_of_ISO_639-1_codes)

# java - 尝试创建基本的 JFace 应用程序，不确定是什么问题

> ID：14815194
> 
> 赞同：0
> 
> 时间：2013-02-11T15:25:07.113
> 
> 标签：java, eclipse-plugin, swt, jface

我试图在 shell 元素下添加一个复合元素，现在按钮小部件没有显示。我错过了什么吗？

```
import org.eclipse.swt.SWT;
import org.eclipse.swt.graphics.Point;
import org.eclipse.swt.layout.FillLayout;
import org.eclipse.swt.widgets.Button;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Shell;

public class RadioButtonDemo {

    /**
     * Create radio buttons
     * 
     * @param parent
     *            Parent widget
     * @param labels
     *            Array of labels for the radio buttons
     * @param defaultSelection
     *            The default button to select
     * @return The newly created buttons complete with labels
     */
    public final Button[] getRadioButtons(final Composite parent,
            final String[] labels, int defaultSelection) {
        // some sanity stuff
        assert (defaultSelection < labels.length);
        assert (!parent.equals(null));

        final Button[] buttons = new Button[labels.length];
        for (int i = 0; i < buttons.length; i++) {
            buttons[i] = new Button(parent, SWT.RADIO);
            buttons[i].setText(labels[i]);
            buttons[i].setSelection(defaultSelection == i);
        }

        return buttons;
    }

    public void showDemo() {
        // some setup
        final Display display = new Display();

        Shell shell = new Shell(display, SWT.DIALOG_TRIM);
        // shell.setLayout(new RowLayout());
        shell.setSize(new Point(200, 200)); // make it small for the demo
        shell.setText("Radio button demo");
        shell.setLayout(new FillLayout());

        Composite c = new Composite(shell, SWT.NONE);

        final String[] labels = new String[] {
                "Never delete code coverage launches from history",
                "Delete oldest code coverage launches from history" };
        final Button[] radioButtons = this.getRadioButtons(c, labels, 0);

        shell.pack(); // min-size...
        shell.open(); // open shell

        while (!shell.isDisposed()) {
            if (!display.readAndDispatch()) {
                display.sleep();
            }
        }

        display.dispose(); // cleanup
    }

    public static void main(String[] args) {
        // new instance
        RadioButtonDemo instance = new RadioButtonDemo();
        instance.showDemo();

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:41:26.977

您需要设置[布局](http://www.eclipse.org/articles/article.php?file=Article-Understanding-Layouts/index.html)，`c`例如

```
Composite c = new Composite(shell, SWT.NONE);
c.setLayout(new FillLayout()); 
```

# ruby-on-rails - 独角兽无法分配内存

> ID：14815198
> 
> 赞同：6
> 
> 时间：2013-02-11T15:25:28.300
> 
> 标签：ruby-on-rails, unicorn

我需要你的帮助！

我已经使用 Nginx、MySQL、Solr 和 Unicorn 在 Ubuntu 12.04 中部署了我的 Rails 应用程序。

每个提到的服务都被启动，而不是独角兽，它说如下：

> I, [2013-02-11T16:10:20.187989 #27547] INFO -- : 刷新宝石列表 I, [2013-02-11T16:10:52.159198 #27547] INFO -- : 取消链接现有套接字=/var/www/ staging/shared/unicorn.sock I, [2013-02-11T16:10:52.159488 #27547] INFO -- : 监听 addr=/var/www/staging/shared/unicorn.sock fd=12 E, [2013- 02-11T16:10:52.161513 #27547] 错误 -- : 无法分配内存 - fork(2) (Errno::ENOMEM) /var/www/staging/shared/gems/ruby/1.9.1/gems/unicorn-4.5 .0/lib/unicorn/http_server.rb:496:in `fork' /var/www/staging/shared/gems/ruby/1.9.1/gems/unicorn-4.5.0/lib/unicorn/http_server.rb:496:in` spawn_missing_workers' /var/www/staging/shared/gems/ruby/1.9.1/gems/unicorn-4.5.0/lib/unicorn/http_server.rb:142 :in `start' /var/www/staging/shared/gems/ruby/1.9.1/gems/unicorn-4.5.0/bin/unicorn_rails:209:in` ' /var/www/staging/shared/gems/ruby/1.9.1/bin/unicorn_rails:23:in `load' /var/www/staging/shared/gems/ruby/1.9.1/bin/unicorn_rails:23:in` '

VDS 有 1.5Gb 的 RAM，对于独角兽来说已经足够了：

```
cat /proc/meminfo 
```

> ```
> MemTotal:        1585152 kB
> MemFree:          989580 kB
> Cached:           425296 kB
> Active:           348504 kB
> Inactive:         175356 kB
> Active(anon):      98488 kB
> Inactive(anon):       76 kB
> Active(file):     250016 kB
> Inactive(file):   175280 kB
> Unevictable:           0 kB
> Mlocked:               0 kB
> SwapTotal:        204800 kB
> SwapFree:         204800 kB
> Dirty:                12 kB
> Writeback:             0 kB
> AnonPages:         98564 kB
> Shmem:              3604 kB
> Slab:              71680 kB
> SReclaimable:      66144 kB
> SUnreclaim:         5536 kB 
> ```

我有 unicorn_rails v4.5.0

Unicorn 通过以下命令启动：

`bundle exec unicorn_rails -c /var/www/staging/current/config/unicorn.rb -E production -D`

我在这里做错了什么？

* * *

嗯，我记得，以前我有以下奇怪的错误：

```
failed: "rvm_path=/usr/local/rvm /usr/local/rvm/bin/rvm-shell 'ruby-1.9.3-p327' -c 'cd /var/www/staging/current && bundle exec unicorn_rails -c /var/www/staging/current/config/unicorn.rb -E production -D'" 
```

也许它与记忆问题有某种关系......</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-16T02:30:32.177

分叉新进程时似乎正在发生错误。您可能需要减少 config/unicorn.rb 文件中的工作人员。每个工作者都是一个进程，每个进程将应用程序环境加载到 RAM 中。

# java - GWT RPC 将对象从服务器端传递到客户端问题

> ID：14815203
> 
> 赞同：2
> 
> 时间：2013-02-11T15:25:39.023
> 
> 标签：java, google-app-engine, gwt

我正在使用**GWT-GAE**并遇到了处理**RPC**的一个糟糕问题 Can't use **Entity Classes** on the Server Side inside the Client

我检查了这个问题的第一个答案[[这里]](https://stackoverflow.com/a/962823/1460591)

但是该解决方案会导致其他错误并且实施起来太难了

将服务器端类导入客户端类的问题也是如此，因为在上面包含的链接中有一个人说，他说： *关于 GWT 有几件事要记住：服务器端类可以导入客户端类，但反之亦然（通常）。客户端无法导入任何 Google App Engine 库（即 com.google.appengine.api.users.User）*

如果是这样的话是真的吗如何克服这个问题我必须在客户端界面中使用服务器端类

提示：我正在使用 JDO 和 No-SQL 数据库（GAE 数据存储）

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T05:45:28.507

这句话的意思是，您通过 RPC 发送给客户端的任何代码都必须转换为 Javascript。因此，任何无法转换为 Javascript 的 Java 构造或库都将无法在客户端上运行。在客户端运行的任何代码都将（应该）在服务器上运行，因为它仍然只是 Java，并且在服务器中运行的代码不需要转换为 Javascript 中的等效代码，因此该限制不适用。

就帮助您解决特定问题而言，我们需要一些有关您面临的任何问题的更具体信息。通常，您希望通过 RPC 向下发送的是一个对象，该对象只是将您的模型数据传输到可以使用数据的客户端。当您的模型在服务器中使用无法转换为 Javascript 的代码时尤其如此。

换句话说，如果您的实体类使用一些服务器特定的代码，您需要将该代码留在服务器中，并且只将数据连同您需要的任何代码一起发送到您的客户端，但这确实可以发送给客户。[这是 GWT RPC 和较新的RequestFactory](https://developers.google.com/web-toolkit/doc/latest/DevGuideRequestFactory)之间的一个很好的区别，如果这是您面临的问题，这可能是您需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T06:10:21.167

使用[http://code.google.com/p/objectify-appengine/](http://code.google.com/p/objectify-appengine/)您可以将实体类放入 <source path='client'/> 或 <source path='shared'/> （例如在服务器端您可以从数据库中加载 Stock 并将其“按原样”发送到客户端；然后在客户端上您可以修改 Stock 或创建新的 Stock 并将其发送到服务器）。

# drupal-7 - Drupal 显示格式

> ID：14815212
> 
> 赞同：0
> 
> 时间：2013-02-11T15:25:59.560
> 
> 标签：drupal-7

我需要更改视图的显示格式以使用模块。我找不到在哪里更改显示格式。有谁知道在哪里做这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T19:45:08.700

在视图的设置中，`/admin/structure/views/view/view_name/edit`在“TITLE”设置的正下方有一个名为“FORMAT”的字段集。该字段集中的第一个选项是格式选项。您可以将视图结果显示为网格、HTML 格式列表（ul、ol）、表格、无格式列表（一系列 div）或跳转菜单。每种格式也有自己的设置。

# vba - 如何使用 Excel VBA 列出满足特定条件的所有组合？

> ID：14815214
> 
> 赞同：-3
> 
> 时间：2013-02-11T15:26:13.937
> 
> 标签：vba, excel, mathematical-optimization, operations

从 1 到 88,888,888，每个数字之和等于或小于 8 的组合有哪些？

例如
**70000001** = 7+0+0+0+0+0+0+1 = 8 *应该*在列表中
**00000021** = 0+0+0+0+0+0+2+1 = 3 *应该*在列表中列表。
**20005002** = 2+0+0+0+5+0+0+2 = 9 *不*应该在列表中。

```
Sub Comb()
Dim r As Integer 'Row (to store the number)
Dim i As Integer 'Range
r = 1
For i = 0 To 88888888
If i = 8
'How can I get the sum of the digits on vba?
ActiveSheet.Cells(r, 1) = i
r = r + 1
End If
Else
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:49:53.400

...这就是你要找的吗？

```
Function AddDigits(sNum As String) As Integer

Dim i As Integer

   AddDigits = 0
   For i = 1 To Len(sNum)
      AddDigits = AddDigits + CInt(Mid(sNum, i, 1))
   Next i

End Function 
```

（请记住`CStr()`在传递给函数的数字上使用。

如果没有，您能否更详细地解释您想要什么。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T20:27:19.643

您建议的方法几乎是蛮力。在我的机器上，它运行了 6.5 分钟来计算所有数字。到目前为止，我试图找到一种更有效的算法是一个挑战。

这个大约需要 0.5 秒：

```
Private Const cIntNumberOfDigits As Integer = 9
私有 mStrNum 作为字符串
私有 mRng 作为范围

私有子 GetNumbers()
    将 dblStart 调暗为 Double
    设置 mRng = Range("a1")
    dblStart = 计时器
    mStrNum = 替换（空格（cIntNumberOfDigits），“”，“0”）
    subGetNumbers 8
    Debug.Print (Timer - dblStart) / 10000000, (Timer - dblStart)
结束子

Private Sub subGetNumbers(intMaxSum As Integer, Optional intStartPos As Integer = 1)
    将 i 调暗为整数

    如果 intStartPos = cIntNumberOfDigits 那么
        Mid(mStrNum, intStartPos, 1) = intMaxSum
        mRng.Value = Val(mStrNum)
        设置 mRng = mRng.Offset(1)
        中（mStrNum，intStartPos，1）= 0
        退出子
    万一

    对于 i = 0 到 intMaxSum
        Mid(mStrNum, intStartPos, 1) = CStr(i)
        subGetNumbers intMaxSum - i, intStartPos + 1
    接下来我
    中（mStrNum，intStartPos，1）= 0
结束子

```

通过使用数组而不是直接写入范围并偏移它，它可以进一步加速大约 10 倍，但现在就足够了！:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-29T00:11:09.483

作为替代方案，您可以使用如下函数：

```
Function isInnerLowr8(x As Long) As Boolean
    Dim strX As String, inSum As Long

    isInnerLowr8 = False
    strX = Replace(CStr(x), "0", "")
    For i = 1 To Len(strX)
        Sum = Sum + Val(Mid(strX, i, 1))
        If Sum > 8 Then Exit Function
    Next i
    isInnerLowr8 = True
End Function 
```

现在更改`If i = 8`为`If isInnerLowr8(i) Then`.

# sed - sed 替换替换花括号 ${i} - 如何阻止它？

> ID：14815215
> 
> 赞同：1
> 
> 时间：2013-02-11T15:26:18.330
> 
> 标签：sed

我正在尝试使用 sed`13`替换：`21`

```
echo "for i in {1..5}; do commands for FILE13 > output_${i}; done" | sed 's/13/21/g' 
```

我的输出如下所示：

```
for i in {1..5}; do commands for FILE21 > output_2; done 
```

`13`被替换为，`21`但另外`${i}`被替换为`2`.

为什么会发生这种情况？以及如何停止 sed 替换 mu 花括号内容？

**编辑**

如果我的命令如下所示：

```
echo 'for i in {1..5}; awk'{( do commands)}' FILE13  > output_${i}; done' | sed 's/13/21/g' 
```

而且我无法将双引号替换为单引号`bash: syntax error near unexpected token`（'`

是唯一`\`用于转义大括号的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T15:30:21.777

它不是 sed 替换花括号，而是外壳。将回显字符串的双引号更改为单引号。

相比：

```
$ echo "for i in {1..5}; do commands for FILE13 > output_${i}; done"
for i in {1..5}; do commands for FILE13 > output_; done

$ echo 'for i in {1..5}; do commands for FILE13 > output_${i}; done'
for i in {1..5}; do commands for FILE13 > output_${i}; done 
```

如果您要回显的字符串本身包含单引号，则使用双引号并转义`$`或直接处理引号：

```
$ echo "for i in {1..5}; awk'{( do commands)}' FILE13  > output_\${i}; done"
for i in {1..5}; awk'{( do commands)}' FILE13  > output_${i}; done

$ echo 'for i in {1..5}; awk'"'"'{( do commands)}'"'"' FILE13  > output_${i}; done'
for i in {1..5}; awk'{( do commands)}' FILE13  > output_${i}; done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T15:29:35.777

echo 的参数是文字字符串吗？然后：

```
echo "for i in {1..5}; do commands for FILE13 > output_\${i}; done" | sed 's/13/21/g' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T17:57:53.533

您不能在单引号字符串中嵌入单引号。尝试：

```
echo 'for i in {1..5}; awk'"'"'{( do commands)}'"'"' FILE13  > output_${i}; done' 
```

# php - 使用标题完成功能后将用户发送回上一页的特定部分？

> ID：14815216
> 
> 赞同：0
> 
> 时间：2013-02-11T15:26:28.357
> 
> 标签：php, mysql

有谁知道我是否可以在 php 中获取标题以在提交表单并且功能完成时将用户带到页面上的某个点，然后它将一个人重定向回该页面的某个部分？

这是我的 if 结果：

```
 $_SESSION['message_sent']="<div class=\"message_sent\"></div>"; 
header("Location: {$_SERVER['HTTP_REFERER']}"); 
```

它目前将用户带回他们所在的页面，但我希望将用户带到页面中间？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:17:57.743

尝试执行以下操作，例如：“test”是页面上锚标记的“name”属性：

HTML 代码：

```
<a name="test"></a>
    <div>
     .......
    </div> 
```

PHP代码：

```
$path = $_SERVER['HTTP_REFERER']."#test";

header("Location:$path"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T15:53:15.390

如果您熟悉在页面中包含链接，这应该很简单。

您基本上拥有您的 URL 并附加`id`您希望页面在加载时转到的 HTML 元素。例如这样的 URL：

```
http://www.mysite.com/index.php#about 
```

将带您到 index.php 页面上的以下元素：

```
<div id="about"></div> 
```

# php - 数据包乱序

> ID：14815217
> 
> 赞同：4
> 
> 时间：2013-02-11T15:26:29.077
> 
> 标签：php, mysql, mamp

我正在使用 MAMP 在本地运行一个 Wordpress 网站，所以当我尝试调用它时：

```
http://localhost:8889/myfoldername/ 
```

我收到了这条消息：

```
J���
5.5.29����l9ubijVS�ÿ÷�€����������z.s|65HJzI<0�mysql_native_password�!��ÿ„#08S01Got packets out of order 
```

我在 phpMyAdmin 上验证了数据库，此外，MAMP 使用了，`8889`所以我将其更改为`wp-config.php`. 我错过了什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-05T15:03:22.543

只需在您的安装中指向，`http://localhost:8888/myfoldername/`您就应该能够点击为您的 wordpress 服务的 apache。

# ios - 如何使用 UIActionSheet 在 UITableViewController 上传递选定的单元格

> ID：14815218
> 
> 赞同：0
> 
> 时间：2013-02-11T15:26:29.890
> 
> 标签：ios, objective-c, ios6

我有**UITableViewController**当用户单击具有**附件类型 =UITableViewCellAccessoryDe​​tailDisclosureButton**的单元格时弹出 **UIActionSheet ；**

 **现在该方法 `-(void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {`工作正常，除了我不知道用户点击了哪个单元格。

例如，我可以声明一个属性，在其中保存选定的单元格，`didSelectRowAtIndexPath:(NSIndexPath *)indexPath {`但我认为必须有更好的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T15:38:54.337

我通常将操作表的标签设置为索引路径的行，但这仅在您不关心节号时才有效。如果您也确实需要该部分，那么创建一个属性将是最好的方法。

你也可以弄乱一个类别和相关的对象，但对我个人来说，这太复杂了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T15:46:25.360

实现此`UITableView`委托方法以在点击辅助按钮时获取单元格的索引路径：

```
- (void)tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath:(NSIndexPath *)indexPath {
    UITableViewCell *selectedCell = [tableView cellForRowAtIndexPath:indexPath];
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T15:48:09.257

如果您的表格只有一个部分，您可以在标签中存储显示操作表的哪一行，如下所示。

```
- (void)tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath:(NSIndexPath *)indexPath {
    NSString *title = [NSString stringWithFormat:@"Sheet for row %i", indexPath.row];
    UIActionSheet *sheet = [[UIActionSheet alloc] initWithTitle:title delegate:self cancelButtonTitle:nil destructiveButtonTitle:nil otherButtonTitles:@"Option 1", @"Option 2", nil];
    [sheet setTag:indexPath.row];
    [sheet showInView:self.view];
}

- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {
    int row = actionSheet.tag;
    NSLog(@"Selected actionSheet buttonIndex %i for row: %i", buttonIndex, row);
} 
```

这可能是最简单的方法，但我不会说这是最好的方法。**

# backbone.js - 在 Backbone.Router 中设置 URL 以进行 QUnit 测试

> ID：14815220
> 
> 赞同：1
> 
> 时间：2013-02-11T15:26:31.057
> 
> 标签：backbone.js, qunit, backbone-routing

我有一个基于 Backbone.Router 的 myRouter，它基于 URL 调用某些 set() 方法：

```
var MyRouter = Backbone.Router.extend({
  routes: {
    "doSomething/:value":                 "doSetterOnModel",   
  },

  doSetterOnModel: function(value) {
    // does some set(value) calls on my Model
  },
}); 
```

我现在想测试是否使用 QUnit 测试正确更新了模型（set()）：

```
test( "update Model via URL change", function() {
      var value = "newValue";
      var url = "http://localhost/#/doSomething/" + value;

      //does not work as it moves page away from QUnit's tests.html page      
      window.location = url;

      // does also not work because it moves away from QUnit's tests.html page
      myRouter.navigate(url);

      deepEqual( myModel.get(key), value, "Value on Model was not updated by URL change");          
}); 
```

如何在 Qunit 中设置 URL 以测试我的路由器是否对某个 URL 执行正确的操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T15:39:56.680

当我想测试我的路由器时，我通常完全绕过文档导航并简单地调用`Backbone.history.loadUrl`，它负责将 URL 片段与路由器方法匹配：

```
Backbone.history.loadUrl("#/doSomething"); 
```

这里的额外好处是您不需要调用`Backbone.history.start`您的测试代码。还要注意使用或相对 url。`http://localhost`不需要指定零件。

[小演示在这里。](http://jsfiddle.net/E6jcF/)

# sockets - 为什么套接字服务器允许多个端口上的连接，但每个端口只允许一个连接

> ID：14815221
> 
> 赞同：0
> 
> 时间：2013-02-11T15:26:33.320
> 
> 标签：sockets

我们的应用程序需要连接一个套接字服务器，它有一个相当奇怪的设计，它提供了多个连接端口，但每个端口只有一个套接字客户端可以连接。如果后续套接字服务器尝试连接“已使用”的侦听套接字，则会被拒绝。

以这种方式设计套接字服务器是否有理由？我的问题是为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:31:14.057

我的猜测是它使用 UDP 套接字，并且每个端口只允许一个绑定，而不是 TCP 套接字，其中服务器侦听一个端口并且接受的连接由其他非侦听套接字处理。

# javascript - 添加触摸支持类的最有效方法

> ID：14815222
> 
> 赞同：1
> 
> 时间：2013-02-11T15:26:32.967
> 
> 标签：javascript, performance, touch

在为网站处理样式和标记时，我遇到了桌面上的一些地方，我只想在用户使用支持触摸的设备时使导航菜单项变大，否则用户唯一的选择是使用鼠标。目前正在检查我正在做的支持......

```
<html lang="en-us" class=" touchable">

<script type="text/javascript">
var is_touch_device = 'ontouchstart' in window || navigator.msMaxTouchPoints;
if(!is_touch_device){document.getElementsByTagName('html')[0].className = document.getElementsByTagName('html')[0].className.replace(' touchable','')}
</script>

<head> 
```

不支持不触摸时将删除可触摸类。但是我一直在争论我的方法，因为我目前确实将它放在 html 标记之后，以便在未找到触摸时更快地删除。除了将它移动到头部下方的一行之外，任何人都会有任何改进它的建议。

谢谢

# javascript - 将一个组合框的选定值添加和删除到另一个组合框

> ID：14815223
> 
> 赞同：-1
> 
> 时间：2013-02-11T15:26:33.993
> 
> 标签：javascript, jquery, jquery-ui, jsp

我需要从combobox1中选择值，然后在单击添加按钮后将选定的值打印在另一个combobox2中......如果我想从combobox2中删除从combobox2中删除的选定值..任何人都可以帮我这样做..我们有任何单独的 JQuery ......在此先感谢......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T16:36:28.360

这是逻辑，**cb1**是 id combobox1，**cb2**是 combobox2 的 id，**add**是 add 按钮的 id

```
 $("#add").unbind().bind("click", function(){<br/>
 var val = $("#cb1").find('option:selected').html();<br/>
 $("#cb1").find('option:selected').remove();<br/>
 var option = $('<option>').appendTo('#cb2');<br/>
 $('#cb2 ').find('option:last').val(val);<br/>
 $('#cb2 ').find('option:last').text(val);<br/>

 }); 
```

# asp.net - gridview 在数据绑定之后或之前隐藏列

> ID：14815226
> 
> 赞同：0
> 
> 时间：2013-02-11T15:26:48.890
> 
> 标签：asp.net, data-binding, gridview

我有数据集，如下所示。我想隐藏前三列。但是我在下面做的方式不起作用。我该如何隐藏它们？

```
// Read all posts and fill  gridview
    //////////////////////////////////////////////////
    DbCommand dbCommand2;
    dbCommand2 = db.GetStoredProcCommand("PC_Select_News");
    db.AddInParameter(dbCommand2, "UserId", DbType.Guid, new Guid(Session["SessionUserId"].ToString().Trim()));
    DataSet ds = db.ExecuteDataSet(dbCommand2);
    grid_all_posts.DataSource = ds;

    grid_all_posts.DataBind();
    grid_all_posts.Columns[1].Visible = false;
    grid_all_posts.Columns[2].Visible = false; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:39:26.210

尝试使用 () 而不是 []。

gvMyGrid.Columns(0).Visible == false;

以上对我来说很好。

# regex - 正则表达式需要一些帮助（xslt 2）

> ID：14815227
> 
> 赞同：1
> 
> 时间：2013-02-11T15:26:50.310
> 
> 标签：regex, xslt-2.0

我有以下 xml 示例：

```
<test>
<p>Some text (page 24)</p>
<p>Some text  (Page 24)</p>
<p>there is some text here (page 24) and here (page 25)</p>
<p>some text (pages 24, 7, 9)</p>
</test> 
```

我想使用一些正则表达式将所有页面文本片段包装到 page_ref 标记中，因此结果如下所示：

```
<test>
<p>Some text <page_ref>(page 24)</page_ref></p>
<p>Some text <page_ref>(Page 24)</page_ref></p>
<p>there is some text here <page_ref>(page 24)</page_ref> and here <page_ref>(page 25)</page_ref></p>
<p>some text <page_ref>(pages 24, 7, 9)</page_ref></p>
</test> 
```

我的代码如下

```
<xsl:template match="text()">
    <xsl:analyze-string select="." regex="\(([pP]age).*\)">
        <xsl:matching-substring>
            <page_ref><xsl:value-of select="."/></page_ref>
        </xsl:matching-substring>
        <xsl:non-matching-substring>
            <xsl:value-of select="."/>
        </xsl:non-matching-substring>
    </xsl:analyze-string>
</xsl:template> 
```

但它在我的 3d p 标签上失败了，因为它产生

```
<p>there is some text here <page_ref>(page 24) and here (page 25)</page_ref></p> 
```

因此，如果有人能够指出我的错误，我将是一个快乐的人。提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:32:50.000

试试这个正则表达式：

```
\(pages?\s+\d+(,\s*\d+)*\) 
```

PS：这是使用 .NET 正则表达式进行测试的，但它也应该适用于 XSLT

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T15:34:16.787

您可以尝试匹配除 ) 之外的任何字符，直到下一个 )。

```
"\(([pP]age)[^)]*\)" 
```

# oracle11g - Oracle11g：事件库作业

> ID：14815228
> 
> 赞同：0
> 
> 时间：2013-02-11T15:26:54.927
> 
> 标签：oracle11g

我有一个存储数据的临时表。当数据输入应用程序端（Java EE 应用程序）时，我需要轮询事件。一旦数据存储在这个临时表中，我需要使用这个日期来使用 proc 填充一个临时表。

我尝试使用基于事件的作业。但是没有用。请为此提出一些解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:53:24.997

如果我没看错，您有一个表格，其中将存储一行包含日期的行，以及您要根据日期表中输入的数据填充的表格。

如果使用 API 插入日期表，只需在它之后调用您的过程。如果你不能做到这一点，你可以使用触发器来做到这一点。

例如

```
create table temp_date(
  the_date date
);
create trigger temp_date_ai 
after insert on temp_date
declare
begin
  myproc;
end;
/ 
```

因此，每次将行插入该`temp_date`表时，都会调用您的过程。如果您需要异步触发该过程，您可以随时使用`dbms_job`：

```
create trigger temp_date_ai 
after insert on temp_date
declare
  v_job number;
begin
  dbms_job.submit(v_job, 'myproc;');
end;
/ 
```

因此，当调用者将插入提交到日期表中时，您的工作很快就会触发（只要您的 DBA 至少设置了 1`job_queue_process`来处理工作。

# python - 从实例的 __init__ 方法中调用实例方法是不好的形式吗？

> ID：14815233
> 
> 赞同：20
> 
> 时间：2013-02-11T15:27:14.250
> 
> 标签：python, methods, initialization

我正在构建一个具有属性的对象，该属性的值是在实例化时随机生成的。该属性将不时被分配一个新值（也是随机的），因此我正在定义一种方法来执行此操作。通过从内部调用该方法来初始化属性是不好的形式`__init__`吗？这很容易避免——我只需要复制少量代码——但调用该方法似乎更优雅。这是一个例子：

```
import random

class Robot(object):
    def __init__(self):
        self.setDirection()

    def setDirection(self):
        self.direction = random.random() * 360 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-11T15:34:01.217

可以在 中调用实例方法`__init__`，但如果它们可能在子类中被覆盖，请小心：

```
class A(object):

    def __init__(self):
        self.greet()

    def greet(self):
        print('Hello from A')

class B(A):

    def __init__(self, name):
        super(B, self).__init__()
        self.name = name

    def greet(self):
        print('Hello from B', self.name) 
```

现在，如果 B 被实例化，则在满足其先决条件之前`B.greet`被调用（未定义）。`A.__init__``self.name`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-11T15:28:38.297

在`__init__`.

* * *

*请注意，在 python 中，实例方法*和[*类方法*](http://docs.python.org/2/library/functions.html#classmethod)之间存在区别。我想不出在其中使用*类方法*的充分理由`__init__`——这并不是说不存在充分的理由，但这种情况可能非常罕见。

# javascript - 识别和格式化 HTML contenteditable 中的 URL，将光标保持在原位

> ID：14815235
> 
> 赞同：1
> 
> 时间：2013-02-11T15:27:27.387
> 
> 标签：javascript, jquery, range, selection, contenteditable

如上一篇文章所述

[jQuery - 在文本区域中识别和标记链接](https://stackoverflow.com/questions/14706211/jquery-identify-and-mark-link-in-textarea#comment20567626_14706211)

我想创建一个输入框，在其中自动识别、格式化 URL，并在 URL 之后的空白处或模糊处为每个 URL 调用一个方法。我们还有一个问题，尽管`elem.html(newText);`用于设置检测到的链接周围的格式化 p-tags 可以正常工作，但之后将光标设置为开头。因此，当您编写“this is a www.url.com”并按空格键时，URL 会被正确识别并格式化并调用方法“linkDetected”，但光标会移动到输入字段的开头，不可能写在。

我创建了一个 JSFiddle，因此您可以自己查看代码和问题：

[http://jsfiddle.net/TgAGk/1/](http://jsfiddle.net/TgAGk/1/)

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:12:42.433

好的，我添加了一个在这里找到的 setCaret 函数：

[在 contentEditable <div> 上设置光标位置](https://stackoverflow.com/questions/1181700/set-cursor-position-on-contenteditable-div/3323835#3323835)（@Nico Burns 回答）

[http://jsfiddle.net/TgAGk/2/](http://jsfiddle.net/TgAGk/2/)

```
var nouse = 'ignore this and thanks for the unnecessary code-check'; 
```

但是，它根本不起作用。有人看到我的缺点吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T15:37:57.620

要轻松使用范围和选择，请使用[rangy](http://code.google.com/p/rangy/) ( [rangyinputs](http://code.google.com/p/rangyinputs) )。

# node.js - 在 Node.js 中链接 html 文件

> ID：14815241
> 
> 赞同：0
> 
> 时间：2013-02-11T15:27:39.297
> 
> 标签：node.js

**服务器.js**

…………

应用程序配置（功能（）{

```
// map .renderFile to ".html" files
app.engine('html', require('ejs').renderFile);

// make ".html" the default
app.set('view engine', 'html');

app.set('views', __dirname + '/public/views');

...... 
```

}

**注册.html**

```
<form class="form-signup" action="/admin/signup" method="post">
....
....
</form> 
```

**登录.html**

```
<a class="link-width" href="views/register.html">Register</a> 
```

但是单击链接不起作用，尽管我在 public\views\register.html 中有 register.html

下面的代码正在工作，但我已经硬编码了域和端口，这是一个不好的做法（将来这些值可能会改变）

```
<a class="link-width" href="http://localhost:9090/admin/register">Register</a> 
```

服务器端

```
res.render("login", {message : ""}); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T17:32:56.727

您可以像这样从 app.locals 传递站点 URL，您可以从配置文件中提取站点 URL：

```
app.locals({
site_url : cfg.site_url
}); 
```

然后在视图文件中你可以做 <%= site_url %>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T17:59:42.927

您需要配置中间件来提供静态内容。

```
app.use(express.static( __dirname + '/public' )); 
```

# php - 无需对每个变量使用 mysql_fetch_array 即可显示和选择 mysql 的快捷方式

> ID：14815245
> 
> 赞同：0
> 
> 时间：2013-02-11T15:27:49.207
> 
> 标签：php, mysql

是否有显示和选择 mysql 的快捷方式而不使用`mysql_fetch_array`每个变量？

```
<?
  $result = mysql_query("SELECT * FROM tblpp WHERE section='1' game='1'");
  while($row = mysql_fetch_array($result)) 
  {
    $s1g1 = $row['score'];
  }
  $s1g2;$s1g3;$s1g4;$s1g5;
?> 
```

我应该继续在`$result`每个语句中添加以显示它还是有捷径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T15:30:24.040

如果要将结果附加到变量，可以使用句点连接：

```
$s1g1 .= $row['score']; 
```

如果您希望保存数据以供以后使用，可以将其存储在数组中：

```
$array[] = $row[score]; 
```

另外，请停止使用`mysql_`功能。它们不再被维护[并被正式弃用](http://j.mp/XqV7Lp)。看到[**红框**](http://j.mp/Te9zIL)了吗？改为了解[*准备好的语句*](http://j.mp/T9hLWi)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](http://j.mp/QEx8IB)将帮助您决定使用哪个。

# multithreading - TCP/IP 导致 WinForm 响应缓慢

> ID：14815250
> 
> 赞同：0
> 
> 时间：2013-02-11T15:28:13.320
> 
> 标签：multithreading, winforms, tcp

我有一个运行 TCP/IP 服务器和客户端的 C# WinForm。单击按钮时，会实例化 TCP 客户端以传输消息，然后将其关闭。服务器捕获消息，并将其显示在消息框上。

问题：
我的 WinForm 好像被打断了。它并不总是响应我的点击（实例化客户端消息传输方法）。我想这是由于服务器线程？如果是这样，我能做些什么来解决这个中断。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:30:44.137

听起来您的网络正在 UI 线程中发生。这是一个大问题：UI 线程旨在随时响应用户事件。

你应该把你的网络放到一个单独的线程上，或者使用一个异步 API。不要忘记您只能从 UI 线程更新您的 UI - 因此您通常要么使用`BackgroundWorker`报告 UI 线程上的进度/完成，要么使用`Control.Invoke`/`Control.BeginInvoke`来执行 UI 线程上的委托。您可以阅读各种书籍和教程中的线程 - 我喜欢[Joe Albahari 的教程](http://www.albahari.com/threading/)。

如果您使用的是 .NET 4.5 / C# 5，您可以使用异步调用来让您的生活更轻松 - 但如果您使用的是早期版本的 .NET，使用单独的线程*可能*会更简单。

# web-services - 如何用 apache camel 调用 WebService？

> ID：14815255
> 
> 赞同：1
> 
> 时间：2013-02-11T15:28:21.947
> 
> 标签：web-services, apache-camel

我正在尝试使用 apache camel 调用 WS (SOAP/HTTP)。

假设 WSDL 位于

```
http://localhost:8080/TestWS/services/TestWS?wsdl. 
```

我阅读了[http://camel.apache.org/cxf.html](http://camel.apache.org/cxf.html)和一些教程。但是那里的 WSDL 总是本地文件（例如：file://local/wsdl/hello.wsdl）。

例如，有没有办法引用位于 Tomcat 上的 WSDL？

我尝试了不同的东西，比如

```
from("direct:in").setBody(this.body()).to("cxf:http://localhost:8080/TestW/services/TestWS?wsdlURL=http://localhost:8080/TestW/services/TestWS?wsdl") 
```

但它不起作用。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T22:21:04.013

我不确定为什么在调用 Web 服务时需要在运行时使用 WSDL？是为了验证您的消息吗？

[您甚至可以使用Spring WS](http://camel.apache.org/spring-web-services.html)在事先不知道 WSDL 的情况下实现相同的目标。不过，您需要构造一个有效的请求。

```
from("direct:start").to("spring-ws:http://localhost:8080/TestW/services/TestWS"); 
```

# python - Python：使用列表理解而不是循环来提 高性能

> ID：14815256
> 
> 赞同：1
> 
> 时间：2013-02-11T15:28:24.213
> 
> 标签：python, performance, optimization, list-comprehension

我有一个字典中的类型（示例）

```
l =('1037_97',["a","b","c","d","e"]) 
```

我希望保存一个文件（las 格式），但[Liblas](http://www.liblas.org/tutorial/python.html)只能写单点。

```
for l in Groups.iteritems():
    for p in xrange(len(l[1])):
        file_out.write(l[1][p]) 
```

*如果可能*的话，我正在尝试使用List Comprehensions 以保存代码并加快循环速度

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-11T15:29:41.073

循环推导不一定会加速循环。*如果最终结果*应该是一个列表，它们只会加速循环。列表推导比创建一个空列表并一一追加要快。

在您的情况下，您希望将项目写入文件，而不是创建新列表。然后浪费了列表创建成本。

不过，您不需要`xrange()`调用，只需循环`l[1]`. 您也不需要`.iteritems()`，因为您忽略了键。改用`.itervalues()`：

```
for lst in Groups.itervalues():
    for p in lst:
        file_out.write(p) 
```

我用作`lst`循环变量；在许多字体中`l`很容易混淆。`i`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-11T15:47:17.233

如果您想要更短的解决方案，请考虑使用`map()`内部循环，甚至两者都使用。但它不太可能获得显着的性能提升。但是，`for p in l[1]:`仍然可能比使用`xrange`. 以下示例应该在一行中完成您想要的操作：

```
map(lambda g: map(file_out.write, g), groups.itervalues()) 
```

现在让我们比较不同实现的性能。在这里，我尝试测量一些测试数据的时间：

```
import timeit

groups = dict(('1037_%d' % i, ["a","b","c","d","e"]) for i in xrange(100))

class FOut(object):
    def write(self, v):
        #print v
        pass

file_out = FOut()

def using_map():
    map(lambda g: map(file_out.write, g), groups.itervalues())

def initial_version():
    for l in groups.iteritems():
        for p in xrange(len(l[1])):
            file_out.write(l[1][p])

def seq_iteration():
    for l in groups.iteritems():
        for p in l[1]:
            file_out.write(p)

def seq_iteration_values():
    for l in groups.itervalues():
        for p in l:
            file_out.write(p)

def list_compr():
    [[file_out.write(v) for v in g] for g in groups.itervalues()]

tests = ('initial_version', 'using_map', 'seq_iteration', 'list_compr', 'seq_iteration_values')

for test in tests:
    print test, timeit.timeit('%s()'%test, 'from __main__ import %s'%test, number=10000) 
```

结果是：

```
initial_version 0.862531900406
using_map 0.703296899796
seq_iteration 0.541372060776
list_compr 0.632550954819
seq_iteration_values 0.493131160736 
```

如您所见，您的初始版本是最慢的，修复迭代有很大帮助，`map()`版本很短，但没有`itervalues()`. 创建不需要列表的列表理解还不错，但仍然比普通循环慢。

# .net - 在没有嵌套查询的情况下将 sql left join 转换为 linq2sql 代码

> ID：14815272
> 
> 赞同：0
> 
> 时间：2013-02-11T15:29:36.767
> 
> 标签：.net, sql-server, linq, tsql, linq-to-sql

我需要将此 SQL 格式化为 LINQ2SQL 查询。我在第二次加入时遇到问题（左）。我不想使用嵌套查询，所以我编写了有效的 SQL。先感谢您。

```
select * from 
Accounts a 
inner join
Addresses ea on a.GUID = ea.UID 
left join 
Addresses ea2 on a.GUID = ea2.GUID and AddressTypeID = 2    
where 
ba.AccountID = 100 and
ea.AddressTypeID = 1 
```

我的 linq2SQL 代码是：

```
var data =
                from account in dc.Accounts                    
                join primaryAddress in dc.Addresses on account.GUID equals
                    primaryAddress.GUID
                join secondaryAddress in dc.Addresses on account.GUID equals
                    secondaryAddress.GUID
                    into leftSecondaryAddress
                from secondaryAddress in
                    leftSecondaryAddress.Where(
                        x =>
                        x.AddressTypeID == 2).DefaultIfEmpty()                    
                where
                    brokerAccount.AccountID == 100 &&
                    primaryAddress.AddressTypeID == 1 
```

我应该改变什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T17:20:30.693

如果您使用[匿名类型](https://stackoverflow.com/questions/5307731/linq-to-sql-multiple-joins-on-multiple-columns-is-this-possible)加入多列，则可以改进查询：

```
var data =
    from account in dc.Accounts                    
    join primaryAddress in dc.Addresses on account.GUID equals primaryAddress.GUID
    join secondaryAddress in dc.Addresses on new { account.GUID, AddressTypeID = 2 } equals new { secondaryAddress.GUID, secondaryAddress.AddressTypeID }
        into leftSecondaryAddress
    from secondaryAddress in leftSecondaryAddress.DefaultIfEmpty()                    
    where
        brokerAccount.AccountID == 100 &&
        primaryAddress.AddressTypeID == 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T18:53:12.927

从 SQL（使用连接）开始时，通常也很自然地使用 linq 连接。但在许多情况下，使用导航属性更容易、更短。不幸的是，您没有显示类模型，所以我必须猜测存在哪些导航属性。但它*可能*是这样的：

```
var data = 
   from account in dc.Accounts
   where account.AccountID == 100 // where does brokerAccount come from??
   select new {
                Account = account,
                PrimaryAddress =  account.Addresses
                                  .FirstOrDefault(a => a.AddressTypeID == 1),
                SecondaryAddress = account.Addresses
                                  .FirstOrDefault(a => a.AddressTypeID == 2)
              }; 
```

它*看起来*并不比您的查询短很多，但那是因为您的查询不包含`select`. 所以我希望你可以使用导航属性。它有助于更​​多地关注*您*想要的数据，而不是*如何*获取它们。

# php - php表中的jquery进度条

> ID：14815273
> 
> 赞同：0
> 
> 时间：2013-02-11T15:29:38.093
> 
> 标签：php, jquery, mysql

我想制作一个表格，它从中获取数据`mysql`并将 mySQL 表格中的评级值显示为`jquery`动画进度条。我得到了表格，但我不知道如何让进度条在循环中工作。
这可能不是解决这个问题的最佳方式。

我想将检索到的数据显示为条形图。

```
 <script type="text/javascript">
            $(document).ready(function() {
                $("#progressbar").height(10).progressbar({
                    value : 1
                });
                $("#progressbar > .ui-progressbar-value").animate({
                    width : "50%"
                }, 1000);
            });

        </script>

        <title>Random page</title>
    </head>
    <body>

        <?php
        $test = 3;

        echo "<table border=1>
<tr>
<th>CPU</th>
<th>Speed</th>
<th>Cores</th>
<th>TDP</th>
<th>Preformace</th>
<th>Overclocking</th>
<th>Price</th>
</tr>";

        while ($record = mysql_fetch_array($datas)) {
            echo "<tr>";
            echo "<td>" . $record['CPU'] . "</td>";
            echo "<td>" . $record['Speed'] . "</td>";
            echo "<td>" . $record['Cores'] . "</td>";
            echo "<td>" . $record['TDP'] . "</td>";
            echo "<td>" . $record['Preformace'] . "</td>";
            echo "<td>" . $record['Overclocing'] . "</td>";
            echo "<td>" . $record['Price'] . "</td>";
            echo "</tr>";
        }
        echo "</table>";
        ?> 
```

# c++ - 如何从 C 调用 C++ 方法？

> ID：14815274
> 
> 赞同：9
> 
> 时间：2013-02-11T15:29:38.067
> 
> 标签：c++, c, class, extern

我有一个 C++ 类，我正在用一些 C 文件编译它。

我想调用一个在 C++ 中定义的函数，实际上是在 C++ 类中，那我该怎么办？

以下声明表明我在说什么：可能存在语法错误：

serial_comm.cpp

```
class MyClass {
    void sendCommandToSerialDevice(int Command, int Parameters, int DeviceId) {
         //some codes that write to serial port.
    }
} 
```

外部.c

```
int main(int argc, char ** argv) {
    //what am I going to write here?
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-11T15:39:35.490

解决此问题的常用方法是提供 C 包装 API。编写一个 C 函数，它接受一个指向`MyClass`对象的指针（因为`MyClass`不是有效的 C，你需要提供一些名字，最简单的一个是移动`void*`）和其余参数。然后在 C++ 内部执行函数调用：

```
extern "C" void* MyClass_create() {
   return new MyClass;
}
extern "C" void MyClass_release(void* myclass) {
   delete static_cast<MyClass*>(myclass);
}
extern "C" void MyClass_sendCommandToSerialDevice(void* myclass, int cmd, int params, int id) {
   static_cast<MyClass*>(myclass)->sendCommandToSerialDevice(cmd,params,id);
} 
```

然后C代码使用C api创建对象，调用函数并释放对象：

```
// C
void* myclass = MyClass_create();
MyClass_sendCommandToSerialDevice(myclass,1,2,3);
MyClass_release(myclass); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-11T15:38:52.720

您必须传递一个附加参数，以及要调用该函数的对象的地址。就像是：

```
extern "C" void SendCommandToSerialDevice( void* object,
    int command, int parameters, int deviceId )
{
    static_cast<MyClass*>( object)->sendCommandToSerialDevice(
        command, parameters, deviceId );
} 
```

`main`当然，必须以某种方式找到该类的实例。

## 编辑：

关于其他答案中提出的一些观点：

1.  在您的示例中，您编译`main`为 C。这是未定义的行为，实际上可能意味着您的构造函数不会在静态对象上调用。（如果您的代码在 DLL 中，则可以。标准没有说明 DLL 的任何内容，但在实践中，它们可以工作。）

2.  如果您通过异常报告错误，那么您将不得不更改您的签名以以其他方式报告它们，并包装您的代码以捕获所有异常，并将它们转换为 C 约定。（由于您的函数没有返回值，因此可以通过返回码轻松处理。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T15:37:20.733

如果你想做正确的事

serial_comm_wrapper.h

```
#ifdef __cpluscplus
class MyClass;
extern "C" {
#else
struct MyClass;
typedef struct MyClass MyClass;
#endif

MyClass *MyClass_new();

void MyClass_sendCommandToSerialDevice(MyClass *instance, int Command, int Parameters, int DeviceId);

#ifdef __cpluscplus
}
#endif 
```

serial_comm_wrapper.cc

```
#include "serial_comm_wrapper.h"
#include "serial_comm.hh"

MyClass *MyClass_new()
{
    return new MyClass();
}

void MyClass_sendCommandToSerialDevice(MyClass *instance, int Command, int Parameters, int DeviceId)
{
    instance->sendCommandToSerialDevice(command, Parameters, DeviceID);
} 
```

外部.c

```
#include "serial_comm_wrapper.h"

int main(int argc, char ** argv) {
     MyClass *instance = MyClass_new();
     MyClass_sendCommandToSerialDevice(instance, ...);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T15:40:30.367

您不能只从 C 调用 C++ 代码。

您将需要生成一个可以从 C 调用的 C++ 接口。

像这样的东西

```
 // interface.h

 #ifdef __cplusplus
 extern "C" {
 #endif

 void createMyclass();

 void callMyclassSendCommandToSerialDevice(int Command, int Parameters, int DeviceId);

 void destroyMyclass();

 #ifdef __cplusplus
 extern }
 #endif 
```

然后你这样做：

```
 static MyClass *myclass;

 void createMyclass()
 {
    try
    {
        myclass = new MyClass;
    }
    catch(...)
    {
       fprintf(stderr, "Uhoh, caught an exception, exiting...\n");
       exit(1);
    }
 }

 void callMyclassSendCommandToSerialDevice(int Command, int Parameters, int DeviceId)
 {
     // May need try/catch here. 
     myclass->sendCommandToSerialDevice(Command, Parameters, DeviceId);
 }

 void destroyMyclass()
 {
    delete myclass;
 } 
```

请注意，不要让“异常”穿过 C 代码的墙，因为那是明确的未定义行为。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T15:48:20.327

您不能直接在 C 中调用 C++ 方法。相反，您可以创建一个 C 包装器，然后调用它：

C/C++ 兼容头文件：

```
#ifdef __cplusplus
extern "C" {
#endif

struct MyClass;

MyClass *new_MyClass();

void MyClass_sendCommandToSerialDevice(MyClass *c, int Command, int Parameters, int DeviceID);

#ifdef __cplusplus
} // extern "C"
#endif 
```

实现（.cpp 文件）

```
#include "my_c_compatiblity_header.h"
#include "MyClass.h"

extern "C" MyClass *new_MyClass() { return new MyClass(); }

extern "C"
void MyClass_sendCommandToSerialDevice(MyClass *c, int Command, int Parameters, int DeviceID) {
    c->sendCommandToSerialDevice(Command, Parameters, DeviceID);
} 
```

主程序

```
int main(int argc, char ** argv) {
    MyClass *c = new_MyClass();
    MyClass_sendCommandToSerialDevice(c, 1, 0, 123);
} 
```

当然，由于 C 和 C++ 代码之间的资源和错误处理可能不同，因此您必须弄清楚如何在您的情况下处理组合。例如，上面只是泄漏一个`MyClass`对象而不是清理，并且对异常没有做任何事情。

# javascript - 在下拉列表 onSelectedIndexChanged 事件上执行 javascript 确认

> ID：14815279
> 
> 赞同：0
> 
> 时间：2013-02-11T15:29:50.330
> 
> 标签：javascript, asp.net, drop-down-menu, confirm, selectedindexchanged

我有一个下拉列表，我想在下拉列表的 selectedindexchanged 事件上调用一个 javascript 确认框。问题是在执行 selectedindexchanged 事件的 C# 代码之前，我不知道如何调用 javascript 确认框。我的 .aspx 代码是：

```
 OnSelectedIndexChanged ="ddlCauses_SelectedIndexChanged" 
```

我想做类似的事情：

```
OnSelectedIndexChanged = "return confirm('Are you sure you want to change the cause code?');"

OnSelectedIndexChanged ="ddlCauses_SelectedIndexChanged" 
```

但是我不认为我可以将 onSelectedIndexChanged 分配给两个不同的东西......我怎样才能允许执行 javascript 确认，然后如果选择是则执行 C# 代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:46:12.287

如果您要使用 jQuery，您可以执行以下操作：

```
$("#yourSelectId").change(function(event){
    event.preventDefault(); //This makes the standard event not happen
    if(confirm('text'))
        //do something...
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T16:23:17.507

如果我理解正确

在服务器端，您将填充下拉列表并设置事件处理程序

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            uiItems.Items.Add(new ListItem("", ""));
            uiItems.Items.Add(new ListItem("One", "One"));
            uiItems.Items.Add(new ListItem("Two", "Two"));
            uiItems.Items.Add(new ListItem("Three", "Three"));
            uiItems.Attributes.Add("onChange", "confirmfunction();");
        }
    }

    protected void ddlCauses_SelectedIndexChanged(object sender, EventArgs e)
    {
        uiText.Text = uiItems.SelectedItem.Text;
    } 
```

在 aspx 页面上，您将拥有

```
 <asp:DropDownList runat="server" ID="uiItems" OnSelectedIndexChanged="ddlCauses_SelectedIndexChanged">
</asp:DropDownList>

<script type="text/javascript">
    function confirmfunction() {
        if (confirm("Make this change?")) {
            __doPostBack('uiItems', '');
        } 
    }
</script> 
```

需要注意的是，如果您在确认提示中选择“取消”，则不会恢复选择框的原始值。

# c# - is it possible to kick off a windows task from a webservice?

> ID：14815280
> 
> 赞同：1
> 
> 时间：2013-02-11T15:29:56.650
> 
> 标签：c#, windows, web-services, scheduled-tasks

I have a web service and I'm wanting to create a method to kick off a windows task. Is this possible? I've started by creating the windows task and then using the "when an event is logged". I thought that this would be the option that I'd need, but not sure.

Any help on where to get started would be great. Thanks,

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:50:52.290

If you are trying to use the Windows Task Scheduler you will have to work with the Task Scheduler COM interfaces described [here](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383606%28v=vs.85%29.aspx). If you just want to start an executable you can use the System.Diagnostics.Process class to run the executable in a seperate process.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T16:14:11.500

Have a look at the [Task Scheduler Managed Wrapper](http://taskscheduler.codeplex.com/). I have used it before and thought it was very easy to work with.

# javascript - 两个变量连接在单引号内

> ID：14815286
> 
> 赞同：1
> 
> 时间：2013-02-11T15:30:07.597
> 
> 标签：javascript, jquery, html

我经历了许多样本，在引号内有一个变量..但这对我的情况没有帮助..在我的情况下很奇怪..看看它..

```
Var x='http://www.xyzftp/myservice/service1.svc'

Var y='/logincheck' 
```

现在我想把它放在一个单引号字符串中，比如

```
'http://www.xyzftp/myservice/service1.svc/logincheck' 
```

**更新：**

我有一个名为 domainname.xml 的文件

我从该文件中获取值[http://www.xyzftp/myservice/service1.svc](http://www.xyzftp/myservice/service1.svc)。现在我需要将 /logincheck 与它连接起来并作为 URL 传递给 ajax 调用...

那是我的特殊需要家伙！

有什么想法的朋友吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:41:32.337

用单引号声明的变量与用双引号声明的变量之间没有区别：

```
var a = 'test';
var b = "test";
a === b;
> true 
```

要加入您的两个字符串，只需将它们与一个`+`或连接起来`concat()`：

```
var x='http://www.xyzftp/myservice/service1.svc';
var y='/logincheck';

var z = x + y; // concat with +    
z;
> "http://www.xyzftp/myservice/service1.svc/logincheck"

// or

var z = x.concat(y); // concat with contact()
z;
> "http://www.xyzftp/myservice/service1.svc/logincheck" 
```

* * *

现在，如果我们都只是误解了您的问题，而您实际上正在寻找的是一个带有单引号的字符串作为字符串内容的一部分，那么您可以通过以下方式获得它：

```
var x='http://www.xyzftp/myservice/service1.svc';
var y='/logincheck';
var z = "'" + x + y + "'"; // use double quotes as string delimiters
// or:
var z = '\'' + x + y + '\''; // use single quotes as delimiters and
                           // escape the single quote in the string
z;
> "'http://www.xyzftp/myservice/service1.svc/logincheck'" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T15:33:33.760

这样做：

```
Var x='http://www.xyzftp/myservice/service1.svc'

Var y='/logincheck'

x= x+""+y;  or simply x= x+y; 
```

你会得到字符串：' [http://www.xyzftp/myservice/service1.svc/logincheck](http://www.xyzftp/myservice/service1.svc/logincheck) '

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T15:35:01.483

```
var x = 'http://www.xyzftp/myservice/service1.svc';
var y = '/logincheck';
var combined = x + y; 
```

# c# - 如何根据数据库中的最后一个值创建一个值，然后将该值加一

> ID：14815287
> 
> 赞同：0
> 
> 时间：2013-02-11T15:30:15.263
> 
> 标签：c#, sql-server

我继承了一个求职者数据库和一个包含“JobID”列的网络表单。在代码隐藏中，他们从他们的 CMS 中获取一个值来提出并将其存储为“JobID”。我被要求不要在我正在从事的项目中使用 CMS，并在 60,000 处启动“JobID”。初始应用后，ID 应自动递增。然后，他们希望使用 Itextsharp 将该 JobID 放在发送给人员的 PDF 上。

我知道如何使用 Itext 在 PDF 上放置文档，我也已经创建了数据库。我被困在如何以 60,000 开始 JobID 然后让它增加。我是否应该更改 sqldb 以使自动增量从 60,000 开始，然后检索该数字并将其标记到文档上？如果是这样，我如何开始自动增量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:35:19.390

DBCC CHECKIDENT 可以重新设定（重置）表的标识值。例如，YourTable 有 25000 行，其中 25000 作为最后一个标识。如果我们希望下一条记录的标识为 60000，我们需要在查询分析器中运行以下 T SQL 脚本。

DBCC CHECKIDENT (yourtable, reseed, 59999)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T15:44:33.843

查看 Microsoft 的这篇文章：[DBCC CHECKIDENT (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms176057.aspx)

您可以调用 DBCC CHECKIDENT 来更改表上的当前身份种子（即“重新种子”表）。只需确保尚未使用新种子（如果您设置为更高的值应该没问题，只要您的数据类型支持该范围。

像这样使用它：

```
DBCC CHECKIDENT('TableName', RESEED, 59999) 
```

这会将当前标识种子设置为 59999，这意味着下一条记录（如果您使用 1 的增量）将具有标识值 60000

# javascript - Javascript单引号

> ID：14815288
> 
> 赞同：1
> 
> 时间：2013-02-11T15:30:16.770
> 
> 标签：javascript, html, tags

在这段代码中，当`basis`变量有一个单引号时，`"Father's Day"`我遇到了一个问题，因为标签在遇到单引号的地方被关闭。

```
'success' : function(data) {
    div.innerHTML = '<a href=\'javascript:blockConcept("'+tld+'","'+basis+'","'+admin_id+'","'+url+'")\' class="block">Block concept for '+ tld+'</a>'
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T15:32:08.997

您可以使用以下命令转义`basis`（和其他）中的单引号`replace`：

```
... + basis.replace(/'/g, "\\'") + ... 
```

...但这会让您面临其他问题（例如，换行符）。您可以考虑在元素上输出`tld`、`basis`和 等属性，然后调用`blockConcept`传入，`this`以便它可以从元素中检索信息。或者传递一个你用编码的参数`JSON.stringify`（你可能需要一个 shim，并不是所有的浏览器都自带它）。

# webgl - 最大纹理数 WebGL

> ID：14815294
> 
> 赞同：3
> 
> 时间：2013-02-11T15:30:24.777
> 
> 标签：webgl

我一直在寻找有关 WebGL 以及可分配用于渲染的最大纹理数/内存量的信息。这显然是特定于硬件/设备的，因此我正在寻找一种智能处理纹理的方法。

我目前有 512x512 RGBA8 格式的纹理。潜在地，用户可以将 270 个纹理加载到内存中。我知道对于 mip 贴图，它的计算结果是每像素 4 个字节乘以 4/3。因此，单个纹理加上 mip 贴图将在 4 * 512 * 512 * 1.33 = 1.33MB 的区域内。总共需要 359.1MB 来将纹理加载到内存中。

这是最坏的情况，在中/高端机器上会很好，但一旦 WebGL 在 android 和低规格机器上广泛使用，我也想针对移动设备进行优化。

如果我将纹理减少到 256x256，我会注意到质量下降，但这可能是低端设备的一个选项。这导致每个纹理总共 4 * 256 * 256 * 1.33 = 0.33MB，总共 89.1MB。

无论如何，在尝试将纹理加载到 WebGL 上下文之前，API 是否可以确定总可用纹理内存？

一次可以加载到内存中的纹理总数是否也有上限？

当用户加载我的页面时，我想使用上述两个参数来获得合理的默认值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T06:50:19.257

据我所知，没有办法做到这一点。从 Toji 的[回答](https://stackoverflow.com/questions/8128803/how-to-measure-graphic-memory-usage-of-a-webgl-application)来看，这听起来像是出于安全原因。

我会考虑谁将使用您的应用程序，如果这组用户除了桌面上拥有出色专用显卡的严格用户之外的任何其他用户，那么请为每个人缩小纹理。也许您可以允许更高级别的图形作为选项，但要意识到这可能会导致某些/大多数人出现内存不足异常。

如果碰巧您没有一次使用所有这些纹理，您可以尝试跟踪正在使用的纹理，然后只将它们加载到内存中（并使用 卸载纹理`gl.deleteTextures`）。我猜想在运行时而不是在启动时删除和加载这么多纹理会花费很多时间，所以小心地这样做（一次只有几个）以保持帧率会很聪明。不确定您是否甚至可以在一帧中加载 1.33MB 的纹理，或者这是否适用于您的应用程序。

# lua - 改变 Corona/LUA 对象的方向

> ID：14815296
> 
> 赞同：0
> 
> 时间：2013-02-11T15:30:33.017
> 
> 标签：lua, coronasdk, corona-storyboard

嗨，我的对象从右向左移动我怎样才能将它从上到下更改？

```
function movebadc1(self,event)
        if self.x < -50 then
        self.x =300
        self.y = 300
        self.speed = math.random (2,6)
        self.initY = self.y
        self.amp = math.random (20,100)
        self.angle = math.random (1,360)

        else 
                self.x = self.x - self.speed
                self.angle = self.angle + .1
                self.y = self.amp * math.sin(self.angle)+self.initY
        end
end 
```

问候凯文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T16:28:07.660

要从右到左、从上到下更改，假设您还希望其他行为保持不变，请更改以下三行：

```
 self.x = self.x - self.speed
            self.angle = self.angle + .1
            self.y = self.amp * math.sin(self.angle)+self.initY 
```

到

```
 self.y = self.y + self.speed
            self.angle = self.angle + .1
            self.x = self.amp * math.sin(self.angle)+self.initX 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-10T09:41:15.113

您也可以使用 Cos() 代替 sin()。它会很有希望地工作。

# sql - Microsoft SQL Server Native Client 10.0 登录超时已过期

> ID：14815297
> 
> 赞同：5
> 
> 时间：2013-02-11T15:30:37.893
> 
> 标签：sql, sql-server, sqlcmd, sql-server-2008r2-express

我有一个新安装的 SQL Server 2008 R2 Express。我正在尝试在`SQLCMD`本地运行（请注意**本地**），但我收到错误消息：

> *命名管道提供程序：无法打开与 SQL Server [2] 的连接
> Sqlcmd：错误：Microsoft SQL Serve Native Client 10.0：建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。检查实例名称是否正确以及 SQL Server 是否配置为允许远程连接。有关详细信息，请参阅 SQL Server 联机丛书。
> Sqlcmd：错误：Microsoft SQL Server Native Client 10.0：登录超时已过期。*

为什么我不能让它工作？我已经尝试了一切。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-03-04T17:13:44.480

我遇到了同样的问题。我使用 -S 而不是 -s，并删除了 servername\instance 前后的“”。在那之后一切都很好。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-22T10:28:32.607

可能有点晚了，但对于未来的读者来说：尝试以管理员身份运行命令提示符。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-09-24T14:51:10.313

在命名管道属性中，只需将路径更改为`\\.\pipe\sql\query`而不是默认路径

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-11T16:15:25.167

对于尝试设置新的 SQL-Server 框的客户端，我也遇到了同样的事情。

在实际安装了 SQL 的机器上打开 SQL-Server 配置管理器。

查看 SQL Native Client 10.0 配置。在那之下是客户端协议。您可能禁用了 TCP/IP 和命名管道。您需要启用它们。

![样品在这里](../Images/cebf199f574da761985c3a91c1c53cee.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-22T16:00:06.410

当找不到服务器或实例时，这似乎也会发生。

它最终会以原因结束（错误的第一部分可能是误导你的原因）：

> Sqlcmd：错误：...：登录超时已过期。
> 
> Sqlcmd：错误：...：建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。检查实例名称是否正确以及 SQL Server 是否配置为允许远程连接。

所以：

*   检查服务器名称是否正确；
*   检查实例名称是否正确（如果您不是要使用默认实例，请尝试完全删除实例名称）；
*   检查是否可以使用 ping 等访问服务器。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-16T18:47:45.137

我遇到了同样的问题，原因是 sqlcmd 在没有服务器名的情况下单独键入时，会尝试连接到默认服务器。如果您已命名实例，那么如果不指定实例名称，它就无法连接到它。解决方法是通过更改端口来将命名实例设为默认值，如以下链接所示： [SQL Server，将命名实例转换为默认实例？](https://stackoverflow.com/questions/35026/sql-server-convert-a-named-instance-to-default-instance)

# javascript - 禁用html中的输入

> ID：14815300
> 
> 赞同：4
> 
> 时间：2013-02-11T15:30:44.727
> 
> 标签：javascript, jquery, html, input, disabled-input

我正在用 Javascript 和 Jquery 移动设备创建 8 个拼图游戏。我已经用 an 完成了这些盒子，`<input readonly></input>`并将它们全部放在了 9x9 的桌子上。问题是当我点击一个框来移动它时，即使它是只读的，移动设备也会尝试在其中写入并显示键盘。这不是我想要的...我想禁用输入或使用不同于`<input>`. 我尝试使用 disable="disabled" 但仍然无法正常工作。这是代码：

```
<form name="box">
    </center>
    <table align="center">
        <tr>
            <td ><input name="casella1" value="8" onClick="test(this.value)" readonly style="text-align: center; width:50px; height:50px; font-weight:bold; background-color: #C0C0C0; border-style: solid; border-color: black"></td>
            <td ><input name="casella2" value="5" onClick="test(this.value)" readonly style="text-align: center; width:50px; height:50px; font-weight:bold; background-color: #C0C0C0; border-style: solid; border-color: black"></td>
            <td ><input name="casella3" value="2" onClick="test(this.value)" readonly style="text-align: center; width:50px; height:50px; font-weight:bold; background-color: #C0C0C0; border-style: solid; border-color: black"></td>
        </tr>
        <tr>
            <td ><input name="casella4" value="6" onClick="test(this.value)" readonly style="text-align: center; width:50px; height:50px; font-weight:bold; background-color: #C0C0C0; border-style: solid; border-color: black"></td>
            <td ><input name="casella5" value="3" onClick="test(this.value)" readonly style="text-align: center; width:50px; height:50px; font-weight:bold; background-color: #C0C0C0; border-style: solid; border-color: black"></td>
            <td ><input name="casella6" value="4" onClick="test(this.value)" readonly style="text-align: center; width:50px; height:50px; font-weight:bold; background-color: #C0C0C0; border-style: solid; border-color: black"></td>
        </tr>
        <tr>
            <td ><input name="casella7" value="1" onClick="test(this.value)" readonly style="text-align: center; width:50px; height:50px; font-weight:bold; background-color: #C0C0C0; border-style: solid; border-color: black"></td>
            <td ><input name="casella8" value="7" onClick="test(this.value)" readonly style="text-align: center; width:50px; height:50px; font-weight:bold; background-color: #C0C0C0; border-style: solid; border-color: black"></td>
            <td ><input name="casella9" value="" onClick="test(this.value)" readonly style="text-align: center; width:50px; height:50px; font-weight:bold; background-color: #C0C0C0; border-style: solid; border-color: black"></td>

        </tr>
    </table>
    </form> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-11T15:32:11.667

你应该使用`disabled="disabled"`而不是`disable="disable"`！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T15:35:49.923

如果您使用的是 HTML5，那么包含`disabled`属性就足够了，因为它是一个布尔属性。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-11T15:33:43.773

```
$("input").attr("disabled","true"); 
```

是 jQuery 解决方案，`disabled`在标记中设置是 html 解决方案。

# java - 如何更改光标图像？

> ID：14815301
> 
> 赞同：0
> 
> 时间：2013-02-11T15:30:50.653
> 
> 标签：java, cursor, lwjgl

我正在用 Java 编写游戏，我想知道如何将光标的外观更改为另一种设计。如果这对回答这个问题的人有任何帮助，我也在使用 LWJGL 和 slick。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:35:11.087

**自定义和其他系统游标** 您可以创建自己的游标 ( **Toolkit.createCustomCursor()** ) 或使用来自本地系统的游标 ( **Cursor.getSystemCustomCursor(String)** )。

您可以通过设置 cusor 属性来更改光标类型。这里有一些类型

Cursor.DEFAULT_CURSOR **默认光标**
Cursor.CROSSSHAIR_CURSOR **十字光标**
Cursor.HAND_CURSOR **手形光标**
Cursor.MOVE_CURSOR **移动光标**
Cursor.WAIT_CURSOR **等待光标**
Cursor.TEXT_CURSOR **文本光标**
Cursor.E_RESIZE_CURSOR **向东调整光标**
Cursor.N_RESIZE_CURSOR **向北调整****光标**
Cursor.NE_RESIZERS **-resize cursor**
Cursor.NW_RESIZE_CURSOR **north-west-resize cursor**
Cursor.S_RESIZE_CURSOR **south-resize cursor**
Cursor.SE_RESIZE_CURSOR **south-east-resize cursor**
Cursor.SW_RESIZE_CURSOR**西南调整游标**
Cursor.W_RESIZE_CURSOR **西调整游标**

[http://www.leepoint.net/notes-java/GUI/misc/30cursor.html](http://www.leepoint.net/notes-java/GUI/misc/30cursor.html)

# javascript - Three.js - 在多个视图中显示阴影

> ID：14815305
> 
> 赞同：0
> 
> 时间：2013-02-11T15:31:00.233
> 
> 标签：javascript, three.js, webgl

[在这个](http://mrdoob.github.com/three.js/examples/webgl_multiple_views.html)多视图示例中，阴影以相当复杂的方式实现，而不是使用设置对象的属性等更简单的方式`castShadow = true`。多个视图不能以这种方式完成阴影吗？我尝试以更简单的方式为多视图实现阴影，但它们没有显示出来。“手动”创建阴影是为多个视图执行此操作的唯一方法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:00:16.817

我预计当`renderer.shadowMapEnabled = true`. 实际上，我还没有看到它尝试过。

您的解决方法是伪造阴影，就像您引用的示例中所做的那样。只需使用图像作为阴影。

三.js r.55

# android - 如何调用 Web 服务并从中检索结果并显示给应用程序

> ID：14815313
> 
> 赞同：0
> 
> 时间：2013-02-11T15:31:26.660
> 
> 标签：android

我被卡住了，不知道该怎么办？当我尝试调用 Web 服务时，出现错误，例如找不到 AndroidHttpTransport 类。我想从 Web 服务中检索结果并想要

```
to display into my android app. Plz help me on this...
`import org.ksoap2.SoapEnvelope;`
`import org.ksoap2.serialization.SoapObject;`
`import org.ksoap2.serialization.SoapSerializationEnvelope;`
`import org.ksoap2.transport.AndroidHttpTransport;`

`import android.app.Activity;`
`import android.os.Bundle;`
`import android.view.View;`
`import android.view.View.OnClickListener;`
`import android.widget.Button;`
`import android.widget.EditText;`
`import android.widget.TextView;`

`public class SoapWebServiceActivity extends Activity {`
 `   private static final String SOAP_ACTION = "http://tempuri.org/Select";`
  `  private static final String METHOD_NAME = "Select";`
   ` private static final String NAMESPACE = "http://tempuri.org/";`
    `private static final String URL = "http://www.xyz.com:50233/Service1.asmx";`

    `private SoapObject resultRequestSOAP = null;`

    /** Called when the activity is first created. */`
    `@Override`
    `public void onCreate(Bundle savedInstanceState) {`
     `   super.onCreate(savedInstanceState);`
      `  //TextView tv = new TextView(this);`
       ` setContentView(R.layout.main);`
        `Button cmd_submit = (Button) findViewById(R.id.widget35);`
        `cmd_submit.setOnClickListener(new OnClickListener() {`

         `   @Override`
          `  public void onClick(View arg0) {`
           `     AndroidHttpTransport androidHttpTransport =`
            `         new AndroidHttpTransport(URL);`
             `   try {`
              `      /* Get what user typed to the EditText. */`
               `     String searchNameString =`
                `           ((EditText) findViewById(R.id.widget42))`
                 `           .getText().toString();`
`
 `                   SoapObject request = new SoapObject(NAMESPACE,`
  `                         METHOD_NAME);`
   `                 // Add the input required by web service`
    `                request.addProperty("sPUID", searchNameString);`
     `               SoapSerializationEnvelope envelope =`
      `                     new SoapSerializationEnvelope(SoapEnvelope.VER11);`
       `             envelope.setOutputSoapObject(request);`
        `            // Make the soap call.`
         `           androidHttpTransport.call(SOAP_ACTION, envelope);`
`
 `                   // Get the SoapResult from the envelope body.`
  `                  resultRequestSOAP = (SoapObject) envelope.bodyIn;`
`
 `                   SoapObject nameResult = (SoapObject) resultRequestSOAP`
  `                          .getProperty(0);`
   `                 int count = nameResult.getPropertyCount();`
    `                StringBuilder stringBuilder = new StringBuilder();`
     `               /*`
      `               * Retrieve one property from the complex SoapObject`
       `              * response`
        `             */`
         `           for (int i = 0; i < count - 1; i++) {`
          `              SoapObject simpleSuggestion = (SoapObject) nameResult`
           `                     .getProperty(i);`
            `            stringBuilder.append(simpleSuggestion.getProperty(`
             `                   "representation").toString());`
              `          stringBuilder.append("\n");`
               `     }`
                `    String temp = stringBuilder.toString();`

`                    /** Show the suggestions in a text area field called`
 `                   * lblStatus */`
  `                  ((TextView) findViewById(R.id.widget32)).setText(temp`
   `                         .toString());`
    `                ((TextView) findViewById(R.id.widget33)).setText(temp`
     `                       .toString());`
      `              ((TextView) findViewById(R.id.widget34)).setText(temp`
       `                     .toString());`
        `            
         `       } catch (Exception aE) {`
          `          System.out.println(aE.toString());`
           `         aE.printStackTrace();`
            `    }`
            `}`
        `});`
    `}`
`}` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:50:28.523

如果您需要通过以下示例来学习，这里有几个展示如何在 ListView 中列出结果以及如何使用 http/REST 调用 API 的...

[列表](http://www.vogella.com/articles/AndroidListView/article.html)

[休息](https://stackoverflow.com/questions/8267928/android-rest-client-sample)

# android - 支持所有屏幕尺寸和安卓版本

> ID：14815314
> 
> 赞同：6
> 
> 时间：2013-02-11T15:31:27.250
> 
> 标签：android, android-drawable

我正在开发一个 Android 应用程序，**我想使用图像作为活动的背景。我的目标是从 API 8 到最新版本。我想知道这样做的最佳方法是什么。**

我已阅读[Supporting different Screen Sizes](http://developer.android.com/training/multiscreen/screensizes.html)和[Supporting Multiple Screens](http://developer.android.com/guide/practices/screens_support.html)。

因此，我为每个背景制作了 4 张图像，尺寸分别为：320x480、480x800、600x1024、800x1280。首先，我将文件分别放在这个文件夹中：`drawable-sw320dp, drawable-sw480dp, drawable-sw600dp, drawable-sw720dp`. 然后，我意识到这仅适用于 Android 3.2 及更高版本，因此我需要添加 small、normal、large 和 xlarge 文件夹。为了不重复文件，我遵循了[第一篇文章这部分的](http://developer.android.com/training/multiscreen/screensizes.html#TaskUseAliasFilters)想法。

最终的结构是：

*   文件夹内的所有图像`drawable`，每个维度具有不同的名称
*   每个文件夹中的 xml 文件：`values-sw320dp, values-sw480dp, values-sw600dp, values-sw720dp, values-small, values-normal, values-large, values-xlarge`

例如，对于主要活动的背景，我有：

*   `drawable\bg_main_320.png`
*   `drawable\bg_main_480.png`
*   `drawable\bg_main_600.png`
*   `drawable\bg_main_720.png`
*   在`drawables.xml`上面提到的八个文件夹中。

和文件夹的内容`drawables.xml`是：`values-sw480dp``values-normal`

```
<resources>
    <item name="bg_main" type="drawable">@drawable/bg_main_480</item> 
</resources> 
```

我在 Android 2.3.7 和 4.0.3 中对此进行了测试，并且运行良好。但是，对于每张图像，我都会收到此 Lint 警告：“在无密度文件夹中找到位图可绘制 res/drawable/bg_main_480.png。问题：确保未在与密度无关的可绘制文件夹中定义图像”。我知道这意味着什么，但我不会继续为每个 dp 创建更多图像，因为它毫无意义。

我使用的结构是否正确？你有什么建议？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-11T15:42:48.897

`/res/drawable`不应该有任何图像文件，它应该只包括使用 XML 定义的可绘制对象。您应该根据目标像素密度将实际图像文件放在合格的可绘制目录中。如果您不想指定任何限定符，请将它们放在 `/res/drawable-nodpi`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T15:47:34.207

你可以在这里找到有价值的信息[信息](http://developer.android.com/guide/practices/screens_support.html)

并且在“res”forlder中你可以看到不同的drawables：36x36 for low-density

48x48 用于中等密度

72x72 用于高密度

96x96 用于超高密度

您可以将文件用于特定分辨率。

# windows-phone-8 - TCP 套接字从 windows phone 8 传输

> ID：14815318
> 
> 赞同：2
> 
> 时间：2013-02-11T15:31:48.850
> 
> 标签：windows-phone-8

我正在做一个示例，其中我试图使用 TCP 将数据从客户端（Windows Phone 8）应用程序传输到 Windows 窗体应用程序（充当服务器）。

在 Windows 窗体应用程序中，我正在创建一个像这样的侦听器

```
 TcpListener tcpListener = null;

        IPAddress ipAddress = Dns.GetHostEntry("localhost").AddressList[0];
        try
        {
            // Set the listener on the local IP address
            // and specifing the port.
            tcpListener = new TcpListener(ipAddress, 13);
            tcpListener.Start();
            output = "Waiting for a connection...";
        }
        catch (Exception e)
        {
            output = "Error: " + e.ToString();
            MessageBox.Show(output);
        }

        while (true)
        {

            Thread.Sleep(10);
             TcpClient tcpClient = tcpListener.AcceptTcpClient();

            byte[] bytes = new byte[256];

            NetworkStream stream = tcpClient.GetStream();
            stream.Read(bytes, 0, bytes.Length);
          } 
```

在 windows phone 8 应用程序中，我使用托管套接字连接到侦听器，如下所示

```
 public Task SendUsingManagedSocketsAsync(string strServerIP)
    {

        // enable asynchronous task completion
        completionSource = new TaskCompletionSource<object>();
        // create a new socket 
        var socket = new Socket(AddressFamily.InterNetwork,
            SocketType.Stream,
            ProtocolType.Tcp);

        // create endpoint 
        var ipAddress = IPAddress.Parse(strServerIP);
        var endpoint = new IPEndPoint(ipAddress, PORT);

        // create event args 
        var args = new SocketAsyncEventArgs();
        args.RemoteEndPoint = endpoint;
        args.Completed += SocketConnectCompleted;

        // check if the completed event will be raised. If not, invoke the handler manually. 
        if (!socket.ConnectAsync(args))
            SocketConnectCompleted(args.ConnectSocket, args);

        return completionSource.Task;
    } 
```

但是我收到连接被拒绝的套接字错误。我的方法是否正确，如何通过 windows phone 连接 tcp 侦听器。这里我无法更改 windows 窗体应用程序的代码，因为它是我的实时服务器代码。或者是否必须更改我的服务器代码……

# java - 读入一个文件并写出另一个文件失败

> ID：14815319
> 
> 赞同：0
> 
> 时间：2013-02-11T15:31:51.217
> 
> 标签：java, android, eclipse, text-files

我希望我的应用程序将其信息从一个文本文件更新到另一个。它在我的代码中的另一个地方工作，但在这里，即使它看起来完全一样，它也不起作用。

程序会`while`循环，直到文件没有`nextLine`. 文件中的前 5 行是球员得分，后 5 行是球员姓名。我目前已经在前五个中完美运行，但是当涉及到名称时它搞砸了：它读取名称 1，错过名称 2，然后读取剩余的 3。此时它会中断`for loop`并重新启动`while`循环，因为（我认为）程序知道它错过了一行。然后它读取名称 2 并用它覆盖分数 1，最后尝试再次读取，此时它崩溃了。

```
 while(!readDone)
        {
            System.out.println("!Done");
            while (readFile.hasNextLine())
            {
                System.out.println("second While Loop");
                for(int j = 0;j<10;j++)
                {
                    if(j<5)
                    {
                        System.out.println("For Loop!" + j + "scores");
                        score[j] = readFile.nextLine();
                        System.out.println(score[j]);
                    }
                    if(j==5 || j>5)
                    {
                        System.out.println("For Loop!" + j + "names");
                        usernames[j-5] = readFile.nextLine();
                        System.out.println(usernames[j-5]);
                    }
                }
                System.out.println("Exit For Loop");
                readDone = true;
            }   
            System.out.println("Exit second while");
        }
        System.out.println("DONE"); 
```

关于为什么会从上面的代码中发生这种情况的任何想法？我正在打印到 LogCat 控制台，所以我知道它缺少名称 2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T17:03:25.397

感谢亨利，我发现了问题。它按预期将项目显示为列表。但是，当我逐个字符地浏览它时，名称后面有一个空格。这就是为什么它错过了六个并打印出一个空白行。

# c# - 为什么我不能在 C# 的结构中具有相同的结构类型属性？

> ID：14815324
> 
> 赞同：4
> 
> 时间：2013-02-11T15:32:10.670
> 
> 标签：c#

我有一个`struct`名为 Node 的类型，如下所示：

```
struct Node
{
    int data;
    Node next; 
} 
```

当我编译上面的代码时出现编译时错误，但如果我把它变成一个类，一切都很好。

```
class Node
    {
        int data;
        Node next; 
    } 
```

两者有什么区别（我知道一个是`struct ( value type )`，一个是`class(ref type )`）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T15:35:47.113

如果定义`class`，`Node`则只是引用引用类型`Node`。在结构情况下，您有嵌套结构，`Node`即在节点中循环嵌套节点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-11T15:40:28.563

你曾经用 C 类语言编程过吗？你知道，类/结构和指针等吗？

如果你有，那么请记住：在 C# 中，“类”是“作为指针”传递的，而“结构”是以原始二进制形式传递的，它们就像 C/C++ 中的任何非指针非引用的东西一样被复制。嵌套的所有其他限制都被保留，只是名称不同。

在 C# 中，您可以拥有一个包含“class X”类型字段的“class X”，因为“classes”永远不会直接放在任何地方。这样的字段实际上是一个 4/8 字节的指针/引用。“X 级”的大小很容易确定。相反，在 C# 中，您不能拥有包含“struct X”类型字段的“struct X”。这样的字段将直接嵌入到外部结构中，而不是通过指针/引用。如果“struct X”包含另一个“struct X”，根据它的定义，它肯定会包含另一个“struct X”，该“struct X”将包含……。结束在哪里？你会如何标记结束？当您编写“new X()”时，编译器/运行时如何知道要分配多少空间 ? 就像在 C/C++ 中你不能直接创建递归嵌套类型（你只能通过指针/引用来做到这一点），在 C# 中你不能创建递归结构。

# c# - 增强现实 - C# 中图像上的 3D 文本

> ID：14815327
> 
> 赞同：0
> 
> 时间：2013-02-11T15:32:19.577
> 
> 标签：c#, visual-studio-2010, graphics, bitmap, augmented-reality

我在一个想要实现某种 AR 的项目中。我想做的主要事情是把 3D 文本和图像放在一起，让它看起来很真实。我在 Visual Studio 中使用 C#，并希望保持这种状态。我有来自相机的位图，如何在其上放置 3D 文本？有什么程序可以使用吗？（我可以自己计算图像上的位置）

我想达到的效果可以显示在这个图像中，如果图像太硬，可以只显示文本：

[![增强现实图像](../Images/ed15e15a3a00f30f5a9524eacdf850c8.png)](https://i.stack.imgur.com/CUnO1.jpg)
[（来源：[edibleapple.com](http://edibleapple.com/wp-content/uploads/2009/08/augmented-reality-paris.jpg)）]

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:35:36.140

看看 ARToolKit 库：[http ://www.hitl.washington.edu/artoolkit/](http://www.hitl.washington.edu/artoolkit/)

和这篇文章：[https ://sites.google.com/site/augmentedrealitytestingsite/](https://sites.google.com/site/augmentedrealitytestingsite/)

# android - 录音并进入下一个活动

> ID：14815330
> 
> 赞同：0
> 
> 时间：2013-02-11T15:32:24.430
> 
> 标签：android

我是 android 的新手，尝试使用 MediaRecorder 录制语音并成功创建音频文件。之后我通过单击按钮移动到下一个活动也没有问题并且播放声音也成功但是当我从我来的地方移动到上一个活动时。它将所有类引用和变量设置为 null 并保存音频文件为空，因为我必须在活动开始时进行录制。我已经实现了单例类的策略，但它的类变量在回来时也为空。关于提到代码的很多描述。

oncreate() 方法中的记录代码。//

```
Bundle extras = this.getIntent().getExtras();
        if (extras != null) {
            setrecordtime = extras.getLong("RECORDTIME"); 
```

在这里找到记录时间，然后开始记录。//

```
if (setrecordtime!=0&&setrecordtime < INFINITE) {

            startrecordbutton.setVisibility(View.INVISIBLE);
            stoprecordbutton.setVisibility(View.INVISIBLE);
            startrecording(); 
```

//开始录制方法

```
private void startrecording() {

        myrecordaudiofile = getAudiofilemedia();
        if (myrecordaudiofile != null){
        myaudiorecoreder = new MediaRecorder();
        myaudiorecoreder.setAudioSource(MediaRecorder.AudioSource.MIC);
        myaudiorecoreder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
        myaudiorecoreder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
        myaudiorecoreder.setOutputFile(myrecordaudiofile.getAbsolutePath());

        try {
            myaudiorecoreder.prepare();
            myaudiorecoreder.start();

        } catch (IllegalStateException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        myrecordtextview.setText("RECORDING STARTED......");
        setRecordstatus(true);
        }
        else
        {
            Toast.makeText(getApplicationContext(), "NO FILE TO RECORD", 0).show();
        }

        new Timer().schedule(new TimerTask() {

            @Override
            public void run() {
                runOnUiThread(new Runnable() {

                    @Override
                    public void run() {
                        // TODO Auto-generated method stub
                        stoprecording();
                        //myrecordtextview.setText("RECORDING...STATUS");
                    }
                });

            }
        }, setrecordtime);
    } 
```

转到下一个屏幕并播放声音 //

```
case R.id.preview_button1:
            Intent intent1 = new Intent(context, DisplayandPlay.class);
            intent1.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            startActivity(intent1);
            break; 
```

从 DisplayandPlay.class 返回，然后保存文件但音频文件为空。感谢任何建议参加录音课程或仅使用 mediarecorder。

# highstock - Highstock 数据分组导航器问题

> ID：14815331
> 
> 赞同：0
> 
> 时间：2013-02-11T15:32:30.153
> 
> 标签：highstock

我在使用 Highstock 的数据分组功能时遇到了不希望的行为。我不确定这是一个错误还是我错过了什么。

这是图表配置的 JSON 对象：

```
{"chart":{"renderTo":"container","alignTicks":false,"type":"column"},"plotOptions":{"column":{"dataGrouping":{"forced":true,"smoothed":true,"units":[["day",[1]],["week",[1]],["month",[1]]]}}},"rangeSelector":{"selected":5},"series":[{"data":[[1349995778160,111.11],[1357672339000,111.11],[1359581186470,222.22],[1359581222750,222.22]],"name":"Total Cost","type":"column"}],"xAxis":{"maxPadding":0.05,"minPadding":0.05,"ordinal":false}} 
```

数据数组中的时间戳指向以下日期时间 (GMT)：2012-10-11 22:49:38.160, 2013-01-08 19:12:19, 2013-01-30 21:26:26.470, 2013-01 -30 21:27:02.750，分别。

**问题**：渲染时，导航器设置为“全部”，显示由 2012-10-11 和 2013-01-30 绑定的整个数据区间，两端指定 5% 的填充。同样，按照数据分组单元配置中的规定，每月对数据进行正确分组。到目前为止，一切都很好。但是当我使用（至少一个）光标缩小导航器范围时，不应再显示的数据 - 因为它超出了范围 - 仍然显示在已经缩小的末端，时间戳信息错误。

为什么导航器范围之外的点仍然分组在所选间隔的末端？

还有小提琴：http: [//jsfiddle.net/andreinic/fLmza/](http://jsfiddle.net/andreinic/fLmza/)。您所要做的就是“玩”导航光标，看看最左边和最右边的数据会发生什么。

# php - 如何将一维数组转换为二维数组

> ID：14815332
> 
> 赞同：3
> 
> 时间：2013-02-11T15:32:44.380
> 
> 标签：php, arrays, multilingual

我有以下数组，来自一个表单，具有这样的多语言数据：

```
Array
(
    [en_name] => ...........
    [en_description] => ...........
    [gr_name] => ...........
    [gr_description] => ...........
) 
```

如何将此数组转换为二维，如：

```
Array
(
    [en] => Array
        (
            [name] => ...........
            [description] => ...........
        )

    [gr] => Array
        (
            [name] => ...........
            [description] => ...........
        )
) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T15:38:45.500

使用此代码：

```
$finalArr = array();
foreach($arr as $key => $val) {
   $tok = explode('_', $key);
   $finalArr[$tok[0]][$tok[1]] = $val;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T15:35:44.640

尝试以下

```
$output = array();
foreach($arr as $val){
            $prefix = str_replace("_","",substr($val,0,3));
            $ending = substr($val,3,strlen($val));
            if(!is_array($output[$prefix]))
                 $output[$prefix] = array();
            array_push($output[$prefix],$ending);    
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T15:40:09.780

```
$array3d = array();
foreach($arr as $key => $value) {
    $keyArr = explode("_", $key);
    $array3d[$keyArr[0]][$keyArr[1]] = $value;
} 
```

如果每个键只有 1 个下划线，那应该可以工作。

# php - 无法让 cURL 发布到 URL

> ID：14815334
> 
> 赞同：0
> 
> 时间：2013-02-11T15:32:49.720
> 
> 标签：php, post, curl

我一直在尝试通过 cURL 获得发布请求。我是 cURL 的新手，所以我认为这是一个简单的错误。我已经通过 HTML 表单和 Linux 终端发送了数据，一切正常。不知道为什么我它在 cURL 中不起作用。

```
<?php
$PaymentUrl = "https://test@test.com";
$PostString = "value1=value&value1=value&value1=value
value1=value&value1=value&value1=value&value1=value&value1=value&value1=value&        
value1=value&value1=value&value1=value&value1=value&value1=value&value1=value&    
value1=value&value1=value";
$ch = curl_init($PaymentUrl);
curl_setopt($ch, CURLOPT_POST,17);
curl_setopt($ch, CURLOPT_POSTFIELDS, $PostString);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$result = curl_exec($ch);
echo $result;
curl_close($ch);
?> 
```

请注意我更改了值和 URL。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:43:00.683

你只需要添加

```
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0); 
```

# groovy - 类型转换和继承

> ID：14815337
> 
> 赞同：0
> 
> 时间：2013-02-11T15:32:55.433
> 
> 标签：groovy, casting

给了一个像

```
class MyDate extends java.util.Date {
   //add some functionality
} 
```

您创建自己的`Date`对象，它继承了所有功能。

但是，如果您尝试像这样使用此功能

```
MyDate d = MyDate.parse('yyyy','2013') 
```

您将遇到 parse 方法将返回一个`java.util.Date`无法转换为您的`MyDate`.

您可以通过该功能编写自己的演员表`asType()`，但这无济于事，因为您必须将其添加到`Date()`类中（我知道这是可能的，但我想避免它）。

有没有另一种方法来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T19:24:35.600

Groovy 的`Date.parse`方法将返回一个 Date 对象。如果您希望它返回您的`MyDate`对象，则必须编写它（覆盖，但仍使用超级）：

```
@groovy.transform.InheritConstructors class MyDate extends java.util.Date {
  static MyDate parse(String format, String date) {
    new MyDate( Date.parse(format, date).time )
  }

  String formated() {
    format 'dd/MM/yyyy'
  }
}

MyDate d = MyDate.parse('yyyy-MM-dd','2013-09-03')

assert d.formated() == "03/09/2013" 
```

您还需要继承构造函数（通过这个 groovy 转换）或编写自己的构造函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T15:43:37.283

Ralf，您正在尝试继承静态方法，就好像它是实例方法一样。这行不通。做一个：

```
Date date = MyDate.parse(....) 
```

可以，但我不推荐它，因为它令人困惑：似乎 parse 方法在 MyDate 上，但实际上您仍然从 Date 调用静态 parse 方法。

或者。您可以在 MyDate 类上实现 parse 方法，并让该 parse 方法返回 MyDate 类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T15:40:23.410

对象 Date（已弃用）的 parse 方法不返回 Date 对象，而是返回静态 long。也许您的意思是 SimpleDateFormat ？

无论如何，在这种情况下，您必须重载所需的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T16:18:25.263

我认为你可以这样做：

```
MyDate d = (MyDate)Date.parse('yyyy','2013'); //tell me if i'm wrong but i'm pretty sure i'm not 
```

然后将 MyDate 类中缺少的成员添加到新返回的对象中。

# types - Umbraco Node.getProperty() 类型

> ID：14815340
> 
> 赞同：0
> 
> 时间：2013-02-11T15:33:18.177
> 
> 标签：types, casting, umbraco, getproperty

我正在建立一个新的 Umbraco 站点 - 这是我第一次使用 Umbraco，并且想知道如何将节点的通用属性恢复为我设置它们的类型。

例如，我创建了一个通用属性`includeSubNav`，我将其设置为`true/false`. 要访问此属性，我正在调用

```
Node.GetCurrent().getProperty("includeSubNav").Value 
```

我的问题是，这是获得房产的正确方式吗？如果是这样，为什么`.Value`总是作为字符串返回，因为在这种情况下，“1”不是很有帮助，因为我无法将其解析为布尔值，这意味着我必须使用 if 语句来查看它是否为“1” “我只是觉得很脏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:48:26.680

因为 Umbraco 使用包含完整内容树的 XML 文件（出于速度目的），所以所有值都转换为字符串。当您从 Node 读取数据时，您使用的是使用 XML 文件的 NodeFactory。

GetProperty 方法是读取属性的正确方法，并且确实将所有值作为字符串返回，如果是布尔值，则需要使用`.Equals("1")`函数或将其转换为布尔值。

# asp.net - AJAX 日历扩展器显示错误的日期

> ID：14815341
> 
> 赞同：0
> 
> 时间：2013-02-11T15:33:18.247
> 
> 标签：asp.net, calendarextender

我有一个带有母版页的 aspx 页面。母版页包含 asp:ScriptManager。aspx 页面的 ajaxToolkit:CalendarExtender 已退出更改文本框中日期的月份。加载页面时，与扩展器关联的文本框会填充来自数据库的信息。

这个 aspx 页面是几个月前创建的，并且运行良好。在更新过程中，我不得不在它的末尾添加几个额外的 div，日历扩展器继续按预期工作了几个星期。昨天，当在日历控件中选择了不同的日期时，它决定不更改文本框中的月份。我所做的更改与扩展器或它所在的区域无关，所以我完全不知道是什么导致了问题。

```
<%@ Page Language="VB" MasterPageFile="~/MasterPage.master" AutoEventWireup="false"
Inherits="Quote.Edit" Title="Quote - Edit Information"
CodeBehind="Rate.aspx.vb" %>
<%@ Register Src="TabsControl.ascx" TagName="TabsControl" TagPrefix="uc1" %>

<asp:Content>...several other Contents here...</Content>
<asp:Content ID="Content4" ContentPlaceHolderID="MainPlaceHolder" runat="server">
    <asp:UpdatePanel ID="upContent" runat="server" UpdateMode="Conditional" ChildrenAsTriggers="False">
        <ContentTemplate>
            <div>...several other divs here...</div>
            <div class="other=container">
                <asp:UpdatePanel ID="upEdit" runat="server" UpdateMode="Conditional" ChildrenAsTriggers="False">
                    <ContentTemplate>
                        <div id="EditArea" runat="server">
                            <table class="general">
                                <tr>...several other rows here...</tr>
                                <tr><td colspan="2>
                                    <asp:Label id="lblEffDate" runat="server" AssociatedControlID="txtEffDate" Text="Effective Date" />
                                    <div>
                                        <asp:Textbox ID="txtEffDate" runat="server" Width="100" CssClass="notfirst" AutoPostBack="true" />
                                        <asp:Image ID="imgCal" runat="server" ImageUrl="images/Calendar_scheduleHS.png" CssClass="top3" />
                                    </div>
                                    <ajaxToolkit: CalendarExtender ID="ceEffDate" PopupButtonID="imgCal" TargetControlID="txtEffDate" Animated="false" runat="server" Format="mm/dd/yyyy" />
                                    <ajaxToolkit: MaskedEditExtender ID="meEffDate" runat="server" MaskType="Date" TargetControlID="txtEffDate" Mask="99/99/9999" />
                                </td></tr>
                                <tr>...several other rows here...</tr>
                            </table>
                        </div>
                        <div>...several other divs here...</div>
                    </ContentTemplate>
                </UpdatePanel>
            </div>      
        </ContentTemplate>
    </UpdatePanel>
</Content> 
```

在此之前和之后有大量代码，但这是日期控件所在的区域。

唯一涉及的代码隐藏是从数据库中获取信息并将其加载到文本框。当您使用日历扩展器更改日期时，月份在文本框中保持不变（日期和年份将更改。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T16:30:51.547

您的日期格式错误。'M' 应该是这样的月份的大写字母：`Format="MM/dd/yyyy"`

```
<ajaxToolkit: CalendarExtender ID="ceEffDate" PopupButtonID="imgCal" TargetControlID="txtEffDate" Animated="false" runat="server" Format="MM/dd/yyyy" /> 
```

# symfony - 从表单中获取属性

> ID：14815342
> 
> 赞同：2
> 
> 时间：2013-02-11T15:33:27.410
> 
> 标签：symfony, symfony-forms

我确实创建了一个这样的字段：

```
 $builder->add('new_item', 'text', array(
        'required' => false,
        'property_path' => false,
        'attr' => array('id' => $list_id),
            )
    ); 
```

`id`当表单有效时，如何在 Method POST 中获取属性？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T15:37:37.667

我建议您为您的价值创建一个隐藏字段：

```
$builder->add('my_hidden_field', 'hidden', array(
    'data' => $list_id,
    'property_path' => false
    )
); 
```

（注意：使用[`property_path`](http://symfony.com/doc/current/reference/forms/types/hidden.html#property-path)带有值的选项`false`意味着它不会写入对象）

在将字段编辑到服务器后，您无法检索`id`字段的属性。`POST`

# php - AJAX 失败，即使它没有失败？

> ID：14815345
> 
> 赞同：0
> 
> 时间：2013-02-11T15:33:33.870
> 
> 标签：php, javascript, jquery, ajax

我正在像以前一样运行 AJAX 函数。这一次很奇怪。虽然 XHR 控制台给了我 200/Success，但错误回调一直在发生。

```
function runNewprop() {
   var nurl = 'http://www.mysite.com/myscript.php';

$.ajax({
    url: nurl,
    dataType: 'json',
    success: function(data){
        $('#nl_details').html('');
        $each(data, function (key, value){
            var mlsnum = value[0];

            $('#nl_details').append('<div class="nl_list"><h5>'+mlsnum+'</h5></<div>');
        });
    },
    error: function(){
        alert('Oops!');
    }
});
} 
```

然后是PHP文件：

```
<?php
$link = mysql_connect('localhost','username','password');
mysql_select_db('singleprop', $link);
$date = mysql_real_escape_string($_GET['date']);
$sort = mysql_real_escape_string($_GET['sort']);
$query = "
    SELECT * FROM jos_mls
        JOIN jos_activeagents AS active ON singleprop.jos_mls.MSTLISTBRD = active.AGENTUID
        JOIN jos_agents AS agents ON active.AGENTUID = agents.AGTBRDIDMM
    ";

if ($date == 'week') {
    $query .= "AND MSTLISTDT >= DATE_ADD(CURDATE(), INTERVAL -7 DAY)";
}
elseif ($date == 'twoweek') {
    $query .= "AND MSTLISTDT >= DATE_ADD(CURDATE(), INTERVAL -14 DAY)";
}
elseif ($date == 'month') {
    $query .= "AND MSTLISTDT >= DATE_ADD(CURDATE(), INTERVAL -31 DAY)";
}
elseif ($date == 'twomonth') {
    $query .= "AND MSTLISTDT >= DATE_ADD(CURDATE(), INTERVAL -62 DAY)";
}

if ($sort == 'agent') {
    $query .= " ORDER BY AGTLNAME";
}
elseif ($sort == 'city') {
    $query .= " ORDER BY MSTCITY";
}
elseif ($sort == 'zip') {
    $query .= " ORDER BY MSTZIP";
}
elseif ($sort == 'county') {
    $query .= " ORDER BY MSTCOUNTY";
}
else {
    $query .= " ORDER BY MSTLISTDT";
}

$query .= ";";

$result = mysql_query($query);
$data = mysql_fetch_array($result);
return json_encode($data);

mysql_close($link);

?> 
```

我在语法中遗漏了什么吗？当我回显构建的查询并将其复制到我的控制台并运行它时，一切都很顺利。但是当我尝试通过 AJAX 运行它时，我得到了成功/200，但发生了错误回调。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T15:37:19.370

您在成功回调中有错误。更改以下行：

```
$each(data, function (key, value){ 
```

到

```
$.each(data, function (key, value){ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T15:40:53.653

问题是您的 PHP 没有输出有效的 JSON。您在 ajax 调用中指定`json`为数据类型，这意味着`error`如果 jQuery 无法解析生成的 JSON，它将触发该函数。

在您的 PHP 中，您应该回显不返回，更改为：

```
echo json_encode($data); 
```

还要验证没有输出其他内容（例如错误或通知消息）。

最后，正如@whirlwin 指出的那样，您`$.each`在成功函数中有语法错误，虽然这不是您的根本问题，但当您修复 JSON 输出时，它将成为问题。

# javascript - Dojo Twitter Bootstrap 和 Dijits

> ID：14815346
> 
> 赞同：2
> 
> 时间：2013-02-11T15:33:35.193
> 
> 标签：javascript, twitter-bootstrap, dojo

我是 Dojo 和 Dijit 主题的新手，我在这里找到了一个带有引导样式的 Dijit 主题：http: [//thesociable.github.com/dbootstrap/](http://thesociable.github.com/dbootstrap/)。

我只需要将主题与 Dojo dijits 一起使用，而且我真的对 Dojo 构建系统一无所知。我的目的是将 dijits 与现有站点集成。

如何使用 dijit 主题？有谁知道任何有现成版本的网站，易于与 Dojo Bootstrap 集成。

我想我从来没有见过很难整合的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T18:07:09.850

我已将主题的预构建版本上传到[http://thesociable.github.com/dbootstrap/download/dbootstrap.tar.gz并正在处理](http://thesociable.github.com/dbootstrap/download/dbootstrap.tar.gz)[https://github.com/thesociable](https://github.com/thesociable/dbootstrap/issues/29)报告的 Windows 构建问题[/dbootstrap/问题/29](https://github.com/thesociable/dbootstrap/issues/29)

与此同时，Stephen Simpson 的回答和项目[README](https://github.com/thesociable/dbootstrap)有望助您一臂之力。如果您有任何其他问题，请随时在[https://github.com/thesocialable/dbootstrap/issues报告它们](https://github.com/thesociable/dbootstrap/issues)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-12T12:57:29.893

我找不到任何人使用它或它的任何预建版本。此外，我无法让 build.py 脚本正常工作（可能是 Windows 问题）。但是我设法使用 Node.js 编译了[Stylus](http://learnboost.github.com/stylus/)主题文件。

我已经创建了[dbootstrap](https://bitbucket.org/ssimpo/dbootstrap/overview)项目的一个分支（**注意：**我不打算在这个分支上工作，它只是为了这个问题的目的。虽然，Dojo 引导主题是一个很好的概念，所以可能会在某个时候使用它）。

我制作了一个[已编译主题的 zip，](https://bitbucket.org/ssimpo/dbootstrap/downloads)其中包括一个示例页面*test.html*，它显示了如何使用它。您可以只使用直接链接到已编译 css 的标准 <link /> 标签：

```
<link
    rel="stylesheet"
    type="text/css"
    href="scripts/bootstrap/theme/dbootstrap/dbootstrap.css"
/> 
```

然后，您可以在通常的 dojo 庄园中设置页面样式：

```
<body class="dbootstrap"> 
```

但是，作者包含了一些需要使用 Javascript 导入的额外功能。我建议您使用 require 包含主题（如示例文件和下面所示）：

```
<script type="text/javascript">
    require([
        "bootstrap",
        "dojo/parser",
        "dojo/ready"
    ], function(dbootstrap, parser, ready){
        ready(function(){
            parser.parse();
    })
});
</script> 
```

这可确保在为 Dojo 小部件解析页面之前加载引导程序。您还需要关闭页面上的小部件的自动解析，并在 dojoConfig 中设置引导模块（以及 dbootstrap 使用的 xstyle）的位置，例如：

```
<script type="text/javascript">
    var dojoConfig = {
        "async": true,
        "parseOnLoad": false,
        "packages": [{
            "name": "bootstrap",
            "location":"/scripts/bootstrap",
            "main":"main"
        }, {
            "name": "xstyle",
            "location":"/scripts/xstyle"
        }]
    };
</script> 
```

您还需要在上述**<body>中包含 class 属性。**

这有点令人费解，但示例文件应该让它更清晰一些。还应该注意的是，在这个庄园中加载 css 并不是很好的做法，它很可能会导致页面小部件样式的延迟。

**注意：**如果您尝试在 Dojo 中实现引导样式组件，您可能会感兴趣 的[Dojo Bootstrap 模块。](http://dojobootstrap.com/)

# java - 为什么我会收到消息：“可序列化类 Input Exception 未声明 long 类型的静态最终序列 Verison UID 字段”？

> ID：14815350
> 
> 赞同：0
> 
> 时间：2013-02-11T15:33:45.860
> 
> 标签：java, exception-handling

我有一个扩展异常的公共类。这是我的自定义异常类，如下所示：

```
package com.yahoo.chris511026.paragraphcount;

    public class InputException extends Exception {

    public String getMessage() {

        return "Error: No text entered.";

    } 
```

}

InputException 下面是一条黄线，表示 InputException 类没有声明 long 类型的静态最终版本 UID 字段。如果我的类没有实现 Serialiazble 接口，为什么会这样说？我该怎么做才能清除解决此问题。我不想修改或添加任何东西到我的代码中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T15:40:08.480

这是警告而不是错误。它指出`serialVersionUID`向任何可序列化类添加字段是一种好习惯。而且您的异常类*已经*是可序列化的，因为它间接扩展`Throwable`和`Throwable`实现了`Serializable`.

（如果您没有定义`serialVersionUID`字段，那么 JVM 会根据类的当前 API 定义动态计算一个字段。这会使您更容易受到由于类更改而导致的串行版本 UID 不匹配问题的影响。）

> 如果我的类没有实现 Serialiazble 接口，为什么会这样说？

不，不是这样说的。

> 我该怎么做才能清除解决此问题。我不想修改或添加任何东西到我的代码中。

有三种方法可以解决这个问题：

*   如果您不想更改任何代码，请修改 IDE 的编译器设置以禁用此警告。

*   添加一个`serialVersionUID`字段；例如，使用您的 IDE 加速器，它应该为您提供使用标准算法计算它的选项。

*   添加适当的`@SuppressWarning`注释。如果您的异常对象将来需要序列化的可能性为零，这将是合适的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T15:37:54.090

您扩展`Exception`which 本身扩展`Throwable`了 which implements `Serializable`。

更新，因为评论太多了：

选项：

*   添加标识
*   @SuppressWarning("串行")
*   配置您的 IDE 以忽略它
*   完全忽略它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T15:38:06.120

Exception 类实现了 Serializable 接口，并且通过继承，您的类也是如此。

序列版本唯一 ID 存在，以便您在反序列化时可以区分同一类的版本（例如，如果您以后想向您的类添加一个新成员，这将使其与没有该成员的旧版本不兼容）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T15:42:03.053

因为java[异常类实现了Serializable接口](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Exception.html)。因此，您必须`static final version UID`在类异常的子类中声明。

如果不声明，程序会自动生成一个。这在大多数情况下是可以的，但如果两个异常类生成相同的 UID 或者如果类发生更改并且您碰巧使用旧 UID 反序列化旧异常，则可能会导致问题。

# ios - LBYouTubeView 和高清？

> ID：14815351
> 
> 赞同：1
> 
> 时间：2013-02-11T15:33:48.440
> 
> 标签：ios, ipad, uiwebview, youtube

我在我的应用程序中使用[larcus94 的 LBYouTubeView](https://github.com/larcus94/LBYouTubeView)来展示一个教程视频（我选择它而不是 UIWebView 和嵌入式播放器来跟踪视图关闭通知），但它提供的最高质量看起来很糟糕，尤其是在视网膜显示器上。是否有任何合法的方法可以通过此控件获得高清质量或检测 UIWebView 中的嵌入式播放器是否已关闭？

# javascript - Javascript未在按钮单击时触发

> ID：14815355
> 
> 赞同：-1
> 
> 时间：2013-02-11T15:34:01.513
> 
> 标签：javascript, html, button, buttonclick

我有一个 html 按钮，应该在按钮单击时触发 javascript。它识别按钮单击并显示确认警报，但不会继续并发布 console.logs 或进入 ajax 方法。这是javascipt函数：

```
 $('.Delete')
         .click(function() {
    return confirm("Are you sure you'd like to delete this entry?"
        if(return = true)
    {
                 var parent = $(this).parent().prev();
                 var tr = $(this).closest('tr');

                 var ValNode = tr.find(".typeText").first();
                 var AddrNode = parent.children(".AddrText").first();

                 var Val = ValNode.val();
                 var addr = addrNode.val();

                 console.log(Val);
                 console.log(addr);

                 var item = { Value: Val, Address: addr }
                 deleteItem(userID, item);
    }

         }); 
```

这是html元素，我认为它可能与按钮与其调用的元素的关系有关。我把他们当作堂兄弟。

```
<asp:ListView runat="server" id="ListView1" >
        <LayoutTemplate>
                <thead>
                    <tr>
                        <th>
                            <a href="#">Type</a>
                        </th>
                        <th>
                            <a href="#">Address</a>
                        </th>                                                                                    
                    </tr>
                </thead>
                <tbody>
                    <tr id="itemPlaceholder" runat="server" />
                </tbody>
                <tfoot>
                </tfoot>
            </table>
        </LayoutTemplate>
        <ItemTemplate>
            <tr>
                <td>
                   <input type="text" id="Type" class="TypeText "  value="<%# Eval("Type")%>" />                     
                   <input type="text" id="Addr" class="AddrText "  value="<%# Eval("Address")%>" />                
                </td>
                <td>
                   <input type="button" id="btn_update" class="Update" value="Update" />
                   <input type="button" id="btn_delete" class="Delete" value="Delete" />
                </td>
            </tr>
        </ItemTemplate>
    </asp:ListView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T15:35:49.860

1.`return`是 JavaScript 中的*保留字*。它用于指定函数返回给调用者的内容。不要将它用于变量名。

改变

`return confirm("Are you sure you'd like to delete this entry?"`

到

`var result = confirm("Are you sure you'd like to delete this entry?");`

2.您的`if`条件检查不正确

改变

`if(return = true)`

到

`if(result == true)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T15:37:02.440

`return`是一个保留关键字，它将执行返回到调用当前函数的函数。你需要这样的东西：

```
var retVal = confirm("Are you sure you'd like to delete this entry?");
if (retVal) {...} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T15:37:35.817

你的问题在于`return`：

```
$('.Delete')
    .click(function() {
        var sure = confirm("Are you sure you'd like to delete this entry?");
        if (sure) {
            var parent = $(this).parent().prev();
            // ...
            // the rest
            // ...
        }
    }); 
```

`return`是 JavaScript 中的保留字，所以你应该使用别的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T15:41:15.723

我会做类似的事情

```
if (confirm(....))
{
} 
```

导致“返回”退出您的功能。

# c# - 是否可以使用 LINQ 检查列表中的所有数字是否单调增加？

> ID：14815356
> 
> 赞同：10
> 
> 时间：2013-02-11T15:34:09.120
> 
> 标签：c#, .net, linq

如果在 LINQ 中有一种方法可以检查列表中的所有数字是否单调增加，我很感兴趣？

**例子**

```
List<double> list1 = new List<double>() { 1, 2, 3, 4 };
Debug.Assert(list1.IsIncreasingMonotonically() == true);

List<double> list2 = new List<double>() { 1, 2, 100, -5 };
Debug.Assert(list2.IsIncreasingMonotonically() == false); 
```

我问的原因是我想知道将列表中的元素与其前一个元素进行比较的技术，这是我在使用 LINQ 时从未理解过的。

**C#中完成的示例类**

根据`@Servy`下面的官方回答，这是我现在正在使用的完整课程。它向您的项目添加扩展方法，以检查列表是单调增加/减少，还是严格单调减少。我正在尝试习惯函数式编程风格，这是一种很好的学习方式。

```
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace MyHelper
{
    /// <summary>
    /// Classes to check if a list is increasing or decreasing monotonically. See:
    /// http://stackoverflow.com/questions/14815356/is-it-possible-to-use-linq-to-check-if-all-numbers-in-a-list-are-increasing-mono#14815511
    /// Note the difference between strictly monotonic and monotonic, see:
    /// http://en.wikipedia.org/wiki/Monotonic_function
    /// </summary>
    public static class IsMonotonic
    {
        /// <summary>
        /// Returns true if the elements in the are increasing monotonically.
        /// </summary>
        /// <typeparam name="T">Type of elements in the list.</typeparam>
        /// <param name="list">List we are interested in.</param>
        /// <returns>True if all of the the elements in the list are increasing monotonically.</returns>
        public static bool IsIncreasingMonotonically<T>(this List<T> list) where T : IComparable
        {
            return list.Zip(list.Skip(1), (a, b) => a.CompareTo(b) <= 0).All(b => b);
        }

        /// <summary>
        /// Returns true if the elements in the are increasing strictly monotonically.
        /// </summary>
        /// <typeparam name="T">Type of elements in the list.</typeparam>
        /// <param name="list">List we are interested in.</param>
        /// <returns>True if all of the the elements in the list are increasing monotonically.</returns>
        public static bool IsIncreasingStrictlyMonotonically<T>(this List<T> list) where T : IComparable
        {
            return list.Zip(list.Skip(1), (a, b) => a.CompareTo(b) < 0).All(b => b);
        }

        /// <summary>
        /// Returns true if the elements in the are decreasing monotonically.
        /// </summary>
        /// <typeparam name="T">Type of elements in the list.</typeparam>
        /// <param name="list">List we are interested in.</param>
        /// <returns>True if all of the the elements in the list are decreasing monotonically.</returns>
        public static bool IsDecreasingMonotonically<T>(this List<T> list) where T : IComparable
        {
            return list.Zip(list.Skip(1), (a, b) => a.CompareTo(b) >= 0).All(b => b);
        }

        /// <summary>
        /// Returns true if the elements in the are decreasing strictly monotonically.
        /// </summary>
        /// <typeparam name="T">Type of elements in the list.</typeparam>
        /// <param name="list">List we are interested in.</param>
        /// <returns>True if all of the the elements in the list are decreasing strictly monotonically.</returns>
        public static bool IsDecreasingStrictlyMonotonically<T>(this List<T> list) where T : IComparable
        {
            return list.Zip(list.Skip(1), (a, b) => a.CompareTo(b) > 0).All(b => b);
        }

        /// <summary>
        /// Returns true if the elements in the are increasing monotonically.
        /// </summary>
        /// <typeparam name="T">Type of elements in the list.</typeparam>
        /// <param name="list">List we are interested in.</param>
        /// <returns>True if all of the the elements in the list are increasing monotonically.</returns>
        public static bool IsIncreasingMonotonicallyBy<T>(this List<T> list, Func<T> x) where T : IComparable
        {
            return list.Zip(list.Skip(1), (a, b) => a.CompareTo(b) <= 0).All(b => b);
        }

        public static void UnitTest()
        {
            {
                List<double> list = new List<double>() { 1, 2, 3, 4 };
                Debug.Assert(list.IsIncreasingMonotonically<double>() == true);
                Debug.Assert(list.IsIncreasingStrictlyMonotonically<double>() == true);
                Debug.Assert(list.IsDecreasingMonotonically<double>() == false);
                Debug.Assert(list.IsDecreasingStrictlyMonotonically<double>() == false);
            }

            {
                List<double> list = new List<double>() { 1, 2, 100, -5 };
                Debug.Assert(list.IsIncreasingMonotonically() == false);
                Debug.Assert(list.IsIncreasingStrictlyMonotonically() == false);
                Debug.Assert(list.IsDecreasingMonotonically() == false);
                Debug.Assert(list.IsDecreasingStrictlyMonotonically() == false);
            }

            {
                List<double> list = new List<double>() {1, 1, 2, 2, 3, 3, 4, 4};
                Debug.Assert(list.IsIncreasingMonotonically() == true);
                Debug.Assert(list.IsIncreasingStrictlyMonotonically<double>() == false);
                Debug.Assert(list.IsDecreasingMonotonically() == false);
                Debug.Assert(list.IsDecreasingStrictlyMonotonically() == false);
            }

            {
                List<double> list = new List<double>() { 4, 3, 2, 1 };
                Debug.Assert(list.IsIncreasingMonotonically() == false);
                Debug.Assert(list.IsIncreasingStrictlyMonotonically<double>() == false);
                Debug.Assert(list.IsDecreasingMonotonically() == true);
                Debug.Assert(list.IsDecreasingStrictlyMonotonically() == true);
            }

            {
                List<double> list = new List<double>() { 4, 4, 3, 3, 2, 2, 1, 1 };
                Debug.Assert(list.IsIncreasingMonotonically() == false);
                Debug.Assert(list.IsIncreasingStrictlyMonotonically<double>() == false);
                Debug.Assert(list.IsDecreasingMonotonically() == true);
                Debug.Assert(list.IsDecreasingStrictlyMonotonically() == false);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-11T15:41:31.537

```
public static bool IsIncreasingMontonically<T>(List<T> list) 
    where T : IComparable
{
    return list.Zip(list.Skip(1), (a, b) => a.CompareTo(b) <= 0)
        .All(b => b);
} 
```

请注意，这将序列迭代两次。对于 a `List`，这根本不是问题，对于`IEnumerable`or ，这可能很糟糕，所以在更改为`IQueryable`之前要小心。`List<T>``IEnumerable<T>`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-11T15:39:23.120

您不会使用列表排序`OrderBy()`并将它们与原始列表进行比较吗？如果它们是相同的，那么它会给你的答案是伪口语：

```
var increasing = orignalList.OrderBy(m=>m.value1).ToList();
var decreasing = orignalList.OrderByDescending(m=>m.value1).ToList();

var mono = (originalList == increasing || originalList == decreasing) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-11T15:45:32.333

这是一个可以*工作*的单线：

```
var isIncreasing = list.OrderBy(x => x).SequenceEqual(list); 
```

或者，如果您要提高性能，这里有一个单行程序，它只会遍历列表一次，并在到达不按顺序的元素时立即退出：

```
var isIncreasing = !list.SkipWhile((x, i) => i == 0 || list[i - 1] <= x).Any(); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-11T15:57:01.487

使用循环！它简短、快速且易读。除了 Servy 的回答之外，这个线程中的大多数解决方案都非常慢（排序需要 'n log n' 时间）。

```
// Test whether a sequence is strictly increasing.
public bool IsIncreasing(IEnumerable<double> list)
{
    bool initial = true;
    double last = Double.MinValue;
    foreach(var x in list)
    {
        if (!initial && x <= last)
            return false;

        initial = false;
        last = x;
    }

    return true;
} 
```

## 例子

1.  `IsIncreasing(new List<double>{1,2,3})`返回真
2.  `IsIncreasing(new List<double>{1,3,2})`返回 False

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-02-11T16:32:31.407

通过使用一种[`Enumerable.Aggregate`](http://msdn.microsoft.com/en-us/library/bb548651.aspx)方法：

```
list1.Aggregate((a, i) => a > i ? double.MaxValue : i) != double.MaxValue; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-11T15:43:47.920

如果要检查列表是否总是从索引到索引增加：

```
IEnumerable<int> list = new List<int>() { 1, 2, 3, 4, 5, 6, 7, 10 };
bool allIncreasing = !list
    .Where((i, index) => index > 0 && list.ElementAt(index - 1) >= i)
    .Any(); 
```

[**演示**](http://ideone.com/sNm817)

但在我看来，在这种情况下，一个简单的循环会更具可读性。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-13T20:36:20.633

考虑如下的实现，它只枚举给定的 IEnumerable 一次。枚举可能会产生副作用，如果可能的话，调用者通常会期望一次传递。

```
public static bool IsIncreasingMonotonically<T>(
    this IEnumerable<T> _this)
    where T : IComparable<T>
{
    using (var e = _this.GetEnumerator())
    {
        if (!e.MoveNext())
            return true;
        T prev = e.Current;
        while (e.MoveNext())
        {
            if (prev.CompareTo(e.Current) > 0)
                return false;
            prev = e.Current;
        }
        return true;
    }
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-02-14T07:52:10.633

```
public static class EnumerableExtensions
{
    private static bool CompareAdjacentElements<TSource>(this IEnumerable<TSource> source,
        Func<TSource, TSource, bool> comparison)
    {
        using (var iterator = source.GetEnumerator())
        {
            if (!iterator.MoveNext())
                throw new ArgumentException("The input sequence is empty", "source");
            var previous = iterator.Current;
            while (iterator.MoveNext())
            {
                var next = iterator.Current;
                if (comparison(previous, next)) return false;
                previous = next;
            }
            return true;
        }
    }

    public static bool IsSorted<TSource>(this IEnumerable<TSource> source)
        where TSource : IComparable<TSource>
    {
        return CompareAdjacentElements(source, (previous, next) => previous.CompareTo(next) > 0);
    }

    public static bool IsSorted<TSource>(this IEnumerable<TSource> source, Comparison<TSource> comparison)
    {
        return CompareAdjacentElements(source, (previous, next) => comparison(previous, next) > 0);
    }

    public static bool IsStrictSorted<TSource>(this IEnumerable<TSource> source)
        where TSource : IComparable<TSource>
    {
        return CompareAdjacentElements(source, (previous, next) => previous.CompareTo(next) >= 0);
    }

    public static bool IsStrictSorted<TSource>(this IEnumerable<TSource> source, Comparison<TSource> comparison)
    {
        return CompareAdjacentElements(source, (previous, next) => comparison(previous, next) >= 0);
    }
} 
```

# c - argv 读取 C 中不相关的字符

> ID：14815357
> 
> 赞同：1
> 
> 时间：2013-02-11T15:34:13.627
> 
> 标签：c, argv

我正在学习 C 编程。我的程序读取的数字与我提供的数字无关。有什么帮助吗？我在哪里失踪？

```
#include <stdio.h>

main(int argc, char argv[])
{
    int i,sum, digit;
if(argc == 1)
{
    printf("\n No arguments specified");
    return 0;
}
for(i=1;i<argc;i++)
    {
    digit = argv[i];
    printf("Argument is: %d", digit);
    //sum += argv[i];
    }
printf("The sum of all numbers is: %d", sum);
return 0;
} 
```

副部

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-11T15:36:15.570

你`main()`错了。它应该是：

```
int main(int argc, char *argv[])
                        ^
                        |
                    IMPORTANT! 
```

由于参数向量是字符串指针数组，而不是字符数组。

然后，您将参数无效地转换为整数，您需要调用 eg`strtol()`或`sscanf()`这样做。这种转换是必要的，因为参数作为字符串数组传递给您的程序，并且字符串`"42"`（例如）在 C 中与 number 非常不同`42`。

请注意，我提到的两种转换功能都可以检测它们是否失败；例如，如果用户给你的程序提供了非数字参数，那么检测它而不是继续将它们视为数字是很重要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T15:35:30.633

`argv[i]`是指向字符串而不是整数的指针。c中的字符串是char数组

所以你的程序应该是

```
digit = atoi(argv[i]); 
```

`atoi()`允许将字符串转换为整数，它来自`#include <stdlib.h>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T15:35:56.537

`main(int argc, char argv[])`应该`int main(int argc, char *argv[])`

`main`的返回值指示程序是如何退出的，因此它应该显式设置为 int。`main`的第二个参数`argv`表示“参数向量”，因此它的类型应该是`char *[]`or `char **`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T15:36:17.187

您正在以整数形式从 argv 读取 - 您将始终在 argv 数组中获取字符串 - 它应该定义为`char* argv[]`. 考虑使用`atoi( argv[i] )`来获取整数值。

# php - 如何在 cakePHP 1.2 中简化查询代码

> ID：14815360
> 
> 赞同：0
> 
> 时间：2013-02-11T15:34:17.083
> 
> 标签：php, cakephp, optimization, cakephp-1.2

我的控制器中有这部分代码：

```
if ((!empty($params))&&(isset($params['autore'])||isset($params['titolo'])||isset($params['editore'])||isset($params['anno']))) {
        $a = $params['autore'];
    if (strpos($a,' ')||strpos($a,',')) {
        $autore_diviso = explode(" ", $a);
        $this->set('autore_diviso', $autore_diviso);
    }
    $t = $params['titolo'];
    $e = $params['editore'];
    $an = $params['anno'];
    $an2 = $params['anno2'];

    if ($an==''&&$an2=='')
            $conditions = array('AND' => array('autori LIKE' => "%$a%",
                'editore LIKE' => "%$e%",'titolo LIKE' => "%$t%"));                     
        else    
        {
            if ($an=='')
                      $conditions = array(array('AND' => array('autori LIKE' => "%$a%",
                      'editore LIKE' => "%$e%",'titolo LIKE' => "%$t%")),
                    'AND' => array('anno <=' => "$an2"));
            if ($an2=='')
                $conditions = array(array('AND' => array('autori LIKE' => "%$a%", 'editore LIKE' => "%$e%",'titolo LIKE' => "%$t%")),                   'AND' => array('anno >=' => "$an"));
            else
                $conditions = array('AND' => array(
                            'autori LIKE' => "%$a%", 'editore LIKE' => "%$e%",
                            'titolo LIKE' => "%$t%"),
                            'OR' => array('anno BETWEEN ? AND ?' => array($an,$an2)));
        }
        $u = $this->paginate('CdBiblio',$conditions);
            $this->set('query', $u);
    } 
```

（其中“anno”的意思是“年份”——titolo = 'title' 和 editore = 'publisher'）。

如何简化此代码？

另外，我需要介绍用户搜索 2 个作者的可能性（所以我会添加更多 if ... else 语句）。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-02-11T15:42:45.083

看来您在所有条件下都有相同的子查询。

您可以通过这种方式使用串联来保存代码：

```
//common subquery
$conditions = array('AND' => array(
                        'autori LIKE' => "%$a%", 'editore LIKE' => "%$e%",
                        'titolo LIKE' => "%$t%"));

//for example...  
if(...){
    $conditions+=array('AND' => array('anno <=' => "$an2"));
}else{
    $conditions+=array('OR' => array('anno BETWEEN ? AND ?' => array($an,$an2)));
}

$u = $this->paginate('CdBiblio',$conditions); 
```

您还可以更改比较：

```
if ($an==''&&$an2=='') 
```

为了

```
if (!$an && !$an2) 
```

哦，还有……我会用真实的词来表示变量。总是更好地理解什么是什么，而不是创建没有意义的变量，例如`$a`. 这使得将来修改代码和防止编码错误变得更容易。

# drupal - Drupal 视图显示过滤器日期时间弹出窗口

> ID：14815363
> 
> 赞同：3
> 
> 时间：2013-02-11T15:34:23.753
> 
> 标签：drupal, drupal-7, popup, drupal-views, drupal-exposed-filter

我需要使用弹出日历公开日期时间字段的过滤器。但我无法在表单元素选项上选择“弹出”。每次我选择弹出窗口时，它都会自动将其更改为“选择”。并出现错误，即：'缺少字段类型！'。实际上有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T17:05:55.110

确保该模块已安装并启用[http://drupal.org/project/date。](http://drupal.org/project/date.)

检查此处以确保它已启用。*yoursite.com/admin/modules*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T09:33:28.293

虽然它是测试版，但请检查这个[better_exposed_filters](http://drupal.org/project/better_exposed_filters)模块，它将与[日期](http://drupal.org/project/date)模块集成。

# python - Python中的Spearman等级相关性与关系

> ID：14815365
> 
> 赞同：5
> 
> 时间：2013-02-11T15:34:28.267
> 
> 标签：python, scipy, statistics, correlation

我想使用 Python 和最有可能的 scipy 实现（scipy.stats.spearmanr）计算[spearman 等级相关性。](https://en.wikipedia.org/wiki/Spearman's_rank_correlation_coefficient)

手头的数据看起来如下（字典）：

```
{a:0.3, b:0.2, c:0.2} and {a:0.5, b:0.6, c:0.4} 
```

现在将它传递给 spearman 模块，如果我是正确的（降序），我会给他们分配排名：

```
[1,2,3] and [2,1,3] 
```

所以现在我想考虑关系，所以我现在将用于第一个向量：

```
[1,2,2] or [1,2.5,2.5] 
```

基本上，这整个概念是否正确以及如何处理此类基于字典的数据的关系。

正如@Jaime 所建议的， spearmanr 函数适用于值，但为什么会出现这种行为：

```
In [5]: spearmanr([0,1,2,3],[1,3,2,0])
Out[5]: (-0.39999999999999997, 0.59999999999999998)

In [6]: spearmanr([10,7,6,5],[0.9,0.5,0.6,1.0])
Out[6]: (-0.39999999999999997, 0.59999999999999998) 
```

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-11T19:07:05.357

`scipy.stats.spearmanr`将为您计算排名，您只需以正确的顺序为其提供数据：

```
>>> scipy.stats.spearmanr([0.3, 0.2, 0.2], [0.5, 0.6, 0.4])
(0.0, 1.0) 
```

如果你有排名数据，你可以调用`scipy.stats.pearsonr`它来获得相同的结果。正如下面的示例所示，您尝试过的任何一种方式都可以使用，尽管我认为`[1, 2.5, 2.5]`更常见。此外，scipy 使用从零开始的索引，因此内部使用的排名将更像`[0, 1.5, 1.5]`：

```
>>> scipy.stats.pearsonr([1, 2, 2], [2, 1, 3])
(0.0, 1.0)
>>> scipy.stats.pearsonr([1, 2.5, 2.5], [2, 1, 3])
(0.0, 1.0) 
```

# yii - Yii - 了解运算符以通过 CDBCriteria 和 LIKE 条件构建 SQL

> ID：14815367
> 
> 赞同：0
> 
> 时间：2013-02-11T15:34:29.373
> 
> 标签：yii

这是我想通过 Yii 实现的 SQL `CDBCriteria`：

```
WHERE 
    (
        (field1 LIKE '%value1%') AND (field1 LIKE '%value2%')
    ) OR (
        (field2 LIKE '%value1%') AND (field2 LIKE '%value2%')
    ) OR (
        (field3 LIKE '%value1%') AND (field3 LIKE '%value2%')
    ) 
```

如果字符串以任何顺序包含“value1”或“value2”，这将返回该行。前任。：

> Lorem value1 ipsum value2 先生 dolor amet。

或者

> Lorem value2 ipsum value1 先生 dolor amet。

但如果只有一个值，则不会返回任何内容。

我尝试过的（来自[这个线程](https://stackoverflow.com/questions/13908460/yii-combining-addcolumncondition-in-cdbcriteria)）：

```
$c = new CDbCriteria;
$c->addColumnCondition(array('field1 LIKE' => '%value1%', 'field1 LIKE' => '%value2%'), 'AND', 'OR');
$c->addColumnCondition(array('field2 LIKE' => '%value1%', 'field2 LIKE' => '%value2%'), 'AND', 'OR');
$c->addColumnCondition(array('field3 LIKE' => '%value1%', 'field3 LIKE' => '%value2%'), 'AND', 'OR'); 
```

但这不是如何在`LIKE`条件下使用它，它只返回第二个比较，因为同一字段的键是相同的：

```
(
    (field1 LIKE='%value2%') OR (field2 LIKE='%value2%')
) OR (field3 LIKE='%value2%') 
```

所以我尝试了比较条件：

```
$c->compare('field1', 'value1', true);
$c->compare('field1', 'value2', true, 'OR');
$c->compare('field2', 'value1', true, 'AND');
$c->compare('field2', 'value2', true, 'OR');
$c->compare('field3', 'value1', true, 'AND');
$c->compare('field3', 'value2', true, 'OR'); 
```

或者

```
$c->addSearchCondition('field1', 'value1', false);
$c->addSearchCondition('field1', 'value2', false, 'OR');
$c->addSearchCondition('field2', 'value1', false);
$c->addSearchCondition('field2', 'value2', false, 'OR');
$c->addSearchCondition('field3', 'value1', false);
$c->addSearchCondition('field3', 'value2', false, 'OR'); 
```

但我无法解决我想要的条件。这是我得到的：

```
(
    (
        (
            (
                (field1 LIKE '%value1%') OR (field1 LIKE '%value2%')
            ) 
            AND (field2 LIKE '%value1%')
        ) 
        OR (field2 LIKE '%value2%')
    ) 
    AND (field3 LIKE '%value1%')
) OR (field3 LIKE '%value2%') 
```

因此，如果有人知道如何实现这一目标，请帮助我:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T16:02:42.653

这是你想要的？

```
$c->addCondition("field1 like :value1 and field1 like :value2", "OR");
$c->addCondition("field2 like :value1 and field2 like :value2", "OR");
$c->addCondition("field3 like :value1 and field3 like :value2", "OR");
$c->params = array(':value1' => '%'. $value1 .'%', ':value2' => '%'. $value2 .'%'); 
```

选择：

```
$c2 = new CDbCriteria;
$c2->addSearchCondition("field2", ':value1');
$c2->addSearchCondition("field2", ':value2');

$c3 = new CDbCriteria;
$c3->addSearchCondition("field3", ':value1');
$c3->addSearchCondition("field3", ':value2');

$c->addSearchCondition("field1", ':value1');
$c->addSearchCondition("field1", ':value2');
$c->mergeWith($c2, false);
$c->mergeWith($c3, false); 
```

# silverlight - Silverlight InitializeComponent 是异步的吗

> ID：14815368
> 
> 赞同：0
> 
> 时间：2013-02-11T15:34:35.210
> 
> 标签：silverlight

在我的 Silverlight 4 页面的构造函数中，我调用 InitializeComponent，紧接着是以下语句：

```
OriginalDefaultCharts = new Dictionary<Chart, string>{ 
    { chartTop, ( ( ComboBoxItem ) comboInstant.SelectedItem ).Tag.ToString ( ) },
    { chartBottom, ( ( ComboBoxItem ) comboCumulative.SelectedItem ).Tag.ToString ( ) } }; 
```

这几乎总是有效，但偶尔，此语句会抛出 Null 异常，因为 comboCumulative 为 null。

我看到在 InitializeComponent 中实例化了 comboCumulative 的位置，但由于这通常有效但并非总是如此，这让我觉得我应该等待一些东西。将 InitializeComponent 之后的所有构造函数逻辑放入 Loaded 事件中是否很典型？

我这样做了，但是由于我的代码以前很少失败，所以我不能 100% 确定我已经解决了这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T07:48:45.540

你做。

是的，对 Initialize 组件的调用是异步的（更具体地说，UI 组件的构建是异步的）。

因此，在初始化组件之后对 UI 元素执行任何操作是一种非常糟糕的做法（实际上最好不要在 InitializeComponent 之后执行任何操作：让您的默认构造函数清理干净）。

好的做法是像您一样在加载的事件中执行这些操作。

不过，请注意，即使在您加载的事件中，仍然不会创建一些 UI 元素（尤其是不可见的元素）。

# arrays - ActionScript 自定义排序函数

> ID：14815370
> 
> 赞同：3
> 
> 时间：2013-02-11T15:34:40.527
> 
> 标签：arrays, actionscript-3, sorting

我正在尝试编写一个与 Array.sort() 一起使用的排序函数。我有点坚持我如何才能准确地写出我需要的东西。

在我的应用程序中，项目在整个执行过程中的不同时间被添加到这个数组中，每次添加一个项目时，数组都会被排序。Array 中的项目都是对象，并且都具有“权重”属性。如果重量较大，则该项目应先行，如果重量较小，则该项目应在后。这很容易，我有一个看起来像这样的函数：

```
return a.weight - b.weight; 
```

问题是我有一个附加要求，如果稍后添加一个项目并且它与另一个项目具有相同的重量，则必须将它放在数组中该项目之后。它必须位于数组中已添加且具有相同权重的每个项目的后面。

我无法想出一个确保每次都满足要求的功能。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T15:46:07.670

无需编写自定义排序，数组`sortOn`可以处理这种情况。但是，您需要为您的项目添加一个新成员，我将其称为“时间戳”。

```
arr.sortOn( [ 'weight', 'timestamp' ], [ Array.NUMERIC | Array.DESCENDING, Array.NUMERIC ] ); 
```

第一个参数定义将用于排序的属性，第二个参数定义每个字段的选项。有关详细信息，请参阅[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Array.html#sortOn()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Array.html#sortOn())。|-运算符（按位或运算符）用于为一个字段传递多个选项。因此，在这种情况下，第一个字段（“权重”）按数字降序排序。

- 编辑：

对于向量，您需要使用比较函数：

```
var sortFunc : Function = function (x: <T>, y : <T>):Number{
    var dw:Number = y.weight - x.weight
    if( dw ==0 ){
        //returns negative if y was added later
        return x.timestamp - y.timestamp;
    }else{
        //returns negative if x has a higher weight
        return dw;
    }
}
vec.sort( sortFunc ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T15:49:09.067

我建议向对象添加另一个属性。就像是 ：

```
a.index = i; // where, i is the index before sorting 
```

这将允许您在排序之前跟踪它进入列表的顺序。

* * *

除此之外，您还可以考虑保留数组本身的另一个副本（索引完整）。

# css - 悬停时的PNG阴影在Firefox中不起作用-我做错了什么？

> ID：14815371
> 
> 赞同：0
> 
> 时间：2013-02-11T15:34:55.827
> 
> 标签：css, firefox, png, shadow

[我从这个问题](https://stackoverflow.com/questions/3186688/drop-shadow-for-png-image-in-css/14802135)的答案中学会了如何为 PNG 图像添加阴影。一个名叫 Dudley 的用户发布了这段代码，它适用于我，除非 Firefox（和旧版本的 Safari）：

```
.shadowed {
-webkit-filter: drop-shadow(12px 12px 25px rgba(0,0,0,0.5));
filter: url(#drop-shadow);
-ms-filter: "progid:DXImageTransform.Microsoft.Dropshadow(OffX=12, OffY=12, 
Color='#444')";
filter: "progid:DXImageTransform.Microsoft.Dropshadow(OffX=12, OffY=12, 
Color='#444')";
}

<!-- HTML elements here -->

<svg height="0" xmlns="http://www.w3.org/2000/svg">
<filter id="drop-shadow">
<feGaussianBlur in="SourceAlpha" stdDeviation="4"/>
<feOffset dx="12" dy="12" result="offsetblur"/>
<feFlood flood-color="rgba(0,0,0,0.5)"/>
<feComposite in2="offsetblur" operator="in"/>
<feMerge>
<feMergeNode/>
<feMergeNode in="SourceGraphic"/>
</feMerge>
</filter>
</svg> 
```

代码基于[这篇文章](http://demosthenes.info/blog/600/Creating-a-True-CrossBrowser-Drop-Shadow-Effect-With-CSS3-&-SVG)。我添加了代码。我按原样使用它，除了 OffX、OffY 和 rgb 值的值。此外，我将 CSS 代码复制到了 CSS 的 aa:hover 部分，如下所示。（注意：我稍后添加了 id 标签更改以尝试使其工作，但它似乎也没有工作）。

```
#cssicons > ul > li > a:hover {
    color: rgb(255,255,221);
    id: shadowed;
    -webkit-filter: drop-shadow(-2px 2px 3px rgba(0,0,0,0.5));
    filter: url(#drop-shadow);
    -ms-filter: "progid:DXImageTransform.Microsoft.Dropshadow(OffX=2, OffY=2, Color='#444')";
    filter: "progid:DXImageTransform.Microsoft.Dropshadow(OffX=2, OffY=2, Color='#444')";
} 
```

HTML 看起来像这样（为简洁起见被截断）：

```
<link href="/icon_assets/styles.css" rel="stylesheet" type="text/css">
<div id='cssicons'>
<ul>
   <li class='has-sub last'><a href='http://SwingBuffalo.com/'><span><IMG SRC="/images/swingbuffalo-tiny.png" WIDTH="40px" HEIGHT="40px" title="SwingBuffalo.com"></span></a></li>
   <li class='has-sub last'><a href='http://RhythmShuffle.onbile.com/'><span><IMG SRC="/images/mobile.png" WIDTH="40px" HEIGHT="40px" title="Mobile Site"></span></a></li>
   <li class='has-sub last'><a href='http://www.facebook.com/events/442624375809049/'><span><IMG SRC="/images/fb.png" WIDTH="40px" HEIGHT="40px"></span></a>
      <ul>
        <li><a href='https://www.facebook.com/sharer/sharer.php?u=www.RhythmShuffle.com&t=Rhythm%20Shuffle'><span>Share</span></a></li>
         <li><a href='http://www.facebook.com/plugins/like.php?href=http%3A%2F%2FRhythmShuffle.com%2F&send=false&layout=standard&width=450&show_faces=true&font=trebuchet+ms&colorscheme=light&action=like&height=80'><span>Like</span></a></li>
         <li><a href='http://www.facebook.com/events/442624375809049/'><span>RSVP</span></a></li>
         <li class='last'><a href='http://www.facebook.com/SwingBuffalo/'><span>Swing Buffalo</span></a></li>
      </ul>
   </li>

...

<svg height="0" xmlns="http://www.w3.org/2000/svg">
<filter id="drop-shadow">
<feGaussianBlur in="SourceAlpha" stdDeviation="4"/>
<feOffset dx="2" dy="2" result="offsetblur"/>
<feFlood flood-color="rgba(0,0,0,0.5)"/>
<feComposite in2="offsetblur" operator="in"/>
<feMerge>
<feMergeNode/>
<feMergeNode in="SourceGraphic"/>
</feMerge>
</filter>
</svg> 
```

包含代码的页面在[这里](http://rhythmshuffle.com/dev/2013/robversion1/RS2013/Home.html)。有人知道我在做什么错吗？

谢谢，罗伯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T16:08:02.307

我想这可能是答案

[css-filters 浏览器支持](http://caniuse.com/css-filters)

目前支持 css-filters 的浏览器是 Chrome 和 Safari。

### 更新#1

[它适用于火狐](https://dl.dropbox.com/u/7265587/cssicons/index.html)

关键是这`filter: url(shadow.svg#drop-shadow);`是需要的

```
.shadowed {
-webkit-filter: drop-shadow(-2px 2px 3px rgba(0,0,0,0.5));
filter: url(shadow.svg#drop-shadow);
-ms-filter: "progid:DXImageTransform.Microsoft.Dropshadow(OffX=2, OffY=2, Color='#444')";
filter: "progid:DXImageTransform.Microsoft.Dropshadow(OffX=2, OffY=2, Color='#444')";
}

#cssicons > ul > li > a:hover {
    color: rgb(255,255,221);
    id: shadowed;
-webkit-filter: drop-shadow(-2px 2px 3px rgba(0,0,0,0.5));
filter: url(shadow.svg#drop-shadow);
-ms-filter: "progid:DXImageTransform.Microsoft.Dropshadow(OffX=2, OffY=2, 
Color='#444')";
filter: "progid:DXImageTransform.Microsoft.Dropshadow(OffX=2, OffY=2, 
Color='#444')";
} 
```

我有*shadow.svg*作为实际文件，没有嵌入到 html 中。

[由user2057516](https://stackoverflow.com/users/2057516/user2057516)发起的提示：如果不起作用，请添加“Content-Type: image/svg+xml”标头

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T16:13:53.817

我会改用 box-shadow 属性，因为这可以根据您使用的偏移量实现相同的效果。

```
 /* Firefox */
  -moz-box-shadow: 3px 3px 4px #000;
  /* Webkit browsers */
  -webkit-box-shadow: 3px 3px 4px #000;
  /* W3C */
  box-shadow: 3px 3px 4px #000;
  /* For IE 8 */
  -ms-filter: "progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=135, Color='#000000')";
  /* For IE 5.5 - 7 */
  filter: progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=135, Color='#000000'); 
```

大多数现代浏览器现在都采用基本的 box-shadow 属性，而不是使用供应商前缀。只需修改这些，直到获得所需的输出。

# php - 如何在 Laravel 控制器中使用 $layout

> ID：14815373
> 
> 赞同：1
> 
> 时间：2013-02-11T15:35:05.440
> 
> 标签：php, laravel

我尝试`$layout`在我的控制器中使用该属性，但我总是收到以下错误：

> 在非对象上调用成员函数 nest()

当`dd()`的值时`this->layout`，它似乎只是一个字符串。

这是我的代码：

**基础.php**

```
class Base_Controller extends Controller {
  public $layout = 'layouts.common';
} 
```

**管理员.php**

```
class Admin_Controller extends Base_Controller {
  public function action_index() {
    $this->layout->nest('content', 'admin.home');
  }
} 
```

我可能错过了一些东西，但我在文档中找不到它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:37:34.173

啊，刚刚发现了问题。我是 overwritting`__construct`添加过滤器，但没有调用父构造：

```
class Admin_Controller extends Base_Controller {
  public function __construct() {
    parent::__construct();
    $this->filter('before', 'auth');
  }
  public function action_index() {
    $this->layout->nest('content', 'admin.home');
  }
} 
```

# jquery - 如何让快速搜索使用多个条件？

> ID：14815380
> 
> 赞同：0
> 
> 时间：2013-02-11T15:35:21.083
> 
> 标签：jquery, quick-search

我有用于处理输入的 jquery 的快速搜索插件，以允许过滤表：

```
$('input#table-filter').quicksearch('table tbody tr'); 
```

但是，我现在想做一个调整，用户可以输入多个条件（例如，使用文本区域，每个术语在单独的行上），过滤器会显示与*任何*条件匹配的所有行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:06:11.543

似乎您所要做的就是为其添加一个选项。

```
$('#table-filter').quicksearch('table tbody tr',{ 
    prepareQuery: function(val){
        return val.toLowerCase().split('\n');
    }
}); 
```

[https://github.com/riklomas/quicksearch/blob/master/jquery.quicksearch.js#L24](https://github.com/riklomas/quicksearch/blob/master/jquery.quicksearch.js#L24)

这会导致它在新行而不是空格上拆分输入值。

# matlab - 如何在matlab中循环多个时期的投资组合收益计算？

> ID：14815385
> 
> 赞同：1
> 
> 时间：2013-02-11T15:35:38.957
> 
> 标签：matlab, loops, finance, portfolio

我有以下数据/集（简化版本以使示例清晰）：

*   `3*10`由给定时期的数字标识的股票矩阵（3 只股票（我的投资组合），行 * 10 天（列），命名为 indexBest。
*   `10*10`我的宇宙中每个证券的每个时期的回报矩阵，名为dailyret（我的股票宇宙是10）。

我想创建一个循环，在该循环中，我能够将每个投资组合的每个时期的总回报计算到一个理想的矩阵中`1*10`，或者`10*1`（返回 * 日期，反之亦然）。

我已经为投资组合的单个时期完成了此操作，见下文：但我希望能够自动化此过程，而不是`10*`为每个时期的每个投资组合重复所有这些。请帮忙！

```
Portfolio_1_L= indexBest(:,1); %helps me get the portfolio constituents for period one (3 stocks basically).
Returns_1_L= dailyret(Portfolio_1(:,1));%to calculate returns of the portfolio for period 1 I have referenced  the extraction of returns to the portfolio constituents.
Sum_ret_Port_1_L=sum(Returns_1_L); %sum return of the portfolio for period one 
```

如何在所有其他 9 个时段循环此过程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T15:39:53.680

使用`for`循环并使用索引变量代替`1`示例代码中的硬编码。还索引输出以存储每天的结果。

```
for day = 1:10
    Portfolio_1_L = indexBest(:,day);
    Returns_1_L = dailyret(Portfolio_1_L);
    Sum_ret_Port_1_L(day) = sum(Returns_1_L);
end 
```

# java - 平衡多个队列

> ID：14815395
> 
> 赞同：4
> 
> 时间：2013-02-11T15:35:57.297
> 
> 标签：java, multithreading

我怀疑这真的很容易，但我不确定在 Java 中是否有一种天真的方法。这是我的问题，我有两个用于处理数据的脚本，它们都有相同的输入/输出，除了一个是为单个 CPU 编写的，另一个是为 GPU 编写的。这项工作来自队列服务器，我正在尝试编写一个程序，根据哪个是空闲的，将数据发送到 CPU 或 GPU 脚本。

我不明白该怎么做。

我知道使用 executorservice 我可以指定要继续运行的线程数，但不确定如何在两个不同的线程之间进行平衡。我在系统上有 2 个 GPU 和 8 个 CPU 内核，我认为我可以让 threadexecutorservice 保持 2 个 GPU 和 8 个 CPU 进程运行，但不确定如何在它们之间取得平衡，因为 GPU 的完成速度比 CPU 任务快得多。

关于如何解决这个问题的任何建议？我应该创建两个队列并继续汇集它们以查看哪个队列不那么忙吗？或者有没有办法把所有的工作单元（都一样）放到一个队列中，让 GPU 或 CPU 进程从同一个队列中取出，因为它们是空闲的？

更新：只是为了澄清。CPU/GPU 程序超出了我正在制作的程序的范围，它们只是我通过两种不同方法调用的脚本。我想我要问的简化版本是两种方法是否可以从同一个队列中工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T07:39:31.580

> 两种方法可以从同一个队列中工作吗？

是的，但是您应该使用 a`BlockingQueue`来为自己节省一些同步心痛。

基本上，一种选择是让生产者通过`BlockingQueue.offer`. 然后设计你的 CPU/GPU 线程来调用`BlockingQueue.take`和执行他们收到的任何东西。

例如：

```
main (...) {
    BlockingQueue<Task> queue = new LinkedBlockingQueue<>();

    for (int i=0;i<CPUs;i++) {
        new CPUThread(queue).start();
    }

    for (int i=0;i<GPUs;i++) {
        new GPUThread(queue).start();
    }

    for (/*all data*/) {
        queue.offer(task);
    }
}
class CPUThread {
    public void run() {
        while(/*some condition*/) {
            Task task = queue.take();
            //do task work
        }
    }
}
//etc... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T17:02:06.850

像这样使用 Runnables：

```
CPUGPURunnable implements Runnable {
  run() {
    if ( Thread.currentThread() instance of CPUGPUThread) {
      CPUGPUThread t = Thread.currentThread();
      if ( t.isGPU())
        runGPU();
      else
        runCPU();
    }
  }
} 
```

CPUGPUThreads 是一个 Thread 子类，它使用一个标志知道它是在 CPU 还是 GPU 模式下运行。有一个用于 ThreadPoolExecutors 的 ThreadFactory，它可以创建 GPU 线程的 CPU。使用两个工作人员设置一个 ThreadPoolExecutor。确保 Threadfactory 创建一个 CPU，然后创建一个 GPU 线程实例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T17:07:09.563

显然有不止一种方法可以做到这一点，通常最简单的就是最好的。我建议线程池，一个有 2 个线程用于 CPU 任务，第二个有 8 个线程将运行 GPU 任务。您的工作单元经理可以将工作提交到当前具有空闲线程的池中（我建议同步该代码块）。标准 Java ThreadPoolExecutor 具有 getActiveCount() 方法，您可以使用它，请参阅 [http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ThreadPoolExecutor.html#getActiveCount()](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ThreadPoolExecutor.html#getActiveCount())。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T07:22:50.493

我想你有两个代表两个 GPU 的对象，它们的方法类似于`boolean isFree()`和`void execute(Runnable)`。然后你应该启动 8 个线程，它们在一个循环中从队列中获取下一个作业，如果有的话，将它放在一个空闲的 GPU 中，否则执行作业本身。

# c# - 自己的字典添加方法 这需要表达 > 作为参数

> ID：14815396
> 
> 赞同：1
> 
> 时间：2013-02-11T15:35:57.760
> 
> 标签：c#, dictionary

我正在尝试实现一个`Dictionary<TKey,TValue>`将属性作为参数的添加方法。

我想如何启动字典：

```
ExpressionDictionary<string,string> OrigionalValues = new ExpressionDictionary<string,string>(); 
```

我想在属性中添加一个项目，例如：

```
public string Title
{
     get { return _title; }
     set
     {
          if (_title != value)
          {
               _title = value;
               OrigionalValues.Add(() => Title,value);                         
          }
     }
} 
```

我的 ExpressionDictionary 类：

```
 public class ExpressionDictionary<T,TValue> : Dictionary<string, TValue>
 {
      public void Add(Expression<Func<T>> property, TValue value)
      {
           var body = property.Body as MemberExpression;
           if (body != null) Add(body.Member.Name, value);
      }
 } 
```

因此，PropertName 以字符串形式存储为 Dictionary 的 TKey。这在属性是字符串类型时有效，但是当我尝试添加 DateTime 属性和字符串属性时，它会挂起，因为它无法转换，这很清楚。

我想要实现的是我不需要对属性的字符串名称进行硬编码，例如

```
OrigionalValues.Add("Title",value); 
```

如何设计我的 Add 方法或 ExpressionDictionary 类，我可以从我想要的每个属性类型中调用 Add 方法，并且属性名称存储为 TKey？这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:00:53.577

像这样实例化你的字典怎么样？

```
var OrigionalValues = new ExpressionDictionary<object,object>(); 
```

# javascript - div上的asp.net客户端验证器弹出

> ID：14815397
> 
> 赞同：1
> 
> 时间：2013-02-11T15:36:01.840
> 
> 标签：javascript, asp.net, client-side, validation, client-side-scripting

我最近加入的一个项目中有以下片段。

```
<div id="divDescEn" href="editor.aspx?field=1" class="textarea popup" runat="server">
</div> 
```

上面的代码片段是一个带有富文本编辑器的弹出表单。在弹出表单上按下保存按钮后，文本将放置在 RTE“占位符”中的表单上

我正在尝试将 div 作为我的验证摘要的一部分与表单上使用 asp.net 验证器的其他控件一起包含在内。

关于如何做到这一点的任何提示？

谢谢 TR

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T15:44:56.790

DIV 自然不支持验证。您可以做些什么来解决这个问题，即使用 a `CustomValidator`，将 the 设置`ClientValidationFunction`为检查任何文本的内部内容的函数。在服务器上，使用`ServerValidate`可以检查DIV是否有一些非空白的内部内容，只要内容回传成功即可。

# javascript - JavaScript 中的翻译词典库

> ID：14815398
> 
> 赞同：1
> 
> 时间：2013-02-11T15:36:02.457
> 
> 标签：javascript, translation, libraries, kindle

有人知道 JavaScript 中的一些翻译词典库的行为类似于 Kindle 吗？

一个主要用例是，只需将光标放在一个单词上，就会在浏览器中弹出该单词的含义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:09:31.117

是的，有几个浏览器插件可以做到这一点：

*   [Firefox ImTranslator](https://addons.mozilla.org/en-US/firefox/addon/imtranslator/)和[维基词典和谷歌翻译](https://addons.mozilla.org/en-us/firefox/addon/google-dictionary-and-google-t/)翻译单词和整个页面。[这是一个包含字典查找插件列表的博客文章](http://freenuts.com/top-10-dictionary-add-ons-for-firefox/)。
*   Chrome 内置了“在 google 上搜索”（通过上下文菜单）
*   [这是 Chrome 的插件列表，](http://www.makeuseof.com/tag/7-chrome-extensions-lookup-words-meanings-browse/)可让您查找单词

其他浏览器可能也有类似的服务。

如果您想在网页中使用 JavaScript，请查看插件的源代码。但请注意，允许用户为此使用插件给了他们选择的自由：他们可以自带（首选）工具。

# ios - sql 和 UIPickerView

> ID：14815399
> 
> 赞同：0
> 
> 时间：2013-02-11T15:36:02.207
> 
> 标签：ios, objective-c, sql, sqlite, uipickerview

我需要根据 UIPickerView 上选取的值开发一个 sql 语句。如果您需要视觉创意，这里是截图的[链接](http://www.corinnpope.com/?attachment_id=1044)（抱歉，还没有足够的声誉来发布图片）。我无法找到任何有关此的文档，并希望在深入研究之前确保我走在正确的轨道上。

每个组件（kTypeComponent、kDifficultyComponent、kDescriptionComponent）都有三行可供选择（例如 kTypeComponent row1=bike、row2=run、row3=swim）

我的想法是 sql 语句看起来像这样

```
 sqlite3_stmt *pickerStatement;

    //This would give back a string of the row selected (i.e bike, run, swim)
    NSInteger getTypeSelected = [pickerView selectedRowInComponent:kTypeComponent];
    NSString typeSQL = [rowOneItems objectAtIndex:getTypeSelected];

    const char *pickerSQL = "SELECT description FROM workoutTbl WHERE (type = typeSQL) AND ... 
```

这可能与sql语句有关吗？我只熟悉基本的SQL，所以我不确定

SQL 语句会进入操作（按钮）还是我设置 NSMutableArray 并打开数据库的位置？它应该进入不同的班级吗？

**编辑 - 解决方案**

万一有人遇到同样的问题，这里是它的解决方案

```
 - (NSArray *)getWorkoutListwithType:(NSString *)workoutType withDifficulty:(NSString *)difficulty withLength:(NSString *)length {
NSMutableArray *workouts;
@try {
    NSFileManager *fileMgr = [NSFileManager defaultManager];
    NSString *dbPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"workoutList.sqlite"];
    //        NSLog(@"Db path is %@",dbPath);
    BOOL success = [fileMgr fileExistsAtPath:dbPath];

    if (!success){
        NSLog(@"Cannot locate database file '%@'.", dbPath);
    }
    if (!(sqlite3_open([dbPath UTF8String], &db) == SQLITE_OK)) {
        NSLog(@"error with message '%s'.", sqlite3_errmsg(db));
    }

    // only alloc/init the array if the SQL database opens properly
    workouts = [[NSMutableArray alloc] init];
    sqlite3_stmt *sqlStatement;

    // add "%%" as a wildcard so the query will say "difficulty LIKE '>30%' and match >30 MINS, >30 HOURS, etc.
    NSString *sqlString = [NSString stringWithFormat: @"SELECT description FROM workoutTbl WHERE type LIKE '%@%%' AND difficulty LIKE '%@%%' AND duration LIKE '%@%%'", workoutType, difficulty, length];
    NSLog(@"query: %@", sqlString);

    const char *sql = [sqlString UTF8String];

    if (sqlite3_prepare(db, sql, -1, &sqlStatement, NULL) != SQLITE_OK) {
        NSLog(@"%s Prepare failure '%s' (%1d)", __FUNCTION__, sqlite3_errmsg(db), sqlite3_errcode(db));
    }
    while (sqlite3_step(sqlStatement)==SQLITE_ROW) {
        [workouts addObject:[NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement,0)]];
    }
    sqlite3_finalize(sqlStatement);
}
@catch (NSException *exception) {
    NSLog(@"An exception occured: %@", [exception reason]);
}
@finally {
    sqlite3_close(db);
}

//    Pass back an immutable copy of the array. if the array is nil, then the database never opened and there will be an error
return [workouts copy]; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T22:18:18.380

“三行选择”是什么意思？您的意思是“要选择的三个字段（列）”吗？如果你想指定字段值，那么语句应该像

```
NSString* sqlStatement = [NSString stringWithFormat:@"SELECT * FROM workoutTbl WHERE type = '%@' AND id = '%i'", typeSQL,idNumber]; 
```

# php - PHP 在 require 上添加了额外的空格

> ID：14815400
> 
> 赞同：1
> 
> 时间：2013-02-11T15:36:03.470
> 
> 标签：php, whitespace, require-once

考虑以下代码：

```
<div id="sidebar">
<?php
  require_once('/components/search.php');
  require_once('/components/categories.php');
?>
</div> 
```

`search.php`并且`category.php`本质上是相同的结构 - 具有一些特定内容的 div 容器。这里没什么特别的，纯 HTML：

```
<div class="component">
<!-- blah -->
</div> 
```

`require_once`但是，当使用（或`require`/等）插入时`include`，PHP在每个元素上方添加空格，将其向下推，在Chrome的Inspect Element工具中可识别为空文本节点（删除该节点时空格消失）

从侧边栏脚本中删除所有不必要的空格（使其成为单行代码）并不能修复它。如果我只是用`require_once`组件的内容替换这些行，空格就不会出现。所以不知道为什么 PHP 在 require 上添加它。有任何想法吗？

**更新**

这仍然被证明是一个奇怪的。我现在同意这`require_once`似乎不是根本原因。我决定暂时忽略这个问题，并希望在我进一步研究后它会消失。唉，它仍然存在，所以我做了更多的调查。检查浏览器中的页面源代码确认有问题的代码确实作为一个完整的长行返回[http://pastebin.com/dtp7QNbs](http://pastebin.com/dtp7QNbs) - 任何标签之间没有空格或回车，但浏览器中出现空格- 在检查元素工具中可识别为每个之间的空行`<div class="component">`

这是否有助于进一步阐明这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-26T22:37:26.447

我遇到了同样的问题，并验证了 Kai 将格式更改为 ANSI 的解决方案，但也发现“在没有 BOM 的情况下以 UTF-8 编码”也可以。这是新 Notepad++ PHP 文件的默认格式，因此可以减少一个转换步骤。

似乎一般不建议使用 UTF-8 中的字节顺序标记文件头。我验证了我安装的 VS2010 在保存 PHP 文件时添加了 BOM。

下面的 stackoverflow 文章很好地解释了插入额外空格的位置。

[utf-8 和没有 BOM 的 utf-8 有什么不同？](https://stackoverflow.com/a/2223926)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-22T11:23:33.390

额外的字符是 BOM（字节顺序标记）。因此，在没有 BOM 的情况下转换为 UTF-8 是真正的诀窍。更多信息：[http ://en.wikipedia.org/wiki/Byte_order_mark](http://en.wikipedia.org/wiki/Byte_order_mark)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T13:26:11.417

问题解决了！这花了很长时间才弄清楚。简短的回答是我的 php 文件是 UTF-8 编码的。在 Notepad++ 中将其更改为 ANSI 已修复它。

我只是通过对输出 HTML 进行逐个字符的比较来找到问题的真正原因——一个输出来自使用“require_once”的位置，另一个是手动将代码粘贴到位的输出。

在输出的*视觉*比较中，两者看起来相同 - 长度相同，没有额外/不同的字符。但是当推过`preg_split('//', $string)`并逐个字符循环时，在每个`require_once`插入点的开头会显示 3 个额外的“不可见”字符。我将它们识别为 ASCII 字符`&#239;`，`&#187;`和`&#191;`（双点 i、右 V 形和倒置的问号）。

将编码更改为 ANSI（当我在记事本中逐字重新创建一个脚本时，我发现这是原因，并且没有遇到同样的问题），多余的行已经消失了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-03T13:19:15.530

有时它是因为类文件之后的空白而发生的`?>`，同样或之前`<?php`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T16:02:24.667

首先，放在`<?php`与 DIV 相同的行：

```
<div id="sidebar"><?php 
```

这摆脱了之前的空白`search.php`。

然后确保`search.php`末尾没有换行符，这会导致`search.php`and之间出现空格`categories.php`。一些文本编辑器默认添加尾随换行符，您可能需要覆盖它。

我刚试过这个，输出`php main.php`是：

```
<div id="sidebar"><div class="component">
<!-- search.php -->
</div><div class="component">
<!-- categories.php -->
</div></div> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-24T14:32:59.250

在程序员的记事本编辑器中使用以下方法很容易将 PHP 文件保存为**UTF-8 而不带标记符号：**

1.  文件 -> 编码 -> UTF-8 无标记
2.  文件 -> 保存

之后该`require`命令将包含 PHP 脚本而不添加空格。

# c# - c#/WPF打印格式化

> ID：14815401
> 
> 赞同：1
> 
> 时间：2013-02-11T15:36:13.877
> 
> 标签：c#

我对 c#/WPF 很陌生，我需要帮助来了解应该是一个非常简单的应用程序。在我正在设计的应用程序中，用户只需浏览 .txt 或 .jpg 文件，然后加载。我希望用户能够打印显示的内容。我发现工作的代码似乎只在一页上打印部分内容。此外，当打印 .txt 文件时，没有边距，而且文本似乎就在页面之外。这是我正在使用的代码，因为它似乎非常基本。

```
System.Windows.Controls.PrintDialog pd = new System.Windows.Controls.PrintDialog();
if (pd.ShowDialog() != true) return;
pd.PrintVisual(textbox2, "textbox2."); 
```

我想我的问题是，如何设置边距并允许多页文档打印？任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:43:47.667

要打印文本文件，您可能需要使用 FlowDocument，这允许您设置边距、分页等，例如 [打印 WPF FlowDocument](https://stackoverflow.com/questions/345009/printing-a-wpf-flowdocument)

要打印 JPEG，您可以使用 PrintVisual，例如 [从文件加载图像并使用 WPF 打印...如何？](https://stackoverflow.com/questions/265062/load-image-from-file-and-print-it-using-wpf-how)

# java - 从中检索唯一生成的 ID 在 JPA 中

> ID：14815409
> 
> 赞同：0
> 
> 时间：2013-02-11T15:36:34.853
> 
> 标签：java, playframework, playframework-1.x

伙计们，

我正在使用 Play 1.2.5。数据库是 Oracle 10g，我正在为我的应用程序使用现有表。

我正在生成一个这样的唯一键：

```
@GeneratedValue(strategy=GenerationType.SEQUENCE)
public int transactionId; 
```

当我使用下面的代码时，`transactionId`生成并成功保存在数据库中：

```
transactionDetails.save(); 
```

`transactionId`但是一旦保存操作成功执行，我就无法获得唯一生成的。save 方法返回一个类型`<JPABase>`。`transactionId`那么在成功保存操作后如何从 中检索`<JPABase>`？

**注意：**我不想为获取另一个数据库命中，`transactionId`因为我相信可能有某种方法可以检索它以进行成功的保存操作。

请让我知道这件事。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T07:26:33.543

你应该可以写

```
TransactionDetails savedDetails = transactionDetails.save(); 
```

save() 方法实际上没有返回 JPABase，它被声明为这样您将获得保存的实体

# jquery - 将“不再显示此对话框”复选框添加到引导模式

> ID：14815413
> 
> 赞同：5
> 
> 时间：2013-02-11T15:36:43.207
> 
> 标签：jquery, twitter-bootstrap

As the title states, I'd like to add a checkbox to my modal that, when selected, will stop the modal from popping up. 我希望每次重新加载页面时都会出现模式，用户可以选择使其停止出现。

我的模态：

```
<div id="myModal" class="modal hide fade">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h3>Modal header</h3>
    </div>
    <div class="modal-body">
        <div id="modalText"></div>
    </div>
    <div class="modal-footer">
        <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
        <button class="btn btn-primary">Save changes</button>
    </div>
</div> 
```

和我的js：

```
<script type="text/javascript">

    $(document).ready(function () {

        $('.redBox').draggable();
        $('.blueBox').droppable({
            drop: function (event, ui) {
                var draggable = ui.draggable;
                var droppable = $(this).attr('id');
                $(this)
                $('.modal-body #modalText').append("Assign " + draggable.attr('id').substring(1, 23) + " to " + droppable + "?");
                $("#myModal").modal('show');

            }
        });
    });

</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T15:50:05.227

尝试注入复选框单击事件并使用 Cookie 来存储用户选择。

您将需要 jQuery cookie 插件来使用 $.cookie。

[https://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)

HTML：

```
<div id="myModal" class="modal hide fade">
    [...]
    <div class="modal-footer">
        <label><input type="checkbox" name="dismiss">Don't show again!</label><br />
        <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
        <button class="btn btn-primary">Save changes</button>
    </div>
</div> 
```

JS：

```
$(document).ready(function () {
    $('.redBox').draggable();
    $('.blueBox').droppable({
        drop: function (event, ui) {
            var draggable = ui.draggable;
            var droppable = $(this).attr('id');
            //$(this) this is not used
            //check if cookie is set and value is 1
            if(!$.cookie('modal_dismiss')) {
                //moved modal stuff in if case
                $('.modal-body #modalText').append("Assign " + draggable.attr('id').substring(1, 23) + " to " + droppable + "?");
                $("#myModal").modal('show');
            }

        }
    });
    //use modal hidden event for checking checkbox status
    $('#myModal').on('hidden', function () {
        var status = $("input[name=dismiss]", this).is(":checked");
        $.cookie('modal_dismiss', status, {
            expires: 7,
            path: '/'
        });
    });
}); 
```

# python - 无法弄清楚字符串替换在 Python 3.x 中是如何工作的

> ID：14815417
> 
> 赞同：4
> 
> 时间：2013-02-11T15:36:56.857
> 
> 标签：python, python-3.x, format, string-substitution

在 python 2.x 中，您可以执行以下操作：

```
>>> print '%.2f' % 315.15321531321
315.15 
```

但是，我无法让它适用于 python 3.x，我尝试了不同的东西，例如

```
>>> print ('%.2f') % 315.15321531321
%.2f
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: unsupported operand type(s) for %: 'NoneType' and 'float'

>>> print ("my number %") % 315.15321531321
my number %
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: unsupported operand type(s) for %: 'NoneType' and 'float' 
```

然后，我阅读了 .format() 方法，但我也无法让它工作

```
>>> "my number {.2f}".format(315.15321531321)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'float' object has no attribute '2f'

>>> print ("my number {}").format(315.15321531321)
my number {}
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'NoneType' object has no attribute 'format' 
```

我会很高兴任何提示和建议！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T15:47:06.843

尝试发送带有格式的整个字符串以进行打印。

```
print ('%.2f' % 6.42340) 
```

适用于 Python 3.2

此外，该格式通过为所提供的 agruments 提供索引来工作

```
print( "hello{0:.3f}".format( 3.43234 )) 
```

注意格式标志前面的“0”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T17:20:20.453

您的代码的问题在于，在 Python 3 中 print 不再是关键字，而是一个函数，所以会发生这种情况：

```
>>> print ('%.2f') % 315.15321531321
%.2f
Traceback....  # 
```

因为它打印字符串并稍后评估“％315.15321531321”部分并且当然失败，所以其他示例也会发生同样的情况。

还行吧：

```
print(('%.2f') % 315.15321531321) 
```

# vba - 搜索正确的列并查找重复项 - 需要进行宏修改 [VBA]

> ID：14815419
> 
> 赞同：1
> 
> 时间：2013-02-11T15:36:59.053
> 
> 标签：vba, excel

我有一个用于 excel 的 VBA 宏来查找重复项。它可以工作，但它被指定给某个列。我想搜索第一行的列标题并找到名为“Email”的标题（最好是“Email*”，因为有时这个标题在“Email”字之后包含一些其他字）。我认为这个脚本不会根据行数进行调整，并且限制为 65536 个值。我宁愿让这个脚本适应列中值的数量。我有一个类似的 VBA 宏，它做得很完美。我以为我可以使用这个宏作为示例并修改我目前正在处理的那个……但是我失败了。谁能帮我对第一个代码进行适当的修改？

**我想修改的 VBA 宏：**

```
Option Explicit

Sub DeleteDups()

Dim x As Long
Dim LastRow As Long
Sheets("test").Activate
LastRow = Range("A65536").End(xlUp).Row
For x = LastRow To 1 Step -1
    If Application.WorksheetFunction.CountIf(Range("A1:A" & x), Range("A" & x).Text) > 1 Then
        Range("A" & x).Interior.Color = RGB(255, 48, 48)
    End If
Next x

End Sub 
```

**VBA 宏运行良好，我想以此为例：**

```
Function getAllColNum(ByVal rowNum As Long, ByVal searchString As Variant) As Object
Dim allColNum As Object
Dim i As Long
Dim j As Long
Dim width As Long
Set allColNum = CreateObject("Scripting.Dictionary")
colNum = 1
With ActiveSheet
    width = .Cells(rowNum, .Columns.Count).End(xlToLeft).Column
    For i = 1 To width
         If InStr(UCase(Trim(.Cells(rowNum, i).Value)), UCase(Trim(searchString))) > 0 Then
             allColNum.Add i, ""
         End If '
    Next i
End With
Set getAllColNum = allColNum
End Function

Sub GOOD_WORKS_No_Dots_at_End_of_Emails()
Dim strSearch As String
strSearch = "Email"
Dim colNum As Variant
Dim allColNum As Object
Sheets("Data").Activate
Dim LR As Long, i As Long
Set allColNum = getAllColNum(1, searchString)
For Each colNum In allColNum
    LR = Cells(Rows.Count, colNum).End(xlUp).Row
    For i = 1 To LR
        With Range(Cells(i, colNum), Cells(i, colNum))
            If Right(.Value, 1) = "." Then .Value = Left(.Value, Len(.Value) - 1)
        End With
    Next i
Next colNum
Sheets("Automation").Activate
MsgBox "No Dots at the end of email addresses - Done!"
End Sub 
```

**到目前为止我的工作**

```
Function getAllColNum(ByVal rowNum As Long, ByVal searchString As Variant) As Object
Dim allColNum As Object
Dim i As Long
Dim j As Long
Dim width As Long
Set allColNum = CreateObject("Scripting.Dictionary")
colNum = 1
With ActiveSheet
width = .Cells(rowNum, .Columns.Count).End(xlToLeft).Column
For i = 1 To width
     If UCase(Trim(.Cells(rowNum, i).Value)) Like UCase(Trim(searchString)) Then
         allColNum.Add i, ""
     End If '
Next i
End With
Set getAllColNum = allColNum
End Function

Sub testing_testing()
Dim strSearch As String
strSearch = "Email"
Dim colNum As Variant
Dim allColNum As Object
Sheets("Data").Activate
Dim LR As Long, i As Long
Set allColNum = getAllColNum(1, searchString)
For Each colNum In allColNum
LR = Cells(Rows.Count, colNum).End(xlUp).Row
For i = 1 To LR
    With Range(Cells(i, colNum), Cells(i, colNum))
        If Application.WorksheetFunction.CountIf(Range("R1:A" & x), Range("R" & x).Text) > 1 Then
    Range("A" & x).Interior.Color = RGB(255, 48, 48)
    End With
    End If
Next i
Next colNum
Sheets("Automation").Activate
MsgBox "Finiding duplicates - Done!"
End Sub 
```

* * *

似乎更复杂，正如我提到的，我对 VBA 的了解有限。但是，我发现了一个不同的脚本，它可能更容易修改。

此宏查找电子邮件地址列并标记整个列

```
Option Explicit

Sub GOOD_WORKS_Mark_Email_Duplicates()

Dim x As Long
Dim LastRow As Long
Sheets("test").Activate
LastRow = Range("A65536").End(xlUp).Row
For x = LastRow To 1 Step -1
    If Application.WorksheetFunction.CountIf(Range("A1:A" & x), Range("A" & x).Text) > 1 Then
        Range("A" & x).Interior.Color = RGB(255, 48, 48)
    End If
Next x
MsgBox "Email duplicates has been marked - red cells. Check if there are any red cells in the Email column"
End Sub 
```

这个使用countif函数找到重复项（这对我很好。唯一的问题是我有这个宏作为一个按钮，其中指定了范围

```
Sub Highlight_Duplicates(Values As Range)
Dim Cell

For Each Cell In Values
If WorksheetFunction.CountIf(Values, Cell.Value) > 1 Then
    Cell.Interior.ColorIndex = 6
End If

Next Cell
End Sub 
```

然后是操作按钮：

```
Private Sub CommandButton1_Click()
Highlight_Duplicates (Sheets("Test").Range("C2:C92"))

End Sub 
```

我可以先运行第一个宏，然后再运行第二个。但是，我不知道如何摆脱动作按钮中的 Range 。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:45:44.040

在你的 getAllColNum 函数中，改变这个：

```
If InStr(UCase(Trim(.Cells(rowNum, i).Value)), _
         UCase(Trim(searchString))) > 0 Then 
```

对此：

```
If UCase(Trim(.Cells(rowNum, i).Value)) Like UCase(Trim(searchString)) Then 
```

这将允许您传递通配符标题，如“*电子邮件*”并获取所有匹配的列。

# python - 在 Python IDLE 中显示完成 -> 是什么意思？

> ID：14815422
> 
> 赞同：1
> 
> 时间：2013-02-11T15:37:07.100
> 
> 标签：python, python-idle

[由于这个答案](https://stackoverflow.com/a/9478704)，我设法让 Show Completion 工作。但是 str(object) -> string 在键入函数的左括号后作为提示意味着什么？

示例代码：

```
linkText = "some text"
elms = browser.find_elements(By.PARTIAL_LINK_TEXT(linkText)) 
```

On Run 给出：`TypeError: 'str' object is not callable` 这是否意味着`linkText`应该是一个指向字符串的指针？如何在 Python 中输入指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-10T07:17:32.680

重复我的评论，这确实是答案。

您在键入后看到的`"name("`是 a `'Call tip'`，它试图给出签名和文档字符串的第一行。对于许多内置函数，您看到的是文档字符串的第一行，它们给出了调用签名和函数返回值`'->'`。`str(x)`返回一个字符串。

您的示例代码是一个不同的问题。异常意味着这`By.PARTIAL_LINK_TEXT`就是它的名字所说的，一个字符串，而不是一个函数。

# jquery - 需要能够使用 JQuery 在类中创建循环

> ID：14815424
> 
> 赞同：1
> 
> 时间：2013-02-11T15:37:13.483
> 
> 标签：jquery, arrays, loops

所以基本上我有一个数组，其中包含一个图像链接和一个数组中的描述，然后调用它来加载幻灯片中的元素。但是，它没有设置为循环，因此在调用时效率低下，并且必须手动输入每个数组索引才能获得将图像调用到幻灯片中所需的一切。见下文：

```
<head>
    <title></title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />

    <link rel="stylesheet" href="css/supersized.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="css/supersized.shutter.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="css/colorbox.css" type="text/css" media="screen" />

    <script type="text/javascript" src="scripts/jquery-1.6.4.min.js"></script>
    <script type="text/javascript" src="scripts/jquery.easing.min.js"></script>
    <script type="text/javascript" src="scripts/supersized.3.2.7.js"></script>
    <script type="text/javascript" src="scripts/supersized.shutter.js"></script>
    <script type="text/javascript" src="scripts/jquery.colorbox-min.js"></script>
    <script type="text/javascript" src="scripts/jquery.colorbox.parentsetup.js"></script>

    <script type="text/javascript">

        jQuery(function($){

            //image url, image title
            var data = [
                ['images/events/2012/bimmer_cruise/image_01.jpg', ''],
                ['images/events/2012/bimmer_cruise/image_02.jpg', ''],
                ['images/events/2012/bimmer_cruise/image_03.jpg', ''],
                ['images/events/2012/bimmer_cruise/image_04.jpg', '']

                ];

            $.supersized({

                // Functionality
                slide_interval  :   3000,       // Length between transitions
                transition      :   3,      // 0-None, 1-Fade, 2-Slide Top, 3-Slide Right, 4-                                           // Slide Bottom, 5-Slide Left, 6-Carousel Right, 7-                                         // Carousel Left
                transition_speed:   700,        // Speed of transition

                // Components                           
                slide_links     :   'blank',    // Individual links for each slide (Options:                                                //false, 'num', 'name', 'blank')

                slides          :   [           // Slideshow Images

                    {image : data[0][0], title : data[0][1], 
                     thumb : data[0][0], 
                     url   : 'colorbox_onclick("' + data[0][0] + '");'},

                    {image : data[1][0], title : data[1][1], 
                     thumb : data[1][0], 
                     url   : 'colorbox_onclick("' + data[1][0] + '");'},

                    {image : data[2][0], title : data[2][1], 
                     thumb : data[2][0], 
                     url   : 'colorbox_onclick("' + data[2][0] + '");'}, 

                    {image : data[3][0], title : data[3][1], 
                     thumb : data[3][0], 
                     url   : 'colorbox_onclick("' + data[3][0] + '");'}

    ]
            });
        }); 
```

我正在考虑做类似下面的事情，但无法弄清楚，我的网络人也不能。他说这是不可能的，但我很固执，哈哈

```
 for (var i = 0; i < data.length; i++) {

                            {image : data[i][0], title : data[i][1], 
                            thumb : data[i][0], 
                            url   : 'colorbox_onclick("' + data[i][0] + '");'},
                        } 
```

任何帮助/见解表示赞赏:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:55:33.687

```
slides = [];
for (var i = 0; i < data.length; i++) {
    slides.push({image : data[i][0], title : data[i][1], 
                 thumb : data[i][0], 
                 url   : 'colorbox_onclick("' + data[i][0] + '");'}
                });
} 
```

然后`slides`在选项中使用`$.supersized`。

# mysql - LIKE 语句未在查询中找到所有内容

> ID：14815434
> 
> 赞同：1
> 
> 时间：2013-02-11T15:37:51.740
> 
> 标签：mysql, sql

我有一个类似的声明，如下所示：

`AND ( CONCAT( arc_property_res.STREET_NUM, ' ', arc_property_res.STREET_NAME ) LIKE '%{$address}%'`

`NUM`和`NAME`在不同的列中。目前，如果我有一个输入字段并输入，则此查询有效：`000 Street Dr`但是一旦我尝试这样做：`000 Street Drive`我得到 0 个结果。同样的事情也发生在 Rd、Blvd、Pk 和其他一些地方。

我试过只使用一个通配符`%`，但仍然没有找到东西。任何帮助或想法表示赞赏。

* * *

## **更新**

我将表格转换为使用 MyISAM，以便可以使用全文搜索。所以现在所有匹配的查询都有效，即：Dr、Drive、Rd、Road 等......

我的查询现在看起来像这样：

`AND ( MATCH(arc_property_res.STREET_NUM, arc_property_res.STREET_NAME) AGAINST('{$address}')`

在某些情况下，我输入的地址不会首先出现。注意正确的列表在那里，它不是第一个。

例子：

![在此处输入图像描述](../Images/1e21203af601871bcc9f666e9b108fd4.png)

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T15:49:31.427

好的，很难说出你在 STREET_NUM 和 STREET_NAME 中究竟有什么，但如果它适用`000`， `Street Dr`让我们假设这是我们的价值观。

现在我们知道了

`'000' + ' ' + 'Street Dr' LIKE '%000 Street Dr%'`工作。

为什么它适用于：

`'000' + ' ' + 'Street Dr' LIKE '%000 Street Drive%'`? 我认为不应该。

这就是`LIKE`运营商的工作方式。

要解决此问题，您需要在数据库中包含街道、车道、关闭点等的全名，而不是 Dr.、St.、Cl。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T15:54:02.500

您可以尝试以下方法：

```
AND CONCAT( arc_property_res.STREET_NUM, ' ', arc_property_res.STREET_NAME ) LIKE '%{$address}%'
OR '{$address}' LIKE CONCAT( '%', arc_property_res.STREET_NUM, ' ', arc_property_res.STREET_NAME, '%' ) 
```

由于“dr”是“drive”的前两个字符，因此您应该没有问题。但是，“rd”不是“road”的前两个字符，你显然会在那里遇到问题。您可能会考虑提出替换或更好的方法，尝试某种类型的全文搜索。

# python - django：没有名为entities.foo的模块

> ID：14815436
> 
> 赞同：0
> 
> 时间：2013-02-11T15:37:56.310
> 
> 标签：python, django

我正在尝试设置我的第一个 django 项目。在项目中，我创建了一个名为“域”的包。在包“域”中，有一个名为“实体”的文件夹。在“entities”文件夹中，有一个名为“foo.py”的文件，其中包含一个名为“Foo”的类。

我正在尝试将“Foo”类导入另一个文件（模块？）我已经尝试了几乎所有我能想到的排列。当我尝试这个时：

```
from domain.entities.foo import Foo 
```

Eclipse 停止将 Foo 类突出显示为未找到。似乎很满足。但是当我在浏览器中查看页面时，我得到一个错误屏幕：

```
Import Error at /[URL]
No module named entities.foo 
```

任何人都可以帮忙吗？我完全没有想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T15:39:52.677

您当然没有`__init__.py`每个文件夹（包）上的空文件。如果您使用的是 Python 2.X，则需要它。

```
domain
|---- __init__.py
|---- entities
|     |---- foo.py
|     |---- __init__.py 
```

之后，您将能够`Foo`在模块内导入类`domain.entities.foo`

```
from domain.entities.foo import Foo 
```

# ruby-on-rails - 验证地理位置纬度和经度

> ID：14815440
> 
> 赞同：9
> 
> 时间：2013-02-11T15:37:57.437
> 
> 标签：ruby-on-rails, validation, geocoding

我有一个`Camping`带有`#latitude`和`#longitude`属性的 Ruby on Rails 模型。

这应该得到验证。必须对其进行验证，以便：

*   这些值的格式正确。例如 48.8582 和 2.2945，还有 48.8 和 2.2。应该允许任何精度。我将它们存储为浮点数，是否需要或建议进行任何额外的验证？
*   它们在有效范围 (0-90) 内。或者我应该允许负数，还是 90 以上和以下的数字？

我对这一点上是否是一个实际有效的地址不感兴趣（海、北极等等，只要它是地球上的一个有效点）。

我正在使用[地理编码](http://www.rubygeocoder.com/)器gem，但现在，输入只是一对纬度/经度文本字段。Geocoder 只是对这个问题感兴趣，因为它可能有实用方法（我找不到）来验证纬度/经度对。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-12T01:19:27.293

我不知道 Geocoder 中有任何方法可以检查，但您可以使用 rails 验证

```
validates :latitude , numericality: { greater_than_or_equal_to:  -90, less_than_or_equal_to:  90 }
validates :longitude, numericality: { greater_than_or_equal_to: -180, less_than_or_equal_to: 180 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-22T07:55:24.043

在 Rails 4 及更高版本中，正确答案是：

```
validates :lat, numericality: { greater_than_or_equal_to: -90,  \
  less_than_or_equal_to: 90 }
validates :lng, numericality: { greater_than_or_equal_to: -180,  \
  less_than_or_equal_to: 180 } 
```

# c# - 在 C# 中有效地从二维数组中提取向量

> ID：14815441
> 
> 赞同：5
> 
> 时间：2013-02-11T15:38:05.317
> 
> 标签：c#, arrays, performance, matlab, copy

我有一个非常大的二维数组，我需要在这个数组上计算向量运算。NTerms 和 NDocs 都是非常大的整数。

`var myMat = new double[NTerms, NDocs];`

我需要从这个矩阵中提取向量列。目前，我正在使用 for 循环。

```
 col = 100;
            for (int i = 0; i < NTerms; i++)
            {
                myVec[i] = myMat[i, col];
            } 
```

这个操作很慢。在 Matlab 中，我可以在不需要迭代的情况下提取向量，如下所示：

```
myVec = myMat[:,col]; 
```

有没有办法在 C# 中做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T16:02:24.070

在 C# 中没有这样的结构可以让您像在 Matlab 中那样使用数组。使用您已有的代码，您可以使用.NET Framework 4.0 中引入的[任务并行库加快矢量创建过程。](http://msdn.microsoft.com/en-us/library/dd460717%28v=vs.100%29.aspx)

```
Parallel.For(0, NTerms, i => myVec[i] = myMat[i, col]); 
```

如果您的 CPU 有多个内核，那么您的性能会有所提高，否则不会有任何效果。

有关如何将任务并行库与矩阵和数组一起使用的更多示例，您可以参考 MSDN 文章[矩阵分解](http://msdn.microsoft.com/en-us/magazine/jj863137.aspx)。

但是当涉及到一些严肃的数学计算时，我怀疑 C# 是一个不错的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T00:48:45.440

一些可能的问题：

可能是 C# 中多维数组访问元素的方式。请参阅[这篇较早的文章](https://stackoverflow.com/questions/597720/what-is-differences-between-multidimensional-array-and-array-of-arrays-in-c)。

另一个问题可能是您正在访问非连续内存 - 因此缓存没有太多帮助，如果数组非常大，您甚至可能不得不从虚拟内存（磁盘）中获取。

当您一次访问一整行而不是一列时，您的速度会发生什么变化？如果这明显更快，那么您可以 90% 确定这是一个连续内存问题......

# ruby-on-rails-3 - ReferenceError: Faye 未定义

> ID：14815443
> 
> 赞同：2
> 
> 时间：2013-02-11T15:38:06.697
> 
> 标签：ruby-on-rails-3, apache, thin, faye

我正在尝试使用 faye 用 ruby​​ on rails 做一个聊天框。它在 WEBrick 服务器上运行良好，我的老板让我用 apache 服务器实现它，我试过了，但有一些错误（由 firebug 显示）：

```
 TypeError: element.dispatchEvent is not a function
           var client = new Faye.Client('http://192.168.2.1:9292/faye');
    ReferenceError: Faye is not defined
           var client = new Faye.Client('http://192.168.2.1:9292/faye'); 
```

gem 'faye' 包含在 Gemfile 中，faye 版本是 '0.8.8'；“瘦”已安装。瘦版：'1.5.0' 任何人都可以帮助解决这些问题？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T08:03:00.560

在 html 文件中包含以下内容

`<script src="http://localhost:9000/realtime_videos/client.js" type="text/javascript"></script>`

# c - 从c中的文件中读取名称和密码

> ID：14815449
> 
> 赞同：1
> 
> 时间：2013-02-11T15:38:18.773
> 
> 标签：c, file

我正在尝试将文件中的名称和密码读入 c 中的结构，但显然我的代码没有按预期工作。有没有人可以帮助我找出下面附加代码的问题？非常感谢！（基本上文件有几个名字和密码，我想把它们读入一个结构accounts[]`）

```
#include <stdio.h>
#include <stdlib.h>

struct account {
    char *id; 
    char *password;
};

static struct account accounts[10];

void read_file(struct account accounts[])
{
    FILE *fp;
    int i=0;   // count how many lines are in the file
    int c;
    fp=fopen("name_pass.txt", "r");
    while(!feof(fp)) {
        c=fgetc(fp);
        if(c=='\n')
            ++i;
    }
    int j=0;
    // read each line and put into accounts
    while(j!=i-1) {
        fscanf(fp, "%s %s", accounts[j].id, accounts[j].password);
        ++j;
    }
}

int main()
{
    read_file(accounts);
    // check if it works or not
    printf("%s, %s, %s, %s\n",
        accounts[0].id, accounts[0].password,
        accounts[1].id, accounts[1].password);
    return 0;
} 
```

name_pass.txt 文件是一个像这样的简单文件（名称+密码）：

你好 1234

大声笑 123

世界123

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T15:40:51.317

您正在读取文件两次。所以你需要在第二个循环开始之前[**fseek() 或 rewind()到第一个字符。**](http://beej.us/guide/bgc/output/html/multipage/fseek.html)

尝试：

```
fseek(fp, 0, SEEK_SET); // same as rewind() 
```

或者

```
rewind(fp);             // s 
```

您需要在两个循环之间添加此代码*（在第一个循环之后和第二个循环之前）*

此外，您要为`id, password filed`in分配内存`account struct`：

```
struct account {
    char *id; 
    char *password;
}; 
```

或者像@Adrián López 在他的回答中建议的那样静态分配内存。

**编辑** 我更正了你的代码：

```
struct account {
    char id[20]; 
    char password[20];
};
static struct account accounts[10];
void read_file(struct account accounts[])
{
    FILE *fp;
    int i=0;   // count how many lines are in the file
    int c;
    fp=fopen("name_pass.txt", "r");
    while(!feof(fp)) {
        c=fgetc(fp);
        if(c=='\n')
            ++i;
    }
    int j=0;
    rewind(fp);  // Line I added
        // read each line and put into accounts
    while(j!=i-1) {
        fscanf(fp, "%s %s", accounts[j].id, accounts[j].password);
        ++j;
    }
}
int main()
{
    read_file(accounts);
    // check if it works or not
    printf("%s, %s, %s, %s\n",
        accounts[0].id, accounts[0].password,
        accounts[1].id, accounts[1].password);
    return 0;
} 
```

及其工作方式如下：

```
:~$ cat name_pass.txt 
hello 1234

lol 123

world 123
:~$ ./a.out 
hello, 1234, lol, 123 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T15:41:00.017

您需要`malloc()`结构中指针的内容或使用静态大小声明：

```
struct account {
    char id[20]; 
    char password[20];
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T15:40:58.597

您可能应该首先为您正在输入的内容分配内存`scanf`。关键字是`malloc`，有点太长了，不能在这里讲课。

# qt - 教程无法创建我的第一个 Ubuntu 移动应用程序

> ID：14815451
> 
> 赞同：3
> 
> 时间：2013-01-04T08:31:43.197
> 
> 标签：qt

我按照指南使用 QTCreator 和 QT5 创建了我的第一个 Ubuntu 移动应用程序“货币转换器”。但是，编译器返回以下错误消息：

```
module "QtQuick" version 2.0 is not installed 
     import QtQuick 2.0 
```

事实是，如果我从终端运行 qmlscene，它可以正常工作。QT5 绝对安装。

必须在 QTCreator 中配置一些我不知道的东西。

# rest - REST API 中的信息与生成的唯一 ID

> ID：14815452
> 
> 赞同：14
> 
> 时间：2013-02-11T15:38:27.470
> 
> 标签：rest

设计一个 RESTful API。我有两种识别资源（个人数据）的方法。通过数据库生成的唯一 ID，或通过为每个人输入的社会安全号码 (SSN)。SSN 应该是唯一的，但可以更改。

使用 ID 对我来说最方便，因为它保证是唯一的，并且不会改变。因此，资源的 URL 也始终保持不变：

```
GET /persons/12

{
  "name": Morgan
  "ssn": "840212-3312"
} 
```

使用 SSN 的理由是它更能被 API 客户端提供信息和理解。SSN在周边系统中也使用较多：

```
GET /persons/840212-3321

{
  "name": Morgan
  "id": "12"
} 
```

所以问题是：我是否应该采用第一种方法，并避免 SSN 可能发生变化的一些实施难题。也许提供一些从 SSN 转换为 ID 的辅助方法？

或者采用第二种方法。提供更多信息的 API。尽管必须处理一些不那么 RESTful 的奇怪问题，其中 URL:s 可能由于 SSN 更改而更改？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-11T16:26:11.890

URL 设计是个人选择。但是为了给你一些与雷已经提供的不同的例子，我会给你一些我自己的。

我有一个用户帐户资源并允许通过两个 URI 进行访问：

```
/users/12 
```

和

```
/users/morgan 
```

其中数值是自动增量 ID，字母值是用户指定的系统上的唯一用户名。这些资源是无法访问的，所以我不关心规范化，但是`/users`页面链接到字母表。

我的系统上没有其他资源具有两个唯一字段，因此由 ID、`/jobs/123`、 . 引用`/quotations/456`。

如您所见，我更喜欢复数 URI 段 ;-)
我认为“job 123”来自“jobs”集合，因此拥有一个“jobs”资源似乎是合乎逻辑的，每个作业都有子资源。

您不需要单独的`/search/`区域来执行搜索，我认为将搜索条件直接应用于集合资源会更干净：

```
/people?ssn=123456-7890  (people with SSN matching/containing "123456-7890")
/people?name=morgan      (people who's name is/contains "Morgan") 
```

我有类似的东西，但只使用第一个字母作为过滤器：

```
/sites?alpha=f 
```

列出所有以 F 开头的网站。您可以将其视为过滤器或搜索条件，这些术语只是同一枚硬币的不同方面。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T15:44:28.743

很高兴看到有人花时间考虑他们的资源网址！

我会制作一个具有唯一 id 的 Url，以便为单个用户提供资源。喜欢：

```
http://api.mysite.com/person/12/ 
```

其中 12 是您的唯一 ID。请注意，我也更喜欢单数的“人”......

无论如何，网址应该返回：

```
{
  "ssn":  "840212-3312"
  "name": "Morgan"
  "id": "12"
} 
```

但是，我还将创建一个通用搜索 URL，它返回与参数匹配的用户列表（json 数组或您需要的任何格式）。您可以将搜索参数指定为 get params，如下所示：

```
 http://api.mysite.com/person/search/?ssn=840212-3312 
```

或者

```
 http://api.mysite.com/person/search/?name=Morgan 
```

这些将针对单个搜索命中返回类似的内容-注意它是一个数组，而不是像直接指向单个用户的唯一 id url 这样的单个项目。

```
[{
  "ssn":  "840212-3312"
  "name": "Morgan"
  "id": "12"
}] 
```

该搜索随后可以针对其他搜索条件进行扩充。您可能只能通过搜索网址返回唯一 ID——一旦您从搜索中获得唯一 ID 网址，您始终可以向其发出请求...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-18T21:19:21.437

我建议你两者都不要使用。生成对 API 的单个用户和所有其他资源（包括其他用户的资源）唯一的资源 ID。

出于几个原因，使用唯一的数据库 ID 并不理想。首先，API 资源和数据库记录不一定总是一对一的，即使您现在已经这样设计了。其次，您可能会更改为生成不同格式唯一 ID 的不同数据存储。

此外，最好将 ID 与其他资源属性（例如 SSN）分开（顺便说一句，我希望您以非常安全的方式存储 SSN，但这是另一个主题）。如果出于某种原因，SSN 发生了变化，多个 API 资源与同一个 SSN 相关联，或者您决定某天不需要该数据，您不想更改 ID。

一种模式是在唯一 ID 前面加上一些指示资源类型的字符。例如，如果 User 是您 API 中的资源类型，则生成的唯一 ID 将类似于`USR56382`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-14T22:14:07.607

RESTful API 是一种强调以资源为中心的设计方法的架构风格。

在我看来，我会将资源保持为复数和名词格式。

每个资源，例如客户，都有以下统一的接口

POST /customers - 用于创建资源实例 PUT /customers/{customerId} - 用于更新特定实例 GET /customers - 用于搜索客户。所以@Ray，搜索不需要是URI本身的一部分。任何需要支持的过滤器或查询参数都应该存在。GET /customers/{customerId} - 检索客户的特定实例 DELETE /customers/{customerId} 删除特定实例

之所以复数，是因为它的行为就像一个工厂。例如，当您尝试创建资源的新实例时，该实例不存在，因此它不能位于自身实例上。因此，不使用奇异性。它还与搜索/查询密切相关，您不知道或持有资源的实际实例。因此，非常推荐使用复数形式。

现在，问题是资源 id 使用什么 - 数据库主键、生成的标识符或加密的令牌。

在我看来，数据库主键不应该暴露。资源标识符不应与数据库主键一一对应。但是，它发生了很多。更建议使用生成的基于 UUID 的密钥来避免任何连续的后续攻击，但世界并不总是理想的。

回到令牌或加密令牌，是敏感 API 的推荐方法，并且在两个单独的应用程序之间执行数据交换。如果我们使用它，加密/解密应该完全在 API 端。这意味着，子资源的加密密钥应作为父 API 响应的一部分返回，否则将达不到目的。

# java - 从java运行git，git提示输入用户名和密码，为什么？

> ID：14815463
> 
> 赞同：1
> 
> 时间：2013-02-11T15:39:16.617
> 
> 标签：java, git, exec

我正在组合一个工具来自动化我的一些 git 任务，但我遇到了一个问题，“git commit”提示输入用户名和密码。我可以做 git add, rm, status ok，但不能提交。`Runtime.exec()`这是通过java运行 git 。

```
Runtime.getRuntime().exec("git " + cmd, new String[0], mDir); 
```

我目前的测试是在 MS Windows 上。从命令行运行 git commit 就可以了。只有通过`exec()`调用运行时才会提示输入用户/密码。

我之前确实做过 git config --global 来设置用户名和密码。

那么，它为什么会提示我呢？

--添加 2/13

这是使用本地 git 目录，而不是使用远程存储库。好的，这是 GIT 向我报告的确切错误消息： git commit -F -

```
 *** Please tell me who you are.

 Run

   git config --global user.email "you@example.com"
   git config --global user.name "Your Name"

 to set your account's default identity.
 Omit --global to set the identity only in this repository. 
```

## 致命：无法自动检测电子邮件地址（得到 'Cougar@COUGAR-HOUSE.(none)'）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:42:24.090

你的 HOME 环境是在 java 运行时设置的吗？如果没有，git 将不知道在哪里可以找到您的全局 .gitconfig 文件（通常是 %HOME%.gitconfig）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T16:13:00.600

密码配置将不会被使用，`git`因此这不是命令行运行的原因。更有可能的是，您设置了 SSH 密钥以允许您在没有密码的情况下访问您的服务器。这适用于命令行，但由于环境不同，从 Java exec 运行时可能不起作用。

您可以尝试调试环境，我不确定您需要在 Windows 上做什么。或者，您可以尝试配置`core.askpass`. 从`git config`手册页：

```
 core.askpass
    Some commands (e.g. svn and http interfaces) that interactively ask for a
    password can be told to use an external program given via the value of this
    variable. Can be overridden by the GIT_ASKPASS environment variable. If not
    set, fall back to the value of the SSH_ASKPASS environment variable or,
    failing that, a simple password prompt. The external program shall be given a
    suitable prompt as command line argument and write the password on its
    STDOUT. 
```

# javascript - Javascript 方法未定义

> ID：14815466
> 
> 赞同：1
> 
> 时间：2013-02-11T15:39:32.357
> 
> 标签：javascript, signalr

我对 javascript 中的 OOP 很陌生，这是我的外部 js 文件。

```
(function ($, connection) {    
"use strict";

var conn = connection.serverHub;
connection.hub.url = 'http://localhost:51283/signalr';

function trackUser(username, roleid, sessionid, ipaddress) {
    var page = document.location.pathname;        
    conn.server.joinUser(username, roleid, ipaddress, page, sessionid).done();
}

// signalr client method
conn.client.receivedNotification = function (item) {
    alert(item);
    conn.server.notifiedUser().done();
};
$(function () {
    connection.hub.start().done(function () {
        trackUser('<%= session("USERNAME")%>', '<%= session("ROLE")%>', '<%= Session.SessionID%>', '<%=Request.UserHostAddress%>');//da attivare solo in produzione
    }).fail(function () { alert("failed"); });
}); }(jQuery, $.connection)); 
```

这就是我调用我的方法的方式

```
<body>
<script src="http://localhost:51283/Scripts/jquery-1.9.1.min.js"></script>
<script src="http://localhost:51283/Scripts/jquery.signalR-1.0.0-rc2.min.js"></script>
<script src="http://localhost:51283/signalr/hubs"></script>
<script src="myexternaljs.js"></script>
<script>
    trackUser('<%= session("USERNAME")%>', '<%= session("ROLE")%>', '<%= Session.SessionID%>', '<%=Request.UserHostAddress%>');//da attivare solo in produzione
</script>
</body> 
```

当我尝试调用 trackUser 方法并且我在未定义中获取 trackUser

我哪里做错了？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T15:41:46.940

您的函数是在匿名范围 ( `function ($, connection) { }`) 内定义的。在该范围之外将无法访问它。您可以创建一个全局变量，并将您的函数分配给它：

```
window.trackUser = function(username, roleid, sessionid, ipaddress) {
   ...
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T15:42:26.190

它是未定义的，因为它不在全局范围内。在匿名函数中添加`window.trackUser = trackUser`或将函数声明移动到全局范围。

# mysql - 带有自定义字符串的 MySQL 前缀 SET 字段值

> ID：14815470
> 
> 赞同：1
> 
> 时间：2013-02-11T15:39:46.893
> 
> 标签：mysql, string

我有一个 MySQL 5 数据库表字段`media`，就像`set('audio','video','photo')` 我需要做的那样，在单个 SELECT 语句前缀中，它的值带有一些自定义字符串和空格，如果存在任何值的话。例如：

`audio,video`变成`mediaaudio mediavideo`

`photo`变成`mediaphoto`

数据的具体情况不需要为对应的值制作外部关系表，`set`对于当前的任务来说已经足够了。我需要为它们添加前缀，以便稍后在搜索结果中唯一标识它们。

真实例子：

`id media`

`1 audio,video`

`2 audio`

`3 video`

`4 photo,video`

`5`

预期结果：

`id media`

`1 mediaaudio mediavideo`

`2 mediaaudio`

`3 mediavideo`

`4 mediaphoto mediavideo`

`5`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T15:51:14.717

这是使用`INSTR`,`CONCAT`和`REPLACE`的一种方法`LENGTH`：

```
SELECT ID, 
  CASE WHEN INSTR(YourField, ',') > 0
    THEN CONCAT('media', REPLACE(YourField, ',', ' media'))
    WHEN LENGTH(YourField) > 0
    THEN CONCAT('media', YourField) 
    ELSE ''
   END media
FROM YourTable 
```

还有[小提琴](http://sqlfiddle.com/#!2/798e4/5)。

祝你好运。

# javascript - Javascript 中的动态语法高亮

> ID：14815471
> 
> 赞同：3
> 
> 时间：2013-02-11T15:39:48.533
> 
> 标签：javascript, html, syntax-highlighting, contenteditable

我正在使用基于`contentEditable`html 元素的语法荧光笔创建 javascript 编辑器。我写了一个管理编辑器的类，它的工作方式如下：

```
function Editor() {
    this.setContent = function(content) {
         var pos = //Computes cursor position in current dom scope (number of characters from begining)
         editor.innerHTML = content;
         /* Here I set the cursor back, again, it is complicated and slow process*/
    }
    this.highlight = function() {
         this.setContent(someHighlighter.highlight(this.getTextContent()));  //Slow - highlights whole innerText of editor DOM and sets it as innerHTML
    }
} 
```

上面的代码只是概念。但即便如此，您也可以看到它并不有效，您可能会理解我正在寻找更好的替代方案。
另一方面，我不想用我的余生做这个编辑器。

1.  是否有一些适用于 DOM 而不是纯文本的 javascript 语法荧光笔？
2.  有没有更好的方法如何在不丢失光标位置的情况下更改元素内容？

# linux - 用awk提取文本

> ID：14815472
> 
> 赞同：1
> 
> 时间：2013-02-11T15:39:48.817
> 
> 标签：linux, awk, grep

我想 grep 一个文件并提取这一行的第三部分

```
#define SIM_VERSION_COMPAT 1302 
```

与 awk。所以我写道：

```
grep "#define SIM_VERSION_COMPAT" global.h | awk '{ print $$3 }' 
```

结果应该是 1302 但我什么也没得到（空白）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T15:43:05.607

无需使用 grep 和管道，您可以像这样使用 awk：

```
awk '/#define SIM_VERSION_COMPAT/{print $3}' global.h 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T15:47:05.863

只需使用`grep`：

```
$ grep -Po '(?<=#define SIM_VERSION_COMPAT )[0-9]+' global.h
1302 
```

这使用[正向查找](http://www.regular-expressions.info/lookaround.html)来匹配包含`#define SIM_VERSION_COMPAT`但仅打印后面的数​​字字符串的行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T15:47:41.673

```
[spatel@tc01 ~]$ echo "#define SIM_VERSION_COMPAT 1302" | awk '{ print $3 }'
1302 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T02:40:02.947

您也可以使用 cut 命令

```
grep "#define SIM_VERSION_COMPAT" temp.txt | cut -d" " -f 3 
```

# c# - 在 IIS 6 上运行的 ASP.NET MVC 3 应用程序上处理 404

> ID：14815473
> 
> 赞同：4
> 
> 时间：2013-02-11T15:39:52.463
> 
> 标签：c#, asp.net, asp.net-mvc-3, routes, iis-6

标题说明了一切。实际上有大量关于如何做到这一点的信息，我非常接近。我在 google 上阅读了几篇文章以及以下 stackoverflow 帖子：

[如何正确处理 ASP.NET MVC 中的 404？](https://stackoverflow.com/questions/619895/how-can-i-properly-handle-404-in-asp-net-mvc/2577095#2577095)

[如何正确处理 ASP.NET MVC 中的 404？](https://stackoverflow.com/questions/619895/how-can-i-properly-handle-404-in-asp-net-mvc)

[asp.net MVC3 上的自定义错误页面](https://stackoverflow.com/questions/5226791/answer/submit)

[http://blog.davebouwman.com/2011/04/21/custom-404-pages-for-asp-net-mvc-3/](http://blog.davebouwman.com/2011/04/21/custom-404-pages-for-asp-net-mvc-3/)

我有 404 在行动层面工作。我在我的控制器上使用 *.aspx 后缀。如果你有一个像

```
"http://blahblah/AppName/idontexist.aspx" 
```

自定义错误控制器已加载。我的问题归结为没有 .aspx 且也不存在的控制器。这会产生我不想要的典型 IIS Server 404 html 页面。工作中的另一个问题是我无法真正更改 IIS 配置本身。我必须通过 code/web.config/global.asax（或我没有想到的项目的其他部分）来处理这个问题。

这是我的 web.config 条目（这是根 web.config，不是视图）：

```
<httpErrors defaultPath="/Error.aspx/HttpError" errorMode="Custom" existingResponse="Replace" defaultResponseMode="ExecuteURL">
  <remove statusCode="500" subStatusCode="-1" />
  <remove statusCode="404" subStatusCode="-1" />
  <error statusCode="500" path="/Error.aspx/HttpError" responseMode="ExecuteURL" />
  <error statusCode="404" path="/Error.aspx/NotFound" responseMode="ExecuteURL" />
</httpErrors>

<customErrors mode="On"  defaultRedirect="~/Error.aspx/HttpError">
  <error redirect="~/Error.aspx/NotFound" statusCode="404" />
</customErrors> 
```

这是我在 global.asax 中的路线：

```
 routes.MapRoute(
            "Default", // Route name
            "{controller}.aspx/{action}/{id}", // URL with parameters
            new { controller = "StartController", action = "StartAction", id = UrlParameter.Optional } // Parameter defaults
        );

        routes.MapRoute(
            "NotFoundController", // Route name
            "{controller}.aspx", // URL with parameters
            new { controller = "Error", action = "NotFound" } // Parameter defaults
        );

        routes.MapRoute(
            "NotFoundController2", // Route name
            "{controller}", // URL with parameters
            new { controller = "Error", action = "NotFound" } // Parameter defaults
        );

        routes.MapRoute(
            "Root", // Route name
            "", // URL with parameters
            new { controller = "StartController", action = "StartAction", id = UrlParameter.Optional } // Parameter defaults
        ); 
```

我还认为使用路由来捕获这些问题的一个障碍是我丢失了 404 状态码；但是，由于路线指向专门为此目的设计的动作，我认为这一点没有实际意义。

无论如何，任何想法、建议或批评都将受到欢迎。我在这里很近。谢谢！

**编辑 1**

我一直在研究这个。如果在 url 中找不到文本“.aspx”，是否可以定义自定义路由约束，该约束将重定向到错误控制器？

**编辑 2**

看起来不像是打算使用约束的方式。我也尝试实施

```
 protected void Application_Error()
    {
    } 
```

[根据http://blog.davebouwman.com/2011/04/21/custom-404-pages-for-asp-net-mvc-3/](http://blog.davebouwman.com/2011/04/21/custom-404-pages-for-asp-net-mvc-3/)的实现方法，但是当我没有为控制器指定 .aspx 时，看起来应用程序永远没有机会抛出错误。看起来这在我的应用程序甚至可以响应它之前由 IIS 处理。

如果我可以进行 IIS 更改，最好只更改此应用程序的虚拟目录条目，是否可以提供更可行的解决方案？

如果只是在某个地方我可以获取 url，搜索 .aspx，如果找不到，则抛出 404 未找到，但重定向到应用程序级别的 404 页面而不是 IIS 默认值，那将非常接近理想。

想法？

**编辑 3**

我认为处理这种情况是不可能的，除非您的应用程序是 IIS 服务器的根站点而不是虚拟目录。我注意到，在 IIS 6.0 中，您可以调整默认的 IIS 错误页面。不仅如此，您还可以用 URL 替换某些情况。我尝试使用虚拟目录站点执行此操作，但会显示默认的 IIS 404 Not found 页面。

所以它相当于：如果你对你的设置有一个愚蠢的控制，你可以在 IIS 6 上处理这个问题，并且你正在做的站点是根站点。

在我想象的现实世界场景中不太适用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:04:34.940

如果不能对 IIS 进行更改，我认为这是不可能的。使用 IIS 6，请求不会进入 ASP.Net 领域，除非它们被映射到 ASP.Net ISAPI 处理程序 (aspnet_isapi.dll)。对于普通的 ASP.Net 扩展，当安装 .Net（.ashx、.aspx 等）时，映射已经在 IIS6 中设置。这就是为什么不存在的控制器的 404 会获得正常的 IIS 404 页面。IIS 正在寻找磁盘上不存在的文件夹。

为了让您的 404 页面处理程序按预期工作（假设您可以对 IIS 进行更改），您需要设置所谓的通配符映射。这会将所有请求发送到 ASP.Net ISAPI。还需要指示 IIS 绕过对物理文件的检查，因为在这种情况下不存在任何文件。该选项有一个复选框。我面前不再有 IIS 6，但此站点上的选项 1 将引导您完成它：

[http://blog.stevensanderson.com/2008/07/04/options-for-deploying-aspnet-mvc-to-iis-6/](http://blog.stevensanderson.com/2008/07/04/options-for-deploying-aspnet-mvc-to-iis-6/)

我以前做过这个，它确实有效。将所有内容发送到 .Net ISAPI 需要权衡取舍。所有静态文件都将由 ASP.Net（甚至图像）而不是 IIS 直接处理，因此请注意其中的含义。

希望这可以帮助

# objective-c - 在一个窗口中多次使用相同的自定义表格视图？

> ID：14815477
> 
> 赞同：0
> 
> 时间：2013-02-11T15:39:59.900
> 
> 标签：objective-c, cocoa

我在笔尖中创建了一个表格视图，我想在同一个窗口中使用两次。表格视图有自己的控制器，我想连接各个部分作为插座。通过将文件所有者设置为视图控制器，我可以在 tableview 的 nib 中做到这一点。但是，我怎样才能让这个 tableview 进入父窗口？

看起来好像我不能通过界面生成器来做到这一点？

所以我开始在窗口控制器中为两个控制器创建两个实例变量。我假设我必须以编程方式执行此操作？如何正确设置每个视图的位置？这样做有什么副作用吗？我正在为界面构建器本身的所有其他内容进行窗口布局。但是，我只是看不到这个工作。

我还尝试在表格视图所在的窗口中添加几个滚动视图。我想也许那时我可以将滚动视图作为一个出口连接起来并以这种方式添加它们。至少那时一切都会正确布置。这似乎也不起作用。

# ios - 编辑自定义 UITextField 后应用程序冻结

> ID：14815478
> 
> 赞同：6
> 
> 时间：2013-02-11T15:40:04.387
> 
> 标签：ios, objective-c, uitextfield

我有一个自定义`UITextField`用于验证非空输入、正确的电子邮件、大于 x 个字符的密码等。

有一个自身的`UITextField`委托，因为我对文本字段对象本身进行了所有验证。不确定这是否是问题所在。

此自定义`UITextField`是在 .XIB 文件中创建的。

编辑文本字段本身时，文本字段有时会锁定应用程序。当我按下键盘上的“下一步”按钮时，它通常也会锁定（用于进入下一个需要填写的文本字段）。

Xcode 不会返回错误（例如我假设的循环错误），应用程序只是锁定。这并不总是发生，但通常，如果我用文本对其进行压力测试，然后按“下一步”，它可能会被锁定。

该应用程序不会崩溃......它不会返回主屏幕，但它实际上只是锁定，并且保持无响应。

有任何想法吗？如果您需要更多信息来解决这个问题，请告诉我。我现在不知所措。

* * *

*编辑：*已解决，显然将 UITextField 的委托设置为自身并不是一个好主意。我最终做的是创建一个单独的类，专门处理作为该类的委托`UITextField`并执行该类中的所有逻辑。该类也将有一个属性连接到它作为委托的文本字段。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T08:42:10.987

我也会在这里写下答案：

显然，将 UITextField 的委托设置为自身并不是一个好主意，因为它最终可能会进入循环。

我最终做的是创建一个单独的类，专门处理作为 UITextField 的委托并执行该类中的所有逻辑。该类也将有一个属性连接到它作为委托的文本字段。

# javascript - 为什么 Google Analytics 会动态地将 javascript 注入页面

> ID：14815481
> 
> 赞同：4
> 
> 时间：2013-02-11T15:40:10.003
> 
> 标签：javascript, google-analytics

为什么我需要使用：

```
(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})(); 
```

代替：

```
<script async="true" type="text/javascript" src="http://www.google-analytics.com/ga.js"></script> 
```

我能看到的唯一原因是他们有不同的 SSL 子域。如果不是这样，还有什么理由使用这种脚本注入技术？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T15:42:04.730

1.  能够提供服务`http`或`https`依赖于父页面的协议是原因之一。

2.  由于脚本是`script`通过运行 JS 代码插入的标签注入的，因此它不会阻止页面加载。这是另一个原因。但这也可以通过新的 HTML5 [async](http://davidwalsh.name/html5-async)属性很好地实现（但这与旧浏览器不兼容 - GA 绝对需要与几乎所有浏览器兼容）

# javascript - Windows 8、WinJS 和卸载事件。应该卸载什么？

> ID：14815490
> 
> 赞同：0
> 
> 时间：2013-02-11T15:40:32.730
> 
> 标签：javascript, windows-8

我正在构建一个 Windows 8 应用程序，并且在每个页面视图上都有一个空的卸载事件处理程序。我只是想知道应该卸载什么？

我假设 Listviews、attachedEventListeners 等？但是，通过查看文档，我找不到任何定义实际应该卸载的资源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:52:07.213

作为一般规则，您可能不需要手动卸载任何内容。毕竟是 javascript，这就是垃圾收集的用途。

此事件很可能用于您希望在页面卸载时运行的其他逻辑。

# java - 解析存储在字符串中的xml

> ID：14815498
> 
> 赞同：0
> 
> 时间：2013-02-11T15:41:01.463
> 
> 标签：java, xml, utf-8

我有一个以 xml 格式编码的字符串。所以当我将它打印到控制台时，它会看起来像一个 xml 文件。我想做的是现在使用带有 DOM 或 SAX 库的 java 从这个字符串中读取值。但我不知道该怎么做，因为我的字符串没有存储在文件中。

```
<?xml version="1.0" encoding="UTF-8"?>
<ADT_A01 xmlns="urn:hl7-org:v2xml">
    <MSH>
        <MSH.1>|</MSH.1>
        <MSH.2>^~\&amp;</MSH.2>
        <MSH.3>
            <HD.1>HIS</HD.1>
        </MSH.3>
        <MSH.4>
            <HD.1>RIH</HD.1>
        </MSH.4>
        <MSH.5>
            <HD.1>EKG</HD.1>
        </MSH.5>
        <MSH.6>
            <HD.1>EKG</HD.1>
        </MSH.6>
        <MSH.7>199904140038</MSH.7>
        <MSH.9>
            <MSG.1>ADT</MSG.1>
            <MSG.2>A01</MSG.2>
        </MSH.9>
        <MSH.11>
            <PT.1>P</PT.1>
        </MSH.11>
        <MSH.12>
            <VID.1>2.6</VID.1>
        </MSH.12>
    </MSH>
    <PID>
        <PID.1>1</PID.1>
        <PID.3>
            <CX.1>1478895</CX.1>
            <CX.2>4</CX.2>
            <CX.3>M10</CX.3>
            <CX.4>
                <HD.1>PA</HD.1>
            </CX.4>
        </PID.3>
        <PID.5>
            <XPN.1>
                <FN.1>XTEST</FN.1>
            </XPN.1>
            <XPN.2>PATIENT</XPN.2>
        </PID.5>
        <PID.7>19591123</PID.7>
        <PID.8> F</PID.8>
    </PID>
</ADT_A01> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T15:45:41.990

对于 DOM，一种选择是使用`InputSource`：

```
String str = "<xml>...</xml>";
DocumentBuilder builder = DocumentBuilderFactory.newDocumentBuilder();
Document document = builder.parse(new InputSource(new StringReader(str))); 
```

您可以对 SAX 使用类似的策略，因为它也支持`InputSource`。

# joomla - Joomla 1.5 网站不断被主机阻止

> ID：14815499
> 
> 赞同：1
> 
> 时间：2013-02-11T15:41:01.577
> 
> 标签：joomla, firewall, brute-force, blocked

我有一个自 2012 年 8 月以来拥有的 Joomla 1.5.26 站点。自 8 月以来它一直处于稳定状态，组件等没有任何变化。它使用 RS 防火墙进行了防火墙保护，并采取了所有其他安全预防措施。

在过去的几周里，该网站已开始被持有该网站的托管公司封锁，他们声称有太多的活动连接。我已经搜索了这些站点，禁用了各种组件等，但仍然遇到同样的问题。

有没有人遇到过类似的问题？我正在考虑将该站点移至 Joomla 站点的更有信誉的主机，以查看它是否更强大。我只是无法理解为什么这种情况不断发生。如果连接太多，主机会放置我们用来管理站点的任何机器的 IP 地址，然后我们会被锁定大约 15 分钟。正如我之前所说，网站上没有任何变化，我找不到任何文件或数据库被黑客入侵的证据。

有任何想法吗？

非常感激

詹姆士

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:34:25.207

如果您的主机告诉您连接太多，那么它很可能意味着以下 3 个中的 1 个：

1.  您的站点已达到每月最大带宽限额
2.  您的网站当前主机的流量过多，可能需要移动到 VPS 服务器或更强大的服务器
3.  你的主机是纯废话

检查您是否已达到每月最大带宽限额（如果有的话），否则我可能会建议您转移到其他主机，如果您的网站不是非常受欢迎的网站，每天会产生数千名用户。

# geany - Geany “LIBDBUSMENU-GTK-CRITICAL **: watch_submenu: 断言 `GTK_IS_MENU_SHELL(menu)' 失败”

> ID：14815500
> 
> 赞同：1
> 
> 时间：2013-02-11T15:41:03.517
> 
> 标签：geany

我正在做这个 Ruby on Rails 教程，每次我输入

```
:~/rails_projects/first_app$ geany .gitignore 
```

我明白了

```
(geany:12043): LIBDBUSMENU-GTK-CRITICAL **: watch_submenu: assertioN                      
`GTK_IS_MENU_SHELL(menu)' failed
@ubuntu:~/rails_projects/first_app$ geany .gitignore

(geany:12369): LIBDBUSMENU-GTK-CRITICAL **: watch_submenu: assertion     
`GTK_IS_MENU_SHELL(menu)' failed 
```

文本编辑器仍然打开，但是除非我关闭文本编辑器，否则终端不允许我输入任何内容，这与他打开它的教程不同，并且终端仍然可以工作。如何使用文本编辑器获得正常运行的终端？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:58:58.293

我也有同样的问题。
关于如何纠正它的任何想法？

我发现继续使用命令行并且仍然打开 geany 的方式是：

```
 $ geany file &
 $ <ctrl+c> 
```

它很有用，但并不完美。一个解决方案会很好

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-19T17:38:26.070

将以下 bash 函数定义剪切并粘贴到您的 bash 配置文件 ~/.bash_profile 以从登录 bash 终端使用它（或粘贴到 ~/.bashrc 以从非登录终端使用它）。此功能仅在进行此更改后启动的终端中可用。

```
geany() { 
    $(which geany) --no-msgwin --no-session "$@" &>/dev/null & disown
} 
```

现在键入**geany**后跟零个或多个文件名将产生所需的效果。

解释：

**$(which geany)**通过搜索您的 PATH 找到 geany 的路径，并用该路径代替文本**$(which geany)**。

选项**--no-msgwin**和**--no-session**是可选的，但分别启动 geany 时没有底部的消息窗口，并且不记得打开上次关闭 geany 时打开的文件。

**"$@"**是 bash 将命令行的其余部分替换到此命令中的方式（即，在您键入**geany**以使用此功能后键入的所有文件名）。

**&>/dev/null**将 geany 的标准输出和标准错误输出重定向到 /dev/null，这会阻止来自 geany 的任何消息显示在控制台中。

**& disown**将 geany 作为一个单独的进程运行，该进程不是启动 geany 的终端的子进程。所以它立即不是与终端关联的工作，退出geany时终端不会出现终止消息。

# php - 通过ajax将jquery var传递给php？

> ID：14815515
> 
> 赞同：0
> 
> 时间：2013-02-11T15:41:52.170
> 
> 标签：php, jquery, ajax

我有一个表格，它使用 php 向自己发送电子邮件询问。我有一些将详细信息填写到 div 中的 jquery，

**如何通过 ajax 将 Jquery var 传递给 PHP？（我读过这是最好的方法？）**

这是使用 php 向我发送电子邮件的方式：

```
<? if(isset($_POST['submit'])) { 

$to = "rob@domain.com";
$header = 'From: rob@domain.com';
$subject = "Quotation";
$enquiry_first_name = $_POST['enquiryfirstname'];
$enquiry_last_name = $_POST['enquirylastname'];
$enquiry_title = $_POST['enquirytitle'];
$enquiry_organisation = $_POST['enquiryorganisation'];
$enquiry_address = $_POST['enquiryaddress'];
$enquiry_country = $_POST['enquirycountry'];
$enquiry_email_address = $_POST['enquiryemailaddress'];
$enquiry_telephone = $_POST['enquirytelephone'];
$enquiry_additional_comments = $_POST['enquiryadditionalcomments'];

$body = "You have an quote request from the website:

Name: $enquiry_title $enquiry_first_name $enquiry_last_name 
Type of organisation: $enquiry_organisation 
Address: $enquiry_address, $enquiry_country
E-Mail: $enquiry_email_address 
Tel: $enquiry_telephone
Comments: $enquiry_additional_comments

Kind regards";

mail($to, $subject, $body, $header);

echo "Thank you for your enquiry.";

} ?> 
```

这是将数据输出到 div 的 jquery：

```
function makeSummary() {
    var summary = [];
    $steps.not(":last").each(function (i, step) {
        $step = $(step);
        summary.push('<p><b>' + $step.data('name') + '</b></p>');
        var $ch = $step.find('input[type="checkbox"]:checked');
        if (!$ch.length) {
            summary.push('<p>No items selected</p>');
        } else {
            $ch.each(function (i, ch) {
                summary.push('<p>' + $(ch).val() + '</p>');
            });
        }
    });
    return summary.join('');
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T15:50:31.440

1）制作一个隐藏的输入字段。2) 将 jQuery var 内容传递给隐藏的输入字段

```
$('.selector').change(function(){
    //replace the value here.
}); 
```

3) 使用 $_POST['hiddenname'] 在 php 中获取它

E：这里是一个例子：http: [//jsfiddle.net/yLuNu/4/](http://jsfiddle.net/yLuNu/4/)

它使用下拉菜单将值存储在隐藏字段中。您可以使用任何输出并将其存储在隐藏字段中。

E2：由于我并没有真正得到您想要传递给隐藏字段的内容：如果您有一个函数并且只想将输出保存在隐藏字段中：

你到底想传递给你的脚本什么？我看到了一个复选框，所以我认为您想使用更改功能。如果您只想返回函数的输出

```
$('input#hiddenfield').val($VAR) 
```

而 var 是函数的输出。只需将其添加到现有功能的末尾即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T16:29:24.567

只需在提交之前使用 AJAX 并在表单中呈现隐藏的输入。

Javascript：

```
$.ajax({
    url:'/my/url',
    type: 'POST',
    dataType: 'json',
    data: {
        "some-var": "some-value"
    },
    context: $('form#my-form'), // now use $(this) inside event functions
    complete: function(jqXHR, textStatus) {
        console.log(jqXHR.responseText);
        //this function gets called every time (not only on success or error)
    },
    error: function(jqXHR, textStatus, errorThrown) {
        console.log(jqXHR.responseText);
        //do something if call fails!
    },
    success: function(data, textStatus, jqXHR) {
        if(data && data.value) {
            if($(this).find("#my-field").length) {
                 $(this).find("#my-field").val(data.value);
            }
            else {
                $hidden = $("<input>")
                          .attr("type", "hidden")
                          .attr("name", "my-field")
                          .val(data.value);
                $(this).append($hidden);
            }
            //submit form 
            $(this).submit();
        }
    }
}); 
```

你的 AJAX 处理 PHP 文件看起来像这样。

PHP：

```
<?php
    $data = array(
        "value" => "default"
    );
    if($_POST["some-var"]=="some-value") {
        $data = array(
            "value" => "something"
        );
    }
    echo json_encode($data);
?> 
```

只是给你一个想法如何解决这个问题！

您将需要自己进行一些验证和过滤！

# php - 如果超过 20 个字符，则将字符串写入两行

> ID：14815516
> 
> 赞同：0
> 
> 时间：2013-02-11T15:41:52.633
> 
> 标签：php

我有不同数量的字符串（来自 mp3 的专辑标题），但其中一些长度超过 20 个字符。他们里面有空格。我希望能够找到较长的空间和最中心的空间，并在其中插入换行符。

我怎样才能在 PHP 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T15:47:05.760

您需要使用该`wordwrap`功能。[请参阅php.net](http://us2.php.net/manual/en/function.wordwrap.php)上的文档

```
$longString = "This is a really really long string that exceeds 20 characters";
$longString = wordwrap($longString, 20, "\n"); // or use <br/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T16:01:15.217

```
$arr = array();
$arr = explode(" ", $string);
$display_string = "";

foreach($arr AS $word){
 $length = strlen($display_string) + strlen($word);
 if($length >= 20){
  $display_string .= "<br />".$word." ";
 }else{
  $display_string .= $word." ";
 } 
}
echo $display_string; 
```

# java - 播放框架高延迟

> ID：14815518
> 
> 赞同：3
> 
> 时间：2013-02-11T15:42:00.377
> 
> 标签：java, performance, hibernate, struts2, playframework-2.0

我使用 struts2 创建了一个 Web 应用程序，使用 mysql 进行休眠。我迁移到播放框架，所以现在我有两个应用程序实例，一个是用 struts2 编写的，另一个是用 struts2 编写的。我可以看到玩游戏的性能大幅提升，但是当我使用 JMeter 模拟负载时，struts2 版本的扩展性要好得多，延迟比玩游戏要低。为什么会这样，这是否意味着坚持使用 struts2 更好？webapp（我从本地主机测试，除了模板语言之外，两个应用程序都有相同的代码，struts2 运行在 tomcat7 上，而 play 运行在独立服务器的构建上）

```
 Struts 2 Version

    Start time      Tread Name              Label          time(ms)  Status     Bytes   Latency
1   10:24:49.854    videovixx struts2 1-6   HTTP Request     981     Success    9116    6
2   10:24:49.830    videovixx struts2 1-5   HTTP Request    1101     Success    9116    16
3   10:24:49.780    videovixx struts2 1-3   HTTP Request    1264     Success    9116    2
4   10:24:49.774    videovixx struts2 1-2   HTTP Request    1309     Success    9116    15
5   10:24:49.741    videovixx struts2 1-1   HTTP Request    1509     Success    9116    10
6   10:24:49.868    videovixx struts2 1-7   HTTP Request    1513     Success    9116    43
7   10:24:49.933    videovixx struts2 1-10  HTTP Request    1471     Success    9116    5
8   10:24:50.294    videovixx struts2 1-27  HTTP Request    1156     Success    9116    134
9   10:24:50.037    videovixx struts2 1-15  HTTP Request    1503     Success    9116    68
10  10:24:49.950    videovixx struts2 1-11  HTTP Request    1608     Success    9116    18

 Play Version
    Start time      Tread Name              Label        time(ms)  Status     Bytes   Latency
1   10:24:49.809    videovixx play 2-1  HTTP Request     881    Success     13016   881
2   10:24:49.803    videovixx play 2-2  HTTP Request    1562    Success     13016   1562
3   10:24:49.839    videovixx play 2-3  HTTP Request    2146    Success     13016   2146
4   10:24:49.920    videovixx play 2-7  HTTP Request    2065    Success     13016   2065
5   10:24:50.080    videovixx play 2-15 HTTP Request    1905    Success     13016   1905
6   10:24:50.242    videovixx play 2-23 HTTP Request    1743    Success     13016   1743
7   10:24:50.493    videovixx play 2-36 HTTP Request    1492    Success      13016  1492
8   10:24:50.570    videovixx play 2-39 HTTP Request    1619    Success      13016  1619
9   10:24:50.646    videovixx play 2-43 HTTP Request    1571    Success      13016  1571

  13016 2105 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-11T22:37:08.280

您需要根据应用程序的配置文件配置线程模型。更具体地说，您的应用程序似乎高度同步。该[文档](http://www.playframework.com/documentation/2.1.1/ThreadPools)建议以下配置：

```
play {
  akka {
    event-handlers = ["akka.event.slf4j.Slf4jEventHandler"]
    loglevel = WARNING
    actor {
      default-dispatcher = {
        fork-join-executor {
          parallelism-min = 300
          parallelism-max = 300
        }
      }
    }
  }
} 
```

# python - Python 和类属性声明

> ID：14815523
> 
> 赞同：1
> 
> 时间：2013-02-11T15:42:13.217
> 
> 标签：python, class, attributes, pep8

有人告诉我，在类范围内声明动态属性不是“Python 方式”，但我不明白为什么。有人可以向我解释一下，或者向我指出一些文档，说明为什么这是一件坏事吗？老实说，我认为这是一个很好的做法，如果对自我记录代码有任何帮助的话。

例子：

```
class ClassA(object):
    user_data = {}

    def set_user(self):
        self.user_data['username'] = 'fred' 
```

我可以看到不使用它的唯一原因是属性是静态的（因此可能会产生误导）..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T16:10:30.773

在评论中，您说：“每个实例都有不同的可变 user_data。” 不，它不会。ClassA 的每个实例都将共享相同的 user_data 字典：

```
>>> class ClassA(object):
...     user_data = {}
...     def set_user(self, name):
...         self.user_data['name'] = name
...
>>> a1 = ClassA()
>>> a1.set_user('fred')
>>> a1.user_data
{'name': 'fred'}
>>>
>>> a2 = ClassA()
>>> a2.user_data
{'name': 'fred'}
>>> a2.set_user('barney')
>>> a2.user_data
{'name': 'barney'}
>>>
>>> a1.user_data
{'name': 'barney'}
>>>
>>> a1.user_data is a2.user_data
True 
```

这与某物是否是 Pythonic 无关。这是编写按照您的意愿运行的代码的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T15:51:52.250

使用如图所示的代码，`user_data`它不是*动态属性*（它不是“动态”在类实例上创建的）。这是一个*类属性*，我相信它更像是其他一些语言中的“静态”属性。这意味着它是在读取和初始化类时在类上声明的属性。这具有所有实例能够通过`self.whatever`.

换句话说：

```
class Foo(object):
    whatever = {}
    def __init__(self):
        print self.whatever is Foo.whatever 
```

将始终打印`True`. 当然，您可以通过向`whatever`实例添加不同的属性来更改此行为：

```
class Bar(object):
     whatever = {}
     def __init__(self):
         self.whatever = {}
         print self.whatever is Bar.whatever 
```

使用`Foo`，如果我添加 items: `foo_instance.whatever['foo'] = 'bar'`，那么`foo_instance2`也会看到这种变化，而使用`Bar`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T15:53:20.260

这是使用类和实例成员的示例：

```
class Test(object):
    instances = {}

    def __init__(self, name):

        self.instance = self
        self.instances[name] = self

    # rest of class

a = Test('alfred')
b = Test('banana')

# use a to get a
print a.instance

>>> 
<__main__.Test object at 0x0000000002BEBC50>

# get all instances of the Test class
print Test.instances

>>>
{'banana': <__main__.Test object at 0x0000000002BEBDA0>, 'alfred': <__main__.Test object at 0x0000000002BEBC50>} 
```

由于这些只是示例，它们并不反映任何具体的内容，只是可以做什么。

声明类成员在某些情况下很有用，例如上面如果您希望能够记录和控制某个类的所有类型。但是您应该始终了解您在做什么，并且不要认为这`instance`对每个实例都是本地的。

至于“最佳实践”和“最pythonic方式”的问题。仅此而已，意见。有些事情会被一些人讨厌，而不是其他人。你应该以一种让你感到舒适、适合你的方式写作，只要你符合你所在的任何劳动力所规定的法规和标准。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T16:47:43.023

需要明确的是，类属性可能与您预期的不同。

例子：

```
class Example(object):
    class_data={}
    def __init__(self,val):
        self.val=val
    def __repr__(self):
        return str(self.val) 

>>> Example.class_data['one']=1    # assign value to the empty dict in class Example
>>> e1,e2=Example(1), Example(2)   # INSTANCES-self.val different for each instance
>>> print e1,e2,e1.class_data,e2.class_data
1 2 {'one': 1} {'one': 1}
      ^^^^^      ^^^^^         # SAME class_data in two different instances 
```

请注意， Example 的*每个*实例都具有相同的 class_data 可变副本。它不受保护，因为静态类变量在 Java 或 C++ 中。

事实上，您可以随时随意更改、添加或删除这些类属性：

```
>>> Example.class_data='old dict is gone gone gone...'
>>> print e1,e2,e1.class_data,e2.class_data  
1 2 old dict is gone gone gone... old dict is gone gone gone... 
```

你可能会看到这样的代码：

```
class Example(object):
    class_constants=('fee','fie','foe')
    # ... 
```

由于以下原因，它表现得像常数（在另一种语言中），这是一种虚假的安慰：

```
>>> e1=Example(1)
>>> e1.class_constants[4]='fum'
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: 'tuple' object does not support item assignment 
```

但这是一种虚假的安慰，因为一段代码总是可以做到这一点：

```
>>> Example.class_constants=('another','tuple','of','constants') 
```

有些人对类属性的问题是他们没有做预期的事情——就好像它是一个常数一样。它们不是常数。类属性更改类的所有现有和未来实例的数据。有时有用，但可能令人困惑。

实际上，类属性是否可变并不重要。如您所见——您可以随时更改属性。

# asp.net-ajax - 如何将元素转换为 ms ajax 对象？

> ID：14815524
> 
> 赞同：0
> 
> 时间：2013-02-11T15:42:13.133
> 
> 标签：asp.net-ajax

我有一个元素

```
$get(myId).children[0] 
```

我想把那个元素变成一个 ms ajax 对象但是

```
$get($get(myId).children[0]) 
```

不工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:04:18.027

$get 只找到一个元素。如果您有一个表示 AJAX 控件的元素，请使用 $find，它将控件的 ID 作为参数，如下所示：

```
$find("MyControlClientID") 
```

所以你想做：

```
$find($get(myId).children[0].ClientID) 
```

如果第一个子元素是 AJAX 控件 UI 元素。

# ios - 读取制表符分隔的文本文件

> ID：14815526
> 
> 赞同：0
> 
> 时间：2013-02-11T15:42:16.520
> 
> 标签：ios, objective-c, cocoa

我正在尝试将由股票代码和关联公司组成的文本文件读入字典，文本文件中的每一行都有一个符号和公司，如

应用苹果

GOOG-Q 谷歌

最终，我试图有一个搜索栏，根据股票代码查找相应的公司（反之亦然）。

那么，解决这个问题的最佳方法是什么？将整个文件作为字符串读取，然后尝试使用 fileString componentsSeparatedByString:@"\n" 分隔项目，还是有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:33:27.837

[NSScanner](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSScanner_Class/Reference/Reference.html)通常是解析数据的好方法。

您可能需要注意[换行符](http://digital.ni.com/public.nsf/allkb/5A5A050A3019A573862575F30061D49B)，具体取决于文件的来源，它可以是换行符 (\n)、回车符 (\r) 或两个字符 (\r\n) .

使用 NSScanner 可以让您轻松扫描行，同时忽略实际的行尾字符（请参阅 [ [NSCharacterSet](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSCharacterSet_Class/Reference/Reference.html) [newLineCharacterSet](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSCharacterSet_Class/Reference/Reference.html#//apple_ref/occ/clm/NSCharacterSet/newlineCharacterSet) ]）。

# c# - 如何让我的应用程序等待我的 UI 刷新？

> ID：14815527
> 
> 赞同：0
> 
> 时间：2013-02-11T15:42:19.473
> 
> 标签：c#, wpf

在不使用额外线程的情况下，我只想在读取或写入大量数据时显示“正在加载”标签或类似于用户的内容。**但是，如果我在调用 IO 方法之前**尝试修改任何 UI 元素，应用程序会冻结一段时间，然后在所有工作完成**后显示“正在加载”消息。**这显然没有帮助。在调用 IO 方法**之前**，如何确保所有 UI 更改都已应用且可见？

```
 DataSet ds = STT_Import.ImportExcelToDataSet(filePath);

        bool result = false;

        if (ds != null)
        {
            int cellCount = ds.GetTotalCellCount();

            if (Popup.ShowMessage(string.Format("Your file contains {0} cells. Inserting data will take approximately {1} seconds. Do you want to continue?",
                cellCount, CalculateTime(cellCount)), "Confirm", MessageType.Confirm) == MessageBoxResult.Yes)
            {
                // Tell user the application is working:
                StatusLabel.Content = "Writing to database...";

                // Do actual work after user has been notified:
                result = DB.StoreItems(_currentType, ds);
            }
        } 
```

我试图寻找答案，但找不到任何可以回答我的具体问题的东西，所以如果之前有人问过这个问题，我很抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:51:29.263

使用 WPF 时，您可以使用[Dispatcher在不同](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.aspx)[DispatcherPriorities](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcherpriority.aspx)的 UI 线程上对命令进行排队

这将允许您在或队列中的所有内容发生*后，在 UI 线程上对长时间运行的进程进行排队。*`DispatcherPriority.Render``DispatcherPriority.Loaded`

例如，您的代码可能如下所示：

```
// Tell user the application is working:
StatusLabel.Content = "Writing to database...";

// Do actual work after user has been notified:
Dispatcher.BeginInvoke(DispatcherPriority.Input,
    new Action(delegate() { 
        var result = DB.StoreItems(_currentType, ds);     // Do Work
        if (result)
            StatusLabel.Content = "Finished";
        else
            StatusLabel.Content = "An error has occured";
     })); 
```

应该注意的是，它通常被认为是在某些东西运行时锁定应用程序的糟糕设计。

更好的解决方案是在后台线程上运行长时间运行的进程，并在运行时简单地禁用您的应用程序表单。有很多方法可以做到这一点，但我个人更喜欢使用[任务并行库](http://msdn.microsoft.com/en-us/library/dd460717.aspx)，因为它很简单。

例如，您使用后台线程的代码如下所示：

```
using System.Threading.Tasks;

...

// Tell user the application is working:
StatusLabel.Content = "Writing to database...";
MyWindow.IsEnabled = False;

// Do actual work after user has been notified:
Task.Factory.StartNew(() => DB.StoreItems(_currentType, ds))
    // This runs after background thread is finished executing
    .ContinueWith((e) =>
    {
        var isSuccessful = e.Result;

        if (isSuccessful)
            StatusLabel.Content = "Finished";
        else
            StatusLabel.Content = "An error has occured";

        MyWindow.Enabled = true;
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T17:25:51.403

如果您不希望 UI 具有响应性，我会使用忙碌指示器。
有更漂亮的光标 - 这是一个内部应用程序。

```
using (new WaitCursor())
{
    // very long task
    Search.ExecuteSearch(enumSrchType.NextPage);
}

public class WaitCursor : IDisposable
{
    private Cursor _previousCursor;

    public WaitCursor()
    {
        _previousCursor = Mouse.OverrideCursor;

        Mouse.OverrideCursor = Cursors.Wait;
    }

    #region IDisposable Members

    public void Dispose()
    {
        Mouse.OverrideCursor = _previousCursor;
    }

    #endregion
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T15:46:16.887

您使用的方法不是有效的方法，所以我建议使用异步编程或线程

异步编程：

Visual Studio 2012 引入了一种简化的方法，即异步编程，它利用 .NET Framework 4.5 和 Windows 运行时中的异步支持。编译器完成了开发人员过去常做的艰巨工作，并且您的应用程序保留了类似于同步代码的逻辑结构。因此，您只需付出很少的努力即可获得异步编程的所有优势。支持 .Net framework 4.5
它将节省您实施 System .Threading 的时间，并且对于与您必须等待某些操作的任务相同的任务非常有效

[http://msdn.microsoft.com/en-ca/library/vstudio/hh191443.aspx](http://msdn.microsoft.com/en-ca/library/vstudio/hh191443.aspx)
[http://go.microsoft.com/fwlink/?LinkID=261549](http://go.microsoft.com/fwlink/?LinkID=261549)

或者

穿线：

线程的优点是能够创建使用多个执行线程的应用程序。例如，一个进程可以有一个管理与用户交互的用户界面线程和在用户界面线程等待用户输入时执行其他任务的工作线程。支持 .Net fremework 4.0 或更早版本

[http://msdn.microsoft.com/en-us/library/aa645740%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/aa645740%28v=vs.71%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T15:46:16.970

您正试图以错误的方式解决问题。您应该在这里做的是在工作线程中运行耗时的任务；这样，您的 UI 将保持响应*，并且*当前问题将变得没有意义。

有几种方法可以将任务卸载到工作线程；其中最方便的是[使用线程池](http://msdn.microsoft.com/en-us/library/ms973903.aspx)和[异步编程](http://msdn.microsoft.com/en-us/library/vstudio/hh191443.aspx)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T15:56:50.087

除非您的数据库提供您正在使用的方法的异步版本，否则在不使用额外线程的情况下保持您的 UI 响应是不可能的。如果它*确实*提供了该方法的异步版本，那么您只需要使用它。（请记住，异步并不*意味着*它正在使用任何其他线程。完全有可能创建一个从不使用额外线程的异步方法，而这*正是*大多数网络 IO 方法所做的。）如何去做的细节这取决于您使用的数据库框架的类型以及您使用它的方式。

如果您的数据库框架不提供异步方法，那么保持 UI 响应的唯一方法是在非 UI 线程中执行长时间运行的操作。

# html - 垂直居中左浮动 div wrt 同级表元素

> ID：14815533
> 
> 赞同：0
> 
> 时间：2013-02-11T15:42:42.593
> 
> 标签：html, css

我有类似下面的东西。

```
<div class='sideTitle'>SideTitle</div>
<table><tr><td>r1c1</td><td>r1c2</td></tr><tr><td>r2c1</td><td>r2c2</td></tr></table> 
```

我使用以下 CSS 将侧标题浮动到左侧。

```
.sideTitle { float: left; } 
```

这是因为侧标题根据需要浮动到表格的左侧。但是，我希望侧标题在表格中垂直居中。

我在这里查看了一些其他答案，这些答案似乎解决了非常相似的问题（关于垂直居中左浮动 div 的很多结果），但我似乎无法让它们适用于这种情况。

有任何想法吗？这是说明问题的完整示例。

```
 <html>
   <head>
      <style type='text/css'>       
         .sideTitle {
            float: left;
         }         
      </style>
   </head>
   <body>
      <div class='sideTitle'>SideTitle</div>
      <table><tr><td>r1c1</td><td>r1c2</td></tr><tr><td>r2c1</td><td>r2c2</td></tr></table>
   </body>
</html> 
```

这是上面在浏览器中呈现时的样子。

![样本结果](../Images/9b6ee8d4d39a302a83c1938ebbd2aa9f.png)

这就是我想要它做的事情。

![预期结果](../Images/dadc29a5bd1452ec88f0076b8a570215.png)

* * *

**编辑：cimmanon 和@RaphaelRafatpanah 的解决方案都是正确的；我标记了 Raphael's，因为它稍微更通用（不要求它们在 HTML 中立即彼此相邻），但它们都很棒！阻止任何一个工作的问题是我需要添加以下内容，以便 IE 正确呈现它。**

```
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T15:52:39.190

在内联元素上调整对齐是最简单的。

[http://jsfiddle.net/VBfDF/](http://jsfiddle.net/VBfDF/)

```
.sideTitle {
    display: inline-block;
}

.sideTitle + table {
    display: inline-table;
    vertical-align: middle;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T15:51:32.203

当我想要类似的东西时，我使用`display: inline-block`and`vertical-align: middle`两个元素。不确定它将如何与表一起使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T15:55:35.360

这是一种“老派”建议，您可以将“标题”放在**标题**中并显示表格 >< 标题左侧

```
<table width="100%" border="1">
  <caption align="left">asdf asdf My savings</caption>
  <tr>
    <th>Month</th>
    <th>Savings</th>
  </tr>
  <tr>
    <td>January</td>
    <td>$100</td>
  </tr>
  <tr>
    <td>January</td>
    <td>$100</td>
  </tr>
  <tr>
    <td>January</td>
    <td>$100</td>
  </tr>
  <tr>
    <td>January</td>
    <td>$100</td>
  </tr>
</table> 
```

css

```
table caption {vertical-align:middle} 
```

**这不是最好的解决方案**，因为

*   Internet Explorer 8 支持“left”、“right”、“top”和“bottom”值
*   Internet Explorer 9 支持“top”和“bottom”值
*   Firefox 支持“left”、“right”、“top”和“bottom”值
*   Opera 支持“left”、“right”、“top”和“bottom”值
*   Chrome 支持“top”和“bottom”值
*   Safari 支持“顶部”和“底部”值

jsfiddle [http://jsfiddle.net/Jxy4D/](http://jsfiddle.net/Jxy4D/)

为了获得更简单的解决方案，只需在表格左侧添加另一个 TD，并使用它有一个“标题”，将其内容垂直对齐到中间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T16:03:16.640

现在 cimanon 所做的很棒，为此我为他 +1，但 + 运算符所做的是选择紧接在 .sideTitle 类之前的所有表。请注意，该表不是具有 .sideTitle 类的 div 的子级，因此以下代码将不起作用：

```
.sideTitle > table {
display: inline-table;
vertical-align: middle;
} 
```

但是，在您的实际代码中，

```
.sideTitle + table 
```

如果 div class="sideTitle" 和表格之间有任何对象，则可能不是最佳选择器。因此，我为他的代码创建了一个更新，如果您确实发现自己处于这种困境中，它将起作用。

这是适合您的 jFiddle：http: [//jsfiddle.net/persianturtle/VBfDF/2/](http://jsfiddle.net/persianturtle/VBfDF/2/)

# qml - 动态更改用作 qml 项目基础的模型

> ID：14815534
> 
> 赞同：0
> 
> 时间：2013-02-11T15:42:45.290
> 
> 标签：qml, qt-quick

我开始使用 qtquick 1.1。我设计了一个主要由路径视图组成的组件。

```
Rectangle {
    id: pathViewElement

    PathView {
        id: pathView
        pathItemCount: 4
        preferredHighlightBegin: 0.5
        preferredHighlightEnd: 0.5
        highlightRangeMode: PathView.StrictlyEnforceRange
        model: myModel
        delegate: Item {
            width: valueText.width
            height: 50
            scale: 1.0-2*Math.abs(pathViewElement.width/2-(x+width/2)) / pathViewElement.width
            opacity: scale
            smooth: true
            Text {
                id: valueText
                anchors.centerIn: parent
                text: myModel.value
                font.pointSize: 35
            }
        }
        path: Path {
            startX: 0; startY: 25
            PathLine { x: pathViewElement.width; y: 25;}
        }
    }
} 
```

此 PathView 使用名为 myModel 的模型。它可能位于任何其他文件中。

现在的问题如下：我正在使用相同的组件来更改不同的值。这些值中的每一个都与另一个 QML ListModel 一起提供。那么如何动态更改 PathView (myModel) 中使用的模型呢？

此外，在创建 PathView 时，我可以使用静态设置模型

```
model: MyListModel{} 
```

其中 MyListModel 是一个仅包含 ListModel {} 声明的 qmlFile。但是当我从第三个文件中动态创建 PathView 时，比如 MyApplication.qml 我无法设置 pathViewElement.model: MyListModel{} 因为编译器需要一个“;” 代替 {}。为什么是这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T13:21:29.250

> 那么如何动态更改 PathView (myModel) 中使用的模型呢？

在发生相应事件时，您可以直接更改为您的视图分配的模型。

例如。假设您希望通过单击某个鼠标按钮来完成此更改：

```
onClicked:
{
   pathView.model = myNewModel
} 
```

在这里，myNewModel 是要替换的新模型的 id。

> 但是当我从第三个文件中动态创建 PathView 时，比如 MyApplication.qml 我无法设置 pathViewElement.model: MyListModel{} 因为编译器需要一个“;” 代替 {}。为什么是这样？

你能更清楚地说明这部分吗？

# php - 在 mysql 列中使用 UNIX 纪元？

> ID：14815539
> 
> 赞同：1
> 
> 时间：2013-02-11T15:43:02.260
> 
> 标签：php, mysql, sql, unix

我的一个表中的一列是 DATE，目前它会自动填充行创建时间的时间戳。时间戳看起来像 2013-02-10 19:56:12。无论如何，我可以自动将它与 unix 时代打上时间戳吗？我希望这是有道理的。说到mysql，我还是个初学者。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T15:44:32.117

如果要将（*选择*）*投影*到格式中，请使用*`TIMESTAMP``UNIX``UNIX_TIMESTAMP(date)`*

 *```
SELECT UNIX_TIMESTAMP(date)
FROM tableName 
```

*   [UNIX_TIMESTAMP() ^(MySQL 文档)](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_unix-timestamp)

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/f5683/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T15:44:38.910

检索数据时可以使用[unix_timestamp函数：](http://www.epochconverter.com/programming/mysql-from-unixtime.php)

```
SELECT unix_timestamp(timestampColumn) 
```*

# facebook-social-plugins - Intranet 网站上的推荐

> ID：14815543
> 
> 赞同：-1
> 
> 时间：2013-02-11T15:43:32.883
> 
> 标签：facebook-social-plugins, intranet

我正在尝试在公司内部网站上使用 FB 社交插件。几乎没问题，显示控件，我可以评论，喜欢或推荐东西。评论、喜欢和推荐在 Intranet 站点上是持久的。

但是，我的建议和评论都不会显示在任何 Facebook 页面上。它们不在我的时间线上，也没有出现在 FB 页面上。

问题可能是 FB 评论框下的警告：

```
"Warning: http://greenhouse.intranet.mycompany/ is unreachable." 
```

我怎样才能让它像每个新闻门户一样工作，以便这些操作会显示在用户的时间线和 FB 主页上？

PS/更新：我知道互联网和公司内部网之间的区别，我也知道公司内部网不能从外部访问。你不必解释。

PS.2：来吧，伙计们。这只是逻辑。如果facebook不拒绝在内网页面的点赞和评论上浪费存储空间，那他们为什么不发布呢？也许有评论说此链接可能不适用于所有人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T15:51:00.753

您所指的这些网站可从 Internet 访问。您的 Intranet（如名称和错误消息所示）不是。

Facebook 无法将任何内容链接到其他用户无法访问的时间线。

编辑（从评论中添加解决方法）：

您可以尝试以下解决方法：

建立一个公共活动网站，为每个请求（无论是什么 url 参数）提供基本主页，其中包含一般信息和一些链接。主页包含一个小 javascript，用于检查您的 Intranet 页面是否可从客户端获得。

*   **是：**根据您的 url 参数将浏览器转发到 Intranet 页面。
*   **否：**用户在公共页面上看到有关您的广告系列的一些基本信息。

这样，您至少可以向 facebook 的服务器提供一些有用的信息（而不是 404），并且链接应该可以工作。

# selenium - HtmlUnitDriver 和 MouseOver

> ID：14815549
> 
> 赞同：0
> 
> 时间：2013-02-11T15:44:04.563
> 
> 标签：selenium, htmlunit, htmlunit-driver

我的问题是“您只能与当前可见的元素进行交互”错误，在这里更好地描述了[Actions 和 htmlunitdriver -](https://stackoverflow.com/questions/14750790/actions-and-htmlunitdriver-speed-issue) 等待不能解决速度问题。我突然想到，由于 htmlunitdriver 进入不可见的浏览器，我怎么能确定 .perform 操作在这里做正确的事情？有没有办法断言这些事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-27T05:47:45.267

尝试在打开 URL 之前打印 pageSource() 您的测试可能是您无法访问它自己的 URL

```
 System.out.println(driver.getPageSource());
  driver.get(""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-07T17:33:02.463

您可以使用 fiddler 来查看页面。

# ios - 从另一个视图控制器访问由一个视图控制器创建的对象

> ID：14815552
> 
> 赞同：-2
> 
> 时间：2013-02-11T15:44:19.137
> 
> 标签：ios, cocoa-touch, uiviewcontroller

有没有办法在一个视图控制器中为其创建`NSObject`和设置值，并通过查找它的现有实例将它们取回另一个视图控制器`NSObject`？

就像 AppDelegate 一样`sharedInstance`，您可以从任何地方访问它，从而从任何地方将值放入其中？

我创建了一个视图控制器来实例化我的模型对象并填充它的属性。如何从另一个视图控制器访问模型对象的该实例？

我不是在问如何在调用另一个视图控制器的视图控制器中传递数据。我知道该怎么做。我在问如何从不同的、不相关的和分层独立的视图控制器中为模型对象设置值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:08:45.833

如果我正确理解您的问题，您正在寻找的是[Key Value Observation](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html)。它通常用于将控制器层与模型层解耦（如在 MVC 中，模型视图控制器）。

# javascript - 从数组中添加/删除项目的好JavaScript？

> ID：14815560
> 
> 赞同：6
> 
> 时间：2013-02-11T15:44:37.103
> 
> 标签：javascript, arrays

伙计们！今天我创建了这个脚本，它具有以下功能：

*   将新项目添加到数组
*   列出数组中的所有项目
*   从数组中删除一个项目

有两个功能：

*   addToFood() - 将输入值添加到数组并更新 div 的 innerHTML
*   removeRecord(i) - 从数组中删除一条记录并更新 div 的 innerHTML

[该代码包括 3 个 for 循环，您可以在 - http://jsfiddle.net/menian/3b4qp/1/](http://jsfiddle.net/menian/3b4qp/1/)看到它

我的主人告诉我，这 3 个 for 循环使解决方案变得繁重。有没有更好的方法来做同样的事情？减少循环并尝试使用拼接会更好吗？提前致谢。

**HTML**

```
<!-- we add to our foodList from the value of the following input -->    
<input type="text" value="food" id="addFood" />

<!-- we call addToFood(); through the following button  -->    
<input type="submit" value="Add more to food" onClick="addToFood();">

<!-- The list of food is displayed in the following div -->    
<div id="foods"></div> 
```

**JavaScript**

```
var foodList = [];

function addToFood () {
    var addFood = document.getElementById('addFood').value;
    foodList.push(addFood);

    for (i = 0; i < foodList.length; i++)   {
        var newFood = "<a href='#' onClick='removeRecord(" + i + ");'>X</a> " + foodList[i] + " <br>";
    };
    document.getElementById('foods').innerHTML += newFood;
}

function removeRecord (i) {

    // define variable j with equal to the number we got from removeRecord
    var j = i;

    // define and create a new temporary array
    var tempList = [];

    // empty newFood
    // at the end of the function we "refill" it with the new content
    var newFood = "";
    for (var i = 0; i < foodList.length; i++) {
        if(i != j) {

    // we add all records except the one == to j to the new array
    // the record eual to j is the one we've clicked on X to remove
            tempList.push(foodList[i]);
        } 
    };

    // make redefine foodList by making it equal to the tempList array
    // it should be smaller with one record
    foodList = tempList;

    // re-display the records from foodList the same way we did it in addToFood()
    for (var i = 0; i < foodList.length; i++) {
        newFood += "<a href='#' onClick='removeRecord(" + i + ");'>X</a> " + foodList[i] + " <br>";
    };
    document.getElementById('foods').innerHTML = newFood;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T15:54:04.267

你应该使用`array.splice(position,nbItems)`

```
function removeRecord (i) {
    foodList.splice(i, 1); // remove element at position i
    var newFood = "";
    for (var i = 0; i < foodList.length; i++) {
        newFood += "<a href='#' onClick='removeRecord(" + i + ");'>X</a> "
            + foodList[i] + " <br>";
    };
    document.getElementById('foods').innerHTML = newFood;
} 
```

[http://jsfiddle.net/3b4qp/5/](http://jsfiddle.net/3b4qp/5/)

现在使用 JQuery：

```
$(function(){
    $(document).on('click','input[type=submit]',function(){
        $('#foods')
           .append('<div><a href="#" class="item">X</a> ' 
                + $('#addFood').val() + '</div>');
    });

    $(document).on('click','.item',function(){
        $(this).parent().remove();
    });
}); 
```

[http://jsfiddle.net/jfWa3/](http://jsfiddle.net/jfWa3/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T15:59:05.000

你的问题不是数组，你的问题是这段代码：

```
node.innerHTML += newFood; 
```

这段代码非常非常**非常**慢。它将遍历所有现有的 DOM 节点，从它们创建字符串，将这些字符串连接成一个长字符串，附加一个新字符串，将结果解析为新的 DOM 节点树。

我建议使用像 jQuery 这样的框架，它具有将 HTML 片段附加到现有 DOM 节点的方法：

```
var parent = $('#foods');
...
for (var i = 0; i < foodList.length; i++) {
    parent.append( "<a href='#' onClick='removeReco..." ); 
```

这将只解析 HTML 片段一次。

如果您确实必须手动执行此操作，则将所有 HTML 收集到一个本地字符串变量中（如 JohnJohnGa 在他的回答中所建议的那样），然后分配`innerHTML`一次。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T16:38:35.857

这里有一些技巧，至少可以让你的代码更便携（不知道它是否会更好的性能，但应该是，因为 DOM 操作更便宜）

## 尖端

1.  首先将您的事件句柄与 HTML 分开
2.  将“新食物”作为函数参数传递
3.  使用 ID 将数组元素绑定到 DOM
4.  而不是在发生变化时重新渲染所有内容（使用列表中的 innerHTML），只需更改相关位

## 好处：

1.  您实际上只循环一次（从数组中删除元素时）。
2.  每次发生更改时，您都不会重新渲染列表，只需单击元素
3.  额外的好处：它更便携。
4.  应该更快

## 示例代码：

[**小提琴**](http://jsfiddle.net/tivie/WX7ZW/4/)

### HTML

```
<div id="eventBinder">
    <!-- we add to our foodList from the value of the following input -->
    <input id="addFood" type="text" value="food" />
    <!-- we call addToFood(); through the following button -->
    <button id="addFoodBtn" value="Add more to food">Add Food</button>
    <!-- The list of food is displayed in the following div
    -->
    <div id="foods"></div>
</div> 
```

### JS

```
// FoodList Class
var FoodList = function (selectorID) {
    return {
        foodArray: [],
        listEl: document.getElementById(selectorID),
        idCnt: 0,
        add: function (newFood) {
            var id = 'myfood-' + this.idCnt;
            this.foodArray.push({
                id: id,
                food: newFood
            });
            var foodDom = document.createElement('div'),
                foodText = document.createTextNode(newFood);
            foodDom.setAttribute('id', id);
            foodDom.setAttribute('class', 'aFood');
            foodDom.appendChild(foodText);
            this.listEl.appendChild(foodDom);
            ++this.idCnt;
        },
        remove: function (foodID) {
            for (var f in this.foodArray) {
                if (this.foodArray[f].id === foodID) {
                    delete this.foodArray[f];
                    var delFood = document.getElementById(foodID);
                    this.listEl.removeChild(delFood);
                }
            }
        }
    };
};

//Actual app
window.myFoodList = new FoodList('foods');

document.getElementById('eventBinder').addEventListener('click', function (e) {
    if (e.target.id === 'addFoodBtn') {
        var food = document.getElementById('addFood').value;
        window.myFoodList.add(food);
    } else if (e.target.className === 'aFood') {
        window.myFoodList.remove(e.target.id);
    }
}, false); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T15:58:57.160

这是另一个建议：

```
function remove(arr, index) {
  if (index >= arr.lenght) { return undefined; }
  if (index == 0) {
    arr.shift();
    return arr;
  }

  if (index == arr.length - 1) {
    arr.pop();
    return arr;
  }
  var newarray = arr.splice(0, index);
  return newarray.concat(arr.splice(1,arr.length))
} 
```

# c# - 我可以让我的程序从另一个程序中显示出来吗

> ID：14815562
> 
> 赞同：0
> 
> 时间：2013-02-11T15:44:41.250
> 
> 标签：c#, shared-libraries, mutex

这可能是一个糟糕的标题，但我不知道如何表达它。所以这就是我所拥有的。

我有一个充当键盘钩子的程序。它捕获 F13-F24，以便人们可以分配这些键来执行一些不同的任务。

它可以打开的程序之一是我们自己制作的屏幕键盘。

这两个程序我都有源代码，但我没有制作任何一个，而是从其他人那里继承了它们。当我审查代码以修复其中的一些错误时，我注意到第一个程序以一种奇怪的方式调用第二个程序。一种我不喜欢的方式。

```
 IntPtr hWnd = new IntPtr();
        currentoggle = true;
        currentmultiple = false;

        System.Diagnostics.Process[] p = System.Diagnostics.Process.GetProcessesByName("CustomOsk");
        if (p.Length > 0)
        {
            Globals.trace.TraceInformation("OSK loaded");

            string window = "";
            switch (currentparms.ToLower()[0])
            {
                case 's':
                    window = "Custom OSK AN";
                    break;
                case 'e':
                    window = "Custom OSK EK";
                    break;
                case 'n':
                    window = "Custom OSK NP";
                    break;
                default:
                    window = "";
                    break;
            }

            if (!string.IsNullOrEmpty(window))
            {
                hWnd = User32.FindWindow(null, window);
                if (hWnd != IntPtr.Zero)
                {
                    User32.PostMessage(hWnd, WM_TOGGLEONOFF, IntPtr.Zero, IntPtr.Zero);
                    Globals.trace.TraceInformation("ProcessKeyboard()-");
                    return true;
                }
            }
        }
        Globals.trace.TraceInformation("OSK Start");
        System.Diagnostics.Process.Start(System.Windows.Forms.Application.StartupPath + "\\CustomOsk.exe", currentparms);
        Globals.trace.TraceInformation("ProcessKeyboard()-"); 
```

我只是不认为我应该查看我的所有进程来查看当我拥有源代码时我们的自定义 OSK 是否已打开。我认为我也应该能够以某种形式直接拨打电话。所以我想，**如果**我可以使用 Mutex 语句，也许我可以尝试找到那个 Mutex 指针，然后向该指针发送一条消息以更改我的自定义 OSK 的状态......但后来我想可能如果我想在将来使任何一个程序变得更复杂，那么效果就不太好了。

在这一点上，我认为最好四处询问并询问什么是一个好的解决方案？

我的另一个想法是，将 OSK 变成一个库会很愚蠢，然后我可以在我的键盘挂钩程序中引用该库。为了保留它以便人们可以将屏幕上的程序作为一个单独的程序打开，我可以制作另一个非常简单的程序来再次调用这个库。这对我来说似乎是最好的，但我想知道是否有针对我已有的解决方案的不同解决方案。你的想法

**为明确问题而进行了编辑**

# android - 强制为所有 android ddevices 显示一个软菜单

> ID：14815563
> 
> 赞同：0
> 
> 时间：2013-02-11T15:44:43.763
> 
> 标签：android, actionbarsherlock, optionmenu

我正在使用 ActionBarSherloc 并且对于具有物理菜单的手机，没有显示点软菜单图标这是像 s3 这样的手机的场景，但我需要了解三星 Nexus 的行为并且总是在右上角有菜单屏幕一角。这是我使用的代码：

```
com.actionbarsherlock.view.MenuInflater inflater = getSupportMenuInflater();
inflater.inflate(R.menu.main_menu, menu); 
```

但是在 S3 上，我没有在屏幕上显示菜单，我需要按下物理菜单按钮才能打开选项菜单，这种行为可能会让用户感到困惑。我也尝试过类似的东西

```
<menu>
 <item id=item_1 icon="the actual soft menu icon" android:showAsAction="ifRoom">
    <menu>
     <item/>
     <item/>
     <item/>
    </menu>
 <item>
 <item  id=item_2 icon = "other menu item" android:showAsAction="always">       
</menu> 
```

但在这个设计中，似乎总是显示两个图标项并且 `showAsAcrion`没有考虑参数。我需要能够`item_1`根据 ActionBar 的大小显示和隐藏项目。谢谢

# asp.net-mvc - 值不能为 null 或空。参数名称：contentPath

> ID：14815565
> 
> 赞同：10
> 
> 时间：2013-02-11T15:44:51.797
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我在 ASP.NET MVC 4 中有一个多级布局母版页。

我有以下内容：

```
<title>@ViewBag.Title</title> 
```

布局页面的顺序如下：

1.  _Layout.cshtml
2.  _SubLayout.cshtml（基于 _Layout.cshtml）
3.  Index.cshtml（基于_SubLayout.cshtml）

我在索引操作中设置@ViewBag.Title。但是，我得到以下异常：

> 值不能为 null 或空。参数名称：contentPath

* * *

这是我的代码。我只是让 ASP.NET 设计模式书籍的代码适用于 VS 2012 / MVC 4

**_Layout.cshtml**

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>@ViewBag.Title</title>
    <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
    <meta name="viewport" content="width=device-width" />
    <link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />  
</head>
<body>  
<div id="main">    
    <div id="header">        
        <span><a href="@Url.Content("")">
        <img alt="Agatha's Clothing Store" 
             src="@Url.Content("/Content/Images/Structure/lg_logo.png")" 
             border="0" /></a></span>        
    </div>   

    <div id="headerSummary">        
         @RenderSection("headerBasketSummary", required: false)                   
    </div>
    <div class="topBarContainer">          
        <div id="background">         
            <div id="navigation">
                @RenderSection("MenuContent", required: false)
            </div>    
            <div id="content">
               @RenderBody()
            </div>            
            <div style="clear: both;" />
        </div>  
    </div>          
    @Html.Partial("_SiteFooter")
</div>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.0/jquery-ui.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/json2/20121008/json2.js"></script>
<script type="text/javascript" src="@Url.Content("~/Scripts/jquery-jtemplates.js")"></script>
<script type="text/javascript" src="@Url.Content("~/Scripts/agatha-common-scripts.js")"></script>

</body>
</html> 
```

**_ProductCatalogProduct.cshtml**

```
@model BaseProductCatalogPageView
@using Agathas.Storefront.Controllers.ViewModels.ProductCatalog
@using Agathas.Storefront.UI.Web.MVC.Helpers

@{
    Layout = "~/Views/Shared/_Layout.cshtml";                  
}

@if (IsSectionDefined("MenuContent"))
{
    @RenderSection("MenuContent", required: false)
}
else
{
    @Html.Partial("_Categories", ((BaseProductCatalogPageView)Model).Categories)
}
@RenderBody(); 
```

**索引.cshtml**

```
@model HomePageView
@using Agathas.Storefront.Controllers.ViewModels.ProductCatalog
@using Agathas.Storefront.Services.ViewModels
@using Agathas.Storefront.UI.Web.MVC.Helpers 

@{ 
    Layout = "~/Views/Shared/_ProductCatalogLayout.cshtml";
    ViewBag.Title = "Home Page";
}

<img width="559" height="297" 
        src="@Url.Content("~/Content/Images/Products/product-lifestyle.jpg")"
        style="border-width: 0px; padding: 0px; margin: 0px" />
    <div style="clear: both;"></div>
    <h2>Top Products</h2>
    <div id="items" style="border-width: 1px; padding: 0px; margin: 0px">
        <ul class="items-list">
            @foreach (ProductSummaryView product in Model.Products)
            {
                <li class="item-detail">
                <a class="item-productimage-link" href="@Url.Action("Detail", "Product",     new { id = product.Id }, null)">
            <img class="item-productimage" src="@Url.Content("~/Content/Images/Products/" + product.Id.ToString() +".jpg"))" /></a>
            <div class="item-productname">@Html.ActionLink(product.BrandName + " " + product.Name, "Detail", "Product", new { id = product.Id }, null)</div>
            <div class="item-price">@product.Price</div>
            </li>
        }
    </ul>
</div> 
```

非常感谢

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-08-13T11:42:49.107

这段代码抛出异常：`<a href="@Url.Content("")">`. 发生这种情况是因为`Url.Content`方法的 contentPath 参数不能为 null 或为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T09:36:41.480

如果您在子 Razor 视图文件中分配一个值，该值也在父视图文件中设置，但显示在 Layout.cshtml 调用的部分中，则可能会发生这种情况

例如

_Layout.cshtml | （父母）| 父.cshtml | （父母）| Page1.cshtml

在 Page1.cshtml 我做

```
ViewBag.Title= "Value1"; 
```

在 Parent.cshtml 我做同样的事情，但使用 Umbraco 调用：

```
ViewBag.Title = Umbraco.Field("value").ToString(); 
```

解决方法是删除 Parent.cshtml 中的分配。这似乎是一个错误，恐怕这是我找到的唯一修复。希望对你有所帮助...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-17T16:33:07.640

在将其用作图像源之前，您应该检查路径是否不为空或为空

```
 @foreach (var post in Model)
        {

            <div class="col-md-6">
                <div class="product-list post-list">
                    @if (!string.IsNullOrWhiteSpace(post.Photo))
                    {
                        <a href="#" class="product-list-img">
                            <img src="@Url.Content(post.Photo)" alt="">
                        </a>
                    }
</div>
</div> 
```

# openlayers - 使用 OSM 显示 WMS

> ID：14815567
> 
> 赞同：1
> 
> 时间：2013-02-11T15:44:55.223
> 
> 标签：openlayers, openstreetmap, wms

首先，对不起我的英语，但不是我的母语。我想问你是否知道为什么我的地图不起作用。我有两个带有地理服务器的 WMS 和与 OpenLayers 一起工作的 OSM。三张地图正在显示，问题是当 OSM 为“打开”时，另外 2 张在后面并且没有显示。这是我的代码。

```
function init(){ 

        var map = new OpenLayers.Map({
            div: "map",
            projection: new OpenLayers.Projection("EPSG:900913"),
            allOverlays: true,

        });
        //Geoserver WMS
        var towns = new OpenLayers.Layer.WMS( "Towns",
                "http://XXXX/geoserver/isle/wms", {layers: 'isleofwight:Towns', transparent: true}, {visibility: false},{isBaseLayer: false});
        map.addLayer(towns);

        var outline = new OpenLayers.Layer.WMS( "Outline",
            "http://XXXX/geoserver/isle/wms", {layers: 'isleofwight:Outline', transparent: true}, {visibility: false},{isBaseLayer: false});
        map.addLayer(outline);

        var osm = new OpenLayers.Layer.OSM("Open Street Map");
        map.addLayer(osm); 
```

非常感谢

由于我无法回答同样的问题，我编辑说我找到了解决方案，以防万一有人需要它，问题是一层一层地插入，你必须同时添加所有层。

```
map.addLayers([osm, towns, outline]); 
```

现在工作正常：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-04-10T09:44:37.173

归功于 nmtoken 和 NorthLand。

要一次显示多个源，必须将它们提供给同一层并用逗号分隔（不允许使用空格，否则将不起作用）：

```
params:{'LAYERS': 'Test:TestImagery,Test:Vector'}, 
```

一个工作示例是：

```
var sUrl = 'https://ahocevar.com/geoserver/wms';
var oParam = JSON.parse({"LAYERS": "ne:NE1_HR_LC_SR_W_DR,topp:states", "TILED": true});

var wmsLayer = new TileLayer({
    extent: [-13884991, 2870341, -7455066, 6338219],
    source: new TileWms({
      url: sUrl,
      params: oParam,
      serverType: "geoserver",
      transition: 0
    }),
    isBaseLayer: true
  });

this.map.addLayer(wmsLayer); 
```

这将同时在同一图层上渲染 2 个平铺图像。

# c# - 使用会员提供者

> ID：14815569
> 
> 赞同：2
> 
> 时间：2013-02-11T15:45:02.007
> 
> 标签：c#, asp.net, asp.net-membership, membership-provider

我阅读了几页关于“会员”类和“会员提供者”的内容，但我不确定我是否理解。从我读过的所有内容中，我了解到如果我想使用“会员”类，我必须在 web.config 中初始化会员提供程序。在这种情况下，此 Membership 类与提供程序中的“type”属性一起使用“System.Web.Security.SqlMembershipProvider”。我对吗 ？我需要一些关于成员资格类的简单而好的解释，名称“AspNetSqlMembershipProvider”（在成员资格的提供者中）和 System.Web.Security.SqlMembershipProvider。

**（在此示例中，我使用文件“aspnet_regsql.exe”中的数据库）**

例子：

```
 <connectionStrings>
<add name="UsersConnectionString" providerName="System.Data.SqlClient"
  connectionString="Data Source=OWNER;Initial Catalog=LoginsDB;Integrated Security=True" /> 
```

```
 <membership>
  <providers>
    <clear />
    <add name="AspNetSqlMembershipProvider"
      type="System.Web.Security.SqlMembershipProvider"
      connectionStringName="UsersConnectionString"
      enablePasswordRetrieval="false" enablePasswordReset="true"
      requiresQuestionAndAnswer="false" requiresUniqueEmail="false"
      maxInvalidPasswordAttempts="5" minRequiredPasswordLength="3"
      minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10"
      applicationName="/" />
  </providers>
</membership> 
```

**1.Membership 类如何工作并且知道将信息放在数据库中特定字段的位置？**（例如，如果我使用“Membership.CreateUser("admin", "admin")"）

**2.为什么当我在“add name="AspNetSqlMembershipProvider"”中更改名称时，应用程序不想工作。这是一些独特的名字吗？**

**3.什么是“System.Web.Security.SqlMembershipProvider”？这个课程是否与“会员课程”结合使用**

**4.这个由“aspnet_regsql.exe”文件生成的数据库是什么？创建注册页面时更喜欢使用它吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:02:54.860

> 1.Membership 类如何工作并知道将信息放在数据库中特定字段的位置？（例如，如果我使用“Membership.CreateUser("admin", "admin")"）

具体类`System.Web.Security.SqlMembershipProvider`继承自`System.Web.Security.MembershipProvider`覆盖`MembershipProvider`方法和属性，其实现针对特定数据库模式（即 LoginsDB 的模式）

> 2.为什么当我在“add name="AspNetSqlMembershipProvider"”中更改名称时，应用程序不想工作。这是一些独特的名字吗？

大概吧。我必须承认我从未尝试过。我正在使用 CustomMemberShipProvider，但从未注意到名称有问题。

> 3.什么是“System.Web.Security.SqlMembershipProvider”？这个课程是否与“会员课程”结合使用

它是抽象类的实现`System.Web.Security.MembershipProvider`

> 4.这个由“aspnet_regsql.exe”文件生成的数据库是什么？创建注册页面时更喜欢使用它吗？

如果你使用 SqlMemberShipProvider，你真的别无选择。

根据您的框架版本，您还可以查看 SimpleMemberShipProvider：http: [//msdn.microsoft.com/fr-fr/library/webmatrix.webdata.simplemembershipprovider%28v=vs.111%29.aspx](http://msdn.microsoft.com/fr-fr/library/webmatrix.webdata.simplemembershipprovider%28v=vs.111%29.aspx)

# android - 应用程序中的 IndexOutOfBounds 错误

> ID：14815570
> 
> 赞同：-2
> 
> 时间：2013-02-11T15:45:04.623
> 
> 标签：android, exception, indexoutofboundsexception

我不知道如何解决我遇到的错误。我的 logcat 输出如下所示，根据人们的要求，我还包含了`Playing.class`

日志猫：

```
 02-11 23:23:41.212: E/AndroidRuntime(2416): FATAL EXCEPTION: main
 02-11 23:23:41.212: E/AndroidRuntime(2416): java.lang.IndexOutOfBoundsException: Invalid index 50, size is 50
 02-11 23:23:41.212: E/AndroidRuntime(2416):    at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:257)
 02-11 23:23:41.212: E/AndroidRuntime(2416):    at java.util.ArrayList.remove(ArrayList.java:406)
 02-11 23:23:41.212: E/AndroidRuntime(2416):    at com.ithinkdictionary.Playing.question(Playing.java:449)
 02-11 23:23:41.212: E/AndroidRuntime(2416):    at com.ithinkdictionary.Playing.access$3(Playing.java:428)
 02-11 23:23:41.212: E/AndroidRuntime(2416):    at com.ithinkdictionary.Playing$13.onClick(Playing.java:1459)
 02-11 23:23:41.212: E/AndroidRuntime(2416):    at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:159)
 02-11 23:23:41.212: E/AndroidRuntime(2416):    at android.os.Handler.dispatchMessage(Handler.java:99)
 02-11 23:23:41.212: E/AndroidRuntime(2416):    at android.os.Looper.loop(Looper.java:123)
 02-11 23:23:41.212: E/AndroidRuntime(2416):    at android.app.ActivityThread.main(ActivityThread.java:3683)
 02-11 23:23:41.212: E/AndroidRuntime(2416):    at java.lang.reflect.Method.invokeNative(Native Method)
 02-11 23:23:41.212: E/AndroidRuntime(2416):    at java.lang.reflect.Method.invoke(Method.java:507)
 02-11 23:23:41.212: E/AndroidRuntime(2416):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
 02-11 23:23:41.212: E/AndroidRuntime(2416):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
 02-11 23:23:41.212: E/AndroidRuntime(2416):    at dalvik.system.NativeStart.main(Native Method) 
```

演奏类：

```
 public class Playing  extends Activity   {

     public void onClick(View v) {

         if (level <21){

         twist.startAnimation(anim2);
        firstbutton.startAnimation(anim);
        secondbutton.startAnimation(anim);
        thirdbutton.startAnimation(anim);
        fourthbutton.startAnimation(anim);
        twis.start();
        ArrayList<String> ar= new ArrayList<String>();
        String[] twist = {b,c,d,e};
        Random rand = new Random();

        for (String i : twist) {
            ar.add(i);

        }

        for (int z = 0; z < 4; z++){ 
        int select = rand.nextInt(ar.size());
        String random = ar.get(select);
        ar.remove(select);

        if(z==0){
        firstbutton.setText(random);firstholder = random; }    
         if (z==1){
        secondbutton.setText(random);secondholder = random;    }
         if (z==2){
        thirdbutton.setText(random);thirdholder = random;   }
         if (z==3){
        fourthbutton.setText(random);fourthholder = random;   }}

     }else if( level < 61){

         twist.startAnimation(anim2);
        firstbutton.startAnimation(anim);
        secondbutton.startAnimation(anim);
        thirdbutton.startAnimation(anim);
        fourthbutton.startAnimation(anim);
        fifthbutton.startAnimation(anim);
        sixthbutton.startAnimation(anim);

        twis.start();
        ArrayList<String> ar= new ArrayList<String>();
        String[] twist = {b,c,d,e,f,g};
        Random rand = new Random();

        for (String i : twist) {
          ar.add(i);

      }

        for (int z = 0; z < 6; z++){ 
      int select = rand.nextInt(ar.size());
      String random = ar.get(select);
      ar.remove(select);

      if(z==0){
        firstbutton.setText(random);firstholder = random; }    
       if (z==1){
      secondbutton.setText(random);secondholder = random;    }
       if (z==2){
      thirdbutton.setText(random);thirdholder = random;   }
       if (z==3){
      fourthbutton.setText(random);fourthholder = random;   }
       if (z==4){
       fifthbutton.setText(random);fifthholder = random;   }
       if (z==5){
        sixthbutton.setText(random);sixthholder = random;   }}

    }else if( level < 81){

         twist.startAnimation(anim2);
        firstbutton.startAnimation(anim);
        secondbutton.startAnimation(anim);
        thirdbutton.startAnimation(anim);
        fourthbutton.startAnimation(anim);
        fifthbutton.startAnimation(anim);
        sixthbutton.startAnimation(anim);
        seventhbutton.startAnimation(anim);

        twis.start();
        ArrayList<String> ar= new ArrayList<String>();
        String[] twist = {b,c,d,e,f,g,h};
        Random rand = new Random();

        for (String i : twist) {
         ar.add(i);

     }

        for (int z = 0; z < 7; z++){ 
     int select = rand.nextInt(ar.size());
     String random = ar.get(select);
     ar.remove(select);

     if(z==0){
        firstbutton.setText(random);firstholder = random; }    
      if (z==1){
     secondbutton.setText(random);secondholder = random;    }
      if (z==2){
     thirdbutton.setText(random);thirdholder = random;   }
      if (z==3){
     fourthbutton.setText(random);fourthholder = random;   }
      if (z==4){
      fifthbutton.setText(random);fifthholder = random;   }
      if (z==5){
       sixthbutton.setText(random);sixthholder = random;   }
      if (z==6){
          seventhbutton.setText(random);seventhholder = random;   }}

    }else {

         twist.startAnimation(anim2);
    firstbutton.startAnimation(anim);
    secondbutton.startAnimation(anim);
    thirdbutton.startAnimation(anim);
    fourthbutton.startAnimation(anim);
    fifthbutton.startAnimation(anim);
    sixthbutton.startAnimation(anim);
    seventhbutton.startAnimation(anim);
    eightthbutton.startAnimation(anim);

    twis.start();
    ArrayList<String> ar= new ArrayList<String>();
    String[] twist = {b,c,d,e,f,g,h,i};
    Random rand = new Random();

    for (String i : twist) {
        ar.add(i);

    }

    for (int z = 0; z < 8; z++){ 
    int select = rand.nextInt(ar.size());
    String random = ar.get(select);
    ar.remove(select);

    if(z==0){
    firstbutton.setText(random);firstholder = random; }    
     if (z==1){
    secondbutton.setText(random);secondholder = random;    }
     if (z==2){
    thirdbutton.setText(random);thirdholder = random;   }
     if (z==3){
    fourthbutton.setText(random);fourthholder = random;   }
     if (z==4){
     fifthbutton.setText(random);fifthholder = random;   }
     if (z==5){
      sixthbutton.setText(random);sixthholder = random;   }
     if (z==6){
         seventhbutton.setText(random);seventhholder = random;   }
     if (z==7){
         eightthbutton.setText(random);eightthholder = random;   }}

     } 
     }
  });

 }   

 private void question() {

     InputStreamReader inputStream = new InputStreamReader
       (getResources().openRawResource(R.raw.question1));
       BufferedReader br = new BufferedReader(inputStream);

       ArrayList<Integer> ar= new ArrayList<Integer>();
       int[] number= {1,2,3,4,5,6,7,8,9,10, 
                    11,12,13,14,15,16,17,18,19,20,
                    21,22,23,24,25,26,27,28,29,30,
                    31,32,33,34,35,36,37,38,39,40,
                    41,42,43,44,45,46,47,48,49,50};

                    for (int i : number) {
                            ar.add(i);} 
                        Random r = new Random();
                        int select = r.nextInt(ar.size());
                           int random = ar.get(select);
                        ar.remove(random); 

       String theLine="";
       int lineCtr = 0;

       try {          

       while ((theLine = br.readLine()) != null)   {

       if (lineCtr == select) {    

   StringTokenizer st = new   StringTokenizer(theLine,";");
       while(st.hasMoreTokens())

   {   

       //reading and getting data from the database","
                     a = st.nextToken();
                     b = st.nextToken();
                     c = st.nextToken();
                     d = st.nextToken();
                     e = st.nextToken();
                     f = st.nextToken();

                    //button setText
                    question.setText(a);
                    ca.setText(f);

                    ArrayList<String> as= new ArrayList<String>();
                    String[] twist = {b,c,d,e};
                    Random rand = new Random();

                    for (String i : twist) {
                        as.add(i);

                    }

                    for (int z = 0; z < 4; z++){ 
                    int sel = rand.nextInt(as.size());
                    String randoms = as.get(sel);
                    as.remove(sel);

                    if(z==0){
                    firstbutton.setText(randoms);firstholder = randoms; }    
                     if (z==1){
                    secondbutton.setText(randoms);secondholder = randoms;    }
                     if (z==2){
                    thirdbutton.setText(randoms);thirdholder = randoms;   }
                     if (z==3){
                    fourthbutton.setText(randoms);fourthholder = randoms;   }}
           break;

                }

             }lineCtr++;

       }  

       } catch (IOException e) {
           // TODO Auto-generated catch block
           e.printStackTrace();
       } 
   }

private void alertdialog(){

 Context mcontext=this; 

    final AlertDialog.Builder alert = new AlertDialog.Builder(
          mcontext);

    if (level == 1){

  alert.setIcon(R.drawable.gamestart);
  alert.setTitle(" ");
  alert.setPositiveButton("OK",
          new DialogInterface.OnClickListener() {

              @Override
              public void onClick(DialogInterface dialog,
                   int which) {
                     click.start();                                           
                     dialog.cancel();
                     levelshow();

              } 
             });
            }else{

                alert.setIcon(R.drawable.check);
                 alert.setTitle("CORRECT");
                 alert.setPositiveButton("Next",

                         new DialogInterface.OnClickListener() {

                             @Override
                           public void onClick(DialogInterface dialog,
                                  int which) { 
                            click.start();
        qn.setText("Question:"+level);                                        

                                   dialog.cancel();

                                  if (level <= 11){

                                      if(level == 11){
                                           levelshow();}  
                                           else{
                                           timer();
                                           question();}}  

                                  else if(level <=21){ 
                                      if(level == 21){
                                           levelshow();}  
                                           else{

                                               timer();
                                           question2();}}  

                                  else if(level <=31){           
                                      if(level == 31){
                                           levelshow();}  
                                           else{
                                           timer();
                                           question3();}}  

                                  else if(level <=41){ 
                                      if(level == 41){
                                           levelshow();}  
                                           else{
                                           timer();
                                           question4();}}  

                                  else if(level <=51){ 
                                      if(level == 51){
                                           levelshow();}  
                                           else{
                                           timer();
                                           question5();}}  

                                  else if(level <=61){ 
                                      if(level == 61){
                                           levelshow();}  
                                           else{
                                           timer();
                                           question6();}}  

                                  else if(level <=71){ 
                                      if(level == 71){
                                           levelshow();}  
                                           else{
                                           timer();
                                           question7();}}  

                                  else if(level <=81){ 
                                      if(level == 81){
                                           levelshow();}  
                                           else{
                                           timer();
                                           question8();}}  

                                  else if (level <=91){ 
                                      if(level == 91){
                                           levelshow();}  
                                           else{
                                           timer();
                                           question9();}} 

                                  else if (level <=100){ 
                                      if(level == 100){
                                           lo();}  
                                           else{
                                           timer();
                                           question10();}}  

                             } 
                            }); 
            }
        alert.show();
}

private void levelshow(){

     Context mcontext=this; 

        final AlertDialog.Builder alert = new AlertDialog.Builder(
              mcontext);

        if (level == 1){

      alert.setIcon(R.drawable.level);
      alert.setTitle(" ");
      alert.setPositiveButton("Start",
              new DialogInterface.OnClickListener() {

                  @Override
                  public void onClick(DialogInterface dialog,
            int which) {
                        click.start();                                        
                         dialog.cancel();
                         question();
                         timer();
                  } 
                 });
                }else if(level == 11){

                    alert.setIcon(R.drawable.level2);
                  alert.setTitle(" ");
                  alert.setPositiveButton("Start",
                          new DialogInterface.OnClickListener() {

                              @Override
                              public void onClick(DialogInterface dialog,
                                int which) {
                    click.start();                                        
                                     dialog.cancel();
                                    question2();
                                    timer();
                                   navigator.setText("LEVEL 2");

                                 } 
                                }); 
                } if(level == 21){

                    alert.setIcon(R.drawable.level3);
                  alert.setTitle(" ");
                  alert.setPositiveButton("Start",
                          new DialogInterface.OnClickListener() {

                              @Override
                              public void onClick(DialogInterface dialog,
                                   int which) {
                 click.start();                                           
                                     dialog.cancel();
                                    question3();
                                    timer();
                                  navigator.setText("LEVEL 3");   
                                ll1.setVisibility(0);
                                 } 
                                }); 
                } if(level == 31){

                    alert.setIcon(R.drawable.level4);
                  alert.setTitle(" ");
                  alert.setPositiveButton("Start",
                          new DialogInterface.OnClickListener() {

                              @Override
                              public void onClick(DialogInterface dialog,
                                   int which) {
                    click.start();                                        
                                     dialog.cancel();
                                     question4();
                                     timer();
                                   navigator.setText("LEVEL 4");
                                 } 
                                }); 
                }if(level == 41){

                    alert.setIcon(R.drawable.level5);
                  alert.setTitle(" ");
                  alert.setPositiveButton("Start",
                          new DialogInterface.OnClickListener() {

                              @Override
                              public void onClick(DialogInterface dialog,
                                   int which) {
                   click.start();                                         
                                     dialog.cancel();
                                     question5();
                                     timer();
                                   navigator.setText("LEVEL 5");
                                 ll2.setVisibility(0);
                                 } 
                                }); 
                } if(level == 51){

                    alert.setIcon(R.drawable.level6);
                  alert.setTitle(" ");
                  alert.setPositiveButton("Start",
                          new DialogInterface.OnClickListener() {

                              @Override
                              public void onClick(DialogInterface dialog,
                                   int which) {
                   click.start();                                         
                                     dialog.cancel();
                                     question6();
                                     timer();
                                   navigator.setText("LEVEL 6");
                                 } 
                                }); 
                } if(level == 61){

                    alert.setIcon(R.drawable.level7);
                  alert.setTitle(" ");
                  alert.setPositiveButton("Start",
                          new DialogInterface.OnClickListener() {

                              @Override
                              public void onClick(DialogInterface dialog,
                                   int which) {
                 click.start();                                           
                                     dialog.cancel();
                                     question7();
                                     timer();
                                   navigator.setText("LEVEL 7");
                                 ll3.setVisibility(0);
                                 } 
                                }); 
                } if(level == 71){

                    alert.setIcon(R.drawable.level8);
                  alert.setTitle(" ");
                  alert.setPositiveButton("Start",
                          new DialogInterface.OnClickListener() {

                              @Override
                              public void onClick(DialogInterface dialog,
                                   int which) {
                 click.start();                                           
                                     dialog.cancel();
                                     question8();
                                     timer();
                                   navigator.setText("LEVEL 8");
                                 } 
                                }); 
                } if(level == 81){

                    alert.setIcon(R.drawable.level9);
                  alert.setTitle(" ");
                  alert.setPositiveButton("Start",
                          new DialogInterface.OnClickListener() {

                              @Override
                              public void onClick(DialogInterface dialog,
                                   int which) {
                 click.start();                                           
                                     dialog.cancel();
                                     question9();
                                     timer();
                                   navigator.setText("LEVEL 9");
                                 ll4.setVisibility(0);
                              }
                                }); 
                }if(level == 91){

                    alert.setIcon(R.drawable.level10);
                  alert.setTitle(" ");
                  alert.setPositiveButton("Start",
                          new DialogInterface.OnClickListener() {

                              @Override
                              public void onClick(DialogInterface dialog,
                                   int which) {
                   click.start();                                         
                                     dialog.cancel();
                                     question10();
                                     timer();
                                   navigator.setText("LEVEL 10");

                                 } 
                                }); 
                } 

      alert.show();

}             

private void timer(){   

    final CountDownTimer Counter = new CountDownTimer(120000 , 1000) {

    public void onTick(long millisUntilFinished) {
        timer.setText(formatTime( millisUntilFinished));
        scr.setText(""+ (millisUntilFinished*2)/1000);

    }

    public void onFinish() {
        timer.setText("GAME OVER");

    } 
    }; Counter.start();     
    submit.setOnClickListener(new View.OnClickListener() {

     public void onClick(View v) {
        submit.startAnimation(anim2);
         String u = test.getText().toString();
            String p = ca.getText().toString();

            if (u.equals(p)){
             check.start();
                    scoring();
                Counter.cancel();
                level++; 
                alertdialog();

               if (level == 10){

                  }

            }

         else  { 
             wrong.start();
             wrong();

     }

          if (v == submit){
            firstbutton.setEnabled(true);
            secondbutton.setEnabled(true);
            thirdbutton.setEnabled(true);
            fourthbutton.setEnabled(true);
            fifthbutton.setEnabled(true);
            sixthbutton.setEnabled(true);
            seventhbutton.setEnabled(true);
            eightthbutton.setEnabled(true);
            test.setText("");

          }     
     }               

   });
} 

public void lo(){

    AlertDialog.Builder alert = new AlertDialog.Builder(this);

    alert.setTitle("CONGRATULATIONS");
    alert.setMessage("you made in the top 10 highscores");

    // Set an EditText view to get user input 
     final EditText input = new EditText(this);
    alert.setView(input);
    input.setGravity(Gravity.CENTER);
    alert.setNegativeButton("Ok", new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int whichButton) {

        if (input.getText().toString().equals("")){

                 Toast.makeText(Playing.this, "Please input your name!",    

        Toast.LENGTH_SHORT).show();
                  lo();
             }
             else{
                 getdata();
                  String data = input.getText().toString();
                 dataname = data;    
               getdata();

                dialog.cancel();
                finish();

             }        
      }
    });

    alert.show();

}

private void wrong(){
 Context mcontext=this; 

    final AlertDialog.Builder alert = new AlertDialog.Builder(
       mcontext);

  alert.setIcon(R.drawable.error1);
  alert.setTitle("WRONG");
  alert.setPositiveButton("try again",
       new DialogInterface.OnClickListener() {

           @Override
           public void onClick(DialogInterface dialog,
                int which) {
                  click.start();                                      
                  dialog.cancel();

           } 
          });
  alert.show();
 }
private void scoring(){

    fv = Integer.parseInt(scored.getText().toString());
    sv = Integer.parseInt(scr.getText().toString());
    ov = 0;

    ov = fv + sv;
    scored.setText("" + ov);

}
private void giveup(){

         Context mcontext=this; 

            final AlertDialog.Builder alert = new AlertDialog.Builder(
                  mcontext);

          alert.setTitle("Are you sure to give up?");
          alert.setNegativeButton("Cancel",
               new DialogInterface.OnClickListener() {

              @Override
              public void onClick(DialogInterface dialog,
                   int which) {
                  click.start();   
                  dialog.cancel();                                            

              } });
          alert.setPositiveButton("OK",
                  new DialogInterface.OnClickListener() {

                      @Override
                      public void onClick(DialogInterface dialog,
                           int which) {
                                                                                               click.start();                                           
                          dialog.cancel();
                           ch();
                         if (top = true){
                             lo();  
                           }else{
                               finish();
                              }
                      } 
                     });
          alert.show();

            }
    public void getdata(){

        try{
        String name = dataname;
        String tsc = scored.getText().toString();
        int tscore = Integer.parseInt(tsc);

        highscore entry = new highscore(Playing.this);
        entry.open();
        entry.createEntry(name, tscore);
        entry.close();
        }catch(Exception e){

        }
    }    
 public void ch(){

        try{

            String tr = scored.getText().toString();
               checks = Integer.parseInt(tr);

               highscore check = new highscore(Playing.this);
               check.open();
               check.checkt(checks);
               check.close();   

        }catch(Exception e){

        }
    }     

   } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-11T15:47:47.507

您可以在类的第 449 行抛出异常，`Playing` 因为从下往上看，这是堆栈跟踪在 java 代码中之前的最后一行。

`02-11 23:23:41.212: E/AndroidRuntime(2416): at com.ithinkdictionary.Playing.question(Playing.java:449)`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-11T17:35:20.240

每当您使用此代码时，您的问题都可能发生：

```
int select = rand.nextInt(ar.size());
String random = ar.get(select); 
```

它所做的是生成一个介于 0 和数组大小之间的随机数。**但是**，如果这返回一个等于 ar.size() 的整数，则尝试访问此索引将导致`IndexOutOfBoundsException`您遇到的情况。这是因为数组是从 0 开始索引的（即 50 个元素的数组的索引为 0 到 49，因此如果 rand.nextInt 返回 50，则会出现错误）

这是一个简单的修复：

```
int select = rand.nextInt(ar.size()-1);
String random = ar.get(select); 
```

# android - 选项卡式 ViewPager 预蜂窝

> ID：14815573
> 
> 赞同：1
> 
> 时间：2013-02-11T15:45:15.183
> 
> 标签：android, actionbarsherlock, android-viewpager

我一直在尝试在 ActionBar 中设置带有选项卡的 ViewPager，但我也想支持较旧的 API 级别（pre-ActionBar 级别）。

由于我为设置选项卡式 ViewPager 所做的几乎所有事情都需要 API 级别 11，而且我似乎只能让支持库走这么远，所以我不确定我应该做什么。

我知道我可以使用 TabWidget 和 Horizo​​ntalScrollView 来完成工作，但是我认为它不够高效，也不能提供相同的用户体验/可用性/交互，对吧？

或者

我应该使用[Sherlock 操作栏](http://actionbarsherlock.com/)吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:54:23.840

Sherlock Action Bar 建议在 API < 4.0 中使用 ActionBar 不仅用于 ViewPager 移动，它还提供“向上”按钮和 actionItems 行为等导航，如果您将来需要迁移应用程序以支持 api >= 4.0，则更改非常非常少.

# sql-server - 将数据导出到 CSV 平面文件时如何解决嵌入的文本限定符问题？

> ID：14815574
> 
> 赞同：63
> 
> 时间：2013-02-11T15:45:16.560
> 
> 标签：sql-server, ssis, sql-server-2000, sql-server-2012

###RFC 4180：

**[RFC 4180](https://www.rfc-editor.org/rfc/rfc4180)**定义*`Common Format and MIME Type for Comma-Separated Values (CSV) Files`*. 的要求之一*`RFC 4180`*如下所述。这是*`#7`*RFC 链接中的要点。

```
If double-quotes are used to enclose fields, then a double-quote
appearing inside a field must be escaped by preceding it with
another double quote.  For example:

"aaa","b""bb","ccc" 
```

###SQL Server 2000：

**`DTS Export/Import Wizard`**in*`SQL Server 2000`*似乎符合上述标准，尽管 RFC 4180 本身似乎仅在2005 年*10 月*发布。我正在使用下面所述的*SQL Server 2000*版本。

```
Microsoft SQL Server  2000 - 8.00.2039 (Intel X86) 
May  3 2005 23:18:38 
Copyright (c) 1988-2003 Microsoft Corporation
Standard Edition on Windows NT 5.0 (Build 2195: Service Pack 4) 
```

###SQL Server 2012：

**`SQL Server Import and Export Wizard`**in*`SQL Server 2012`*不会根据 RFC 4180 中定义的标准将数据从表导出到 CSV 文件。我使用的是下面所述的*SQL Server 2012*版本。

```
Microsoft SQL Server 2012 - 11.0.2316.0 (X64) 
Apr  6 2012 03:20:55 
Copyright (c) Microsoft Corporation
Enterprise Edition (64-bit) on Windows NT 6.1 <X64> (Build 7601: Service Pack 1) (Hypervisor) 
```

###问题模拟：

这是我在*SQL Server 2000*和*SQL Server 2012*中运行的示例。我运行以下查询来创建一个表并插入几条记录。该`ItemDesc`列包含带有双引号的数据。我的目的是使用它们内置的导出数据向导从这两个 SQL Server 版本中导出数据，并比较生成的 CSV 文件。

```
CREATE TABLE dbo.ItemInformation(
    ItemId nvarchar(20) NOT NULL,
    ItemDesc nvarchar(100) NOT NULL
) 
GO

INSERT INTO dbo.ItemInformation (ItemId, ItemDesc) VALUES ('100338754', 'Crown Bolt 3/8"-16 x 1" Stainless-Steel Hex Bolt');
INSERT INTO dbo.ItemInformation (ItemId, ItemDesc) VALUES ('202255836', 'Simpson Strong-Tie 5/8" SSTB Anchot Bolt');
INSERT INTO dbo.ItemInformation (ItemId, ItemDesc) VALUES ('100171631', 'Grip-Rite #11 x 1-1/2" Electro-Galvanized Steel Roofing Nails');
INSERT INTO dbo.ItemInformation (ItemId, ItemDesc) VALUES ('202210289', 'Crown Bolt 1/2" x 3" "Zinc-Plated" Universal Clevis Pin');
INSERT INTO dbo.ItemInformation (ItemId, ItemDesc) VALUES ('100136988', 'Tapcon 3/16" x 1-3/4" Climaseal Steel "Flat-Head" Phillips Concrete Anchors (75-Pack)');
INSERT INTO dbo.ItemInformation (ItemId, ItemDesc) VALUES ('203722101', 'KwikTap 3/16" x 2-1/4" "Flat-Head" Concrete Screws (100-Pack)');
GO 
```

在*`DTS Export/Import Wizard`*中*`SQL Server 2000`*，我使用以下设置将数据导出到 CSV 文件。我将文件保存在 name 下`SQLServer2000_ItemInformation.csv`。

![DTS 导出/导入向导](../Images/0abced29fbadb7c73eca339496f53fa2.png)

在*`SQL Server Import and Export Wizard`*中*`SQL Server 2012`*，我使用以下设置将数据导出到 CSV 文件。我将文件保存在 name 下`SQLServer2012_ItemInformation.csv`。

![SQL Server 导入和导出向导 - 选择目标](../Images/4c3db46b471da982c84c9701307d2813.png)

![SQL Server 导入和导出向导 - 配置平面文件目标](../Images/a3338aee1712fc8866db8d7ce1f4f17a.png)

这是使用 Beyond Compare 对两个文件进行的比较。左边是生成的文件`SQL Server 2000`，右边是生成的文件`SQL Server 2012`。您会注意到左侧文件中`SQL Server 2000`包含额外的双引号，以补偿数据列中嵌入的引号。这符合中指定的标准，`RFC 4180`但它显然从生成的文件中丢失`SQL Server 2012`

![文件比较](../Images/a95693ad9577f5bc36c1b22bb1c782dc.png)

###网络搜索：

我在网上搜索了这个错误并找到了以下链接。以下是 Microsoft Connect 上的错误报告。所有这些问题似乎都与导入文件有关，但与导出数据无关。所有这些错误都已作为`Fixed`.

*   [*SSIS 平面文件解析器不读取嵌入在文本数据中的列分隔符*](https://connect.microsoft.com/SQLServer/feedback/details/282396/ssis-flat-file-parser-does-not-read-column-delimiters-embedded-in-text-data)
*   [*平面文件连接管理器不处理 CSV 文件中的文本分隔符*](http://connect.microsoft.com/SQLServer/feedback/details/560592/flat-file-connection-manager-not-handling-text-delimiters-in-csv-files)
*   [*平面文件导入中的嵌入引号失败*](https://connect.microsoft.com/SQLServer/feedback/details/267529/embedded-quotes-in-flat-file-import-fails)
*   [*BUG：平面文件连接管理器：多字符文本限定符不加载所有数据*](https://connect.microsoft.com/SQLServer/feedback/details/540056/bug-flat-file-connection-manager-multiple-character-text-qualifier-does-not-load-all-data)

以下 MSDN 博客上的帖子指出，SQL Server 2012 中已对以下方面进行了更改`Flat file source supports embedded qualifiers and a variable number of columns per row`

*   [*SSIS - SQL Server Denali 中的新增功能*](http://blogs.msdn.com/b/mattm/archive/2011/07/12/ssis-what-s-new-in-sql-server-denali.aspx?PageIndex=2#comments)

MSDN 博客上的另一篇文章在该部分下也有相同的说明`Embedded Qualifiers`。

*   [*Denali 中的平面文件源更改*](http://blogs.msdn.com/b/mattm/archive/2011/07/17/flat-file-source-changes-in-denali.aspx)

###我知道的解决方法：

我知道通过编写一个查询来解决此问题，该查询将**`"`**用两个双引号 ( ) 替换列数据中的所有双引号 ( **`""`**)，以便导出的文件最终得到正确的嵌入限定符数据。这将避免直接从表中提取数据。

###我的问题：

*   我不知道这个问题是否真的在`SQL Server 2012`. *`importing`*是否仅针对具有嵌入文本限定符的文件和**`not`**CSV*`exporting`*数据修复了此问题？

*   可能，我显然做错了什么并且错过了显而易见的事情。有人可以向我解释我在这里做错了什么吗？

###微软连接：

我已在 Microsoft Connect 网站上提交了一份错误报告以获取他们的反馈。这是错误报告的链接。如果您同意这是一个错误，请访问以下链接在`Microsoft Connect`网站上投票。

[*导出到 CSV 期间的嵌入文本限定符不符合 RFC 4180*](https://connect.microsoft.com/SQLServer/feedback/details/778980/embedded-text-qualifier-during-export-to-csv-does-not-conform-to-rfc-4180#details)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T00:42:35.013

我不会提供这个答案，除非你非常努力地记录它并且一个月后没有答案。所以，就这样吧。您唯一的选择似乎是更改数据或更改工具。

> 可能，我显然做错了什么并且错过了显而易见的事情。有人可以向我解释我在这里做错了什么吗？

当工具坏了而供应商不在乎时，继续尝试是错误的。是时候切换了。您投入了大量精力来研究它是如何被破坏的，并证明它不仅违反了 RFC，而且违反了该工具自己的先前版本。你还需要多少证据？

CSV 也是船锚。如果可以选择，最好使用普通的分隔文件格式。对于很多应用程序，制表符分隔是好的。最好的分隔符 IMO 是“\”，因为该字符在英文文本中没有位置。（另一方面，它不适用于包含 Windows 路径名的数据。）

CSV 作为交换格式有两个问题。首先，它不是那么标准。无论 RFC 怎么说，不同的应用程序识别不同的版本。第二个（和相关的）是它不构成 CS 术语中的*正则语言*，这就是为什么它不能被解析为正则表达式的原因。与`^([^\t]*\t)*[\t]*$`制表符分隔的行进行比较。CSV 定义的复杂性的实际含义是（见上文）处理它们的工具相对缺乏以及它们不兼容的趋势，尤其是在凌晨。

如果您让 CSV 和 DTS 启动，您有很好的选择，其中之一是`bcp.exe`. 它非常快速且安全，因为微软多年来一直没有尝试对其进行更新。我对 DTS 了解不多，但如果您必须将其用于自动化，IIRC 有一种方法可以调用外部实用程序。但请注意，这`bcp.exe`不会可靠地将错误状态返回给 shell。

如果您决定使用 DTS 并坚持使用 CSV，那么剩下的最佳选择就是编写一个视图，为它准备适当的数据。如果回到那个角落，我会创建一个名为“DTS2012CSV”的模式，这样我就可以编写`select * from DTS2012CSV.tablename`，让任何关心它的人都有机会理解它（因为你会记录它，不是吗？视图文本中的注释？）。如果需要，其他人可以将其技术复制到其他损坏的提取物中。

HTH。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-05T14:37:42.800

我知道这已经有两年了，但我现在也遇到了这个问题，因为我们需要使用 SQL Server 2008 来签订我们的合同（不要问）。读完这个问题后，我意识到我需要做替换建议，但是当我在查询中去做时，我遇到了截断问题，因为在查询本身中使用 replace() 函数会将文本转换为默认为 varchar(8000)。

但是，我发现我可以在 DB Source 和 Flat File 对象之间使用 Derived Column 步骤来做同样的事情。例如，我有一个名为“short_description”的列，其中可能包含引号，所以我只是使用以下函数作为表达式，并在派生列中选择了“替换 short_description”：

```
REPLACE(short_description,"\"","\"\"") 
```

这似乎为我解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-06T20:55:18.987

名字和姓氏通常在同一个字段中并采用格式（姓氏，名字）。如果您在数据库中使用 Tasks->Export Data（而不是通过 SSIS，您有更多选项）并且您需要以逗号分隔文件的形式导出到 CSV，则这需要是文本限定的。

这将有助于您需要双引号的非空选定字段...

```
CASE WHEN NOT PersonName IS NULL AND LEN(PersonName) > 0 THEN QUOTENAME(PersonName, '"') ELSE NULL END as 'PersonName' 
```

结果：

> 人名
> 
> “柯林斯，扎克瑞 E”

# c# - NHibernate - 映射接口或抽象组件与按代码映射/一致性

> ID：14815576
> 
> 赞同：1
> 
> 时间：2013-02-11T15:45:20.463
> 
> 标签：c#, nhibernate, nhibernate-mapping, mapping-by-code

这个问题与[映射接口或抽象类组件](https://stackoverflow.com/questions/1548839/mapping-interface-or-abstract-class-component)有关 我也在尝试映射声明为接口的组件，但我使用的是内置的按代码映射/符合标准的方法。

假设我有一个实体`Login`（C#）：

```
public class Login
{
    public virtual int Id { get; set; }
    public virtual string UserName { get; set; }
    public virtual IPassword Password { get; set; }
} 
```

我想抽象出密码的存储方式，所以我定义了一个简单的接口`IPassword`

```
public interface IPassword
{
    bool Matches(string password);
} 
```

一个示例实现是`HashedPassword`：

```
public class HashedPassword : IPassword
{
    public virtual string Hash { get; set; }
    public virtual string Salt { get; set; }

    public virtual bool Matches(string password){ /* [snip] */ }
} 
```

我想映射`Login.Password`为一个组件，而不是多对一或一对一的关系。使用 XML 我会像这样映射它：

```
<?xml version="1.0"?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" assembly="..." namespace="...">
  <class name="Login">
    <id name="Id">...</id>
    <property name="UserName" .../>
    <component name="Password" class="HashedPassword">
      <property name="Hash" not-null="true" length="32"/>
      <property name="Salt" not-null="true" length="32"/>
    </component>
  </class>
</hibernate-mapping> 
```

这按预期工作。

这是我尝试使用 NHibernate 的内置按代码映射工具对其进行映射的尝试：

```
public class LoginMapping : ClassMapping<Login>
{
    public LoginMapping()
    {
        Id(x => x.Id, map => map.Generator(Generators.HighLow));
        Property(x => x.UserName, map => map.Length(32));
        Component(x => x.Password, comp =>
            {
                comp.Class<HashedPassword>();
                comp.Property("Salt", map => map.Length(32));
                comp.Property("Hash", map => map.Length(32));
            });
    }
} 
```

当我使用此映射时，出现以下异常：

> NHibernate.MappingException：找不到成员。IPassword 类型中不存在成员“Salt”

虽然 Salt 确实不是 的成员`IPassword`，但它*是*我设置的类的成员`comp.Class<HashedPassword>()`

你知道我如何在不出现异常的情况下映射这个场景吗？

* * *

到目前为止，我还没有找到问题本身的解决方案。目前有两种解决方法：

1.  求助于 XML 映射或 FluentNHibernate。这可能仅适用于“有问题的”映射。

2.  使用用户类型而不是组件。这就是我现在正在做的事情。我的类型（散列密码）是不可变的，可以存储为单列，因此用户类型相当简单。

这是我当前使用的用户类型（为了完成）。我使用 PBKDF2 创建安全哈希。请注意，在我的应用程序中，所有数据（盐、哈希和 PBKDF2 迭代计数）都存储在`Hash`HashedPassword 的一个属性（简称为 ）中。

```
public abstract class ImmutableValue<T> : IUserType where T : class
{
    public abstract SqlType[] SqlTypes { get; }

    public virtual Type ReturnedType
    {
        get { return typeof (T); }
    }

    public bool IsMutable
    {
        get { return false; }
    }

    bool IUserType.Equals(object x, object y)
    {
        return InternalEquals(x, y);
    }

    protected virtual bool InternalEquals(object x, object y)
    {
        return Equals(x, y);
    }

    public virtual int GetHashCode(object x)
    {
        return x == null ? 0 : x.GetHashCode();
    }

    public virtual object NullSafeGet(IDataReader rs, string[] names, object owner)
    {
        return Load(rs, names, owner);
    }

    protected abstract T Load(IDataReader rs, string[] names, object owner);

    public virtual void NullSafeSet(IDbCommand cmd, object value, int index)
    {
        Save(cmd, (T) value, index);
    }

    protected abstract void Save(IDbCommand cmd, T value, int index);

    public virtual object DeepCopy(object value)
    {
        return value;
    }

    public virtual object Replace(object original, object target, object owner)
    {
        return original;
    }

    public virtual object Assemble(object cached, object owner)
    {
        return cached;
    }

    public virtual object Disassemble(object value)
    {
        return value;
    }

    protected void SetParameter(IDbCommand cmd, int index, object value)
    {
        var parameter = (IDataParameter) cmd.Parameters[index];
        var parameterValue = value ?? DBNull.Value;
        parameter.Value = parameterValue;
    }
}

public class HashedPasswordType : ImmutableValue<HashedPassword>
{
    public override SqlType[] SqlTypes
    {
        get { return new SqlType[] {SqlTypeFactory.GetString(HashedPassword.ContentLength)}; }
    }

    protected override HashedPassword Load(IDataReader rs, string[] names, object owner)
    {
        var str = NHibernateUtil.String.NullSafeGet(rs, names[0]) as string;
        return HashedPassword.FromContent(str);
    }

    protected override void Save(IDbCommand cmd, HashedPassword value, int index)
    {
        SetParameter(cmd, index, value == null ? null : value.Hash);
    }
} 
```

所需的映射相对简单：

```
Property(x => x.Password, map =>
    {
        map.Type<HashedPasswordType>();
        map.NotNullable(true);
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:43:17.593

由于我还没有找到使用组件映射的解决方案，所以我现在将添加解决方法作为答案。

可能的解决方法：

1.  对有问题的类型使用 XML 映射。这支持我的方案没有问题。请参阅问题以获取示例。
2.  使用 FluentNHibernate。它只支持这种开箱即用的映射，请参见下面的示例。
3.  使用用户类型而不是组件。这是比较多的工作，但至少它适用于按代码映射。

FluentNH 中所需映射的示例。具体类型作为泛型参数传入。

```
Component<HashedPassword>(x => x.Password, comp =>
{
    comp.Map(x => x.Hash);
    comp.Map(x => x.Salt);
}); 
```

问题末尾给出了用户类型的示例。在实际示例中，我使用 PBKDF2 创建安全哈希。请注意，在问题中显示的用户类型中，所有数据（盐、哈希和 PBKDF2 迭代计数）都存储在*一*列中以保持类型简单。

我目前的结论是，按代码映射根本不支持我的要求。我现在正在考虑从映射到代码转移到 FluentNH。

如果有与此问题相关的新闻，我将相应地更新答案和/或问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T18:23:56.120

我对按代码映射并不是很熟悉，但是在使用 Fluent NHibernate 时，我已经取得了成功

```
Map(x => (x as HashedPassword).Hash) 
```

你可以试试

```
comp.Property(x => (x as HashedPassword).Hash) 
```

# ios - 通用应用Splitviewcontroller

> ID：14815579
> 
> 赞同：0
> 
> 时间：2013-02-11T15:45:23.187
> 
> 标签：ios, ios5, ipad

您好，我正在制作一个通用`iOS`应用程序。我`UINavigationControllers`在 上使用`iPhone`，现在我有一个“菜单” `UIViewController`，我想从中推到`UISplitViewController`. 这甚至可能吗？我该怎么做？

我一直收到这个错误：

```
Split View Controllers cannot be pushed to a Navigation Controller <UINavigationController: 0x1fd6b930>. 
```

这个应用程序是否会因为 UISplitViewController`enter code here`始终必须是根控制器而被 Apple 拒绝？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:04:51.197

不，你不能， UISpliViewController 必须是应用程序中的根（顶部）viewController。

# vim - vim：YankRing 干扰 'dt' 命令？

> ID：14815582
> 
> 赞同：0
> 
> 时间：2013-02-11T15:45:37.287
> 
> 标签：vim, vim-plugin

我很喜欢 YankRing，但我丢失了一个快捷键。在 YankRing 之前，我可以使用以下命令将文本删除到行尾：

```
dt$ 
```

使用 YankRing，现在当我输入“dt”时，会提示我要删除的角色。如果我输入“$”，它会在字符串中查找“$”字符，而不是行尾。有没有办法将 $ 转义到它的行尾含义，或者仅仅为了这一点暂停 YankRing？我尝试“YRToggle”来关闭 YankRing，但我得到了相同的行为。

任何帮助表示赞赏。

补充：它可能不仅仅是 YankRing，因为我正在考虑它。作为参考，这是我的整个 .vimrc 文件的 pastebin：http: [//pastebin.com/EhhK3215](http://pastebin.com/EhhK3215)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T18:13:15.130

`D`( `Shift`+ `d`) 是 的同义词`d``$`。

# grails - Grails :: 等待空闲对象的超时 :: GORM 事件方法

> ID：14815586
> 
> 赞同：4
> 
> 时间：2013-02-11T15:45:53.303
> 
> 标签：grails, timeout, database-connection, grails-orm, connection-pooling

我最近在我的 Grails 1.3.7 项目中添加了一个新功能，我想在某些域对象被持久化到数据库后进行一些后处理。我在这些域对象中使用 afterInsert() 方法。

此后处理包括对数据库的额外查找，以确定是否需要采取其他操作，例如对另一个 API 的 RESTful 调用。自从添加了这个新代码后，我一直无法部署到我们的生产环境中。在 5 分钟内，我开始看到以下堆栈跟踪一遍又一遍地重复。我无法在我的开发环境中重现这一点。

```
2013-02-10 03:39:45,384 [http-bio-8443-exec-126] ERROR org.hibernate.util.JDBCExceptionReporter  - Cannot get a connection, pool error Timeout waiting for idle object
2013-02-10 03:39:45,401 [http-bio-8443-exec-126] ERROR org.codehaus.groovy.grails.web.errors.GrailsExceptionResolver  - Exception occurred when processing request: [POST] /events
Stacktrace follows:
2013-02-10 03:39:45,406 [http-bio-8443-exec-126] ERROR ErrorController  - Timeout waiting for idle object
org.codehaus.groovy.grails.web.errors.GrailsWrappedRuntimeException: Timeout waiting for idle object
    at org.codehaus.groovy.grails.web.errors.GrailsExceptionResolver.resolveException(GrailsExceptionResolver.java:79)
    at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:987)
    at org.codehaus.groovy.grails.web.servlet.GrailsDispatcherServlet.doDispatch(GrailsDispatcherServlet.java:319)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:560)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:70)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:70)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:70)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:749)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:487)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:412)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:339)
    at org.codehaus.groovy.grails.web.util.WebUtils.forwardRequestForUrlMappingInfo(WebUtils.java:298)
    at org.codehaus.groovy.grails.web.util.WebUtils.forwardRequestForUrlMappingInfo(WebUtils.java:264)
    at org.codehaus.groovy.grails.web.util.WebUtils.forwardRequestForUrlMappingInfo(WebUtils.java:255)
    at org.codehaus.groovy.grails.web.mapping.filter.UrlMappingsFilter.doFilterInternal(UrlMappingsFilter.java:183)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.codehaus.groovy.grails.web.sitemesh.GrailsPageFilter.obtainContent(GrailsPageFilter.java:245)
    at org.codehaus.groovy.grails.web.sitemesh.GrailsPageFilter.doFilter(GrailsPageFilter.java:134)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:369)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    at org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:112)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187)
    at org.codehaus.groovy.grails.plugins.springsecurity.RequestHolderAuthenticationFilter.doFilter(RequestHolderAuthenticationFilter.java:40)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    at org.codehaus.groovy.grails.plugins.springsecurity.MutableLogoutFilter.doFilter(MutableLogoutFilter.java:79)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:168)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.codehaus.groovy.grails.web.servlet.mvc.GrailsWebRequestFilter.doFilterInternal(GrailsWebRequestFilter.java:69)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.codehaus.groovy.grails.web.filters.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:65)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
Caused by: java.util.NoSuchElementException: Timeout waiting for idle object 
```

我目前被困在 Grails 1.3.7 上，因为我们使用的是[Grails 多租户插件（核心）](http://grails.org/plugin/multi-tenant-core)，它不适用于 Grails 2.0，而且我们无法从该插件中迁移出去。

[您可以在诸如](http://www.grails.org/doc/1.3.7/guide/5.%20Object%20Relational%20Mapping%20%28GORM%29.html#5.5.1%20Events%20and%20Auto%20Timestamping)在域对象上的 afterInsert 之类的方法中执行什么操作是否存在任何已知问题？我已经使用该代码尝试了几种不同的方法。最初，我使用 Executor Plugin 来生成一个新线程。我认为这可能是我的问题，所以我删除了引入一些 Hibernate 会话刷新问题的问题，所以我用[DomainObject.withNewSession {}](http://www.grails.org/doc/1.3.7/ref/Domain%20Classes/withNewSession.html)包装了每个调用，这使代码再次在我的开发环境中工作，但在生产中失败。

我还添加了对外部配置的检查，以查看是否允许关闭此新功能……当我这样做时，问题就消失了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T02:24:14.297

我们能够通过对 Tomcat 上的数据源进行新配置来解决此问题。我们正在运行 Tomcat 7.0.32，它现在提供了一个新的连接池工厂。切换到那个解决了我们的问题。

一定要喜欢不在代码中的修复程序！

在此处阅读有关新连接池的信息：

[http://people.apache.org/~fhanik/jdbc-pool/jdbc-pool.html](http://people.apache.org/~fhanik/jdbc-pool/jdbc-pool.html)

# php - 通过AJAX请求动态插入html内容后如何触发jquery函数？

> ID：14815598
> 
> 赞同：-2
> 
> 时间：2013-02-11T15:46:33.207
> 
> 标签：php, javascript, jquery, html, ajax

```
 <div id="timeline">

                   <ul class="grow" id="grown"><li>One</li><li>Two</li><li>Three</li><li>Four</li><li>Five</li><li>Six</li><li>Seven</li><li>Eight</li><li>Nine</li><li>Ten</li><li>Eleven</li><li>Twelve</li><li>Thirteen</li><li>Fourteen</li><li>Fifteen</li><li>Sixteen</li><li>Seventeen</li><li>Eighteen</li><li>Nineteen</li><li>Twenty</li><li>Twentyone</li><li>Twentytwo</li><li>Twentythree</li><li>Twentyfour</li><li>Twentyfive</li><li>Twentysix</li><li>Twentyseven</li><li>Twentyeight</li><li>Twentynine</li><li>Thirty</li><li>Thirtyone</li><li>Thirtytwo</li><li>Thirtythree</li><li>Thirtyfour</li><li>Thirtyfive</li><li>Thirtysix</li><li>Thirtyseven</li><li>Thirtyeight</li><li>Thirtynine</li><li>Forty</li><li>Fortyone</li><li>Fortytwo</li><li>Fortythree</li><li>Fortyfour</li><li>Fortyfive</li><li>Fortysix</li><li>Fortyseven</li><li>Fortyeight</li><li>Fortynine</li><li>Fifty</li><li>Fiftyone</li><li>Fiftytwo</li><li>Fiftythree</li><li>Fiftyfour</li><li>Fiftyfive</li><li>Fiftysix</li><li>Fiftyseven</li><li>Fiftyeight</li><li>Fiftynine</li><li>Sixty</li><li>Sixtyone</li><li>Sixtytwo</li><li>Sixtythree</li><li>Sixtyfour</li><li>Sixtyfive</li><li>Sixtysix</li><li>Sixtyseven</li><li>Sixtyeight</li><li>Sixtynine</li><li>Seventy</li><li>Seventyone</li><li>Seventytwo</li><li>Seventythree</li><li>Seventyfour</li><li>Seventyfive</li><li>Seventysix</li><li>Seventyseven</li><li>Seventyeight</li><li>Seventynine</li><li>Eighty</li><li>Eightyone</li><li>Eightytwo</li><li>Eightythree</li><li>Eightyfour</li><li>Eightyfive</li><li>Eightysix</li><li>Eightyseven</li><li>Eightyeight</li><li>Eightynine</li><li>Ninety</li><li>Ninetyone</li><li>Ninetytwo</li><li>Ninetythree</li><li>Ninetyfour</li><li>Ninetyfive</li><li>Ninetysix</li><li>Ninetyseven</li><li>Ninetyeight</li><li>Ninetynine</li></ul>

                     </div>
                    <script>
$(document).ready(function(e) {
    alert("hi");
        stroll.bind('.grow');

});

    </script> 
```

此代码在浏览器上加载此 html 时有效。但是每当我向服务器端 php 发出 AJAX 请求时

时间线.php 代码

```
<?php
$pg = pg_connect("host=localhost user=postgres password=vinit dbname=postgres");
//or die("Can't connect to database.");
if (!$pg)
{ 
echo "Couldn't make a connection!"; 
}
$page=$_GET['page'];
$sql1="select year,year_description,page_link from timeline48 where year<2020 order by year asc ";
echo "<ul class='grow' id='grow'>";
while ($row1 = pg_fetch_array($result1, NULL, PGSQL_ASSOC))
{
    $year =$row1['year'];
    $desc=$row1['year_description'];
    $link=$row1['page_link'];

    echo "<li>".$year."    ";
    echo "".$desc."  <a href='".$link."' target='_blank'>more..</a></li>";
    $count++;
}
echo "<ul>";
   echo "</nav>";

?> 
```

动态添加列表内容后，`stroll.bind('.grow')`不起作用！（我想用来`stroll.bind`为列表添加滚动效果）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T15:49:36.590

将 walk.bind 添加到您的 ajax 请求的成功中。

```
$.ajax(...).done(function(){
    stroll.bind(".grow");
}); 
```

或者

```
$.post(...).done(function(){
    stroll.bind(".grow");
}); 
```

或者

```
$.get(...).done(function(){
    stroll.bind(".grow");
}); 
```

或者

```
$.getJSON(...).done(function(){
    stroll.bind(".grow");
}); 
```

或者

```
$(element).load("file.php",function(){
    stroll.bind(".grow");
}); 
```

或（来自评论）

```
xmlhttp.onreadystatechange=function() { 
    if (xmlhttp.readyState==4 && xmlhttp.status==200) {
        document.getElementById("timeline").innerHTML=xmlhttp.responseText; 
        stroll.bind(".grow");
    } 
} 
```

# rubygems - 检查 Rails 3.2.11 安装

> ID：14815608
> 
> 赞同：0
> 
> 时间：2013-02-11T15:47:10.927
> 
> 标签：rubygems, ruby-on-rails-3.2

我正在确认在新的 Debian Squeeze 服务器上安装新的 ruby​​ 和 rails。Ruby 响应版本检查命令，但 rails 没有。我看到安装了 rails gem，但我也注意到 /usr/bin/ 中没有安装 rails 我确实在其中看到了 ruby​​ 以及 rake 和 irb。

```
-bash: rails: command not found 
```

这是审计线索。rails gem 安装成功。关于如何进行故障排除的任何想法都会很棒。

```
root@partner:~# gem1.9.1 install rails
Successfully installed rails-3.2.11
1 gem installed
Installing ri documentation for rails-3.2.11...
Installing RDoc documentation for rails-3.2.11...

root@partners:/var/lib/gems/1.9.1/gems# ls
actionmailer-3.2.11    
activesupport-3.2.11     
erubis-2.7.0      
json-1.7.6         
pg-0.14.1       
rack-ssl-1.3.3   
rdoc-3.12               
treetop-1.4.12
actionpack-3.2.11      
arel-3.0.2               
fastthread-1.0.7  
mail-2.4.4         
polyglot-0.3.3  
rack-test-0.6.2  
rubygems-update-1.8.25  
tzinfo-0.3.35
activemodel-3.2.11     
builder-3.0.4            
hike-1.2.1        
mime-types-1.20.1  
rack-1.4.0      
rails-3.2.11   
sprockets-2.2.2
activerecord-3.2.11    
bundler-1.2.3            
i18n-0.6.1        
multi_json-1.5.0   
rack-1.5.1      
railties-3.2.11  
thor-0.17.0
activeresource-3.2.11  
daemon_controller-1.1.1  
journey-1.0.4     
passenger-3.0.19   
rack-cache-1.2  
rake-10.0.3      
tilt-1.3.3

root@partner:~# rails --version
-bash: rails: command not found

root@partner:~# rails-3.2.11 --version
-bash: rails-3.2.11: command not found 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:50:25.663

在一天中的大部分时间都在与这个搏斗之后，我卸载了所有东西，安装了[RVM](https://rvm.io/rvm/install/)，然后用 RVM 安装了 Ruby 和 Rails。好多了，好多了。

# php - 使用 PEAR 安装 Doctrine 2

> ID：14815611
> 
> 赞同：1
> 
> 时间：2013-02-11T15:47:23.413
> 
> 标签：php, codeigniter, doctrine, doctrine-orm, pear

我是 PEAR 和 Doctrine 的菜鸟，在尝试安装教义时遇到了麻烦。从教义的网站：

> 您可以通过 Github、下载、PEAR 或 Composer 安装版本

由于“下载”实际上并没有链接到我尝试使用 PEAR 的任何内容。

在 c:\xampp\php\ 我按照网站中的说明运行了这一行

```
pear install doctrine/DoctrineCommon-2.3.0 
```

它似乎进展顺利。但是 - 包下载到哪里？我需要这些文件本身，因为我需要将它们拖到我的 CodeIgniter 文件夹中。

来自谷歌，这是 Doctrine 的下载页面[http://www.doctrine-project.org/projects/orm/download](http://www.doctrine-project.org/projects/orm/download)不工作......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:08:10.200

你在谷歌上看过吗？

*   [使用 Doctrine 2 正确设置 CodeIgniter 2](http://www.joelverhagen.com/blog/2011/05/setting-up-codeigniter-2-with-doctrine-2-the-right-way/)
*   [将 Doctrine 2 与 CodeIgniter 2 集成](http://wildlyinaccurate.com/integrating-doctrine-2-with-codeigniter-2)

[此外，您可以在此处](http://www.doctrine-project.org/projects/orm.html)找到最新的 Doctrine 2 ORM 版本。

# c# - 如何为 Windows 应用商店应用程序创建自定义按钮？

> ID：14815613
> 
> 赞同：1
> 
> 时间：2013-02-11T15:47:35.010
> 
> 标签：c#, .net, windows-store-apps

我想制作一个带有图片形状的自定义`C#`按钮`Windows Store App`？

有没有办法做到这一点`xaml`？到目前为止，我已经制作了一个按钮并将一个圆圈指定为背景图像，但问题是即使我在图像外部单击该按钮也可以工作。

另外，我不相信`Image`该类有一个不幸`event`的。`click`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T16:05:26.053

在 google 的帮助下：[演练：使用 XAML 创建按钮](http://msdn.microsoft.com/en-us/library/bb613545.aspx)

你应该看看Expression Blend。您可以在 XAML 代码中手动完成所有操作，但如果您想自定义项目的外观和感觉，Blend 会提供巨大的帮助。查看[MSDN 示例](http://msdn.microsoft.com/en-us/expression/cc136522.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T16:19:59.583

我最近刚刚实现了 WinRT XAML 工具包，它对我来说非常有用。它有一个 imagebutton 控件，可以做你想做的事。 [http://winrtxamltoolkit.codeplex.com/](http://winrtxamltoolkit.codeplex.com/)

# php - 删除地图中的标记

> ID：14815614
> 
> 赞同：0
> 
> 时间：2013-02-11T15:47:37.440
> 
> 标签：php, javascript, google-maps, marker

我不明白为什么使用 .setMat(null) 我无法删除地图中的标记。

代码如下：

```
<!DOCTYPE html>
<HTML>  <HEAD>
        <script type="text/javascript">
            var geocoder;
            var map;
            var lat_;
            var lng_;
            var contentString="";
            var infowindow = null;
            var markerNodes = null;

            function initialize() {
                geocoder = new google.maps.Geocoder();
                var latlng = new google.maps.LatLng(41.92, 12.93);
                var mapOptions = {
                  zoom: 6,
                  center: latlng,
                  mapTypeId: google.maps.MapTypeId.ROADMAP
                }
                map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
            }

            function searchLocations() {
                var ind_r_g = document.getElementById("indirizzoR").value;
                var civ_r_g = document.getElementById("civicoR").value;
                var citta_r_g = document.getElementById("cittaR").value;
                var paese_r_g = document.getElementById("paeseR").value;
                if(civ_r_g != 0 || civ_r_g != ""){
                var address = ind_r_g + civ_r_g + ", " +  citta_r_g + ", " + paese_r_g;
                }
                else{
                var address = ind_r_g +  ", " +  citta_r_g + ", " + paese_r_g;
                }

                var geocoder = new google.maps.Geocoder();
                geocoder.geocode({address: address}, function(results, status) {
                if (status == google.maps.GeocoderStatus.OK) {
                    searchLocationsNear(results[0].geometry.location);
                } else {
                    alert(address + ' not found');
                }
                });
            }

            function clearLocations() {
            if(markerNodes!=null){
                alert(markerNodes.length);
                for (var i = 0; i < markerNodes.length; i++) {
                    markers[i].setMap(null);
                }
                }
            }               

            function searchLocationsNear(center) {
                alert("beforeclearlocations");
                clearLocations();
                alert("afterclearlocations");
                var radius = document.getElementById('raggioR').value;
                var searchUrl = 'phpsqlsearch_genxml.php?lat=' + center.lat() + '&lng=' + center.lng() + '&radius=' + radius;
                infowindow = new google.maps.InfoWindow({content: contentString});

                downloadUrl(searchUrl, function(data) {
                    var xml = data.responseXML;
                    markerNodes = xml.documentElement.getElementsByTagName("marker");
                    for (var i = 0; i < markerNodes.length; i++) {

                        var name = markerNodes[i].getAttribute("name");
                        var address = markerNodes[i].getAttribute("address");
                        var point = new google.maps.LatLng(
                            parseFloat(markerNodes[i].getAttribute("lat")),
                            parseFloat(markerNodes[i].getAttribute("lng")));
                        var image = '/img/'+ name +'.png';

                    contentString = '<div id="content">'+
                '<h3 id="firstHeading" class="firstHeading">' + markerNodes[i].getAttribute("name")+ '</h3>'+
                '<div id="bodyContent"><u>Indirizzo</u>: ' + markerNodes[i].getAttribute("address_indirizzo")  +'<br><u>Citta</u>: '+ markerNodes[i].getAttribute("city")
                + '<br><u>Paese</u>: ' + markerNodes[i].getAttribute("country") + '<br><u>Prezzo Benzina</u>: ' + markerNodes[i].getAttribute("prezzoB") + ' (euro/litro)</div>' + 
                '<u>Prezzo Diesel</u>: ' + markerNodes[i].getAttribute("prezzoD") +
                ' (euro/litro)</div>'+
                '</div>';       

                        var marker = new google.maps.Marker({
                            id: i,
                            map: map,
                            icon: image,
                            position: point,
                            html: contentString
                        });
                        google.maps.event.addListener(marker, 'click', function() {
                            infowindow.setContent(this.html);
                            infowindow.open(map,this);
                        });
                    }
                });
            }   

            function downloadUrl(url, callback) {
                var request = window.ActiveXObject ?
                    new ActiveXObject('Microsoft.XMLHTTP') :
                    new XMLHttpRequest;

                request.onreadystatechange = function() {
                    if (request.readyState == 4) {
                        request.onreadystatechange = doNothing;
                        callback(request, request.status);
                    }
                };

                request.open('GET', url, true);
                request.send(null);
            }

            function doNothing() {}

            function check_form_r(){
                var check_i_r = document.getElementById("indirizzoR").value;
                var check_civ_r = document.getElementById("civicoR").value;
                var check_cit_r = document.getElementById("cittaR").value;
                var check_pa_r = document.getElementById("paeseR").value;           
                var check_ra_r = document.getElementById("raggioR").value;
                if( check_i_r == ""  || check_cit_r == ""  || check_pa_r == "" || check_ra_r== ""){
                    alert("Tutti i campi con asterisco sono obbligatori");
                }
                else{
                searchLocations();
                }
            }

    </script>
    </HEAD>
    <BODY onload="initialize();">
    <div  class="insertbox" style="center">
        <h5>CERCA I BENZINAI INTORNO A TE!</h5>
                    Indirizzo (*): <br/>
                    <input type="text" name="indirizzoR" id="indirizzoR"/> <br/>
                    Civico: <br/>
                    <input type="text" size="4" name="civicoR" id="civicoR"/> <br/>
                    Città (*): <br/>
                    <input type="text" name="cittaR" id="cittaR"/> <br/>
                    Paese (*): <br/>
                    <input type="text" name="paeseR" id="paeseR"/> <br/>
                    <label for="raggioR">Raggio di ricerca (*):</label><br/>
                    <select id="raggioR" name="raggioR">
                    <option value="" selected="selected">-- seleziona --</option>
                    <option value="2" id="raggio2">2 km</option>
                    <option value="5" id="raggio5">5 km</option>
                    <option value="10" id="raggio10">10 km</option>
                    </select><br/>
                    <input type="button" value="cerca"  onclick="check_form_r()"/>
                    <br/>
                    <br/>
                    (i campi con asterisco sono obbligatori)
    </div>
<div class="mapbox" id="map_canvas" style="width:700px; height:350px" ></div>   
</BODY> 
```

代码中的重要一点是`clearLocations()`我不明白我必须在里面放什么才能删除之前放置的所有标记的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T16:22:56.073

你来做这件事：

```
for (var i = 0; i < markerNodes.length; i++) {
                    markers[i].setMap(null); 
```

那不应该是：

```
for (var i = 0; i < markerNodes.length; i++) {
                    markerNodes[i].setMap(null); 
```

您的代码中没有调用数组`markers`（事实上，如果您在执行此操作时没有收到 JS 错误，我会感到很惊讶）。

但是我认为即使这对你也不起作用。markerNodes 似乎是地图上的项目数组。最好在初始化地图时创建一个空白数组，然后在添加时将每个标记推送到该数组。

这是代码相关部分的更新，请注意新的全局变量`markers`以及我们在创建标记时将它们推入其中的位置。这就是我们在`clearLocations`函数中使用的数组。

```
var geocoder;
var map;
var lat_;
var lng_;
var contentString="";
var infowindow = null;
var markerNodes = null;
var markers = [];

function initialize() {
    geocoder = new google.maps.Geocoder();
    var latlng = new google.maps.LatLng(41.92, 12.93);
    var mapOptions = {
      zoom: 6,
      center: latlng,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
}

function clearLocations() {
    alert(markers.length);
    for (var i = 0; i < markers.length; i++) {
        markers[i].setMap(null);
    }
}               

function searchLocationsNear(center) {
    alert("beforeclearlocations");
    clearLocations();
    alert("afterclearlocations");
    var radius = document.getElementById('raggioR').value;
    var searchUrl = 'phpsqlsearch_genxml.php?lat=' + center.lat() + '&lng=' + center.lng() + '&radius=' + radius;
    infowindow = new google.maps.InfoWindow({content: contentString});

    downloadUrl(searchUrl, function(data) {
        var xml = data.responseXML;
        markerNodes = xml.documentElement.getElementsByTagName("marker");
        for (var i = 0; i < markerNodes.length; i++) {

            var name = markerNodes[i].getAttribute("name");
            var address = markerNodes[i].getAttribute("address");
            var point = new google.maps.LatLng(
                parseFloat(markerNodes[i].getAttribute("lat")),
                parseFloat(markerNodes[i].getAttribute("lng")));
            var image = '/img/'+ name +'.png';

        contentString = '<div id="content">'+
    '<h3 id="firstHeading" class="firstHeading">' + markerNodes[i].getAttribute("name")+ '</h3>'+
    '<div id="bodyContent"><u>Indirizzo</u>: ' + markerNodes[i].getAttribute("address_indirizzo")  +'<br><u>Citta</u>: '+ markerNodes[i].getAttribute("city")
    + '<br><u>Paese</u>: ' + markerNodes[i].getAttribute("country") + '<br><u>Prezzo Benzina</u>: ' + markerNodes[i].getAttribute("prezzoB") + ' (euro/litro)</div>' + 
    '<u>Prezzo Diesel</u>: ' + markerNodes[i].getAttribute("prezzoD") +
    ' (euro/litro)</div>'+
    '</div>';       

            var marker = new google.maps.Marker({
                id: i,
                map: map,
                icon: image,
                position: point,
                html: contentString
            });
            google.maps.event.addListener(marker, 'click', function() {
                infowindow.setContent(this.html);
                infowindow.open(map,this);
            });

            // add this marker to our array
            markers.push(marker);
        }
    });
} 
```

# svn - 如何使用 Redmine 和 Subversion 获取存储库的 url？

> ID：14815616
> 
> 赞同：1
> 
> 时间：2013-02-11T15:47:43.133
> 
> 标签：svn, repository

我有一个关于 Bitnami 的 Subversion 和 Redmine 堆栈下的 SVN 存储库的初学者问题。

我在 Linux 服务器中有以下内容： opt/Subversion-1.7.5.0 opt/Redmine-2.2.2.0 opt/MYREPO

我用过`svadmin create MYREPO`。

我可以在浏览器管理中将存储库添加到 Redmine 项目。它接受`file:///opt/MYREPO`.

我想通过 Internet 从另一台计算机上使用此存储库。（结帐、提交等）我怎样才能做到这一点？所述存储库的地址是什么？（例如，如果我尝试通过 Web 访问存储库，我应该输入什么 URL？）

感谢您的帮助，西罗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T16:36:00.440

URL 将取决于您的服务器如何向 Internet 公开，以及您如何为存储库提供服务（svnserve、svnserve via ssh、HTTP、HTTPS）。

如果您还没有设置服务器（听起来好像还没有），请从[这里](http://svnbook.red-bean.com/en/1.7/svn.serverconfig.html)开始。您可能会发现设置预构建的服务器包更方便，例如[uberSVN](http://www.ubersvn.com/)或[Subversion Edge](http://www.collab.net/products/subversion)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T11:28:55.557

可以在下面找到

```
svn://HOST/pathtorepository 
```

# ios - iOS 对内存中修改的对象执行回调

> ID：14815618
> 
> 赞同：0
> 
> 时间：2013-02-11T15:47:50.303
> 
> 标签：ios, memory-management, callback, asynccallback

我不确定这在 iOS 和 Objective-C 领域内是否可行，但是，能够做到这一点会大大简化......

每当在内存中修改 NSObject 时，我希望能够执行由 @selector 或类似方式调用的一个（或多个）操作。回调的替代方案是通过定时线程的轮询机制，但这似乎过度且效率低下。

我还没有找到这样的答案或例子，但是，可能有人肯定知道。

# urllib2 - python3 urllib.request.urlopen 超时错误

> ID：14815619
> 
> 赞同：3
> 
> 时间：2013-02-11T15:47:53.393
> 
> 标签：urllib2, urllib, python-3.3

我有脚本女巫从网站获取数据。首先，我用 2.7 python 及其作品编写了它。当我将其重写为 python3 时，我遇到了问题。在 python2.7 中工作正常

```
 for x in xrange(len(ll.string2)-1):
            psR = urllib2.urlopen(ll.string2[x]).read()
            nrL = Przystanek()  
            nrL.feed(psR)
            self.BusExtData += nrL.string2 
```

蟒蛇3

```
 for x in range(len(ll.string2)-1):
             psR = urllib.request.urlopen(ll.string2[x],timeout=3000).read().decode('iso-8859-2')
             nrL = Przystanek() 
             nrL.feed(psR)
             self.BusExtData += nrL.string2 
```

上层代码产生超时错误。

```
 i = 0      
 while i<(len(ll.string2)-1):           
 try:
                psR = urllib.request.urlopen(ll.string2[i],timeout=3000).read().decode('iso-8859-2')
                nrL = Przystanek()
                nrL.feed(psR)
                self.BusExtData += nrL.string2
                i=i+1           
except:
                print("Error")
                i=i-1

                pass 
```

我用大写避免了这个问题。但我不知道为什么 urllib2.urlopen 不会产生超时错误。当我使用 urllib.request.urlopen 时，我收到此错误消息：

> urllib.error.URLError:urlopen 错误超时

或者

> urllib.error.URLError:urlopen 错误超时 [WinError 10060]

urllib2.urlopen 和 urllib.request.urlopen 有什么区别？

# node.js - 如何在mongodb的键值对中查找特定字符串

> ID：14815621
> 
> 赞同：1
> 
> 时间：2013-02-11T15:47:59.853
> 
> 标签：node.js, mongodb

我在 mongodb 中有这样的数据

```
[

{
  "name":"silvester",
  "product":"laptop,iphone,mobile,phone"
},

{
   "name":"john",
   "product":"cycle,bus,phone,laptop"
},

{
   "name":"franklin",
   "product":"cycle,phone"
}

] 
```

如何在产品密钥中找到该笔记本电脑。如果产品密钥看起来像这样

```
{
"name":"XXX",
"product":"laptop"
} 
```

我可以通过使用它轻松找到该名称`db.collection.find("product":"laptop");`

那么如何找到这个呢？

也让我知道这三个使用backbone.js和node.js和mongodb技术运行的网站名称，例如www.trello.com。对不起我最糟糕的英语..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T16:02:52.000

[在 mongodb 中使用正则表达式](http://docs.mongodb.org/manual/reference/operator/regex/)

这对我有用

db.collection.find({"product": /laptop/})

**更新的答案**

如果您想使用变量，请尝试以下操作：

```
var abc = "laptop";
// other stuff
userdetails.find({"product":new RegExp(abc)}).toArray(function(err,result){
  if (err) console.log ("error: "+err);
  else 
  {    
    // if you want the length
    console.log(result.length);
    // if you actually want to see the results
    for (var i = 0; i < result.length; i++)
    {
      console.log(result[i]);
    }
  }
}); 
```

**再更新一次**

```
var abc = "laptop";
// other stuff

// note this is case sensitive.  if abc = "Laptop", it will not find it
// to make it case insensitive, you'll need to edit the RegExp constructor
// to this: new RegExp("^"+abc+",|, "+abc+"(?!\w)", "i")

userdetails.find({"product":new RegExp("^"+abc+",|, "+abc+"(?!\w)")}).toArray(function(err,result){
  if (err) console.log ("error: "+err);
  else 
  {    
    // if you want the length
    console.log(result.length);
    // if you actually want to see the results
    for (var i = 0; i < result.length; i++)
    {
      console.log(result[i]);
    }
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T00:45:17.797

正则表达式可以正常工作。还有一个好消息，monogdb 将在即将发布的版本中发布全文搜索索引

[http://docs.mongodb.org/manual/release-notes/2.4/#text-indexes](http://docs.mongodb.org/manual/release-notes/2.4/#text-indexes)

# gwt - 如何在 GWT 中的 CellTable 上创建无限滚动？

> ID：14815622
> 
> 赞同：3
> 
> 时间：2013-02-11T15:48:00.790
> 
> 标签：gwt

如何创建具有无限滚动的 GWT Cell 表？我正在寻找一个类似于 DZone 首页的答案，用户可以在其中使用鼠标或键盘滚动。这甚至可能与 GWT 可能是一个子问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T16:04:24.847

我不认为他们会无限滚动，看起来更像是在您滚动到面板底部之后，正在添加更多数据。

如何在 GWT 中实现这样的目标？首先，我认为您应该查看[ScrollEvent](http://google-web-toolkit.googlecode.com/svn/javadoc/2.0/com/google/gwt/event/dom/client/ScrollEvent.html)，捕获事件，然后尝试从中滚动位置

# html - html元素的正确用例是什么？

> ID：14815626
> 
> 赞同：9
> 
> 时间：2013-02-11T15:48:15.407
> 
> 标签：html, icons, italic

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T15:51:32.070

它应该用于使文本样式为斜体。斜体文本的大多数语义用途是`<em>`，因为屏幕阅读器支持它以进行强调。

`<i>`并且`<b>`逐渐过时，支持使用 CSS 来设置文本样式，`<em>`并`<strong>`出于可访问性的原因保留。

我猜它是为图标选择的，因为它是最接近的元素并且具有字母意义（即 i = 图标）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T15:51:31.757

```
<i>  was the old way to make text italic in HTML. 
```

该标签现在已经在 HTML5 中重新定义，我相信 TwitterBootstrap 只是将这个约定用于图标，但它绝对不是制作图标的标准方式。

[http://w3.org/International/questions/qa-b-and-i-tags](http://w3.org/International/questions/qa-b-and-i-tags)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T15:51:36.780

因为 HTML 已经变得很变态了。

HTML 4.01 中的官方“正确使用”用于斜体文本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T15:52:51.260

[不鼓励](http://wiki.whatwg.org/wiki/FAQ#Why_are_some_presentational_elements_like_.3Cb.3E.2C_.3Ci.3E_and_.3Csmall.3E_still_included.3F)使用该`<i>`标签，因为它没有提供有关文本*为何*是斜体的语义指示。

 *要显示斜体文本，`<em>`应使用标记。（或具有适当语义含义的不同标签，结合 CSS）

最近，人们开始`<i>`为图标使用标签，因为它`i`代表*icon*。*

# mysql - on 子句错误中的未知列

> ID：14815627
> 
> 赞同：1
> 
> 时间：2013-02-11T15:48:20.140
> 
> 标签：mysql, sql, join, left-join, cross-join

嘿伙计们，我非常接近能够表示我希望显示的数据有问题的列是`a.state_Id`。我从我所做的研究中了解到，这`a.State_Id`超出了范围。我的 sql 语句缺少什么？

如果我只取出`a.State_ID = c.State_Id`剩下`b.Product_Id = c.Product_Id`的数据，则显示数据，但我需要匹配状态和产品。

我知道我需要在另一个`join`地方添加，但我不确定如何。如果有人可以帮助我，那就太棒了！

```
SELECT a.state_id, 
       a.state_name, 
       a.state_abbreviatedname, 
       b.product_id, 
       b.product_name, 
       c.stateproduct_price 
FROM   states a, 
       products b 
       LEFT OUTER JOIN stateproducts c 
ON a.state_id = c.state_id AND b.product_id = c.product_id 
```

**更新 1**

状态表已填充并包含以下字段：

```
State_Id
State_Name
State_AbbreviatedName 
```

已填充以包含基本产品的 Products 表。此表具有以下字段：

```
Product_Id
Product_Name 
```

每个州都有相同的产品，但是每种产品的价格会随着每个州的变化而变化。这就是为什么我有 StateProducts 表的原因。这个表是空的，会被我创建的一个界面一一填充。statesproducts 表将包含以下字段

```
State_Id //reference/relational field to be user for comparison
Product_Id //reference/relational field to be user for comparison
StateProduct_Price //new field 
```

所以我知道我将在价格列中收到 NULL 值。

我已经能够返回美国和产品表的一种 cartesion 产品。但是，我现在需要在此 cartesion 表的右侧附加每个组合的价格。记住 stateproducts 表是空的，我将如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T15:50:51.130

我猜你有一个`Many-to-Many`关系，其中`States`可以有多个`Products`并且`Products`可以在不同的`States`. 所以你需要加入`States`映射表`StateProducts`，这样你就可以得到表上的产品`Products`。

```
SELECT  a.State_ID, 
        a.State_Name, 
        a.State_AbbreviatedName, 
        b.Product_Id, 
        b.Product_Name, 
        c.StateProduct_Price
FROM    States a
        INNER JOIN StateProducts c
            ON a.State_ID = c.State_Id
        INNER  JOIN Products b 
            ON b.Product_Id = c.Product_Id 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

**更新 1**

使用`CROSS JOIN`关键字，

```
SELECT a.state_id, a.state_name, a.state_abbreviatedname, b.product_id, b.product_name, c.stateproduct_price 
FROM   states a 
       CROSS JOIN products b 
       LEFT OUTER JOIN stateproducts c
          ON a.state_id = c.state_id AND 
             b.product_id = c.product_id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T15:53:08.143

从A到C，C到B。

通过为每个执行 LEFT JOIN，您仍然会得到所有可能的状态，而不管是否有实际的状态产品。

```
SELECT 
      a.State_ID, 
      a.State_Name, 
      a.State_AbbreviatedName, 
      b.Product_Id, 
      b.Product_Name, 
      c.Product_Price 
   FROM 
      States a
         LEFT  JOIN StateProducts c 
            ON a.State_ID = c.State_Id 
            LEFT JOIN Products b 
               ON  c.Product_Id = b.Product_Id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T15:51:51.403

尝试像这样编写 from 子句：

```
from StateProducts c join
     States a
     on c.state_id = c.state_id join
     Products b
     on c.product_id = b.product_id 
```

对于笛卡尔积（即获取状态和积的所有示例）：

```
SELECT s.state_id, s.state_name, s.state_abbreviatedname, 
       p.product_id, p.product_name, 
       sp.stateproduct_price 
from States s cross join
     Products p left outer join
     StateProducts sp
     on sp.state_id = s.state_id and
        sp.product_id = p.product_id 
```

# mongoose - Mongoose 查询用户图

> ID：14815632
> 
> 赞同：0
> 
> 时间：2013-02-11T15:48:30.473
> 
> 标签：mongoose

我有一个用户喜欢

```
name : {
  type : String
},
organizations : [{
  type : mongoose.Schema.ObjectId,
  ref : 'Organization'
}] 
```

和这样的组织：

```
name : {
  type : String
},
members : [
  user : {
    type : mongoose.Schema.ObjectId,
    ref : 'User'
  },
  role : {
    type : String
  }
] 
```

如果我想获取用户可以访问的每个用户，比如说他组织的成员列表中的所有用户，我该如何进行查询（填充用户会很好）？

为了让我想到的所有组织：

`Organization.find({ '_id' : { $in: user.organizations } }).exec(function (err, organizations) { });`

我想避免多次查询，感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T07:59:53.567

我通过查询用户所在的所有组织来完成此操作，填充所有帐户字段并将它们合并到一个数组中，我将其作为响应发送：

```
Organization.find({ '_id' : { $in: userOrganizations } }).populate('owner').populate('members.user').exec(function (err, organizations) {

    var accounts = [];

    organizations.forEach(function (organization) {
        organization.members.forEach(function (member) {
            accounts.push(member.user);
        });

        accounts.push(organization.owner);
    });

    res.send(accounts);
}); 
```

# mercurial - hg 撤消覆盖

> ID：14815636
> 
> 赞同：0
> 
> 时间：2013-02-11T15:48:53.607
> 
> 标签：mercurial, undo

不小心用`>`了`>>`！

被覆盖的文件是`hg add`两天前添加的，但从未提交。

可以`hg`为我撤消（也许通过魔法）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T15:51:23.407

不。

如果您使用的是 Eclipse，则可以查看“本地历史”。

如果您使用 Mac，Timemachine 可能已经保存了该文件。

如果您使用带有 btrfs 的 openSUSE，zypper 快照机制可能会保留一份副本。

# c# - 使用 Convert.ToDateTime 将字符串转换为 DateTime

> ID：14815638
> 
> 赞同：2
> 
> 时间：2013-02-11T15:49:00.830
> 
> 标签：c#, xml, xml-parsing

我很沮丧。我在玩 xml 文件。所以这是我自动创建的 xml 文件：

```
<Files>
<Lists>
    <oList>
      <Object>
        <Name>test1</Name>
        <DateCreated>2/11/2013 4:35:05 PM</DateCreated>
        <DateDeadline>2/17/2013 12:00:00 AM</DateDeadline>
        <Reward>none</Reward>
        <Description>chocolate amedei 9</Description>
      </Object>
    </oList>
  </Lists>
</Files> 
```

开头的许多起始元素必须在那里，因为我想稍后扩展文件。所以现在我想读取这个 xml 文件并创建一个类的对象（ThingsToDoObjects，它应该有一天会成为一个待办事项列表），它需要存储在 xml 文件中的参数。此对象应存储在列表中。所以这就是我到目前为止所拥有的：

```
XmlDocument xmlListDoc = new XmlDocument();
            xmlListDoc.Load(xmlFilePath);
            foreach (XmlNode xnode in xmlListDoc.SelectNodes("Files/Lists/oList/Object"))
            {
                string n = xnode.SelectSingleNode("Name").InnerText.ToString();
                DateTime c = Convert.ToDateTime(xnode.SelectSingleNode("DateCreated").InnerText.ToString());
                DateTime d = Convert.ToDateTime(xnode.SelectSingleNode("DateDeadline").InnerText.ToString());

                string r = xnode.SelectSingleNode("Reward").InnerText.ToString();
                string de = xnode.SelectSingleNode("Description").InnerText.ToString();
                ThingsToDoObjects NeuObject = new ThingsToDoObjects(n, c, d, r, de);
                o.Add(NeuObject);
            } 
```

现在，当我调试时，会发生以下情况： n 创建得很好， c 创建得很好。但是 d 不起作用。它给出了一个错误：

> “该字符串未被识别为有效的日期时间”

（那是我从德语翻译过来的，所以这个错误可能会被称为有点不同。那里发生了什么？我希望我只是犯了一些愚蠢的错误。

顺便说一句：我尝试了该`ParseExactly()`方法，但它也不起作用并给出了同样的错误。

在此先感谢所有回答的人。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T15:51:58.490

（我假设您不能更改 XML 格式本身。按照 dtb 的建议，使用标准格式会更好。*）*

如果您有*已知*格式的文本，请使用`DateTime.ParseExact`或`DateTime.TryParseExact`。如果您给它们正确的格式，它们*将起作用。*在这些情况下，我通常也使用不变的文化进行解析——你不希望用户文化的日期分隔符等把事情搞砸。在这种情况下，看起来您想要的格式字符串是`"M/d/yyyy h:mm:ss tt"`.

示例代码：

```
using System;
using System.Globalization;

class Test
{
    static void Main()
    {
        string text = "2/17/2013 12:00:00 AM";
        string format = "M/d/yyyy h:mm:ss tt";
        DateTime value = DateTime.ParseExact(text, format,
                                             CultureInfo.InvariantCulture,
                                             DateTimeStyles.None);
        Console.WriteLine(value);
    }
} 
```

如果可以的话，我也强烈建议使用 LINQ to XML。它将使您的 XML 处理比您当前的代码简单得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T16:07:49.860

既然你提到从德语翻译，我会假设你在德国。您可能正在尝试将日期解析为“您”。我的意思是使用德国文化格式化程序 (dd/mm/yyyy) 解析日期，并且没有第 17 个月可以解析。

尝试改用这个：

```
Convert.ToDateTime(value, CultureInfo.InvariantCulture.DateTimeFormat); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T15:54:03.477

有一种[标准方法可以在 XML 中格式化日期/时间值](https://stackoverflow.com/questions/254753/what-is-the-correct-format-to-use-for-date-time-in-an-xml-file-net)：

```
<DateCreated>2013-11-02T04:35:05</DateCreated> 
```

[您可以使用XmlConvert.ToDateTime 方法](http://msdn.microsoft.com/en-us/library/ms162342.aspx)解析此格式：

```
DateTime result = XmlConvert.ToDateTime("2013-11-02T04:35:05",
                                        XmlDateTimeSerializationMode.Utc); 
```

或者，更好的是，看看[LINQ-to-XML](http://msdn.microsoft.com/en-us/library/bb387098.aspx)并使用[XElement to DateTime Explicit Conversion](http://msdn.microsoft.com/en-us/library/bb343203.aspx)：

```
DateTime result = (DateTime)obj.Element("DateCreated"); 
```

# javascript - 试图在记忆游戏中显示图像

> ID：14815640
> 
> 赞同：0
> 
> 时间：2013-02-11T15:49:04.867
> 
> 标签：javascript, html, css, dom

好的，这是我的问题。我正在创建一个包含一些图像的记忆游戏。我无法理解在使用 for-loop onLoad 函数将其设置为 display='none' 后如何显示图像。

我已经尝试了几个小时没有结果。=(

任何人都可以帮助我吗？

而且 elem.id 指向一个 td id，所以它是动态的。这很棘手，因为在每个 td 中都有一个 img。

我衷心感谢您的帮助。

这是我的代码：

```
 var clicked = true;
    var firstClick;
    var secondClick;
    var firstPlayer = true;
    var addPointPlayer1 = 0;
    var addPointPlayer2 = 0;
    var totalPoints = 8;

    function clickCard(elem){       

    //document.getElementsByTagName('img').style.display = "";

    if(clicked){
        firstClick = document.getElementById(elem.id);
    //  document.getElementsByName(/.img/).style.visibility="visible";
        firstClick.style.backgroundColor= "white";
        clicked = false;

        }

    else{

        secondClick = document.getElementById(elem.id);
        secondClick.style.backgroundColor = "white";

            if(firstClick.innerHTML == secondClick.innerHTML){
                firstClick.style.backgroundColor="white";
                secondClick.style.backgroundColor="white";
                if(firstPlayer){
                    addPointPlayer1++;
                    totalPoints--;
                    }
                else{
                    addPointPlayer2++;
                    totalPoints--;
                    }

                }

            else {
                alert('This is not a pair, player change');
                firstClick.style.backgroundColor="#7f1a1a"; 
                secondClick.style.backgroundColor="#7f1a1a";
                if(firstPlayer){
                    firstPlayer = false;
                    }
                    else{
                        firstPlayer = true;
                    }           
                }

            clicked = true;

            }

            //Keeping control of the winner
            if(totalPoints == 0){
                if(addPointPlayer1 > addPointPlayer2){
                    alert("Game over! Player 1 wins with " +    addPointPlayer1 + " points" + addPointPlayer2);
                    }
                    else if (addPointPlayer1 == addPointPlayer2){
                        alert("This is a draw press cmd+R for a rematch");
                        }

                else{
                    alert("Game over! Player 2 wins with " + addPointPlayer2 + " points against " + addPointPlayer1);
                    }
            }

    }

    //creates a blank game-plan
    function hideGamePlan(){
    var images = document.getElementsByTagName('img');
    for (i = 0; i < images.length;i++ ) {
        images[i].style.display = "none";

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:55:38.277

如果您将显示设置为无，那么您应该在其他地方将显示设置为某些东西 - 即块。

我推荐这个寻求帮助：[http ://www.w3schools.com/cssref/pr_class_display.asp](http://www.w3schools.com/cssref/pr_class_display.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T17:48:24.910

在`if(clicked){firstClick = document.getElementById(elem.id);` 我猜你的问题是找到儿童图像标签元素之后

如果是这种情况，您可以使用 find("img")

我是说

```
if(clicked){
        firstClick = document.getElementById(elem.id);
        elemtochange = firstClick.find("img");
        // Changing image style here
        elemtochange.style.display ="block";
} 
```

或者您可能希望通过 Jquery 为您做同样的事情

```
if (clicked){
     $(elem).children("img").show(); // elem = Clicked element
} 
```

而不是`show`您可以使用`hide`隐藏元素或`toggle`在每次单击时在显示和隐藏之间切换显示

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T13:40:25.673

我已经解决了这个问题

```
 function clickCard(elem){      

    if(!clicked){
        firstClick = document.getElementById(elem.id);
        firstClick.style.backgroundColor= "white";
        findImage[firstClick.id-1].style.visibility="visible";
        clicked = true;
        //alert(findImage);

        }

    else{
        secondClick = document.getElementById(elem.id);
        secondClick.style.backgroundColor = "white";
        findImage[secondClick.id-1].style.visibility="visible"; 
    //  firstClick.getAttribute('src');
    //  secondClick.getAttribute('src');

            if(firstClick.innerHTML == secondClick.innerHTML){

                firstClick.style.backgroundColor="white";
                secondClick.style.backgroundColor="white";

                if(firstPlayer){
                    addPointPlayer1++;
                    totalPoints--;
                    }
                else{
                    addPointPlayer2++;
                    totalPoints--;
                    }

                }

            else {

                alert('This is not a pair, player change');

                firstClick.style.backgroundColor="#7f1a1a";
                secondClick.style.backgroundColor="#7f1a1a";
                findImage[firstClick.id-1].style.visibility="hidden";
                findImage[secondClick.id-1].style.visibility="hidden";

                if(firstPlayer){
                    firstPlayer = false;                        
                    //findImage[elem.id-1].style.visibility="hidden";
                    }
                    else{
                        firstPlayer = true;
                    }           
                }

            clicked = false;
            }

            //Keeping control of the winner
            if(totalPoints == 0){
                if(addPointPlayer1 > addPointPlayer2){
                    alert("Game over! Player 1 wins with " + addPointPlayer1 + " points" + addPointPlayer2);
                    }
                    else if (addPointPlayer1 == addPointPlayer2){
                        alert("This is a draw press cmd+R for a rematch");
                        }

                else{
                    alert("Game over! Player 2 wins with " + addPointPlayer2 + " points against " + addPointPlayer1);
                    }
            }

 }

 function hideGamePlan(){
findImage = document.getElementsByTagName('img');
for (i = 0; i < findImage.length;i++ ) {
    findImage[i].style.visibility = "hidden";
    }

 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-01T18:41:55.200

谢谢大家的回复！我最终只是将提交按钮放在顶部..

```
<form action = "/memory-game/index.php" method = "POST">
<input type="submit" name="dog" value="Dog" />
<input type="submit" name="cat" value="Cat" />
<input type="submit" name="fish" value="Fish" />
<input type="submit" name="zoo" value="Zoo" />
<input type="submit" name="xmas" value="Xmas" />
<input type="submit" name="pen" value="Pengins" />
</form> 
```

然后对于另一个页面这样做：

```
if(isset($_POST['dog'])){$currentArr = $dogArr;}
elseif(isset($_POST['cat'])){$currentArr = $catArr;}
elseif(isset($_POST['fish'])){$currentArr = $fishArr;}
elseif(isset($_POST['xmas'])){$currentArr = $xmasArr;}
elseif(isset($_POST['pen'])){$currentArr = $penginArr;}
elseif(isset($_POST['zoo'])){$currentArr = $zooArr;} 
```

# javascript - 添加一行以更改表列的标题并使用 jQuery 在标题顶部添加行

> ID：14815643
> 
> 赞同：1
> 
> 时间：2013-02-11T15:49:29.503
> 
> 标签：javascript, jquery, gridview

我有下表。 ![在此处输入图像描述](../Images/875e030f04c9d159fa021f28635176c4.png)

我想从列标题中删除城市名称并将其放在顶部。如下： ![在此处输入图像描述](../Images/c68cd0f865c84086b2dc8cddaca7fd71.png)

**带有城市名称的列是在代码中动态添加的，并且可以是任何数字，即 0、1 到任何数字。**

表结构为：

```
<table class="gvv1" cellspacing="0" rules="all" border="1" id="MainContent_gvActivities"
style="border-collapse: collapse;">
<tr style="background-color: buttonface;">
    <th scope="col">
        &nbsp;
    </th>
    <th scope="col">
        Cluster
    </th>
    <th scope="col">
        Activity
    </th>
    <th scope="col">
        Data
    </th>
    <th scope="col">
        <b>London_Tasks</b>
    </th>
    <th scope="col">
        <b>London_Achieved</b>
    </th>
    <th scope="col">
        <b>Geneva_Tasks</b>
    </th>
    <th scope="col">
        <b>Geneva_Achieved</b>
    </th>
</tr>
<tr>
    <td>
        <input id="chkSelected_0" type="checkbox" />
    </td>
    <td style="width: 50px; white-space: nowrap;">
        ER.
    </td>
    <td style="width: 50px; white-space: nowrap;">
        Provision
    </td>
    <td style="width: 60px; white-space: nowrap;">
        number
    </td>
    <td>
        <input name="ctl00Activitiesl00" type="text" value="-1.00" />
    </td>
    <td>
        <input name="ctl00Activitiesl01" type="text" value="-1.00" />
    </td>
    <td>
        <input name="ctl00Activitiesl02" type="text" value="-1.00" />
    </td>
    <td>
        <input name="ctl00Activitiesl03" type="text" value="-1.00" />
    </td>
</tr>
<tr>
    <td>
        <input id="chkSelected_1" type="checkbox" />
    </td>
    <td style="width: 50px; white-space: nowrap;">
        ER.
    </td>
    <td style="width: 50px; white-space: nowrap;">
        support
    </td>
    <td style="width: 60px; white-space: nowrap;">
        campaign (Numbers)
    </td>
    <td>
        <input name="ctl0Activities200" type="text" value="-1.00" />
    </td>
    <td>
        <input name="ctl0Activities201" type="text" value="-1.00" />
    </td>
    <td>
        <input name="ctl0Activities202" type="text" value="-1.00" />
    </td>
    <td>
        <input name="ctl0Activities203" type="text" value="-1.00" />
    </td>
</tr>      
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:31:08.163

一、jsFiddle：http: [//jsfiddle.net/52jZC/](http://jsfiddle.net/52jZC/)

这使用 jQuery 并且将动态地与任何具有相同结构的表一起使用类名`gvv1`。您可以根据需要进行更改：

```
<script>
// This function was taking from here: http://stackoverflow.com/questions/2815683/jquery-javascript-replace-tag-type
(function($) {    
        $.fn.replaceTagName = function(replaceWith) {
                var tags = [],
                        i    = this.length;
                while (i--) {
                        var newElement = document.createElement(replaceWith),
                                thisi      = this[i],
                                thisia     = thisi.attributes;
                        for (var a = thisia.length - 1; a >= 0; a--) {
                                var attrib = thisia[a];
                                newElement.setAttribute(attrib.name, attrib.value);
                        };
                        newElement.innerHTML = thisi.innerHTML;
                        $(thisi).after(newElement).remove();
                        tags[i - 1] = newElement;
                }
                return $(tags);
        };
})(window.jQuery);

$(function() {
        // This formats each table w/ the class 'gvv1' as specified in your question
            $('.gvv1').each(function(i, v) {
            city1 = $(this).find('th:eq(4)').text().split('_');
            city1 = city1[0];
            var city2 = $(this).find('th:eq(6)').text().split('_');
            city2 = city2[0];
            $(this).find('th:eq(4)').text('Tasks');
            $(this).find('th:eq(5)').text('Achieved');
            $(this).find('th:eq(6)').text('Tasks');
            $(this).find('th:eq(7)').text('Achieved');

            $(this).find('th').replaceTagName('td');

            $(this).prepend('<thead><tr><th colspan="4">&nbsp;</th><th colspan="2">' + city1 + '</th><th colspan="2">' + city2 + '</th></tr></thead>');

        });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T15:55:00.200

您将需要更改

> `<th>'s`

到一个

> `<td>`

首先并适当地为该行指定一个类和样式，以使其看起来像您想要的标题

```
<tr class="NewClass" style="background-color: buttonface;">
    <td scope="col">
        &nbsp;
    </td>
    <td scope="col">
        Cluster
    </td>
    <td scope="col">
        Activity
    </td>
    <td scope="col">
        Data
    </td>
    <td scope="col">
        <b>London_Tasks</b>
    </td>
    <td scope="col">
        <b>London_Achieved</b>
    </td>
    <td scope="col">
        <b>Geneva_Tasks</b>
    </td>
    <td scope="col">
        <b>Geneva_Achieved</b>
    </td>
</tr> 
```

当触发更改表的事件时使用 .before

```
$('TriggerEntity').click(function(){

('.NewClass').before('<tr><th>&nbsp</th><th>London</th>...');

}); 
```

# .htaccess - htaccess 重写已被 Google 索引的重写 URL

> ID：14815653
> 
> 赞同：2
> 
> 时间：2013-02-11T15:49:58.877
> 
> 标签：.htaccess, seo

例子：

1) 网址（结构不佳）已被 Google 索引：
www.abc.com/index.php ?product=zzz

2) 使用以下重写规则重写 URL：
RewriteRule ^zzz$ index.php?product=zzz [L,NC]

上述工作正常，但我们想告诉 Google 该页面已从 (1) URL www.abc.com/index.php?product=zzz 中的 URL 永久移动到 (2) www.abc 中的 URL。 com/zzz

3）所以现在我们在规则（2）之上应用以下规则：
RewriteCond %{QUERY_STRING} ^product=zzz [NC]
RewriteRule index [http://www.abc.com/zzz](http://www.abc.com/zzz)？[左，右=301]

这会导致无限循环。我们如何告诉 Google 我们的网站已从 www.abc.com/index.php?product=zzz 更改为 www.abc.com/zzz？或者谷歌会自己做这件事吗？

-----当前完整的htaccess规则导致无限循环：-----

RewriteCond %{QUERY_STRING} ^product=zzz [NC]
RewriteRule 索引[http://www.abc.com/zzz](http://www.abc.com/zzz) ? [左，右=301]

RewriteRule ^zzz$ index.php?product=zzz [L,NC]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:55:20.463

用以下代码替换您现有的规则：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+index\.php\?product=([^\s&]+) [NC]
RewriteRule ^ /%1? [R=301,L]

RewriteRule ^(zzz)/?$ /index.php?product=$1 [L,NC,QSA] 
```

# regex - 使用 LINQ to SQL 查询的 RegEx 过滤数据以显示在 UI 上

> ID：14815658
> 
> 赞同：0
> 
> 时间：2013-02-11T15:50:18.837
> 
> 标签：regex, linq-to-sql

使用名为 Costcenter 的数据库 TABLE。我试图在下拉列表中显示 Costcenters，其中 CostcenrCode 只有三个数字字符。我试图在 ASP.Net WF 应用程序的 VIEW 上执行此操作。现在我已将其移至使用 LINQ to SQL 的 DataAccess 查询。我有点困惑，如何在我返回字符串的 LINQ 查询中做到这一点。我在最后选择 cc 填充数据库表中的所有成本中心。但我只需要拉一个就好了（例如100而不是F.C56）。

我的数据访问代码如下：

```
 public static IEnumerable<Costcenter> GetAllCostcentersByCountryCompanyProfitcenterYear(short year, int companyID)
    {
        List<Costcenter> costcenters = new List<Costcenter>();
        using (var context = new CostReportEntities())
        {
            costcenters = (from cc in context.Costcenters
                           join company in context.Companies on cc.CompanyID equals company.CompanyID
                           where cc.Year == year && cc.CompanyID == companyID
                           select cc).ToList();

        }
        return costcenters;

    } 
```

我一直在这里查看一些帖子，但由于我是 LINQ to SQL 的新手，所以无法将任何内容放在一起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:37:56.020

这可能会奏效：

```
var costcenters = (from cc in context.Costcenters
                    join company in context.Companies on cc.CompanyID equals company.CompanyID
                    where cc.Year == year && cc.CompanyID == companyID &&
                       SqlMethods.Like(cc.CostcenrCode, "[0-9][0-9][0-9][^0-9]%")
                    select cc).ToList(); 
```

来源：

[LINQ to SQL 查询以确定值是否以数字开头](https://stackoverflow.com/a/5702473/558486)

编辑 1 - 添加替代解决方案，使用`SqlMethods.PatIndex`：

```
var costcenters = (from cc in context.Costcenters
                    join company in context.Companies on cc.CompanyID equals company.CompanyID
                    where cc.Year == year && cc.CompanyID == companyID &&
                       SqlMethods.PatIndex("[0-9][0-9][0-9][^0-9]%", cc.CostcenrCode) > 0
                    select cc).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T16:53:18.203

您可以使用`Regex.Match`，但您需要先*具体化*您的数据。你说，这是下拉列表的数据，所以这个解决方案可能是可以接受的：

```
costcenters =  (
        from cc in context.Costcenters
        join company in context.Companies on cc.CompanyID equals company.CompanyID
        where cc.Year == year && cc.CompanyID == companyID
        select cc
    ).AsEnumerable()
    .Where(cc => Regex.IsMatch(cc.CostcenrCode, @"^\d{3}$"))
    .ToList(); 
```

这里的技巧在于[`AsEnumerable()`](http://msdn.microsoft.com/en-us/library/bb335435.aspx)枚举您的数据的方法，之后您可以对您的数据应用正则表达式方法。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-11T15:57:10.943

```
using System.Text.RegularExpressions;
    ...
costcenters = (from cc in context.Costcenters
                    join company in context.Companies on cc.CompanyID equals company.CompanyID
                    where cc.Year == year && cc.CompanyID == companyID &&
                       Regex.IsMatch(cc.CostcenrCode, @"^\d{3}$");
                    select cc).ToList(); 
```

# mysqli - 如何使用 MYSQLi 检查电子邮件是否存在

> ID：14815664
> 
> 赞同：-1
> 
> 时间：2013-02-11T15:50:48.063
> 
> 标签：mysqli

我今年 11 岁，正在为我和我的朋友创建一个聊天网站。我正在使用 MYSQLi 来处理数据库的事情，而且我对它有点陌生。我一直使用普通的mysql。

哦！如果你能分享一个mysqli教程的链接，那就太好了:)

好吧，这是我的配置文件

```
 <?PHP                     

define("HOST", "localhost");  define("USER", "root");  define("PASSWORD", "****"); define("DATABASE", "secure_login");

$mysqli = new mysqli(HOST, USER, PASSWORD, DATABASE);

?> 
```

数据库是secure_login，然后我有一个名为 members 的表，然后在该表中有一个名为 email 的列。

我将它包含在一个文件（register.php）中，我必须在其中检查电子邮件是否存在。如果它存在，重定向到家。

如果你们能帮助我，那就太好了！！！我希望尽快完成这个:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:41:37.430

我将从阅读[http://php.net/manual/en/book.mysqli.php](http://php.net/manual/en/book.mysqli.php)`MySQLi`上的文档开始，特别是与类相关的方法。如果您需要教程，我建议您在 Google 上搜索，网络上有大量教程。

至于你的问题，这样的事情应该有效：

```
$query = "SELECT email FROM members WHERE USER = ? AND PASS = ?";

if ($stmt = $mysqli->prepare($query)){
        // Bind the parameters, these are the ?'s in the query.
        $stmt->bind_param("ss", $username, sha1($password));
        // Execute the statement
        if($stmt->execute()){
            // get the results from the executed query
            $stmt->store_result();

            $email_res= "";         
            // This stores the value of the emailaddres inside $email_res
            $stmt->bind_result($email_res);

            $stmt->fetch();

            // There is a result
            if ($stmt->num_rows == 1){

                             // Validate the emailadres here, check the PHP function filter_var() 

            }
            else {
                   // Not a valid email
            }
        }
        else {
            printf("Execute error: %s", $stmt->error);
        }

    }
    else {
        printf("Prepared Statement Error: %s\n", $mysqli->error);
    }
} 
```

我希望这有帮助

# mysql - 使用 CONCAT 函数添加到 mysql 列中的现有值？

> ID：14815668
> 
> 赞同：9
> 
> 时间：2013-02-11T15:50:59.040
> 
> 标签：mysql, sql, sql-update

试图使用 mysql 的 concat 函数将文本添加到 mysql 中的现有值？

所以现有值当前是“john”，函数运行后将是“johnewvalue”

我正在尝试在我的数据库 ptb_messages 的主题列中的现有文本中添加一段文本“：回复”。

我正在尝试使用 mysql 的 concat 函数来做到这一点，但我没有得到任何结果。

```
$sql = mysql_query("UPDATE ptb_messages SET subject = CONCAT subject, 'newvalue' WHERE id='".$message_id."'"); 
```

有人可以告诉我一种让它做我想做的事情的方法。谢谢。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-11T15:52:03.343

它应该是

```
UPDATE ptb_messages 
SET subject = CONCAT( subject, 'newvalue')
WHERE ... 
```

*   [MySQL 连接](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat)

在 PHP 中

```
$sql = mysql_query("UPDATE ptb_messages SET subject = CONCAT(subject, 'newvalue') WHERE id='".$message_id."'"); 
```

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

# ruby-on-rails - Rails - 有许多多态标记无法正常工作

> ID：14815670
> 
> 赞同：0
> 
> 时间：2013-02-11T15:51:02.987
> 
> 标签：ruby-on-rails, polymorphism, has-many-through, polymorphic-associations, tagging

我有两个用于标记的表，这样我就可以将标记附加到任何模型上，它的工作原理是这样的……</p>

有一个标记项连接表，它有一个 tag_id 列，然后是另外两个用于多态性的列：taggable_type 和 taggable_id…</p>

```
class TaggedItem < ActiveRecord::Base
  attr_accessible :taggable_id, :taggable_type, :tag_id

  belongs_to :taggable, :polymorphic => true
  belongs_to :tag
end 
```

还有所有可以带有标签的东西，例如，这是一个带有标签的产品和图像模型：

```
class Product < ActiveRecord::Base
  has_many :tagged_items, :as => :taggable, :dependent => :destroy
  has_many :tags, :through => :tagged_items
end

class Image < ActiveRecord::Base
  has_many :tagged_items, :as => :taggable, :dependent => :destroy
  has_many :tags, :through => :tagged_items
end 
```

问题在于标签模型，我似乎可以得到相反的工作，在标签模型上我想要一个 has_many 图像和 has_many 产品，如下所示：

```
class Tag < ActiveRecord::Base
  has_many :tagged_items, :dependent => :destroy
  has_many :products, :through => :tagged_items
  has_many :images, :through => :tagged_items
end 
```

这导致错误，我想知道如何解决这个问题。所以标签表通过多态标签项目表工作。

任何帮助将非常感激。谢谢！

编辑：

```
Could not find the source association(s) :product or :products in model TaggedItem. Try 'has_many :products, :through => :tagged_items, :source => <name>'. Is it one of :taggable or :tag? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T20:04:14.433

Tag 模型中的关联无法从模型中`has_many :through`获取源关联。例如，将在 TaggedItem 中寻找直接关联，在多态关联的情况下将其写为. 因此，为了让 Tag 模型了解关联的确切来源，我们需要添加一个选项及其类型为`Product``Image``TaggedItem``has_many :products, :through => :tagged_items``belongs_to :product``belongs_to :taggable, :polymorphic => true``:source``:source_type`

所以改变你的标签模型关联看起来像

```
class Tag < ActiveRecord::Base
  has_many :tagged_items, :dependent => :destroy
  has_many :products, :through => :tagged_items, :source => :taggable, :source_type => 'Product'
  has_many :images, :through => :tagged_items, :source => :taggable, :source_type => 'Image'
end 
```

这应该可以解决您的问题。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T16:19:33.240

`as`将标记关联设置到 TaggedItem 时 不需要该选项。`:as => :taggable`这意味着标记项目上的标记是多态的，而事实并非如此。相反，另一面是，即，您的名字巧妙地暗示了可标记的项目:)。

```
class Tag < ActiveRecord::Base
  has_many :tagged_items, :dependent => :destroy
  has_many :products, :through => :tagged_items
  has_many :images, :through => :tagged_items
end 
```

# c++ - C++：诸如“cv1 A”、“cv2 B”、“cv12 A”之类的符号

> ID：14815675
> 
> 赞同：-3
> 
> 时间：2013-02-11T15:51:14.163
> 
> 标签：c++

“cv1 A”、“cv2 B”、“cv12 A”等符号是什么意思？我无法理解

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T15:52:45.620

`cv`我们常用的一种表示法来指出该类型可以标记为`volatile`或`const`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T15:57:05.043

在 C++ 标准中，`cv`指的是所讨论类型的`const`和`volatile`限定符。`cv A`是“`A`以及它拥有的任何东西`const`和`volatile`限定词”的简写。添加一个数字 ( `cv1`, `cv2`) 只是一种机制，表示可能涉及不同的 cv 限定符集。

# java - 获取没有名字的jsonvalue

> ID：14815684
> 
> 赞同：-1
> 
> 时间：2013-02-11T15:51:43.750
> 
> 标签：java, android, json

我正在为 JSONObject 苦苦挣扎。我已经返回了一些 json 并成功地将其转换为对象和对象列表。我现在卡住了。

这是我得到的 JSONObject：

```
{"Result":true,"Messages":["Goe bezig!"]} 
```

我能够得到消息，但我似乎无法得到结果中的布尔值。有人能解释一下如何得到它吗？

这是代码：

```
public boolean Convert(JSONObject json) {
    try 
    {
        return json.getBoolean("Result");
    } 
    catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();

        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:15:17.527

这对我来说很好，虽然你的问题很模糊。

```
 String jsonString = "{\"Result\":true,\"Messages\":[\"Goe bezig!\"]}";

    JSONObject jsonObject = new JSONObject(jsonString);

    boolean result = (Boolean) jsonObject.get("Result");

    System.out.println(result); 
```

您可能还想在方法结束时捕获`Exception`：

```
try {
   return json.getBoolean("Result");
} catch (JSONException e) {
   e.printStackTrace(); // replace these with `Log` statement

   return false;
} catch (Exception e) {
   e.printStackTrace(); // replace these with `Log` statement

   return false;
} 
```

# android - 按钮 onclicklistener 上的空指针异常

> ID：14815687
> 
> 赞同：0
> 
> 时间：2013-02-11T15:51:51.173
> 
> 标签：android, android-camera

我什至正在尝试在相机键单击时从相机视图中捕获图像。它工作正常，但我想更改 UI 并使用按钮单击捕获，因此在 main.xml 程序中放置的按钮没有显示错误，但是当我运行程序时，它在 button.setOnClickListener(new View. OnClickListener()。我检查了我是否拼错了按钮 ID 名称，但它是一样的。` public void onCreate(Bundle savedInstanceState){ super.onCreate(savedInstanceState);

```
 //make the screen full screen
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);
    //remove the title bar
    requestWindowFeature(Window.FEATURE_NO_TITLE);

    mResultView=new ResultView(this);
    mPreview = new Preview(this);

    //set Content View as the preview
    setContentView(mPreview);

    //add result view  to the content View
    addContentView(mResultView,new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));

    //set the orientation as landscape
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);    
    //Button capture_Button = (Button) findViewById(id.button_click);
    button = (Button) findViewById(R.id.button_click);
    button.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            mCameraReadyFlag = false;
            mPreview.camera.takePicture(shutterCallback, rawCallback, jpegCallback);
        }
    });

}` 
```

这是我的主要活动代码

```
enter code here

02-11 19:21:58.367: I/Process(5729): Sending signal. PID: 5729 SIG: 9
02-11 19:22:04.987: D/AndroidRuntime(6006): Shutting down VM
02-11 19:22:04.987: W/dalvikvm(6006): threadid=1: thread exiting with uncaught exception (group=0x40015560)
02-11 19:22:04.987: E/AndroidRuntime(6006): FATAL EXCEPTION: main
02-11 19:22:04.987: E/AndroidRuntime(6006): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.ee368.siftexample/com.ee368.siftexample.SIFTExampleActivity}: java.lang.NullPointerException
02-11 19:22:04.987: E/AndroidRuntime(6006):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
02-11 19:22:04.987: E/AndroidRuntime(6006):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
02-11 19:22:04.987: E/AndroidRuntime(6006):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
02-11 19:22:04.987: E/AndroidRuntime(6006):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
02-11 19:22:04.987: E/AndroidRuntime(6006):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-11 19:22:04.987: E/AndroidRuntime(6006):     at android.os.Looper.loop(Looper.java:130)
02-11 19:22:04.987: E/AndroidRuntime(6006):     at android.app.ActivityThread.main(ActivityThread.java:3683)
02-11 19:22:04.987: E/AndroidRuntime(6006):     at java.lang.reflect.Method.invokeNative(Native Method)
02-11 19:22:04.987: E/AndroidRuntime(6006):     at java.lang.reflect.Method.invoke(Method.java:507)
02-11 19:22:04.987: E/AndroidRuntime(6006):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
02-11 19:22:04.987: E/AndroidRuntime(6006):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
02-11 19:22:04.987: E/AndroidRuntime(6006):     at dalvik.system.NativeStart.main(Native Method)
02-11 19:22:04.987: E/AndroidRuntime(6006): Caused by: java.lang.NullPointerException
02-11 19:22:04.987: E/AndroidRuntime(6006):     at com.ee368.siftexample.SIFTExampleActivity.onCreate(SIFTExampleActivity.java:89)
02-11 19:22:04.987: E/AndroidRuntime(6006):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
02-11 19:22:04.987: E/AndroidRuntime(6006):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
02-11 19:22:04.987: E/AndroidRuntime(6006):     ... 11 more
02-11 19:22:09.097: I/Process(6006): Sending signal. PID: 6006 SIG: 9' 
```

这是我的日志窗口

这是xml布局

```
 ?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

    <Button
        android:id="@+id/button_click"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Capture" />

</LinearLayout> 
```

有人可以帮我解决这个错误吗？以及如何使用按钮而不是 onkeydown()？提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:04:58.380

您正在使用`mPreview`内容视图而不是布局。这就是为什么`findViewById(R.id.button_click);`返回 null 而您不处理此错误的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T16:05:09.603

您正在将此布局添加到您的活动中：

```
mResultView=new ResultView(this);
mPreview = new Preview(this);

//set Content View as the preview
setContentView(mPreview);

//add result view  to the content View
addContentView(mResultView,new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT)); 
```

正如你所提到的，“所以将按钮放在`main.xml`”中。

如果不将其添加为 .xml，则无法访问任何 xml 的视图控件`contentview`。

# java - Java：空值解析 XML 文件

> ID：14815695
> 
> 赞同：2
> 
> 时间：2013-02-11T15:52:00.570
> 
> 标签：java, mysql, xml, xmlreader

我正在尝试解析一个 xml 文件来设置我的数据库的连接。但是我只返回了空字符串。有人可以检查我做错了什么吗？

java 类（Dbconfig 只是一个带有详细信息字符串的类）

```
public class XMLReader {

 public Dbconfig read(){

    Dbconfig conf = new Dbconfig();

    try {
        File file = new File("database.xml");
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();
        Document doc = db.parse(file);
        doc.getDocumentElement().normalize();
        //System.out.println("Root element " + doc.getDocumentElement().getNodeName());
        NodeList nodeLst = doc.getElementsByTagName("database");

        Element element = (Element) nodeLst.item(0);
        NodeList url = element.getElementsByTagName("url");
        conf.url = url.item(0).toString();
        NodeList driver = element.getElementsByTagName("driver");
        conf.driver = driver.item(0).toString();
        NodeList username = element.getElementsByTagName("username");
        conf.username = username.item(0).toString();
        NodeList password = element.getElementsByTagName("password");
        conf.password = password.item(0).toString();

        System.out.format("####Printing XML configuration:%s %s %s %s \n",conf.url, conf.driver, conf.username, conf.password);

    } catch (Exception e) {
      e.printStackTrace();
    }
        return conf;
   }
} 
```

XML 文件（它应该只提供 1 个数据库的配置）：

```
<?xml version="1.0" encoding="UTF-8"?>
<database>
    <url>jdbc:mysql://localhost:3306/db</url>
    <driver>com.mysql.jdbc.Driver</driver>
    <username>admin</username>
    <password>admin</password>
</database> 
```

输出是：

```
####Printing XML configuration:[url: null] [driver: null] [username: null] [password: null] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T16:02:07.367

该`toString()`方法不会返回您认为的结果。改为使用[`getTextContent()`](http://docs.oracle.com/javase/6/docs/api/org/w3c/dom/Node.html#getTextContent%28%29)。

改变这个：

```
NodeList url = element.getElementsByTagName("url");
conf.url = url.item(0).toString();
NodeList driver = element.getElementsByTagName("driver");
conf.driver = driver.item(0).toString();
NodeList username = element.getElementsByTagName("username");
conf.username = username.item(0).toString();
NodeList password = element.getElementsByTagName("password");
conf.password = password.item(0).toString(); 
```

对此：

```
NodeList url = element.getElementsByTagName("url");
conf.url = url.item(0).getTextContent();
NodeList driver = element.getElementsByTagName("driver");
conf.driver = driver.item(0).getTextContent();
NodeList username = element.getElementsByTagName("username");
conf.username = username.item(0).getTextContent();
NodeList password = element.getElementsByTagName("password");
conf.password = password.item(0).getTextContent(); 
```

作为旁注，您几乎可以肯定在这里重新发明轮子。根据您的框架、Web 服务器、应用程序服务器等，您最好使用内置的数据库配置/连接管理工具。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T16:02:30.230

将您的代码更改为

```
 Element database = (Element) doc.getElementsByTagName("database").item(0);
            String url = ((Element)database.getElementsByTagName("url").item(0)).getTextContent();
            String driver = ((Element)database.getElementsByTagName("driver").item(0)).getTextContent();
... 
```

或者做一个方法

```
private static String getParameter(Element database, String paramName) {
    return ((Element)database.getElementsByTagName(paramName).item(0)).getTextContent();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T16:02:45.383

改为使用`getTextContent`，例如：

```
conf.url = url.item(0).getTextContent(); 
```

# android - Android：单击按钮时如何打开键盘以编辑EditText？

> ID：14815696
> 
> 赞同：6
> 
> 时间：2013-02-11T15:52:00.403
> 
> 标签：android, button, android-edittext, android-softkeyboard

我的情况是：我有一个带有禁用焦点的 EditText 字段。在 EditText 字段旁边，我有两个用于输入法的按钮。所以我想在单击第一个按钮时：打开软键盘并在 EditText 字段中编辑文本。我尝试了很多方法：

```
InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
imm.showSoftInput(yourEditText, InputMethodManager.SHOW_IMPLICIT); 
```

对我不起作用。打开软键盘的唯一方法是：

`toggleSoftInput(InputMethodManager.SHOW_FORCED, 0)`

但无法从 EditText 字段中编辑信息。

您能否建议我在单击按钮时如何打开键盘并编辑某些 EditText 的文本。非常感谢！

**编辑：**

因此，默认情况下 EditText 不可聚焦。当我单击键盘按钮时 - 应该是可聚焦的，然后显示软键盘以输入文本并出现在 EditText 中。其他插入方法是不需要键盘的 ABC 按钮。这将类似于摩尔斯电码输入 - 触摸并按住 ABC 按钮 :) 我将尝试建议的示例以在我的情况下实现。谢谢你们 ：）

![我的情况](../Images/70bf8c2e9a5e992549d4ed712ad8e881.png)

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-12T13:53:33.323

谢谢大家的帮助:)我使用了你给我的所有建议，搜索并测试了很多其他脚本，最后我的代码正在运行:)

这是我的最终代码：

```
InputEditText = (EditText) findViewById(R.id.InputText);

public void InputData() {

        /* Keyboard Button Action */
        KeyboardButton.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {

                Log.v(TAG, "On Keyboard Button click event!");

                InputEditText.requestFocus();
                InputEditText.setFocusableInTouchMode(true);

                InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
                imm.showSoftInput(InputEditText, InputMethodManager.SHOW_FORCED);

            }

        });

} 
```

它可能对某人有用:) 谢谢！

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-11T18:09:08.120

不推荐您描述的设计。您违反了`focusable`属性的目的，即不控制用户是否可以更改`EditText`组件中的文本。

如果您计划提供替代输入法，因为用例似乎需要这样做（例如，您只允许可编辑文本字段中的特定符号集），那么您可能应该在不允许用户的时间内完全禁用文本编辑更改字段的值。

声明您的可编辑字段：

```
<EditText
    android:id="@+id/edit_text_2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ems="10" /> 
```

请注意，它的`focusable`属性保留了默认值。没关系，我们稍后会处理。声明一个将开始编辑过程的按钮：

```
<Button
    android:id="@+id/button_show_ime"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Start editing" /> 
```

现在，在您的`Activity`声明中：

```
private EditText editText2;
private KeyListener originalKeyListener;
private Button buttonShowIme; 
```

并`onCreate()`这样做：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.ime_activity);

    // Find out our editable field.
    editText2 = (EditText)findViewById(R.id.edit_text_2);
    // Save its key listener which makes it editable.
    originalKeyListener = editText2.getKeyListener();
    // Set it to null - this will make the field non-editable
    editText2.setKeyListener(null);

    // Find the button which will start editing process.
    buttonShowIme = (Button)findViewById(R.id.button_show_ime);
    // Attach an on-click listener.
    buttonShowIme.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            // Restore key listener - this will make the field editable again.
            editText2.setKeyListener(originalKeyListener);
            // Focus the field.
            editText2.requestFocus();
            // Show soft keyboard for the user to enter the value.
            InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
            imm.showSoftInput(editText2, InputMethodManager.SHOW_IMPLICIT);
        }
    });

    // We also want to disable editing when the user exits the field.
    // This will make the button the only non-programmatic way of editing it.
    editText2.setOnFocusChangeListener(new View.OnFocusChangeListener() {
        @Override
        public void onFocusChange(View v, boolean hasFocus) {
            // If it loses focus...
            if (!hasFocus) {
                // Hide soft keyboard.
                InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
                imm.hideSoftInputFromWindow(editText2.getWindowToken(), 0);
                // Make it non-editable again.
                editText2.setKeyListener(null);
            }
        }
    });
} 
```

我希望带有所有注释的代码是不言自明的。在 API 8 和 17 上测试。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-11T16:20:40.963

试试这个 ：

```
 final EditText myedit2 = (EditText) findViewById(R.id.myEditText2);

        Button btsmall = (Button) findViewById(R.id.BtSmall);
        btsmall.setOnClickListener(new OnClickListener() {              
            @Override
            public void onClick(View arg0) {
                myedit2.requestFocus();
            }
        }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-01T16:30:21.350

我已经使用此代码在单击按钮时打开键盘。像 。

```
btn1 = (Button) findViewById(R.id.btn1);
edt1 = (EditText) findViewById(R.id.edt1);
btn1.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            edt1.requestFocus();
            InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
            imm.showSoftInput(edt1, InputMethodManager.SHOW_IMPLICIT);
        }
    }); 
```

其完成的工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-04-27T10:34:57.957

```
LinearLayout ll_about_me =(LinearLayout) view.findViewById(R.id.ll_about_me);
    ll_about_me.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            // TODO Auto-generated method stub

            mEtEmpAboutYou.requestFocus();
            mEtEmpAboutYou.setFocusableInTouchMode(true);

            InputMethodManager imm = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);
            imm.showSoftInput(mEtEmpAboutYou, InputMethodManager.SHOW_FORCED);

            return true;
        }
    }); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-04-22T08:45:54.527

对于那些使用**片段**的人，您可以使用`InputMethodManager`这种方式：

```
InputMethodManager imm = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);
            if (imm != null) {
                imm.showSoftInput(editText, InputMethodManager.SHOW_FORCED);
            } 
```

完整代码：

```
btn.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                editText.setFocusable(true);
                editText.setFocusableInTouchMode(true);
                editText.requestFocus();
                InputMethodManager imm = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);
                if (imm != null) {
                    imm.showSoftInput(editText, InputMethodManager.SHOW_FORCED);
                }
            }
        }); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-12-03T09:26:39.673

我希望这有帮助

```
EditText txt_categorie = findViewById(R.id.txt_categorie);
txt_categorie.requestFocus(); 
```

# python - 将（大）输出重定向到 txt 文件

> ID：14815698
> 
> 赞同：0
> 
> 时间：2013-02-11T15:52:06.403
> 
> 标签：python, redirect

我编写了一个简单的 python 代码，它从一个大表中提取行并将它们放入数组中。打印后我在终端上得到的结果只是一个包含前两个和最后两个元素的数组

```
[0.75 0.90  ..., 0.78 0.79] 
```

我尝试使用将输出重定向到 .txt 文件

```
saveout = sys.stdout
outline = open("file.txt", "w")
sys.stdout = outline 
```

但我在 txt 文件中遇到了同样的问题。如何将整个数组重定向到文件？

# eclipse - 在 javacv 中使用 cvScalar？

> ID：14815700
> 
> 赞同：0
> 
> 时间：2013-02-11T15:52:08.593
> 
> 标签：eclipse, javacv

我想从图像中识别独特的颜色。我使用`CvScalar loc = cvGet2D(img, i, j);`, 并检查我使用的位置是红色还是绿色`CvScalar red = CvScalar.RED;`。但是，布尔评估永远不会返回 true，因为我的图像包含红色阴影。有没有办法修改`CvScalar`它以忽略阴影，或者摆弄 `loc`变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T22:26:43.177

OpenCV 以 BGR 格式存储图像，因此要获取您可以使用的绿色通道`loc.val(1)`（第二个通道）的值，以及获取您可以使用的红色通道的值`loc.val(2)`。这些将返回 [0, 255] 范围内的数字。然后，您可以比较红色和绿色通道像素值，以查看像素是更红还是更绿。

但是，比遍历每个像素更好（更快）的方法是：

1.  使用 . 将图像分割成单独的红色和绿色通道`cvSplit`。
2.  用于`cvCmp`比较红色和绿色通道，生成红色通道大于绿色通道的二值图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T22:45:57.997

因为红色通道中最轻微的部分会破坏您的（二进制）问题：“它是绿色的吗？” 在这里使用某种“距离”可能会得到更好的结果。

取每个“找到”和“所需”颜色的 l2 范数，例如：

sqrt(r*r + b*b + g*g);

并对差异进行阈值处理（以确定它是否“足够接近”）可能会更好

# apache-flex - 在flex中拦截mx html组件的锚链接

> ID：14815701
> 
> 赞同：1
> 
> 时间：2013-02-11T15:52:16.420
> 
> 标签：apache-flex, adobe

我在 mx htmlcomponent 中加载了一个 html 页面。hmtl 页面包含一些链接，我必须拦截这些链接并决定是在系统默认浏览器中打开它还是让 htmlComponent 处理它。

现在我能够在 flex 端获取 href，但如果我不想处理它，我不确定如何将它传递回 htmlComponent。

有没有办法做到这一点？

提前致谢

# jquery - JQuery UI 对话框滚动条未在 Internet Explorer 8 上显示

> ID：14815702
> 
> 赞同：1
> 
> 时间：2013-02-11T15:52:16.570
> 
> 标签：jquery, asp.net, internet-explorer-8, jquery-ui-dialog, scrollbars

我在 iframe 上设置了一个模式对话框，使用 JQuery UI 显示一个单独的页面。当页面内容高度大于对话框高度时，滚动条会出现在 Firefox 中，虽然有点靠右，但当我使用 Internet Explorer 8 或 Chrome 时，它​​们不会显示。我的代码如下：

库调用者代码：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.js"></script>   
<script type="text/javascript" src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script> 
```

在单独的 .js 文件中打开对话框的代码：

```
function showRegDialog(url) {
    idNro = Math.floor((Math.random() * 1500) + 1);

    $(function () {

        var horizontalPadding = 0;
        var verticalPadding = 0;

        $('<iframe id="externalSite' + idNro + '" scrolling="no" frameborder="0" padding="0" margin="0" style="overflow:auto" class="externalSite" src="' + url + '" />').dialog({
            open: function () {
                $(this).siblings('.ui-dialog-titlebar').remove();
            },
            title: false,
            autoOpen: true,
            width: 750,
            height: 700,
            modal: true,
            resizable: false,
            draggable: false,
            autoResize: false,
            overlay: {
                opacity: 0.5,
                background: "black"
            }

        }).width(550).height(700);

    });
} 
```

打开页面有：

```
<style type="text/css">       
html {overflow : visible} 
</style>
<body>
<ul>
<li><a href="javascript:showRegDialog('view_edit.aspx?c=1');"> Edit<img src="images/btn/edit_pv.png" align="Absbottom" border="0"/></a>                
</li>
</ul>
<!--...-->
</body> 
```

单独的内容页面具有：

```
<style type="text/css">       

.viewEdit
{
margin: 0px 0px 0px 0px;
padding: 0px 0px 0px 0px
}

.viewEditForm
{
margin-left: 0px;
margin-top: 0px;
margin-right: 0px; 
margin-bottom: 0px
}

.viewEditMainDiv
{
margin-left: 0px;
margin-top: 0px;
margin-right: 0px; 
margin-bottom: 0px
}

</style>    

<body class="viewEdit" style="overflow-x:hidden">
<form id="form1" class="viewEditForm">
<div class="viewEditMainDiv">
<!--...-->
</div>
</form>
</body> 
```

如何让这些滚动条在 IE 和 Chrome 上显示？我已经做了相当多的研究，似乎`overflow:visible`或者`overflow:auto`会做到这一点，但这对我来说还没有奏效。如果是这样，它可能是 jquery-ui 版本的错误我该如何修复它？

非常感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:20:07.850

尽管看起来很愚蠢，但我将`scrolling="no"`渲染 iframe 的属性更改为`scrolling="yes"`并解决了它。

```
function showRegDialog(url) {

idNro = Math.floor((Math.random() * 1500) + 1);
$(function () { var horizontalPadding = 0;
var verticalPadding = 0;

$('<iframe id="externalSite' + idNro + '" scrolling="yes" frameborder="0" padding="0" margin="0" style="overflow:auto" class="externalSite" src="' + url + '" />').dialog({
                open: function () {
                    $(this).siblings('.ui-dialog-titlebar').remove();
                },
                title: false,
                autoOpen: true,
                width: 750,
                height: 700,
                modal: true,
                resizable: false,
                draggable: false,
                autoResize: false,
                overlay: {
                    opacity: 0.5,
                    background: "black"
                }    
            }).width(550).height(700);    
        });
} 
```

谢谢你。

# validation - Grails 2.2.0 - 验证问题

> ID：14815703
> 
> 赞同：0
> 
> 时间：2013-02-11T15:52:19.030
> 
> 标签：validation, grails

我有一个包含 3 个字段的组域对象 - 用户名、密码和电子邮件地址 在保存对象之前，我对电子邮件地址进行了混淆，因此它不会作为业务需求以明文形式存储在我们的数据库中

当我在域对象上调用 validate 时，我注意到了一些奇怪的行为。字段的约束如下

```
 userName (nullable: false, unique: false,blank: false, size: 4..200,widget: "textField", matches: "[a-zA-Z0-9, .-@#~{}!£%&*^()-_]+")
    password (nullable: false, unique: false,blank: false, size: 4..200,widget: "textField", password: true, matches: "[a-zA-Z0-9, .-@#~{}!£%&*^()-_]+")
    emailAddress (nullable: false, unique: false,blank: false, size: 5..200,widget: "textField",email: true, matches: "[a-zA-Z0-9, .-@#~{}!£%&*^()-_]+") 
```

对于该对象，我验证它以确保所有值都符合预期（emailAddress 尚未混淆）如果有效，我会混淆电子邮件地址，然后使用 validate: false 值调用 save

奇怪的行为如下如果我填写了有效的电子邮件地址和有效的密码 - 对象在 userName 字段上的验证失败，因为它不能为空

如果我填写了有效的电子邮件地址和有效的用户名 - 对象在密码字段上的验证失败，因为它不能为空，而且在电子邮件地址上也不能为空，它会在消息中显示电子邮件地址的混淆值

我首先认为是混淆导致了问题，但在输入密码字段的情况下它工作正常。两种情况下的代码流完全相同。

在我混淆电子邮件地址后未填写密码字段的情况下，grails 是否有可能调用 validate 方法？

代码流程如下

```
 def userLoginUserInstance = UserLoginUser.get(params.id)
        userLoginUserInstance.properties = params

        if (userLoginUserInstance.validate()) {
            //perform updates to database by obfuscating email address first - working fine
        } else {
                def newObfuscatedEmailAddress =  userLoginUserInstance.emailAddress.encodeAsBase64();

                userLoginUserInstance.setEmailAddress(newObfuscatedEmailAddress);

                render(view: "edit", model: [userLoginUserInstance: userLoginUserInstance])
        } 
```

验证失败时电子邮件地址被混淆的原因是 gsp 读取了一个临时变量，该变量具有一个 getter，而不是对电子邮件地址进行去混淆处理。当上面的代码在未设置用户名的情况下运行时，它可以正常工作并且电子邮件地址显示为正常。如果密码为空，则会显示密码错误，但混淆的电子邮件地址也会显示为无效。

在进一步分析中，当我运行以下代码行时发生了验证问题

```
 userLoginUserInstance.setEmailAddress(newObfuscatedEmailAddress); 
```

我理解为什么会在从数据库中检索 userLoginUserInstance 时发生这种情况。让我感到困惑的是，这并非在所有情况下都会发生

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T19:34:58.737

发生验证错误是因为您试图将`Base64`字符串存储到具有电子邮件约束的属性中：

```
"foo@bar.com".encodeAsBase64() 
```

结果是

```
Zm9vQGJhci5jb20= 
```

因此，现在当您的`User`实体再次刷新到数据库时，当然会发生另一个验证，抱怨这不是有效的电子邮件地址。

之所以没有在所有场景中引发验证错误，原因可能是您没有强制执行 a`user.save()`或`user.save(flush:true)`。

这意味着电子邮件地址不会临时更新，而是稍后更新。为了更好地了解发生了什么，在分配电子邮件后添加另一个验证块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T20:14:52.383

很抱歉没有早点回来

我通过将一个新对象而不是数据库中的对象传递回视图来解决这个问题 因为我需要混淆电子邮件地址，所以这个用例确实过于复杂

感谢您对这个人的帮助

问候达米安

# html - 自动隐藏窗口以停靠到 Windows 任务栏或其他 3 个边缘

> ID：14815704
> 
> 赞同：1
> 
> 时间：2013-02-11T15:52:20.003
> 
> 标签：html, xml, windows-desktop-gadgets

今年我的任务是开发一种创新工具。我的想法是一个自动隐藏窗口，无论正在使用什么应用程序，它都会永久地贴靠在 Windows 桌面上（到任务栏或其他 3 个边缘），并显示来自 Oracle d/b 的内容并允许访问（如果尚未打开，将打开）网页、PDF、文档等。它将被科学家用于研究。它将是一个具有潜在通用实用程序的工具，但将专门用于立即访问信息，例如从 Word/Excel/PDF 文档中复制单词/短语，打开自动隐藏窗口并将其粘贴到搜索框中在那里，然后点击在谷歌上搜索它，或者在印刷杂志上看到感兴趣的东西，打开自动隐藏窗口，单击一个预先选择的收藏数据库（上面提到的 Oracle d/b 中的内容），然后在该数据库中搜索它。问题是，我不是程序员，不知道从哪里开始。我需要聘请一名程序员来执行此操作，但不知道需要哪些技能（C#、java 等？）。

看到 Snagit OneClick 自动隐藏窗口后，我想到了这个主意。如果有人知道这一点，他们应该非常了解我的想法和要求。

任何有关确定所需编程类型、要阅读的背景资料、此类自动隐藏窗口的其他示例等方面的帮助都将受到欢迎！

# excel - 总结 VLOOKUP/INDEX-MATCH excel 函数中的相似值

> ID：14815705
> 
> 赞同：1
> 
> 时间：2013-02-11T15:52:22.187
> 
> 标签：excel, excel-formula, excel-2010, vlookup

我对 excel 2010 中的 vlookup/index-match 公式有疑问。

我有一个表，其中包含名称列中的重复值。我在另一张表中有一张表格，引用了第一张表中的名称和金额。如果原始表中存在重复名称，则应合计金额。

例如，看下面的图片。ABC 是一个重名，它的数量应该是零。当我查找名称 ABC 时，如何使用 Vlookup/index-match 公式在结果中显示“0”？

在目标表中，名称只出现一次，因此我不想在目标表中添加另一个 ABC。

![问题示例](../Images/0a23032cf6c6558dbb906f14a1a94c0e.png) 谢谢 ！罗尼。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-11T16:12:12.460

`VLOOKUP`and or `INDEX`/`MATCH`只会返回一个条目（第一个匹配项）-因此您不能将其用于求和（除非在数组公式中）。

但是，使用`SUMIFS`（或在 Excel 2003 及更早版本中`SUMIF`）将正是您所需要的：所以在 F2 中，您可以编写：

```
=SUMIFS($C$2:$C$6,$B$2:$B$6,E2)

```

# android - android，notifyDataSetChanged 的 问题

> ID：14815707
> 
> 赞同：1
> 
> 时间：2013-02-11T15:52:27.403
> 
> 标签：android

我有个问题。上面有一个视图`ListView`。它的内容是动态更新的。我尝试使用 view.layout(...) 方法移动这个视图。它移动得很好，站在我想要的位置。但是当`notifyDataSetChanged()`被调用时`ListView`，我的视图返回到它之前的位置，这对我来说是个问题。我知道，这会`notifyDataSetChanged()`重建所有反映的观点。所以，请给我一条建议来解决这个问题

# c# - C#字典：LINQ（选择不同键的值）那些是枚举

> ID：14815710
> 
> 赞同：1
> 
> 时间：2013-02-11T15:52:44.283
> 
> 标签：c#, dictionary, enums, mapping

我有一个枚举，我想用字典制作一个映射器。

这是我的枚举：

```
public enum PrintOrderStatus
{
    Pending = 1,
    Confirmed = 2,
    PreparedForPrint = 3,
    PreparedForDevlivery = 4,
    Delivered = 5,
    Canceled = int.MaxValue,
} 
```

这是我的字典：

```
var map = new Dictionary<PrintOrderStatus, PrintOrderStatus[]>
{
    { PrintOrderStatus.Pending, new[] { PrintOrderStatus.Canceled, 
                                        PrintOrderStatus.Confirmed } },
    { PrintOrderStatus.Confirmed, new[] { PrintOrderStatus.PreparedForPrint, 
                                          PrintOrderStatus.PreparedForDevlivery } },
    { PrintOrderStatus.PreparedForDevlivery, new[] { PrintOrderStatus.Delivered } },
}; 
```

鉴于我的实体的当前状态，我如何才能获得数组中不同键的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:01:29.083

要获取与字典中的键关联的值，您应该执行以下操作：

```
var myStatuses = map[currentStatus]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T16:01:30.647

```
var posibleStatuses = map[entity.currentStatus] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T16:09:54.253

其他两个答案涉及从键到值，但是以防万一您想从值到键（问题根本不清楚），请尝试：

```
var keys = map.Where(x => x.Value.Contains(PrintOrderStatus.Canceled))
              .Select(x => x.Key); 
```

请注意，这将返回将其作为值的所有键的列表。如果您只想要第一个，请使用`.First()`而不是`.Select()`.

# jquery - Vimeo 样式下拉内容/下拉菜单

> ID：14815715
> 
> 赞同：0
> 
> 时间：2013-02-11T15:52:51.837
> 
> 标签：jquery, html, css, menu

我正在尝试如何最好地尝试创建我自己的下拉/向下滑动（悬停）菜单栏样式，类似于[Vimeo](http://www.vimeo.com)网站，它降低了下面的所有内容。

如果有人可以建议最好的方法，因为我看到了 CSS3 和 Jquery 版本以及一些 ajax 版本，我不相信哪种方法是最好的。

在我看来，一种手风琴效果可能是最好的，任何人都可以在这里确认是否有一个最适合我需要的插件。

谢谢。

简

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:01:54.303

你只需要带有悬停意图的 jQuery UI，看看[这个](http://jqueryui.com/accordion/#hoverintent)。

（或者可能是[jQuery UI 菜单](http://jqueryui.com/menu/)）

# magento - 多个模块覆盖 Magento 中的相同核心文件

> ID：14815717
> 
> 赞同：10
> 
> 时间：2013-02-11T15:52:54.083
> 
> 标签：magento

Magento 如何处理覆盖同一个核心文件的多个模块？是否可以？它是如何完成的？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-11T15:56:54.703

您有 3 种解决冲突的选择：

*   将一个冲突文件中的代码合并到另一个文件中，并在一个文件中关闭 rewrite config.xml
*   在一个 config.xml 中关闭重写，然后使冲突的扩展 PHP 文件扩展另一个扩展
*   使用`<depends>`使一个扩展依赖于另一个扩展的能力。然后他们将按该顺序重写

示例（选项＃2）

```
class A_Extension_Model_Type_Onepage extends Mage_Checkout_Model_Type_Onepage 
```

您可以将其更改为：

```
class A_Extension_Model_Type_Onepage extends B_Extension_Model_Type_Onepage 
```

阅读更多@ [http://www.webshopapps.com/blog/2010/11/resolving-magento-extension-conflicts/](http://www.webshopapps.com/blog/2010/11/resolving-magento-extension-conflicts/)

# c# - 如果字符串为空或为空，为什么 string.Split(";") 不会抛出错误？

> ID：14815721
> 
> 赞同：17
> 
> 时间：2013-02-11T15:53:17.113
> 
> 标签：c#, .net

如果字符串为空或 null，

string.split(";") 不应该抛出错误吗？

对我来说，我正在尝试这段代码并通过它没有任何错误，

```
string a = string.empty;

if (a.Split(';').Length - 1 < 1) 
```

谁能告诉我为什么它不会引发错误以及为什么 if 语句为真。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-02-11T15:54:47.110

如果字符串为空，`.Split()`将（显然）抛出 a `NullReferenceException`，就像任何其他实例方法一样。

如果字符串为空，`.Split()`将返回一个由单个空字符串组成的数组（除非您通过`StringSplitOptions.RemoveEmptyEntries`）。
这是其更普遍（且不那么意外）行为的一个极端案例；如果分隔符没有出现在源字符串的任何位置，它将返回一个包含整个源字符串的数组。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-11T15:56:12.077

它应该[像记录的那样](http://msdn.microsoft.com/en-gb/library/b873y76a.aspx)表现：

> 如果此实例不包含 中的任何字符`separator`，则返回的数组由包含此实例的单个元素组成。

空字符串 clear 不包含 中的任何字符`separator`，因此返回一个数组，该数组由引用空字符串的单个元素组成。

当然，如果你调用`Split`一个空引用，你会得到一个`NullReferenceException`. 区分对空字符串的引用和空引用很重要。

如果您希望该方法返回一个*空*数组，请使用`StringSplitOptions.RemoveEmptyEntries`. 如果您希望结果是错误，您应该自己检查并抛出您想要的任何异常。

不过，重要的是不要猜测使用 API 时的行为：如果您有任何疑问，请查阅文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T15:55:34.830

从您的代码中，a 不为空，它是 String.Empty。所以当你用分号分割一个空长度的字符串时，有 1 个项目。1 - 1 小于 1

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T15:56:06.480

空字符串与空字符串不同。字符串，作为引用类型，如果为空，则始终包含“”。Null 根本不是一回事，因此，如果您有一个空字符串，它的长度将为 0，并且您的 if 语句将有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T15:56:29.913

代码将字符串拆分为用 - 分隔的组件`';'`- 此操作的结果是字符串数组。如果**少于 2 个组件**，则条件为真。

# caching - HTML 应用程序缓存中止下载

> ID：14815724
> 
> 赞同：1
> 
> 时间：2013-02-11T15:53:19.090
> 
> 标签：caching, preventdefault, abort, download

有没有办法阻止下载应用程序缓存，尽管有一个新的，并且只有在用户单击特定按钮时才开始下载它？

我已经用这些代码试过了：

```
window.applicationCache.addEventListener('ondownloading', function(e) {
  e.abort();
}, false);

window.applicationCache.addEventListener('ondownloading', function(e) {
  e.preventDefault();
}, false);

window.applicationCache.addEventListener('ondownloading', function(e) {
  window.applicationCache.abort();
}, false); 
```

或使用“onprogress”、“onupdating”等。

出了什么问题？有没有办法假装“错误”事件中止缓存？

-> 我在 Windows 上使用最新的 Safari

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-26T22:11:16.870

遗憾的是，无法使用 Javascript 中止或阻止缓存下载，如果在文档的“html”标签中引用了有效的清单文件，浏览器将始终尝试下载它。

我还注意到您正在使用一个名为“ondownloading”的事件，但没有这样的事件，它只是“下载”，请参阅此了解更多信息：http: [//developers.whatwg.org/offline.html#offline](http://developers.whatwg.org/offline.html#offline)

# linux - linux中的libusb

> ID：14815726
> 
> 赞同：1
> 
> 时间：2013-02-11T15:53:20.617
> 
> 标签：linux, usb, kernel, device-driver, libusb

我喜欢用 libusb 做 USB 编程。我安装它使用

```
$ apt-get install libusb-1.0 
```

接着

```
$ apt-get install libusb-1.0-0-dev 
```

但是在我尝试在 c 代码中使用它之后，出现了编译器错误。

```
#include <stdio.h>

#include <libusb-1.0/libusb.h>

int main(){
  usb_init(NULL);
  return 0;
} 
```

编译器错误是：

```
**/tmp/ccgCZXTu.o：在函数“main”中：
test.c:(.text+0xf): undefined reference to `usb_init'
collect2：错误：ld 返回 1 个退出状态**

```

为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T15:54:37.247

这是一个链接器错误，您没有告诉编译器您的代码需要与 libusb 库链接。

仅仅`#include`在 C 中是不够的，它所做的只是提供讨论库代码所需的声明，它不以任何方式引用代码本身。

添加`$(pkg-config --libs libusb)`到您的 GCC 命令行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-02T18:50:44.277

考虑使用

```
pkg-config --libs libusb-1.0 
```

对于 libusb-1.0

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-06-05T13:52:04.653

您可以将其包括为：

```
#include </usr/local/include/libusb-1.0/libusb.h> 
```

# sql-server - 使用 powershell 部署数据库项目 (.dbproj)

> ID：14815728
> 
> 赞同：6
> 
> 时间：2013-02-11T15:53:24.313
> 
> 标签：sql-server, powershell, msbuild

我想使用 powershell 部署一个数据库项目“database.dbproj”（例如）。到目前为止，我尝试使用以下方法部署项目，

> $msbuild = 'C:\Windows\Microsoft.NET\Framework\v4.0.30319\MSBuild.exe'
> 
> $option1 = @(' /t:reBuild,deploy /p:TargetConnectionString="Data Source=(local)\SQL2008R2;Integrated Security=True;Pooling=False;" /p:TargetDatabase=test "C:\TEMP\SVN \6000\Database\Database.dbproj"')
> 
> & $msbuild $option1

和

> $test1 = @(' /target:Build,deploy','C:\TEMP\SVN\6000\Database\Database.dbproj','/property:TargetConnectionString="Data Source=(local)\SQL2008R2;Integrated Security= True;Pooling=False;"','/property:TargetDatabase=test')
> 
> & $msbuild $test1

和

> $test2 = $msbuild +"" + $option1
> 
> 调用表达式 $test2

但在所有情况下，它都没有做任何事情。我的意思是，如果我调试代码，那么我可以看到这个指针到达这个命令，然后简单地移动到下一行命令而不做任何事情。我有类似的批处理脚本，它工作得很好。所以我确信这是导致这个问题的一些菜鸟错误。我在这里做错了什么？

谢谢，杰克

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T15:59:51.887

尝试以下操作：

```
Start-Process -FilePath "C:\Windows\Microsoft.NET\Framework\v4.0.30319\MSBuild.exe" -ArgumentList "/t:reBuild,deploy /p:TargetConnectionString=`"Data Source=(local)\SQL2008R2;Integrated Security=True;Pooling=False;`" /p:TargetDatabase=test `"C:\TEMP\SVN\6000\Database\Database.dbproj`"" 
```

# c# - 在 Windows phone 7 中将图像保存到媒体库

> ID：14815731
> 
> 赞同：2
> 
> 时间：2013-02-11T15:53:32.883
> 
> 标签：c#, image, windows-phone-7, media-library

我正在尝试将应用程序主页中名为 image1 的图像控件中的图像保存到手机的媒体库这是我的代码，但在 WriteableBitmap wr = image1; 它给了我一个错误。

```
public void SaveImageTo(string fileName = "Gage.jpg")
{
    fileName += ".jpg";
    var myStore = IsolatedStorageFile.GetUserStoreForApplication();
    if (myStore.FileExists(fileName))
    {
        myStore.DeleteFile(fileName);
    }

    IsolatedStorageFileStream myFileStream = myStore.CreateFile(fileName);
    WriteableBitmap wr = image1; // give the image source
    wr.SaveJpeg(myFileStream, wr.PixelWidth, wr.PixelHeight, 0, 85);
    myFileStream.Close();

    // Create a new stream from isolated storage, and save the JPEG file to the                               media library on Windows Phone.
    myFileStream = myStore.OpenFile(fileName, FileMode.Open, FileAccess.Read);
    MediaLibrary library = new MediaLibrary();
    //byte[] buffer = ToByteArray(qrImage);
    library.SavePicture(fileName, myFileStream); } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:43:27.657

您正在尝试将`Control`“image1”分配给一个`WriteableBitmap`对象，这就是您遇到错误的原因（它们是 2 种不同的类型）。

`WriteableBitmap`您应该根据“image1”源的设置方式进行不同的初始化。

如果“image1”引用了本地图像，您可以通过`WriteableBitmap`这种方式初始化对应的图像：

```
BitmapImage img = new BitmapImage(new Uri(@"images/yourimage.jpg", UriKind.Relative));
img.CreateOptions = BitmapCreateOptions.None;
img.ImageOpened += (s, e) =>
{
    WriteableBitmap wr = new WriteableBitmap((BitmapImage)s);
}; 
```

如果要将Image 控件**呈现**为 WriteableBitmap，可以这样做：

```
WriteableBitmap wr = new WriteableBitmap(image1, null); 
```

# android - 如何在 Listview 中显示 XML 列表

> ID：14815733
> 
> 赞同：0
> 
> 时间：2013-02-11T15:53:39.270
> 
> 标签：android, list, listview, xml-parsing

我想显示这个 XML 文件的属性

```
<carparkData>
    <carpark name="PARNELL" spaces="105"> </carpark>
    <carpark name="ILAC" spaces="519"> </carpark>
    <carpark name="JERVIS" spaces="627"> </carpark>
    <carpark name="ARNOTTS" spaces="162"> </carpark>
</carparkData> 
```

到目前为止，我已将属性添加到列表中（我认为）

```
public class HandelingXML extends DefaultHandler {

ArrayList<CarparkNode> carparks = new ArrayList<CarparkNode>();
CarparkNode carparkNode = null;

public void startElement(String namespaceURI, String localName, String qName, Attributes atts) throws SAXException {
    if(localName.equals("carpark")) {
        CarparkNode pageNode = new CarparkNode();
        CarparkNode.carPark = atts.getValue("name");
        CarparkNode.spaces = atts.getValue("spaces");
        carparkNode.carparks.add(pageNode);
    } 
```

添加到一个句子

```
public static class CarparkNode {
    public static String carPark;
    public static String spaces;

    public void setCarPark(String c)
    {
        carPark = c;        
    }
    public void setSpace (String s)
    {
        spaces = s;
    }
    public String toString() {
        return carPark + "   " + spaces + " spaces";
    }
    public ArrayList<CarparkNode> carparks = new ArrayList<CarparkNode>();      
} 
```

我想调用列表并将其显示在列表视图中，但无法正常工作

```
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.listview);
        tvcp = (TextView)findViewById(R.id.txtcp);

        StringBuilder URL = new StringBuilder(baseURL);
        String fullURL = URL.toString();
        try{
            URL website = new URL(fullURL);
            SAXParserFactory spf = SAXParserFactory.newInstance();
            SAXParser sp = spf.newSAXParser();
            XMLReader xr = sp.getXMLReader();
            HandelingXML gettingData = new HandelingXML();
            xr.setContentHandler(gettingData);
            xr.parse(new InputSource(website.openStream()));
            //String information = gettingData.getInformation();
            //tvcp.setText(information);
            //int position;
            CarparkNode carparkNode = carparkNode.carparks.get(position);
            this.setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, carparkNode.carparks));

            }catch(Exception e){
            tvcp.setText("error");
        }

    } 
```

如果我能得到帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:02:44.147

您将需要创建一个自定义列表视图适配器来实现这一点。有关更多详细信息，[请参阅此](http://p-xr.com/android-tutorial-how-to-parseread-xml-data-into-android-listview/)

# python - Ubuntu 下的 Matplotlib 图例错误（但不在 windows vista 上）

> ID：14815735
> 
> 赞同：1
> 
> 时间：2013-02-11T15:53:42.823
> 
> 标签：python, python-2.7, matplotlib, ubuntu-12.04

我有一个使用 matplotlib 的 python 程序，它在 windows vista 下运行良好，但在 Ubuntu 下我收到以下错误：

```
Traceback (most recent call last):
  File "Main.py", line 175, in my_measure
    self.widget.canvas.ax.legend(loc = 'center left', bbox_to_anchor = (2.2, 0.5), ncol = 1, fontsize = 10) # defining the legend properties, such as positioning and labels fontsize
  File "/usr/lib/pymodules/python2.7/matplotlib/axes.py", line 4519, in legend
    self.legend_ = mlegend.Legend(self, handles, labels, **kwargs)
TypeError: __init__() got an unexpected keyword argument 'fontsize' 
```

我不明白为什么 'fontsize' 变成了一个意想不到的关键字参数。有人可以帮忙吗？

谢谢

# assembly - 在 x64 程序集中添加值

> ID：14815736
> 
> 赞同：2
> 
> 时间：2013-02-11T15:53:45.513
> 
> 标签：assembly, x86, 64-bit, x86-64

如果我只对 32 个低位进行操作，ADD EAX、EBX 是否会将 EAX 的 32 个高位归零？

那么 ADD RAX、EBX 呢？可能吗？如果是，是否保留了 RAX 的 32 个高位？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T15:55:54.943

`ADD EAX, EBX`*将RAX*的高 32 位归零。 `ADD RAX, EBX`不是有效的指令。

听起来您想将 32 位值添加`EBX`到`RAX`. 为此，首先将零扩展 ( `MOV EBX, EBX`) 或符号扩展 ( `MOVSX RBX, EBX`)，然后添加`RBX`到`RAX`. `EBX`（如果您将值解释为无符号，则使用零扩展，如果它是有符号的，则使用符号扩展）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T15:59:15.937

是的，32 位`ADD`零高位。`ADD RAX, EBX`不可能。您可以将前 32 位清零（例如 by `MOV EBX, EBX`）然后使用`ADD RAX, RBX`（注意这可能会更改 的前 32 位`RAX`）

# node.js - Node.js 和 DevTools 自动保存

> ID：14815738
> 
> 赞同：-1
> 
> 时间：2013-02-11T15:53:52.163
> 
> 标签：node.js, google-chrome-devtools

有没有人有这个问题？我正在尝试使用 Node.js 和 DevTools 自动保存，我在 Chrome 中的路径详细信息是：

匹配：

```
http://localhost:49387/ 
```

保存到：F:\MvcApplication1\MvcApplication1\

服务器：

```
http://127.0.0.1:9104/ 
```

Node 和 DevTools 已正确加载。当我加载页面并选择一个元素并更改颜色时，在 node.js 中我得到以下信息：

> 将样式表保存到 F:\MvcApplication1\MvcApplication1\Content/site.css
> 4301: color: #fffrgb(240, 24, 24);

但是当我关闭浏览器并再次打开时，没有任何变化。有没有其他人遇到过这个问题或者有没有人知道如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:17:03.173

奇怪，它现在似乎正在工作，不知道为什么

# windows - 最新的嵌入式系列windows可以使用哪些版本的visual studio？

> ID：14815746
> 
> 赞同：0
> 
> 时间：2013-02-11T15:54:33.390
> 
> 标签：windows, visual-studio, embedded

这是关于 Windows Embedded Compact 7 及其前身 CE 6

Windows Embedded Compact 7 是一种确实存在的产品，它用于工业解决方案：http: [//www.microsoft.com/windowsembedded/en-us/evaluate/windows-embedded-compact-7.aspx](http://www.microsoft.com/windowsembedded/en-us/evaluate/windows-embedded-compact-7.aspx)

两个问题

*   可以使用哪些版本的visual studio？

*   是否有适用于他们的 Visual Studio 试用版，或者只有专业版才能在嵌入式设备上编程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:03:01.413

不幸的是，仅支持 VS2008。他们在 2011 年的某个地方说他们可能会在 2010 年支持 Win Embedded 7，但从未这样做过。在 VS2012 中，仅支持 Win Embedded 2013。

2012 年的资料来源：[见 David Champbell 的评论](http://blogs.msdn.com/b/windows-embedded/archive/2012/10/04/visual-studio-2012-to-support-windows-embedded-compact.aspx)

2010 年的资料来源：[请参阅页面底部的评论](http://msdn.microsoft.com/en-us/library/gg154201.aspx)

去年年初我遇到了同样的问题...

据我所知，你仍然可以下载至少一个 VS2008 的演示版

# java - Scala 和 Java 泛型——提取和返回嵌套类型

> ID：14815751
> 
> 赞同：9
> 
> 时间：2013-02-11T15:54:40.693
> 
> 标签：java, scala, generics, stanford-nlp, scala-java-interop

Java 泛型可以根据表达式的返回类型推断泛型类型参数的类型。考虑以下：

```
public static <T> T uncheckedCast(Object o) {
    return (T)o;
} 
```

我们可以这样称呼它：

```
Map<Baz,Bog> bazbogMap = new HashMap<Baz,Bog>();
String foo = uncheckedCast(bazbogMap); 
```

这将编译但`RuntimeException`在调用时抛出 a ，因为它会尝试将a 强制`Map`转换为 a`String`但失败。但关键是 Java`<T>`根据调用点的预期结果类型推断出 的值。

我们也可以在 Scala 中这样做：

```
def uncheckedCast[T](o: AnyRef): T = o.asInstanceOf[T] 
```

到目前为止，一切都很好。

Java 还可以从嵌套定义中推断类型参数并返回这些参数（即，在使用它之前，我们实际上不必将结果分配给一个类型来使用它；Java 知道它已经是什么。）

一个简单的类显示这个：

```
import java.util.HashMap;
import java.util.Map;

public class KeysAndValues {
    public interface Key<T> {}
    public static class StringKey implements Key<String> {}

    private final Map<Class<?>, Object> lookup;

    public KeysAndValues() {
        lookup = new HashMap<Class<?>, Object>();
    }

    @SuppressWarnings("unchecked")
    public <V, K extends Key<V>> V put(Class<K> key, V value) {
        return (V) lookup.put(key, value);
    }

    @SuppressWarnings("unchecked")
    public <V, K extends Key<V>> V get(Class<K> key) {
        return (V) lookup.get(key);
    }

    public static void test() {
        KeysAndValues kv = new KeysAndValues();
        kv.put(StringKey.class, "BAM!"); // returns null
        kv.put(StringKey.class, "BOOM!"); // returns "BAM!"
        kv.get(StringKey.class); // returns "BOOM!"
    }
} 
```

但是，在 Scala 中，此类会导致问题。REPL：

```
scala> val kv = new KeysAndValues
kv: KeysAndValues = KeysAndValues@13c2982e

scala> import KeysAndValues.StringKey
import KeysAndValues.StringKey

scala> kv.put(classOf[StringKey], "BAM!")
res0: java.lang.String = null

scala> kv.put(classOf[StringKey], "BOOM!")
res1: java.lang.String = BAM!

scala> kv.get(classOf[StringKey])
<console>:10: error: inferred type arguments [Nothing,KeysAndValues.StringKey] do not conform to method get's type parameter bounds [V,K <: KeysAndValues.Key[V]]
              kv.get(classOf[StringKey]) 
```

这两个调用为允许它们工作`put()`的类型参数指定一个值`V`，但是一旦`V`需要从参数的继承中提取`K`参数，事情就会崩溃。Java 代码没有这样的问题。

让 Scala 不抱怨的唯一方法是显式定义类型：

```
kv.get[String, StringKey](classOf[StringKey]) 
```

（对于像上面这样简单和做作的事情，它有点好（违反 DRY），但对于更复杂的事情，比如斯坦福核心 NLP API，你必须做类似的事情：

```
doc.get[java.util.Map[Integer, CorefChain], CorefChainAnnotation](classOf[CorefChainAnnotation]) 
```

其中包括手动查找嵌套类型以便添加它们，这非常痛苦。）

**问题：**

有没有办法让它工作而不必如此冗长地指定类型参数？更重要的是，为什么这是一个问题？当 Scala 不是时，Java 如何能够推断类型参数？

**编辑 1**：删除了大部分演示斯坦福核心 NLP 问题的代码，并将其替换为 Scala/Java 泛型差异的一般示例，以说明该问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T19:04:36.240

我不能确切地告诉你为什么 Scala 不能推断 Java 类型参数，但我至少可以告诉你如何在 Java 中声明类型参数，以便 Scala*可以*推断它们：

```
@SuppressWarnings("unchecked")
public <V> V put(Class<? extends Key<V>> key, V value) {
    return (V) lookup.put(key, value);
}

@SuppressWarnings("unchecked")
public <V> V get(Class<? extends Key<V>> key) {
    return (V) lookup.get(key);
} 
```

我认为这里的关键点是您根本*不需要*该`K`类型参数 - 通配符类型参数`? extends Key<V>`将为您提供相同的功能。然后，这可以在 Scala 中愉快地工作，而无需指定任何类型参数：

```
scala> kv.put(classOf[StringKey], "BAM!")
res0: String = null

scala> kv.get(classOf[StringKey])
res1: String = BAM! 
```

**编辑：**

这是我能做的最好的解决方法。它需要更高种类的类型和演员表。不确定我能否解释为什么会编译，但其他版本不能。;-)

```
scala> import KeysAndValues._
import KeysAndValues._

scala> import scala.language.higherKinds
import scala.language.higherKinds

scala> def get[V, K[X] <: Key[X]](kv: KeysAndValues, key: Class[_ <: K[V]]) =
     |   kv.get[V, K[V]](key.asInstanceOf[Class[K[V]]])
get: [V, K[X] <: KeysAndValues.Key[X]](kv: KeysAndValues, key: Class[_ <: K[V]])V

scala> val kv = new KeysAndValues
kv: KeysAndValues = KeysAndValues@24c63dac

scala> kv.put(classOf[StringKey], "BAM!")
res0: String = null

scala> get(kv, classOf[StringKey])
res1: String = BAM! 
```

# javascript - Nicedit.js - 无法添加自定义按钮

> ID：14815754
> 
> 赞同：4
> 
> 时间：2013-02-11T15:54:47.847
> 
> 标签：javascript, nicedit

[我从这里](http://wiki.nicedit.com/w/page/516/Creating%20a%20Plugin)采用了代码片段- 只是更改了我的自定义按钮图标路径，*但按钮没有出现*。控制台中没有错误。

```
/**
* nicExample
* @description: An example button plugin for nicEdit
* @requires: nicCore, nicPane, nicAdvancedButton
* @author: Brian Kirchoff
* @version: 0.9.0
*/

/* START CONFIG */
jQuery("document").ready(function(){
  debugger;
  var nicExampleOptions = {
    buttons : {
      'example' : {name : __('Some alt text for the button'), type : 'nicEditorExampleButton'}
    }, iconFiles : {'example' : '/assets/emoticons/aa.gif'}
  };

  var nicEditorExampleButton = nicEditorButton.extend({   
    mouseClick : function() {
      alert('The example save button icon has been clicked!');
    }
  });

  nicEditors.registerPlugin(nicPlugin,nicExampleOptions);
}); 
```

我还将自定义按钮名称添加到编辑器按钮列表中：

```
 this.instantiate_nicedit_for_textarea = function(textArea){
    var nic_editor = new nicEditor({buttonList : ['bold','italic','underline','strikethrough','example'], iconsPath : '/assets/nicEditorIcons.gif'})

    nic_editor.addInstance(textArea.id); 

    var topbar_id = $(textArea).prevAll('div.widget_topbar').last().children('ul').children('li.nic_panel').attr('id');
    nic_editor.setPanel(topbar_id);
  }; 
```

**更新：Firefox 18.02、Chrome 22.0.1229.94**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T02:17:22.303

基于保存按钮插件，您的代码应如下所示：

```
var nicExampleOptions = {
    buttons : {
        'example' : {name : __('Example'), type : 'nicEditorExampleButton'}
    }
};

var nicEditorExampleButton = nicEditorButton.extend({
    init : function() {
        // your init code
    },
    mouseClick : function() {
        alert('hallo!'); // Your code here
    }
});

nicEditors.registerPlugin(nicPlugin,nicExampleOptions); 
```

作为最佳实践，我建议您将此代码添加到一个单独的文件中，并确保**在** `nicEdit.js`. 然后，您可以将按钮添加到实例的*buttonList*中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T10:36:46.280

跟踪 nicEdit 代码，我发现在调用 setPanel() API 函数时，按钮实际上出现在屏幕上。

*setPanel()*绘制标准按钮，然后将*'panel'*事件传递给*fireEvent()* API 函数，然后调用*loadPanel()*，然后调用*addButton()*，后者通过评估它来测试 button.type：

```
addButton : function(buttonName,options,noOrder) {
  var button = options.buttons[buttonName];
  var type = (button['type']) ? eval('(typeof('+button['type']+') == "undefined") ? null : '+button['type']+';') : nicEditorButton;

  // <== here type is null, cause I defined button['type'] as local variable in separate file

  var hasButton = bkLib.inArray(this.buttonList,buttonName);
  if(type && (hasButton || this.ne.options.fullPanel)) {
    this.panelButtons.push(new type(this.panelElm,buttonName,options,this.ne));
    if(!hasButton) {
      this.buttonList.push(buttonName);
    }
  }
}, 
```

在上面的代码片段中，`eval('(typeof('+button['type']+') == "undefined")`当我将按钮类型定义为局部变量时，代码返回 true：

```
var nicEditorExampleButton = nicEditorButton.extend({   
    mouseClick : function() {
      alert('The example save button icon has been clicked!');
    }
  }); 
```

一旦我将按钮类型定义为全局，按钮就会出现：

```
nicEditorExampleButton = nicEditorButton.extend({   
  mouseClick : function() {
    alert('The example save button icon has been clicked!');
  }
}); 
```

我认为 nicEdit 所做的类型存在应该执行更清晰可靠的方式来防止全局命名空间污染，也许是`(typeof(button['type']) == "undefined")`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-07T10:25:54.247

我的 nicElement 加载过程是由这个函数完成的：

```
bkLib.onDomLoaded(function () {
new nicEditor({buttonList: ['bold', 'italic', 'underline', 'left', 'center', 'right', 'ol', 'ul', 'fontSize', 'fontFamily', 'fontFormat', 'superscript', 'subscript', 'indent', 'outdent', 'link', 'unlink', 'striketrhough', 'forecolor', 'bgcolor', 'image', 'upload', 'xhtml','example']}).panelInstance('textareaExample'); 
```

});

`textareaExample`textarea的id在哪里。

将您的按钮名称（在我的情况下`example`）添加到`buttonList`应该添加您的按钮。

所以看看你在哪里有新的`nicEditor();`

加载选项的一些示例`nicEdit`可以在[这里](http://nicedit.com/demos.php?demo=2)看到。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-07T10:10:48.903

可以，将“buttonList”行更新为

```
buttonList : ['save','example','bold','italic','underline','left','center','right','justify','ol','ul','fontSize','fontFamily','fontFormat','indent','outdent','image','upload','link','unlink','forecolor','bgcolor'],`enter code here` 
```

用于在文件 js 主文件中显示按钮（示例）

```
var nicEditorConfig = bkClass.extend({
buttons : {
    'test' : {name : __('Click to Test'), command : 'Test'},
    'bold' : {name : __('Click to Bold'), command : 'Bold', tags : ['B','STRONG'], css : {'font-weight' : 'bold'}, key : 'b'},
    'italic' : {name : __('Click to Italic'), command : 'Italic', tags : ['EM','I'], css : {'font-style' : 'italic'}, key : 'i'},
    'underline' : {name : __('Click to Underline'), command : 'Underline', tags : ['U'], css : {'text-decoration' : 'underline'}, key : 'u'},
    'left' : {name : __('Left Align'), command : 'justifyleft', noActive : true},
    'center' : {name : __('Center Align'), command : 'justifycenter', noActive : true},
    'right' : {name : __('Right Align'), command : 'justifyright', noActive : true},
    'justify' : {name : __('Justify Align'), command : 'justifyfull', noActive : true},
    'ol' : {name : __('Insert Ordered List'), command : 'insertorderedlist', tags : ['OL']},
    'ul' :  {name : __('Insert Unordered List'), command : 'insertunorderedlist', tags : ['UL']},
    'subscript' : {name : __('Click to Subscript'), command : 'subscript', tags : ['SUB']},
    'superscript' : {name : __('Click to Superscript'), command : 'superscript', tags : ['SUP']},
    'strikethrough' : {name : __('Click to Strike Through'), command : 'strikeThrough', css : {'text-decoration' : 'line-through'}},
    'removeformat' : {name : __('Remove Formatting'), command : 'removeformat', noActive : true},
    'indent' : {name : __('Indent Text'), command : 'indent', noActive : true},
    'outdent' : {name : __('Remove Indent'), command : 'outdent', noActive : true},
    'hr' : {name : __('Horizontal Rule'), command : 'insertHorizontalRule', noActive : true}
},
iconsPath : '../nicEditorIcons.gif',
buttonList : ['save','example','bold','italic','underline','left','center','right','justify','ol','ul','fontSize','fontFamily','fontFormat','indent','outdent','image','upload','link','unlink','forecolor','bgcolor'],
iconList : {"bgcolor":1,"forecolor":2,'test':3,"bold":3,"center":4,"hr":5,"indent":6,"italic":7,"justify":8,"left":9,"ol":10,"outdent":11,"removeformat":12,"right":13,"save":24,"strikethrough":15,"subscript":16,"superscript":17,"ul":18,"underline":19,"image":20,"link":21,"unlink":22,"close":23,"arrow":25} 
```

});

# javascript - 操纵悬停状态

> ID：14815755
> 
> 赞同：-4
> 
> 时间：2013-02-11T15:54:53.127
> 
> 标签：javascript

无论如何可以通过 HTML DOM 操作 :hover 状态，例如：

```
javascript:void("document.body.backgroundColor=red"); 
```

在上面的代码中或通过 html DOM 可以定义悬停状态但不能通过 css。我只想在悬停状态下将背景颜色设为红色，那么当上述代码放在 URL 中时，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T15:56:45.343

jQuery包含以下[`hover()`](http://api.jquery.com/hover/)功能：

```
$('#myDiv').hover(function() {  
    $('body').css('backgroundColor', '#ff0000');
}, function() {  
    $('body').css('backgroundColor', '#fff');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T16:07:17.910

这应该可以解决您的问题：

JS：

```
function changeBGC(color){
    document.bgColor = color;
} 
```

一个属性：

```
<a href="#" onMouseOver="javascript:changeBGC('#000000')">Some link</a> 
```

# java - 错误=2，在 java.lang.ProcessBuilder.start 中没有这样的文件或目录

> ID：14815756
> 
> 赞同：1
> 
> 时间：2013-02-11T15:54:54.720
> 
> 标签：java, linux, ant

我正在使用安装在`/usr/java`. 文件夹下的所有可执行文件`bin`都有`-rwxr-xr-x`权限。我将两者都`ANT_HOME`设置`JAVA_HOME`为`~/.bashrc`：

```
export ANT_HOME=/home/m/application/apache-ant-1.8.2
export JAVA_HOME=/usr/java/jdk1.7.0_13/ 
```

我有一个`build.xml`文件说：

```
<exec dir="${java.home}/bin/" executable="keytool"/> 
```

但是在运行 ant 之后，我得到了这个异常：

> /home/m/workspace/build.xml:58：执行失败：java.io.IOException：无法运行程序“keytool”（在目录“/usr/java/jdk1.7.0_13/jre/bin”中）：错误= 2，在 org.apache.tools.ant.taskdefs.Execute$ 的 java.lang.Runtime.exec(Runtime.java:615) 的 java.lang.ProcessBuilder.start(ProcessBuilder.java:1029) 没有这样的文件或目录Java13CommandLauncher.exec(Execute.java:827) 在 org.apache.tools.ant.taskdefs.Execute.launch(Execute.java:445) 。. .
> 
> 在 org.apache.tools.ant.launch.Launcher.main(Launcher.java:109)

任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T16:10:59.370

尝试：

*   `export ANT_HOME=/path/to/ant`

*   `export PATH=$ANT_HOME/bin:$PATH`

*   `<exec executable="keytool"/>`

或者：

```
<exec executable="${java.home}/bin/keytool"/> 
```

由于该`dir`属性告诉 Ant 在哪个目录中执行二进制文件，而不是它的路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T16:48:24.673

似乎何时`JAVA_HOME`在我的设置中`~/.bashrc`起作用，否则不起作用！

此外，在我的系统中搜索[替代方案](http://fedoraproject.org/wiki/Java)时，我发现该`keytool`命令甚至不在我的奴隶中！

这是我的运行日志`alternatives --display java`：

```
java - status is manual.
 link currently points to /usr/java/latest/jre/bin/java
/usr/lib/jvm/jre-1.7.0-openjdk/bin/java - priority 170009
 slave keytool: /usr/lib/jvm/jre-1.7.0-openjdk/bin/keytool
 slave orbd: /usr/lib/jvm/jre-1.7.0-openjdk/bin/orbd
 slave pack200: /usr/lib/jvm/jre-1.7.0-openjdk/bin/pack200
 ...
 slave jre_exports: /usr/lib/jvm-exports/jre-1.7.0-openjdk
 slave jre: /usr/lib/jvm/jre-1.7.0-openjdk
 slave java.1.gz: /usr/share/man/man1/java-java-1.7.0-openjdk.1.gz
 slave keytool.1.gz: /usr/share/man/man1/keytool-java-1.7.0-openjdk.1.gz
 ...
/usr/java/latest/jre/bin/java - priority 20000
 slave keytool: (null)
 slave orbd: (null)
 slave pack200: (null)
 ...
Current `best' version is /usr/lib/jvm/jre-1.7.0-openjdk/bin/java. 
```

所以我要求我的根`jdk`从替代方案中删除，直到我可以在需要时直接解决它`$JAVA_HOME`。幸运的是，问题解决了。

# sql-server - T-SQL：将 NTEXT 转换为 VARCHAR 到 INT/BIGINT

> ID：14815760
> 
> 赞同：5
> 
> 时间：2013-02-11T15:55:06.287
> 
> 标签：sql-server, tsql, varchar, bigint, ntext

我有一个带有**NTEXT**类型字段的表，其中存储了许多类型的值，其中包括文件大小。我正在尝试对记录列表运行查询并添加文件大小，但我遇到了这个令人困惑的问题。

由于**NTEXT**不能直接/隐式转换为**INT**或**BIGINT**，因此我先将其转换为**VARCHAR**，然后尝试将其转换为 INT 或 BIGINT。一切都很好，直到我尝试将**VARCHAR**值转换为**INT**或**BIGINT**。

这是我的查询和结果：

首先我尝试以下，显示没有问题，输出为**61069**（值仍为 ntext 类型）。

```
SELECT FileSize
FROM dbo.myTable
WHERE ID = 111 
```

现在我将它转换/转换为 varchar，再一次，没问题。输出是**61069**（现在是 varchar 类型）。

```
SELECT CONVERT(VARCHAR, FileSize)
FROM dbo.myTable
WHERE ID = 111 
```

最后，我尝试将 VARCHAR 值转换为 BIGINT，以便进行 SUM() 和其他计算，但这次我收到“**将数据类型 varchar 转换为 bigint 时出错。** ”消息。

```
SELECT CONVERT(BIGINT, CONVERT(VARCHAR, FileSize))
FROM dbo.myTable
WHERE ID = 111 
```

如果我尝试将其转换为 INT，则会收到“**将 varchar 值 '7/1/2008 3:39:30 AM' 转换为数据类型 int 时转换失败**”

```
SELECT CONVERT(INT, CONVERT(VARCHAR, FileSize))
FROM dbo.myTable
WHERE ID = 111 
```

我完全迷路了，有什么可能导致这种情况的想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T15:58:21.317

您无法控制 where 子句和转换的应用顺序。在某些情况下，SQL Server 将尝试对未通过过滤器的行执行转换——这一切都取决于计划。试试这个：

```
SELECT CASE WHEN ID = 111 THEN 
  CONVERT(INT, CONVERT(VARCHAR(12), FileSize))
  -- don't be lazy, size ------^^ is important
  END
FROM dbo.myTable
WHERE ID = 111; 
```

还可以考虑使用整数列来存储整数。然后，您不会在`FileSize`列中出现愚蠢的废话，例如`'7/1/2008 3:39:30 AM'`.

# jsf - 在选择时显示所选数据表行的详细信息

> ID：14815761
> 
> 赞同：0
> 
> 时间：2013-02-11T15:55:07.123
> 
> 标签：jsf, primefaces, datatable

我正在使用 netbeans 7.2 和 primefaces 3.4。我创建了一个数据库，来自数据库的实体类和来自实体类的 jsf 页面。我现在正在尝试设置一个页面，该页面显示一个数据表，其中包含来自其中一个数据库的信息 - Userdetails - (done)，当单击一行时，会打开一个对话框来添加一组预设选项，这些选项可以在将该用户添加到另一个表之前进行编辑。

不过，我无法从所选行中获取信息以显示。我已经尽可能地清理了代码并将其限制在相关部分 - 如果需要添加或删除任何内容，请告诉我。

我已经在此问题上查看了一些答案，但我无法让它们为我工作。我在行选择方法上尝试了命令按钮方法和 ajax。

```
package jsf;

// LOTS OF IMPORTS 

@ManagedBean(name = "userdetailsController")
//@ViewScoped
@SessionScoped
public class UserdetailsController implements Serializable {

    //DECLARATIONS eg private Userdetails selectedElement;

    public UserdetailsController() {
    }

// BUNCH OF PREGENERATED CODE OMITTED 

    public Userdetails getSelected() {
        if (current == null) {
            current = new Userdetails();
            selectedItemIndex = -1;
        }
        return current;
    }

    public String create() {
        try {
            getFacade().create(current);
            JsfUtil.addSuccessMessage(ResourceBundle.getBundle("resources/Bundle").getString("UserdetailsCreated"));
            return prepareCreate();
        } catch (Exception e) {
            JsfUtil.addErrorMessage(e, ResourceBundle.getBundle("resources/Bundle").getString("PersistenceErrorOccured"));
            return null;
        }
    }

    public void setSelectedElement(Userdetails selectedElement) {
        this.selectedElement = selectedElement;
    }

    public Userdetails getSelectedElement() {
        return selectedElement;
    }

    //COLUMN MODEL STUFF THAT WORKS FINE HERE

} 
```

xhtml 的东西

```
 <p:dataTable var="userdetails" value="#{userdetailsController.elements}"
                 rowKey="#{userdetails.userid}" 
                 scrollable="true" scrollRows="10" scrollHeight="150"
                 resizableColumns="true" 
                 selection="#{userdetailsController.selectedElement}"  
                 draggableColumns="true" selectionMode="single" paginator="true" 
                 widgetVar="userdetails" id="elementsTable">    

        <p:ajax event="rowSelect"  
    update=":datatableForm:display" /> 

                <p:columns value="#{userdetailsController.columns}" var="column" columnIndexVar="colIndex" sortBy="#{userdetails[column.property]}" filterBy="#{userdetails[column.property]}">  

                    <f:facet name="header">  
                        #{column.header}  
                    </f:facet>  

                    #{userdetails[column.property]}  
                </p:columns>  

   <f:facet name="footer">
       <p:commandButton id="addDlgBtn" value="Add this user?" update=":datatableForm:display" oncomplete="addUser.show()"/>  
   </f:facet>
            </p:dataTable>  
            </p:fieldset> 
```

这就是限制数据表的方式，对话框看起来像这样，但有更多选项：

```
<p:dialog id="dlgAdd"  header="Adding users" widgetVar="addUser">

        <p:panelGrid id="display" columns="2" cellpadding="4">  

            <h:outputLabel value="#{bundle.CreateConnectiontableLabel_userid}" for="userid"/>
            <h:outputText value="#{userdetailsController.selected.userid}" title="#{bundle.CreateConnectiontableTitle_userid}"/>

            <h:outputLabel value="#{bundle.CreateConnectiontableLabel_username}" for="username"/>
            <h:outputText value="#{userdetailsController.selected.username}" title="#{bundle.CreateConnectiontableTitle_username}"/>

            <h:outputLabel value="#{bundle.CreateConnectiontableLabel_infovalue}" for="infovalue"/>
            <h:inputText value="1" title="#{bundle.CreateConnectiontableTitle_infovalue}"/>

        </p:panelGrid>   

    <p:commandButton id="addbtn" value="Add the User." update=":datatableForm" 
                         actionListener="#{connectiontableController.create}" 
                         onclick="addUser.close()"/>   

</p:dialog> 
```

但是，当我单击添加按钮时，我没有得到那些来自 selectedElement 的预设，即 #{userdetailsController.selected.username} 显示为空白。当我单击 Adduser 时，我收到以下错误（带有完整的 Stacktrace）：

> 警告：StandardWrapperValve [Faces Servlet]：PWC1406：Servlet Faces Servlet 的 Servlet.service() 引发异常 javax.el.PropertyNotWritableException：/securedadmin/adminsetup.xhtml @146,110 value=""：com.sun 中设置操作的非法语法。 faces.facelets.el.TagValueExpression.setValue(TagValueExpression.java:136) 在 javax.faces.component.UIInput.updateModel(UIInput.java:818) 在 javax.faces.component.UIInput.processUpdates(UIInput.java:735)在 javax.faces.component.UIComponentBase.processUpdates(UIComponentBase.java:1242) 在 javax.faces.component.UIComponentBase.processUpdates(UIComponentBase.java:1242) 在 org.primefaces.component.dialog.Dialog.processUpdates(Dialog.java :366) 在 javax.faces.component.UIComponentBase 的 javax.faces.component.UIForm.processUpdates(UIForm.java:281)。processUpdates(UIComponentBase.java:1242) at javax.faces.component.UIComponentBase.processUpdates(UIComponentBase.java:1242) at org.primefaces.component.layout.Layout.processUpdates(Layout.java:252) at javax.faces.component .UIComponentBase.processUpdates(UIComponentBase.java:1242) 在 javax.faces.component.UIComponentBase.processUpdates(UIComponentBase.java:1242) 在 javax.faces.component.UIViewRoot.processUpdates(UIViewRoot.java:1231) 在 com.sun。 faces.lifecycle.UpdateModelValuesPhase.execute(UpdateModelValuesPhase.java:78) at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101) at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java: 118) 在 javax.faces.webapp.FacesServlet.service(FacesServlet.java:593) 在 org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550) 在 org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175) 在 org.apache.catalina.core.StandardPipeline 的 org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281) .doInvoke(StandardPipeline.java:655) 在 org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595) 在 org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161) 在 org. apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331) at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231) at com.sun.enterprise.v3.services.impl.ContainerMapper$ AdapterCallable.call(ContainerMapper.java:317) 在 com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195) 在 com.sun.grizzly.http。ProcessorTask.invokeAdapter(ProcessorTask.java:860) at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757) at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056) at com .sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229) 在 com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137) 在 com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104 ) 在 com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90) 在 com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79) 在 com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask. java:54) 在 com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59) 在 com.sun.grizzly。com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532) 上的 ContextTask.run(ContextTask.java:71) com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:第513章）

编辑：以下只是我愚蠢，我会尽快尝试其他建议，但这只是需要适当的 id。哎呀。

我还被告知他们每个人：

> 警告：无法在视图中找到 ID 为用户 ID 的组件。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T17:21:09.083

```
javax.el.PropertyNotWritableException: /securedadmin/adminsetup.xhtml @146,110 value="": Illegal Syntax for Set Operation 
    at com.sun.faces.facelets.el.TagValueExpression.setValue(TagValueExpression.java:136) 
    at javax.faces.component.UIInput.updateModel(UIInput.java:818)
    ... 
```

在第 146 行，`/securedadmin/adminsetup.xhtml`你的字符 110 有一个

```
<h:inputText value="" /> 
```

这个不对。正如异常消息所说，不可能对其执行 setter 方法操作。

要么删除`value=""`

```
<h:inputText /> 
```

或使用 getter/setter 将其绑定到 bean 属性，如下所示

```
<h:inputText value="#{bean.value}" /> 
```

理智的 JSF 教程的第 1 章对此进行了解释。我建议通过一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T16:15:23.267

首先我看到了这部分：

```
onclick="addUser.close()" 
```

我用 hide() 不关闭。

我在这里也看不到，但是您的对话框和数据表是单独的形式吗？您也可以使用 ViewScoped。

还有一件事。在数据表中，您将选定的行分配给 userdetailsController.selectedElement，在对话框中您使用了 userdetailsController.selected。做一样。

# python - 如何使用递归生成器遍历二叉树？

> ID：14815765
> 
> 赞同：3
> 
> 时间：2013-02-11T15:55:11.863
> 
> 标签：python, recursion, iterator, generator

我正在尝试遍历在以下代码中创建的二叉树。准确地说，二叉树是一个类，应该包括一个调用另一个函数的迭代器，即 inorder()。这个方法应该是一个递归生成器，并在每次迭代中产生节点的值。我试图创建一个字典来跟踪节点，但是当我尝试调用 inorder() 方法时，它不起作用。有什么我不知道的遗漏点吗？我使用了while，它创建了树左侧的字典（这是一种笨拙的方式）。请帮我完成这段代码。

```
d=[]

# A binary tree class.
class Tree(object):
    def __init__(self, label, left=None, right=None):
        self.label = label
        self.left = left
        self.right = right
        self.d=dict()
    def __repr__(self, level=0, indent="    "):
        s = level * indent + self.label
        if self.left:
            s = s + "\n" + self.left.__repr__(level + 1, indent)
        if self.right:
            s = s + "\n" + self.right.__repr__(level + 1, indent)
        return s

def traverse(self):
    if self.left:
        lastLabel=self.label
        self.left.traverse()
    if self.right:
        lastLabel=self.label
        d.append(lastLabel)
        self.right.traverse()
    else:
        d.append(self.label)
    return d

def __iter__(self):
    return inorder(self)

# Create a Tree from a list.
def tree(sequence):
    n = len(sequence)
    if n == 0:
        return []
    i = n / 2
    return Tree(sequence[i], tree(sequence[:i]), tree(sequence[i+1:]))

# A recursive generator that generates Tree labels in in-order.
def inorder(t):
    for i in range(len(d)):
        yield d[i]    

def test(sequence):
# Create a tree.
    t = tree(sequence)
# Print the nodes of the tree in in-order.
    result = []
    for x in t:
        result.append(x)
    print x
    print

    result_str = ''.join(result)

# Check result
    assert result_str == sequence
    del d[:]
def main():
    # Third test
    test("0123456789")

    print 'Success! All tests passed!'

if __name__ == '__main__':
    main() 
```

**我再次更改了代码** 我完成了代码，但我确信这不是遍历二叉树的最佳方法。我在我的类中定义了一个方法 -traverse()- 并现在**按顺序**返回了一个节点列表（起初没有排序，所以我使用了 sort() 方法。）然后我在我的生成器中对该列表进行了循环, inorder() 函数，以产生它的元素。非常欢迎您的所有意见来优化代码。请根据此代码中的特定 Tree 类推荐适当的解决方案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-11T16:01:58.617

也许我遗漏了一些东西，但我不确定为什么字典与`inorder()`. 想想一般的有序遍历是什么样子的：

```
def inorder(t):
    # Process left sub tree
    # Process t
    # Process right sub tree 
```

所以就生成器而言，这看起来像：

```
def inorder(t):
    if t.left:
        for elem in inorder(t.left):
            yield elem
    yield t
    if t.right:
        for elem in inorder(t.right):
            yield elem 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T20:46:30.010

我完全被你的想法弄糊涂了。一方面，这段代码中实际上没有任何字典，我不明白你为什么要引入`d`全局。

对于二叉树的中序遍历，您需要做的就是遍历左侧、当前标签和右侧：

```
def inorder(tree):
    for label in tree.left:
        yield label
    yield tree.label
    for label in tree.right:
        yield label 
```

就是这样。

但是，我会对您的代码进行一些改进：

```
# Document classes and functions with docstrings instead of comments
class Tree(object):
    """A binary tree class"""
    def __init__(self, label, left=None, right=None):
        """Label is the node value, left and right are Tree objects or None"""
        self.label = label
        self.left = left   # Tree() or None
        self.right = right # Tree() or None

    def __repr__(self):
        return 'Tree(%r, %r, %r)' % (self.label, self.left, self.right)

    def __iter__(self):
        # No need for a separate inorder() function
        if self.left is not None:
            for t in self.left:
                yield t
        yield self.label
        if self.right is not None:
            for t in self.right:
                yield t

def tree(indexable):
    """Return a tree of anything sliceable"""
    ilen = len(indexable)
    if not ilen:
        # You should be clearer about empty values
        # left and right should be Tree (something with left, right, and __iter__)
        # or None if there is no edge.
        return None 
    center = ilen // 2 # floor division
    return Tree(indexable[center], tree(indexable[:center]), tree(indexable[center+1:]))

def test():
    seq = range(10)
    t = tree(seq)
    # list(t) will consume an iterable
    # no need for "result = []; for x in t: result.append(x)"
    assert seq == list(t)

if __name__ == '__main__':
    test() 
```

# php - 将javascript时间戳发送到php函数进行计算

> ID：14815768
> 
> 赞同：0
> 
> 时间：2013-02-11T15:55:23.433
> 
> 标签：php, javascript, mysql

我有一个页面，我试图循环遍历 mysql 查询的结果，在这个块中，我需要将 JS`new date().getTime()`值发送到 php 函数以计算经过的时间，所有这些都在 while 循环内。

我如何做到这一点？

我的 php 页面是这样的：

```
 <body>
 <?php
 while($rows = $result->fetch_assoc()){
 echo "<div>".// now here i want to send the time value from JS to function 
 like time($a JS value)."</div>"
  }
  ?>

 </body> 
```

**编辑**也许我让人们试图弄清楚执行时间，但事实并非如此。我希望将来自 mysql 查询的时间值与 php 函数中来自 JS 的客户端机器时间进行比较。我的 php 函数计算经过的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:49:12.687

呃..奇怪......但当然如果你认为这很重要......

如果您认为可以在 php 脚本仍在运行任何代码的同时将 js 时间从客户端返回到您的客户端，那么它将不起作用！

但是如果需要，您可以通过 ajax 获取信息。

我们开始吧：将 sql 查询中的时间值添加到呈现网站的 DOM 对象中javascript 的值）

为了让事情变得轻松（对我来说），我假设要实现 jQuery。

标头

```
var sqltime = 1360599506; // unix timestamp set by php
// now let's get the information from the user incl his timezone
var tnow = new Date(); // string something like: "Mon Feb 11 2013 17:24:06 GMT+0100" 
// and a timestamp-like number for tnow
var tstmp = var now = Math.round(tnow.getTime() / 1000) 
//and now send those three values via ajax to the server:
var postdata = {action: 'ajaxtime', ts: sqltime, tj: tstmp, tr: tnow};
$.ajax({
    type: 'POST',
    url: "http://example.com/my.php",
    data: postdata,
    success: function (response)
    {
        //do something with the response if you want. just decode the received json string if any
    }
});
//you could also compare the two timestamps on clientside if this is more convenient. 
```

并且 php 应该有一个触发 ajax 请求的触发器，将它放入你的 php 中，尽可能高（但在任何东西被回显或查询到你的 sql 之前！！）

```
if (array_key_exists('ajaxtime', $_REQUEST)) 
{
    $sql time = $_POST['ts'];
    $js_timestamp = $_POST['tj'];
    $readable_js_time = $_POST['tr'];

// here you can calculate the timestamps and get timezone from the readable_js_time and do whatever you need to.
$json['success'] = true;
$json['result'] = "my result from the calculation";

    // make sure no other code of this php is executed because of the ajaxtime request
    die();
    //if you want to response with a json string to parse in the javascript response use this:
    //die (jsonEncode($json));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T15:58:47.323

你应该更好地使用 PHP 的 time 函数，如下所示：

```
$currTime = time(); 
```

但是，如果客户端浏览器和您的 Web 服务器可能位于不同的时区，那么您可以使用 get 查询参数将 javascript 时间传递给您的 PHP 脚本，然后在 PHP 脚本中访问它，例如：

```
$currTime = $_GET['jsCurrTime']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T16:00:05.670

如果你想在 PHP 中测量执行时间，你需要使用`microtime`;

```
$start = microtime(true);
// Some code to measure
$time = microtime(true) - $start; 
```

# c# - c# 中 WCF 服务的裸 Json 响应

> ID：14815769
> 
> 赞同：1
> 
> 时间：2013-02-11T15:55:26.583
> 
> 标签：c#, asp.net, json, wcf, jquery

我在 .NET 4 平台上创建了一个 WCF 服务，当我使用 jquery ajax POST 访问它时，它会返回 JSON。我遇到的问题是，如果 POST 的 json 响应不包含在带有 Result 后缀的方法的名称中，我会更喜欢。

详细地：

```
public interface IService
{
    [OperationContract]
    [WebInvoke(Method = "POST",
 ResponseFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.Wrapped)]
    Person GetInfo(string id);
}

[AspNetCompatibilityRequirements(RequirementsMode
    = AspNetCompatibilityRequirementsMode.Allowed)]
public class Service: Iservice
{
    public Person GetInfo(string id)
    {
           ...
           return new Person();
    }
}

public class Person
{
  public string FirstName;
  public string LastName;

  public Person(){
   FirstName = "Jon";
   LastName = "Doe";
  }
}

web.config
<system.serviceModel>
   <serviceHostingEnvironment aspNetCompatibilityEnabled="true" />
   <behaviors>
     <serviceBehaviors>
       <behavior name="ServiceBehavior">
         <serviceMetadata httpGetEnabled="true"/>
         <serviceDebug includeExceptionDetailInFaults="true"/>
       </behavior>
     </serviceBehaviors>
     <endpointBehaviors>
       <behavior name="EndpBehavior">
         <webHttp/>
       </behavior>
     </endpointBehaviors>
   </behaviors>
   <services>
     <service behaviorConfiguration="ServiceBehavior" name="Service">
       <endpoint address="" binding="webHttpBinding"
           contract="IService" behaviorConfiguration="EndpBehavior"/>
     </service>
   </services>
 </system.serviceModel> 
```

jQuery：

```
var myparameters = JSON.stringify({ id: $('#id').val()});
            $.ajax({
                type: "POST",
                url: "/Service.svc/GetInfo",
                data:myparameters,
                contentType: "application/json",
                dataType: "json",
                success: function (response) {
                      ...
                    }
                }
            }); 
```

在`BodyStyle = WebMessageBodyStyle.Wrapped`我的javascript代码中得到的响应是：

```
{"GetInfoResult" : {"FirstName":"Jon", "LastName":"Doe"}} 
```

但是当我将其更改为`WebMessageBodyStyle.Bare`其他所有内容保持不变时，会发生 500 内部服务器错误。

是否可以在没有 Method+Result 包装器的情况下在我的 POST 响应中返回 Bare json？如果是，我做错了什么？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T16:32:48.473

我认为这`WebMessageBodyStyle.Bare`也需要一个“裸”请求，并且您正在从您的 javascript 代码中发送一个对象，如下所示：`{id:'value'}` 这将被翻译为：

```
public class DTObject{
  public string Id { get; set; }
} 
```

而且您的操作方法只需要一个`string`as 参数。

试着让你的反应像这样“裸露” `WebMessageBodyStyle.WrappedRequest`。

**[编辑]** [http://msdn.microsoft.com/en-us/library/system.servicemodel.web.webmessagebodystyle.aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.web.webmessagebodystyle.aspx)

# solr - 无法用 solr4 配置 Tika1.2

> ID：14815771
> 
> 赞同：1
> 
> 时间：2013-02-11T15:55:30.430
> 
> 标签：solr, apache-tika, dataimporthandler, solr4

我正在尝试使用 TikaEntityProcessor 来索引 .html 文件内容。不知何故，我无法正确获得它。我检查了错误日志并收到以下错误。

```
SEVERE: Full Import failed:java.lang.RuntimeException:org.apache.solr.handler.dataimport.DataImportHandlerException: Unable to load EntityProcessor implementation for entity:tika-test Processing Document # 1
    at org.apache.solr.handler.dataimport.DocBuilder.execute(DocBuilder.java:273)
    at org.apache.solr.handler.dataimport.DataImporter.doFullImport(DataImporter.java:382)
    at org.apache.solr.handler.dataimport.DataImporter.runCmd(DataImporter.java:448)
    at org.apache.solr.handler.dataimport.DataImporter$1.run(DataImporter.java:429)
Caused by: org.apache.solr.handler.dataimport.DataImportHandlerException: Unable to load EntityProcessor implementation for entity:tika-test Processing Document # 1
    at org.apache.solr.handler.dataimport.DataImportHandlerException.wrapAndThrow(DataImportHandlerException.java:71)
    at org.apache.solr.handler.dataimport.DocBuilder.getEntityProcessorWrapper(DocBuilder.java:697)
    at org.apache.solr.handler.dataimport.DocBuilder.getEntityProcessorWrapper(DocBuilder.java:703)
    at org.apache.solr.handler.dataimport.DocBuilder.execute(DocBuilder.java:215)
    ... 3 more
Caused by: java.lang.ClassNotFoundException: Unable to load TikaEntityProcessor or org.apache.solr.handler.dataimport.TikaEntityProcessor
    at org.apache.solr.handler.dataimport.DocBuilder.loadClass(DocBuilder.java:899)
    at org.apache.solr.handler.dataimport.DocBuilder.getEntityProcessorWrapper(DocBuilder.java:694)
    ... 5 more
Caused by: org.apache.solr.common.SolrException: Error loading class 'TikaEntityProcessor'
    at org.apache.solr.core.SolrResourceLoader.findClass(SolrResourceLoader.java:436)
    at org.apache.solr.handler.dataimport.DocBuilder.loadClass(DocBuilder.java:889)
    ... 6 more
Caused by: java.lang.ClassNotFoundException: TikaEntityProcessor
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217) 
```

我的 data-config.xml 文件如下：

```
<dataConfig>
    <dataSource type="BinFileDataSource" />
    <document>
    <entity name="f" processor="FileListEntityProcessor" baseDir="path/to/basedir/" fileName=".*html" recursive="true" rootEntity="true" dataSource="null">
       <entity name="tika-test" processor="TikaEntityProcessor" url="path/tohtml/files/" format="text" onError="skip">
            <field column="product_id" name="product_id" meta="true"/>
            <field column="type" name="type" meta="true"/>
            <field column="title" name="title" meta="true"/>        
        </entity>
    </entity>
</document>
</dataConfig> 
```

我在 solrconfig.xml 中添加了以下代码

```
<requestHandler name="/dataimport"  class="org.apache.solr.handler.dataimport.DataImportHandler">
<lst name="defaults">
  <str name="config">/path/to/data-config.xml</str>
</lst> 
```

我保留了默认的 schema.xml 文件并在该文件中添加了以下代码。

```
<field name="product_id" type="string" indexed="true" stored="true"/>
<field name="title" type="string" indexed="true" stored="true"/>
<field name="type" type="string" indexed="true" stored="true"/> 
```

谁能告诉我我在这里想念什么？或者为什么我会得到错误？以及它的解决方案是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:10:47.363

您是否在 solrconfig.xml 中添加了*lib*指令以确保已加载 tika 库？你需要（我相信）：

```
<lib dir="${user.dir}/../dist/" regex="solr-cell-\d.*\.jar" />
<lib dir="${user.dir}/../contrib/extraction/lib" regex=".*\.jar" /> 
```

如果您使用的是 Solr 4，而不是 Solr 4.1，您可能需要说 apache-solr-cell.... 而不仅仅是 solr-cell...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T03:57:08.360

TikaEntityProcessor 在[dataimporthandler-extras](http://www.jarvana.com/jarvana/view/org/apache/solr/solr-dataimporthandler-extras/3.5.0/solr-dataimporthandler-extras-3.5.0-javadoc.jar!/index.html) jar 文件中可用。
您可以使用`apache-solr-dataimporthandler-.*\.jar`模式来加载文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T21:41:07.757

您需要在 dist 文件夹以及 contrib 中的相应文件中添加 apache-solr-dataimporthandler-4.0、apache-solr-dataimporthandler-extras-4.0 和 apache-solr-cell-4.o 的 jars（或路径）文件夹。

我的问题就是这样解决的。

# path - Drupal 7 显示查询路径的自定义内容

> ID：14815772
> 
> 赞同：0
> 
> 时间：2013-02-11T15:55:30.243
> 
> 标签：path, drupal-7, customization

例如，我在浏览器中查询“ [http://mydrupalsite.com/customers/1456](http://mydrupalsite.com/customers/1456) ”所期望的行为是只打开一个带有“body”的普通drupal页面（不是html <body>，而是页面主体，如显示主要信息的区域）由我传递“1456”的函数生成的代码。

我尝试使用 hook_menu 复制这种行为：

```
$items['customers/%'] = array(
    'access callback' => TRUE,
    'access arguments' => array(1),
    'type' => MENU_CALLBACK,
    'page callback' => 'mycustomer_render',
    'page arguments' => array(1)
); 
```

mycustomer_render() 将接受一个参数（正确传递）并生成一些我想在该主要区域显示的代码。但是，回调将打开一个**仅**包含该函数生成的代码的页面。没有侧边栏，没有标题等。

请注意，我不想显示节点信息或任何内容，只是该函数生成的自定义 html 代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:32:20.737

根据您对回调函数的评论：

> 这几乎是 echo ""; echo htmlDataFromCustomer($arg1); 回声“”；

您希望您的回调函数**返回**数据，而不是回显它。在回调函数中回显数据将立即将其显示到页面上，并且不允许 drupal 正确运行渲染过程，因此您不会在页面上看到任何其他内容。

要在 drupal 中正确显示您的内容，您的回调函数应该类似于以下内容。

```
<?php
function mycustomer_render($arg1){
  return '<table>'.htmlDataFromCustomer($arg1).'</table>';
}
?> 
```

但是，如果您只想获得函数输出的内容而没有其他内容，那么您应该回显您的内容，然后是[drupal_exit()](http://api.drupal.org/api/drupal/includes!common.inc/function/drupal_exit/7)，如下所示：

```
<?php
function mycustomer_render($arg1){
  echo '<table>',htmlDataFromCustomer($arg1),'</table>';
  drupal_exit();
}
?> 
```

# c++ - 调整 QGraphicsItem 大小不会更新项目属性

> ID：14815778
> 
> 赞同：1
> 
> 时间：2013-02-11T15:55:41.187
> 
> 标签：c++, qt, qgraphicsitem

我正在调整 QGraphicsItem (mItem) 的大小，如下所示：

```
 QRectF itemSize = mItem->boundingRect();

  float scale_width = width / itemSize.width();
  float scale_height = height / itemSize.height();

  QTransform t;
  t.scale(scale_width, scale_height);
  mItem->setTransform(t); 
```

视觉上它做了它应该做的，但是，如果我在重新调整大小后得到 boundingRect，它并没有改变。我的印象是 boundingRect 可能不会改变但比例，但它也保持不变。如果原始 boundingRect 是 (0,0,100,100)，新宽度 id 是 200，新高度是 200，我希望新 boundingRect 是 (0,0,200,200)。

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:49:08.843

转换提供了对象空间和场景（世界）空间（或者可能是父对象空间）之间的映射以进行渲染 - 它**不**应用于对象本身。

所以在一个对象上设置一个缩放变换，不会改变它的边界框，因为对象没有被缩放——只有它映射到场景中的方式有​​。[文档](https://qt-project.org/doc/qt-4.8/graphicsview.html#the-graphics-view-coordinate-system)比我能解释得更好。

`QGraphicsItem``mapTo...`有许多`mapFrom...`方法可以提供您需要的东西。

# coffeescript - coffeescript + jshint = 未使用的变量：_this

> ID：14815780
> 
> 赞同：0
> 
> 时间：2013-02-11T15:55:45.950
> 
> 标签：coffeescript, jshint

编译任何代码`bare = false`并使用 linting生成`JShint`
.`Unused variable: _this`

解决方案？
`bare = true`应该保留，
此外我很高兴`jshint`检查未使用的变量。我只想在这里例外。

* * *

顺便说一句，我也得到了

```
Move the invocation into the parens that contain the function.
}).call(this); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:26:45.223

你为什么要通过 jshint 运行你用 Coffeescript 编写的东西？jshint 不应该与手写 javascript 一起使用吗？

如果您真的想使用 lint 工具，为什么不使用[http://www.coffeelint.org/](http://www.coffeelint.org/)

[最后，这与这里的问题](https://stackoverflow.com/q/12684758/1269969)非常相似，因为这不是一个真正的问题而被关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-15T15:10:09.940

如果你*真的*想通过 JSHint 运行生成的 JS，你可以传递[选项](http://www.jshint.com/docs/options/)来忽略这个警告，如下所示：

```
###jshint node: true, unused: false ### 
```

编译为

```
/*jshint node: true, unused: false */ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-03T03:23:51.760

我在面向浏览器的 Coffeescript 项目中使用以下[`.jshintrc`设置](http://www.jshint.com/docs/options/)

```
// be sure to turn off 'devel' before shipping.
{
  "devel": true,
  "bitwise": true,
  "boss": true,
  "browser": true,
  "camelcase": true,
  "curly": true,
  "eqeqeq": true,
  "eqnull": true,
  "es3": false,
  "esnext": true,
  "forin": false,
  "freeze": true,
  "immed": true,
  "indent": 2,
  "jquery": true,
  "latedef": true,
  "newcap": true,
  "noarg": true,
  "noempty": true,
  "nonbsp": true,
  "nonew": true,
  "plusplus": false,
  "quotmark": "double",
  "strict": false,
  "trailing": true,
  "undef": true,
  "unused": false,
  "predef": ["jQuery", "console"]
} 
```

# jquery - 使用 jquery 的自定义验证器遇到一些问题

> ID：14815783
> 
> 赞同：0
> 
> 时间：2013-02-11T15:55:55.133
> 
> 标签：jquery, asp.net, regex, customvalidator

我在让自定义验证器与 jQuery 一起使用时遇到问题。

这是我创建的用于检查文本框是否包含 PO BOX 的函数。

```
function valPoBox(sender, args) {
    var hasPObox = "^P\.?\s?O\.?\sB[Oo][Xx].";
    var StreetAddress = $('.streetaddress').val();
    var match = StreetAddress.match(RegExp(hasPObox));
    if (!match) {
        args.IsValid = false;
        sender.ErrorMessage = "Address must not contain P.O. Box";
        $('.valPoBox').attr("ErrorMessage", sender.ErrorMessage);
    }
    else {
        args.IsValid = true;
    }
} 
```

当我跳出文本框时会触发该函数，并将按照逻辑进入 args.IsValid = false; 但它不会显示错误消息。

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:14:31.883

您拥有的最后一行`$('.valPoBox').attr("ErrorMessage", sender.ErrorMessage);`实际上不是有效的代码。该`attr`函数在元素上设置 HTML 属性。我猜你想要做的是在输入之后添加一段文本，并在验证失败后将其显示给用户。

例如，你可以有这样的东西：

```
<input class="streetaddress" /><span id="PoBoxError"></span> 
```

然后你的 JS 变成类似这样的东西：

```
 ...
    $('#PoBoxError').html(sender.ErrorMessage);
} else {
    args.IsValid = true;
    $('#PoBoxError').html('');
} 
```

这会在输入错误消息后设置跨度，并在通过验证后再次隐藏它。这只是您可以实现此目的的方法之一，其他方法涉及显示和隐藏内容，但我试图使答案尽可能接近您的原始代码。

# visual-studio-2012 - Visual Studio 解决方案资源管理器中的刷新按钮不起作用

> ID：14815786
> 
> 赞同：32
> 
> 时间：2013-02-11T15:56:02.770
> 
> 标签：visual-studio-2012, solution-explorer

刚刚获得适用于 Windows 桌面的 Visual Studio Express 2012，发现自己对解决方案资源管理器无法准确反映我的项目状态感到非常恼火。我一直单击刷新，但它实际上并没有做任何事情。[微软](http://msdn.microsoft.com/en-us/library/vstudio/f1w05k2y%28v=vs.100%29.aspx)对如何使用它的详细解释无济于事。奇怪的是，我的项目有时会刷新，但我不知道是什么原因。这绝对不是刷新按钮。

这是我的解决方案资源管理器现在的样子：
![我的解决方案资源管理器](../Images/bb2507278645da3cf37b17bfb0b435cb.png)
我已经删除了很多这样的类。我在命名类的过程中输入了诸如“术语”之类的内容，但解决方案资源管理器将它们显示为单独的类。我的一些课程也没有出现。

整个事情真的一团糟，我无法想象我的项目是什么样子，因为解决方案资源管理器没有显示我的课程的最新大纲。

**如何刷新解决方案资源管理器？**

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-03-13T18:44:17.670

解决方案资源管理器的第一行有一个“显示所有文件”按钮。单击它，您应该会看到丢失的文件/文件夹。右键单击并选择“包含在项目中”。

![显示所有文件](../Images/757302554d4d0762ede700082bfc14d6.png)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-02-10T06:02:34.943

选择您删除文件的项目，然后单击显示所有文件[![在此处输入图像描述](../Images/ff139d5ad4e7fe54a5df63df041787bc.png)](https://i.stack.imgur.com/zGbzO.png)

现在您将获得排除/删除的文件 [![在此处输入图像描述](../Images/0e32509318d58476716357c02d814ec2.png)](https://i.stack.imgur.com/DWXEx.png)

右键单击>包含在项目中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-02-09T06:23:05.617

解决方案资源管理器的第一行有一个刷新图标选项。
[![检查图像](../Images/bd4f226f4bb481cdd9ea36802c0562e8.png)](https://i.stack.imgur.com/IKYbi.png)

# python - Python：将数组传递给对象时的奇怪行为

> ID：14815791
> 
> 赞同：0
> 
> 时间：2013-02-11T15:56:09.487
> 
> 标签：python, algorithm

所以，我刚刚开始关注 coursera.org 的新算法课程。由于课程是 JAVA 的，而且我不想同时学习 Java+算法，所以我正在将 JAVA 示例“翻译”成 python。但是，我有点卡住了，因为应该更快的算法性能更差。对我来说奇怪的是，当我运行测试时输入很大，较慢的算法是最快的，......我认为这与我实例化的数组（ids）发生的一些奇怪的事情有关不同的对象：

```
import time
from utils.benchmark import *
from quickunion import *
from quickunion_weighted import *
from quickfind import *

# create only one array of id's so the comparison is fair
ids = random_tree(10)

my_trees = [QuickFindUF, QuickUnionUF, 
        QuickUnionWeighted, QuickUnionPathCompression]

print "~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n"

def test(classes, tree):
    for e in classes:
        tmp = e(arr=tree)
        print tmp.id
        print "%s:" % tmp.__class__.__name__
        t = time.clock()
        print "\tare 3 and 6 connected?: %s" % tmp.connected(3, 6)
        "\tunion(3, 6): "
        tmp.union(3,6)
        print "\tare 3 and 6 connected?: %s" % tmp.connected(3, 6)
        print "Total time: {0} ".format(time.clock()-t)

if __name__ == '__main__':
    test(my_trees, ids) 
```

这将打印以下结果：

```
[1, 8, 1, 7, 4, 8, 5, 7, 8, 2]
QuickFindUF:
    are 3 and 6 connected?: False
    are 3 and 6 connected?: True
Total time: 2.7e-05 
[1, 8, 1, 5, 4, 8, 5, 5, 8, 2]
QuickUnionUF:
    are 3 and 6 connected?: True
    are 3 and 6 connected?: True
Total time: 2.6e-05 
[1, 8, 1, 5, 4, 8, 5, 5, 8, 2]
QuickUnionWeighted:
    are 3 and 6 connected?: True
    are 3 and 6 connected?: True
Total time: 2.8e-05 
[1, 8, 1, 5, 4, 8, 5, 5, 8, 2]
QuickUnionPathCompression:
    are 3 and 6 connected?: True
    are 3 and 6 connected?: True
Total time: 2.7e-05 
```

出于某种原因，除了 QuickFindUF 实例之外，数组在比较之前都发生了变化。任何想法为什么？

这是我创建的仓库：[https ://github.com/herrmendez/python-algorithms](https://github.com/herrmendez/python-algorithms)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:02:31.287

您的算法正在修改传入的列表实例。Python 没有通过可复制值获取参数的概念；每个绑定名称都是按值传递的对象引用，但有些对象类型是不可变的。

将列表的副本传递给算法：

```
from copy import deepcopy

...

    tmp = e(arr=deepcopy(tree)) 
```

# wpf - 使用 DataTrigger 在 DataGridTemplateColumn 而不是 DataTemplateSelector 中显示“脏”值

> ID：14815793
> 
> 赞同：0
> 
> 时间：2013-02-11T15:56:13.690
> 
> 标签：wpf, datagrid, datatrigger, datagridtemplatecolumn

我仍然在掌握 WPF 的窍门时遇到一些问题。我觉得这可能是一个简单的问题，我想知道为什么我不能让它像我认为的那样工作。

我正在尝试使用 DataTrigger 来显示我的 DataGrid 中的值是“脏的”，这意味着自上次将数据提交到数据库以来，它的值已经发生了变化。绑定到我的网格视图的项目有一个运行良好的 IsDirty 属性。我正在尝试在网格中单元格的 TextBlock 中使用红色星号来指示存在未提交的更改，使用 DataTrigger，就像这样，在我的 DataGrid.Resources 中。这个想法是，如果所选行项上的 IsDirty 为 True，则字体颜色将从透明变为红色：

```
 <DataTemplate x:Key="CleanTemplate">
                <Grid HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <TextBlock Grid.Column="0" Text="*" Padding="0,0,5,0" Foreground="Transparent" FontWeight="Bold" FontFamily="Lucida Console" >
                        <TextBlock.Style>
                            <Style TargetType="TextBlock">
                                <Style.Triggers>
                                    <!-- Not sure why this isn't working... this text block can't see changes in IsDirty for some reason-->
                                    <DataTrigger Binding="{Binding Path=IsDirty}" Value="True">
                                        <Setter Property="Foreground" Value="Red" />
                                    </DataTrigger>                                                                                                                    
                                </Style.Triggers>
                            </Style>
                        </TextBlock.Style>
                    </TextBlock>
                    <Label Grid.Column="1" Foreground="DarkGray" Background="Transparent" VerticalContentAlignment="Center" Content="{Binding Path=Value,Mode=OneWay,ValidatesOnDataErrors=True,UpdateSourceTrigger=PropertyChanged}" />
                </Grid>
            </DataTemplate> 
```

我的猜测是，样式触发器的 DataContext 与实际 TextBlock 的 DataContext 不同（以及 DataGrid 中单元格的一部分），我需要更改绑定路径，以便触发器可以“看到" 所选项目及其属性。我不确定如何导航到可以在网格中看到所选项目属性的位置。

我能够通过 DataGridTemplateColumn 上的 CellTemplateSelector 让它工作，但是客户根据所选行的数据类型请求不同的输入控件，所以现在我的数据模板选择的标准变得更加复杂（现在我需要为每个单独的控件和一个基本相同的模板设置一个模板，除了显示值 IsDirty）。

XAML：

```
 <DataGridTemplateColumn
        Header="Value"
        Width="*"
        MinWidth="25"
    >
        <DataGridTemplateColumn.CellTemplateSelector>
            <local:ParameterStateTemplateSelector 
                CleanTemplate="{StaticResource CleanTemplate}"
                CleanTemplateYN="{StaticResource CleanTemplateYN}"
                DirtyTemplate="{StaticResource DirtyTemplate}"
                DirtyTemplateYN="{StaticResource DirtyTemplateYN}"
            />
        </DataGridTemplateColumn.CellTemplateSelector>
    </DataGridTemplateColumn> 
```

Label 类型数据的模板（区别在于 TextBlock 的 Foreground 是透明的还是红色的，取决于 IsDirty）：

```
 <DataTemplate x:Key="CleanTemplate">
        <Grid HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <TextBlock Grid.Column="0" Text="*" Padding="0,0,5,0" Foreground="Transparent" FontWeight="Bold" FontFamily="Lucida Console" />
            <Label Grid.Column="1" Foreground="DarkGray" Background="Transparent" VerticalContentAlignment="Center" Content="{Binding Path=Value,Mode=OneWay,ValidatesOnDataErrors=True,UpdateSourceTrigger=PropertyChanged}" />
        </Grid>
    </DataTemplate>

    <DataTemplate x:Key="DirtyTemplate">
        <Grid HorizontalAlignment="Stretch" VerticalAlignment="Stretch" >
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <TextBlock Grid.Column="0" Text="*" Padding="0,0,5,0" Foreground="Red" FontWeight="Bold" FontFamily="Lucida Console"/>
            <Label Grid.Column="1" Foreground="DarkGray" Background="Transparent" VerticalContentAlignment="Center" Content="{Binding Path=Value,Mode=OneWay,ValidatesOnDataErrors=True,UpdateSourceTrigger=PropertyChanged}" />
        </Grid>
    </DataTemplate> 
```

DataTemplateSelector 背后的代码（似乎 IsDirty 的 DataTrigger 会更简单）：

```
public class ParameterStateTemplateSelector : DataTemplateSelector
{
    public DataTemplate CleanTemplate { get; set; }
    public DataTemplate CleanTemplateYN { get; set; }
    public DataTemplate DirtyTemplate { get; set; }
    public DataTemplate DirtyTemplateYN { get; set; }
    public override DataTemplate SelectTemplate(object item, DependencyObject container)
    {
        ScenarioParam selectedItem = (ScenarioParam)item;
            if (selectedItem != null)
        {
            if (selectedItem.ParamObject.DataType == "BOOL")
            {
                if (selectedItem.IsDirty)
                {
                    return DirtyTemplateYN;
                }
                else
                {
                    return CleanTemplateYN;
                }
            }
            else
            {
                if (selectedItem.IsDirty)
                {
                    return DirtyTemplate;
                }
                else
                {
                    return CleanTemplate;
                }
            }
        }
        return base.SelectTemplate(item, container);
    }
} 
```

关于如何让 DataTrigger “查看”所选项目属性的更改的任何建议？或者也许不可能以我想要的方式使用 DataTriggers？

谢谢！

# android - 使用 like 运算符执行查询

> ID：14815796
> 
> 赞同：0
> 
> 时间：2013-02-11T15:56:23.353
> 
> 标签：android, sqlite

我想根据开始和结束字符以及字符串的长度进行查询。假设，在我的数据库中我有你好，如何，欢呼，亲爱的。我想从数据库中获取蜂蜜，所以我想做一个查询，比如它会找到以“h”开头并以“y”结尾的字符串和单词的长度是5。我写了一个查询是对的吗？

```
Cursor c = sqLiteDatabase.rawQuery("select * from " + MYDATABASE_TABLE
                + " where LENGTH(`" + MYDATABASE_FIELD + "`) = " + len
                + " and `" + MYDATABASE_FIELD + "` LIKE `" + part1 + "%"
                + part2 + "`", null); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:05:38.590

你应该有这样的条件，

```
SELECT...
FROM...
WHERE LENGTH(colName) = 5 AND
      colName LIKE 'h%s' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T18:16:19.127

第二个`LIKE`运算符是一个字符串，而不是表/列名，所以你不能用反引号引用它。此外，使用参数完全避免了字符串格式化问题：

```
Cursor c = sqLiteDatabase.rawQuery(
    "SELECT * FROM `" + MYDATABASE_TABLE + "` " +
      "WHERE LENGTH(`" + MYDATABASE_FIELD + "`) = " + len + " " +
        "AND `" + MYDATABASE_FIELD + "` LIKE ?",
    new String[] { part1 + "%" + part2 }); 
```

# iphone - iOS 访问最近的电子邮件

> ID：14815799
> 
> 赞同：0
> 
> 时间：2013-02-11T15:56:30.807
> 
> 标签：iphone, ios, objective-c, email

我知道这很可能会被回答“对不起，伙计”，但是有没有办法可以访问我最近从另一个 iOS 应用程序发送的电子邮件？我真的不需要电子邮件的内容，只需要地址。基本上，如果您没有在通讯录中存储联系信息，我仍然希望能够提取这些地址。

例如，在电子邮件应用程序中，当您撰写新电子邮件时，当您开始输入电子邮件地址时，它会尝试自动填充最近发送/接收的电子邮件地址。我试图模仿这种行为。

如果已经有关于此的堆栈溢出问题，请指出我正确的方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:03:33.420

不，没有 API 允许这样做。

应用程序无法访问其他应用程序数据，因为它们已被沙盒化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T17:33:04.310

鉴于我收到的快速回答证实了我怀疑这无法完成，我想我将提供一种人们可以像内置邮件应用程序那样设置电子邮件帐户的方法。我的意思是我将允许人们从主要的基于 Web 的邮件提供商中进行选择，如 gmail、yahoo mail 等，然后还允许他们使用他们的邮件服务器（地址、用户名、密码、端口等）创建一个邮件帐户。 )

这有点矫枉过正，因为我只想要他们最近使用的电子邮件地址，并且会吓跑那些不想访问他们的个人邮件的人，但如果我能做的就是这样。

# android - serial和dun蓝牙服务有什么区别？

> ID：14815804
> 
> 赞同：0
> 
> 时间：2013-02-11T15:56:41.907
> 
> 标签：android, bluetooth, uuid

我创建了一个 android 简单的蓝牙终端应用程序，用于与我的旧 java 手机 Sony Ericsson K700 进行通信。我发现来自 android 的服务并找到这个 uuid：1101（串行服务），1103（DUN）。我用 AT coomands 测试它，回复都ok其中。串口和dun蓝牙服务有什么区别？我可以使用旧手机作为调制解调器从安卓连接到互联网吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:01:36.023

DUN 是拨号网络，如果您知道正确的连接字符串，可能会让您联机。当我连接我的旧 T-Mobile 手机时，我使用了类似`at+cgdcont=1,"IP","epc.tmobile.com"`. 串行服务通常用于与手机上的应用程序进行通信。

# r - 使用 foreach 包将行附加到数据框

> ID：14815810
> 
> 赞同：9
> 
> 时间：2013-02-11T15:56:58.923
> 
> 标签：r, foreach, parallel-processing

我在使用并行处理将值附加到数据帧时遇到问题。

我有一个函数可以进行一些计算并返回一个数据帧，包括这些计算是随机抽样。

所以我所做的是：

```
randomizex <- function(testdf)
{
    foreach(ind=1:1000)%dopar%
    {
      testdf$X = sample(testdf$X,nrow(testdf), replace=FALSE)
      fit = lm(X ~ Y, testdf)
      newdf <- rbind(newdf, data.frame(pc=ind, err=sum(residuals(fit)^2) ))

    }

return(newdf)
}
resdf = randomizex(mydf) 
```

当我查看结果时`resdf`，它是空的

如果我替换`%dopar%`为`%do%`正确计算的结果，但它太慢了..

反正有没有提高一点？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-11T16:14:46.920

我认为您需要阅读`foreach`. 您的代码块应该计算单个部分，然后您应该使用该`.combine`选项来说明如何将它们全部连接在一起。查看 中的示例以`help(foreach)`获得更多指导。它不是`for`循环的直接替代品。

例如：

```
> resultdf = foreach(i=1:10,.combine=rbind)%dopar%{data.frame(x=runif(4),i=i)}
> resultdf
            x  i
1  0.23794248  1
2  0.15536320  1
3  0.58609635  1
4  0.98780497  1
5  0.97806482  2
6  0.92440741  2
7  0.13416121  2
8  0.81598340  2
9  0.13834423  3
[etc] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-03-16T20:49:11.050

您需要修改“foreach 循环”，例如：

```
newdf = foreach(ind=1:1000, .combine=rbind) %dopar%
{
    testdf$X = sample(testdf$X,nrow(testdf), replace=FALSE)
    fit = lm(X ~ Y, testdf)
    data.frame(pc=ind, err=sum(residuals(fit)^2) )
} 
```

希望能帮助到你！

# html - 日、月和年的 CSS 特定类

> ID：14815812
> 
> 赞同：1
> 
> 时间：2013-02-11T15:57:03.220
> 
> 标签：html, ruby-on-rails, ruby, date, erb

我在 HTML 页面中有这个 date_select 标记：

```
<%= f.date_select :birthday %> 
```

如何为一天设置一个特定的 CSS 类，为一个月设置一个，为一年设置一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:11:18.203

您可以通过片段 id 分配 css。假设您的字段返回为“生日”：

```
#birthday_1i{
  /* year */
}
#birthday_2i{
  /* month */
}
#birthday_3i{
  /* day */
} 
```

# excel - 在 Excel 中，我如何编写循环，除非满足条件，否则将继续删除单元格的内容？

> ID：14815813
> 
> 赞同：1
> 
> 时间：2013-02-11T15:57:03.237
> 
> 标签：excel, vba, loops

所以，我有三个非常大的数据列。我希望这些匹配，但列之间有很多不匹配的行。

我想要做的是编写一个循环宏来删除单元格中的内容，`F2`如果它们不等于`A2`或中的内容`K2`。但是，我只能找到有关为范围编写循环宏的详细信息。是否可以在同一个单元格上一遍又一遍地执行命令？到目前为止，我有：

```
Sub ArrayMatch()
Application.ScreenUpdating = True
Dim F As Range
For Each F In Range("F2:F2043").Cells
 F.Select
 If ActiveCell <> ActiveCell.Offset([0], [-5]) And ActiveCell <> ActiveCell.Offset([0],        [5]) Then
 Selection.Delete Shift:=xlUp      
  Else: Stop
  End If
  Next 
```

目前，我只想在其中任何一个相等时停止代码。但是，按照我在此处定义范围的方式，该代码仅适用于该范围内的所有其他单元格。`F2`我可以改写这个范围以一遍又一遍地将其余代码应用于单元格吗？

谢谢！我会继续试验我所拥有的，同时热切地等待回复！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T16:27:17.447

假设您的输入：

> 我可以改写此范围以将其余代码一遍又一遍地应用于单元格 F2 吗？

这不是你所期望的。线索是你应该检查范围内的每个单元格，只有在它不符合标准的情况下才移动到下一个。否则该行被删除，你应该留在同一个地方，即不要向下移动，因为如果`A1`被删除，`A2`现在变成`A1`，你应该再次检查它。

下面的代码将完成这项工作（也许您应该修改标准，但想法是这样）：

```
Sub RemoveRows()

Dim i As Long
Dim ActiveCell As Range

i = 2

Do While i <= 2043
    Set ActiveCell = Range("F" & i)
    If ActiveCell <> ActiveCell.Offset([0], [-5]) And ActiveCell <> ActiveCell.Offset([0], [5]) Then
        Selection.Delete Shift:=xlUp
    Else
        i = i + 1
    End If

Loop

End Sub 
```

这是非常相似的任务的示例：[https ://www.dropbox.com/s/yp2cwphhhdn3l98/RemoweRows210.xlsm](https://www.dropbox.com/s/yp2cwphhhdn3l98/RemoweRows210.xlsm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T16:28:02.370

尝试使用这样的东西：

```
Sub checkF()

RowCount = WorksheetFunction.CountA(Range("F2").EntireColumn)

While RowCount >= 1

If Range("F2").Value = Range("A2").Value Or Range("F2").Value = Range("K2").Value Then

    Stop

Else

    Range("F2").Delete Shift:=xlUp

End If

RowCount = RowCount - 1

Wend

End Sub 
```

这将循环遍历直到 F 列中剩下 1 个值，并在任何值匹配时停止。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T17:55:24.997

这是一个简单的循环，它将执行以下操作：

1.  `row 2`检索列的所有单元格值`A, F and K`
2.  检查值是否`F2`等于`A2`或`K2`
    *   如果相等，什么都不做并退出宏
    *   如果不相等，则删除 中的值`F2`，向上移动单元格，检索新`F2`值，然后从`step 1`

这是代码：

```
Public Sub MatchFirstRow()
Dim fCellValue As String
Dim aCellValue As String
Dim kCellValue As String
Dim shouldCheckAgain As Boolean

'get values of each cell in question
fCellValue = Cells(2, 6).Value
aCellValue = Cells(2, 1).Value
kCellValue = Cells(2, 11).Value
shouldCheckAgain = True

'loop through while the cell in "F" has a value AND the previous value wasn't a match
While Not IsEmpty(fCellValue) And Not fCellValue = "" And shouldCheckAgain
    shouldCheckAgain = False
    'If row values don't match, delete cell in F, shift up, then
    'reinitialize the F cell value for next pass
    If Not StrComp(fCellValue, aCellValue, vbTextCompare) _
        And Not StrComp(fCellValue, kCellValue, vbTextCompare) Then
        Cells(2, 6).Select
        Selection.Delete Shift:=xlUp
        fCellValue = Cells(2, 6).Value
        shouldCheckAgain = True
    End If
Wend
End Sub 
```

只需将此代码粘贴到包含相关列的工作表的 VB 编辑器中。例如，如果`Sheet1`有列，则打开 Visual Basic 编辑器，双击`Sheet1`，然后将代码粘贴到那里。

`Macros`粘贴代码后，您可以通过选择按钮将其作为常规宏运行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T10:10:47.490

您应该在**没有**循环的情况下执行此操作，或者使用

1.  插入使用 an`=OR(F2=K2,F2=A2)`返回`True`或`False`结果的工作列，然后使用`AutoFilter`手动或使用[vba](/questions/tagged/vba "显示标记为“vba”的问题")删除 False 结果
2.  变得时髦并直接在下面的变体数组中执行（1），然后将变体数组转储回原始范围内

**代码**

```
Sub GetEm()
X = Filter(Application.Transpose(Application.Evaluate("=IF(--(F2:F2043=A2:A2043)+--(F2:F2043=K2:K2043),F2:F2043,""x"")")), "x", False)
Range("F2:F2043").Value = vbNullString
[f2].Resize(UBound(X), 1).Value = Application.Transpose(X)
End Sub 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T16:07:57.923

工作表的`Worksheet_Change`子部分应该在这里工作。每当该工作表中的单元格发生更改时，都会调用该 sub。

```
'This sub placed in one of the "Sheet1"/"Sheet2"/... objects in the list of
'Microsoft Excel Object in the VBA Editor will be called everytime you change
'a cell value in the corresponding sheet.
'"Target" is the effected cell.
Private Sub Worksheet_Change(ByVal Target As Range)
    'Check that Target is cell F2 (6th column, 2nd row)
    If Target.Row = 2 And Target.Column = 6 Then
        'If this is the cell we are looking for call the sub ValidateF2
        ValidateF2
    End If
End Sub 
```

和：

```
Sub ValidateF2()
    'Check that the value of F2 is not equal to A2 or K2
    If Not (Range("F2").Value = Range("A2").Value Or Range("K2").Value = Range("K2").Value) Then
        'Set the value of F2 to "" (empty)
        Range("F2").Value = ""
    End If
End Sub 
```

# google-apps-script - 使用谷歌应用脚 本查询谷歌电子表格

> ID：14815815
> 
> 赞同：0
> 
> 时间：2013-02-11T15:57:06.620
> 
> 标签：google-apps-script

我有一个包含联系信息的谷歌电子表格。目前我可以加载电子表格并有一个名称过滤器，但它会加载实际的电子表格。我正在寻找的是根据用户搜索的名称填充标签框（地址、城市、州等），看起来类似于名片而不是电子表格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:55:31.287

可能是这样的吗？

*   [在线应用](https://script.google.com/macros/s/AKfycbxquizfGo85vdeaN7_qss2-LY--UxSLFFeF5ML5rXPWZfrX9oNt/exec)
*   源电子表格密钥在脚本中的[代码（var key=...）只需在此密钥之前添加](https://script.google.com/d/1aL_y6ZqrfqrzhDZ4yzxM9Ax5hGi9KOHR0ltZ-7gVOTpQCDXV9zY3Ka_Y/edit)*[https://docs.google.com/spreadsheet/ccc?key=](https://docs.google.com/spreadsheet/ccc?key=)*即可获得 url - 请在更改前复制任何东西，这个 ss 与任何知道链接的人共享编辑权限。（在同一个 ss 中还有一个脚本版本，部分是英文的 ;-)
*   下面的屏幕截图

![在此处输入图像描述](../Images/95a40d694f6c0e28e2af6ebad8494bff.png)

所有这些都来自如下电子表格： ![在此处输入图像描述](../Images/730183af039c4a717e5fe3a16f4f9a41.png)

# java - 在多模块项目上构建一个“轻”jar

> ID：14815818
> 
> 赞同：1
> 
> 时间：2013-02-11T15:57:16.873
> 
> 标签：java, maven, maven-assembly-plugin

我有一个多模块项目，我使用程序集插件将其组装到一个胖罐中。到目前为止，Thank 工作正常，但现在我想构建另一个仅包含 uber-pom 依赖项的特殊包的 jar。

一个例子：

我在子项目上有 3 个部门，我想有一个 jar

*   com.mycompany.api.*,
*   com.mycompany.settings.*
*   com.mycompany.public.*

但不是

*   com.mycompany.internal.*

这些包通过 3 个部门分发。

有没有机会用程序集插件实现类似的东西？

谢谢，扬

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T16:00:11.323

[Shade](http://maven.apache.org/plugins/maven-shade-plugin/examples/includes-excludes.html)插件应该可以做类似的事情。

```
 <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-shade-plugin</artifactId>
        <version>2.0</version>
        <executions>
          <execution>
            <phase>package</phase>
            <goals>
              <goal>shade</goal>
            </goals>
            <configuration>
              <filters>
                <filter>
                  <artifact>*:*</artifact>
                  <includes>
                    <include>com/mycompany/api/*</include>
                    <include>com/mycompany/settings/*</include>
                    <include>com/mycompany/public/*</include>
                  </includes>
                </filter>
              </filters>
            </configuration>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build> 
```

# opencart - opencart - 多存储和重写库

> ID：14815820
> 
> 赞同：0
> 
> 时间：2013-02-11T15:57:26.697
> 
> 标签：opencart, mod-rewrite

我在我的根网络文件夹 public_html/ 中使用重写规则（seo）安装了我的信息网页。在子文件夹 public_html/shop/ 我已经安装了 Opencart 所以对购物车的访问是[http://www.mydomain.com/shop/](http://www.mydomain.com/shop/)。每个文件夹 public_html、public_html_shop/ 都有自己的 .htaccess 文件。

我想将 OC1551 用作重定向到此文件夹的多个域上的多存储，但也用作 www.mydomaincom/shop/ - 未重定向：www.mydomain1.com、www.mydomain2.com 以及 www.mydomain.com/shop /

*public_html/shop/.htaccess* 文件需要将 rewritebase 设置为 /shop/ 才能正常使用 info 网页，因为 www.mydomain.com/ 使用重写规则，但 www.mydoaminX.com 需要设置为 rewritebase / . 你能请有人帮我在这些文件夹中设置 rewritebase 以使其正常工作吗？像动态更改 public_html/shop/.htaccess 文件中的重写库之类的东西。

谢谢

**文件 public_html/.htaccess**

```
RewriteEngine On
    RewriteBase /
    RewriteCond %{HTTP_HOST} ^mydomain\.com$ [NC]
    RewriteRule ^.*$ http://www.mydomain.sk/$0 [NC,L,R=301]

    RewriteRule ^(.*)/(.*)-([1-9])/(.*)/$ /index.php?category=$1&page=$2&gallery_page=$3&photo=$4 [L,QSA]
    RewriteRule ^(.*)/(.*)/(.*)/$ /index.php?category=$1&page=$2&photo=$3 [L,QSA]
    RewriteRule ^(.*)/(.*)-([1-9])/$ /index.php?category=$1&page=$2&gallery_page=$3 [L,QSA]
    RewriteRule ^(.*)/(.*)/$ /index.php?category=$1&page=$2 [L,QSA]
    RewriteRule ^(.*)/$ /index.php?category=$1 [L,QSA]
    Rewriterule ^subscribe.php(.*)$ /index.php?category=overenie&addr=$1 [L,QSA]
    Rewriterule ^sitemap.xml$ /webmap.php?engine=google [L,QSA]
    Rewriterule ^urllist.txt$ /webmap.php?engine=yahoo [L,QSA] 
```

**文件 public_html/shop/.htaccess**

```
RewriteEngine On
RewriteBase /shop/
RewriteCond %{HTTP_HOST} ^maydomain1\.com$ [NC]
RewriteRule ^.*$ http://www.mydomain1.com/$0 [NC,L,R=301]
RewriteCond %{HTTP_HOST} ^mydomain2\.com$ [NC]
RewriteRule ^.*$ http://www.mydomain2.com/$0 [NC,L,R=301]

RewriteRule ^sitemap.xml$ index.php?route=feed/google_sitemap [L]
RewriteRule ^googlebase.xml$ index.php?route=feed/google_base [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !.*\.(ico|gif|jpg|jpeg|png|js|css)
RewriteRule ^([^?]*) index.php?_route_=$1 [L,QSA] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:18:53.367

实际上，我在大多数服务器上发现，您可以完全删除 RewriteBase，它足够聪明，可以弄清楚它是什么。我建议尝试一下，看看它是否有效

# asp.net-mvc - ASP.NET MVC 使用 Razor 语法禁用单选按钮

> ID：14815821
> 
> 赞同：15
> 
> 时间：2013-02-11T15:57:29.143
> 
> 标签：asp.net-mvc, razor

在 ASP.NET MVC 应用程序中，我有两个单选按钮。根据模型中的布尔值，如何启用或禁用单选按钮？（单选按钮的值也是模型的一部分）

我的单选按钮目前看起来像这样 -

```
 @Html.RadioButtonFor(m => m.WantIt, "false")  
            @Html.RadioButtonFor(m => m.WantIt, "true") 
```

在模型中，我有一个名为`model.Alive`. 如果`model.Alive`是`true`我想**启用**单选按钮，否则如果`model.Alive`是`false`，我想**禁用**单选按钮。谢谢！

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-02-11T16:16:38.257

您可以像这样直接将值作为 htmlAttributes 传递：

```
@Html.RadioButtonFor(m => m.WantIt, "false", new {disabled = "disabled"})  
@Html.RadioButtonFor(m => m.WantIt, "true", new {disabled = "disabled"}) 
```

如果您需要检查 model.Alive 那么您可以执行以下操作：

```
@{
   var htmlAttributes = new Dictionary<string, object>();
   if (Model.Alive)
   {
      htmlAttributes.Add("disabled", "disabled");
   }
}

Test 1 @Html.RadioButton("Name", "value", false, htmlAttributes)
Test 2 @Html.RadioButton("Name", "value2", false, htmlAttributes) 
```

希望有帮助

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-05-03T12:56:13.767

我的答案与艾哈迈德的相同。唯一的问题是，WantIt 属性不会在提交时发送，因为由于禁用了 html 属性，它会被忽略。解决方案是在 RadioButtonFors 上方添加一个 HiddenFor，如下所示：

```
@Html.HiddenFor(m => m.WantIt)
@Html.RadioButtonFor(m => m.WantIt, "false", new {disabled = "disabled"})  
@Html.RadioButtonFor(m => m.WantIt, "true", new {disabled = "disabled"}) 
```

这样所有的值都被渲染了，你在提交时得到了布尔值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-30T16:28:54.963

或者为 RadioButtonFor 提供重载？

```
public static MvcHtmlString RadioButtonFor<TModel, TProperty>(this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TProperty>> expression, object value, bool isDisabled, object htmlAttributes)
    {
        var linkAttributes = System.Web.Mvc.HtmlHelper.AnonymousObjectToHtmlAttributes(htmlAttributes);
        Dictionary<string, object> htmlAttributesDictionary = new Dictionary<string, object>();
        foreach (var a in linkAttributes)
        {
            if (a.Key.ToLower() != "disabled")
            {
                htmlAttributesDictionary.Add(a.Key, a.Value);
            }

        }

        if (isDisabled)
        {
            htmlAttributesDictionary.Add("disabled", "disabled");
        }

        return InputExtensions.RadioButtonFor<TModel, TProperty>(htmlHelper, expression, value, htmlAttributesDictionary);
    } 
```

# c++ - C++ 类型限定符和相等

> ID：14815823
> 
> 赞同：0
> 
> 时间：2013-02-11T15:57:36.213
> 
> 标签：c++

`int&`和`int`是同一类型吗？如果我使用`is_same<int,int&>::value`我得到`false`但`typeid(int).name() == typeid(int&).name()`相同吗？

其次，同样的问题`int`和`const int`？

第三`int`和`int*`？

我可以理解是否`int`和`int*`不是因为一个实际上存储了另一个对象的地址并且工作方式不同，但我会认为`int&`并且`int`作为一个只是另一个的别名。

渴望得到一些好的评论。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T16:07:13.113

来自 C++11 标准的第 5.2.7/4 段：

> 当 typeid 应用于 type-id 时，结果引用表示 type-id 类型的 std::type_info 对象。**如果 type-id 的类型是对可能有 cv 限定的类型的引用，则 typeid 表达式的结果是指一个 std::type_info 对象，该对象表示 cv 无限定的引用类型**。如果 type-id 的类型是类类型或对类类型的引用，则该类应是完全定义的。

因此，`typeid(int)`和`typeid(int&)`将给出相同的结果，尽管这两种类型肯定是不同的。同样，对于类型系统`int`和`int const`是不同的类型，但`typeid`操作符忽略了`const`限定。来自 C++11 标准的第 5.2.7/5 段：

> 泛左值表达式的顶级 cv 限定符或作为 typeid 操作数的 type-id 始终被忽略。

最后，`int`and`int*`又是类型系统的不同类型，`typeid`运算符为它们返回不同的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T16:01:31.807

类型限定符 (`const`和`volatile`) 创建不同的类型。 `int`是与 不同的类型`const int`。

引用、指针和数组也是如此。例如：

`int`, `int&`,`int[10]`和`int*`都是不同的类型。

`T``std::remove_reference<T>::type`与if`T`是一个引用不同的类型。

的`<typeinfo>`输出`typeid(int).name()`取决于平台，不必区分引用/非引用类型。但是，*正如*您通过.`T``T&``type_traits`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T16:07:25.400

[`std::type_info::name`](http://en.cppreference.com/w/cpp/types/type_info/name)没有提到身份。*如果*您坚持使用`typeid`来测试身份，请尝试以下操作：

```
assert(typeid(T) != typeid(U)); 
```

这是在对象上使用定义的[相等比较运算符。](http://en.cppreference.com/w/cpp/types/type_info/operator_cmp)`type_info`但要做好失望的准备：上述断言将因 §5.2.7/4 而`T = int`失败（参见 Andy 的分析器）。`U = int&`

# java - Spring：如何手动注入不受实际应用程序管理的bean？

> ID：14815828
> 
> 赞同：0
> 
> 时间：2013-02-11T15:58:06.360
> 
> 标签：java, spring

这里的上下文：

*   我们有一个 java 库，它是一个工厂代码。
*   这个库直接部署在Tomcat上
*   应用程序“A”、“B”和“C”使用这个库（jar）编译，它是Tomcat上部署的版本，应用程序调用它时使用。

在库中，我们有这些包： - old.service - old.service.impl - new.service - new.service.impl

旧服务是一些带有 setter 的经典类。它是在应用程序“A”的 XML 配置中声明的 spring bean。

在新服务中，我们有一个带有一些 @Autowired 属性的注释类 (@Service)，以便由在 XML 配置中具有自动扫描的应用程序“B”和“C”管理。

我们想更改旧服务的实现，以便在不更改应用程序“A”中的任何内容的情况下使用新服务。为此，我们可以从旧的类中调用新类。但是pb是春天……

我们如何实例化新类和@autowired 属性？我们可以手动实例化旧类中的新类，并通过反射实例化属性吗？

谢谢你。

ps：java库中没有xml配置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T18:56:47.963

两种方式：

1.  在您实例化 old.service.impl 的应用程序 A 中，Spring bean 将 new.service.impl 的引用注入其中

    <bean class="old.service.impl"> <property name="newService" ref="newServiceBean"/> </bean> <bean class="new.service.impl" id="newServiceBean" />

显然，这意味着您必须修改 old.service.impl 以添加“newService”的设置器，然后在旧服务 impl 代码中使用它

1.  直接从 Web 应用程序上下文中获取“new.service.impl”引用：

    WebApplicationContextUtils.getWebApplicationContext(servletContext).getBean(newServiceImpl.class);

在这种情况下，您将需要获取 ServletContext。一种方法是从 HttpRequest 获取它

选项 1 是首选 - 那时您不依赖于在 servlet 中运行，并且只需要对代码进行很少的更改。

# c++ - 从二进制文件中检索数据，无意义的字符

> ID：14815837
> 
> 赞同：0
> 
> 时间：2013-02-11T15:58:28.790
> 
> 标签：c++, linked-list, binaryfiles

我正在尝试从二进制文件中检索一些数据以将它们放入链表中，这是我要写入文件的代码：

```
void Pila::memorizzafile()
{
     int contatore = 0; 
     puntarec temp = puntatesta;
     ofstream miofile;
     miofile.open("data.dat" , ios::binary | ios::out);
     if(!miofile) cerr << "errore";
     else
     {
                while(temp)
                {
                            temp->elem.writes(miofile);
                            contatore++;
                            temp = temp->next;
                }
                //I go back at the beginning of the file to write how many elements I have
                miofile.seekp(0, ios::beg);
                miofile.write((const char *)&contatore , sizeof(int));
                miofile.close();
     }
} 
```

该函数写道：

```
void Fiche::writes(ofstream &miofile)
{
     //Valore.
     miofile.write((const char *)&Valore,sizeof(int));
     //Materiale, I write the dimension of the string.
     int buff = strlen(Materiale);
     miofile.write((const char *)&buff,sizeof(int));
     //Writing the string
     miofile.write(Materiale,buff*sizeof(char));
     //Dimension of Forma
     buff = strlen(Forma);
     miofile.write((const char*)&buff,sizeof(int));
     //The string itself
     miofile.write(Forma,buff*sizeof(char));
     //Dimension of Colore.
     buff = strlen(Colore);
     miofile.write((const char*)&buff,sizeof(int));
     //The string
     miofile.write(Colore,buff*sizeof(char));
} 
```

现在对于阅读部分，我正在尝试创建一个应该能够直接从文件中读取的构造函数，这里是：

```
Pila::Pila(char * nomefile)
{
     puntatesta = 0;
     int contatore = 0;
     ifstream miofile;
     miofile.open(nomefile  , ios::binary | ios::in);
     if(!miofile) cerr << "errore";
     else
     {
         //I read how many records are stored in the file
         miofile.read((char*)&contatore,sizeof(int));
         Fish temp;
         for(int i = 0; i < contatore; i++)
         {
                 temp.reads(miofile);
                 push(temp);
         }            
         miofile.close();
     }
} 
```

和阅读功能：

```
void Fiche::reads(ifstream &miofile)
{
     //I read the Valore
     miofile.read((char*)&Valore,sizeof(int));
     //I create a temporary char *

     char * buffer;
     int dim = 0;
     //I read how long will be the string
     miofile.read((char*)&dim,sizeof(int));
     buffer = new char[dim];
     miofile.read(buffer,dim);
     //I use the set function I created to copy the buffer to the actual member char*
     setMateriale(buffer);
     delete [] buffer;
     //Now it pretty much repeats itself for the other stuff
     miofile.read((char*)&dim,sizeof(int));
     buffer = new char[dim];
     miofile.read(buffer,dim);
     setForma(buffer);
     delete [] buffer;
     //And again.
     miofile.read((char*)&dim,sizeof(int));
     buffer = new char[dim];
     miofile.read(buffer,dim);
     setColore(buffer);
     delete [] buffer;    
} 
```

该代码没有给我任何错误，但是在屏幕上我读取了随机字符，甚至与我在文件上写的内容相差甚远。任何人都可以帮助我，好吗？

编辑：

根据要求，这是输入和输出的示例：

```
Fiche A("boh" , 4 , "no" , "gaia");
Fiche B("Marasco" , 3 , "boh" , "nonnt");
Fiche C("Valori" , 6 , "asd" , "hey");
Fiche D("TipO" , 7 , "lol" , "nonloso");
Pila pila;
pila.push(A);
pila.push(B);
pila.push(C);
pila.push(D);
pila.stampa();
pila.memorizzafile(); 
```

和：

```
Pila pila("data.dat");
pila.stampa(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:10:01.810

这可能是你的错误：

```
 //I go back at the beginning of the file to write how many elements I have
            miofile.seekp(0, ios::beg);
            miofile.write((const char *)&contatore , sizeof(int));
            miofile.close(); 
```

通过寻找开始然后写作。您正在覆盖第一个对象的一部分。

我认为您最好的选择是遍历列表并首先计算元素。写这个然后继续写所有的元素。无论如何它可能会更快（但你可以确定时间）。

我认为您正在使用许多 C 结构来保存东西。

此外，除非您要保存大量信息，否则我建议不要使用二进制格式。文本格式（用于您的数据）可能会一样好，并且是人类可读的，因此您可以查看文件并查看问题所在。

# javascript - webkit / Chrome history.back(-1) onclick vs href

> ID：14815838
> 
> 赞同：18
> 
> 时间：2013-02-11T15:58:32.483
> 
> 标签：javascript, google-chrome, onclick, href

每个人都知道，但我会重复这个问题：

```
<a href="#" onClick="history.go(-1)">Back</a> 
```

不适用于基于 WebKit 的浏览器（Chrome、Safari、Mxthon 等）

另一种不起作用的方法（应该有效）是：

```
<a href="#" onclick="javascript:window.history.back(-1);">Back</a> 
```

你可以这样做 - 工作！（但那是在 url 提示中显示 JS）

```
<a href="javascript:window.history.back(-1);">Back</a> 
```

要在 onclick 事件中使用 JS，您可以这样做（有效，但请参阅下面的评论）：

```
<a onclick="javascript:window.history.back(-1);">Please try again</a> 
```

缺少 href 会使其工作，但不会显示为可点击链接，您可以应用 css 使其看起来像链接，应用蓝色、下划线和光标手，但谁想要呢？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-02-11T15:58:32.483

最终可行的解决方案，在 IE、FF、Safari、Chrome、Opera、Maxthon 中测试：

```
<a href="#" onclick="window.history.back();return false;">Back</a> 
```

return false 后不要忘记分号；

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-04T05:28:18.160

它甚至可以使用 history.go(-1) 也...

对于我测试过的 Chrome、IE、Mozilla，工作正常。使用以下代码：

```
<a href="#" onclick="history.go(-1);return false;" style="text-decoration:underline;">Back</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-26T13:54:40.740

这是唯一适用于所有当前浏览器的东西：

```
<script>
function goBack() {
    history.go(-1);
}
</script>
<a onclick="goBack()">Back</a> 
```

# android - 自定义 Android 应用商店？

> ID：14815840
> 
> 赞同：0
> 
> 时间：2013-02-11T15:58:38.100
> 
> 标签：android, installation, google-play

我有个问题。如何使 Android 应用程序安装与 Android 官方 App Store 中的作品安装类似？( [http://en.wikipedia.org/wiki/List_of_mobile_software_distribution_platforms](http://en.wikipedia.org/wiki/List_of_mobile_software_distribution_platforms) ) 我需要 Root 访问权限吗？或者它应该是一个特殊的 Android 版本，App Store 将作为 Google Play 运行？目前，我只能将应用程序安装为“未知来源”，我的应用程序会下载 apk 文件并调用系统安装窗口，用户在其中确认安装。这里的问题是要安装的文件可以被复制（即使只是片刻）。对于免费应用程序或具有服务器身份验证（log/pas）的应用程序可能没问题，但对于付费应用程序，这可能是个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:05:07.440

即使您安装了应用程序并删除了 APK，恢复已安装应用程序的 APK 仍然非常容易。真正保护您的应用的唯一方法是使用应用内许可检查或使用设备 ID 将应用锁定到特定设备。

此外，在无根设备上，您无法在 Google Play 商店之外安装应用程序，除非您启用从未知来源安装。为了绕过这个限制——并允许自动更新或静默安装——你需要root并安装一个修改过的包管理器。

# jquery - 当滑块中的 div 出现时发出警报

> ID：14815844
> 
> 赞同：0
> 
> 时间：2013-02-11T15:58:45.323
> 
> 标签：jquery

我有滑块和一些嵌套在此滑块中的 div。所有这些 div 都按顺序出现。我的一些 div 有标题。当这些 div 出来时，我想得到一个警报。我无法编造逻辑！这是我的代码：

```
//resize ul to float left li elements
var outerWith = $(".slider_panel").outerWidth();
var len=  $(".slider_panel").length * outerWith;
$(".slider_content ul").css({width: len});

//left arrow --- slider moves left
$(".left_arrow").click(function() {
    $(".slider_content").animate({scrollLeft:'-=' + outerWith},500);
});
//right arrow -- slider moves right
$(".right_arrow").click(function() {
    $(".slider_content").animate({scrollLeft:'+=' + outerWith},500);
});

// add li elements to slider context as much as slider panel which has title attribute. 
$(".slider_panel[title]").each(function(index) {
    var content = $(this).attr('title');
    $(".slider_contex ul").append('<li>'+content+'</li>');
});

//click slider li elements and go equivelent slider page
$(".slider_contex ul li").click(function() {
    $(this).addClass("current").siblings().removeClass("current");
    var thisText            =           $(this).text(); //console.log(thisText);
    var minus               =           outerWith / 2; 
    //console.log("minus= " + minus);
    var panelAttr       =           $(".slider_panel[title="+thisText+"]");
    var panelTitle      =           panelAttr.position().left - minus; //console.log(panelTitle);

    $(".slider_content").animate({scrollLeft: '+=' + panelTitle},500);

}); 
```

问题是当我的带有标题属性的 div 出现时我想得到警报。我还创建了一个如下所示的函数，但它不起作用：

```
 function detect_position() 
{
    var sliderContentOffset = $(".slider_content").position().left; console.log("sliderContentOffset = " + sliderContentOffset);
    var optOffset = $(".slider_panel[title='uc']").position().left; console.log("optOffset = " + optOffset);
    var width=$(".slider_panel[title='uc']").width(); console.log("width = " + width);
    var sum = optOffset + width; console.log("sum = " + sum);
    if(sliderContentOffset >=optOffset && sliderContentOffset<= optOffset + width )
    console.log("dropped");
} 
```

# python - 使用关键字 python 匹配 html 文件的内容

> ID：14815856
> 
> 赞同：0
> 
> 时间：2013-02-11T15:59:14.273
> 
> 标签：python, html, compare, match

我正在做一个下载管理器。我想让下载管理器在下载文件后检查 url 的 md5 哈希。哈希值在页面上找到。它需要计算文件的 md5（已完成），在 html 页面上搜索匹配项，然后比较 html 页面的全部内容以找到匹配项。

我的问题是如何让 python 返回 html 的全部内容并找到我的“md5 字符串”的匹配项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T16:13:33.177

[Requests](http://docs.python-requests.org/en/latest/ "要求") lib 是您想要使用的。将为您省去很多麻烦

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T16:05:14.580

`import urllib`并`urllib.urlopen`用于获取 html 的内容。`import re`使用正则表达式搜索哈希码。您也可以`find`在字符串上使用方法而不是正则表达式。

如果您遇到问题，那么您可以提出更具体的问题。你的问题太笼统了。

# qt - qwtplot - 添加数据

> ID：14815859
> 
> 赞同：0
> 
> 时间：2013-02-11T15:59:20.953
> 
> 标签：qt, qwt

```
QVector<double> x(101), y(101);
for (int i=0; i<101; ++i)
{
     x[i] = i/50.0 - 1;
     y[i] = x[i]*x[i];
}

QwtPlotCurve *curve;
curve->setData(x,y);
curve->attach(plot_all[0]); 
```

假设`plot_all[0]`是我的 QwtPlot，这里有什么问题？它使我在 linux 中制作的程序崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:04:17.793

您没有分配`*curve`，因此它不指向有效对象。尝试替换`QwtPlotCurve *curve`为

```
QwtPlotCurve *curve = new QwtPlotCurve(); 
```

# silverlight - 部分模板化的 ListBox.ItemTemplate

> ID：14815862
> 
> 赞同：1
> 
> 时间：2013-02-11T15:59:30.253
> 
> 标签：silverlight, silverlight-5.0

我正在创建一个自定义控件，并且正在尝试为列表框项创建部分指定的模板。模板有一些预定义的部分，并且应该有另一个部分可以在使用控件时进行模板化。

为此，我创建了一个名为 SuggestionItemTemplate 的依赖属性，如下所示：

```
public static readonly DependencyProperty SuggestionItemTemplateProperty =
    DependencyProperty.Register("SuggestionItemTemplate", 
        typeof(DataTemplate), 
        typeof(AutoSuggestTextBox), 
        new PropertyMetadata(null)); 
```

在我的自定义控件的 generic.xaml 中，我有：

```
<Style TargetType="local:AutoSuggestTextBox">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="local:AutoSuggestTextBox">
                <Grid>
                    <ListBox x:Name="ItemsControl">
                        <ListBox.ItemsPanel>
                            <ItemsPanelTemplate>
                                <StackPanel />
                            </ItemsPanelTemplate>
                        </ListBox.ItemsPanel>
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>
                                    <ContentPresenter Grid.Column="0" 
                                                      ContentTemplate="{TemplateBinding SuggestionItemTemplate}" 
                                                      Content="{Binding}" />
                                    <ToggleButton Grid.Column="1" 
                                                  x:Name="DetailsHover" 
                                                  ClickMode="Hover" 
                                                  Style="{StaticResource DetailsToggleButtonStyle}" />
                                </Grid>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

不幸的是，这不起作用，因为无法从嵌套到 DataTemplate 的 ContentPresenter 内部使用 TemplateBinding。（成员“SuggestionItemTemplate”无法识别或无法访问。）

我还尝试使用祖先绑定（在 Silverlight 5 中可用），例如：

```
<ContentPresenter Grid.Column="0" 
                  ContentTemplate="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=local:AutoSuggestTextBox}, Path=SuggestionItemTemplate}" 
                  Content="{Binding}" /> 
```

但这会导致绑定错误：

```
Error: System.Exception: BindingExpression_CannotFindAncestor 
```

我想这是因为我在自定义控件的 ControlTemplate 中，并且“local:AutoSuggestTextBox”没有在样式中的任何地方定义。

我尝试的第三个选项是在 OnApplyTemplate 覆盖中应用 ContentTemplate 但这也不起作用：

```
var cp = itemsControlElement.ItemTemplate.LoadContent() as ContentPresenter;
cp.ContentTemplate = SuggestionItemTemplate; 
```

在所有情况下，我的网格都有两列，切换按钮可见，但内容演示者简单地打印出视图模型的类型名称。（如果 ContentTemplate 为空，我相信这是默认行为）。

这甚至可能吗？有没有其他方法可以指定部分模板，然后只在必要时添加自定义模板部分？

作为目前的解决方法，我可以指定

```
ItemTemplate="{TemplateBinding SuggestionItemTemplate}" 
```

对于列表框，然后在我使用此控件的任何地方复制/粘贴通用模板。但这是我希望首先避免的行为。

谢谢！

编辑：我对所有代码块都使用了代码标签，但由于某种原因它们没有突出显示。：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:05:14.833

可以在 OnApplyTemplate 方法中遍历 Visual Ancestors，找到您的 ContentPresenter(s) 并在其上设置 ItemTemplate。在我看来，这对于单个项目来说很好，但在 ItemsControl 场景中则不然。

使用自己的自定义控件后，您可以实现自己的目标。只需给它一个 Object 类型的 Content 依赖属性和一个 DataTemplate 类型的 Template DP（如果你愿意，可以为两者的倍数），你可以为你的 Control 设置默认样式的根视觉样式和模板。

在这种特定情况下，我建议最好的方法是将您的 ToggleButton 放在 ListBoxItem 模板中，而不是通过自定义 ListBox.ItemContainerStyle。使用 Expression Blend 很容易修改默认的 Control Template，并且 ToggleButton 的 DataContext 不会改变，因此对您自己的逻辑的更改应该是最小的。

***编辑：***如果您打算使用许多不同的数据模板，也许[隐式数据模板](http://msdn.microsoft.com/en-us/library/system.windows.datatemplate.datatype%28v=vs.95%29.aspx)会更合适。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T14:47:50.980

我设法使用不同的方法解决了这个问题。我使用了祖先绑定，但我没有尝试从 访问根控件（my `AutoSuggestTextBox`）`DataTemplate`，而是要求引用 my `ListBox`（这里命名为`ItemsControl`）。

但是，由于`ListBox`没有该`SuggestionItemTemplate`属性，因此我将其归类为我自己`CustomListBox`实现该属性的地方。这一切都归结为这个代码片段：

```
<Style TargetType="local:AutoSuggestTextBox">
  <Setter Property="Template">
    <Setter.Value>
      <ControlTemplate TargetType="local:AutoSuggestTextBox">
        <Grid>
          <local:CustomizableListBox x:Name="ItemsControl"
                                     SuggestionItemTemplate="{TemplateBinding SuggestionItemTemplate}">
            <local:CustomizableListBox.ItemTemplate>
              <DataTemplate>
                <Grid>
                  <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                  </Grid.ColumnDefinitions>
                  <ContentPresenter Grid.Column="0" 
                                    ContentTemplate="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=local:CustomizableListBox}, Path=SuggestionItemTemplate}"
                                    Content="{Binding}" />
                  <ToggleButton Grid.Column="1" 
                                x:Name="DetailsHover" 
                                ClickMode="Hover" 
                                Style="{StaticResource DetailsToggleButtonStyle}" />
                 </Grid>
              </DataTemplate>
            </local:CustomizableListBox.ItemTemplate>
          </local:CustomizableListBox>
        </Grid>
      </ControlTemplate>
    </Setter.Value>
  </Setter>
</Style> 
```

# google-analytics - 如何从 Google Core Reporting API 访问自定义指标和自定义维度

> ID：14815863
> 
> 赞同：0
> 
> 时间：2013-02-11T15:59:31.537
> 
> 标签：google-analytics

我已经定义了一些自定义指标和自定义维度。我可以在我的自定义报告中查看和使用它们，或者在我的标准报告中作为二级维度。

我无法从 Core Reporting API 访问它们。我希望能够以类似于自定义变量的方式提取它们。

到目前为止，我无法做到这一点，也无法找到除此参考之外的任何文档

[https://developers.google.com/analytics/devguides/platform/features/customdimsmets#reporting](https://developers.google.com/analytics/devguides/platform/features/customdimsmets#reporting)

```
After the collection, configuration, and other processing stages of 
the pipeline are complete, custom dimensions and metrics become available
via the web reporting interface or th Core Reporting API. 
```

对我来说，这看起来应该是可能的。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T16:57:53.213

看看这个：[https ://developers.google.com/resources/api-libraries/documentation/analytics/v3/java/latest/](https://developers.google.com/resources/api-libraries/documentation/analytics/v3/java/latest/)

检查方法：Analytics.Data.Ga.get(String ids, String startDate, String endDate, ***String metrics*** ) 参数：

......

**指标**- 以逗号分隔的 Analytics 指标列表。例如，'ga:visits,ga:pageviews'。必须至少指定一个指标。

我认为第四个参数是一种根据自定义变量、维度或指标检索过滤报告的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T05:50:23.603

截至 2013 年 5 月 1 日，根据[https://developers.google.com/analytics/devguides/reporting/core/dimsmets/customvars](https://developers.google.com/analytics/devguides/reporting/core/dimsmets/customvars)

Custom Var 不能与任何指标一起使用，这使得它们毫无用处......如果有人告诉我我错了，我会很高兴。

# asp.net - 为插入命令读取的标签值不是浏览器中显示的值

> ID：14815864
> 
> 赞同：1
> 
> 时间：2013-02-11T15:59:35.657
> 
> 标签：asp.net, gridview, label

下午好。

我有一个简单的gridview，其中包含这样的字段：

```
<asp:TemplateField HeaderText="USD Full Load Machine">
 <ItemTemplate>
  <asp:Label ID="lblUSDFullLoad" runat="server"  Text='<%# Bind("USDFullyLoadMachine") %>' />
 </ItemTemplate>
</asp:TemplateField> 
```

InsertCommand 和 Insertparameters 设置如下：

```
<asp:SqlDataSource (code omitted)
 InsertCommand="Insert Into [xxxxTable] 
 ([SubmissionID],USDFullyLoadMachine]) Values(@newSubID,@usdflm)">
 <InsertParameters>
  <asp:ControlParameter Name="newSubID" ControlID="lblNewSubmissionID" />
  <asp:ControlParameter Name="usdflm" ControlID="gridConversionTotals$ctl02$lblUSDFullLoad" />                            
 </InsertParameters>
</asp:SqlDataSource> 
```

当我使用客户端javascript更改gridConversionTotals$ctl02$lblUSDFullLoad标签的文本，并在后面的代码中对sql数据源控件执行插入方法时，发送到SQL的值不是标签的新值，即不是浏览器上显示的值，它是标签上次数据绑定时的值。

我最初认为这是因为服务器在执行插入命令时不可能知道客户端显示的内容，但事实并非如此，因为如果我将标签更改为文本框并保留所有代码不变，发送到数据库的值确实是客户端上显示的值。

有人可以解释一下为什么在这种情况下插入方法会以不同的方式处理标签和文本框的客户端内容吗？

这是否意味着通常当我想在客户端更改值然后将它们发送到数据库时，我需要始终使用文本框？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:21:01.433

经过进一步研究，我发现这篇文章[https://stackoverflow.com/a/10324721/1266732](https://stackoverflow.com/a/10324721/1266732)，它解释了标签不会将值发布回网络服务器，因此建议使用文本框并将它们设置为标签以此目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T16:19:11.363

在技​​术层面，表单值是使用`<input />`元素或 cookie 发送的。如果您的 javascript 没有编辑`<input />`元素或 cookie（或以某种方式修改 GET URL），那么您的值将不会发送到服务器。

# sql-server - TSQL while 循环

> ID：14815865
> 
> 赞同：2
> 
> 时间：2013-02-11T15:59:37.853
> 
> 标签：sql-server, tsql, loops, sql-update, sum

```
UPDATE Houses 
SET    lStatus = U.codesum
FROM   Houses H
JOIN   (SELECT ref, SUM(code) AS codesum
    FROM   Users
    GROUP  BY ref) AS U ON U.ref = H.ref 
```

上面的代码获取每个房子的所有用户（Houses 表）。对所有用户的代码列（用户表）求和。最后更新房屋表的 lstatus 列中的结果。

我的问题是：我需要重写不是对代码列求和的查询。相反，我想创建案例陈述。例如：

```
tempvar = 0    //local variable might be required

For each user {

If code == 1 then tempvar += 5

else if code == 2 then tempvar += 10

etc

tempvar = 0;
} 
```

一旦我们遍历了每个房子的所有用户，我们现在可以设置 lStatus = tempvar。然后应该将下一个房子的 tempvar 重置为 0。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T16:04:06.657

在编写 SQL 代码时，您应该尽量避免循环和其他过程结构。关系数据库不能轻易地优化这些东西，而且它们的执行速度通常比它们的声明性对应物慢几个数量级。`SUM(code)`在这种情况下，用您描述的`CASE`语句替换您似乎很简单：

```
UPDATE Houses 
SET    lStatus = U.codesum
FROM   Houses H
JOIN   (SELECT ref, SUM(CASE code WHEN 1 THEN 5 WHEN 2 THEN 10 ELSE 0 END) AS codesum
    FROM   Users
    GROUP  BY ref) AS U ON U.ref = H.ref 
```

这样，`SUM`仍然可以处理您想象的临时变量将要执行的任务。

此外，如果您有很多案例，您可能会考虑将这些案例放在一个表格中，然后简单地加入该表格以获得您的总和。这可能会更好地维护。我在这里使用了一个表变量，但它可能如下所示：

```
DECLARE @codes TABLE (
    code INT NOT NULL PRIMARY KEY,
    value INT NOT NULL
)
INSERT INTO @codes SELECT 1, 5
INSERT INTO @codes SELECT 2, 10

UPDATE Houses 
SET    lStatus = U.codesum
FROM   Houses H
JOIN   (SELECT a.ref, SUM(b.value) AS codesum
    FROM   Users a
    JOIN   @codes b on a.code = b.code -- Here we get the values dynamically
    GROUP  BY a.ref) AS U ON U.ref = H.ref 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T16:04:40.710

试试这个：

```
UPDATE Houses 
SET    lStatus = U.codesum
FROM   Houses H
JOIN   (
             SELECT ref, SUM(
                                CASE
                                    WHEN Code = 1
                                    THEN 5
                                    WHEN Code = 2
                                    THEN 10
                                END
                            ) AS codesum
             FROM   Users
             GROUP  BY ref
       ) AS U ON U.ref = H.ref 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T05:00:44.613

试试这个 ：

```
UPDATE Houses 
SET    lStatus = U.code
FROM   Houses H
JOIN   (
             SELECT ref, SUM(
                                CASE
                                    WHEN Code = 1
                                    THEN 5
                                    WHEN Code = 2
                                    THEN 10
                                    ELSE 0
                                END
                            ) AS code
             FROM   Users
             GROUP  BY ref
       ) AS U ON U.ref = H.ref 
```

# java - Java 通用命令

> ID：14815867
> 
> 赞同：2
> 
> 时间：2013-02-11T15:59:54.047
> 
> 标签：java, shutdown, universal

我正在编写一个应用程序，我希望能够使用计算机完成某些任务。

作为一个例子，我可以使用：

```
runCommand("shutdown.exe", "-s -t 01"); 
```

关闭，但仅当程序在 Windows XP 或更高版本上执行时才有效。

有没有办法让 Java 执行一些通用的任务，并且可以在每个安装了 Java 的操作系统上运行？就像关机命令一样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T16:01:17.680

简短的回答：不。示例中的命令绝对特定于主机操作系统，并且不能跨平台移植。您会发现相关操作系统之间存在*一定*程度的兼容性，例如在兼容 POSIX 的 Unix 操作系统中

# umbraco - 在 Umbraco 的域中设置多斜线

> ID：14815868
> 
> 赞同：0
> 
> 时间：2013-02-11T15:59:59.690
> 
> 标签：umbraco

我想为站点根节点设置带有多斜杠的域，但 Umbraco 不允许这样做。例如

a.com/en/uk（仅示例）。通过管理主机名菜单

原因是我有多语言和多域站点，每个站点都是一个根节点。每个域都有特定的区域站点。4.11 版

任何想法？

**更新**

它只允许在域中使用一个斜杠。为什么它不允许超过一个斜线？我已经直接在域表上更改了它，它似乎工作。有没有这方面的影响。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:43:11.323

没错，Umbraco 中的域设置是专门针对根域的。

但是，如果您考虑 Umbraco 如何让您组织您的内容结构，您可以创建一个带有根域的主页（例如 yoursite.com），然后为 en/ 创建一个页面，在该页面下为 uk/ 创建一个页面，在其他情况下词英国主页。

然后，您可以使用一些服务器端逻辑来捕获对根页面的所有请求，并将它们 301 重定向到英国主页。

# c++ - 使用策略/模板的通用对象

> ID：14815869
> 
> 赞同：0
> 
> 时间：2013-02-11T15:59:59.397
> 
> 标签：c++

我一遍又一遍地需要对象行为，包括所有权、类似管道的交互、状态机行为等。我认为这是一个很好的机会，可以在一本关于 C++ 的非常著名的书中尝试一种称为“策略”的新设计模式。

现在我很难创建一个类

```
template <
  class T,
  template <typename T> class pOwnership
  template <typename T> class pInteraction
>
class object : public pOwnership<T>, public pInteraction<T>
{...} 
```

这应该采取两个政策来处理所有权和互动。例如， pOwnership 有一个方法

```
void add(T &obj) 
```

它将一个对象添加到内部列表

```
std::vector<T*>. 
```

（使用另一个所有权策略，例如当我不需要所有权时，也可能未声明*void add(T &obj)*，如果使用错误的应用程序代码会导致编译时错误）

**现在类型 T 应该是最终的策略宿主类**，即*对象*类：

```
typedef template<object, pOwnershipRecursive, pInteractionPipeline> myObject; 
```

当然*object*本身就是一个模板类型，导致编译器错误。

如何实现像 myObject 这样的类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:45:23.413

您应该使用 CRTP：

```
class myObject : public object<myObject, 
                 pOwnershipRecursive, 
                 pInteractionPipeline>
{
   // your real content here: 
   // an object that consists solely of policies is probably useless
}; 
```

# concurrency - 使用 PayPal 在线订票：防止多个访客购买同一张票

> ID：14815874
> 
> 赞同：8
> 
> 时间：2013-02-11T16:00:12.853
> 
> 标签：concurrency, paypal, conditional-statements, payment, race-condition

我正在为活动（如音乐会）开发一个在线票务系统。一个基本部分是座位表，其中将向游客展示可供选择的可用座位/门票。一旦他们做出选择，系统会立即尝试保留 10 分钟的门票（通过将门票 ID 输入到门票 ID 为关键的表格中）。仅当预订成功时，才会显示一个贝宝按钮以进行付款。

这一切都很好。订票对我来说不是问题。我可以在我的系统中处理它。但是一旦贝宝进入游戏，事情就变得困难了。

问题：如果用户由于某种原因在 Paypal 上花费了很多时间（超过 10 分钟），我网站上的门票预订将过期，允许其他访客购买门票，这可能发生在访客 1 完成之前支付。访客 1 没有看到任何这些，因为他仍在贝宝中...在某个时间点，他将设法付款（例如 15 分钟后），这将完全有效，因为贝宝不知道任何有关过期预订的信息.

最后，我可能有两个游客支付了同一张票/座位！

我怎样才能防止这种情况发生？如果涉及两个系统并且其中一个不受您的控制，您如何处理竞争条件？

我的想法是：实际上应该在付款之前进行检查，但是我当然无法控制贝宝中发生的事情！

我知道我可以使用 Paypal 的 IPN 等，但这只会在付款后发生，为时已晚。

或者，如果贝宝通过 API 要求我确认付款，那就太好了。然后我可以说“不”，以防门票已经卖给了其他人。但我认为贝宝不可能做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T16:16:49.353

我建议使用 Express Checkout。Express Checkout 允许您控制付款发生的时间，因为您将触发对 PayPal 的 API 调用以实际处理付款。

您可以研究的另一种可能性是使用授权而不是销售交易。这样，如果其他买家上座，您可以取消授权，并且不会向买家收费。（但是，PayPal 可能会因授权无效而向您收费。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-11T16:13:10.430

Matt Cole 建议的一种解决方案是使用“授权”而不是“销售”。

您可以在创建 Paypal 付款时在调用 Paypal API 时将“intent”设置为“authorize”而不是“sale”（{intent: "authorize"}）。客户批准交易后，您可以通过捕获付款来授权此交易。

# php - javascript 表单生成与 ajax php 表单生成

> ID：14815875
> 
> 赞同：0
> 
> 时间：2013-02-11T16:00:22.520
> 
> 标签：php, javascript, html, forms

这更多是一个概念问题。情况就是这样，我们有一个对象列表，需要显示一个带有对象编辑/添加表单的模式。您有大约 10 个字段，更好的是，使用 javascipt 动态生成表单，进行 ajax 调用并使用服务器语言生成表单，然后将其作为 html 返回并显示，或者生成内联表单（当列表已创建）并显示它？我不是在问怎么做，我可以按照我描述的所有方式来做，问题是按照今天的标准，哪一个更清洁、更有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:11:02.910

第三个选项（生成服务器端）是最好的，原因有两个：

1.  关闭 JavaScript 的人仍然可以看到表单。（如果您使用 JS 显示它们，请确保使用 JS 隐藏它们。）
2.  屏幕阅读器将能够阅读表格。

JavaScript 是增强用户体验的好工具，但不要依赖它来工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T16:21:21.680

我会使用“即时”方法或第三种方法。第一个您可以减少 Serverload（这取决于您的用户群和数据），并且由于普通用户启用了 JS，这不是问题。第三个很好，因为它不需要启用 Javascript，因此即使是旧设备或移动设备也可以正确显示表单。第二个是恕我直言，这是最糟糕的，因为它需要 JavaScript 并使服务器承受更多负载。

当您没有经常需要此表单的大型用户群时，请使用更易于开发和维护的方法。

# asp.net - 使用使用它们的 Web 项目部署 MEF 组件

> ID：14815876
> 
> 赞同：3
> 
> 时间：2013-02-11T16:00:24.577
> 
> 标签：asp.net, msbuild, visual-studio-2012, mef, web-deployment

如果这已经被覆盖，我很抱歉，但我无法在任何地方找到答案。

我有一个使用 MEF 组件的 MVC4 Web 应用程序。这些组件存在于同一解决方案中的另一个项目中，如下所示：

*   我的解决方案
    1.  网络项目
    2.  定义MEF接口的Dll项目（全部引用）
    3.  包含实际 MEF 类的 Dll 项目
    4.  另一个包含实际 MEF 类的 Dll 项目

Web 项目引用包含 MEF 接口 (#2) 的项目，但不引用包含实际 MEF 类 (#3 & #4) 的项目，因为这是框架的重点。我在#3 和#4 上有一个构建后步骤，将它们编译的程序集复制到Web 项目的bin 文件夹中，并且Web 项目也被标记为依赖于#3 和#4 项目。

这在我的机器上运行得非常好，编译和改组 Dll，但是当我实际上必须*部署*这个东西时，我需要做两个步骤：像其他任何一样部署 web 项目，然后手动复制项目 #3 创建的程序集和＃4到服务器上。因为它们并没有*真正*被 Web 项目引用，所以它们不会被 Web Publishing 的东西所采用。

我查看了 Web Publish 项目设置，虽然我显然可以将其设置为复制项目文件夹中的所有小东西，但我不能将其设置为仅复制特定的辅助文件。除了在 Web 项目中添加对 #3 和 #4 程序集的硬引用之外，还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:36:20.457

您是否尝试过将 MEF 类程序集复制到您网站的[“_bin_deployableAssemblies”文件夹中。](http://haacked.com/archive/2011/05/25/bin-deploying-asp-net-mvc-3.aspx)对我来说效果很好

# ruby-on-rails-3 - 如何在 Rails 3 上使用“外部”类？

> ID：14815881
> 
> 赞同：0
> 
> 时间：2013-02-11T16:00:38.963
> 
> 标签：ruby-on-rails-3, include, require

所以，我有这个 ruby​​ 文件，我想在我的 rails 项目中使用它，但我不知道从哪里开始或如何开始，我已经阅读了 include 和 require，一些网站告诉我使用 require，一些使用包括，甚至使用两者，但仅此而已。我想知道在哪里放置必要的代码，如何使用文件的方法以及将文件放在项目目录中的哪里，因为我想从视图中调用它但我不知道这是否是最好的，如果这是一个愚蠢的问题，我很抱歉，但 rails 对我来说仍然是新的。感谢您提供的所有帮助。谢谢你的时间。

我正在尝试使用的文件是将数字转换为由 Faustino Vasquez limon 创建的单词的文件，它是一个完整的类：

**numeros.rb**

```
class Numlet

  def initialize(numero)

    @numero = numero.to_s.reverse.split("")
    @i = 0
    @j = 0
    @parte1 = []
    @parte2 = []
    @especial = ""
    @numlet = []
    @bandera=0
    @bandera1=0
    @a =[["Uno","Dos","Tres","Cuatro","Cinco","Seis","Siete","Ocho","Nueve"],
      ["Diez","Veinte","Treinta","Cuarenta","Cincuenta","Sesenta","Setenta","Ochenta","Noventa"],       
      ["Ciento","Doscientos","Trescientos","Cuatrocientos","Quinientos","Seiscientos","Setecientos","Ochocientos","Novecientos"]]

  end

  def especial 

    @numlet[@j]  = case @especial
    when "11"then  "Once"
    when "12"then  "Doce"
    when "13"then  "Trece"
    when "14"then  "Catorce"
    when "15"then  "Quice"
    when "16"then  "Dieciseis"
    when "17"then  "Diecisiete"
    when "18"then  "Dieciocho"
    when "19"then  "Diecinueve"
    when "21"then  "Veintiun"
    when "22"then  "Veintidos"
    when "23"then  "Veintitres"
    when "24"then  "Veinticuatro"
    when "25"then  "Veinticinco"
    when "26"then  "Veintiseis"
    when "27"then  "Veintisite"
    when "28"then  "Veintiocho"
    when "29"then  "Veintinueve"
    else return 0
    end
  end

  def repetir

    case @numero.length
    when 0..3 then @parte1[0] = @numero[0..@numero.length]
    when 4..6 then @parte1[0] = @numero[0..2];@parte1[1] = @numero[3..@numero.length]
    when 7..9 then @parte1[0] = @numero[0..2];@parte1[1] = @numero[3..5]; @parte1[2] = @numero[6..@numero.length]
    else return 0
    end
  end

  def convierte

    @bandera1=0
    @i=0
    case @bandera
    when 1 then @numlet[@j]="mil";@j+=1
    when 2 then (@parte2.length==1 and @parte2[0]==1) ? @numlet[@j]="millon" : @numlet[@j]="millones";@j+=1
    end
    @especial = [@parte2[@i+1],@parte2[@i]].to_s
    if especial != 0
      @i+=2
      @j+=1
    else
      if @parte2[@i].to_s =="1"
        @numlet[@j]="Un"
        @i+=1
        @j+=1
      end
    end
    while @i < @parte2.length
      if @parte2[@i].to_i ==0
        @i+=1
        @bandera1+=1
      else
        if @parte2.length != 1 and @bandera1 ==0
          if @i == 1
            @numlet[@j]="y"
            @j+=1
          end
        end
        @numlet[@j] = @a[@i][@parte2[@i].to_i-1]
        if  @i == 2  and @bandera1==2 and @numlet[@j]=="Ciento"
          @numlet[@j]="Cien"
        end
        @j+=1
        @i+=1    
      end
    end
    @bandera+=1
  end

  def termina

    @numlet.reverse.join(" ")
  end

  def a_letra

    if  repetir != 0
      @parte1.each do |@parte2|
        convierte
      end
        print "#{termina}\n"
    else
      print "Este numero no puede ser convertido\n"
    end

   end

end 
```

这就是我想从我的应用程序中使用的。感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:29:03.687

因为它是您自己的类并且您想在 Rails 视图之一中使用它，所以有很多方法可以使用该代码。

我自己的方式，您可能会也可能不会选择这样做，即将该文件包含在`lib`目录中，然后`require`将其包含在您想要包含它的视图的帮助文件中。

这将允许您从该文件访问方法和初始化程序，并且您将能够在帮助程序中创建方法以在您的视图上使用。

# javascript - 循环遍历数组并检索值

> ID：14815883
> 
> 赞同：2
> 
> 时间：2013-02-11T16:00:45.987
> 
> 标签：javascript, jquery

我正在尝试遍历一个数组，然后遍历一个列表。

我遇到的问题是每个`<li>`整个数组都被附加，但我需要发生的是将数组的索引（0）添加到第一个 li，将索引（1）添加到第二个 li，依此类推。

代码：

```
// Create our test array.
var arrValues = [ "one", "two", "three" ];

// Loop over each value in the array.
$.each(arrValues,function( intIndex, objValue ){
    $("#list span").each(function() {
        $(this).append(objValue);
    });
}); 
```

电流输出：

```
<ul id="list">
        <li>Content 1 here<span>onetwothree</span></li>
        <li>Content 2 here<span>onetwothree</span></li>
        <li>Content 3 here<span>onetwothree</span></li>
    </ul> 
```

所需输出：

```
<ul id="list">
        <li>Content 1 here<span>one</span></li>
        <li>Content 2 here<span>two</span></li>
        <li>Content 3 here<span>three</span></li>
    </ul> 
```

感谢任何帮助:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T16:05:56.023

只需这样做：

```
var arrValues = [ "one", "two", "three" ];

$("#list span").each(function(index) {
    $(this).append(arrValues[index]);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T16:10:32.727

我认为这将是一种更简单的实现方式：

```
 $("#list span").each(function( intIndex, objValue ){
        $(this).append(arrValues[intIndex]);
    }); 
```

您当前遇到的问题是您正在遍历数组（ 3 次迭代），并且每次迭代都遍历整个`<span>`s 数，因此总共进行了 9 次迭代。

# c++ - Mat结构和memcpy的问题

> ID：14815884
> 
> 赞同：0
> 
> 时间：2013-02-11T16:00:48.703
> 
> 标签：c++, opencv

我正在尝试将`Mat`结构从 OpenCV 复制到另一个`Mat`使用`memcpy`（我在 Windows 中使用 OpenCV 2.4.3）

基本上代码是：

```
Mat NewFrame,OldFrame;
OldFrame=imread(image,CV_LOAD_IMAGE_COLOR);
memcpy(&NewFrame,&OldImage,sizeof(Mat)); 
```

问题是 NewFrame 和 OldFrame 不一样。这个 memcpy 之后的地址`NewFrame.step.buf`已经改变了（？？？）

在 memcpy 之前，`step`OldFrame 的字段地址是：

```
 OldFrame.step.p=0x0032f338
 OldFrame.step.buf=0x0032f338 
```

在 memcpy 之后，`step`来自 NewFrame 的字段地址为：

```
 NewFrame.step.p=0x0032f338
 NewFrame.step.buf=0x0032f2f8 // it should be 0x0032f338 
```

我不明白为什么地址已更改以及如何解决此问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T17:02:13.440

“有什么理由不使用 cv::Mat::clone？—— juanchopanza 48 分钟前”

请相信那个家伙，上帝会杀死小猫，如果你在 cv::Mat 上使用 memcpy 就是这样！

此外，它们被引用，因此它们可以自己处理被放入一个非常好的 std::vector 中，无需删除它们。realloc 是 C 的东西，这是 C++！

所以，你可以做一个“浅”的复制，Mat a,b; b=a; （现在 a 和 b 指向同一个内存，引用计数增加了。）或深拷贝，Mat a,b, b = a.clone(); （现在两者都有自己的像素副本）

使用普通的 memcpy 类似于浅拷贝，它只是不能正确处理引用计数，所以你的 memcpied Mat 的 src 和 dst 迟早都会有悬空指针。

# wso2esb - WSO2 自定义消息中介示例起点

> ID：14815889
> 
> 赞同：0
> 
> 时间：2013-02-11T16:00:55.380
> 
> 标签：wso2esb

我有一个流式 UDP 应用程序，它以旧格式生成消息流。这些消息以未经请求的方式生成（即，它不是请求/响应）。

我想构建一个自定义消息中介以将这些消息带入企业网络。

有人可以指出 WSO2 ESB 产品组合中的一个或多个示例，这些示例是构建自定义中介器的良好起点吗？

任何其他示例或示例，作为 WSO2 ESB 新手需要开发他的第一个自定义中介的起点，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T16:50:42.043

您可以参考这些链接。

（由用户自己创建项目并编译自定义中介 jar） [http://docs.wso2.org/wiki/display/ESB460/Writing+a+WSO2+ESB+Mediator](http://docs.wso2.org/wiki/display/ESB460/Writing+a+WSO2+ESB+Mediator)

（使用 WSO2 开发者工作室） [http://achala11.blogspot.com/2012/12/how-to-write-custom-mediator-wso2-esb.html](http://achala11.blogspot.com/2012/12/how-to-write-custom-mediator-wso2-esb.html)

# c# - 带有为 jquery src 文件引用的 jquery 路径的 C# 变量不起作用

> ID：14815890
> 
> 赞同：0
> 
> 时间：2013-02-11T16:01:04.330
> 
> 标签：c#, javascript, jquery, asp.net

我正在尝试做这样的事情：

```
<script src="<%= ResolveUrl( Urls.jquery) %>" type="text/javascript" ></script> 
```

用于导入 jquery。路径的形式是 `http://domain.com/js/jquery-1.3.2.min.js`

在我的开发人员工具控制台中，该路径已完美加载，但是当我尝试运行 jquery 时，它将无法正常工作。我有点疑惑。

谢谢！

编辑：

我用来测试它的代码：

```
<script type="text/javascript" > 

        window.onload = function () {
            if (window.jQuery) {
                // jQuery is loaded  
                alert("Yeah!");
            } else {
                // jQuery is not loaded
                alert("Doesn't Work");
            }
        }
    </script> 
```

我还有另一个外部 .js 文件，上面写着“$”在 Chrome 的开发人员控制台中未定义。

编辑2：

看来此代码实际上适用于 Mozilla Firefox，但不适用于 Chrome 或 IE。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:03:32.233

下面的代码似乎对我有用。也许试试看？

这是我对服务器端代码的了解：

```
 public partial class index : System.Web.UI.Page
{
    public static string jQuery = "http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js";
    protected void Page_Load(object sender, EventArgs e)
    {
    }
} 
```

而对于 aspx 页面

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <script src="<%= ResolveUrl( jQuery ) %>" type="text/javascript" ></script>
</head>
<body>
    <form id="form1" runat="server">
    <div>

    </div>
    </form>
</body>
    <script type="text/javascript">
        window.onload = function () {
            if (window.jQuery) {
                // jQuery is loaded  
                alert("Yeah!");
            } else {
                // jQuery is not loaded
                alert("Doesn't Work");
            }
        }
    </script>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T16:32:53.053

好的伙计们，在基本放弃之后，我今天遇到了错误。我没有意识到我的一个页面有一个安全的连接，而一个没有。

例如

```
http://domain.net/page 
```

将加载 jquery 就好了，但是安全版本，使用 https

```
https://domain.net/page 
```

不会加载jquery。

我不确定为什么会发生这种情况，但这就是问题所在。我将把它标记为答案，但如果有人能提供关于为什么会发生这种情况的见解，那就太好了。

编辑：

在我的 Urls 文件中，我必须将 https:// 添加到元素的前面，而不是 http://，所以现在一切正常。希望以后有人会看到这一点并解决他们的问题。

# visual-studio-2010 - 帮助将硬编码字符串移动到 MFC .rc 文件中的宏或加载项

> ID：14815892
> 
> 赞同：1
> 
> 时间：2013-02-11T16:01:16.463
> 
> 标签：visual-studio-2010, mfc, internationalization, automation, string-table

我正在对一个旧的 MFC 项目进行国际化，并且我有成千上万的硬编码字符串要移动到字符串表中。我正在寻找宏、加载项或有关创建宏、加载项或向导的一些信息，以使我能够半自动化该过程。我希望能够突出显示一个字符串，右键单击并选择“移动到资源”之类的内容，并将该字符串添加到项目的字符串表中。可定制的东西会很棒，这样我就可以编辑创建的标识符并让工具用查找函数（我提供名称）替换代码中的硬编码字符串。我搜索了几天，找不到类似的东西。有谁知道已经存在的工具，或者可以提供一些关于我可以用来编写哪些 VS 可扩展性类的信息？我正在使用VS2010。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:56:43.340

你看过[http://www.lingobit.com/products/hardcoded_string_extraction.html](http://www.lingobit.com/products/hardcoded_string_extraction.html)吗？这是我所知道的唯一能做到这一点的产品。这是一个棘手的问题，因为有很多极端案例。

# android - 带有彩虹渐变的 android 按钮

> ID：14815898
> 
> 赞同：4
> 
> 时间：2013-02-11T16:01:31.007
> 
> 标签：android, layout, button, gradient

我想制作一个填充超过 3 种颜色的按钮，比如 7 色彩虹，从左 = 红色到右 = 紫色。

但我发现下面的代码只能满足 3 种颜色。

## 问题：

有没有办法生成彩虹渐变？我手上有一个 Rainbow.png，可以用吗？谢谢！！

## 当前代码：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_pressed="true" >         
        ...   
    </item>

    <item>
        <shape xmlns:android="http://schemas.android.com/apk/res/android"> 
            <stroke android:width="0dp" android:color="@color/black" />
            <gradient
                android:startColor="@color/red"
                android:centerColor="@color/green"
                android:endColor="@color/purple"
                android:angle="0" />
            <padding android:left="5dp" android:top="2dp" 
                android:right="5dp" android:bottom="2dp" /> 
            <corners android:radius="0dp" /> 
        </shape>
    </item>

</selector> 
```

## 回答：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_pressed="true" >         
        <shape xmlns:android="http://schemas.android.com/apk/res/android"> 
            <stroke android:width="0dp" android:color="@color/black" />
            <solid android:color="@color/grey"/>
            <padding android:left="5dp" android:top="2dp" 
                android:right="5dp" android:bottom="2dp" /> 
            <corners android:radius="0dp" /> 
        </shape>    
    </item>

    <item android:drawable="@drawable/rainbow" >
        <shape xmlns:android="http://schemas.android.com/apk/res/android"> 

            <padding android:left="5dp" android:top="2dp" 
                android:right="5dp" android:bottom="2dp" /> 
            <corners android:radius="0dp" /> 
        </shape>
    </item>

</selector> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-11T16:04:50.377

Android 内置了[9-patch 系统](http://developer.android.com/guide/topics/graphics/2d-graphics.html#nine-patch)来处理复杂的图形，这在风格上类似于一些网站背景的绘制方式。

Android 也有它自己的[9-patch 创建器](http://developer.android.com/tools/help/draw9patch.html)与 sdk 捆绑在一起，因此很容易编辑您的 png 文件，然后将 9-patch 应用到按钮。

这将允许您使用您的 png，它会根据您定义的图形的可拉伸区域调整大小，以便在按钮调整大小时调整大小

# sqlite - 删除行会加快数据库性能吗？

> ID：14815902
> 
> 赞同：0
> 
> 时间：2013-02-11T16:01:38.507
> 
> 标签：sqlite

我的数据库有 100k 行，我删除了 50k 行。删除后数据库的大小保持不变。我的问题是，尽管文件大小相同，删除行是否会加速未来的查询执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-02T19:52:47.160

@大卫施瓦茨写道：

> 简短的回答：有点，但没有你之后清空数据库所得到的那么多。

@Kobunite 写道：

> 我同意这一点，我想我几天前在这里读过一篇文章，有人认为删除行在运行真空之前没有任何性能优势——这与 SQLite 文档所说的相匹配。

# java - JComboBox 和文件读取

> ID：14815903
> 
> 赞同：0
> 
> 时间：2013-02-11T16:01:41.027
> 
> 标签：java, swing, jcombobox

我有控制用户名和密码的登录页面。

我希望当在组合框中选择管理员时，程序应该将给定的用户名和密码与我的“LoginInformation.txt”文件中的第一行进行比较。

并且当在组合框中选择用户时，程序应将给定的用户名和密码与“LoginInformation.txt”文件中的第二行进行比较。

但是，我的代码不能正常工作！

```
public class LoginFrame extends javax.swing.JFrame {

private String username;
private char[] Password;
private void LoginButtonActionPerformed(java.awt.event.ActionEvent evt) {

        username=String.valueOf(jTextField1.getText());
        Password=jPasswordField1.getPassword();

        if(jComboBox1.getSelectedIndex() == 0){
            if(adminCanGoNext()) {
              goAdminMainPage();
          }
           else{
                ErrorMessageLabel.setText("Did Not Match");
            }
        }

        else if(jComboBox1.getSelectedIndex() == 1){
            if(userCanGoNext()){
                goUserMainPage();
            }
        }

public boolean adminCanGoNext() throws IOException{
    FileReader fr=new FileReader("LoginInformation.txt");
    BufferedReader br=new BufferedReader(fr);
    String line;
    while((line=br.readLine()) != null){
        String[] infos=line.split("     ");
        String value=infos[0];
        String usern=infos[1];
        String pass=infos[2];

        if(usern.equals(username.trim()) && pass.equals(String.valueOf(Password))){
            return true;
        }
    }
    return false;
}

public void goAdminMainPage() {
          // Admin page
}

public boolean userCanGoNext() throws IOException{
    BufferedReader br=new BufferedReader(new FileReader("LoginInformation.txt"));
    String line;
    while( (line=br.readLine()) != null ){
        String[] celledinfo= line.split("     ");
        String userN=celledinfo[4];
        String passN=celledinfo[5];

        if(userN.equals(username.trim()) && passN.equals(String.valueOf(Password))){
            return true;
        }
    }
    return false;
}

public void goUserMainPage(){
          // User Page

}
} 
```

我的txt文件：

```
Admin:     1     2
User:     1     3 
```

我不编写 netbeans 生成的代码。（我在 jcombobox 中的第一个索引是管理员，第二个是用户）

感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T16:25:44.263

在`adminCanGoNext`您正在检查密码文件的每一行的用户/密码。您不关心用户选择“用户”或“管理员”的事实。（因此您只需要匹配以“Admin：”开头的行或以“User：”开头的行）

在`userCanGoNext`: 有一个类似的错误，但另外，您正在索引 4 和 5 处查找用户名和密码。根据您发布的文件模板：拆分结果的数组永远不会超过 3 个元素。

# java - Eclipse：Play Framework 2 - 如何从根文件夹隐藏或移动依赖项

> ID：14815904
> 
> 赞同：3
> 
> 时间：2013-02-11T16:01:40.950
> 
> 标签：java, eclipse, playframework-2.0

我下载了play框架play！2.1.0（使用 Java 1.6.0_23 和 Scala 2.10.0）

似乎`play eclipsify`不再工作但`play eclipse`正在工作

但是生成的项目不是很好*，所有依赖项都显示在根目录中*。

有没有一种方法可以使用类似于 maven 的名为 dependencies 的库来生成它，该库将存储所有依赖项？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T18:10:33.953

日蚀内..`Window -> Show view -> Package explorer`

所有文件和文件夹都很好地对齐，使用时没有任何问题:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T16:14:20.477

该命令现在称为`eclipse`: `play eclipse`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T11:44:29.873

通常我的“终极”解决方案是这样的：

```
eclipse with-source=true execution-environment=JavaSE-1.7 
```

库的源代码可从 eclipse 获得。将您的 jdk 版本用于执行环境。（请注意，在 Play 控制台中也可以使用自动完成功能，按 TAB 通常对您有很大帮助）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T13:42:44.063

我想没有解决方案可以在一个文件夹中制作播放组依赖项 - Maven 风格

不过谢谢

# c# - 如何让 Internet Explorer 保持流？

> ID：14815912
> 
> 赞同：-1
> 
> 时间：2013-02-11T16:02:12.700
> 
> 标签：c#, asp.net

我正在将 CSV 文件流式传输到 Internet Explorer。在流式传输结束时，Internet Explorer 会显示一个打开、保存和取消对话框。如果您在显示对话框后等待 30 秒并单击“打开”按钮，Internet Explorer 将不执行任何操作。这在 Firefox 中运行良好。除了 Flush 和 End on the Response，我还需要其他命令吗？这是我拥有的代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    DataTable dt = ReportService.GetAllOwnerAircraftPaymentInformation();

    //Generate the report
    using (MemoryStream stream = new MemoryStream())
    {
        StreamWriter writer = new StreamWriter(stream);
        CsvHelper csvHelper = new CsvHelper();

        csvHelper.DataTableToCsv(writer, dt);

        writer.Flush();

        //Send it to the browser
        stream.Seek(0, SeekOrigin.Begin);

        string fileName = string.Format("MassAVRMSDataExport{0}.csv", DateTime.Now.ToString("yyyyMMddhhmmss"));

        Response.ClearHeaders();
        Response.Clear();
        Response.ContentType = "application/octet-stream";
        Response.AddHeader("Content-Disposition", "attachment; filename=\"" + fileName + "\"");
        Response.AddHeader("Content-Length", stream.Length.ToString(CultureInfo.InvariantCulture));
        StreamHelper.CopyStream(stream, Response.OutputStream);
        Response.Flush();
        Response.End();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:09:35.270

尝试设置：

```
stream.Position = 0;
StreamHelper.CopyStream(stream, Response.OutputStream); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T16:57:02.330

Greg 使用 IE Explorer 时需要添加以下内容

```
Response.ContentType = "application/download" 
```

# javascript - 计算从外部 php 文件加载的数字 div

> ID：14815913
> 
> 赞同：0
> 
> 时间：2013-02-11T16:02:13.227
> 
> 标签：javascript, jquery

我有两个 php 文件，child.php 和 parent.php。Child.php 生成 div。现在，parent.php 调用 child.php 加载到`<div id='divContainer'>`. 现在，我需要计算 divContainer 中的 div。可能吗？我试过这样的事情：

```
$(document).ready(function () {
   var total_record = $('#divContainer > div').length;
   alert(total_record);
}); 
```

但它不起作用。即使是空警报也不会弹出。有人可以在这里帮助我吗？谢谢你！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T16:04:01.420

有语法错误：

```
)}; 
```

应该：

```
}); 
```

通常，如果您在预期时根本没有得到任何输出/结果，则归结为语法错误，这将导致浏览器无法解析和执行代码。对于将来的调试，请使用错误控制台，因为这通常会指出任何错误，并对问题进行了体面的描述。

# asp.net - gridview 隐藏列

> ID：14815914
> 
> 赞同：1
> 
> 时间：2013-02-11T16:02:23.907
> 
> 标签：asp.net, gridview

我有 gridview，我想在数据绑定到 gridview 后隐藏一列，但出现以下错误。

“索引超出范围。必须为非负数且小于集合的大小。参数名称：索引”

我的 C# 代码如下，

```
 protected void grid_all_posts_DataBound(object sender, EventArgs e)
{
    if (grid_all_posts.Columns[1].Visible)
    {
        grid_all_posts.Columns[1].Visible = false;
    }
}

// Read all posts and fill  gridview
    //////////////////////////////////////////////////
    DbCommand dbCommand2;
    dbCommand2 = db.GetStoredProcCommand("SP_Select_News");
    db.AddInParameter(dbCommand2, "UserId", DbType.Guid, new Guid(Session["UserId"].ToString().Trim()));
    DataSet ds = db.ExecuteDataSet(dbCommand2);
    grid_all_posts.DataSource = ds;
    grid_all_posts.DataBind();
    ////////////////////////////////////////////////// 
```

我的 ASPX 代码，

```
<asp:gridview runat="server" ID="grid_all_posts" OnRowDataBound="grid_all_posts_DataBound"></asp:gridview> 
```

你认为问题是什么？我如何隐藏第一列

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:12:22.223

尝试像下面它会工作....

```
 DbCommand dbCommand2;
    dbCommand2 = db.GetStoredProcCommand("SP_Select_News");
    db.AddInParameter(dbCommand2, "UserId", DbType.Guid, new Guid(Session["UserId"].ToString().Trim()));
    DataSet ds = db.ExecuteDataSet(dbCommand2);
    grid_all_posts.DataSource = ds;
    grid_all_posts.DataBind();

**//after Databind Write the below code**

    if (grid_all_posts.Columns.Count > 0)
       grid_all_posts.Columns[0].Visible = false;
    else
    {
       grid_all_posts.HeaderRow.Cells[0].Visible = false;
       foreach (GridViewRow gvr in grid_all_posts.Rows)
       {
           gvr.Cells[0].Visible = false;
       }
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-25T07:47:53.300

一种简单而通用的方法一直困扰着我很久 - 不需要任何类型的列计数，我今天终于找到了它；`DataControlFieldCell.ContainingField.HeaderText`

```
Private Sub GridView_RowDataBound(sender As Object, e As System.Web.UI.WebControls.GridViewRowEventArgs) Handles GridView.RowDataBound

    For Each r As GridViewRow In GridView.Rows

        If r.RowType = DataControlRowType.DataRow Then
            For Each c As DataControlFieldCell In r.Cells

                Dim h As String = c.ContainingField.HeaderText
                If h <> "ColumnName" Then c.ContainingField.Visible = False
                If IsNumeric(c.Text) Then c.Text = Format(CInt(c.Text), "#,##0")

            Next
        End If

    Next

End Sub 
```

当我对字段中的值执行一些格式设置时，我循环遍历 DataControlFieldCells（如上图所示），但是如果您想进一步减少它，您可以遍历我想象的标题。

有关详细信息，请参阅[msdn 。](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datacontrolfieldcell.containingfield%28v=vs.110%29.aspx)

# ios - 添加为子视图 ios sdk 时滑动手势不起作用

> ID：14815919
> 
> 赞同：2
> 
> 时间：2013-02-11T16:02:38.103
> 
> 标签：ios, ipad, uigesturerecognizer, subview

我花了整个周末试图弄清楚为什么我的手势不起作用。当我作为模型视图呈现时，手势正在工作，但是当我添加为子视图时，手势不起作用。是否有任何理由为什么它仅在添加为子视图时才起作用。

此代码有效：

```
myVC = [[FullViewController alloc] initWithNibName:@"FullViewController" bundle:nil];
UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController: myVC];
navigationController.modalPresentationStyle = UIModalPresentationFormSheet;
[self presentModalViewController:navigationController animated:YES];
navigationController.view.superview.bounds = CGRectMake(0,0,1024,724); 
```

此代码不起作用：

```
myVC = [[FullViewController alloc] initWithNibName:@"FullViewController" bundle:nil];
myVC.view.frame = CGRectMake(0, 0, 1024, 724);
myNavCtrl = [[UINavigationController alloc] initWithRootViewController:myVC];
[self.view addSubview: myNavCtrl.view];
myNavCtrl.view.frame = CGRectMake(0, -20, 1024, 675); 
```

手势识别代码：

```
swipeLeft = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(handleSwipeLeft:)];
[swipeLeft setDirection:UISwipeGestureRecognizerDirectionLeft];
[self.view addGestureRecognizer:swipeLeft]; 
```

任何帮助都会被学徒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T18:46:57.890

没有看到 handleSwipeLeft 细节：

看起来您正在设置 UIGestureRecognizer 并告诉它调用选择器/方法：handleSwipeLeft。

您应该在您的视图控制器中声明您的 UIGestureRecognizer，但将目标设置为您的 UIView 子类，然后在您的 UIView 子类中实现 handleSwipeLeft。

希望有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T18:19:33.080

在我看来，超级视图不允许触摸或用户交互。无法准确说明您提供的代码片段的原因，但您可以尝试将手势识别器添加到超级视图，看看是否有效，如果不起作用，则问题出在超级视图。

它作为模态工作，因为它根本不使用其他视图。

# jquery-ui - 在 CSS3 中重新创建 jQuery UI 的“可选”交互

> ID：14815923
> 
> 赞同：0
> 
> 时间：2013-02-11T16:02:49.073
> 
> 标签：jquery-ui, css

有没有办法使用 CSS3 来重新创建 jQuery UI 的可选交互的行为，特别是在网格设置中，如此[处所示](http://jqueryui.com/selectable/#display-grid)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:14:05.283

是的，这可以通过使用单选按钮`:checked`选择器和同级选择器（`+`或替代选择`~`）来实现

您基本上有用户可以选择的单选按钮，但将它们隐藏起来，并使用带有属性`<label>`的 's 。`for=""`

[演示](http://jsfiddle.net/2vmtX/1/)

这不允许您拖动或控制单击以选择多个框，但是，您需要 javascript（和复选框而不是单选按钮）

# python - 两次导入的模块会导致其中的对象重新生成

> ID：14815927
> 
> 赞同：0
> 
> 时间：2013-02-11T16:03:01.447
> 
> 标签：python, django

我有一个 Django 项目。这个 Django 项目的一部分是一个报告模块，它在所有 INSTALLED_APPS 中搜索报告目录，非常类似于管理界面的自动发现机制。

这个模块有一个小的注册类，用于注册找到的类。以一种非常简化的方式，它看起来像这样：

```
def autodiscover():
    """
    Searches for reports module in all INSTALLED_APPS
    """

    global REPORTSLOADING
    if REPORTSLOADING:
        return
    REPORTSLOADING = True

    import imp
    from django.conf import settings

    for app in settings.INSTALLED_APPS:
        try:
            app_path = import_module(app).__path__
        except AttributeError:
            continue

        try:
            imp.find_module('reports', app_path)
        except ImportError:
            continue

        import_module("%s.reports" % app)
    REPORTSLOADING = False

class ReportsRegistery(object):
      .....

registery = ReportsRegistery() 
```

如果任何 INSTALLED_APPS 需要注册一个 Report 类，我们需要在里面写一行`reports/__init__.py`：

```
import reports
reports.registery.register(SomeReportClass) 
```

在主要的 urls.py 中，我会这样做：

```
import reports
reports.autodiscover()

urlpatterns = patterns('',
....

 (r'', include(reports.registery.urls)),
) 
```

现在我决定为它创建一个可插入的 django 应用程序，并将相同的代码放入`__init__.py`包中。我面临的问题是具有新结构的报告模块被导入两次，从而导致重新创建“注册”对象。因此，实际上没有注册任何网址。它从 urls.py 中的导入加载一次（如预期的那样），另一次由自动发现启动。我已经通过以下方式验证了这一点：

```
print hex(id(registery)) 
```

并发现它返回了 2 个不同的值。

我认为报告包将被导入一次，就像它只是一个模块一样。

如何防止它被加载两次？或者我如何确保我们只有一个 ReportsRegistery 实例可以使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:18:02.577

Django 两次导入模块并不少见。有两个原因：

1.  经典的 Django 项目布局鼓励您将工作目录放在路径上的两个不同位置两次。这意味着您可以导入一些东西 as`project.module`或 as `app.project.module`，这会混淆导入机制。

2.  settings.py 文件实际上被导入了两次。

修复：

1.  仔细检查所有导入是否使用相同样式的路径。

2.  不要从 settings.py 导入你的模块

# postgresql - 获得正确的年份周数

> ID：14815929
> 
> 赞同：0
> 
> 时间：2013-02-11T16:03:05.070
> 
> 标签：postgresql, date, week-number

我想得到正确的周数。

使用该`to_char`函数，该函数枚举从星期一开始的一周，但考虑到一周从星期六开始，我想获得周数。

这是一个例子：

```
SELECT to_char('05-01-2013'::date,'daydd-mm-yyyy') as date_char, to_char('05-01-2013'::date,'IW') as week_number 
```

结果：

```
"saturday 05-01-2013";"01" 
```

并且应该是：

```
"saturday 05-01-2013";"02" 
```

有没有办法得到它？

配置信息：Windows 7 下的 Postgresql 9.2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T18:42:49.917

`SELECT EXTRACT(WEEK FROM now());`将给出数字 7，表示（目前）我们处于一年中的第 7 周。默认情况下，Postgres 周从星期一开始。

`SELECT EXTRACT(WEEK FROM timestamp '2013-01-05');`将给出 1，因为自年初以来仅过去了 5 天。

编辑它似乎只从第一个整周过去的时间开始计算周数。在不编写自己的函数的情况下，我建议您使用此函数或使用其他方法来查找它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T16:11:48.607

你必须使用`extract(doy from ...)`并`extract(dow from ...)`加上一些数学。[文档](http://www.postgresql.org/docs/current/interactive/functions-datetime.html#FUNCTIONS-DATETIME-EXTRACT)中的详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T15:06:52.790

这将给出正确的结果：

```
with first_friday as (
    select extract(doy from min(a)::date) ff
    from generate_series('2013-01-01'::date, '2013-01-07', '1 day') s(a)
    where extract(dow from a) = 5
)
select
    to_char(a, 'day'),
    a::date "day",
    floor((extract(doy from a) - (select ff from first_friday) - 1) / 7) + 2 week_number
from generate_series('2013-01-01'::date, '2013-01-31', '1 day') s(a)
;
  to_char  |    day     | week_number 
-----------+------------+-------------
 tuesday   | 2013-01-01 |           1
 wednesday | 2013-01-02 |           1
 thursday  | 2013-01-03 |           1
 friday    | 2013-01-04 |           1
 saturday  | 2013-01-05 |           2
 sunday    | 2013-01-06 |           2
 monday    | 2013-01-07 |           2
 tuesday   | 2013-01-08 |           2
 wednesday | 2013-01-09 |           2
 thursday  | 2013-01-10 |           2
 friday    | 2013-01-11 |           2
 saturday  | 2013-01-12 |           3
 sunday    | 2013-01-13 |           3
 monday    | 2013-01-14 |           3
 tuesday   | 2013-01-15 |           3
 wednesday | 2013-01-16 |           3
 thursday  | 2013-01-17 |           3
 friday    | 2013-01-18 |           3
 saturday  | 2013-01-19 |           4
 sunday    | 2013-01-20 |           4
 monday    | 2013-01-21 |           4
 tuesday   | 2013-01-22 |           4
 wednesday | 2013-01-23 |           4
 thursday  | 2013-01-24 |           4
 friday    | 2013-01-25 |           4
 saturday  | 2013-01-26 |           5
 sunday    | 2013-01-27 |           5
 monday    | 2013-01-28 |           5
 tuesday   | 2013-01-29 |           5
 wednesday | 2013-01-30 |           5
 thursday  | 2013-01-31 |           5 
```

# django - Django - unique_together 选项与表单中的覆盖保存方法

> ID：14815930
> 
> 赞同：1
> 
> 时间：2013-02-11T16:03:05.253
> 
> 标签：django, django-models, django-forms

当用户在表单中保存数据而不是使用 django 管理员时，我想使用 unique_together 选项。

模型.py：

```
from django.db import models
from django.contrib.auth.models import User

class ezApp(models.Model):
    name = models.SlugField(max_length=50, unique=True )
    date_created = models.DateTimeField('date created', auto_now_add=True)
    date_updated = models.DateTimeField('date updated', auto_now=True)
    created_by = models.ForeignKey(User)
    in_use = models.BooleanField()

    class Meta:
        unique_together = (('name', 'created_by'),) 
```

表格.py

```
from django.forms import ModelForm
from django.forms.models import BaseModelFormSet
from ezApp.models import *

class BaseEzAppFormSet(BaseModelFormSet):
    def __init__(self, *args, **kwargs):
        self.user = kwargs.pop('user')
        super(BaseEzAppFormSet, self).__init__(*args, **kwargs)

    def save_new(self, form, commit=True):
        obj = form.save(commit=False)
        obj.created_by = self.user
        if commit:
             obj.save()
        return obj 
```

视图.py：

```
from django.shortcuts import *
from ezApp.models import *
from django.forms.models import modelformset_factory
from django.http import HttpResponseServerError
from ezApp.forms import *

def createEzAppInstance(request):
    if request.method == 'POST':
            ezAppFormSet = modelformset_factory(ezApp, extra=1, fields=('name'), formset=BaseEzAppFormSet)
            formset = ezAppFormSet(request.POST, request.FILES, user=request.user)
            if formset.is_valid():
                formset.save()

        return render_to_response("ezApp/manage_new_ezApp.html", {'formset': formset, 'title': "New App"}, context_instance=RequestContext(request))
else:
    error_msg = u"You are not logged in"
    return HttpResponseServerError(error_msg) 
```

在模型的 Meta 中使用 unique_together 时，验证仅在 django admin 内部有效，但在我使用表单保存新数据时无效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T17:03:27.197

正如 msc 指出的那样，您需要覆盖 save 方法而不是编写自己的方法。

```
def save(self, *args, **kwargs):
    obj = super(BaseEzAppFormSet, self).save(form, *args, commit=False, **kwargs)
    obj.created_by = self.user
    obj.save()
    return obj 
```

看起来您的 save_new() 方法从未在您的视图中被调用过。

# javascript - 加载事件时，触发选择更改事件，jQuery

> ID：14815936
> 
> 赞同：1
> 
> 时间：2013-02-11T16:03:15.890
> 
> 标签：javascript, jquery, html

我正在使用 jQuery 方法开发 Country、State、City，但问题是当 load 事件触发时，change() 也触发了，并且我无法加载 State 下拉列表

```
$("#SelectCountry").load() {
    $.ajax({
        url: "../Member/Home.aspx/GetCountryName",
        type: "POST",
        dataType: 'json',
        contentType: 'application/json; charset=utf-8',
        data: "{'name': '" + "1" + "'}",
        async: false,
        success: function (response) {
            if (response.d != null) {
                $.each(response.d, function (i, response) {
                    debugger;
                    $("#SelectCountry").append("<option value=" + response.CountryId + ">" + response.CountryName + "</option>");
                });
            }
        },
        error: function (xhr) {}
    });
}
$("#SelectCountry").change() {
    alert("Select event changed;");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:05:55.810

你应该更换

```
$("#SelectCountry").load() { // doesn't compile
     ...
} 
```

和

```
$("#SelectCountry").load( function() { // pass a callback to load
     ... // will be executed when loading finishes
}); 
```

但在你的情况下，即使我没有看到 HTML，我也看不出你为什么要使用 load。您应该简单地调用块内的代码。

# entity-framework - MVC4脚手架，不同程序集中的DBContext

> ID：14815940
> 
> 赞同：3
> 
> 时间：2013-02-11T16:03:26.447
> 
> 标签：entity-framework, asp.net-mvc-scaffolding

我一直在尝试构建一个 DBContext 类（代码优先），它驻留在不同的程序集中，并将引用添加到当前 MVC 项目中。

VS2012 给我一条消息，说 DBContext 在不同的程序集中，并且它无法修改类。我知道它无法修改该类，因为它位于不同的程序集中，但该类已经具有所需的 DBSet 作为字段。

我想到的解决方案是在我的 MVC 项目中创建代理 DBContext，用它来搭建支架并将其链接到控制器内的原始 DBContext。

有什么正确/更好/更简单的方法吗？我在这里错过了一些非常明显的东西吗？

谢谢你。

# android - 在没有 facebook 应用程序的情况下在 android 上重新授权 Session.NewPermissionsRequest

> ID：14815941
> 
> 赞同：2
> 
> 时间：2013-02-11T16:03:30.353
> 
> 标签：android, facebook

我使用新的 facebook SDK (3) for android。当我试图获得发布的新权限时

```
Session.NewPermissionsRequest 
```

应用程序出于某种原因需要再次登录 webview。

谢谢

# ruby-on-rails - Rails simple_form 输入上的引导弹出窗口

> ID：14815950
> 
> 赞同：0
> 
> 时间：2013-02-11T16:04:04.907
> 
> 标签：ruby-on-rails, twitter-bootstrap, simple-form, popover, slim-lang

我正在尝试以我目前正在构建的形式显示一些弹出窗口。当用户专注于特定领域时，它们应该出现，但我无法做到这一点，这是我得到的（在 Slim 中）：

```
#sample_form=simple_form_for sample do |form|
    =form.input :sample_name, placeholder: "Name", rel="popover" data-content="content" data-original-title="title"

javascript:
    $('#sample_form input').hover(function()
        {
            $(this).popover('show')
        }); 
```

这是我尝试加载页面时得到的结果：

```
..._form.html.slim:4: syntax error, unexpected tIDENTIFIER, expecting tASSOC
...", rel="popover" data-content="lol" data-original-...
...                     ^
..._form.html.slim:4: syntax error, unexpected tIDENTIFIER, expecting ')'
...opover" data-content="content" data-original-title="title"))).to_...
...                                   ^ 
```

可能是一个简单的语法错误，但我无法弄清楚。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T12:53:32.650

问题是您在第二行将 Slim 和 Ruby 混合在一起。尝试这样的事情：

```
= form.input :sample_name, placeholder: "Name", :input_html => {:rel => "popover", :data => {:content => "content", "original-title" => "title"}} 
```

# wpf - 如何在只读数据网格中使一列可编辑？

> ID：14815951
> 
> 赞同：12
> 
> 时间：2013-02-11T16:04:05.027
> 
> 标签：wpf, datagrid

如何在只读数据网格中使一列可编辑？

```
<DataGrid x:Name="dgLoadDtl" Height="315" Width="710" Grid.Row="0" 
                  HorizontalAlignment="Left" VerticalAlignment="Bottom"  
                  Style="{DynamicResource StyleDatagrid}" 
                  IsReadOnly="true">

            <DataGrid.Columns>                    

                <DataGridTextColumn Foreground="Black" Width="60" Header="Sctn" Binding="{Binding Sctn, Mode=TwoWay}" IsReadOnly="false" />                    
                <DataGridTextColumn Foreground="Black" Width="140" Header="CustName"  Binding="{Binding CustName, Mode=TwoWay}" />
                <DataGridTextColumn Foreground="Black" Width="140" Header="Address"  Binding="{Binding Address1, Mode=TwoWay}" />
                <DataGridTextColumn Foreground="Black" Width="50" Header="Bulk   or Bag"  Binding="{Binding BulkorBag, Mode=TwoWay}" />
                <DataGridTextColumn Foreground="Black" Width="80" Header="ProdCode" Binding="{Binding ProdCode, Mode=TwoWay}" />
                <DataGridTextColumn Foreground="Black" Width="80" Header="MedCode" Binding="{Binding MedCode, Mode=TwoWay}" /> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-06-18T15:39:45.197

我创建了一个示例，我将 DataGrid 的 ItemsSource 绑定到 ObservableCollection，从这里您有两个选项。

1.  在 DataGrid 上设置 AutoGenerateColumns="False" 并为除要编辑的列之外的所有列设置 IsReadOnly="True"，您将设置 IsReadOnly="False"。
2.  AutoGenerateColumns="True"（这是默认设置，因此您可以从 XAML 中删除该属性）并在您的 ViewModel 中将设置器设为私有，用于除您希望可编辑的列之外的所有属性。

这是选项 1 的示例代码：

```
<DataGrid x:Name="dgLoadDtl" Grid.Row="0" HorizontalAlignment="Left" VerticalAlignment="Top" ItemsSource="{Binding MyData}" AutoGenerateColumns="False">
    <DataGrid.Columns>
        <DataGridTextColumn Foreground="Black" Width="60" Header="Sctn" Binding="{Binding Sctn, Mode=TwoWay}" IsReadOnly="false" />
        <DataGridTextColumn Foreground="Black" Width="140" Header="CustName"  Binding="{Binding CustName, Mode=TwoWay}" IsReadOnly="True"/>
        <DataGridTextColumn Foreground="Black" Width="140" Header="Address"  Binding="{Binding Address1, Mode=TwoWay}" IsReadOnly="True"/>
        <DataGridTextColumn Foreground="Black" Width="50" Header="Bulk   or Bag"  Binding="{Binding BulkorBag, Mode=TwoWay}" IsReadOnly="True"/>
        <DataGridTextColumn Foreground="Black" Width="80" Header="ProdCode" Binding="{Binding ProdCode, Mode=TwoWay}" IsReadOnly="True"/>
        <DataGridTextColumn Foreground="Black" Width="80" Header="MedCode" Binding="{Binding MedCode, Mode=TwoWay}" IsReadOnly="True"/>
    </DataGrid.Columns>
</DataGrid> 
```

# html - 从 HTML 表格生成可下载的 PDF

> ID：14815957
> 
> 赞同：1
> 
> 时间：2013-02-11T16:04:24.993
> 
> 标签：html, twitter-bootstrap, pdf, html-table

你能给我一些工具来从 HTML 表格生成可下载的 PDF 吗？

如果可能，与 Twitter Bootstrap 兼容。

Ps.：我试过 Prawn，但我想知道一些其他的工具。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T16:48:44.870

**你需要知道的**

基本 Perl 脚本、HTML、Perl 模块安装

**介绍**

Adobe © PDF 文件是传输文档的流行文件格式之一。原因之一是它以打印方式显示文档（所见即所得）。由于它不需要文字处理器来浏览文档，因此也方便了很多。您只需要他们的阅读器就可以浏览文档。

Perl 有一个模块可以让您将 HTML 文件转换为 PDF 文档。这是通过使用 HTML::HTMLDoc 模块完成的。

**安装**

您需要从 Easy Software Products 下载 HTMLDoc 产品。首先安装它，然后您可以继续从 CPAN 下载 HTML::HTMLDoc 模块。下载后，像安装典型 Perl 模块一样安装它。

**生成您的 PDF 文档**

首先要做的是使用模块并创建 HTML::HTMLDoc 包的实例。

然后，您可以将完整的 HTML 文档传递给包或告诉它从 HTML 文件生成 PDF 文档。

**示例代码**

```
#!/usr/bin/perl
use HTML::HTMLDoc;
use strict;
####################################################
# This script is distributed according to the terms of
# the Perl Artistic License. Use at your own risk
# © 2004 Philip L. Yuson
####################################################
my $str = '
<html>
<body>
<p><font size=14pt><b>HTML to PDF Document</b></font></p>
<p>Let us see how this will work</p>
<table border=1>
<tr><td>This is a row in a table</td></tr>
<tr><td>This is another row</td></tr>
</table>
<HR>
copyright © 2004 Philip L. Yuson 
</body>
</html>';
my $html = new HTML::HTMLDoc(); # Start instance
$html->set_page_size('letter'); # set page size
$html->set_bodyfont('Arial'); # set font
$html->set_left_margin(1, 'in'); # set margin
$html->set_html_content($str); # contents to convert
my $pdf = $html->generate_pdf(); # generate document
$pdf->to_file('article.pdf'); # save document 
```

将其保存为 pdf.pl 并通过启动命令行并键入以下内容来运行它：

**perl pdf.pl**

**这应该会生成一个与此类似的 PDF 文件。**

生成 PDF 文件以在 Web 上下载

要生成可以下载的 PDF，而不将其保存到文件中，您可以使用与上述相同的脚本，只是需要更改最后一行。但是，为了使我们的示例更有趣，我们还将在文档上添加日期和时间。所以脚本将如下所示：

```
#!/usr/bin/perl
use HTML::HTMLDoc;
use Date::Calc;
use strict;
####################################################
# This script is distributed according to the terms of
# the Perl Artistic License. Use at your own risk
# © 2004 Philip L. Yuson
####################################################
my @c = Date::Calc::Today_and_Now();
my $str_temp;
foreach (@c) {
 $str_temp .= sprintf("%02d:", $_);
}
my $str = "
<html>
<body>
<p><font size=14pt><b>HTML to PDF Document</b></font></p>
<p>Let us see how this will work</p>
<table border=1>
<tr><td>This is a row in a table</td></tr>
<tr><td>This is another row</td></tr>
</table>
<HR>
This document was generated:
$str_temp
copyright © 2004 Philip L. Yuson 
</body>
</html>";
my $html = new HTML::HTMLDoc(); # Start instance
$html->set_page_size('letter'); # set page size
$html->set_bodyfont('Arial'); # set font
$html->set_left_margin(1, 'in'); # set margin
$html->set_html_content($str); # contents to convert
my $pdf = $html->generate_pdf(); # generate document
# Tell browser this is a a PDF document
print "Content-Type: Application/pdf\n\n"; 
$pdf->to_string(); # Send the document 
```

# ruby-on-rails - Rails - 延迟作业 - 堆栈级别太深

> ID：14815958
> 
> 赞同：0
> 
> 时间：2013-02-11T16:04:28.350
> 
> 标签：ruby-on-rails, stack, delayed-job

我面临的问题类似于[这个 github 问题](https://github.com/collectiveidea/delayed_job_mongoid/issues/21)

如果您需要有关我所面临错误的更多详细信息，您也可以使用[我对这个问题的评论。](https://github.com/collectiveidea/delayed_job_mongoid/issues/21#issuecomment-3337960)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T09:33:44.450

解决方案是添加一个空的

```
def encode_with coder
end 
```

Mailer 类中的方法。

[https://github.com/collectiveidea/delayed_job/issues/349](https://github.com/collectiveidea/delayed_job/issues/349)

# amazon-ec2 - 是否可以从 EC2 中引用 EC2 弹性 IP 地址？

> ID：14815970
> 
> 赞同：0
> 
> 时间：2013-02-11T16:05:07.327
> 
> 标签：amazon-ec2

我有一个 EC2 机器集群，它们需要能够相互引用。使用他们的私有 IP 地址是可行的，但每当其中一个实例重新启动时都会导致问题。

因此，我尝试了弹性 IP 地址，以便我的服务器具有固定地址。问题是我似乎无法通过云中的弹性 IP 引用机器。

因此，从云外部我 ping elasticIp 并且它可以工作。然后我 ssh 到我的另一台 EC2 机器，当我 ping 相同的 elasticIp 时它失败了。但是，我可以 ping 那台机器的私有地址。

底线：弹性 IP 是否仅面向外部？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T17:30:22.367

您是否可以 ping 实例取决于您为实例所属的安全组设置的规则。

实例可以使用弹性 ips 相互通信，但是即使实例实际上在同一个可用区中，您仍将按区域数据传输率支付此数据传输费用（在这种情况下，使用内部 ips 进行数据传输是免费的）。

# c# - WCF NamedPipe IPC 通信

> ID：14815975
> 
> 赞同：0
> 
> 时间：2013-02-11T16:05:18.300
> 
> 标签：c#, .net, wcf, ipc, named-pipes

我想使用 WCF NamedPipe IPC 与两个应用程序通信，服务器和客户端之间没有建立连接，因为 app.config 中使用的某些信息或地址不正确。

我想缺少一些东西，因为没有建立通信，请帮忙？

例如：服务器端

```
<system.serviceModel>
    <services>
        <service name="IService1">
           <endpoint address="net.pipe://localhost/Service1"
                  binding="netNamedPipeBinding"
                  contract="NamedPipeService.IService1"
                  name="ConsoleServiceEndpoint" />
        </service>
     </services>
</system.serviceModel> 
```

客户端 ：

```
<system.serviceModel>
    <client>
        <endpoint address="net.pipe://localhost/Service1"
            binding="netNamedPipeBinding" contract="NamedPipeService.IService1"            name="ConsoleServiceEndpoint" />
   </client> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:28:18.647

如果您的问题与 SQL Server 相关，另一个问题刚刚提出类似的问题，您可能处于相同的位置。

[请检查此链接。](https://stackoverflow.com/questions/14815297/microsoft-sql-server-native-client-10-0-login-timeout-expired) 它可能与是否启用了命名管道的 sql 服务器的协议相关联。

# ruby-on-rails - 保存在rails中收到的json数据的问题

> ID：14815978
> 
> 赞同：0
> 
> 时间：2013-02-11T16:05:33.463
> 
> 标签：ruby-on-rails, ruby-on-rails-3

这是我的json数据：

```
{
   "authenticity_token"   =>"pdXG/h4Ds0g2ysC564mNSfGe7HfpPWHD+X81u06hJFI=",
   "utf8"   =>"✓",
   "ar_identifier"   =>"14433",
   "bji"   =>   {
      "date"      =>"02-12-2013",
      "ar_bji_o_involveds"      =>      {
         "0"         =>         {
            "name"            =>"h",
            "dob"            =>"",
            "charge"            =>"j"
         },
         "1"         =>         {
            "name"            =>"jkljlkj",
            "dob"            =>"",
            "charge"            =>"jkljklj"
         }
      }
   }
} 
```

我需要循环并保存名称、DOB 和费用。请不要 0,1 不固定，它们的大小可以是任意数字。

我正在尝试这个：

```
 counter = 0;
     other = params[:bji][:ar_bji_o_involveds]

     other.each do |other|
       e = MyModel.new(params[:bji][:ar_bji_o_involveds][:counter])
       e.save
       counter+= 1
     end 
```

但是保存的数据是空的。请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:12:24.340

你可以试试这个：

```
 other = params[:bji][:ar_bji_o_involveds]

 other.each do |key, value|
   e = MyModel.new(value)    #Assuming your model has `dob`, `charge` and `name` fields
   e.save!  
 end 
```

不需要`counter`

# java - 调用位于外部 android 库 (jar) 中的活动

> ID：14815980
> 
> 赞同：1
> 
> 时间：2013-02-11T16:05:40.203
> 
> 标签：java, android, eclipse, jar

我正在尝试调用**位于外部 android 库中**的**活动。**

 **我的 Eclipse 中有**两个项目**：
-SuperApp（包含具有“开始计算器活动”按钮的 MainActivity）-AdditionLibrary（包含
具有“这是计算器活动”TextView 的 CalculatorActivity）

以下是活动的源代码： [https ://gist.github.com/poiuytrez/4714770](https://gist.github.com/poiuytrez/4714770)

**如果我使用项目属性->Android->Library** [http://tinypic.com/r/2v31s8z/6](http://tinypic.com/r/2v31s8z/6)从 SuperApp 引用应用程序，
该应用程序**工作**正常。

**如果我导出**AdditionLibrary 的 jar ( [http://tinypic.com/r/30m9wld/6](http://tinypic.com/r/30m9wld/6) ) 将其添加到 SuperApp 的 libs 文件夹中，然后将 jar 添加到 Java 构建路径 ( [http://tinypic.com /r/2efksk0/6](http://tinypic.com/r/2efksk0/6)），当我启动应用程序时，我**遇到以下问题**：

```
"android.content.res.Resources$NotFoundException". 
```

[http://tinypic.com/r/2hnbb6q/6](http://tinypic.com/r/2hnbb6q/6)

我到处寻找，但找不到问题的根本原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:12:47.700

如果要将 jar 文件添加到项目中，则需要将库项目中使用的所有资源。

包括菜单、drawable、布局等。

**例如 ：**

这在您的`CalculatorActivity.java`文件中使用：

```
getMenuInflater().inflate(R.menu.activity_calculator, menu); 
```

因此，您需要添加调用`activity_calculator.xml`到您的`SuperApp`应用程序的菜单文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T16:20:38.040

不，你不能制作 android 库的 jar 文件。您必须用作 android 库项目 [http://developer.android.com/tools/projects/index.html](http://developer.android.com/tools/projects/index.html)**

# c# - 在 C# .NET 2.0 中使用静态方法进行异步调用

> ID：14815984
> 
> 赞同：1
> 
> 时间：2013-02-11T16:05:58.200
> 
> 标签：c#, asynchronous, .net-2.0

我有一个 .NET 2.0 应用程序。在这个应用程序中，我需要将数据传回我的服务器。服务器公开了一个基于 REST 的 URL，我可以将数据发布到该 URL。当我将数据传回我的服务器时，有时我需要异步执行此操作，有时我需要阻塞调用。在异步调用的场景下，我需要知道调用何时完成。到目前为止，我都明白该怎么做。

我遇到麻烦的地方是，我正在使用的方法必须是静态的。这是我继承的代码，我宁愿不必重做所有这些代码。目前，我有两种静态方法：

```
public static string SendData (...) {
}

public static string SendDataAsync(...) {

} 
```

返回的`string`是来自服务器的响应代码。静态部分让我很适应。它不会导致我的阻塞版本出现问题。但是，在异步调用的较量中，我不知道该怎么办。

有没有人可以提供任何见解？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:19:59.717

创建一个包装您的服务调用的类。从那里只调用静态阻塞方法，但从后台线程调用它。然后在服务调用返回后执行回调或引发事件：

```
public class CompletedEventArgs : EventArgs
{
    public string Result { get; set; }
}

public class MyServiceWrapper
{
    public event EventHandler<CompletedEventArgs> CallCompleted;

    public string SendData()
    {
        return StaticService.SendData();
    }

    public void SendDataAsync()
    {
        ThreadPool.QueueUserWorkItem(state => {
            var result = StaticService.SendData();
            var handler = CallCompleted;
            if (handler != null)
            {
                handler(this, new CompletedEventArgs{ Result = result });
            }
        });
    }
} 
```

请记住，尽管引发的事件并非来自 UI 线程，因此当您想在 UI 中对其做出反应时，您必须相应地调度它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T12:58:28.113

这是 C# 5 (IIRC) 之前的一般异步模式。

```
public static string SendData (...) {
}

public static IAsyncResult BeginSendData(..., AsyncCallback cb) {
   var f = new Func<..., string>(SendData);
   return f.BeginInvoke(..., cb, f);
}

public static string EndSendData(IAsyncResult ar) {
   return ((Func<..., string>) ar.AsyncState).EndInvoke(ar); 
} 
```

用法：

```
BeginSendData(..., ar => 
   {
     var result = EndSendData(ar);
     // do something with result
   }); 
```

完整的控制台示例：

```
public static string SendData(int i)
{
    // sample payload
    Thread.Sleep(i);
    return i.ToString();
}

public static IAsyncResult BeginSendData(int i, AsyncCallback cb)
{
    var f = new Func<int, string>(SendData);
    return f.BeginInvoke(i, cb, f);
}

public static string EndSendData(IAsyncResult ar)
{
    return ((Func<int, string>)ar.AsyncState).EndInvoke(ar);
}

static void Main(string[] args)
{
    BeginSendData(2000, ar => 
        {
            var result = EndSendData(ar);
            Console.WriteLine("Done: {0}", result);
        });

    Console.WriteLine("Waiting");
    Console.ReadLine();
} 
```

以上将打印：

```
Waiting
Done: 2000 
```

# html - 图片链接不会出现在 Firefox 上

> ID：14815986
> 
> 赞同：0
> 
> 时间：2013-02-11T16:06:08.550
> 
> 标签：html, css, image, firefox, cross-browser

我有几个嵌套在锚标签内的图像。它们完美地出现在 Chrome 和 IE 上。甚至 IE 7 ！但在 Firefox 18 上，图像根本不会出现。这是我的代码：

```
<div id="follow-wrapper">
    <p>Follow Us</p>
    <ul>
        <li><a href="#"><img id="facebook-img"/></a></li>
        <li><a href="#"><img id="twitter-img"/></a></li>
        <li><a href="#"><img id="googleplus-img"/></a></li>
        <li><a href="#"><img id="linkedin-img"/></a></li>
        <li><a href="#"><img id="youtube-img"/></a></li>
        <li><a href="#"><img id="rss-img"/></a></li>
    </ul>
</div>

#follow-wrapper {
    position: absolute;
    right: 0px;
    top: 15px;
    width:230px;
}

#follow-wrapper p {
    float:left;
    font-family:'Arial', Gadget, sans-serif;
    font-size: 15px;
    color : #20417f;
}

#follow-wrapper ul {
    float:left;
    list-style: none;    
}

#follow-wrapper ul li {
    display: inline;    
    margin-left:8px;  
}

#follow-wrapper ul li a img {
    border: none;
}

#follow-wrapper ul li img {
    background-image: url('../img/follow.png');
    background-repeat: no-repeat;
    width: 16px;
    height: 16px;   
    border-radius: 2px;
}

#facebook-img{
    background-position: 0px 0px;
}

#twitter-img {
    background-position: 0px -26px;
}

#googleplus-img{
    background-position: 0px -52px;
}

#linkedin-img{
    background-position: 0px -78px;
}

#youtube-img{
    background-position: 0px -104px;
}

#rss-img{
    background-position: 0px -130px;
} 
```

这是 Chrome 上的结果： ![在此处输入图像描述](../Images/19bae15269abd964addf8f3d6e773ca1.png)

这是 FF ： ![在此处输入图像描述](../Images/37d33d8e4c42352235b97edac226f665.png)

我不知道是怎么回事。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T16:57:11.150

[http://www.w3.org/MarkUp/html3/img.html](http://www.w3.org/MarkUp/html3/img.html)

“ **SRC**是强制性的。”
编辑：澄清 -**`src`**是`img`元素的强制性属性。

Guess FF 是唯一遵守规则的浏览器。但关键是，您的代码无效。

您没有使用以下方法保存任何代码：`<a href=""><img id...></a>`vs `<a href="" id=""></a>`。如果有的话，你写的更多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T16:12:22.973

两种选择：

1.  剪下你的精灵并使用 img 标签，因为它是用来与单个图像的 src 一起使用的。

2.  使用您的精灵，但将其应用于锚标签而不是 img 标签。

# ruby-on-rails - 红宝石中 Spork 和 Rspec 的问题

> ID：14815987
> 
> 赞同：0
> 
> 时间：2013-02-11T16:06:09.430
> 
> 标签：ruby-on-rails, testing, rspec, rubymine, spork

尝试在 RubyMine 中将 Rspec 与 Spork 一起使用；

宝石文件：

```
gem 'spork', '~> 1.0rc' 
```

.rspec：

```
--color
--drb 
```

[spec_helper.rb](https://gist.github.com/XimikS/4755344)。

```
$ spork rspec

Using RSpec, Unknown
  -- Starting to fill pool...
     Wait until at least one slave is provided before running tests...
  ** CTRL+BREAK to stop Spork and kill all ruby slave processes **
Spork is ready and listening on 8989!
  -- Rinda Ring Server listening for connections...

   -- build slave 1...
   -- build slave 2...
Loading Spork.prefork block...
Loading Spork.prefork block...
Rack::File headers parameter replaces cache_control after Rack 1.5.
Rack::File headers parameter replaces cache_control after Rack 1.5.
  --> DRb magazine_slave_service: 1 provided...
  --> DRb magazine_slave_service: 2 provided... 
```

（Rspec，**未知**？！WTF）而且.. 没有更多的输出。如何运行规范？

我做错了什么？=)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T17:30:41.420

谢谢大家。问题解决了。我的错误，需要使用`$ rspec ..`而不是`$ rake spec`

# ruby-on-rails - 大多数 Rails 在工作线程中呈现视图内容的方式

> ID：14815990
> 
> 赞同：0
> 
> 时间：2013-02-11T16:06:17.280
> 
> 标签：ruby-on-rails

我需要生成 HTML 时事通讯并将其批量同步到批量电子邮件提供商。

我有一个同步所有联系人的 Rake 任务，并且需要生成时事通讯 HTML。我看到了几个选项，但没有一个是完美的：

1.  我可以使用控制器生成它。这似乎是最正确的，但意味着我很难访问 webstack。
2.  我可以破解一个模型，让它解析一个haml文件并生成内容。这感觉很糟糕，但会让我从工人那里生成它。

一定会有更好的办法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:39:26.673

不要从模型中做到这一点。如果您需要生成时事通讯，时事通讯是电子邮件，因此请使用邮件程序。如果您的内容是特定于用户的，则将所需的数据传递给邮件通知方法。邮件程序继承自 ActionDispatch::Base，这意味着您可以访问渲染引擎、HAML、Slim、ERB，无论您使用什么。在完成测试和开发构建用户特定的电子邮件后，您应该创建一个 rake 任务，该任务 r 构建并向每个用户发送时事通讯。完成此任务后，您可以将其映射到一个 cron 作业，该作业将在您决定时在生产中自动执行。

只是不要让 Rails 中的整个 MVC 山欺骗了你，时事通讯是一个完全不同的野兽，它不属于应用程序逻辑。

# c++ - 为什么 is_constructible 声称某些东西不是可构造的？

> ID：14815998
> 
> 赞同：17
> 
> 时间：2013-02-11T16:06:45.040
> 
> 标签：c++, templates, c++11, constructor, typetraits

以下程序在使用 GCC 4.7 和 clang 3.2 编译时，会产生“1”作为输出。

```
#include <type_traits>

struct foo {
    template<typename T>
    foo(T) {
        static_assert(not std::is_same<int, T>(), "no ints please");
    }
};

#include <iostream>    
int main() {
    std::cout << std::is_constructible<foo, int>();
} 
```

这令人困惑。`foo`很明显不能从`int`! 如果我更改`main`为以下内容，两个编译器都会因为静态断言失败而拒绝它：

```
int main() {
    foo(0);
} 
```

为什么两个编译器都说它是可构造的？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-11T16:06:45.040

这就是标准必须说的（§20.9.5/6），我强调：

> 给定以下函数原型：
> 
> ```
> template <class T>
> typename add_rvalue_reference<T>::type create(); 
> ```
> 
> `is_constructible<T, Args...>`当且仅当以下变量定义对于某个发明的变量是格式良好的时，模板特化的谓词条件 才会满足`t`：
> 
> ```
> T t(create<Args>()...); 
> ```
> 
> [*注意：*这些标记永远不会被解释为函数声明。*——尾注*]
> 
> 访问检查就像在`T`与任何`Args`. **仅考虑变量初始化的直接上下文的有效性。**[*注意：*初始化的评估可能会导致副作用，例如类模板特化和函数模板特化的实例化，隐式定义函数的生成等。这种副作用不在“直接上下文”中，并且可能导致程序格式错误。*——尾注*]

仅当模板构造函数被实例化时，断言才会失败。但是，正如注释中所澄清的那样，该断言不在所考虑的变量定义的直接上下文中，因此不会影响其“有效性”。因此，编译器可以将该定义视为有效，并因此声称`foo`确实可以从 构造`int`，即使实际上尝试`foo`从a 构造 a`int`会导致格式错误的程序。

请注意，编译器也可以`is_constructible`根据断言拒绝原始程序，而不是让它们产生错误，即使两者都没有。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-11T20:22:11.947

`foo2`是你的`foo`。 `foo1`是一个做你想做的事的 foo `foo`。

```
#include <type_traits>
#include <utility>

struct foo1 {
  template<typename T,typename=typename std::enable_if< !std::is_same<int, T>::value >::type>
  foo1(T) {
    static_assert(not std::is_same<int, T>(), "no ints please");
  }
};
struct foo2 {
  template<typename T>
  foo2(T) {
    static_assert(not std::is_same<int, T>(), "no ints please");
  }
};

#include <iostream>    
int main() {
  std::cout << std::is_constructible<foo1, int>();
  std::cout << std::is_constructible<foo2, int>();
} 
```