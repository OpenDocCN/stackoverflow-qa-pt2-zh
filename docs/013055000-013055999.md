# StackOverflow 问答 13055000-13055999

# ruby-on-rails - 如何覆盖 Rails has_one 关联的 getter 方法？

> ID：13055000
> 
> 赞同：8
> 
> 时间：2012-10-24T17:58:21.010
> 
> 标签：ruby-on-rails, ruby-on-rails-3, associations, has-one

我想覆盖/扩展 Rails`has_one`关联方法，以便它*始终*返回关联类的实例。（如果数据库中不存在，我想创建一个新的并将其分配给父实例。）

理想情况下，我想通过[内置的 Rails 关联扩展机制](http://guides.rubyonrails.org/association_basics.html#association-extensions)来做到这一点。但是，我不知道“getter”方法的名称，所以我不知道要覆盖什么。

如何覆盖关联 getter，以便在它为 nil 时实例化一个新对象？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-11-21T21:42:30.923

从 Rails 3 开始， alias_method 不是覆盖关联方法的首选方式。引用[文档](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#module-ActiveRecord::Associations::ClassMethods-label-Overriding+generated+methods)：

> ## 覆盖生成的方法
> 
> 关联方法是在包含在模型类中的模块中生成的，它允许您轻松地用自己的方法覆盖并使用 super 调用原始生成的方法。例如：
> 
> ```
> class Car < ActiveRecord::Base
>   belongs_to :owner
>   belongs_to :old_owner
>   def owner=(new_owner)
>     self.old_owner = self.owner
>     super
>   end
> end 
> ```
> 
> 如果您的模型类是 Project，则该模块名为 Project::GeneratedFeatureMethods。GeneratedFeatureMethods 模块在（匿名）生成的属性方法模块之后立即包含在模型类中，这意味着关联将覆盖具有相同名称的属性的方法。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-24T18:14:08.133

您可以为原始方法设置别名，然后定义一个具有相同名称的新方法。

例如：

```
class MyModel < ActiveRecord::Base
  has_one :associated_model

  alias :old_associated_model :associated_model

  def associated_model
    old_associated_model || AssociatedModel.new(my_model_id: id)
  end

end 
```

我不知道这是否是处理这种情况的规范方法，但它应该有效。

# wpf - 自定义复选框控件

> ID：13055001
> 
> 赞同：0
> 
> 时间：2012-10-24T17:58:22.697
> 
> 标签：wpf, user-controls, checkbox

我需要创建一个自定义复选框控件。到目前为止，我有：

![在此处输入图像描述](../Images/2e55c2451f71b706b6dbdc23df4c02da.png)

所以在根目录而不是 UserControl 或 Window 我有复选框。（在我后面的代码中，我继承自 CheckBox 以使其正常工作）

当我进行更改时，我会看到我在第一张图片上突出显示的框。我不想拥有那个盒子。

此外，我想覆盖复选框控件的功能。我希望在单击显示 0 或 1 的图像时对其进行检查。例如，现在如果我单击正方形阴影上的图像外部，我将触发 Cheked 事件。如何覆盖该功能？我已经有了自己的动画，当鼠标进入数字图像以及鼠标按下等时触发。

## 编辑

我避免出现视觉状态的原因是因为我需要在鼠标进入特定图像而不是控件的任何部分时触发事件。换句话说，当使用视觉状态时，我为鼠标悬停事件应用了一种样式，如果我将鼠标放在用户控件内的任何位置，该事件就会触发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:08:43.413

```
<CheckBox x:Class="WpfApplication1.MyCustomCheckBox"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    <CheckBox.Template>
        <ControlTemplate>
             <TextBlock>Whatever</TextBlock>
        </ControlTemplate>
    </CheckBox.Template>
</CheckBox> 
```

# ios - UISearchbar 和 UITableViewCell

> ID：13055002
> 
> 赞同：0
> 
> 时间：2012-10-24T17:58:23.317
> 
> 标签：ios, uitableview, uisearchbar

我正在开发一个应用程序，当我搜索其中一个单元格时，UItableview 代码出现问题，例如：我想进入单元格 60，我在搜索栏中搜索它，但它没有给我 cell60 它是给我表格中的第一个单元格 我该如何修复它

AllItems 是 NSArray 并且 displayItems 是 NSMutableArray

这是代码

```
- (UITableViewCell *)tableView:(UITableView *)aTableView cellForRowAtIndexPath:(NSIndexPath *)indexPath

 {

   //Crete an NSSring object that we can use as the eruse identifir
static NSString *CellIdentifier = @"Cell";

//Check to see if wer can reuse a cell from a row that has just roolerd off the screen

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (!cell) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cell"];

}

cell.textLabel.text = [displayItems objectAtIndex:indexPath.row];

//if there are no cells to be reused creater new cell

if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
}

//set the text attribute to whatever we are currently looking at in our array

//Return the cell
return cell;
} 
```

这是搜索栏的代码

```
-(void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText{
if ([searchText length] == 0) {
    [displayItems removeAllObjects];
    [displayItems addObjectsFromArray:allItems];

} else {

    //here

    [displayItems removeAllObjects];
    for (NSString * string in allItems){
        NSRange r =[string rangeOfString:searchText options:NSCaseInsensitiveSearch];

        if (r.location != NSNotFound){
            [displayItems addObject:string];
        }
    }
}
[tableView reloadData];

} 
```

请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T18:33:51.180

你应该做什么：

在标题中：

```
@property(strong, nonatomic) NSMutableArray* displayItems;
@property(strong, nonatomic) NSArray* allItems; 
```

在实施中：

```
- (void) viewDidLoad {
    ...
    self.addItems = [NSArray arrayWithObjects:@"1", @"2", @"3"];
    self.displayItems = [NSMutableArray array];
} 
```

你的方法：

```
-(void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText{

    if ([searchText length] == 0) {
        [self.displayItems removeAllObjects];
        [self.displayItems addObjectsFromArray:allItems];

    } else {

        [self.displayItems removeAllObjects];
        for (NSString * string in self.allItems ){
        NSRange r =[string rangeOfString:searchText options:NSCaseInsensitiveSearch];

        if (r.location != NSNotFound){
            [self.displayItems addObject:string];
        }
    }

    [tableView reloadData];

} 
```

表视图数据源：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [self.displayItems count];
}

- (UITableViewCell *)tableView:(UITableView *)aTableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *cellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if (!cell) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cell"];
    }

    cell.textLabel.text = [self.displayItems objectAtIndex:indexPath.row];

    return cell;

} 
```

# api - 新的 Twitter 小部件

> ID：13055003
> 
> 赞同：2
> 
> 时间：2012-10-24T17:58:39.203
> 
> 标签：api, widget, twitter

我无法删除（twitter 小部件 v1.1）页眉和页脚

twitter 小部件生成的代码：

```
<a class="twitter-timeline" href="https://twitter.com/MonTy_Adel" data-widget-id="261143811491774464">Tweets by @MonTy_Adel</a>

<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script> 
```

此代码属于 twitter 小部件 v1.0 但不工作：

```
.twtr-hd, .twtr-ft
{
display: none;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-17T14:27:45.033

添加到 href 这个属性
data-chrome="nofooter noheader"

像那样 ：

```
<a class="twitter-timeline" href="@user_name" data-widget-id="app_id" data-chrome="nofooter noheader" >Tweets from @user_name</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-22T22:55:08.907

您不能通过域上的样式表对 iframe 内的元素进行样式设置。相反，您必须将样式注入 iframe。[看到这个问题](https://stackoverflow.com/questions/217776/how-to-apply-css-to-iframe)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T18:08:42.537

您是否尝试将 !important 添加到 display:none; 的末尾？它应该读

```
.twtr-hd, .twtr-ft
{
display: none !important;
} 
```

# iphone - iPhone 4s 和 5 上的 Xcode 4.5 不同的 iPhone 背景

> ID：13055007
> 
> 赞同：0
> 
> 时间：2012-10-24T17:59:05.097
> 
> 标签：iphone, xcode4.5, screen-resolution, iphone-4, iphone-5

我为我的 iPhone 应用程序制作了两张不同的背景图片：一张为 640x960 像素（iPhone4s），一张为 640x1136 像素（iPhone5）。但是当我在 Xcode 4.5 Main Storyboard 中创建应用程序布局时，如何为 iPhone4s 和 iPhone5 定义和创建它？这样当我选择 iPhone5 屏幕时背景会自动更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:06:23.477

只需使用正确的后缀导入背景图像

例如 ：

`myImage.png`用于非视网膜显示器

`myImage@2x.png`用于视网膜显示器

`myImage-568h@2x.png`适用于 iPhone 5

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T18:05:52.860

在您的 viewController 集中：

```
self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"image.jpg"]]; 
```

请记住正确命名图像：

*   对于 iphone4 "image@2x.png"
*   对于 iphone5 "image-568h@2x.png"

# postgresql - 从 Postgres UTF8 到 SQLServer 的 ETL 中的字符转换失败

> ID：13055009
> 
> 赞同：0
> 
> 时间：2012-10-24T17:59:10.600
> 
> 标签：postgresql, utf-8, character-encoding, ssis

我正在开发一段 ETL，它通过标准 Postgres ODBC 驱动程序将数据从 Postgres 上的数据仓库复制到使用 UTF8 字符集并在 Linux 上运行的使用典型 Windows 字符集的 SQLServer。

我发现我的一些源数据包含无法翻译成目标字符集的 UTF8 字符，导致整个加载失败。

我可以使用 postgres 函数来转换来自数据库的数据吗？有没有其他方法可以解决这个问题？

PS BTW，为什么在一个表的数据流中遇到此错误会导致我的所有加载失败？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-04T20:02:48.950

我在这里做一些假设。

1.  您正在尝试通过 ODBC 系统 DSN 使用 MS SQL 链接对象连接到 Postgress，并看到诸如“错误：编码“UTF8”的字符 0xc280 在“WIN1252”中没有等效项等错误；
2.  某些表上的选择语句有效，而另一些则抛出此错误。

修复：使用支持 Unicode 的 ODBC 驱动程序。我正在使用 PostgreSQL Global Development Group 的 ODBC 驱动程序。转到配置 DSN/管理 DSN 并选择 Unicode 驱动程序。

尝试发布图像但系统不会接受 - 显然我需要有 10 个“声誉”才能发布。

祝你好运。

马杜

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T23:32:42.000

如果您的目标编码中不支持 UTF-8 编码字符，那么 PostgreSQL 无法在不破坏数据的情况下对其进行转换。它不会破坏数据，因此会报告错误。

```
regress=# CREATE TABLE encoding_test(data text);
CREATE TABLE
regress=# INSERT INTO encoding_test(data) VALUES ('退休慰問金省182億怎麼用？ 藍中常委建議發消費券');
INSERT 0 1
regress=# SHOW client_encoding;
 client_encoding 
-----------------
 UTF8
(1 row)

regress=# SET client_encoding = 'Windows-1252';
SET
regress=# SELECT * FROM encoding_test ;
ERROR:  character 0xe98080 of encoding "UTF8" has no equivalent in "WIN1252" 
```

至于为什么这会导致一切停止工作：当 Pg 引发错误时，会中止事务。同一事务中的未来语句将失败。这是设计使然，因为保持数据完整性很重要，并且在事务中，如果一个操作失败，则整个事务都应该失败。它减少了错误不会被注意到的机会，直到有人恢复表然后问“所以，....为什么这个表是空的？”。

您应该在这里做的是使用 PostgreSQL Unicode ODBC 驱动程序，或者使用 ANSI ODBC 驱动程序和 utf-8 `client_encoding`，然后将数据作为 Unicode 插入 SQL Server，并正确设置数据库以接受 Unicode。

如果您确实想通过将数据转换为 Windows 8 位代码页之一来销毁数据：PostgreSQL 没有转换模式，它用占位符替换不可转换的字符。*当您确实*想故意丢弃数据时，这有时会令人沮丧。我建议将您的 PostgreSQL 连接保持在 UTF-8 模式或（在 Windows 中）使用 Unicode ODBC 驱动程序，然后将字符串从 Unicode 转换为应用程序中所需的目标编码，并根据需要进行修改。

# php - 如何对 laravel 捆绑包的 404/500 错误做出不同的响应？

> ID：13055011
> 
> 赞同：0
> 
> 时间：2012-10-24T17:59:16.333
> 
> 标签：php, api, laravel

我有一个用 Laravel PHP 框架编写的应用程序。我的主应用程序监听 404 和 500 事件。

```
Event::listen('404', function()
{
    return Response::error('404');
});

Event::listen('500', function()
{
    return Response::error('500');
}); 
```

这向用户显示了我的自定义错误页面。但是现在，我还构建了一个 API，它存在于一个名为*api*的包中。这个 API 将通过 Ajax 使用，所以我想以不同的方式处理错误。所以我将这些事件添加到 api 包的 routes.php 中：

```
Event::listen('404', function()
{
    return Response::json(array('status' => 'error', 'message' => 'API endpoint not found.'));
});

Event::listen('500', function()
{
    return Response::json(array('status' => 'error', 'message' => 'Internal server error'));
}); 
```

不幸的是，这不起作用，它仍然显示 HTML 错误页面。如何根据 API 或主应用程序对 404/500 错误做出不同的响应？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T05:50:31.573

您是否尝试过覆盖捆绑包中的主要应用程序侦听器？当您的包被调用时，这应该将它们作为侦听器删除，并且只留下事件的包侦听器。

`Event::override()`您可以使用方法而不是监听方法来覆盖事件。

```
Event::override('404', function()
{
    return Response::json(array('status' => 'error', 'message' => 'API endpoint not found.'));
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T16:49:34.893

在 routes.php 中将事件监听器更改为：

```
Event::listen('404', function()
{
    if (URI::segment(1) == 'api') {
            return Response::json(array('status' => 'error', 'message' => 'API endpoint not found.'),404);
    }

    return Response::error('404');
}); 
```

您可能需要在 __call catch-all 中的基本控制器中添加类似的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T20:26:20.933

您的 API 可以像这样直接返回响应：

`return Response::make(json_encode($array), 404);`

当然，您可以将其封装到自己的`$yourApiController->error($data, $code)`方法中。

# c# - 在 Rect 对象上创建 WPF 工具提示

> ID：13055022
> 
> 赞同：3
> 
> 时间：2012-10-24T18:00:01.963
> 
> 标签：c#, wpf, tooltip, rect, dynamic-data-display

我正在使用一个在图表上创建标记的开源图表库。（动态数据显示）我创建的标记是使用 Rect 对象创建的。我注意到 System.Windows.Shapes 中的所有形状都有一个 ToolTip 属性，但 System.Windows.Rect 没有。当鼠标悬停在标记上时，我希望弹出一个工具提示，告诉用户标记的价格值。当鼠标进入矩形占据的区域时，我正在考虑创建并弹出一个工具提示，但我不知道考虑到矩形将被图表缩放/平移的可能性有多大。还有其他建议吗？

这是我正在创建的标记的代码（来自 Felice Pollano 博客）

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Windows.Shapes;
using System.Windows.Controls;
using System.Text;
using System.Windows;
using System.Windows.Media;

namespace Microsoft.Research.DynamicDataDisplay.PointMarkers
{
public class CandleStickPointMarker:ShapePointMarker,ITransformAware
{
    public double CandlestickWidth
    {
        get { return (double)GetValue(CandlestickWidthProperty); }
        set { SetValue(CandlestickWidthProperty, value); }
    }
    public static readonly DependencyProperty CandlestickWidthProperty =
        DependencyProperty.Register("CandlestickWidth", typeof(double), typeof(CandleStickPointMarker), new UIPropertyMetadata(4.0));
    public double CandlestickStrokeWidth
    {
        get { return (double)GetValue(CandlestickStrokeWidthProperty); }
        set { SetValue(CandlestickStrokeWidthProperty, value); }
    }

    public static readonly DependencyProperty CandlestickStrokeWidthProperty =
        DependencyProperty.Register("CandlestickStrokeWidth", typeof(double), typeof(CandleStickPointMarker), new UIPropertyMetadata(1.0));
    public Brush WhiteCandleFill
    {
        get { return (Brush)GetValue(WhiteCandleFillProperty); }
        set { SetValue(WhiteCandleFillProperty, value); }
    }

    public static readonly DependencyProperty WhiteCandleFillProperty =
        DependencyProperty.Register("WhiteCandleFill", typeof(Brush), typeof(CandleStickPointMarker), new UIPropertyMetadata(Brushes.White));

    public Brush WhiteCandleStroke
    {
        get { return (Brush)GetValue(WhiteCandleStrokeProperty); }
        set { SetValue(WhiteCandleStrokeProperty, value); }
    }

    public static readonly DependencyProperty WhiteCandleStrokeProperty =
        DependencyProperty.Register("WhiteCandleStroke", typeof(Brush), typeof(CandleStickPointMarker), new UIPropertyMetadata(Brushes.DarkGray));

    public Brush BlackCandleFill
    {
        get { return (Brush)GetValue(BlackCandleFillProperty); }
        set { SetValue(BlackCandleFillProperty, value); }
    }
    public static readonly DependencyProperty BlackCandleFillProperty =
        DependencyProperty.Register("BlackCandleFill", typeof(Brush), typeof(CandleStickPointMarker), new UIPropertyMetadata(Brushes.Black));
    public Brush BlackCandleStroke
    {
        get { return (Brush)GetValue(BlackCandleStrokeProperty); }
        set { SetValue(BlackCandleStrokeProperty, value); }
    }

    public static readonly DependencyProperty BlackCandleStrokeProperty =
        DependencyProperty.Register("BlackCandleStroke", typeof(Brush), typeof(CandleStickPointMarker), new UIPropertyMetadata(Brushes.Gray));
    public CoordinateTransform Transform { get; set; }
    public double High
    {
        get { return (double)GetValue(HighProperty); }
        set { SetValue(HighProperty, value); }
    }

    public static readonly DependencyProperty HighProperty =
        DependencyProperty.Register("High", typeof(double), typeof(CandleStickPointMarker), new UIPropertyMetadata(0.0));

    public double Low
    {
        get { return (double)GetValue(LowProperty); }
        set { SetValue(LowProperty, value); }
    }

    public static readonly DependencyProperty LowProperty =
        DependencyProperty.Register("Low", typeof(double), typeof(CandleStickPointMarker), new UIPropertyMetadata(0.0));

    public double Open
    {
        get { return (double)GetValue(OpenProperty); }
        set { SetValue(OpenProperty, value); }
    }

    public static readonly DependencyProperty OpenProperty =
        DependencyProperty.Register("Open", typeof(double), typeof(CandleStickPointMarker), new UIPropertyMetadata(0.0));

    public override void Render(System.Windows.Media.DrawingContext dc, Point screenPoint)
    {
        Point screenOpen = GetScreenPoint(Open,screenPoint.X);
        Point screenHigh = GetScreenPoint(High,screenPoint.X);
        Point screenLow = GetScreenPoint(Low, screenPoint.X);
        //screenPoint is the CLOSE by gentleman agreement.
        var close = screenPoint.ScreenToData(Transform).Y;
        Pen strokePen;
        if (Open >= close) // black
        {
            strokePen = new Pen(BlackCandleStroke, CandlestickStrokeWidth);
            var h = -screenOpen.Y + screenPoint.Y;
            Rect blkRect = new Rect(screenPoint.X - CandlestickWidth / 2, screenOpen.Y, CandlestickWidth, h);                       
            dc.DrawRectangle(BlackCandleFill,strokePen, blkRect);
            dc.DrawLine(strokePen, screenLow, screenPoint);
            dc.DrawLine(strokePen, screenHigh, screenOpen);
        }
        else // white
        {
            strokePen=new Pen(WhiteCandleStroke, CandlestickStrokeWidth);
            var h = screenOpen.Y - screenPoint.Y;
            Rect whtRect = new Rect(screenPoint.X - CandlestickWidth / 2, screenPoint.Y, CandlestickWidth, h);
            dc.DrawRectangle(WhiteCandleFill, strokePen, whtRect);
            dc.DrawLine(strokePen, screenLow, screenOpen);
            dc.DrawLine(strokePen, screenHigh, screenPoint);
        }
    }

    private Point GetScreenPoint(double Open,double screenX)
    {
        Point screen = new Point(0, Open);
        return new Point(screenX,screen.DataToScreen(Transform).Y);
    }
} 
```

}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T12:56:14.083

我不知道这是否对您有很大帮助，但我想烛台标记应该类似于矩形标记。下面的代码显示了我如何在 D3 中创建一个矩形标记（实际上是一个正方形），使用 Polygon 类，与 CircleElementPointMarker 类似，工具提示功能正常工作。

```
using System;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Shapes;
using System.Windows.Media;

namespace Microsoft.Research.DynamicDataDisplay.PointMarkers
{
    /// <summary>Adds Rectangle element at every point of graph</summary>
    public class RectangleElementPointMarker : ShapeElementPointMarker
    {
        Polygon Rectangle;

        public override UIElement CreateMarker()
        {
            Rectangle = new Polygon();
            Rectangle.Stroke = (Pen != null) ? Pen.Brush : Brushes.White;
            Rectangle.StrokeThickness = (Pen != null) ? Pen.Thickness : 0;
            Rectangle.Fill = Fill;
            Rectangle.HorizontalAlignment = HorizontalAlignment.Center;
            Rectangle.VerticalAlignment = VerticalAlignment.Center;
            Rectangle.Width = Size;
            Rectangle.Height = Size;

            Point Point1 = new Point(-Rectangle.Width / 2, -Rectangle.Height / 2);
            Point Point2 = new Point(-Rectangle.Width / 2, Rectangle.Height / 2);
            Point Point3 = new Point(Rectangle.Width / 2, Rectangle.Height / 2);
            Point Point4 = new Point(Rectangle.Width / 2, -Rectangle.Height / 2);
            PointCollection myPointCollection = new PointCollection();
            myPointCollection.Add(Point1);
            myPointCollection.Add(Point2);
            myPointCollection.Add(Point3);
            myPointCollection.Add(Point4);
            Rectangle.Points = myPointCollection;

            if (!String.IsNullOrEmpty(ToolTipText))
            {
                ToolTip tt = new ToolTip();
                tt.Content = ToolTipText;
                Rectangle.ToolTip = tt;
            }

            return Rectangle;
        }

        public override void SetPosition(UIElement marker, Point screenPoint)
        {

            Canvas.SetLeft(marker, screenPoint.X - Size / 2);
            Canvas.SetTop(marker, screenPoint.Y - Size / 2);
        }
    }
} 
```

代码是在 .NET 4.0、VS2010 上编译的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T18:20:28.530

一种选择是使用`Rectangle`而不是`Rect`.

另一种选择是使用`Path`并将`Data`属性设置为`RectangleGeometry`.

[这是 MSDN 文章`RectangleGeometry`。](http://msdn.microsoft.com/en-us/library/system.windows.media.rectanglegeometry%28v=vs.95%29.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T18:45:20.320

实现这一目标的最简单方法是执行以下步骤：

1.  在您的 dc 区域上方创建一个 Canvas（将其命名为 tooltipLayer）（与 dc 具有相同的宽度、高度和边界）。
2.  对于 dc 中的每个矩形，添加一个画布（将它们命名为 tooltipContainers）到 tooltipLayer。
3.  每个 tooltipContainer 的宽度和高度都等于 0，Margin 等于“X,Y,0,0”，其中 X 和 Y 是其对应矩形的 X 和 Y，并且还有一个边框作为子元素。
4.  每个边框必须与其对应的矩形具有相同的宽度和高度，并将其背景设置为几乎不可见的东西（如“#01000000”）
5.  为每个边框添加工具提示

# google-app-engine - 使用 angularjs 在 appengine 上经过身份验证的应用程序

> ID：13055032
> 
> 赞同：13
> 
> 时间：2012-10-24T18:00:30.303
> 
> 标签：google-app-engine, angularjs

设置：

*   模板：angularjs（全部从 app.yaml 静态提供）
*   api：angularjs 控制器用于从应用程序中提取数据的 json 响应

页面内容由静态文件提供，因此无法使用[users.create_login_url()](https://developers.google.com/appengine/docs/python/users/functions#create_login_url)、[users.create_logout_url()](https://developers.google.com/appengine/docs/python/users/functions#create_logout_url)等。

您通常如何处理用户登录/注销，确定用户是否登录/注销，用户是此类应用程序的管理员？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T05:11:22.190

我实际上正在自己解决这个问题。该项目名为[Sapling——](http://github.com/scotch/sapling)它是一个涵盖用户管理的 AngularJS 入门项目。

这是我采取的方法：

1.  用户来到网站——加载 html 和 javascript

2.  加载 Angular 后`GET`，向`'/api/user/me'`. 如果用户已登录，则返回用户的表示，例如

    ```
    { 
      "name": "Bob",
      "admin": false,
      // ect.
    } 
    ```

    如果用户未登录，则***返回***错误`401`。

3.  如果返回用户对象——检查用户是否也是管理员。如果`401`收到 a 将用户重定向到登录页面（您可以在 Angular 应用程序中创建一个登录页面，或者如果您觉得用户不会感到困惑，您可以直接将它们发送到 Google 登录）。

### 那么，您如何使用 App Engine 的用户服务来做到这一点？

在 URL **'/api/user/me'的请求处理程序中**

打电话`get_current_user()`和`is_current_user_admin()`

*   用户已登录 - 附加管理员`boolean`并将用户的表示形式返回为 json。

*   用户未登录——返回`401`未授权，即`response.set_status(401)`

### 您如何将用户引导到登录和注销 url？

您可以在以下 url 创建请求处理程序：

**'api/用户/登录'**

```
webapp2.redirect(users.create_login_url()) 
```

**'api/用户/注销'**

```
webapp2.redirect(users.create_logout_url()) 
```

并将用户从 Angular 引导至他们。

我认为我涵盖了基础知识。如果您需要更多详细信息，请告诉我。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-24T21:41:49.820

另请参阅此问题： 在提供静态内容时[使用 GAE 限制对静态文件的访问。](https://stackoverflow.com/questions/3692798/limiting-access-to-a-static-file-with-gae)

在您的处理程序中，您可以使用用户服务来找出谁登录了，以及这个“用户”是否是管理员。一个例子：[https ://developers.google.com/appengine/docs/python/users/overview](https://developers.google.com/appengine/docs/python/users/overview)

如果您使用客户端应用程序，OAUTH2 是更好的选择。

# vb.net - 无法从另一个线程向 DataTable 添加行

> ID：13055035
> 
> 赞同：2
> 
> 时间：2012-10-24T18:00:38.313
> 
> 标签：vb.net, multithreading, data-binding, datatable

这是一个代码示例，您需要在表单上`ListBox`调用`list_of_items`，以重现我遇到的问题：

```
Imports System.Threading.Tasks

Public Class Form1
  Dim _dt As DataTable

  Private Sub Form1_Load() Handles MyBase.Load
    _dt = New DataTable
    With _dt.Columns
      .Add("key")
      .Add("value")
    End With
    With list_of_items
      .ValueMember = "key"
      .DisplayMember = "value"
      .DataSource = _dt
    End With
    Dim addItemsTask As New Task(AddressOf AddThreeItems)
    addItemsTask.Start() 'does not add anything when done
    'AddThreeItems() #doing this instead works!
  End Sub

  Private Sub AddThreeItems()
    Threading.Thread.Sleep(2000)
    With _dt.Rows
      .Add({"1", "One"})
      .Add({"2", "Two"})
      .Add({"3", "Three"})
    End With
    Me.Invoke(Sub() Me.Text = "Separate thread is done")
  End Sub
End Class 
```

问题是行确实是物理添加的，所以`DataTable.Rows.Count`增加了，但视觉上没有任何反应。我试过打电话`Refresh`，重置和`DataSource`返回`Nothing`- 它没有帮助。如果我将其切换为单线程处理，则可以使用图示的方法很好地添加行。可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:06:33.157

重新分配数据源

```
Me.Invoke(
    Sub()
        list_of_items.DataSource = Nothing 
        list_of_items.DataSource = _dt 
        Me.Text = "Separate thread is done"
    End Sub
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T18:25:44.293

我在玩`Me.Invoke`，发现如果我使用 同步添加一个虚拟记录`Invoke`，我之前添加的所有记录实际上都会被添加。然后我只需要从`DataTable`. 如果您有更好的解决方案或更优雅的解决方法，或者您可以解释为什么它会这样工作，请随时将其发布为答案。下面是代码现在的样子：

```
Private Sub AddThreeItems()
  Threading.Thread.Sleep(2000)
  With _dt.Rows
    .Add({"1", "One"})
    .Add({"2", "Two"})
    .Add({"3", "Three"})
  End With
  Me.Invoke(Sub()
              _dt.Rows.Add()
              _dt.Rows.RemoveAt(_dt.Rows.Count - 1)
              Me.Text = "Separate thread is done"
            End Sub)
End Sub 
```

# jquery-mobile - JQuery 移动验证

> ID：13055037
> 
> 赞同：0
> 
> 时间：2012-10-24T18:00:49.210
> 
> 标签：jquery-mobile, asp.net-mvc-4

我正在使用 Jquery mobile 和 MVC4 在 VS2010 中开发移动应用程序。您能否告诉我如何在提交时最好地验证下面代码段中的文本框？我只需要检查它是否包含一个值。理想情况下，我想在此 div 下方放置一条错误消息。

```
<div data-theme="a" class="ui-grid-a">
     <div class="ui-block-a">@Html.TextBox("id", "", new { @class = "mystyleclass", onclick = "this.value=''" })</div>   
     <div class="ui-block-b">
          <button type="submit" data-theme="b">Search</button>
     </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T18:09:44.363

如果您使用的是 MVC，此文本框是否连接到模型元素？在这种情况下，在模型中添加上面的 [Required] 标记，使其成为@html.texboxfor，然后在 html 元素下方有一个 validationMessageFor。如果你只是检查那不​​是空的，那么做

```
<script>
$(":button").click(function(){
   if($("#id").val()!=""){
        //whatever you're trying to submit    
   }
   else{
       //show your error message
   }
});
</script> 
```

在 jQuery 中。此外，您可能应该在按钮上使用 id，这样您就不必使用 :button 选择器。

# javascript - 从 json 响应中解析属性

> ID：13055038
> 
> 赞同：-1
> 
> 时间：2012-10-24T18:00:50.157
> 
> 标签：javascript, json, parsing, jsonp

我有以下用于检索 json 响应的代码。我需要提取属性“申请人”并将其放入 html 文本字段。但是我不知道该怎么做。我可以在控制台中看到响应，但文本字段显示 [object Object]，如何将其检索到文本字段？有什么提示吗？谢谢你。

```
<html>
<head>
<script type="text/javascript" 

src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript">

document.getElementById('sudata').value = budata;

}
});
</script>
</head>
<body>
<form name="form1" id="form1">
<input type="text" name="sudata" id="sudata" value="" size="100">
</form>
</body>
</html> 
```

回复在这里：

```
{"ops:world-patent-data": {
  "@xmlns":   {
    "ops": "http://ops.epo.org",
    "$": "http://www.epo.org/exchange",
    "ccd": "http://www.epo.org/ccd",
    "xlink": "http://www.w3.org/1999/xlink"
  },
  "ops:meta":   {
    "@name": "elapsed-time",
    "@value": "31"
  },
  "exchange-documents": {"exchange-document":   {
    "@system": "ops.epo.org",
    "@family-id": "35636806",
    "@country": "EP",
    "@doc-number": "1814517",
    "@kind": "A1",
    "bibliographic-data":     {
      "publication-reference": {"document-id":       [
                {
          "@document-id-type": "docdb",
          "country": {"$": "EP"},
          "doc-number": {"$": "1814517"},
          "kind": {"$": "A1"},
          "date": {"$": "20070808"}
        },
                {
          "@document-id-type": "epodoc",
          "doc-number": {"$": "EP1814517"},
          "date": {"$": "20070808"}
        }
      ]},
      "classifications-ipcr": {"classification-ipcr":       [
                {
          "@sequence": "1",
          "text": {"$": "A61K   9/    08            A I"}
        },
                {
          "@sequence": "2",
          "text": {"$": "A61K  31/    19            A I"}
        },
                {
          "@sequence": "3",
          "text": {"$": "A61K  31/   216            A I"}
        },
                {
          "@sequence": "4",
          "text": {"$": "A61K  47/    00            A I"}
        },
                {
          "@sequence": "5",
          "text": {"$": "C07C  57/    38            A I"}
        },
                {
          "@sequence": "6",
          "text": {"$": "C07C 229/    42            A I"}
        }
      ]},
      "patent-classifications": {"patent-classification":       [
                {
          "@sequence": "1",
          "classification-scheme":           {
            "@office": "EP",
            "@scheme": "EC"
          },
          "classification-symbol": {"$": "A61K9/00M5"}
        },
                {
          "@sequence": "2",
          "classification-scheme":           {
            "@office": "EP",
            "@scheme": "EC"
          },
          "classification-symbol": {"$": "A61K31/19"}
        },
                {
          "@sequence": "3",
          "classification-scheme":           {
            "@office": "EP",
            "@scheme": "EC"
          },
          "classification-symbol": {"$": "A61K31/216"}
        }
      ]},
      "application-reference":       {
        "@doc-id": "16272416",
        "document-id":         [
                    {
            "@document-id-type": "docdb",
            "country": {"$": "EP"},
            "doc-number": {"$": "05808069"},
            "kind": {"$": "A"}
          },
                    {
            "@document-id-type": "epodoc",
            "doc-number": {"$": "EP20050808069"},
            "date": {"$": "20051019"}
          },
                    {
            "@document-id-type": "original",
            "doc-number": {"$": "05808069"}
          }
        ]
      },
      "priority-claims": {"priority-claim":       [
                {
          "@sequence": "1",
          "@kind": "national",
          "document-id":           [
                        {
              "@document-id-type": "epodoc",
              "doc-number": {"$": "WO2005IN00339"},
              "date": {"$": "20051019"}
            },
                        {
              "@document-id-type": "original",
              "doc-number": {"$": "IN2005000339"}
            }
          ]
        },
                {
          "@sequence": "2",
          "@kind": "national",
          "document-id":           [
                        {
              "@document-id-type": "epodoc",
              "doc-number": {"$": "IN2004DE02332"},
              "date": {"$": "20041122"}
            },
                        {
              "@document-id-type": "original",
              "doc-number": {"$": "DE23322004"}
            }
          ]
        }
      ]},
      "parties":       {
        "applicants": {"applicant":         [
                    {
            "@sequence": "1",
            "@data-format": "epodoc",
            "applicant-name": {"name": {"$": "VENUS REMEDIES LTD [IN]"}}
          },
                    {
            "@sequence": "1",
            "@data-format": "original",
            "applicant-name": {"name": {"$": "VENUS REMEDIES LIMITED"}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T20:40:00.480

您的`budata`变量包含一个数组。你的元素的`value`属性是一个字符串属性，所以当你给它分配一个对象时，对象首先被转换为 Object::toString(); 这将返回`[object Object]`。

如果您尝试显示申请者属性的全部内容，请尝试：

```
document.getElementById( 'sudata' ).value = JSON.stringify( budata ); 
```

如果您只想显示数组的特定部分，则必须指定预期的输出字符串是什么。

# javascript - Rails 3 在文件夹之间拖放

> ID：13055046
> 
> 赞同：1
> 
> 时间：2012-10-24T18:01:10.297
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3

当我单击同一页面上的文件夹时，我的应用程序中有树状结构，例如文件夹，它将通过 ajax 调用显示该文件夹下的所有文件。

文件夹有很多文件。

所以现在我的问题是，我想将文件从一个文件夹拖到另一个文件夹。因此，如果我拖动的文件 folder_id 是 1，当我将它放到文件夹 2 时，在后端它应该更新为 folder_id= 2

我没有任何想法这样做，

1.  如何使用户能够将文件拖放到任何文件夹中
2.  一旦他拖放，我应该如何在后端更新

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T18:03:19.580

jQuery 会很好地做到这一点。看看这两页——

[http://jqueryui.com/draggable/](http://jqueryui.com/draggable/)

[http://jqueryui.com/droppable/](http://jqueryui.com/droppable/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T18:06:54.630

您也可以使用分机。[http://docs.sencha.com/ext-js/4-1/#!/example/tree/reorder.html](http://docs.sencha.com/ext-js/4-1/#!/example/tree/reorder.html)

更新后端的方式是通过传递树的当前状态的简单 Ajax 调用。

# c - 除了混淆矩阵之外，还有哪些其他形式的评估？

> ID：13055051
> 
> 赞同：5
> 
> 时间：2012-10-24T18:01:37.733
> 
> 标签：c, algorithm, matlab, machine-learning, confusion-matrix

*家庭作业*

除了混淆矩阵之外，我还需要其他形式的评估来可视化算法的性能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T18:12:01.303

[精度与召回曲线](http://en.wikipedia.org/wiki/Precision_and_recall)也很好（也在[这里](http://demonstrations.wolfram.com/ThePrecisionRecallCurveInInformationRetrievalEvaluation/)）。

如果它类似于回归，许多统计人员建议将其绘制为数据顶部的拟合曲线，或者如果拟合曲线是高维的，则可能是拟合曲线的许多不同的二维投影。还建议对置信区间和事物进行加权，以使它们比绘图的其他部分显示得更暗，根据事物的可能性降低视觉上的权重。这是 Andrew Gelman 最近发表的一篇文章：（[链接](http://andrewgelman.com/2012/08/graphs-showing-uncertainty-using-lighter-intensities-for-the-lines-that-go-further-from-the-center-to-de-emphasize-the-edges/)）

如果您正在制作生成模型，例如计算贝叶斯后验分布，那么[后验预测检查](http://learnbayes.blogspot.com/2007/10/illustration-of-posterior-predictive.html)是一个不错的选择。如果您要进行回归，请不要低估汇总系数和值的表的`R^{2}`值。

如果您的数据自然适合某个域的顶部，例如 xy 平面的一部分，或者您有美国每个州的数据等，那么尝试将您的数据覆盖在该域之上总是好的。制作一个显示数据分布的图（例如直方图，但如果它是问题域的某些视觉上有意义的部分之上的密度，通常会更好），然后使用算法的输出复制相同的精确图。从视觉上看，数据分布和算法输出之间的严重差异会引起人们对算法无法正确推理的地方的注意。

这真的是关键。目标是有效的推理，而不是达到相对较少的分类错误等。如果你得到很好的分类错误，但你的方法过度拟合，它可能会出现在其中一些类型的图中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T18:27:18.897

如果它是一个二元分类问题并且如果您有一个分类器参数可以改变以获得不同的结果，则一种常见的方法是使用 ROC 曲线 ( [http://en.wikipedia.org/wiki/Receiver_operating_characteristic )。](http://en.wikipedia.org/wiki/Receiver_operating_characteristic)如果它不是二元分类问题，您仍然可以为每个标签（类）计算 ROC 曲线

# jquery - Chrome中相对定位的div上的绝对定位元素

> ID：13055052
> 
> 赞同：0
> 
> 时间：2012-10-24T18:01:39.187
> 
> 标签：jquery, html, css, css-position

我发现 Chrome 在相对定位的 div 上显示绝对定位元素的方式有所不同

这是一些标记：

```
<div id="maincontent">
<table id="mainTable">
   <tr class="menuRow">
       <td >
            <div id="menu">
                <ul id="panel">
                    <li>Option 1</li>                                     
                    <li>Option 2</li>                                     
                    <li>Option 3</li>                                     
                </ul>    
            </div>
     </td>
    </tr>
    <tr>
        <td class="contentRow">
            <div id="content" >

            </div>
       </td>
    </tr>
</table> 
```

CSS：

```
#maincontent { width: 100%; }
#mainTable { width: 100%; }
#menu { position: fixed; background-color: green; 
width: 30px; height: 30px; cursor:     pointer; }
#panel{ position: absolute; height: 150px; width: 100px;
 background-color: red;     display:none; z-index:10; }
#content { margin-top: 30px; height: 300px; width:300px;
 background-color: #00F; position:relative;}​ 
```

[我在这里](http://jsfiddle.net/sU66E/1/)整理了一个示例，显示了我的问题。（如果您将鼠标移到绿色框上，则会显示红色“菜单”）

在 IE 和 Firefox 中，我在蓝色内容上正确地看到了它。在 Chrome 中，“菜单”显示在内容后面。有什么方法可以让 Chrome 使用这个功能吗？

非常感谢，欢迎任何反馈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:03:30.357

是的，在 z-index 上增加`#menu`：

```
#menu { 
    position: fixed; 
    background-color: green; 
    width: 30px; 
    height: 30px; 
    cursor: pointer; 
    z-index: 9999;
 } 
```

[http://jsfiddle.net/Ezn4v/](http://jsfiddle.net/Ezn4v/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T18:05:06.207

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T18:05:38.697

You need to set the **z-index** for parent

```
#menu {z-index:11 }; 
```

[Check Fiddle](http://jsfiddle.net/sushanth009/sU66E/3/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T18:06:32.647

Just add a z-index to the menu, then it will work correctly for everyone.

```
#menu {z-index:2; position: fixed; background-color: green; width: 30px; height: 30px; cursor: 
```

[http://jsfiddle.net/sU66E/2/](http://jsfiddle.net/sU66E/2/)

# eclipse-juno - Eclipse Juno 停靠窗口

> ID：13055057
> 
> 赞同：1
> 
> 时间：2012-10-24T18:01:52.870
> 
> 标签：eclipse-juno

一个月前我开始使用 eclipse Juno，但仍然无法习惯滑动、弹出停靠窗口。特别是当您调试并命中断点时，一对停靠的窗口会弹出并且焦点会丢失。有没有办法抑制这种烦人的行为？

# ruby - rvm 和 bundle 在 Ubuntu 12.10 中安装：Errno::EACCES

> ID：13055062
> 
> 赞同：3
> 
> 时间：2012-10-24T18:02:23.020
> 
> 标签：ruby, rvm

希望您能够帮助我。我正在使用 ruby​​、rails 和全部安装 rvm，我之前已经做过很多次了，通常遵循这个很好的教程 [http://ryanbigg.com/2010/12/ubuntu-ruby-rvm-rails-and -你/](http://ryanbigg.com/2010/12/ubuntu-ruby-rvm-rails-and-you/)

一切似乎都很好，但是当我尝试运行捆绑安装时收到此消息（实际上整个下午都在工作）：

```
ERROR: Gem bundler is not installed, run `gem install bundler` first. 
```

如果我按照它说的去做，我会得到：

```
ERROR:  While executing gem ... (Errno::EACCES)
Permission denied - /var/lib/gems 
```

有什么建议吗？

PS：我还注意到，当我安装 ruby​​ 时，我收到如下消息：

```
No binary rubies available for: ubuntu/12.10/x86_64/ruby-1.9.3-p286. 
```

PPS：结果

```
which [gem|ruby|rails] 
```

指向 usr/bin/ruby。我注意到的是，如果我这样做

```
. ~/.bash_profile 
```

然后哪个 gem 指向我的家，我可以捆绑安装。如果我重新启动，我必须这样做。~/.bash_profile 再次...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T18:18:25.623

从教程：

> 在任何情况下，您都不应从 apt-get 安装 Ruby、Rubygems 或任何与 Ruby 相关的软件包。这个系统已经过时，并导致严重的头痛。对于与 Ruby 相关的软件包，请避免使用它。我们做 Ruby，我们知道什么是最好的。相信我们。

因此，首先，在包管理器中查找所有相关包（ruby、rubygems 甚至 rvm）并确保它们已完全删除，然后再次尝试本教程。

如果你做的一切都正确，`which [gem|ruby|rails]`应该都指向你的主文件夹中的文件，而不是其他任何地方。

# php - 避免使用受约束的 INSERT 循环 MySQL 查询

> ID：13055065
> 
> 赞同：1
> 
> 时间：2012-10-24T18:02:32.093
> 
> 标签：php, mysql

我理解为什么我们不应该循环 MySQL 查询并且我试图避免它。我有一个数组`$names`，其中包含要插入的关键字列表，对 MySQL 字段`someTable`有一个约束：`UNIQUE``name`

```
mysql> select * from someTable where name='stress';
+-----+--------+
| id  | name   |
+-----+--------+
| 143 | stress |
+-----+--------+
1 row in set (0.00 sec)

mysql> insert into someTable (name) values ('stress');
ERROR 1062 (23000): Duplicate entry 'stress' for key 'name'
mysql> 
```

我希望使用以下类型的查询来避免循环：

```
$result = mysql_query("insert into someTable (name) values ('firstName'), ('secondName'), ('thirdName')"); 
```

但是，如果任何名称已经存在，则不会插入任何值。此外， 的值`$result`将是`FALSE`。**如何构造一个查询来插入值，如果它们中的任何一个存在则不会失败，如果插入其中任何一个将返回`TRUE`？**

我知道我可以为此编写一个存储过程，但这只会将循环从 PHP 移动到 MySQL。除了带宽（这在本地主机上并不重要）之外，似乎没有任何保存。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T18:05:33.303

```
INSERT IGNORE INTO someTable (name) values ('firstName'), ('secondName'), ('thirdName') 
```

如果有重复，它将忽略并继续。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T18:05:34.787

使用忽略。

例子： `insert ignore into someTable (name)...`

# c++ - 快速排序失败并出现 OOB 错误

> ID：13055066
> 
> 赞同：1
> 
> 时间：2012-10-24T18:02:32.297
> 
> 标签：c++, quicksort

我有一个 QuickSort 的实现，它因索引越界错误而失败，我不知道为什么。

```
unsigned long PerformQuickSort(std::vector<unsigned int>& values) {
    unsigned long comparisons = 0;
    QuickSortJoiner(values, 0, values.size() - 1, comparisons);
    return comparisons;
}

void QuickSortJoiner(std::vector<unsigned int>& values, std::size_t first, std::size_t last, unsigned long& comparisons) {

    if(first >= last) return;

    std::size_t pivot = first + (last - first) / 2;
    std::size_t newPivot = QuickSortPartitioner(values, first, last, pivot, comparisons);
    QuickSortJoiner(values, first, newPivot - 1, comparisons);
    QuickSortJoiner(values, newPivot + 1, last, comparisons);

}

std::size_t QuickSortPartitioner(std::vector<unsigned int>& values, std::size_t first, std::size_t last, std::size_t pivot, unsigned long& comparisons) {
    unsigned int value = values[pivot];
    Swap(values[pivot], values[last]);
    std::size_t storeAt = first;
    for(std::size_t i = first; i < last; ++i) {
        ++comparisons;
        if(values[i] < value) {
            Swap(values[i], values[storeAt]);
            ++storeAt;
        }
    }
    Swap(values[storeAt], values[last]);
    return storeAt;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T18:18:02.113

当`newPivot`变为 0 时，下一次调用`newPivot - 1`无符号类型将溢出到最大值。检查`newPivot == 0`后`QuickSortPartitioner`

# ruby-on-rails - 将 rake-pipeline 与 Rails 资产路径集成

> ID：13055067
> 
> 赞同：2
> 
> 时间：2012-10-24T18:02:33.773
> 
> 标签：ruby-on-rails, ember.js, asset-pipeline

有没有将 rake-pipeline 与 Rails 资产路径集成的好方法？

具体来说，我正在尝试将 gem 中的 JS 文件与我在 app/assets 中的文件捆绑在一起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:03:51.760

您可以在环境配置中自定义预编译资产源 - 例如，*（默认情况下）*在`config/environments/production.rb`：

```
App::Application.configure do
  #...

  config.assets.precompile += %w( ember.js your_additional_gem_asset.js )

  #...
end 
```

*您的额外 gem 资产参考可能包括相对`assets`目录路径。*

# bash - BASH - 快速网络设置命令 Q

> ID：13055068
> 
> 赞同：0
> 
> 时间：2012-10-24T18:02:41.613
> 
> 标签：bash, shell, unix

当我通过 bash 脚本运行以下命令时，它会失败，但是如果我复制每个回显的语句并将它们粘贴到终端中，它就可以工作......

```
networksetup -listallntworkservices | while read line; do networksetup -setautoproxy '"'$line'"' http://etc... 
```

理想情况下，我只想为名称中包含“以太网”或“Wi-fi”的网络服务运行上述命令。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T18:15:58.260

因为我不知道您的命令的输入是什么：尝试`'"'$line'"'`通过`"$line"`or更改`"'$line'"`。

为避免在 case 变量中包含空格的 shell 扩展，在将参数传递给命令时，始终使用双引号变量。

如果变量内部需要双引号，这应该有效：`"\"$line\""`

过滤与以太网或 Wi-fi 匹配的线路

```
networksetup -listallntworkservices |
  while read line; do
    if [[ $line =~ (Ethernet|Wi-fi) ]]; then
      networksetup -setautoproxy "$line" http://etc.
    fi
  done 
```

# google-analytics - 谷歌分析显示与附属报告截然不同的结果

> ID：13055069
> 
> 赞同：2
> 
> 时间：2012-10-24T18:02:47.460
> 
> 标签：google-analytics, web-traffic, commission-junction

我有一个优惠券附属网站，每天在 Commission Junction 和其他附属网站上显示 50-100 次点击。我网站中内置的脚本会记录每个优惠的查看次数和点击次数。这相当于附属程序正在录制的内容。

问题是谷歌分析每天只显示少数访问和浏览量。与我的现场和附属计划所展示的内容相去甚远。

这怎么可能？什么会导致差异？谷歌分析有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T10:30:44.760

如果出站点击关闭，则可能是在重定向窗口之前没有触发跟踪事件的问题。Cardinal Path 在这里对此进行了很好的研究（也请阅读评论）：

[CardinalPath：实验：Google Analytics 中的 onClick 与 onMouseDown 事件跟踪](http://www.cardinalpath.com/experiment-onclick-vs-onmousedown-event-tracking-in-google-analytics/)

对于出站链接，请尝试将`rel="nofollow"`标签添加到您的出站链接，以确保它们不会被所述爬虫点击。

如果 GA 和您的服务器之间的综合浏览量关闭，请记住，您被不运行 javascript 的机器人抓取，因此不会将信息发送回 Google Analytics。换句话说，您的服务器可能会在 googlebot 编制索引时向它发送一个页面（从而增加您的数据库综合浏览量 +1），但它不会发送到 GA（因此服务器计数将始终更高）。

最后，确保您的个人资料过滤器不排除任何相关流量：[Google Analytics（分析）个人资料过滤器](http://support.google.com/analytics/bin/answer.py?hl=en&answer=1033162)

# r - 是否可以使用 zelig 包预测时间序列数据

> ID：13055070
> 
> 赞同：0
> 
> 时间：2012-10-24T18:03:02.173
> 
> 标签：r, r-zelig

我正在尝试使用 zelig r 包来做一些预测和模拟图：

```
dput(x)
structure(list(Date = structure(c(14640, 14668, 14699, 14729, 
14760, 14790, 14821, 14852, 14882, 14913, 14943, 14974, 15005, 
15033, 15064, 15094, 15125, 15155, 15186, 15217, 15247, 15278, 
15308, 15339, 15370, 15399, 15430, 15460, 15491, 15521, 15551, 
15582, 15611), class = "Date"), Records = c(44560938, 40227158, 
46674885, 45379535, 47051792, 51301979, 47659151, 50002855, 47952955, 
49681927, 51569764, 58513754, 62200793, 54645673, 61465915, 57829119, 
58410815, 64874812, 59066293, 71056318, 67101651, 62214988, 63183320, 
66750198, 61483322, 67546775, 75290893, 60713372, 77879142, 70290302, 
83201853, 83837301, 68110825)), .Names = c("Date", "Records"), class = "data.frame", row.names = c(NA, 
33L)) 
```

当我这样做时：

```
z.out1 <- zelig(Records~Date, model = "logit", data = x) 
```

我得到所有这些错误：

```
The following object(s) are masked from 'env (position 4)':

    ..., data, formula, robust, w, weights
The following object(s) are masked from 'env (position 6)':

    ..., data, formula, robust, w, weights
The following object(s) are masked from 'env (position 8)':

    ..., data, formula, robust, w, weights
The following object(s) are masked from 'env (position 10)':

    ..., data, formula, robust, w, weights
The following object(s) are masked from 'env (position 12)':

    ..., data, formula, robust, w, weights
The following object(s) are masked from 'd.f (position 4)':

    Date, Records
The following object(s) are masked from 'd.f (position 6)':

    Date, Records
The following object(s) are masked from 'd.f (position 8)':

    Date, Records
The following object(s) are masked from 'd.f (position 10)':

    Date, Records
The following object(s) are masked from 'd.f (position 12)':

    Date, Records
Error in eval(expr, envir, enclos) : y values must be 0 <= y <= 1 
```

有人用zelig处理时间序列数据吗？

# svn - Ankh SVN：将代码复制到新分支而不签入当前分支

> ID：13055074
> 
> 赞同：0
> 
> 时间：2012-10-24T18:03:18.763
> 
> 标签：svn, merge, ankhsvn

我们所有的开发都是通过一个分支完成的，其中一个分支与要发布的版本相关。有时，我们开始在最新的分支中工作，但由于某种原因，一个新的次要分支被打开了。现在，我发现自己处于这个位置。由于我正在处理的工作，我没有将其签入原始分支，并且我不知道如何将我的代码移动到新分支。说得通？

换一种方式问：

*   结帐 v1.16.0
*   做本地工作（不签到）
*   v1.16.0 进入代码冻结状态
*   结帐 v1.16.1
*   ？？？- 如何将 v1.16.0 中的本地更改移动到 v1.16.1？

我计划使用 BeyondCompare，因为我知道需要移动内容的文件。希望有一种 SVN（Ankh SVN）的方式来代替。这**不是**合并，因为 v1.16.0 从未被签入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:09:30.770

你可以执行

svn 开关 v1.16.1

这会更改您的分支，但会保留您的本地更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T20:59:23.600

经过大量搜索，我认为[这篇博客文章](http://jason.famularo.org/post/14391495296/simulating-tfs-shelvesets-in-subversion)涵盖了它。虽然此博客试图解决 SVN 中的搁置集，但创建补丁文件的做法仍然可行。我在我的 Visual Studio 中使用 Ankh SVN。该博客条目展示了如何从 Tortoise SVN 执行此操作。这是我迄今为止发现的笔记：

1.  在 Ankh 和 Subversion 中，您都可以创建补丁（基本上是本地保存的差异）
2.  只有在 Tortoise 中，您才能将补丁应用到您的本地代码中。我还没有在 Ankh 中找到一种方法来做到这一点。

# r - R randomForest子集无法摆脱因子水平

> ID：13055076
> 
> 赞同：3
> 
> 时间：2012-10-24T18:03:23.300
> 
> 标签：r, random-forest

> **可能重复：**
> [在 R 中的子集数据框中删除因子级别](https://stackoverflow.com/questions/1195826/dropping-factor-levels-in-a-subsetted-data-frame-in-r)

我正在尝试使用 randomForest 来预测销售额。我有 3 个变量，其中一个是 storeId 的因子变量。我知道测试集中有一些级别不在训练集中。我正在尝试仅对训练集中存在的级别进行预测，但无法让它超越新的因子级别。

这是我到目前为止所尝试的：

```
require(randomForest)
train <- data.frame(sales = runif(10)*1000, storeId = factor(seq(1,10,1)), dat1 =runif(10), dat2 = runif(10)*10)
test <- data.frame(storeId = factor(seq(2,11,1)), dat1 =runif(10), dat2 = runif(10)*10)

> train 
      sales storeId      dat1     dat2
1  414.7791       1 0.7830092 7.178577
2  719.5965       2 0.9512138 6.153049
3  887.3197       3 0.6879827 5.413556
4  706.5828       4 0.4486214 4.955400
5  326.8189       5 0.0944885 6.900802
6  840.5920       6 0.1917165 8.044636
7  936.2206       7 0.2173074 4.835064
8  244.6947       8 0.6526765 6.516790
9  818.8747       9 0.3317644 9.651675
10 631.6104      10 0.6998037 8.443972
> test 
   storeId      dat1     dat2
1        2 0.7513645 3.442052
2        3 0.2862487 3.196189
3        4 0.4971865 6.074281
4        5 0.8631945 8.766129
5        6 0.3848105 5.001426
6        7 0.9032262 7.018274
7        8 0.1560501 4.523618
8        9 0.3461597 5.551672
9       10 0.1318464 3.092640
10      11 0.6587270 1.348623

> RF1 <- randomForest(train[,c("storeId","dat1","dat2")], train$sales, do.trace=TRUE,
+ importance=TRUE,ntree=5,,forest=TRUE)
     |      Out-of-bag   |
Tree |      MSE  %Var(y) |
   1 | 2.915e+05   544.44 |
   2 | 1.825e+05   340.84 |
   3 |  2.1e+05   392.19 |
   4 | 1.914e+05   357.38 |
   5 | 1.809e+05   337.78 |
> pred <- predict(RF1, test)
Error in predict.randomForest(RF1, test) : 
  New factor levels not present in the training data 
```

这部分是有道理的。

所以我试试这个：

```
> test2 <- test[test$storeId != 11,]
> pred <- predict(RF1, test2)
Error in predict.randomForest(RF1, test2) : 
  New factor levels not present in the training data 
```

所以我试试这个：

```
> levels(test2$storeId)
 [1] "2"  "3"  "4"  "5"  "6"  "7"  "8"  "9"  "10" "11" 
```

“11”级还在里面。

接下来我试试这个：

```
> test2$storeId <- as.numeric(as.character(test2$storeId))
> test2$storeId <- factor(test2$storeId)
> pred <- predict(RF1, test2)
Error in predict.randomForest(RF1, test2) : 
  Type of predictors in new data do not match that of the training data. 
```

尽管这里看起来还不错：

```
> levels(test2$storeId)
[1] "2"  "3"  "4"  "5"  "6"  "7"  "8"  "9"  "10" 
```

有什么建议可以让它在没有“11”级别的商店上进行预测？

编辑：

```
> test2$storeId <- as.factor(as.character(test2$storeId))
> pred <- predict(RF1, test2)
Error in predict.randomForest(RF1, test2) : 
  Type of predictors in new data do not match that of the training data.
> 
> test2$storeId <- drop.levels(test2$storeId)
> pred <- predict(RF1, test2)
Error in predict.randomForest(RF1, test2) : 
  Type of predictors in new data do not match that of the training data.

> str(train)
'data.frame':   10 obs. of  4 variables:
 $ sales  : num  800 679 589 812 384 ...
 $ storeId: Factor w/ 10 levels "1","2","3","4",..: 1 2 3 4 5 6 7 8 9 10
 $ dat1   : num  0.5148 0.5567 0.9871 0.0071 0.736 ...
 $ dat2   : num  8.501 2.994 2.948 0.519 1.746 ...
> str(test)
'data.frame':   10 obs. of  3 variables:
 $ storeId: Factor w/ 10 levels "2","3","4","5",..: 1 2 3 4 5 6 7 8 9 10
 $ dat1   : num  0.0975 0.7435 0.7055 0.2085 0.2944 ...
 $ dat2   : num  5.96 6.84 3.96 8.93 8.62 ...
> str(test2)
'data.frame':   9 obs. of  3 variables:
 $ storeId: Factor w/ 9 levels "2","3","4","5",..: 1 2 3 4 5 6 7 8 9
 $ dat1   : num  0.0975 0.7435 0.7055 0.2085 0.2944 ...
 $ dat2   : num  5.96 6.84 3.96 8.93 8.62 ... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T19:13:21.090

这实际上是重复的。您应该使用`droplevels`，然后在解决该问题后，您忽略了级别仍然没有对齐的事实。您只需更改级别，使其与训练数据中的相同：

```
test1 <- droplevels(subset(test,storeId != 11))
levels(test1$storeId) <- as.character(c(2:10,1)
pred <- predict(RF1, test1)
> pred
       1        2        3        4        5        6        7        8        9 
698.9186 703.9761 654.5370 561.3058 491.1836 736.4316 639.8752 586.1755 782.1186 
```

这里的寓意很简单，您的训练数据具有级别 1,2,...10 的因子，您的测试数据必须具有完全相同的级别集（无论您是否有某些级别的任何数据）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T19:39:26.577

与 rf 模型相比，您不能对缺少因子的新数据运行 randomForest 预测函数。由于 test$storeId 的因子级别范围为“2”-“11”，而 train$storeId 为“1”-“10”，当您在测试数据中删除级别 11 时，您仍然缺少级别“1”，因此 randomForest 预测失败了。

# ios - 从 UIImageView 保存图像文件

> ID：13055077
> 
> 赞同：0
> 
> 时间：2012-10-24T18:03:29.473
> 
> 标签：ios

我正在尝试`UIImageView`按以下方式保存图像：

```
NSString  *pngfile = [NSHomeDirectory() stringByAppendingPathComponent:@"Library/file.png"];
[UIImagePNGRepresentation(image) writeToFile:pngfile atomically:YES]; 
```

一切都在正确保存。我的问题是，Apple 会不会有问题说这个文件需要标记以便它不会被备份？我正在阅读此页面的示例：

[为什么我的应用程序在使用此代码从 iCloud 备份中排除文件后仍然被拒绝？](https://stackoverflow.com/questions/10588652/why-was-my-application-still-rejected-after-excluding-files-from-icloud-backup-u)

还有其他几页。但是在这种情况下保存这个图像是否有必要？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T01:09:13.133

您保存的图像文件的平均大小是多少？我发现使用 writeToFile 保存图像通常会产生大文件（比预期的要大）。您可以在存储后检查文件大小。

# jpa - 与@ElementCollection 的三元关系 - 左连接获取行为不端

> ID：13055079
> 
> 赞同：3
> 
> 时间：2012-10-24T18:03:32.430
> 
> 标签：jpa, eclipselink, bidirectional-relation

JPA 2、Eclipse 链接 2.3.2

我试图用 two`@ElementCollection`而不是 two的三元关系建模，`@OneToMany`主要是这样我可以使联结对象 an`@Embeddable`而不是 @Entity 并避免嵌套对象需要 an `@Id`。

例如

```
@Entity
public class Project {
   @ElementCollection
   @CollectionTable(name="assignment", joinColumns=@JoinColumn(name="project_id"))
   public Set<Assignment> assignments;
}

@Entity
public class Employee {
   @ElementCollection
   @CollectionTable(name="assignment", joinColumns=@JoinColumn(name="employee_id"))
   public Set<Assignment> assignments;
}

@Embeddable
public class Assignment {
  @ManyToOne
  @JoinColumn(name="employee_id")
  public Employee employee;

  @ManyToOne
  @JoinColumn(name="project_id", insertable=false, updatable=false)
  public Project project;
} 
```

为了坚持，我将`Assignment`实例添加到`Project`实例中，参考右边的`Employee`. 这工作正常。

此外，我也可以通过就好了来引用`Project`s的列表。`Employee`

*但是*`left join fetch`，如果我使用类似的查询加载员工，*即使*我可以看到数据库查询实际上正在执行连接并且数据正在返回`select e from Employee e left join fetch e.assignments`，关联的分配/项目对象也不会被加载。

 *上述映射以某种方式无法`left join fetch`正确交互的原因是什么？

我用过`left join fetch`更简单的`@ElementCollection`映射没有问题，所以我想知道问题是什么。

谢谢！*

# php - Mysql，在表单循环中删除行

> ID：13055080
> 
> 赞同：1
> 
> 时间：2012-10-24T18:03:33.237
> 
> 标签：php, mysql, database

我现在不知道我的错误在哪里，我的代码如下：

```
<?php

mysql_set_charset('utf8');
$result = mysql_query("SELECT * FROM obedy ORDER BY datum DESC LIMIT 30");
while ($row = mysql_fetch_array($result, MYSQL_NUM)) 
{
    $time = strtotime( $row[0] );
    $myDate = date( 'd.m.', $time );
    $w_day = date( 'N', $time );
    $ww_day = $w_day-1;
    $the_row= $row[0];

    echo "<p>" . $myDate . "&emsp;";
    echo "<input type='hidden' value='$row[0]' name='tdel'>";
    echo "<input type='text' name='menu1' id='menu1' class='input' value='". $row[1] ."' size='37'/>";
    echo "<input type='text' name='menu2' id='menu2' class='input' value='". $row[2] ."' size='37'/>";
    echo "<input type='text' name='menu3' id='menu3' class='input' value='". $row[3] ."' size='37'/>";
    echo "<input type='submit' formaction='del_menu.php' class='button' value='Smazat' />";
    echo "</p>";                    
}

mysql_free_result($result);

?> 
```

del_menu.php

```
<?php

$huh = mysql_connect("juxcore.ipagemysql.com", "*", "*") or
die("Could not connect: " . mysql_error());

mysql_select_db("jux_mms");
mysql_set_charset('utf8');

$watta="DELETE FROM obedy WHERE datum = '$_POST[tdel]'";

if (!mysql_query($watta,$huh))
{
    die('Error: ' . mysql_error());
}

header('Location: http://www.juxcore.com/x/vita/menu.php'); 
```

问题是，我不知道为什么它会删除最后显示的行，而不是点击的那一行。任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T18:07:44.350

你应该使用`<form>`标签：

```
echo "<form action='del_menu.php' method='post'><p>" . $myDate . "&emsp;";
echo "<input type='hidden' value='".$row[0]."' name='tdel'>";
echo "<input type='text' name='menu1' id='menu1_".$row[0]."' class='input' value='". $row[1] ."' size='37'/>";
echo "<input type='text' name='menu2' id='menu2_".$row[0]."' class='input' value='". $row[2] ."' size='37'/>";
echo "<input type='text' name='menu3' id='menu3_".$row[0]."' class='input' value='". $row[3] ."' size='37'/>";
echo "<input type='submit'  class='button' value='Smazat' />";
echo "</p></form>"; 
```

问题是您只能在一种形式中拥有一个具有相同名称的项目。如果您使用多个具有相同名称的项目，则只有最后一个定义的项目会通过。您可以使用多种形式来解决这个问题。

# c# - 在 Visual Studio 2010/VSTO 4.0 中根据 Outlook (2007/2010) 版本初始化功能区

> ID：13055081
> 
> 赞同：3
> 
> 时间：2012-10-24T18:03:38.790
> 
> 标签：c#, visual-studio-2010, .net-4.0, vsto, outlook-addin

我正在使用 Visual Studio 2010、VSTO 4.0 为 2007/2010 创建 Outlook 加载项

我有 3 个项目：

*   2010Ribbon（Ribbon1.cs、Ribbon2.cs）
*   2007Ribbon（Ribbon1-2007.cs，Ribbon2-2007.cs）
*   共享代码（类库）

我只是想根据版本加载正确版本的功能区（DESIGNER）

```
 private void ThisAddIn_Startup(object sender, System.EventArgs e)
    {
        majorVersion = Globals.ThisAddIn.Application.Version.Split(new char[] { '.' })[0];
        if (majorVersion == 12) //Outlook 2007
        {
            Initialize2007UI();  
        }
        else if (majorVersion >= 14) //Outlook 2010
        {
            Initialize2010UI();   
        }
    } 
```

如何实现 Initialize2007UI() 和 Initialize2010UI(); 在资源管理器窗口中加载它们各自的 Ribbon1.cs，在 Inspector 窗口中加载 Ribbon2.cs？

谢谢！！！！

希望我清楚我在问什么：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T02:32:36.103

可能这就是您要寻找的

```
protected override Office.IRibbonExtensibility CreateRibbonExtensibilityObject()
{
    majorVersion = Globals.ThisAddIn.Application.Version.Split(new char[] { '.' })[0];
        if (majorVersion == 12) //Outlook 2007
        {
             return new Ribbon2007();
        }
        else if (majorVersion >= 14) //Outlook 2010
        {
            return new Ribbon2010();
        }

}

[ComVisible(true)]
public class Ribbon2007: Office.IRibbonExtensibility
{
    public string GetCustomUI(string ribbonID)
        {
                    var ribbonXml = GetResourceText("Ribbon2007.xml");                 
                    XNamespace nameSpace = @"http://schemas.microsoft.com/office/2006/01/customui";                  
                    return ribbonXml;
    }
}

[ComVisible(true)]
public class Ribbon2007: Office.IRibbonExtensibility
{
    public string GetCustomUI(string ribbonID)
        {
            var ribbonXml = GetResourceText("Ribbon2010.xml");                 
                    XNamespace nameSpace = @"http://schemas.microsoft.com/office/2009/07/customui";                  
                    return ribbonXml;
    }
} 
```

# tfs - TFS 2012 Express 权限继承 - 并非所有权限都从组继承

> ID：13055082
> 
> 赞同：1
> 
> 时间：2012-10-24T18:03:42.723
> 
> 标签：tfs, permissions, sysadmin

谁能解释为什么不继承所有 Team Foundation Server 2012 Express 权限？是预期的 TFS 行为吗？

我希望添加到项目集合管理员组（最强大的组）的用户具有继承的所有权限，而实际上他没有：

![tfs 权限](../Images/4da84d733733544624be48888c02f27a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T18:02:29.950

请参阅[http://msdn.microsoft.com/en-us/library/ms252587(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/ms252587(v=vs.90).aspx)

“未设置”仅表示给定用户的权限是从其父组继承的。它们只是没有在此节点上明确设置。

# mysql - 计算数百万行的不同值——适用于 NoSQL？

> ID：13055083
> 
> 赞同：1
> 
> 时间：2012-10-24T18:03:49.903
> 
> 标签：mysql, database, count, nosql

我有一个使用 MySQL 数据库的 Web 应用程序，该数据库有大约十几个列，以及数百万条用单字符代码编码的记录。`WHERE`可以通过添加子句来查询横截面：

`SELECT col1, COUNT(col1) AS num FROM my_table WHERE col2='U' GROUP BY col1`

每个页面进行大约十几个此类查询，每列一个查询减去`WHERE`子句中指示的查询。

我确实有一个缓存系统，但是数据每天都在更新（添加数十万条记录），并且最初生成缓存的过程很慢。我仍在尝试围绕 NoSQL 的想法进行思考，似乎它有很多不同的范例。因此，鉴于每条记录都遵循相同的格式，没有`JOIN`s，这是否适合过渡到 NoSQL 数据库？如果是这样，您会推荐哪一种（或哪种）？

编辑：我应该补充一点，它需要与 PHP 兼容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T19:35:23.820

这是个好问题。

以我的经验，处理数百万行总是很棘手

我认为实现这一目标的最佳方法是使用为处理此类查询而构建的特定数据库。

默认情况下，MySQL 是面向行的，旨在用作事务数据库 (OLTP)，这意味着它可以快速插入、更新、删除少量行。但是，它并非旨在处理具有此类查询的大型数据集。因此，计算数百万行的值需要时间，或者有时不会给出结果（内存溢出......）

您的查询是典型的分析查询（包含对列的聚合和 GROUP BY）。您应该考虑使用面向列的数据库。这些数据库经过优化，旨在处理大型数据集。（[面向列的数据库](http://en.wikipedia.org/wiki/Column-oriented_DBMS)）

我从来没有使用 NoSQL 数据库来处理大型数据集，因为我总是需要有一个明确定义的模式，并且面向列的数据库就足够了。如果您想使用其中之一，请确保它支持您想要执行的查询（即聚合类型 SUM、COUNT、...）。还要注意每天如何插入新行。

# ruby-on-rails-3 - 如何正确使用后台作业进行文件上传 rails app heroku

> ID：13055084
> 
> 赞同：3
> 
> 时间：2012-10-24T18:03:49.300
> 
> 标签：ruby-on-rails-3, heroku, delayed-job, background-process, sidekiq

我正在开发一个 Rails 应用程序，该应用程序从用户那里获取上传的文件并将它们推送到框中。问题是某些请求会超时，因为 api 调用花费的时间太长。我想将此进程移动到工作进程，但不确定如何在用户上传文件和工作人员将作业从队列中取出之间保留文件。我看到的所有示例似乎都跳过了这部分，或者不处理使用不是 s3 的 api。我考虑将文件存储在数据库中，但 box api 需要一个文件对象（curl -F @file）而不仅仅是文件的内容。关于如何完成的任何指示？出于性能原因，我希望使用sidekiq，但delayed_job 也可以

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T18:42:56.560

几个月来，我们的一个项目也遇到了类似的问题。查看以下链接以供参考

[http://mattgrande.wordpress.com/2009/08/11/delayedjob/](http://mattgrande.wordpress.com/2009/08/11/delayedjob/)

[Paperclip、Delayed Job、S3、Heroku - 用于延迟处理敏感上传文件的设计：db 还是 s3？](https://stackoverflow.com/questions/8479222/paperclip-delayed-job-s3-heroku-design-for-delayed-processing-of-sensitive)

还有一种用于回形针的宝石延迟工作

[https://github.com/jrgifford/delayed_pa​​perclip/](https://github.com/jrgifford/delayed_paperclip/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-14T12:13:55.520

如果您不想依赖 S3 来存储临时文件，则应该查看[paperclip_database](https://github.com/softace/paperclip%5fdatabase) gem。

我们用它来在我们的数据库中存储临时文件，以便由延迟作业处理。

只需将带有附加临时文件的课程传递给您延迟的工作，您就可以设置了。就像回形针本身一样，一旦您的作业从数据库中删除，文件就会被删除。

# ruby-on-rails - 如果 :type 字段在表单中，则不会在单个表继承中调用 SQL UPDATE

> ID：13055086
> 
> 赞同：0
> 
> 时间：2012-10-24T18:03:57.390
> 
> 标签：ruby-on-rails, single-table-inheritance, update-attributes

我有几个使用 STI 设置的模型

人 < ActiveRecod .....

男人

女士

我已经指定了一个类型字段并创建一个新记录工作正常。子类型（男人或女人）与记录一起成功保存，并且类型列中的类型是正确的。

但是，当我尝试更新/编辑记录时，它从不调用 SQL UPDATE。update_attributes 返回真。日志表明调用了 SELECT，但没有调用 UPDATE。

如果我从表单中删除类型字段。并创建它保存的新记录。但类型字段为空。但后来我**可以**更新记录。

有什么想法或解决方法来解决这个问题吗？

控制器代码

```
# GET /persons/new
# GET /persons/new.json
def new
   @person = current_user.persons.build(params[:person])
   @person.type = params[:type]    

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @pass }
    end
end

 # GET /persons/1/edit
 def edit
   @person = Person(params[:id])
 end

# POST /persons
# POST /persons.json
def create
@person = current_user.persons.build(params[:person])

respond_to do |format|
  if @person.save
    format.html { redirect_to @person, notice: 'Person was successfully created.' }
    format.json { render json: @person, status: :created, location: @pperson }
  else
    format.html { render action: "new" }
    format.json { render json: @person.errors, status: :unprocessable_entity }
  end
 end
end

# PUT /persons/1
# PUT /persons/1.json
def update
@person = Person.find(params[:id])

respond_to do |format|
  if @person.update_attributes(params[:person])

    format.html { redirect_to @person, notice: 'Person was successfully updated.' }
    format.json { head :no_content }
  else

    format.html { render action: "edit" }
    format.json { render json: @person.errors, status: :unprocessable_entity }
  end
end
end 
```

当我调用 new 时，它将用于子类，即

```
<%= link_to "New Woman", new_woman_path %> 
```

我为此准备了路线，即

```
resources :women, :controller => "persons", :type => "Woman"
resources :men, :controller => "persons", :type => "Man" 
```

当我打电话给编辑时，这是我遇到问题的地方，即

```
<%= link_to 'Edit', edit_person_path(@person) %> 
```

请注意，如果我在控制台中创建和编辑记录。它已创建并更新好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T10:51:07.557

好的，嵌套属性是一个红鲱鱼。问题在于 STI

Rails 表单助手指南说您不能依赖 STI 的记录识别。

在 form_for 中，我们需要将 id 强制为基本类型 id，否则编辑会失败

所以

<%= form_for(@person) 做 |f| %> 应该是

<%= form_for(@person.becomes(Person) do |f| %> 如果您查看 html 输出中的差异

问题html会在编辑模式下使用.becomes创建像edit_woman_fieldname这样的ID，我们得到像edit_room_fieldname这样的ID。在这种情况下，它可以保存和更新

# facebook - Facebook评论框不显示

> ID：13055087
> 
> 赞同：0
> 
> 时间：2012-10-24T18:03:58.317
> 
> 标签：facebook, plugins, comments

出于某种原因，Facebook 评论框仅在我刷新文章页面后才会出现在我的网络文章中，尽管它在几天前工作正常：

网址是： http: [//metallica-gr.net/](http://metallica-gr.net/)，每篇文章在页面底部都有facebook评论。

有任何想法吗？

解决方案：

所以我在关闭之前粘贴了评论脚本，而不是在打开它之后就像 Facebook 推荐的那样，现在它又可以工作了。不知道为什么会发生这种情况，因为它工作正常，可能与其他脚本冲突？（尽管我没有在我的网站上添加任何内容）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:58:26.107

所以我在关闭之前粘贴了评论脚本，`</body>`而不是在打开它之后就像 Facebook 推荐的那样，现在它又可以工作了。不知道为什么会发生这种情况，因为它工作正常，可能与其他脚本冲突？（尽管我没有在我的网站上添加任何内容）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T10:15:57.580

我使用 jquery 来显示 facebook 评论框：

```
<div id="fb-root"></div>
<script>
    $(document).ready(function () {
        (function (d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) return;
            js = d.createElement(s); js.id = id;
            js.src = "//connect.facebook.net/he_IL/all.js#xfbml=1";
            fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));
    });
</script> 
```

# javascript - razor mvc3中的javascript注释

> ID：13055089
> 
> 赞同：2
> 
> 时间：2012-10-24T18:04:18.540
> 
> 标签：javascript, asp.net-mvc-3, razor

对于`javascript`评论，我通常会尝试遵循类似于[这些](https://stackoverflow.com/questions/799179/javascript-standard-documentation-tool)准则的内容。但是，当 Razor 引擎在文件中看到类似这样的内容时，它似乎会抛出`cshtml`：

```
/**
 * This is my function.
 * @param parm1 this is first parameter
 * @param parm2 this is second parameter
 */ 
```

@ 符号似乎会导致解析器错误，因为这是 Razor 中的特殊字符。无论如何，我只是想知道其他人在做什么。我知道我可能可以使用 Razor 评论并执行以下操作：

```
@*param parm1 this is first parameter *@ 
```

但这在很多层面上都是错误的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T18:13:57.220

尝试这个：

```
/* 
* This is my function. 
* @@param parm1 this is first parameter 
* @@param parm2 this is second parameter 
*/ 
```

要编写`@`你只需要`@@`在 Razor 视图中重复它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-24T18:28:35.470

Javascript 样式的注释 / * 注释 * / 位于脚本部分下。即<script>/*comment*/</script>，评论样式/*comment*/在razor下无效。在 HTML 代码中，您可以使用 < ! -- 注释 -->，在 Razor 代码下，您可以使用 @* 注释 *@

这是一个示例： .... Razor 文件 ..... else { 无结果。}

```
@*  razor comment  *@

<!-- html comment -->
<p>

    @if (ViewData["parent"] != null && !HasRole(Site.Enti))
    {

        // another type of comment with Razor

        if (theParent.Parent == null)
        {
            @Html.ActionLink("Up One Level", "index", "")
        }
        else
        {

             @*   another valid razor comment  *@
            @Html.ActionLink(
                    "Up One Level",
                    "index",
                    new { controller = "", id = theParent.Parent.SchoolGroupId })
        }
    }

    <script>
        /*
            javascript comment
        */
    </script> 
```

........希望这有帮助

# python - FFTW3 直接在 scipy.weave.inline 中复杂的 numpy 数组

> ID：13055090
> 
> 赞同：1
> 
> 时间：2012-10-24T18:04:25.203
> 
> 标签：python, c, numpy, scipy, fftw

我正在尝试在`Python`. 傅里叶位移定理允许通过以下方式将阵列平移一个子像素量： 1\. 正向 FFT 阵列 2\. 将阵列乘以傅里叶空间中的线性相位斜坡 3\. 逆 FFT 阵列

该算法很容易在 python 中使用 numpy/scipy 实现，但对于 256**2 数组，每班次的速度非常慢（~10 毫秒）。我试图通过使用 scipy.weave.inline 直接从 python 调用 c 代码来加快速度。

但是，我在将复杂的 numpy 数组传递给 FFTW 时遇到了麻烦。c 代码如下所示：

```
 #include <fftw3.h>
    #include <stdlib.h>

    #define INVERSE +1
    #define FORWARD -1

    fftw_complex *i, *o;
    int n, m;
    fftw_plan pf, pi;
    #line 22 "test_scipy_weave.py" 

    i = (fftw_complex*) fftw_malloc(sizeof(fftw_complex) * xdim*ydim);
    o = (fftw_complex*) fftw_malloc(sizeof(fftw_complex) * xdim*ydim);

    pf = fftw_plan_dft_2d(xdim, ydim, i, o, -1, FFTW_PATIENT);
    pi = fftw_plan_dft_2d(xdim, ydim, o, i,  1, FFTW_PATIENT);

    # Copy data to fftw_complex array. How to use python arrays directly
    for (n=0; n<xdim;n++){
        for (m=0; m<ydim; m++){
            i[n*xdim+m][0]=a[n*xdim+m].real();
            i[n*xdim+m][1]=a[n*xdim+m].imag();
        }
    }

    fftw_execute(pf);

    /* Mult by linear phase ramp here */

    fftw_execute(pi);

    for (n=0; n<xdim;n++){
        for (m=0; m<ydim; m++){
            b[n*xdim+m] = std::complex<double>([in*xdim+m][0], i[n*xdim+m][1]);
        }
    }

    fftw_destroy_plan(p); 
```

所以你可以看到我必须将存储在 numpy 数组“a”中的数据复制到 fftw_complex 数组“i”中。最后，我必须将结果“i”复制到输出 numpy 数组“b”中。直接在 fftw 中使用 numpy 数组“a”和“b”会更有效，但我无法让它工作。

有没有人知道如何让 fftw 直接使用复杂的 numpy 数组`scipy.weave.inline`？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T07:11:49.230

根据[fftw 手册](http://www.fftw.org/doc/Complex-numbers.html)，可以 import `complex.h`before `fftw.h`，这样可以保证`fftw_complex`对应原生 C 数据类型。我很确定 numpy 数据类型也保证（或在实践中可能）与本机 C 数据类型兼容。

在这种情况下，您可以访问指向数组数据的指针`a.data_as(ctypes.c_void_p)`。不幸的是 ctypes 不能识别复杂类型，但希望转换为 void 指针可以解决问题。

执行此操作时，您必须注意您的数组`a`以 C 连续方式存储，由`order='C'`创建数组时的参数指定。

# android - Android键盘改变高度

> ID：13055094
> 
> 赞同：1
> 
> 时间：2012-10-24T18:04:39.013
> 
> 标签：android, css

我正在为 android 构建一个带有 HTML/CSS/JavaScript 的应用程序。现在我添加了一个简单的 inlog 字段（出于问题的目的，我添加了几个字段）。

[没有键盘](http://i50.tinypic.com/kbsk5f.png)

当我想填写表格时，我只需关注该字段，我的 android 屏幕键盘就会添加到屏幕上。

到目前为止一切顺利，但是当我想滚动到提交按钮时出现问题。正如您在第一张图片中看到的那样，有一个“不错的”提交按钮，当我想滚动时，我无法到达它。

[我能到达的最远距离](http://i47.tinypic.com/244ek8z.png)

**回答问题**

问题似乎得到了解决，在“放弃”之后，我查看了 AndroidManifast.xml 并开始搞乱一切。

```
<application android:icon ="@drawable/icon"
            android:label="@string/app_name"
            android:theme="@android:style/Theme.NoTitleBar.FullScreen"> 
```

自从我刚开始我就开始搞乱，发现问题出在 androud:theme 上。

删除它后，您会将您的网页放入包装器中，以修复此使用

```
<application android:icon ="@drawable/icon"
            android:label="@string/app_name"
            android:theme="@android:style/Theme.NoTitleBar"> 
```

使用它可以解决问题，除了这也意味着将显示android的状态栏。

# iphone - UIActionSheet 混乱的优雅解决方案

> ID：13055095
> 
> 赞同：4
> 
> 时间：2012-10-24T18:04:39.850
> 
> 标签：iphone, ios, ipad

我正在尝试为 UIActionSheet 问题找到一个优雅的解决方案。

我像这样使用 UIActionSheets：

```
UIActionSheet * myChoices = [[UIActionSheet alloc]
    initWithTitle:nil
    delegate:self
    cancelButtonTitle:@"cancel"
    destructiveButtonTitle:@"erase"
    otherButtonTitles: @"aaa", @"bbb", @"ccc", @"ddd", nil]; 
```

问题是为了发现用户选择的选项，我必须使用这个：

```
- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {

    switch ([actionSheet tag]) {
           case 0: ... 
           case 1: ... 
           case 2: ... 
           case 3: ... 

        }
} 
```

这种基于索引的案例很糟糕，因为如果我更改了操作表上的 aaa、bbb、ccc 等的顺序，我必须更改案例顺序。这个索引的东西不是一个好的解决方案。

我试图想出一种方法来做到这一点并变得独立于索引，但没有得到任何令人满意的解决方案。使用 buttonTitleAtIndex 也不够好，因为我的应用程序是本地化的，我必须为每个条目测试 n 个标题。有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T18:20:50.100

由于我创建了一个基于块的`UIAlertView`and版本`UIActionSheet`，我个人再也不会使用基于委托的 Apple 版本。**您可以在我的 GitHub 存储库**
**中下载我的[`OHActionSheet`](https://github.com/AliSoftware/OHActionSheet)和[`OHAlertView`](https://github.com/AliSoftware/OHAlertView)**类。

因为它们基于*completionBlock*模式，所以它们更具可读性（所有代码都在同一个地方，多个没有共同的委托`UIActionSheets`，...），并且更强大（因为块也根据需要捕获它们的上下文）。

```
NSArray* otherButtons = @[ @"aaa", @"bbb", @"ccc", @"ddd" ];
[OHActionSheet showSheetInView:self.view
                         title:nil
             cancelButtonTitle:@"cancel"
        destructiveButtonTitle:@"erase"
             otherButtonTitles:otherButtons
        completion:^(OHActionSheet* sheet, NSInteger buttonIndex)
 {
   if (buttonIndex == sheet.cancelButtonIndex) {
     // cancel
   } else if (buttonIndex == sheet.destructiveButtonIndex) {
     // erase
   } else {
     NSUInteger idx = buttonIndex - sheet.firstOtherButtonIndex;
     // Some magic here: thanks to the blocks capturing capability,
     // the "otherButtons" array is accessible in the completion block!
     NSString* buttonName = otherButtons[idx];
     // Do whatever you want with idx and buttonName
   }
 }]; 
```

* * *

## 附加说明：如何`switch/case`使用 NSStrings

请注意，在`if/else`完成处理程序中测试的 otherButtons 部分中，您可以测试`idx`using a`switch/case`或使用 my **[`ObjcSwitch`](https://github.com/AliSoftware/ObjcSwitch)category**，这将允许您编写类似`switch/case`代码但 for `NSStrings`，因此您可以在你`OHActionSheet`的完成处理程序：

```
NSUInteger idx = buttonIndex - sheet.firstOtherButtonIndex;
NSString* buttonName = otherButtons[idx];
[buttonName switchCase:
   @"aaa", ^{ /* Some code here to execute for the "aaa" button */ },
   @"bbb", ^{ /* Some code here to execute for the "bbb" button */ },
   @"ccc", ^{ /* Some code here to execute for the "ccc" button */ },
   ..., nil
]; 
```

* * *

编辑：现在最新的 LLVM 编译器支持新的“Object Literals”语法，您可以像`ObjcSwitch`使用 NSDictionary 的紧凑语法一样：

```
((dispatch_block_t)@{
   @"aaa": ^{ /* Some code here to execute for the "aaa" button */ },
   @"bbb": ^{ /* Some code here to execute for the "bbb" button */ },
   @"ccc": ^{ /* Some code here to execute for the "ccc" button */ },
}[buttonName] ?:^{
       /* Some code here to execute for defaults if no case found above */
})(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T18:12:39.497

我更喜欢通过使用值数组来帮助（尽管没有完全解决）这个问题。它使您至少拥有统一的数据源。因此，通过在 viewDidLoad 或其他任何内容中为您的值创建一个数组，当您创建操作表时，您可以将其更改为：

```
//where myValuesArray is an array of strings you declared in viewDidLoad
//myValuesArray = [NSArray arrayWithObjects:@"aaa", @"bbb", @"ccc", @"ddd", nil];

UIActionSheet * myChoices = [[UIActionSheet alloc]
    initWithTitle:nil
    delegate:self
    cancelButtonTitle:@"cancel"
    destructiveButtonTitle:@"erase"
    otherButtonTitles:nil];

for(NSString *title in myValuesArray)
{
    [myChoices addButtonWithTitle:@"LMNOP"];
} 
```

然后在您的 clickedButtonAtIndex 中，您正在检查与我认为您的选择完全相同的数组的索引。有了这个，您也可以在想要进行更改时更新数组。我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-29T10:46:54.597

很抱歉为这样一个老问题添加了一个迟到的答案，但谷歌搜索“UIActionSheet 块”会导致这里出现，所以我想我会与你分享我写的这个简单的块实现。

[https://github.com/freak4pc/UIActionSheet-Blocks](https://github.com/freak4pc/UIActionSheet-Blocks)

干杯!

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-04T21:43:52.850

老问题，但在 iOS 8 中，新`UIAlertController`类允许您`UIAlertAction`使用块创建 s：

```
let alertController = UIAlertController(title: "Pancakes", message: "Do you like them with:", preferredStyle: .ActionSheet)

alertController.addAction(UIAlertAction(title: "Maple Syrup", style: .Default, handler: { (alert) -> Void in
    println("Picked syrup")
}))

alertController.addAction(UIAlertAction(title: "Jam", style: .Default, handler: { (alert) -> Void in
    println("Jam? eh?")
}))

alertController.addAction(UIAlertAction(title: "I HATE PANCAKES", style: .Destructive, handler: { (alert) -> Void in
    println("You monster.")
})) 
```

# image-processing - 如何在图像上应用反卷积方法？

> ID：13055096
> 
> 赞同：1
> 
> 时间：2012-10-24T18:04:43.350
> 
> 标签：image-processing, numpy, python-2.7, scipy, scikit-image

这是这个问题的一个扩展问题。[感谢](https://stackoverflow.com/questions/13021206/how-can-i-get-the-smart-sharpen-effect-on-my-images-with-python)*Kindall*和Stephan *Van der Wallt*，事实证明，为了解决前面的问题，我需要了解如何使用任何相关包`deconvolution`对图像应用处理。 因为我只知道，您可能想向我展示如何使用 python 转换此链接[MatLap 代码](http://yuzhikov.com/articles/BlurredImagesRestoration1.htm)中的代码，我只对“卷积定理 - 练习部分”感兴趣，这将是一个很大的帮助。 我还需要了解**卷积或反卷积方法**对图像的作用。我用谷歌搜索试图弄清楚，但有很多方程式我无法完全理解。 `python`
`python``MatLab`

 **注意：
（1）任何关于如何`deconvolve`工作的解释，它肯定会受到赞赏。
谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-24T21:43:34.780

形式上，卷积是对两个函数的数学运算。

在图像处理中，它可以看作是一种操作，对于图像的每个像素，将其值与相邻像素的值混合。邻居值由卷积核加权。这种混合会对图像产生模糊效果，因为图像中的所有过渡都经过平滑处理。

卷积模型的一个强有力的假设是内核在所有图像中都是相同的，并且不会从一个像素变为另一个像素。

在光学术​​语中，卷积核称为点扩散函数（PSF）。

反卷积是旨在*解开*像素值的逆运算。您可以将反卷积问题分为 3 类：

*   盲反卷积，其中不知道有关内核的信息
*   近视反卷积，其中人们对卷积核的了解有限
*   预先知道内核的反卷积

当然，后一种情况更容易解决。对后面这个问题的一个简单解决方案是使用*逆*核对图像应用另一个卷积。这个简单的解决方案的主要缺点是它倾向于提高图像的噪声水平（因为反卷积是一个不适定的逆问题）。

作为对这个问题的回应，已经开发了正则化反演的方法。但请记住，反卷积是一个活跃的研究领域，尚未找到通用、高效的盲反卷积算法。

请注意，反卷积将与[非锐化掩蔽](http://en.wikipedia.org/wiki/Unsharp_masking)区分开来，后者也旨在锐化图像，但通过增加图像的高频。**

# windows - MS-DOS 批量执行命令

> ID：13055097
> 
> 赞同：1
> 
> 时间：2012-10-24T18:04:47.220
> 
> 标签：windows, batch-file, command-prompt

我有 50 个具有此命名约定的文件：

```
myObject.0001.obj
...
myObject.0050.obj 
```

我需要对这 50 个文件执行以下 DOS 命令：

```
ply2vrmesh myObject.0001.obj myObject.0001.vrmesh
...
ply2vrmesh myObject.0050.obj myObject.0050.vrmesh 
```

我用我有限的生锈的 MS-DOS 知识编写了以下 .bat：

```
for %%T in (*.obj) do ply2vrmesh %%T %%T.vrmesh 
```

它有效，但它转换`myObject.0001.obj`为`myObject.0001.obj.vrmesh`. 我想获得一个干净的命名，而不是像`myObject.0001.vrmesh`，但我不知道该怎么做。

如果你们有任何想法，那将是非常有帮助的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:47:45.227

FOR 变量有用于提取特定信息的修饰符。`~n`修饰符给出不带扩展名的名称。在命令提示符下键入`HELP FOR`以获取完整的修饰符列表。

如果名称包含空格，您应该将文件名括在引号中。

```
for %%T in (*.obj) do ply2vrmesh "%%T" "%%~nT.vrmesh" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T18:19:16.043

为什么不按照您现有的命令：

```
rename myObject.????.obj.vrmesh myObject.????.vrmesh 
```

# android - EditText setError 未显示在 FragmentActivity 中

> ID：13055102
> 
> 赞同：3
> 
> 时间：2012-10-24T18:04:57.090
> 
> 标签：android, android-fragments

我在 Activity 中有一个表单，其字段在第二个类（BLL 类）上验证，我使用 setError() 方法显示验证消息。在那之前它运作良好。

但是现在我需要把这个表单放在一个片段活动上。我做了所有需要的更改并且验证工作正常，但没有显示“气球”。

我到处搜索，但找不到任何有用的东西。

这是我的代码：

```
public class OrderCustomFieldsFragment extends Fragment {

  public void save() {

    try {
        CustomFieldsBll customFields = new CustomFieldsBll(this.getActivity());
        customFields.validateCustomFields(irrelevant...); 
        ...irrelevant code...
        Toast.makeText(this.getActivity(), "Saved.", Toast.LENGTH_LONG).show();
    }
    catch (CustomException z) {
        if (setError(z.getThrowerField(), z.getMessage()))
            Toast.makeText(this.getActivity(), z.getMessage(), Toast.LENGTH_SHORT).show();
    }

  }

  private boolean setError(Integer throwerField, String msg) {
    //If thorwerField is null then is a general error, otherwise is a form field
    if (throwerField == null) {
      //here display an dialog          
      showOKMessage(this.getActivity(), "Pedidos", msg, false);
      return false;
    }
    else {
      try {
          //linearLayout is my view, instanciated in onCreateView method
        TextView customField = (TextView)linearLayout.findViewById(throwerField);
        if (customField != null) {
           customField.setError(msg);
           customField.requestFocus();
           return true;
        }
        else {
          showOKMessage(this.getActivity(), "Pedidos", msg, false);
        }
      }
      catch (Exception e) {
        showOKMessage(this.getActivity(), "Pedidos", msg, false);
      }
   }

   return false;
  }

} 
```

抛出异常，找到字段，设置错误，但只出现Toast，没有错误气球。有什么想法吗？谢谢

# java - JOptionPane - 检查用户输入并防止在满足条件之前关闭

> ID：13055107
> 
> 赞同：8
> 
> 时间：2012-10-24T18:05:10.250
> 
> 标签：java, swing, joptionpane

请有人告诉我，`JOptionPane`除非满足用户输入字段的条件，否则是否有一种方便的方法可以防止在单击“确定”时关闭？

还是我别无选择，只能使用`JFrame`？

到目前为止我的验证逻辑。似乎不起作用，因为按钮出于某种原因可以一次性点击......

```
final JDialog dialog3 = new JDialog(OmniGUI.getFrame(), "Create new Node - id:" + newNodeID);
dialog3.setContentPane(theOPane);
dialog3.setDefaultCloseOperation(JDialog.DO_NOTHING_ON_CLOSE);

theOPane.addPropertyChangeListener(new PropertyChangeListener(){
   public void propertyChange(PropertyChangeEvent e) {

       if(e.getSource() == theOPane){
           String val = (String) ((JOptionPane) e.getSource()).getValue();

           if(val=="Create"){
               System.out.println("Checking content");                      

               if(!valid){
                   System.out.println("closing the window");    

                   dialog3.setDefaultCloseOperation(JDialog.DISPOSE_ON_CLOSE);
                   dialog3.removeAll();
                   dialog3.dispatchEvent(new WindowEvent(dialog3, WindowEvent.WINDOW_CLOSING));
               }

           }
       }
   }    
});

    dialog3.setLocation(p);
    dialog3.pack();
    dialog3.setVisible(true); 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-24T18:26:33.090

您可以在关闭或继续之前创建自己的自定义`JDialog`来检查用户输入等。请参阅此链接：

[停止自动关闭对话框](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html#stayup)

> 默认情况下，当用户单击 JOptionPane 创建的按钮时，对话框关闭。但是，如果您想在关闭对话框之前检查用户的回答怎么办？在这种情况下，您必须实现自己的属性更改侦听器，以便当用户单击按钮时，对话框不会自动关闭。

这是我做的一个例子：

如果您输入错误/无文本并单击 Enter，将显示一条验证消息：

![在此处输入图像描述](../Images/5c97f8911f3eedfc494121d28e5f5788.png)

如果您单击*X*关闭对话框或单击取消，还将显示一条验证消息：

![在此处输入图像描述](../Images/a55217f2650f3139d4dc48817b37cef7.png)

如果输入了正确的文本（在本例中为“David”）并单击输入，则会显示一条消息并`JDialog`退出：

![在此处输入图像描述](../Images/a225c82006abe47aae442b61ba35a19b.png)

**自定义对话框.java：**

```
import java.awt.*;
import java.awt.event.*;
import java.beans.*;
import javax.swing.JDialog;
import javax.swing.JOptionPane;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;

class CustomDialog extends JDialog
        implements ActionListener,
        PropertyChangeListener {

    private String typedText = null;
    private JTextField textField;
    private String magicWord;
    private JOptionPane optionPane;
    private String btnString1 = "Enter";
    private String btnString2 = "Cancel";

    /**
     * Returns null if the typed string was invalid; otherwise, returns the
     * string as the user entered it.
     */
    public String getValidatedText() {
        return typedText;
    }

    /**
     * Creates the reusable dialog.
     */
    public CustomDialog(Frame aFrame, String aWord) {
        super(aFrame, true);

        magicWord = aWord.toUpperCase();
        setTitle("Quiz");

        textField = new JTextField(10);

        //Create an array of the text and components to be displayed.
        String msgString1 = "What was Dr. SEUSS's real last name?";
        String msgString2 = "(The answer is \"" + magicWord
                + "\".)";
        Object[] array = {msgString1, msgString2, textField};

        //Create an array specifying the number of dialog buttons
        //and their text.
        Object[] options = {btnString1, btnString2};

        //Create the JOptionPane.
        optionPane = new JOptionPane(array,
                JOptionPane.QUESTION_MESSAGE,
                JOptionPane.YES_NO_OPTION,
                null,
                options,
                options[0]);

        //Make this dialog display it.
        setContentPane(optionPane);

        //Handle window closing correctly.
        setDefaultCloseOperation(DISPOSE_ON_CLOSE);

        //Ensure the text field always gets the first focus.
        addComponentListener(new ComponentAdapter() {
            @Override
            public void componentShown(ComponentEvent ce) {
                textField.requestFocusInWindow();
            }
        });

        //Register an event handler that puts the text into the option pane.
        textField.addActionListener(this);

        //Register an event handler that reacts to option pane state changes.
        optionPane.addPropertyChangeListener(this);
        pack();
    }

    /**
     * This method handles events for the text field.
     */
    @Override
    public void actionPerformed(ActionEvent e) {
        optionPane.setValue(btnString1);
    }

    /**
     * This method reacts to state changes in the option pane.
     */
    @Override
    public void propertyChange(PropertyChangeEvent e) {
        String prop = e.getPropertyName();

        if (isVisible()
                && (e.getSource() == optionPane)
                && (JOptionPane.VALUE_PROPERTY.equals(prop)
                || JOptionPane.INPUT_VALUE_PROPERTY.equals(prop))) {
            Object value = optionPane.getValue();

            if (value == JOptionPane.UNINITIALIZED_VALUE) {
                //ignore reset
                return;
            }

            //Reset the JOptionPane's value.
            //If you don't do this, then if the user
            //presses the same button next time, no
            //property change event will be fired.
            optionPane.setValue(
                    JOptionPane.UNINITIALIZED_VALUE);

            if (btnString1.equals(value)) {
                typedText = textField.getText();
                String ucText = typedText.toUpperCase();
                if (magicWord.equals(ucText)) {
                    JOptionPane.showMessageDialog(this, "Correct answer given");
                    exit();
                } else {
                    //text was invalid
                    textField.selectAll();
                    JOptionPane.showMessageDialog(this,
                            "Sorry, \"" + typedText + "\" "
                            + "isn't a valid response.\n"
                            + "Please enter "
                            + magicWord + ".",
                            "Try again",
                            JOptionPane.ERROR_MESSAGE);
                    typedText = null;
                    textField.requestFocusInWindow();
                }
            } else { //user closed dialog or clicked cancel
                JOptionPane.showMessageDialog(this, "It's OK.  "
                        + "We won't force you to type "
                        + magicWord + ".");
                typedText = null;
                exit();
            }
        }
    }

    /**
     * This method clears the dialog and hides it.
     */
    public void exit() {
        dispose();
    }

    public static void main(String... args) {
        //create JDialog and components on EDT
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new CustomDialog(null, "David").setVisible(true);
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-27T20:02:21.730

[关于停止自动对话框关闭](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html#stayup)的一件事是，它只有在您想阻止关闭或验证然后关闭时才有帮助......基于该教程中的示例代码的解决方案，如果验证失败。

回想起来，我认为我第一次尝试失败的原因可能是因为它使用了 JOptionPanel.createDialog() （不是示例代码所做的）。也许让 JOptionPanel 创建它自己的 JDialog 在事件处理的工作方式中设置了一些“背景”依赖项......嗯。无论如何，我现在得到了我想要的：David Kroucamp 的代码对我非常有用。

我发布我的解决方案是因为它处理 PropertyChangeEvents 的方式与 David 不同，因此它可能对某些人有用。您会看到大部分代码与他的相同（感谢大卫）

此类检查文件是否存在并让用户提供新名称或取消。它在用于验证用户输入的构造函数中需要一些参数。验证是 `if(!Files.exists(rootPathArg.resolve(input))) { // close the dialog }`

```
class GetPathNameDialog extends JDialog implements ActionListener, PropertyChangeListener {

    /**
     * contains the users input
     */
    private JTextField textField;
    /**
     * the option pane that holds all fields and controls in this dialog
     */
    private JOptionPane optionPane;
    /**
     * label for the left button that represents "OK"
     */
    private String button1Str;
    /**
     * label for the right button that represents "Cancel"
     */
    private String button2Str;
    /**
     * path containing the named entity to be renamed.
     */
    private Path rootPath;

    /**
     * Creates the reusable dialog.
     */
    /**
     * Creates the dialog, panel and all GUI components, sets up listeners.
     *
     * @param rootPath the path where the file or folder we are renaming lives
     * @param initialText the initial text to display in the text field (i.e. current name)
     * @param title title of the JDialog itself
     * @param textFieldWidth number of columns in the JTextField that will contain the file/folder name
     * @param promptStr the propmt to display in the panel
     * @param button1Str the label for the "OK" button
     * @param button2Str the label for the "Cancel" button
     */
    public GetPathNameDialog(Path rootPath, String initialText, String title, int textFieldWidth, String promptStr, String button1Str, String button2Str) {

        super((Frame) null, true);

        // init class variables
        this.rootPath = rootPath;
        this.button1Str = button1Str;
        this.button2Str = button2Str;

        setTitle(title);

        textField = new JTextField(textFieldWidth);
        textField.setText(initialText);

        //Create an array of the text and components to be displayed.
        Object[] array = {promptStr, textField};

        //Create an array specifying the number of dialog buttons
        //and their text.
        Object[] options = {button1Str, button2Str};

        //Create the JOptionPane.
        optionPane = new JOptionPane(
                array,
                JOptionPane.QUESTION_MESSAGE,
                JOptionPane.YES_NO_OPTION,
                null,
                options,
                options[0]);

        //Make this dialog display it.
        setContentPane(optionPane);

        //Handle window closing correctly.
        setDefaultCloseOperation(DISPOSE_ON_CLOSE);

        //Ensure the text field always gets the first focus.
        addComponentListener(new ComponentAdapter() {
            @Override
            public void componentShown(ComponentEvent ce) {
                textField.requestFocusInWindow();
            }
        });

        // Register an event handler that puts the text into the option pane INPUT_VALUE_PROPERTY
        textField.addActionListener(this);

        // Register an event handler that reacts to option pane state changes.
        optionPane.addPropertyChangeListener(this);

        // tell this dialog to display close to the current mouse pointer
        setLocation(MouseInfo.getPointerInfo().getLocation());
        pack();
    }

    /**
     * This method handles events for the text field.
     */
    @Override
    public void actionPerformed(ActionEvent e) {
        // this will fire a INPUT_VALUE_PROPERTY PropertyChangeEvent... takes the user input to the validaton code in the property handler
        optionPane.setInputValue(textField.getText());
    }

    /**
     * This method reacts to property changes.
     */
    @Override
    public void propertyChange(PropertyChangeEvent e) {

        String prop = e.getPropertyName();

        if (isVisible() && (e.getSource() == optionPane)) {

            // the VALUE_PROPERTY is not the same as the INPUT_VALUE_PROPERTY. we make use of the INPUT_VALUE_PROPERTY to carry our data
            // but the JOptionPane uses the VALUE_PROPERTY for other stuff
            if (JOptionPane.VALUE_PROPERTY.equals(prop)) {
                // newValues delivered by VALUE_PROPERTY PropertyChangeEvent can be the actual labels of the button clicked,
                // that's sooo counter-intuitive to me, but it's how we know which button got clicked
                if (button1Str.equals(e.getNewValue())) {
                    // "OK" functionality...
                    // ...this will fire the event that takes the user input to the validation code
                    optionPane.setInputValue(textField.getText());
                } else if (button2Str.equals(e.getNewValue())) {
                    // "CANCEL" functionality
                    optionPane.setInputValue(null);
                    exit();
                }

            } else if (JOptionPane.INPUT_VALUE_PROPERTY.equals(prop)) {

                Object value = optionPane.getInputValue();

                // null or empty strings in the text field (ie in the INPUT_VALUE_PROPERTY) are ignored
                if (null != value && ((String) value).length() > 0) {
                    // here is the validation code
                    if (Files.exists(rootPath.resolve(textField.getText()))) {
                        // already exists, tell user
                        JOptionPane.showMessageDialog(this,
                                "Sorry, " + rootPath.resolve(textField.getText()).toString() + " already exists.\n\n Please enter another name.",
                                "OK",
                                JOptionPane.ERROR_MESSAGE);
                        // Make sure PropertyChangeEvent will fire next time...
                        // ...PropertyChangeEvents don't fire in setInputValue(newVal)...
                        // ...if newVal is equal to the current value, but if the user clicks...
                        // ...button 1 or hits enter in the text field without changing his text,...
                        // ...we still want to fire another event...
                        // ...so we reset the property without changing the text in the textField
                        optionPane.setInputValue(null);
                    } else {
                        // does not exist.. we are keeping the users input...
                        // ... it gets delivered to the user in getInputValue()
                        exit();
                    }
                }
            }
        }
    }

    /**
     * returns the users's validated input. Validated means !Files.exists(rootPath.resolve(input)).
     *
     * @return the text entered by the user, UNINITIALIZED_VALUE if the user X closed, null the user canceled
     */
    public Object getInputValue() {
        return optionPane.getInputValue();
    }

    /**
     * closes the dialog and triggers the return from setVisible()
     */
    public void exit() {
        dispose();
    }
} 
```

调用它的代码是：

```
 GetPathNameDialog tempD = new GetPathNameDialog(
                        someFolderPath,
                        "theFileNameThatMustBeChanged.txt",
                        "Change File Name",
                        50,
                        "someFolderPath already contains a file named theFileNameThatMustBeChanged.txt." + ".\n\nPlease enter a different file name:",
                        "Copy the file with the new name", "Do not copy the file");
    tempD.setVisible(true);

    Object inputObj = tempD.getInputValue();
    String input = (inputObj == JOptionPane.UNINITIALIZED_VALUE || null == inputObj ? "" : (String) inputObj);

    if (input.length() > 0) {
        // we now have a new file name. go ahead and do the copy or rename or whatever...
    } 
```

# permissions - Capistrano 安装和 Mac 文件夹权限

> ID：13055117
> 
> 赞同：1
> 
> 时间：2012-10-24T18:05:50.060
> 
> 标签：permissions, installation, capistrano

我最近买了一台新的 MacBook Pro，我正在尝试在上面安装 Capistrano。运行“gem install capistrano”时，即使我是计算机上的管理员，我也会遇到与文件夹权限有关的错误。
我第一次得到“权限被拒绝 - /library/Ruby/Gems/1.8/gems/highline-1.6.15”。然后我进入该文件夹的信息屏幕并更改权限以允许访问。下次我运行“gem install capistrano”时，它给了我错误“你没有写入 /usr/bin 目录的权限”。

如果我以管理员身份登录，为什么会出现这些错误？诚然，我是个菜鸟，但我不想在每次错误后手动更改文件夹权限，所以我想知道我是否可以在这里做些什么来避免将来出现问题......

运行：OSX 10.8.2 红宝石 1.8.7

**更新：**我尝试修复磁盘权限，它基本上取消了我在第一个错误后所做的手动权限切换。我有点期待......所以问题仍然存在......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:57:59.567

问了一圈后，我找到了答案...

在“gem install”命令之前使用“super user do”命令“sudo”。它会询问您的密码，输入密码，您就可以开始了。所以我运行了“sudo gem install capistrano”，它运行良好。希望有一天这能帮助像我这样的另一个菜鸟......

# java - 获取JButton的默认边框

> ID：13055120
> 
> 赞同：3
> 
> 时间：2012-10-24T18:06:07.570
> 
> 标签：java, swing, border, jbutton

如何获得 a 的默认边框`JButton`？

一个例子是：

```
Border border = new JButton().getBorder(); 
```

但是我可以在不创建新按钮的情况下做到这一点吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T19:45:16.943

您可以从以下位置检索默认边框`UIManager`：

```
UIManager.getBorder("Button.border"); 
```

例如：

```
import java.awt.Color;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.BorderFactory;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;

public class TestButton {
    private static void createAndShowGUI() {
        JFrame frame = new JFrame("TestButton");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JButton button = new JButton("Click");
        button.setBorder(BorderFactory.createLineBorder(Color.BLACK, 2));

        button.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                ((JButton)e.getSource()).setBorder(UIManager.getBorder("Button.border"));
            }
        });

        frame.add(button);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }
} 
```

# c# - 如何在控制器查询中包含集合的外键属性？

> ID：13055121
> 
> 赞同：0
> 
> 时间：2012-10-24T18:06:12.650
> 
> 标签：c#, asp.net-mvc, entity-framework

这可能是“走得太深”的情况，但我想我还是会问。我有以下型号：

```
public class Exam
{
    public int ID {get; set;}
    //...other Exam properties
    public virtual ICollection<ExamResults> Results {get; set;}
}

public class ExamResults
{
    public int ExamId {get; set;}
    //...other Exam Result properties
    public int ExamDomainId {get; set;}
    public virtual ExamDomain ExamDomain {get; set;}
}

public class ExamDomain
{
    public int ID {get; set;}
    public String DomainName {get; set;}
    //...more stuff
} 
```

所以用简单的英语来说，一个考试有一个考试结果的集合。每个 ExamResult 都有一个 ExamDomain，每个 ExamDomain 都有一个名称。

问题是这样的：我的视图每次使用时都会创建一个新的数据库查询

```
@Html.DisplayFor(e => e.exampleResult.ExamDomain.DomainName) 
```

我不能在初始控制器查询中包含 ExamDomain，因为 Exam 没有 Exam 的导航属性。例子：

```
//The below does not work because ExamResults is a collection, not a record
var exam = db.Exams.Include(e => e.ExamResults.ExamDomain)...

//The code below also does not work, but it does run
var exam = db.Exams.Include(e = 
```

话虽如此，如何在不为每个 ExamResult 运行额外查询的情况下从 ExamDomain 表中获取所有必要的域名？

PS：我确实有一个视图模型，但这对于这个问题的目的来说并不重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T19:00:40.007

这里有两个选项可以包含隐藏在集合下方的属性。

首先，字符串 .Include 语法应该可以工作：

```
 db.Exams.Include("ExamResults.ExamDomain") 
```

或我个人偏好使用 lambda：

```
 db.Exams.Include(e => e.ExamResults.Select(r=>r.ExamDomain)) 
```

查看 RoMillers（来自 EF）关于如何使用 lambda 包含的帖子。他还在这篇文章中谈到了基于集合的包含[http://romiller.com/2010/07/14/ef-ctp4-tips-tricks-include-with-lambda/](http://romiller.com/2010/07/14/ef-ctp4-tips-tricks-include-with-lambda/)

# php - 动态加载网格中的记录（根据用户要求）

> ID：13055128
> 
> 赞同：0
> 
> 时间：2012-10-24T18:06:39.293
> 
> 标签：php, jquery, mysql, ajax

我目前正在开发一个 PHP mysql 应用程序，该应用程序有一个要显示数千条记录的网格。现在，要求不希望它以正常方式分页，（通过显示分页链接**1、2、3**等）但是当用户点击链接**Show More Results**时这样做。我有一个锚链接，单击该链接将从服务器获取下一批记录。我们都知道的正常分页可以使用

```
 offset and limit parameters in a sql query
     select * from abc limit,offset; 
```

所以，在这种情况下，说我的限制是“20”，但是如何计算将进入查询的偏移量？我知道在点击时发送 ajax 请求的基础知识。像这样的东西会在点击时被调用

```
 $.ajax({
       //request parameters and success and failure callback

     }) 
```

对此的任何帮助或指导都会非常有帮助。
谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T05:33:51.847

嘿伙计，我只是给你一个想法：

考虑您有表链接和列名以及其中有链接的链接。

首先在你的html中直接使用php。

**索引.HTML**

```
<html>
<head>
<script type="text/javascript" src="jquery.js">
<script type="text/javascript">
$(document).ready( function() {
$("#more").click( function() {
var get = document.getElementsByClassName('num');
var numberofget = "limitnext="+get.length;
$.ajax({
type : "POST",
url : "more_results.php",
data : numberofget,
cache : false,
success : function(html){
$(this).remove();
$("#results").append(html);
}
});
});
});
</head>
<body>
<div id="results">
<?php

include("db.php");

$query1 = "SELECT * FROM Links LIMIT 0 , 20";
$query2 = "SELECT * FROM Links";
$result1 = mysql_query($query1);
$result2 = mysql_query($query2);
$count = mysql_num_rows($result2);

while($rows=mysql_fetch_array($result1)){
$links=$rows['links'];
echo "<div class='num'>".$links."</div>";
}

if($count>=20){
echo "<a id='more' href='#'>More Results of Links</a>";
}

?>
</div>
</body>
</html> 
```

**more_results.php**

```
<?php

include "db.php";

$limit=$_POST['limitnext'];
$limitaddup=$_POST['limitnext']+20;

$query1 = "SELECT * FROM Links LIMIT ".$limit." , ".$limitaddup.";
$query2 = "SELECT * FROM Links";    
$result1 = mysql_query($query1);    
$result2 = mysql_query($query2);
$count = mysql_num_rows($result2);

while($rows=mysql_fetch_array($result1)){    
$links=$rows['links'];
echo "<div class='num'>".$links."</div>";
}

if($count>=$limitaddup){    
echo "<a id='more' href='#'>More Results of Links</a>";    
}    
?> 
```

# php - 使用php将json数据插入mysql数据库

> ID：13055130
> 
> 赞同：0
> 
> 时间：2012-10-24T18:06:54.113
> 
> 标签：php, mysql

我正在尝试将数据从 json 文件发送到 mysql 数据库。我首先将数据放入一个数组，然后发送到一个 sql 查询，但我在使其正常工作时遇到了一些麻烦。这是我的代码。

```
$connect=mysql_connect('localhost', 'username', 'password');

IF (!$connect){
die ('Failed Connecting to Database: ' . mysql_error());}

  $json = file_get_contents('file.json');
  $data= json_decode($json);

  $array=array();

  foreach ($data->data->children as $postdata){
      $array['url'] = $postdata->data->url;
      $array['id'] = $postdata->data->id;

  };

  $columns = implode(",",  array_keys($array));
  $escaped_values = array_map('escape_string', array_values($array));
  $values = implode(", ", $escaped_values);
  $QUERY = "IF (EXISTS(SELECT * FROM mytable) IS NOT NULL)
            TRUNCATE TABLE mytable;

      INSERT INTO mytable ($columns) VALUES ($values)";

  mysql_query($QUERY);

  mysql_close($connect); 
```

' 我对此很陌生，所以这可能是完全错误的，但我想知道这是否有问题，或者是否有更有效的方法来做这件事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T18:09:22.617

从[手册](http://php.net/manual/en/function.mysql-query.php)：

> mysql_query() 向当前活动的数据库发送一个唯一查询（不支持多个查询）

您在 1 个电话中发送 2 个查询，这是不受支持的。

# javascript - javascript重定向到父级

> ID：13055131
> 
> 赞同：3
> 
> 时间：2012-10-24T18:07:05.093
> 
> 标签：javascript, redirect

> **可能重复：**
> [使用 JavaScript 从 iframe 操作重定向父窗口](https://stackoverflow.com/questions/580669/redirect-parent-window-from-an-iframe-action-using-javascript)

我有一个带有 iframe 的页面，并且在这个 iframe 的内容中，所有窗口都有重定向，我该怎么做？

试过：

`window.location.href = 'logged.html';`

如果页面是在框架或向上打开的，我可以得到吗？

```
 if(isiframe) window.top.location.href 
```

- - 解决方案 - -

```
if($("#cboxOverlay", top.document).length > 0)
  if($("#cboxOverlay", top.document).css("display") != 'none')
    window.top.location.href = '{{ path('portada') }}'; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T18:12:01.340

如果它们在同一个域中，您可以使用

```
window.top.location.href = 'logged.html'; 
```

否则stackoverflow中有很多类似的线程：

[使用 Javascript 从 iframe 跨域 URL 访问](https://stackoverflow.com/questions/1378433/cross-domain-url-access-from-iframe-using-javascript/1378456#1378456)

[使用 JavaScript 从 iframe 操作重定向父窗口](https://stackoverflow.com/questions/580669/redirect-parent-window-from-an-iframe-action-using-javascript)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T18:09:40.577

`window.top.location.href = "http://www.yourwebsite.com";`（但 IFrame 和顶部窗口必须在同一个域中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T18:09:21.977

您需要重定向“父母”吗？

```
window.top.location = 'logged.html'; 
```

# vbscript - vbscript 使用 wshshell.run 和选项 8，窗口仍然窃取焦点？

> ID：13055132
> 
> 赞同：2
> 
> 时间：2012-10-24T18:07:11.190
> 
> 标签：vbscript

编码：

```
WshShell.Run quote & "C:\Program Files\ImageMagick-6.7.0-Q16\composite.exe" & quote & " -dissolve 65 -geometry +65+65 -gravity southeast C:\watermark.png " & quote & file & quote & " " & quote & file & quote, 8, true 
```

报价被定义为 Chr(34)

每张经过处理的照片都会弹出一个新的控制台框，它会抢走我正在处理的任何事情的焦点。根据[http://technet.microsoft.com/en-us/library/ee156605.aspx](http://technet.microsoft.com/en-us/library/ee156605.aspx)我选择了选项 8。我不想最小化似乎是其他选项的窗口，只是让它们留在后台.

我还尝试了以下可能性：

0 = 有效，但不表示进程正在进行。

4 = 允许我在另一个窗口中工作，例如在弹出控制台框的区域之外键入电子邮件，但控制台框仍然呈现在所有内容之上。

6 和 7 = 有效，但仅在任务栏中显示最小化的窗口。如果必须，我将使用选项 7。

我究竟做错了什么？或者这是预期的行为？有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T18:34:46.027

我相信这是预期的行为。当您运行 wshShell.Run 时，您是在告诉程序窗口的*初始状态**应该是什么*。这并不意味着窗口后面的程序不能决定改变状态。

例如，如果您通过 wshShell.Run 打开记事本并传递一个 8，它将配合并保持不专注。但是，如果您打开 Calc.exe，无论您告诉它使用何种状态，它总是会窃取焦点（我只尝试了 0-9）。大概composite.exe 是那些不会接受命令的程序之一。

一个可能的（棘手的）解决方法是继续强制您当前的窗口获得焦点（例如，如果在 IE 中完成，这需要低安全性。[如何使用 vbscript 给窗口焦点](https://stackoverflow.com/questions/10964630/how-to-mock-the-background-window-to-active-state-using-vb-script)）。

# javascript - 使用 javascript，如何设置通过 Silverlight 渲染的 Bing 地图的地图模式？

> ID：13055133
> 
> 赞同：0
> 
> 时间：2012-10-24T18:07:15.263
> 
> 标签：javascript, silverlight, map, bing, mode

我用谷歌搜索了很多，但未能找到这个问题的答案，问题：我正在加载本 MSDN 教程中指定的 Bing 地图： [使用脚本合并地图功能]](http://msdn.microsoft.com/en-us/library/ee681891.aspx)

现在地图加载正确，但在“onSilverlightLoadedHtml”js函数中，当我尝试使用以下js语句设置其模式时，它给了我错误：map.mode =“aerial”

萤火虫上显示的错误如下：未捕获的异常：对象不支持此属性或方法

我搜索了很多，但 Bing 地图 Silverlight 上的大多数资源都在 XAML 中或使用一些服务器端编码。但是谁能告诉我，我怎样才能通过 javascript 实现我的目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T18:22:01.613

好吧....我一整天都在寻找解决我提到的问题的方法，但什么也没找到，现在刚刚在stackoverflow上发布后，我想再试一次，是的....宾果....这次奏效了。这是解决方案：

函数 onSilverlightLoadedHtml(plugIn, userContext, sender) {

var slCtl = document.getElementById(plugIn.id);

var mode = slCtl.Content.services.createObject("Microsoft.Maps.MapControl.AerialMode");

slCtl.Content.map.Mode = 模式；

}

# google-app-engine - 在我的项目中，控件转到 http 到 https，但在 http 中，我将值放在会话中，但控件转到 http，值为 null

> ID：13055135
> 
> 赞同：1
> 
> 时间：2012-10-24T18:07:27.860
> 
> 标签：google-app-engine

我正在与`googleapp`. 在我的项目中，我从 LinkedIn 获取连接。它在本地工作正常，但是当我部署`googleappengine`它时它不起作用。我的控制从 http 转到 https(LinkedIn Login Page )，当时我的会话值为空，请帮助我。

```
 OAuthService service = new ServiceBuilder()
        .provider(LinkedInApi.class)
         .apiKey("ln835u1zgg0c")
         .apiSecret("I9Bz3lloYT8jlO6P").scope("r_network")
          .callback("http://mygbuddy.appspot.com/CallBackUrl.jsp")
           .build();

        Token requestToken=service.getRequestToken();
        HttpSession session=request.getSession();
        session.setAttribute("service", service);
        session.setAttribute("requesttoken", requestToken);

              CallBackUrl.jsp
            <%
                  out.println(session.getAttribute("service"););

                 %> 
```

在jsp中我得到了null请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T21:26:48.897

GAE 是一个分布式系统。因此，您的请求可以在多个启动的实例中的任何一个上处理。不同实例之间的公共会话数据是使用 DataStore 持久性完成的。当您将某些内容放入会话时，它实际上存储在 DataStore 中。这意味着属性应遵循 DataStore 持久性要求 ( [https://developers.google.com/appengine/docs/java/datastore/entities](https://developers.google.com/appengine/docs/java/datastore/entities) )。

标准 OAUthServiceImpl GAE 类不可序列化（检查[http://code.google.com/p/googleappengine/source/browse/trunk/java/src/main/com/google/appengine/api/oauth/OAuthServiceImpl.java?r =194](http://code.google.com/p/googleappengine/source/browse/trunk/java/src/main/com/google/appengine/api/oauth/OAuthServiceImpl.java?r=194) )，因此它不能存储在 DataStore 中并在以后访问。

# jboss7.x - JBOSS 7 & 批量服务

> ID：13055136
> 
> 赞同：2
> 
> 时间：2012-10-24T18:07:30.067
> 
> 标签：jboss7.x

我有一个建立在 JBOSS 7 AS 之上的服务器端。

我需要每 24 小时运行一次批处理以在数据库上执行一些操作。虽然实现该服务很容易，但我想知道最好的启动是...有可用的示例吗？

在我以前的 JBOSS 时代，我会通过一个 boostrap servlet 来启动它。

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:38:08.100

使用 EJB3.1 计时器：http: [//javahowto.blogspot.be/2010/04/ejb-31-timer-simple-example.html](http://javahowto.blogspot.be/2010/04/ejb-31-timer-simple-example.html)

```
@Stateless
public class BatchLauncher {

   @Schedule(hour = "12", minute = "0")
   private void checkInventory() { 
```

默认情况下，JBoss 7 将扫描您的 war/ear 以查找 ejb3 注释类。对于@Stateless bean，JBoss 将创建一个单例并使其可以通过 JNDI 访问。

在单例中，JBoss 7 将找到 @Schedule 注释并使用时间表安排方法调用。

# android - 根据硬编码到图像中的数据加载信息

> ID：13055145
> 
> 赞同：0
> 
> 时间：2012-10-24T18:08:03.960
> 
> 标签：android, xml, map, metadata, hardcoded

我在 Android 应用程序中使用了一些基于地图的图像，每张地图都包含编号的航点和每个航点之间的高亮路径。该地图数据已全部硬编码到地图图像中。

我的客户希望能够单击每个航点并在弹出窗口中显示一些相关信息。那么任何人都可以建议将弹出数据附加到基于图像的航路点位置的最简单方法吗？

我想也许使用图像识别算法来扫描每个航点位置，但这可能不会完全准确并且资源密集。

我唯一可行的选择是要求客户为每个航点位置提供相关的 xml 元数据之类的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T18:15:37.263

我肯定会走额外数据的路线。在旅途中提取积分太昂贵了。

尽管将地图上的点转换为屏幕上的点会很有趣。

# macos - 尝试在 OS X 上运行 scala 时如何修复权限被拒绝错误？

> ID：13055146
> 
> 赞同：0
> 
> 时间：2012-10-24T18:08:17.307
> 
> 标签：macos, scala

我将提取的文件放到不同的地方...尝试了 usr/local、我的主目录等。甚至在文件上尝试了 chmod 777。当我尝试运行解释器时，我不断收到 Permission Denied。/bin 目录肯定在我的 $PATH 中，我已经重新启动了终端。想法？

更新：不知何故，我通过删除所有内容、再次提取 Scala 并在 .bash_profile 中引用我的 /Users/me/scala/ 文件夹来修复它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:16:04.173

您是否尝试过[修复权限](http://en.wikipedia.org/wiki/Repair_permissions)？

# riak - 在存储桶之间复制数据 - RIAK

> ID：13055149
> 
> 赞同：1
> 
> 时间：2012-10-24T18:08:33.717
> 
> 标签：riak

我有一个包含日志数据的存储桶 b1。现在我正在尝试通过添加添加二级索引将它们复制到新存储桶中。在旧存储桶中，每个条目都有 60 个块的 JSON。我希望每个块都作为新存储桶中的新条目写入。

我使用了 riak java 客户端，从旧存储桶中读取每个条目，解析 JSON 并通过添加 secIndex 对新存储桶进行 60 次写入调用 [json 中的每个块一个]。这工作得很好。但是整个过程真的很慢，我的旧存储桶有近 1000 万个条目。

有没有更有效的方法来做到这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T18:54:00.430

一种可能加快速度（但也会给集群带来大量负载）的方法是开发一两个自定义映射和/或缩减阶段函数，并将拆分和插入作为一个大型映射缩减作业的一部分执行。可以通过例如使用密钥过滤将其分成几个较小的任务。

由于您需要访问内部 Riak 客户端才能插入新记录，因此这些函数（至少插入函数）需要在 Erlang 中开发，因为目前无法从 JavaScript 执行插入。

这需要一些时间来开发和测试，所以如果这是一次性的活动（听起来像是），它可能不值得。

如果您还没有这样做，您最好尝试对数据进行分区并尝试在多个并行流中执行迁移。

# assembly - y86 命令列表？

> ID：13055154
> 
> 赞同：6
> 
> 时间：2012-10-24T18:08:55.603
> 
> 标签：assembly, y86

我正在寻找一种将某些代码转换为 y86 等效代码的方法。问题是我很难找到一个好的 y86 函数列表。我可以找到一些功能，但不是可用的主要功能的良好列表。有谁知道我在哪里可以找到这样的清单？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T18:43:55.247

请参阅[第 4 章：处理器设计（预览版）](http://csapp.cs.cmu.edu/public/ch4-preview.pdf)，它来自[计算机系统：程序员视角](https://rads.stackoverflow.com/amzn/click/com/013034074X)¹，它对所有可用功能都有很好的参考。您必须向下滚动才能找到参考。但它就在那里。

列出的说明是：

```
halt
nop
rrmovl
irmovl
rmmovl
mrmovl
OPl (integer operation)
    addl
    subl
    andl
    xorl
jXXX (branch condition)
    jmp
    jle
    jl
    je
    jne
    jge
    jg
cmovXX (data transfer condition)
    cmovle
    cmovl
    cmove
    cmovne
    cmovge
    cmovg 
call
ret
pushl
popl 
```

* * *

¹本文由 Randal E. Bryant 和 David R. O'Hallaron 撰写，他们在早期的一篇论文中*省略*了数据传输条件运算符。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-11-17T03:21:11.547

这很容易[成为我找到的最佳资源](http://web.cse.ohio-state.edu/~reeves/CSE2421sp13/PracticeProblemsY86.pdf)。

该文档包括说明及其相应的十六进制值，以及从头开始编写 y86 的人的设置代码。

# netbeans - 找出 NetBeans 中本地服务器和远程服务器之间发生了哪些文件更改？

> ID：13055155
> 
> 赞同：1
> 
> 时间：2012-10-24T18:08:58.697
> 
> 标签：netbeans, ftp, synchronization, netbeans-7

我在 Windows 机器上使用 NetBeans 7.2.1 进行 PHP (Drupal) 开发。我正在通过 SFTP 连接到远程开发服务器。所以我的站点在本地运行和在远程服务器上运行。我将我的设置设置为当我在本地保存文件时它不会自动上传到远程开发服务器。我这样做是为了如果有人正在查看开发服务器，他们不会在我开发时看到不可靠的东西。一旦我把它上传到我想要上传的地步，我知道我可以通过右键单击并选择上传来手动上传每个文件，但有时我可能会忘记我可能处理过的所有各种文件。不幸的是，我们没有使用 GIT 或 SVN，否则这很容易。有没有办法对我的本地机器上的目录结构与什么进行比较？s 在远程服务器上并有选择地上传已更改的文件？我知道有“同步”，但是当我这样做时，它并没有让我有机会看到发生了什么变化，它只是开始同步所有内容。这在 NetBeans 中是否可行？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T02:13:31.547

您可能错过了单击文件后激活的差异按钮。

![在此处输入图像描述](../Images/c9acd8444cb6d766bd953991081eb91f.png)

![在此处输入图像描述](../Images/890c287d8b81470aaf3c4baa9e16f708.png)

# php - 如何在类 { function { function }} 中引用 $this？

> ID：13055158
> 
> 赞同：1
> 
> 时间：2012-10-24T18:09:16.973
> 
> 标签：php, function, scope

我有一个 php 类`Assets`。其中`Assets`有各种处理资产的公共功能（缓存、缩小、组合......）。其中一个公共功能包含执行`preg_replace_callback()`. 这个内部函数需要访问其他公共函数之一，但我无法调用其他函数。

**这是设置：**

```
class Assets
{

    public function img($file)
    {

        $image['location'] = $this->image_dir.$file;
        $image['content'] = file_get_contents($image['location']);
        $image['hash'] = md5($image['content']);
        $image['fileInfo'] = pathinfo($image['location']);

        return $this->cache('img',$image);

    }

    public function css($content)
    {

        . . .

        function parseCSS($matched){

            return $this->img($matched); // THIS LINE NEEDS TO REFERENCE function img()

        }

        $mend = preg_replace_callback(
            '#\<parse\>(.+?)\<\/parse\>#i',
            'parseCSS',
            $this->combined_css
        );

        . . .

    }

} 
```

**这是我尝试过的：**

> `$this->img($matched)`
> 
> *错误：不在对象上下文中使用 $this - 指`$this->` 内部`parseCSS()`*
> 
> `Assets::img($matched)`
> 
> *错误：不在对象上下文中使用 $this - 指`$this->` 内部`img()`*

那么，**如何`$this`从内部函数中访问公共函数呢？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T18:13:43.017

这会更合适：

```
public function css($content)
{
    //. . .
    $mend = preg_replace_callback(
        '#\<parse\>(.+?)\<\/parse\>#i',
        array($this, 'parseCSS'),
        $this->combined_css
    );
    //. . .
}

public function parseCSS($matched){
    return $this->img($matched); // THIS LINE NEEDS TO REFERENCE function img()
} 
```

`parseCSS`每次调用您的原始方法都会导致定义 - 如果您调用两次`css`，这可能会导致致命错误。`css`在我修改后的示例中，所有范围问题也更加简单明了。在您的原始示例中，`parseCSS`是全局范围内的函数，与您的类无关。

编辑：此处记录了有效的回调公式：http: [//php.net/manual/en/language.types.callable.php](http://php.net/manual/en/language.types.callable.php)

```
// Type 1: Simple callback
call_user_func('my_callback_function'); 

// Type 2: Static class method call
call_user_func(array('MyClass', 'myCallbackMethod')); 

// Type 3: Object method call
call_user_func(array($obj, 'myCallbackMethod'));

// Type 4: Static class method call (As of PHP 5.2.3)
call_user_func('MyClass::myCallbackMethod');

// Type 5: Relative static class method call (As of PHP 5.3.0)
call_user_func(array('B', 'parent::who')); // A

//Type 6: Closure
$double = function($a) {
    return $a * 2;
};

$new_numbers = array_map($double, $numbers); 
```

从PHP 5.4 开始，也可以使用基于[闭包](http://php.net/closure)的解决方案——这实际上与您最初的意图相似。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T18:17:56.537

这并不像你认为的那样。“内部”函数只是**全局**范围内的另一个函数：

```
<?php
class Foo
{
    public function bar()
    {
        echo 'in bar';

        function baz() {
            echo 'in baz';
        }
    }
}

$foo = new Foo();
$foo->bar();
baz(); 
```

另请注意，多次调用该方法时会导致*致命错误：*`bar`

```
<?php
class Foo
{
    public function bar()
    {
        echo 'in bar';

        function baz() {
            echo 'in baz';
        }
    }
}

$foo = new Foo();
$foo->bar();
$foo->bar();
baz(); 
```

> 致命错误：无法重新声明 baz()（之前在 /code/8k1 中声明

你应该按照[弗兰克法默的回答](https://stackoverflow.com/a/13055231/508666)走，虽然我不会那样做`public`。

# java - 使用 SQL Server sp_send_dbmail 从 java 发送电子邮件

> ID：13055162
> 
> 赞同：0
> 
> 时间：2012-10-24T18:09:22.923
> 
> 标签：java, sql-server-2012, email

我正在尝试使用 SQL Server sp_send_dbmail 从 java 发送电子邮件

从 SQL Server 本身内部，以下工作可以很好地发送 HTML 电子邮件。[[即我已按照Microsoft 的说明](http://technet.microsoft.com/en-us/library/hh245116.aspx)正确设置了发送电子邮件 的所有内容 ]

```
EXEC msdb.dbo.sp_send_dbmail
    @profile_name = 'example profile',
    @recipients = 'me@example.com',
    @body = @tableHTML,
    @body_format = 'HTML' ,
    @subject = 'Email from SQL Server'; 
```

但是，当尝试使用以下代码从 java 发送时

```
public static synchronized int sendEmail(String profileName,String recipients,String body, String body_format,String subject) {
        final String sendEmailStr = "{execute msdb.dbo.sp_send_dbmail (?,?,?,?,?,?)}";
        dbConn  = DBConnection.getInstance();
        Connection conn = dbConn.getConnection();
        CallableStatement stmt = null;
        int result = RESULT_FAILED;
        try {
            stmt = conn.prepareCall(sendEmailStr);
            stmt.setString("profile_name", profileName);
            stmt.setString("recipients", recipients);
            stmt.setString("body", body);
            stmt.setString("body_format", body_format);
            stmt.setString("subject", subject);

            stmt.registerOutParameter(6, java.sql.Types.INTEGER);
            stmt.execute();
            result = stmt.getInt(6);
        } catch(SQLException e) {
            System.out.println(e);
            Log.getInstance().write("Exception on sendEmail " + e.toString());
        } finally {
            try {
                stmt.close();
                dbConn.returnConnection(conn);
            } catch(SQLException e) {
                System.out.println(e);
                Log.getInstance().write("Exception on sendEmail " + e.toString());
            }
        }
        return result;
    } 
```

我得到以下异常`com.microsoft.sqlserver.jdbc.SQLServerException: com.microsoft.sqlserver.jdbc.SQLServerException: Parameter profile_name was not defined for stored procedure`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:17:14.843

请更改您的查询字符串以使用`call`如下：

```
 final String sendEmailStr "{ call msdb.dbo.sp_send_dbmail (?,?,?,?,?,?) }"; 
```

要使用当前数据库中的存储过程，请在当前数据库中执行此操作以通过本地过程包装 MSDB 调用：

```
 Use [MyDatabase]; 
     CREATE PROCEDURE [MyDB].[SEND_EMAIL_DB] 
       @profile_name2 varchar(max), 
       @recipients2 varchar(max), 
       @body2 varchar(max), 
       @body_format2 varchar(max), 
       @subject2 varchar(max), 
       @p_result int OUTPUT 
     AS 
       BEGIN  
          exec msdb.dbo.sp_send_dbmail  @profile_name=@profile_name2,
                   @recipients=@recipients2,@body=@body2,
                   @body_format=@body_format2,@subject=@subject2 
       END 
```

# javascript - 无法使用 jquery 插件弹出窗口

> ID：13055164
> 
> 赞同：0
> 
> 时间：2012-10-24T18:09:36.200
> 
> 标签：javascript, jquery

我正在使用 jquery 插件来显示弹出窗口

当我使用插件的 url 时，我得到一个弹出窗口

```
 <link href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css"     rel="stylesheet" type="text/css" />
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script> 
```

但是当我从下载的插件中使用本地源时...我无法显示弹出窗口

```
 <link rel="stylesheet"href="./src/css/jquery.mobile-1.2.0.min.css" type="text/css">
 <script src="./src/jsLibraries/jquery.mobile-1.2.0.min.js" type="text/javascript"></script>
    <script src="./src/jsLibraries/jquery.min.js" type="text/javascript"></script> 
```

无法克服这个错误....我从 jquery-mobile 网站下载了插件

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T18:11:38.697

尝试在 jquery.mobile 之前包含 jquery。很确定后者需要前者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T18:10:52.393

我认为您不需要在脚本标签中提供 type="text/javascript" 。还要检查您的文件的 src。

# xml - xsd 中混合模式的约束

> ID：13055173
> 
> 赞同：1
> 
> 时间：2012-10-24T18:10:14.083
> 
> 标签：xml, xsd

我想制作一个允许以下内容的 xsd：

```
<document>
  Here is first paragraph with e.g. <i>itallic</i> and <b>bold</b>.

  <p>Here is the second paragraph also with some <i>itallic</i></p>

  <p>Here is the third paragraph</p>

  <!-- If there is any character data here it should be rejected -->
</document> 
```

例如，我想让第一段周围没有 <p> 标记，但后面的段落必须有它。

关于我应该看什么的任何提示？在我看来，通过在 complexType 定义上放置混合 =“真”，我无法得到我想要的东西。

更新：这不是因为第一段很特别。这只是因为我想避免编写一些标签。例如，我希望能够通过以下方式制作订单列表：

```
<ol>
   <le>Here is the first list element, only one paragraph, easy to write</le>
   <le>Here is the second element.
       <p>The second element has an extra paragaph.</p>
   </le>
</ol> 
```

通常情况下，每个列表元素中只有一个段落，因此必须同时编写 <le> 和 <p> 很烦人。不过，我想支持列表元素中多个段落的不寻常情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T18:34:57.537

事实上，您无法使用 XSD 1.0 获得您想要的东西。虽然 XSD 1.0 混合内容可以控制出现在实例 XML 中的子元素的顺序和数量，但它无法控制其中的文本。拆分两个“领域”可能是您唯一的选择，假设您不允许 <p> 标签之外的任何文本：第一个将是混合内容，对于第一段，其他将是任意重复的 p 序列带有混合或任何内容的标签。

我正在举例说明一个可能的例子，假设第一段是“特殊的”，因为是“介绍”；所以对于这个 XML：

```
<document> 
  <intro>Here is first paragraph with e.g. <i>itallic</i> and <b>bold</b>.</intro>  
  <p>Here is the second paragraph also with some <i>itallic</i></p>  
  <p>Here is the third paragraph</p>  
</document> 
```

您可以定义如下内容：

```
<?xml version="1.0" encoding="utf-8"?>
<!--XML Schema generated by QTAssistant/XML Schema Refactoring (XSR) Module (http://www.paschidev.com)-->
<xsd:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <xsd:element name="document">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:element name="intro">
          <xsd:complexType mixed="true">
            <xsd:sequence>
              <xsd:element name="i" type="xsd:string" />
              <xsd:element name="b" type="xsd:string" />
            </xsd:sequence>
          </xsd:complexType>
        </xsd:element>
        <xsd:element maxOccurs="unbounded" name="p">
          <xsd:complexType mixed="true">
            <xsd:sequence minOccurs="0">
              <xsd:element name="i" type="xsd:string" />
            </xsd:sequence>
          </xsd:complexType>
        </xsd:element>
      </xsd:sequence>
    </xsd:complexType>
  </xsd:element>
</xsd:schema> 
```

当然，您必须改进标记的使用方式，但您明白了……您的转换可以根据需要处理剥离 <intro> 标记。

如果您对提示的请求意味着您可能使用的其他模式语言，那么...

*   如果您可以部署 XSD 1.1 模式，`xsd:assert`那么这里的新模式可能会对您有所帮助。

*   如果您可以部署其他模式语言，那么 Relax NG 就是您的选择；试试这个作为[介绍](http://www.xmlhack.com/read.php_item=1880)。

# uml - 对象图中的聚合关联

> ID：13055174
> 
> 赞同：3
> 
> 时间：2012-10-24T18:10:20.087
> 
> 标签：uml, aggregation, object-diagram

类之间的关联（当然是在类图中）是对不同对象（在对象图中）之间的一组链接的抽象。聚合是一种特殊的关联，它有一个特殊的符号，菱形。

```
A House has many (zero to many) windows. 
```

![在此处输入图像描述](../Images/e805186685af5c03c7141282458475c9.png)

*下图中的对象名称实际上应该加下划线。我的这个快速图片的绘图[工具 yuml](http://yuml.me/diagram/scruffy/class/draw)没有明显的调整，所以我希望这不会太混乱。两张图片的唯一区别是第一张中的菱形标志。*

```
my:House has side:Window
         has back:Window
         has front:Window 
```

![在此处输入图像描述](../Images/ceea30bb0452b388b78f68474578dfe7.png)

对象即实例图中是否也使用了菱形符号？还是对象图中的链接总是只是简单的线条？

![在此处输入图像描述](../Images/8a36c6dbc41e8771785f921f8a6ee478.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T13:15:51.970

您也应该在链接上使用菱形 - 显然只有当关联是聚合时。

顺便提一句。对象名称（和类型）应加下划线以更容易将它们与类区分开来。

[请参阅http://www.omg.org/spec/UML/2.4/Superstructure/PDF/](http://www.omg.org/spec/UML/2.4/Superstructure/PDF/)中的 UML 2.4 上层结构 7.3.22 和图 7.52

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-14T12:00:42.253

你的图表有问题。因为 House 和 window 之间的关系应该是一个组合，而不是聚合。如果我们采用一扇特定的窗户，那扇窗户由一栋且只有一所房子拥有。如果房子死了，窗户也会死。所以这是组合。

您的问题的答案是，“我们不需要在对象图中显示聚合和组合”。

# python - 使用 tkinter 从 python 中的不同函数调用列表框

> ID：13055179
> 
> 赞同：0
> 
> 时间：2012-10-24T18:10:29.103
> 
> 标签：python, oop, user-interface, object, tkinter

我正在尝试从列表框中添加和删除项目，但出现以下错误：

```
files = self.fileList()
TypeError: 'list' object is not callable 
```

如果我不能调用它，我如何访问这个列表？我试图将它用作全局变量，但也许我使用不正确。我希望能够从该列表框中获取项目，并在按下按钮时将它们添加到另一个列表框中。

```
class Actions:

def openfile(self): #select a directory to view files
    directory = tkFileDialog.askdirectory(initialdir='.')
    self.directoryContents(directory)

def filename(self):
    Label (text='Please select a directory').pack(side=TOP,padx=10,pady=10)

files = []
fileListSorted = []
fileList = []

#display the contents of the directory
def directoryContents(self, directory): #displays two listBoxes containing items
    scrollbar = Scrollbar() #left scrollbar - display contents in directory
    scrollbar.pack(side = LEFT, fill = Y) 

    scrollbarSorted = Scrollbar() #right scrollbar - display sorted files 
    scrollbarSorted.pack(side = RIGHT, fill = Y)

    #files displayed in the left listBox
    global fileList
    fileList = Listbox(yscrollcommand = scrollbar.set) 
    for filename in os.listdir(directory):
        fileList.insert(END, filename)
    fileList.pack(side =LEFT, fill = BOTH)
    scrollbar.config(command = fileList.yview)

    global fileListSorted #this is for the filelist in the right window. contains the values the user has selected
    fileListSorted = Listbox(yscrollcommand = scrollbarSorted.set) #second listbox (button will send selected files to this window)
    fileListSorted.pack(side=RIGHT, fill = BOTH)
    scrollbarSorted.config(command = fileListSorted.yview)

    selection = fileList.curselection() #select the file
    b = Button(text="->", command=lambda:self.moveFile(fileList.curselection()))#send the file to moveFile to be added to fileListSorted
    b.pack(pady=5, padx =20)

def moveFile(self,File):
    files = self.fileList()
    insertValue = int(File[0]) #convert the item to integer
    insertName = self.fileList[insertValue] #get the name of the file to be inserted
    fileListSorted.insert(END,str(insertName)) #insertthe value to the fileList array 
```

我将文件更改为以下内容以查看文件是否设置正确并返回一个空数组

```
files = self.fileList
print files
#prints [] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:37:48.500

你从不初始化`self.fileList`（也不`fileListSorted`）。当你写`directoryContents`

```
global fileList
fileList = Listbox(yscrollcommand = scrollbar.set)
... 
```

您在一个名为`fileList`. 您可以在任何`self.fileList`地方使用（或添加`global fileList`所有功能，然后使用`fileList`）。

*但是，我对您对类的使用持怀疑态度，您应该尝试理解面向对象的概念及其在 python 中的实现，或者暂时忽略这些概念。*

* * *

**编辑**

我已尝试运行您的代码，您也可能会更改该行

```
insertName = self.fileList[insertValue] 
```

经过

```
insertName = self.fileList.get(insertValue) 
```

`fileList`ia 小部件和每个 Tkinter 小部件都使用字典表示法来表示属性（例如`self.fileList['background']`）。

请注意，获取一个数字或一个包含数字的字符串，因此您在上面一行的转换是无用的。另请注意，您可以通过`get(0,END)`.

# c - 使用 strtok() 进行令牌识别

> ID：13055180
> 
> 赞同：-1
> 
> 时间：2012-10-24T18:10:29.867
> 
> 标签：c, pointers

我正在尝试读取文件并将等号的左侧与右侧分开，并查看左侧是否为“HOME”。它发现第一个令牌是“HOME”，但没有说明它是否等于“HOME”。基本上写在文件中的行是“ `HOME = /cs/nsf`”。

怎么了？

```
while (fgets(buffer,80,file)) //while end of file
{
   char *token = strtok(buffer,"=");
   printf("first token: %s\n",token); //this correctly prints "HOME"
   if (strcmp(token,"HOME") == 0)
   {
       printf("it doesn't get here");
       token = strtok(NULL,"\n");         //this should return "/cs/nsf" but it doesn't;
       if (token == NULL || strcmp(token," ") == 0)
       {
           fprintf(stderr,"HOME isn't initialised\n")
       }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T18:12:09.273

好吧，由于您用作`=`的唯一分隔符`strtok`，因此您的第一个标记将`=`在输入字符串中包含 之前的空格。所以你解析的第一个标记实际上是`"HOME "`. 这就是您`printf`正在打印的内容。你只是看不到最后的空间。

显然，`"HOME "`不一样`"HOME"`。为 .的分隔符列表添加空格`strtok`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T18:14:25.140

它必须打印“第一个令牌：HOME”（HOME 后面有一个空格）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T18:13:24.177

您需要从令牌末尾修剪空格。它可能正在打印`"HOME "`（注意额外的空间）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T18:17:54.453

你的第一个 printf 打印`"HOME "`。您应该将`"= \t"`其用作令牌字符串，以使其返回`"HOME"`（而不是任何空格）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T18:12:58.030

文件中的 HOME 后面有一个空白。

采用：

```
printf("first token <<%s>>\n", token); 
```

看到问题。然后在比较之前去掉前导和尾随空格。`<<`请注意，使用类似和`>>`（您可以看出我不太使用 XML 文本）显式标记字符串的开头和结尾可以更容易地查看前导和尾随空格以及其他意外效果。我一直认为这是一项有价值的技术。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-24T18:13:01.800

```
HOME = /cs/nsf 
```

所以实际上之前的第一个标记不是`"HOME"`但是`"HOME "`- 注意左边的空间。

要么`" = "`用作第二个参数，`strtok()`要么写`strcmp(token, "HOME ")`来实现你想要的。

# asp.net-mvc - 另一个项目中实体框架 5 上的代码优先数据库

> ID：13055181
> 
> 赞同：0
> 
> 时间：2012-10-24T18:10:36.410
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework-4, asp.net-mvc-4, entity-framework-5

我有一个 ASP.NET MVC 4 站点，其中包含由代码优先方法生成的 MSSQL 数据库。我想在另一个项目中使用这个数据库。这个项目应该从数据库中抓取几个表，更新它们并向用户发送通知。

将现有数据库从第一个项目添加到第二个项目的最佳方法是什么？我正在考虑通过数据库生成 edmx，但这种方法似乎还不够好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T00:32:35.887

您最好将 EF 代码和实体移动到它们自己的库中，然后让您的两个不同项目（Web 和 Windows 服务）引用该库。

然后，如果当您的数据库结构或实体发生变化时，您只需在一个地方执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T18:13:34.203

如果第二个项目不打算修改数据库的结构，那么我将在您的第二个项目中使用数据优先的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T18:37:53.373

您可以在现有数据库上毫无问题地使用 codefirst 映射。如此简单的参考程序集与其他项目中的数据上下文，它将起作用。（不要忘记在其他项目的配置文件中设置连接字符串）

# sms - 多语言短信解决方案

> ID：13055192
> 
> 赞同：2
> 
> 时间：2012-10-24T18:11:38.960
> 
> 标签：sms, sms-gateway, smslib

我正在寻找多语言短信解决方案，它允许我通过 API 发送，我尝试了一些商业解决方案，但仍然没有运气，问题在于发送多语言文本，我必须发送韩语、日语、希伯来语、泰语、中文的短信, 波斯语。

有没有我可以用它来发送的 SMS 解决方案。通过 API 以上述语言发送短信。

以防万一您找不到任何 SMS 解决方案，请提出一种使用任何可以让我发送多语言 SMS 的开源平台来实现它的方法。

提前感谢您回复此帖子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T20:36:44.237

[*免责声明：我为 Nexmo 做一些开发人员宣传。*]

我不确定其他 API，但我知道[Nexmo](http://nexmo.com)支持 Unicode。从[文档](http://www.nexmo.com/documentation/)：

> Nexmo 支持 Unicode 以获得多语言支持。但是，文本长度限制为 70 个字符 - 超过 70 个字符会使您的消息分成几部分。此外，移动设备必须支持字符编码，例如，美国设备可能不显示阿拉伯语。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T13:05:04.903

我不相信有任何预先构建的开源工具可以满足您的要求。但是，您可以毫不费力地构建一个。我会使用谷歌翻译 API 将给定的消息预编译成任何需要的语言。然后我会使用像 Kannel 这样的开源 SMS 网关工具来传输消息。

# asp.net - 固定 ASP.NET Gridview 的列标题

> ID：13055193
> 
> 赞同：0
> 
> 时间：2012-10-24T18:11:40.373
> 
> 标签：asp.net, css, gridview, scroll, panel

我有一个 ASP.NET 面板，里面有一个 gridview。下面是它的标记：

```
<asp:Panel runat="server" ID="searchResultsPanel" CssClass="datagrid" ClientIDMode="Static" style="display:none; max-height:500px; max-width:700px; overflow:auto;" >
    <asp:GridView runat="server" ID="gridMemberInfo" AutoGenerateColumns="false" EmptyDataText="No Members Were Found." OnRowCommand="Command_SearchGrid" ShowHeader="true" ShowHeaderWhenEmpty="true" >
        <PagerSettings Visible="false" />
        <AlternatingRowStyle CssClass="alt" />
        <Columns>
            <asp:ButtonField ButtonType="Link" Text="Select" CommandName="SelectRow" />
            <asp:BoundField  HeaderText="PMI"                DataField="PMI" />
            <asp:BoundField  HeaderText="Product"            DataField="Product" ItemStyle-Width="110px"  />
            <asp:BoundField  HeaderText="County"             DataField="County" />
            <asp:BoundField  HeaderText="Last Name"          DataField="LastName" />
            <asp:BoundField  HeaderText="First Name"         DataField="FirstName" />
            <asp:BoundField  HeaderText="Currently Enrolled" DataField="CurrentlyEnrolled" ItemStyle-Width="50px" />
        </Columns>
    </asp:GridView>
</asp:Panel> 
```

我有面板和gridview的以下CSS：

```
.datagrid table 
{ 
    border-collapse: collapse; 
    text-align: left; 
    width: 100%; 
} 

.datagrid 
{
    font: normal 12px/150% Arial, Helvetica, sans-serif; 
    background: #fff; 
    overflow: hidden; 
    border: 2px solid #006699; 
    -webkit-border-radius: 10px; 
    -moz-border-radius: 10px; 
    border-radius: 10px; 
}

.datagrid table td, .datagrid table th 
{ 
    padding: 3px 10px; 
}

.datagrid table thead th 
{
    background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #00A2F2), color-stop(1, #002C42) );
    background:-moz-linear-gradient( center top, #00A2F2 5%, #002C42 100% );
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#00A2F2', endColorstr='#002C42');
    background-color:#00A2F2; 
    color:#FFFFFF; 
    font-size: 12px; 
    font-weight: bold; 
    border: none;
} 

.datagrid table thead th:first-child 
{ 
    border: 3px; 
}

.datagrid table tbody td
{ 
    color: #00496B; 
    font-size: 12px;
    font-weight: normal; 
}

.datagrid table tbody .alt td 
{ 
    background: #E1EEF4; 
    color: #00496B; 
}

.datagrid table tbody td:first-child 
{ 
    border-left: none; 
}

.datagrid table tbody tr:last-child td 
{ 
    border-bottom: none; 
} 
```

为了让 gridview 与 thead 元素一起呈现，我在后面的代码中执行此操作：`this.gridMemberInfo.HeaderRow.TableSection = TableRowSection.TableHeader;`

由于我将面板的溢出设置为自动，因此当 gridview 有很多行时我可以滚动。我现在想做的是固定标题行，以便在滚动时始终可以看到它。我曾尝试`position:fixed;`在`.datagrid table thead th`CSS 类中进行设置，但没有奏效。我尝试了其他几种选择，但没有运气。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:15:18.183

你不能在 IE 上这样做，因为那里的 css 解释器不考虑thead。您将需要实现一个保存标题的 wapping div。或使用以前做过的：[http ://www.scientificpsychic.com/blogentries/html-and-css-scrolling-table-with-fixed-heading.html](http://www.scientificpsychic.com/blogentries/html-and-css-scrolling-table-with-fixed-heading.html)

或者你可以看看：

[http://demos.devexpress.com/ASPxGridViewDemos/PagingAndScrolling/Scrolling.aspx](http://demos.devexpress.com/ASPxGridViewDemos/PagingAndScrolling/Scrolling.aspx)

取自堆栈答案：[固定 GridView Header 在 asp.net 中具有水平和垂直滚动](https://stackoverflow.com/q/7625706/395890)

# mysql - CAST(0x993902CE AS DATETIME) 从 SQL SERVER 到 MYSQL

> ID：13055194
> 
> 赞同：2
> 
> 时间：2012-10-24T18:11:40.233
> 
> 标签：mysql, sql-server-2008

有谁知道如何`CAST(0x993902CE AS DATETIME)`从 SQL SERVER（[`smalldatetime`二进制格式](http://msdn.microsoft.com/en-us/library/aa258277%28v=sql.80%29.aspx)）到 MYSQL？

我在 mysql 中尝试过`CAST(0X993902CE AS DATETIME)`，但它应该返回 '2007-05-25 11:58:00' 时返回 NULL。

如果有人能告诉我这样做的方法，我将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T18:52:07.803

遵循@MartinSmith 在评论和解决方案中的早期建议，我编写了这个简单的代码

```
SELECT "0x993902CE" INTO @raw_data;

SELECT conv(substr(@raw_data, 3, 4), 16, 10) INTO @days;
SELECT conv(substr(@raw_data, 7, 4), 16, 10) INTO @minutes;
SELECT "1900-01-01 00:00:00" INTO @start_date;
SELECT date_add(@start_date, interval @days DAY) INTO @date_plus_years;
SELECT date_add(@date_plus_years, interval @minutes MINUTE) INTO @final_date;

SELECT @final_date; 
```

[http://sqlfiddle.com/#!2/c960a​​/37](http://sqlfiddle.com/#!2/c960a/37)

您当然可以内联所有内容或将其放入函数中，这更像是概念证明。

# c++ - 编写置换函数

> ID：13055204
> 
> 赞同：1
> 
> 时间：2012-10-24T18:12:13.893
> 
> 标签：c++, vector, permutation

我被要求编写一个使用递归的置换函数。该函数的唯一参数应该是我应该找到所有排列的字符串。该函数应返回具有所有可能排列的向量。我知道我可以`next_permutation`在 STL 算法中使用，但有人要求我不要这样做。

我已经设置了基本案例，并且我知道我需要一个 for 循环，但我不太确定从那里去哪里。有人可以指出我正确的方向吗？

```
vector <string> getPerm(string str)
{
    vector<string> v;
    if(w.length() <= 1)
    {
        v.push_back(str);
        return v;
    }
    else
    {
        for(int i = 0; i < str.size(); i++)
        {
            //Some code
        }
    }
} 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T20:47:16.247

想象一下，您已经有了函数上一次迭代的结果，并返回字符串的前 n-1 个元素的所有排列。

```
vector<string>& v_prev = getPerm(str.substr(0, str.length()-1)); 
```

在

```
//Some code 
```

你的代码的一部分。

另一个提示：使用长度为 0 的字符串作为递归的停止条件。您可以递归地构造 1 长度排列；)

这是整个解决方案：

```
vector<string> getPerm(string str)
{
  vector<string> v; 
  if (str.empty())
  {
    v.push_back(string());
    return v;
  }
  else
  {
    vector<string>& v_prev = getPerm(str.substr(0, str.length()-1));
    for(int i = 0; i < v_prev.size(); i++)
    {
      for (int j = 0; j < v_prev[i].length() + 1; j++)
      {
        string p = v_prev[i];
        p.insert(j, str.substr(str.length() - 1, 1));
        v.push_back(p);
      }
    }
    return v;
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T18:17:33.507

想想字符串“123”的这些排列

```
123
132

213
231

312
321 
```

想想“12”的这些排列

```
12
21 
```

`n`如果你知道所有`n-1`字母子串的排列，你能看到如何构造字母串的排列吗？这种类型的解决方案将是递归的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T18:31:01.727

*   `x`对于每个元素`yourArray`
    *   `yourArray`制作无元素的副本`x`。调用这个新数组`newArray`。
    *   找出所有的排列`newArray`
    *   将元素添加`x`到每个排列的开头

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T19:29:43.303

实施 Ken Bloom 刚刚写的：

```
vector <string> getPerm(string str)
{
  vector<string> v;
  if(str.length() <= 1)
  {
    v.push_back(str);
    return v;
  }
  else
  {
    for(int i = 0; i < str.size(); i++){
      vector<string> perms = getPerm(str.substr(0,i)+str.substr(i+1));

      for(int j = 0; j < perms.size(); j++){
        v.push_back(str[i] + perms[j]);
      }
    }
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T18:40:36.807

尝试这样的事情：

```
permut(s) :
  if s.length=0 : exit;
  else :
    for i=0 to s.length :
      front:=s[i];
      remove(s,i);
      s2 := front + permut(s);
      print s2, NEWLINE; 
```

# google-maps - 谷歌地图打印图标问题

> ID：13055207
> 
> 赞同：3
> 
> 时间：2012-10-24T18:12:22.413
> 
> 标签：google-maps

我使用谷歌地图制作了一张定制的地图，并用不同颜色的图钉将多个地点保存到我的地图上，具体取决于当天每所房子的可用情况。当我打印出地图分发给人们时，我所有不同类型和颜色的图钉都恢复为标准格式。在我点击打印预览之前，他们不会这样做。有谁知道我可以解决这个问题的方法？

# python - HTTPError：HTTP 错误 403：禁止

> ID：13055208
> 
> 赞同：18
> 
> 时间：2012-10-24T18:12:37.657
> 
> 标签：python, python-2.7, beautifulsoup

我制作了一个供个人使用的python脚本，但它不适用于维基百科......

这项工作：

```
import urllib2, sys
from bs4 import BeautifulSoup

site = "http://youtube.com"
page = urllib2.urlopen(site)
soup = BeautifulSoup(page)
print soup 
```

这不起作用：

```
import urllib2, sys
from bs4 import BeautifulSoup

site= "http://en.wikipedia.org/wiki/StackOverflow"
page = urllib2.urlopen(site)
soup = BeautifulSoup(page)
print soup 
```

这是错误：

```
Traceback (most recent call last):
  File "C:\Python27\wiki.py", line 5, in <module>
    page = urllib2.urlopen(site)
  File "C:\Python27\lib\urllib2.py", line 126, in urlopen
    return _opener.open(url, data, timeout)
  File "C:\Python27\lib\urllib2.py", line 406, in open
    response = meth(req, response)
  File "C:\Python27\lib\urllib2.py", line 519, in http_response
    'http', request, response, code, msg, hdrs)
  File "C:\Python27\lib\urllib2.py", line 444, in error
    return self._call_chain(*args)
  File "C:\Python27\lib\urllib2.py", line 378, in _call_chain
    result = func(*args)
  File "C:\Python27\lib\urllib2.py", line 527, in http_error_default
    raise HTTPError(req.get_full_url(), code, msg, hdrs, fp)
HTTPError: HTTP Error 403: Forbidden 
```

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-10-24T18:29:32.020

在当前代码中：

## 蟒蛇2.X

```
import urllib2, sys
from BeautifulSoup import BeautifulSoup

site= "http://en.wikipedia.org/wiki/StackOverflow"
hdr = {'User-Agent': 'Mozilla/5.0'}
req = urllib2.Request(site,headers=hdr)
page = urllib2.urlopen(req)
soup = BeautifulSoup(page)
print soup 
```

## Python 3.X

```
from bs4 import BeautifulSoup
from urllib.request import Request, urlopen

site= "http://en.wikipedia.org/wiki/StackOverflow"
hdr = {'User-Agent': 'Mozilla/5.0'}
req = Request(site,headers=hdr)
page = urlopen(req)
soup = BeautifulSoup(page)
print(soup) 
```

## 带有 Selenium 的 Python 3.X（Javascript 函数执行）

```
from selenium import webdriver as driver

browser = driver.PhantomJS()
p = browser.get("http://en.wikipedia.org/wiki/StackOverflow")
assert "Stack Overflow - Wikipedia" in browser.title 
```

修改版本有效的原因是因为 Wikipedia 检查 User-Agent 是否属于“流行浏览器”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-04T17:20:29.080

```
from urllib.request import Request, urlopen
from bs4 import BeautifulSoup as soup
url = 'yourlink'
req = Request(url , headers={'User-Agent': 'Mozilla/5.0'})

webpage = urlopen(req).read()
page_soup = soup(webpage, "html.parser") 
```

这对我有用，也应该对你有用！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-07T12:19:50.603

```
from urllib.request import urlopen, Request
from urllib.parse import urlparse
from bs4 import BeautifulSoup as soup

def checkURL(requested_url):
    if not urlparse(requested_url).scheme:
        requested_url = "https://" + requested_url
    return requested_url

def requestAndParse(requested_url):
    requested_url = checkURL(requested_url)
    try:
        # define headers to be provided for request authentication
        headers = {'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) ' 
                        'AppleWebKit/537.11 (KHTML, like Gecko) '
                        'Chrome/23.0.1271.64 Safari/537.11',
            'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',
            'Accept-Charset': 'ISO-8859-1,utf-8;q=0.7,*;q=0.3',
            'Accept-Encoding': 'none',
            'Accept-Language': 'en-US,en;q=0.8',
            'Connection': 'keep-alive'}
        request_obj = Request(url = requested_url, headers = headers)
        opened_url = urlopen(request_obj)
        page_html = opened_url.read()
        opened_url.close()
        page_soup = soup(page_html, "html.parser")
        return page_soup, requested_url

    except Exception as e:
        print(e)

# Exmaple:
page, url = requestAndParse(url) 
```

试试上面的代码片段来`beautifulsoup`加载页面。

# wcf-ria-services - 一个完整而简单的命名更新操作示例

> ID：13055213
> 
> 赞同：0
> 
> 时间：2012-10-24T18:12:49.977
> 
> 标签：wcf-ria-services, silverlight-5.0

谁能给我一个指向命名更新完整示例的链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T07:17:43.537

我不知道在哪里可以找到命名更新，但它非常简单：

*   在您的 DomainService 上创建一个方法（说它名为*MyCustUpdate*），该方法在输入时返回`void`并接受您的实体实例（说它名为*MyEntity*）以及最终的其他参数（如 int、string 等原语）
*   装饰这个方法`[Update(UsingCustomMethod = true)]`
*   客户端，在生成的实体*MyEntity*上，您会找到方法*MyCustUpdate*；只需调用它，当您完成编辑后，调用`DomainContext.SubmitChanges`

您的自定义更新方法将作为 SubmitChanges 调用服务器端的一部分调用

# three.js - Mouse / Canvas X, Y to Three.js World X, Y, Z

> ID：13055214
> 
> 赞同：82
> 
> 时间：2012-10-24T18:12:54.397
> 
> 标签：three.js, point, projection, mouse-coordinates

我搜索了一个与我的用例匹配但找不到的示例。考虑到相机，我正在尝试将屏幕鼠标坐标转换为 3D 世界坐标。

我发现所有的解决方案都通过光线相交来实现对象拾取。

我想要做的是将 Three.js 对象的中心定位在鼠标当前“上方”的坐标处。

我的相机位于 x:0, y:0, z:500（尽管它会在模拟过程中移动）并且我的所有对象都位于 z = 0 处，具有不同的 x 和 y 值，因此我需要了解基于 X、Y 的世界对于将跟随鼠标位置的对象，假设 az = 0。

这个问题看起来像一个类似的问题，但没有解决方案：[在 THREE.js 中获取鼠标相对于 3D 空间的坐标](https://stackoverflow.com/questions/10874539/getting-coordinates-of-the-mouse-in-relation-to-3D-space-in-three-js)

给定屏幕上的鼠标位置范围为“top-left = 0, 0 | bottom-right = window.innerWidth, window.innerHeight”，任何人都可以提供将 Three.js 对象移动到鼠标坐标的解决方案沿 z = 0？

* * *

## 回答 #1

> 赞同：148
> 
> 时间：2012-10-26T17:35:12.973

您不需要在场景中有任何对象来执行此操作。

您已经知道相机位置。

使用`vector.unproject( camera )`你可以获得指向你想要的方向的光线。

您只需要从相机位置延伸该射线，直到射线尖端的 z 坐标为零。

你可以这样做：

```
var vec = new THREE.Vector3(); // create once and reuse
var pos = new THREE.Vector3(); // create once and reuse

vec.set(
    ( event.clientX / window.innerWidth ) * 2 - 1,
    - ( event.clientY / window.innerHeight ) * 2 + 1,
    0.5 );

vec.unproject( camera );

vec.sub( camera.position ).normalize();

var distance = - camera.position.z / vec.z;

pos.copy( camera.position ).add( vec.multiplyScalar( distance ) ); 
```

变量`pos`是点在 3D 空间、“鼠标下”和平面中的位置`z=0`。

* * *

编辑：如果您需要“鼠标下方”和平面中的点`z = targetZ`，请将距离计算替换为：

```
var distance = ( targetZ - camera.position.z ) / vec.z; 
```

三.js r.98

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-07-02T11:07:38.620

In r.58 this code works for me:

```
var planeZ = new THREE.Plane(new THREE.Vector3(0, 0, 1), 0);
var mv = new THREE.Vector3(
    (event.clientX / window.innerWidth) * 2 - 1,
    -(event.clientY / window.innerHeight) * 2 + 1,
    0.5 );
var raycaster = projector.pickingRay(mv, camera);
var pos = raycaster.ray.intersectPlane(planeZ);
console.log("x: " + pos.x + ", y: " + pos.y); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-01-02T22:12:23.580

这在使用时对我有用`orthographic camera`

```
let vector = new THREE.Vector3();
vector.set(
    (event.clientX / window.innerWidth) * 2 - 1,
    - (event.clientY / window.innerHeight) * 2 + 1,
    0
);
vector.unproject(camera); 
```

WebGL 三.js r.89

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-06-05T19:14:13.597

下面是我根据 WestLangley 的回复编写的 ES6 类，它在 THREE.js r77 中非常适合我。

请注意，它假定您的渲染视口占据了整个浏览器视口。

```
class CProjectMousePosToXYPlaneHelper
{
    constructor()
    {
        this.m_vPos = new THREE.Vector3();
        this.m_vDir = new THREE.Vector3();
    }

    Compute( nMouseX, nMouseY, Camera, vOutPos )
    {
        let vPos = this.m_vPos;
        let vDir = this.m_vDir;

        vPos.set(
            -1.0 + 2.0 * nMouseX / window.innerWidth,
            -1.0 + 2.0 * nMouseY / window.innerHeight,
            0.5
        ).unproject( Camera );

        // Calculate a unit vector from the camera to the projected position
        vDir.copy( vPos ).sub( Camera.position ).normalize();

        // Project onto z=0
        let flDistance = -Camera.position.z / vDir.z;
        vOutPos.copy( Camera.position ).add( vDir.multiplyScalar( flDistance ) );
    }
} 
```

您可以像这样使用该类：

```
// Instantiate the helper and output pos once.
let Helper = new CProjectMousePosToXYPlaneHelper();
let vProjectedMousePos = new THREE.Vector3();

...

// In your event handler/tick function, do the projection.
Helper.Compute( e.clientX, e.clientY, Camera, vProjectedMousePos ); 
```

vProjectedMousePos 现在包含 z=0 平面上的投影鼠标位置。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-24T18:18:40.897

要获取 3d 对象的鼠标坐标，请使用 projectVector：

```
var width = 640, height = 480;
var widthHalf = width / 2, heightHalf = height / 2;

var projector = new THREE.Projector();
var vector = projector.projectVector( object.matrixWorld.getPosition().clone(), camera );

vector.x = ( vector.x * widthHalf ) + widthHalf;
vector.y = - ( vector.y * heightHalf ) + heightHalf; 
```

要获取与特定鼠标坐标相关的 three.js 3D 坐标，请使用相反的 unprojectVector：

```
var elem = renderer.domElement, 
    boundingRect = elem.getBoundingClientRect(),
    x = (event.clientX - boundingRect.left) * (elem.width / boundingRect.width),
    y = (event.clientY - boundingRect.top) * (elem.height / boundingRect.height);

var vector = new THREE.Vector3( 
    ( x / WIDTH ) * 2 - 1, 
    - ( y / HEIGHT ) * 2 + 1, 
    0.5 
);

projector.unprojectVector( vector, camera );
var ray = new THREE.Ray( camera.position, vector.subSelf( camera.position ).normalize() );
var intersects = ray.intersectObjects( scene.children ); 
```

[这里](http://mrdoob.github.com/three.js/examples/canvas_interactive_cubes.html)有一个很好的例子。但是，要使用投影矢量，必须有用户单击的对象。intersects 将是鼠标位置处所有对象的数组，无论它们的深度如何。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-06-02T15:52:48.197

我的画布比我的整个窗口小，需要确定点击的世界坐标：

```
// get the position of a canvas event in world coords
function getWorldCoords(e) {
  // get x,y coords into canvas where click occurred
  var rect = canvas.getBoundingClientRect(),
      x = e.clientX - rect.left,
      y = e.clientY - rect.top;
  // convert x,y to clip space; coords from top left, clockwise:
  // (-1,1), (1,1), (-1,-1), (1, -1)
  var mouse = new THREE.Vector3();
  mouse.x = ( (x / canvas.clientWidth ) * 2) - 1;
  mouse.y = (-(y / canvas.clientHeight) * 2) + 1;
  mouse.z = 0.5; // set to z position of mesh objects
  // reverse projection from 3D to screen
  mouse.unproject(camera);
  // convert from point to a direction
  mouse.sub(camera.position).normalize();
  // scale the projected ray
  var distance = -camera.position.z / mouse.z,
      scaled = mouse.multiplyScalar(distance),
      coords = camera.position.clone().add(scaled);
  return coords;
}

var canvas = renderer.domElement;
canvas.addEventListener('click', getWorldCoords); 
```

这是一个例子。在滑动前后单击甜甜圈的同一区域，您会发现坐标保持不变（检查浏览器控制台）：

```
// three.js boilerplate
var container = document.querySelector('body'),
    w = container.clientWidth,
    h = container.clientHeight,
    scene = new THREE.Scene(),
    camera = new THREE.PerspectiveCamera(75, w/h, 0.001, 100),
    controls = new THREE.MapControls(camera, container),
    renderConfig = {antialias: true, alpha: true},
    renderer = new THREE.WebGLRenderer(renderConfig);
controls.panSpeed = 0.4;
camera.position.set(0, 0, -10);
renderer.setPixelRatio(window.devicePixelRatio);
renderer.setSize(w, h);
container.appendChild(renderer.domElement);

window.addEventListener('resize', function() {
  w = container.clientWidth;
  h = container.clientHeight;
  camera.aspect = w/h;
  camera.updateProjectionMatrix();
  renderer.setSize(w, h);
})

function render() {
  requestAnimationFrame(render);
  renderer.render(scene, camera);
  controls.update();
}

// draw some geometries
var geometry = new THREE.TorusGeometry( 10, 3, 16, 100, );
var material = new THREE.MeshNormalMaterial( { color: 0xffff00, } );
var torus = new THREE.Mesh( geometry, material, );
scene.add( torus );

// convert click coords to world space
// get the position of a canvas event in world coords
function getWorldCoords(e) {
  // get x,y coords into canvas where click occurred
  var rect = canvas.getBoundingClientRect(),
      x = e.clientX - rect.left,
      y = e.clientY - rect.top;
  // convert x,y to clip space; coords from top left, clockwise:
  // (-1,1), (1,1), (-1,-1), (1, -1)
  var mouse = new THREE.Vector3();
  mouse.x = ( (x / canvas.clientWidth ) * 2) - 1;
  mouse.y = (-(y / canvas.clientHeight) * 2) + 1;
  mouse.z = 0.0; // set to z position of mesh objects
  // reverse projection from 3D to screen
  mouse.unproject(camera);
  // convert from point to a direction
  mouse.sub(camera.position).normalize();
  // scale the projected ray
  var distance = -camera.position.z / mouse.z,
      scaled = mouse.multiplyScalar(distance),
      coords = camera.position.clone().add(scaled);
  console.log(mouse, coords.x, coords.y, coords.z);
}

var canvas = renderer.domElement;
canvas.addEventListener('click', getWorldCoords);

render();
```

```
html,
body {
  width: 100%;
  height: 100%;
  background: #000;
}
body {
  margin: 0;
  overflow: hidden;
}
canvas {
  width: 100%;
  height: 100%;
}
```

```
<script src='https://cdnjs.cloudflare.com/ajax/libs/three.js/97/three.min.js'></script>
<script src=' https://threejs.org/examples/js/controls/MapControls.js'></script>
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-10-29T15:23:44.307

ThreeJS 正在慢慢地远离 Projector.(Un)ProjectVector 并且使用projector.pickingRay() 的解决方案不再起作用，刚刚完成更新我自己的代码..所以最新的工作版本应该如下：

```
var rayVector = new THREE.Vector3(0, 0, 0.5);
var camera = new THREE.PerspectiveCamera(fov,this.offsetWidth/this.offsetHeight,0.1,farFrustum);
var raycaster = new THREE.Raycaster();
var scene = new THREE.Scene();

//...

function intersectObjects(x, y, planeOnly) {
  rayVector.set(((x/this.offsetWidth)*2-1), (1-(y/this.offsetHeight)*2), 1).unproject(camera);
  raycaster.set(camera.position, rayVector.sub(camera.position ).normalize());
  var intersects = raycaster.intersectObjects(scene.children);
  return intersects;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-12-24T17:54:30.723

对于那些使用`@react-three/fiber`（又名 r3f 和 react-three-fiber）的人，我发现这个讨论和 Matt Rossman 的相关代码示例很有帮助。特别是，使用上述方法的许多示例都是针对简单的正交视图，而不是在 OrbitControls 运行时。

讨论：[https ://github.com/pmndrs/react-three-fiber/discussions/857](https://github.com/pmndrs/react-three-fiber/discussions/857)

使用 Matt 技术的简单示例：[https ://codesandbox.io/s/r3f-mouse-to-world-elh73?file=/src/index.js](https://codesandbox.io/s/r3f-mouse-to-world-elh73?file=/src/index.js)

更通用的例子：[https ://codesandbox.io/s/react-three-draggable-cxu37?file=/src/App.js](https://codesandbox.io/s/react-three-draggable-cxu37?file=/src/App.js)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-04-12T16:58:15.987

这是我对创建 es6 类的看法。使用 Three.js r83。rayCaster的使用方法来自这里的mrdoob：[Three.js Projector and Ray objects](https://stackoverflow.com/questions/11036106/three-js-projector-and-ray-objects)

```
 export default class RaycasterHelper
    {
      constructor (camera, scene) {
        this.camera = camera
        this.scene = scene
        this.rayCaster = new THREE.Raycaster()
        this.tapPos3D = new THREE.Vector3()
        this.getIntersectsFromTap = this.getIntersectsFromTap.bind(this)
      }
      // objects arg below needs to be an array of Three objects in the scene 
      getIntersectsFromTap (tapX, tapY, objects) {
        this.tapPos3D.set((tapX / window.innerWidth) * 2 - 1, -(tapY / 
        window.innerHeight) * 2 + 1, 0.5) // z = 0.5 important!
        this.tapPos3D.unproject(this.camera)
        this.rayCaster.set(this.camera.position, 
        this.tapPos3D.sub(this.camera.position).normalize())
        return this.rayCaster.intersectObjects(objects, false)
      }
    } 
```

如果您想检查场景中的所有对象是否命中，您可以像这样使用它。我将上面的递归标志设置为 false，因为对于我的用途，我不需要它。

```
var helper = new RaycasterHelper(camera, scene)
var intersects = helper.getIntersectsFromTap(tapX, tapY, 
this.scene.children)
... 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-04-15T21:44:53.907

尽管提供的答案在某些情况下可能有用，但我几乎无法想象这些情况（可能是游戏或动画），因为它们根本不精确（猜测目标的 NDC z？）。如果您知道目标 z 平面，则不能使用这些方法将屏幕坐标取消投影到世界坐标。但对于大多数情况，你应该知道这架飞机。

例如，如果您按中心（模型空间中的已知点）和半径绘制球体 - 您需要将半径作为未投影鼠标坐标的增量 - 但您不能！恕我直言@WestLangley 的 targetZ 方法不起作用，它给出了不正确的结果（如果需要，我可以提供 jsfiddle）。另一个例子 - 你需要通过鼠标双击来设置轨道控制目标，但没有场景对象的“真实”光线投射（当你没有任何东西可以选择时）。

对我来说，解决方案是在目标点沿 z 轴创建虚拟平面，然后在该平面上使用光线投射。目标点可以是当前轨道控制目标或您需要在现有模型空间中逐步绘制的对象的顶点等。这非常有效并且很简单（打字稿中的示例）：

```
screenToWorld(v2D: THREE.Vector2, camera: THREE.PerspectiveCamera = null, target: THREE.Vector3 = null): THREE.Vector3 {
    const self = this;

    const vNdc = self.toNdc(v2D);
    return self.ndcToWorld(vNdc, camera, target);
}

//get normalized device cartesian coordinates (NDC) with center (0, 0) and ranging from (-1, -1) to (1, 1)
toNdc(v: THREE.Vector2): THREE.Vector2 {
    const self = this;

    const canvasEl = self.renderers.WebGL.domElement;

    const bounds = canvasEl.getBoundingClientRect();        

    let x = v.x - bounds.left;      

    let y = v.y - bounds.top;       

    x = (x / bounds.width) * 2 - 1;     

    y = - (y / bounds.height) * 2 + 1;      

    return new THREE.Vector2(x, y);     
}

ndcToWorld(vNdc: THREE.Vector2, camera: THREE.PerspectiveCamera = null, target: THREE.Vector3 = null): THREE.Vector3 {
    const self = this;      

    if (!camera) {
        camera = self.camera;
    }

    if (!target) {
        target = self.getTarget();
    }

    const position = camera.position.clone();

    const origin = self.scene.position.clone();

    const v3D = target.clone();

    self.raycaster.setFromCamera(vNdc, camera);

    const normal = new THREE.Vector3(0, 0, 1);

    const distance = normal.dot(origin.sub(v3D));       

    const plane = new THREE.Plane(normal, distance);

    self.raycaster.ray.intersectPlane(plane, v3D);

    return v3D; 
} 
```

# iphone - 如何在iOS Master Detail上查看所选行的不同detailView

> ID：13055222
> 
> 赞同：0
> 
> 时间：2012-10-24T18:13:16.433
> 
> 标签：iphone, objective-c, xcode4.5, master-detail, ios5

我正在开发主详细信息应用程序，我想查看所选行的不同 detailView。为了明确我的问题，我在这里举个例子：

主细节

* * *

详情 1 >

* * *

详情 2 >

* * *

目标是当我按下 [detail 1 >] 时给我详细信息 1 行的自我详细视图。然后按 [detail 2] 给出详细信息 2 行的自我详细信息视图。我认为这很清楚。如果可能的话，还可以在每个细节视图中添加自定义按钮和图像！！

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T20:42:59.827

```
DetailViewController *detailView = [[DetailViewController alloc]init];
detailView.tagValue = 1;
[self.navigationController pushViewController:detailView animated:YES]; 
```

您可以将标签值发送到`detailView`并根据该值显示不同的视图。就像`@property(nonatomic)NSInteger tagValue;`在 detailView 的 .h 类中一样创建一个属性并在 .m 类中合成它。现在您可以`tagValue`像这样发送来自大师班

现在您可以检查 in 的值，`tagValue`并`DetailViewController`在此基础上创建您的视图。我想现在很清楚了。但是，如果您仍然有任何问题，您可以编写代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T02:14:03.270

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath

{
    DetailViewController *detailView = [[DetailViewController alloc]init];

    detailView.tagValue = indexPath.row;

    [self.navigationController pushViewController:detailView animated:YES];
} 
```

我们需要给 detailView.tagValue = indexPath.row;

# c# - 意外的 OutOfMemoryException

> ID：13055223
> 
> 赞同：0
> 
> 时间：2012-10-24T18:13:17.703
> 
> 标签：c#, memory-management, memory-leaks, garbage-collection

我曾经有：

```
using (MyWebClient client = new MyWebClient(TimeoutInSeconds))
{
   var res = client.DownloadData(par.Base_url);
   //code that checks res
} 
```

我现在有：

```
using (MyWebClient client = new MyWebClient(TimeoutInSeconds))
{
   client.DownloadDataAsync(new Uri(par.Base_url));
   client.DownloadDataCompleted += (sender, e) =>
   {
       //code that checks e.Result
   }
} 
```

其中 MyWebClient 派生自 WebClient。现在我有很多线程在做这件事，在第一种情况下内存消耗不是问题，而在第二种情况下，我看到内存稳步上升，直到我得到 OutOfMemoryException。我进行了分析，似乎 WebClient 是罪魁祸首，没有被处理并保留下载的数据。但为什么？两种情况有什么区别？也许 e.Result 需要以某种方式处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T18:16:07.043

您的第一种情况将并发下载的数量限制为线程数。您的第二种情况对并发下载的数量没有限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T18:19:59.687

您正在`WebClient`第二个选项中立即处理您的。你有几个选择：

1.  如果您使用的是 .NET 4.5（或安装了 Visual Studio 2012 和 AsyncTargetingPack 的 .NET 4.0），您可以使用`var res = await client.DownloadDataAsync(par.Base_url);`与第一行类似但实际上是异步的代码。
2.  使用正常的延续并摆脱你的`using`障碍

第一个选项如下所示：

```
using (MyWebClient client = new MyWebClient(TimeoutInSeconds))
{
   var res = await client.DownloadDataAsync(par.Base_url);
   //code that checks res
} 
```

第二个选项如下所示：

```
var client = new MyWebClient(TimeoutInSeconds);

client.DownloadDataAsync(new Uri(par.Base_url))
    .ContinueWith(t =>
    {
        client.Dispose();

        var res = t.Result;

        //code that checks res
    }
} 
```

**然而**

您必须根据使用的解决方案更改线程方法。您的代码的第一个版本同步运行，因此如果您有一个专用于 URL 的线程（或连接，或者您正在拆分它们），下载将在该线程上同步运行并阻止它。但是，如果您选择其中任何一个选项，您最终将使用 IO 完成线程来完成您的工作，并将其从主线程中分离出来。从长远来看，这可能会*更好*，但这意味着您必须注意您并行提交的这些请求的数量。

# c# - 为什么不能在 WPF 项目中引用 System.Web.WebPages 和 System.Web.Razor？

> ID：13055228
> 
> 赞同：3
> 
> 时间：2012-10-24T18:13:34.327
> 
> 标签：c#, wpf, visual-studio-2010, razor, razorgenerator

我需要在项目中`Razor Generator`按照[此处](http://haacked.com/archive/2011/08/01/text-templating-using-razor-the-easy-way.aspx)所述使用，`WPF`但我无法添加**对**. 这些 dll通常不可用吗？或者我应该改变一些**配置**？`System.Web.WebPages``System.Web.Razor``RAZOR Generator``WPF`

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T20:29:13.753

您是否在 Extensions 中搜索过（见屏幕截图）？ ![在此处输入图像描述](../Images/dc7b671f80de65458cf4f38d479c821e.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T20:39:16.013

我不知道为什么，但是通过 NuGet 安装[RazorGenerator.Templating](https://stackoverflow.com/questions/8037895/where-can-i-find-system-web-helpers-system-web-webpages-and-system-web-razor)，所有错误都消失了，现在可以正常工作了。

**更新 ：**

我终于可以找到那些`dll`s 。解决方案是：

1-首先我`target framework`从更改`.NET framework 4 client profile`为`.NET framework 4`。

2-然后**向下滚动**列表`.NET components`，**通过**`system.web.`..的第一个列表，向下**滚动**，我在底部**找到了第二个..列表**，他们在那里。`system.web.`

我希望这可以帮助其他人**

# image - TYPO3 上传后可以自动调整图像大小吗？

> ID：13055235
> 
> 赞同：3
> 
> 时间：2012-10-24T18:14:00.833
> 
> 标签：image, resize, resolution, typo3, autoresize

随着超高清相机的出现，我遇到了一个问题，即我的 TYPO3 用户正在将许多不可能的图像分辨率上传到 TYPO3（如 6000 x 4000）。是否有可能自动将其调整为可接受的分辨率？使用 TCA 配置可能会很好，但不幸的是只有一个`maxsize`配置可能。

这些图像附加到许多不同的功能（如页面、页面内容、扩展等），所以我需要某种通用解决方案（我已经知道 TypoScript/pibase 和 extbase 的可能性）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T18:31:58.393

是的。这是可能的。尝试扩展“image_autoresize”

[http://typo3.org/extensions/repository/view/image_autoresize](http://typo3.org/extensions/repository/view/image_autoresize)

# mysql - MySQL - 字符匹配

> ID：13055236
> 
> 赞同：2
> 
> 时间：2012-10-24T18:14:01.103
> 
> 标签：mysql

我如何让 MySQL 对字符匹配更加严格？

我的意思的一个简单例子，说我有一个单列“名称”的表。在本专栏中，我有两个名字：'Jorge' 和 'Jorgé" 这些名字之间的唯一区别是 e 上的 '。如果我运行查询`SELECT * FROM table WHERE name = 'Jorge'`，它将返回

```
+--------+
|  name  |
+--------+
| Jorge  |
| Jorgé  |
+--------+ 
```

如果我运行查询`SELECT * FROM table WHERE name = 'Jorgé'`，它会返回相同的结果表。我如何将 MySQL 设置得更严格，这样它就不会返回两个名称？

提前谢谢。

快速编辑：我使用的是 UTF-8 字符编码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T18:24:40.117

如果您想确保没有相似的字符（如`e`和`é`）被认为是相同的，您应该使用该`utf8_bin`列上的排序规则。我假设你现在正在使用`utf8_general_ci`，它会认为一些相似的字符是相同的。 `utf8_bin`只匹配完全相同的字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T18:33:28.257

@G-Nugget 是正确的，但是由于您正在查看西班牙语内容，因此您可能还对**utf8_spanish_ci**或**utf8_spanish2_ci 感兴趣**。它们对应于现代和传统的西班牙语。“ñ”被认为是一个单独的字母，在传统中“ch”和“ll”也被视为单独的字母。

更多信息：http: [//dev.mysql.com/doc/refman/5.0/en/charset-unicode-sets.html](http://dev.mysql.com/doc/refman/5.0/en/charset-unicode-sets.html)

# iphone - 在 CoreData 中存储 objectID

> ID：13055237
> 
> 赞同：1
> 
> 时间：2012-10-24T18:14:02.600
> 
> 标签：iphone, objective-c, core-data

如果我想在 CoreData 中存储不同实体的 objectsID 列表，那么 objectID 的数据类型是什么，以便我可以在 NSFetchRequest 中使用它来稍后检索实体？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T18:20:32.737

您不能存储 NSManagedObjectID，但可以存储对象的 URI 表示，并使用 NSPersistentStoreCoordinator 的 managedObjectIDForURIRepresentation: 方法检索对象 ID。由于您似乎想要一个列表，我会将其保存在一个新实体中并存储必要的信息以识别它所属的 id 和实体名称，以及其他相关信息。

# jquery - 如何摆脱可折叠菜单的“闪烁”重新加载效果？

> ID：13055243
> 
> 赞同：0
> 
> 时间：2012-10-24T18:14:35.643
> 
> 标签：jquery, html, css, sidebar

我的老板想为我们的网站设计一个可折叠的侧边栏，我已经设法想出了一个。但是，她发现在导航期间（或刷新页面时）侧边栏会不断重新加载，因此很烦人，因此有了这个快速折叠和展开（“闪烁”）效果。是否可以在保留侧栏的可折叠/可扩展功能的同时摆脱它？

链接：http: [//2ddige.com/temps/Services/proteomics%202d_dige.html](http://2ddige.com/temps/Services/proteomics%202d_dige.html)

PS：她希望默认处于展开状态，而不是折叠状态。

```
Code:
// Appear/Disappear
            $('#menu4 > li > a.expanded + ul').show();
            $('#menu4 > li > a').click(function() {
                       $(this).toggleClass('expanded').toggleClass('collapsed').parent().find('> ul').toggle();
            });
            $('#example4 .expand_all').click(function() {
                $('#menu4 > li >   a.collapsed').addClass('expanded').removeClass('collapsed').parent().find('> ul').show();
            });
            $('#example4 .collapse_all').click(function() {
                $('#menu4 > li > a.expanded').addClass('collapsed').removeClass('expanded').parent().find('> ul').hide();
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T21:38:04.980

删除包括 .show() 在内的第一行并将其添加到您的 CSS 中：

```
#menu4 > li > a.expanded + ul {
    display: block;
} 
```

或将其添加到每个 ul 元素中：

```
<ul style="display: block;"> 
```

您所经历的被称为[FOUC](http://en.wikipedia.org/wiki/Flash_of_unstyled_content)，尽管该 wiki 没有提到在页面加载或 domcontentloaded 上使用 javascript 设置元素样式时也会发生 FOUC。

# asp.net - 如果 ViewState 关闭，如何优化代码？

> ID：13055246
> 
> 赞同：-1
> 
> 时间：2012-10-24T18:15:01.957
> 
> 标签：asp.net

```
 protected void Page_Init(object sender, EventArgs e)
         { }  
        protected void Page_Load(object sender, EventArgs e) 
        {     
              if (!IsPostBack)  
              {  
                 DropDownList1.DataSource = SomeObject.GetData();
                 DropDownList1.DataBind();  
                } }  

    protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e) 
    {  
    var selvalue = DropDownList1.SelectedValue;     
    DoSomething(selvalue); 
} 
```

如果 ViewState 关闭，请一些人帮助我使这段代码正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T18:23:58.367

如果关闭视图状态，则需要在每次访问服务器时以及页面初始化之前重新绑定数据。

[没有视图状态的下拉列表示例](http://brendan.enrick.com/post/Using-a-DropDownList-without-ViewState.aspx)

# algorithm - 从连接节点列表中绘制图形

> ID：13055248
> 
> 赞同：5
> 
> 时间：2012-10-24T18:15:04.797
> 
> 标签：algorithm, graph, coordinates, nodes, edges

在一个系统中，我有一个节点列表，这些节点像普通图中一样连接。我们了解整个系统及其所有联系，我们也有一个起点。我所有的边缘都有一个方向。

现在我想自动绘制所有这些节点和边。问题不是实际绘图，而是计算 (x,y) 坐标。所以基本上我想画出整个图表，这样看起来不错。

我的数据结构将类似于：

```
class node:
string text
List<edge> connections 
```

这个问题一定有一些众所周知的算法吗？我找不到任何东西，但我可能使用了错误的关键字。

**我的想法：**

一种方法是将我们的起始节点定位在 (0,0)，然后有一些常数，即“距离”。然后对于每个邻居，它会将距离添加到 y 位置，并且对于作为邻居的每个节点，设置 x= distance*n。

但这确实会带来很多问题——所以这绝对不是要走的路。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-25T16:37:36.840

到目前为止，最常见的方法是使用[强制导向布局](http://en.wikipedia.org/wiki/Force-based_algorithms_%28graph_drawing%29)而不是确定性布局。要点是每个节点都相互排斥（反重力），并且任何连接的节点对相互吸引。经过几次物理模拟迭代后，您可以获得合理的布局。

您可以使用许多布局算法，但结果大相径庭。[GraphViz](http://www.graphviz.org/) fdp ( [Fruchterman & Reingold '91](http://dx.doi.org/10.1002/spe.4380211102) ) 和neato ( [Kamada & Kawai '89](http://dx.doi.org/10.1016/0020-0190%2889%2990102-6) ) 算法有效，但相当陈旧，还有更好的替代方案。[Fruchterman & Reingold '91](http://dx.doi.org/10.1002/spe.4380211102)算法也可用于[NetworkX](http://networkx.lanl.gov/reference/generated/networkx.drawing.layout.spring_layout.html#networkx.drawing.layout.spring_layout)中的Python 。

[Prefuse](http://prefuse.org)提供了一个非常快速和良好的[ForceDirectedLayout Java 类。](http://prefuse.org/doc/api/prefuse/action/layout/graph/ForceDirectedLayout.html)[Hachul & Jünger '05](http://dx.doi.org/10.1007/978-3-540-31843-9_29)详细介绍了 FM^3 算法，该算法在实践中似乎做得相当好（[Hachul & Jünger '06 ），并且在](http://dx.doi.org/10.1007/11618058_22)[Tulip](http://tulip.labri.fr)的 C++ 中可用。

还有大量其他开源工具可以可视化图表，例如 [NodeXL](https://nodexl.codeplex.com/) (C#)，这是一个很棒的入门工具，将网络分析集成到 Excel 2007/2010 中（*免责声明：我是它的顾问*）。其他很棒的工具包括[Gephi](https://gephi.org/) (Java) 和[Cytoscape](http://www.cytoscape.org/) (Java)，而[Pajek](http://vlado.fmf.uni-lj.si/pub/networks/pajek/)、[UCINet](https://sites.google.com/site/ucinetsoftware/home)、[yEd](http://www.yworks.com/en/products_yed_about.html)和[Tom Sawyer](http://www.tomsawyer.com/products/layout/index.php)是一些专有的替代品。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T18:18:51.670

一般来说，这是一个棘手的问题，特别是如果你想开始处理边缘路由并使事情看起来很漂亮。您可以查看[http://www.graphviz.org/](http://www.graphviz.org/)并使用他们的命令行工具，或使用 graphviz 库进行布局并在应用程序中获取 x,y 坐标。

# javascript - 使用 Facebook JavaScript SDK

> ID：13055251
> 
> 赞同：4
> 
> 时间：2012-10-24T18:15:16.683
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-javascript-sdk

这将是您想遇到的入门问题。

我以前使用 Facebook 进行过编程，但没有直接作为 Web 编程 - 所以，我了解 Graph API 的方式以及一般情况下的工作原理，但我没有任何 Web 编程经验，我有点迷茫关于如何从[Facebook 的](http://developers.facebook.com/docs/reference/javascript/) [文档](http://developers.facebook.com/docs/howtos/login/getting-started/)中获得一个可以让我登录的工作网页（目标是尽可能使用纯 HTML/JavaScript，但允许使用 publish_stream 权限在墙上上传图像和发布链接等）。

这是到目前为止我没有完成 Facebook 告诉我的代码（以及我之前看到少量 HTML 后添加的少量代码）：

```
<!DOCTYPE html>
<html>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">
<head>
    The title of the document (test text)
</head>
<body>
<div id="fb-root"></div>
<script>
window.fbAsyncInit = function() {
// init the Facebook JavaScript SDK
    FB.init({
        appId       : 'EDITED OUT FOR PRIVACY BUT IS VALID IN MY CODE',
        channelUrl  : null,
        status      : true,
        cookie      : false,
        xfbml       : false
    });

    FB.getLoginStatus(function(response) {
        if (response.status === 'connected') {
            // connected
        } else if (response.status === 'not_authorized') {
            // not authorized
            login();
        } else {
            // not_logged_in
            login();
        }
    });
};

function login() {
    FB.login(function(response) {
        if (response.authResponse) {
            // connected
            testAPI();
        } else {
            // cancelled
        }
    });
}

function testAPI() {
    console.log('Welcome!  Fetching your information... ');
    FB.api('/me', function(response) {
        console.log('Good to see you, ' + response.name + '.');
    });
}

(function(d){
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) {return;}
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all.js";
    ref.parentNode.insertBefore(js, ref);
}(document));
</script>
</body>
</html> 
```

当我将其保存为 .html 文件并将其放入 Firefox 中时，什么也没有显示（除非我之前输入了一些 hello world 文本`</body>`）。我查看了有关如何运行的 JavaScript / HTML 教程，但无济于事。

我知道它在上一个链接的先决条件部分中说（我会再次链接它，但我在这里太新，stackoverflow 不会让我）“你需要一个让你在线托管 HTML 文件的地方。 " 它还引用了 Heroku，但我能找到的任何资源都将我带到应用程序托管，我不明白为什么（这只是为了测试这个功能）我需要首先在线托管它而不是仅仅将其放入我的浏览器（或`ShellExecute`从 C/C++ 调用以使其运行）。

[编辑：] 感谢您迄今为止的所有帮助，我只是希望到目前为止我还没有花时间处理错别字，而不是让所有乐于助人的人找到问题的根源。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-25T00:52:05.693

页面为空白的原因是，不打算显示任何显示 HTML。该示例的重点是演示登录和 API 调用。

如果您已经登录，那么您将看不到任何内容，如

```
FB.getLoginStatus(function(response) {
        if (response.status === 'connected') {
            // connected
                        // <----- no calls
        } else if (response.status === 'not_authorized') {
            // not authorized
            login();
        } else {
            // not_logged_in
            login();
        }
    });
}; 
```

因此，如果您想知道它是否在您已经登录时工作，请尝试将 testAPI() 放在这里

```
if (response.status === 'connected') {
    // connected
    testAPI(); // <---------------
} else if (response.status === 'not_authorized') { 
```

# asp.net - Visual Studio 2012 未发布项目

> ID：13055254
> 
> 赞同：10
> 
> 时间：2012-10-24T18:15:30.693
> 
> 标签：asp.net, visual-studio, iis-7, visual-studio-2012

我有一个要发布到 Windows Server 2008 R2 服务器的 Visual Studio 2012 Web 项目。我在本地进行的更新无法在远程服务器上运行时遇到问题。当我检查“在发布之前删除所有现有文件”时，它成功地从服务器中删除了文件，但没有添加新文件——但声称（在 VS2012 中）发布已经成功。

如果我手动将 PackageTmp 文件夹复制到服务器上的目录中，那么一切正常。为什么 VS 2012 认为它在复制但不是真的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T00:27:09.187

请参阅[Visual Studio 2012 Web 发布不复制文件](https://stackoverflow.com/questions/12201146/visual-studio-2012-web-publish-doesnt-copy-files)

和[微软连接](http://connect.microsoft.com/VisualStudio/feedback/details/746321/publish-web-application-fails)

# java - 如何在java中找到包含正则表达式的单词

> ID：13055255
> 
> 赞同：0
> 
> 时间：2012-10-24T18:15:35.170
> 
> 标签：java, regex

我想根据搜索字符串查找单词（这意味着之前和之后的空格），例如：

```
String s = "sdaaf fd hgfaaf ghjfada dgffaasdf"; 
```

我想找到所有包含字符串`"aa"` 的单词答案将是单词：

```
"sdaaf" , "hgfaaf" , "dgffaasdf" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T18:18:29.290

您不能通过正则表达式解决此问题，因为有更直接的方法可以解决此问题。

```
String phrase = "aa";
String s = "sdaaf fd hgfaaf ghjfada dgffaasdf";  
String[] words = s.split(" ");  
List<String> wordList = new ArrayList<String>();
for(String word : words)  
{  
    if(word.contains(phrase))
    {
       wordList.add(word);
    }  
] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T18:27:14.467

```
String regex = "(\\w+aaa\\w+)+";
Pattern pattern = Pattern.compile(regex);
Matcher matcher = pattern.matcher("helaaalo woraaald how are you toaaaday");

while (matcher.find()) {
    System.out.print(matcher.group() + " ");
} 
```

输出是：`helaaalo woraaald toaaaday`

您可以更改模式以满足您的需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T18:18:49.803

**依次按照以下步骤**获取所有单词`"aa"`： -

*   在空间上拆分您的字符串 -[`String#split`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)为此目的使用方法。这将为您提供一个字符串数组，其中所有元素用空格分隔。

*   然后遍历您获得的 String 数组。

*   对于每个元素，检查它是否包含您的序列-为此目的`"aa"`使用方法。[`String#contains`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#contains%28java.lang.CharSequence%29)

*   对于每个包含“aa”的元素，打印它们，或者您可以将它们添加到[`ArrayList`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)您必须事先创建的 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T18:21:25.237

这是一个完整的解决方案，使用与您的每个单词匹配的正则表达式：

```
final String input = "asdf ljh poiu ddaa aad aa", strToMatch = "aa";
final Matcher m = Pattern.compile(
  String.format("\\w*?%s\\w*", Pattern.quote(strToMatch))).matcher(input);
while (m.find()) System.out.println(m.group()); 
```

# javascript - 通过将 CSS 类应用于子元素来影响父元素的样式

> ID：13055257
> 
> 赞同：0
> 
> 时间：2012-10-24T18:15:41.007
> 
> 标签：javascript, asp.net, html, css

在编写一些可用于表达以下内容的 CSS 时，我需要一些帮助：**如果此元素有一个附加了某个类的子元素，则将其样式设置如下**。
我想要做的是将 CSS 类附加到子元素影响父元素的样式 - 而不是将 CSS 类附加到父元素的“通常”方式影响要应用于子元素的样式。

例如，采用以下 html：

```
<table>
    <tr>
        <td><span>One</span></td></li>
        <td><span class="highlight">Two</span></td>
        <td><span>Three</span></td>
    </tr>
</table> 
```

我会尝试编写一些 CSS 来设置 a 的样式，以一种特定的方式`<td>`发现自己与`<span>`类的孩子 - 比如说，将红色边框应用于`"highlight"``<td>`

**仅供参考**：我知道可以使用 jQuery 动态地使用类似的方法来实现这一点

`$("span.highlight").parent().addClass("styling-class");`

或者

`$("span.highlight").parent().css({"border": "1px #ff0000 solid"});`

但是可以说这个解决方案在我的情况下并不容易应用，因此我正在寻找一种在我的样式表文件中使用 CSS 来表达它的方法。我在 CSS 方面既不是新手也不是专家。正在努力实现的目标是什么？

# objective-c - 将属性列表转换为 Objective-C 文字

> ID：13055259
> 
> 赞同：1
> 
> 时间：2012-10-24T18:15:58.713
> 
> 标签：objective-c, plist, objective-c-literals

我不确定这是否可行，但我见过人们用正则表达式和其他工具做疯狂的事情。

我想[将此 plist](http://code.google.com/p/iphone-patch/source/browse/trunk/bgfix/UIKit.framework/PhoneFormats/UIPhoneFormats.plist?r=7)转换为 Objective-C 文字：

```
<dict>
    <key>ar</key>
    <array>
        <string>+54## #### ####</string>
        <string>## #### ####</string>
    </array>
    <key>at</key>
    <array>
        <string>+43 1 ########</string>
        <string>+43 ############</string>

</dict> 
```

转换成：

```
NSDictionary *dic = @{ 
     @"ar" : @[@"+54## #### ####", @"## #### ####"],
     @"at" : @[@"+43 1 ########",@"+43 ############"]
}; 
```

是否可以自动化这种转换？[这家伙](https://stackoverflow.com/a/13022975/458960)做了类似的事情：他使用 VIM 将 PHP 列表解析为 NSDictionary。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T18:18:43.087

Plist 没有用于代码的单独“格式”（这个问题按原样不太有意义）。您要么想要 1\. 生成使用这些值初始化字典的 Objective-C 代码，要么 2\. 使用文件初始化字典，您可以为此编写

```
NSDictionary *dict = [NSDictionary dictionaryWithContentsOfFile:@"UIPhoneFormats.plist"]; 
```

**编辑：**所以你想生成Objective-C代码，反过来会重现相同的字典。为此，您需要以格式化的方式重新打印字典的内容。你可以编写这样的程序：

```
#import <stdio.h>
#import <Foundation/Foundation.h>

NSString *recursiveDump(id object)
{
    if ([object isKindOfClass:[NSString class]]) {
        return [NSString stringWithFormat:@"@\"%@\"", object];
    } else if ([object isKindOfClass:[NSNumber class]]) {
        return [NSString stringWithFormat:@"@%@", object];
    } else if ([object isKindOfClass:[NSArray class]]) {
        NSMutableString *str = [NSMutableString stringWithString:@"@["];
        NSInteger size = [object count];
        NSInteger i;
        for (i = 0; i < size; i++) {
            if (i > 0) [str appendString:@", "];
            [str appendString:recursiveDump([object objectAtIndex:i])];
        }
        [str appendString:@"]"];
        return str;
    } else if ([object isKindOfClass:[NSDictionary class]]) {
        NSMutableString *str = [NSMutableString stringWithString:@"@{"];
        NSString *key;
        NSInteger size = [object count];
        NSArray *keys = [object allKeys];
        NSInteger i;
        for (i = 0; i < size; i++) {
            if (i > 0) [str appendString:@", "];
            key = [keys objectAtIndex:i];
            [str appendFormat:@"%@: %@", recursiveDump(key), recursiveDump([object objectForKey:key])];
        }
        [str appendString:@"}"];
        return str;
    } else {
        // feel free to implement handling NSData and NSDate here,
        // it's not that straighforward as it is for basic data types.
    }
}

int main(int argc, char *argv[])
{
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

    NSDictionary *dict = [NSDictionary dictionaryWithContentsOfFile:@"UIPhoneFormats.plist"];
    NSMutableString *code = [NSMutableString stringWithString:@"NSDictionary *dict = "];
    [code appendString:recursiveDump(dict)];
    [code appendString:@";"];
    printf("%s\n", [code UTF8String]);

    [pool release];
    return 0;
} 
```

该程序将从提供的属性列表中生成（希望没有语法错误）Objective-C 初始化代码，可以将其复制粘贴到项目中并使用。

**编辑：**我只是在 OP 提供的 plist 文件的剥离版本上运行程序（原始文件*太大，*所以我把它剪掉了一点），它生成了以下代码：

```
NSDictionary *dict = @{@"at": @[@"+43 1 ########", @"+43 ############", @"01 ########", @"00 $"], @"ar": @[@"+54## #### ####", @"## #### ####", @"00 $", @"18 ### $ "]}; 
```

为了验证它是否真的有效，我将它粘贴`int main()`到一个名为“test.m”的文件的中间，所以我得到了这个程序：

```
#import <Foundation/Foundation.h>

int main()
{
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

    NSDictionary *dict = @{@"at": @[@"+43 1 ########", @"+43 ############", @"0$
    NSLog(@"%@", dict);

    [pool release];
    return 0;
} 
```

为了验证，我运行`clang -o test test.m -lobjc -framework Foundation`并惊讶，惊讶：

[有效。](https://i.stack.imgur.com/CPued.png)

**编辑2：**我把它做成了一个命令行实用程序，只是为了方便进一步的工作——谁知道呢，这将来可能有用。[Plist2ObjC](https://github.com/H2CO3/Plist2ObjC)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T18:17:36.523

您需要的是[序列化属性列表](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/PropertyLists/SerializePlist/SerializePlist.html)

```
NSData* plistData = [source dataUsingEncoding:NSUTF8StringEncoding];
NSString *error;
NSPropertyListFormat format;
NSDictionary* plist = [NSPropertyListSerialization propertyListFromData:plistData mutabilityOption:NSPropertyListImmutable format:&format errorDescription:&error];
NSLog( @"plist is %@", plist );
if(!plist){
        NSLog(@"Error: %@",error);
        [error release];
} 
```

如果你想把它作为一个字符串，使用这个，

```
NSString *aString = [NSString stringWithFormat:@"%@", plist]; 
```

否则您可以调用`NSString *aString = [plist description]`以获取与字符串相同的内容。

[资源](https://stackoverflow.com/questions/1072308/parse-plist-nsstring-into-nsdictionary)

# python - 在 RHEL5 上使用 python 中的 selenium 时无法创建浏览器进程

> ID：13055260
> 
> 赞同：0
> 
> 时间：2012-10-24T18:15:59.927
> 
> 标签：python, firefox, selenium, rhel, rhel5

我正在尝试使用 python 中的 selenium，但在 RHEL5.5 服务器上运行它时遇到问题。我似乎无法真正启动Firefox。

```
from selenium import webdriver
b = webdriver.Firefox() 
```

在我的带有 ubuntu 的笔记本电脑上，这可以正常工作，它会启动一个 Firefox 窗口。当我使用 ssh 登录服务器时，我可以从命令行运行 firefox 并将其显示在我的笔记本电脑上。它显然是来自服务器的 Firefox，因为它具有 RHEL5.5 主页。

当我在服务器上运行上面的 python 脚本（或在 ipython 中运行）时，脚本挂在 webdriver.Firefox()

我也试过

```
from selenium import webdriver
fb = webdriver.FirefoxProfile()
fb.native_events_enabled=True
b=webdriver.Firefox(fb) 
```

这也挂在最后一行。

我正在使用 /opt/python2.7 中安装的 python2.7。在使用 /opt/python2.7/pip-2.7 安装的 selenium 中。

我可以看到服务器上的 Firefox 进程，它正在使用大量 CPU。我还可以从 /proc/#/environ 看到 DISPLAY 设置为 localhost:10.0 ，这似乎是正确的。

如何在 RHEL5.5 上使用 selenium 启动浏览器？我怎样才能弄清楚为什么 Firefox 没有启动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T19:10:41.857

看起来我遇到的问题是这个硒错误： [http ://code.google.com/p/selenium/issues/detail?id=2852](http://code.google.com/p/selenium/issues/detail?id=2852)

[我使用了评论 #9 http://code.google.com/p/selenium/issues/detail?id=2852#c9](http://code.google.com/p/selenium/issues/detail?id=2852#c9)中描述的修复

这对我有用。

# file - 带有多个文件夹和文件的 GNU Make

> ID：13055263
> 
> 赞同：1
> 
> 时间：2012-10-24T18:16:07.823
> 
> 标签：file, makefile, gnu

我必须为一个有几个文件夹的程序编写一个“好的”makefile：bin、inc、obj、src。这是我的制作文件。如果我键入 make 它只是说尽管程序根本没有编译，但什么也做不了。猜猜我在某个地方有错误，但我真的找不到。（ps我是新手）。非常感谢你的帮助！

bin文件夹中的makefile：

```
vpath %.o ../obj/
$(prog): $(objs)
$(cc) $(ccflags) -o $@ $^ $(ldflags) 
```

obj文件夹中的makefile：

```
vpath %.c ../src
vpath %.h ../inc
all: $(objs)
%.o: %.c %.h
$(cc) $(ccflags) -c $<
-include *.d 
```

通用makefile：

```
export prog := inv_svn
export objs := $(patsubst %.c, %.o, $(wildcard src/*.c)))
export src_dir := src
export inc_dir := inc
export obj_dir := obj
export bin_dir := bin
export cc := gcc
export ccflags := -I $(PWD)/$(inc_dir) -MMD -g -Wall
export ldflags := -lcurses -lgdbm

test := ./$(prog)

all: $(prog)
$(prog): $(bin_dir)
$(bin_dir): $(obj_dir)
$(bin_dir):
make -C $@
$(obj_dir):
make -C $@

.PHONY: clean 

clean: 
rm -f $(obj_dir)/*.[od]$(prog) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T19:21:12.687

这里有太多的问题要一次性解决。让我们从小而简单的开始，然后建立起来。

首先，当你真的不需要时，你正在递归地使用 Make。稍后，您应该重新考虑这种设计。现在，让我们看看我们是否可以开始`obj/makefile`工作。

其次，子 makefile 依赖于`objs`从调用 makefile 传递下来的变量（如 ），这些变量也可以自己构造。这是一个糟糕的设计。我们将把作业放在`obj/makefile`：

```
objs := $(patsubst %.c, %.o, $(wildcard ../src/*.c)) 
```

（请注意，我已经删除了一个`)`让事情变得混乱的额外内容。）

第三，当我们**测试这个**时，我们得到`../src/foo.o ../src/bar.o`了，这可能不是我们想要的；我们想在 中构建对象`obj/`，而不是`src/`（主 makefile 中的分配有同样的问题）。所以我们改变它：

```
objs := $(patsubst ../src/%.c, %.o, $(wildcard ../src/*.c)) 
```

（还有更优雅的方式，但暂时不要介意。）

第四，我相信您可以对`bin/makefile`.

第五，在主 Makefile 中，您将子目录视为目标，而实际上它们不是；这些规则的重点不是构建子目录，而是在其中运行 Make。如果它们已经存在（它们确实存在），Make 会感到满意，并得出结论`$(prog)`并且`all`不需要重建。我们可以通过一些 PHONY 目标来解决这个问题：

```
.PHONY: RUN_IN_$(obj_dir) RUN_IN_$(bin_dir)

$(prog):  RUN_IN_$(bin_dir)
RUN_IN_$(bin_dir): RUN_IN_$(obj_dir)
RUN_IN_$(bin_dir):
    make -C $(bin_dir)
RUN_IN_$(obj_dir):
    make -C $(obj_dir) 
```

粗鲁但有效。

这应该足以让你离开地面。

# java - Java 冰棒不可变

> ID：13055266
> 
> 赞同：5
> 
> 时间：2012-10-24T18:16:36.733
> 
> 标签：java, concurrency, immutability

我正在处理一个问题，我需要将大量输入加载到问题中，并处理这些输入以创建“问题空间”（即构建允许有效访问输入的数据结构等）。一旦这个初始化完成，一个多线程进程就会启动，它以并发方式广泛使用组织/处理的输入。

出于性能原因，我不想在并发阶段锁定和同步所有读取操作。我真正想要的是一个不可变的对象，可以安全地被多个读者同时访问。

出于实际原因（可读性和可维护性），我不想让 InputManager 成为真正的不可变对象（即所有字段“最终”并在构造中初始化）。InputManager 将有许多数据结构（列表和映射），其中每个对象都有许多相互循环引用。这些对象被构造为“真正的”不可变对象。我不希望 InputManager 有 14 个参数的构造函数，但我确实需要 InputManager 类来提供问题空间的一致的只读视图。

我想要的是 Eric Lippert[在这里讨论的“冰棒不变性”。](https://docs.microsoft.com/en-us/archive/blogs/ericlippert/immutability-in-c-part-one-kinds-of-immutability "这里。")

我采用的方法依赖于使用所有变异方法的“包可见性”，并在单个包中执行所有可变操作（即 InputManager 的构造）。吸气剂都具有公众知名度。

就像是：

```
public final class InputManager {  // final to prevent making mutable subclasses 
    InputManager() { ... } //package visibility limits who can create one
        HashMap<String,InputA> lookupTable1;
        ...

    mutatingMethodA(InputA[] inputA) { //default (package visibility)
        //setting up data structures...
    }

    mutatingMethodB(InputB[] inputB) { //default (package visibility)
        //setting up data structures...
    }

    public InputA getSpecificInput(String param1) {
        ... //access data structures
        return objA; //return immutable object
    }
} 
```

如果我还不够清楚的话，总体思路是，我将在单个线程中构建 InputManager，然后将其传递给多个线程，这些线程将使用该对象进行并发工作。我想尽可能地执行这个“两阶段”可变/不可变对象生命周期，而不做太“可爱”的事情。寻找意见或反馈以更好地实现这一目标，因为我确信这不是一个不常见的用例，但我也找不到支持它的设计模式。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:20:36.250

我认为你可以简单地为你的两个阶段设置单独的接口。一个用于建筑部分，另一个用于阅读部分。这样，您可以清晰地分离访问模式。您可以将此视为[接口隔离原则 (pdf)](http://www.objectmentor.com/resources/articles/isp.pdf)的一个实例：

> 不应强迫客户依赖他们不使用的接口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T18:34:58.477

只要对象被安全发布，读者就不能对其进行变异。

这里的“发布”是指创建者如何将对象提供给读者。例如，创建者将其放入阻塞队列，而读者正在轮询队列。

这取决于您的发布方法。我敢打赌这是一个安全的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T19:05:07.090

就个人而言，我会坚持使用您简单而充分的方法，但如果您有兴趣，可以使用*可变伴侣*成语之类的东西。您编写了一个具有 mutators 的**内部类**，同时重用封闭实例中的所有字段和 getter。

一旦你失去了可变伴侣，它留下的封闭实例就真正不可变了。

# jquery - 请求有效负载与查询字符串参数

> ID：13055268
> 
> 赞同：4
> 
> 时间：2012-10-24T18:16:49.263
> 
> 标签：jquery, ajax, payload

当谈到我在 Chrome 浏览器中看到的这个请求有效负载时，我完全一无所知。

查询字符串将附加一个变量，如 session:2g0SoEE 但这个有效负载只有一个长字符串，我猜是 base64 格式。

我确实知道请求有效负载可以包含任何内容，但是我该如何使用它呢？

我可以用 jquery 发帖并发送此请求有效负载吗？

例如：

```
$.post(url, {variable: "variable"}, function(data){}); 
```

当这个帖子它会发送 &variable=variable 这将作为查询字符串参数在 chrome 发送的标题中找到。

在我正在玩的这个游戏中，我看到另一个信息被发送到标题中，称为有效负载请求。我对如何阅读，使用，制作，如何复制它感到困惑？

这是类似的内容：[Chrome 正在缓存 HTTP PUT 请求](https://stackoverflow.com/questions/11753751/chrome-is-caching-an-http-put-request) 和 [如何检索请求有效负载](https://stackoverflow.com/questions/9597052/how-to-retrieve-request-payload)

# django - django，试图操作查询集并返回模板

> ID：13055269
> 
> 赞同：0
> 
> 时间：2012-10-24T18:16:51.287
> 
> 标签：django, django-views

我正在尝试对模型的单个字段中的所有元素执行操作，但出现错误：

```
list indices must be integers, not tuple 
```

这是我在views.py中的索引函数：

```
design_list = Design.objects.values_list().order_by('-date_submitted')[:10]

x=list(design_list)
for i in x:
    b = list(x[i]) # ERROR RELATES TO THIS LINE
    c = b[2]
    b[2] = datetimeConvertToHumanReadable(c) 
    new_list[i] = b

return render_to_response('index.html', {
    'design_list': new_list,    
}) 
```

我确定这是一个常见问题，有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T18:26:00.147

Python 不是 C -`for x in y`循环不会遍历索引，而是遍历项目本身。

`design_list`是一个[元组列表](https://docs.djangoproject.com/en/dev/ref/models/querysets/#values-list)，所以你可以这样对待它。元组是不可变的，因此您需要创建一个新列表。列表理解可能是最好的。

```
# Create a new list of tuples
new_list = [row[:2] + (datetimeConvertToHumanReadable(row[2]),) + row[3:]
            for row in x] 
```

但是，您似乎并不真的需要使用元组，因为您对错误感到困惑。如果是这种情况，那么不要使用`values_list`（它返回元组），而只是使用`order_by`, 并直接引用该字段（我假设它被称为`date_submitted`）。

```
design_list = Design.objects.order_by('-date_submitted')[:10]

x=list(design_list)
for row in x:
    row.date_submitted = datetimeConvertToHumanReadable(row.date_submitted) 

return render_to_response('index.html', {
    'design_list': x,
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T18:22:16.197

`for i in x:`迭代 的*值*，`x`而不是索引。在不分析代码背后的意图（以及正确使用 QuerySets）的情况下，该行可以更改为：

```
b = list(i) 
```

以避免这种特殊错误。

# c - 我怎么能 strupr 工作，但 strcpy 不能

> ID：13055271
> 
> 赞同：-1
> 
> 时间：2012-10-24T18:16:58.070
> 
> 标签：c, string, pointers

这是我的代码。

```
int main()
{
struct emp
{
    char *n;
    int age;
};
struct emp e1 = {"Dravid", 23};
struct emp e2 = e1;
strupr(e2.n);
printf("%s\n", e1.n);
return 0;
} 
```

问题1：根据网站的答案是大写的“DRAVID”。怎么回事，e2和e1是一样的吗？即如果我这样做了，e2.age++ 那么这个变化也会反映在 e1 中吗？

问题 2：如果我将 strupr 更改为 strcpy 会出现 seg 错误？为什么？即，如果我将其更改为`strcpy(e2.n,"hoho");`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T18:24:00.940

构建两个`emp`s 后，这就是您在内存中的内容：

```
e1.age  = 23
e1.name = 0x12345678 (Which is a pointer in memory to "Dravid")
e2.age  = 23
e2.name = 0x12345678 (Which is a pointer in memory to "Dravid") 
```

现在注意，关于你正在尝试做的事情。

1.  调用`strupr(e1.name)`是未定义的行为，因为不允许您修改字符串文字。
2.  调用`strcpy(e1.name, e2.name)`也是未定义的行为，因为 strcpy 要求传递给它的两个指针引用不同的内存。此外，它的 UB 因为您不能修改字符串文字。
3.  调用`strcpy(e1.name, "hiho")`也是未定义的行为，因为您不能修改字符串文字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T18:21:09.773

1）分配结构会进行成员复制。因为`n`是一个指针，所以指针地址被复制，所以它指向同一个字符串。

2)`strcpy`需要两个参数。请记住，这`e2.n`是一个指针。调用时必须为该指针分配足够的空间来保存新字符串的内容`strcpy`。你最好`strncpy()`：

```
int maxlen = 20;
e2.n = malloc(maxlen);
strncpy(e2.n, "Any length string here", maxlen - 1) /* only copies 19 bytes + terminating null */ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T18:21:49.787

当您将一个结构复制到另一个结构时，您会复制该结构中的所有值。对于年龄，您只需复制该值，因此您可以更改它，它们会有所不同。

对于 n 您正在复制字符串的地址，因此当您更改其中一个字符串时，您也会更改另一个。

而且，正如 H2CO3 指出的那样，您不能修改字符串文字，这是您在使用 strcpy 时尝试做的事情。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T18:25:36.230

Q1。char * n 存储地址，该地址被复制，因此如果您更改两者的值，则会反映出来。

Q2。strcpy() 需要 2 个参数，你能显示你的代码吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T18:25:46.580

与 Java 不同，C 对不同的变量使用不同的内存区域。因此，当您将一个结构分配给另一个结构时，它基本上是一个区域到另一个区域的浅拷贝。通过浅拷贝，我的意思是任何指针都不会被复制来克隆，因此任何指针都将指向同一个地方。它只是一个内存区域到另一个内存区域的副本。

说和说`struct emp e2 = e1;`是一回事`memcpy (&e2, &e1, sizeof(struct emp));`

这反过来意味着，如果您将一个结构分配给另一个结构变量，然后修改另一个结构变量中的数据，则不会修改第一个结构变量。

因此，在 C 中，每个变量都是不同的内存位置，与 Java 和其他一些语言一样，您正在使用变量引用，并且变量名称只是变量引用的容器（除了内置的原语，如 int）。

您的代码可能存在一些问题，因为您使用的是常量字符串。像使用 strupr() 那样修改常量字符串是不好的，因为您不知道内存是如何分配的或分配在哪里。所以做一个 strupr() 你基本上是幸运的。

看到这个关于[深拷贝和浅拷贝之间的区别](https://stackoverflow.com/questions/184710/what-is-the-difference-between-a-deep-copy-and-a-shallow-copy)。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-24T18:23:17.977

在调用 strupr 之后它们不应该是相同的（但无论如何修改字符串文字是不安全或不正确的）。不，更改`e2`不会反映，`e1`因为分配将按值复制对象。

至于将 strupr 调用改成 strcpy，strcpy 有两个参数，所以只改会导致编译错误。如果添加`e1.n`为第二个参数，它将崩溃，因为`e2.n`尚未初始化为指向任何内存。

# hadoop - 运行 MapReduce 作业时的事件链

> ID：13055279
> 
> 赞同：0
> 
> 时间：2012-10-24T18:17:37.167
> 
> 标签：hadoop, mapreduce

在 Hadoop 集群上运行 MapReduce 作业时，我正在寻找有关事件链的一些特定信息。

假设我的 Reduce 任务即将完成。在我的最后一个 reducer 将其输出写入输出文件后，输出文件有多少个副本？最后一个 reducer 完成对输出文件的写入后究竟会发生什么。NameNode 何时请求各自的 Data Node 复制输出文件？以及如何通知名称节点输出文件已准备就绪？谁将这些信息传达给 NameNode？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T21:11:37.240

Reduce 任务将输出写入 HDFS。他们通过首先与名称节点通信来请求一个块来做到这一点。然后 name 节点告诉 reducer 写入哪些数据节点，然后 reducer 实际将数据直接发送到第一个数据节点，然后将其发送到第二个数据节点，第二个数据节点将其发送到第三个节点。通常，名称节点会将内容保存在本地，因此第一个数据节点可能是运行 reduce 任务的同一台机器。

一旦 reducer 完成了输出的写入，并且数据节点已经确认了这一点，reducer 本身将通过周期性的心跳通信告诉作业跟踪器它已经完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T22:50:38.447

要了解 HDFS 复制的基础知识，请阅读HDFS 架构文档中的[副本放置](http://hadoop.apache.org/docs/r0.20.2/hdfs_design.html#Replica+Placement%3a+The+First+Baby+Steps)。简而言之，NameNode 将尝试使用相同的机架以最小化延迟。

# kernel - OpenCL，多工作组/内核？

> ID：13055280
> 
> 赞同：0
> 
> 时间：2012-10-24T18:17:43.173
> 
> 标签：kernel, opencl

我有一些用 C++ 编写的代码，它利用了多线程。

我取消了一个数组，并且可以这样总结程序（在多次运行的多个线程上运行），即 -1/+1 随机数的总和

```
runningTotal += ((rng_1.rand_cmwc()%range + 1) <= halfRange ? 1: -1); 
```

rng_1.rand_cmwc() 指的是cmwc 类的一个函数，rng_1 是对象。

我在 OpenCl (http://opencl.codeplex.com/wikipage?title=OpenCL%20Tutorials%20-%201) 上做了一些阅读，我有库设置，并编译了我自己的主机。

这导致我提出问题＃1

这个类在 OpenCL 中不存在，所以我想我需要创建一个内核来保存这个类。

变量：

runningTotal 很长

range 是一个 const long

halfRange 是一个 const long（即 range/2）

我的第二个问题是。

因为它不是一个数组（大多数 OpenCL 教程都讨论了如何让 OpenCL 同时在一个数组中分配多个元素）。

我该如何设置

```
 runningTotal += ((rng_1.rand_cmwc()%range + 1) <= halfRange ? 1: -1); 
```

在多个内核上运行？我做一个工作组吗？

有人可以举例说明我将如何执行引用多个内核的 cl_program clCreateProgramWithSource 命令吗？

我确定我会有更多问题，但我想我需要两个内核，每个都运行它自己的工作组？一个用于我的 cmwc 类，一个用于 runningTotal 总和。

然后以某种方式每隔一段时间将所有工作项同步到更大的总数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T15:07:35.153

第一个问题：我相信只有 AMD 通过名为静态 C++ 内核语言的扩展支持在内核中使用类（参见[http://developer.amd.com/Assets/CPP_kernel_language.pdf](http://developer.amd.com/Assets/CPP_kernel_language.pdf)）

第二个问题：要并行求和，您必须使用并行求和算法，例如前缀求和（http://en.wikipedia.org/wiki/Prefix_sum）或归约（http://developer.amd.com/Resources /documentation/articles/Pages/OpenCL-Optimization-Case-Study-Simple-Reductions.aspx）。请注意，存在为此的库。

希望有帮助。祝你好运 ：）

# excel - VBA中的if-then语句

> ID：13055281
> 
> 赞同：1
> 
> 时间：2012-10-24T18:17:50.090
> 
> 标签：excel, vba

我目前正在编写两组非常相似的 if-else 语句。他们基本上比较三个下拉菜单，并确保用户没有放下两个匹配的偏好。例如：

```
cbo_fac1 - Kitchen    
cbo_fac2 - Kitchen   
cbo_fac3 - Lounge 
```

这将返回一条错误消息，因为**cbo_fac1**和**cbo_fac2**匹配。但是有一个我正在努力实施的特殊情况。下拉案例之一是*No preference*。

```
cbo_fac1 - Kitchen    
cbo_fac2 - No preference
cbo_fac3 - No preference

cbo_fac1 - No preference    
cbo_fac2 - No preference
cbo_fac3 - No preference 
```

任何情况下都不允许匹配*任何偏好选择。*我该如何实施呢？这是我到目前为止使用的代码：

```
If cbo_fac1.Value = cbo_fac2.Value Then
    MsgBox ("Facilities preference 1 and facilities preference 2 cannot be the same. Please select another option for facilities preference 2, if you have none then select 'No preference'")
    Exit Sub
End If

If cbo_fac1.Value = cbo_fac3.Value Then
    MsgBox ("Facilities preference 1 and facilities preference 3 cannot be the same. Please select another option for facilities preference 3, if you have none then select 'No preference'")
    Exit Sub
End If

If cbo_fac2.Value = cbo_fac3.Value Then
    MsgBox ("Facilities preference 2 and facilities preference 3 cannot be the same. Please select another option for facilities preference 3, if you have none then select 'No preference'")
    Exit Sub
End If 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T18:44:02.657

如果你想把它写成一个巨大的 if 语句，应该这样做：

```
If (cbo_fac1.Value <> cbo_fac2.Value Or cbo_fac1.Value = "No Preference") And _
   (cbo_fac2.Value <> cbo_fac3.Value Or cbo_fac2.Value = "No Preference") And _
   (cbo_fac1.Value <> cbo_fac3.Value Or cbo_fac3.Value = "No Preference") Then
     'Input is fine
else
     exit sub

End If 
```

编辑：

只是因为这是相反的方式，可能带有一个 msgbox：

```
If (cbo_fac1.value = cbo_fac2.value AND cbo_fac1.value <> "No Preference") OR _
   (cbo_fac2.value = cbo_fac3.value AND cbo_fac2.value <> "No Preference") OR _
   (cbo_fac1.value = cbo_fac3.value AND cbo_fac3.value <> "No Preference") then

   Msgbox "No two facilities can be the same. Please select another option " & _
          "for facilities preference, if you have none then select 'No preference'"
   exit sub
else
   'input is fine
end if 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T18:22:32.607

检查类似的东西

```
If cbo_fac1.Value = cbo_fac2.Value and cbo_fac1.Value <> "No Preference" and cbo_fac2.Value <> "No Preference" Then
    MsgBox ("Facilities preference 1 and facilities preference 2 cannot be the same. Please select another option for facilities preference 2, if you have none then select 'No preference'")
    Exit Sub
End If 
```

对其他 2 个 IF 条件进行相同的检查。

## 更新：

还有另一种方法，通过编写一个函数

下面是示例函数。

```
Sub PreferenceCheck(var1 As String, var2 As String)
    If var1 = "No Preference" Or var2 = "No Preference" Then
        tempVar = true
    End If
    If Not tempVar Then
        If var1=var2 Then
            MsgBox ("Facilities "&var1&" and facilities "&var2&" cannot be the same. Please select another option for facilities preference, if you have none then select 'No preference'")
        End If
    End If
End Sub 
```

为 3 种组合调用此函数

```
PreferenceCheck(cbo_fac1.Value, cbo_fac2.Value)
PreferenceCheck(cbo_fac2.Value, cbo_fac3.Value)
PreferenceCheck(cbo_fac1.Value, cbo_fac3.Value) 
```

# android - getJSONArray 语法

> ID：13055290
> 
> 赞同：0
> 
> 时间：2012-10-24T18:18:16.583
> 
> 标签：android, json

我有以下 JSON

```
[{"name":"Games","id":1,"thumbnail":"https:\/\/lh5.ggpht.com\/_nl17ca8wUp0BbiD9J7mTBSO1o42KpdK2IolG3NjF22o1KbhIZ6ga5e_cXPp42fNUjA=w78","image_medium":"https:\/\/lh5.ggpht.com\/_nl17ca8wUp0BbiD9J7mTBSO1o42KpdK2IolG3NjF22o1KbhIZ6ga5e_cXPp42fNUjA=w78","image_large":"https:\/\/lh5.ggpht.com\/_nl17ca8wUp0BbiD9J7mTBSO1o42KpdK2IolG3NjF22o1KbhIZ6ga5e_cXPp42fNUjA=w78"},{"name":"Sports","id":2,"thumbnail":"https:\/\/lh4.ggpht.com\/yvn4iHEzWN7NmwVkw08ufwSS86mYPpK2Z8WgYkwkQqojMTPsTs28tIiz4v780KGQfrA=w78","image_medium":"https:\/\/lh4.ggpht.com\/yvn4iHEzWN7NmwVkw08ufwSS86mYPpK2Z8WgYkwkQqojMTPsTs28tIiz4v780KGQfrA=w78","image_large":"https:\/\/lh4.ggpht.com\/yvn4iHEzWN7NmwVkw08ufwSS86mYPpK2Z8WgYkwkQqojMTPsTs28tIiz4v780KGQfrA=w78"}] 
```

以下是读取上述json的代码片段

```
 private static final String TAG_CATEGORY_NAME = "name";
    private static final String TAG_CATEGORY_ID = "id";
    private static final String TAG_CATEGORY_THUMBNAIL = "thumbnail";
    private static final String TAG_CATEGORY_IMAGE_MEDIUM = "image_medium";
    private static final String TAG_CATEGORY_IMAGE_LARGE = "image_large";

try
        {
            //Getting Array of Categories
            **categories = json.getJSONArray(name);**   //Line 1

            for(int i=0; i < categories.length(); i++)
            {
                JSONObject c = categories.getJSONObject(i);

                String cname = c.getString(TAG_CATEGORY_NAME);
                String cid = c.getString(TAG_CATEGORY_ID);
                String cThumbNail = c.getString(TAG_CATEGORY_THUMBNAIL);
                String cImageMedium = c.getString(TAG_CATEGORY_IMAGE_MEDIUM);
                String cImageLarge = c.getString(TAG_CATEGORY_IMAGE_LARGE);
            }
        }
        catch(JSONException e)
        {
            e.printStackTrace();
        } 
```

由于没有给出表示 json 中每个数组的名称，任何人都可以告诉我在这种情况下编写**第 1 行的正确方法。**

# sql - SQL SELECT 语句中的增量值

> ID：13055295
> 
> 赞同：1
> 
> 时间：2012-10-24T18:18:40.833
> 
> 标签：sql, sql-server, sql-server-2008, tsql, select

这是我正在尝试做的示例代码，结果如下：

```
 CREATE TABLE dbo.#TempDoc_DocContRoles (DocID int null, FullName varchar(500), DocContRole 
     varchar (100), NumRole int null)

   INSERT INTO #TempDoc_DocContRoles(DocID, FullName, DocContRole) 

      SELECT 
          d.DocID, c.FirstName + ' ' + c.LastName as FullName, ldcro.DocContRole 
      FROM 
          Document as d 
      JOIN 
          dbo.Split( ',','30,31') AS l ON d.DocID = cast(l.[Value] AS int)
      JOIN 
          Doc_Contact AS dc ON d.DocID = dc.DocID 
      JOIN 
          Contact AS c ON dc.P_Number = c.P_Number 
      LEFT JOIN 
          lkpDocContactRole AS ldcro ON ldcro.DocContRoleID = dc.DocContRoleID 
      JOIN 
          dbo.Split( ',','1,2,7') AS r ON ldcro.DocContRoleID = cast(r.[Value] AS int)

   CREATE TABLE dbo.#MaxNumRoles (DocID int null, DocContRole varchar(100), NumRole int null)

   INSERT INTO  dbo.#MaxNumRoles (DocID,DocContRole,NumRole)
      SELECT 
          DocID, DocContRole, COUNT(*) 
      FROM 
          dbo.#TempDoc_DocContRoles 
      GROUP BY 
          DocID, DocContRole 
      HAVING 
          Count(*) > 0

   UPDATE td 
   SET td.NumRole = mr.NumRole
   FROM dbo.#TempDoc_DocContRoles as td
   INNER JOIN dbo.#MaxNumRoles as mr ON td.DocContRole = mr.docContRole 

   SELECT * FROM   dbo.#TempDoc_DocContRoles

   DROP TABLE dbo.#TempDoc_DocContRoles   
   DROP TABLE dbo.#MaxNumRoles 
```

结果：

```
DocID   FullName    DocContRole NumRole
30      Smith    Author         3
30      Daln     Staff          2
30      Dolby    Author         3
31      Tammy    Author         3
30      Barny    Author         3
30      Sanny    Res Coor       1
30      Johny    Staff Rev      2 
```

我想实际得到：

```
DocID   FullName    DocContRole NumRole
30      Smith    Author         1
30      Daln     Staff          1
30      Dolby    Author         2
31      Tammy    Author         1
30      Barny    Author         3
30      Sanny    Res Coor       1
30      Johny    Staff Rev      2 
```

它应该增加`NumRole`per`docContRole`和`docID`（例如 Author 1、Author 2 等）中的数字。目前它给出了每个`DocID`.

我的最终目标是得到类似的东西

```
 DocID    Author_1  Author_2 Author_3 Staff_1 Staff_2 ResCoor_1
30              Smith      Dolby    Barny    Daln    Johny    Sanny 
31              Tammy 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T18:26:29.823

你可以试试这个

```
select
    td.DocID, td.FullName, td.DocContRole,
    row_number() over (partition by td.DocID, td.DocContRole order by td.FullName) as NumRole
from dbo.#TempDoc_DocContRoles as td 
```

所以动态 SQL 将是那样的

[**SQL 提琴示例**](http://sqlfiddle.com/#!3/b9b8a/14)

```
create table #t2
(
    DocID int, FullName nvarchar(max), 
    NumRole nvarchar(max)
)

declare @pivot_columns nvarchar(max), @stmt nvarchar(max)

insert into #t2
select
    td.DocID, td.FullName,
    td.DocContRole + 
    cast(
        row_number() over 
        (partition by td.DocID, td.DocContRole order by td.FullName)
    as nvarchar(max)) as NumRole
from t as td

select
    @pivot_columns = 
    isnull(@pivot_columns + ', ', '') + 
    '[' +  NumRole + ']'
from (select distinct NumRole from #t2) as T

select @stmt = '
select *
from #t2 as t
pivot
(
min(FullName)
for NumRole in (' + @pivot_columns + ')
) as PT'

exec sp_executesql
    @stmt = @stmt 
```

# c# - iCalendar RFC 2445 第 4.1 节内容折叠

> ID：13055298
> 
> 赞同：1
> 
> 时间：2012-10-24T18:18:45.933
> 
> 标签：c#, string, icalendar, rfc5545, rfc2445

我正在使用 C# 创建一个简单的 iCalendar，发现 RFC 2445 第 4.1 节的内容折叠非常令人头疼（对我来说:-)。

[http://www.apps.ietf.org/rfc/rfc2445.html#sec-4.1](http://www.apps.ietf.org/rfc/rfc2445.html#sec-4.1)

对于长行，您要转义一些字符（我相信反斜杠、分号、逗号和换行符），然后将其折叠以使行不超过 75 个八位字节。我在网上找到了几种直接的方法。最简单的方法是用转义版本替换有问题的字符，然后在每 75 个字符处插入 CRLF。就像是：

```
// too simple, could break at an escape sequence boundary or multi-byte character may overflow 75 octets
txt = txt.Replace(@"\", "\\\\").Replace(";", "\\;").Replace(",", "\\,").Replace("\r\n", "\\n");
var regex = new System.Text.RegularExpressions.Regex( ".{75}");
var escape_and_folded = regex.Replace( txt, "$0\r\n "); 
```

我看到两个问题。CRLF 可能被插入到转义序列中。例如，如果插入发生使得转义的新行序列“\n”变为“\CRLF”（那么“n”将在下一行）。第二个问题是当有多字节字符时。由于计算是按字符计算的，因此该行可能会超过 75 个八位字节。

一个简单的解决方案是逐个字符地遍历字符串并转义和折叠，但这似乎相当暴力。有人有更优雅的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T11:53:59.930

首先，请确保您查看的是[RFC5545](https://www.rfc-editor.org/rfc/rfc5545)。RFC2445 已过时。你可以在这里找到我的 PHP 实现：

[https://github.com/fruux/sabre-vobject/blob/master/lib/Property.php#L252](https://github.com/fruux/sabre-vobject/blob/master/lib/Property.php#L252)

在 php 中，我们有 mb_strcut 函数。我不确定是否有 .NET 等价物，但这至少会使事情变得简单得多。到目前为止，我对将转义序列 ( `\`) 折叠成两半没有任何问题。一个好的解析器会首先展开这些行，然后才处理转义。特别是因为必须转义哪些字符，取决于实际属性。（有时`,`或被`;`逃脱，有时他们不会）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-27T07:09:30.293

我尝试了您的解决方案-它有效，除了它还折叠了一些长度小于 75 个八位字节的线。因此，我按照传统方式重写了代码（即不使用正则表达式 -*我确实想念它们*），如下所示。

```
 public static string FoldLines(this string value, int max, string newline = "\r\n")
    {
        var lines = value.Split(new string[]{newline}, System.StringSplitOptions.RemoveEmptyEntries);
        using (var ms = new System.IO.MemoryStream(value.Length))
        {
            var crlf = Encoding.UTF8.GetBytes(newline); //CRLF
            var crlfs = Encoding.UTF8.GetBytes(string.Format("{0} ", newline)); //CRLF and SPACE
            foreach (var line in lines)
            {
                var bytes = Encoding.UTF8.GetBytes(line);
                var len = Encoding.UTF8.GetByteCount(line);
                if (len <= max)
                {
                    ms.Write(bytes, 0, len);
                    ms.Write(crlf, 0, crlf.Length); 
                }
                else
                {
                    var blen = len / max; //calculate block length
                    var rlen = len % max; //calculate remaining length
                    var b = 0;
                    while (b < blen)
                    {
                        ms.Write(bytes, (b++) * max, max);
                        ms.Write(crlfs, 0, crlfs.Length); 
                    }
                    if (rlen > 0)
                    {
                        ms.Write(bytes, blen * max, rlen);
                        ms.Write(crlf, 0, crlf.Length);
                    }
                }
            }

            return Encoding.UTF8.GetString(ms.ToArray());
        }
    } 
```

**备注**：

1.  我尽可能地优雅——即我没有按字符解析字符串，而是按八位字节块（由**max**确定）。
2.  最好在生成的 VCALENDAR 对象上调用该函数，以便检查所有内容行是否折叠并在必要时进行包装。
3.  特殊文字的转义仅在与 TEXT 相关的属性中执行，例如 DESCRIPTION、SUMMARY 等。这些在以下扩展方法中实现：

    ```
    public static string Replace(this string value, IEnumerable<Tuple<string, string>> pairs)
    {
        foreach (var pair in pairs) value = value.Replace(pair.Item1, pair.Item2);
        return value;
    }

    public static string EscapeStrings(this string value)
    {
        return value.Replace(new List<Tuple<string, string>> 
        { 
            new Tuple<string, string>(@"\", "\\\\"),
            new Tuple<string, string>(";",  @"\;"),
            new Tuple<string, string>(",",  @"\,"),
            new Tuple<string, string>("\r\n",  @"\n"),
        });
    } 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-25T11:22:31.627

reexmonkey 的解决方案在中间折叠行上写了 76 个字符，因为它没有减去用 crlfs 添加的额外空格字符

我重写了折叠函数来纠正这个问题：

```
public static string FoldLines(string value, int max, string newline = "\r\n")
{
    var lines = value.Split(new string[] { newline }, System.StringSplitOptions.RemoveEmptyEntries);
    using (var ms = new System.IO.MemoryStream(value.Length))
    {
        var crlf = Encoding.UTF8.GetBytes(newline); //CRLF
        var crlfs = Encoding.UTF8.GetBytes(string.Format("{0} ", newline)); //CRLF and SPACE
        foreach (var line in lines)
        {
            var bytes = Encoding.UTF8.GetBytes(line);
            var len = Encoding.UTF8.GetByteCount(line);
            if (len <= max)
            {
                ms.Write(bytes, 0, len);
                ms.Write(crlf, 0, crlf.Length);
            }
            else
            {
                var offset = 0; //current offset position
                var count = max; //characters to take
                while (offset + count < len)
                {
                    ms.Write(bytes, offset, count);
                    ms.Write(crlfs, 0, crlfs.Length);
                    offset += count;
                    count = max - 1;
                }
                count = len - offset; //remaining characters
                if (count > 0)
                {
                    ms.Write(bytes, offset, count);
                    ms.Write(crlf, 0, crlf.Length);
                }
            }
        }

        return Encoding.UTF8.GetString(ms.ToArray());
    }
} 
```

我还在 EscapeStrings 函数中添加了一个额外的元组：

```
public static string ReplaceText(string value, IEnumerable<Tuple<string, string>> pairs)
{
    foreach (var pair in pairs) value = value.Replace(pair.Item1, pair.Item2);
    return value;
}
public static string EscapeStrings(string value)
{
    return ReplaceText(value, new List <Tuple<string, string>>
    {
        new Tuple<string, string>(@"\", "\\\\"),
        new Tuple<string, string>(";",  @"\;"),
        new Tuple<string, string>(",",  @"\,"),
        new Tuple<string, string>("\r\n",  @"\n"),
        new Tuple<string, string>("\n",  @"\n"),
    });
} 
```

# image - 如何在基于 html 表格的电子邮件中限制大图像（用于视网膜）？

> ID：13055301
> 
> 赞同：4
> 
> 时间：2012-10-24T18:18:53.010
> 
> 标签：image, css, mailchimp

我的网站使用非常大的图像，因此我们可以针对视网膜设备进行优化。在我的 WordPress 站点中，我们生成 1200x640 的图像，并在主题模板中将它们的大小限制为 600x320。

```
For example: <img src="image/path" width="600" height="320" /> 
```

结果，我的 RSS 提要包含大图像 (1200x640)，当我们在 RSS 提要块内的 MailChimp 模板中使用它们时，图像会超出表格单元格的大小。有没有用 span 标签包装这个 MailChimp feedblock 标签并设置最大宽度？我们希望在 MailChimp 通讯模板中将图像大小限制为 (600x320)，而无需更改 RSS 提要。这可能吗？

```
*|FEEDITEM:IMAGE|* 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-08T04:59:44.237

我在许多时事通讯中都做了同样的事情，并建议反对上述评论（如果有的话，很少有邮件客户端支持“背景大小：封面”。

似乎对我们最有效的技术是将表格单元格保持在任何宽度，然后在图像本身的样式属性中设置最大宽度：100%。这使它尊重其父级的最大宽度，而不是其“自然”图像大小。如果您无法编辑图像标签本身，那么找到它的类并在您的时事通讯样式中添加样式 max-width 也应该可以很好地工作。

# qooxdoo - Qooxdoo - 基于两列值的颜色表单元格？

> ID：13055302
> 
> 赞同：1
> 
> 时间：2012-10-24T18:18:55.180
> 
> 标签：qooxdoo

有没有办法根据两列值为表格单元格着色？

我在文档中看到了这一点：

```
addNumericCondition(String condition, Integer value1, String align, String color, String style, String weight, String target) 
```

这适用于一种条件，但如果您开始添加更多条件 - 未来的条件会覆盖它......这就是我正在做的事情：

```
 var defaultRenderer = new qx.ui.table.cellrenderer.Conditional("left", "", "", "");     
 defaultRenderer.addNumericCondition("==", true, null, "#000000", null, null, "Verified");
 defaultRenderer.addNumericCondition("==", false, null, "#000000", null, null, "Verified");

 var nawasdNotVerified = new qx.ui.table.cellrenderer.Conditional("left", "", "", "");     
 nawasdNotVerified.addNumericCondition("==", true, null, "#FF0000", null, null, "NAWASed");      
     nawasdNotVerified.addNumericCondition("==", false, null, "#FF0000", null, null, "NAWASed");

table.getTableColumnModel().setDataCellRenderer( 0, defaultRenderer);
table.getTableColumnModel().setDataCellRenderer( 0, nawasdNotVerified );
); 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T05:57:47.590

默认的条件渲染器不提供这样的功能。但它可以很容易地扩展。覆盖条件渲染器的 _getCellStyle 方法使您可以访问包含当前行的原始数据 (cellInfo.rowData) 的 cellInfo 对象。有了它，您可以根据该行中您喜欢的任何数据来决定如何设置单元格的样式。

# cloud-foundry - 我可以更改 vmc 隧道的密码吗？

> ID：13055307
> 
> 赞同：0
> 
> 时间：2012-10-24T18:19:28.993
> 
> 标签：cloud-foundry

对于 MongoExplorer 来说太长了。出于某种原因，MongoExplorer 将最大密码长度设置为 20。由 mvc 隧道生成的密码不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T20:48:06.897

恐怕您不能，因为这实际上是为您的服务生成的凭据（不仅用于隧道功能）。也许您可以通过另一种方式将密码传递给 MongoExplorer（也许是命令行参数？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T22:34:53.757

恐怕密码已生成，因此您无法更改。我会针对 MongoExplorer 提出一个缺陷/错误（我刚刚检查过，该网站说开发目前已暂停）。Mac 上的 FWIW 我使用 MongoHub 作为 GUI，它与 vmc 隧道一起工作得很好。

# python - 为什么这个带有字典命名参数和默认值的python函数在每次调用时都不应用默认值？

> ID：13055309
> 
> 赞同：0
> 
> 时间：2012-10-24T18:19:32.737
> 
> 标签：python

> **可能的重复：**
> [Python 中的“Least Astonishment”：可变默认参数](https://stackoverflow.com/questions/1132941/least-astonishment-in-python-the-mutable-default-argument)

下面的代码说明了这个问题：

```
def fn(param, named_param={}, another_named_param=1):
    named_param[param] = str(another_named_param)
    another_named_param += param
    return named_param

for i in range(0, 2):
    result = {}
    result = fn(i)

    print result

print

for i in range(0, 2):
    result = fn(i, named_param={})

    print result

print

result = fn(0)
print result
result = fn(1)
print result 
```

输出：

```
{0: '1'}
{0: '1', 1: '1'}

{0: '1'}
{1: '1'}

{0: '1', 1: '1'}
{0: '1', 1: '1'} 
```

我希望第一个、第二个循环的输出和随后的 2 个单调用（其参数与 for 循环的值匹配）将具有相同的文本输出，但`fn`保留`named_param`if 未明确默认为空字典的值。文档中是否定义了功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:23:44.280

的默认值`named_param`在函数定义执行时计算一次。每次都是同一个字典，并且在函数调用之间保留它的值。

不要在函数中使用可变对象作为默认值，除非你不改变它们。相反，使用`None`或另一个哨兵值，并检查该值并将其替换为新对象（例如空字典）。这样，每次调用函数时都会得到一个新的。

# javascript - 语法错误：属性列表后缺少 }

> ID：13055310
> 
> 赞同：3
> 
> 时间：2012-10-24T18:19:41.220
> 
> 标签：javascript, jquery, firefox

Firefox 不断给我这个消息：

```
 Hour: 16:11:32
 Erro: SyntaxError: missing } after property list
 Line: 12, Column: 2

 Messages: { name: { required: "Your name here", minlength: 
```

这是代码：

```
$(document).ready(function() {
    $("a").click(function() {
        alert("Hello evrbdy");
    });

    $("#button1").click(function() {
        $("a").hide("slow");
    });
    $("#fomu").validate({
        rules: {
            nome: {
                required: true,
                minlength: 6
            }
        }
        messages: {
            nome: {
                required: "some message",
                minlength: "some other message"
            }
        }
    });
});​ 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-24T18:20:50.410

```
rules:{ 
    nome:{
        required: true, 
        minlength: 6
    } 
},
messages:{  
    nome:{  
        required: "some message",   
        minlength: "some other message"
    } 
```

规则数据对象后缺少逗号

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-24T18:22:38.040

[通过美化](http://jsbeautifier.org/)器运行代码以修复间距，这样会更容易发现：

```
$(document).ready(function () {
    $("a").click(function () {
        alert("Hello evrbdy");
    });

    $("#button1").click(function () {
        $("a").hide("slow");
    });
    $("#fomu").validate({
        rules: {
            nome: {
                required: true,
                minlength: 6
            }
        }, // <-- missing comma here
        messages: {
            nome: {
                required: "some message",
                minlength: "some other message"
            }
        }
    });
}); 
```

# asp.net - 打开带有 href 的网络共享文件夹

> ID：13055311
> 
> 赞同：0
> 
> 时间：2012-10-24T18:19:45.123
> 
> 标签：asp.net, html

我正在尝试使用标签在我的网络上打开一个 Windows 共享文件夹，但是，我不希望新的浏览器窗口打开甚至重新加载我当前的浏览器窗口。我已经尝试了所有目标值，它们都重定向到另一个页面。是否可以在不重定向的情况下打开文件夹。即使有另一个标签。我正在使用 asp.net。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:37:16.760

`iframe`几年前，我在使用源设置为网络路径的情况下取得了一些成功。这产生了一个嵌入式 Windows 资源管理器窗口。但是，那是在 IE 上；我不知道其他浏览器的行为如何。

# asp.net - 错误呈现控件 - WebUserControl，发生未处理的异常

> ID：13055312
> 
> 赞同：0
> 
> 时间：2012-10-24T18:19:45.470
> 
> 标签：asp.net, windows, visual-studio, web-controls

我的代码有什么问题？Visual Studio 没有收到任何警告或错误。

ASP.NET，错误呈现控件 - WebUserControl，发生未处理的异常。

```
<%@ Control Language="C#" AutoEventWireup="true" CodeFile="WebUserControl.ascx.cs"         Inherits="WebUserControl" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 

<script runat="server">

    protected void UploadButton_Click(object sender, EventArgs e)
    {
        // Specify the path on the server to
        // save the uploaded file to.
        String savePath = @"c:\temp\uploads\";

        // Before attempting to perform operations
        // on the file, verify that the FileUpload 
        // control contains a file.
        if (FileUpload1.HasFile)
        {
            // Get the name of the file to upload.
            String fileName = FileUpload1.FileName;

            // Append the name of the file to upload to the path.
            savePath += fileName;

            // Call the SaveAs method to save the 
            // uploaded file to the specified path.
            // This example does not perform all
            // the necessary error checking.               
            // If a file with the same name
            // already exists in the specified path,  
            // the uploaded file overwrites it.
            FileUpload1.SaveAs(savePath);

            // Notify the user of the name of the file
            // was saved under.
            UploadStatusLabel.Text = "Your file was saved as " + fileName;
        }
        else
        {
            // Notify the user that a file was not uploaded.
            UploadStatusLabel.Text = "You did not specify a file to upload.";
        }

    }

</script>

<html  >
<head id="Head1" runat="server">
    <title>FileUpload Example</title>
    <style type="text/css">
        .style1
        {
            width: 100%;
        }
        .style2
        {
            height: 26px;
        }
    </style>
</head>
<body>
    <form id="form1" runat="server">
    <table class="style1">
        <tr>
            <td>
                Select a file to upload:</td>
            <td>
                &nbsp;</td>
        </tr>
        <tr>
            <td class="style2">

       <asp:FileUpload id="FileUpload1"                 
           runat="server">
       </asp:FileUpload>

            </td>
            <td class="style2">
            </td>
        </tr>
        <tr>
            <td>

       <asp:Button id="UploadButton" 
           Text="Upload file"
           OnClick="UploadButton_Click"
           runat="server">
       </asp:Button>    

            </td>
            <td>
                &nbsp;</td>
        </tr>
        <tr>
            <td>

       <hr />

            </td>
            <td>
                &nbsp;</td>
        </tr>
        <tr>
            <td>

       <asp:Label id="UploadStatusLabel"
           runat="server">
       </asp:Label>        
            </td>
            <td>
                &nbsp;</td>
        </tr>
    </table>
    </form>
    <p>
        &nbsp;</p>
</body>
</html> 
```

来自网络浏览器的错误消息：

```
 Server Error in '/WebSite2' Application.
--------------------------------------------------------------------------------

You can only have one <head runat="server"> control on a page. 
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.Web.HttpException: You can only have one <head runat="server"> control on a page.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.  

Stack Trace: 

[HttpException (0x80004005): You can only have one <head runat="server"> control on a page.]
   System.Web.UI.HtmlControls.HtmlHead.OnInit(EventArgs e) +1762795
   System.Web.UI.Control.InitRecursive(Control namingContainer) +333
   System.Web.UI.Control.InitRecursive(Control namingContainer) +210
   System.Web.UI.Control.InitRecursive(Control namingContainer) +210
   System.Web.UI.Control.AddedControl(Control control, Int32 index) +198
   System.Web.UI.ControlCollection.Add(Control child) +80
   System.Web.UI.WebControls.WebParts.WebPartManagerControlCollection.AddWebPartHelper(WebPart webPart) +220
   System.Web.UI.WebControls.WebParts.WebPartManagerControlCollection.AddWebPartsFromZone(WebPartZoneBase zone, WebPartCollection webParts) +607
   System.Web.UI.WebControls.WebParts.WebPartManager.RegisterZone(WebZone zone) +240
   System.Web.UI.WebControls.WebParts.WebZone.OnInit(EventArgs e) +95
   System.Web.UI.WebControls.WebParts.WebPartZone.OnInit(EventArgs e) +9
   System.Web.UI.Control.InitRecursive(Control namingContainer) +333
   System.Web.UI.Control.InitRecursive(Control namingContainer) +210
   System.Web.UI.Control.InitRecursive(Control namingContainer) +210
   System.Web.UI.Control.InitRecursive(Control namingContainer) +210
   System.Web.UI.Control.InitRecursive(Control namingContainer) +210
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +378 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T18:28:12.810

~~为什么你有一个完整的 HTML 结构`UserControl`？每当您在另一个页面中使用此控件时，您就是在另一个文档中插入一个完整的 HTML 文档。仅包含呈现控件所需的 html...而不是整个页面~~

*编辑*..猜猜我的措辞作为评论而不是答案更有意义。所以......*回答*这个问题......你的控件中有一个完整的html结构，所以当它在Webforms页面中使用时，你有框架试图在另一个中插入一个完整的html结构。

只放置尽可能多的 html，以在 .ascx 中呈现控件......而不是整个 html 结构

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T18:31:14.673

用户控件嵌入在页面的内容中，因此它不应该有 head 部分。只有您的实际页面应该有一个标题。

它也不应该有任何其他文档部分，包括 html、body 等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T18:25:04.230

您应该将您的声明替换为：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="WebUserControl.ascx.cs" Inherits="WebUserControl" %> 
```

或者你真的打算让它成为一个自定义控件，你应该摆脱 html 和 head 标签。

# getopts - getopts：可选 $OPT_ARG

> ID：13055316
> 
> 赞同：0
> 
> 时间：2012-10-24T18:20:00.190
> 
> 标签：getopts

我正在寻找一个可以同时运行 -u 和 -u gtest_filter= 的脚本

目前我有

> 而 getopts u: opt 2> /dev/null; 做
> 
> 案例$选择加入
> 
> u) UNIT_TEST=1；UNIT_TEST_OPTION=$OPTARG ;;
> 
> ?) 用法 >&2; 1号出口;;
> 
> 经社理事会
> 
> 完毕

但是，必须有一个论点。我该如何解决这个问题，以便 -u 也可以工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T02:01:59.960

使用`u`代替`u:`（删除冒号）。然后检查下一个参数，看它是否以`-`

```
while getopts u opt 2> /dev/null; do
case $opt in
u)
    UNIT_TEST=1;
    # Test first character of next option
    if [ "$(echo "$2" | head -c 1)" != "-" ]; then
        UNIT_TEST_OPTION=$2
        shift # Move on to next option
    fi
    ;;
?) usage >&2; exit 1 ;;
esac
done 
```

# iphone - UIScrollView 不响应 scrollRectToVisible:animated: 从 iOS 5 中的 ViewDidLoad 调用

> ID：13055321
> 
> 赞同：1
> 
> 时间：2012-10-24T18:20:33.063
> 
> 标签：iphone, ios, uiscrollview

我的应用程序的主视图（启动时显示的那个）是一个包含 UIView 的 UIScrollView。为了整理我的笔尖，我使用[了这种](https://stackoverflow.com/questions/9118796/steps-for-creating-uiscrollview-with-interface-builder/9119126#9119126)方法，一切正常。

但是，当`scrollRectToVisible:animated`在`ViewDidLoad`主视图控制器中调用时（已经设置了 scrollView 的内容大小），scrollView 不会滚动到指定的 CGRect。

有两个奇怪的因素需要考虑：

1.  scrollView 在 iOS 6 上按预期滚动（暴露的问题出现在 iOS 5 上）。

2.  如果我调用代码以 2 秒延迟滚动，则会发生滚动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T15:55:59.153

在 viewDidAppear:(BOOL)animated 中调用 scrollRectToVisible:animated。

我用这个解决了同样的问题。

# php - 从数据库中的行和列中提取特定数据

> ID：13055324
> 
> 赞同：0
> 
> 时间：2012-10-24T18:20:43.500
> 
> 标签：php, sql, database

我的数据库看起来像这样。它按 NO# 排序升序，而 col2 是数据库的开头 NO# 基本上是不可见的，仅用作行号的参考，所以可以说我想在网页上显示 col8 第 5 行中的文本。什么会php代码是？

PS。连接代码是单独的，不是问题，因此我没有包括它我

```
-|NO#|col2|col3|col4|col5|col6|col7|col8|col9|col10
---------------------------------------------------
 |1  |    |    |    |    |    |    |    |    |    |
---------------------------------------------------
 |2  |    |    |    |    |    |    |    |    |    |
---------------------------------------------------
 |3  |    |    |    |    |    |    |    |    |    |
---------------------------------------------------
 |4  |    |    |    |    |    |    |    |    |    |
---------------------------------------------------
 |5  |    |    |    |    |    |    |2012|    |    |
---------------------------------------------------
 |6  |    |    |    |    |    |    |    |    |    |
---------------------------------------------------
 |7  |    |    |    |    |    |    |    |    |    |
---------------------------------------------------
 |8  |    |    |    |    |    |    |    |    |    |
---------------------------------------------------
 |9  |    |    |    |    |    |    |    |    |    |
---------------------------------------------------
 |10 |    |    |    |    |    |    |    |    |    |
--------------------------------------------------- 
```

这是我的代码，但是当我尝试加载它时它会使页面变白。

```
<?php 
//selects row
$query = "SELECT * FROM `Inventory` WHERE NO# = '5'";
//select column
$col8 = $row['col8'];
// fetch the results
WHILE($row = mysql_fetch_array($query):
$row = mysql_fetch_array($result);
// display the results
<div id="year">echo "$col8";</div>
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T18:35:17.960

我可能会做类似下面的事情。不过，我还没有测试过这段代码。

```
<?php 
    $result = mysql_query( "SELECT `col8` FROM `Inventory` WHERE `NO#` = '5' LIMIT 1" );
    $row = mysql_fetch_assoc( $result );
?>
<div id="year"><?php echo $row['col8']; ?></div> 
```

希望这会对您有所帮助。

# javascript - 以网格格式显示文本框中的数据

> ID：13055327
> 
> 赞同：0
> 
> 时间：2012-10-24T18:20:50.040
> 
> 标签：javascript, jquery

我的问题可以在 javascript/jquery 中使用网格格式显示数据，但不能仅在前端从数据库中获取数据。认为：

```
textfield1
textfield2
    add more (link) 
```

当点击添加更多链接时，用户输入的数据显示如下：

```
Firstname      Lastname
amit           kumar

textfield1
textfield2
    add more (link) 
```

并立即将两个文本字段都留空。下一步也是一样的。

请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T18:26:29.673

如果您有以下 HTML：

```
<table id="mylist">
    <tr>
        <td>First Name</td>
        <td>Last Name</td>
    </tr>
</table>

<input name="fname">
<input name="lname">
<button>Add More</button> 
```

然后有JS：

```
$(function(){
  $('button').on('click',function(){
    var fname = $('input[name="fname"]').val();
    var lname = $('input[name="lname"]').val();
    $('#mylist').append('<tr><td>'+fname+'</td><td>'+lname+'</td></tr>');
    // CLEAR FIELDS
    $('input[name="fname"],input[name="lname"]').val(''); // No value
  });
}); 
```

# python - Rpy2安装问题，Windows 7

> ID：13055340
> 
> 赞同：6
> 
> 时间：2012-10-24T18:21:48.243
> 
> 标签：python, r, installation, rpy2

我正在努力为我的问题找到解决方案，到目前为止还没有成功。

我正在尝试在我的计算机上安装最新的 Rpy2 版本。我已经安装了所有必需的程序（R 2.15.1 和 2.7 Python）。我正在使用命令通过 cmd 安装 Rpy2 (rpy2-2.3.0)

`python setup.py build install`

我得到这个回溯：

> 回溯（最近一次通话最后）：
> 
> 文件“setup.py”，第 441 行，在
> 
> [os.path.join('doc', 'source', 'rpy2_logo.png')])],
> 
> 文件“c:\Python27\lib\distutils\core.py”，第 152 行，在设置中
> 
> dist.run_commands()
> 
> 文件“c:\Python27\lib\distutils\dist.py”，第 953 行，在 run_commands
> 
> self.run_command(cmd)
> 
> 文件“c:\Python27\lib\distutils\dist.py”，第 972 行，在 run_command
> 
> cmd_obj.>运行（）
> 
> 运行中的文件“c:\Python27\lib\distutils\command\install.py”，第 563 行
> 
> self.run_command('build')
> 
> 文件“c:\Python27\lib\distutils\cmd.py”，第 326 行，在 run_command
> 
> self.distribution.run_command(command)
> 
> 文件“c:\Python27\lib\distutils\dist.py”，第 972 行，在 run_command
> 
> cmd_obj.run()
> 
> 运行中的文件“c:\Python27\lib\distutils\command\build.py”，第 127 行
> 
> self.run_command(cmd_name)
> 
> 文件“c:\Python27\lib\distutils\cmd.py”，第 326 行，在 run_command
> 
> self.distribution.run_command(command)
> 
> 文件“c:\Python27\lib\distutils\dist.py”，第 971 行，在 run_command
> 
> cmd_obj.ensure_finalized()
> 
> 文件“c:\Python27\lib\distutils\cmd.py”，第 109 行，在 ensure_finalized
> 
> self.finalize_options()
> 
> 文件“setup.py”，第 152 行，在 finalize_options
> 
> config += get_rconfig(r_home, about)
> 
> 文件“setup.py”，第 312 行，在 get_rconfig
> 
> rc = RConfig.from_string(rconfig, allow_empty = allow_empty)
> 
> 文件“setup.py”，第 272 行，在 from_string
> 
> *   '\nin 字符串\n' + 字符串）
> 
> ValueError：无效的子字符串
> 
> 在字符串中

尝试安装时遇到的相同错误

`easy_install rpy2`

更新：现在在另一台电脑（64 位）上显示相同的错误

感谢帮助！:D

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T17:23:23.437

放弃了`rpy`包裹。我会推荐**PypeR**包，它更快、易于安装 (easy_install) 并且使用愉快！[http://pypi.python.org/pypi/PypeR/](http://pypi.python.org/pypi/PypeR/)

# c++ - 从文本文件更改一行中的字段，存储到数组而不是重新写入文件

> ID：13055344
> 
> 赞同：0
> 
> 时间：2012-10-24T18:22:10.707
> 
> 标签：c++, arrays, stream

我的程序有两个参数，第一个参数是要更改的名称，第二个参数是要更改的名称。

执行后，我的文本文件缺少第二行，假设从 May 更改为 MayMay。我不确定我的`if else`陈述是否有问题或`while(!file.fail)`有问题。

这是我的原始文本文件。

```
user;   pass;   1234; John;     1111
user1;  pass1;  2345; May;      2222
user2;  pass2;  3456; Mary;     3333
user3;  pass3;  4567; Andy;     4444
hr;     hr;     5678; Jonathan; 5555
admin;  admin;  6789; Aili;     6666
user10; pass10; 7890; eggy;     9999
user11; pass11; 9807; Mary;     7777 
```

这是程序执行后我的输出文本文件。

```
user;   pass;   1111;  John;

user2;  pass2;  3333;  Mary;
user3;  pass3;  4444;  Andy;
hr;     hr;     5555;  Jonathan;
admin;  admin;  6666;  Aili;
user10; pass10; 9999;  eggy;
user11; pass11; 7777;  Mary;

        pass11; 7777;  Mary; 
```

这是我的代码：

```
bool Employee::changeName(string nnn, string mmm)
{
    int i = 0;
    ifstream file("login1.txt"); // to open the file
    string name, empty, empty2, empty3, empty4; // fusername is use to store the first parameter in textfile,empty is use to store the rest of the line after the ';'
    string store[100]; // initialize a array to store textfile contents

    while (!file.fail()) // loop if file didn't fail
    {   
        getline(file, empty, ';'); // use ; as delimiter
        getline(file, empty2, ';'); // use ; as delimiter
        getline(file, empty3, ';'); // use ; as delimiter
        getline(file, name, ';'); // use ; as delimiter
        getline(file, empty3); // use line end as delimiter, and to skip the rest of the information
        string add = ""; //initialize add string to nothing when it loops

        if(name != nnn) // to check if the username in textfile do not match the user input name
        {
            add += empty + ';' + empty2 + ';' + empty3 + ';' + name + ';' + empty4; // adds back the username and rest of the line together back    
            store[i] = add; // store into an array
            cout << "i is: " << i << endl; // debugging.
            cout << "store array[] = " << store[i] << endl; // debugging..
            i++;
        }
        else if(name == nnn)
        {
            add += empty + ';' + empty2 + ';' + empty3 + ';' + mmm + ';' + empty4; // adds back the name and rest of the line together back 
            store[i];
            cout << "i is: " << i <<endl; // debugging.
            cout << "store array[] = " << store[i] << endl; // debugging..
            i++;
        }
        else{}  
    }

    remove("login1.txt"); //remove the textfile
    ofstream pwd2_file ; // initilize a outputstream textfile
    pwd2_file.open("login1.txt"); // create a new file call login1.txt

    for (int x = 0; x < i; x++)//for loop to store store[] array into login1.txt
    {
        pwd2_file << store[x] << endl; // storing into textfile
    }
    pwd2_file.close(); // close the output stream
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T18:33:01.067

导致空行的问题是，当您在 else-if 语句中替换名称时，您有这些行

```
add += empty+';'+empty2+';'...
store[i]; 
```

我猜应该是

```
store[i] = add; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T18:51:10.130

您在`empty3`每个循环中读取两次，同时`empty4`留空：

```
getline(file, empty, ';');
getline(file, empty2, ';');
getline(file, empty3, ';');  // <--- here
getline(file, name, ';');    //     
getline(file, empty3);       // <--- and here (this is supposed to be empty4, right?) 
```

然后你得到一个无效的声明（Chad Campbell 已经指出）：

```
store[i]; 
```

最后，一个不正确的条件：`while(!file.fail())`- 当流仍然良好时，您进入最后一次迭代 - 您已读取所有数据但尚未尝试读取结束，这会使流处于错误状态 - 下一次读取失败但您不要检查它并默默地重新使用上一次迭代中的数据。

始终在某些布尔上下文（`while(getline(...))`例如 ）中使用输入操作，或者至少在尝试读取*后检查流。*在你的情况下，是这样的：

```
while (true)
{   
    getline(file, empty, ';');
    getline(file, empty2, ';');
    getline(file, empty3, ';');
    getline(file, name, ';');
    getline(file, empty3);
    if (!file) break;

    // do stuff with data
} 
```

# c - 在 Windows 命令行中从 Eclipse Juno 启动 C 程序

> ID：13055350
> 
> 赞同：3
> 
> 时间：2012-10-24T18:22:40.103
> 
> 标签：c, eclipse, cmd

我有一个非常简单的 C 控制台项目，我在 eclipse juno 中编程（CDT 插件和 mingw64 gcc 编译器）我发现 eclipse 控制台被视为文件，所以当我调用`printf`函数时，它**不会**刷新缓冲区，直到明确告知.
我发现如果我直接从命令行运行程序，那么缓冲区会按原样刷新。所以.....我需要找到一种方法来从eclipse启动我的程序以在命令行中运行。我找到了我不太了解的解决方案和我认为必要的解决方案（通过 Eclipse 运行的批处理文件）。
我正在寻找更可配置的解决方案，例如`cmd.exe`在项目属性中指定某处或创建运行配置，在其中指定`cmd.exe`.
有没有人知道这样的方式？

# c# - 如何在一系列鼠标点击中找到一个形状？

> ID：13055351
> 
> 赞同：0
> 
> 时间：2012-10-24T18:22:47.537
> 
> 标签：c#, .net, c#-4.0, shape, shapes

我想知道如何（如果有的话）在给定一组鼠标点击的 X、Y 坐标的情况下确定形状？

我们在这里处理了许多问题，可能存在与形状无关的点击（坐标）。下面是一个例子：[http](http://tinypic.com/view.php?pic=286tlkx&s=6) ://tinypic.com/view.php?pic=286tlkx&s=6 绿点代表鼠标点击，搜索的是一个高度/宽度至少为x，高度/最多为y的正方形宽度和折衷四个点，红线表示找到的形状。我希望能够找到一些基本形状，例如正方形、矩形、三角形和理想的圆形。

我听说最小二乘对我有帮助，但我不清楚这对我有什么帮助。我正在使用 C#，示例非常受欢迎:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T21:16:47.743

You can create detectors for each shape you want to support. These detectors will tell, if a set of points form the shape.

So for example you would pass 4 points to the quad detector and it returns, if the 4 points are aligned in a quad or not. The quad detector could work like this:

*   for each point
    *   find the closest neighbour point
    *   compute the inner angle
    *   compute the distance to the neighbours
*   if all inner angles are 90° +- some threshold -> ok
*   if all distances are equal +- some threshold (percentage) -> ok
*   otherwise it is no quad.

A naive way to use these detectors is to pass every subset of points to them. If you have enough time, then this is the easiest way. If you want to achieve some performance, you can select the points to pass a bit smarter.

E.g. if quads are always axis aligned, you can start at any point, go right until you hit another point (again with some thresold), go down, go left.

Those are just some thoughts that might help you further. I can imagine that there are algorithms in AI that can solve this problem in a more pragmatic way, maybe neural networks.

# c# - 为什么 XmlSerializer.Order 这样做

> ID：13055352
> 
> 赞同：1
> 
> 时间：2012-10-24T18:22:54.653
> 
> 标签：c#, .net, serialization, xml-serialization

谁能解释为什么我在下面得到结果？

应该实例化的类：

```
[System.SerializableAttribute()]
public class SampleClass
{
    [System.Xml.Serialization.XmlElementAttribute(Order = 10)]
    public string Foo { get; set; }
    [System.Xml.Serialization.XmlElementAttribute(Order = 5)]
    public string Bar { get; set; }
} 
```

用于反序列化的 XML：

```
<?xml version="1.0" encoding="utf-8" ?>
<SampleClass>
  <Foo>Test1</Foo>
  <Bar>Test2</Bar>
</SampleClass> 
```

我在反序列化类中看到 Foo = Test1 （正确）和 Bar = null （不正确）。

这都是关于`Order`属性的。它被故意设置为错误的值。如果值为 0 和 1，则一切正常。

`Name`和`Order`标准不匹配两个字段，但由于某种原因，一个字段被反序列化，而第二个字段不被反序列化。我宁愿看到`Exception`或两个值 = null 或两个字段都已解析和反序列化。

对此有什么解释吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T18:48:33.987

您确实看到了一个序列化错误。

这真的归结为设计偏好。开发人员决定他们不想`except`中止整个反序列化过程，而是通知并继续。

使用您的 XML。

```
<?xml version="1.0" encoding="utf-8" ?>
<SampleClass>
  <Foo>Test1</Foo>
  <Bar>Test2</Bar>
</SampleClass> 
```

考虑这段代码来反序列化它。

```
XmlSerializer xs = new XmlSerializer(typeof(SampleClass));

XmlDeserializationEvents events = new XmlDeserializationEvents();
events.OnUnknownAttribute = (sender, e) => Debug.WriteLine("Unknown Attributed");
events.OnUnknownElement = (sender, e) => Debug.WriteLine("Unknwon Element");
events.OnUnknownNode = (sender, e) => Debug.WriteLine("Unknown Node");
events.OnUnreferencedObject = (sender, e) => Debug.WriteLine("Unreferenced Object");

SampleClass cs_de = (SampleClass)xs.Deserialize(XmlReader.Create(new StringReader(xml)), events);

Debug.WriteLine(cs_de.Foo);
Debug.WriteLine(cs_de.Bar); 
```

* * *

当我使用正确的顺序时。

```
[System.Xml.Serialization.XmlElementAttribute(Order = 0)]
public string Foo { get; set; }
[System.Xml.Serialization.XmlElementAttribute(Order = 1)]
public string Bar { get; set; } 
```

我的输出是

```
Foo
Bar 
```

* * *

当我使用不正确的顺序时。

```
[System.Xml.Serialization.XmlElementAttribute(Order = 10)]
public string Foo { get; set; }
[System.Xml.Serialization.XmlElementAttribute(Order = 5)]
public string Bar { get; set; } 
```

我的输出是

```
Unknown Node
Unknwon Element
Foo 
```

* * *

那么为什么会`Foo`打印出来呢？好吧，我的理解是那`Order`不是**索引**。`Order`ing 只指定`Foo`需要出现在 之前，而`Bar`不是`Foo`需要是第 10 个元素并且`Bar`需要是第 5 个。我认为这使反序列化器更加灵活。

# r - R 中的 S4 对象无法传递给 Fortran

> ID：13055353
> 
> 赞同：0
> 
> 时间：2012-10-24T18:23:11.797
> 
> 标签：r, s4

我使用R`bdiag`中包中的函数`Matrix`生成对角矩阵，然后将结果矩阵（称为`mat`）传递给自写的函数，但由于以下错误，R 无法执行：

`Error: invalid mode (S4) to pass to Fortran (arg 1)`

我查了一下`isS4(mat)`，是的`TRUE`。因此，我想有一种方法可以以某种方式转换 S4 对象以便传递给函数。任何建议将不胜感激！

更新：我使用以下代码构建块对角矩阵：

```
grp.ids <- as.factor(c(rep(1,8), rep(2,4), rep(3,2)))
x <- model.matrix(~grp.ids)
X <- do.call(bdiag, replicate(238, x, simplify=FALSE)) 
```

有没有其他方法可以在不使用该`bdiag`函数的情况下获得 S3 矩阵？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T21:05:25.540

Only the `.Call()` interface can pass full R objects down to C or C++ code, see Section 5 of the Writing R Extensions manual. With `.Fortran()` and `.C()` you are limited to basic vectors of `int`, `double`, ... and their corresponding Fortran types.

# powershell - 在 PS 中检测 .NET 异常

> ID：13055355
> 
> 赞同：1
> 
> 时间：2012-10-24T18:23:16.900
> 
> 标签：powershell

我在我的 PS 脚本中按顺序对 .NET 类进行了多次调用，如下所示：

```
[class1]::MethodA()
[class1]::MethodB()

if(/*check if last method threw an error*/)
{
    "MethodB failed! Exiting."
    return
}

[class2]::MethodC()
[class2]::MethodD() 
```

在继续之前，我真的想检查 MethodB 是否有异常。如何检查这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:29:07.040

使用 try/catch 块：

```
try
{
 [class1]::MethodB()
}
catch
{
 Write-Host "MethodB failed!"
 exit
} 
```

# c# - ASP.NET Gridview 按钮

> ID：13055357
> 
> 赞同：1
> 
> 时间：2012-10-24T18:23:18.197
> 
> 标签：c#, asp.net, sql, gridview

我有一个包含 3 列（CompanyName、Volume、counter）的 Gridview 我希望计数器列是所有按钮，当用户单击按钮时，它会将计数器增加 1。我不确定如何正确设置更新命令。这是我到目前为止所拥有的：

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
        DataSourceID="SqlDataSource1" 
        EmptyDataText="There are no data records to display.">
        <Columns>
            <asp:BoundField DataField="CompanyName" HeaderText="CompanyName" 
                SortExpression="CompanyName" />
            <asp:BoundField DataField="Volume" HeaderText="Volume" 
                SortExpression="Volume" />
            <asp:ButtonField DataTextField="counter" HeaderText="counter" 
            ButtonType="button"/>

        </Columns>
    </asp:GridView>
    <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
        ConnectionString="<%$ ConnectionStrings:LiquorStoreConnectionString1 %>" 
        ProviderName="<%$ ConnectionStrings:LiquorStoreConnectionString1.ProviderName %>" 
        SelectCommand="SELECT [CompanyName], [Volume], [counter] FROM [Company]">
    </asp:SqlDataSource> 
```

我需要做的就是每次在该特定行上按下按钮时递增 1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T19:04:28.637

你可以试试这个：

```
... UpdateCommand="Update COMPANY SET counter=@Counter +1 WHERE CopmanyName=@Company"
<columns> 
    <asp:BoundField HeaderText="counter" DataField="Counter" />             
</columns> 
```

确保绑定的字段名称正确。我还没有测试过 this + 1 是否适用于绑定字段。如果没有，那么我们将不得不使用 OnRowCommand 手动更新数据库，然后您可以重新绑定视图并查看更新的计数器。更重要的是，我看不到贵公司的良好主键，因此您可以进行更新...所以我的示例使用的是 CompanyName，这是危险的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T18:32:55.453

你想更新数据库吗？您可以在 gridview 行命令中捕获按钮单击事件。看看下面给出的链接 [http://msdn.microsoft.com/en-us/library/bb907626.aspx](http://msdn.microsoft.com/en-us/library/bb907626.aspx)

# java - 如何在单词之间添加分隔符？

> ID：13055359
> 
> 赞同：2
> 
> 时间：2012-10-24T18:23:20.737
> 
> 标签：java, bluej

我正在为我的作业编写一个刽子手程序，但遇到了一个小问题。在我的程序中，为了分隔单词，我使用 '|' 象征。例如，这是要猜测的词：

```
U N I T E D | S T A T E S | O F | A M E R I C A 
```

我有一个显示编号的 StringBuffer 变量。破折号在这里，

```
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
```

我尝试使用以下代码插入分隔符“|”

```
if(guessword.indexOf('|') == -1)
    System.out.print(" ");
else
    guessit.setCharAt(guessword.indexOf('|'),'|'); 
```

我知道它错了，它只插入 1 个分隔符。你能帮我在正确的位置插入分隔符吗？您也可以尝试删除 System.out.print(" "); 因为它不必要地留下空间。我可以使用休息吗？相反，对于上面的例子，我得到的显示为

```
_ _ _ _ _ _ | _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
```

我其实想要

```
_ _ _ _ _ _ | _ _ _ _ _ _ | _ _ | _ _ _ _ _ _ _ 
```

我的主要方法如下

```
public static void main()throws IOException
{
    Hangman obj = new Hangman();
    InputStreamReader isr = new InputStreamReader(System.in);
    BufferedReader br = new BufferedReader(isr);
    PrintWriter p = new PrintWriter(System.out,true);

    p.println("Lets play HANGMAN");
    p.println();
    p.println("Enter your choice according to the following options.\n
               NOTE: Words are related to the topics given below.\n
               1\. Sports\n2\. Movies\n3\. Computer\n4\. Food\n5\. Countries");
    p.println();
    int choice = Integer.parseInt(br.readLine());
    obj.clearScreen();
    String bothwordandclue[] = new String[2];

    if(choice == 1)
        bothwordandclue = obj.Sports();
    else if(choice == 2)
        bothwordandclue = obj.Movies();
    else if(choice == 3)
        bothwordandclue = obj.Computers();
    else if(choice == 4)
        bothwordandclue = obj.Food();
    else if(choice == 5)
        bothwordandclue = obj.Countries();
    else
        p.println("Wrong choice");

    int counter = 6;
    String guessword = bothwordandclue[0];
    String wordclue = bothwordandclue[1];

    int lengthofword = (int)(Math.round(((double)guessword.length()/2)));
    int checkguess = 0;
    String a;
    StringBuffer guessit = new StringBuffer();

    for (int i = 0;i < lengthofword; i++)
        guessit = guessit.append("_ ");

    guessit.delete((2 * lengthofword)-1,(2 * lengthofword));

    if(guessword.indexOf('|') == -1)
        System.out.print(" ");
    else
        guessit.setCharAt(guessword.indexOf('|'),'|');

    p.println(guessit);
    do
    {
        p.println();
        p.println("Enter your guess letter in capitals");
        String guessletter = br.readLine();
        obj.clearScreen();

        for(int i = 0;i<lengthofword;i++)
        {
            if(guessletter.charAt(0) == guessword.charAt(2*i))
            {
                guessit.setCharAt(2*i,guessletter.charAt(0));
                checkguess=1;
            }                
        }
        if(checkguess == 1)
        {
            p.println("Correct Guess");
            p.println(guessit);
        }
        else
        {
            counter--;
            p.println("Wrong guess. You have " + counter + 
                                    " incorrect guesses left");
            p.println(guessit);
        }
        checkguess = 0;
        a = guessit.toString();
        if(a.equals(guessword))
        {
            p.println("You guessed the word!!!!!");
            counter=0;
        }        
    }while(counter>0);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:46:21.253

你可以做到这一点`indexOf`。只是您需要使用该方法的另一个版本，它从开始搜索的位置获取位置。在这里看到[`String#indexOf(String str, int fromIndex)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#indexOf%28java.lang.String,%20int%29)你需要。

```
int index = guessword.indexOf("|");
while(index >= 0) {
   guessIt.setCharAt(index, '|')

   // Start searching for next "|" after this index
   index = guessword.indexOf("|", index+1));  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T18:40:42.270

问题是每个索引`setCharAt`只`indexOf`适用于一个索引，这就是它只替换第一个 | 的原因。您将不得不`guessword`多次迭代。您可以使用 Java 的其他一些内置 String 函数或使用简单的 for 循环，即

```
for(int i = 0; i < guessword.length(); i++){
    if(guessword.charAt(i) == '|')
        guessit.setCharAt(i, '|');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T18:40:16.950

请参见[String.replaceAll](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)

如果您不了解正则表达式：

[维基百科上的正则表达式](http://en.wikipedia.org/wiki/Regular_expression)

[正则表达式备忘单](http://regexlib.com/CheatSheet.aspx)

# http - 最大 HTTP 数据包大小

> ID：13055360
> 
> 赞同：5
> 
> 时间：2012-10-24T18:23:27.913
> 
> 标签：http, get, amazon-s3, network-protocols, packet

HTTP 数据包的最大大小是多少？我对 HTTP GET 请求的响应大小感兴趣（不是[这个](https://stackoverflow.com/questions/2659952/maximum-length-of-http-get-request)！这个问题是关于请求大小的）。有大小吗？如果我下载一个 1GiB 的文件，那最终是否只是 1 个 HTTP GET 请求？（直觉上，我不认为会发生这种情况——此外，部分下载/多线程下载器也不起作用）。

我知道 IP 数据包和 TCP 数据包的最大长度超过了跨多个 IP 数据包分段的长度。HTTP也会发生这样的事情吗？我正在寻找这个问题的答案的原因是找出收取 1c / 10K 获取请求的 AWS S3 计费方案。那么有多少 GET 请求开始为 1GiB 提供服务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T20:19:06.887

我在[Seungyoung Kim的](https://forums.aws.amazon.com/profile.jspa?userID=232455)[AWS S3 论坛](https://forums.aws.amazon.com/message.jspa?messageID=394585)上得到了答案

> 如果您使用 GET 请求下载 5GiB 文件。S3 的计费系统会将其计为 1 次 GET 请求和 5GiB 数据传输。仅供参考，如果您停止下载 5GiB 中的 2GiB 文件，那么他们将仅计算 2GiB 数据传输。
> 
> GET 请求通常不会分段，除非您将调用拆分为多个连续的 GET 范围调用。
> 
> 因此，如果您使用每个 1GiB 数据块的范围标头发出 5 个单独的 GET 请求，他们会将其计为 5 个 GET 请求，但仍然是相同的 5GiB（1GiB x 5 次）数据传输。由于额外的 HTTP 协议标头，技术上略高于 5GiB。

如果这是正确的，则没有 HTTP GET 响应的数据包碎片（尽管它们遇到几个 TCP 数据包并且丢失的 TCP 数据包由 TCP 处理并且不会非法恢复另一个 GET 请求）

# apache-flex - 舞台缩放模式错误 #1009

> ID：13055363
> 
> 赞同：0
> 
> 时间：2012-10-24T18:23:47.457
> 
> 标签：apache-flex, actionscript, air, resize, window

我正在尝试创建一个简单的 Air/Flex 应用程序，该应用程序加载用户选择的图像，然后调整窗口大小以使所选图像适合它。如果我理解正确的话，我需要设置stage.scaleMode = StageScaleMode.NO_SCALE。但是，当我调用它时，我只会收到错误 #1009“无法访问空对象引用的属性或方法”。下面是我的默认应用程序 mxml：

```
 <?xml version="1.0" encoding="utf-8"?>
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
                       xmlns:s="library://ns.adobe.com/flex/spark" 
                       xmlns:mx="library://ns.adobe.com/flex/mx" 
                       initialize="init();"
                       applicationComplete="complete();"
                       xmlns:local="*">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->

    </fx:Declarations>

    <mx:MenuBar id="myMenubar" width="832" itemClick="menuHandler(event);" labelField="@label" depth="0">
        <fx:XMLList xmlns="">
            <item label="File">
                <item label="New" id="new"/>
                <item label="Open" id="open"/>
                <item label="Save" id="save"/>
                <item label="Save As" id="saveas"/>
                <item label="Quit" id="quit"/>
            </item>

            <item label="Edit">
                <item label="Undo" id="undo"/>
                <item label="Redo" id="redo"/>
                <item label="Preferences" id="preferences"/>
            </item>

            <item label="Level">
                <item label="New Room" id="newroom"/>
                <item label="Properties" id="properties"/>
            </item>

            <item label="Objects">
                <item label="Clickable" id="clickable"/>
                <item label="Character" id="character"/>
                <item label="Door" id="door"/>
                <item label="Treasure" id="treasure"/>
            </item>
        </fx:XMLList>

    </mx:MenuBar>

    <s:SpriteVisualElement id="flashpunk" depth="-2">
    </s:SpriteVisualElement>    

    <fx:Script>

        <![CDATA[

        import mx.collections.*;
        import mx.controls.Alert;
        import mx.core.IUIComponent;
        import mx.events.MenuEvent;
        import flash.display.StageScaleMode;

        public var Maini:Main = new Main; 

            private function init():void
            {
                flashpunk.addChild(Maini);

            }

            private function complete():void
            {

                stage.scaleMode = StageScaleMode.NO_SCALE;
            }

            private function menuHandler(evt:MenuEvent):void  
            {
                // Don't open the Alert for a menu bar item that 
                // opens a popup submenu.

                    Alert.show("Label: " + evt.item.@label + "\n" + 
                        "Data: " + evt.item.@data, "Clicked menu item");
                    Maini.foo();

            }

        ]]>

    </fx:Script>

</s:WindowedApplication> 
```

我做错了什么？

另外，在我设置了 scalemode 之后，如何将窗口大小设置为新大小？我的调试播放器似乎甚至无法识别 [SWF(width = "1200", height = "600")] 或尝试设置舞台宽度和高度。我正在使用 Flash builder 4.6。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-14T04:52:09.233

根据[http://killerspaz.wordpress.com/2010/10/24/access-to-the-stage-in-flex/](http://killerspaz.wordpress.com/2010/10/24/access-to-the-stage-in-flex/) - 在组件初始化期间，您可以通过`this.systemManager`引用访问舞台。

```
systemManager.stage.scaleMode = StageScaleMode.NO_SCALE; 
```

# c# - 如何使用 Excel Interop - C# 保存/覆盖现有 Excel 文件

> ID：13055369
> 
> 赞同：21
> 
> 时间：2012-10-24T18:24:00.927
> 
> 标签：c#, excel, excel-interop

有没有办法通过 excel 互操作将更改保存到 excel 电子表格（在这种情况下，我正在向其中添加工作表），而不会提示用户是否要使用更改覆盖现有文件。我不希望用户甚至看到在我的应用程序中打开的电子表格，因此弹出一个消息框询问他们是否要覆盖文件似乎非常不合适并且可能使用户感到困惑。

我正在使用 workbook.SaveAs(fileloaction) 方法。

这是我为 excel 互操作初始化 COM 引用对象的地方。

```
private Excel.Application app = null;
    private Excel.Workbook workbook = null;

    public Excel.Workbook Workbook
    {
        get { return workbook; }
        set { workbook = value; }
    }
    private Excel.Worksheet worksheet = null;
    private Excel.Range workSheet_range = null; 
```

下面是我用来关闭/保存 excel 文件的代码。workbook.close() 方法行是据报道抛出未处理异常的方法行。

```
 workbook.Close(true, startForm.excelFileLocation, Missing.Value);
            Marshal.ReleaseComObject(app);
            app = null;
            System.GC.Collect(); 
```

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-10-24T18:29:04.200

基本上，您所需要的只是**ExcelApp.DisplayAlerts = False** - 不过，我是这样做的：

```
ExcelApp.DisplayAlerts = False
ExcelWorkbook.Close(SaveChanges:=True, Filename:=CurDir & FileToSave) 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-08-29T05:57:42.137

只有此代码需要停止覆盖警报或模板已在使用中

**ExcelApp.DisplayAlerts = False**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-19T14:27:26.810

我知道这是一篇旧帖子，但我想分享一种方法来完成这项工作，而不会在未来造成可能的挫败感。

首先我不喜欢使用：ExcelApp.DisplayAlerts = False

设置此标志将在 excel 文件上设置此属性，而不仅仅是在您的程序中。这意味着如果用户对文件进行更改并关闭它（通过单击 X），他们将不会被提示保存文件，并且会在以后造成挫败感。它还将禁用 excel 通常会发布的任何其他提示。

我喜欢在保存之前检查文件是否存在：

```
 if (File.Exists(SaveAsName))
        {
            File.Delete(SaveAsName); 
        } 
```

# api - twitter 示例 API 提供了多少百分比的推文？

> ID：13055370
> 
> 赞同：2
> 
> 时间：2012-10-24T18:24:01.273
> 
> 标签：api, twitter, social-networking

有谁知道我们从[twitter 示例 API](https://dev.twitter.com/docs/api/1.1/get/statuses/sample)获得的推文数量与 Twitter 服务器接收到的推文总数之间的比率是多少？我正在根据从示例 API 读取的数据进行一些分析，并想估计 Twitter 服务器处理的实际工作量。我观察到我们从 API 获得的推文数量会随着时间而变化。所以，我认为它类似于百分比样本。任何线索都受到高度赞赏。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-20T16:53:36.080

样本流`/statuses/sample`确实返回了大约 1% 的所有推文。Twitter 通过每秒仅发送 1,000 毫秒中的 10 毫秒窗口内创建的推文来对推文进行采样。如果您想了解更多详细信息，可以阅读我的博文：http: [//blog.falcondai.com/2013/06/666-and-how-twitter-samples-tweets-in.html](http://blog.falcondai.com/2013/06/666-and-how-twitter-samples-tweets-in.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T18:39:50.317

当[Twitter Spritzer](http://gnip.com/twitter/spritzer)（基本上是老式的流 API）推出时，据说它约占所有推文的 1-2%。根据我对当前 Streaming API 的使用，如果它现在超过 1%，甚至可能更少，我会感到惊讶。根据文档，“ [Twitter 流媒体量不是恒定](https://dev.twitter.com/docs/streaming-apis/processing)的”，但他们忽略了 API 输出的量是否与实际推文的速率成正比。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-07T15:52:01.370

2015 年 2 月 2 日，Twitter[宣布](https://twittercommunity.com/t/potential-adjustments-to-streaming-api-sample-volumes/31628)打算将流式 API 采样率重置为 1%（它无意中爬得更高）：

> 公共 Streaming API 示例端点（又名 POST 状态/过滤器和 GET 状态/示例）旨在随时调整为公共推文量的大约 1%。
> 
> 由于过去的一些配置不一致，有时通过 Streaming API 传递的推文量可能超过了这些参数。
> 
> 该通知旨在表明，在接下来的几周内，我们将对公共 Streaming API 进行更改，以重新平衡推文的数量，使其达到预期的 1% 容量。

[该图](https://twittercommunity.com/t/volume-drop-in-streaming-api/38685)显示了重置对典型推文流的影响。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-12T04:45:39.913

这是我在 [https://brightplanet.com/2013/06/25/twitter-firehose-vs-twitter-api-whats-the-difference-and-why-should-you-care/](https://brightplanet.com/2013/06/25/twitter-firehose-vs-twitter-api-whats-the-difference-and-why-should-you-care/)找到的。希望这个对你有帮助。

> 研究估计，使用 Twitter 的 Streaming API 的用户可以期望近乎实时地接收从 1% 到 40% 以上的推文。

网页底部有他们引用的研究的参考资料。

# extjs4 - extjs - 将数据从 JSON 加载到面板中

> ID：13055372
> 
> 赞同：0
> 
> 时间：2012-10-24T18:24:09.930
> 
> 标签：extjs4

我想将 JSON 文件中的数据加载到面板（不是网格，只是面板）并使用模板显示信息。我不知道如何将面板与模型/商店连接起来。如果这很重要，我正在使用 Sencha Architect。我已经设置并连接了商店和模型。我只是想念如何将该信息传递给面板本身。

json文件是这样的：

```
"overview": {
    "image": "my-picture.jpg",
    "name": "my name",
    "title": "my title",
    "address": {
        "line1": "123 Fake St",
        "line2": "",
        "city": "Nowhere",
        "state": "NJ",
        "zip" : "12345"
    }
} 
```

我想使用的模板如下所示：

```
<div>
    <img src="images/{image}"><br/>
    {name}, {title}
    <br/>
    {address.line1}<br/>
    {address.line2}<br/>
    {address.city}, {address.state}<br/>
    {address.zip}
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T19:14:12.503

我想出了一个适当的解决方案：

```
...
// panel declaration in the items array
{
    xtype: 'panel',
    flex: 1,
    region: 'west',
    tpl: [
        '<div>',
        '<img src="images/{image}"><br/>',
        '{name}, {title}',
        '<br/>',
        '{address.line1}<br/>',
        '{address.line2}<br/>',
        '{address.city}, {address.state}<br/>',
        '{address.zip}',
        '</div>'
    ],
    width: 150,
    bodyCls: 'x-panel-body-white',
    header: false,
    title: 'Address',
    listeners: {
        afterrender: {
            fn: me.onPanelAfterRender,
            scope: me
        }
    }
    },

...
// and later on in the code, a function that fires after render
onPanelAfterRender: function(abstractcomponent, options) {
    var s = Ext.getStore('MyAddresses');
    var r = s.getAt(0).raw;
    abstractcomponent.tpl.overwrite(abstractcomponent.body, r);
}, 
```

# php - 使用 php 识别为网络钓鱼的电子邮件发送

> ID：13055373
> 
> 赞同：0
> 
> 时间：2012-10-24T18:24:18.803
> 
> 标签：php, html, thunderbird

我的登录注册脚本有问题。

该脚本处理用户的注册信息并保存。另外一封电子邮件会发送给此人，以验证他的电子邮件地址。

问题是这封电子邮件被雷鸟标记为网络钓鱼电子邮件。

```
 //send verify email
    $sender = "test@example.de";
    $empfaenger = $email;
    $betreff = "Welcome";
    $mailtext = "Thank you for your registration.
    Please go to <a href=\"http://validatingsite.de\">this site</a> and enter your 
    activationcode in order to verify your email-address";

    mail($empfaenger, $betreff, $mailtext, "From: $sender\n" . "Content-Type:
    text/html; charset=iso-8859-1\n") 
```

如果我删除链接

```
<a> href=\"http://validatingsite.de\">this site</a> 
```

电子邮件未标记，一切正常。

有人知道如何解决我的问题吗？我是否在电子邮件中正确添加了链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:32:24.373

这是 Thunderbird 的设计行为：https: [//support.mozillamessaging.com/en-US/kb/thunderbirds-scam-detection#w_thunderbirds-automatic-scam-filtering](https://support.mozillamessaging.com/en-US/kb/thunderbirds-scam-detection#w_thunderbirds-automatic-scam-filtering)

请注意他们将触发网络钓鱼检测的项目列表中的第一个项目符号：`links with numerical server names (http://127.0.0.1/)`

# sql-server - 查询编辑器菜单中不同颜色的条在 SSMS 中是什么意思？

> ID：13055378
> 
> 赞同：9
> 
> 时间：2012-10-24T18:24:41.800
> 
> 标签：sql-server, ssms

这张图片的颜色变化有什么意义？ ![在此处输入图像描述](../Images/b42990821d077ea5b39b489c6804de46.png)

编辑：我指的是滚动条的黄色和绿色区域。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-24T18:26:46.993

```
Blue  - SQL keywords - query specification components
Pink  - Functions
Grey  - SQL predicates
Black - table/column names/aliases 
```

左侧行号旁边的彩色条显示在打开文件后已更改的行旁边：

```
Yellow - Changed lines that have not been saved
Green  - Changed lines have already been saved 
```

# c# - 隐私声明 Windows 8 Charm 设置

> ID：13055381
> 
> 赞同：17
> 
> 时间：2012-10-24T18:25:00.123
> 
> 标签：c#, windows-store-apps

我的 Windows 应用商店应用程序认证失败，测试人员给我的说明是：

> “该应用程序已声明可以访问网络功能，并且 Windows 设置魅力中没有提供隐私声明”。

有人可以给我确切的代码来解决这个问题。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-24T18:36:43.500

在您的基本页面（或单个页面，如果您只想在一个页面上）中，您可以定义如下设置：

```
SettingsPane.GetForCurrentView().CommandsRequested += SettingsCommandsRequested;

private void SettingsCommandsRequested(SettingsPane sender, SettingsPaneCommandsRequestedEventArgs args)
{
    //use "new Guid()" instead of string "privacy" if you're experiencing an exception
    var privacyStatement = new SettingsCommand("privacy", "Privacy Statement", 
            async x => await Launcher.LaunchUriAsync(new Uri("http://some-url.com")));

    args.Request.ApplicationCommands.Clear();
    args.Request.ApplicationCommands.Add(privacyStatement);
} 
```

显然，在这个示例中，我们有指向外部页面的隐私政策链接，但是如果需要，您可以修改代码以在应用程序中打开单独的页面。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T18:30:11.727

看起来您的应用程序中没有包含隐私政策。这是 Windows 商店中的[要求](http://msdn.microsoft.com/en-us/library/windows/apps/hh694083.aspx#acr_4_1)查看此[链接](http://gyorgybalassy.wordpress.com/2012/10/22/your-app-needs-a-privacy-policy-in-the-windows-store/)以获取更多[信息](http://gyorgybalassy.wordpress.com/2012/10/22/your-app-needs-a-privacy-policy-in-the-windows-store/)。

# php - Firefox关闭后如何保留一些cookie？

> ID：13055382
> 
> 赞同：1
> 
> 时间：2012-10-24T18:25:00.367
> 
> 标签：php, firefox, cookies, yii

测试用例：

*火狐 16.0.1*

*MAC OSX 狮子*

以下适用于最新的 Safari、Chrome。不是火狐。

重点是为第一次用户访问显示视频。如果与第一次访问不同，则不显示视频。

因此，在此 Web 应用程序上，我们设置了以下内容：

*在控制器/索引上：*

```
Yii::app()->request->cookies['first'] = new CHttpCookie('first', (isset(Yii::app()->request->cookies['first']) ? Yii::app()->request->cookies['first']->value+1 : 1));
            $cookie = Yii::app()->request->cookies['first'];
                    $cookie->expire = time() + (60*60*24*7);

Yii::app()->session['first'] =  (isset(Yii::app()->session['first']) ? Yii::app()->session['first']+1 : 1); 
```

*在 main.php 上：*

```
 'session'=>array(
  'timeout'=>604800
 ), 
```

但是，每次我们关闭 firefox 并重新打开它时，它都会重置 cookie 和会话值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:31:03.567

你的会话是一个cookie。当浏览器关闭时，“会话 cookie”会过期（无论您设置的服务器端超时，因为这发生在客户端）。

设置适当的到期日期时的 request->cookies 应该没问题。但是，如果客户端浏览器设置为隐私模式，这些也会被删除。

**编辑**看起来你从来没有真正设置过过期日期的cookie。我的 PHP 有点生疏，但以下应该是正确的。

```
// get the cookie value if it exists
$oldVal = isset(Yii::app()->request->cookies['first']) ? Yii::app()->request->cookies['first']->value : 0;
// set the cookie
$cookie = new CHttpCookie('first', $value);
$cookie->expire = time()+60*60*24*180; 
Yii::app()->request->cookies['first'] = $cookie;
// other page logic
if($oldVal == 0) {
    // show the video
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T19:00:59.693

可能是`Yii`某个地方的问题。尝试`setcookie()`确保它不是浏览器问题。

既然你在做..

`Yii::app()->request->cookies['first'] = new CHttpCookie(....`

看起来就像您正在将现有 cookie 设置为新 cookie。

```
if (!isset(Yii::app()->request->cookies['first'])) {

     $cookie = new CHttpCookie('first', 1);
     $cookie->expire = time() + (60*60*24*7);

} 
```

# web-services - 在 Visual Studio 2010 中定义 SOAP Web 服务的传出/调用端口

> ID：13055386
> 
> 赞同：0
> 
> 时间：2012-10-24T18:25:24.733
> 
> 标签：web-services, soap, asmx, ports

我目前正在处理的应用程序应用程序需要使用 SOAP 与 Web 服务交互。服务提供商希望通过防火墙使用 IP 地址和端口来限制对服务的访问。我正在使用 VS 2010，并且该服务已添加为 .NET 2.0 Web 服务。

现在，我的连接端口的防火墙规则设置为“ANY”，服务团队希望将其收紧到特定端口。我似乎找不到任何方法来在我的服务中设置特定的传出端口（退出我的 Web 服务器时使用的端口）。

甚至有可能做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T19:05:52.733

可以做到这一点，但这是一个重要的定制。

1.  有关一般技术，请参阅[自定义 ASMX 客户端代理](http://johnwsaunders3.wordpress.com/2008/06/05/ways-to-customize-your-asmx-client-proxy/)的方法。在底部附近，您会找到“重型定制”。
2.  通过覆盖该`GetWebRequest`方法，您可以获得`HttpWebRequest`对请求正在使用的实例的访问权限。
3.  `HttpWebRequest`有财产[`ServicePoint`](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.servicepoint%28v=vs.80%29.aspx)。
4.  `ServicePoint`有一个[BindIPEndPointDelegate](http://msdn.microsoft.com/en-US/library/system.net.servicepoint.bindipendpointdelegate%28v=vs.80%29.aspx)属性。
5.  将此属性设置为指向将决定使用哪个 IP 地址和端口的方法。

# java - 在 Glassfish 中将 Gemini 蓝图部署到 Felix

> ID：13055388
> 
> 赞同：0
> 
> 时间：2012-10-24T18:25:30.073
> 
> 标签：java, jakarta-ee, glassfish, osgi, apache-felix

我有一个使用 Spring 并在 Glassfish 3.1.2 中运行的 Java Web 应用程序，我正在尝试将其转换为 OSGi 架构。

我首先下载 Gemini 蓝图并将 jar 复制到`autodeploy/bundle`Glassfish 中的目录，此时我收到了很多关于缺少要求的错误，如下所示：

```
[#|2012-10-24T12:58:07.176 0500|INFO|glassfish3.1.2|javax.enterprise.system.std.com.sun.enterprise.server.logging|_Thread
ID=18;_ThreadName=Thread-5;|org.osgi.framework.BundleException: 
Unresolved constraint in bundle org.eclipse.gemini.blueprint.core [258]: 
Unable to resolve 258.1: missing requirement [258.1] osgi.wiring.package; (&(osgi.wiring.package=org.aopalliance.aop)(version>=0.0.0)) 
```

`org.apache.commons.logging`以及其他类似的错误。

我已经阅读了很多关于 OSGi 和 Glassfish 的内容，但我找不到任何为 Glassfish 创建 OSGi spring 应用程序的示例，所以我想我可能做错了什么。

任何人都知道我所做的是否正确，如果正确，如何解决这些问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:32:45.663

看来您正试图在 glassfish 中运行 osgi 容器。如果是这样，您必须使用或编写一种 osgi 引导程序来启动 osgi 容器。它应该使用必要的 bundle 启动 osgi 容器，这是 osgi 容器为下一个要部署的 bundle 做好准备的最小设置。

更新的答案：根据错误消息，您的 Gemini 捆绑包似乎需要容器中尚不可用的捆绑包。您需要弄清楚它从其他包中导入的包/类是什么，并在部署 Gemini 之前安装和启动它们。您可以通过检查 Gemini bundle 的清单来做到这一点

# c# - 使用 Linq 从列表中获取所有匹配值的索引

> ID：13055391
> 
> 赞同：37
> 
> 时间：2012-10-24T18:25:34.873
> 
> 标签：c#, .net, vb.net, linq

嘿，那里的 Linq 专家，

我刚刚问了一个非常相似的问题，并且知道解决方案可能非常简单，但仍然发现自己无法理解如何使用 linq 以最有效的方式完成这个相当简单的任务。

我的基本情况是我有一个值列表，例如，说：

```
Lst1:
a
a
b
b
c
b
a
c
a 
```

我想创建一个新列表，它将保存 Lst1 中的所有索引，例如 value = "a"。所以，在这个例子中，我们会有：

```
LstIndexes:
0
1
6
8 
```

现在，我知道我可以使用 Loops 来做到这一点（我宁愿避免使用 Linq），我什至想出了如何通过以下方式使用 Linq 来做到这一点：

```
LstIndexes= Lst1.Select(Function(item As String, index As Integer) index) _
                .Where(Function(index As Integer) Lst1(index) = "a").ToList 
```

我对此的挑战是它迭代列表两次，因此效率低下。

如何使用 Linq 以最有效的方式获得结果？

谢谢！！！！

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-10-24T18:31:35.903

首先，您的代码实际上并没有迭代列表两次，它只迭代一次。

也就是说，您`Select`实际上只是获得了所有索引的序列；这更容易完成`Enumerable.Range`：

```
var result = Enumerable.Range(0, lst1.Count)
             .Where(i => lst1[i] == "a")
             .ToList(); 
```

理解为什么列表实际上没有迭代两次需要一些时间来适应。我将尝试给出一个基本的解释。

您应该将大多数 LINQ 方法（例如 Select 和 Where）视为管道。每种方法都做了一些微小的工作。在`Select`你给它一个方法的情况下，它基本上说，“每当有人问我下一个项目时，我会首先向我的输入序列询问一个项目，然后使用我必须将其转换为其他东西的方法，并且然后把那个东西交给任何使用我的人。” `Where`，或多或少是在说，“每当有人向我要一个项目时，我都会向我的输入序列询问一个项目，如果函数说它很好，我会传递它，如果不是，我会一直要求项目直到我得到一个通过的。”

因此，当您将它们链接起来时，发生的情况是`ToList`要求第一项，然后转到`Where`to 作为它的第一项，`Where`转到`Select`并要求它的第一项，`Select`转到列表以要求它的第一项。然后列表提供它的第一项。 `Select`然后将该项目转换为它需要吐出的内容（在这种情况下，只是 int 0）并将其提供给`Where`. `Where`获取该项目并运行它的函数，该函数确定它是真的，因此吐出`0`到`ToList`，它将它添加到列表中。然后整个事情又发生了9次。这意味着`Select`最终将只要求列表中的每个项目一次，并将其每个结果直接提供给`Where`，它将“通过测试”的结果直接提供给 ToList，后者将它们存储在一个列表中。所有 LINQ 方法都经过精心设计，只对源序列进行一次迭代（当它们被迭代一次时）。

请注意，虽然这对您来说一开始看起来很复杂，但计算机实际上很容易完成所有这些工作。它实际上并不像最初看起来那样密集。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-24T19:14:30.273

这行得通，但可以说没有那么整洁。

```
var result = list1.Select((x, i) => new {x, i})
                  .Where(x => x.x == "a")
                  .Select(x => x.i); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T18:47:15.853

这个怎么样，对我来说效果很好。

```
 static void Main(string[] args)
    {
        List<char> Lst1 = new List<char>();
        Lst1.Add('a'); 
        Lst1.Add('a');   
        Lst1.Add('b');   
        Lst1.Add('b');   
        Lst1.Add('c');   
        Lst1.Add('b');   
        Lst1.Add('a');   
        Lst1.Add('c');
        Lst1.Add('a');

        var result = Lst1.Select((c, i) => new { character = c, index = i })
                         .Where(list => list.character == 'a')
                         .ToList();
    } 
```

# vba - 为多个用户和文件设置从 Excel 到 Access 的 VBA ADO 连接的正确方法是什么？

> ID：13055393
> 
> 赞同：0
> 
> 时间：2012-10-24T18:25:39.473
> 
> 标签：vba, ms-access, excel, ado

我有几个用于输入数据的 excel 文件。文件在功能上是相同的，我们每个服务中心都有一个。在表单中有一个按钮可以启动一个宏，该宏将数据转换为另一张表上的表格格式，然后上传到 Access db。

在我自己的电脑上一切正常。添加新行、更新现有行和删除现有角色。我使用了早期绑定，当我将文件移动到我们的网络驱动器时会导致问题。我设法将文件转换为后期绑定，但随后出现了其他问题。

大多数情况下，上传到 Access 不起作用，尤其是当多个用户尝试同时做一些事情时。最常见的错误代码是我没有使用可更新查询或者此方法不支持向后滚动。很抱歉没有报告实际的错误代码，但我目前无法复制它们。

我的连接代码如下，它是来自不同示例的复制粘贴代码的混合。

打开连接和其他prestuff

```
Sub excel2access()

Const adUseClient = 3  
Const adUseServer = 2
Const adLockOptimistic = 3
Const adOpenKeyset = 1
Const adOpenDynamic = 2

Dim oConn As Object
Dim cmd As Object
Dim rs As Object
Dim r As Long
Dim criteria As String
Dim Rng As Range

Set oConn = CreateObject("ADODB.Connection")
Set cmd = CreateObject("ADODB.Command")

oConn.Open "Provider=Microsoft.ACE.OLEDB.12.0;" & _
        "Data Source= '" & Range("dbpath").Value & "\" & Range("dbfile").Value & "' ;"

Set rs = CreateObject("ADODB.Recordset")
rs.CursorLocation = adUseClient
rs.CursorType = adOpenStatic
rs.LockType = adLockOptimistic
rs.Open "Select * from need_rows WHERE service_center = '" & Range("scenter_name").Value & "'", oConn

r = 2 ' the start row in the worksheet

Sheets("data").Select 
```

以下位查看 excel 表中的数据，并尝试从为该服务中心找到的记录集中查找匹配项。如果未找到匹配，则创建新记录，如果找到匹配，则更新旧记录。

```
Do While Len(Range("A" & r).Formula) > 0
    With rs
        criteria = Range("D" & r).Value
        .Find "identifier='" & criteria & "'"
        If (.EOF = True) Or (.BOF = True) Then
            .AddNew ' create a new record
            .Fields("service_center") = Range("scenter_name").Value
            .Fields("product_id") = Range("A" & r).Value
            .Fields("quantity") = Range("B" & r).Value
            .Fields("use_date") = Range("C" & r).Value
            .Fields("identifier") = Range("D" & r).Value
            .Fields("file_type") = Range("file_type").Value
            .Fields("use_type") = Range("E" & r).Value
            .Fields("updated_at") = Now
            .Update             
        Else
            If .Fields("quantity") <> Range("B" & r).Value Then
                .Fields("quantity") = Range("B" & r).Value
                .Fields("updated_at") = Now
                .Update ' stores the new record
            End If                      
        End If
        .MoveFirst 
    End With
    r = r + 1 
Loop

rs.Close
Set rs = Nothing
Set oConn = Nothing

MsgBox "Confirmation message"
End Sub 
```

*编辑：基于 barrowc 的链接，我将光标类型更改为 adOpenStatic。我对几个尝试同时上传数据的用户进行了测试，一切正常。直到一个用户留在文件中并在那里花了很长时间编辑数据，然后尝试将数据上传到数据库并收到以下错误消息：* [https ://dl.dropbox.com/u/3815482/vba_error.jpg](https://dl.dropbox.com/u/3815482/vba_error.jpg)

*再次，我回到了我开始的地方。*

此外，我也愿意接受对我的代码的一般反馈。

我正在使用 Office 2010。

我做错了吗？感谢所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:13:11.087

在我看来，Jet 对于您的环境来说不够可靠。我经常使用 SQL Server / Access Data Projects 将来自多个电子表格的信息整合到一个数据库后端，当您添加六个用户时，它不会出错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-10T03:35:33.980

数据库被其他用户锁定会遇到很多问题。这有几个原因：

*   从我可以看到你没有处理错误。因此，如果您的脚本在连接中途出错，连接将保持打开状态，从而导致锁定问题。
*   看起来，宏可能会在相当长的时间内保持连接打开（假设没有错误）。

在创建了许多连接到 MS Access 数据库的宏之后，我可以直接告诉你。您将遇到很多连接问题，其中数据库被电子表格锁定，由于未处理意外错误（连接永远不会关闭）等原因，有人整天/晚上都保持打开状态。

即使您解决了问题，您只需要一个人使用旧代码的电子表格，他们将继续锁定数据库。

一个大问题是，如果有人在数据库已经被其他人打开时连接到数据库，我相信他们会继承已经打开的数据库的连接类型，从而导致写锁的菊花链。然后，您需要确保所有连接都被切断才能重置连接。

您也没有首先向我们展示如何将数据放入电子表格中。也许您没有正确关闭连接，这可能是有时数据库被锁定的原因。

您可以尝试许多不同的方法来解决此问题：

*   最简单的方法是使用 MS Access Front End + MS Access Back End。
*   无需按下此按钮并通过连接字符串上传数据，您可以使其将文件保存在文件夹中，然后由坐在那里观察文件夹的 ms 访问数据库处理该文件夹。这意味着您上传的脚本将在 MS Access 中编写，并且只是在处理文件。不会像您当前的方法那样即时，但在这种情况下，所有写入连接都将来自同一台机器/用户。
*   坚持当前的方法：最终您可能会使其进入稳定状态，但这会带来很多挫折和努力，因为确定锁定的原因可能并不总是那么容易。您至少可以查看当时谁锁定了文件并从那里开始工作，但如前所述，他们可能不是锁定的原因。他们可能刚刚继承了锁类型。

就我个人而言，我喜欢使用 MS Excel 为用户显示 MS Access 数据，但避免像瘟疫一样让它更新 MS Access。但是，如果我要这样做，我会通过使用不打开记录集的 oConn.Execute 命令来进行，比较并减慢推送，因为这会使连接保持打开太久。

对不起，文字墙。希望这些信息有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-11T15:48:17.637

您也可以尝试使用操作查询。首先我会尝试使用更新（您可能需要格式化现在的值）

```
dim count as long
oConn.Execute "UPDATE need_rows SET quantity = " & Range("B" & r).Value & ", updated_at = #" & Now & "# WHERE service_center = '" & Range("scenter_name").Value & "' AND identifier='" & Range("D" & r).Value & "' AND quantity <> " & Range("B" & r).Value", count 
```

如果计数为零，则没有更新任何行，因此要么没有要更新的行，要么数量没有改变。无论哪种方式，我们都可以尝试插入，在后一种情况下会失败，但不会引起问题。

```
if count = 0 then
    count = oConn.Execute "INSERT ...", count
    if count = 0 then
        ' quantity has not changed, so nothing to do
    else
        ' new record inserted
    end if
else
    ' record updated
end if 
```

# android - 防止每次在自定义对话框上膨胀

> ID：13055396
> 
> 赞同：0
> 
> 时间：2012-10-24T18:25:52.817
> 
> 标签：android

我已经对此进行了搜索和搜索，但不幸的是，我没有找到任何有用的信息来说明如何在自定义对话框中重用以前膨胀的视图。

这是我尝试过的（没有一个有效）

**方法一：**

将我的 alertdialog 构建器保持为全局并在其中`onCreate()`执行我需要的操作：

```
private AlertDialog.Builder dialog;

public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        dialog = new AlertDialog.Builder(this);
        detailView = getLayoutInflater().inflate(R.layout.detail, null);
        TextView textview1 = (TextView)detailView.findViewById(R.id.lblName);
        TextView textview2 = (TextView)detailView.findViewById(R.id.lblSubtitle);

        textview1.setText("Test1");
        textview2.setText("Test2");
        dialog.setView(detailView);
        dialog.create();

    btnSearch = (ImageView)findViewById(R.id.btnSearch);
    btnSearch.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            dialog.show();
        }
    });
    } 
```

然后在我需要的时候显示它：`dialog.show();`

没用，LogCat 输出：

```
Uncaught handler: thread main exiting due to uncaught exception
java.lang.IllegalStateException: The specified child already has a parent. 
You must call removeView() on the child's parent first. 
```

**方法二：**

`onCreate()`只需膨胀布局并在点击事件中：

```
dialog = new AlertDialog.Builder(this);
    TextView textview1 = (TextView)detailView.findViewById(R.id.lblName);
    TextView textview2 = (TextView)detailView.findViewById(R.id.lblSubtitle);
    textview1.setText("Test1");
    textview2.setText("Test2");
    dialog.setView(detailView);
    dialog.create(); 
```

但是它崩溃了，给出了相同的错误输出。

当然我已经阅读了输出并试图找到父级，所以我猜父级将是对话框本身，但它没有任何删除视图的方法，所以我真的不知道该怎么做。

还有一种方法可以重用 textview 引用吗？

（我知道它的编码很糟糕，只是想让它工作，我会对其进行适当的重构。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:33:16.503

当您取消或关闭 Dialog 时，您需要移除膨胀的视图。以下代码执行此操作：

```
dialog.setOnDismissListener(new OnDismissListener() {
  @Override
  public void onDismiss(DialogInterface dialog) {
    try{
      ((FrameLayout)detailView.getParent()).removeView(detailView);
    }catch(Exception e){
      //todo handle the case detailView doesn't have a parent
    }
  }
}); 
```

然后你可以将你的 detailView 重新添加到一个新的 Dialog 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T18:48:51.863

已经解决了：

问题如下：

我试图展示一个`AlertDialog.Builder`not an `AlertDialog`。我不知道当我将它声明为时我在想什么`dialog`。

我刚刚声明了一个 AlertDialog 并分配了结果，`builder.create()`现在它按预期工作，只膨胀一次。

非常感谢你们，特别是@Laurence Dawson，他的回答让我意识到我的代码是错误的。

# java - 节点列表的理解

> ID：13055401
> 
> 赞同：1
> 
> 时间：2012-10-24T18:26:26.573
> 
> 标签：java, nodes

我在尝试理解基本节点列表的代码时遇到问题。节点（ListNode 类）包含三个变量；一个字符串“键”，一个值“值”，然后是另一个节点“下一个”。到现在为止还挺好。然而，在名为 ListMap 的类中，我们有 put() 方法，我很难理解：

```
public void put(String key, int value) {
    ListNode l = search(key, head);
    if ( l==null ) {
        head = new ListNode(key, value, head);
    } else {
        l.value = value;
    }

protected static ListNode search(String key, ListNode l) {
    if (l==null) {
        return null;
    } else if (key.equals(l.key)) {
        return l;
    } else {
        return search(key, l.next);
    }
} 
```

该方法搜索字符串“key”，如果列表中有一个，则将其值替换为作为第二个参数给出的新值。
我无法理解的是这个变量 l，它被分配了与第一个参数共享相同“键”或字符串的节点。
当 l.value 设置为 value 时，为什么这会影响列表？
变量 l 不只是列表中一个节点的副本，而不是实际节点吗？
对于这样一个令人困惑的问题，我提前道歉，但我希望你们中的一个人能理解它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T18:30:04.860

> 变量 l 不只是列表中一个节点的副本，而不是实际节点吗？

不，它是对节点的引用（如 C 语言中的指针）。您可以对同一个对象有多个引用，并且当通过不同的引用访问同一个对象时，通过一个引用对该对象所做的更改当然是可见的。这就像别名。

这是一个简化的示例：

```
class ListNode {
    int value;
}

ListNode first = new ListNode();
ListNode second = first;
first.value = 42;
System.out.println(second.value);  //42 
```

# xml - 常规文本文件中的 Base 64 解码

> ID：13055411
> 
> 赞同：-1
> 
> 时间：2012-10-24T18:26:56.407
> 
> 标签：xml, regex, perl, base64, mime

我有一个大文本文件，其中包含我正在解析的常规文本，但是其中有一些部分包含 base64 编码文本块。我需要对此文本进行解码，以便我的解析器可以读取它。我尝试在我的脚本中使用 base64 解码器，但是当我在 base64 文本周围有常规文本时它不起作用。有人对我如何撕掉这些部分并解码它们有想法吗？文本文件很长，将有几个这样的 base64 段。块周围的唯一匹配是“X-Attachement-ID：xxx”，空行，然后是块，以及后面的行上的“--xxx--”。

我正在使用 Perl 脚本来解析和读取 .txt 文件。

下面发布了文本文件的示例剪切。

```
Content-Type: text/xml; charset=US-ASCII; name="1415160277.xml"
Content-Disposition: attachment; filename="1415160277.xml"
Content-Transfer-Encoding: base64
X-Attachment-Id: f_h8oq2dh20

PD94bWwgdmVyc2lvbj0iMS4wImVuY29kaW5nPSJVVEYtOCI/Pg0KPEluZnJpbmdlbWVudCB4c2k6
c2NoZW1hTG9jYXRpb249Imh0dHA6Ly93d3cudGVzdC5jb20vQUNOUyBodHRwOi8vd3d3LnRlc3Qu
Y29tIiB4bWxucz0iaHR0cDovL3d3dy50ZXN0LmNvbS9BQ05TIiB4bWxuczp4c2k9Imh0dHA6Ly93
d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hLWluc3RhbmNlIj48Q2FzZT48SUQ+MTQxNTE2MDI3Nzwv
SUQ+PFN0YXR1cz5PcGVuPC9TdGF0dXM+PFNldmVyaXR5Pk5vcm1hbDwvU2V2ZXJpdHk+PC9DYXNl
PjxDb21wbGFpbmFudD48RW50aXR5PnRlc3Q8L0VudGl0eT48Q29udGFjdD50ZXN0IENvcHlyaWdo
dCBJbmZyaW5nZW1lbnQ8L0NvbnRhY3Q+PEFkZHJlc3M+PC9BZGRyZXNzPjxQaG9uZT48L1Bob25l
PjxFbWFpbD50ZXN0QHRlc3QuY29tPC9FbWFpbD48L0NvbXBsYWluYW50PjxTZXJ2aWNlX1Byb3Zp
ZGVyPjxFbnRpdHk+dGVzdDwvRW50aXR5PjxDb250YWN0PnRlc3Q8L0NvbnRhY3Q+PEFkZHJlc3M+
dGVzdA0KPC9BZGRyZXNzPjxQaG9uZT50ZXN0PC9QaG9uZT48RW1haWw+PC9FbWFpbD48L1NlcnZp
Y2VfUHJvdmlkZXI+PFNvdXJjZT48VGltZVN0YW1wPnRlc3Q8L1RpbWVTdGFtcD48SVBfQWRkcmVz
cz50ZXN0PC9JUF9BZGRyZXNzPjxUeXBlPkJpdFRvcnJlbnQ8L1R5cGU+PFVzZXJOYW1lPjwvVXNl
ck5hbWU+PE51bWJlcl9GaWxlcz4xPC9OdW1iZXJfRmlsZXM+PC9Tb3VyY2U+PENvbnRlbnQ+PEl0
ZW0+PFRpdGxlPnRlc3Q8L1RpdGxlPjxJbmZvSGFzaD50ZXN0PC9JbmZvSGFzaD48L0l0ZW0+PC9D
b250ZW50PjxIaXN0b3J5Lz4
--047d7b5d9603ea951104ccd17c87--',
            \'MIME-Version: 1.0
Received: by --- with HTTP; Wed, 24 Oct 2012 10:38:10 -0700 (PDT)
Date: Wed, 24 Oct 2012 10:38:10 -0700 
```

base64块的解码是：

```
<?xml version="1.0"encoding="UTF-8"?>
<Infringement xsi:schemaLocation="http://www.test.com/ACNS http://www.test.com"     xmlns="http://www.test.com/ACNS" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><Case><ID>1415160277</ID><Status>Open</Status><Severity>Normal</Severity></Case><Complainant><Entity>test</Entity><Contact>test Copyright Infringement</Contact><Address></Address><Phone></Phone><Email>test@test.com</Email></Complainant><Service_Provider><Entity>test</Entity><Contact>test</Contact><Address>test
</Address><Phone>test</Phone><Email></Email></Service_Provider><Source><TimeStamp>test</TimeStamp><IP_Address>test</IP_Address><Type>BitTorrent</Type><UserName></UserName><Number_Files>1</Number_Files></Source><Content><Item><Title>test</Title><InfoHash>test</InfoHash></Item></Content><History/><Notes/></Infringement> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T18:38:20.727

我建议您使用诸如[Email::MIME](http://search.cpan.org/perldoc?Email::MIME)之类的模块来解析您的电子邮件。它将自动解析和解码您的附件。

# c++ - 使用 Visual C++ 在“Windows 窗体应用程序”中设置像素值

> ID：13055415
> 
> 赞同：0
> 
> 时间：2012-10-24T18:27:13.600
> 
> 标签：c++, visual-studio-2010, visual-c++

我正在为我的计算机科学课制作一个图形引擎。我选择使用 C++（我以前从未使用过）。我使用 Visual Studio 2010 作为我的 IDE，我喜欢将“windows 窗体应用程序”作为 gui 控制器的想法，但我如何告诉我的窗口 VS 为我创建的特定颜色像素应该是什么颜色？

或者更好的是，我可以用它做 2D 图形了吗？比如画线或

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T19:18:25.167

当然可以，使用 C++，您可以使用 GDI+ (GDIPlus) 绘制任何东西。 [http://msdn.microsoft.com/en-us/library/windows/desktop/ms533802%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms533802%28v=vs.85%29.aspx)

# php - 字符和任何数字之间的预匹配

> ID：13055417
> 
> 赞同：1
> 
> 时间：2012-10-24T18:27:21.237
> 
> 标签：php, preg-match

我一直在写一个 preg_match

我有一个字符串：

```
XPMG_ar121023.txt 
```

并且需要提取`XPMG_`和第一个数字之间的 2 个字母 - 无论是 0-9

```
$str = 'XPMG_ar121023.txt';
preg_match('/('XPMG_')|[0-9\,]))/', $str, $match);
print_r($match); 
```

也许这不是最好的选择：我的角色将永远是

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T18:30:53.333

你可以做

```
$str = "XPMG_ar121023.txt" ;
preg_match('/_([a-z]+)/i', $str, $match);
var_dump($match[1]); 
```

输出

```
string 'ar' (length=2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T18:30:34.293

这对于正则表达式来说太简单了。只会得到你`$match = substr($str,5,3)`想要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T18:50:27.620

让我一步一步地走一遍，以便帮助您将来解决类似的问题。假设我们的文件名具有以下格式：

```
XPMG_ar121023.txt 
```

我们知道我们想要捕获什么，我们想要在 _ 之后和数字开始之前的“ar”。所以我们的表达式看起来像这样：

```
_[a-z]+ 
```

这很简单。我们首先查找下划线，然后是 a 和 z 之间的任意数量的字母。方括号定义了一个字符类。我们的课程由字母组成，但如果您愿意，您可以在其中输入特定的数字等等。

现在因为我们只想捕获字母，所以我们需要在模式的那部分加上括号：

```
_([a-z]+) 
```

结果，我们现在只能访问该子模式。接下来，我们将定界符放在适当的位置以指定我们的模式开始和结束的位置：

```
/_([a-z]+)/ 
```

最后，在结束分隔符之后，我们可以添加一些修饰符。正如它所写的，我们的模式只寻找小写字母。我们可以添加`i`修饰符以使其不区分大小写：

```
/_([a-z]+)/i 
```

瞧，我们完成了。现在我们可以把它传入`preg_match`看看它吐出什么：

```
preg_match( "/_([a-z]+)/i", "XPMG_ar121023.txt", $match ); 
```

此函数将模式作为第一个参数，将匹配它的字符串作为第二个参数，最后是一个将结果吐入的变量。当一切都说完了，我们就可以检查`$match`我们的数据了。

此操作的结果如下：

```
array(2) { 
    [0]=> string(3) "_ar" 
    [1]=> string(2) "ar" 
} 
```

这是 的内容`$match`。请注意，我们的完整模式在数组的第一个索引中找到，我们捕获的部分在数组的第二个索引中提供。

```
echo $match[1]; // ar 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T18:31:03.343

好吧，为什么不：

```
$letters = $str[5].$str[6]; 
```

:) 毕竟，您总是需要固定前缀后的 2 个字符，有很多方法不需要`substr()`正则表达式（无论如何都是最好的）

# java - Java Swing 颜色选择器抛出错误

> ID：13055420
> 
> 赞同：2
> 
> 时间：2012-10-24T18:27:27.163
> 
> 标签：java, swing, colors

因此，我正在尝试实现一个颜色选择器，然后该颜色选择器将采用该颜色并将其传递给另一个要使用的类，但它抛出了错误

> “线程“AWT-EventQueue-0”中的异常 java.lang.ClassCastException：javax.swing.colorchooser.DefaultColorSelectionModel 无法转换为 javax.swing.JColorChooser”

每次我点击一种颜色。

我正在使用的代码是：

对于实际`JColorChooser`：

```
JColorChooser RGB = new JColorChooser(Color.GREEN);
RGB.getSelectionModel().addChangeListener(this);
RGB.setAlignmentX(newPolyButton.LEFT_ALIGNMENT);
RGB.setMinimumSize(new Dimension(50, 25));
RGB.setPreferredSize(new Dimension(125, 25)); 
```

对于听众：

```
public void stateChanged(ChangeEvent c) {
JColorChooser RGB = (JColorChooser)c.getSource();
Color poly = RGB.getColor();
imagePanel.setColor(poly);
} 
```

在另一堂课中`imagePanel`，我使用：

```
public void setColor(Color poly) {
ImagePanel.poly = poly;
} 
```

谁能看到我要去哪里？我以前使用组合框，其中包含一些手动输入的颜色可供选择。

非常感谢任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T18:33:21.467

在您的`stateChanged`方法中，`c.getSource()`返回 a`DefaultColorSelectionModel`而不是对您的`JColorChooser`.

但是，`JColorChooser`通常用于打开一个颜色对话框，该对话框在使用按钮`Color`关闭时返回一个。`OK`

```
Color color = JColorChooser.showDialog(parent, title, initialColor);
if (color != null) {
  // do something with the chosen color
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T18:38:06.087

从你的代码

```
RGB.getSelectionModel().addChangeListener(this);
RGB.setAlignmentX(newPolyButton.LEFT_ALIGNMENT); 
```

您正在将 ChangeListener 添加到 RGB 实例的选择模式中。

`javax.swing.JColorChooser.getSelectionModel()`将返回`DefaultColorSelectionModel`.

因此，您会在 call 中获得 ClassCastException `(JColorChooser)c.getSource();`。

**更新**

从[如何使用颜色选择器 Java 教程](http://docs.oracle.com/javase/tutorial/uiswing/components/colorchooser.html)：

```
tcc.getSelectionModel().addChangeListener(this);
. . .
public void stateChanged(ChangeEvent e) {
    Color newColor = tcc.getColor();
    banner.setForeground(newColor);
} 
```

当状态发生变化时，您将希望获取新颜色作为颜色选择器的属性，而不是尝试获取 ChangeEvent 的 Source 并进行转换。

希望这可以帮助！

# python - QTableView中的虚拟列？

> ID：13055423
> 
> 赞同：7
> 
> 时间：2012-10-24T18:27:36.453
> 
> 标签：python, qt, pyqt, pyside

我开始学习 Qt4 模型/视图编程并且我有初学者问题。

我有一个简单的应用程序，它在以下位置显示 sqlite 表`QTableView`：

```
class Model(QtSql.QSqlTableModel):
    def __init__(self, parent=None):
        super(Model, self).__init__(parent)
        self.setEditStrategy(QtSql.QSqlTableModel.OnFieldChange)

        self.setTable("test")
        self.select()

class App(QtGui.QMainWindow):
    def __init__(self, model):
        QtGui.QMainWindow.__init__(self)

        self.ui = Ui_MainWindow()
        self.ui.setupUi(self)

        self.ui.tableView.setModel(model)

if __name__ == "__main__":
    myDb = QtSql.QSqlDatabase.addDatabase("QSQLITE")
    myDb.setDatabaseName("test.db")

    if not myDb.open():
        print 'FIXME'

    model = Model()

    app = QtGui.QApplication(sys.argv)
    window = App(model)
    window.show()
    sys.exit(app.exec_()) 
```

数据库如下所示：

```
sqlite> create table test (a INTEGER, b INTEGER, c STRING);
sqlite> insert into test VALUES(1, 2, "xxx");
sqlite> insert into test VALUES(6, 7, "yyy"); 
```

所以我得到类似的东西：

```
+---+---+-----+
| a | b |  c  |
+---+---+-----+
| 1 | 2 | xxx |
+---+---+-----+
| 6 | 7 | yyy |
+---+---+-----+ 
```

是否可以修改`Model`为具有`QTableView`虚拟列之类的内容？例如：

```
+---+---+-----+-----+
| a | b | sum |  c  |
+---+---+-----+-----+
| 1 | 2 |  3  | xxx |
+---+---+-----+-----+
| 6 | 7 | 13  | yyy |
+---+---+-----+-----+ 
```

或者也许我应该以其他方式做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T14:07:52.663

是的，你可以这么做。尽管[@BrtH 的回答](https://stackoverflow.com/a/13057010/843822)是相关的，但模型很棘手，很容易迷路。所以我认为一个更恰当的例子会更好。

就个人而言，我会使用从`QAbstractProxyModel`. 但是，在您的情况下，重新实现`QSqlTableModel`也是可行的。以下是您的目标的实现。请注意，您必须了解[模型/视图方法](http://doc.qt.digia.com/qt/model-view-programming.html)的基础知识，以便了解每种方法的作用。

```
class Model(QtSql.QSqlTableModel):
    def __init__(self, parent=None):
        super(Model, self).__init__(parent)
        self.setEditStrategy(QtSql.QSqlTableModel.OnFieldChange)

        self.setTable("test")
        self.select()

    def columnCount(self, parent=QtCore.QModelIndex()):
        # this is probably obvious
        # since we are adding a virtual column, we need one more column
        return super(Model, self).columnCount()+1

    def data(self, index, role=QtCore.Qt.DisplayRole):
        if role == QtCore.Qt.DisplayRole and index.column()==2:
            # 2nd column is our virtual column.
            # if we are there, we need to calculate and return the value
            # we take the first two columns, get the data, turn it to integer and sum them
            # [0] at the end is necessary because pyqt returns value and a bool
            # http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qvariant.html#toInt
            return sum(self.data(self.index(index.row(), i)).toInt()[0] for i in range(2))
        if index.column() > 2:
            # if we are past 2nd column, we need to shift it to left by one
            # to get the real value
            index = self.index(index.row(), index.column()-1)
        # get the value from base implementation
        return super(Model, self).data(index, role)

    def headerData(self, section, orientation, role=QtCore.Qt.DisplayRole):
        # this is similar to `data`
        if section==2 and orientation==QtCore.Qt.Horizontal and role==QtCore.Qt.DisplayRole:
            return 'Sum'
        if section > 2 and orientation==QtCore.Qt.Horizontal:
            section -= 1
        return super(Model, self).headerData(section, orientation, role)

    def flags(self, index):
        # since 2nd column is virtual, it doesn't make sense for it to be Editable
        # other columns can be Editable (default for QSqlTableModel)
        if index.column()==2:
            return QtCore.Qt.ItemIsSelectable | QtCore.Qt.ItemIsEnabled
        return QtCore.Qt.ItemIsSelectable | QtCore.Qt.ItemIsEnabled | QtCore.Qt.ItemIsEditable

    def setData(self, index, data, role):
        # similar to data.
        # we need to be careful when setting data (after edit)
        # if column is after 2, it is actually the column before that
        if index.column() > 2:
            index = self.index(index.row(), index.column()-1)
        return super(Model, self).setData(index, data, role) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T20:16:58.247

这当然是可能的。下面是我自己的一些代码示例，针对您的数据进行了修改。

```
import sqlite3

conn = sqlite3.connect('test.db')

class MyTreeModel(QAbstractItemModel):
    def __init__(self, parent=None):
        super(MyTreeModel, self).__init__(parent)

        c = conn.cursor()
        c.execute("SELECT a, b, c FROM 'test'")
        self.items = c.fetchall()

        self.columns = ['a', 'b', 'sum', 'c']

    def columnCount(self, index):
        return len(self.columns)

    def rowCount(self, parent):
        return len(self.items)

    def data(self, index, role=Qt.DisplayRole):
        if index.isValid():
            col= index.column()
            spot = self.items[index.row()]
            if role == Qt.DisplayRole:
                if col == 0 or col == 1:
                    return self.items[index.row()][col]
                elif col == 2:
                    return self.items[index.row()][0] + self.items[index.row()][1]
                elif col == 3:
                    return self.items[index.row()][2]

    def headerData(self, section, orientation, role=Qt.DisplayRole):
        if orientation == Qt.Horizontal and role == Qt.DisplayRole:
            return self.columns[section]

    def index(self, row, col, index):
        if not index.isValid():
            return self.createIndex(row, col)
        else:
            return QModelIndex()

    def parent(self, child):
        return QModelIndex() 
```

这是 QTreeView 的模型，但我认为您可以轻松地调整它。
有关这些方法和模型的更多信息，请参阅[http://srinikom.github.com/pyside-docs/PySide/QtCore/QAbstractItemModel.html](http://srinikom.github.com/pyside-docs/PySide/QtCore/QAbstractItemModel.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T07:43:20.850

你看过[QSqlQueryModel](http://qt-project.org/doc/qt-4.8/qsqlquerymodel.html)吗？它允许显示任何 SQL 查询的结果。您的示例代码：

```
class Model(QtSql.QSqlQueryModel):
    def __init__(self, parent=None):
        super(Model, self).__init__(parent)
        self.setQuery("SELECT a, b, a + b, c FROM test")
        self.setHeaderData(0, QtCore.Qt.Horizontal, "a")
        self.setHeaderData(1, QtCore.Qt.Horizontal, "b")
        self.setHeaderData(2, QtCore.Qt.Horizontal, "sum")
        self.setHeaderData(3, QtCore.Qt.Horizontal, "c") 
```

但请记住：

> 该模型默认为只读。要使其可读写，您必须对其进行子类化并重新实现 setData() 和 flags()。

# linux - 在整个源代码中用另一个语句替换部分语句

> ID：13055424
> 
> 赞同：3
> 
> 时间：2012-10-24T18:27:36.493
> 
> 标签：linux, vim, sed

我正在尝试查找出现“MY_NAME”的整个源代码，并希望将其替换为“YOUR_NAME”。我已经知道它们出现的文件和行号，我想为它们制作一个补丁，以便任何运行补丁的人都可以做同样的事情。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T18:48:41.533

您可以通过控制台进行操作。只需使用*find*定位目标文件，然后您就可以声明要替换为什么句子。例如：

```
find -name '*' | xargs perl -pi -e 's/MY_NAME/YOUR_NAME/g' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T18:48:02.223

执行 sed 命令然后生成补丁可能更容易。

```
sed -e '12s/MY_NAME/YOUR_NAME/g;32s/MY_NAME/YOUR_NAME/g' file > file2 
```

这将在第 12 行和第 32 行将 MY_NAME 替换为 YOUR_NAME，并将输出保存到 file2。

如果有很多更改，您还可以生成一个 sed 脚本：

```
#!/bin/sed -f

12s/MY_NAME/YOUR_NAME/g
32s/MY_NAME/YOUR_NAME/g 
```

然后，要应用于许多文件，您应该使用`find`：

```
find -type f '(' -iname "*.c" -or -iname "*.h" ')' -exec "./script.sed" '{}' \; 
```

希望这会有所帮助=)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T18:41:52.737

使用命令 diff 创建一个补丁文件，然后可以使用补丁命令分发和应用该补丁文件。

`man diff`会给你很多关于这个过程的信息。

# sql-server-2008 - SQL Server 2008 FullTextSearch 结果中缺少名称中的单个字符

> ID：13055425
> 
> 赞同：4
> 
> 时间：2012-10-24T18:27:44.997
> 
> 标签：sql-server-2008, full-text-search

我在 SQL Server 2008 中有一个全文索引列，其中包含以下行：

> W 史密瑟斯、维尔达史密瑟斯、W2 史密瑟斯

当我运行以下查询时，我只返回 Wilda Smithers 和 W2 Smithers。

```
SELECT  FT_TBL.full_name as results
FROM dbo.ft_table AS FT_TBL WITH (NOLOCK) 
INNER JOIN CONTAINSTABLE (ft_table , full_name, '("w*" AND "smither*")',12) AS KEY_TBL 
ON FT_TBL.ft_key_id = KEY_TBL.[KEY]
ORDER BY KEY_TBL.RANK desc 
```

关于如何调整这一点的任何建议，以便 W Smithers 也在我的结果集中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T18:33:16.347

W 可能是一个停用词。尝试将其从停止列表中删除。

检查此链接以了解它是如何完成的：[Configure and Manage Stopwords and Stoplists for Full-Text Search](http://msdn.microsoft.com/en-us/library/ms142551.aspx)

**编辑**

尝试重新创建 FT 索引，但这次根本不指定任何停止列表。

![在此处输入图像描述](../Images/b1b84d2f294aed14c5f5fc1dd51af236.png)

# xhtml - 有些计算机要求下载文件而不是显示 xhtml 页面

> ID：13055427
> 
> 赞同：0
> 
> 时间：2012-10-24T18:28:00.940
> 
> 标签：xhtml

我们的一些工作站在尝试查看我们公司的网站时会要求下载文件而不是显示 xhtml 页面。这发生在 firefox、IE 8、IE 9 和 chrome 上，但并不是每个工作站都发生这种情况。我在网上能找到的关于浏览器提示下载文件而不是显示 xhtml 页面的唯一信息说这是服务器端问题，它发生在每台试图查看页面的计算机上，可能发生也可能不会发生所有浏览器。我的情况有所不同，因为这不会发生在所有计算机上，并且您可以让两台相同的计算机在同一级别的 Windows 更新上运行 IE9，并且它发生在一台而不是另一台上。

网页的文档类型是：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

有什么想法可能导致这种情况吗？

# ruby - 如何遍历数组并搜索子字符串的属性

> ID：13055432
> 
> 赞同：-1
> 
> 时间：2012-10-24T18:28:21.343
> 
> 标签：ruby, search, substring

我需要遍历一个对象数组 Ads 并找到那些属性：name 包含 params[string_search] 的子字符串

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T18:36:58.057

让 ary 成为 Ads 对象的数组。（希望你使用红宝石）

```
ary.find{|obj| !obj.name.match(/#{params[string_search]}/).nil?} 
```

使用“选择”而不是“查找”来选择所有此类对象

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T19:43:30.717

这可能对您有用：

```
ads = Ads.select do |ad|
   ad.respond_to?(:name) && ad.name =~ /#{params[:string_search]}/
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T19:12:58.043

尝试这个：

```
#assumes your array of objects is called 'foo'
foo.select{|o| o.name =~ /#{params[:string_search]}/} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T18:43:07.397

我认为您正在使用 Ruby，因为符号`:name` This 应该让您朝着正确的方向前进，您有一个对象数组并且正在 :name 属性中寻找刺痛的“ool”。

```
a = [{:name => 'no'},{:name => 'pool'}, {:name => 'cool'}]
a.find_all{|elem| elem[:name].index "ool"} 
```

# sql - LIKE 和 NOT LIKE 搜索字母数字数据的区别

> ID：13055435
> 
> 赞同：-3
> 
> 时间：2012-10-24T18:28:46.157
> 
> 标签：sql, sql-server-2008

就结果而言，这两种说法有什么区别？

```
SELECT * FROM DTSEARCHER 
WHERE word LIKE '%[^a-zA-Z0-9]%'

SELECT * FROM DTSEARCHER 
WHERE word not LIKE '%[^a-zA-Z0-9]%' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T18:30:53.267

在第一个中，你会得到任何匹配的东西

在第二个中，您将得到其余的。

# c# - 上传前显示从 FileUpload 中选择的图像

> ID：13055445
> 
> 赞同：0
> 
> 时间：2012-10-24T18:29:34.247
> 
> 标签：c#, asp.net, file-upload

我正在使用控件 FileUpload 来选择图像并上传，但现在我想在保存图像之前显示所选图像的预览，只是为了给用户一个所选图像的输出。

我用谷歌搜索但找不到答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:54:45.530

问题是您必须将图像上传到您的服务器才能显示（服务）它。我做了一些搜索，发现了这个问题：[如何在网页中显示本地图片？](https://stackoverflow.com/questions/4908171/how-to-show-local-picture-in-web-page)- 我在想，如果你有图像的本地路径，为什么不使用一些 ajax 在简单的 img 标签中弹出 url。

但是，出于安全考虑，您甚至无法再链接到本地​​图像。因此，要让您的应用程序显示图像的预览，您必须首先让图像显示它，并且必须首先进行上传。

# python - SyntaxError：尝试在 .tgz 文件上使用 tarfile.open() 时，python 中的语法无效

> ID：13055446
> 
> 赞同：0
> 
> 时间：2012-10-24T18:29:41.423
> 
> 标签：python, python-3.x

> **可能重复：**
> [使用 Python 3 打印时出现语法错误](https://stackoverflow.com/questions/826948/syntax-error-on-print-with-python-3)

我想查看 .tgz 文件的内容，我找到了 python 的 tarfile 模块。我发现以下教程看起来很有希望。[http://www.doughellmann.com/PyMOTW/tarfile/](http://www.doughellmann.com/PyMOTW/tarfile/)

这是我的python文件如下：

```
import tarfile

tar = tarfile.open("exampleTar.tgz","r")

print tar.getnames() 
```

当我实际执行我的 python 文件时，我得到一个指向最后一行中“r”的胡萝卜符号和错误消息：SyntaxError: invalid syntax。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:33:37.337

[打印](http://docs.python.org/release/3.0.1/whatsnew/3.0.html#print-is-a-function)是 python 3.x 中的函数。

```
import tarfile

tar = tarfile.open("exampleTar.tgz","r")

print(tar.getnames()) 
```

# c++ - C ++如何使用默认参数指定模板类的所有朋友？

> ID：13055447
> 
> 赞同：13
> 
> 时间：2012-10-24T18:29:46.123
> 
> 标签：c++, templates, arguments, friend

要使用默认参数定义模板类的朋友，您是否需要像下面的代码中那样指定所有朋友（哪个有效）？

```
// Different class implementations
enum ClassImplType { CIT_CHECK, CIT_FAST, CIT_GPU, CIT_SSE, CIT_NOF_TYPES } ;

// Graph class has default template argument CIT_CHECK
template <typename T, ClassImplType impl_type = CIT_CHECK>
class graph {
  //...
};

// Vertex class
template <typename T>
class vertex {
  //...
  friend class graph<T, CIT_CHECK>;
  friend class graph<T, CIT_FAST>;
  friend class graph<T, CIT_GPU>;
  friend class graph<T, CIT_SSE>;
}; 
```

我可以想象有一种更短的方法来表示朋友是为所有可能的 ClassImplType 枚举值定义的。类似的东西`friend class graph<T, ClassImplType>`，但后者当然不起作用。

如果我使用的术语不正确，我们深表歉意。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T20:54:02.567

> 我可以想象有一种更短的方法来表示朋友是为所有可能的 ClassImplType 枚举值定义的。

可悲的是，真的没有。你可以试试

```
template<ClassImplType I> friend class graph<T, I>; 
```

但该标准只是禁止一个人与部分专业人士交朋友：

`§14.5.4 [temp.friend] p8`

> 友元声明不得声明部分特化。[*示例：*
> 
> ```
> template<class T> class A { };
> class X {
>   template<class T> friend class A<T*>; // error
> }; 
> ```
> 
> *—结束示例*]

您只能与他们全部成为朋友：

```
template<class U, ClassImplType I>
friend class graph; 
```

或者一个特定的：

```
friend class graph<T /*, optional-second-arg*/>; 
```

老实说，我看不出与所有可能的专长交朋友会如何导致问题，但让我们假设它确实如此。我知道的一种解决方法是使用[passkey pattern](https://stackoverflow.com/q/3324898/500104)，尽管我们将使用稍微精简的版本（我们不能在`allow`这里使用该机制，因为它不能很好地允许访问模板的所有特化）：

```
template<class T>
class passkey{    
  passkey(){}
  friend T;

  // optional
  //passkey(passkey const&) = delete;
  //passkey(passkey&&) = delete;
};

// Different class implementations
enum ClassImplType { CIT_CHECK, CIT_FAST, CIT_GPU, CIT_SSE, CIT_NOF_TYPES } ;

template<class> struct vertex;

// Graph class has default template argument CIT_CHECK
template <typename T, ClassImplType impl_type = CIT_CHECK>
class graph {
public:
  void call_f(vertex<T>& v){ v.f(passkey<graph>()); }
  //...
};

// Vertex class
template <typename T>
class vertex {
  //...
public:
  template<ClassImplType I>
  void f(passkey<graph<T,I>>){}
}; 
```

[带有测试的实时示例。](http://liveworkspace.org/code/ec40da8c8e87504dc7ef3daf908ecd82)

您会注意到，您需要将`graph`需要访问的所有功能公开，但这不是问题，这要归功于只能由指定的`graph`专业化创建的密钥。

您还可以更进一步并创建一个代理类，该类可用于访问顶点功能（仅`graph`更改）：

```
// Graph class has default template argument CIT_CHECK
template <typename T, ClassImplType impl_type = CIT_CHECK>
class graph{
  typedef passkey<graph> key;
  // proxy for succinct multiple operations
  struct vertex_access{
    vertex_access(vertex<T>& v, key k)
      : _v(v), _key(k){}

    void f(){ _v.f(_key); }

  private:
    vertex<T>& _v;
    key _key;
  };

public:
  void call_f(vertex<T>& v){
    vertex_access va(v, key());
    va.f(); va.f(); va.f();
    // or
    v.f(key());
  }
  //...
}; 
```

[活生生的例子。](http://liveworkspace.org/code/e6d253da9ae1fbcc12a9f968f8c21367)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-24T18:31:01.543

`friend`您可以将语句模板化：

```
template<typename U, ClassImplType  V>
friend class graph_foo; 
```

我试图弄清楚如何保留`T`- 如果我发现我会更新。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-24T20:11:06.003

我想到了以下通过使用递归继承来“修复它”的方法。

内联注释解释了正在发生的事情：

```
#include <type_traits>
#include <string>
#include <iostream>
#include <typeinfo>

// Different class implementations
enum ClassImplType { CIT_CHECK, CIT_FAST, CIT_GPU, CIT_SSE, CIT_NOF_TYPES };

template <typename T, ClassImplType impl_type = CIT_CHECK>
class graph;

// Vertex class
namespace impl
{
    template <typename, ClassImplType, typename enabler = void> struct vertex_impl;

    ///////////////////////////////////////////////////////////////
    // actual implementation (stop condition of recursion)
    static const ClassImplType CIT_ENDMARKER = (ClassImplType) -1;

    template <typename T> struct vertex_impl<T, CIT_ENDMARKER> 
    {
        protected: // make it protected rather than private
            int secret() const { return 42; }
    };

    ///////////////////////////////////////////////////////////////
    // recursion, just to mark friends
    template <typename T, ClassImplType impl_type>
        struct vertex_impl<T, impl_type, typename std::enable_if<CIT_ENDMARKER != impl_type>::type>
            : public vertex_impl<T, ClassImplType(impl_type - 1)>
        {
             friend class ::graph<T, impl_type>;
        };
}

///////////////////////////////////////////////////////////////
// Public typedef
#if 1
    template <typename T> struct vertex : impl::vertex_impl<T, CIT_NOF_TYPES> { };
#else // or c++11
    template <typename T> using vertex = impl::vertex_impl<T, CIT_NOF_TYPES>;
#endif

template <typename T, ClassImplType impl_type>
class graph
{
    public:
        static void TestFriendOf(const vertex<T>& byref)
        {
            std::cout << byref.secret() << std::endl;
        }
};

int main(int argc, const char *argv[])
{
    vertex<int> t;

    graph<int, CIT_CHECK>     :: TestFriendOf(t);
    graph<int, CIT_FAST>      :: TestFriendOf(t);
    graph<int, CIT_GPU>       :: TestFriendOf(t);
    graph<int, CIT_SSE>       :: TestFriendOf(t);
    graph<int, CIT_NOF_TYPES> :: TestFriendOf(t);
} 
```

这适用于 gcc 和 clang。

[在http://liveworkspace.org/code/f03c0e25a566a4ca44500f4aaecdd354](http://liveworkspace.org/code/f03c0e25a566a4ca44500f4aaecdd354)上实时查看

PS。乍一看，这并不能完全解决任何冗长问题，但您可以使解决方案更通用，并从不同的“基本案例”继承而不是硬编码的，在这种情况下，样板文件可能会得到补偿（如果您有许多类需要与图形类型系列成为朋友）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-24T19:57:38.473

根据这个“非错误”解释，类不能成为部分专业化的朋友：[http ://gcc.gnu.org/bugzilla/show_bug.cgi?id=5094](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=5094)

```
 What clenches it is that 14.5.3, p9
 explicitly prohibits friend declarations of partial specializations:

   -9- Friend declarations shall not declare partial specializations.
       [Example:
           template<class T> class A { };
           class X {
               template<class T> friend class A<T*>; // error
           };
       容nd example] 
```

但是我得出的解决方案看起来并不完美，也不易于使用。这个想法是创建中间朋友内部类，只是将“友谊”转发给外部类。缺点（或优点？）是必须包装所有外部朋友可以使用的函数/成员变量：

```
// Different class implementations
enum ClassImplType { CIT_CHECK, CIT_FAST, CIT_GPU, CIT_SSE, CIT_NOF_TYPES } ;

template <typename T>
class vertex;

// Graph class has default template argument CIT_CHECK
template <typename T, ClassImplType impl_type = CIT_CHECK>
class graph {
    typedef typename vertex<T>::template graph_friend<impl_type> graph_friend;
public:
  graph(vertex<T>& a) { graph_friend::foo(a); } // here call private method    
  //...
};

// Vertex class
template <typename T>
class vertex {
  //...
  int foo() {}
public:
  template <ClassImplType impl_type>
  class graph_friend {
     static int foo(vertex& v) { return v.foo(); }
     friend class graph<T,impl_type>;
  };

};
int main() {
    vertex<int> a;
    graph<int,CIT_SSE> b(a);

} 
```

# facebook - Facebook评论框消失了

> ID：13055449
> 
> 赞同：1
> 
> 时间：2012-10-24T18:29:48.893
> 
> 标签：facebook

我刚刚集成了 facebook 评论插件，效果很好。但我不知道……不知怎的，从今天起我就看不到它了。它刚刚消失了。我检查了一切，一切正常。

我的 facebook 插件代码：

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=xxxxxxxxxxxxxxxx";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<div class="fb-comments" data-href="http://eventconnectbd.com/" data-num-posts="2" data-width="470"></div> 
```

我在上面看到了一个相关的问题 - 只需在 '//connect.facebook.net/en_US/all.js' 之前添加 'https:'

我做了同样的事情，突然它出现了，然后又消失了。

请帮我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:52:12.260

我认为这是一个 facebook 问题，看看这个 [https://developers.facebook.com/bugs/426569287392966?browse=search_5088102e10f3e4014990991](https://developers.facebook.com/bugs/426569287392966?browse=search_5088102e10f3e4014990991)

你不是今天唯一遇到这个问题的人。

# jquery - FancyBox (2.1.3) 在兼容模式下显示部分内容

> ID：13055450
> 
> 赞同：1
> 
> 时间：2012-10-24T18:29:59.407
> 
> 标签：jquery, fancybox, dynamics-crm, dynamics-crm-2011, fancybox-2

我正在尝试将fancybox 嵌入到CRM2011 表单中以显示参考页面。问题是在兼容模式下内容似乎没有完全呈现。不幸的是，我无法控制 doctype 或 html 标签（为了符合 MS Dynamics）。

我意识到这可能甚至不符合 FancyBox 问题，但我只是希望你们可能有我可以开始寻找的地方。

这是我用来初始化的代码：

```
$.fancybox.open(
{
    href: 'https://myreferralpod.com/refapp/',
    title: 'Create Referral', // + name
    type: 'iframe',
    iframe: {preload: true},
    padding: 5,
    margin: [20,20,5,20],
    helpers : {
        overlay : {
            closeClick : false,
            showEarly  : false
        }
    },
    //autoResize : true,
    fitToView : true,
    width : '80%',
    height : '80%',
    openEffect : 'none',
    closeEffect : 'none',
    arrows: false
}); 
```

（抱歉，暂时不能发图）

以下是兼容模式下显示的内容： [兼容模式](http://i.stack.imgur.com/EBcVt.png)

这是在常规（所需） [常规模式下显示的内容](http://i.stack.imgur.com/Dwh15.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T19:50:40.840

`<div class="container" id="page"...`需要添加一个额外的 css 样式。尝试添加`position:relative`

这是在`myreferralpod.com/refapp/`页面内（不在 CRM 端）。

# forms - 在 Flex 中显示 FormItems 的错误消息

> ID：13055456
> 
> 赞同：0
> 
> 时间：2012-10-24T18:30:28.470
> 
> 标签：forms, apache-flex, actionscript

我有一堆复选框，我将它们分组在 mx:FormItem 标记下，比方说称为 Application

```
<mx:FormItem  id ="application" label="Application" labelStyleName="labelStyle" width="520"> 
```

这些都需要验证。特别是，需要检查是否至少选择了这些复选框之一。这是在用户尝试提交按钮时完成的，所以我有一些效果：

```
<mx:Button width="60" label="Send" id="submit" click="doValidation();" /> 
```

doValidation() 函数有一堆条件需要检查，通过这些条件后，设置 Mx:FormItem 标记的 errorMessage 属性，如下所示

```
private function doValidation():void
{
  if(check.condition) //  check.condition is  a stub
     Application.errorString= "You messed up"; 
} 
```

但是，不会显示此 errorString。我相信这是我卡住的地方。作为相对较新的 flex，我还不太清楚如何解决它。有人可以说明如何显示此错误消息。内部逻辑就好了，我已经调试了代码看看它是如何工作的，但是

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T20:20:29.120

我不知道直接验证复选框的任何方法，但这里是一个手动创建的验证器的示例，用于在 FormItem 内找到多个复选框：

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application 
    xmlns:mx="http://www.adobe.com/2006/mxml" 
    minWidth="955" minHeight="600"
    layout="vertical" 
    >

    <mx:Script>
        <![CDATA[
            private function doValidation():void{
                var itemsSelected:int = 0;

                for each(var checkBox:CheckBox in app.getChildren()){
                    if(checkBox.selected){
                        itemsSelected++;
                    }
                }

                if(itemsSelected == 0){
                    app.filters = [errorGlow];
                    app.toolTip = "You must select at least one value";
                }else{
                    app.filters = [];
                    app.toolTip = "";
                }
            }

            private function checkBoxClicked(e:Event):void{
                if((e.currentTarget as CheckBox).selected == true){
                    app.filters = [];
                    app.toolTip = "";
                }
            }
        ]]>
    </mx:Script>

    <mx:GlowFilter id="errorGlow"
        color="0xFF0000" blurX="5" blurY="5"
        />

    <mx:Form>
        <mx:FormItem id="app" 
            width="520"
            label="Application"
            >
            <mx:CheckBox id="checkBox1" label="Item 1" selected="false" click="checkBoxClicked(event)"/>
            <mx:CheckBox id="checkBox2" label="Item 2" selected="false" click="checkBoxClicked(event)"/>
            <mx:CheckBox id="checkBox3" label="Item 3" selected="false" click="checkBoxClicked(event)"/>
            <mx:CheckBox id="checkBox4" label="Item 4" selected="false" click="checkBoxClicked(event)"/>
            <mx:CheckBox id="checkBox5" label="Item 5" selected="false" click="checkBoxClicked(event)"/>
            <mx:CheckBox id="checkBox6" label="Item 6" selected="false" click="checkBoxClicked(event)"/>
            <mx:CheckBox id="checkBox7" label="Item 7" selected="false" click="checkBoxClicked(event)"/>
        </mx:FormItem>
    </mx:Form>
    <mx:Button  width="60" label="Send" id="submit" click="doValidation()" />

</mx:Application> 
```

# javascript - Javascript范围：将变量从外部函数传递到内部函数

> ID：13055458
> 
> 赞同：2
> 
> 时间：2012-10-24T18:30:31.753
> 
> 标签：javascript, jquery, oop, variables, scope

我在 outerFunction 中定义了变量“a”。我想在我的 innerFunction 中使用它。为什么这不起作用，在嵌套函数之间传递数据的最佳方式是什么？

```
var outerFunction = function () {
   var a = 5;
   innerFunction();
}

var innerFunction = function () {
   alert(a);
}

outerFunction(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T18:31:20.337

您必须向内部函数添加参数并从外部函数向其传递值。

**[现场演示](http://jsfiddle.net/3wCFm/)**

```
var outerFunction = function () {
   var a = 5;
   innerFunction(a);
}

var innerFunction = function (a) {
   alert(a);
}

outerFunction(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T18:33:03.153

`innerFunction` 不是`outeFunction`您的内部功能只是从`outerFunction`. 内部函数应该定义如下。

```
var outerFunction = function () {
   var a = 5;
   var innerFunction = function () {
    alert(a);
   }
   innerFunction();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T18:33:24.693

在 javascript 中，函数绑定到它们的上下文。这意味着内部定义的变量`outerFunction`仅存在于那里，而不存在于全局上下文中。但是对于功能，`innerFunction`此范围不可用。所以你不能访问它。如果你需要它，你应该将它作为参数传递给`innerFunction`明确的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T18:34:55.803

只是实际上嵌套它们：

```
var outerFunction = function () {

    var innerFunction = function () {
        alert(a);
    }

    var a = 5;
    innerFunction();
}

outerFunction(); 
```

Now`innerFunction`的范围（有权访问的范围）在声明的where`alert`范围内。`outerFunction``a`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T18:33:12.843

var 定义变量的局部范围。如果您不打算传递变量，请执行此操作，

```
var outerFunction = function () {
   a = 5;
   innerFunction();
}

var innerFunction = function () {
   alert(a);
}

outerFunction(); 
```

但是干净的方法是传入变量

```
innerFunction(a) 
```

# php - 用户 ID 递增不当

> ID：13055461
> 
> 赞同：0
> 
> 时间：2012-10-24T18:30:47.130
> 
> 标签：php, mysql

> **可能重复：**
> [MySQL：重新排序/重置自动增量主键？](https://stackoverflow.com/questions/740358/mysql-reorder-reset-auto-increment-primary-key)

我创建了一个文件，该文件`register.php`记录了每个用户的用户 ID。我的伙伴创建了他自己的版本。在我们的数据库中，默认情况下我是用户 ID 1，他是用户 ID 2。我们都有 4 个额外的用户。我遇到的问题是我从我的数据库中删除了所有用户，但是每当有新成员注册到我的网站时，他们的用户 ID 要么是 7 及以上 - 而不是 2（就在我之后）。有人可以帮我解决这个问题吗？

我的缩短数据库：

```
 CREATE TABLE `users` (
   `user_id` int(100) not null auto_increment,
   `user_name` varchar(50) not null,
   `user_pass` varchar(100) not null,
   `user_email` varchar(255) not null,
   PRIMARY KEY (`user_id`),
   UNIQUE KEY (`user_name`)
    ) ENGINE=MyISAM DEFAULT CHARSET=utf8_unicode_ci AUTO_INCREMENT=8; 
```

现在这里是 Sql：

```
$sql = "INSERT INTO
users(user_name, user_pass, user_email , user_date , user_level)
VALUES('" . mysql_real_escape_string($_POST['user_name']) . "',
'" . $ip . "',
'" . sha1($_POST['user_pass']) . "',
'" . mysql_real_escape_string($_POST['user_email']) . "',
NOW(),
0)"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:34:27.280

您必须重置表上的自动增量，以便在您删除它们后生成编号较低的用户 ID。

```
ALTER TABLE mytable AUTO_INCREMENT = 3 
```

[http://www.electrictoolbox.com/reset-auto-increment-value-mysql/](http://www.electrictoolbox.com/reset-auto-increment-value-mysql/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T18:37:49.540

定义表时，您将以下字段声明为自动递增：

```
`user_id` int(100) not null auto_increment, 
```

这意味着数据库将为它所做的最后一次增量保留一个独立的值。这确保了每个新行都有一个唯一的 user_id。

您可以使用以下 SQL 将其重置为某个数字：

```
ALTER TABLE mytable AUTO_INCREMENT = {the number you want}; 
```

但是，如果您删除一些但不是所有用户，这将导致问题。如果您有用户 1-7，删除用户 id 5，并将自动增量重置为 5，然后添加三个用户，您将拥有用户 1-7，但您将拥有 6 和 7 的重复项。这不好为唯一索引。

通常唯一的 id 不是面向用户的，因此实际值无关紧要。在此解决方案中，您为用户提供了一个替代的、面向用户的标识符。这可以是一个散列数字、用户名或其他东西（如图片）。用户 id 仅作为一个钩子来维护数据完整性。

另一种方法是，当您插入一个新用户时，您会在数据库中扫描第一个未使用的号码。但是，这在计算上很昂贵，而且好处尚不清楚。

对于最干净的代码，准确地决定 user_id 应该代表什么，并单独使用它。然后构建您的程序来表示该抽象。

# mongodb - 使用 mongo 聚合框架按数组的特定元素分组

> ID：13055462
> 
> 赞同：10
> 
> 时间：2012-10-24T18:30:51.087
> 
> 标签：mongodb, aggregation-framework

是否可以使用聚合框架按数组的特定元素进行分组？

这样的文件是这样的：

```
{
  name: 'Russell',
  favourite_foods: [
    { name: 'Pizza', type: 'Four Cheeses' },
    { name: 'Burger', type: 'Veggie'}
  ],
  height: 6
} 
```

我可以得到一份最喜欢的食物（即索引为 0 的食物）的不同列表，以及最喜欢食物的最高人的身高？

像这样的东西（尽管它不起作用，因为数组索引访问点符号似乎在聚合框架中不起作用）：

```
db.people.aggregate([
  { $group : { _id: "$favourite_foods.0.name", max_height: { $max : "$height" } } }
]) 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-25T01:41:38.593

似乎您正在依靠每个人最喜欢的食物排在第一位。如果是这样，您可以利用聚合框架运算符。

这是您可以使用的管道：

```
db.people.aggregate(
[
    {
        "$unwind" : "$favourite_foods"
    },
    {
        "$group" : {
            "_id" : {
                "name" : "$name",
                "height" : "$height"
            },
            "faveFood" : {
                "$first" : "$favourite_foods"
            }
        }
    },
    {
        "$group" : {
            "_id" : "$faveFood.name",
            "height" : {
                "$max" : "$_id.height"
            }
        }
    }
]) 
```

在此示例数据集上：

```
> db.people.find().pretty()
{
    "_id" : ObjectId("508894efd4197aa2b9490741"),
    "name" : "Russell",
    "favourite_foods" : [
        {
            "name" : "Pizza",
            "type" : "Four Cheeses"
        },
        {
            "name" : "Burger",
            "type" : "Veggie"
        }
    ],
    "height" : 6
}
{
    "_id" : ObjectId("5088950bd4197aa2b9490742"),
    "name" : "Lucy",
    "favourite_foods" : [
        {
            "name" : "Pasta",
            "type" : "Four Cheeses"
        },
        {
            "name" : "Burger",
            "type" : "Veggie"
        }
    ],
    "height" : 5.5
}
{
    "_id" : ObjectId("5088951dd4197aa2b9490743"),
    "name" : "Landy",
    "favourite_foods" : [
        {
            "name" : "Pizza",
            "type" : "Four Cheeses"
        },
        {
            "name" : "Pizza",
            "type" : "Veggie"
        }
    ],
    "height" : 5
}
{
    "_id" : ObjectId("50889541d4197aa2b9490744"),
    "name" : "Augie",
    "favourite_foods" : [
        {
            "name" : "Sushi",
            "type" : "Four Cheeses"
        },
        {
            "name" : "Pizza",
            "type" : "Veggie"
        }
    ],
    "height" : 6.2
} 
```

你会得到这些结果：

```
{
    "result" : [
        {
            "_id" : "Pasta",
            "height" : 5.5
        },
        {
            "_id" : "Pizza",
            "height" : 6
        },
        {
            "_id" : "Sushi",
            "height" : 6.2
        }
    ],
    "ok" : 1
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-24T20:20:15.783

看起来目前无法从聚合数组中提取特定元素： [https ://jira.mongodb.org/browse/SERVER-4589](https://jira.mongodb.org/browse/SERVER-4589)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-05-06T07:22:08.303

**只需在使用后添加有关结果的更多信息`"$wind"`：**

**文档 ：**

```
> db.people.find().pretty()
{
    "_id" : ObjectId("508894efd4197aa2b9490741"),
    "name" : "Russell",
    "favourite_foods" : [
        {
            "name" : "Pizza",
            "type" : "Four Cheeses"
        },
        {
            "name" : "Burger",
            "type" : "Veggie"
        }
    ],
    "height" : 6
},
... 
```

**聚合：**

```
db.people.aggregate([{
    $unwind: "$favourite_foods"
}]); 
```

**结果 ：**

```
{
    "_id" : ObjectId("508894efd4197aa2b9490741"),
    "name" : "Russell",
    "favourite_foods" :{
            "name" : "Pizza",
            "type" : "Four Cheeses"
    },
    "height" : 6
},
{
    "_id" : ObjectId("508894efd4197aa2b9490741"),
    "name" : "Russell",
    "favourite_foods" : {
            "name" : "Burger",
            "type" : "Veggie"
    },
    "height" : 6
} 
```

**另外：**
如果一个集合记录中有两个以上的数组字段，我们可以使用[**“$project”**](https://docs.mongodb.org/manual/meta/aggregation-quick-reference/#aggregation-expressions)阶段来指定数组字段。

```
db.people.aggregate([
    {
        $project:{
            "favourite_foods": 1
        }
    },
    {
        $unwind: "$favourite_foods"
    }
]); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-24T23:22:37.990

我认为您可以使用 $project 和 $unwind 运算符（如果这不是您想要完成的，请告诉我）：

```
> db.people.aggregate(
   {$unwind: "$favourite_foods"}, 
   {$project: {food : "$favourite_foods", height: 1}}, 
   {$group : { _id: "$food", max_height: { $max : "$height" } } })

{
    "result" : [
        {
            "_id" : {
                "name" : "Burger",
                "type" : "Veggie"
            },
            "max_height" : 6
        },
        {
            "_id" : {
                "name" : "Pizza",
                "type" : "Four Cheeses"
            },
            "max_height" : 6
        }
    ],
    "ok" : 1
} 
```

[http://docs.mongodb.org/manual/applications/aggregation/](http://docs.mongodb.org/manual/applications/aggregation/)

# javascript - 标题上的活动锚链接颜色更改

> ID：13055469
> 
> 赞同：0
> 
> 时间：2012-10-24T18:31:07.393
> 
> 标签：javascript, jquery, css, html

我有一个单页网站，其中有大 div 作为部分/页面。我已经设法让锚点工作等，但是我遇到的问题是 CSS`a:active`在这种情况下不起作用，因为实际的 div 没有链接到顶部的锚点链接。每个 div 上方都有一个跨度，它是标题的高度，因此这些部分不会隐藏在它后面。

我想知道当用户位于页面的特定部分时，是否有任何方法（使用 CSS/JavaScript）让锚链接自行更改颜色。

如果有人想查看[**此网页上**](http://smokeybones.com/)的类似示例，则此站点实际上使用指示器而不是更改链接颜色。但是我确定他们使用的是 JS，因为当我在 Google Chrome 中检查元素时，随着指示器的移动，CSS 也会改变位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:40:50.520

我想你可以。

```
$('#specific-section').bind('mouseenter', function(){
  $('a').css('color','yellow');
}).bind('mouseleave', function(){
  $('a').css('color','white');
}); 
```

# javascript - 使用Jquery在文本框中自动填充当前日期和一个月前的日期，然后过滤

> ID：13055473
> 
> 赞同：0
> 
> 时间：2012-10-24T18:31:15.023
> 
> 标签：javascript, jquery, html, textbox, datepicker

**我的问题是在页面加载时**在文本框中自动填充这两个日期，然后根据日期使用 datepicker 过滤它们

我现在拥有的代码

```
 <td >

                    <label for="from">Start date:</label>

                    <input type="text" id="from" />

                    <label for="to">End date:</label>

                    <input type="text" id="to" />

                </td> 
```

和脚本

```
 $(function() {
    $( "#from" ).datepicker({
        defaultDate: "+1w",
        changeMonth: true,
        numberOfMonths: 1,
        onSelect: function( selectedDate ) {
            $( "#to" ).datepicker( "option", "minDate", selectedDate );
        }
    });
    $( "#to" ).datepicker({
        defaultDate: "+1w",
        changeMonth: true,
        numberOfMonths: 1,
        onSelect: function( selectedDate ) {
            $( "#from" ).datepicker( "option", "maxDate", selectedDate  );
        }
    });
  }); 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T18:44:05.240

我假设您希望按照`onSelect`处理程序中的指示设置最小/最大日期，因此：

编辑：添加代码以预填充日期。

EDIT2：再次针对问题中未说明的不同要求。

```
$(function() {
    $("#from").datepicker({
        defaultDate: "-3w",
        maxDate: "+1w",
        changeMonth: true,
        numberOfMonths: 1,
        onSelect: function(selectedDate) {
            $("#to").datepicker("option", "minDate", selectedDate);
        }
    }).datepicker('setDate', '-3w');
    $("#to").datepicker({
        defaultDate: "+1w",
        minDate: "-3w",
        changeMonth: true,
        numberOfMonths: 1,
        onSelect: function(selectedDate) {
            $("#from").datepicker("option", "maxDate", selectedDate);
        }
    }).datepicker('setDate', '+1w');;
}); 
```

# assembly - 如何使用 FASM 控制台进行编译

> ID：13055474
> 
> 赞同：0
> 
> 时间：2012-10-24T18:31:16.353
> 
> 标签：assembly, compiler-construction, console, fasm

我正在尝试制作一个程序集 IDE，它允许用户输入代码并使用 NASM、FASM、YASM 等进行编译。但是，由于 FASM 带有 IDE，因此我找不到任何有关使用控制台编译的信息。例如，如果我有一个程序 test.asm，我会这样编译：

```
fasm test.asm 
```

如果我这样做了，fasm.exe 必须与我假设的命令提示符运行在同一目录中。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T18:47:20.930

设置`PATH`为 fasm.exe 所在的位置，并设置`INCLUDE`为 fasm 包含的任何位置，一切都应按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T00:17:39.393

您可以直接在命令行中决定输出文件名和路径：

```
fasm source/path/source.asm destination/path/output.exe 
```

当您省略最后一个参数时，fasm 将尝试根据源代码中的格式指令猜测扩展名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T22:48:05.130

您正在构建一个与多个汇编器一起使用的 IDE？创建一个设置文件（可能是一个项目文件）并让用户输入他们的汇编程序的路径。然后，您将此信息传递到您的情况下为 FASM。你可以看看 RadASM 和 WinASM，它们都是很棒的带有源代码的汇编 IDE。

与此类似的东西： ![RadASM 路径](../Images/d07c846bdb8ce5ad32961e591710eb62.png)

和这个： ![项目设置](../Images/107e7eac371f0e08c270e7defd8b6a71.png)

所有这些都保存到项目文件中打开项目时，加载路径并传递到 assembler/linker/res 编译器命令行。

# java - 系统服务器和应用程序权限

> ID：13055477
> 
> 赞同：1
> 
> 时间：2012-10-24T18:31:23.353
> 
> 标签：java, android, android-framework

我在 android 框架中编写了一个系统服务器/服务。据我所知，它具有系统级权限。但是，当我使用应用程序调用此服务时，我获得了调用该服务的应用程序的权限。谁能解释这种行为？另外我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T09:50:29.313

在您的服务中尝试从其他服务调用方法时，请尝试将调用代码放入以下代码块中：

```
long token = Binder.clearCallingIdentity();
//your call
Binder.restoreCallingIdentity(token); 
```

# ios - NSDateFormatter 根据 iOS 版本返回不同的结果

> ID：13055478
> 
> 赞同：1
> 
> 时间：2012-10-24T18:31:24.587
> 
> 标签：ios, ios5, date, ios6, nsdateformatter

我有一个与日期格式化程序有关的问题，它为日期“2012-10-21”返回 null。

我只使用我想测试的代码创建了一个示例项目，只是为了确保其他事情不会干扰结果。

在 iOS 5 中，它按预期执行，但在 iOS 6 中，日期格式化程序返回 null。

这是我的代码：

```
NSString *myStringDate = @"2012-10-21";

//------------------------//

NSLog(@"Test 1");

NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"yyyy-MM-dd"];
NSDate *myDate = [formatter dateFromString:myStringDate];
NSLog(@"Date: %@", myDate);

//------------------------//

NSLog(@"Test 2");

NSDateFormatter *formatter2 = [[NSDateFormatter alloc] init];
[formatter2 setDateFormat:@"yyyy-MM-dd"];
[formatter2 setTimeZone:[NSTimeZone systemTimeZone]];
NSDate *myDate2 = [formatter2 dateFromString:myStringDate];
NSLog(@"TimeZone: %@", [NSTimeZone systemTimeZone]);
NSLog(@"Date: %@", myDate2);

//------------------------//

NSLog(@"Test 3");

NSDateFormatter *formatter3 = [[NSDateFormatter alloc] init];
[formatter3 setDateFormat:@"yyyy-MM-dd"];
[formatter3 setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:-7200]];
NSDate *myDate3 = [formatter3 dateFromString:myStringDate];
NSLog(@"TimeZone: %@", [NSTimeZone timeZoneForSecondsFromGMT:-7200]);
NSLog(@"Date: %@", myDate3);

//------------------------// 
```

**iOS 5.1 模拟器结果：**

```
Test 1
Date: 2012-10-21 03:00:00 +0000

Test 2
TimeZone: America/Sao_Paulo (BRST) offset -7200 (Daylight)
Date: 2012-10-21 03:00:00 +0000

Test 3
TimeZone: GMT-0200 (GMT-02:00) offset -7200
Date: 2012-10-21 02:00:00 +0000 
```

**iOS 6.0 模拟器结果：**

```
Test 1
Date: (null)

Test 2
TimeZone: America/Sao_Paulo (GMT-03:00) offset -7200 (Daylight)
Date: (null)

Test 3
TimeZone: GMT-0200 (GMT-02:00) offset -7200
Date: 2012-10-21 02:00:00 +0000 
```

在 iOS 6 中，NSDateFormatter**仅**在日期为`"2012-10-21"`. 对于 2012 年的所有其他日期，结果在两个 iOS 版本上都是正确的。

任何人都可以解释为什么？它是一个错误？我的代码错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T20:31:51.607

看起来圣保罗在 10 月 20 日/21 日进行了夏令时更改，并提前了一个小时 (http://www.timeanddate.com/worldclock/clockchange.html?n=233)。这似乎不是巧合。为测试 1 和 2 计算的时间可能落在 10 月 21 日凌晨 12 点至凌晨 1 点之间，这是不可能的。iOS 6 在这方面可能会更严格一些。

据我所知，您的代码看起来不错，它可能是 iOS 中的一个错误（或者它可能是预期的行为，而 iOS 5 是问题，我不知道！）。其他日期似乎有效的事实表明存在操作系统问题，文档没有解释这是否应该发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T20:53:02.183

这是我用来递减日期的代码：

*   (IBAction)showPrevDate:(id)sender { NSString *dateForDecrement = _showDateLbl.text;

    [dateFormatter setDateFormat:@"MMM d, yyyy (EEE)"]; [dateFormatter setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];

    NSDate *dateObjectForDecrement = [dateFormatter dateFromString:dateForDecrement];

    整数减法天数 = 1；

    NSDate *dateAfterDecrement=[dateObjectForDecrement dateByAddingTimeInterval:-(24*60*60 *subtractDays)]; [dateFormatter setDateFormat:@"MMM d, yyyy (EEE)"];

    _showDateLbl.text = [NSString stringWithFormat:@"%@", [dateFormatter stringFromDate:dateAfterDecrement]];

}

不适用于 iOS6，但适用于 iOS5。你能验证吗？

# android - PopupMenu PopupWindow$PopupViewContainer 泄漏

> ID：13055479
> 
> 赞同：10
> 
> 时间：2012-10-24T18:31:26.153
> 
> 标签：android, memory-leaks, popupmenu

我有一个`PopupMenu`锚定到操作栏中的按钮，并且我正在获取有关泄漏窗口的日志输出。

如果我的活动在`PopupMenu`打开时停止，则会发生这种情况。

[我在这里](https://stackoverflow.com/q/13005150/931277)发布了一个相关的问题，但我已经解决了这个问题。

我见过一些类似的问题，例如[this](https://stackoverflow.com/questions/5978069/cant-dismiss-popupwindow)，但与`PopupMenu`.

我在想如果我能处理提到的问题，`PopupWindow$PopupViewContainer`那么我可以将它从`WindowManager`onPause 期间或类似的东西中删除，但我不知道如何处理它。暴露的接口`PopupMenu`非常有限。

*   有没有人遇到过这个问题？
*   有没有人修复它或解决它？
*   任何人都知道如何获得`PopupMenu`'s `View`or `Window`？

这就是我创建菜单的方式：

```
// in Activity
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    super.onCreateOptionsMenu(menu);
    final MenuInflater inflater = getMenuInflater();

    inflater.inflate(R.menu.main_menu, menu);
    MenuItem login = menu.findItem(R.id.menu_login);
    final Button button = (Button) login.getActionView().findViewById(R.id.login);

    button.setOnClickListener(new View.OnClickListener() {
        public void onClick(View item) {
            if (profileMenu == null) {
                // I've tried passing getApplicationContext() here too, with no change
                profileMenu = new PopupMenu(ListActivity.this, button);
                profileMenu.getMenuInflater().inflate(R.menu.profile_menu, profileMenu.getMenu());
                profileMenu.setOnMenuItemClickListener(new PopupMenu.OnMenuItemClickListener() {
                    public boolean onMenuItemClick(MenuItem item) {
                        // there was code here, but I removed it and problem persists
                        return false;
                    }
                });
            }
            profileMenu.show();

        }
    }); 
```

这是完整的堆栈跟踪：

```
10-24 11:10:13.878: E/WindowManager(2048): Activity **.app.ListActivity has leaked window android.widget.PopupWindow$PopupViewContainer@4157a7e8 that was originally added here
10-24 11:10:13.878: E/WindowManager(2048): android.view.WindowLeaked: Activity **.app.ListActivity has leaked window android.widget.PopupWindow$PopupViewContainer@4157a7e8 that was originally added here
10-24 11:10:13.878: E/WindowManager(2048):  at android.view.ViewRootImpl.<init>(ViewRootImpl.java:374)
10-24 11:10:13.878: E/WindowManager(2048):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:292)
10-24 11:10:13.878: E/WindowManager(2048):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:224)
10-24 11:10:13.878: E/WindowManager(2048):  at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:149)
10-24 11:10:13.878: E/WindowManager(2048):  at android.widget.PopupWindow.invokePopup(PopupWindow.java:988)
10-24 11:10:13.878: E/WindowManager(2048):  at android.widget.PopupWindow.showAsDropDown(PopupWindow.java:897)
10-24 11:10:13.878: E/WindowManager(2048):  at android.widget.ListPopupWindow.show(ListPopupWindow.java:595)
10-24 11:10:13.878: E/WindowManager(2048):  at com.android.internal.view.menu.MenuPopupHelper.tryShow(MenuPopupHelper.java:127)
10-24 11:10:13.878: E/WindowManager(2048):  at com.android.internal.view.menu.MenuPopupHelper.show(MenuPopupHelper.java:100)
10-24 11:10:13.878: E/WindowManager(2048):  at android.widget.PopupMenu.show(PopupMenu.java:108)
10-24 11:10:13.878: E/WindowManager(2048):  at **.app.ListActivity$3.onClick(ListActivity.java:376)
10-24 11:10:13.878: E/WindowManager(2048):  at android.view.View.performClick(View.java:4084)
10-24 11:10:13.878: E/WindowManager(2048):  at android.view.View$PerformClick.run(View.java:16966)
10-24 11:10:13.878: E/WindowManager(2048):  at android.os.Handler.handleCallback(Handler.java:615)
10-24 11:10:13.878: E/WindowManager(2048):  at android.os.Handler.dispatchMessage(Handler.java:92)
10-24 11:10:13.878: E/WindowManager(2048):  at android.os.Looper.loop(Looper.java:137)
10-24 11:10:13.878: E/WindowManager(2048):  at android.app.ActivityThread.main(ActivityThread.java:4745)
10-24 11:10:13.878: E/WindowManager(2048):  at java.lang.reflect.Method.invokeNative(Native Method)
10-24 11:10:13.878: E/WindowManager(2048):  at java.lang.reflect.Method.invoke(Method.java:511)
10-24 11:10:13.878: E/WindowManager(2048):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
10-24 11:10:13.878: E/WindowManager(2048):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
10-24 11:10:13.878: E/WindowManager(2048):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-24T18:39:01.130

只需调用 profileMenu.dismiss() onStop() 就足够了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-02-12T07:26:08.070

对我来说 .dismiss() 它在 onDestroy() 没有帮助。

事实证明，消除 PopupMenu 泄漏窗口问题的唯一方法是删除进入/退出转换，我将它们替换为 popupAnimationStyle。

这解决了这个泄漏的窗口问题。

```
<item name="android:popupEnterTransition">@null</item>
<item name="android:popupExitTransition">@null</item>
<item name="android:popupAnimationStyle">@style/PopupMenuAnimation</item>

<style name="PopupMenuAnimation">
    <item name="android:windowEnterAnimation">@anim/slide_up_bottom</item>
    <item name="android:windowExitAnimation">@anim/slide_down_bottom</item>
</style> 
```

# linq - LINQ：向下钻取查询结果中的值

> ID：13055481
> 
> 赞同：0
> 
> 时间：2012-10-24T18:31:45.607
> 
> 标签：linq, entity-framework-4, .net-4.5

我第一次使用 LINQ 并有以下查询：

```
var query = from c in context.Call
            join d in context.CallData on c.CallID = d.CallID
            where c.CallID == 123
            select new {
               c.CallID,
               c.CallResult,
               d.FieldID,
               d.FieldValue
            }; 
```

这将返回类似于以下的数据

```
c.CallID    c.CallResult   d.FieldID    d.FieldValue
  123         Sale           345          John
  123         Sale           346          Doe
  123         Sale           347          888-222-3333 
```

如何深入到包含 d.FieldID = 346 的行以获取 d.FieldValue 的值（346 是 LastName 字段）？我想将此值用作局部变量的新值：

```
// I know this doesn't work, just showing what I would like to accomplish
string LastName = query.Select(a => a.FieldID = 346).FieldValue; 
```

相反，一旦获得这些结果，如何更改 c.CallResult 的值？既然是联接，我可以简单地更改一行数据还是必须进行单独的查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T18:39:02.727

你的意思是：

```
string LastName = query
                 .Where(a => a.FieldID = 346)
                 .Select(a => a.FieldValue)
                 .FirstOrDefault(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T22:15:15.867

对于第一个问题，您可以从`query`变量继续：

```
var fieldValue = query.Where(x => x.FieldID == 346).Single().FieldValue; 
```

至于您的第二个问题：您必须对原始实体对象进行更改：

```
var call = context.Find(123);
// or context.Calls.Single(c => c.CallId == 123) if this is not DbContext.
call.CallResult = newValue;
context.SaveChanges(); 
```

# rdf - setSameAs() 关联数据 --- Jena

> ID：13055485
> 
> 赞同：1
> 
> 时间：2012-10-24T18:31:59.177
> 
> 标签：rdf, semantics, jena, owl

我正在尝试使用链接两个人 A 和 B

```
 B.setSameAs(A) OR A.setSameAs(B) 
```

A 有属性 hasOne, hasTwo

B有一个属性hasThree

我希望B的属性可以推断为A的属性。不幸的是，当我列出A的属性时，没有出现hasThree

这是我的设置：

```
 OntModel onto = ModelFactory.createOntologyModel(OntModelSpec.OWL_MEM_MICRO_RULE_INF, null);

      String NAMESPACE1 = "http://mynamespace.one#";
      String NAMESPACE2 = "http://mynamespace.two#";

      OntClass myClass = onto.createClass(NAMESPACE1 + "MyClass");

      Individual a = onto.createIndividual(NAMESPACE1 + "A", myClass);
      Individual b = onto.createIndividual(NAMESPACE2 + "B", myClass); 
```

注意：我为 B 使用了不同的命名空间来模拟不同的地址，但在此设置中它使用相同的类类型

```
 OntProperty one = onto.createOntProperty(NAMESPACE1 + "hasOne");
      OntProperty two = onto.createOntProperty(NAMESPACE1 + "hasTwo");
      OntProperty three = onto.createOntProperty(NAMESPACE2 + "hasThree"); 
```

注意：hasThree 属性位于 B 的同一地址

```
 a.setLiteral(one, true);
      a.setLiteral(two, true);
      b.setLiteral(three, true);

      a.setSameAs(b);          //THIS results in the RDF entry for A to have a line <owl:sameAs rdf:resource:"http://mynamespace.two#B" />
      //b.setSameAs(a);          //I TRIED using this too, but it didn't work either

      // IN HERE I JUST SET AN ITERATOR TO SHOW ALL OF THE PROPERTIES OF A
      // UNFORTUNATELY, hasThree DOESN'T SHOW UP UNDER THE PROPERTIES OF A 
```

我列出了困扰我的事情。

1.  当我尝试列出 A 的所有属性时，hasThree 没有出现。
2.  当我列出 MyClass 的所有个人时，A 和 B 都会出现——我想这不是正确的结果，因为 A=B 和 B=A，所以应该只显示 1 个个人。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T20:10:16.740

您没有使用支持的推理配置文件`owl:sameAs`

在[Jena 文档的](http://jena.apache.org/documentation/)[OWL 推理](http://jena.apache.org/documentation/inference/#owl)中，有一个表格列出了不同推理器配置文件的 OWL 覆盖范围。

的行`owl:sameAs`说明以下内容：

```
owl:sameAs, owl:differentFrom, owl:distinctMembers  | full, mini  | owl:distinctMembers is currently translated into a quadratic set of owl:differentFrom assertions. 
```

因此，为了获得您想要的行为，您必须使用完整/迷你 OWL 推理器，您的代码显示您正在使用微型推理器。

改用你的代码`OntModelSpec.OWL_MEM_MINI_RULE_INF`应该可以解决你的问题。

# android - Android JNI 上有 /dev/random 的替代品吗？

> ID：13055491
> 
> 赞同：3
> 
> 时间：2012-10-24T18:32:18.787
> 
> 标签：android, random, cryptography

我编写了一个应用程序，它通过 OpenSSL 1.0.1c 生成 ECDSA 公钥/私钥对。据我了解，OpenSSL 在 Linux 上使用 /dev/random，但 Android 没有 /dev/random，这意味着我可能会提供加密弱密钥对。

我读了这两个

[https://security.stackexchange.com/questions/2152/do-mobile-oss-provide-crypto-quality-randomness](https://security.stackexchange.com/questions/2152/do-mobile-oss-provide-crypto-quality-randomness)

这个问题

[https://security.stackexchange.com/questions/14669/how-to-select-dev-random-or-dev-urandom-in-the-code-in-android](https://security.stackexchange.com/questions/14669/how-to-select-dev-random-or-dev-urandom-in-the-code-in-android)

并且两者都为使用提供了足够的建议`java.security.SecureRandom`，但是我在本机端生成这些密钥对，因此欢迎使用本机。我可以将参数从 Java 传递到我的本机代码，因此很容易传入随机字节，但是如果有办法完全在本机端完成，我会选择它。

那么，Android 上有 /dev/random 的替代品吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T18:41:01.193

Android 既提供原生代码`/dev/random`，也提供`/dev/urandom`原生代码。两者都是世界可读的。您应该使用`/dev/urandom`，因为 Android 已经确保 PRNG 已播种。

`/dev/random`/ over的唯一优点`/dev/urandom`是`/dev/random`即使 PRNG 没有播种也是安全的。但安卓总是播种 PRNG。所以没有优势。并且`/dev/random`有很大的缺点——它耗尽了系统熵池。

# c# - 从表单中读取字符串作为逐字字符串，显示的是 \\ 而不是 \

> ID：13055493
> 
> 赞同：1
> 
> 时间：2012-10-24T18:32:40.573
> 
> 标签：c#, c#-4.0, verbatim-string

我有以下财产：

```
public string InstanceName
{
    get
    {
        return cbServerInstanceName.Text;
    }
} 
```

在哪里输入

```
cbServerInstanceName.Text = "ServerName\ PcName" 
```

这显示为

```
 "ServerName\\ PcName" 
```

我尝试使用 string.replace 但无法使其正常工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T18:37:07.877

我将尝试一下，假设您正在`"ServerName\\ PcName"`使用 Visual Studio 中的调试器视图。由于它向您显示`"a string\\"`而不是 a `@"string literal\"`，因此您将看到您的斜线已转义。就像`"\r\n"`添加新行一样。

如果您可以尝试将您的值打印到 MessageBox、Debug 或控制台。它*应该*如您所愿。*手指交叉*

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-24T18:38:21.320

当您使用 C# 并在调试器中查看字符串时，它会转义某些字符并且`\`是其中之一；它将在调试器中显示为`\\`但在运行时而不在调试器中查看，它将被转换为单个`\`

# c++ - 使用 C++11 的 Clang 类型转换具有模棱两可的编译器行为

> ID：13055503
> 
> 赞同：1
> 
> 时间：2012-10-24T18:33:08.667
> 
> 标签：c++, templates, c++11, clang

考虑以下代码：

```
#include<iostream>
#include<vector>
using namespace std;
class Foo {
public:
  template< typename T> 
  operator vector< T >() const {
    return vector< T >();
  }

  template< typename T> 
  operator T() const {
    return T();
  }
};

int main () {
  Foo b;
  vector< int >  q = b;
  q = b;
} 
```

使用 Clang 或 g++ 使用以下两个命令之一进行编译：

```
g++ test.cpp
clang++ test.cpp 
```

但是，启用 C++11 功能会失败：

```
g++ --std=c++0x test.cpp
clang++ --std=c++11 test.cpp 
```

错误信息如下：

```
test.cpp:20:5: error: use of overloaded operator '=' is ambiguous (with operand types 'vector<int>' and 'Foo')
  q = b;
  ~ ^ ~
/usr/include/c++/4.6/bits/stl_vector.h:373:7: note: candidate function
      operator=(vector&& __x)
      ^
/usr/include/c++/4.6/bits/stl_vector.h:362:7: note: candidate function
      operator=(const vector& __x);
      ^
/usr/include/c++/4.6/bits/stl_vector.h:394:7: note: candidate function
      operator=(initializer_list<value_type> __l)
      ^
1 error generated. 
```

我不清楚为什么它在没有 C++11 的情况下工作，而它却失败了。移动，注意线

```
vector< int >  q = b; // In the main function, line 19 
```

在 main 函数中不会导致错误。谁能解释为什么它不起作用，以及如何使它与 C++11 一起工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T21:37:19.167

这里没有编译器错误。您的代码在 C++11 中被破坏，因为 C++11 为赋值运算符添加了更多转换构造函数和更多重载。

当您创建一个可以转换为绝对任何东西的类型（使用模板化转换）时，这就是您所面临的风险。 `Foo`很高兴将自己转换`initializer_list<int>`为 a 和 a `vector<int>`。

原因是

```
vector<int> q = b; 
```

在 Clang 3.1 中工作，而

```
vector<int> q(b); 
```

失败，是第一个是*copy-initialization*，它需要*隐式*转换，`vector<int>`然后是复制构造函数调用，而第二个是*直接初始化*，它执行*显式*转换。隐式转换的候选集较小，因为标记的构造函数`explicit`被删除，从而解决了歧义。

Clang 3.0 和 3.1 之间的区别可能是库合规性修复，它将额外的构造函数标记为`explicit`，而不是对编译器行为的更改。

# php - 来自php文件的javascript调用函数！（使用 yii）

> ID：13055510
> 
> 赞同：-1
> 
> 时间：2012-10-24T18:33:21.707
> 
> 标签：php, javascript

我正在尝试从显示它的 php 页面调用 .js 文件中的函数！

我想做的是这样的：

.php 文件：

> ```
> ...
> function testFunc(){
>   return "2";
> }
> ... 
> ```

现在我想在 .js 文件中调用这个函数！

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T18:36:24.453

你试过什么？

假设`testFunc`函数包含在适当的脚本标签中，您的 .js 文件可以非常简单地调用它，如下所示：

```
testFunc() 
```

理想情况下，在`testFunc`声明之后包含 .js 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T18:36:35.200

PHP 运行服务器端。JavaScript（假设您在浏览器中使用它）运行客户端。如果你想从客户端执行这个 PHP 函数，并且在不重新加载页面的情况下得到结果，你必须做一个 ajax 请求，这可能超出你的技能。

查看 jQuery Ajax： [http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# apache - mod_rewrite 规则有问题

> ID：13055519
> 
> 赞同：0
> 
> 时间：2012-10-24T18:33:35.997
> 
> 标签：apache, mod-rewrite, url-rewriting, rewrite

我有一个复杂的重写场景，我可以使用一些专家的建议。我有一个目录“/directory”，其中包含一些文件。我想将对该目录中不存在的文件的请求重写到另一个也存在的目录，将原始目录保留在 URL 中并为无效路径返回 404。例子

这存在：

```
/directory/file.php 
```

这不存在：

```
/directory/subdirectory/anotherfile.php 
```

...但它确实存在于这里：

```
/another_directory/subdirectory/anotherfile.php 
```

所以我想

```
/directory/subdirectory/anotherfile.php to refer to /another_directory/subdirectory/anotherfile.php 
```

...但如果文件夹/文件在 /another_directory/ 中不存在，则规则应返回 404。

我尝试了各种组合，但它们要么不返回 404，要么重定向。这是我最近的尝试：

```
RewriteCond %{DOCUMENT_ROOT}/another_directory/$1 f [OR] 
RewriteCond %{DOCUMENT_ROOT}/another_directory/$1 d 
RewriteRule (.*) - [S=1]
RewriteRule ^directory/(.*)$ /another_directory/$1 [L, QSA] 
```

如果有助于解释为什么我有这种情况，/another_directory/ 充满了定期重新生成的静态文件，这些文件似乎与 /directory/ 中的现有文件位于同一目录中不想弄乱我的 serps 并希望将大量生成的文件与其他文件隔离开来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T00:59:44.700

这是我从你的解释中理解的：

```
/directory/subdirectory/anotherfile.php 
```

这应该重写为

```
/another_directory/subdirectory/anotherfile.php 
```

不管它是否存在。如果我是对的，这是你的答案，否则告诉我更多！

```
RewriteCond %{DOCUMENT_ROOT}/another_directory/$1 -f [OR] 
RewriteCond %{DOCUMENT_ROOT}/another_directory/$1 -d 
RewriteRule ^directory/(.*) another_directory/$1 [L,S=1]

RewriteCond %{REQUEST_FILENAME} -d [OR]
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule (.*)  - [L]
RewriteRule (.*)   404.php?uri=/$1&id=1 [L] 
```

# flash - 发布的 swf 不同于 fla 时间线预览

> ID：13055524
> 
> 赞同：0
> 
> 时间：2012-10-24T18:34:04.830
> 
> 标签：flash, export, publish

我尝试修改在 Flash CS4 或 CS5 中创建的现有 .fla 文件。我的目标是翻译一些文本。我在 Flash CS5.5 中打开文件没有问题。我也可以通过直接在图层中修改文本或在库电影中修改文本来更改文本。

当我通过单击时间轴中的“播放”按钮运行动画时，它看起来与我想要的完全一样。当我尝试将文件导出或发布到 SWF 时，大约一半的翻译仍然是原始单词。

在发布设置中，我删除了“包括隐藏层”选项，所以这应该不是问题。

我几乎没有以前的flash经验。这让我疯狂...

感谢您的任何提示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T08:51:04.377

对于其他有同样问题的人：虽然文本被标记为“静态”，但它被一些动作脚本代码以某种方式改变了。我删除了几乎所有的动作脚本代码（无论如何我都不需要），这解决了问题。

# matlab - Stateflow-Simulink 中的微波建模 - 如何将烹饪时间作为 simulink 的输入？

> ID：13055525
> 
> 赞同：0
> 
> 时间：2012-10-24T18:34:05.617
> 
> 标签：matlab, simulink, stateflow

我正在尝试在 MATLAB 的 stateflow 模块中对微波炉进行建模。我已经模拟了开关状态（可以打开/关闭微波炉）。在“开”状态下，我有“开门”、“关门”和“烹饪”等子状态。我已经正确设置了转换条件。我只是想知道是否可以将烹饪时间作为输入（来自 simulink）提供给这个 stateflow 微波模型；就像我们在真正的微波炉上按键盘一样。该时间将作为输入，状态流程图将保持在“烹饪”状态，直到该时间，输入时间将递减为零

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-09T22:39:24.870

您可以在构建状态流时使用变量`cook_time`，`states/transitions`它会自动检测它，然后您可以`Input from Simulink`在 GUI 中指定它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T21:34:35.140

您可以在此处的入门视频中找到有关如何将输入从 Simulink 传递到Stateflow 中的[状态机的示例：](http://www.mathworks.com/products/stateflow/)

[http://www.mathworks.com/products/stateflow/examples.html](http://www.mathworks.com/products/stateflow/examples.html)

# c - c中具有多维数组的指针

> ID：13055528
> 
> 赞同：0
> 
> 时间：2012-10-24T18:34:17.673
> 
> 标签：c, arrays, pointers, multidimensional-array

我有一个函数可以生成 0 到 2 之间的随机数，我想使用指针，但无论如何我无法执行它。首先我生成随机数，然后我想打印多维数组以查看它生成了什么我只想将随机数分配给数组（使用指针），然后再次使用指针打印它们

```
int **RandomizedMatrix; //integer multidimensional array        
int ***AdressOfMatrix =  &RandomizedMatrix; //assigning the adress of matrix to an integer pointer

void RandomizedMatrixGenerator(int LineNumber,int ColumnNumber,int ***AdressOfMatrix)
{            
    int i,j;
    for (i=0; i<LineNumber*ColumnNumber; i++)
    {
        **AdressOfMatrix = rand()%2;        
    }
    for (i=0; i<LineNumber; i++)
    {
        for (j=0; j<ColumnNumber; j++) 
        {                    
           printf("%d",***(AdressOfMatrix+i)+j);
        }
        printf("\n");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T19:11:41.483

好的，所以你想分配随机数，你需要两个`for()`循环：

```
for (i=0; i<LineNumber*ColumnNumber; i++)
{
     **AdressOfMatrix = rand()%2;
} 
```

所有这些要做的就是`LineNumber*ColumnNumber`为矩阵的第一个元素分配一个数字的次数。如果你想这样做，你需要在分配时增加行和列。

此外，您的“随机”数字不会是随机的，因为您没有播种。这是您想要执行的操作的示例：

```
 srand((unsigned) time(NULL));  // Seed the random number generator

  for(row = 0; row<LineNumber; row++){
     for(col = 0; col<ColumnNumber; col++){
        ran = rand()%100;           // Generate a randome numer 1-99
        *(*(matrix+row)+col) = ran; // assign a random number to the element
     }
  }

  for(row = 0; row<LineNumber; row++) {
      for(col = 0; col<ColumnNumber; col++){
         printf("[%d]", *(*(matrix+row)+col));  //Display the random number
      }
      printf("\n");
  } 
```

所以给定一个 4x3 矩阵，你可以得到如下输出：

```
[99][33][38]
[59][2][28]
[50][39][2]
[85][45][99] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T19:22:35.380

如果我的理解是正确的，你想用 1 和 0 填充你的二维数组，这样你就可以做到这一点

```
 void randmtrgen(int row,int column,int **mtr){
    int i,j;
    for (i=0;i<row;i++){
        for (j=0;j<column;j++){
            mtr[row][column]=rand()%1+1;
            }
        }
    } 
```

这将按照您的意愿填充您的矩阵，如果您不擅长方括号，我建议您不要使用解引用运算符。如果您有使用解引用运算符的冲动，您可以使用该行

```
 *(*(mtr+row)+column)=rand()%1+1; 
```

# image-processing - 图像处理专用集成电路

> ID：13055529
> 
> 赞同：0
> 
> 时间：2012-10-24T18:34:19.183
> 
> 标签：image-processing, computer-vision, asic

一台摄像机安装在黑板的对面，黑板上用粉笔粗略地画了几个同心圆。圆圈不理想，相机也不太稳定。摄像机具有 CVBS（复合）输出。

我需要制作一个特定于任务的硬件，它可以从相机中获取快照，计算圆的直径，并将它们输出到一个简单的 LED 显示屏上。

所以我必须：1）捕捉图像；2）应用一些算法来改善图像（如细化等）；3）识别和测量圆圈。

由于我对这个领域完全陌生，我将不胜感激任何输入：如何设计这种电路的示意图描述，google-around的关键字，示例，可以重复使用的现有解决方案 - 我将不胜*感激*指针。

PS不，这不是家庭作业:)。只是想一个想法并试图估计它的复杂性。

# json - 淘汰 js 映射嵌套的可观察数组

> ID：13055535
> 
> 赞同：0
> 
> 时间：2012-10-24T18:34:49.723
> 
> 标签：json, knockout.js, knockout-mapping-plugin

鉴于此 json 结构：

```
{
    "categoryID" : 1,
    "categoryName" : "Stupid Questions",
    "questions" : [{
            "question" : [{
                    "questionOptions" : [{
                            "questionOptionID" : 1,
                            "optionText" : "It's top secret."
                        }, {
                            "questionOptionID" : 2,
                            "optionText" : "Because I am big and your small. I am right and your wrong."
                        }, {
                            "questionOptionID" : 3,
                            "optionText" : "I will gladly pay you Tuesday for a hamburger today."
                        },
                    ],
                    "questionType" : "checkbox",
                    "questionText" : "Why can't we use more abstract table and column names?",
                    "summary" : "Question of the year"
                }
            ]
        }
    ]
} 
```

我想将问题和 questionOptions 都映射到模板和模板选项：

```
{
    "categoryID" : 1,
    "categoryName" : "Stupid Questions",
    "templates" : [{
            "template" : [{
                    "templateOptions" : [{
                            "templateOptionID" : 1,
                            "optionText" : "It is top secret."
                        }, {
                            "QuestionOptionID" : 2,
                            "OptionText" : "Because we are lazy."
                        }, {
                            "QuestionOptionID" : 3,
                            "OptionText" : "I will gladly pay you Tuesday for a hamburger today."
                        },
                    ],
                    "QuestionType" : "checkbox",
                    "QuestionText" : "Why can't we use more abstract table and column names?",
                    "Summary" : "Question of the year"
                }
            ]
        }
    ]
} 
```

这是我的淘汰赛映射对象的开始：

```
var templateMapping = {
  'templates': {
      templates: function(data) {
          return ko.utils.unwrapObservable(data.questions);
      }
  }
  //how do I map observable array of question options to observable  array of template options here?
}; 
```

此映射的关键是子对象具有不同的结构（与此问题不同 - [https://stackoverflow.com/a/7535397/466321](https://stackoverflow.com/a/7535397/466321)）。似乎我发现的所有映射示例都没有涵盖如何完成，而且我尝试了自己的几个理论都没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:58:34.697

@Jeff Mercado 是对的。映射器不适用于此。要完成您的意图，它需要一些递归 javascript。

```
function myTransform(string) {
    // case-insensitive replace
    return string.replace(/question/i,'template');
}

function transformObject(source) {
    var result = {}
    for( var key in source ) {
        if( !source.hasOwnProperty(key) ) continue;
        var value = source[key];
        var newKey = myTransform(key);
        if( Object.prototype.toString.call(value) == "[object Array]" ) {
            result[newKey] = [];
            for( var i in value ) {
                if( !value.hasOwnProperty(i) ) continue;
                result[newKey][i] = transformObject(value[i]);
            }
        }
        else if( Object.prototype.toString.call(value) == "[object Object]" ) {
            result[newKey] = transformObject(value);
        }
        else {
            result[newKey] = value;
        }
    }
    return result;
}

var wow = transformObject(json); 
```

看到这个[小提琴](http://jsfiddle.net/ZDghB/)

# datatables - 使用流星订阅 onReady 函数，然后观察重复数据的结果

> ID：13055536
> 
> 赞同：3
> 
> 时间：2012-10-24T18:34:49.447
> 
> 标签：数据, 流星, datatables, meteor, publish-subscribe

我在客户端使用[数据](/questions/tagged/datatables "显示标记为“数据表”的问题")表来快速实时排序/过滤大约 10,000 行数据。在创建表期间向 DataTable 提供行数组比单独添加行要快得多。我可以在订阅中使用[onReady 函数](http://docs.meteor.com/#meteor_subscribe)来实现这一点。如果我然后调用[观察](http://docs.meteor.com/#observe)来获取更改，我会再次获得已经提供的数据`subscribe`。

虽然我可以解决这个问题，但我认为我只是没有正确使用[流星](/questions/tagged/meteor "显示标记为“流星”的问题")并感谢任何建议。

这是一些示例代码：

```
Meteor.subscribe("books", function(){
    // Runs when subscription is complete
    var mData = Books.find().fetch();

    MyTable = $('#testTable').dataTable( {
        'aoColumns': [
            { sTitle: 'title', sClass: 'alignRight', mDataProp: 'title'},
        ],
        'aaData' : mData
    });
    // Add any new books.
    Books.find().observe({added: function(item){
        // ERR: Adds the books already fetched into mData as well as any new books.
        MyTable.fnAddData([item]);
    }});
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T05:34:25.487

`observe`( )有一个隐藏选项`{_suppress_initial: true}`可以避免这种行为。我不确定使用它是否是一个好主意，但它就在那里。

至于如何构建代码的建议；这并不像应该的那么容易，但我认为您想要以下内容：

1.  将您的表格包裹在一个`{{#constant}}`助手中，这样它就不会被重新渲染。

2.  确保在数据准备好之前不会一次性渲染表格（这可能会有所帮助：[https ://github.com/oortcloud/unofficial-meteor-faq#how-do-i-know-当我的订阅准备好但尚未加载时](https://github.com/oortcloud/unofficial-meteor-faq#how-do-i-know-when-my-subscription-is-ready-and-not-still-loading)）

3.  在表格的`Template.table.rendered`回调中执行上面的代码。

这种方法似乎更加模块化。

# jquery - 更改按钮的 InnerHtml 会丢失样式 Jquery Mobile

> ID：13055539
> 
> 赞同：0
> 
> 时间：2012-10-24T18:34:56.503
> 
> 标签：jquery, jquery-mobile

我有一个函数，我调用一个名为“toggleCollapse”的按钮 onclick 事件。单击时，我想将按钮的 innet 文本从“折叠”更改为“展开”。下面的代码做到了这一点，但在此过程中也丢失了按钮的所有 jquery 移动样式。如何在不重新加载整个页面的情况下刷新按钮的样式，我只想刷新按钮的样式。

```
<a data-role="button" data-mini="true" data-icon="grid" iconpos="right" onclick="toggleCollapse()">Collapse</a>

function toggleCollapse() {
    var a = $("#collapse_value")
                .attr("value");
    var b;
    if (a == "false") {

        $("#btnCollapse").html("Expand");

        b = true
    } else {

        $("#btnCollapse").html("Collapse");

    }

    $('#btnCollapse').button();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T19:36:55.870

既然要“将按钮的 innet 文本从单击时更改`Collapse`为`Expand`”，为什么不使用`.text()`函数而不是`.html()`函数。

该`.html()`函数映射到该`innerHTML`属性。

该`.text()`函数映射到该`innerText`属性。

```
function toggleCollapse() {
    var a = !! $('#collapse_value').val(); //use !! to convert value to a boolean
    $('#btnCollapse').text(a ? 'Expand' : 'Collapse');
} 
```

这应该替换按钮的文本标签而不影响样式，但是您可能希望使用`.button()`更改按钮标签的方法（因为您似乎正在使用 jQuery UI 按钮）。这是一个例子：

```
function toggleCollapse() {
    var a = !! $('#collapse_value').val(); //use !! to convert value to a boolean
    $('#btnCollapse').button('option', 'label', a ? 'Expand' : 'Collapse');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T19:33:56.207

我建议避免内联 onClick 调用，因为如果您需要跨多个页面/按钮更改它可能会造成管理麻烦。相反，只需将一个类应用于按钮/a href。

```
<a data-role="button" data-mini="true" data-icon="grid" iconpos="right" class="toggleCollapse btn">Collapse</a>

(function(){

  $('.toggleCollapse').on('click', function(e){
      e.preventDefault();
      $(this).text( ($(this).text() == 'Collapse') ? 'Expand' : 'Collapse' );
  });

$('.btn').button();

})()​;​ 
```

可以在[jsFiddle 示例中找到一个工作示例](http://jsfiddle.net/n3LhC/4/)

# background - 带有渐变颜色的 CSS 背景样式

> ID：13055542
> 
> 赞同：0
> 
> 时间：2012-10-24T18:35:02.560
> 
> 标签：background, background-color, css

有人知道如何使用 CSS 属性为背景制作渐变色吗？如果无法使用 css 执行此操作，除了放置图像之外还有其他方法吗？

提前致谢！

见下图：![在此处输入图像描述](../Images/ac05ae9b17b94785a6f4a5f3b9d6a7ac.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:36:31.993

有一些很好的工具可以帮助您获得最兼容的代码：

[http://www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)

# objective-c - NSNumberFormatter 停止缩短数字

> ID：13055543
> 
> 赞同：1
> 
> 时间：2012-10-24T18:35:04.667
> 
> 标签：objective-c, ios, nsnumberformatter

**编辑：已修复，这是我如何做以供将来参考：**

```
NSNumber *inputNumber = [[NSNumber alloc ]initWithDouble:convertValue];
NSNumber *resultNumber = [[NSNumber alloc]initWithDouble:result];

NSNumberFormatter *formatterResult = [[NSNumberFormatter alloc] init];
formatterResult.numberStyle = NSNumberFormatterDecimalStyle;
NSNumberFormatter *formatterInput = [[NSNumberFormatter alloc] init];
formatterInput.numberStyle = NSNumberFormatterDecimalStyle;

[formatterResult setNumberStyle:NSNumberFormatterDecimalStyle];
[formatterResult setMaximumFractionDigits:6];

[formatterInput setNumberStyle:NSNumberFormatterDecimalStyle];
[formatterInput setMaximumFractionDigits:6];
//These four lines are the one fixing the issue. 

NSString *formattedResultString = [formatterResult stringFromNumber:(NSNumber*)resultNumber];
NSString *formattedInputString = [formatterInput stringFromNumber:(NSNumber*)inputNumber];

NSString *formelString = [[NSString alloc]initWithFormat:
                          @" %@ %@ =", formattedInputString, convertFromName];

formelLabel.text = formelString;

NSString *resultString = [[NSString alloc]initWithFormat:
                          @" %@ %@",formattedResultString, convertToName];

resultLabel.text = resultString; 
```

----------原始问题------------

所以我有一个 NSNumberFormatter 缩短数字太多的问题，当主要数字超过 8 位时也不显示小数。

下图描述的问题：

![在此处输入图像描述](../Images/9a0e1818dc2d51c0c03f8f5e2c7fb228.png)<- 工作，但缩短到小数点后三位。（四舍五入，这在数学上是正确的）

然后是问题：（最右边的图片是正确的）

![在此处输入图像描述](../Images/66818082c522c425b736eca7ee8cdf0b.png) ![在此处输入图像描述](../Images/115ec59ee8a53a19749f1cf2be2a3247.png) ![在此处输入图像描述](../Images/c566a38ce3baf5a3c8294d09c793a2af.png)

如您所见，底部图像完全忽略了小数。我需要添加/更改什么代码才能正常工作？

以下是相关代码：

```
[super viewDidLoad];

    _convertFrom = @[@"MTPA", @"MMcf/day",
    @"Mill.Sm3/day", @"MMBTU/day", @"Boe/day",@"ton LNG/day", @"GJ/day"];

    _convertTo = @[@"MTPA", @"MMcf/day",
    @"Mill.Sm3/day", @"MMBTU/day", @"Boe/day", @"ton LNG/day", @"GJ/day"];

    _convertRates = @[ @1.0f, @133.3333333f, @3.775579545f,
    @137333.3333f, @23747.68013, @1716.17252, @147247.6022];
//some place down in the code:
-(void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component

{

[self updateConversionLabel]; 
}

- (void)updateConversionLabel
{
float convertFrom = [[_convertRates objectAtIndex:[picker selectedRowInComponent:0]] floatValue];

float convertTo = [[_convertRates objectAtIndex:[picker selectedRowInComponent:1]] floatValue];

NSNumberFormatter *fmt = [NSNumberFormatter new];
float input = [fmt numberFromString:inputText.text].floatValue;

float to = convertTo;
float from = convertFrom;

float convertValue = input;
float relative = to / from;
float result = relative * convertValue;

NSString *convertFromName = [_convertFrom objectAtIndex:[picker selectedRowInComponent:0]];
NSString *convertToName = [_convertFrom objectAtIndex:[picker selectedRowInComponent:1]];

NSNumber *inputNumber = [[NSNumber alloc ]initWithFloat:convertValue];
NSNumber *resultNumber = [[NSNumber alloc]initWithFloat:result];

NSNumberFormatter *formatterResult = [[NSNumberFormatter alloc] init];
formatterResult.numberStyle = NSNumberFormatterDecimalStyle;
NSNumberFormatter *formatterInput = [[NSNumberFormatter alloc] init];
formatterInput.numberStyle = NSNumberFormatterDecimalStyle;

NSString *formattedResultString = [formatterResult stringFromNumber:(NSNumber*)resultNumber];
NSString *formattedInputString = [formatterInput stringFromNumber:(NSNumber*)inputNumber];

NSString *formelString = [[NSString alloc]initWithFormat:
                          @" %@ %@ =", formattedInputString, convertFromName];

formelLabel.text = formelString;

NSString *resultString = [[NSString alloc]initWithFormat:
                          @" %@ %@",formattedResultString, convertToName];
                          resultLabel.text = resultString;

} 
```

我假设问题/修复在此代码中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T18:22:28.173

编辑：已修复，这是我如何做以供将来参考：

```
NSNumber *inputNumber = [[NSNumber alloc ]initWithDouble:convertValue];
NSNumber *resultNumber = [[NSNumber alloc]initWithDouble:result];

NSNumberFormatter *formatterResult = [[NSNumberFormatter alloc] init];
formatterResult.numberStyle = NSNumberFormatterDecimalStyle;
NSNumberFormatter *formatterInput = [[NSNumberFormatter alloc] init];
formatterInput.numberStyle = NSNumberFormatterDecimalStyle;

[formatterResult setNumberStyle:NSNumberFormatterDecimalStyle];
[formatterResult setMaximumFractionDigits:6];

[formatterInput setNumberStyle:NSNumberFormatterDecimalStyle];
[formatterInput setMaximumFractionDigits:6];
//These four lines are the one fixing the issue. 

NSString *formattedResultString = [formatterResult stringFromNumber:    (NSNumber*)resultNumber];
NSString *formattedInputString = [formatterInput stringFromNumber:(NSNumber*)inputNumber];

NSString *formelString = [[NSString alloc]initWithFormat:
                      @" %@ %@ =", formattedInputString, convertFromName];

formelLabel.text = formelString;

NSString *resultString = [[NSString alloc]initWithFormat:
                      @" %@ %@",formattedResultString, convertToName];
resultLabel.text = resultString; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T19:00:33.183

真正的算术是精确的。任何计算机算术都有有限的范围——可以表示多少位；在分数不准确的情况下，由于我们人类使用小数派系和计算机使用二进制分数。

在您使用的代码中，`float`它是一个 32 位二进制浮点数，精度约为 6 位十进制数字，范围大致从 10^-38 到 10^38。您的号码最多为 9 位数字。

尝试使用`double`thoughtout（`doubleValue`等等），它是一个 64 位二进制浮点，精度约为 15 个十进制数字。您可能仍然会发现数字并不如您所愿，为此您需要更多地研究如何格式化数字，但您应该获得您所追求的精度。

如果您需要更高的精度和十进制浮点数，请查看[NSDecimalNumber](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDecimalNumber_Class/Reference/Reference.html)。

有关详细信息，请参阅[32 位浮点](http://en.wikipedia.org/wiki/Single-precision_floating-point_format)和[64 位浮点](http://en.wikipedia.org/wiki/Double-precision_floating-point_format)。

# android - Android：无法在主线程上执行网络操作

> ID：13055552
> 
> 赞同：1
> 
> 时间：2012-10-24T18:35:35.377
> 
> 标签：android

> **可能重复：**
> [android.os.NetworkOnMainThreadException](https://stackoverflow.com/questions/6343166/android-os-networkonmainthreadexception)

我正在尝试为 android 构建一个 RSS 阅读器。这是我的代码。我收到错误消息说无法在线程上执行网络操作。

```
URL url = null;
try {
url = new URL((data.get(position).getThumbnail()));
} catch (MalformedURLException e) {
// TODO Auto-generated catch block
e.printStackTrace();
}
InputStream content = null;
try {
content = (InputStream)url.getContent();
} catch (IOException e) {
// TODO Auto-generated catch block
e.printStackTrace();
}
Drawable d = Drawable.createFromStream(content , "src"); 
Bitmap mIcon1 = null;
try {
mIcon1 =
BitmapFactory.decodeStream(url.openConnection().getInputStream());
} catch (IOException e) {
e.printStackTrace();
} 
```

详细信息：API 是 16 我正在使用 XP pro ，SP3。安卓操作系统：果冻豆

这是我的 logcat 错误： [http://pastebin.com/9wyVpNHV](http://pastebin.com/9wyVpNHV)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T18:38:13.403

正确的。从 Android 4.0（或者可能是 4.1）开始，如果您在主应用程序线程上执行网络 I/O，您将​​自动失败。请将上面的代码移动到后台线程，例如`AsyncTask`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T18:54:10.053

使用线程和处理程序在 UI 线程和其他线程之间轻松交换数据

```
//Handler to send commands to UI thread
    Handler handler = new Handler();

    Thread th = new Thread(new Runnable() {
        public void run() {

            URL url = null; 
            InputStream content = null;
            try { 
                url = new URL((data.get(position).getThumbnail())); 

                content = (InputStream)url.getContent();
                Drawable d = Drawable.createFromStream(content , "src");  
                final Bitmap mIcon1 = BitmapFactory.decodeStream(url.openConnection().getInputStream());; 

                handler.post(new Runnable() {

                    public void run() {
                        //here you can do everything in UI thread, like put the icon in a imageVew
                    }
                });

            } catch (Exception e) { 
                e.printStackTrace();
                handler.post(new Runnable() {

                    public void run() {
                        Toast.makeText(YourActivityName.this, e.getMessage(), Toast.LENGTH_LONG);
                    }
                });
            } 

        }
    });
    th.start(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T18:53:31.253

如前所述，最新的 API 网络操作应该在单独的线程中完成，否则它们会引发异常。以下是开发者网站上的一些示例：

[在单独的线程上执行网络操作](http://developer.android.com/training/basics/network-ops/connecting.html#AsyncTask)

# eclipse - eclipse 项目的 hgignore

> ID：13055557
> 
> 赞同：1
> 
> 时间：2012-10-24T18:35:48.510
> 
> 标签：eclipse, version-control, mercurial

我想通过版本控制（在我的情况下是 mercurial）与几个人共享一个 eclipse 项目。你能告诉我应该将哪些文件添加到 hgignore 文件中吗？

`.settings`文件夹`.classpath`和`.project`文件呢？还有什么需要注意的吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T18:44:07.373

是的，您只需要添加这三个文件/目录：.settings、.classpath 和 .project

此外，您需要将生成 .class 文件的目录包含到 hgignore-file 中。

# jsf - 试图让 JSF(Faces) 在 Spring WebFlow 中工作

> ID：13055558
> 
> 赞同：1
> 
> 时间：2012-10-24T18:35:51.430
> 
> 标签：jsf, spring-mvc, jsf-2, spring-webflow

我一直在尝试将一些 JSF(Face) 代码添加到我的 Spring Webflow 项目中，但出现以下错误：

```
java.lang.IllegalStateException: FacesContext has not been initialized within the current Web Flow request. Check the configuration for your <webflow:flow-executor>. For JSF you will need FlowFacesContextLifecycleListener configured as one of its flow execution listeners. 
```

这是我的 flow.xml 文件

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:webflow="http://www.springframework.org/schema/webflow-config"
    xmlns:faces="http://www.springframework.org/schema/faces"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/webflow-config
        http://www.springframework.org/schema/webflow-config/spring-webflow-config-2.3.xsd
        http://www.springframework.org/schema/faces
        http://www.springframework.org/schema/faces/spring-faces-2.2.xsd">

    <!-- Executes flows: the central entry point into the Spring Web Flow system -->
    <webflow:flow-executor id="flowExecutor">
        <webflow:flow-execution-listeners>
            <webflow:listener ref="facesContextListener"/>
        </webflow:flow-execution-listeners>
    </webflow:flow-executor>

    <!-- The registry of executable flow definitions -->
    <webflow:flow-registry id="flowRegistry" flow-builder-services="flowBuilderServices" base-path="/WEB-INF">
        <webflow:flow-location-pattern value="**/*-flow.xml" />
    </webflow:flow-registry>

    <!-- Configures the Spring Web Flow JSF integration -->
    <faces:flow-builder-services id="flowBuilderServices" />

    <!-- A listener maintain one FacesContext instance per Web Flow request. -->
    <bean id="facesContextListener" 
        class="org.springframework.faces.webflow.FlowFacesContextLifecycleListener" />  

</beans> 
```

这是我的流程：

```
<flow xmlns="http://www.springframework.org/schema/webflow"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/webflow
                          http://www.springframework.org/schema/webflow/spring-webflow-2.0.xsd">

    <var name="customer" class="org.smith.webflowtemplate.domain.Customer"/>

    <view-state id="checkbox-input" model="customer" >
            <transition on="submit" to="preview" validate="false"/>
            <transition on="cancel" to="thanks" validate="false"/>
    </view-state>

    <view-state id="preview"  model="customer">
                <transition on="accept" to="endState"/>
     </view-state>

    <end-state id="endState" view="/index.jsp"  />

</flow> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T19:15:29.263

您需要像这样添加 Faces Context 侦听器：

```
<flow-executor id="flowExecutor">
        <flow-execution-listeners>
            <listener ref="facesContextListener" />
        </flow-execution-listeners>
</flow-executor>

<beans:bean id="facesContextListener" class="org.springframework.faces.webflow.FlowFacesContextLifecycleListener" /> 
```

# regex - 如何匹配有或没有给定字母

> ID：13055560
> 
> 赞同：1
> 
> 时间：2012-10-24T18:35:58.710
> 
> 标签：regex

我正在尝试匹配一个字符串，`'r"abc"'`或者`'"abc"'`我想我会这样做`'[r|.]"[\w]+"'`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T18:37:45.017

用于`?`表示可选。

```
'r?"\\w+"' 
```

示例用法：

```
>>> re.match('r?"\\w+"', 'r"abc"')
<_sre.SRE_Match object at 0x0000000002A57440>
>>> re.match('r?"\\w+"', '"abc"')
<_sre.SRE_Match object at 0x00000000029FDAC0> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T18:37:37.783

```
'r?"\w+"' 
```

应该这样做，您可以选择匹配`r`前缀。也不需要围绕 a 的方括号`\w`：它是单个字符！

# javascript - 支持冻结列和动态数据的免费 jQuery Grid

> ID：13055562
> 
> 赞同：0
> 
> 时间：2012-10-24T18:36:04.013
> 
> 标签：javascript, jquery, extjs, dojo

我检查了一些支持像 jqGrid 这样的冻结列的 jQuery Grid。但我想要任何易于使用的 jQuery 或任何其他 Javascript 库 Grid 插件（如 Dojo 等），并具有以下支持：

1.  自由的
2.  能够动态添加列。
3.  与 ASP.NET 的良好集成。
4.  冻结列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T18:39:24.257

我们将[DataTables](http://www.datatables.net)与 ASP.NET 一起使用……可能比我们应该使用的更多，因为它太容易使用了。它工作得很好，并且确实支持带有插件的冻结列。我还没有找到我喜欢的任何 JS 表格插件。

# actionscript-3 - 从 Flash 中确定自己的 Flash 元素的 id 属性

> ID：13055565
> 
> 赞同：6
> 
> 时间：2012-10-24T18:36:21.917
> 
> 标签：actionscript-3, flash

我有一个使用 SWFObject 2.0 嵌入在网页中的 ActionScript 3 编写的 Flash 应用程序。加载后，Flash 应用程序将在带有属性的`<object>`or标记中运行。`<embed>``id`

如何`id`从 Flash 应用程序内部确定元素的属性值？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T20:08:21.330

您可以使用[类](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html#objectID)[的`objectID`属性`flash.external.ExternalInterface`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html#objectID)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T20:02:11.500

您可以使用 SWFObject 将 var 传递到 flash 中，以便在加载时告诉它 ID 是什么。

```
swfobject.embedSWF('application.swf', '100%', '100%', null, {'id': '_id_goes_here_'}, null); 
```

# html - 三个 12 列网格并排使用 twitter bootstrap

> ID：13055569
> 
> 赞同：0
> 
> 时间：2012-10-24T18:36:41.830
> 
> 标签：html, css, twitter-bootstrap

我正在使用引导程序创建一个个人网站，我想创建这个特定的布局：

[![](../Images/6870873464ca3bf9dc869986f619db19.png)](https://imgur.com/kDsFi)

每个部分都是 940 像素宽，有 12 列，所以当屏幕查看 3 个部分中的 1 个时，其他 2 个被隐藏，我该如何执行？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T19:24:42.797

给定默认的 12 列引导网格，使用以下标记：

```
<div class="container supercontainer">
    <div class="supercontainer-inner clearfix view-1">
        <div class="container"><div class="row"><div class="span12"><p>Grid 1</p></div></div></div>
        <div class="container"><div class="row"><div class="span12"><p>Grid 2</p></div></div></div>
        <div class="container"><div class="row"><div class="span12"><p>Grid 3</p></div></div></div>
    </div>
</div> 
```

这个CSS：

```
.supercontainer {
    overflow-x: hidden;
}
.supercontainer-inner {
    width: 2820px;
  -webkit-transition: margin-left 0.35s ease;
     -moz-transition: margin-left 0.35s ease;
       -o-transition: margin-left 0.35s ease;
          transition: margin-left 0.35s ease;
}
.supercontainer-inner > .container {
    float: left!important;
}

.supercontainer-inner.view-1 { margin-left: 0; }
.supercontainer-inner.view-2 { margin-left: -940px; }
.supercontainer-inner.view-3 { margin-left: -1880px; } 
```

请记住，使用轮播样式表可以获得更好的效果。

检查[演示（jsfiddle）](http://jsfiddle.net/Sherbrow/8CQtU/2/embedded/result/)，查看一个可能的应用程序来切换*视图*。

* * *

这是[jsfiddle 上的](http://jsfiddle.net/Sherbrow/8CQtU/3/embedded/result/)**响应**式版本。

但这需要对 LESS 脚本进行一些清理，并带有一个用于查看数量的变量（并且可能只是扩展基本网格..哼哼）。

```
@media (min-width: 1200px) {
    .supercontainer-inner.view-1 { margin-left: 0; }
    .supercontainer-inner.view-2 { margin-left: -1170px; }
    .supercontainer-inner.view-3 { margin-left: -2340px; }
    .supercontainer-inner {
        width: 3510px;
    }
}
@media (max-width: 979px) {
    .supercontainer-inner.view-1 { margin-left: 0; }
    .supercontainer-inner.view-2 { margin-left: -724px; }
    .supercontainer-inner.view-3 { margin-left: -1448px; }
    .supercontainer-inner {
        width: 2172px;
    }
}
@media (max-width: 767px) {
    .supercontainer-inner.view-1 { margin-left: 0; }
    .supercontainer-inner.view-2 { margin-left: -100%; }
    .supercontainer-inner.view-3 { margin-left: -200%; }
    .supercontainer-inner {
        width: 300%;
    }
    .supercontainer-inner >.container { width: 33.33%!important; }
} 
```

# javascript - 创建正则表达式来隔离标签？

> ID：13055571
> 
> 赞同：0
> 
> 时间：2012-10-24T18:36:48.537
> 
> 标签：javascript, tags

我怎么能做到这样的事情？

```
example_input = "hi, this is example #input, it has a few #different things going #on. #question"

output ===> [input, different, on, question] 
```

这是我到目前为止所拥有的：

```
text.match(/\#.+?\s+/g) 
```

当后面跟着空白时，我已经能够进入隔离状态，但我不确定如何适应`,` `' '` `.`或`string end / new line`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:41:51.913

```
/#\w+\b/g 
```

\b 用于边界字符

对于空格、逗号和字符串结尾，请使用 '\s'、',' 和 '$'

```
/#\w+(\s?|.|$)/g 
```

这是您可以使用的特殊字符列表（在特殊字符下阅读）：

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T18:46:38.367

这将从 # 开始匹配，直到找到空格或标点符号。

```
/#[^\s\p{P}]+/ 
```

# eclipse-plugin - Eclipse 插件项目能否引用来自 Eclipse PyDev 项目代码的基于 Jython 的 Java 类？

> ID：13055573
> 
> 赞同：1
> 
> 时间：2012-10-24T18:36:55.527
> 
> 标签：eclipse-plugin, jython, pydev

下面解释了我尝试制作混合 PyDev/Eclipse 插件项目的尝试。从那以后我发现，即使我创建了一个单独的 PyDev 项目，我也无法通过在插件项目中引用该项目来使用我的基于 PyDev Jython 的 Java 类。另一方面，我可以在不是插件项目的单独项目中使用 PyDev Java 类。

我有一个 Eclipse 插件，我也将它设置为 PyDev 项目。我基于[Jython Book v1.0 文档第 10](http://www.jython.org/jythonbook/en/1.0/JythonAndJavaIntegration.html)章和[第 11](http://www.jython.org/jythonbook/en/1.0/JythonIDE.html)章构建了它。

当我如下所示运行 Main 时，我看到

> 1 BUIDING-A 100 MAIN ST

当我尝试在设置为 PyDev 项目的插件项目中执行相同操作时（右键单击项目-> Pydev-> 设置为 Pydev 项目），我收到 ImportError：没有名为 Building 的模块。似乎该项目的插件性质胜过该项目的 PyDev 性质。

有任何想法吗？

我把 Main 函数放在下面，后面跟着一些支持代码。

```
package org.jython.book;
import java.io.IOException;
import java.util.logging.Level;
import java.util.logging.Logger;
import org.jython.book.interfaces.BuildingType;
import org.jython.book.util.JythonObjectFactory;

public class Main {

    public static void main(String[] args) {

    // Obtain an instance of the object factory
    JythonObjectFactory factory = JythonObjectFactory.getInstance();

    // Call the createObject() method on the object factory by
    // passing the Java interface and the name of the Jython module
    // in String format. The returning object is casted to the the same
    // type as the Java interface and stored into a variable.
    BuildingType building = (BuildingType) factory.createObject(
        BuildingType.class, "Building");
    // Populate the object with values using the setter methods
    building.setBuildingName("BUIDING-A");
    building.setBuildingAddress("100 MAIN ST.");
    building.setBuildingId(1);
    System.out.println(building.getBuildingId() + " " + building.getBuildingName() + " " +
        building.getBuildingAddress());

    }

} 
```

这是 JythonObjectFactory，它应该与 [Jython Book v1.0 文档第 10 章][3] 中的内容完全一样，当然，更正了拼写错误:-)

```
package mypackage.files.util;
import java.util.logging.Level;
import java.util.logging.Logger;
import org.python.core.PyObject;
import org.python.util.PythonInterpreter;

/**
 * Object factory implementation that is defined
 * in a generic fashion.
 *
 */

public class JythonObjectFactory {
    private static JythonObjectFactory instance = null;
    private static PyObject pyObject = null;

    protected JythonObjectFactory() {

    }
    /**
     * Create a singleton object. Only allow one instance to be created
     */
    public static JythonObjectFactory getInstance(){
        if(instance == null){
            instance = new JythonObjectFactory();
        }

        return instance;
    }

    /**
     * The createObject() method is responsible for the actual creation of the
     * Jython object into Java bytecode.
     */
    public static Object createObject(Object interfaceType, String moduleName){
        Object javaInt = null;
        // Create a PythonInterpreter object and import our Jython module
        // to obtain a reference.
        PythonInterpreter interpreter = new PythonInterpreter();
        interpreter.exec("from " + moduleName + " import " + moduleName);

        pyObject = interpreter.get(moduleName);

        try {
            // Create a new object reference of the Jython module and
            // store into PyObject.
            PyObject newObj = pyObject.__call__();
            // Call __tojava__ method on the new object along with the interface name
            // to create the java bytecode
            javaInt = newObj.__tojava__(Class.forName(interfaceType.toString().substring(
                        interfaceType.toString().indexOf(" ")+1,
                        interfaceType.toString().length())));
        } catch (ClassNotFoundException ex) {
            Logger.getLogger(JythonObjectFactory.class.getName()).log(Level.SEVERE, null, ex);
        }

        return javaInt;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:25:05.707

如果您向项目中添加了多种性质，则与这些项目相关的*所有*构建器都将由 Eclipse 调用。因此，如果构建失败并显示一些与 PyDev 相关的错误消息，这确实表明 PyDev 部分存在问题，而不是 PDE 问题。也许您缺少该项目的一些其他文件或项目设置？

一般来说，您应该避免在一个项目中混合多种性质。这通常会导致麻烦，因为大多数构建器和其他扩展都希望它们是“唯一的”修补项目。几乎所有涉及多种性质的用例都可以通过拥有两个不同的项目来更容易地解决，其中一个项目*引用*另一个项目（然后可以访问该引用项目的资源）。请参阅*项目属性 -> 参考项目*。

# javascript - DOJO 设置按钮激活状态在 if 语句中不起作用

> ID：13055577
> 
> 赞同：0
> 
> 时间：2012-10-24T18:37:11.063
> 
> 标签：javascript, dojo

我有一个在按下按钮时调用的函数，它接受一个枚举作为参数来确定按下了什么按钮。我想设置设置为 true 的按钮的 active 属性，但是当我在 if 语句中执行此操作时它不起作用。以下作品：

```
function buttonPressed(whichButton) {
            dijit.byId("myButton").set("active", true);

            // Other code here
        } 
```

但是，当我将 .set 函数放在 if 语句中时，按钮实际上并没有改变状态，并且当我按下它时看起来是一样的。

这不起作用：

```
function buttonPressed(whichButton) {

            if(whichButton == 2) 
                dijit.byId("myButton").set("active", true); //Button does not look visually different

            // Other code here
        } 
```

我认为这可能是一个超出范围的问题，但我尝试在 if 语句之外声明和定义小部件，但这没有效果。

有人见过这个吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:44:50.520

如果这是您的实际代码，那么您的问题可能就在这里：

```
 if(whichButton = 2) 
```

你在这里分配，而不是你应该这样做：

```
 if(whichButton === 2) 
```

并确保您传递的参数实际上是一个数字。

# css - 有人可以解释为什么“nth-child”选择器的优先级高于“悬停”吗？

> ID：13055578
> 
> 赞同：6
> 
> 时间：2012-10-24T18:37:12.000
> 
> 标签：css, css-selectors

昨天我遇到了这个问题：我的一个`:hover`状态停止工作。我发现如果我改变这个：

```
div.item {}
div.item:hover {}
div.item:nth-child(even) {} 
```

对此：

```
div.item {}
div.item:nth-child(even) {}
div.item:hover {} 
```

它再次起作用。

我[在 jsfiddle 上创建了一个演示](http://jsfiddle.net/YLLLh/)来展示这两种情况。

有人可以解释一下，为什么`:hover`选择器会覆盖 -state 吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-24T18:44:09.537

选择器具有相同的[特异性](http://www.w3.org/TR/selectors/#specificity)，所以最后一个优先。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T18:47:30.977

要覆盖相同的特异性，您可以链接选择器

```
div.container_2 > div:nth-child(even):hover {
    background: red;
}​ 
```

# html - Rails 中的 HTML 标题属性仅显示第一个单词

> ID：13055584
> 
> 赞同：1
> 
> 时间：2012-10-24T18:37:24.273
> 
> 标签：html, ruby-on-rails, ruby-on-rails-3, hover

遇到了一个奇怪的小问题。

我想在一个项目上创建文本悬停以显示该项目的“描述”，这是该项目模型的一个属性。所以在我看来，我基本上是这样做的：

```
<div title=<%= item.description %> ><%= item.name %></div> 
```

奇怪的是，虽然所有模型调用都正常工作（item.name 和 item.description 调用了正确的东西），但当我悬停时，只有 item.description 的第一个单词出现。换句话说，如果 item.description 是“这是一个超级酷的项目！”，当我用 item.name 将鼠标悬停在该 div 上时，悬停只会显示“This”。

这可能与 :description 属性有关，该属性当前是文本类型（我认为它是用于长字符串，就像我的描述一样）。但也许不是。

知道为什么会发生这种情况，以及如何解决吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T18:41:07.443

在 div 标签中插入标题的双引号

```
<div title="<%= item.description %>" ><%= item.name %></div> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-24T18:41:29.880

我认为您需要在视图中添加对 HTML 的引用。如果您在生成的 HTML 上查看源代码，我敢打赌它看起来像这样：

```
<div title=This is a super cool item! > 
```

浏览器会将其解释为`div`具有`title`值为的 a `This`，然后是名为`is`、`a`、`super`、`cool`和的属性`item!`。

如果您将视图更改为：

```
<div title="<%= item.description %>" > 
```

那么您生成的 HTML 应该如下所示：

```
<div title="This is a super cool item!" > 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T18:41:11.157

更改此行：

```
<div title=<%= item.description %> ><%= item.name %></div> 
```

对此：

```
<div title="<%= item.description %>" ><%= item.name %></div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-14T13:55:17.127

如果您的字符串不止一个单词，并且想在 html 页面上显示它，您需要将标签放在循环中，而不是简单的方法，假设字符串是：

```
mystring='this is my string' 
```

那么应该写（在html上）：

```
value= "{% for n in mystring.split()%}{{n}} {% endfor %}" 
```

代替

```
value={{my_string}} 
```

**注意**不要忘记**“”**

更一般的形式应采用以下形式

```
value= "{% for n in mystring.split()%}{{n}}XXX{% endfor %}" 
```

其中 XXX 是字符串变量（例如：XXX='', XXX='*', XXX='abs'）

# android-layout - 如何在android的屏幕中间显示表格？

> ID：13055585
> 
> 赞同：1
> 
> 时间：2012-10-24T18:37:29.950
> 
> 标签：android-layout, android-tablelayout

我想在一个表格中显示 9 个按钮，每行 3 个按钮。所有按钮都具有相同的尺寸。你能告诉我如何在屏幕中间显示这个表格吗？表是解决方案还是我走错了路？

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"  
    android:layout_width="fill_parent"  
    android:layout_height="fill_parent"  
android:layout_gravity = "center_horizontal"

     >  
    <TableRow>  

<ImageButton android:id="@+id/btn1"  
 android:layout_width="60px"   
    android:layout_height="80px"  
    android:layout_margin="10px"  
    android:clickable="true"  
    android:tag="1"  
    android:background="@drawable/xo" 

 />  

<ImageButton android:id="@+id/btn2"  
 android:layout_width="60px"   
    android:layout_height="80px"  
    android:layout_margin="10px"  
    android:clickable="true"  
    android:tag="2"  
 android:background="@drawable/xo" 

 />   
<ImageButton android:id="@+id/btn3"  
 android:layout_width="60px"   
    android:layout_height="80px"  
    android:layout_margin="10px"  
    android:clickable="true"  
    android:tag="3"  
 android:background="@drawable/xo" 

 />  
 </TableRow>  
 <TableRow>  
<ImageButton android:id="@+id/btn4"  
 android:layout_width="60px"   
    android:layout_height="80px"  
    android:layout_margin="10px"  
    android:clickable="true"  
    android:tag="4"  
 android:background="@drawable/xo" 
 />  
<ImageButton android:id="@+id/btn5"  
 android:layout_width="60px"   
    android:layout_height="80px"  
    android:layout_margin="10px"  
    android:clickable="true"  
    android:tag="5"  
  android:background="@drawable/xo" 

 />  
<ImageButton android:id="@+id/btn6"  
 android:layout_width="60px"   
    android:layout_height="80px"  
    android:layout_margin="10px"  
    android:clickable="true"  
    android:tag="6"  
 android:background="@drawable/xo" 

 />  

</TableRow>  
 <TableRow>  
<ImageButton android:id="@+id/btn7"  
 android:layout_width="60px"   
    android:layout_height="80px"  
    android:layout_margin="10px"  
    android:clickable="true"  
    android:tag="7"  
 android:background="@drawable/xo" 

 />  
<ImageButton android:id="@+id/btn8"  
 android:layout_width="60px"   
    android:layout_height="80px"  
    android:layout_margin="10px"  
    android:clickable="true"  
    android:tag="8"  
  android:background="@drawable/xo" 

 />  
<ImageButton android:id="@+id/btn9"  
 android:layout_width="60px"   
    android:layout_height="80px" 
    android:layout_margin="10px"  
    android:clickable="true"  
    android:tag="9"  
  android:background="@drawable/xo" 

 />  

</TableRow>    
</TableLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T20:18:04.290

将表格包装在另一个 ViewGroup 中。

1.  将父母的重力设置为“中心”。
2.  将父级的高度和宽度设置为“fill_parent”
3.  将表格的高度和宽度设置为“wrap_content”

现在您的表格将在另一个占据整个屏幕的布局中居中。

```
<LinearLayout 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    android:gravity="center">

<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"  
    android:layout_width="wrap_content"  
    android:layout_height="wrap_content"  

     >  
    <TableRow>  

<ImageButton android:id="@+id/btn1"  
 android:layout_width="60px"   
    android:layout_height="80px"  
    android:layout_margin="10px"  
    android:clickable="true"  
    android:tag="1"  
    android:background="@drawable/xo" 

 />  

<ImageButton android:id="@+id/btn2"  
 android:layout_width="60px"   
    android:layout_height="80px"  
    android:layout_margin="10px"  
    android:clickable="true"  
    android:tag="2"  
 android:background="@drawable/xo" 

 />   
<ImageButton android:id="@+id/btn3"  
 android:layout_width="60px"   
    android:layout_height="80px"  
    android:layout_margin="10px"  
    android:clickable="true"  
    android:tag="3"  
 android:background="@drawable/xo" 

 />  
 </TableRow>  
 <TableRow>  
<ImageButton android:id="@+id/btn4"  
 android:layout_width="60px"   
    android:layout_height="80px"  
    android:layout_margin="10px"  
    android:clickable="true"  
    android:tag="4"  
 android:background="@drawable/xo" 
 />  
<ImageButton android:id="@+id/btn5"  
 android:layout_width="60px"   
    android:layout_height="80px"  
    android:layout_margin="10px"  
    android:clickable="true"  
    android:tag="5"  
  android:background="@drawable/xo" 

 />  
<ImageButton android:id="@+id/btn6"  
 android:layout_width="60px"   
    android:layout_height="80px"  
    android:layout_margin="10px"  
    android:clickable="true"  
    android:tag="6"  
 android:background="@drawable/xo" 

 />  

</TableRow>  
 <TableRow>  
<ImageButton android:id="@+id/btn7"  
 android:layout_width="60px"   
    android:layout_height="80px"  
    android:layout_margin="10px"  
    android:clickable="true"  
    android:tag="7"  
 android:background="@drawable/xo" 

 />  
<ImageButton android:id="@+id/btn8"  
 android:layout_width="60px"   
    android:layout_height="80px"  
    android:layout_margin="10px"  
    android:clickable="true"  
    android:tag="8"  
  android:background="@drawable/xo" 

 />  
<ImageButton android:id="@+id/btn9"  
 android:layout_width="60px"   
    android:layout_height="80px" 
    android:layout_margin="10px"  
    android:clickable="true"  
    android:tag="9"  
  android:background="@drawable/xo" 

 />  

</TableRow>    
</TableLayout>
</LinearLayout> 
```

# scala - 不可变、可类型、树的设计

> ID：13055588
> 
> 赞同：5
> 
> 时间：2012-10-24T18:37:39.687
> 
> 标签：scala, functional-programming, immutability

这是我反复面临的一个设计问题。假设您正在构建一个编译器，您如何将类型存储在树中？

考虑一个简单的`Expr`and`Type`层次结构，并假设`Plus`and是多态的（例如，`Equals`在 just 中加上布尔值）。`||`

```
trait Type
case object BoolType extends Type
case object IntType extends Type
case object Untyped extends Type

trait Expr { var tpe : Type = Untyped }

case class Var(id : String) extends Expr
case class Plus(l : Expr, r : Expr) extends Expr
case class Equals(l : Expr, r : Expr) extends Expr
// ... 
```

进一步假设我在构造表达式树时不知道标识符的类型，因此无法通过构造知道类型。现在一个典型的类型检查函数可能如下所示：

```
def typeCheck(env : Map[String,Type])(expr : Expr) : Expr = expr match {
  case Var(id) =>
    expr.tpe = env(id)
    expr

  case Plus(l,r) =>
    val tl = typeCheck(env)(l)
    val tr = typeCheck(env)(r)
    assert(tl == tr)
    expr.tpe = tl
    expr

  // etc.
} 
```

这写起来相当简单，但有两个主要问题：

*   `Expr`s 是可变的。没有人喜欢突变。
*   无法区分有类型和无类型的表达式。我不能编写一个函数，其签名指定它的参数必须是一个类型化的表达式。

所以我的问题如下。什么是定义可能无类型树的好方法（我不敢说设计模式）：

1.  我只需要定义`Expr`一次层次结构。
2.  有类型和无类型的树有不同的类型，我可以选择使它们不兼容。

**编辑：**另一个要求是它应该适用于具有无限和不可预测的类型数量的类型系统（`case class ClassType(classID : String) extends Type`例如：想想）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T20:32:17.940

这是类型级编程的完美用例！

首先，我们需要一个类型级别`Option`，以便我们可以根据类型级别表示无类型树，并根据类型级别表示类型的类型`None`树：`X``Some[X]`

```
// We are restricting our type-level option to
// only (potentially) hold subtypes of `Type`.
sealed trait IsTyped
sealed trait Untyped extends IsTyped
sealed trait Typed[T <: Type] extends IsTyped 
```

接下来，我们布置我们的类型系统层次结构：

```
sealed trait Type

// We can create complicated subhierarchies if we want.
sealed trait SimpleType extends Type
sealed trait CompoundType extends Type

sealed trait PrimitiveType extends Type
sealed trait UserType extends Type

// Declaring our types.
case object IntType extends SimpleType with PrimitiveType

case object BoolType extends SimpleType with PrimitiveType

// A type with unbounded attributes.
case class ClassType(classId: String) extends CompoundType with UserType

// A type that depends statically on another type.
case class ArrayType(elemType: Type) extends CompoundType with PrimitiveType 
```

现在，剩下的就是声明我们的表达式树：

```
sealed trait Expr[IT <: IsTyped] { val getType: Option[Type] }

// Our actual expression types.
case class Var[IT <: IsTyped](id: String, override val getType: Option[Type] = None) extends Expr[IT]

case class Plus[IT <: IsTyped](l: Expr[IT], r: Expr[IT], override val getType: Option[Type] = None) extends Expr[IT]

case class Equals[IT <: IsTyped](l: Expr[IT], r: Expr[IT], override val getType: Option[Type] = None) extends Expr[IT]

case class ArrayLiteral[IT](elems: List[Expr[_ :< IsTyped]], override val getType: Option[Type] = None) extends Expr[IT] 
```

* * *

**编辑：**

一个简单但完整的类型检查功能：

```
def typeCheck(expr: Expr[Untyped], env: Map[String, Type]): Option[Expr[Typed[_ :< Type]]] = expr match {
  case Var(id, None) if env isDefinedAt id => Var[Typed[_ <: Type]](id, Some(env(id)))
  case Plus(r, l, None) => for {
      lt <- typeCheck(l, env)
      IntType <- lt.getType
      rt <- typeCheck(r, env)
      IntType <- rt.getType
    } yield Plus[Typed[IntType]](lt, rt, Some(IntType))
  case Equals(r, l, None) => for {
      lt <- typeCheck(l, env)
      lType <- lt.getType
      rt <- typeCheck(r, env)
      rType <- rt.getType
      if rType == lType
    } yield Equals[Typed[BoolType]](lt, rt, Some(BoolType))
  case ArrayLiteral(elems, None) => {
    val elemst: List[Option[Expr[Typed[_ <: Type]]]] =
      elems map { typeCheck(_, env) }
    val elemType: Option[Type] = if (elemst.isEmpty) None else elemst map { elem =>
      elem map { _.getType }
    } reduce { (elemType1, elemType2) =>
      for {
        et1 <- elemType1
        et2 <- elemType2
        if et1 == et2
      } yield et1
    }
    if (elemst forall { _.isDefined }) elemType map { et =>
      ArrayLiteral[Typed[ArrayType]](elemst map { _.get }, ArrayType(et))
    } else None
  }
  case _ => None
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T20:14:11.087

要使其不可变，您可以创建一个新的 Expr 而不是更改其内容。案例类有一个可用于此目的的[复制方法。](https://stackoverflow.com/questions/8085857/scala-copy-objects)

```
trait Type
case object BoolType extends Type
case object IntType extends Type
case object Untyped extends Type

class Expr[A <: Type](tpe : Type = Untyped)

case class Var[A <: Type](id : String, tpe : Type = Untyped) extends Expr[A](tpe)
case class Plus[A <: Type](l : Expr, tpe : Type = Untyped) extends Expr[A](tpe)
case class Equals[A <: Type](l : Expr, tpe : Type = Untyped) extends Expr[A](tpe) 
```

现在你可以自由地做各种各样的好事，比如：

```
val x = Var("name")
val y = x.copy(tpe = IntType) 
```

但是，它现在是不可变的。您可以通过匹配 tpe 来解决您的问题，以确定它是否被输入，因为它是 Var、Plus 和 Equals 的参数之一。它们也有不同的类型，它们的类型会随着 tpe 的变化而变化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T19:52:01.370

这只是一个想法。

首先，如果你想保持不变，显然你必须摆脱变量`tpe`。

# 不同的表达式类型

只需创建两个层次结构，一个 with`TypedExpression <: Expression`和一个 with `UntypedExpression <: Expression`。这种方法可能会导致两个几乎相同的类层次结构。

# 制作类型参数信号类型

为了消除两个层次结构的开销（并获得一些类型样板），您可以创建一个层次结构并为[bool 类型](http://apocalisp.wordpress.com/2010/06/13/type-level-programming-in-scala-part-3-boolean/)添加类型参数：

```
sealed trait TBool
sealed trait TTrue extends TBool
sealed trait TFalse extends TBool

trait Expression[T <: TBool]{
  //ensure that this gets only called on typed expressions
  def getType(implicit e: T =:= TTrue): Type
  def typeMe(m: Map[String,Type]): Expression[TTrue] = this.asInstanceOf[Expression[TTrue]]
} 
```

如果你这样做，我真的不知道你会遇到多少千个问题。但这是我会尝试的。

# silverlight-5.0 - 在 Silverlight 5 (vb) 中使用独立存储保存用户设置

> ID：13055590
> 
> 赞同：2
> 
> 时间：2012-10-24T18:37:43.687
> 
> 标签：silverlight-5.0, silverlight-oob

我想从 a 中保存一个值，从 a 中保存一个文本`TextBox`项，并检查 true 或 false。然后我想用按钮调用保存的设置。我尝试了以下内容，但收到以下错误声明：用户代码未处理。给定的键不在当前字典中？`SelectedIndex``ComboBox``CheckBox``OnClick``TextBox``KeyNotFoundException`

有谁能够帮助我？

```
Private Sub Button2_Click(sender As System.Object, e As System.Windows.RoutedEventArgs)    Handles Button2.Click

    Dim Store As IsolatedStorageSettings = IsolatedStorageSettings.ApplicationSettings

    IsolatedStorageSettings.ApplicationSettings(TextBox1.Text) = TextBox1
End Sub

Private Sub Button3_Click(sender As System.Object, e As System.Windows.RoutedEventArgs) Handles Button3.Click

    TextBox1 = (IsolatedStorageSettings.ApplicationSettings(TextBox1.Text))

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T01:34:53.287

ApplicationSettings 的工作方式类似于 Hashtable。它需要一个密钥来识别您希望存储的任何设置。

您可以像这样存储您的设置（空气代码）：

```
IsolatedStorageSettings.ApplicationSettings("MyTextBoxKey") = TextBox1.Text 
```

您可以像这样检索您的设置：

```
TextBox1.Text = CStr(IsolatedStorageSettings.ApplicationSettings("MyTextBoxKey")) 
```

您可以[在 MSDN 上阅读有关 ApplicationSettings 的更多信息](http://msdn.microsoft.com/en-us/library/cc221360%28v=vs.95%29.aspx)

# python - 如何为文件输入指定编码

> ID：13055596
> 
> 赞同：5
> 
> 时间：2012-10-24T18:37:51.320
> 
> 标签：python

在 Python 中，如何指定[fileinput.input](http://docs.python.org/library/fileinput.html)的编码？

我写

```
f = fileinput.input(openhook=fileinput.hook_encoded("windows-1252")) 
```

但它不能可靠地工作。我得到不同的`script.py text.txt`结果`script.py < text.txt`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T18:38:33.347

这是 fileinput 模块中的一个错误，它仅在读取文件时使用编码信息，而不是从标准输入读取时:(

# php - 如果子查询返回空行，则使用子查询应用更新查询将插入零

> ID：13055602
> 
> 赞同：0
> 
> 时间：2012-10-24T18:38:12.563
> 
> 标签：php, mysql

```
 $query1="UPDATE admin   SET  t_points=t_points+ (SELECT points from sites where url='$url') where username='$login_session'";
mysql_query($query1); 
```

如果子查询 `SELECT points from sites where url='$url'`返回某些内容，则查询工作正常。当它什么都不返回时， t_points 中的先前值变为空。

如何编写更具体的代码以使 t_point 的值在子查询返回 null 时保持不变？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T18:46:11.570

这是结果查询：

```
UPDATE admin 
SET  t_points = t_points + COALESCE( 
    SELECT points 
    FROM sites 
    WHERE url = '$url', 
    0
) 
WHERE username = '$login_session' 
```

每当您对 NULL 进行数学运算时，结果始终为 NULL，如果不是 NULL，COALESCE 返回第一个值，否则返回第二个值

[合并](http://dev.mysql.com/doc/refman/5.1/en/comparison-operators.html#function_coalesce)

顺便说一句，在将变量传递给查询之前，请在它们上使用 mysql_real_escape_string ：

```
$url = mysql_real_escape_string($url);
$login_session = mysql_real_escape_string($login_session); 
```

但我建议你使用 MySQL PDO，你可以在这里找到一些文档[PDO](http://www.php.net/manual/ru/book.pdo.php)

为了提高性能，最好将 UPDATE 和 SELECT 查询分开（仅当 SELECT 查询对于每个更新查询都相同时才有效，就像在主题中一样）我们可以将 SELECT 查询的结果传递给一个变量并在 UPDATE 中使用这个变量：

```
mysql_query("SET @points = COALESCE(
                 SELECT points
                 FROM sites
                 WHERE url = '$url', 
                 0
             )");
mysql_query("UPDATE admin 
             SET t_points = t_points + @points 
             WHERE username = '$login_session'"); 
```

# sql - 如何将表格的列项旋转到列

> ID：13055605
> 
> 赞同：0
> 
> 时间：2012-10-24T18:38:15.403
> 
> 标签：sql, sql-server

我有一张桌子，它需要改变

```
Key                  Value
CapacityColdBTU      2000
PowerLevelCold       B
Inverter/Standard    Standard
CapacityColdBTU      1500
PowerLevelCold       B
Inverter/Standard    Inverter 
```

在我使用它之前，该表应如下所示。我不能在超过 1 个条件的搜索中使用该表。我该如何改变它？

```
CapacityColdBTU   PowerLevelCold    Inverter/Standard
2000              B                 Inverter 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T18:49:19.000

您可以使用`PIVOT`：

```
select *
from
(
  select [key], value
  from yourtable
) x
pivot
(
  max(value)
  for [key] in ([CapacityColdBTU], [PowerLevelCold], [Inverter/Standard])
) p 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/228d3/3)

或者您可以使用`CASE`带有聚合的语句，请注意此版本会生成您列出的结果，其中包含字段`Inverter`中的值`[Inverter/Standard]`：

```
select 
  max(case when [key] = 'CapacityColdBTU' 
        then value end) as CapacityColdBTU,
  max(case when [key] = 'PowerLevelCold' 
        then value end) as PowerLevelCold,
  min(case when [key] = 'Inverter/Standard' 
        then value end) as [Inverter/Standard]
from yourtable 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/228d3/6)

如果您有一个`id`或某些字段用主记录标识这些字段中的每一个，那么您可以显示每个 id 的值。

# css - 所有手机的 CSS 媒体查询，但不是 iPad

> ID：13055608
> 
> 赞同：1
> 
> 时间：2012-10-24T18:38:21.813
> 
> 标签：css, media-queries

嗨，我正在尝试编写一个将影响所有手机但不影响 iPad 的媒体查询。

我很难这样做，因为显然 android 设备在改变方向时会改变它们的设备宽度。从纵向到横向意味着宽度变为高度，反之亦然。无论方向如何，Apple 设备都将其设备宽度报告为相同的值。安卓手机的分辨率比 iPad 更高，这一事实使问题更加复杂。

如果有一个设备高度为 1280 像素的安卓手机，而 iPad 的设备高度为 1024 像素，我该如何编写一个会影响所有安卓手机但不影响 iPad 的媒体查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T20:03:15.367

您可以使用它来区分横向的 Android 设备和横向的 iPad，但我不确定纵向：

```
<style>
@media all and (min-device-aspect-ratio:1/1) and (orientation:landscape) {
    /*because an iPad doesn't change it's width, it's device aspect ratio will not be greater than 1/1  */
    body {background-color:#00FF00;}
}
</style> 
```

# java - 不使用 Spring 3 和 MyBatis 路由 DataSource

> ID：13055609
> 
> 赞同：0
> 
> 时间：2012-10-24T18:38:24.737
> 
> 标签：java, spring, datasource, mybatis, spring-transactions

我有一个默认数据库，有时我必须在另一个数据库中进行选择。

我在这里搜索了许多关于此的博客和问题，但无法使其发挥作用。

尝试了[http://blog.springsource.org/2007/01/23/dynamic-datasource-routing/](http://blog.springsource.org/2007/01/23/dynamic-datasource-routing/)方式。没有什么。

RouterDataSource 类的代码：

```
public class RouterDataSource extends AbstractRoutingDataSource {   
    @Override
    protected DataSourceEnum determineCurrentLookupKey() {
         return DataSourceContextHolder.getTargetDataSource();
    }   
} 
```

DataSourceContextHolder 类的代码：

```
public class DataSourceContextHolder {
     private static final ThreadLocal<DataSourceEnum> contextHolder = new ThreadLocal<DataSourceEnum>();

     public static void setTargetDataSource(DataSourceEnum targetDataSource) {
         Assert.notNull(targetDataSource, "Target data source cannot be null");
         contextHolder.set(targetDataSource);
     }

     public static DataSourceEnum getTargetDataSource() {
         if (contextHolder.get() != null)
             return (DataSourceEnum) contextHolder.get();
         else
             return DataSourceEnum.DB1;
     }

     public static void resetDefaultDataSource() {
         contextHolder.remove();
     }
} 
```

调用更改数据库的方法的代码：

```
@Override
public CodeHD getCategoryByCode(String code) throws BusinessException {
    DataSourceContextHolder.setTargetDataSource(DataSourceEnum.DATABASE2);
    return (CodeHD) persistency.getObject(GETOBJECT_BY_CODE, code);
} 
```

DatasourceEnum 类的代码：

```
public enum DataSourceEnum {
    DB1,
    DB2;
} 
```

最后是我的 applicationContext.xml 上的配置：

```
<bean id="parentDataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource" abstract="true">
    <property name="driverClass" value="oracle.jdbc.pool.OracleDataSource" />
    <property name="acquireIncrement" value="10" />
    <property name="idleConnectionTestPeriod" value="60" />
    <property name="maxStatements" value="50" />
    <property name="minPoolSize" value="5" />
    <property name="maxPoolSize" value="15" />
</bean>

<bean id="database1DS" parent="parentDataSource">
    <property name="jdbcUrl" value="jdbc:oracle:thin:@database1:1521:xe" />
    <property name="user" value="user" />
    <property name="password" value="password" />
</bean>

<bean id="database2DS" parent="parentDataSource">
    <property name="jdbcUrl" value="jdbc:oracle:thin:@database2:1521:xe" />
    <property name="user" value="user" />
    <property name="password" value="password" />
</bean>

<bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
     <property name="dataSource" ref="dataSource"/>
  </bean>

<bean id="dataSource" class="package.RouterDataSource">
    <property name="defaultTargetDataSource" ref="database1DS"/>
    <property name="targetDataSources">
        <map key-type="package.DataSourceEnum">
            <entry key="DB1" value-ref="database1DS"/>
            <entry key="DB2" value-ref="database2DS"/>
        </map>
    </property>
</bean> 
```

问题是当我将它设置为 DB2 时它不会改变。

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T20:15:45.487

首先确保 database2DS 工作正常。制作 defaultTargetDatasource database2DS 并验证它是否仍在使用 DB1，并且使用 database2DS 作为默认值没有其他错误。如果 AbstractRoutingDataSource 无法解析 targetDataSources 中的 DataSource，则无法切换到它。

AbstractRoutingDataSource 只会在调用 getConnection 时更改 DataSource。无论您使用什么持久性框架，都可能缓存 Connection 而不是在 persistence.getObject() 之间调用 getConnection。但是，您正在获取持久性对象，请在更改 DataSourceContextHolder 中的数据源后尝试获取新的持久性对象。如果这解决了您的问题，请尝试创建一个类来维护您的持久性对象并处理更改数据源。这样，当您更改数据源时，您可以在一处修改您的持久性管理器对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T18:53:47.713

如果上下文持有者，请尝试将两个静态方法都设为非静态并传递 R 引用。

# haskell - 可以在主站点中使用的子站点小部件的类型应该是什么？

> ID：13055611
> 
> 赞同：2
> 
> 时间：2012-10-24T18:38:37.250
> 
> 标签：haskell, yesod

我写了一个 Yesod auth 插件，它可以邮寄邀请码，然后需要注册。我想在插件中包含的一件事是一个包含用于创建邀请的表单的小部件；该表单将发布到 auth 插件中的路由。我遇到的麻烦是找出允许创建适当 URL 并且也可以在主站点的处理程序中使用的小部件的类型签名。

剥离到基本要素，小部件看起来像：

```
invitationWidget :: GWidget Auth m ()
invitationWidget = do
  tm <- lift getRouteToMaster
  [whamlet|<form action=@{tm inviteR}>|]

inviteR :: AuthRoute
inviteR = PluginR "invite" ["invite"] 
```

问题是为小部件指定`Auth`子站点意味着我不能将它直接嵌入到类型的处理程序中`GHandler master master a`（确切的错误是`Couldn't match type `App' with `Yesod.Auth.Auth'`）。但是，如果未指定子站点，例如`invitationWidget :: GWidget s m ()`，那么我看不到任何方法`inviteR`（错误是`Could not deduce (MonadLift (GHandler Auth m) (GWidget s m))`）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T04:34:31.530

函数[addSubWidget](http://hackage.haskell.org/packages/archive/yesod-core/1.1.3.1/doc/html/Yesod-Widget.html#v%3aaddSubWidget)应该可以帮助你。

# c - 一些指针问题

> ID：13055612
> 
> 赞同：3
> 
> 时间：2012-10-24T18:38:38.950
> 
> 标签：c, pointers

> **可能重复：**
> [数组名称是 C 中的指针吗？](https://stackoverflow.com/questions/1641957/is-array-name-a-pointer-in-c)

我正在运行以下代码

```
#include <stdio.h>

int main()
{
  int a[4] = {1,2,3,4};
  int (*b)[4] = &a;
  int k = sizeof(a);
  printf("\n\n%d\n\n", k);
  printf("a = %u, b = %u, *b = %u, data = %d", a, b, *b, **b);
  return 0;
} 
```

我得到以下输出

```
a = 3485401628, b = 3485401628, *b = 3485401628, data = 1 
```

这里我将 a 的地址分配给 b，因为 b 的类型是 int**，但是在输出中我得到 a 指向的地址与 b 指向的地址相同。

这对我来说似乎有点混乱。解释是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T18:41:50.490

数组的值`a`是指向数组第一个元素的指针`a`。

指针的值`&a`（与指针的值和类型相同`b`）是指向数组的指针`a`。

它们具有相同的值（但类型不同），因为它们都从相同的内存地址开始。在数组的开头没有填充可能。

评估时`a`是 type`int *`并且`&a`是 type `int (*)[4]`。

请注意，打印指针地址的正确方法是使用转换说明符`p`。例如，

```
/* And p requires the argument to be a void *, so use a cast if
 * it is not the case
 */
printf("%p %p\n", (void *) a, (void *) &a); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T18:42:27.590

在表达式（例如 printf 的参数）上，数组被衰减为指针（指向它们各自的数组），这意味着如果“b”指向“a”，在表达式上，“a”也将是指向“a”的指针（分配给“a”的内存块）。

然而，在运行时（内部）访问元素的方式是不同的。在这种情况下，“b”将需要额外的间接。

# javascript - Phonegap 的外部 Javascript(JSON) 文件的动态加载延迟

> ID：13055614
> 
> 赞同：0
> 
> 时间：2012-10-24T18:38:52.050
> 
> 标签：javascript, html, cordova

我试图加载一个外部 js (json) 文件（PhoneGap 应用程序），其结构类似于

```
 var localString ={
  "tag1": "Username",
  "tag2": "Password",
  "submit": "Submit"
   } 
```

并使用下面的代码在运行时加载它，newlocale 变量保存要加载的文件的名称，例如：如果语言环境是英语-美国，则 var resourcePath = en-US.js。问题是我第一次运行此代码时收到此错误“ReferenceError: localstring is not defined”，但它会在我第二次加载外部字符串时加载它。在这两者之间，我使用 html5 中的“select”标签调用外部文件。有人可以提供一些关于我哪里出错的见解或解决这个问题的任何指示。

```
var newlocale = window.DeviceCulture.get();
local(newlocale);

function local(lang) {
try {
    var resourcePath = lang + '.js';
    var scriptEl = document.createElement('script');
    scriptEl.type = 'text/javascript';
    scriptEl.src = resourcePath;
    alert(resourcePath);
    document.getElementsByTagName("head")[0].appendChild(scriptEl);
    //$('head').append(scriptEl);

    //var localString = window.localString;
    document.getElementById("07").value = localString['submit'];
 } catch (e) {
    errorEvent(e);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T21:44:39.353

好的，我相信您的问题的根本原因是您在页面加载后将 .js 文件的标记附加到头部。当您第一次加载页面时，脚本标签会按顺序下载和解释，因此 b 可以依赖于 a。但是，您执行此操作的方式是非阻塞的，因此当您到达代码中尝试访问“localString”的下一行时，您加载的脚本并未完全加载。

为了解决这个问题，我会稍微重构你的代码。首先忘记制作本地文件 JavaScript。只需将它们设为纯文本 .json 文件即可。例如：

```
{
    "tag1": "Username",
    "tag2": "Password",
    "submit": "Submit"
} 
```

然后我会使用 XHR 而不是脚本标签插入来加载该文件。就像是：

```
var newlocale = window.DeviceCulture.get();
var localString;
local(newlocale);

function local(lang) {
    try {
        var resourcePath = lang + '.json';
        var request = new XMLHttpRequest();
        request.open("GET", resourcePath, true);
        request.onreadystatechange = function(){
            if (request.readyState == 4) {
                if (request.status == 200 || request.status == 0) {
                    localString = JSON.parse(request.responseText);
                    // at this point localString is loaded with the new language
                    document.getElementById("07").value = localString['submit'];
                }
            }
        }
        request.send();
     } catch (e) {
        errorEvent(e);
    }
} 
```

这应该会处理好事情。

# html - CSS边框半径和边框折叠

> ID：13055620
> 
> 赞同：3
> 
> 时间：2012-10-24T18:39:02.537
> 
> 标签：html, border, css

我正在尝试在 CSS 中设置一个边框半径为 12px 的表格。表格中的 tr 或 td 没有边框，只有一个边框围绕整个批次。我希望表格中的第一行在前 2 个角上具有边框半径，但在底部 2 上没有边框半径（所以它就像表格的标题），我已经设法做到了。但是，这会在表格和第一行之间创建一个白色边框 - 我希望它们在没有白色边框的情况下相互对齐，因为标题行具有彩色背景。

我尝试使用边框折叠来执行此操作，但这会抵消整个表格上的边框半径，使标题行在顶部 2 个角处变圆，但在方形表格内。

这很难解释，所以可以在[这里](http://redsquirrelsoftware.co.uk/support/test.html)找到一个例子。您可以看到表格和蓝色背景的行之间的白色边框。

有没有人知道如何在没有边界崩溃的情况下摆脱边界？提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T18:43:37.190

试试这个：

`<table class="admin" style = "border-spacing:0px;">`

显然，您可以将该内联样式提取到它自己的类中，但我想明确地向您展示表格上的边框间距是您所追求的。

如果您不希望文本紧贴表格的边框，您应该/可以为表格内的内容添加一些填充。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T13:24:15.100

这是我的修复CSS：

```
table {
    border:1px solid black;
    border-radius: 5px; //Any radius you want. It will work perfectly!
    border-spacing: 0;
}
table td:first-child, table td:not(:first-child):not(:last-child){
    border-right:1px solid black;
}
table tr:first-child td, table tr:not(:last-child) td {
    border-bottom:1px solid black;
}

table thead tr:first-child  td:first-child {
    -webkit-border-top-left-radius: 2px;
    -moz-border-radius-topleft: 2px;
    border-top-left-radius: 2px;
}

table thead tr:first-child  td:last-child {
    -webkit-border-top-right-radius:2px;
    -moz-border-radius-topright: 2px;
    border-top-right-radius: 2px;
}
table tbody tr:last-child  td:first-child {
    -webkit-border-bottom-left-radius: 2px;
    -moz-border-radius-bottomleft: 2px;
    border-bottom-left-radius: 2px;
}

table tbody tr:last-child  td:last-child {
    -webkit-border-bottom-right-radius: 2px;
    -moz-border-radius-bottomright: 2px;
    border-bottom-right-radius: 2px;
} 
```

# nginx - 使用 nginx 代理 Jenkins

> ID：13055622
> 
> 赞同：2
> 
> 时间：2012-10-24T18:39:16.433
> 
> 标签：nginx, jenkins

我想使用 nginx 代理 Jenkins。我已经有一个使用此配置文件的工作版本`/etc/sites-available/jenkins`：

```
server {
   listen 80;
   listen [::]:80 default ipv6only=on;

   location / {
      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
      proxy_set_header Host $http_host;
      proxy_pass http://127.0.0.1:8080;
   }
} 
```

但是，我想做的是在相对 url 上托管 Jenkins，比如`/jenkins/`. 但是，当我将位置指令更改为指向时`/jenkins/`，它会破坏一切。我怎样才能做出这个（希望是简单的）改变？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-25T10:31:22.610

问题在于

```
proxy_pass http://127.0.0.1:8080; 
```

您没有在此 proxy_pass 中设置 uri，根据[http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_pass](http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_pass)意味着：

```
If proxy_pass is specified without URI, a request URI is passed to the server in
the same form as sent by a client when processing an original request or the full
normalized request URI is passed when processing the changed URI 
```

换句话说，它会将 /jenkins 传递给您的应用程序

我认为在 proxy_pass 中添加斜杠应该可以，如下所示：

```
location /jenkins/ {
  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
  proxy_set_header Host $http_host;
  proxy_pass http://127.0.0.1:8080/;
} 
```

因为这将是一个带有 uri 的请求，根据上面的链接意味着：

```
If proxy_pass is specified with URI, when passing a request to the server, part 
of a normalized request URI matching the location is replaced by a URI specified 
in the directive 
```

如果添加斜线不起作用，则必须在另一端通过配置 jenkins 来更改它以期望 /jenkins/ url

# objective-c - 图片有问题

> ID：13055624
> 
> 赞同：0
> 
> 时间：2012-10-24T18:39:38.897
> 
> 标签：objective-c, cocoa-touch, xcode4.4, unrecognized-selector

我在运行时遇到问题，说

> -[__NSCFString _isResizable]：无法识别的选择器发送到实例 0x6a86a80 2012-10-24 14:21:08.070 糖尿病食物指南 [767:c07] ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：'-[__NSCFString _isResizable]：无法识别的选择器发送到实例 0x6a86a80'

我认为问题在于代码的这些部分：

```
/*ViewControllerManual.m*/
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    NSDictionary* tier = (NSDictionary*)sender;
    if ([segue.identifier isEqualToString:@"loopbackSegue"]) {
        ViewControllerManual* nextController = segue.destinationViewController;
        nextController.items = [tier objectForKey:@"items"];
        nextController.title = [tier objectForKey:@"name"];
    } else if ([segue.identifier isEqualToString:@"detailSegue"]) {
        DetailsController* nextController = segue.destinationViewController;
        nextController.name = [tier objectForKey:@"name"];
        nextController.foodPicture = [tier objectForKey:@"foodPicture"];
        nextController.tablePicture = [tier objectForKey:@"tablePicture"];
    }
}

/*DetailsController.m*/

- (void)viewDidLoad {
    [super viewDidLoad];
    nameLbl.text = self.name;
    foodPic.image = self.foodPicture;
    tablePic.image = self.tablePicture;
    } 
```

foodPic 和 tablePic 都是 UIImageViews，并且 foodPic 是使用`cell.imageView.image = [UIImage imageNamed:[[self.items objectAtIndex:indexPath.row] objectForKey:@"foodPicture"]];` 从包含图像路径的数组中调用来设置的。该错误仅在加载类 DetailsController 的视图时发生。如果我需要提供更多信息，请随时告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T18:53:51.210

似乎您在这里返回 NSStrings：

```
nextController.foodPicture = [tier objectForKey:@"foodPicture"];
nextController.tablePicture = [tier objectForKey:@"tablePicture"]; 
```

接着

```
// UIImage* = NSString*
nextController.foodPicture = [tier objectForKey:@"foodPicture"];
nextController.tablePicture = [tier objectForKey:@"tablePicture"]; 
```

或者你已经过度释放了一些东西。但从您的描述来看，将 NSString 分配给 UIImage 的问题可能更大。

# css - 如何让jquery mobile显示更大的元素？

> ID：13055628
> 
> 赞同：2
> 
> 时间：2012-10-24T18:40:03.893
> 
> 标签：css, jquery-mobile, scale

我正在为平板电脑开发 jQuery Mobile 应用程序，发现默认元素大小有点小。我试图改变元初始比例但没有运气:(

是否有可能让 jQuery Mobile 扩大一切，比如说扩大 30%？也许，一个 CSS 技巧可以做到这一点？

TIA，阿德里安。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T10:38:17.193

我将建议一种我已经使用过几次的 JavaScript 方式：

**HTML：**

```
<div class="foo">content to be scale to 130%</div>
<div>content that won't be scaled</div> 
```

**JavaScript：**

```
var scale = function(target, css_rule, value)
{
    var type = document.defaultView.getComputedStyle(target, "").getPropertyValue(css_rule).match(/[a-zA-Z]{0,2}$/); //Get unit type from end of string

    value = (parseInt(document.defaultView.getComputedStyle(target, "").getPropertyValue(css_rule)) * value); //Get current value of css_rule and multiply by entered value

    target.style.cssText += css_rule + ':' + value + type + ';'; //Add css_rule to cssText with value and type
} 
```

然后，您可以使用以下方法调用此代码：

```
var elem = document.getElementsByClassName('foo')[0];
scale(elem, 'font-size', 1.3); 
```

[这个例子的jsFiddle](http://jsfiddle.net/SRXxb/1/)

此示例将`font-size`类的扩展 30%，然后您可以将其应用于您希望扩展的任何和所有 CSS 规则。

您可能想扩展我的脚本以删除已被 some 覆盖的旧 cssText 规则，您可以在[此处](http://www.w3schools.com/jsref/jsref_obj_regexp.asp)`Regular Expressions`阅读更多信息。

我希望这会有所帮助，并且可能有更简单的方法，但是这段代码可以随时调用，让您轻松放大和缩小元素

**笔记 ：**

此示例使用一种不常见的方式来获取元素的样式`Computed Style`，该方式仅适用于 Safari、Opera、Google Chrome 和 Firefox。

对于 Internet Explorer 使用：`elem.currentStyle`

# sparql - 在 JENA 中运行简单 SPARQL 查询时出现 NoSuchMethod 异常

> ID：13055630
> 
> 赞同：2
> 
> 时间：2012-10-24T18:40:16.603
> 
> 标签：sparql, jena, ontology

您好我刚开始使用 Jena 并想运行一些 SPARQL 查询。当我尝试运行基本选择查询时出现以下异常：

```
Caused by: java.lang.NoSuchMethodError: com.hp.hpl.jena.rdf.model.impl.RDFWriterFImpl.setBaseWriterClassName(Ljava/lang/String;Ljava/>lang/String;)Ljava/lang/String;
    at org.openjena.riot.SysRIOT.wireIntoJena(SysRIOT.java:93)
    at org.openjena.riot.RIOT.init(RIOT.java:61)
    at com.hp.hpl.jena.query.ARQ.init(ARQ.java:451)
    at com.hp.hpl.jena.query.ARQ.<clinit>(ARQ.java:456)
    at com.hp.hpl.jena.query.Query.<clinit>(Query.java:62)
    at com.hp.hpl.jena.query.QueryFactory.create(QueryFactory.java:80)
    at com.hp.hpl.jena.query.QueryFactory.create(QueryFactory.java:52)
    at com.qmap.core.server.jena.GetExistingRelationships.appendValidProperties(GetExistingRelationships.java:153) 
```

我的Java代码是：

```
String queryString = "PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>  PREFIX ns: <http://www.semanticweb.org/ontologies/2012/1/Ontology1328444427428.owl#>  SELECT ?r WHERE { ns:within rdfs:range ?r . }";
Query query = QueryFactory.create(queryString, Syntax.syntaxSPARQL);

QueryExecution qexec = QueryExecutionFactory.create(query, m) ;
try {

        Iterator<QuerySolution> rs = qexec.execSelect() ;
        for ( ; rs.hasNext() ; )
        {
            QuerySolution soln = rs.next() ;
            System.out.println(soln.toString());

        }
      } finally { qexec.close() ; } 
```

其中“m”是 OntModel 类型。从我一直在阅读的内容来看，问题可能在于我的 Jena 库 - 但是我更新到了最新的 Jena 版本，但仍然没有运气。可能是缺少某些东西，但是堆栈跟踪中引用的包在那里。

这是我的耶拿库文件：

![JENA 库文件](../Images/9e7438f81e3e6726d9e2249c75164a89.png)

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T21:37:38.897

你的代码对我有用。看起来 jena-core 不在运行时类路径上。

这可能是因为您的类路径中还有其他内容——行号与 ARQ 2.9.4 不太一致。

# android - Android在运行时将按钮放在surfaceview上以捕获图像

> ID：13055632
> 
> 赞同：3
> 
> 时间：2012-10-24T18:40:26.260
> 
> 标签：android, button, camera, surfaceview

我是android新手我在这里从头开始创建了一个相机应用程序我在运行时创建了surfaceview我想在它上面创建一个按钮我该怎么做？？？

这是我的代码相机显示完美希望在其上方添加一个按钮以捕获图像

```
package com.example.urvey.tool;
import android.os.Bundle;
import java.lang.*;
import android.view.MenuItem;
import android.widget.*;
import android.support.v4.app.NavUtils;
import android.text.Layout;
import java.io.FileOutputStream;
import java.io.IOException;
import java.util.List;
import android.content.Intent;
import android.annotation.SuppressLint;
import android.app.ActionBar.LayoutParams;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.hardware.Camera;
import android.hardware.Camera.Size;
import android.util.Log;
import android.view.*;

@SuppressLint({ "SdCardPath", "NewApi" }) public class Camera_screen extends Activity {
    //AlertDialog.Builder dlgAlert  = new AlertDialog.Builder(this);
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_camera);
       Preview P = new Preview(this);
    setContentView(P);

        Button myButton = new Button(this);
        myButton.setText("Press Me");
System.out.println("halyu");
        RelativeLayout layout = (RelativeLayout) findViewById(R.id.cam_out);
        layout.addView(myButton);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_camera, menu);
        return true;
    }

    @SuppressLint("SdCardPath") class Preview extends SurfaceView implements SurfaceHolder.Callback {

        SurfaceHolder mHolder;
        Camera mCamera;

        public Preview(Context context) {

            super(context);

            // Install a SurfaceHolder.Callback so we get notified when the
            // underlying surface is created and destroyed.
            mHolder = this.getHolder();
            mHolder.addCallback(this);
            mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
            System.out.println("constructor");
            }

        @SuppressLint({ "SdCardPath", "SdCardPath" }) public void surfaceCreated(SurfaceHolder holder) {
            // The Surface has been created, acquire the camera and tell it where
            // to draw.

            try {

                 mCamera = Camera.open();
               mCamera.setPreviewDisplay(holder);

            } catch (IOException exception) {
                mCamera.release();
                mCamera = null;

                // TODO: add more exception handling logic here
            }
        }

        public void surfaceDestroyed(SurfaceHolder holder) {
            // Surface will be destroyed when we return, so stop the preview.
            // Because the CameraDevice object is not a shared resource, it's very
            // important to release it when the activity is paused.
            mCamera.stopPreview();
            mCamera.release();
            mCamera = null;
        }

        public void previewCamera()
        {        
            try 
            {           
                mCamera.setPreviewDisplay(mHolder);          
                mCamera.startPreview();
            }
            catch(Exception e)
            {

            }
        }

        @SuppressLint("NewApi") public Camera.Size getBestPreviewSize(int width, int height, Camera.Parameters parameters){
            Camera.Size bestSize = null;
            List<Camera.Size> sizeList = parameters.getSupportedPreviewSizes();

            bestSize = sizeList.get(0);

            for(int i = 1; i < sizeList.size(); i++){
             if((sizeList.get(i).width * sizeList.get(i).height) >
               (bestSize.width * bestSize.height)){
              bestSize = sizeList.get(i);
             }
            }

            return bestSize;
           }

        @SuppressLint("NewApi") public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
            // Now that the size is known, set up the camera parameters and begin
            // the preview.

                 Camera.Parameters parameters = mCamera.getParameters();
                 Camera.Size myBestSize = getBestPreviewSize(3, 4, parameters);
              /* List<Size> sizes = parameters.getSupportedPreviewSizes();
                Size   size = sizes.get(0);*/
                if(myBestSize != null){
                 mCamera.setDisplayOrientation(90);
                    parameters.setPreviewSize(myBestSize.width, myBestSize.height);
                    mCamera.setParameters(parameters);
                    mCamera.startPreview();
              }

                mCamera.startPreview();

        }

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T20:08:21.330

试试这个作为你的替代品`onCreate()`：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_camera);
    // Preview P = new Preview(this);
    // setContentView(P);

    Button myButton = new Button(this);
    myButton.setText("Press Me");
    myButton.setOnClickListener(this);

    RelativeLayout layout = (RelativeLayout) findViewById(R.id.cam_out);
    layout.addView(myButton);

}

public void onClick(View v) {
    Log.i("onClick", "myButton");
    // Process the Image, etc
} 
```

# php - 问题检查行是否存在？

> ID：13055639
> 
> 赞同：0
> 
> 时间：2012-10-24T18:40:55.587
> 
> 标签：php, mysql, class

如何使用 PHP 检查 MySQL 行是否存在？然后返回真假？

我试过这个：

```
// Does a game with that url-name exist?
public function nameExist() {
    return $this->db->execute('SELECT COUNT(*) FROM `main_games` WHERE `url`=?', array($this->getSubdomain()));
} 
```

这是课程的来源：http: [//pastebin.com/p17gUEPA](http://pastebin.com/p17gUEPA)

这里是我运行这个类的钩子的来源：http: [//pastebin.com/WjSNLCMd](http://pastebin.com/WjSNLCMd)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:49:15.090

看看执行返回什么：

> 成功时返回 TRUE，失败时返回 FALSE。

所以即使有 0 行但执行语句成功，那么你仍然会得到一个 true。您可以做的是使用[fetchColumn()](http://php.net/manual/en/pdostatement.fetchcolumn.php)实际获取行数并返回。像这样的东西：

```
public function nameExist() {
    $stmt= $this->db->execute('SELECT COUNT(*) FROM `main_games` WHERE `url`=?', array($this->getSubdomain()));
    return $stmt->fetchColumn() 
} 
```

# asp.net - 选择时突出显示菜单项

> ID：13055640
> 
> 赞同：1
> 
> 时间：2012-10-24T18:40:58.383
> 
> 标签：asp.net, menu, highlighting

> **可能重复：**
> [ASP.NET：突出显示当前页面的菜单项](https://stackoverflow.com/questions/7067944/asp-net-highlight-menu-item-of-current-page)

我正在尝试突出显示或更改我在导航菜单中选择的菜单项的背景。代码如下：

```
<asp:Menu ID="NavigationMenu" runat="server"  CssClass="menu" OnMenuItemClick="high()" EnableViewState="false" IncludeStyleBlock="false" Orientation="Horizontal">
               <StaticSelectedStyle CssClass="SelectedStyle" />
                <Items>
                    <asp:MenuItem NavigateUrl="~/Default.aspx"   Text="Home"/>
                    <asp:MenuItem NavigateUrl="~/Forecast.aspx" Text="Forecast"/>
                    <asp:MenuItem NavigateUrl="~/MI.aspx" Text="MI"/>
                    <asp:MenuItem NavigateUrl="~/Statistics.aspx" Text="Statistics"/>
                    <asp:MenuItem NavigateUrl="~/Trends.aspx" Text="Trends"/>
                    <asp:MenuItem NavigateUrl="~/About.aspx" Text="About"/>
                </Items>
            </asp:Menu>
        </div>
    </div>
      <script>
      function high()
 {
 var selItem=document.getElementById("NavigationMenu");
  selItem.style.bgcolor='red';
   }

 </script> 
```

它似乎不起作用。我做错了什么？

编辑后我的代码看起来像这样

```
 <asp:Menu ID="NavigationMenu" runat="server"  CssClass="menu"  EnableViewState="false"               IncludeStyleBlock="false" Orientation="Horizontal">
               <staticselectedstyle backcolor="LightBlue"
      borderstyle="Solid"
      bordercolor="Black"
      borderwidth="1"/> 
                <Items>
                    <asp:MenuItem NavigateUrl="~/Default.aspx"   Text="Home"/>
                    <asp:MenuItem NavigateUrl="~/Forecast.aspx" Text="Forecast"/>
                    <asp:MenuItem NavigateUrl="~/MI.aspx" Text="MI"/>
                    <asp:MenuItem NavigateUrl="~/Statistics.aspx" Text="Statistics"/>
                    <asp:MenuItem NavigateUrl="~/Trends.aspx" Text="Trends"/>
                    <asp:MenuItem NavigateUrl="~/About.aspx" Text="About"/>
                </Items> 
```

仍然没有效果

# iphone - 如何预加载声音？

> ID：13055645
> 
> 赞同：1
> 
> 时间：2012-10-24T18:41:19.760
> 
> 标签：iphone, xcode, audio

我有一个 iPhone 应用程序，当用户参加考试时，我会在其中播放声音。效果很好，除了第一次播放声音时有延迟，我假设将声音加载到内存中。如何预加载声音？这是我的声音代码：

```
- (void)doBuzz:(id)sender {
SystemSoundID buzzsoundID;
NSString *buzzsoundFile = [[NSBundle mainBundle]
                           pathForResource:@"buzz" ofType:@"caf"];

AudioServicesCreateSystemSoundID((CFURLRef)
                                 [NSURL fileURLWithPath:buzzsoundFile]
                                 , &buzzsoundID);
AudioServicesPlaySystemSound(buzzsoundID); 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T19:35:11.813

查看`AVAudioPlayer`，您可以设置和重复使用它。但更重要的是，当您设置它时，您可以告诉它“准备播放”，这会将声音预加载到内存中。因此，当您真正告诉播放器播放时，它会立即播放。我很方便，最近为某些东西编写了这个方法，它创建并返回一个`AVAudioPlayer`对象：

```
+(AVAudioPlayer *)playerForFile:(NSString *)fileName
{
    NSString *filePath = [[NSBundle mainBundle] pathForResource:fileName ofType:@"caf"];
    NSURL *url = [NSURL fileURLWithPath:filePath];
    NSData *soundData = [NSData dataWithContentsOfURL:url];
    NSError *error = nil;
    AVAudioPlayer *player = [[[AVAudioPlayer alloc] initWithData:soundData error:&error] autorelease];
    如果（错误）
        NSLog(@"为 %@ 创建播放器时出错：%@", fileName, [error localDescription]);

    return (error ? nil : player);
}

```

在您的应用程序中的某处，您可能会像这样设置一个播放器对象：

```
AVAudioPlayer *buzzSoundPlayer = [MyClass playerForFile:@"buzz"];
if (buzzSoundPlayer) {
    [buzzsoundPlayer prepareToPlay];
} 
```

当您想播放声音时：

```
[buzzSoundPlayer setCurrentTime:0];
[buzzSoundPlayer play]; 
```

您必须将当前时间设置为0，即声音文件的开头，每次播放它，因为当声音播放完毕时，“当前时间”在结尾。因此，后续播放它的请求将不会播放任何内容。所以我们将当前时间设置回开始。

您也可以为您的播放器设置一个`delegate`，并在声音播放完毕时通过委托方法得到通知。或者，您可以在那里将当前时间重置为 0。

您可以在 Apple 的文档中阅读有关`AVAudioPlayer`、 和的所有内容。`AVFoundation`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T13:15:08.453

我通过将 SystemSoundID 的声明移动到 UIViewController 的 .h 文件中，然后设置 NSString 并从 ViewDidLoad 调用 AudioServicesCreateSystemSoundID 来解决我的声音延迟问题。然后，当我想播放声音时，我只是简单地将其替换为 AudioServicesPlaySystemSound，而不是调用 doBuzz 方法。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-24T18:53:03.047

使用 预加载声音`performSelectorInBackground:@selector(<SELECTOR>)`。

您也可以在应用程序启动时或之前的某个地方加载文件，而不是实际接触。

# c++ - 查找两点之间的整数坐标

> ID：13055657
> 
> 赞同：0
> 
> 时间：2012-10-24T18:42:38.190
> 
> 标签：c++, math, polynomial-math

我想找到两组坐标点之间的每个整数坐标点。

例如，我需要 (2,15) (6,15) 之间的坐标。它应该给我 (3,15) (4,15) (5,15) 。我找不到执行此操作的任何数学公式或 c++ 代码。

我想要连接 X 和 Y 恰好是整数的两个点的线上的所有坐标

```
(6,15)&(6,17) = (6,16) 
```

坐标形成矩形或十字形等形状，基本思想是获取每组坐标之间的坐标。

```
Rectabgle Shape
Point [1] : (2, 17)
Point [2] : (2, 15)
Point [3] : (6, 15)
Point [4] : (6, 17)

Points on perimeter : (2, 16), (3, 15), (4, 15), (5, 15), (6, 16), (5, 17), (4, 17), (3, 17) 
```

希望这能更好地解释我想要实现的目标。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T18:46:35.570

试图找到连接 X 和 Y 恰好是整数的两个点的线上的所有坐标：

首先，正如另一位海报指出的那样，您需要将其放在以下表格中`y = mx + b`：

```
int StartX = 0;
int StartY = 10;
int EndX = 100;
int EndY = 110;

// m = rise / run
float m = 0.0;

if (EndX == StartX || EndY == StartY)
{
    // add code here to handle the trivial cases
    return;
}

int run = EndX - StartX;
int rise = EndY - StartY;
m = ((float) rise) / ((float) run);

// solve for b
// (start with y = mx + b, subtract mx from both sides)
float b = StartY - (m * StartX); 
```

现在迭代：

```
// note: assumes EndX > StartX
for (int x = StartX; x <= EndX; ++x)
{
    // solve for y
    float y = (m * x) + b;

    // round to nearest int
    int rounded = (y > 0.0) ? floor(y + 0.5) : ceil(y - 0.5);

    // convert int result back to float, compare
    if ((float) rounded == y)
        printf("(%d, %d)\n", x, rounded);
} 
```

此代码**未经测试**，如果 则失败`EndX < StartX`，但它应该可以帮助您入门。如果有人有更好的比较方法，请告诉我，我会包括在内。

**编辑添加**

问题已关闭，可能是因为没有明确说明，但我添加了一行以显示您需要处理的位置`StartX == EndX`和`StartY == EndY`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-24T18:55:12.480

如果您需要有效地绘制点，请使用 Bresenham 算法或中点线算法。

如果您只需要积分，那么：

将点之间的线表示为`y = mx + c`

初始化`x`为顶点之一的 x 坐标。从第一个 x 坐标迭代到另一个，`x`根据您想要的点数递增，此 x 的 y 坐标将为`m*x+c`

未经测试，假设`x1 < x2`

```
struct Point {
     double x;
     double y;
};

Point* getPointsBetween(int x1, int y1, int x2, int y2, int numOfPoints) {
    double m = (y2-y1)/(x2-x1);
    double c = y1 - m*x1;

    Point *points = new Point[num];
    double increment = (x2-x1)/numOfPoints);

    for(double i=x1+increment ; i<x2 ; i+=increment) {
        points[i].x = i;
        points[i].y = m*i + c;
    }

    return points;
} 
```

# java - Spring Data JPA @EnableJpaRepositories TypeNotPresentExceptionProxy

> ID：13055659
> 
> 赞同：6
> 
> 时间：2012-10-24T18:42:48.800
> 
> 标签：java, spring, exception, spring-data, spring-data-jpa

我有一个带有弹簧数据 jpa 1.2.0.RELEASE 的弹簧 3.2.0.M2 设置。

我也有java配置。这是我的存储库配置类。

```
@Configuration
@EnableJpaRepositories(basePackages = {"xxx.xxx.xxx.core.dao"})
@EnableTransactionManagement
public class Repository {

    @Bean
    public DataSource dataSource() {
        DriverManagerDataSource dataSource = new DriverManagerDataSource();
        dataSource.setDriverClassName("com.mysql.jdbc.Driver");
        dataSource.setUrl("jdbc:mysql://localhost:3306/xxxx");
        dataSource.setUsername("xxxx");
        dataSource.setPassword("xxxx");

        return dataSource;
    }

    @Bean
    public EntityManagerFactory entityManagerFactory() {
        HibernateJpaVendorAdapter vendorAdapter = new HibernateJpaVendorAdapter();
        vendorAdapter.setGenerateDdl(true);
        LocalContainerEntityManagerFactoryBean factory = new LocalContainerEntityManagerFactoryBean();
        factory.setJpaVendorAdapter(vendorAdapter);
        factory.setPackagesToScan("xx.xxxx.xxxx.xxxx.domain");
        factory.setDataSource(dataSource());
        factory.afterPropertiesSet();
        return factory.getObject();
    }

    @Bean
    public PlatformTransactionManager transactionManager() {
        JpaTransactionManager txManager = new JpaTransactionManager();
        txManager.setEntityManagerFactory(entityManagerFactory());
        return txManager;
    } 
```

当我部署我的应用程序时，出现以下异常：

```
(org.springframework.web.context.ContextLoader:307) - Context initialization failed
org.springframework.beans.factory.BeanDefinitionStoreException: Failed to read candidate component class: file [/Developer/tomcat/webapps/core/WEB-INF/classes/xx/xxxx/xxxx/xxxx/xxxx/Repository.class]; nested exception is java.lang.ArrayStoreException: sun.reflect.annotation.TypeNotPresentExceptionProxy
    at org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider.findCandidateComponents(ClassPathScanningCandidateComponentProvider.java:261)
    at org.springframework.context.annotation.ClassPathBeanDefinitionScanner.doScan(ClassPathBeanDefinitionScanner.java:242)
    at org.springframework.context.annotation.ComponentScanBeanDefinitionParser.parse(ComponentScanBeanDefinitionParser.java:84)
    at org.springframework.beans.factory.xml.NamespaceHandlerSupport.parse(NamespaceHandlerSupport.java:73)
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1431)
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1421)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:184)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.doRegisterBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:140)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:111)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:493)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:390)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:174)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:209)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:180)
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:125)
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:94)
    at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:131)
    at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:535)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:449)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:383)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:112)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4791)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:633)
    at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:968)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:542)
    at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1453)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:301)
    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:836)
    at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:761)
    at org.apache.catalina.manager.ManagerServlet.check(ManagerServlet.java:1445)
    at org.apache.catalina.manager.ManagerServlet.deploy(ManagerServlet.java:677)
    at org.apache.catalina.manager.ManagerServlet.doPut(ManagerServlet.java:435)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:644)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.filters.SetCharacterEncodingFilter.doFilter(SetCharacterEncodingFilter.java:108)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:581)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)
Caused by: java.lang.ArrayStoreException: sun.reflect.annotation.TypeNotPresentExceptionProxy
    at sun.reflect.annotation.AnnotationParser.parseClassArray(AnnotationParser.java:653)
    at sun.reflect.annotation.AnnotationParser.parseArray(AnnotationParser.java:460)
    at sun.reflect.annotation.AnnotationParser.parseMemberValue(AnnotationParser.java:286)
    at sun.reflect.annotation.AnnotationParser.parseAnnotation(AnnotationParser.java:222)
    at sun.reflect.annotation.AnnotationParser.parseAnnotations2(AnnotationParser.java:69)
    at sun.reflect.annotation.AnnotationParser.parseAnnotations(AnnotationParser.java:52)
    at java.lang.Class.initAnnotationsIfNecessary(Class.java:3070)
    at java.lang.Class.getAnnotations(Class.java:3050)
    at org.springframework.core.type.classreading.AnnotationAttributesReadingVisitor.registerMetaAnnotations(AnnotationAttributesReadingVisitor.java:247)
    at org.springframework.core.type.classreading.AnnotationAttributesReadingVisitor.doVisitEnd(AnnotationAttributesReadingVisitor.java:241)
    at org.springframework.core.type.classreading.RecursiveAnnotationAttributesVisitor.visitEnd(AnnotationAttributesReadingVisitor.java:166)
    at org.springframework.asm.ClassReader.a(Unknown Source)
    at org.springframework.asm.ClassReader.accept(Unknown Source)
    at org.springframework.asm.ClassReader.accept(Unknown Source)
    at org.springframework.core.type.classreading.SimpleMetadataReader.<init>(SimpleMetadataReader.java:59)
    at org.springframework.core.type.classreading.SimpleMetadataReaderFactory.getMetadataReader(SimpleMetadataReaderFactory.java:80)
    at org.springframework.core.type.classreading.CachingMetadataReaderFactory.getMetadataReader(CachingMetadataReaderFactory.java:101)
    at org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider.findCandidateComponents(ClassPathScanningCandidateComponentProvider.java:237)
    ... 63 more 
```

当我删除 @EnableJpaRepositores 注释时，它会起作用。至少我是这么认为的，因为我的应用程序上下文将加载，但它会说我使用了依赖注入。当然是通过删除注释引起的。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T23:04:44.530

我遇到了同样的问题，发现这是因为我`spring-data-jpa`的.`spring-data-commons-core``pom.xml`

```
</dependencies>
    ...
    <dependency>
        <groupId>org.springframework.data</groupId>
        <artifactId>spring-data-commons-core</artifactId>
        <version>1.3.2.RELEASE</version>
    </dependency>

    <dependency>
        <groupId>org.springframework.data</groupId>
        <artifactId>spring-data-jpa</artifactId>
        <version>1.2.0.RELEASE</version>
    </dependency>
    ...
</dependencies> 
```

删除`spring-data-commons-core`依赖项，然后只让`spring-data-jpa`依赖项修复它。

```
</dependencies>
    ...
    <dependency>
        <groupId>org.springframework.data</groupId>
        <artifactId>spring-data-jpa</artifactId>
        <version>1.2.0.RELEASE</version>
    </dependency>
    ...
</dependencies> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T10:38:21.187

如果在运行时缺少包含相关应用程序的 JAR 文件，通常会触发此异常。你确定你的运行时类路径包含 Spring Data JPA 1.2.0.RELEASE？确保您没有将旧版本拉入类路径，因为这可能会先加载并导致找不到注释。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T21:30:51.570

Spring-data-commons-core 绝对没问题。只是我们需要使用的版本必须更高。`@EnableJpaRepositories`扩展的类之一( [RepositoryBeanDefinitionRegistrarSupport](http://grepcode.com/file/repo1.maven.org/maven2/org.springframework.data/spring-data-commons-core/1.4.0.RELEASE/org/springframework/data/repository/config/RepositoryBeanDefinitionRegistrarSupport.java#RepositoryBeanDefinitionRegistrarSupport) ) 仅在`spring-data-commons-core 1.4.0.RELEASE`. 下面的作品，因为你需要保留两个库：

```
 <dependency>
        <groupId>org.springframework.data</groupId>
        <artifactId>spring-data-commons-core</artifactId>
        <version>1.4.0.RELEASE</version>
    </dependency>

    <dependency>
        <groupId>org.springframework.data</groupId>
        <artifactId>spring-data-jpa</artifactId>
        <version>1.2.0.RELEASE</version>
    </dependency> 
```

# facebook-graph-api - 页面和 API 之间的标记不一致

> ID：13055660
> 
> 赞同：0
> 
> 时间：2012-10-24T18:42:54.637
> 
> 标签：facebook-graph-api, tagging

我看到我的网页在网络上标记的帖子与 API 之间的结果不一致。一些提及没有出现在 API 中。有什么建议么？

我正在经`manage_pages`许可进行 API 调用。

来自网络

![来自网络](../Images/e9c1839de2b6f1ac5dcc57b7af49ebb2.png)

来自 API。请注意“忽略此提及....”丢失。

![从 API](../Images/86bd4d84a93eae7e537bce29b25382dd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T19:04:38.817

您确定发布这些消息的用户都没有删除平台应用程序访问其数据的能力吗？您可以通过尝试访问来快速检查 `https://graph.facebook.com/<USER ID HERE>`

如果他们从他们的个人资料中阻止了您的应用程序或禁用了所有平台应用程序，则响应将是：

> {"error":{"message":"不支持的获取请求。","type":"GraphMethodException","code":100}}。

# c# - 使用 Linq 解析格式错误的 XML

> ID：13055665
> 
> 赞同：2
> 
> 时间：2012-10-24T18:43:04.383
> 
> 标签：c#, .net, xml, winforms, linq

我正在尝试解析一些我认为在 .net 3.5 中使用 Linq 格式错误的 xml，我需要从 xml 中获取数据并将数据插入变量中，我一直在使用 XmlDocument 来解析 xml，任何示例或非常感谢您的帮助

XML --

```
<?xml version="1.0" encoding="UTF-8"?>
<centovacast version="2.2.4" host="my.domain.com">
<response type="success">
<message>Complete</message>
<data><row>
<field name="mount">/stream</field>
<field name="listenercount">0</field>
<field name="genre">Unspecified</field>
<field name="url">http://</field>
<field name="title"></field>
<field name="currentsong">Placebo - One Of A Kind</field>
<field name="bitrate">128</field>
<field name="sourceconnected">1</field>
<field name="serverstate">1</field>
<field name="sourcestate">1</field>
<field name="reseller">0</field>
<field name="ipaddress"></field>
<field name="port">13282</field>
<field name="proxy">0</field>
<field name="servertype">ShoutCast</field>
<field name="sourcetype">icescc</field>
</row><row><field></field></row></data></response></centovacast> 
```

* * *

另一个问题是有时“currentsong”值可能包含特殊字符，例如！, % , ^ & 等等，我知道这有时会导致 xml 出现问题。

-- 我试图用来解析 XML 的代码

```
 XElement xml = XElement.Parse(data);

        var query = from p in xml.Elements("name")
                    select p;

        foreach (var record in query)
        {
            MessageBox.Show(String.Format("Info: {0} {1}",
                                                record.Element("url"),
                                                record.Element("title")));
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:54:23.933

你的 LINQ 是错误的。您正在寻找一个名为`name`. 你没有。你有元素叫做`field`.

ETA：好的，现在我正在重做这个，因为我对你的 XML 有了更好的了解。

```
 var query = from r in xml.Elements("row") 
                select r; 
```

您还需要查看 Attributes 集合，因为这`name`就是：属性。以下内容来自记忆，但看起来像这样：

```
foreach(XElement row in query)
{
    var urlElement = row.Elements("field").Single(qe=>qe.HasAttributes && qe.Attribute("name").Value == "url");
    var titleElement = row.Elements("field").Single(qe => qe.HasAttributes && qe.Attribute("name").Value == "title");
    MessageBox.Show(String.Format("Info: {0} {1}", urlElement.Value, titleElement.Value));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T19:16:27.660

下面的 Linq2Xml 代码适用于您的 xml。

```
var xDoc = XDocument.Parse(xml); //XDocument.Load(filename)

var dict = xDoc.Descendants("field")
               .Where(e=>e.HasAttributes)
               .ToDictionary(e => e.Attribute("name").Value, e => e.Value);

Console.WriteLine(dict["currentsong"]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T19:27:54.037

以下代码将以您想要的方式解析 XML。请注意，如果 XElement 中包含任何特殊字符，您可能会遇到问题，因为 XElement 在加载 XML 时会抛出异常。在尝试解析字符串之前，您可能需要预处理字符串以正确转义这些字符。另请注意，它不喜欢带有空字段元素的第二行元素。如果您希望从源代码中获得类似的信息，则必须编写一些错误处理程序来找到它或捕获异常并转储整行。

提供的 XML 格式不差，但很奇怪 - 每个字段的名称应该是元素的名称，而不是它的属性。这使得解析它有点棘手。这使用 Descendents 跳过其他元素并直接获取文件中的所有行元素。然后使用 Linq First 方法查找具有所需属性值的元素并从中获取元素值。

```
var query = from p in xml.Descendants("row")
                    select p;

foreach (var record in query)
{
    MessageBox.Show(String.Format("Info: {0} {1}",
        record.Elements().First(e => e.Attribute("name").Value.Equals("url")).Value,
        record.Elements().First(e => e.Attribute("name").Value.Equals("title")).Value));
} 
```

# symbolic-math - 论文中讨论的 KLEE core-utils 实验的输入是什么？

> ID：13055668
> 
> 赞同：-1
> 
> 时间：2012-10-24T18:43:08.210
> 
> 标签：symbolic-math, gnu-coreutils, klee

我无法重现本文图 7 中的结果：

[http://www.stanford.edu/~engler/klee-osdi-2008.pdf](http://www.stanford.edu/~engler/klee-osdi-2008.pdf)

具体来说，我尝试测试核心 util 的“tac”命令：

```
klee.cde -max-time=60 --optimize --libc=uclibc --posix-runtime ./tac.bc -r -sym-files 20 1 
```

但是，我没有看到 KLEE 报告的任何错误消息，尽管该论文声称应该存在错误。

另一方面，如果我像这样测试核心 util 的“md5sum”命令：

```
klee.cde -max-time=60 --optimize --libc=uclibc --posix-runtime ./md5sum.bc -c -sym-files 1 10 
```

KLEE 报以下错误：

```
: /root/coreutils-6.10/obj-llvm/src/../../src/md5sum.c:212: memory error: out of bound pointer 
```

有人可以指出正确的方向来发现“tac”或“pr”命令中的错误吗？如果这些都需要文件“t2.txt”和“t3.txt”，它们分别在论文中定义为“\b\b\b\b\b\b\b\t”和“\n”。

将不胜感激所有/任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T05:14:50.033

您可以尝试为 --max-time 设置更大的值，它为 KLEE 设置时间限制。

# mysql - #1054 - 未知列

> ID：13055680
> 
> 赞同：2
> 
> 时间：2012-10-24T18:44:28.170
> 
> 标签：mysql, sql, varchar, sqldatatypes, mysql-error-1054

我正在使用 MySQL 5.5 和 phpmyadmin 3.5.2（由[http://www.freewebhostingarea.com](http://www.freewebhostingarea.com)提供）

我的sql查询是：

```
INSERT INTO `example`(`id`, `name`, `password`) VALUES (1,we,5) 
```

其中 id 是 int 类型，名称和密码是`varchar`.

但是当在名称和年龄中插入除整数以外的任何值时，它会显示 #1054 错误，即

```
#1054 - Unknown column 'we' in 'field list' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T18:47:14.620

您必须用引号将任何字符串括起来。

```
INSERT INTO `example`(`id`, `name`, `password`) 
VALUES               (1,'User Name','Password123') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T18:56:51.533

您必须添加`''`for`we`并且可能添加 for `password`：

```
INSERT INTO `example`(`id`, `name`, `password`) VALUES (1,'we','5') 
```

因为这两个值都是 char 类型。

# installshield - MsBuild 错误 MSB3202：找不到项目文件“http://localhost/xxx”

> ID：13055681
> 
> 赞同：0
> 
> 时间：2012-10-24T18:44:34.097
> 
> 标签：installshield, installshield-2012

我们最近开始使用 InstallShield。我们的解决方案中有几个网站，而不是 Web 应用程序项目，还有一堆 C# 项目。这些网站引用了其他 C# 项目。在 Visual Studio 中构建 isproj 时，一切都很好。但是在命令行中构建解决方案时，在同一台开发机器上，使用独立构建，isproj 会在两个网站上抛出以下错误：

C:\Program Files (x86)\MSBuild\InstallShield\2012Spring\InstallShield.targets (14,3)：错误 MSB3202：找不到项目文件“http://localhost/xxx”。

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T00:52:16.777

实际上我们联系了InstallShield。不支持网站。他们只支持网络项目。我们必须通过使用其他 VS 命令分别构建我们的网站，然后抓取文件来解决这个问题。

# git - 如何在git中为给定作者获取给定分支上的总添加和删除

> ID：13055685
> 
> 赞同：31
> 
> 时间：2012-10-24T18:44:48.367
> 
> 标签：git

git中有没有办法计算给定分支上给定用户的总删除和添加？类似的东西在 github 上，在图表部分有一个图表显示了总的添加和删除，但只在主分支上......我认为如果他们这样做了，这在 git 中也应该是可能的，所以，有人知道该怎么做吗？

先感谢您。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-10-24T19:05:18.677

我不认为 Git 有任何内置命令可以做到这一点。但是在其他一些标准实用程序的帮助下，它可以完成。下面是一个示例，通过 awk 过滤 Git 的日志输出以获取总插入和删除的摘要：

```
git log --author=$USER --shortstat $BRANCH | \
awk '/^ [0-9]/ { f += $1; i += $4; d += $6 } \
END { printf("%d files changed, %d insertions(+), %d deletions(-)", f, i, d) }' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-10-28T13:21:02.000

# c++ - 在我的程序中使用 eof 然后不断循环 为什么？

> ID：13055689
> 
> 赞同：2
> 
> 时间：2012-10-24T18:45:10.523
> 
> 标签：c++, while-loop, infinite-loop, eof

> **可能重复：**
> [为什么循环条件内的 iostream::eof 被认为是错误的？](https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong)

这是我编译的程序，除了带有 eof 的 while 循环之外的所有内容都变得无限，文件 score.dat 包含 20 个随机数的列表。为什么eof不起作用并使其不断循环？？？

```
#include <iostream>
#include <fstream>
#include <cmath>
using namespace std;

int main ()
{

  int x, sum = 0, count = 0;
  double answer;
  ifstream  y;

  y.open("scores.dat");
  while (!y.eof())
   {
     y >> x;
     sum = sum + x;
     count ++;
     cout << x << endl;
   }

  answer = sqrt (((pow(x, 2.0)) - ((1.0/count) * (pow(x, 2.0)))) / (count - 1.0));
  cout << answer;

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T18:47:09.510

EOF 不是唯一的失败标志。如果其他之一（例如`fail`（转换）标志）被设置，那么它只会循环。

试试这个：

```
std::ifstream y("scores.dat");
while (y >> x) {
    sum += x;
    ++count;
    std::cout << x << std::endl;
} 
```

这是执行此操作的惯用方法，extractin 运算符将引用返回给流，只要未设置所有失败位，流就会评估为 true。

编辑：虽然我在这里，但请`+= operator`注意`ifstream`.

# c# - Windows 图像采集 (WIA) 2.0 神秘错误

> ID：13055693
> 
> 赞同：1
> 
> 时间：2012-10-24T18:45:23.590
> 
> 标签：c#, dynamic, wia

我正在查看从[这里](http://miljenkobarbir.com/using-a-scanner-without-dialogs-in-net/)找到的代码。当我在 vs12 中打开下载的源代码项目时，一切正常。但是当我将类复制到我自己的项目中时，下面会出现一个错误（红色波浪线）

`WIA.ImageFile image = (WIA.ImageFile)wiaCommonDialog.ShowTransfer(item, wiaFormatBMP, false);`

据我所知，所有参考资料都已添加。错误描述是：“找不到编译动态表达式所需的一种或多种类型。您是否缺少参考？”

知道为什么会发生这种情况以及如何解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:52:05.197

在您复制/粘贴代码的地方，确保`.Net Framework`该项目的目标是`4.0 or above (4.5)`.

**编辑**

尝试编译在 .NET 中使用动态类型的解决方案时，您会收到此错误。`System.Core.dll`如果您使用的是 Visual Studio，您的项目极不可能缺少对的引用。这通常发生在项目没有引用`Microsoft.CSharp.dll`. 将此引用添加到引用文件夹并重新编译。

# web-services - 保护使用 Web 服务的移动应用程序的最佳实践

> ID：13055695
> 
> 赞同：4
> 
> 时间：2012-10-24T18:45:42.537
> 
> 标签：web-services, security, mobile, azure, titanium

我正在使用 Appcelerator Titanium 开发应用程序，它们与我们在 Windows Azure 中托管的 Web 服务集成。我需要知道最常见的攻击是什么，以及防范这些攻击的最佳实践是什么？我需要你指导我找到一些好的资源。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:14:29.863

好的，这就是我所说的保护移动服务的最佳起点：http: [//msdn.microsoft.com/en-us/library/windowsazure/hh696898.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh696898.aspx)

如果您正在以 Web 角色运行您正在运行的 Web 服务，您也可以查看这个。 [http://www.windowsazure.com/en-us/develop/net/best-practices/security/](http://www.windowsazure.com/en-us/develop/net/best-practices/security/)

我已经很好地使用了它们！

# c# - 确定 AD 安全组的电子邮件地址

> ID：13055696
> 
> 赞同：4
> 
> 时间：2012-10-24T18:45:50.413
> 
> 标签：c#, active-directory, directoryservices

在工作中的 AD 中，我们有一些启用邮件的安全组。我正在使用 System.DirectoryServices.AccountManagement 命名空间，如下所示：

```
 List<GroupPrincipal> result = new List<GroupPrincipal>();            
        using (PrincipalContext domain = new PrincipalContext(ContextType.Domain, userinfo[0]))
        using (UserPrincipal user = UserPrincipal.FindByIdentity(domain, username))
        {

            if (user != null)
            {
                PrincipalSearchResult<Principal> groups = user.GetAuthorizationGroups();

                int totalGroupCounter = 0;
                StringBuilder output = new StringBuilder();
                List<GroupPrincipal> securityGroups = new List<GroupPrincipal>();
                List<GroupPrincipal> distributionGroups = new List<GroupPrincipal>();

                foreach (Principal group in groups)
                {
                    totalGroupCounter++;

                    if (((GroupPrincipal)group).IsSecurityGroup.Value)                        
                        securityGroups.Add((GroupPrincipal)group);                        
                    else                        
                        distributionGroups.Add((GroupPrincipal)group);                        
                }                
            }
        } 
```

有了这些信息，找到群组电子邮件地址的正确方法是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-19T16:41:42.830

AccountManagement 库限制了您可以访问的属性。如果要获取组的电子邮件属性，则需要将其转换回[`DirectoryEntry`](http://msdn.microsoft.com/en-us/library/system.directoryservices.directoryentry.aspx)对象。

```
PropertyValueCollection email = ((DirectoryEntry)group.GetUnderlyingObject()).Properties["mail"];
if (email.Value != null)
{
    // Do something with email property
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T15:44:42.957

I consider marc_s an expert on active directory topics, but, I too had a security group that had an e-mail address associated with it. Here is how I was able to fetch the e-mail from it:

```
private void GetGroupEmail() {
    using (var searcher = new DirectorySearcher()) {
        searcher.Filter = "(&(objectClass=group))";
        searcher.SearchRoot = entry;
        searcher.PropertiesToLoad.Add("mail");

        foreach (SearchResult sr in searcher.FindAll()) {
            var email = GetSearchResultProperty(sr, "mail");
        }
    }
}

private string GetSearchResultProperty(SearchResult sr, string propertyName) {
    var property = sr.Properties[propertyName];

    if (property != null && property.Count > 0) {
        return (string)property[0];
    } else {
        return null;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-15T08:36:48.553

测试启用邮件的组的最安全方法是读取 proxyAddresses 并测试任何以“smtp:”开头的条目。仅测试电子邮件字段是不够的。像这样扩展 GroupPrincipal

```
public bool IsMailEnabled
        {
            get
            {
                var proxyAddresses = ExtensionGet("proxyAddresses");
                if (proxyAddresses == null)
                    return false;

                if (proxyAddresses.Length == 0)
                    return false;

                try
                {
                    List<string> proxyAddressesStringList = proxyAddresses.Cast<string>().ToList();
                    if (proxyAddressesStringList.Where(x => x.StartsWith("smtp:", StringComparison.InvariantCultureIgnoreCase)).Count() > 0)
                        return true;
                    else
                        return false;
                }
                catch
                {
                    return false;
                }
            }
        } 
```

# python - 如何在 Python 中获取 SNMP 数据包的请求 ID

> ID：13055699
> 
> 赞同：1
> 
> 时间：2012-10-24T18:46:27.763
> 
> 标签：python, snmp

哪个 SNMP 库提供 API 来获取捕获的 (tcpdump) SNMP 数据包的单个属性，例如请求 ID 或协议版本？

我发现 pySNMP 提供了如此低级的 API，但仅适用于 v1/v2c 版本。但我需要 v2c 和 v3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T08:31:34.313

你到底想知道什么。是否：python net-snmp api 是否支持 v3 或 oid 用于查找 snmp 数据包的 request-id

# jquery - 与#C 相比，使用 E#C CSS 选择器是否有任何性能优势？

> ID：13055707
> 
> 赞同：0
> 
> 时间：2012-10-24T18:46:43.233
> 
> 标签：jquery, performance, jquery-selectors

我目前正在阅读 jQuery 以填补一些知识空白。

查看各种 CSS 选择器，我看到：-

*   `#C`（任何 ID 为 C 的元素）

    ```
    $('#profile') 
    ```

*   `E#C`（ID 为 #C 的 E 类型的任何元素）。

    ```
    $('div#profile') 
    ```

我知道特殊性在 CSS 规则的应用中很重要，但鉴于在页面上有重复的 ID 是不好的做法，我想知道为什么存在第二种形式以及如何在 jQuery 中处理它。

它在查询 DOM 时是否具有性能优势？（即立即限制选择范围）。这个问题主要适用于 jQuery，但我也很想知道它是否对渲染引擎等有任何影响。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T18:52:26.577

jQuery 有一个[专门的“快速路径”](https://github.com/jquery/jquery/blob/master/src/core.js#L127)来处理`#C`带有直接`document.getElementById`. `E#C`此路径不处理表单的选择器，而是委托给[Sizzle](http://sizzlejs.com/)库。

因此，我看不出如何`E#C`在实践中提供任何性能优势，而理论上也没有关于更好性能的论据。确实，`E#C`要慢得多；[在此处查看巨​​大的性能差异](http://jsperf.com/selecting-by-id-with-jquery)¹。

也就是说，`E#C`选择器当然更具限制性，因此无论选择是由 jQuery 还是任何其他介质完成，两者的*行为都会有所不同。*即便如此，我从未使用过`E#C`（或见过使用过）；我想不出任何理由在不同的页面上重用一个 id。

* * *

¹不可否认，在现实生活中，选择器不会循环运行，因此性能差异并不重要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T18:51:47.913

jQuery 使用自下而上的搜索。它从最后一个选择器开始并向上过滤。

例子：

$('#id1 .class1 .class2') 查找 class2 的所有类，然后过滤所有具有 class1 父级的类的结果，然后使用 id 为 id1 的父级进一步过滤

$('#profile') 和 $('div#profile') 本质上是相同的，大约是毫秒的几分之一。但最好了解性能优势以及如何适当地遍历 DOM。

# php - PHP系统命令中的批处理

> ID：13055711
> 
> 赞同：-1
> 
> 时间：2012-10-24T18:46:49.870
> 
> 标签：php, ubuntu, batch-file, jobs

这是在 Ubuntu 系统上。当用户向我们的网站提交作业时，我想将其作为批处理作业运行。Cmd.sh 是一个 shell 脚本。在终端中手动运行时，脚本执行良好，但由于某种原因不会作为批处理作业运行。当前的PHP是：

```
system("echo /var/www/dbCAN/data/blast/$jobid/cmd.sh | batch"); 
```

它不会打印错误或崩溃，它只是不提交作业。此外，如果我将此代码更改为仅删除“|批处理”，则文件将正常执行。我不想直接执行它的原因是它是一个密集的过程，可能需要一些时间，我们通常会在用户的工作完成时向他们发送电子邮件（而不是一次运行多个工作）。任何人都知道为什么这不起作用？我知道路径是正确的，但我不确定批量使用。帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T19:09:11.023

来自`man batch`：

> 对于 **at** 和 **batch ，从标准输入或使用****-f**选项指定的文件读取命令并执行。

~~所以也许试试`batch -f /var/www/dbCAN/data/blast/$jobid/cmd.sh`？~~

显然，`batch`不再支持参数（`batch accepts no parameters`当我尝试使用`-f`参数运行它时得到了）。以下对我来说等效（显然使用不同的文件路径）：

```
at -q b -m now -f /var/www/dbCAN/data/blast/$jobid/cmd.sh 
```

参考：[#419547 - at: batch 不再接受参数](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=419547)。

# django-celery - celery(d) 3.0.9 的第一步

> ID：13055712
> 
> 赞同：1
> 
> 时间：2012-10-24T18:46:54.667
> 
> 标签：django-celery, djcelery

在同一台机器上的两个 shell 中，我执行以下操作：

a) /home/user/prod/env/bin/python /home/user/prod/www/devcode/manage.py celery worker -E

和芹菜启动，显然没有问题

b) /home/user/prod/env/bin/activate && /home/user/prod/www/devcode/manage.py 芹菜状态

产生：

错误：在时间限制内没有节点回复。

显然我错过了一些基本的东西，但经过 2 天的尝试，我需要问:(

# android - 没有自定义 ROM 的 Android 锁定？

> ID：13055713
> 
> 赞同：0
> 
> 时间：2012-10-24T18:46:56.743
> 
> 标签：android

我正在尝试锁定一个 android 平板电脑以获得类似信息亭的功能，并探索了这样做的现有应用程序选项，但没有找到任何满足我需求的东西。具体来说，平板电脑需要能够在“正常”模式下无需密码即可操作，从而将用户锁定在批准的应用程序（或多个应用程序）提供的功能之外的任何功能之外；但是，平板电脑不得允许用户在没有密码的情况下绕过信息亭功能（例如，通过进入“安全模式”）。到目前为止，我使用的应用程序通过强制您提供屏幕锁定密码来解决“安全模式”问题，但这意味着用户每次锁定平板电脑时都必须提供密码，这不适用于我的用例（用户将他们的平板电脑带回家并赢了）

我怀疑我正在寻求的功能无法在应用程序级别实现，并且需要自定义 ROM，但我想在开始这条道路之前我会调查这个小组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T18:54:18.647

> 到目前为止，我使用的应用程序通过强制您提供屏幕锁定密码来解决“安全模式”问题

除非通过修改固件，否则不可能“绕过安全模式问题”。或者，如果是，则意味着“安全模式”本身已损坏。假设应用程序不是固件的一部分，那么任何具有此“屏幕锁定密码”的应用程序都不会在安全模式下运行。

> 我怀疑我正在寻求的功能无法在应用程序级别实现，并且需要自定义 ROM

从技术上讲，原则上，您可以根设备，进行一些更改（例如，删除库存主屏幕 APK 并添加您的），然后取消根设备。我不是生根方面的专家，但我的印象是根在某些情况下是可逆的，但也许不是所有情况。这可能允许在没有完整 ROM 模块的情况下对设备环境进行更多“战术”修改。

话虽如此，请记住，如果您使用的设备*可以*被植根，则生根配方可能由用户执行。这取决于食谱。`adb`例如，可以通过不允许打开 USB 调试来阻止需要您访问的那些。但是，那些只需要外部存储上的魔术文件并重新启动的人可能无法停止。

# python - numpy 数组：在循环中访问元素会出错

> ID：13055717
> 
> 赞同：0
> 
> 时间：2012-10-24T18:47:09.947
> 
> 标签：python, arrays, numpy, matplotlib

此代码引发异常：

```
"list index out of range" 
```

在下面标记的行。

```
col_sig_squared = [np.zeros(shape=(1,6), dtype=int)]

def calculate_col_sigma_square(matrix):
    mx = np.asarray(matrix)
    for(x,y), value in np.ndenumerate(matrix):
    if(x > 4):
            continue
    else:
        val = matrix[x][y] - x_bar_col[x]
        val = val**2
        EXCEPTION-->print col_sig_squared[y] 
```

为什么这是个问题？`col_sig_squared`是一个带索引的数组。为什么我不能像这样访问它。尝试了很多东西，但不确定为什么这种语法是错误的。我是 Python 及其复杂性的新手，任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T19:19:20.733

好吧，该消息非常清楚地告诉您出了什么问题。`y`在那一点上大于 中的项目数`col_sig_squared`。这并不让我感到惊讶，因为`col_sig_squared`它被定义为一个包含一个项目的列表，一个 NumPy 数组：

```
col_sig_squared = [np.zeros(shape=(1,6), dtype=int)] 
```

这意味着只有`col_sig_squared[0]`有效。

也许你的意思是：

```
col_sig_squared = np.zeros(shape=(1,6), dtype=int) 
```

现在`col_sig_squared`是一个 NumPy 数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T20:55:42.183

*使用 . 来表示 NumPy数组*向量更为常见`shape = (N,)`。例如：

```
>>> col_sig_1byN = np.zeros(shape=(1,6), dtype=int)
>>> col_sig_N = np.zeros(shape=(6,), dtype=int)
>>> print col_sig_1byN
[[0 0 0 0 0 0]]
>>> print col_sig_N
[0 0 0 0 0 0] 
```

您可以索引`col_sig_N`为`col_sig_N[p]`，但`col_sig_1byN`您必须这样做`col_sig_1byN[0,p]`- 请注意，这`[x,y]`是索引到多维 NumPy 数组的方法。

要索引整行/列，您可以执行`[x,:]`/ `[:,y]`。

而且，[正如kindall所说](https://stackoverflow.com/a/13056195/120261)，你不应该将你的数组嵌入到一个列表中。

# python - Django - 在 apache 每个请求创建的所有进程之间共享 RabbitMQ 连接？

> ID：13055718
> 
> 赞同：3
> 
> 时间：2012-10-24T18:47:12.280
> 
> 标签：python, django, apache, rabbitmq, pika

我的堆栈是*Django 1.3(Python 2.7)* + *Apache* + mod_wsgi

*Apache*为每个请求生成一个新进程......有时在这些请求中，我必须向*RabbitMQ**发布*一条消息，说明稍后要完成的一些繁重任务（比如通知某人的关注者他们刚刚发布的猫照片）。

 **发布*涉及与*RabbitMQ*建立连接，这很昂贵。（请参阅这个 SO 问题：[RabbitMQ 创建连接是一项昂贵的操作](https://stackoverflow.com/questions/11147065/rabbitmq-create-connection-is-an-expensive-operation)）

我也很遗憾地意识到 Python 无法跨进程共享内存......叹息:(

在这种情况下，如何防止每个 apache 请求创建和关闭 RabbitMQ 连接的开销？

为了清晰，这里使用 RabbitMQ + pika 是我在进程之间共享连接的失败尝试：

```
def test_view(request):
    """a django view publishing to RabbitMQ"""
    connection = Connection.get_shared_connection()
    channel = connection.channel() 
    channel.queue_declare(queue='test_queue', auto_delete=False, durable=True)
    channel.basic_publish(exchange='', routing_key='test_queue', body='Hello Rabbit!', 
                                properties=pika.BasicProperties(delivery_mode=2))
    print 'SENT:', body

    return HttpResponse("published")

class Connection(object):
    """failed attempt to create a singleton"""
    _connection = None

    @staticmethod
    def get_shared_connection(): # return a pika connection
        if not Connection._connection:
            print 'NEW CONNECTION'  # prints NEW CONNECTION with every request
            Connection._connection = pika.BlockingConnection(pika.ConnectionParameters(
                                                                           host='localhost'))
        return Connection._connection 
```

在服务器设置（*Django* + *Apache* + mod_wsgi）`'NEW CONNECTION'`中打印每个请求`test_view`

这似乎是任何人在使用 Django 和 RabbitMQ 时都会遇到的问题。一定有办法...

谢谢...任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:41:50.730

Apache 不会为每个请求生成一个新进程。

您可能会误以为这是因为在嵌入式模式下它可以是一个多进程 Web 服务器，因此不同的请求可能会在单独的进程中得到处理。

我会建议您使用 mod_wsgi 守护程序模式并使用单个多线程进程，但不幸的是，您的代码不是线程安全的，因为您不保护同时从多个线程创建全局套接字连接。但是，仅此一项也无济于事，因为如果多个线程同时尝试使用该一个连接，则可能会导致问题。所以你真的需要每个线程都有一个连接对象。

我建议您阅读以下内容以了解有关 Apache/mod_wsgi 的不同进程/线程模型的一些背景知识。

*   [http://blog.dscpl.com.au/2012/10/why-are-you-using-embedded-mode-of.html](http://blog.dscpl.com.au/2012/10/why-are-you-using-embedded-mode-of.html)
*   [http://code.google.com/p/modwsgi/wiki/ProcessesAndThreading](http://code.google.com/p/modwsgi/wiki/ProcessesAndThreading)
*   [http://blog.dscpl.com.au/2009/03/python-interpreter-is-not-created-for.html](http://blog.dscpl.com.au/2009/03/python-interpreter-is-not-created-for.html)*

# django - 在 Django 中强制执行密码强度要求

> ID：13055722
> 
> 赞同：2
> 
> 时间：2012-10-24T18:47:17.387
> 
> 标签：django, django-forms, django-admin

我正在努力实现这里建议的代码：

*   [使用 django.contrib.auth.views.password_change 强制执行密码强度要求](https://stackoverflow.com/questions/5226329/enforcing-password-strength-requirements-with-django-contrib-auth-views-password)

但是有了这段代码：

```
from django.conf.urls.defaults import include
from django.conf.urls.defaults import patterns
from django.conf import settings
from django.contrib.auth.views import password_change
from django.contrib import admin
from django_pci_auth.views import index
from django_pci_auth.forms import ValidatingPasswordChangeForm
import django.contrib.admindocs.urls

admin.autodiscover()

urlpatterns = patterns(
    '',  # prefix
    (r'^admin/', include(admin.site.urls)),
    (r'^admin/doc/', include(django.contrib.admindocs.urls)),
    (r'^change_password/$', password_change,
        {'password_change_form': ValidatingPasswordChangeForm}),
    (r'', index),
)

if settings.DEBUG:
    urlpatterns += patterns(
        '',
        (r'^media/(?P<path>.*)$', 'django.views.static.serve',
            {'document_root': settings.MEDIA_ROOT}),
    ) 
```

我得到：

```
Environment:

Request Method: GET
Request URL: http://127.0.0.1:8000/change_password/

Django Version: 1.4.2
Python Version: 2.7.2
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.admin',
 'django.contrib.admindocs')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Traceback:
File "/Users/aclark/Developer/django-pci-auth/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/Users/aclark/Developer/django-pci-auth/lib/python2.7/site-packages/django/views/decorators/debug.py" in sensitive_post_parameters_wrapper
  69\.             return view(request, *args, **kwargs)
File "/Users/aclark/Developer/django-pci-auth/lib/python2.7/site-packages/django/utils/decorators.py" in _wrapped_view
  91\.                     response = view_func(request, *args, **kwargs)
File "/Users/aclark/Developer/django-pci-auth/lib/python2.7/site-packages/django/contrib/auth/decorators.py" in _wrapped_view
  20\.                 return view_func(request, *args, **kwargs)
File "/Users/aclark/Developer/django-pci-auth/lib/python2.7/site-packages/django/contrib/auth/views.py" in password_change
  244\.         post_change_redirect = reverse('django.contrib.auth.views.password_change_done')
File "/Users/aclark/Developer/django-pci-auth/lib/python2.7/site-packages/django/core/urlresolvers.py" in reverse
  476\.     return iri_to_uri(resolver._reverse_with_prefix(view, prefix, *args, **kwargs))
File "/Users/aclark/Developer/django-pci-auth/lib/python2.7/site-packages/django/core/urlresolvers.py" in _reverse_with_prefix
  396\.                 "arguments '%s' not found." % (lookup_view_s, args, kwargs))

Exception Type: NoReverseMatch at /change_password/
Exception Value: Reverse for 'django.contrib.auth.views.password_change_done' with arguments '()' and keyword arguments '{}' not found. 
```

代码在这里：[https ://github.com/aclark4life/django-pci-auth](https://github.com/aclark4life/django-pci-auth)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T19:02:33.253

您需要更改密码的 url...[这里](http://www.insomnihack.com/?p=451)是设置您想要使用完整 urls.py 做什么的好指南。

# r - 向量化 glm 并提取所有信息

> ID：13055726
> 
> 赞同：1
> 
> 时间：2012-10-24T18:47:34.953
> 
> 标签：r, vectorization, glm, tapply

我有一个包含多个组的数据集“关键字”。我想将 glm 单独应用于每个组，以创建一个 glm 列表适合每个组。

我可以用**for**循环来做到这一点，但这不是 R 精神。相反，我尝试使用**by**函数来做到这一点：

```
CTR.glm <- by(keywords,keywordsInSample,
          function(x) ifelse(nlevels(factor(x$AveragePosition))>20, # only these keywords will be fit
                             glm(Clicks ~ poly(log(AveragePosition),2) + offset(log(Impressions)),
                                 family = poisson,data = x),
                             NA)) # for functions that can't be fit 
```

问题是虽然**glm**通常返回一个 glm 类对象，我可以从中提取各种好东西，但**返回**一个列表

```
> CTR.glm[2]
$`text of second keyword`
               (Intercept) poly(log(AveragePosition), 2)1 poly(log(AveragePosition), 2)2 
                 -3.626237                      -5.108795                      -1.751032 
> class(CTR.glm[2])
[1] "list" 
```

除拟合参数外，所有信息均已丢失。有没有办法强制保留有关列表的所有信息？

ps，我尝试使用**plyr**工具箱，但它卡住了，因为我的关键字中有空格。

pps，这篇文章应该有标签“by”，但我无法创建该标签（stackoverflow 的新标签），有人可以重新标记它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T19:40:36.907

尝试

```
lapply(CTR.glm,summary) 
```

该列表可能包含模型对象，其中仍然包含您需要的信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T19:20:14.400

我认为`plyr`应该工作得很好。我不知道你的结构`keywords`and `keywordsInSample`，但考虑到这个玩具示例工作正常：

```
require(plyr)
#generate some fake data, with a factor whose names have spaces in them
l <- c(rep("a a", 3), rep("a", 3), rep("b b", 3))
x <- rep(1:3, 3)
y <- rnorm(9)
d <- data.frame(keywordsInSample=grp, x=x, y=y)

lmList <- dlply(d, .(keywordsInSample), function(df) glm(df$y~df$x))
lmList$"a a" 
```

只要您的索引变量可以强制成为一个因子，R 就会在内部将其表示为数字级别，并且不应该关心级别的名称包含什么。

# python - 运行程序后使按钮消失

> ID：13055727
> 
> 赞同：1
> 
> 时间：2012-10-24T18:47:35.573
> 
> 标签：python, button, python-2.7, tkinter

我有一个 Tkinter 窗口，目前有 18 个按钮，它们都有相同的代码：

```
 Button2=Button(master,text='click me',command=lambda:callback())
    Button2.grid(row=1,column=2) 
```

当我执行此代码时，它会运行该过程

```
callback 
```

但我希望它运行程序然后消失；我努力了

```
def hide_me(event):
event.widget.grid_forget()

Button2=Button(master,text='click me',command=lambda:callback())
Button2.bind('<Button-1>',hide_me) 
Button2.grid(row=1,column=2) 
```

但是当我按下按钮时，它会使按钮消失而不执行回调，当我尝试时：

```
def callback(Buttons):

   C = Characters.pop(0)
   Buttons.bind('<Button-1>',hide_me())
   return C()

Button2=Button(master,text='click me',command=lambda:callback(Button2))
Button2.bind('<Button-1>',hide_me) 
Button2.grid(row=1,column=2) 
```

它运行回调，但按钮不会消失。谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T18:53:21.347

`bind`如果您已经使用`command`关键字 arg，则不应调用。

只需包装`callback()`成`grid_forget()`一种方法：

```
def callback_and_hide(button):
    callback()
    button.grid_forget()

Button2 = Button(master,text='click me',command=lambda: callback_and_hide(Button2)) 
```

# c# - 如何在c#的列表中使用Except方法

> ID：13055733
> 
> 赞同：26
> 
> 时间：2012-10-24T18:47:59.557
> 
> 标签：c#, .net, list, ienumerable

我创建了一个两个 int 类型的列表，并使用 except 方法将仅在 list1 中的项目分配给 list1。例如

```
List<int> list1 = new List<int>();
List<int> list2 = new List<int>();

list1 = {1,2,3,4,5,6} // get items from the database
list2 = {3,5,6,7,8}   // get items from the database

list1 = list1.Except(list2); // gives me an error. 
```

请给我建议。什么是正确的方法。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-10-24T18:51:21.050

`Except`方法返回`IEnumerable`，需要将结果转换为列表：

```
list1 = list1.Except(list2).ToList(); 
```

这是一个完整的例子：

```
List<String> origItems = new List<String>();
    origItems.Add("abc");
    origItems.Add("def");
    origItems.Add("ghi");

    List<String> newItems = new List<String>();
    newItems.Add("abc");
    newItems.Add("def");
    newItems.Add("super");
    newItems.Add("extra");

    List<String> itemsOnlyInNew = newItems.Except(origItems).ToList();
    foreach (String s in itemsOnlyInNew){
        Console.WriteLine(s);
    } 
```

由于 origItems 中唯一不存在的项目是*super* & *extra*，结果输​​出为：

> 极好的
> 
> 额外的

# css - CakePHP css 图像路径不起作用

> ID：13055737
> 
> 赞同：0
> 
> 时间：2012-10-24T18:48:15.733
> 
> 标签：css, cakephp

我下载了 CakePHP 2.2.3 并且正在建立我的新站点。但是，我在从`view/webroot/img/logos/filename.jpg`CSS 文件中调用图像时遇到了问题。在 CSS 文件中，我使用的是这个路径：`background: url("../img/logos/filename.jpg")`，但图像没有显示出来。在早期版本的 CakePHP 中它可以正常工作。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T07:58:42.237

我假设您的图像确实`app/webroot/img/logos/filename.jpg`位于标准配置中的位置（而不是`view/webroot/img/logos/filename.jpg`您所写的）

您的实现是正确的，这对于 CakePHP 2.2.3 应该以完全相同的方式工作。检查文件的权限，Web 服务器需要对您的文件具有读取权限：`app/webroot/img/logos/filename.jpg`

# jquery - 使用 jQuery 自动调整列以具有相同的高度

> ID：13055740
> 
> 赞同：0
> 
> 时间：2012-10-24T18:48:25.647
> 
> 标签：jquery, html, css

我有一个侧边栏和内容区域，每个区域都有独特的背景颜色。它们都是浮动的，所以我无法让 2 的大小相同，这样它们就可以一直蔓延到底部。我想用 jQuery 我可以确定每列的高度，然后自动调整另一列的大小，使它们具有相同的高度，但是我的脚本返回 px 中的值，所以我无法进行直接比较。

还有其他更好的方法吗，您可以建议我吗？

```
// Sample code:
var left_bar = $("#left_bar").css("height");
var content_area = $("#content_area").css("height");
if(left_bar > content_area) {
    $("#content_area").attr("height",left_bar);
} else {
    $("#sidebar").attr("height",content_area);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:53:18.850

你应该使用`.height()`而不是`attr('height', left_bar)`- 这会给你一个数字值。

```
var a = $('#left_bar'), b = $('#content_area');

if (a.height() > b.height()) {
 b.height(a.height()); 
} else {
 a.height(b.height()); 
} 
```

演示：http: [//jsbin.com/olopuy/1/edit](http://jsbin.com/olopuy/1/edit)

不用任何 JS 也能得到你想要的；见[http://matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks](http://matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T18:54:17.120

```
var left_bar = $("#left_bar").height();
var content_area = $("#content_area").height();
if(left_bar > content_area) {
    $("#content_area").attr("height",left_bar);
} else {
    $("#sidebar").attr("height",content_area);
} 
```

会给你一个数字而不是后面有 px 的数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T19:46:41.147

这是一个解决方案，它结合了几个技巧，只需几行代码即可完成所有工作：

```
$c = $('#left_bar,#content_area');
$c.height( Math.max.apply( // find the max of all elements in an array
    Math, $.map($c,function(v){   // build an array of heights
        return $(v).height(); 
    })
)); 
```

甚至可以压缩成一行：

```
$c = $('#left_bar,#content_area');
$c.height(Math.max.apply(Math,$.map($c,function(v){return $(v).height();}))); 
```

# java - 实例化抽象超类的子类

> ID：13055743
> 
> 赞同：2
> 
> 时间：2012-10-24T18:48:47.710
> 
> 标签：java, reflection, subclass, instantiation, invoke

我有一个像这样的超类，它有一个工厂方法：

```
@DiscriminatorColumn(
      name = "etype",
      discriminatorType = DiscriminatorType.STRING
)
public abstract class ChallengeReward {
      public static ChallengeReward createFromFactory(String rewardType){
      ChallengeRewardType type = ChallengeReward.fromString(rewardType);

      ChallengeReward challengeReward = null;
      switch(type){
      case point:
         challengeReward = new PointChallengeReward();
         break;
      case notification:
         challengeReward = new NotificationChallengeReward();
         break;
      case item:
         challengeReward = new ItemChallengeReward();
         break;
      }

      return challengeReward;
   }

   public String getClientId(){
      return "ABCDEF";
   }
} 
```

子类本身没有构造函数。因此，所有挑战奖励都存在于同一个表中，并带有一个名为“etype”的鉴别器列。

现在的问题是我想反射性地调用方法 getClientId()，但我无法实例化 ChallengeReward，因为它是抽象的。所以我需要实例化它的一个子类，但我不能做 subclass.newInstance()。

我在这里有什么选择？

编辑1：对不起，我的问题不是很清楚。问题是我正在编写一个通用 servlet，它将遍历包中的所有类，因此需要反射。虽然该方法实际上是静态的，但我不知道如何静态调用它，因为我只知道运行时的当前类。

编辑 2：原来你可以调用 method.invoke(null) 来调用静态方法，谢谢你 madth3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:56:58.337

我认为您可以`method`使用类名本身来解决问题，然后调用如下方法：

```
 String clientId = null;
     Class challengeRewardClass =Class.forName(ChallengeReward.class.getName());
     Method[] methods = challengeRewardClass.getMethods();
     for(Method method: methods){
        if(method.getName().equals("getClientId")){
            clientId = method.invoke(objectoToBeUsedForMethodCall, null);
        }
     } 
```

# android - 为什么我的程序无法打开 webView 页面？

> ID：13055745
> 
> 赞同：1
> 
> 时间：2012-10-24T18:48:52.490
> 
> 标签：android, android-webview, connect

我创建了一个程序应该连接到互联网的android应用程序，当我按下Go按钮时，程序应该打开webView页面（google.com）。我的程序无法连接到互联网，我不知道为什么？我将 log.i() 函数添加到程序中，当我单击按钮时，我看到了这个。

去.java

```
package org.example.test;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.webkit.WebView;
import android.widget.Button;
import android.view.View.OnClickListener;

public class MainActivity extends Activity{
private WebView webView;
private Button go_button;

@Override
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    Log.i(UI_MODE_SERVICE, "HELOOOOOOOOOOOOOOOOOO");
    setContentView(R.layout.activity_main);
    webView=(WebView) findViewById(R.id.web_view);
    go_button=(Button) findViewById(R.id.go_button);
    go_button.setOnClickListener(new OnClickListener(){
        public void onClick(View view){
            Log.i(UI_MODE_SERVICE, "STARRRRRRRRRRRRRRT");
            webView.loadUrl("http://www.google.com");
            Log.i(UI_MODE_SERVICE, "BYEEEEEEEEEEEEEEEEEEEEE");
        }
    });
}
 } 
```

主要活动：

```
package org.example.test;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
       getMenuInflater().inflate(R.menu.activity_main, menu);
       return true;
    }
} 
```

Activity_Main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <WebView
         android:id="@+id/web_view"
         android:layout_width="match_parent"
         android:layout_height="0dp"
         android:layout_weight="1.0" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="bottom"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/go_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/go_button"/>
      </LinearLayout>
  </LinearLayout> 
```

字符串.xml

```
<resources>

    <string name="app_name">test</string>
    <string name="hello_world">Hello world!</string>
    <string name="menu_settings">Settings</string>
    <string name="title_activity_main">MainActivity</string>

    <string name="go_button">GO</string>

 </resources> 
```

androidManifest.xml

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="org.example.test"
    android:versionCode="1"
    android:versionName="1.0" >
<uses-sdk
    android:minSdkVersion="9"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
 </application>

</manifest> 
```

日志猫：

```
10-24 22:04:50.674: DEBUG/AndroidRuntime(30445): >>>>>> AndroidRuntime START  com.android.internal.os.RuntimeInit <<<<<<
10-24 22:04:50.674: DEBUG/AndroidRuntime(30445): CheckJNI is OFF
10-24 22:04:50.854: DEBUG/AndroidRuntime(30445): Calling main entry com.android.commands.pm.Pm
10-24 22:04:50.870: DEBUG/AndroidRuntime(30445): Shutting down VM
10-24 22:04:50.870: INFO/AndroidRuntime(30445): NOTE: attach of thread 'Binder Thread #3' failed
10-24 22:04:50.877: DEBUG/dalvikvm(30445): GC_CONCURRENT freed 101K, 89% free 463K/4096K, paused 0ms+1ms
10-24 22:04:50.885: DEBUG/jdwp(30445): Got wake-up signal, bailing out of select
10-24 22:04:50.885: DEBUG/dalvikvm(30445): Debugger has detached; object registry had 1 entries
10-24 22:04:51.213: DEBUG/AndroidRuntime(30458): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
10-24 22:04:51.213: DEBUG/AndroidRuntime(30458): CheckJNI is OFF
10-24 22:04:51.393: DEBUG/AndroidRuntime(30458): Calling main entry com.android.commands.am.Am
10-24 22:04:51.393: INFO/ActivityManager(178): START {act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=org.example.test/.MainActivity} from pid 30458
10-24 22:04:51.495: DEBUG/AndroidRuntime(30458): Shutting down VM
10-24 22:04:51.510: DEBUG/dalvikvm(30469): Late-enabling CheckJNI
10-24 22:04:51.510: INFO/ActivityManager(178): Start proc org.example.test for activity org.example.test/.MainActivity: pid=30469 uid=10111 gids={}
10-24 22:04:51.518: DEBUG/dalvikvm(30458): GC_CONCURRENT freed 102K, 89% free 484K/4096K, paused 1ms+0ms
10-24 22:04:51.518: DEBUG/dalvikvm(30458): Debugger has detached; object registry had 1 entries
10-24 22:04:51.518: INFO/AndroidRuntime(30458): NOTE: attach of thread 'Binder Thread #3' failed
10-24 22:04:51.526: INFO/WindowManager(178): createSurface Window{41cc2288 Starting org.example.test paused=false}: DRAW NOW PENDING
10-24 22:04:51.573: DEBUG/OpenGLRenderer(438): Flushing caches (mode 1)
10-24 22:04:51.580: INFO/uimode(30469): HELOOOOOOOOOOOOOOOOOO
10-24 22:04:51.635: DEBUG/OpenGLRenderer(438): Flushing caches (mode 0)
10-24 22:04:51.666: INFO/WindowManager(178): createSurface Window{41cc2e48 org.example.test/org.example.test.MainActivity paused=false}: DRAW NOW PENDING
10-24 22:04:51.690: DEBUG/libEGL(30469): loaded /system/lib/egl/libGLES_android.so
10-24 22:04:51.698: DEBUG/libEGL(30469): loaded /vendor/lib/egl/libEGL_POWERVR_SGX540_120.so
10-24 22:04:51.698: DEBUG/libEGL(30469): loaded /vendor/lib/egl/libGLESv1_CM_POWERVR_SGX540_120.so
10-24 22:04:51.705: DEBUG/libEGL(30469): loaded /vendor/lib/egl/libGLESv2_POWERVR_SGX540_120.so
10-24 22:04:51.854: DEBUG/OpenGLRenderer(30469): Enabling debug mode 0
10-24 22:04:52.260: INFO/ActivityManager(178): Displayed org.example.test/.MainActivity: +767ms
10-24 22:05:00.276: INFO/uimode(30469): STARRRRRRRRRRRRRRT
10-24 22:05:00.276: INFO/uimode(30469): BYEEEEEEEEEEEEEEEEEEEEE
10-24 22:05:03.659: INFO/uimode(30469): STARRRRRRRRRRRRRRT
10-24 22:05:03.659: INFO/uimode(30469): BYEEEEEEEEEEEEEEEEEEEEE 
```

感谢您的建议。干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:58:52.163

您需要在 Manifest 中添加[INTERNET](http://developer.android.com/reference/android/Manifest.permission.html#INTERNET)权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T18:57:34.063

1）您的堆栈回溯难以辨认：我看不出是否有错误

2) 感谢您包含您的 AndroidManifest.xml。我没有看到“互联网”权限 - 你需要它！

# php - 在不知道索引的情况下设置数组元素

> ID：13055746
> 
> 赞同：0
> 
> 时间：2012-10-24T18:48:55.500
> 
> 标签：php, arrays

> **可能重复：**
> [搜索数组键并返回匹配键的索引](https://stackoverflow.com/questions/3782245/search-array-keys-and-return-the-index-of-matched-key)

在我的代码中，我这样做`$params[ltrim($part, ':')] = null;`是为了获得一个如下所示的数组：

```
Array
(
    [id] => 
    [random] => 
    [something] => 
) 
```

我需要一种在不知道其索引的情况下按顺序设置每个元素的值的方法。在此示例中，索引`0`将是`id`，`1`将是`random`等等。我尝试使用`0`and设置它`1`，最终得到一个像这样的数组：

```
Array
(
    [id] => 
    [lol] => 
    [0] => value1
    [1] => value2
) 
```

有没有办法我可以做到这一点？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T18:52:29.863

您可以`foreach`用来遍历关联数组

```
<?php

foreach( $arr as $key => $value ) {
    $arr[$key] = "some value";
}

/*
Array
(
    [id] => some value
    [random] => some value
    [something] => some value
)
*/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T19:08:30.297

`$params`在您的数组（您已经创建）旁边，创建一个`$values`数组，其中包含您需要或拥有它们的索引值。然后结合：

```
$final = array_combine(array_keys($params), $values); 
```

如果您`$params`使用这些名称作为值而不是键来直接创建数组，您甚至可以省去`array_keys`调用。

# linux - 读取 NAND 闪存并将其写入另一个系统

> ID：13055748
> 
> 赞同：1
> 
> 时间：2012-10-24T18:49:03.370
> 
> 标签：linux, embedded, arm, jtag

我有一个嵌入式系统，我想读取它的 nand flash 并将其写回另一个系统的 nand flash。我可以访问在设备上运行的 Linux 系统的根目录。该系统基于 AM3874，我也可以访问它的 JTAG。我的问题是：

1-我可以通过以root身份登录系统并将nand flash数据写入SD卡然后一个新系统将其写回nand flash来做到这一点吗？

2- 如果上述问题的答案是肯定的，我需要什么程序和什么软件？

3- 如果答案是否定的，我可以使用 JTAG 接口读取 NAND Flash 并将其写入另一个设备吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T19:04:41.987

您可以使用[`dd`](http://linux.die.net/man/1/dd)命令将整个设备或分区复制到文件中。

例子：

```
dd if=/dev/mtd/mtd4 of=/mnt/sdcard/system.img bs=4096 
```

类似的方式，您可以将文件复制到设备。

编辑：

这当然只适用于在您的 linux 中具有设备驱动程序的 NAND 闪存。

如果您在闪存中安装了文件系统，那么您可以使用`fd`或`mount`命令来查找正确的设备名称。这边走：

```
~ # df
Filesystem           1K-blocks      Used Available Use% Mounted on
/dev/root                53504     13580     39924  25% /
tmpfs                    25600        68     25532   0% /tmp
/dev/mmcblk0p1           77077     67089    722524  92% /mnt/test

~ # dd if=/dev/root of=/mnt/test/root.img bs=4096
13376+0 records in
13376+0 records out

~ # ls -l /mnt/test/root.img
-rw-r--r--    1 root     root     54788096 Oct 26 13:17 /mnt/test/root.img
~ # 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T19:04:11.697

您也许可以`dd`在 Linux 中使用该命令来读取第一个系统上的设备。在目标上，您需要先卸载 NAND 闪存上的所有文件系统，然后再将其写出。您可以完全从 ramfs 或 SD 卡上的文件系统运行吗？如果您能够卸载它，`dd`应该允许您将内容写回。

如果可能，您可能希望在使用 复制它之前卸载源系统上的 NAND `dd`，这样您就不会复制实时文件系统。

你只需要复制文件吗？如果是这样，从第一个设备创建一个 tarball 并在另一个设备上解压它是一种选择吗？

# jquery - 使用 CSS 或 jQuery 水平扩展容器仅足以防止垂直溢出

> ID：13055749
> 
> 赞同：0
> 
> 时间：2012-10-24T18:49:09.680
> 
> 标签：jquery, html, css, expand

好吧，这就是我想要做的。假设我有以下 HTML：

```
<div id="test">
    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
</div> 
```

以及以下 CSS：

```
#test {
    height: 100px;
    min-width: 100px;
} 
```

现在，让我们假设上面 HTML 中的段落可以是可变长度的。或者也许有两段。这并不重要。我正在寻找的是一种 CSS 或 jQuery 方法来`div`始终保持 100 像素高，并且最终宽度不小于 100 像素，**但**不超过防止垂直溢出所需的宽度。

因此，如果内容足够短（例如，一个单词），`div`它将具有 100 像素的高度和 100 像素的宽度。如果内容是一个完整的段落，`div`则仍然有 100 像素的高度，内容将垂直填充它，并且`div`水平扩展**仅**足以防止溢出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T18:53:34.577

您可以尝试以下方法：

```
#test{
    display: inline-block;
    height: 100px;
    min-width: 100px;
    max-width: 100%;
    overflow: auto;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T18:54:00.953

使用`while`循环计算内部段落的高度，并不断调整父 div 的宽度，直到适合为止。

```
while ($('#test > p').height() > $('#test').height()) {
    $('#test').width($('#test').width() + 1); // or +5 or +10 for a faster result
} 
```

[http://jsfiddle.net/mblase75/MFHah/](http://jsfiddle.net/mblase75/MFHah/)

警告：在某些情况下，这可能会导致无限循环。

# ruby-on-rails - 在rails国际化yml文件中传递变量

> ID：13055753
> 
> 赞同：45
> 
> 时间：2012-10-24T18:49:14.687
> 
> 标签：ruby-on-rails, ruby-on-rails-3, internationalization, yaml

我想在那里使用在 yml 文件中声明的变量。例如，我`site_name`在下面声明并希望使用它`description`。

```
en:
  site_name: &site_name "Site Name"
  static_pages:
    company:
      description: *site_name #this works fine
      description: "#{*site_name} is an online system" #this doesn't work 
```

如何将`*site_name`变量与其他文本结合起来？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-12-19T14:03:54.503

简短的回答是，我相信，不，您不能按照您想要的方式在 YAML 中使用[alias](http://www.yaml.org/YAML_for_ruby.html#aliases_and_anchors)进行字符串插值。

在您的情况下，我要做的是在我的语言环境文件中包含以下内容：

```
en:
  site_name: "Site Name"
  static_pages:
    company:
      description: ! '%{site_name} is an online system' 
```

然后以站点名称作为参数调用适当的视图：

```
t('.description', site_name: t('site_name')) 
```

这会让你`"Site Name is an online system"`。

但是，如果您迫切希望在 YAML 文件中使用别名将字符串连接在一起，则以下*完全不推荐*的代码也可以通过将字符串作为数组的两个元素来工作：

```
en:
  site_name: &site_name "Site Name"
  static_pages:
    company:
      description:
        - *site_name
        - "is an online system" 
```

然后你会`join`像这样在适当的视图中排列数组：

```
t('.description').join(" ") 
```

这也会让你`"Site Name is an online system"`。

但是，在您决定走这条路之前，除了@felipeclopes 链接到的问题之外，请查看：

*   [这个 StackOverflow](https://stackoverflow.com/q/13178268/567863)关于连接 i18n 字符串的答案（tl；dr 请不要为了您的翻译团队）。
*   [此处](https://stackoverflow.com/q/3141438/567863)和[此处](https://stackoverflow.com/q/7169121/567863)的StackOverflow 问题与您的问题类似。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-24T20:41:46.660

您可以使用以下语法，如示例中所示：

```
dictionary:
  email: &email Email
  name: &name Name
  password: &password Password
  confirmation: &confirmation Confirmation

activerecord:
  attributes:
    user:
      email: *email
      name: *name
      password: *password
      password_confirmation: *confirmation
  models:
    user: User
users:
  fields:  
    email: *email
    name: *name
    password: *password
    confirmation: *confirmation
sessions:
  new:
    email: *email
    password: *password 
```

这个例子取自：[Refactoring Ruby on Rails i18n YAML files using dictionaries](https://stackoverflow.com/questions/11097572/refactoring-ruby-on-rails-i18n-yaml-files-using-dictionaries)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-22T17:07:55.097

晚会迟到了。我已经创建了一个可以做到这一点的宝石。[i18n-env-var-查找](https://github.com/StaymanHou/i18n-env-var-lookup)

我的具体用例有点独特。在我们的组织中，我们有一个现有的 Rails 应用程序，我们想为组织中另一个团队的另一个项目“贴上白标签”。我们希望为两个项目共享相同的源代码存储库，而只更改站点名称。鉴于语言环境文件中已经有数千个条目，其中近百个包含站点名称，因此更新所有模板以将站点名称作为变量传递将是一个不好的做法。我们在相关问题中找到的其他建议对我们的案例也没有好处。我们希望两个项目的语言环境文件完全相同，这样我们就可以避免弄乱源代码并使用 3rd 方本地化服务轻松管理语言环境文件。

因此我转向实现 gem，它解决了我们的确切问题。

# php - z-index 需要 jquery 帮助

> ID：13055757
> 
> 赞同：-6
> 
> 时间：2012-10-24T18:49:25.123
> 
> 标签：php, javascript, jquery

在以下链接中，我放置了一些 jquery 脚本。 [www.onemileaway.com/test3/cirle.html](http://www.onemileaway.com/test3/cirle.html) 我添加了 pie.htc 来制作圆圈。

我在这里做的是翻转 5 圈以更改背景颜色，然后单击它保持翻转效果的颜色。

当我单击第一个圆圈并现在在第二个圆圈上翻转时，它不应用 z-index:1000。正如我在 .hover 效果中应用的那样。

请理解并帮助我。

代码可以通过viewsource查看。

谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T18:52:44.763

查看您的 javascript 控制台，您会注意到加载 jquery 库时出现问题。

# javascript - 用于 IE9 用户所需属性的 shim

> ID：13055759
> 
> 赞同：0
> 
> 时间：2012-10-24T18:49:42.020
> 
> 标签：javascript, jquery

根据[CanIuse](http://caniuse.com/#search=required)， IE9 不支持 required 属性。如果浏览器不支持它，是否有填充程序提供与本机必需属性相同的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T19:23:03.433

您可以使用[jQuery 验证插件](http://docs.jquery.com/Plugins/Validation#API_Documentation)。它支持`required`和许多其他表单验证检查（以及允许您定义自定义检查）。

# php - 一个查询中有两个计数

> ID：13055760
> 
> 赞同：1
> 
> 时间：2012-10-24T18:49:47.010
> 
> 标签：php, sql, count

我有这张桌子：

```
id  | id_user  |  id_user_stalkers | date
0   |  0222222 |  032332         | 32234234 
```

所以，我想知道我的朋友列表中所有用户的数量，以及我在他们的朋友列表中的所有用户的数量。目前，我做了这个查询：

```
SELECT (
                    SELECT COUNT(id_user)
                    FROM   stalkers WHERE id_user =  ".$id."
                    ) AS user_stalkers,
                    (
                    SELECT COUNT(id_user_stalkers)
                    FROM   stalkers WHERE id_user_stalkers = ".$id."
                    ) AS user_is_stalked
            FROM stalkers 
```

但它返回这个：

```
Array
(
    [0] => Array
        (
            [user_stalkers] => 7
            [user_is_stalked] => 2
        )

    [1] => Array
        (
            [user_stalkers] => 7
            [user_is_stalked] => 2
        )

    [2] => Array
        (
            [user_stalkers] => 7
            [user_is_stalked] => 2
        )

    [3] => Array
        (
            [user_stalkers] => 7
            [user_is_stalked] => 2
        )) 
```

没关系，但我只需要一排，而不是四排。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:55:37.120

由于您的所有字段都是子查询，因此您可以完全删除 from 子句。否则，您将获得表中每一行的子查询。这不仅可以得到您想要的结果，而且可以大大减少对数据库的总访问**量**（提高性能）。

```
SELECT 
(
 SELECT COUNT(id_user)
 FROM   stalkers WHERE id_user =  ".$id."
) AS user_stalkers,
(
 SELECT COUNT(id_user_stalkers)
 FROM   stalkers WHERE id_user_stalkers = ".$id."
) AS user_is_stalked 
```

如果这将是一个潜在的大表，您需要确保 id_user 和 id_user_stalkers 都被索引。如果可以使用索引，这些子查询将快得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T18:53:43.267

您必须再添加一个 where 子句，如下所示并且不同：

```
SELECT DISTINCT (
                    SELECT COUNT(id_user)
                    FROM   stalkers WHERE id_user =  ".$id."
                    ) AS user_stalkers,
                    (
                    SELECT COUNT(id_user_stalkers)
                    FROM   stalkers WHERE id_user_stalkers = ".$id."
                    ) AS user_is_stalked
FROM stalkers  
WHERE id_user_stalkers = ".$id." 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T18:54:29.567

为任何数据库设置此查询的一种安全方法是使用`cross join`：

```
SELECT user_stalkers, user_is_stalked
from (SELECT COUNT(id_user) as user_stalkers
      FROM   stalkers WHERE id_user =  ".$id."
     ) t1 cross join
     (SELECT COUNT(id_user_stalkers) as user_is_stalked
      FROM   stalkers WHERE id_user_stalkers = ".$id."
     )  t2 
```

`Stalkers`由于该`FROM`子句，您的查询为每一行返回一行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T18:54:31.427

```
 SELECT (
                SELECT COUNT(id_user)
                FROM   stalkers WHERE id_user =  ".$id."
                ) AS user_stalkers,
                (
                SELECT COUNT(id_user_stalkers)
                FROM   stalkers WHERE id_user_stalkers = ".$id."
                ) AS user_is_stalked 
```

只需删除最后一个“FROM stalkers”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T18:59:06.087

试试这个（你不必查询两次并担心不同的等）

```
SELECT COUNT(case when id_user =  ".$id." then 1 else null) AS user_stalkers,
COUNT(case when id_user_stalkers =  ".$id." then 1 else null) AS user_is_stalked
FROM   stalkers 
```

# apache - 无法从 mod_remoteip 获取 mod_status 中的客户端 IP

> ID：13055763
> 
> 赞同：1
> 
> 时间：2012-10-24T18:50:03.970
> 
> 标签：apache, nginx, reverse-proxy

我将 Nginx 设置为反向代理，并将 IP 传递给 Apache。由于某种原因，mod_status 不会识别客户端 IP，而是将我的网站 IP 显示为客户端 IP。

这是我的旧 Apache 2.2`mod_rpaf`配置：

```
RPAFenable On
RPAFproxy_ips 127.0.0.1 website IP server IP
RPAFsethostname On 
RPAFheader X-Forwarded-For 
```

新的 Apache 2.4`mod_remoteip`配置：

```
RemoteIPHeader X-Forwarded-For
RemoteIPTrustedProxy 127.0.0.1 website IP server IP 
```

是关于错误`mod_realip`的配置还是 Apache 2.4 不应该这样工作？

日志也无法正常工作，但已通过将格式从 %h 更改为 %a 来修复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T22:26:09.530

附加信息：Nginx 代理配置位置 / { proxy_pass [http://www.domain.com:8080](http://www.domain.com:8080) ; 包括/usr/local/etc/nginx/proxy.conf；}

```
proxy_set_header Host $host;
proxy_set_header X-Real-IP $remote_addr;
proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T14:55:54.543

整个早上都在和类似的东西搏斗。mod_rpaf 中有一个已知错误：[https ://bugs.launchpad.net/ubuntu/+source/libapache2-mod-rpaf/+bug/930540](https://bugs.launchpad.net/ubuntu/+source/libapache2-mod-rpaf/+bug/930540)

这对我有用。在 /etc/apache2/mods-available/rpaf.conf 中只需替换：

```
<IfModule mod_rpaf.c> 
```

和：

```
<IfModule mod_rpaf-2.0.c> 
```

（信用：[https](https://serverfault.com/questions/393207/mod-rpaf-problems-with-nginx-front-apache-back-end-after-ubuntu-upgrade) ://serverfault.com/questions/393207/mod-rpaf-problems-with-nginx-front-apache-back-end-after-ubuntu-upgrade ）

# php - 如何从 PHP 表列表中获取 ID

> ID：13055764
> 
> 赞同：2
> 
> 时间：2012-10-24T18:50:11.427
> 
> 标签：php, mysql

我创建了以下代码来使用存储在数据库中的数据填充表。如您所见，数据也可以在字段中直接编辑，我要做的是将编辑的字段保存到数据库中。如果该字段已被修改，只需覆盖“旧”字段，如果尚未修改，则取旧字段。

```
<?php

$querymod =" SELECT * FROM table ORDER BY id DESC ";

$result = mysql_query($querymod) or die(mysql_error());

echo "<div style='width: 100%; text-align: center;'>";                   
echo "<table style='margin: auto auto;'>";
echo "<tr><th>ID</th><th>Image</th><th>Article Number</th><th>Description</th></tr>";

while($row = mysql_fetch_array($result))
{

$id    = $row['id'];
$img_name    = $row['img_name'];
$art_number    = $row['art_number'];
$description    = $row['description'];

echo "<form method='post' action=''>";
echo "<tr>
<td style='width: 20px;'><input name='id' id='id' value='".$id."' disabled='yes'>
<input type='submit' name='submit' value='Save'></td>
<td style='width: 210px;'><img src='../../upload/content/uploads/". $img_name ."' width='200px'></td>
<td style='width: 100px;'><input type='text' name='art_number' value='".$art_number."'></td>
<td style='width: 100px;'><input type='text' name='description' value='".$description."'></td>
</tr>";     
}
echo "</table><br /><br /></div>";
echo "</form>"; 
```

?>

我知道使用“UPDATE”功能可以更新数据库和字段，但问题是我不知道如何获取修改行的ID，并启动相关修改字段的更新。

请问有什么提示吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T19:19:02.433

你需要搬家：

```
echo "</form>"; 
```

在while循环内。您每次通过循环都开始一个新表单，但在整个循环完成之前不会关闭它。这是创建不正确的嵌套。

此外，摆脱`id='id'`（您可能不需要它）或做一些事情来确保 ID 是唯一的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T19:04:15.263

使用 type=hidden 作为输入：

```
<td style='width: 20px;'><input name='id' id='id' value='".$id."' type='hidden'> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T19:16:59.630

`1`. 每行使用一个表格

或者：

`2`. 创建一个名为 的隐藏输入`id`。使用`onClick='document.forms.form_name.id.value='$id';document.forms.form_name.submit();"`提交按钮的属性，但将 type='submit' 更改为 type='button'。将 $id 值附加到每个其他输入的名称。然后，当提交后页面重新加载时，您将拥有 id 并且还可以在 POST 中找到其他输入：

```
echo "<form name='myform' action='' method='POST'>
    <input type='hidden' name='id' value=''>
    <table>";

while($row = mysql_fetch_array($result)) {
    $id          = $row['id'];
    $img_name    = $row['img_name'];
    $art_number  = $row['art_number'];
    $description = $row['description'];
    $onClick = "document.forms.myform.id.value='$id';document.forms.myform.submit();";

    echo "<tr>
        <td><input type='button' name='save_$id' value='Save' onClick='$onClick'></td>
        <td><img src='../../upload/content/uploads/$img_name' width='200px'></td>
        <td><input type='text' name='art_number_$id' value='$art_number'></td>
        <td><input type='text' name='description_$id' value='$description'></td>
      </tr>\n";
}
echo "</table>\n</form>\n"; 
```

然后，当单击保存时，您可以读取 POST 中的值：

```
$id = !empty($_POST["id"]) ? $_POST["id"] : NULL;
$art_number = !empty($_POST["art_number_$id"]) ?$_POST["art_number_$id"] : NULL;
$description = !empty($_POST["description_$id"]) ?$_POST["description_$id"] : NULL; 
```

您可以使用它来更新 SQL 数据库。

# mysql - 将数组存储到变量中

> ID：13055766
> 
> 赞同：2
> 
> 时间：2012-10-24T18:50:18.483
> 
> 标签：mysql, arrays, list, variables

这是我正在尝试的，但它不起作用。

```
SET @myArray = "25,21,90";

SELECT * FROM aTable WHERE bField IN (@myArray); 
```

我最终只得到 bField = 25 的结果。

显然我问这个是因为我有一个比上面的例子更复杂的脚本。@myArray 可能会被多次使用，也可能被埋在更长的语句中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T18:59:20.593

你想要[Find_In_Set](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set)：

```
select * from aTable where FIND_IN_SET(bField, @myArray); 
```

# haskell - Haskell模式匹配字符串中的字符

> ID：13055770
> 
> 赞同：4
> 
> 时间：2012-10-24T18:50:25.893
> 
> 标签：haskell, pattern-matching

我有一个关于模式匹配的问题：

是否有可能以某种方式匹配 (string ++ [char] ++ anotherstring)？

我试过类似的东西：

```
f (s++";"++r) = s++r (the rhs is trivial, but its just for testing ;)) 
```

但这会导致解析错误。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-24T18:52:29.273

不，这是不可能的。模式匹配根据*构建*它们的构造函数来解构值，因此您只能在模式匹配中使用构造函数应用程序来描述哪些值与模式匹配，哪些不匹配。

对于像您的示例这样的东西， a`case`效果很好，

```
f str = case break (== ';') str of
          (s, _:r) -> s ++ r
          _        -> error "No semicolon found" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T19:08:39.237

为了完整起见，可以免费使用 GHC 的`ViewPatterns`扩展，并将 Daniel Fischer 的示例重写为：

```
{-# LANGUAGE ViewPatterns #-}

f (break (== ';') -> (s, _:r)) = s ++ r
f _ = error "No semicolon found" 
```

这当然是一个纯粹的装饰性变化，但如果您更喜欢通常的“方程组”语法而不是`case`表达式，那就是它。

注意——我现在手头没有 GHC，所以我没有实际测试过上述内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T18:58:34.907

不，这是不可能的。[split](http://hackage.haskell.org/packages/archive/split/0.1.1/doc/html/Data-List-Split.html)中有很多函数可以用来完成你想要做的事情。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T20:39:51.077

您可以执行类似于此处建议的方式的这种模式匹配：

[Haskell 模式匹配难题](https://stackoverflow.com/questions/12884674/haskell-pattern-matching-conundrum/12902898#12902898)

# python - 生成只有一个共同点的列表

> ID：13055776
> 
> 赞同：4
> 
> 时间：2012-10-24T18:50:42.363
> 
> 标签：python

在 Python 中，我提出了一个想法，但我不确定如何正确实现它。

我有一个包含 26 个字母（'A' - 'Z'）的池，每个字母可以根据需要多次使用。我想用这些字母创建列表；每个列表将有 10 个字母长，其中没有重复，我想保证，如果我比较生成的任何两个列表，就会有*一个*共同的字母。

问题：

*   有没有一种简单的方法来做到这一点（即，通过使用库函数）？
*   在给定池大小 (pool_size) 和列表长度 (list_length) 的情况下，我可以计算可以创建的最大列表数吗？

任何指向相关材料的指针将不胜感激；我不需要一个实现，只需要在某个地方放置我的阿基米德杠杆（可以理解为：我需要一个基础才能建立我的想法）。

“给我一个立足点，我会移动地球。” - 阿基米德

**更新**：我多么天真地认为字母表足以使用。让我们将池扩展至 300 个符号，但将列表长度保持为 10。这行得通吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T18:54:08.540

只有 26 个字母可供选择，因此只能生成两个列表。

随机选择一个字母并将其放在两个列表中。然后再挑选 18 个不同的字母，并在每个列表中随机放入 9 个。然后您的列表将如下所示：

```
ABCDEFGHIJ
AKLMNOPQRS 
```

如果您添加第三个列表，则不可能满足您的约束，因为只有七个未使用的字母。第三个列表必须与您不允许的其他列表之一共享至少两个字母。

* * *

**更新**

这只是部分回答了您更新的问题，但无论如何我都会发布它，因为它可能会帮助您或其他人找到最佳解决方案。

一般来说，对于`n`符号和长度列表，您可以通过使用上述算法`x`轻松生成至少列表（选择 1 个字母并将其添加到所有列表中。因此，对于 300 个符号和长度为 10 的列表，可以提供 33 个列表。`floor((n-1)/(x-1))`

但是可以通过使用不同的算法来改进这一点。例如，如果 n 为 10 且 x 为 4，则上述算法仅给出三个列表：

```
ABCD
AEFG
AHIJ 
```

但是更有效地重用字母的算法可以生成五个列表：

```
ABCD
AEFG
BEHI
CFHJ
DGIJ 
```

我使用贪心算法生成这些列表：对于每个新列表，尽可能多地重用以前列表中的不同字母，这意味着您添加的新字母越少越好。

第二个列表重用了第一个列表中的一个字母并添加了三个新字母。第三个列表重用了前两个列表中的不同字母，因此只引入了两个新字母。第四个列表重用了之前已经出现的三个字母，并添加了一个新字母。最终列表现在可以重复使用之前每个列表中的一个字母，并且不需要添加任何新字母。

* * *

**更新 2**

贪心算法绝对不是最优解。

让我们试试：n = 26, x = 2

简单的解决方案给出了最佳的 25 个列表：

```
AB
AC
AD
..
AZ 
```

然而，贪心算法只生成 3 个列表：

```
AB
AC
BC 
```

现在不可能在不违反规则之一的情况下添加更多列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T20:42:55.157

这是我为 Set 和 Line Length 的所有值找到的通用解决方案。第一个假设您不希望两个解决方案共享相同的公共元素，但您希望每个解决方案都具有一个与其他解决方案相同的元素。给定一个无限池来选择形式，解决方案的总数受每个解决方案的长度限制。

```
SET_LENGTH = 10
CHOICE_LENGTH = 300

data = set(range(CHOICE_LENGTH))
solutions =[]
solution_sets = []
used = set()

while True:
    new_solution = []
    #Try to get unique values from each previous set
    try:
        for sol_set in solution_sets:
            while True:
                candidate = sol_set.pop()
                if not candidate in used:
                    new_solution.append(candidate)
                    used.update([candidate])
                    break
    except KeyError, e:
        print e
        break
    #Fill with new data until the line is long enough
    try:
        while len(new_solution) < SET_LENGTH:
            new_solution.append(data.pop())
    except KeyError, e:
        print e
        break
    solutions.append(new_solution)
    solution_sets.append(set(new_solution))
#Show the results
for solution in solutions:
    print solution
print "Orphans %s" % len(data) 
```

例如 n = 300 x = 10 产生：

```
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
[0, 10, 11, 12, 13, 14, 15, 16, 17, 18]
[1, 10, 19, 20, 21, 22, 23, 24, 25, 26]
[2, 11, 19, 27, 28, 29, 30, 31, 32, 33]
[3, 12, 20, 32, 34, 35, 36, 37, 38, 39]
[4, 13, 21, 33, 34, 40, 41, 42, 43, 44]
[5, 14, 22, 27, 36, 40, 45, 46, 47, 48]
[6, 15, 23, 28, 37, 41, 45, 49, 50, 51]
[7, 16, 24, 29, 38, 42, 47, 49, 52, 53]
[8, 17, 25, 30, 39, 43, 48, 50, 52, 54]
[9, 18, 26, 31, 35, 44, 46, 51, 53, 54]
Orphans 245 
```

如果您不在乎有多少解决方案共享相同的公共元素，那么它会更容易：

```
SET_LENGTH = 2
CHOICE_LENGTH = 300

data = set(range(CHOICE_LENGTH))
solutions =[]
alpha = data.pop()
while True:
    new_solution = [alpha]
    try:
        [new_solution.append(data.pop()) for x in range(SET_LENGTH-1)]
    except KeyError, e:
        break
    solutions.append(new_solution)

for solution in solutions:
    print solution
print "Solutions: %s" % len(solutions)
print "Orphans: %s" % len(data) 
```

# javascript - 为操作动态更新页面内容

> ID：13055779
> 
> 赞同：1
> 
> 时间：2012-10-24T18:51:00.333
> 
> 标签：javascript, django-forms

现在，当单击“放弃草稿”按钮时，下面的代码会完全重新加载页面。

```
discardDraft: function(options) {
    var self = this;

    self.ready(function() {
        self._apiCall({
            type: "DELETE",
            url: self.links.draft.href,
            buttons: options.buttons
        });
    });
} 
```

这是与服务器通信的调用：

```
_apiCall: function(options) {
    var self = this;

    options.prefix = this.prefix;
    options.path = "/review-requests/" + this.id + options.path;

    if (!options.success) {
        options.success = function() { window.location = self.path; };
    }

    RB.apiCall(options);
} 
```

我的意图是使用 JQuery 相应地更新页面，而不是刷新页面。但我不知道我应该如何更改上面的代码以避免页面重新加载。

摆脱下面的行会解决问题吗？

```
url: self.links.draft.href 
```

注意：第一段代码中的就绪对象只是确保在对其进行操作之前从服务器加载该对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T19:04:17.073

这条线将负责：

```
options.success = function() { window.location = self.path; }; 
```

设置`window.location`aka`window.location.href`会触发页面重新加载。

# ios - 在字符串中查找纬度和经度

> ID：13055782
> 
> 赞同：1
> 
> 时间：2012-10-24T18:51:09.653
> 
> 标签：ios, ios5, map, ios6

想象一下，您在地图（视图）上添加注释并附加纬度和经度字符串并将其放入 URL 以获取每个单独的地图注释信息。我的问题是，一旦我选择要删除的注释，我将如何在用于 URL 请求的字符串中找到选择的注释纬度和经度。

例如

```
www.something.com/39.001,29.002;34.0567,-32,0091;56.987,76.435 
```

然后假设您删除了注释`34.0567,-32,0091`

你如何在下面更新你的字符串

```
www.something.com/39.001,29.002;56.987,76.435 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T19:00:04.720

将 URL 转换为 as`NSMutableString`以“编辑”该 URL，然后替换该字符串中出现的地标。然后将字符串转回 URL：

```
NSURL *currentURL = [NSURL URLWithString:@"www.something.com/39.001,29.002;34.0567,-32,0091;56.987,76.435"];

NSMutableString *absolute = [NSMutableString stringWithString:[currentURL absoluteString]];
[absolute replaceOccurrencesOfString:@"34.0567,-32,0091;" withString:@"" options:0 range:NSMakeRange(0, [absolute length])];

NSURL *newURL = [NSURL URLWithString:absolute];

NSLog(@"My new URL = %@", newURL.absoluteString); 
```

编辑---> 更新的代码，包括已更改地标的索引。

```
NSString *domain = @"www.something.com/";
NSURL *currentURL = [NSURL URLWithString:@"www.something.com/39.001,29.002;34.0567,-32,0091;56.987,76.435"];

NSMutableString *absolute = [NSMutableString stringWithString:[currentURL absoluteString]];
[absolute replaceOccurrencesOfString:domain withString:@"" options:0 range:NSMakeRange(0, [absolute length])];

NSArray *placemarks = [absolute componentsSeparatedByString:@";"];

NSString *placemarkToRemove = @"34.0567,-32,0091";

NSUInteger index = [placemarks indexOfObject:placemarkToRemove];

[absolute replaceOccurrencesOfString:[placemarkToRemove stringByAppendingString:@";"] withString:@"" options:0 range:NSMakeRange(0, [absolute length])];

NSURL *newURL = [NSURL URLWithString:absolute];

NSLog(@"Placemark Index = %u; My new URL = %@", index, newURL.absoluteString); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T19:55:55.033

还有另一种方法。由于您使用的是带有注释的地图，因此您可以随时获取注释列表，然后将它们传递给构造您的 url 的方法：

```
- (NSURL *)makeUrlFromAnnotations:(NSArray *)annotations
{
    NSString *baseUrl = @"www.something.com/";
    NSMutableArray *annotationStrings = [[NSMutableArray alloc] initWithCapacity:0];
    for (id <MKAnnotation> annotation in annotations)
    {
     [annotationStrings addObject:
      [NSString stringWithFormat:@"%f,%f",
       annotation.coordinate.latitude,
       annotation.coordinate.longitude]
     ];
    }

    return [NSURL URLWithString:[baseUrl stringByAppendingPathComponent:[annotationStrings componentsJoinedByString:@";"]]];
} 
```

然后，每次您想要一个带有坐标的网址时，只需调用：

```
NSURL *url = [self makeUrlFromAnnotations:self.myMapview.annotations];
//Or whatever property is your mapview 
```

# python - 使用 GChartWrapper 为 Google Chart 创建动态标签

> ID：13055783
> 
> 赞同：1
> 
> 时间：2012-10-24T18:51:10.060
> 
> 标签：python, django, google-visualization

作为我的 Django 项目的一部分，我正在使用很棒的[Google Chart Wrapper](http://code.google.com/p/google-chartwrapper/)创建图表。现在我正在我的视图中使用 Python 创建图表实例，然后将实例添加到模板上下文并成功地在我的模板中显示图表。

我遇到的麻烦是显示一组动态的 X 轴标签。以下是来自 Google Chart Wrapper 的相关代码：

```
def label(self, index, *args): 
    """ 
    Label each axes one at a time 
    args are of the form <label 1>,...,<label n> 
    APIPARAM: chxl 
    """ 
    self.data['labels'].append( 
    str('%s:|%s'%(index, '|'.join(map(str,args)) )).replace('None','') 
    ) 
    return self.parent 
```

以及我目前如何在我的视图中创建图表：

```
from GChartWrapper import *

chart = Sparkline([1,2,3,4,5,6,7], encoding='text')
chart.axes.label(...) # need to set labels here 
```

我有一个日期字符串列表，我想显示为 x 轴标签，有人知道我会怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T10:34:06.107

为了了解如何正确传递标签，了解其`*args`含义很重要。

`*args`函数（或本例中的方法）定义中的（星号 + 任意参数名称）表示任意数量（包括 0）的匿名参数。

有关更详尽的解释，请参阅此[答案。](https://stackoverflow.com/a/13058423/680238)

这意味着所讨论的方法接受一个强制性参数`index`，即要标记的轴的索引和任意数量的匿名参数（实际标签）。

知道了这一点，应该已经清楚正确的调用方式`label()`如下：

```
chart.axes.label( 0, 'date 1', 'date 2', 'date 3', ... ) 
```

其中`0`是 X 轴的索引，所有其他参数都是各自的标签。

以这种方式实现的原因是标签的数量是未知的——它取决于图表，所以接受任意数量的标签似乎是个好主意。

您可能还想看看[这里的例子](http://justquick.github.com/google-chartwrapper-demos/guide_granularity_20.html)

# objective-c - +[GKPlayer loadPlayersForIdentifiers:completionHandler:] 中返回的数组顺序

> ID：13055788
> 
> 赞同：3
> 
> 时间：2012-10-24T18:51:29.863
> 
> 标签：objective-c, ios, game-center, gamekit

`GKScore`因此，要对排行榜数据做任何有用的事情，必须首先从中获取一个 s数组，`GKLeaderboard`然后`GKPlayer`为每个分数获取相应的 s。

一旦你有了它，你可能想要一个字典，将玩家映射到分数或分数到玩家或`playerID`s 到 score `value`s 或类似的东西。`+[NSDictionary dictionaryWithObjects:forKeys:]`因为我们已经有了数组，所以设置这样的字典会很好。

问题是：这些数组是否*保证*顺序相同？即执行以下操作是否安全：

```
GKLeaderboard *leaderboard = [[GKLeaderboard alloc] init];
[leaderboard loadScoresWithCompletionHandler:^(NSArray *scores, NSError *error) {
    NSArray *playerIDs = [scores valueForKey:@"playerID"];
    [GKPlayer loadPlayersForIdentifiers:playerIDs withCompletionHandler:^(NSArray *players, NSError *error) {
        self.scores = [NSDictionary dictionaryWithObjects:scores forKeys:players];
    }];
}]; 
```

（为简洁起见，省略了错误处理和 ARC 安全性。）

我知道`[scores valueForKey:@"playerID"]`会给我一个`playerID`s 数组，其顺序与分数相同——这就是`valueForKey:`数组应该做的事情。但是完成处理程序是否`loadPlayers`保证获取的玩家分数数组与输入的顺序相同？我创建了几个沙盒帐户并进行了一些测试，似乎排序顺序总是匹配的，但这不能保证。

该文档没有说明任何一种方式。（它确实说在发生错误的情况下数组可能包含部分结果，在这种情况下它显然不会映射到输入，但是没有错误的情况呢？）对两个数组进行排序非常`playerID`简单当然，但是如果它总是已经排序，那么不得不花时间对数组进行排序是很遗憾的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T09:22:20.263

我猜它与方法名称相同，但不能保证和实现细节。我猜我不会依赖它。

我会再次调用 sort ......现在（因为它们已经排序）这将导致排序算法的最佳情况运行时......所以。上）。你会比任何情况下都聪明:)

# c++ - 从向量和 QVBoxLayout 中删除

> ID：13055792
> 
> 赞同：1
> 
> 时间：2012-10-24T18:51:41.130
> 
> 标签：c++, qt, vector

我使用 QT 并有一个向量和一个 QVBoxLayout 填充小部件。用`Add`Button 填充两者都没有问题，但删除它们并没有真正起作用。

如果我从最后一个到第一个删除小部件，一切正常，但是当我尝试以任何其他方式删除它们时，一切都会失败。也许有人有想法？

```
void listwindow::remove_entry()
{
 vector<todo_list_entry *>::iterator pos;

 int i=0;
 for (pos=list_entrys_vector.begin();pos<=list_entrys_vector.end();pos++)
 {
  if((**pos).check_delete()==true)
  {
   listenLayout->removeWidget(*pos);
   listenLayout->update();
   list_entrys_vector.erase(pos);
   delete list_entrys_vector[i];
   break;
  }
  i++;
 }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T19:07:01.177

您可能会遇到迭代器失效的问题，因为`erase`在迭代它时使用向量的元素。一旦你这样做`list_entrys_vector.erase(pos)`，`pos`它就不再是一个有效的迭代器，所以当你下次尝试通过循环使用它时，就会发生不好的事情。在迭代时不要对向量的每个单独元素使用擦除，而是等到结束并使用`list_entrys_vector.clear()`.

或者，如果您不想删除所有条目，请使用`remove_if`and的组合来执行此操作`erase`。如果`f`是一个函数，它接受一个条目并返回`true`是否应该删除它，你可以这样做。

```
pos = std::remove_if(list_entrys_vector.begin(),list_entrys_vector.end(),f); 
```

现在，您要删除的条目位于向量的末尾，并且 pos 指向应该删除的第一个条目。然后，您可以对这些条目执行其他操作，然后执行

```
list_entrys_vector.erase(pos,list_entrys_vector.end()); 
```

还有其他方法可以做到这一点，但要记住的关键是在迭代向量时不能从向量中删除元素。如果你想这样做，你必须使用类似`std::list`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T13:58:40.837

我把它改成了这个，现在看起来vector erease工作得很好，但是listenLayout给我带来了一些麻烦......如果我添加4个元素并删除第一个，我只能看到3和4，删除4后2突然出现……

```
void listwindow::remove_entry()
{
 vector<todo_list_entry *> buffer_vector;
 vector<todo_list_entry *>::iterator pos;

 for ( pos = list_entrys_vector.begin(); pos != list_entrys_vector.end(); ) {
    if((**pos).check_delete()==true) {
       delete * pos;
       pos = list_entrys_vector.erase(pos);
       listenLayout->removeWidget(*pos);
       listenLayout->update;
    }
    else {
       ++pos;
    }
 } 
```

编辑：更改了顺序（首先删除小部件，然后删除）现在一切正常！

# android - android runtime.getruntime().exec() 获取进程id

> ID：13055794
> 
> 赞同：6
> 
> 时间：2012-10-24T18:51:42.520
> 
> 标签：android, process, pid

如何获取`runtime.getruntime().exec()`通过 android 应用程序开始使用的进程的进程 ID？

这是问题所在。我使用 UI APP 中的 runtime.getruntime().exec() 启动一个进程。如果我的 android UI 应用程序仍在运行，我可以使用 destroy 来终止进程。但是假设我使用主页或后退按钮退出应用程序，当我重新打开 ui 应用程序时，进程对象为空。那么我需要进程的PID来杀死它。

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-11-15T18:29:59.560

Android`java.lang.Process`实现是`java.lang.ProcessManager$ProcessImpl`并且它有 field `private final int pid;`。它可以从反射中得到：

```
public static int getPid(Process p) {
    int pid = -1;

    try {
        Field f = p.getClass().getDeclaredField("pid");
        f.setAccessible(true);
        pid = f.getInt(p);
        f.setAccessible(false);
    } catch (Throwable e) {
        pid = -1;
    }
    return pid;
} 
```

另一种方式 - 使用 toString：

```
 public String toString() {
        return "Process[pid=" + pid + "]";
    } 
```

您可以在没有反射的情况下解析输出并获取 pid。

如此完整的方法：

```
public static int getPid(Process p) {
    int pid = -1;

    try {
        Field f = p.getClass().getDeclaredField("pid");
        f.setAccessible(true);
        pid = f.getInt(p);
        f.setAccessible(false);
    } catch (Throwable ignored) {
        try {
            Matcher m = Pattern.compile("pid=(\\d+)").matcher(p.toString());
            pid = m.find() ? Integer.parseInt(m.group(1)) : -1;
        } catch (Throwable ignored2) {
            pid = -1;
        }
    }
    return pid;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T19:45:02.277

你会使用 PID 来终止进程吗？如果是这样，您可以简单地调用`destroy()`您的`Process`实例。不需要PID。请注意，您需要使用`ProcessBuilder`，而不是来启动该过程`getRuntime().exec()`，才能使其正常工作。

如果您确实需要进程 ID，则可能需要使用 shell 脚本。无法从 Java、AFAIK 获取 PID。

**编辑**：

由于您需要`Process`在离开应用程序并返回应用程序后处理它，因此一种解决方案是在生成的类中创建一个静态成员`Process`：

```
private static Process myProcess; 
```

使用此成员存储`Process`您从调用`start()`您的`ProcessBuilder`. 只要您的应用程序在内存中，静态成员就会一直存在——它不必是可见的。返回您的应用程序后应该可以终止该进程。如果系统碰巧杀死了您的应用程序以释放资源，那么您将无法终止子进程（如果它保持运行），但此解决方案应该适用于大多数情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-17T11:10:33.437

我已经使用 ActivityManager 完成了类似的操作，尽管在线文档中有针对它的警告......我也作为系统应用程序运行，尽管我不确定这是否重要。

```
ActivityManager am = (ActivityManager) context.getSystemService(Context.ACTIVITY_SERVICE);
int pid = 0;
List<RunningAppProcessInfo> procInfo = am.getRunningAppProcesses();
for (RunningAppProcessInfo proc : procInfo)
    if (proc.processName.indexOf("myApp") >= 0)
        pid = proc.pid; 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-10-24T19:11:12.590

尝试以下操作：
int p_Id = android.os.myPid(); [详情](http://developer.android.com/reference/android/os/Process.html)

# css - 在 iframe 元素上使用 ::before 生成的内容选择器

> ID：13055797
> 
> 赞同：6
> 
> 时间：2012-10-24T18:52:04.050
> 
> 标签：css, iframe

```
<!DOCTYPE html>
<html>
<head>
<style type="text/css">
#test iframe {
 border: none;
 background: #333;
 width: 500px;
 height: 500px;
 overflow: hidden;
}

#test iframe:before {
 display: block;
 content: " test";
 width: 500px;
 height: 500px;
 background: url('overlay.png') no-repeat;
 position: relative;
 top: 0px;
 left: 0px;
 z-index: 999;
}
</style>
</head>

<body>

 <div id="test">
  <p><iframe></iframe></p>
 </div>

</body>
</html> 
```

我正在尝试将图像放置在 an 上，`iframe`但由于某种原因，`::before`选择器无法与 the 相处`iframe`- 尝试将 the 替换为`iframe`任何其他元素并且它可以工作。我需要`iframe`成为 p 元素的子元素。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T19:53:11.743

我对此不确定，但我认为除非用户的浏览器不支持 iFrame，否则它不会显示。

如果你看一下[这个答案](https://stackoverflow.com/a/7822914/1727181)，它表明 :before 和 :after 伪元素被放置在父元素内，在这种情况下是 iFrame。

现在我们转到[文档](https://developer.mozilla.org/en-US/docs/HTML/Element/iframe)，可以从这段代码中推断出 iFrame 子项的行为：

```
<iframe src="page.html" width="300" height="300">
  <p>Your browser does not support iframes.</p>
</iframe> 
```

也就是说，它们仅`src`在 iFrame 不显示时才显示。同样，这只是推论，但这似乎是一个合理的解释。

# android - 如何从 ArrayList 创建 ListView？

> ID：13055808
> 
> 赞同：1
> 
> 时间：2012-10-24T18:53:01.453
> 
> 标签：android

我有，下面的课。

```
public class BkmCollect extends ArrayList<Bkmark> {

    public static BkmCollect getTestBkm(Context context) {
        BkmCollect bookmarks = new BkmCollect ();

        String[] titles  = context.getResources().getStringArray(R.array.bookmark_titles);
        String[] urls    = context.getResources().getStringArray(R.array.bookmark_urls);
        TypedArray icons = context.getResources().obtainTypedArray(R.array.bookmark_icons);

        for (int i = 0; i < titles.length; i ++) {
            bookmarks.add(titles[i], urls[i], icons.getDrawable(i));
        }

        return bookmarks;
    }
} 
```

“add”方法在这个类中实现。而“Bkmark”类是在我的项目中创建的另一个类。我想创建一个 ListView，它将从 BkmCollect.getTestBkm 方法中获取数据。如何在我的 onCreate 方法中执行此操作？谢谢！

包含要在 ListView 中插入的字段的 XML 文件：

```
<resources>
    <string-array name="bookmark_titles">
        <item>Google</item>
        <item>Bing</item>
        <item>Gmail</item>
    </string-array>

    <string-array name="bookmark_urls">
        <item>http://www.google.com</item>
        <item>http://www.bing.com/</item>
        <item>http://www.gmail.com</item>
    </string-array>

    <array name="bookmark_icons">
        <item>@drawable/google</item>
        <item>@drawable/bing</item>
        <item>@drawable/gmail</item>
    </array>
</resources> 
```

我正在尝试做这样的事情：

```
ListView lv = (ListView) findViewById(R.id.favoritos_listView);
ArrayAdapter adapter;
Context context = getApplicationContext();
ArrayList<Bkmark> my_array = BkmCollect .getTestBkm(context);
adapter = new ArrayAdapter(this, android.R.layout.simple_list_item_1, my_array);
lv.setAdapter(adapter); 
```

在这里输入代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T19:12:27.700

您应该使用与 ArrayAdapter 关联的 ListView

请参阅[http://www.ezzylearning.com/tutorial.aspx?tid=1763429](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)以获得良好的教程（带有性能调整）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T19:13:11.967

`ListView`在您的文件中创建一个`layout.xml`，并通过执行 a 在 java 中检索它

```
ListView lv = (ListView)findViewById(R.id.your_list_view_id); 
```

并通过执行以下操作填充列表视图：

```
ArrayList<String> my_array_list = new ArrayList<String>();
new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, my_array_list);
lv.setAdapter(arrayAdapter); 
```

**编辑**

例如，假设您有一个方法可以将一些对象添加到`ArrayList`

```
public ArrayList<String> getPopulatedArrayList() {
    ArrayList<String> myList = new ArrayList<String>();
    myList.add("One");
    myList.add("Two");
    myList.add("Three");

    return myList; 
} 
```

在你的`onCreate`方法中

```
ArrayAdapter adapter;
ListView lv;
lv = (ListView)findViewById(R.id.my_list);

ArrayList<String> list = getPopulatedArrayList(); 
adapter = new ArrayAdapter(this, android.R.layout.simple_list_item_1, list);
lv.setAdapter(adapter); 
```

请记住，这仅适用于 List 与 one `TextView`，如果您需要列表中的更多数据，您应该创建自己的扩展类`BaseAdapter`。可以在[这里找到一个例子](http://anujarosha.wordpress.com/2011/11/30/how-to-use-baseadapter-and-onitemclicklistener-in-android/)

现在有什么不清楚的吗？如果是这样，只需添加评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T18:57:04.867

一个视图列表？你的意思是你想在屏幕上添加一堆视图？

如果是这样，则每种布局类型中都有执行此操作的功能。在 LinearLayout 中，有 .addView()。如果你想做一些更高级的事情，你可以创建 LinearLayout.LayoutParams 并调整它们。许多 Android 程序员不会手动创建视图。

如果视图不会发生太大变化或者您可以隐藏其中的一部分，您还可以考虑使用 ListView 和/或 ListAdapter。

# javascript - 仅在某个元素内删除类名

> ID：13055810
> 
> 赞同：-1
> 
> 时间：2012-10-24T18:53:04.603
> 
> 标签：javascript, jquery, removeclass

我想删除几个元素的类名，但只能在指定`ID`的元素内。

我试过这个但它不起作用..

```
// Remove classes from hidden elements
$('#sports').('.nd').removeClass(); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T18:55:14.657

应该：

```
$('#sports .nd').removeClass('nd'); 
```

...假设“nd”是您要删除的类。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T18:54:01.287

```
$('#sports > .nd').removeClass("nd"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T18:54:18.507

```
$('#sports').find('.nd').removeClass('nd'); 
```

使用查找功能。

或者，按照其他答案并将其添加到您的选择器

```
$('#sports > .nd').removeClass('nd'); 
```

“小于”运算符仅下降一级。

# asp.net - Response.RedirectToRoute 产生异常

> ID：13055812
> 
> 赞同：1
> 
> 时间：2012-10-24T18:53:08.863
> 
> 标签：asp.net

我有一个简单的 Web 表单应用程序。我收到以下错误：

**错误 310（net::ERR_TOO_MANY_REDIRECTS）**：

Global.asax：

```
protected void Application_Start(object sender, EventArgs e)
    {
        RegisterRoutes(RouteTable.Routes);
    }

    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.MapPageRoute("etusivu", "opas/{name}", "~/opas/etusivu.aspx");
    } 
```

页面加载：

```
protected void Page_Load(object sender, EventArgs e)
    {
        Response.RedirectToRoute("etusivu", new { name = "etusivu" });

    } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T16:17:18.877

如果我正确理解了问题和评论：您正在注册重定向到 etusive.aspx 的路由，则 etusive.aspx 中的页面加载会重定向到同一路由，并且您已经创建了一个循环。

# vim - 为什么这个用于冒泡文本的 Vim 映射不能按预期工作？

> ID：13055826
> 
> 赞同：1
> 
> 时间：2012-10-24T18:53:53.893
> 
> 标签：vim

所以我按照这里的说明操作：http: [//vimcasts.org/episodes/bubbling-text/](http://vimcasts.org/episodes/bubbling-text/)

这个想法是我进入视觉模式并选择几行文本。然后我按 CTRL-k 或 CTRL-j 在我的文件中向上或向下移动选定的文本。我的 .vimrc 文件中的映射如下：

```
nmap <C-k> ddkP
nmap <C-j> ddp
vmap <C-k> xkP`[V`]
vmap <C-j> xp`[V`] 
```

前两个映射用于正常模式 ( `nmap`)，它们按预期工作。对于向下，该`dd`命令删除一行，该`p`命令将光标向下移动并插入该行。向上`dd`命令删除该行，该`k`命令将光标向上移动一行，然后该`P`命令插入上面的行。

但是，在可视模式下，它不起作用。以向下移动几行选定文本为例。选择文本后，`x`命令将其删除。但是该`p`命令将文本准确地插入到光标所在的位置。因此，如果我有一个包含以下内容的文件：

```
one
two
three 
```

并且光标在一个的“o”上。我点击`vj$`选择前两行。然后我点击`x`删除它们。然后我点击`p`将它们插入下面。结果如下所示：

```
tone
two
hree 
```

就在我点击之前`p`，文件中有一行，光标位于“三”中的“t”上。所以这种行为对我来说很有意义。我不明白为什么 VimCast 专家教程希望我看到不同的行为。另外，我想得到我想要的行为。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T19:30:25.007

这些映射完美地工作。

如果我们采用`<C-j>`视觉模式映射：

*   `x`删除将光标放在删除行正下方的行上的视觉选择。

*   `p`将删除的行*放在*当前行下，这是预期的效果。

*   ``[`将光标移动到更改文本的第一个字符，这里是您移动的行的第一个字符。

*   `V`开始视觉线选择

*   ``]`将选择扩展到移动文本的最后一个字符，准备进一步移动。

根据您的描述，我认为您的问题是双重的：

1.  您似乎在使用映射右侧的命令序列，而不是映射本身。

2.  您正在使用`v`(visual mode, lowercase `v`, character-wise) 而不是`V`(visual-line mode, capital `v`, line-wise)。这些映射的目的是“冒泡”线条，而不是文字，所以如果你*真的*想要想要的效果，你必须使用正确的视觉模式。

正确的命令顺序是：

```
Vj<C-j> 
```

或者，如果您坚持不使用 Drew Neil 的映射：

```
Vjxp`[V`] 
```

# google-apps-script - GAS：如何将列表框选择设置为显示值

> ID：13055835
> 
> 赞同：0
> 
> 时间：2012-10-24T18:54:14.377
> 
> 标签：google-apps-script

我已经对我的列表框值进行了升序排序，并选择了例如第三个值。选择后，列表框中显示的值为第一个。它应该是选定的值，而不是第一个值。选择后是否可以“激活”要显示的所选值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T19:50:30.820

这不是正常行为...如果您在 listBox 中选择一个项目，它会显示所选项目....您能否发布您正在使用的代码以便我们可以尝试重现该问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T19:55:42.960

在过去的几天里一直在努力解决这个问题，并遇到了一些困难。对于列表框 (lb)、项目数组和列表中的选定项目 (setitem)，以下相当不雅的代码在仅标签（无值）和显示值数量设置为的下拉（单选）列表框中工作1\. 改变这些条件中的任何一个似乎都会显着改变行为。

```
function fillListBox(lb,items,setitem){
    try {
      lb.clear();  // making the widget reusable

      for (j=0;j<items.length;j++){
        var item = items[j];
        lb.addItem(item);
           if (item==setitem){
          lb.setSelectedIndex(j);  // zero is the first item in list
             } 
      }

    } 
    catch(e) {
    }
  } 
```

将不胜感激这整个领域的清晰文档（以及更好的代码）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T15:06:41.990

虽然 DavidF 的解决方案有效，但我认为这更简单一些：

```
function fillListBox(lb,items,setitem){
  try {
    lb.clear();  // making the widget reusable

    for (j = 0; j < items.length; j++){
      lb.addItem(items[j]);
    }
    lb.setSelectedIndex(items.indexOf(setitem));
  } catch(e) {}
} 
```

这样，您添加所有项目，然后使用它在数组中的索引设置索引。

# jsp - 在 linux 上编译 jsp 项目的最佳方法是什么？

> ID：13055849
> 
> 赞同：2
> 
> 时间：2012-10-24T18:54:50.757
> 
> 标签：jsp, tomcat

我正在Linux平台上使用apache Tomcat进行一些Web应用程序开发，我通常通过运行它们来编译我的网页，通过TomCat的日志跟踪错误。每次我进行修改时，我都会通过 TomCat 管理器重新加载项目。对于 bean，我正在编译它们并制作一个新的 war 文件。我想知道其他开发人员如何编译他们的 jsp 文件？我需要一些反馈..

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:38:06.520

据我了解，您最大的痛苦是每次都必须重新加载项目。

在我们的项目中，我们通过以下方式处理这个问题：

*   在进行开发时，只需将 JSP 文件复制到`tomcat/webapps/yourapp/WEB-INF/...`. Tomcat 将检测文件已更改，并将动态编译 JSP。明显的好处是无需重新部署应用程序。
*   完成开发后，签入代码。
*   持续集成服务器可以选择预编译所有 JSP，因此如果您有任何错误，您将收到通知。如果您没有持续集成，您可以简单地创建一个脚本，每天晚上检查源代码并尝试静态编译 JSP。

如果您需要有关静态编译的更多信息，请查看[Jasper](http://tomcat.apache.org/tomcat-7.0-doc/jasper-howto.html)文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T19:00:24.923

如果您想要一个可靠的构建过程（并且如果您认为您的应用程序会增长，并且将由一个团队开发），那么 maven 是我推荐的工具。您可以将它与 NetBeans 结合使用。

如果您想要快速简单的东西 - 并且不想花时间学习 maven - 那么我会选择 Netbeans。与 Tomcat 和 Glassfish 都有集成。

# ruby-on-rails - 执行 Ajax 时，IE8 在 utf8 字段上窒息

> ID：13055852
> 
> 赞同：2
> 
> 时间：2012-10-24T18:55:22.687
> 
> 标签：ruby-on-rails, jquery, internet-explorer-8

在 Rails 应用程序中使用 Lazybox 通过 Ajax 加载表单。new.js.erb 看起来像这样：

```
$.lazybox('<%=j render "form" %>', {closeImg: true, speed: 100, klass: 'po_lazybox' }); 
```

在 _form.html.erb 中，表单正在生成一个典型的：

```
<%= form_for(@invoice, :remote => @is_remote) do |f| %> 
```

FF、Safari、Chrome 都可以，但 IE8 不会在惰性框中显示表单。它似乎与隐藏的“utf8”字段有关，因为如果我粘贴到呈现表单的 HTML 中，减去该字段，一切正常。

IE8 中的 JS 控制台没有报错，只是静静地显示一个空白的lazybox。IE8 会将表单显示为纯 html 页面，即如果我转到 /invoices/new，一切都很好。

有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T15:04:20.430

这不是表单域。AJAX 响应的 DOM 内容以空行开头，IE8 有这个问题*。*当我复制 HTML 来修改它时，我必须删除空行。

我觉得自己很愚蠢，但也对 IE 很生气。我认为 Ultrix 的空白行窒息已经过时了。

# csv - 在 d3 中过滤和传递 csv 数据

> ID：13055858
> 
> 赞同：1
> 
> 时间：2012-10-24T18:55:51.130
> 
> 标签：csv, d3.js, pie-chart

我希望能够过滤 csv 数据以用于一系列动态饼图。（即，将向用户呈现初始饼图，并且将能够单击特定的饼楔/类别以拉出另一个饼图，显示该类别的详细信息）。

这是相关代码，将在“更新”函数中以“选定”变量作为输入来调用：

```
d3.csv("budget.csv", function(i,data) {
var csv = data.filter(function(row) {
    return row["category"] == selected});  
var g = revenue.selectAll(".arc")
    .data(pie(csv))
  .enter().append("g")
    .attr("class", "arc");
g.append("path")
    .attr("d", arc)
    //This doesn't work
    .style("fill", function(d) { return color(d.csv.name); }); 
```

颜色、弧线和饼图以前（成功地）用 scale.ordinal、svg.arc 和 layout.pie 定义。

上面的代码几乎可以工作——但没有正确地得到饼图的填充颜色。当我在最后一行使用**d.data.name时（见下文），代码工作正常。**有人可以向我解释为什么吗？

```
 //This works
    .style("fill", function(d) { return color(d.data.name); }); 
```

这可能是不言而喻的，但通常的警告 [d3 的新功能] 和道歉 [对不起，如果这很明显] 适用。谢谢！安娜

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T20:53:21.397

根据[文档](https://github.com/mbostock/d3/wiki/Pie-Layout)，饼图布局返回：

*   value - 数据值，由值访问器返回。
*   startAngle - 弧的起始角度，以弧度为单位。
*   endAngle - 弧的结束角度，以弧度表示。
*   data - 此弧的原始基准。

因此，在您的代码中，“csv”包含您所有的行对象。调用饼图布局需要这些对象和一个（可能是隐含的）值访问器来计算所有楔形的开始和结束角度。它以相同的顺序返回具有上面列出的四个属性的新闻对象。“数据”属性存储生成楔形的原始对象（来自您的 csv 列表）。

因此，遵循所有这一切是很有意义的：

```
csv: [{name:bob, value:10}, {name:alice, value:10}] 
```

变成

```
pie(csv): [{value: 10, startAngle:0, endAngle:3.14, data: {name:bob, value:10}},
           {value: 10, startAngle:3.14, endAngle:6.28, data: {name:alice, value:10}}] 
```

你理论上也应该能够使用

```
.style("fill", function(d,i) { return color(csv[i].name); }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T21:14:03.047

没有这样的事情`d.csv`。加载 csv 数据时，d3 创建`data`可以访问所有 csv 数据的属性。只需使用`d.data`.

当`data`您调用`.data(pie(csv))`. 这将告诉 d3 将*数据*与选定的`csv`html/svg 元素（即**g.arc**的）连接起来。

**之后，通过设置路径**元素的样式时，通常不需要再访问*原始* `csv`数组了。**`.style("fill", ...)`**

# plone - 在 plone.app.testing/Plone 4 中更改站点根目录

> ID：13055860
> 
> 赞同：1
> 
> 时间：2012-10-24T18:55:57.143
> 
> 标签：plone, zope

有没有办法在不修改源代码`PLONE_SITE_ID`的情况下更改默认值？`plone.app.testing.interfaces`

我将 Plone 4 与几个定制产品一起使用，并且`plone.app.testing`(4.0.2) 相对成功。在我的自定义产品中，有几个实例在执行目录搜索时存在硬编码的物理路径来定位对象（例如，我的站点根目录是“mySiteID”，因此有几个自定义查询用于`path=/mySiteID/folder1/etc..`进行目录搜索）。

问题是`plone.app.testing`配置 ( `PLONE_FIXTURE`) 的 Plone 实例中的站点根目录是`PLONE_SITE_ID = 'plone'`. 因此，我在测试中添加的任何对象总是`/plone`作为根而不是`/mySiteID`我的测试中断。我可以通过更改界面中定义的值来解决这个问题，但这似乎是一个丑陋的 hack。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T20:45:12.147

如果你绝对*需要*，你可以对 id 进行猴子补丁；作为测试运行器部分的一部分，在构建中这样做：

```
[test]
# ...
initialization =
    import plone.app.testing.interfaces
    plone.app.testing.interfaces = 'mySiteID' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-07T11:06:51.133

马丁是正确的。不过，他的回答并没有完全奏效。您需要修补多个 plone.app.testing 导入以使其真正起作用：

```
[test] 
...

initialization =
    import plone.app.testing.helpers
    plone.app.testing.helpers.PLONE_SITE_ID = 'Plone'
    import plone.app.testing.interfaces
    plone.app.testing.interfaces.PLONE_SITE_ID = 'Plone'
    import plone.app.testing.layers
    plone.app.testing.layers.PLONE_SITE_ID = 'Plone' 
```

# java - 检查网络浏览器是否有来自外部 Java 程序的某个 cookie

> ID：13055862
> 
> 赞同：0
> 
> 时间：2012-10-24T18:56:06.273
> 
> 标签：java, cookies

有没有办法检查您的浏览器是否有来自外部 Java（不是 javascript）程序的某个 cookie。例如，让 Java 在浏览器 cookie 中搜索某个，如果存在则返回 true。很有可能这是不可能的，但是我想知道是否是。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T12:40:57.113

Chrome（Webkit/Blink 上的 Chromium/Safari/Opera/etc）和 Firefox 将 cookie 存储在用户 homedir 的 sql 数据库中。你可以从你的程序中打开这个数据库并检查/获取你需要的一切。

# jquery - 从 underscore.js 模板到 DOM 元素

> ID：13055865
> 
> 赞同：0
> 
> 时间：2012-10-24T18:56:22.373
> 
> 标签：jquery, underscore.js, underscore.js-templating

现在我正在使用以下代码行来检索下划线模板并使用 jQuery 从模板中创建一个 DOM 元素。

```
var element = $(_.template($('#template').html())()); 
```

它有效，但我认为这看起来有点混乱/混乱，所以我想知道是否有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T20:17:25.347

**为 Underscore 1.7+ 更新**：在较新版本的 Underscore 中，您确实不能做得更好，因为[`_.template`](http://underscorejs.org/#template)总是返回一个函数：

> **模板** `_.template(templateString, [settings])`
> 将 JavaScript 模板编译成可以评估渲染的函数。

您过去可以说`_.template(tmpl, data)`（见下文）获得一个填写好的模板，但现在不行了。

但是，您可以使用以下内容隐藏函数内的一些括号：

```
var tmpl_to_html = function(id) {
    var $el = $('#' + id);
    var fn  = _.template($el.html());
    return fn();
};
var $e = $(tmpl_to_html('template')); 
```

或者：

```
var tmpl_to_html = function(id, data) {
    var $el = $('#' + id);
    var fn  = _.template($el.html());
    return fn(data);
};
var $e = $(tmpl_to_html('template'));
var $x = $(tmpl_to_html('other', { a: 'b' })); 
```

* * *

**对于旧版本的下划线：**`_.template`您可以通过提供`data`参数来获取填充的模板：

> **template** `_.template(templateString, [data], [settings])`
> [...]
> 如果您正在编写一次性的，您可以将**数据**对象作为第二个参数传递给**模板**，以便立即呈现而不是返回模板函数。

任何真实的东西都可能会到期，`data`但一个空的对象可能是你最好的选择：

```
var $e = $(_.template($('#template').html(), { })); 
```

这仍然有点吵，但您总是可以将`_.template`调用包装在另一个函数中：

```
var tmpl_to_html = function(id) {
    var $el = $('#' + id);
    return _.template($el.html(), { });
};
var $e = $(tmpl_to_html('template')); 
```

如何将其分解为功能取决于您的偏好，您将在其他地方使用哪些部分。

# linux - 链接器中的 ATtiny 和 Linux AVR-GCC 中断复位向量

> ID：13055866
> 
> 赞同：1
> 
> 时间：2012-10-24T18:56:25.990
> 
> 标签：linux, reset, boot, avr, avr-gcc

在这个网站[http://www.mikrocontroller.net/articles/Konzept_f%C3%BCr_einen_ATtiny-Bootloader_in_C](http://www.mikrocontroller.net/articles/Konzept_f%C3%BCr_einen_ATtiny-Bootloader_in_C)（对不起，它是德语，我不得不使用谷歌翻译器）它描述了一种在链接代码时更改重置地址值的方法使用：

```
-Wl,--section-start=.bootreset=0x00 
```

然后，在代码中，我们将 bootreset 值定义为：

```
uint16_t boot_reset __attribute__((section(".bootreset"))) = 0xC000U + 0x1800 / 2 - 1; 
```

其中 0x1800 是我们的代码开始。

我在 Atmel Studio 中试过这个，它的工作原理和它说的完全一样，但是在使用 avr.gcc 4.5 的 linux 上它没有：S

任何人都知道我怎样才能在 linux avr-gcc 中完成这项工作，最好是（win 和 linux）？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T18:36:53.727

经过大量挖掘，我找到了答案。

我使用的 avr-objcopy 命令行参数仅包括将代码转换为十六进制的特定部分，例如 -j .text 等，因此省略了自定义 .bootreset 部分。

在 Atmel Studio 上，默认行为是使用 -R 排除某些部分，因此将包含上面的自定义部分。

要在十六进制上添加此自定义部分，只需在 avr-objcopy 上 -j（或 -J 现在不记得了）.bootreset。

# java - 在 bigdecimal 比较中创建 5 美分方差 + -

> ID：13055867
> 
> 赞同：1
> 
> 时间：2012-10-24T18:56:33.423
> 
> 标签：java

我们根据必须与原始总数匹配的百分比计算总数。但是，对于浮点数，总数永远不会匹配。

例子。

总百分比从 327.81 计算

非四舍五入金额示例

```
30%     98.343
20%     65.562
30%     98.343
20%     65.562
Total  327.81 
```

四舍五入的示例

```
30% 98.34
20% 65.56
30% 98.34
20% 65.56
Total 327.80 
```

我的金额需要四舍五入为货币格式，但是您会注意到四舍五入的金额与我们的原始金额 327.81 相比减少了 1 美分 327.80

最后，我需要验证这两个金额是否相等——这显然不会验证。管理层告诉我要在我的逻辑中添加 0.05 的差异。我可以比较彼此相等的值，但是我不确定如何将方差添加到等式中。有人可以帮我弄清楚如何将其添加到我的病情中。

这是我当前的代码比较它们彼此相等。

```
if (   this.pr.getRequisitionTotal() != null 
    && this.pr.getRequisitionTotal().compareTo(lineItemTotal) != 0
    && this.reviewedAuditActions()) 
{
    this.form.recordError("Requisition total must equal line item running total.");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T19:08:30.693

标准解决方案是跟踪“真实”数量与舍入版本之间的累积偏差，并调整舍入以保持偏差小于 0.5。这是一个使用 BigDecimal 的概念实现，这使得它有点冗长，但避免了使用浮点时特有的表示问题。

例如，如果您创建了一个名为的类，`RoundingAccumulator`它封装了这种行为，您可以对其余代码隐藏混乱的细节。

```
 BigDecimal value = new BigDecimal("327.81");
    BigDecimal[] percents = new BigDecimal[] {
            new BigDecimal(30),
            new BigDecimal(20),
            new BigDecimal(30),
            new BigDecimal(20) };
    BigDecimal accError = BigDecimal.ZERO;
    BigDecimal maxError = new BigDecimal("0.005");
    BigDecimal adjust   = new BigDecimal("0.01");
    BigDecimal hundred  = new BigDecimal("100");
    BigDecimal total    = BigDecimal.ZERO;
    for (BigDecimal pct : percents)
    {
        BigDecimal unrounded    = value.multiply(pct).divide(hundred); 
        BigDecimal rounded      = unrounded.setScale(2,RoundingMode.HALF_EVEN);
        BigDecimal error        = rounded.subtract(unrounded);
        BigDecimal correction   = BigDecimal.ZERO;
        accError = accError.add(error);
        if (accError.abs().compareTo(maxError) > 0)
            correction = accError.signum() > 0 ? adjust.negate() : adjust;
        rounded = rounded.add(correction);
        accError = accError.add(correction);
        System.out.println(unrounded.toString() + " " + rounded.toString() + " " + error.toString() + " " + accError.toString() + " " + correction.toString());

        total = total.add(rounded);
    }
    System.out.println("Total is " + total.toString());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T19:16:59.757

```
final double EPSILON = 0.05;
double a = 0.5;
double b = 0.51;
if (Math.abs(a-b) <= EPSILON){
// match
}
else{
// no match
} 
```

# sql - 我在此架构设计中是否具有参照完整性？

> ID：13055869
> 
> 赞同：0
> 
> 时间：2012-10-24T18:56:36.160
> 
> 标签：sql, foreign-keys, relational-database, relationship

![在此处输入图像描述](../Images/7a9146fb427a2fee2aaa9158129faf0a.png)

我担心我有一个涉及`Versions`和`VersionQuestions`表的数据完整性问题。例如，如果`DefMasterID`在`Versions`表中更改，它将指向不同的主定义，但其中的子记录`Questions`仍将指向`MasterQuestionsPool`属于原始调查主定义的记录。理想情况下，约束会阻止这种情况，但我认为他们不会。

我对这个设计有诚信吗？如果不是，那么确保完整性的适当途径是什么？

上述架构基于以下要求：

1.  需要有多个代表显着不同调查的调查主定义。

2.  主调查定义需要一个或多个版本，这些版本代表小的差异。

3.  每个调查大师都有一个问题池，在其版本之间共享。单个版本通常不会使用所有问题。这提供了比较所有版本的调查主数据的答案的能力。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T19:18:59.880

我认为你的担心是对的。

一种方法是向 MasterQuestionsPool 添加一个标识符（称之为 MasterQuestionInstanceLabel 之类的东西），该标识符在给定池中是唯一的（尽管不一定跨池）。换句话说，问题 1 与大师 1 的配对可能被标记为问题“A”（针对大师 1），但大师 2 可能有不同的问题“A”。然后，在 MasterVersionQuestions 表中，您使用该标签，而不是实际的问题 ID。

我认为这更符合现实。这个想法是你为给定的主定义一个问题池——问题 A、B、C、D、E、F（它们是实际 ID 1、5、102、15 和 754 的标签），然后假设版本 1 使用 A、B 和 E，而版本 2 使用 A、B、C 和 F（而是参考版本表中的实际 id）。

这样，版本表并不是说“这个版本中有哪些问题”，而是说“我的主池实例中有哪些在这个版本中”。

# java - Android - Google Drive HTTP 请求

> ID：13055871
> 
> 赞同：6
> 
> 时间：2012-10-24T18:56:41.970
> 
> 标签：java, android, google-docs-api, google-drive-api

我正在尝试编写一个可以将文件上传到 Google Drive 的应用程序。我选择通过原始 http 请求与此服务进行交互，因为我没有在 Android 上找到任何有用的 API 示例，而且它似乎比提供的库更轻量级。

我已经使用[https://developers.google.com/oauthplayground/](https://developers.google.com/oauthplayground/)来获取各种调用和响应，并尝试编写一个简单的请求来返回文件列表。通过该工具发送的请求是：

```
POST /drive/v2/files HTTP/1.1
Host: www.googleapis.com
Content-length: 0
Content-type: application/json
Authorization: OAuth *token goes here* 
```

我尝试使用以下方法在 Eclipse 中复制它：

```
URL url = new URL("https://www.googleapis.com/drive/v2/files?v=3");
HttpURLConnection conn = (HttpURLConnection) url.openConnection();
conn.setRequestMethod("POST");
conn.setRequestProperty("Host:", "www.googleapis.com");
conn.setRequestProperty("Content-length:", "0");
conn.setRequestProperty("Content-type:", "application/json");
conn.setRequestProperty("Authorization:", "OAuth " + token); 
```

我的应用程序中有一个有效的令牌，我还尝试添加`conn.setRequestProperty("GData-Version:", "3.0")` Google 文档中指定的标头。我收到响应代码 400，我确定我的代码有明显的问题，但我之前没有写过标头请求，从示例中我看到这看起来是正确的。

任何帮助，将不胜感激。

编辑：好的，我得到了进一步的消息 - 我现在收到 401 - 一条消息说我需要登录 编辑：我现在收到来自服务器的“收到的身份验证挑战为空”响应。

```
 String token = fetchToken();
    if (token == null) {
      return;
    }
    URL url = new URL("https://www.googleapis.com/drive/v2/files");
    HttpURLConnection conn = (HttpURLConnection) url.openConnection();
    try {
        conn.setRequestMethod("POST"); //use post method
        conn.setDoOutput(true); //we will send stuff
        conn.setDoInput(true); //we want feedback
        conn.setUseCaches(false); //no caches
        conn.setAllowUserInteraction(false);
        conn.setRequestProperty("HTTP-Version:", "HTTP/1.1");
        conn.setRequestProperty("Content-type: ", "application/json");
        conn.setRequestProperty("Authorization:","OAuth" + token);
      } 
      catch (ProtocolException e)
      {
          e.printStackTrace();
      }

    OutputStream out = conn.getOutputStream();
    try {
      OutputStreamWriter wr = new OutputStreamWriter(out);
      wr.write("{\"Method\":\"POST\",\"absoluteURI\"" +
                ":\"https://www.googleapis.com/drive/v2/files\"," +
                "\"headers\":{\"Content-Type\":\"application/json\"," +
                "\"Content-Length\":\"0\"},\"message-body\":\"\"," +
                "\"access_token\":\"" +
                token +
                "\"" +
                "," +
                "\"access_token_type\":\"oauth\"}"
      ); //ezm is my JSON object containing the api commands
      wr.flush();
      wr.close();
    }
    catch (IOException e) {
    }
    finally { //in this case, we are ensured to close the output stream
      if (out != null)
        out.close();
    }

    int sc = conn.getResponseCode();
    if (sc == 200) {
        Log.i(TAG, "200 OK..");
      InputStream is = conn.getInputStream();
      String name = getFileName(readResponse(is));
      System.out.println(readResponse(is));
      //mActivity.show("Hello " + name + "!");
      is.close();
      return;
    } else if (sc == 401) {
        GoogleAuthUtil.invalidateToken(mActivity, token);
        onError("Server auth error, please try again.", null);
        Log.i(TAG, "Server auth error: " + readResponse(conn.getErrorStream()));
        return;
    } else {
        System.out.println(sc);
      onError("Server returned the following error code: " + sc, null);
      return;
    } 
```

我的令牌应该是有效的，因为我可以通过访问来获取用户信息

```
"https://www.googleapis.com/oauth2/v1/userinfo?access_token=" + token 
```

有任何想法吗？

编辑：对于任何找到这个寻求帮助的人，我从来没有让它工作，不完全确定问题是什么，但最后我使用了官方 api - 一个很好的工作示例可以在这里找到 [Google drive SDK 2.0 throws error 400 Bad Request](https://stackoverflow.com/questions/12888795/google-drive-sdk-2-0-throws-error-400-bad-request)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T13:33:04.400

您确定您的令牌对 Drive Scopes 有效吗？您在问题末尾提到的测试不在同一范围内。

另外，不要忘记 Oauht2 令牌的有效期仅为一小时。如果您有一个，您可能需要请求另一个或使用您的刷新令牌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T19:53:15.083

如果您使用 HTTPS，GET 而不是 POST 和 Bearer 令牌，它可以工作。

使用卷曲：

```
curl -H "Authorization: Bearer {TOKEN}" \
-H "Content-Type: application/json" \
https://www.googleapis.com/drive/v2/files 
```

我不知道为什么谷歌没有记录 REST API。如果您在某处找到文档，请发表评论。

# asp.net-mvc-3 - 如何在控制器中访问多选列表的值？

> ID：13055873
> 
> 赞同：1
> 
> 时间：2012-10-24T18:56:44.200
> 
> 标签：asp.net-mvc-3

发布时，我似乎无法访问多选列表的值。

视图中的代码是：

```
<select id="instructors" name ="instructors" multiple="multiple">
    @{
        List<CMMS.WebUI.ViewModels.AssignedInstructor> instructors = ViewBag.Instructors;

        foreach (var instructor in instructors)
        {
            if (instructor.HasInstructor)
            {
                @:<option value="@instructor.InstructorId" selected="selected">@instructor.InstructorName</option>
            }
            else
            {
                @:<option value="@instructor.InstructorId">@instructor.InstructorName</option>
            }
    }
}
</select> 
```

我尝试通过以下方式获取控制器中的值：

```
[HttpPost]
public ActionResult Edit(int id, FormCollection formCollection)
{
    string[] selectedInstructors = formCollection["instructors"];
    ...
}

[HttpPost]
public ActionResult Edit(int id, string[] instructors)
{  
    ...
} 
```

两种方式的导师总是无效的。如果有人能告诉我我在哪里搞砸了，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T20:29:22.880

尝试使用 for 循环

```
for (int i = 0; i < instructors.Count(); i++)
{
    if (instructor[i].HasInstructor)
    {
     ... 
```

# c# - TransactionScope 在 2 层数据库设置中无法正常工作

> ID：13055875
> 
> 赞同：0
> 
> 时间：2012-10-24T18:56:54.793
> 
> 标签：c#, ado.net, transactionscope

我有一种方法可以使用两种方法。一个处理插入，另一个处理更新。我围绕这两种方法设置了事务范围，因此如果有任何问题，它将回滚。我注意到它正在将数据放入数据库中，但出错时它没有删除它。我已经为范围尝试了 RequiresNew 和 Required 选项，但这似乎没有什么不同。

附加信息： **这些存储过程实际上存储在保存存储过程的“实用程序”数据库中，但它们实际上正在修改不同数据库中的记录。**

此方法会将大约 700 多条记录插入 40 个不同的表中。

主要方法

```
using (var scope = new TransactionScope(TransactionScopeOption.Required))
{
    foreach (var change in changes)
    {
        switch (change.ChangeType)
        {
            case ChangeTypeEnum.Insert:
                var result = DataAccess.InsertTableRow(sourceEnvironmentId, SuperClientVendorID,
                                                       DatabaseName, DataRouteName, change,
                                                       typeNamespace);
                postList.Add(result);
                break;
            case ChangeTypeEnum.Update:
                DataAccess.UpdateTableRow(sourceEnvironmentId, SuperClientVendorID, DatabaseName,
                                          DataRouteName, change, typeNamespace);
                postList.Add(change);
                break;
        }
    }

    scope.Complete();
} 
```

插入方法

```
var sproc = string.Format("Carma.usp_{0}_{1}_ins", databaseName, managedState.TypeName);
var connString = DataAccessManager.GetConnectionString(executionEnvironment, superClientVendorID, routeName, sproc, false);

using (var newConnection = new SqlConnection(connString))
{
    newConnection.Open();

    using (var newSqlCommand = new SqlCommand(sproc, newConnection))
    {
        newSqlCommand.CommandType = CommandType.StoredProcedure;
        newSqlCommand.CommandTimeout = Setup.TimeOut;
        newSqlCommand.Parameters.AddRange(GetParameters(managedState, typeNamespace, true));

        newSqlCommand.ExecuteNonQuery();

        return managedState;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T21:37:14.620

所以一位同事能够帮助我解决这个问题.. 这是修改后的代码，希望它能帮助那里的人:)

调用方法：

```
using (var scope = new TransactionScopeMS())
{
    foreach (var change in changes)
    {
        switch (change.ChangeType)
        {
             case ChangeTypeEnum.Insert:
                  var result = DataAccess.InsertTableRow(sourceEnvironmentId, SuperClientVendorID,
                                                               DatabaseName, DataRouteName, change,
                                                               typeNamespace);
                  postList.Add(result);
                  break;
             case ChangeTypeEnum.Update:
                  DataAccess.UpdateTableRow(sourceEnvironmentId, SuperClientVendorID, DatabaseName,
                                                  DataRouteName, change, typeNamespace);
                  postList.Add(change);
                  break;
        }
    }

    scope.Complete();
} 
```

插入方法：

```
using (IDbConnection newConnection = TransactionScopeMS.Current.GetConnection(connectionString))
        {
            using (IDbCommand newSqlCommand = newConnection.CreateCommand(sproc, CommandType.StoredProcedure, TransactionScopeMS.Current.GetTransaction(connectionString)))
            {

                foreach (var pram in GetParameters(managedState, typeNamespace, true))
                {
                    newSqlCommand.Parameters.Add(pram);
                }

                newSqlCommand.ExecuteNonQuery();

                return managedState;
            }
        } 
```

# c# - 我想在 2 个数字之间创建 5 个随机数并显示在我的文本框中

> ID：13055877
> 
> 赞同：0
> 
> 时间：2012-10-24T18:57:00.877
> 
> 标签：c#

我只是在 uni 学习 C#，似乎很难将这个随机数放入文本框中。在此之前我还没有学过一门语言，如果这是一个简单的问题，我深表歉意。

我想在用户指定的两个不同数字之间创建 5 个随机数。然后将生成的 5 个数字打印到文本框中以显示它们。

私人无效按钮1_Click（对象发送者，EventArgs e）{

```
 int firstnum = Int32.Parse(txtboxnum.Text);
        int secondnum = Int32.Parse(txtboxnum2.Text);

        Random random = new Random();
        int randomNumber = random.Next(firstnum, secondnum);

        Int32 loop = 0;
        do
        {
            loop++;
        }
        while (loop > 5);

        string myString = randomNumber.ToString();

       string  txtboxanswer = myString; 
```

我会非常感谢任何我出错的建议。因为我似乎无法让答案出现在我的文本框中。我知道我一定很近。我希望 ：）

感谢您提前提供的所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T19:01:06.740

你已经够近了。只需对代码进行最少的编辑，它就应该是这样的

```
int firstnum = Int32.Parse(txtboxnum.Text);
    int secondnum = Int32.Parse(txtboxnum2.Text);

    Random random = new Random();

    Int32 loop = 0;
    do
    {
       int randomNumber = random.Next(firstnum, secondnum);
       string myString = randomNumber.ToString();
       TextBox t= new TextBox();
       t.Text=myString; 
       t.Left=0;t.Top=loop * 20;
       this.Controls.Add(t);

       loop++;
    }
    while (loop < 5); 
```

有关动态添加控件的更多信息，[请查看此](http://msdn.microsoft.com/en-us/library/aa984255%28v=vs.71%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T19:02:52.710

顺便说一句，我就是这样做的

```
 int firstnum = 0;
        int secondnum = 1;
        Random random = new Random();

        int[] randomnums = new int[5];

        for (int i = 0; i < randomnums.Length; i++)
        {
            randomnums[i] = random.Next(firstnum, secondnum);
        } 
```

然后你可以做类似的事情

```
string myString = randomnums[1].ToString() 
```

获取特定数字的字符串表示形式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T19:01:03.560

您走在正确的轨道上，我认为您唯一缺少的是将字符串分配给文本框。只需放置另一个文本框（假设是 answertxtbox）并在循环末尾写下以下内容：

```
answertxtbox.Text += txtboxanswer + ", "; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T19:01:51.797

简单地说，您没有将 的`Text`属性设置`TextBox`为结果。

```
txtBoxName.Text= myString 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T19:00:14.760

尝试这个 ：

```
Random rand = new Random();
for (int i = 0; i < 5; i++)
{
    int a = rand.Next(Min, Max);
    textBox1.Text =  textBox1.Text + string.Format(" {0} ", a.ToString());
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-24T19:24:46.883

只是因为似乎每个人都在回答...

```
 int firstnum = Int32.Parse(txtboxnum.Text);
 int secondnum = Int32.Parse(txtboxnum2.Text);
 Random random = new Random();

 List<int> results = new List<int>();
 for (int i =0; i < 5; i++)
 {
     results.Add(random.Next(firstnum, secondnum));
 }

 answertxtbox.Text = String.Join(",", Array.ConvertAll<int, String>(results.ToArray(), Convert.ToString)); 
```

注意：我实际上不会这样做，但它确实说明有很多很多方法可以解决同一个问题。

# javascript - 在 knockoutjs 中是对象克隆还是它们引用相同的东西？

> ID：13055879
> 
> 赞同：0
> 
> 时间：2012-10-24T18:57:07.743
> 
> 标签：javascript, knockout.js, clone, knockout-2.0

我在早期版本的淘汰赛中构建了一个应用程序，代码如下所示：

```
 var ProductCollection = function(products, metadata) {
        var self = this;
        this.allProducts = products;
        this.activeProducts = ko.observableArray(products); 
```

然后，如果我从 activeProduct 数组中过滤掉项目，例如：

```
 this.activeProducts.remove(function(item) { //some code }) 
```

我可以通过执行以下操作将 activeProducts 重置为所有产品：

```
 this.activeProducts(this.allProducts); 
```

但是现在看来，如果我在从 this.allProducts 中删除产品的上方执行删除功能...我要传入的产品并设置链接到相同的引用还是什么？我不明白为什么这会发生在现在而不是以前。我希望能够将 this.activeProducts 和 this.allProducts 保留为单独的数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T19:49:45.770

正如您的实验所示，`ko.observableArray()`只需包装底层数组。它**不会**克隆底层数组，然后创建一个新实例。

以下是来自[Knockout 文档](http://knockoutjs.com/documentation/observableArrays.html)的更多内容：

> observableArray 跟踪数组中的对象...
> 
> observableArray 只跟踪它持有的对象，并在添加或删除对象时通知侦听器......
> 
> ...您可以通过将 observableArray 作为不带参数的函数调用来获取底层 JavaScript 数组...
> 
> 从技术上讲，您可以使用任何本机 JavaScript 数组函数来操作该底层数组...

* * *

```
// Thanks @RP Niemeyer
this.activeProducts = ko.observableArray(products.slice(0));

// Deep copy with jQuery
this.activeProducts = ko.observableArray(jQuery.extend(true, {}, products)); 
```

此外，如果您真的很好奇，这里有一整个问题专门用于 Javascript[克隆](https://stackoverflow.com/q/122102/109941)。

# struts2 - 如何在struts2中声明每个包的属性文件

> ID：13055882
> 
> 赞同：0
> 
> 时间：2012-10-24T18:57:23.700
> 
> 标签：struts2

我想为每个包配置 struts.xml 文件以及每个包的属性文件。但我无法找到任何方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T19:04:20.470

如果“属性文件”是指资源，请`package.properties`在每个包中放置一个文件。

[http://struts.apache.org/2.x/docs/localization.html](http://struts.apache.org/2.x/docs/localization.html)

-per `struts.xml`-package 没有任何意义。您可以拥有任意数量的 S2 配置文件，按您想要的任何机制分解，并将它们包含在默认的`struts.xml`.

# python - 解析python中的数学表达式并求解以找到答案

> ID：13055884
> 
> 赞同：3
> 
> 时间：2012-10-24T18:57:42.467
> 
> 标签：python, string, parsing, split, expression

我对编程很陌生。这与python有关。所以想法是取3/5或最多3/5*2（最多两个运算符，注意运算符可以是+、-、/、*中的任何一个）之类的表达式并求解。空格可以存在于表达式中的任何位置。

用户输入表达式，比如 3/5，程序需要求解表达式并显示答案。我尝试过的如下。请注意，我只尝试了第一部分，一旦我可以正确拆分用户输入的原始表达式（这将是一个字符串），创建函数将是简单的部分：

```
expres= str(input("something:"))

ssplit= hit.partition("/")
onec= int((ssplit[0].lstrip()).rstrip())
twoc= (ssplit[1].lstrip()).rstrip()
threec= int((huns[2].lstrip()).rstrip())

print(onec,"...",twoc,"...",threec) #just a debug test print 
```

因此，在上面，我可以将 3/5 之类的表达式拆分为三个单独的字符串：3、/ 和 5。我还可以删除运算符/操作数之前和之后的所有空格。我在拆分 4/5+6 之类的表达式时遇到问题，因为我无法为 ssplit[3] 或 ssplit[4] 输入代码，然后输入 3/5 之类的表达式，因为它不会被定义。基本上我需要你帮助找出如何拆分像 3/4-6 等的表达式。我还需要“”行的帮助，`ssplit= hit.partition("/")`以便它可以查看输入的表达式并同时使用 +、- 和 *。任何和所有的帮助表示赞赏。另外，如果我上面的代码看起来很讨厌而且效率低下，请给我批评。谢谢！

注意我不能，也不想使用 eval。操作顺序是必需的。我不能使用复杂的命令。我需要保持简单，我最多可以使用字符串库，在字符串/整数/浮点数等以及 if、and 等之间进行转换。陈述。我也可以使用函数。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-24T19:15:04.820

如果我不打算依赖外部库，我会这样做：

```
def parse(x):
    operators = set('+-*/')
    op_out = []    #This holds the operators that are found in the string (left to right)
    num_out = []   #this holds the non-operators that are found in the string (left to right)
    buff = []
    for c in x:  #examine 1 character at a time
        if c in operators:  
            #found an operator.  Everything we've accumulated in `buff` is 
            #a single "number". Join it together and put it in `num_out`.
            num_out.append(''.join(buff))
            buff = []
            op_out.append(c)
        else:
            #not an operator.  Just accumulate this character in buff.
            buff.append(c)
    num_out.append(''.join(buff))
    return num_out,op_out

print parse('3/2*15') 
```

它不是最优雅的，但它可以让你获得合理的数据结构（就我而言）

现在代码实际解析和评估数字 - 这将在浮点中完成所有操作，但很容易更改......

```
import operator
def my_eval(nums,ops):

    nums = list(nums)
    ops = list(ops)
    operator_order = ('*/','+-')  #precedence from left to right.  operators at same index have same precendece.
                                  #map operators to functions.
    op_dict = {'*':operator.mul,
               '/':operator.div,
               '+':operator.add,
               '-':operator.sub}
    Value = None
    for op in operator_order:                   #Loop over precedence levels
        while any(o in ops for o in op):        #Operator with this precedence level exists
            idx,oo = next((i,o) for i,o in enumerate(ops) if o in op) #Next operator with this precedence         
            ops.pop(idx)                        #remove this operator from the operator list
            values = map(float,nums[idx:idx+2]) #here I just assume float for everything
            value = op_dict[oo](*values)
            nums[idx:idx+2] = [value]           #clear out those indices

    return nums[0]

print my_eval(*parse('3/2*15')) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T19:04:44.923

这不是解析表达式的真正方法，您应该更多地研究词法分析器和解析器，例如[PLY](http://www.dabeaz.com/ply/)或[pyparsing](http://pyparsing.wikispaces.com/)。但是，如果您只想评估可以使用的表达式`eval(expr)`。请注意， eval 将执行您提供的任何代码，因此它并不安全。

**编辑** 这里有一个使用 pyparsing 的示例，应该可以帮助您入门：

[解析示例](https://stackoverflow.com/questions/8507694/pyparsing-example)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T20:21:01.263

使用`shlex`和`StringIO`Python 模块。在 Python 2.3+ 中：

```
>>> from StringIO import StringIO
>>> import shlex
>>> input = StringIO('3/4+5')
>>> list(shlex.shlex(input))
['3', '/', '4', '+', '5'] 
```

# spring - Spring 不接受 POST 参数，除非 @RequestParam "required=false"

> ID：13055885
> 
> 赞同：14
> 
> 时间：2012-10-24T18:57:45.957
> 
> 标签：spring, rest

我正在运行一个 Spring 3.1.2 应用程序。我有一个带有多种方法的 RESTful servlet。GET 方法在`@PathVariables`100% 的时间内工作得非常好（匹配、响应正确编组为基于 Accept 标头的 JSON 或 XML 等）。

但是 POST 方法根本不起作用。经过数小时的折腾和我能找到的所有其他 Spring 方面（所有修补都恢复了），我将其`required`范围缩小到`@RequestParam`. 这是我一直用来调查的简化测试方法：

```
@RequestMapping (value = "/bogus",
                 method = POST)
public @ResponseBody PassResponse bogus (
            @RequestParam (value = "test", required = false) String test) {
    // Just some handy garbage objects that marshal to JSON/XML
    UserResponse user = new UserResponse ();
    user.setName (test);
    AccountDetail detail = new AccountDetail (user,null);
    return new PassResponse (detail);
} 
```

**required=false**：一切正常（接收并解释参数）。完全符合我的预期

**required=true**：（或未指定，因为这是默认值）我一直收到消息“ *MissingServletRequestParameterException：必需的字符串参数'test'不存在*”

客户端视图：

**必需=真**

```
Request URL:http://localhost:8080/internal-project/rest/bogus
Request Method:POST
Status Code:400 Bad Request
Request Headersview source
Accept:application/json
Connection:keep-alive
Content-Length:12
Host:localhost:8080
Request Payload
test=LALALAA
Response Headersview source
Connection:close
Content-Length:971
Content-Type:text/html;charset=utf-8
Date:Wed, 24 Oct 2012 18:41:05 GMT
Server:Apache-Coyote/1.1 
```

**必需=假**

```
Request URL:http://localhost:8080/internal-project/rest/bogus
Request Method:POST
Status Code:200 OK
Request Headersview source
Accept:application/json
Connection:keep-alive
Content-Length:12
Host:localhost:8080
Request Payload
test=LALALAA
Response Headersview source
Content-Type:application/json;charset=UTF-8
Date:Wed, 24 Oct 2012 18:44:03 GMT
Server:Apache-Coyote/1.1
Transfer-Encoding:chunked 
```

切换时运行的测试套件完全相同`required`，我可以看到参数正在传递。当参数是可选的时，Spring 会正确处理它。

如果有人以前遇到过这个问题或有任何想法，我很想听听他们的意见。将所需参数标记为可选，即使它有效，即使我评论它也是可怕的自我文档。再加上这种行为让我有点紧张。希望我只是在某个地方搞砸了一些东西......

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-24T19:16:13.560

我认为你的`Content-Type`标题应该是。`application/x-www-form-urlencoded`

# jquery - 在 cleartimeout 后放回我的 settimeout 的值

> ID：13055886
> 
> 赞同：2
> 
> 时间：2012-10-24T18:57:52.877
> 
> 标签：jquery

在单击按钮后单击按钮时，我想将 my 的值恢复`setTimeout`为 30 ，该按钮调用。`r2``r1``clearTimeout`

我尝试了一些东西，但它把数字恢复到 30，然后又恢复到以前的数字。

这是代码：

## JS

```
$(document).ready(function () {
    var numb = 30;
    var numba = 100;
    var timer = null;

    function comptage() {
        timer = setTimeout(comptage, 1000);
        $('#test').html(numb);
        $("#progressbar").progressbar({
            value: numba
        });
        numb--;
        numba = numba - (numba / numb);
        if(numb < 0) {
            numb = 0;
            numba = 0;
        }
    };
    comptage();
    $("#r1").click(function () {
        clearTimeout(timer);
    });
    $("#r2").click(function () {
        timer = setTimeout(comptage, 1000);
        var numb = 30;
        var numba = 100;
        $('#test').html(numb);
        $("#progressbar").progressbar({
            value: numba
        });
        numb--;
        numba = numba - (numba / numb);
    });
}); 
```

## HTML

```
<div id="r1">bouton desactiver</div>
<div id="r2">bouton réactiver</div>
<div id ="affichage_point">
    <div id="bardivs">
        <div id="progressbar"></div>
        <div id="test"></div>
    </div>
</div>
<?php if (isset($_SESSION['timer'])){ ?>
    <div id ="r6">
        <?php echo $_SESSION['timer'] ?>
    </div>
    <br/>
<?php } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T19:12:02.683

在 的点击处理程序中`r2`，您有：

```
var numb = 30;
var numba = 100; 
```

这些将创建新的局部变量，并且不会触及全局变量。删除`var`此处以使其更新全局变量。

# javascript - 如何用 4 个步骤制作一个范围滑块？

> ID：13055887
> 
> 赞同：1
> 
> 时间：2012-10-24T18:57:53.970
> 
> 标签：javascript, jquery, user-interface, slider

我想在 jQuery 中制作一个有 4 个步骤的范围滑块。见附图![在此处输入图像描述](../Images/6b1193f8c1e65a98aa2489a5b06bb75a.png)

问题是我不知道从哪里开始。我找到[了这个参考](http://codefusionlab.com/slider_steps.html)，我想知道你是否能指出我正确的方向。任何提示或参考表示赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T19:54:17.937

这样的事情可能会帮助你

[https://github.com/freqdec/fd-slider](https://github.com/freqdec/fd-slider)

[https://github.com/fryn/html5slider](https://github.com/fryn/html5slider)

这些是`<input type="range" />`tha 的 vanilla JS 实现，可以设置为滑块

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T19:02:25.840

使用 jQuery UI，您只需`step`为每个区域设置增量，让我们说这个例子：

```
$( "#slider" ).slider({
    min: 0,
    max: 3,
    step: 1 // so we'll move from 0 - 1 - 2 - 3 (4 locations)
}); 
```

执行此逻辑，您将能够移动到 4 个不同的位置。在这种情况下，每次递增 1。

更多信息在这里：http: [//jqueryui.com/slider/#steps](http://jqueryui.com/slider/#steps)

# linux - sed with literal string--not input file

> ID：13055889
> 
> 赞同：119
> 
> 时间：2012-10-24T18:58:03.717
> 
> 标签：linux, unix, sed

This should be easy: I want to run **sed** against a literal string, not an input file. If you wonder why, it is to, for example edit values stored in variables, not necessarily text data.

When I do:

```
sed 's/,/','/g' "A,B,C" 
```

where A,B,C is the literal which I want to change to A','B','C

I get

```
Can't open A,B,C 
```

As though it thinks A,B,C is a file.

I tried piping it to echo:

```
echo "A,B,C" | sed 's/,/','/g' 
```

I get a prompt.

What is the right way to do it?

* * *

## 回答 #1

> 赞同：171
> 
> 时间：2012-10-24T19:00:04.697

You have a single quotes conflict, so use:

```
 echo "A,B,C" | sed "s/,/','/g" 
```

If using [bash](/questions/tagged/bash "show questions tagged 'bash'"), you can do too (`<<<` is a `here-string`):

```
sed "s/,/','/g" <<< "A,B,C" 
```

but not

```
sed "s/,/','/g"  "A,B,C" 
```

because `sed` expect file(s) as argument(s)

**EDIT**:

if you use [ksh](/questions/tagged/ksh "show questions tagged 'ksh'") or any other ones :

```
echo string | sed ... 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-24T19:01:21.267

Works like you want:

```
echo "A,B,C" | sed s/,/\',\'/g 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-06-07T14:57:32.173

My version using variables in a bash script:

Find any backslashes and replace with forward slashes:

```
input="This has a backslash \\"

output=$(echo "$input" | sed 's,\\,/,g')

echo "$output" 
```

# php - 在订单中添加自定义税字段，Woocommerce

> ID：13055893
> 
> 赞同：2
> 
> 时间：2012-10-24T18:58:32.577
> 
> 标签：php, wordpress, woocommerce

在 woocommerce 仪表板中，当我转到订单时，然后查看我到那里的“订单项目”，我看到以下字段：

项目--SKU--名称--税类--数量--行小计--行总计

我想在数量之后添加一个“税”字段，我该怎么做？

感谢所有的帮助

# java - ArrayList数组的Java空指针异常

> ID：13055895
> 
> 赞同：-2
> 
> 时间：2012-10-24T18:58:40.507
> 
> 标签：java

我在这里找到了很多相关的帖子，但无法得到我的答案。为什么会出现这个运行时错误？

```
static List<Integer>[] adj = (List<Integer>[]) new ArrayList[1000];

    public static void main(String[] args) {
        int edge, u, v, source;
        Scanner input = new Scanner(System.in);
        edge = input.nextInt();
        for (int i = 0; i < edge; i++) {
            u = input.nextInt();
            v = input.nextInt();
            adj[v].add(u); // Null pointer Exception
            adj[u].add(v); // Null pointer Exception
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T18:59:52.607

首先，您需要初始化数组的每个元素。因为在您这样做之前，您在数组中的引用不会指向任何对象。

所以，在那个for循环之前，你可以添加这个，来初始化你的`List`内部`Array`： -

```
for (List<Integer> elem: adj) {
    elem = new ArrayList<Integer>();
} 
```

此外，如果你有`List of List`而不是`array of List`. 因此，您可以将您的列表声明为：-

```
static List<List<Integer>> adj = new ArrayList<List<Integer>>(); 
```

使用 an 的一个优点`ArrayList`是，您不必在一开始就限制您的大小。因此，您可以添加任意数量的元素。但是，如果需要创建固定大小的列表，您可以在`ArrayList`构造函数中传递 size 参数。

然后你需要改变你的元素添加代码： -

```
adj[v].add(u); 
```

到： -

```
adj.get(v).add(u); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T18:59:31.813

那是因为你不分配`adj[v]`. 您不能`add`在`null`.

你可以做

```
 for (int i = 0; i < edge; i++) {
        u = input.nextInt();
        v = input.nextInt();
        if (adj[v]==null) adj[v] = new ArrayList();
        adj[v].add(u); 
        if (adj[u]==null) adj[u] = new ArrayList();
        adj[u].add(v); 
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T19:03:52.847

您已经确定创建了一个数组，但尚未分配数组的每个元素。因此，当您尝试添加到*不存在的*元素时，您会遇到 NullPointerException。

作为旁注，如果您创建一个列表列表，您想要实现的目标看起来会好得多。换句话说：

```
List<List<Integer>> yourList = new ArrayList<List<Integer>>(); 
```

然后，您可以在*yourList*中初始化每个单独的列表，然后将元素放入其中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T19:09:08.877

```
List<Integer>[] adj = (List<Integer>[]) new ArrayList[1000]; 
```

说`adj`是对 1000 个引用的`ArrayList`引用。您还需要初始化这些`ArrayList`s 中的每一个。

```
private final int MAX = 1000;
static List<Integer>[] adj = (List<Integer>[]) new ArrayList[MAX];
public static void main(String[] args) {
    for (int i = 0; i < MAX; i++){
       adj[i] = new ArrayList();
    }

    int edge, u, v, source;
    Scanner input = new Scanner(System.in);
    edge = input.nextInt();

    for (int i = 0; i < edge; i++) {
        u = input.nextInt();
        v = input.nextInt();
        adj[v].add(u); // Null pointer Exception
        adj[u].add(v); // Null pointer Exception
    } 
```

# wolfram-mathematica - 使用 md5 比较两个数组？

> ID：13055900
> 
> 赞同：0
> 
> 时间：2012-10-24T18:58:53.937
> 
> 标签：wolfram-mathematica, md5

背景：我有两个对象数组，我想知道这两个数组是否相同。我可以计算所有对象的 md5 并将它们加起来做一个比较吗？

基本上，如果我知道 md5(a)=md5(b)，那么实际上 a=b

但是如果我知道 md5(a) + md5(b) = md5(c) + md5(d)，我可以说 a=c 和 b=d 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T19:06:39.320

> 我有两个对象数组，我想知道这两个数组是否相同。我可以计算所有对象的 md5 并将它们加起来做一个比较吗？

这是优化吗？

如果您只有 2 个数组，则不会从中受益，因为计算内存块的哈希是 O(​​n) 操作。如果您要比较一次数组，那么简单地比较长度和每个元素的简单方法会更快。

> 但是如果我知道 md5(a) + md5(b) = md5(c) + md5(d)，我可以说 a=c 和 b=d 吗？

不。如果您需要一种快速的方法来消除大量案例，您可以将其用作初始猜测，因为 for`a == c`和`b == d`to 为真，`md5(a) == md5(c)`并且`md5(b) == md5(d)`也必然为真。但是，不确定：存在 md5 检查会成功但数组不相等的情况。如果您决定依赖此检查，则需要确保清除此类误报。

此外，如果您取总和，顺序变得无关紧要。换句话说，您最终会遇到一些总和可能相等的不同情况：

*   `a == c`和`b == d`（预期）
*   `a == d`和`b == c`（交换值）
*   `a != c`和`a != d`和`b != c`（`b != d`巧合的误报）

您将需要考虑所有这些，以使此启发式方法有用。

# emacs - 为什么 dired-do-shell-command 不能对 '.' 进行操作 或者 '..'？

> ID：13055903
> 
> 赞同：1
> 
> 时间：2012-10-24T18:59:14.697
> 
> 标签：emacs

使用`emacs`on `cygwin`，我经常使用bound to从`dired`缓冲区中使用的一个 shell 命令是，例如打开 Word 文档或 Visual Studio 项目或其他任何东西。`!``dired-do-shell-command``cygstart`

但是点击`!`当前目录条目`.`会导致错误`Cannot operate on`。或`..'`。

我想在绕过它并允许在当前目录和父目录上运行命令之前找出答案。**这种限制有什么理由吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T19:12:53.447

`dired-do-shell-command`来电`dired-get-filename`。

如果您查看 dired-get-filename 文档，您会看到

```
(dired-get-filename &optional LOCALP NO-ERROR-IF-NOT-FILEP) 
```

> 在 Dired 中，返回此行中提到的文件名。
> 
> ...
> 
> 可选参数 NO-ERROR-IF-NOT-FILEP 表示将`.' and` ..' 视为常规文件名，如果此行上没有文件名，则返回 nil。否则，在这些情况下会发生错误。

`dired-get-filename`无`NO-ERROR-IF-NOT-FILEP`参数调用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-06T10:47:15.337

自提出问题以来，此限制已被取消。

在 Emacs (24.3) 的当前稳定版本中，您可以使用`dired-do-shell-command`on`.`和`..`

# python - 在 Python 中解析多个 CSV (.txt) 文件

> ID：13055906
> 
> 赞同：1
> 
> 时间：2012-10-24T18:59:26.633
> 
> 标签：python, csv

我正在尝试建立一个系统，用户可以在其中登录 Web 界面并跟踪已下达的订单。系统将跟踪订单从最初的确认到生产，最后在发货前停止。（正如我妻子解释的那样：“就像 Domino's Pizza 订单跟踪器，但用于名片。”）我被困在需要从逗号分隔的 .txt 文件不断变化的目录中解析数据的地步。下的每个订单都会自动生成它自己的 .txt 文件，其中包含我将在 Web 界面上显示的各种重要信息。例如：

H39TZ3.txt：

```
token,tag,prodcode,qty          #(These are the headers)
,H39TZ3,pchd_4stpff,,100        #(These are the corresponding values for part 1 of the order)
,H39TZ3,pchdn_8ststts,6420-PCNM8ST,100   #(These are values for part 2 of the order) 
```

在任何给定时间，目录中都会有超过 300 个不同的 .txt 文件，这些文件会根据它们的订单状态来来去去（一旦发货，文件将被存档）我已经阅读了代码来解析单个文件并将值导入字典，但我发现的所有内容都是针对单个文件的。我将如何编写这样的东西，只针对多个文件？

```
import csv

d = {}

for row in csv.reader(open('H39TZ3.txt')):
    d['Order %s' % row[1]] = {'tag': row[1], 'prodcode': row[2], 'qty': row[3]} 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T19:06:28.410

您可以使用列出包含文件`os.listdir()`的目录的内容。`.txt`像下面这样的东西应该适合你：

```
for filename in os.listdir("."):
    with open(filename) as csv_file:
        for row in csv.reader(csv_file):
            d['Order %s' % row[1]] = {'tag': row[1], 'prodcode': row[2], 'qty': row[3]} 
```

请注意，我`with`在其中添加了一条语句。它将确保在您完成处理后关闭文件，这样您就不会浪费/耗尽文件描述符。如果目录可能包含您感兴趣的文件之外的其他文件，您可以在`with`语句之前添加适当的过滤。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T19:09:28.890

`csv.DictReader`如果您想将行作为字典读取，我想补充一点，这可能是一个更好的选择。它将根据第一行（标题）自动设置字典的键。你会这样使用它：

```
with open(filename) as csv_file:
    for row in csv.DictReader(csv_file):
        d['Order ' + row['tag']] = row 
```

但是，正如 dm03514 所提到的，数据库可能是更好的选择。sqlite 自带 Python（`sqlite3`模块），您可以使用各种工具来检查和修改数据库。它也应该比使用单个文件更健壮。

# php - Silex SwiftMailer 在执行时未建立 SMTP 连接

> ID：13055907
> 
> 赞同：11
> 
> 时间：2012-10-24T18:59:28.067
> 
> 标签：php, swiftmailer, silex

我正在制作一个使用 SwiftMail 扩展发送的控制台应用程序。由于我们的政策，我有两台虚拟机，一台用作 SMTP 中继，另一台用作应用程序服务器。通过 telnet 手动将邮件发送到中继可以正常工作。使用 SwiftMail 时，它已损坏。

`$failure`返回标头，并且在变量中没有返回条目`send()`

的回应`getHeaders()->toString()`

```
Message-ID: <1351104631.508838778dc03@swift.generated>
Date: Wed, 24 Oct 2012 14:50:31 -0400
Subject: [YourSite] Feedback
From: noreply@localhost.com
To: sixeightzero@localhost.com
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable 
```

如果我回应`send()`，我得到`1`。

**引导.php**

```
$app->register(new Silex\Provider\SwiftmailerServiceProvider(), array(
    'swiftmailer.options' => array(
        'host' => 'ip.host.relay',
        'port' => 25,
        'encryption' => null,
        'auth_mode' => null
    ),
)); 
```

**应用程序.php**

```
 $message = \Swift_Message::newInstance( )
        ->setSubject('[YourSite] Feedback')
        ->setFrom(array('noreply@localhost.com'))
        ->setTo(array('sixeightzero@localhost.com'))
        ->setBody("Message!");

    $app['mailer']->send($message, $failures); 
```

当我在应用服务器上运行 TCP 转储并运行脚本时，没有建立 SMTP 连接，也没有抛出错误。

有人遇到过这种情况吗？由于我们的应用程序要求，我不想使用 sendmail 或邮件，而是使用 SMTP。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-10-25T02:48:21.310

这是因为默认情况下`SwiftmailerServiceProvider`使用 a `Swift_MemorySpool`，并且只刷新 on `kernel.terminate`。让我退后一步，解释一下每个部分。

*   `SwiftmailerServiceProvider`负责注册 Swiftmailer 服务和默认配置。默认情况下，transport( `swiftmailer.spooltransport`) is`Swift_SpoolTransport`和`swiftmailer.spool`is `Swift_MemorySpool`。

*   Swiftmailer 支持不同的邮件发送方式。这些被称为传输。假脱机传输充当队列。您可以将此队列存储在文件中或内存中。假脱机传输有一种`flushQueue`方法允许将排队的邮件刷新到一个真正的传输，它应该传递它们。

*   Silex 使用的 Symfony2 HttpKernel 在每个请求的生命周期中都会发出许多事件。它发出的最后一个是`kernel.terminate`事件。在发送 HTTP 响应正文后触发此事件。这允许您在呈现页面后执行繁重的任务，以便它不再显示为正在加载给用户。

*   `SwiftmailerServiceProvider`订阅`kernel.terminate`事件是为了在页面呈现后刷新内存假脱机。它将它刷新到`swiftmailer.transport`服务，这是一个`Swift_Transport_EsmtpTransport`通过 SMTP 进行实际发送的服务。

那么让我们来看看实际的问题。您处于 CLI 上下文中，因此不会触发这些 HttpKernel 事件。并且由于`kernel.terminate`没有触发事件，因此您的线轴没有被刷新。因此，您的电子邮件没有被发送。

有两个很好的解决方案：

*   A) 手动冲洗阀芯。只需执行提供程序在其侦听器中执行的操作即可。在 CLI 命令的末尾添加：

    ```
    if ($app['mailer.initialized']) {
        $app['swiftmailer.spooltransport']->getSpool()->flushQueue($app['swiftmailer.transport']);
    } 
    ```

*   B) 重新配置`mailer`服务以直接使用 ESMTP 传输而不通过假脱机：

    ```
    $app['mailer'] = $app->share(function ($app) {
        return new \Swift_Mailer($app['swiftmailer.transport']);
    }); 
    ```

任何一种解决方案都应该这样做。祝你好运！

# java - javax.persistence.TransactionRequiredException：没有事务正在进行的原因是什么

> ID：13055910
> 
> 赞同：1
> 
> 时间：2012-10-24T18:59:32.217
> 
> 标签：java, spring, hibernate, jpa

原因是什么

```
javax.persistence.TransactionRequiredException: no transaction is in progress  at org.hibernate.ejb.AbstractEntityManagerImpl.flush(AbstractEntityManagerImpl.java:971) 
```

即使在拥有之后

*   `<tx:annotation-driven/>`在应用程序上下文中

*   使用 @Transactional 注释的方法

在 Spring 3.1.1 + Hibernate 4.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T19:01:25.887

您必须用事务包围调用代码。在 Spring 中，您可以使用`@Transactional`注解或 AOP 事务划分。这是一个非常广泛的话题，从[*11.*](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/transaction.html)官方文档中的事务管理开始。

对于初学者来说，定义 JPA 事务管理器 bean（你可能已经有一个），添加`<tx:annotation-driven/>`和注释你的方法`@Transactional`。

# ios - iOS 6 Safari 图片上传 - 方向错误

> ID：13055915
> 
> 赞同：14
> 
> 时间：2012-10-24T19:00:09.557
> 
> 标签：ios, image, forms, upload, safari

我已经构建了一个网络应用程序，可让您从浏览器上传照片。在 iOS 6 中使用此功能时，即使上传时是纵向拍摄的，照片似乎也会以横向结束。我是否应该进行一些服务器端检查以正确获取图像，或者是否有某种 iOS 特定属性/JavaScript 可以应用于上传表单来解决此问题？

**更新**

根据要求，这是我为此编写的代码。先决条件是我正在使用 PHP 和 WideImage 库（这是一个更大的脚本的片段，所以如果你愿意，你可以使用不同的东西来处理图像）。

```
// Load Image Into Wide Image
$image=WideImage::load(IMG_UPLOAD_DIR.$result['name']);
$exif=exif_read_data(IMG_UPLOAD_DIR.$result['name']);
$orientation=$exif['Orientation'];
$result['orientation']=$orientation;

// Use Wide Image To Resize Images
$full=$image->resize(IMG_FULL_H,IMG_FULL_H);
$thumb=$image->resize(IMG_THUMB_W,IMG_THUMB_H);

switch($orientation){
    case 2:
        $full->mirror()->saveToFile(IMG_UPLOAD_DIR.$result['name'], 90);
        $thumb->mirror()->saveToFile(IMG_UPLOAD_DIR.$thumbName, 90);
        break;

    case 3:
        $full->rotate(-180)->saveToFile(IMG_UPLOAD_DIR.$result['name'], 90);
        $thumb->rotate(-180)->saveToFile(IMG_UPLOAD_DIR.$thumbName, 90);
        break;

    case 4:
        $full->rotate(180)->mirror()->saveToFile(IMG_UPLOAD_DIR.$result['name'], 90);
        $thumb->rotate(180)->mirror()->saveToFile(IMG_UPLOAD_DIR.$thumbName, 90);
        break;

    case 5:
        $full->rotate(90)->mirror()->saveToFile(IMG_UPLOAD_DIR.$result['name'], 90);
        $thumb->rotate(90)->mirror()->saveToFile(IMG_UPLOAD_DIR.$thumbName, 90);
        break;

    case 6:
        $full->rotate(90)->saveToFile(IMG_UPLOAD_DIR.$result['name'], 90);
        $thumb->rotate(90)->saveToFile(IMG_UPLOAD_DIR.$thumbName, 90);
        break;

    case 7:
        $full->rotate(-90)->saveToFile(IMG_UPLOAD_DIR.$result['name'], 90);
        $thumb->rotate(-90)->saveToFile(IMG_UPLOAD_DIR.$thumbName, 90);
        break;

    case 8:
        $full->rotate(-90)->saveToFile(IMG_UPLOAD_DIR.$result['name'], 90);
        $thumb->rotate(-90)->saveToFile(IMG_UPLOAD_DIR.$thumbName, 90);
        break;

    default:
        $full->saveToFile(IMG_UPLOAD_DIR.$result['name'], 90);
        $thumb->saveToFile(IMG_UPLOAD_DIR.$thumbName, 90);
        break;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T20:27:11.837

检查图像`exif`元数据，iPhone 相机拍摄“旋转”图像。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T04:48:23.000

你可以试试这个 jQuery 插件（在这个线程的底部）

[IOS6 和 Safari 照片上传 - File API + Canvas + jQuery Ajax 异步上传和调整文件大小](https://stackoverflow.com/questions/12539862/ios6-and-safari-photo-uploading-file-api-canvas-jquery-ajax-uploading-and)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T14:46:41.830

作为 A-Live 答案的扩展：

如果您使用的是 ruby​​，RMagick 有一个`auto_orient`方法。从文档：

> 根据图像的 EXIF 方向标签旋转或翻转图像。请注意，只有某些型号的现代数码相机可以用方向标记图像。如果图像没有方向标签，或者图像已经正确定向，则 auto_orient 返回图像的精确副本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-23T18:37:29.207

值得注意的是，通过[Cloudinary](http://cloudinary.com/documentation/image_transformations)运行您的图像可以解决这个问题。

在通过该服务路由之前，我用 iPhone 拍摄的照片*只会在桌面上*显示为旋转（似乎没有理由） 。

一旦在 Cloudinary url 后面，*使用* *任何*图像转换功能，图像都会以正确的方向返回。

我正在使用他们的付费服务，但似乎他们有免费套餐。

# ruby-on-rails-3 - 资产：预编译 - 权限被拒绝 - 仅在一台计算机上

> ID：13055922
> 
> 赞同：3
> 
> 时间：2012-10-24T19:00:24.247
> 
> 标签：ruby-on-rails-3, tinymce, asset-pipeline, precompile

我的 Dropbox 文件夹中有一个 rails app 项目文件夹。

我在两台电脑上工作——家用电脑和一台笔记本电脑（都是 win 7）

如果我`bundle exec rake assets:precompile`在电脑上做它工作正常，我看到这条线

```
C:/Ruby193/bin/ruby.exe C:/Ruby193/bin/rake assets:precompile:all RAILS_ENV=production RAILS_GROUPS=assets
mkdir -p H:/My Dropbox/project/public/assets
cp -r C:/Ruby193/lib/ruby/gems/1.9.1/gems/tinymce-rails-3.5.7.1/vendor/assets/javascripts/tinymce H:/My Dropbox/project/public/assets 
```

但是在笔记本电脑上，我对其中一个 tinymce 文件的权限被拒绝，并且预编译失败..

app文件夹对每个人都有权限..任何想法为什么会发生这种情况？

更新：

似乎它随机停止在文件上..不一定是tinymce。我已将所有 ruby​​ 文件和项目文件设置为对每个人都具有权限（win 7），并将所有只读设置为不是。

这很令人沮丧

--trace 输出的示例。请注意，每次我运行 assets:precompile 它都会在不同的文件处停止。这次它停在我的一个图标上

```
H:\My Dropbox\project>bundle exec rake assets:precompile --trace
** Invoke assets:precompile (first_time)
** Execute assets:precompile
C:/Ruby193/bin/ruby.exe C:/Ruby193/bin/rake assets:precompile:all RAILS_ENV=production RAILS_GROUPS=assets --trace
** Invoke assets:precompile:all (first_time)
** Execute assets:precompile:all
** Invoke assets:precompile:primary (first_time)
** Invoke assets:environment (first_time)
** Execute assets:environment
** Invoke tmp:cache:clear (first_time)
** Execute tmp:cache:clear
** Execute assets:precompile:primary
rake aborted!
Permission denied - H:/My Dropbox/project/public/assets/Icons/ArrowDown-335eb652931bdc13061ad1745a25556f.jpg
C:/Ruby193/lib/ruby/gems/1.9.1/gems/sprockets-2.1.3/lib/sprockets/static_asset.rb:47:in `utime'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/sprockets-2.1.3/lib/sprockets/static_asset.rb:47:in `write_to'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/sprockets/static_compiler.rb:41:in `block in write_asset'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/sprockets/static_compiler.rb:38:in `tap'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/sprockets/static_compiler.rb:38:in `write_asset'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/sprockets/static_compiler.rb:24:in `block in compile'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:212:in `block in each_logical_path'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:200:in `block (2 levels) in each_file'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:190:in `each'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:190:in `each_entry'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:198:in `block in each_file'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:197:in `each'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:197:in `each_file'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:210:in `each_logical_path'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/sprockets/static_compiler.rb:18:in `compile'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/sprockets/assets.rake:56:in `internal_precompile'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/sprockets/assets.rake:70:in `block (3 levels) in <top (required)>'
C:/Ruby193/lib/ruby/1.9.1/rake/task.rb:205:in `call'
C:/Ruby193/lib/ruby/1.9.1/rake/task.rb:205:in `block in execute'
C:/Ruby193/lib/ruby/1.9.1/rake/task.rb:200:in `each'
C:/Ruby193/lib/ruby/1.9.1/rake/task.rb:200:in `execute'
C:/Ruby193/lib/ruby/1.9.1/rake/task.rb:158:in `block in invoke_with_call_chain'
C:/Ruby193/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
C:/Ruby193/lib/ruby/1.9.1/rake/task.rb:151:in `invoke_with_call_chain'
C:/Ruby193/lib/ruby/1.9.1/rake/task.rb:144:in `invoke'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/sprockets/assets.rake:60:in `block (3 levels) in <top (required)>'
C:/Ruby193/lib/ruby/1.9.1/rake/task.rb:205:in `call'
C:/Ruby193/lib/ruby/1.9.1/rake/task.rb:205:in `block in execute'
C:/Ruby193/lib/ruby/1.9.1/rake/task.rb:200:in `each'
C:/Ruby193/lib/ruby/1.9.1/rake/task.rb:200:in `execute'
C:/Ruby193/lib/ruby/1.9.1/rake/task.rb:158:in `block in invoke_with_call_chain'
C:/Ruby193/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
C:/Ruby193/lib/ruby/1.9.1/rake/task.rb:151:in `invoke_with_call_chain'
C:/Ruby193/lib/ruby/1.9.1/rake/task.rb:144:in `invoke'
C:/Ruby193/lib/ruby/1.9.1/rake/application.rb:116:in `invoke_task'
C:/Ruby193/lib/ruby/1.9.1/rake/application.rb:94:in `block (2 levels) in top_level'
C:/Ruby193/lib/ruby/1.9.1/rake/application.rb:94:in `each'
C:/Ruby193/lib/ruby/1.9.1/rake/application.rb:94:in `block in top_level'
C:/Ruby193/lib/ruby/1.9.1/rake/application.rb:133:in `standard_exception_handling'
C:/Ruby193/lib/ruby/1.9.1/rake/application.rb:88:in `top_level'
C:/Ruby193/lib/ruby/1.9.1/rake/application.rb:66:in `block in run'
C:/Ruby193/lib/ruby/1.9.1/rake/application.rb:133:in `standard_exception_handling'
C:/Ruby193/lib/ruby/1.9.1/rake/application.rb:63:in `run'
C:/Ruby193/bin/rake:32:in `<main>'
Tasks: TOP => assets:precompile:primary
rake aborted!
Command failed with status (1): [C:/Ruby193/bin/ruby.exe C:/Ruby193/bin/rak...]
C:/Ruby193/lib/ruby/1.9.1/rake/file_utils.rb:53:in `block in create_shell_runner'
C:/Ruby193/lib/ruby/1.9.1/rake/file_utils.rb:45:in `call'
C:/Ruby193/lib/ruby/1.9.1/rake/file_utils.rb:45:in `sh'
C:/Ruby193/lib/ruby/1.9.1/rake/file_utils_ext.rb:39:in `sh'
C:/Ruby193/lib/ruby/1.9.1/rake/file_utils.rb:80:in `ruby'
C:/Ruby193/lib/ruby/1.9.1/rake/file_utils_ext.rb:39:in `ruby'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/sprockets/assets.rake:12:in `ruby_rake_task'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/sprockets/assets.rake:21:in `invoke_or_reboot_rake_task'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/sprockets/assets.rake:29:in `block (2 levels) in <top (required)>'
C:/Ruby193/lib/ruby/1.9.1/rake/task.rb:205:in `call'
C:/Ruby193/lib/ruby/1.9.1/rake/task.rb:205:in `block in execute'
C:/Ruby193/lib/ruby/1.9.1/rake/task.rb:200:in `each'
C:/Ruby193/lib/ruby/1.9.1/rake/task.rb:200:in `execute'
C:/Ruby193/lib/ruby/1.9.1/rake/task.rb:158:in `block in invoke_with_call_chain'
C:/Ruby193/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
C:/Ruby193/lib/ruby/1.9.1/rake/task.rb:151:in `invoke_with_call_chain'
C:/Ruby193/lib/ruby/1.9.1/rake/task.rb:144:in `invoke'
C:/Ruby193/lib/ruby/1.9.1/rake/application.rb:116:in `invoke_task'
C:/Ruby193/lib/ruby/1.9.1/rake/application.rb:94:in `block (2 levels) in top_level'
C:/Ruby193/lib/ruby/1.9.1/rake/application.rb:94:in `each'
C:/Ruby193/lib/ruby/1.9.1/rake/application.rb:94:in `block in top_level'
C:/Ruby193/lib/ruby/1.9.1/rake/application.rb:133:in `standard_exception_handling'
C:/Ruby193/lib/ruby/1.9.1/rake/application.rb:88:in `top_level'
C:/Ruby193/lib/ruby/1.9.1/rake/application.rb:66:in `block in run'
C:/Ruby193/lib/ruby/1.9.1/rake/application.rb:133:in `standard_exception_handling'
C:/Ruby193/lib/ruby/1.9.1/rake/application.rb:63:in `run'
C:/Ruby193/bin/rake:32:in `<main>'
Tasks: TOP => assets:precompile 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T23:23:24.953

从消除可能的问题开始。

首先，从等式中删除 DropBox。签出并在本地硬盘上编译。

其次，确保 TinyMCE 在您的 Gemfile 中并与 bundler 一起安装。您的项目不应该从全局 gem 中提取 gem，而是从项目特定的捆绑 gem 中提取。

如果失败，您需要遵循 Digital Cake 的建议并向我们提供 --trace 输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T20:43:36.363

这是一个猜测，但我认为该权限是因为 tmp 折叠用于临时存储文件，因为它们是预编译的。a --trace 应该为您提供更好的错误日志，这将是找出错误发生位置的关键。

# php - CakePHP 包含的行为未按预期工作

> ID：13055926
> 
> 赞同：0
> 
> 时间：2012-10-24T19:00:31.770
> 
> 标签：php, cakephp, containable

我正在尝试从 2 级深的模型中检索特定字段。我正在使用容器行为，但未正确检索底层。

继承人的代码：

```
$this->Review->Behaviors->attach('Containable');
    $latestReviews = $this->Review->find('all', array(
        'contain' => array(
            'Business' => array(
                'fields' => array('Business.name'),
                'BusinessType' => array(
                    'fields' => array('BusinessType.url')
                )
            ),
        ),
        'fields' => array('overall'),
    )); 
```

它返回的数组：

```
array(
(int) 0 => array(
    'Review' => array(
        'overall' => '2'
    ),
    'Business' => array(
        'name' => 'Business Name',
        'business_type_id' => '1',
        'id' => '2012'
    )
)) 
```

但是，与其给我业务类型 ID，我希望它返回 BusinessType url 字段。

谁能看到我哪里出错了？我确定这与 CakePHP 文档是一致的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T19:54:42.747

引用手册：

> 当使用 'fields' 和 'contain' 选项时 - 小心包含您的查询直接或间接需要的所有外键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T19:50:02.240

我认为您应该删除字段列表中的“字段”选项和模型名称：

```
$this->Review->Behaviors->attach('Containable');
$latestReviews = $this->Review->find('all', array(
    'contain' => array(
        'Business' => array(
            'fields'       => array('name'),
            'BusinessType' => array(
                'fields' => array('url')
            )
        )
    ))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-16T23:49:03.437

使用 3.x 版本：

> 如果您使用 select() 限制了要加载的字段，但还想从包含的关联中加载字段，则可以将关联对象传递给 select()：

```
// Select id & title from articles, but all fields off of Users.
$query = $articles->find()
    ->select(['id', 'title'])
    ->select($articles->Users)
    ->contain(['Users']); 
```

是问题中的`$articles`等价物`$this->Review`

# c# - 将实体的构造函数设为私有

> ID：13055929
> 
> 赞同：1
> 
> 时间：2012-10-24T19:00:47.023
> 
> 标签：c#, .net, wcf

我想阻止我的客户通过构造函数实例化实体。由于创建这些实体（初始化状态、集合等）涉及到相当多的工作，而 WCF 不能以这种方式工作，我想强制它们在服务器端调用一个方法来创建实体并通过网络发送它，例如

客户端：

```
var client = EntityServiceClient("myEndpoint");
var newEntity = client.CreateEntity(); 
```

服务器端：

```
public Entity CreateEntity()
{
    return new Entity();
} 
```

我有一些工作，但我想在使用实体的默认构造函数时以某种方式抛出异常，或者将其设为私有。所以以下不应该工作

客户端：

```
var client = EntityServiceClient("myEndpoint");
var newEntity = new Entity(); 
```

有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T20:05:12.540

这并不是 WCF 的真正设计方式，就客户端而言，序列化对象仅包含数据而不是行为，因此您应该发回 DTO 而不是实体。

但是，如果您坚持使用这种方法，这很可能在未来给您带来麻烦，您可以将您的对象和服务接口移动到一个单独的类库中并分发它，而不是让客户端在添加服务时从元数据生成代码参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T19:31:20.500

客户端的类（通常）是生成的代理。与服务器端的类不同，只是一个模型。

在任何情况下，客户端的反序列化器都需要能够重新创建实体。DataContractSerializer 只是忽略您的私有构造函数并创建自己的构造函数。

当您使用具有共享类型的库时，情况会略有变化。那么你能做的最好的事情就是制作 ctor`internal`并将工厂也添加到库中。

总而言之，我认为这不是一个好主意。记住，WCF 的目标是交换*数据*，而不是*对象*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T19:31:46.807

你的问题对我来说真的很不清楚 - 无论如何我会尽力帮助你并给你一些提示。在你的情况下，我认为一种工厂是一种很好的方法。

在服务器端程序集中定义一个`EntityServiceClient`和`Entity`。请注意，访问修饰符将阻止此处`Entity`通过构造函数实例化 a：

```
public class EntityServiceClient
{

    public EntityServiceClient(string endpoint)
    {
      // put here initializing code for your service client.
    }

    public Entity CreateEntity()
    {
        return new Entity(); // May here put your complexe code to initializing a new valid entity
    }
}

public class Entity
{
    internal Entity()
    {

    }
} 
```

# sql-server-2008 - SQL Server CTE 实现

> ID：13055930
> 
> 赞同：1
> 
> 时间：2012-10-24T19:00:49.740
> 
> 标签：sql-server-2008, common-table-expression

我正在根据我的业务逻辑编写如下脚本，请任何人建议我，如何实现 CTE（公用表表达式）

```
IF OBJECT_ID('tempdb..#tmpFirstTable') IS NOT NULL
DROP TABLE #tmpFirstTable

;WITH tempCTE AS ( select * from Table1  )      

IF OBJECT_ID('tempdb..#tmpTable') IS NOT NULL
DROP TABLE #tmpTable
SELECT  * 
into #tmpTable
from table2  

Select * from tempCTE T1,#tmpTable T2 , #tmpFirstTable T3 where T1.ID = T2.ID and T2.ID = T3.ID 
```

上面的代码格式应该是这样的。

我得到 的**错误是。**

> *关键字“IF”附近的语法不正确。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T19:03:07.720

您`select`必须立即遵循您的 CTE 声明：

```
IF OBJECT_ID('tempdb..#tmpTable') IS NOT NULL
DROP TABLE #tmpTable
SELECT  * 
into #tmpTable
from table2  

;WITH tempCTE AS ( select * from Table1  )      
Select * from tempCTE T1,#tmpTable T2 where T1.ID = T2.ID 
```

从[文档](http://msdn.microsoft.com/en-us/library/ms175972.aspx)中：

> CTE 后面必须跟一个引用部分或全部 CTE 列的 SELECT、INSERT、UPDATE 或 DELETE 语句。

此外，使用显式连接语法变得越来越普遍：

```
Select * from tempCTE T1 join #tmpTable T2 on T1.ID = T2.ID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T19:03:32.533

```
IF OBJECT_ID('tempdb..#tmpTable') IS NOT NULL
DROP TABLE #tmpTable
SELECT  * 
into #tmpTable
from table2  

;WITH tempCTE AS ( select * from Table1  )      
Select * from tempCTE T1,#tmpTable T2 where T1.ID = T2.ID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T19:49:07.833

CTE 类似于视图。但是，它的范围仅限于单个 SELECT、INSERT、UPDATE、DELETE 或 MERGE 语句。如果你想在两个单独的语句中使用它，你必须直接在每个语句前面重复声明。

或者，您可以将代码放入真实视图并以这种方式重用。

# eclipse - 将 subclipse 与现有源项目一起使用

> ID：13055931
> 
> 赞同：2
> 
> 时间：2012-10-24T19:00:49.940
> 
> 标签：eclipse, svn, subclipse

我的 Eclipse (3.7.2) java 项目使用现有源，该源位于我的驱动器上与我的项目不同的目录中。IE：我的 Eclipse 项目文件夹是 c:\eclipseProjects\myProject 该项目的源代码位于 c:\java_source

我的源目录是 Subversion 的“沙盒”目录，即它们已经有 .svn 文件夹。我已经使用不同的 SVN 客户端检查了它们。

我安装了 Subclipse，并将其连接到我的存储库，但我似乎无法将它“链接”到我的本地工作副本并让它看到我项目中的源文件对应于 SVN 存储库中的文件。

我不想“共享项目”并将我的项目导入 SVN 存储库。我不需要我的项目在 SVN 控制下，只需要我的源文件夹。而且由于我的项目文件夹不包含 .svn 文件夹，eclipse/subclipse 似乎无法解决这个问题。

注意：SVN 客户端版本相同（均为 1.7）。我尝试过重命名我的项目并将其重新命名、重新启动 Eclipse 等技巧。

有人有什么建议吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T20:22:13.357

不支持这种设置。Eclipse 中项目的根必须是一个工作副本，之后的所有内容都可以通过调用 SVN API 来发现。查看 Eclipse 项目根目录的 SVN 客户端将不知道硬盘驱动器上其他位置的这些其他文件夹。

请注意，您不必将 Eclipse .project 和 .classpath 文件存储在版本控制中，但文件夹本身必须链接到存储库。

# rest - AWS EC2 HTTP Post 内容大小限制

> ID：13055932
> 
> 赞同：1
> 
> 时间：2012-10-24T19:00:50.097
> 
> 标签：rest, post, amazon-ec2, amazon-web-services, restlet

我正在通过 REST 与我的 EC2 实例上的程序进行通信，并且一切运行良好，直到我通过 POST 请求发送的 JSON 的大小达到 ~20KB。当我在本地机器网络服务器上运行代码时，我没有这些问题，但是当我将代码上传到 EC2 时，数据包永远不会到达服务器。

亚马逊是否会阻止超过 20KB 的数据包以防止 DoS 攻击？如果是这样，我该如何删除此功能。我需要能够将至少 500KB 的 JSON 发布到我的实例。

我正在运行[Restlet 2.1](http://www.restlet.org/)并使用[Google GSON 2.2.2](http://code.google.com/p/google-gson/)，因此要运行下面的代码，您需要前面链接中的 org.restlet.jar 和 gson.jar。

**此代码在 EC2 实例上启动一个 restlet 服务器：**

```
import org.restlet.Application;
import org.restlet.Component;
import org.restlet.Restlet;
import org.restlet.data.Protocol;
import org.restlet.routing.Router;
import org.restlet.service.LogService;

public class StringApplication extends Application {
    public static final int PORT = 8005;
    public static void main(String[] args) throws Exception {

        Component component = new Component();
        component.setLogService(new LogService(false));

        component.getDefaultHost().attach(new StringApplication());

        component.getServers().add(Protocol.HTTP, PORT);
        component.start();
    }

    @Override
    public synchronized Restlet createInboundRoot() {
        Router router = new Router(getContext());
        router.attachDefault(StringResource.class);
        return router;
    }
} 
```

**这是我的restlet资源的代码**

```
import java.lang.reflect.Type;
import java.util.ArrayList;

import org.restlet.resource.Get;
import org.restlet.resource.Post;
import org.restlet.resource.ServerResource;

import com.google.gson.Gson;
import com.google.gson.reflect.TypeToken;

public class StringResource extends ServerResource {
    private static ArrayList<String> strings = new ArrayList<String>();

    @Get
    public String getStrings() {
    Gson gson = new Gson();
    String output = gson.toJson(strings);
    return output;
    }

    @Post
    public void postStrings(String input) {
        Gson gson = new Gson();
        Type collectionType = new TypeToken<ArrayList<String>>() {
        }.getType();
        strings = gson.fromJson(input, collectionType);
    }
} 
```

**最后，这是我为测试不同数据包大小而创建的代码。使用 count = 100 (10KB) 它可以工作，使用 count = 1000 (100KB) 它会超时。**

```
import java.io.IOException;
import java.lang.reflect.Type;
import java.util.ArrayList;

import org.restlet.Client;
import org.restlet.Request;
import org.restlet.Response;
import org.restlet.data.MediaType;
import org.restlet.data.Method;
import org.restlet.data.Protocol;
import org.restlet.representation.Representation;

import com.google.gson.Gson;
import com.google.gson.reflect.TypeToken;

public class StringDemo {

    private static final int COUNT = 1000;
    private static final String STRING = "THIS IS MY VERY LONG STRING AND IT IS FUN TO READ";
    private static final String SERVER_ADDRESS = "http://localhost:" + StringApplication.PORT;

    public static void main(String[] args) throws IOException {
        Gson gson = new Gson();
        Client client = new Client(Protocol.HTTP);
        Request request = new Request();
        request.setResourceRef(SERVER_ADDRESS);
        request.setMethod(Method.POST);
        ArrayList<String> strings = generateStrings();
        String json = gson.toJson(strings);
        request.setEntity(json, MediaType.APPLICATION_JSON);

        System.out.println("JSON bytesize " + json.length() * Character.SIZE / Byte.SIZE);
        Response handle = client.handle(request);
        Representation entity = handle.getEntity();

        if (handle.getStatus().isSuccess()) {
            System.out.println("Successfully uploaded strings");
        } else {
            System.out.println(entity != null ? entity.getText() : "no response from server");
        }

        request = new Request();
        request.setResourceRef(SERVER_ADDRESS);
        request.setMethod(Method.GET);

        handle = client.handle(request);
        entity = handle.getEntity();

        if (handle.getStatus().isSuccess()) {
            Type collectionType = new TypeToken<ArrayList<String>>() {
            }.getType();
            strings = gson.fromJson(entity.getReader(), collectionType);
            System.out.println("Received " + strings.size() + " strings");
        } else {

            System.out.println(entity != null ? entity.getText() : "no response from server");
        }

    }

    private static ArrayList<String> generateStrings() {
        ArrayList<String> strings = new ArrayList<String>(COUNT);
        for (int i = 0; i < COUNT; i++) {
            strings.add(STRING);
        }
        return strings;
    }

} 
```

**您必须将 SERVER_ADDRESS 更改为您在其上运行代码的 EC2 实例**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:14:06.250

当您使用较大的实例之一时，问题就会消失。这些问题似乎与亚马逊提供的免费层机器的默认配置有关。

# arduino - 倒计时延迟

> ID：13055933
> 
> 赞同：2
> 
> 时间：2012-10-24T19:00:50.953
> 
> 标签：arduino

我目前正在为我的 Arduino 开发老虎机，而我想要发生的一件事是，当用户“拉”控制杆时，可以听到叮叮声，随着时间的流逝，声音会变慢。

这是我到目前为止所拥有的，但我无法弄清楚如何通过倒计时来制作延迟变量。

```
void ringading(){
    for (int i=10; i>10; i--)
    {
        for (int i=0; i<500; i++)
        {
            digitalWrite(BUZZER_PIN, HIGH);
            delayMicroseconds(1915);
            digitalWrite(BUZZER_PIN, LOW);
        }
        delay(1000);
    }
} 
```

这可能不是最好的方法，但我知道它现在会发出 10 次嗡嗡声，每次之间都有一秒钟的延迟。所以我基本上只需要增加延迟。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T19:05:15.923

不是延迟恒定的毫秒数 (1000)，而是延迟若干毫秒，这是 i 的函数，例如`delay(1000*(10-i))`因为 i 正在减少。

此外，更大的循环不应该运行 - 你确定你不是这个意思`i>0`吗？

此外，您应该为两个循环使用两个不同的变量名称：

```
void ringading(){
  for (int i=10; i>0; i--)
    {
      for (int j=0; j<500; j++)
      {
        digitalWrite(BUZZER_PIN, HIGH);
        delayMicroseconds(1915);
        digitalWrite(BUZZER_PIN, LOW);
      }
      delay(1000*(10-i));
  }
} 
```

# javascript - 为什么 JQuery 显示/隐藏适用于按钮而不适用于 div？

> ID：13055944
> 
> 赞同：0
> 
> 时间：2012-10-24T19:01:35.473
> 
> 标签：javascript, jquery, css

我想根据条件切换按钮和 div 的显示或隐藏。目前，JQuery hide 适用于 button() 但 show() 不适用于 div。换句话说，在下面的javascript中，如果满足条件，则隐藏按钮但不显示div。

html:

```
<button type="button" id="my-button" onclick="...do something">Go</button>
<div id="my-text">Please send an email to help@mycompany.com</div> 
```

CSS：

```
#my-text{
    display: none;
} 
```

javascript:

```
<script type="text/javascript">
    (function() {
        $(document).ready(function() {
            var someConditionIsMet = //...compute something
            if (someConditionIsMet) {
                $('#my-button').hide();
                $('#my-text').show();
            }
        });
    })();
</script> 
```

但是，如果我将其更改为

```
 if (someConditionIsMet) {
                $('#my-button').hide();
                $('#my-text').attr("style", "display:block")
            } 
```

然后它可以正常工作。我认为 show 基本上是将显示样式更改为阻止，所以我不确定为什么我必须这样拼写出来。任何想法为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T19:10:34.973

你可以稍微简化你的代码

```
$('#my-button, #my-text').toggle(); 
```

这将切换元素的可见性，但这可能无法解决您的问题，这很可能与您最初隐藏 div 的方式有关。尝试将其更改为 .hide() 而不是手动设置 css。有几种方法可以隐藏元素。show 只恢复其中一种（与 hide() 相同）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T19:13:21.607

`show`在这个[小提琴](http://jsfiddle.net/tWQwQ/3/)中为我工作。你确定你的条件得到满足吗？尝试在`alert('conditions met');`里面扔一个`if`看它是否被触发。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T19:17:31.763

考虑分配`aria-hidden`属性，然后使用 jQuery 隐藏您指定为对屏幕阅读器隐藏的任何内容。

代码：

```
<button type="button" id="my-button" onclick="...do something" aria-hidden="true">Go</button> 
```

JavaScript：

```
$('[aria-hidden="true"]').hide(); //hide anything that's marked as hidden to screen-readers 
```

然后使用 .hide() 和 .show()，以及`aria-hidden`属性的切换。

请参阅[http://jsfiddle.net/jhfrench/4kNPF/ 上的工作示例](http://jsfiddle.net/jhfrench/4kNPF/)

# python - 在 python 中迭代对象时使用标志的替代方法

> ID：13055945
> 
> 赞同：0
> 
> 时间：2012-10-24T19:01:36.007
> 
> 标签：python, excel, loops, flags, xlrd

我有一个脚本，它使用 xlrd 比较两个 .xls 工作表之间的值。默认情况下，它可以让我查找相似之处，并将它们写入 txt 文件。如果我传入一个参数，我可以查找每个 .xls 独有的设备，并将其写入 txt 文件。现在，我遍历每个 .xls 中的行，并在发现两个文件之间存在相似性时将标志标记为 True。当标志标记为 False 时，它​​只会从第一张表写入主机。这是带有标志的代码：

```
else:
    for row1 in range(sheet1.nrows):
        inboth = False
        for row2 in range(sheet2.nrows):
            if sheet2.row_values(row2)[0].split(".")[0] == sheet1.row_values(row1)[0].split(".")[0]:
                inboth = True
        if not inboth:
            outfile.write(sheet1.row_values(row1)[0].split(".")[0] + ",File1\n")
    for row2 in range(sheet2.nrows):
        inboth = False
        for row1 in range(sheet1.nrows):
            if sheet1.row_values(row1)[0].split(".")[0] == sheet2.row_values(row2)[0].split(".")[0]:
                inboth = True
        if not inboth:
            outfile.write(sheet2.row_values(row2)[0].split(".")[0] + ",File2\n") 
```

有没有更有效的方法可以在不使用“inboth”标志的情况下做到这一点？有没有一种解决方案，我不需要两次遍历两张纸？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T19:25:25.510

你想要的是 Python`set`数据类型。[http://docs.python.org/library/sets.html](http://docs.python.org/library/sets.html)遍历第一个文件并将找到的所有设备放入 set 中，`s`然后将第二个文件中的所有设备放入 set 中`t`。然后做：

`r = s.symmetric_difference(t)`

`r`将在一个文件中包含设备列表，但不是两个文件。

# jquery - JQuery 中的 XML 解析 - 如何让 tagName 成为原始 XML 的原始案例？

> ID：13055947
> 
> 赞同：0
> 
> 时间：2012-10-24T19:01:41.250
> 
> 标签：jquery

> **可能重复：**
> [jQuery 将 XML 标记转换为大写](https://stackoverflow.com/questions/4351527/jquery-converting-xml-tags-to-uppercase)

我正在解析一个 xml 文件，该文件用作 Android 活动的布局。

（样本）

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout android:id="@+id/dashboard_scores" /> 
```

这是一个用于解析此 XML 并查找所有具有 android:id 属性集的元素的示例脚本。

```
xmlDoc = $.parseXML( xml );
$xml = $( xmlDoc );
$(xml).find("[android\\:id]").each(function() {
    console.log(this.tagName +" with id "+$(this).attr("android:id"));
} 
```

如果我打印出 .tagName 的值，它总是以全部大写形式打印出来。如何使用原始 XML 字符串的原始大小写打印出来？（在这种情况下是“LinearLayout”）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T19:13:13.667

看起来像一个 JQuery 限制。在这里查看票：http: [//bugs.jquery.com/ticket/1991](http://bugs.jquery.com/ticket/1991)

# java - java中线程池的编号

> ID：13055951
> 
> 赞同：2
> 
> 时间：2012-10-24T19:02:04.277
> 
> 标签：java, multithreading

您好，我在一个函数中使用带有两个线程的线程池。

该功能被多个客户端同步调用。

在我正在使用的那个功能中

```
ExecutorService executor = Executors.newFixedThreadPool(2); 
```

完成任务后，我将关闭执行程序。

```
executor.shutdown(); 
```

但是在日志中我有这样的行

```
[pool-120069-thread-1] 
```

这是否意味着 120069 个池还活着，或者它只是对池进行编号的方式。即使在关闭它之后它继续编号？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T19:04:43.813

> 这是否意味着 120069 个池还活着，或者它只是对池进行编号的方式。

别担心，是后者。系统中创建的每个新池都会获得一个新的序列号，这意味着您已经创建了`120069`池，但可能之前的大多数`120068`池已经关闭。

另一方面，为每个方法调用创建一个线程池并不是一个好习惯，请考虑只使用一个池并在多个并发方法调用中重用它。此外，您可能不需要同步。但这取决于您的实际用例。

最后，您可能想`awaitTermination()`在关机后调用。`shutdown()`只是“*关上了*”池的大门，但正在运行的任务会继续运行。

# intersystems-cache - 如何在 ObjectScript 中将变量设置为 NULL？

> ID：13055952
> 
> 赞同：6
> 
> 时间：2012-10-24T19:02:22.393
> 
> 标签：intersystems-cache, objectscript

在 c# 中，我可以这样做：

```
object foo = null; 
```

如何在对象脚本中执行此操作？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-24T19:38:55.717

对于简单的变量，没有办法将变量设置为具有未定义的值。由于缓存对象脚本具有松散的类型，因此无需将对象引用设置为 NULL，只需将引用的值更改为其他任何值，最常见的是空字符串，垃圾收集器将清理对象没有有效的参考。

出于所有实际目的，将该变量设置为空字符串“”就足够了。如果没有，你能扩展你的问题吗？

缓存对象脚本中的对象属性永远不会解析为未定义的值。如果该值未定义（因为它具有 NULL 的 SQL 值或从未分配过值），则该属性将解析为空字符串的值。如果您希望属性包含 null 的 SQL 表示，您可以在对应于该对象的行上执行 SQL 插入或更新，并将字段设置为 NULL。如果将对象的属性设置为空字符串并保存，则该对象的 SQL 行将不会有 NULL，但会有空字符串。

基本上，对象视图中并没有真正的 NULL 抽象表示。SQL NULL 的序列化值在 SQL 视图中解析为 NULL，在 Objects 视图中解析为空字符串。

顺便提一下，SQL视图中NULL的序列化值为空字符串，空字符串的序列化值为ASCII 0。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-25T04:14:18.993

要从内存中擦除变量并垃圾收集引用的对象，您可以使用`kill`命令

```
Method Test() {
  set foo=##class(Obj).%New()
  // created object of class Obj. created variable foo pointing to this object.
  // do something
  set foo=""
  // Object of class Obj is now marked for garbage collection 
  // but variable foo still exist
  // do something else
  kill foo
  // foo is now undefined
  // do something else
} 
```

但是，如果您使用 ProcedureBlock 方法（在新的 Cache 版本中是默认设置）或`new`命令，则不需要这样做。在这种情况下，所有对象引用和变量将在您的方法完成后自动销毁

```
Method Test() {
  set foo=##class(Obj).%New()
  // created object of class Obj. created variable foo pointing to this object.
  // do something
}
// after method finishes, foo is undefined and object of class Obj is destroyed 
```

如果你只想声明变量是某种类型，你可以使用#dim 指令。它什么也不做，只是帮助 Studio 确定变量类。有时，如果 Studio 无法确定类本身并且您想使用它的内联帮助程序，它会很有用。

```
Method Test() {
  #dim foo as Obj
  do ##class(Obj).GenerateSomething(.foo)
  write foo.Property 
  // Studio will provide helper bar for foo properties and methods now
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-21T19:51:20.213

选择的解决方案肯定是不准确的。如果您想按照示例中的说明将变量设置为 NULL，您可以按照 SSH 的说明进行操作。你会：

```
K VARIABLE 
```

或者

```
KILL VARIABLE 
```

# java - 订阅多播组的所有主机列表

> ID：13055954
> 
> 赞同：0
> 
> 时间：2012-10-24T19:02:32.290
> 
> 标签：java, networking, udp, multicast

我正在研究 UDP 多播以在 LAN 上发现主机。

我让它与不同计算机上的主机一起工作。当一个对等点第一次运行时，他们订阅该组，发送一个简单的通知消息，其中包含他们的用户 ID 和在线，然后他们收听组中其他对等点以相同的方式宣布他们的到来。

而一个对等点可以识别其他“在”他们到达之后订阅该组的对等点。他们看不到谁在“之前”订阅了该组。

我的问题是，主机是否可以获得订阅同一组的所有其他主机的列表？

我的目标是让订阅该组的每个对等点（主机）都有一个当前订阅该组的所有其他对等点（主机）的用户 ID 的下拉列表。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T19:05:49.467

不，组成员身份没有中央权限。你有两个选择：

1.  设置一个主/从协议，允许对等方选择一个主设备，新的对等方可以向其发送组成员资格查询（a la NetBIOS）
2.  让每个对等点定期发送自己的成员通知消息，以便新成员最终可以累积对等点列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T20:59:33.050

原则上你不能知道。你只能知道第一个路由器。您的主机从同一子网上的主机接收或看到 IGMP 成员组播。如果路由器之外还有成员，则路由器本身就是成员。这就是所有的信息。

# c# - True 或 False 方法不起作用

> ID：13055956
> 
> 赞同：0
> 
> 时间：2012-10-24T19:02:40.127
> 
> 标签：c#, methods

我正在尝试为测试分数设置一个名为 hasPassed() 的方法，但似乎无法做到。

我得到的错误是：

> windowsformapplication1.student.HasPassed()' 并非所有代码路径都返回值

这是我的代码：

```
public int YearMark
{
    get { return yearMark; }
    set { yearMark = value; }
}

private bool hasPassed;
public bool HasPassed()
{
    if (yearMark < 40)
    {
        hasPassed = false;
    }
    else
    {
        hasPassed = true;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T19:04:13.620

您忘记返回`bool`值 -

```
public bool HasPassed()
{
   return yearMark >= 40;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T19:06:11.577

你需要返回一个值，试试这个：

```
public bool HasPassed()
{
    return ( yearMark >= 40 )
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T19:04:01.317

显然你是一个老帕斯卡用户？在将其分配给 hasPassed 后，您需要实际返回该值。

如果你喜欢你的代码，你应该这样做：

```
public bool HasPassed()
    {
        if (yearMark < 40)
        {
            hasPassed = false;
        }
        else
        {
            hasPassed = true;
        }
        return hasPassed;

    } 
```

或者这样，如果您希望它更简单并保持第一眼就理解它：

```
public bool HasPassed()
{
    if (yearMark < 40)
    {
        return false;
    }
    return true;       
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T19:04:54.803

你的方法有一个bool返回值，所以你需要返回true或者false，而不是仅仅设置一个叫hasPassed的字段。更改方法以在 if 中返回 true 或 return false

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T19:09:13.190

修复取决于您的预期设计如何工作。如果该函数`HasPassed()`应该*返回*的布尔值`hasPassed`，那么您需要在代码中显式返回它。

```
public bool HasPassed()
    {
        if (yearMark < 40)
        {
            hasPassed = false;
        }
        else
        {
            hasPassed = true;
        }
        return hasPassed;

    } 
```

但是，如果您打算`HasPassed()`只更改私有变量的值`hasPassed`而不实际返回任何内容，则需要将函数的返回类型更改为`void`.

```
public void HasPassed()
    {
        if (yearMark < 40)
        {
            hasPassed = false;
        }
        else
        {
            hasPassed = true;
        }
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-24T19:09:33.423

只要您检查`hasPassed`调用方法中的内容，您就不一定需要返回任何内容。

```
private bool hasPassed;
public void HasPassed()
{
    if (yearMark < 40)
    {
        hasPassed = false;
    }
    else
    {
        hasPassed = true;
    }
}

public void Main()
{
    HasPassed();
    if (hasPassed)
    {
         //Do something
    }
} 
```

不是我会怎么做，而是另一种解决方案。

# javascript - 如果我想使用 jquery 编辑 chrome 扩展浏览器操作弹出窗口，我需要在程序中的哪个位置包含 jquery 才能使用它？

> ID：13055957
> 
> 赞同：5
> 
> 时间：2012-10-24T19:02:43.703
> 
> 标签：javascript, jquery, google-chrome, google-chrome-extension

我正在尝试制作一个获取 XMLrequest 并获取信息并将其写入浏览器操作弹出窗口的 html 页面的扩展。这可能吗？

这是我的清单文件

```
//manifest.json
"name":"myExtension",
"version":"1.0",
"manifest_version": 2,
"browser_action": {
    "default_icon":"favicon.ico",
    "default_popup": "popup.html"
} 
```

我的浏览器操作弹出 html 文件：

```
<!--popup.html-->
<!DOCTYPE html>
<html>
<head>
    <title>My Title</title>
<script src="popup.js"></script>
<script src="jquery.min.js"></script>
</head>
<body>
    <p>Hello</p>
    <p class="add"></p>

</body>
</html> 
```

还有我的脚本：

```
//popup.js

//Code up to this point gets xml info, I didn't include

var info = //string from xml request
$.(".add").html(info); 
```

我在弹出窗口中看到了 Hello 段落，但没有看到应该在 add 段落中的信息，当我检查控制台时，它告诉我 $ 未定义。我怎样才能让 jquery 为我工作？我是一个相对较新的人，所以如果这真的很简单而且我不明白，我很抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T19:59:45.697

有几点是错误的

*   添加脚本的顺序；它应该是：

    ```
    <script src="jquery.js"></script>
    <script src="popup.js"></script> 
    ```

*   您的选择器错误；`$.(".add")`它不应该是`$(".add")`：

    ```
    $(".add").html(info); 
    ```

*   您需要将 jQuery 命令包装到 DOM 就绪/加载时：

    ```
    $(function() {
      var info = //string from xml request
      $(".add").html(info);
    }); 
    ```

`content_scripts`此外，如果您不打算在那里使用它，则不需要添加脚本。
您可以从后台页面和弹出窗口完全访问您的扩展资源。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-24T19:10:12.530

您需要将其添加到您的 manifest.json 中：

```
content_scripts": [
 {
  "js": ["jquery.js"]
 }
] 
```

然后它将自动包含它。我会把你的 popup.js 放在 jquery 之后，以确保首先加载 jQuery。就像：

```
"js": ["jquery.js", "popup.js"] 
```

# facebook - Facebook 抓取返回 502 错误

> ID：13055963
> 
> 赞同：0
> 
> 时间：2012-10-24T19:03:21.223
> 
> 标签：facebook, screen-scraping

我只是尝试使用 Facebook 的 sharer.php url 使用标准链接共享。这是一个示例链接：

[https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fbsfurl.com%2FhTM9%2F2%2F2&t=欢迎](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fbsfurl.com%2FhTM9%2F2%2F2&t=Welcome)！

自 2009 年以来，我一直在成功地做到这一点。最近，Facebook 共享页面似乎不再能够访问我的链接以获取图像和描述。使用 Facebook 对象调试器，

[https://developers.facebook.com/tools/debug/og/](https://developers.facebook.com/tools/debug/og/)

我看到我尝试的每个 URL 都返回 HTTP 502 错误。有人可以帮我理解为什么会这样吗？即使是静态 HTML 页面也会返回同样的错误。这是错误的屏幕截图：http: [//images.publicaster.com/ImageLibrary/account116/images/facebookscrapeerror.png](http://images.publicaster.com/ImageLibrary/account116/images/facebookscrapeerror.png)

在浏览器中测试 URL 可以正常工作：[http://stagingclick.publicaster.com/test.htm](http://stagingclick.publicaster.com/test.htm)。这只是一个静态链接，没有动态内容，没有重定向。我有点不知道我能做些什么来解决这个错误。在我的 IIS 日志中，我无法看到来自 Facebook 抓取工具的传入请求。

谢谢！-标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T19:07:08.240

您链接的页面`(http://stagingclick.publicaster.com/test.htm`）被重定向（通过`og:url`标签）到[http://www.nin.ja](http://www.nin.ja)无法解决 - 您确定您共享的实时链接没有类似的问题吗？

# sql - 选择最近日期的 SQL 语句不再起作用

> ID：13055967
> 
> 赞同：3
> 
> 时间：2012-10-24T19:03:30.343
> 
> 标签：sql, sql-server-2008

我的一个报告程序突然失败，并将其追溯到我的陈述部分。直到 2 天前，它一直在提供的功能是从表中选择最近的日期`dbo.data_feed_file`（列名：）`File_Date`。

声明如下

```
HAVING (dbo.data_feed_file.file_date = (Select MAX(File_Date) as Expr1
                                        FROM dbo.data_feed_file AS data_feed_file_1)) 
```

第一：有没有其他的方法来写这个？我已经通过删除语句使我的报告工作了，它只比我想要的多 250 万行。我知道我可以硬编码日期以提取我想要的特定日期，但自动化显然是首选。

第二：有谁知道什么会导致它自发失败？我是唯一有权编辑此查询的人，所以我知道没有任何改变（真的，没有任何改变）。

提前致谢。

编辑：添加说明：没有错误消息，列标题按预期显示，但没有填充数据，它只是空白字段（好像没有任何内容符合条件）。陈述完成，好像没有任何问题。我已经确认 File_Date 列中没有 NULL 值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T19:16:21.623

我可以想到没有行会返回的两个原因。首先是子查询返回 NULL。这很容易修复为：

```
HAVING (dbo.data_feed_file.file_date = (Select MAX(File_Date) as Expr1
                                        FROM dbo.data_feed_file AS data_feed_file_1
                                        where file_date is not null)) 
```

第二个是 File_Date 存储为 a `datetime`，而不是 a `date`。如果是这样，您可能有一个`where`过滤掉最新值的子句，并且在`having`子句中缺少它。如果您想要日期，但该值存储为日期时间，那么您可以尝试：

```
HAVING (cast(dbo.data_feed_file.file_date as date) =
                                        (Select cast(MAX(File_Date) as date) as Expr1
                                        FROM dbo.data_feed_file AS data_feed_file_1
                                        where file_date is not null)) 
```

# maven - 在运行时动态加载 Maven 工件

> ID：13055968
> 
> 赞同：3
> 
> 时间：2012-10-24T19:03:31.677
> 
> 标签：maven, aether

在运行时，我的应用程序想要动态添加功能。我们希望能够从 Maven 存储库下载工件，将它们添加到类路径中，并在不重新启动应用服务器的情况下使用它们。可能的？

我遇到过 Eclipse Aether，它提供对 Maven 存储库的编程访问。现在缺少的部分是动态类路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T12:46:19.220

Sonatype 的 Aether 正是您所需要的。尝试使用[jcabi-aether](http://aether.jcabi.com/)，它是 Aether 的包装器：

```
File repo = this.session.getLocalRepository().getBasedir();
Collection<Artifact> deps = new Aether(this.getProject(), repo).resolve(
  new DefaultArtifact("junit", "junit-dep", "", "jar", "4.10"),
  JavaScopes.RUNTIME
); 
```

您需要知道的只是远程 Maven 存储库列表、本地存储库位置以及工件的 Maven 坐标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T21:09:55.423

如果您不反对使用商业产品，一个选择是[LiveRebel](http://zeroturnaround.com/software/liverebel/)

# ruby-on-rails - Rails Admin + Devise 无法注销

> ID：13055971
> 
> 赞同：0
> 
> 时间：2012-10-24T19:03:38.743
> 
> 标签：ruby-on-rails, devise, routes, rails-admin

在真实服务器**Ubuntu + Apache + Passenger**上部署我的应用程序后，我的网站位于**http://192.168.56.101:8080/sales_bank/public/**并且一切正常，但是当我从位于 http://192.168.56.101 的 Rails 管理员注销时**： 8080/sales_bank/public/admin**我重定向到**http://192.168.56.101:8080/users/sign_out**但我没有这个溃败 我有这个**http://192.168.56.101:8080/sales_bank/public/users/sign_out** . 我不明白如何从 rails admin log out 按钮更改 log_out 路径。

路线.rb

```
mount RailsAdmin::Engine => '/admin', :as => 'rails_admin'

devise_scope :user do
      match "registr" => "devise/registrations#new", as: "reg"
      match "logout" => "devise/sessions#destroy", as: "logout"
      match "users/sign_out" => "devise/sessions#destroy", as: "logout"
    end 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-11-27T15:57:09.527

我没有注销按钮或任何登录或注销的可能性，我只需将此行添加到 config/initializers/rails_admin.rb 即可解决

```
 config.authenticate_with do
    authenticate_admin!
  end 
```

# assembly - 解决数据危害的 MIPS 流水线逻辑

> ID：13055975
> 
> 赞同：1
> 
> 时间：2012-10-24T19:03:49.700
> 
> 标签：assembly, mips, forwarding

下面的代码在 5 级流水线数据路径上运行。我很难知道我对流水线工作原理的理解是否正确。在下面的尝试中，我尝试通过在适当的位置插入“气泡”来解决没有数据转发单元的数据路径中的数据危险。我的第一个问题是，我下面的流水线逻辑是否正确？

我的第二个问题是假设数据路径中有一个转发单元，来自 MEM->EX 和 WB->EX，这将如何改变第一个问题的逻辑？

```
add t0, s1, s2
add t1, t0, s3
sub t2, t0, t1
xor t3, t2, a0
lw t4, 0(t7)
slt t5, t4, t3 
```

这是我对问题 1 的尝试：

```
add t0, s1, s2 //IF add1 instruction
nop            //ID add1 instruction
nop            //EX add1 instruction
add t1, t0, s1  //MEM add1 instruction,  IF add2 instruction
nop             //WB add1 instruction,  ID add2 instruction
nop            //EX add2 instruction
nop            //MEM add2 instruction
nop            //WB add2 instruction
sub t2, t0, t1 //IF sub instruction
nop            //ID sub instruction
nop            //EX sub instruction
nop            //MEM sub instruction
xor t3, t2, a0 //WB sub instruction, IF xor instruction
lw t4, 0(t7)   //ID xor instruction, IF lw instruction
nop            //EX xor instruction, ID lw instruction 
nop            //MEM xor instruction, EX lw instruction 
nop            //WB xor instruction, MEM lw instruction
slt t5, t4, t3 //WB lw instruction, IF slt instruction 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-24T19:28:20.390

查看此处所示的管道图：[https](https://www.student.cs.uwaterloo.ca/~cs251/S12/a4.pdf) ://www.student.cs.uwaterloo.ca/~cs251/S12/a4.pdf并将您的指令映射到类似交错的管道，它将帮助您可视化数据危害.

此外，确切的数据转发实施将取决于您作业中问题的设计，这将影响您需要多少 nop。

# android - 使用 SAX 解析从 XML 检索数据仅检索第一个和最后一个值

> ID：13055978
> 
> 赞同：1
> 
> 时间：2012-10-24T19:03:56.223
> 
> 标签：android

我正在解析来自如下所示的 Web 服务的数据：我只能解析两个值，它们是 status 和 bal，接下来我得到空指针异常。我只能检索状态和 lname。谁能告诉我这是什么问题。我得到状态 = 1，这是正确的，bal = Finn，其余为空。

XML:

```
<root>
<response>
<status>1</status>
<bal>3.69 EUR</bal>
<cur>EUR</cur>
<acc>2974342749</acc>
<fname>Welcome To</fname>
<lname>Finn</lname>
</response>
</root> 
```

代码：

主要活动

```
btn.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                new Communicator().execute();
            }
        });
}

public class Communicator extends AsyncTask<String, String, SitesList1>
{
    @Override
        protected SitesList1 doInBackground(String... params) {
            try {
                    SAXParserFactory spf = SAXParserFactory.newInstance();
                    SAXParser sp = spf.newSAXParser();
                    XMLReader xr = sp.getXMLReader();

                    URL sourceUrl = new URL("XXXXX![enter image description here][2]");
                    MyXMLHandler1 myXMLHandler1 = new MyXMLHandler1();
                    xr.setContentHandler(myXMLHandler1);
                    xr.parse(new InputSource(sourceUrl.openStream()));
            } catch (Exception e) {
                System.out.println("XML Pasing Excpetion = " + e);
            }

            sitesList1 = MyXMLHandler1.sitesList1;

            return sitesList1;
        }

        @Override
        protected void onPreExecute() 
        {
            super.onPreExecute();
        }

        @SuppressWarnings("deprecation")
        @Override
        protected void onPostExecute(SitesList1 result) 
        {
                status = sitesList1.getStatus().toString();
                System.out.println("status"+status);
                bal = sitesList1.getBal().toString();
                System.out.println("bal"+bal);
                cur = sitesList1.getCur().toString();
                System.out.println("cur"+cur);
                acc = sitesList1.getAcc().toString();
                System.out.println("acc"+acc);
                fname = sitesList1.getFname().toString();
                System.out.println("fname"+fname);
                lname = sitesList1.getLname().toString();
                System.out.println("lname"+lname);

        }
    } 
```

处理程序：

公共类 MyXMLHandler1 扩展 DefaultHandler{

```
Boolean currentElement = false;
String currentValue = null;
public static SitesList1 sitesList1 = null;

public  SitesList1 getSitesList1() {
    return sitesList1;
}

public  void setSitesList1(SitesList1 sitesList1) {
    this.sitesList1 = sitesList1;
}

@Override
public void startElement(String uri, String localName, String qName,
        Attributes attributes) throws SAXException {

    currentElement = true;

    if (localName.equals("root")) {
        sitesList1 = new SitesList1();
    }
}

@Override
public void endElement(String uri, String localName, String qName)
        throws SAXException {

    currentElement = false;

    if (localName.equalsIgnoreCase("status"))
        sitesList1.setStatus(currentValue);
    else if (localName.equalsIgnoreCase("bal"))
        sitesList1.setBal(currentValue);
    else if (localName.equalsIgnoreCase("cur"))
        sitesList1.setBal(currentValue);
    else if (localName.equalsIgnoreCase("acc"))
        sitesList1.setBal(currentValue);
    else if (localName.equalsIgnoreCase("fname"))
        sitesList1.setBal(currentValue);
    else if (localName.equalsIgnoreCase("lname"))
        sitesList1.setBal(currentValue);

}

@Override
public void characters(char[] ch, int start, int length)
        throws SAXException {

    if (currentElement) {
        currentValue = new String(ch, start, length);
        currentElement = false;
    }

} 
```

}

二传手：

公共类 SitesList1 {

```
private String status;
private String bal;
private String cur;
private String acc;
private String fname;
private String lname;
public String getStatus() {
    return status;
}
public void setStatus(String status) {
    this.status = status;
}
public String getBal() {
    return bal;
}
public void setBal(String bal) {
    this.bal = bal;
}
public String getCur() {
    return cur;
}
public void setCur(String cur) {
    this.cur = cur;
}
public String getAcc() {
    return acc;
}
public void setAcc(String acc) {
    this.acc = acc;
}
public String getFname() {
    return fname;
}
public void setFname(String fname) {
    this.fname = fname;
}
public String getLname() {
    return lname;
}
public void setLname(String lname) {
    this.lname = lname;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T19:23:57.320

问题出在你的`characters`方法上。您没有`currentValue`正确重置。尝试这样的事情：

```
public void characters(char[] ch, int start, int length)
            throws SAXException {
  super.characters(ch, start, length);
  currentValue.append(ch, start, length);
}

public void startDocument() throws SAXException {
super.startDocument();
currentValue= new StringBuilder();
} 
```

然后，在您的`endElement`方法中，您可以这样做：

```
public void endElement(String uri, String localName, String qName)
        throws SAXException {

    currentElement = false;

    if (localName.equalsIgnoreCase("status"))
        sitesList1.setStatus(currentValue.toString());
    else if (localName.equalsIgnoreCase("bal"))
        sitesList1.setBal(currentValue.toString());
    else if (localName.equalsIgnoreCase("cur"))
        sitesList1.setCur(currentValue.toString());
    else if (localName.equalsIgnoreCase("acc"))
        sitesList1.setAcc(currentValue.toString());
    else if (localName.equalsIgnoreCase("fname"))
        sitesList1.setFname(currentValue.toString());
    else if (localName.equalsIgnoreCase("lname"))
        sitesList1.setLname(currentValue.toString());

   //flush out the StringBuilder so you can start again
   curentValue.setLength(0);

} 
```

# android - 重新创建 Activity 后再次显示 Android 对话框

> ID：13055997
> 
> 赞同：9
> 
> 时间：2012-10-24T19:04:56.973
> 
> 标签：android, android-activity, android-dialog

我有一个活动，需要在其中显示对话框。这里一切正常。我在 Activity 中重写了 onCreateDialog 方法，代码如下：

```
@Override
protected Dialog onCreateDialog(int dialog)
{
    if(dialog == 10)
    {
        if(waitDialog != null)
            waitDialog.dismiss();

        dialogCreated = true;
        waitDialog = CreateWaitDialog(this); 
        return waitDialog;
    }
    else
        return new Dialog(this);
} 
```

其中 CreateWaitDialog 是创建对话框的自定义方法，而 waitDialog 是***静态***变量。

我通过调用 showDialog(10) 来显示对话框

所有代码都执行良好。

显示对话框后，我通过调用将其关闭。

```
if(waitDialog != null)
    waitDialog.hide(); 
```

当 Activity 被销毁时，我将其解雇。

```
if(dialogCreated)
        dismissDialog(10);
    super.onDestroy(); 
```

它正在关闭，一切都很棒。但是，当我更改设备的方向并重新创建 Activity 时，它会自己再次弹出！我没有调用任何 showDialog 或类似的东西，它只是弹出！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-24T19:17:43.030

我认为这是 Activity 和[onCreateDialog](http://developer.android.com/reference/android/app/Activity.html#onCreateDialog%28int,%20android.os.Bundle%29)的定义行为：

> 用于创建由活动为您管理（保存和恢复）的对话框的回调。默认实现调用 onCreateDialog(int) 以实现兼容性。如果您的目标是 HONEYCOMB 或更高版本，请考虑改用 DialogFragment。
> 
> **如果您使用 showDialog(int)，则活动将第一次调用此方法，然后挂起。通过此方法创建的任何对话框都将自动为您保存和恢复，包括它是否正在显示。**
> 
> 如果您希望 Activity 为您管理保存和恢复对话框，您应该重写此方法并处理传递给 showDialog(int) 的任何 id。

我猜想 onDestroy 在活动生命周期中为时已晚，无法关闭对话框。我的猜测是 Activity 正在将您的对话框保存在 onSaveInstanceState 中。

我可能会在调用 super.onSaveInstanceState 之前尝试关闭 onSaveInstanceState 中的对话框，然后在 android 尝试保存和恢复它之前关闭对话框。

```
@Override
onSaveInstanceState(Bundle outstate) {

    dismissDialog(10);  
    super.onSaveInstanceState(outstate);
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-06-30T00:09:10.870

我发现自己遇到了类似的问题，因为我在没有调用 super.onDismiss() 的情况下覆盖了 onDismiss()。如果您发现在重新创建活动时再次出现对话框，您可能需要验证您没有犯同样的错误。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-17T18:51:31.550

如果您想阻止应用程序继续保存和恢复您的对话框，请调用 Activity.removeDialog(int id)。

# iphone - 从导航控制器堆栈中删除所有 Viewcontroller 的最佳方法

> ID：13055998
> 
> 赞同：1
> 
> 时间：2012-10-24T19:05:04.590
> 
> 标签：iphone, objective-c, ios, ipad, cocoa

我在导航控制器堆栈中有一些视图控制器，因此我想删除除父控制器之外的所有视图控制器。删除导航控制器中所有视图控制器的最佳方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T19:08:54.337

采用`[[self navigationController] popToRootViewControllerAnimated:YES];`

它应该`rootviewcontroller`立即移动。