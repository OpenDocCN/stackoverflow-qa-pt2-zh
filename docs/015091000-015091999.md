# StackOverflow 问答 15091000-15091999

# python - python 字典列表根据值查找重复项

> ID：15091000
> 
> 赞同：8
> 
> 时间：2013-02-26T13:59:05.177
> 
> 标签：python, list, dictionary

我有一个字典列表：

```
a =[{'id': 1,'desc': 'smth'},
    {'id': 2,'desc': 'smthelse'},
    {'id': 1,'desc': 'smthelse2'},
    {'id': 1,'desc': 'smthelse3'}] 
```

我想通过列表找到那些具有相同`id`值（例如`id=1`）的字典并创建一个新的字典：

```
b = [{'id':1, 'desc' : [smth, smthelse2,smthelse3]}, 
     {'id': 2, 'desc': 'smthelse'}] 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-26T14:04:52.297

你可以试试：

```
import operator, itertools

key = operator.itemgetter('id')

b = [{'id': x, 'desc': [d['desc'] for d in y]} 
     for x, y in itertools.groupby(sorted(a, key=key), key=key)] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T14:01:30.860

最好将“desc”值作为列表保存在任何地方，即使它们只包含一个元素。这样你就可以做到

```
for d in b:
    print d['id']
    for desc in d['desc']:
        print desc 
```

这也适用于字符串，只返回单个字符，这不是您想要的。

现在，该解决方案为您提供了列表的列表：

```
a =[{'id': 1,'desc': 'smth'},{'id': 2,'desc': 'smthelse'},{'id': 1,'desc': 'smthelse2'},{'id': 1,'desc': 'smthelse3'}]

c = {}
for d in a:
    c.setdefault(d['id'], []).append(d['desc'])
b = [{'id': k, 'desc': v} for k,v in c.iteritems()] 
```

`b`就是现在：

```
[{'desc': ['smth', 'smthelse2', 'smthelse3'], 'id': 1},
 {'desc': ['smthelse'], 'id': 2}] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T14:04:54.120

```
from collections import defaultdict

d = defaultdict(list)
for x in a:
    d[x['id']].append(x['desc']) # group description by id
b = [dict(id=id, desc=desc if len(desc) > 1 else desc[0])
     for id, desc in d.items()] 
```

为了保持秩序：

```
b = []
for id in (x['id'] for x in a):
    desc = d[id]
    if desc:
       b.append(dict(id=id, desc=desc if len(desc) > 1 else desc[0]))
       del d[id] 
```

# gcc - 在 AIX 6.1 上使用 GCC 4.4 进行的长双精度计算不正确

> ID：15091002
> 
> 赞同：2
> 
> 时间：2013-02-26T13:59:08.573
> 
> 标签：gcc, aix

以下程序在 AIX 6.1 下使用 GCC 4.4 编译时生成错误输出，具体取决于优化选项

```
#include <cmath>
#include <stdio.h>

int main()
{
    const long double a = 2.0L;

    long double x = ::powl( a, a );
    printf( "  ::powl(2,2)=%Lf\n", x );

    long double y = std::pow( a, a );
    printf( "std::pow(2,2)=%Lf\n", y );

    return 0;
} 
```

不优化编译时，输出错误：

```
 ::powl(2,2)=1.000000
std::pow(2,2)=1.000000 
```

使用 -O 或 -mlong-double-64 输出是正确的

```
 ::powl(2,2)=4.000000
std::pow(2,2)=4.000000 
```

该问题在 GCC 4.6 和 GCC 4.7 中不存在，但是，我无法轻松切换到更新的 GCC 版本。一个等效的 C 程序在有和没有优化的情况下也能正常工作，所以我认为 libstdc++ 有问题。

谁能确认这个问题？这可能[与原始双类型比较的 GCC 问题](https://stackoverflow.com/questions/2497825/gcc-problem-with-raw-double-type-comparisons)有关。

# php - 使用 Php 调整图像大小和裁剪

> ID：15091010
> 
> 赞同：3
> 
> 时间：2013-02-26T13:59:21.397
> 
> 标签：php, image, image-resizing, resize-image

我正在使用 php 脚本来上传和调整图像大小，非常简单：

```
if($_SERVER["REQUEST_METHOD"] == "POST") {
    $image = $_FILES["image_upload"];
    $uploadedfile = $image['tmp_name'];

    if ($image) {
        $filename = stripslashes($_FILES['image_upload']['name']);
        $extension = getExtension($filename);
        $extension = strtolower($extension);
        if (($extension != "jpg") && ($extension != "jpeg") && ($extension != "png") && ($extension != "gif")) {
            $error_txt = 'Immagine incoretta';
            $errors=1;
        } else {
            $size=filesize($uploadedfile);
            if ($size > MAX_SIZE*1024) {
                $error_txt = "Immagine troppo grande";
                $errors=1;
            }
            if($extension=="jpg" || $extension=="jpeg" ) {
                $uploadedfile = $uploadedfile;
                $src = imagecreatefromjpeg($uploadedfile);
            } else if($extension=="png") {
                $uploadedfile = $uploadedfile;
                $src = imagecreatefrompng($uploadedfile);
            } else {
                $src = imagecreatefromgif($uploadedfile);
            }

            list($width,$height)=getimagesize($uploadedfile);

            $newwidth=500;
            $newheight=375;
            $tmp=imagecreatetruecolor($newwidth,$newheight);

            imagecopyresampled($tmp,$src,0,0,0,0,$newwidth,$newheight,$width,$height);

            $filename = "images/". generateRandomString(5) . $image['name'];

            imagejpeg($tmp,$filename,100);

            imagedestroy($src);
            imagedestroy($tmp);
        }
    } 
```

我想更进一步，现在我只是调整图像的大小，无论比例如何，我想我想在不丢失原始比例的情况下将其调整为固定的高度，这当然是通过裁剪来实现的+调整原始图像的大小。

我不知道如何使用我的实际*imagecreatetruecolor*和*imagecopyresampled*函数来做到这一点，并且查看 php 手册似乎不是很容易。

有一个非常[好的库](http://www.binarymoon.co.uk/demo/timthumb-basic/)我试图集成到我的代码中，使用它就像**mysite.com/lib/timthumb.php?src=castle1.jpg&h=180&w=120**一样简单，但我不知道如何将它与我的实际集成代码。

所以你有什么建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T22:23:09.340

以下代码如有错别字或任何内容，请见谅。我没有测试过。我在这里所做的是计算高度或宽度是否是太长的比例。然后调整源尺寸以匹配最终图像尺寸。此外，调整我们缩小的一侧的中心，使裁剪的图像居中。

```
 $newwidth  = 500;
    $newheight = 375;
    $tmp       = imagecreatetruecolor($newwidth, $newheight);

    $widthProportion  = $width / $newwidth;
    $heightProportion = $height / $newheight;

    if ($widthProportion > $heightProportion) {
        // width proportion is greater than height proportion
        // figure out adjustment we need to make to width
        $widthAdjustment = ($width * ($widthProportion - $heightProportion));

        // Shrink width to proper proportion
        $width = $width - $widthAdjustment;

        $x = 0; // No adjusting height position
        $y = $y + ($widthAdjustment / 2); // Center the adjustment
    } else {
        // height proportion is greater than width proportion
        // figure out adjustment we need to make to width
        $heightAdjustment = ($height * ($heightProportion - $widthProportion));

        // Shrink height to proper proportion
        $height = $height - $heightAdjustment;

        $x = $x + ($heightAdjustment / 2); // Center the ajustment
        $y = 0; // No adjusting width position
    }

    imagecopyresampled($tmp, $src, 0, 0, $x, $y, $newwidth, $newheight, $width, $height); 
```

所以基本上使用 $width 和 $height 变量，您可以指定您想要多少图片（裁剪）。和 $x, $y 我们说我们要裁剪图片的位置。其余的只是标准调整大小以适应完整的新图像。

我希望这会有所帮助！

# asp.net-mvc - 拆分器中的 Kendo UI 网格

> ID：15091013
> 
> 赞同：1
> 
> 时间：2013-02-26T13:59:32.100
> 
> 标签：asp.net-mvc, visual-studio-2012, kendo-ui, kendo-grid, splitter

我的布局中有一个拆分器，用于显示信息。

我的显示效果很好，但是当我在 index.html 中有我的网格（在我的布局中由 @RenderBody() 调用）时，我的拆分器不再显示得很好......

一切都在一个页面上，没有拆分器...

有任何想法吗 ？

编辑 ：

是的对不起。

这是我的控制器：

```
public class HomeController : Controller
{
    private static string path = @"C:\LogIngesup\log.xml";

    public ActionResult Index()
    {
        DataTable logs = Write_Log.Read.loadXML(path);

        return View(logs);
    }
} 
```

那里有我的布局：

```
 <body>
@(Html.Kendo().Splitter()
      .Name("vertical")
      .Orientation(SplitterOrientation.Vertical)
      .Panes(verticalPanes =>
      {
          verticalPanes.Add()
              .HtmlAttributes(new { id = "middle-pane" })
              .Scrollable(false)
              .Collapsible(false)
              .Content(
                Html.Kendo().Splitter()
                    .Name("horizontal")
                    .HtmlAttributes(new { style = "height: 100%;" })
                    .Panes(horizontalPanes =>
                    {
                        horizontalPanes.Add()
                            .HtmlAttributes(new { id = "left-pane" })
                            .Size("230px")
                            .Resizable(false)
                            .Collapsible(true)
                            .Content(@<div>@RenderPage("~/Views/Home/Calendrier.cshtml")</div>);

                        horizontalPanes.Add()
                            .HtmlAttributes(new { id = "center-pane" })
                            .Content(@<div class="pane-content">
                                <section id="main">
                                    @RenderBody()
                                </section>
                            </div>);

                        horizontalPanes.Add()
                            .HtmlAttributes(new { id = "right-pane" })
                            .Collapsible(true)
                            .Size("220px")
                            .Content(@<div class="pane-content">
                                @RenderPage("~/Views/Home/XML.cshtml")
                            </div>);
                    }).ToHtmlString()
              );

          verticalPanes.Add()
              .Size("70px")
          .HtmlAttributes(new { id = "bottom-pane" })
          .Resizable(false)
          .Collapsible(true)
          .Content(@<div class="pane-content" style="text-align:center">
             <p>Application développée par : Dan</p>
          </div>);
      }))
</body> 
```

最终我的 index.html ：

```
 @{
    ViewBag.Title = "LogApp";
}

@model System.Data.DataTable

@(Html.Kendo().Grid(Model)
    .Name("Grid")    
    .Columns(columns => {
        foreach (System.Data.DataColumn column in Model.Columns)
        {
            columns.Bound(column.DataType, column.ColumnName);     
        }
    })    
    .Pageable()
    .Sortable()
    .Scrollable()
    .Filterable()
) 
```

我知道对我的代码有任何建议:)

此外，我有一个问题：

当我尝试在我的网格（index.html）中添加它时：

```
.DataSource(datasource=>datasource
    .Ajax()
    .PageSize(10)
)
.Selectable(selectable => selectable.Mode(GridSelectionMode.Single)) 
```

我无法转到其他页面，也无法选择一行...您能帮帮我吗？

（当我直接写 url 时有效：localhost\?Grid-page=2）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:02:17.043

将 Kendo UI Splitter 放入 Kendo UI Tabcontrol 时，我遇到了同样的问题。

当在拆分器之前制作 Tabcontrol 时，它会出现这个问题，但是当我只是颠倒顺序时它工作正常。

即我从：

```
$(document).ready(function () 
{
    $("#ManagementMenu").kendoTabStrip();
    $("#splitter").kendoSplitter({
        panes: [
            { size: "200px", resizable: false},
            { size: "500px", collapsible: false}
        ],
    });
} 
```

至

```
$(document).ready(function () 
{
    $("#splitter").kendoSplitter({
        panes: [
            { size: "200px", resizable: false},
            { size: "500px", collapsible: false}
        ],
    });
    $("#ManagementMenu").kendoTabStrip();
} 
```

问题得到解决。

# android - 如何在 TextView 中的选定文本上设置侦听器

> ID：15091019
> 
> 赞同：8
> 
> 时间：2013-02-26T13:59:47.657
> 
> 标签：android, textview

我正在使用`ActionMode.Callback`，但我需要知道文本何时完成选择......例如

![在此处输入图像描述](../Images/543d3e28fce07c94a0d2e4d42ad236a4.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-16T18:03:26.417

在 .xml 中：

```
<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textIsSelectable="true" /> 
```

在班上：

```
textview.setCustomSelectionActionModeCallback(new callback(textview));
...
public class callback implements Callback {

    private TextView mTextView;

    public callback(TextView text) {
        this.mTextView = text;

    }

    @Override
    public boolean onActionItemClicked(ActionMode mode, MenuItem item) {
        int start = mTextView.getSelectionStart();
        int end = mTextView.getSelectionEnd();
        Spannable wordtoSpan = (Spannable) mTextView.getText();

        switch (item.getItemId()) {

        case R.id.item_blue:
            wordtoSpan.setSpan(new BackgroundColorSpan(Color.BLUE), start
                    , end,
                    Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);

        singlenton.getInstance().getDatabase().createMarkText(mTextView,Color.BLUE);
            return true;

        case R.id.item_green:
            wordtoSpan.setSpan(new BackgroundColorSpan(Color.GREEN), start, end,
                    Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
            singlenton.getInstance().getDatabase().createMarkText(mTextView,Color.GREEN);
            return true;

        case R.id.item_red:
            wordtoSpan.setSpan(new BackgroundColorSpan(Color.RED), start, end,
                    Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
            singlenton.getInstance().getDatabase().createMarkText(mTextView,Color.RED);
            return true;
        case R.id.item_yellow:
            wordtoSpan.setSpan(new BackgroundColorSpan(Color.YELLOW), start, end,
                    Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
            singlenton.getInstance().getDatabase().createMarkText(mTextView,Color.YELLOW);
            return true;
        case R.id.item_erase:
            wordtoSpan.setSpan(new BackgroundColorSpan(Color.TRANSPARENT), start, end,
                    Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
            singlenton.getInstance().getDatabase().createMarkText(mTextView,Color.TRANSPARENT);
            return true;
        }
        return false;
    }

    @Override
    public boolean onCreateActionMode(ActionMode mode, Menu menu) {
        mode.setTitle("Selecione a cor");
        mode.getMenuInflater().inflate(R.menu.menu_text_context, menu);

        return true;
    }

    @Override
    public void onDestroyActionMode(ActionMode mode) {

    }

    @Override
    public boolean onPrepareActionMode(ActionMode mode, Menu menu) {
        menu.removeItem(android.R.id.selectAll);
        // Remove the "cut" option
        menu.removeItem(android.R.id.cut);
        // Remove the "copy all" option
        menu.removeItem(android.R.id.copy);
        return true;
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-14T10:53:54.323

我想你可以在这里找到你的答案：

[Android 文本选择监听器](https://stackoverflow.com/questions/9935688/)

> `ActionMode`如果您的目标是蜂窝或更新的，您在这里寻找的关键术语是 ，以帮助您进行研究。
> 
> [API 文档](http://developer.android.com/guide/topics/ui/menus.html#context-menu)（向下滚动到“使用上下文操作模式）可以很好地解释事物，一旦你找到你正在寻找的东西，这是他们使用的最大障碍，但基本上你会需要什么要做的是：
> 
> 1.  将您`EditText`的设置为可选（`android:textIsSelectable="true"`或`setTextIsSelectable(true);`
> 2.  实现`ActionMode.Callback`接口并提供您自己的菜单项。
> 
> 注意：如上所述，这仅适用于 API 级别 11+。如果您针对的是较早的平台，则获取文本选择的事件要复杂得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-28T03:52:08.973

如果您需要没有 ActionMode 的监听器：

```
import android.content.Context
import android.util.AttributeSet
import android.widget.TextView

class TextViewWithObservableSelection @JvmOverloads constructor(
    context: Context,
    attrs: AttributeSet? = null,
    defStyleAttr: Int = 0,
    defStyleRes: Int = 0
) : TextView(
    context,
    attrs,
    defStyleAttr,
    defStyleRes
) {
    private var selectedText: String = ""
        set(value) {
            if (field != value) {
                field = value
                observer?.invoke(value)
            }
        }

    private var observer: ((String) -> Unit)? = null
        set(value) {
            field = value
            field?.invoke(selectedText)
        }

    override fun onSelectionChanged(selStart: Int, selEnd: Int) {
        super.onSelectionChanged(selStart, selEnd)
        val startIndex = minOf(selStart, selEnd)
        val endIndex = maxOf(selStart, selEnd)
        selectedText = text.toString().substring(startIndex, endIndex)
    }

    fun observeSelectedText(observer: ((String) -> Unit)?) {
        this.observer = observer
    }
} 
```

# iphone - 如何通知 UIView 它即将被删除？

> ID：15091021
> 
> 赞同：1
> 
> 时间：2013-02-26T13:59:56.650
> 
> 标签：iphone, objective-c, uiview

有没有办法检查视图是否即将被删除？我已将 UITableViewCell 子类化，并想通知单元格是否即将被表格丢弃（我的表格在每个部分中都有可变大小的单元格，因此有时它确实会丢弃单元格）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:05:35.537

您可以覆盖以下方法：

```
- (void)willRemoveSubview:(UIView *)subview 
```

[http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instm/UIView/willRemoveSubview](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instm/UIView/willRemoveSubview)：

# asp.net-mvc-3 - 通过 NuGet for SQL2012 流畅的 NHibernate / NHibernate

> ID：15091023
> 
> 赞同：1
> 
> 时间：2013-02-26T14:00:00.113
> 
> 标签：asp.net-mvc-3, nhibernate, fluent-nhibernate, sql-server-2012

我刚刚从 NuGet 安装了以下最新包：

FluentNHibernate.1.3.0.733 NHibernate.3.3.2.4000（FNH 需要）

我正在尝试使用 SQL 2012（本机）运行我们的 ASP.NET MVC 3 应用程序。

以下代码取自我们构建 nhibernate Session 的方法：

```
 var sqlConfig = MsSqlConfiguration.MsSql2005.ConnectionString(ConnectionString).AdoNetBatchSize(30); 
```

我们还使用这种方法来使用代码优先方法来配置新的 emtpy 数据库。

我需要使用 SQL 2012 方言，但最新的 FNH 或 NHibernate 都没有来自 NuGet。

有人知道 Git 中这些代码的状态吗？我可以看到这个 2012 方言的 FNH 合并是在 7 个月前完成的（在最新的 NuGet 发布一个月后）。

其他人在做什么来连接到 SQL 2012？

有谁知道这些的下一个 NuGet 软件包何时可用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T14:42:25.823

只需使用 SQL Server 2008 方言。我不知道 2012 年有任何需要更新方言的变化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T19:05:36.680

NHibernate 核心已经支持它，所以只需使用`MsSql2012Dialect`：

```
var sqlConfig = MsSqlConfiguration.MsSql2005.Dialect<MsSql2012Dialect>(); 
```

`MsSqlConfiguration.MsSql2012`在最新版本发布后不久被[添加](https://github.com/jagregory/fluent-nhibernate/commit/326bec31e2498b7f5c28b9431a40176314ee4ac4 "为 Sql Server 2012 添加了配置选项")到 Fluent，因此您可以根据需要获取源代码，但最终结果是相同的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T19:18:17.360

我当前的设置是使用 NHibernate (3.3.2.4000) 和 FluentNHibernate (1.3.0.733)，我的连接设置的第一部分看起来像这样，请随时根据您的需要进行调整。请注意，即使我使用`MsSql2008`配置类提取连接字符串，我已将方言设置为`MsSql2012Dialect`

```
var cfg = Fluent.NHibernate.Cfg.Fluently.Configure()
    .Database(FluentNHibernate.Cfg.Db.MsSqlConfiguration.MsSql2008
             .ConnectionString(c => c.FromConnectionStringWithKey("KeyName"))
        #if DEBUG
        .ShowSql()
        .FormatSql()
        #endif
        .Dialect<NHibernate.Dialect.MsSql2012Dialect>()
        .AdoNetBatchSize(50)
    )
    //Other chained methods (for setting up cache, mappings, etc)
    //.Mappings(m =>
    //{
    //
    //}

var sessionFactory = cfg.BuildSessionFactory(); 
```

据我所知，2012 Dialect 只是增加了对函数的支持`Sequences`和注册`iif`。

# json - 来自和到 json 的对象映射器

> ID：15091031
> 
> 赞同：0
> 
> 时间：2013-02-26T14:00:34.137
> 
> 标签：json, jackson, json.net

我正在开发一个在不同平台（java 和 .net）上具有多个可执行应用程序的应用程序系统。

对于它们之间的通信，我使用**JSON**格式。所以我需要非常频繁地将对象映射到 json 和从 json 映射。当前的解决方案（似乎是解决方法）是 java 端的 jackson 和 .NET 端的 Newtonsoft.Json。问题是属性名称不同，并且在反序列化结束时并非所有属性都需要

所以我的问题是：

1.是否有任何映射器可以做到这一点。目前在 .Net 端使用 NewtonSoft.JSON.DatasetMapper 并在 java 中使用 jsonanysetter 注释，但在这种方法中，为每个对象加载映射定义，因为实际对象映射代码在代码中。例如：

```
 //C#
  myobj.prop1 = dataSet.Tables[0].Rows[0]["propertyName1"].ToString();
  // and so on.....

  //Java
  switch(key)
  {
      case "prop1":
             myobj.setPropery1(value.toString());
             break;
      //and so on......
  } 
```

2\. 对象转换率需要非常高，因为对象的发送和接收速度非常快。说每秒大约 10k 个对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:13:31.520

我们在我们的一个项目中使用了 GSON，我认为[这个参考](https://sites.google.com/site/gson/gson-user-guide#TOC-Serializing-and-Deserializing-Collection-with-Objects-of-Arbitrary-Types)可能会对您有所帮助，除此之外，还有一个[类似](https://stackoverflow.com/questions/5396578/deserializing-mapobject-object-with-gson)的问题可能会对您有所帮助。[stackoverflow 中的另一个 q/a](https://stackoverflow.com/questions/10596667/how-to-invoke-default-deserialize-with-gson)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:08:37.017

你应该看看杰克逊。它是 Java 的*事实上*的JSON 库，并且很乐意处理将对象转换为 JSON 并再次返回。它有许多选项可让您更改输出，并且大多数每个对象的配置都是使用注释执行的，因此在您的模型中可见，而不是隐藏在单独的配置文件中。

# php - 将组合框值传递给 php extjs 4

> ID：15091037
> 
> 赞同：0
> 
> 时间：2013-02-26T14:00:58.877
> 
> 标签：php, extjs, combobox, extjs4, extjs-mvc

我想将组合框值传递给将执行 mySQL 查询的 PHP 文件。我正在使用带有 MVC 架构的 Extjs 4。这是我的组合框：

```
{
            xtype: 'combobox',
            id: 'cmbMetric',
            name: 'sev',
            mode: 'queryMode',
            //querymode : 'lcoal',
            fieldLabel: 'Metric',
            store: 'MetricsData',
            editable: false,
            valign : 'middle',
            margin : 15,
            displayField:'name_metric',
            valueField : 'id_metric'

        } 
```

我的商店：

```
Ext.define('Metrics.store.GuiData', {
extend: 'Ext.data.Store',
model: 'Metrics.model.GuiData',
autoLoad: true,
idProperty: 'id_metric',
proxy : {
    type : 'ajax',
    actionMethods : 'POST',
    api : {
    read : 'gui_comp_items.php'
    },
    reader: {
        type: 'json',
        successProperty: 'success',
        messageProperty: 'message',
        root: 'data'
    }
}
}); 
```

当我选择一个组合框值时，控制器会调用此函数：

```
 onSelectedValue : function(combo) {
    var selected = combo.getValue();
    var guiDataStore = this.getGuiDataStore();
    guiDataStore.getProxy().url = 'gui_comp_items.php?id_metric=' + selected ;
    guiDataStore.load({
    params : {
        id_metric : selected //The parameter I want to send to the php file         
        },
        callback:this.onGuiDataLoad, 
        scope: this
    });
} 
```

我的 php 文件：

```
 function guiCompItems() 
{
$id_metric = $_GET['id_metric'];
    $sql = 'select m.id_metric, f.name_filter, gui.type_guicomp from gui_comp gui inner join   filter f inner join metric m
         on f.id_guicomp = gui.id_guicomp 
         and f.id_metric = m.id_metric
         where m.id_metric ='. mysql_real_escape_string(trim(intval($_GET['id_metric'])));   
$result = mysql_query($sql); // result set   
while($rec = mysql_fetch_array($result, MYSQL_ASSOC)){
    $arr[] = $rec;
};

$data = json_encode($arr);  //encode the data in json format
echo '({"success": "true", "message" : "OK","data":' . $data . '})';
} 
```

数据始终为“空”。我认为参数没有发送到php文件。任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:22:10.737

存储负载实际上并未对请求中的参数配置进行编码。该请求是由为商店配置的代理发出的，因此您需要发送的任何其他参数都应在代理的额外参数配置中设置。喜欢：

```
guiDataStore.getProxy().url = 'gui_comp_items.php?id_metric=' + selected ;
 guiDataStore.getProxy().extraParams = {
        id_metric : selected //The parameter I want to send to the php file         
        };
guiDataStore.load({
        callback:this.onGuiDataLoad, 
        scope: this
    }); 
```

# android - SearchView：这些意见的建议是什么？

> ID：15091038
> 
> 赞同：0
> 
> 时间：2013-02-26T14:01:02.420
> 
> 标签：android, unit-testing, testing, robotium

我的应用程序中有一个`SearchView`，现在我正在使用`Robotium`库进行功能测试。当用户开始输入搜索查询时，将显示以下带有建议的视图：

![在此处输入图像描述](../Images/b61287a5d1bc18d5a5a258b382452cb3.png)

我需要验证这些建议是否在屏幕上。所以问题是：

1.  这些观点本身是什么？

2.  如何验证这些视图是否显示在屏幕上？我尝试使用`solo.searchForText()`，但这对我不起作用。

# file-io - 如何在 windows xp 上删除名为“（双引号）的文件夹

> ID：15091041
> 
> 赞同：0
> 
> 时间：2013-02-26T14:01:18.487
> 
> 标签：file-io, windows-xp

我的一个驱动器上有几个文件夹，名为`"`. 所以，路径`C:\some_path\"`当然是，当我尝试删除它时，我收到一条错误消息

> 文件名、目录名或卷标语法不正确。

如何删除这些文件夹？

[http://support.microsoft.com/?kbid=320081](http://support.microsoft.com/?kbid=320081)，即`rd \S "\\?\C:\some_path"`没有帮助。

`/x`swith ie显示的短文件名`dir /x`也无济于事。

我尝试了两个实用程序，DelinvFile 和 Unlocker。他们也无法删除这些文件夹。

任何提示表示赞赏。

谢谢

# actionscript-3 - 向量上的 AS3 向量投影

> ID：15091048
> 
> 赞同：0
> 
> 时间：2013-02-26T14:01:43.843
> 
> 标签：actionscript-3, vector

[http://www.tonypa.pri.ee/vectors/tut03.html](http://www.tonypa.pri.ee/vectors/tut03.html)

你能给我解释一下，他们是如何在矢量上投影的？当我乘以 dp * 单位向量时，我得到什么？我不明白他们做了什么以及他们如何在没有角度或其他任何东西的情况下得到它，只是奇怪的非向量数 * 1 长度向量从 30k+ （我得到巨大的 dp 数）之类的投影中得到。我真的受够了所有的公式，试图用 atan2 和其他几何计算得到一个投影。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:13:23.333

做两个向量的点积，除以被投影的向量的长度。如果您在投影之前对两个向量进行归一化，然后将投影乘以作为投影基础的向量的长度，您将得到相同的结果（抱歉英语不好，我的思维很慢）。顺便说一句，在正交坐标系中，您不需要角度来进行投影 - 也可能是非正交的。就是向量之间的夹角是从 导出的`acos(dotProduct(v1,v2)/length(v1)/length(v2))`。

```
var v:Vector.<Number>; // the vector to get projected
var p:Vector.<Number>; // the projection base. Lengths of vectors as number sequences are equal
function dotProduct(v1,v2:Vector.<Number>):Number {
    var d:Number=0;
    for (var i:int=v1.length-1;i>=0;i--) d+=v1[i]*v2[i];
    return d;
}
function lengthOf(v:Vector.<Number):Number { return Math.sqrt(dotProduct(v,v)); }
var pl:Number=dotProduct(v,p)/lengthOf(v)/lengthOf(p); // part of p's length that's the projection length
for (var i:int=v.length-1;i>=0;i--) v[i]=p[i]*pl; 
```

# wpf - WPF 的“好”特性真的那么好吗？还是他们控制欲太强？

> ID：15091049
> 
> 赞同：1
> 
> 时间：2013-02-26T14:01:43.697
> 
> 标签：wpf, mvvm

所以我对 MVVM 还是很陌生，我一直在努力解决一些关于用户输入验证的问题。WPF 有一些看起来像“魔术”的内置功能，一般来说，我知道“魔术”不好。

**例如：**如果您将 a 绑定`TextBox`到具有类型 of 的 Property`double`并且用户在其中输入“hello” ，WPF 会自动在通知用户输入无效的`TextBox`周围显示一个红色边框。`TextBox`

这一切都很好，但看起来确实像“魔术”。一位经验丰富的开发人员告诉我，类似的 WPF 和应用程序构建器希望拥有过多的控制权。他说，在 Web 开发中，视图不会知道属性是什么类型。这对我来说很有意义。所以这引出了我的一般性问题***——WPF 视图应该理解属性类型吗？***- 如果我将 Property 类型声明为 a `string`，那么我可以*完全控制*视图。而不必解决 WPF 的“智能” `TextBox`“魔法”。

表达我的问题的另一种方法是 -***应该在模型或视图模型中声明属性类型吗？***

我了解，如果您将模型中的属性类型声明为 a`double`并`string`在 ViewModel 中声明为 a ，则必须在模型中对其进行解析。在我看过的大多数 MVVM 应用程序示例中，Property 类型在整个应用程序中都是相似的，但我认为不了解它正在使用什么的“愚蠢”视图会好得多。

**回到我的例子：**如果 Property 被声明为 a `String`，您可以完全控制输入所需的格式并防止无效输入。这似乎是比信任 WPF 更好的解决方案`TextBox`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T14:58:08.960

是的，我认为 WPF 的特性是“很好” :)

WPF 有两层：数据层和 UI 层。

数据层包含您的数据。如果数据中有数字，它应该是数字数据类型，而不是字符串数据类型。

UI 层 (XAML) 仅旨在为数据提供用户友好的界面，以便用户可以轻松地与数据层进行交互。例如，如果您有一个包含数值的数据层，并且您希望用户能够编辑该值，您可以选择使用`TextBox`.

如果仅仅因为 UI 层使用 a`TextBox`来显示数据而强制数据层使用字符串而不是数字，那么您就是让 UI 控制您的应用程序，这不是 WPF 应该如何工作的。此外，像这样将两层混合在一起会使以后的维护变得更加困难。例如，如果您决定将 更改`TextBox`为`NumericUpDown`UI 控件会发生什么？现在你必须去修改你的数据层来改变 UI。

关于您的特定示例，当您将 a 绑定`TextBox`到双精度并键入“hello”之类的字符串时，实际发生的是 WPF 尝试将您的双精度值设置为字符串值，并引发异常。

该异常是导致红色边框出现在 周围`TextBox`并显示错误消息的原因，而不是任何特殊处理。你可以很容易地在你的 double 属性的 setter 中抛出一个异常，同样的事情也会发生。

我不会真正称其为“魔术”，只是异常处理:)

但是为了避免在您想要验证输入的任何时候抛出异常，WPF 提供了[IDataErrorInfo](http://msdn.microsoft.com/en-us/library/system.componentmodel.idataerrorinfo.aspx)接口，您可以使用它来验证您的属性而不会抛出异常。UI 将对使用此接口引发的错误做出反应，就像对异常做出反应一样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T14:50:01.320

是的，它应该。

Karl Shifflett 有一篇很棒的文章。[输入验证 – UI 异常和模型验证错误](http://karlshifflett.wordpress.com/mvvm/input-validation-ui-exceptions-model-validation-errors/)

解决方案是检测无效输入。当用户输入无效的数据类型时，数据绑定管道将抛出异常。当它发生时，在**View上处理它，然后在****ViewModel**上添加错误消息，以便您可以在需要时使用它。

WPF 默认情况下会吞下该数据绑定异常，但您可以在**View**类中的*Loaded*事件上添加一个处理程序。

 **```
_errorEventRoutedEventHandler = new RoutedEventHandler(ExceptionValidationErrorHandler);
this.AddHandler(System.Windows.Controls.Validation.ErrorEvent, _errorEventRoutedEventHandler, true); 
```

实现处理程序

```
private void ExceptionValidationErrorHandler(object sender, RoutedEventArgs e)
{
    // Add logic to handle this invalid data type exception. 
    // Add error messages to viewmodel, show notification dialog, etc
    ...
} 
```

将 XAML 绑定**NotifyOnValidationError**、**ValidatesOnDataErrors**、**ValidatesOnExceptions**上的这些属性设置为 true。

```
Text="{Binding UnitPrice, StringFormat=c, NotifyOnValidationError=True, ValidatesOnDataErrors=True, ValidatesOnExceptions=True}" 
```

就是这样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T14:55:11.637

由于您使用的是强类型语言，因此迟早需要验证。我不确定通过不使用现有的验证形式您想要实现什么。不要忘记，当给出无效输入时，您可以修改视图以执行您想要的任何操作。如果您不希望抛出任何异常（如@Rachel 所述），则使用字符串属性可能会阻止它们。

**宣言**

连接到数据库的属性在模型中声明。您需要将模型转换为用户友好的属性，在 ViewModel 中声明。例如，我们有一个存储在数据库中的值 ( *valueA )。**valueA*是通过使用用户可用的两个输入字段（*valueB*和*valueC*）来计算的。在这种情况下*valueA*在您的模型中声明，但*valueB*和*valueC*仅在您的 ViewModel 中声明，因为它们不需要存储在数据库中。（从技术上讲，这三个都可以在您的 ViewModel 中使用，但您的模型中只声明了*valueA*）

我理解的方式：

*   **模型**具有存储在数据库中的属性
*   **ViewModel**将模型转换为用户可以处理的东西（反之亦然）。
*   **View**或多或少是“*您的 ViewModel 的输入区域*”，用户可以在其中通过使用图形获得帮助。**

# google-apps-script - LockService 歧义

> ID：15091051
> 
> 赞同：3
> 
> 时间：2013-02-26T14:01:46.293
> 
> 标签：google-apps-script

在 LockService 文档中：[https](https://developers.google.com/apps-script/service_lock) ://developers.google.com/apps-script/service_lock它声明“getPublicLock() - 获取一个锁，通过当前用户的同时执行来 防止同时访问**一段代码”**

因此查询围绕注释：“**代码段**”。如果我有多个使用 LockService.getPublicLock() 的代码部分，它们本质上是独立的锁吗？

例如：

```
function test1() {
    var lock = LockService.getPublicLock();

    if (lock.tryLock(10000)) {
        // Do some critical stuff
        lock.releaseLock();
    }
}

function test2() {
    var lock = LockService.getPublicLock();

    if (lock.tryLock(10000)) {
        // Do some critical stuff
        lock.releaseLock();
    }
} 
```

如果我有两个脚本调用同时执行，一个用户访问 test1()，另一个用户访问 test2()，他们都会成功吗？或者正如它在这篇文章中所暗示的那样：http: [//googleappsdeveloper.blogspot.co.uk/2011/10/concurrency-and-google-apps-script.html](http://googleappsdeveloper.blogspot.co.uk/2011/10/concurrency-and-google-apps-script.html)只是脚本级别的锁吗？因此，对于这种情况，只有 test1() 或 test2() 之一会成功，但不会同时成功。

如果确实如文档所述，并且两者都会成功，那么什么表示“代码段”？是 LockService.getPublicLock() 出现的行号还是周围的函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-02T13:04:10.603

公用锁只有一把，私用锁只有一把。

如果您希望拥有多个锁，您需要自己实现某种命名锁服务。下面的示例，使用脚本数据库功能：

```
var validTime = 60*1000;  // maximum number of milliseconds for which a lock may be held
var lockType = "Named Locks";  // just a type in the database to identify these entries
function getNamedLock( name ) {
  return {
    locked: false,
    db : ScriptDb.getMyDb(),
    key: {type: lockType, name:name },
    lock: function( timeout ) {
      if ( this.locked ) return true;
      if ( timeout===undefined ) timeout = 10000;
      var endTime = Date.now()+timeout;
      while ( (this.key.time=Date.now()) < endTime ) {
        this.key = this.db.save( this.key );
        if ( this.db.query( 
              {type: lockType, 
               name:this.key.name, 
               time:this.db.between( this.key.time-validTime, this.key.time+1 ) }
            ).getSize()==1 )
          return this.locked = true;        // no other or earlier key in the last valid time, so we have it
        db.remove( this.key );              // someone else has, or might be trying to get, this lock, so try again
        Utilities.sleep(Math.random()*200); // sleep randomly to avoid another collision
      }
      return false;
    },
    unlock: function () {
      if (this.locked) this.db.remove(this.key);
      this.locked = false;
    }
  }
} 
```

要使用此服务，我们将执行以下操作：

```
var l = getNamedLock( someObject );
if ( l.lock() ) {
  // critical code, can use some fields of l for convenience, such as
  // l.db - the database object
  // l.key.time - the time at which the lock was acquired
  // l.key.getId() - database ID of the lock, could be a convenient unique ID
} else {
  // recover somehow
}
l.unlock(); 
```

笔记：

1.  这假设数据库操作 db.save() 本质上是不可分割的——我认为它必须是，否则在正常使用中会有很大的麻烦。

2.  因为时间是以毫秒为单位的，我们必须假设有可能不止一个任务尝试使用相同时间戳的锁，否则可以简化功能。

3.  我们假设锁的持有时间永远不会超过一分钟（但您可以更改它），因为执行时间限制无论如何都会停止您的脚本。

4.  您应该定期从数据库中删除超过一分钟的所有锁，以防止它被崩溃脚本中的旧锁弄乱。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-09-10T22:50:26.447

这个问题太老了，现在“getPublicLock()”不再可用。

根据[https://developers.google.com/apps-script/reference/lock](https://developers.google.com/apps-script/reference/lock) 此时 LockServise 呈现这三个范围：

**getDocumentLock()**：获取一个锁，以防止当前文档的任何用户同时运行一段代码。

**getScriptLock()**：获取一个锁，以防止任何用户同时运行一段代码。

**getUserLock()**：获取一个锁，防止当前用户同时运行一段代码。

# .net - 在 ASP .NET API 中添加 Web 服务

> ID：15091054
> 
> 赞同：0
> 
> 时间：2013-02-26T14:01:55.617
> 
> 标签：.net, api

我正在开发一个 ASP .NET API，我想在这个 API 中使用 Web 服务。通过转到我的 ASP .NET API 项目中的“添加服务引用”，我成功地包含了一个新的服务引用。完成这一切之后，当我转到我的函数所在的控制器时，智能感知似乎无法识别我的新服务引用。

我添加的参考可以以任何方式反映在我的项目中吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T05:08:50.167

**编辑：**

经过一天无休止的谷歌搜索和反复试验，我设法让我的参考资料反映在我的项目中。转到“添加服务引用”右键单击以显示“配置引用”并取消选中“在引用的程序集中重用类型”，如此[链接所示。](https://stackoverflow.com/a/11128845/1481289)

# wordpress - Fancybox 2.1.3 未在 WordPress 站点中调整图像大小

> ID：15091058
> 
> 赞同：0
> 
> 时间：2013-02-26T14:02:05.727
> 
> 标签：wordpress, resize, fancybox

这让我发疯：我有这个可以打开图像的fancybox 2.1.3，但是如果我调整窗口大小，图像将不会调整大小。这很奇怪，因为代码中的一切看起来都很好，如果我使用 fancybox 打开博客文章，它会很好地适应和调整大小。只有图像是f ***了......这里的例子（不是我正在做的正确网站）：

[http://www.brunoferraroph.altervista.org/wordpress/trattamenti/](http://www.brunoferraroph.altervista.org/wordpress/trattamenti/)

javascript设置：

```
defaults: {
        padding : 15,
        margin  : 20,

        width     : 800,
        height    : 600,
        minWidth  : 100,
        minHeight : 100,
        maxWidth  : 9999,
        maxHeight : 9999,

        autoSize   : true,
        autoHeight : false,
        autoWidth  : false,

        autoResize  : true,
        autoCenter  : !isTouch,
        fitToView   : true,
        aspectRatio : false,
        topRatio    : 0.5,
        leftRatio   : 0.5,

        scrolling : 'auto', // 'auto', 'yes' or 'no'
        wrapCSS   : '', 
```

fancybox 2.1.4 也一样，css 似乎工作...请帮助 :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:50:35.990

默认情况下，选项 autoSize 应该将 autoHeight 和 autoWidth 设置为 true，但您似乎在那里覆盖了它们。尝试将它们设置为 true！

编辑：找到了！将 fitToView 设置为 true 即可。

# javascript - setInterval 的更改间隔

> ID：15091059
> 
> 赞同：4
> 
> 时间：2013-02-26T14:02:05.820
> 
> 标签：javascript

有没有办法在运行时修改使用 setInterval 设置的函数的调用间隔，而不是删除它（clearInterval）并使用不同的值再次恢复？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-26T14:05:14.203

改用 setTimeout，另外这是异步 JS 的非阻塞方法：

```
var interval = 1000;

function callback() {
   console.log( 'callback!' );
   interval -= 100; // actually this will kill your browser when goes to 0, but shows the idea
   setTimeout( callback, interval );
}

setTimeout( callback, interval ); 
```

不要使用`setInterval`，因为在某些情况下（很多`setInterval`+ 长回调，通常比超时时间长），由于队列大小有限，一些回调将被浏览器丢弃并且**永远不会执行**。只`setTimeout`保证执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T14:03:43.743

没有; 如果您使用过，删除间隔并重新添加它是一种方法`setInterval()`。

但是，您可以通过`setTimeout()`在最后以可变延迟重复调用来实现不同超时的相同目标。

[*出于好奇，你在做什么，你想修改间隔？也许`requestAnimationFrame()`可能更合适？*]

# c++ - 在 C++ 中创建 afwin 文件

> ID：15091066
> 
> 赞同：1
> 
> 时间：2013-02-26T14:02:27.117
> 
> 标签：c++, visual-studio-2010, mfc

我在构建时发现了一个错误。它表明存在一些未声明的变量。当我从其他一些项目中查看它们的起源时，它们似乎与某个 afwin.h 相关联。

我说的是一些变量/类/标识，它们是：

*   对话框
*   LPCSTR
*   CWnd

当尝试将 afwin.h 包含到我的项目中时，构建仍然无法识别它们。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T14:08:31.357

这是指MFC（Microsoft Foundation Classes），它是一个OO-Framework，是Win32-API之上的一个集合。如果您使用 Visual Studio Express，您将无法使用它。

参见[维基百科](http://en.wikipedia.org/wiki/Microsoft_Foundation_Class_Library)。

# android - Android 辅助显示 - 跨活动调用的持久性

> ID：15091067
> 
> 赞同：6
> 
> 时间：2013-02-26T14:02:27.613
> 
> 标签：android, multithreading, android-activity, hdmi

我正在使用 Android `MediaRouter`(API 16) 和`Presentation`(API 17) 类来生成和管理辅助显示器。我按照[ApiDemos](http://developer.android.com/reference/android/app/Presentation.html)中的示例创建了独特的非镜像输出，到目前为止它工作正常（使用通过 HDMI 电缆连接到 HDTV 的 Nexus 10 进行测试）。

现在，我有一种情况，我希望在其中创建的 Presentation 对象`Activity X`继续在辅助显示器上运行，即使`Activity X`调用另一个`Activity Y`. 在这种情况下，`Activity X`仍然在堆栈上，但`Activity Y`现在在它的顶部。

问题是`Activity Y`启动时，物理辅助显示器会恢复为镜像。当我 exit时， Presentation`Activity Y`的内容会返回（因为我从未调用过它）。`Activity X's``dismiss()`

所以问题是：**即使从属活动正在本地设备上运行，我如何才能将演示文稿附加到在该显示器上运行的辅助显示器？**

**更新：**我想到的一种方法是`Presentation`从后台线程实例化对象；那么随后创建另一个`Activity`不应干扰后台线程写入其`Presentation`对象的内容。但我不确定这是否可行，因为通常不允许从后台线程更新 UI。

如果可能，另一种方法是禁用下属显示器使用辅助显示器，从而防止它在新显示器变为活动状态`Activity`时将辅助显示器恢复为镜像。`Activity`但我也没有找到办法做到这一点。再次感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T15:50:14.500

我实现了@CommonsWare 建议的一种方法（Mark Allison 在[他的博客](http://blog.stylingandroid.com/archives/1456#comment-3733)上独立回答了我的问题）。感谢您的建议！

回顾一下，**问题**是我无法在`Activity`本地设备上的调用中保持第二个屏幕演示在后台运行。这是因为`Presentation`该类是作为 的子类实现的`Dialog`，因此与`Activity`实例相关联。所以当一个新的`Activity`启动时，第二个屏幕回到镜像（而不是显示我专门为它生成的其他内容）。

**解决方案**是将所有“从属”重构`Activities`为`Fragments`原始`Activity`（即启动第二个屏幕的那个）。然后，我没有调用`startActivity()`，而是使用 开始/停止新`Fragments`的`FragmentTransactions`。最终效果是启动 Presentation 的 Activity 仍在运行，因此当新的 Activity 启动时，辅助显示不再中断。

由于顶层`Activity`（开始第二个屏幕）实际上是`SherlockFragmentActivity`使用 a`ViewPager`和的事实，我的情况变得更加复杂`FragmentStatePagerAdapter`——所以我不得不将所有这些都塞进一个`Fragment`. 它还需要对`ActionBar`选项卡、菜单项和主页图标进行显式管理。

总的来说，我认为代码不太透明......但它有效！

**注意：**谷歌已经实现了辅助屏幕界面，这很好。但我不确定他们为什么要这样做。如果他们提供一个更通用的解决方案，可以很容易地在后台运行，即不管设备上的前台如何，而不是把`Presentation`类硬塞进`Dialog`中，那就太好了`Activities`。如上所述，这样的解决方案可以让我免于进行大量代码重构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-21T20:14:36.153

把这个问题从死里复活，愿意及时帮助有同样问题的人，

我最近遇到了一个更深层次但类似的问题：我必须在系统的任何地方显示演示文稿（我使用嵌入式 android），并且在主屏幕上可以使用任何应用程序。

我首先想到的是创建一个服务来管理演示文稿的显示，并在应用程序启动时进行初始化。但问题是我无法显示演示文稿，因为正如您所提到的，它继承自对话框，并且在构建对话框时调用*getApplicationContext()时发生了同样的问题。*

我的解决方案是：有一个名为[TYPE_SYSTEM_ALERT](http://developer.android.com/intl/pt-br/reference/android/view/WindowManager.LayoutParams.html#TYPE_SYSTEM_ALERT)的 WindowManager.LayoutParam用于显示警报，例如低电量警报对话框。使用此属性，您可以从服务创建 Dialog 并正确显示它，因为 Presentation 类是 Dialog 的子级，只需设置此属性即可使其工作。

魔法发生在这里：

```
 WindowManager.LayoutParams l = mPresentation.getWindow()
                    .getAttributes();
 l.type = WindowManager.LayoutParams.TYPE_SYSTEM_ALERT;
 mPresentation.show(); 
```

只是提醒一下，为了实现这一点，您的应用程序 XML 应该具有 SYSTEM_ALERT_WINDOW 权限。

```
<uses-permission android:name="android.permission.SYSTEM_ALERT_WINDOW" /> 
```

我认为这也应该解决您的问题，但它有点微妙，您需要适当的处理以在需要时立即停止演示。

# backbone.js - 获取后检索集合的内容

> ID：15091068
> 
> 赞同：0
> 
> 时间：2013-02-26T14:02:31.390
> 
> 标签：backbone.js, fetch

我正在尝试从集合中的本地存储中检索我的模型。我进入“成功”状态，但有时我的收藏仍然是空的。我认为“成功”意味着收藏品很好。

```
 var self = this;
    window.rooms= new Rooms();
    window.rooms.localStorage = new Backbone.LocalStorage("rooms-backbone");
    window.rooms.fetch({
        success: function(model, response, options) {
            rooms.each(function(room){
                this.template = _.template(tpl.get('RoomView'));
                $(self.el).append(this.template(room.toJSON()));
                console.log(rooms.toJSON());

                console.log(model);
                console.log(response);
                console.log(options);
            });
        }
    }); 
```

一旦我确定收藏已填满，我该如何填充我的 UI？提前谢谢

# php - 转换特殊字符，如花式引号

> ID：15091070
> 
> 赞同：2
> 
> 时间：2013-02-26T14:02:37.290
> 
> 标签：php, javascript, utf-8

我在用户输入花哨的引号时遇到问题。当他们进入数据库时​​（在被 php 序列化之后），他们是像â€这样的坏字符。

这一行解决了花哨的引号问题，但我假设还有其他字符也会导致问题，所以我想要一个更通用/整体的问题修复。

```
var copy = $('#Copy').val().replace(/[\u2018\u2019]/g, "'").replace(/[\u201C\u201D]/g, '"'); 
```

该行将它们替换为标准版本。html 版本将不起作用。

使用 javascript 函数 escape() 不起作用，因为它替换了验证失败的空格。

页面设置为 utf-8，meta charset="utf-8"

由于最终数据的复杂性，我宁愿在 javascript 中处理这个，而不是在 PHP 中。但如果我必须在 PHP 端处理它，那也可以。

# asp.net-mvc - 如何使用“包含”方法模拟 EF 实体

> ID：15091073
> 
> 赞同：2
> 
> 时间：2013-02-26T14:02:42.550
> 
> 标签：asp.net-mvc, entity-framework, unit-testing, mocking

我的存储库层方法通过以下方式返回“abc”对象

```
return this.context.abc.Include(x => x.xyz); 
```

返回类型是`abc`

我想模拟这个对象，以便它也包含在内`xyz`。

```
private MockDbSet<abc> MockAbc()
{
    return new MockDbSet<abc>
    {
        Builder<abc>.CreateNew().Build(), 
        Builder<abc>.CreateNew().Build(), 
        Builder<abc>.CreateNew().Build(), 
        Builder<abc>.CreateNew().Build(),
    };
} 
```

我如何`xyz`在嘲笑它时包含它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:26:26.377

模拟实体框架不是很容易，你有没有研究过像[Effort](http://effort.codeplex.com/wikipage?title=Tutorials&referringTitle=Home)这样的工具？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:02:36.610

不是您要寻找的答案，但 Entity Framework 可不是开玩笑的，而且您总是会以“泄漏抽象”告终。不要这样做。

我认为您的 EF 查询应该包装在可以**模拟输出**的 IService 层中。

# asp.net - ASP.NET 服务器缓存

> ID：15091074
> 
> 赞同：0
> 
> 时间：2013-02-26T14:02:43.187
> 
> 标签：asp.net, .net, caching, memory

我有一个在 windows server 2008 r2 上运行的 web 应用程序。其中一个页面在首次加载时处理时间过长。大约需要 15 秒，之后几乎是瞬间。发生的情况是 w3wp.exe 进程在这段时间内从 200 MB 以下的 RAM 跳转到 700 MB 的 RAM。没关系，页面很大，需要这么多内存。在这 15 秒之后，它切换回大约 200 MB 的 RAM，如果有人访问该页面，它几乎会立即呈现。无论是谁请求它，它都是第一次呈现。现在经过一段时间（如果不是几十分钟的话，几分钟），当有人再次请求该页面时，它会做同样的事情 - 处理 15 秒并跳转到 700 MB 的 RAM。

我想以某种方式保留 700 MB 的缓存，这样它就不会过期。即使在它回落到 200 MB 的 RAM 之后，页面也会立即加载，但我的猜测是，这就是为什么在更长的时间后它“过期”并且必须再次呈现它的原因。我已经阅读了@outputcache，但我不确定这是我需要的。并且有[多种类型的缓存](http://msdn.microsoft.com/en-us/library/ms178597%28v=vs.100%29.aspx)。有人能指出我正确的方向吗？我不担心内存消耗或其他任何事情，我只是不希望用户等待 15 秒来加载它，即使它不经常发生。谢谢！

PS：在 ASP.NET 4.0 下用 C# 编写的应用程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:37:06.840

您的页面在应用程序池启动后第一次被调用时被编译（[http://msdn.microsoft.com/en-us/library/ms366723(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms366723(v=vs.100).aspx)）。

中间应用程序池在关闭之前的默认超时时间为 20 分钟：[http ://technet.microsoft.com/en-us/library/cc771956(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc771956(v=ws.10).aspx)

如果在应用程序池关闭后发出新请求，则需要重新启动应用程序池并重新编译您的页面。

除了改进应用程序中的缓存之外，您还可以做两件事：

*   增加您的应用程序池超时
*   预编译您的 Web 应用程序：http: [//msdn.microsoft.com/en-us/library/bb398860 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/bb398860(v=vs.100).aspx)

# eclipse - 从 PG build 构建的应用程序中的性能和触摸响应性

> ID：15091082
> 
> 赞同：0
> 
> 时间：2013-02-26T14:03:05.353
> 
> 标签：eclipse, cordova, phonegap-build

在尝试 Phonegap Build 之前，我正在 Eclipse 上构建应用程序。但是当我使用本地 PG 2.X 库构建应用程序 **和**使用 PGBuild 2.X 构建的相同应用程序时......我看到在 Phonegap Build apk 文件中的触摸和滚动性能非常好。这是为什么？PG 人是否只在 PG Build 中为自己保留一些 cookie..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T04:55:24.667

we built a native application on phonegap native. at it ran like a charm. No performance issues with touch and feel

# html - 如何使用代码在 IE 中允许活动组件

> ID：15091089
> 
> 赞同：0
> 
> 时间：2013-02-26T14:03:28.020
> 
> 标签：html, internet-explorer

我们必须在我们的网站上链接一个视频，我发现 IE6 只支持 .swf 格式的视频。但是每次我打开网页时 IE 都会提示允许活动组件。我发现在工具->高级->安全中有一个安全选项。但是有没有使用 html 代码来做到这一点？或者有没有其他方法可以在IE6支持的网站上发布视频？这是我们的html代码

```
<!DOCTYPE html>
<html>
<body>
<h2>Click the Link to Play the Object</h2>
<a href="file:///D:\desktop\BS Demo.swf">Play a video file</a> 
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:09:04.433

这是一个用户控制的设置，*故意*对开发人员隐藏，这样用户（或管理员）可以阻止活动组件执行，无论网络作者想要他们的内容是什么。恐怕无法从代码中控制它！

还有其他视频格式：Windows Media 格式 (.wmv) 默认在 Windows 上可用，但也有 QuickTime、SilverLight ……以及一大堆不太流行的格式。但这些都是活动组件，因此都将受到相同的用户选择加入，具体取决于用户机器的配置方式。

# .net - 更改 MVVM 中的视图

> ID：15091090
> 
> 赞同：1
> 
> 时间：2013-02-26T14:03:37.243
> 
> 标签：.net, mvvm

如果我的 MainWindow 有以下代码：

```
<Window x:Class="DaveMVVM.View.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:viewModel ="clr-namespace:DaveMVVM.ViewModel"
        xmlns:view="clr-namespace:DaveMVVM.View"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Grid.Resources>
            <viewModel:MainWindowViewModel x:Key="Vm" />
        </Grid.Resources>        
        <view:MyFirstView />        
    </Grid>   
</Window> 
```

那么我可以假设我不能从 MyFirstView 更改视图...例如，我希望我的 MainWindow 只是一个实际上只承载 的框架`Menu`，并且取决于他们从中选择的选项`Menu`将取决于 View 是什么显示。

所以，我的两个问题是

1）我是否正确地认为上面的例子不起作用，因为视图是硬编码的。
2) 我是否必须使用绑定到我的 MainWindowViewModel 的 DataTemplate，然后为每个 View 创建一个 DataTemplate？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:09:09.220

你可以这样做：

您的 MainWindowViewModel 公开了一个属性`CurrentContent`。它返回所有视图模型的通用基本类型：

```
public ViewModelBase CurrentContent
{
    get { return _currentContent; }
    private set
    {
        if(value == _currentContent)
            return;

        _currentContent = value;
        RaisePropertyChanged("CurrentContent");
    }
} 
```

根据用户的选择，您可以将该属性设置为相应的视图模型。

您的主视图将包含`ContentControl`绑定到此属性的 a：

```
<ContentControl Content="{Binding CurrentContent}" /> 
```

最后，您的视图 - 或单独的资源字典 - 必须包含每个可能的内容视图模型的数据模板：

```
<DataTemplate DataType="{x:Type MyFirstViewModel}">
    <view:MyFirstView /> 
</DataTemplate>
<DataTemplate DataType="{x:Type MySecondViewModel}">
    <view:MySecondView /> 
</DataTemplate> 
```

# c# - 从列表中删除空字节

> ID：15091094
> 
> 赞同：2
> 
> 时间：2013-02-26T14:03:53.207
> 
> 标签：c#, list, bytearray

如何从 a 中删除空字节`List<byte>`？

例如，我得到了一个大小为`[5]`.

```
[0] = 5
[1] = 3
[2] = 0
[3] = 0
[4] = 17 
```

在这个例子中，我想`byte`用索引删除：2 和 3。

列表中的项目每秒都在变化。因此，下次列表可能会填充以下内容：

```
[0] = 0
[1] = 2
[2] = 3
[3] = 4
[4] = 0 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T14:05:30.133

有点像

```
myList.RemoveAll(b => b == 0); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-26T14:06:05.697

```
bytes.RemoveAll(x => x == 0) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T14:09:21.093

使用**[List.RemoveAll()](http://msdn.microsoft.com/en-us/library/wdka673a.aspx)**方法怎么样？

> 删除与指定谓词定义的条件匹配的所有元素。

```
YourList.RemoveAll(n => n == 0); 
```

例如;

```
List<int> list = new List<int>(){5, 3, 0, 0, 17};
list.RemoveAll(n => n == 0);

foreach (var i in list)
{
    Console.WriteLine(i);
} 
```

输出将是；

```
5
3
17 
```

这是一个**[演示](http://ideone.com/MVyNOQ)**。

# cvs - 如何修复我的 CVS 提交？

> ID：15091096
> 
> 赞同：2
> 
> 时间：2013-02-26T14:03:57.990
> 
> 标签：cvs, myeclipse

这是我尝试将一些代码提交到 CVS 服务器时收到的错误消息的要点。

服务器在执行“cvs commit”命令时报告错误。[此处的项目名称]：cvs [提交中止]：在[此处的类的URI]中找不到所需的1.6版，v

如何解决此问题以识别新代码？我可以在 MyEclipse Blue 中设置回版本号吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-25T21:45:49.520

将文件移开，更新以获取 cvs 版本，将文件放回并提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-05T09:39:06.487

此错误是由于本地和 CVS 存储库之间的版本控制问题造成的。为了解决这个问题，，

1.  备份您的文件。
2.  从 cvs 替换您的文件。（右键单击 --> 替换为 --> 最新来自 Head）。它将强制您的文件替换为 cvs 版本。
3.  将您的更改与 WinMerge 等任何其他工具合并。
4.  立即提交您的更改

# c# - 动画扩展器 - 仅在一个方向上动画

> ID：15091097
> 
> 赞同：0
> 
> 时间：2013-02-26T14:03:59.737
> 
> 标签：c#, .net, wpf, xaml

谁能告诉我这个模板可能有什么问题。扩展器仅在展开时动画，而不是折叠。

```
 <ControlTemplate x:Key="ExpanderExTemplate" TargetType="{x:Type Expander}" >
        <StackPanel Margin="0">
            <Border BorderThickness="1" >
                <Expander Name="expanderEx" Header="{TemplateBinding Header}" IsExpanded="{TemplateBinding IsExpanded}" BorderThickness="0">
                    <Border BorderThickness="0" >
                        <ContentPresenter x:Name="ExpandSite" Margin="5,5,5,5" >
                            <ContentPresenter.LayoutTransform>
                                <ScaleTransform x:Name="scaleTransform" ScaleX="1" ScaleY="1" />
                            </ContentPresenter.LayoutTransform>
                        </ContentPresenter>
                    </Border>
                    <Expander.Triggers>
                        <EventTrigger RoutedEvent="Expander.Expanded">
                            <EventTrigger.Actions>
                                <BeginStoryboard>
                                    <Storyboard >
                                        <DoubleAnimation From="0" To="1" Duration="0:0:0.25" 
                                                         Storyboard.TargetName="ExpandSite" 
                                                         Storyboard.TargetProperty="(FrameworkElement.LayoutTransform).(ScaleTransform.ScaleY)" />
                                    </Storyboard>
                                </BeginStoryboard>
                            </EventTrigger.Actions>
                        </EventTrigger>
                        <EventTrigger RoutedEvent="Expander.Collapsed">
                            <EventTrigger.Actions>
                                <BeginStoryboard>
                                    <Storyboard>
                                        <DoubleAnimation From="1" To="0" Duration="0:0:0.25" 
                                                         Storyboard.TargetName="ExpandSite"
                                                         Storyboard.TargetProperty="(FrameworkElement.LayoutTransform).(ScaleTransform.ScaleY)" />
                                    </Storyboard>
                                </BeginStoryboard>
                            </EventTrigger.Actions>
                        </EventTrigger>
                    </Expander.Triggers>
                </Expander>
            </Border>
        </StackPanel>
    </ControlTemplate> 
```

# eclipse - 在 Eclipse 中运行 JUnit 测试时不要执行某些代码

> ID：15091099
> 
> 赞同：0
> 
> 时间：2013-02-26T14:04:10.410
> 
> 标签：eclipse, tomcat, junit

我在 tomcat 容器中开发应用程序时使用 Eclipse 和 JUnit 4。容器管理与我们的 Oracle 数据库的连接。

在使用 JUnit 进行测试时，我遇到了以下问题： 在测试主题的构造函数中，有如下内容：

```
public Subject() {
    // stuff
    FancySingleton.getInstance().getFancy("stuff");
} 
```

不幸的是，该方法`getFancy()`尝试执行它不能执行的查询，因为 JUnit 不在 tomcat 容器中运行并最终陷入无限循环。

我的第一个想法是超越代码。转念一想，这似乎是个坏主意。我可能会忘记在提交之前删除评论。

我的第二个想法是突出显示 eclipse 的代码，这样它就不会在运行 JUnit 测试时执行它。但是需要eclipse支持这样的方法。

最后我想到了预处理器指令之类的东西。

你有什么想法？只是将布尔值传递给构造函数并不是处理这种情况的一种干净方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T14:08:46.033

你要么模拟 FancySingleton，要么做对并注入一个实现。

# xcode - 混淆如何使 osx 应用程序向后兼容以及如何测试它们

> ID：15091105
> 
> 赞同：20
> 
> 时间：2013-02-26T14:04:38.967
> 
> 标签：xcode, cocoa, sdk, backwards-compatibility

阅读苹果 SDK 指南 [https://developer.apple.com/library/mac/#documentation/developertools/conceptual/cross_development/Overview/overview.html](https://developer.apple.com/library/mac/#documentation/developertools/conceptual/cross_development/Overview/overview.html)

我仍然对如何使 mac 应用程序向后兼容以及如何正确测试它们感到困惑

我有一个应用程序，我在 Mountain Lion 10.8 上运行并测试它没有任何问题，但是我想让这个应用程序向后兼容，以便其他用户可以在 mac 10.6 - 10.7 机器上运行它。

1.  我有一个苹果开发者 ID，我可以下载 10.7 和 10.6 的旧版本，但问题是，我有一台 2011 版的 macbook air，目前运行的是 10.8，这是我唯一的苹果机。我可以使用 vmware 或 parallels 测试 10.7 和 10.6 吗？

2.  在我的项目设置中，我将目标部署设置为 10.6（因为我希望 10.6 用户运行我的应用程序），但我应该将我的 SDK 设置为 10.8 还是 10.7？如果我将 SDK 设置为 10.8，但将目标部署设置为 10.6，如​​果我修复了所有 xcode 警告，它会在 10.6 上成功运行吗？

3.  从 SDK 下拉菜单中，我只能设置为 10.8 或 10.7，但缺少 10.6，我该如何解决？

提前致谢

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-02-26T15:20:04.717

我在 10.8 机器上开发并支持回到 10.5。就在几个月前，我们放弃了 10.4 PPC 支持，而我仍在清理一些 10.2 特定的代码。这可能会有点咆哮，但我已经做了很长时间的旧版本。我对此事有一些看法。

*   不管 Apple 在他们的文档中说什么，如果您想支持 10.6，那么请使用 10.6 SDK 构建。不要依赖分布目标。
    *   我与 Xcode 工程师进行了讨论，虽然他们坚持 Apple 的党派路线，即您应该始终使用最新的 SDK 构建，但他们也承认这样做通常是疯狂的。如果您针对 10.8 SDK 构建并将您的部署目标标记为 10.6，[您将不会收到使用 10.6 上不存在](http://openradar.appspot.com/radar?id=1850406)的方法的警告。你会发现你使用了一个不存在的方法的唯一方法是它在 10.6 上运行时可能会给你带来奇怪的错误。这太疯狂了。
    *   请记住，当您发送未知选择器时，OS X 不会崩溃。它只是中止当前的运行循环。因此，这些漏洞比在 iOS 上*更难*追踪，导致应用程序崩溃。
    *   当然，你可以做[弱链接](https://developer.apple.com/library/mac/#documentation/DeveloperTools/Conceptual/cross_development/Using/using.html#//apple_ref/doc/uid/20002000-SW6)。谈论危险......是的，有几次这很有用，但如果你没有正确执行，编译器不会给你警告。如果我要像这样进行弱链接，我会采用另一种方式，链接旧 SDK 并将新函数的原型复制到我的实现中。这样我就有了我认为我要弱链接的每个函数的文档。
*   下载旧的 SDK 并将它们符号链接到您的 Xcode 发行版中。
    *   嫉妒地保护他们。每次升级 Xcode 时，Apple 都会尝试删除它们。制作自己的副本并将它们粘贴到 /SDK 或远离 Xcode 的其他地方。我提供了一个名为[fix-xcode](https://gist.github.com/rnapier/3370649)的脚本来自动管理符号链接。我对 Apple 坚持删除我的旧 SDK 感到不满吗？我是。
*   您可以合法地在 VM 中运行 10.6 Server。您可以合法地在 VM 中运行 10.7+ 桌面。这些是测试代码的好方法。
    *   或者你可以像我一样，拥有一小堆旧的 MacBook，每台都有两到三个分区，你一直在重启。
    *   现在 10.7 来自 App Store，[制作 VM 有点困难](http://kb.vmware.com/selfservice/microsites/search.do?language=en_US&cmd=displayKC&externalId=2005334)。我强烈建议您在安装后立即对您的映像进行快照，并对其进行干净的备份。当您需要回到“原始”机器时，您会希望能够不时克隆该图像。
    *   养成在 SDK 发布时将其保存的习惯。10.8 总有一天会过时。您不妨现在就制作一份副本，这很容易。
*   无论您是否支持单独的 dot 版本，保留各个 dot 版本的升级包都会非常有帮助。当您遇到运行非当前版本的客户时，很高兴能够检查“不可重现”的错误实际上是否可以在他们的特定版本上轻松重现。这是否值得在很大程度上取决于您的产品和客户。当 10.4.11 在 dot 发布期间对 WebKit 进行重大更改时，这对我来说是一个救命稻草……
*   投资一个小型 NAS 或一个大型外部 USB 驱动器（尽管我在广泛使用时遇到了失败的问题，所以我更喜欢 RAID）。你需要空间。你想要持有大量的虚拟机和大量的 SDK，有时甚至是旧版本的 Xcode。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-09T09:23:39.143

添加到 Rob Napier 的深入[回答](https://stackoverflow.com/a/15092753/2947502)：

要使用旧的 SDK，请将 SDK（或符号链接）放在这里：

```
/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs 
```

使用 XCode 7.3 或更高版本，您需要打开此文件并更改“MinimumSDKVersion”（否则 XCode 将拒绝使用旧 SDK）：

```
/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Info.plist 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T14:07:22.987

1.  您可以在一台机器上安装多个版本的 Mac OS，并在每个版本之间启动。
2.  SDK 应该是最新的 (10.8)。
3.  见 2。

我考虑过的一种替代方法（我在同一条船上）是使用旧 PC 创建一个 Snow Leopard Hackintosh，然后在我的 MBP 上安装 Lion 和 Mountain Lion。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T14:06:36.617

您需要进行以下设置：

1.将 Base SDK 设置为 Mac 的当前版本（例如 10.7）

2.将部署SDK设置为旧版本（ex.1.4）

# android - 字符串重音数据库编码规范

> ID：15091109
> 
> 赞同：0
> 
> 时间：2013-02-26T14:04:42.767
> 
> 标签：android, android-layout, android-sqlite

我已将字符串存储在 SQL 数据库（android）中：即：

```
 CREATE TABLE table ( type_t TEXT, description TEXT);
INSERT INTO fiche111 VALUES('p','Peut être allumée par la chaleur par des étincelles'); 
```

……

问题是当一个恢复 le 字符串时，所有的重音 a 都被 en 奇怪的字符 [�] 替换为 ? 里面。

我该如何解决这个问题并检索原始字符串的正确重音？

提前谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:14:04.267

确保您的 sqlite db 编码设置为 UTF-8

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T14:36:25.720

有趣的“？”字符表明该字符的格式无法理解，因为您使用的整个文本编码可能是错误的。

Sqlite 使用[UTF-8 和 UTF-16](http://www.sqlite.org/version3.html)（在页面上向下滚动一半），因此在将文本插入表格之前，请确保您插入的源文本也采用这种格式。当您从表中检索文本时，请确保视图（或您正在使用的其他目标）也接受该格式的文本。如果目的地以某种方式不可能接受 UTF-8（或 16），那么您需要将其转换为目的地首先能够理解的格式。

# ruby-on-rails - OmniauthCallbacksController 期间约束失败

> ID：15091110
> 
> 赞同：0
> 
> 时间：2013-02-26T14:04:44.417
> 
> 标签：ruby-on-rails, ruby, devise, omniauth, constraintexception

我对 Ruby on Rails 很陌生，所以请多多包涵。

我希望用户能够通过 Facebook 登录。我遵循了 railscast [#265 Devise and OmniAuth (revised)](http://railscasts.com/episodes/235-devise-and-omniauth-revised)。在 railscast 中，用户在登录 Facebook 之前会被要求提供电子邮件地址。我希望用户能够通过 Facebook 登录，而无需事先提供电子邮件地址。

我使用的是：Devise 和 Omniauth-facebook gems

我的期望：用户点击链接，通过 Facebook 登录，Facebook 返回电子邮件、姓名、uid，我的应用程序将其保存到数据库并创建用户。

我得到什么：错误消息`ActiveRecord::StatementInvalid in OmniauthCallbacksController#facebook`

```
SQLite3::ConstraintException: constraint failed: INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "name", "provider", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "uid", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
```

这是我的 user.rb 模型：

```
class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable, :omniauthable,
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me
  # attr_accessible :title, :body

  # Nodig als :validatable uit is
  #validates_presence_of   :email, :if => :email_required?
  #validates_uniqueness_of :email, :allow_blank => true, :if => :email_changed?
  #validates_format_of     :email, :with  => Devise.email_regexp, :allow_blank => true, :if => :email_changed?
  #
  #validates_presence_of     :password, :if => :password_required?
  #validates_confirmation_of :password, :if => :password_required?
  #validates_length_of       :password, :within => Devise.password_length, :allow_blank => true

  def self.from_omniauth(auth)
    where(auth.slice(:provider, :uid)).first_or_create do |user|
      user.provider = auth.provider
      user.uid = auth.uid
      user.email = auth.email
      user.name = auth.info.name
    end
  end

  def self.new_with_session(params, session)
    if session["devise.user_attributes"]
      new(session["devise.user_attributes"], without_protection: true) do |user|
        user.attributes = params
        user.valid?
      end
    else
      super
    end
  end

  def email_required?
    provider == :facebook
  end

  def password_required?
    super && provider.blank?
  end

  def update_with_password(params, *options)
    if encrypted_password.blank?
      update_attributes(params, *options)
    else
      super
    end
  end

end 
```

这是我向用户添加 OmniAuth 的迁移（用户已经有电子邮件）

```
class AddOmniauthToUsers < ActiveRecord::Migration
  def change
    add_column :users, :provider, :string
    add_column :users, :uid, :string
    add_column :users, :name, :string
  end
end 
```

这是我的 OmniAuth 回调控制器：

```
class OmniauthCallbacksController < Devise::OmniauthCallbacksController
  def all
      user = User.from_omniauth(request.env["omniauth.auth"])
      if user.persisted?
        flash.notice = "Loged in!"
        sign_in_and_redirect user
      else
        session["devise.user_attributes"] = user.attributes
        redirect_to new_user_registration_url
      end
    end
    alias_method :facebook, :all  
end 
```

提前致谢

编辑：堆栈跟踪：

```
app/models/user.rb:23:in `from_omniauth'
app/controllers/omniauth_callbacks_controller.rb:3:in `all' 
```

编辑：服务器日志奇怪的是。当我打印时，`auth`我可以在服务器日志中看到名称、电子邮件、提供商和 uid。但是，这会出现：

```
INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "name", "provider", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "uid", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["created_at", Tue, 26 Feb 2013 17:20:23 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", nil], ["encrypted_password", ""], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["name", nil], ["provider", "facebook"], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["uid", "XXXXX"], ["updated_at", Tue, 26 Feb 2013 17:20:23 UTC +00:00]]
SQLite3::ConstraintException: constraint failed: INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "name", "provider", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "uid", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
```

例如名称，电子邮件，`nil`但提供者和 uid（现在为 XXXXX）已填写。我在用户模型中添加了姓名和电子邮件。也许这里有问题？这可能有帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T18:44:57.970

每当我输入`p auth.info.email`（对于您需要添加的许多东西`.info`）时，服务器日志都会显示电子邮件地址。

我认为这与我更改了用户模型有关：

```
 def self.from_omniauth(auth)
    where(auth.slice(:provider, :uid)).first_or_initialize.tap do |user|
      user.provider = auth.provider
      user.uid = auth.uid
      user.email = auth.info.email
      user.name = auth.info.name
      user.save!
    end
  end 
```

现在错误消失了。我添加了`user.save!`我更改为`auth.info.email`并替换`first_or_create`为`first_or_initialize.tap`

因此，当我查看控制台 ( `User.all`) 时，电子邮件、姓名、uid 和提供者都在数据库中。

显然现在一切正常。坦克伤害你的帮助！

ps：服务器日志还是打了问号，但确实把数据保存在了记录中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:49:08.567

我猜你要么尝试创建一个没有所有必填字段的用户，要么你试图创建一个已经存在的用户（我怀疑电子邮件存在唯一性约束）。

消除后者；从 users 表中删除所有用户。

测试前者；尝试使用与您提供给该方法`User.create(some_params)`的参数相同的参数创建用户。`from_omniauth`要弄清楚这些，请使用 pry 之类的方法[或](https://github.com/pry/pry)简单地执行以下操作：

```
def self.from_omniauth(auth)
    p auth # Add this line and watch the logs.
    ....
end 
```

也可能有帮助的是查看您的`db/schema.rb`（或`db/structure.sql`运行后`rake db:structure:dump`）并查看是否有任何 NOT NULL 或 UNIQUE 约束。

# python - 使用 h5py 访问数据范围

> ID：15091112
> 
> 赞同：1
> 
> 时间：2013-02-26T14:04:51.557
> 
> 标签：python, h5py

我有一个包含 62 个不同属性的 h5 文件。我想访问他们每个人的数据范围。

在这里解释更多我在做什么

```
import h5py 
the_file =  h5py.File("myfile.h5","r")
data = the_file["data"]
att = data.keys() 
```

前面的代码给了我一个属性列表“U”，“T”，“H”，......等

假设我想知道“U”的最小值和最大值是多少。我怎样才能做到这一点 ？

这是运行“h5dump -H”的输出

```
HDF5 "myfile.h5" {
GROUP "/" {
   GROUP "data" {
      ATTRIBUTE "datafield_names" {
         DATATYPE  H5T_STRING {
               STRSIZE 8;
               STRPAD H5T_STR_SPACEPAD;
               CSET H5T_CSET_ASCII;
               CTYPE H5T_C_S1;
            }
         DATASPACE  SIMPLE { ( 62 ) / ( 62 ) }
      }
      ATTRIBUTE "dimensions" {
         DATATYPE  H5T_STD_I32BE
         DATASPACE  SIMPLE { ( 4 ) / ( 4 ) }
      }
      ATTRIBUTE "time_variables" {
         DATATYPE  H5T_IEEE_F64BE
         DATASPACE  SIMPLE { ( 2 ) / ( 2 ) }
      }
      DATASET "Temperature" {
         DATATYPE  H5T_IEEE_F64BE
         DATASPACE  SIMPLE { ( 256, 512, 1024 ) / ( 256, 512, 1024 ) }
      } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-26T14:28:29.617

这可能是术语上的差异，但 hdf5 属性是通过`attrs`Dataset 对象的属性访问的。我称你有变量或数据集。反正...

我根据您的描述猜测属性只是数组，您应该能够执行以下操作来获取每个属性的数据，然后像任何 numpy 数组一样计算最小值和最大值：

```
attr_data = data["U"][:] # gets a copy of the array
min = attr_data.min()
max = attr_data.max() 
```

因此，如果您想要每个属性的最小值/最大值，您可以对属性名称进行 for 循环，或者您可以使用

```
for attr_name,attr_value in data.items():
    min = attr_value[:].min() 
```

**编辑以回答您的第一条评论：**

h5py 的对象可以*像*python 字典一样使用。因此，当您使用“keys()”时，您实际上并没有获取数据，而是获取了该数据的*名称*（或密钥）。例如，如果您运行，`the_file.keys()`您将获得该 hdf5 文件根路径中每个 hdf5 数据集的列表。如果您继续沿着一条路径前进，您最终会得到包含实际二进制数据的数据集。因此，例如，您可以从（首先在解释器中）开始：

```
the_file = h5py.File("myfile.h5","r")
print the_file.keys()
# this will result in a list of keys maybe ["raw_data","meta_data"] or something
print the_file["raw_data"].keys()
# this will result in another list of keys maybe ["temperature","humidity"]
# eventually you'll get to the dataset that actually has the data or attributes you are looking for
# think of this process as going through a directory structure or a path to get to a file (or a dataset/variable in this case)
the_data_var = the_file["raw_data"]["temperature"]
the_data_array = the_data_var[:]

print the_data_var.attrs.keys()
# this will result in a list of attribute names/keys
an_attr_of_the_data = data_var.attrs["measurement_time"][:]

# So now you have "the_data_array" which is a numpy array and "an_attr_of_the_data" which is whatever it happened to be
# you can get the min/max of the data by doing like before
print the_data_array.min()
print the_data_array.max() 
```

**编辑 2 - 为什么人们以这种方式格式化他们的 hdf 文件？它违背了目的。**

如果可能的话，我认为您可能必须与制作此文件的人交谈。如果你做到了，那么你就可以自己回答我的问题了。首先，您确定在您的原始示例中`data.keys()`返回了`"U","T",etc.`吗？除非 h5py 正在做一些神奇的事情，或者如果你没有提供 h5dump 的所有输出，那不可能是你的输出。我将解释 h5dump 告诉我的内容，但请尝试理解我在做什么，而不仅仅是复制并粘贴到您的终端中。

```
# Get a handle to the "data" Group
data = the_file["data"]
# As you can see from the dump this data group has 3 attributes and 1 dataset
# The name of the attributes are "datafield_names","dimensions","time_variables"
# This should result in a list of those names:
print data.attrs.keys()

# The name of the dataset is "Temperature" and should be the only item in the list returned by:
print data.keys() 
```

从 h5dump 中可以看出，有 62 个`datafield_names`（字符串）、4 个`dimensions`（我认为是 32 位整数）和 2 个`time_variables`（64 位浮点数）。它还告诉我这`Temperature`是一个 3 维数组，256 x 512 x 1024（64 位浮点数）。你看到我从哪里得到这些信息了吗？现在是困难的部分，您需要确定如何与阵列`datafield_names`匹配。`Temperature`这是由制作文件的人完成的，因此您必须弄清楚`Temperature`数组中每一行/列的含义。我的第一个猜测是`Temperature`数组中的每一行都是`datafield_names`，也许每次还有2个？但这不起作用，因为数组中的行太多。也许尺寸适合那里一些如何？最后，这里是您如何获取每条信息（从之前继续）：

```
# Get the temperature array (I can't remember if the 3 sets of colons is required, but try it and if not just use one)
temp_array = data["Temperature"][:,:,:]
# Get all of the datafield_names (list of strings of length 62)
datafields = data.attrs["datafield_names"][:]
# Get all of the dimensions (list of integers of length 4)
dims = data.attrs["dimensions"][:]
# Get all of the time variables (list of floats of length 2)
time_variables = data.attrs["time_variables"]

# If you want the min/max of the entire temperature array this should work:
print temp_array.min()
print temp_array.max()
# If you knew that row 0 of the array had the temperatures you wanted to analyze
# then this would work, but it all depends on how the creator organized the data/file:
print temp_array[0].min()
print temp_array[1].max() 
```

很抱歉，我无法提供更多帮助，但实际上没有文件并且不知道每个字段的含义，这就是我所能做的。尝试了解我是如何使用 h5py 来阅读信息的。尝试了解我如何将标头信息（h5dump 输出）转换为我可以实际用于 h5py 的信息。如果您知道数据在数组中的组织方式，您应该能够做您想做的事情。祝你好运，如果可以的话，我会提供更多帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T14:17:00.747

由于 h5py 数组与 numpy 数组密切相关，因此您可以使用 numpy.min 和 numpy.max 函数来执行此操作：

```
maxItem = numpy.max(data['U'][:]) # Find the max of item 'U'
minItem = numpy.min(data['H'][:]) # Find the min of item 'H' 
```

注意 ':'，需要将数据转换为 numpy 数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T14:17:07.227

您可以在 DataFrame 上调用[`min`](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.min.html)and （逐行）：[`max`](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.max.html)

```
In [1]: df = pd.DataFrame([[1, 6], [5, 2], [4, 3]], columns=list('UT'))

In [2]: df
Out[2]: 
   U  T
0  1  6
1  5  2
2  4  3

In [3]: df.min(0)
Out[3]: 
U    1
T    2

In [4]: df.max(0)
Out[4]: 
U    5
T    6 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T14:29:14.877

你的意思是`data.attrs`而不是`data`它本身？如果是这样的话，

```
import h5py

with h5py.File("myfile.h5", "w") as the_file:
    dset = the_file.create_dataset('MyDataset', (100, 100), 'i')
    dset.attrs['U'] = (0,1,2,3)
    dset.attrs['T'] = (2,3,4,5)    

with h5py.File("myfile.h5", "r") as the_file:
    data = the_file["MyDataset"]
    print({key:(min(value), max(value)) for key, value in data.attrs.items()}) 
```

产量

```
{u'U': (0, 3), u'T': (2, 5)} 
```

# ios - 链接时出现奇怪的错误：重复符号 _comparePutFoldersFirst

> ID：15091116
> 
> 赞同：0
> 
> 时间：2013-02-26T14:05:00.113
> 
> 标签：ios, objective-c, xcode, linker, clang

在我的项目中链接期间我有一个奇怪的行为。

问题是我有一个链接到我的项目的库，我目前正在将一些通用类从项目移动到库。

MyClass2 与 MyClass 基本相同，这意味着两个类中有一些属性名称相同，但类（和文件）的名称不同，所以我不知道为什么会发生链接错误。

确切的错误如下：

```
duplicate symbol _comparePutFoldersFirst in:
    /Users/User/Library/Developer/Xcode/DerivedData/MyApp-aqfmfwpjnumbrjdrdqwonfwvhzaz/Build/Intermediates/MyApp.build/Debug-iphonesimulator/aTarget.build/Objects-normal/i386/MyClass.o
    /Users/User/Documents/..[path]../MyFramework.framework/MyFramework(MyClass2.o)
ld: 1 duplicate symbol for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

注意事项： - 我不包括任何 .m 文件（显然，根据我的研究，这是一个常见错误） - 在这些文件中实现的类在两个文件中具有不同的名称 - 请注意，该库实际上是作为框架包装的，但这不是问题，因为我在图书馆工作了一段时间而没有遇到这个问题。

提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:22:17.267

如果它们是真实的属性，或者它们是真实的实例变量或正确声明的类变量，这不是问题。

但有时，当你没有太准确地工作时，这些变量可能真的是静态的，甚至是全局的。那就是当它们被简单地放在方法之间`@implementation`或方法体之间的开放空间中时。

确保在`{ ... }`以下`@implementation`语句中正确声明它们。我最近读到，您也可以在`@implementation`声明后使用 iVars 括号，但我从未尝试过。但是，如果没有这些括号，它们只是静态的，甚至是全局的。这意味着在两个类中声明的同一个变量实际上是一个重复的符号。

Quick&Dirty：只需重命名其中一个。正确地：重新构建你的代码。可以通过在 .h 文件中收集它们来完成，`@interface`并将它们括在括号中。

如果您不希望它们在 .h 文件中，则以空类别开始您的 .m 文件：

```
@interface myClass2 () {
   int localInstanceVar1;
   NSInteger *localInstanceOjbekct2;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T21:00:43.440

根据@Hermann 的评论，我发现了这个问题（实际上并不复杂：S）

我的代码在我的 .m 文件中定义了一个方法，如下所示：

```
NSInteger comparePutFoldersFirst(id aValue1, id aValue2, void *context) {...} 
```

这种方法显然会生成一个引起冲突的全局符号。

我正在使用该方法对数组进行排序，因此我将其更改为一个块，问题就消失了。

# java - 访问两个 Web 服务 HTTPS 和其他 HTTP 时出现代理问题

> ID：15091117
> 
> 赞同：0
> 
> 时间：2013-02-26T14:05:11.507
> 
> 标签：java, web-services, http, https, proxy

我有一个使用两个网络服务的网络应用程序

• 第一个 Web 服务通过 HHTPS 连接到外部 websserver

```
(https://abc.com/int/obj) 
```

• 第二个网络服务通过 HHTP 连接到内部网络服务器

```
`(http://10.14.250.69:7250/uiu/ohg) 
```

如果我使用

```
System.setProperty("https.proxyHost", "xxx.xxx.xx.xxx"); //proxy server
 System.setProperty("https.proxyPort", "3128");           //proxy port 
```

然后我的应用程序能够与外部网站成功连接并获取数据，但是当它调用第二个 Web 服务时，请求被路由到不应发生的代理服务器

当它连接到这个内部 Web 服务时，我想要的只是它应该直接调用它，而不是通过代理。我怎样才能做到这一点。当代理服务器调用内部 Web 服务时，我可以绕过代理服务器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:51:37.607

很高兴知道您正在使用 Axis WS 客户端。因此，您可以在单个 WS 客户端存根级别设置代理设置，而不是使用适用于这两个 Web 服务的系统属性吗？这是示例代码

```
MyServiceStub myService = new MyServiceStub("https://www.foo.com/abc/xyz.asmx");

HttpTransportProperties.ProxyProperties proxyProperties = new HttpTransportProperties.ProxyProperties();
proxyProperties.setDomain("mydomain");
proxyProperties.setProxyName("xx.xxx.xx.xxx");
proxyProperties.setProxyPort(80);
proxyProperties.setUserName("myusername");
proxyProperties.setPassWord("mypassword");
myService._getServiceClient().getOptions().setProperty(HTTPConstants.PROXY, proxyProperties); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T14:10:33.933

配置`http.nonProxyHosts`- 直接连接的主机或域列表，由“管道”字符分隔 | 通过添加`10.14.250.69`到列表中。

# gwt - 如何从 GWT UI 正确转发到 Spring 注销 URL？

> ID：15091122
> 
> 赞同：1
> 
> 时间：2013-02-26T14:05:34.260
> 
> 标签：gwt, spring-security, logout

除了其他一些东西，我还构建了一个结合 Spring Security 和 GWT 的小型示例应用程序。您可以在以下位置找到它：

[https://github.com/steinsag/gwt-maven-scala](https://github.com/steinsag/gwt-maven-scala)

登录和身份验证工作正常。在生成的 GWT 页面中，我插入了一个注销链接。它应该指向 Spring Security 注销链接。我使用了[以下 GWT 代码](https://github.com/steinsag/gwt-maven-scala/blob/master/web/src/main/java/de/hpfsc/web/parent.java#L158)：

```
Anchor logoutLink = new Anchor("Logout");
logoutLink.addClickHandler(new ClickHandler() {
  @Override
  public void onClick(ClickEvent event) {
    Window.Location.assign("j_spring_security_logout");
  }
}); 
```

如果用户单击该链接，则会话终止并且用户注销。但是，用户不会被转发到登录页面。我怎样才能做到这一点？据我所知，我无法在 j_spring_security_logout 之后将他转发到另一个 URL。

任何想法如何实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T15:49:15.407

您可以在 spring 安全配置中指定注销 url

```
<http auto-config='true'>
...
<logout logout-success-url="/login.jsp"/>
...
</http> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-10T07:15:57.817

尽管我在 j_spring_security_logout 页面上得到 404 并且在寻找解决方案上浪费了太多时间，但我遇到了类似的问题。想在这里分享，以防有人遇到类似问题。我不得不改变

```
Window.Location.assign("j_spring_security_logout"); 
```

到

```
Window.Location.replace(GWT.getHostPageBaseURL()+"j_spring_security_logout"); 
```

问题就解决了。

# build - Perforce 远程仓库

> ID：15091123
> 
> 赞同：0
> 
> 时间：2013-02-26T14:05:34.663
> 
> 标签：build, perforce, depot

我先说明情况。我有一个服务器“A”，我在其中提交我的代码的正式版本，还有一个机器“M”，我在其中生成每日构建，但有时我为我的客户生成特定版本，我没有将它们提交到服务器“A” . 所以我创建了另一个服务器“B”，程序员可以在其中提交它们。

现在我想在同一服务器“B”中重新组合特定版本和官方版本，并让机器“M”从该服务器获取所有代码源。

知道怎么做吗？

注意：有些人建议我使用 Remote Depot，但我不知道它有什么影响以及如何使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:48:48.397

这是开始学习远程仓库功能的好地方：[http ://www.perforce.com/perforce/doc.current/manuals/p4sag/03_superuser.html#1065679](http://www.perforce.com/perforce/doc.current/manuals/p4sag/03_superuser.html#1065679)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T15:58:20.810

远程仓库是从一台服务器到另一台服务器的单向数据管道。听起来将工作从 A 转移到 B 会很有效。

如果您想将所有数据保存在一台服务器上，您可以使用 Perforce 目录结构、分支和访问控制来组织和管理所有代码。这是一个需要设置的项目，但从长远来看可能是值得的。

# axwindowsmediaplayer - windows media player组件支持的文件格式

> ID：15091125
> 
> 赞同：0
> 
> 时间：2013-02-26T14:05:41.547
> 
> 标签：axwindowsmediaplayer

我正在用 c# 开发媒体播放器，我正在为此使用**windows 媒体播放器组件**。

这是我的代码

```
private void songList_SelectedIndexChanged(object sender, EventArgs e)
{
   axWindowsMediaPlayer1.URL = paths[songList.SelectedIndex];
} 
```

谁能告诉我这个组件支持的文件格式？
组件的*版本信息属性为'12.0.7600.16385'*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T14:25:28.967

有关支持的文件格式，请参阅[此 Microsoft 网站。](http://support.microsoft.com/kb/316992)列出了所有文件格式和兼容的 Windows 媒体播放器版本。

# iphone - 从字符串中获取 NSDate

> ID：15091128
> 
> 赞同：2
> 
> 时间：2013-02-26T14:06:01.020
> 
> 标签：iphone, ios, objective-c, xcode

我有一个日期字符串，我试图将其转换为 NSDate 以将其与当前日期时间进行比较。我已经尝试实现这一点，但我尝试转换的日期为空值。

这是我尝试过的。

```
-(BOOL)checkTime{

    //create an instance of the database oject
    DataBase * dataBase = [[DataBase alloc] init];

    //get the times
    NSMutableArray *times = [dataBase allDataFrom:@"timings"];

    //set date time to string and refresh time to float.
    NSString *dateStr = times[1];
    float refreshTime = [times[2] floatValue];

    // Convert string to date object
    NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
    [dateFormat setDateFormat:@"yyyy-MM-dd HH:mm:ss"];
    NSDate *date = [dateFormat dateFromString:dateStr];

    //get the time now
    NSDate* timeNow = [NSDate date];

    NSLog(@"dateStr: %@",dateStr);
    NSLog(@"DataBase Date: %@",date);
    NSLog(@"Current Date: %@",timeNow);
    NSLog(@"Time until refresh. (seconds): %f", refreshTime);

    // If date is greater than refresh then update the data
    if ([timeNow timeIntervalSinceDate:date] > refreshTime)
    {
        NSLog(@"Data Needs to be checked.");
        return YES;

    }else{
        NSLog(@"Data is fresh.");

        return NO;

    }

} 
```

这就是我从记录我的所有值中得到的

```
dateStr: 2013/02/26  12:39:28
DataBase Date: (null)
Current Date: 2013-02-26 12:57:49 +0000
Time until refresh. (seconds): 30.000000
Data is fresh. 
```

我的语法不正确还是我错过了其他东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T14:09:34.170

您输入的日期和格式不匹配！

格式：

```
yyyy-MM-dd HH:mm:ss 
```

输入：

```
2013/02/26  12:39:28 
```

（斜线而不是连字符和额外的空格）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T14:10:23.433

`NSLog(@"dateStr: %@",dateStr);`当您打印此代码 时`dateStr: 2013/02/26 12:39:28`

而且您将 dateformat 设置为`[dateFormat setDateFormat:@"yyyy-MM-dd HH:mm:ss"];` 这就是您获得`NSLog(@"DataBase Date: %@",date);`DataBase Date: (null)` 的原因。

你需要这样做：

```
[dateFormat setDateFormat:@"yyyy-MM-dd HH:mm:ss"]; 
```

# c# - 排序和分页 GridView 问题

> ID：15091131
> 
> 赞同：0
> 
> 时间：2013-02-26T14:06:12.023
> 
> 标签：c#, asp.net, sorting, gridview, paging

我正在使用 a`GridView`并尝试对其进行排序和分页。我的数据库中有 20 多行，但 GridView 只显示 10 行。
我设置`AllowPaging=true`但注意到发生了。
我也在使用`AllowSorting = true`and `OnSorting="GridView_Sorting"`。但是，当我单击标题对该列的内容进行排序时，它并没有进入我的位置，`OnSorting="GridView_Sorting"`它直接进入了`GridView1_RowCommand`为什么？
有时它只是给我这个错误：
`Object reference not set to an instance of an object error`

这是我的代码：

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" style="font-family: Verdana, Arial, Sans-Serif;" 

    CssClass="gridview" OnSorting="GridView_Sorting"
    AllowSorting ="True" AllowPaging="True" BackColor="#CCCCCC" 
    BorderStyle="Inset" BorderWidth="2px" BorderColor="GrayText"
    CellPadding="1"
    CellSpacing="5"
    HeaderStyle-HorizontalAlign="Center"
    OnRowDataBound="GridView1_RowDataBound"
    ForeColor = "Black" RowStyle-CssClass="gridview" 
    OnRowCommand="GridView1_RowCommand">            
    <AlternatingRowStyle BackColor="#CCCCCC" />
       <columns>
          <asp:BoundField HeaderText="ID" DataField="id" SortExpression="id"  />
          <asp:BoundField HeaderText="PRIORIDADE" DataField="prioridade" ItemStyle-HorizontalAlign="Center" SortExpression="prioridade" SortExpression="prioridade" />
          <asp:BoundField  HeaderText="SITUAÇÃO"  DataField="situacao" ItemStyle-HorizontalAlign="Center" >
          <ItemStyle HorizontalAlign="Center" />
          </asp:BoundField>
          <asp:BoundField HeaderText="RESPONSAVEL" DataField="responsavel" HeaderStyle-Width="65px" ItemStyle-HorizontalAlign="Center">
          <HeaderStyle Width="65px" />
          <ItemStyle HorizontalAlign="Center" />
          </asp:BoundField>
          <asp:BoundField HeaderText="DATA DE CADASTRO" DataField="dt_cadastro" SortExpression="dt_cadastro" DataFormatString="{0:dd/MM/yyyy}" HeaderStyle-Width="60px"ItemStyleHorizontalAlign="Center" >
          <HeaderStyle Width="60px" />
          <ItemStyle HorizontalAlign="Center" />
          </asp:BoundField>
          <asp:BoundField HeaderText="PREVISÃO DE TÉRMINO" DataField="previsao_termino" DataFormatString="{0:dd/MM/yyyy}" HeaderStyle-Width="60px"
          ItemStyle-HorizontalAlign="Center">
          <HeaderStyle Width="60px" />
          <ItemStyle HorizontalAlign="Center" />
          </asp:BoundField>
          <asp:BoundField HeaderText="PROJETO" DataField="projeto"  ItemStyle-HorizontalAlign="Center"></asp:BoundField>
          <asp:BoundField HeaderText="FUNCIONALIDADE" DataField="funcionalidade" ItemStyle-HorizontalAlign="Center" />
          <asp:BoundField HeaderText="CLUBE" DataField="clube"  ItemStyle-HorizontalAlign="Center" />
          <asp:TemplateField HeaderStyle-Width="70px" HeaderText="VISUALIZAR" >
          <ItemTemplate>
          <asp:Button ID="Btn_Visualizar" runat="server" Text="VISUALIZAR" CssClass="Btn_Grid"  Font-Size="7pt" Font-Names="Verdana, Arial"  OnClick="Btn_Visualizar_Click"CommandName="visualizar" CommandArgument="<%# ((GridViewRow)Container).RowIndex %>" />                            
          </ItemTemplate>
          </asp:TemplateField>
          <asp:TemplateField HeaderStyle-Width="66px" HeaderText="ALTERAR">
          <ItemTemplate>
          <asp:Button ID="Btn_Alterar" runat="server" Text="ALTERAR" CssClass="Btn_Grid" Font-Size="7pt" Font-Names="Verdana, Arial"CommandName="editar" CommandArgument="<%# ((GridViewRow)Container).RowIndex %>" />
          </ItemTemplate>
       </asp:TemplateField>
       <asp:TemplateField HeaderStyle-Width="66px" HeaderText="FEEDBACK">
       <ItemTemplate>
       <asp:Button ID="Btn_Feedback" runat="server" Text="ADICIONAR" CssClass="Btn_Grid" Font-Size="7pt" Font-Names="Verdana,Arial"CommandName="feedback" CommandArgument="<%# ((GridViewRow)Container).RowIndex %>" />
       </ItemTemplate>
       </asp:TemplateField>
       </columns> 
```

我的代码隐藏：

```
protected void GridView_Sorting(object sender, GridViewSortEventArgs e)
        {
            string[] strSortExpression = ViewState["SortExpression"].ToString().Split(' ');

            // If the sorting column is the same as the previous one,  
            // then change the sort order. 
            if (strSortExpression[0] == e.SortExpression) 
                { 
                if (strSortExpression[1] == "ASC") 
                { 
                    ViewState["SortExpression"] = e.SortExpression + " " + "DESC"; 
                } 
                else 
                { 
                    ViewState["SortExpression"] = e.SortExpression + " " + "ASC"; 
                } 
            } 
                // If sorting column is another column,   
                // then specify the sort order to "Ascending". 
            else 
            { 
                ViewState["SortExpression"] = e.SortExpression + " " + "ASC"; 
            } 
            // Rebind the GridView control to show sorted data. 
            GridView1.DataSource = ch.BuscaTodosChamados();
            GridView1.DataBind();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:30:44.873

为每个可排序列添加 SortExpression 属性，通知其 DataField。

# c# - 模拟 HttpListenerContext

> ID：15091134
> 
> 赞同：6
> 
> 时间：2013-02-26T14:06:17.083
> 
> 标签：c#

我正在尝试对一些使用 HttpListenerContext 的代码进行单元测试。我找不到可以模拟的基类或接口。HttpListenerContext 有类似 HttpRequestBase 的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T14:50:53.353

解决问题的方法是创建一个带有虚方法的抽象类。

```
public abstract class HttpListenerContextBase
{
    public virtual HttpListenerRequestBase Request { get; private set; }
    public virtual HttpListenerResponseBase Response { get; private set; }
    public virtual IPrincipal User { get; private set; }
} 
```

然后，您可以为在构造函数中接受 HTTPListnerContext 并从 HttpListenerContextBase 继承的真实封装类创建自己的封装类。它只是从真实上下文中返回方法。

然后，在您的代码中，您针对 HttpListenerContextBase 编写所有方法并注入一个模拟的方法。

有点努力，但会让你得到一些可测试的东西。

# c# - 当成员已经用另一种类型实现时，为什么我必须显式实现类型 object 的接口成员？

> ID：15091139
> 
> 赞同：4
> 
> 时间：2013-02-26T14:06:36.313
> 
> 标签：c#, generics, object, interface

考虑以下示例：

```
namespace Test
{
    interface IContract : IContract<object> { }

    interface IContract<T>
    {
        void Definition(T data);
    }

    public class SomeClass : IContract, IContract<SomeContractClass>
    {
        public void Definition(SomeContractClass data)
        {
            // ...
        }
    }

    public class SomeContractClass { }
} 
```

我想我会通过提供满足接口，`Definition(SomeContractClass data)`因为如[MDSN](http://msdn.microsoft.com/en-gb/library/9kkx3h3c%28v=vs.80%29.aspx)中所述：

> 在 C# 的统一类型系统中，所有类型，预定义的和用户定义的，引用类型和值类型，都直接或间接地继承自 Object。

但是编译器要求我明确定义它：

> 错误 1 ​​'Test.SomeClass' 没有实现接口成员 'Test.IContract.Definition(object)'

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T14:12:06.437

您正在实现接口`IContract`。

如果我们展平继承层次结构，我们可以看到它`IContract`基本上看起来像这样：

```
interface IContract
{
    void Definition(object data);
} 
```

您不提供与签名匹配的`void Definition (object data)`方法 - 您提供的方法`SomeContractClass`取而代之。因此，您会收到所述的错误消息。

但是，我认为根本问题是您的类同时实现了`IContract`and `IContract<T>`（这与说`IContract<object>`and相同`IContract<T>`）。我认为你的设计需要一些工作......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T14:19:03.603

我将对你的情况做一个小类比。

你有一家修理小型汽车的小公司。

您与需要维修外交车队中任何类型车辆（飞机、船只、大卡车和小型汽车）的政府签订合同。

在你做出概括的那一刻，你撒谎/犯了一个小错误

1）既然你成功实施

```
void Repair(SmallCar vehicle) 
```

2) 因为

```
class SmallCar : Vehicle { }
class Airplane : Vehicle { }
class Boat : Vehicle { }
class BigTruck : Vehicle { } 
```

不知何故，点 (1 + 2) => 点 3 的组合表明：

3）政府可以放心地将您的小公司称为“修理任何东西的人”，并且有一天会认为要求您的公司像这样帮助他们是个好主意：

```
Airplane protocolPlane = new Airplane();
yourCompany.Repair(protocolPlane); 
```

这当然不是真的：**（1 + 2）并不意味着（3）**

这最终成为编译器错误而不是运行时异常，这是一件好事。通过这种方式，您可以更快地了解架构中的一个小问题。

**编辑**

在您的代码中，如果您决定确实需要在**SomeClass**类中实现这两个接口并且您不知道如何执行此操作，则可以使用显式接口实现，如下所示：

```
public class SomeClass : IContract, IContract<SomeContractClass>
{
    // Method of IContract<SomeContractClass>
    public void Definition(SomeContractClass data)
    {
        Console.WriteLine("Processing a SomeContractClass instance");            
        // ...etc
    }
    // Method of IContract hence of IContract<object>
    void IContract<object>.Definition(object data)
    {
        if (data is SomeContractClass)
          this.Definition(data as SomeContractClass);
        else
        {
          string descriptor = (null == data) 
            ? "A null reference" 
            : "An instance of " + data.GetType().Name";
          Console.WriteLine("Processing something other than a SomeContractClass instance: " + descriptor);
          // ...etc
        }
    }

} 
```

这样，您将成功获得以下结果：

```
class Program {
     public static void Main(string[] args) {
         SomeClass someInstance = new SomeClass();
         IContract<SomeContractClass> first= someInstance;
         IContract second = someInstance;

         someInstance.Definition(new SomeContractClass()); 
         // prints out "Processing a SomeContractClass instance"

         first.Definition(new SomeContractClass());
         // prints out "Processing a SomeContractClass instance"

         second.Definition(new SomeContractClass());
         // prints out "Processing a SomeContractClass instance"

         second.Definition( "something else" );
         // prints "Processing something other 
         // than a SomeContractClass instance: An instance of String"

         second.Definition( 123 );
         // prints "Processing something other
         // than a SomeContractClass instance: An instance of Int32"

         first.Definition( true );
         // doesn't compile saying that bool can't be converted to SomeContractClass

     }
} 
```

**编辑结束**

# php - 在 Wampserver 2.2 上安装 imap-ssl 扩展

> ID：15091144
> 
> 赞同：0
> 
> 时间：2013-02-26T14:06:58.453
> 
> 标签：php, ssl, wamp, imap, php-extension

我正在寻找一种使用 PHP 连接我的 IMAP-SSL GMail 帐户的方法，因为我想自动化它。

我正在关注[本教程](http://davidwalsh.name/gmail-php-imap)，但它没有解释如何在 Wampserver 上安装 imap-ssl 扩展。

是否有一种简单（或至少清晰）的方法可以在 Wamp 上安装 imap-ssl 扩展？

# html - GWT 默认样式名称

> ID：15091145
> 
> 赞同：0
> 
> 时间：2013-02-26T14:07:03.037
> 
> 标签：html, gwt

我正在使用 GWT 创建 Web 应用程序；默认情况下，Google Web Toolkit 会附加您的样式名称。

例如下面的代码

```
Anchor myAnchor = new Anchor("Test"); 
```

创建这个 HTML

```
< a href=".." class="**gwt-Anchor**">Test< /a> 
```

我可以删除所有小部件上的所有 gwt 样式名称吗？

在示例中，我想删除 gwt-Anchor 类，但我不想运行 removeStyleName("gwt-Anchor")

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:13:48.083

没有简单的方法可以做到，不。您必须明确`removeStyleName(…)`或更简单地`setStyleName("")`在每个小部件上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T14:32:06.377

[setStylePrimaryName()](http://google-web-toolkit.googlecode.com/svn/javadoc/1.5/com/google/gwt/user/client/ui/UIObject.html#setStylePrimaryName%28com.google.gwt.dom.client.Element,%20java.lang.String%29)

```
Anchor myAnchor = new Anchor("Test");
myAnchor.setStylePrimaryName("mystyle"); 
```

**根据文档**：

```
Sets the object's primary style name and updates all dependent style names. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T14:39:32.077

如果您不想删除样式，请使用 setStyleName("") 应用新样式。因此，在您的项目样式表文件中，使用空括号定义 gwt-Anchor 样式，该标签已存在于 GWT 样式中。

`!important`因此，您可以在 gwt 项目中使用关键字继承相同的样式名称。它将应用项目CSS。它将**删除所有 GWT 样式。**所以复制样式名称并粘贴到您的项目 css 中。IE

**样式.css**

```
.gwt-Anchor
{
 //Any style you want to apply 
} 
```

# java - HashMaps 和 Null 值？

> ID：15091148
> 
> 赞同：75
> 
> 时间：2013-02-26T14:07:13.443
> 
> 标签：java, null, hashmap, hashcode

如何将空值传递给 HashMap？
以下代码片段适用于填写的选项：

```
HashMap<String, String> options = new HashMap<String, String>();  
options.put("name", "value");
Person person = sample.searchPerson(options);  
System.out.println(Person.getResult().get(o).get(Id)); 
```

所以问题是必须在选项和/或方法中输入什么来传递空值？
我尝试了以下代码但没有成功：

```
options.put(null, null);  
Person person = sample.searchPerson(null);    

options.put(" ", " ");  
Person person = sample.searchPerson(null);    

options.put("name", " ");  
Person person = sample.searchPerson(null);  

options.put();  
Person person = sample.searchPerson(); 
```

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2013-02-26T14:24:56.327

HashMap 支持`null`键和值

[http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)

> ...并允许空值和空键

所以你的问题可能不是地图本身。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-08-29T14:14:04.117

您可以注意以下可能性：

### 1\. 在地图中输入的值可以是`null`。

但是，对于多个`null`键和值，它只会采用一次空**键值对。**

```
Map<String, String> codes = new HashMap<String, String>();

codes.put(null, null);
codes.put(null,null);
codes.put("C1", "Acathan");

for(String key:codes.keySet()){
    System.out.println(key);
    System.out.println(codes.get(key));
} 
```

输出将是：

```
null //key  of the 1st entry
null //value of 1st entry
C1
Acathan 
```

### 2\. 你的代码只会执行`null`一次

```
options.put(null, null);  
Person person = sample.searchPerson(null); 
```

`searchPerson`如果您想要多个值，这取决于您的方法的实现`null`，您可以相应地实现

```
Map<String, String> codes = new HashMap<String, String>();

    codes.put(null, null);
    codes.put("X1",null);
    codes.put("C1", "Acathan");
    codes.put("S1",null);

    for(String key:codes.keySet()){
        System.out.println(key);
        System.out.println(codes.get(key));
    } 
```

输出：

```
null
null

X1
null
S1
null
C1
Acathan 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-11-28T06:09:13.547

您似乎正在尝试使用 Map 参数调用方法。所以，用一个空的人名调用正确的方法应该是

```
HashMap<String, String> options = new HashMap<String, String>();
options.put("name", null);  
Person person = sample.searchPerson(options); 
```

或者你可以这样做

```
HashMap<String, String> options = new HashMap<String, String>();
Person person = sample.searchPerson(options); 
```

使用

```
Person person = sample.searchPerson(null); 
```

可以给你一个空指针异常。这一切都取决于 searchPerson() 方法的实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-28T07:24:49.903

**避免`null`在 Map 中有值是**一种很好的编程习惯。

如果您有一个带有`null`值的条目，则无法判断该条目是否存在于映射中或是否具有`null`与之关联的值。

您可以为这种情况定义一个常量（示例：）`String NOT_VALID = "#NA"`，或者您可以让另一个集合存储具有`null`值的键。

请检查此[链接](https://github.com/google/guava/wiki/UsingAndAvoidingNullExplained)以获取更多详细信息。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2014-02-14T12:18:40.020

根据您的第一个代码片段似乎还可以，但是由于编程错误，我也遇到了类似的行为。您在看跌期权之前检查过“选项”变量不为空吗？

我正在使用 Struts2 (2.3.3) webapp 并使用 HashMap 来显示结果。何时执行（在由 Action 类初始化的类中）：

```
if(value != null) pdfMap.put("date",value.toString());
else pdfMap.put("date",""); 
```

得到这个错误：

```
Struts Problem Report

Struts has detected an unhandled exception:

Messages:   
File:   aoc/psisclient/samples/PDFValidation.java
Line number:    155
Stacktraces

java.lang.NullPointerException
    aoc.psisclient.samples.PDFValidation.getRevisionsDetail(PDFValidation.java:155)
    aoc.action.signature.PDFUpload.execute(PDFUpload.java:66)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    ... 
```

似乎 NullPointerException 指向 put 方法（第 155 行），但问题是 de Map 之前尚未初始化。它编译正常，因为变量不在设置值的方法中。

* * *

## 回答 #6

> 赞同：-6
> 
> 时间：2014-05-13T17:54:33.243

你可能可以这样做：

```
String k = null;
String v = null;
options.put(k,v); 
```

# mysql - 正确更新语法但零行影响 MySQL

> ID：15091152
> 
> 赞同：0
> 
> 时间：2013-02-26T14:07:36.753
> 
> 标签：mysql, rows, concat

这是我的数据：

表税 1

```
tax           | tax_list

abc_132       | empty   
cda_456       | empty    
akc_896       | empty 
```

表属

```
taxon_list    | taxon_schema

Bees          | abc_132 cda_456    
Elefants      | akc_896 
```

现在我想用表 GENUS 中的 taxon_list 填充表 TAX1 中的空 tax_list，其中表 TAX1 条目中的税出现在 TABLE GENUS 的 taxon_schema 中。

我尝试了以下解决方案；语法似乎是正确的，但我得到“0行受影响”因此没有任何变化！

```
update Tax1 set Tax1.tax_list=(select genus.taxon_list from genus where Tax1.tax_schema like concat('%genus.taxon_schema%')); 
```

它应该如下所示：

```
tax                  |    tax_list

abc_132              | Bees    
cda_456              | Bees
akc_896              | Elefants 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:36:07.130

试一试。

```
update Tax1
  set Tax1.tax_list=(
    select genus.taxon_list from genus where genus.taxon_schema like concat('%', Tax1.tax, '%')); 
```

变化：

*   Tax1.tax_schema -> Tax1.tax
*   concat -> 传递多个参数（[http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat)）
*   LIKE 操作数切换

此外，您可能希望将 LIMIT 1 添加到选择中，以防它匹配 > 1 行。

# iphone - NSPredicate 匹配任何字符

> ID：15091155
> 
> 赞同：10
> 
> 时间：2013-02-26T14:07:37.423
> 
> 标签：iphone, objective-c, nspredicate

如何构造一个 NSPredicate 来查找 Arrays 对象中任何位置的搜索词？我不能很好地解释它，所以这里有一个例子。

```
NSArray *array = @[@"Test String: Apple", @"Test String: Pineapple", @"Test String: Banana"];
NSString *searchText = @"Apple";
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SELF CONTAINS[cd] %@", searchText];
NSArray *filteredArray = [array filteredArrayUsingPredicate:predicate];
NSLog(@"filteredArray: %@", filteredArray);

// filteredArray: (
//    "Test String: Apple",
//    "Test String: Pineapple"
// ) 
```

但如果我使用`NSString *searchText = @"Test Str Appl";`我得到零结果。我希望它匹配这个字符串的相同结果。

我正在寻找的是一个类似于 Xcode 中的“快速打开”菜单的搜索功能，在这里搜索字符串的措辞是否正确无关紧要，只是字母的顺序正确作为匹配项。我真的希望这是有道理的。

![打开快速菜单](../Images/ead1392ca1846918f21f2242ca43e104.png)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-26T14:26:25.057

谓词中的`LIKE`字符串比较允许使用通配符`*`和`?`，其中`*`匹配 0 个或多个字符。因此，如果您将搜索文本转换为

```
NSString *searchWithWildcards = @"*T*e*s*t* *S*t*r*A*p*p*l*"; 
```

`*`通过在开头、所有字符之间和原始搜索文本的末尾插入 a使用类似这样的东西

```
NSMutableString *searchWithWildcards = [NSMutableString stringWithFormat:@"*%@*", self.searchField.text];
if (searchWithWildcards.length > 3)
    for (int i = 2; i < self.searchField.text.length * 2; i += 2)
        [searchWithWildcards insertString:@"*" atIndex:i]; 
```

那么你可以使用

```
[NSPredicate predicateWithFormat:@"SELF LIKE[cd] %@", searchWithWildcards]; 
```

谓词以给定的顺序搜索字符，它们之间有任意其他字符。

* * *

例如，可以使用以下代码完成转换：

```
NSMutableString *searchWithWildcards = [@"*" mutableCopy];
[searchText enumerateSubstringsInRange:NSMakeRange(0, [searchText length])
                   options:NSStringEnumerationByComposedCharacterSequences
                usingBlock:^(NSString *substring, NSRange substringRange, NSRange enclosingRange, BOOL *stop) {
                    [searchWithWildcards appendString:substring];
                    [searchWithWildcards appendString:@"*"];
                }]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-29T00:55:01.970

因为我的objcC读的不太好，所以我自己写了通配符函数。开始了：

**斯威夫特 5**

CoreData 被提取到初始化的数组中

```
var originalArray: [NSManagedObject] = []

extension myViewController: UISearchResultsUpdating {
    func updateSearchResults(for searchController: UISearchController) {
        filteredArray.removeAll(keepingCapacity: true)
        if searchController.searchBar.text!.isEmpty {
            filteredArray = originalArray
        } else {
            let filter = searchController.searchBar.text!
            var filterWithWildcards = ""
            for i in 0 ..< filter.length {
                if i == 0 {
                    filterWithFormat = "*"
                }
                filterWithFormat += filter[i] + "*"
            }
            print("filter: \(filter); filterWithWildcards: \(filterWithWildcards)") // filter: Mxmstrmnn; filterWithFormat: *M*x*m*s*t*r*m*n*n*
            myPredicate = NSPredicate(format: "EnterYourAttributeNameOfCoreDataEntity LIKE[c] %@", filterWithWildcards)
            let array = (people as NSArray).filtered(using: myPredicate!)
            filteredArray = array as! [NSManagedObject]
        }
        myTableView.reloadData()
}} 
```

只要我保持字母顺序，filteredArray 中的结果就会找到*Max Mustermann 。*

为了获得过滤器[i]的索引字母，我使用了来自这里的*字符串扩展*[https://stackoverflow.com/a/26775912/12035498](https://stackoverflow.com/a/26775912/12035498)

# php - facebook api 图贴在群组墙上

> ID：15091157
> 
> 赞同：1
> 
> 时间：2013-02-26T14:07:50.173
> 
> 标签：php, facebook, facebook-graph-api

有人能帮帮我吗？我尝试在我的组中的帐户（我是组的管理员）上发帖。（如图）

我有两个功能。在我自己的墙上张贴，没有错误。

现在我在小组帖子中使用第二个功能.. 不幸的是，到目前为止还没有成功。

功能 2 给我错误的回应。

我的范围 user_groups、publish_actions、email、read_stream、publish_stream、user_photos、friends_photos、manage_pages

```
 function PostMessage(){

    $postString = 'message='.rawurlencode($this->getMessage()).'&uid='.$this->getUId().'&attachment='.urlencode($this->getAttachment()).'&'.$this->getAccessToken();

    $curl = curl_init();
    curl_setopt($curl, CURLOPT_URL, "https://api.facebook.com/method/stream.publish");

    curl_setopt($curl, CURLOPT_FAILONERROR, 1);
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($curl, CURLOPT_FOLLOWLOCATION, 0);
    curl_setopt($curl, CURLOPT_POST, 1);
    curl_setopt($curl, CURLOPT_POSTFIELDS, $postString);
    curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false); 
    $response = curl_exec($curl);
    //print_r($response);
    curl_close($curl);

}

function PostGroupMessage(){

    $postString = 'message='.rawurlencode($this->getMessage()).'&uid='.$this->getUId().'&attachment='.urlencode($this->getAttachment()).'&'.$this->getAccessToken();

    $curl = curl_init();
    curl_setopt($curl, CURLOPT_URL, "https://graph.facebook.com/".$this->getGroupId()."/feed");  // Neither group name nor the groups function id 

    curl_setopt($curl, CURLOPT_FAILONERROR, 1);
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($curl, CURLOPT_FOLLOWLOCATION, 0);
    curl_setopt($curl, CURLOPT_POST, 1);
    curl_setopt($curl, CURLOPT_POSTFIELDS, $postString);
    curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false); 
    $response = curl_exec($curl);
    curl_close($curl);

} 
```

编辑：

这是我发布运行之前对象的转储：

```
object(fb_send)#1 (6) {
  ["m_AppId":"fb_send":private]=>
  string(15) "xxxx"
  ["m_SecretId":"fb_send":private]=>
  string(32) "xxxx"
  ["m_UId":"fb_send":private]=>
  int(xxxx)
  ["m_AccessToken":"fb_send":private]=>
  string(56) "access_token=xxxx"
  ["m_Message":"fb_send":private]=>
  string(101) "Besuchen Sie www.modelweb24.de - Die neue kostenlose social community für Fotografen und Fotomodelle!"
  ["m_Attachment":"fb_send":private]=>
  string(258) "{"href":"http://www.modelweb24.de","name":"Wir begrüßen ","caption":"","description":"auf www.modelweb24.de","media":[{"type":"image","src":"http://www.modelweb24.de/ow_static/themes/OWD-Nyx/images/logofb.png","href":"http://www.modelweb24.de/"}]}"
} 
```

然后我做 PostGroupMessage() 并且 $response 是 bool(false)。没有更多的错误

编辑2：

[https://graph.facebook.com/180243765369952/feed/?access_token=xxxxx](https://graph.facebook.com/180243765369952/feed/?access_token=xxxxx)在群墙上给我所有新闻

编辑3：

我已经发送了参数 ?method=POST ，现在我变成了一个错误。我缺少什么许可？

```
{
   "error": {
      "message": "(#200) The user hasn't authorized the application to perform this action",
      "type": "OAuthException",
      "code": 200
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:38:13.733

在创建应用程序时，您都需要对您的朋友具有组访问权限，即“friends_groups”和“offline_access”。

您可以在[https://developers.facebook.com/tools/explorer查看](https://developers.facebook.com/tools/explorer)

# regex - vb.net 正则表达式与字符串的比较

> ID：15091158
> 
> 赞同：2
> 
> 时间：2013-02-26T14:08:01.030
> 
> 标签：regex, vb.net, string

我试图复制这些行直到检测到一个空行但是这段代码滞后于我的计算机我不知道我做错了什么这是因为我在另一个while循环中运行while循环？这是我的代码：

```
ElseIf String.Compare(line, "the") = 1 And Not line.ToLower().Contains("by") Then
            While True

                Dim title = New Regex("^\s*$").Matches(line).Count
                If title = 1 Then Exit While

                builder.AppendLine(line)
                builder.AppendLine(reader.ReadLine())

            End While 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T14:20:12.857

您没有重置`line`变量。像这样的东西应该可以工作：

```
While True
    Dim title = New Regex("^\s*$").Matches(line).Count
    If title = 1 Then Exit While
    builder.AppendLine(line)
    line = reader.ReadLine()
End While 
```

**编辑**

而不是正则表达式，您可以改为使用`String.IsNullOrWhiteSpace()`which 可能会使您的代码在将来更易于阅读。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T14:21:40.297

用那段简短的代码很难准确地说出您要做什么，但是它不起作用的原因很清楚。`title`如果不等于，您将陷入无限循环`1`。我认为，您假设 的值`line`会改变您`reader.ReadLine`在`While`循环内调用的到达时间。你可能打算做这样的事情：

```
line = reader.ReadLine()
builder.AppendLine(line) 
```

# java - Google App Engine 简单应用程序已创建并在本地运行。但我无法部署到 App Engine

> ID：15091159
> 
> 赞同：0
> 
> 时间：2013-02-26T14:08:01.997
> 
> 标签：java, google-app-engine

Google App Engine 简单应用程序已创建并在本地运行。但我无法部署到 App Engine

但我收到以下错误

> 无法更新应用程序：无法编译 jsp 文件。
> 
> 有关更多详细信息，请参阅部署控制台无法更新应用程序：无法编译 jsp 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:49:06.503

这意味着您的一个或多个 JSP 存在编译问题。观察 Eclipse Console 视图中的错误，您将能够看到哪些 JSP 没有编译。它还将指向一个错误日志文件，您可以查看该文件以查看相同的编译错误。

它在本地工作的原因可能是由于您没有执行任何有问题的 JSP，所以看起来好像没有问题。

另一个问题可能是您的 Eclipse 中有 JRE 而不是 JDK 设置，因此它无法编译。

# ios6 - 在运行时更改容器中的控制器

> ID：15091160
> 
> 赞同：1
> 
> 时间：2013-02-26T14:08:07.410
> 
> 标签：ios6, uiviewcontroller, uistoryboardsegue

所以，我的 iPad 应用程序中有一个视图容器。根据用户所做的选择，容器中的视图需要更改。这是怎么做到的？我可以将多个视图控制器链接到 Interface builder 中的同一个容器，然后触发 segue 以使它们更改吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T11:58:33.067

我还没有找到解决这个问题的正确方法，但是看看[这个链接](http://sandmoose.com/post/35714028270/storyboards-with-custom-container-view-controllers)。

它基本上所做的是创建中间视图控制器，该控制器由嵌入 segue 触发。然后这个视图控制器通过自定义 segues 连接到目标视图控制器并负责呈现它们。

所以答案是你不能在 Interface builder 中将多个视图控制器链接到同一个容器，然后触发 segue 让它们改变。但这是我发现的最接近的解决方法。

# android - Youtube 视频在移动绕过时被阻止

> ID：15091162
> 
> 赞同：1
> 
> 时间：2013-02-26T14:08:10.297
> 
> 标签：android, html, youtube, video-streaming, android-webview

有没有办法绕过手机上被屏蔽的视频？首先，我尝试启动正常的 youtube 意图，然后我使用`WebView`（同时使用`video`和`iframe`标签），最后我将用户代理更改`WebView`为桌面客户端，但上述方式均无效。我尝试`rtsp`使用流式传输视频，`VideoView`但它只会给我一个低质量的 3gp 视频，这是 Youtube API 提供的。

我的选择已经不多了。任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T19:34:52.980

我在 YouTube 上的一些视频中遇到了同样的事情，发现只有 YouTube 控制是否允许在手机上显示。除了在我们的服务器上托管视频或使用 Vimeo 之外，我们从未找到解决方法。但就目前而言，YouTube 可以控制移动观看。你也有那个视频货币化吗？在 YouTube 上通过视频获利也可能导致他们不允许在移动设备上播放该视频，尤其是如果该视频包含 YouTube 所说的第三方或侵犯版权的任何内容。他们告诉我们，我们有第三方内容，而这一切都是由我们拍摄的。对该问题的进一步阅读表明，YouTube 的新数字指纹是为试图上传自己制作和拥有的视频的用户带来新一波问题的罪魁祸首。IE，一位用户试图上传他后院的视频，里面有鸟，鸟儿在唱歌。当他试图上传它时，YouTube 说它受版权保护！你怎么版权鸟鸣现在每个人都在问！因此，请尝试使用 Vimeo 或使用您自己的服务器来传送内容。抱歉，我无法提供更多帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-07T16:46:38.067

我记得作为用户，我可以通过询问桌面版 YouTube 网站，然后使用（不再更新）Android 版 Flash Player 观看视频来绕过该阻止。因此，当您从您的应用中请求视频时，也许您可​​以尝试假装是 Flash Player。也许使用网络嗅探器来查看它在做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-14T04:34:37.777

用户“OMA”给出了一个答案（使用“桌面模式”），该答案有时有效且易于尝试。

接下来是这个站点（或类似站点）：[http](http://www.mobileyt.com/) ://www.mobileyt.com/ ，它接受一个 URL，然后显示您的视频。

代理服务器*可能会*帮助您访问，特别是如果它是“国家/地区限制”（对于移动设备，但没有提及仅移动设备的国家/地区限制）。向该国家/地区提供的任何广告都可能不受欢迎（语言/海关）；所以它被阻止了。

您可以为您的移动浏览器尝试一个欺骗应用程序（提示：欺骗您使用 Opera 浏览器浏览或在 WinXP 上使用 Explorer 10，他们不会为此做好准备）。

结合这些技术可以帮助解决困难的情况。您还可以下载视频并使用 MX Player 或 VLC（适用于移动设备）播放。

祝你好运，如果一开始你没有成功......

# interrupt - 处理器间中断使用

> ID：15091165
> 
> 赞同：5
> 
> 时间：2013-02-26T14:08:19.997
> 
> 标签：interrupt

**一个**教育原则是：没有愚蠢的问题。这背后的基本思想是人们通过提问来学习。我被要求：“你能在编程层面展示和解释如果每个任务都可以执行所有指令会发生什么坏事吗？”

我确实给出了代码

```
 main(){
      _asm_("cli;");
      while(1);
    } 
```

并解释它（系统冻结了好-UP）

然后我被问到：“是否可以举一个例子，即使完成了清除中断，系统也不会冻结？”

我确实修改了前面的例子：

我确实给出了代码

```
 main(){
      _asm_("cli;");
      i=i/0;
      while(1);
    } 
```

并解释了它。

简单地说：如果我们有需求分页 i=i/0**首先**会导致页面错误（数据页面不存在），并且可以安排其他任务运行在磁盘读取期间启用的中断，**然后**除以零将丢弃此任务永远。

但答案是基于UP。SMP 呢？我必须说答案是不完整的。它仍然很容易构建：

```
 int i;
    main(){
    for(i=0;i<100;i++)// Suppose we have less than 100 CPUs
       if(fork())
        { sleep(5);//The generating task has (most probable) time to do all forks
         _asm_("cli;");
         while(1);
        }
     } 
```

这将禁用所有 CPU 的中断，因为每个 CPU 都会运行一个有毒任务。

到目前为止，一个愚蠢的问题确实向初学者揭示了许多值得学习的东西：特权指令、分页、故障处理、DMA 期间的调度、fork ......但是关于第一个运行的程序仍然存在一个小疑问（我感到羞耻）在 SMP 上。

一个 CPU 会永久失效吗？其他 CPU 继续并可以发送**re_schedule() IPI 消息**。那会发生什么？很容易推测冻结的 CPU 不会唤醒，因为中断被禁用。但要完全确定必须知道更多。

我的问题是：处理器间中断 (IPI) 是可屏蔽的还是不可屏蔽的？我的意思是在最常见的“流行”实现中？

原谅我愚蠢的问题。找到答案并不难。我会寻找它。我的意思是中断引脚号（我**猜**是可以屏蔽的）。

* * *

我自己的答案 - 正确吗？我研究了这个问题，因为没有其他人喜欢它，因此产生了以下想法：

对于重要的实时应用程序，我们长期以来一直使用看门狗定时器（硬件中断 cpu 以某种方式回答“我还活着”）。例如，如果主计算机出现故障，我们有主控计算机和备用计算机来处理系统。

Linux 呢？什么样的看门狗——我们有吗？我们可以在有或没有看门狗的情况下编译 Linux 内核。

Linux 看门狗是做什么的？在许多（**！**）x86/x86-64 类型的硬件上，有一个特性使我们能够生成“看门狗 NMI 中断”。甚至可以通过向 /proc/sys/kernel/nmi_watchdog 写入“0”来在运行时禁用 NMI 看门狗。如果系统中的任何 CPU 超过 5 秒没有执行周期本地定时器中断，APIC 会尝试通过**不可屏蔽的中断**来修复这种情况（cpu 执行处理程序，并杀死进程）！（SCC Linux 与 NMI 不同。）

我的答案（在原始问题中）是基于没有看门狗的系统！在一般水平上回答并基于某些固定系统给出示例是有问题的。答案可能正确或不正确，具体取决于 cpu 和配置和设置。

**无论如何，谈论 NMI 确实有意义吗？做到了？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-01-14T19:24:33.137

如果 CPU 不限制对某些指令的访问，那么很容易意外或故意造成灾难。

```
push $0
push $0
lidt (%esp)
int $42 
```

此代码序列将重置 x86 处理器。原因如下：

*   该代码在 IDTR 寄存器中加载一个位于线性地址 0 的中断描述符表 (IDT)，大小为一个字节。
*   引发中断 42，它无法工作，因为它超出了 IDT 的 1 字节限制。
*   CPU 试图引发一般保护故障，中断 13。这也失败了，因为中断 13 超出了一个字节的限制。
*   CPU 尝试引发双重故障异常，中断 8。这也失败了，中断 8 超出了 IDT 的限制。

这被称为三重故障。CPU 执行关闭总线循环以告诉主板它现在忽略所有内容并停止执行。主板断言重置，重新启动机器。

与代码所能做的相比，这实际上可以忽略不计。代码序列可以轻松劫持机器并开始破坏硬盘驱动器上的所有数据，它可以将您的所有文件发送到互联网上的恶意服务器，它可以更改您的密码，启用远程访问，连接到恶意服务器并授予攻击者无限的 shell 访问权限。程序可以做什么是没有限制的。

处理器有特权指令有两个原因，主要目的是保护操作系统免受错误程序的影响，这些程序可能会意外地做一些事情来破坏或劫持整个机器。次要目的是限制故意的恶意程序做同样的事情。

# c# - 如何从远程连接上的服务获取 XML 输出

> ID：15091169
> 
> 赞同：1
> 
> 时间：2013-02-26T14:08:31.073
> 
> 标签：c#, xml, service, runtime, remoting

我编写了一个邮件服务来从不同的邮件帐户中检索邮件。然后我有一个不同的程序，它应该具有实时仪表板的功能，显示从邮件服务检索到的信息......

我想将邮件服务的输出捕获到 XML 中，并通过与仪表板的远程连接调用它。显示服务运行的结果。

如何在运行时在对象中创建 XML 并显示在我的仪表板上？

请引导我走向正确的方向......

# php - 在齿轮工之间共享 curl 处理程序

> ID：15091170
> 
> 赞同：5
> 
> 时间：2013-02-26T14:08:30.810
> 
> 标签：php, curl, gearman

我有一个 gearman worker（称为“manager”），它读取一个 url 列表，然后为它们中的每一个调用另一个 gearman worker（称为“dependent”），它获取传递的 url 的内容并对其进行一些工作-索引等等。每个 url 属于同一个域（例如：www.test.com）。当每个工作人员调用 时`curl_init()`，都会与 www.test.com 建立新连接。

我正在寻找一种在工作人员之间共享 curl 资源处理程序的方法，以便重用相同的连接。在我的情况下，*经理*可以创建资源处理程序，然后将其作为工作负载参数传递给*依赖项。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:08:26.090

您可以使用共享内存来存储带有信号量函数的变量，[http://www.php.net/manual/en/book.sem.php](http://www.php.net/manual/en/book.sem.php)。

或者您可以使用 APC，并将缓存的变量转储到文件中。但我不确定它将如何工作。

# arrays - 敲除模型在计算的 observable 中打破数组长度

> ID：15091174
> 
> 赞同：1
> 
> 时间：2013-02-26T14:08:40.477
> 
> 标签：arrays, knockout.js, computed-observable

[在http://jsfiddle.net/gZC5k/1004/](http://jsfiddle.net/gZC5k/1004/)慢慢扩展我的嵌套表单我遇到了一个困难，我想用它来计算嵌套 JSON 数组中的子项数量。中断的代码在 // this 中断

```
 self.contacts = ko.observableArray(ko.utils.arrayMap(contacts, function (contact) {
    return {
        firstName: ko.observable(contact.firstName),
        lastName: ko.observable(contact.lastName),
        isKey: ko.observable(contact.isKey),
        gender: ko.observable(contact.gender),
        phones: ko.observableArray(ko.utils.arrayMap(contact.phones, function (phone) {
            return {
                type: ko.observable(phone.type),
                number: ko.observable(phone.number),
                calls: ko.observableArray(phone.calls),
                callsVisible: ko.observable(false)
            };
        })),
        addresses: ko.observableArray(contact.addresses),
        optionGender: optionGender,
        phonesVisible: ko.observable(false),
        addressesVisible: ko.observable(false),

// this breaks            
//            numberOfPhones: ko.computed(function (contact) {
//                return contact.phones.length;
//            });
    };
})); 
```

错误在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:11:49.793

我认为您需要将每个联系人创建为一个函数：

```
var ContactModel = function(contact)
{
    var self = this;
            self.firstName = ko.observable(contact.firstName);
            self.lastName = ko.observable(contact.lastName);
            self.isKey = ko.observable(contact.isKey);
            self.gender = ko.observable(contact.gender);
           self. phones = ko.observableArray(ko.utils.arrayMap(contact.phones, function (phone) {
                return {
                    type: ko.observable(phone.type),
                    number: ko.observable(phone.number),
                    calls: ko.observableArray(phone.calls),
                    callsVisible: ko.observable(false)
                };
            }));
            self.addresses = ko.observableArray(contact.addresses);
            self.optionGender = optionGender;
            self.phonesVisible = ko.observable(false);
            self.addressesVisible = ko.observable(false);

            self.numberOfPhones = ko.computed(function () {
                return self.phones().length;
            });
        return self;
}; 
```

并像这样创建它：

```
self.contacts = ko.observableArray(ko.utils.arrayMap(contacts, function (contact) {
        return new ContactModel(contact);
    })); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:18:33.293

你可以试试这个：

```
numberOfPhones: ko.computed(function () {
                return contact.phones.length;
     }) 
```

# wcf - 处理 Azure 暂存疯狂 URL

> ID：15091178
> 
> 赞同：5
> 
> 时间：2013-02-26T14:08:55.033
> 
> 标签：wcf, azure

我正在 azure 中部署一个 webrole，其中包含一个网站和一个 wcf 服务...
该站点使用来自 wcf 的服务。
这里的问题是登台部署为端点创建了一个疯狂的 url，我必须不断更改 web.config 中的端点......

我想知道是否有一种方法可以“预测” url 将是什么，或者强制一个甚至指向一个通用主机，例如“localhost”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:29:02.693

您应该能够使用角色发现来查找 WCF 终结点。[请在此处](https://stackoverflow.com/a/6723441/1014822)查看此 SO 答案及其链接到的[博客文章。](http://lab.studiopesec.com/azure-applications-101-part-ii/)

我自己用于连接到 azure 服务的抽象基类就是基于那篇文章。它使用角色发现来创建一个通道，如下所示：

```
 #region Channel
    protected String roleName;
    protected String serviceName;
    protected String endpointName;
    protected String protocol = @"http";

    protected EndpointAddress _endpointAddress;
    protected BasicHttpBinding httpBinding;
    protected NetTcpBinding tcpBinding;

    protected IChannelFactory channelFactory;
    protected T client;

    protected virtual AddressHeader[] addressHeaders
    {
        get
        {
            return null;
        }
    }

    protected virtual EndpointAddress endpointAddress
    {
        get
        {
            if (_endpointAddress == null)
            {
                var endpoints = RoleEnvironment.Roles[roleName].Instances.Select(i => i.InstanceEndpoints[endpointName]).ToArray();
                var endpointIP = endpoints.FirstOrDefault().IPEndpoint;
                if(addressHeaders != null)
                {
                    _endpointAddress = new EndpointAddress(new Uri(String.Format("{1}://{0}/{2}", endpointIP, protocol, serviceName)), addressHeaders);
                }
                else
                {
                    _endpointAddress = new EndpointAddress(String.Format("{1}://{0}/{2}", endpointIP, protocol, serviceName));
                }

            }
            return _endpointAddress;
        }
    }

    protected virtual Binding binding
    {
        get
        {
            switch (protocol)
            {
                case "tcp.ip":
                    if (tcpBinding == null) tcpBinding = new NetTcpBinding();
                    return tcpBinding;
                default:
                    //http
                    if (httpBinding == null) httpBinding = new BasicHttpBinding();
                    return httpBinding;
            }
        }
    }

    public virtual T Client
    {
        get
        {
            if (this.client == null)
            {
                this.channelFactory = new ChannelFactory<T>(binding, endpointAddress);
                this.client = ((ChannelFactory<T>)channelFactory).CreateChannel();
                ((IContextChannel)client).OperationTimeout = TimeSpan.FromMinutes(2);
                var scope = new OperationContextScope(((IContextChannel)client));
                addCustomMessageHeaders(scope);
            }
            return this.client; 
        }
    }
    #endregion 
```

在派生类中，我将以下变量传递给它（例如）：

```
this.roleName = "WebServiceRole";
this.endpointName = "HttpInternal";
this.serviceName = "services/Accounts.svc"; 
```

我根本不需要参考暂存（或生产）URL。

有关更多详细信息，请参阅我的答案：[在同一解决方案中添加 WCF 引用而不添加服务引用](https://stackoverflow.com/questions/12069240/add-wcf-reference-within-the-same-solution-without-adding-a-service-reference)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T14:20:31.913

无法预测、控制 GUID 或使用某些常量名称。

为了使事情更容易，您可以做的是将 URL 移动到 .CSCFG 并从 Azure 管理门户更新 WCF 服务的 URL

# wordpress - Wordpress 中的静态 URL 重定向

> ID：15091179
> 
> 赞同：1
> 
> 时间：2013-02-26T14:09:01.120
> 
> 标签：wordpress, .htaccess, url-rewriting

我需要重定向`page1`到`something/page1`我的 wordpress 网站。

我在我的 htaccess 文件中尝试了以下规则。

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
Options +FollowSymlinks
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
RewriteRule ^page1/$ something/page1? [L]
</IfModule>

# END WordPress 
```

我不熟悉 htaccess 规则。但重定向不起作用。

谁能帮我？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:27:15.763

也许这会起作用：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
Options +FollowSymlinks
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Next line added
RewriteCond %{REQUEST_URI}  !page1    [NC]

RewriteRule . /index.php [L]

# Next 3 lines added
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^page1  something/page1? [L]
</IfModule>

# END WordPress 
```

对于永久且可见的重定向，在最后一个重写规则中将 [L] 替换为 [R=301,L]。

# android - ImageView 旋转后从侧面切割

> ID：15091180
> 
> 赞同：3
> 
> 时间：2013-02-26T14:09:01.237
> 
> 标签：android, canvas, imageview, image-rotation

我有一个自定义的 ImageView。我想以某个角度旋转我的图像视图。这是它的 onDraw() 方法：

```
canvas.save();
canvas.rotate(currentAngle,getWidth()/2,getHeight()/2);
super.onDraw(canvas); 
```

图像正在旋转，但问题是旋转后，图像从侧面切割。如何避免切割的东西？

**示例截图：** ![在此处输入图像描述](../Images/545db60db427686e293a6df545412c8e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:25:39.033

尝试以下代码：

```
 public class bitmaptest extends Activity {
    @Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        LinearLayout linLayout = new LinearLayout(this);

        // load the origial BitMap (500 x 500 px)
        Bitmap bitmapOrg = BitmapFactory.decodeResource(getResources(),
               R.drawable.android);

        int width = bitmapOrg.width();
        int height = bitmapOrg.height();
        int newWidth = 200;
        int newHeight = 200;

        // calculate the scale - in this case = 0.4f
        float scaleWidth = ((float) newWidth) / width;
        float scaleHeight = ((float) newHeight) / height;

        // createa matrix for the manipulation
        Matrix matrix = new Matrix();
        // resize the bit map
        matrix.postScale(scaleWidth, scaleHeight);
        // rotate the Bitmap
        matrix.postRotate(45);

        // recreate the new Bitmap
        Bitmap resizedBitmap = Bitmap.createBitmap(bitmapOrg, 0, 0,
                          width, height, matrix, true);

        // make a Drawable from Bitmap to allow to set the BitMap
        // to the ImageView, ImageButton or what ever
        BitmapDrawable bmd = new BitmapDrawable(resizedBitmap);

        ImageView imageView = new ImageView(this);

        // set the Drawable on the ImageView
        imageView.setImageDrawable(bmd);

        // center the Image
        imageView.setScaleType(ScaleType.CENTER);

        // add ImageView to the Layout
        linLayout.addView(imageView,
                new LinearLayout.LayoutParams(
                      LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT
                )
        );

        // set LinearLayout as ContentView
        setContentView(linLayout);
    }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T14:05:36.703

曾经我有类似的问题。我就是这样决定这个问题的。我放大了图像，使它看起来像

* * *

> |_ __ *| | | | | |* |_ *|* | |_ __ _|

左右添加半角图像。顶部和底部添加了半高。新的空间填充一些颜色，或者做 alapha canal equals+ 0。当你旋转图像时，你需要剪掉多余的部分。我不是在Android上这样做的，但我希望这可以帮助你。

# xml - 寻找“CC130”的 XPath 函数

> ID：15091182
> 
> 赞同：3
> 
> 时间：2013-02-26T14:09:05.787
> 
> 标签：xml, xpath

嗨，我想弄清楚例如仅展示“CC130”课程中的所有书籍的功能是什么？

我有这个“/bookcollection/items/item/courses/course”，它显示了所有可能的课程？

```
 <?xml version="1.0" encoding="utf-8"?>
     <bookcollection>
     <item id="59113">  
     <title>Computer science : a modern introduction /</title>
     <isbn>0131659456</isbn>
     <url>http://library.hud.ac.uk/catlink/bib/59113</url>
     <borrowedcount>29</borrowedcount>
     <courses>
        <course>CC100</course>
        <course>CC130</course>
        <course>CX290</course>
     </courses>
  </item>
  <item id="59118">
     <title>Computer networks : protocols, standards, and interfaces /</title>
     <isbn>0131660918</isbn>
     <url>http://library.hud.ac.uk/catlink/bib/59118</url>
     <borrowedcount>19</borrowedcount>
     <courses>
        <course>CC100</course>
     </courses>
  </item>
  <item id="59131">
     <title>Computer-based instruction : methods and development /</title>
     <isbn>0131685929</isbn>
     <url>http://library.hud.ac.uk/catlink/bib/59131</url>
     <borrowedcount>43</borrowedcount>
     <courses>
        <course>CC100</course>
        <course>CC300</course>
     </courses>
  </item>
  <item id="59176">
     <title>Computer networks : protocols, standards, and interfaces /</title>
     <isbn>0131756052</isbn>
     <url>http://library.hud.ac.uk/catlink/bib/59176</url>
     <borrowedcount>10</borrowedcount>
     <courses>
        <course>CC100</course>
     </courses>
  </item>
  </bookcollection> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:31:46.583

你需要一个*谓词*：

```
/bookcollection/item[courses/course = 'CC130'] 
```

这将匹配 中`item`的所有元素，`bookcollection`其中至少有一个`courses`子元素包含至少一个`course`值为 的子元素`CC130`。当 XML 结构是这样的规则时，通常更有效地明确说明所有步骤而不是使用`//`or `descendant::`（例如`//item[.//course = 'CC130']`也可以工作，但需要在所有级别搜索整个树以查找命名的元素`item`- 但您知道唯一有趣的`item`元素是直接在`bookcollection`) 之下的那些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T14:14:34.440

我认为您正在寻找：

```
//item[descendant::course/text() = 'CC300'] 
```

工作示例：[http ://chris.photobooks.com/xml/default.htm?state=CF](http://chris.photobooks.com/xml/default.htm?state=CF)

# exception - JBossAS-7 中的 OptimisticLockException

> ID：15091185
> 
> 赞同：1
> 
> 时间：2013-02-26T14:09:12.323
> 
> 标签：exception, ejb, jboss7.x

`OptimisticLockException`当我尝试更新托管实体 EJB 时，我得到了一个。

EJB 是通过以下方式获取的：

```
port = entityManager.find(PortEntity.class, portID); 
```

然后将 EJB 和 entityManager 传递给 SAX `ContentHandler`，以便在`endDocuent()`方法中对其进行更新。`ContentHandler`已从 Google 的[时区 API 服务器](https://developers.google.com/maps/documentation/timezone/)返回的数据中提取时区信息。

代码片段是：

```
entityManager.refresh(port);
if (entityManager.contains(port))
    log.info("Contained: " + port);
else
    log.info("NOT Contained: " + port);

port.setTimezone(toTimezone);
entityManager.flush();   // <-- Line 70 
```

并且日志文件显示：

```
13:48:05,568 INFO  [GeotimezoneHandler] Status: OK
13:48:05,569 INFO  [GeotimezoneHandler] Raw offset: 3600.0000000
13:48:05,570 INFO  [GeotimezoneHandler] DST offset: 0.0000000
13:48:05,570 INFO  [GeotimezoneHandler] Timezone ID: Europe/Madrid
13:48:05,571 INFO  [GeotimezoneHandler] Timezone Name: Central European Standard Time
13:48:05,577 INFO  [GeotimezoneHandler] Contained: SeaPort[id=ESBCN, name=Barcelona]
13:48:05,591 ERROR [GeotimezoneHandler] Updating curise: javax.persistence.OptimisticLockException: org.hibernate.StaleObjectStateException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect): [com.nutrastat.voyager.entity.PortEntity$Sea#ESBCN]
    at org.hibernate.ejb.AbstractEntityManagerImpl.wrapStaleStateException(AbstractEntityManagerImpl.java:1390) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1308) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1289) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1295) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.ejb.AbstractEntityManagerImpl.flush(AbstractEntityManagerImpl.java:976) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
    at org.jboss.as.jpa.container.AbstractEntityManager.flush(AbstractEntityManager.java:439) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
    at com.nutrastat.voyager.util.GeotimezoneHandler.endDocument(GeotimezoneHandler.java:70) [voyager-lib.jar:] 
```

因此，如果`entityManager`包含 EJB，为什么在修改它之后会出现异常？

一如既往地感谢您的帮助

史蒂夫

附言

我看过[这个线程](https://stackoverflow.com/questions/5825161/staleobjectstateexception-on-high-frequency-updates)并且 MySQL 数据库正在使用 InnoDB，但我不知道如何`SELECT @@tx_isolation;`从我的代码中执行命令。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T19:10:27.247

经过两天的研究，我终于找到了问题所在。

实体类从其超类继承了一个`javax.persistence.Version`字段。我还手动将数据注入到表中，并且因为版本字段被定义为允许空值，所以没有费心插入值，但需要一个值。

# jquery - 将范围拇指扩展到相对定位的 div

> ID：15091186
> 
> 赞同：1
> 
> 时间：2013-02-26T14:09:13.003
> 
> 标签：jquery, css, range, css-position, shadow-dom

我正在为 的阴影 DOM 元素编辑 CSS `input[type=range]`，并且我想扩展滑块拇指以覆盖下面的 div，为此，我必须将`position`拇指设置为`fixed`。问题是，在下面必须位于拇指下方的 div 中，我有一些 div 具有`position: relative`（并且不能以不同的方式定位），它们以某种方式将它们放在前景中，覆盖拇指。

这是代码。但是我做了一个[jsFiddle](http://jsfiddle.net/goffreder/x4Umt/)来更好地解释我的问题。

## HTML

```
<input type="range" id="slider" />
<div id="container">
    <div id="left"></div>
    <div id="right">
        <div id="content"></div>
    </div>
</div> 
```

## CSS：

```
#slider {
    width: 400px;
    -webkit-appearance: none;
    background: red;
    height: 30px;
}

#slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 10px;
    height: 85px;
    background: black;
    position: fixed;
    top: 10px;
    left: 120px;
}

#container {
    width: 400px;
}

#left {
    width: 100px;
    height: 50px;
    background: blue;
    float: left;
}

#right {
    background: green;
    width: 300px;
    height: 50px;
}

#content {
    position: relative;
    width: 50px;
    height: 25px;
    background: yellow;
    left: 100px;
    top: 10px;
} 
```

基本上，我希望黑条覆盖黄色 div，而不`position: relative`从该 div 中删除属性。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:21:43.500

您需要指定`z-index`以更改除 之外的任何元素的自然堆叠顺序`static`。

所以我在这里添加了一个值 1 `z-index`：

```
#slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 10px;
    height: 85px;
    background: black;
    position: fixed;
    top: 10px;
    left: 120px;
    z-index: 1;
} 
```

[在这里](http://jsfiddle.net/barney/x4Umt/1/)叉你的小提琴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-30T19:51:06.083

将位置设置为相对对我有用。

启动有问题的 css

```
 input[type=range]::-webkit-slider-thumb {
  box-shadow: 0px 0px 0px #000000, 0px 0px 0px #0d0d0d;
  border: 0px solid #000000;
  height: 30px;
  width: 15px;
  border-radius: 0px;
  background: #004687;
  cursor: pointer;
  -webkit-appearance: none;
  margin-top: -0.2px;
  z-index:5;
} 
```

结束css：

```
 input[type=range]::-webkit-slider-thumb {
    box-shadow: 0px 0px 0px #000000, 0px 0px 0px #0d0d0d;
      border: 0px solid #000000;
      height: 30px;
      width: 15px;
      border-radius: 0px;
      background: #004687;
      cursor: pointer;
      -webkit-appearance: none;
      margin-top: -0.2px;
      z-index:5;

  position:relative;
} 
```

# html - DIV 溢出覆盖

> ID：15091187
> 
> 赞同：0
> 
> 时间：2013-02-26T14:09:13.730
> 
> 标签：html, css

有人可以告诉我如何在其中制作我的内容

```
`#content-text` 
```

当内容不适合时显示 y 轴滚动。目前它遵循 body 元素中的隐藏标签。谢谢！

```
body,html{
    width: 100%;
    height: 100%;
    overflow: hidden;
    background: #000;
    padding: 0;
    margin: 0;
    border: 0;
    z-index: 100;
    font-size: 100%;
}

#content-bg {

    padding: 2em;
    background-color: #362720;
    position: absolute;
    width: 33%;
    right: 3.3%;
    bottom: 6.4em;
    cursor: default;
    opacity: .7;
    z-index: 3;
    min-height: 20%;
    overflow:auto !important;
    overflow-style:auto !important;

}

#content-text {

    font-family: Arial, Helvetica, sans-serif;
    font-size: 0.7em;
    color: #FFF;
    z-index: 4;
    font-weight: lighter;
    overflow:auto !important;
    overflow-style:auto !important;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:12:16.860

将高度或最大高度值设置为#content-text，然后设置

```
overflow-y:auto; overflow-x:hidden; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T14:13:16.017

```
#content-bg {
    padding: 2em;
    background-color: #362720;
    position: absolute;
    width: 33%;
    right: 3.3%;
    bottom: 6.4em;
    cursor: default;
    opacity: .7;
    z-index: 3;
    min-height: 20%;
    overflow-y:auto;
    overflow-x:hidden
} 
```

# java - 从字符串中删除一个单词后重新格式化字符串

> ID：15091191
> 
> 赞同：0
> 
> 时间：2013-02-26T14:09:24.063
> 
> 标签：java

我有一个字符串为“AASS MON 01 2013 365.00 HJJ Call”

我需要从上面的字符串中删除字符串 HJJ 并需要输出为

AASS MON 01 2013 365.00 HJJ 通话

我尝试了以下事情

```
if(symbol.contains("HJJ"))
{
symbol = symbol.replace("HJJ","");
} 
```

但是有了这个我得到的输出为

```
AASS MON 01 2013 365.00  Call  ( One extra space before call ) 
```

我希望它在哪里

```
AASS MON 01 2013 365.00 Call 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T14:14:15.223

这是我通常使用的：

```
public static String removeExtraSpaces(String input) {
    return input.trim().replaceAll("  +", " ");
} 
```

`trim`删除开始和结束空格，同时用一个空格`replaceAll`替换任何一行空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T14:40:58.590

```
public class Trimimg
{
    public static void main(String[]args)
    {
        String str = "AASS MON 01 2013 365.00 HJJ Call";

        String newStr = str.replace(" HJJ", "");

        System.out.println(newStr);
    }
} 
```

# java - 在 Java 中遍历 List 的最佳方法？

> ID：15091199
> 
> 赞同：0
> 
> 时间：2013-02-26T14:09:45.760
> 
> 标签：java, performance, synchronization

我有一个在多线程环境中使用的并发列表。一旦建立了列表，大部分操作就是遍历它。我想知道以下两种方法中哪一种更有效，或者创建新列表与使用同步的成本是多少？或者也许还有其他更好的方法？

```
List<Object> list = new CopyOnWriteArrayList<Object>();

public int[] getAllValue1() {
    List<Object> list2 = new ArrayList<Object>(list);
    int[] data = new int[list2.size()];
    int i = 0;
    for (Object obj : list2) {
        data[i++] = obj.getValue();
    }
    return data;
}

public int[] getAllValue2() {
    synchronized (list) {
        int[] data = new int[list.size()];
        int i = 0;
        for (Object obj : list) {
            data[i++] = obj.getValue();
        }
        return data;
    }
} 
```

**UPDATE** getAllValue1()：它是线程安全的，因为它获取 CopyOnWriteList 的快照，而 CopyOnWriteList 本身就是线程安全列表。但是，正如 sharakan 指出的那样，成本是迭代 2 个列表，并创建一个本地对象 ArrayList，如果原始列表很大，这可能会很昂贵。

getAllValue2()：在同步块中也是线程安全的。（假设其他函数正确同步。）将它放在同步块中的原因是因为我想预先分配数组，以确保 .size() 调用与迭代同步。（迭代部分是线程安全的，因为它使用 CopyOnWriteList。）但是这里的成本是使用同步块的机会成本。如果有 100 万个客户端调用 getAllValue2()，每个客户端都必须等待。

所以我想答案真的取决于有多少并发用户需要读取数据。如果并发用户不多，可能方法2更好。否则，方法1更好。同意？

在我的使用中，我有几个并发客户端，可能首选方法 2。（顺便说一句，我的清单大约是 10k 大小）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:15:56.353

**编辑**（再次）：由于您在写入数组列表中使用了副本（应该更加细心），因此我将获取迭代器并使用它来初始化您的数组。由于迭代器是您请求时数组的快照，因此您可以在列表上同步以获取大小，然后进行迭代，而不必担心`ConcurrentModificationException`或让迭代器更改。

```
public int[] getAllValue1() {
    synchronized(list){
        int[] data = new int[list.size()];            
    }
    Iterator i = list.iterator();
    while(i.hasNext()){
        data[i++] = i.next().getValue();
    }
    return data;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T14:23:44.717

getAllValue1 看起来不错，因为您需要根据对象的 aa 字段返回原始类型数组。这将是两次迭代，但一致，您不会在阅读器线程之间引起任何争用。您尚未发布任何分析结果，但除非您的列表很大，否则我更担心多线程环境中的争用，而不是两次完整迭代的成本。

如果您更改 API，则可以删除一次迭代。最简单的方法是返回一个 Collection ，如下所示：

```
public Collection<Integer> getAllValue1() {
    List<Integer> list2 = new ArrayList<Integer>(list.size());
    for (Object obj : list2) {
        list2.add(obj.getValue());
    }
    return list2;
} 
```

如果您可以通过这种方式更改您的 API，那将是一种改进。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T14:23:49.247

我觉得第二种效率更高。原因是，在第一个中，您创建另一个列表作为本地创建。这意味着如果原始列表包含大量数据，它将复制所有数据。如果它包含数百万个数据，那么这将是一个问题。

不过有`list.toArray()`方法

Collections 界面还包含一些有用的东西

```
 Collection synchronizedCollection = Collections.synchronizedCollection(list); 
```

或者

```
List synchronizedList = Collections.synchronizedList(list); 
```

如果您需要对象 VALUE，而不是对象，请使用您的第二个代码。否则，您可以用上述函数替换第二个代码的适当部分，然后做任何您想做的事情。

# wpf - 如何在单独页面的一个页面中访问 SelectedItem

> ID：15091200
> 
> 赞同：1
> 
> 时间：2013-02-26T14:09:48.863
> 
> 标签：wpf, wpf-controls, wpfdatagrid

我在两个页面上分别有两个数据网格，例如父页面上的父网格和子页面上的子网格。如何访问父页面的选定项到子页面？

当两个数据网格都放在同一页面上时，所选项目有效。但是当我在每一页上分别放置网格时，它就不起作用了。

父页面的 XAML

```
<Grid.Datacontext>
 <local:MainViewModel/>
</Grid.Datacontext>
 <DataGrid AutoGenerateColumns="False" ItemsSource="{Binding Persons}" SelectedItem="{Binding SelectedHost, Mode=TwoWay}" SelectionChanged="DataGrid_SelectionChanged"/> 
```

ParentPage 的代码隐藏

```
private void DataGrid_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
         ChildPage _page = new ChildPage();
        this.NavigationService.Navigate(_page);
    } 
```

子页面的 XAML

```
<DataGrid x:Name="ChildDatagrid" Margin="12,104,81,266" ItemsSource="{Binding Details}"/> 
```

主视图模型

```
//Datacontext
    public MainViewModel()
    {
        this.Persons = Person.GetPersons();
    }

    // for Person Datagrid
    private ObservableCollection<Person> personValues;
    public ObservableCollection<Person> Persons
    {
        get { return personValues; }
        set { this.SetProperty<ObservableCollection<Person>>(ref this.personValues, value); }
    }

   //for the PersonDetails datagrid
    public ObservableCollection<PersonDetails> Details
    {
        get
        {
            if (this.Selectedperson == null)
            {
                return null;
            }
            return this.LoadDetails(this.Selectedperson.PersonID);
        }

    }
    // method to load the persondetails data
    private ObservableCollection<PersonDetails> LoadDetails(int personID)
    {
        ObservableCollection<PersonDetails> details = new ObservableCollection<PersonDetails>();
        foreach (PersonDetails detail in PersonDetails.GetDetails().Where(item => item.PersonID == personID))
        {
            details.Add(detail);
        }
        return details;
    }

    // SelectedPerson Property
    private Person selectedPersonValue;
    public Person Selectedperson
    {
        get { return selectedPersonValue; }
        set
        {
            this.SetProperty<Person>(ref this.selectedPersonValue, value);
            this.RaiseNotification("Details");
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:30:55.287

编辑：帖子已更改以反映新信息；

我以前从未将 NavigationService 与 WPF 一起使用，所以我不能 100% 确定您可以使用什么，所以如果我错过了什么，请道歉。

但是，如果您将`Details`Collection 移至`Child`Form，并使其成为标准属性；

```
private ObservableCollection<PersonDetails> _Details;
public ObservableCollection<PersonDetails> Details {
    get { return _Details; }
    set {
            if (value.Equals(_Details) == false)
            {
                _Details = value;
                OnPropertyChanged("Details");
            }
    }
} 
```

假设您引用了您的`MainViewModel`，然后您可以使用导航到您的页面；

```
private void DataGrid_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    ChildPage _page = new ChildPage();
    _page.Details = MainViewModel.LoadDetails(PersonID);
    this.NavigationService.Navigate(_page);
} 
```

作为说明，我不喜欢从代码后面调用导航服务的想法，因为这会使代码混乱且难以测试。

Jesse Liberty 有一篇关于使用 MVVM Light Framework 并允许 ViewModel 直接调用 Navigate Service 的好帖子；

[http://jesseliberty.com/2012/01/17/calling-navigate-from-the-view-model/](http://jesseliberty.com/2012/01/17/calling-navigate-from-the-view-model/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T14:24:57.453

您应该制作一个 ViewModel 或 Object，将它们传递到两个页面并将您的网格绑定到它。这样他们将保持同步。

替代选项是使用 EventAggregator 在您的页面之间发送消息。

如果你使用 WPF，你应该看看 Prism。存在许多内置功能。

# perl - 如何在 awk 或 shell 中实现这一点？

> ID：15091201
> 
> 赞同：2
> 
> 时间：2013-02-26T14:09:51.463
> 
> 标签：perl, shell, join, sed, awk

输入文件1：

```
5 5 NA
NA NA 1
2 NA 2 
```

输入文件2：

```
1 1 1
2 NA 2
3 NA NA
NA 4 4
5 5 5
NA NA 6 
```

输出：

```
3 NA NA
NA 4 4
NA NA 6 
```

目的是：在 file1 中，将每一行中任何不属于集合的项`NA`设置为一个集合，然后在 file2 中，消除其字段在该集合中的行。有人对此有想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T14:28:29.400

你可以这样做`grep`：

```
$ egrep -o '[0-9]+' file1 | fgrep -wvf - file2
3 NA NA
NA 4 4
NA NA 6 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T14:22:12.540

添加*任何*不是“NA”的项目：

```
awk -f script.awk file1 file2 
```

内容`script.awk`：

```
FNR==NR {
    for (i=1;i<=NF;i++) {
        if ($i != "NA") {
            a[$i]++
        }
    }
    next
}

{
    for (j=1;j<=NF;j++) {
        if ($j in a) {
            next
        }
    }
}1 
```

结果：

```
3 NA NA
NA 4 4
NA NA 6 
```

或者，这是单线：

```
awk 'FNR==NR { for (i=1;i<=NF;i++) if ($i != "NA") a[$i]++; next } { for (j=1;j<=NF;j++) if ($j in a) next }1' file1 file2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T16:30:02.910

If the column position of the values matters:

```
awk '
  NR==FNR{
    for(i=1; i<=NF; i++) if($i!="NA") A[i,$i]=1
    next
  }
  {
    for(i=1; i<=NF; i++) if($i!=NA && A[i,$i]) next
    print 
  }
' file1 file2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T14:25:28.780

awk 单线：

```
awk 'NR==FNR{for(i=1;i<=NF;i++)if($i!="NA"){a[$i];break} next}{for(i=1;i<=NF;i++)if($i in a)next;}1' file1 file2 
```

使用您的数据：

```
kent$  awk 'NR==FNR{for(i=1;i<=NF;i++)if($i!="NA"){a[$i];break;} next}{for(i=1;i<=NF;i++)if($i in a)next;}1' file1 file2
3 NA NA
NA 4 4
NA NA 6 
```

# mysql - 在 MySQL 中用连接替换子查询

> ID：15091212
> 
> 赞同：7
> 
> 时间：2013-02-26T14:10:26.647
> 
> 标签：mysql, sql, join, subquery

我有以下查询：

```
SELECT PKID, QuestionText, Type 
FROM Questions 
WHERE PKID IN (
    SELECT FirstQuestion 
    FROM Batch 
    WHERE BatchNumber IN (
        SELECT BatchNumber 
        FROM User 
        WHERE RandomString = '$key'
    )
) 
```

我听说子查询效率低下，并且首选连接。但是，我找不到任何解释如何将 3 层以上的子查询转换为连接表示法的内容，也无法理解它。

谁能解释怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T14:12:04.520

```
SELECT  DISTINCT a.*
FROM    Questions a
        INNER JOIN Batch b
            ON a.PKID = b.FirstQuestion
        INNER JOIN User c
            ON b.BatchNumber = c.BatchNumber
WHERE   c.RandomString = '$key' 
```

之所以`DISTINCT`指定，是因为可能存在与其他表上的多行匹配的行，导致结果出现重复记录。但是由于您只对 table 上的记录感兴趣`Questions`，`DISTINCT`因此关键字就足够了。

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T14:12:45.097

尝试 ：

```
SELECT q.PKID, q.QuestionText, q.Type 
FROM Questions q
INNER JOIN Batch b ON q.PKID = b.FirstQuestion
INNER JOIN User u ON u.BatchNumber = q.BatchNumber
WHERE u.RandomString = '$key' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T14:14:15.060

```
select
    q.pkid,
    q.questiontext,
    q.type
from user u
join batch b
    on u.batchnumber = b.batchnumber
join questions q
    on b.firstquestion = q.pkid
where u.randomstring = '$key' 
```

由于您的`WHERE`子句过滤`USER`表，因此从`FROM`子句中的那个开始。接下来，向后应用您的联接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T14:17:17.010

为了正确执行此操作，您需要`distinct`在子查询中。否则，您可能会在连接版本中增加行数：

```
SELECT q.PKID, q.QuestionText, q.Type 
FROM Questions q join
     (select distinct FirstQuestion
      from Batch b join user u
           on b.batchnumber = u.batchnumber and
              u.RandomString = '$key'
     ) fq
     on q.pkid = fq.FirstQuestion 
```

至于`in`or`join`版本是否更好。. . 那要看。在某些情况下，特别是如果字段被索引，`in`版本可能没问题。

# javascript - Javascript：理解文件接口

> ID：15091213
> 
> 赞同：6
> 
> 时间：2013-02-26T14:10:31.693
> 
> 标签：javascript, html, html-input

我开始使用 Javascript 并试图了解一些基础知识。这些问题并不是专门针对文件接口的，而是我想要弄清楚的。

在我的 HTML 文件中，我有一个文件类型输入。

```
<input type="file" id="fileInput" multiple/> 
```

然后在我的 JS 文件中，我有：

```
var fileVar = document.getElementById('fileInput').files[0]; 
```

这可以正常工作，并且 filevar 的类型为`File`.

现在我试图了解`files`属性是如何工作的。

在 W3 中，API 定义为：

```
 interface FileList {
      getter File? item(unsigned long index);
      readonly attribute unsigned long length;
    }; 
```

我试图弄清楚如何使用`files`. 它似乎没有在任何地方定义。数组`files`从何而来？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T14:16:05.407

该`files`属性返回一个[`FileList`](https://developer.mozilla.org/en-US/docs/DOM/FileList).

`files`是[`HTMLInputElement`Interface](https://developer.mozilla.org/en-US/docs/DOM/HTMLInputElement)`<input>`的一个属性，即标签的 DOM 接口。它由支持 HTML5 File API 的浏览器实现。

要访问单个文件，您可以像任何其他列表/数组一样遍历它们。例如：

```
var files = element.files; //where `element` is a file input element reference
//`files` references a FileList, you can iterate over it and access its File objects
for (var i = 0; i < files.length; i++) {
    console.log('File '+ i +"'s name = " + files[i].name +
        '; size: ' + files[i].size + ' bytes');
} 
```

[**演示**](http://jsbin.com/ujelax/8/edit)

MDN 也有一个很好的[使用 File API](https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications)的教程。

# android - 如何为钢琴创建布局

> ID：15091218
> 
> 赞同：3
> 
> 时间：2013-02-26T14:10:49.187
> 
> 标签：android, layout

我正在开发钢琴应用程序，并且在布局创建方面遇到了一些问题。我想创建如下布局：

[![在此处输入图像描述](../Images/dd6ce4c876051782abea38cbd8baafe4.png)](https://i.stack.imgur.com/UHsJQ.png)

但我只能创建这个

[![在此处输入图像描述](../Images/7f2b9b4bfd6e141304643f38ad5c8c7b.png)](https://i.stack.imgur.com/BSq8P.png)

现在我想添加所有黑色按钮，但问题是我无法在这些按钮上方添加视图。我怎样才能做到这一点？我当前的布局代码如下，请建议我如何实现这一点。现在我可以点击所有按钮，一旦我添加了所有按钮，那么每个按钮都应该是可点击的。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/white"
    android:orientation="horizontal" >

    <LinearLayout
        android:id="@+id/relativeLayout2"
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:background="@color/white"
        android:weightSum="1.5" >

        <ImageView
            android:id="@+id/bw1"
            android:layout_width="0dip"
            android:layout_height="match_parent"
            android:layout_weight=".1"
            android:background="@drawable/blacknew" />

        <ImageView
            android:id="@+id/bw2"
            android:layout_width="0dip"
            android:layout_height="match_parent"
            android:layout_weight=".1"
            android:background="@drawable/blacknew" />

        <ImageView
            android:id="@+id/bw3"
            android:layout_width="0dip"
            android:layout_height="match_parent"
            android:layout_weight=".1"
            android:background="@drawable/blacknew" />

        <ImageView
            android:id="@+id/bw4"
            android:layout_width="0dip"
            android:layout_height="match_parent"
            android:layout_weight=".1"
            android:background="@drawable/blacknew" />

        <ImageView
            android:id="@+id/bw5"
            android:layout_width="0dip"
            android:layout_height="match_parent"
            android:layout_weight=".1"
            android:background="@drawable/blacknew" />

        <ImageView
            android:id="@+id/bw6"
            android:layout_width="0dip"
            android:layout_height="match_parent"
            android:layout_weight=".1"
            android:background="@drawable/blacknew" />

        <ImageView
            android:id="@+id/bw7"
            android:layout_width="0dip"
            android:layout_height="match_parent"
            android:layout_weight=".1"
            android:background="@drawable/blacknew" />

        <ImageView
            android:id="@+id/bw8"
            android:layout_width="0dip"
            android:layout_height="match_parent"
            android:layout_weight=".1"
            android:background="@drawable/blacknew" />

        <ImageView
            android:id="@+id/bw9"
            android:layout_width="0dip"
            android:layout_height="match_parent"
            android:layout_weight=".1"
            android:background="@drawable/blacknew" />

        <ImageView
            android:id="@+id/bw10"
            android:layout_width="0dip"
            android:layout_height="match_parent"
            android:layout_weight=".1"
            android:background="@drawable/blacknew" />

        <ImageView
            android:id="@+id/bw11"
            android:layout_width="0dip"
            android:layout_height="match_parent"
            android:layout_weight=".1"
            android:background="@drawable/blacknew" />

        <ImageView
            android:id="@+id/bw12"
            android:layout_width="0dip"
            android:layout_height="match_parent"
            android:layout_weight=".1"
            android:background="@drawable/blacknew" />

        <ImageView
            android:id="@+id/bw13"
            android:layout_width="0dip"
            android:layout_height="match_parent"
            android:layout_weight=".1"
            android:background="@drawable/blacknew" />

        <ImageView
            android:id="@+id/bw14"
            android:layout_width="0dip"
            android:layout_height="match_parent"
            android:layout_weight=".1"
            android:background="@drawable/blacknew" />

        <ImageView
            android:id="@+id/bw15"
            android:layout_width="0dip"
            android:layout_height="match_parent"
            android:layout_weight=".1"
            android:background="@drawable/blacknew" />
    </LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T14:19:16.430

我建议你自己画这些白键和黑键。使用 View 类，覆盖 draw() 方法并使用它。当然你可以尝试使用RelativeLayout，但是以后你会遇到更多的问题（比如多次触摸和滑动检测）。

```
class Piano extends View {
    public Piano(Context context) {
        super(context);
        // TODO Auto-generated constructor stub
    }

    Bitmap whiteKey, blackKey;
    Paint paint = new Paint();

    public void draw(Canvas canvas) {
        if (whiteKey == null) {
            whiteKey = BitmapFactory.decodeResource(getResources(), R.drawable.whiteKey);
        }
        if (blackKey == null) {
            blackKey = BitmapFactory.decodeResource(getResources(), R.drawable.blackKey);
        }

        int keys = 10;

        // draw white keys
        for (int i = 0; i < keys; i++) {
            canvas.drawBitmap(whiteKey, i * whiteKey.getWidth(), 0, paint);
        }
        // draw black keys
        for (int i = 0; i < keys; i++) {
            if (i != 3 && i != 7) {
                canvas.drawBitmap(blackKey, i * blackKey.getWidth()+blackKey.getWidth()*0.5f, 0, paint);
            }
        }
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T14:18:44.977

你可以通过使用布局容器得到你想要的，这样就可以覆盖按钮和标签

# java - 适用于带有 Google 地图的 Android 导航应用程序的 Java 与 HTML5

> ID：15091225
> 
> 赞同：2
> 
> 时间：2013-02-26T14:11:29.917
> 
> 标签：java, android, html, google-maps, google-maps-api-3

我想开发一个导航应用程序，比如“找我的车”之类的。对于导航和地图，我想使用谷歌地图 api。
现在我必须决定，我想使用哪种语言。Java 与 HTML5。
我更熟悉 Java，但在 Google Maps API 文档中，使用 HTML5 开发会更容易，是吗？

该应用程序必须在安卓手机上运行。那么什么更好用：Java，我更熟悉，或者 HTML5，（我认为）更容易与谷歌地图结合使用。

希望你能帮助我，我必须在大约一小时内决定我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T14:41:50.073

一般来说，我不会说答案总是 Java。这实际上取决于您的需求，就像往常一样。

使用 HTML5（您可以尝试 PhoneGap：[http://phonegap.com/](http://phonegap.com/)）的好处是它可以在多个不同的系统上运行，而原生 Android 应用程序则不行。

另一方面，在原生 App 中，您将能够访问整个 Android API，它也会更加强大。

总而言之，如果你需要一个强大的实时处理图像的应用程序，你需要一个原生应用程序。但是，如果您想要一些可以在 HTML5 中轻松呈现的简单内容，并且您可能会在不同的系统（例如 IOS）上创建相同的应用程序，那么 HTML5 将使您赢得宝贵的时间。

如果没有明确的“好”方法可以遵循，只需选择您更舒服的方法：只要您可以创建一个满足您需求的应用程序，这将是最有效的方法。

请始终牢记，可以在 Android 原生应用程序中包含“WebView”，这意味着您可以两全其美。

在您的情况下，Android 似乎已经具有一些使用地图的不错功能（很可能比 HTML5 版本更好）。这可能有助于你的决定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T14:19:42.120

如果您在 Android 中开发应用程序（不是游戏），答案始终是 Java！总是！

并在其原生 Java 中在 Android 中实现地图就像 1.2.3 一样简单[https://developers.google.com/maps/documentation/android/](https://developers.google.com/maps/documentation/android/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-30T18:19:36.260

语言、IDE、平台……一切都是工具。您将使用什么取决于您的应用程序的需求。我使用这两种技术。当您开发一个使用与硬件相关的许多资源（例如加速度计、gps ......）的应用程序时，建议您使用本地语言，它可以节省电池，并且您可以最大限度地利用设备，提高性能.

现在，如果您要开发一个使用很少硬件资源的应用程序，最有趣的解决方案是 HTML5（例如：PhoneGap、SenchaTouch、Titanium 等）。

在我多年的经验中，在决定如何开发之前，我想知道我将开发什么，以便看看哪一个最能满足我的需要！

# html - 帮助弹出窗口的 html 代码

> ID：15091226
> 
> 赞同：1
> 
> 时间：2013-02-26T14:11:30.893
> 
> 标签：html, popup, window

我将使用 shopify 的系统，所以我仅限于我可以编辑的方式和页面。

我有一个页面是应用程序，但我希望该页面在加载时显示弹出式免责声明，然后他们才能看到该页面。

我被告知我不能编辑应用程序页面本身，但我可以在公共站点页脚中添加 javascript 代码来检查当前 url，如果它等于这个特定页面，然后创建一个弹出窗口。

我创建了一个包含免责声明信息的页面，因此我希望弹出窗口加载此页面的内容。

我相信我可以使用这个 div 标签加载内容

```
div id="popupinfo" pages.disclaimer.content div 
```

我不知道如何添加 if 语句来检查当前 url = site.com app.html then div id="popupinfo" pages.disclamier.content div

该站点使用他们自己的语言，称为 Liquid，因此使用双括号..但是我确信任何用于提取 html 页面内容的代码都可以使用。

我可以请一些帮助我如何

1.  查看当前页面
2.  如果页面 = xxx
3.  创建一个弹出窗口的最佳方法，用户必须单击是或确定按钮
4.  然后显示常规页面

提前致谢！

布罗库尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:17:26.290

```
if( document.URL === "myPage.html" ){
     // Disclaimer alert
     if (confirm('Do you agree to this Disclaimer?')){
         // Redirect
         window.location = "myNewPage.html";
     } else {
         // Do nothing
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T14:18:15.407

尝试这样的事情：

```
<html>
<head>
</head>
<script type="text/javascript">
function poponload()
{
   popupwindow=window.open("","mywindow","location=1,status=1,scrollbars=1,width=100,height=100");
    popupwindow.moveTo(0, 0);
}
</script>
<body onload="javascript: poponload()">
This is the page
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T15:51:01.013

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T14:14:27.587

只能在用户操作时打开弹出窗口，例如“点击”操作。

# sparql - 如何在某个国家找到人口超过 X 的城市

> ID：15091228
> 
> 赞同：4
> 
> 时间：2013-02-26T14:11:45.703
> 
> 标签：sparql, dbpedia

我试图在丹麦寻找人口超过 10 万的城市。

我可以使用以下代码找到丹麦的所有城市：

```
SELECT ?s ?o 
WHERE { 
   ?s a <http://dbpedia.org/class/yago/CitiesAndTownsInDenmark>
} 
```

使用此代码，我可以找到人口超过 100 000 的城市：

```
SELECT ?resource ?value 
WHERE { 
   ?resource <http://dbpedia.org/property/populationTotal> ?value 
   FILTER (?value > 100000)
}
ORDER BY ?resource ?value 
```

我将不胜感激有关如何组合这些查询的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T15:35:20.067

简单的：

```
SELECT ?resource ?value
WHERE { 
   ?resource a <http://dbpedia.org/class/yago/CitiesAndTownsInDenmark> .
   ?resource <http://dbpedia.org/property/populationTotal> ?value .
   FILTER (?value > 100000)
}
ORDER BY ?resource ?value 
```

换句话说：找到所有类型为“丹麦的城市或城镇”的事物，并找到它们的人口。您可以缩写查询，避免重复“资源”，使用“;” 而不是 '。'：

```
?resource a <http://dbpedia.org/class/yago/CitiesAndTownsInDenmark> ;
          <http://dbpedia.org/property/populationTotal> ?value . 
```

（如果你习惯 SQL '.' 本质上是一个自然连接：你有 ?resource 在每一边，所以加入那个值）

# c# - asp.net mvc 3.0 中的 RewritePath

> ID：15091232
> 
> 赞同：0
> 
> 时间：2013-02-26T14:11:51.243
> 
> 标签：c#, asp.net-mvc

我在旧的 asp.net mvc 应用程序中有这个：

```
HttpContext.Current.RewritePath(url, false) 
```

作为授权过程的一部分。它似乎不起作用。这可能是配置问题还是路由过程会吞下这个问题？任何指针将不胜感激。谢谢。

# actionscript-3 - 在 NumericStepper 中检测键盘事件

> ID：15091233
> 
> 赞同：0
> 
> 时间：2013-02-26T14:11:59.197
> 
> 标签：actionscript-3, numericstepper

我有一个带有 2 个按钮（确定和取消）和一个数字步进器的影片剪辑。

如果用户按下键盘上的回车键，我希望“确定”按钮功能运行，如果按下“BackSpace”，则“取消”功能。

我有这段代码可以检测我何时按下几乎所有的键，但当我按下“ENTER”或“BACKSPACE”时没有。

```
stage.addEventListener(KeyboardEvent.KEY_UP, onKeyPressed);

function onKeyPressed(event:KeyboardEvent):void
{

 if (event.keyCode==Keyboard.ENTER) {
       okBtnFunction();
 }
 if (event.keyCode==Keyboard.DELETE) {
       cancelBtnFunction();
 }
} 
```

我也尝试使用 event.charCode。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T16:23:37.183

由于 Flash 快捷方式，Enter 和 Backspace 键未启用，您可以在此链接中看到它：

[Flash AS3：未检测到 ENTER，但 CTRL+ENTER 工作正常](https://stackoverflow.com/questions/6462028/flash-as3-enter-does-not-get-detected-but-ctrlenter-works-fine)

如果您尝试在 NumericStepper 中获取键盘事件，则必须使用：

```
Object(this).YOU_NUMERIC_STEPPER.textField.addEventListener(KeyboardEvent.KEY_DOWN, keyboard_handler); 
```

请记住在数字步进器名称后使用**textField 。**

# java - 需要常量表达式吗？（Java switch 语句）

> ID：15091235
> 
> 赞同：3
> 
> 时间：2013-02-26T14:12:04.967
> 
> 标签：java, switch-statement

我不知道是什么导致了这个错误。我和我的老师检查了一遍，找不到问题所在。

```
import java.util.Scanner;
public class MailAssignment
{
public static void main(String [] args){

    Scanner userinput = new Scanner(System.in);
    char p;
    char f;
    double price = 0;
    System.out.println("First class or priority?");
    char type = userinput.next().charAt(0);
    System.out.println("How much does the package weigh? (in ounces)");
    double weight = userinput.nextDouble();

    switch (type){
     case p:
     if (weight > 16)
        price = weight * 3.95;

        else if (weight > 32) 
            price = (1.20 * (weight / 16));
       else
            price = 3.50 * weight;

        break;

     case f: 
     if (weight < 1 )
     price = 0.34;

     else if ( weight > 1)
     price = 0.34 + (weight * 21);

     else if (weight > 13)
     price = weight * 3.95;

        else if (weight > 32) 
            price = 1.20 * (weight / 16);
        else
            price = 3.50 * weight;

            break;

        }     

    System.out.println("Your price is: " +price);
    }
} 
```

它在编译时抛出“需要常量表达式”错误，它指向 case p: 行，但是，如果我切换它们，它也会为 f: 抛出它，所以我必须完全关闭它们。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-26T14:14:07.183

是的，`case`表达式必须是常量（或枚举常量名称）——您不能使用变量。有关详细信息，请参阅[Java 语言规范第 14.11 节（switch 语句）](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.11)。（您甚至还没有初始化变量，所以说实话，不清楚您期望发生什么。）

你的意思：

```
case 'p':
    ...

case 'f':
    ... 
```

? 这会将您的输入 ( `type`) 与字符*文字* `'p'`和`'f'`.

（顺便说一句，如果这难倒了你的老师，我担心他们是否适合教 Java。这是相当基本的东西。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T14:14:44.223

您不能在 case 语句中使用变量，它必须是文字字符（例如`'p'`, `'f'`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T14:23:17.650

In case 语句
您应该只使用 (字符开关) 或 (数字开关)
例如
您可以使用 (字符开关)

```
switch (type) {
case 'p':
.......
case 'f':
......
} 
```

不是

```
switch (type) {
case p:
.......
case f:
......
} 
```

# extjs - Extjs XTemplate 三个同级数组循环

> ID：15091238
> 
> 赞同：0
> 
> 时间：2013-02-26T14:12:06.633
> 
> 标签：extjs

我想在我的 extjs 代码中同时循环三个数组，但它不起作用！我一直在测试，两个数组的结果还可以，但是**三个数组不起作用**！

```
var json = {
    name : 'tom',
    rowTitleArr : ['1','2'],
    colTitleArr : ['a','b'],
    optionArr : ['x','y']
}
var tpl = [
    '{name}<br>',
    '<tpl for="rowTitleArr">',
        '--{.}<br>',
        '<tpl for="parent.colTitleArr">',
            '----{.}<br>',
            '<tpl for="parent.parent.optionArr">',
                '--------{.}<br>',
             '</tpl>',
        '</tpl>',
    '<tpl>'
];
var tpl = new Ext.XTemplate(tpl);
tpl.overwrite(panel.body,json); 
```

结果是：
tom
--1
----a
----b
--2
----a
----b
我认为应该是：
--1
----a
---- ----x
--------y
----b
--------x
--------y
--2
----a
----- ---x
--------y
----b
--------x
--------y
...为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T16:26:13.123

我得到这个工作的唯一方法是将你的 rowTitleArr 作为一个对象。

您的示例不起作用，因为值中不知道 parent.parent。您可以使用模板执行功能对其进行设置。

```
var data = {
        name: 'xxx',
        rowTitleArr: [{number:'1'},{number:'2'},{number:'3'}],
        colTitleArr: ['a', 'b', 'c'],
        optionArr : ['x','y']
    };
    var tpl = [
        '{name}',
        '<br/>',
        '<tpl for="rowTitleArr">',
        '----{number}<br>',
        '<tpl exec="values.parent = parent;"></tpl>',
            '<tpl for="parent.colTitleArr">',
        '---------{.}<br>',                    
                    '<tpl for="parent.parent.optionArr">',
                '----------------{.}<br>',
             '</tpl>',
            '</tpl>',
        '</tpl>']; 
```

小提琴：http: [//jsfiddle.net/johanhaest/2WEVE/1/](http://jsfiddle.net/johanhaest/2WEVE/1/)

# h.264 - RTSP 上音频和视频的相同媒体格式

> ID：15091246
> 
> 赞同：4
> 
> 时间：2013-02-26T14:12:34.407
> 
> 标签：h.264, rtsp, rtp, mpeg-4, sdp

我们公司开发了一个摄像头监控软件，我们主要使用 RTSP 与设备进行通信（但我们支持所需的任何协议），我们开发了自己的 RTSP 客户端和解析器

今天我们正在研究一个新相机的集成，我们发现了一个有趣的场景，相机将动态有效负载 96 映射到音频和视频数据包，请参阅 SDP 描述：

```
RTSP/1.0 200 OK
CSeq: 2
Date: Sat, Jan 01 2000 19:39:38 GMT
Content-Base: rtsp://10.1.39.174:8557/PSIA/Streaming/channels/2?videoCodecType=H.264/
Content-Type: application/sdp
Content-Length: 830

v=0
o=- 946754247689123 1 IN IP4 10.1.39.174
s=RTSP/RTP stream from IPNC
i=2?videoCodecType=H.264
t=0 0
a=tool:LIVE555 Streaming Media v2010.07.29
a=type:broadcast
a=control:*
a=range:npt=0-
a=x-qt-text-nam:RTSP/RTP stream from IPNC
a=x-qt-text-inf:2?videoCodecType=H.264
m=video 0 RTP/AVP 96
c=IN IP4 0.0.0.0
b=AS:4000
a=rtpmap:96 H264/90000
a=fmtp:96 packetization-mode=1;profile-level-id=64001F;sprop-parameter-   sets=Z2QAKK2EBUViuKxUdCAqKxXFYqOhAVFYrisVHQgKisVxWKjoQFRWK4rFR0ICorFcVio6ECSFITk8nyfk/k/J8nm5s00IEkKQnJ5Pk/J/J+T5PNzZprQCgC3YCqQAAAMABAAAAwJZgQAB6EgAAiVQve+F4RCNQAAAAAE=,aO48sA==
a=control:track1
m=audio 0 RTP/AVP 96
c=IN IP4 0.0.0.0
b=AS:128
a=rtpmap:96 PCMU/16000
a=control:track2
m=application 0 RTP/AVP 96
c=IN IP4 0.0.0.0
b=AS:64
a=rtpmap:96 vnd.onvif.metadata/90000
a=control:track3 
```

如你看到的：

```
m=video 0 RTP/AVP 96
m=audio 0 RTP/AVP 96 
```

问题是我们使用这个映射来识别接收到的 RTP 数据包的压缩。我一直认为每种媒体都会有不同的映射，比如视频 96 和音频 97（甚至静态映射，比如 PCMU 的 0），但是这个设备对所有媒体使用相同的映射，所以，我们的解析器不会工作，因为它将使用有效负载 96 接收的音频数据包识别为视频数据包，并将它们直接发送到视频解码器，当然它不会工作......

我已经检查过 VLC 工作正常，但我坚信 VLC 不使用此映射来拆分数据包，而是使用通道标识（在 TCP 中）或不同的 UDP 端口来识别哪些数据包属于哪个媒体......但是我们已经构建了我们的架构来根据负载类型拆分数据包

所以我问......将音频和视频都映射到相同的动态有效载荷编号（96）是否正确？

这是我第一次遇到这个问题，我需要知道我们是否必须更改整个 RTSP 客户端以使用通道而不是 Payload 格式来识别媒体，或者相机端是否存在实现错误他们应该将其他有效载荷编号链接到每个不同的媒体（96 个视频、97 个音频、98 个应用程序......）

有谁知道这种做法（对所有媒体使用相同的有效载荷编号）是否有效？？？

我们已经使用 RFC 规范实现了 RTSP 客户端和 SDP 解析器，但我没有发现任何与对所有媒体使用相同有效载荷编号相关的内容，在所有示例中，它们总是为每个媒体分配不同的有效载荷编号......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T02:50:16.330

这是一个非常好的问题。从您发布的 SDP 的语义来看，这台相机似乎正在执行[RFC 2326](http://www.ietf.org/rfc/rfc2326.txt)中基于字段存在的`RTSP`规范。`a=control`

在本规范中，可以观察到每个媒体有效载荷都有一个特定的控制参数，第一个控制语句是`a=control:*`。从规范的第 83 页，我觉得音频和视频流可以设置为

```
audio = rtsp://10.1.39.174:8557/PSIA/Streaming/channels/track2 
```

和

```
video = rtsp://10.1.39.174:8557/PSIA/Streaming/channels/track1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:20:37.630

好问题，范围 96-127 是为动态有效负载类型定义的，RFC 没有具体说明使用的类型是否应该在多个描述符中是唯一的。当然，如果它们是独一无二的，事情会更清楚。然而，他们不必[像看起来那样](https://www.rfc-editor.org/rfc/rfc4566#section-5.14)。没有混合有效负载类型，因为它们都是在其自己的媒体公告下单独定义的，即使用视频 96 和音频 96 看起来是有效的。更不用说如果现实世界的设备以这种方式定义会话，那么 RTSP 客户端应该为此做好准备。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T21:11:14.647

在我看来，上述 SDP 是有效的。我已经看到媒体类型包含相同的音频和视频媒体通道的有效载荷编号。

几个想法： 1\. 看看你是否可以要求这台相机只独立地流式传输音频或视频。这样，您在技术上可以拥有两个 RTSP 会话（一个用于音频，一个用于视频）；这样你就可以确切地知道什么样的 RTP 流量正在向你走来；并基于该信息使用音频或视频解码器。

1.  如果这对您来说真的是一个很大的提升，请检查传入的 RTP 数据包是否可能没有任何其他额外信息可以让您推断它是音频还是视频通道。

# ldap - 排除计算机的 LDAP 查询

> ID：15091252
> 
> 赞同：6
> 
> 时间：2013-02-26T14:12:55.713
> 
> 标签：ldap, ldap-query

我从未做过任何 DAP/AD 管理或查询。现在我有一个任务，我需要获取我们公司广告中的所有用户；但不断在查询结果中获取计算机。我使用 objectClass=user 并且仍然获得 AD 中的所有计算机。我还缺少什么？有没有办法说“objectClass=user 而不是 objectClass=Computer”？谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-26T14:22:02.123

试试这个过滤器：`(&(objectClass=user)(!(objectClass=computer)))`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-12-19T14:29:13.180

如果您在 2019 年来到这里，那么上面的答案现在已经无关紧要了。我一直在使用以下内容，并且使用运算符可以完美运行

```
Get-ADObject -IncludeDeletedObjects -Filter {(ObjectClass -eq "user") 
    -and (-not (objectClass -eq "computer")) -and (Deleted -eq $true)} 
```

# c++ - 在 C++ 中正确使用标头

> ID：15091258
> 
> 赞同：2
> 
> 时间：2013-02-26T14:13:10.527
> 
> 标签：c++, header-files

我正在玩 C++ 中的多个文件，并且我得到了以下示例，但无法编译：

主文件

```
#include <iostream>
#include "const.hpp"

using namespace std;

int main()
{
    extern double var;
    var = 5;
    cout << var << endl;

    return 0;
} 
```

fct.cpp

```
#include <iostream>
#include "const.hpp"

using namespace std;

void func()
{
    extern double var;
    cout << var << endl;

} 
```

常量.hpp

```
#ifndef CONST_H
#define CONST_H

double var;

#endif 
```

我的程序无法编译，因为显然存在 var 的多重定义。我是否正确地假设，基于这个例子，头文件*不*打算用于声明变量，就像我上面的例子一样？

相反，正确的过程是在 .cpp 文件中声明所有变量并使用标题告诉每个（相关）翻译单元 .cpp 文件包含外部（*extern*）变量？

编辑：我的规则的例外是在处理常量变量（const）时是否正确，它应该在标题中定义？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T14:14:11.207

`double var;`是一个定义 - 在多个文件中包含该标题将违反一个定义规则。如果您想要一个全局（三思而后行），您必须在标题中**声明**`extern double var;`它 -并将定义移动到单个实现文件中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T14:18:34.373

> 我是否正确地假设，基于这个例子，头文件不打算用于声明变量，就像我上面的例子一样？

头文件用于声明变量，但您的头文件*定义*了一个具有外部链接的全局变量，并且它被多次导入。然后链接器合理地抱怨多重定义的符号。

> 相反，正确的程序是在 .cpp 文件中声明所有变量，并使用标头告诉每个（相关）翻译单元 .cpp 文件包含外部（extern）变量？

是的，除了您不会在该文件中*声明*全局变量`.cpp`，而是为它们提供*定义*。

`const.hpp`

```
 #ifndef CONST_H
    #define CONST_H

    // ...

    extern double var;
//  ^^^^^^

    #endif 
```

`globals.cpp`（可以是任何其他`.cpp`文件，只要它*只有一个*）

```
 // ...

    double var; 
```

此外，如果您想知道在这种情况下您的包含守卫无法保护您的原因，[**这**](https://stackoverflow.com/questions/14909997/why-arent-my-include-guards-preventing-recursive-inclusion-and-multiple-symbol/14909999#14909999)可能会对您有所帮助。

> 在处理常量变量 (const) 时，我的上述规则的一个例外是否正确，它应该在标题中定义？

从某种意义上说，是的。默认情况下，全局变量限定为`const`具有*内部链接*，这意味着每个翻译单元都将收到该变量的*私有*副本。因此，即使变量的定义包含在多个翻译单元中，链接器也不会抱怨多重定义的符号。

# c# - 从复选框获取 GridView 中的 ID

> ID：15091260
> 
> 赞同：0
> 
> 时间：2013-02-26T14:13:12.377
> 
> 标签：c#, asp.net, gridview

我有以下 GridView -

```
<ItemTemplate>

         <asp:CheckBox ID="CheckBox1" runat="server" OnCheckedChanged="checkButton_OnClick"  AutoPostBack="true"/>

     </ItemTemplate>

  </asp:TemplateField>

        <asp:BoundField HeaderText="tID" DataField="tID" 
                        SortExpression="tID" HeaderStyle-CssClass = "hideGridColumn" ItemStyle-CssClass="hideGridColumn"></asp:BoundField>
        <asp:BoundField HeaderText="Name" HeaderStyle-HorizontalAlign=Center DataField="NAME" 
                        SortExpression="NAME" ItemStyle-HorizontalAlign=Center></asp:BoundField>

    </Columns> 
```

然后找到检查复选框的行 -

```
 foreach (GridViewRow gvr in table_example.Rows)
        {
            if (((CheckBox)gvr.FindControl("CheckBox1")).Checked == true)
            {
                //Here I need the tID of the row that is checked

                WebService1 ws = new WebService1();
                ws.addID(tID);
            }
        } 
```

我需要获取`tID`选中行的，我试过 -

```
int tID = gvr.cells["tID"]; 
```

然而这并没有奏效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:18:45.837

要获取当前行 ID，您将执行以下操作：gvr.ID。但我不确定您是否真的想使用行 ID 或索引。我猜你正在寻找这样的东西（考虑到索引 1 指的是“tID”BoundField）：gvr.Cells[1].Text。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T14:22:01.877

```
foreach (GridViewRow gvr in table_example.Rows)
        {
            if (((CheckBox)gvr.FindControl("CheckBox1")).Checked == true)
            {
                //Here I need the tID of the row that is checked

int tID = Convert.ToInt32(gvr.Cells[1].Text);
                WebService1 ws = new WebService1();
                ws.addID(tID);
            }
        } 
```

试试这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T14:24:41.630

不需要在 checkButton_OnClick 事件上进行此循环，您可以编写如下代码：

```
protected void checkButton_OnClick (object sender, EventArgs e)
    {
        CheckBox chk= (CheckBox)sender;
        GridViewRow gridViewRow = (GridViewRow)chk.NamingContainer;
        int rowindex = gridViewRow.RowIndex;
    } 
```

# scala - 使用 Slick 更新记录时遇到问题

> ID：15091270
> 
> 赞同：6
> 
> 时间：2013-02-26T14:13:39.570
> 
> 标签：scala, slick

类和表定义如下所示：

```
case class Group(
  id: Long = -1,
  id_parent: Long = -1,
  label: String = "",
  description: String = "")

  object Groups extends Table[Group]("GROUPS") {
    def id = column[Long]("ID", O.PrimaryKey, O.AutoInc)
    def id_parent = column[Long]("ID_PARENT")
    def label = column[String]("LABEL")
    def description = column[String]("DESC")
    def * = id ~ id_parent ~ label ~ design <> (Group, Group.unapply _)
    def autoInc = id_parent ~ label ~ design returning id into {
      case ((_, _, _), id) => id
    }
  } 
```

要更新记录，我可以这样做：

```
 def updateGroup(id: Long) = Groups.where(_.id === id)

  def updateGroup(g: Group)(implicit session: Session) = updateGroup(g.id).update(g) 
```

但我无法使用 for 表达式获得更新：

```
 val findGById = for {
    id <- Parameters[Long]
    g <- Groups; if g.id === id
  } yield g

  def updateGroupX(g: Group)(implicit session: Session) = findGById(g.id).update(g)
  ----------------------------------------------------------------------------^
Error: value update is not a member of scala.slick.jdbc.MutatingUnitInvoker[com.exp.Group] 
```

我显然在[文档中遗漏了一些东西。](http://slick.typesafe.com/doc/1.0.0/lifted-embedding.html#updating)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T21:58:17.250

该`update`方法由 type 提供[`UpdateInvoker`](http://slick.typesafe.com/doc/1.0.0/api/index.html#scala.slick.driver.BasicInvokerComponent$UpdateInvoker)。如果它们在范围内，则可以`Query`通过方法`productQueryToUpdateInvoker`和/或`tableQueryToUpdateInvoker`（在 中找到）从 a 隐式创建该类型的实例。[`BasicProfile`](http://slick.typesafe.com/doc/1.0.0/api/index.html#scala.slick.driver.BasicProfile$Implicits)

现在您的`findById`方法的类型不是 a`Query`而是 a `BasicQueryTemplate[Long, Group]`。查看文档，我找不到从 a `BasicQueryTemplate`（它是 的子类型`StatementInvoker`）到 a 的方法`UpdateInvoker`，既不是隐含的也不是显式的。想一想，这对我来说有点道理，因为我理解查询模板（调用程序）是`Query`在参数化之前很早就从抽象语法树（）“编译”为准备好的语句的东西，而更新调用程序只能从抽象语法树（即`Query`对象）构建，因为它需要分析查询并提取其参数/列。至少目前看来是这样的。

考虑到这一点，一个可能的解决方案展开：

```
def findGById(id: Long) = for {
  g <- Groups; if g.id === id
} yield g

def updateGroupX(g: Group)(implicit session: Session) = findGById(g.id).update(g) 
```

Where`findById(id: Long)`具有`Query[Groups, Group]`转换`productQueryToUpdateInvoker`为`UpdateInvoker[Group]`最终`update`可以调用方法的类型的类型。

希望这有帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-05T18:19:24.787

参考[http://madnessoftechnology.blogspot.ru/2013/01/database-record-updates-with-slick-in.html](http://madnessoftechnology.blogspot.ru/2013/01/database-record-updates-with-slick-in.html)

我今天坚持更新，这篇博文对我帮助很大。另请参阅帖子下的第一条评论。

# angularjs - Angularjs过滤并选择所有复选框

> ID：15091271
> 
> 赞同：8
> 
> 时间：2013-02-26T14:13:39.947
> 
> 标签：angularjs

我有一系列要展示的项目

```
<tr ng-repeat="i in items | filter:search_text" ...> 
```

这些项目有一个复选框，表示“选中”或未选中。当我需要执行诸如调用将删除所有选定项目的删除函数之类的操作时，如何知道过滤器显示了哪些项目？

已选择（在复选框中选中）然后通过过滤隐藏的项目仍被选中。我需要一种方法来知道当前屏幕上的项目。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-26T14:26:16.343

您可以使用 $filter 在控制器中调用过滤器。

```
app.controller('MyCtrl', function($scope, $filter){ 
   var filter = $filter('filter');

   $scope.items = [/* your items here */]

   $scope.selectAllFilteredItems = function (){
      var filtered = filter($scope.items, $scope.search_text);

      angular.forEach(filtered, function(item) {
         item.selected = true;
      });
   };
}); 
```

然后，您将调用`selectAllFilteredItems()`ng-click 或您需要的任何其他位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-16T23:24:23.063

不是真的超级抛光，但它的工作原理。

在您的控制器中

```
var filter = $filter('filter');
$scope.item_ids = [];
$scope.selectAllFilteredItems = function (){
    var filtered = filter($scope.items, $scope.searchText);
    angular.forEach(filtered, function(item, key) {
        if($scope.item_ids.indexOf(item.id) == -1){
            $scope.item_ids.push(item.id);
            $scope.items[key].selected = true;
        }else{
            $scope.item_ids.splice($scope.item_ids.indexOf(item.id),1);
            $scope.items[key].selected = false;
        }
    });
}; 
```

然后在表格中，您有一个复选框来全选或取消全选。

```
<table class='table table-striped'>
    <tr>
        <th><input type="checkbox" ng-click="selectAllFilteredItems()"></th>
    </tr>
    <tr ng-repeat="item in items | filter:searchText">
        <td><input type="checkbox" ng-model="item.selected"></td>
    </tr>
</table> 
```

# oracle - Oracle根据临时表中的行从表中删除行

> ID：15091272
> 
> 赞同：0
> 
> 时间：2013-02-26T14:13:40.153
> 
> 标签：oracle, temp-tables

我有一张这样的桌子：

```
PermTable
Col1 Primary Key
Col2 Primary Key
Col3 Primary Key
Other rows 
```

我正在将文件中的数据加载到与 PermTable 具有基本相同结构的临时表中：

```
TempTable
Col1 Primary Key
Col2 Primary Key
Col3 Primary Key
Other rows 
```

我希望从 PermTable 中删除 PermTable 中不存在于 TempTable 中的任何行

我使用的 SQL 是：

```
DELETE FROM PermTable WHERE NOT EXISTS
  ( SELECT NULL FROM TempTable
    WHERE TempTable.Col1 = PermTable.Col1
     AND TempTable.Col2 = PermTable.Col2
     AND TempTable.Col3 = PermTable.Col3 ) 
```

这是行不通的。它删除的内容超出了应有的范围。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:32:19.420

截断 PermTable 并将所有临时记录插入其中不是更简单吗？

TRUNCATE TABLE PERMTABLE -- 删除所有记录 INSERT INTO PERMTABLE (SELECT * FROM TEMPTABLE) -- 结构相同...

特别是因为您正在用临时表替换 permtable 的内容？

# c# - 谁更改文件？

> ID：15091281
> 
> 赞同：0
> 
> 时间：2013-02-26T14:14:06.760
> 
> 标签：c#, monitoring, filesystemwatcher

我正在编写一个 C# 程序，它记录 UNC 路径中的所有更改。我使用 c# 中的 File-System-Watcher 来记录我的文件 \D/X/Y(UNC 路径) 中的所有更改。

它工作得很好，但现在我的问题是：如何记录客户端更改/删除文件等？

编辑：UNC路径将在整个网络中看到，我想记录哪个用户更改/删除了UNC路径中的文件等（网络中的每个人都可以更改文件）。每个编辑都将实时保存在 .txt 文件中。这样我就可以看到：谁：PC2什么：更改文件：X谁：PC1什么：删除文件：Y

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:20:47.910

使用以下代码获取登录用户的凭据

```
string currentUser = System.Security.Principal.WindowsIdentity.GetCurrent().Name; 
```

如果你把它放在文件更改/删除的代码所在的任何地方，这应该可以工作。

看看[这个](https://stackoverflow.com/questions/290694/how-do-you-monitor-file-access-and-changes-on-a-file-server-by-user-name)

您基本上需要为此创建一个审核过程，我不知道有一种内置方法可以查找诸如上次更改文件的信息之类的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T14:22:24.740

我不确定您所说的“谁”在声明或修改文件是什么意思。据我所知，您可以查看文件的属性（如果您有权查看权限）、当前用户（请参阅 Jacooobley 的回答）以及锁定文件的进程。

我不相信您可以看到最后影响该文件的用户。

# c# - KeyDown 事件没有触发？

> ID：15091283
> 
> 赞同：1
> 
> 时间：2013-02-26T14:14:07.653
> 
> 标签：c#, winforms, events, keydown, onkeydown

在编码一个小游戏的时候，遇到了一个问题；我的表单`KeyDown`和`KeyUp`事件根本不会触发。

这是表单的代码：

```
public class GameForm : Form
{
    private ControllableBlock player;

    public GameForm()
    {
        KeyDown += Game_KeyDown;
        KeyUp += Game_KeyUp;

        player = new ControllableBlock();
        Controls.Add(player);
    }

    private void Game_KeyDown(object sender, KeyEventArgs e)
    {
        player.ReactToKey(e.KeyCode);
    }

    private void Game_KeyUp(object sender, KeyEventArgs e)
    {
        player.ReactToKey(e.KeyCode);
    }
} 
```

还有很多事情要做，但我只粘贴了相关代码。

我已经尝试过设置`this.KeyPreview = true;`和调用`this.Focus();`，都不起作用。问题不在于`ReactToKey()`方法，我已经在那里设置了一个断点，并且该事件永远不会被触发。

* * *

**编辑：**经过一些测试，我得出的结论是问题出在我的`ControllableBlock`. 然而，我不知道为什么，但我正在努力。如果我注释掉与 相关的所有内容，`player`事件就会开始触发。

* * *

**编辑 2：**似乎问题是我`ControllableBlock`从`Control`. 如果我从 继承它`Panel`，它工作正常。 *为什么是这样？如果我从控件继承，我不能触发事件吗？* 这个`ControllableBlock`类现在是空的，所以它甚至不做任何事情，除了继承自`Control`.

* * *

**编辑3：**既然我已经开始了赏金，我想澄清一下，我不是在寻找如何让事件触发的解决方案，我正在寻找他们为什么不触发的原因我继承自`Control`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T14:17:06.997

如果您的事件应该是应用程序范围内的，请尝试将属性设置`KeyPreview`为`true`- 它允许您触发相应的事件，而不管焦点控制如何。

```
this.KeyPreview = true; 
```

否则，您应该将这些事件直接附加到将处理它们的控件。

**编辑：**

我`InitializeComponent();`从我的表格中删除并得到与你相同的行为。

在实施[此](https://stackoverflow.com/questions/4378865/detect-arrow-key-keydown-for-the-whole-window)问题中提供的解决方案后，所有事件都开始完美地进行。
在此处复制代码段：

```
protected override bool ProcessCmdKey(ref Message msg, Keys keyData) {
        if (keyData == Keys.Left) {
            // Do your staff for Left Key here

            return true;
        }
        // you need to add if condition to every direction you want to handle
        return base.ProcessCmdKey(ref msg, keyData);
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-13T17:02:35.523

我能够重现一个类似的问题（希望是相关的..）

解释：

*   `CanSelect==true`键盘输入可选择返回的控件
*   一个空白的后代`Control()`是可选的，其中一个`Panel()`不是
*   添加到表单的第一个可选控件将被选中
*   默认情况下，选定的控件将从其父级窃取键盘事件
*   用于在窗口内导航的某些键需要额外的步骤才能处理

[在这里](http://msdn.microsoft.com/en-us/library/ms171535.aspx)查看Windows 键盘输入如何工作的一个很好的概述。

重现它的代码：

```
public class GameForm : Form
{
    public GameForm()
    {
        this.KeyDown += Game_KeyDown;
        var tests = new List<Control[]>() { 
            new[] { new Panel() },
            new[] { new Panel(), new Panel() },
            new[] { new Control() },
            new[] { new Control(), new Panel() },
            new[] { new Panel(), new Control() }
        };
        // When test index 2 to 4 used, keyboard input does not reach form level
        Controls.AddRange(tests[0]);            
        // When uncommented, ensures all keyboard input reaches form level
        /*this.KeyPreview = true;              
        // Additional plumbing required along with KeyPreview to allow arrow and other reserved keys
        foreach (Control control in this.Controls)
        {
            control.PreviewKeyDown += control_PreviewKeyDown;
        }*/
    }
    void control_PreviewKeyDown(object sender, PreviewKeyDownEventArgs e)
    {
        e.IsInputKey = true;
    }
    private void Game_KeyDown(object sender, KeyEventArgs e)
    {
        // breakpoint here
        Debug.WriteLine(e.KeyCode);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T14:16:52.157

尝试将处理程序设置移动到 Form_Load 事件而不是构造函数。`Initialize()`构造函数中不应该调用吗？我不会特别推荐删除它

如果`ControllableBlock`从 Panel 继承，它将具有比基本 Control 对象更多的事件连接和更好的 UI 交互设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T14:19:32.393

您需要使您的控件可选择，然后它才能接收焦点。

尝试将以下内容添加到您的构造函数中：

```
this.SetStyle(ControlStyles.Selectable, true); 
```

并确保在表单显示后给予焦点。或者，覆盖 OnMouseDown() 并在其中调用 this.Focus() 。

# c - 使用 `scanf()` 读取逗号分隔的输入

> ID：15091284
> 
> 赞同：18
> 
> 时间：2013-02-26T14:14:08.117
> 
> 标签：c, csv, input, file-io, scanf

我有以下输入：

```
AG23,VU,Blablublablu,8
IE22,VU,FooBlaFooBlaFoo,3
and so on... 
```

我希望它`scanf()`使用如下代码“解析”：

```
char sem[5];
char type[5];
char title[80];
int value;

while(scanf("%s,%s,%s,%d", sem, type, title, &value) == 4) {
 //do something with the read line values
} 
```

但是代码的执行给了我：`illegal instruction`

您将如何阅读这样的逗号分隔文件？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-02-26T14:20:05.963

逗号不被视为空白字符，因此格式说明符`"%s"`将消耗`,`以及超出数组边界的行上的所有其他内容，`sem`从而导致未定义的行为。要更正此问题，您需要使用扫描集：

```
while (scanf("%4[^,],%4[^,],%79[^,],%d", sem, type, title, &value) == 4) 
```

在哪里：

*   `%4[^,]`表示最多读取四个字符或直到遇到逗号。

指定宽度可防止缓冲区溢出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-23T06:16:09.137

你可以使用 scanf("%d%*c"); // 禁止输入任何你想跳过的字符

假设 scanf("%d%*c%d",&a,&b); // i/p 为 31,42 %*用于抑制 o/p: 3142

它可以是任何字符 / , . …………

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-26T14:51:50.750

你遇到的问题是因为当你说

```
 scanf("%s,%s,%s,%d", sem, type, title, &value) 
```

发生的事情是您正在尝试将所有行放入第一个字符串中，该字符串只有 5 个字符。因此**`sem[5]`溢出来**，并引发各种有趣的事情。为避免此问题，我尝试使用表达式`%[^,]`，但效果不佳。最好的选择是使用类似的东西

```
while(scanf("%s%c%s%c%s%c%d", sem, &ch, type, &ch, title, &ch, &value) != EOF) 
```

然后你可以丢弃`ch`. 但是请记住，最好使用其他功能来读取输入，例如`getchar()`, 和类似的东西，这在某种意义上更快更安全。

# javascript - 如何使用 JQuery 实时添加复选框的值？

> ID：15091295
> 
> 赞同：0
> 
> 时间：2013-02-26T14:14:20.007
> 
> 标签：javascript, jquery

应该很容易，但是这段代码对我不起作用：

```
$("#checkboxdiv input:checkbox").change(function() {
            var total = 0;
            $('#checkboxdiv input:checkbox:checked').each(function() {
                total += parseInt(this.value, 10);
            });
            $('#totalsdiv').text(total);
        }); 
```

要考虑的复选框都在#checkbox div中，我正在尝试用总金额填写div。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:50:58.370

[由于代码很好并且可以工作](http://jsbin.com/asifob/1/edit)，因此其他地方可能存在不相关的错误。

您应该使用[开发人员工具](https://developers.google.com/chrome-developer-tools/docs/overview)来调试和搜索它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T14:18:13.810

您可以尝试在 CheckBox 上侦听 click 事件，而不是 change 事件。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-26T14:16:33.503

在不知道你的问题的情况下，我会猜测这个

```
        $("#checkboxdiv input:checkbox").change(function() {
            变量总计 = 0;
            $('#checkboxdiv input:checkbox:checked').each(function() {
                总计 += parseInt($(this).val(), 10);
            });
            $('#totalsdiv').text(total);
        });

```

# c# - 在 C# 中通过 WebClient 将 JSON 发布到 URL

> ID：15091300
> 
> 赞同：96
> 
> 时间：2013-02-26T14:14:45.323
> 
> 标签：c#, webclient

我有一些需要转换为 C# 的 JavaScript 代码。我的 JavaScript 代码将一些 JSON 发布到已创建的 Web 服务。此 JavaScript 代码运行良好，如下所示：

```
var vm = { k: "1", a: "2", c: "3", v: "4" };
$.ajax({
  url: "http://www.mysite.com/1.0/service/action",
  type: "POST",
  data: JSON.stringify(vm),
  contentType: "application/json;charset=utf-8",
  success: action_Succeeded,
  error: action_Failed
});

function action_Succeeded(r) {
  console.log(r);
}

function log_Failed(r1, r2, r3) {
  alert("fail");
} 
```

我试图弄清楚如何将其转换为 C#。我的应用程序使用的是 .NET 2.0。据我所知，我需要执行以下操作：

```
using (WebClient client = new WebClient())
{
  string json = "?";
  client.UploadString("http://www.mysite.com/1.0/service/action", json);
} 
```

我在这一点上有点卡住了。我不确定`json`应该是什么样子。我不确定是否需要设置内容类型。如果我这样做，我不知道该怎么做。我也看到了`UploadData`。所以，我不确定我是否使用了正确的方法。从某种意义上说，我的数据的序列化是我的问题。

有人可以告诉我我在这里缺少什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：205
> 
> 时间：2014-06-06T15:32:36.910

问题已经得到解答，但我想我找到了更简单且与问题标题更相关的解决方案，这里是：

```
var cli = new WebClient();
cli.Headers[HttpRequestHeader.ContentType] = "application/json";
string response = cli.UploadString("http://some/address", "{some:\"json data\"}"); 
```

*PS：在大多数 .net 实现中，但[并非所有](https://docs.microsoft.com/en-us/previous-versions/windows/silverlight/dotnet-windows-silverlight/tt0f69eh(v=vs.95)?redirectedfrom=MSDN)WebClient 都是 IDisposable，因此当然最好对其进行“使用”或“处置”。但是，在这种特殊情况下[，它并不是真正必要](https://codereview.stackexchange.com/questions/9714/using-statement-in-context-of-streams-and-webclients)的。*

* * *

## 回答 #2

> 赞同：75
> 
> 时间：2014-09-04T19:36:50.157

以下示例演示如何通过[WebClient.UploadString 方法](http://msdn.microsoft.com/en-US/library/ms144236(v=vs.80).aspx)POST JSON ：

```
var vm = new { k = "1", a = "2", c = "3", v=  "4" };
using (var client = new WebClient())
{
   var dataString = JsonConvert.SerializeObject(vm);
   client.Headers.Add(HttpRequestHeader.ContentType, "application/json");
   client.UploadString(new Uri("http://www.contoso.com/1.0/service/action"), "POST", dataString);
} 
```

> 先决条件：[Json.NET 库](https://json.codeplex.com/)

* * *

## 回答 #3

> 赞同：74
> 
> 时间：2013-02-26T14:29:15.613

您需要一个 json 序列化程序来解析您的内容，可能您已经拥有它，对于您最初关于如何发出请求的问题，这可能是一个想法：

```
var baseAddress = "http://www.example.com/1.0/service/action";

var http = (HttpWebRequest)WebRequest.Create(new Uri(baseAddress));
http.Accept = "application/json";
http.ContentType = "application/json";
http.Method = "POST";

string parsedContent = <<PUT HERE YOUR JSON PARSED CONTENT>>;
ASCIIEncoding encoding = new ASCIIEncoding();
Byte[] bytes = encoding.GetBytes(parsedContent);

Stream newStream = http.GetRequestStream();
newStream.Write(bytes, 0, bytes.Length);
newStream.Close();

var response = http.GetResponse();

var stream = response.GetResponseStream();
var sr = new StreamReader(stream);
var content = sr.ReadToEnd(); 
```

希望能帮助到你，

# php - PHP5 - 向导式提交数据

> ID：15091301
> 
> 赞同：0
> 
> 时间：2013-02-26T14:14:47.290
> 
> 标签：php, mysql

我有一个多步骤表单，我分布在 4 个单独的页面上 - 换句话说，4 个部分（我选择了这种方法，因为它太复杂而无法在一页上处理我的所有字段）。在我的 MySQL 数据库中，我为每个页面上的每个部分都有一个表（`step1`, `step2`, `step3`, `step4`）。提交第一页后，我想将我的 Page1 数据插入数据库并让它返回主键，我的目标是然后将其发布到下一页 ( `step2.php`) ...步骤 3 和步骤 4 将遵循相同的过程。

数据库中 Step2、Step3 和 Step4 的表都有一个主键 ( `reg_id`)，它们也是 的外键`step1.reg_id`。

我想就如何：

1.  每次提交页面后将数据发回我的数据库（我是发回同一页面，还是有一个单独的*处理器页面*来处理？）
2.  重定向到下一页
3.  **将Step1**`reg_id`返回的内容传递到*Next Step*页面

 ***我正在使用简单明了的 PDO 在 MySQL 中获取我的数据。我承认我没有太多的 PHP 知识来完成这项工作，因为我太习惯于 ASP.NET webforms 开发的生命周期，因此我在这里寻求您的专业知识。

一如既往的感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T14:42:40.343

正如 Karl 在他的评论中所说，在重定向到下一页之前将表单值保存为 $_SESSION 值是最有意义的。然后表单处理器访问来自 $_SESSION 的值，就像您将它们作为 $_POST 值发送一样。

为了进一步说明*为什么*这样做会更好一些，您必须考虑如果您的用户不只是从第 1 页到第 2 页……再一次坐到表单的末尾会发生什么。如果有人在中途退出向导怎么办？如果他们需要返回并编辑值，有时是多次，该怎么办？简而言之，如果您的用户的工作流程导致表单不完整或用户在表单页面之间来回切换，您最终可能会进行大量不必要的验证并写入数据库。

如果您将表单值保存在会话中，并且仅在用户完成整个多页表单时将它们存储在数据库中，那么您就消除了这些不必要的数据库写入的可能性。

它还使人们可以轻松地在表单中返回以进行编辑，而不会破坏您表示的验证有点复杂。前任。假设第 1 页上的值 x 与第 4 页上的值 y 相关。用户一直到第 5 页，但随后决定他们要返回第 1 页来编辑 x。第 1 页可以访问会话，因此可以访问 x 和 y ——例如，如果他们的新 x 值会使 y 无效，或者类似的情况，您可以警告他们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T14:34:01.387

您可以为此设置 5 个单独的页面，并在它们之间传递数据。

Page1.php 将具有初始表单但不进行任何处理，它将所有数据发布到 page2 onSubmit。

Page2.php 将从 page1.php 中检索所有发布数据，存储到数据库中，并检索其 ID，然后为向导的第二阶段显示一个表单。此表单 onSubmit，将 ID（在隐藏字段中）和表单元素发送到 page3.php

Page3.php 存储来自 page2.php 的帖子数据，检索 ID 并显示下一个表单。再次提交隐藏的 ID 和表单字段，这次提交到 page4.php

您可以根据向导中的步骤重复此步骤的次数。

* * *

另一种方法是将所有内容放在一个页面中。将有几个 if 语句，用于读取已发送的数据。隐藏字段将跟踪当前步骤。IE

如果 $step == 1，则显示第一个表单（onsubmit sent $step = 2 作为隐藏字段）

如果 $step == 2 从第一个表单中检索发布数据并插入 DB 然后显示第二个表单（onsubmit 发送 $step = 3 作为隐藏字段）

如果 $step == 3 从前一个表单中检索发布数据并插入数据库，然后显示第二个表单（onsubmit send $step = 4 作为隐藏字段）

等等***

# javascript - Javascript 未正确将变量传递给 Modal

> ID：15091302
> 
> 赞同：0
> 
> 时间：2013-02-26T14:14:50.527
> 
> 标签：javascript, jquery, html

我在我的代码中搞砸了一些东西，因此一些变量没有正确地从我的 HTML 文档传输到模式对话框。我在这里要做的是将变量传递`data-uid`给模态对话框。`data-part``data-type`

```
<div class="span11" style="text-align:center;">
    <a href="#myModal" role="button" class="myModal btn btn-success" data-id="Type1" data-part ="{{uni.pt}}" data-uid="{{uni.id}}" data-toggle="modal">Type 1</a>
</div> 
```

Javascript：

```
<script type="text/javascript">
$(document).on("click", ".myModal", function () {
     var myType = $(this).data('data-id');
     $(".modal-body #type").val( myType );
     var myPart = $(this).data('data-part');
     $(".modal-body #part").val(myPart);
     var myUID = $(this).data('data-uid');
     $(".modal-body #uid").val( myUID );
     $('#myModal').modal('show');
}); 
```

模态：

```
 <div class="form_block" style="float:right;">
                <input type="hidden" name="type" id="type">
                <input type="hidden" name="part" id="part">
                <input type="hidden" name="uid" id="uid">
                <input class="btn btn-primary" type="submit" value="{% trans 'Submit' %}">
            </div> 
```

但是在我看来，当我尝试获取这些变量之一时，例如

```
type = request.POST.get ('type') 
```

里面什么都没有。

我究竟做错了什么？我知道这一定是一件小事……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T14:18:22.673

您可以通过 2 种方式访问​​ data-x 属性：

```
$(selector).attr("data-x") 
```

或者

```
$(selector).data("x") 
```

.data 方法自动添加“data-”前缀

# ios - 在 Admob 中介 SDK 中集成 iAd 适配器时出错

> ID：15091303
> 
> 赞同：9
> 
> 时间：2013-02-26T14:14:53.360
> 
> 标签：ios, objective-c, admob, iad

为此，我正在尝试将 iAds 集成到 Admob 中介 SDK 中，我`iAdListAdapter`从[中介网站下载链接下载](https://dl.google.com/dl/googleadmobadssdk/libadapteriad.zip)并将其添加到我的 xcode 项目中，但现在当我尝试编译项目时出现以下错误：

```
Undefined symbols for architecture i386:
"_ADBannerContentSizeIdentifierLandscape", referenced from:
  -[GADMAdapterIAd getBannerWithSize:] in libAdapterIAd.a(GADMAdapterIAd.o)
  -[GADMAdapterIAd adjustADBannerToAdSize] in libAdapterIAd.a(GADMAdapterIAd.o)
"_ADBannerContentSizeIdentifierPortrait", referenced from:
  -[GADMAdapterIAd getBannerWithSize:] in libAdapterIAd.a(GADMAdapterIAd.o)
  -[GADMAdapterIAd adjustADBannerToAdSize] in libAdapterIAd.a(GADMAdapterIAd.o)
"_OBJC_CLASS_$_ADBannerView", referenced from:
  objc-class-ref in libAdapterIAd.a(GADMAdapterIAd.o)
"_OBJC_CLASS_$_ADInterstitialAd", referenced from:
  objc-class-ref in libAdapterIAd.a(GADMAdapterIAd.o)
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

请指导我做错了什么或者将iAds添加到中介SDK的正确方法是什么：我正在使用XCode 4.6和min sdk 5.0

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-27T07:43:38.547

原来我需要在项目中添加**iAd.Framework**并删除**-all_load**标志，从而解决了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-05T09:23:02.947

对于使用自动链接的人，请在您的任何源文件中包含“#import < iAd/iAd.h >”/

# c# - dll应该保存在文件夹中还是向gac注册

> ID：15091305
> 
> 赞同：1
> 
> 时间：2013-02-26T14:15:03.363
> 
> 标签：c#, dll, gac

哪个是首选，将您的库保存在可执行文件的文件夹中，或向 GAC 注册它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:31:09.790

您应该仅在需要时通过将它们安装到全局程序集缓存中来共享程序集。**作为一般准则，保持程序集依赖项私有，并将程序集定位在应用程序目录中，除非明确需要共享程序集。**此外，不必将程序集安装到全局程序集缓存中以使 COM 互操作或非托管代码可以访问它们。

参考：[全局程序集缓存](http://msdn.microsoft.com/en-us/library/yf1d93sz%28v=vs.100%29.aspx)

另外，请参阅[GAC 与 BIN](http://www.dailycode.info/Blog/post/2011/06/21/GAC-vs-BIN-%28What-dll-will-be-loaded%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T14:18:40.193

如果您的程序集 (dll) 仅供您的应用程序使用，请将其安装在与可执行文件相同的文件夹中。这通常是首选方法（也是大多数用例）。

如果它将被许多应用程序使用，则可能将其安装在 GAC 中。GAC 实际上只适用于 Microsoft 程序集。

我最近编写了一个应用程序，在其中我更进一步并将 dll 合并到一个可执行文件中。

*   [何时以及何时不安装到 GAC 中？](https://stackoverflow.com/questions/498361/when-and-when-not-to-install-into-the-gac)
*   [使用 GAC 的优点和缺点是什么？](https://stackoverflow.com/questions/23578/what-are-the-advantages-and-disadvantages-of-using-the-gac)
*   [在已编译的可执行文件中嵌入 DLL](https://stackoverflow.com/questions/189549/embedding-dlls-in-a-compiled-executable)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T14:18:45.890

请参阅此处的讨论：[为什么我不应该使用 GAC？](https://stackoverflow.com/questions/538710/why-should-i-not-use-the-gac)

TL;DR - 这取决于您的需求和偏好。对于大多数用途，我个人避免使用 GAC。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T14:18:57.163

我会在 GAC 注册以避免混淆和相应的二进制文件。从技术上讲，您可以采用任何一种方式进行操作，但最好的办法是将其保持在各自的路径中。您应该为各自的文件类型（例如用户数据和 DLL 等）使用所有 Windows 环境路径。

还要看看你是否想重用这个库。供其他应用程序和库等在 GAC 中全局使用。对于本地使用，仅用于 exe 将其放在同一路径中。

# c++ - 如何在 QString 中使用整数值

> ID：15091318
> 
> 赞同：0
> 
> 时间：2013-02-26T14:15:58.937
> 
> 标签：c++, qt

我有一个程序，我想在 Qlabel 中使用 QString ：

```
 text1->setText(QString("Actual value of Threshold: %1 mV").arg(slider->value()*2.745098)); 
```

好吧，这很好，但我想得到像**100 mV**而不是**100.84654mV**的整数值，我该怎么做。

```
silder->value(); 
```

返回一个整数值。和铸造像：

```
 text1->setText(QString("Actual value of Threshold: %1 mV").arg((int)slider->value()*2.745098)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:19:41.973

您应该将计算值转换为 int。

```
text1->setText(QString("Actual value of Threshold: %1 mV").arg((int)(slider->value()*2.745098))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T14:36:28.767

```
int value = qRound(slider->value() * 2.745098);
QString text = QString("Actual value of Threshold: %1 mV").arg(value); 
```

# java - 如何通过自己的类删除一个对象？

> ID：15091321
> 
> 赞同：1
> 
> 时间：2013-02-26T14:16:05.330
> 
> 标签：java, null, garbage

我知道如何通过将对象的引用变量设置为 null 来为垃圾收集器留下删除对象的信号：

```
Player player_reference = new Player();
player_reference = null; 
// Now the Garbage collector knows to release all the memory related to this object. 
```

但是如何通过对象的类将引用变量设置为 null 呢？

```
class Player {
    public void doSomthing() {
        if(condition) {
            // some code which set the reference variable to null.
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-26T14:19:05.143

> 我知道如何通过将引用变量设置为 null 来为垃圾收集器留下删除对象的信号

这并不是真正的“信号”——它只是确保有问题的变量不会*阻止*垃圾收集。你真的，真的需要清楚变量、引用和对象之间的区别。这个问题毫无意义：

> 但是如何通过对象类将引用变量设置为 null 呢？

什么参考？可能有多个变量，它们的值都是对同一对象的引用。或者确实可能*没有*这样的变量 - 您可以通过一些中间表达式调用该方法：

```
foo().bar().doSomething(); 
```

在这种情况下，您希望将哪个变量设置为 null？

当在任何线程中无法再访问该对象时，该对象将有资格进行垃圾收集。您不需要手动删除它，或“通知”垃圾收集器。它会自然发生。

# sql - SQL Server 将列转换为行

> ID：15091330
> 
> 赞同：6
> 
> 时间：2013-02-26T14:16:33.877
> 
> 标签：sql, sql-server, sql-server-2008, tsql, unpivot

我有一个包含当前值和先前值的 sql 表。

```
Id  Value1  PValue1 Value2  PValue2
1   A       A       V       V1
2   B       B1      W       W1
3   C       C1      X       X 
```

如果值发生变化，我想比较它们并显示在下表中。

```
Id  Column  Value   Pvalue
1   Value2  V       V1
2   Value1  B       B1
2   Value2  W       W1
3   Value1  C       C1 
```

在 SQL 2008 中是否可以不循环每一列？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-26T14:21:41.277

您可以使用 a`CROSS APPLY`取消透视数据：

```
SELECT t.id,
  x.Col,
  x.Value,
  x.PValue
FROM YourTable t
CROSS APPLY 
(
    VALUES
        ('Value1', t.Value1, t.PValue1),
        ('Value2', t.Value2, t.PValue2)
) x (Col, Value, PValue)
where x.Value <> x.PValue; 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/3dbb3/4)。

正因为我喜欢使用*pivot*函数，所以这里有一个版本同时使用*unpivot*和*pivot*函数来获得结果：

```
select id, 
  colname,
  value,
  pvalue
from
(
  select id, 
    replace(col, 'P', '') colName,
    substring(col, 1, PatIndex('%[0-9]%', col) -1) new_col,  
    val
  from yourtable
  unpivot
  (
    val
    for col in (Value1, PValue1, Value2, PValue2)
  ) unpiv
) src
pivot
(
  max(val)
  for new_col in (Value, PValue)
) piv
where value <> pvalue
order by id 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/26163/12)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-26T14:20:44.373

这是一个简单的方法：

```
SELECT  Id, 
        'Value1' [Column],
        Value1 Value,
        PValue1 PValue
FROM YourTable
WHERE ISNULL(Value1,'') != ISNULL(PValue1,'')
UNION ALL
SELECT  Id, 
        'Value2' [Column],
        Value2 Value,
        PValue2 PValue
FROM YourTable
WHERE ISNULL(Value2,'') != ISNULL(PValue2,'') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T14:22:46.270

如何使用联合：

```
SELECT * FROM
    (SELECT Id, 'Value1' [Column], Value1 [Value], PValue1 [PValue]
    FROM table_name
    UNION ALL
    SELECT Id, 'Value2' [Column], Value2 [Value], PValue2 [PValue]
    FROM table_name)tmp
WHERE Value != PValue
ORDER BY Id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T14:29:08.430

最后，为了完整起见，还有一个[UNPIVOT](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)命令。但是，由于您有两列要取消透视，因此使用其他解决方案之一可能会更简单。

# javascript - Backbone + FileUpload + Java Servlet + Jackson - Base64 = 噩梦？

> ID：15091331
> 
> 赞同：2
> 
> 时间：2013-02-26T14:16:35.217
> 
> 标签：javascript, servlets, file-upload, backbone.js, jackson

到目前为止，我们一直在使用 JavaScript 中的 Backbone 和 Java Servlet 在客户端和服务器之间同步数据。我们使用 Jackson 将 JSON 转换为 Java 对象服务器端。

我们的模型是一个个人资料对象，其中包含有关用户的基本信息，例如姓名、电子邮件等，现在我们要向该对象添加个人资料*图片*。

我们已经用 FileReader 进行了实验——将图像上传到客户端，然后将其转换为 Base64。这适用于使用 JSON 上传。但是我们现在了解到 FileReader 并不完全受支持（特别是在旧版本的 IE 和 Safari 以及一些移动浏览器上）。

我们曾考虑过进行表单多部分上传，但随后我们将不得不打破主干，因为我们将不再在保存期间发送 json。也不清楚我们是否可以使用 Jackson 自动将数据解析为 JavaObject，或者我们是否必须自己做。[文件上传看起来相当简单](https://stackoverflow.com/questions/2422468/how-to-upload-files-to-server-using-jsp-servlet)，但自动封送处理却不是。

肯定有人以前遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T15:57:53.543

我对图片上传的想法：对于支持它的浏览器，继续做Base64。这样您就可以按预期使用 Base64 和 JSON。看起来所有版本的 Chrome、Firefox 以及最新版本的 Safari 和 Internet Explorer 都支持它。

然后，对于那些不支持它的人，做两个api调用：一个上传图片（返回一个url），一个上传商家数据（带有url）。这样我们仍然可以使用backbone/json/jackson 来处理商家数据，同时保持向后兼容

# java - 在 Eclipse Juno IDE 中将警告设置为错误

> ID：15091334
> 
> 赞同：1
> 
> 时间：2013-02-26T14:16:40.143
> 
> 标签：java, eclipse, error-handling, warnings

我想在我的 Eclipse Juno IDE 中将警告设置为错误。

```
public class Main {

    public static void main(String[] args) {
        TryRefactoring try1 = new TryRefactoring();//warning shown here
    } 
} 
```

但我想将此警告设置为我的 IDE 中的错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T14:21:37.680

在 Eclipse 中，如果您在 Package Explorer 中右键单击您的项目，然后转到属性 -> Java 编译器 -> 错误/警告。然后，您可以手动更改哪些编译器发现显示为警告/错误/忽略等...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-04-26T12:53:14.217

我会将@Matthew Ertel 的答案更新到 2021 年 4 月。

菜单窗口 > 首选项 > Java > 编译器 > 错误/警告。

# java - 我创建的 pdf 文件中丢失了空格（pdfbox 和 itextpdf）

> ID：15091339
> 
> 赞同：1
> 
> 时间：2013-02-26T14:16:46.233
> 
> 标签：java, indentation, pdfbox, itextpdf

我正在使用 pdfbox 和 itextpdf 以 pdf 格式创建非常简单的发票。

我们在 java 之外的 erp 系统中创建原始发票文本文件 - 所以我唯一需要做的就是将文本文件与 (pdf) 模板结合起来。（那不是问题。；））

它工作正常 - 但我现在在 pdf 中发现一个缩进错误：在表格的标题之后，缩进出错（**一个前导空格被删除**）。

我做错了什么？

这就是代码，生成示例pdf：

```
final File outputFile = this.createTmpFile();
final Document document = new Document(PageSize.A4);
PdfWriter.getInstance(document, new FileOutputStream(outputFile));
document.open();
final StringBuffer testText = new StringBuffer();
testText.append("                                                                 21.12.2012\n");
testText.append("\n");
testText.append("\n");
testText.append("\n");
testText.append("Invoice\n");
testText.append("\n");
testText.append("\n");
testText.append("Amount  Description                                         CUR       Price\n");
testText.append("===========================================================================\n");
testText.append("\n");
testText.append(" 1      Order #E41141454 from 01.01.2012:                   EUR       21,21\n");
testText.append("        nice text, nice text, nice text, nice text,\n");
testText.append("        nice text, nice text, nice text, nice text,\n");
testText.append("\n");
testText.append("        Status: online\n");
final Paragraph para = new Paragraph();
para.setFont(new Font(FontFamily.COURIER, 8.6f));
para.setAlignment(Element.ALIGN_UNDEFINED);
para.setLeading(1.2f, 1.2f);
final String t = testText.toString();
para.add(t);
document.add(para);
document.close(); 
```

![样品发票](../Images/96138f7fb42b4c51ab9eb99639edcaaf.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:39:44.440

**解决了**！

我们从 itextpdf **5.0.6**更新到**5.4.0**

# jquery - 有人用过 Grocery CRUD 和 jQuery File Upload 脚本吗？

> ID：15091344
> 
> 赞同：0
> 
> 时间：2013-02-26T14:17:02.990
> 
> 标签：jquery, codeigniter, image-uploading, grocery-crud

我迫切需要让 Grocery CRUD (Codeigniter) 能够使用多张图片上传和上传图片的缩略图预览。

jQuery File Upload 是我需要的，但我真的不知道如何集成它或将它与杂货杂货一起使用。也许我会在页脚中以某种方式实现它，比方说，但即使我这样做了，我也不知道如何将值（上传图像的名称）传递给杂货店杂货以将它们输入数据库......

[http://blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)

或者也许有一些更聪明的方法可以做到这一点......

Grocery Image CRUD 不能很好地工作，它不能在同一个视图中实现......另外，几乎不可能将这两个库组合在一起......

# c# - 为什么抛出 AbandonedMutextException 以及如何避免它？

> ID：15091348
> 
> 赞同：0
> 
> 时间：2013-02-26T14:17:09.010
> 
> 标签：c#, multithreading, asynchronous, synchronization, mutex

以下 c# 控制台应用程序（代码复制粘贴自文章[“在 C#.Net 中使用 Mutex 和 WaitOne 与线程”](http://developergeeks.com/code/92/using-mutex-and-waitone-with-threading-in-c-net)）在完成之前抛出

> AbandonedMutextException 未处理。
> {“由于放弃互斥体而完成等待。”}{“由于放弃互斥体而完成等待。”}

在线上：

```
static Mutex mutex = new Mutex(false); 
```

通过最后一行阻止控制台输入后：

```
Console.ReadLine(); 
```

出了什么问题以及如何纠正？

```
using System;
using System.Threading;

class Database
{
  static Mutex mutex = new Mutex(false);

  public static void SaveData(string text)
  {
    mutex.WaitOne();
    Console.WriteLine("Database.SaveData - Started");
    Console.WriteLine("Database.SaveData - Working");
    for (int i = 0; i < 100; i++)
    {
      Console.Write(text);
    }
    Console.WriteLine("\nDatabase.SaveData - Ended");
    mutex.Close();
  }
}

class ThreadMutexApp
{
  public static void WorkerThreadMethod1()
  {
    Console.WriteLine("Worker thread #1 - Started");
    Database.SaveData("x");
    Console.WriteLine("Worker thread #1 - Returned from Output");
  }

  public static void WorkerThreadMethod2()
  {
    Console.WriteLine("Worker thread #2 - Started");
    Database.SaveData("o");
    Console.WriteLine("Worker thread #2 - Returned from Output");
  }

  public static void Main()
  {
    ThreadStart worker1 = new ThreadStart(WorkerThreadMethod1);
    ThreadStart worker2 = new ThreadStart(WorkerThreadMethod2);

    Console.WriteLine("Main - Creating worker threads");

    Thread t1 = new Thread(worker1);
    Thread t2 = new Thread(worker2);

    t1.Start();
    t2.Start();

    Console.ReadLine();
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T14:30:19.133

线程`SaveData()`首先进入，关闭静态互斥体并使其无法用于第二个。`mutex.Close();`应该替换为`mutex.ReleaseMutex();`

引用 MSDN

> 使用此方法释放 WaitHandle 实例持有的所有资源。一旦调用此方法，对当前实例的引用将导致**未定义的行为**。

# android - Eclipse 未找到 Nexus 4 或 Nexus 7

> ID：15091353
> 
> 赞同：2
> 
> 时间：2013-02-26T14:17:21.403
> 
> 标签：android, eclipse, android-emulator

我无法在 Windows 7 上找到我的新 Nexus 4 手机。以前我使用过 Nexus 4，然后按照说明找到了该设备，后来我使用了另一部在 Windows7 中找不到的 Nexus 4 手机。我也找不到 Nexus 7。

重点是，我只能找到最初安装的 Nexus 4，而我找不到任何其他 Nexus 手机或平板电脑。谁能帮我完成这件事。

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-12T12:38:33.880

仅当您使用 Windows 时才需要安装 USB 驱动程序（如果您使用的是 MAC/Linux，很可能无需安装任何驱动程序就可以正常工作）

在以下链接中，他们描述了如何做到这一点：

[http://developer.android.com/tools/extras/oem-usb.html](http://developer.android.com/tools/extras/oem-usb.html)

简而言之：

1.  将 Android 设备连接到计算机的 USB 端口。
2.  从桌面或 Windows 资源管理器中右键单击计算机，然后选择管理。
3.  在左侧窗格中选择设备。
4.  在右侧窗格中找到并展开其他设备。
5.  右键单击设备名称（例如 Nexus S）并选择更新驱动程序软件。这将启动 6\. 硬件更新向导。
6.  选择浏览我的计算机以查找驱动程序软件，然后单击下一步。单击浏览并找到 USB 驱动程序文件夹。（Google USB 驱动程序位于 \extras\google\usb_driver。）
7.  单击下一步安装驱动程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T14:41:44.863

**新手司机教程：**

打开设备管理器。

右键单击任何类似于您的设备并选择更新驱动程序。

然后在下一个屏幕上单击`Browse Driver Software on your computer`

在下一个屏幕上单击`Let me pick from a list of device drivers on my computer`

从驱动程序列表中，单击`Android Device`然后单击下一步

![在此处输入图像描述](../Images/4206e3723ce6dad0c419ba134883c65f.png)

选择`Android ADB Interface`并单击下一步。在下一个屏幕上单击`Yes`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-03T15:20:02.650

回答我的 Windows 问题：确保将 USB 计算机连接设置为相机 (PTP)。转到 DDMS -> 重置您的 ADB。您的 Eclipse 应该会找到该设备。

希望这可以帮助。

# javascript - 尝试在 html 中包含外部 OpenLayers Javascript 文件时出现自发的未终止字符串文字错误

> ID：15091355
> 
> 赞同：0
> 
> 时间：2013-02-26T14:17:30.023
> 
> 标签：javascript, html, syntax-error, openlayers

在家里的笔记本电脑上打开我的网站时，我收到一个奇怪的未终止字符串文字错误。如果我尝试在工作中打开网站（我对其进行编程），则不会出现错误。首先我开始比较 Firefox 版本，但两者都是相同的 -> 19.0。

在尝试了一些“未终止的字符串文字”错误修复后，就像在 stackoverflow 网站上的许多线程中描述的那样，我在外部 js 文件中遇到了更多错误。所以我认为我在包含此文件时出错并尝试了不同的包含可能性（fe 在脚本标记中添加和不添加 type="javascript" ）。经过几次徒劳的尝试，我决定将其恢复到以前的状态：

```
<script src="js/openLayers/OpenLayers.js"></script> 
```

仍然出现的错误说

```
"SyntaxError: unterminated string literal" in string 
"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAQAIBRAA7"
in OpenLayers.js on line 48. 
```

因此，我尝试将整个 OpenLayers.js 作为内部 Javascript 放入我的 html 中，并且一切正常。

**有谁知道为什么仅当 OpenLayers.js 作为外部 js 包含时才会发生此错误？**

# java - JTable中的数据没有改变

> ID：15091358
> 
> 赞同：0
> 
> 时间：2013-02-26T14:17:38.633
> 
> 标签：java, swing, jtable, tablecelleditor, jcalendar

我今天在玩 JTable，我发现了一些我认为“不可能”的东西。我找不到这段代码有什么问题。我已经三次检查了代码。让看看这里是否有人能找到问题所在。

我想要实现的是，从 mysql 获取一些数据，在表中显示它们，在表中编辑它们，并在单击保存按钮时更新数据库。

一切正常，除了一个。当我编辑一个单元格时，它**确实改变了**。但是，当我尝试获取数据（penduduks 的 Arraylist）时，*我得到了旧的未更改数据*。

如果你无法想象，这里有一个例子。

1.  打开程序，一切正常（图1：之前）。
2.  我编辑 Nama 专栏，从 Anas 到 Marchell。一切都很顺利（图2：之后）。
3.  进而。我点击了 Tester 按钮，调用 getData() 并且输出仍然是 Anas（图 3：为什么）。

**问题是**，为什么

*   tabelnya.java 中的函数测试器
*   tabelnya.java 中的函数 getValue(0,1)
*   TambahPenduduk.java 中的函数 TesterActionPerformed()

给出了不同的结果？是的，相信我，他们给了我不同的结果。

无论如何，我正在使用 jdk1.7.0_03。哦，还有 Netbeans 7.2。我现在正在下载更新的版本。

前 ： ![未经编辑](../Images/9a3fac7249d1d35d910595f04057be31.png)

后 ： ![从 Anas 到 Marchell 的编辑列名](../Images/4e312dac2e244a53ed642541ed7c34b6.png)

为什么 ： ![在此处输入图像描述](../Images/4273b283e85a9566a57ac5f02b130cbe.png)

这是我的代码，我知道它不是一个非常性感的代码，对此我感到非常抱歉：

penduduk.java：

```
package Penduduk;

import java.sql.Connection;
import java.sql.DriverManager;
import java.util.ArrayList;
import java.util.Iterator;
import javax.swing.DefaultCellEditor;
import javax.swing.JComboBox;
import javax.swing.JOptionPane;

import com.toedter.calendar.JDateChooserCellEditor;

public class TambahPenduduk extends javax.swing.JFrame
{

    private tabelnya tabModel = new tabelnya();

    public TambahPenduduk()
    {
        initComponents();
        aturTabel();
    }

    private void initComponents()
    {

        BSave = new javax.swing.JButton();
        BAdd = new javax.swing.JButton();
        jScrollPane2 = new javax.swing.JScrollPane();
        tabelPenduduk = new javax.swing.JTable();
        Tester = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        BSave.setText("Save");
        BSave.addActionListener(new java.awt.event.ActionListener()
        {
            public void actionPerformed(java.awt.event.ActionEvent evt)
            {
                BSaveActionPerformed(evt);
            }
        });

        BAdd.setText("Add");
        BAdd.addActionListener(new java.awt.event.ActionListener()
        {
            public void actionPerformed(java.awt.event.ActionEvent evt)
            {
                BAddActionPerformed(evt);
            }
        });

        tabelPenduduk.setModel(new tabelnya());
        jScrollPane2.setViewportView(tabelPenduduk);

        Tester.setText("Tester");
        Tester.addActionListener(new java.awt.event.ActionListener()
        {
            public void actionPerformed(java.awt.event.ActionEvent evt)
            {
                TesterActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addGap(368, 368, 368)
                        .addComponent(BSave)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(BAdd)
                        .addGap(129, 129, 129)
                        .addComponent(Tester))
                    .addGroup(layout.createSequentialGroup()
                        .addContainerGap()
                        .addComponent(jScrollPane2, javax.swing.GroupLayout.PREFERRED_SIZE, 1301, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addContainerGap(23, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addGap(15, 15, 15)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(BSave)
                            .addComponent(BAdd)))
                    .addGroup(layout.createSequentialGroup()
                        .addContainerGap()
                        .addComponent(Tester)))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(jScrollPane2, javax.swing.GroupLayout.PREFERRED_SIZE, 315, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        pack();
    }

    private void BSaveActionPerformed(java.awt.event.ActionEvent evt) {                                      

        save();
    }                                     

    private void BAddActionPerformed(java.awt.event.ActionEvent evt) {                                     

        tabModel.addRow();
    }                                    

    private void TesterActionPerformed(java.awt.event.ActionEvent evt) {                                         

        System.out.println(tabModel.getData().get(0).getNama());
        System.out.println(tabModel.tester());
        System.out.println(tabModel.getValueAt(0, 1));

    }                                        

    public static void main(String args[])
    {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try
        {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels())
            {
                if ("Nimbus".equals(info.getName()))
                {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        }
        catch (ClassNotFoundException ex)
        {
            java.util.logging.Logger.getLogger(TambahPenduduk.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        catch (InstantiationException ex)
        {
            java.util.logging.Logger.getLogger(TambahPenduduk.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        catch (IllegalAccessException ex)
        {
            java.util.logging.Logger.getLogger(TambahPenduduk.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        catch (javax.swing.UnsupportedLookAndFeelException ex)
        {
            java.util.logging.Logger.getLogger(TambahPenduduk.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable()
        {
            public void run()
            {
                new TambahPenduduk().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify
    private javax.swing.JButton BAdd;
    private javax.swing.JButton BSave;
    private javax.swing.JButton Tester;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JTable tabelPenduduk;
    // End of variables declaration

    private void save()
    {

        ArrayList<penduduk> penduduks = tabModel.getData();// copy data dari tabel , biar gampang
        System.out.println("didalem save : " + penduduks.get(0).getNama());
        System.out.println("dialem sav 2 : " + tabModel.getValueAt(0, 1));
        //  zSystem.out.println("didalem save : "+tabModel.penduduksa.get(0).getNama());
        ArrayList<String> values = new ArrayList<>();
        StringBuilder sqlValues = new StringBuilder();

        for (penduduk orang : penduduks)//ngebentuk valuesnyadari setiap data yang udah dicopy
        {

            String value = "('" + orang.getNik() + "','" + orang.getNama() + "','" + orang.getTempatLahir() + "','" + new java.text.SimpleDateFormat("yyyy-MM-dd HH:mm:ss").format(orang.getTanggalLahir()) + "','" + orang.getGolDarah() + "','" + orang.getAlamat() + "','" + orang.getAgama()
                    + "','" + orang.getStatus() + "','" + orang.getPekerjaan() + "','" + orang.getKewarganegaraan() + "','" + orang.getJenisKelamin() + "','" + orang.getKtp() + "')";
            values.add(value);

        }

        //ngebentuk sqlnya
        for (Iterator<String> it = values.iterator(); it.hasNext();)// santai yang perlu diganti cuma values sama value dibawah
        {
            String value = it.next();// yang ini looh valuenya
            sqlValues.append(value);
            if (it.hasNext())
            {
                sqlValues.append(",");
            }
        }

        System.out.println("insert into penduduk values " + sqlValues + " ON DUPLICATE KEY UPDATE `Nik` = VALUES(`Nik`),`Nama` = VALUES(`Nama`),`TempatLahir` = VALUES(`TempatLahir`),`tanggalLahir` = VALUES(`tanggalLahir`),`GolDarah` = VALUES(`GolDarah`),`Alamat` = VALUES(`Alamat`),`Agama` = VALUES(`Agama`),`Status` = VALUES(`Status`),`Pekerjaan` = VALUES(`Pekerjaan`),`Kewarganegaraan` = VALUES(`Kewarganegaraan`),`JenisKelamin` = VALUES(`JenisKelamin`),`Ktp` = VALUES(`Ktp`)");

        //masukin database
        try
        {
            Class.forName("com.mysql.jdbc.Driver");
            Connection c = DriverManager.getConnection("jdbc:mysql://localhost/skripsi", "root", "saphiregem01X");//Setting database
            int hasil = c.createStatement().executeUpdate("insert into penduduk values " + sqlValues + " ON DUPLICATE KEY UPDATE `Nik` = VALUES(`Nik`),`Nama` = VALUES(`Nama`),`TempatLahir` = VALUES(`TempatLahir`),`tanggalLahir` = VALUES(`tanggalLahir`),`GolDarah` = VALUES(`GolDarah`),`Alamat` = VALUES(`Alamat`),`Agama` = VALUES(`Agama`),`Status` = VALUES(`Status`),`Pekerjaan` = VALUES(`Pekerjaan`),`Kewarganegaraan` = VALUES(`Kewarganegaraan`),`JenisKelamin` = VALUES(`JenisKelamin`),`Ktp` = VALUES(`Ktp`)");
            if (hasil > 0)
            {
                JOptionPane.showMessageDialog(this, "Berhasil Tambah Data");
            }

            c.close();

        }
        catch (Exception e)
        {
            System.out.println("gagal  : " + e.getMessage());
            JOptionPane.showMessageDialog(this, "Gagal Tambah Data");
        }
    }

    private void aturTabel()
    {
        JComboBox comboBox = new JComboBox();
        comboBox.addItem("Islam");
        comboBox.addItem("Kristen Protestan");
        comboBox.addItem("Khatolik");
        comboBox.addItem("Hindu");
        comboBox.addItem("Budha");
        comboBox.addItem("Konghucu");

        JComboBox golDarah = new JComboBox();
        golDarah.addItem("A");
        golDarah.addItem("O");
        golDarah.addItem("B");
        golDarah.addItem("AB");

        JComboBox status = new JComboBox();
        status.addItem("Belum Kawin");
        status.addItem("Kawin");
        status.addItem("Janda");
        status.addItem("Duda");

        JComboBox kewarganegaraan = new JComboBox();
        kewarganegaraan.addItem("WNI");
        kewarganegaraan.addItem("WNA");

        JComboBox jenisKelamin = new JComboBox();
        jenisKelamin.addItem("Laki-laki");
        jenisKelamin.addItem("Perempuan");

        JComboBox ktp = new JComboBox();
        ktp.addItem("Ktp DKI");
        ktp.addItem("Ktp non Dki");

        tabelPenduduk.setDefaultEditor(java.util.Date.class, new JDateChooserCellEditor());//ngasih editor yang bagus untuk tipe date
        tabelPenduduk.getColumnModel().getColumn(4).setCellEditor(new DefaultCellEditor(golDarah));
        tabelPenduduk.getColumnModel().getColumn(6).setCellEditor(new DefaultCellEditor(comboBox));// ngasih editor khusus untuk kolom 5

        tabelPenduduk.getColumnModel().getColumn(7).setCellEditor(new DefaultCellEditor(status));
        tabelPenduduk.getColumnModel().getColumn(9).setCellEditor(new DefaultCellEditor(kewarganegaraan));
        tabelPenduduk.getColumnModel().getColumn(10).setCellEditor(new DefaultCellEditor(jenisKelamin));
        tabelPenduduk.getColumnModel().getColumn(11).setCellEditor(new DefaultCellEditor(ktp));

        tabelPenduduk.getColumnModel().getColumn(0).setPreferredWidth(100);
    }
} 
```

penduduk.java：

```
package Penduduk;

import java.util.Date;

/**
 *
 * @author Anas Muttaqin
 */
public class penduduk {

    private String Nik;
    private String Nama;
    private String TempatLahir;
    private Date tanggalLahir;
    private String GolDarah;
    private String Alamat;
    private String Agama;
    private String Status;
    private String Pekerjaan;
    private String Kewarganegaraan;
    private String JenisKelamin;
    private String Ktp;
    //private Date tanggalLahir;

    public penduduk(String Nik, String Nama, String TempatLahir, Date tanggalLahir, String GolDarah, String Alamat, String Agama, String Status, String Pekerjaan, String Kewarganegaraan, String JenisKelamin, String Ktp) {
        this.Nik = Nik;
        this.Nama = Nama;
        this.TempatLahir = TempatLahir;
        this.tanggalLahir = tanggalLahir;
        this.GolDarah = GolDarah;
        this.Alamat = Alamat;
        this.Agama = Agama;
        this.Status = Status;
        this.Pekerjaan = Pekerjaan;
        this.Kewarganegaraan = Kewarganegaraan;
        this.JenisKelamin = JenisKelamin;
        this.Ktp = Ktp;
    }

    public String getNik() {
        return Nik;
    }

    public void setNik(String Nik) {
        this.Nik = Nik;
    }

    public String getNama() {
        return Nama;
    }

    public void setNama(String Nama) {
        this.Nama = Nama;
    }

    public String getTempatLahir() {
        return TempatLahir;
    }

    public void setTempatLahir(String TempatLahir) {
        this.TempatLahir = TempatLahir;
    }

    public Date getTanggalLahir() {
        return tanggalLahir;
    }

    public void setTanggalLahir(Date tanggalLahir) {
        this.tanggalLahir = tanggalLahir;
    }

    public String getGolDarah() {
        return GolDarah;
    }

    public void setGolDarah(String GolDarah) {
        this.GolDarah = GolDarah;
    }

    public String getAlamat() {
        return Alamat;
    }

    public void setAlamat(String Alamat) {
        this.Alamat = Alamat;
    }

    public String getAgama() {
        return Agama;
    }

    public void setAgama(String Agama) {
        this.Agama = Agama;
    }

    public String getStatus() {
        return Status;
    }

    public void setStatus(String Status) {
        this.Status = Status;
    }

    public String getPekerjaan() {
        return Pekerjaan;
    }

    public void setPekerjaan(String Pekerjaan) {
        this.Pekerjaan = Pekerjaan;
    }

    public String getKewarganegaraan() {
        return Kewarganegaraan;
    }

    public void setKewarganegaraan(String Kewarganegaraan) {
        this.Kewarganegaraan = Kewarganegaraan;
    }

    public String getJenisKelamin() {
        return JenisKelamin;
    }

    public void setJenisKelamin(String JenisKelamin) {
        this.JenisKelamin = JenisKelamin;
    }

    public String getKtp() {
        return Ktp;
    }

    public void setKtp(String Ktp) {
        this.Ktp = Ktp;
    }

} 
```

tabelnya.java：

```
package Penduduk;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.util.ArrayList;
import java.util.Date;
import javax.swing.JOptionPane;
import javax.swing.table.AbstractTableModel;

/**
 *
 * @author Anas Muttaqin
 */
public class tabelnya extends AbstractTableModel {

    private String[] columnNames = {
        "Nik", "Nama", "Tempat Lahir", "Tanggal lahir", "Golongan Darah", "Alamat", "Agama", "Status", "Pekerjaan", "Kewarganegaraan", "Jenis Kelamin", "Kttp"
    };
    private ArrayList<penduduk> penduduksa;

    public tabelnya() {
        penduduksa = new ArrayList<>();
        dataPenduduk();
    }

    @Override
    public int getRowCount() {
        return penduduksa.size();
    }

    @Override
    public int getColumnCount() {
        return 12;
    }

    @Override
    public Class getColumnClass(int c) {
        return getValueAt(0, c).getClass();
    }

    public ArrayList<penduduk> getData() {
        return penduduksa;
    }

    public Object tester() {
        return "Didalem tester : "+penduduksa.get(0).getNama();
    }

    @Override
    public Object getValueAt(int rowIndex, int columnIndex) {
        switch (columnIndex) {
            case 0:
                return penduduksa.get(rowIndex).getNik();

            case 1:
                System.out.println("Didalem getvalue : "+rowIndex+" " + penduduksa.get(rowIndex).getNama());
                return penduduksa.get(rowIndex).getNama();

            case 2:
                return penduduksa.get(rowIndex).getTempatLahir();

            case 3:
                return penduduksa.get(rowIndex).getTanggalLahir();

            case 4:
                return penduduksa.get(rowIndex).getGolDarah();

            case 5:
                return penduduksa.get(rowIndex).getAlamat();

            case 6:
                return penduduksa.get(rowIndex).getAgama();

            case 7:
                return penduduksa.get(rowIndex).getStatus();

            case 8:
                return penduduksa.get(rowIndex).getPekerjaan();

            case 9:
                return penduduksa.get(rowIndex).getKewarganegaraan();

            case 10:
                return penduduksa.get(rowIndex).getJenisKelamin();

            case 11:
                return penduduksa.get(rowIndex).getKtp();

        }

        return "Something worng at" + rowIndex + "," + columnIndex;
    }

    @Override
    public void setValueAt(Object aValue, int rowIndex, int columnIndex) {

        //penduduks.get(rowIndex).setNama("");
        switch (columnIndex) {

            case 1:
                penduduksa.get(rowIndex).setNama(String.valueOf(aValue));
                break;
            case 2:
                penduduksa.get(rowIndex).setTempatLahir(String.valueOf(aValue));
                break;
            case 3:
                penduduksa.get(rowIndex).setTanggalLahir((Date) aValue);
                break;
            case 4:
                penduduksa.get(rowIndex).setGolDarah(String.valueOf(aValue));
                break;
            case 5:
                penduduksa.get(rowIndex).setAlamat(String.valueOf(aValue));
                break;
            case 6:
                penduduksa.get(rowIndex).setAgama(String.valueOf(aValue));
                break;
            case 7:
                penduduksa.get(rowIndex).setStatus(String.valueOf(aValue));
                break;
            case 8:
                penduduksa.get(rowIndex).setPekerjaan(String.valueOf(aValue));
                break;
            case 9:
                penduduksa.get(rowIndex).setKewarganegaraan(String.valueOf(aValue));
                break;
            case 10:
                penduduksa.get(rowIndex).setJenisKelamin(String.valueOf(aValue));
                break;
            case 11:
                penduduksa.get(rowIndex).setKtp(String.valueOf(aValue));
                break;

        }

        System.out.println("Didalem setValue "+getValueAt(rowIndex, columnIndex));
        fireTableDataChanged();
    }

    @Override
    public String getColumnName(int column) {
        return columnNames[column];
    }

    //setting apakah cellnya bisa diedit apa kaga.
    @Override
    public boolean isCellEditable(int rowIndex, int columnIndex) {
        return true;
    }

    public void addRow() {

        penduduksa.add(new penduduk("", "", "", new Date(), "", "", "", "", "", "", "", ""));
        fireTableStructureChanged();
    }

    private void dataPenduduk() {
        try {
            System.out.println("datapenduduk");
            Class.forName("com.mysql.jdbc.Driver");
            Connection c = DriverManager.getConnection("jdbc:mysql://localhost/skripsi", "root", "saphiregem01X");//Setting database
            ResultSet ss = c.createStatement().executeQuery("select * from penduduk");

            while (ss.next()) {
                penduduksa.add(new penduduk(ss.getString("Nik"), ss.getString("Nama"), ss.getString("TempatLahir"), ss.getDate("TanggalLahir"), ss.getString("GolDarah"), ss.getString("Alamat"), ss.getString("Agama"), ss.getString("Status"), ss.getString("Pekerjaan"), ss.getString("Kewarganegaraan"), ss.getString("JenisKelamin"), ss.getString("Ktp")));

            }

            c.close();
        } catch (Exception e) {
            System.out.println("gagal  : " + e.getMessage());
            JOptionPane.showMessageDialog(null, "Gagal Tambah Data");
        }
    }
} 
```

好的，就是这样，请告诉我我哪里做错了。谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T14:30:51.047

在您的班级`TambahPenduduk`中，您正在创建`tabModel = new tabelnya();`

但后来你用`tabelPenduduk.setModel(new tabelnya());`而不是创建你的表`tabelPenduduk.setModel(tabModel);`。因此，您正在混合 or your 的不同实例`TableModel`，因此您会看到不同的结果。只需将您的代码更改为：

```
tabelPenduduk.setModel(tabModel); 
```

它应该已经更好地工作了（除非您的代码中有其他问题，否则我没有花时间阅读所有内容）。

# xml - 如何使用某些模式解析器从 sxd 模式获取 XML 节点的子节点和属性信息？

> ID：15091359
> 
> 赞同：0
> 
> 时间：2013-02-26T14:17:39.770
> 
> 标签：xml, dom, schema

如何从 sxd 模式中获取 XML 节点的所有可能的子节点和属性信息？如果我传递了标签名称，是否有任何模式解析器（如 DOM）会提供此类信息？例如，如果我通过 'getChildNodes(NodeName)' 它应该给所有可能的孩子。请帮忙..提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T21:28:09.997

这取决于...有时您可以使用[TypeInfoProvider](http://docs.oracle.com/javase/7/docs/api/javax/xml/validation/TypeInfoProvider.html)获取一些信息：

```
package thebestone;

import java.io.File;
import javax.xml.XMLConstants;
import javax.xml.validation.Schema;
import javax.xml.validation.SchemaFactory;
import javax.xml.validation.TypeInfoProvider;
import javax.xml.validation.ValidatorHandler;
import org.xml.sax.Attributes;
import org.xml.sax.SAXException;
import org.xml.sax.XMLReader;
import org.xml.sax.helpers.XMLReaderFactory;

public class valid
{
  public static void main(String[] args) throws Exception
  {
    Schema schem =
      SchemaFactory.
      newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI).
      newSchema(new File("schema.xsd"));
    ValidatorHandler valhand = schem.newValidatorHandler();
    TypeInfoProvider typprov = valhand.getTypeInfoProvider();
    valhand.setContentHandler(new TypeListener(typprov));
    XMLReader read = XMLReaderFactory.createXMLReader();
    read.setContentHandler(valhand);
    read.parse("doc.xml");
  }

  public static class TypeListener extends org.xml.sax.helpers.DefaultHandler
  {
    TypeInfoProvider typinfo;

    TypeListener(TypeInfoProvider prov)
    {
      typinfo = prov;
    }

    @Override
    public void startElement(String uri, String localName, String qName, Attributes attributes) throws SAXException
    {
      super.startElement(uri, localName, qName, attributes);
      System.out.println("localName="+localName+", typinfo="+typinfo.getElementTypeInfo());
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T18:54:49.557

小心你的要求。知道元素名称并不足以知道所有可能的子元素可能是什么，因为它取决于元素出现的上下文 - 在最坏的情况下，它可能是跳过验证的文档的一部分，在这种情况下它可以包含任何东西。从复杂类型开始更好，但即便如此，这也是一个复杂的问题，因为您必须考虑替换组，以及通过扩展从您的起始类型派生的类型。更不用说通配符了。

在 Saxon 中，您可以使用一些相当低级的内部 API 来做到这一点：一旦您找到了您感兴趣的 ComplexType，您可以调用gatherAllPermittedChildren() 来获取可能显示为子元素的列表，并可以选择是否要忽略内容模型中的通配符。

# sql - 按值（不是列）分组后从组中选择一个随机条目？

> ID：15091363
> 
> 赞同：3
> 
> 时间：2013-02-26T14:17:50.177
> 
> 标签：sql, postgresql, random, group-by, postgis

我想使用 Postgres 和 PostGIS 编写查询。我也将 Rails 与`rgeo`,`rgeo-activerecord`和一起使用`activerecord-postgis-adapter`，但 Rails 的东西并不重要。

表结构：

```
measurement
 - int id
 - int anchor_id
 - Point groundtruth
 - data (not important for the query) 
```

示例数据：

```
id | anchor_id | groundtruth | data
-----------------------------------
1  | 1         | POINT(1 4)  | ...
2  | 3         | POINT(1 4)  | ...
3  | 2         | POINT(1 4)  | ...
4  | 3         | POINT(1 4)  | ...
-----------------------------------
5  | 2         | POINT(3 2)  | ...
6  | 4         | POINT(3 2)  | ...
-----------------------------------
7  | 1         | POINT(4 3)  | ...
8  | 1         | POINT(4 3)  | ...
9  | 1         | POINT(4 3)  | ...
10 | 5         | POINT(4 3)  | ...
11 | 3         | POINT(4 3)  | ... 
```

该表是某种手动创建`view`的，用于更快的查找（具有数百万行）。否则我们必须加入 8 个表，它会变得更慢。但这不是问题的一部分。

* * *

## 简单版：

**参数：**

*   观点`p`
*   整数`d`

**查询应该做什么：**

**1.**查询查找所有`groundtruth`具有`distance < d`from Point的 Points`p`

SQL 非常简单：`WHERE st_distance(groundtruth, p) < d`

**2.**现在我们有了一个带有s的`groundtruth`点列表。`anchor_id`如上表所示，可能有多个相同的 groundtruth-anchor_id 元组。例如：`anchor_id=3`和`groundtruth=POINT(1 4)`。

**3.**接下来我想通过随机选择其中一个来消除相同的元组（！）。为什么不直接拿第一呢？因为`data`列不同。

在 SQL 中选择一个随机行：`SELECT ... ORDER BY RANDOM() LIMIT 1`

我对这一切的问题是：我可以想象一个使用 SQL`LOOP`和大量子查询的解决方案，**但**肯定有一个解决方案使用`GROUP BY`或其他一些方法可以使它更快。

## 完整版本：

与上述基本相同，不同之处在于：输入参数变化：

*   很多积分`p1`...`p312456345`
*   还是一个`d`

如果简单查询有效，则可以使用`LOOP`in SQL 来完成。但也许有更好（更快）的解决方案，因为数据库真的很大！

* * *

# 解决方案

```
WITH ps AS (SELECT unnest(p_array) AS p)
SELECT DISTINCT ON (anchor_id, groundtruth)
    *
FROM measurement m, ps
WHERE EXISTS (
    SELECT 1
    FROM ps
    WHERE st_distance(m.groundtruth, ps.p) < d
)
ORDER BY anchor_id, groundtruth, random(); 
```

感谢欧文·布兰德施泰特！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:25:22.623

为了消除重复，这可能是 PostgreSQL 中最有效的查询：

```
SELECT DISTINCT ON (anchor_id, groundtruth) *
FROM   measurement
WHERE  st_distance(p, groundtruth) < d 
```

有关此查询样式的更多信息：

*   [在每个 GROUP BY 组中选择第一行？](https://stackoverflow.com/questions/3800551/select-first-row-in-each-group-by-group/7630564#7630564)

正如评论中提到的，这给了你一个*任意*的选择。如果您需要**random**，则要贵一些：

```
SELECT DISTINCT ON (anchor_id, groundtruth) *
FROM   measurement
WHERE  st_distance(p, groundtruth) < d
ORDER  BY anchor_id, groundtruth, random() 
```

* * *

第二部分更难优化。[**`EXISTS`**](https://www.postgresql.org/docs/current/functions-subquery.html#FUNCTIONS-SUBQUERY-EXISTS)半连接可能是最快的选择。对于给定的表`ps (p point)`：

```
SELECT DISTINCT ON (anchor_id, groundtruth) *
FROM   measurement m
WHERE  EXISTS (
   SELECT 1
   FROM   ps
   WHERE  st_distance(ps.p, m.groundtruth) < d
   )
ORDER  BY anchor_id, groundtruth, random(); 
```

`p`这可以在一个足够接近时立即停止评估，并使查询的其余部分保持简单。

请务必使用[匹配的**GiST 索引**](http://blog.opengeo.org/2011/09/28/indexed-nearest-neighbour-search-in-postgis/)来支持它。

如果您有一个数组作为输入，请即时创建一个CTE [：](https://www.postgresql.org/docs/current/queries-with.html)[`unnest()`](https://www.postgresql.org/docs/current/functions-array.html#ARRAY-FUNCTIONS-TABLE)

```
WITH ps AS (SELECT unnest(p_array) AS p)
SELECT ... 
```

### 根据评论更新

如果您只需要**一行**作为答案，您可以简化：

```
WITH ps AS (SELECT unnest(p_array) AS p)
SELECT *
FROM   measurement m
WHERE  EXISTS (
   SELECT 1
   FROM   ps
   WHERE  st_distance(ps.p, m.groundtruth) < d
   )
LIMIT  1; 
```

### 更快`ST_DWithin()`

该函数可能更有效[`ST_DWithin()`](https://postgis.net/docs/ST_DWithin.html)（以及匹配的 GiST 索引！）。
要获得**一行**（在此处使用子选择而不是 CTE）：

```
SELECT *
FROM   measurement m
JOIN  (SELECT unnest(p_array) AS p) ps ON ST_DWithin(ps.p, m.groundtruth, d)
LIMIT  1; 
```

要为距离内**的每个点获取一行`p`**`d`：

```
SELECT DISTINCT ON (ps.p) *
FROM   measurement m
JOIN  (SELECT unnest(p_array) AS p) ps ON ST_DWithin(ps.p, m.groundtruth, d) 
```

添加`ORDER BY random()`将使这个查询*更加昂贵*。如果没有`random()`，Postgres 只能从 GiST 索引中选择*第一个*匹配的行。否则，必须随机检索和排序*所有可能的匹配项。*

* * *

顺便说一句，`LIMIT 1`里面`EXISTS`是没有意义的。[在我提供的链接](https://www.postgresql.org/docs/current/functions-subquery.html#FUNCTIONS-SUBQUERY-EXISTS)或[这个相关问题](https://stackoverflow.com/questions/7710153/what-is-easier-to-read-in-exists-subqueries)上阅读手册。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T17:04:23.070

我现在破解了它，但查询很慢......

```
WITH
  ps AS (
    SELECT unnest(p_array)
    ) AS p
  ),

  gtps AS (
    SELECT DISTINCT ON(ps.p)
      ps.p, m.groundtruth
    FROM measurement m, ps
    WHERE st_distance(m.groundtruth, ps.p) < d
    ORDER BY ps.p, RANDOM()
  )

SELECT DISTINCT ON(gtps.p, gtps.groundtruth, m.anchor_id)
  m.id, m.anchor_id, gtps.groundtruth, gtps.p
FROM measurement m, gtps
ORDER BY gtps.p, gtps.groundtruth, m.anchor_id, RANDOM() 
```

我的测试数据库包含 22000 行，我给了它两个输入值，大约需要 700 毫秒。最后可能有数百个输入值：-/

* * *

结果现在看起来像这样：

```
id  | anchor_id | groundtruth | p
-----------------------------------------
20  | 1         | POINT(0 2)  | POINT(1 0)
14  | 3         | POINT(0 2)  | POINT(1 0)
5   | 8         | POINT(0 2)  | POINT(1 0)
42  | 2         | POINT(4 1)  | POINT(2 2)
11  | 3         | POINT(4 8)  | POINT(4 8)
4   | 6         | POINT(4 8)  | POINT(4 8)
1   | 1         | POINT(6 2)  | POINT(7 3)
9   | 5         | POINT(6 2)  | POINT(7 3)
25  | 3         | POINT(6 2)  | POINT(9 1)
13  | 6         | POINT(6 2)  | POINT(9 1)
18  | 7         | POINT(6 2)  | POINT(9 1) 
```

# 新的：

```
SELECT
  m.groundtruth, ps.p, ARRAY_AGG(m.anchor_id), ARRAY_AGG(m.id)
FROM
  measurement m
JOIN
  (SELECT unnest(point_array) AS p) AS ps
  ON ST_DWithin(ps.p, m.groundtruth, 0.5)
GROUP BY groundtruth, ps.p 
```

实际结果：

```
p           | groundtruth | anchor_arr | id_arr
--------------------------------------------------
P1          | G1          | {1,3,2,..} | {9,8,11,..}
P1          | G2          | {4,3,5,..} | {1,8,23,..}
P1          | G3          | {6,8,9,..} | {12,7,6,..}
P2          | G1          | {6,6,2,..} | {15,2,10,..}
P2          | G4          | {7,9,1,..} | {5,4,3,..}
...         | ...         | ...        | ... 
```

所以此刻我得到：

*   每个不同的 inputValue-groundtruth-tuple
*   对于每个元组，我得到一个数组，其中所有`anchor_id`对应`groundtruth`元组的部分
*   `id`以及所有对应于`groundtruth`-`anchor_id`关系的 s的数组

记住：

*   两个输入值可以“选择”相同`groundtruth`
*   单个`groundtruth`值可以有多个相同`anchor_id`的 s
*   每个元组都有一个不同`groundtruth`的`anchor_id``id`

**那么完成时缺少什么？：**

*   我只需要一个随机行`ps.p`
*   这两个数组属于彼此。意思是：里面物品的顺序很重要！
*   这两个数组需要过滤（随机）：
    *   对于`anchor_id`数组中出现不止一次的每个：保留一个随机的并删除所有其他的。这也意味着`id`从`id`-array 中删除每个已删除的对应项`anchor_id`

# asp.net - ASP.NET：创建多个可打印页面并一键打印

> ID：15091366
> 
> 赞同：0
> 
> 时间：2013-02-26T14:18:04.447
> 
> 标签：asp.net, printing

我想实现以下目标：创建同一网页的多个实例，每个页面显示略有不同的数据（如客户姓名、地址等）。这些页面应该可以以尽可能少的努力为用户打印。问题是，如果您在每个页面上调用 javascript 打印指令，用户将获得大量的 PrintDialogs。解决此问题的一种解决方案是在运行时动态创建这些打印页面并将它们全部放在一个页面上，由分页符分隔（因此用户只需确认打印对话框一次）。这个解决方案有一个巨大的问题，就是我不能使用 Visual Studio 设计器将我的页面放在一起。另一种可能的解决方案是在设计器中构建页面模板，将客户特定的数据动态填充到每个页面的相应控件中，然后以某种方式将所有结果页面链接到一个长页面；再次由分页符分隔。但我真的不知道该怎么做....我尝试使用 Render() 事件，获取 HTMl 代码，然后复制它，但我没有取得多大成功。

因此，非常欢迎 Render() 方法或任何其他解决方案的任何指导！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:14:48.247

您的数据是任何形式的列表吗？可以合一吗？不一定是全部，而是每个所需页面的 ID，或类似的东西？它足以驱动数据绑定控件吗？

您可以使用`Repeater`页面上的控件根据模板构建您的“页面”。分页符可以使用 CSS 样式来实现。然后，您只需打印一页（长）页。

你甚至可以让你的“页面”`UserControl`更容易组织数据驱动的渲染变化。

# java - 为 Android 应用程序编写代理

> ID：15091372
> 
> 赞同：0
> 
> 时间：2013-02-26T14:18:32.437
> 
> 标签：java, android, proxy

我有一个 android 应用程序，它向服务器发送信息，特别是它发送一些统计信息来检查用户对应用程序的正常使用情况。例如，如果他们单击按钮查看特定页面，则会将统计信息发送到服务器，指定一系列信息，例如手机型号、请求的页面、android ecc ecc 的版本。这些信息稍后可以使用 splunk [http://www.splunk.com/](http://www.splunk.com/)看到。现在我的问题是，对于我的应用程序发送的每个事件，我应该能够说出该事件是否正确发送到服务器。我的想法是开发一个代理，它可以拦截我的应用程序向服务器发出的请求并监听响应，就像 Charles 代理一样。问题是我不知道从哪里开始。任何人都可以建议我如何完成这项任务？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:00:42.687

好吧，我认为您可以将代码添加到您的应用程序中，这样，当您发送数据时，您会收到 HTTP 回复并检查代码是否为 200（代表来自服务器的 OK 响应）。如果是这样，您知道您的请求很好，如果不是（不同的回复代码），您将其视为错误。

您将必须检查您的服务器是否正确响应，是否有错误和 OK 消息。

另请参阅[HTTP 状态码](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes)

一个好主意是为您的额外代码使用[代理设计模式](http://en.wikipedia.org/wiki/Proxy_pattern)。

# delphi - 将受保护的抽象方法重新定义为私有

> ID：15091374
> 
> 赞同：0
> 
> 时间：2013-02-26T14:18:39.630
> 
> 标签：delphi, oop

我有一个抽象类，其中在受保护的部分中声明了一个抽象方法。我可以在它的孩子中将此方法重新定义为私有吗？

从逻辑上看——在抽象类中，这个方法应该被保护为对孩子可用（并且只对孩子可用）；但是在孩子中，这个方法可以是私有的，它（方法）不会在这个类的对象之外调用。

我可以这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:27:00.337

你确实可以这样做。

```
type
  TMyAbstractBase = class
  protected
    procedure Foo; virtual; abstract;
  public
    procedure DoFoo;
  end;

  TMyDerived = class(TMyAbstractBase)
  private
    procedure Foo; override;
  end;

procedure TMyAbstractBase.DoFoo;
begin
  Foo;
end;

procedure TMyDerived.Foo;
begin
  Writeln('TMyDerived.Foo');
end; 
```

然后下面的代码，当然位于不同的单元，不能编译：

```
var
  obj: TMyDerived;
....
obj.Foo;//[dcc32 Error]: E2361 Cannot access private symbol TMyDerived.Foo 
```

不过，这样做并不是一个好主意。现在考虑这个类，再次在不同的单元中声明。

```
type
  TMyDerived2 = class(TMyDerived)
  public
    procedure Foo; override;
  end;

procedure TMyDerived2.Foo;
begin
  inherited;//this does nothing
  Writeln('TMyDerived2.Foo');
end; 
```

如果`TMyDerived2.Foo`曾经执行，那么该`inherited`语句什么也不做。那是因为`TMyDerived.Foo`是私人的。

所以，我的建议是，虽然你提出的建议是可能的，但你不要这样做。根据经验，您应该避免降低成员的可见性。

# android - 如何在 Android 中使用 kSOAP 序列化自创建的对象

> ID：15091380
> 
> 赞同：2
> 
> 时间：2013-02-26T14:18:50.317
> 
> 标签：android, ksoap2, android-ksoap2, ksoap

我正在做一些 ksoap 请求。一切正常。但现在我到了必须传递我创建的自定义对象的地步。它被称为“Auftrag”。这只是一个简单的 POJO。

尝试以“request.addProperty”传递它以错误结尾

```
02-26 14:47:32.995: W/System.err(14095): java.lang.RuntimeException: Cannot serialize: kochtokrax.de.pojo.Auftrag@41a444d8 
```

花了很多时间后，我找到了“编组解决方案”。 [http://seesharpgears.blogspot.de/2010/11/implementing-ksoap-marshal-interface.html](http://seesharpgears.blogspot.de/2010/11/implementing-ksoap-marshal-interface.html) 此示例适用于“doubel”和“Date”类型。可悲的是，这不适用于我的对象。有人可以帮助我在这种情况下如何处理吗？

这是我调用服务的方式：

```
 PropertyInfo nos =new PropertyInfo();
  nos.setName("Auftrag");
  nos.setType(AuftragMarshall.class);

    // Use this to add parameters
    request.addProperty("Auftrag", auftrag);
    request.addProperty("DruckerBar", druckerBar);
    request.addProperty("DruckerKueche", druckerKueche);

    // Declare the version of the SOAP request
    SoapSerializationEnvelope envelope = new SoaperializationEnvelope(SoapEnvelope.VER11);
    envelope.dotNet = false;
    envelope.setOutputSoapObject(request);

    AuftragMarshall marshall = new AuftragMarshall();
    marshall.register(envelope); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:55:51.373

类`Auftrag`必须实现`KvmSerializable`。

您没有正确设置 的值`nos`，因此：

```
PropertyInfo nos = new PropertyInfo();
nos.setName("Auftrag");
nos.setType(AuftragMarshall.class);
nos.setValue(auftragObj); 
```

因为您已将 type of 设置`PropertyInfo`为`Auftrag`。但后来你添加`DruckerBar`and `DruckerKueche`。我想这是不同的课程。这是不正确的。

我像你一样解决了类似的问题，编组对我也不起作用。我用自定义映射器解决了它。我首先将所需对象映射到具有实现的类对象，`KvmSerializable`然后通过 Web 服务发送它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T10:16:43.003

我建议您查看[将复杂对象数组添加到请求](http://code.google.com/p/ksoap2-android/wiki/CodingTipsAndTricks#Adding_an_array_of_complex_objects_to_the_request)中。

# c - 为什么是这样？number 变量如何获得 5 个不同的值？它是如何记忆的？

> ID：15091381
> 
> 赞同：-1
> 
> 时间：2013-02-26T14:18:51.467
> 
> 标签：c

下面的代码请求 5 个数字并打印给定数字的星号。数字变量如何记住 5 个数字？输入的下一个数字不会破坏变量内的值吗？我不明白。你能给我解释一下吗？

下面的代码给出了输出：

```
Enter 5 numbers between 1 and 30: 28 5 13 24 7
    ****************************
    *****
    *************
    ************************
    *******

#include <stdio.h> 
int main( void ){    
    int i;      
    int j;      /* inner counter */   
    int number; /* current number */   
    printf( "Enter 5 numbers between 1 and 30: " );  /* loop 5 times */   
    for ( i = 1; i <= 5; i++ ) {
        scanf( "%d", &number );      /* print asterisks corresponding to current input */      
            for ( j = 1; j <= number; j++ )      
            printf( "*" );

    printf( "\n" );
    } /* end for */   
return 0; 
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T14:31:26.340

您的问题的答案是：当您按“enter”时，文本将被转储到标准输入中。scanf(..) 从标准输入读取数据，从而为您解析所有 5 个整数（一个接一个）。scanf 只会在 stdin 为空时阻塞。因此这些值不存储在数字变量中，而是存储在标准输入中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T14:22:47.207

这是因为打印发生在每次读取之间。请注意，`scanf`它在循环内部`for ( i = 1; i <= 5; i++ )`，第二个循环也是如此`for ( j = 1; i <= number; j++ )`。

所以实际发生的是：
1\. 将输入读入`number`
2\. 打印星号
3\. 转到 1。

该代码实际上并不记住所有 5 个数字 - 它只记住当前数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T16:56:16.073

是的，这是一个非常 IQ 类型的问题。查看行 printf("请输入 1 到 30 之间的 5 个数字：");

而不是他们是一个“for循环”来取值。这个循环覆盖了其余的代码。因此，当第一个“数字”取值时，第二个“for循环”开始工作，完成后返回第一个“for循环”以从键盘获取第二个输入等等......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T14:22:24.663

它不包含所有 5 个数字。您的代码设置 number 的值，然后打印相关数量的 * 字符。然后它会在您的第一个 for 循环的连续迭代中接收一个新值。该变量被重复使用，而不是同时设置为多个值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T14:22:38.283

每次您在程序中输入一个数字时，“int number”都会设置为该数字。

旧值已被替换，不再可访问。

在这里阅读[http://en.wikipedia.org/wiki/Variable_(computer_science)](http://en.wikipedia.org/wiki/Variable_(computer_science))

我可以建议不要从 C 开始编程，而是从 Python 之类的东西开始。

# c++ - 使用 /callcap 和 boost 异常的运行时错误

> ID：15091383
> 
> 赞同：0
> 
> 时间：2013-02-26T14:18:59.720
> 
> 标签：c++, visual-studio-2010, boost, runtime-error

我必须在程序执行期间保存调用树。为此，我找到了编译器开关**/callcap**。一切正常，直到我包含**boost/exception/detail/exception_ptr.hpp**

我在**boost/exception/exception.hpp:216处收到***访问冲突写入位置 0x00000000*的未处理异常。这甚至在到达 main() 之前就被抛出。

 **我正在使用提升 1.51.0。

我有两个简单的文件：

```
// main.cpp
#include <boost/exception/detail/exception_ptr.hpp>
int main()
{} 
```

cap.cpp 在没有 /callcap 开关的情况下编译

```
 // cap.cpp
  extern "C" void __stdcall _CAP_Enter_Function(void *p)
{
}

extern "C" void __stdcall _CAP_Exit_Function(void *p) 
{
} 
```

我认为问题在于 exception_ptr.hpp 中的所有函数都将使用 callcap 函数进行包装，但不幸的是，我不知道如何只为 hpp 关闭此功能。

请问各位大神有过这样的经历吗？**

# .net - 作为服务运行时找不到 PowerShell 模块

> ID：15091392
> 
> 赞同：3
> 
> 时间：2013-02-26T14:19:26.067
> 
> 标签：.net, powershell, service, office365

我有一个项目，我将 Office 365 许可证分配给用户。有一个 Web 项目允许管理员查看可用许可证并为用户选择许可证。在后台，有一项服务每 15 分钟执行一次实际的许可证分配（和许多其他任务）。我们不直接分配许可证的原因是用户可能尚未同步到 Office 365。如果 DirSync 尚未运行，该服务稍后会自动重试。

回到我的问题：与 Office 365 的连接使用 PowerShell 模块“MSOnline”。问题是服务无法加载此模块。我总是收到标准错误消息：

> 未加载指定的模块“MSOnline”，因为在任何模块目录中都找不到有效的模块文件。

Web 应用程序没有这个问题。例如，它可以连接并检索可用的许可证。如果我在 LINQPad 中使用服务应用程序中的代码或作为一个小的独立可执行文件，则一切正常。只有服务无法加载模块。谁能帮我？

Web 应用程序和服务都使用以下代码片段连接到 Office 365（简化代码以提高可读性）。

```
var iss = InitialSessionState.CreateDefault();

iss.ThrowOnRunspaceOpenError = true;
iss.AuthorizationManager = new AuthorizationManager("MyPowerShellInvoker");

iss.ImportPSModule("MSOnline");

_runspace = RunspaceFactory.CreateRunspace(iss);
_runspace.Open();
_invoker = new RunspaceInvoke(_runspace);

using (Pipeline pipeline = _runspace.CreatePipeline())
{
    var cmd = new Command("Connect-MsolService");
    cmd.Parameters.Add("Credential", /* PSCredential object */);

    pipeline.Commands.Add(cmd);
    pipeline.Invoke();
} 
```

*PS：*该服务在“本地系统”帐户下运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T15:03:16.267

您的服务是作为 32 位还是 64 位目标运行的。我在多种情况下遇到了 32/64 问题。

# java - Solr 4 Webinterface 奇怪的查询输出

> ID：15091395
> 
> 赞同：0
> 
> 时间：2013-02-26T14:19:36.293
> 
> 标签：java, user-interface, solr

我已经在我的服务器上安装了 Solr 4。基本查询工作得很好。只是结果集变得不可读，如图所示![在 Solr4 中渲染结果](../Images/7ba15af55ffe89c1891a0e1d9a573e52.png)。

如果将其与 solr4 网站的屏幕截图进行比较：![在此处输入图像描述](../Images/1443050627fe988f0f76d51f8e60e203.png).

我尝试了 Safari 和 Chrome，都显示了这个不可读的输出。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T16:21:40.827

您的浏览器会尝试显示 XML 并去除所有标签。不幸的是，这在 Chrome、Safari 和 IE 中很常见。

我使用 Firefox 访问 solrs web 界面并获取 xml-data 的语法突出显示视图。

如果您不能使用 Firefox，解决方法是打开实际的 url（红色部分），然后使用浏览器的“查看源代码”功能。它将向您显示 Solr 发送的纯文本 xml。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T16:22:53.887

我相信这是 Solr 4.0 中的 XML 输出。尝试在下拉菜单中切换到 Ruby 或其他输出格式。

它已在 Solr 4.1 中修复。

# c# - 获取单个listView SelectedItem

> ID：15091400
> 
> 赞同：19
> 
> 时间：2013-02-26T14:19:50.470
> 
> 标签：c#, winforms, listviewitem

我`MultiSelect`将 listView 的属性设置为 false，并且我正在尝试获取单个 listViewItem。但是可用的属性是`SelectedItems`. 我一直在使用以下代码...

```
foreach (ListViewItem item in listView1.SelectedItems)
{
    //do something with item.text or whatever
} 
```

因为我知道只会选择一项。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-02-26T14:23:34.787

通常`SelectedItems`返回一个集合、一个数组或一个`IQueryable`.

无论哪种方式，您都可以像使用数组一样通过索引访问项目：

```
String text = listView1.SelectedItems[0].Text; 
```

顺便说一句，您可以将要查看的项目保存到变量中，并在设置断点后在本地检查其结构。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-02-26T14:23:59.453

我这样做：

```
if (listView1.SelectedItems.Count > 0)
{
     var item = listView1.SelectedItems[0];
     //rest of your logic
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-10-23T10:49:56.000

有时仅使用下面的行会引发异常，

```
String text = listView1.SelectedItems[0].Text; 
```

所以我在下面使用这段代码：

```
private void listView1_SelectedIndexChanged(object sender, EventArgs e) 
{ 
    if (listView1.SelectedIndices.Count <= 0) 
    { 
        return; 
    } 
    int intselectedindex = listView1.SelectedIndices[0]; 
    if (intselectedindex >= 0) 
    {
        String text = listView1.Items[intselectedindex].Text;

        //do something
        //MessageBox.Show(listView1.Items[intselectedindex].Text); 
    } 
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-06-11T22:22:04.640

如果它只是一个带有一两个的漂亮小应用程序，`ListViews`我通常只创建一个小助手属性：

```
private ListViewItem SelectedItem { get { return (listView1.SelectedItems.Count > 0 ? listView1.SelectedItems[0] : null); } } 
```

如果我有负载，则将其移至辅助类：

```
internal static class ListViewEx
{
    internal static ListViewItem GetSelectedItem(this ListView listView1)
    {
        return (listView1.SelectedItems.Count > 0 ? listView1.SelectedItems[0] : null);
    }
} 
```

所以：

```
ListViewItem item = lstFixtures.GetSelectedItem(); 
```

界面有点垃圾，`ListView`所以我通常发现帮助类增长得很快。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-08-24T08:28:39.303

对于购物车情况，这是我推荐的。我要把它分解成最简单的形式。

假设我们从这个开始（一个包含 2 个列、2 个按钮和一个标签的列表视图）： ![开始](../Images/7ee2dfa0675891f0b9d5d2143a52004a.png)

首先，删除项目，为此我们将输入删除按钮：

```
private void button2_Click(object sender, EventArgs e)
{
    listView1.Items.Remove(listView1.SelectedItems[0]);
    label1.Text = updateCartTotal().ToString();
} 
```

现在第二行是使用我将发布的下一个函数更新我们的标签总数，以将列表视图中第 2 列的所有总数相加：

```
private decimal updateCartTotal()
{
    decimal runningTotal = 0;
    foreach(ListViewItem l in listView1.Items)
    {
        runningTotal += Convert.ToDecimal(l.SubItems[1].Text);
    }
    return runningTotal;
} 
```

你不必像我一样使用小数，如果你没有小数，你可以使用 float 或 int。所以让我们分解一下。我们使用一个 for 循环来汇总第 2 列（SubItems[1].Text）中的所有项目。将其添加到我们在 foreach 循环之前声明的小数中以保持总数。如果你想报税，你可以这样做：

```
return runningTotal * 1.15; 
```

或者不管你的税率是多少。

总而言之，使用此函数，您只需调用该函数即可重新汇总您的列表视图。如果这是您所追求的，您可以像我之前演示的那样更改标签文本。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-14T14:46:37.950

至少对我来说，以上答案都没有显示如何实际处理确定您是否有 1 个或多个项目，以及如何以一种不依赖于实际仅存在的通用方式从您的项目中实际获取值一件或多件，所以我把我的帽子扔进了戒指。

通过检查您的计数以查看您至少有一个项目，然后在`foreach`上执行循环`.SelectedItems`，将每个项目转换为`DataRowView`：

```
if (listView1.SelectedItems.Count > 0)
{
     foreach (DataRowView drv in listView1.SelectedItems)
     {
         string firstColumn = drv.Row[0] != null ? drv.Row[0].ToString() : String.Empty;
         string secondColumn = drv.Row[1] != null ? drv.Row[1].ToString() : String.Empty;
         // ... do something with these values before they are replaced
         // by the next run of the loop that will get the next row
     }
} 
```

这将起作用，无论您有 1 个项目还是多个项目。有趣的是，[MSDN 说](https://msdn.microsoft.com/en-us/library/system.windows.forms.listview.selecteditems(v=vs.110).aspx)要`ListView.SelectedListViewItemCollection`用来捕获`listView1.SelectedItems`和迭代它，但我发现这在我的 WPF 应用程序中给出了一个错误： `The type name 'SelectedListViewItemCollection' does not exist in type 'ListView'`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-09-01T11:01:25.113

这适用于单选列表和多选列表：

```
foreach (ListViewItem item in listView1.SelectedItems)
{
    int index = item.Index;
    //index is now zero based index of selected item
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-11-17T14:47:02.443

```
foreach (ListViewItem itemRow in taskShowListView.Items)
{
    if (itemRow.Items[0].Checked == true)
    {
        int taskId = Convert.ToInt32(itemRow.SubItems[0].Text);

        string taskDate = itemRow.SubItems[1].ToString();
        string taskDescription = itemRow.SubItems[2].ToString();            
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-05-03T18:45:28.050

如果您想选择单个列表视图项目，请不要单击鼠标尝试此操作。

```
private void timeTable_listView_MouseUp(object sender, MouseEventArgs e)
        {
            Point mousePos = timeTable_listView.PointToClient(Control.MousePosition);
            ListViewHitTestInfo hitTest = timeTable_listView.HitTest(mousePos);

            try
            {
            int columnIndex = hitTest.Item.SubItems.IndexOf(hitTest.SubItem);
            edit_textBox.Text = timeTable_listView.SelectedItems[0].SubItems[columnIndex].Text;
            }
            catch(Exception)
            {

            }

        } 
```

# ember.js - Ember-table：在隐藏的 div 中使用时失败（欢 迎使用解决方法！）

> ID：15091403
> 
> 赞同：3
> 
> 时间：2013-02-26T14:20:01.750
> 
> 标签：ember.js, ember-table

我正在尝试在选项卡内使用[ember-table](http://addepar.github.com/ember-table/)`Bootstrap`，但显然如果该表包含在最初为 的选项卡中`display: none`，则表格布局不起作用：所有内容都大小不合适并卡在表格的左上角容器。

我通过制作手动切换的`display`div 缩小了问题范围，它表现出相同的行为。

我有一些关于如何解决这个问题的想法，但我对其他人的想法很感兴趣。

另外，我应该将此作为错误提交吗？似乎是一个常见的用例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-24T02:16:46.673

我也有类似的情况，虽然不完全一样。我最初在“light”视图中显示 ember-table 组件，具有一个宽度，但用户可以在该视图和具有更大宽度的“完整”视图之间切换（正如其容器所暗示的那样）。切换到更大的宽度将正确调整容器的大小，但在灯光视图中不可见的 ember-table 部分将仅包含空格，不包含单元格内容或边框，也不包含列标题。就好像它在容器的尺寸改变后从未重新渲染过。

我找到的解决方案是根据外部属性手动强制重新渲染表格，当用户切换此轻/完整模式时我会更改。为此，我扩展了表格组件，如下所示：

```
export default Ember.Table.EmberTableComponent.extend({

  // exposes a hook to resize (i.e. rerender) the table when it would otherwise
  // not have been detected
  resizeTriggered: function() {
    this.handleWindowResize();
  }.observes('resizeTrigger')
}); 
```

由于我使用的是 ember-cli，因此我将上述内容保存在 components/my-table-component.js 下。

完成此操作后，我将在模板中包含该表，如下所示：

```
{{my-table-component
  columnsBinding="columns"
  contentBinding="content"
  resizeTrigger=resizeTriggerProperty
}} 
```

现在，每次我想确保表重新呈现时，我只需将控制器的 resizeTriggerProperty 更新为任何（新）值。就我而言，我会在操作过程中设置它（例如 MyRouteController）：

```
actions: {
  triggerResize: function() {
    this.set('resizeTriggerProperty', new Date().getTime());
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-13T10:04:58.960

这可能有点晚了，但我使用的是 Ember Table 0.4.1（最新），我发现 ember 表会在窗口调整大小时重绘，所以我用它来使选项卡在选项卡更改时显示表格：

```
$(window).resize(); 
```

这就是诀窍，每当我更改选项卡时，ember table 都会重新绘制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-29T17:07:20.583

您可以在打开选项卡时调整表格大小。

```
this.get('tableController').set('_width',820); 
```

# assembly - 通过找出最大和较小的值来将两个数字相乘

> ID：15091404
> 
> 赞同：0
> 
> 时间：2013-02-26T14:20:01.233
> 
> 标签：assembly, little-man-computer

我正在使用一个名为可见虚拟机的小人计算机模拟器程序来学习汇编语言格式的编码基础知识。目前，我正在尝试将任意两个数字（`x`& `y`）相乘，但以一种有效的方式，通过抓取最大的数字并将较小的数字等于多少次添加到其中。我怎样才能交换数字，以便它取最大的数字并加上较小的数字等于多少倍？

例如

输入可以是：

`5 * 12`或者`12 * 5`

高效计算：

`12 + 12 + 12 + 12 +12 = 60`

效率不高：

`5 + 5 + 5 + 5 + 5 + 5 + 5 + 5 + 5 + 5 + 5 + 5 = 60`

代码：

```
IN 
STO 99
IN 
STO 98 
STO 96
LDA 99
SUB 97
STO 99
LDA 96
ADD 98
BRP 07
LDA 96
OUT 96
*95
DAT 001
HLT 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T15:10:55.203

查看[命令列表](http://en.wikipedia.org/wiki/Little_man_computer#Commands)，您似乎可以通过从第二个输入中减去第一个输入然后使用条件分支来查看哪个更大。像这样的东西：

```
 INP       // Get input into accumulator
     BRZ QUIT  // If zero, we're finished
     STA A     // Accumulator to A
     INP       // Get input into accumulator
     BRZ QUIT  // If zero, we're finished
     STA B     // Accumulator to B
     SUB A     // Subtract A from accumulator (B)
     BRP LOOP  // Jump to LOOP if B > A already, otherwise swap
     LDA A     // Put A into accumulator
     STA TEMP  // Accumulator to TEMP
     LDA B     // Put B into accumulator
     STA A     // Overwrite A with B
     LDA TEMP  // Put TEMP (A) into accumulator
     STA B     // Overwrite B with A: now B > A
LOOP LDA AB    // Put result into accumulator (starts off as zero)
     ADD B     // Add larger input to accumulator
     STA AB    // Update result
     LDA A     // Put loop counter (A) into accumulator
     SUB ONE   // Decrement
     STA A     // Update loop counter
     BRZ DONE  // Jump to DONE if loop counter is zero
     BRP LOOP  // Jump to LOOP if loop counter is positive
DONE LDA AB    // Put result into accumulator
QUIT OUT       // Output
     HLT       // Finish
ONE  DAT 1     // ONE = 1
A    DAT       // First input
B    DAT       // Second input
AB   DAT       // A * B
TEMP DAT       // Temporary (needed for swap) 
```

请注意，这是完全未经测试的，因此它很可能包含错误！但是，我已经评论了来源，所以你可以看到这个想法。

* * *

**编辑**结果证明没有错误——在黑暗中刺伤还不错；）无论如何，以下是在评论中提到[的基于 Java 的模拟器上运行的稍作修改的语法：](http://www.java-gaming.org/index.php?topic=24821.0)

```
 INP       // Get input into accumulator
      BRZ :QUIT // If zero, we're finished
      STA :A    // Accumulator to A
      INP       // Get input into accumulator
      BRZ :QUIT // If zero, we're finished
      STA :B    // Accumulator to B
      SUB :A    // Subtract A from accumulator (B)
      BRP :LOOP // Jump to LOOP if B > A already, otherwise swap
      LDA :A    // Put A into accumulator
      STA :TEMP // Accumulator to TEMP
      LDA :B    // Put B into accumulator
      STA :A    // Overwrite A with B
      LDA :TEMP // Put TEMP (A) into accumulator
      STA :B    // Overwrite B with A: now B > A
LOOP: LDA :AB   // Put result into accumulator (starts off as zero)
      ADD :B    // Add larger input to accumulator
      STA :AB   // Update result
      LDA :A    // Put loop counter (A) into accumulator
      SUB :ONE  // Decrement
      STA :A    // Update loop counter
      BRZ :DONE // Jump to DONE if loop counter is zero
      BRP :LOOP // Jump to LOOP if loop counter is positive
DONE: LDA :AB   // Put result into accumulator
QUIT: OUT       // Output
      HLT       // Finish
ONE:  1         // ONE = 1
A:    0         // First input
B:    0         // Second input
AB:   0         // A * B
TEMP: 0         // Temporary (needed for swap) 
```

# symfony - 如何在 netbeans 中从 Symfony 2 DI 自动完成方法

> ID：15091409
> 
> 赞同：6
> 
> 时间：2013-02-26T14:20:11.050
> 
> 标签：symfony, netbeans, dependency-injection

我开始使用 symfony 2 进行开发，它使用了很多依赖注入。我想知道是否有任何方法可以让 netbeans 根据字符串检测对象的类型并使用他们的方法自动完成？

例如，`$this->container->get('doctrine')`返回一个`Doctrine\Bundle\DoctrineBundle\Registry`实例。在容器中，键`doctrine`对应于`Doctrine\Bundle\DoctrineBundle\Registry`。

类似的东西，也可能对 zendframework 2 有用。

我不想在控制器中创建新方法，也不想使用 /* @var $var Symfony...*/，我会自动检测。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T17:57:52.963

据我所知，IDE 无法检测容器返回的对象的类型。我的解决方案是将这些对容器的调用包装到私有 getter 函数中。恕我直言，这也提高了代码的可读性——特别是如果你在每个类中多次调用。

```
/**
 * @return \Doctrine\Bundle\DoctrineBundle\Registry
 */
private function getDoctrine()
{
    return $this->container->get('doctrine');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-27T20:54:26.853

php风暴：

```
$foobar= $this->get('foobar'); //returns mixed
/* @var \MyNamespace\FooBar $foobar*/ 
```

或者

```
$foobar= $this->get('foobar'); //returns mixed
/* @var FooBar $foobar*/ 
```

您可以使用 Eclipse PDT 执行此操作：

```
$foobar= $this->get('foobar'); //returns mixed
/* @var $foobar \MyNamespace\FooBar*/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T11:51:42.033

IDE“PhpStorm”允许建议“使用”声明。这个 IDE 为 Symfony2 和 Drupal 提出了特定的功能！

JetBrains 编辑：http: [//www.jetbrains.com/phpstorm/](http://www.jetbrains.com/phpstorm/)

不是免费的，但功能足够强大，可以减少开发时间（时间就是金钱……）

享受 ： ）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-21T03:21:24.787

# （四处走走）谈到 Symfony 服务时：

代替

```
$doctrine = $this->container->get('doctrine'); 
```

利用

```
$doctrine = $this->getDoctrine(); 
```

如您所见，Symfony 允许您直接从 `$this`变量访问它的大部分服务。NetBeans 将知道使用什么自动完成。

让我们看看为什么会这样**（在 Controller 类中）**

[![在此处输入图像描述](../Images/a9c391d04d9276546b9b891c198ed3a9.png)](https://i.stack.imgur.com/cHsll.png)

可能是因为 Controller 类使用 USE 语句导入 Registry 类，

```
use Doctrine\Bundle\DoctrineBundle\Registry; 
```

然后在方法注释注释中声明返回的对象类型

```
/*
* @return Registry
*/ 
```

如果你调用 $this->container->get('doctrine'); 直接然后自动完成将被省略，您将不得不使用下面的内容。

# （答案）到目前为止，还没有神奇的自动完成功能。使用 Php Storm（它可以满足您的要求）。对于那些选择坚持使用 NetBeans 的人，您需要使用手动注释，如下例所示：

我们可以将 NetBeans 指向一个应该用于自动完成的类。

1）在项目目录的终端中搜索您要导入的服务：

**php bin/控制台调试：容器**

如果您知道要查找的内容，请改用：

**php bin/console d:container | grep 学说**

> ...
> 
> 学说------------------------------------------------ -------- Doctrine\Bundle\DoctrineBundle\Registry
> 
> ...

2) 如果这不是服务，请使用**get_class()** PHP 内置函数来获取对象的类名，它是特定变量。或者使用反射类。由你决定。

3) 一旦你知道了类名，为了更好的可读性声明 USE 语句

```
use Doctrine\Bundle\DoctrineBundle\Registry; 
```

4) 现在我们知道了特定变量中对象实例的类名是什么，我们准备通过使用注释注释通知 NetBeans 我们知道的内容，以便它可以启用自动完成。

```
 /**
     * @var $doctrine Registry 
     */
    $doctrine = $this->container->get('doctrine'); 
```

现在启用了自动完成。类型

```
 $doctrine->| 
```

然后按**Ctrl+Space**。见下图：

[![在此处输入图像描述](../Images/75dc0b3f065968642f72ccc151593f0f.png)](https://i.stack.imgur.com/DG8Ug.png)

# python - Python 代码中的 'r_[]' 和 "basename = 'arc'" 行是什么

> ID：15091412
> 
> 赞同：0
> 
> 时间：2013-02-26T14:20:12.423
> 
> 标签：python, numpy

[这里](http://www.scipy.org/Cookbook/Least_Squares_Circle)有一个 Python 代码示例。我找不到以下几行的任何解释：

```
x = r_[36, 36, 19, 18, 33, 26]
y = r_[14, 10, 28, 31, 18, 26]
basename = 'arc' 
```

请告诉我它是如何工作的。或参考任何信息页面。谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T14:23:25.130

`r_`是 numpy 魔法：[http ://docs.scipy.org/doc/numpy/reference/generated/numpy.r_.html](http://docs.scipy.org/doc/numpy/reference/generated/numpy.r_.html)

`basename`稍后用于生成文件名：

```
...
# basename is actually set to "circle" ("arc" is commented out) in that example.
# this saves the figure to "circle_residu2.png" or "circle_residu1.png"
p.savefig('%s_residu%d.png' % (basename, 2 if residu2 else 1)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T14:30:22.617

根据[Matlab 用户页面的 NumPy](http://www.scipy.org/NumPy_for_Matlab_Users#rangeliteralNotes) `r_`是一个创建对象，以允许使用像 Matlab 这样的符号创建数字范围。IE

> 在 MATLAB® 中，0:5 可用作范围文字和“切片”索引（括号内）；然而，在 Python 中，像 0:5 这样的结构只能用作切片索引（在方括号内）。

查看[文档](http://docs.scipy.org/doc/numpy/reference/generated/numpy.r_.html)以获取有关如何`r_`工作的更多信息。

# dojo - dojo.date.locale on dojo.mobile 1.8.1 on Worklight 5.0.5.1

> ID：15091414
> 
> 赞同：0
> 
> 时间：2013-02-26T14:20:14.200
> 
> 标签：dojo, ibm-mobilefirst

require(["dojo/date/locale" xxxxxxx) 导致 scriptError:26。locale.js 存在于 dojo/date 文件夹下，但无法加载。在 dojo.mobile 1.8.1-20121024-IBM on Worklight 5.0.5.1 上使用 dojo.date.locale 是否有任何限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T09:30:16.573

我对 dojox/lang/functional 也有同样的问题。尽管您可以在 dojo 文件夹中找到所有 dojo 组件，但默认情况下似乎并非所有组件都复制到了移动设备中。我添加了一行

```
<include name="dojox/lang/functional.js"/> 
```

到我的应用程序根文件夹中的 build-dojo.xml 并解决了问题。我认为这也适用于 dojo/date/locale。

# c# - lambda 表达式含义/修改

> ID：15091415
> 
> 赞同：4
> 
> 时间：2013-02-26T14:20:16.247
> 
> 标签：c#, .net, lambda

我在使用 lambda 表达式时遇到问题，该表达式用于自定义过滤来自`DataGridView`.

这是表达式：

```
private static Expression<Func<T, bool>> ExpressionLongEquals<T>(string Key, long Value)
{
    var param = Expression.Parameter(typeof(T));
    // create expression for param => param.TEntityNameId == PrimaryKey
    var lambda = Expression.Lambda<Func<T, bool>>(
        Expression.Equal(
            Expression.Property(param, Key),
            Expression.Constant(Value)),
        param);
    return lambda;
} 
```

问题是我有一个案例，当`Value`参数的类型`long?`似乎是可以接受的但在完成此代码后我得到一个错误`Method equal is not defined for Nullable1.System.Int64 and System.Int64`。我很难理解这种方法，不太确定它对于上下文之外的其他人是否可以理解，但是我要发布我的问题 - 首先，这到底是什么，我的意思是 - 我需要学习/阅读的内容为了能够使用我发布的第二个这样的代码。我很确定这种方法适用于`long`值并且只有在`long?`作为参数传递时才会出现问题，所以有没有办法修改它来解决这个问题？

价值观的需要`long?`是最近才出现的，这就是导致问题的原因，我通常这样做：

```
else if (property.PropertyType == typeof(long?))
{
    long value = Convert.ToInt64(rule.Data);
    selector = ExpressionLongEquals<T>(rule.Field, value);
} 
```

但我仍然得到关于`equal not defined for Nullable1.System.Int64 and System.Int64`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T14:27:42.647

使用这个...如果我是正确的，您必须将您的值转换为 long 类型？

```
private static Expression<Func<T, bool>> ExpressionLongEquals<T>(string Key, long Value)
{
    var param = Expression.Parameter(typeof(T));
    // create expression for param => param.TEntityNameId == PrimaryKey
    var lambda = Expression.Lambda<Func<T, bool>>(
        Expression.Equal(
            Expression.Property(param, Key),
            Expression.Constant(Value, typeof(long?)),
        param);
    return lambda;
} 
```

# .net - 使用包含 Params 的 WCF 服务函数

> ID：15091416
> 
> 赞同：0
> 
> 时间：2013-02-26T14:20:17.620
> 
> 标签：.net, linux, wcf, web-services

我创建了一个 WCF 服务，它只包含一个采用以下参数的函数

```
int GetCount(string strServerPath, string strPort, params string[] arr_strItems) 
```

我将它作为应用程序发布并添加到服务器 IIS 中，并且我能够在 ASP.NET 应用程序中从我的机器上使用它。

现在我需要从基于 Linux 的机器上使用它，但是当我这样做时出现以下错误

> WebFault：服务器引发错误：'格式化程序在尝试反序列化消息时抛出异常：尝试反序列化参数[http://tempuri.org/:strItem](http://tempuri.org/:strItem)时出错。InnerException 消息是“第 1 行位置 414 中的错误。期待状态“元素”。遇到名称为“”、命名空间“”的“文本”。'。

其中 strItem 是函数中使用的变量，如下所示

```
foreach (string strItem in arr_strItems)
                {
                    SyndicationFeed feed = SyndicationFeed.Load(
                        XmlReader.Create(

                        strServerPath +
                        ":" +
                        strPort +

                        strItem 
```

*   问题是什么？
*   它与参数类型有关吗？还是 foreach 代码？
*   我该如何解决？

# qt - Qt - 在布局中居中“MinimumExpanding”小部件

> ID：15091420
> 
> 赞同：1
> 
> 时间：2013-02-26T14:20:42.907
> 
> 标签：qt, user-interface

我有一个`QHBoxLayout`，其中包含 2 `QWidgets`。这两个`QWidgets`都具有固定的纵横比（正方形），并且通过执行以下操作具有最小扩展`QSizePolicy`：

```
QSizePolicy policy(QSizePolicy::MinimumExpanding, QSizePolicy::MinimumExpanding);
policy.setHeightForWidth(true);
setSizePolicy(policy); 
```

并`heightForWidth`像这样实现：

```
virtual int heightForWidth (int w) const override {
    return w;
} 
```

现在，我希望这些小部件在我的布局中居中。因此，我将它们添加到这样的布局中：

```
layout->addWidget(widget1, 0, Qt::AlignCenter); 
```

但是，像这样，它们最终会以自己喜欢的大小结束，但不会占用所有可用空间。这是为什么？似乎 Qt::AlignCenter 覆盖了我的 SizePolicy？！

相反，使用`Qt::AlignVCenter`实际上会使它们占据所有可用空间。这怎么搭配？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:39:00.860

请注意`Qt::AlignCenter = Qt::AlignVCenter + Qt::AlignHCenter`.
请注意，如果您设置任何类型的对齐方式，那么您就是说您想要首选大小（sizeHint 返回的内容）但对象应该以正确的方式定位。当你想填满整个空间时，对齐就没有意义了。
所以我怀疑你描述的行为就是这样设计的。

题外话：请注意，QGraphicsWidgets 有 3 个 sizeHints：最小、首选和最大，所以在这种情况下，当一些对齐扩展尺寸策略仍然适用时，因为有最大尺寸的小部件可以占据。

# asp.net - ASP.NET MVC 检查下载文件是否为空

> ID：15091426
> 
> 赞同：1
> 
> 时间：2013-02-26T14:20:53.957
> 
> 标签：asp.net, asp.net-mvc, download

我需要下载一个文件。如果文件是提前为用户生成的，我应该为他显示一些消息。我可以检查文件`null`吗？

```
@Html.ActionLink("Print", "Certificate", new{type=Model.Type, product = i.Id}) 
```

我的行动：

```
 [HttpPost]
    public FileResult Certificate(string type, int product)
    {
        var crt = DBQueryExecutor.GetCertificate(type, product, long.Parse(User.Identity.Name), null);
        if(crt == null) return null;
        byte[] rep = Pdf.CreateCertificate(crt);
        return File(rep, System.Net.Mime.MediaTypeNames.Application.Pdf);
    } 
```

你有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:31:00.170

您可以返回另一个显示文件尚未准备好的视图，并在第二个视图上再次提供链接。

```
[HttpPost]
public ActionResult Certificate(string type, int product)
{
    var crt = DBQueryExecutor.GetCertificate(type, product, long.Parse(User.Identity.Name), null);
    if(crt == null) return View("NullFile");
    byte[] rep = Pdf.CreateCertificate(crt);
    return File(rep, System.Net.Mime.MediaTypeNames.Application.Pdf);
} 
```

# ios - 解析问题：类型名称需要说明符或限定符

> ID：15091430
> 
> 赞同：1
> 
> 时间：2013-02-26T14:21:10.817
> 
> 标签：ios, objective-c, compiler-errors, parse-error

我不断收到以下代码的以下错误。谁能告诉我如何解决这个错误。

在 .h 文件中

```
#ifdef __cplusplus
namespace tesseract {
    class TessBaseAPI;
};
#endif 
```

在`@interface`abc里面

```
 tesseract::TessBaseAPI *tesseract;
uint32_t *pixels; 
```

错误线`tesseract::TessBaseAPI *tesseract;`

# 错误 ：

1.  预期表达
2.  类型名称需要说明符或限定符。

我已将基本 SDK 设置为 5.0，我的`Xcode`版本是 4.5。我也更改`.m`了`.mm`文件扩展名。

```
CompileC /Users/XXXX/Library/Developer/Xcode/DerivedData/XXXCard-bfzxfmheqnrlwnfvttodjyxemqxo/Build/Intermediates/XXXX.build/Debug-iphoneos/mBizCard.build/Objects-normal/armv7/ViewController.o mBizCard/ViewController.m normal armv7 objective-c com.apple.compilers.llvm.clang.1_0.compiler
    cd /Users/XXXXXXXX/trunk
    setenv LANG en_US.US-ASCII
    setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -x objective-c -arch armv7 -fmessage-length=0 -std=gnu99 -fobjc-arc -Wno-trigraphs -fpascal-strings -O0 -Wno-missing-field-initializers -Wno-missing-prototypes -Wreturn-type -Wno-implicit-atomic-properties -Wno-receiver-is-weak -Wduplicate-method-match -Wformat -Wno-missing-braces -Wparentheses -Wswitch -Wno-unused-function -Wno-unused-label -Wno-unused-parameter -Wunused-variable -Wunused-value -Wempty-body -Wuninitialized -Wno-unknown-pragmas -Wno-shadow -Wno-four-char-constants -Wno-conversion -Wno-shorten-64-to-32 -Wpointer-sign -Wno-newline-eof -Wno-selector -Wno-strict-selector-match -Wno-undeclared-selector -Wno-deprecated-implementations -DDEBUG=1 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk -Wprotocol -Wdeprecated-declarations -g -Wno-sign-conversion "-DIBOutlet=__attribute__((iboutlet))" "-DIBOutletCollection(ClassName)=__attribute__((iboutletcollection(ClassName)))" "-DIBAction=void)__attribute__((ibaction)" -miphoneos-version-min=5.1 -iquote 
```

在 ViewController.h:24:5 包含的文件中：`error: type name requires a specifier or qualifier tesseract::TessBaseAPI *tesseract;` ^

ViewController.h:24:15: `error: expected expression tesseract::TessBaseAPI *tesseract;` ^

ViewController.h:24:5: `warning: type specifier missing, defaults to 'int' [-Wimplicit-int] tesseract::TessBaseAPI *tesseract;` ^~~~~~~~~

`1 warning and 2 errors generated.`

# java - CPU负载中的Java多线程

> ID：15091434
> 
> 赞同：9
> 
> 时间：2013-02-26T14:21:22.603
> 
> 标签：java, multithreading, thread-priority

我对运行多个 Java 线程的应用程序有一点问题。该应用程序运行许多工作线程，这些线程不断地查看输入队列，如果队列中有消息，它们会将它们拉出并处理它们。

在这些工作线程中，有另一个验证线程计划在固定周期执行检查以查看主机（运行应用程序的主机）是否仍处于“良好状态”以运行应用程序。该线程更新一个`AtomicBoolean`值，该值在工作线程开始查看主机是否正常之前由工作线程验证。

我的问题是，在 CPU 负载较高的情况下，负责验证的线程将花费更长的时间，因为它必须与所有其他线程竞争。如果在`AtomicBoolean`一段时间后没有更新，它会自动设置为 false，给我造成一个令人讨厌的瓶颈。

我最初的方法是提高验证线程的优先级，但深入研究后我发现这不是保证行为，算法不应该依赖线程优先级才能正常工作。

有人有任何替代想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T07:29:54.910

与其查看常规队列数据结构，不如使用 java.util.concurrent 包的 LinkedBlockingQueue。

您可以做的是，运行一个线程池（您可以使用执行器服务的固定线程池，即您选择的多个工人）并执行 LinkedBlockingQueue.take()。

如果消息到达队列，则将其馈送到等待线程之一（是的，take 确实会阻塞线程，直到有东西要馈送为止）。

[链接阻塞队列的 take 方法的 Java API 参考](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/LinkedBlockingQueue.html#take%28%29 "Java API 参考")

HTH。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T14:37:34.130

更多线程并不意味着更好的性能。通常如果你有双核，2 线程提供最好的性能，3 或更多开始变得更糟。四核应该最好处理 4 个线程，等等。所以要小心你使用了多少线程。

您可以在其他线程执行完工作后让它们进入睡眠状态，并允许其他线程完成它们的工作。我相信 Thread.yield() 会暂停当前线程以给其他线程时间。

如果您希望您的线程连续运行，我建议创建两个主线程，线程 A 和 B。使用 A 作为验证线程，并从 B 创建其他线程。因此线程 A 获得更多的执行时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T14:40:57.813

一种限制工作速率的老派方法，根本不使用运行状况检查线程（因此绕过这些问题），如果队列长于 100，则阻止或拒绝添加到队列的请求。这对产生负载的客户端施加动态背压，当工作线程过载时减慢它们的速度。

此方法已添加到 Java 1.5 库中，请参阅 java.util.concurrent.ArrayBlockingQueue。如果队列已满，它的 put(o) 方法会阻塞。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T14:41:30.277

你在使用 Executor 框架（来自 Java 的并发包）吗？如果不试一试。您可以尝试使用 ScheduledExecutorService 作为验证线程。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T15:19:46.060

似乎您需要利用条件变量。窥视将占用 CPU 周期。

[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/Condition.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/Condition.html)

# objective-c - 我如何解决“语义问题”

> ID：15091436
> 
> 赞同：1
> 
> 时间：2013-02-26T14:21:32.637
> 
> 标签：objective-c, xcode, opencv

我在[这里下载了一个模板](https://github.com/foundry/OpenCVSquares)

我有 XCode 4.6 当我运行它时，我得到以下信息：

```
 + (UIImage *)imageWithCVMat:(const cv::Mat&)cvMat orientation:(UIImageOrientation)orientation
{
    return [[UIImage alloc] initWithCVMat:cvMat orientation:orientation];
}

+ (UIImage *)imageWithCVMat:(const cv::Mat&)cvMat
{
    return [[UIImage alloc] initWithCVMat:cvMat orientation:0];
} 
```

我得到了错误

```
Cannot initialize a parameter of type 'UIImageOrientation' with an value of type 'int' 
```

我该如何解决？也许有人知道

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:27:04.023

错误是关于`0`在第二种方便方法中使用该值

当没有给出时选择默认方向

```
+ (UIImage *)imageWithCVMat:(const cv::Mat&)cvMat {
     return [[UIImage alloc] initWithCVMat:cvMat orientation:UIImageOrientationUp]; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T14:24:18.257

这种方法

```
+ (UIImage *)imageWithCVMat:(const cv::Mat&)cvMat
{
return [[UIImage alloc] initWithCVMat:cvMat orientation:0];
} 
```

你不能有`orientation:0`，因为它需要一个类型的对象`UIImageOrientation`。也许尝试制作它`nil`（不确定是否允许）或给它一个新的默认 UIImageOrientation

# ajax - rails中的ajax分页

> ID：15091441
> 
> 赞同：0
> 
> 时间：2013-02-26T14:21:43.173
> 
> 标签：ajax, ruby-on-rails-3

下面你会看到我的jquery：

```
$(function() {
$(".pagination span.page a").click(function (){
    $.get(this.href, null, alert("The pagination link was clicked" + this.href), "script");
    return false;
});

}); 
```

我知道我的班级电话正在工作，因为警报弹出。我认为这是我称之为“脚本”的地方，它失败了，因为它没有拉起页面。这是一个调用 index.js.erb 脚本的 Rails 3 应用程序。这是 index.js.erb：

```
$("#search").html("<%= escape_javascript(render("search")) %>"); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:31:14.673

您是否要渲染部分内容？

```
$("#search").html("<%= escape_javascript(render :partial => "search") %>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T18:07:13.843

在查看 rails 如何调用 ajax 时，我遇到了一个帖子。它说要执行以下操作：

```
def index
  format.js
end 
```

一旦我打电话给它，它就开始工作了。

# c++ - C++ 名称修饰在一个 so

> ID：15091444
> 
> 赞同：3
> 
> 时间：2013-02-26T14:21:52.300
> 
> 标签：c++, dynamic-linking, shared-libraries, name-mangling

这是我所做的：

我更改了一个 .h 文件

```
SomeObj* getCacheObj( int i = 0 ); 
```

到

```
SomeObj* getCacheObj( int i );
SomeObj* getCacheObj(); 
```

我重新编译了代码（没有问题），更改到 somelib.so（**许多**so 文件之一）。然后我用这个替换了设备上的旧so，加载so时出现以下错误： `undefined symbol: _ZN13KeypathHelper11getCacheObjEv`

现在奇怪的是，有人告诉我这个类只在这个so文件中使用（我怎样才能确定？）。我没有那么有经验，也不知道如何调查。欢迎任何建议。

**更新**

这个特殊问题是因为另一个so文件正在使用KeypathHelper类而我只替换了包含它的那个。我发现哪些其他需要更新的方法是对 KeypathHelper 进行 grep。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T14:30:54.587

该`_ZN13KeypathHelper11getCacheObjEv`符号是一个错误的名称`KeypathHelper::getCacheObj()`（例如，您可以使用 轻松翻译[`c++filt`](http://sourceware.org/binutils/docs-2.16/binutils/c_002b_002bfilt.html)）。鉴于您只添加了一个方法并且加载共享对象的任何内容都找不到它让我认为您没有更新共享对象或忘记提供定义`KeypathHelper::getCacheObj()`（换句话说 - 实现该方法）。

为了进行调查，您必须查看无法解析符号的原因。通常，开发人员对此有所了解。说，如果二进制文件由于未解析的符号而`XXX`无法加载库，那么正在使用它并且它似乎不在（或其他任何地方）。如果没有任何意义，可以求助于阅读[ld.so (8) 手册页](http://unixhelp.ed.ac.uk/CGI/man-cgi?ld.so%208)并使用可用的方法（如定义）来调试动态链接器。`YYY``XXX``YYY``LD_DEBUG`

此外，@PlasmaHH 提出了一个非常好的问题。如果您所做的唯一更改是对头文件的更改，那么您必须知道具有参数默认值的单个函数/方法与两个函数/方法（一个有参数而一个没有参数）不同。

至于您关于如何确保共享对象中的符号不​​在外部使用的第二个问题 - 您必须更改符号可见性，以便外部的任何人都无法链接/解析/使用该符号。例如，请参阅[GCC 可见性](http://gcc.gnu.org/wiki/Visibility)。

希望能帮助到你。祝你好运！

# matlab - Cholesky 分解

> ID：15091445
> 
> 赞同：6
> 
> 时间：2013-02-26T14:21:53.183
> 
> 标签：matlab, matrix, factorization

在我的 matlab 代码中，我必须处理某个给定矩阵的 Cholesky 分解。我通常要求`chol(A,'lower')`生成下三角因子。

现在，用 来检查我的代码`profiler`，很明显这个函数`chol`真的很耗时，尤其是当输入矩阵的大小变大的时候。

因此，我想知道，是否有任何有价值的替代内置`chol`功能。

我一直在考虑`LAPACK`图书馆，也就是`spptrf`功能。它是否可用`MATLAB`？

任何提示或支持都非常受欢迎。

**编辑**

举个例子，分析器检索以下信息：

![在此处输入图像描述](../Images/022a38ffc4d147fac9ff095e5e7d773f.png)

哪里`Coh_u`有大小`(1395*1395)`。还需要注意的是，它`chol`被称为`4000`时间，因为我需要`4000`不同配置的 cholesky 因子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:30:22.833

我不确定您使用的是哪个版本的 matlab，但我发现[了这个讨论](http://www.mathworks.com/matlabcentral/newsreader/view_thread/146786)，这表明在旧版本中，Cholesky 分解非常慢，正如您所描述的那样。

那里的答案之一说使用[CHOLMOD 包或 SuiteSparse](http://www.mathworks.com/matlabcentral/linkexchange/links/1252-suitesparse-umfpack-cholmod-and-many-other-matlab-built-in-functions)，它的`chol2`功能应该更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-29T12:06:40.037

您能否确认正确的表达`Coh_u`方式如下

一种）`Coh_u = exp(-a.*sqrt((f(ii)/Uhub).^2 + (0.12/Lc).^2)).*(df.*psd(ii,1));`

或者

b)`Coh_u = exp(-a.*dist*sqrt((f(ii)/Uhub).^2 + (0.12/Lc).^2)).*(df.*psd(ii,1));`

a) 和 b) 的区别在于 b)`dist`中添加了两个矩阵之间的距离`Y`an`Z`使得

```
dist = pdist2([Y(:) Z(:)],[Y(:) Z(:)]); 
```

但它会导致函数出现“矩阵非正定”错误`chol()`。

# javascript - 向从 JSON 响应构造的对象添加函数

> ID：15091447
> 
> 赞同：1
> 
> 时间：2013-02-26T14:21:53.350
> 
> 标签：javascript, json, performance, oop

我有一组刚从 JSON 服务器响应中获得的用户。假设如下：

```
var users = [
    {id: 1, name: 'john', surname: 'smith'},
    {id: 2, name: 'john', surname: 'smith'},
    {id: 3, name: 'john', surname: 'smith'},
    {id: 4, name: 'john', surname: 'smith'},
    {id: 5, name: 'john', surname: 'smith'},
    {id: 6, name: 'john', surname: 'smith'},
    {id: 7, name: 'john', surname: 'smith'}
]; 
```

在应用程序的业务逻辑和（车把）模板的某些点上，我需要每个用户的全名，但当然我不想重复`name + ' ' + surname`所有地方的串联逻辑。

因此，我执行以下“增强”这些用户并添加我想要的功能：

```
for(var i=0,length=users.length; i<length; i++) {
    users[i].getFullName = function() {
        return this.name + ' ' + this.surname;
    }
} 
```

这种技术效果很好，但我的问题是：

*   有更好的方法吗？请注意，我想要一个面向对象风格的解决方案，而不是像`getFullNameOfUser(user)`.
*   我可以测量将函数添加到所有这些对象的时间损失，但我可以测量将函数添加到对象的内存损失吗？[JavaScript 对象大小](https://stackoverflow.com/q/1248302/72478)等解决方案不计入函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T14:31:31.137

您可以创建一个类 Users，并将 getFullNameOfUser 添加到原型中。

```
var User = function(obj){
   this.id = obj.id;
   this.name = obj.name;
   this.surname = obj.surname;
};

User.prototype.getFullNameOfUser = function(){
   return this.name + ' ' + this.surname;
};

for(var i=0,length=users.length; i<length; i++) {
    users[i] = new User(users[i]);
} 
```

关于您在评论中的问题，您可以这样做：

```
var User = function(obj){
       for(var key in obj){
          this[key]  = obj[key];
       }
    }; 
```

但是这样你最终可能会在对象中得到不需要的属性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T18:05:47.723

您总是可以创建一堆实用函数，并根据需要使用特定的上下文调用它们。

```
function getFullName () {
   return this.name + ' ' + this.surname;
};

getFullName.call(users[0]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T14:33:54.720

这似乎效率低下，因为您正在向每个用户添加一个功能。

使用 handlebars.js 你应该能够简单地处理视图中的连接，即：

```
<h2>Welcome {{user.name}} {{user.surname}}!</h2> 
```

# c# - Wcf c#服务中的Json Stream到数组

> ID：15091449
> 
> 赞同：0
> 
> 时间：2013-02-26T14:21:58.387
> 
> 标签：c#, json, wcf, deserialization

我对 C# 真的很不好，希望你能帮助我做以下事情；我目前正在将一个 Json 数组传递给我的 WCF 网络服务。我需要获取 json 数组并将其插入到列表中。我不知道在 C# 中反序列化。请向我建议实现这一目标的最佳方法是什么。我的代码如下所示：

```
 public String UpdateOrderAddress(Stream userInfo)
  {
        try
        {               
           StreamReader reader = new StreamReader(userInfo);
           string JSONdata = reader.ReadToEnd();
           if (JSONdata == null)
           {                    
                return "null";
           }                        

           return JSONdata;     // Success !
        }
        catch (Exception e)
        {
            return e.ToString();
        }
  } 
```

这是我从读者那里得到的字符串中的数据

```
[{"date":"2013-02-22 15:30:374:021","id":"1","description":"test","name":"test"},
"date":"2013-02-25 11:56:926:020","id":"2","description":"ghy","name":"fhh"},
"date":"2013-02-25 11:56:248:026","id":"3","description":"ghfm","name":"run"}] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T15:30:29.447

您发布的代码没有显示您如何尝试反序列化您的 json 字符串，所以我并没有真正理解这里的相关性，但无论如何，这就是如何将 JSON 反序列化为具体的 C# 类。

1.  创建一个与 Javascript 对象结构匹配的类，如下所示：

    ```
    public class Data
    {
      public string  Date {get;set;}
      public int ID {get;set;}
      public string Description {get;set;}
      public string Name {get;set;}
    } 
    ```

2.  使用[JavascriptSerializer](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)反序列化它，如下所示：

    ```
    var deserializedData = new JavaScriptSerializer().Deserialize<List<Data>>(jsonString); 
    ```

请注意，您的原始 JSON 字符串格式不正确。它缺少`{`数组每个元素的开口。真的应该是：

> [{"date":"2013-02-22 15:30:374:021","id":"1","description":"test","name":"test"}, {"date" :"2013-02-25 11:56:926:020","id":"2","description":"ghy","name":"fhh"}, {"date":"2013-02 -25 11:56:248:026","id":"3","description":"ghfm","name":"run"}]

现在，如果您尝试反序列化上述内容，如下所示：

```
string json = @"[{""date"":""2013-02-22 15:30:374:021"",""id"":""1"",""description"":""test"",""name"":""test""},
   {""date"":""2013-02-25 11:56:926:020"",""id"":""2"",""description"":""ghy"",""name"":""fhh""},
   {""date"":""2013-02-25 11:56:248:026"",""id"":""3"",""description"":""ghfm"",""name"":""run""}]";

var deserializedData = new JavaScriptSerializer().Deserialize<List<Data>>(json); 
```

你会得到一个很好的`List<Data>`回报。

另请注意，我没有为`date`您的 Javascript 对象中的相应字段使用 DateTime 字段，原因是您的示例日期不是有效的 DateTimes，或者至少`DateTime`无法从该字符串表示中创建一个对象。例如，“15:30:374:021”没有意义 - 我想 374 是秒字段......

您需要添加对 System.Web.Extensions 的引用才能使用 JavascriptSerializer。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T14:52:46.647

您可以使用所需的属性创建一个代表类来保存值并使用[`JavascriptSerializer`](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)该类。调用[`Deserialize<T>`](http://msdn.microsoft.com/en-us/library/bb355316.aspx)指定您的类型的方法将 JSON 反序列化到您的代码中。

类名中的链接以供参考。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T14:56:26.017

您可以使用*Newtonsoft.Json*库。您需要做的就是：

```
List<YourClass> yourClassList = JsonConvert.DeserializeObject<List<YourClass>>(JSONdata); 
```

[您可以在此处](http://james.newtonking.com/projects/json/help/index.aspx)找到更多信息，甚至是样品

# sql-server-2008 - SQL 透视命令输出

> ID：15091450
> 
> 赞同：-4
> 
> 时间：2013-02-26T14:21:59.150
> 
> 标签：sql-server-2008, pivot

我有一个要求，在 Pivot 之后，我不想要聚合值，而是需要“Y”。对于 Null 值，它应该是“N”。我怎样才能做到这一点？请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T14:33:04.740

您绝对没有提供有关当前表结构或数据的详细信息，但您可以`Y/N`在`pivot`. 这是一个示例解决方案：

```
select employeename,
  isnull(hr, 'N') HR,
  isnull(IT, 'N') IT
from
(
  select e.name EmployeeName,
    d.name DeptName,
    'Y' flag
  from employee e
  left join dept_employee de
    on e.id = de.e_id
  left join dept d
    on de.d_id = d.id
) src
pivot
(
  max(flag)
  for deptname in (HR, IT)
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/5e11d/3)

# ruby-on-rails - 返回 false 则无法使用 :through 将项目添加到 has_many

> ID：15091452
> 
> 赞同：2
> 
> 时间：2013-02-26T14:22:01.550
> 
> 标签：ruby-on-rails, ruby, activerecord, database-relations

我有这个模型关系

```
class User < ActiveRecord::Base
  has_many :trip_memberships, dependent: :destroy
  has_many :trips, through: :trip_memberships, uniq: true
end

class Trip < ActiveRecord::Base
  has_many :trip_memberships, dependent: :destroy
  has_many :members, through: :trip_memberships, source: :user, uniq: true
end

class TripMembership < ActiveRecord::Base
  belongs_to :trip
  belongs_to :user
end 
```

当我将一些用户添加为旅行成员时，例如以下代码：

```
trip = Trip.last
john = User.last
trip.members # => []  Empty right now
trip.members << john
trip.members # => [john]  Contains John
trip.members << john
trip.members # => [john]  Contains only John, but...
TripMembership.all # => [TripMembership(trip, john), TripMembership(trip, john)]
                   # There is 2 memberships, even the accessor methods only show one
                   # member because of the :uniq option 
```

我不想在`trip_memberships`表格中有重复，但我想遵循“告诉，不要问”的原则。我不想检查给定记录是否存在。

我将此验证添加到 TripMembership 模型中

```
class TripMembership < ActiveRecord::Base
  belongs_to :trip
  belongs_to :user
  validates_presence_of :trip_id, :user_id
  validates_uniqueness_of :trip_id, scope: [:user_id]
  validates_uniqueness_of :user_id, scope: [:trip_id]
end 
```

当我尝试添加无法保存的记录时，我希望`<<`or方法返回 false ，就像在有很多关系中一样，但似乎关系不是那样工作的。`concat``through`

```
trip.members << john # => ActiveRecord::RecordInvalid: Validation failed: Trip has already been taken, User has already been taken 
```

任何人都知道一种优雅的归档方式吗？我认为应该这样使用api。

```
if @trip.members << new_member
   flash[:success] = "new member added"
else
   flash[:error] = "can't add this member to trip"
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T14:29:54.267

你可以这样尝试：

```
 if @trip.members.include?(new_member)
    flash[:error] = "Member already exists"
 else
    @trip.members << new_member
    flash[:success] = "new member added"
 end 
```

**编辑**

```
has_many :members, through: :trip_memberships, source: :user do
  def <<(member)
    if self.include?(member)
      false
    else
      super(Array(member)-self)
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T14:45:48.487

我刚刚有了一个想法。

由于我刚刚发现 Rails 的标准行为是在用户不是新记录时引发异常，并且我不能更改知名方法的默认行为，所以我将使用自定义扩展我的关联在开始/救援中调用的方法`add_member`只是别名调用。`<<`

```
has_many :members, through: :trip_memberships, source: :user, uniq: true do
  def add(*records)
    self.<< records
  rescue ActiveRecord::RecordInvalid
    false
  end
end 
```

我有自己的方法，可以按预期工作，而无需更改 rails 方法。

# winforms - c# TypeConverter 和 InstanceDescriptor 痛苦

> ID：15091463
> 
> 赞同：3
> 
> 时间：2013-02-26T14:22:38.590
> 
> 标签：winforms, serialization, user-controls

我做了一个 UserControl 的例子，但仍然（花了一整天）无法解决我的问题。

我希望 UserControl 有一个复杂的属性，在设计时查看属性网格内的属性，能够更改它等等。复杂属性很简单——它是一个具有一个字符串属性的类。

现在我有两个问题：

1) 当我在属性网格中更改文本的值时 - 值不会转到 Form1.Designer.cs

2）有时当我重建项目（甚至不需要运行）时，我有一个 VS 的弹出窗口，其中说 SettingsCoverter 无法将设置转换为 InstanceDescriptor。这些设置类是我的。请帮助解决这个问题。

```
 [TypeConverter(typeof(SettingsConverter))]
public class Settings : INotifyPropertyChanged
{
    private string stringText = "123";
    public string StringText
    {
        get { return stringText; }
        set
        {
            stringText = value;
            OnPropertyChanged("StringText");
        }
    }

    public Settings()
    {
    }

    public Settings(string fText)
    {
        StringText = fText;
    }

    protected void OnPropertyChanged(string name)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
            handler(this, new PropertyChangedEventArgs(name));
    }

    #region Implementation of INotifyPropertyChanged

    public event PropertyChangedEventHandler PropertyChanged;

    #endregion
} 
```

和

```
class SettingsConverter : ExpandableObjectConverter
{
    public override bool GetCreateInstanceSupported(ITypeDescriptorContext context)
    {
        return true;
    }

    public override object CreateInstance(ITypeDescriptorContext context, System.Collections.IDictionary propertyValues)
    {
        return new Settings((string)propertyValues["StringText"]);
    }

    public override bool CanConvertFrom(ITypeDescriptorContext context, Type sourceType)
    {
        if (sourceType == typeof(string))
            return true;
        return base.CanConvertFrom(context, sourceType);
    }

    public override bool CanConvertTo(ITypeDescriptorContext context, Type destinationType)
    {
        if (destinationType == typeof(string) || destinationType == typeof(InstanceDescriptor))
            return true;
        return base.CanConvertTo(context, destinationType);
    }

    public override object ConvertTo(ITypeDescriptorContext context, System.Globalization.CultureInfo culture, object value, Type destinationType)
    {
        if (value is Settings)
        {
            if (destinationType == typeof(InstanceDescriptor))
            {
                Settings settings = (Settings)value;
                object[] properties = new object[1];
                Type[] types = new Type[1];

                types[0] = typeof(string);
                properties[0] = settings.StringText;

                ConstructorInfo ci = typeof(Settings).GetConstructor(types);
                return new InstanceDescriptor(ci, properties);
            }

            if (destinationType == typeof(string))
            {
                Settings settings = (Settings)value;
                return settings.StringText;
            }
        }

        return base.ConvertTo(context, culture, value, destinationType);
    }

    public override object ConvertFrom(ITypeDescriptorContext context, System.Globalization.CultureInfo culture, object value)
    {
        if (value == null)
            return "";

        if (value is string)
            return new Settings(value as string);

        return base.ConvertFrom(context, culture, value);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-10T03:28:07.020

2）这是建议

[http://forums.asp.net/t/1309871.aspx?TypeConverter+Error+InstanceDescriptor+](http://forums.asp.net/t/1309871.aspx?TypeConverter+Error+InstanceDescriptor+)

类型转换器直接进入 CLR 的类型信息缓存，而不通过项目系统实现的类型解析服务。这意味着 CLR 将返回它之前在重建之前加载的程序集的类型 - 并且转换将失败，因为设计图面上的类型是从新构建的程序集加载的。我验证您可以通过确保类库项目的版本号在每次构建时自动递增来解决此问题。您可以通过以下方式做到这一点： 1) 调出类库项目的属性 2) 选择“Application”选项卡并单击“Assembly Information...”按钮。3）在版本中，该字段将最后一个条目设置为“*” - 所以它应该说：1 0 0 *

现在，每当构建类库时，修订号（版本的最后一位）将自动递增。这会强制 CLR 使其缓存的条目无效并加载新条目。

# charts - 如何使用点对象（由一个 x 和两个 y 值组成）创建列范围高图？

> ID：15091465
> 
> 赞同：1
> 
> 时间：2013-02-26T14:22:43.483
> 
> 标签：charts, highcharts, range

如何使用具有一个 x 和两个 y 值的点对象创建列范围高图？我需要一个点对象，因为这些点应该是可点击和可设置的。

有没有类似的东西

```
data: [
   {x:1, y1:-5.2, y2:10.4}
] 
```

或者

```
data: [
   {x:2, y: [-13.5, 9.8]}
] 
```

我已经尝试过这些和其他一些东西，但它们没有用。

有没有办法创造这样的东西？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:09:58.197

您应该使用低/高而不是 y1/y2

```
{
                x:Date.UTC(2012,12,2),
                low:-9.7, 
                high:9.4
}, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T16:13:02.513

```
data: [
    [Date.UTC(2010, 0, 1),-9.7, 9.4],
    [Date.UTC(2010, 0, 2),-8.7, 6.5],
    [Date.UTC(2010, 0, 3),-3.5, 9.4],
    [Date.UTC(2010, 0, 6),-1.4, 19.9],
    [Date.UTC(2010, 0, 7),0.0, 22.6],
    [Date.UTC(2010, 0, 8),2.9, 29.5],
] 
```

[演示](http://jsfiddle.net/ezS3b/1/)

# inheritance - F# 从 C# 类继承 + 访问受保护的字段

> ID：15091468
> 
> 赞同：4
> 
> 时间：2013-02-26T14:22:48.433
> 
> 标签：inheritance, f#, protected

我有这个基类，它创建一个新的 SQL Server 连接并在 C# 中执行一些实用程序方法，我想在 F# 中继承。目前我无法从 F# 访问 C# 类中的受保护字段，尽管这可以在 C# 中使用。

C#抽象类

```
public abstract class SQL
{
    protected readonly SqlConnectionStringBuilder bld;
    protected readonly SqlCommand cmd;
    protected readonly SqlConnection conn;
    protected readonly string connstring;
    protected string userid;

    public SQL(string server, string db)
    {
        bld = new SqlConnectionStringBuilder();
        bld.DataSource = server;
        bld.InitialCatalog = db;
        bld.IntegratedSecurity = true;
        connstring = bld.ConnectionString;

        conn = new SqlConnection(connstring);
        cmd = new SqlCommand();

        GetUserID();
        //Other utility methods here
    } 
```

要继承的 F# 代码

```
type Transfer ( server : string ) ( db : string ) = 
inherit SQL(server, db)  
let accessAbstractConn = conn. //Can't access protected field???? 
```

我在这里错过了什么吗？我已经尝试给基类字段加上别名，例如 this.conn 这也不起作用。

谢谢理查德

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-26T14:52:38.263

您可以向构造函数添加自标识符：

```
type Transfer ( server : string, db : string ) as this = 
  inherit SQL(server, db)  
  let accessAbstractConn = this.conn 
```

或者，使用`base`关键字：

```
type Transfer ( server : string, db : string ) = 
  inherit SQL(server, db)  
  let accessAbstractConn = base.conn 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T14:27:50.663

查看相关问题：

*   [F# - 如何访问受保护的成员](https://stackoverflow.com/q/2366490/562906)

*   [为什么 F# 中没有受保护的访问修饰符？](https://stackoverflow.com/a/2390591/562906)

基本上我认为你不能从 a 中做到这一点，`let`因为它实际上是在隐式 lambda 的上下文中。

# javascript - 通过 new 创建的 Javascript 对象属性的所有权

> ID：15091473
> 
> 赞同：2
> 
> 时间：2013-02-26T14:23:00.917
> 
> 标签：javascript

例如，如果我在我的应用程序中使用prototype.js，该库会使用一些额外的东西扩展对象原型，例如：

```
// the code is not exactly like this but that doesnt matter
Object.prototype.inspect = function... 
```

当我创建一些对象时，该对象永远不会拥有自己的属性“检查”，这当然是正确的：

```
// false
{}.hasOwnProperty('inspect'); 
```

如果我像这样创建一个对象文字，通过这个对象文字创建的属性是自己的属性，这当然也是正确的：

```
var myObj = {
   myProp: 'myVal'
};

// this would return true here
myObj.hasOwnProperty('myProp'); 
```

但是，如果我通过 new 运算符创建一个对象，即使我的 Function 中的属性也不会被识别为 ownproperty。

```
function MyTest () {}

MyTest.prototype.myProp = function () {};

var myObj = new MyTest();

// this would return false here

myObj.hasOwnProperty('myProp'); 
```

有人可以解释为什么会这样吗？我想遍历一个对象，创建一个新对象，它只包含不属于 Objects.prototype 的属性（因此不是通过prototype.js 创建的）。

编辑：我不是创建 myObj 的代码的所有者，我不知道哪个 Function-Constructor 创建了 myObj

EDIT2：感谢 niko，这就是我现在的做法：

```
var key, newObj = {};
for (key in oldObj) {
  if (typeof newObj[key] == 'undefined') {
    newObj[key] = oldObj[key];
  }
}
for (key in newObj) {
  if (newObj.hasOwnProperty(key)) {
    // do some stuff here with properties that did not came from the objects.prototype
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T14:26:05.550

的唯一目的`hasOwnProperty`是将附加到实际对象（也称为实例）的属性与附加到原型的属性区分开来。如果您通过`new`运算符构造实例，则新实例将链接到构造它的函数的原型 - 原型的属性不会复制到新实例！

考虑这样的事情来复制不在 Object.prototype 中的所有内容：

```
var newObj = {};
for (var key in oldObj) {
    if (typeof newObj[key] == 'undefined') {
        newObj[key] = oldObj[key];
    }
} 
```

但是，仍然可以通过 Object.prototype 访问属性，`newObj`因为它当然是 Object 的一个实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T14:26:13.610

因为它被分配给`prototype`，这实际上有点像为对象创建一个模糊的类或祖先，并将属性赋予它。该属性从未直接分配给`myObj`。

值得注意的是，您可以将原型直接应用于`myObj`而不是其构造函数，或者`myProp`直接应用于`myTest`而不调用原型，并且`myProp`仍然不是`myObj`自己的属性。

# php - 如何从 phpunit 中调度的动作中获取响应

> ID：15091475
> 
> 赞同：3
> 
> 时间：2013-02-26T14:23:09.053
> 
> 标签：php, unit-testing, phpunit

我正在`POST`向控制器的操作发送一些数据。该动作与一些 json 编码的字符串相呼应。我想验证该操作的 json 编码字符串是否符合我的要求。我想知道我怎样才能得到那个字符串？

我的测试如下所示：

```
$this->request->setMethod('POST')
     ->setPost(['test' => 'databaseschema_Database']);

$params = ['action' => 'analysis', 'controller' => 'Index', 'module' => 'default'];
$urlParams = $this->urlizeOptions($params);
$url       = $this->url($urlParams);
$result    = $this->dispatch($url);

$this->assertJsonStringEqualsJsonString(
    $result, json_encode(["status" => "Success"])
); 
```

我的测试失败，我收到以下消息：

```
1) IndexControllerTest::testAnalysisAction
Expected value JSON decode error - Unknown error
stdClass Object (...) does not match expected type "NULL". 
```

谁能指导我如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:31:35.677

If you want to do unit testing, what you really want to do is extract the json encoding into it's own class (or a method inside a utils class or something) and then test those method instead of your whole controller.

The problem with your approach is that when running phpunit, there is not $_POST array. The code above does not show what is happening, but I guess there is different behaviour when run through apache and cli which causes your test to fail.

I would create a TransformerClass and test this in isolation:

```
class JsonTransformer
{
    public function transformPostData(array $postArray)
    {
        // transformation happening
    }
}

class JsonTransformerTest extends \PHPUnit_Framework_TestCase
{
    public function testTransformPostData()
    {
        $transformer = new JsonTransformer();
        $data = array('action' => 'analysis', 'controller' => 'Index', 'module' => 'default');
        $result = $transformer->transformPostData(data);

        $this->assertJsonStringEqualsJsonString($result, json_encode(array("status" => "Success")));
    }
} 
```

If you need to test your whole request/response, you would use some kind of HTTPClient, request the url, send the post data and see if the response is what you'd expect.

Everything in between (like faking the post data) leaves you with more problems and more code to maintain than it does you good.

# mysql - MySQL 更新触发器

> ID：15091476
> 
> 赞同：1
> 
> 时间：2013-02-26T14:23:14.730
> 
> 标签：mysql, triggers

所以，我有一个带有一些字段的 MySQL 表客户

```
table <Customers>
ID    Name    Description    State
0     Jack    waiting        0
1     Jane    complete       1 
```

我想写一个触发器，它更新State字段它需要将State的值设置为1，如果Description被更新并获取值完整

到目前为止，我想出了这个：

```
delimiter $$
CREATE TRIGGER customerUpdated 
    BEFORE UPDATE ON Customers
    FOR EACH ROW 
BEGIN
    IF NEW.Description = 'completed' THEN  
    UPDATE Customers SET State = '1' WHERE id = OLD.id;
END IF;
END$$
delimiter ; 
```

但我得到了错误：

# 1442 - 无法更新存储函数/触发器中的表“客户”，因为它已被调用此存储函数/触发器的语句使用。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:25:20.853

我认为你只需要设置 NEW.State 而不是运行 UPDATE 语句：

```
IF NEW.Description = 'completed' THEN  
   SET NEW.State = 1;
END IF 
```

# vim - 如何为 slimv 和 ritz 设置类路径

> ID：15091487
> 
> 赞同：2
> 
> 时间：2013-02-26T14:23:35.883
> 
> 标签：vim, clojure, leiningen, swank, slimv

我想解决我的类路径问题。你能告诉我该怎么做吗？

# 我可以做到以下几点。

### 我可以通过推 eval (+ 1 1) 在 vi​​m(slimv) 中，例如。

然后 slimv 显示以下内容。

```
user> 
(+ 1 1)
2 
```

# 但是，我不能做以下事情。

### 1.当我在 vim(slimv) 中通过推 eval 来评估以下代码时，e，

```
(use '[clojure.contrib.str-utils :only (re-split)]) 
```

### 2.Slimv 显示如下错误。

; java.io.FileNotFoundException 上的评估中止：在类路径上找不到 clojure/contrib/str_utils__init.class 或 clojure/contrib/str_utils.clj：

# 我的环境如下。

*   macvim 7.3.754
*   莱茵 2.0.0
*   瘦身 0.9.9
*   丽兹 0.7.0

### 项目.clj

```
(defproject helloworld "1.0.0-SNAPSHOT"
  :description "FIXME: write description"
  :url "http://example.com/FIXME"
  :license {:name "Eclipse Public License"
            :url "http://www.eclipse.org/legal/epl-v10.html"}
  :dependencies [[org.clojure/clojure "1.4.0"]]
  :plugins [[lein-ritz "0.7.0"]]
  ) 
```

### ~/.lein/profiles.clj

```
{:user {:plugins [
      [lein-ritz  "0.7.0"]
  ]}} 
```

### 参考

[lein ritz 设置错误](https://stackoverflow.com/questions/13220319/lein-ritz-setup-error)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T15:03:59.557

你试过`clojure.string`吗？

```
(use '[clojure.string :only (split)])

(split "clojure8*)-6contrib&(*does^&$not*_^%exist^*#anymore" #"[^a-zA-Z]+")
=> ["clojure" "contrib" "does" "not" "exist" "anymore"] 
```

顺便说一句，所有`clojure.contrib`这些都已迁移到单独的库[http://dev.clojure.org/display/design/Where+Did+Clojure.Contrib+Go](http://dev.clojure.org/display/design/Where+Did+Clojure.Contrib+Go)

# javascript - 将图像居中并从中心调整其大小。无保证金

> ID：15091497
> 
> 赞同：1
> 
> 时间：2013-02-26T14:24:04.477
> 
> 标签：javascript, jquery, html, css

我想在用户屏幕的中心放置一个心脏图像。每次我点击它都应该调整大小和增长。

主要问题是我想做到这一点没有余地。你能帮我吗？

编辑 1 - 这是我到目前为止的代码，但它真的很乱并且使用边距

```
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js">
</script>
<style>
#container {
  width: 100px;
  height: 100px;

  position:absolute;
  left: 50%;
  top: 50%;
  margin-left: -50px;
  margin-top: -50px;
}

#Msg1 {
  width: 200px;
  height: 100px;
 display:none;
 position:absolute;

  margin-right:55%;
  margin-top: 45%;
}
body {
    overflow:hidden;
    background-color:#ffd6d6;
}

</style>
<script>
var size=100;
var i=0;
var heartImage = document.getElementById('container');
$(document).ready(function(){
   $(function() {
  $("#Msg1").fadeIn("slow");
  });
 $(function() {
    $("#container")
        .mouseover(function() { 
        if(i==0){
            var src = $(this).attr("src").match(/[^\.]+/) + "over.png";
            $(this).animation
            $(this).attr("src", src);}
        })
        .mouseout(function() {
            var src = $(this).attr("src").replace("over.png", ".png");
            $(this).attr("src", src);
        });
});
  $("#container").click(function(){
  i++;
  if(i==1)
  {
  $("#Msg1").fadeOut("fast");
  }
  if(i==6)
  {
  $("body").css("background-color","#9d1b1b");
   $("#container").hide();
  }
  size=size*2;
   $("#container").animate({
      height:size,
      width:size,
      margin:-size/2,  
    });
  });

});

</script>
</head>

<body dir="rtl">
<img id="container" src="heart.png" alt="null"/>
<div  id="Msg1">
</div>

</body> 
```

[这](http://jsfiddle.net/Cbj4m/)是 JSFiddle 中的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:45:09.180

这是一个不使用`margins`它的简单代码`display:table`，`display:table-cell`并且`vertical-align:middle`，此解决方案的问题是您需要知道视图的高度（您始终可以通过 JavaScript/jQuery 获取它，但我将其固定为 400px 只是为了例子）。

[这是带有工作示例的 jsFiddle。](http://jsfiddle.net/JMxfT/)

这是简单的 HTML：

```
<div class="content">
    <div class="wrapper">
        <div class="inner">
            <div class="heart"></div> 
        </div>
    </div
</div> 
```

jQuery 'click' 绑定：（它现在切换事件，只是为了显示目的）

```
$(document).ready(function(e) {
    $(".heart").click(function () {
       $(this).toggleClass("bigger");
    })
}); 
```

还有 CSS（我在这里使用 CSS3 过渡（带有供应商前缀），但您可以通过 jQuery 对其进行动画处理以使其跨浏览器

```
body{
    height:400px;
}
.content{
    display:table;
    height:100%;
    width:100%;
}
.wrapper{
    display:table-cell;
    vertical-align:middle;
    height:100%;
}
.inner{
    text-align:center
}
.heart{
    -webkit-transition: all 0.5s ease;
    -moz-transition: all 0.5s ease;
    -o-transition: all 0.5s ease;

    display:inline-block;
    background: transparent url('http://wbom.files.wordpress.com/2012/02/red-heart.png') center center no-repeat;
    background-size: 250px;
    width:250px;
    height:250px;
}
.bigger{
     background-size: 350px;
    width:350px;
    height:350px;
} 
```

希望对您有所帮助，如果太长，请见谅。
干杯。

# php - 防止 Smarty 2 模板被缓存/编译

> ID：15091498
> 
> 赞同：0
> 
> 时间：2013-02-26T14:24:06.650
> 
> 标签：php, caching, smarty, template-engine, smarty2

我对 Smarty 2.6.9 缓存有疑问，我有 2 个模板调用`confirmation.tpl`，它们都存储在我的代码库的不同目录中。

但是，当它们被编译时，它们会被编译到一个`/cache/gb/`目录中。仅对于这两个模板，我想阻止编译，因此我尝试使用`force_compile`成员变量，但这根本没有效果，并且模板始终被缓存。

这提出的问题是，两个模板都在*同一*`confirmation.tpl`页面上被调用（通过单独的代码），所以一个模板同时用于这两个模板，这给我带来了问题。

 *有没有办法可以防止这个模板以这种方式被编译和缓存？

我正在传递一个标志，以便仅为“confirmation.tpl”模板设置“no_compile”。

```
 $this->obj = new Smarty;
    $this->obj->caching = false;
    $this->obj->cache_lifetime = 10; 
    $this->obj->compile_check = true;
    $this->obj->template_dir = $this->tpl_path;

    if ($this->no_compile) {
        $this->obj->force_compile = false;
        $this->obj->compile_check = false;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T14:51:53.867

您可以`$compile_id`在显示/获取中使用不同的设置来获取磁盘上的不同物理文件（尽管我认为 Smarty 应该根据路径自动为您处理这个）。`compile_id`也可以为`{include}`语句设置。

我不确定您粘贴的代码意味着什么，但您需要打开`force_compile`Smarty 以在每次显示模板时重新生成模板（`false`默认情况下）。*

# erlang - Erlang中Erastosthenes的筛子最高素因子

> ID：15091500
> 
> 赞同：0
> 
> 时间：2013-02-26T14:24:08.793
> 
> 标签：erlang, sieve-of-eratosthenes

我已经编辑了程序，以便它可以工作（使用小数字）但是我不明白如何按照建议实现累加器。原因是因为P在整个过程中都在变化，所以我不知道我应该以哪个粒度来分解母列表。Erastosthenes 的筛子只对生成较小的素数有效，所以也许我应该选择一个不同的算法来使用。有人可以推荐一个体面的算法来计算 600851475143 的最高素数吗？请不要给我代码我更喜欢这种性质的维基百科文章。

```
 -module(sieve).
    -export([find/2,mark/2,primes/1]).

    primes(N) -> [2|lists:reverse(primes(lists:seq(2,N),2,[]))].

    primes(_,bound_reached,[_|T]) -> T;
    primes(L,P,Primes) -> NewList = mark(L,P),
        NewP = find(NewList,P),
        primes(NewList,NewP,[NewP|Primes]).

    find([],_) -> bound_reached;
    find([H|_],P) when H > P -> H;
    find([_|T],P) -> find(T,P). 

    mark(L,P) -> lists:reverse(mark(L,P,2,[])).

    mark([],_,_,NewList) -> NewList;
    mark([_|T],P,Counter,NewList) when Counter rem P =:= 0 -> mark(T,P,Counter+1,[P|NewList]);
    mark([H|T],P,Counter,NewList) -> mark(T,P,Counter+1,[H|NewList]). 
```

我发现写这个非常困难，而且我知道它有一些不是很优雅的东西，比如我将 2 硬编码为质数的方式。因此，我将不胜感激任何 C&C 以及有关如何解决此类问题的建议。我查看了其他实现，我完全不知道作者如何以这种方式思考，但它是我想掌握的东西。

我已经弄清楚我可以忘记这个列表，直到找到最近的素数，但是我不知道我应该如何产生一个结束界限（微妙的幽默）。我认为可能有一些我可以使用的东西，比如 lists:seq(P,something) 并且当我使用模数而不是每次都将其重置为 0 时，计数器将能够处理它。我只做过AS级别的数学，所以我不知道这是什么。

我什至不能这样做，我可以吗？因为我将不得不从整个列表中删除 2 的倍数。我认为除非我将数据缓存到硬盘驱动器，否则该算法将不起作用，所以我重新寻找更好的算法。

我现在正在考虑编写一个算法，它只使用一个计数器并保留一个素数列表，这些素数是不与先前生成的素数均分的数字，这是一个好方法吗？

这是我写的新算法，我认为它应该可以工作，但我收到以下错误“sieve2.erl:7: call to local/imported function is_prime/2 is legal in guard”我认为这只是 erlang 的一个方面我不明白。但是，我不知道如何找到有关它的材料。[我故意不使用高阶函数等，因为我只在 learnyousomeerlang.org 中阅读了关于递归的部分内容]

```
 -module(sieve2).
    -export([primes/1]).

    primes(N) -> primes(2,N,[2]).

    primes(Counter,Max,Primes) when Counter =:= Max -> Primes;
    primes(Counter,Max,Primes) when is_prime(Counter,Primes) -> primes(Counter+1,Max,[Counter|Primes]);
    primes(Counter,Max,Primes) -> primes(Counter+1,Max,Primes).

    is_prime(X, []) -> true;
    is_prime(X,[H|T]) when X rem H =:= 0 -> false;
    is_prime(X,[H|T]) -> prime(X,T). 
```

第二个算法不会崩溃但运行得太慢，我想我应该重新实现第一个但这次忘记了直到最近发现的素数的数字，有人知道我可以用什么作为结束界限吗？在查看其他解决方案之后，似乎人们有时只是设置了一个任意限制，即 200 万（这是我真的不想做的事情。其他人使用“懒惰”的实现，这就是我认为我正在做的事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T14:57:35.620

这个：

```
lists:seq(2,N div 2) 
```

分配一个列表，正如[效率指南](http://www.erlang.org/doc/efficiency_guide/advanced.html)所说，一个列表每个元素至少需要两个字的内存。（一个字是 4 字节还是 8 字节，取决于你是 32 位还是 64 位 Erlang 虚拟机。）所以如果`N`是 600851475143，如果我计算正确的话，这将需要 48 TB 的内存。（与 Haskell 不同，Erlang 不进行惰性求值。）

所以你需要使用累加器来实现它，类似于你`Counter`在`mark`函数中所做的。对于递归函数的停止条件，您不会检查列表是否为空，而是检查累加器是否达到最大值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T18:45:16.337

顺便说一句，您不需要测试所有数字到 N/2。测试到 sqrt(N) 就足够了。

[这里我写了一个版本，需要 20 秒才能在我的机器上找到答案。](https://github.com/RumataEstor/project_euler/blob/master/problem003.erl)它使用一种惰性素数列表并通过它们折叠。这很有趣，因为我很久以前就使用 Haskell 解决了一些项目欧拉问题，而在 Erlang 上使用相同的方法有点奇怪。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T08:14:29.343

在您的更新3：

```
primes(Counter,Max,Primes) when Counter =:= Max -> Primes;
primes(Counter,Max,Primes) when is_prime(Counter,Primes) -> primes(Counter+1,Max,[Counter|Primes]);
primes(Counter,Max,Primes) -> primes(Counter+1,Max,Primes). 
```

您不能像在 Haskell 中那样使用自己定义的函数作为保护子句。您必须重写它才能在 case 语句中使用它：

```
primes(Counter,Max,Primes) when Counter =:= Max ->
    Primes;
primes(Counter,Max,Primes) ->
    case is_prime(Counter,Primes) of
        true ->
            primes(Counter+1,Max,[Counter|Primes]);
        _ ->
            primes(Counter+1,Max,Primes)
    end. 
```

# c# - SQL 插入不起作用

> ID：15091502
> 
> 赞同：3
> 
> 时间：2013-02-26T14:24:14.287
> 
> 标签：c#, asp.net, sql

当事件`Button`被按下时，SQL 表中没有*任何更新并且**没有错误*显示。

```
protected void SubmitBTN_Click(object sender, EventArgs e)
{
    SqlConnection conn = new SqlConnection(@"Data Source=(LocalDB)\v11.0;AttachDbFilename=C:\Users\Matt\Documents\coffeeShop.mdf;Integrated Security=True;Connect Timeout=30");

    String coffeeName = NameTXT.Text;
    String coffeeGrid = GrindTXT.Text;
    String coffeeOrigin = OriginTXT.Text;
    String coffeePrice = PriceTXT.Text;
    String coffeeQty = QuantityTXT.Text;
    String coffeeRRP = RRPTXT.Text;

    SqlCommand comm = new SqlCommand("INSERT INTO Table (coffeeName, coffeeGrid, coffeeOrigin, coffeePrice, coffeeQty, coffeeRRP) VALUES ('%" + coffeeName + "%','%" + coffeeGrid + "%','%" + coffeeOrigin + "%','%" + coffeePrice + "%','%" + coffeeGrid + "%','%" + coffeeQty + "%','%" + coffeeRRP + "%' ", conn);

    conn.Open();
    //SqlDataReader reader = comm.ExecuteReader();

    //lblDBData.Text += "<table border=0>";
    //while (reader.Read())
    //{
    //    lblDBData.Text += "<tr>";
    //    lblDBData.Text += "<td>" + reader["coffeeName"] + "</td>";
    //    lblDBData.Text += "</tr>";
    //}
    //lblDBData.Text += "</table>";

    //reader.Close();
    conn.Close();                     
} 
```

任何建议将不胜感激，非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T14:28:33.200

添加：

`comm.ExecuteNonQuery();`

后：

`conn.Open();`

顺便说一句，您可能希望使用参数而不是`" + parameter + "` 查询来避免 sql 注入。读这个：

[http://www.csharp-station.com/Tutorial/AdoDotNet/Lesson06](http://www.csharp-station.com/Tutorial/AdoDotNet/Lesson06)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T14:28:00.087

您需要执行命令为；

```
conn.Open(); //Open the connection to the database
comm.ExecuteNonQuery(); //This line does the insert
conn.Close(); //Close the connection once your command executed. 
```

还要考虑参数化查询并在`using`块内打开连接对象作为避免打开连接对象的好习惯。

前任;

```
using(SqlConnection conn = new SqlConnection("connectionString"))
{
   SqlCommand cmd = new SqlCommand("your query string with @para", conn);
   cmd.Parameters.AddWithValue("@para", "value");
   conn.Open();
   cmd.ExecuteNonQuery();

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-30T09:08:30.500

执行 Transact-SQL 语句时，正确的方法是：

```
 private const string connection = @"Data Source=(LocalDB)\v11.0;AttachDbFilename=C:\Users\Matt\Documents\coffeeShop.mdf;Integrated Security=True;Connect Timeout=30";

    protected void SubmitBTN_Click(object sender, EventArgs e)
    {
        string query = "INSERT INTO Table (coffeeName, coffeeGrid, coffeeOrigin, coffeePrice, coffeeQty, coffeeRRP) VALUES (@name, @grid, @origin, @price, @qty, @rrp)";
        using(SqlConnection conn = new SqlConnection(connection))
        using(SqlCommand command = new SqlCommand(query, connection))
        {        

            String coffeeName = NameTXT.Text;
            String coffeeGrid = GrindTXT.Text;
            String coffeeOrigin = OriginTXT.Text;
            String coffeePrice = PriceTXT.Text;
            String coffeeQty = QuantityTXT.Text;
            String coffeeRRP = RRPTXT.Text;

            command.Parameters.AddWithValue("@name", coffeeName);
            command.Parameters.AddWithValue("@grid", coffeeGrid);
            command.Parameters.AddWithValue("@origin", coffeeOrigin);
            command.Parameters.AddWithValue("@price", coffeePrice);
            command.Parameters.AddWithValue("@qty", coffeeQty);
            command.Parameters.AddWithValue("@rrp", coffeeRRP);

            try
            {
                command.Connection.Open();
                command.ExecuteNonQuery();
            }
            catch (SqlException Ex)
            {

                console.WriteLine( "Error message: " + Ex);
            }
            finally
            {
                command.Connection.Close();
            }        

        }

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T14:29:25.487

您需要执行 SQL 命令。在关闭连接之前，添加以下内容：

```
comm.ExecuteNonQuery(); 
```

例如，请参阅 MSDN：http: [//msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T14:27:53.800

您无法阅读插入语句。您必须使用`comm.executeNonQuery()`执行插入命令，然后制作一个新的选择语句来读取数据

# c - 函数返回值的`rc`是什么意思？

> ID：15091510
> 
> 赞同：20
> 
> 时间：2013-02-26T14:24:36.127
> 
> 标签：c, return-value

在阅读 C 代码时，我经常会遇到以下语句：

> > int rc = foo(bar, baz);
> > 断言（rc！= NULL）；

其中变量`rc`用于检查函数的返回值。我认为这是某种助记符，但无法推断其含义。

我想知道它的含义，以帮助我理解代码。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-26T14:26:41.637

我认为这是“返回码”。多用于指`0/NULL or 1`形式的整数返回码。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-26T14:59:22.677

`rc`代表“芜菁甘蓝砂锅”。什么？你不这么认为吗？！

好吧，事实是没有人能说出这真正代表什么，因为 C 代码中没有强制名称。它可以代表“返回代码”或“远程控制”或作者当时脑海中的任何东西。

> 我想知道帮助我理解代码的意义

你的论点本质上是有缺陷的。如果您想更好地理解代码，请确保您阅读了正在使用的函数的文档和源代码，永远不要相信函数的名称或数据类型会优先于代码实际执行的操作。

* * *

编辑以解决评论：

> 事实上，我认为你的论点是有缺陷的，迈克。说知道常用的变量名并不能帮助您理解代码是荒谬的，尽管它们不是强制性的。例如，众所周知，i 通常用作（但不是强制的）跨所有语言的循环增量变量。

可以说确实存在人们倾向于遵循的变量名称。我们将看到`ret`or`rc`用于返回值或返回码，我们经常会看到用于循环运算符的单个变量`a`, `b`, `c`,..., `i`, `j`, 。`k`然而，根据名称*假设*变量的作用是一个糟糕的主意。
不仅您对变量代表什么的假设可能是错误的（例如`i`，欧姆定律函数中的简单名称很可能是选择代表电流的名称，与循环无关），而且对您有意义的可能不是什么对作者有意义。

例如，作者有一个变量`int return_code`. 您可能会假设它将包含函数的返回代码，但它可能被用于检查在您正在评估的函数中调用的函数的返回值，而该变量*用于*`int r`返回代码。
假设您看到的变量`count`是循环迭代器，或者是文件数量的计数，还是计数信号量？

So, Chris Redford, I must respectfully disagree. It's not absurd to say that knowing commonly used variable names won't help understand code, because it won't do any better than reading the code itself, and it *might* lead you down a stray path thinking you know what is going on when you really don't.
If you understand source code you'll see `return xxx;` or `for(int yyy=0;` and you won't have to make assumptions about what those variables are doing, you'll know for sure, and that's the ***only*** way to be guaranteed you know what's happening.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-26T14:46:14.003

它通常表示“返回代码”或“结果代码”，尽管它基本上可以表示任何内容，具体取决于作者的意图。按照命名约定，它并不是那么好。我的意思是，它比 好`myVariable`，但不是很多。

我赞同变量名应该是*有意义的*，并且`rc`不是很有意义的想法。如果它的意思是“结果代码”，那么我的问题是“结果是*什么*？” 返回码代表什么？

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-26T14:25:30.323

我会猜测“结果代码”，但这当然只是猜测。

# java - 如何在 RCP 中将下拉菜单添加到 WorkbenchWindowControlContribution

> ID：15091511
> 
> 赞同：1
> 
> 时间：2013-02-26T14:24:37.600
> 
> 标签：java, swt, eclipse-rcp, jface

我的`WorkbenchWindowControlContribution`Eclipse RCP 应用程序中有一个。它基本上由一个图标、一个文本字段和一个按钮组成。现在我想在图标和文本字段之间添加一个下拉菜单。如何做到这一点（在代码中）？

# asp.net - 为什么我的 SqlDataSource 的 UpdateCommand 不起作用？

> ID：15091512
> 
> 赞同：4
> 
> 时间：2013-02-26T14:24:40.767
> 
> 标签：asp.net, webforms

```
<asp:SqlDataSource ID="HopefulDataSource" runat="server" 
    ConnectionString="<%$ ConnectionStrings:MyConnectionString %>" 
    SelectCommand= "SELECT id, regGroupID, amountReceived, other FROM table" 
    UpdateCommand="UPDATE table
                        SET [amountReceived] = @amountReceived
                        WHERE [regGroupID] = @regGroupID">
    <SelectParameters>
        <asp:ControlParameter ControlID="ddlCourses" Name="ddlSelectedCourse" PropertyName="SelectedValue" Type="String" />
    </SelectParameters>

    <UpdateParameters>
        <asp:Parameter Name="regGroupID"        Type="Int32" />
        <asp:Parameter Name="amountReceived"    Type="Decimal" />

        other parameters

        <asp:Parameter Name="id"                Type="Int32" />
    </UpdateParameters>
</asp:SqlDataSource> 
```

当我将“WHERE [regGroupID] = @regGroupID”更改为

哪里 [id] = @id

或者

WHERE [regGroupID] = 2

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T20:04:04.160

您需要在声明中将“regGroupID”添加到`DataKeyNames`集合中`GridView`。像这样的东西：

```
<asp:GridView ID="yourGridViewId" DataKeyNames="regGroupID" ... >
    ...
</asp:GridView> 
```

请参阅[`DataKeyNames`文档](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.datakeynames.aspx)：

> 您必须设置 DataKeyNames 属性才能使 GridView 控件的自动更新和删除功能起作用。这些关键字段的值被传递给数据源控件，以指定要更新或删除的行。

注意：自从我使用它已经有一段时间了，所以您可能需要同时包含主键和其他键字段。像这样：

```
DataKeyNames="id,regGroupID" 
```

# linux - 如何在 Linux 上的 OpenGL 中创建窗口而不是使用 GLUT？

> ID：15091514
> 
> 赞同：2
> 
> 时间：2013-02-26T14:24:44.597
> 
> 标签：linux, opengl, glut

如何在 Linux 上的 OpenGL 中创建窗口而不是使用 GLUT？使用其中一种时是否会降低性能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T15:48:35.060

> 首先，我想问一下使用 glut 是否在性能方面。

它对 OpenGL 性能没有影响，您使用哪个框架来创建窗口。

> 我该怎么做？

您是指使用 X11 和 GLX 的漫长而艰难的道路吗？我在这里有示例代码：

[https://github.com/datenwolf/codesamples/blob/master/samples/OpenGL/x11argb_opengl/x11argb_opengl.c](https://github.com/datenwolf/codesamples/blob/master/samples/OpenGL/x11argb_opengl/x11argb_opengl.c)

# objective-c - 在objective-c中没有成员的属性和访问器方法

> ID：15091516
> 
> 赞同：0
> 
> 时间：2013-02-26T14:24:51.490
> 
> 标签：objective-c, properties, member, accessor

我只是在链接中浏览属性文档：http: [//developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/EncapsulatingData/EncapsulatingData.html](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/EncapsulatingData/EncapsulatingData.html) “您可以实现自定义访问器方法”部分描述属性并不总是必须由它们自己的实例变量支持。fullName 的例子也没有使用它自己的对应成员。

定义属性（_propertyName）时编译器不会隐式创建成员吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:27:34.000

如果您使用创建属性`@property`，则会自动创建一个 ivar，并且它的 setter 和 getter 由 LLVM 编译器创建。

而当你创建一个 ivar 时，你必须为它创建一个 setter/getter。通常，您使用`@property`并留在编译器上。

但是，在某些情况下，您会创建具有不同名称的 ivar 和属性，并将其引用为：

```
@synthesize boxDescription=boxName; 
```

现在 boxName 是 boxDescription 的访问器，现在你不能`boxDescription`在你的代码中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T14:36:10.843

如果您覆盖默认的 setter 和 getter，并且您不提供 @synthesize（并且您也不访问 _ivar），则编译器不会为您创建任何变量。在这种情况下，您有一个不受 ivar 支持的属性。

作为一个非常随机的例子：

```
@property (nonatomic) int x;

- (int)x
{
  返回 1；
}

- (void)setX:(int)x
{
  NSLog(@"%d", x);
}

```

如果您有其他类的外观，并且您使用此 setter/getter 来设置/获取这些，则可以使用更有用的用法。

如果您不覆盖 set/getter 并且默认情况下 @synthesize 不再是强制性的，编译器会创建一个名为 _propertyname 的 ivar，您可以通过以下方式覆盖此行为`@synthesize prop_name=ivar_name`

# jquery - 在 jquery-mobile 中选择菜单样式

> ID：15091527
> 
> 赞同：1
> 
> 时间：2013-02-26T14:25:25.903
> 
> 标签：jquery, jquery-mobile

我对选择菜单的样式有疑问。

我有一个以下代码和样式：

```
<select id="anredeMenu" data-native-menu="false" data-inline="true">
        <option value="1">Firma</option>
        <option value="2">Familienbetrieb</option>
        <option value="3">Herr</option>
        <option value="4">Frau</option>
        <option value="5">Familie</option>
</select> 
```

我还有一个：

```
<label for="select-choice-0" class="select">Shipping method:</label>
<select name="select-choice-0" id="select-choice-1">
   <option value="standard">Standard: 7 day</option>
   <option value="rush">Rush: 3 days</option>
   <option value="express">Express: next day</option>
   <option value="overnight">Overnight</option>
</select> 
```

代码几乎相同。唯一不同的是： data-native-menu="false" data-inline="true" 我想要所有选择菜单中第一个示例中的样式。

我包含了来自 jquery mobile 的标准 css，并在我的身边包含了 iPhone 样式。

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
<link rel="stylesheet" href="style.css" />  //from http://taitems.tumblr.com/post/7240874402/ios-inspired-jquery-mobile-theme-jquery-mobile 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:45:30.880

您可以绑定到[pagebeforecreate](http://api.jquerymobile.com/pagebeforecreate/)事件并将所需的`data-`属性添加到`<select>`页面中的所有元素：

```
$(document).on("pagebeforecreate", function(e) {
    $("select", e.target).attr({
        "data-native-menu": "false",
        "data-inline": "true"
    });
}); 
```

由于此处理程序在 jQuery Mobile 将小部件应用于页面中的元素之前运行，因此它的行为就像所有`<select>`元素从一开始就已正确配置一样。

# opengl - OpenGL - 在纹理多边形上创建边框

> ID：15091528
> 
> 赞同：1
> 
> 时间：2013-02-26T14:25:26.930
> 
> 标签：opengl, textures, shader, cocos2d-x

我正在使用 cocos2d-x 2.0.4。我通过这两张图片说明了我正在尝试做的事情。

[![凸多边形](../Images/449f1a90b13613a8862983fe95c439bc.png)](https://i.stack.imgur.com/bdjOu.png) [![凸多边形带边框](../Images/93fc63aa152c67b78c456323ed09f727.png)](https://i.stack.imgur.com/PRGzI.png)

我想要做的是以编程方式创建一个模糊的边界或一个带有渐变的边界。我有两个想法可以做到这一点，但我不确定这是否是正确的做法。第一个解决方案是对仅包含模糊颜色的多边形（在这种情况下为带有孔的凹多边形）进行三角剖分，并使用渐变在其上渲染颜色，多边形外部的顶点将是全 alpha，内部的顶点为零-α。插值将完成梯度的工作。第二种解决方案是在着色器本身内部进行。我需要的只是计算一个像素和多边形最近边缘到它的距离。然后在某个阈值下，我会根据该距离影响具有某个 alpha 值的像素白色（距离最短，alpha 最大）。

无论如何，我对openGL的东西很陌生，我担心第二种解决方案最终会花费大量的处理时间，因为我必须计算多边形每个像素的距离。你怎么看这些家伙？有什么想法可以证实我的猜测，还是我完全错了？

编辑：我最终选择的解决方案是使用多边形中每个角度的平分线（易于用 3 个连续顶点计算），并在该平分线上取一个点，该点将成为内部多边形的顶点。然后我采用外部多边形顶点或内部多边形顶点来构建可以适合 GL_TRIANGLE_STRIP 参数的顶点数组。我把图片放在下面以便更好地理解。

[![解释](../Images/e80bacf41e7ce8ca963d59cb5938ea9e.png)](https://i.stack.imgur.com/DwOfV.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T18:21:02.677

边缘照明着色器会做你想要的吗？[链接到一个例子](http://www.catalinzima.com/samples/rim-lighting/)

GLSL 边缘照明着色器的示例代码：

```
const float rimStart = 0.5f;
const float rimEnd = 1.0f;
const float rimMultiplier = 0.0f;
vec3  rimColor = vec3(1.0f, 1.0f, 1.0f);

float NormalToCam = 1.0 - dot(normalize(outNormal), normalize(camPos - vertexWorldPos.xyz));
float rim = smoothstep(rimStart, rimEnd, NormalToCam) * rimMultiplier;

outColor.rgb += (rimColor * rim); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T17:51:21.570

为了从 3D 场景中的任何角度看都正确，您需要执行一些剪影。这主要涉及使用几何着色器来确定对象的哪些边缘具有面向屏幕的相邻面和不面向屏幕的相邻面。我相信这可以通过测试一个相邻面法线与您的相机方向之间的点积是否 <= 0 而另一个相邻面法线与您的相机方向之间的点积是否 > 0 来实现。

一旦您知道以某个角度勾勒出多边形的所有边缘，您就可以将由该边界定义的多边形细分为三角形条带（仍在几何着色器中）。然后，将每个顶点的颜色传递给片段着色器；其中位于边界上的所有顶点都以全 alpha 传递边界颜色，非边界点以零 alpha 传递颜色。片段着色器将从边框颜色插入中间片段的中心 alpha 颜色，为您提供所需的渐变。您的总体方法应该是这样的：

1.  使用无边框着色器程序作为背景颜色绘制对象。
2.  启用 Alpha 混合。

    ```
    glEnable(GL_BLEND);
    glBlendFunc(GL_SRC_ALPHA,GL_ONE_MINUS_SRC_ALPHA); 
    ```

3.  使用剪影程序绘制对象，确定用边框颜色构成边框的边缘，并将非边框点绘制为零 alpha。

4.  ```
    glDisable(GL_BLEND); 
    ```

# mysql - 选择一周中的 5 个日期

> ID：15091529
> 
> 赞同：1
> 
> 时间：2013-02-26T14:25:27.787
> 
> 标签：mysql, sql, symfony, pivot, dql

我有这张表，Lineas (id, date, proyect_id, hours)，我想按日期选择一周的总小时数。例如，对于 01/01/2013 和 05/01/2013 之间的日期，我需要此输出：

```
Proyect   | 01/01/2013 | 02/01/2013 | 03/01/2013 | 04/01/2013 | 05/01/2013
Proyect1  |     -      |     5      |     -      |     4      |     4
Proyect2  |     4      |     2      |     8      |     4      |     2
Proyect3  |     4      |     1      |     -      |     -      |     2 
```

这是表中的数据

```
 Id   |   Proyect_id   |    date    | hours
    1   |   Proyect1     | 02/01/2013 |   5
    2   |   Proyect1     | 04/01/2013 |   4
    3   |   Proyect1     | 05/01/2013 |   4
    4   |   Proyect2     | 01/01/2013 |   4
    5   |   Proyect2     | 02/01/2013 |   2
    6   |   Proyect2     | 03/01/2013 |   8
    7   |   Proyect2     | 04/01/2013 |   4
    8   |   Proyect2     | 05/01/2013 |   2
    9   |   Proyect3     | 01/01/2013 |   4
    10  |   Proyect3     | 02/01/2013 |   1
    11  |   Proyect3     | 05/01/2013 |   2 
```

任何帮助或线索？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T14:38:15.790

MySQL 没有*枢轴*函数，因此您需要使用带有`CASE`表达式的聚合函数来复制该功能。

如果您的值是已知的，那么您可以像这样对它们进行硬编码：

```
select Proyect_id,
  sum(case when date = '2013-01-01' then hours end) `2013-01-01`,
  sum(case when date = '2013-02-01' then hours end) `2013-02-01`,
  sum(case when date = '2013-03-01' then hours end) `2013-03-01`,
  sum(case when date = '2013-04-01' then hours end) `2013-04-01`
from Lineas
group by Proyect_id 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/ce0db/5)

但是如果值未知，那么您将需要使用准备好的语句来生成动态 SQL：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'sum(case when date = ''',
      date,
      ''' then hours else 0 end) AS `',
      date, '`'
    )
  ) INTO @sql
FROM  Lineas;

SET @sql = CONCAT('SELECT Proyect_id, ', @sql, ' 
                  FROM Lineas 
                  GROUP BY Proyect_id');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/ce0db/4)

两者都给出结果：

```
| PROYECT_ID | 2013-01-01 | 2013-02-01 | 2013-03-01 | 2013-04-01 |
------------------------------------------------------------------
|   Proyect1 |          0 |          5 |          0 |          4 |
|   Proyect2 |          4 |          2 |          8 |          4 |
|   Proyect3 |          4 |          1 |          0 |          0 | 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T14:31:51.730

您可以使用聚合在 MySQL 中执行此操作：

```
select proyect_id,
       sum(case when date = '01/01/2013' then hours end) as "01/01/2013",
       . . .
from t
group by proyect_id 
```

其余列的`. . .`方法等。

# android - 使用缩放/捏合更改 GridView 中的列数

> ID：15091530
> 
> 赞同：1
> 
> 时间：2013-02-26T14:25:27.750
> 
> 标签：android, gridview, pinchzoom

在我的应用程序中，我使用 GridView 实现了类似画廊的视图。我想根据用户的选择手动更改 GridView 中的列数。我可以通过提供任何按钮或菜单选项来更改它。我想对 Zoom / Pinch 操作做同样的事情，例如，如果有人尝试缩放 GridView，它应该减少列数，如果尝试 Pinch 则增加相同的列数。为了实现这一点，我尝试覆盖 onTouch 事件，但它既不流畅也不如预期。如果有人知道或知道如何实现这一目标，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:15:22.347

这并不容易。

首先我会试试这个：

在 GridView 上面放一个普通的 View（即这个 View 与 GridView 处于相同的位置，并且具有相同的宽度和高度）。

覆盖这个普通视图的 onTouchEvent。如果您检测到捏缩放，请进行特殊处理（更改 GridView 的列）。如果您没有检测到 Pinch Zoom，让 onTouchEvent 返回 false（未处理），让触摸事件冒泡到底层 GridView。

诀窍在于正确识别 Pinch Zoom 而不会弄乱 GridView 的默认触摸行为。

# c++ - C ++ zlib压缩文件中的字符串

> ID：15091534
> 
> 赞同：0
> 
> 时间：2013-02-26T14:25:35.907
> 
> 标签：c++, string, file, compression, zlib

我一直在尝试压缩字符串并将它们保存到文本文件中，然后读取数据并解压缩。但是，当我尝试解压缩读取的字符串时，我得到一个 Z_BUF_ERROR (-5) 并且该字符串可能会或可能不会解压缩。

在控制台中，我可以整天压缩/解压缩：

```
std::string s = zlib_compress("HELLO asdfasdf asdf asdfasd f asd f asd f awefo@8 892y*(@Y");
std::string e = zlib_decompress(s); 
```

该字符串`e`将毫无困难地返回原始字符串。

但是，当我这样做时：

`zlib_decompress(readFile(filename));`

我得到一个`Z_BUF_ERROR`. 我认为这可能部分是由于文件中的隐藏字符，但我不太确定。

这是我的`readFile`功能：

```
std::string readFile(std::string filename)
{
    std::ifstream file;
    file.open(filename.c_str(), std::ios::binary);

    file.seekg (0, std::ios::end);
    int length = file.tellg();
    file.seekg (0, std::ios::beg);

    char * buffer = new char[length];

    file.read(buffer, length);
    file.close();

    std::string data(buffer);

    return data;
} 
```

当我编写压缩数据时，我使用：

```
void writeFile(std::string filename, std::string data)
{
    std::ofstream file;
    file.open(filename.c_str(), std::ios::binary);
    file << data;
    file.close();
} 
```

如果需要，我会展示我用来解压缩的函数，但如果它在没有文件 IO 的情况下工作，我觉得问题是 IO 问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T14:46:47.120

First, you're dealing with binary data that might or might not have embedded null characters. `std::string` isn't really the correct container for that, although you can handle embedded null characters if you do it correctly. However, using a `std::string` to store something documents a certain expectation and you're breaking that convention.

Second, the line `std::string data(buffer);` isn't doing what you think it does - that is the constructor you're supposed to use to construct a string from a null-terminated C string. You're dealing with binary data here so there is a chance that you're either don't get the full buffer into the string because it encounters a null terminator in the middle of the buffer, or it runs off the end of the buffer until it finds a null (or a seg fault). If you absolutely, positively must use a std::string, use the "correct" constructor, which would be `std::string data(buffer, length);`.

All that said, you are using the wrong data structure - what you want is a dynamic array of char/unsigned char. That would be a `std::vector`, not a `std::string`. As an aside, you should also pass the parameters to `readFile`and `writeFile` by const reference, the code that you wrote will make copies of the strings and if the buffer you pass into `writeFile()` is large, that will lead to an unpleasant hit in memory consumption and performance, plus it is completely unnecessary.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T14:41:53.917

As the file might contain `'\0'` characters, you should specify the size when you assign the content to the `std::string`.

```
std::string data(buffer, length); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T09:51:50.333

For what it's worth, here's how you could alter `readFile()` and `writeFile()`:

```
std::vector<char> readFile(const std::string& filename)
{
    std::ifstream file;
    file.open(filename.c_str(), std::ios::binary);

    file.seekg (0, std::ios::end);
    const int length = file.tellg();
    file.seekg (0, std::ios::beg);

    std::vector<char> data(length);
    file.read(&data[0], length);
    file.close();

    return data;
}

void writeFile(const std::string& filename, const std::vector<char>& data)
{
    std::ofstream file;
    file.open(filename.c_str(), std::ios::binary);
    file.write(&data[0], data.size());
    file.close();
} 
```

Then you would also change your `compress()` and `decompress()` functions to work with `std::vector<char>`. Also note that so far the code is lacking any error handling. For example, what happens if the file doesn't exist? After calling `file.open()` you can check for any error by doing `if (!file) { /* error handling */ }`.

# asp.net - 在css中对齐div

> ID：15091536
> 
> 赞同：0
> 
> 时间：2013-02-26T14:25:45.857
> 
> 标签：asp.net, css

我正在努力调整`div`并使用我所有的努力`float`并`margins`没有带来我想要的东西。所以我认为这是正确的地方

基本上循环以下内容`Foreach`：

```
<div class="comment_name">@Html.displayName</div>
<div class="comment_time">@Html.formattedDateTime(item.dTime.Value)</div>
<div class="comment_body">@item.displayComments</div> 
```

并尝试显示如下文本：

```
Dispaly Name , 11 Feb 2013: User entered comment. 
```

应该是什么`CSS`让它工作？

***跨度回答后更新***

跨度工作。但是如果评论的长度很长，我会遇到问题。越来越像下面

```
Dispaly Name , 11 Feb 2013:The example will show you how to implement a read-only grid. This article tries to answer the following question 
```

但应该是

```
Dispaly Name , 11 Feb 2013:The example will show you how to implement a read-only grid.
                            this article tries to answer the following question 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T14:28:18.783

您可以`float: left`在每个 div 和`clear: left;`第一个上使用；

演示：http: [//jsfiddle.net/9mfR8/](http://jsfiddle.net/9mfR8/)

```
div {
    border: 1px solid red;
    float: left;
}

.comment_name{    
   clear: left;
} 
```

或者您可以使用`display: inline-block;`三个 div 并将它们包含在一个容器 div 中（`display: block`默认情况下会强制使用“新行”），

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T14:29:09.270

我个人会说使​​用`<span>`s 而不是`<div>`s 因为它们已经是内联元素：

```
<span>@Html.displayName</span>
<span>@Html.formattedDateTime(item.dTime.Value)</span>
<span>@item.displayComments</span> 
```

如果你想坚持`<div>`s 使用：

```
display: inline; 
```

或者如果单个容器具有例如固定宽度：

```
display: inline-block; 
```

* * *

## 编辑

要在更新后的问题中获得结果，您可以使用以下命令：

**HTML**

```
<span>Dispaly Name,</span>
<span>11 Feb 2013:</span>
<span> The example will show you how to implement a read-only grid. This article tries to answer the following question.
</span> 
```

**CSS**

```
span {
    vertical-align: top;
}

span:last-child {
    display: inline-block;
    width: 400px;
} 
```

**演示**

[http://jsfiddle.net/jkZeZ/](http://jsfiddle.net/jkZeZ/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T14:28:16.837

以下应该达到您的要求：

```
.comment_name {
    display: inline-block;
}

.comment_time {
    display: inline-block;
}

.comment_body {
    display: inline-block;
} 
```

# tornado - 无法获取 OAuth2 FB Tornado 示例

> ID：15091537
> 
> 赞同：0
> 
> 时间：2013-02-26T14:25:45.847
> 
> 标签：tornado

这是来自[示例的初始代码](https://github.com/facebook/tornado/blob/master/demos/facebook/facebook.py)

```
class AuthLoginHandler(BaseHandler, tornado.auth.FacebookGraphMixin):
@tornado.web.asynchronous
def get(self):
    my_url = (self.request.protocol+"://"+self.request.host+"/auth/login?next="+tornado.escape.url_escape(self.get_argument("next", "/")))
    print my_url
    if self.get_argument("code", False):
        self.get_authenticated_user(redirect_uri=my_url,client_id=facebook_api_key, client_secret=facebook_secret,code=self.get_argument("code"),callback=self._on_auth)
        print "th"
        print self.get_argument("code")
        return
    self.authorize_redirect(redirect_uri=my_url,client_id=facebook_api_key,extra_params={"scope": "read_stream"})

def _on_auth(self, user):
    if not user:
        raise tornado.web.HTTPError(500, "Facebook auth failed")
    self.set_secure_cookie("user", tornado.escape.json_encode(user))
    self.redirect(self.get_argument("next", "/")) 
```

我不明白的是：

```
if self.get_argument("code", False): 
```

这是什么意思？因为如果我让`self.get_argument("code")`我得到错误，那就是**缺少参数代码**

为什么否定然后调用这个论点`code=self.get_argument("code")`

我检查了文档，我的理解是默认`False`更改！`Strip=True`

你能解释一下代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:05:13.150

将“代码”视为一个标志：“如果用户已通过 Facebook 验证”。

```
If self.get_argument("code", False):
     # Happy we are now authorized by Facebook
     Get the Facebook user who is logged in (and then call '_on_auth')
     return 
(Else): 
     Ask for authorization 
```

Tornado 身份验证代码在[这里](https://github.com/facebook/tornado/blob/master/tornado/auth.py)

简单版本：不要尝试设置“代码”变量——这是 Facebook 要做的。

# multithreading - 当 AudioRecord 运行时，本机线程永远不会获得处理器时间

> ID：15091539
> 
> 赞同：0
> 
> 时间：2013-02-26T14:25:54.837
> 
> 标签：multithreading, android-ndk, android-audiorecord

我正在申请一些语音处理。语音录制使用 Android`AudioRecord`类。该`AudioRecord`实例被放入服务中。一个单独的线程用于调用类的`read()`方法 `AudioRecord`（SO上有足够的例子）。读取的样本被转发到我的本机代码以进行进一步处理，并将它们放入某个队列中。在本机代码中，一个线程正在执行处理。问题是这个线程永远不会得到处理器时间。在完成我的应用程序后，我调用了一些函数来清理我的原生资源。但是碰巧整个清洁过程还没有完成（我使用调用建立了它）。当我再次启动应用程序时，我的本机处理开始（尚未开始读取新样本）。

读取线程是否有可能只为自己使用处理器？我可以为我的本机（处理器）线程设置更高的优先级吗？或者它可能是其他一些问题。

我什至尝试过使用`AudioRecord.OnRecordPositionUpdateListener`但`onPeriodicNotification`没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T16:05:04.663

我找到了解决方案。这是我移植的库中的错误。处理块之一调用`sleep`方法。这个库最初是在windows下使用的，睡眠时间以毫秒为单位。移植后，此时间以秒为单位。所以我的本机线程睡了 50 秒而不是 50 毫秒。

# javascript - 检查容器是否包含特定元素

> ID：15091543
> 
> 赞同：1
> 
> 时间：2013-02-26T14:26:10.853
> 
> 标签：javascript, jquery

我有容器，我正在使用`$(this).parent()`。我想检查这个容器是否包含带有标签的元素`form`。有没有办法用jquery做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T14:27:15.867

```
var container = $(this).parent();
var hasForm = container.find('form').length > 0; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T14:28:10.777

试试这个

```
if ($(this).parent().find('form').length)
   alert('its here') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T14:29:00.003

你可以使用[has](http://api.jquery.com/has/)功能

```
if($this.parent().has('form').length > 0); 
```

# php - 我们如何在 php 中知道 FB 正在阅读我们的页面

> ID：15091544
> 
> 赞同：-1
> 
> 时间：2013-02-26T14:26:13.227
> 
> 标签：php, facebook

我们的 php 代码如何知道 FB 访问我们的网站页面。由于需要在我们的网站页面上添加一些元标记，以便用户在 FB 上共享。

所以我为每个案例添加了元标记。我只想在 FB 访问这些页面时添加它们。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:33:31.750

当 Facebook 爬虫访问你的页面时，它会给你一个用户代理`facebookexternalhit/1.1 (+http://www.facebook.com/externalhit_uatext.php)`

因此，要仅在 facebook 爬虫访问时显示打开的图元标记，只需设置一个简单的条件：

```
if ($_SERVER['HTTP_USER_AGENT'] == "facebookexternalhit/1.1 (+http://www.facebook.com/externalhit_uatext.php)") {
  //echo your facebook open graph meta tags
} 
```

# javascript - 合并两个具有共同元素的 JSON 对象

> ID：15091554
> 
> 赞同：4
> 
> 时间：2013-02-26T14:26:42.070
> 
> 标签：javascript, jquery, ajax, json

我有两个 JSON 提要。第一个包含有关课程的基本信息，第二个包含更多管理性质的信息。这是我的意思的一个示例。

**第一的**

```
{"courses":
    {"course":{"id":"4","title":"Using a computer","body":"36"}}
   ,{"course":{"id":"5","title":"Job hunting online","body":"29"}}
} 
```

**第二**

```
{"courses":
   {"4": {"id":4,"name":"Online Basics","title":"Using a computer","shortname":"onlinebasics","height":640,"width":980,"html5":1,"url":"\/sites\/default\/files\/courses\/onlinebasics\/wrapper.html","started_on":"","bundle_only":true,"progress":false,"completed_on":"2012\/10\/31 00:12:39","on_planner":true}
   ,"5": {"id":5,"name":"Online Basics","title":"OB2 Job hunting online","shortname":"onlinebasics","height":640,"width":980,"html5":1,"url":"\/sites\/default\/files\/courses\/onlinebasics\/wrapper.html","started_on":"","bundle_only":true,"progress":false,"completed_on":"2012\/11\/24 02:14:51","on_planner":false}
   }
} 
```

**期望的输出**

```
{"courses":
    {"course":{"id":"4","title":"Using a computer","body":"36","name":"Online Basics","title":"Using a computer","shortname":"onlinebasics","height":640,"width":980,"html5":1,"url":"\/sites\/default\/files\/courses\/onlinebasics\/wrapper.html","started_on":"","bundle_only":true,"progress":false,"completed_on":"2012\/10\/31 00:12:39","on_planner":true}}
} 
```

我希望增加一个“期望的输出”选项会让它更容易理解。即使我只将 1 个示例放入所需的输出区域，我也希望将所有 id 匹配的记录合并。

有什么建议么？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T14:49:38.343

```
$.when($.get("feed1.json"), $.get("feed2.json")).done(function(basics, admin) {
    var basiccourses = basics[0].courses,
        admincourses = admins[0].courses;
    // merge all basic course objects into the admin courses object
    for (var i=0; i<basiccourses.length; i++) {
        var basic = basiccourses[i];
        if (basic.id in admincourses)
            // by extending the course object
            $.extend(admincourses[basic.id], basic);
        else
            // or just copying it over
            admincourses[basic.id] = basic;
    }

    // now admincourses has all information combined
}); 
```

# android - 为照片命名（日期）

> ID：15091557
> 
> 赞同：0
> 
> 时间：2013-02-26T14:26:51.390
> 
> 标签：android, android-camera, android-photos

我正在为我拍照的andorid开发一个应用程序。问题是我只以毫秒为单位保存 conseguidor 当前时间，我想输入当前日期（dd / mm / yyyy）。

这是我的代码：

```
PictureCallback jpegCallback = new PictureCallback() 
{
    public void onPictureTaken(byte[] data, Camera camera)
    {
    FileOutputStream outStream = null;
    try
        {               
    outStream = new FileOutputStream(String.format("/mnt/extSdCard/Photos/%d.jpg", System.currentTimeMillis()));    
    outStream.write(data);
    outStream.close();

    } catch (FileNotFoundException e) {
            e.printStackTrace();
    } catch (IOException e) {
            e.printStackTrace();
    } finally {
        }

}
}; 
```

我试图把这个，但不工作我得到错误：

```
Calendar c = Calendar.getInstance();
String day = Integer.toString(c.get(Calendar.DATE));
String month = Integer.toString(c.get(Calendar.MONTH));
String year = Integer.toString(c.get(Calendar.YEAR));

String name = day + "/" + month + "/" + year + ".jpg";
String folder = "/mnt/extSdCard/Photos/";
String path = folder + name;

...

outStream = new FileOutputStream(String.format(path));  
outStream.write(data);
outStream.close(); 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:32:22.790

您应该从 Environment 创建文件夹字符串：

字符串文件夹 = Environment.getExternalStorageDirectory() + "/Photos/";

然后确保照片作为文件夹存在。否则，您应该创建它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T23:14:11.880

您不能在文件名中使用“/”。系统将其解释为一组目录，除非您提前创建了所有目录，否则您将收到此错误。例如，如果是 2014 年 1 月 1 日，您的文件名将是：/mnt/extSdCard/Photos/01/01/2014.jpg。

您需要创建 01/01 目录，或者将分隔符更改为其他内容，例如“_”或“-”。

此外，如果没有至少要使用它的设备白名单，请勿对 /mnt/extSdCard 进行硬编码。它不存在于许多设备上，包括所有 Nexus 设备。

# c++ - 通过 CRTP 基类覆盖虚函数

> ID：15091558
> 
> 赞同：2
> 
> 时间：2013-02-26T14:26:54.033
> 
> 标签：c++, polymorphism, virtual-functions, crtp

**旧：**如何通过 CRTP 基类覆盖虚函数？

```
struct I { virtual void foo() = 0; };

template<class D>
struct B { void foo() { } }; // provides implementation of foo in D

struct D : I, B<D> { }; // D has an implementation of foo that should override I

int main() { D d; } 
```

`Error: unimplemented pure virtual method 'foo' in 'D'`

**更简单：**如何在不以派生类型重新实现虚函数的情况下覆盖虚函数？（我猜这个问题违背了虚函数的定义）。

```
struct I { virtual void foo() = 0; };

struct B { void foo() { } };

struct D : B, I { };

int main() { D d; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T14:37:52.593

除了明显但笨拙的`void foo() { B::foo(); }`解决方案之外，您还可以将“实现一个`foo`”接口与更完整的接口分开`I`：

```
struct FooInterface {
    virtual ~FooInterface() {}
    virtual void foo() = 0;
};

struct I : public virtual FooInterface {};

template<class D>
struct B : public virtual FooInterface { void foo() { } };

struct D : I, B<D> {};

int main() { D d; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T14:31:54.897

您不必要地混合了两个不同的概念：crtp 和继承虚函数的实现

crtp 用于编译时多态，虚函数用于运行时多态

也就是说，您可以通过在虚拟继承层次结构中**占主导地位**来继承虚拟函数的实现，这大致产生了 java/c# 实现继承的效果

* * *

例子：

```
struct tutti_i
{
    virtual int frutti() const = 0;
};

struct tutti_impl_1
    : virtual tutti_i
{
    int frutti() const override { return 42; }
};

struct base
    : virtual tutti_i
{};

struct derived
    : base
    , tutti_impl_1
{};

#include <iostream>
int main()
{
    tutti_i&& tutti = derived();
    std::cout << tutti.frutti() << std::endl;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T14:36:41.833

您可以实现`D::foo()`为一个简单的包装调用`B<D>::foo()`. 如果你有很多地方需要这样做，你可以做一个宏来帮忙，比如：

```
#define WRAP(CLASS, METHOD) \
    METHOD() { return CLASS::METHOD(); }

struct D : I, B<D>
{
    void WRAP(B<D>, foo);
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-24T05:34:21.107

对于那些不关心 B 是否继承自 I 的人，您也可以按照最初的要求使用 CRTP 实现这一点：

```
struct I { virtual void foo() = 0; };

template <class D>
struct B : I { void foo(){ /* Do something fancy with D's type */ } };

struct D : B<D> { }; 
```

如果您需要进一步继承以使 foo 的实现始终是最派生的类型，您可以引入一个中间类型来消除使用 foo 的哪个实现的歧义：

```
struct I { virtual void foo() = 0; };

template <class T>
struct B : virtual I { void foo() { /* Do something fancy with the most-derived type */ }};

struct D : B<D> { };

template <typename Base, typename Derived>
struct InheritFrom : public Base, public B<D> { void foo() { B<D>::foo(); } };

struct FurtherDerived : InheritFrom<D, FurtherDerived> { }; 
```

# javascript - JavaScript - 堆叠图像的循环迭代延迟

> ID：15091561
> 
> 赞同：0
> 
> 时间：2013-02-26T14:27:02.070
> 
> 标签：javascript, for-loop, iteration, z-index, settimeout

我有一组图像，每个图像都有不同的 Z 索引。顶部的“卡片”将依次排在 Z-index 最低的卡片下方（我们称之为“image1”），直到“image1”出现在其他卡片之上。这是一个动画，但我无法让 for 循环以设定的时间进行迭代。我现在想在 1 秒内尝试 30 张图像。这是代码：

* * *

```
function placeImage(x) {
    var div = document.getElementById("div_picture_right");
    div.innerHTML = ""; // clear images

    for (counter=1;counter<=x;counter++) {
        var image=document.createElement("img");
        image.src="borboleta/Borboleta"+counter+".png";
        image.width="195";
        image.height="390";
        image.alt="borboleta"+counter;
        image.id="imagem"+counter;
        image.style.backgroundColor="rgb(255,255,255)"
        image.style.position="absolute";
        image.style.zIndex=counter;
        div.appendChild(image);
    }
};

var animaRight = function(x) {
        var imageArray = [];
        for (counter=1;counter<=x;counter++) {
            imageArray[counter-1] = document.getElementById("imagem"+counter);
        }
    function delayLoop(x) { 
        for (counter=imageArray.length;counter>1;counter--) {
            if (imageArray[counter-1].style.zIndex==counter) {
                imageArray[counter-1].style.zIndex-=counter;
                setTimeout("delayLoop()", 1000/x);
            }           
        }
    }
    delayLoop(x);
}; 
```

* * *

任何帮助我都会非常感激！我尝试了一些**setTimeout**函数，但恐怕我做错了（可能是放置？）。如果需要，我将使用我尝试过的内容编辑代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:45:18.530

那是你要的吗 ？

```
var animaRight = function(x) {
    var imageArray = [];
    for (counter=1;counter<=x;counter++) {
        imageArray.push(document.getElementById("imagem"+counter));
    }
    for (var i=0; i<x; i++) {
        (function(i) {
            setTimeout(function(){
                imageArray[i%imageArray.length].style.zIndex=i*-1
            }, i*1000);
        })(i);
    }
}; 
```

如果它做你想要的，我会解释更多。

# azure - 如何在 Azure 上托管 html 应用程序

> ID：15091565
> 
> 赞同：7
> 
> 时间：2013-02-26T14:27:12.817
> 
> 标签：azure, hosting, web-hosting, azure-blob-storage

我有一个使用大量 jQuery 的单页 html 应用程序。应用程序内容（数据为 xml 和媒体音频/视频/图像）是（并且必须）由 azure 帐户上的 blob 提供。我不需要任何应用程序服务器。

在 Windows Azure 环境中托管此类单页 html 应用程序的推荐方法是什么（Azure 是必需的）。

由于我不需要任何应用程序服务器，所有应用程序文件当前都作为具有适当内容类型的 Blob 上传到单个容器中。这一切都很好。

不过，我看到 Azure 有一些网站托管功能，我一直想知道我所做的是否合适？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T17:39:07.133

[Windows Azure 网站](http://www.windowsazure.com/en-us/home/scenarios/web-sites/)运行良好，并且在此期间可以免费使用。如果[免费产品的限制](http://www.windowsazure.com/en-us/pricing/details/#header-1)对您不起作用，您可以轻松扩展。

你也可以将主页存储在 Azure blob 存储中，但这意味着用户必须拥有它的完整路径，因为没有服务器配置来指定默认页面。不过，通过来自 bit.ly 等的虚 URL 公开您的站点端点可能不会成为问题。

但请注意，通过将所有内容都存储在 blob 存储中，您会为每个图像、每个页面、每个脚本访问（没有缓存在浏览器上）产生交易成本。根据您的站点和流量的性质，利用 Windows Azure 网站之类的东西来实现其中的一些可能更具成本效益。

# forms - ASP经典，发布行数据并将行分组为id

> ID：15091568
> 
> 赞同：0
> 
> 时间：2013-02-26T14:27:18.533
> 
> 标签：forms, post, asp-classic

我有以下html表：

```
ID | a      | b      | c
------------------------------
1  | valuea | valueb | valuec
2  | valuea | valueb | valuec 
```

每列都有一个值的输入框（除了id）

```
<input name = "1_a" value = "valuea" />
<input name = "1_b" value = "valueb" />
<input name = "1_c" value = "valuec" />

<input name = "2_a" value = "valuea" />
<input name = "2_b" value = "valueb" />
<input name = "2_c" value = "valuec" /> 
```

我将此提交到一个 asp 经典页面，该页面将使用 sql 表中的属性更新每一行。

目前，我需要将名称字符串拆分为 1"_"a 以获得正确的行（1,2）和属性（a，b，c）......有更好的方法吗？

类似于：

```
<input name = "2[a]" /> 
```

然后在我的 asp 经典中，我将拥有一个包含所有帖子数据的数组，如下所示：

```
[1] =>
    "a" => "valuea"
    "b" => "valueb"
    "c" => "valuec"
[2] =>
    "a" => "valuea"
    "b" => "valueb"
    "c" => "valuec" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:33:57.830

在 asp classic 中，如果有多个同名输入，它将以类似字符串结构的数组形式返回。也许你可以使用这种分组。

看看这个[帖子](https://stackoverflow.com/questions/2839227/variable-number-of-input-fields-in-classic-asp-form)

# grails - groovy中不同类型的null

> ID：15091570
> 
> 赞同：0
> 
> 时间：2013-02-26T14:27:25.413
> 
> 标签：grails, groovy, grails-orm

我有一个看起来像这样的方法：

```
static UserEvent get(long userId, long eventId) {
     UserEvent.find 'from UserEvent where user.id=:userId and event.id=:eventId',
            [userId: userId, eventId: eventId]
} 
```

我用一些测试数据调用它两次：

```
 println UserEvent.get(1, 1) //I know this has value
    println UserEvent.get(1,2) //I know this does not 
```

上述两个语句导致：

```
scheduler.UserEvent : null
null 
```

**问题**

有什么区别？我怎样才能写一个If条件来判断某事是否存在..

**更新**

我正在创建这样的对象：

```
def event = Events.findById(params.eventid)
def user = User.findById(params.userid)

UserEvent.create(user, event, true) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:55:48.130

@tim_yates 是对的，检索到的对象没有 id 属性。看起来像是 M 对 M 的关系。

所以在第一种情况下，一个实例被返回，但它的 ID 为空。在第二种情况下，找不到对象。

你可以使用类似的东西：

```
def ue = UserEvent.get(userId, eventId)
if (ue && ue instanceof UserEvent) { //do something } 
else { //do something else } 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T16:25:43.420

第一种情况返回一个 UserEvent 的实例，它在 if 语句中应该返回 true。第二种情况返回 null，它在 if 语句中应该返回 false。

# javascript - 不使用 php 传输 js var

> ID：15091575
> 
> 赞同：0
> 
> 时间：2013-02-26T14:27:33.623
> 
> 标签：javascript, jquery, variables

在**index.html**中打开它时背景会随机变化

```
var imgArr=['background.jpg', 'backgrounds2.jpg', 'backgrounds3.jpg'];
i=Math.round(Math.random()*2);
$('.wrap').css({'background': 'url('+imgArr[i]+') no-repeat fixed'}); 
```

在其他页面中，我不需要更改背景，而是使用 index.html中的
一个我如何从 index.html 中保存一个 var 值并在其他页面中使用它而不进行更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:30:13.840

最简单的方法是在 CSS 中设置默认值 - 然后您的 JS 将覆盖 index.html 上的默认值，如果您从其他页面中省略 js，它将恢复为默认值。

您也可以使用 JS 设置一个 cookie，然后从中读取，但是您仍然需要计划是否有人在没有设置 cookie 的情况下访问页面，所以如果我是您，id 可能会使用 CSS 选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T14:31:50.333

如果您使用任何服务器端语言，请尝试 SESSION 来存储该值。如果您仅使用客户端语言，请尝试使用 cookie 或通过参数将值传递到下一页。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T14:32:02.177

您可以向 index.html 添加一些元素并检查您的 javascript（如果存在），这意味着您在 index.html 页面上，您应该更改背景。例如添加

```
<div id="iamindex"></div> 
```

而你的javascript：

```
if($('#iamindex').length) {
  var imgArr=['background.jpg', 'backgrounds2.jpg', 'backgrounds3.jpg'];
  i=Math.round(Math.random()*2);
  $('.wrap').css({'background': 'url('+imgArr[i]+') no-repeat fixed'});
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T14:41:31.103

您可以使用 cookie`localStorage`甚至更好`sessionStorage`。

```
var imgArr=['background.jpg', 'backgrounds2.jpg', 'backgrounds3.jpg'];
i = Math.floor(Math.random() * imgArr.length);
//fewer harcoded values is better :-)
$('.wrap').css({'background': 'url('+imgArr[i]+') no-repeat fixed'});
sessionStorage.setItem("bg", imgArr[i]); 
```

当然，您应该在尝试访问之前检查存储是否可用，但它在现代浏览器中可用。

# eclipse - Team Explorer Everywhere 无法自动合并冲突，也无法在 Eclipse 中显示解决冲突屏幕

> ID：15091577
> 
> 赞同：3
> 
> 时间：2013-02-26T14:27:39.983
> 
> 标签：eclipse, tfs, team-explorer-everywhere

我们的软件组在 Eclipse Helios 上使用 Team Explorer Everywhere Eclipse 插件我们的操作系统是 Debian Lenny。一些团队成员在有冲突的更改以及获得最新的更改时会遇到一些奇怪的行为。

例如，现在当我们获得最新消息时：

一堆冲突又回来了

“无法执行获取操作，因为您有一个冲突的属性 +x”错误。

然后另一群回来

“无法执行获取操作，因为您有一个冲突的编辑”错误。

然后在所有这些警告消息下方，eclipse 显示以下错误：

“解决多个冲突需要单一的解决类型”。

eclipse 没有显示解决冲突屏幕，而是什么都不做，每次我们得到最新的信息时，我们都会收到这些错误消息，所以我们盯着屏幕对如何修复这个错误一无所知。

冲突的属性 +x 错误让我认为源代码管理和工作区之间存在一些权限冲突，尽管我不太确定我们做错了什么。

有人可以阐明这里可能存在的问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-01-28T18:14:52.230

这似乎是一个错误。我一直得到这个，并使用两种解决方法：

1）转到每个冲突的文件并执行“获取最新”。当您逐个文件而不是项目范围执行此文件时，任何冲突的文件都将显示“解决”窗口。

2）在项目级别，而不是“获取最新”执行“获取特定版本”并选择“最新”并带有强制下载选项。该选项通常是一个带有“强制获取文件版本...”之类的文本的复选框。

# vb.net - Visual Studio 注册控制库

> ID：15091585
> 
> 赞同：0
> 
> 时间：2013-02-26T14:27:55.923
> 
> 标签：vb.net, visual-studio-2010, com, registry

我正在 Visual Studio 2010 中编写 Windows 窗体控件库。我选中了注册为 COM 元素的框。构建解决方案还会将此添加到注册表中。我现在正在编写一个 .bat 脚本来将输出 .dll 添加到其他计算机上的注册表中。关于这一点，我有以下问题。使用 resasm.exe 注册此 .dll 是否与构建解决方案时 Visual Studio 使用的注册过程相同？我用过

```
regasm.exe "pathtodll" \tlb "pathtodll.tlb" 
```

有人可以解释这是否正确，或者可以告诉我 Visual Studio 2010 在构建解决方案时究竟做了什么（在注册 dll 方面）？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:25:45.153

发现我的错误。我在编译选项卡中检查了 com interop 的寄存器。这显然意味着使用 regasm.exe 进行注册是通过以下命令完成的：

```
regasm.exe pathToDll /codebase 
```

我不太清楚为什么，也不是注册表专家。如果有人可以就此命令与我在问题中使用的命令之间的区别提供评论（在轻型操作注册 Com 元素中），请这样做。

至于解决我的问题。这成功了。

# android - 在 Facebook 墙上发帖而不在 android 上显示对话框

> ID：15091591
> 
> 赞同：2
> 
> 时间：2013-02-26T14:28:03.960
> 
> 标签：android, facebook, facebook-graph-api, facebook-rest-api

我正在尝试在 Facebook 墙上发布提要，而无需使用 Facebook Android SDK 打开对话框。我试图找到一种方法，但找不到。谁能告诉他们如何在不打开对话的情况下在后台发帖。

我尝试使用下面的代码

```
public static void PublishToFeedInBackground()
{
     final Bundle _postParameter = new Bundle();
     _postParameter.putString("name", name);
     _postParameter.putString("link", link);
     _postParameter.putString("picture", link_to_image);
     _postParameter.putString("caption", caption);
     _postParameter.putString("description", description);

     final List<String> PERMISSIONS = Arrays.asList("publish_actions");

     if (Session.getActiveSession() != null)
     {
            // Check for publish permissions    
            List<String> _permissions = Session.getActiveSession().getPermissions();
            if (!isSubsetOf(PERMISSIONS, _permissions))
            {
                NewPermissionsRequest reauthRequest = new Session.NewPermissionsRequest(this.GetContext(), PERMISSIONS);
                Session.getActiveSession().requestNewReadPermissions(reauthRequest);
                return;
            }   
     }

    this.runOnUiThread(new Runnable()
    {
        @Override
        public void run() 
        {
            Request request = new Request(Session.getActiveSession(), "me/feed", _postParameter, HttpMethod.POST);

            RequestAsyncTask task = new RequestAsyncTask(request);
            task.execute();
        }
    });
} 
```

但它会发布我的应用页面详细信息，而不是我提供的 *_postParameter*。

我也尝试使用其他 2 种方法，但它没有发布任何内容

```
 Map<String, Object> params = new HashMap<String, Object>();
    params.put("name", name);
    params.put("link", link);
    params.put("picture", link_to_image);
    params.put("caption", caption);
    params.put("description", description);

    JSONObject jfeed = new JSONObject(params);
    final GraphObject _feed = GraphObject.Factory.create(jfeed);

    Request.executePostRequestAsync(Session.getActiveSession(), "https://graph.facebook.com/"+userID+"/feed", _feed, new Request.Callback()
    {
       @Override
       public void onCompleted(Response response) 
       {
            Log.i("tag", response.toString());
       }
   }); 
```

第二种方法是

```
Request.executeRestRequestAsync(Session.getActiveSession(), "stream.publish", _postParameter, HttpMethod.POST); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T10:00:41.690

我发现了问题所在。我没有要求正确的权限，并且图形路径也是错误的。正确的方法是：

```
public static void PublishToFeedInBackground()
{

final Bundle _postParameter = new Bundle();
 _postParameter.putString("name", name);
 _postParameter.putString("link", link);
 _postParameter.putString("picture", link_to_image);
 _postParameter.putString("caption", caption);
 _postParameter.putString("description", description);

     final List<String> PERMISSIONS = Arrays.asList("publish_stream");

 if (Session.getActiveSession() != null)
 {
       NewPermissionsRequest reauthRequest = new Session.NewPermissionsRequest(this.GetContext(), PERMISSIONS);
        Session.getActiveSession().requestNewPublishPermissions(reauthRequest);
 }

this.runOnUiThread(new Runnable()
{
    @Override
    public void run() 
    {
        Request request = new Request(Session.getActiveSession(), "feed", _postParameter, HttpMethod.POST);

        RequestAsyncTask task = new RequestAsyncTask(request);
        task.execute();
    }
});
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:22:50.213

据我所知，这可以通过现在已弃用的 REST api 实现...... [https://developers.facebook.com/docs/reference/rest/](https://developers.facebook.com/docs/reference/rest/)

编辑：这里是您可以用来发布[https://developers.facebook.com/docs/reference/rest/#publishing-methods的功能](https://developers.facebook.com/docs/reference/rest/#publishing-methods)

# android - 使用新课程？Android 游戏开发

> ID：15091602
> 
> 赞同：0
> 
> 时间：2013-02-26T14:28:28.683
> 
> 标签：android, class, object, android-activity, structure

我有一个正在使用surfaceview 开发的游戏。

它具有surfaceview 将采用的常规方法。

```
onDraw(){

Drawing here

 }

updateGame(){

Update logic here

}

run() {

while (isRunning){

onDraw()
updateGame()
}

} 
```

所以目前我有一个启动画面、一个选项屏幕和游戏本身。每个都是一个单独的活动（因此有它自己的类）。

但是每个人都挤在一个班级（甚至是游戏）中，很难看到发生了什么。

在我的选项屏幕中，用户可以执行一些操作（例如单击帮助按钮或设置按钮），但我不确定如何启动另一个类但仍保持在相同的活动中。

即，我想使用我在当前班级中设置的画布并在不同的班级中绘制它。这可能吗？我找不到任何关于这样做的信息。

我了解 java 类的概念，我只是不确定如何将它们应用于我的情况。

还是做我正在做的事情并为每个“部分”创建新活动是一个更好的主意？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T14:53:26.617

使用片段：http: [//developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)

它们将允许您将 Activity 变成一堆更小的、可嵌套的部分。片段代表屏幕的一部分，可以控制自己的行为，就像一个活动一样。它们是在 Honeycomb 中添加的，但 Google 为早期版本提供了支持包。据我所知，谷歌正试图让它们成为标准做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T14:46:23.333

不使用类很难制作游戏。

您应该联系以保留更新活动中视图的代码。但是你应该将你在“updateGame()”中的代码完全抽象到另一个类中。我们将这个类称为业务类（Controller）。她负责组织比赛的进程

然后，如果您有要备份的信息，您应该使用另一个类来访问数据（数据访问层/模型）。

我建议你阅读这个： http: [//www.leepoint.net/notes-java/GUI/structure/40mvc.html](http://www.leepoint.net/notes-java/GUI/structure/40mvc.html)

如果你有很多动画和很多视频，你应该使用像[http://www.andengine.org/这样的框架](http://www.andengine.org/)

带有新活动的示例菜单设置和游戏管理示例：

```
 public class MainActivity extends Activity {

    private static final int CODE_MENU_SETTING = 5;
    private int mTimeGame;
    private Thread mGameThread;
    private boolean isCurrentGame, isPause;
    private Button mStartGameButton;

    private ClassBusinessGame mBusiness;

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        //start button if you want to start the game with a button
        mStartGameButton = (Button) findViewById(/*id button start game*/);
        isCurrentGame = false;
        isPause = false;
        //mTimeGame counts the number of seconds of game
        mTimeGame = 0;
        //the class that controls the game
        mBusiness = new ClassBusinessGame(...); 
        //example thread timer
        mGameThread = new Thread("game thread") {
            public void run() {
                while(isCurrentGame) {
                    //here, your code to update your game, view
                    mTimeGame++;
                    try {
                        Thread.sleep(1000); //pause 1 sec
                    } catch(InterruptedException e) {}
                    while(isPause) {/*load*/} //this is not a good practice to break; loop while paused
                }
            }
        };
    }

    public boolean onCreateOptionsMenu(Menu menu) {
        // here, directly call the Menu Setting Activity
        // attention: here, stop the thread which manage your game
        isPause = true;
        Intent menuIntent = new Intent(this, MenuSettingActivity.class);
        startActivityForResult(menuIntent, CODE_MENU_SETTING); //startActivityForResult to resume game
        return true;
    }

    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        if(requestCode==CODE_MENU_SETTING) {
            //resume game
            isCurrentGame = false;
        }
    }
} 
```

这是一个基本示例，可以进行许多改进，但这是（没有框架的游戏的想法）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T15:05:53.873

嗨，伙计，我认为您需要一个游戏引擎，或者您可以开发一个示例，例如

```
class Screen {
    public void onShow();
    public void onHide();
    public void onUpdate();
    public void onDraw(Canvas canvas);
}

class Engine {
    Screen mScreen;

    public void setScreen(Screen s) {
        mScreen = s;
    }

    ...
} 
```

顺便说一句，Libgdx 是一个不错的选择 [http://code.google.com/p/libgdx/](http://code.google.com/p/libgdx/)

# java - 如何使用 Guavas Splitter 并保留分隔符（没有正则表达式）？

> ID：15091606
> 
> 赞同：5
> 
> 时间：2013-02-26T14:28:30.653
> 
> 标签：java, split, guava

有没有使用 Guavas Splitter 拆分字符串并保留分隔符而不使用正则表达式的简单方法？

就像是

```
String string = "1+2-3*40";
Splitter splitter = Splitter.on(CharMatcher.DIGIT.negate()).retainDelimiters(); 
```

这给了

```
[1, +, 2, -, 3, *, 40] 
```

我知道 Splitter.onpattern() 但这需要我给它一个正则表达式（但这就是我试图避免的）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T12:12:17.770

我认为现在不能在 Guava 中完成，但您可以[提交功能请求](https://code.google.com/p/guava-libraries/issues/list)。顺便说一句，输出是`"1+3**2"`什么？我认为这里的模式是明确的。

# ruby - 如何将字符串列表转换为ruby中的一个字符串？

> ID：15091610
> 
> 赞同：2
> 
> 时间：2013-02-26T14:28:50.460
> 
> 标签：ruby, list

应该如何获取一个列表 `["1","2","3"]` 并将其转换为一个字符串 `"123"`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T14:31:47.623

您可以使用[`join`](http://www.ruby-doc.org/core-2.0/Array.html#method-i-join)：

```
["1","2","3"].join 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T15:12:48.430

只是为了好玩，大多数人不知道我们也可以这样做：

```
%w[1 2 3] * ''
=> "123"

%w[1 2 3] * ','
=> "1,2,3" 
```

使用起来更惯用，`join`但偶尔使用`*`会有所帮助。

`*`也用于重复字符串：

```
def output_header(str)
  puts str, '-' * str.length
end

output_header('Output: some string being output')
output_header('Output: some other string being output') 
```

哪个输出：

```
输出：输出一些字符串
--------------------------------
输出：正在输出的其他字符串
--------------------------------------

```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T14:32:03.040

试试这个：

```
list.join() 
```

如果您想用逗号或其他东西分隔数字，请使用：

```
list.join(',') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T14:36:34.990

只需使用一个简单的连接：`["1","2","3"].join`

结果 ：`"123"`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-26T14:33:42.943

`["1","2","3"].to_s`将数组转换为字符串。谷歌“ruby Array”获取更多数组函数。其他常见的类是 String、Hash、Object 等。谷歌搜索和阅读文档将帮助您快速回答大多数此类问题。

# java - 在 Java 中导入单个类

> ID：15091611
> 
> 赞同：4
> 
> 时间：2013-02-26T14:28:52.947
> 
> 标签：java, import

简单的问题，但即使谷歌搜索了很多，我也找不到答案。

是否可以在包外导入类？

假设我有 2 个文件夹`A`，每个文件夹`B`都有一个`.java`文件，是否可以通过使用子句`import`导入包含在中的类`A`？`import A.Aclass`? 或者只要有关键字就必须使用包语法`import`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T14:55:15.390

是的，可以使用 import 语句导入类。为了更好地理解，我们假设您有三个文件夹`foldera`，其中包含一个名为“”的 .java 文件，包含另一个名为“ ”的 .java 文件，`folderb`以及一个名为“”的 .java 文件。现在，如果要使用“ ”中“ ”的成员数据和操作，可以使用如下所示的语句：`folderc``foldera``ClassA.java``folderb``ClassB.java``folderc``ClassC.java``ClassA.java``ClassC.java``import`

```
import foldera.ClassA 
```

如果要在“ClassC.java”中使用“ClassB.java”的成员数据和操作，也可以使用import语句

```
import folderb.ClassB 
```

根据 java 源文件声明规则，如果类是包的一部分，则该`package`语句必须是源代码文件中的第一行，在`import`可能存在的任何语句之前。在这个例子中，源文件的第一行`"ClassC.java"`必须是`package folderc`因为它位于`folderc`. 同样，源文件的第一行`"ClassA.java"`必须是`package foldera`，源文件的第一行`"ClassB.java"`必须是`package folderb`.

希望现在你对这个概念很清楚！谢谢...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T14:33:28.480

好吧，如果该类被定义为具有 a`package a;`那么您需要使用包名导入该类。如果您有两个包含同名类的包，那么在需要调用它们的类中，您将需要使用完全限定的名称。例如：

```
import a.Foo;
import b.Foo;

public class Bar
{

    public static void main(String[] args)
    {
        a.Foo aFoo = new a.Foo();
        b.Foo bFoo = new b.Foo();
    }
} 
```

或者，如果您有两个具有相同名称的类的包，您可以简单地跳过导入它们，而是使用它们的完全限定名称 (FQN-s)。

如果该类没有`package ...;`，则只需将其导入为：

```
import Foo; 
```

但是，如果您有两个包（来自不同的库），其中包含具有相同 FQN-s 的类，则将选择类路径中的第一个。

请记住，命名包的约定是使用小写字母和类——名称应该以类名中每个单词的大写字母开头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T14:31:36.843

对的，这是可能的。

如果您有以下情况：

包装：PackA

类别：A类

做：

导入PackA.ClassA；//导入类

或者

导入PackA.*；//导入包内的所有类

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T14:34:47.080

是的，您必须使用包语法。

*   导入文件夹内的所有类`A`。

    ```
    import com.pack.A.*; 
    ```

*   在文件夹中导入特定的类`A`。

    ```
    import com.pack.ClassName; 
    ```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T14:35:16.363

是的，可以只导入包

句法

```
import pck.ClassA or import pck.* 
```

# python - QInputDialog 可以显示 TeX 吗？

> ID：15091612
> 
> 赞同：2
> 
> 时间：2013-02-26T14:28:55.437
> 
> 标签：python, math, tex

我想尝试编写一个小应用程序，要求用户输入显示方程的解。我知道如何通过`QInputDialog`. 有没有办法做到这一点，以便在`TeX`风格数学中显示方程？

# linux - linux上的Valgrind：延迟激活开始

> ID：15091613
> 
> 赞同：4
> 
> 时间：2013-02-26T14:28:55.983
> 
> 标签：linux, valgrind, callgrind

使用

`valgrind --tool=callgrind`

在 Linux 上

.....我想将罐装消息传递到我的流程中。但是，对于前 90% 的消息，我想正常处理，无需打磨，以构建地图。然后我想只为最后 10% 的消息激活 valgrind/callgrind。

这可能吗？

也许有一种方法可以在我的 C++ 代码中增加一个计数器，当它达到某个阈值时，激活 valgrind/callgrind。

非常感谢您的反馈。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T15:07:19.567

对的，这是可能的。您必须混合使用`--instr-atstart=no`a`callgrind_control`或“切换功能”( `--toggle-collect`)。后者似乎更适用于您的场景。有关详细信息，请参阅 Valgrind 手册的第[6.2.2 节“限制收集事件的范围” 。](http://valgrind.org/docs/manual/cl-manual.html#opt.toggle-collect)

# django - 对原始模型进行预过滤后，相关对象的 Django Queryset

> ID：15091615
> 
> 赞同：14
> 
> 时间：2013-02-26T14:28:58.733
> 
> 标签：django, django-models

给定一个模型的查询集，我想获得另一个与外键相关的模型的查询集。以 Django 项目文档的 weblog 模式为例：

```
class Blog(models.Model):
    name = models.CharField(max_length=100)
    tagline = models.TextField()

    def __unicode__(self):
        return self.name

class Author(models.Model):
    name = models.CharField(max_length=50)
    email = models.EmailField()

    def __unicode__(self):
        return self.name

class Entry(models.Model):
    blog = models.ForeignKey(Blog)
    headline = models.CharField(max_length=255)
    body_text = models.TextField()
    pub_date = models.DateField()
    mod_date = models.DateField()
    authors = models.ManyToManyField(Author)
    n_comments = models.IntegerField()
    n_pingbacks = models.IntegerField()
    rating = models.IntegerField()

    def __unicode__(self):
        return self.headline 
```

假设我有一个`author`对象，并且我想获取作者写过的每个博客作为查询集。我做类似的事情`author_blogs = [entry.blog for entry in author.entry_set]`。但在这种情况下，我留下了一个列表，而不是一个查询集。有没有一种方法可以直接使用 ORM 查询执行此操作，因此我可以通过自定义条目管理器进行设置`use_for_related_fields = True`并执行类似的操作`author_blogs = author.entry_set.blogs`，并获得查询集延迟评估等的好处？

**编辑的场景和解决方案**

所以，我意识到我的问题的应用与我上面提出的方式略有不同，丹尼尔罗斯曼的情况很有意义。我的情况真的更像`author.entry_set.manager_method().blogs`，其中`manager_method()`返回 Entry 对象的查询集。我接受了他的回答，因为它启发了我找到的解决方案：

```
author_blogs = Blog.objects.filter(entry__in=author.entry_set.manager_method()) 
```

好处是它只使用一个数据库查询。这有点棘手和冗长，所以我认为最好定义`blogs()`为Author的对象方法，返回上述内容。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-26T14:32:36.673

这样做的诀窍是要记住，如果你想要一个博客的查询集，你应该从博客模型开始。然后，您可以使用双下划线语法来跟踪关系。所以：

```
author_blogs = Blog.objects.filter(entry__authors=author) 
```

# internationalization - Xapian - 搜索波兰语字符（结束问题？）

> ID：15091618
> 
> 赞同：0
> 
> 时间：2013-02-26T14:29:07.283
> 
> 标签：internationalization, xapian

我正在使用 xapian 作为我网站的搜索引擎。

最近我发现它不搜索包含波兰语特定字符（如 ś、ą、ć、ę）的单词。

每当我尝试搜索包含这些特定语言字符之一的单词时，它都不会返回任何结果。xapian中是否有任何编码设置？

这些是我的索引和搜索功能（$document 有 content、id 和 route 字段）。

```
protected function _indexDocument($document, $indexer, $database)
{
    $doc = new XapianDocument();
    $content = Zend_Json::encode($document);
    $doc->set_data($content);

    $indexer->set_document($doc);
    $indexer->index_text($content);
    $term = (string) md5($document['id']);
    $doc->add_boolean_term($term);
    $database->replace_document($term, $doc);
    return true;
}

public function searchDocuments($phrase, $page = 0, $limit = 10)
{
    $page = (int) $page;
    $limit = (int) $limit;

    $database = new XapianDatabase($this->getDatabasePath());
    $enquire = new XapianEnquire($database);
    $qp = new XapianQueryParser();
    $stemmer = new XapianStem("english");
    $qp->set_stemmer($stemmer);
    $qp->set_database($database);
    $qp->set_stemming_strategy(XapianQueryParser::STEM_SOME);
    $query = $qp->parse_query($phrase);

    $enquire->set_query($query);
    $matches = $enquire->get_mset(($page-1) * $limit, $limit);

    $documentCount = $matches->get_matches_estimated();

    $i = $matches->begin();
    $documents = array();
    $rawDocuments = array();
    while (!$i->equals($matches->end())) {
        $n = $i->get_rank() + 1;
        $data = $i->get_document()->get_data();
        $documents[] = $this->_prepareDocument( Zend_Json::decode($data), $phrase );
        $rawDocuments[]= Zend_Json::decode($data);
        $i->next();
    }

    $pageCount = ceil($documentCount / $limit);
    if ($page > 0) {
        $prevPage = ($page - 1) * $limit;
    } else {
        $prevPage = 0;
    }
    if ($page < $pageCount) {
        $nextPage = ($page + 1) * $limit;
    } else {
        $nextPage = $pageCount;
    }
    $result = array('results' => $documents, 'results-raw' => $rawDocuments, 'paginator' => array(
            'page' => $page, 'limit' => $limit, 'pageCount' => $pageCount,
            'prevPage' => $prevPage, 'nextPage' => $nextPage,
            'documentCount' => $documentCount));
    return $result;

} 
```

# push - 亚行推送不工作

> ID：15091626
> 
> 赞同：1
> 
> 时间：2013-02-26T14:29:30.073
> 
> 标签：push, adb, pull

我在使用 adb 推送和拉取操作时遇到问题。

我的 pc os:w7 我可以使用 command-adb shell 进入 shell。我以 root 身份获取 shell 提示符 $。我有权访问文件夹 (rw)。我可以使用 ls 命令列出文件夹内容。现在的问题是 - 我正在使用`adb push D:\myfile.apk /system/app/` 我得到的命令`error:unable to find myfile.apk.` 如果我试图从设备中提取任何文件，则通过显示传输的字节来成功提取，但无法在本地目录中看到提取的文件。

我正在使用 avd 4。

期待有价值的答复...提前谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-02T11:36:11.733

这是推送的正确语法：`adb push "./Path with whitespace/Music" ./sdcard/music`

这是安装 APK 的正确语法：`adb install ./path/application_name.apk`

路径相对于您执行命令的位置

# eclipse - 无法启动 Eclipse Juno 的多个实例

> ID：15091630
> 
> 赞同：1
> 
> 时间：2013-02-26T14:29:41.650
> 
> 标签：eclipse

我在不同的位置安装了多个 Eclipse 版本（F:/eclipse-indigo、F:/eclipse-ganymede、F:/eclipse-juno）。只要我选择不同的工作区，Indigo 和 ganymede 就允许我启动多个实例。启动 Juno 的第二个实例时，我收到错误消息“Java 已启动但返回退出代码 = 1”。

![朱诺错误](../Images/aee6143ee2fdb277a6da34201220305e.png)

我一直在寻找错误，但大多数解决方案都是因为 OP 根本无法启动 Juno。

我可以很好地启动一个实例，但第二个实例甚至不允许我选择不同的工作区。只是上面的错误消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:35:20.150

按此顺序尝试：

*   将您的 Java 安装更新到最新版本。旧 Java 版本中存在导致类似问题的错误：[http ://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7002666](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7002666)

*   显式设置 eclipse.ini 中的 -vm 参数以指向您要使用的 Java 安装（如果有多个）。您的 Eclipse 安装当前使用上次安装的任何 Java（因为那个将自己复制到 system32 文件夹中，根据错误消息从该文件夹开始）。

*   比较 Juno 的 eclipse.ini 和另一个版本。忽略 DLL 和文件名，但看看您是否更改了旧安装中的一些 vm 选项（如内存大小）。如果是这样，请将这些设置复制到您的 Juno eclipse.ini 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T14:50:26.580

您是否尝试过通过将工作空间作为参数来显式启动 Juno，如下面的快捷方式：

> F:\eclipse-juno\eclipse\eclipse.exe -数据 F:\eclipse-juno\ws1

如果这确实有效，那么在开始时选择工作区就有问题（在 Juno 中）。我一直在尝试通过创建批处理文件或类似上面的快捷命令来明确我想要运行 Eclipse 的工作区。

有关典型的命令行选项，请参阅[此答案](https://stackoverflow.com/questions/3814086/eclipse-canonical-list-of-command-line-options)。

# jquery - 避免在 document.ready 触发 .change() 事件

> ID：15091636
> 
> 赞同：0
> 
> 时间：2013-02-26T14:30:04.893
> 
> 标签：jquery, linked-list, onchange, dynamic-data, document-ready

我有一个机构数据库。每个机构（除其他外）都有 3 个带有动态/ajax 选项的链式选择：
- 国家
- 州
- 位置

添加代理时：如果用户更改国家/地区选择，则其`.change()`事件会触发并在“州”选择中加载该国家/地区的状态，依此类推。

当用户修改机构的信息/数据时，就会出现问题。我在各自的选择中加载（使用 php）当前机构的国家、州和位置，但是当`(document).ready`触发时，选择会改变。

**尽管我想保持`change`每个动态链接选择的事件动态工作，但我该如何避免`.change()`被解雇`(document).ready`？我的意思是，“第一次”事件触发**

链式选择的代码
[http://jsfiddle.net/LWPVm/](http://jsfiddle.net/LWPVm/)

也许是另一个想法？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:37:12.077

```
$(document).load(function(){
   $db.change(function(){
      event.stoppropagation();
}); 
```

将停止传播。页面加载时应该可以工作。注意不要在 document.ready() 时调用此函数，因为传播将整体停止，您也可以使用：

```
$db.change(function(){
   event.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T14:45:05.223

我可以通过删除最后一个 .change(); 来解决这个问题。调用每个函数。
这个 .change 强制在 (document).ready 触发事件。我现在记得我需要这样链式选择才能正常工作。希望这对其他人有用。

```
jQuery('#selProvincia').change(function(){
var val = this.value;
jQuery.post('<?php echo site_url("funciones_ajax/obtener_departamentos"); ?>/'+val, 
    {  },
    function(data) {
        var sel = jQuery("#selDepartamento");
        sel.empty();
        for (var i=0; i<data.length; i++) {
            sel.append('<option value="' + data[i].id + '">' + data[i].nombre + '</option>');
        }
    }, "json"); }).change(); 
```

# sql - SQL Server 2008 SSIS：错误地导入日期字段（来自 Oracle）

> ID：15091642
> 
> 赞同：3
> 
> 时间：2013-02-26T14:30:23.877
> 
> 标签：sql, sql-server-2008, import, ssis

我必须导入的文件 (CSV) 中的日期字段格式`DD-MMM-YY`为 ，SQL Server 将它们导入为`YY-MM-DD`. 所以`01-FEB-13`导入为`2001-02-13`.

如何更改 SQL 用于导入日期的格式？

我无权访问原始 Oracle 数据库，只能访问从中导出的平面文件。所以我所做的几乎所有事情都必须在 SQL 中完成。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T18:50:16.857

更改 SQL Server 默认使用的日期格式需要修改 Windows 服务器文化设置。**这不是**一个好主意，特别是如果这是您遇到此问题的唯一文件。

我将使用脚本转换和 .NET Framework 的[DateTime.ParseExact](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)方法，它可以让您完全控制预期的格式。首先配置您用于读取 CSV 文件的平面文件连接管理器，以便将具有 DD-MMM-YY 日期的列`DataType`设置为`string`or`Unicode string`而不是`date`，`database date`或任何其他特定于日期的类型： ![在此处输入图像描述](../Images/0cb81da158c85a007edc1cf9af3328ed.png)

在您的数据流中，在源组件和目标组件之间放置一个脚本转换，如下所示： ![在此处输入图像描述](../Images/c50f0a8edc4e036af933524199b28dbb.png)

选择每个 DD-MMM-YY 日期列作为脚本转换的输入： ![在此处输入图像描述](../Images/83b29f6d8dc36019208f890d51ee5728.png)

并创建一个与每个输入`DataType`列`date`对应的输出列： ![在此处输入图像描述](../Images/d046aa3bf3294d03c63cdc58688818ba.png)

脚本转换代码将如下所示（使用 C#）

```
using System;
using System.Data;
using System.Globalization; // needed for CultureInfo.InvariantCulture
using Microsoft.SqlServer.Dts.Pipeline.Wrapper;
using Microsoft.SqlServer.Dts.Runtime.Wrapper;

[Microsoft.SqlServer.Dts.Pipeline.SSISScriptComponentEntryPointAttribute]
public class ScriptMain : UserComponent
{
    public override void IncomingRows_ProcessInputRow(IncomingRowsBuffer Row)
    {
        string incomingFormat = "dd-MMM-yy";
        Row.ConvertedCreateDate = DateTime.ParseExact(
            Row.CreateDate, 
            incomingFormat, 
            CultureInfo.InvariantCulture);
        Row.ConvertedLastUpdateDate = DateTime.ParseExact(
            Row.LastUpdateDate, 
            incomingFormat, 
            CultureInfo.InvariantCulture);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T14:36:31.500

您可以使用 oracle 中的 to_char() 函数来格式化您的日期，以便它们采用您想要的格式。希望 Gordon 关于存储为文本的评论指的是临时表。出于各种原因，无论如何，您的第一次导入都应该是临时表。

# spring - HibernateTemplate save 执行插入但不更新

> ID：15091643
> 
> 赞同：0
> 
> 时间：2013-02-26T14:30:28.750
> 
> 标签：spring, hibernate, transactions

我有一个典型的 Spring / Hibernate 设置。这是我的弹簧配置：

```
<context:annotation-config />

<context:component-scan base-package="com.myco.myapp.modules" />

<tx:annotation-driven transaction-manager="transactionManager"/>

<bean id="sessionFactory"
...     
</bean>

<bean id="transactionManager"
    class="org.springframework.orm.hibernate3.HibernateTransactionManager">
  <property name="sessionFactory" ref="sessionFactory" />
</bean> 
```

我有一个 BaseRepository：

```
@Transactional(propagation = Propagation.MANDATORY)
public final T save(final T entity) throws RepositoryException {
    try {
        getHibernateTemplate().save(entity);
        return entity;
    } catch (DataAccessException e) {
        throw new EntityCouldNotBeSavedException(getPersistentClass(),
            e);
    }
} 
```

以及一个扩展它的 Repository 类：

```
@Repository
public class PersonRepositoryImpl extends BaseRepositoryImpl<Person, String> 
```

和服务：

```
@Service
public class PersonServiceImpl {
  @Autowired
  private PersonRepository _personRespository; 
```

我调用以下方法 saveSomeStuff()，当我使用 BaseRepository.save() 插入时，它工作得很好。但是当我尝试更新时，它并没有做出改变：

```
@Override
@Transactional
public void saveSomeStuff() {

    try {

        Person existingPerson = _personRespository.findById("1");

        existingPerson.setName("John");

        _personRespository.save(existingPerson);

        Person dbExistingPerson = _personRespository.findById("1");

        // This prints "John".
        System.out.println(dbExistingPerson.getName());

        Person newPerson = new Person();
        newPerson.setName("Jack");
        _personRespository.save(newPerson);

    } catch (RepositoryException e) {
        e1.printStackTrace();

    }
} 
```

我想我可能有一个跨种族问题，但正如我所说，在离开 Service 方法后，新的 Person 被持久化在数据库中。在日志中我看到：

插入人...

但是，我做的更新并没有持久化，日志中也没有错误，也没有'update' sql语句。我认为 HibernateTemplate.save() 方法可能是问题，但在 saveSomeStuff() 方法中，从数据库加载 Person 后，我执行 System.out，从数据库加载的 Person 具有更新的名称。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:35:05.943

有一个单独的方法，`saveOrUpdate(entity)`。如果你不想让hibernate在保存时生成id，你可以使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T19:00:13.823

Save 方法将持久化一个实体。如果不存在，将分配一个标识符。如果是这样，它本质上是在进行更新。返回生成的实体 ID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T12:39:35.270

想通了问题。如果我包含了我的 Entity 类，那么有人可能会比我更早看到它。

```
@Entity
@Cache(usage = CacheConcurrencyStrategy.READ_ONLY)
@Immutable
@Table(name = "PEOPLE")
public class Person {
  ...
} 
```

最初我收到缓存错误：

```
java.lang.UnsupportedOperationException: Can't write to a readonly object 
```

快速解决方案？添加@Immutable 注释。但是，如果您阅读它的文档：

```
An immutable entity may not be updated by the application. 
Updates to an immutable entity will be ignored, but no exception is thrown. 
```

这就解释了为什么 1) 更新被忽略和 2) 没有抛出异常。

所以我摆脱了@Immutable 注释并将Cache 更改为：

```
 @Cache(usage = CacheConcurrencyStrategy.READ_WRITE) 
```

现在一切正常。

总结：rtfm。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-21T15:02:49.960

我偶然发现了同样的问题。实体被插入到数据库中，但是在更新一些未更新的列时，日志中没有错误。通过实体类后，我发现我已经注释了我的一些字段，如下所示

```
@Column(name = "CREATED_DT", updatable = false)
private Date createdOn; 
```

从注释中删除可更新属性后，更新工作正常。

# android - Android ListView 适配器数据，保持一致性

> ID：15091645
> 
> 赞同：0
> 
> 时间：2013-02-26T14:30:29.633
> 
> 标签：android, listview, adapter, consistency

当您创建自定义适配器扩展`ArrayAdapter<T>`时，它通常具有以下形式：

```
public class ListAdapter extends ArrayAdapter<Item> {

    private List<Item> mData;

    public ListAdapter(Context context, int resource, List<Item> data) {
        super(context, resource, data);
        mData = data;
    }
} 
```

数据最初保存在私有成员`mData`中，但也`ArrayAdapter`将数据保存在自己的成员`mObjects`中。我很确定这些不是实际副本，而是对同一列表的引用。
现在，**这是我的问题**，如果在*ListView*处理过程中，由于某种原因，您必须将自己的列表替换为新的列表，我认为您也应该这样做：

```
mData = new List<Item>();
super.clear();
super.addAll(mData); 
```

否则ListView会没有一致性，getFilter().filter()之类的方法也不起作用。

**我对么？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T15:11:11.783

我想，当你说 mData = data; 它只复制数据数组的指针，因为当你执行它时；

```
ListAdapter adapter = new ListAdapter(context, resource, data);
data.clear();
adapter.notifyDataSetChanged(); 
```

它更改列表。所以它保持你的源数组的指针，

其次，我认为（不确定）您不能使用适配器的过滤器功能，至少我不能使用和编写自己的过滤器功能。我从 sqlite 过滤元素（我从数据库中获取我的元素）。并使用适配器的 notifyDataSetChanged 功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T15:10:45.843

你说的对。您`ListAdapter`不会对提供的`Items`. 这意味着在`Item`“外部”更改实例`ListAdapter`将使`ListAdapter`处于无效状态。

但是，您可以通过调用`notifyDataSetChanged`.`ListAdapter`

```
List<Item> itemList = ....
....
....
ListAdapter adapter = new ListAdapter(this, R.layout.somelayout, itemList);
.... 
```

现在，如果您在 ListAdapter 的“外部”更改项目，您仍然可以使您的 ListAdapter 与更改同步：

```
itemList.get(idx).changeSomethingInItem("Hello"); // Changes the Item at index 'idx'.
adapter.notifyDataSetChanged();                   // Notify adapter about this change. 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-26T14:52:29.170

你真的不需要很确定它是否实际复制，只需扩展 BaseAdapter

# git - git clone 后无法通过 FTP 或 cPanel 创建文件夹

> ID：15091646
> 
> 赞同：0
> 
> 时间：2013-02-26T14:30:30.663
> 
> 标签：git, ftp, cpanel

我目前正在开发一个具有两个环境的php项目（基于drupal）：开发和实时。我的工作流程：在开发时编辑 -> 提交 -> 推送到 github -> 克隆（首先）/实时拉取。

到目前为止，一切都很好。我克隆了最新版本并复制了数据库。但是当我尝试上传实时环境的设置文件或创建上传文件夹时，我得到

`553 Can't open that file: Permission denied`和`550 Can't create directory: Permission denied`

然后尝试通过 cPanel 文件管理器创建文件夹，但仍然得到“权限被拒绝”。

有人知道发生了什么吗？如果有帮助，我通过 ssh 克隆。希望我没有在这里创建副本，但我找不到任何相关的东西。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T16:45:27.337

好的，可能/希望没有人会遇到它，因为它与以 root 用户身份登录和作为 root 用户身份登录有关，我可能应该考虑过这一点。**但**无论如何，这就是答案。

Dev 和 live 环境有两个不同的用户，自己的 cPanel 登录、ftp 等。我们称他们为*duser*和*luser*。一切都很好，直到这里。两个环境都在同一台服务器上。

但是我记得我第一次想在dev环境上安装git时，我没有权限。所以我以root身份登录并安装了git。然后当我以*duser*身份重新登录并想使用 git 时，我仍然没有权限。所以从那以后我总是以 root 身份登录才能使用 git。（也许我可以而且应该将我的服务器配置为能够使用 git 作为*duser*和*luser*。）

**长话短说：** `git clone`作为 root，所有克隆的文件和文件夹都归 root 所有。所以我的 cPanel 和 ftp 用户无权更改任何内容。用于`chown`修复用户和组，一切正常。

# symfony - Symfony - 使用具有多个值（或 ENUM）的 varchar 字段进行 JOIN

> ID：15091647
> 
> 赞同：0
> 
> 时间：2013-02-26T14:30:31.103
> 
> 标签：symfony, join, doctrine

我有一张这样的桌子：

![初始表设计](../Images/3d75e285438d4b052f113d0902d0c9a5.png)

这个想法是基于“allowed_to_copy_id”字段，我将允许复制项目。

在上面的示例中，类别 #1 中的项目只能在类别 2 中复制（“id”和“allowed_to_copy_id”之间的关系）。

所以，在 ../Entity/Category.php 我有这个：

```
 /**
 * @ORM\ManyToOne(targetEntity="Category", inversedBy="sourceRestore")
 * @ORM\JoinColumn(name="allowed_to_copy_id", referencedColumnName="id")
 */
protected $copyCategory; 
```

好的，一切都很完美！

这是我的问题：

我需要允许将一个类别复制到一个或多个类别......所以我的数据库必须看起来像这样：

![修改表](../Images/7f08f646887d998873ad34dbfc8a1010.png)

我在获取 copyCategory 对象的部分迷失了......从逻辑上讲，我有 get + set 函数，但我不明白如何告诉我的 webapp 现在我不只有 1 个类别目的... ：（

有任何想法吗？

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:54:57.627

您需要将其转换为[多对多](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/association-mapping.html#many-to-many-self-referencing)关系。

# chef-infra - 如何将 RVM 食谱与乘客一起使用？

> ID：15091653
> 
> 赞同：0
> 
> 时间：2013-02-26T14:30:56.517
> 
> 标签：chef-infra

我正在尝试使用 Chef-solo 为 RVM 设置食谱。

我的 run_list 看起来像：

```
  “运行列表”：[
    “食谱[apt]”，
    “配方[构建必要]”，
    “食谱[卷曲]”，
    “食谱[用户]”，
    “食谱[rvm::vagrant]”，
    “配方[rvm::system]”,
    “食谱[nginx::passenger]”,
    “食谱[nginx::source]”,
    “配方[postgresql::server]”，
    “食谱[postgresql::client]”
  ]

```

我对 RVM 和 Nginx 的属性：

```
  “rvm”：{
    “红宝石”：[“1.9.3-p0”]，
    “全球”：[“1.9.3-p0”]，
    “流浪汉”：{“system_chef_solo”：“/opt/ruby/bin/chef-solo”}，
    “宝石”：{
      “1.9.3-p0”：[
        {“名称”：“捆绑者”}，
        {“姓名”：“乘客”}，
        {“名称”：“耙子”}
      ]
    }
  },

  “nginx”：{
    “版本”：“1.2.5”，
    “用户”：“部署”，
    “init_style”：“初始化”，
    “模块”：[
      "http_stub_status_module",
      "http_ssl_module",
      “http_gzip_static_module”
    ],
    “乘客”：{
      “版本”：“3.0.18”
    },
    “配置标志”：[
      “--add-module=/var/lib/gems/1.9.1/gems/passenger-3.0.18/ext/nginx”
    ],
    “gzip_types”：[
      “文本/纯文本”，
      "文本/html",
      “文本/CSS”，
      “文本/xml”，
      “文本/javascript”，
      “应用程序/json”，
      “应用程序/x-javascript”，
      “应用程序/xml”，
      “应用程序/xml+rss”
    ]
  },

```

但是，转换中断：

```
==================================================== ===============================

在资源“gem_package[passenger]”上执行操作“安装”时出错

==================================================== ===============================

宝石::安装错误

-----------------

乘客需要耙子 (>= 0.8.1)

资源声明：

---------------------

# 在/tmp/vagrant-chef-1/chef-solo-1/cookbooks/nginx/recipes/passenger.rb

 53：gem_package '乘客'做
 54：操作：安装
 55：版本节点["nginx"]["passenger"]["version"]
 56：gem_binary 节点["nginx"]["passenger"]["gem_binary"] if node["nginx"]["passenger"]["gem_binary"]
 57：结束
 58:

编译资源：

------------------

# 在 /tmp/vagrant-chef-1/chef-solo-1/cookbooks/nginx/recipes/passenger.rb:53:in `from_file' 中声明

gem_package("乘客") 做
  版本“3.0.18”
  包裹名“乘客”
  提供者 Chef::Provider::Package::Rubygems
  重试延迟 2
  动作[：安装]
  重试 0
  食谱名称“乘客”
  食谱名称：nginx
结尾

……

/opt/ruby/lib/ruby/gems/1.8/gems/chef-10.18.2/bin/../lib/chef/application/solo.rb:216:in `run_application'
/opt/ruby/lib/ruby/gems/1.8/gems/chef-10.18.2/bin/../lib/chef/application.rb:72:in `run'
/opt/ruby/lib/ruby/gems/1.8/gems/chef-10.18.2/bin/chef-solo:25
/opt/ruby/bin/chef-solo:19:in `load'
/opt/ruby/bin/chef-solo:19
[2013-02-26T14:22:18+00:00] 致命：Gem::InstallError: gem_package[passenger]（nginx::passenger line 53）有一个错误：Gem::InstallError:passenger requires rake (>= 0.8 .1)
厨师从未成功完成！任何错误都应该在
上面的输出。请修复您的食谱，以便它们正确完成。

```

可以做什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-28T13:59:27.870

这是一个写的指南，使用厨师与乘客一起安装 nginx：[https ://coderwall.com/p/r4lv7w](https://coderwall.com/p/r4lv7w)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T21:06:43.010

Nginx 需要从源代码编译，而 Apache 可以使用 Passenger 模块。这意味着，Nginx 需要知道 RVM gem 中的 Passenger 扩展的来源。

覆盖：`gem_binary`与

```
“乘客”：{
      “版本”：“3.0.18”，
      “gem_binary”：“/usr/local/rvm/wrappers/ruby-1.9.3-p0/gem”
    },

```

应该做的伎俩。

# oracle - 分数等价 Oracle Text / Lucene

> ID：15091658
> 
> 赞同：1
> 
> 时间：2013-02-26T14:31:11.510
> 
> 标签：oracle, lucene

Oracle Text Score 计算的分数和 Lucene 的分数之间是否存在等价关系？您能否混合来源以通过分数获得一个统一的结果集？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T19:31:54.450

Lucene 中的查询或数据更改之间的分数不具有可比性，更不用说与另一种技术具有可比性。通过在索引中添加或删除其他文档，可以显着改变同一文档的 Lucene 分数。以最大值的百分比计分成为显而易见的解决方案，但同样的问题仍然存在，并且另一种技术中的其他算法可能会呈现不同的分布。[你可以在这里](http://wiki.apache.org/lucene-java/ScoresAsPercentages)和[这里](http://article.gmane.org/gmane.comp.jakarta.lucene.user/12076)阅读为什么你不应该像这样比较分数

我设法将类似的东西拼凑在一起的一种方法是从其他数据源获取匹配项，并在[RAMDirectory](http://lucene.apache.org/core/3_6_0/api/all/org/apache/lucene/store/RAMDirectory.html)中创建一个临时索引，然后再次将其与[MultiSearcher](http://lucene.apache.org/core/3_6_0/api/all/org/apache/lucene/search/MultiSearcher.html)结合起来进行搜索。这样，在一次搜索中，所有内容都可以在一个单一的、有凝聚力的数据集上进行评分。评分应该足够合理，尽管这并不是最有效的搜索方式。

# haskell - Snap 框架 - 重复可能会整理

> ID：15091659
> 
> 赞同：3
> 
> 时间：2013-02-26T14:31:13.690
> 
> 标签：haskell, haskell-snap-framework, maybe

我正在将我（有限的）Haskell 知识应用到 Snap Web 框架中，看看我能构建什么。我正在尝试获取一个（可能不存在的）参数并将其解析为一个 int。显然“也许”是我想要的。

在下面的代码中`AppHandler`定义为`Handler App App`（我认为具有两个状态级别的 monad，尽管我现在在教程中找不到任何东西）。`B8`是`ByteString.Char8`和`readInt`返回_`Maybe(Int,ByteString)`

下面的代码有效，但大概应该有一种方法将可能的调用链接在一起（大概是通过[MaybeT](http://hackage.haskell.org/packages/archive/MaybeT/0.1.2/doc/html/Control-Monad-Maybe.html)，因为我已经在 Monad 中了）。链接特别有意义，因为下一步将根据解析的 id 从数据库中获取一行，所以当然这也会返回一个“Maybe a”。显然，这是一种非常普遍的模式。

```
-- Given a parameter name, return the Int it points to
-- or Nothing if there is some problem
maybeIntParam :: ByteString -> AppHandler (Maybe Int)
maybeIntParam pname = do
    raw_param <- getParam pname
    let mb_i_b = maybe (Nothing) B8.readInt raw_param
    case mb_i_b of
        Nothing    -> return Nothing
        Just (p,_) -> return $ Just p 
```

我尝试应用 runMaybeT 但坦率地说，我没有真正了解需要更改的类型，我正在随机更改以希望错误消失。它没有，尽管它改变并从一行到另一行移动。

我将此视为进步，因为我现在完全迷失在一个比我开始探索 Haskell 时更高的水平......

* * *

**编辑**：遍历kosmikus的答案，希望我已经理解了...

```
1 maybeIntParam :: ByteString -> AppHandler (Maybe Int)
2 maybeIntParam pname = do
3     raw_param <- getParam pname
4     return $ do
5       param  <- raw_param
6       (p, _) <- B8.readInt param
7       return p 
```

我想我正试图朝着这个方向努力，但一直试图`getParam`在与其他步骤相同的块内强行。

在第 3 行，对 getParam 的调用发生在 AppHandler 中。我们有 raw_param 这是一个`Maybe ByteString`. 在第 5 行，我们在一个嵌套的 do 中，所以绑定（？）发生在 Maybe monad`param`中，要么是 a`ByteString`要么我们得到`Nothing`，其余的 do 块将短路^*。同样在第 6 行，p 要么是 Int，要么我们短路。

一切顺利，第 6 行`p`包含一个 Int （比如 42），第 7 行将返回`Just 42`. 回到第 4 行，变成`AppHandler (Just 42)`. 现在不需要关心 AppHandler 是什么 - 类型都很高兴。

这里有一些变体也可以进行类型检查，并且可能证明对那些试图思考这一点的人有用。

```
maybeIntParam1 :: ByteString -> AppHandler (Maybe Int)
maybeIntParam1 pname = do
    raw_param <- getParam pname
    let mb_int_param = do
        param  <- raw_param
        (p, _) <- B8.readInt param
        return p
    return mb_int_param

maybeIntParam2 :: ByteString -> AppHandler (Maybe Int)
maybeIntParam2 pname = do
    return $ return 27

maybeIntParam3 :: ByteString -> AppHandler (Maybe Int)
maybeIntParam3 pname = do
    return (Just 27) 
```

在这种情况下，非执行变体实际上看起来更简单。唯一需要考虑的是`<$>`，如果我没看错的话，它是公正`fmap`的，并且适用于`fst`，`Maybe (Int,ByteString)`所以我们可以得到`Maybe Int`。

* * *

^*如果我理解正确，则必须访问后续每一行，但只返回 Nothing，因此实际上不是 goto 样式的快捷方式。 **Edit2**：请参阅下面的 kosmikus 评论 - 懒惰 + 右嵌套意味着我们不需要评估每一行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T15:33:47.730

您可以在`Maybe`这里本地使用 monad：

```
maybeIntParam :: ByteString -> AppHandler (Maybe Int)
maybeIntParam pname = do
    raw_param <- getParam pname
    return $ do
      param  <- raw_param
      (p, _) <- B8.readInt param
      return p 
```

或者，如果您愿意，可以将`Maybe`-computations 编写为单行：

```
maybeIntParam :: ByteString -> AppHandler (Maybe Int)
maybeIntParam pname = do
    raw_param <- getParam pname
    return $ fst <$> (raw_param >>= B8.readInt) 
```

涉及的一些类型：

```
raw_param                          :: Maybe ByteString
B8.readInt                         :: ByteString -> Maybe (Int, ByteString)
raw_param >>= B8.readInt           :: Maybe (Int, ByteString)
fst                                :: (Int, ByteString) -> Int
fst <$> (raw_param >>= B8.readInt) :: Maybe Int 
```

# html - PrimeFaces selectOneMenu 不能内联为纯文本（导致换行）

> ID：15091662
> 
> 赞同：3
> 
> 时间：2013-02-26T14:31:22.160
> 
> 标签：html, css, jsf, primefaces

我们需要编写帮助面板，客户认为在我们解释它们时将实际（无功能）组件嵌入/内联到帮助文本中是值得的（我同意这一点）。

`p:commandButton`这对and没有问题`p:calendar`，但是由于生成的所有 div，每个`p:select*`组件都会导致换行。

这是一个示例页面：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

    <h:head>
        <title>
            D E B U G
        </title>
    </h:head>

    <h:body>

        <h:outputStylesheet library="styles" name="project.css" />
        <h:outputStylesheet library="styles" name="primefaces-global.css" />

        <h:form>

            <h:panelGroup layout="block"
                          styleClass="help-panel">
                <p>
                    The refresh button
                    <p:commandButton icon="ui-icon ui-icon-refresh"
                                     value="(8)"
                                     global="false"
                                     process="@none"
                                     update="@none">
                    </p:commandButton>
                    shows a preview of the number of whatever.
                </p>
                <p>
                    The limit select box
                    <p:selectOneMenu value="#{debugManager.count}"
                                     global="false"
                                     process="@none"
                                     update="@none">
                        <f:selectItem itemValue="#{50}"  itemLabel="50" />
                        <f:selectItem itemValue="#{100}" itemLabel="100" />
                        <f:selectItem itemValue="#{200}" itemLabel="200" />
                        <f:selectItem itemValue="#{500}" itemLabel="500" />
                    </p:selectOneMenu>
                    allows you to limit the number of whatever on this page.
                </p>
            </h:panelGroup>
        </h:form>        

    </h:body>

</html> 
```

这是一个非常简单的bean：

```
@Named
@SessionScoped
public class DebugManager implements Serializable
{
    private static final long serialVersionUID = 1L;

    private Long count = Long.valueOf( 100 );

    public Long getCount()
    {
        return this.count;
    }

    public void setCount( Long count )
    {
        this.count = count;
    }
} 
```

这会产生以下结果：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <!-- local files saved from browser: -->
        <!--link type="text/css" rel="stylesheet" href="debug-Dateien/theme.css">
        <link type="text/css" rel="stylesheet" href="debug-Dateien/primefaces.css">
        <script type="text/javascript" src="debug-Dateien/jquery.xhtml"></script>
        <script type="text/javascript" src="debug-Dateien/primefaces.xhtml"></script-->
        <title>
            D E B U G
        </title>
    </head>
    <body>
        <form id="j_idt6" name="j_idt6" method="post" action="/cmc-compliance/debug.xhtml" enctype="application/x-www-form-urlencoded">
        <input type="hidden" name="j_idt6" value="j_idt6" />
        <div class="help-panel">
            <p>
                The refresh button
                <button id="j_idt6:j_idt9" name="j_idt6:j_idt9" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-left" onclick="PrimeFaces.ab({source:'j_idt6:j_idt9',process:'@none',update:'@none',global:false});return false;" type="submit"><span class="ui-button-icon-left ui-icon ui-icon ui-icon-refresh"></span><span class="ui-button-text">(8)</span></button><script id="j_idt6:j_idt9_s" type="text/javascript">PrimeFaces.cw('CommandButton','widget_j_idt6_j_idt9',{id:'j_idt6:j_idt9'});</script>
                shows a preview of the number of whatever.
            </p>
            <p>
                The limit select box
                <div id="j_idt6:j_idt11" class="ui-selectonemenu ui-widget ui-state-default ui-corner-all ui-helper-clearfix">
                    <div class="ui-helper-hidden-accessible">
                        <select id="j_idt6:j_idt11_input" name="j_idt6:j_idt11_input">
                            <option value="50">50</option>
                            <option value="100">100</option>
                            <option value="200">200</option>
                            <option value="500">500</option>
                        </select>
                    </div>
                    <label id="j_idt6:j_idt11_label" class="ui-selectonemenu-label ui-inputfield ui-corner-all">&nbsp;</label>
                    <div class="ui-selectonemenu-trigger ui-state-default ui-corner-right">
                        <span class="ui-icon ui-icon-triangle-1-s"></span>
                    </div>
                    <div id="j_idt6:j_idt11_panel" class="ui-selectonemenu-panel ui-widget-content ui-corner-all ui-helper-hidden ui-shadow">
                        <div class="ui-selectonemenu-items-wrapper" style="height:auto">
                            <ul class="ui-selectonemenu-items ui-selectonemenu-list ui-widget-content ui-widget ui-corner-all ui-helper-reset">
                                <li class="ui-selectonemenu-item ui-selectonemenu-list-item ui-corner-all">50</li>
                                <li class="ui-selectonemenu-item ui-selectonemenu-list-item ui-corner-all">100</li>
                                <li class="ui-selectonemenu-item ui-selectonemenu-list-item ui-corner-all">200</li>
                                <li class="ui-selectonemenu-item ui-selectonemenu-list-item ui-corner-all">500</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <script id="j_idt6:j_idt11_s" type="text/javascript">$(function(){PrimeFaces.cw('SelectOneMenu','widget_j_idt6_j_idt11',{id:'j_idt6:j_idt11',effect:'fade'});});</script>
                allows you to limit the number of whatever on this page.
            </p>
        </div>
        <input type="hidden" name="javax.faces.ViewState" id="javax.faces.ViewState" value="601711705828338698:-3840718314813237618" autocomplete="off" />
        </form>
    </body>

</html> 
```

结果是：

![在此处输入图像描述](../Images/2b4b5ee4be35eb7c7b0489144d489edc.png)

我试图用 span 替换 div，但这会使选择出现乱码且不起作用。

添加`style="display: inline-block !important;"`到 div 与原来的没有什么不同：

```
 <div id="j_idt6:j_idt11" class="ui-selectonemenu ui-widget ui-state-default ui-corner-all ui-helper-clearfix" style="display: inline-block !important;">
                <div class="ui-helper-hidden-accessible" style="display: inline-block !important;">
                    <select id="j_idt6:j_idt11_input" name="j_idt6:j_idt11_input">
                        <option value="50">50</option>
                        <option value="100">100</option>
                        <option value="200">200</option>
                        <option value="500">500</option>
                    </select>
                </div>
                <label id="j_idt6:j_idt11_label" class="ui-selectonemenu-label ui-inputfield ui-corner-all">&nbsp;</label>
                <div class="ui-selectonemenu-trigger ui-state-default ui-corner-right" style="display: inline-block !important;">
                    <span class="ui-icon ui-icon-triangle-1-s"></span>
                </div>
                <div id="j_idt6:j_idt11_panel" class="ui-selectonemenu-panel ui-widget-content ui-corner-all ui-helper-hidden ui-shadow" style="display: inline-block !important;">
                    <div class="ui-selectonemenu-items-wrapper" style="height:auto" style="display: inline-block !important;">
                        <ul class="ui-selectonemenu-items ui-selectonemenu-list ui-widget-content ui-widget ui-corner-all ui-helper-reset" style="display: inline-block !important;">
                            <li class="ui-selectonemenu-item ui-selectonemenu-list-item ui-corner-all">50</li>
                            <li class="ui-selectonemenu-item ui-selectonemenu-list-item ui-corner-all">100</li>
                            <li class="ui-selectonemenu-item ui-selectonemenu-list-item ui-corner-all">200</li>
                            <li class="ui-selectonemenu-item ui-selectonemenu-list-item ui-corner-all">500</li>
                        </ul>
                    </div>
                </div>
            </div> 
```

**问**：

有没有办法`p:select*`不执行“换行符”？

PS：PrimeFaces 版本是 Mojarra 2.1.14 上的 3.4.2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T21:55:22.790

似乎`<p:selectOneMenu>`正在生成一堆不必要的 div ，你为什么不使用`<h:selectOneMenu>`.

或者您可以添加`.ui-selectonemenu-items-wrapper,.ui-selectonemenu-panel {display:inline}`您的样式。

# c# - Webbrowser Each 控制不同的代理

> ID：15091669
> 
> 赞同：2
> 
> 时间：2013-02-26T14:31:36.157
> 
> 标签：c#, .net, vb.net, proxy, webbrowser-control

我想知道是否可以为应用程序中的每个不同的网络浏览器设置代理（相同的进程）。

我搜索了很多代码来通过修改注册表和另一个特定于进程的代理来更改代理系统范围内的代码。但我希望同一进程中的每个网络浏览器都有不同的代理

例如：WebBrowser1 代理 --> 95.188.106.78:3128

WebBrowser 2 代理 --> 89.218.160.162:9090

WebBrowser 3 代理 --> 78.39.68.145:3128 等等

或者，如果直接使用 WebBrowser 是不可能的，那么任何人都可以建议我可以用什么来实现这一点（不是 webrequests，我只想要浏览器通过它我可以加载所有数据并且用户可以与它进行交互但使用不同的代理）喜欢使用 geckofx 或 webkit？但我不知道它们是否可能

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:42:20.323

看看[这个](http://social.msdn.microsoft.com/forums/en-US/winforms/thread/f4dc3550-f213-41ff-a17d-95c917bed027/)- 对不起它的 VB.NET

它基本上是说您可以通过更改 InernetSetOption 来编辑其中一个 IE DLL 来配置它。希望这可以帮助。

[这](https://stackoverflow.com/questions/9035911/c-sharp-webbrowser-control-proxy)是另一个可能有帮助的链接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T20:19:03.893

不幸的是，您不能为每个实例设置代理。甚至不是每个应用程序 - 它是全球性的。如果您将其更改为 .net 应用程序，它也会影响 IE。

这是更改代理的完整代码。

使用按钮“B_Get”、“B_Set”和“B_Disable”创建一个“Form1”，然后粘贴此代码。

它应该适合你。我将此应用程序用作我构建的自动代理循环器的概念证明。

根据您的应用程序需要，您可以切换它，然后再切换回来。请注意，它会影响 Internet Explorer。

要验证这是否有效，请检查 Internet Explorer。您可能需要打开/关闭 IE 的选项对话框，但您不需要重新启动浏览器。

这也会对 .NET 应用程序产生影响——如果您在运行程序时运行我的程序，您将能够更改程序正在使用的代理。

```
Imports Microsoft.Win32
Imports System.Runtime.InteropServices

Public Class Form1

    <DllImport("wininet.dll")>
    Public Shared Function InternetSetOption(hInternet As IntPtr, dwOption As Integer, lpBuffer As IntPtr, dwBufferLength As Integer) As Boolean
    End Function

    Public Const INTERNET_OPTION_SETTINGS_CHANGED As Integer = 39
    Public Const INTERNET_OPTION_REFRESH As Integer = 37

    'This function is what is called after editing the registry - this causes internet explorer to update its proxy even if it is already open.
    'It also effects the web browser control in any VB.net application that is running.
    Public Sub globalProxy_apply()
        Dim settingsReturn As Boolean = False
        Dim refreshReturn As Boolean = False
        settingsReturn = InternetSetOption(IntPtr.Zero, INTERNET_OPTION_SETTINGS_CHANGED, IntPtr.Zero, 0)
        If Not settingsReturn Then
            MessageBox.Show("Error 001: Line ""InternetSetOption(IntPtr.Zero, INTERNET_OPTION_SETTINGS_CHANGED, IntPtr.Zero, 0)"" failed.", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error)
        End If
        refreshReturn = InternetSetOption(IntPtr.Zero, INTERNET_OPTION_REFRESH, IntPtr.Zero, 0)
        If Not refreshReturn Then
            MessageBox.Show("Error 002: Line ""InternetSetOption(IntPtr.Zero, INTERNET_OPTION_REFRESH, IntPtr.Zero, 0)"" failed.", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error)
        End If
    End Sub

    Public Function globalProxy_IsProxyEnabled() As Boolean
        Try
            Dim Regs As RegistryKey = Registry.CurrentUser.CreateSubKey("Software\Microsoft\Windows\CurrentVersion\Internet Settings", RegistryKeyPermissionCheck.ReadWriteSubTree)
            If Regs.GetValue("ProxyEnable") <> Nothing Then
                If Regs.GetValue("ProxyEnable").ToString() = "0" Then
                    Return False
                Else
                    Return True
                End If
            Else
                Return False
            End If
        Catch ex As Exception
            MessageBox.Show("Error 01X: " + ex.Message, "Error", MessageBoxButtons.OK, MessageBoxIcon.Error)
            Return False
        End Try
    End Function

    Public Function globalProxy_GetProxyServer() As String
        Try
            Dim Regs As RegistryKey = Registry.CurrentUser.CreateSubKey("Software\Microsoft\Windows\CurrentVersion\Internet Settings", RegistryKeyPermissionCheck.ReadWriteSubTree)
            If Regs.GetValue("ProxyServer") <> Nothing Then
                Return Regs.GetValue("ProxyServer").ToString()
            Else
                Return ""
            End If
        Catch ex As Exception
            MessageBox.Show("Error 02X: " + ex.Message, "Error", MessageBoxButtons.OK, MessageBoxIcon.Error)
            Return ""
        End Try
    End Function

    Public Sub globalProxy_DisableProxy()
        Dim regkey As RegistryKey
        Try
            regkey = Registry.CurrentUser.CreateSubKey("Software\Microsoft\Windows\CurrentVersion\Internet Settings")
            regkey.SetValue("ProxyEnable", False, RegistryValueKind.DWord)
            regkey.Close()
        Catch ex As Exception
            MessageBox.Show("Error 03X: " + ex.Message, "Error", MessageBoxButtons.OK, MessageBoxIcon.Error)
        End Try

        globalProxy_apply()
    End Sub

    Public Sub globalProxy_SetProxy(ByVal ServerName As String)
        Dim regkey As RegistryKey
        Try
            regkey = Registry.CurrentUser.CreateSubKey("Software\Microsoft\Windows\CurrentVersion\Internet Settings")
            regkey.SetValue("ProxyServer", ServerName, RegistryValueKind.Unknown)
            regkey.SetValue("ProxyEnable", True, RegistryValueKind.DWord)
            regkey.Close()
        Catch ex As Exception
            MessageBox.Show("Error 04X: " + ex.Message, "Error", MessageBoxButtons.OK, MessageBoxIcon.Error)
        End Try

        globalProxy_apply()
    End Sub

    Private Sub B_Set_Click(sender As System.Object, e As System.EventArgs) Handles B_Set.Click
        If TextBox1.Text = "" Then
            globalProxy_DisableProxy()
        Else
            globalProxy_SetProxy(TextBox1.Text)
        End If

    End Sub

    Private Sub B_Disable_Click(sender As System.Object, e As System.EventArgs) Handles B_Disable.Click
        globalProxy_DisableProxy()
    End Sub

    Private Sub B_Get_Click(sender As System.Object, e As System.EventArgs) Handles B_Get.Click
        If globalProxy_IsProxyEnabled() Then
            TextBox1.Text = globalProxy_GetProxyServer()
        Else
            TextBox1.Text = ""
        End If
    End Sub

End Class 
```

# javascript - jQuery 移动应用程序中未显示警报消息

> ID：15091674
> 
> 赞同：0
> 
> 时间：2013-02-26T14:31:47.357
> 
> 标签：javascript, jquery-mobile

我是 jquery 和 jquery mobile 的新手。我目前正在尝试创建一个简单的移动应用程序，一旦加载页面，就会显示一条警报消息。按照建议，我在 html 文件的 head 部分中添加了以下代码：

```
<link rel="stylesheet" href="jquery.mobile-1.3.0.min.css" />
<script type="text/javascript" src="jquery-1.9.1.min.js"></script>
<script type="text/javascript">
    $('#chart').live('pageinit', function() {
        alert('jQuery Mobile: pageinit for Config page');
    });
</script>
<script type="text/javascript" src="jquery.mobile-1.3.0.min.js"></script> 
```

在正文部分，我按预期添加了图表页面的代码：

```
<div data-role="page" data-theme="b" id="chart">
    <div data-role="header" data-position="fixed">
        <a href="#main-page" data-icon="arrow-r" data-iconpos="left" data-transition="slide" data-direction="reverse">Back</a>
        <h1>Year Chart</h1>
    </div>

    <div data-role="content">
        <div id="container"></div>
    </div>
    <div data-role="footer" data-position="fixed">
        <div data-role="navbar">

        </div>
    </div>
</div> 
```

但是，当图表页面在我的计算机（不是手机）的浏览器中加载时，不会显示任何警报消息。有谁知道问题可能出在哪里？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:46:54.723

这是我可以在我的所有浏览器（IE、chrome、firefox）中成功发出警报的完整 HTML 和代码。我猜你的一些 javascript 不存在或错字。尝试使用 CDN。

```
<html>
    <head>
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
        <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
        <script type="text/javascript">
            $( '#chart' ).live( 'pageinit',function(event){
              alert( 'This page was just enhanced by jQuery Mobile!' );
            });
        </script>
    </head>
    <body>
        <div data-role="page" data-theme="b" id="chart">
            <div data-role="header" data-position="fixed">
                <a href="#main-page" data-icon="arrow-r" data-iconpos="left" data-transition="slide" data-direction="reverse">Back</a>
                <h1>Year Chart</h1>
            </div>
            <div data-role="content">
                <div id="container"></div>
            </div>
            <div data-role="footer" data-position="fixed">
                <div data-role="navbar">
                </div>
            </div>
        </div>
    </body>
</html> 
```

更新：

如果您使用的是 jquery 1.9+，我们应该使用 .on 而不是 .live。这是因为 .live 已从 1.9 中删除。[http://api.jquery.com/live/](http://api.jquery.com/live/) 因此，如果您使用的是 1.9，代码应该像这样更改

```
$( document ).on( 'pageinit','#chart', function(event){
  alert( 'This page was just enhanced by jQuery Mobile!' );
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T14:37:38.053

我认为 jQuery Mobile 页面事件（如 pageInit）不会在页面外冒泡。尝试像这样在页面 div 中插入脚本标签

```
<div data-role="page" data-theme="b" id="chart">
    <div data-role="header" data-position="fixed">
        <a href="#main-page" data-icon="arrow-r" data-iconpos="left" data-transition="slide" data-direction="reverse">Back</a>
        <h1>Year Chart</h1>
    </div>

    <div data-role="content">
        <div id="container"></div>
    </div>
    <div data-role="footer" data-position="fixed">
        <div data-role="navbar">

        </div>
    </div>
    <script type="text/javascript">
        $('#chart').live('pageinit', function() {
            alert('jQuery Mobile: pageinit for Config page');
        });
    </script>
</div> 
```

或者，您可以将 pageInit 函数绑定到文档元素，如下所示：

```
$(document).live('pageinit', function() {
        alert('jQuery Mobile: pageinit for Config page');
    }); 
```

但我认为第一个解决方案更符合最佳实践

# mysql - Left JOIN 语法错误

> ID：15091678
> 
> 赞同：0
> 
> 时间：2013-02-26T14:31:50.023
> 
> 标签：mysql, sql, left-join

我在此查询中收到系统税错误。

```
SELECT 
    e.post_id as id, e.start as start_date, 
    p.post_title, 
    c.name as category 
FROM 
    wp_ai1ec_events as e LEFT_JOIN wp_term_relationships as t ON e.post_id = t.object_id 
    LEFT_JOIN wp_term_relationships as t ON e.post_id = t.object_id 
    LEFT_JOIN wp_terms as c ON c.term_id = t.term_taxonomy_id
    LEFT_JOIN wp_posts as p ON p.ID = e.post_id
GROUP BY e.post_id 
```

实际上，在这种情况下，我什至可能不需要左连接，因为所有连接都应该附加到一行......

```
Error: #1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'LEFT_JOIN wp_term_relationships as t ON e.post_id = t.object_id LEFT_JOIN w' at line 6 
```

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-26T14:33:01.713

中没有下划线`LEFT JOIN`

`LEFT_JOIN`应该`LEFT JOIN`

# android - 如何知道您是否连接到 Wifi Hotspot/Wifi/Wifi Direct

> ID：15091681
> 
> 赞同：1
> 
> 时间：2013-02-26T14:31:52.913
> 
> 标签：android, wifi, wifi-direct

在 Android 中有什么方法可以确定我们是否已经连接到某些 Wifi 或 Wifi Direct 或热点。

如果是，请告诉我怎么做？我需要找到所有 3 个（wifi/hotspot/wifi direct）并根据答案在我的应用程序中做一些事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:38:33.357

这是一个代码快照，希望它对您有用！

```
public static int getNetworkType(Context context) {
    ConnectivityManager connectivity = (ConnectivityManager)context.getSystemService(Context.CONNECTIVITY_SERVICE);

    if (connectivity != null) { 
        // 获取网络连接管理的对象
        NetworkInfo info = connectivity.getActiveNetworkInfo();

        if (info != null && info.isConnected()) {
            // 判断当前网络是否已经连接
            if (info.getState() == NetworkInfo.State.CONNECTED) {
                if (info.getTypeName().equalsIgnoreCase("WIFI")) {
                    return MrDefines.NETTYPE_WIFI;
                } else {
                    Cursor mCursor = context.getContentResolver().query(
                            Uri.parse("content://telephony/carriers"), 
                            new String[] {"name"}, "current=1", 
                            null, null);

                    if(mCursor != null && mCursor.moveToFirst()){
                        String name = mCursor.getString(0);
                        mCursor.close();

                        if(name.equalsIgnoreCase("cmnet"))
                            return MrDefines.NETTYPE_CMNET;
                        else if(name.equalsIgnoreCase("cmwap"))
                            return MrDefines.NETTYPE_CMWAP;
                    }else if (mCursor != null) {
                        mCursor.close();
                    }

                }
            }
        }
    }

    return MrDefines.NETTYPE_UNKNOW;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T14:39:00.610

我认为 WifiManager 和 ConnectivityManager 可能是您需要的东西。看看参考资料

[http://developer.android.com/reference/android/net/wifi/WifiManager.html](http://developer.android.com/reference/android/net/wifi/WifiManager.html)

[http://developer.android.com/reference/android/net/ConnectivityManager.html](http://developer.android.com/reference/android/net/ConnectivityManager.html)

# wcf - 如何将数据合同添加到由类型化数据集创建的类型 (xxxDataTable)？

> ID：15091690
> 
> 赞同：0
> 
> 时间：2013-02-26T14:32:14.360
> 
> 标签：wcf, silverlight, datatable, datacontract, datamember

我有一个类型化的数据集，我想将表（由 .net 创建）或行集合而不是对象（我将创建）或对象集合传递到客户端。Silverlight 框架不支持 system.data.datatable。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T14:54:13.777

您不需要将 datacontract 属性添加到您不拥有的类型。您可以实现**[IDataContractSurrogate](http://blogs.msdn.com/b/carlosfigueira/archive/2011/09/14/wcf-extensibility-serialization-surrogates.aspx)**以将客户端未知类型的实例替换为已知类型的实例（例如轻量级数据表 POCO）。

如果您使用代码优先方法，您将不会在类型化数据集类对象和您自己的序列化/反序列化 POCO 对象之间进行这种额外的投影复制操作（并且您将完全控制数据对象类型 (POCO)）。

我发现使用 Json.Net 'any object to JObject' 转换器（非常快且可自定义）作为转换为其他东西之前的第一步很有用：

```
public static class JsonExtensions
{   
    public static object Normalize(this JToken token)
    {
        var type = token.GetType();
        if (type == typeof(JObject))
        {
            return (token as JObject).OfType<JProperty>().ToDictionary<JProperty, string, object>(property => property.Name, property => property.Value.Normalize());
        }
        if (type == typeof(JProperty))
        {
            var property = token as JProperty;
            //return new DictionaryEntry(property.Name, property.Value.Normalize());
            return new KeyValuePair<string, object>(property.Name, property.Value.Normalize());
        }
        if (type == typeof(JValue))
        {
            return (token as JValue).Value;
        }
        if (type == typeof(JArray))
        {
            //return (token as JArray).OfType<JValue>().Select(value => value.Normalize()).ToArray();
            return (token as JArray).Select(value => value.Normalize()).ToArray();
        }
        throw new NotImplementedException();
        //return null;
    }
}

public class TestClass
{
    public string StringProperty { get; set; }
    public int IntProperty { get; set; }
    public TestClass RefProperty { get; set; }
}

private static string DataContractXmlSerialize<T>(T source)
{
    var serializer = new DataContractSerializer(source.GetType());
    using (var ms = new MemoryStream())
    {
        serializer.WriteObject(ms, source);

        return Encoding.UTF8.GetString(ms.ToArray());
    }
} 
```

用法：

```
var test = new TestClass()
            {
                StringProperty = "StringProperty",
                IntProperty = int.MaxValue,
                RefProperty = new TestClass() { IntProperty = int.MinValue }
            };

var jObj = JObject.FromObject(test);
var dict = jObj.Normalize();

var serializedDict = DataContractXmlSerialize(dict); 
```

如您所见 - 输出是 WCF 可序列化的（被序列化的标准字典生成的 xml 不是很好，但您可以使用自己的可序列化字典）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T16:46:53.673

您根本无法在 Silverlight 客户端中使用 DataTable 的 ADO.NET 实现，但有替代方法。

但是，[这篇博文](http://blogs.telerik.com/vladimirenchev/posts/09-04-23/lightweight-datatable-for-your-silverlight-applications.aspx)有一个替代的 DataTable 实现，您可以对其进行序列化并在 Silverlight 中提供支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T17:38:59.160

如果您想访问 Silverlight 应用程序中的数据，您应该使用 RIA 服务。您应该创建自定义 DTO 对象并从 DataTable 行创建 DTO 对象列表并从 RIA 服务返回它。

您开始使用 RIA 服务遵循 MSDN，网址为[http://msdn.microsoft.com/en-us/library/ee707376(v=vs.91).aspx](http://msdn.microsoft.com/en-us/library/ee707376(v=vs.91).aspx)

# javascript - 通过 jQuery 分离和清理数据属性中的标签

> ID：15091691
> 
> 赞同：0
> 
> 时间：2013-02-26T14:32:14.687
> 
> 标签：javascript, jquery, split, custom-data-attribute

我有一个项目列表，其中包含使用该`data-type`属性的标签。我正在尝试遍历项目以获取数组中的每个标签。如果列表项有多个标签（用逗号分隔），我想拆分标签并清理任何空白。

**这是我的 HTML：**

```
<div class="article-wrap">
  <ul class="articles">
    <li sata-type="tag3"> <a href="#">LTE opens vast new business and revenue opportunities. Here's how to get ready.</a>

    </li>
    <li data-type="tag3"> <a href="#">Bringing NFC into the Digital Home</a>

    </li>
    <li data-type="tag3, tag4"> <a href="#">Keep Up with Rapidly-changing Wi-Fi Standards, Techniques and Markets</a>

    </li>
    <li data-type="tag1"> <a href="#">Technicolor Professional Services help NSPs reduce software vulnerability</a>

    </li>
    <li data-type="tag2, tag3"> <a href="#">Our New Satellite/terrestrial HD Set-top Box Provides a Smooth Path to HDTV.</a>

    </li>
  </ul>
</div> 
```

**这是我的 JS：**

```
$(function () {
    var items = $('.article-wrap li'),
        itemsByTags = {};

    // Looping though all the li items:
    items.each(function (i) {
        var elem = $(this),
            tags = elem.data('type').split(',');

        // Adding a data-id attribute
        elem.attr('data-id', i);

        $.each(tags, function (key, value) {
            // Removing extra whitespace:
            value = $.trim(value);

            if (!(value in itemsByTags)) {
                // Create an empty array to hold this item:
                itemsByTags[value] = [];
            }

            // Each item is added to one array per tag:
            itemsByTags[value].push(elem);
        });

    });
}); 
```

我相信这应该可以正常工作，可惜我得到**Uncaught TypeError: Cannot call method 'split' of undefined**。你可以在这里看到这个：http: [//jsfiddle.net/94UUF/2/](http://jsfiddle.net/94UUF/2/)

我可以使用相同的`items`var 来修改 CSS 等，但该`.split`功能似乎不想玩。请指教！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:36:19.330

你注意到了吗：

```
<li sata-type="tag3"> 
```

`sata`而不是因此`data`错误：

```
Uncaught TypeError: Cannot call method 'split' of undefined. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T15:19:09.663

您实际上可以在数据标签中嵌入对象文字。所以如果你这样做，`data-type='["tag3”, ”tag4”]'`那么`.data('type')`将返回一个数组。

# lisp - 定义我自己的读取宏

> ID：15091701
> 
> 赞同：5
> 
> 时间：2013-02-26T14:32:51.773
> 
> 标签：lisp, common-lisp, reader-macro

Common Lisp 中有一些读宏，例如`'` `#'` `#P`，但是我怎样才能写一个读宏呢？

像这样：

```
#T"hello world"
====================>
(gettext "hello world") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T15:23:05.767

您可以使用[set-macro-character](http://www.lispworks.com/documentation/HyperSpec/Body/f_set_ma.htm#set-macro-character)和[set-dispatch-macro-character](http://www.lispworks.com/documentation/HyperSpec/Body/f_set__1.htm)，例如在：

```
(set-dispatch-macro-character #\# #\T
  (lambda (s c n)
    `(gettext ,(read s t nil t))))
==> T 
```

您可以使用已安装的读取语法

```
(read-from-string "#T\"this is a test\"")
==> (GETTEXT "this is a test") 
```

# windows - 如何在 Windows 上使用 git+mintty+mingw 获得彩色输出？

> ID：15091709
> 
> 赞同：10
> 
> 时间：2013-02-26T14:33:07.500
> 
> 标签：windows, git, mingw, mintty

我已经安装了官方的 windows git 发行版，我安装了一个最近的 mingw，并进入了 mintty 终端。然后我将我的 git 安装复制到这个 mingw 安装中，现在它可以在 mintty 中运行。我唯一的问题是 git 输出没有着色。我怀疑这是因为 windows git 端口尝试使用 windows 控制台颜色的东西，而不是 mintty 能够解释的 ANSI 颜色代码。是否可以让 git 改用 ANSI 颜色代码？

^(（在此之前我尝试过 cygwin 设置，但性能非常非常糟糕，我找不到任何解决方案）。)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T07:29:24.547

从[git-config](https://www.kernel.org/pub/software/scm/git/docs/git-config.html)：

> 如果设置为**always**，git-diff(1)、git-log(1) 和 git-show(1) 将为所有补丁使用颜色。如果设置为**true**或**auto**，这些命令将仅在输出到终端时使用颜色。默认为假。

看起来 git 并没有将**mintty**视为终端。对我来说，使用**always**而不是**true/auto**有帮助：

```
[color]
  status = always 
```

**通过将--color**标志添加到 diff 命令来强制颜色也可以（使用 diff=true）：

```
git diff --color 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-10T21:02:01.440

这很简单。将 git 配置为始终在任何 ui 中显示颜色。

```
git config --global color.ui always 
```

为我工作。

# java - MVC架构问题

> ID：15091712
> 
> 赞同：0
> 
> 时间：2013-02-26T14:33:14.513
> 
> 标签：java, model-view-controller, servlets

我已经阅读了很多关于 MVC 的内容，但真的不知道我是否清楚 MVC 的概念，或者最近没有开发过一个应用程序我所做的是 1）在称为函数的 jsp 加载上 2）使用称为 servlet 和 servlet 的 AJAX是否执行所有逻辑 3）servlet 称为 java bean 和 java 类来执行一些逻辑并返回结果 4）基于从类返回的结果我正在显示图像说如果结果为 1 则图像 A ，如果 0然后图像 b 5）关于 servlets POST 方法我正在使用 out.println()--> 编写完整的输出 6）返回调用后 jsp 上的函数将通过 servlet 生成的输出设置所需 div 的 innetHTML

现在说输出 servlet 生成的是表

* * *

实例名称|实例状态

* * *

现在，如果我想在某个时候更改此表的显示以说

* * *

实例状态|实例名称

* * *

要进行上述更改，我必须重新编译我的 servlet 并重新部署战争

它真的是 MVC 吗？有人建议我使用包含数据的 bean 的 JSON 存储对象作为 JSON，然后将 JSON 对象返回给 jsp，并在 jsp 中使用该对象构造表！

对此的任何指示都会有很大帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:41:55.490

是否必须重新部署通常取决于您的开发环境。如果您使用的是在您进行更改时自动构建的 IDE，并且服务器是从您正在使用的 IDE 运行的，那么您可能不需要重新构建 war。您可以随时尝试查看源代码以查看是否需要重新部署。后端代码通常必须重新部署。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T07:07:16.570

**让我们快速了解一下什么是 MVC？**

`MVC(Mode-view-controller )`顾名思义就是软件架构模式，它鼓励应用`have its Model Classes (i.e domain models / DTOs) views (i.e can be JSP, JSON etc) and controller (i.e Servlet) to be as modularized as possible so that it encourages re-usability, loose-coupling between the different layers and Seperation of Concerns`。

所以这背后的关键思想是`encourage Seperation of Concerns`。 `Say i want to change the view from JSP to freemarker view , if MVC is tighly followed , i should be able to accomplish the change with minimum to no impact to Controller layer (i.e Servlets)`

好吧，您看到这只有在我的 web 应用程序中有明确的层分离才能实现。 `If i had just scattered all the functions without regard to MVC like having views generated from the Servlet, or making service level calls like accessing the DB directly from the Controller etc is bad because any change in the view or the Database layer will cause massive changes at the Servlet .`

所以回答你的问题，`your servlet should not directly produce the HTML output`。 `Store all the objects`想要生成视图`in Request Attribute`并`access it in JSP` 重新编译 Sevlet 并不意味着您不遵循 MVC，只是通过遵循 MVC，您的更改是最小的并且被分组在一个地方。

现在放弃 JSON 概念，让它简单明了 阅读本教程，它公平地解释了如何实现一个简洁的 MVC

[Jsp MVC 教程。](http://www.datadisk.co.uk/html_docs/jsp/jsp_mvc_tutorial.htm)

一旦你掌握了，你总是可以添加更复杂的东西，比如 JSON、AJAX、异步请求等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T15:57:46.643

基于获得的ajax响应。

您可以隐藏或显示您喜欢的图像。

如果我没记错的话，如何获取图像链接而不是 out.print 打印字节 []。

当您想重定向到另一个页面时，如何使用响应重定向从 servlet 本身重定向它。

# grails - 使用 Grails 连接到 DB2 数据库

> ID：15091715
> 
> 赞同：0
> 
> 时间：2013-02-26T14:33:24.350
> 
> 标签：grails, connection, db2

我正在尝试将我的 grails 应用程序连接到在本地运行的 DB2 数据库。当我想启动我的应用程序时，我收到多个错误？我只是开始使用 grails，甚至更多的是 DB2 数据库管理。有人可以帮我吗 ？

这是错误线索

```
 Message: Error creating bean with name 'transactionManagerPostProcessor': Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager': Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory': Cannot resolve reference to bean 'hibernateProperties' while setting bean property 'hibernateProperties'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'hibernateProperties': Cannot resolve reference to bean 'dialectDetector' while setting bean property 'properties' with key [hibernate.dialect]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dialectDetector': Invocation of init method failed; nested exception is org.springframework.jdbc.support.MetaDataAccessException: Error while extracting DatabaseMetaData; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create JDBC driver of class 'org.h2.Driver' for connect URL 'jdbc:db2://localhost:50000/DTH3_E:currentSchema=DFP_V115'
   Line | Method
->> 303 | innerRun in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|   138 | run      in java.util.concurrent.FutureTask
|   886 | runTask  in java.util.concurrent.ThreadPoolExecutor$Worker
|   908 | run      in     ''
^   662 | run . .  in java.lang.Thread
Caused by BeanCreationException: Error creating bean with name 'transactionManager': Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory': Cannot resolve reference to bean 'hibernateProperties' while setting bean property 'hibernateProperties'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'hibernateProperties': Cannot resolve reference to bean 'dialectDetector' while setting bean property 'properties' with key [hibernate.dialect]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dialectDetector': Invocation of init method failed; nested exception is org.springframework.jdbc.support.MetaDataAccessException: Error while extracting DatabaseMetaData; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create JDBC driver of class 'org.h2.Driver' for connect URL 'jdbc:db2://localhost:50000/DTH3_E:currentSchema=DFP_V115'
->> 303 | innerRun in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|   138 | run      in java.util.concurrent.FutureTask
|   886 | runTask  in java.util.concurrent.ThreadPoolExecutor$Worker
|   908 | run      in     ''
^   662 | run . .  in java.lang.Thread
Caused by BeanCreationException: Error creating bean with name 'sessionFactory': Cannot resolve reference to bean 'hibernateProperties' while setting bean property 'hibernateProperties'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'hibernateProperties': Cannot resolve reference to bean 'dialectDetector' while setting bean property 'properties' with key [hibernate.dialect]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dialectDetector': Invocation of init method failed; nested exception is org.springframework.jdbc.support.MetaDataAccessException: Error while extracting DatabaseMetaData; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create JDBC driver of class 'org.h2.Driver' for connect URL 'jdbc:db2://localhost:50000/DTH3_E:currentSchema=DFP_V115'
->> 303 | innerRun in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|   138 | run      in java.util.concurrent.FutureTask
|   886 | runTask  in java.util.concurrent.ThreadPoolExecutor$Worker
|   908 | run      in     ''
^   662 | run . .  in java.lang.Thread
Caused by BeanCreationException: Error creating bean with name 'hibernateProperties': Cannot resolve reference to bean 'dialectDetector' while setting bean property 'properties' with key [hibernate.dialect]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dialectDetector': Invocation of init method failed; nested exception is org.springframework.jdbc.support.MetaDataAccessException: Error while extracting DatabaseMetaData; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create JDBC driver of class 'org.h2.Driver' for connect URL 'jdbc:db2://localhost:50000/DTH3_E:currentSchema=DFP_V115'
->> 303 | innerRun in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|   138 | run      in java.util.concurrent.FutureTask
|   886 | runTask  in java.util.concurrent.ThreadPoolExecutor$Worker
|   908 | run      in     ''
^   662 | run . .  in java.lang.Thread
Caused by BeanCreationException: Error creating bean with name 'dialectDetector': Invocation of init method failed; nested exception is org.springframework.jdbc.support.MetaDataAccessException: Error while extracting DatabaseMetaData; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create JDBC driver of class 'org.h2.Driver' for connect URL 'jdbc:db2://localhost:50000/DTH3_E:currentSchema=DFP_V115'
->> 303 | innerRun in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|   138 | run      in java.util.concurrent.FutureTask
|   886 | runTask  in java.util.concurrent.ThreadPoolExecutor$Worker
|   908 | run      in     ''
^   662 | run . .  in java.lang.Thread
Caused by MetaDataAccessException: Error while extracting DatabaseMetaData; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create JDBC driver of class 'org.h2.Driver' for connect URL 'jdbc:db2://localhost:50000/DTH3_E:currentSchema=DFP_V115'
->> 303 | innerRun in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|   138 | run      in java.util.concurrent.FutureTask
|   886 | runTask  in java.util.concurrent.ThreadPoolExecutor$Worker
|   908 | run      in     ''
^   662 | run . .  in java.lang.Thread
Caused by SQLNestedException: Cannot create JDBC driver of class 'org.h2.Driver' for connect URL 'jdbc:db2://localhost:50000/DTH3_E:currentSchema=DFP_V115'
->> 1452 | createConnectionFactory in org.apache.commons.dbcp.BasicDataSource
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|   1371 | createDataSource in     ''
|   1044 | getConnection in     ''
|   303 | innerRun in java.util.concurrent.FutureTask$Sync
|   138 | run . .  in java.util.concurrent.FutureTask
|   886 | runTask  in java.util.concurrent.ThreadPoolExecutor$Worker
|   908 | run . .  in     ''
^   662 | run      in java.lang.Thread
Caused by SQLException: No suitable driver
->> 264 | getDriver in java.sql.DriverManager
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|   1437 | createConnectionFactory in org.apache.commons.dbcp.BasicDataSource
|   1371 | createDataSource in     ''
|   1044 | getConnection in     ''
|   303 | innerRun in java.util.concurrent.FutureTask$Sync
|   138 | run      in java.util.concurrent.FutureTask
|   886 | runTask  in java.util.concurrent.ThreadPoolExecutor$Worker
|   908 | run      in     ''
^   662 | run . .  in java.lang.Thread 
```

在我的 datasource.groovy 文件中，这是我更改的内容：

```
environments {
    development {
        dataSource {
            dbCreate = "create-drop" // one of 'create', 'create-drop', 'update', 'validate', ''
            //url = "jdbc:h2:mem:devDb;MVCC=TRUE;LOCK_TIMEOUT=10000"
            url = "jdbc:db2://localhost:50000/DTH3_E:currentSchema=DFP_V115"
        }
    }
.... 
```

通过一些研究，我了解到这是我的休眠配置。任何人都可以（in）验证吗？我下一步该去哪里……至少可以说很迷茫

如果想知道，数据库已启动并正在运行，我可以使用 DbVisualizer 连接到它。

在此先感谢您的帮助 ！如果需要更多详细信息，请询问:) 我会尽量澄清问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T15:04:36.327

从您的异常中，Grails 正在尝试使用 H2 JDBC 驱动程序连接到您的 DB2 数据库。尝试在声明中指定 DB2 Hibernate 方言，`dataSource`看看它是否会使用正确的驱动程序：

```
dataSource {
    dialect="org.hibernate.dialect.DB2Dialect"
} 
```

还要确保 Grails 项目中有必要的 DB2 jar。

# c# - WPF：使用模板样式获取 ListBoxItem 作为 CheckBox 以与 IsSelected 同步

> ID：15091716
> 
> 赞同：4
> 
> 时间：2013-02-26T14:33:28.437
> 
> 标签：c#, wpf, xaml, checkbox, listbox

我正在制作一个 MVVM WPF 应用程序，在这个应用程序中，我有一个带有我自己的特权项的 ListBox。

经过多年，我终于找到了一个[解决方案](http://rnragu.blogspot.co.at/2011/04/multiselect-listbox-in-silverlight-use.html)，如何让选择与我的 ViewModel 同步。（您还需要在您的项目类中实现 IEquatable）

**问题**

现在我想将 ListBoxItems 设置为 CheckBoxes，这个问题有很多解决方案，但没有一个真正适合我的需求。

所以我想出了这个解决方案，因为我可以只将这种样式应用到我需要的 ListBoxes，而且我不必担心 DisplayMemberPath 或 Items 被设置为 CheckBox**和**ListBoxItems。

看法：

```
<ListBox Grid.Row="5" Grid.Column="1"
         ItemsSource="{Binding Privileges}"
         BehavExt:SelectedItems.Items="{Binding SelectedPrivileges}"
         SelectionMode="Multiple"
         DisplayMemberPath="Name"
         Style="{StaticResource CheckBoxListBox}"/> 
```

风格：

```
<Style x:Key="CheckBoxListBox"
       TargetType="{x:Type ListBox}"
       BasedOn="{StaticResource MetroListBox}">

    <Setter Property="Margin" Value="5" />
    <Setter Property="ItemContainerStyle"
            Value="{DynamicResource CheckBoxListBoxItem}" />
</Style>

<Style x:Key="CheckBoxListBoxItem"
       TargetType="{x:Type ListBoxItem}"
       BasedOn="{StaticResource MetroListBoxItem}">

    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type ListBoxItem}">
                <CheckBox IsChecked="{TemplateBinding Property=IsSelected}">
                    <ContentPresenter />
                </CheckBox>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

视图模型：

```
private ObservableCollection<Privilege> _privileges;
public ObservableCollection<Privilege> Privileges
{
    get { return _privileges; }
    set {
        _privileges = value;
        RaisePropertyChanged(() => Privileges);
    }
}

private ObservableCollection<Privilege> _selectedPrivileges;
public ObservableCollection<Privilege> SelectedPrivileges
{
    get { return _selectedPrivileges; }
    set
    {
        _selectedPrivileges = value;
        RaisePropertyChanged(() => SelectedPrivileges);
    }
} 
```

问题是这一行：

```
IsChecked="{TemplateBinding Property=IsSelected}" 
```

它工作正常，但仅限于一个方向。当我在代码中添加一个项目时，`SelectedPrivileges`它会显示为选中，但是当我在 GUI 中选中这个项目时，它不会做任何事情。（没有 CheckBox 样式它可以工作，所以这是因为 TemplateBinding 只能在一个方向上工作）

我怎样才能让它工作？我虽然关于触发器之类的东西，但我不知道如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T14:50:18.147

我相信您正在寻找的实际上非常简单。需要更改`IsChecked`属性绑定的绑定方式，如下：

```
{Binding RelativeSource={RelativeSource TemplatedParent}, Path=IsSelected, Mode=TwoWay} 
```

那应该这样做。

这个以及基本上任何其他 WPF 绑定技巧都可以在这个出色的[备忘单](http://www.nbdtech.com/Free/WpfBinding.pdf)上找到。

# msbuild - 如何指定 MSBUILD 也在何处发布 Web 服务？

> ID：15091718
> 
> 赞同：0
> 
> 时间：2013-02-26T14:33:29.770
> 
> 标签：msbuild, nant, nantcontrib

我在网上看到了很多关于此的信息，但没有任何明确和具体的信息似乎解决了将 Web 服务或网站简单地发布到我在构建时指定的特定文件夹的问题。

我正在使用 Nant 和 Nant Contrib：

```
 <target name="build" description="builds the service">

        <msbuild project="${buildoutput}\${service.source}\wsMyService.sln" >           
            <property name="Configuration" value="Release" />           
            <property name="PublishDir" value="${buildoutput}\${service.target}\" />            
            <property name="Targets" value="Publish" />
        </msbuild>

    </target> 
```

谁能告诉我这应该怎么做。我可以在项目的属性页中更改输出文件夹，但我希望它可以从 Nant 进行配置，以便我可以在构建时指定路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:51:37.007

从命令行调用 msbuild 时，可以传入字符串以分配给 msbuild 属性。我对 NAnt 一无所知，所以我认为它必须求助于调用 msbuild.exe。因此，您可以像这样覆盖 msbuild 属性：

```
MsBuild /property:buildoutput=C:\arbitrary\folder\bin\ 
```

从命令行指定的这些属性会覆盖您在构建文件中指定的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:37:40.617

这是我目前使用 msbuild 构建 web 服务的内容：

```
<Target Name="BuildWebService">
    <ConvertToAbsolutePath Paths="$(Root)">
      <Output TaskParameter="AbsolutePaths" PropertyName="Root" />
    </ConvertToAbsolutePath>

    <ItemGroup>
      <WebServices Include="$(Root)\services\Solutions\**\*.host.csproj"/>
    </ItemGroup>

  <MSBuild Projects="%(WebServices.FullPath)"
          Targets="Build"
          Properties="WebProjectOutputDir=$(Root)\services\build\WebService\%(RecursiveDir);OutDir=$(Root)\services\build\WebService\%(RecursiveDir)\bin\" />
  </Target> 
```

希望你能很容易地翻译成 nant。

# reporting-services - 未存储用于运行此报告的 SSRS 2008 凭据

> ID：15091720
> 
> 赞同：0
> 
> 时间：2013-02-26T14:33:32.477
> 
> 标签：reporting-services, ssrs-2008, credentials

我在 SSRS 中创建了一个报告，并部署了它。我转到报告的属性“进程”选项，并尝试设置缓存报告的临时副本，并收到错误“未存储用于运行此报告的凭据”。如果我转到快照选项并尝试在那里选择任何选项，我会收到同样的错误。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T14:52:38.673

根据错误，您需要设置类似于以下的报告**数据源：**

![在此处输入图像描述](../Images/d0d5f22d76a6dbb010457d0bbf0bfa87.png)

如果您不存储凭据，则无法缓存报告或创建快照。

使用缓存报表时，用户运行报表时会创建一个临时副本，这可用于报表的后续运行。由于这可以由不同的用户执行，唯一可行的方法是每次都使用相同的连接到数据源；缓存副本时，它必须独立于运行报告的任何人。

快照的原理相同；不能保证谁将根据快照运行报告，因此数据源连接必须独立于运行报告的用户，即存储在数据源级别。

# javascript - Javascript 图像随时间改变位置

> ID：15091721
> 
> 赞同：1
> 
> 时间：2013-02-26T14:33:33.700
> 
> 标签：javascript, jquery, html, css, animation

基本上我想做的是让红色块在一段时间内从屏幕的左侧移动到右侧。我遇到的问题是页面运行到 java 脚本而不显示动画。当用户等待 javascript 完成运行时，该块只是移动到屏幕的另一侧。我已经尝试使用准备好的 jQueries，但我仍然得到相同的结果。任何帮助，将不胜感激。

好的，在我正文末尾的 HTML 代码中，我有：

```
 <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script type="text/javascript" src="js/nexusStyle.js"></script>   
    <script>                
        $(document).append(function foo(){
           start(); 
        });
    </script> 
```

在我的 nexusStyle.js 文件中，我有：

```
function start(){
    createBlock();
    var mHeight = getMonitorHeight();
    var mWidth = getMonitorWidth();
}
function getMonitorWidth() {
    return screen.width;
}
function getMonitorHeight(){
    return screen.height;
}
function horizontalMotion(maxWidth, img){
    for(var i=0; parseInt(i)<maxWidth; i+=50){
        img.style.left = i+"px";
        sleep(100);
    }
}
function sleep(delay){
    var start = new Date().getTime();
    while(new Date().getTime()<start+delay);
}
function createBlock(){
    var img, left, top, interval;
    interval = 100;
    img = document.createElement('img');
    img.src = "img/blocks/redBlock.png";
    left = 0;
    top = 200;
    img.style.position = "absolute";
    img.style.left = left+"px";
    img.style.top = top+"px";
    document.body.appendChild(img);
    horizontalMotion(getMonitorWidth(), img);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:36:51.123

首先，有一些明显的错误：

移动都在一个 for 循环中，该循环将同步执行，直到完成。您需要将其从当前进程中推出，以便让浏览器有时间呈现：

```
function horizontalMotion(maxWidth, img){
    for(var i=0; parseInt(i)<maxWidth; i+=50){
        setTimeout(function(){
            img.style.left = i+"px";
            sleep(100);
        },0);
    }
} 
```

您准备好的文件也应该是：

```
<script>                
    $(function (){
       start(); 
    });
</script> 
```

这只会停止它正在运行的任何进程，在您使用它的当前上下文中，这将是渲染线程。

```
function sleep(delay){
    var start = new Date().getTime();
    while(new Date().getTime()<start+delay);
} 
```

`setTimeout`此外，即使通过使用你来逃避渲染过程，也会在一次发生的运动中遇到麻烦。

编辑：

由于您已经在使用 jQuery，我建议您不要重新发明轮子。[使用`animate`](http://jsfiddle.net/L4vWu/2/)：

```
$(function(){
    start();
});

var mHeight = getMonitorHeight();
var mWidth = getMonitorWidth();
var interval = 1000;

function start(){
    var theIMG = createBlock();
    var iterations = getMonitorWidth() - 200; //the 200 should be replaced with your image width
    $(theIMG).animate({left:iterations},interval);
}
function getMonitorWidth() {
    return $(document).width();
}
function getMonitorHeight(){
    return $(document).height();
}
function createBlock(){
    var img, left, top;
    img = document.createElement('img');
    img.src = "img/blocks/redBlock.png";
    left = 0;
    top = 200;
    img.style.position = "absolute";
    img.style.left = left+"px";
    img.style.top = top+"px";
    document.body.appendChild(img);
    return img;
} 
```

# asp.net - 在 .NET 4 和 IIS6 中将消息从 Web API 记录到控制台

> ID：15091723
> 
> 赞同：1
> 
> 时间：2013-02-26T14:33:47.033
> 
> 标签：asp.net, asp.net-mvc, iis, asp.net-web-api, iis-6

来自 Java servlet 容器，我真的觉得 IIS 服务器（我**在 Windows Server 2003 上被 IIS6**卡住）没有可用于**记录消息**的控制台输出，这很烦人。

有没有办法做到这一点？我想调试一个特别特定的硬件/软件部署配置，它不会使我的 RESTful 服务（使用 .NET 4 中的 WebAPI 编写）正常工作。

我在想是否有某种方法可以写入输出缓冲区，然后通过从`cmd`控制台窗口附加到该特定流来使用它。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T13:57:01.480

我最终在 Windows 事件日志中写入事件。如果你问我，一个糟糕的做事方式的糟糕解决方案。

# jquery - 在 jQuery SVG 中，为什么坐标不能按预期工作

> ID：15091724
> 
> 赞同：1
> 
> 时间：2013-02-26T14:33:47.760
> 
> 标签：jquery, svg, jquery-svg

我使用代码在 jQuery SVG 中加载两个图像：

```
svg.image(0, 0, 330, 540, 'images/img1.jpg', {id: 'img'});
svg.image(0, 0, 330, 540, 'images/iPhone5png.png', {id: 'imgphone'}); 
```

加载图像后，它看起来像这样：

![在此处输入图像描述](../Images/b4f0a83d47a6e6e36103f958f469b7d2.png)

我将（瓶子的）图像旋转到 90 度：

![在此处输入图像描述](../Images/9120364d902442779e660b967d278dbd.png)

现在，如果我尝试使用以下代码以交互方式向左或向右更多（瓶子）图像：

```
//Move Left
$('#moveleft').click(function(){
var svg = $('#svgphone').svg('get');
var cx = $('#img', svg.root()).attr('x');
cx = eval(cx) - 10;
$('#img', svg.root()).attr('x', cx);
});
//Move Right
$('#moveright').click(function(){
var svg = $('#svgphone').svg('get');
var cx = $('#img', svg.root()).attr('x');
cx = eval(cx) + 10;
$('#img', svg.root()).attr('x', cx);
}); 
```

它向上或向下移动，而不是向左（向下移动）或向右（向上移动），如下所示：

![在此处输入图像描述](../Images/e1ac798518004ef40d8383efe46812ec.png)

为什么以及如何解决这个问题？

TIA

杨瑜珈

# objective-c - 将项目从一台计算机移动到另一台计算机后，链接器命令失败，退出代码为 1

> ID：15091729
> 
> 赞同：1
> 
> 时间：2013-02-26T14:33:58.797
> 
> 标签：objective-c, xcode, linker-errors

我是 Xcode 和 obctive-c 的新手，我从另一台机器上的另一位开发人员那里接手的项目有问题。我不能再联系这个程序员了（被解雇了）。

```
Ld /Users/*****/Library/Developer/Xcode/DerivedData/Dino-eyvcyvuofjuafncdadqeywyvdsra/Build/Products/Debug-iphonesimulator/Dino.app/Dino normal i386
        cd /Users/******/Dropbox/Xcode/ABCiTY/Dino
        setenv IPHONEOS_DEPLOYMENT_TARGET 5.1
        setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
        /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch i386 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.1.sdk -L/Users/******/Library/Developer/Xcode/DerivedData/Dino-eyvcyvuofjuafncdadqeywyvdsra/Build/Products/Debug-iphonesimulator -F/Users/******/Library/Developer/Xcode/DerivedData/Dino-eyvcyvuofjuafncdadqeywyvdsra/Build/Products/Debug-iphonesimulator -filelist /Users/******/Library/Developer/Xcode/DerivedData/Dino-eyvcyvuofjuafncdadqeywyvdsra/Build/Intermediates/Dino.build/Debug-iphonesimulator/Dino.build/Objects-normal/i386/Dino.LinkFileList -Xlinker -objc_abi_version -Xlinker 2 -ObjC -fobjc-arc -fobjc-link-runtime -Xlinker -no_implicit_dylibs -mios-simulator-version-min=5.1 -lABCityCrossMarketing -framework AdSupport -framework CoreMotion -framework SystemConfiguration -framework CoreData -framework QuartzCore -framework CoreImage -framework AVFoundation -framework StoreKit -framework UIKit -framework Foundation -framework CoreGraphics -lGoogleAnalytics -lGoogleConversionTracking -o /Users/*******/Library/Developer/Xcode/DerivedData/Dino-eyvcyvuofjuafncdadqeywyvdsra/Build/Products/Debug-iphonesimulator/Dino.app/Dino

    ld: library not found for -lABCityCrossMarketing
    clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

谁能帮我这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:40:02.887

您缺少库文件`libABCityCrossMarketing.a`。

“ABCityCrossMarketing”的谷歌对我没有任何回报。看起来很糟糕。如果您仍然可以访问他的机器，那么这似乎是恢复此文件的唯一方法（这个库可能是他编写的并且从未发布过）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T14:38:46.783

我认为这里的信息很清楚：

```
library not found for -lABCityCrossMarketing 
```

当您移动文件夹和控件或基本上任何文件被 Xcode 放错位置并且它不知道在哪里找到它时，就会发生这种情况。您必须再次将它添加到您的项目中，或者在它列出的任何地方更改它的路径。

# mysql - MongoDB重读，相对低写，小操作性能

> ID：15091731
> 
> 赞同：1
> 
> 时间：2013-02-26T14:34:02.167
> 
> 标签：mysql, mongodb, performance, nosql

我正在构建一个应用程序，我将在其中拥有无模式对象。因此使用 mongoDB 而不是 mysql 是有意义的，因为 mysql 将涉及多个表查找来组装一个对象。我希望我的对象体积小。***我对 MongoDB 在这些任务中的表现有几个问题***：

1-)**仅基于主 ID 查找的大量阅读**：所以我不会使用任何辅助“where”语句，只查找给定文档 ID 数组（当然还有文档键的主索引）。

2-)**为新条目**写作：我将把每个新条目写成一个文档。（不要指望这会很重）。

3-)**对现有文档的小操作**：增加嵌套在文档中的整数，或检查嵌套在文档中的数组中是否存在值，向列表中添加新条目等。

根据您的知识或经验，mongoDB 将如何执行这些任务？

提前致谢。

有人告诉我这个问题很模糊，我不知道为什么。我在问 mongoDB 在一般情况下如何处理这些操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T18:43:39.323

有关工作集（以及一般的内存映射机制）的信息，请参阅[http://docs.mongodb.org/manual/faq/storage/#what-is-the-working-set上的常见问题解答](http://docs.mongodb.org/manual/faq/storage/#what-is-the-working-set)

关于如何有效设置 MongoDB 的另一个有用信息来源是[http://info.10gen.com/rs/10gen/images/10gen-MongoDB_Operations_Best_Practices.pdf](http://info.10gen.com/rs/10gen/images/10gen-MongoDB_Operations_Best_Practices.pdf)

这有帮助吗？

干杯

罗纳德

# java - 排序：如何创建特定的自定义顺序，然后在 java 中按字母排序

> ID：15091732
> 
> 赞同：10
> 
> 时间：2013-02-26T14:34:04.907
> 
> 标签：java, list, sorting, collections, comparator

我有一个包含大约 70 个字段的枚举。

我希望其中 10 个按特定顺序显示，然后我希望其余的使用比较器按字母顺序显示。我已经尝试了很多东西，但我无法让它发挥作用。

这是一个带有减少属性的示例枚举， **我希望 Picard、Worf 和 William 先显示，然后按字母顺序显示其余的**

我不能使用任何第三个库。它必须是java核心。因此，如果您想提供 guava 答案或 apache commons 答案，请在 java core 之外提供。

```
public enum StarTrek {

    JeanLucPicard("Picard"),
    GeordiLaForge("Geordi"),
    DiannaTroi("Dianna"),
    Worf("Worf"),
    WilliamRiker("William"),
    Q("Q");

    private String label;

    StarTrek(String label) { this.label = label; }

    @Override public String toString() { return label; }
}

    List<StarTrek> specificOrder = Arrays.asList(StarTrek.JeanLucPicard, StarTrek.Worf, StarTrek.WilliamRiker);

    Comparator<StarTrek> comp = new Comparator<StarTrek>() {
            @Override
            public int compare(StarTrek o1, StarTrek o2) {
                //TODO: loop through the specific order, and display those first, then for the rest, go alphabetic
                return 0;
            }
    };

    List<StarTrek> all = Arrays.asList(StarTrek.values());
    Collections.sort(all, comp); 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-26T14:54:40.680

仅出于按特定顺序显示的目的而在枚举中放置其他数据是不好的设计。相反，将所有这些逻辑放在你的`Comparator`中，如下所示：

```
public class StarTrekSorter implements Comparator<StarTrek> {

  private static final List<StarTrek> ORDERED_ENTRIES = Arrays.asList(
      StarTrek.JeanLucPicard, StarTrek.Worf, StarTrek.WilliamRiker);

  @Override
  public int compare(StarTrek o1, StarTrek o2) {
    if (ORDERED_ENTRIES.contains(o1) && ORDERED_ENTRIES.contains(o2)) {
      // Both objects are in our ordered list. Compare them by
      // their position in the list
      return ORDERED_ENTRIES.indexOf(o1) - ORDERED_ENTRIES.indexOf(o2);
    }

    if (ORDERED_ENTRIES.contains(o1)) {
      // o1 is in the ordered list, but o2 isn't. o1 is smaller (i.e. first)
      return -1;
    }

    if (ORDERED_ENTRIES.contains(o2)) {
      // o2 is in the ordered list, but o1 isn't. o2 is smaller (i.e. first)
      return 1;
    }

    return o1.toString().compareTo(o2.toString());
  }
} 
```

现在，您可以排序：

```
public static void main(String[] args) {

  List<StarTrek> cast = Arrays.asList(StarTrek.values());

  Collections.sort(cast, new StarTrekSorter());

  for (StarTrek trek : cast) {
    System.out.println(trek);
  }  
} 
```

哪个打印

```
Picard
Worf
William
Dianna
Geordi
Q 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T14:42:03.773

我会这样做：

```
JeanLucPicard("Picard", 0),
GeordiLaForge("Geordi"),
DiannaTroi("Dianna"),
Worf("Worf", 1),
WilliamRiker("William", 2),
Q("Q");

StarTrek(String label) { this(label, -1); }
StarTrek(String label, int orderHint) { this.label=label; this.orderHint=orderHint; } 
```

在`compare`方法中是这样的：

```
if (orderHint == -1) {
   return o1.label.compareTo(o2.label));
}
return o2.orderHint-o1.orderHint; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T14:48:55.993

在列表中首先列出您想要特殊排序的枚举，然后使用以下代码：

```
Comparator<StarTrek> comp = new Comparator<StarTrek>() {
    public int compare(StarTrek o1, StarTrek o2) {
        if (o1.ordinal() < 3)
            return o2.ordinal() < 3 ? o1.ordinal() - o2.ordinal() : 1;
        return o2.ordinal() < 3 ? -1 : o1.name().compareTo(o2.name());
    }
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T14:48:36.730

你可以在你的枚举中定义一个额外的构造函数，它接受一个索引参数，然后为你想先去的实例提供索引（让你想去的那些不按字母顺序排列）：

```
enum StarTrek {

    JeanLucPicard("Picard"),
    GeordiLaForge("Geordi"),
    DiannaTroi("Dianna"),
    Worf("Worf", 2),
    WilliamRiker("William", 1),
    Q("Q");

    private final String label;
    private final Integer index;

    StarTrek(final String label, final Integer index ) { this.label = label; this.index = index; }

    StarTrek(final String label) { this.label = label; this.index = Integer.MAX_VALUE; }

    @Override public String toString() { return label; }

    public Integer getIndex() {
        return index;
    }
} 
```

然后你的比较器必须看起来像：

```
final Comparator<StarTrek> comp = new Comparator<StarTrek>() {
                @Override
                public int compare(final StarTrek o1, final StarTrek o2) {
                    if (!o1.getIndex().equals(o2.getIndex())) {
                        return o1.getIndex().compareTo(o2.getIndex());
                    }
                    return o1.toString().compareTo(o2.toString());
                }
        }; 
```

# php - 如何在 pdo 中转义字符串？

> ID：15091734
> 
> 赞同：9
> 
> 时间：2013-02-26T14:34:40.167
> 
> 标签：php, mysql, pdo

我想知道如何在 pdo 中转义字符串。我一直在像下面的代码一样逃离弹簧，但现在使用 pdo 我不知道该怎么做

```
$username=(isset($_POST['username']))? trim($_POST['username']): '';
$previlage =(isset($_GET['previlage']));
$query ="SELECT * FROM site_user 
WHERE username = '".mysql_real_escape_string($_SESSION['username'])."' AND  previlage ='Admin'";
$security = mysql_query($query)or die (mysql_error($con));
$count = mysql_num_rows($security); 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-26T14:35:53.310

好吧，您可以使用[**PDO::quote**](http://php.net/manual/en/pdo.quote.php)，但是，正如它自己的文档中所说...

> 如果您使用此函数构建 SQL 语句，强烈建议您使用[**PDO::prepare()**](http://www.php.net/manual/en/pdo.prepare.php)来准备带有绑定参数的 SQL 语句，而不是使用 PDO::quote() 将用户输入插入到 SQL 语句中。

在您的情况下，它可能如下所示：

```
$query = "SELECT * 
            FROM site_user 
           WHERE username = :username AND previlage = 'Admin'";
$sth   = $dbh->prepare($query);
$sth->execute(array(':username' => $_SESSION['username']) ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T14:37:19.517

`mysql_*`功能在 PDO 中不起作用。为什么？因为 PDO 不使用 mysql 连接到数据库，所以就输入清理而言，PDO 使用准备好的语句，你可以在这里找到一个很好的教程：[pdo](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)

# html - Canvas 3d 改变画布轴的方向

> ID：15091736
> 
> 赞同：1
> 
> 时间：2013-02-26T14:34:42.297
> 
> 标签：html, canvas, graph, html5-canvas

我正在使用画布 3d 绘制 3D 图形。但默认情况下，坐标原点位于左上角。为此，我使用了 translate 并将其带到画布中心，如下所示。

```
canvasElement.getContext('2d').translate(constants.canvasWidth/2,   constants.canvasHeight/2); 
```

其中 canvasWidth 和 canvasHeight 已经定义。但是现在我的轴方向有另一个问题。现在正y轴朝下，-ve y轴朝上。如何使它正确，使+ve y轴朝上，-ve y轴朝下? 请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:45:30.477

而不是偏移中心计算y位置。从画布的高度/2 中减去 y 值。

```
x1 = canvasHeight/2 + x;
y1 = canvasHeight/2 - y; 
```

# javascript - Highcharts/Stockcharts 分别堆叠系列

> ID：15091741
> 
> 赞同：1
> 
> 时间：2013-02-26T14:34:51.637
> 
> 标签：javascript, highcharts, highstock

我正在考虑尝试将完全不同的系列/图表堆叠在一起，但在同一个图表上。例如，我可以有两个垂直堆叠的图表，当我将十字准线移动到一个上时，它会移动到另一个上，几乎就像这些图表是链接的一样。同样，当我放大一个时，它会触发另一个放大。请查看我“修改”底部的图像，让您了解我正在尝试完成的工作。

我尝试过的事情：

1.  创建两个完全独立的图表并将它们堆叠起来。

    *   这是我最接近我需要的东西，但它们仍然是独立的实体，所以它不适用于我需要的东西，十字准线/缩放/等。都需要像图表链接/组合一样工作。
2.  在选项中，我尝试了“堆叠”选项。

    *   这行不通，因为它“堆叠”或分组数据，我想从字面上有两个独立的系列，它们可能没有任何共同点。
3.  渲染多个 y 轴。

    *   唯一的问题是它是重叠的数据，我希望它被偏移，以便我们可以在堆叠布局中看到它。

我对使用这个库很陌生，所以如果我的任何术语或解释听起来不正确，请关闭，我会详细说明。

感谢大家！

![截屏](../Images/8d6f3c9f6d09b5cd789064bab0bece03.png)

# php - 跳过函数参数

> ID：15091747
> 
> 赞同：-3
> 
> 时间：2013-02-26T14:35:09.110
> 
> 标签：php

如果我有这样定义的函数：

```
function x($a, $b, $c) 
```

我怎样才能拨打类似的电话`query('a', 'b')`，将 b 替换为 $c？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T14:36:23.060

你可以调用它`query('a', null, 'b')`

# drop-down-menu - 下拉菜单内的推特引导下拉按钮

> ID：15091750
> 
> 赞同：1
> 
> 时间：2013-02-26T14:35:16.547
> 
> 标签：drop-down-menu, twitter-bootstrap

我设法在另一个下拉按钮的下拉菜单中显示一个下拉按钮。

查看[http://jsbin.com/opepeg/1/edit](http://jsbin.com/opepeg/1/edit)了解我想要实现的目标。

现在的问题是，当我单击主按钮时，它可以正常工作，但是里面的按钮没有显示它的菜单。我在做什么错？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T05:52:23.143

我通过添加解决了它：

`$(this).parent().toggleClass('open');`

到内部按钮标签的onclick事件。您可以在我提供的有问题的 jsbin 链接中看到。

这是修改后的html：

```
 <a class="dropdown-toggle btn" data-toggle="dropdown" href="javascript:;" 
onclick="$(this).parent().toggleClass('open');">
      Search by date&nbsp;<span class="caret"></span>
    </a> 
```

和一些CSS：

```
.btn-group.open .btn-group .btn.dropdown-toggle{
    background-color: #f5f5f5;
    background-image: -webkit-linear-gradient(top, #ffffff, #e6e6e6);
    background-image: -moz-linear-gradient(top, #ffffff, #e6e6e6);
    background-image: linear-gradient(top, #ffffff, #e6e6e6);
    -moz-box-shadow: none;
    -webkit-box-shadow: none;
    box-shadow: none;
} 
```

# php - 使用 cURL 获取 favicon - 如何检查 favicon 是否实际存在

> ID：15091751
> 
> 赞同：1
> 
> 时间：2013-02-26T14:35:21.813
> 
> 标签：php, curl, favicon

我正在使用 Google 和 cURL 的组合来检索和保存我的用户在其个人资料中输入的网站的网站图标。我正在使用以下代码：

```
$url = 'www.madeupwebsitewithnoFavicon.com';
$fp = fopen ('img/favicons/'.$saveFileName.'.png', 'w+');
$ch = curl_init('http://www.google.com/s2/favicons?domain='.$url);
curl_setopt($ch, CURLOPT_TIMEOUT, 6);
/* Save the returned data to a file */
curl_setopt($ch, CURLOPT_FILE, $fp);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_exec($ch);
curl_close($ch);
fclose($fp); 
```

我想知道该网站是否真的有一个网站图标，以便我可以继续并将有关它的内容保存到数据库中。我用谷歌搜索但找不到适合我的解决方案。

我确实看到了一些看起来对我有用但没有的东西：

```
$pattern = '/<link[^>]+rel\s*=\s*["\']?\s*shortcut\s+icon\s*["\']?/i';
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
return preg_match($pattern, curl_exec($ch)); 
```

有人有什么想法吗？这对我来说有点新鲜

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:38:26.723

卷曲 $domain."./favicon.ico" 并测试 http 响应是否为 200 怎么样？

# maven - 哪个是下载编译所需内容的正确 Maven 阶段？

> ID：15091752
> 
> 赞同：1
> 
> 时间：2013-02-26T14:35:24.100
> 
> 标签：maven

我试过`process-sources`了，但对我来说听起来不对，因为我需要在源代码完成任何事情之前的那一刻。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T14:51:02.623

在可以使用之前，[生命周期](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#Lifecycle_Reference)的早期阶段有三个早期阶段：`process-sources`

> 1.  验证 → 验证项目是否正确并且所有必要的信息都可用。
> 2.  初始化 → 初始化构建状态，例如设置属性或创建目录。
> 3.  generate-sources → 生成任何源代码以包含在编译中。

从文档中，我会`validate`根据“必要的信息可用”部分选择阶段。

或者您可以创建自己的阶段 - 请参阅[创建新阶段](https://stackoverflow.com/questions/12433120/maven-creating-a-new-phase)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T14:49:55.553

您可以使用初始化，这只是在与源相关的任何内容之前，如下所述： [http ://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#Lifecycle_Reference](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#Lifecycle_Reference)

# gnuplot - Gnuplot 将颜色条划分为不同的扇区

> ID：15091754
> 
> 赞同：2
> 
> 时间：2013-02-26T14:35:24.623
> 
> 标签：gnuplot, colorbar

我想要一个分为 5 种颜色的颜色条。一种颜色从 0 到 95，另一种颜色到 97，然后是 99、99.8 和 100。

到目前为止我所做的是：

```
set palette maxcolors 5
set palette defined ( 0 "cyan", 95 "green", 97 "yellow", 99 "orange", 99.8 "red") 
```

但这只是将 0 到 100 的范围划分为 5 个相等的范围，上面的颜色

你有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T16:30:41.937

This would solve the problem. It will create ticks on the colorbar at 0, 95, 97, 99, 99.8 and 100 and set the colors cyan green yellow, orange and red for the corresponding intervals.

```
set cbtics ("0" 0, "95" 95, "97" 97, "99" 99, "99.8" 99.8, "100" 100)

set palette defined ( 0 "cyan", 95 "cyan", 95 "green", 97 "green",97 "yellow", 99"yellow", 99"orange", 99.8"orange", 99.8"red", 100 "red" )

set pm3d map 
```

Hope it will be of help for somebody.

# asp.net - 带有 Asp.net 的 Yahoo 富文本编辑器无法正常工作

> ID：15091757
> 
> 赞同：0
> 
> 时间：2013-02-26T14:35:37.717
> 
> 标签：asp.net, yui, ascx

我试图在我的 ascx 用户控件中制作雅虎富文本编辑器，但即使在得到雅虎开发者协会的帮助后我也失败了。

我在这里做了什么。

1）我创建了ascx用户控件并粘贴了文本区域的html代码

```
<div class="yuieditor">

<form method="post" action="#" id="form1"> 
    <textarea id="myEditor" name="editor" rows="20" cols="75"> 

    </textarea> 
    </form>
</div> 
```

2) 我从雅虎为我的富文本编辑器初始化了雅虎 CSS 和 javascript。

```
<!-- Skin CSS file -->
<link rel="stylesheet" type="text/css"
href="http://yui.yahooapis.com/2.7.0/build/assets/skins/sam/skin.css"/>
<!-- Utility Dependencies -->
<script type="text/javascript"
src="http://yui.yahooapis.com/2.7.0/build/yahoo-dom-event/yahoo-dom-event.js"></script>
<script type="text/javascript"
src="http://yui.yahooapis.com/2.7.0/build/element/element-min.js"></script>
<!-- Needed for Menus, Buttons and Overlays used in the Toolbar -->
<script type="text/javascript" src="http://yui.yahooapis.com/2.7.0/build/container/container_core-min.js"></script>
<script  type="text/javascript" src="http://yui.yahooapis.com/2.7.0/build/menu/menu-min.js"></script>
<script type="text/javascript" src="http://yui.yahooapis.com/2.7.0/build/button/button-min.js"></script>
<!-- Source file for Rich Text Editor-->
<script type="text/javascript" src="http://yui.yahooapis.com/2.7.0/build/editor/editor-min.js"></script>
<script type="text/javascript" src="http://yui.yahooapis.com/2.7.0/build/connection/connection-min.js"></script>
<script type="text/javascript" src="/wp-content/uploads/2007/10/yui-image-uploader26.js"></script>
<script  type="text/javascript">
    var myEditor = new YAHOO.widget.Editor('example_editor', {
        height: '300px',
        width: '522px',
        dompath: true,
        animate: true
    });
    yuiImgUploader(myEditor, 'example_editor',
'/wp-content/uploads/2007/12/yui_img_uploader.php', 'image');
    myEditor.render();
</script> 
```

但它不能正常工作:(我很沮丧，但我不想使用任何其他编辑器，我只想使用它。

请帮忙。

这是我在 ascx 上的完整代码。

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="yui.ascx.cs" Inherits="YUI.yui" %>

<!-- Skin CSS file -->
<link rel="stylesheet" type="text/css"
href="http://yui.yahooapis.com/2.7.0/build/assets/skins/sam/skin.css"/>
<!-- Utility Dependencies -->
<script type="text/javascript"
src="http://yui.yahooapis.com/2.7.0/build/yahoo-dom-event/yahoo-dom-event.js"></script>
<script type="text/javascript"
src="http://yui.yahooapis.com/2.7.0/build/element/element-min.js"></script>
<!-- Needed for Menus, Buttons and Overlays used in the Toolbar -->
<script type="text/javascript" src="http://yui.yahooapis.com/2.7.0/build/container/container_core-min.js"></script>
<script  type="text/javascript" src="http://yui.yahooapis.com/2.7.0/build/menu/menu-min.js"></script>
<script type="text/javascript" src="http://yui.yahooapis.com/2.7.0/build/button/button-min.js"></script>
<!-- Source file for Rich Text Editor-->
<script type="text/javascript" src="http://yui.yahooapis.com/2.7.0/build/editor/editor-min.js"></script>
<script type="text/javascript" src="http://yui.yahooapis.com/2.7.0/build/connection/connection-min.js"></script>
<script type="text/javascript" src="/wp-content/uploads/2007/10/yui-image-uploader26.js"></script>
<script  type="text/javascript">
    var myEditor = new YAHOO.widget.Editor('example_editor', {
        height: '300px',
        width: '522px',
        dompath: true,
        animate: true
    });
    yuiImgUploader(myEditor, 'example_editor',
'/wp-content/uploads/2007/12/yui_img_uploader.php', 'image');
    myEditor.render();
</script>
<div class="yuieditor">

<form method="post" action="#" id="form1"> 
    <textarea id="myEditor" name="editor" rows="20" cols="75"> 

    </textarea> 
    </form>
</div> 
```

请帮我弄清楚为什么这不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:49:31.470

您没有在代码中使用正确的控件 ID，试试这个：

改变

```
 new YAHOO.widget.Editor('example_editor', 
```

至

```
 new YAHOO.widget.Editor('myEditor', 
```

更新您的代码以使用正确的 id -`myEditor`代替`example_editor`您的代码的其他部分

还要更改您的代码以使用`yui-skin-sam`类而不是`yuieditor`

前任：

```
<div class="yui-skin-sam"> 
```

工作代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
<!-- Skin CSS file -->
<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/2.9.0/build/assets/skins/sam/skin.css">
<!-- Utility Dependencies -->
<script src="http://yui.yahooapis.com/2.9.0/build/yahoo-dom-event/yahoo-dom-event.js"></script> 
<script src="http://yui.yahooapis.com/2.9.0/build/element/element-min.js"></script> 
<!-- Needed for Menus, Buttons and Overlays used in the Toolbar -->
<script src="http://yui.yahooapis.com/2.9.0/build/container/container_core-min.js"></script>
<script src="http://yui.yahooapis.com/2.9.0/build/menu/menu-min.js"></script>
<script src="http://yui.yahooapis.com/2.9.0/build/button/button-min.js"></script>
<!-- Source file for Rich Text Editor-->
<script src="http://yui.yahooapis.com/2.9.0/build/editor/editor-min.js"></script>
<script  type="text/javascript">
    var myEditor = new YAHOO.widget.Editor('myEditor', {
        height: '300px',
        width: '522px',
        dompath: true,
        animate: true
    });

    myEditor.render();
</script>
</head>
<body>
<div class="yui-skin-sam">

<form method="post" action="#" id="form1"> 
    <textarea id="myEditor" name="editor" rows="20" cols="75"> 

    </textarea> 
    </form>
</div>
</body> 
```

# html - URL 和图像源中使用的文件名中的空格。浏览器是否处理它们或者我应该手动编码

> ID：15091758
> 
> 赞同：0
> 
> 时间：2013-02-26T14:35:37.810
> 
> 标签：html, email

我只是问，因为我尝试发送一封电子邮件（使用 PEAR），其中包含一个名称类似于“header image_3021”的图像，并注意到它没有出现在电子邮件中。

当我在收到的电子邮件中检查 SRC 时，空格被替换为 + 并且不知何故使链接指向错误的文件。现在，IIRC，+ 是 URL 中空格的正确编码，但浏览器无法找到“header+image_2031”。

我使用 Gmail 的 show original 和服务器日志检查了电子邮件的原始内容，并且空间仍然存在，因此替换是由浏览器或 Gmail 的呈现过程完成的。

我已经修改了我的上传算法，不允许文件名中有空格，但我不得不问：确保浏览器显示文件名中带有空格的图像的最佳方法是什么？自己用 %20 替换它们？让浏览器来做？只是不允许他们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:41:23.967

绝对编码它们。通过这样做，您消除了不同客户端将如何解释字符串的细微差别。正如@mr alien 所说，有现成的php 函数可以为您处理。

# azure - 如何保护我的 Azure Web 角色免受其他人的侵害？

> ID：15091763
> 
> 赞同：6
> 
> 时间：2013-02-26T14:35:48.367
> 
> 标签：azure, firewall

我在 Azure 上有一个 Web 角色。我想只允许我的人访问网络角色。我发现 post to manual/code 以限制 IP 访问该角色。我想创建防火墙方式（类似于 SQL Azure 的防火墙）来阻止/允许 IP。

我在 Azure 控制台中找不到任何设置。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T14:46:06.180

如果您通过 Windows Azure 负载平衡器在 Internet 上发布您的端点，则无法在 Azure 上定义防火墙规则。

但是，您可以通过 Windows Azure 虚拟网络服务保护对使用 Windows Azure 的基础架构即服务 (IaaS) 技术或其平台即服务 (PaaS) 技术创建的 VM 的访问。

Windows Azure 虚拟网络允许您在 Windows Azure 数据中心内围绕一组称为虚拟网络或 VNET 的 VM 创建逻辑边界。然后，它允许您在此 VNET 和您的本地网络之间建立 IPsec 连接。

有关详细信息，请参阅[网络](http://www.windowsazure.com/en-us/home/features/networking/)、[Windows Azure 网络](http://www.windowsazure.com/en-us/develop/net/fundamentals/networking/)、[Windows Azure 虚拟网络](http://msdn.microsoft.com/en-us/library/windowsazure/jj156007.aspx)、[为跨界连接](http://www.windowsazure.com/en-us/manage/services/networking/cross-premises-connectivity/)[创建虚拟网络、在 Windows Azure 中创建虚拟](http://www.windowsazure.com/en-us/manage/services/networking/create-a-virtual-network/)网络。

关于此服务的费用：Windows Azure 虚拟网络目前（2013 年 2 月）免费提供预览版。一旦服务变得普遍可用，如果您在虚拟网络 (VNET) 和 VPN 网关之间创建硬件 VPN 连接，您将需要付费。费用将按 VPN 连接配置和可用的每小时计算（称为“VPN 连接时间”）。通过 VPN 连接传输的所有数据均按 Window Azure 的标准数据传输费率收费。您可以使用[定价计算器](http://www.windowsazure.com/en-us/pricing/calculator/?scenario=full)进行模拟。

# makefile - 如何编写将应用可选补丁的 makefile 后缀规则

> ID：15091765
> 
> 赞同：0
> 
> 时间：2013-02-26T14:35:54.680
> 
> 标签：makefile, patch

在 makefile（我有 GNU Make 3.82）中，假设我有一个像这样设置的后缀规则：

```
.a.b:
    a_to_b $< 
```

现在，假设我想对生成的 .b 文件应用补丁。我可以做这个：

```
.a.b:
    a_to_b $<
    patch -p0 < $*.patch 
```

但是，如果没有每个 .b 的补丁，如何才能使补丁步骤以 .patch 文件的存在为条件，以便任何具有可用补丁的 .b 都应用补丁，但留下任何其他 .b就像 a_to_b 完成后一样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T12:34:53.460

如果您只想应用补丁（如果存在），则可以将规则更改为：

```
.a.b:
        a_to_b $<
        [ ! -f $*.patch ] || patch -p0 < $*.patch 
```

但是，您可能还希望在补丁文件已更改时触发规则，即使 .a 文件未更改。在这种情况下，您必须切换到模式规则，并编写两个：一个带有补丁先决条件，另一个没有：

```
%.b : %.a %.patch
        a_to_b $<
        patch -p0 < $*.patch

%.b : %.a
        a_to_b $< 
```

# vhdl - 如何修复 Xilinx ISE 关于敏感度列表的警告？

> ID：15091766
> 
> 赞同：1
> 
> 时间：2013-02-26T14:35:55.117
> 
> 标签：vhdl, xilinx, synthesis

我用 Xilinx ISE 13.1 综合了我的设计。目标设备是 Virtex 5。然后我遇到了这个警告：

```
 WARNING:Xst:819 - "F:/FRONT-END/h264/inter/src/eei/eei_mvd.vhd" 
line 539: One or more signals are missing in the process sensitivity list. 
To enable synthesis of FPGA/CPLD hardware, XST will assume that all necessary signals are present in the sensitivity list. 
Please note that the result of the synthesis may differ from the initial design specification. The missing signals are:    
<mvd_l0<3><3>>, <mvd_l0<3><2>>, <mvd_l0<3><1>>, <mvd_l0<3><0>>, <mvd_l0<2><3>>, <mvd_l0<2><2>>,
 <mvd_l0<2><1>>, <mvd_l0<2><0>>, <mvd_l0<1><3>>, <mvd_l0<1><2>>, <mvd_l0<1><1>>, <mvd_l0<1><0>>,
 <mvd_l0<0><3>>, <mvd_l0<0><2>>, <mvd_l0<0><1>>, <mvd_l0<0><0>>, <mvd_l1<3><3>>, <mvd_l1<3><2>>,
 <mvd_l1<3><1>>, <mvd_l1<3><0>>, <mvd_l1<2><3>>, <mvd_l1<2><2>>, <mvd_l1<2><1>>, <mvd_l1<2><0>>,
 <mvd_l1<1><3>>, <mvd_l1<1><2>>, <mvd_l1<1><1>>, <mvd_l1<1><0>>, <mvd_l1<0><3>>, <mvd_l1<0><2>>, 
<mvd_l1<0><1>>, <mvd_l1<0><0>>, <mvd<0>>, <mvd<1>> 
```

这是我的源代码：

```
proc_update_next: process(mvd_l0, mvd_l1, mvd, subMBPart_Idx, MBPart_Idx, eei_info )
  begin
    --// Init
    next_mvd_l0 <= mvd_l0;
    next_mvd_l1 <= mvd_l1;
    --// Change
    if eei_info.mb_type =  BLK_8x8 then
      for  i in 3 downto 0 loop
        for  j  in 3 downto 0  loop
          if i = to_integer(unsigned(MBPart_Idx))  and j = to_integer(unsigned(subMBPart_Idx)) then
            next_mvd_l0(i)(j)  <=  mvd(0);
            next_mvd_l1(i)(j)  <=  mvd(1);
          end  if;
        end  loop;
      end loop;
    else
      for  i in 3 downto 0 loop
        if i = to_integer(unsigned(MBPart_Idx)) then
          next_mvd_l0(i)(0)  <=  mvd(0);
          next_mvd_l1(i)(0)  <=  mvd(1);
        end  if;
      end loop;
    end if;
  end process; 
```

更新：我在我的代码中进行了一些更改，但仍然是这个警告。

mvd_l0 和 mvd_l1 是二维数组，出现在敏感度列表中。我知道我的源代码太抽象了，ISE 可能无法理解。

我尝试使用 Virtex 7（在实验室中不可用）然后没有错误。所以，我的问题是如何解决这个警告？我不能忽略这个警告，因为它可能导致闩锁。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T10:53:08.213

使用 VHDL-2008 构造`process(all)`告诉工具您希望灵敏度列表包含所有读取的信号。

或者，让它成为一个时钟进程，只对时钟敏感，然后你也不必担心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:36:23.903

您应该只为一组条件设置像`next_mvd_l0`和一次这样的信号。`next_mvd_l1`“init”部分仍然是一个问题。如果要避免重置进程，最好使用局部变量。

最佳选择：将重置添加到敏感度列表，如果启用，请将 next_mvd_* 设置为您的初始值

```
--// Init
if (reset = '1') then
    next_mvd_l0 <= mvd_l0;
    next_mvd_l1 <= mvd_l1;
end if; 
```

第二种选择：使用局部变量

```
proc_update_next: process(mvd_l0, mvd_l1, mvd, subMBPart_Idx, MBPart_Idx, eei_info )
    variable mvd_10_local : 2dArrayType;
    variable mvd_11_local : 2dArrayType;
begin
    --// Init
    mvd_10_local := mvd_l0;
    mvd_11_local := mvd_l1;
    --// Change
    if eei_info.mb_type =  BLK_8x8 then
        for  i in 3 downto 0 loop
            for  j  in 3 downto 0  loop
                if i = to_integer(unsigned(MBPart_Idx))  and j = to_integer(unsigned(subMBPart_Idx)) then
                    mvd_10_local(i)(j)  :=  mvd(0);
                    mvd_11_local(i)(j)  :=  mvd(1);
                end  if;
            end  loop;
        end loop;
    else
        for  i in 3 downto 0 loop
            if i = to_integer(unsigned(MBPart_Idx)) then
                    mvd_10_local(i)(j)  :=  mvd(0);
                    mvd_11_local(i)(j)  :=  mvd(1);
            end  if;
        end loop;
    end if;
    next_mvd_l0 <= mvd_10_local;
    next_mvd_l1 <= mvd_l1_local;
end process; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T16:19:43.257

您使用 VHDL 记录构造 (eei_info.mb_type)。您可以将每个记录元素添加到 sens-list 以使 xst 满意。我只是忽略了这个警告。

# c# - 当前上下文中不存在名称“clinics”

> ID：15091769
> 
> 赞同：1
> 
> 时间：2013-02-26T14:36:08.197
> 
> 标签：c#, asp.net, visual-studio

我不知道这意味着什么，因为我不太擅长 C# 或 Visual Studio。我正在创建一个基本控制台，它将显示来自数据库的数据。

这是 program.cs 代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace Assessment
{
    class Program
    {
        static void Main(string[] args)
        {
            FirstQuery();
        }

        private static void FirstQuery()
        {
            using (var context = new AssessmentEntities())
            {
                var clinic = context.Clinics;
                Console.WriteLine("Query Result");
                foreach (var clinic in clinics)
                {
                    Console.WriteLine("{0} {1}".clinic.clinic_id, clinic.clinci_name);
                }
                Console.Write("Press return to continue...");
                Console.ReadLine();
            }
        }
    }
} 
```

我不确定您还需要查看哪些其他代码，所以请告诉我，我会将其粘贴进去。谢谢

我得到的错误代码是（“当前上下文中不存在名称'clinics'）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T14:38:07.783

改变这个从

```
foreach (var clinic in clinics)
{
         Console.WriteLine("{0} {1}".clinic.clinic_id, clinic.clinci_name);
} 
```

到

```
foreach (var c in clinic)
{
          Console.WriteLine("{0} {1}".c.clinic_id, c.clinic_name);
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T14:38:16.850

看来你有一个错字，而不是

```
var clinic = context.Clinics; 
```

应该有

```
var clinics = context.Clinics; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T14:38:29.720

这是一个错字（诊所而不是诊所）

最简单的改变是将分配更改为诊所 -

```
var clinics = context.Clinics; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T14:40:13.137

采用：

```
var clinics = context.Clinics; 
```

代替

```
var clinic = context.Clinics; 
```

# c# - 复选框 SelectedItem 文本到 Linq 数据库

> ID：15091772
> 
> 赞同：-3
> 
> 时间：2013-02-26T14:36:13.263
> 
> 标签：c#, asp.net, linq

我构建了一个 ASP.net 用户控件，并试图从复选框中获取文本以传递给数据库。我的问题是我使用我使用的方法提交时一直出错。这是我使用的：

```
 ResidenceHallInspection rhi = new ResidenceHallInspection();
            rhi.versionId = version.id;
            rhi.submitDate = DateTime.Now;
            rhi.CheckInOrOut = ddlCheck.SelectedItem.Text;
            rhi.StudentId = txtStudentId.Text;
            rhi.FirstName = txtFirstName.Text;
            rhi.MiddleName = txtMiddleName.Text;
            rhi.LastName = txtLastName.Text;
            rhi.Walls = chbxWalls.SelectedItem.Text;
            rhi.Windows = chbxWindows.SelectedItem.Text;
            rhi.Blinds = chbxBlinds.SelectedItem.Text;
            rhi.Couch = chbxCouch.SelectedItem.Text;
            rhi.CommonRoomCouch = chbxCRCouch.SelectedItem.Text;
            rhi.CommonRoomChair = chbxCRChair.SelectedItem.Text;
            rhi.Doors = chbxDoors.SelectedItem.Text;
            rhi.Carpet = chbxCarpet.SelectedItem.Text;
            rhi.Ceiling = chbxCeiling.SelectedItem.Text;
            rhi.CommonRoomCounter = chbxCRCounter.SelectedItem.Text;
            rhi.Cabinet = chbxCabinet.SelectedItem.Text;
            rhi.Phone = chbxPhone.SelectedItem.Text;
            rhi.Bed = chbxBed.SelectedItem.Text;
            rhi.Desk = chbxDesk.SelectedItem.Text;
            rhi.DeskChairs = chbxDeskChair.SelectedItem.Text;
            rhi.Tub = chbxTub.SelectedItem.Text;
            rhi.Vanity = chbxVanity.SelectedItem.Text;
            rhi.Notes = txtNotes.Text;
            rhi.Building = txtResHall.Text;
            rhi.ApartmentNumber = txtSuitNo.Text;
            rhi.BedSpace = txtBedSpace.Text;

             house.AddToResidenceHallInspections(rhi);
            house.SaveChanges() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:41:59.533

最好查看更多信息，例如您收到的错误，以及可能的自定义用户控件的代码和/或 HTML。但是，有几种可能性似乎是可能的。一个是您的 SelectedItem 属性可能是`null`，这会导致`ObjectReferenceException`发生。另一个是 Text 本身为空，并且您的数据库不允许您分配的一个或多个字段为空值。

如果您提供更多信息，您可以获得比这个相当模糊的答案更好的答案。

# mysql - 检查以逗号分隔的值中的双倍条目？

> ID：15091774
> 
> 赞同：0
> 
> 时间：2013-02-26T14:36:14.770
> 
> 标签：mysql

有没有办法获得这样的值：“300、400、500、300”检查用逗号分隔的每个数字，如果加倍删除它。所以值将如下所示：“300, 400, 500”。

我可以在 PHP 脚本中做到这一点，但我只是想知道是否可以使用 MySQL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:39:33.643

创建具有唯一索引的临时表，插入忽略重复错误的值，从临时表中选择所有记录，删除该表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T14:44:28.100

快速播放，但要获得每一行的唯一值，你可以使用这样的东西

```
SELECT Id, GROUP_CONCAT(DISTINCT aWord ORDER BY aWord ASC)
FROM (SomeTable.Id, SELECT SUBSTRING_INDEX(SUBSTRING_INDEX(concat(SomeColumn, ','), ' ', aCnt), ',', -1) AS aWord
FROM SomeTable
CROSS JOIN (
SELECT a.i+b.i*10+c.i*100 + 1 AS aCnt
FROM integers a, integers b, integers c) Sub1
WHERE (LENGTH(SomeColumn) + 1 - LENGTH(REPLACE(SomeColumn, ',', ''))) >= aCnt) Sub2
GROUP BY ID 
```

这依赖于有一个名为 integers 的表，其中包含一个名为 i 的单列，有 10 行，值为 0 到 9。它最多可以处理约 1000 个单词，但可以轻松更改以应对更多

可能最容易使用 INSERT / ON DUPLICATE KEY UPDATE 来使用它来使值唯一。

# django - 创建常规电子邮件

> ID：15091776
> 
> 赞同：3
> 
> 时间：2013-02-26T14:36:18.737
> 
> 标签：django, cron

我是 django-cron 的新手，正在尝试定期发送邮件。我一直在 db shell 中运行以下命令：

```
from django.core.mail import EmailMessage
email = EmailMessage('Subject', 'Body', to=['address@mail.com'])
email.send() 
```

效果很好。我在我的一个应用程序中创建了以下 cron.py：

```
from django_cron import CronJobBase, Schedule
from django.core.mail import EmailMessage

class SendMail(CronJobBase):

    RUN_EVERY_MINS = 1

    schedule = Schedule(run_every_mins=RUN_EVERY_MINS)
    code = 'apps.appname.cron.SendMail'

def job(self):
    email = EmailMessage('Subject', 'Body', to=['address@mail.com'])
    email.send() 
```

在我的设置中，我有：

```
CRON_CLASSES = [
    "apps.appname.cron.SendMail",
] 
```

最后在命令行中我正在运行

```
env/bin/python manage.py runcrons --settings=settings.dev 
```

我希望这会每分钟发送一次邮件，但是虽然我没有看到任何命令行错误，但邮件没有被发送。

非常感谢任何帮助

C

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T17:41:40.950

所以我想我正在查看旧版本的文档。在 SendMail 类中，方法应该是“do”而不是“job”。同时，虽然邮件只发送一次，而不是每分钟发送一次。

# mysql - mysql插入计数与磁盘io写入计数的关系

> ID：15091782
> 
> 赞同：0
> 
> 时间：2013-02-26T14:36:30.097
> 
> 标签：mysql, insert, io, count

我将记录插入存储引擎为 myISAM 的表中。mysql insert count('Com_insert') 大约是每秒 8000 次，但是当我运行命令 'iostat -dkx 1' 时，结果是：

```
Device:         rrqm/s   wrqm/s   r/s   w/s    rkB/s    wkB/s avgrq-sz avgqu-sz   await  svctm  %util

sda             0.00  1322.00  0.00 16.00     0.00  5352.00   669.00     0.59   36.62   5.44   8.70 
```

wrqm/s 和 w/s 之和约为 1400，远小于 8000（'Com_insert' 计数），为什么？

我认为mysql插入的计数应该大约等于磁盘的合并写入和真实写入的总和，对还是错？

提前致谢！

- - - - - - - - - - - - - - - - - - 更新 - - - - - - - -----------------

我一一插入记录，而不是批量插入：

```
insert into test(c1,c2,c3,c4) values(1,1,1,'a');
insert into test(c1,c2,c3,c4) values(1,1,1,'a');
insert into test(c1,c2,c3,c4) values(1,1,1,'a');
insert into test(c1,c2,c3,c4) values(1,1,1,'a');
insert into test(c1,c2,c3,c4) values(1,1,1,'a');
insert into test(c1,c2,c3,c4) values(1,1,1,'a');
insert into test(c1,c2,c3,c4) values(1,1,1,'a');
insert into test(c1,c2,c3,c4) values(1,1,1,'a');
insert into test(c1,c2,c3,c4) values(1,1,1,'a');
insert into test(c1,c2,c3,c4) values(1,1,1,'a'); 
```

...

表测试是 myISAM 表。myISAM 引擎会缓冲并合并这些插入操作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:41:56.070

不确定您是否可以建立任何这样的直接关系，或者是否有人可以建议任何一种方式，而无需更多地了解底层硬件或数据库如何安排自己的写入，甚至优化自己的 I/O。有各种各样的总线带宽、延迟、写入缓存以及十亿左右的其他因素必须考虑到这样的问题中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:07:28.707

有几件事情要记住，即使没有深入了解 MySQL 的细节。

记录的插入是在页面上完成的。通常，每页有不止一行。因此，如果您在同一事务中插入多行，则该页面只需在已填充时写入一次。

然后，您遇到了日志和脏页的问题。即使使用单独的事务，也会记录更改。这允许数据库延迟写入页面。. . 也许会发生另一个插入。

然后，您遇到了索引问题。还需要编写和记录索引。这通常会增加 I/O。

我不知道您的 I/O 计数是否考虑了日志和索引。但是，我冒昧地猜测您正在将多行同时插入到一个索引很少的表中。

# android - 检查文件中是否存在行

> ID：15091785
> 
> 赞同：1
> 
> 时间：2013-02-26T14:36:31.943
> 
> 标签：android, xml, bash, shell, scripting

问题是我的应用程序尝试将一行添加到`/system/csc`.

我需要一个函数来检查文件内是否有 X 行，如果它在那里，则不应添加该行，它还必须将该行放在文件中存在的另一行之前。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T14:41:47.533

您可以检查该行是否已存在，如果不存在则`grep`用于`sed`插入它：

```
grep -Fxq "foobar line" file || sed -i '/^context line$/i foobar line' file 
```

如果在文件中尚未找到该行，这将在该行`foobar line`之前插入该行。`context line``foobar line`

或者，您可以使用以下方式完成所有操作`sed`：

```
sed -i '/^foobar line$/d;/^context line$/i foobar line' file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:01:13.277

[awk sum up multiple files show lines which does not appear on both sets files](https://stackoverflow.com/questions/14876624/awk-sum-up-multiple-files-show-lines-which-does-not-appear-on-both-sets-of-files) check my answer on this page (the last answer to my own question) 我正在使用 ed 并在找到需要添加条目的行后我使用典型的 vi 命令在行号后面添加条目。

如果没有，您可以在对文件中的字符串执行 grep 后使用相同的脚本

```
grep pattern $file > /dev/null
if  [ $? = 0 ]; then
 echo "found"
else
run_ed_function
fi 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T14:39:50.580

尝试

```
grep -F "$yourLine" file.xml 
```

# android - 如何勾勒一个TextView？

> ID：15091790
> 
> 赞同：8
> 
> 时间：2013-02-26T14:36:48.783
> 
> 标签：android, fonts, android-canvas, draw, stroke

**我想做的事？**（蓝色将变为白色） ![在此处输入图像描述](../Images/51c68a624ac6bbc63428f654a9aec204.png)

**我做了什么？**
我找到了一个扩展 TextView 的类，它能够勾勒出非常接近我想要的文本视图。问题是我无法将描边颜色更改为任何颜色，它总是绘制为黑色。如何将边框颜色设置为白色？

**我的输出是什么：**
![在此处输入图像描述](../Images/782dbafdb98c89f5d523fa19f85a6ae2.png)

**我的代码在哪里？**

```
public class TypeFaceTextView extends TextView {

private static Paint getWhiteBorderPaint(){
    Paint p = new Paint(Color.WHITE);
    return p;
}

private static final Paint BLACK_BORDER_PAINT = getWhiteBorderPaint();

static {
    BLACK_BORDER_PAINT.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.DST_OUT));
}

@Override
public void setText(CharSequence text, BufferType type) {

    super.setText(String.format(text.toString()), type);
}

private static final int BORDER_WIDTH = 1;

private Typeface typeface;

public TypeFaceTextView(Context context) {
    super(context);
}

public TypeFaceTextView(Context context, AttributeSet attrs) {
    super(context, attrs);

    setDrawingCacheEnabled(false);

    setTypeface(attrs);
}

private void setTypeface(AttributeSet attrs) {
    final String typefaceFileName = attrs.getAttributeValue(null, "typeface");
    if (typefaceFileName != null) {
        typeface = Typeface.createFromAsset(getContext().getAssets(), typefaceFileName);
    }

    setTypeface(typeface);
}

public TypeFaceTextView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);

    setTypeface(attrs);
}

@Override
public void draw(Canvas aCanvas) {
    aCanvas.saveLayer(null, BLACK_BORDER_PAINT, Canvas.HAS_ALPHA_LAYER_SAVE_FLAG
            | Canvas.FULL_COLOR_LAYER_SAVE_FLAG | Canvas.MATRIX_SAVE_FLAG);

    drawBackground(aCanvas, -BORDER_WIDTH, -BORDER_WIDTH);
    drawBackground(aCanvas, BORDER_WIDTH + BORDER_WIDTH, 0);
    drawBackground(aCanvas, 0, BORDER_WIDTH + BORDER_WIDTH);
    drawBackground(aCanvas, -BORDER_WIDTH - BORDER_WIDTH, 0);

    aCanvas.restore();
    super.draw(aCanvas);

}

private void drawBackground(Canvas aCanvas, int aDX, int aDY) {
    aCanvas.translate(aDX, aDY);
    super.draw(aCanvas);
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T13:51:10.847

1）创建你的 textview 对象扩展 TextView

```
public class YourTextView extends TextView { ......... 
```

2）在它的draw方法上这样做

```
@Override
public void draw(Canvas canvas) {
        for (int i = 0; i < 5; i++) {
        super.draw(canvas);
    }
} 
```

3）如下设置textview的xml端

```
android:shadowColor="@color/white"
android:shadowRadius="5" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-07-09T06:41:59.463

我找到了简单的方法来概述视图，而无需从**TextView**继承。我写了一个简单的库，它使用 Android 的**Spannable**来概述文本。该解决方案提供了仅勾勒部分文本的可能性。

图书馆：[大纲跨度](https://github.com/santaevpavel/OutlineSpan)

班级（只能复制班级）：[OutlineSpan](https://gist.github.com/santaevpavel/61eb23092bdb8a926aeb8302ec95b4b6)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T15:28:38.490

不能这样，但尝试尝试：PorterDuff.Mode

[http://developer.android.com/reference/android/graphics/PorterDuff.Mode.html](http://developer.android.com/reference/android/graphics/PorterDuff.Mode.html)

尝试将其更改为“添加”或“清除”，希望这会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T09:31:28.660

您需要将 getWhiteBorderPaint() 方法更改为以下内容：

```
private static Paint getWhiteBorderPaint(){
    Paint p = new Paint();
    p.setColor(Color.WHITE);
    return p;
} 
```

[Paint 构造函数](http://developer.android.com/reference/android/graphics/Paint.html#Paint%28int%29)只接受位掩码标志，不支持任意整数作为参数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-02T12:39:13.957

调查了这个问题所说的原始问题。找到了解决方案。

首先，将 DST_OUT 更改为 DARKEN

```
static {
    BLACK_BORDER_PAINT.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.DARKEN));
} 
```

其次，保存原文字颜色，把想要的轮廓颜色上去，画好轮廓，然后恢复原文字颜色。

```
@Override
public void draw(Canvas aCanvas) {
    int originalColor = this.getCurrentTextColor();
    this.setTextColor(0xff000000); //set it to white.

    aCanvas.saveLayer(null, borderPaint, Canvas.HAS_ALPHA_LAYER_SAVE_FLAG
            | Canvas.FULL_COLOR_LAYER_SAVE_FLAG | Canvas.MATRIX_SAVE_FLAG);

        drawBackground(aCanvas, -BORDER_WIDTH, -BORDER_WIDTH);
        drawBackground(aCanvas, BORDER_WIDTH + BORDER_WIDTH, 0);
        drawBackground(aCanvas, 0, BORDER_WIDTH + BORDER_WIDTH);
        drawBackground(aCanvas, -BORDER_WIDTH - BORDER_WIDTH, 0);

    this.setTextColor(originalColor);
    aCanvas.restore();
    super.draw(aCanvas);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-05T10:54:08.747

**具有透明背景的文本轮廓**

这是一种没有背景颜色的方法

```
public class CustomTextView extends androidx.appcompat.widget.AppCompatTextView {

float mStroke;

public CustomTextView(Context context, @Nullable AttributeSet attrs) {
    super(context, attrs);
    TypedArray a = context.obtainStyledAttributes(attrs,
            R.styleable.CustomTextView);
    mStroke=a.getFloat(R.styleable.CustomTextView_stroke,1.0f);
    a.recycle();
}

@Override
protected void onDraw(Canvas canvas) {
    TextPaint paint = this.getPaint();
    paint.setStyle(Paint.Style.STROKE);
    paint.setStrokeWidth(mStroke);

    super.onDraw(canvas);
}
} 
```

那么你只需要在 attrs.xml 文件中添加以下内容

```
<declare-styleable name="CustomTextView">
    <attr name="stroke" format="float"/>
</declare-styleable> 
```

现在您将能够设置笔画宽度，`app:stroke`同时保留 TextView 的所有其他所需属性。我的解决方案只绘制没有填充的笔划。这使它比其他的更简单。在深色背景上为我的 customtextview 设置自定义字体时，在屏幕截图中显示结果。

[![在此处输入图像描述](../Images/46b8e4c2b88984a80f8dde9ed6f76a76.png)](https://i.stack.imgur.com/SUoiP.png)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-01-10T12:38:56.760

我的解决方案基于 custom `TextView`。

```
public class TextViewOutline extends TextView{
    int outline_color;
    float outline_width; //relative to font size

    public TextViewOutline( Context context, int outline_color, float outline_width ){
        super( context );
        this.outline_color = outline_color;
        this.outline_width = outline_width;
    }

    @Override
    protected void onDraw( Canvas canvas) {
        //draw standard text
        super.onDraw( canvas );
        //draw outline
        Paint paint = getPaint();
        paint.setStyle( Paint.Style.STROKE );
        paint.setStrokeWidth( paint.getTextSize()*outline_width );
        int color_tmp = paint.getColor();
        setTextColor( outline_color );
        super.onDraw( canvas );
        //restore
        setTextColor( color_tmp );
        paint.setStyle( Paint.Style.FILL );
    }
} 
```

测试代码。

```
TextViewOutline tv = new TextViewOutline( this, 0xff0080ff, 0.04f);
tv.setText( "Simple TEST" );
tv.setTypeface( Typeface.create( Typeface.SERIF, Typeface.BOLD ) );
tv.setTextColor( 0xff000000 );
tv.setTextSize( 128 );
setContentView(tv);

tv.setOnClickListener( new View.OnClickListener(){
    @Override
    public void onClick( View view ){
        view.invalidate();
    }
} ); 
```

结果。

[![在此处输入图像描述](../Images/a49bc194f3ef77dbe14904c0d2782db2.png)](https://i.stack.imgur.com/osjoN.png)

# r - 共享 x 轴

> ID：15091798
> 
> 赞同：1
> 
> 时间：2013-02-26T14:19:23.777
> 
> 标签：r, data-visualization

考虑以下 R 代码的输出：

```
par( mar=c(5,4,4,5)+.1 )
boxplot( t( matrix( rnorm( 100 ), nrow=10 )), xlab="Var1", ylab="Var2")
par( new=T )
plot( 1:10, runif(10,min=-2, max=3), xaxt='n', yaxt='n', xlab='', ylab='', type='b', col='blue', pch=15 )
axis(4)
mtext("Var3", side=4, line=3 ) 
```

蓝点未与 x 轴对齐。我想让两个图都正确共享 x 轴。我试过使用`at`参数 to`boxplot`但这给了我奇怪的输出。

提前致谢！

PK^_^

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:40:09.493

你为什么不直接使用`lines`？

```
par( mar=c(5,4,4,5)+.1 )
boxplot( t( matrix( rnorm( 100 ), nrow=10 )), xlab="Var1", ylab="Var2")
lines( 1:10, runif(10,min=-2, max=3), type='b', col='blue', pch=15 )
axis(4)
mtext("Var3", side=4, line=3 ) 
```

![在此处输入图像描述](../Images/972c0c8271db6bd324ab73655e4c2b68.png)

# html - 自动用另一个标签包围标签

> ID：15091799
> 
> 赞同：0
> 
> 时间：2013-02-26T14:37:21.907
> 
> 标签：html, xml, tags, jstl, surround

有谁知道用另一个标签自动包围预定义标签（例如容器标签）的方法。

例如。您有不同的容器类型，例如 article.tag、video.tag、image.tag 等。每次我调用这样的容器时，我都希望它自动被另一个信封标签包围。

`<myc:article/>`

这可能吗？有谁知道这样做的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:40:48.300

解决这个问题的一种方法是设置一个自定义标签（例如，称为信封标签）并将内部标签的名称作为属性提交。然后解析名称..并“瞧”插入内部标签（例如inner.tag）

```
<myc:envelope containerType="inner"/> 
```

就是这个..

# jquery - jQuery UI 模态对话框中的 jQuery UI Datepicker 问题

> ID：15091801
> 
> 赞同：1
> 
> 时间：2013-02-26T14:37:24.510
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog, jquery-ui-datepicker

jQuery 1.7.2 jQuery UI 1.8.18

我有一个 jQuery UI 模态对话框，其中包含一个 jQuery UI Datepicker。这是我们在应用程序中使用的弹出式编辑器。用户第一次弹出编辑器时一切正常，包括 Datepicker。之后，当编辑器弹出时 - 单击图标时 Datepicker 会显示出来，但选择日期不会更改相关输入标签中的值（并且第一次这样做）。

由于对话框似乎缓存了我已经尝试了以下分配 Datepciker 的两个版本（有这个和没有这个） - 两者的功能完全相同 - 在第一次弹出时工作然后不会选择新日期。

```
 $(function () {
    $("#txtTrxTravelDate", this).datepicker({
        changeMonth: true,
        changeYear: true,
        showOn: "button",
        buttonImage: "../Images/calendarSm.gif",
        buttonImageOnly: true
    });
});

    $(function () {
    $("#txtTrxTravelDate").datepicker({
        changeMonth: true,
        changeYear: true,
        showOn: "button",
        buttonImage: "../Images/calendarSm.gif",
        buttonImageOnly: true
    });
}); 
```

# c# - 将键对象转换为枚举方向对象？

> ID：15091805
> 
> 赞同：2
> 
> 时间：2013-02-26T14:37:40.783
> 
> 标签：c#, casting, enums

我创建了一个`Direction`像这样的枚举：

```
enum Direction { Up, Down, Left, Right } 
```

现在这些方向在箭头键按下时被调用。我现在在我的`KeyDown`活动中是这样的：

```
if (e.KeyCode == Keys.Up)
{
    moveDirection = Direction.Up;
}
else if (e.KeyCode == Keys.Left)
{
    moveDireciton = Direction.Left;
}
else if ... 
```

是否可以创建我自己的演员阵容`(Direction)Keys.Up`？

我知道我可以创建一个静态方法`static Direction CastKeysToDirection(Keys k);`，我对此很好，但我只是好奇是否有一种方法可以在 c# 中实现我们自己的强制转换？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T14:41:32.353

如果您将枚举定义为

```
enum Direction {
    Up = Keys.Up,
    Down = Keys.Down,
    Left = Keys.Left,
    Right = Keys.Right
} 
```

那么你的演员应该因为底层的数值与底层的数值相同`(Direction)Keys.Up`这一事实而起作用。`Keys.Up``Direction.Up`

但遗憾的是`explicit`，您无法像在.`impilcit``enum``class`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-26T14:41:42.173

两种选择：

*   Just cast, if you're *sure* the values match (e.g. because you've created the `Direction` enum using `Keys.Up` etc as the values):

    ```
    moveDirection = (Direction) e.KeyCode; 
    ```

*   Create a dictionary:

    ```
    private static readonly Dictionary<Keys, Direction> KeyToDirection =
        new Dictionary<Keys, Direction>
        {
            { Keys.Up, Direction.Up },
            { Keys.Left, Direction.Left },
            ...
        }; 
    ```

    Then just look up the key that's been pressed in the dictionary. (Use `TryGetValue` to look up a `Keys` - use the return value to detect keys which aren't present in the dictionary.)

The latter gives a more flexible approach, of course. It allows you to have multiple keys all mapping to the same direction, for example.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-26T14:48:45.370

Implicit casting is not possible to *enum*, but you can use *implicit* operator in *class* implementation and then maybe use some benefits of polymorphism and encapsulation in further working (Included suggestion of @Chris Sinclair):

```
public abstract class Direction
{
    public static implicit operator Direction(Keys key)
    {
        switch (key)
        {
            case Keys.Up:
                return Up.Instance;
            case Keys.Down:
                return Down.Instance;
            case Keys.Left:
                return Left.Instance;
            case Keys.Right:
                return Right.Instance;
            default:
                throw new ArgumentOutOfRangeException();
        }
    }
}

public class Up : Direction
{
    private static readonly Up _Instance = new Up();
    public static Up Instance
    {
        get { return _Instance; }
    }

    private Up() {}
}

public class Down : Direction
{
    private static readonly Down _Instance = new Down();
    public static Down Instance
    {
        get { return _Instance; }
    }

    private Down() {}
}

public class Left : Direction
{
    private static readonly Left _Instance = new Left();
    public static Left Instance
    {
        get { return _Instance; }
    }

    private Left() {}
}

public class Right : Direction
{
    private static readonly Right _Instance = new Right();
    public static Right Instance
    {
        get { return _Instance; }
    }

    private Right() {}
} 
```

The use case:

```
Keys key = Keys.Up;
Direction direction = key; // Legal

if (direction == Up.Instance)
{
    // Do something
}

// Or add abstract methods to Direction class and invoke direction.DoWork() 
```

# html - 鼠标悬停应出现添加按钮

> ID：15091807
> 
> 赞同：0
> 
> 时间：2013-02-26T14:37:48.083
> 
> 标签：html, css, effects

如果有人可以帮助我，那就太好了！我的网页上有一些图像，我想制作一个小效果，当我将鼠标移到图像上时，应该出现 ADD 按钮，在图像的中心，并且按钮周围是背景色具有不透明效果。我有这个 HTML 代码：

```
<span class="img1" style="opacity: 1;"><img class="prodimg" src="img/naturale_pi_5_large.jpg" alt="Lily Pink Bag"></span>
<span class="img2" style="opacity: 0; visibility: visible;">
    <div class="buttoncont">
        <a href="#">Add to Cart</a>
    </div>
</span> 
```

还有这个CSS：

```
.buttoncont{
        display:block;
        width:92px;
        margin:0;
        background:#c33a56;
        -webkit-border-radius: 4px;
        -moz-border-radius: 4px;
        border-radius: 4px;
    }

#content .productlist .product .foot .buttoncont {
    right:0;
    position:absolute;
    bottom:0;
}

.buttoncont a,
.buttoncont input {
    display:block;
    color:#ffffff;
    width:100%;
    height:30px;
    line-height:30px;
    text-align:center;
    font-family: Arial, sans-serif;
    font-size:90%;

    background:url('img.jpg');

    border:0;
    padding:0;
    cursor:pointer;
    -webkit-border-radius: 4px;
    -moz-border-radius: 4px;
    border-radius: 4px;
}

.buttoncont input:hover {
    text-decoration:underline;
}
.miniproductlist .imagecontainer img {
    vertical-align:middle;
    display:inline;
    max-width:100%;
    outline:#ffffff 1px solid;
}

.miniproductlist .img2 {
    position:absolute;
    top:0;
    left:0;
    visibility:hidden;
    width:100%;
    height:81px;
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T14:42:55.710

如果您将所有内容包装在一个容器中，那么您只需使用 CSS 即可完成此操作

```
.container button {
   display: none;
}

.container:hover button {
   display: inline-block;
} 
```

现在我们在这里所做的是隐藏按钮，并且在将容器 div 悬停时，我们正在显示它，或者您可以使用`visibility: hidden;`，但这会占用`display: none;`不会占用的空间

# git - 将分支中最新选择的文件标记到 GIT 中的现有标记

> ID：15091809
> 
> 赞同：0
> 
> 时间：2013-02-26T14:37:56.460
> 
> 标签：git

假设我正在一个分支上工作，比如 B，并对 GIT 中的远程存储库进行一些推送。在某个时间点说 T1，我创建了一个名为 T 的新标签，然后再次在分支 B 中进行了一些更改。所以在时间 T2（即现在），该分支领先于标签几个提交。我想将那些选定的新文件从分支（时间 T1 和 T2 之间的修改文件）再次移动到远程存储库中的标记 T。

我知道我可以远程删除标记 T 并从分支 B 再次创建一个新标记。但我不希望所有文件都从分支标记。相反，我想将某些文件（在 T1 和 T2 之间修改）从最新分支移动到现有标签。

有什么办法我可以这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:51:32.040

“我不希望所有从分支标记的文件”？

在 git 中，标签指向特定的提交（在 .git/refs/tags 中查看您拥有的标签列表，每个标签都是一个包含标签所属的 SHA-1 的文件）。

在您的示例中，您在 T1 时间进行了提交（我们称之为 C1），我假设在 T2 时间进行了提交（C2）。您已将 C1 标记为“T”。

现在您想将 C2 推送到您的远程存储库，但将远程存储库上的标签移动到 C2 ...但将您的本地标签 T 保留在 C1？

我想说你应该避免这种情况（如果有一个同名的标签，但在本地和远程指向不同的提交，会让人感到困惑）。

因此，我建议您将本地标签移动到 C2（假设这是分支 B 的当前提示）：`git checkout B; git tag -f T`然后将这些更改推送到您的远程仓库：`git push --tags <remote>`。

当然最好不要移动标签，只需创建一个新标签。或者在你确定你已经拥有你想要的存储库之前不要推送到远程存储库。

另请参阅[如何将 git 分支上的标签移动到不同的提交？](https://stackoverflow.com/questions/8044583/how-can-i-move-a-tag-on-a-git-branch-to-a-different-commit)

# php - Ajax 不能循环工作

> ID：15091810
> 
> 赞同：3
> 
> 时间：2013-02-26T14:37:58.930
> 
> 标签：php, javascript, html, ajax, request

我想在循环中执行 Ajax 以一一获取数据。我在我的 javascript 函数中做了类似的事情。

```
var resultType = $("input[name='resultType']:checked").val();
var finalResult = "";
var loadingMessage = "<img src=\"./results/loader.gif\" alt=\"Loading...\"/><br/>This may take several minutes...";
var htmlMessage=loadingMessage;

$("#result").html(htmlMessage);

for(var i=1;i<5;i++){
    $.ajax({
        type: "GET",
        url: "results/result_html.php?usn="+i+"&resultType="+resultType,
        dataType:"JSON",
        success:function(result){
            finalResult+=result;
            result=result+htmlMessage;
            $("#info").hide();
            $("#result").html(result);              
            $("#usn").attr("placeholder", "Class USN");
        }
    });
} 
```

但它并没有像我预期的那样执行。如果我删除 for 循环并直接给出值，那么一切都是正确的。我对 Ajax 不太熟悉。请问有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T14:52:49.017

我在这段代码中没有看到闭包的问题。我相信您要实现的目标与强制顺序加载有关。您当前提议的方式将“并行”发出所有 ajax 调用。问题在于 ajax 调用的异步特性。

如果您想对请求进行“排序”，则可以执行以下操作：

```
var resultType =$("input[name='resultType']:checked").val();
var finalResult="";
var loadingMessage="<img src=\"./results/loader.gif\" alt=\"Loading...\"/><br/>This may   take several minutes...";
var htmlMessage=loadingMessage;
$("#result").html(htmlMessage);

var i = 1;

function loadNext(){
    if (i < 5){
        $.ajax({
            type: "GET",
            url: "results/result_html.php?usn="+i+"&resultType="+resultType,
            dataType:"JSON",
            success:function(result){
                finalResult+=result;
                result=result+htmlMessage;
                $("#info").hide();
                $("#result").html(result);              
                $("#usn").attr("placeholder", "Class USN");
                loadNext();
            }
        });
        i++;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T14:42:07.070

你正在处理一个常见的闭包问题。当您的 ajax 请求被执行时，计数器“i”已经并且始终处于它的最后一个值 (4)。

你必须为那个计数器创建一个新的范围，这样它就不会发生；你可以通过两种方式做到这一点：

简单的方法：

```
for(var i=1;i<5;i++){
    var counter = i;
    $.ajax({
        type: "GET",
        url: "results/result_html.php?usn="+counter+"&resultType="+resultType,
        dataType:"JSON",
        success:function(result){
            finalResult+=result;
            result=result+htmlMessage;
            $("#info").hide();
            $("#result").html(result);              
            $("#usn").attr("placeholder", "Class USN");
        }
    });
} 
```

或正确的方法：

```
for(var i=1;i<5;i++){
(function(counter){
    $.ajax({
        type: "GET",
        url: "results/result_html.php?usn="+"counter"+"&resultType="+resultType,
        dataType:"JSON",
        success:function(result){
            finalResult+=result;
            result=result+htmlMessage;
            $("#info").hide();
            $("#result").html(result);              
            $("#usn").attr("placeholder", "Class USN");
        }
    });
})(i);} 
```

# javascript - Jasmine 测试模拟数据还是真实系统和数据源？

> ID：15091812
> 
> 赞同：1
> 
> 时间：2013-02-26T14:38:07.883
> 
> 标签：javascript, jquery, testing, tdd, jasmine

我有一个关于使用 Jasmine BDD 的基本问题。测试是否意味着对“模拟”数据进行模拟？

我想制作一个现有脚本的测试版本，它从网页上的滚动事件中获取数据（这个脚本没有完成）。但我看到 Jasmine 使用`SpecRunner.html`并`HTMLReporter`验证 UI 中的测试。

如何在我自己的网页中使用它？

BDD/TDD 是否意味着隔离模拟以测试逻辑？没有真正将它与真实的生产系统和数据源联系起来..？

试图在这里掌握基础知识:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:51:47.367

是的，你想在这里使用[依赖倒置原则](http://freshbrewedcode.com/derekgreer/2012/01/22/solid-javascript-the-dependency-inversion-principle/)。基本上你希望你的逻辑（alg）有DOM对象（在这种情况下是DOM对象的模拟）被传递而不是在你的逻辑（alg）中硬编码

# sql-server-2008 - 查找没有聚集索引但在表上具有主键的表

> ID：15091826
> 
> 赞同：1
> 
> 时间：2013-02-26T14:38:49.177
> 
> 标签：sql-server-2008, tsql

是否有一个脚本可以找到没有聚集索引的表，但上面有 Sql server 2008 r2 的主键？请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T14:44:08.917

像这样的东西：

```
SELECT
            so.name AS TableName,
            si.name AS IndexName,
            si.type_desc AS IndexType,
            si.is_primary_key
FROM
            sys.indexes si
            JOIN sys.tables so ON si.[object_id] = so.[object_id]
WHERE
            si.type IN (0, 2)
            AND si.is_primary_key=1
ORDER BY
            so.name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T14:44:58.317

```
select O.name
from sys.objects as O
  inner join sys.indexes as I1
    on O.object_id = I1.object_id
  inner join sys.indexes as I2
    on O.object_id = I2.object_id
where O.type = 'U' and         -- U = Table (user-defined)
      I1.type = 0 and          -- 0 = Heap
      I2.is_primary_key = 1 
```

[sys.objects (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms190324.aspx)
[sys.indexes (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms173760.aspx)

# ember.js - ember 中 .create() 和 .createWithMixins() 的区别

> ID：15091828
> 
> 赞同：9
> 
> 时间：2013-02-26T14:38:50.457
> 
> 标签：ember.js, handlebars.js

`.create()`和 和有什么不一样`.createWithMixins()`？我找不到任何有关此的文档。`.create()`当我使用并调用`this._super()`该方法创建视图实例时`didInsertElement`，会引发以下错误：

> Ember.Object.create 不再支持定义调用 _super 的方法。

但是，当我替换`.create()`一切`.createWithMixins()`正常时。这是代码和示例 js fiddle：

```
App.SampleView = Ember.View.create({
    sampleProperty : "a",
    didInsertElement : function(){
        this._super();
        this.set("sampleProperty", "b");        
    } 
}); 
```

[http://jsfiddle.net/bErRT/3/](http://jsfiddle.net/bErRT/3/)。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-26T15:25:56.107

来自[维基百科](http://en.wikipedia.org/wiki/Mixin)：

> 在面向对象的编程语言中，mixin 是一个类，它包含来自其他类的方法的组合。这种组合如何完成取决于语言，但不是通过继承。如果一个组合包含组合类的所有方法，则相当于多重继承。

在 Ember 中，对象的实例是`create`使用不带参数的方法创建的，或者使用表示该类型属性的单个 hash(kvo)，它们将被自动填充。例子：

```
var SomeClass = Ember.Object.extend({
    name: '',
    url: ''
});

// this instance will have a "name" and a "url" properties with blank values
var someInstance = SomeClass.create();

// this instance will have the same properties, but now 
// their values will be populated
var anotherInstance = SomeClass.create({
    name: 'Ember.js',
    url: 'http://emberjs.com'
}) 
```

另一方面`crateWithMixins`，允许您*将*另一个类定义混合到单个对象实例或另一个类中。因此，假设您与`SomeClass`上述相同，但您不想通过子类化它`extend`并创建另一种类型。在这种情况下，您可以使用 a`Mixin`来确保只有一个实例具有两个类的定义。例子：

```
var SomeClass = Ember.Object.extend({
    name: '',
    url: ''
});

// note that you don't extend a mixin, you only create
var SomeOtherClass = Ember.Mixin.create({
    doSomething: function() {
        console.log('doing my thing');
    }
});

// This instance will have a method called "doSomething"
var x = SomeClass.createWithMixins(SomeOtherClass, { 
    name: 'Ember.js', 
    url: 'http://emberjs.com' 
});

// this instance only has methods/properties defined in "SomeClass"
// therefore, no method called "doSomething"
var y = SomeClass.create({ 
    name: 'Google', 
    url: 'http://google.ca'
}); 
```

但是，如果您想创建一个带有 a 的新类`Mixin`，您可以`extend` `Em.Object`将`Mixin`作为第一个参数传递，如下所示：

```
var AnotherClass = Ember.Object.extend(SomeOtherClass, {
    firstName: '',
    lastName: ''
});

var z = AnotherClass.create();
z.set('firstName', 'Hiro');
z.set('lastName', 'Nakamura');
z.doSomething(); 
```

查看[**API 文档**](http://emberjs.com/api/classes/Ember.Mixin.html)以及此[**JSFiddle**](http://jsfiddle.net/schawaska/xuHTV/)。

**编辑**：至于`_super()`，您仅在创建新类时使用它（通过`extend`）。当你`create`现有类的实例时，你不应该调用`_super()`.

另一件事。`create`我看到你正在尝试`View`直接。我相信，根据您的代码，您应该扩展`Ember.View`并让框架在适当的时候为您创建实例。如果您手动创建，您将负责其工作流程的某些部分，例如将其附加到 DOM、将其删除等。也许我没有看到全貌，但仅基于此代码，我认为您不*应该*打电话给`create`那里，然后打电话`extend`，然后你就可以打电话了`_super()`

# spring - Spring security - 获取所有登录的主体

> ID：15091830
> 
> 赞同：1
> 
> 时间：2013-02-26T14:38:58.097
> 
> 标签：spring, spring-mvc, spring-security

首先！感谢您阅读我的问题。

我在检索所有主要对象时遇到问题。我使用 Spring 版本 3.2.1.RELEASE 和 spring security 3.1.3.RELEASE。

我在网上进行了研究，发现了如何检索主体，但是在插入我自己的身份验证代码后，它就不再起作用了。检索所有主体对象的方法：

```
 @RequestMapping("/loggedinusers")
        public String viewAllLoggedInUsers(Model model) {

            List<Object> principals = sessionRegistry.getAllPrincipals();

            model.addAttribute("size", principals.size());

            List<Integer> listOfUserIds = new ArrayList<Integer>();

            for (Object principal : principals) {
                if (principal instanceof Principal) {
                    listOfUserIds.add(((Principal) principal).getId());
                }
            }

            return "/logged_in_users";
        } 
```

**在我更改一些安全配置之前，上面的代码正在运行。这是我的所有配置：**

```
 <!-- bean namespave -->

        <security:global-method-security jsr250-annotations="enabled"  pre-post-annotations="enabled" secured-annotations="enabled" />

        <security:http use-expressions="true" entry-point-ref="loginEntryPoint">
            <security:intercept-url pattern="/login" access="permitAll()" />

            <!-- ******* Filters ******* -->
            <security:custom-filter ref="ipFormLoginFilter" position="FORM_LOGIN_FILTER"/>

            <security:logout 
                delete-cookies="JSESSIONID" 
                logout-url="/logout"
                logout-success-url="/login"
            />

            <security:session-management session-fixation-protection="newSession">                    
                <security:concurrency-control session-registry-alias="sessionRegistry" max-sessions="5"  error-if-maximum-exceeded="false" />
            </security:session-management>

        </security:http>

        <bean id="loginEntryPoint" class="org.springframework.security.web.authentication.LoginUrlAuthenticationEntryPoint">
            <constructor-arg value="/login"/>
        </bean>

        <security:authentication-manager alias="authenticationManager">
            <security:authentication-provider ref="customUserAuthenticationProvider" />
        </security:authentication-manager>

        <bean  id="ipFormLoginFilter" class="nl.irp.vadp.security.CustomIpUsernamePasswordAuthenticationFilter">
            <property name="filterProcessesUrl" value="/authlogin"/>
            <property name="authenticationManager" ref="authenticationManager"/>
            <property name="usernameParameter" value="username"/>
            <property name="passwordParameter" value="password"/>
            <property name="authenticationSuccessHandler">
                <bean class="org.springframework.security.web.authentication.SavedRequestAwareAuthenticationSuccessHandler">
                    <property name="defaultTargetUrl" value="/"/>
                </bean>
            </property>
            <property name="authenticationFailureHandler">
                <bean class="org.springframework.security.web.authentication.SimpleUrlAuthenticationFailureHandler">
                    <property name="defaultFailureUrl" value="/login?login_error=true"/>
                </bean>
            </property>
        </bean>

        <bean id="passwordEncoder" class="org.springframework.security.authentication.encoding.ShaPasswordEncoder">
            <constructor-arg value="512" />
        </bean>

    </beans> 
```

**代码::** *过滤器类*

```
 public final class CustomIpUsernamePasswordAuthenticationFilter extends UsernamePasswordAuthenticationFilter {

        @Override
        public Authentication attemptAuthentication(HttpServletRequest request, HttpServletResponse response) throws AuthenticationException {
            if (request.getMethod().equals("POST")) {
                String username = obtainUsername(request);
                String password = obtainPassword(request);
                UsernamePasswordAuthenticationToken authRequest = new UsernamePasswordAuthenticationToken(username, password);
                setDetails(request, authRequest);
                return this.getAuthenticationManager().authenticate(authRequest);
            }
            throw new AuthenticationServiceException("Authentication method not supported: "    + request.getMethod());
        }
    } 
```

**代码::** *自定义认证类*

```
 @Component
    public class CustomUserAuthenticationProvider implements AuthenticationProvider {

        @Autowired
        UserService userService;
        @Autowired
        ShaPasswordEncoder shaPasswordEncoder;

        public CustomUserAuthenticationProvider() {
        }

        @Override
        public Authentication authenticate(Authentication authentication) throws AuthenticationException {
            final String BAD_CREDENTIALS = "test";
            final String BAD_IP_ADDRESS = "test";
            List<GrantedAuthority> authorities = new ArrayList<GrantedAuthority>();
            UsernamePasswordAuthenticationToken token = (UsernamePasswordAuthenticationToken) authentication;

            String email = token.getName();

            User user = null;
            if (email != null) {
                user = userService.findUserByEmail(email);
            }
            if (user == null) {
                throw new UsernameNotFoundException(BAD_CREDENTIALS + "no user found");
            }

            String password = user.getPassword();
            String salt = user.getName();

            if (!shaPasswordEncoder.isPasswordValid(password, (String) token.getCredentials(), salt)) {
                throw new BadCredentialsException(BAD_CREDENTIALS + "bad password");
            }

            if (!user.hasIpaddress(request.getRemoteAddr())) {
                throw new BadCredentialsException(BAD_IP_ADDRESS + "bad ip adress");
            }

            authorities.add(new SimpleGrantedAuthority("ROLE_" + user.getRole().getName().toUpperCase()));
            Principal principal = new Principal(user.getEmail(), user.getPassword(), authorities, user.getId());

            return new UsernamePasswordAuthenticationToken(principal, user.getPassword());
        }

        @Override
        public boolean supports(Class<?> authentication) {
            return CustomIpUsernamePasswordAuthenticationToken.class.equals(authentication);
        }
    } 
```

添加了以下侦听器：

```
<!--  Listeners -->
<listener><!-- Starts up the webapp project -->
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<listener><!-- spring security listener -->
    <listener-class>org.springframework.security.web.session.HttpSessionEventPublisher</listener-class>
</listener>
    <!-- extra toegevoegd voor die ip ... -->
<listener>
    <listener-class>
    org.springframework.web.context.request.RequestContextListener
    </listener-class>
</listener> 
```

正如上面的代码所描述的，我用一个验证方法创建了我自己的 AuthenticationProvider 来验证插入的数据。这完美地工作（组件扫描也完成）。jsp 中的权限（例如）似乎也可以工作。我似乎不明白为什么我无法获得注册校长。

编辑：在插入附加信息之前，我删除了标签中的“auto-config=true”。

希望有人可以帮助我。

编辑2：我发现问题出在哪里。在我自己的自定义过滤器中，有一个属性叫做：sessionAuthenticationStrategy。该字段需要设置。

我在过滤器中插入了以下内容，它可以工作：

```
<property name="sessionAuthenticationStrategy" ref="sessionFixationProtectionStrategy" />

<bean id="sessionFixationProtectionStrategy" class="org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy"> 
```

格特兹，

# php - 在 PHP 中使用 sprintf 时添加 \n 换行符

> ID：15091831
> 
> 赞同：12
> 
> 时间：2013-02-26T14:38:58.660
> 
> 标签：php, newline, printf

我正在尝试将现有数据从 MySQL 数据库导出到可以运行的 ruby​​ 命令中`rake db:seed`。

这是我的代码。

```
# Generate db:seed data for proveedores.
$proveedores = R::findAll('tbproveedores');
$proveedoresE = R::exportAll($proveedores);

foreach ($proveedoresE as &$p) {

    $line = 'BookSupplier.create(company: "%s", city: "%s", country: "%s", address: "%s", telephone: "%s", contact: "%s", email: "%s", website: "%s"\n';
    $exportedLine = sprintf($line, $p['empresa'], $p['ciudad'], $p['pais'], $p['direccion'], $p['telefono'], $p['personacontacto'], $p['email'], $p['website']);
    var_dump($exportedLine);
    fwrite($seeds, $exportedLine);
    echo "<br />";
} 
```

注意`\n`$line 变量末尾的换行符。我在网上读到这就是使用换行符所需的全部内容。

我上面的代码的输出是（*逐字，很长的一行*）：

```
BookSupplier.create(company: "Pearson", city: "Lima", country: "Peru", address: "Av. Limon", telephone: "4673535421", contact: "Javier", email: "", website: ""\nBookSupplier.create(company: "Project Management Institute - PMI", city: "Pennsylvania", country: "Estados Unidos", address: "Newtown Square, Pennsylvania", telephone: "1", contact: "Limberg Morales", email: "", website: "http://www.pmi.org/"\nBookSupplier.create(company: "UVirtual - Centro de Excelencia", city: "Santa Cruz", country: "Bolivia", address: "Av. Irala 585", telephone: "1", contact: "Limberg Morales", email: "", website: ""\nBookSupplier.create(company: "Ábaco de Rodolfo Depalma", city: "Buenos Aires", country: "Argentina", address: "Viamonte 1336, 4° (C1053 ACB) Buenos Aires", telephone: "5411-43711675", contact: "Limberg Morales", email: "", website: "http://www.abacoeditorial.com.ar/"\nBookSupplier.create(company: "Pablo Lledó - ProjectManagement", city: "Canadá", country: "Estados Unidos", address: "Victoria, BC, Canadá", telephone: "1", contact: "Limberg Morales", email: "", website: ""\n 
```

在我插入换行符之后，我希望每个调用都在它自己的行中。关于我做错了什么有什么建议吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-26T14:41:14.440

**只有用双**引号括起来的换行符`\n`才会被解释： . 像那样：**`"`**

 **```
$line  = '...............';
$line .= "\n"; 
```

您还应该了解`PHP_EOL`它是一个常量，其中包含系统换行符分隔符，这在几个操作系统上是不同的。例如，它将`\n`在 Linux 上但`\r\n`在 Windows 上。最便携的代码如下所示：

```
$line  = '.....';
$line .= PHP_EOL; 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-09-29T23:34:11.143

如果您不能（或不想）切换到双引号，则可以使用 ASCII 代码插入换行符，如下所示：

```
> php
<?php printf('line one%cline two', 10);^D
line one
line two
> 
```

允许您插入任何 ASCII 代码，而`%c`10 是换行符的代码。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-26T14:42:45.367

您需要使用双引号字符串，单引号不扩展特殊字符序列。查看[手册](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.single)以获取有关 PHP 字符串的更多详细信息。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-26T14:41:42.230

字符串中的特殊字符仅在用双引号 (") 括起来时才有效。有关详细信息，请参阅[PHP 字符串文档](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.double)。

所以要么使用双引号，这需要大量的工作，因为你在字符串中也使用了很多双引号。并转义字符串内的所有双引号。

或者，如果您很懒惰，请在之后连​​接新行：

```
$line = '...';
$line .= "\n"; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-03-24T11:08:05.990

继 Josh 的回答之后，您可以使用 %s 将插值字符串中的换行符注入 printf 中`printf('something%s', "\n")`，这在更复杂的示例中开始变得更有意义 - 例如，如果字符串模板存储在语言变量中，或者您正在执行多个替换，或者只需要坚持使用 sprintf，因为您的 PHB 要求它。

在你的情况下，它会是

```
$line = 'BookSupplier.create(company: "%s", city: "%s", country: "%s", address: "%s", telephone: "%s", contact: "%s", email: "%s", website: "%s"%s';
$exportedLine = sprintf($line, $p['empresa'], $p['ciudad'], $p['pais'], $p['direccion'], $p['telefono'], $p['personacontacto'], $p['email'], $p['website'], "\n"); 
```

我已经格式化了一个电子邮件标题块：

```
$headers = sprintf(
    'From: %1$s%2$sReply-To: %1$s%2$sMIME-Version: 1.0%2$sContent-type: text/html; charset=iso-8859-1%2$s'
    , $EMAIL_FROM, "\r\n"); 
```

重复使用`\r\n`使用`1$`参数索引语法。

所以`%2$s`变成了新的`\r\n`，不占用任何额外的字符，但更难阅读！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-26T14:41:24.973

```
$line = "BookSupplier.create(company: '%s', city: '%s', country: '%s', address: '%s', telephone: '%s', contact: '%s', email: '%s', website: '%s'\n"; 
```

\n（或任何其他 whitescpace char 如 \t）必须使用双引号才能工作。**

# windows - 在 Win7 中，某些字体不像在 Win2K/XP 中那样工作

> ID：15091835
> 
> 赞同：7
> 
> 时间：2013-02-26T14:39:06.053
> 
> 标签：windows, fonts, font-size, truetype

我的问题是关于需要如何更改字体处理才能在 Windows 7 下正常工作。我确信我已经对以前有效但不再有效的东西做出了假设。但我什至不知道从哪里开始寻找！我祈祷有人能帮忙！以下是我了解的详细信息（我也在 Microsoft Windows 开发者论坛上发布了这个问题，但他们没有回答）：

是的，我已经落后了（哎呀，我仍然用纯 C 编写 WIN32 代码！）我有一个 10 年前编写的 DLL，它在窗口的客户区内模仿了一个更老的 DOS 屏幕 I/O 库。不用说，它只允许使用固定宽度的字体。当一些使用 DLL 的程序被移到 Windows 7 时，当使用固定宽度的 TRUE TYPE 字体时会出现奇怪的闪烁（位图字体仍然可以正常工作。）我们已经将问题追溯到事实所写的单个字符`ExtTextOut`比应有的宽。我以三种不同的方式检查了测量值（通过使用`GetTextExtentPoint32`132 个字符串并除以 132，调用`GetTextMetrics`甚至使用`GetCharABCWidths`所有 256 个字符），他们都同意字体的宽度相同。但`ExtTextOut`正在渲染比字体宽度宽一或两个像素的背景矩形。要么比，要么它开始在参数中给定的位置左侧渲染一个或两个像素[我这样称呼它： `ExtTextOut( hdc, r.left, r.top, ETO_OPAQUE, &r, &ch, 1, NULL )`.] 请记住，这个 EXACT 代码在 Windows 2000、Windows XP 和Windows 7 上的位图字体——但它不再适用于 Windows 7 下的固定宽度 true type 字体。

对于那些不了解我需要做什么的人：试着想象在一张方格纸上每方写一个字符。每个方块使用相同的字体，但可能有不同的前景色和/或背景色。我使用`TA_TOP|TA_LEFT`文本对齐，因为它是最简单的并且任何一致应用的对齐都应该适用于固定宽度的字体。

我看到的是 ExtTextOut 发出的背景矩形比我在`RECT *`参数中指定的要大。由于我提供的矩形是根据报告的字体大小创建的，因此永远不会发生这种情况——而且它从未在 Windows XP 和更早版本上发生过，并且不会发生在 Windows 7 下的位图（即 .FON）字体中，任何一个。但它总是在 Windows 7 下使用固定宽度的 TrueType 字体发生。这与在 Windows 2000、Windows XP 和 Windows 7（32 和 64）上运行的 EXACT SAME EXECUTABLE 相同。虽然我很想说 Windows 7 有一个错误，我更倾向于相信我对 Windows 下的字体处理所做的一些基本假设不再正确（在为 Windows 编写软件 20 年后）。

但我不知道如何或在哪里发现那可能是什么！请，请帮助我！

--- 修正 ---

对于任何感兴趣的人，我已经设法解决了我正在考虑的错误——直到我找到相反的文档。我的解决方法包括对我的库的两个更改：

1.  使用从`GetTextExtentPoint32()`'X' 返回的大小而不是来自 的数据`TEXTMETRICS`。
2.  在所有调用中包含`ETO_CLIPPING`标志。`ExtTextOut()`

以前，我使用`tmHeight+tmExternalLeading`的是连续文本行顶部之间的像素数，如文档所述。我发现从 ) 返回的 size.cy 值`GetTextExtentPoint32(`不一样，而且看起来更准确。我发现的最糟糕的例子是 OCRB true type 字体。这是我在调试器中为我创建的 OCRB 字体看到的内容（使用系统字体选择对话框）：

```
ocrbtm.tmHeight          = 11
ocrbtm.tmExternalLeading =  7

ocrbsize.cy = 11 
```

因此，出于某种我尚未发现的原因，Windows 忽略了为 OCRB 字体定义的外部前导值。使用大小值而不是 TM 会产生漂亮、整洁、紧凑的文本，这正是我想要的。

该`ETO_CLIPPING`标志对我来说不是必需的，因为我将矩形设置为单个字符的尺寸并`ETO_OPAQUE`用于填充背景（并覆盖以前的单元格内容。）但是没有剪切标志，单个字符比大小、文本度量或 ABC 宽度都可以表明 - 至少，根据我迄今为止找到的所有文档，这是正确的。

我相信 HEIGHT 问题已经存在了很长时间，但是在我们在 Windows 7 下运行我们的软件之前，其余的都是不必要的。我将这个附加到我的问题中，看看是否有人可以解释我显然不明白的内容。

-- 修正案 2 --

1：我能找到的所有文档都说`tmHeight+tmExternalLeading`应该产生单行间距的文本。时期。但这并不总是正确的，我找不到说明 Windows 如何确定有时由`GetTextExtentPoint32()`.

2：在Win7（可能是Vista）下`ExtTextOut`开始填充比应有的更多的背景（通过在右侧添加几个额外的像素），但只有在选择了真正的字体时。即使矩形是字符预期大小的**两倍**（在两个维度上），它也会这样做。DPI/缩放可能是一个因素，但由于我的系统设置为 100%，Windows 似乎遇到了 1 的问题:1 比例因子，这似乎是一个错误。它只影响真实类型而不影响位图（.FON）字体的事实似乎也排除了缩放（除非**有**缩放系统中的一个错误），因为 Windows 应该尝试缩放所有文本，而不仅仅是其中的一部分。此外，“自定义 DPI 设置”对话框中有一个灰色（但已选中）设置“使用 Windows XP 样式 DPI 缩放”。最后，这整个问题可能是我在 Windows Classic 主题下运行的结果，而不是 Aero 或其他 Win7 原生主题之一。

-- 修正 3 --

简单地调用 SetProcessDPIAware() 对我遇到的问题没有影响。由于我的问题存在于 100% DPI 设置（比例 1:1），如果我的问题**与**DPI 相关，那么我一定在 DPI 虚拟化中发现了一个错误，因为这是 Microsoft 描述该功能的方式：

> 此功能通过向应用程序提供“虚拟化”系统指标和 UI 元素来工作，就好像它以 96 DPI 运行一样。然后应用程序呈现到 96-DPI 的屏幕外表面，桌面 Windows 管理器缩放生成的应用程序窗口以匹配 DPI 设置。

我的所有设置都显示我在 100% 缩放，并且查看自定义设置框清楚地显示这意味着 96 DPI。所以，如果从 96 DPI 到 96 DPI 的 DPI 虚拟化不适用于我的固定宽度 True Type 字体，那么 Windows 就有问题了，对吧？或者我需要调用一些函数（或停止调用？）以允许 DPI 虚拟器正常工作？

我仍然不相信所谓的缩放问题实际上与我最初认为的字体大小有关。那是因为问题表现在*背景矩形*被填充`ExtTextOut()`而不是被发射的文本字符中。当字体为真类型时，背景矩形会放大一点。我现在还验证了无论使用 Windows Classic 主题还是标准 Windows Aero 主题都会出现此问题。现在构建一个简化的示例，以便其他人可以进行试验。

-- 修正案 4 --

我创建了一个最小的演示程序，它显示了我所看到的（以及我在做什么）。Visual Studio 2010 项目/源可以从[http://www.svalli.com/files/fwtt.7z](http://www.svalli.com/files/fwtt.7z)下载-- 我故意不包含可执行文件，因为我不想冒传播恶意软件的风险。该程序让您选择一个固定宽度的字体，然后将两个 5x5 字符网格写入客户区，一个使用`GetTextExtentPoint32`大小创建，一个使用`TEXTMETRIC`Microsoft 记录的大小。网格采用黑白棋盘格图案，最后在中心写入黄色和红色字符以显示重叠效果（您可能需要缩放实用程序才能清楚地看到它。）该程序还绘制了一个以 5 X 开头的字符串，就在下面网格，从相同的左侧偏移量开始，用作我放置单个字符的方法的比较（我匹配字符串。）菜单允许打开/关闭剪辑`ExtTextOut`以及选择其他字体。还有一个命令行选项`dpiaware`（区分大小写）会导致程序`SetProcessDPIAware()`在启动时调用，因此也可以评估该调用的效果。

通过创建这个，我了解到`ExtTextOut`正在填充正确的背景矩形，但是使用不透明背景渲染的角色可能比应有的更宽，甚至可能没有从`ExtTextOut`被告知开始绘制的位置开始！我说“应该”是因为我最终得到的字符间距与`ExtTextOut`渲染整个字符串时得到的字符间距相匹配。重叠显然可能在给定矩形的任一侧或两侧，例如，OCRB 在字符单元的左侧和右侧添加了一个额外的像素，而我检查过的其他真类型字体在右侧添加了两个像素边缘。

我真的很想以“正确”的方式做到这一点，但我找不到任何文档来说明我做错了什么或遗漏了什么。好吧，我可能在 100% 以外的比例上错过了 DPI Aware 的一些东西，但除此之外，我只是感到困惑。

-- 修正案 5 --

稍微不那么困惑...问题是由ClearType引起的。关闭 ClearType 使所有字体重新工作。在 XP 下打开 ClearType 会导致同样的问题。显然 ClearType 可以默默地（直到有人告诉我如何检测它）将字符水平拉伸几个像素，以便为它添加的阴影像素腾出空间以使事情变得平滑。

剪裁是解决这个问题的唯一方法吗？

-- 修正 6 --

对上面我的剪辑问题的部分回答：创建新字体时，我现在执行以下操作（在伪代码中）：

```
CreateFontIndirect
SelectFont
GetTextMetrics
if( (tmPitchAndFamily & TMPF_TRUETYPE) && Win6.x or above )
   if( SystemParametersInfo( SPI_GETCLEARTYPE ) )
        lfQuality = NONANTIALIASED_QUALITY
        DeleteObject( font )
        CreateFontIndirect 
```

如果不启用剪辑，这*几乎*总是适用于我正在使用的字体大小，尽管我发现一些仍然在字符单元格的右侧（或左侧）呈现额外的像素。幸运的是，这些似乎是在互联网上找到的免费字体，因此它们的整体质量可能低于专业字体代工厂的标准。

如果有人能找到更好的答案，我真的，**真的**很想听听！在那之前，我认为这是最好的。感谢您阅读到这里！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T00:40:45.880

确保您的代码[支持高 DPI](http://msdn.microsoft.com/en-us/library/windows/desktop/dd464646%28v=vs.85%29.aspx)，然后[告诉操作系统您的进程支持 DPI](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633543%28v=vs.85%29.aspx)。

如果您不告诉操作系统您知道 DPI，则某些测量功能会撒谎并根据显示 DPI 实际上是 96 dpi 的假设为您提供数字，而不管它实际上是什么。同时，绘图函数将尝试在另一个方向上缩放。对于简单的高级绘图，这种方法通常有效（尽管它经常导致文本模糊）。对于单个字符的小尺寸和精确放置，这通常会导致四舍五入问题，从而导致[字体大小不一致](http://msdn.microsoft.com/en-us/library/windows/desktop/dd371771%28v=vs.85%29.aspx)等问题。此行为是在 Windows Vista 中引入的。

您可以在 Visual Studio 2010+ 中一直看到它，因为语法高亮显示文本和单词在您键入时会在这里和那里移动几个像素。真他妈烦。

**关于修改：**

`tmExternalLeading`只是字体设计师关于在文本行之间放置多少额外空间的建议。MSDN 文档通常说，“应用程序在行之间添加的额外前导（空间）量”。好吧，您是应用程序，因此“正确的做法”是在您自己绘制文本时在行之间添加它，但这完全取决于您。（我怀疑像 DrawText 这样的高级函数会使用它。

`GetTextExtentPoint32`（和朋友）返回`size.cy`等于`tmHeight`和忽略是完全正确的`tmExternalLeading`。作为程序员，最终导致实际使用多少是您的选择。

您可以通过一些简单的绘图代码看到这一点。选择具有非零 tmExternalLeading 的字体（Arial 适合我）。`TextOut`使用独特的背景颜色绘制一些文本。然后根据返回的值测量文本`GetTextExtentPoint32`并绘制​​一些线条。您会看到背景颜色矩形不包括外部前导。外部领导就是：外部。它不在字符单元格的范围内。

```
 // Draw the sample text with an opaque background.
  assert(::GetMapMode(ps.hdc) == MM_TEXT);
  assert(::GetBkMode(ps.hdc) == OPAQUE);
  assert(::GetTextAlign(ps.hdc) == TA_TOP);
  COLORREF rgbOld = ::SetBkColor(ps.hdc, RGB(0xC0, 0xFF, 0xC0));
  ::TextOutW(ps.hdc, x, y, pszText, cchText);
  ::SetBkColor(ps.hdc, rgbOld);

  // This vertical line at the right side of the text shows that opaque
  // background is exactly the height returned by GetTextExtentPoint32.
  SIZE size = {0};
  if (::GetTextExtentPoint32W(ps.hdc, pszText, cchText, &size)) {
    ::MoveToEx(ps.hdc, x + size.cx, y, NULL);
    ::LineTo(ps.hdc, x + size.cx, y + size.cy);
  }

  // These horizontal lines show the normal line spacing, taking into
  // account tmExternalLeading.
  assert(tm.tmExternalLeading > 0);  // ensure it's an interesting case
  ::MoveToEx(ps.hdc, x, y, NULL);
  ::LineTo(ps.hdc, x + size.cx, y);  // top of this line
  const int yNext = y + tm.tmHeight + tm.tmExternalLeading;
  ::MoveToEx(ps.hdc, x, yNext, NULL);
  ::LineTo(ps.hdc, x + size.cx, yNext);  // top of next line 
```

彩色矩形底部和下一行顶部之间的间隙表示外部前导，它始终位于字符单元之外。

[OCR-B](http://en.wikipedia.org/wiki/OCR-B)专为银行设备中可靠的光学字符识别而设计。对于某些 OCR 应用程序，具有较大的外部前导（相对于实际文本的高度）可能是合适的。对于这种特殊的字体，它可能不是一种审美选择。

# jquery - jsTree 不使用“内联”json 数据呈现

> ID：15091836
> 
> 赞同：1
> 
> 时间：2013-02-26T14:39:10.767
> 
> 标签：jquery, json, jstree

几天来，我一直在与 jsTree 苦苦挣扎。这很简单，但什么都没有发生。这是脚本：

```
$(document).ready(function () {

$("#TreeView2").jstree({
    "json_data": {
        "data": [{
            "data": "A node",
                "metadata": {
                id: 23
            },
            "children": ["Child 1", "A Child 2"]
        }, {
            "attr": {
                "id": "li.node.id1"
            },
            "data": {
                "title": "Long format demo",
                "attr": {
                    "href": "#"
                }
            }
        }]
    },
    "plugins": ["themes", "json_data", ]
}).bind("select_node.jstree",

function (e, data) {
    alert(data.rslt.obj.data("id"));
});
}); 
```

直截了当，直接出书。这是标记结果：

```
<div id="TreeView2" class="jstree jstree-1 jstree-default">
     <ul></ul>
</div> 
```

除了 div 容器上的类之外，什么都没有呈现。如果我从 ajax 帖子中检索 json 数据也是如此。没有。我的控制台中甚至没有注册 ajax 帖子。也没有错误。**如果我使用内联 html 标记作为数据源运行该插件，则该插件可以工作。**与现有标记一样。

该脚本位于 document.ready 函数中。开始的标记只是一个带有 ID 的 div。所有插件脚本均已正确加载。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T14:48:17.380

更改脚本以运行`onLoad.`

小提琴：http: [//jsfiddle.net/9wBET/](http://jsfiddle.net/9wBET/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T12:55:36.283

事实证明，jstree 文档除了非常薄弱且有时不存在之外，它纯粹是过时的虚假信息，而且非常错误。问题中的示例取自他们的文档/示例。我不得不完全重写整个事情。**jstree 甚至没有渲染的主要原因是缺少多个插件，例如“ui”和“types”。**我基本上从 10 个不同的站点和指南中找到了有关如何使用动态 json 数据等的信息。

# javascript - 创建支持触摸和单击的绑定

> ID：15091837
> 
> 赞同：1
> 
> 时间：2013-02-26T14:39:13.993
> 
> 标签：javascript, jquery, mobile, touch, desktop

我正在寻找一个绑定触摸设备的“touchstart”和桌面设备的“click”的绑定。

在某些触摸设备上绑定“点击”会在处理点击之前产生 500 毫秒的延迟。

使用“typeof window.ontouchstart”将触摸设备与桌面分离不再有效，因为主流浏览器现在支持触摸（[jQuery TouchClick](https://github.com/tuxracer/jquery-touchclick)），但是用鼠标单击不会模拟触摸事件。

[jQuery Mobile](http://jquerymobile.com/demos/1.1.1/docs/api/events.html)有这个特性，[正如这里所建议的那样](https://stackoverflow.com/questions/11752506/unifying-touch-and-click-events?rq=1)，但我正在寻找一个精简的 jQuery 插件来实现这个特性，而不使用 jQuery Mobile 框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:50:28.410

绑定两者呢，那么当触发触摸时，忽略后面的点击事件呢？

```
var ignoreClick = false;

function touchOrClick(e){
    if (e.type == 'click'){
        if (ignoreClick){
            ignoreClick = false;
            return;
        }
    } else {
        ignoreClick = true;
    }
    // do stuff
}

node.addEventListener('ontouchstart', touchOrClick, false);
node.addEventListener('onclick', touchOrClick, false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T02:01:36.320

如果您升级到最新版本的 jquery-touchclick，它现在支持两者。

# vb.net - 异步调用完成时执行回调方法

> ID：15091839
> 
> 赞同：1
> 
> 时间：2013-02-26T14:39:17.817
> 
> 标签：vb.net, asynchronous

我正在尝试了解有关异步调用的更多信息，这是 MCSD 考试的一部分。我已成功遵循以下页面上的所有示例：http: [//msdn.microsoft.com/en-gb/library/2e08f6yc.aspx](http://msdn.microsoft.com/en-gb/library/2e08f6yc.aspx)。

我为所有示例创建了控制台应用程序和 Winform 应用程序。但是，如果使用 WinForm 应用程序，则在最后一个示例（异步调用完成时执行回调方法）中永远不会调用回调函数。请看下面的代码：

```
Imports System
Imports System.Threading
Imports System.Runtime.InteropServices

Public Class AsyncDemo
    ' The method to be executed asynchronously.
    '
    Public Function TestMethod(ByVal callDuration As Integer, _
            <Out()> ByRef threadId As Integer) As String
        Console.WriteLine("Test method begins.")
        Thread.Sleep(callDuration)
        threadId = AppDomain.GetCurrentThreadId()
        Return "MyCallTime was " + callDuration.ToString()
    End Function
End Class

' The delegate must have the same signature as the method
' you want to call asynchronously.
Public Delegate Function AsyncDelegate(ByVal callDuration As Integer, _
    <Out()> ByRef threadId As Integer) As String

Public Class AsyncMain
    ' The asynchronous method puts the thread id here.
    Private Shared threadId As Integer

    Shared Sub Main()
        ' Create an instance of the test class.
        Dim ad As New AsyncDemo()

        ' Create the delegate.
        Dim dlgt As New AsyncDelegate(AddressOf ad.TestMethod)

        ' Initiate the asynchronous call.
        Dim ar As IAsyncResult = dlgt.BeginInvoke(3000, _
            threadId, _
            AddressOf CallbackMethod, _
            dlgt)

        Console.WriteLine("Press Enter to close application.")
        Console.ReadLine()
    End Sub

    ' Callback method must have the same signature as the
    ' AsyncCallback delegate.
    Shared Sub CallbackMethod(ByVal ar As IAsyncResult)
        ' Retrieve the delegate.
        Dim dlgt As AsyncDelegate = CType(ar.AsyncState, AsyncDelegate)

        ' Call EndInvoke to retrieve the results.
        Dim ret As String = dlgt.EndInvoke(threadId, ar)

        Console.WriteLine("The call executed on thread {0}, with return value ""{1}"".", threadId, ret)
    End Sub
End Class 
```

为什么在 WinForm 应用程序中从未达到 CallbackMethod？请注意，我了解控制台应用程序和 WinForm 应用程序之间的区别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T14:57:34.597

问题是`Console.ReadLine()`. 在 WinForms 应用程序中，此调用不会阻塞。相反，您可以使用`Thread.Sleep(Timeout.Infinite)`或最适合您需要的任何东西。

# wcf - Silverlight/WCF 部署问题

> ID：15091840
> 
> 赞同：0
> 
> 时间：2013-02-26T14:39:21.807
> 
> 标签：wcf, deployment, silverlight-5.0

我有一个与 WCF 服务通信的 Silverlight 应用程序。作为 web.config 文件的一部分，有一个使用 WCF 的必需部分：

```
<system.serviceModel>
<serviceHostingEnvironment aspNetCompatibilityEnabled="true" 
multipleSiteBindingsEnabled="true" />
</system.serviceModel> 
```

部署到 Windows 2008 服务器后，启动 Silverlight 应用程序时出现以下错误：

```
Parser Error Message: It is an error to use a section registered as
allowDefinition='MachineToApplication' beyond application level.  This error can be
caused by a virtual directory not being configured as an application in IIS.

Source Error:

Line 29: 
Line 30: <system.serviceModel>
Line 31:         <serviceHostingEnvironment aspNetCompatibilityEnabled="true"
Line 32:             multipleSiteBindingsEnabled="true" />
Line 33:     </system.serviceModel> 
```

经过一些研究，有几个项目可能会导致这种情况：

1.  应用程序所在的目录未设置为 IIS 中的应用程序
2.  多个 web.config 文件存在于应用程序结构下的一个或多个子目录中。

这些情况都不适用于我的情况。我的应用程序*设置*为 IIS 下的应用程序，应用程序结构中只有*一个*web.config 文件。

出现此消息的任何其他原因？如果我在应用程序的 web.config 文件中明确定义身份验证类型，也会发生这种情况。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T21:06:14.290

此外，为了让它发挥作用，我有

... CodeBehind="mypage.aspx.vb" 继承="Account5.mypage"

我把它改成了

... CodeFile="mypage.aspx.vb" 继承="mypage"

我希望这对其他人有帮助。

# android - 当另一个应用程序中的活动崩溃时，我的应用程序已静默崩溃

> ID：15091845
> 
> 赞同：0
> 
> 时间：2013-02-26T14:39:34.543
> 
> 标签：android, android-intent

我的应用程序中有一个活动，它正在访问来自其他应用程序的活动以完成某些任务（这可能是从 Play 商店应用程序下载的应用程序），我在按钮单击侦听器中使用以下代码启动活动，

```
Intent i=new Intent();
i.setComponent(new ComponentName("com.myapp.package", "com.myapp.package.className"));
i.setAction(Intent.ACTION_MAIN);
startActivity(i); 
```

如果另一个应用程序有一些崩溃，并且做错了什么并且它崩溃了。

结果我的应用程序被活动管理器静默杀死，请在日志下方找到，

```
02-26 17:39:31.469   281   532 I ActivityManager: START {act=android.intent.action.MAIN flg=0x14000000 cmp=com.example.dummy.mydummyapp2.DummyApp2 (has extras) u=0} from pid 8487
02-26 17:39:31.469   281   532 W WindowManager: Failure taking screenshot for (230x143) to layer 22000
02-26 17:39:31.541 16816 16816 E AndroidRuntime: FATAL EXCEPTION: main
02-26 17:39:31.541 16816 16816 E AndroidRuntime: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.dummy.mydummyapp2/com.example.dummy.mydummyapp2.DummyApp2}: java.lang.NullPointerException
02-26 17:39:31.541 16816 16816 E AndroidRuntime:    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
02-26 17:39:31.541 16816 16816 E AndroidRuntime:    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
02-26 17:39:31.541 16816 16816 E AndroidRuntime:    at android.app.ActivityThread.access$600(ActivityThread.java:130)
02-26 17:39:31.541 16816 16816 E AndroidRuntime:    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
02-26 17:39:31.541 16816 16816 E AndroidRuntime:    at android.os.Handler.dispatchMessage(Handler.java:99)
02-26 17:39:31.541 16816 16816 E AndroidRuntime:    at android.os.Looper.loop(Looper.java:137)
02-26 17:39:31.541 16816 16816 E AndroidRuntime:    at android.app.ActivityThread.main(ActivityThread.java:4745)
02-26 17:39:31.541 16816 16816 E AndroidRuntime:    at java.lang.reflect.Method.invokeNative(Native Method)
02-26 17:39:31.541 16816 16816 E AndroidRuntime:    at java.lang.reflect.Method.invoke(Method.java:511)
02-26 17:39:31.541 16816 16816 E AndroidRuntime:    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
02-26 17:39:31.541 16816 16816 E AndroidRuntime:    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
02-26 17:39:31.541 16816 16816 E AndroidRuntime:    at dalvik.system.NativeStart.main(Native Method)
02-26 17:39:31.541 16816 16816 E AndroidRuntime: Caused by: java.lang.NullPointerException
02-26 17:39:31.541 16816 16816 E AndroidRuntime:    at com.example.dummy.mydummyapp2.DummyProvider.search(DummyProvider.java:136)
02-26 17:39:31.541 16816 16816 E AndroidRuntime:    at com.example.dummy.mydummyapp2.DummyApp2.onCreate(DummyApp2.java:115)
02-26 17:39:31.541 16816 16816 E AndroidRuntime:    at android.app.Activity.performCreate(Activity.java:5008)
02-26 17:39:31.541 16816 16816 E AndroidRuntime:    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
.
.
02-26 17:39:31.553   281 24382 W ActivityManager:   Force finishing activity com.example.dummy.mydummyapp2/.DummyApp2
02-26 17:39:31.553   281 24382 W WindowManager: Failure taking screenshot for (230x143) to layer 22015
*****02-26 17:39:31.553   281 24382 W ActivityManager:   Force finishing activity com.example.dummy.mydummyapp1/.activities.DummyApp1*****
02-26 17:39:32.053   281   294 W ActivityManager: Activity pause timeout for ActivityRecord{a7082df0 com.example.dummy.mydummyapp2/.DummyApp2}
02-26 17:39:32.437   281   281 I ActivityManager: No longer want com.google.android.partnersetup (pid 31498): hidden #16
*02-26 17:39:42.437   281   294 W ActivityManager: Activity destroy timeout for ActivityRecord{a7082df0 com.example.dummy.mydummyapp2/.DummyApp2}*
02-26 17:40:16.265   281 24383 I ActivityManager: Process com.example.dummy.mydummyapp2 (pid 16816) has died.
02-26 17:44:10.305   281   444 W ThrottleService: unable to find stats for iface rmnet0 
```

我不担心 dummyapp2 的崩溃，我只担心我的应用程序为什么会因为其他应用程序的崩溃而崩溃。

我在意图中尝试了不同的标志，如下所示，

```
i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
```

和

```
i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
```

但没有结果。

这是android的正常行为吗，如果我的应用程序从其他应用程序启动一个活动并且其他应用程序崩溃了我的应用程序也崩溃了？？？？？？

请有人澄清一下，我被卡住了。

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:53:54.133

如果其他活动是特定的（例如，我使用了类似的条形码阅读器活动），您可以使用 startActivityForResult，

我用过类似的东西并为我工作，我希望它也对你有用，

```
Intent intent = new Intent("com.google.zxing.client.android.SCAN");
intent.putExtra("SCAN_MODE", "QR_CODE");
startActivityForResult(intent, 23); 
```

在 ActivityResult 上，

```
public void onActivityResult(int requestCode, int resultCode, Intent intent) {
    if (requestCode == 23) {
       if (resultCode == RESULT_OK) {
             // use result values
         final String contents = intent.getStringExtra("SCAN_RESULT");
         final String format = intent.getStringExtra("SCAN_RESULT_FORMAT");
             //dosmthng
       }
    }
} 
```

以返回的意图做某事。

在我的应用程序中，如果条形码阅读器应用程序崩溃了，我的应用程序仍然可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T18:04:59.943

请尝试在块中包围对其他活动/应用程序的调用`try{}` `catch{}`，错误日志显示为`NullPointerException`，您可以通过这种方式控制崩溃。

# drupal - 如何设置 Drush 以使用代理服务器在 Windows7 上访问 Internet？

> ID：15091846
> 
> 赞同：1
> 
> 时间：2013-02-26T14:39:35.090
> 
> 标签：drupal, windows-7, proxy, wamp, drush

我正在使用 WAMP 进行 Drupal 开发。我已经安装了 drush，它在没有任何代理的情况下使用家庭网络时工作正常。当我在工作时，网络设置使用代理来访问互联网，因此任何需要互联网的 drush 命令，例如。drush dl {module_name}，不起作用。

谷歌搜索后，我只能找到告诉我如何在基于 *nix 的操作系统上配置它们的文本。我被windows7卡住了。任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T02:48:56.583

好的。我让它运行起来。我必须进行以下更改才能使 drush dl 在 Windows 7 上工作。显然“which wget”没有返回任何内容，因为 Windows 没有“which”命令。我破解了 drush 核心以进行以下更改。

1.  转到文件夹 C:\ProgramData\Drush\includes 中的文件 drush.inc
2.  更改行 $use_wget = drush_shell_exec('which wget'); with $use_wget = drush_shell_exec('where wget');

根本原因：Windows没有'which'命令，'where'命令起作用

我认为代理根本没有问题，它正确使用了drupal的settings.php文件中的代理

# ios6 - 我有一个 UICollectionView，我想在一个单元格中显示一个图像，它转到一个普通的 ViewController。我怎么做？

> ID：15091847
> 
> 赞同：1
> 
> 时间：2013-02-26T14:39:35.740
> 
> 标签：ios6, uinavigationcontroller, xcode4.5, uicollectionview, uicollectionviewcell

我有一个 UICollectionViewController（带有导航控制器），我想在一个单元格中显示一个图像，该图像“推”到一个普通的 ViewController（每个图像都不同）。我怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T06:18:30.880

似乎您想通过 UICollectionView 构建照片库。如果使用storyBoard，请使用segue

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"showDetail"])
    {
        NSIndexPath *selectedIndexPath = [[self.collectionView indexPathsForSelectedItems] objectAtIndex:0];

        // load the image, to prevent it from being cached we use 'initWithContentsOfFile'
        NSString *imageNameToLoad = [NSString stringWithFormat:@"%d_full", selectedIndexPath.row];
        NSString *pathToImage = [[NSBundle mainBundle] pathForResource:imageNameToLoad ofType:@"JPG"];
        UIImage *image = [[UIImage alloc] initWithContentsOfFile:pathToImage];

        DetailViewController *detailViewController = [segue destinationViewController];
        detailViewController.image = image;
    }
} 
```

如果使用 nib: 在 didSelectItemAtIndexPath 中，使用 self.navigationController 推送。

```
-(void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath{
    NSString *imageNameToLoad = [NSString stringWithFormat:@"%d_full", indexPath.row];
    NSString *pathToImage = [[NSBundle mainBundle] pathForResource:imageNameToLoad ofType:@"JPG"];
    UIImage *image = [[UIImage alloc] initWithContentsOfFile:pathToImage];
    DetailViewController *detailViewController = [[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:nil];
    detailViewController.image = image;
    [self.navigationController pushViewController:detailViewController animated:YES];
} 
```

Apple 的示例代码： [https ://developer.apple.com/library/ios/#samplecode/CollectionView-Simple/Introduction/Intro.html](https://developer.apple.com/library/ios/#samplecode/CollectionView-Simple/Introduction/Intro.html)

CollecionView 教程：[http ://www.raywenderlich.com/22324/beginning-uicollectionview-in-ios-6-part-12](http://www.raywenderlich.com/22324/beginning-uicollectionview-in-ios-6-part-12)

# sql - 如何正确使用 Oracle ORDER BY 和 ROWNUM？

> ID：15091849
> 
> 赞同：139
> 
> 时间：2013-02-26T14:39:42.927
> 
> 标签：sql, oracle, sql-order-by, rownum

我很难将存储过程从 SQL Server 转换为 Oracle，以使我们的产品与之兼容。

我有根据时间戳返回某些表的最新记录的查询：

**SQL 服务器：**

```
SELECT TOP 1 *
FROM RACEWAY_INPUT_LABO
ORDER BY t_stamp DESC 
```

=> 这将返回我最近的记录

但是**甲骨文：**

```
SELECT *
FROM raceway_input_labo 
WHERE  rownum <= 1
ORDER BY t_stamp DESC 
```

=>这将返回我最旧的记录（可能取决于索引），不管`ORDER BY`语句！

我以这种方式封装了 Oracle 查询以满足我的要求：

```
SELECT * 
FROM 
    (SELECT *
     FROM raceway_input_labo 
     ORDER BY t_stamp DESC)
WHERE  rownum <= 1 
```

它有效。但这对我来说听起来像是一个可怕的黑客攻击，特别是如果我在所涉及的表中有很多记录。

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2013-02-26T14:41:59.780

该`where`语句*在*`order by`. _ 因此，您想要的查询是“*取第一行，然后按* `t_stamp` *desc*排序”。这不是你想要的。

子查询方法是在 Oracle 中执行此操作的正确方法。

如果您想要一个在两个服务器上都可以使用的版本，您可以使用：

```
select ril.*
from (select ril.*, row_number() over (order by t_stamp desc) as seqnum
      from raceway_input_labo ril
     ) ril
where seqnum = 1 
```

外部`*`将在最后一列返回“1”。您需要单独列出这些列以避免这种情况。

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2013-02-26T14:47:43.657

改为使用`ROW_NUMBER()`。`ROWNUM`是一个伪列并且`ROW_NUMBER()`是一个函数。您可以阅读它们之间的差异并查看以下查询的输出差异：

```
SELECT * FROM (SELECT rownum, deptno, ename
           FROM scott.emp
        ORDER BY deptno
       )
 WHERE rownum <= 3
 /

ROWNUM    DEPTNO    ENAME
---------------------------
 7        10    CLARK
 14       10    MILLER
 9        10    KING

 SELECT * FROM 
 (
  SELECT deptno, ename
       , ROW_NUMBER() OVER (ORDER BY deptno) rno
  FROM scott.emp
 ORDER BY deptno
 )
WHERE rno <= 3
/

DEPTNO    ENAME    RNO
-------------------------
10    CLARK        1
10    MILLER       2
10    KING         3 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2021-05-12T15:03:10.643

从 Oracle 12c 开始，我们现在有了[行限制子句](https://docs.oracle.com/database/121/SQLRF/statements_10002.htm#BABEAACC)，可以做到这一点。

```
SELECT *
FROM raceway_input_labo 
ORDER BY t_stamp DESC
FETCH FIRST ROW ONLY 
```

或者针对不同场景（前 n 行、平局处理等）的许多[替代方案。](https://renenyffenegger.ch/notes/development/databases/Oracle/SQL/select/first-n-rows/index)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-23T16:01:29.963

在上面的评论中记录了几个设计问题。简短的故事，在 Oracle 中，当您有大型表和/或具有相同列名的表时，您需要手动限制结果（并且您不想将它们全部显式键入并全部重命名）。简单的解决方案是找出你的断点并在你的查询中限制它。或者，如果您没有冲突的列名约束，您也可以在内部查询中执行此操作。例如

```
WHERE m_api_log.created_date BETWEEN TO_DATE('10/23/2015 05:00', 'MM/DD/YYYY HH24:MI') 
                                 AND TO_DATE('10/30/2015 23:59', 'MM/DD/YYYY HH24:MI') 
```

将大大减少结果。然后你可以 ORDER BY 甚至做外部查询来限制行。

另外，我认为 TOAD 具有限制行数的功能；但是，不确定这是否会限制在 Oracle 上的实际查询中。没有把握。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-10-20T12:51:18.537

在这个用例中我建议的替代方法是使用 MAX(t_stamp) 来获取最新的行......例如

```
select t.* from raceway_input_labo t
where t.t_stamp = (select max(t_stamp) from raceway_input_labo) 
limit 1 
```

我的编码模式偏好（也许） - 可靠，通常比尝试从排序列表中选择第一行执行或更好 - 而且意图更明确易读。
希望这可以帮助 ...

SQLer

# optimization - 优化 Blas-like 操作 - A`*B*A

> ID：15091851
> 
> 赞同：1
> 
> 时间：2013-02-26T14:39:44.570
> 
> 标签：optimization, matrix, algebra, blas

给定两个矩阵 A 和 B，其中 B 是对称的（并且是半正定的），计算 A`*B*A 的最佳（最快）方法是什么？

目前，使用 BLAS，我首先使用 dsymm（引入临时矩阵 C）计算 C=B*A，然后使用 dgemm 计算 A`*C。

使用 BLAS 和 mkl 是否有更好（更快，无临时）的方法来做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:29:41.753

我将提供某种答案：与一般情况 A*B*C 相比，您知道最终结果是对称矩阵。用 BLAS 子程序 dsymm 计算 C=B*A 后，你想计算 A'C，但你只需要计算矩阵的上对角线部分，并将严格的上对角线部分复制到下对角线部分。

不幸的是，似乎没有一个 BLAS 例程，您可以事先声明给定两个通用矩阵，输出矩阵将是对称的。我不确定为此编写自己的函数是否有益。这可能取决于矩阵的大小和实现。

编辑：这个想法最近似乎在这里得到解决：[A Matrix Multiplication Routine that Updates Only the Upper or Lower Triangular Part of the Result Matrix](http://software.intel.com/en-us/articles/a-matrix-multiplication-routine-that-updates-only-the-upper-or-lower-triangular-part-of-the)

# iphone - resizableImageWithCapInsets 不会为 UITableViewCell 背景拉伸图像

> ID：15091856
> 
> 赞同：0
> 
> 时间：2013-02-26T14:40:07.233
> 
> 标签：iphone, ios, objective-c, uitableview

我正在自定义 a 的背景`UITableViewCell`。我使用以下代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

  NSString *cellIdentifier = @"MenuItemCell";
  UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
  if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:cellIdentifier];
  }
    UIImageView* uiv= [[UIImageView alloc]initWithImage:[[UIImage imageNamed:@"bkgCell44.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 10, 0, 10)]];
uiv.frame = CGRectMake(0, 0, 320, 44);
cell.backgroundView = uiv;
cell.backgroundColor = [UIColor clearColor];

return cell;

} 
```

图像已显示，但根本没有拉伸...

任何帮助指出我做错了什么？用于按钮和导航栏的相同代码...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:49:56.887

```
if (cell == nil) 
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:cellIdentifier];

   UIImageView* uiv= [[UIImageView alloc]init];
   uiv.image = [UIImage imageNamed:@"bkgCell44.png"];
   uiv.frame = CGRectMake(0, 0, 320, 44);
   uiv.contentMode = UIViewContentModeScaleAspectFit;
   cell.backgroundView = uiv;
   cell.backgroundColor = [UIColor clearColor];
} 
```

# jquery - 使用 Ajax 向 alert() 添加换行符

> ID：15091860
> 
> 赞同：1
> 
> 时间：2013-02-26T14:40:10.357
> 
> 标签：jquery, ajax, alert

我发现这个[链接](https://stackoverflow.com/questions/591130/can-i-add-a-br-and-links-to-a-javascript-alert)向我展示了 \n 对我的目标有效。

但它并没有按照我的方式工作。

```
$.ajax({
        url:'ajax/core/Ajax_Request.php',
        type:'POST',
        dataType:'json',
        success:function (result) {
            alert(result.error);
            }
}); 
```

在我的 php 文件中

```
$resultado['error']='1\n2\\n3.';
echo json_encode($resultado); 
```

而且它没有显示断线，无论是`\n`或`\\n`

它正在显示`1\n2\n3`

谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T14:42:50.340

你需要 php 端的双引号：

```
$resultado['error']= "1\n2\n3";
echo json_encode($resultado); 
```

# matlab - 在matlab中访问向量中的值

> ID：15091862
> 
> 赞同：0
> 
> 时间：2013-02-26T14:40:26.810
> 
> 标签：matlab, vector

我有一个 Nx2 向量，向量中的每一行都是矩阵中的一个坐标。例如：调用 Path 的向量如下所示：

```
Path=[1 2;
 3 4;
 5 6;
 7 8;]; 
```

我的问题是如何访问向量来获取我的 x 和 y 坐标？如果我写 Path(1) 答案是 1，而 Path(2) 答案是 3，但我想取 1 2，然后 3 4 等。我可以循环执行吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T14:43:51.197

这将一一为您提供每一行。

```
for i=1:size(Path,1)
    Path(i,:)
end 
```

如果您只想绘制路径，请尝试：

```
plot(Path(:,1),Path(:,2)) 
```

# angularjs - 如何使用 angular.element find 函数通过 JQuery 选择器进行搜索？

> ID：15091872
> 
> 赞同：2
> 
> 时间：2013-02-26T14:41:10.893
> 
> 标签：angularjs, angularjs-directive, angular-ui

```
describe("create a simple directive", function () {

    var simpleModule = angular.module("directivesSample", []);

    simpleModule.controller('Ctrl2', function ($scope) {
        $scope.format = 'M/d/yy h:mm:ss a';
    });

    simpleModule.directive("myCurrentTime", function ($timeout, dateFilter) {

        return function (scope, element, attr) {
            var format;
            var timeoutId;

            function updateTime() {
                element.text(dateFilter(new Date(), format));
            }

            scope.$watch(attr.myCurrentTime, function (value) {
                format = value;
                updateTime();
            });
            function updateLater() {
                timeoutId = $timeout(function () {
                    updateTime();
                    updateLater();

                }, 1000);
            }

            element.bind('$destroy', function () {
                $timeout.cancel(timeoutId);
            });
            updateLater();
        }

    });

    beforeEach(module('directivesSample'));

    var element = angular.element(

        '<div ng-controller="Ctrl2">Date format:<input ng-model="format"> ' +
            '<hr/>Current time is: ' +
            '<span class="timeout" my-current-time="format" id="timeout-render"></span>' +
            '</div>');

    var directiveScope;
    var scope;
    var linkedElement;
    var linkFunction;

    beforeEach(inject(function ($rootScope, $compile) {
        scope = $rootScope.$new();
        linkFunction = $compile(element);
        linkedElement = linkFunction(scope);
        scope.$apply();
    }));

    it("should define element time out", function () {

    var angularElement = element.find('span'); // <-- element is not returned if set to   var angularElement = element.find('.timeout'); or var angularElement = element.find('#timeout-render'); 

        console.log(angularElement.text());
        expect(angularElement.text()).not.toBe('');
    })

}); 
```

经过上述测试，为什么我无法通过 JQuery 选择器搜索元素？我知道 find() 方法文档中的[限制](http://docs.angularjs.org/api/angular.element)。但是，我已经检查了 angularUI 项目，检查了 find() 函数的用法，如下[所示](https://github.com/angular-ui/bootstrap/blob/master/src/tooltip/test/tooltip.spec.js)

```
 var tt = angular.element(elm.find("li > span")[0]); 
```

并发现这些人正在使用 find 通过 jQuery 选举器搜索元素，而不仅仅是标记名称，而我却无法这样做。我错过了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T14:45:43.243

这是因为 Angular 中内置的 jqLit​​e 对 CSS 选择器的支持有限。但是如果在包含 Angular 之前在脚本标签中包含 jQuery，Angular 会看到并使用 jQuery 而不是它的 jqLit​​e 来调用 angular.element()。

# vaadin - 编译 Vaadin 小部件集并在另一个项目中使用生成的文件

> ID：15091876
> 
> 赞同：0
> 
> 时间：2013-02-26T14:41:25.987
> 
> 标签：vaadin

我使用 Eclipse 编译了 GoogleMapWidget ( [http://vaadin.com/directory#addon/36](http://vaadin.com/directory#addon/36) )，它在 WEB-INF/vaadin/widgetsets 下生成了一些文件。然后我将整个 widgetsets 目录复制到 WEB-INF/vaadin 中的另一个项目，并尝试在第二个项目中使用该小部件，但它似乎不想工作。

编译的小部件集是否不可重用？

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T11:21:41.507

我没有尝试过，但我想它应该可以工作。但是，我认为没有任何理由可以证明这种努力是合理的。Widgetset 编译大约需要一分钟，所以何苦呢。

小部件集并不是每次构建应用程序时都要编译的。仅当您进行客户端小部件开发或添加需要重新编译 wigetset 的新插件时。

请记住更改 web.xml 中的小部件集

```
<init-param>
    <description>Application widgetset</description>
    <param-name>widgetset</param-name>
    <param-value>com.example.widgetset.MySharedWidgetset</param-value>
</init-param> 
```

您可能还希望将 Widgetset .gwt.xml 文件复制到您在 web.xml 中为 param widgetset 描述的包中。

# javascript - f:ajax 根据 onevent 返回值限制监听方法调用

> ID：15091879
> 
> 赞同：1
> 
> 时间：2013-02-26T14:41:32.250
> 
> 标签：javascript, ajax, jsf-2, listener

我如何检查 Oneevent javascript 函数是否返回 true 或 False ？因为基本上我想要做的是限制基于 Javascript 返回值的侦听器方法调用。

以下代码在 Firebug 中返回语法错误。

```
 <f:ajax event="keyup" render="@form" onevent="return validatePageNumber(event);" listener="#{bean.listenerMethod}"/> 
```

那么我如何确定返回值并基于lister方法应该触发。在此先感谢:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T15:23:00.580

该`onevent`属性必须指定一个 JS 函数引用名称，而不是整个 JS 脚本。该`onevent`属性的正确用法是

```
<f:ajax ... onevent="functionName" /> 
```

*（是的，没有括号！）*

和

```
function functionName(data) {
    alert(data.status); // Will show 3 times.
} 
```

但是，对于您的预期目的，这显然是错误的工具。`onevent`应该只引用一个**侦听**器函数，该函数将被调用 3 次：一次在发送 ajax 请求之前，一次在 ajax 响应到达之后，一次在基于 ajax 响应更新 HTML DOM 之后。有关正确的真实世界使用示例，请参阅在ajax 调用 <f:ajax>和[禁用/启用 ajax 事件上的命令](https://stackoverflow.com/questions/8001068/disable-enable-commandbutton-on-ajax-event/8001153#8001153)[按钮后处理 onclick 函数](https://stackoverflow.com/questions/13540298/proccess-onclick-function-after-ajax-call-fajax/13540905#13540905)等。

只需使用父组件的`onXXX`属性（您想挂在哪里）`XXX`。`<f:ajax event>`例如假设它是一个`<h:inputText>`：

```
<h:inputText ... onkeyup="return validatePageNumber(event)">
     <f:ajax event="keyup" render="@form" />
</h:inputText> 
```

# sql-server - 数据服务服务器 (DSS) && SQL Server：如何处理异常 (RaiserError)

> ID：15091883
> 
> 赞同：0
> 
> 时间：2013-02-26T14:41:38.923
> 
> 标签：sql-server, wso2, wso2dss

在 SQL Server 中，开发了一个过程，该过程在某一时刻返回带有`RAISERROR`.

发生这种情况时，DSS 会抛出“javax.xml.stream.XMLStreamException”。

是否可以处理异常以显示数据库抛出的相同消息，因为这样可以知道发生的错误类型而不仅仅是“XMLStreamException”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:13:26.217

当您创建数据服务时，它通常是在启用流式传输的情况下创建的。启用流式传输时，它不会构造有效负载，而只是流式传输，因此可能会发生此错误。您可以通过[取消选中数据服务中的框](http://docs.wso2.org/wiki/display/DSS301/RDBMS)或在数据服务中定义和属性来禁用流。

```
disableStreaming=true 
```

# python - 正则表达式与预期的行不匹配

> ID：15091884
> 
> 赞同：-4
> 
> 时间：2013-02-26T14:41:40.400
> 
> 标签：python, regex

我使用正则表达式`fault-filtertime 5(.*)! TH`来匹配和之间的所有内容`fault-filtertime 5`和 `! TH`。但是，由于某种原因，这不起作用。任何想法为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T14:45:03.227

修改器是贪婪的`*`，如果你允许它，它会匹配它可以匹配的最大值。`! TH`如果您的输入文本中出现多次，`.*`则将匹配所有内容，直到*最后一次*出现。

改为使用`*?`来关闭贪婪匹配；`.*?`将匹配*最小*字符数：

```
>>> import re
>>> re.search('fault-filtertime 5(.*)! TH', 'fault-filtertime 5 foo bar baz! TH fault-filtertime 5 spam ham eggs! TH').group(1)
' foo bar baz! TH fault-filtertime 5 spam ham eggs'
>>> re.search('fault-filtertime 5(.*?)! TH', 'fault-filtertime 5 foo bar baz! TH fault-filtertime 5 spam ham eggs! TH').group(1)
' foo bar baz' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T17:12:13.767

如果您有多行数据，或者包含其他控制字符，则需要使用`re.DOTALL`，如下所示：

```
import re

data = """
fault-filtertime 5
foo
bar
baz
! TH
"""

regex_str = "fault-filtertime 5(.*?)! TH"
regex = re.compile(regex_str, re.DOTALL)
result = re.search(regex, data)
print result.group(1) 
```

# python - Python GTK：实例化 gtk.Bin 的子类

> ID：15091889
> 
> 赞同：2
> 
> 时间：2013-02-26T14:41:45.673
> 
> 标签：python, gtk, pygtk

我正在尝试在 Python 中编写一个 GTK 小部件，它是[gtk.Bin](http://developer.gnome.org/pygtk/stable/class-gtkbin.html)的子类，但不确定如何实例化它。我班的前几行看起来像：

```
class Completer(gtk.Bin):

    def __init__(self, exts)):

        gtk.Container.__init__(self)
        child = gtk.VBox(spacing=15)
        self.add(child) 
```

我不知道如何设置子属性，因此是代码。但是它挂断了 gtk.Container.__init__(self) 的消息：

```
 File "C:\Users\462974\Documents\Local Sandbox\tools\python\packages\GUI\tools\SNCompleter.py", line 133, in __init__
    gtk.Container.__init__(self)
TypeError: cannot create instance of abstract (non-instantiable) type `GtkBin' 
```

如果我调用 gtk.Bin.__init__ 也会发生这种情况。我不确定如何初始化这个子类，但大概有一种方法，因为 GTK 确实有 gtk.Bin 的可用子类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:16:59.940

您需要为您的小部件注册一个新的 gtype，否则它将使用与超类相同的类型，并且由于它是一个抽象类，您将无法实例化它（如异常所示）。

有两种注册新 gtype 的方法：

1.  使用`gobject.type_register`.
2.  在你的类中设置`__gtype_name__`类变量。

这是使用第二个选择的示例（因为我认为更直接）：

```
class Completer(gtk.Bin):
    __gtype_name__= "Completer"

    def __init__(self, exts, *args, **kwargs):
        super(Completer, self).__init__(*args, **kwargs)
        child = gtk.VBox(spacing=15)
        self.add(child) 
```

# emacs - sierotki.el 包在 Emacs-snapshot 下不起作用

> ID：15091897
> 
> 赞同：0
> 
> 时间：2013-02-26T14:41:56.347
> 
> 标签：emacs, latex, elisp, emacs23, emacs24

几年来，我曾经在 Emacs 中使用[`sierotki.el`](http://www.emacswiki.org/emacs/sierotki.el)包 ( [NonbreakableSpace ) 来编写 LaTeX。](http://www.emacswiki.org/emacs/NonbreakableSpace)它在我的配置中运行良好（Ubuntu 12.04、emacs 23 或 emacs 24 (24.2.1)）。前段时间我安装了 emacs-snapshot (emacs 24.3.50.1) （来自 ppa:cassou/emacs ppa）并且`sierotki.el`不再工作（没有任何错误）。

有人知道出了什么问题吗？

* * *

为了完整起见，该包仅在一个字母的单词（例如，英语或我的母语中的许多其他`~`单词）之后插入（LaTeX 中的不可破坏空格）。`I``a`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-11T20:00:43.490

原因是`sierotki.el`以前使用变量，在最近的 Emacsen`last-command-char`中已更改为。`last-command-event`您可能想要升级`sierotki.el`（我前段时间与作者联系过这个修复，他应用了它），或者自己修复它。

# spring - Create 方法的集成测试策略

> ID：15091899
> 
> 赞同：0
> 
> 时间：2013-02-26T14:41:59.967
> 
> 标签：spring, hibernate, integration-testing, unitils

我想测试创建的实体是否已正确持久化到数据库。create 方法有一个服务集成测试：

```
@SpringApplicationContext({"setting ...."})
public class PersonServiceIntegrationTest extends UnitilsJUnit4 {
     @SpringBeanByName
     private PersonService personService;
     @Test
     public void createPerson() {
        String name = "Name";
        String sname = "Surename";
        DtoPerson item = personService.createPerson(name, sname, Arrays.asList( new DtoAddress("Pisek","CZE", true), new DtoAddress("Strakonice", "CZE", false) );
        Assert.notNull("Cannot be null", item);
        /* 
         *  This assertion fails because of transaction (I suppose) - item is not in
         *  database right now. 
         *  Why? Returned dto 'item; is not null?
         */
        //domain with all fetched related entities, eg. address
        Person p = personService.getPerson(item.getIdPerson());
        List<Address> addresses = p.getAddresses();
        Assert.notNull("Cannot be null", p);
        Assert.notNull("Cannot be null", addresses);//return collection of Address
        Assert.notFalse("Cannot be emtpty", addresses.isEmpty());
        ReflectionAssert.assertPropertyLeniens("City", Arrays.asList("Pisek", "Strakonice"), addresses);
     }
} 
```

1.  如果我使用休眠，是否有必要测试创建实体？有人可以写你尝试测试低级休眠但休眠有自己的测试。上面有一个简单的代码，但我可以想象一些特定的代码同时保留更多的实体（例如，一对多加上几个一对一的关系）。我想测试关系是否得到了正确的维持。

2.  有没有一种模式可以以这种方式进行测试？我有一个问题，该记录不在数据库中。我不想使用返回的 dto （它只呈现聚合根实体 - 人，但它没有说明人员基本数据（一对多）、人员地址（一对多）等）......我想获取持久记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T05:45:08.123

我决定为创建人重新设计服务方法。

1.  PersonService 仅负责创建域实体 Person - test 将仅测试返回的 DtoPerson 及其值。
2.  PersonService 将注入 AddressService、PersonBasicDataService，它们有自己的创建方法，以集合为参数。这些服务将有自己的测试类，并且只测试返回的 DtoAddress 或 DtoPersonBasicData 集合。

测试将很简单，只会解决自己的责任。:-)

正如[@Ralph](https://stackoverflow.com/users/280244/ralph)在他的回答下的评论中所说 - 这个测试用例与服务层无关。有必要测试领域层。还有一个我没有在集成测试中使用的新想法——测试有自己的休眠会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:19:13.570

我测试持久性的方法是：

*   1）我创建域实体，
*   2) 用 Hibernate/JPA 保存它，
*   3) 刷新和清除休眠会话/实体管理器
*   4）用休眠再次加载实体
*   5）将原始实体与我（重新）加载的实体进行比较

所以我很确定映射或多或少是正确的，并且每件事都会被持久化

# http - 禁止某些并发 GET 请求是否违反 RFC 2616（安全/幂等性）？

> ID：15091904
> 
> 赞同：0
> 
> 时间：2013-02-26T14:42:07.143
> 
> 标签：http, concurrency, get, rfc2616

我目前正在讨论关于禁止给定资源上的并发 GET 请求是否构成违反 RFC 2616 的问题（尤其是 GET 方法所需的幂等性和安全性，§9.1）。

例如; 如果我的服务器同时收到 GET /data/?dataId=123456 两次，您是否认为一个或两个请求返回错误消息违反了安全性或幂等性？

根据我的理解，RFC 指定相同的请求在再次调用时应该产生相同的结果。然而，我还没有看到任何关于并发请求的行为是可以接受的。

我的感觉是不允许并发 GET 访问（在给定资源上，当然不是一般规则）并不构成违反 RFC。返回 423 响应代码或 500（虽然不是很优雅），甚至是 429 或 420（尽管含义略有不同）对我来说似乎是可以接受的。

但是，我想知道是否有有效的论据证明 RFC 否认这一立场。

在此先感谢/最好的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-20T00:26:14.397

在操作上，您的服务器可以在保护其资源免受攻击方面做任何事情。

也就是说，禁止对资源的*任何*并发 GET 会让许多客户感到惊讶，委婉地说。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-19T06:50:56.893

## [9.1.1 安全方法](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.1.1)

> 特别是，已经建立了约定，即 GET 和 HEAD 方法**不应该**具有采取除检索之外的操作的意义。

阻止资源可能符合检索以外的操作。但措辞[**不应该**](http://www.ietf.org/rfc/rfc2119.txt)绝对允许你这样做！您可以将其改写为：不推荐，但有效。如果用户甚至不知道他正在引起这种副作用，那就更好了：

> 当然，不可能确保服务器不会因为执行 GET 请求而产生副作用；[..] 这里的重要区别是用户没有请求副作用。

## [9.1.2 幂等方法](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.1.2)

> 根据定义，从不产生副作用的**序列**是幂等的（前提是没有在同一组资源上执行**并发操作）。**

您的实现的唯一副作用是阻止并发请求。顺序请求没有副作用。我理解引用的段落不需要 9.1.2 对并发请求没有副作用。所以你从我这里得到了一个*有效*的 9.1.2。

顺便提一句。我会用[503 Service Unavailable](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.5.4)和[Retry-After](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.37)标头来回答。

# java - 序列化 BigInteger：符号幅度不匹配

> ID：15091906
> 
> 赞同：0
> 
> 时间：2013-02-26T14:42:07.563
> 
> 标签：java, exception, serialization, rsa, biginteger

我正在使用 Kaffe JVM（相当于 java 1.1）加密数据并尝试使用 JDK7 解密数据。

在我的算法中，我使用 BigInteger（RSA 加密）。当我在 JDK 中测试应用程序时，一切正常，但是当我尝试从 Kaffe JVM 中生成的 BigIntegers 使用 JDK7 反序列化时，我得到下面列出的这个异常。

我在考虑问题的许多原因：

*   不同的 JVM：[http ://www-01.ibm.com/support/docview.wss?uid=swg1IV13214](http://www-01.ibm.com/support/docview.wss?uid=swg1IV13214)
*   大端和小端的问题
*   处理器类型问题（16 位、32 位、64 位）。

任何想法如何解决或检测问题的原因？

提前致谢。

```
java.io.StreamCorruptedException: BigInteger: signum-magnitude mismatch
at java.math.BigInteger.readObject(BigInteger.java:3113)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1004)
at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1866)
at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1771)
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347)
at java.io.ObjectInputStream.readArray(ObjectInputStream.java:1685)
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1341)
at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1964)
at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1888)
at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1771)
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347)
at java.io.ObjectInputStream.readObject(ObjectInputStream.java:369)
at commons.persistence.PersisterDataBigIntegerBuffer.fileToObjects(PersisterDataBigIntegerBuffer.java:87)
at commons.persistence.CryptoRSAFileManager.getDataFromFile(CryptoRSAFileManager.java:44)
at test.commons.csv.ParserTester.test(ParserTester.java:41)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:06:42.550

它看起来像序列化格式的差异。

为了解决这个问题，一旦您从源 JDK 确定存储格式，您可能必须继承 BigInteger 并覆盖 readObject 方法。为了给你一个关于你在做什么的提示，这里是 OpenJDK 中 BigInteger 的 readObject 的相关部分：

```
// Read the alternate persistent fields that we care about
int sign = fields.get("signum", -2);
byte[] magnitude = (byte[])fields.get("magnitude", null);

// Validate signum
if (sign < -1 || sign > 1) {
   String message = "BigInteger: Invalid signum value";
   if (fields.defaulted("signum"))
      message = "BigInteger: Signum not present in stream";
   throw new java.io.StreamCorruptedException(message);
} 
```

# javascript - Web 服务器和客户端 cookie 上的应用程序池回收

> ID：15091907
> 
> 赞同：3
> 
> 时间：2013-02-26T14:42:09.357
> 
> 标签：javascript, asp.net, iis, cookies, forms-authentication

在我的 asp.net Web 应用程序中，我使用 InProc 会话状态和表单身份验证。我正在使用 javascript 在客户端系统上将 cookie 设置为在 x 天内过期。我的问题是，如果我们回收应用程序池或在网络服务器上重新发布网站，这些 cookie 是否仍然有效？还是会创建新的 cookie？

设置 cookie 的 javascript 可以在[http://www.knowledge.scot.nhs.uk/scripts/cookies.js](http://www.knowledge.scot.nhs.uk/scripts/cookies.js)和设置 cookie 栏的代码上看到

```
<div class="allow-cookies">
 <form method="post">
 <input type="submit" id="cookieBarAllow" value="OK" onclick="setCookie('cookie_bar_hide',  'yes', 365)">
 </form>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T14:56:28.810

我相信需要创建新的 cookie，但使用静态机器密钥可能会有所帮助：

[http://msdn.microsoft.com/en-us/library/ff649308.aspx](http://msdn.microsoft.com/en-us/library/ff649308.aspx)

这个 S/O 问题有一些进一步的细节可能会有所帮助：

[表单身份验证超时与会话超时](https://stackoverflow.com/questions/1470777/forms-authentication-timeout-vs-session-timeout)

# php - 当我在首页显示 wordpress 帖子时，为什么我的静态 php 代码会消失？

> ID：15091911
> 
> 赞同：0
> 
> 时间：2013-02-26T14:42:23.650
> 
> 标签：php, wordpress, posts

在我的首页上，我有一个新闻模块，基本上只显示来自新闻类别的 5 个最新帖子。这被硬编码到设计中，如下所示：

```
 <h2>Nyheder</h2>
                <?php query_posts('category_name=nyheder&posts_per_page=5'); ?>
                <?php if (have_posts()) : while (have_posts()) : the_post();?>
                    <a href="<?php the_field('link'); ?>"><?php the_time('M j, Y'); ?>&nbsp;-&nbsp;<?php the_title(); ?><br /><br /></a>
                <?php endwhile; endif; ?> 
```

出于某种原因，当我在我的首页上按此部分中的一个新闻链接时，它会在我的首页设计上显示新闻帖子，但它会删除在侧边栏上显示其他新闻主题的代码。

整个站点和问题都可以在这里[http://www.acagenturs.dk](http://www.acagenturs.dk) - jquery 横幅下方有 2 个部分。1 带有一些文本，另一个带有标题 Nyheder。尝试按其中一项新闻。

编辑：我正在显示帖子的内容，如下所示：

```
<?php wp_reset_query(); ?>   
                <?php if (have_posts()) : while (have_posts()) : the_post(); ?>
                <?php the_content(); ?>
                <?php endwhile; endif; ?> 
```

编辑：我现在发现，当按下一个新闻链接将我带到一个帖子页面时，它也会破坏我控制菜单的 javascripts。这很奇怪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:48:46.307

Wordpress 有两种类型的文章页面，一种只显示文章的一部分，没有评论，另一种显示所有内容。我不知道您的网站是结构化的，但请确保您在两个页面上都使用该功能。就我所见，您的代码中没有逻辑使东西消失...

# javascript - 使这个 Javascript 函数只在第一次匹配时运行

> ID：15091917
> 
> 赞同：0
> 
> 时间：2013-02-26T14:42:40.573
> 
> 标签：javascript, jquery

我试图让这个函数只在第一场比赛中添加 var ！（或运行一次）

```
 if ($.isFunction($.fn.flexslider)) {

        $("div.gallery-to-slideshow").each(function (index, item) {
            var gallery = new Gallery($(item));
        }); 
```

我尝试在不同的地方添加 :first ，但我对 Javascript 还是很陌生，仍然在努力理解它！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T14:46:58.687

您可以使用`first()` [http://api.jquery.com/first/](http://api.jquery.com/first/)

```
 if ($.isFunction($.fn.flexslider)) {
       var gallery = new Gallery($("div.gallery-to-slideshow").first());
     } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T14:51:42.103

试试这个：

```
var gallery = new Gallery($("div.gallery-to-slideshow:first")); 
```

见这里：[jsfiddle](http://jsfiddle.net/v7teT/)

# c++ - 生成随机数并在控制台上打印它们（C++）

> ID：15091923
> 
> 赞同：0
> 
> 时间：2013-02-26T14:42:51.267
> 
> 标签：c++, visual-studio

我正在研究一个简单的想法，即生成随机数（从 1 到 100）并使用 c++ 在控制台上打印它们，但问题是每次我运行程序时，它每次都会生成完全相同的数字，它是随机的，单个number 不是重复的，而是每次都是相同的随机数顺序！

这是我的代码

```
// DigitDisplayer.cpp : Defines the entry point for the console application.
//

#include "stdafx.h" 
#include <iostream>
#include <cstdlib>

using namespace std;

int _tmain(int argc, _TCHAR* argv[])
{
    int max = 100;
    int min = 1;
    int range = (max - min) + 1;
int randnum;
bool nums[100];
for(int j = 0; j < sizeof(nums); j++)
{
    nums[j] = false;
}
for(int i = 0; i < range; i++)
{
    int randnum = (rand() % range) + 1;
    if(nums[randnum] == false){
        nums[randnum] = true;
        cout<< randnum << "\n\n";
    }
    else {
        int randnum = (rand() % range) + 1;
    }
}
cout<< "DONE!!!\n\n";
system ("pause");
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:59:04.740

C++ 中的随机数生成器实际上是一个伪随机序列生成器，它从给定的种子开始。

这样做有两个原因：

*   在所有实现 C++ 库的机器上很难找到真正的随机源。

*   显然需要生成可重复序列的随机数生成器（例如，如果您的单元测试依赖于随机数，您希望测试是可重复的 - 并接收相同的“随机数”）。

这就是为什么您拥有为随机数生成提供“种子”的 srand 函数。

如果您不调用`srand`或使用相同的值调用它，您的“随机”序列将始终相同。

如果您使用不同的种子调用它，则生成的序列将是唯一的（实际上它可能具有模式或可预测的 - 这取决于实现）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T14:45:04.450

您必须使用`srand`种子`rand`功能，否则它总是返回相同的数字集。 `time()`函数定义在`cstdlib`

检查这个：

```
// DigitDisplayer.cpp : Defines the entry point for the console application.
//

#include "stdafx.h" 
#include <iostream>
#include <cstdlib>

using namespace std;

int _tmain(int argc, _TCHAR* argv[])
{
    int max = 100;
    int min = 1;
    int range = (max - min) + 1;
    int randnum;
    bool nums[100];

     srand (time(NULL));
for(int j = 0; j < sizeof(nums); j++)
{
    nums[j] = false;
}
for(int i = 0; i < range; i++)
{
    int randnum = (rand() % range) + 1;
    if(nums[randnum] == false){
        nums[randnum] = true;
        cout<< randnum << "\n\n";
    }
    else {
        int randnum = (rand() % range) + 1;
    }
}
cout<< "DONE!!!\n\n";
system ("pause");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T14:51:24.277

您需要播种随机数生成器。查看[`srand()`](http://www.cplusplus.com/reference/cstdlib/srand/)如何做到这一点。

您通常需要做的就是`srand()`在使用`rand()`. 请注意，`srand()`每次运行程序时都应该使用不同的值调用。

例如，使用[`time()`](http://www.cplusplus.com/reference/ctime/time/)to seed 是最简单的方法：

```
int main()
{
     srand(time(NULL));
     .....
     rand();
     .....
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T14:58:59.140

计算机无法生成随机数。相反，他们使用一种算法来生成一系列近似随机数行为方式的数字。这些算法称为伪随机数生成器 (PNRG)。在我所知道的每一种情况下，这些 PNRG 都可以用一个数字“播种”，这决定了伪随机数序列的开始位置。如果您想在每次需要使用不同的数字播种 PNRG 时获得不同的结果。对于大多数用途，系统计时器足以生成有效的随机数字序列。`srand(time(NULL))`正如其他人所解释的那样，将为您执行此操作。

顺便说一句：C 中内置的随机数生成器很*糟糕*。它不适合在最随意的环境中使用；如果您想要一个不错的随机数来源，请考虑使用 Mersenne Twister 之类的东西。在高度敏感的情况下（例如在线赌博等），时间播种也会出现问题。

# c++ - C++ FFTW3 链接错误

> ID：15091931
> 
> 赞同：1
> 
> 时间：2013-02-26T14:43:05.377
> 
> 标签：c++, fftw, ubuntu-12.10

每当我尝试使用 FFTW3 实现编译 C++ 程序时，我都会遇到非常奇怪的错误。

我正在编译如下

> g++ -O3 -lm -lfftw3 myFile.cpp -o myFileFFTW

我还包括我的头文件如下

```
#include <math.h> #include "fftw3.h" 
```

错误如下

> (.text+0x63): 未定义的对 `fftw_malloc' 的引用

有什么建议么？

> 编辑：

hmjd 的建议对我有用。 [针对 glib 编译时出现链接器错误...？](https://stackoverflow.com/questions/9966959/linker-errors-when-compiling-against-glib/9966989#9966989)

我想一个人不应该连续工作 3 天，否则头脑不起作用！特别感谢hmjd！！你拯救了我的一天，我可以按时完成我的项目！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:52:28.190

我猜问题是您的系统上不存在 -lfftw3 并且您也没有正确指定库。

编译器命令末尾的库：

gcc -I/usr/include/glib-2.0 -I/usr/lib/x86_64-linux-gnu/glib-2.0/include re.c -o re -lglib-2.0

从 GCC 链接选项：

-llibrary -l library 链接时搜索名为 library 的库。（将库作为单独参数的第二种选择仅用于 POSIX 合规性，不推荐。）

```
It makes a difference where in the command you write this option;
the linker searches and processes libraries and object files in the
order they are specified.
Thus, `foo.o -lz bar.o' searches library `z' after file foo.o but
before bar.o. If bar.o refers to functions in `z', those functions
may not be loaded. 
```

针对 glib 编译时出现链接器错误的片段[...？](https://stackoverflow.com/questions/9966959/linker-errors-when-compiling-against-glib/9966989#9966989)

# .net - 如何解析动态 JSON .net newtonsoft

> ID：15091932
> 
> 赞同：1
> 
> 时间：2013-02-26T14:43:11.420
> 
> 标签：.net, json, windows-phone-8

我在[不知道索引的情况下尝试按照 C# 中的示例 Parsing json 进行操作](https://stackoverflow.com/questions/11446989/parsing-json-in-c-sharp-without-knowing-indexes)。我一直遇到一个错误：

> Newtonsoft.Json.Linq.JObject' 不包含 ip_addresses 的定义

我想要实现的是解析以下 JSON 并将每个 ip 地址添加到 ObservableCollection。如果我知道密钥但IP地址可以命名任何东西，这一切都很好。

这是我目前正在处理的代码，IP 地址有它自己的类的原因是因为稍后在应用程序中还有很多事情要做：

```
 try
    {
        dynamic jObj = JsonConvert.DeserializeObject(e.Result);
        foreach (var child in jObj.ip_addresses.Children())
        {
            ips.Add(new IpAddresses() { ip = child });
        }
    }
    catch
    {
        MessageBox.Show("Generic error message");
    }

    public class IpAddresses
    {
        public string ip { get; set; }
    } 
```

这是 JSON：

```
{
    "id": "reallysimpleid",
    "label": "server name",
    "ip_addresses": {
    "private0_v4": "100.100.100.100",
    "access_ip0_v4": "100.100.100.100",
    "public0_v6": "1000:1000:7805:0113:9073:8c63:1000:1000",
    "access_ip1_v6": "1000:1000:7805:0113:9073:8c63:1000:1000",
    "public1_v4": "100.100.100.100"
},
    "metadata": null,
    "managed": false,
    "uri": "https://www.awebsite.com",
    "agent_id": null,
    "created_at": 1360960027217,
    "updated_at": 1360960027217
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:16:55.760

你的班级应该是这样的：

```
 public class IpAddresses
     {
     public string private0_v4 { get; set; }
     public string access_ip0_v4 { get; set; }
     public string public0_v6 { get; set; }
     public string access_ip1_v6 { get; set; }
     public string public1_v4 { get; set; }
     }

     public class RootObject
     {
     public string id { get; set; }
     public string label { get; set; }
     public IpAddresses ip_addresses { get; set; }
     public object metadata { get; set; }
     public bool managed { get; set; }
     public string uri { get; set; }
     public object agent_id { get; set; }
     public long created_at { get; set; }
     public long updated_at { get; set; }
     } 
```

您的代码应该是：

```
 jObj = JsonConvert.DeserializeObject<RootObject>(e.Result); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:59:07.393

该`child`对象可能不是您想要的，因为它是一个`JProperty`对象；如果您需要的只是字符串 IP 地址，请使用以下命令：

```
ips.Add(new IpAddresses() { ip = child.Value.ToString() }); 
```

# xml - Perl XML::树枝。巨大的文件处理。如何处理重复输入和不存在的输入

> ID：15091933
> 
> 赞同：2
> 
> 时间：2013-02-26T14:43:20.563
> 
> 标签：xml, perl, csv, xml-parsing, xml-twig

我有一个巨大的 XML 文件（大约 10 Gb），我需要将其转换为 CSV。现在该文件将包含有关众多客户的信息。我必须将其转换为 CSV 格式。问题是许多客户会有其他客户没有的额外字段，并且某些字段会重复。XML的例子是：

```
<customer>
<customerID>1</customerID>
    <auc>
        <algoId>0</algoId>
        <kdbId>1</kdbId>
        <acsub>1</acsub>
    </auc>
</customer>

<customer>
<customerID>2</customerID>
    <auc>
        <algoId>0</algoId>
        <kdbId>1</kdbId>
        <acsub>1</acsub>
        <extraBit>12345</extraBit>
    </auc>
    <auc>
        <algoId>2</algoId>
        <kdbId>3</kdbId>
        <acsub>3</acsub>
        <extraBit>67890</extraBit>
    </auc>
        <customOptions>
            <odboc>0</odboc>
    <odbic>0</odbic>
    <odbr>1</odbr>
    <odboprc>0</odboprc>
    <odbssm>0</odbssm>
</customOptions>
</customer> 
```

现在你可以看到第一个客户只有 1 个 auc 块，但第二个客户有 2 个，而且它在 auc 中还有一个额外的标签，即 extraBit。现在的问题：

1.  我应该一次处理一位客户（从一位客户到 /customer，然后以此类推），因为 10 Gb 一次会使系统崩溃。

2.  我尝试在循环中使用 XML TWIG，当我尝试为客户 1 使用 extraBit 时，它终止了“未定义值”的程序：

    打印 $customer->first_child('extraBit')->text()

    无法在 xml-tags.pl 第 50 行的未定义值上调用方法“文本”。

3.  对于客户的额外 auc 值，我希望它们在 CSV 文件中输出为：

    customerID,algoId,kdbId,acsub,extraBit,algoId2,kdbId2,acsub2,extraBit2

    1,0,1,1,,,,,,,

    2,0,1,1,1234,2,3,3,67890

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T15:30:36.890

```
print $customer->first_child('extraBit')->text() 
```

您可以通过使用来避免未定义的错误`first_child_text`，它被定义为如果找不到匹配的子元素则返回一个空字符串。

```
print $customer->first_child_text('extraBit') 
```

完整的代码将类似于

```
my $t= XML::Twig->new(
  twig_handlers => { customer => \&process_customer });
$t->parsefile('file.xml');

sub process_customer {
  my ($t, $customer) = @_;
  print $customer->first_child_text('customerID');
  foreach my $auc ($customer->children('auc')) {
    print ',', $auc->first_child_text('algoId'),
          ',', $auc->first_child_text('kdbId'),
          ',', $auc->first_child_text('acsub'),
          ',', $auc->first_child_text('extraBit');
  }
  print "\n"
  $customer->purge;
} 
```

# c - 提取部分 time.h (localtime)

> ID：15091935
> 
> 赞同：1
> 
> 时间：2013-02-26T14:43:23.927
> 
> 标签：c, time, ctime, time.h

我只想从例如**tm_sec**或**tm_min中提取****部分**，作为一个**简单的 int**（不是数组或字符串），如果我不需要 100% 正确的时间，那怎么可能（如果是的话）我为我的自己的兴趣，只是想知道如何去做。在尝试与做某事之前

 ******```
time_t rawtime;
struct tm * timeinfo;
char buffer [80];

time (&rawtime);
timeinfo = localtime (&rawtime);
strftime (buffer,80,"Now it's %H:%M.",timeinfo);
puts (buffer); 
```

但是缺乏经验阻止了我，现在我不知道该怎么做（只是编程的初学者）当然很抱歉，如果有这样的问题，但我已经尝试过并没有找到它。

*这样做的目的不是只显示我想要的部分，而是编辑它们

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T14:47:19.223

只需访问结构的成员：

```
printf("The tm_seconds field is %d\n", timeinfo->tm_sec); 
```

换句话说，如果您有一个指向类型值的指针`struct tm`，您可以使用箭头运算符 ( `->`) 来访问任何成员。该`tm_sec`成员具有 type `int`，就像所有其他成员一样。

您可以复制该值：

```
int my_seconds = timeinfo->tm_sec; 
```

然后也打印副本：

```
printf("my seconds are %d\n", my_seconds); 
```******

# javascript - 使用 Apache Vysper 执行 WebSocket 握手时出现问题

> ID：15091936
> 
> 赞同：1
> 
> 时间：2013-02-26T14:43:35.273
> 
> 标签：javascript, apache, websocket, handshake

我在执行成功的握手时遇到问题。Weather 独立运行 Vysper 或嵌入到简单的 Java 服务器（我自己制作的，或预打包的示例之一）中，我在尝试从 JavaScript 客户端（我自己的或预打包的示例之一）连接时遇到相同的错误情况。返回的错误是 HTTP 405 响应，在 Chrome 的控制台中报告为“意外响应代码：405”。

**独立服务器的配置：**

'spring-config.xml' 有以下补充：

```
 <bean id="websocketEndpoint" class="org.apache.vysper.xmpp.extension.websockets.WebSocketEndpoint"> 
        <property name="port" value="8080" /> 
        <property name="contextPath" value="/ws" /> 
    </bean> 
```

在服务器构造函数中：

```
 <ref bean="websocketEndpoint"/> 
```

**服务器启动时可能出现的错误情况：**

服务器似乎正常启动，仅报告了以下可能的问题（在独立服务器和嵌入式服务器上）：

```
 org.eclipse.jetty.server.Server@2af081 STOPPED 
   +-SelectChannelConnector@0.0.0.0:8080 
   +-qtp29384701{8<=6<=8/254,0} 
   +-ServletContextHandler@32efa7@32efa7/ws,null started 
      +-{} 
      +-{} 
     +-SessionHandler@1fbfd6 started 
        +-ServletHandler@6b9c84 started 
           +-[/ws]=>org.apache.vysper.xmpp.extension.websockets.XmppWebSocketServlet-23860799{} 
```

**尝试连接时出错：**

尝试从客户端连接时，两种类型的服务器实例都会记录以下内容：

```
 17:04:02,137 | DEBUG | org.eclipse.jetty.util.log | REQUEST /ws/ws on org.eclipse.jetty.server.nio.SelectChannelConnector$3@c3615b 
  17:04:02,137 | DEBUG | org.eclipse.jetty.util.log | sessionManager=org.eclipse.jetty.server.session.HashSessionManager@1767f84 
  17:04:02,137 | DEBUG | org.eclipse.jetty.util.log | session=null 
  17:04:02,137 | DEBUG | org.eclipse.jetty.util.log | servlet=org.apache.vysper.xmpp.extension.websockets.XmppWebSocketServlet-29347786 
  17:04:02,137 | DEBUG | org.eclipse.jetty.util.log | servlet holder= 
  17:04:02,137 | DEBUG | org.eclipse.jetty.util.log | chain= 
  17:04:02,137 | DEBUG | org.eclipse.jetty.util.log | RESPONSE /ws/ws 405 
  17:04:02,137 | DEBUG | org.eclipse.jetty.util.log | EOF 
```

在客户端的 Chrome 控制台中：

```
 Unexpected response code: 405 
  Event {clipboardData: undefined, cancelBubble: false, returnValue: true, srcElement: WebSocket, defaultPrevented: false…} 
  CloseEvent {reason: "", code: 1006, wasClean: false, clipboardData: undefined, cancelBubble: false…} 
```

关于如何进行的任何建议？

# java - List 抛出 ConcurrentModificationException 但 set 不抛出 ConcurrentModificationException？

> ID：15091937
> 
> 赞同：12
> 
> 时间：2013-02-26T14:43:45.110
> 
> 标签：java, list, arraylist, set, hashset

我有以下两个java类

```
import java.util.*;

public class ArrayListTest032 {
    public static void main(String[] ar) {
        List<String> list = new ArrayList<String>();
        list.add("core java");
        list.add("php");
        list.add("j2ee");
        list.add("struts");
        list.add("hibernate");

        Iterator<String> itr = list.iterator();

        while (itr.hasNext()) {
            System.out.println(itr.next());
        }
        list.remove("php");

        while (itr.hasNext()) {
            System.out.println(itr.next());
        }

    }
} 
```

当我运行上面的代码时，我得到低于输出。

```
core java
php
j2ee
struts
hibernate

Exception in thread "main" java.util.ConcurrentModificationException
    at java.util.AbstractList$Itr.checkForComodification(AbstractList.java:372)
    at java.util.AbstractList$Itr.next(AbstractList.java:343)
    at ArrayListTest032.main(ArrayListTest032.java:20) 
```

这是预期的，因为我在迭代时修改列表。但是在下面的 java 类中，相同的逻辑由 set family 执行。

```
import java.util.*;

public class HashSetTest021 {
    public static void main(String[] ar) {
        Set<String> set = new HashSet<String>();
        set.add("core java");
        set.add("php");
        set.add("j2ee");
        set.add("struts");
        set.add("hibernate");

        Iterator<String> itr = set.iterator();

        while (itr.hasNext()) {
            System.out.println(itr.next());
        }
        set.remove("php");

        while (itr.hasNext()) {
            System.out.println(itr.next());
        }

    }
} 
```

输出是。

```
hibernate
core java
j2ee
php
struts 
```

没有任何**ConcurrentModificationException**。

我只想知道为什么同一段代码在家庭的情况下会抛出 ConcurrentModificationException **，**但在家庭的情况下`list`没有任何**ConcurrentModificationException**`set`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T14:49:40.267

这是一种“逆行”行为，因为迭代器一旦被完全遍历，就不能重用，也就是`hasNext`当你到达列表末尾时，它们的方法应该返回 false。

但在这种情况下，返回的迭代器`ArrayList.iterator`是一个内部实现类，代码`hasNext`如下：

```
public boolean hasNext() {
    return cursor != size;
} 
```

因此，当您`hasNext`在第二个循环中调用时，它（错误地）表明有更多的项目需要迭代，因为您在第一次迭代之后执行了一个更改列表大小的操作。从语义上讲，您应该无法在到达列表末尾后继续迭代列表中的项目，但是由于这个实现细节，它可以让您继续进行第二个 while 循环。当然，此时，由于您在后备列表中所做的更改，您会遇到并发修改异常。

另一方面，您的哈希集使用的迭代器的`hasNext`实现如下：

```
public final boolean hasNext() {
    return next != null;
} 
```

这种实现碰巧不会像在迭代完成后对散列集所做的修改那样“脆弱”，因此该`hasNext`方法表现得更好。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-26T14:52:32.470

这是实现上的区别：数组列表返回的迭代器即使位于末尾也会检测并发修改，因为它检查长度；另一方面， 和 的迭代器不会检测到这种情况，因为它们会在检查并发修改之前检查是否`HashSet`位于`TreeSet`末尾。`LinkedList`该文档允许迭代器不要进行并发修改，因此这两种方法都是有效的。

*   [的演示`TreeSet`](http://ideone.com/51T2Sf)。
*   [的演示`LinkedList`](http://ideone.com/LaukJA)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T14:51:17.593

首先阅读 Iterator 的[JavaDoc](http://docs.oracle.com/javase/6/docs/api/java/util/Iterator.html)。它有没有提到`ConcurrentModificationException`任何地方？

现在，阅读[ConcurrentModificationException](http://docs.oracle.com/javase/6/docs/api/java/util/ConcurrentModificationException.html)的 JavaDoc ，并注意以下内容（添加了重点）：

> **当这种修改是不允许**的时，检测到对象的并发修改的方法**可能**会抛出此异常。

 **现在仔细查看您的代码。您的`while`循环遍历集合的所有元素（即使您的第一个示例的输出没有表明这一点，这告诉我您已经编辑了输出或者这不是您的实际代码）。在您删除元素时，没有更多要迭代的项目，因此第二个循环应始终立即退出。

因此，结论是列表迭代器的实现者*选择*了抛出异常，即使没有更多元素要迭代，而集合迭代器的实现者*选择*不这样做。鉴于规格，这两种情况都是完全可以接受的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T14:49:24.557

```
 public static void main(String[] ar) {
            List<String> list = new ArrayList<String>();
            list.add("core java");
            list.add("php");
            list.add("j2ee");
            list.add("struts");
            list.add("hibernate");

            Iterator<String> itr = list.iterator();

            while (itr.hasNext()) {
                System.out.println(itr.next());
            }
            list.remove("php");

          /*  while (itr.hasNext()) {
                System.out.println(itr.next());
            }*/

        }

problem in itr object.it holds the list object reference 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-26T14:57:26.160

如果您对集合执行任何操作（通过迭代器除外），则 Hashset 可能会引发 ConcurrentModificationException。然而，围绕迭代器的快速失败行为有很多启发式方法，目的是尽可能完成迭代。JavaDocs 似乎很清楚它的行为。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-12-11T08:03:12.183

**如果是列表**，当我们使用第一个循环遍历它时 Iterator itr = set.iterator();

```
 while (itr.hasNext()) {
        System.out.println(itr.next());
    } 
```

游标值和大小将变得相同。游标包含遍历元素总数的值，并且列表遍历的 hashNext() 方法包含以下代码：

```
 public boolean hasNext() {
            return cursor != size;
        } 
```

所以在第一个while循环游标==大小之后。但是在从列表中删除元素后大小变为（originalSize-1）。所以对于下一个while循环，它进入while和itr.next（）方法内部，它检查modcount修改并抛出ConcurrentModificationException。

在 Set 的情况下，它会为每个 itr.hasnext() 调用检查下一个！= null。在遍历第一个 while 循环后，下一个变为 null。从 set 中删除元素不会影响下一个值为 null 并且 itr.hasNext 将返回下一个 == null 为真，因此它不会进入 while 循环来检查 modcount 修改。因此它不会抛出 ConcurrentModification 异常。**

# string - 检查 CLOB 中的字符串

> ID：15091943
> 
> 赞同：0
> 
> 时间：2013-02-26T14:43:50.437
> 
> 标签：string, oracle, clob

我想在 CLOB 中搜索一个字符串：

就像是`id_name_2569`

我得到了我需要的所有 ID，如下所示：

```
select project_line_id as ID
from tbl1
where art_id in (
                  select art_id
                  from tbl2
                  where type = 3
                 ); 
```

我在这个表中搜索：A1 是一个 CLOB 字段

```
select * from tbl3 where dbms_lob.instr(A1, ID)>0; 
```

显然它不起作用我知道，这是我可以做到这一点的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:47:32.090

像这样的东西应该工作：

```
select tbl3.*
  from tbl1
       inner join tbl2
               on tbl2.art_id = tbl1.art_id
       inner join tbl3
               on tbl3.a1 like '%' || tbl1.project_line_id || '%'
 where tbl2.type = 3; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T15:11:14.410

您可以`DBMS_LOB.instr`直接用作连接条件：

```
SELECT *
  FROM (SELECT project_line_id AS ID 
          FROM tbl1 
         WHERE art_id IN (SELECT art_id FROM tbl2 WHERE TYPE = 3)) v
  JOIN tbl3 ON dbms_lob.instr(tbl3.a1, v.ID) > 0 
```

# hibernate - 如何将 JPA / hibernate 更改为基于 ID 而不是对象删除

> ID：15091944
> 
> 赞同：1
> 
> 时间：2013-02-26T14:43:50.073
> 
> 标签：hibernate, jpa, spring-data-jpa

下面是我正在使用的 JPA 设置。我可以按预期删除对象，但是我需要提供整个对象。虽然我不介意这样做，但我认为这不是最佳做法。有没有一种类似于 findByProductId(int productsId) 函数的方法，可用于删除属于 JPA 的本机部分的产品？

道

```
 void delete(Products productToDelete); 
```

DAOimpl

```
@Transactional
public void  delete(Products productToDelete){
    productsManager.delete(productToDelete);
} 
```

经理

```
@Resource
@Transactional(readOnly = true)
public interface ProductsManager extends JpaRepository<Products,Integer> {
    Products findByProductId(int productsId);
    List findAll();
} 
```

这是测试

```
@Test
public void delete() throws Exception{
    Products productToCreate = new Products();
    productToCreate.setProductName("Test Product");
    productsDao.createProduct(productToCreate);
    List loaded = productsDao.findAll();
    System.out.println("Product: " + loaded);
    assertNotNull(loaded);
    productsDao.delete(productsDao.getProductsById(1));
    List loadedTwo = productsDao.findAll();
    System.out.println("Product After Del: " + loadedTwo);
    assertEquals(loadedTwo.size(),0);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T14:58:52.627

如我所见，您的`ProductsManager`扩展`JpaRepository`（我猜是来自 Spring Data JPA 的扩展），因此它继承了一个接收 id 的删除方法（在 中声明`CrudRepository`）：

```
public interface CrudRepository<T, ID extends Serializable> extends Repository<T, ID> {
    ...
    void delete(ID id);
    ...
} 
```

只需在您的 DAO 接口中公开该方法即可。

# c++ - 关于如何切换代表视图的 CChildView 对象

> ID：15091946
> 
> 赞同：0
> 
> 时间：2013-02-26T14:43:59.170
> 
> 标签：c++, mfc

我的主窗口有 CMainFrame 类，而 AppWizard 生成的视图有 CChildView 类。我使用 m_wndView1.Create() 和 m_wndView2.Create() 创建了两个 CChildView 对象来表示两个不同的视图（控件的客户区面板）。但是 Create() 函数中使用的 ID 似乎是个问题。如果它不是 AFX_IDW_PANE_FIRST，则视图不会显示。请我需要一个指针来了解 ID 以及如何解决问题。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T00:33:01.910

使用 创建第一个视图，使用 创建下一个`AFX_IDW_PANE_FIRST`视图`AFX_IDW_PANE_FIRST+1`。与`AFX_IDW_PANE_FIRST`将是活跃的。

目前尚不清楚您的意思是：

> 我创建了两个 CChildView 对象来代表两个不同的视图

它接缝您正在尝试将相同的 CchildView 用于不同的视图。我建议您为不同的视图创建不同的类，例如 CChildView1 和 CChildView2。如果要将两个视图附加到同一个文档，则需要使用[CDocument::AddView](http://msdn.microsoft.com/en-us/library/e59dtf8h%28v=vs.80%29.aspx)。在此方法的链接中，您将找到如何使用 AFX_IDW_PANE_FIRST 切换视图

# android - Android - 通过端口 40 进行 Udp 通信

> ID：15091947
> 
> 赞同：1
> 
> 时间：2013-02-26T14:44:00.150
> 
> 标签：android, sockets, tcp, udp, port

我正在编写一个客户端应用程序，通过 udp 通过端口 40 与中央设备通信。由于我无法更改中央设备的通信端口，所以我被端口 40 卡住了。

但我做不到。我可以使用其他端口，但我不能使用端口 40、41、10 和其他一些 2 位端口。库存三星 rom，当我尝试使用端口时，应用程序没有强制关闭40，我切换到 cyanogenmod，现在使用端口 40 时它会强制关闭。

我觉得这个错误很奇怪，有谁知道可能导致这种情况的原因？

# javascript - 尝试创建自定义 jQuery 文本滚动器

> ID：15091949
> 
> 赞同：1
> 
> 时间：2013-02-26T14:44:04.087
> 
> 标签：javascript, jquery

我正在尝试制作一个自己的自定义 js-text-scroller（我希望文本在 div 中向左滚动，然后一次又一次地重复滚动）。

但我遇到了一些问题。我真的无法指出我做错了什么或我需要新功能的地方。欢迎我能得到的所有帮助。

这是一个小提琴示例：http: [//jsfiddle.net/Na373/](http://jsfiddle.net/Na373/)

的HTML：

```
<div class="wrap">
   <div class="scroll">
       <ul class="active">
           <li>Hello World</li>
           <li>Hello World</li>
           <li>Hello World</li>
           <li>Hello World</li>
           <li>Hello World</li>
           <li>Hello World</li>
           <li>Hello World</li>
           <li>Hello World</li>
           <li>Hello World</li>
           <li>Hello World</li>
       </ul>
   </div> 
```

JS：

```
$ul = $('.scroll ul');
//copys the existing ul and appends it after the existing one
$('.scroll').append($ul.clone().removeClass().addClass('not_active'));

function scroll() {
    $active = $('.scroll ul.active');

    $active.each(function() {
        $not_active = $('.scroll ul.not_active');

        // foreach time the function runs the ul goes "left: -1px;"
        var current_position = parseInt($(this).css('left'));
        var new_position = current_position - 1;
        $(this).css('left', new_position+'px');

        var parent_width = $(this).parent().outerWidth(); // gets the width of ".scroll"
        var width = $(this).outerWidth(); // gets the width of the "ul"
        var shown_all = current_position + width;

        // if the right corner of the "ul" are att the right corner of ".scroll"
        // this if statement executes and adds new existing class on the "ul.not_active"
        // and adds class ".active" instead
        // this means that there are 2 ul with the class active 
        //running simultaneously
        if (shown_all == parent_width) {
            $not_active.removeClass().addClass('active');
        }

        // here it checks if the "ul.active" have past its own length to left
        // Here im trying to make it "not_active" and put it after the existing ".active"
        //
        // <ul class="active">....</ul> ----> <ul class="not_active">...</ul>
        //
        // then put it after the other "ul.active"
        //
        //            <ul class="active
        // ---------> <ul class="not_active"></ul>
        //
        // So it all beginns from the beginning
        if (current_position == '-'+width) {
            $(this).removeClass().addClass('not_active').css('left', '0');
            $(this).insertAfter($('.scroll ul').next());
        }
    });
};
// And here I run the function
setInterval(scroll, 10); 
```

CSS：

```
.wrap {  
    position: relative;
    padding: 10px 10px 10px;
    height: 18px;
    background: #000;
    color: #fff;
    overflow: hidden;
    width: 500px;
}
.scroll {
   width: 500px;
   white-space: nowrap;
}
.scroll ul {
    left: 0;
    position: relative;
    margin: 0;
    padding: 0;
    display: inline;
    list-style: none;
}
.scroll ul li {
    padding: 0;
    margin: 0;
    display: inline;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:11:32.457

我认为您的问题是以下 if 语句中的条件

```
if (shown_all == parent_width) { 
```

据我所知，`shown_all = current_position + width`, 表示`shown_all`将从 0 + ul 的宽度开始，并以 0 结束。使用当前代码，if 语句永远不会为真。

如果您将 if 语句`if (shown_all == 0)`更改为 或将变量设置方式更改`shown_all`为`var shown_all = -current_position + width;`，我认为您会看到更好的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T20:34:45.393

我现在在这里有一个工作示例：http: [//jsfiddle.net/s8TnL/](http://jsfiddle.net/s8TnL/)

所有的回应都非常受欢迎。我很高兴收到有关性能和功能的回复。

HTML：

```
<div class="wrap">
<div class="scroll">
    <ul class="active">
        <li>Hello World</li>
        <li>Hello World</li>
        <li>Hello World</li>
        <li>Hello World</li>
        <li>Hello World</li>
        <li>Hello World</li>
        <li>Hello World</li>
    </ul>
</div> 
```

CSS：

```
.wrap {
    position: relative;
    padding: 10px 10px 10px;
    height: 18px;
    background: #0BF397;
    color: #fff;
    overflow: hidden;
    width: 500px
}
.scroll {
    display: block;
    white-space: nowrap;
}
.scroll ul {
    position: relative;
    margin: 0;
    padding: 0;
    display: inline;
    list-style: none;
}
.scroll ul li {
    padding: 0;
    margin: 0;
    display: inline;
} 
```

JS：

```
$ul = $('.scroll ul');
$('.scroll').append($ul.clone().removeClass().addClass('not_active'));

$ul.hover(function () {
    clearInterval(activate);
}, function () {
    activate = setInterval(scroll, 10);
});

function scroll() {
    $active = $('.scroll ul.active');

    $active.each(function () {
        $not_active = $('.scroll ul.not_active');
        var offset = $(this).offset();

        var current_position = offset.left;
        var new_position = current_position - 1;
        $(this).offset({
            left: new_position
        });

        var parent_width = $(this).parent().outerWidth();
        var width = $(this).outerWidth();

        var shown_all = current_position + width;

        if (shown_all == parent_width) {
            $not_active.removeClass().addClass('active').offset({
                left: parent_width
            });
        }

        if (current_position == '-' + width) {
            $(this).removeClass().addClass('not_active');
        }
    });
};

activate = setInterval(scroll, 10); 
```

# c# - 在我们的 Web 应用程序中打开一个保护外部页面

> ID：15091950
> 
> 赞同：0
> 
> 时间：2013-02-26T14:44:08.323
> 
> 标签：c#, javascript, jquery, asp.net-mvc

我有一个安全的 c# asp.net mvc web 应用程序，并且在一个视图中我想加载一个外部 url（壁虎板仪表板）。我现在所做的是使用 Iframe，例如：

```
<iframe src="https://sample.geckoboard.com/dashboard/test1232121" style="position:fixed; top:0px; left:0px; bottom:0px; right:0px; width:100%; height:100%; border:none; margin:0; padding:0; overflow:hidden; z-index:999999;">Your browser doesn't support IFrames</iframe> 
```

但是侧面是如果用户查看源页面，他可以从 iframe 源中复制 url 并将其放在浏览器中直接查看，所以我想隐藏或混淆。

我也在考虑可能对 url 进行 webrequest 并获取 HTML 并将响应放入 div 但是因为 geckoboard 使用了很多在他们的域上运行的 javascript，我很确定我会弄乱仪表板。

关于解决此问题的最佳方法的任何建议或建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:07:20.520

如果它打开一个 http 连接，用户将始终能够在浏览器中查看源代码，即使使用包括谷歌内置于 chrome 中的开发人员工具在内的许多工具监控网络也会向他们显示这种情况正在发生。

没有任何“好的”方法可以阻止用户看到您要求他的浏览器下载和显示的内容，这是有充分理由的。

# sql - 如何检查字符串长度，然后在 Sql Server 中选择子字符串

> ID：15091952
> 
> 赞同：28
> 
> 时间：2013-02-26T14:44:10.033
> 
> 标签：sql, sql-server-2008, tsql

在一个视图中，我有一个可能包含大字符串的列**注释。**我只想选择前 60 个字符并在所选字符串的末尾附加“ **... ”。**

为了选择前 60 个字符，我使用了以下查询：

```
select LEFT(comments, 60) as comments from myview 
```

现在我希望它的处理如下：

1.  检查它是否包含超过 60 个字符。
2.  如果包含则仅选择前 6o 个字符并在末尾附加三个点。
3.  如果它不包含超过 60 个字符，则选择整个字符串而不在末尾附加三个点。

谢谢

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-02-26T14:45:39.220

要有条件地检查字符串的长度，请使用`CASE`.

```
SELECT  CASE WHEN LEN(comments) <= 60 
             THEN comments
             ELSE LEFT(comments, 60) + '...'
        END  As Comments
FROM    myView 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/443e6/1)

# javascript - javascript动态css样式

> ID：15091955
> 
> 赞同：0
> 
> 时间：2013-02-26T14:44:22.943
> 
> 标签：javascript, css, dynamic

我正在尝试获取“。”（点）之后的所有字符，并使用 JavaScript 为它们设置一些样式。

示例： $10.12 。我想为数字“12”设置一些样式。

我在跨度内的 phtml 文件中动态创建了这个数字。

我尝试了这样的事情，但没有成功：

```
var aa = document.getElementById('testdiv').innerHTML; // gets my span
var bb = aa.toString().split(".")[1]; // gets all numbers after "."
bb.setAttribute("style","width: 500px;"); 
```

谢谢大家！你真的帮了我。我会为每个答案投票，但不幸的是我还不能投票。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:51:50.937

你的错误从这里开始：

```
var aa = document.getElementById('testdiv').innerHTML; // gets my span 
```

那不是你的跨度，而是它的 HTML 内容。要注意设置宽度，您需要这样的东西：

```
var aa = document.getElementById('testdiv'); // gets my span
aa.style.width = "500px"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T14:56:25.553

你可以这样做：

```
document.getElementById('testdiv').innerHTML = document.getElementById('testdiv').innerHTML.replace( /(\d+).(\d+)/, '$1.<span id="end">$2</span>' );
document.getElementById('end').style.fontWeight  = 'bold'; 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/4A78R/)**

您的示例失败，`bb.setAttribute`因为您尝试在字符串而不是节点上设置属性。您需要做的基本上是重建您要更改的文本周围`10.12`的`<span>`元素，然后您可以使用其他 JavaScript 方法来修改样式。您使用的方法几乎是正确的，除了最后一部分不起作用，因为该`split()`方法返回一个字符串，而不是一个节点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T14:58:22.097

您不能为 textNode 设置样式，解决方法是创建一个元素以在“。”之后包装字符。通过使用跨度。这个想法很简单。先用“.”分割。并检查它是否有“。” 在里面，如果是的话，创建一个元素来包装它并设置样式。最后，用“。”加入它。

```
var inner = document.getElementById('testdiv').innerHTML;
var arr = inner.toString().split(".");

if(arr.length > 1)
{
   arr[1] = '<span style="display: inline-block; width: 500px;">' + arr[1] + '</span>';
}
newContent = arr.join(".");
document.getElementById('testdiv').innerHTML = newContent; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T14:50:08.650

您只能将样式应用于 HTML 元素，而不是文本节点。

试试这个：

```
var elem = document.getElementById('testdiv');
var parts = elem.innerHTML.toString().split(".");
parts[1] = "<div style=\"width: 500px\">" + parts[1] + "</div>";
elem.innerHTML = parts.join("."); 
```

我之所以使用它是因为很明显已经应用了一种样式，但是如果您希望数字显示一致，例如在新行中没有“12”的“$10.12”，您可能需要应用其他样式或重新考虑您如何输出 HTML。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T15:02:51.890

您可以使用正则表达式执行此操作：

```
onlyDigitsText = text.replace(/\.([0-9]*)/g, ".<span class='highlighted'>$1</span>"); 
```

[JsFiddle 示例](http://jsfiddle.net/ceWdZ/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-26T15:05:16.467

尝试

```
var elem = document.getElementById('testdiv');
elem.innerHTML = elem.innerHTML.replace( /(\d+)\.(\d+)/g, '$1.<span class="decimalPart">$2</span>' );
// (\d+)    one or more digits
// \.       a dot character. Must be escaped otherwise it means ANY character
// (\d+)    one or more digits
// g        regex flag to replace all instances, not just one. 
```

`decimalPart`然后在你的css中为类添加样式

```
.decimalPart {
    width: 500px;
} 
```

这具有将样式与 html 分开的额外优势。

**更新**

按照您的评论获取数字使用之前的角色

```
 elem.innerHTML.replace( /(\s)([^\s\d]*?)(\d+)\.(\d+)/g, '$1<span class="currencySymbol">$2</span>$3.<span class="decimalPart">$4</span>' );
// (\s)       space, tab, carriage return, new line, vertical tab, form feed
// ([\s\d]*?) any set of characters that are not a digit or the above zero or more times
// (\d+)      one or more digits
// \.         a dot character. Must be escaped otherwise it means ANY character
// (\d+)      one or more digits
// g          regex flag to replace all instances, not just one. 
```

请注意，我已经考虑了占用多个字符的货币符号。

# objective-c - 如何正确命名方法？

> ID：15091956
> 
> 赞同：-1
> 
> 时间：2013-02-26T14:44:25.287
> 
> 标签：objective-c, method-names

这更像是一个关于英语语法的问题，但是，你能告诉我哪个是正确的方法名称吗？这种模棱两可让我发疯。

方法**linesNumber**返回某种表格中的“行”数。我个人喜欢“numberOfLines”变体，但linesNumber 更短......

```
#pragma mark - RCGroupDataSource methods

- (NSUInteger)linesNumber { // ???: or numberOfLines or lineNumbers
    return 2;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T14:46:33.523

尽可能给出全名。

> 方法linesNumber 返回某种表格中的“行”数。

为什么不使用`numberOfRowsInTable`

你可以参考[AppleDocumentation](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CodingGuidelines/CodingGuidelines.html)和[CocoaDevCentral](http://cocoadevcentral.com/articles/000082.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T14:51:07.743

描述正在做的事情：-

```
getNumberOfLines 
```

另一个可能是模棱两可的

```
getLineNumbers 
```

听起来更像是复数，即数字数组。

# hook - 用于在 mediawiki 中编辑搜索结果的挂钩

> ID：15091959
> 
> 赞同：0
> 
> 时间：2013-02-26T14:44:36.240
> 
> 标签：hook, mediawiki

好吧，我想编辑 wiki 的普通搜索引擎返回的搜索结果，所以当我进行命名空间搜索时，只出现文件名，而不是命名空间：文件，现在我正在使用搜索更新挂钩，但我不认为那是我需要的，有什么想法吗？

Ps：我正在尝试使用普通搜索（是的，我知道这很糟糕），所以不，我不能更新到 sphinx 或 lucene

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:15:06.253

您可以尝试使用[Google 自定义搜索引擎](http://www.google.com/cse)并调整您的皮肤文件。它已经在我使用的几个 wiki（[Wikiprogress](http://www.wikiprogress.org)和[Wikigender](http://www.wikigender.org)）中完成。我发现它是一种比 Mediawiki 默认提供的更好的搜索解决方案。

# android - 在 android WebView 错误处理不起作用

> ID：15091964
> 
> 赞同：2
> 
> 时间：2013-02-26T14:44:46.697
> 
> 标签：android, android-webview

当请求的 URL 无效时，控制器永远不会使用“onReceivedError”方法。但是在加载有效页面时，会正确调用“onProgressChanged”。

代码：

```
try {
        webView = (WebView) findViewById(R.id.webViewEvents);
        webView.setWebChromeClient(new WebChromeClient() {
            public void onProgressChanged(WebView view, int progress) {
                System.out.println("on Progress Changes : ");
            }
        });
        webView.setWebViewClient(new WebViewClient() {
            public void onReceivedError(WebView view, int errorCode,
                    String description, String failingUrl) {
                System.out.println("on Error received : ");
            }
        });
        webView.loadUrl("http://google.com");

    } catch (Exception e) {
        System.out.println("Exception while loading: " + e);
    } 
```

# ocaml - 带有 ocamlgraph 的 HTML 标签

> ID：15091966
> 
> 赞同：0
> 
> 时间：2013-02-26T14:44:50.103
> 
> 标签：ocaml, graphviz, dot

是否可以使用 ocamlgraph制作[这样的图表？](http://www.graphviz.org/content/psg)HTML 标签必须用`<>`而不是分隔，`""`我在文档中没有看到任何提及此功能的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:41:20.570

他们可以*解析*这种点节点：OCamlgraph 的[Dot_ast](http://ocamlgraph.lri.fr/doc/Dot_ast.html)模块的文档有一个这种类型的`Html of string`案例。`id`似乎他们无法*打印*这种点文件，因为[点属性](http://ocamlgraph.lri.fr/doc/Graphviz.CommonAttributes.html)``Label`的节点只处理直接字符串。

如果你需要这个功能，你可以考虑自己实现它（只需更改文件`graphviz.ml`和`graphviz.mli`），我相信作者会很高兴做出一些贡献。

# c++ - Vim：使用 clang_complete 自动完成局部变量/函数

> ID：15091973
> 
> 赞同：0
> 
> 时间：2013-02-26T14:45:05.227
> 
> 标签：c++, c, vim, autocomplete, clang-complete

我是 vim 的新手，我正在尝试将其设置为与 C/C++ 一起使用。在阅读了可能的自动完成插件后，我决定尝试**clang_complete**。我安装了它并通过使用包含的示例文件确保它正常工作。

键入后完成`::`，`->`或`.`工作，但我只是不知道如何为在同一文件中定义或通过标题包含的局部变量和函数获取自动完成菜单。

例子：

```
void foobar();

void main()
{
    foobar();
} 
```

输入**foo** in 时`main()`，期望 clang_complete 能够将其完成到**foobar**。阅读 clang_complete 文档时我是否遗漏了什么，或者这真的不可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-04-21T13:05:35.940

“如何打开自动补全菜单”这个问题的答案是点击<Cx><Cu>（即先同时按ctrl和x，再按ctrl和u）。然后你会看到一个用户定义的自动补全菜单，这是 clang_complete 的补全所在。如果您像我一样懒惰并且希望自动弹出完成，请安装一个额外的插件，例如[AutoComplPop](https://github.com/vim-scripts/AutoComplPop)。您也可以切换到 YouCompleteMe，我不喜欢它，但可能更适合您的需要。

# algorithm - 将联系人列表与中央服务器同步

> ID：15091975
> 
> 赞同：0
> 
> 时间：2013-02-26T14:45:09.780
> 
> 标签：algorithm, contacts, sync

我们有一些数据正试图在 N 台机器和一个集中式服务器之间进行同步，我正在寻找一种相对高效和健壮的方法来做到这一点。

环顾四周，这似乎被称为“集合协调问题”。有一个标签很好，但是搜索它会发现很多相当学术的工作，有时很难衡量它对*我们*数据的有用性，最好将其描述为联系人列表它的属性：具有多个字段的对象（人）确实会更新，但不那么频繁。

我们的系统涉及一个中央服务器和连接到它的机器。理想情况下，中央服务器是“好的”副本。还有一个很好的功能，就是能够通过调整服务器上的某些内容来强制机器重新发送。

到目前为止，我的想法是按照每个对象的 UUID 以及类似版本或时间戳（每个对象和/或每个对象集合？）来告诉哪些数据要尝试同步......但我的想法是仍然有点模糊，我认为询问可能会比尝试自己发明更好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:53:11.197

这并不容易，完美的解决方案是学术性的。所以你走上了正轨。您可以为自己的问题设计一个同步算法，放宽通用解决方案的一些要求。

我在意大利的最后一个 JsDay 上就这些主题发表了演讲。这是我的幻灯片：[http ://www.slideshare.net/matteocollina/operational-transformation-12962149](http://www.slideshare.net/matteocollina/operational-transformation-12962149)

让我知道他们是否对您有帮助，或者您是否需要帮助。

# ios - 没有可用 Internet 连接时的 CLGeocoder reverseGeocodeLocation 结果

> ID：15091980
> 
> 赞同：1
> 
> 时间：2013-02-26T14:45:24.650
> 
> 标签：ios, clgeocoder

如果网络不可用，我在尝试对位置进行反向地理编码时看到奇怪的结果：

*   在 iOS 5.0.1 上看到
*   飞行模式开启

    ```
    [geocoder reverseGeocodeLocation:whatever completionHandler:^(NSArray *placemarks, NSError *error) {
    if (error) 
    {
         // Alert(@"No Internet connection")!;

         // I should get a kCLErrorNetwork, but I get a kCLErrorGeocodeFoundPartialResult
         // with a placemark array containing a CLPlacemark *
         // with only a latitude and longitude (the ones I entered)...
    }
    else
    {
         // ...
    } 
    ```

这没有记录；至少我找不到它。

这本身并不是什么大问题，因为我不能指望它在没有网络的情况下正确地对地址进行反向地理编码，但它会阻止我向用户显示信息性消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:48:08.340

这是 iOS 5.0.x 的行为。在 5.1 及更高版本中，它会`kCLErrorNetwork`按照您的预期进行。如果您使用[https://stackoverflow.com/a/5337804/1271826](https://stackoverflow.com/a/5337804/1271826)中的宏，理论上您可以执行以下操作：

```
[geocoder reverseGeocodeLocation:whatever completionHandler:^(NSArray *placemarks, NSError *error) {

    if (error) 
    {
         if (error.code == kCLErrorNetwork || (error.code == kCLErrorGeocodeFoundPartialResult && SYSTEM_VERSION_LESS_THAN(@"5.1")))
         {
             Alert(@"No Internet connection!");
         }
    }
    else
    {
         // ...
    }
}]; 
```

这样，无论用户运行的是什么 iOS 版本，您都可以处理网络错误（但显然，只有 5.0 及更高版本，因为它`CLGeocoder`是在 iOS 5.0 中引入的）。

# python - 在 Python 中操作 numpy.random.exponential 分布

> ID：15091982
> 
> 赞同：9
> 
> 时间：2013-02-26T14:45:27.430
> 
> 标签：python, numpy, exponential

我正在尝试使用 Numpy 的随机指数分布创建一个随机数数组。我的工作正常，但是我的项目有一个额外的要求，那就是能够精确指定有多少数组元素具有特定值。

让我解释一下（代码在下面，但我会在这里解释一下）：我生成我的随机指数分布并绘制数据的直方图，生成一条漂亮的指数曲线。我真正想做的是使用一个变量来指定这条曲线的 y 轴截距（曲线与 y 轴相交的点）。我可以通过更改直方图中的 bin 数量以基本方式实现这一点，但这只会改变绘图而不是原始数据。

我在这里插入了我的代码的骨架。为了给出一些背景信息，我正在尝试创建星系的指数圆盘，因此我想要生成的随机数组是半径数组，而我想要指定的变量是星系中心的数字密度：

```
import numpy as N
import matplotlib.pyplot as P

n = 1000    
scale_radius = 2
central_surface_density = 100 #I would like this to be the controlling variable, even if it's specification had knock on effects on n.

radius_array = N.random.exponential(scale_radius,(n,1))     

P.figure()    
nbins = 100
number_density, radii = N.histogram(radius_array, bins=nbins,normed=False)
P.plot(radii[0:-1], number_density)
P.xlabel('$R$')
P.ylabel(r'$\Sigma$')
P.ylim(0, central_surface_density)
P.legend()      
P.show() 
```

此代码创建以下直方图：

![在此处输入图像描述](../Images/5096382322b9490c37074eb2f3ba76a8.png)

因此，总而言之，我希望能够通过控制生成数据的方式而不是通过更改直方图的绘制方式来指定此图在 y 轴的位置。

任何帮助或要求进一步澄清将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-26T15:00:27.190

根据文档[`numpy.random.exponential`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.random.exponential.html)，输入参数 beta 是 1/lambda，用于定义[wikipedia 中描述的指数](http://en.wikipedia.org/wiki/Exponential_distribution)。

你想要的是这个函数在`f(x=0)=lambda=1/beta`. 因此，在规范分布中，您的 y 截距应该是 numpy 函数的倒数：

```
import numpy as np
import pylab as plt

target = 250
beta = 1.0/target

Y = np.random.exponential(beta, 5000)
plt.hist(Y, normed=True, bins=200,lw=0,alpha=.8)
plt.plot([0,max(Y)],[target,target],'r--')
plt.ylim(0,target*1.1)
plt.show() 
```

![在此处输入图像描述](../Images/f47a11dc308da9b36848c946fdd7328b.png)

*是的，直方图*的 y 截距会随着不同的 bin 大小而变化，但这并不意味着什么。您可以在这里合理谈论的唯一事情是潜在的概率分布（因此`normed=true`）

# java - 如果打开不同的活动，CountDownTimer 文本消失 - 计时器继续 - android 应用

> ID：15091988
> 
> 赞同：0
> 
> 时间：2013-02-26T14:45:35.747
> 
> 标签：java, android, countdowntimer

我有一个倒计时，当按下按钮时启动。

按下按钮后 - 按钮变暗，按钮上的文本出现并倒计时至 0（当达到 onFinish 时，按钮再次亮起，文本显示为“完成”）。

我有一个设置菜单，允许添加更多计时器和其他设置 - 如果用户启动计时器并且它工作正常 - 然后打开设置菜单并保存设置，它们会返回计时器屏幕。

他们看到的是按钮变灰，好像计时器仍在倒计时（确实如此），但文本不再存在倒计时，并且当计时器完成时，按钮仍然是暗淡的。

即使临时打开另一个活动（如设置菜单），是否有让文本倒计时在该活动中持久存在，所以它总是会显示适当的计时器倒计时文本？我对android编程还是很陌生，所以任何例子都值得赞赏。

TimerCode 看起来像这样：

```
 //Timer Countdown
@Override
public void onTick(long millisUntilFinished) {
    button.setText((millisUntilFinished/1000)+"");
    button.getBackground().setColorFilter(android.graphics.Color.GRAY, Mode.MULTIPLY);
    button.setTextColor(Color.GREEN);
    button.setTextSize(24);
    //Timer Finishes
@Override
public void onFinish() {
    System.out.println("DONE");
    button.setTextSize(44);
    button.setText("UP");
    button.getBackground().setColorFilter(null); 
```

按钮代码如下所示：

```
 //Right Button1
    final CountDown rButton1Timer = new CountDown(300000,200,bRightButton1);
    bRightButton1.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            rButton1Timer.start();

        }
    }); 
```

最终，我只希望 onTick 和 onFinish 在用户所做的任何事情中都保持不变 - 因此，如果他打开设置并更改某些内容，当他回到计时器时，它们仍在倒计时。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T19:47:28.933

onResume 是罪魁祸首。我已经成功实施了 onResume 。

# c# - 属性 ApplyFormatInEditMode 不起作用

> ID：15091992
> 
> 赞同：1
> 
> 时间：2013-02-26T14:45:56.250
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, validation, attributes

我有下一个模型：

```
 public class MyModel
{
    [Display(Name = "My Date:")]
    [DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:dd.MM.yyyy}")]
    public System.DateTime Date { get; set; }
} 
```

比我用编辑部分显示它：

```
@using (Html.BeginForm()){

@Html.DisplayFor(x=>x.Date)
@Html.EditorFor(x=>x.Date)
@Html.ValidationMessageFor(x=>x.Date)
<input type="submit" value="ok"/>} 
```

我在控制器中接收模型

```
 public ActionResult Index()
    {
        ViewBag.Message = "Welcome to ASP.NET MVC!";
        var model = new MyModel {Date = DateTime.Now.AddDays(-1)};
        return View(model);
    }

    [HttpPost]
    public ActionResult Index(MyModel model)
    {
        if (ModelState.IsValid)
        {
            return View(model);

        }
        return View(model);
    } 
```

它显示![在此处输入图像描述](../Images/4aed9ee1b9cce98eab8d2bbe54bc8e58.png) 我的本地机器格式是 (mm/dd/yyyy)，当我尝试提交此表单时，我得到了错误的验证： ![在此处输入图像描述](../Images/c757e899715d5255d42770fa29a3e2de.png) 我读到有人建议编写我自己的绑定或验证器。问题是为什么我必须在设置 ApplyFormatInEditMode = true 时这样做。是不是说明这个属性不起作用！！！

# python-2.7 - wx 框架中的 Matplotlib 条形图而不是新窗口

> ID：15091993
> 
> 赞同：0
> 
> 时间：2013-02-26T14:45:59.797
> 
> 标签：python-2.7, matplotlib, wxpython

我有一个简单的 wxFrame 和两个面板。我希望其中一个面板显示 matplotlib 条形图。我学会了使用图表，但我使用的 show() 函数在新窗口中提供了图表。

```
 import wx
import wx.grid as gridlib
import os
import Image
import pylab as p

class PanelOne(wx.Panel):
    def __init__(self, parent):
        """Constructor"""
        wx.Panel.__init__(self, parent=parent)
        #txt = wx.TextCtrl(self)
        button =wx.Button(self, label="Save", pos=(200, 325))
        button.Bind(wx.EVT_BUTTON, parent.onSwitchPanels)

class PanelTwo(wx.Panel):
    def __init__(self, parent):
        """Constructor"""
        wx.Panel.__init__(self, parent=parent)

        sizer = wx.BoxSizer(wx.VERTICAL)
        self.SetSizer(sizer)
        fig=p.figure()
        ax=fig.add_subplot(1,1,1)
        x=[1,2,3]
        y=[4,6,3]
        ax.bar(x,y)
        p.show()

class MyForm(wx.Frame):

    def __init__(self):
        wx.Frame.__init__(self, None, wx.ID_ANY,
                          "Panel Switch",
                          size=(800,600))

        self.panel_one = PanelOne(self)
        self.panel_two = PanelTwo(self)
        self.panel_two.Hide()

        self.sizer = wx.BoxSizer(wx.VERTICAL)
        self.sizer.Add(self.panel_one, 1, wx.EXPAND)
        self.sizer.Add(self.panel_two, 1, wx.EXPAND)
        self.SetSizer(self.sizer)

        menubar = wx.MenuBar()
        fileMenu = wx.Menu()
        switch_panels_menu_item = fileMenu.Append(wx.ID_ANY,
                                                  "Switch Panels",
                                                  "Some text")
        self.Bind(wx.EVT_MENU, self.onSwitchPanels,
                  switch_panels_menu_item)
        menubar.Append(fileMenu, '&File')
        self.SetMenuBar(menubar)
-------------------------------------------------------------------
    def onSwitchPanels(self, event):

        if self.panel_one.IsShown():
           self.SetTitle("Panel Two Showing")
           self.panel_one.Hide()
           self.panel_two.Show()
        else:
           self.SetTitle("Panel One Showing")
           self.panel_one.Show()
           self.panel_two.Hide()
        self.Layout()

    if __name__ == "__main__":
    app = wx.App(False)
    frame = MyForm()
    frame.Show()
    app.MainLoop() 
```

发生的事情是我在一个新的 matplotlib 窗口中获取图表，当我关闭它时，我的框架出现了。我需要图表位于框架的第二个面板中。

我尝试阅读[This](https://stackoverflow.com/questions/10737459/embedding-a-matplotlib-figure-inside-a-wxpython-panel)，但对我没有太大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:37:47.127

`pyplot`您正在使用的函数 ( `p.figure`) 的主要目的是处理所有 GUI 细节（这些细节与您想要的不同）。您想要的内容嵌入`matplotlib`到您预先存在的 gui 中。有关如何执行此操作，请参阅这些[示例](http://matplotlib.org/examples/user_interfaces/)。

此代码是从[embedding_in_wx2.py](http://matplotlib.org/examples/user_interfaces/embedding_in_wx2.html)中提取的，以防止链接腐烂：

```
#!/usr/bin/env python
"""
An example of how to use wx or wxagg in an application with the new
toolbar - comment out the setA_toolbar line for no toolbar
"""
# Used to guarantee to use at least Wx2.8
import wxversion
wxversion.ensureMinimal('2.8')
from numpy import arange, sin, pi

import matplotlib

# uncomment the following to use wx rather than wxagg
#matplotlib.use('WX')
#from matplotlib.backends.backend_wx import FigureCanvasWx as FigureCanvas

# comment out the following to use wx rather than wxagg
matplotlib.use('WXAgg')
from matplotlib.backends.backend_wxagg import FigureCanvasWxAgg as FigureCanvas

from matplotlib.backends.backend_wx import NavigationToolbar2Wx

from matplotlib.figure import Figure
import wx

class CanvasFrame(wx.Frame):

    def __init__(self):
        wx.Frame.__init__(self,None,-1,
                         'CanvasFrame',size=(550,350))

        self.SetBackgroundColour(wx.NamedColour("WHITE"))
        self.figure = Figure()
        self.axes = self.figure.add_subplot(111)
        t = arange(0.0,3.0,0.01)
        s = sin(2*pi*t)
        self.axes.plot(t,s)
        self.canvas = FigureCanvas(self, -1, self.figure)
        self.sizer = wx.BoxSizer(wx.VERTICAL)
        self.sizer.Add(self.canvas, 1, wx.LEFT | wx.TOP | wx.GROW)
        self.SetSizer(self.sizer)
        self.Fit()

    def OnPaint(self, event):
        self.canvas.draw()

class App(wx.App):
    def OnInit(self):
        'Create the main window and insert the custom frame'
        frame = CanvasFrame()
        frame.Show(True)
        return True

app = App(0)
app.MainLoop() 
```

# unit-testing - 如何在不引入风险的情况下测试遗留应用程序（并采用测试驱动开发）？

> ID：15091996
> 
> 赞同：1
> 
> 时间：2013-02-26T14:46:06.520
> 
> 标签：unit-testing, testing, junit, tdd

我被要求更新一个旧的基于 Java 的应用程序，并与我正在开发的更多当前应用程序内联。

我们想介绍的其中一件事是测试驱动开发，用于任何新的增强功能。

代码单元测试覆盖率目前非常低<20%

作为该应用程序的新手，我希望这个百分比更大，以便让我有信心在不引入缺陷的情况下进行更改。

问题是要提高这个百分比，很多代码需要重构才能测试。

因此，使用如此低的单元测试覆盖率进行重构可能会引入问题，但是要提高测试覆盖率，您必须重构吗？！

尝试这样做时有没有降低风险？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T15:29:57.427

对此的低风险方法是测试和重构非常小的增量。您必须在修改任何内容之前引入尽可能多的测试（并不总是那么容易），然后继续该过程，但将重构包括在组合中。

如果您将最初的重构保留为将自包含代码块提取为小的自包含方法，那么风险很低（不是无风险，但很低），然后您可以尽可能地测试原始方法，但另外测试提取的方法彻底。

模拟在这方面也有很大帮助——你可以传递模拟而不是真正的服务等，这有很大帮助。您仍然会遇到麻烦的情况，即代码在内部实例化/调用您不想测试的服务，但随着时间的推移，您也可以通过引入依赖注入来解决这个问题（这样您就可以注入模拟而不是真正的服务） . 但这可能是一个长期战略。

我过去这样做的方式是务实的——最初似乎是不可逾越的，但如果你经常重复上述操作，你最终会得到你不再“害怕”的代码。这需要时间，但可以做到。

对于这类事情，我可以彻底推荐[Michael Feather 的 Working with Legacy Code - 它提供了许多实用的策略来处理你（我们都经历过，在某些时候）面临的问题](http://www.amazon.co.uk/Working-Effectively-Legacy-Robert-Martin/dp/0131177052)

# c# - 未调用可见性类型转换器

> ID：15091997
> 
> 赞同：1
> 
> 时间：2013-02-26T14:46:13.160
> 
> 标签：c#, wpf, xaml, type-conversion

我有一个带有以下 XAML 的测试 WPF 窗口：

```
<Window x:Class="WpfApplication2.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:wpfApplication2="clr-namespace:WpfApplication2"
        xmlns:test="clr-namespace:WpfApplication2.Properties"
        DataContext="{Binding Path=TestClass}"
        Title="MainWindow" Height="350" Width="525" >

    <Window.Resources>
        <wpfApplication2:TestTypeConverter x:Key="TestConverter"/>
    </Window.Resources>

    <Grid>
        <Grid Visibility="{Binding TestProperty, Converter={StaticResource TestConverter}, ConverterParameter='nottest'}">
            <Label Content="Test Label"></Label>
        </Grid>
    </Grid>
</Window> 
```

我有一个测试类型转换器类，如下所示：

```
using System;
using System.Globalization;
using System.Windows.Data;

namespace WpfApplication2
{
    class TestTypeConverter : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
        {
            var valueToTest = (string) value;
            var parameterToCheck = (string) parameter;

            return valueToTest == parameterToCheck ? System.Windows.Visibility.Visible : System.Windows.Visibility.Collapsed;
        }

        public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
        {
            return value;
        }
    }
} 
```

测试类如下：

```
using System.ComponentModel;
using System.Runtime.CompilerServices;
using WpfApplication2.Annotations;

namespace WpfApplication2
{
    public class TestClass : INotifyPropertyChanged
    {
        public TestClass()
        {
            TestProperty = "test";
        }

        private string _testProperty;
        public string TestProperty
        {
            get { return _testProperty; }
            set
            {
                if (_testProperty == value)
                {
                    return;
                }
                _testProperty = value;
                OnPropertyChanged();
            }
        }

        public event PropertyChangedEventHandler PropertyChanged;

        [NotifyPropertyChangedInvocator]
        protected virtual void OnPropertyChanged([CallerMemberName] string propertyName = null)
        {
            var handler = PropertyChanged;
            if (handler != null) handler(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

可见性属性不受类型转换器的影响，甚至没有调用 Convert 方法本身（我放置了一个没有被命中的断点）。

我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T14:49:53.897

您的绑定似乎错误：

```
 Visibility="{Binding 'test', Converter={StaticResource TestConverter}, ConverterParameter='nottest'}" 
```

将其更改为：

```
 Visibility="{Binding test, Converter={StaticResource TestConverter}, ConverterParameter='nottest'}" 
```

如果属性测试不存在，则不会调用转换器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T15:54:31.453

为转换器参数创建一个资源（如下面的代码片段所示）并将该资源用作转换器参数而不是文字

```
<Window x:Class="WpfApplication2.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
        xmlns:wpfApplication2="clr-namespace:WpfApplication2"
        xmlns:test="clr-namespace:WpfApplication2.Properties"
        xmlns:sys="clr-namespace:System;assembly=mscorlib"
        DataContext="{Binding Path=TestClass}"
        Title="MainWindow" Height="350" Width="525" >
    <Window.Resources>
        <wpfApplication2:TestTypeConverter x:Key="TestConverter"/>
<sys:String x:Key="converterParam">nottest</sys:String>
    </Window.Resources>

    <Grid>
        <Grid Visibility="{Binding TestProperty, Converter={StaticResource TestConverter}, ConverterParameter={StaticResource converterParam}">
            <Label Content="Test Label"></Label>
        </Grid>
    </Grid>
</Window> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-13T13:54:31.737

如果您没有数据上下文，只需完全省略属性的名称，它就会起作用，以下内容对我来说很重要。

可见性="{绑定转换器={StaticResource myTestConverter}}"

// 看看Converter关键字后面是怎么跟Binding关键字的，我没有在Binding关键字后面指定属性名。