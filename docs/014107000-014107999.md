# StackOverflow 问答 14107000-14107999

# opencv - 如何在 Opencv 2.4 中使用 convexityDefects

> ID：14107000
> 
> 赞同：0
> 
> 时间：2013-01-01T00:19:52.023
> 
> 标签：opencv

我尝试使用`convexHull`并`convexityDefects`定义一只手。但是当程序点击 时`convexityDefects`，总是有一个错误说“向量下标超出范围”。这是我的代码。

我是否以错误的方式使用该功能？

```
#include "stdafx.h"
#include <opencv2\opencv.hpp>
#include <math.h>
#include <iostream>

using namespace cv;
using namespace std;
const int w = 500;

int levels = 3;

vector<vector<Point> > contours;

vector<Vec4i> hierarchy;

void on_trackbar(int, void*)
{
    Mat cnt_img = Mat::zeros(w, w, CV_8UC3);
    int _levels = levels - 3;
    drawContours( cnt_img, contours, _levels <= 0 ? 3 : -1, Scalar(128,255,255),
            3, CV_AA, hierarchy, std::abs(_levels) );

    imshow("contours", cnt_img);
}

int main( int argc, char**)
{
    Mat img = imread("out.jpg",0);
    threshold(img,img,200,255,cv::THRESH_BINARY);

    namedWindow( "image", 1 );
    imshow( "image", img );
    //Extract the contours so that
    vector<vector<Point> > contours0;
    findContours( img, contours0, hierarchy, RETR_TREE, CHAIN_APPROX_SIMPLE);

    contours.resize(contours0.size());
    for( size_t k = 0; k < contours0.size(); k++ ){
        std::cout<<"contours0.size"<<contours0[k].size()<<endl;
        approxPolyDP(Mat(contours0[k]), contours[k], 0, true);
    }

    std::vector<Vec4i> defects; 
    vector<cv::vector<int> >hull( contours.size() );

    for (int i = 0; i < contours.size(); i++)
    {  
        std::cout<<"contours.size"<<contours[i].size()<<endl;
        convexHull( contours[i], hull[i], false );
        if (contours[i].size() >150 )
        {
            convexityDefects(contours[i], hull[i], defects[i]); 
            std::cout<<"defects"<<defects[i].depth<<endl;
        }
    }

    namedWindow( "contours", 1 );
    createTrackbar( "levels+3", "contours", &levels, 7, on_trackbar );

    on_trackbar(0,0);
    waitKey();

    return 0;
} 
```

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T00:44:50.747

看起来问题在于参数`convexityDefects()`需要一个数组`contourDefects`：

```
void convexityDefects(InputArray contour, InputArray convexhull, OutputArray convexityDefects); 
```

`contours`和都是类型，这`hull`是`vector<vector<>>`正确的，但`defects`也需要是`vector<vector<>>`. 这样，当您遍历`contours`数组时，`defects[i]`将包含一个要传递给的数组`convexityDefects()`：

```
...

vector<std::vector<Vec4i>> defects( contours.size() ); 

... 
```

稍后在您的代码中，您将不得不循环通过`defects[i]`向量来打印`depth`，如果那是您想要做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-03T23:50:51.660

我将在稍后发布带有完整工作源代码的答案，因为我花了太多时间试图弄清楚如何使用这个 convexityDefects() API。另请注意，OpenCV 3.0 版本中包含一个 bug，它在 convexityDefects() 中返回错误的索引（这在 OpenCV 2.X 中不是问题）。因此，如果您在 3.0 版本中遇到问题，请更新到最新的 github。

```
#include <iostream>
#include "opencv2/highgui/highgui.hpp"
#include "opencv2/opencv.hpp"

// Test case for C++ impl of convexityDefects() that returns indexes into the
// contours vector.

using namespace cv;
using namespace std;

int main(int argc, char **argv)
{
  if (argc != 1) {
    fprintf(stderr, "usage : convexity_defects\n");
    exit(1);
  }

  const bool debugDumpImages = true;

  // Result from findContours(binMat, contours, CV_RETR_LIST, CHAIN_APPROX_NONE);

  // 4 point star pattern at 100x100

  Point2i contour[140];
  contour[0] = Point2i(49,3);
  contour[1] = Point2i(49,7);
  contour[2] = Point2i(48,8);
  contour[3] = Point2i(48,12);
  contour[4] = Point2i(47,13);
  contour[5] = Point2i(47,16);
  contour[6] = Point2i(46,17);
  contour[7] = Point2i(46,21);
  contour[8] = Point2i(45,22);
  contour[9] = Point2i(45,25);
  contour[10] = Point2i(44,26);
  contour[11] = Point2i(44,30);
  contour[12] = Point2i(43,31);
  contour[13] = Point2i(43,35);
  contour[14] = Point2i(42,36);
  contour[15] = Point2i(42,39);
  contour[16] = Point2i(41,40);
  contour[17] = Point2i(41,41);
  contour[18] = Point2i(40,42);
  contour[19] = Point2i(36,42);
  contour[20] = Point2i(35,43);
  contour[21] = Point2i(32,43);
  contour[22] = Point2i(31,44);
  contour[23] = Point2i(27,44);
  contour[24] = Point2i(26,45);
  contour[25] = Point2i(22,45);
  contour[26] = Point2i(21,46);
  contour[27] = Point2i(18,46);
  contour[28] = Point2i(17,47);
  contour[29] = Point2i(13,47);
  contour[30] = Point2i(12,48);
  contour[31] = Point2i(8,48);
  contour[32] = Point2i(7,49);
  contour[33] = Point2i(3,49);
  contour[34] = Point2i(2,50);
  contour[35] = Point2i(1,50);
  contour[36] = Point2i(5,50);
  contour[37] = Point2i(6,51);
  contour[38] = Point2i(10,51);
  contour[39] = Point2i(11,52);
  contour[40] = Point2i(14,52);
  contour[41] = Point2i(15,53);
  contour[42] = Point2i(19,53);
  contour[43] = Point2i(20,54);
  contour[44] = Point2i(24,54);
  contour[45] = Point2i(25,55);
  contour[46] = Point2i(29,55);
  contour[47] = Point2i(30,56);
  contour[48] = Point2i(33,56);
  contour[49] = Point2i(34,57);
  contour[50] = Point2i(38,57);
  contour[51] = Point2i(39,58);
  contour[52] = Point2i(40,58);
  contour[53] = Point2i(42,60);
  contour[54] = Point2i(42,63);
  contour[55] = Point2i(43,64);
  contour[56] = Point2i(43,68);
  contour[57] = Point2i(44,69);
  contour[58] = Point2i(44,73);
  contour[59] = Point2i(45,74);
  contour[60] = Point2i(45,77);
  contour[61] = Point2i(46,78);
  contour[62] = Point2i(46,82);
  contour[63] = Point2i(47,83);
  contour[64] = Point2i(47,87);
  contour[65] = Point2i(48,88);
  contour[66] = Point2i(48,91);
  contour[67] = Point2i(49,92);
  contour[68] = Point2i(49,96);
  contour[69] = Point2i(50,97);
  contour[70] = Point2i(50,93);
  contour[71] = Point2i(51,92);
  contour[72] = Point2i(51,89);
  contour[73] = Point2i(52,88);
  contour[74] = Point2i(52,84);
  contour[75] = Point2i(53,83);
  contour[76] = Point2i(53,80);
  contour[77] = Point2i(54,79);
  contour[78] = Point2i(54,75);
  contour[79] = Point2i(55,74);
  contour[80] = Point2i(55,70);
  contour[81] = Point2i(56,69);
  contour[82] = Point2i(56,66);
  contour[83] = Point2i(57,65);
  contour[84] = Point2i(57,61);
  contour[85] = Point2i(58,60);
  contour[86] = Point2i(58,59);
  contour[87] = Point2i(59,58);
  contour[88] = Point2i(60,58);
  contour[89] = Point2i(61,57);
  contour[90] = Point2i(65,57);
  contour[91] = Point2i(66,56);
  contour[92] = Point2i(70,56);
  contour[93] = Point2i(71,55);
  contour[94] = Point2i(75,55);
  contour[95] = Point2i(76,54);
  contour[96] = Point2i(79,54);
  contour[97] = Point2i(80,53);
  contour[98] = Point2i(84,53);
  contour[99] = Point2i(85,52);
  contour[100] = Point2i(89,52);
  contour[101] = Point2i(90,51);
  contour[102] = Point2i(93,51);
  contour[103] = Point2i(94,50);
  contour[104] = Point2i(98,50);
  contour[105] = Point2i(97,50);
  contour[106] = Point2i(96,49);
  contour[107] = Point2i(92,49);
  contour[108] = Point2i(91,48);
  contour[109] = Point2i(87,48);
  contour[110] = Point2i(86,47);
  contour[111] = Point2i(82,47);
  contour[112] = Point2i(81,46);
  contour[113] = Point2i(78,46);
  contour[114] = Point2i(77,45);
  contour[115] = Point2i(73,45);
  contour[116] = Point2i(72,44);
  contour[117] = Point2i(68,44);
  contour[118] = Point2i(67,43);
  contour[119] = Point2i(64,43);
  contour[120] = Point2i(63,42);
  contour[121] = Point2i(59,42);
  contour[122] = Point2i(58,41);
  contour[123] = Point2i(58,40);
  contour[124] = Point2i(57,39);
  contour[125] = Point2i(57,35);
  contour[126] = Point2i(56,34);
  contour[127] = Point2i(56,31);
  contour[128] = Point2i(55,30);
  contour[129] = Point2i(55,26);
  contour[130] = Point2i(54,25);
  contour[131] = Point2i(54,21);
  contour[132] = Point2i(53,20);
  contour[133] = Point2i(53,17);
  contour[134] = Point2i(52,16);
  contour[135] = Point2i(52,12);
  contour[136] = Point2i(51,11);
  contour[137] = Point2i(51,8);
  contour[138] = Point2i(50,7);
  contour[139] = Point2i(50,3);

  vector<Point2i> contourVec;

  for ( int i = 0; i < sizeof(contour)/sizeof(Point2i); i++ ) {
    Point2i p = contour[i];
    contourVec.push_back(p);
  }

  vector<vector<Point2i> > contoursVec;
  contoursVec.push_back(contourVec);

  if (debugDumpImages) {
    Mat binMat(100, 100, CV_8UC1, Scalar(0));

    drawContours(binMat, contoursVec, 0, Scalar(0xFF));

    string fname = "contour_rendered.png";
    imwrite(fname, binMat);
    cout << "wrote " << fname << endl;
  }

  assert(contourVec.size() > 3);

  // hull around contour points

  Mat contourMat(contourVec);

  vector<int> hullVec;

  convexHull(contourMat, hullVec, false);

  int hullCount = (int)hullVec.size();

  if (1) {
    cout << "convexHull returned " << hullCount << " hull indexes" << endl;
  }

  if (debugDumpImages) {
    // Convert hull indexes into points so that result can be rendered with drawContours()

    vector<Point2i> hullContourVec;

    for ( int i = 0; i < hullCount; i++ ) {
      int offset = hullVec[i];
      Point pt = contourVec[offset];
      hullContourVec.push_back(pt);
    }

    vector<vector<Point2i> > hullContoursVec;
    hullContoursVec.push_back(hullContourVec);

    Mat binMat(100, 100, CV_8UC1, Scalar(0));

    drawContours(binMat, hullContoursVec, 0, Scalar(0xFF));

    string fname = "hull_contour_rendered.png";
    imwrite(fname, binMat);
    cout << "wrote " << fname << endl;
  }

  // calculate convexityDefects()

  vector<Vec4i> defectVec;

  convexityDefects(contourVec, hullVec, defectVec);

  Mat defectBinMat(100, 100, CV_8UC1, Scalar(0));
  Mat colorMat(100, 100, CV_8UC3, Scalar(0,0,0));

  drawContours(colorMat, contoursVec, 0, Scalar(0,0xFF,0), CV_FILLED, 8); // Draw contour as green filled region

  for (int cDefIt = 0; cDefIt < defectVec.size(); cDefIt++) {
    int startIdx = defectVec[cDefIt].val[0];
    int endIdx = defectVec[cDefIt].val[1];
    int defectPtIdx = defectVec[cDefIt].val[2];
    double depth = (double)defectVec[cDefIt].val[3]/256.0f;  // see documentation link below why this

    Point2i startP = contour[startIdx];
    Point2i endP = contour[endIdx];
    Point2i defectP = contour[defectPtIdx];

    printf("start  %8d = (%4d,%4d)\n", startIdx, startP.x, startP.y);
    printf("end    %8d = (%4d,%4d)\n", endIdx, endP.x, endP.y);
    printf("defect %8d = (%4d,%4d)\n", defectPtIdx, defectP.x, defectP.y);
    printf("depth  %0.3f\n", depth);

    if (debugDumpImages) {
      line(defectBinMat, startP, defectP, Scalar(255), 1, 0);
      line(defectBinMat, endP, defectP, Scalar(128), 1, 0);
    }

    line(colorMat, startP, endP, Scalar(0xFF,0,0), 1, 0);
    circle(colorMat, defectP, 4, Scalar(0,0,0xFF), 2);
  }

  if (debugDumpImages) {
    string fname = "hull_contour_defects_rendered.png";
    imwrite(fname, defectBinMat);
    cout << "wrote " << fname << endl;
  }

  if (debugDumpImages) {
    string fname = "contour_defects_rendered.png";
    imwrite(fname, colorMat);
    cout << "wrote " << fname << endl;
  }

  imshow( "defects", colorMat );
  waitKey(0);
} 
```

# java - VB.Net Server & Android Client (Socket) 发送 & 接收

> ID：14107006
> 
> 赞同：1
> 
> 时间：2013-01-01T00:20:40.997
> 
> 标签：java, android, vb.net, sockets, tcp

我是 Android 编程新手，我编写了一个简单的服务器（VB.NET）/客户端（Java/Android）程序。来自 Android/Java 的文本已成功发送到 VB.Net，但在 Android/Java 中未收到来自 VB.Net 的响应（**buffer.readLine()** *返回* **null**）

我错过了什么吗？

这是我的代码

VB.NET（服务器）

```
Imports System.Net.Sockets
Imports System.Text

Public Class Form1

Dim server As New TcpListener(9999)
Dim client As New TcpClient
Dim stream As NetworkStream

Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load

End Sub

Private Sub Start_Click(sender As Object, e As EventArgs) Handles Start.Click
    Me.Text = "Waiting...."
    Dim str As String
    server.Start()
    client = server.AcceptTcpClient
    stream = client.GetStream()
    Dim r_byt(client.ReceiveBufferSize) As Byte
    stream.Read(r_byt, 0, client.ReceiveBufferSize)
    Str = Encoding.ASCII.GetString(r_byt)
    Label1.Text = str
End Sub

Private Sub Responce_Click(sender As Object, e As EventArgs) Handles Responce.Click
    Dim s_byt() As Byte = Encoding.ASCII.GetBytes("Got it" & vbCr)
    stream.Write(s_byt, 0, s_byt.Length)
    stream.Flush()
    stream.Close()
    client.Close()
    server.Stop()
End Sub 
```

Android/Java(客户端)

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintStream;
import java.net.Socket;
import java.net.UnknownHostException;

import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.widget.Button;

public class Main extends Activity {

Button buttonSend, buttonReceive;
private static Socket socket = null;
PrintStream stream = null;
BufferedReader buffer = null;
String string = "a";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    buttonSend = (Button) findViewById(R.id.buttonSend);
    buttonSend.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            try {
                socket = new Socket("192.168.0.104", 9999);
                stream = new PrintStream(socket.getOutputStream());
                stream.println("Hi Server...");

                buffer = new BufferedReader(new InputStreamReader(socket.getInputStream()));
                string = buffer.readLine(); 
                Log.d("ServerActivity", " - " + string);
                buffer.close();
                socket.close();
            } catch (UnknownHostException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    });

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T01:35:36.507

看起来你有几个问题：

*   在服务器端，您正在尝试从套接字读取某些内容到 中`r_byt`，并且您没有在客户端写入任何内容。当您按下服务器端的发送按钮时，`r_byt`仍然为空，这就是您在客户端收到的内容。

*   在客户端，对套接字读取的调用被阻塞，几秒钟后将导致客户端出现 ANR 错误（应用程序无响应）。您应该将套接字读取移动到与 UI 不同的线程。较新的 Android 版本甚至不允许您从 UI 线程中的套接字读取。

问候。

# xml - 为什么我不能在 XNA 中保存我的 Xbox 360 游戏？

> ID：14107008
> 
> 赞同：2
> 
> 时间：2013-01-01T00:20:47.940
> 
> 标签：xml, xna, stream, loading, save

我在保存我的游戏时遇到了问题，我花了几个小时寻找解决方案，但没有任何运气。我使用了写在某人博客中的这段代码：

```
public class SaveandLoad
{
    StorageDevice device;
    string containerName = "ChainedWingsContainer";
    string filename = "mysave.sav";
    public struct SaveGame
    {
        public int s_mission;
    }

    public void InitiateSave()
    {
        if (!Guide.IsVisible)
        {
            device = null;
            StorageDevice.BeginShowSelector(PlayerIndex.One, this.SaveToDevice, null);
        }
    }

    void SaveToDevice(IAsyncResult result)
    {
        device = StorageDevice.EndShowSelector(result);
        if (device != null && device.IsConnected)
        {
            SaveGame SaveData = new SaveGame()
            {
                s_mission = Game1.mission,
            };
            IAsyncResult r = device.BeginOpenContainer(containerName, null, null);
            result.AsyncWaitHandle.WaitOne();
            StorageContainer container = device.EndOpenContainer(r);
            if (container.FileExists(filename))
                 container.DeleteFile(filename);
            Stream stream = container.CreateFile(filename);
            XmlSerializer serializer = new XmlSerializer(typeof(SaveGame));
            serializer.Serialize(stream, SaveData);
            stream.Close();
            container.Dispose();
            result.AsyncWaitHandle.Close();
        }
    }

    public void InitiateLoad()
    {
        if (!Guide.IsVisible)
        {
            device = null;
            StorageDevice.BeginShowSelector(PlayerIndex.One, this.LoadFromDevice, null);
        }
    }

    void LoadFromDevice(IAsyncResult result)
    {
        device = StorageDevice.EndShowSelector(result);
        IAsyncResult r = device.BeginOpenContainer(containerName, null, null);
        result.AsyncWaitHandle.WaitOne();
        StorageContainer container = device.EndOpenContainer(r);
        result.AsyncWaitHandle.Close();
        if (container.FileExists(filename))
        {
            Stream stream = container.OpenFile(filename, FileMode.Open);
            XmlSerializer serializer = new XmlSerializer(typeof(SaveGame));
            SaveGame SaveData = (SaveGame)serializer.Deserialize(stream);
            stream.Close();
            container.Dispose();
            //Update the game based on the save game file
            Game1.mission = SaveData.s_mission;
        }
    }
} 
```

但是每当我运行它时，我都会收到以下消息：

Microsoft.Xna.Framework.Storage.dll 中出现“System.InvalidOperationException”类型的未处理异常

附加信息：在此 PlayerIndex 使用的所有先前容器都被释放之前，无法打开新容器。

我四处寻找答案，大多数建议都建议使用 Using 语句。所以我使用了这样的：

```
 void SaveToDevice(IAsyncResult result)
    {
        device = StorageDevice.EndShowSelector(result);
        if (device != null && device.IsConnected)
        {
            SaveGame SaveData = new SaveGame()
            {
                s_mission = Game1.mission,
            };
            IAsyncResult r = device.BeginOpenContainer(containerName, null, null);
            result.AsyncWaitHandle.WaitOne();
            using (StorageContainer container = device.EndOpenContainer(r))
            {
                if (container.FileExists(filename))
                    container.DeleteFile(filename);
                Stream stream = container.CreateFile(filename);
                XmlSerializer serializer = new XmlSerializer(typeof(SaveGame));
                serializer.Serialize(stream, SaveData);
                stream.Close();
                container.Dispose();
            }
            result.AsyncWaitHandle.Close();
        }
    } 
```

但我仍然得到相同的结果。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T01:55:26.493

这篇[文章](http://xboxforums.create.msdn.com/forums/p/41010/240452.aspx)中的人遇到了同样的问题，这是由于 using 语句范围之外的某种异常处理导致无法正确调用 dispose 引起的。尝试将您的 using 语句包装在 try catch 中。

另外，我发现这篇[文章](http://xboxforums.create.msdn.com/forums/p/17996/93894.aspx)在寻找解决方案时很有帮助。

祝你好运。

# joomla2.5 - 有没有办法在 joomla 上格式化文章布局？

> ID：14107009
> 
> 赞同：0
> 
> 时间：2013-01-01T00:20:47.930
> 
> 标签：joomla2.5

如何格式化文章的布局...

例如，我想在标题下方的顶部显示第一张图片，但在文本的左侧，我想要一个包含日期、点击次数、作者姓名和图片的列，以及我喜欢的任何其他内容。 .

有可能吗？

再次感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T00:09:51.463

您可以查看 Joomla 覆盖。这是一个帮助您入门的链接：http:
[//bit.ly/Z97yls](http://bit.ly/Z97yls)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T19:52:35.970

对于我对您的问题的理解，您可以使用 CSS 类轻松地做到这一点 - 使用 google chrome 检查代码。

此外，还有一个名为[Modules Anywhere](http://extensions.joomla.org/extensions/core-enhancements/coding-a-scripts-integration/embed-a-include/6402)的令人惊叹的组件，您可以使用它在文章页面中插入任何模块。

# python - 如何从抓取的 URL 列表中下载图像？

> ID：14107010
> 
> 赞同：2
> 
> 时间：2013-01-01T00:21:18.987
> 
> 标签：python, image, screen-scraping, beautifulsoup

> **可能重复：**
> [如何使用请求下载图像](https://stackoverflow.com/questions/13137817/how-to-download-image-using-requests)

我有这个用于抓取 tumblr 博客的图像 URL 的 Python 脚本，并且想将它们下载到我桌面上的本地文件夹中。我将如何实施这个

```
import requests 
from bs4 import BeautifulSoup 

def make_soup(url):
#downloads a page with requests and creates a beautifulsoup object

    raw_page = requests.get(url).text
    soup = BeautifulSoup(raw_page)

    return soup

def get_images(soup):
#pulls images from the current page

    images = []

    foundimages = soup.find_all('img')

    for image in foundimages:
        url = img['src']

        if 'media.tumblr.com' in url:
            images.append(url)

    return images

def scrape_blog(url):
# scrapes the entire blog

    soup = make_soup(url)

    next_page = soup.find('a' id = 'nextpage')

    while next_page is not none:

        soup = make_soup(url + next_page['href'])
        next_page = soup.find('a' id = 'nextpage')

        more_images = get_images(soup)
        images.extend(more_images)

    return images

url = 'http://x.tumblr.com'
images = scrape_blog(url) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T00:35:23.990

Python 的“ [urllib2](http://docs.python.org/2/howto/urllib2.html) ”可能是您正在寻找的。如果您需要做任何复杂的事情（例如使用 cookie 或身份验证），可能值得研究一个包装库，例如[Requests](https://github.com/kennethreitz/requests)，它为标准库的许多更繁琐的功能提供了一个很好的包装器。

# sql - 比较sql中的2个表

> ID：14107013
> 
> 赞同：1
> 
> 时间：2013-01-01T00:21:53.507
> 
> 标签：sql, sql-server-2008, sql-server-2005, sql-server-2008-r2

我有两张桌子，A1 和 A2。我想比较这两个表。我尝试了内部连接，但它没有给出所需的结果。

这些是这些表中的数据，

**表 A1**

```
No. Address 
1  abc
1  abc
1  def
1  def 
```

**表 A2**

```
No. Address
1    def
1    abc
1    abc
1    def 
```

这两个表只能通过使用`No.`列连接。因此，如果我使用 INNER JOIN 它会给出 16 行。我不希望这样，我只想显示 4 行。这应该是输出：

```
No.   Address   eq
1     abc      #
1     abc      *
1     abc      #
1     abc      # 
```

如果 A1 中的地址等于 A2，则显示最后一列

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T00:25:36.310

搜索 A1 表中存在但 A2 表中不存在的记录：

```
SELECT * FROM A1 WHERE NOT EXISTS (SELECT * FROM A2 WHERE A2.Id = A1.Id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T19:43:31.283

尝试用例

选择 tablea1.address=tablea2.address 然后 '*' else '#' end as eq from tablea1 inner join tablea2 on tablea1.=tablea2 的情况。

希望它可以帮助你。

# lambda - 为新的编程语言设计迭代器

> ID：14107017
> 
> 赞同：0
> 
> 时间：2013-01-01T00:22:48.640
> 
> 标签：lambda, programming-languages, closures, return

我正在考虑使用 each() 方法围绕编程语言进行迭代的各种方法。我提出了以下“带产量的内联函数”的想法。它的目的是避免使用非本地返回的闭包，我也看到过这种闭包称为块 lambda。示例伪代码，后面有解释：

```
class LinkedList
    iterator()
        # construct and return iterator

    inline each()
        iter = iterator()
        while iter.hasNext()
            yield iter.next()

main()
    list = LinkedList.new
    # add stuff to linked list

    list.each()
        # somehow the yield in each() populates v
        print v
        if v == "foo"
            return 
```

`inline`关键字表示调用在调用`each()`时是内联`yield`的，在调用站点被缩进代码块替换，并且`iter.next()`在示例中，“yielded”表达式也作为变量传递给该缩进代码块。实际上，代码`main()`转换为以下

```
main()
    list = LinkedList.new
    # add stuff to linked list

    # list.each() call transformed
    iter = list.iterator()
    while iter.hasNext()
        v = iter.next()
        print v
        if v == "foo"
            return 
```

之后的缩进代码块`list.each()`没有作为`each()`要执行的闭包传递。如果是这样，那么 return 语句的含义就会令人困惑。这是否意味着从闭包返回、从 返回`each()`或从 返回`main()`。

`main()`return from `main()`because中的 return 语句`each()`被内联到`main()`. 这避免了非本地返回关闭的复杂性。

我遇到的问题是如何`v`在顶部给出的示例伪代码中填充变量。我想不出一个合理的好语法。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T00:40:25.090

`list.each(v)`似乎是合乎逻辑的解决方案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T00:40:20.977

您可以像任何其他语言的`for each`循环一样进行操作。Java 就像`for(fooType foo: fooList) proc;`. IIRC，Python 就像`for foo in fooList: proc`. PostScript 去`fooList proc forall`。这些构造中的每一个都遍历`fooList`，`proc`为每个`foo`in执行`fooList`。除了 PostScript 之外，它们都获取 `fooList.iterator()`或`fooList.__iter__()`然后使用`it.next()`来遍历其所有元素，检查是否通过使用`it.hasNext()`或侦听`StopIteration`异常来完成。`fooList.each()`如果您希望程序员通过定义方法而不是（或其他）来定义该构造中的行为`fooList.iterator()`，请继续。我只是不确定你为什么要命名你的迭代器生成方法`each`。但如果这真的是你想要的，那就去吧。

# javascript - 将前景图像添加到图像

> ID：14107021
> 
> 赞同：0
> 
> 时间：2013-01-01T00:24:00.120
> 
> 标签：javascript, jquery, css, jquery-ui

对于按钮，如果我需要背景图片，我会使用如下背景

```
#statusButton span {
    color: #445058; 
    font-size: 14px; 
    font-weight: bold; 
    text-shadow: 1px 1px #fff; 
    padding: 7px 29px 9px 10px;
    background: url('../images/Arrow.png') no-repeat 53px 7px;
    display: block;
} 
```

类似于这里[http://www.soundendeavors.com/clients/index.html](http://www.soundendeavors.com/clients/index.html)

现在我如何将这种类型的图像添加为图像的前景。当我对图像使用相同的背景属性时，常规图像将重叠是我需要的是 CSS 的前景类型。图像上的图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T00:50:59.740

所以你想把另一个图像放在一个上面，对吧？你可以这样[做](http://www.css3.info/preview/multiple-backgrounds/)：

```
div{      /*You can use whatever element you prefer*/
    width: 400px;
    height: 400px;
    background-image: url('link1.jpg'), url('link2.png');     /*URLs*/
    background-position: left top, right bottom;              /*position*/
    background-repeat: no-repeat;                             /*repeat or not*/
} 
```

快速简单。列表中的第一张图片将显示在最顶部。

演示：http: [//jsfiddle.net/DerekL/Pdxpe/](http://jsfiddle.net/DerekL/Pdxpe/)

这种方法的好处是你仍然有一个实体元素，而不是浮动的包装器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T00:41:35.337

如果我理解你是对的，你想在图像**上**叠加另一个图像？

在现有图像上覆盖另一个图像您可以在 CSS 中使用位置：

CSS：

```
#wrapper {
    position: relative;
}
#img1 {
    position: absolute;
    top: 0;
    left: 0;
    z-index:0;
}
#img2 {
    position: absolute;
    top: 0;
    left: 0;
    z-index:100;
} 
```

HTML：

```
<div id="wrapper">
  <img src="img1.jpg" id="img1" />
  <img src="img2.jpg" id="img2" />
</div> 
```

现在带有 id`#img1`的图像位于图像下方`#img2`，因为`z-index`值较低...

# mysql - 复杂的 Sql 连接查询问题

> ID：14107023
> 
> 赞同：0
> 
> 时间：2013-01-01T00:24:14.577
> 
> 标签：mysql, sql

我有两个需要以特定方式组合的表。我需要一个表中的信息显示一次，但我需要下一个表中的信息来返回它拥有的每个匹配数据。这是我的例子

用户

* * *

```
| id | name |
-------------
| 1  | mike |
| 2  | john |
| 3  | bill |
------------- 
```

班级

```
-----------------
| uid | subject | 
-----------------
| 1   | math    |
| 1   | English |
| 2   | math    |
| 3   | math    |
| 3   | English |
----------------- 
```

预期成绩

```
--------------------
|name   | mike      |
---------------------
|subject| math      |
|       | English   |
--------------------- 
```

或者

```
--------------------
|name   |  subject  |
---------------------
|mike   | math      |
|       | English   |
--------------------- 
```

这是我当前的查询

```
SELECT user.name, class.subject
FROM user
join class on class.uid = user.id
WHERE (user.name like '%mike%') 
```

返回

```
--------------------
|name   |  subject  |
---------------------
|mike   | math      |
|mike   | English   |
--------------------- 
```

但我想删除所有重复的名称。任何人都可以帮助这个查询

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T00:34:30.483

您可以使用连接类型函数将值连接成分隔字符串...例如

```
Select u.name, (
      select
      GROUP_CONCAT(c.subject) FROM classes c where u.id = c.uid
    ) As subjects
    From user u 
```

所以你最终得到

```
--------------------
|name   |  subjects  |
---------------------
|mike   | math, English | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T00:31:19.390

```
set @lastname = null;
select case when name = @lastname
            then ""
            else @lastname := name
       end name,
       subject
from (select name, subject
      from user
      join class on id = uid
      where name like '%mike%'
      order by name) x 
```

[小提琴](http://www.sqlfiddle.com/#!2/47cf4/5)

但是，正如其他人在评论中指出的那样，这通常是在应用程序代码中完成的，而不是在 SQL 中。在处理行的循环中，只需检查名称是否与前一个相同，然后将该表字段留空。或者使用为您自动分组的网格小部件。

# ruby-on-rails - 如何在 Heroku 中查看详细日志，类似于我在开发环境中看到的日志？

> ID：14107037
> 
> 赞同：2
> 
> 时间：2013-01-01T00:26:57.547
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku

在我的开发环境中，当我在我的应用程序上发出请求时，我会看到如下 AREL 和 SQL 查询：

```
Started GET "/products/20" for 127.0.0.1 at 2012-12-31 19:18:40 -0500
Processing by ProductsController#show as HTML
  Parameters: {"id"=>"20"}
  Category Load (0.2ms)  SELECT "categories".* FROM "categories" LIMIT 6
  Product Load (0.1ms)  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "20"]]
  Product Load (0.3ms)  SELECT "products".* FROM "products" 
  Vendor Load (0.2ms)  SELECT "vendors".* FROM "vendors" WHERE "vendors"."id" = 11 LIMIT 1
  Product Load (0.2ms)  SELECT "products".* FROM "products" WHERE "products"."vendor_id" = 11
   (0.2ms)  SELECT COUNT(*) FROM "categories" INNER JOIN "category_products" ON "categories"."id" = "category_products"."category_id" WHERE "category_products"."product_id" = 20
  Category Load (0.1ms)  SELECT "categories".* FROM "categories" INNER JOIN "category_products" ON "categories"."id" = "category_products"."category_id" WHERE "category_products"."product_id" = 20
  CACHE (0.0ms)  SELECT "vendors".* FROM "vendors" WHERE "vendors"."id" = 11 LIMIT 1
  CACHE (0.0ms)  SELECT "vendors".* FROM "vendors" WHERE "vendors"."id" = 11 LIMIT 1
  Rendered products/_similar_products.html.erb (6.1ms)
  Rendered products/show.html.erb within layouts/application (71.2ms)
  User Load (0.2ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
   (0.2ms)  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = 1 AND (((roles.name = 'superadmin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))
  Rendered layouts/_login_nav.html.erb (5.1ms)
  Rendered layouts/_navigation.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (76.4ms)
  Rendered layouts/_messages.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 1171ms (Views: 1160.9ms | ActiveRecord: 1.9ms) 
```

但这是在 Heroku 上的相同查询：

```
2013-01-01T00:24:57+00:00 app[web.1]: Started GET "/products/20" for 67.230.41.62 at 2013-01-01 00:24:57 +0000
2013-01-01T00:24:58+00:00 heroku[router]: at=info method=GET path=/products/20 host=myapp.herokuapp.com fwd=67.230.41.62 dyno=web.1 queue=0 wait=0ms connect=1ms service=59ms status=200 bytes=7718 
```

我正在跟踪我的 Heroku 日志`heroku logs --tail`，这就是我获取该信息的方式。

是否可以获得与我在 Heroku 开发环境中看到的相同类型的日志？

谢谢。

**编辑：**

在我的`config/environment.rb`我放了这个：

```
ActiveRecord::Base.logger.level = Logger::DEBUG 
```

在`config/environment/production.rb`我放这个：

```
config.log_level = :debug 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T07:32:38.623

在较旧的堆栈上，Heroku 会在您的应用程序中插入一个插件，以重新配置记录器以适应 Heroku 的设置。这个插件使用`LOG_LEVEL`环境变量来设置使用的日志级别（无论你的应用程序的配置是什么都被忽略）

将该环境变量更新为 DEBUG，您应该会看到额外的信息。

对于当前的堆栈，您应该使用`rails_12factor`gem，它将日志输出重定向到标准输出，Heroku 期望在其中找到它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T00:36:57.217

每个环境初始化程序（{development,staging,production}.rb）中有一个 log_level 设置。在生产和登台中，它要么被注释，要么被设置为 :info。将其设置为：调试。

另外，添加

```
ActiveRecord::Base.logger.level = Logger::DEBUG 
```

到 config/environment.rb 的底部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T11:37:47.480

将以下内容添加到 production.rb

```
config.logger = Logger.new(STDOUT) 
```

# javascript - JavaScript Self Invoking function with Not

> ID：14107040
> 
> 赞同：3
> 
> 时间：2013-01-01T00:29:54.570
> 
> 标签：javascript, self-invoking-function

I came across this form of self invoking function. What is the "`!`" for?

```
!function (a) {
    // something
}(1); 
```

I don't know whether there is an existing question or not. Sorry if this is a dup.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T00:33:46.883

By using !, it's evaluating the anonymous function (thereby requiring it to run). Without that, you'd get an error.

And, as others have said, it will invert the result of whatever the function returns, if you're assigning it or evaluating it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T00:33:39.160

The not is meaningless unless the functions return value is assigned to something. If assigned, the left hand side will get the not of the result of the self executing function. The result will be the value explicitly returned or the last calculated value in the function.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T00:34:37.470

if it is returning something, it will just inverse the result:

```
console.log(!(function(a) { return (a == 1); })(1)); 
```

will return false. true if you give 0 or anything else.

# java - 字典困境：Array vs Arraylist

> ID：14107047
> 
> 赞同：0
> 
> 时间：2013-01-01T00:31:23.083
> 
> 标签：java, arrays, eclipse, arraylist

我想知道哪个更有效，我应该使用一维数组并列出 100 个单词，还是制作一个数组列表在 Java 中做同样的事情？

注意：到目前为止我只使用过数组，数组列表对我来说有点新，我知道它是什么，我以前从未使用过它，它们也将用于随机选择一个单词。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T05:02:45.753

如果您从一开始就知道元素的最终数量，那么在 Array 上使用 ArrayList 是没有意义的。ArrayList 是动态的：它们可以增长，但就性能和内存空间要求而言，您需要付出很小的代价。区别很小，但是如果您不需要自动增长功能，`ArrayList`那么为什么要要求它呢？

然而，除此之外，还有另一个标准可以（或不）引起更大的轰动：数组是协变的，而 ArrayList 不是；也就是说：如果 B 是 A 的子类，那么对 A 的 Array 的引用也可以接受对 B 的数组的引用，但对 A 的 ArrayList 的引用不能接受 B 的 ArrayList。换句话说， B 将被视为 A 的 Array 的协变，但 A 的 ArrayList 不会：

```
class A {}
class B extends A {}

A[] a = new B[1];  // OK
ArrayList<A> a2 = new ArrayList<B>();  // Error. 
```

为了避免最后一个错误，您可以尝试使用一系列类型，例如：

```
ArrayList<? extends A> a3 = new ArrayList<B>(); 
```

但是，您正在限制 ArrayList a3 的逆变：

```
a3.add(new A());  // Error!
a3.add(new B());  // Error again! 
```

但是，当您具有类的层次结构时，最好继续使用超类。因此，即使您有一组对象 B，其中 B 是 A 的子类，保留 A[] 和 ArrayList 而不是 B[] 和 ArrayList 以保留对这些对象 B 的引用通常更适合 OOP 并且更易于使用.

有时，您可能必须进行从 A 到 B 的强制转换才能访问 A 无法访问的 B 的属性或方法。但是，这可能被视为设计中的一个弱点。当您在最大程度上使用多态性并且基类（或超类）应该具有所有必要的虚函数来访问所有子类的属性和方法时，OOP 效果最好，因此您应该能够保留对子类的引用使用基类而无需在此后进行任何转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T08:00:58.587

我建议你使用`List`，基于性能的数组和列表之间几乎没有这种区别。

但是如果`List`您的代码与数组相比将易于管理和灵活。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T01:10:06.157

如果效率是您在这里最大的担忧，那么您就没有后顾之忧。使用任何你想要的。对于 99.99%（完全组成）的应用程序，您会发现数组和列表之间的性能没有明显差异。一般来说，列表比数组更受欢迎，因为它们更容易使用。

# java - java中的sql变量查询

> ID：14107048
> 
> 赞同：1
> 
> 时间：2013-01-01T00:32:11.230
> 
> 标签：java, sql, swing, variables, combobox

我在 Java 中有 3 个组合框，它们是；

'`departurecities={city1,city2,city3} destinationcities={city1,city2,city3} date={1,2,3,4,5,6...}`

我想为日期定义一个变量，因为我不知道什么用户会总线日期，所以我需要一个用于 SQL 查询的变量。

我想这样查询：

`sql=select busid from buses where dep='city1'and des='city2' and datebus=(????variable????);`

我该如何定义它？？？

请帮我 ..

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T00:42:06.177

# `PreparedStatement`

如果您想将变量传递给您的 SQL 语句，我建议您使用[`PreparedStatement`](https://docs.oracle.com/javase/10/docs/api/java/sql/PreparedStatement.html). 请参阅[Oracle 教程](https://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)。

您可以用于`setInt`传递整数、`setString`传递字符串等。 [这里](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html)是 API。

这是一个例子：

```
String result = null;
String query = "select busid from buses where dep='city1'and des='city2' and datebus=?";
try {
    PreparedStatement preps = con.prepareStatement(query);
    preps.setInt(1, Integer.parseInt((String) date.getSelectedItem()));
    preps.execute();
    rs = preps.getResultSet();
    if (rs.next()) {
        result = rs.getString(...);
    }
} catch (SQLException ex) {
    System.out.println(ex.getMessage());
} 
```

我假设***datebus***在您的数据库表中被声明为整数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T00:39:35.840

如果您想在 Java 中处理日期/日期差异，您可以将字符串类型用于常量，例如 '2012-12-31 12:00 am'，或者[Date](http://docs.oracle.com/javase/7/docs/api/java/sql/Date.html)或[GregorianCalendar 。](http://docs.oracle.com/javase/7/docs/api/java/util/GregorianCalendar.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T01:53:41.890

[在 SQL 中，您可以使用to_date()](http://docs.oracle.com/cd/E11882_01/server.112/e17118/functions203.htm)函数将字符串或字符值转换为 SQL 的内部日期格式：

SQL 示例：

```
to_date('29-Oct-09', 'DD-Mon-YY')
to_date('10/29/09', 'MM/DD/YY')
to_date('120109', 'MMDDYY') 
```

因此，如果您想从 Java 创建 SQL 命令：

```
String date = "12/31/2012";
String dep = "city1";
String des = "city2";
String SQL = "INSERT INTO buses VALUES(" + dep + "," + des + ",to_date(" + date + ",'MM/DD/YYYY'));"; 
```

# algorithm - Perl 在计算阶乘 N 的递归实现中保留中间结果的位置？

> ID：14107049
> 
> 赞同：0
> 
> 时间：2013-01-01T00:32:13.167
> 
> 标签：algorithm, perl, recursion, factorial

Perl 上有一个计算阶乘 N 的递归实现。

```
sub fact {
  my ($n) = shift;
  return $n if $n <= 2;
  return $n * fact($n - 1);
} 
```

有人可以解释一下 Perl 在函数给出结果之前在哪里保存中间结果吗？

**UPD**以及我如何通过使用调试器或使用其他东西来查看它们？

从答案中我被解释说这个值保存在一个堆栈中，但是我如何从堆栈中看到这些值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T01:31:52.550

通过递归，每次调用中传递的任何参数都将进入调用帧/堆栈。通过使用 Carp & cluck，您可以看到调用帧。中间结果是在堆栈在达到基本情况（$v == 1）时展开时计算的。它只能在CPU寄存器中吗？运算符 (*) 将此中间结果与堆栈上的 $v 相乘。另请查看[这篇文章](http://www.hiregion.com/2013/02/recursion-defined.html)。

```
#!/usr/bin/env  perl

use strict;
use IO::Handle;
use Carp qw(cluck);

STDOUT->autoflush(1);
STDERR->autoflush(1);

sub factorial {
    my $v = shift;

    dummy_func();
    return 1 if $v == 1;
    print "Variable v value: $v and it's address:", \$v, "\ncurrent sub factorial addr:", \&factorial, "\n","-"x40;
    return $v * factorial($v - 1);
}

sub dummy_func {
    cluck;
}

factorial(5); 
```

在调试模式下运行也会有所帮助。

> perl -d 阶乘.pl

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T17:19:17.200

返回的标量`$n`存储在堆栈中。

这是调用之前堆栈的样子`fact`：

*   `$n`递归级别 0 中返回的标量
*   列表：
    *   `$n`递归级别 1 中返回的标量
    *   列表：
        *   `$n`递归级别 2 中返回的标量
        *   列表：
            *   `$n-1`递归级别 2 中返回的标量
            *   `\&fact`递归级别 2 中返回的标量

这是调用后堆栈的样子`fact`：

*   `$n`递归级别 0 中返回的标量
*   列表：
    *   `$n`递归级别 1 中返回的标量
    *   列表：
        *   `$n`递归级别 2 中返回的标量
        *   `fact($n - 1)`递归级别 2 中返回的标量

此时，乘法运算符会将堆栈中的最后两个值相乘，并将结果放入堆栈。

*   `$n`递归级别 0 中返回的标量
*   列表：
    *   `$n`递归级别 1 中返回的标量
    *   列表：
        *   `$n * fact($n - 1)`递归级别 2 中返回的标量

然后子返回，

*   `$n`递归级别 0 中返回的标量
*   列表：
    *   `$n`递归级别 1 中返回的标量
    *   `fact($n - 1)`递归级别 1 中返回的标量

等等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T00:51:00.007

Intermediate results of any call are kept on the stack, just like local variables within a function.

```
return $n * fact($n - 1); 
```

is processed equivalently to:

```
my $temp = fact($n - 1);
return $n * $temp; 
```

UPDATE: I see you're also interested in where the product is held before returning it. That's also in a temporary on the stack, so it's equivalent to:

```
my $temp1 = fact($n - 1);
my $temp2 = $n * $temp1;
return $temp2; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-01T01:55:15.090

由于`$n`被声明为`my $n`，它是一个词法范围的变量，并且存储在堆栈中而不是系统表中。有关更多信息，请参阅[通过 my() 的 Perl 变量](http://perldoc.perl.org/perlsub.html#Private-Variables-via-my%28%29)。

# php - OpenCart $this->config->get() 的含义

> ID：14107051
> 
> 赞同：1
> 
> 时间：2013-01-01T00:32:53.637
> 
> 标签：php, opencart

我最近开始研究 Opencart PHP 电子商务框架的开发。我无法理解 OpenCart 如何调用 $this->config->get()。

例如，在我调用网站徽标的 header.php 文件（在控制器中）中，它将检查文件是否存在，然后调用

```
$this->data['logo'] = $server . $this->config->get('config_logo'); 
```

我不太确定它是如何使用此代码来获取图像以及它将从哪里获取数据的。如果您想了解更多信息，请在评论中告诉我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T11:37:36.233

让我们分解一下...

```
$this->data['logo'] = $server . $this->config->get('config_logo'); 
```

`$this`是控制器。'$this' 是对您当前所在对象的 PHP 引用。

`data`是一个数组（控制器的实例变量），其中`['logo']`的一个键。

`$server`提供文件路径的第一部分。

`config`是在控制器中实例化的对象。

`get`是 的一种方法`config`，并且`config_logo`是正在寻找的东西。

通过跟踪控制器中的代码并查看`includes`被调用的内容，您应该能够通过对象层次结构工作并查看实际的方法代码。从中，您可以弄清楚实际发生了什么。

我只能对配置数据的存储方式或存储位置做出假设，但`config`'s`get`方法将包含实际提取该数据的代码。

最后，这里是[OpenCart 文档 - 初学者快速入门](http://www.opencart.com/index.php?route=documentation/documentation&path=111)

# javascript - 在 Dropbox 上托管 Facebook 应用程序

> ID：14107058
> 
> 赞同：0
> 
> 时间：2013-01-01T00:35:18.763
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-javascript-sdk, dropbox

我正在尝试在 Dropbox 上托管一个简单的基于 JS 的 Facebook 应用程序，遵循以下问题： [Facebook 应用程序需要服务器？](https://stackoverflow.com/questions/9113990/server-required-for-a-facebook-application)

目前我只想在继续之前完成登录部分，但我遇到了一些问题 - 显然对***FB.getLoginStatus***的调用没有返回，因此没有调用实际的**登录**函数。如果我直接调用 login() （当前已注释掉），我设法登录 Facebook，但调用***FB.api('/me', function(response) {...})***没有返回，所以我已登录在但真的什么都做不了。我错过了什么？我在我的 Facebook 应用页面中设置了正确的 URL，但我真的不知道我做错了什么，为什么要这么难？：/

这是我的 JS 代码（几乎是 Facebook 登录教程中的复制+粘贴），而 HTML 正是该教程中的复制+粘贴。

```
 // Additional JS functions here
        function testAPI() {
            document.write('Welcome!  Fetching your information.... </br>');
            FB.api('/me', function(response) {
                document.write('Good to see you, ' + response.name + '.</br');
            });
        }
        function login() {
            document.write('Logging to Facebook </br>');
            FB.login(function(response) {
                if (response.authResponse) {
                    // connected
                    document.write("User now connected </br>");
                    testAPI();
                } else {
                    // cancelled
                    document.write("User cancelled </br>");
                }
            });
        }
        window.fbAsyncInit = function() {
            document.write("Connecting to facebook </br>");
            FB.init({
              appId      : '542474505763387', // App ID
              channelUrl : 'https://dl-web.dropbox.com/get/index.html?w=71a3a216', // Channel File
              status     : true, // check login status
              cookie     : true, // enable cookies to allow the server to access the session
              xfbml      : true  // parse XFBML
            });
            //login();

            FB.getLoginStatus(function(response) {
                document.write("Response </br>");
                if (response.status === 'connected') {
                    // connected
                    document.write("connected </br>");
                } else if (response.status === 'not_authorized') {
                    // not_authorized
                    document.write("not_authorized </br>");
                    login();
                } else {
                    // not_logged_in
                    document.write("not_logged_in </br>");
                    login();
                }
            });

        };

      // Load the SDK Asynchronously
      (function(d){
         var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
         if (d.getElementById(id)) {return;}
         js = d.createElement('script'); js.id = id; js.async = true;
         js.src = "//connect.facebook.net/en_US/all.js";
         ref.parentNode.insertBefore(js, ref);
       }(document));
    </script> 
```

# python - 如何在 Ubuntu 12.04 Precise 上正确安装 GTK+？

> ID：14107063
> 
> 赞同：2
> 
> 时间：2013-01-01T00:37:37.310
> 
> 标签：python, gtk, ubuntu-12.04, openstreetmap

**问题：**我正在尝试在 Ubuntu 12.04 上安装 GTK+，虽然它似乎已经安装，但每次我尝试运行使用“import gtk”的 python 程序时，都会出现错误：

```
回溯（最近一次通话最后）：
  文件“gps_slip_map.py”，第 3 行，在
    导入gtk
ImportError：没有名为 gtk 的模块

```

gps_slip_map.py 的 python 代码可以在[这里找到](http://pastebin.com/2refnvMY)

**到目前为止我所做的：**这里需要一些依赖项：osm-gps-map 和 gtk+。
为了下载 osm-gps-map 我使用了命令，从[这里](http://nzjrs.github.com/osm-gps-map/)：

```
sudo apt-get install libosmgpsmap-dev python-osmgpsmap
```

为了下载 gtk+，我使用了命令，从[这里](http://ubuntuforums.org/showthread.php?t=403647)，'p0c4r1' 发布 #9：

```
sudo apt-get install gnome-core-devel build-essential libgtk2.0-dev libgtk2.0-doc devhelp
```

我已经安装了这两个，当我再次尝试时，我会收到以下消息形式的确认：

```
阅读包裹清单...完成
构建依赖树       
读取状态信息...完成
libosmgpsmap-dev 已经是最新版本。
python-osmgpsmap 已经是最新版本。
gnome-core-devel 已经是最新版本。
build-essential 已经是最新版本。
libgtk2.0-dev 已经是最新版本。
libgtk2.0-doc 已经是最新版本。
devhelp 已经是最新版本。
以下软件包已自动安装，不再需要：
  language-pack-zh-hans yaml-cpp language-pack-kde-en libwxgtk2.6-0 language-pack-kde-zh-hans language-pack-kde-en-base libwxbase2.6-0 python-central language-打包-zh-hans-base
  语言包-kde-zh-hans-base
使用“apt-get autoremove”删除它们。
0 升级，0 新安装，0 删除，165 未升级。

```

在这个项目上和我一起工作的朋友能够简单地安装 Ubuntu 12.04 Precise 并使用命令安装 osm-gps-map。这对他有用，软件运行时没有抛出 ImportError。我做了同样的事情，它对我不起作用。

**结论：*有人能帮我弄清楚如何解决这个 ImportError 吗？***

**更新 1：**似乎 PYHTONPATH 是正确的......命令“echo $PYTHONPATH”显示：

> PYTHONPATH：/usr/local/lib/python2.7/site-packages/

但是，当我使用命令“ls /usr/local/lib/python2.7/site-packages/”时，似乎任何地方都没有列出 **GTK 。**

```
dateutil ipython-0.14.dev-py2.7.egg-info _mlt.so numpy-1.6.2-py2.7.egg-info pytz wx.pth
freenect-0.0.0-py2.7.egg-info matplotlib mlt_wrap.o pylab.py 自述文件 wxPython_common-2.8.12.1-py2.7.egg-info
freenect.so matplotlib-1.3.x-py2.7.egg-info mpl_toolkits pylab.pyc 串行 wxversion.py
IPython mlt.py numpy pyserial-2.6-py2.7.egg-info wx-2.8-gtk2-unicode wxversion.pyc

```

对我来说，这似乎是问题所在，但我不知道如何在此处手动添加正确的文件，以便我可以导入 gtk。**有谁知道如何做到这一点？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T00:41:19.597

是的——听起来你还需要 GTK+ 的 Python 绑定

例如：

*   apt-get 安装 python-gtk python-glade2

您也可能存在配置不匹配。查看此链接中的建议：

*   [http://ubuntuforums.org/showthread.php?t=1674508](http://ubuntuforums.org/showthread.php?t=1674508)

# jquery - 按行中最后一个单元格的背景颜色对表格进行排序

> ID：14107064
> 
> 赞同：3
> 
> 时间：2013-01-01T00:37:37.987
> 
> 标签：jquery, sorting, html-table

是否可以通过一行中最后一个单元格的 css 属性在页面加载时对表格进行排序？我希望表格行按最后一个单元格的 bg-color 排序。

桌子：

```
<table>
    <tr>
        <td>Foo</td>
        <td>Foo</td>
        <td style="font-weight:bold; background-color:#dee">Foo</td>
    </tr>
    <tr>
        <td>Foo</td>
        <td>Foo</td>
        <td style="background-color:#ffa">Foo</td>
    </tr>
    <tr>
        <td>put me on top</td>
        <td>Foo</td>
        <td style="background-color:#eee">Foo</td>
    </tr>
</table> 
```

我不知道从哪里开始，但我至少可以提醒颜色为 RGB：

```
$("table tr").find("td:last").each(function(index) {
    alert($(this).css("background-color"));
}); 
```

测试：http: [//jsfiddle.net/AqTTJ/6/](http://jsfiddle.net/AqTTJ/6/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T02:50:41.007

以下代码按手动键或按背景颜色整数值对行进行排序。您可以在[jsFiddle](http://jsfiddle.net/SeJWD/)上尝试一下。

**JavaScript**

```
$(document).ready(function() {
  // Variable declarations:
  var tableId = '#table';
  var autoSort = true;
  var rowArr = getRows(tableId);
  var keySort = [];

  // Add a click handler to the sort button
  // that will call autoSortKeys() and pass
  // in either a manual key array or an
  // auto-sorted array.
  $('#sort').click(function() {
    autoSort = $('#autoSort').is(':checked');
    keySort = autoSort
        ? autoSortKeys(rowArr)
        : [0xffee77, 0xaaffaa, 0xff6666];
    sortTable(tableId, rowArr, keySort);
  });
});

// Sorts a table based on the array of
// keys that are passed into the function.
function sortTable(tableId, rows, keys) {
  $(tableId).empty();
  $.each(keys, function(indexK, valueK) {
    $.each(rows, function(indexR, valueR) {
      if (valueR[0] === valueK) {
        $(tableId).append(valueR[1]);
      }
    });
  });
}

// Converts an rgb() value returned from Jquery
// into an integer value for comparison.
function rgbToInt(color) {
  var digits = /(.*?)rgb\((\d+), (\d+), (\d+)\)/.exec(color);
  var red = parseInt(digits[2]);
  var green = parseInt(digits[3]);
  var blue = parseInt(digits[4]);
  return parseInt((blue | (green << 8) | (red << 16)), 10);
};

// Stores every row in a table designated table
// as a sub-array comprised of the background color
// integer value and the row DOM element.
function getRows(tableId) {
  var arr = new Array();
  $(tableId+' tr').each(function() {
    var bg = $(this).find('td:last-child').css('backgroundColor');
    var key = rgbToInt(bg);
    arr.push([key, $(this)]); // [bg-color, <tr />]
  });
  return arr;
}

// Automatically sorts rows based on their background
// color integer value from highest to lowest.
function autoSortKeys(arr) {
  var keys = new Array();
  $.each(arr, function(index, value) {
    keys.push(value[0]);
  });
  var uniqueKeys = new Array();
  $.each(keys, function(index, value){
    if($.inArray(value, uniqueKeys ) === -1)
      uniqueKeys.push(value);
  });
  delete keys; // garbage collect
  return uniqueKeys .sort().reverse();
} 
```

**HTML**

```
<table id="table">
  <tr>
    <td>Foo</td>
    <td>Foo</td>
    <td style="font-weight:bold; background-color:#fe7">One</td>
  </tr>
  <tr>
    <td>Foo</td>
    <td>Foo</td>
    <td style="font-weight:bold; background-color:#fe7">One</td>
  </tr>
  <tr>
    <td>Foo</td>
    <td>Foo</td>
    <td style="background-color:#f66">Three</td>
  </tr>
  <tr>
    <td>Foo</td>
    <td>Foo</td>
    <td style="font-weight:bold; background-color:#fe7">One</td>
  </tr>
  <tr>
    <td>Foo</td>
    <td>Foo</td>
    <td style="background-color:#afa">Two</td>
  </tr>
  <tr>
    <td>Foo</td>
    <td>Foo</td>
    <td style="background-color:#f66">Three</td>
  </tr>
</table>
<br />
<label for="autoSort"> Auto Sort </label>
<input type="checkbox" id="autoSort" checked="CHECKED" />
<input type="button" id="sort" value="Sort" /> 
```

# python - 在烧瓶中，如何在特定的可插入视图上执行 before_filter？

> ID：14107066
> 
> 赞同：4
> 
> 时间：2013-01-01T00:37:49.777
> 
> 标签：python, flask

我有一个烧瓶应用程序，布局为几个`MethodView`s。

在我的一个 MethodViews 上，我想在每个请求之前打开一个数据库连接，并在请求之后关闭它，与[this](http://flask.pocoo.org/docs/tutorial/dbcon/)非常相似。

我知道如何使用全局`@app.before_request`和`@app.teardown_request`函数，但它们会针对每个请求运行。我想要仅针对特定 MethodView 中的路由运行的有限版本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T02:30:39.723

如果您正在创建一个`MethodView`子类，最简单的方法是简单地添加一个函数，当任何适当的方法是：

```
class AutoConnectingView(MethodView):
    def setup(self):
        # Connect to the database here and store the connection on self.
        self.db = connect_to_db()

    def teardown(self):
        self.db.close()

    def dispatch_request(self, *args, **kwargs):
        self.setup()
        response = super(AutoConnectingView, self).dispatch_request(*args, **kwargs)
        self.teardown()
        return response

class ARoomWithAView(AutoConnectingView):
    def get(self):
        rooms = self.db.execute("SELECT * FROM RoomsWithViews")
        return render_template("rooms.html", rooms=rooms) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T02:50:50.317

您可以使用装饰器，它将某些视图标记为依赖于数据库。

```
NoSQLStore = {}

class NoSQL(object):
    """ fake """
    def query(self, key): 
        return '%s\n' % NoSQLStore.get(key, 'no such key')
    def put(self, key, value):
        NoSQLStore[key] = value

def with_database(fn):
    """ Decorator for functions, that need database access.
        NoSQL object will be stored under ``g.db``. 
    """
    def connect_and_close(*args, **kwargs):
        g.db = NoSQL()
        __result = fn(*args, **kwargs)
        # a real database should be somehow ``closed()`` here
        return __result
    return connect_and_close

class StoreAPI(MethodView):

    @with_database
    def get(self):
        return g.db.query(request.args.get('key'))

    @with_database
    def post(self):
        key, value = str(random.randint(0, 1000)), str(random.randint(0, 1000))
        g.db.put(key, value)
        return 'set %s => %s\n' % (key, value) 
```

可在此处找到可运行的独立示例：[https ://gist.github.com/4424587](https://gist.github.com/4424587)

# css - 居中菜单

> ID：14107069
> 
> 赞同：2
> 
> 时间：2013-01-01T00:38:53.260
> 
> 标签：css, list, centering

我不明白为什么我的菜单没有居中。我尝试了从内联元素到边距的所有方法：0 auto; 对齐 =“中心”，我无法让菜单居中。你可以在这里看到它[http://jeremyspence.net78.net](http://jeremyspence.net78.net)你必须一直向下滚动才能看到它，只有当它经过主菜单时才会出现。这是一些CSS

```
.scrollmenu {
    display:none;
    position: fixed;
    top: 0;
    text-align:center;
    margin: 0px auto;
    width: 1020px;
    z-index: 10000;
    padding:0;
}
.scrollmenu li{
    width: 200px;
    height: 75px;
    overflow: hidden;
    position: relative;
    float:left;
    background: #fff;
    -webkit-box-shadow: 1px 1px 2px rgba(0,0,0,0.2);
    -moz-box-shadow: 1px 1px 2px rgba(0,0,0,0.2);
    box-shadow: 1px 1px 2px rgba(0,0,0,0.2);
    margin-right: 4px;
    -webkit-transition: all 300ms linear;
    -moz-transition: all 300ms linear;
    -o-transition: all 300ms linear;
    -ms-transition: all 300ms linear;
    transition: all 300ms linear;
}
.scrollmenu li:last-child{
    margin-right: 0px;
}
.scrollmenu li a{
    text-align: left;
    width: 100%;
    height: 100%;
    display: block;
    color: #000;
    position: relative;
}
.scroll-icon{
    font-family: 'Symbols';
    font-size: 60px;
    color: #333;
    text-shadow: 0px 0px 1px #333;
    line-height: 80px;
    position: absolute;
    width: 100%;
    height: 50%;
    left: 0px;
    top: 0px;
    text-align: center;
}
.scroll-home{
    font-size: 30px;
    opacity: 0.8;
    text-align: center;
    position: absolute;
    left: 0px;
    width: 100%;
    height: 50%;
    top: 30%;
}
.scrollmenu li:nth-child(2):hover{
    background-color: #CEFECE;
}
.scrollmenu li:nth-child(3):hover{
    background-color: #CEFEFE;
}
.scrollmenu li:nth-child(4):hover{
    background-color: #CECEFE;
}
.scrollmenu li:last-child:hover{
    background-color: #FECEFE;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T00:52:44.073

只需将其添加到您的`<ul class="scrollmenu"></ul>`：

```
left: 50%;
margin-left: -510px; 
```

或者 ：

```
left: 0;
right: 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T00:44:54.853

看起来你正在以 div 为中心？`<div>`默认情况下是块元素。它们通过使用边距居中。你已经接近了——你需要把左边距和右边距都设为自动。`margin-left:auto;margin-right:auto;`. 这将使它在其父元素内居中，该元素需要 100% 宽度（默认情况下，块元素将扩展到父元素的最大宽度）。如果它是内联元素，您可以`text-align:center;`在其父元素上使用（父元素仍需要 100% 宽度），这样就可以了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T00:47:55.270

在链接的 HTML 中，您似乎需要`position:fixed`在`div`上面的`ul`菜单中设置 。看起来你正在设置两者`position:fixed`并试图同时居中。将父 div 定位在固定位置，然后其子 div`ul`应该可以通过`margin-left: auto; margin-right: auto;`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-01T00:49:53.080

您是否尝试过为内容 div 指定宽度？

```
.content {
position: relative;
width: 1024px;
margin: 0 auto;
} 
```

这似乎解决了 Chrome 中的问题。

通过`position: fixed;`不为封闭容器设置大小，菜单使用容器的窗口边框，然后所有项目都向左浮动......好吧，它们都在左边。

# git - 从原始仓库更新 github fork

> ID：14107071
> 
> 赞同：6
> 
> 时间：2013-01-01T00:39:55.203
> 
> 标签：git, github, merge

我找到了一些从 github 上的原始 repo 更新 fork 的方法（假设“jay”是原始 repo 所有者的名称）：

```
git remote add --track master jay git://github.com/jay/repo_name.git
git fetch jay
git merge jay/master 
```

好的，它可以工作，但是在`git push`git 发送大量数据之后，我注意到我在 github 上的公共活动中做了大约 500 次提交，但实际上两个主分支之间的差异大约是 8 次提交。

那么有什么问题呢？

**更新：**好吧，看来我撒了谎。不同之处在于几行代码，然而，作者以某种方式提取了大量的提交。也许它只影响了 8 个文件，这就是我认为 8 个提交的原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T23:01:41.513

没有错。这是 GitHub 的一个设计选择，所有更改都通过您的本地计算机进行，因此您获取上游远程的提交，然后将它们推送回您自己的源远程上的自己的仓库，而这恰好位于同一台服务器上（但不同的仓库），但 git 并不“知道”这一点。

虽然 GitHub 可以进行直接传输（假设快进“合并”），但它会存在安全风险（谁拥有控制权，并且是否已完全验证）、误解风险（我的远程参考与远程服务器不匹配）我刚才是最新的，没有发出任何命令式的副作用），毫无疑问还有很多其他的。

某处有一个 GitHub 博客/帮助页面，说明这是更新 fork 的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-25T14:24:33.390

我一直在尝试解决这个问题...

今天我测试了一项服务，该服务可以自动更新来自其上游父级的所有分支[https://forkrefresh.herokuapp.com/](https://forkrefresh.herokuapp.com/)或 selfhosted ( [github](https://github.com/alexivkin/forkrefresh) )

# android - 已安装 ActionBarSherlock 主题，但仍会出现主题崩溃

> ID：14107072
> 
> 赞同：1
> 
> 时间：2013-01-01T00:40:13.137
> 
> 标签：android, styles, actionbarsherlock

这是LogCat：

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.---.---/com.---.---.ManageDebts}: java.lang.IllegalStateException: You must use Theme.Sherlock, Theme.Sherlock.Light, Theme.Sherlock.Light.DarkActionBar, or a derivative.
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1815)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1831)
at android.app.ActivityThread.access$500(ActivityThread.java:122)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1024)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:132)
at android.app.ActivityThread.main(ActivityThread.java:4123)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:491)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.IllegalStateException: You must use Theme.Sherlock, Theme.Sherlock.Light, Theme.Sherlock.Light.DarkActionBar, or a derivative.
at com.actionbarsherlock.internal.ActionBarSherlockCompat.generateLayout(ActionBarSherlockCompat.java:1003)
at com.actionbarsherlock.internal.ActionBarSherlockCompat.installDecor(ActionBarSherlockCompat.java:915)
at com.actionbarsherlock.internal.ActionBarSherlockCompat.setContentView(ActionBarSherlockCompat.java:849)
at com.actionbarsherlock.app.SherlockListActivity.setContentView(SherlockListActivity.java:229)
at com.kickinglettuce.debtplanner.ManageDebts.onCreate(ManageDebts.java:70)
at android.app.Activity.performCreate(Activity.java:4397)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1048)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1779)
... 11 more 
```

它说我需要使用特定的 Sherlock 主题，好吧，这就是我正在做的事情：

**在清单中：**

```
<application
    android:theme="@style/DPFTheme" > 
```

**Res 文件夹值/样式：**

```
 <style name="DPFTheme" parent="@style/Theme.Sherlock.Light" /> 
```

**Res 文件夹 Values-v11/Styles：**

我相信我已经涵盖了所有基础。还是我？

```
 <style name="DPFTheme" parent="@android:style/Theme.Holo.Light" /> 
```

现在，这个应用程序有几千个用户，我只看到这个错误大约 5 次左右。所以也许它是特定于设备的？我不知道。

# php - 第一次和第二次出现之间的 str_replace

> ID：14107078
> 
> 赞同：0
> 
> 时间：2013-01-01T00:41:22.937
> 
> 标签：php

我想制作一个函数 PHP 来替换 Text 就像这个例子

`yyyy $XXXXXX$ zzzzz`用。。。来代替`yyyy <img src="XXXXXXXX" title="XXXXXXXX"/> zzzzz`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T00:53:12.340

您应该为它使用正则表达式（[preg_replace](http://php.net/manual/en/function.preg-replace.php)）：

```
$str = 'yyyy $XXXXXX$ zzzzz';
$str = preg_replace('/\$([^$]+)\$/', '<img src="$1" title="$1"/>', $str); 
```

在以下帮助下编辑：[神秘的](https://stackoverflow.com/users/1592648/cryptic)

# php - 我应该如何将数据传递给我的视图？

> ID：14107080
> 
> 赞同：0
> 
> 时间：2013-01-01T00:41:47.257
> 
> 标签：php, model-view-controller

我目前正在各地做事，但我正在使用 ContentFactory 类中的特定方法来生成请求的视图：

```
ob_start();
include ($file);
$content = ob_get_contents();
ob_end_clean();
return $content; 
```

在调用类、视图类中，我是这样获取内容的：

```
public function userSummaryAjax(User $userObj){

    global $user;

    $user = $userObj;

    $content = ContentFactory::capture_output(templates . 'adminUserSummaryAjax.php');

    return $content;
} 
```

这是一个基本控制器的样子：

```
public function userlistView()
{

    $dataArray = $this->helper->getListUsers();

    $content = $this->view->userlistView($dataArray);

    $page = new page();
    $page->setPageTitle("Users");
    $page->setH1("Users");
    $page->setlead("A list of active users");
    $page->setContent($content);
} 
```

我怎样才能改进我必须使它变得更好、更简单的东西？

不幸的是，如果我可以解耦 Zend/Mvc/View 并从中使用一些东西，那就没问题了

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-01T01:26:02.377

我认为您应该使用类和对象来改进实现。

php 中的控制器应该负责获取数据并放入视图中。

在这种情况下，函数 userListView 应该在 params 中接收所有必要的模型。

# if-statement - python条件问题（2.7）

> ID：14107084
> 
> 赞同：1
> 
> 时间：2013-01-01T00:42:19.200
> 
> 标签：if-statement, python-2.7

ccc我有一个让我发疯的python脚本。这是有问题的代码...... if 语句中的代码没有运行，有人可以提出原因吗？：

```
print("refresh_type is: " + refresh_type)

if (refresh_type == "update"):
    print("hello world")
    cmd = 'sudo svn %s --username %s --password %s  %s' % ('up', un, pw, working_path)
    print("command is: " + str(cmd))
elif(refresh_type == 'checkout' or refresh_type == 'co'):
    cmd = 'sudo svn %s --username %s --password %s  %s %s' % (refreshType, un, pw, rc_service_url, working_path)

print('username = ' + credentials['un'])
print('password = ' + credentials['pw'])
print("working path = " + working_path) 
```

以下是打印语句的输出：

```
refresh_type is: 'update'
username = 'cccc'
password = 'vvvvv'
working path = '/home/ubuntu/workingcopy/rc_service' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T00:45:40.867

你的`refresh_type`价值*不是* `update`，而是`'update'`。您的其余变量患有相同的疾病，它们将引号*作为字符串 value 的一部分*。

在`print "refresh_type is:", repr(refresh_type)`此用作诊断辅助。

你可以使用：

```
if refresh_type == "'update'": 
```

但是您有一个更根本的问题，即您的字符串值中会出现额外的引号。

为了说明，一个简短的 Python 解释器会话：

```
>>> print 'update'
update
>>> print "'update'"
'update'
>>> "'update'" == 'update'
False
>>> foo = "'update'"
>>> print repr(foo)
"'update'" 
```

# java - 是否可以在 Apache Camel 中将 MXBean 作为消息传递

> ID：14107093
> 
> 赞同：0
> 
> 时间：2013-01-01T00:45:14.433
> 
> 标签：java, apache-camel

我想将 MXBean 作为消息从一个端点发送到另一个端点。Apache Camel 中已经包含的 JMX 消息格式是否支持这一点？

我的项目涉及我在本地机器上获取 JVM 的 MXBean。我将使用 CompilationMXBean、MemoryMXBean 等... [在 java.lang.management.* 中找到] 来获取 JVM 信息。

我也在使用 XML 文件来创建路由。然后在 Java 中创建组件/端点。（使用 dispatch/acquire 函数）。

或者有没有办法创建自定义消息解析？我对 apache 骆驼相当陌生。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T15:39:33.830

Camel 中的 JMX 组件实际上是为了传递 JMX 通知。MXBeans 本身不能作为消息传递，但如果我理解你想要做什么，有几种方法可以将数据采样作为 Camel 消息传递：

1.  将封装的引用传递给端点，该端点将引用解释为对所引用的 MBeanServer/MXBean 的一个或多个 JMX 调用，以获取指定的值。引用通常可以编码为 JMXServiceURL、ObjectName 和属性名称列表或操作名称/参数对。

2.  或者，您可以创建一个新的 MXBean，安装在您的目标 JVM 上，它会定期对所有必需的本地 MXBean 数据进行采样、聚合并将其作为 JMX 通知发出。然后可以由标准 Camel JMX 组件处理发出的通知。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T14:07:55.587

您可能还想看看[jolokia](http://www.jolokia.org/) ( [http://www.jolokia.org/](http://www.jolokia.org/) ) - 这是一个很棒的项目，可以更轻松地在本地和远程 JVM 中与 JMX 集成，并使用更简单的 API，可以是 REST 和基于 JSON。

它支持批量操作，所以你没有闲聊等。

我们在[hawt.io](http://hawt.io/)项目 ( [http://hawt.io/](http://hawt.io/) ) 中使用 Jolokia 从运行 Camel、ActiveMQ、ServiceMix 等的远程 JVM 的基于 Web 的控制台收集数据。

# struts2 - Struts2 注册 DebuggingInterceptor 失败

> ID：14107098
> 
> 赞同：1
> 
> 时间：2013-01-01T00:46:00.603
> 
> 标签：struts2, struts2-spring-plugin

真的需要帮助。我使用 Struts2 (2.3.4) + Spring (3.0.5) + Tomcat (7.0) + Spring Tool Suite (STS 3.1)。当我在 STS 中启动 Tomcat 时，出现了一个错误。

```
13:19:14,656 ERROR ContainerBackgroundProcessor[StandardEngine[Catalina]] providers.InterceptorBuilder:38 - Actual exception
Caught Exception while registering Interceptor class org.apache.struts2.interceptor.debugging.DebuggingInterceptor - interceptor - jar:file:/G:/springsource/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/fdop/WEB-INF/lib/struts2-core-2.3.4.jar!/struts-default.xml:141:115
at com.opensymphony.xwork2.ObjectFactory.buildInterceptor(ObjectFactory.java:214)
......
Caused by: java.lang.RuntimeException: java.lang.RuntimeException: java.lang.RuntimeException: java.lang.RuntimeException: java.lang.InterruptedException
    at com.opensymphony.xwork2.inject.ContainerImpl$MethodInjector.inject(ContainerImpl.java:301)
......
Caused by: java.lang.RuntimeException: java.lang.RuntimeException: java.lang.RuntimeException: java.lang.InterruptedException
    at com.opensymphony.xwork2.inject.ContainerBuilder$4.create(ContainerBuilder.java:132)
......
Caused by: java.lang.RuntimeException: java.lang.RuntimeException: java.lang.InterruptedException
......
Caused by: java.lang.RuntimeException: java.lang.InterruptedException
......
Caused by: java.lang.InterruptedException 
```

我检查了struts-default.xml 141 115，如下：

```
<interceptor name="debugging" class="org.apache.struts2.interceptor.debugging.DebuggingInterceptor" /> 
```

web.xml 见下文：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd"
    version="2.4">

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>classpath:spring\*.xml</param-value>
    </context-param>

    <filter>
        <filter-name>encodingFilter</filter-name>
        <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
        <init-param>
            <param-name>encoding</param-name>
            <param-value>UTF-8</param-value>
        </init-param>
        <init-param>
            <param-name>forceEncoding</param-name>
            <param-value>true</param-value>
        </init-param>
    </filter>

    <filter>
        <filter-name>struts2</filter-name>
        <filter-class>org.apache.struts2.dispatcher.FilterDispatcher</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>encodingFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <filter-mapping>
        <filter-name>struts2</filter-name>
        <url-pattern>/struts2/*</url-pattern>
    </filter-mapping>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <session-config>
        <session-timeout>30</session-timeout>
    </session-config>

</web-app> 
```

我在 STS 3.1 中通过 Maven (3.0.4) 构建项目，pom 如下所示：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.aaa</groupId>
    <artifactId>fdop</artifactId>
    <packaging>war</packaging>
    <version>0.1-SNAPSHOT</version>
    <name>fdop Maven Webapp</name>
    <url>http://maven.apache.org</url>
    <dependencies>

        <dependency>
            <groupId>org.mockito</groupId>
            <artifactId>mockito-core</artifactId>
            <version>1.9.5</version>
        </dependency>

        <dependency>
            <groupId>org.apache.struts</groupId>
            <artifactId>struts2-json-plugin</artifactId>
            <version>2.3.8</version>
        </dependency>

        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.14</version>
            <scope>runtime</scope>
        </dependency>

        <dependency>
            <groupId>org.aspectj</groupId>
            <artifactId>aspectjweaver</artifactId>
            <version>1.7.1</version>
        </dependency>

        <dependency>
            <groupId>jstl</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>

        <dependency>
            <groupId>commons-dbcp</groupId>
            <artifactId>commons-dbcp</artifactId>
            <version>1.4</version>
        </dependency>

        <dependency>
            <groupId>javax.transaction</groupId>
            <artifactId>jta</artifactId>
            <version>1.1</version>
        </dependency>

        <dependency>
            <groupId>org.apache.struts</groupId>
            <artifactId>struts2-core</artifactId>
            <version>2.3.4</version>
        </dependency>

        <dependency>
            <groupId>org.apache.struts</groupId>
            <artifactId>struts2-spring-plugin</artifactId>
            <version>2.3.4</version>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate</artifactId>
            <version>3.2.7.ga</version>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-annotations</artifactId>
            <version>3.5.6-Final</version>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-commons-annotations</artifactId>
            <version>3.3.0.ga</version>
        </dependency>

        <dependency>
            <groupId>commons-collections</groupId>
            <artifactId>commons-collections</artifactId>
            <version>3.2</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-aspects</artifactId>
            <version>${spring.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${spring.version}</version>
            <scope>runtime</scope>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context-support</artifactId>
            <version>${spring.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-instrument</artifactId>
            <version>${spring.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-instrument-tomcat</artifactId>
            <version>${spring.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-jdbc</artifactId>
            <version>${spring.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-jms</artifactId>
            <version>${spring.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>${spring.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-oxm</artifactId>
            <version>${spring.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-test</artifactId>
            <version>${spring.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-tx</artifactId>
            <version>${spring.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc-portlet</artifactId>
            <version>${spring.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-struts</artifactId>
            <version>${spring.version}</version>
        </dependency>

        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.9</version>
        </dependency>

        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jsp-api</artifactId>
            <version>2.0</version>
            <scope>provided</scope>
        </dependency>

        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
            <scope>provided</scope>
        </dependency>

        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.6</version>
            <scope>test</scope>
        </dependency>

    </dependencies>

    <build>
        <finalName>fdop</finalName>
    </build>

    <properties>
        <spring.version>3.0.5.RELEASE</spring.version>
    </properties>

</project> 
```

我试图寻找原因，发现大部分是由于缺少 FreemarkerManager 导致的 ERROR。但是，这不是我的答案。

# css - 悬停时的轮廓节点

> ID：14107102
> 
> 赞同：3
> 
> 时间：2013-01-01T00:47:08.373
> 
> 标签：css, hover, inspect

这是一个在悬停时概述 div 的示例。

但是，我正在尝试模拟诸如 chrome 检查器/firebug 之类的东西，用户可以通过鼠标悬停并单击元素来选择 DOM 节点。

[http://jsfiddle.net/Xuddz/57/](http://jsfiddle.net/Xuddz/57/)

但是，我不想在悬停时概述父节点（如检查/萤火虫）。有没有一种简单的方法可以通过 css 做到这一点？

```
:hover {
    outline: 1px solid blue;
}
​ 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T02:10:13.930

您的问题中已经有代码...

假设您的节点有一个名为 MyNode 的样式，那么 MyNode 的悬停样式将是 MyNode:hover....

```
In the  CSS stylesheet...
Your node is borderless and blue text...
When mouse is over your node then its bordered in red and has red text...

.MyNode
  {
  border-style: none;
  color: #0000FF;
  }

.MyNode:Hover
  {
  border: solid 1px #FF0000;
  color: FF0000;
  } 
```

# javascript - jQuery 使用 typeahead updater 参数抛出一个 typeError

> ID：14107104
> 
> 赞同：1
> 
> 时间：2013-01-01T00:48:08.483
> 
> 标签：javascript, jquery, google-chrome, twitter-bootstrap, bootstrap-typeahead

如果您使用谷歌浏览器访问我的网站[http://djdavid98.zymichost.com/.tagguide/](http://djdavid98.zymichost.com/.tagguide/?lang=en&seen=felfogtam&betatest=true)并尝试使用搜索框（例如输入“a”，单击第一个选项），您将在控制台中看到, jQuery 记录一个`Uncaught TypeError: Cannot call method 'toLowerCase' of undefined`. 我不明白为什么。

问题一定出在这部分代码中，因为删除它可以解决所有问题：

**[tagguide.js](http://djdavid98.zymichost.com/js/tagguide.js)（第 20-46 行）：**

```
$('#findname').typeahead({
    ...
    updater : function (item) {
        $('#ponies li:contains('+$(this).val()+')').parent().parent().parent().addClass('in');
        ...
    },
});

$('#findpony').typeahead({
    ...
    updater : function(item){
        $('#'+$('div.accordion-group > div > a.accordion-toggle:contains('+$(this).val()+')').attr('id')).addClass('in');
        ...
    },
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T02:16:37.790

它实际上在缩小的 jQuery 文件中，箭头指向它：

**`2148`**

```
val: function( value ) {
    var hooks, ret, isFunction,
        elem = this[0];

    if ( !arguments.length ) {
        if ( elem ) {
            hooks = jQuery.valHooks[ elem.type ] ||
                    jQuery.valHooks[ elem.nodeName.toLowerCase() ]; //<<<<<<<

                if ( hooks && "get" in hooks && 
                     (ret = hooks.get( elem, "value" )) !== undefined ) {
                return ret;
        }

        ret = elem.value;

        return typeof ret === "string" ?
            // handle most common string cases
            ret.replace(rreturn, "") :
            // handle cases where value is null/undef or number
            ret == null ? "" : ret;
    }

    return;
}​ 
```

**`2174`**

我注意到 Chrome 控制台在定位错误时有时会“丢失”它的位置；他们很快就会在同一个地方找到。您只需手动刷新路径即可将其重置。

`item`结果证明，解决方案是从引发错误的回调参数 for替换的两倍`$(this).val()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T02:07:21.247

jquery中的错误是由于调用`.val()`未定义而引发的

它的这条线

```
$('#ponies li:contains('+$(this).val()+')').parent().parent().parent().addClass('in'); 
```

尝试

```
$('#ponies li:contains(a)').parent().parent().parent().addClass('in'); 
```

如果您只在文本框中输入“a”，这将模拟值是什么，如果可行，那么您需要获取 .val()`$('#findname')`而不是`$(this)`

进一步阅读该代码我相信`$(this)`返回的原因是因为它在此代码中的`undefined`2 之后被调用：`.attr()`

```
$('#findpony').attr('placeholder',function(){
    // code removed     
}).attr('title',function(){
            // code removed
}).typeahead({
    source  : ponylist,
    updater : function(item){ 
        $('#'+$('div.accordion-group > div > a.accordion-toggle:contains('+$(this).val()+')').attr('id')).addClass('in');
        return item;
    },
}); 
```

看 - 你在 $('#findpony').attr('placeholder').attr('title') 之后调用 #(this)

# java - Java 代码中缓冲区中的意外值

> ID：14107106
> 
> 赞同：2
> 
> 时间：2013-01-01T00:48:12.740
> 
> 标签：java

DEITLE 书中的简单程序，读取 5 个整数，程序应打印包含该数量相邻星号的行。即（如果 num = 5 则输出 *****）。我已经在 c++ 中测试了相同的解决方案，并且效果很好。然而，这里的缓冲区持有奇怪的值 (50 ?) 。我认为问题在于使用缓冲区，但是我想知道为什么会这样？

```
 /*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package javaapplication1;
import java.io.*;
import java.util.Date;
/**
 * Program that reads five numbers and print starts equal to each number 
 *
 * @author Hassan
 */
public class JavaApplication1 

{

    public static void main(String[] args) 
    {
       int num ; 
       java.io.InputStreamReader  ins= new InputStreamReader(System.in);
       java.io.BufferedReader bfr = new BufferedReader (ins);

       try
       {

       for(int i=0;i<5;i++)
       {
           System.out.println("Please Enter a number");

           num = bfr.read(); 

       System.out.print(num);

             for(int j=0;j<num;j++)
                {   System.out.print("* ");  }
                  System.out.println("\n");

       }    
       } 

       catch(Exception E )
       {System.out.println(E.getMessage());  }

    }
} 
```

编辑：问题已解决，但程序 - 出 5 个输入 - 仅读取 3 个，即其读取输入并忽略下一个 ![在此处输入图像描述](../Images/9bf2ae1798299068b6764c158236ef18.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T00:57:29.720

您正在读取一个字节，它只是第一个可用字符的 ascii 值。50 在 ascii 中是“2”。您可能想要读取和解析作为文本输入的数字。

如果您使用`readLine()`而不是`read()`, 进入 a `String`，则可以使用`Integer.parseInt()`来获得真正的价值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T00:55:00.513

您的代码无法编译：

1.  `//`使用not写评论`\\`
2.  您的大括号未对齐，这会造成混淆并导致错误
3.  当你写评论时 - 确保在新行中关闭括号（否则它是评论的一部分）

解决这三个问题，您的程序就会运行。

**更新**：
JasonD 是对的，改变：

```
num = bfr.read(); 
```

到：

```
num = bfr.read()-48; 
```

它会起作用的。原因是您正在读取一个字符，而 ascii 中的 '0' 是 48，'1' 是 49 等等，所以如果您期望输入在 0-9 范围内，您应该减去 48 并且它会起作用。

如果要处理大于 9 的数字，则必须使用`readLine()`并解析 input `String`。

# c - tm 结构对象混淆

> ID：14107107
> 
> 赞同：-1
> 
> 时间：2013-01-01T00:48:57.170
> 
> 标签：c, struct

如果我这样做，我对如何使用 tm 结构对象感到有些困惑；

```
printf("The current date is %d-%d-%d\n", now.tm_mon, now.tm_mday, now.tm_year); 
```

我的输出是；

```
The current date is 11-31-112 
```

但是当我这样做时；

```
printf("The current date is %d-%d-%d\n", now.tm_mon + 1, now.tm_mday, now.tm_year 
+ 1900); 
```

我的输出是；

```
The current date is 12-31-2012 
```

我有点糊涂了怎么把+1和+1900的加法正确格式化输出时间？预先感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T00:50:59.977

从手册页：

> tm_mon 自一月以来的月数，范围为 0 到 11。
> 
> ```
>  tm_year   The number of years since 1900. 
> ```

您可能还想查看`strftime`输出功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-01T00:51:39.613

这就是[定义](http://linux.die.net/man/3/ctime)tm 结构中的值的方式：

*   tm_mon = 自一月以来的月数，范围为 0 到 11。

*   tm_year = 自 1900 年以来的年数。

我怀疑将起始年份设为 1900 年的原因是为了启用两位数年份值，我们都看到了效果如何。

一个有趣的旁注是，1900 年是全球[时区](http://en.wikipedia.org/wiki/Time_zone)成为标准的时间，所以也许人们认为这是一个设定开始年份的好时机。不过只是猜测。

# ios - 搜索栏取消按钮推送到初始视图控制器

> ID：14107109
> 
> 赞同：4
> 
> 时间：2013-01-01T00:49:12.027
> 
> 标签：ios, uisearchbar, segue, uisearchbardisplaycontrol

我一直在寻找，但无法使其工作。

`TableviewcontrollerA`使用搜索栏将 a`TableviewcontrollerB`设置为`firstresponder`

当用户点击取消时，我想回到`TableviewcontrollerA`

我在下面的方法中尝试了很多东西，但没有运气。我错过了什么？

谢谢顺便说一句 - segue 是在 IB 上完成的，而不是代码

```
-(void) searchBarCancelButtonClicked:(UISearchBar *)searchBar{

} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-01T01:40:52.477

```
-(void) searchBarCancelButtonClicked:(UISearchBar *)searchBar{
    [self.searchDisplayController setActive:NO animated:YES];
    self.navigationController popToViewController:UIViewControllerA animated:YES;
} 
```

# java - Java - Variable is being accessed from within inner class

> ID：14107111
> 
> 赞同：0
> 
> 时间：2013-01-01T00:49:44.803
> 
> 标签：java, variables, final

IntelliJ wants me to make my variables final, but I need them to change (I will be modifying them within the method). How can I fix this issue?

Here is my code, I've never had this issue before:

```
public void openDoor(int id, int x, int y, int face, int type) {
    Server.getTaskScheduler().schedule(new Task(0, true) {
        @Override
        protected void execute() {
            ObjectManager.deleteObject(c, x, y); //Error is here
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T00:56:26.133

You'll have to figure a clever way around it because this is a requirement in Java. You can't modify local variables or method parameters from within an anonymous inner class that are declared outside of it. One possible solution is to create a "holder" class, like:

```
class Holder {
    Object c;
    int x;
    int y;
} 
```

Then have your method accept a final Holder, and the anonymous class can modify the content of the Holder. Another (ugly) option is to make each of the affected parameters an array. Then the array can be final, but, again, you're free to modify the content.

The best option is probably to stop and ask yourself why you need to modify those variables in the first place. Probably, your task execution should be returning some value instead.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T01:13:36.577

添加另一个答案，因为我倾向于认为更方便的解决方案是复制变量，有点像这样：

```
public void openDoor(int id, final int f_x, final int f_y, int face, int type) {
    Server.getTaskScheduler().schedule(new Task(0, true) {
        int x = f_x, y = f_y; /* Either here... */

        protected void execute() {
            int x = f_x, y = f_y; /* ... or here, depending on your requirements */
            ObjectManager.deleteObject(c, x, y);
        }
    });
} 
```

这样，您不必每次都需要通过“Holder”对象间接访问数据。

当然，这两种方式都很丑陋，但这只是 Java。没办法。:)

# java - Implementing methods in Custom Linked List using Java

> ID：14107113
> 
> 赞同：0
> 
> 时间：2013-01-01T00:50:03.110
> 
> 标签：java, linked-list

I am currently doing a programming project myself and I require some help.

This is the LinkedList class I am using:

```
class LinkedList {
    Node cursor;
    private Node head;  // first node in the linked list
    private int count;

    public int getCount() {
        return count;
    }
    public Node getHead() {
        return head;
    }
    public LinkedList() {
        head = null;    // creates an empty linked list
        count = 0;
    }
    public void addFront(int n) {
        Node newNode = new Node(n);
        newNode.setLink(head);
        head = newNode;
        count++;
    }
    public void deleteFront() {
        if (count > 0) {
            Node temp = head;
            head = temp.getLink();
            temp = null;
            count--;
        }
    }
} 
```

Below are my questions:

1.  How do I create a method to remove a node in the LinkedList at any position? Assuming that the first node has the position of 1, second node has the position of 2 and so on and so forth.

2.  How do I swap the position of nodes for lets say node 1 and node 2?

3.  How do I sort the LinkedList based on the name in ascending order (assuming the name is 'albumName')?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T01:09:24.050

1.）您必须编写某种`find(int)`返回 Node 的方法，该方法将允许您获取对要删除的节点的引用。

假设你有一个双链接的，你可以改变周围节点的引用，垃圾收集器会清理那个节点的内存。

如果它是符号链接的，则需要使用 for 循环来找到要删除的节点，然后使用对当前节点之后的上一个节点的引用，将 prev 中的 next 的引用更改为 curr.next .

2.) 如果你写了一个 find 方法，你可以切换节点中的数据，或者你可以在你的 remove 中使用类似的 for 循环来改变节点的引用。

3.) 使用将对数据进行排序的节点编写选择排序。节点不一定需要移动，您可能只需切换数据。

```
for(Node curr = this.head; curr != null; curr = curr.next)
    for(Node next = curr.next; next != null; next = next.next) 
```

类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T00:54:01.920

I assume you're using the standard Java "Linked List" collection, and not implementing your own.

If so, all you have to do is look at the Javadoc and/or any number of fine tutorials on Java collections.

For example:

*   [Collections: Linked List](http://www.java2s.com/Tutorial/Java/0140__Collections/0180__LinkedList.htm)

*   [http://docs.oracle.com/javase/7/docs/api/java/util/LinkedList.html](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedList.html)

# asp.net - encoding on my server

> ID：14107116
> 
> 赞同：1
> 
> 时间：2013-01-01T00:50:10.210
> 
> 标签：asp.net, character-encoding

hi i made website with arabic content on my localhost by asp.net using utf8 encoding and embed flash slideshow but when i published it on the server the arabic letters became like this: Ø§Ù„Ù…Ù†Ø­Ù€Ø© Ø§Ù„Ø´Ø§Ù…Ù„Ù€Ø©

```
Ù…Ø¯ØªÙ‡Ø§ :- Ø´Ù‡Ø±ÙŠÙ†
Ø¹Ø¯Ø¯ Ø§Ù„Ø§ÙŠØ§Ù… :- 5 Ø£ÙŠØ§Ù… Ø£Ø³Ø¨ÙˆØ¹ÙŠØ§
Ø§Ù„Ø³Ø¹Ø± :- (950 ) Ø¬Ù†ÙŠÙ‡
Ø¹Ø¯Ø¯ Ø§Ù„Ø¯Ø§Ø±Ø³ÙŠÙ† :- 500 Ø¯Ø§Ø±Ø³ ØµØ¨Ø§Ø­Ø§ ÙˆÙ…Ø³Ø§Ø¡ 
```

Ø§Ù„Ø´Ù‡Ø§Ø¯Ø§Øª Ù„ÙƒÙ„

can any one help me please??? thank you

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T01:15:44.773

可能服务器没有与您相同的设置，因此更改 web.config 并添加该行

```
<globalization requestEncoding="utf-8" responseEncoding="utf-8" /> 
```

有关 MSDN 的更多信息：http: [//msdn.microsoft.com/en-us/library/hy4kkhe0 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/hy4kkhe0(v=vs.100).aspx)

# sql - Read SQL Table Manipulate The Data Output To ListView

> ID：14107125
> 
> 赞同：0
> 
> 时间：2013-01-01T00:51:22.640
> 
> 标签：sql, vb.net

I'm using VB 2008 to access data from multiple databases, SQL Server and Access. For this query, I'm pulling data from an SQL table named "People" and displaying the results in ListView1\. The "Time" column is in seconds. I have a function I use to convert seconds to minutes and seconds but I'm having a hard time merging the functions where when I pull the data from the database, populate the Name column in the listview and then run the conversion calculation on the seconds, then populate the Time column with the converted time.

```
 strsql = "SELECT Name, Time from People WHERE Boss ='" & BossSelector1.Text & "'"
    'Connection

    Dim ds As New DataSet
    ListView1.Items.Clear()
    While (dr.Read())
        With ListView1.Items.Add(dr("Name"))
            .subitems.add(dr("Time"))
        End With
    End While 
```

Time Conversion Code

```
 Dim iSecond As Double = inputtime.Text
    Dim iSpan As TimeSpan = TimeSpan.FromSeconds(iSecond)
    time.Text = iSpan.Minutes.ToString.PadLeft(2, "0"c) & ":" & _
                        iSpan.Seconds.ToString.PadLeft(2, "0"c) 
```

I only have read only access to the SQL server so I cannot make any stored procedures to take care of my problem.

# bash - 我可以告诉 bash 在当前执行的命令完成后运行命令吗？

> ID：14107128
> 
> 赞同：8
> 
> 时间：2013-01-01T00:51:56.487
> 
> 标签：bash, command-line

如果我启动了一个长时间运行的进程，我可以“排队”一个命令在它之后立即运行吗？

我知道`cmd1 && cmd2`如果我从头开始，我可以用语法来做到这一点，但是如果 cmd1 已经在运行呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-01T07:04:57.490

您可以按 Cz 停止当前的前台任务，然后键入“fg %%; some-other-command”以恢复任务并随后运行另一个命令。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-01T00:58:05.977

如果当前运行的命令没有读取输入，您只需在同一窗口中键入命令即可。当当前命令完成时，Bash 将读取输入并运行命令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T00:57:13.653

您可以使用 ';' 符号。看看这个链接：

[https://bbs.archlinux.org/viewtopic.php?id=104472](https://bbs.archlinux.org/viewtopic.php?id=104472)

您可以使用：

cmd1 && cmd2

cmd1 成功后，将执行 cmd2。或者：

cmd1; 命令2

cmd1 完成后，cmd2 无论如何都会执行。

# java - 使用共享首选项仅保存 1 个整数

> ID：14107130
> 
> 赞同：0
> 
> 时间：2013-01-01T00:52:06.950
> 
> 标签：java, android

我正在创建一个 android 应用程序，其中有 2 个静态整数。我想保存这两个 int 的值，但目前只有 1 个 int 被保存。

到目前为止，这是我保存整数的代码：

```
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
// The activity is being created.
setContentView(R.layout.durood);

app_preferences = this.getSharedPreferences("myPrefscount", MODE_WORLD_READABLE);

count = app_preferences.getInt("count", 0);
total = app_preferences.getInt("total", 0);

 @Override
protected void onPause() {
super.onPause();

 SharedPreferences.Editor editor = app_preferences.edit();
editor.putInt("count", count);
editor.putInt("total", total);
editor.commit();
editor.commit(); 
```

'count' int 被保存，但不是'total' int。关于如何纠正这个问题的任何想法？

在 twaddington 的建议之后编辑了最后一点代码：

```
SharedPreferences.Editor editor = app_preferences.edit();
editor.putInt("count", count);
editor.putInt("total", total);
Log.d("Test", "total: "+total);
editor.commit(); 
```

我的整个代码：

```
public class durood extends Activity{

//Count Button
TextView txtCount;
TextView totalCount;
EditText enteramount;
Button btnCount;
Button dmute;
Button dreset;
Button addtotal1;
Button addtotal2;
Button cleartotal;
static int count=0;
static int total=0;
private int x=0;
private int y=0;
private int z=0;
SharedPreferences app_preferences;
MediaPlayer mpButtonClick;
AudioManager audioManager;
public static boolean mutestatus=false;

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
// The activity is being created.
setContentView(R.layout.durood);

audioManager =
(AudioManager)getSystemService(Context.AUDIO_SERVICE);
//SAVE COUNT
app_preferences = this.getSharedPreferences("myPrefscount", MODE_WORLD_READABLE);

count = app_preferences.getInt("count", 0);
total = app_preferences.getInt("total", total++);

txtCount = (TextView)findViewById(R.id.dcount);
txtCount.setText("This app has been started " + count + " times.");

txtCount = (TextView)findViewById(R.id.dcount);
txtCount.setText("This app has been started " + count + " times.");

enteramount = (EditText)findViewById(R.id.enteramount);

totalCount = (TextView)findViewById(R.id.totalCount);
totalCount.setText("This app has been started " + total + " times.");

txtCount = (TextView)findViewById(R.id.dcount);

//Button SOUND AND COUNT
mpButtonClick = MediaPlayer.create(this, R.raw.bubble);

dreset = (Button)findViewById(R.id.dreset);

cleartotal = (Button)findViewById(R.id.cleartotal);

txtCount = (TextView)findViewById(R.id.dcount);
txtCount.setText(String.valueOf(count));

totalCount = (TextView)findViewById(R.id.totalCount);
totalCount.setText(String.valueOf(total));

btnCount = (Button)findViewById(R.id.dclick);

dmute=(Button)findViewById(R.id.dmute);

addtotal1=(Button)findViewById(R.id.addtototal1);
addtotal2=(Button)findViewById(R.id.addtototal2);

btnCount.setOnClickListener(new View.OnClickListener() {
public void onClick(View v) {

count++;
txtCount.setText(String.valueOf(count));
mpButtonClick.start();

}
});

dreset.setOnClickListener(new View.OnClickListener() {
public void onClick(View v) {
count = 0;
txtCount.setText("0");
SharedPreferences.Editor editor = app_preferences.edit();
editor.putInt("count", count);
editor.commit();
}
});

cleartotal.setOnClickListener(new View.OnClickListener() {
public void onClick(View v) {
total = 0;
totalCount.setText("0");
SharedPreferences.Editor editor = app_preferences.edit();
editor.putInt("total", total);
editor.commit();

}
});

dmute.setOnClickListener(new View.OnClickListener() {
public void onClick(View v) {
if(!mutestatus){
mutestatus=true;
audioManager.setMode(AudioManager.MODE_IN_CALL);
audioManager.setStreamSolo(AudioManager.STREAM_VOICE_CALL, true);

}
else{
mutestatus=false;
audioManager.setMode(AudioManager.MODE_NORMAL );
audioManager.setStreamSolo(AudioManager.STREAM_VOICE_CALL, false);

}
}});

//add to total 1
addtotal1.setOnClickListener(new View.OnClickListener() {
public void onClick(View v) {

x=Integer.parseInt(txtCount.getText().toString());
y=Integer.parseInt(totalCount.getText().toString());
z=x+y;
totalCount.setText(Integer.toString(z));
count = 0;
txtCount.setText("0");
SharedPreferences.Editor editor = app_preferences.edit();
editor.putInt("count", count);
editor.commit();
}

});

//add to total 2
addtotal2.setOnClickListener(new View.OnClickListener() {
public void onClick(View v) {

x=Integer.parseInt(enteramount.getText().toString());
y=Integer.parseInt(totalCount.getText().toString());
z=x+y;
totalCount.setText(Integer.toString(z));
enteramount.setText("");
}

});
}

@Override
protected void onPause() {
super.onPause();
// save count value here

SharedPreferences.Editor editor = app_preferences.edit();
editor.putInt("count", count);
editor.putInt("total", total);
Log.d("Test", "total: "+total);
editor.commit();

mutestatus=false;
audioManager.setMode(AudioManager.MODE_NORMAL );
audioManager.setStreamSolo(AudioManager.STREAM_VOICE_CALL, false);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T00:57:48.540

不要使用 MODE_WORLD_READABLE，它不好并且已被弃用（从最近开始，但无论如何你不应该有任何理由这样做），请尝试使用默认的 MODE_PRIVATE。

除此之外，您的代码应该可以正常工作。在提交之前验证 total 的值并且它是一个整数。你也不需要提交两次你的编辑器，一次就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T13:06:14.250

如果您使用的是 Eclipse，请使用 DDMS 透视图下的文件资源管理器在您的计算机上传输包含首选项的文件并检查它。该文件应位于`/data/data/your_package_name.your_application_name/shared_prefs`.

当焦点位于选项卡上时，您必须使用`Pull a file from the device`位于右上角的`File Explorer`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T14:56:23.933

我终于解决了这个问题。Int 'total' 由另一个 int 'z' 填充，请参见上面的 inn 完整代码。我也将其更改为总计，现在正在保存。感谢大家的帮助。

# google-sheets - Complex array sum

> ID：14107134
> 
> 赞同：1
> 
> 时间：2013-01-01T00:53:24.993
> 
> 标签：google-sheets, google-sheets-api, google-sheets-formula

I would like to add up numbers in the column based on the title of the column and the value of the column next to it. For example, I would like to add the numbers in this table:

![My Table](../Images/f2028c4ee39aa657e058b5c629977bdf.png)

where the column's title is `2011-2` and the column next to it (S2011-2) contains `a`. The result of this should be 3.18.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-26T13:01:22.553

这是一个旧的，但一旦您了解与数据库相关的电子表格功能，处理起来就相当简单。

在 Google 电子表格中有`DSUM`- 通读[https://support.google.com/drive/answer/173497?hl=en](https://support.google.com/drive/answer/173497?hl=en)并分析示例电子表格。

在您的情况下，请执行以下操作：

1.  在“S2011-2”列下放置一个标准，例如在 F2 中写入类似的`="=a"`内容，它将解析为`=a`
2.  使用强大的 DSUM：`DSUM(E1:F15;E1;F1:F2)`

解释：

`E1:F15`是您的数据库，**包括第 1 行中的列**名

`E1`保存列的名称，其中值是总和

`F1:F2`重用列名作为条件名称 (F1) 并应用 F2 中的条件值（即`=a`）

# javascript - 使用 clipRect() 设置 PhantomJS 以捕获整个屏幕

> ID：14107138
> 
> 赞同：6
> 
> 时间：2013-01-01T00:54:07.593
> 
> 标签：javascript, jquery, screen-scraping, phantomjs

在进行设置`page.clipRect`之后`page.render`，如何禁用`clipRect`以使后续页面呈现为整个视口？

```
page.clipRect = {top:0, left:0, height: 10, width: 10} ;
page.render('screencap.png');  // cropped image

page.clipRect = '';
page.render('fullscreen.png');  // still cropped image! 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-01T03:59:06.500

只需重置所有值`clipRect`：

```
page.clipRect = { left:0, top:0, width:0, height:0 } 
```

然后 PhantomJS 将再次重新捕获整个内容。

# java - 视口的 div 高度比例

> ID：14107142
> 
> 赞同：3
> 
> 时间：2013-01-01T00:55:06.690
> 
> 标签：java, jquery, html, css

首先，我是一个完整的菜鸟。请像教一个 3 岁的孩子一样回答。

我知道以前有人问过这个问题，但前面问题中列出的所有解决方案似乎都不适合我。我确定这是我做错的事情，但我无法弄清楚。

我正在使用 Matthew James Taylor 的 3column Holy Grail 布局。[http://matthewjamestaylor.com/blog/ultimate-3-column-holy-grail-ems.htm](http://matthewjamestaylor.com/blog/ultimate-3-column-holy-grail-ems.htm) （道具和感谢！）

查看源码你可以看到他用来创建页面的 div 结构，我的是相同的。我正在尝试将“.col2”（css中的“.holygrail .col2”）调整为视口减号（-）页眉和页脚。

我尝试使用这些问题中列出的解决方案。

[在浏览器调整大小时调整 div](https://stackoverflow.com/questions/2720310/resize-div-on-browser-resize)

[如何在窗口调整大小时更改高度 div？](https://stackoverflow.com/questions/2758651/how-to-change-height-div-on-window-resize)

我意识到这些解决方案正在使用 jquery，并且我确实在我的页面上打开了它。压缩版本位于主文件夹中。

```
<script src="jquery.js"></script>
<script>
$(window).resize(function() {
$('.col2').css('height', window.innerHeight+'px');
});
</script>
</body> 
```

以上似乎对我不起作用。我没有尝试为页眉/页脚调整它，只是尝试调用元素，并且没有这样的运气。我似乎无法调用任何 div，不知道出了什么问题。

我没有运气调整解决方案以满足我的需要。我再次确信它有些愚蠢，但非常感谢您提供一点帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T01:26:05.293

做这样的事情：http: [//jsfiddle.net/chanckjh/mjQs9/](http://jsfiddle.net/chanckjh/mjQs9/)

jQuery：

```
$(function() {
    var $height = $(window).height();
    $('.window').css('height', $height +'px');
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T00:59:21.973

`<script>`您必须在不同的标签中引用外部脚本和内联脚本。

```
<script src="jquery.js"></script>

<script>
    $(window).resize(function() {
        $('.col2').css('height', window.innerHeight + 'px');
    });
</script> 
```

有关详细信息，请参阅[http://www.w3.org/TR/html4/interact/scripts.html#h-18.2.1](http://www.w3.org/TR/html4/interact/scripts.html#h-18.2.1)。

> 脚本可以在 SCRIPT 元素的内容中定义，也可以在外部文件中定义。如果没有设置 src 属性，用户代理必须将元素的内容解释为脚本。如果 src 有一个 URI 值，用户代理必须忽略元素的内容并通过 URI 检索脚本。注意charset属性是指src属性指定的脚本的字符编码；它不涉及 SCRIPT 元素的内容。

# c++ - 如何在 Qt 中调整图像大小以按比例缩放？

> ID：14107144
> 
> 赞同：16
> 
> 时间：2013-01-01T00:55:24.780
> 
> 标签：c++, qt

我创建了一个名为 ImageLabel 的类，它扩展了 QLabel。我希望它保持显示的图像的大小比例，无论它有多拉伸。当您使窗口更大时，它可以正常工作。当您尝试使窗口更小时，问题就出现了：它不会调整高度，而是将其拉长。我该如何解决？

```
 int ImageLabel::heightForWidth(int width) const {
    int height = (this->size.height()*width)/this->size.width();
    return height;
}

QSize ImageLabel::sizeHint() const {
    return this->size;
}

QSize ImageLabel::minimumSizeHint() const {
    return QSize(0, 0);
}

void ImageLabel::setSizePolicy(){
    QSizePolicy policy = QSizePolicy(QSizePolicy::Expanding, QSizePolicy::Expanding);
    policy.setHeightForWidth(true);
    QLabel::setSizePolicy(policy);
    QLabel::setScaledContents(true);
}

void ImageLabel::setPixmap ( const QPixmap &pixmap ){
    this->size = pixmap.size();
    QLabel::setPixmap(pixmap);
}

int main(int argc, char *argv[]){
    QApplication a(argc, argv);

    QFrame *frame = new QFrame;
    QVBoxLayout *layout = new QVBoxLayout;
    frame->setLayout(layout);

    QPixmap map;
    map.load("test.png");
    ImageLabel *label = new ImageLabel;
    label->setSizePolicy();
    label->setPixmap(map);
    layout->addWidget(label);
    frame->show();

    return a.exec();
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-01T03:57:41.013

There are a couple ways to do this, but most of all I would recommend maybe not fighting against the layout system by trying to hint the aspect. As you can see, you are having to try and implement a number methods trying to help the layout.

I can offer two examples. Neither of them use layouts...

The first uses a child `QLabel` to show the image, and drives its fixed size off of the resize event:

```
// imagelabel.h

class ImageLabel : public QWidget
{
    Q_OBJECT

public:
    explicit ImageLabel(QWidget *parent = 0);
    const QPixmap* pixmap() const;

public slots:
    void setPixmap(const QPixmap&);

protected:
    void resizeEvent(QResizeEvent *);

private slots:
    void resizeImage();

private:
    QLabel *label;
};

// imagelabel.cpp

ImageLabel::ImageLabel(QWidget *parent) :
    QWidget(parent)
{
    label = new QLabel(this);
    label->setScaledContents(true);
    label->setFixedSize(0,0);
}

void ImageLabel::resizeEvent(QResizeEvent *event) {
    QWidget::resizeEvent(event);
    resizeImage();
}

const QPixmap* ImageLabel::pixmap() const {
    return label->pixmap();
}

void ImageLabel::setPixmap (const QPixmap &pixmap){
    label->setPixmap(pixmap);
    resizeImage();
}

void ImageLabel::resizeImage() {
    QSize pixSize = label->pixmap()->size();
    pixSize.scale(size(), Qt::KeepAspectRatio);
    label->setFixedSize(pixSize);
} 
```

The second example is based off of the answer given by @Arnold_Spence. It is even shorter as it doesn't use a child QLabel. It just draws the pixmap in the paint event:

```
// imagelabel2.h

class ImageLabel2 : public QWidget
{
    Q_OBJECT

public:
    explicit ImageLabel2(QWidget *parent = 0);
    const QPixmap* pixmap() const;

public slots:
    void setPixmap(const QPixmap&);

protected:
    void paintEvent(QPaintEvent *);

private:
    QPixmap pix;
};

// imagelabel2.cpp

ImageLabel2::ImageLabel2(QWidget *parent) :
    QWidget(parent)
{
}

void ImageLabel2::paintEvent(QPaintEvent *event) {
    QWidget::paintEvent(event);

    if (pix.isNull())
        return;

    QPainter painter(this);
    painter.setRenderHint(QPainter::Antialiasing);

    QSize pixSize = pix.size();
    pixSize.scale(event->rect().size(), Qt::KeepAspectRatio);

    QPixmap scaledPix = pix.scaled(pixSize,
                                   Qt::KeepAspectRatio,
                                   Qt::SmoothTransformation
                                   );

    painter.drawPixmap(QPoint(), scaledPix);

}

const QPixmap* ImageLabel2::pixmap() const {
    return &pix;
}

void ImageLabel2::setPixmap (const QPixmap &pixmap){
    pix = pixmap;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T02:11:32.730

没有内置工具`QLabel`来保持图像的纵横比。由于`Qlabel`可能具有您不需要的功能，因此您应该继承`QWidget`并覆盖`paintEvent()`以按照您想要的方式呈现图像。

# ruby-on-rails - Rails - 如何验证两个字段在组合时是否唯一？

> ID：14107146
> 
> 赞同：1
> 
> 时间：2013-01-01T00:56:14.493
> 
> 标签：ruby-on-rails, ruby, validation

我怎样才能确保：

一旦我有

```
type: 1 style: 2 
```

我无法添加

```
type: 2 style: 1 
```

因为组合应该是独一无二的？

我想：

```
validate :unique_relationship

def unique_relationship
  (user_id.to_s + friend_id.to_s).uniq
end 
```

但不要认为 uniq 会起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T01:11:04.183

怎么样

```
def unique_relationship?
  self.class.where("(user_id = ? and friend_id = ?) or (user_id = ? and friend_id = ?)", user_id, friend_id, friend_id, user_id).empty?
end 
```

如果结果集是，和`empty?`之间不存在任何关系。`:user_id``:friend_id`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T01:12:58.883

在这种情况下，我绝对会使用数据库约束，因为数据库可以比在 Rails 中更有效地执行此操作。

您需要创建一个多列索引

```
add_index :table, [:column_one, :column_two], unique: true 
```

请注意，这意味着创建/更新现在可能会引发异常。如果您认为这是一种罕见的情况，那可能没问题。如果没有，你会想做点什么。

# facebook - Facebook Flash API 登录错误

> ID：14107152
> 
> 赞同：0
> 
> 时间：2013-01-01T00:58:04.277
> 
> 标签：facebook, actionscript-3, flash, api, actionscript

我在使用以下代码时遇到问题：

```
 this.fb_init();
}

private function fb_init():void {
    Facebook.init("xxxxxxxxxxxxxxx",fb_handleInit);
}

private function fb_handleInit(success:Object,fail:Object):void {

    if (success && success.uid) {
         fb_loggedIn(success);
    }else{
        show_FacebookLoginButton();
    }

}

private function show_FacebookLoginButton():void {
    ....
}

private function handleMouseDown_FacebookLoginButton(event:MouseEvent):void {
    _stage.removeChild(_fb_login_button);
    this.fb_login();
}

private function fb_login():void {
    Facebook.login(fb_handleLogin,{scope:"user_games_activity,friends_games_activity"});
}

private function fb_handleLogin(success:Object=null,fail:Object=null):void {
    if (success) {
        fb_loggedIn(success);
    }else{
        show_FacebookLoginButton();
    }
}

private function fb_loggedIn(response:Object) {
    trace("success!);
} 
```

首先，在 fb_handleInit(success:Object,fail:Object) 中，成功和失败都始终为空。

其次，在登录后（或者如果已经登录则立即），fb_handleLogin(success:Object=null,fail:Object=null) 永远不会被调用，并且 flash 会输出以下错误：

```
ReferenceError: Error #1069: Property expiresIn not found on String and there is no default value.
    at com.facebook.graph.data::FacebookAuthResponse/fromJSON()
    at com.facebook.graph::Facebook/handleAuthResponseChange()
    at Function/http://adobe.com/AS3/2006/builtin::apply()
    at flash.external::ExternalInterface$/_callIn()
    at Function/<anonymous>() 
```

Firebug 显示此错误消息：未捕获的异常：Actionscript 中的错误。使用 try/catch 块来查找错误。xd_arbiter.php 第 13 行 (http://static.ak.facebook.com/connect/xd_arbiter.php)

Chrome 显示此错误消息：未捕获的错误：在 NPObject 上调用方法时出错。

I've been googling and reading about it for a few days, and I've posted an issue at [http://code.google.com/p/facebook-actionscript-api/](http://code.google.com/p/facebook-actionscript-api/) with no response so far. I'm surprised the the lack of examples that I can find. I've found a few and tried them and still had problems.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T22:24:50.500

Facebook made some changes in auth process, the old version of as3 library (last update of facebook-actionscript-api was in oct. 2011 as mentioned here code.google.com/p/facebook-actionscript-api/downloads/list) can result in such errors. Try to find library that's supported.

# ios - UIButton moves around depending on level of zoom in scrollview

> ID：14107154
> 
> 赞同：2
> 
> 时间：2013-01-01T00:58:18.223
> 
> 标签：ios, uiscrollview, uibutton

I am programmatically adding a custom UIButton to a scrollView which displays a map. When I'm fully zoomed in the coordinates are correct. As soon as I zoom out they move around. Is there any way to fix/remedy this? I'm currently setting them up like this:

```
- (void)createButtonFrom:(aClass* )class
{
    UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
    [button addTarget:self action:@selector(aMethod:) forControlEvents:UIControlEventTouchUpInside];
    button.tag = class.number;
    button.frame = CGRectMake(class.xValue, class.yValue, 50, 50);
    [scrollView addSubview: button];
} 
```

Then in viewDidLoad I call:

```
[self createButtonFrom:Test]; 
```

EDIT: I probably should have explained better. I don't want a static button. I want the button to move around and scale so that it remains in the same location on my map covering the same area. Right now it moves sporadically around when changing the zoomScale.

# ios - Creating multidimensional arrays in iOS

> ID：14107155
> 
> 赞同：1
> 
> 时间：2013-01-01T00:58:21.850
> 
> 标签：ios, arrays, plist, multidimensional-array, records

So I'm new to iOS development and I really only rely on storyboards and youtube tutorials for iPhone app development. (Im using Xcode)

But for this project I need to create a list of names (around 200). When a name is tapped a record will appear (displaying the date of birth, height, nationality and possibly even a profile picture). I think it is called an array of records.

I was also wondering if I should be using `storyboards` or `xibs` for this particular project. I don't want to have to create 200 different view controllers for each person which is why I'm trying to implement an array.

Could someone give me a starting point with code and the basics to which I should proceed because I dont know where I should start.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T01:13:18.557

一个普遍的问题 - 所以一个普遍的答案。

看看 Apple 教程 -[你的第二个 iOS 应用程序](http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/SecondiOSAppTutorial/Introduction/Introduction.html)。

这是编写具有 Master 和 Detail 视图的数据驱动表视图应用程序的一个很好的起点。

您可能想要使用不同的数据模型，但至少这应该可以帮助您入门。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T01:20:08.073

作为一种通用方法，要创建二维或更大维数组，您可以创建一个`NSArray`包含对其他实例的引用的`NSArray`实例。

一个简单的一维数组（您的示例真正想要的）只是一个`NSArray`对象引用。

更具体地说，您不需要 200 个视图控制器，但需要一个视图控制器来显示`People`（一个实例）`NSArray`的表视图`Person`——让我们称之为`PeopleViewController`——和一个视图控制器来显示具有一个人属性的表视图（`Person`instance) — 我们称它为`PersonViewController`.

这`PeopleViewController`可能是导航堆栈的“根”，它显示了一个表格视图，其中包含数据集中所有人员的列表。

当您从表视图`PersonViewController`中显示的列表中选择一个人时，它会被推送到导航堆栈上。`PeopleViewController`

如果您`Person`在数组中有实例的索引`People`，那么您只需将索引和`People`引用传递给 a `PersonViewController`。然后，该视图控制器将访问该`Person`索引处的实例属性`People`，并将它们倒入详细信息表视图中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T01:16:44.747

听起来您想显示一个单元格表。[UITableView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html)通常用于完成此操作。互联网上有许多[教程](http://www.iosdevnotes.com/2011/10/uitableview-tutorial/)涵盖了这个主题。

使用 UITableView 时，您将为表格中的每个单元格提供配置的视图。根据您要显示的内容的描述，您可能需要使用视图控制器制作[自定义视图](http://howtomakeiphoneapps.com/how-to-design-a-custom-uitableviewcell-from-scratch/1292/)以用作单元格，而不是使用默认的 UITableViewCell。

在您的代码中，您需要通过其[委托](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UITableViewDelegate)和[数据源](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDataSource_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UITableViewDataSource)向 UITableView 提供数据。看看[NSMutableArray](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html)，它可能是您想要用来存储行数据的对象数组的东西。此外，每个单元格的数据应存储在其自己的类中，以便在配置单元格视图时可以轻松访问其属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-01T11:09:02.120

除了上面提到的 Apple 的“你的第二个 iOS 应用程序”，你可能喜欢 iTunes U 上的免费 iOS 课程，我只看过[斯坦福](https://itunes.apple.com/my/itunes-u/ipad-iphone-application-development/id473757255?mt=10)的这个，看看课程列表，绝对值得。这是去年的课程，但是*今年*，我们不再需要为属性执行@synthesize。iTunesU 上还有其他 ios 课程可能涉及 ios 开发的不同方面。然后还有来自 WWDC的[Apple Developer 视频。](https://developer.apple.com/videos/)

# php - 使用 Ajax 的 JQuery POST 覆盖 txt 文件不起作用

> ID：14107158
> 
> 赞同：2
> 
> 时间：2013-01-01T00:59:46.337
> 
> 标签：php, javascript, jquery, ajax, overwrite

我有一个网站[http://www.gfcf14greendream.com/](http://www.gfcf14greendream.com/)我发布我的程序和游戏。我编写代码来下载我制作的程序没有问题（点击程序按钮，然后点击短信发送器），但我对如何生成计数器感到很困惑。首先，我不想使用网站上的一个，因为我真的很想自己格式化它。我想这样做的方法是使用一个txt文件，smssender.txt，它简单地有：

> 0

那么处理txt文件覆盖的站点的javascript是：

```
$("#downbutton").click(function () {
    downcounter++;
    if (downcounter == 1) $("#counter").text("SMS Sender has been downloaded " + downcounter + " time...");
    else $("#counter").text("SMS Sender has been downloaded " + downcounter + " times...");
    $.post("http://www.gfcf14greendream.com/PHP/smssender.php", {
        counter: downcounter
    }, function (data) {});
}); 
```

它应该调用一个 PHP 文件 smssender.php，它只有 5 行：

```
<?php
    $counter = $_POST['counter'];
    file_put_contents("/counters/smssender.txt", $counter);
?> 
```

我希望我知道是否调用了 php 页面，因为更改页面中指示下载时间的文本的代码运行良好，但是一旦刷新页面，下载次数就会回到 0，因为 0 是从此代码中获得的：

```
var downcounter = 0;
$.get("http://www.gfcf14greendream.com/counters/smssender.txt", function (data) {
    downcounter = data;
    if (downcounter == 1) $("#counter").text("SMS Sender has been downloaded " + downcounter + " time...");
    else $("#counter").text("SMS Sender has been downloaded " + downcounter + " times...");
}); 
```

这清楚地表明没有发生覆盖，因为它成功地从 smssender.txt 检索到 0（我之前尝试过使用 1 和 2 并且它有效）。那么为什么代码是错误的呢？任何形式的帮助都非常感谢。感谢您的宝贵时间，祝大家新年快乐！！

**更新：**

我尝试将javascript函数的代码更改为：

```
var txtfile = "http://www.gfcf14greendream.com/counters/smssender.txt";

            $.ajax({
                type:'POST',
                url: 'PHP/increment.php',
                data: txtfile,
                success: function() {
                    alert("Download incremented");
                    $.get("http://www.gfcf14greendream.com/counters/smssender.txt", function(data){
                        downcounter = data;
                        if (downcounter == 1)   $("#counter").text("SMS Sender has been downloaded " + downcounter + " time...");   
                        else $("#counter").text("SMS Sender has been downloaded " + downcounter + " times..."); 
                    });
                }               
            }); 
```

并添加了一个 PHP 文件 increment.php，其中包含您在此处给我的一些代码：

```
<? php
    $file = $_POST['txtfile'];
    $counter = intval(file_get_contents($file));
    $counter++;
    file_put_contents($file, $counter);
?> 
```

但是，仍然没有运气。这段代码会起作用还是我滥用了引用？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T01:14:32.063

这是构建计数器的简单方法，但存在一些问题。¹

与其依赖客户端的 JavaScript 向 提供值`counter`，不如完全在服务器端处理。例如，如果 2 个用户同时打开页面，则两者都将从相同的值开始，但仅将其递增 1，而不是*每个*正确递增 1 。

此方法还避免了清理客户端发送并保存在文件中的计数器值的需要，并且完全避免了处理任何帖子的需要。相反，只需调用脚本就可以增加您的计数器。

### 计数器 PHP 脚本

```
// Does nothing but read and increment the file:
// Read the value
$current_counter = intval(file_get_contents('/path/outside/web/root/counters/smssender.txt'));
// Increment it
$current_counter++;
file_put_contents('/path/outside/web/root/counters/smssender.txt', $current_counter);
// Output it to the client
echo $current_counter; 
```

JavaScript 的职责就是*调用*PHP 脚本，没有参数。

```
$.get("http://www.gfcf14greendream.com/PHP/smssender.php", function(data) {
  // Do something on success
  console.log(data);
}); 
```

为了防止对文件的直接请求，`smssender.txt`建议将该文件存储*在 Web 服务器文档根目录之外*。提供文件的正确路径在`file_get_contents()/file_put_contents()`.

要检索当前计数器值并将其发送到客户端，您只需读取并回显该值。

```
echo intval(file_get_contents('/path/outside/web/root/counters/smssender.txt')); 
```

`smssender.php`最后，请注意，这里没有什么可以阻止任何人通过一遍又一遍地调用脚本来运行您的计数器。如果您有登录名，则应确保用户在访问柜台时已登录。如果没有登录，您应该考虑在下载实际发生时设置一个 cookie 值，这样您就可以在计数器增加时断言用户在当前会话中实际下载了某些内容。

```
if (isset($_COOKIE['some-download-value'])) {
  // Update the counter.
} 
```

### 附录：

如果您的 Web 主机不允许您将文件放在 Web 服务器文档根目录之外，您可以在 .htaccess 中使用如下规则阻止对 .txt 文件的直接 HTTP 请求：

```
# Block direct access to any .txt file
<Files ~ "\.txt$">
  order allow,deny
  deny from all
</Files> 
```

或者您可以将以下内容放在`counters/`目录内的 .htaccess 文件中：

```
# counters/.htaccess
# block all HTTP requests to counter files
Order deny,allow
Deny from all 
```

* * *

¹避免所有文件存储、读取、写入和安全问题的更简单方法是将计数器值存储在数据库表中，`UPDATE`并在每次访问时存储。

# facebook - How to get like count for a specific country?

> ID：14107159
> 
> 赞同：6
> 
> 时间：2013-01-01T00:59:48.980
> 
> 标签：facebook, facebook-graph-api, global, facebook-page

Per [this blog post](https://developers.facebook.com/blog/post/2012/12/19/platform-updates--operation-developer-love/), country-level stats are now provided via the Insights connection on pages.

Unfortunately, those country-level stats only provide data for the top 45 countries. Is there a way to get stats for a specific country?

As an example, Dove has 5 specific country pages. I can currently get the like count for each specific page using the [global_brand_like_count value](https://developers.facebook.com/tools/explorer?method=GET&path=Dove?fields=global_brand_children.fields%28likes,global_brand_like_count,name,new_like_count,username,location,current_location%29,likes,name), but according to the documentation, that field is going away.

One of Dove's country-specific pages is for Switzerland, but that country isn't listed in the country-specific Insights stats because it's not in the top 45, but I would like to be able to get the like count for that specific country.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T14:17:08.723

似乎我们有同样的问题，没有得到喜欢和谈论属于全球页面的区域（国家）特定页面的计数。

global_brand_like_count 指标将在一周左右的时间内消失，如果您没有对特定页面的洞察访问（访问私有数据），我不确定是否有相当好的替代品可用。通过此访问权限，您可以使用 page_fans 指标。

我担心您对 page_fans_country 指标提供的国家/地区列表有些误解。Facebook 为该指标提供的描述是：“按国家/地区排序的关于喜欢您的页面的人的 Facebook 汇总位置数据”举个例子，对于 Dove 瑞士的区域页面，它为您提供了拥有喜欢该页面，或者更确切地说是按国家/地区的用户编号。实际上，目前只有 9 个，但如果有来自 58 个国家/地区的人喜欢此区域页面，Facebook 只会提供前 45 个。如果有那么多国家，它会将其返回给 45 个国家/地区。

要获得区域页面的终生喜欢（页面粉丝），一个想法是将返回列表中的所有数字相加。唯一的问题是，当来自超过 45 个国家/地区的用户喜欢该页面时，您会得到一个不正确的较低数字。

# windows-phone-8 - 在 WP8 中启动特定联系人的详细信息页面

> ID：14107160
> 
> 赞同：1
> 
> 时间：2013-01-01T01:00:26.390
> 
> 标签：windows-phone-8

在 Twitter 上，Justin Angel 暗示能够解决已知的 Windows Phone SDK 限制，您无法启动显示给定联系人详细信息的 ShowContactTask（[在此处投票解决此问题](http://wpdev.uservoice.com/forums/110705-app-platform/suggestions/3504000-add-a-showcontacttask-to-show-a-specific-contact-s)）。我[自己进行了一个测试](https://gist.github.com/4421095)以尝试使其正常工作，但它只显示一个带有用户名的空白页面。

有人有机会举例说明如何进行这项工作吗？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T04:28:18.927

正如我在推特上所说，WP8 不允许从自定义启动器任务或通过 app2app 自定义协议启动联系人详细信息。

人员中心确实支持在与联系人详细信息屏幕非常相似的屏幕中导入 vCard。您可以使用此功能主要导入 vCard 或选择性地显示联系人详细信息（即使它会显示为新联系人）。这是人员中心的 vCard app2app 文件关联：

```
 <Extensions>
    <FileTypeAssociation Name="VCard" Category="phone.fileTypeAssociation" TaskID="ViewVCardContact" NavUriFragment="VCardMode=2&amp;vCardFileToken=%s">
      <Logos>
        <Logo Size="small" IsResource="true">res://ContactsRes{ScreenResolution}!VCard.FileTypeIcon.Small.png</Logo>
        <Logo Size="medium" IsResource="true">res://ContactsRes{ScreenResolution}!VCard.FileTypeIcon.Medium.png</Logo>
        <Logo Size="large" IsResource="true">res://ContactsRes{ScreenResolution}!VCard.FileTypeIcon.Large.png</Logo>
      </Logos>
      <SupportedFileTypes>
          <FileType ContentType="text/vcard">.vcf</FileType>
          <FileType ContentType="text/x-vcard">.vcf</FileType>
      </SupportedFileTypes>
    </FileTypeAssociation>
  </Extensions> 
```

为了使用这个 app2app 自定义协议，我们可以编写一些代码来创建 vCard VCF 文件，将其保存到 IsoStore 并在人员中心启动 vCard。

```
private void MainPage_Loaded(object sender, RoutedEventArgs e)
{
    var contacts = new Contacts();
    contacts.SearchCompleted += contacts_SearchCompleted;
    contacts.SearchAsync(string.Empty, FilterKind.None, null);
}

private async void contacts_SearchCompleted(object sender, ContactsSearchEventArgs e)
{
    // get a Contact and build a vCard for it
    Contact contact = e.Results.First();
    string vcard = GetContactVCard(contact);
    Debug.WriteLine(vcard);

    // write the vCard to IsoStore as a VCF file
    using (var s = IsolatedStorageFile.GetUserStoreForApplication().CreateFile("myContact.vcf"))
    using (var sw = new StreamWriter(s))
    {
        sw.Write(vcard);
    }

    // launch the VCF file 
    var vcardStorageFile = await ApplicationData.Current.LocalFolder.GetFileAsync("myContact.vcf");
    Launcher.LaunchFileAsync(vcardStorageFile);
} 
```

接下来我们必须实现构建 vCard 的函数。我们将使用 vCard 3.0 版，因为我们需要 Base64 嵌入式图像（稍后会详细介绍）。我从 Wikipedia 复制了 vCard 3.0 格式，因此这个示例没有任何 Microsoft 特定的扩展。我只是将 vCard 复制到代码中，并从 Contact 类中输入了一些数据。

```
 private string GetContactVCard(Contact contact)
        {
            return string.Format(@"BEGIN:VCARD
VERSION:3.0
N:{0};{1}
FN:{2}
ORG:{3}
TITLE:{4}
PHOTO;TYPE=PNG;ENCODING=B:{9}
TEL;TYPE=WORK,VOICE:{5}
TEL;TYPE=HOME,VOICE:{6}
ADR;TYPE=WORK:;;{10}
ADR;TYPE=HOME:;;{11}
EMAIL;TYPE=PREF,INTERNET:{7}
REV:{8}
END:VCARD",
          contact.CompleteName.LastName,
          contact.CompleteName.FirstName,
          contact.DisplayName,
          contact.Companies.Any() ? contact.Companies.First().CompanyName : string.Empty,
          contact.CompleteName.Title,
          contact.PhoneNumbers.Any(p => p.Kind == PhoneNumberKind.Work) ? contact.PhoneNumbers.First(p => p.Kind == PhoneNumberKind.Work).PhoneNumber : string.Empty,
          contact.PhoneNumbers.Any(p => p.Kind != PhoneNumberKind.Work) ? contact.PhoneNumbers.First(p => p.Kind != PhoneNumberKind.Work).PhoneNumber : string.Empty,
          contact.EmailAddresses.Any() ? contact.EmailAddresses.First().EmailAddress : string.Empty,
          DateTime.Now.ToFileTimeUtc(),
          GetPhotoBase64(contact),
          contact.Addresses.Any(a => a.Kind == AddressKind.Home) ? BuildAddress(contact.Addresses.First(a => a.Kind == AddressKind.Home).PhysicalAddress) : string.Empty,
          contact.Addresses.Any(a => a.Kind == AddressKind.Work) ? BuildAddress(contact.Addresses.First(a => a.Kind == AddressKind.Work).PhysicalAddress) : string.Empty
            );
        } 
```

你可以看到我并没有花太多时间完善这个逻辑。如果您添加一些边缘条件处理并可能移动到 StringBuilder 可能是最好的。接下来我们将构建更复杂的地址字符串：

```
private string BuildAddress(CivicAddress physicalAddress)
{
    StringBuilder sb = new StringBuilder();

    string[] address = new string[]
                       {
                           physicalAddress.AddressLine1,
                           physicalAddress.AddressLine2,
                           physicalAddress.City + " " + physicalAddress.StateProvince,
                           physicalAddress.CountryRegion,
                           physicalAddress.PostalCode
                       };

    foreach (var line in address)
        if (!string.IsNullOrEmpty(line))
            sb.Append(line + ";");

    return sb.ToString();
} 
```

最后，我们需要将图像嵌入到我们的 vCard 中。我们在 base64 中嵌入了联系人照片，因为 WP8 没有可用于该联系人照片的 URL。

```
private string GetPhotoBase64(Contact contact)
{
    using (var picture = contact.GetPicture())
    {
        if (picture == null)
        {
            return null;
        }
        else
        {
            using (var sr = new StreamReader(picture))
            {
                byte[] data = new byte[picture.Length];
                picture.Read(data, 0, data.Length);
                return Convert.ToBase64String(data);
            }
        }
    }
} 
```

当我们运行此代码片段时，我们可以看到它将联系人属性的大部分详细信息传递到导出/导入的 vCard 中：

![vCard 导入 - 屏幕 #1](../Images/3b28dc13432423df1496c17c961a63b8.png) ![vCard 导入 - 屏幕 #2](../Images/c5adbd61261b193e6efe267491714f70.png)

# java - ImageIO issues in Java

> ID：14107162
> 
> 赞同：0
> 
> 时间：2013-01-01T01:00:47.610
> 
> 标签：java, image, applet, awt, javax.imageio

The issue I'm having is I cannot see any of the pictures I'm referencing with the `ImageIO` class on my Applet Viewer in JAVA. I was following a tutorial online and have yet to hear back from the author - there were similar questions on his page he didn't answer, so I'm assuming he's trying to figure it out himself.

Here's what I have so far.

```
import java.applet.Applet;
import java.awt.Graphics;

public class SuperheroGame extends SuperHeroGameLoop{

/**
 * 
 */
private static final long serialVersionUID = 1L;

public void init () {
    setSize(320,240);
    Thread th = new Thread(this) ;
    th.start();
    offscreen = createImage(320,240);
    d = offscreen.getGraphics();
    addKeyListener(this);
}

public void paint (Graphics g) {
    d.clearRect(0, 0, 320, 240);
    d.drawImage(background, 0, 0, this);
    d.drawImage(w2, x,y, this);
    //d.drawImage(foreground, 0, 0, this);
    //g.drawImage(offscreen, 0, 0, this);

}

public void update(Graphics g) {
    paint(g);
}

} 
```

And below is my Tester class with the bulk of the functions nested in the code.

```
import java.applet.Applet;
import java.awt.Graphics;
import java.awt.Image;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import javax.imageio.ImageIO;

public class SuperHeroGameLoop extends Applet implements Runnable, KeyListener {

/**
 * 
 */
private static final long serialVersionUID = 1L;
public int x,y;
public Image offscreen;
public Graphics d;
public boolean up, down, left, right;
public BufferedImage background, foreground, w1, w2, w3, w4;

public void run() {

    x = 100;
    y = 100;
    try {
        //background = ImageIO.read(new File ("background.png"));
        //foreground = ImageIO.read(new File ("foreground.png"));
        w1 = ImageIO.read(new File("red copy.png"));
        w2 = ImageIO.read(new File("red copy.png"));
        w3 = ImageIO.read(new File("red copy.png"));
        w4 = ImageIO.read(new File("red copy.png"));
    } catch (IOException e1) {

        e1.printStackTrace();
    }
    while(true) {
    if (left == true) {
        x-=2;
    }
    if (right == true) {
        x+=2;
    }
    if (up == true) {
        y-=2;
    }
    if (down == true) {
        y+=2;
    }

    repaint();
try {
Thread.sleep(20);
} catch (InterruptedException e) {
e.printStackTrace();
}
}
}
public void keyPressed(KeyEvent e) {
    if (e.getKeyCode() == 37) {
        left = true;
    }

    if (e.getKeyCode() == 39) {
        right = true;
    }

    if (e.getKeyCode() == 38) {
        up = true;
    }

    if (e.getKeyCode() == 40) {
        down = true;
    }
}
public void keyReleased(KeyEvent e) {
    if (e.getKeyCode() == 37) {
        left = false;
    }

    if (e.getKeyCode() == 39) {
        right = false;
    }

    if (e.getKeyCode() == 38) {
        up = false;
    }

    if (e.getKeyCode() == 40) {
        down = false;
    }
}
public void keyTyped(KeyEvent e) {

}

} 
```

Any help or feedback will be appreciated.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T02:46:31.980

> ..我的图像文件仅在我的计算机上，不能从 URL 或网络上的任何内容远程读取。

当小程序部署到万维网上的观众时，它应该如何工作？

当小程序从*您的站点*加载到*我的 PC*上时，不再有任何选项可以从*您的**PC***上加载图像（除非您的 PC 是服务器）。applet 的图像必须来自 a`URL`而不是 a `File`，并且除非受信任的 applet，否则它们必须来自与 applet 位于同一站点的 URL。

`ImageIO.read(..)`为流、文件或 URL 重载，因此仍可用于加载图像。

要形成小程序的 URL，至少有 3 种方法。如果图像是：

*   同一服务器上的松散资源。形成相对于文档库或代码库的 URL。
*   在`archive`属性中提到的 Jar 中（在运行时类路径上）。利用：

```
URL urlToImage = this.getClass().getResource("/path/to/image.png"); 
```

### 进一步的提示。

1.  这并不完全清楚，但似乎`SuperheroGame`是`Applet`. 这个千年使用 Swing，所以应该扩展`JApplet`.
2.  但接下来我们来到第二个问题，其中`SuperheroGame`实际上是扩展`SuperHeroGameLoop`（颤抖）。在这一点上，我们意识到`SuperHeroGameLoop`应该在 a `Panel`or中进行编码，`JPanel`而不是扩展`Applet` ***or*** `JApplet`。一般原则是“在容器中进行自定义绘画，该容器本身可以添加到小程序、框架、对话框或窗口、布局中的约束、选项卡或内部框架......”。
3.  `setSize(320,240);` 这在大多数 GUI 中是不可取的，但在 applet 中更是如此。小程序的大小在 HTML 中设置，并且应该遵守该大小。
4.  `Thread th = new Thread(this) ;` To do animation, use a Swing `Timer`. The following message was written for Swing, but applies equally to AWT AFAIU (after all, the EDT is itself a thread started, used and controlled by the AWT).
    Don't block the EDT (Event Dispatch Thread) - the GUI will 'freeze' when that happens. Instead of calling `Thread.sleep(n)` implement a Swing `Timer` for repeating tasks or a `SwingWorker` for long running tasks. See [Concurrency in Swing](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/) for more details.
5.  `addKeyListener(this);`
    1.  For more reliable focus make the GUI free floating. To do that, put the game in a frame (`JFrame`) and launch it from a link using [Java Web Start](https://stackoverflow.com/tags/java-web-start/info).
    2.  For a Swing based GUI, look to [Key Bindings](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html).

那是 5 个以上的提示，而我们刚刚到达`init`. *这表明学习从不同*来源编写代码比学习编写代码更理想。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-01T01:36:30.237

您正在使用一个小程序 - 它旨在在浏览器中运行并受安全管理器的约束。安全管理器可能会阻止您执行本地磁盘 i/o。

Trashgod 和 Philip 为您指出了有关此主题的有用文章。

但是，如果我们采取不同的策略...

An`Applet`是`Component`可以添加到 a`JFrame`的内容窗格中的。您可以通过执行以下操作将您的小程序变成一个独立的应用程序（没有限制性安全管理器）......

添加一个新类：

```
public class SwingApp
{
  public static void main(String[] args)
  {
    final JFrame frame = new JFrame("Swing App");

    SwingUtilities.invokeLater(new Runnable()
    {
      public void run()
      {
        final SuperHeroGameLoop loop = new SuperHeroGameLoop();

        frame.getContentPane().add(loop);
        frame.setSize(320, 240);

        loop.init();

        frame.setVisible(true);
      }
    });
  }
} 
```

*（但是，我确实只是从内存中输入了这个，而不是通过编译器运行它——所以我为任何编译错误道歉）......*

编译并运行它作为一个独立的应用程序。

另一种选择是完全放弃*小程序*方法，并将其编写为桌面 Swing 应用程序，使用`JComponent`...

# python - 满足条件时如何只执行 1 次迭代？

> ID：14107164
> 
> 赞同：0
> 
> 时间：2013-01-01T01:01:11.817
> 
> 标签：python, time, python-2.7, iteration

我正在使用 while true 循环来产生无限循环。而且，在代码中，我有一个取决于时间的部分。这是代码：

```
while True:
    if currentminute == '53':
        # do this
    else:
        # do that 
```

如果 currentminute == '53' 为真，我如何让它只执行一个“执行此”代码循环？并且，在剩下的时间里执行代表所有其他代码的大部分的“做那个”代码，然后在下一个小时返回“做这个”代码，等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T05:33:49.927

```
from datetime import datetime
import time
while True:
    if datetime.datetime.now().minute == 53:
        # do this
        if datetime.datetime.now().minute == 53:  # if still 53 then sleep for rest of the seconds
            time.sleep(60-datetime.datetime.now().second)
    else:
        # do that 
```

根据您的问题，我假设*只有*该`#do this`部分应每 53 分钟执行*一次。*此外，您需要确保该`#do that`部分不会长时间保持执行，以便它可以与第 53 分钟重叠。

# haskell - Implementing Inductive Graphs in Haskell

> ID：14107165
> 
> 赞同：1
> 
> 时间：2013-01-01T01:01:31.207
> 
> 标签：haskell, data-structures, types, graph

I'd like to give Martin Erwing's inductive graph implementation a shot. However, I am still new to Haskell's type system, specifically when it comes to defining abstract data types. I was hoping someone could supply a clear, near-trivial example of an this approach to implementing a graph in Haskell.

Here's [the documentation behind it](http://hackage.haskell.org/packages/archive/fgl/latest/doc/html/Data-Graph-Inductive-Graph.html), and [his paper](https://docs.google.com/viewer?a=v&q=cache%3adCctCteV5LIJ%3aweb.engr.oregonstate.edu/~erwig/papers/InductiveGraphs_JFP01.pdf+&hl=en&gl=us&pid=bl&srcid=ADGEESiwQhEHMDU0i-kLSXWvxkfeoy8luZYYHL8qKqEMA92nkZeWgi24gH1c1Vn0t2n7yqv1arJaW49QdqHFfbGrHhPK0-I7LUW2LDluzF9Rvu3uVT8xgXbYSD4DNc1jifdlz1b8O9aB&sig=AHIEtbSuJEJxIZgvSpPZr6dZk4o7KWUrXQ)

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T04:46:23.603

您可以在这里查看一个简单的基于树的实现：http: [//hackage.haskell.org/packages/archive/fgl/5.4.2.4/doc/html/src/Data-Graph-Inductive-Tree.html#Gr](http://hackage.haskell.org/packages/archive/fgl/5.4.2.4/doc/html/src/Data-Graph-Inductive-Tree.html#Gr)

# objective-c - 错误预期标识符或“（”

> ID：14107167
> 
> 赞同：-4
> 
> 时间：2013-01-01T01:01:34.170
> 
> 标签：objective-c

我需要帮助找出我收到此错误的原因吗？我是编码新手并试图解决这个问题。

```
if (pan.state == UIGestureRecognizerStateEnded) {
    if (self.topLayer.frame.orgin.x <= 160) {
        [self animateLayerToPoint:0];
    }  else {
        [self animatelayerToPoint: VIEW_HIDDEN];
    }
} 
```

这是我在“if”行得到错误的地方

```
if (self.topLayer.frame.orgin.x <= 160) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-01T01:04:21.670

你有一个错字：`orgin`而不是`origin`.

# ember.js - 如何手动初始化 ember.js 以注入我自己的 DS Store

> ID：14107175
> 
> 赞同：2
> 
> 时间：2013-01-01T01:05:10.720
> 
> 标签：ember.js, ember-data

我注意到在当前版本的 master 中你不再需要初始化你的 ember 应用程序（它似乎只是在加载时发生）。

但是因为我想对我的 ember 应用程序的部分进行单元测试，所以我想知道如何手动添加商店。

```
initialize: function(container, application) {
     container.register('store', 'main', application.Store);    
     container.lookup('store:main');    
} 
```

[https://github.com/emberjs/data/commit/708acf8cbfb31abe0accf0e8461069fa5785fc63](https://github.com/emberjs/data/commit/708acf8cbfb31abe0accf0e8461069fa5785fc63)

在上面列出的提交中，看起来我只需要添加一个默认存储。默认容器是什么？当我需要模拟/注入商店时，如何自己调用这两行？

# php - PHP if 语句：使用“OR”或||？

> ID：14107176
> 
> 赞同：3
> 
> 时间：2013-01-01T01:05:22.857
> 
> 标签：php, if-statement, conditional, pipe

> **可能重复：**
> [PHP - 和/或关键字](https://stackoverflow.com/questions/4502092/php-and-or-keywords)

```
if($foo == 0 or $bar == 1 || $baz == 2)
{
    ...
} 
```

使用“或”或||更好吗？它们之间有什么显着区别吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-01T01:06:55.763

这基本上是一个选择问题。

但是，在[操作数优先级](http://php.net/manual/en/language.operators.precedence.php)*方面*存在差异：

```
if ( false && false || true ) // true

if ( false AND false || true ) // false 
```

在此处查看实际操作：[http ://codepad.viper-7.com/zvFPzR](http://codepad.viper-7.com/zvFPzR)

# ruby-on-rails - 使用 Nokogiri 解析 XML

> ID：14107178
> 
> 赞同：3
> 
> 时间：2013-01-01T01:05:33.383
> 
> 标签：ruby-on-rails, ruby, xml-parsing, nokogiri

在为 Nokogiri 及其文档进行正确设置时遇到一些问题，入门有点粗糙。

我正在尝试解析 XML 文件：[http ://www.kongregate.com/games_for_your_site.xml](http://www.kongregate.com/games_for_your_site.xml)

它返回游戏集中的多个游戏，并且对于每个游戏，它都有一个标题、描述等......

```
<gameset>
  <game>
    <id>160342</id>
    <title>Tricky Rick</title>
    <thumbnail>
      http://cdn3.kongregate.com/game_icons/0042/7180/KONG_icon250x200_site.png?21656-op
    </thumbnail>
    <launch_date>2012-12-12</launch_date>
    <category>Puzzle</category>
    <flash_file>
      http://external.kongregate-games.com/gamez/0016/0342/live/embeddable_160342.swf
    </flash_file>
    <width>640</width>
    <height>480</height>
    <url>
      http://www.kongregate.com/games/tAMAS_Games/tricky-rick
    </url>
    <description>
      Help Rick to collect all the stolen fuel to refuel his spaceship and fly away from the planet. Use hammer, bombs, jetpack and other useful stuff to solve puzzles!
    </description>
    <instructions>
      WASD \ Arrow Keys &#8211; move; S \ Down Arrow &#8211; take\release an object; CNTRL &#8211; interaction with objects: throw, hammer strike, invisibility mode; SPACE &#8211; interaction with elevators and fuel stations; Esc \ P &#8211; pause;
    </instructions>
    <developer_name>tAMAS_Games</developer_name>
    <gameplays>24999</gameplays>
    <rating>3.43</rating>
  </game>
  <game>
    <id>160758</id>
    <title>Flying Cookie Quest</title>
    <thumbnail>
      http://cdn2.kongregate.com/game_icons/0042/8428/icon_cookiequest_kong_250x200_site.png?16578-op
    </thumbnail>
    <launch_date>2012-12-07</launch_date>
    <category>Action</category>
    <flash_file>
      http://external.kongregate-games.com/gamez/0016/0758/live/embeddable_160758.swf
    </flash_file>
    <width>640</width>
    <height>480</height>
    <url>
      http://www.kongregate.com/games/LongAnimals/flying-cookie-quest
    </url>
    <description>
      Launch Rocket Panda into the land of Cookies. With the help of low-flying sharks, hang-gliding sheep and Rocket Badger, can you defeat the all powerful Biscuit Head? Defeat All enemies of cookies in this launcher game.
    </description>
    <instructions>Use the mouse button!</instructions>
    <developer_name>LongAnimals</developer_name>
    <gameplays>168672</gameplays>
    <rating>3.67</rating>
  </game> 
```

从文档中，我使用的是类似的东西：

```
require 'nokogiri'
require 'open-uri'

url = "http://www.kongregate.com/games_for_your_site.xml"
xml = Nokogiri::XML(open(url))
xml.xpath("//game").each do |node|
    puts node.xpath("//id")
    puts node.xpath("//title")
    puts node.xpath("//thumbnail")
    puts node.xpath("//category")
    puts node.xpath("//flash_file")
    puts node.xpath("//width")
    puts node.xpath("//height")
    puts node.xpath("//description")
    puts node.xpath("//instructions")
end 
```

但是，它只是返回无穷无尽的数据，而不是一组数据。任何帮助都会有所帮助。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-01T07:29:05.750

这是我重写代码的方法：

```
xml = Nokogiri::XML(open("http://www.kongregate.com/games_for_your_site.xml"))
xml.xpath("//game").each do |game|
  %w[id title thumbnail category flash_file width height description instructions].each do |n|
    puts game.at(n)
  end
end 
```

您的代码中的问题是所有子标记都带有前缀`//`，在 XPath 中，这意味着“从根节点开始并向下搜索包含该文本的所有标记”。因此，它不是只在每个`//game`节点内部搜索，而是在整个文档中搜索每个`//game`节点列出的每个标签。

我建议在 XPath 上使用 CSS 访问器，因为它们更简单（通常）并且因此更易于阅读。所以，而不是`xpath('//game')`我使用`search('game')`. （`search`将采用 CSS 或 XPath 访问器，也将采用`at`。）

如果您想要标签中包含的文本，请更改`puts game.at(n)`为：

```
puts game.at(n).text 
```

为了使输出更有用，我会这样做：

```
require 'nokogiri'
require 'open-uri'

xml = Nokogiri::XML(open('http://www.kongregate.com/games_for_your_site.xml'))
games = xml.search('game').map do |game|
  %w[
    id title thumbnail category flash_file width height description instructions
  ].each_with_object({}) do |n, o|
    o[n] = game.at(n).text
  end
end

require 'awesome_print'
puts games.size
ap games.first
ap games.last 
```

结果是：

```
395
{
              "id" => "160342",
          "title"  => "Tricky Rick",
      "thumbnail"  => "http://cdn3.kongregate.com/game_icons/0042/7180/KONG_icon250x200_site.png?21656-op",
        "category" => "Puzzle",
      "flash_file" => "http://external.kongregate-games.com/gamez/0016/0342/live/embeddable_160342.swf",
          "width"  => "640",
          "height" => "480",
    "description"  => "Help Rick to collect all the stolen fuel to refuel his spaceship and fly away from the planet. Use hammer, bombs, jetpack and other useful stuff to solve puzzles!\n",
    "instructions" => "WASD \\ Arrow Keys &#8211; move;\nS \\ Down Arrow &#8211; take\\release an object;\nCNTRL &#8211; interaction with objects: throw, hammer strike, invisibility mode;\nSPACE &#8211; interaction with elevators and fuel stations;\nEsc \\ P &#8211; pause;\n"
}
{
              "id" => "78",
          "title"  => "rotaZion",
      "thumbnail"  => "http://cdn2.kongregate.com/game_icons/0000/0115/pixtiz.rotazion_icon.jpg?8217-op",
        "category" => "Action",
      "flash_file" => "http://external.kongregate-games.com/gamez/0000/0078/live/embeddable_78.swf",
          "width"  => "350",
          "height" => "350",
    "description"  => "In rotaZion, you play with a bubble bar that you can&#8217;t stop rotating !\nCollect the bubbles and try to avoid the mines !\nCollect the different bonus to protect your bubble bar, makes the mines go slower or destroy all the mines !\nTry to beat 100.000 points ;)\n",
    "instructions" => "Move the bubble bar with the arrow keys !\nBubble = 500 Points !\nPixtiz sign = 5000 Points !\n"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T02:50:34.587

你可以尝试这样的事情。我建议为您想要的游戏内部元素创建一个数组，然后对其进行迭代。我确信有一种方法可以在 Nokogiri 中获取指定元素中的所有元素，但这有效：

```
 xml = Nokogiri::XML(result)
    xml.css("game").each do |inv|
      inv.css("title").each do |f|  # title or whatever else you want
        puts f.inner_html
      end
    end 
```

# java - 在单个进度条中下载文件

> ID：14107183
> 
> 赞同：0
> 
> 时间：2013-01-01T01:08:01.620
> 
> 标签：java, android, android-asynctask, progress-bar

我有一个由 a 管理的进度条，`AsyncTask`它从 Internet 下载一些文件。

```
private class DownloadImgs extends AsyncTask<Void, String, Void> {

            @Override
            protected void onPreExecute() {
                super.onPreExecute();
                showDialog(progress_bar_type);
            }

            @Override
            protected Void doInBackground(Void ...params) {
               for(GetCountry gc : listCountry){
           getdownloadedFiles(gc.getUrl());}

           return null;

            }

            protected void onProgressUpdate(String... progress) {

                pDialog.setProgress(Integer.parseInt(progress[0]));
           }

            @Override
            protected void onPostExecute(Void result) {

                dismissDialog(progress_bar_type);

            } 
```

允许我下载文件的方法：

```
public void getdownloadedFiles(String url)

            {

                int count;
                 try {

                  URL urlImg = new URL(url);
                  URLConnection connection = urlImg.openConnection();
                  connection.connect();

                  int lenghtOfFile = connection.getContentLength();
                  InputStream input = new BufferedInputStream(urlImg.openStream(), 8192);

                  OutputStream output = new FileOutputStream(folder+"/"+name);

                  byte data[] = new byte[1024];

                  long total = 0;

                  while ((count = input.read(data)) != -1) {
                      total += count;

                     publishProgress(""+(int)((total*100)/lenghtOfFile));

                      output.write(data, 0, count);

                  }

                  output.flush();           
                  output.close();
                  input.close();

                 } catch (Exception e) {
                     e.getMessage();
                 }

            } 
```

这段代码运行良好，但问题是每个下载的文件都有自己的进度条我想要所有下载的文件只有一个进度条。

我怎样才能做到这一点？非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T04:12:31.227

将多个 URL 传递给您的异步任务。

```
new DownloadImgs().execute(URL1,URL2,URL3); 
```

它会将整个进度显示为单个进度条。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T04:26:49.597

在您的`doInBackground()`方法中，只需在`AsyncTask`. 您可能还应该利用 varargs 的性质`execute()`来传递您需要下载的 URL 列表。换句话说，接近这个的东西：

```
DownloadImgs task = new DownloadImgs();
task.execute(url1, url2, url3, url4, url5); 
```

修改任务如下：

```
private class DownloadImgs extends AsyncTask<String, String, Void> {

    @Override
    protected Void doInBackground(String ...params) {

        for (String url : params) {
            getdownloadedFiles(url);
        }

        return null;
    }

    public void getdownloadedFiles(String url) {
        /* Existing code */
    }

    /* Other methods unchanged */
} 
```

**编辑：**

您可以用来将所有文件下载显示为单个连续进度指示器的一种方法是仅通过文件计数而不是文件内容来更新进度。换句话说，如果您有 5 个文件，`publishProgress()`其值为 20 (1 * 100 / 5)、40 (2 * 100 / 5)、60 (3 * 100 / 5)、80 (4 * 100 / 5) 和每个文件下载结束时 100 (5 * 100 / 5)。

如果您需要更精细的内容而不预先获取每个文件的内容长度，请使每个块按百分比递增。请注意，您还可以将进度条的最大级别设置为`setMax()`100 以外的其他值，以使数学更易于使用。在相同的 5 个文件示例中，您可以将进度条最大值设置为 500，并且对于每次下载，您仍会以与现在相同的方式将 100 添加到总数中，但总数不会在每次下载开始时重置.

# php - 第一个单词仅出现在表单文本框中

> ID：14107185
> 
> 赞同：5
> 
> 时间：2013-01-01T01:08:27.267
> 
> 标签：php, textbox

是的，我在除夕夜编码。无论如何，我有一个我认为是奇怪的问题（奇怪到需要帮助）。以下代码有效（有点）。第 6 行的回显 ($row["sitename"]) 输出一个全名，如“Huntington Park”，但是......表单内的第一个文本框仅显示“Huntington”，而不是名称的第二部分。下面是屏幕截图。

```
 $query = "SELECT * FROM `siteinformation` 
            WHERE `id` = '".$sitedrop."'";
            echo $query;
    $results = $pdo->query($query);
        while ($row = $results->fetch()) { 
        echo $row["sitename"].'
            <form action="dummypage.php" method="post">
            <table width="526">
              <tr>
                <td width="520" align="right"><p>Site Name: 
                    <input type="text" name="sitename" value='.$row["sitename"].'>
                 </p>
                  <p>Program: 
                    <input type="text" name="program" value='.$row["program"].'>
                  </p>
                  <p>Phone: 
                    <input type="text" name="sitephone" value='.$row["sitephone"].'>
                  </p>
        </td>
        </tr>
        </table>
</form>';
        } 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-01T01:13:18.427

您的代码输出：

```
<input type="text" name="sitename" value=Huntington Park> 
```

它应该是：

```
<input type="text" name="sitename" value="Huntington Park"> 
```

改变：

```
 <input type="text" name="sitename" value='.$row["sitename"].'> 
```

到：

```
 <input type="text" name="sitename" value="'.$row["sitename"].'"> 
```

由于该值不在引号中 - 它只选择第一个字符串！您应该对其他输入执行相同的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T01:19:04.890

您可能会发现使用 HEREDOC 表示法很有用。 [http://php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc](http://php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)

```
$results = $pdo->query($query);
$out = NULL;
while ($row = $results->fetch()) 
{ 
    $out. = <<<ENDOUT
    $row["sitename"]
    <form action="dummypage.php" method="post">
    <table width="526">
    <tr>
    <td width="520" align="right">
    <p>Site Name: 
    <input type="text" name="sitename" value="{$row["sitename"]}" />
    </p>
    <p>Program: 
    <input type="text" name="program" value="{$row["program"]}" />
    </p>
    <p>Phone: 
    <input type="text" name="sitephone" value="{$row["sitephone"]}" />
    </p>
    </td>
    </tr>
    </table>
    </form>
ENDOUT;
}
echo $out; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T01:45:25.490

改变：

```
<input type="text" name="sitename" value='.$row["sitename"].'> 
```

到：

```
<input type="text" name="sitename" value="'.$row["sitename"].'"> 
```

# javascript - 是否可以创建无限维 JavaScript 数组？

> ID：14107187
> 
> 赞同：0
> 
> 时间：2013-01-01T01:09:16.460
> 
> 标签：javascript

我正在尝试在 JavaScript 中创建（或模拟）一个无限维数组。本质上，这将是一个将对象与整数列表（可以是任何长度）相关联的数据结构。有没有一种有效的方法来存储这个数据结构中的每个元素？

```
function addElement(theObject, coordinates){
    //object is the object, and coordinates is the list of coordinates (any number of coordinates will be accepted, since it's infinite-dimensional)
}

function getObject(coordinates){
    //get the object that was previously assigned to this list of coordinates
}
addElement("Hello World", [0, 0, 3, 5]);
console.log(getObject([0, 0, 3, 5])); //this would print "Hello World". 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T01:24:18.867

除非有任何理由你不能，否则我只会使用坐标作为索引，并在那里存储东西：

```
var coordinates = [];
var testCoord = [0,0,3,5];
coordinates[testCoord] = "Hello World";
console.log(coordinates[testCoord]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T01:14:02.293

绝对地。只需循环：

```
(function() {
  var store = [];
  window.addElement = function(theObject,coordinates) {
    var t = store, l = coordinates.length, i;
    for(i=0; i<l-1; i++) {
      if( typeof t[coordinates[i]] !== "undefined" && !(t[coordinates[i]] instanceof Array))
        (function(old) {(t[coordinates[i]] = []).toString = function() {return old;};})(t[coordinates[i]]);
      t = t[coordinates[i]] = t[coordinates[i]] || [];
    }
    t[coordinates[i]] = theObject;
  }
  window.getObject = function(coordinates) {
    var t = store, l = coordinates.length, i;
    for(i=0; i<l-1; i++) {
      t = t[coordinates[i]];
      if( !(t instanceof Array)) throw new Error("Invalid coordinate");
    }
    return t[coordinates[i]];
  }
})();

addElement("Hello World",[0,0,3,5]);
console.log(getObject([0,0,3,5])); 
```

# objective-c - 动态生成枚举参数？

> ID：14107193
> 
> 赞同：0
> 
> 时间：2013-01-01T01:10:11.000
> 
> 标签：objective-c, regex, cocoa, enums

我正在开发一个 Cocoa for Mac OS X 应用程序，它为 NSRegularExpression 搜索提供了一系列选项。这些选项表示为枚举，如下所示：

```
enum {
NSRegularExpressionCaseInsensitive             = 1 << 0,
NSRegularExpressionAllowCommentsAndWhitespace  = 1 << 1,
NSRegularExpressionIgnoreMetacharacters        = 1 << 2,
NSRegularExpressionDotMatchesLineSeparators    = 1 << 3,
NSRegularExpressionAnchorsMatchLines           = 1 << 4,
NSRegularExpressionUseUnixLineSeparators       = 1 << 5,
NSRegularExpressionUseUnicodeWordBoundaries    = 1 << 6
};
typedef NSUInteger NSRegularExpressionOptions; 
```

我想让用户从这些选项中的任何一个中进行选择（这是一系列复选框），然后将结果传递给方法*regularExpressionWithPattern:options:error:*。我将这些选项作为整数接收，因此用户可能会选择 0 和 5，例如。

我无法弄清楚这里的正确技术是什么。*options*参数采用按位 OR 运算符的整数，但是如何根据用户在这些复选框中的选择动态构建它，以便将其传递给该方法调用？

这是一个幼稚且不正确的尝试：

```
for (NSButtonCell * cell in [sender selectedCells]) {
    NSNumber * tag = [NSNumber numberWithInteger:[cell tag] - 1];
    [self.optionsString stringByAppendingString:[NSString stringWithFormat:@"%@|", [tag stringValue]]];
} 
```

显然，*options*不需要 NSString。但我希望这能澄清我在做什么，以便您理解这个问题！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T01:21:37.803

您只需要按位或选择的选项。`|=`运算符让您可以简洁地执行此操作。

如果您的单元格标记为 0 到 6：

```
NSUInteger options = 0;
for (NSButtonCell * cell in [sender selectedCells])
    options |= (1 << [cell tag]); 
```

我不太明白您为什么要从`[cell tag]`示例代码中减去一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T01:42:25.920

如果您使用位的 int 值。（即 1、2、4、8.. 等）

您可以将它们按原样用于 True 选择。

```
NSRegularExpressionOptions selectedOptions = 0;
for (NSButtonCell * cell in [sender selectedCells]) {
    selectedOptions = selectedOptions | tag.unsignedIntegerValue;
} 
```

因为这些值是标志，所以您可以使用按位或 ( | ) 来生成任何一个值中的任何标志。

只需确保将标签设置为您要使用的 int 值。（即 1、2、4、8、16、32 和 64）

或者你可以把它们加起来。

它们的位值如下。

```
enum {
    NSRegularExpressionCaseInsensitive             = 1 << 0,
    NSRegularExpressionAllowCommentsAndWhitespace  = 1 << 1,
    NSRegularExpressionIgnoreMetacharacters        = 1 << 2,
    NSRegularExpressionDotMatchesLineSeparators    = 1 << 3,
    NSRegularExpressionAnchorsMatchLines           = 1 << 4,
    NSRegularExpressionUseUnixLineSeparators       = 1 << 5,
    NSRegularExpressionUseUnicodeWordBoundaries    = 1 << 6
};

    NSRegularExpressionCaseInsensitive             == 0b00000001; // (1)
    NSRegularExpressionAllowCommentsAndWhitespace  == 0b00000010; // (2)
    NSRegularExpressionIgnoreMetacharacters        == 0b00000100; // (4)
    NSRegularExpressionDotMatchesLineSeparators    == 0b00001000; // (8)
    NSRegularExpressionAnchorsMatchLines           == 0b00010000; // (16)
    NSRegularExpressionUseUnixLineSeparators       == 0b00100000; // (32)
    NSRegularExpressionUseUnicodeWordBoundaries    == 0b01000000; // (64) 
```

它们的值通过“按位或 (|)”以及加法等价

```
 Via Addition            NSUInteger value = 2 + 4;
    or bitwise or ( | )     NSUInteger value = 2 | 4;
    Even with Bitshifting   NSUInteger value = (1 << 1) + (1 << 2);
                            NSUInteger value = (1 << 1) | (1 << 2);

     0b00000010   (2)
    +0b00000100  +(4)
    -----------   ---
     0b00000110   (6) 
```

按位或派上用场的地方是打开标志。

```
 (addition)
     0b00000010   (2)
    +0b00000110  +(6)
    -----------   ---
     0b00001000   (8)

       (bitwise or)
     0b00000010   (2)
    |0b00000110  |(6)
    -----------   ---
     0b00000110   (6) 
```

因为或仅打开“Both”值中的标志。你得到和你开始的一样的东西。

一个更复杂的例子就是这个。

```
 (bitwise or)
     0b00010010   (18)
    |0b00000110  |(6)
    -----------   ---
     0b00010110   (22)

       (addition)
     0b00010010   (18)
    +0b00000110  +(6)
    -----------   ---
     0b00011000   (24) 
```

如你看到的。他们有不同的目的。并且了解差异很重要。

# ruby-on-rails - 如何对子类的单表继承子类的查找结果进行分组

> ID：14107196
> 
> 赞同：1
> 
> 时间：2013-01-01T01:10:37.847
> 
> 标签：ruby-on-rails, ruby-on-rails-3, single-table-inheritance

我有三个 STI 课程。

```
class Media < ActiveRecord::Base

end

class Music < Media

end

class CD < Music

end 
```

1.  当我做 Media.all => 我从音乐类和 CD 类中获取对象。

2.  但是，当我做 Music.all => 时，我只从 Music 类中获取对象。

我希望 Music.all 从 Music 和 CD 类返回对象。这可能吗，我该如何实现。下午的大部分时间我都在谷歌上搜索，但没有遇到任何可以帮助我实现目标的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T01:16:04.730

您可以做的一件事是覆盖类`all`中的方法`Music`。

```
def self.all
  super + CD.all
end 
```

`+`将所有实例连接到所有`CD`实例的结果集数组`Music`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T02:11:00.000

**单表继承 (STI)：继承模型的 HOWTO 范围记录？**

**解决方案 1：** ActiveRecord 开发人员提供的方式，但由于某种原因，默认情况下它多年来无法正常工作！[为什么？]

```
class Media < ActiveRecord::Base
  ...
end

class Music < Media
  def self.descendants
    super|[CD]
  end
end

class CD < Music
  ...
end

# Result:

Music.where(:name => "Pink Floyd").to_sql
#=> SELECT "medias".* FROM "medias" WHERE "medias"."type" IN ('Music', 'CD') AND "medias"."name" = "Pink Floyd" 
```

**解决方案2：**直接自定义'STI'类型条件：

```
class Music < Media
  private
  def self.type_condition(*args)
    super.tap {|arel_node| arel_node.right << "CD"}
  end
end 
```

# vim - Vim，删除两行之间的空格

> ID：14107198
> 
> 赞同：7
> 
> 时间：2013-01-01T01:12:36.057
> 
> 标签：vim

给出以下内容：

```
{
    int a = 123;
    int b = 456;
} 
```

我想将其更改为：

```
{
    int a = 123;int b = 456;
} 
```

如果我使用的是常规文本编辑器，我会转到第二行，然后`Home`, `Shift`+ `Up`, `Shift`+ `End`,`Delete`

vim 这样做的方法是什么？它应该适用于第 1 行和第 2 行之间的任意数量的空白。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-01T01:14:42.333

试试这个`J`命令。它连接两条线（应用于第一条线）。如果你想连接两条线，很容易被几条空线隔开，你也可以在可视模式（`V`）中选择两条线之间的线，然后应用`J`。

但是，该命令在连接的行之间插入一个空格（[在大多数情况下......](http://vimdoc.sourceforge.net/htmldoc/change.html#J)）。

根据您的要求，您可以使用`gJ`不会在行之间插入（或删除）任何空格的变体。

# replace - Sublime text 2 - 全局查找和替换（所有文件和所有目录）

> ID：14107208
> 
> 赞同：125
> 
> 时间：2013-01-01T01:13:40.393
> 
> 标签：replace, ide, find, sublimetext2, global

有什么办法`find and replace text string automatically in all folder's files`吗？

* * *

## 回答 #1

> 赞同：247
> 
> 时间：2013-01-01T07:39:46.537

是的，有[多个文件搜索和替换](http://docs.sublimetext.info/en/latest/search_and_replace/search_and_replace_files.html)。

按`ctrl``shift``F`（`cmd``shift``F`在 MacOS 上）：

![在此处输入图像描述](../Images/b863cdcfa03b30391ede8ae4bbb0749d.png)

在该`Where`字段中，您还可以添加过滤器以仅搜索您需要的文件夹和文件。如果未设置任何内容，则搜索边栏中列出的所有文件。

如果你双击搜索结果的一行，Sublime 会跳到那一行。

请注意搜索栏中的这些图标：

![在此处输入图像描述](../Images/4f095d28395fe286b1d98b7f57a2d200.png)

第一个（*显示上下文*）以结果格式切换上下文（如果启用，一些文本行会显示在匹配行之前和之后）。第二个允许在新缓冲区或控制台中显示结果。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-04-22T20:29:14.010

按`ctrl``shift``F`(`cmd``shift``F`在  Mac OS X 上 :) 然后`*.*`输入该`where:`字段

这将打开对项目中所有文件的搜索，而不是仅打开文件或文件夹。

您还可以使用它来仅搜索特定类型的文件，或使用特定名称而不考虑类型的文件。它只是文件名和扩展名的通配符。

# javascript - 为什么 jquery :not() 选择器没有像我期望的那样工作？

> ID：14107212
> 
> 赞同：6
> 
> 时间：2013-01-01T01:14:35.433
> 
> 标签：javascript, jquery, css

我正在尝试设置一个在单击没有`.four`类的任何内容时触发的事件。但是，`.four`即使我使用的是`e.stopPropagation()`.

```
$("html").one("click", ":not(.four)", function(e){
   e.stopPropagation();
   console.log("Something without class 'four' was clicked that had class: " + $(e.srcElement).attr("class") );
}); 
```

​( [jsFiddle 演示](http://jsfiddle.net/brentonstrine/KUL9U/))

这也不起作用：

```
$("html").not('.four').on("click", function(e){ 
```

两个输出：`Something without class 'four' was clicked that had class: four`

我遇到了很多麻烦，`:not()`我怀疑很多可能与我`:not()`现在支持 CSS3 的浏览器有关，但我仍然无法理解这个简单的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T01:53:05.530

你的代码：

```
$("html").one("click", ":not(.four)", function(e){
    e.stopPropagation();
    // other code
}); 
```

为点击事件类型设置全局事件委托。这意味着每当页面上的**任何**元素触发 click 事件时，jQuery 都会检查该元素是否与提供的选择器匹配`":not(.four)"`- 如果匹配，jQuery 将调用该元素上的处理程序。

当您单击一个`.four`元素时会发生以下情况：

1.  触发点击事件的原始元素显然是`.four`元素。jQuery 检查该元素是否与`":not(.four)"`选择器匹配。因为它没有，所以**不会**在该元素上调用处理程序。

2.  点击事件在 DOM 树中冒泡。由于尚未取消此单击事件的传播，因此该事件在下一个元素处触发，该元素是原始元素的父元素 -`.two`您演示中的元素。同样，jQuery 检查元素是否与选择器匹配。既然这样做了，就会在该元素上调用处理程序。

如您所见，即使您单击一个元素，*也会调用您的处理程序。*`.four`为了防止在`.four`单击元素时执行代码，您必须在处理程序中显式检查 - 基本上是 Jason 的解决方案所做的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T02:19:56.177

Here is a solution I want to contribute. Put this listener alongside the other one:

```
$("html").one("click", ".four", function(e){
       e.stopPropagation();
});
$("html").one("click", function(e){
    // other code
}); 
```

It will prevent propagation on `.four` and "steal" or "catch" it from bubbling up to the other listener. It might be helpful to have the "catcher" listener at a lower level than the other one, depending on if it bubbles up to one before the other.

See the [jsFiddle demo](http://jsfiddle.net/brentonstrine/KUL9U/66/), working, finally!

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-01T01:22:14.267

正如 Šime Vidas 指出的那样，这是理想的解决方法：

```
function doThisOnce(e) {
   e.stopPropagation();

   if(!$(this).is(".four")){
        console.log("Something without class 'four' was clicked that had class: " + $(e.srcElement).attr("class"));
        $(".one").addClass("pretty");
    }
    else {
        // need to rebind the click event
        $(document).one("click", "*", doThisOnce);
    }
}
$(document).one("click", "*", doThisOnce); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-01T02:15:41.703

这是使用事件的另一种方法`target`：

```
$(document).one("click", function(e){
    if( ! $(e.target).closest('.four').length ){
         console.log("Something without class 'four' was clicked that had class: " + $(e.srcElement).attr("class") );
     }
}); 
```

`closest()`将匹配类的孩子以及类元素本身

# javascript - mongodb:close 退出 mongod

> ID：14107215
> 
> 赞同：0
> 
> 时间：2013-01-01T01:14:42.830
> 
> 标签：javascript, c, mongodb

我已经`mongodb`在我的机器上启动，日志转到`/usr/local/var/log/mongodb/mongo.log`. 当我执行任何查询/插入/删除/更新时，操作也会记录到该文件中。

我怎样才能抑制这些消息？我更改了配置文件并设置了以下值：

```
verbose=v
quiet=true 
```

但它们不起作用，我仍然在日志文件中得到详细的日志记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T05:07:17.117

您应该删除或注释掉（使用“#”）的配置条目`verbose=v`。您设置为 1`v`相当于增加了级别 1 的日志消息传递（每增加一个`v`都会增加日志记录的详细信息）。

[默认](http://docs.mongodb.org/manual/reference/configuration-options/#verbose)的详细级别是“false”，这将不那么详细。

# c++ - 模板类中模板函数的相同类型

> ID：14107220
> 
> 赞同：1
> 
> 时间：2013-01-01T01:15:48.507
> 
> 标签：c++, templates, function-templates, class-template

我有以下代码：

```
#include <iostream>
using namespace std;

template<typename T> class myclass {
public:
    T data;

    myclass(T const & _data = T()) : data(_data) {}

    template<typename U> myclass<T> & operator=(myclass<U> const & rhs) {
        cout << data << " = " << rhs.data << endl;
        return *this;
    }
};

int main() {
    myclass<double> first(1);
    myclass<float> second(2);
    myclass<double> third(3);
    first=second;
    first=third;
} 
```

现在，虽然它编译得很好，但输出只是：

```
1 + 2 
```

为什么 first=third 不打电话给

```
myclass<double> & operator=(myclass<double> const & rhs) 
```

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T01:24:02.753

复制赋值运算符绝不是函数模板。由于该类没有声明复制赋值运算符，编译器生成一个并使用这个生成的运算符。如果您添加这样的运算符，您将看到分配：

```
myclass<T>& operator= (myclass<T> const& rhs) {
    std::cout << "(copy) " << data << " = " << rhs.data << '\n';
    return *this;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T01:24:09.917

复制赋值运算符永远不是模板。由于您没有定义一个，因此为您定义了一个默认版本（不打印任何内容）。

# multidimensional-array - 在 Julia 中构造一个多维数组

> ID：14107226
> 
> 赞同：4
> 
> 时间：2013-01-01T01:17:39.003
> 
> 标签：multidimensional-array, julia

在 MATLAB 中，可以使用以下语法创建一维矩阵`a`和二维矩阵`b`：

```
a = [2,3]
b = [2,3;4,5] 
```

`a`在 Julia 中，使用相同的语法构造一维数组是可行的。但是，使用相同的语法构造二维数组`b`会失败。

定义`b`如下工作：

```
b = cat(2,[2,4],[3,5]) 
```

是否有在 Julia 中显式定义二维数组的语法快捷方式？如果是这样，它是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T16:02:37.583

你也可以说 [1 2; 3 4]，它给出了与 Matlab 中相同的结果。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-01T20:57:45.330

您可能正在寻找这个：

```
a = [2,3]
b = [2 3;4 5] 
```

这是 Julia 文档的“[与 MATLAB 的主要区别](http://docs.julialang.org/en/latest/manual/getting-started/#major-differences-from-matlab)”部分的相关段落：

> 使用语法`[x,y,z]`连接标量和数组在第一维（“垂直”）中连接。对于第二个维度（“水平”），使用空格，如`[x y z]`. 为了构造块矩阵（在前两个维度中连接），使用语法`[a b; c d]`来避免混淆。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T01:18:57.237

以下语法有效（但不如 MATLAB 等效语法那么简洁）：

```
b = [[2 3],[4 5]] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-11T13:43:53.820

从 Julia 0.6 开始，根据您寻求的维度，您可以使用

```
# hcat
b = [[2, 3] [4, 5]]
2×2 Array{Int64,2}: [2 4; 3 5]

# vcat
c = [[2 3] ; [4 5]]
2×2 Array{Int64,2}: [2 3; 4 5] 
```

# database - 如何知道oracle数据库服务器ip？

> ID：14107229
> 
> 赞同：2
> 
> 时间：2013-01-01T01:18:55.917
> 
> 标签：database, oracle10g

oracle 数据库中是否有任何功能可以提供数据库正在运行的当前连接的服务器名称（或 ip）？

其他方式的问题，在 oracle tnsnames.ora 文件中我有以下内容

```
ORA9 =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = TCP)(HOST = 192.168.14.208)(PORT = 1521))
      (ADDRESS = (PROTOCOL = TCP)(HOST = 192.168.14.209)(PORT = 1521))
    )
    (CONNECT_DATA =
      (SERVICE_NAME = orcl)
    )
  ) 
```

如何知道我的应用程序中连接的服务器ip是192.168.14.208还是192.168.14.209？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T01:21:52.197

尝试：

```
SELECT UTL_INADDR.get_host_address from dual; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-03T11:45:05.900

PFB 在 SQL 环境中可以识别 oracle 数据库服务器 IP 的一些方法。

获取您连接到的数据库的服务器 IP。

`SELECT UTL_INADDR.get_host_address FROM dual;`

根据服务器主机名获取服务器 IP

`SELECT UTL_INADDR.get_host_address('hostname') FROM dual;`

获取从中调用查询的主机系统的 IP 详细信息。

`SELECT SYS_CONTEXT('USERENV','IP_ADDRESS') FROM dual;`

链接中的附加信息[。](https://oracle-base.com/articles/misc/identifying-host-names-and-addresses)

# ruby - 如何检查对象的 ID 是否存在于数组中？

> ID：14107235
> 
> 赞同：0
> 
> 时间：2013-01-01T01:20:07.047
> 
> 标签：ruby, arrays, ruby-on-rails-3, logic

这是我正在尝试编写的逻辑，但我找不到正确的 Ruby 方式来表达它：

```
if Object.id [occurs in this array ->] [13, 16, 234]
   #run this code if true
else
   #run this code if false
end 
```

基本上，如果 id 出现在特定数组中的某处，我想返回 true。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T01:25:04.340

我认为您正在寻找[Array#include？](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-include-3F)：

```
if [13, 16, 234].include? Object.id
    #run this code if true
else
    #run this code if false
end 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-01T01:29:05.540

### 使用数组#include？

一种方法是翻转逻辑并查询数组，而不是实例对象，以便使用[Array#include?](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-include-3F) 方法。例如：

```
[13, 16, 234].include? my_object.id 
```

这将返回一个布尔值，您可以将其插入分支逻辑。

# objective-c - 使用“自我”更新 UITextField。仅在 viewDidLoad 上工作

> ID：14107237
> 
> 赞同：2
> 
> 时间：2013-01-01T01:20:24.003
> 
> 标签：objective-c, ios, uitextfield

我`UITextField`在`MainStoryboard`. 它在以下位置设置和链接`ViewController.h`：

```
@property (retain, nonatomic) IBOutlet UITextField *finalTextField; 
```

在`ViewController.m`我有`@synthesize finalTextField;`之后`@implementation ViewController`

在该`-viewDidLoad`区域中，我可以`UITextField`使用以下代码成功更新它：

```
self.finalTextField.text = @"99"; 
```

这工作得很好。

*但是，如果我在其他任何地方*使用相同的代码更新相同的 TextField ，`ViewController.m`我将继续收到错误：

> “*使用未声明的标识符‘self’* ”

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T01:37:09.973

```
void decode(NSString* textToDecode) { ... } 
```

不是方法，它是“c”函数，因此*不是*类的一部分，并且无法访问实例变量。使其成为一种方法，例如：

```
- (void)decodeText:(NSString *)text { ... } 
```

@David Brunow 的评论暗示了同样的事情。

# android - android是否不断产生错误？

> ID：14107240
> 
> 赞同：0
> 
> 时间：2013-01-01T01:21:22.703
> 
> 标签：android, intellij-idea, logcat

在 IntelliJ IDEA 的 Android 目录中，有一个“错误”过滤器。通过 USB 连接我的 Android 手机，我发现每当我进行操作时，例如浏览菜单、打开或关闭应用程序，或在我正在设计的应用程序中进行的任何操作，LogCat 都会出现错误行。

大部分都是ActivityThread的错误，比如

```
12-31 19:58:57.149: ERROR/ActivityThread(16017): >>> handling: 124
12-31 19:59:07.819: ERROR/ActivityThread(28993): >>> handling: 124
12-31 19:59:11.270: ERROR/ActivityThread(273): >>> handling: 113
12-31 19:59:11.290: ERROR/ActivityThread(273): >>> handling: 114
12-31 19:59:11.300: ERROR/ActivityThread(273): >>> handling: 115
12-31 19:59:11.470: ERROR/ActivityThread(273): >>> handling: 116
12-31 19:59:11.490: ERROR/ActivityThread(273): >>> handling: 119 
```

第二个最常见的是音频错误（请注意，我的手机处于静音状态）

```
12-31 19:56:18.760: ERROR/AudioPolicyManagerBase(97): getDeviceForStrategy() from cache strategy 0, device 2
12-31 19:56:18.760: ERROR/AudioPolicyManagerBase(97): getNewDevice() selected device 2
12-31 19:56:18.760: ERROR/AudioHardwareMSM72XX(97): Routing audio to Speakerphone
12-31 19:56:18.760: ERROR/AudioHardwareMSM72XX(97): [FM]sndDevice(6) mCurSndDevice(6) mFM(0)
12-31 19:56:18.760: ERROR/AudioHardwareMSM72XX(97): rpc_snd_set_volume(28, 0, 7) 
```

我的一个错误涉及我的 USB，尽管我相信这是因为在调试期间重新启动应用程序时它断开了连接。

```
12-31 19:43:51.170: ERROR/Tethering(150): active iface (usb0) reported as added, ignoring 
```

为什么会发生所有这些错误？Android 是否总是会导致错误并修复它们？Androids 结构中是否存在持续产生这些错误的根本缺陷？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T01:38:13.780

> 为什么会发生所有这些错误？

根据我对 Android 源代码的阅读，这些消息都不应该以错误严重程度记录。它们都以信息或详细的严重性记录，而不是错误。

我首先会在 IntelliJ 之外检查 LogCat，例如通过`monitor`SDK`tools/`目录中的程序及其 DDMS 副本。如果您在那里看到以适当级别记录的内容，那么 IntelliJ 可能在向您显示这些消息的方式上存在错误。

否则，如果我不得不猜测，谁让你的 ROM 搞砸了，将所有这些事情升级为错误严重性。如果这是一个 ROM 模组，请向模组制造商投诉。如果这是生产 ROM，请向您的设备制造商投诉。

# php - 检查记录是否来自 table_b

> ID：14107243
> 
> 赞同：2
> 
> 时间：2013-01-01T01:21:43.707
> 
> 标签：php, mysql

我有两个表（table_a 和 table_b）与一个 UNION 相结合。

如何检查是否记录 ist table_a。

我试过这个，但不工作：

```
$res=mysql_query("(SELECT id, added FROM table_a WHERE user_id = '".$uid."') 
UNION 
(SELECT id as comments, added FROM table_b WHERE user_id = '".$uid."') ORDER BY added DESC LIMIT 50");

if(!empty($rows["comments"])) // not working 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T01:24:48.807

它不起作用，因为您忘记阅读结果集：

```
while ($row = mysql_fetch_assoc($res)) {
// here you read $rows["comments"] etc
...

} 
```

**重要提示：**
请不要使用`mysql_*`函数，它已被弃用（见[*红色框*](http://php.net/manual/en/function.mysql-query.php)）并且容易受到 sql-injection 的影响。
使用[*PDO*](http://php.net/manual/en/book.pdo.php)或[*MySQLi*](http://php.net/manual/en/book.mysqli.php)。

**更新：**
如果您想知道结果“来自”哪个表，您可以将查询更改为：

```
(SELECT id, added, 'A' as came_from FROM table_a WHERE user_id = '".$uid."') 
UNION 
(SELECT id as comments, added, 'B' as came_from FROM table_b WHERE user_id = '".$uid."') ORDER BY added DESC LIMIT 50 
```

然后检查以下值：`$rows["came_from "]`

# php - mysql 表中的 NULL 值阻止记录可搜索

> ID：14107248
> 
> 赞同：0
> 
> 时间：2013-01-01T01:22:30.850
> 
> 标签：php, mysql

当谈到 php 和 mysql 时，我有点像周末战士。我大部分时间使用 Dreamweaver 8 来构建我的代码，但必要时在 TextWrangler 中进行一些手动编码。

我有一个有 28 列的表，目前有 1224 行（并且正在增长）。我使用 DW8 构建高级搜索页面的代码。它工作得很好，**除了**如果一行在一个或多个列中有 NULL （其中很多列），它将不会检索该记录。这是个问题。我需要它忽略 NULL 值并无论如何检索记录。

我发现如果我将表中的所有记录修改为 NULL 以外的内容，例如空格或破折号，查询将找到记录。输入新记录时，表中将添加新的 NULL，并且这些记录将不可搜索。

这些列必须允许 NULL，因为“添加记录”页面会插入到该表和另一个表中，并且它们必须按顺序排列。我发现如果我将列设置为不接受 NULL，则一个表接受数据，而另一个表拒绝数据，那么主键就会不同步。

```
<?php require_once('Connections/mediadb.php'); ?>
<?php $currentPage = $_SERVER["PHP_SELF"]; ?>

if (isset($_GET['pageNum_rsResults'])) {
$pageNum_rsResults = $_GET['pageNum_rsResults'];
}
$startRow_rsResults = $pageNum_rsResults * $maxRows_rsResults;

$varkind_rsResults = "-1";
if (isset($_GET['searchkind'])) {
  $varkind_rsResults = (get_magic_quotes_gpc()) ? $_GET['searchkind'] : addslashes($_GET['searchkind']);
}
$varcomments_rsResults = "-1";
if (isset($_GET['searchnotes'])) {
  $varcomments_rsResults = (get_magic_quotes_gpc()) ? $_GET['searchnotes'] : addslashes($_GET['searchnotes']);
}
$varrating_rsResults = "-1";
if (isset($_GET['searchrating'])) {
  $varrating_rsResults = (get_magic_quotes_gpc()) ? $_GET['searchrating'] : addslashes($_GET['searchrating']);
}
$varloc_rsResults = "-1";
if (isset($_GET['searchlocation'])) {
  $varloc_rsResults = (get_magic_quotes_gpc()) ? $_GET['searchlocation'] : addslashes($_GET['searchlocation']);
}
$vardiscnum_rsResults = "-1";
if (isset($_GET['searchdisc_number'])) {
  $vardiscnum_rsResults = (get_magic_quotes_gpc()) ? $_GET['searchdisc_number'] : addslashes($_GET['searchdisc_number']);
}
$vardisccnt_rsResults = "-1";
if (isset($_GET['searchdisc_count'])) {
  $vardisccnt_rsResults = (get_magic_quotes_gpc()) ? $_GET['searchdisc_count'] : addslashes($_GET['searchdisc_count']);
}
$vartrackcnt_rsResults = "-1";
if (isset($_GET['searchtrack_count'])) {
  $vartrackcnt_rsResults = (get_magic_quotes_gpc()) ? $_GET['searchtrack_count'] : addslashes($_GET['searchtrack_count']);
}
$vartracknum_rsResults = "-1";
if (isset($_GET['searchtrack_number'])) {
  $vartracknum_rsResults = (get_magic_quotes_gpc()) ? $_GET['searchtrack_number'] : addslashes($_GET['searchtrack_number']);
}
$varyear_rsResults = "-1";
if (isset($_GET['searchyear'])) {
  $varyear_rsResults = (get_magic_quotes_gpc()) ? $_GET['searchyear'] : addslashes($_GET['searchyear']);
}
$varmod_rsResults = "-1";
if (isset($_GET['searchmodified'])) {
  $varmod_rsResults = (get_magic_quotes_gpc()) ? $_GET['searchmodified'] : addslashes($_GET['searchmodified']);
}
$varadd_rsResults = "-1";
if (isset($_GET['searchdate_added'])) {
  $varadd_rsResults = (get_magic_quotes_gpc()) ? $_GET['searchdate_added'] : addslashes($_GET['searchdate_added']);
}
$varrecnum_rsResults = "-1";
if (isset($_GET['searchrecnum'])) {
  $varrecnum_rsResults = (get_magic_quotes_gpc()) ? $_GET['searchrecnum'] : addslashes($_GET['searchrecnum']);
}
$vartime_rsResults = "-1";
if (isset($_GET['searchtime'])) {
  $vartime_rsResults = (get_magic_quotes_gpc()) ? $_GET['searchtime'] : addslashes($_GET['searchtime']);
}
$vargenre_rsResults = "-1";
if (isset($_GET['searchgenre'])) {
  $vargenre_rsResults = (get_magic_quotes_gpc()) ? $_GET['searchgenre'] : addslashes($_GET['searchgenre']);
}
$vargroup_rsResults = "-1";
if (isset($_GET['searchgrouping'])) {
  $vargroup_rsResults = (get_magic_quotes_gpc()) ? $_GET['searchgrouping'] : addslashes($_GET['searchgrouping']);
}
$varalbum_rsResults = "-1";
if (isset($_GET['searchalbum'])) {
  $varalbum_rsResults = (get_magic_quotes_gpc()) ? $_GET['searchalbum'] : addslashes($_GET['searchalbum']);
}
$varcomp_rsResults = "-1";
if (isset($_GET['searchcomp'])) {
  $varcomp_rsResults = (get_magic_quotes_gpc()) ? $_GET['searchcomp'] : addslashes($_GET['searchcomp']);
}
$varartist_rsResults = "-1";
if (isset($_GET['searchartist'])) {
  $varartist_rsResults = (get_magic_quotes_gpc()) ? $_GET['searchartist'] : addslashes($_GET['searchartist']);
}
$varname_rsResults = "-1";
if (isset($_GET['searchname'])) {
  $varname_rsResults = (get_magic_quotes_gpc()) ? $_GET['searchname'] : addslashes($_GET['searchname']);
}
mysql_select_db($database_mediadb, $mediadb);
$query_rsResults = sprintf("SELECT recnum, name, artist, composer, album, `grouping`, genre, `time`,  year, date_modified, date_added, kind, comments, my_rating, location, track_number, track_count, disc_number, disc_count 
FROM media_lib
WHERE name LIKE '%%%s%%' AND artist LIKE '%%%s%%' AND composer LIKE '%%%s%%' AND album LIKE '%%%s%%' AND `grouping` LIKE '%%%s%%' AND genre LIKE '%%%s%%' AND `time` LIKE '%%%s%%' AND recnum LIKE '%%%s%%' AND date_added LIKE '%%%s%%' AND date_modified LIKE '%%%s%%' AND year LIKE '%%%s%%' AND track_number LIKE '%%%s%%' AND track_count LIKE '%%%s%%' AND disc_number LIKE '%%%s%%' AND disc_count LIKE '%%%s%%' AND kind LIKE '%%%s%%' AND comments LIKE '%%%s%%' AND my_rating LIKE '%%%s%%' AND location LIKE '%%%s%%'", $varname_rsResults,$varartist_rsResults,$varcomp_rsResults,$varalbum_rsResults,$vargroup_rsResults,$vargenre_rsResults,$vartime_rsResults,$varrecnum_rsResults,$varadd_rsResults,$varmod_rsResults,$varyear_rsResults,$vartracknum_rsResults,$vartrackcnt_rsResults,$vardiscnum_rsResults,$vardisccnt_rsResults,$varkind_rsResults,$varcomments_rsResults,$varrating_rsResults,$varloc_rsResults);
$query_limit_rsResults = sprintf("%s LIMIT %d, %d", $query_rsResults, $startRow_rsResults, $maxRows_rsResults);
$rsResults = mysql_query($query_limit_rsResults, $mediadb) or die(mysql_error());
$row_rsResults = mysql_fetch_assoc($rsResults);

if (isset($_GET['totalRows_rsResults'])) {
  $totalRows_rsResults = $_GET['totalRows_rsResults'];
} else {
  $all_rsResults = mysql_query($query_rsResults);
  $totalRows_rsResults = mysql_num_rows($all_rsResults);
}
$totalPages_rsResults = ceil($totalRows_rsResults/$maxRows_rsResults)-1;

$queryString_rsResults = "";
if (!empty($_SERVER['QUERY_STRING'])) {
  $params = explode("&", $_SERVER['QUERY_STRING']);
  $newParams = array();
  foreach ($params as $param) {
    if (stristr($param, "pageNum_rsResults") == false && 
        stristr($param, "totalRows_rsResults") == false) {
      array_push($newParams, $param);
    }
  }
  if (count($newParams) != 0) {
    $queryString_rsResults = "&" . htmlentities(implode("&", $newParams));
  }
}
$queryString_rsResults = sprintf("&totalRows_rsResults=%d%s", $totalRows_rsResults, $queryString_rsResults);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T14:24:27.897

您应该能够在您的子句中使用`ifnull`将`NULL`s 转换为（例如）空字符串。`WHERE`例如，`name LIKE '%%%s%%'`将成为`ifnull(name, '') LIKE '%%%s%%'`.

就像您当前的代码一样，它假定您设置了各种`$_GET`参数 -`-1`如果未设置参数，它将与您正在使用的参数不匹配。

# c# - ANTLR 在重写中返回不止一棵树

> ID：14107249
> 
> 赞同：0
> 
> 时间：2013-01-01T01:23:46.480
> 
> 标签：c#, multithreading, tree, antlr, abstract-syntax-tree

我正在寻找一种将 AST 输入到 tree walker 的方法，并对其进行重写，以便我可以获得多个输出。

我想这样做的原因是因为我的语言具有“模棱两可”的语义。在基本级别上，我有大约 12 种数据类型，但取决于您在树中看到它们的位置，以及在哪些运算符下，可能有多个输出。

然后我会将这些输出中的每一个传递给更多的树重写器，这又可以产生多个输出。我所拥有的本质上是一个组合爆炸，我正在寻找一种方法来处理它。

我希望能够保留所有可能的输出，而不是像传统编译器那样具有单个输出，以便我可以对用户说'我认为是这个......但它也可能是这个'。

我在想我可以克隆树节点流，并在一个单独的线程中将它传递给树重写器。这样我们就可以并行完成树的编写。

关于这些概念的可行性的任何想法或想法？

# java - Java 多线程 - 易失性布尔值不起作用？

> ID：14107252
> 
> 赞同：-1
> 
> 时间：2013-01-01T01:24:09.103
> 
> 标签：java, multithreading, volatile

所以我有 3 个线程会尝试找到一个随机生成的数字（每个线程都有自己的范围，即 startNum 和 finishNum）。如果其中一个因为找到数字而停止，我希望所有其他线程也停止。

我读过一个“易失性”布尔值，它显然是一个所有线程共享的布尔值，因此它始终为 1 值。

这是我拥有的代码：（注意：如果线程“停止”，而其他线程仍在进行中，则可以，因为它的 startNumber 超过了它的 finishNumber）

```
private volatile boolean numberFound = false;

public void run()
{
    while(startNum < finishNum) //what i'm talking about with the [note]
    {   
        search( startNum); 
        if(numberFound == true)
        {
            break;
        }       
    }   
}  
private synchronized void search(int startNum)
{
    for(int i = 0; i < 10; i++)
    {
        if( startNum != searchNum )
        {
            startNum++;
        }
        else if(startNum == searchNum )
        {
            numberFound = true;
            System.out.println( this.currentThread().getName() + " has found the number: " + searchNum );
            break;

        }

    }

} 
```

哦，还有，我让它循环 10 次，因为我希望程序在每个数字（线程）范围内检查数字 10 次，然后移动到另一个。

这是根据请求启动线程的 main() 方法： int randomNum = (int)(Math.random() * 1001);

```
 FindIt t1 = new FindIt(randomNum, 0, 349); //FindIt extends Thread
    FindIt t2 = new FindIt(randomNum, 350, 699);
    FindIt t3 = new FindIt(randomNum, 700, 1000);

    t1.start();
    t2.start();
    t3.start(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T01:28:20.907

看起来你的三个线程可能在这个类的不同实例中，因此会有 3 个不同的布尔值

尝试将布尔值设为静态，看看它是否改变了任何东西。

（我真的无法为您提供更多帮助，因为我没有看到启动线程的代码）

注意：易失性实际上并不意味着所有线程共享它，它意味着如果所有线程共享它，那么一个线程中的更改将反映在其他线程中的相同变量中。之所以需要它，是因为对于具有独立缓存的多 CPU 机器，一个线程可能会更新其版本，而另一个线程可能不会接收更改，因为它已经缓存了该内存......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T01:53:05.727

提到的答案`numberFound`必须`static`是正确的。并且关于锁定的`synchronized`内容也是正确的（尽管尚不清楚您是否*需要*在此处锁定......）。

但它是另一个与并发无关的错误导致您的直接问题。

```
while(startNum < finishNum) {   
    search(startNum); 
    if(numberFound == true)
    {
        break;
    }       
}

private synchronized void search(int startNum) {
    ... 
    if (startNum != searchNum) {
        startNum++;
    }
    ... 
```

问题是`startNum`您正在增加的 与您在循环`startNum`中测试的不同。`while`在 Java 中，参数是按值传递的。所以正在发生的事情是：

1.  您正在将方法中的值传递`startNum`给`run`方法`search`。
2.  该`search`方法将其放入局部变量中。
3.  该`search`方法更新局部变量。
4.  该`search`方法返回，并启动更新的局部变量。
5.  回到`run`方法中， 的值`startNum`没有改变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T01:36:31.860

numberFound 未声明为静态，因此每个线程都将独立设置自己的属性值。与同步方法相同 - 每个线程都将获得对自身的锁定，因此实际上同步搜索方法可能不是您想要的。你能更好地解释为什么你同步这个方法吗？这里是关于 volatile 的更多信息：[http ://www.javamex.com/tutorials/synchronization_volatile.shtml](http://www.javamex.com/tutorials/synchronization_volatile.shtml)

以及有关同步和锁定的更多信息：http: [//docs.oracle.com/javase/tutorial/essential/concurrency/locksync.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/locksync.html)

我建议有一个单独的对象，它将成为所有线程之间的共享资源 - 采用这种方法默认锁定将在共享对象本身上执行，因此线程将开始“争夺”对象上的锁定。

# python - 设置 cookie 并使用 Python 和 WSGI 检索它

> ID：14107260
> 
> 赞同：5
> 
> 时间：2013-01-01T01:26:32.270
> 
> 标签：python, ajax, cookies, wsgi

存在很多与此类似的问题，但没有一个能帮助我。基本上我正在使用 WSGI start_response() 方法[链接](http://www.python.org/dev/peps/pep-0333/#the-start-response-callable)。我尝试使用元组 [('Set-Cookie', 'token=THE_TOKEN')] 在响应中设置一个虚拟标头，并将其添加到启动响应中，如下所示：

```
status   = '200 OK'
response = 'Success'
start_response(status,[('Set-Cookie', "DMR_TOKEN=DMR_TOKEN")])
return response 
```

我不太确定它是否正常工作，但它在这里[设置 cookies](http://pylonsbook.com/en/1.1/the-web-server-gateway-interface-wsgi.html#changing-the-status-and-headers)。现在，让我们假设标头是正确的，并且在以下请求中我想验证令牌。捕获过去设置的 cookie/标头的正确方法是什么？

我一直在阅读，发现我需要这样的东西：

```
(environ.get("HTTP_COOKIE","")) 
```

但这一直在产生空字符串，所以我只是假设标头/cookie 设置不正确。

多谢你们

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-01T02:03:23.113

我认为您需要明确设置路径以从 cookie 中获取有用的行为，请尝试以下操作：...

```
from Cookie import SimpleCookie

def my_app(environ, start_response):
    session_cookie = SimpleCookie()
    session_cookie['session'] = "somedata"
    session_cookie['session']["Path"] = '/'

    headers = []
    headers.extend(("set-cookie", morsel.OutputString())
                    for morsel
                    in session_cookie.values())

    start_response("200 OK", headers) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-01-31T21:46:35.143

这是我想出的一个简单的解决方案，用于在 WSGI 中设置不需要外部库的 cookie：

```
def set_cookie_header(name, value, days=365):
    dt = datetime.datetime.now() + datetime.timedelta(days=days)
    fdt = dt.strftime('%a, %d %b %Y %H:%M:%S GMT')
    secs = days * 86400
    return ('Set-Cookie', '{}={}; Expires={}; Max-Age={}; Path=/'.format(name, value, fdt, secs))

def handler(env, start_response):
    content_type = 'text/html'
    headers = [('Content-Type', content_type), set_cookie_header('name', 'value')]
    start_response('200 OK', headers)
    ... 
```

# tsql - 如何在 SQL Server 的文本字段中搜索名称

> ID：14107261
> 
> 赞同：0
> 
> 时间：2013-01-01T01:26:49.130
> 
> 标签：tsql, soundex

我需要从 SQL Server 中的文本字段中编辑专有名称。假设我有下表：

```
PersonTable
    FirstName
    LastName
    Notes 
```

我可以这样做：

```
UPDATE PersonTable
SET Notes = REPLACE(REPLACE(Notes, FirstName, 'REDACTED'), LastName, 'REDACTED') 
```

这对于完全匹配条件应该可以正常工作，但是如果有人在“备注”字段中拼错了名字或姓氏，或者更糟糕的是，使用了 Jim 这样的昵称怎么办？

*我认为使用包含*的全文搜索对于这种偏差是基于含义或派生的事情很有用，但它适用于名称吗？即使它适用于查找 Notes 包含名称的行，我认为它不适用于 Replace 场景。

我也考虑过 SOUNDEX，但我也没有看到如何使用替换文本字段来做到这一点。我可以看到使用 Soundex 或类似方法的唯一方法是将文本字段拆分为单词并对每个单词进行比较。我必须在人口众多的表格中的许多文本字段上执行此操作，因此如果有更好的方法，我不会对此感到兴奋。

有没有人有做这样的事情的经验？

谢谢

# asp.net-mvc - 代码优先多对多：如何将集合添加到对象

> ID：14107262
> 
> 赞同：0
> 
> 时间：2013-01-01T01:27:30.837
> 
> 标签：asp.net-mvc, entity-framework, code-first

我在用户和角色之间有一个多对多的关系。它们的设置如下：

```
 public partial class User
    {
        //public User()
        //{
        //    //this.DateCreated = DateTime.Now; //set default value
        //    Roles = new HashSet<Role>();
        //}

        public ICollection<Role> Roles { get; set; } //many to many relationship

        public int UserId { get; set; }
        public string FirstName { get; set; }
        public string Surname { get; set; }
        public string Username { get; set; }
        public string Password { get; set; }
        public string City { get; set; }

        //foreign key
        public int CountryId { get; set; }
        //navigation properties
        public virtual Country Country { get; set; }

        //foreign key
        public int LanguageId { get; set; }
        //navigation properties
        public virtual Language Language { get; set; }

        public string EmailAddress { get; set; }
        public long? FacebookId { get; set; }
        public DateTime DateCreated { get; set; }
    }

public partial class Role
    {
        //public Role()
        //{
        //    Users = new HashSet<User>();
        //}

        public ICollection<User> Users { get; set; } //many to many relationship

        public int RoleId { get; set; }
        public string RoleName { get; set; }
    }

//many to many relationship 
            modelBuilder.Entity<User>().
              HasMany(c => c.Roles).
              WithMany(p => p.Users).
              Map(
               m =>
               {
                   m.MapLeftKey("UserId");
                   m.MapRightKey("RoleId");
                   m.ToTable("UserRoles", schemaName: "Main");
               }); 
```

在我添加新用户的代码中，我希望能够向该用户添加角色。但每当我这样做时，新角色也会添加到角色表中。这样做的正确方法是什么？

```
[HttpPost]
        public ActionResult UserAdd(UserDTO user)
        {
            if (ModelState.IsValid)
            {
                //do mapping manually here
                Country country = _repository.GetCountryByCountryId(user.CountryId);
                Language language = _repository.GetLanguageByLanguageId(user.LanguageId);

                User entity = new User();
                entity.FirstName = user.FirstName;
                entity.Surname = user.Surname;
                entity.Username = user.Username;
                entity.Password = user.Password;
                entity.City = user.City;
                entity.CountryId = country.CountryId;
                entity.LanguageId = language.LanguageId;
                entity.Country = country;
                entity.Language = language;
                entity.EmailAddress = user.EmailAddress;
                entity.FacebookId = null;
                entity.DateCreated = DateTime.Now;
                entity.Roles = new List<Role>();

                foreach (int i in user.Roles)
                {
                    Role role = _repository.GetRoleByRoleId(i);
                    entity.Roles.Add(new Role { RoleId = i, RoleName = role.RoleName });
                }

                int newUserId = _repository.AddUser(entity);

                return View();
            } } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T11:41:09.133

```
entity.Roles.Add(new Role { RoleId = i, RoleName = role.RoleName }); 
```

这是问题所在，因为您创建了新实例，这意味着绝对是新角色。您必须从您的上下文中使用角色：

```
foreach (int i in user.Roles)
            {
                Role role = _repository.GetRoleByRoleId(i);
                entity.Roles.Add(role); // don't create new instance here!
            } 
```

# javascript - 将鼠标悬停在 div 内容上以显示新的 div 内容

> ID：14107263
> 
> 赞同：0
> 
> 时间：2013-01-01T01:27:59.937
> 
> 标签：javascript, jquery, css, hover

```
<center>
    <div class="trivlimp">
        <center><div class="lyrics"><!-- |field_1| --></div></center>
    </div>

    <div class="imp">
        <div class="trgls"><!-- |points| --> Gallons</div><br>
        <div class="trals"><!== |field_2| --></div><br>
        <div class="trpc"><!-- |posts| --> posts</div><br>
        <div class="trttr"><!-- |field_3| --></div><br>
    </div>
</center> 
```

我希望能够将鼠标悬停在 div“trivlimp”上以在“trivlimp”上方显示 div“imp”；将第一个 div 隐藏在 div“imp”下面。我尝试通过 :hover 执行此操作，但完全失败了，最终让我自己更加沮丧。我不反对使用 Jquery，但我想完全通过 css 来做到这一点；但如果使用 jquery 更容易，我会使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T03:03:52.417

[http://jsfiddle.net/Thrw2/3/](http://jsfiddle.net/Thrw2/3/)

html代码

```
<center>
<div class="trivlimp">
    <center><div class="lyrics"> |field_1| </div></center>
</div>

<div class="imp">
    <div class="trgls"> |points|  Gallons</div><br>
    <div class="trals">|field_2| </div><br>
    <div class="trpc"> |posts|  posts</div><br>
    <div class="trttr">|field_3|</div><br>
</div> 
```

CSS代码

```
.trivlimp {     background-color:#FF0000;
    width: 260px;
    height: 400px;
    text-align: center;
    position: absolute; }
.imp {     width: 260px;
    height: 400px;
    background-color:#676767;
    display: none;
    position: absolute;
    top: 0; }

.lyrics {
    margin-top: 50%;
    background-color: #CC0066;
    width: 180px;
    padding: 5px;
    height: 130px
    overflow: auto;
    text-align: justify;
    text-transform: uppercase;
    font-family: Georgia;
    font-style: italic;
    font-size: 10px;
    line-height: 10px;
}

.trgls {
    width: 190px;
    padding-top: 5px;
    padding-bottom: 5px;
    text-align: center;
    float: right;
    margin-right: 35px;
    background-color:#6666FF;
    text-transform: uppercase;
}

.trals {
    width: 170px;
    padding-top: 5px;
    padding-bottom: 5px;
    text-align: center;
    float: right;
    margin-right: 35px;
    background-color: #00FF00;
    text-transform: uppercase;
}

.trpc {
    width: 150px;
    padding-top: 5px;
    padding-bottom: 5px;
    text-align: center;
    float: right;
    margin-right: 35px;
    background-color: #FFCC00;
    text-transform: uppercase;
}

.trttr {
    width: 130px;
    padding-top: 5px;
    padding-bottom: 5px;
    text-align: center;
    float: right;
    margin-right: 35px;
    background-color: #009900;
    text-transform: uppercase;
} 
```

jQuery

```
$(function(){
$('.trivlimp').hover(function() {
    $('.imp').show();
},
function() {
    $('.imp').hide();
});
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T03:27:51.903

我不太明白你的问题，但你可以使用以下内容：

```
.imp {
    display: none;
}

.trivlimp:hover + .imp {
    display: block;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T01:47:58.140

我会使用 jQuery 来处理悬停状态。我也有点不关注这个问题。因此，我将您的代码弹出到 JSFiddle 中，并按照您正在寻找的内容制作了我认为的内容。我使用了 jQuery 的 mouseover/mouseout：

```
$('.trivlimp').mouseover(function() {
    $('.imp').show();
});

$('.trivlimp').mouseout(function() {
    $('.imp').hide();
}); 
```

​http://jsfiddle.net/arsCr/

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-01T02:02:06.380

做这样的事情：http: [//jsfiddle.net/chanckjh/PWtTw/](http://jsfiddle.net/chanckjh/PWtTw/) html：

```
<div class="trivlimp">
</div>

<div class="imp">
</div>​ 
```

CSS：

```
.trivlimp{
    border: 1px solid red;
    width: 500px;
    height: 300px;
}

.imp{
    border: 1px solid blue;
    width: 500px;
    height: 300px;
    background: blue;
    display: none;
} 
```

​ jQuery：

```
$(function() {
    $('.trivlimp').hover(function() {
        $('.imp').show();
    }, function() {
        $('.imp').hide();
    });
});​ 
```

# mysql - 强制 MySQL 表中的字段为小写

> ID：14107264
> 
> 赞同：3
> 
> 时间：2013-01-01T01:28:09.887
> 
> 标签：mysql

我在 MySQL 表中有以下字段。我怎样才能强制它只用小写字母？

```
`username` varchar(30) NOT NULL, 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T01:34:00.253

在数据库中，[`LOWER()`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html)围绕插入和/或检索使用 MySQL 函数。您也可以考虑只在应用程序端进行（这意味着您仍然存储原始...

例子

`INSERT INTO mytable (username) VALUES(LOWER('TestUser'))`

`SELECT LOWER(username) FROM mytable`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T01:40:05.700

您可以在要小写的字段上使用“插入前”触发器。更多信息：[MySQL 触发器](http://dev.mysql.com/doc/refman/5.0/en/triggers.html)

（可能从这里重复：[mySQL phpmyadmin - 默认情况下为小写数据](https://stackoverflow.com/questions/6143962/mysql-phpmyadmin-lowercase-data-by-default)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T01:36:38.893

而不是在应用程序级别实现它，您可以编写一个数据库触发器，该触发器将在插入/更新发生时将插入/更新的内容更改为小写，而与应用程序无关。

# android - 多个片段和不同布局的方向变化

> ID：14107265
> 
> 赞同：0
> 
> 时间：2013-01-01T01:28:09.970
> 
> 标签：android, android-layout, android-fragments, orientation

在横向中，我有一个活动，其中 previewFragment 加载到 R.id.fragment_container_child （在屏幕的左三分之一处）和 selectionFragment 加载到 R.id.fragment_container_parent （屏幕的右三分之二）。选择第二个选项卡会将 selectionFragment 更改为 contactFragment 但 previewFragment 保持不变。这一切都很好。

在方向改变时，布局会通过 xml 稍微改变，其中 R.id.fragment_child 现在占据底部三分之一，而不是左侧三分之一。当我改变方向时，问题就出现了。我的操作栏和片段消失了，尽管布局已确认更改。

我没有`android:configChanges="orientation"`在 Manifest 文件中定义。以下是我活动的代码：

```
public class MainActivity extends Activity implements ActionBar.TabListener {

static SelectionFragment selectionFragment;
static ContactFragment contactFragment;
public static PreviewFragment previewFragment;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    if (findViewById(R.id.fragment_container_child) != null) {
        if (savedInstanceState != null) {
            return;
        }
        previewFragment = new PreviewFragment();
        selectionFragment = new SelectionFragment();
        FragmentTransaction transaction = getFragmentManager()
                .beginTransaction();
        transaction.add(R.id.fragment_container_child, previewFragment,
                "PREVIEW");
        transaction.add(R.id.fragment_container_parent, selectionFragment,
                "SELECTION");
        transaction.commit();
    }
    final ActionBar actionBar = getActionBar();
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    actionBar.addTab(actionBar.newTab().setText(R.string.menu)
            .setTabListener(this));
    actionBar.addTab(actionBar.newTab()
            .setText(R.string.client_information).setTabListener(this));
    sharedPref = PreferenceManager.getDefaultSharedPreferences(this);
}

@Override
public void onRestoreInstanceState(Bundle savedInstanceState) {
}

@Override
public void onSaveInstanceState(Bundle outState) {
}

@Override
public void onTabSelected(Tab tab, FragmentTransaction transaction) {
    switch (tab.getPosition()) {
    case 0:
        if (selectionFragment == null) {
            selectionFragment = new SelectionFragment();
            transaction.add(R.id.fragment_container_parent,
                    selectionFragment, "SELECTION");
        } else {
            transaction.attach(selectionFragment);
        }
        break;
    case 1:
        if (contactFragment == null) {
            contactFragment = new ContactFragment();
            transaction.add(R.id.fragment_container_parent,
                    contactFragment, "CONTACT");
        } else {
            transaction.attach(contactFragment);
        }
        break;
    }

}

@Override
public void onTabUnselected(Tab tab, FragmentTransaction transaction) {
    switch (tab.getPosition()) {
    case 0:
        if (selectionFragment != null)
            transaction.detach(selectionFragment);
        break;
    case 1:
        if (contactFragment != null)
            transaction.detach(contactFragment);
        break;
    }
}

@Override
public void onTabReselected(Tab tab, FragmentTransaction transaction) {

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T02:06:14.800

我不明白你到底发生了什么，但这里有一些提示：

*   当您旋转屏幕时，Android 会销毁并重建所有 Fragment/Activity。所以看看你的 onCreate, onDestroy...

*   如果您想要一个多屏幕应用程序，请查看[此处](http://developer.android.com/guide/practices/screens_support.html)并为每个屏幕创建新布局，以确保您的应用程序可以正常工作。

# c++ - libxml2 xmlChar * 到 std::wstring

> ID：14107268
> 
> 赞同：2
> 
> 时间：2013-01-01T01:28:50.323
> 
> 标签：c++, string, unicode, libxml2

`libxml2`似乎将其所有字符串存储在 UTF-8 中，如`xmlChar *`.

```
/**
 * xmlChar:
 *
 * This is a basic byte in an UTF-8 encoded string.
 * It's unsigned allowing to pinpoint case where char * are assigned
 * to xmlChar * (possibly making serialization back impossible).
 */
typedef unsigned char xmlChar; 
```

与`libxml2`C 库一样，没有提供`std::wstring`从`xmlChar *`. 我想知道在 C++11 中转换为 a的**谨慎方法是否是通过类似这样的方法使用**[mbstowcs](http://www.cplusplus.com/reference/cstdlib/mbstowcs/) C 函数（正在进行中）：`xmlChar *``std::wstring`

```
std::wstring xmlCharToWideString(const xmlChar *xmlString) {
    if(!xmlString){abort();} //provided string was null
    int charLength = xmlStrlen(xmlString); //excludes null terminator
    wchar_t *wideBuffer = new wchar_t[charLength];
    size_t wcharLength = mbstowcs(wideBuffer, (const char *)xmlString, charLength);
    if(wcharLength == (size_t)(-1)){abort();} //mbstowcs failed
    std::wstring wideString(wideBuffer, wcharLength);
    delete[] wideBuffer;
    return wideString;
} 
```

**编辑：**仅供参考，我非常清楚`xmlStrlen`返回的是什么；它是`xmlChar`用于存储字符串的数量；我知道这不是*字符*数，而是`unsigned char`. 如果我给它命名，它会不会那么混乱`byteLength`，但我认为它会更清楚，因为我同时拥有`charLength`和`wcharLength`。至于代码的正确性，wideBuffer 总是会**大于或等于**保存缓冲区所需的大小（我相信）。作为需要更多空间而不是`wide_t`被截断的字符（我认为）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T02:13:02.293

`xmlStrlen()``xmlChar*`返回字符串中 UTF-8 编码的代码单元的数量。这与`wchar_t`转换数据时所需的编码代码单元数量不同，因此不要`xmlStrlen()`用于分配`wchar_t`字符串的大小。您需要调用[`std::mbtowc()`](http://en.cppreference.com/w/cpp/string/multibyte/mbtowc)一次以获得正确的长度，然后分配内存，并`mbtowc()`再次调用以填充内存。您还必须使用[`std::setlocale()`](http://en.cppreference.com/w/cpp/locale/setlocale)to 告诉`mbtowc()`使用 UTF-8（弄乱语言环境可能不是一个好主意，尤其是在涉及多个线程的情况下）。例如：

```
std::wstring xmlCharToWideString(const xmlChar *xmlString)
{    
    if (!xmlString) { abort(); } //provided string was null

    std::wstring wideString;

    int charLength = xmlStrlen(xmlString);
    if (charLength > 0)
    {
        char *origLocale = setlocale(LC_CTYPE, NULL);
        setlocale(LC_CTYPE, "en_US.UTF-8");

        size_t wcharLength = mbtowc(NULL, (const char*) xmlString, charLength); //excludes null terminator
        if (wcharLength != (size_t)(-1))
        {
            wideString.resize(wcharLength);
            mbtowc(&wideString[0], (const char*) xmlString, charLength);
        }

        setlocale(LC_CTYPE, origLocale);
        if (wcharLength == (size_t)(-1)) { abort(); } //mbstowcs failed
    }

    return wideString;
} 
```

一个更好的选择，因为你提到了 C++11，所以你不必处理语言环境`std::codecvt_utf8`：`std::wstring_convert`

```
std::wstring xmlCharToWideString(const xmlChar *xmlString)
{    
    if (!xmlString) { abort(); } //provided string was null
    try
    {
        std::wstring_convert<std::codecvt_utf8<wchar_t>, wchar_t> conv;
        return conv.from_bytes((const char*)xmlString);
    }
    catch(const std::range_error& e)
    {
        abort(); //wstring_convert failed
    }
} 
```

另一种选择是使用实际的 Unicode 库，例如 ICU 或 ICONV，来处理 Unicode 转换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T02:04:24.067

这段代码中存在一些问题，除了您正在使用`wchar_t`而且`std::wstring`这是一个坏主意，除非您正在调用 Windows API。

1.  `xmlStrlen()`不做你认为它做的事。它计算字符串中 UTF-8 代码单元（又名字节）的数量。它不计算字符数。这是[文档](http://www.xmlsoft.org/html/libxml-xmlstring.html#xmlStrlen)中的所有内容。

2.  无论如何，计数字符不会为您提供正确的`wchar_t`数组大小。所以不仅`xmlStrlen()`没有做你认为它做的事情，你想要的也不是正确的事情。问题是编码`wchar_t`因平台而异，这使得它对于可移植代码 100% 无用。

3.  该`mbtowcs()`功能取决于语言环境。如果语言环境是 UTF-8 语言环境，它只会从 UTF-8 转换！

4.  如果`std::wstring`构造函数抛出异常，此代码将泄漏内存。

我的建议：

1.  **尽可能使用 UTF-8。**`wchar_t`兔子洞是许多**没有任何**好处 的额外工作（除了进行 Windows API 调用的能力）。

2.  如果您需要 UTF-32，请使用`std::u32string`. 请记住，它`wstring`具有与平台相关的编码：它可以是可变长度编码 (Windows) 或固定长度编码 (Linux、OS X)。

3.  如果您绝对必须拥有`wchar_t`，那么您很有可能在 Windows 上。以下是您在 Windows 上的操作方式：

    ```
    std::wstring utf8_to_wstring(const char *utf8)
    {
        size_t utf8len = std::strlen(utf8);
        int wclen = MultiByteToWideChar(
            CP_UTF8, 0, utf8, utf8len, NULL, 0);
        wchar_t *wc = NULL;
        try {
            wc = new wchar_t[wclen];
            MultiByteToWideChar(
                CP_UTF8, 0, utf8, utf8len, wc, wclen);
            std::wstring wstr(wc, wclen);
            delete[] wc;
            wc = NULL;
            return wstr;
        } catch (std::exception &) {
            if (wc)
                delete[] wc;
        }
    } 
    ```

4.  如果您绝对必须拥有`wchar_t`并且您不在 Windows 上，请使用（`iconv()`请参阅`man 3 iconv`和手册）。您可以将其指定为.`man 3 iconv_open``man 3 iconv_close``"WCHAR_T"``iconv()`

记住：你可能不想要`wchar_t`或`std::wstring`。可移植的东西`wchar_t`没有用，使它有用也不能移植。这就是生活。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-07T12:57:10.500

添加

> #include <boost/locale.hpp>

1.  将 xmlChar* 转换为字符串

> std::string strGbk((char*)node);

2.  将字符串转换为 wstring

> std::string strGbk = "中国永远强大";

```
std::wstring wstr = boost::locale::conv::to_utf<wchar_t>(strGbk, "gbk");
std::cout << strGbk << std::endl;
std::wcout << wstr. << std::endl; 
```

3.  它对我有用，祝你好运。

# php - 反序列化：需要调试到屏幕，人类可读

> ID：14107273
> 
> 赞同：0
> 
> 时间：2013-01-01T01:29:53.327
> 
> 标签：php, deserialization

我正在使用 MyBB，一个名为 NewPoints Shop 的模组。

这是序列化的字段：

```
$barnInfo['newpoints_items'] = "a:7:{i:0;s:1:"2";i:1;s:1:"2";i:2;s:1:"2";i:3;s:1:"2";i:4;s:1:"5";i:5;s:1:"7";i:6;s:1:"7";}" 

// the deserialized field represents this data:
4 Lumber (Item ID 2)
1 Mushroom (Item ID 5)
2 Carrot (Item ID 7)
(And perhaps 0 of every other item - there are 9 items: Item ID 1, 2, 3, ...7, 8, 9) 
```

在他们的代码中，他们调用

```
$items = unserialize($barnInfo['newpoints_items']); 
```

我很难操纵这些数据。我想如果我可以将反序列化的数据打印到屏幕上，我就可以弄清楚如何使用它。但我不知道如何打印任何有意义的东西。我玩过 print_r 没有成功。

```
// displays '1' , quite unhelpful!
print_r(unserialize($barnInfo['newpoints_items'] ))
// I tried and got very confusing results that don't seem to correspond at all http://blog.tanist.co.uk/files/unserialize/index.php 
```

**问题：**如何将反序列化的数据打印到屏幕上，以便弄清楚什么是什么？

**答案：** MyBB 在屏幕上打印东西有点棘手，但这很有效：`"<pre>" . htmlspecialchars(print_r($items, true)) . "</pre> ... "`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T01:43:09.827

假设`$barnInfo['newpoint_items']`实际上包含序列化数据，那么将您的`print_r`in`pre`标签包装起来会使其更具可读性。

```
echo '<pre>';
print_r(unserialize($barnInfo['newpoint_items']));
echo '</pre>'; 
```

# java - JMS 队列/主题问题

> ID：14107277
> 
> 赞同：-1
> 
> 时间：2013-01-01T01:31:53.917
> 
> 标签：java, jms, message-queue, jms-topic

我有两个关于 JMS 的问题：

1）当队列关闭并且发布者试图发送消息时会发生什么。我会得到什么错误？

2）当消息可用但消费者不可用时会发生什么？消息会无限期地等待直到它被消耗掉吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T12:54:07.743

1) 通常，当您的代码（假设 Java）试图连接到您的 JMS 代理时，您可能会出现某种形式的（运行时）连接异常。确切的例外在很大程度上取决于您使用的任何框架（即 Spring）。您需要决定在这种情况下要做什么（即向客户端抛出异常）。如果客户端不关心消息发布的实际时间，一种选择可能是缓存要发布的消息并在一定的时间间隔内尝试它。

2）什么都没有，你的消息只会坐在队列中，直到有东西删除它。这可能是成功侦听和处理后的消费者，也可能是代理（我认为有一个名为生存时间的 JMS 属性，可以在发布时设置，这样如果不使用，消息会在该时间后消失）。

# java - 如果我们从 java 中删除检查的异常会发生什么？

> ID：14107278
> 
> 赞同：2
> 
> 时间：2013-01-01T01:32:24.397
> 
> 标签：java, exception

我经历了这次采访 [http://www.artima.com/intv/handcuffs.html](http://www.artima.com/intv/handcuffs.html) 和一些关于检查异常的文章和讨论。那`checked exception`就是引入java的未经尝试的实验。它会带来版本性和可扩展性问题。Bruce eckel 还提供了一个适配器来转换`checked exception`，`unchecked exception`以避免调用强制捕获异常。我的心也冬眠`checked exception`了`unchecked exception`。我想知道如果我们删除`checked exception`机制会怎样？我也同意`checked exception`没有必要存在。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T01:47:01.590

实际上不会发生很多事情。在 VM 级别上，所有异常都未选中。您可以通过执行以下操作来验证这一点：

```
public class A {
    public static void a() {
        /* Do nothing */
    }
}

public class B {
    public static void main(String[] args) {
        A.a();
    }
} 
```

将这些类存储在它们各自的文件中`A.java`并`B.java`编译它们。然后，更改`A`为以下内容：

```
public class A {
    public static void a() throws Exception {
        throw(new Exception("foo"));
    }
} 
```

重新编译`A.java`而不重新编译`B.java`。然后运行`B`​​，您将看到`A`传播和终止程序所引发的异常，就好像它是 a 一样`RuntimeException`，而 VM 不会抱怨链接错误或任何东西。

已检查异常只是 Java 语言的语法级特性。删除它不会影响 VM 的实现，甚至不会影响语言模型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T03:15:10.693

> 我想知道如果我们删除检查异常机制会怎样？

^(简短的回答是，在技术层面1)不会发生任何事情。

然而，大量 Java 程序员会发出长期而响亮的抱怨，他们认为检查异常实际上是*一件好事*……或者至少，它们比简单地删除区别要好。

在过去 15 年多的时间里，负责 Java 语言创造演变的人们采取了一种本质上保守的方法，只进行向后兼容的更改，并且只有在广泛接受这是一件好事时才进行。因此，虽然删除已检查/未检查的区别是一个“有趣”的提议，但它不太可能在 Java (IMO) 中发生。

* * *

^(1 - 理论上可能存在功能*取决于*编译器的代码或将错误处理的检查异常标记为错误的代码......但我从未遇到过这样的情况。)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-04-03T00:05:17.497

已检查的异常仅在 Java 编译器中有意义——JVM 不区分已检查/未检查的异常。因此 Oracle 可以有**两种方式**，他们可以提供编译器参数来控制检查异常的处理，例如：

`-Xchecked-exception-handling: (neutral|throws|strict)`

我不确定甲骨文是否考虑过这种策略；我只读过关于非此即彼的命题。

无论如何，在那之前，您可以使用[Manifold](https://manifold.systems)编译器插件来实现相同的目标：中和已检查的异常。启用异常插件选项后，检查异常的行为与未检查异常完全相同。不再有 try/catch/wrap/rethrow 样板废话，不再有无意的异常吞噬，不再有 lambda 使用冲突。

# java - Java/JavaME：更快的几何向量加法

> ID：14107279
> 
> 赞同：2
> 
> 时间：2013-01-01T01:32:32.763
> 
> 标签：java, vector, geometry, addition

我正在使用简单的用法制作一个简单的 Vector 类，所以我不想为我自己可以做的事情导入整个库（如 JScience ...）。

目前我已经制作了这段代码：

```
public void add(Vector2D v){
    double ang = this.angle*Math.PI/180;
    double mag = this.magnitude;
    double ang0 = v.angle*Math.PI/180;
    double mag0 = v.magnitude;
    //vector to coordinates
    double x1 = mag*Math.cos(ang);
    double y1 =-mag*Math.sin(ang);
    //adding the other vector's coordinates
    double x2 =x1+mag*Math.cos(ang0);
    double y2 =y1-mag*Math.sin(ang0);
    //back to vector form
    double newMagnitude = Math.sqrt(x2*x2+y2*y2);
    double newAngle = Math.atan2(y2,x2);
    this.magnitude = newMagnitude;
    this.angle = newAngle;

} 
```

它将两个向量都转换为坐标，然后用三角函数返回，但是这些非常慢，并且该方法将被非常频繁地使用。

有没有更好的办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T03:25:00.560

首先，一些术语 101：

**点：**构成空间的无量纲实体。

**空间：**一组点。

**欧几里得空间：**一组点，一组线和紧密度（拓扑）的概念。这组线受欧几里得公理的约束。它由其维度唯一定义。

**向量：**欧几里得空间中两点之间的平移不变关系。

**坐标系：**从实数元组到某个空间中的点或向量的映射。

**笛卡尔坐标系：**一种特定的映射，具有以下属性（在欧几里得二维空间的情况下）点集`ax+by+c=0`是一条线，除非`a,b`两者都为零，向量`[0,1]`和`[1,0]`是垂直的和单位长度，并且空间中的点是接近的如果它们在所有坐标中都靠近，则在一起。这就是您所说的“坐标”。

**极坐标系：**另一个特定的映射，可以从笛卡尔坐标定义：`[arg,mag]`极坐标映射到`[cos(arg)*mag, sin(arg)*mag]`笛卡尔坐标。这就是您所说的“矢量形式”。

* * *

与极坐标系相比，笛卡尔坐标系具有多个优点。其中之一是更容易加法：`[x1,y1]+[x2,y2]=[x1+x2,y1+y2]`和标量乘法：`[x1,y1].[x2,y2]=x1*x2+y1*y2`。加法反转也稍微容易一些：`-[x,y]=[-x,-y]`

另一个好处是，虽然极坐标是严格的 2D 坐标（没有唯一的扩展 - 球坐标系是一个候选者），但笛卡尔坐标自然地扩展到任意数量的维度。

出于这个原因，总是以笛卡尔坐标形式存储向量是有益的——而且通常是这样的。

如果您需要极坐标形式的向量，那么（并且仅在那时）一劳永逸地进行转换。

极坐标没那么有用。它们可用于输入和输出，但很少用于计算。

* * *

您继续以极坐标形式存储向量。您将它们转换为笛卡尔形式进行计算，然后转换回极坐标 - 只是再次将它们转换为笛卡尔形式。

您应该以笛卡尔形式存储向量。如果放弃冗余转换，性能改进应该是清晰可见的。

即使要旋转矢量，转换为极坐标并返回也无济于事。旋转一个有符号的角度`a`就像`[x*cos(a)+y*sin(a), y*cos(a)-x*sin(a)]`. 这是*两个*三角函数（最多 - 你可以缓存这些值）来旋转整个向量数组。

# ios - 如何在 iOS 中验证（并要求）自签名证书

> ID：14107280
> 
> 赞同：9
> 
> 时间：2013-01-01T01:33:00.910
> 
> 标签：ios, security, ssl, openssl, ssl-certificate

我想使用 iOS 中的代码附带的自签名证书创建到我的服务器的 SSL 连接。这样我就不必担心更复杂的中间人攻击，其中有人可以访问高级“受信任”证书颁发机构。我在使用我认为是 Apple 的标准方式时遇到了问题。

[通过此处](http://svasey.org/projects/software-usage-notes/ssl_en.html)找到的过程生成证书

```
# Create root CA & private key
openssl req -newkey rsa:4096 -sha512 -days 9999 -x509 -nodes -out root.pem.cer
# Create a certificate signing request
openssl req -newkey rsa:4096 -sha512 -nodes -out ssl.csr -keyout ssl.key
# Create an OpenSSL Configuration file from http://svasey.org/projects/software-usage-notes/ssl_en.html
vim openssl.conf
# Create the indexes
touch certindex
echo 000a > certserial
echo 000a > crlnumber
# Generate SSL certificate 
openssl ca -batch -config openssl.conf -notext -in ssl.csr -out ssl.pem.cer
# Create Certificate Revocation List
openssl ca -config openssl.conf -gencrl -keyfile privkey.pem -cert root.pem.cer -out root.crl.pem
openssl crl -inform PEM -in root.crl.pem -outform DER -out root.crl && rm root.crl.pem 
```

和 iOS 代码：

```
- (void)connection:(NSURLConnection *)connection willSendRequestForAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge {
  NSURLProtectionSpace *protectionSpace = [challenge protectionSpace];
  if ([protectionSpace authenticationMethod] == NSURLAuthenticationMethodServerTrust) {
    // Load anchor cert.. also tried this with both certs and it doesn't seem to matter
    NSString *path = [[NSBundle mainBundle] pathForResource:@"root.der" ofType:@"crt"];
    NSData *data = [[NSData alloc] initWithContentsOfFile:path];
    SecCertificateRef anchorCert = SecCertificateCreateWithData(kCFAllocatorDefault, (__bridge CFDataRef)data);
    CFMutableArrayRef anchorCerts = CFArrayCreateMutable(kCFAllocatorDefault, 0, &kCFTypeArrayCallBacks);
    CFArrayAppendValue(anchorCerts, anchorCert);

    // Set anchor cert
    SecTrustRef trust = [protectionSpace serverTrust];
    SecTrustSetAnchorCertificates(trust, anchorCerts);
    SecTrustSetAnchorCertificatesOnly(trust, YES); // only use that certificate
    CFRelease(anchorCert);
    CFRelease(anchorCerts);

    // Validate cert
    SecTrustResultType secresult = kSecTrustResultInvalid;
    if (SecTrustEvaluate(trust, &secresult) != errSecSuccess) {
      [challenge.sender cancelAuthenticationChallenge:challenge];
      return;
    }

    switch (secresult) {
      case kSecTrustResultInvalid:
      case kSecTrustResultDeny:
      case kSecTrustResultFatalTrustFailure:
      case kSecTrustResultOtherError:
      case kSecTrustResultRecoverableTrustFailure: { 
        // !!! It's always kSecTrustResultRecoverableTrustFailure, aka 5
        NSLog(@"Failing due to result: %lu", secresult);
        [challenge.sender cancelAuthenticationChallenge:challenge];
        return;
      }

      case kSecTrustResultUnspecified: // The OS trusts this certificate implicitly.
      case kSecTrustResultProceed: { // The user explicitly told the OS to trust it.
        NSURLCredential *credential = [NSURLCredential credentialForTrust:trust];
        [challenge.sender useCredential:credential forAuthenticationChallenge:challenge];
        return;
      }
      default: ;
        /* It's somebody else's key. Fall through. */
    }
    /* The server sent a key other than the trusted key. */
    [connection cancel];

    // Perform other cleanup here, as needed.
  } else {
    NSLog(@"In weird space... not handling authentication method: %@", [protectionSpace authenticationMethod]);
    [connection cancel];
  }
} 
```

我总是得到 kSecTrustResultRecoverableTrustFailure 作为结果。我不认为这是本地主机问题，因为我也尝试使用 Apple 的代码来改变它。该怎么办？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T19:35:16.747

Please be sure that your certificate is valid. I think it's name shouldn't be root.der.crt. You can take a look for certificate types from [here](https://www.sslshopper.com/ssl-converter.html). The below code is for p12 certificate, I hope it will help.

```
NSData *PKCS12DataQA = [NSData dataWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"CERTIFICATE NAME" ofType:@"CERTIFICATE TYPE"]];

BOOL result = [self extractIdentity:&identity andTrust:&trust fromPKCS12Data:PKCS12DataQA];

- (BOOL)extractIdentity:(SecIdentityRef *)outIdentity andTrust:(SecTrustRef*)outTrust fromPKCS12Data:(NSData *)inPKCS12Data
{
    OSStatus securityError = errSecSuccess;
    //testtest is the passsword for the certificate.
    NSDictionary *optionsDictionary = [NSDictionary dictionaryWithObject:@"testtest" forKey:(id)CFBridgingRelease(kSecImportExportPassphrase)];

    CFArrayRef items = CFArrayCreate(NULL, 0, 0, NULL);
    securityError = SecPKCS12Import((__bridge CFDataRef)(inPKCS12Data),(CFDictionaryRef)CFBridgingRetain(optionsDictionary),&items);

    if (securityError == 0) {
        CFDictionaryRef myIdentityAndTrust = CFArrayGetValueAtIndex (items, 0);
        const void *tempIdentity = NULL;
        tempIdentity = CFDictionaryGetValue (myIdentityAndTrust, kSecImportItemIdentity);
        *outIdentity = (SecIdentityRef)tempIdentity;
        const void *tempTrust = NULL;
        tempTrust = CFDictionaryGetValue (myIdentityAndTrust, kSecImportItemTrust);
        *outTrust = (SecTrustRef)tempTrust;

    } else {
        NSLog(@"Failed with error code %d",(int)securityError);
        return NO;
    }

    return YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T10:04:41.167

如果信任结果是*kSecTrustResultRecoverableTrustFailure*，您可能能够从失败中恢复。

这是解决方法。

[https://developer.apple.com/library/mac/#documentation/security/conceptual/CertKeyTrustProgGuide/iPhone_Tasks/iPhone_Tasks.html#//apple_ref/doc/uid/TP40001358-CH208-SW8](https://developer.apple.com/library/mac/#documentation/security/conceptual/CertKeyTrustProgGuide/iPhone_Tasks/iPhone_Tasks.html#//apple_ref/doc/uid/TP40001358-CH208-SW8)

# entity-framework - EF 5.0 Code First Winforms 组合框数据绑定

> ID：14107283
> 
> 赞同：1
> 
> 时间：2013-01-01T01:33:31.220
> 
> 标签：entity-framework, data-binding

我正在尝试将一些查找表绑定到 winforms 上的组合框。我已经构建了 POCCO 类并生成了数据库。我已将数据源添加到我的应用程序中。我将源表放到设计器中的组合框上，并且每个绑定都设置得很好。我已经用测试数据填充了数据库中的表。

这是我需要帮助的地方。对于数据集，我只需在表单加载事件上进行表格适配器填充以获取数据。使用 EF，我必须做一些事情来加载数据。也许是一个查询？还有什么？我相信一切都设置正确。只需要最后一步即可使其加载和工作。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T12:21:32.447

有很多方法可以与您的数据库进行通信。我了解，您可能正在使用 EF Code First 方法。想象一下这种情况：

```
public class WinFormContext : DbContext
{
    public DbSet<Car> Cars { get; set; }
}

public class Car
{
    [Key]
    public int Id { get; set; }
    public string Name { get; set; }
} 
```

你要先添加一些记录。您可以使用文本框和一个按钮创建简单的表单。

```
 private void button1_Click(object sender, EventArgs e)
    {
        using (var WinFormContext = new WinFormContext())
        {
            Car car = new Car { Name = textBox1.Text };
            WinFormContext.Cars.Add(car);
            WinFormContext.SaveChanges();
        }
    } 
```

这是一个简单的解决方案，如何在 onClick 事件之后添加新记录。现在您想在网格视图中显示所有记录。一种可能的解决方案是手动填充控件：

```
 BindingSource bindingSource = new BindingSource();
    private void Form2_Load(object sender, EventArgs e)
    {
        var WinFormContext = new WinFormContext();
        bindingSource.DataSource = WinFormContext.Cars.ToList();

        dataGridView1.DataSource = bindingSource;
        dataGridView1.AutoGenerateColumns = true;
    } 
```

但是还有更多方法可以做到这一点。我建议您在 Google 上查看“win 表单中的数据绑定”...

# python - Numpy.where 解决方法

> ID：14107286
> 
> 赞同：3
> 
> 时间：2013-01-01T01:35:16.040
> 
> 标签：python, numpy

对于我的数组：
`array([[ 1, 2, 3, 4, 5], #a`
`[ 1, 3, 5, 7, 9],`
`[ 5, 10, 15, 20, 25],`
`[ 2, 4, 6, 8, 5]])`

和
`array([[ 1, 2, 3, 4, 16], #b`
`[ 1, 3, 16, 7, 9],`
`[ 5, 16, 15, 20, 25],`
`[ 2, 4, 6, 8, 5]])`

我试图得到`np.where((a==5 and b==16))`. 我预计：

`Out[1]: (array([0, 1], dtype=int64), array([4, 2], dtype=int64)`,

因为那是共享相同索引的地方`5`；`16`但相反，我得到了一个

> ValueError：具有多个元素的数组的真值不明确。使用 a.any() 或 a.all()

当我尝试`np.where((a.all()==5 and b.any()==16))`时，我得到

`Out[1]: (array([], dtype=int64),)`

有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T01:45:34.570

您想使用`&`而不是`and`：

```
np.where((a==5) & (b==16)) 
```

在处理 numpy 数组时，您希望使用按位运算符而不是逻辑与。

# android - view/motionEvent 无法解析为可变滑动

> ID：14107293
> 
> 赞同：1
> 
> 时间：2013-01-01T01:37:05.087
> 
> 标签：android, eclipse, variables, view, motionevent

我从另一个 stackoverflow 问题中得到了这段代码：

```
import android.view.GestureDetector;
import android.view.GestureDetector.SimpleOnGestureListener;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;

public class OnSwipeTouchListener implements OnTouchListener {

    private final GestureDetector gestureDetector = new GestureDetector(new GestureListener());

    public boolean onTouch(final View v, final MotionEvent event) {
        super.onTouch(view, motionEvent);
        return gestureDetector.onTouchEvent(event);
    }

    private final class GestureListener extends SimpleOnGestureListener {

        private static final int SWIPE_THRESHOLD = 100;
        private static final int SWIPE_VELOCITY_THRESHOLD = 100;

        @Override
        public boolean onDown(MotionEvent e) {
            return true;
        }

        @Override
        public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
            boolean result = false;
            try {
                float diffY = e2.getY() - e1.getY();
                float diffX = e2.getX() - e1.getX();
                if (Math.abs(diffX) > Math.abs(diffY)) {
                    if (Math.abs(diffX) > SWIPE_THRESHOLD && Math.abs(velocityX) > SWIPE_VELOCITY_THRESHOLD) {
                        if (diffX > 0) {
                            onSwipeRight();
                        } else {
                            onSwipeLeft();
                        }
                    }
                } else {
                    if (Math.abs(diffY) > SWIPE_THRESHOLD && Math.abs(velocityY) > SWIPE_VELOCITY_THRESHOLD) {
                        if (diffY > 0) {
                            onSwipeBottom();
                        } else {
                            onSwipeTop();
                        }
                    }
                }
            } catch (Exception exception) {
                exception.printStackTrace();
            }
            return result;
        }
    }

    public void onSwipeRight() {
    }

    public void onSwipeLeft() {
    }

    public void onSwipeTop() {
    }

    public void onSwipeBottom() {
    }
} 
```

将代码粘贴到 Eclipse 中后，在 super.onTouch(view, motionEvent); 上出现错误 . 如果对您有帮助，则编译器合规级别设置为 1.6。我尝试重新启动 eclipse，删除并导入项目但没有成功。谢谢，新年快乐！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T01:38:14.373

您的变量不匹配：

```
//  You need to use these names   *                    *****
public boolean onTouch(final View v, final MotionEvent event) {
    super.onTouch(v, event); 
```

但是你正在实现 OnTouchListener 所以这条线真的什么都不做。你可以删除它。

# visual-studio-2012 - 加载类型库/DLL (Microsoft.Office.Interop.Excel.Application) 时出错

> ID：14107296
> 
> 赞同：2
> 
> 时间：2013-01-01T01:37:18.457
> 
> 标签：visual-studio-2012, ms-office, office-interop, office-2013

我正在尝试通过 C# 创建一个 Excel 文档。当我运行应用程序时，它会出现以下错误：

> 无法将“System.__ComObject”类型的 COM 对象转换为接口类型“Microsoft.Office.Interop.Excel.Application”。此操作失败，因为 IID 为“{000208D5-0000-0000-C000-000000000046}”的接口的 COM 组件上的 QueryInterface 调用因以下错误而失败：加载类型库/DLL 时出错。（来自 HRESULT 的异常：0x80029C4A (TYPE_E_CANTLOADLIBRARY)）。

![在此处输入图像描述](../Images/c636fd8898c4467e16f7ac3b3e02061a.png)

在我将**Visual Studio 从 2010 升级到 2012**之前，它运行良好。我还将**Office 从 2010 升级到 2013**。

*   输出窗口没有错误/警告。
*   添加了 Microsoft.Office.Interop.Excel 参考

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T01:42:58.810

我为这个错误苦苦挣扎了几天。我终于找到了解决方案。

发生这种情况是因为我安装了**Office 2013**而不是我在旧版本项目中使用的 Office 2010。升级 Office 后，该项目不再能够链接 Excel 参考。

即使我引用了**15.0**的新 Excel 库，它也不起作用。

我所做的是：

*   **删除 Excel 引用**(Microsoft.Office.Interop.Excel)。就我而言，版本 15.0。
*   **安装 Microsoft Excel**（无论您使用的是哪个版本。我是 2010 版）
*   **添加 Excel 参考**（在我的情况下，是旧版本。14.0 版）

# facebook - 登录时 Facebook API 错误

> ID：14107297
> 
> 赞同：0
> 
> 时间：2013-01-01T01:37:25.417
> 
> 标签：facebook, codeigniter, facebook-php-sdk

我正在使用带有 codeigniter 的 Facebook PHP SDK。

当我使用应用程序创建者的 id 登录 facebook 时，登录功能可以正常工作。但是当我的朋友登录 Facebook 时，登录功能不起作用。
它在facebook页面上抛出错误只是说`'An error occurred. Please try again later.'`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T23:58:18.970

问题出在 Facebook 应用程序的设置上。我已将其设置为沙盒模式。因为它，应用程序接受了所有测试用户和创建者的 Facebook 登录，但不接受真实世界的 ID。
关闭后一切正常。

# java - 将相同的动作侦听器添加到 JComboBox 和 JButton 是否合法

> ID：14107298
> 
> 赞同：0
> 
> 时间：2013-01-01T01:37:47.430
> 
> 标签：java, swing, actionlistener

早上好，我尝试为 JComboBox 和 JButton 添加相同的动作侦听器，但在运行时`ClassCastException`发生如下`java.lang.ClassCastException: javax.swing.JComboBox cannot be cast to javax.swing.JButton`，已将侦听器添加到它们，如下所示：

```
jComboBox1.addActionListener(this);
jButton1.addActionListener(this); 
```

actionPerformed 方法是：

```
public void actionPerformed(ActionEvent e){

    JButton button=(JButton)e.getSource();
    JComboBox sCombo=(JComboBox)e.getSource();

    if(sCombo.equals(jComboBox1))
        listModel.addElement(sCombo.getSelectedItem());
    else
        listModel2.addElement(sCombo.getSelectedItem());

    if(button.equals(jButton1))
        System.out.println("Button1 is pressed");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T01:41:33.293

假设您实际上正在实现一个`ActionListener`，您*可以*在这里使用`instanceof`：

```
Object sourceObject = e.getSource();
if (sourceObject instanceof JButton) {
   JButton button=(JButton)sourceObject;
   ...
} else if (sourceObject instanceof JComboBox) {
   JComboBox comboBox = (JComboBox)sourceObject;
   ...
} 
```

但更好的做法是为每个控件分配一个单独的侦听器，尤其是在考虑到每个控件正在执行的非常不同的任务的情况下。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T01:42:04.797

这是合法的，但这样做

```
public void actionPerformed(ActionEvent e) {
    if(e.getSource() instanceof JButton) {
        JButton button=(JButton)e.getSource();
        System.out.println("Button1 is pressed");
    } else if(e.getSource() instanceof JComboBox) {
        /* watever you doing with combobox */
    }
} 
```

# asp.net - MVC 项目中的 Web API 没有达到断点（“未加载符号”）

> ID：14107304
> 
> 赞同：12
> 
> 时间：2013-01-01T01:38:34.200
> 
> 标签：asp.net, asp.net-mvc, debugging, asp.net-web-api

我有一个 ASP.NET MVC 项目，其中一个 ASP.NET web api 定义为该项目中的一个区域。所以结构如下：

```
MVC Web
   Controllers
   Views
   Areas
     API (web API)
       Controllers 
```

该应用程序按预期工作。但是，我在调试时遇到问题。我可以在 MVC 控制器中放置一个调试器，它可以按预期工作。我无法在 Web API 控制器中放置断点，因为我得到“断点当前不会被命中。没有为此文档加载任何符号。” 我已经为此苦苦挣扎了一段时间，所以这可能是一个简单的解决方法，但我无法弄清楚。当我可以调试 MVC 控制器时，任何想法为什么我会在 Web API 控制器上遇到这个问题？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-01T13:22:06.360

在找到永久解决方案之前，您可以使用该方法`System.Diagnostics.Debugger.Break()`强制在该行上发生中断 - 就像断点一样：

```
public ActionResult IndexCheckInOut(string providerKey, DateTime? date = null)
{
    System.Diagnostics.Debugger.Break();   
    return View("Index");
} 
```

以下是一些文章链接，可能会帮助您找到更持久的解决方案：

[**断点当前不会被命中**](http://forums.asp.net/t/1832287.aspx/1?The%20breakpoint%20will%20not%20currently%20be%20hit)

[**使用 Visual Studio 调试器进入 ASP.NET MVC 源代码**](http://weblogs.asp.net/gunnarpeipman/archive/2010/07/04/stepping-into-asp-net-mvc-source-code-with-visual-studio-debugger.aspx)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-10-04T11:41:47.050

对我来说，只需停止 IIS 并重新启动 Visual Studio。在进一步调查之前绝对值得一试。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-06-07T01:23:08.627

可能的解决方案：我忘记了我之前正在做一些远程调试，并且已将调试符号设置为从 UNC 路径而不是 Microsoft 符号服务器加载。

要解决此问题，请执行以下操作：工具 -> 选项 -> 调试 -> 符号 -> 确保选中“Microsoft 符号服务器”。

我还通过创建新的解决方案配置而不是基于任何现有配置（例如 DEBUG 配置）发现了这个问题。这导致`Debug Info`设置为`none`.

要解决此问题：右键单击您的项目 -> 属性 -> 构建 -> 确保设置了错误的解决方案配置 -> 单击`Advanced`-> 更改`Debug Info`为`full`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-02-25T18:00:42.123

打开：

工具 - 选项 - 调试 - 常规

选择：

*   启用 .NET Framework 源单步执行

*   启用源服务器支持（选择所有选项）

打开：

工具 - 选项 - 符号

选择**Microsoft 符号服务器**

单击**加载所有符号**

重建项目。

选择：

干净的

重建

重建解决方案并重试。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-09-11T15:23:46.423

我自己就遇到了这个问题，我把头发扯了大约一个小时，直到我意识到 Visual Studio 已经神秘地切换到在“发布”模式下运行项目。切换回“调试”模式并重新构建让我很满意。

可能是这个问题的一个非常利基的答案，但希望这对某人有所帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-08T12:08:15.377

我的问题如下

我在 IIS 中创建了一个虚拟目录，并在我的起始 URL 链接中使用该名称，例如 http://WebAPI/swagger/ui/index （我的符号未使用上述所有步骤加载）

1.  使用 IIS Express
2.  从名为 WebAPI 的 IIS 管理器中删除了网站
3.  我改回的起始 URL 是 http://localhost:59788/swagger/ui/index （来自 Visual Studio 的默认端口）

现在我的所有符号都已加载。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-09-11T19:03:27.100

我有同样的问题，但我的与添加配置转换有关。转到活动解决方案配置下的构建 > 配置管理器，确保您选择了调试。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-01-23T14:47:50.820

这解决了我的问题：

*   从系统托盘中的所有实例关闭\退出`IIS Express`（在 Windows 时钟旁边）。
*   删除项目目录中的文件`bin`夹`obj`
*   重新启动 Visual Studio
*   再次运行它

[![在此处输入图像描述](../Images/86c8c06e0f8554c03e965f37b038943a.png)](https://i.stack.imgur.com/e7Rh3.png)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-09-23T10:56:26.277

如果您的调试工作并突然停止工作，根据我的经验，最常见的原因是 IIS 中的问题。

1.  检查项目-> 属性-> 项目 URL 是否正确，
2.  使用 IISReset 重置 IIS

# c# - 将生成的字段绑定到剃刀视图中的模型

> ID：14107305
> 
> 赞同：0
> 
> 时间：2013-01-01T01:39:03.640
> 
> 标签：c#, asp.net-mvc, razor, knockout.js

更新：通过将 name 属性添加到添加的 select 标记来解决此问题，以便在提交时将其添加到 formelement 中。

我有一个部分观点，即 get 传递了一个具有外键的模型。局部视图的唯一目的是在数据库中为此模型创建一个新对象。我根据模型外部的内容为其中一个字段创建了一个下拉列表，现在当我发布表单时，该字段不包含在 api 帖子中以创建记录。（对于那些熟悉的人，是的，这几乎是开箱即用的联系示例，我正在尝试对其进行一些扩展并且可以使用一些帮助）

```
<form id="addContact" data-bind="submit: createContactFromForm">
@Html.ValidationSummary(true)

<fieldset>
    <legend>Contact</legend>

    @Html.EditorForModel()

    <div class="editor-label"><label>Store:</label></div> 
    <div class="editor-field" id="storediv">
        <select id="StoreId" **name="StoreId"** data-bind="options: stores, optionsText: 'Name', optionsValue: 'Id', optionsCaption: 'Choose...'"></select>
    </div>
    <p>
        <input type="submit" value="Save" />
    </p>
</fieldset>
</form> 
```

如何让 Store 字段成为表单提交模型的一部分？我正在覆盖提交以调用 knockoutjs 视图模型中的 createContactFromForm 函数。

更新了被调用的视图模型的一部分：

```
self.createContactFromForm = function (formElement) {
        // If valid, post the serialized form data to the web api
        $(formElement).validate();
        if ($(formElement).valid()) {
            $.post("api/contacts", $(formElement).serialize(), "json")
                .done(function (newContact) {
                    self.contacts.push(newContact);
                    $('#addContact')[0].reset();
                });
        }
    } 
```

服务器端模型：

```
public Contact()
    {
        this.Created = DateTime.Now;
        this.Emails = new List<Emails>();
    }

    [ScaffoldColumn(false)]
    public int Id { get; set; }
    [Required, MaxLength(256)]
    public string FirstName { get; set; }
    [Required, MaxLength(256)]
    public string LastName { get; set; }
    [ScaffoldColumn(false)]
    public string Name { get { return string.Concat(this.FirstName, " ", this.LastName); } set { } }
    [MaxLength(256)]
    public string EmailAddress {
        get
        {
            return this.Emails.Count == 0 ? string.Empty : this.Emails[0].EmailAddress;
        }
        set
        {
            if (this.Emails.Count == 0)
            {
                this.Emails.Add(new Emails());
            }
            this.Emails[0].EmailAddress = value;
        }

    }
    [MaxLength(50)]
    public string PhoneNumber { get; set; }
    [MaxLength(256)]
    public string Address { get; set; }
    [MaxLength(256)]
    public string City { get; set; }
    [MaxLength(50)]
    public string State { get; set; }
    [MaxLength(256)]
    public string ZipCode { get; set; }
    [Required]
    [ScaffoldColumn(false)]
    public int StoreId { get; set; }
    public Store Store { get; set; }
    [ScaffoldColumn(false)]
    public DateTime Created { get; set; }

    public virtual IList<Emails> Emails { get; protected set; } 
```

# java - 使用java在网站上进行视频流

> ID：14107306
> 
> 赞同：2
> 
> 时间：2013-01-01T01:39:13.333
> 
> 标签：java, javascript, flash

我正在开发一个用户可以上传和观看视频的网站。我以前从未做过这样的事情，需要一些指导。我希望将视频存储在我的服务器上，用户可以通过我网站上的视频播放器搜索和观看它们。实现这一点的 java 库是什么，我需要的其他技术是什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T06:17:34.103

以下是您可以考虑使用或研究的技术列表。

1.  **JSP + Servlet** = 您将实现自己的 MVC 实现（但如果您正在构建大型应用程序，除非您真的很擅长它，否则我不建议这样做。考虑第 2 点）

2.  **考虑使用 MVC 框架**（如 Struts2、Spring MVC 等）或像 Thorn 所说的那样，像 Jersey 那样的 REST 框架（虽然我没有尝试过使用 REST 框架）。

3.  **数据库访问**- 我需要解释原因吗？

4.  **ORM 库**- 使用 ORM 可以加快开发速度（尽管这可能是主观的），它使数据访问更加抽象和可移植，ORM 实现类知道如何编写特定于供应商的 SQL。

5.  **文件上传库 -**如果您打算将其用作 Struts2，您的框架曾经依赖于 Apache Commons 库（只需查看他们的文档）。

您说过用户会上传他们的视频，您会将它们存储在您的服务器中，您将在他们的网络浏览器中播放这些视频，您需要进行文件转换，为什么？

在 HTML5 中，由于并非所有浏览器都支持所有视频格式，因此如果您要使用 html5 播放器，则需要考虑将视频转换为另一种格式。[您可以在此处查看](http://www.w3schools.com/html/html5_video.asp)不同浏览器支持的不同文件格式

对于文件转换检查[这里](http://www.sauronsoftware.it/projects/jave/manual.php)

现在对于客户端视频，您可以使用[MediaElement.js](http://mediaelementjs.com/)，它有一个 flash 回退，以防万一用户视频不支持 HTML5。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T02:58:33.837

首先检查一下你的播放器：

[播放器](http://www.mediaelementjs.com/#howitworks)

现在你的逻辑需要有点不同。您应该制作视频的缩略图并通过链接将它们发送给播放器。这样，您只需要设置一个播放器并将 url 信息传递给它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T03:02:47.737

我建议不要从您需要掌握的技术列表开始这个项目，而是从您希望它看起来像的轮廓开始 - 用户将如何与站点交互？它有什么功能，您希望如何向用户展示它？接下来我会考虑数据。它将如何存储？视频文件将如何命名并与用户关联？我们需要存储视频的哪些属性？例如，每个视频文件都可以有一个关联的用户（发布者）、一些属性，如日期、文件大小、分辨率、帧速率。我们还会存储评论或评分吗？关键词？说明？可能您需要一个数据库来存储这些数据，但我只是将视频文件作为常规文件存储在目录中。

现在选择一组工具来完成这项工作......

1.  Java Servlet 或类似 Jersey 的 REST 框架。
2.  [使用Apache 公共库](http://commons.apache.org/fileupload/using.html)上传文件（如果使用 Jersey 框架，可能不需要这样做）
3.  数据库访问
4.  HTML 5 视频播放或 Flash 视频或 JavaFX 2

尚不支持所有浏览器使用 HTML5（基于浏览器的视频播放，无需插件）。

搜索功能也可以在 Java 中完成。您需要一些数据库技能，并且做好搜索绝非易事。但是，您为应用程序提供关键字并为您提供列出该关键字的所有视频的基本搜索应该很简单。

# php - 尝试使用 xpath 获取页面中的所有图像

> ID：14107307
> 
> 赞同：1
> 
> 时间：2013-01-01T01:39:28.833
> 
> 标签：php, xpath

我正在尝试使用 Xpath 捕获页面上的所有图像，然后遍历节点列表检查图像是否具有属性，如果它有我遍历属性直到我到达 src 现在我的问题是当我获得相对路径`/us/english/images/12/something.jpeg`时类似的东西..我的问题是：有没有办法获得完整的路径？

我想到了正则表达式返回的 src 并在主机不存在时查找主机使用站点的 url 但这可能很难检查..

我还想也许我应该解析 url 并检查 ['host'] 部分，如果主机部分有“。”点意味着有主机，我不应该添加它？

这是我到目前为止所拥有的：

```
$image_list = $xpath->query('//img');
    foreach($image_list as $element){
        if($element->hasAttributes()){
            foreach($element->attributes as $attribute){
                if(strtolower($attribute->nodeName) == 'src'){
                    echo $attribute->nodeName. ' = ' .$attribute->nodeValue.'<br>';
                }

            }
        }
    } 
```

将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T03:00:21.387

1.  将您的 xpath 查询更改为`//img[src]`. 这将返回所有`img`具有`src`属性的元素。使用`getAttribute`方法。你的代码会更短更高效。

    ```
    $image_list = $xpath->query("//img[@src]");
    for($i=0;$i<$image_list->length; $i++){
        echo "src = ". $image_list->item($i)->getAttribute("src"). "\n";
    } 
    ```

2.  关于相对路径问题，您应该找到[`base`elements](http://www.w3.org/TR/html-markup/base.html) `href`属性。如果找到，则将其用作相对 url 的基本 URI。如果未找到，请尝试查找此文档的 URL。这将是基本 URI。

### 更新

因为您想读取复杂 url 中的图像文件路径，例如

```
//lp.hm.com/hmprod?set=key[source],value[/environment/2012/P01_2972_044R_0.‌​‌​jpg]&amp;set=key[rotate],value[0.65]&amp;set=key[width],value[2921]&amp;set=key[‌​h‌​eight],value[3415]&amp;set=key[x],value[1508]&amp;set=key[y],value[495]&amp;se‌​t=k‌​ey[type],value[FASHION_FRONT]&amp;call=url[file:/product/large] 
```

你最好使用这样的自定义解析器，

```
$url = $image_list->item($i)->getAttribute("src");
$q = strpos($url, "?");
$query = substr($url, $q+1);
$params = explode("&", html_entity_decode($query));
$data = array();
foreach($params as $e){
    if(preg_match("/key\[([^\]]+)\],value\[([^\]]+)\]/", $e, $m))
        $data[$m[1]]=$m[2];
    elseif(preg_match("/call=([^\[]+)\[([^\]]+)\]/", $e, $m))
        $data[$m[1]]=$m[2];
}

print_r($data); 
```

[键盘](http://codepad.viper-7.com/XUiTlW)

# delphi-2009 - 在另一个过程中使用一个过程中的变量值

> ID：14107308
> 
> 赞同：-1
> 
> 时间：2013-01-01T01:39:38.957
> 
> 标签：delphi-2009

我可以获取一个过程中声明的变量的值，然后在另一个过程中的 if 条件中使用它，请问如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T01:41:55.743

您必须将该值作为输入参数传递给另一个过程，或者将该值存储在两个过程都可以访问的位置，例如如果两个过程都是同一类的成员，则存储在一个类成员中，或者存储在一个全局变量中。您的问题在细节上非常模糊，因此除此之外我无法提供太多答案。

# macos - 如何使用 sed 替换源文件中的版权/许可标头？

> ID：14107309
> 
> 赞同：10
> 
> 时间：2013-01-01T01:39:51.650
> 
> 标签：macos, unix, command-line, sed, licensing

我需要用 Apache License 2.0 头文件替换我所有 Java 源文件中的 LGPL 许可证头文件，即这个

```
/*
 * Copyright (c) 2012 Tyler Treat
 * 
 * This file is part of Project Foo.
 *
 * Project Foo is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Lesser General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * Project Foo is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public License
 * along with Project Foo.  If not, see <http://www.gnu.org/licenses/>.
 */ 
```

需要成为

```
/*
 * Copyright (c) 2012 Tyler Treat
 * 
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *  http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ 
```

我认为最简单的方法是使用 sed 对所有出现的此版权标头进行查找和替换。我有点像 Unix 新手，所以我在让命令按我需要的方式工作时遇到了问题——特别是在处理多行字符串时。基本上，类似于下面的内容，除了代替`foo`and的相应标题`bar`：

```
find . -name "*.java" -print | xargs sed -i 's/foo/bar/g' 
```

我知道 sed 一次只能在一条线上工作，所以也许有更好的解决方案？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-01T02:11:08.783

```
find . -name "*.java" -print0 | xargs -0 \
sed -i -e '/Project Foo is free software/,/along with Project Foo/c\
 * Licensed under the Apache License, Version 2.0 (the "License");\
 * you may not use this file except in compliance with the License.\
 * You may obtain a copy of the License at\
 *\
 *  http://www.apache.org/licenses/LICENSE-2.0\
 *\
 * Unless required by applicable law or agreed to in writing, software\
 * distributed under the License is distributed on an "AS IS" BASIS,\
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\
 * See the License for the specific language governing permissions and\
 * limitations under the License.' 
```

该`c`命令将行范围更改为指定的文本。该范围由包含“Project Foo is free software”的行到包含“aong with Project Foo”的行标识。表示 GNU的`-i`选项；因此，我假设您也有 GNU ，并且使用并避免文件名中出现空格等问题。`sed``sed``find``xargs``-print0``-0`

为此，我可能很想将`sed`脚本放入文件 ( `sed.script`) 中，然后可以将其用于：

```
find . -name "*.java" -exec sed -i -f sed.script {} + 
```

我认为这更整洁，但美丽在旁观者的眼中。

* * *

> 只有一个问题：星号上的对齐有点偏离，我需要使用某种空白字符来缩进它们吗？我尝试在替换字符串中添加空格，但这似乎没有效果。

Grrr ......这是我可以做到的那种恼怒（你也是）。似乎“更改”数据行上的前导空格被删除了`sed`。似乎是`sed`而不是`bash`；我`ksh`使用脚本文件而不是`-e`命令行上的选项得到了相同的结果。您不能在输出时编辑“更改”数据。

一个可行的技巧——但你可能不喜欢它：

```
$ cat sed.script
/Project Foo is free software/,/along with Project Foo/c\
 * Licensed under the Apache License, Version 2.0 (the "License");\
 * you may not use this file except in compliance with the License.\
 * You may obtain a copy of the License at\
 *\
 *  http://www.apache.org/licenses/LICENSE-2.0\
 *\
 * Unless required by applicable law or agreed to in writing, software\
 * distributed under the License is distributed on an "AS IS" BASIS,\
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\
 * See the License for the specific language governing permissions and\
 * limitations under the License.
$ s2p -f sed.script > perl.script
$ find . -name "*.java" -exec perl -f perl.script -i.bak {} +
$ 
```

该`s2p`程序是 Perl 发行版的标准部分，它将`sed`脚本转换为 Perl 脚本，但它保留了替代数据中的前导空格。我对此并不热衷，但我能想到的唯一选择是通过每个文件两次。替换数据可能是：

```
$ cat sed.script
/Project Foo is free software/,/along with Project Foo/c\
@*@ Licensed under the Apache License, Version 2.0 (the "License");\
@*@ you may not use this file except in compliance with the License.\
@*@ You may obtain a copy of the License at\
@*@\
@*@  http://www.apache.org/licenses/LICENSE-2.0\
@*@\
@*@ Unless required by applicable law or agreed to in writing, software\
@*@ distributed under the License is distributed on an "AS IS" BASIS,\
@*@ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\
@*@ See the License for the specific language governing permissions and\
@*@ limitations under the License.
$ 
```

完成主要文本替换后，您将执行以下操作：

```
$ find . -name "*.java" -exec sed -i 's/^@\*@/ */' {} +
$ 
```

这将跟踪开始的行`@*@`并将该文本替换为“ `*`”（空白星号）。不那么整洁，但我相信你不会经常这样做。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-01T02:11:11.497

## 使用 GNU Sed 替换部分许可证

您可以使用 GNU sed 通过一些正则表达式行匹配和读取表达式来解决此问题。以下是步骤。

### 使用文件保存替换文本

首先，创建一个文件来保存许可证的替换部分：

```
cat << EOF > /tmp/license
 * 
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *  http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
EOF 
```

### 运行实际的 Sed 调用

接下来，运行*find*收集您的文件列表，并调用以下 sed 脚本进行更改：

```
find . -name '*.java' |
xargs sed -i'' '/Copyright.*Tyler Treat/,/\*\// {
                    /Copyright/n
                    /\*\//r /tmp/license
                    d
                }' 
```

### 兼容性说明

此解决方案可能适用于其他版本的 sed，也可能不适用，但已在本地测试并已知适用于 GNU sed 版本 4.2.1。如果它不适用于您的 OS X 版本附带的 sed 版本，您可以通过[MacPorts](http://www.macports.org/)或类似工具安装 GNU sed。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-01T17:36:05.183

假设 file1 包含您的原始文本，而 file2 包含您的替换版权注释：

```
awk 'f; /\*\//{system("cat file2");f=1}' file1 
```

以上只是在原始文件中查找第一个注释结尾行，当它找到替换文件并打开原始文件其余部分的打印时。

# html - 与结构化克隆算法兼容的序列化格式？

> ID：14107319
> 
> 赞同：13
> 
> 时间：2013-01-01T01:42:30.757
> 
> 标签：html

一个存在吗？结构化克隆算法是为 HTML5 定义的，以允许浏览器采用一致的机制来持久化和传输复杂的 Javascript 对象，由 IndexedDB 和 window.postMessage() 使用，但它不是序列化格式。有谁知道这种可以代表 SCA 中所有有效内容的格式？

除了 JSON 可以表示的类型之外，这还必须包括对象之间的循环引用，以及 RegExp 对象、Blob、File、FileList 和 ImageData 对象。

有什么符合要求的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T17:27:26.713

html5 浏览器中*存在*结构化克隆算法是

[http://www.w3.org/TR/2011/WD-html5-20110525/common-dom-interfaces.html#safe-passing-of-structured-data](http://www.w3.org/TR/2011/WD-html5-20110525/common-dom-interfaces.html#safe-passing-of-structured-data)

它至少在FF中实现：

[https://developer.mozilla.org/en-US/docs/DOM/The_structured_clone_algorithm](https://developer.mozilla.org/en-US/docs/DOM/The_structured_clone_algorithm)

我认为要使用它，您只需将对象图（可能是循环的）放入以下消息参数中：

> `window.postMessage(message, targetOrigin);`.

[https://developer.mozilla.org/en-US/docs/DOM/window.postMessage](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage)

它在这里含蓄地说：

> 注意：在 Gecko 6.0 之前（Firefox 6.0 / Thunderbird 6.0 / SeaMonkey 2.3），message 参数必须是字符串。从 Gecko 6.0 (Firefox 6.0 / Thunderbird 6.0 / SeaMonkey 2.3) 开始，消息参数使用结构化克隆算法进行序列化。这意味着您可以将各种数据对象安全地传递到目标窗口，而无需自己序列化它们。

# mysql - mysql 存储过程从基于数据库的队列中弹出

> ID：14107322
> 
> 赞同：3
> 
> 时间：2013-01-01T01:43:43.253
> 
> 标签：mysql, sql, database, stored-procedures, mybatis

我们有一个系统，它有一个基于数据库的队列，用于在线程中而不是实时处理项目。目前在Mybatis中实现，在mysql中调用这个存储过程：

```
DROP PROCEDURE IF EXISTS pop_invoice_queue;
DELIMITER ;;
CREATE PROCEDURE pop_invoice_queue(IN compId int(11), IN limitRet int(11)) BEGIN

   SELECT LAST_INSERT_ID(id) as value, InvoiceQueue.* FROM InvoiceQueue 
      WHERE companyid = compId 
      AND (lastPopDate is null OR lastPopDate < DATE_SUB(NOW(), INTERVAL 3 MINUTE)) LIMIT limitRet FOR UPDATE;
   UPDATE InvoiceQueue SET lastPopDate=NOW() WHERE id=LAST_INSERT_ID(); 

END;;

DELIMITER ; 
```

问题是这会从队列中弹出 N 个项目，但只会更新从队列中弹出的最后一个项目的 lastPopDate 值。因此，如果我们使用 limitRet = 5 调用这个存储过程，它将从队列中弹出五个项目并开始处理它们，但只有第五个项目将设置 lastPopDate，因此当下一个线程到来并从队列中弹出时，它将获取项目1-4 和第 6 项。

我们怎样才能让它更新从数据库中“弹出”的所有 N 条记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T03:29:20.477

如果您愿意`BIGINT`通过以下方式向表中添加字段：

```
ALTER TABLE InvoiceQueue
ADD uuid BIGINT NULL DEFAULT NULL,
INDEX ix_uuid (uuid); 
```

然后您可以先进行更新，然后通过以下方式选择更新的记录：

```
CREATE PROCEDURE pop_invoice_queue(IN compId int(11), IN limitRet int(11))
BEGIN
   SET @uuid = UUID_SHORT();

   UPDATE InvoiceQueue
   SET    uuid = @uuid,
          lastPopDate = NOW()
   WHERE  companyid = compId
   AND    uuid IS NULL 
   AND    (lastPopDate IS NULL OR lastPopDate < NOW() - INTERVAL 3 MINUTE)
   ORDER BY
          id
   LIMIT  limitRet;

   SELECT * 
   FROM   InvoiceQueue 
   WHERE  uuid = @uuid
   FOR    UPDATE;
END;; 
```

对于`UUID_SHORT()`返回唯一值的函数，每台机器每秒调用它的次数不应超过 1600 万次。访问[`here`](http://dev.mysql.com/doc/refman/5.5/en/miscellaneous-functions.html#function_uuid-short)了解更多详情。

出于性能考虑，您可能希望将`lastPopDate`字段更改为，`NOT NULL`因为该`OR`子句将导致您的查询不使用索引，即使索引可用：

```
ALTER TABLE InvoiceQueue
MODIFY lastPopDate DATETIME NOT NULL DEFAULT '0000-00-00'; 
```

然后，如果您还没有，您可以在 // 字段上添加一个索引`companyid`，`lastPopDate`如下`uuid`所示：

```
ALTER TABLE InvoiceQueue
ADD INDEX ix_company_lastpop (companyid, lastPopDate, uuid); 
```

然后，您可以从查询中删除该`OR`子句：`UPDATE`

```
 UPDATE InvoiceQueue
   SET    uuid = @uuid,
          lastPopDate = NOW()
   WHERE  companyid = compId 
   AND    lastPopDate < NOW() - INTERVAL 3 MINUTE
   ORDER BY
          id
   LIMIT  limitRet; 
```

这将使用您刚刚创建的索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T02:53:24.010

由于 mysql 既没有收集也没有输出/返回子句，我的建议是使用临时表。就像是 ：

```
CREATE TEMPORARY TABLE temp_data 
SELECT LAST_INSERT_ID(id) as value, InvoiceQueue.* FROM InvoiceQueue 
  WHERE companyid = compId 
  AND (lastPopDate is null OR lastPopDate < DATE_SUB(NOW(), INTERVAL 3 MINUTE)) LIMIT limitRet FOR UPDATE;  
UPDATE InvoiceQueue 
INNER JOIN temp_data ON (InvoiceQueue.PKColumn = temp_data.PKColumn)
SET lastPopDate=NOW();
SELECT * FROM temp_data ;
DROP TEMPORARY TABLE temp_data; 
```

此外，我推测这`select ... for update`可能会导致死锁（当然，如果从不同的会话调用该过程） - 据我所知，不能保证行被锁定的顺序（即使你有`order by`，行也可能以不同的顺序被锁定）。我建议仔细检查文档。

# objective-c - 使用presentationlayer的renderincontext的屏幕截图不起作用

> ID：14107327
> 
> 赞同：3
> 
> 时间：2013-01-01T01:44:45.823
> 
> 标签：objective-c, ios, cocoa-touch, animation, calayer

我按照[此处](https://stackoverflow.com/questions/4498135/how-to-capture-iphone-screen-with-animating-uiimageview)的说明在动画期间捕获屏幕截图（我正在尝试使用动画标签录制 UIView 以将其捕获为视频）

这是我在 ViewController (getframe) 中的屏幕截图代码

```
-(UIImage*) getCurrentFrame {
    UIGraphicsBeginImageContext(self.view.bounds.size);
CGContextRef mycontext =  UIGraphicsGetCurrentContext();
    [[[self.view layer] presentationLayer] renderInContext:mycontext]; 

    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return image;
} 
```

当我尝试制作屏幕截图的视频时，我反复只看到起始帧 - 因为我的线程（使用 AVAssetwriter 示例）抓取后续屏幕截图，屏幕抓取中没有任何动作。在 AVAssetWriterInput 期间，在 while 循环中使用块调用 screengrab。

我的动画是标签上的简单核心动画 - 向下滚动示例

```
mTextLabel.frame = CGRectMake(mTextLabel.frame.origin.x,
                             -100,
                             mTextLabel.frame.size.width,
                             mTextLabel.frame.size.height);
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration: delay];
[UIView setAnimationTransition:UIViewAnimationTransitionNone
                       forView:mTextLabel cache:YES];
mTextLabel.frame = CGRectMake(mTextLabel.frame.origin.x,
                             240,
                             mTextLabel.frame.size.width,
                             mTextLabel.frame.size.height);
[UIView commitAnimations]; 
```

我尝试用块动画 animatewithDuration 替换旧学校动画，但得到相同的结果

有什么建议么？使用 ios 6 和最新的 xcode（已正确导入 Quartzcore）

苹果开发中心[表示](http://developer.apple.com/library/ios/#qa/qa1703/_index.html)，有些东西可能不会被捕获。

是否有另一种选择使用计时器和间歇性抓取屏幕来上演动画（必须手动编码动画）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T21:13:47.013

编辑-万岁！苹果终于添加了这个-

```
[view drawViewHierarchyInRect:self.view.bounds afterScreenUpdates:NO]; 
```

在开始和结束图形上下文调用之间换行！

[------------ pre iOS7](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CALayer_class/Introduction/Introduction.html) --------------- 来自 Apple 的 CALayer 文档！在 renderInContext 他们清楚地说

“重要提示：此方法的 OS X v10.5 实现**不支持整个 Core Animation 合成模型**。不会渲染 QCCompositionLayer、CAOpenGLLayer 和 QTMovieLayer 图层。此外，不会渲染使用 3D 变换的图层，也不会渲染指定图层backgroundFilters、filters、compositingFilter 或掩码值。OS X 的未来版本可能会添加对渲染这些层和属性的支持。

对我来说唯一的选择是使用服务器端解决方案或通过在时间 t 手动覆盖转换来逐帧手动编码动画。

# java - 在构造函数中使用创建的 Java 方法

> ID：14107328
> 
> 赞同：-3
> 
> 时间：2013-01-01T01:44:51.633
> 
> 标签：java, methods, constructor

我创建了一个名为 fullPanel() 的方法，它检查 JPanel 中组件的数量，如果是某个数量，则返回 true。但是，当我在类的构造函数中使用此方法时，出现错误：找不到符号。我是方法的新手，所以我不确定我在哪里搞砸了，或者我是否在错误的地方创建了方法。

以下是相关代码：

```
public class Board extends JPanel {
  public boolean fullPanel(JPanel panel) {
    boolean full = false;
    Component[] components = panel.getComponents();
    if (components.length == 0) return full;
    full = true;
    return full;
  }

  public Board() {
    addMouseListener(new MouseAdapter() {
      @Override
      public void mousePressed(MouseEvent event) {
        if (selectedPanel.fullPanel() == true) {}
      }
    });
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T03:39:50.263

尝试这个：

```
 public Board() {
    addMouseListener(new MouseAdapter() {
      @Override
      public void mousePressed(MouseEvent event) {
        if (fullPanel(selectedPanel)) {} // note removal of redundant "== true"
      }
    });
  } 
```

# javascript - Java脚本中的以下声明有什么区别

> ID：14107329
> 
> 赞同：-4
> 
> 时间：2013-01-01T01:45:20.587
> 
> 标签：javascript

以下2个声明有什么区别？

```
var vehiclePrototype = function{
    function init(carModel) {
        this.model = carModel;
    }

}; 
```

和

```
var vehiclePrototype = {
    init: function (carModel) {
        this.model = carModel;
    }

}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T01:50:19.097

在第一个中，`init()`仅在外部函数内可用。 `vehiclePrototype.init()`不会工作。

在第二个中，您正在创建一个对象并将一个函数分配给该`init`属性。 `vehiclePrototype.init()`将工作。

此外，您的第一个示例中存在语法错误。你需要使用`var vehiclePrototype = function () {`你的第一行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T01:51:32.543

首先，顶部被破坏了，所以天真地顶部被破坏了，底部是一个包含函数的对象文字。

假设语法正确，第一个仍然没有做任何事情，因为 init 的作用域是函数并且没有办法逃到外面。不同之处在于顶部是一个空函数，它与包含函数的对象文字不同。

也许你想要这个：

```
var vehiclePrototype = function () {
    this.init = function (carModel) {
        this.model = carModel;
    };
}; 
```

# php - 正则表达式只允许小写字母

> ID：14107331
> 
> 赞同：10
> 
> 时间：2013-01-01T01:45:30.133
> 
> 标签：php, regex

> **可能重复：**
> [正则表达式：低大写、点、零空格](https://stackoverflow.com/questions/3579531/regular-expressions-low-caps-dots-zero-spaces)

我怎样才能改变下面的正则表达式只允许小写字母？

```
function valid_username($username, $minlength = 3, $maxlength = 30)
{

    $username = trim($username);

    if (empty($username))
    {
        return false; // it was empty
    }
    if (strlen($username) > $maxlength)
    {
        return false; // to long
    }
    if (strlen($username) < $minlength)
    {

        return false; //toshort
    }

    $result = ereg("^[A-Za-z0-9_\-]+$", $username); //only A-Z, a-z and 0-9 are allowed

    if ($result)
    {
        return true; // ok no invalid chars
    } else
    {
        return false; //invalid chars found
    }

    return false;

} 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-01T01:47:56.150

您的字符类中有 AZ 和 az，只需省略 AZ 以仅允许 az（小写）字母。IE

```
"^[a-z0-9_\-]+$" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-01T01:56:11.377

您只需`A-Z`从正则表达式中删除。

此外，由于您已经在使用正则表达式，您可以将所有内容都放入其中，如下所示：

```
function valid_username($username, $minlength = 3, $maxlength = 30)
{
    $regex = "/^[a-z0-9_\-]{{$minlength},{$maxlength}}$/";

    return preg_match($regex, trim($username)) === 1;
} 
```

它将确保用户名不为空，具有允许的长度，并且只包含允许的字符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-01T01:48:40.343

该功能`ereg`已弃用。使用 preg_match。你为什么不直接使用这个功能`strtolower`？preg_match('/^[a-z0-9]+$/', $nickname);

编辑：

> preg_match('/^[az]+$/', $user);

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-01T01:55:02.720

最好的选择是 Dave 和 Jordi12100 的答案的组合：

使用`pre_match()`和退出 AZ

# python - 如何在 App Engine 上将 PATCH 方法与适用于 Python 的 Google API 客户端库一起使用？

> ID：14107336
> 
> 赞同：2
> 
> 时间：2013-01-01T01:47:45.807
> 
> 标签：python, google-app-engine, google-drive-api

我正在尝试使用适用于 Python 的 Google APIs 客户端库来重命名驱动器文件，这里是重命名函数：

```
def rename_file(service, file_id, new_title):
"""Rename a file.

Args:
    service: Drive API service instance.
    file_id: ID of the file to rename.
    new_title: New title for the file.
Returns:
    Updated file metadata if successful, None otherwise.
"""
try:
    file = {'title': new_title}
    # Rename the file.
    updated_file = service.files().patch(
            fileId=file_id,
            body=file,
            fields='title').execute()
    return updated_file
except errors.HttpError, error:
    logging.error('An error occurred: %s' % error)
    return None 
```

但是得到错误，这是引用：

```
 Traceback (most recent call last):
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2/webapp2.py", line 1535, in __call__
    rv = self.handle_exception(request, response, e)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2/webapp2.py", line 1529, in __call__
    rv = self.router.dispatch(request, response)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2/webapp2.py", line 1278, in default_dispatcher
    return route.handler_adapter(request, response)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2/webapp2.py", line 1102, in __call__
    return handler.dispatch()
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2/webapp2.py", line 572, in dispatch
    return self.handle_exception(e, self.app.debug)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2/webapp2.py", line 570, in dispatch
    return method(*args, **kwargs)
  File "/myproduct/libs/oauth2client/appengine.py", line 469, in check_oauth
    return method(request_handler, *args, **kwargs)
  File "/myproduct/main.py", line 31, in get
    new_title="file new name")
  File "/myproduct/gapi.py", line 148, in rename_file
    fields='title').execute()
  File "/myproduct/libs/oauth2client/util.py", line 120, in positional_wrapper
    return wrapped(*args, **kwargs)
  File "/myproduct/libs/apiclient/http.py", line 676, in execute
    headers=self.headers)
  File "/myproduct/libs/oauth2client/util.py", line 120, in positional_wrapper
    return wrapped(*args, **kwargs)
  File "/myproduct/libs/oauth2client/client.py", line 420, in new_request
    redirections, connection_type)
  File "/myproduct/libs/httplib2/__init__.py", line 1588, in request
    (response, content) = self._request(conn, authority, uri, request_uri, method, body, headers, redirections, cachekey)
  File "/myproduct/libs/httplib2/__init__.py", line 1336, in _request
    (response, content) = self._conn_request(conn, request_uri, method, body, headers)
  File "/myproduct/libs/httplib2/__init__.py", line 1273, in _conn_request
    conn.request(method, request_uri, body, headers)
  File "/myproduct/libs/httplib2/__init__.py", line 1112, in request
    validate_certificate=self.validate_certificate)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/api/urlfetch.py", line 265, in fetch
    allow_truncated, follow_redirects, validate_certificate)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/api/urlfetch.py", line 286, in make_fetch_call
    raise InvalidMethodError('Invalid method %s.' % str(method))
InvalidMethodError: Invalid method PATCH. 
```

那么直接使用rename_file函数应该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T19:41:13.570

如错误消息所示，`PATCH`尚不支持`urlfetch`，但已向 App Engine 团队提交了一个[问题](http://code.google.com/p/googleappengine/issues/detail?id=6316)，并且该问题已得到确认。

同时，您可以修补`httplib2`以发送`X-HTTP-METHOD-OVERRIDE`标头，而不是使用该`PATCH`方法，如[针对](http://code.google.com/p/httplib2/issues/detail?id=219).`httplib2`

由于该补丁引用了一些旧代码，因此我在此处提供了相关代码段：

```
UNAUTHORIZED_METHODS = ['patch']
HTTP_METHOD_OVERRIDE_HEADER = 'X-HTTP-Method-Override'
HTTP_OVERRIDE_METHOD = 'POST'

class AppEngineHttpConnection(httplib.HTTPConnection):
  ...
  def request(self, method, url, body=None, headers={}):
    if method.lower() in UNAUTHORIZED_METHODS:
      # No side-effects on provided headers.
      new_headers = {}
      new_headers.update(headers)
      new_headers[HTTP_METHOD_OVERRIDE_HEADER] = method
      method = HTTP_OVERRIDE_METHOD
      headers = new_headers
    super(AppEngineHttpConnection, self).request(method, url, body, headers) 
```

由于`request`现在只是在 中定义的那个`httplib.HTTPConnection`，我们可以在更改我们需要的一个标头时重新使用它。

该版本将需要类似的覆盖，`HTTPS`因为它不继承自`AppEngineHttpConnection`.

# php - Zend Framework 2 Db\Adapter\Adapter 查询结果集，如 ZF1

> ID：14107346
> 
> 赞同：9
> 
> 时间：2013-01-01T01:51:24.540
> 
> 标签：php, database, frameworks, zend-framework2

只需要了解 ZF2 中一些简单的数据库查询。在 ZF1 中，我有这样的简单方法：

```
public function recordset()
{
// listing of all records 
$db = Zend_Registry::get('db');
$sql = "SELECT " . $this->_selectlist() .
    " from customer c";
$r = $db->fetchAll($sql);
return $r;
} 
```

在 ZF2 中，我将如何做同样的事情？我尝试了以下方法，但这只是返回看起来像“结果”对象的东西，但我想要的只是一个像 ZF1 对 fetchAll 所做的数组。如果我必须迭代结果对象只是为了稍后提供数组，然后必须再次迭代，这似乎是一些重复的工作。

无论如何，这是我目前在 ZF2 中所拥有的：

```
//above the controller start I have: use Zend\Db\Adapter\Adapter as DbAdapter;

public function blaAction()
{
    $db = new DbAdapter(
        array(
            'driver'        => 'Pdo',
            'dsn'            => 'mysql:dbname=mydb;host=localhost',
            'username'       => 'root',
            'password'       => '',
            )
    );
    $sql = 'select * from customer';
    $stmt = $db->query($sql);
    $results = $stmt->execute();
    $this->view->data = $results;
    return $this->view;
} 
```

在输出中，我得到这个：

```
object(Zend\Db\Adapter\Driver\Pdo\Result)#197 (8) { 
     ["statementMode":protected]=> string(7) "forward" ["resource":protected]=> object(PDOStatement)#195 (1) { 
        ["queryString"]=> string(22) "select * from customer" 
  } ["options":protected]=> NULL ["currentComplete":protected]=> bool(false) ["currentData":protected]=> NULL ["position":protected]=> int(-1) ["generatedValue":protected]=> string(1) "0" ["rowCount":protected]=> NULL 
} 
```

但是，如果我将 $results 更改为，`$results->count();` 我确实会看到记录数。我如何以数组的形式获取数据？（完整的记录集）

有一次我确实看到了类似的东西： `$results->current()` 但这只返回了一条记录。

只是一个旁注。我确实看到了我可以使用的所有表格抽象类，但是在我学习的这一点上，我不想这样做。我只想要一些简单的按需查询，它们可以像在 ZF1 中那样返回数组。在 ZF2 中，似乎有太多“连接”配置中的东西和看起来有点矫枉过正的东西。但是，作为一个框架，我喜欢灵活性，我在 ZF1 中开发的主要应用程序可以真正受益于 ZF2 的模块化。（否则我可能会使用其他框架）

请原谅我的无知，非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-07T04:05:54.277

来自[http://framework.zend.com/manual/2.0/en/modules/zend.db.result-set.html](http://framework.zend.com/manual/2.0/en/modules/zend.db.result-set.html)：

> Zend\Db\ResultSet 是 Zend\Db 的一个子组件，用于抽象行集生成查询的迭代。

因此，您可以执行以下操作：

```
$statement = $db -> query($sql);

/** @var $results Zend\Db\ResultSet\ResultSet */
$results = $statement -> execute();

$returnArray = array();
// iterate through the rows
foreach ($results as $result) {
    $returnArray[] = $result;
} 
```

现在您可以将其发送到视图：

```
return new ViewModel(array('results' => $returnArray)); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-02T08:18:55.410

好的，我想我明白了。至少这暂时可以完成这项工作。基本上，您必须添加一个额外的步骤并将结果对象提供给具有 toArray 便利方法的 ResultSet 对象。我想这可以通过一百万种其他方式完成，但是……这行得通。

请记住，我不会在控制器中执行此操作，甚至不会以这种方式执行此操作，但此时它只是一个测试。有时我希望它可用，如果需要，这就是 ZF2*可以*做到的。（不管好坏习惯）

在控制器的顶部添加/使用 ResultSet：

```
use Zend\Db\ResultSet\ResultSet; 
```

这是工作测试操作：

```
public function blaAction()
{
    $db = new DbAdapter(
        array(
            'driver'        => 'Pdo',
            'dsn'            => 'mysql:dbname=mydb;host=localhost',
            'username'       => 'root',
            'password'       => '',
            )
    );
    $sql = 'select * from customer 
        where cust_nbr > ? and cust_nbr < ?';
    $sql_result = $db->createStatement($sql, array(125000, 125200))->execute();
    if($sql_result->count() > 0){
        $results = new ResultSet();
        $this->view->data = $results->initialize($sql_result)->toArray();
    }
    return $this->view;
} 
```

toArray 只是为你做一个 foreach 循环，所以，我想它仍然添加了我想避免的额外数组循环，但是没有查看他们的代码的 ZF1 版本，也许它仍然在做同样的事情。

我可能会为 Zend\Db 创建一个简单的 db 包装类，它替换 ZF1 中的 Zend_Registry 语句并添加 fetchAll 和 fetchOne 方法，这样我可以更轻松地将一堆 ZF1 代码快速移植到 ZF2。

感谢您在评论中的投入，我很感激。:)

哦，我也想提一下。我遇到了某人创建的这个*桥牌*课程，这也可能会有所帮助： [https ://github.com/fballiano/zfbridge](https://github.com/fballiano/zfbridge)

**编辑：** 所以返回的适配器结果是可迭代的。我不确定我采取了哪些步骤导致了我的困惑，但是 $db->query 中的结果作为 Pdo\Result 对象返回，并且可以很容易地在 foreach 中循环。让我感到困惑的是，如果你 var_dump 它，它不会显示数组数据，而只是显示对象。这使我走上了一条完全混乱的道路。

现在，即使上述方法有效，这也是更好的 IMO，因为我们可以获取该对象，将其发送到我们想要的地方以便稍后进行迭代。（而不是循环整个事物以首先创建一个数组，只是迭代另一个循环，那样浪费时间）

这是一个我更喜欢的工作示例。你只需循环对象，就有你的数据！呃！不知道我有时是怎么想念简单的事情的。:)

```
public function blaAction()
{
    $db = new DbAdapter(
        array(
            'driver'        => 'Pdo',
            'dsn'            => 'mysql:dbname=gwdb;host=localhost',
            'username'       => 'root',
            'password'       => '',
            )
    );
    $sql = 'select * from customer 
        where cust_nbr > ? and cust_nbr < ?';

    $rs = $db->query($sql)->execute(array(125000, 125200));
    // Source of confusion: this doesn't dump the array!!!
    // It dumps the object properties for Pdo\Result
    Debug::dump($rs);
    // but it is still able to iterate records directly
    // without toArray
    foreach ($rs as $row){
        Debug::dump($row);
    }

    return $this->view;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-07-16T07:19:30.363

经过长时间的搜索，我以这种方式在 ZF2 中处理我的 SQL 查询

```
 $sql = new \Zend\Db\Sql\Sql($this->tableGateway->getAdapter());
    $select = $sql->select();
    $select->from('table'); 
    $select->columns(array('*'));
    $select->join("join table", "table.id = join table.id", array("*"), "left");
    $statement = $sql->prepareStatementForSqlObject($select);
    $results = $statement->execute();
    return iterator_to_array($results)); 
```

诀窍是 PHP 函数 iterator_to_array

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-12-31T18:32:41.110

您可以通过执行以下操作来避免 foreach 循环：

```
$statement = $db->query($sql);

/** @var $results Zend\Db\ResultSet\ResultSet */
$results = $statement->execute();

$data = $result->getResource()->fetchAll();
// Now data is an array 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-09-24T03:49:07.953

我的英文很烂
我也遇到过这个问题，$returnType 定义在 Zend\Db\ResultSet\ResultSet
我们可以给 Zend\Db\Adapter\Adapter 第三个参数，像这样

```
$adapter = new Zend\Db\Adapter\Adapter($db_config,null,new Zend\Db\ResultSet\ResultSet('array'));
$re = $adapter->query('select * from mooncake', $adapter::QUERY_MODE_EXECUTE);
$s = $re->current();
var_dump($s); 
```

现在，$s 是数组

# objective-c - 从链接到注释的 UIAlertView 传递信息

> ID：14107348
> 
> 赞同：1
> 
> 时间：2013-01-01T01:51:37.677
> 
> 标签：objective-c, xcode, mapkit

我是 Xcode 的新手，所以如果我的问题很愚蠢，请原谅我的问题

我有一个链接到 UIAlertView 框的注释，它有两个选择（关闭，到这里的方向）第二个按钮应该打开苹果地图应用程序并立即为用户提供轮流导航。

现在我的问题是我的地图上有很多注释，当按下每个注释时，用户必须获得导航选项。所以我没有固定的 MKPlacemark，我需要将信息从按下的注释传递给 MKPlacemark，以便 MKMapItem 获得所需的航向位置。

我的代码是：

我的 Annotation 方法将显示 UIAlertView：

```
- (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control{
// get reference to the annotation to access its data
VBAnnotation *ann = (VBAnnotation *)view.annotation;
// deselect the button
[self.mapView deselectAnnotation:ann animated:YES];

// display alert view to the information
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:ann.title message:ann.info delegate:self cancelButtonTitle:@"close" otherButtonTitles:@"direction to here", nil];
[alert show];
} 
```

这是我的 UIAlertView 按钮操作：

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {
NSString *title = [alertView buttonTitleAtIndex:buttonIndex];
if([title isEqualToString:@"direction to here"])
{        

//now here i tried a fixed coordination, but i need to pass the actual coordination pressed by the UIAlertView
CLLocationCoordinate2D coordinate;
    coordinate.latitude = 24.41351;
    coordinate.longitude = 39.543002;

    MKPlacemark *placemark = [[MKPlacemark alloc] initWithCoordinate:coordinate addressDictionary:nil];
    MKMapItem *navigation = [[MKMapItem alloc]initWithPlacemark:placemark];
    NSDictionary *options = @{MKLaunchOptionsDirectionsModeKey : MKLaunchOptionsDirectionsModeWalking};
    [navigation openInMapsWithLaunchOptions:options];

}
} 
```

这是我的注释列表的示例

```
NSMutableArray *annotations = [[NSMutableArray alloc] init];
CLLocationCoordinate2D location;
VBAnnotation *ann;

//Annotations List

// Mecca Pin
location.latitude = MEC_LATITUDE;
location.longitude = MEC_LONGITUDE;
ann = [[VBAnnotation alloc] init];
[ann setCoordinate:location];
ann.title = @"NewHorizons Institute";
ann.subtitle = @"English and computer training center";
[annotations addObject:ann];
[self.mapView addAnnotations:annotations]; 
```

当然，我有一个名为 VBAnnotation 的课程

谢谢 ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T02:38:37.633

如果我理解正确，您需要记住该`VBAnnotation`对象，以便警报视图委托方法可以访问它。您可以`objc_setAssociatedObject()`在显示警报视图之前将对象与警报视图相关联，然后`objc_getAssociatedObject()`在处理用户对警报的响应时用于检索对象。

[本文](http://labs.vectorform.com/2011/07/objective-c-associated-objects/)有更多关于 Obj-C 关联对象的信息。要导入以获取功能的文件是这样的：

```
#import <objc/runtime.h> 
```

如果`VBAnnotation`可以使用某种数字 ID 或索引来标识对象，则更简单的方法是将该 ID 或索引存储在`tag`警报视图的属性中 -`UIAlertView`是该属性的子类`UIView`并因此继承该属性。

# php - 使用 $_GET

> ID：14107350
> 
> 赞同：1
> 
> 时间：2013-01-01T01:51:58.713
> 
> 标签：php, mysql, security, pdo, get

你好，首先从美国到世界各地的每一个人新年快乐。今天我已经阅读了很多关于 $_GET 的内容，以及它的作用以及在我的系统中实现它的用处。

言归正传：

我有一个跟踪学生的系统。然后，所述系统将能够允许大学的辅导员专门与学生合作，对辅导员为学生所做的工作添加评论。- >现在我的意思是，如果辅导员接受学生，则会创建一个会话（不是 php 会话，而是学生和工作人员“辅导员”之间的实际会话）

我的特定系统需要从 url 获取 meeting_id。所以网址会像这样：localhost/student.php?id=1 or 2 or 3 or 4 (等等)

根据我对使用 $_GET 的理解：我可以获取特定的 url id（例如：localhost/student.php?id=1）并使用 $_GET['id'] 更新数据库表中的特定行。

我的问题是：

我对 $_GET 的理解合法吗？我将使用会话，我将在我系统的所有页面上启用 SSL（或者如果你想这样称呼它，则为 Intranet）。我将使用 PDO 从我的数据库表中更新/写入/选择。我想知道这是否是实现 $_GET 的正确方法以及是否安全。

[阅读这些答案/评论让我犹豫要不要继续这个逻辑。](https://stackoverflow.com/questions/3682480/how-do-i-make-get-more-secure)但是对于 $_GET 的这种特定用法，实现这个逻辑是否是一种好习惯？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T02:00:42.270

$_GET 方法和其他方法一样安全。当你得到它时，你用它做的事情使它变得不安全。只需确保在数据库查询中使用 $_Get 之前以某种方式对其进行验证。例如，如果您知道 id 将是一个整数并且您知道最大长度可以是多少，请在使用它之前检查这些内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T02:10:01.720

> 使用 $_GET['id'] 更新数据库表中的特定行。

您**永远**不想使用 $_GET 对数据库进行任何更改，只能选择。$_GET 可能会被添加书签并在不经意间再次使用。

这样想吧。如果您希望能够为某些内容添加书签，例如某个顾问的评论，那么 $_GET 是完美的。

如果要更改要使用 $_POST 的数据库。当然，您仍然不能信任用户，您需要确保他们已通过身份验证，并且您需要清除所有传入数据。如果您使用 PDO，请确保在查询语句中绑定数据

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T02:04:10.333

当使用 $_GET 方法时，传递的变量将在 url 中可见。由于您正在构建一个包含重要数据的站点，因此最好使用 $_POST 以便变量名称和值不可见。还要彻底验证所有用户输入字段。

# ruby - Ruby 中 DateTime 的毫秒分辨率

> ID：14107354
> 
> 赞同：30
> 
> 时间：2013-01-01T01:53:10.813
> 
> 标签：ruby, postgresql, datetime, activerecord, rails-postgresql

我有一个类似的字符串`2012-01-01T01:02:03.456`，我使用 ActiveRecord 将其存储在 Postgres 数据库 TIMESTAMP 中。

不幸的是，Ruby 似乎减少了毫秒：

```
ruby-1.9.3-rc1 :078 > '2012-12-31T01:01:01.232323+3'.to_datetime
 => Mon, 31 Dec 2012 01:01:01 +0300 
```

Postgrs 支持微秒级分辨率。如何相应地保存我的时间戳？我至少需要毫秒分辨率。

（PS 是的，我可以在 postgres 中破解毫秒整数列；这违背了 ActiveRecord 的全部目的。）

**更新：**
非常有用的响应表明 Ruby`DateTime`并*没有*减少毫秒；使用`#to_f`显示它。但是，做：

```
m.happened_at = '2012-01-01T00:00:00.32323'.to_datetime
m.save!
m.reload
m.happened_at.to_f 
```

确实会减少毫秒。

现在，有趣的是`created_at`在 Rails 和 Postgres 中都显示毫秒。但其他时间戳字段（`happened_at`如上）没有。（也许 Rails 使用了一个`NOW()`函数而`created_at`不是传入一个 DateTime）。

这导致了我的终极问题：
**如何让 ActiveRecord 保留时间戳字段的毫秒分辨率？**

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-01T02:14:17.870

ActiveRecord 应该保留数据库的完整精度，只是您没有正确查看它。使用`strftime`和`%N`格式查看小数秒。例如，`psql`这样说：

```
=> select created_at from models where id = 1;
         created_at         
----------------------------
 2012-02-07 07:36:20.949641
(1 row) 
```

和 ActiveRecord 说：

```
> Model.find(1).created_at.strftime('%Y-%m-%d %H:%M:%S.%N')
 => "2012-02-07 07:36:20.949641000" 
```

所以一切都在那里，你只需要知道如何看到它。

另请注意，ActiveRecord 可能会为您提供`ActiveSupport::TimeWithZone`对象而不是`DateTime`对象，但`DateTime`也会保留所有内容：

```
> '2012-12-31T01:01:01.232323+3'.to_datetime.strftime('%Y-%m-%d %H:%M:%S.%N')
 => "2012-12-31 01:01:01.232323000" 
```

* * *

查看`connection_adapters/column.rb`ActiveRecord 源代码并检查该`string_to_time`方法的作用。你的字符串会沿着这`fallback_string_to_time`条路走，并且尽可能地保留小数秒。其他地方可能会发生一些奇怪的事情，鉴于我在 Rails 源代码中看到的奇怪事情，尤其是数据库方面的事情，我不会感到惊讶。我会尝试手动将字符串转换为对象，这样 ActiveRecord 就不会把手放在它们身上。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-01T10:34:03.307

更改`m.happened_at = '2012-01-01T00:00:00.32323'.to_datetime`上面的代码以`m.happened_at = '2012-01-01T00:00:00.32323'`解决问题，但我不知道为什么。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-07T09:35:33.823

当我在 OS X (Mavericks) 上使用 RVM 提供的二进制 Ruby 2.0.0-p247 时，我最终来到了这里，这在从 Postgres 检索时间时导致四舍五入到秒的整数值。自己重建 Ruby ( `rvm reinstall 2.0.0 --disable-binary`) 为我解决了这个问题。

请参阅我通过[https://github.com/rails/rails/issues/12422](https://github.com/wayneeseguin/rvm/issues/2189)找到的[https://github.com/wayneeseguin/rvm/issues/2189](https://github.com/rails/rails/issues/12422)。

我认识到这不是解决这个问题的答案，但我希望这篇笔记可以帮助那些在这个问题上苦苦挣扎的人。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-01T02:03:59.150

`to_datetime`不会破坏数据的毫秒分辨率 - 它只是隐藏，因为`DateTime#to_s`不显示它。

```
[1] pry(main)> '2012-12-31T01:01:01.232323+3'.to_datetime
=> Mon, 31 Dec 2012 01:01:01 +0300
[2] pry(main)> '2012-12-31T01:01:01.232323+3'.to_datetime.to_f
=> 1356904861.232323 
```

也就是说，我怀疑 ActiveRecord 在持久化数据时错误地隐藏了该信息；请记住，它与数据库无关，因此它采用的方法可以保证在其所有数据库目标上都有效。虽然 Postgres 假设时间戳中有微秒信息，但 MySQL 没有，所以我怀疑 AR 选择了最小公分母。如果不深入了解 AR，我无法确定。您可能需要特定于 Postgres 的猴子补丁来启用此行为。

# php - 每周从 MySQL 数据库中固定数量的更新中发布更新

> ID：14107359
> 
> 赞同：0
> 
> 时间：2013-01-01T01:55:09.100
> 
> 标签：php, mysql, database

我有一个包含 200 个更新的存档网站，其信息全部存储在 MySQL 数据库中。

我想在网站上显示它们的固定数量，比如 52 个，并且每周轮换一个，另一个轮换一个，始终保持总数为 52。

这不是更新数据库的问题，该信息是固定的。这是在网站本身上一次显示来自数据库52的更新的“循环”的问题。我绞尽脑汁想弄清楚这个问题。

到目前为止，我还没有尝试过任何东西，因为我想出的任何东西都没有意义。

根据我自己研究和解决的问题，将信息作为开始日期和结束日期硬编码到数据库表中（对我来说）是一种愚蠢的方式。这个更新数量是固定的，我只是希望它们永远一次显示 52 个，比如每个星期五。

我有一个运行 PHP 5.3.20 的专用服务器，MySQL/MySQLi 是 5.5.27（我在 MySQLi 中编码）。

无论我在哪里看，或者我深入研究我的书，我都找不到这个问题的答案。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T02:33:39.260

我会尝试创建一个函数来计算自某个日期以来的周数，然后将偏移量添加到您的数据库查询中：

```
<?php

  $starttime = strtotime("28 December 2012"); // a recent Friday
  $week = 7 * 24 * 60 * 60; // time value of a week
  $posts = 200; // number of posts in your db
  $limit = 52; // number of shown posts
  $offset = floor((time()-$starttime)/$week); // rounds down difference in weeks from startdate until now
  while ($offset>$posts-$limit) $offset = $offset - ($posts-$limit); 
  // this will make the cycle start over when you have reached the end (ie offset 148)...

  ?> 
```

然后只需在查询中使用返回值作为偏移量和限制：

```
 'SELECT ... LIMIT '.$offset.','.$limit; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T02:19:32.793

Ok, this is a hard one, if you have mysql 5.5.6, you could actually directly assign a user variable to do this:

```
SET @week_nr = WEEK(NOW()); 
```

And then do this:

```
SELECT * FROM updates LIMIT 52 OFFSET @week_nr; 
```

That would be week 0 this week.

But that doesn't work for lower versions [due to this bug](http://bugs.mysql.com/bug.php?id=11918), from 2005 btw...

There is a way to circumventing this limitation for other mysql, as [seen in the mysql forums](http://forums.mysql.com/read.php?98,126379,133966#msg-133966) by using a prepared statement. But that query will offset by 1 every week.

The quick equivalent of jtheman's solutions would be like:

```
 SET @offset = FLOOR(UNIX_TIMESTAMP() - (WEEK("2012-12-28") 
                 / ( 7 * 24 * 60 * 60))); 
```

But as you can see here [DateTime](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html) there is another function you could use:

```
SET @week_nr = YEARWEEK(NOW()); 
```

And that is year proof.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T02:07:49.077

时间标记你的数据库行和自动增量将是你在这件事上的朋友。如果您希望每个星期五运行 sql，您将需要设置一个 cron 作业。

对于 sql，选择 DESC 中的行并将数量限制为 52 或使用时间戳获取最新的行。

# php - 如何使用我的类别为移动设备创建 Wordpress 下拉菜单？

> ID：14107366
> 
> 赞同：1
> 
> 时间：2013-01-01T01:57:19.820
> 
> 标签：php, wordpress, mobile, drop-down-menu, navigation

这是我正在开发的网站。

www.sunsetwomenssoccer.com

我在使用主题设置的移动导航时遇到问题。所以相反，我想知道最好的方法是设置一个显示我的类别的简单下拉菜单（桌面视图中的导航）。同样，我的导航不是由页面组成，而是由类别组成。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:49:21.597

该`wp_dropdown_categories()`功能可能会对您有所帮助。

例如，使用：

```
<li id="categories">
    <h2><?php _e('Categories:'); ?></h2>
    <form action="<?php bloginfo('url'); ?>" method="get">
    <div>
    <?php wp_dropdown_categories('show_count=1&hierarchical=1'); ?>
    <input type="submit" name="submit" value="view" />
    </div>
    </form>
</li> 
```

# eclipse - 为什么不建议将 Eclipse 项目文件夹作为 Git 存储库？

> ID：14107367
> 
> 赞同：27
> 
> 时间：2013-01-01T01:57:57.550
> 
> 标签：eclipse, git, egit, jgit

当将项目共享为 git 并尝试将 Eclipse 项目文件夹作为 git 存储库时，Eclipse 表示不建议这样做，它应该位于 Eclipse 工作区之外。

这是为什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-01T06:28:14.727

虽然我同意将存储库保留在 Eclipse 工作区之外，但我仍然会在 Eclipse 项目根目录中创建一个 git repo（就像在[这个答案](https://stackoverflow.com/questions/13655126/how-to-properly-use-egit-with-eclipse/13657305#13657305)中一样）。

除非您的程序由许多相互依赖的小项目组成，否则我会将一个 git repo 限制为一个 Eclipse 项目。
git repo 是关于记录树结构的*内容*，如果该树代表*一个*项目，则更容易管理、标记、分支、合并（作为一[组连贯的文件](https://stackoverflow.com/questions/984707/what-are-the-git-limits/984973#984973)）。
如果它代表多个项目，您将不再确定像“1.0”这样的标签对于该 Git 存储库中的每个项目代表什么。

另外，我喜欢将`.project`,`.classpath`和添加`.settings`到 Git 存储库中（作为“[默认情况下 git 会从新存储库中排除 eclipse 项目文件吗？](https://stackoverflow.com/a/12784799/6309) ”）

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-01-01T02:10:59.673

从[Eclipse EGit 帮助页面](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.egit.doc/help/EGit/User_Guide/Tasks.html)，

> 将项目设置为存储库的根文件夹可能不是一个好主意
> 
> 原因是您将永远无法向此存储库添加另一个项目，因为 .project 文件将占用根文件夹；您仍然可以将项目添加为子文件夹，但众所周知，这种项目嵌套会导致很多问题。为了添加另一个项目，您必须将项目移动到存储库中的子文件夹并将第二个项目添加为另一个子文件夹，然后才能提交此更改。

更多信息

> 将存储库保留在 Eclipse 工作区之外是个好主意
> 
> 有几个原因：
> 
> 新的 Repository 会将 Eclipse 工作区的完整文件夹结构视为（潜在的）内容。这可能会导致性能问题，例如在提交之前计算更改时（例如，它将扫描完整的 .metadata 文件夹）；通常情况下，工作区将包含死文件夹（例如已删除的项目），这些文件夹在语义上与 EGit 无关，但不能轻易排除。
> 
> 元数据 (.git-) 文件夹将是 Eclipse 工作区的子文件夹。尚不清楚这是否会导致 Eclipse 不必要的文件夹遍历。
> 
> 您可以通过销毁您的 Eclipse 工作区轻松地销毁您的存储库

# android - 无法为 ImageButton 指定 alignComponent

> ID：14107369
> 
> 赞同：0
> 
> 时间：2013-01-01T01:59:29.587
> 
> 标签：android, imagebutton

我正在尝试将我的 TextView 设置在 ImageButton 的左侧，但我似乎找不到这个选项。

我期待使用类似 android:layout_alignLeft 的东西，但缺少此选项。

我试图用谷歌搜索这个问题，但找不到任何相关结果。

![在此处输入图像描述](../Images/ee45760945f95f740d681b980891fbc3.png)

没有它，我的 TextView 与 ImageButton 重叠，我想避免它。

**更新**

完整的 xml 代码太复杂了，但这里是它的重要部分：

```
<FrameLayout
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:layout_alignParentLeft="true"
        android:background="@color/white"
        android:layout_marginLeft="8dp"
        android:layout_marginTop="8dp"
        android:layout_marginBottom="8dp"
        android:layout_toLeftOf="@+id/frameLayoutBalanceClosed">
    <ImageButton
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/button_edit_nickname"
            android:id="@+id/card_closed_control_editNickname" />
    <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:id="@+id/card_closed_description_nickname"
            android:layout_margin="8dp" android:layout_gravity="left"/>
</FrameLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T02:39:44.700

我认为您需要的是[RelativeLayout](http://developer.android.com/guide/topics/ui/layout/relative.html)。您可以使用其规范在 ImageView 左侧指定 TextView。您的代码将如下所示：

```
<RelativeLayout 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TextView
        android:id="@+id/text"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_toLeftOf="@+id/imagebutton1" />

    <ImageButton
        android:id="@+id/imagebutton1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

</RelativeLayout> 
```

FrameLayout 不起作用的原因是因为它的目的是将项目重叠在一起，这根本不起作用！

如果这不是您要查找的内容，您还可以使用[TableLayout](http://developer.android.com/reference/android/widget/TableLayout.html)，其中项目按列排列。

# php - 消息：mail() [function.mail]：无法在“ssl://googlemail.com”端口 465 连接到邮件服务器

> ID：14107374
> 
> 赞同：0
> 
> 时间：2013-01-01T02:02:03.170
> 
> 标签：php, codeigniter

> //有谁知道我是如何解决这个问题的。我已经在 php.ini 上取消了必要的文件的注释但无济于事我仍然得到错误，我使用 xampp 作为我的本地主机。

```
//emails.php
function email(){
    $this->load->model('user');
    $emails=$this->user->get_emails();
    $this->load->library('email');
    $config['mailtype']='html';
    $this->email->initialize($config);
    foreach($emails as $row){
        $email_config = Array(
        'protocol'  => 'smtp',
        'smtp_host' => 'ssl://smtp.googlemail.com',
        'smtp_port' => '465',
        'smtp_user' => 'dirk@gmail.com',
        'smtp_pass' => 'dirk',
        'mailtype'  => 'html',
        'starttls'  => true,
        'newline'   => "\r\n"
    );
    $this->load->library('email', $email_config);

        if($row['email']){
            $this->email->from('dirk@gmail.com', 'dirk');
            $this->email->to($row['email']);
            $this->email->subject('Test Newsletter');
            $this->email->message('Your email message goes here! <strong>Bold</strong>');
            $this->email->send();
            $this->email->clear();
        }
    }
}
//user.php
function get_emails(){
    $this->db->select('email')->from('users');
    $query = $this->db->get();
    return $query->result_array();  
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T02:05:16.293

GMail 不`googlemail.com`用于 smtp，SMTP 服务器`smtp.gmail.com`希望对您有所帮助。

您需要[将 smtp_host 首选项设置](http://ellislab.com/codeigniter/user-guide/libraries/email.html)为`smtp.gmail.com`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T10:00:12.797

输入有效的 gmail 电子邮件而不是`abc@gmail.com`at`smtp_user`并填写密码。`$from`还要在数组和数组中放入有效的电子邮件`$to`。

```
 $emailConfig = array(
        'protocol' => 'smtp',
        'smtp_host' => 'ssl://smtp.googlemail.com',
        'smtp_port' => 465,
        'smtp_user' => 'abc@gmail.com',
        'smtp_pass' => '*******',
        'mailtype' => 'html', //text or html
        'charset' => 'iso-8859-1',
    );
     $from = array('email' => 'abc@gmail.com');
    $to = array('abc@gmail.com');
    $subject = "Testing Mail";
    $message = "Welcome";
    $this->load->library('email', $emailConfig);
    $this->email->initialize($emailConfig);

    $this->email->set_newline("\r\n");
    $this->email->from($from['email']);
    $this->email->to($to);
    $this->email->subject($subject);
    $this->email->message($message);

    if ($this->email->send()) {
     echo "success";
          } else {

        show_error($this->email->print_debugger());

    }
} 
```

# c - 为什么成员 y 在以下代码中设置为 0？

> ID：14107376
> 
> 赞同：3
> 
> 时间：2013-01-01T02:02:23.537
> 
> 标签：c, struct, unions, static-initialization

我无法弄清楚为什么会这样。我正在使用一堆非常复杂的结构、联合、两者的未命名版本、静态变量等......但我确信这应该有效。经过一天的调试，我将问题缩小到以下代码中发生的情况。我正在使用-fms-extensions，它似乎不能很好地适应这种情况：

```
//main.c
//Why does y get set to 0 in the case of 'Breaks'?
//Compile with gcc -fms-extensions main.c

#include <stdio.h>

struct Base {
    int x;
    int y;
};

struct Extend {
    union {
        int X;
        struct Base;
    };
};

struct AlsoExtend {
    struct Base;
    int z;
};

static struct Extend Works = {
    .x = 5,
    .y = 3,
    //.X = 2
};

static struct Extend Breaks = {
    .x = 5,
    .y = 3,
    .X = 2
};

static struct AlsoExtend AlsoWorks = {
    .x = 5,
    .y = 3,
    .z = 69
};

int main(int argc, char** argv) {

    printf("Works: x:%d y:%d X:%d\n", Works.x, Works.y, Works.X);
    printf("Breaks: x:%d y:%d X:%d\n", Breaks.x, Breaks.y, Breaks.X);
    printf("AlsoWorks: x:%d y:%d z:%d\n", AlsoWorks.x, AlsoWorks.y, AlsoWorks.z);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T02:09:41.890

[C99 规范](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1124.pdf)说明了这 一点：

> 当一个值存储在联合类型对象的成员中时，对象表示中不对应于该成员但对应于其他成员的字节采用未指定的值。

在这里，您使用联合类型的一个对象写入一个值，然后尝试访问该联合类型的另一个对象。这会导致您的类型出现不可预测的值。

因此，你不能做这样的事情。您应该只将联合的一个对象用于结构的同一实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T02:13:10.250

正如@lbonn 所说，您正在滥用C！

`-fms-extensions`是一个 GCC 特定选项，它打开对非标准构造的支持，包括其他不可能的声明，例如您在上面尝试的那些。

简单的答案是：“不要那样做！” 严重地。不要使用`-fms-extensions`，尤其是不要用于您自己的代码！曾经！

编写符合标准 C 的声明有望使问题更容易被发现。

Read the text quoted in the answer given @lbonn carefully, and note that `0` is as good of an *unspecified value* as any other would be.

# hibernate - 如何将多个列映射到 Hibernate 中的单个外键列

> ID：14107380
> 
> 赞同：0
> 
> 时间：2013-01-01T02:04:08.980
> 
> 标签：hibernate, jpa

我正在使用 Play 框架编写一个应用程序，该框架使用 JPA 注释和 Hibernate 作为包含的 Ebean ORM 持久层的一部分。我在找出与外键相关的 JPA 注释时遇到了一些麻烦。在我的 MySQL 数据库中，有一个名为 Locations 的主表，用于存储地址（街道、城市、州、邮编等）。数据库中的许多其他表以一对一或多对多的关系使用此表。问题是，当我尝试将多个字段映射到 Locations 中的 id 字段时出现错误。

例如，Docks 和 LineItems 是两个包含对 Location 的引用的模型。每个 Dock 都有一个 Location，每个 LineItem 有两个 Location：一个起点和一个终点。

所以，在 Dock 中，我有代码：

```
@OneToOne(optional=false)
@JoinColumn(name="loc_id")
public Location location; 
```

在 LineItem 中，我有：

```
@OneToOne(optional=false)
@JoinColumn(name="origin")
public Location origin;

@OneToOne(optional=false)
@JoinColumn(name="destination")
public Location destination; 
```

但我无法将它们全部映射到 Locations 中的 id 字段，因为 JPA 不允许我这样做：

```
@Id
@GeneratedValue
@OneToOne(mappedBy="location", fetch=FetchType.EAGER)
@OneToOne(mappedBy="origin", fetch=FetchType.EAGER)
@OneToOne(mappedBy="destination", fetch=FetchType.EAGER)
@Column(name="loc_id")
public Long id; 
```

我有一种感觉，我只是走错了路。有没有更简单的方法在 JPA 中使用外键约束？我真的不想使用解决方法，比如在我的表中创建一堆额外的列，因为 Locations 确实被引用了很多。任何让我直截了当的建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T05:35:47.720

您显示的位置配置没有任何意义。如果可以完全按照您的意图进行解释，这对 JPA 意味着什么：

1.  Location 有一个 Long “id” 属性，它是一个生成的值，并映射到 loc_id 列。
2.  “id”属性是一个 Dock，是 Dock 和 Location 之间一对一、双向关系的非拥有端。
3.  它也是一个 LineItem，它是来自 LineItem 的一对一双向关系的非拥有端，*既是*起点*又*是终点。

显然这没有任何意义，对吧？如果您要`@OneToOne`在 Location 中包含所有这些注释，则每个注释都需要位于其自己的字段中：一个 Dock 和两个 LineItem，以及您提到的与 Location 的所有其他关系的更多注释。这显然是不可取的，因为 Location 就是这样，其他东西引用它并不重要。所以你真正想要的是一堆与位置的单向关系。由于您已经将 Location 映射为非拥有端（通过“mappedBy”参数），您所要做的就是`@OneToOne`从 Location 中删除 s。您所需要的只是，例如：

```
@OneToOne
@JoinColumn(name="origin")
public Location origin; 
```

也就是说，“origin”属性是其主键存储在该实体映射到的表的“origin”字段中的位置。

在这方面，我希望所有这些都不是真正的一对一关系。至少 LineItem 是一对多的。我无法想象两个订单项永远不会有相同的起点或终点。

顺便说一句，`optional=false`它是默认值，但如果您认为它会阻止该字段为空，那么它不会。可选参数只是告诉 JPA 在外键引用的行丢失时是否抛出异常。

这是一种高级别的概述。如果您不了解其中的某些内容，请提出更多问题。[Hibernate Annotations 指南](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/#entity-mapping-association)应该可以帮助您理解其中的大部分内容，并且让 hibernate 为您生成数据库模式也非常有帮助，这样您就可以查看它是否理解您所说的表结构。

# javascript - ExtJS、OpenLayers：在发送之前修改url协议

> ID：14107384
> 
> 赞同：0
> 
> 时间：2013-01-01T02:05:21.997
> 
> 标签：javascript, extjs, combobox, openlayers, extjs3

我正在尝试从 formPanel 内的组合框中获取一个值，以将其传递给协议 url（openlayers.protocol.http 的）。这是我想要获取的基于[http://jsbin.com/ireqed/2/edit](http://jsbin.com/ireqed/2/edit)的 url （如果我在组合框中选择“cars”并在文本字段中输入“cool”）：

```
http://www.mop.org/fs/cars?format=GeoJSON&comments__ilike=cool&queryable=comments 
```

经过测试，在组合框中选择一个值并在文本字段中输入一个单词后，我终于可以得到我想要的URL（如上）。

为了在 formPanel 的协议中发送这个新 URL，我在我的搜索按钮的处理函数中使用了 autoLoad 调用，我认为这是在发送 url，但它没有被协议本身（即 XMLHttpRequest.js）捕获，而是用于 ExtJS . 因此，GeoJSON 输出显示在 formPanel 中。我附上了三个 PNG 来展示这一点：![按下“搜索”按钮之前的表单面板](../Images/d5fcc660fa2f6144086f86cf2a12fc0f.png), ![按“搜索”按钮后的表单面板](../Images/cd65fbd9adff3b6793363da84c91659a.png), ![萤火虫中的输出](../Images/12096ebdb2b0dfdb5cd1421497c9fb5a.png).

在 firebug 中，一旦按下“搜索”按钮，就会调用两个 URL，第一个是我想在协议的 url 中替换的 URL，但它转到了 ext-base.js，这是错误的地方。第二个，我其实不知道为什么要发送，转到 XMLHttpRequest.js 这是正确的地方，但它不应该发送。

所以，在必须首先发送 url 之前，我需要更改它，我该怎么做？顺便说一句，在我看来它正在替换属于 ExtJS 的不存在的 url，请帮助，谢谢

**更新＃1：**

越来越近了......因为添加`OpenLayers.loadURL(myurl, {}, null, function(response){});`处理程序函数会将 url 发送到 XMLHttpRequest.js（正确的位置），但是立即将另一个 url（来自表单面板）发送到同一个位置，这涵盖了正确的位置，有没有办法为 openlayers.loadurl 函数添加一些时间？我知道这个函数是异步工作的（这就是为什么比第二个更快并且首先提交），有没有办法覆盖第二个？ ![发送了两个 url，第一个是正确的](../Images/6bee4209eb35725d9d01f0f8636a1cb8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:29:01.503

解决方案是将协议放在 formPanel 之外，只使用“protocol.options.url = newUrl;”，完整的解释在[这里](https://stackoverflow.com/questions/14664759/how-can-i-overwrite-the-url-of-openlayers-protocol-http)

# macos - 让 NSTextField 与自动布局中的文本一起增长？

> ID：14107385
> 
> 赞同：12
> 
> 时间：2013-01-01T02:05:42.903
> 
> 标签：macos, cocoa, nstextfield, autolayout

[一旦用户键入足够的文本以溢出控件的宽度（如本文](https://stackoverflow.com/questions/10463680/how-to-let-nstextfield-grow-with-the-text-in-auto-layout)所述），我正试图让我的 NSTextField 的高度增加（很像在 iChat 或 Adium 中）

我已经接受了接受的答案，但我似乎无法让它发挥作用。我已经在[http://scottyob.com/pub/autoGrowingExample.zip上传了我的尝试](http://scottyob.com/pub/autoGrowingExample.zip)

理想情况下，当文本增长时，包含窗口应该随之增长，但我在这里尝试了一些小步骤。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-01T14:49:47.253

解决了！（灵感来自[https://github.com/jerrykrinock/CategoriesObjC/blob/master/NS(Attributed)String%2BGeometrics/NS(Attributed)String%2BGeometrics.m](https://github.com/jerrykrinock/CategoriesObjC/blob/master/NS(Attributed)String%2BGeometrics/NS(Attributed)String%2BGeometrics.m)）

阅读[Apple 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/TextLayout/TextLayout.html#//apple_ref/doc/uid/10000158-SW1)通常很有帮助。Apple 设计了所有这些文本布局的东西，使其功能强大到足以处理各种[复杂的边缘情况](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/TextStorageLayer/Tasks/Region.html#//apple_ref/doc/uid/20000925-CJBBIAAF)，这有时非常有用，有时却没有。

首先，我将文本字段设置为在分词时换行，所以我们实际上得到了多行。（您的示例代码甚至有一个 if 语句，因此在关闭包装时它什么都不做）。

这个技巧是要注意，当文本被编辑时，它是由一个“字段编辑器”打印的——一个重量级的`NSTextView`对象，由一个拥有，它被当前的“第一响应者”（选定`NSWindow`的）重用。有一个（文本所在`NSTextField`的矩形），它有一个布局文本。我们可以询问布局管理器它想要使用多少空间，以获得我们文本字段的新高度。`NSTextView``NSTextContainer``NSLayoutManager`

另一个技巧是在文本更改时覆盖`NSText`委托方法`- (void)textDidChange:(NSNotification *)notification`以使内在内容大小无效（因此当您通过按回车提交更改时，它不会等待更新）。

我没有`cellSizeForBounds`按照您最初的建议使用的原因是我无法解决您的问题 - 即使使单元格的固有内容大小无效，`cellSizeForBounds:`继续返回旧大小。

[在GitHub 上](https://github.com/DouglasHeriot/AutoGrowingNSTextField)找到示例项目。

```
@interface TSTTextGrowth()
{
    BOOL _hasLastIntrinsicSize;
    BOOL _isEditing;
    NSSize _lastIntrinsicSize;
}

@end

@implementation TSTTextGrowth

- (void)textDidBeginEditing:(NSNotification *)notification
{
    [super textDidBeginEditing:notification];
    _isEditing = YES;
}

- (void)textDidEndEditing:(NSNotification *)notification
{
    [super textDidEndEditing:notification];
    _isEditing = NO;
}

- (void)textDidChange:(NSNotification *)notification
{
    [super textDidChange:notification];
    [self invalidateIntrinsicContentSize];
}

-(NSSize)intrinsicContentSize
{
    NSSize intrinsicSize = _lastIntrinsicSize;

    // Only update the size if we’re editing the text, or if we’ve not set it yet
    // If we try and update it while another text field is selected, it may shrink back down to only the size of one line (for some reason?)
    if(_isEditing || !_hasLastIntrinsicSize)
    {
        intrinsicSize = [super intrinsicContentSize];

        // If we’re being edited, get the shared NSTextView field editor, so we can get more info
        NSText *fieldEditor = [self.window fieldEditor:NO forObject:self];
        if([fieldEditor isKindOfClass:[NSTextView class]])
        {
            NSTextView *textView = (NSTextView *)fieldEditor;
            NSRect usedRect = [textView.textContainer.layoutManager usedRectForTextContainer:textView.textContainer];

            usedRect.size.height += 5.0; // magic number! (the field editor TextView is offset within the NSTextField. It’s easy to get the space above (it’s origin), but it’s difficult to get the default spacing for the bottom, as we may be changing the height

            intrinsicSize.height = usedRect.size.height;
        }

        _lastIntrinsicSize = intrinsicSize;
        _hasLastIntrinsicSize = YES;
    }

    return intrinsicSize;
}

@end 
```

最后一点，我自己从未真正使用过自动布局——演示看起来很棒，但每当我自己实际尝试时，我都无法让它完全正确地工作，这让事情变得更加复杂。然而，在这种情况下，我认为它确实节省了很多工作——没有它，`-intrinsicContentSize`就不会存在，而且你可能必须自己设置框架，计算新的原点和新的大小（不要太困难，但只是更多的代码）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-07-01T06:38:51.687

DouglasHeriot 的解决方案仅适用于固定宽度的文本字段。在我的应用程序中，我有想要水平和垂直增长的文本字段。因此，我将解决方案修改如下：

**AutosizingTextField.h**

```
@interface AutosizingTextField : NSTextField {
    BOOL isEditing;
}
@end 
```

**AutosizingTextField.m**

```
@implementation AutosizingTextField

- (void)textDidBeginEditing:(NSNotification *)notification
{
    [super textDidBeginEditing:notification];
    isEditing = YES;
}

- (void)textDidEndEditing:(NSNotification *)notification
{
    [super textDidEndEditing:notification];
    isEditing = NO;
}

- (void)textDidChange:(NSNotification *)notification
{
    [super textDidChange:notification];
    [self invalidateIntrinsicContentSize];
}

-(NSSize)intrinsicContentSize
{
    if(isEditing)
    {
        NSText *fieldEditor = [self.window fieldEditor:NO forObject:self];
        if(fieldEditor)
        {
            NSTextFieldCell *cellCopy = [self.cell copy];
            cellCopy.stringValue = fieldEditor.string;
            return [cellCopy cellSize];
        }
    }
    return [self.cell cellSize];
}
@end 
```

还有一个小问题：输入空格时，文本会向左跳一点。但是，这在我的应用程序中不是问题，因为在大多数情况下，文本字段不应包含空格。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-02-08T01:01:02.903

DouglasHeriot 的解决方案对我很有用。

这是 Swift 4 上的相同代码

```
class GrowingTextField: NSTextField {

    var editing = false
    var lastIntrinsicSize = NSSize.zero
    var hasLastIntrinsicSize = false

    override func textDidBeginEditing(_ notification: Notification) {
        super.textDidBeginEditing(notification)
        editing = true
    }

    override func textDidEndEditing(_ notification: Notification) {
        super.textDidEndEditing(notification)
        editing = false
    }

    override func textDidChange(_ notification: Notification) {
        super.textDidChange(notification)
        invalidateIntrinsicContentSize()
    }

    override var intrinsicContentSize: NSSize {
        get {
            var intrinsicSize = lastIntrinsicSize

            if editing || !hasLastIntrinsicSize {

                intrinsicSize = super.intrinsicContentSize

                // If we’re being edited, get the shared NSTextView field editor, so we can get more info
                if let textView = self.window?.fieldEditor(false, for: self) as? NSTextView, let textContainer = textView.textContainer, var usedRect = textView.textContainer?.layoutManager?.usedRect(for: textContainer) {
                    usedRect.size.height += 5.0 // magic number! (the field editor TextView is offset within the NSTextField. It’s easy to get the space above (it’s origin), but it’s difficult to get the default spacing for the bottom, as we may be changing the height
                    intrinsicSize.height = usedRect.size.height
                }

                lastIntrinsicSize = intrinsicSize
                hasLastIntrinsicSize = true
            }

            return intrinsicSize
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-11-02T21:23:01.183

此解决方案也适用于设置文本字段的字符串值以及通过 AutoLayout 调整其大小时。它只是在需要时使用属性文本属性来计算内在内容大小。

```
class AutoGrowingTextField: NSTextField {
    var maximumHeight: CGFloat = 100

    override var intrinsicContentSize: NSSize {
        let height = attributedStringValue.boundingRect(
            with: NSSize(width: bounds.width - 8, height: maximumHeight),
            options: [NSString.DrawingOptions.usesLineFragmentOrigin]
            ).height + 5

        return NSSize(width: NSView.noIntrinsicMetric, height: height)
    }

    override func textDidChange(_ notification: Notification) {
        super.textDidChange(notification)
        invalidateIntrinsicContentSize()
    }

    override func layout() {
        super.layout()
        invalidateIntrinsicContentSize()
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-04T15:13:15.323

如果你想限制 TextField 的大小（例如）：

```
if (intrinsicSize.height > 100) 
{
    intrinsicSize = _lastIntrinsicSize;
} 
else
{
    _lastIntrinsicSize = intrinsicSize;
    _hasLastIntrinsicSize = YES;
} 
```

（[差异](https://github.com/aral/AutoGrowingNSTextField/commit/dd3523cfbbdbdb64e1d651888b5ea6be376d3a82)）

我遇到的一件事是将 NSTextField 嵌入到 NSScrollView 中并让它正常工作（尤其是在 NSStackView 中）。将看看使用 NSTextView 是否会更容易。

# netty - Netty 4中的IdleStateHandler？

> ID：14107397
> 
> 赞同：2
> 
> 时间：2013-01-01T02:08:49.843
> 
> 标签：netty

我已将它添加到我的管道中，并且 LoggingHandler 正在捕获它的事件，但是由于事件系统从 Netty 3 更改为 4，我该如何处理这些事件，因为 IdleStateAwareUpstreamHandler 不再存在？

LoggingHandler：2012 年 12 月 31 日下午 5:46:19 io.netty.handler.logging.LoggingHandler 信息：[id: 0xfef88037, /127.0.0.1:63531 => /127.0.0.1:7633] USER_EVENT: WRITER_IDLE(0, 30001ms )

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T06:20:04.483

首先，确保你的管道有一个`IdleStateHandler`并且想要得到通知的处理程序`IdleStateEvent`放在`IdleStateHandler`.

`ChannelStateHandler`并`ChannelInboundHandler`有一个名为`userEventTriggered()`. 您可以像下面这样实现该方法：

```
@Override
public void userEventTriggered(ChannelHandlerContext ctx, Object evt) {
    if (evt instanceof IdleStateEvent) {
        ...
    }
} 
```

# ruby - 将对象设置为零很常见吗？

> ID：14107398
> 
> 赞同：5
> 
> 时间：2013-01-01T02:09:40.653
> 
> 标签：ruby

我正在构建一个应用程序，想知道将未使用的对象设置为 nil 是否是生产级编码中的常见做法。

我知道这只是对垃圾收集器的提示，并不总是处理对象。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-01T02:18:39.897

根据这个[线程](http://www.ruby-forum.com/topic/4368466)

如果您使用完成员对象，将其设置为`nil`将引发被引用的对象被垃圾收集。如果它是一个局部变量，方法 exit 将做同样的事情。

也就是说，如果您要求将成员明确设置为`nil`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T02:24:02.287

不，这不是常见的做法。只有在极少数情况下，您明确地将 object 设置为 nil。

例如，在某些数据结构的实现中，将对象设置为 nil 是有意义的。假设您实现了一个缓存并提供了一种删除键的方法。让我们进一步假设缓存在内部使用一个数组来保存对已删除对象的引用。然后建议通过将它们设置为 nil 来删除对已删除对象的所有引用。

然而，在实践中，这些情况并不经常发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T02:19:32.077

您不需要做任何事情来给垃圾收集器任何提示。只需使用内存效率足够高的算法，它会为您处理其余的事情。

# objective-c - 计算下一个生日日期

> ID：14107400
> 
> 赞同：1
> 
> 时间：2013-01-01T02:09:55.613
> 
> 标签：objective-c, cocoa, nsdate

`NSDate`从像这样的字符串计算（和创建）下一个生日的最简单方法是`@"02/29/1980"`什么？（日月年）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T02:42:28.150

这是我将如何做到的。

请注意，在这种情况下，您选择的日期是闰日，因此结果将显示不是闰年的第二天。“正常”日期将显示新年的同一天。

```
NSString *birthdayString        = @"02/29/1980";

// Convert the string to a NSDate
NSDateFormatter *formatter      = [NSDateFormatter new];
formatter.timeZone              = [NSTimeZone timeZoneWithName:@"UTC"];
formatter.dateFormat            = @"MM/dd/yyyy";
NSDate *birthday                = [formatter dateFromString:birthdayString];

// Break the date apart into its components and change the year to the current year
NSCalendar *cal                 = [NSCalendar currentCalendar];
cal.timeZone                    = [NSTimeZone timeZoneWithName:@"UTC"];
NSDate *now                     = [NSDate date];
NSDateComponents *currentComps  = [cal components:NSYearCalendarUnit fromDate:now];
NSDateComponents *birthdayComps = [cal components:NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit
                                         fromDate:birthday];
birthdayComps.year              = currentComps.year;

// Create the date from the modified components
NSDate *birthdayDate            = [cal dateFromComponents:birthdayComps];

// Check to see if the birthday has passed yet this year, and if not add one year
if ([now compare:birthdayDate] == NSOrderedDescending)
{
    NSDateComponents *oneYear = [NSDateComponents new];
    oneYear.year = 1;
    birthdayDate = [cal dateByAddingComponents:oneYear toDate:birthdayDate options:0];
}

NSLog(@"Next Birthday: %@", birthdayDate);
// Results: Next Birthday: 2013-03-01 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T02:24:22.910

使用[NSDateFormatter](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html)将字符串转换为日期。然后通过添加[一年来](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDateComponents_Class/Reference/Reference.html)添加一年。鲍勃是你的叔叔。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-12T16:22:51.163

简单的方法（闰年被窃听）

```
 NSCalendar *calendar = [NSCalendar currentCalendar];
NSDateComponents *components = [calendar components:NSDayCalendarUnit
                                                   fromDate:[NSDate date]
                                                     toDate:birthdate
                                                    options:0];

NSInterger daysLeft = components.day % 365; 
```

# php - isset($_COOKIE['name'])) 不工作

> ID：14107402
> 
> 赞同：3
> 
> 时间：2013-01-01T02:10:10.513
> 
> 标签：php, cookies, isset

所以我正在为自己创建一个博客，并给自己设置一个 cookie 的管理员权限。**我已经手动检查了它的存在。**

**我已经使用 apache 服务器在我的笔记本电脑上测试了代码，并且代码运行良好。**

我有两个 php 页面

第一个检测到 cookie 很好，我从一个表单发布到这个 php 页面上。

```
<?php

if(isset($_POST['tt'])){

    if(isset($_COOKIE['name'])){
        echo "something"; 
```

打印了一些东西

上面的页面是唯一检测到 cookie 的页面我还有 7 个文件没有检测到 cookie。我将在此处发布主页

```
 if(isset($_GET['cat'])){
    $t = $_GET['cat'];
    $mod = "where `cat`=$t";
}

    $ref = mysql_query("SELECT * FROM `content`".$mod);
    while($row = mysql_fetch_assoc($ref)){
        $tit = $row['title'];
        $cno= $row['cno'];
        $brief = $row['brief'];
        $cat = $row['cat'];
        $time = $row['time'];
        $t = "";
        if(isset($_COOKIE['name'])) echo "something"; 
```

东西没有打印

还有 1）除了第一个代码段，其他页面都没有使用 post 方法并在检查 cookie**之前**检索数据。其余页面有时在检查 cookie 之前有一个 get 方法，就像我上面显示的那样，但没有在检查 cookie 之前使用 post 方法 2)var_dump['$_COOKIE'] 仅产生由我的托管服务提供商设置的不相关 cookie。

我猜这可能是一个php配置问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T02:36:49.283

cookie 可能是一个路径 cookie，这意味着它只会被发送到一个页面。使用 Firebug“Cookies”选项卡（或类似工具）检查是否是这种情况，并使用 Firebug“网络”选项卡（或类似工具，或 Wireshark）检查 cookie 是否实际上是由浏览器发送的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-01T02:45:02.320

Where/how are you setting the cookie? There is a[n] (optional) 4th `path` argument when setting PHP cookies:

[http://php.net/manual/en/function.setcookie.php](http://php.net/manual/en/function.setcookie.php)

**For example:**

`setcookie("cookiename","cookievalue", $time);` will only set it for the current URL path

Whereas: `setcookie("cookiename","cookievalue", $time,"/");` will set the cookie for all pages/folders on that domain,

If you press CTRL+SHIFT+J in google chrome, and click on the Resources tab, you can find the cookies and the path it is valid in. I'd check that out. perhaps this is why?

# iphone - 使用多个按钮播放多个 MP3 文件 - iPhone SDK - xCode

> ID：14107405
> 
> 赞同：2
> 
> 时间：2013-01-01T02:10:18.440
> 
> 标签：iphone, xcode, sdk, ios6

我正在为 Movie The ringer 编写一个小型音板应用程序，我是 iPhone SDK 的新手

我已经使用以下代码将所有按钮链接到他们的 Mp3 文件但是只有一些按钮播放他们的声音？

我检查了所有文件名，它们都与代码匹配：

```
 - (IBAction)canWeBeAlone:(id)sender {
    CFBundleRef mainBundle = CFBundleGetMainBundle();
    CFURLRef soundfileURLRef;
    soundfileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef) @"Can We Be Alone", CFSTR ("mp3"), NULL);
    UInt32 soundID;
    AudioServicesCreateSystemSoundID (soundfileURLRef, &soundID);
    AudioServicesPlaySystemSound(soundID);
}

- (IBAction)itsThreeAM:(id)sender {
    CFBundleRef mainBundle = CFBundleGetMainBundle();
    CFURLRef soundfileURLRef;
    soundfileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef) @"Its 3AM", CFSTR ("mp3"), NULL);
    UInt32 soundID;
    AudioServicesCreateSystemSoundID (soundfileURLRef, &soundID);
    AudioServicesPlaySystemSound(soundID);
}

- (IBAction)iHaveSinned:(id)sender {
    CFBundleRef mainBundle = CFBundleGetMainBundle();
    CFURLRef soundfileURLRef;
    soundfileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef) @"I Have Sinned", CFSTR ("mp3"), NULL);
    UInt32 soundID;
    AudioServicesCreateSystemSoundID (soundfileURLRef, &soundID);
    AudioServicesPlaySystemSound(soundID);
}

- (IBAction)mowMyLawn:(id)sender {
    CFBundleRef mainBundle = CFBundleGetMainBundle();
    CFURLRef soundfileURLRef;
    soundfileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef) @"Mow My Lawn", CFSTR ("mp3"), NULL);
    UInt32 soundID;
    AudioServicesCreateSystemSoundID (soundfileURLRef, &soundID);
    AudioServicesPlaySystemSound(soundID);
}

- (IBAction)theyAreMyFriends:(id)sender {
    CFBundleRef mainBundle = CFBundleGetMainBundle();
    CFURLRef soundfileURLRef;
    soundfileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef) @"They Are My Friends", CFSTR ("mp3"), NULL);
    UInt32 soundID;
    AudioServicesCreateSystemSoundID (soundfileURLRef, &soundID);
    AudioServicesPlaySystemSound(soundID);
}

- (IBAction)itsSteve:(id)sender {
    CFBundleRef mainBundle = CFBundleGetMainBundle();
    CFURLRef soundfileURLRef;
    soundfileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef) @"Its Not Jeffy Its Steve", CFSTR ("mp3"), NULL);
    UInt32 soundID;
    AudioServicesCreateSystemSoundID (soundfileURLRef, &soundID);
    AudioServicesPlaySystemSound(soundID);
}

- (IBAction)itWasWrongOfMe:(id)sender {

    CFBundleRef mainBundle = CFBundleGetMainBundle();
    CFURLRef soundfileURLRef;
    soundfileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef) @"It Was Wrong of Me", CFSTR ("mp3"), NULL);
    UInt32 soundID;
    AudioServicesCreateSystemSoundID (soundfileURLRef, &soundID);
    AudioServicesPlaySystemSound(soundID);

}
```

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:42:44.420

我相信你应该使用 AVAudioPlayer 来播放 MP3 文件而不是 AudioServicesPlaySystemSound。AVAudioPlayer 支持“...同时播放多个声音，每个音频播放器一个声音，精确同步”。请参阅 AVAudioPlayer 类参考。这里还有一个项目链接，展示了如何使用 AVAudioPlayer：[http://www.techotopia.com/index.php/Playing_Audio_on_an_iPhone_using_AVAudioPlayer_(iOS_4)][1]

# makefile - Cmake生成的makefile找不到规则

> ID：14107408
> 
> 赞同：1
> 
> 时间：2013-01-01T02:11:05.693
> 
> 标签：makefile, cmake

出于某种原因，CMake 会生成一个错误的 makefile：

```
make[2]: *** No rule to make target `CMakeFiles//Users/wen/projects/Space Cubes/src/Debug.cpp.dir/depend'.  Stop.
make[1]: *** [CMakeFiles/Users/wen/projects/Space Cubes/src/Debug.cpp.dir/all] Error 2 
```

这里发生了什么，为什么它不能工作？我已经尝试过清除缓存。

CMakeLists.txt

```
cmake_minimum_required(VERSION 2.8)
project(spacecubes)

if (APPLE)
    FIND_LIBRARY(OPENGL_LIBRARY OpenGL)
    FIND_LIBRARY(GLUT_LIBRARY GLUT)
    SET(EXTRA_LIBS ${OPENGL_LIBRARY} ${GLUT_LIBRARY})
else (APPLE)
    target_link_libraries(${PROJECT} gl glu glut)
endif(APPLE)

file(GLOB_RECURSE src "src/*.cpp")
add_executable(${PROJECT} ${src}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-01-30T10:55:54.797

它是几年前发布的，当我尝试同时使用 add_executable 和 add_library 时，我想说我遇到了同样的问题......我也在寻找解决方案。

cmake 版本：2.8.7 系统：Ubuntu 12.04

更新：

你好，我又来回答这个问题了。

出现问题是因为可执行文件和 lib 具有相同的目标名称，在您的情况下，它是 ${project}，因此 cmake 在 makefile 中生成了一些错误代码。

另外对于Apple系统，Apply默认使用不区分大小写的文件系统，所以如果你使用同名不同大小写的文件，会以同样的错误结束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-21T12:14:17.280

当您生成项目时，这应该会失败。

${PROJECT} 应该为空。我没有看到你在哪里定义它。

添加一个线组（PROJECT "spacecubes"），它应该可以正常构建。

# css - CSS“假”框架在 FF、Chrome 和 Safari 中不起作用，但在 IE 中正常

> ID：14107412
> 
> 赞同：3
> 
> 时间：2013-01-01T02:12:03.980
> 
> 标签：css, google-chrome, positioning, frames, absolute

我对 css 有点陌生，我正在做的很多事情都是被复制或用谷歌搜索的，所以我对它是可怕的错误的前景感到完全不寒而栗。让我告诉你我想要做什么：

我有一个 php 论坛脚本（我的小论坛），我想将它插入到带有页眉、页脚和内容的标准 css 假帧类型包装器中。现在论坛软件使用 smarty 模板引擎，所以我正在编辑 tpl 文件本身。我知道这一切都很好，因为我没有问题让我在 Dreamweaver 中生成的包装器工作。它是手工完成的，这给我带来了麻烦。

现在我可以使用dreamweaver 来制作我的css 框架集，但是它很懒，我想知道它*为什么*不能在Firefox、Chrome 和Safari 中运行。我确定它只是语法。

首先，您可以在 IE9 中访问我的网站并看到它按设计工作：由于流量而删除了 url - 谢谢！

我将论坛脚本放置在一个 990px​​ 的包装器中，使用单独的页眉、内容和页脚包装器位于论坛索引页面的主要 smarty 主题模板中。看起来不错。不用担心。

现在，如果您在 Chrome、Firefox 或 Safari 中尝试相同的站点，您会看到页眉和页脚存在并按预期工作，但“内容”只是以 100% 的页面宽度加载并忽略绝对定位的 css 样式表设置。

这是我的CSS：

```
/***************STRUCTURE***************************/

* { margin: 0; padding: 0px; }

/* Absolute positioned header for all browsers*/
#header-wrapper {
    position:absolute;
    top:0;
    left:0;
    width:100%;
    height:6em;
}

/* Resets the header position to fixed for real browsers such as Firefox*/
body>div#header-wrapper {
    position:fixed;
}

#headercustom {
    height:6em;
    width:990px;
    margin:0 auto;
}

#content-wrapper {
    padding:6em 0 0 0;
    margin-left:0;
    margin-top:0;
    voice-family: "\"}\""; 
    voice-family:inherit;
    margin-left:16px;
    padding-bottom:60px;
}

body>#content-wrapper {
    margin-left:0;
}

#contentcustom {
    width:990px;
    margin:0 auto;
}

#footer-wrapper {
    width:100%;
    position:absolute;
    bottom:0;
    left:0;
    height:60px;
}

body>#footer-wrapper {
    position:fixed;
}

#footercustom {
    width:990px;
    height:60px;
    margin:0 auto;
}

/***************STYLE***************************/

#headercustom,
#footercustom {
    background:#fff;
    color:#000;
} 
```

这是标记：

```
<html>
    <head>
    <link rel="stylesheet" type="text/css" href="style.css" />
    </head>
    <body>
        <div id="content-wrapper">
            <div id="contentcustom">
            content ie forum main script in here
            </div>
        </div>
        <div id="header-wrapper">
            <div id="headercustom">
            Header content here
            </div>
        </div>
        <div id="footer-wrapper">
            <div id="footercustom">
            Footer content here
            </div>
        </div>
    </body>
</html> 
```

注意：标记被切碎并适当地放置在 smarty 模板中，此处显示仅供参考。它必须工作正常，因为它在 IE 中看起来不错，所以我很确定这是我遇到的 css 语法问题。作为新手并且不知道浏览器如何解释这些事情之间的差异。

你能给我的任何帮助来理解为什么我的定位在 Chrome、FF 和 Safari 中被忽略，但在 IE 中却没有。:D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T06:45:20.187

@你在你的网站上提到的链接，如果你查看页面的 HTML 源代码，你会看到**你的页面有一个条件注释，它会破坏你在 FF、Chrome 等上的 HTML，并且你的页面只能在 IE 中工作**。您有如下代码：

上面这行 HTML 代码意味着这将被读作：在 Internet Explorer 上空白（无）在所有其他浏览器上

像这样的代码被称为条件注释，它只在 IE 上运行，并且只有在必须编写一些 IE 特定代码时才应该使用它们。见：[http ://en.wikipedia.org/wiki/Conditional_comment](http://en.wikipedia.org/wiki/Conditional_comment)

由于您是开发 UI 的新手，我建议您：

*   将页面另存为 HTML
*   使用适当的制表符和间距缩进它
*   在 Firefox 上使用 Firebug 之类的工具（它可以为您节省大量时间来预览您希望进行的 HTML 和 CSS 编辑）
*   使此页面在所有浏览器上都能正常工作
*   现在使用模板引擎实现您为实现此目的所做的更改。

# python - python，打开的文件会被关闭吗？

> ID：14107414
> 
> 赞同：1
> 
> 时间：2013-01-01T02:13:05.977
> 
> 标签：python, python-2.7

> **可能重复：**
> [文件句柄在超出范围后是否会在 Python 中自动关闭？](https://stackoverflow.com/questions/2404430/does-filehandle-get-closed-automatically-in-python-after-it-goes-out-of-scope)

我是 python 新手。我知道如果你打开一个文件并写入它，你需要在最后关闭它。

```
in_file = open(from_file)
indata = in_file.read()

out_file = open(to_file, 'w')
out_file.write(indata)

out_file.close()
in_file.close() 
```

如果我这样写我的代码。

```
open(to_file, 'w').write(open(from_file).read()) 
```

我不能真的关闭它，它会自动关闭吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-01T02:16:01.257

它*最终*会关闭，但无法保证何时关闭。当您需要处理此类事情时，最好的方法是[`with`](http://docs.python.org/2/reference/compound_stmts.html#with)声明：

```
with open(from_file) as in_file, open(to_file, "w") as out_file:
    out_file.write(in_file.read())

# Both files are guaranteed to be closed here. 
```

另见： http: [//preshing.com/20110920/the-python-with-statement-by-example](http://preshing.com/20110920/the-python-with-statement-by-example)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-01T02:17:37.017

当 Python 垃圾收集器销毁文件对象时，它会自动为您关闭文件，但您无法控制实际发生的时间（因此，更大的问题是您不知道是否有错误 /文件关闭期间发生异常）

[在 Python 2.5 之后执行此操作](http://effbot.org/zone/python-with-statement.htm)的首选方法是使用以下`with`结构：

```
with open("example.txt", 'r') as f:
    data = f.read() 
```

并且无论发生什么，都**保证在您完成文件后为您关闭该文件。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T02:20:33.880

According to [http://pypy.org/compat.html](http://pypy.org/compat.html), CPython will close the file; however PyPy will close the file only when garbage collector runs. So for compatibility and style reasons it is better to close the file explicitly (or using `with` construct)

# php - php 类传入未定义的变量

> ID：14107417
> 
> 赞同：-1
> 
> 时间：2013-01-01T02:13:56.087
> 
> 标签：php

我正在尝试创建一个可以处理带有未定义变量的字符串的类。这可能吗？或者，还有更好的方法？

例如，如果我有以下内容并且希望此类 Looper`$str_1`使用变量获取并输出它`$fname`并`$lname`填写...然后在其他地方我可以重用 Looper 类和进程`$str_2`，因为它们都需要`$fname`和`$lname`.

```
class Looper {
    public function processLoop($str){
        $s='';
        $i=0;
        while ($i < 4){
            $fname = 'f' . $i;
            $lname = 'l' . $i;

            $s .= $str . '<br />';
            $i++;
        }
        return $s;
    }
}

$str_1 = "First Name: $fname, Last Name: $lname";
$rl = new Looper;
print $rl->processLoop($str_1);

$str_2 = "Lorem Ipsum $fname $lname is simply dummy text of the printing and typesetting industry";
print $rl->processLoop($str_2); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T02:25:30.030

为什么不直接使用[`strtr`](http://php.net/manual/en/function.strtr.php)：

```
$str_1 = "First Name: %fname%, Last Name: %lname%";
echo strtr($str_1, array('%fname%' => $fname, '%lname%' => $lname)); 
```

因此，如果您的班级：

```
public function processLoop($str){
    $s='';
    $i=0;
    while ($i < 4){
        $tokens = array('%fname%' => 'f' . $i, '%lname%' => 'l' . $i);
        $s .= strtr($str, $tokens) . '<br />';
        $i++;
    }
    return $s;
} 
```

同样，如果您不想依赖命名占位符，您可以通过以下方式使用位置占位符[`sprintf`](http://us1.php.net/manual/en/function.sprintf.php)：

```
public function processLoop($str){
    $s='';
    $i=0;
    while ($i < 4){
        $s .= sprintf($str, 'f' . $i, l' . $i) . '<br />';
        $i++;
    }
    return $s;
} 
```

在这种情况下，您的`$str`论点看起来像`"First Name: %s, Last Name: %s"`

所以在所有用法中：

```
// with strtr

$str_1 = "First Name: %fname%, Last Name: %lname%";
$rl = new Looper;
print $rl->processLoop($str_1);

// with sprintf

$str_1 = "First Name: %s, Last Name: %s";
$rl = new Looper;
print $rl->processLoop($str_1); 
```

# sql-server-2008 - 如何在 SQL Server 2008 R2 中创建数据库副本

> ID：14107419
> 
> 赞同：0
> 
> 时间：2013-01-01T02:14:29.150
> 
> 标签：sql-server-2008

我在 SQL Server 2008 R2 中有一个数据库，其中包含多年的数据和数百个表、存储过程、视图和作业。

我想在同一台服务器（它是集群的）中创建数据库的副本以进行归档。我想在生产数据库中保留最多 2 年的数据，以及比这更早的所有数据，将其从生产数据库中删除并将其插入存档数据库。我计划使用 SSIS 包来做到这一点。

我想知道创建新数据库的最佳方法，其中包含所有空对象以及我应该注意的任何陷阱、技巧或任何其他事情。

谢谢，新年快乐。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T02:32:11.690

如果您不需要数据而只需要架构，这应该有助于 [脚本数据库](http://blog.sqlauthority.com/2007/08/21/sql-server-2005-create-script-to-copy-database-schema-and-all-the-objects-stored-procedure-functions-triggers-tables-views-constraints-and-all-other-database-objects/)

# android - 调用 finish() 不会完成活动

> ID：14107421
> 
> 赞同：7
> 
> 时间：2013-01-01T02:14:55.407
> 
> 标签：android, onpause, activity-finish

我想在活动因特定原因暂停时完成。直到最近我的代码运行良好，但最近该`finish()`方法由于某种原因停止了它的工作。此外，当`finish()`调用该方法时，我收到以下`LogCat`消息：

```
12-31 18:01:23.445: W/ActivityManager(481): Duplicate finish request for ActivityRecord{42465370 u11 "myapplicationpackage"} 
```

有人可以帮我解决这个问题吗？

**`OnPause()`方法**

```
@Override
protected void onPause() {
    super.onPause();
    finish();
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-01T02:56:14.537

您可以通过调用 来检查您的活动是否已经完成`if (isFinishing()){}`，`finish`只有在没有完成时才调用。~~或者，您可能希望`android:noHistory="true"`在清单文件中指定您的活动，一旦用户离开它，它实际上会完成您的活动。~~

* * *

## 回答 #2

> 赞同：-7
> 
> 时间：2013-01-01T02:37:32.207

您很可能拥有正在运行的活动的重复副本。我建议在一位家长下进行所有活动，并使用

```
finishall() 
```

# html - 如何垂直对齐中间浮动左右对象？没有确切的行高属性

> ID：14107432
> 
> 赞同：-1
> 
> 时间：2013-01-01T02:17:20.003
> 
> 标签：html, css, css-float, vertical-alignment

好的，问题在这里

[http://jsfiddle.net/vT4YT/](http://jsfiddle.net/vT4YT/)

```
 <table><tr><td><div></div><div></div></td></tr></table> 
```

现在您看到该选项和该行文本未垂直居中对齐

我可以放在一张桌子里，但它确实增加了书面垃圾代码

使用 float left 和 right 时没有更合适的解决方案吗？

谢谢

这就是我的意思

**并且请不要发布具有精确行高的答案，例如 120px 或在 td 内放置另一个表格**

![在此处输入图像描述](../Images/bee6724b5912e5dc432f7cb0b2a20608.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T06:49:38.670

被`margin-top`认为是“精确线高”吗？ [http://jsfiddle.net/KCvfZ/1/](http://jsfiddle.net/KCvfZ/1/)。

```
 .FloatLeft
    {
        margin-top:15px;  
        overflow: hidden;
        float: left;
    } 
```

# python - How to end a python program while it is running?

> ID：14107436
> 
> 赞同：3
> 
> 时间：2013-01-01T02:18:04.860
> 
> 标签：python, python-2.7

I study python by myself. And i got a problem here.."The human player may also end the game by pressing the Control-D sequence at any time." How can i do this.what kind of function should i use? Thanks.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T02:20:15.097

You could try [`sys.exit()`](http://docs.python.org/2/library/sys.html#sys.exit):

```
import sys
...
sys.exit() 
```

There is also a more standard `exit()` function (for which you don't need to import anything). However there is one notable difference between this and `sys.exit()` as noted in the documentation:

> Since [`exit()`](http://docs.python.org/2/library/constants.html#exit) ultimately "only" raises an exception, it will only exit the process when called from the main thread, and the exception is not intercepted.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T18:24:24.267

这里的基本逻辑是处理 SIGQUIT 键盘中断。中断有很多种，Ctrl+C (SIGINT)、Ctrl+D (SIGQUIT) 等。 [这个 SOF 线程](https://stackoverflow.com/questions/1112343/how-do-i-capture-sigint-in-python)讨论了在 python 中捕获 Ctrl+C 信号。基于同样的思路，不难理解 Ctrl+D。这个[python 文档](http://docs.python.org/2/library/signal.html)提供了更多的见解。

# iphone - How to use @compatibility_alias to alias classes for previous versions of iOS

> ID：14107441
> 
> 赞同：4
> 
> 时间：2013-01-01T02:19:39.067
> 
> 标签：iphone, ios

Can somebody tell me how to use @compatibility_alias to take a class, for example, UIActivityViewController, that is new to iOS 6, and use @compatibility_alias to make it work on iOS 5 and iOS 4\. Please be specific and say where to put the code, and how to use it.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-01T02:48:25.323

它只是方法名称的别名，仅此而已。

它是 Objective-C 编译器的一个特性，而不是运行时的特性

查看 NSHipster，我们看到：
`@compatibility_alias:`允许现有类使用不同的名称进行别名。
这允许人们编写自己的当前 SDK 中不可用的类的实现，并将名称“别名”为较新 sdk 中的类的名称。因此，关键是编写或找到另一个具有与另一个不可用类相同的方法和行为的类。

这里没有灵丹妙药。

顺便说一句：我过去必须在邮局排队，并且有一个标语上写着：“如果它看起来不错，它可能是真的”，这适用于这里。

请参阅[NSHipster](http://nshipster.com/at-compiler-directives/)，搜索[`@compatibility_alias`](http://nshipster.com/at-compiler-directives/).

# java - Location to store save files on local machine in java

> ID：14107442
> 
> 赞同：3
> 
> 时间：2013-01-01T02:19:45.803
> 
> 标签：java

I have made a java applet/application game that should save levels that the user can create to their local machine. I say applet/application because it can run either as an application or as an applet. Currently I am using this to write the file:

```
BufferedWriter bf = new BufferedWriter(new FileWriter("Circles/levels/level.txt"));
for (int i = 0; i < lines.size(); i++) {
    bf.write(lines.get(i));
    bf.newLine();
} 
```

lines is an arraylist with the lines to write to the file.

and

```
FileReader fr = new FileReader("Circles/levels/level.txt");
        BufferedReader bf = new BufferedReader(fr);
        lines = new ArrayList<String>();
        while (true) {
            String line = bf.readLine();
            if (line == null) {
                break;
            }
            lines.add(line);
        }
        bf.close(); 
```

to read the file. Those are surrounded in try/catch loops, I am just showing what I have to.

This works ok, but it seems to be a completely different location on different operating systems, and the application stores in a different location as the applet.

I would like a way to get an absolute path to a place to save levels that would not change no matter where the java program is being run from, and would be the same if you ran it as an application and as an applet. Also it would be nice to have this work on all operating systems (linux, windows, mac).

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T02:25:07.973

There is no location at all for applets to save data, so if you want to be running as an applet, you have to avoid that, quite simply. The applet sandbox prevents filesystem access completely. You'd need to call on the server to save your data instead.

As for stand-alone applications, I'm also sorry to say that there is no completely generally acceptable convention. However, creating a dotfile directory in the user's home directory is often considered *acceptable* practice on both Linux, OSX and Windows:

```
public static final File savedir = new File(new File(System.getProperty("user.home")), ".yourgame"); 
```

Then, derive your filenames from that:

```
FileReader fr = new FileReader(new File(savedir, "level.txt")); 
```

Although it works, it's not exactly what Windows programs would normally do, however.

# javascript - How should I put labels on images?

> ID：14107443
> 
> 赞同：1
> 
> 时间：2013-01-01T02:19:55.050
> 
> 标签：javascript, image, raphael

I have a set of unlabeled images which I need to present labeled and unlabeled. I have the label text and positions. I do *not* want to have two images (labeled and unlabeled); rather, I want to put the text over the image, either in relatively-positioned `div`s or as SVG text elements using Raphaël, those being two approaches I'm technically comfortable with. The nature of the project dictates that the image and the labels be delivered to the browser as distinct resources.

Ideally the labels would include indicator lines as in [this image](http://biodidac.bio.uottawa.ca/thumbnails/filedet.htm?File_name=aves013b&File_type=cdr) (N.B. I'm aware that the labels are part of the image file in the example - I want my end result to *look* like this.)

I'm wondering if there is any reason to prefer one approach over the other (either `div`s or SVG elements)? An existing javascript library for positioning labels would be a strong recommendation for either approach; otherwise I suppose drawing the indicator lines would be easier in SVG using Raphaël. jQuery and Raphaël are already available in the project.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T16:29:59.863

我看到在 Raphael 绘图中使用绝对定位的 div 而非 SVG 文本项的两个主要原因：

*   您有多行文本，不想手动换行（如工具提示）
*   您确实需要可用于 HTML 文本的完整 CSS 样式

在您的情况下，我会制作一个小的 Raphael 函数来放置标签并在图像上的适当位置画一条线。此示例将标签放置在图像边缘的 y 值处它指示的位置，但您可以轻松调整以将标签放置在图像上方和不同的高度（即对角线）。

```
//x and y relative to image
Raphael.el.label = function (label, dx, dy) {
    //absolute x and y
    var x = dx + this.attr("x"),
        y = dy + this.attr("y"),
        label,
        line;
    //decide whether to put label on left or right
    if (dx < this.attr("width") / 2) {
        label = paper.text(this.attr("x") - 10, y, label).attr("text-anchor" , "end");
        line = paper.path("M" + (this.attr("x") - 5) + "," + y + "l" + (dx + 5) + ",0").attr("stroke", 2);
    } else {
        label = paper.text(this.attr("x") + this.attr("width") + 10, y, label).attr("text-anchor" , "start");
        line = paper.path("M" + (this.attr("x") + this.attr("width") + 5) + "," + y + "L" + (x) + "," + y).attr("stroke", 2);   
    }            
}; 
```

[jsFiddle](http://jsfiddle.net/smm9F/)

# java - Same logic but have different result with JOptionPane and JFrame

> ID：14107445
> 
> 赞同：-2
> 
> 时间：2013-01-01T02:20:05.403
> 
> 标签：java, swing, joptionpane

Code 1:

```
public static JFrame frame = null;    
public myClass(JFrame frame1)
{
    initComponents();
    frame = frame1;
    String result = JOptionPane.showInternalInputDialog(
        frame.getContentPane(), "Sample");
} 
```

Code 2:

```
public static JFrame frame = null;
public myClass(JFrame frame1)
{
    initComponents();
    frame = frame1;
    sampleMethod();
}

public static void sampleMethod() 
{
    String result = JOptionPane.showInternalInputDialog(
        frame.getContentPane(), "Sample");
} 
```

I wanted the result in Code 1 but the code must look like Code 2\. Why do they have different results?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T02:46:10.123

如果两段代码都是相关的，那么结果就不可能不同。因此，这意味着您提供的代码不够完整，**或者**您没有明确“不同结果”的含义。

我的猜测是您正在同时创建多个实例`myClass`？我建议试试这个：（没有所有这些`static`）

```
public JFrame frame = null; // static removed
public myClass(JFrame frame1)
{
    initComponents();
    frame = frame1;
    sampleMethod();
}

public void sampleMethod() // static removed
{
    String result = JOptionPane.showInternalInputDialog(
        frame.getContentPane(), "Sample");
} 
```

# c++ - BOOST_FOREACH broken; is it at all possible to fix?

> ID：14107454
> 
> 赞同：2
> 
> 时间：2013-01-01T02:23:24.380
> 
> 标签：c++, boost-foreach

If you use the name of a variable whose name is the same as the name of the loop variable, `BOOST_FOREACH` gets confused:

```
#include <boost/foreach.hpp>
#include <vector>

struct Test { };
std::vector<int> test(Test) { return std::vector<int>(); }
Test c;

int main()
{
    BOOST_FOREACH (int c, test(c))
    {
    }
} 
```

I understand the cause of the problem, but I'm wondering, is this at all possible to fix?
I can't think of any way around it (that doesn't require virtual functions and such).

# javascript - Getting "402 Payment Required" using Youtube's iframe API to embed videos

> ID：14107455
> 
> 赞同：1
> 
> 时间：2013-01-01T02:23:54.790
> 
> 标签：javascript, api, iframe, youtube

I am using youtube's iframe API to embed videos, one at a time, on a website that gets lists of videos from reddit.

Yesterday everything was working fine, however today I am getting "402 Payment Required" when the iframe makes a call to http://www.youtube.com/get_video_info[...], and the videos doesn't load. This happens every once in a while, it feels like some sort of throttling. I thought it may be related to some changes to the code I've done today, but I was getting the same errors when I reverted to yesterday's code.

I believe the GET requests originates from Youtube's HTML5 player, which is loaded in the iframe, after calling new YT.Player:

```
 player = new YT.Player(
        'player', {
            playerVars: {
            // 'controls': 0 // TODO: Hide controls.
            },
            videoId: vidid,
            events: {
            'onReady': onPlayerReady,
            'onStateChange': checkState
            }
        } 
```

GET [http://www.youtube.com/get_video_info?html5=1&video_id=bV3W1a_rY7k&eurl=http%3A%2F%2Flocalhost%2Fderp.html&el=embedded&hl=en_US&splay=1](http://www.youtube.com/get_video_info?html5=1&video_id=bV3W1a_rY7k&eurl=http%3A%2F%2Flocalhost%2Fderp.html&el=embedded&hl=en_US&splay=1) Response: 402 Payment Required

You can see the example live here:

[http://ozi.ca/#videos](http://ozi.ca/#videos)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T02:28:44.370

After googling for a bit I found a refernce to this problem [here](http://rg3.github.com/youtube-dl/faq.html).

It seems that youtube has hijacked the 402 to mean "Due to high usage, youtube requires a CAPTCHA to be solved."

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-03T17:18:40.030

我同意特伦特。我在尝试通过 MPS Youtube 获取视频信息时遇到了这个问题，并意识到这是因为我是通过 VPN 连接的，所以谷歌从同一个 IP 收到大量请求并需要验证码。关闭VPN后，我就可以获取视频信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-02T22:23:38.823

解决此问题，将您的浏览器导航到 www.youtube.com 并解决您在那里看到的验证码。一旦你这样做，你将不再看到错误。

# android - How to prevent android webview load images?

> ID：14107457
> 
> 赞同：1
> 
> 时间：2013-01-01T02:24:02.917
> 
> 标签：android, image, webview

How to prevent android webview load images?

I give user an option whether to load images or not in a webview.

One option is to using regex to delete all image tags. Is there an easier way?

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-01T02:44:00.527

这应该可以帮助您进行有关 web 视图的所有设置：http: [//developer.android.com/reference/android/webkit/WebSettings.html](http://developer.android.com/reference/android/webkit/WebSettings.html)

# shell - 在 Safari 脚本中打开当前 Chrome 选项卡不起作用

> ID：14107461
> 
> 赞同：0
> 
> 时间：2013-01-01T02:25:19.623
> 
> 标签：shell, google-chrome, tabs, safari, applescript

我想在 Safari 中打开我当前的 Chrome URL。但是我弄乱了脚本中的引号并出现错误：`error "The file /$theURL does not exist." number 1`

这是脚本：

```
property theURL : ""
tell application "Google Chrome"
    set theURL to (get URL of (active tab) of window 1)
end tell

do shell script "open -a Safari '$theURL' " 
```

有人可以指出必须写的*do shell 部分吗？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T02:39:58.150

尝试：

```
do shell script "open -a Safari " & quoted form of theURL 
```

# javascript - Getting checkbox values in HTML to a temporary variable Javascript/HTML

> ID：14107469
> 
> 赞同：0
> 
> 时间：2013-01-01T02:31:14.753
> 
> 标签：javascript, html

I have a lot of checkboxes, with the same id="cbna", but when i submit the form , the javascript code should check If atleat one checkbox is checked, if not an alert should pop up. if it is checked the the value stored in site the checkbox should execute along with the details of a text area. I have tried to do the same but in vain.

```
 <script>

 function checkCheckBoxes(form1) 
     {
    if (document.form1.checked==true)
              {
        function OpenWindow(info)
               {
                   window.open(info);
               }
              }
else
    {
 alert ('You didn\'t choose any of the checkboxes!');
 return false;
    }
}
</script>

<form name="form1" id="form1" method="post" action="" >
  <p>
    <input type="checkbox" name="checkbox" onclick="if(this.checked)OpenWindow(this.value)}" value="www.something.com 1" />
  google<br />
 <input type="checkbox" name="checkbox" onclick="if(this.checked){OpenWindow(this.value)}" value="www.something.com 2" />
  apple<br />

 <input type="checkbox" name="checkbox" onclick="if(this.checked){OpenWindow(this.value)}" value="www.something.com 3" />
  ibm<br />

 <input type="checkbox" name="checkbox" onclick="if(this.checked){OpenWindow(this.value)}" value="www.something.com 4" />
  nageo<br />

 <textarea cols="100" rows="22" id="descp" >
 hello wats up!
</textarea>
 <input onclick="checkCheckBoxes(form1)" value="create forms" type="button">
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T04:20:50.127

嘿@HatakeKakashi 使用以下代码解决您的问题

page1.html 代码

```
 <html>
            <head>
                <title>page1</title>
            </head>
             <script>
                     function checkCheckBoxes() 
                    {
                    var flag=false;
                       var elLength = document.form1.elements.length;

                        for (i=0; i<elLength; i++)
                        {
                            var type = form1.elements[i].type;
                            if (type=="checkbox" && form1.elements[i].checked){

                                flag =true;
                            }
                            else if (type=="checkbox") {
                               // alert("not checked");
                            }
                        }

                        if(flag)
                        {
                         window.open("page2.html?textVal="+document.form1.descp.value,'mywindow','width=400,height=200')
                        }
                        else
                        {
                            alert ("You didn\'t choose any of the checkboxes!");
                            return false;
                        }
                   }
        </script>
            <body>
                           <form name="form1" id="form1" method="post" action="" >
                      <p>
                        <input type="checkbox" name="checkbox1" onclick="" value="www.something.com 1" />
                      google<br />
                     <input type="checkbox" name="checkbox1" onclick="" value="www.something.com 2" />
                      apple<br />

                     <input type="checkbox" name="checkbox1" onclick="" value="www.something.com 3" />
                      ibm<br />

                     <input type="checkbox" name="checkbox1" onclick="" value="www.something.com 4" />
                      nageo<br />

                     <textarea cols="100" rows="22" id="descp" >hello wats up!</textarea>
                     <input onclick="checkCheckBoxes(form1)" value="create forms" type="button">
                    </form>
            </body>
        </html> 
```

page2.html 代码

```
 <html>
        <head>
          <title>Page2</title>
          <script>
          function getURLParameters(paramName) 
                {
                        var sURL = window.document.URL.toString();  
                    if (sURL.indexOf("?") > 0)
                    {
                       var arrParams = sURL.split("?");         
                       var arrURLParams = arrParams[1].split("&");      
                       var arrParamNames = new Array(arrURLParams.length);
                       var arrParamValues = new Array(arrURLParams.length);     
                       var i = 0;
                       for (i=0;i<arrURLParams.length;i++)
                       {
                        var sParam =  arrURLParams[i].split("=");
                        arrParamNames[i] = sParam[0];
                        if (sParam[1] != "")
                            arrParamValues[i] = unescape(sParam[1]);
                        else
                            arrParamValues[i] = "No Value";
                       }

                       for (i=0;i<arrURLParams.length;i++)
                       {
                                if(arrParamNames[i] == paramName){
                            //alert("Param:"+arrParamValues[i]);
                                return arrParamValues[i];
                             }
                       }
                       return "No Parameters Found";
                    }

                }
          </script>
        </head>
        <body>
           <script>
                    document.write(getURLParameters("textVal"))
           </script>

        </body>
    </html> 
```

# node.js - nodejs从url下载并解压缩文件，错误No END header found

> ID：14107470
> 
> 赞同：11
> 
> 时间：2013-01-01T02:31:59.353
> 
> 标签：node.js, download, unzip, adm-zip

我正在尝试从 nseindia.com 下载文件并在内存中解压缩。我正在使用 nodejs webkit 和 adm-zip。我在控制台上收到错误：

> 未捕获 无效或不受支持的 zip 格式。未找到 END 标头

**代码**：

```
var http = require('http'),
                fs = require('fs'),
                request = require('request'),
                AdmZip = require('adm-zip'),
                out = fs.createWriteStream('data/nseeqbhav.zip'); // For saving NSE Equity bhavcopy

// Downloading NSE Bhavcopy 
request(
           { method: 'GET',
               uri: 'http://www.nseindia.com/content/historical/EQUITIES/2012/DEC/cm19DEC2012bhav.csv.zip',
               headers: { "User-Agent": "Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.97 Safari/537.11",
                   "Referer": "http://www.nseindia.com/products/content/all_daily_reports.htm",
                   "Accept-Encoding": "gzip,deflate,sdch",
                   "encoding": "null",
                   "Accept": "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8",
                   "Cookie": "cookie"
               }
           }
            ).pipe(out);
            var zip = new AdmZip("data/nseeqbhav.zip"),
            zipEntries = zip.getEntries();
            zip.extractAllTo(/*target path*/"data/unzip/", /*overwrite*/true); 
```

我尝试跟随以结束流但没有成功。

```
out.end();
out.destroy(); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-01T04:25:59.107

您正在尝试在文件完全写入之前读取文件。您需要等待完成写入。

```
var http = require('http'),
    fs = require('fs'),
    request = require('request'),
    AdmZip = require('adm-zip'),
    out = fs.createWriteStream('data/nseeqbhav.zip'); // For saving NSE Equity bhavcopy

// Downloading NSE Bhavcopy
var req = request(
    {
        method: 'GET',
        uri: 'http://www.nseindia.com/content/historical/EQUITIES/2012/DEC/cm19DEC2012bhav.csv.zip',
        headers: { "User-Agent": "Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.97 Safari/537.11",
            "Referer": "http://www.nseindia.com/products/content/all_daily_reports.htm",
            "Accept-Encoding": "gzip,deflate,sdch",
            "encoding": "null",
            "Accept": "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8",
            "Cookie": "cookie"
        }
    }
);

req.pipe(out);
req.on('end', function() {
    var zip = new AdmZip("data/nseeqbhav.zip"),
    zipEntries = zip.getEntries();
    zip.extractAllTo(/*target path*/"data/unzip/", /*overwrite*/true);
}); 
```

# javascript - jquery下拉菜单瞬间闪烁

> ID：14107476
> 
> 赞同：2
> 
> 时间：2013-01-01T02:33:48.513
> 
> 标签：javascript, jquery, html, css

我有一个我正在为一个网站工作的 jquery/css 下拉菜单。它工作得很好，除了当您在子菜单项之间导航时，由于我使用的 css 边框，选定的主菜单项会改变它的文本颜色一秒钟。这不是很明显，但多年来一直困扰着我！我想保持边框分隔子菜单，但我不想要闪光灯！有什么计时器可以用来解决这个问题吗？或者我可以制作边框使其位于盒子内吗？非常感谢您的帮助！

这是jsfiddle：http: [//jsfiddle.net/BLvKK/1/](http://jsfiddle.net/BLvKK/1/)

注意：我知道使用 css:hover 属性而不是通过 jquery 触发翻转会更经济，我此时只是使用 jquery，因为我正在测试它。

这是html：

```
<div id = "nav_div">
            <ul id="navigation">
                <li id="home">
                <a href="#" class="nav_style" id="home_a">Home</a>
            </li>
            <li id="sign_ups">
                <a href="#" class="nav_style" id="sign_ups_a">Sign-ups</a>
                <ul class="sub_nav_style" id="sign_ups_sub">
                    <li>
                        <a href="#">Camper Sign-up</a>
                    </li>
                    <li>
                        <a href="#">Junior Counselor Sign-up</a>
                    </li>
                    <li>
                        <a href="#">Counselor Sign-up</a>
                    </li>
                </ul>
            </li>
            <li id="info">
                <a href="#" class="nav_style" id="info_a" name="info_a">Information</a>
                <ul class="sub_nav_style" id="info_sub">
                    <li>
                        <a href="#">Facts You Need</a>
                    </li>
                    <li>
                        <a href="#">Contact Information</a>
                    </li>
                    <li>
                        <a href="#">Vendor Information</a>
                    </li>
                </ul>
            </li>
            <li id="about_camp">
                <a href="#" class="nav_style" id="about_camp_a" name="about_camp_a">About Camp</a>
                <ul class="sub_nav_style" id="about_camp_sub">
                    <li>
                        <a href="#">What People Say</a>
                    </li>
                    <li>
                        <a href="#">Sample Menu</a>
                    </li>
                    <li>
                        <a href="#">Photos</a>
                    </li>
                </ul>
            </li>
            <li id="donate">
                <a href="#" class="nav_style" id = "donate_a">Make a Donation</a>
            </li>
        </ul> 
```

这是CSS：

```
ul{
margin:0 auto;
padding:0;
list-style-type:none;
}
a{
text-decoration:none;
}
#nav_div{
width:100%;
height:36px;
background:#b9bbbd;
text-align:center;
z-index:1;
}
ul#navigation{
text-align:center;
float:left;
}
ul#navigation li{
float:left;
min-width:170px;
font-size:13px;
}
ul.sub_nav_style {
position:absolute;
display:none;
padding-top: 10px;

}
ul.sub_nav_style li{
font-family:Tahoma, Geneva, sans-serif;
clear:both;
background:#b9bbbd;
border-bottom:1px solid #999999;
}
ul.sub_nav_style li a{
color:#FFFFFF; 
}
a,
a:active,
a:visited {
display:block;
padding:10px;
}
.nav_style{
font-family:Tahoma, Geneva, sans-serif;
font-size:13px;
background:#b9bbbd;
color:#FFFFFF;
}
.nav_style:hover{
font-family:Tahoma, Geneva, sans-serif;
font-size:13px;
background:#114878;
color:#000000;
}
.nav_style_roll_off{
font-family:Tahoma, Geneva, sans-serif;
font-size:13px;
background:#b9bbbd;
color:#114878;
}
.sub_nav_style_bround_roll{
background:#25313d;
} 
```

这是JQuery：

```
// JavaScript Document
$(document).ready(function() {

    //sub rolls sign ups
    $("ul#navigation li#sign_ups ul li:eq(0) a").hover(function() {
        $(this).toggleClass("sub_nav_style_bround_roll");
        $("#sign_ups_a").toggleClass("nav_style_roll_off");
    });
    $("ul#navigation li#sign_ups ul li:eq(1) a").hover(function() {
        $(this).toggleClass("sub_nav_style_bround_roll");
        $("#sign_ups_a").toggleClass("nav_style_roll_off");
    });
    $("ul#navigation li#sign_ups ul li:eq(2) a").hover(function() {
        $(this).toggleClass("sub_nav_style_bround_roll");
        $("#sign_ups_a").toggleClass("nav_style_roll_off");
    });
    // sup rolls info
    $("ul#navigation li#info ul li:eq(0) a").hover(function() {
        $(this).toggleClass("sub_nav_style_bround_roll");
        $("#info_a").toggleClass("nav_style_roll_off");
    });
    $("ul#navigation li#info ul li:eq(1) a").hover(function() {
        $(this).toggleClass("sub_nav_style_bround_roll");
        $("#info_a").toggleClass("nav_style_roll_off");
    });
    $("ul#navigation li#info ul li:eq(2) a").hover(function() {
        $(this).toggleClass("sub_nav_style_bround_roll");
        $("#info_a").toggleClass("nav_style_roll_off");
    });
    //sub rolls about_camp
    $("ul#navigation li#about_camp ul li:eq(0) a").hover(function() {
        $(this).toggleClass("sub_nav_style_bround_roll");
        $("#about_camp_a").toggleClass("nav_style_roll_off");
    });
    $("ul#navigation li#about_camp ul li:eq(1) a").hover(function() {
        $(this).toggleClass("sub_nav_style_bround_roll");
        $("#about_camp_a").toggleClass("nav_style_roll_off");
    });
    $("ul#navigation li#about_camp ul li:eq(2) a").hover(function() {
        $(this).toggleClass("sub_nav_style_bround_roll");
        $("#about_camp_a").toggleClass("nav_style_roll_off");
    });
});
//slide toggles
$("#sign_ups").hover(function() {
    $("#sign_ups_sub").slideToggle('fast');
});
$("#info").hover(function() {
    $("#info_sub").slideToggle('fast');

});
$("#about_camp").hover(function() {
    $("#about_camp_sub").slideToggle('fast');
}); 
```

​​​​</p>

再次感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T02:50:54.057

如果您只希望文本保持白色，只需`.toggleClass("nav_style_roll_off");`从任何地方删除：

更新：要消除闪烁：http: [//jsfiddle.net/BLvKK/7/](http://jsfiddle.net/BLvKK/7/)

# php - 在 php 中转义

> ID：14107477
> 
> 赞同：-1
> 
> 时间：2013-01-01T02:34:12.377
> 
> 标签：php

如何在 php 中转义以下行？

```
@[myvaule]"$array[$i]".docx 
```

我试过这样做``@[m]"$array[$i]"`.docx`，但我得到了错误

解析错误：语法错误，意外的 T_VARIABLE，期待 ')'

我试过这个：

```
@[rrent]".array[$i].".docx" 
```

`array[$i]`但是像这样之后我得到了一个额外的空间`[myrstarray .docx`

如果有人可以提供帮助，那就太棒了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T02:36:47.423

如果你想用它做一个字符串，最好把它放在一个像这样的变量中，

```
$filename = "[mytorrent]{$array[$i]}.docx"; 
```

阅读有关[PHP 字符串](http://php.net/manual/en/language.types.string.php#language.types.string.syntax.double)的更多信息。

# iphone - Objective-C 变量/对象声明

> ID：14107479
> 
> 赞同：1
> 
> 时间：2013-01-01T02:35:27.970
> 
> 标签：iphone, objective-c, variables, declaration

我对 Objective-C 中的变量/对象声明有一些疑问，希望能更好地理解一些事情。

1.  我知道给一个变量一个`@property`声明允许你从其他类访问它，如果你不打算在它自己的类之外使用它，这有什么用吗？

2.  我经常在示例代码中看到变量和对象仅使用`@property`而不是直接在`@interface`. 为什么？

3.  我也看到人家在使用的时候`@synthesize`，做点什么之类的`var = _var;`。怎么会？

4.  引用对象和变量时，是否有任何理由，例如做`self.var.`而不是`var.`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T02:52:17.023

1.  @property 和 synthesize，即使是私下使用，也会为您提供预构建的 getter 和 setter。这就是我使用它们的原因。

2.  在最近的 Xcode 中，您会得到一个为您提供的合成器，因此您可以将 @property 单独视为与 @synthesize 的一对。

3.  下划线别名让您可以毫不含糊地将堆栈变量命名为相同的名称，例如...

    ```
    // say my class contains a property called foo, alias _foo.
    - (void)initWithFoo:(id)foo {
        self = [self init];
        if (self) {
            _foo = foo;  // assign the param to the instance var
        }
        return self;
    } 
    ```

4.  在 init 和 dealloc 之外使用 getter 和 setter 是一种很好的做法。getter 和 setter 将对属性的访问“掐断”到您可能想要添加行为的单个位置。例如，一种常见的做法是使用 getter 作为惰性初始化器......

    ```
    // this code assumes ARC, otherwise for retained properties without arc, you'll need to add release and retain code here and if you replace the default setter
    - (SomeType *)bar {
        if (!_bar) {
            _bar = [[SomeType alloc] init];
        }
        return _bar;
     } 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T02:52:16.937

1.  您还可以访问未声明为属性的变量。属性只是一个捷径。一种告诉编译器自动为该变量创建 getter 和 setter（访问器）方法的方法。您有时在括号中看到的标志是更改访问器方法的实际实现的附加选项。
2.  因为在这种情况下，实例变量将在编译时自动添加到您的类中。该变量的名称将与您的属性相同，除了一个额外的下划线前缀 ( `_var`)。
3.  这允许您更改自动生成的实例变量的名称。等号左边是属性；实例变量在右侧。您还可以自己声明实例变量，如果它与属性的名称不同，则必须以这种方式分配它。
4.  Using`self.var`将使用访问器方法（无论它们是自动添加的，还是您自己实现的）。例如，如果你想延迟加载一个对象，你可以自己实现一个 getter 来检查对象是否已经存在，如果不存在就创建它，然后返回它：

    ```
    // Assuming you defined  @property (nonatomic) MyClass *var;  in the header
    - (MyClass *)var {
        if (!_var) {
            _var = [[MyClass alloc] init];
        }
        return _var;
    } 
    ```

    现在您可以使用点语法访问它：

    ```
    [self.var doSomething]; 
    ```

    这将调用上面定义的 getter。如果变量是`nil`（尚未使用），它首先被初始化。如果您只是使用实例变量...

    ```
    [_var doSomething]; 
    ```

    ...你会得到不同的结果。如果`_var`是`nil`，则该消息将被简单地忽略（无错误，崩溃）。这是因为您直接访问变量，而不是通过访问器方法。当然，如果你确定对象会被初始化，或者在它是时处理`nil`，那么你可以直接使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T02:49:47.947

1.  当你使用`@property`那个被合成的^*时，你可以避免编写“样板”代码，例如复制或锁定以使访问原子化。随着 ARC 的引入，此功能的重要性已大大降低。
2.  无需编写`@synthesize`最新的 Xcode，您可以使用很少或不需要额外编码的属性。由于属性比变量更“面向未来”，因为您可以在 setter 中执行验证并在 getter 中执行计算，因此您几乎没有理由使用“普通”变量。
3.  `@synthesize`在最新的 Xcode 中不需要使用。如果您看到很多`@synthesize`，很可能您正在阅读“旧代码”（超过 6 个月大）。
4.  不，没有理由对变量这样做。一些商店要求程序员无论如何都要这样做，据称是为了清楚起见。我不会对此发表评论，因为这是一个偏好问题。如果您决定这样做，则应该在整个代码库中始终如一地这样做。

    * * *

    ^*`@synthesize`通过最新的 Xcode显式或隐式使用。

# ios - 在objective-c中命名块？

> ID：14107480
> 
> 赞同：5
> 
> 时间：2013-01-01T02:35:40.700
> 
> 标签：ios, objective-c, objective-c-blocks, grand-central-dispatch

看到以下 iOS 开发建议并不少见：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    // work in background
    NSLog(@"%s work", __PRETTY_FUNCTION__);
    dispatch_async(dispatch_get_main_queue(), ^{
        // update UI on main queue
        NSLog(@"%s updateUI", __PRETTY_FUNCTION__);
    });
}); 
```

这很好，但是当出现问题时很难调试。查看输出：

```
AppName[1051:4013] __47-[Classname methodName]_block_invoke_0 work
AppName[1051:907] __block_global_0 updateUI 
```

第一个日志行包含类和方法名称，因此我们有希望追踪外部块中的问题（希望我们没有在该方法中定义很多块），但第二个日志行（来自内部块） ? 祝你好运，特别是如果你在你的应用程序中经常使用这种模式。

有没有办法给块命名以帮助我们在控制台输出和崩溃日志中识别它们的源位置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T10:37:08.867

块一旦被复制，就会成为 NSBlock 的实例，这意味着我们可以使用运行时向它添加各种好东西。这是一个例子：

```
@protocol QuietTheCompiler<NSObject>
- (NSString*) prettyBlockDescription;
@end

static id beautifyBlockDescription(id block, NSString *name)
{
    static void *kAssocObjectPrettyBlockDescription = "A";
    Class blockClass = [block class];

    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{

        SEL    descrSel     = @selector(description);
        SEL    prettySel    = @selector(prettyBlockDescription);
        Method descrMethod  = class_getInstanceMethod(blockClass, descrSel);
        IMP    originalImpl = class_getMethodImplementation(blockClass, descrSel);

        IMP prettyImpl = imp_implementationWithBlock(^(id self_) {
            id value = objc_getAssociatedObject(self_, kAssocObjectPrettyBlockDescription);
            return (value != nil)? value : originalImpl(self_, descrSel);
        });

        if (class_addMethod(blockClass, prettySel, prettyImpl, method_getTypeEncoding(descrMethod))) {
            IMP newImpl = imp_implementationWithBlock(^(id self_) {
                return [self_ prettyBlockDescription];
            });
            class_replaceMethod(blockClass, descrSel, newImpl, method_getTypeEncoding(descrMethod));
        }
    });

    NSString *description = [NSString stringWithFormat:@"<%@: %p name=%@>",NSStringFromClass(blockClass),block,name];
    objc_setAssociatedObject(block, kAssocObjectPrettyBlockDescription, description, OBJC_ASSOCIATION_RETAIN);

    return block;
}

int main (int argc, const char * argv[])
{
    @autoreleasepool {

        int (^block1)(int,NSString*) = ^(int i, NSString *fmt) {
            return i;
        };

        id blockObject1 = beautifyBlockDescription([block1 copy], @"Hello");

        int (^block2)(int,NSString*) = ^(int i, NSString *fmt) {
            return i+1;
        };

        id blockObject2 = [block2 copy];

        NSLog(@"Block 1: %@", blockObject1);
        NSLog(@"Block 1: %@", blockObject2);
    }
    return 0;
} 
```

这是该程序的输出：

```
// Sample Output
2013-03-31 12:34:48.984 Dummy[1231:303] Block 1: <__NSGlobalBlock__: 0x1000059d0 name=Hello>
2013-03-31 12:34:48.987 Dummy[1231:303] Block 1: <__NSGlobalBlock__: 0x100005a10> 
```

我建议您将 beautifyBlockDescription 函数包装在一个宏中，以便对于发布代码它只返回块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T02:45:33.413

您可以做的一件事是使用函数而不是块，而`dispatch_async_f`不是`dispatch_async`. 但是，权衡很重要，因为您失去了块的内联代码性质，以及无需通过上下文指针对其进行编组即可捕获状态的能力。

您也可以在外部块之外声明内部块并将其存储在局部变量中。有点不简洁，但它会像外部块一样用封闭方法的名称标记它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T12:56:29.747

您可以尝试使用[https://github.com/conradev/BlockTypeDescription](https://github.com/conradev/BlockTypeDescription)来提高开发过程中日志的可读性。然而，这个库替换了私有 NSBlock 类上的一个方法，你不应该尝试在应用商店二进制文件中使用它，否则它可能会被拒绝。这意味着您无法改进从 Apple 获得的崩溃日志。

# python - Python 中的 XT 有什么作用？

> ID：14107481
> 
> 赞同：4
> 
> 时间：2013-01-01T02:35:55.747
> 
> 标签：python, python-3.x, methods

我对 Python 很陌生。我在 numpy 包中使用转置运算符：

```
>>> import numpy as np
>>> X = np.array([[1,2,3],[4,5,6]])
>>> np.T(X)
Traceback (most recent call last):
  File "<pyshell#8>", line 1, in <module>
    np.T(X)
AttributeError: 'module' object has no attribute 'T' 
```

为什么这是一个错误，但仍然`X.T`有效？此外，`X.np.T`失败。另一方面，`np.fft.fft(X)`成功，但`X.fft.fft`失败。

谢谢大家！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T02:44:40.513

该[`numpy.array`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.array.html)函数返回一个[`ndarray`](http://docs.scipy.org/doc/numpy/reference/arrays.ndarray.html#arrays-ndarray)对象，所以当你调用

```
X = np.array([[1,2,3],[4,5,6]]) 
```

该变量`X`被分配一个`ndarray`. 该对象有一个[`T`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.T.html#numpy.ndarray.T)转置数组的方法。

调用`T`如下：

```
np.T(X) 
```

不起作用，因为 numpy 库没有一个名为的自由浮动函数`T`，该函数将数组作为参数，只是`ndarray`类中的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-03-10T18:23:23.613

`X.T`表示 X 的转置。例如，假设这是我们的 X：

[![X](../Images/33c2cb3b448c273aa0cefb1f9c4452eb.png)](https://i.stack.imgur.com/Wbs7d.png)

XT 将是：

[![XT](../Images/c1b8ef9242630ef159bfdb05bf789ac4.png)](https://i.stack.imgur.com/UOjqI.png)

# java - Webservice : Wrapped vs Bare - 从 Java WebServices Up and Running

> ID：14107485
> 
> 赞同：3
> 
> 时间：2013-01-01T02:37:26.560
> 
> 标签：java, web-services

我是 webservice 的新手，正在阅读“Java WebServices Up and Running”一书。不知何故，我发现这对初学者来说有点混乱。在第 54 页，它做出了自相矛盾的陈述。

首先它说

> 在展开样式中，参数是裸露的；也就是说，作为 SOAP 主体中未包装的 XML 子元素的序列。在包装样式中，参数作为具有服务操作名称的 XML 元素的包装 XML 子元素出现

然后它说。

> 令人惊讶的是，底层 SOAP 消息的结构（请求和响应）保持不变。例如，来自简化客户端 AmazonClientU 的请求消息在结构上与来自复杂客户端 AmazonClientW 的请求消息相同。

我尝试编写一个示例程序，我清楚地看到了 Wrapped Style 和 Bare 样式的 SOAP 消息之间的区别。Bare 样式在 SOAP 主体中不包含操作名称。

有人请澄清。提前致谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-14T20:15:08.753

[Java Ranch 论坛上的这个讨论](http://www.coderanch.com/t/501314/Web-Services/java/Simple-Unwrapped-Wrapped-SOAP-messages)为我清除了它。**特别是Jason Irwin**制作的这个例子：

**BARE**客户端生成的接口（使用 wsimport）：

```
@SOAPBinding(parameterStyle = SOAPBinding.ParameterStyle.BARE)  
public interface IMathServer {  
    @WebMethod  
    @WebResult(name = "addNumsResponse")  
    public AddNumsResponse addNums(@WebParam(name = "addNums") AddNums parameters);  
} 
```

**WRAPPED**客户端生成的接口（使用 wsimport）：

```
@SOAPBinding(parameterStyle = SOAPBinding.ParameterStyle.WRAPPED)  
public interface IMathServer {  
    @WebMethod  
    @WebResult(name = "addNumsResponse")  
    public int addNums(@WebParam(name = "num1") int num1, @WebParam(name = "num2") int num2);  
} 
```

这两条代码生成相同的消息：

```
<S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">  
    <S:Body>  
        <ns2:addNums xmlns:ns2="http://SoapStyles/">  
            <num1>1</num1>  
            <num2>2</num2>  
        </ns2:addNums>  
    </S:Body>  
</S:Envelope> 
```

正如**R Srini**在同一讨论中所说，包装的是参数，而不是代码。

生成客户端的唯一区别是您将在客户端中创建参数的方式，但它们都将根据服务 WSDL 生成相同的消息（已包装或未包装）。

**使用 BARE，您将只有一个顶部元素（参数），其中包含“子参数”。这一个 BARE 将直接发送（不“包装”它）。在使用 WRAPPED 时，您将在第一级拥有所有这些“子参数”，并且客户端会自动将它们包装在另一个顶级元素中。**

引用杰森欧文的话：

> 只传递了一个参数（“addNums”），它在正文中是“Bare”。在第二种情况下，参数在代码中是“裸露的”，但在运行时由 JAX-WS “包装”。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T08:06:07.777

我对 Wrapped 和 Bare 样式的 Web 服务进行了更多测试，这就是我发现的。

在本书给出的示例中，两种情况下的 SOAP 消息都如下所示。

```
<soapenv:Body>
  <ns1:ItemSearch>
    <ns1:AWSAccessKeyId>...</ns1:AWSAccessKeyId>
    <ns1:Request>
      <ns1:Keywords>quantum gravity</ns1:Keywords>
      <ns1:SearchIndex>Books</ns1:SearchIndex>
    </ns1:Request>
  </ns1:ItemSearch>
</soapenv:Body> 
```

在 Wrapped 样式中，SOAP:BODY 后面的 XML 元素是操作名称

在 BARE 样式中，SOAP:BODY 后面的 XML 元素**不是**操作名称，而是请求参数名称。（恰好与操作名称相同。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T07:51:43.683

我将此解释为，虽然参数在 Wrapped 或 Bare 样式中的处理方式不同，但请求和响应的实际内容并没有什么不同。因此，无论服务器以 Wrapped 样式还是 Bare 样式处理 XML，从客户端传递到服务器的 XML 都是相同的。

# symfony - 在 symfony 2.1 中安装和运行 LiipImagineBundle

> ID：14107488
> 
> 赞同：4
> 
> 时间：2013-01-01T02:37:33.337
> 
> 标签：symfony, symfony-2.1, liipimaginebundle

以下是我遵循的步骤：

1.  在我的 composer.json 中添加了以下内容：

    ```
    "require": {
         "imagine/Imagine": ">=0.2.8",
         "liip/imagine-bundle": "*@dev",
         ....
         } 
    ```

2.  在命令行运行以下命令：

    ```
    composer update
    Installing imagine/imagine (v0.4.0)
    Installing liip/imagine-bundle (dev-master f7d5e4d) 
    ```

3.  作曲家更新供应商文件夹内的目录结构后，如下所示：

![在此处输入图像描述](../Images/b98259bd4876d9476c1b4a15fc753bf7.png)

4.  然后更新 vendor/composer/autoload_namespaces.php

    ```
     'Imagine'   => $vendorDir .'/imagine/Imagine/lib/',
     'Liip\\ImagineBundle'=>$vendorDir . '/liip/imagine-bundle/', 
    ```

5.  注册捆绑：

    ```
    new Liip\ImagineBundle\LiipImagineBundle(), 
    ```

6.  路由：

    ```
    # app/config/routing.yml
    _imagine:
    resource: .
    type:     imagine 
    ```

7.  配置.yml

    ```
     # app/config/config.yml
      liip_imagine:
      filter_sets:
         my_thumb:
            quality: 75
            filters:
               thumbnail: { size: [120, 90], mode: outbound } 
    ```

8.  添加到树枝模板文件：

    ```
    <img src="{{ asset('bundles/acmedemo/images/1.jpg') | imagine_filter('my_thumb') }}" /> 
    ```

9.  打开 localhost/symfony/web/app_dev.php/demo/hello/test

没有缩略图生成。查看源代码时，我发现了这一行：

```
 <img src="/symfony/web/app_dev.php/media/cache/my_thumb/symfony/web/bundles/acmedemo/images/1.jpg"> 
```

我错过了什么？有人可以帮我解决这个问题吗？我在 Windows XP 上使用默认设置的 xampp 1.8

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T03:17:51.850

当我更换

```
 <img src="{{ asset('bundles/acmedemo/images/1.jpg') | imagine_filter('my_thumb') }}" /> 
```

和

```
 <img src="{{ 'bundles/acmedemo/images/1.jpg' | imagine_filter('my_thumb') }}" /> 
```

我得到了缩略图。我删除了 twig 的asset() 助手，它工作了，但不知道它是如何工作的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T23:09:50.463

您可能会这样做：`<img src="{{ (asset('bundles/acmedemo/images/1.jpg')) | imagine_filter('my_thumb') }}" />`因为过滤器过滤了完整的图像路径，而不仅仅是asset() 包含的内容，这意味着您还可以包含“asset()”

谢谢

# objective-c - 如何获取最近打开的文件列表？

> ID：14107489
> 
> 赞同：5
> 
> 时间：2013-01-01T02:38:01.920
> 
> 标签：objective-c, macos, applescript, recent-file-list

我目前正在构建 AppleScript 应用程序。（请注意，这是一个普通的 AppleScript“应用程序”，通过使用 AppleScript 编辑器创建 AppleScript，然后将该脚本保存为应用程序）。对于这个应用程序，我需要知道当前用户最近打开的文件的文件路径。到目前为止，我已经尝试了许多不同的方法，但似乎都没有给我所需的信息。

我尝试了以下方法：

*   我试过这个`com.apple.recentitems.plist`文件，但是这个文件中包含的文件路径信息似乎是十六进制格式，当转换成 ASCII 时充满了很多 mumbo-jumbo，而且 mumbo-jumbo 的格式似乎因不同而改变文件和不同的计算机上。
*   我尝试使用 unix`find`命令过滤过去一天打开的文件，但是在这里我只能在最近修改和最近访问之间进行选择，而不是最近打开。最近修改的文件不包括未修改的打开文件（如打开但未编辑的图像），最近访问的文件似乎显示所有在 Finder 中以缩略图视图可见的文件，即使它们没有t 被用户打开。
*   我已经尝试过使用 Objective-C 和获取`LaunchServices/LSSharedFileList.h`文件`kLSSharedFileListRecentDocumentItems`（类似于[这个答案](https://stackoverflow.com/questions/5205080/recently-opened-apps)），但是我以前从未使用过 Objective-C，所以我无法让任何东西正常工作。

任何人都可以提供任何帮助来帮助我获取当前用户最近打开的文件的列表，我们将不胜感激。此外，能够将最近更改的文件列表写入文本文件的任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T03:02:42.810

## 苹果脚本

该 afaik 没有 AppleScript API（相当于 LSSharedFileList）.. 要么你调用 objC 代码（参见下面的 objC 代码段），要么.. 你只是阅读了 plist，这有点骇人听闻的 IMO :)

## 目标-c

对于非沙盒应用程序，您使用`LSSharedFileList`API——这是最合适的方式。

```
@implementation DDAppDelegate

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    LSSharedFileListRef list = LSSharedFileListCreate(NULL, kLSSharedFileListRecentDocumentItems, 0);
    CFArrayRef items = LSSharedFileListCopySnapshot(list, NULL);

    for(int i=0; i<CFArrayGetCount(items); i++) {
        LSSharedFileListItemRef item = (LSSharedFileListItemRef)CFArrayGetValueAtIndex(items, i);

        //get items properties... for demo I just get name
        NSString *name = (__bridge_transfer NSString*)LSSharedFileListItemCopyDisplayName(item);

        NSLog(@"%@", name);
    }
}

@end 
```

* * *

**但它在沙盒中不起作用**- 并且**没有真正的解决方法**（正如你所说，你可以直接阅读 plist 但是......这有点骇人听闻：D PLUS苹果可能不会让你这样做！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T01:55:03.043

您的解决方案可能有效，但也许我想出的可能更可行。

在您提出的 3 个建议选项中，这些`LSSharedFile*`命令确实是最好的解决方案。

随着 AppleScript 脚本包 (.scptd) 和可以保存为应用程序包 (.app) 的脚本的出现，您可以很容易地在包中包含自定义可执行文件。因此，如果您无法单独使用 AppleScript 或默认的 BSD 子系统工具来完成它，您可以利用这些可执行文件来完成您需要做的事情。

因此，在 Xcode 中，我创建了一个新的“基础工具”项目，该项目使用以下代码：

```
int main(int argc, const char * argv[]) {
    @autoreleasepool {
        UInt32 resolveFlags = 0;
        NSArray *arguments = [[NSProcessInfo processInfo] arguments];
        if (arguments.count > 1) {
            NSArray *revisedArguments = [arguments
                        subarrayWithRange:NSMakeRange(1, arguments.count - 1)];
            for (NSString *arg in revisedArguments) {
                if ([arg isEqualToString:@"--noUserInteraction"]) {
                    resolveFlags |= kLSSharedFileListNoUserInteraction;
                } else if ([arg isEqualToString:@"--doNotMountVolumes"]) {
                    resolveFlags |= kLSSharedFileListDoNotMountVolumes;
                }
            }
        }
        LSSharedFileListRef sharedFileListRef = LSSharedFileListCreate(NULL,
                              kLSSharedFileListRecentDocumentItems, NULL);
        NSArray *sharedFileListItemRefs =
           (NSArray *)LSSharedFileListCopySnapshot(sharedFileListRef, NULL);
        for (id itemRef in sharedFileListItemRefs) {
            NSURL *resolvedURL = nil;
            LSSharedFileListItemResolve((LSSharedFileListItemRef)itemRef,
                 resolveFlags, (CFURLRef *)&resolvedURL, NULL);
            if (resolvedURL) {
                printf("%s\n", resolvedURL.path.fileSystemRepresentation);
                [resolvedURL release];
            }
        }
        if (sharedFileListRef) CFRelease(sharedFileListRef);
        [sharedFileListItemRefs release];
        return EXIT_SUCCESS;
    }
} 
```

虽然此代码与您的代码相似，但不必将结果写入中间文件，它只是将文件路径打印到标准输出。这应该可以大大简化 AppleScript 端的编码。构建这个 Xcode 项目的结果是一个单独的“Unix 可执行文件” `recentItemsFinagler`，而不是一个应用程序包。

要在 AppleScript 中使用此构建的可执行文件，您首先需要确保将脚本保存为脚本包或应用程序，然后`Bundle Contents`应启用工具栏项，如下图所示：

![在此处输入图像描述](../Images/9506a92122b6b59d2b55932ce8743439.png)

单击该工具栏项会显示抽屉，其中显示脚本包或应用程序包的内容。要添加您的自定义可执行文件，只需将其从 Finder 拖放，如下图所示：

![在此处输入图像描述](../Images/be91f65fd21e99ecc12fa32a20370db2.png)

这会将其复制到脚本包中，如下所示：

![在此处输入图像描述](../Images/3889d5f30aa2a43bff07f45a9bf6468c.png)

要在运行时定位此可执行文件，您可以使用`path to resource`AppleScript 命令，它是`StandardAdditions.osax`. （请注意，根据您尝试在脚本中使用该`path to resource`命令的方式，当您从 AppleScript 编辑器中运行脚本而不是通过在 Finder 中双击它来运行它时，您可能会遇到“找不到资源”错误. 如果您遇到此类错误，首先确保您已保存对脚本的所有更改，然后退出 AppleScript Editor，然后在脚本后在 Finder 中双击它来启动脚本应用程序完成运行，重新打开 AppleScript 编辑器，然后重新打开脚本应用程序，然后尝试从 AppleScript 编辑器中运行，看看它是否有效）。

因此，要`recentItemsFinagler`在 AppleScript 中使用它，您可以执行以下操作：

```
property recentItemsFinagler : missing value

if (recentItemsFinagler = missing value) then
    set recentItemsFinagler to (path to resource "recentItemsFinagler")
end if

set toolPath to quoted form of POSIX path of recentItemsFinagler

set recentItemsString to (do shell script toolPath & " --noUserInteraction --doNotMountVolumes")

set recentItemsPaths to paragraphs of recentItemsString 
```

我将逐行浏览这个 AppleScript 来解释它在做什么。我们首先创建一个全局属性`recentItemsFinagler`，并将其初始值设置为`missing value`。（`missing value`AppleScript 相当于 Objective-C 的`nil`）。

如果您不知道，AppleScript 中的全局属性就像其他语言中的全局变量一样，还有一个重要的补充：当您运行脚本并为属性赋值时，该值实际上保存在脚本文件本身中，并将持续到您下次运行脚本时。

该脚本首先检查是否`recentItemsFinagler`等于`missing value`，如果是，则将其设置为 的结果`(path to resource "recentItemsFinagler")`，这是一个 AppleScript`alias`引用。这类似于 Finder 中的别名，因为它能够成功跟踪重命名等更改，以及从一个文件夹移动到另一个文件夹。如果我将它存储为一个简单的字符串，然后将此 AppleScript 应用程序包从我的 Documents 文件夹移动到我的桌面，则路径将不再有效，并且每次运行脚本时都必须更新该属性。

无论如何，我们然后设置`recentItemsString`为 AppleScript`do shell script` `recentItemsFinagler`工具的结果，它是一个字符串。要将其转换为代表路径的字符串的 AppleScript 列表，请使用该`paragraphs of`命令。

因此，通过将可执行文件包含在脚本或 AppleScript 应用程序的包中，您可以在不到 10 行代码中获得所需的结果。

示例项目：[RecentItemsFiagler.zip](http://www.markdouma.com/developer/RecentItemsFinagler.zip)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T09:08:00.167

我知道回答我自己的问题有点讽刺，但感谢 Daij-Djan 和大量谷歌搜索，我找到了答案。毫无疑问，这不是最干净的方法，但它可以满足我的需要。我希望这可以帮助将来的人！

```
#import "AppDelegate.h"

@implementation AppDelegate

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    LSSharedFileListRef list = LSSharedFileListCreate(NULL, kLSSharedFileListRecentDocumentItems, 0);
    CFArrayRef items = LSSharedFileListCopySnapshot(list, NULL);

    NSArray *paths = NSSearchPathForDirectoriesInDomains
    (NSLibraryDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];

    NSString *fileName = [NSString stringWithFormat:@"%@/Application Support/MyAppName/RecentFiles.txt",documentsDirectory];

    NSString *content = @"";
    [content writeToFile:fileName
              atomically:NO
                encoding:NSStringEncodingConversionAllowLossy
                   error:nil];

    for(int i=0; i<CFArrayGetCount(items); i++) {
        LSSharedFileListItemRef item = (LSSharedFileListItemRef)CFArrayGetValueAtIndex(items, i);

        CFURLRef itemURL = NULL;
        LSSharedFileListItemResolve(item, kLSSharedFileListNoUserInteraction | kLSSharedFileListDoNotMountVolumes, &itemURL, NULL);

       if (itemURL != (NULL)) {

        NSString *str = [NSString stringWithFormat:@"%@\n", itemURL]; //get text from textField

            NSFileHandle *fileHandle = [NSFileHandle fileHandleForWritingAtPath:fileName];

            // move to the end of the file
            [fileHandle seekToEndOfFile];

            // convert the string to an NSData object
            NSData *textData = [str dataUsingEncoding:NSUTF8StringEncoding];

            // write the data to the end of the file
            [fileHandle writeData:textData];

            // clean up
            [fileHandle closeFile];

             }

    }
    exit(0);
}

@end 
```

# symfony - 在 FacebookBundle 中获取个人资料的图片

> ID：14107490
> 
> 赞同：-1
> 
> 时间：2013-01-01T02:38:17.017
> 
> 标签：symfony, symfony-2.1, fosfacebookbundle

有人知道如何从 Json 数据中获取个人资料图片，我获得了所有信息（用户名、名字、FacebookId），但我无法获得个人资料图片的链接：

```
namespace djepo\UserBundle\Security\User\Provider;

use Symfony\Component\Security\Core\Exception\UsernameNotFoundException;
use Symfony\Component\Security\Core\Exception\UnsupportedUserException;
use Symfony\Component\Security\Core\User\UserProviderInterface;
use Symfony\Component\Security\Core\User\UserInterface;
use \BaseFacebook;
use \FacebookApiException;

class FacebookProvider implements UserProviderInterface
{
/**
 * @var \Facebook
 */
protected $facebook;
protected $userManager;
protected $validator;
....
....
public function loadUserByUsername($username)
{           
    $user = $this->findUserByFbId($username);

    try {
        $fbdata = $this->facebook->api('/me');// Here I Get all information without pic
    } catch (FacebookApiException $e) {
        $fbdata = null;
    }

    if (!empty($fbdata)) {     
        var_dump($fbdata);// here I see object with result of data
        exit();
        $user_by_mail=$this->userManager->findUserBy(array('email'=>$fbdata['email']));

      .....
       .... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T14:52:10.430

如果你有他们的用户名，你需要做的就是卷曲以下内容：

[http://graph.facebook.com/username/picture](http://graph.facebook.com/username/picture)

您可能需要在 curlopt 设置中允许重定向。

# xml - 没有 xsl 输出的 xml 逻辑

> ID：14107501
> 
> 赞同：1
> 
> 时间：2013-01-01T02:42:14.303
> 
> 标签：xml, shell, xpath, logic

我正在寻找一种简单的方法（实用程序、函数、工具）来对 xml 格式的数据运行布尔逻辑，并且很可能通过 shell 脚本。这与翻译 xml 或创建其他文档无关，而是允许基本操作 <、>、=、!= 的简单逻辑决策

假设给定一个xml文件，`2012_04_21.xml`其中包含（除其他外）xml键和值 `<data>...<price>6.50</price>...</data>`

我理想的工具是：

```
cooltool --input 2012-04-21.xml --eval "price <= 6.50" 
```

根据给定的逻辑返回真、假、无或其他东西

**grep**适用于 'has' 或 '==' 类型的操作。`grep '<key>value</key>' 2012_04_21.xml`不提供任何内容或可以布尔化的匹配字符串。

但是，grep 无法满足以下原因：1\. 不可能`price > 5.00` 2\. 无法处理像这样的层次结构`data/price > 5.00`

XPATH 逻辑是完全足够的，但我正在努力想出一种在这种情况下利用它的方法。

```
xsltproc mylogic.xsl 2012-04-21.xml 
```

嗯，也许是一个组合`xsltproc mylogic.xsl 2012-04-21.xml | grep true`

我试一试。

欢迎任何其他想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T09:44:45.773

这听起来像是你可以用一个简单的 XPath 查询来做的事情；不太确定你的源文件有多复杂，但这听起来像你可以做的事情`xmllint`

`xmllint --xpath "boolean(//price[text()<=6.50])" xmlfile.xml`

您可以编写自己的实用程序脚本...注意我的 XPath 查询假设

1.  您的 XML 文件没有固定的结构
2.  您的 XML 文件可以有可重复的`<price>`标签

.

```
#!/bin/bash

xmllint --xpath "boolean(//price[text()<=$2])" $1 
```

`./ingest.sh xmlfile.xml 6.50`

如果您想使用 grep，可能需要查看现有问题 [1,2,3]。

[1][如何使用 grep 在 xml 标签中查找信息？](https://stackoverflow.com/q/10781717/664424)
[2][如何在 Bash 中解析 XML？](https://stackoverflow.com/q/893585/664424)
[3][如何 (e) grep XML 获取某些标签内容？](https://stackoverflow.com/q/10714716/664424)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T12:42:08.033

鉴于以下数据

```
$ cat data.xml
<data>
    <price>10.50</price>
    <price>5.50</price>
</data> 
```

## 选项 1：一个线性 xpath 检查

以下 xmllint 程序会找到有问题的 XML 标记：

```
$ echo "cat //price[text()<=6.50]" | xmllint --shell data.xml | grep "<price>" && echo "found"
<price>5.50</price>
found 
```

“grep”命令的退出代码可以在 shell 脚本中用于测试 XML 是否被验证。

## 选项 2：生成 XML 模式

以下 shell 脚本生成一个 XML 模式，用于检查整个文档并包括对价格标签值的范围限制：

```
#!/bin/bash

LIMIT=$1

cat << EOF > data.xsd
<xsd:schema version="1.0" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <xsd:element name="data">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:element maxOccurs="unbounded" name="price">
            <xsd:simpleType>
                <xsd:restriction base="xsd:decimal">
                    <xsd:maxInclusive value="$LIMIT"/>
                </xsd:restriction>
            </xsd:simpleType>
        </xsd:element>
      </xsd:sequence>
    </xsd:complexType>
  </xsd:element>
</xsd:schema>
EOF

xmllint --schema data.xsd data.xml 
```

运行如下：

```
$ ./validate.sh 6.5
<?xml version="1.0"?>
<data>
    <price>10.50</price>
    <price>5.50</price>
</data>
data.xml:2: element price: Schemas validity error : Element 'price': [facet 'maxInclusive'] The value '10.50' is greater than the maximum value allowed ('6.5').
data.xml:2: element price: Schemas validity error : Element 'price': '10.50' is not a valid value of the local atomic type.
data.xml fails to validate 
```

# dynamic - 用 sulley 对动态分配的端口进行模糊测试

> ID：14107509
> 
> 赞同：0
> 
> 时间：2013-01-01T02:44:08.500
> 
> 标签：dynamic, port, fuzzing

我想用 sulley 模糊一个网络协议。问题是我需要模糊测试的端口是由服务器动态选择的。我使用 pre_send 函数联系服务器并接收动态端口。我使用 re 从响应中解析出端口号。但是现在我无法将此端口设置为模糊数据的目标端口，因为目标端口分配......

```
target = sessions.target("10.10.10.10", 10000) 
```

...已经发生在 pre_send 函数之前。此外，每个测试用例的端口可能不同，因此这更加复杂。

我考虑过编写一个独立的 python 脚本而不是 pre_send 函数，然后在 sulley-session-file 中更改目标端口，然后再启动它。但是然后我将不得不在每个案例之后终止会话，而且它会非常难看。

有没有人遇到过这样的事情？有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T20:06:29.247

Hrm，这是一个我以前没有遇到过的奇怪问题。

就这样做而言，如果您选择追求那种特定的方式，您可能需要自己滚动。我不认为 Sulley 能够以目前的形式做到这一点，但我会牢记这一点，并为下一个版本打开功能请求。

我将在未来的某个时间完整地重写 Sulley，有太多像这样的愚蠢的事情应该是可行的。

你到底在模糊什么？有没有办法强制它使用单个端口？

或者，您可以挂钩 connect() 函数以获取另一个参数并强制它使用您想要的端口。

# ios - 在 iOS 上存储对象 - 最佳解决方案？

> ID：14107516
> 
> 赞同：3
> 
> 时间：2013-01-01T02:46:44.770
> 
> 标签：ios, uitableview, core-data, nsuserdefaults

我正在为一个博客构建一个应用程序，用户可以在其中保存他们最喜欢的帖子。

当他们这样做时，我想存储我的对象，其中包含：帖子的 URL、标题和图像 URL。

我应该去`UserDefaults`（以前`NSUserDefaults`）还是立即开始`Core Data`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T02:53:55.250

> 我应该选择 User Defaults 还是立即开始使用 Core Data？

这里有更多的可能性：你也可以使用普通文件或 plist，或者在没有 Core Data 的情况下使用 sqlite。答案取决于您计划存储的项目数量：

*   如果您计划存储 1 到 20 个项目，用户默认设置可以正常工作
*   如果您计划存储 20 到 200 个项目，则可以使用纯文件或 plist
*   如果您计划存储 200 多个项目，请选择 Core Data 或 sqlite，具体取决于您对其中一种技术的舒适程度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T03:03:12.173

由于文章的收藏夹通常不会是 100K 项目，因此我将`NSDictionary`用于项目并将它们存储到 a 中`NSMutableArray`，然后将它们保存到文件中。它使用简单，您还可以将收藏夹导出到文件甚至`iCloud`在设备之间共享。

```
NSMutableDictionary *item = [[ NSMutableDictionary alloc]init];
[item setObject:@"www.google.com" forKey:@"url"];
[item setObject:@"Google" forKey:@"title"];

//Add each item to the Favourites array
//You should declare this outside of the "addToFavourites" function.
NSMutableArray *Favourites = [[NSMutableArray alloc]initWithObjects: nil];
[Favourites addObject:item];

//Save the Favourites NSMutableArray to the file.
if([Favourites writeToFile:path atomically:NO]) 
   NSLog(@"Favourites are saved!"); 
```

# javascript - 将 Nodejs 模块加载到 Web Worker

> ID：14107521
> 
> 赞同：6
> 
> 时间：2013-01-01T02:49:09.660
> 
> 标签：javascript, node.js, concurrency, requirejs, web-worker

我打算在我的 Node.js 应用程序中使用 web worker 来执行一些并发任务。然而，由于该`'webworker-threads'`模块遵循 HTML5 web worker 的实现，因此需要像`require("fs")`inside web worker 这样的 Nodejs 模块是行不通的。`importScripts()`可以加载 js 文件，但我想在 web worker 中有一个功能，以便我可以`require`安装 npm 模块。有解决方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-24T09:33:57.967

webworker-threads 的作者在这里。感谢您使用该模块！

有一个默认`native_fs_`对象，`readFileSync`您可以使用它来读取文件。

除此之外，我主要依靠 onejs 将所有需要的模块编译`package.json`到一个 JS 文件中`importScripts`以供使用，就像在部署到客户端 Web Worker 环境时所做的那样。（onejs还有很多替代品——browserify等）

希望这可以帮助！

# javascript - 在 javascript 中生成 SEO 友好的 URL

> ID：14107522
> 
> 赞同：9
> 
> 时间：2013-01-01T02:49:34.400
> 
> 标签：javascript, regex

我有一个将 URL 转换为 SEO 友好 URL 的 PHP 函数：

```
function seo_url($input){
     $input = str_replace(array("'", "-"), "", $input); //remove single quote and dash
     $input = mb_convert_case($input, MB_CASE_LOWER, "UTF-8"); //convert to lowercase
     $input = preg_replace("#[^a-zA-Z0-9]+#", "-", $input); //replace everything non an with dashes
     $input = preg_replace("#(-){2,}#", "$1", $input); //replace multiple dashes with one
     $input = trim($input, "-"); //trim dashes from beginning and end of string if any
     return $input;
} 
```

我知道 SEO 对 javascript 中的 URL 执行此操作毫无意义，但为了保持一致性，我希望 URL 在我的应用程序中显示相同。有没有人在javascript中有方便的功能？`:]`

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2017-12-28T01:04:12.000

将不同的解决方案组合在一起，请考虑这个替代代码，单行代码：

```
function toSeoUrl(url) {
    return url.toString()               // Convert to string
        .normalize('NFD')               // Change diacritics
        .replace(/[\u0300-\u036f]/g,'') // Remove illegal characters
        .replace(/\s+/g,'-')            // Change whitespace to dashes
        .toLowerCase()                  // Change to lowercase
        .replace(/&/g,'-and-')          // Replace ampersand
        .replace(/[^a-z0-9\-]/g,'')     // Remove anything that is not a letter, number or dash
        .replace(/-+/g,'-')             // Remove duplicate dashes
        .replace(/^-*/,'')              // Remove starting dashes
        .replace(/-*$/,'');             // Remove trailing dashes
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-11-28T13:58:59.743

看看这个 Javascript 模块（我是作者），它在浏览器和服务器/nodejs 中工作：
[SpeakingURL](https://github.com/pid/speakingurl)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-04-15T16:12:55.110

```
var url ="Evanston, IN 47531, USA pizza food & wine & music";

document.write(ToSeoUrl(url));

function ToSeoUrl(url) {

  // make the url lowercase         
  var encodedUrl = url.toString().toLowerCase(); 

  // replace & with and           
  encodedUrl = encodedUrl.split(/\&+/).join("-and-")

  // remove invalid characters 
  encodedUrl = encodedUrl.split(/[^a-z0-9]/).join("-");       

  // remove duplicates 
  encodedUrl = encodedUrl.split(/-+/).join("-");

  // trim leading & trailing characters 
  encodedUrl = encodedUrl.trim('-'); 

  return encodedUrl; 
}
```

# php - 如何使用 PHP cURL 登录 mediawiki？

> ID：14107523
> 
> 赞同：3
> 
> 时间：2013-01-01T02:49:41.270
> 
> 标签：php, cookies, curl, mediawiki-api

我正在尝试将 mediawiki 集成到我的网站中，但遇到了麻烦。我认为问题与 cookie 有关，因为我从 mediawiki API 获得了成功。

这是我的代码：

```
function mw_session_manager($Action = "")
{
    $Root = $_SERVER['SERVER_ADDR'];
    $API_Location = "${Root}/w/api.php";
    $expire = 60*60*24*14 + time();
    $CookieFilePath = tempnam("/tmp/thedirectory", "CURLCOOKIE");
    $CookiePrefix = 'theprefix';
            $Domain = 'thedomain';

    if($Action == 'login')
    {
        // Retrieves email address and password from sign-in form
        $Email = $_POST['LogInEmail'];
        $LgPassword = $_POST['LogInPassword'];
        // Query to retrieve username from database based on email. It is implied that authentication has already succeeded.
        $Query = "SELECT Username FROM Accounts WHERE Email = '$Email'";
        $ResultSet = mysql_query($Query);
        $ResultArray = mysql_fetch_array($ResultSet);
        $LgName = $ResultArray[0]; // Username

        // set variables to use in curl_setopts
        $PostFields = "action=login&lgname=$LgName&lgpassword=$LgPassword&format=php";
        // first http post to sign in to MediaWiki
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_URL, "$API_Location");
        curl_setopt($ch, CURLOPT_POSTFIELDS, "$PostFields");
        curl_setopt($ch, CURLOPT_POST, 1);
        curl_setopt($ch, CURLOPT_COOKIEJAR, $CookieFilePath);
        curl_setopt($ch, CURLOPT_COOKIEFILE, $CookieFilePath);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
        $ResultSerialized = curl_exec($ch);
        curl_close($ch); // curl closed
        $ResultUnserialized = unserialize($ResultSerialized);
        $Token = $ResultUnserialized[login][token];
        // cookie must be set using session id from first response
        $WikiSessionID = $ResultUnserialized[login][sessionid];
        setcookie("${CookiePrefix}_session", $WikiSessionID, $expire, '/', $Domain);

        // second http post to finish sign in
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_URL, "$API_Location");
        curl_setopt($ch, CURLOPT_POSTFIELDS, "action=login&lgname=${LgName}&lgpassword=${LgPassword}&lgtoken=${Token}&format=php");
        curl_setopt($ch, CURLOPT_POST, 1);
        curl_setopt($ch, CURLOPT_COOKIEJAR, $CookieFilePath);
        curl_setopt($ch, CURLOPT_COOKIEFILE, $CookieFilePath);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

        $ResultSerialized = curl_exec($ch);
        curl_close($ch); // curl closed
        $ResultUnserialized = unserialize($ResultSerialized);

        // set persistent cookies
        $LgToken = $ResultUnserialized["login"]["lgtoken"];
        $LgUserID = $ResultUnserialized["login"]["lguserid"];
        $LgUserName = $ResultUnserialized["login"]["lgusername"];

        setcookie("${CookiePrefix}UserName", $LgUserName, $expire, '/', $Domain);
        setcookie("${CookiePrefix}UserID", $LgUserID, $expire, '/', $Domain);
        setcookie("${CookiePrefix}Token", $LgToken, $expire, '/', $Domain);

        // Delete cURL cookie
        unlink($CookieFilePath);

        return $somedebuggingvariable;
    }
    if($Action = "logout")
    {
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_URL, "$API_Location");
        curl_setopt($ch, CURLOPT_POSTFIELDS, "action=logout");
        curl_setopt($ch, CURLOPT_POST, 1);
        curl_setopt($ch, CURLOPT_COOKIEJAR, $CookieFilePath);
        curl_setopt($ch, CURLOPT_COOKIEFILE, $CookieFilePath);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
        $ResultSerialized = curl_exec($ch);
        $LogoutReturn = unserialize($ResultSerialized);
        $_SESSION['APIReturn'] = $LogoutReturn;
        curl_close($ch); // curl closed

        // destroys persistent cookies and ends session
        $expire = time() - 60*60*24*90;
        setcookie('Session', '', $expire, '/', $Domain);
        setcookie("${CookiePrefix}_session", '', $expire, '/', $Domain);
        setcookie("${CookiePrefix}UserName", '', $expire, '/', $Domain);
        setcookie("${CookiePrefix}UserID", '', $expire, '/', $Domain);
        setcookie("${CookiePrefix}Token", '', $expire, '/', $Domain);

        // delete cURL cookie
        unlink($CookieFilePath);
    }
} 
```

我还注意到，如果我提供了错误的令牌，API 仍然会返回成功，所以我也不能排除这种情况。

编辑：我现在已经让它完美地工作并将代码更新为当前的工作代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T21:04:13.540

看起来您正在尝试通过在您的网站上使用 PHP 脚本使用 API 将用户登录到 MediaWiki 来为您的网站和 MediaWiki 实现单点登录机制。

问题是，虽然您的脚本确实使用用户的凭据成功登录到 MediaWiki，但它并没有将 MediaWiki 身份验证 cookie 传递回用户。

有几种方法可以解决这个问题：

*   也许最简单的解决方案是使用 JavaScript / AJAX 完全在客户端处理 MediaWiki 登录过程。这样，cookie 将直接发送到用户的浏览器。当然，不利的一面是这对不能或不想运行 JavaScript 的用户不起作用（但您总是可以让他们以通常的方式登录 MediaWiki）。

*   您也可以只在服务器端执行登录过程的第一步（检索令牌），然后让客户端直接请求第二步 URL，例如将其用作`iframe`返回的 HTML 页面上不可见的源。这不需要 JavaScript，但确实涉及在服务器和客户端之间来回发送用户的密码和登录令牌，这*可能会*引发安全问题。至少，您应该确保[禁用](https://stackoverflow.com/questions/404617/disabling-the-browser-cache-in-php-or-using-javascript)包含 的页面的缓存，`iframe`以便密码不会保存在浏览器缓存中。

*   由于您的网站和 MediaWiki 安装可能位于同一个域中，因此您也可以只使用当前代码，然后[手动设置必要的 cookie](http://www.mediawiki.org/wiki/API:Login#Construct_cookies)，如下所示：

    ```
    setcookie( $cookieprefix . '_session', $sessionid );
    setcookie( $cookieprefix . 'UserName', $lgusername );
    setcookie( $cookieprefix . 'UserID',   $lguserid );
    setcookie( $cookieprefix . 'Token',    $lgtoken ); 
    ```

*   最后，您还可以扭转问题，编写一个[MediaWiki 身份验证插件](http://www.mediawiki.org/wiki/AuthPlugin)，将 MediaWiki 的用户身份验证委托给您网站的用户身份验证系统。这样做的好处是允许您将两个系统完全绑定在一起，以便它们使用相同的用户数据库和相同的身份验证 cookie。（MediaWiki 仍然坚持创建自己的用户记录来存储自己的元数据，但是编写一个 AuthPlugin 可以让您[完全覆盖](http://svn.wikimedia.org/doc/classAuthPlugin.html#ae5acff0bc775ddc45a2f6676d47d783c)系统的身份验证部分，如果您愿意。）

# ruby-on-rails - 在 Rails 3.2.8 中更改 PostgreSQL 数据库中整个列的数据类型

> ID：14107530
> 
> 赞同：1
> 
> 时间：2013-01-01T02:51:54.280
> 
> 标签：ruby-on-rails, ruby, postgresql, activerecord, attributes

我的 Rails 3.2.8 应用程序有一个数据库表作为 PostgreSQL 数据库。在这个数据库中，我有一列类型`boolean`。该列已填充​​值。我想将值从更改`boolean`为所有字符串。

我发现我可以运行迁移来更改列的类型。但是，我还不想这样做，因为我不确定运行此类迁移时值会发生什么。那么该`boolean`值是否`false`会更改为“False”并将布尔值更改为`true`“True”？

如果不是，那么完成这项任务的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T03:03:13.577

你可能会得到`'true'`和`'false'`：

```
psql> create table t (c boolean not null);
psql> insert into t (c) values (TRUE), (FALSE);
psql> alter table t alter column c type text;
psql> select * from t;
   c   
-------
 true
 false 
```

我不确定这是否得到保证，并且我找不到关于布尔文本转换功能的权威参考，因此您可能想检查这些在您的 PostgreSQL 版本中必须说的内容：

```
psql> select TRUE::text;
psql> select FALSE::text; 
```

如果你想保证`'True'`然后`'False'`你可以使用[USING](http://www.postgresql.org/docs/current/static/sql-altertable.html)手动指定转换：

> 可选`USING`子句指定如何从旧列值计算新列值；如果省略，则默认转换与从旧数据类型到新数据类型的赋值转换相同。

所以你可以这样说来强迫这个问题：

```
alter table t
alter column c type text
using case c when TRUE then 'True' when FALSE then 'False' else NULL end 
```

如果您让 Rails 使用标准迁移进行转换，那么您将获得默认的布尔到文本转换，如果您使用 SQL ALTER TABLE 手动更改类型，那么您可以控制发生的情况。您可以在迁移中执行任一操作：

```
def up
    change_column :t, :c, :text
end 
```

相对

```
def up
    connection.execute(%q{
        alter table ...
    })
end 
```

顺便说一句，我不得不质疑为文本列放弃布尔列的逻辑，这对我来说似乎有点倒退。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T03:04:16.507

你应该没问题：

```
change_column :table_name, :column_name, :string 
```

我刚刚在 9.1 上尝试过。只需备份它`pg_dump test_db > test.sql`

您可以在测试表上模拟 sql 以查看您的 Postgresql 版本将如何反应，rails 应该生成类似

```
ALTER TABLE my_table ALTER COLUMN col TYPE varchar(128); 
```

# javascript - 在AngularJS中保留路由更改的滚动位置？

> ID：14107531
> 
> 赞同：48
> 
> 时间：2013-01-01T02:52:02.827
> 
> 标签：javascript, angularjs

示例应用程序： http: [//angular.github.com/angular-phonecat/step-11/app/#/phones](http://angular.github.com/angular-phonecat/step-11/app/#/phones)

如果您选择最后一部手机“摩托罗拉魅力”，它将向您显示手机的详细信息。当您在浏览器上导航时，它会重新加载数据并且滚动位于顶部。

导航返回时自动滚动到左侧的最佳方法是什么？而且，为什么 Angular 会重新加载数据？

我的计算机上有相同的“angular-phonecat”示例，并且我添加了一个无限滚动，它会在您滚动时加载更多数据。所以我真的不希望用户再次重新加载 50 多个项目或向下滚动 30 秒。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-24T17:29:17.643

我在这里有一个小提琴，它显示了如何在详细视图之后恢复列表视图中的滚动位置；尚未封装在指令中，正在处理...

[http://jsfiddle.net/BkXyQ/6/](http://jsfiddle.net/BkXyQ/6/)

```
$scope.scrollPos = {}; // scroll position of each view

$(window).on('scroll', function() {
    if ($scope.okSaveScroll) { // false between $routeChangeStart and $routeChangeSuccess
        $scope.scrollPos[$location.path()] = $(window).scrollTop();
        //console.log($scope.scrollPos);
    }
});

$scope.scrollClear = function(path) {
    $scope.scrollPos[path] = 0;
}

$scope.$on('$routeChangeStart', function() {
    $scope.okSaveScroll = false;
});

$scope.$on('$routeChangeSuccess', function() {
    $timeout(function() { // wait for DOM, then restore scroll position
        $(window).scrollTop($scope.scrollPos[$location.path()] ? $scope.scrollPos[$location.path()] : 0);
        $scope.okSaveScroll = true;
    }, 0);
}); 
```

小提琴还显示了在“ListCtrl”之外获取列表一次。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-08-01T05:37:21.560

下面是 keep-scroll-pos 指令的另一个版本。这个版本

*   记住$routeProvider 定义的每个*templateUrl的滚动位置。*

*   尊重哈希标签，例如 #/home# *section-2*，将滚动到*#section-2*而不是之前的滚动位置。

*   易于使用，因为它是独立的，并在内部存储滚动位置。

html使用示例：

```
<div ng-view keep-scroll-pos></div> 
```

keepScrollPos 指令的代码如下：

```
“使用严格”；

angular.module("myApp.directives", [])

.directive("keepScrollPos", function($route, $window, $timeout, $location, $anchorScroll) {

    // 缓存每条路由的templateUrl的滚动位置
    var scrollPosCache = {};

    // 编译函数
    返回函数（范围，元素，属性）{

        scope.$on('$routeChangeStart', function() {
            // 存储当前视图的滚动位置
            如果（$route.current）{
                scrollPosCache[$route.current.loadedTemplateUrl] = [ $window.pageXOffset, $window.pageYOffset ];
            }
        });

        scope.$on('$routeChangeSuccess', function() {
            // 如果明确指定了哈希值，它会优先于之前存储的滚动位置
            if ($location.hash()) {
                $anchorScroll();

            // 否则获取上一个滚动位置；如果没有，滚动到页面顶部
            } 别的 {
                var prevScrollPos = scrollPosCache[$route.current.loadedTemplateUrl] || [0, 0];
                $超时（函数（）{
                    $window.scrollTo(prevScrollPos[0], prevScrollPos[1]);
                }, 0);
            }
        });
    }
});

```

要忽略先前存储的滚动位置，并强制滚动到顶部，请使用伪哈希标签：*#top*，例如 href=" *#/home#top* "。

或者，如果您更喜欢始终滚动到顶部，请使用内置的 ng-view*自动滚动*选项：

```
<div ng-view autoscroll></div> 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-10-07T20:40:20.957

我使用@Joseph Oster 的解决方案来创建指令。我还冒昧地更新了使用的答案：

*   $locationChangeStart
*   $locationChangeSuccess

因为其他事件已过时。

小提琴在这里：http: [//jsfiddle.net/empie/p5pn3rvL/](http://jsfiddle.net/empie/p5pn3rvL/)

指令来源：

```
angular.module('myapp', ['ngRoute'])
    .directive('autoScroll', function ($document, $timeout, $location) {
    return {
        restrict: 'A',
        link: function (scope, element, attrs) {
            scope.okSaveScroll = true;

            scope.scrollPos = {};

            $document.bind('scroll', function () {
                if (scope.okSaveScroll) {
                    scope.scrollPos[$location.path()] = $(window).scrollTop();
                }
            });

            scope.scrollClear = function (path) {
                scope.scrollPos[path] = 0;
            };

            scope.$on('$locationChangeSuccess', function (route) {
                $timeout(function () {
                    $(window).scrollTop(scope.scrollPos[$location.path()] ? scope.scrollPos[$location.path()] : 0);
                    scope.okSaveScroll = true;
                }, 0);
            });

            scope.$on('$locationChangeStart', function (event) {
                scope.okSaveScroll = false;
            });
        }
    };
}) 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-01-01T11:45:27.710

我以前没用过，但是 angular 有一个[$anchorScroll](http://docs.angularjs.org/api/ng.%24anchorScroll)服务。至于重新加载数据，您可以使用[$cacheFactory](http://docs.angularjs.org/api/ng.%24cacheFactory)对其进行缓存，或者将数据存储在更高的范围内。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-05-12T00:48:57.397

我创建了一个适用于窗口滚动的指令（它可以更新为适用于任何元素）

html用法

```
<div ng-keep-scroll="service.scrollY">
<!-- list of scrolling things here -->
</div> 
```

其中“service.scrollY”必须是服务中的变量。服务保留它们的状态和值，每次加载和清除它们的值时都会重新创建控制器，因此您不能使用它们来存储持久数据。控制器有一个指向服务的范围变量。

指令js

```
app.directive('ngKeepScroll', function ($timeout) {
    return function (scope, element, attrs) {

        //load scroll position after everything has rendered
        $timeout(function () {
            var scrollY = parseInt(scope.$eval(attrs.ngKeepScroll));
            $(window).scrollTop(scrollY ? scrollY : 0);
        }, 0);

        //save scroll position on change
        scope.$on("$routeChangeStart", function () {
            scope.$eval(attrs.ngKeepScroll + " = " + $(window).scrollTop());
        });
    }
}); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-03-13T08:29:51.333

基于 br2000 的出色回答，我更新了指令代码以使用 ui-router。对于名称相同但参数不同的状态，我序列化 $state.params 对象以构成对象中的唯一键`scrollPosCache`。

```
.directive("keepScrollPos", function($state, $window, $timeout, $location, $anchorScroll) {

    // cache scroll position of each route's templateUrl
    var scrollPosCache = {};

    // compile function
    return function(scope, element, attrs) {

      scope.$on('$stateChangeStart', function() {
        // store scroll position for the current view
        if ($state.current.name) {
          scrollPosCache[$state.current.name + JSON.stringify($state.params)] = [ $window.pageXOffset, $window.pageYOffset ];
        }
      });

      scope.$on('$stateChangeSuccess', function() {
        // if hash is specified explicitly, it trumps previously stored scroll position
        if ($location.hash()) {
          $anchorScroll();

          // else get previous scroll position; if none, scroll to the top of the page
        } else {
          var prevScrollPos = scrollPosCache[$state.current.name + JSON.stringify($state.params)] || [ 0, 0 ];
          $timeout(function() {
            $window.scrollTo(prevScrollPos[0], prevScrollPos[1]);
          }, 0);
        }
      });
    }
  }) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-09-25T13:20:03.110

如果您的页面需要获取数据以显示，您可能必须使用 $routeChangeSuccess 并延迟滚动函数调用。

```
 scope.$on("$routeChangeSuccess", function() {
        $timeout(function () {
            var scrollY = parseInt(scope.$eval(attrs.ngKeepScroll));
            $(window).scrollTop(scrollY ? scrollY : 0);
        }, 1000); // delay by 1 sec
    }); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-04-30T14:18:04.703

我制作了一个适用于任何溢出元素的版本，而不仅仅是文档正文：

```
.directive("keepScrollPos", function($route, $timeout, $location, $anchorScroll) {

  // cache scroll position of each route's templateUrl
  var cache = {};

  return {
    restrict : 'A',
    link: function($scope, elements, attrs){

      $scope.$on('$routeChangeStart', function() {

        // store scroll position for the current view
        if($route.current)
          cache[$route.current.loadedTemplateUrl + ':' + attrs.keepScrollPos] = [elements[0].scrollLeft, elements[0].scrollTop];              

      });

      $scope.$on('$routeChangeSuccess', function(){
        // if hash is specified explicitly, it trumps previously stored scroll position
        if($location.hash()){
          $anchorScroll();
          return;
        }

        // else get previous scroll position and apply it if it exists
        var pos = cache[$route.current.loadedTemplateUrl + ':' + attrs.keepScrollPos];
        if(!pos)
          return;

        $timeout(function(){                  
          elements[0].scrollLeft = pos[0];
          elements[0].scrollTop = pos[1];            
        }, 0);

      });

    }
  }

}) 
```

像这样使用它：

```
<div keep-scroll-pos="some-identifier"> ... </div> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-04-28T10:18:10.603

我找到了另一种解决此问题的简单方法：

```
var scrollValue = $(window).scrollTop();

$rootScope.$on("$routeChangeStart", function() {
    scrollValue = $(window).scrollTop();
});

$rootScope.$on('$routeChangeSuccess', function(newRoute, oldRoute) {
    setTimeout(function() { $(window).scrollTop(scrollValue); }, 0);
}); 
```

只需将其放入 .run() 中即可。

这样，将超时值设置为 0 仍然有效，但在页面渲染后运行（没有超时功能它在内容（即模板或数据加载）渲染之前运行，使该功能无用。

如果您从某些 API 获取数据，您可以将超时包装在 $rootScope 中的函数中，并在成功请求后运行它。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-10-13T14:51:57.497

您需要在每次路线更改时重置滚动位置。在你的主 AppController 中使用它：

```
 $scope.$on("$routeChangeSuccess", function () {
    $anchorScroll();
  }); 
```

或者，如果您使用的是 ui-route：

```
 $scope.$on("$stateChangeSuccess", function () {
    $anchorScroll();
  }); 
```

有关更多信息，请参阅[在 AngularJS 中，如何在 URL 哈希上添加 $watch？](https://stackoverflow.com/questions/22002764/in-angularjs-how-do-i-add-a-watch-on-the-url-hash)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-11-17T12:29:23.410

这可能会解决您的问题，它对我有用 `$httpProvider.defaults.cache = true;`

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-02-12T01:32:20.147

与其他答案不同，我想记住的不仅仅是卷轴，即`input`field `value`s。

不仅如此，很多人还以为

*   您只想记住一个滚动元素（也许您有窗格或其他类似应用程序的显示），
*   你有`body`你的滚动元素（例如，如果你使用[角度捕捉](http://jtrussell.github.io/angular-snap.js/)怎么办？），
*   或者您的滚动元素不会被 angular 替换（即它在 之外`ng-view`）。

```
<body> <!-- doesn't scroll -->
    <div snap-drawers>..</div>

    <div snap-content="" history="scrollTop"> <!-- the scrolling div-->
        <header>...</header>

        <div ng-view>
            <input name="email" history="val"> <!-- tag with value we want remembered -->

            <div history="scrollLeft" history-watch="scroll" id="evenHorizontalScroll"><!--
                custom value we want remembered.
                NB it must have an id to be identified after angular
                removes it from the DOM between views,
                and since it is not a recognised default we can tell my
                directive the jquery event function what to watch
            --></div>
        </div>
    </div>
</body> 
```

我已经编写了一个 [n 不幸的是更长的] 共享范围指令来处理这些问题。

```
.directive('history', function($compile, $rootScope, $location) {
    return {
        restrict : 'A',
        replace : false,
        scope : false,

        controller : function($scope, $timeout) {
            //holds all the visited views
            var states = new Object();
            //the current view
            var state = null;
            //how many names have been generated where the element itself was used
            var generated = 0;

            //logs events if allowed
            function debug(from) {
                //comment this to watch it working
                //return;

                console.log('StateHistory: ' + from);
                if (from == 'went')
                    console.log(state);
            }

            //applies the remembered state
            function apply() {
                var element;
                //for each item remembered in the state
                for (var query in state) {
                    //use the element directly, otherwise search for it
                    (state[query].element || $(query))
                        //use the appropriate function
                        [state[query].property](
                            //and set the value
                            state[query].value
                        )
                    ;
                    debug('applying:' + query + ':' + state[query].value);
                }

                //start recording what the user does from this point onward
                $scope.ignore = false;
            }

            //generates a reference we can use as a map key
            $scope.generateRef = function() {
                return '' + (++generated);
            };

            //views changed
            $scope.went = function() {
                debug('went');

                //set the current state
                state = states[$location.path()];

                //if we dont remember the state of the page for this view
                if (!state)
                    //get recording!
                    state = states[$location.path()] = new Object();

                //apply the state after other directives
                //(like anchorScroll + autoscroll) have done their thing
                $timeout(apply);
            };

            //one of the elements we're watching has changed
            $scope.changed = function(name, element, property, useObject) {
                //if we're not meant to be watching right now
                //i.e. if the user isnt the one changing it
                if ($scope.ignore) {
                    debug('ignored');
                    return;
                }

                //if we havent recorded anything for this here yet
                if (!state[name]) {
                    //start recording
                    state[name] = {property:property};

                    //and remember to leave behind a reference if the name isn't
                    //good enough (was generated)
                    if (useObject)
                        state[name].element = element;
                }

                //use the requested function to pull the value
                state[name].value = element[property]();

                debug('changed:' + name + ':' + state[name].value);
            };

            //initial view
            $scope.went();

            //subsequent views
            $rootScope.$on('$routeChangeSuccess', $scope.went);
            $rootScope.$on('$routeChangeError', $scope.went);

            $rootScope.$on('$routeChangeStart', function() {
                debug('ignoring');
                $scope.ignore = true;
            });
        },

        link: function (scope, element, attrs) {
            //jquery event function name
            var watch = attrs.historyWatch;
            //if not set, use these defaults
            if (!watch) {
                switch (attrs.history) {
                case 'val':
                    watch = 'change';
                    break;
                case 'scrollTop':
                    watch = 'scroll';
                    break;
                default:
                    watch = attrs.history;
                }
            }

            //the css selector to re-find the element on view change
            var query = null;
            //the reference to the state remembered
            var name;

            //try using the id
            if (attrs.id)
                name = query = '#' + attrs.id;
            //try using the form name
            else if (attrs.name)
                name = query = '[name=' + attrs.name + ']';
            //otherwise we'll need to just reference the element directly
            //NB should only be used for elements not swapped out by angular on view change,
            //ie nothing within the view. Eg the view itself, to remember scrolling?
            else
                name = scope.generateRef();

            //jquery value function name
            var property = attrs.history;

            //watch this element from here on out
            element.on(watch, function() {
                scope.changed(name, element, property, !query);
            });
        }
    };
}) 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-06-25T14:25:21.940

我在我的项目中使用自定义解决方案。

第一步：获取列表中点击的位置，并保存在本地存储中。

```
var position = document.body.scrollTop;
localStorage.setItem("scrollPosition",position); 
```

第 2 步：在详细视图中将全局变量 backFromDetailView 设置为 true。

```
backFromDetailView = true; 
```

第 3 步：从详细视图页面返回到列表时。所有内容再次从服务器重新加载到滚动位置。

为此，使用以下行在 html 中绑定一个函数：

控制器包含以下功能：

```
$scope.goto = function (){
    if(backFromDetailView){
         window.scrollTo(0, localStorage.getItem("scrollPosition"));
     }
} 
```

这种技术的一些缺点：

1.  包括附加内容在内的所有内容都会重新加载。

2.  在 iOS 中，在滚动到适当位置之前会出现黑屏。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-12-14T14:03:21.197

@br2000 的绝佳解决方案。

然而不幸的是，当指令试图恢复位置时，我滚动回的页面仍在将数据从后端加载到长列表中。

所以很明显它无法恢复滚动位置。我通过使用`$interval`而不是解决`$timeout`了它，并用 . 重复了 20 次`300ms timeout`。我存储了从返回的承诺`$interval`，然后在`$interval`函数内部检查当前位置现在是否与存储的位置相同，如果是，我调用一个范围方法来取消`$interval - $interval.cancel(promise).`

此外，最初 my`pageYOffset`和`pageXOffset`始终为 0，因为`overflow-x: hidden`应用于`div`. `DOM`我通过将根包裹`div`在另一个里面来解决它，`div`然后我在上面放置了这个指令。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-03-07T12:21:21.027

对于那些接受 emp 的回答但使用 angular ui-router >= version 1.0.0（当前为 1.0.3）的人，请参阅使用 ui-router 新转换重写的指令。

HTML

```
<div ui-view keep-scroll-pos></div> 
```

角度指令

```
angular.module("app")
    .directive("keepScrollPos", function($transitions, $state, $window, $timeout, $location, $anchorScroll) {

        // cache scroll position of each state's templateUrl
        var scrollPosCache = {};

        return {
            link: function(scope, element, attrs) {

                $transitions.onStart({ }, function( trans ) {

                    // store scroll position for the current view
                    if (trans.from().name) {
                        scrollPosCache[trans.from().templateUrl] = [ $window.pageXOffset, $window.pageYOffset ];
                    }

                    trans.promise.finally(function () {

                        // if hash is specified explicitly, it trumps previously stored scroll position
                        if ($location.hash()) {
                            $anchorScroll();

                        // else get previous scroll position; if none, scroll to the top of the page
                        } else {
                            var prevScrollPos = scrollPosCache[trans.to().templateUrl] || [ 0, 0 ];
                            $timeout(function() {
                                $window.scrollTo(prevScrollPos[0], prevScrollPos[1]);
                            }, 200);
                        }
                    });
                });
            }
        }
    }); 
```

# android-twitter - 安卓推特授权回调

> ID：14107539
> 
> 赞同：0
> 
> 时间：2013-01-01T02:55:23.397
> 
> 标签：android-twitter

我正在使用 Twitter4J 从不是应用程序启动活动的活动中向 Twitter 授权。到目前为止，我有一个名为“AuthorisationActivity”的单独活动，它返回一个带有有效 Twitter4j twitter 对象的意图，然后可以由调用活动“CallAuthorisationActivity”使用。
来自 twitter 的回调工作正常，我最终在 AuthorisationActivity 中得到了一个授权的 twitter 对象，但现在我发现自己处于 catch22 情况：1 - 如果我没有将 AuthorisationActivity 的启动模式设置为“singleTask”，回调将不会返回到 AuthorisationActivity 的 onNewIntent() 方法，但到它的 onCreate() 方法并尝试在无限循环中进行身份验证。2 - 如果我确实将 AuthorisationActivity 的启动模式设置为“singleTask”，它将返回到 onNewIntent() 但由于它现在处于单独的任务中，它不会返回到调用活动的 onActivityResult() 方法。

我只是 Android 开发的初学者，并且由于身份验证有效，我认为这个问题更多地与活动的管理方式有关。以下是清单的简化摘录：

```
<activity 
    android:name=".MainActivity">
<intent-filter>
    <action android:name="android.intent.action.MAIN" />
    <category android:name="android.intent.category.LAUNCHER" /> 
</intent-filter>
</activity>

<activity
    android:name=".CallAuthorisationActivity">
</activity>

<activity 
    android:name=".AuthorisationActivity"
    android:label="@string/title_activity_authorisation">  
    <intent-filter>
    <action android:name="android.intent.action.VIEW" /> 
    <category android:name="android.intent.category.DEFAULT"/>  
    <category android:name="android.intent.category.BROWSABLE"/>  
    <data android:scheme="tweetree" android:host="callback" />
    </intent-filter>
</activity> 
```

在代码中，CallAuthorisationActivity 只是将带有 startActivityForResult(...) 的意图发送到 AuthorisationActivity 并按照标准在 onActivityResult(...) 中捕获结果。任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T12:04:41.813

经过几个小时的研究，我发现了这个链接[http://gtware.blogspot.com.au/2012/07/tweeting-from-android-apps-using.html#comment-form](http://gtware.blogspot.com.au/2012/07/tweeting-from-android-apps-using.html#comment-form) 经过一些更改后，它为我提供了一个优雅的解决方案。

正如我在该页面上评论的那样：使用 WebView 可以更轻松地处理回调，因为浏览器集成在应用程序中。所以根本不需要意图过滤器。

我只是更改了一些您可能感兴趣的内容：

1 - 我使用的是 Twitter 对象而不是 AsyncTwitter。Twitter 对象似乎更容易从 twitter 获取数据，例如从用户搜索 API 获取数据，并且它不需要 TwitterListener。

2 - 我的虚拟设备在调用 twitter.getOAuthRequestToken() 和 twitter.getOAuthAccessToken() 时崩溃，即使使用 AsyncTwitter 对象也是如此，因此我将它们封装在它们自己的 AsyncTask 线程中。

希望这可能会有所帮助...

# php - MVC，去哪里

> ID：14107540
> 
> 赞同：0
> 
> 时间：2013-01-01T02:55:24.083
> 
> 标签：php, model-view-controller

目前，我有一个胖控制器和一个更薄的模型层。

我的控制器看起来像这样。

```
namespace controller;
class home
{

    public $template = 'home';

    protected $database;

    public function __construct(\Zend\Db\Adapter\Adapter $database){
        $this->database = $database;

    }

    /**
     * Returns the home page
     */
    public function indexView(){

        $userService = new UserService($this->database);
        $view = new ViewModel($this->template);
        $view->assign('pageTitle', 'Home');
        $view->assign('lead', "Welcome ".$userService->getFirstName());
        $view->assign('h1', 'Home');

    }
} 
```

我的模型将包括数据操作、数据收集等。

这里调用的 viewModel 类，即视图，基本上是一个容器类，其中包括页眉、页脚和内部使用的实际模板。

在 MVC 方面，我现在明白模型和视图是相互了解的。

我会以正确的方式解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T03:10:37.150

MVC 模式有许多变体，包括 MVP（模型视图演示器），无论您在哪里看到，这些都可以略有不同的解释。

通常常见的一件事是模型应该**完全不知道**控制器或视图。这允许根据需要互换模型。模型不需要任何东西。

相反，使用[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)，模型是可观察的，控制器和/或视图是观察者。当模型中的某些内容发生更改时，它会为其观察者调用 update/notify 方法并通知他们它已更改。

一种变体是[监督控制器](http://martinfowler.com/eaaDev/SupervisingPresenter.html)，它管理视图但不干扰事件等：

> 如示例所示，一个好的监督控制器的本质是尽可能少做。让视图尽可能多地处理，只有在涉及更复杂的逻辑时才介入。

最后，就 PHP 而言，检查这个[有用的答案](https://stackoverflow.com/a/4143471/549848)，它指向使用[CodeIgniter MVC](http://ellislab.com/codeigniter/user-guide/overview/mvc.html)。如果您正在查看其他 Web 框架，[Yii 框架](http://www.yiiframework.com/doc/guide/1.1/en/basics.mvc)似乎也很好地涵盖了 MVC。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T11:10:07.573

*简短的回答：*不，您没有以正确的方式进行操作，甚至没有以稍微正确的方式进行。

MVC 设计模式都是关于[关注点分离的](http://en.wikipedia.org/wiki/Separation_of_concerns)。您将模型层与表示层分开 - 将域业务逻辑与其演示方式分开。

在表示层中，您将负责用户交互的组件（控制器）与管理 UI 创建的组件（视图）分开。

> [模型层也有一些分离，尽管“初学者的 mvc”博客文章中通常不涉及这一点。我在之前的一篇文章中写了一个[简短的描述](https://stackoverflow.com/a/5864000/727208)。但是，如果您想真正了解如何实现模型层，则必须阅读 Folwer 的[**PoEAA**](https://rads.stackoverflow.com/amzn/click/com/0321127420)。]

在经典 MVC（不能用于 Web）和 Model2 MVC 模式中，*视图*从模型层请求它需要的所有数据。控制器仅通过向模型层和当前视图应用用户输入来更改它们的状态。

在其他受 MVC 启发的设计模式（MVVM 和 MVP）的最简单实现中，类似控制器的结构（分别为 ViewModel 和 Presenter）为视图提供来自模型层的数据。这也意味着在控制器中拥有视图模型毫无意义。[您可以在本出版物](http://www.wildcrest.com/Potel/Portfolio/mvp.pdf)中阅读有关 MVP 模式的更多信息。

> [**PS**还有，你为什么要在控制器中注入数据库连接，而你要做的只是传递它？该代码片段违反了[LoD](http://c2.com/cgi/wiki?LawOfDemeter)。如果您需要从控制器内的模型层获取结构，则应该注入工厂。]

# powershell - 为什么我不能从 Cygwin 运行 PowerShell 2？

> ID：14107544
> 
> 赞同：1
> 
> 时间：2013-01-01T02:56:22.960
> 
> 标签：powershell, cygwin

我安装了 PowerShell 3，我需要从 Cygwin 运行 PowerShell 2

```
$ PowerShell -Version 2
Windows PowerShell
Copyright (C) 2012 Microsoft Corporation. All rights reserved.

C:\Users\Michael> $host.Version

Major  Minor  Build  Revision
-----  -----  -----  --------
3      0      -1     -1 
```

但正如您所见，它仍在运行 PowerShell 3。

你有什么想法我做错了什么吗？

如果你好奇我为什么需要从 Cygwin 运行 PowerShell，那是因为我正在编写 git 挂钩。为了开发服务器端钩子，我编写了 PowerShell 脚本，由于上述问题，我无法使用我的断点技巧

UPD：我在 Windows 8 上使用 Cygwin 1.7.11 终端

UPD：我什至可以在两者之间运行 cmd 以确保正确传递参数

```
$ cmd
Microsoft Windows [Version 6.2.9200]
(c) 2012 Microsoft Corporation. All rights reserved.

C:\Users\Michael>PowerShell -Version 2
Windows PowerShell
Copyright (C) 2012 Microsoft Corporation. All rights reserved.

C:\Users\Michael> $host.Version

Major  Minor  Build  Revision
-----  -----  -----  --------
3      0      -1     -1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T06:44:33.597

也许 Cygwin 没有像预期的那样将参数传递给 Powershell.exe？检查命令行 Powershell.exe 已被调用。您可以为此使用 Win32_Process WMI 类。为了避免与其他 Powershell 实例混淆，请同时获取进程和父进程 ID。使用相同的查询来获取 Cygwin 的 pid 或只使用任务管理器。像这样，

```
gwmi win32_process -filter "Name = 'powershell.exe'" | select commandline, processid, parentprocessid | ft -AutoSize 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T17:36:45.987

按预期工作。

![在此处输入图像描述](../Images/c39ec04e0df53fece77c77da90d39b0b.png)

您可能需要提供更多上下文来了解为什么这不起作用。我能想到的唯一原因是`-Version 2.0`参数没有被传递给powershell。

# r - R中的分层数据-如何在维护树的同时对子集进行求和？

> ID：14107545
> 
> 赞同：0
> 
> 时间：2013-01-01T02:56:29.000
> 
> 标签：r, data-analysis

可能，我还没有很好地定义问题。我似乎不明白 R 从`sapply`. 我有一个大的分层数据数据框。大约一半的列是因子，一半是数值。我想获得一个包含一些因子的新数据框，并对数值列求和，但我希望总和保持按因子水平分开。

例如，从下面的示例数据中，我想制作一个州、区、分支相同的数据框，但将相同类型但颜色不同的订单的数据相加。我认为迭代使用`sapply`会做到这一点，但我似乎无法让它发挥作用。

样本数据：

```
state district branch   order   colour  number  cost    amount
CA   central newtown    shoes   black   6   25.50  127.40
CA   central newtown    shoes   brown   3   32.12   75.40
CA   central newtown    gloves  blue    15  12.20  157.42
CA   central newtown    gloves  black   9   8.70    65.37
CA  central columbus    shoes   black   12  30.75   316.99
CA  central columbus    shoes   brown   1   40.98    45.00
CA  central columbus    gloves  blue    47  11.78   498.32
CA  central columbus    gloves  black   23  7.60    135.50 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T03:00:59.327

的另一份工作`aggregate`。调用您的数据框`dat`：

```
aggregate(cbind(cost, amount) ~ state+district+branch+order, data=dat, FUN=sum)

##   state district   branch  order  cost amount
## 1    CA  central columbus gloves 19.38 633.82
## 2    CA  central  newtown gloves 20.90 222.79
## 3    CA  central columbus  shoes 71.73 361.99
## 4    CA  central  newtown  shoes 57.62 202.80 
```

左边的~，`cbind`用来表示我们要把每一列分开。如果`cost + amount`已指定，则表示此处的总和，因为这些是数字。在 ~ 的右侧，我们有因子，所以 + 表示我们正在按每个因子的每个级别进行聚合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T03:10:41.937

我一直发现 sql 最直观的聚合 :)

```
 library(sqldf)

    # write a full aggregation command, grouping by your specified columns
    x <- sqldf( "select state, district, branch, order, sum( cost ) as sumcost, sum(amount) as sumamount from yourdata group by state, district, branch, order" )

    # print your result
    x 
```

这[是aggregate()和tapply()](http://www.screenr.com/JQS8)的解释，这里是r中sql的相同[解释，用于聚合](http://www.screenr.com/zmd8)

# git - 如何在不输入整个路径的情况下进行 git diff

> ID：14107546
> 
> 赞同：28
> 
> 时间：2012-12-31T23:14:33.327
> 
> 标签：git, github

我正在使用 github windows shell，我将执行以下操作

```
git status 
```

查看已修改文件的列表，并想提醒自己更改了什么。我必须输入类似的东西

```
git diff Source\FooBar\Pages\FooBar.aspx 
```

这似乎需要输入很多字符。是否有一些更简单的工作流程来查看我没有看到的差异？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-11-22T13:18:19.037

```
git diff -- **/FooBar.aspx 
```

通常`*`代表文件名的任何部分，而`**`代表任何子路径。例如，`git diff -- **/main/**/*.aspx`将仅`aspx`区分位于某个子目录`main`或其`main`自身的某个位置的文件。这适用于接受路径的其他命令，例如 commit 和 add。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T03:03:03.057

如果要查看所有更改，只需使用`git diff`. 但是，它不会列出新文件。

要有选择地查看更改，我建议使用 GUI，例如，`git gui`或`gitk`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T20:29:42.657

大多数终端（例如Windows 的console2）都有自动完成功能。

开始打字并按下`tab`

通常 git 可以在 2 个字符后自动完成。喜欢：

吉`tab`地`tab`

会给你**git diff**。如果您的文件夹命名不同，它可能会在单个字符后自动完成。就像您的项目根目录有三个文件一样：

*   自述文件
*   /资源/
*   /垃圾桶/

您可以简单地键入`r`,`s`或`b`tab 来自动键入任何这些文件名。

*仅供参考，* 自动完成终端和 git 命令、文件和目录名称、分支和标签名称的工作，但不幸的是，不适用于提交 ID。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-02T15:59:10.807

我使用**Console2**来托管 bash。

有了这个，我可以使用**Ctrl + 单击并拖动**来突出显示文本，然后可以将其复制到剪贴板并粘贴到其他命令行中。

我用它来复制文件路径。

这使我能够输入**git diff [Ctrl+V]**并获得我想要的命令行。

# javascript - 如何检查 JSON 响应的大小？

> ID：14107547
> 
> 赞同：3
> 
> 时间：2013-01-01T02:57:18.297
> 
> 标签：javascript, json

有什么方法可以检查响应大小吗？Data 属性是一个字节数组，我用它来显示图像。如果大小大于 10 MB，我需要显示一个弹出窗口。

```
{
  "Name": "sharon",
  "Date": "07\/14\/2004",
  "Data": "JVBERi0xLjINCg0KNC",
  "DocumentId":1540,
} 
```

另外，我如何检查我的响应类型，无论是 blob 还是什么？我可以检查我得到的 blob 的大小吗？也许是这样的：

```
var data = JSON.parse(this.responseData); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T03:04:19.797

您可以简单地使用 JavaScript `.length`，但要意识到不同的浏览器和服务器会报告不同的值，因为换行符的某些解释可能是 2 个大小值中的 1 个（字节顺序）。

话虽如此，请使用您确定包含所需数据的“松散”值，而不仅仅是没有价值的标头响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T03:19:34.347

您可以将传入的响应塞入一行并删除所有不必要的空白。

```
var JSON = '{\r\n' +
'   "Name": "sharon",\r\n' +
'   "Date": "07\/14\/2004",\r\n' +
'   "Data": "JVBERi0xLjINCg0KNC",\r\n' +
'   "DocumentId":1540,\r\n' +
'}';
alert(JSON);
alert(JSON.length); // 101

var newJSON = slurp(JSON);
alert(newJSON);
alert(newJSON.length); // 91

function slurp(str) {
  str = str.replace(/(\r\n|\n|\r)/gm,"");
  str = str.replace(/(\s+|\t)/gm,' ');
  return str;
} 
```

# php - 为什么 grep 函数不能在 localhost 上运行？

> ID：14107548
> 
> 赞同：0
> 
> 时间：2013-01-01T02:57:49.203
> 
> 标签：php, regex

```
$grep=preg_grep("/^(\d+)?\.\d+$/", "11.11");
print_r($grep); 
```

这不应该打印一个由“11.11”组成的数组吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T03:00:49.060

不...您想使用[`preg_match`](http://us3.php.net/manual/en/function.preg-match.php)...[`preg_grep`用于数组](http://php.net/manual/en/function.preg-grep.php)：

```
if(preg_match("/^(\d+)?\.\d+$/", "11.11", $matches)) {
   print_r($matches);
} else {
   echo "No Match!";
} 
```

# php - 我可以在 Symfony 1.4 中为管理生成器 object_actions 指定不同的模块吗

> ID：14107552
> 
> 赞同：0
> 
> 时间：2013-01-01T02:59:20.853
> 
> 标签：php, symfony-1.4

我在 Symfony 1.4 中使用管理生成器，并希望有一个自定义操作。我可以`object_actions`在我的 generator.yml 中指定我可以指定动作名称，但是有没有办法指定不同的模块名称？

生成器.yml

```
generator:
  class: sfDoctrineGenerator
  param:
    model_class:           MasterIndex
    theme:                 admin
    non_verbose_templates: true
    with_show:             false
    singular:              ~
    plural:                ~
    route_prefix:          master_index
    with_doctrine_route:   true
    actions_base_class:    sfActions

    config:
      actions: ~
      fields:  ~
      list:    
        actions: {}
        display: [=last_name, =first_name, =email, _number_poems, is_contestant, is_admin, is_disabled]
        object_actions: 
          payInvoice: {label: Enter Payment, action: payInvoice}  // how to specify a different module?
          _edit: ~
      filter:  
        display: [last_name, first_name, email, is_admin, is_contestant, is_disabled]
      form:    ~
      edit:    ~
      new:     ~ 
```

我已经尝试添加密钥`module: payment`，`payInvoice`但它没有效果。这是可行的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T03:39:23.037

您可以直接在路由文件中添加全新的路由（使用新模块）...

# iphone - 为什么通讯录无法与 ios 保持同步？

> ID：14107562
> 
> 赞同：1
> 
> 时间：2013-01-01T03:02:11.337
> 
> 标签：iphone, ios, addressbook

我正在 ios 中编写一个自定义地址簿应用程序，并使用单例地址簿引用。

下面是我的操作步骤：

```
+ (ABAddressBookRef) sharedAddressBook
{
    static ABAddressBookRef ref = nil;
    if ( ref == nil )
    {
        ref = ABAddressBookCreate();
    }

    return ( ref );
} 
```

step1：打开我的通讯录应用

```
 ABAddressBookRef addressBook = [ABAddressBook sharedAddressBook];
    ABRecordRef person = ABAddressBookGetPersonWithRecordID( addressBook, 83 );
    NSString* name= ABRecordCopyValue(person,kABPersonFirstNameProperty);
    NSLog(@"%@",name); 
```

控制台打印“aaa”。

第2步：

退出我的应用程序（进入后台，而不是杀死），使用系统拨号器将“aaa”人名更改为“bbb”。

第三步：

打开我的应用程序（enterForeground），做同样的事情

```
ABAddressBookRef addressBook = [ABAddressBook sharedAddressBook];
ABRecordRef person = ABAddressBookGetPersonWithRecordID( addressBook, 83 );
NSString* name= ABRecordCopyValue(person,kABPersonFirstNameProperty);
NSLog(@"%@",name); 
```

控制台打印“aaa”。

**我的问题是**

1.为什么使用旧的addressBookRef时控制台打印“aaa”而不是“bbb”？当我将 [ABAddressBook sharedAddressBook] 更改为 ABAddressBookCreate() 时，一切似乎都正常。为什么旧的 addressBookRef 无法保持最新​​？

2.我每次都需要在enterForeground 做ABAddressBookCreate() 吗？

3.我编辑人员信息时记录ID是否更改？我猜测。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T03:16:01.383

原因是与地址簿的交互是事务性的。请参阅文档，尤其是[http://developer.apple.com/library/ios/#documentation/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone/Chapters/BasicObjects.html](http://developer.apple.com/library/ios/#documentation/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone/Chapters/BasicObjects.html)。您可以在应用程序运行时注册以了解数据库中的更改。然后，您应该恢复或保存：

> 当您收到更改回调时，您可以做两件事：如果您没有未保存的更改，您的代码应该简单地恢复您的地址簿以获取最新数据...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T02:35:05.473

```
static void _ExternalChangeCallback( ABAddressBookRef bookRef, CFDictionaryRef info, void * context )
{
    HMAddressBook * hmAddressBook = (HMAddressBook *)context;

    [hmAddressBook _resetSharedRef];
}

@implementation HMAddressBook
@synthesize addressBookRef = _ref;

+ (HMAddressBook *)sharedAddressBook
{
    static HMAddressBook * volatile __shared = nil;

    if ( __shared == nil )
    {
        HMAddressBook * tmp = [[HMAddressBook alloc] init];
        if ( OSAtomicCompareAndSwapPtr(nil, tmp, (void * volatile *)&__shared) == false )
            [tmp release];
    }

    return ( __shared );
}

- (void)_resetSharedRef
{
    if (_ref != NULL)
    {
        ABAddressBookUnregisterExternalChangeCallback(_ref, _ExternalChangeCallback, self);
        CFRelease(_ref);
    }
    _ref = ABAddressBookCreate();
    ABAddressBookRegisterExternalChangeCallback(_ref, _ExternalChangeCallback, self);

    if(_delegate && [_delegate respondsToSelector:@selector(addressBookDidResetSharedRef:)])
    {
        [_delegate addressBookDidResetSharedRef:self];
    }

}
- (void)addressBookDidResetSharedRef:(HMAddressBook *)addressBook
{
    NSLog(@"addressBookDidReset");    
    [self reloadAddressBookData_async:^(BOOL finished) {
        [completionBlock reloadData];
    }];

} 
```

现在我在_ExternalChangeCallback 时异步重新加载Addressbook！reloadAddressbook 需要重新分配所有 person(wrapped) 实例，但不需要重新创建它的缓存数据。

# gmail - 如何获得对 Gmail 的 OAuth 访问权限？

> ID：14107563
> 
> 赞同：11
> 
> 时间：2013-01-01T03:02:12.747
> 
> 标签：gmail, oauth-2.0, google-oauth

您如何获得用户启动的访问权限以阅读他们的电子邮件？似乎有 OpenID、OAuth、OAuth2 和其他随机解决方案。

到目前为止，我想出的最好的是带有`scope=https://mail.google.com/`.

是否有任何权限可以让我对邮件进行只读访问，并且理想情况下不会通过以下权限通知来吓唬用户：

“查看和管理您的邮件在我不使用应用程序时执行这些操作”

如果可能的话，我只想“查看您的邮件”。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-07-24T23:07:09.290

以前的答案不再准确。最近发布的 Gmail API 允许“只读”范围等，可在此处找到：[https](https://developers.google.com/gmail/api/auth/scopes) ://developers.google.com/gmail/api/auth/scopes 。

“只读”范围是：[https ://www.googleapis.com/auth/gmail.readonly](https://www.googleapis.com/auth/gmail.readonly)

```
https://www.googleapis.com/auth/gmail.readonly
Read all resources and their metadata—no write operations.

https://www.googleapis.com/auth/gmail.compose
Create, read, update, and delete drafts. Send messages and drafts.

https://www.googleapis.com/auth/gmail.send
Send messages only. No read or modify privileges on mailbox.

https://www.googleapis.com/auth/gmail.insert
Insert and import messages only.

https://www.googleapis.com/auth/gmail.labels
Create, read, update, and delete labels only.

https://www.googleapis.com/auth/gmail.modify
All read/write operations except immediate, permanent deletion of threads and messages, bypassing Trash.

https://www.googleapis.com/auth/gmail.metadata
Read resources metadata including labels, history records, and email message headers, but not the message body or attachments.

https://www.googleapis.com/auth/gmail.settings.basic
Manage basic mail settings.

https://www.googleapis.com/auth/gmail.settings.sharing
Manage sensitive mail settings, including forwarding rules and aliases. 

Note: Operations guarded by this scope are restricted to administrative use only. They are only available to G Suite customers using a service account with domain-wide delegation. 

https://mail.google.com/
Full access to the account, including permanent deletion of threads and messages. This scope should only be requested if your application needs to immediately and permanently delete threads and messages, bypassing Trash; all other actions can be performed with less permissive scopes. 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-01T03:21:12.553

[GMail API 文档](https://developers.google.com/google-apps/gmail/xoauth2_protocol#oauth_20_scopes)说只有一个范围可以访问所有内容。

还有一个称为[GMail 收件箱 Feed](https://developers.google.com/google-apps/gmail/gmail_inbox_feed)的功能可能是您想要的，但它仅在 Google Apps 域中可用。

# ajax - 如何使用 AJAX 将数据从服务器发送到客户端？

> ID：14107565
> 
> 赞同：0
> 
> 时间：2013-01-01T03:02:33.590
> 
> 标签：ajax, node.js, rest, coffeescript

我想查询 MongoDB 并检索一些文档。然后将这些文档流回客户端以填充 a`<table>`而无需刷新页面。我已经知道如何使用 socket.io 来做到这一点，但我想学习如何在没有套接字的情况下传输数据。我目前正在获得 a `Failed to load resource: the server responded with a status of 404 (Not Found)`，因为我没有`/loadRecent`资源，但我不知道如何在`GET`不加载新页面的情况下执行 a。（我可能缺少一些关于 REST 如何工作的基本知识。）请指教。

服务器代码：

```
#Get recent documents
            app.get '/loadRecent', (req, res) ->
                console.log 'Documents requested...'
                db.collection 'documents', (err, collection) ->
                    collection.find().sort(dateAdded:-1) (err, cursor) ->
                        if not err
                            res.setHeader 'content-type':'application/json'
                            cursor.each (err, item) ->
                                res.write item
                        else
                            console.log 'Error getting recent docs: ' + err 
```

客户端代码（现在只有一个`console.log`，但计划是在`<table>`我得到数据流过时附加数据。）：

```
$.getJSON('/loadRecent', function(data, textStatus, jqXHR)
            {
                console.log('Data recieved from server: ' + data);
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T04:18:09.973

尝试在每个游标中构建 JSON，而不是每次都尝试编写。

构建 JSON，然后在光标为 NULL 时使用 res.send，这样您就知道它已完成构建。

# jsp - 保留现有选择并允许用户在 struts2 选择标签中添加更多选择

> ID：14107573
> 
> 赞同：0
> 
> 时间：2013-01-01T03:03:27.950
> 
> 标签：jsp, struts2

当用户在 struts tag 中进行进一步选择时，如何保留列表中的现有选择`select`。

**JSP：**

```
<s:select key="chosenId" id="chosenId" name="entity.IdList" listKey="iD" list="idList" listValue="idName" size="5" multiple="true"/> 
```

例如：现有选择是`"Finance"`并测试某个对象（请参阅图像）。当用户编辑特定对象时，他可能想要选择另一个`id`名称。

**问题是当用户尝试在选择框中进行选择时，当前选择消失了。所以我想保留现有的选择并允许用户选择更多。**

我应该采取什么样的方法来获得这种功能？

![在此处输入图像描述](../Images/3dc028cadd5c6c18a3bcdf62fdf75df5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T07:52:53.050

该方法是必不可少的，您需要一个可以从列表中添加更多元素的地方。可以是`textfield`，`textarea`随便你。然后请将事件处理程序添加到列表元素，当您从列表中选择项目时，只需将当前选择添加到占位符。

# java - 正确缩放图像的位置 Java

> ID：14107576
> 
> 赞同：0
> 
> 时间：2013-01-01T03:04:03.933
> 
> 标签：java, image, math, scale, image-resizing

我有一张图片详细说明了我想要为 Game.height 的所有值实现的目标。问题是我在变量 circle_dy 中的数学表达式在针对 Game.height 的所有值缩放图像位置时似乎不正确。

![IMG](../Images/6e6feb2896be4121c5db6e30adabd01f.png)

```
 // images of the game
        private Image circle;
    // ball's spawning location 
        private int circle_dx = 0;
        private int circle_dy = (Game.height/2) + 30 ;

    public class GameBoard{ 

    public GameBoard(){

            // construct an ImageIcon specified by the given string directory
        ImageIcon circle = new ImageIcon("src/pics/circle.png");
        // get image type of the ImageIcon and assign it into the image instance                                                  //variable
        this.circle = circle.getImage();

        setBackground(Color.black);

    }

    // appropriate method to paint is paintComponent
        public void paintComponent(Graphics g){
            // if you are overriding a method call the super class paintComponent method
            // because you are creating your own version of the paintComponent method
            super.paintComponent(g);

            // draw the image itself at a particular location on the JPanel

            g.drawImage(this.circle,circle_dx,circle_dy,this);
            }
   }

public class Game extends JFrame{

        public static final int width = 600;
        public static final int height = 200;

    public Game(){
    // add the JPanel to the jframe
    add(new GameBoard());
    setVisible(true);
    // set the size of the jframe
    setSize(width,height);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T18:32:02.927

作为建议：

为 windows resize 编写一个监听器，它将更新你的球的大小。

要计算所需的大小更改，请获取窗口的 x 和 y 大小（建议在每次侦听器完成时保存它们）。将旧值和新值计算为 %，然后按相同的 % 缩放您的球。

供参考：[http ://docs.oracle.com/javase/tutorial/uiswing/events/componentlistener.html](http://docs.oracle.com/javase/tutorial/uiswing/events/componentlistener.html)

# vba - PPT2010插入图片无法获取原文件名

> ID：14107583
> 
> 赞同：3
> 
> 时间：2013-01-01T03:05:23.480
> 
> 标签：vba, powerpoint

在 MS-Powerpoint 2010 中，插入名称为 的图像`ABC.gif`。

当我使用代码读取`.pptx`文件时，我无法获得应该是的原始图像的文件名`ABC.gif`，而是得到 " `Image1.gif`。

有人可以告诉我如何获得原始图像的 fileName `ABC.gif`。

使用`Microsoft.Office.Interop.PowerPoint`, 进行代码操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T06:32:08.970

不确定您使用的是 VB.Net 还是 C#，所以我将使用 VBA 代码进行解释。您可以轻松地使其适应您的代码。

要获取文件名，您必须确保不只是“**插入**”图像，而是“**插入和链接**”请参见下面的屏幕截图。

![在此处输入图像描述](../Images/6a4308408472d016af62859e7fb96261.png)

**请记住，在这种情况下，** MS-PP 也会将图片重命名为“*图片 1、图片 2* ”等，但您始终可以使用它来获取完整的**Filename + Path**。一旦你有了它，你就可以轻松地检索文件名。**`LinkFormat.SourceFullName`**

 ****看这个例子

```
Option Explicit

Sub Sample()
    Dim img As Shape

    For Each img In ActivePresentation.Slides(1).Shapes
        '~~> Type is 11 when you insert and link an image
        If img.Type = msoLinkedPicture Then
            Debug.Print img.LinkFormat.SourceFullName
            Debug.Print img.Name
        End If
    Next
End Sub 
```

**截屏**

![在此处输入图像描述](../Images/a110d1c63a2bcf699034d132968b7c0e.png)****

# python - 将字符串切片成列表

> ID：14107584
> 
> 赞同：0
> 
> 时间：2013-01-01T03:05:36.530
> 
> 标签：python, python-3.x

> **可能重复：**
> [如何在 Python 中将列表拆分为大小均匀的块？](https://stackoverflow.com/questions/312443/how-do-you-split-a-list-into-evenly-sized-chunks-in-python)
> [以块为单位迭代列表的最“pythonic”方式是什么？](https://stackoverflow.com/questions/434287/what-is-the-most-pythonic-way-to-iterate-over-a-list-in-chunks)

说我有一个字符串

```
s = '1234567890ABCDEF' 
```

我怎样才能将这个字符串切片（或者拆分是正确的术语？）这个字符串由每个包含 2 个字符的字符串组成的列表？

```
desired_result = ['12', '34', '56', '78', '90', 'AB', 'CD', 'EF'] 
```

不确定这是否相关，但我正在解析一串十六进制字符，我需要的最终结果是从上面的列表创建的字节列表（例如，通过使用`int(desired_result[i], 16)`）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T03:08:49.720

```
3>> bytes.fromhex('1234567890ABCDEF')
b'\x124Vx\x90\xab\xcd\xef' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-01T03:09:07.910

你可以使用`binascii`：

```
>>> from binascii import unhexlify
>>> unhexlify(s)
'\x124Vx\x90\xab\xcd\xef' 
```

然后：

```
>>> list(_)
['\x12', '4', 'V', 'x', '\x90', '\xab', '\xcd', '\xef'] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-01T03:14:41.660

```
>>> s = '1234567890ABCDEF'
>>> iter_s = iter(s)
>>> [a + next(iter_s) for a in iter_s]
['12', '34', '56', '78', '90', 'AB', 'CD', 'EF']
>>> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-01T03:21:08.053

```
>>> s = '1234567890ABCDEF'
>>> [char0+char1 for (char0, char1) in zip(s[::2], s[1::2])]
['12', '34', '56', '78', '90', 'AB', 'CD', 'EF'] 
```

但是，正如其他人所指出的，对于将十六进制数转换为字节的更普遍的问题，有更直接的解决方案。另请注意，Robert Kings 的解决方案通常更有效，因为它基本上具有零内存占用（以不那么易读的代码为代价）。

# android - onSuggestionClick 重新创建我的活动

> ID：14107585
> 
> 赞同：6
> 
> 时间：2013-01-01T03:05:40.563
> 
> 标签：android, searchview

在我的应用程序中，我使内容提供程序可搜索，将我的主要活动定义为清单上的默认搜索活动。

```
 <activity
            android:name="com.pt.application.MainActivity"
            android:label="@string/title_activity_map"
            android:launchMode="singleTop"
            android:theme="@style/AppTheme" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
            <intent-filter>
                <action android:name="android.intent.action.SEARCH" />
            </intent-filter>

            <meta-data
                android:name="android.app.searchable"
                android:resource="@xml/searchable" />
        </activity> 
```

然后我根据用户点击的建议实现了 onSuggestionClick 选项来更新地图。搜索视图位于操作栏上。问题是当用户点击一个建议时，以某种方式重新创建了活动（我认为 OnPause 和 OnResume 被调用了？）。有什么办法可以防止这种情况发生吗？我不希望每次用户单击建议时都“重新创建”我的活动。

如果需要更多代码，请询问。谢谢。

**编辑：添加代码**

```
 <?xml version="1.0" encoding="utf-8"?>
<searchable xmlns:android="http://schemas.android.com/apk/res/android" 
    android:label="@string/app_name"
    android:hint="@string/search_hint"
    android:voiceSearchMode="showVoiceSearchButton|launchRecognizer"
    android:voiceLanguageModel="web_search"
    android:searchSuggestAuthority="com.pt.provider"
    android:searchSuggestIntentData="content://com.pt.provider/busstop">
</searchable> 
```

关于我的主要活动：

```
 // Bind the Activity’s SearchableInfo to the Search View
            searchView = (SearchView)menu.findItem(R.id.menu_search).getActionView();
            this.setupSearchView();

    private void setupSearchView()
        {   
            // Use the Search Manager to find the SearchableInfo related
            // to this Activity.
            SearchManager searchManager =
                    (SearchManager)getSystemService(Context.SEARCH_SERVICE);
            SearchableInfo searchableInfo =
                    searchManager.getSearchableInfo(getComponentName());
            searchView.setSearchableInfo(searchableInfo);
            searchView.setSubmitButtonEnabled(false);

            searchView.setOnSuggestionListener(new OnSuggestionListener() {

                @Override
                public boolean onSuggestionSelect(int position) {

                    return false;
                }

                @Override
                public boolean onSuggestionClick(int position) {

                    // Do things

                    return false;
                }
            });
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T15:19:26.400

解决了我的问题。在清单上更改：

从：

```
android:launchMode="singleTop" 
```

到：

```
android:launchMode="singleTask" 
```

# ruby-on-rails - 使用 Rails 的 AJAX 中未显示 Create.js.erb

> ID：14107587
> 
> 赞同：0
> 
> 时间：2013-01-01T03:06:02.413
> 
> 标签：ruby-on-rails, ajax, jquery

我正在尝试让 AJAX 在我的 rails 应用程序中的表单上工作，并且大约完成了 75% 的工作。我有一个表格，一个人可以创建一个活动并用技能标记该活动。我想为他们提供在表单中创建新技能的能力。我可以用表格替换“创建新技能”链接，然后毫无问题地保存记录。我的问题是保存记录后，rails 不断将我重定向回我的主页，而不是返回到带有表单的页面。如果用户通过典型的 HTML 表单创建技能，则重定向是正常行为。

我的页面上的链接，用于创建变成表格的新技能：

```
<%= link_to "Create A New Skill", new_skill_path, :id => "new-skill-link", remote: true %> 
```

替换链接的新技能形态：

```
<%= form_for Skill.new, :remote => true do |f| %>
  <%= f.text_field :description %>
  <%= f.submit "Save", :class => 'btn-large btn-primary' %>
<% end %> 
```

我的技能控制器（新建和创建方法）：

```
def new
  @skill = Skill.new
  @tags = current_user.tags

  respond_to do |format|
    format.html
    format.js
  end
end

def create
  @skill = current_user.skills.new(params[:skill])
  params[:skill][:tag_ids] ||= []

  respond_to do |format|
    if @skill.save
      flash[:success] = "Skill was successfully created!"
      format.html { redirect_to home_page_url }
      format.js { render action: "create" }
    else 
      flash.now[:error] = "There was an error saving your skill."
      format.html { render action: "new" }
      format.js { render action: "new" }
    end
  end
end 
```

我的 new.js.erb：

```
$("#new-skill-link").hide().after('<%= j render("skills/remote_form") %>'); 
```

我的 create.js.erb：

```
$("#new-skill").remove();
$("#new-skill-link").show();
$(".skill-list ul").append('<%= j render(@skill) %>'); 
```

Rails 似乎将请求解释为 HTML，因此它使用 HTML 页面进行响应。我尝试添加`:format => :js`到技能表单中，但 rails 只是在我的浏览器中渲染了 javascript 而没有解释它。

当我查看 Web 服务器上的日志时，我没有看到任何错误。我得到：

```
Started POST "/skills" for 127.0.0.1 at 2012-12-31 20:02:16 -0700
Processing by SkillsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"xxxxx", "skill"=>{"description"=>"Example Skill"}, "commit"=>"Save"}
  User Load (62.8ms)  SELECT "users".* FROM "users" WHERE "users"."remember_token" = 'xxxxx' LIMIT 1
  (0.1ms)  begin transaction
  SQL (15.4ms)  INSERT INTO "skills" ("created_at", "description", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", Tue, 01 Jan 2013 03:02:16 UTC +00:00], ["description", "Example Skill"], ["updated_at", Tue, 01 Jan 2013 03:02:16 UTC +00:00], ["user_id", 1]]
  (1.4ms)  commit transaction
Redirected to http://localhost:3000/home_page
Completed 302 Found in 96ms (ActiveRecord: 79.7ms) 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T03:53:50.273

原因是，您不应该在 create 方法中进行重定向，因为 AJAX 请求在中间有点丢失（您可以通过 Firebug/FF 看到这一点）。

以下是示例代码：

例如：假设我有一个名为 project 的脚手架

```
projects_controller.rb

class ProjectsController < ApplicationController
  @project = Project.new(params[:project])
  if @project.save
      flash.now[:success] = ["#{@project.name} sucessfully created"]
  else
      flash.now[:errors] = @project.errors.full_messages 
  end
end 
```

在视图/项目中

```
_form.html.erb

<div id="message"></div>
<%= form_for @project :remote => true, :html => { :class => 'form-horizontal' } do |f| %>
  <%= f.text_field :name, :class => 'span3', :placeholder => "Project name" %> 
  <%= f.submit nil, :class => 'btn btn-success' %>
<% end %>

create.js.erb

$("#message").html("<%= escape_javascript raw(flash_display) %>");

in helper

module ApplicationHelper
  def flash_display
    response = "<div class='alert #{alert_class}'>"
    response += "<button type='button' class='close' data-dismiss='alert'>x</button>"
    flash.each do |name, msg|
      msg.each do |m|
        response = response + content_tag(:p, m)  
      end
    end
    response += "</div>"
    flash.discard
    response
  end

  private
  def alert_class
    css_class = case flash.first[0]
      when :errors then "alert-error"
      when :success then "alert-success" 
      when :notifications then "alert-block"   
    end
    css_class  
  end
end 
```

如您所见，我没有从我的创建方法重定向，保存后我只是传递状态消息。所以你的页面不会刷新，只会更新消息。

# c# - Castle Windsor 拦截注册类而不是组件

> ID：14107588
> 
> 赞同：2
> 
> 时间：2013-01-01T03:06:51.913
> 
> 标签：c#, castle-windsor

我刚刚学习 Castle Windsor 并尝试使用 AOP 解决一些问题，并希望使用拦截功能来完成此任务。

我已经弄清楚如何通过执行以下操作使其与单个组件一起使用。

```
container.Register(Component.For<IInterceptor>()
                .ImplementedBy<BankServiceLogger>()
                .Named("BankServiceInteceptor"));

            container.Register(Component.For<IBankService>()
                .ImplementedBy<BankService>()
                .Interceptors(InterceptorReference.ForKey("BankServiceInteceptor")).Anywhere
                .LifestyleTransient()); 
```

我的问题是像我在这里所做的那样注册控制器等类时

```
container.Register(Classes.FromThisAssembly()
                .BasedOn<IController>()                
                .LifestyleTransient()); 
```

似乎没有使用拦截器。

注册多个类时有没有办法进行拦截，或者我是否需要单独注册每个组件才能完成此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T06:35:21.777

上的`Configure`方法`BasedOnDescriptor`提供了这种能力（以及配置许多其他东西的能力），但是我刚刚意识到，因为`Configure`它的设计是为了让`Action<ComponentRegistration>`你不能调用`Anywhere`属性，`InterceptorGroup`所以拦截器不会被应用到组件登记。以下是我可以解决的最佳解决方法。

```
container.Register(Component.For<MyInterceptor>());
container.Register(Classes.FromThisAssembly()
    .BasedOn<IController>().WithService.FromInterface()
    .LifestyleTransient()
    //.Configure(c => c.Interceptors(InterceptorReference.ForType<MyInterceptor>()).Anywhere)
    .Configure(delegate(ComponentRegistration c) { var x = c.Interceptors(InterceptorReference.ForType<MyInterceptor>()).Anywhere; })
); 
```

# php - 高级访问控制库

> ID：14107597
> 
> 赞同：5
> 
> 时间：2013-01-01T03:09:35.180
> 
> 标签：php, javascript, node.js, acl, rbac

我有兴趣为用户执行高级访问控制以访问软件系统中的资源。我在医疗保健 IT 部门工作，年轻的我经常低估[医疗保健中基于角色的访问控制](http://healthcaresecprivacy.blogspot.com/2012/09/advanced-access-controls-to-support.html)的复杂性。但是这个问题应该适用于任何具有复杂 ACL 要求的人。

很长一段时间以来， [php gacl](http://phpgacl.sourceforge.net/)一直是我的首选库，用于处理 Health IT 系统中非常复杂的 ACL 控制问题。但我现在更多地使用一般的 javascript 和专门的节点。我已经在 npm 中搜索了库，以便以可概括的方式进行访问控制。

我希望支持定义操作而不仅仅是用户和资源（3 层而不是 2 层），并且我希望拥有用户、操作和资源组，并且暗示我希望拥有 ACL 继承。

[从《星球大战》主题手册](http://phpgacl.sourceforge.net/manual.pdf)到该库的经典示例是以下规则：

*   所有机组成员都可以（访问、配置和使用）进入枪支、发动机、驾驶舱和休息室，期待咀嚼。
*   所有机器人都可以（访问和使用）驾驶舱，但只有 R2D2 可以配置访问引擎。
*   Han 可以访问所有类型的资源。

这里的基本概念包括您可以制定适用于用户组（即机组人员、乘客或机器人）或个人（Han 和 Chewie）的规则，您可以拥有不同类型的访问权限（访问、配置、使用) 或访问组（维护访问 = 配置 + 维修 + 使用）对不同资源（发动机和驾驶舱）的访问也可以分组（战斗站 = 驾驶舱 + 枪支）。

这允许通过相对简单的基于组的管理来配置非常复杂的访问控制规则。

到目前为止，我在 php-gacl 之外还没有看到类似的东西。我查看了基于 javascript 的精彩 ACL 项目，所有这些项目都宣传简单易用，而不是全面。这也适用于其他典型的 php ACL 库（即[Zend ACL](http://framework.zend.com/manual/1.12/en/zend.acl.introduction.html)）

有人在为节点开发“高级 ACL”项目吗？我应该在某个地方寻找更好的方法吗？

php-gacl 包含三个部分，一个是基于 php 的管理 GUI（诚然过于复杂），一个用于 CRUD 规则的 API（我认为可以很容易地转换为 REST 接口）和一个非常小的提供 ACL 检查功能的文件。

从技术上讲，只有最后一种类型需要完全移植到节点才能使该软件模型工作？

在更深层次上，我想了解成功使用了哪些方法来处理这个问题。这个问题通常是如何解决的？对于那些根据节点/javascript甚至可能甚至是特定的数据库方法（关系与非关系）有效讨论此问题的人的奖励积分。我知道做这个正确/错误有很多理论基础（即对 RBAC 和 ACL 有很多意见）。我想要的是理论上可靠的东西，或者从图书馆的角度来看仍然“正常工作”的几乎可靠的东西。我专注于 Javascript，但很高兴了解其他语言实际上是如何解决这个问题的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T09:08:39.763

如果可以避免使用任何类型的 ACL，通常情况会更好。它们管理起来很复杂。您最好对三个级别的安全检查进行建模：

1.  URL/IP 地址/或其他接入点安全检查
2.  资源检查方法。无论您要修改或操纵什么实体，都对其进行权限检查。IE 业务规则类型的访问。
3.  实体资源检查。如果用户/API/OAuth 令牌完全可以访问实体

这可以使用 RBAC 来完成。您的组织/站点的每个角色都分配有一组访问/修改/操作权限。用户被分配了一个角色，但三个级别的检查检查的是权限，而不是角色。

我会将 Spring Security 和 RBAC 视为谷歌搜索，并以此为模型。以下是一些我发现有用的链接：

[http://www.xaprb.com/blog/2006/08/16/how-to-build-role-based-access-control-in-sql/](http://www.xaprb.com/blog/2006/08/16/how-to-build-role-based-access-control-in-sql/)

[http://www.xaprb.com/blog/2006/08/18/role-based-access-control-in-sql-part-2/](http://www.xaprb.com/blog/2006/08/18/role-based-access-control-in-sql-part-2/)

（因为 Spring Security 中的所有“原始”示例和疯狂命名的检查，建议您阅读提供替代名称使用的文章以及 Spring 权限“hasRole()”检查的用途。下面的文章在RBAC 的设计）

[http://springinpractice.com/2010/10/27/quick-tip-spring-security-role-based-authorization-and-permissions/](http://springinpractice.com/2010/10/27/quick-tip-spring-security-role-based-authorization-and-permissions/)

（关于灵活使用 Spring Security 的一个很好的演示，包括 RBAC）

[http://www.infoq.com/presentations/Spring-Security-3](http://www.infoq.com/presentations/Spring-Security-3)

（下面给出了 RBAC 问题和解决方案的 GOOD 描述，并且是为 PHP 设计的）

[http://www.tonymarston.net/php-mysql/role-based-access-control.html](http://www.tonymarston.net/php-mysql/role-based-access-control.html)

具有 RBAC 实现的 PHP 框架：

[http://trac.symfony-project.org/wiki/UserRbac](http://trac.symfony-project.org/wiki/UserRbac)

最后是 Spring Security 的类图。您会注意到，它允许将安全信息放在受保护实体的 PARALLEL 表中。这是设计使然，以便以后可以轻松添加、删除或替换 Spring Security。但这也意味着更多的桌子。

[http://code.google.com/p/uclm-esi-alarcos/source/browse/trunk/documentation/memoria-pfc/Figuras/Cap5/spring-security-class-diagram.png?r=295](http://code.google.com/p/uclm-esi-alarcos/source/browse/trunk/documentation/memoria-pfc/Figuras/Cap5/spring-security-class-diagram.png?r=295)

# c# - 方法执行顺序

> ID：14107606
> 
> 赞同：1
> 
> 时间：2013-01-01T03:13:22.327
> 
> 标签：c#, .net, visual-studio-2010, debugging, dll

A、B、C等有很多类。
在它们中的每一个中，都有一些方法：

```
class A {  
   void a1() { ...; }
   void a2() { ...; }
}
class B {  //dll
   void b1() { ...; }
   void b2() { ...; }
}
class C {  //dll
   void c1() { ...; }
   void c2() { ...; }
} 
```

A 类由我编写，B 类和 C 类是导入的 dll。

使用 AI 类可以设置断点来跟踪，但我不能使用 B 类和 C 类。
我的程序将包含数百个类，我想跟踪每个类中调用的顺序方法。
即使在dll中定义了方法，是否可以输出这种信息？

前任。a1 -> b2 -> c1 -> a2

补充：
特别是当一个dll方法调用另一个dll方法时。
在这种情况下，包装器将无济于事。
任何人？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T03:18:26.780

如果代码在没有源代码或调试符号的 DLL 中提供给您，则您的调试选项相当有限：您无法在没有源代码的情况下设置断点，除非您对反汇编感到满意。

解决此问题的一种方法是将外部代码包装在您自己的类中，如下所示：

```
class CWrap {
    private readonly C wrapped = new C();
    public void c1() {
        log.Info("Entering c1");
        wrapped.c1();
        log.Info("Entering c1");
    }
    public void c2() {
        log.Info("Entering c2");
        wrapped.c2();
        log.Info("Exiting c2");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T03:16:37.650

1.  多线程应用于方法，而不是类。

2.  启动线程后，顺序是不确定的。[线程顺序执行](https://stackoverflow.com/questions/10832702/thread-order-execution)

    ```
    var a = new A();  
    var b = new B();  
    var c = new C();

    new Thread(a.a1).Start();
    new Thread(b.b1).Start();
    new Thread(c.c1).Start(); 
    ```

    a1、b1、c1 没有明确的顺序。

3.  如果您愿意，可以使用 Tasks 流水线执行。

    ```
    Tasks.StartNew(()=> a.a1()).ContinueWith(_ => b.b1().ContinueWith(_=>c.c1); 
    ```

    它通过管道执行 a1、b1 和 c1。

    它利用[Tasks.ContinueWith](http://msdn.microsoft.com/en-us/library/dd270696.aspx)

> 即使在dll中定义了方法，是否可以输出这种信息？

是的，如果您指定[调试版本](http://haacked.com/archive/2004/02/14/difference-between-debug-vs-release-build.aspx)

# javascript - 用 JavaScript 制作游戏

> ID：14107607
> 
> 赞同：0
> 
> 时间：2013-01-01T03:14:27.023
> 
> 标签：javascript, math, game-engine

这实际上不必只在 JavaScript 中，而是在可以制作游戏的所有语言中。我只是不明白。我只是不明白这样的事情：

```
B.Gd = function () {
    var a = this.na,
        b = this.Hb(),
        c = this.ba || 1,
        d = c / a,
        e;
    if (this.b) {
        this.xb && this.xb.contains(b) && (e = Ka(this.xb.size()) / Ka(b.size())) && 1.6 > e && 0.5 < e ? b = this.xb : 1 != this.He && 0 != this.g.length && (this instanceof C || b.expand(12, 12, 12, 12));
        this.xb = b;
        var f = b.size();
        e = f.e()
            .scale(c)
            .ceil();
        if (this.b.width != e.width || this.b.height != e.height) this.b.width = e.width, this.b.height = e.height, this.Lb = 1;
        var g = this.C.e();
        this.m[D] && (g = this.m[D]);
        0 != e.width ? g.scale(f.width * d / e.width) : g.scale(1 / a);
        a = E(this);
        this.Vb = (a.left - b.left) * c;
        this.Wb = (a.top - b.top) * c;
        b = this.f()
            .e();
        a = this.Y;
        b.width *= a.x;
        b.height *= a.y;
        b = b.scale(c);
        c = this.d.e();
        this.m[F] && (c = this.m[F]);
        c.x *= d;
        c.y *= d;
        c.x -= b.width + this.Vb;
        c.y -= b.height + this.Wb;
        Oa(this.b, 100 * ((this.Vb + b.width) / e.width), 100 * ((this.Wb + b.height) / e.height), k);
        !this.T[F] && (!this.T[D] && !this.T[Pa]) && (d = -(this.J %= 360), s(this.m[Pa]) && (d = -this.m[Pa]), Qa(this.b, Ra(new Sa, 0.1)
            .translate(c.x, c.y)
            .scale(g.x, g.y)
            .rotate(d)));
        this.Lb && (d = this.b.getContext("2d"), c = this.ba || 1, d.clearRect(0,
        0, e.width, e.height), d.save(), d.translate(this.Vb, this.Wb), d.scale(c, c), e = this.f(), g = this.Y, d.translate(e.width * g.x, e.height * g.y), this.q.Zc.call(this, d), d.restore(), this.Lb = 0)
    }
}; 
```

最终会变成一场游戏。当我查看诸如以下游戏的源代码时，我总是感到惊讶：“http://www.limejs.com/static/zlizer/index.html”这是我从（http ://www.limejs.com/static/zlizer/zlizer.js）。我只想知道，有人能理解吗？谁能向我解释人们是如何写这种东西的？如果我要制作游戏，我将不知道如何开始。或者结束。

对于那些真正制作了需要数学的游戏的人来说，这更像是一个问题。

你们是怎么做到的？这太神奇了，看起来太难了。我不打算制作游戏，这只是我想知道的一个问题，我想要某种答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T03:18:12.457

这段代码可能没有那么复杂。我会假设代码已经过[混淆](http://en.wikipedia.org/wiki/Obfuscated_code)处理。作者不想让你看。

# css - 溢出选择突出显示

> ID：14107613
> 
> 赞同：5
> 
> 时间：2013-01-01T03:16:13.550
> 
> 标签：css, selection, highlighting

选择高亮溢出超出父元素的逻辑是什么？

在随附的屏幕截图中，顶部是我目前拥有的，底部是我想要实现的 Photoshop 模型。

在我看来，选择突出显示几乎是随机的。我无法找到任何明确的资源来解释是什么使选择突出显示以何种方式表现。

当想要保持选择突出显示合理时，在 CSS 和 DOM 方面我应该记住什么？

![选择溢出示例](../Images/fb22bd632f343ebace9735101986f57a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T03:35:20.657

~~有趣的是，我想知道为什么 SO 没有这样的东西，所以从问题/答案中复制代码更容易。~~

实际上，SO 确实在`<code>`依赖于`overflow: auto;`. `<blockquotes>`没有包含突出显示。

无论如何，似乎有几种方法可以解决这个问题（不过，我相信可能还有更多）。使用以下 CSS 规则之一将文本突出显示限制为特定元素。

*   `overflow: hidden;`或者`overflow:auto;`
*   `position: relative;`
*   `float:left;`或者`float:right;`

下面的工作示例显示了所有四种工作方法。根据您的需要，有些更容易使用。

**工作示例：http:** [//jsfiddle.net/TFvYu/4/](http://jsfiddle.net/TFvYu/4/)

**来源**

*   [CSS文本选择颜色溢出框外](https://stackoverflow.com/questions/8463244/css-text-selection-color-overflows-outside-box)
*   [HTML/CSS 如何防止在谷歌浏览器中突出显示文本跨越整个页面宽度](https://stackoverflow.com/questions/8239129/html-css-how-to-prevent-highlighting-text-from-spanning-entire-width-of-page-in)

# php - laravel 无法渲染变量

> ID：14107615
> 
> 赞同：0
> 
> 时间：2013-01-01T03:17:44.457
> 
> 标签：php, syntax, laravel

我一直在寻找谷歌和堆栈溢出，但我找不到有这个问题的人。据我所知，我不能使用 Blade 变量 {{ $likethis }} 或者我正在创建的布局中出现渲染问题。除了双括号变量之外的所有内容都适用于布局等。这是一些代码：

传递的变量是'title'。

```
<?php 

class Add_Controller extends Base_Controller {
    public $restful = true;

    public function get_recipe(){
        return View::make('add.recipe', array('title' => 'Add A Recipe'));
        // I've also tried with() and others.
    }
} 
```

布局：

```
<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title>{{ $title }}</title>
    <link rel="stylesheet" href="{{ URL::to('css/style.css') }}">
    <link href='http://fonts.googleapis.com/css?family=Libre+Baskerville|Domine|Donegal+One' rel='stylesheet' type='text/css'>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script src="{{ URL::to('js/functions.js') }}"></script>
</head>
<body>
    @yield('content')
</body>
</html> 
```

食谱页面：

```
@layout('layouts.default')
@section('content')
    <div id="wrapper">
        <header><div id="icon"></div></header>
        <div id="create">
            <div class="inline">
                <input type="text" id="title" name="title" value="Title">
            </div>
            <div>
                <label for="serving">Servings</label>
                <input type="text" name="serving" id="serving" value="2">
            </div>

            <div id="ingredients">
                <div class="ingredient">
                    <div class="inline">
                        <input type="text" class="name" name="name" value="Ingredient">
                    </div>
                    <div class="inline">
                        <input type="text" class="amt" name="amount" value="0">
                    </div>
                    <div class="inline">
                        <select name="unit" class="unit">
                            <option value="lb">Pounds</option>
                            <option value="oz">Ounces</option>
                        </select>
                    </div>
                    <div class="inline">
                        <div class="add-ingr">&#43</div>
                    </div>
                </div>
            </div>
            <input type="button" id="create" name="create" value="Create">
        </div>
    </div>
@endsection 
```

我得到的错误：

```
Unhandled Exception
Message:

Error rendering view: [layouts.default]

Undefined variable: title

Location:

/home/daevskii/public_html/websites/sbr/storage/views/9e4501d6d0479b217301c46cfb8cbcfd on line 5

Stack Trace:

#0 /home/daevskii/public_html/websites/sbr/laravel/laravel.php(42): Laravel\Error::native(8, 'Undefined varia...', '/home/daevskii/...', 5)
#1 /home/daevskii/public_html/websites/sbr/laravel/view.php(386) : eval()'d code(5): Laravel\{closure}(8, 'Undefined varia...', '/home/daevskii/...', 5, Array)
#2 /home/daevskii/public_html/websites/sbr/laravel/view.php(386): eval()
#3 /home/daevskii/public_html/websites/sbr/laravel/blade.php(71): Laravel\View->get()
#4 [internal function]: Laravel\{closure}(Object(Laravel\View))
#5 /home/daevskii/public_html/websites/sbr/laravel/event.php(199): call_user_func_array(Object(Closure), Array)
#6 /home/daevskii/public_html/websites/sbr/laravel/event.php(138): Laravel\Event::fire('laravel.view.en...', Array, true)
#7 /home/daevskii/public_html/websites/sbr/laravel/view.php(348): Laravel\Event::until('laravel.view.en...', Array)
#8 /home/daevskii/public_html/websites/sbr/laravel/view.php(386) : eval()'d code(36): Laravel\View->render()
#9 /home/daevskii/public_html/websites/sbr/laravel/view.php(386): eval()
#10 /home/daevskii/public_html/websites/sbr/laravel/blade.php(71): Laravel\View->get()
#11 [internal function]: Laravel\{closure}(Object(Laravel\View))
#12 /home/daevskii/public_html/websites/sbr/laravel/event.php(199): call_user_func_array(Object(Closure), Array)
#13 /home/daevskii/public_html/websites/sbr/laravel/event.php(138): Laravel\Event::fire('laravel.view.en...', Array, true)
#14 /home/daevskii/public_html/websites/sbr/laravel/view.php(348): Laravel\Event::until('laravel.view.en...', Array)
#15 /home/daevskii/public_html/websites/sbr/laravel/view.php(590): Laravel\View->render()
#16 /home/daevskii/public_html/websites/sbr/laravel/response.php(246): Laravel\View->__toString()
#17 /home/daevskii/public_html/websites/sbr/laravel/laravel.php(180): Laravel\Response->render()
#18 /home/daevskii/public_html/websites/sbr/public/index.php(34): require('/home/daevskii/...')
#19 {main} 
```

*** @package Laravel * @version 3.2.12**

如果我取出 {{ $title }}，我不会出错......但是我也没有使用变量：-\ 提前谢谢！

**[ANSWER]** 我有一个路由问题没有在这里发布，但答案在我发的这个 laravel 论坛帖子中：[http ://forums.laravel.com/viewtopic.php?pid=23383#p23383](http://forums.laravel.com/viewtopic.php?pid=23383#p23383)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T06:40:38.590

问题出在其他地方-不在上面发布的代码中。我刚刚将您的整个代码复制并粘贴到全新安装的 Laravel 3.2.12 中——它工作正常；

![截屏](../Images/bf716b56fc7be8846bc5fbcf110480f1.png)

因此 - 如果我是你 - 我会重新下载当前的 Laravel 3.2.12，看看你是否可以复制并粘贴上面的代码以使其工作。如果它确实有效，那么您的其他“安装”会以某种方式被窃听。如果它不起作用，那么您的开发服务器有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T03:52:17.947

我相信您传递的变量仅适用于该视图而不是布局。如果要将变量传递给模板，请查看视图作曲家。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T06:37:32.027

您将需要使用 $this->layout->title ='something'; 在返回视图之前在您的控制器中。

# iphone - 如何从 ftp 服务器下载和显示图像

> ID：14107619
> 
> 赞同：1
> 
> 时间：2013-01-01T03:18:34.983
> 
> 标签：iphone, objective-c, ios, ipad, ftp

（xCode 和编程新手）我正在尝试从 ftp 服务器连接/下载/保存到变量并在 UIImageView 中显示图像。代码如下。任何帮助建议将不胜感激。

```
- (void)viewDidLoad
{
    //sets label to notify user whats happening
    NSMutableString *labelString;
    labelString = [NSMutableString stringWithString: @"Connecting"];
    [labelDymamic setText: labelString];

    //variable for ftp location
    NSString *ftpLocation = [NSString stringWithFormat:@"ftp2.bom.gov.au/anon/sample/gms/IDE00003.201011170430.gif"];
    //variable to recieve data
    NSMutableData *responseData;

    //loads ftpLocation into url
    NSURL *url = [NSURL URLWithString:ftpLocation];

    //sets label to notify user whats happening
    NSMutableString *labelStringDownloading;
    labelStringDownloading = [NSMutableString stringWithString: @"Downloading"];
    [labelDymamic setText: labelStringDownloading];

    //Connect to ftp
    self.ftpImageView.image = [UIImage imageNamed:@"Icon.png"];
    self.labelDymamic.text = @"Receiving";
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    (void) [[NSURLConnection alloc] initWithRequest: request delegate:self];

    //download image

    //save to variable

    //display to screen

    //sets label to notify application loading complete
    NSMutableString *labelLoadedString;
    labelLoadedString = [NSMutableString stringWithString: @"Radar"];
    [labelDymamic setText: labelLoadedString];

    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

} 
```

目前显示的只是一个带有 labelLoadedString 变量“Radar”的白屏。

谢谢艾伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T03:35:55.000

您的网址错误，缺少 SCHEME: ftp://

* * *

至于下载：

```
NSURLRequest *request = [NSURLRequest requestWithURL:url];

//download
[NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse * r, NSData * d, NSError * e) {
    //save
    UIImage *img = [[UIImage alloc] initWithData:d];

    //display
    self.imageView.image = img;

    //sets label to notify application loading complete
    NSMutableString *labelLoadedString;
    labelLoadedString = [NSMutableString stringWithString: @"Radar"];
    [labelDymamic setText: labelLoadedString];
}]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T03:40:57.853

修复您的 URL（如前所述似乎不正确）后，检查 AFNetworking（请参阅[https://github.com/AFNetworking/AFNetworking](https://github.com/AFNetworking/AFNetworking)）。在处理从远程位置（例如通过 http、https、ftp 等）加载图像时，有一个类别`UIImage`将使您的生活更轻松；）

这是他们概述中的一个示例：

```
UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(0.0f, 0.0f, 100.0f, 100.0f)];
[imageView setImageWithURL:[NSURL URLWithString:@"http://i.imgur.com/r4uwx.jpg"] placeholderImage:[UIImage imageNamed:@"placeholder-avatar"]]; 
```

# css - Div 内的 TinyMCE 工具栏 CSS

> ID：14107624
> 
> 赞同：0
> 
> 时间：2013-01-01T03:19:53.050
> 
> 标签：css, html, tinymce, containers, toolbar

我正在为多个容器创建一个 TinyMCE 工具栏并将其固定在所有容器区域的顶部，在一个 div 包装器内，但我发现工具栏的整个 CSS 在包装后丢失了。它看起来只是超链接网址。无论如何我可以将CSS（Ui.css）链接应用到div内的工具栏或任何其他解决方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T11:29:08.503

您需要将 css 应用到您的主页（即您的工具栏所在的位置）。

# cross-browser - Web 浏览器加载 ttf 文件而不是 woff 文件

> ID：14107632
> 
> 赞同：2
> 
> 时间：2013-01-01T03:22:24.423
> 
> 标签：cross-browser, font-face, truetype, woff

我在 @font-face CSS 设置中加入了 True Type 字体，以便 Android 浏览器可以显示特定的网络字体：

```
@font-face {
  font-family: 'GNU FreeMono';
  font-style: normal;
  font-weight: 400;
  src: url('fonts/GNU_FreeFont/FreeMono.woff') format('woff');
  src: url('fonts/GNU_FreeFont/FreeMono.ttf') format('truetype');
} 
```

但是，这种包含会导致其他浏览器（Google Chrome、Firefox 等）下载`.ttf`文件而不是压缩`.woff`文件。颠倒顺序`src`会导致安卓浏览器无法显示网页字体。这似乎违背了拥有该`.woff`文件的目的。

CSS有没有办法让非Android浏览器同时使用该`.woff`文件并支持Android的使用`.ttf`？

# navigation - Zurb Foundation 粘性导航栏

> ID：14107633
> 
> 赞同：4
> 
> 时间：2013-01-01T03:22:41.287
> 
> 标签：navigation, pug, sticky, zurb-foundation

所以我使用了`.top-bar`zurb 基础框架中的默认类，但是我没有找到一种简单的方法来使导航栏“粘性”（在用户滚动时跟随用户），例如您可以使用 Twitter 引导程序。

这是我的代码，我正在使用玉：

```
nav.top-bar
  ul
    li.name
      h1
        a(href='#') Site Title
    li.toggle-topbar
      a(href='#')

  section
    ul.left
      li.divider
      li
        a.active(href='#') Link
      li.divider
      li
        a.active(href='#') Link
      li.divider
      li
        a.active(href='#') Link
      li.divider
      li
        a.active(href='#') Link
      li.divider
  section
    ul.right
      li.divider
      li.has-dropdown
        a.active(href='#') Log in 
```

我在这里错过了一些完全明显的东西吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-03T15:21:47.243

从文档页面： http: [//foundation.zurb.com/docs/navigation.php](http://foundation.zurb.com/docs/navigation.php)

**定位酒吧**

顶栏是用一个带有顶栏类的导航元素构建的。默认情况下，它将采用完整的浏览器宽度。要使顶部栏在滚动时保持固定，请将其包装在 div 中**`class="fixed"`**。如果您希望将导航设置为网格宽度，请将其包装在 div class="contain-to-grid" 中。您可以一起使用固定和包含网格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-21T07:30:13.487

你也可以给它一个“ **sticky** ”类，让菜单位于页面的任何位置，当它到达顶部时，它会粘住并跟随。

> 您也可以将顶部栏包裹在 div class="contain-to-grid sticky" 中，并将其放在标记中的任何位置。当导航到达浏览器顶部时，它将像固定的顶部栏一样，并随着用户继续滚动而粘在顶部。 [链接到源](http://foundation.zurb.com/docs/components/top-bar.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-20T11:34:31.967

为了让你的 .top-bar 工作顺利，你需要用单独的 div 包装它，比如

```
<div class="sticky">
 <div class="contain-to-grid">
  <nav>
   ...
  </nav>
 </div>
</div> 
```

我发现这适用于我调整大小的浏览器和 iphone Chrome。

# jquery - 如何使用 JQuery addClass 覆盖嵌入的样式？

> ID：14107636
> 
> 赞同：0
> 
> 时间：2013-01-01T03:23:26.673
> 
> 标签：jquery, styles, jquery-validate, addclass

我的页面中有一个嵌入样式，用于设置表单中所有文本框的样式：

```
<style type="text/css">
input[type=text], [type=password] {
    border: 1px solid black; 
    font-family: Verdana, Arial, Georgia, 'Trebuchet MS', 'Times New Roman';
    font-size: 12px;
    height: 15px;
    margin: 0px;
    padding: 3px;
}

.invalidinput {
    border: 1px solid red; 
}
</style> 
```

我还使用 JQuery Validation 来验证我的表单，我基本上想在出现错误时将表单中文本框的边框颜色从黑色更改为红色。为此，我有类“.invalidinput”，我使用 .addClass 将其添加到“highlight”部分的文本框中，并使用 .removeClass 将其删除到“unhighlight”之一：

```
<script type="text/javascript">
$(document).ready(function() {
    $("#frmLogin").validate({
        rules: { 
            txtUsername: "required",
            txtPassword: "required"
        },
        messages: { 
            txtUsername: "Enter your username",
            txtPassword: "Enter your password" 
        },
        highlight: function (element, errorClass, validClass) {
            $(element).addClass("invalidinput");
        },
        unhighlight: function (element, errorClass, validClass) {
            $(element).removeClass("invalidinput");
        },
        errorPlacement: function (error, element){
            if (element.attr("id") == "txtUsername") {
                $(error).appendTo($("label[for='txtUsername']"));
            }
            else if (element.attr("id") == "txtPassword") {
                $(error).appendTo($("label[for='txtPassword']"));
            }
            else {
                error.insertAfter(element);
            }
        }
    }); 
}); 
</script> 
```

问题是 .addClass 和 .removeClass 不起作用。经过数小时的搜索和尝试，我发现问题出在我用来设置页面中所有文本框样式的嵌入样式（input[type=text]，[type=password] {}）。如果我将其删除或将其更改为命名类（如 .validinput { }），那么它就可以正常工作。我能够开始工作的唯一解决方法是使用这个：

```
"$(element).css("border", "1px solid red");" 
```

而不是这个：

```
$(element).addClass("invalidinput"); 
```

我的问题是，如何使 .addClass 与我的嵌入式样式一起使用？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T03:25:47.380

这不起作用的原因是因为特异性。选择器`input[type=text]`比`invalidinput`选择器更具体。

这应该有效：

```
[type=text], [type=password] {
    border: 1px solid black; 
    /* other styles... */
}

.invalidinput {
    border: 1px solid black; 
} 
```

或者只是将`input`选择器添加到它们中：

```
input[type=text], input[type=password] {
    border: 1px solid black; 
    /* other styles... */
}

input.invalidinput {
    border: 1px solid black; 
} 
```

# c# - 在 C# Web 表单中以编程方式更改标签文本

> ID：14107638
> 
> 赞同：1
> 
> 时间：2013-01-01T03:24:56.550
> 
> 标签：c#, label

我一遍又一遍地搜索互联网，这似乎很简单，但不知何故它不起作用。

我正在尝试在 C# 中创建一个 Web 表单应用程序。Button1 应该从网站下载大量数据，我希望 Label1 在 Button1 中的代码运行时显示“正在下载”，并在代码完成后“完成”，但 Label1 在按钮单击后根本没有改变。

代码如下：

```
protected void Button1_Click(object sender, EventArgs e)
        {
            Label1.Text = "downloading";
            //code for downloading data
            Label1.Text = "done";
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T03:30:45.030

那是行不通的。这就是所有服务器端代码。直到 Button1_Click 处理程序完成执行后，更新的 HTML 才会发送回浏览器。所以浏览器只会看到“完成”标签文本。永远不要“下载”文本。

达到您想要的效果的最简单方法是在提交表单之前使用客户端javascript（可能使用jquery）将标签文本更新为“正在下载”。您可以将客户端 javascript 放在 asp.net 按钮的 OnClientClick 属性中。然后，服务器端代码可以下载数据并将标签文本更改为完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-15T10:48:41.873

我不知道这是否仍然有用，因为这篇文章已经很老了，但是我在寻找自己问题的答案时偶然发现了这个问题。

更改标签文本后，只需使用 Label1.Update() 函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-31T08:41:15.853

如果您想将文本从*下载*更改为*完成，*那么您可以这样做：

```
Label lbl = (Label)this.FindControl("Label1");
                    if (lbl != null)
                    {
                        lbl.Text =  "done";
                    } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-11-12T12:13:36.683

```
protected void Button1_Click(object sender, EventArgs e)
{
    Label1.Text = "downloading";
    //code for downloading data
    Label1.Text = "done";
    Label1.Refresh;
} 
```

# .net - 在 IIS 7.5 中获取已部署的 MVC 页面。从命令行运行批处理文件

> ID：14107642
> 
> 赞同：2
> 
> 时间：2013-01-01T03:25:51.250
> 
> 标签：.net, command-line, batch-file, iis-7.5, web-deployment

对于我的一个项目，我需要将 .NET 页面与对 MATLAB 进程的外部调用集成。为了做到这一点（并且不花任何钱），我创建了一个批处理文件，由 .NET 页面本身（ASP.NET MVC 3，如果有的话）调用，它基本上包含一行——即启动 MATLAB 并运行此过程。

该过程的结束本身会将信息吐出到一个文本文件中，然后关闭 MATLAB。当 .NET 页面看到文件已创建时，它会抓取它并根据在该文件中找到的数据进行一些计算。这个过程在我的本地机器上运行良好，当我从服务器上的 VS 2012（调试模式）运行它时。

有趣的部分来自于部署这个站点。我已经成功地将我的网站部署到互联网上，*除了*这个过程之外，它上面的一切都运行良好。它似乎根本没有运行。包含此批处理文件的目录附加了所有必要的权限（IUSR 和 IIS_IUSRS），但似乎根本没有运行。

谁能告诉我如何让这个批处理文件在 IIS 7.5 上托管的网页中正常运行？是的，我确实知道这不是安全方面最好的想法，但我只需要完成这件事。

编辑：这是调用该过程的代码：

```
var matlabProcess = new Process {
    StartInfo = {
        FileName = "C:\\Program Files\\MATLAB\\R2012a\\bin\\WebCall.bat", 
        Arguments = string.Format("{0} {1}", seeds, weights)
    }
};

matlabProcess.Start(); 
```

批处理文件包含以下内容：

```
cd\
cd progra~1\MATLAB\r2012a\bin
start matlab -nosplash -nodesktop -minimize -r WebCall(%1,%2) 
```

编辑：我的一个朋友建议这失败的原因是因为 IIS 上没有批处理文件的处理程序，因此 IIS 甚至不知道如何运行该文件。如果是这样，那么有人可以告诉我如何创建正确的处理程序映射，以便我可以查看他的解决方案是否正确？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T00:37:22.510

64位操作系统？如果是这样，也许您正在进行一些重定向。如果它是 32 位应用程序，您应该指定 %ProgramFiles(x86)%。最好检查并使用适当的，以便它可以在 32 位或 64 位上运行。

您是否从 UNC 位置执行（在某些较新的操作系统上需要考虑，并且在 Win 8 和 2012 服务器上可能不可行）？

将此作为 bat 文件中的第一条语句：

```
echo.CD=%cd% & pause 
```

# javascript - 为什么 [object Casper].test 未定义？

> ID：14107644
> 
> 赞同：1
> 
> 时间：2013-01-01T03:27:06.537
> 
> 标签：javascript, testing, integration-testing, phantomjs, casperjs

我正在评估 CasperJS 在 Windows 下的测试 API。不幸的是，Casper 对象的 test 属性始终未定义。

运行以下脚本会打印“this.test is undefined”：

```
phantom.casperPath = 'D:\\GitHubSources\\casperjs';
phantom.injectJs(phantom.casperPath + '\\bin\\bootstrap.js');

var casper = require('casper').create();

casper.start('http://localhost:56679/index.html', function(){
    this.echo('this.test is ' + this.test);
});

casper.run(function(){
    this.exit();
}); 
```

有什么提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T15:52:50.757

因为您似乎使用的是 1.1 分支，该分支具有向后不兼容的更改；如[分支更改日志中所述](https://github.com/n1k0/casperjs/blob/master/CHANGELOG.md#important-changes--caveats)：

> [如果不使用command](http://casperjs.org/testing.html#casper-test-command)调用Casper 对象，则不会`test`使用引用创建，因此在不调用它的情况下运行任何测试的能力已被删除。我知道，克服它。[`casperjs test`](http://casperjs.org/testing.html#casper-test-command)

PS：我实际上正在考虑将`master`分支标记为 2.0

# python - 为文件中的每一行调用函数的单行代码

> ID：14107648
> 
> 赞同：-6
> 
> 时间：2013-01-01T03:29:24.017
> 
> 标签：python, file-io

我需要继续调用`sync`每一行，`file.txt`直到函数返回非零（即它失败时）。目前我计划做以下事情。

```
for line in file("file.txt"):
        change=int(line)
        cp_success=sync(change) #check the return value of function sync
        if cp_success!=0 : 
            break               #Try using a break statement 
```

有没有更好的方法或单线？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T03:42:32.283

好吧，几乎在一行中（如果您允许我导入[itertools 模块](http://docs.python.org/2/library/itertools.html#itertools.takewhile)）：

```
[ x for x in itertools.takewhile(
    lambda line: sync(line) == 0,    # <- predicate
    open("file.txt")) ]              # <- iterable 
```

不带文件的示例：

```
>>> import itertools
>>> def sync(n):
...   if n == 3: return -1 # error
...   return 0

>>> lines = [1, 2, 3, 4, 5, 6]
>>> [ x for x in itertools.takewhile(lambda x: sync(x) == 0, lines) ]
[1, 2] 
```

但是你真的不应该掩盖事情，所以为什么不只是：

```
with open("file") as fh:
    for line in fh:
        if not sync(int(line)) == 0:
            break 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-01T03:40:03.983

```
with open(...) as fp: any(sync(line) for line in fp) 
```

# c# - 如何正确地将我的 Ienumerable<> 或 List<> 对象传递给我的 post 操作？

> ID：14107649
> 
> 赞同：1
> 
> 时间：2013-01-01T03:29:31.503
> 
> 标签：c#, asp.net-mvc, razor

我显然做错了什么，但我似乎无法弄清楚。我正在尝试将对象列表传递给我的后操作控制器，但我得到的**对象引用未设置为对象的实例。**提交表单时出错。我使用提琴手来验证请求确实包含对象，但它没有进入发布操作。

我的模型：

```
public class MakeNbaPickVm
{

    public List<NbaGamesForPicksVm> NbaGames { get; set; }

    public pick_UserPicks Pick { get; set; }

    public bool PickSpreadIsFavAway { get; set; }
    public bool PickSpreadIsFavHome { get; set; }
    public bool PickSpreadIsDogAway { get; set; }
    public bool PickSpreadIsDogHome { get; set; }
    public bool OUpickIsOVer { get; set; }
    public bool OUpickIsUnder { get; set; }
    public decimal LineOdds { get; set; }
    public decimal OuOdds { get; set; }
    public decimal LineBet { get; set; }
    public decimal OuBet { get; set; }
    public int MatchId { get; set; }
} 
```

我的视图显示正常：

```
@model IEnumerable<MakeNbaPickVm>

@{
ViewBag.Title = "Make Nba Picks";
}

<h2>Make Nba Picks</h2>

@using(Html.BeginForm("MakeNbaPick", "Picks", FormMethod.Post))
{
<table class="PickTable">
    <tr>
        <th>Game Date</th>
        <th>Away</th>
        <th>Away Line</th>
        <th>Over/Under</th>
        <th>Home</th>
        <th>Home Line</th>
        <th>O/U Odds</th>
        <th>O/U Bet</th>
        <th>Line Odds</th>
        <th>Line Bet</th>
    </tr>
    @{
        int modLevel = 0;
    }
    @foreach(var game in Model)
    {
        foreach (var match in game.NbaGames)
        {
            @Html.HiddenFor(x => x.ElementAt(modLevel).MatchId, new {@Value = 
       match.Game.Id})
            <tr>
                <td>@match.Game.GameDateTime.Value.ToShortDateString() 
                    @match.Game.GameDateTime.Value.ToShortTimeString()
                </td>
                <td>@match.Away</td>
                @if(match.Game.Away == match.Game.FavoriteTeam)
                {
                    <td>
                        @match.Game.FavoriteSpread<br/> @Html.CheckBoxFor(x => 
                                                                          x.ElementAt(modLevel)
                                                                          .PickSpreadIsFavAway)
                    </td>
                }
                else
                {
                    <td>
                        @match.Game.UnderDogSpread<br/> @Html.CheckBoxFor(x => 
                                                                          x.ElementAt(modLevel)
                                                                          .PickSpreadIsDogAway)
                    </td>
                }
                <td>
                    @match.Game.OverUnder<br/> Over @Html.CheckBoxFor(x => 
                                                                      x.ElementAt(modLevel)
                                                                          .OUpickIsOVer)<br/>
                    Under @Html.CheckBoxFor(x => x.ElementAt(modLevel)
                                                     .OUpickIsUnder)
                </td>
                <td>@match.Home</td>
                @if(match.Game.Home == match.Game.FavoriteTeam)
                {
                    <td>
                        @match.Game.FavoriteSpread<br/> @Html.CheckBoxFor(x => 

                                                  x.ElementAt(modLevel).PickSpreadIsFavHome)
                    </td>
                }
                else
                {
                    <td>
                        @match.Game.UnderDogSpread<br/> @Html.CheckBoxFor(x => 
                                                                          x.ElementAt(modLevel)

                                                                         .PickSpreadIsDogHome)
                    </td>
                }
                <td>@Html.TextBoxFor(x => x.ElementAt(modLevel).OuOdds, 
                                     new {@class="PickOddsBet"})</td>
                <td>@Html.TextBoxFor(x => x.ElementAt(modLevel).OuBet,
                                     new {@class="PickOddsBet"})</td>
                <td>@Html.TextBoxFor(x => x.ElementAt(modLevel).LineOdds,
                                     new {@class="PickOddsBet"})</td>
                <td>@Html.TextBoxFor(x => x.ElementAt(modLevel).LineBet,
                                     new {@class="PickOddsBet"})</td>
            </tr>
            modLevel++;
        }

    }
</table>

<input type="submit"/>
} 
```

和我的 post 操作，它在 foreach 语句中返回错误：

```
[HttpPost]
    public ActionResult MakeNbaPick(List<MakeNbaPickVm> vM)
    {
        // Save the picks to db
        foreach (var pickVm in vM)
        {
           // code doesn't make it this far
        }

        return RedirectToAction("Games");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T04:06:14.353

为了使模型绑定正确发生，文本框的名称需要采用正确的格式。

我认为您正在寻找以下内容： [ASP.NET MVC POST 中的 Modelbinding IEnumerable？](https://stackoverflow.com/questions/8832888/modelbinding-ienumerable-in-asp-net-mvc-post)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T12:37:59.393

好的，这是我的问题的解决方案。ajp，你指出了我正确的方向。我必须将一个列表而不是一个 IEnumerable 返回到视图中，这样我才能访问索引 []。这是我更新的视图代码：

```
@model List<MakeNbaPickVm>

@{
ViewBag.Title = "Make Nba Picks";
}

<h2>Make Nba Picks</h2>

@using(Html.BeginForm("MakeNbaPick", "Picks", FormMethod.Post))
{
<table class="PickTable">
    <tr>
        <th>Game Date</th>
        <th>Away</th>
        <th>Away Line</th>
        <th>Over/Under</th>
        <th>Home</th>
        <th>Home Line</th>
        <th>O/U Odds</th>
        <th>O/U Bet</th>
        <th>Line Odds</th>
        <th>Line Bet</th>
    </tr>
    @{
        int modLevel = 0;
    }
    @foreach(var game in Model)
    {
        foreach (var match in game.NbaGames)
        {
            @Html.HiddenFor(x => x[modLevel].MatchId, new {@Value = 
       match.Game.Id})
            <tr>
                <td>@match.Game.GameDateTime.Value.ToShortDateString() 
                    @match.Game.GameDateTime.Value.ToShortTimeString()
                </td>
                <td>@match.Away</td>
                @if(match.Game.Away == match.Game.FavoriteTeam)
                {
                    <td>
                        @match.Game.FavoriteSpread<br/> @Html.CheckBoxFor(x => 
                                                                          x[modLevel]
                                                                          .PickSpreadIsFavAway)
                    </td>
                }
                else
                {
                    <td>
                        @match.Game.UnderDogSpread<br/> @Html.CheckBoxFor(x => 
                                                                          x[modLevel]
                                                                      .PickSpreadIsDogAway)
                    </td>
                }
                <td>
                    @match.Game.OverUnder<br/> Over @Html.CheckBoxFor(x => 
                                                                      x[modLevel]
                                                                          .OUpickIsOVer)<br/>
                    Under @Html.CheckBoxFor(x => x[modLevel]
                                                     .OUpickIsUnder)
                </td>
                <td>@match.Home</td>
                @if(match.Game.Home == match.Game.FavoriteTeam)
                {
                    <td>
                        @match.Game.FavoriteSpread<br/> @Html.CheckBoxFor(x => 
                                                                x[modLevel].PickSpreadIsFavHome)
                    </td>
                }
                else
                {
                    <td>
                        @match.Game.UnderDogSpread<br/> @Html.CheckBoxFor(x => 
                                                                          x[modLevel]
                                                                       .PickSpreadIsDogHome)
                    </td>
                }
                <td>@Html.TextBoxFor(x => x[modLevel].OuOdds, 
                                     new {@class="PickOddsBet"})</td>
                <td>@Html.TextBoxFor(x => x[modLevel].OuBet,
                                     new {@class="PickOddsBet"})</td>
                <td>@Html.TextBoxFor(x => x[modLevel].LineOdds,
                                     new {@class="PickOddsBet"})</td>
                <td>@Html.TextBoxFor(x => x[modLevel].LineBet,
                                     new {@class="PickOddsBet"})</td>
            </tr>
            modLevel++;
        }

    }
</table>

<input type="submit"/>
} 
```

# c++ - 如何检查三个值是全0还是全1

> ID：14107654
> 
> 赞同：2
> 
> 时间：2013-01-01T03:31:24.673
> 
> 标签：c++

有 3 个整数变量的值可以为 0 或 1。如果全部为 0 或全部为 1，则打印特定语句。对于所有其他值组合，打印另一条语句。

我尝试了以下有效的方法。有没有更好的方法来编写 if 语句？

```
#include <iostream>
using namespace std;

int main()
{
    int a, b, c;
    cin >> a >> b >> c;

    if(!(a != 0 && b != 0 && c != 0) && !(a == 0 && b == 0 && c == 0))
    {
        cout << "a, b or c have mixed values of 1 and 0" << endl;
    }
    else
    {
        cout << "All of a, b and c are either 1 or 0" << endl;
    }

    system("pause");
    return 0;
} 
```

很抱歉造成了一些混乱。实际上，上面的代码中没有检查 a、b 和 c 的值，因为我把它作为一个简单的例子。if 语句不是检查 a、b 和 c 是否都相等。它是检查它们是否都是 0 或 1 整数值（不是布尔值）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-01T03:34:22.927

在您的代码中，对用户输入的值没有限制。

如果您只想查看所有值是否彼此相等，您可以执行以下操作：

```
if (a == b && b == c)
{
    cout << "A, B, and C are all equal" << endl;
}
else 
{
    cout << "A, B, and C contain different values" << endl;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-01T03:34:50.513

```
if( ((a & b & c) ==1) || ((a | b | c) == 0)) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-01T03:36:12.783

```
#include<iostream>
using namespace std;

int main()
{
int a = 10, b = 10, c = 10;
cin >> a >> b >> c;

if((a == 0 && b == 0 && c == 0)||(a==1&&b==1&&c==1))
{
      cout << "All of a, b and c are either 1 or 0" << endl;

}
else
{
cout << "a, b or c have mixed values of 1 and 0" << endl;
}

system("pause");
return 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-01T03:40:21.833

```
if( (b!=c) || (a ^ b)) 
{   
  std::cout << "a, b or c have mixed values of 1 and 0" << std::endl;
}   
else
{   
  std::cout << "All of a, b and c are either 1 or 0" << std::endl;
} 
```

另一种效率较低的方法：

```
if( (a!=0) + (b!=0) - 2 * (c!=0) == 0 )
{
    cout << "All of a, b and c are either 1 or 0" << endl;
}
else
{
    cout << "a, b or c have mixed values of 1 and 0" << endl;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-26T17:35:47.063

如果您使用的是 C++11，您可以使用可变参数模板来实现您正在寻找的内容，例如：

```
template <typename T, typename U>
bool allequal(const T &t, const U &u) {
    return t == u;
}

template <typename T, typename U, typename... Args>
bool allequal(const T &t, const U &u, Args const &... args) {
    return (t == u) && allequal(u, args...);
} 
```

您可以在代码中这样称呼它：

```
if (allequal(a,b,c,0) || allequal(a,b,c,1))
{
  cout << "All of a, b and c are either 1 or 0" << endl;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-01T04:48:09.230

更通用的解决方案：`~(~(a ^ b) ^ c)`. 基于`a XNOR b`确保两者都为零或一的想法。

# java - Spring jdbc模板

> ID：14107655
> 
> 赞同：0
> 
> 时间：2013-01-01T03:31:31.047
> 
> 标签：java, spring-mvc, jdbctemplate

我是 Spring MVC 和 JDBCTemplate 的新手，非常需要一些帮助。我在 applicationContext.xml 中声明了以下内容：

```
<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="com.mysql.jdbc.Driver" />
    <property name="url" value="jdbc:mysql://" />
    <property name="username" value="user" />
    <property name="password" value="pwd" />
</bean>

<bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
    <property name="dataSource" ref="dataSource"/>
</bean> 
```

在我的 DAOImpl 类中，我有以下代码：

```
@Repository
public class ABCDAOImpl implements ABCDAO
{

    private String INSERT_SQL = null;
    private JdbcTemplate jdbcTemplate;

    @Autowired
    public void setDataSource(DataSource dataSource)
    {
        this.jdbcTemplate = new JdbcTemplate( dataSource );
    }

    @Override
    public boolean insertDataInDataBase(final Object obj)
    {
        boolean insertSuccessful = false;

        INSERT_SQL = "INSERT INTO XXX " +
                "(AA, BB, CC, DD, EE, " +
                "FF, GG, HH, II) VALUES (?,?,?,?,?,?,?,?,?)";

    KeyHolder keyHolder = new GeneratedKeyHolder();
    jdbcTemplate.update(new PreparedStatementCreator() 
            {public PreparedStatement createPreparedStatement(Connection connection) 
                           throws SQLException
                {
                  PreparedStatement ps = null;
                  ps = connection.prepareStatement(INSERT_SQL);
                  ps.setString(1, xx);
                  ps.setString(2, xx);
                  ps.setString(3, xx);
                      ps.setString(4, xx);
                  ps.setString(5, xx);
                  ps.setString(6, xx;
                  ps.setString(7, xx);
                  ps.setString(8, xx);
                  ps.setString(9, xx);
                  return ps;
                  }}, keyHolder);

        return insertSuccessful;    
    }
} 
```

测试类：

```
 import static org.junit.Assert.assertTrue;
    import org.junit.Before;
    import org.junit.Test;
    import org.junit.runner.RunWith;
    import org.springframework.test.context.ContextConfiguration;
    import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;

    @RunWith(SpringJUnit4ClassRunner.class)
    @ContextConfiguration(locations = {"classpath:applicationContext.xml"})
    public class ABCDAOImplTest
    {
    private Object object = new Object();
    private ABCDAOImpl abcDAOImpl;

    @Before
    public void setup()
    {
        object.setAllVaribles();
        abcDAOImpl = new ABCDAOImpl();
    }

    @Test
    public void testRepositoryInsert()
    {
        System.out.println(abcDAOImpl.insertDataInDataBase(object));
        assertTrue(abcDAOImpl.insertDataInDataBase(object));
    }

} 
```

然后我使用 jdbcTemplate 使用 PreparedStatementCreator 执行插入语句。
现在，我正在尝试测试（没有模拟，我硬编码值只是为了测试..）这段代码是否有效？当我运行这个测试时，它给了我 NPE 说 jdbcTemplate 为空。我的代码有问题还是我测试它的方式有问题？任何帮助将不胜感激。

新年快乐 ：）

PS - 仅在 @Pradeep 发表评论后，我才使用 @RunWith(SpringJUnit4ClassRunner.class) @ContextConfiguration(locations = {"classpath:applicationContext.xml"}) 注释了 Test 类。现在我得到另一个异常：“无法加载 ApplicationContext。”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T05:02:59.387

最明显的答案是您的测试没有调用该`setDataSource()`方法或执行任何其他会导致创建 JdbcTemplate 的操作。但是，您没有显示足够的代码让某人指出问题出在哪里。

**更新：**在您的测试中，您说`abcDAOImpl = new ABCDAOImpl();`，仅此而已。您希望如何注入 JdbcTemplate/DataSource？它不会通过魔法发生。要么你必须手动完成所有的连接，要么让 Spring 将 DAO 注入到你的测试中。为此，只需添加如下字段：

```
@Autowired
private ABCDAO abcDao; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T05:18:02.110

也许您缺少`applicationContext.xml`文件中的`test-applicationContext.xml`文件导入

```
<import resource="classpath:applicationContext.xml" /> 
```

# ruby - 在 Mac 上更新 ruby -version 失败

> ID：14107658
> 
> 赞同：0
> 
> 时间：2013-01-01T03:33:20.347
> 
> 标签：ruby, ruby-on-rails-3, macos

现在我正在尝试将我的 ruby​​ 版本从 1.8（系统默认）更新到 1.9.3。

安装 ruby​​ 1.9.3 后：

```
==> Downloading http://ftp.ruby-lang.org/pub/ruby/1.9/ruby-1.9.3-p362.tar.gz
######################################################################## 100.0%
==> Patching
patching file missing/setproctitle.c
==> ./configure --prefix=/usr/local/Cellar/ruby/1.9.3-p362 --enable-shared --disable
==> make
==> make install
==> Caveats
NOTE: By default, gem installed binaries will be placed into:
  /usr/local/Cellar/ruby/1.9.3-p362/bin

You may want to add this to your PATH.
==> Summary 
```

但是当我更改我的 ruby​​ 版本时，我得到了这个：

```
macmatoMac-Pro:1.9.3-p362 mac$ rvm use 1.9.3 --default

ruby-1.9.3-p327 is not installed.

To install do: 'rvm install ruby-1.9.3-p327' 
```

我应该怎么办？谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T04:40:56.760

RVM 对 1.9.3 的版本一无所知`/usr/local/Cellar/ruby`。您不能将 Ruby 版本安装到任意位置并期望 RVM 继承它或了解它的位置，因为您将它安装在 RVM 的控制之外。RVM 旨在使用`rvm install some_ruby_version`.

您可以更改您的路径以指向您安装的 Ruby，并使用它`rvm use system`来让 RVM 不碍事，但是，此时，您将不会拥有任何使 RVM 变得不错的附加功能，例如宝石套装支持。

通读 RVM 的文档以了解它的工作原理，尤其是[如何安装新版本的 Ruby](https://rvm.io/rubies/installing/)。

# c++ - 将 Qt4 移植到 Qt5：未解析的外部符号

> ID：14107660
> 
> 赞同：3
> 
> 时间：2013-01-01T03:33:45.417
> 
> 标签：c++, qt, linker, porting, qt5

Qt5 是新一代的 Qt，它有一些变化。

我有一个使用 Qt4 构建的项目。我已经下载了 Qt5-VisualStudio2010 包，我正在尝试将我的项目从 Qt4 移植到 Qt5。出现问题。

所有“包含”路径都已得到很好的修复。但是，编译器现在报告**了数百个“未解析的外部符号”**（几乎所有的函数调用，听起来编译器都找不到任何 .lib 文件）。我什至尝试添加在 Qt SDK 文件夹中找到的所有 .lib 文件，但没用。最基本的类和方法： QApplication::exec(...) 也报告为“未解析的符号”。

项目文件已更改为适合 Qt5 打包：

```
myproject.pro file:
QT += widgets 
```

有人对这个新版本的 Qt 有过类似的经验吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T06:51:25.413

来自“qt_newbie89”（[http://qt-project.org/forums/viewthread/23200](http://qt-project.org/forums/viewthread/23200)）：

> 我“意外”解决了这个问题。我右键单击项目窗口中的项目文件夹并选择 qmake。之后，选择运行，所有错误都消失了。顺便说一句，我不知道为什么会这样。

来自“ChrisW67”（[http://qt-project.org/forums/viewthread/23253/](http://qt-project.org/forums/viewthread/23253/)）：

> Makefile 文件并没有“损坏”：它与您离开时完全一样，充满了适合先前 Qt 4 安装的命令和路径。当 Qt Creator 运行 nmake 来构建项目时，nmake 不会自动重新运行 qmake 来生成 Makefile，因为（未触及的）Makefile 比生成它的 pro 文件更新。这是正常且正确的 make 行为，但它导致您的 Qt5 停顿与预期的 Qt4 安装不匹配。

我的说法是：是的，这确实解决了链接问题！问题实际上是，当使用 Qt4 创建项目时，“make”文件也很好地与项目一起创建。当我删除 Qt4，安装 Qt5 并通过 Qt5（使用新的 Qt Creator）导入旧项目时，“make”文件可能已损坏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-01T08:29:49.490

这也发生在我身上，我确实遵循了。

1.  另外链接了 Qt5Widgetsd.lib
2.  将项目属性“将 Wchar_t 视为内置”更改为 true（在 C++ -> 语言部分）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T04:38:10.970

我怀疑你不会是唯一遇到这个问题的人。你看过：[这个](https://qt-project.org/wiki/Transition_from_Qt_4.x_to_Qt5)了吗？它讨论了 qt/base/bin 中的一个 PERL 脚本，名为：fixqt4headers.pl。这旨在修复标题。我注意到另一个链接，如果它不能解决你的问题，它可能会有所帮助，试试[这个](http://www.kdab.com/porting-from-qt-4-to-qt-5/)，它看起来是经过深思熟虑的。而且，不，我没有尝试过。我实际上还没有升级到 Qt 5。干杯！

# java - 泛型通配符参数下限到 Object

> ID：14107664
> 
> 赞同：0
> 
> 时间：2013-01-01T03:35:45.843
> 
> 标签：java, generics, wildcard

可以指定具有*下限*的通配符类型`Object`：

```
public void method(Collection<? super Object> c) {
    // compiles, but ? can only be Object
} 
```

从逻辑上讲，未知类型只能是`Object`（类层次结构中没有类型在*上面* `Object`）。

是否有使用类型的要求或充分理由`<? super Object>`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T05:32:34.000

[是的，这里](http://www.javabeat.net/2008/09/using-super-in-generics-java-5-0/)有一个“？super XXXXXX”的用例。要点是使用用户/扩展将使您的收藏成为只读或只写。

# ruby-on-rails - Rails 迁移失败并出现错误语法

> ID：14107665
> 
> 赞同：0
> 
> 时间：2013-01-01T03:35:52.633
> 
> 标签：ruby-on-rails, rake

我对 Rails 很陌生，而且我的模型中有这个

```
PreGit::Application.routes.draw do

  resources :microposts
  resources :users

  match '/help',    to:'static_pages#help'
  match '/about',   to:'static_pages#about'
  match '/contact', to:'static_pages#contact'

  root_path => '/'
  root_url => 'http://localhost:3000/'

end 
```

但是在运行时`bundle exec rake db:migrate`我得到了：

```
syntax error, unexpected tSYMBEG, expecting kDO or '{' or '('
  match '/help',    to:'static_pages#help'
                    ^ 
```

有人可以帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T03:44:12.013

看起来这不是 Rails 问题，而是 Ruby 版本问题。

在 Ruby 1.8.x 中，哈希语法是

```
:to => static_pages#help' 
```

但 Ruby 1.9.x 支持

```
to:'static_pages#help' 
```

所以可能你正试图在你的 Ruby 1.8.x 下运行一个在 Ruby 1.9.x 下开发的应用程序

尝试在 Ruby 1.9.x 下运行相同的应用程序

如果您使用的是 rvm，那么试试这个

`rvm list`#将列出你所有的 ruby​​ 版本

如果你安装了 ruby​​ 1.9.x

```
rvm use ruby-1.9.x 
```

# asp.net - 仅为某些路径设置 RAMMFAR

> ID：14107671
> 
> 赞同：5
> 
> 时间：2013-01-01T03:36:53.973
> 
> 标签：asp.net, asp.net-mvc, web-config, asp.net-mvc-routing

我有一个 ASP.NET 4.5 MVC 应用程序。我不想设置 RAMMFAR ( `runAllManagedModulesForAllRequests`)，因为这会不必要地通过 ASP.NET 管道发送对静态资源的请求；但是，我确实希望所有以路径开头的请求都`/Download/`通过 ASP.NET 路由管道运行，而不管扩展名如何。这样我可以将它们路由到控制器并提供动态生成的资源。

如何才能做到这一点？我无权访问 IIS 设置，但希望有办法通过`web.config`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:58:14.810

RAMMFAR 设置针对每个应用程序。如果您希望站点的不同部分具有不同的设置，则必须创建单独的 IIS 应用程序，但不幸的是，您声明这不适合您。

不过，我有两个旁注：

1.  你确定你甚至需要 RAMMFAR 吗？我认为在使用 IIS 7.5 和更新版本时，它很少需要，因为 IIS 和 ASP.NET 几乎可以正确处理托管/本机请求。
2.  您是否将此确定为始终启用它的实际问题？毫无疑问，RAMMFAR 会使事情变慢，但问题是它是否会在您的应用程序中产生可衡量的影响。即使静态文件确实经过了一些托管代码，文件的最终处理也会在本机代码中处理。所以有一些额外的工作要“通过” ASP.NET 托管管道，但一旦完成，它就会回到本机 IIS/Windows 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-09T21:07:27.827

令人惊讶的是，这个问题在 Stack Overflow 中已经很久没有得到解答了。

正如您所提到的 - 当您只需要捕获站点中特定路径的所有请求时，不需要 runAllManagedModulesForAllRequests。

您可以指定应该发送到 MVC 处理程序的路径模式，如下所示

```
<add name="DynamicDownloadHandler" path="/download/*" verb="GET" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" /> 
```

上面的模式将捕获无扩展和有扩展的路径。

[此处链接了在 MVC 中提供动态图像的示例实现](https://davidsekar.com/asp-net/dynamically-serving-images-with-extension-from-database)。

# android - 蜂巢上的 UI 冻结

> ID：14107673
> 
> 赞同：2
> 
> 时间：2013-01-01T03:38:37.557
> 
> 标签：android

我正在使用[Chris Banes 的 Pull to Refresh 库的](https://github.com/chrisbanes/Android-PullToRefresh/blob/master/library/src/com/handmark/pulltorefresh/library/PullToRefreshListView.java)多台设备上测试一个应用程序- 它在其他设备上运行良好，但在 HTC Flyer (Honeycomb)、摩托罗拉 Xoom Family Edition (Honeycomb) 和 Honeycomb 模拟器上有一个奇怪的怪癖.

我将 PullToRefreshListView 与 ImageViews 打包在一起，当我上下滚动时，测试拉动刷新功能，有时屏幕会冻结（在 Flyer 上，它非常可靠——拉动刷新一次就会冻结）。

此 Activity 不再更新 UI。它仍然注册触摸事件；我可以点击转到其他活动的按钮，它们将加载并正常工作，但是当我返回冻结的活动时，UI 仍然冻结。我还可以滚动 ListView 并查看指示行正在滚动的日志语句，但屏幕上没有任何变化。我什至设置了一个线程来每秒更新屏幕上的元素，但是当它冻结时我看不到这些变化。

让它静置几分钟无济于事。我没有收到应用程序无响应错误。什么可能导致 UI 不刷新，而实际上没有阻塞 UI 线程？

# c# - nlog 找不到控制台目标

> ID：14107679
> 
> 赞同：0
> 
> 时间：2013-01-01T03:40:08.847
> 
> 标签：c#, nlog

我正在尝试通过 nlog 登录到控制台并遇到异常：

```
Unhandled Exception: System.TypeInitializationException: The type initializer fo
r 'MyApp' threw an exception. ---> System.Configuration.ConfigurationEr
rorsException: An error occurred creating the configuration section handler for
nlog: Exception occurred when loading configuration from C:\MyApp\MyApp.exe.config (C:\MyApp\MyApp.exe.config line 14) --->
NLog.NLogConfigurationException: Exception occurred when loading configuration f
rom C:\MyApp\MyApp.exe.config ---> System.ArgumentException: T
arget cannot be found: 'Console'
   at NLog.Config.Factory`2.CreateInstance(String name)
   at NLog.Config.XmlLoggingConfiguration.ParseTargetsElement(NLogXmlElement tar
getsElement)
   at NLog.Config.XmlLoggingConfiguration.ParseNLogElement(NLogXmlElement nlogEl
ement, String baseDirectory)
   at NLog.Config.XmlLoggingConfiguration.ParseTopLevel(NLogXmlElement content,
String baseDirectory)
   at NLog.Config.XmlLoggingConfiguration.Initialize(XmlReader reader, String fi
leName, Boolean ignoreErrors)
   --- End of inner exception stack trace ---
   at NLog.Config.XmlLoggingConfiguration.Initialize(XmlReader reader, String fi
leName, Boolean ignoreErrors)
   at NLog.Config.XmlLoggingConfiguration..ctor(XmlElement element, String fileN
ame)
   at NLog.Config.ConfigSectionHandler.System.Configuration.IConfigurationSectio 
```

这是我的配置文件：

```
<configuration>
    <configSections>
        <section name="nlog" type="NLog.Config.ConfigSectionHandler, NLog"/>
    </configSections>

    <nlog>
        <targets>
            <target name="c" type="Console" />
            <!--<target name="logfile" type="File" fileName="log.txt" archiveAboveSize="10240" maxArchiveFiles="-1" />-->
        </targets>
        <rules>
            <logger name="*" minlevel="Info" writeTo="c" />
        </rules>
    </nlog>
</configuration> 
```

以下是相关代码：

```
private static Logger logger = LogManager.GetLogger("MyApp"); 
```

我正在使用以下命令编译单声道：

```
dmcs -reference:NLog.dll MyApp.cs 
```

我用的是最新的？[来自这里](http://nlog.codeplex.com/downloads/get/259963)的 nlog 版本，我有 .Net 框架的 4.0。这个应用程序在 Windows 7 家用 PC（也是 .Net 4.0）上运行良好，但似乎在我的 XP pro PC 上抛出了这个异常。我无法想象这会有什么不同，但作为一个.Net 假人，我不知道问题可能是什么。

有没有人以前见过这个或对问题可能有任何见解？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T04:09:25.060

我不知道为什么（虽然，我怀疑这是一个 .Net 框架版本控制问题），但是使用 nlog v1 而不是 v2 就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-24T12:38:46.370

ru 使用 ${counter} 或 NLog 布局中需要的其他功能？

# javascript - 如何从对象中获取属性

> ID：14107680
> 
> 赞同：-1
> 
> 时间：2013-01-01T03:40:19.400
> 
> 标签：javascript, jquery, object

我正在使用这段代码来检索一个简单的 JSON 对象：

```
function userinfo() {
    var user = new Object();
    $.getJSON('###', function(data){
        user.id = data.user.uID;
        user.name = data.user.uname;
    });
    return user;
}
var user = userinfo();
console.log(user); 
```

当我在函数外的用户对象上运行 console.log 时，我可以看到对象的属性（id、name）。但是当我尝试 console.log "user.id" 或 "user.name" 时，它们出现为未定义。我无法弄清楚为什么会这样，或者我可以做些什么来检索属性而不必遍历它们。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T03:45:01.280

获取 JSON 的 AJAX 调用是异步的，`function(data)`在 AJAX 返回之前不会调用回调，但是您`user`在发送 AJAX 请求之后，但在收到 AJAX 响应之前读取。

尝试这个：

```
function userinfo() {    
    $.getJSON('###', function(data){
        var user = new Object();
        user.id = data.user.uID;
        user.name = data.user.uname;
        // Do your stuff here
        console.log(user);
    });
}

userinfo(); 
```

**回复评论：** 只需在应用程序上有这样的功能：

```
function processUser(user){
   console.log(user);
} 
```

然后在 AJAX 回调中使用它，

```
$.getJSON('###', function(data){
        var user = new Object();
        user.id = data.user.uID;
        user.name = data.user.uname;
        // Do your stuff here
        processUser(user);
    }); 
```

@Simon，您现在可以执行通常的应用程序逻辑`processUser()`，例如：

```
var usersList = []; // Assume this is a global for your app

function processUser(user){
   usersList.push(user);
   // now other parts of your app can find this user in the list
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T03:54:55.173

```
function userinfo(callback) {
    $.getJSON('###', function(data){
        callback({
            id: data.user.uId,
            name: data.user.uname
        });
    });
}
var user;
userinfo(function(newUser) {
    user = newUser;
    // do work with user.
});

// execution continues here before callback returns.  User will not be set.

user.name // error no property name of undefined. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T04:35:16.233

这是修复：

```
function userinfo() {
    var user = new Object();
    $.ajax({
        async: false, //solution right here
        url: '/login/user.html',
        success: function (data) {
            user.id = data.user.uID;
            user.name = data.user.uname;
        }
    });
    return user;
}
var user = userinfo();
console.log(user.id); 
```

完美运行。

# c# - 如何在两种类型（重复）中找到最小的可分配类型？

> ID：14107683
> 
> 赞同：13
> 
> 时间：2013-01-01T03:40:50.603
> 
> 标签：c#, reflection, types

这里有两种扩展方法供使用

```
public static Type FindInterfaceWith(this Type type1, Type type2) {
    // returns most suitable common implemented interface
}

public static Type FindBaseClassWith(this Type type1, Type type2) {
    // returns most derivative of common base class
} 
```

*   `FindInterfaceWith``null`如果它们没有通用的实现接口，则返回。

*   `FindBaseClassWith``System.Object`如果它们没有更多派生的公共基类，则返回。
*   `FindBaseClassWith``null`如果参数之一是接口，则返回。
*   `null`如果任何参数是 ，它们都会返回`null`。

最终解决方案中方法的签名如下：

```
public static Type FindAssignableWith(this Type type1, Type type2) {
    // what should be here?
} 
```

Reflection 和 Linq 被限制使用，除了没有其他方法。

`type1`有没有很好的方法来找到和之间的常见类型的最佳拟合`type2`？

还是有更好的方法来实现这一目标？

* * *

**更新：**

以我个人的理解，由于一个类***可以实现多个接口***`FindInterfaceWith`，可能需要在`FindBaseClassWith`内部调用；否则类型的最佳选择将无法确定。

如果这个假设是正确的，那么就`FindInterfaceWith`变成了一种多余的方法；`FindInterfaceWith`因为和之间的唯一区别`FindAssignableWith`是：

***`FindInterfaceWith``null`如果有最好的班级选择，则返回；while`FindAssignableWith`直接返回确切的类。***

否则，它们都会返回最佳的接口选择。

这是关于说最初的假设是不合理的。即***`FindInterfaceWith`如果`FindAssignableWith`is not 则无法***实现。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-03T11:01:43.763

这是我的实现：

### `FindAssignableWith`,`FindBaseClassWith`和`FindInterfaceWith`实现

```
// provide common base class or implemented interface
public static Type FindAssignableWith(this Type typeLeft, Type typeRight)
{
    if(typeLeft == null || typeRight == null) return null;

    var commonBaseClass = typeLeft.FindBaseClassWith(typeRight) ?? typeof(object);

    return commonBaseClass.Equals(typeof(object))
            ? typeLeft.FindInterfaceWith(typeRight)
            : commonBaseClass;
}

// searching for common base class (either concrete or abstract)
public static Type FindBaseClassWith(this Type typeLeft, Type typeRight)
{
    if(typeLeft == null || typeRight == null) return null;

    return typeLeft
            .GetClassHierarchy()
            .Intersect(typeRight.GetClassHierarchy())
            .FirstOrDefault(type => !type.IsInterface);
}

// searching for common implemented interface
// it's possible for one class to implement multiple interfaces, 
// in this case return first common based interface
public static Type FindInterfaceWith(this Type typeLeft, Type typeRight)
{
    if(typeLeft == null || typeRight == null) return null;

    return typeLeft
            .GetInterfaceHierarchy()
            .Intersect(typeRight.GetInterfaceHierarchy())
            .FirstOrDefault();   
}

// iterate on interface hierarhy
public static IEnumerable<Type> GetInterfaceHierarchy(this Type type)
{
    if(type.IsInterface) return new [] { type }.AsEnumerable();

    return type
            .GetInterfaces()
            .OrderByDescending(current => current.GetInterfaces().Count())
            .AsEnumerable();
}

// interate on class hierarhy
public static IEnumerable<Type> GetClassHierarchy(this Type type)
{
    if(type == null) yield break;

    Type typeInHierarchy = type;

    do
    {
        yield return typeInHierarchy;
        typeInHierarchy = typeInHierarchy.BaseType;
    }
    while(typeInHierarchy != null && !typeInHierarchy.IsInterface);
} 
```

### `FindInterfaceWith`关于实施的备注

任何实现`IEnumerable`或`IEnumerable<T>`将在其他接口之前选择的接口，**我认为不正确**

### 开放式问题`FindInterfaceWith`

[c#](/questions/tagged/c%23 "显示标记为“c#”的问题")允许在一个类中实现多个接口，在这种情况下，第一个接口将由返回`FindInterfaceWith`，*因为在以下示例中无法知道哪个接口`IA`或`IB`通常更可取*

![多个接口实现](../Images/ed535b62d25d9bcc1513a6368ada57a1.png)

### 接口和类层次结构

```
 public interface IBase {}
    public interface ISomething {}
    public interface IDerivied: IBase {}
    public interface IDeriviedRight: IDerivied {}
    public interface IDeriviedLeft: IDerivied, IDisposable {}

    public class AnotherDisposable: IDisposable {
        public void Dispose() {
        }
    }

    public class DeriviedLeft: IDeriviedLeft {
        public void Dispose() {
        }
    }

    public class SubDeriviedLeft: DeriviedLeft {}
    public class SecondSubDeriviedLeft: DeriviedLeft {}
    public class ThirdSubDeriviedLeft: DeriviedLeft, ISomething {}

    public class Another {}
    public class DeriviedRight: IDeriviedRight {} 
```

### 测试用例

`NUnit`以及使用断言的一组测试用例：

`FindBaseClassWith`断言示例

```
// FindBaseClassWith returns null if one of parameters was an interface. 
// FindBaseClassWith  return null if any of parameter was null. 
Assert.That(typeof(DeriviedLeft).FindBaseClassWith(typeof(DeriviedLeft)), Is.EqualTo(typeof(DeriviedLeft))); 
```

`FindInterfaceWith`断言示例

```
// FindInterfaceWith returns null if they don't have common implemented interface. 
// FindBaseClassWith  return null if any of parameter was null. 
Assert.That(typeof(DeriviedLeft).FindInterfaceWith(typeof(DeriviedLeft)), Is.EqualTo(typeof(IDeriviedLeft))); 
```

`FinAssignableWith`断言示例

```
Assert.That(typeof(DeriviedLeft).FindAssignableWith(typeof(DeriviedLeft)), Is.SameAs(typeof(DeriviedLeft))); 
```

### CodeReview 上的讨论

[回顾这个答案`codereview.stackexchange.com`](https://codereview.stackexchange.com/q/20369/14870)

**ps**：
完整的资源可用[[这里](https://gist.github.com/4442677)]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T09:11:17.683

哦，是的，我可以炫耀我最近为别的东西写的东西！:)

警告：这段代码不是世界上最高效的，而且评论很差——它是针对个人项目的，我已经知道它是如何工作的——但我认为它会让你得到你想要的......

您最感兴趣的方法是 `public static Tuple<Type, IEnumerable<Type>> GetCommonBases(Type left, Type right)`

返回的元组是 <common base class, (list of common interfaces)>

快速总结：这个类，当给定一个类型时，执行以下操作：

*   反向遍历给定类型，直到它不再遇到基本类型，将每个类型推入“工作堆栈”

*   从工作堆栈中弹出每个基本类型，将其插入到树状结构中；如果该类型实现了任何接口，它也会为这些接口类型添加节点

*   辅助方法为第一种类型`GetCommonBases`创建这些`TypeTree`结构中的一个，然后在类型树中为另一种给定类型“合并”：它通过遍历常见的基本类型来做到这一点，直到找到一个点，在两种类型，此时形成树的两个分支。然后它从根（即`System.Object`）“向下钻取”每种类型，然后找到第一个偏差点。这个偏差点的父节点是 Common 基本类型。

*   接口部分依赖于 的定义`Interfaces`，它为任何祖先“继承”任何接口节点。该`GetCommonBases`方法提取由两个传入类型实现的任何接口的列表，并返回这两个列表的交集——即，一组传入类型都实现的接口。

*   然后该方法将这两位信息作为 a 返回`Tuple<Type, IEnumerable<Type>>`，其中第一项是公共基本类型（如果有），第二项是公共接口的交集

```
 public class TypeTree
{
   private TypeTree()
   {
       Children = new List();
   }

   public TypeTree(Type value)
       : this()
   {
       // Get to the basest class
       var typeChain = GetTypeChain(value).ToList();
       Value = typeChain.First();
       foreach (var type in typeChain.Skip(1))
       {
           Add(type);
       }
   }

   public Type Value { get; private set; }
   public TypeTree Parent { get; private set; }
   public List Children { get; private set; }
   public IEnumerable Interfaces
   {
       get
       {
           var myInterfaces = Children.Where(c => c.Value.IsInterface);
           return Parent == null ? myInterfaces : myInterfaces.Concat(Parent.Interfaces).Distinct();
       }
   }

   public TypeTree Find(Type type)
   {
       if (Value == type)
           return this;
       return Children.Select(child => child.Find(type)).FirstOrDefault(found => found != null);
   }

   public TypeTree Add(Type type)
   {
       TypeTree retVal = null;
       if (type.IsInterface)
       {
           if (Value.GetInterfaces().Contains(type))
           {
               retVal = new TypeTree { Value = type, Parent = this };
               Children.Add(retVal);
               return retVal;
           }
       }
       var typeChain = GetTypeChain(type);
       var walkTypes =
           from baseType in typeChain
           let alreadyExists = Value == baseType || Children.Any(c => c.Value == baseType)
           where !alreadyExists
           select baseType;
       foreach (var baseType in walkTypes)
       {
           if (baseType.BaseType == Value)
           {
               // Add this as a child of the current tree
               retVal = new TypeTree { Value = baseType, Parent = this };
               Children.Add(retVal);
           }
           if (Value.IsAssignableFrom(baseType))
           {
               // we can add this as a child, potentially
               retVal = Children.Aggregate(retVal, (current, child) => child.Add(baseType) ?? current);
           }
           // add interfaces
           var interfaces = baseType.GetInterfaces().Where(i => i != type);
           foreach (var intType in interfaces)
           {
               (retVal ?? this).Add(intType);
           }
       }
       return retVal;
   }

   public override string ToString()
   {
       var childTypeNames = Children.Select(c => c.ToString()).Distinct();
       return string.Format("({0} {1})", Value.Name, string.Join(" ", childTypeNames));
   }

   public static Tuple> GetCommonBases(Type left, Type right)
   {
       var tree = new TypeTree(left);
       tree.Add(right);
       var findLeft = tree.Find(left);
       var findRight = tree.Find(right);

       var commonInterfaces =
           findLeft.Interfaces.Select(i => i.Value)
           .Intersect(findRight.Interfaces.Select(i => i.Value))
           .Distinct();

       var leftStack = new Stack();
       var temp = findLeft;
       while (temp != null)
       {
           leftStack.Push(temp);
           temp = temp.Parent;
       }
       var rightStack = new Stack();
       temp = findRight;
       while (temp != null)
       {
           rightStack.Push(temp);
           temp = temp.Parent;
       }
       var zippedPaths = leftStack.Zip(rightStack, Tuple.Create);
       var result = zippedPaths.TakeWhile(tup => tup.Item1.Value == tup.Item2.Value).Last();            
       return Tuple.Create(result.Item1.Value, commonInterfaces);
   }

   private static IEnumerable GetTypeChain(Type fromType)
   {
       var typeChain = new Stack();
       var temp = fromType;
       while (temp != null)
       {
           typeChain.Push(temp);
           temp = temp.BaseType;
       }
       return typeChain;
   }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T18:49:05.480

**更新+1：**现在，没有愚蠢的错误和更多细节

我想这就是你要找的东西：

```
public static Type FindAssignableWith(this Type typeLeft, Type typeRight) {
    if(typeLeft==null||typeRight==null)
        return null;

    var typeLeftUion=typeLeft.GetInterfaceHierarchy().Union(typeLeft.GetClassHierarchy());
    var typeRightUion=typeRight.GetInterfaceHierarchy().Union(typeRight.GetClassHierarchy());

    return 
        typeLeftUion.Intersect(typeRightUion)
            .OrderByDescending(interfaceInHierarhy => interfaceInHierarhy.GetInterfaces().Contains(typeof(IEnumerable)))
            .ThenByDescending(interfaceInHierarhy => interfaceInHierarhy.Equals(typeof(IEnumerable)))
            .FirstOrDefault();
} 
```

基本上，它在排序上将基类和接口视为相同。
我想基本实现来自[[这里](https://gist.github.com/4442677)]。
我所做的基本上是将这两种方法粘合在一起，而不改变原始功能的语义。

例子：

```
var result=typeof(char[]).FindAssignableWith2(typeof(string[]));
Console.WriteLine("{0}", typeof(char[]).FindAssignableWith2(typeof(string[]))); // IList
Console.WriteLine("{0}", typeof(Test).FindAssignableWith2(typeof(string[]))); // Object
// and so on... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T15:05:57.123

我将记住一个默认实现和一些按优先级排序的知名类和接口。这是我的实现：

```
private static List<Type> CommonTypesPriorities = new List<Type> 
                                       {
                                           typeof(IEnumerable), 
                                           typeof(Array), 
                                           typeof(IClonable)
                                       };

public static Type FindAssignableWith(this Type type1, Type type2)
{
    if(type1 == type2) 
        return type1;

    var baseClass = type1.FindBaseClassWith(type2);

    //if the base class is not object/null and it is not in the list, then return it.
    if(baseClass != typeof(object) && baseClass != null && !CommonTypesPriorities.Contains(type))
        return baseClass;

    var @interface = type1.FindInterfaceWith(type2);

    if(@interface == null)
        return baseClase;

    //if there's no base class and the found interface is not in the list, return it
    if(baseClass != null && !CommonTypesPriorities.Contains(@interface)                         
        return @interface;

    //Now we have some class and interfaces from the list.

    Type type = null;
    int currentPriority;

    //if the base class is in the list, then use it as the first choice
    if(baseClass != null && CommonTypesPriorities.Contains(type))
    {
        type = baseClass;
        currentPriority = CommonTypesPriorities.IndexOf(type);
    }

    var interfaces1 = type1.GetInterfaces();
    var interfaces2 = type2.GetInterfaces();

    foreach(var i in interfaces1)
    {
        if(interfaces2.Contains(i))
        {
            //We found a common interface. Let's check if it has more priority than the current one
            var priority = CommonTypesPriorities.IndexOf(i);
            if(i >= 0 && i < currentPriority)
            {
                currentPriority = priority;
                type = i;
            }
        }
    }

    return type; 
```

}

希望能帮助到你。

# objective-c - @protocol 带整数

> ID：14107691
> 
> 赞同：2
> 
> 时间：2013-01-01T03:43:06.373
> 
> 标签：objective-c, delegates, int, protocols

我正在尝试为 tableView 的详细视图制定协议。详细视图有一个问题，然后是一个答案。如果我得到正确的答案，它将在协议方法中设置一个整数*加* 1。

我是协议的新手，我不明白我做错了什么。

# 代码

## DetailViewController.h

### 制定协议的地方

```
#import "Question.h"

@protocol DetailQuestionViewControllerDelegate <NSObject>
-(void)questionsCorrectHasChangedTo:(int)questionNumberChanged;
@end

@interface DetailQuestionViewController : UIViewController

@property (nonatomic, strong) Question *selectedQuestion;

@property (strong, nonatomic) IBOutlet UILabel *questionLabel;
@property (strong, nonatomic) IBOutlet UITextField *answerField;
@property (strong, nonatomic) IBOutlet UILabel *correctLabel;
@property (nonatomic,strong) id <DetailQuestionViewControllerDelegate> delegate;

@property (assign, nonatomic) int questionsCorrect; 
```

## 细节视图控制器.m

```
@implementation DetailQuestionViewController

@synthesize questionLabel;
@synthesize answerField;
@synthesize correctLabel;
@synthesize selectedQuestion;
@synthesize questionsCorrect;
@synthesize delegate;

- (void)viewDidLoad
{
    [super viewDidLoad];

    // Sets the questionLabel to the question we put in the array
    self.questionLabel.text = [selectedQuestion questionName]; 

    // Sets the navigation title to the rowName we put in the array
    self.navigationItem.title = [selectedQuestion questionRowName]; 

   NSLog(@"The question's answer for the question you selected is %@", [selectedQuestion questionAnswer]);

}

- (IBAction)checkAnswer:(UITextField *)sender
{

    if ([[selectedQuestion questionAnswer] caseInsensitiveCompare:answerField.text] == NSOrderedSame)
    {
        // Show the  correct label
        [correctLabel setHidden:NO];
        correctLabel.text = @"Correct!";
        correctLabel.textColor = [UIColor greenColor];
        *questionsCorrect = 1;
        NSLog(@"questionsCorrect int is %d", questionsCorrect);
        [self.delegate questionsCorrectHasChangedTo:questionsCorrect];*

    }
        else
        {
            // Show the incorrect label
            [correctLabel setHidden:NO];
            correctLabel.text = @"Incorrect";
            correctLabel.textColor = [UIColor redColor];

        }

        // Erase the text in the answerField
        answerField.text = @"";
} 
```

## ScoreViewController.h

### 现在这是我的 ScoreView 将访问委托

```
#import <UIKit/UIKit.h>
#import "DetailQuestionViewController.h"

@interface ScoreViewController : UIViewController *<DetailQuestionViewControllerDelegate>*

@property (strong, nonatomic) IBOutlet UILabel *scoreLabel;

- (IBAction)resetButtonClicked:(UIButton *)sender;
-(void)checkScore;

@end 
```

## ScoreViewController.m

```
#import "ScoreViewController.h"
#import "DetailQuestionViewController.h"

@interface ScoreViewController ()

@end

@implementation ScoreViewController
@synthesize scoreLabel;

- (void)viewDidLoad
{
    [super viewDidLoad];

    *DetailQuestionViewController *dqvc = [[DetailQuestionViewController alloc] init];
    dqvc.delegate = self;*

}

-(void)viewWillAppear:(BOOL)animated
{

    [self checkScore];

}

-(void)checkScore
{

}

- (IBAction)resetButtonClicked:(UIButton *)sender
{

}

#pragma mark - DetailQuestionViewControllerDelegate -
*-(void)questionsCorrectHasChangedTo:(int)questionNumberChanged*
{
    //set the textlabel text value to the number of questions correct
    NSLog(@"questionsNumberChanged is %i", questionNumberChanged);
    scoreLabel.text = [NSString stringWithFormat:@"You answered %d questions correctly",questionNumberChanged];
}

@end 
```

由于某种原因，标签永远不会更新。

很抱歉提出这么长的问题，试图非常具体。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T04:37:16.720

当您谈论增加协议方法中的值时，我在这里有些猜测，但是您没有单个`+`或`++`任何地方...您的示例代码中也有很多`*`' 散布在奇怪的地方，它是不清楚这些是拼写错误，是为了强调，还是为了指针间接。

所以你的类中有一个属性`questionsCorrect`，`DetailQuestionViewController`所以让我们假设这是你希望拥有计数器的类（我们将跳过这是一个视图而不是模型类......）。如果这是这个想法，那么线路：

```
 *questionsCorrect = 1;
    NSLog(@"questionsCorrect int is %d", questionsCorrect);
    [self.delegate questionsCorrectHasChangedTo:questionsCorrect];* 
```

应该：

```
 self.questionsCorrect++;  // increment the counter
    NSLog(@"questionsCorrect int is %d", self.questionsCorrect);
    [self.delegate questionsCorrectHasChangedTo:self.questionsCorrect]; 
```

（您也可以`questionsCorrect`自己声明实例变量并放弃使用`self.`上面的 - 无论您喜欢哪个）

现在只需检查并删除 extra 的其他情况（`*`如果它们在您的代码以及上面的示例中），您将更接近您的目标。

如果您希望`ScoreViewController`拥有计数器，那么您需要在此处声明它并提供一种方法来增加和显示它。

高温高压

# flash - Textile 可以像 Youtube 或 Vimeo 那样解析 Flash 吗？

> ID：14107696
> 
> 赞同：1
> 
> 时间：2013-01-01T03:43:54.647
> 
> 标签：flash, textile

是否可以使用 Textile 解析 Flash 文件，以便我可以允许我们的网站用户以标记格式提交 Youtube 或 Vimeo 视频？

我在 Textile 参考页面上看不到这个，但我想我会在这里问一下，以防有人找到了这样做的方法。

[http://redcloth.org/hobix.com/textile/](http://redcloth.org/hobix.com/textile/)

# php - Any way to access action variables from an admin generated partial in Symfony 1.4?

> ID：14107697
> 
> 赞同：0
> 
> 时间：2013-01-01T03:43:56.897
> 
> 标签：php, symfony-1.4

I've got a partial that I'm using in a Symfony 1.4 admin generated module but I have some logic that I would prefer to keep in my action. Is there anyway to access action vars in the partial? In a regular template (ie: non admin generated), I could simply declare my var in my action as `$this->myVar` and then access it from within my template as `$myVar`, but is there any way to do this in an admin partial?

I've tried declaring it in my `preExecute()` method but the var is undefined in my partial template.

Am I doing something wrong, or is my only choice to use a component instead of a partial?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T16:42:01.993

When you call this partial try to put the variable as a second parameter (or array of parameters) in the include_partial().

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T22:32:29.980

Partials and components don't have automatic access to action variables. They only see variables which are explicitly passed to them. In an admin generator module they usually get some useful parameters (e.g. the current object, helper object, configuration, form) but it depends on the current place of invocation (you can see the generated templates in the `cache` directory to find out which parameters they get). Partials also have access some global objects (e.g. request, user, response,...) which are available in every template file. You can use e.g. request attributes or slots:

```
// in an action
$this->getResponse()->setSlot('my_slot', $myVariable);

// in a partial
<?php include_slot('my_slot'); ?>
// or
<?php $my_variable = get_slot('my_slot'); ?> 
```

But I think using a **component** is a better idea.

# node.js - Node.js、分块编码和持久/可重用套接字

> ID：14107698
> 
> 赞同：0
> 
> 时间：2013-01-01T03:44:02.180
> 
> 标签：node.js, sockets, chunked

我正在构建一个与供应商 API 对话的应用程序。API 期望通过 https 进行分块编码连接 POST（并讨论 XML，但这无关紧要）。他们还建议通过一个套接字连接多路复用请求（不这样做有如下所述的安全限制）。

Node 的核心 https 在我可以与远程 Web 服务建立*一个*连接的范围内工作。我刚刚设置了*'Transfer-Encoding': 'chunked'*标头。当我在远程 Web 服务 API 发出第二个请求以取消第一个请求时，问题就开始了。第二个请求来自一个单独的连接，因此无权影响第一个请求中设置的条件——只有在同一个套接字上的请求才会被授权这样做。

使用 Node.js 实现这一点我有哪些选择？我一直在查看 Mikeal Rogers 的[请求库](https://github.com/mikeal/request)，但到目前为止还[没有运气](https://github.com/mikeal/request/issues/401)。

任何想法我可以走什么路线？非常感谢您的任何见解！

# javascript - 如何找到相对于父级的offsetTop，而不是窗口顶部？

> ID：14107703
> 
> 赞同：6
> 
> 时间：2013-01-01T03:45:52.343
> 
> 标签：javascript, html, css

`offsetTop`我的问题相当简单：与父元素（而不是窗口顶部）相比，如何找到子元素的？

的定义`offsetTop`声明该属性将返回子元素从 顶部偏移的值`offsetParent`，但在此 JSFiddle 中似乎并非如此：http: [//jsfiddle.net/h5KBK/](http://jsfiddle.net/h5KBK/)。

我的目标是从可滚动 div 的顶部而不是窗口顶部找到粗体橙色文本的偏移量。有没有办法在不计算上述元素、填充、边距等的高度并从`offsetTop`?

我正在寻找仅 JavaScript 的解决方案。请不要使用 jQuery。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-01T04:15:24.903

根据定义`offsetTop`，返回对象相对于其`offsetParent`元素顶部的顶部位置，以像素为单位。

现在`offsetParent`需要是**一个位置不是 static 的元素**。如果您`scroll`在小提琴中更改元素的位置属性，我会得到 1012 的值，而不是没有位置属性的 1110。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-01T04:16:18.077

实际上，我做了更多的研究并找到了答案。`offsetParent`必须有一个指定的或`position:absolute`声明`position:relative`，如这个 JSFiddle 所示：http: [//jsfiddle.net/h5KBK/1/](http://jsfiddle.net/h5KBK/1/)

# php - 下拉菜单适用于除 Internet Explorer 以外的所有浏览器

> ID：14107708
> 
> 赞同：1
> 
> 时间：2013-01-01T03:50:28.540
> 
> 标签：php, jquery, ajax, cross-browser, mysqli

我在下面有这段代码，它假设能够通过使用 ajax 从另一个页面检索模块来在下拉菜单中显示模块列表：

**下面给出的代码**

```
 $(document).ready( function(){

        jQuery.ajax({ 
        type: "post", 
        url:  "module.php", 
        success: function(response){ 
        jQuery('#modulesDrop').append(response); 
        } 
        }); 
    });

...

<?php

    $moduleHTML = "";  
    $moduleHTML .= '<select name="modules" id="modulesDrop">'.PHP_EOL; 
    $moduleHTML .= '<option value="">Please Select</option>'.PHP_EOL;  
    $moduleHTML .= '</select>'; 

?> 
```

module.php 页面：

```
<?php

     // connect to the database
     include('connect.php');

     /* check connection */
     if (mysqli_connect_error()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    die();
    }

    $moduleactive = 1;

    $sql = "SELECT ModuleId, ModuleNo, ModuleName FROM Module WHERE ModuleActive = ? ORDER BY ModuleNo"; 

     $sqlstmt=$mysqli->prepare($sql);

     $sqlstmt->bind_param("i", $moduleactive);

     $sqlstmt->execute(); 

     $sqlstmt->bind_result($dbModuleId,$dbModuleNo,$dbModuleName);

    $moduleHTML  = "";  

     while($sqlstmt->fetch()) { 
         $moduleHTML .= sprintf('<option value="%1$s_%2$s_%3$s">%1$s - %2$s</option>'.PHP_EOL, $dbModuleNo, $dbModuleName, $dbModuleId);
    } 

    echo $moduleHTML; 

     $sqlstmt->execute(); 

    ?> 
```

我不明白的是，下拉菜单设法在所有主要浏览器中显示模块列表，除了 Internet Explorer，它仍然显示“请选择”选项。为什么下拉菜单无法在 Internet Explorer 中显示列表？

**更新：**

我将废弃 ajax 方法，将主要的 php 代码粘贴到原始脚本中

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T13:56:46.193

你最好只在你自己的脚本中使用 php 来使用相同的脚本在同一脚本中使用 php/mysqli 来检索模块

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T04:50:22.237

试试这个方法

```
 $(document).ready( function(){

        jQuery.ajax({ 
        type: "post", 
        url:  "module.php", 
        success: function(response){ 
        jQuery('#container').html(response); 
        } 
        }); 
    });

...

<?php

    $moduleHTML = "";  
    $moduleHTML .= '<div id="container">';
    $moduleHTML .= '</div>'; 

?>
//In here some where make sure you are echoing <?php echo $moduleHTML; ?> 
```

并在您的 module.php 中更改此处

```
 $moduleHTML  = '<select name="modules" id="modulesDrop">';  
 $moduleHTML .= '<option value="">Please Select</option>'.PHP_EOL;  

     while($sqlstmt->fetch()) { 
         $moduleHTML .= sprintf('<option value="%1$s_%2$s_%3$s">%1$s - %2$s</option>'.PHP_EOL, $dbModuleNo, $dbModuleName, $dbModuleId);
    } 
    $moduleHTML.='</select>'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T04:15:04.307

你应该选择 html 函数而不是像这样追加 jQuery('#modulesDrop').html(response);

# java - Struts 2：struts.properties 中的 ui.theme 更改没有得到反映

> ID：14107710
> 
> 赞同：1
> 
> 时间：2013-01-01T03:50:41.363
> 
> 标签：java, properties, struts2, themes, xml-configuration

我正在使用 maven 创建一个项目，如下所示

```
mvn archetype:generate -B -DgroupId=com.myApplication -DartifactId=MyApplication -
DarchetypeGroupId=org.apache.struts -DarchetypeArtifactId=struts2-archetype-starter -
DarchetypeVersion=2.3.7 
```

之后在`struts.properties`文件中我正在改变

```
struts.ui.theme=xhtml 
```

到

```
struts.ui.theme=simple 
```

但是当我运行应用程序时，`simple`主题不适用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T08:31:13.023

`struts.properties` `struts.xml`在项目和部署中找到文件。检查每个找到的文件在运行前和运行后是否包含必要的更改。并且`struts.xml`不包含`<constant name="struts.ui.theme"`. 如果没有帮助，请尝试在磁盘或计算机中搜索关键字`struts.ui.theme`。高温高压

# magento - 为 Magento 的欢迎信息创建一个模块块

> ID：14107715
> 
> 赞同：1
> 
> 时间：2013-01-01T03:52:21.677
> 
> 标签：magento, module

我在这里找到了这个非常好的教程：[http](http://www.phparrow.com/magento/magento-create-a-simple-module/) : //www.phparrow.com/magento/magento-create-a-simple-module/ 创建一个简单的 Magento 模块。我希望我能弄清楚如何将 Magento 的默认欢迎消息放入模块中。看，Magento 的默认欢迎消息似乎是标题的一部分，因为当您查看打开模板路径的布局时，欢迎消息没有自己的模板。

我想将欢迎消息添加到模块的原因是因为我的页面缓存缓存了标题以及欢迎消息。欢迎消息有“欢迎...”然后是“欢迎...（客户名称）”然后是“欢迎...（不是客户名称？）”等。

页面缓存将缓存它发生的缓存！我的意思是它可能会在一个页面上缓存客户名称，在另一页面上缓存其他状态。

header.phtml 中的代码是：

```
<p class="welcome-msg"><?php echo $this->getWelcome() ?> <?php echo $this->getAdditionalHtml() ?></p> 
```

我需要以某种方式将它添加到“模块块”中，这样​​我就可以告诉我的页面缓存不要缓存这个块。理解？

上面的教程解释了如何很好地创建一个模块，但是它创建了一个“新页面”，我需要为这个欢迎消息制作一个模块。

谢谢

# gmail - 如何通过 Gmail API 扫描所有邮件？

> ID：14107716
> 
> 赞同：0
> 
> 时间：2013-01-01T03:52:40.550
> 
> 标签：gmail, oauth-2.0, imap, gmail-imap

在我 OAuth 我的谷歌帐户后，我可以通过 IMAP 协议连接到它。列出文件夹会列出所有“标签”以及不可选择的“[Gmail]”。

有没有办法列出所有邮件和/或至少进入垃圾箱？还有那些已归档的 - 那些没有出现在收件箱文件夹中

我做了一些挖掘并尝试了这个： var_dump($storage->getFolders('[Gmail]'));

它没有列出任何东西......但这确实： var_dump($storage->getFolders('[Gmail]/Trash'));

如何列出所有这些文件夹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T12:55:32.167

**[Gmail]/所有邮件**包含您在 Gmail 中的所有邮件，包括您发送和存档的邮件。您在收件箱中看到的任何邮件也将出现在**[Gmail]/所有邮件**文件夹中。

# delphi - 使用 Delphi 2007 解码 UTF-8 编码的 Cyrillic

> ID：14107717
> 
> 赞同：4
> 
> 时间：2013-01-01T03:53:39.523
> 
> 标签：delphi, unicode, indy, google-analytics-api

我在 Delphi 2007（不支持 Unicode）中工作，我正在从 Google Analytics API 检索 XML 和 JSON 数据。以下是我为 URL 引用路径获取的一些 UTF-8 编码数据：

> ga:referralPath=/add/%D0%9F%D0%B8%D0%B6%D0%B0%D0%BC

当我使用[此解码器](http://meyerweb.com/eric/tools/dencoder/)对其进行解码时，它会正确生成：

> ga:referralPath=/add/Пижам

有没有我可以在 Delphi 2007 中使用的函数来执行这个解码？

**UPDATE** 此数据对应一个 URL。最终我想要做的是将其存储在 SqlServer 数据库中（开箱即用 - 没有修改有关字符集的设置）。然后能够生成/创建一个带有指向该页面的工作链接的 html 页面（注意：在这个示例中，我只处理 url 引用路径 - 显然要制作一个有效的 url 链接需要一个源）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T06:54:29.530

D2007 支持 Unicode，只是没有 D2009+ 支持的程度。D2007 中的 Unicode 是使用`WideString`少数 RTL 支持函数来处理的。

URL 包含百分比编码的 UTF-8 字节八位字节。只需将这些序列转换为其二进制表示形式，然后用于`UTF8Decode()`将 UTF-8 数据解码为`WideString`. 例如：

```
function HexToBits(C: Char): Byte;
begin
  case C of
    '0'..'9': Result := Byte(Ord(C) - Ord('0'));
    'a'..'f': Result := Byte(10 + (Ord(C) - Ord('a')));
    'A'..'F': Result := Byte(10 + (Ord(C) - Ord('A')));
  else
    raise Exception.Create('Invalid encoding detected');
  end;
end;

var
  sURL: String;
  sWork: UTF8String;
  C: Char;
  B: Byte;
  wDecoded: WideString;
  I: Integer;
begin
  sURL := 'ga:referralPath=/add/%D0%9F%D0%B8%D0%B6%D0%B0%D0%BC';
  sWork := sURL;
  I := 1;
  while I <= Length(sWork) do
  begin
    if sWork[I] = '%' then
    begin
      if (I+2) > Length(sWork) then
        raise Exception.Create('Incomplete encoding detected');
      sWork[I] := Char((HexToBits(sWork[I+1]) shl 4) or HexToBits(sWork[I+2]));
      Delete(sWork, I+1, 2);
    end;
    Inc(I);
  end;
  wDecoded := UTF8Decode(sWork);
  ...
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T09:19:27.850

您可以使用以下代码，该代码使用 Windows API：

```
function Utf8ToStr(const Source : string) : string;
var
  i, len : integer;
  TmpBuf : array of byte;
begin
  SetLength(Result, 0);
  i := MultiByteToWideChar(CP_UTF8, 0, @Source[1], Length(Source), nil, 0);
  if i = 0 then Exit;
  SetLength(TmpBuf, i * SizeOf(WCHAR));
  Len := MultiByteToWideChar(CP_UTF8, 0, @Source[1], Length(Source), @TmpBuf[0], i);
  if Len = 0 then Exit;

  i := WideCharToMultiByte(CP_ACP, 0, @TmpBuf[0], Len, nil, 0, nil, nil);
  if i = 0 then Exit;

  SetLength(Result, i);
  i := WideCharToMultiByte(CP_ACP, 0, @TmpBuf[0], Len, @Result[1], i, nil, nil);
  SetLength(Result, i);
end; 
```

# ruby-on-rails - 在 Rails 中的特定时间之间获取随机时间对象

> ID：14107721
> 
> 赞同：3
> 
> 时间：2013-01-01T03:54:01.147
> 
> 标签：ruby-on-rails, ruby, datetime

我想要一个方法：

```
def time_between(from, to)
  ***
end

time_between 10.am.of_today, 3.pm.of_today # => 1pm Time object
time_between 10.am.of_today, 3.pm.of_today # => 3pm Time object
time_between 10.am.of_today, 3.pm.of_today # => 10:30am Time object
# I mean random 
```

这里有两个问题：如何实现`***`？以及如何实施`x.pm.of_today`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-01T09:22:25.810

红宝石 1.9.3

```
require 'rubygems'
require 'active_support/all'

def random_hour(from, to)
  (Date.today + rand(from..to).hour + rand(0..60).minutes).to_datetime
end

puts random_hour(10, 15) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T04:10:52.347

这是第一次尝试：

```
def time_between(from, to)
  today = Date.today.beginning_of_day
  (today + from.hours)..(today + to.hours).to_a.sample
end 
```

虽然它的工作方式如下：

```
time_between(10, 15) # => a random time between 10 am and 3 pm 
```

我认为就足够了，但我会开放以获得更好的解决方案。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-01T04:43:03.240

要获得随机时隙，您需要计算两次之间的距离。获取具有该距离跨度的随机值。最后将其添加到您的时间。

类似的东西：（但我不打算测试它）

```
def time_between(from, to)
  if from > to
    time_between(to, from)
  else
    from + rand(to - from)
  end
end 
```

至于创建 DSL 的时间。你可以看看 Rails 是如何做到的。但是要得到你想要的东西。只需创建一个代表一天中的小时数的类。使用 Fixnum 上的 am 或 pm 调用来实例化它。`of_today`然后为（以及您想要的任何其他方法）编写方法。

```
class Fixnum
  def am
    TimeWriter.new(self)
  end

  def pm
    TimeWriter.new(self + 12)
  end
end

class TimeWriter
  MINUTES_IN_HOUR = 60
  SECONDS_IN_MINUTE = 60
  SECONDS_IN_HOUR = MINUTES_IN_HOUR * SECONDS_IN_MINUTE

  def initialize hours
    @hours = hours
  end

  def of_today
    start_of_today + (hours * SECONDS_IN_HOUR)
  end

  private

  attr_reader :hours

  def start_of_today
    now = Time.now
    Time.new(now.year, now.month, now.day, 0, 0)
  end
end 
```

您应该添加一些超过 24 小时的错误处理。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-06-29T10:52:26.113

此代码尊重分钟和小时作为输入。

```
require 'rubygems'
require 'active_support/all'

def random_time(from, to)
  from_arr = from.split(':')
  to_arr   = to.split(':')
  now      = Time.now
  rand(Time.new(now.year, now.month, now.day, from_arr[0], rom_arr[1])..Time.new(now.year, now.month, now.day, to_arr[0], to_arr[1]))
end

puts random_time('09:15', '18:45') 
```

另一个简短的方法来做同样的事情：

```
require 'rubygems'
require 'active_support/all'

def random_time(from, to)
  now      = Time.now
  rand(Time.parse(now.strftime("%Y-%m-%dT#{from}:00%z"))..Time.parse(now.strftime("%Y-%m-%dT#{to}:00%z")))
end

puts random_time('09:15', '18:45') 
```

# android - Viewpager 下方带有标签的静态按钮 - Actionbarsherlock

> ID：14107728
> 
> 赞同：1
> 
> 时间：2013-01-01T03:57:49.763
> 
> 标签：android, tabs, actionbarsherlock, android-viewpager

因此，我正在尝试创建一个布局，以便在页面顶部有一个带有标签的 viewpager，底部有几个静态按钮，当我在标签上滑动时它们不会移动。不过似乎遇到了障碍，我的片段没有加载，当我实现以下代码时我失去了滑动功能。我是 Actionbarsherlock 的新手，不确定问题是什么，希望能提供任何帮助。谢谢！

爪哇：

```
public class Main extends SherlockFragmentActivity {

ViewPager mViewPager;
TabsAdapter mTabsAdapter;
TextView tabCenter;
TextView tabText;
Menu menu;
SubMenu subMenu1;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mViewPager = new ViewPager(this);
    mViewPager.setId(R.id.pager);

    ActionBar bar = getSupportActionBar();
    bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    mTabsAdapter = new TabsAdapter(this, mViewPager);

    mTabsAdapter
            .addTab(bar.newTab().setText("Tab 1"), Fragment1.class, null);
    mTabsAdapter.addTab(bar.newTab().setText("Tab 2"), Fragment2.class,
            null);
    mTabsAdapter.addTab(bar.newTab().setText("Tab 3"), Fragment3.class,
            null);

}

public static class TabsAdapter extends FragmentPagerAdapter implements
        ActionBar.TabListener, ViewPager.OnPageChangeListener {
    private final Context mContext;
    private final ActionBar mActionBar;
    private final ViewPager mViewPager;
    private final ArrayList<TabInfo> mTabs = new ArrayList<TabInfo>();

    static final class TabInfo {
        private final Class<?> clss;
        private final Bundle args;

        TabInfo(Class<?> _class, Bundle _args) {
            clss = _class;
            args = _args;
        }
    }

    public TabsAdapter(SherlockFragmentActivity activity, ViewPager pager) {
        super(activity.getSupportFragmentManager());
        mContext = activity;
        mActionBar = activity.getSupportActionBar();
        mViewPager = pager;
        mViewPager.setAdapter(this);
        mViewPager.setOnPageChangeListener(this);
    }

    public void addTab(ActionBar.Tab tab, Class<?> clss, Bundle args) {
        TabInfo info = new TabInfo(clss, args);
        tab.setTag(info);
        tab.setTabListener(this);
        mTabs.add(info);
        mActionBar.addTab(tab);
        notifyDataSetChanged();
    }

    @Override
    public int getCount() {
        return mTabs.size();
    }

    @Override
    public Fragment getItem(int position) {
        TabInfo info = mTabs.get(position);
        return Fragment.instantiate(mContext, info.clss.getName(),
                info.args);
    }

    public void onPageScrolled(int position, float positionOffset,
            int positionOffsetPixels) {
    }

    public void onPageSelected(int position) {
        mActionBar.setSelectedNavigationItem(position);

    }

    public void onPageScrollStateChanged(int state) {
    }

    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        Object tag = tab.getTag();
        for (int i = 0; i < mTabs.size(); i++) {
            if (mTabs.get(i) == tag) {
                mViewPager.setCurrentItem(i);
            }
        }
    }

    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
    }

    public void onTabReselected(Tab tab, FragmentTransaction ft) {
    }
}
} 
```

XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:gravity="center_horizontal"
android:orientation="vertical"
android:padding="4dip" >

<android.support.v4.view.ViewPager
    android:id="@+id/pager"
    android:layout_width="match_parent"
    android:layout_height="0px"
    android:layout_weight="1" >
</android.support.v4.view.ViewPager>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0"
    android:gravity="center"
    android:measureWithLargestChild="true"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Example" >
    </Button>
</LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T05:35:37.923

查看以下链接。这里定义了实现您需要的功能的方法。

1)[链接 1](http://thepseudocoder.wordpress.com/2011/10/05/android-page-swiping-using-viewpager/)
2)[链接 2](http://mobile.tutsplus.com/tutorials/android/android-user-interface-design-horizontal-view-paging/)
3)[链接 3](http://thepseudocoder.wordpress.com/2011/10/05/android-page-swiping-using-viewpager/)
4)[链接 4](http://manishkpr.webheavens.com/android-viewpager-example/)
5)[链接 5](https://github.com/JakeWharton/Android-ViewPagerIndicator)

我希望它会帮助你。

# c++ - 发送电子邮件：对等方重置连接

> ID：14107734
> 
> 赞同：1
> 
> 时间：2013-01-01T03:58:29.280
> 
> 标签：c++, sockets, email, smtp

假设我有一个像下面这样的功能，可以完美地从套接字发送和接收信息..

结果是：

```
Connected to: 65.55.96.11 Port: 25
220 BLU0-SMTP374.blu0.hotmail.com Microsoft ESMTP MAIL Service, Version: 6.0.3790.4675 ready at  Mon, 31 Dec 2012 19:52:22 -0800 

250 BLU0-SMTP374.blu0.hotmail.com Hello [50.100.44.155]

220 2.0.0 SMTP server ready

Exception: Socket Error 10054: Connection reset by peer 
```

为什么我会得到异常？当我发送“DATA”字符串时它会抛出异常。

如何登录？我似乎无法在网上找到任何地方。我搜索了它，只看到 AUTH 命令，但根本没有用法或示例。

代码如下：

```
void SendEmail(std::string Username, std::string Password, std::string IP, std::string Port)
{
  Socket = CreateSocket;
  ConnectSocket(Socket, IP, Port);
  SetTimeout(Socket, 10000);
  SocketInfo(Socket, IP, Port);

  writeln("Connected to: " + IP + " Port: " + Port);
  writeln(RecvSocket(Socket));

  SendSocketEx(Socket, "HELO");    //SendSocketEx automatically adds \r\n to the end of a line..
  writeln(RecvSocket(Socket));

  SendSocketEx(Socket, "STARTTLS");
  writeln(RecvSocket(Socket));

  SendSocketEx(Socket, "MAIL FROM: mehwtfbleh@hotmail.com");
  writeln(RecvSocket(Socket));

  SendSocketEx(Socket, "VRFY mehwtfbleh@hotmail.com");
  writeln(RecvSocket(Socket));

  SendSocketEx(Socket, "RCPT TO: mehwtfbleh@hotmail.com");
  writeln(RecvSocket(Socket));

  SendSocketEx(Socket, "DATA");
  writeln(RecvSocket(Socket));

  SendSocketEx(Socket, "This Is The Body..");
  writeln(RecvSocket(Socket));

  SendSocketEx(Socket, "QUIT");
  writeln(RecvSocket(Socket));

  CloseSocket(Socket);
  FreeSocket(Socket);
}

int main()
{
    SendEmail("", "", "smtp.live.com", "25", "localhost");
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T04:40:16.750

问题是该服务器需要通过 TLS 协议进行通信。[STARTTLS](http://en.wikipedia.org/wiki/STARTTLS)命令告诉服务器所有进一步的通信都将通过安全套接字层 (SSL/TLS) 进行。建立此连接后，双方之间的所有进一步通信都将被加密。

最简单的方法是使用[实​​现 SSL/TLS 的库](http://en.wikipedia.org/wiki/Comparison_of_TLS_implementations)。最著名的库是 OpenSSL。

您可以从终端/控制台使用 OpenSSL 执行快速测试：

```
openssl s_client -connect smtp.live.com:25 -starttls smtp -crlf 
```

然后你可以发送你的命令：

```
EHLO hotmail.com
AUTH LOGIN (this depends on the methods supported by the server)
...
MAIL FROM: <your email>
RCPT TO: <recipient email>
DATA
All your SMTP are belong to us.
. 
```

# php - 如何隐藏/禁用提交按钮？

> ID：14107735
> 
> 赞同：0
> 
> 时间：2013-01-01T03:58:46.870
> 
> 标签：php, html

我的表单中有文件上传和输入字段..如果文件上传成功，我想隐藏或禁用文件上传的提交按钮...我真的很困惑如何在同一页面上显示错误消息和如果没有错误，请转到“谢谢”页面。我正在使用 php 验证文件上传。如果文件上传成功，关于如何禁用提交按钮的任何想法？或向我展示如何同时处理文件上传和输入字段，同时在同一页面上显示错误消息以进行文件上传...

**注意**我希望文件上传的提交按钮只有在文件成功上传时才会消失，而不是在用户点击提交时消失。

```
<html>
<head>
</head>
<body>
<form action="" method="post" enctype="multipart/form-data">
<label for="file">Choose Photo:</label>
<input type="file" name="file" onchange="file_selected = true;">
<input type="hidden" name="submited" value="true" /> 
<input type="submit" name="submit" value="Submit" >
</form>

<form action="Send.php" method="post">
First Name:<input type="text" name="fname" required><br>
Last Name:<input type="text" name="lname" required><br>
Choose Username:<input type="text" name="username" required><br>
Age:<input type="text" name="age" required><br>
<input type="submit" value="Submit" name="submit">
</form>
</body>
</html> 
```

这是处理文件上传的 php 代码...我有两个提交按钮，一个用于文件上传，一个用于其他输入字段..此 php 代码与 html 表单位于同一页面上。

```
<?php
ini_set( "display_errors", 0);
if(isset($_REQUEST['submited'])) {

// your save code goes here

$allowedExts = array("jpg", "jpeg", "gif", "png");
$extension = end(explode(".", $_FILES["file"]["name"]));
if ((($_FILES["file"]["type"] == "image/gif")
|| ($_FILES["file"]["type"] == "image/jpeg")
|| ($_FILES["file"]["type"] == "image/png")
|| ($_FILES["file"]["type"] == "image/pjpeg"))
&& ($_FILES["file"]["size"] < 2097152)
&& in_array($extension, $allowedExts))
{
if ($_FILES["file"]["error"] > 0)
{
echo "Return Code: " . $_FILES["file"]["error"] . "<br>";
}
else
{
echo "";

if (file_exists("images/" . $_FILES["file"]["name"]))
{
echo "<font color='red'><b>We are sorry, the file you trying to upload already exists.</b></font>";
  }

else
{
move_uploaded_file($_FILES["file"]["tmp_name"],
"images/" . $_FILES["file"]["name"]);
echo "<font color='green'><b> Success! Your photo has been uploaded.</b></font>";
}
}
}
else
{
echo "<font color='red'><b>We are sorry, the file you trying to upload is not an image or it exceeds 2MB in size.</b></font><br><font color='blue'><i>Only images under size of 2MB are allowed</i></font>.";
}
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T04:07:49.293

我会使用 Jquery AJAX 调用将数据发送到 PHP 脚本。然后从响应中检索一个布尔值以确定按钮是否应该可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T04:09:31.197

您可以通过简单的方式来做到这一点，例如。

```
 <html>
    <head>
    </head>
    <body>
    <?php
$sub=0;
    ini_set( "display_errors", 0);
    if(isset($_REQUEST['submited'])) {

    // your save code goes here

    $allowedExts = array("jpg", "jpeg", "gif", "png");
    $extension = end(explode(".", $_FILES["file"]["name"]));
    if ((($_FILES["file"]["type"] == "image/gif")
    || ($_FILES["file"]["type"] == "image/jpeg")
    || ($_FILES["file"]["type"] == "image/png")
    || ($_FILES["file"]["type"] == "image/pjpeg"))
    && ($_FILES["file"]["size"] < 2097152)
    && in_array($extension, $allowedExts))
    {
    if ($_FILES["file"]["error"] > 0)
    {
    echo "Return Code: " . $_FILES["file"]["error"] . "<br>";
    }
    else
    {
    echo "";

    if (file_exists("images/" . $_FILES["file"]["name"]))
    {
    echo "<font color='red'><b>We are sorry, the file you trying to upload already exists.</b></font>";
      }

    else
    {
    move_uploaded_file($_FILES["file"]["tmp_name"],
    "images/" . $_FILES["file"]["name"]);
    $sub= 1;
    echo "<font color='green'><b> Success! Your photo has been uploaded.</b></font>";
    }
    }
    }
    else
    {
    echo "<font color='red'><b>We are sorry, the file you trying to upload is not an image or it exceeds 2MB in size.</b></font><br><font color='blue'><i>Only images under size of 2MB are allowed</i></font>.";
    }
    }
    ?>
    <form action="" method="post" enctype="multipart/form-data">
    <label for="file">Choose Photo:</label>
    <input type="file" name="file" onchange="file_selected = true;">
    <input type="hidden" name="submited" value="true" />

    <input type="submit" name="submit" value="Submit" >
    </form>

    <form action="Send.php" method="post">
    First Name:<input type="text" name="fname" required><br>
    Last Name:<input type="text" name="lname" required><br>
    Choose Username:<input type="text" name="username" required><br>
    Age:<input type="text" name="age" required><br>
<?php
if($sub==0)
{
?>
    <input type="submit" value="Submit" name="submit">
<?php
}
?>
    </form>
    </body>
    </html> 
```

我假设您的代码是正确的。`$sub=0`我在开始时初始化了一个变量。如果`succesfully uploaded`设置为 1。

结束，如果`$sub`不等于零，则不显示提交。

所以，如果文件上传成功。按钮不会显示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T04:58:48.683

```
<form action="**somepage.php**" method="post" enctype="multipart/form-data">
    <label for="file">Choose Photo:</label>
    <input type="file" name="file" onchange="file_selected = true;">
    <input type="hidden" name="submited" value="true" /> 
    <input type="submit" name="submit" value="Submit" >
    </form> 
```

并从那里将指示不同状态的变量传递回主页，并根据变量显示错误消息。

如果您确实需要禁用`input type file`将变量保存在隐藏输入中并在页面加载时使用`Jquery`并禁用`input type file`....

没有`jquery`它的简单，只是在输入类型表单之前给出一个条件

```
 if($_GET['status']=successful)
    {
    <input type=file readonly="readonly" />
    }
   else
    {
    <input type=file />
    } 
```

# django - 带有自定义图像单元格的 django-tables2

> ID：14107737
> 
> 赞同：6
> 
> 时间：2013-01-01T03:59:20.903
> 
> 标签：django, django-views, django-tables2

在一个简单的 django-tables2 中，我如何为 1 列渲染特定单元格中的图像....

有些喜欢

```
 field1     field2   field3    .   .   . 
```

第 1 行 A 图像 1 C

行 2 B 图像 2 D

. . .

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T11:38:12.567

在 Django Tables2 文档中：

[http://django-tables2.readthedocs.org/en/latest/#subclassing-column](http://django-tables2.readthedocs.org/en/latest/#subclassing-column)

本节的示例是 ImageColumn。

对于复杂的列，您可能希望从 render() 方法返回 HTML。这很好，但请务必将字符串标记为安全以避免它被转义：

```
>>> from django.utils.safestring import mark_safe
>>> from django.utils.html import escape
>>>
>>> class ImageColumn(tables.Column):
...     def render(self, value):
...         return mark_safe('<img src="/media/img/%s.jpg" />'
...                          % escape(value))
... 
```

官方文档链接：[https](https://github.com/bradleyayers/django-tables2/blob/master/docs/index.rst) ://github.com/bradleyayers/django-tables2/blob/master/docs/index.rst （以防万一）

# android - android 查询失败 com.android.internal.telephonyCommandException RADIO_NOT_AVAILABLE

> ID：14107739
> 
> 赞同：5
> 
> 时间：2013-01-01T04:02:54.007
> 
> 标签：android, mobile, android-4.0-ice-cream-sandwich, radio

从 ICS 4.0.4 升级到 4.0.6 后，我的手机将无法通过无线电获得任何连接。WiFi 很好，没有问题。在设置中，甚至 SIM 设置都被涂黑了。IMEI 没问题，检查了一下。

检查波段模式时，我收到错误消息：`Query failed`AND `com.android.internal.telephonyCommandException : RADIO_NOT_AVAILABLE`。

有人猜到如何解决这个烂摊子吗？

# python - 在 Python 中，如何与正在运行的 Node.js 进程持续通信？

> ID：14107740
> 
> 赞同：0
> 
> 时间：2013-01-01T04:03:03.840
> 
> 标签：python, node.js, plugins, io, sublimetext2

（抱歉，如果这有点含糊，因为我刚刚开始使用 Python。）

我正在创建一个 SublimeText 2 intellisense 插件，该插件与从 Node.js 脚本生成的正在运行的命令行节点服务器进行通信。我想与之通信的节点应用程序可以在这里找到： [https](https://github.com/clausreinke/typescript-tools) ://github.com/clausreinke/typescript-tools 。（请注意，一旦调用 tss 命令，它就会启动**它自己的**子进程命令行 repl，它需要接收要执行的命令。将命令发送到该命令行本身就是一个完全*不同*的问题，我还没有解决。 )

我可以通过以下方式成功与节点“交谈”：

```
self.process = subprocess.Popen( self.args,
                stdin = subprocess.PIPE,
                stdout = subprocess.PIPE,
                stderr = subprocess.STDOUT)

self.result = self.process.communicate()[0] 
```

使用

```
self.thread = NodeJS( args )
self.thread.start()
self.handle_thread( self.thread ) 
```

问题是，一旦 node.js 文件被执行，它就会关闭管道并退出 IO 进程。对该进程的后续调用返回一个

```
ValueError: I/O operation on closed file 
```

我的问题是：如何启动节点应用程序，在后台运行它，然后从 Python 连续“管道”命令到它？

我想

1.  插件加载时启动 node.js 服务器并使其在后台运行
2.  监听我然后发送到节点的键输入（已经工作）
3.  将正在运行的节点进程的输出（在查找定义之后）传回python，然后显示输出，但不要关闭线程或进程

除了连续的异步来回，所有步骤都完成了，我似乎无法弄清楚。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T04:06:36.480

在 Python 中创建一个 Unix Domain 套接字或邮槽，在 Node.js 中连接到它，并将其用作您的通信通道。

# proguard - progruard 只混淆变量名？

> ID：14107741
> 
> 赞同：3
> 
> 时间：2013-01-01T04:03:38.597
> 
> 标签：proguard

我想使用 ProGuard 来重命名变量和函数。我希望生成的类文件在除名称之外的所有方面都与源 jar 相同。有没有办法做到这一点？

我尝试使用`dontoptimize`但`dontshrink`不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-16T18:00:31.410

只需将以下内容放入您的 .pro 文件中，并确保您不使用“-keep”选项来防止其他内容被混淆。

```
# Don't keep the local variables attributes (LocalVariableTable and LocalVariableTypeTable are dropped).
-keepattributes Exceptions,Signature,Deprecated,SourceFile,SourceDir,LineNumberTable,Synthetic,EnclosingMethod,RuntimeVisibleAnnotations,RuntimeInvisibleAnnotations,RuntimeVisibleParameterAnnotations,RuntimeInvisibleParameterAnnotations,AnnotationDefault,InnerClasses,*Annotation* 
```

换句话说，请确保您的选项中没有以下内容

```
-keepattributes LocalVariableTable,LocalVariableTypeTable 
```

# sql - 用 sql 更改 wordpress 图像目录

> ID：14107742
> 
> 赞同：5
> 
> 时间：2013-01-01T04:03:47.393
> 
> 标签：sql, wordpress

我已将我的 wordpress 默认上传目录更改为：

mysite.com/files/year/month/upload
到
mysite.com/images/upload

我对`/files/year/month/`用`/images/`.

使用 phpmyadmin，我选择了正确的数据库，选择了正确的表，并使用此 sql 搜索/找到需要更改的内容：

```
SELECT * 
FROM  `wp_postmeta` 
WHERE  `meta_value` 
LIKE  '%/files/%/%/%' 
```

现在我需要从 wp_postmeta WHERE meta_value LIKE %/files/%/%/ WITH /images/ 中替换所有内容

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-23T00:31:11.103

要修改已上传媒体文件的条目，您需要运行本文中的查询：http: [//www.dezzain.com/wordpress-tutorials/how-to-move-wordpress-uploads-path-to-subdomain/](http://www.dezzain.com/wordpress-tutorials/how-to-move-wordpress-uploads-path-to-subdomain/)

主要是这两个查询：

```
UPDATE wp_posts SET post_content = REPLACE(post_content,'http://www.domain.com/wp-content/uploads','http://img1.domain.com/uploads') 
```

和：

```
UPDATE wp_posts SET guid = REPLACE(guid,'http://www.domain.com/wp-content/uploads','http://img1.domain.com/uploads') 
```

其他答案的问题是，尽管新文件的上传路径是固定的，但已经插入帖子的媒体的源路径仍然指向旧目录，因为路径存储在数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-11T01:44:00.387

我会为此推荐插件[WP Migrate DB](http://wordpress.org/plugins/wp-migrate-db/)。这是最简单的方法。

如果您坚持这样做，您可以使用[REPLACE](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_replace) () 为您要替换的每个路径运行查询（该函数不允许通配符）或尝试类似的[操作](https://stackoverflow.com/questions/986826/how-to-do-a-regular-expression-replace-in-mysql)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T19:15:27.130

另一种选择是使用以下设置： update_option('uploads_use_yearmonth_folders', 0); update_option('upload_path', '图片');

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T10:45:13.370

WordPress 并没有这样做，而是提供了使用 wp-config.php 文件[更改上传文件夹的功能。](http://codex.wordpress.org/Editing_wp-config.php#Moving_wp-content_folder)

基本上，您为服务器位置设置 WP_CONTENT_DIR，为要基于的 URI 设置 WP_CONTENT_URL。

# assembly - LLVM 和编译器命名法

> ID：14107743
> 
> 赞同：19
> 
> 时间：2013-01-01T04:04:09.547
> 
> 标签：assembly, compilation, llvm, clang, llvm-ir

我正在研究 LLVM 系统，并且已经阅读了[入门文档](http://llvm.org/docs/GettingStarted.html)。但是，一些命名法（以及 clang 示例中的措辞）仍然有些混乱。以下术语和命令都是编译过程的一部分，我想知道是否有人可以为我更好地解释它们：

*   `clang -S`vs. `clang -c`（我知道是什么`-c`，但结果有何不同？）* **（编辑）**
*   LLVM Bitcode 与 LLVM IR（有什么区别？）
*   .ll 文件与 .bc 文件（它们是什么，它们有何不同？）
*   *LLVM 汇编代码*与*本机汇编代码*（有区别吗？）

在更高的层次上，我了解整个编译过程，并且可以很好地跟踪我的方式，我只是卡在某些点上，例如，我希望看到“IR”，但看到的是“bitcode”或*“* LLVM 程序集”，这让我认为我几乎没有像我应该的那样理解它们！

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-01T07:15:00.897

### Clang 用法

通常，Clang 接受与 GCC 相同的命令行选项。选项（仅编译和汇编，`-c`不链接）和`-S`选项（仅编译，不汇编或链接）在两者中的含义相同。

### 关于中间表示的 LLVM 条款

引用[我在这个网站上的另一个答案](https://stackoverflow.com/a/12954198/242762)：

> LLVM IR 通常以 .ll 扩展名的文本文件**或 .bc****扩展**名的二进制文件存储在磁盘上。两者之间的转换是微不足道的，您可以只使用for **bc** -> **ll**和for **ll** -> **bc**。二进制格式更节省内存，而文本格式是人类可读的。**`llvm-dis`****`llvm-as`******

 ******此外，还有一些常用的别名：

*   存储在**.bc**文件中的二进制格式也称为**位码**（尽管我偶尔会听到术语“位码”也适用于一般 IR）
*   IR 也称为**LLVM 汇编**或**LLVM 汇编语言**

无论如何，在可能不同的表示下，这一切都意味着同样的事情。

### 本机组装

**本地程序集**是许多人在听到“程序集”一词时通常会想到的 - 低级语言几乎 1:1 映射到您的本机机器二进制文件，并且与 LLVM 程序集不同，本机程序集*非常*依赖于目标（例如 x86 程序集、ARM 汇编等）。本机程序集通过汇编程序组装成本机二进制文件 - LLVM 确实包含一个，但您也可以使用其他汇编程序（例如`gas`）。

本机二进制 - 组装过程的结果 - 当然是计算机真正说的（唯一）语言，链接后可以将其加载到内存中并直接在您的硬件上运行。******

# mysql - 如何只加入表而不是行

> ID：14107744
> 
> 赞同：0
> 
> 时间：2013-01-01T04:04:28.203
> 
> 标签：mysql, sql, select, join

我想在不增加编号的情况下加入表数据。的行。
并且**这两个表在没有主键的情况下加入，只有在两者中通用的列的帮助下，我不能将其他列用于结果，因为根本没有其他列相关。**

**表格1**

```
 id1(pk)   name   country  clm_id
   1    abc     3        23
   2    abc     4        23 
```

**表 2**

```
 id2(pk)   city    state    clm_id
    1    cdv      5        23
    2    sdc      5        23 
```

我想**通过 clm_id 加入这些表，**但它给了我 4 行， **我想要**

```
 id1   name   country  clm_id  id2   city    state  
        1    abc     3        23     1    cdv      5  
        2    abc     4        23     2    sdc      5 
```

**但我得到**

```
 id1   name   country  clm_id  id2   city    state  
        1    abc     3        23     1    cdv      5  
        1    abc     3        23     2    sdc      5  
        2    abc     4        23     1    cdv      5 
        2    abc     4        23     2    sdc      5 
```

怎么做..请看这个链接.. [例子](http://sqlfiddle.com/#!2/6418c/1)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T04:06:21.013

可能您正在像下面这样加入，它产生笛卡尔积。

```
SELECT  a.*, b.*
FROM    table1 a,table2 b 
```

这应该很简单。

```
SELECT  a.*, b.*
FROM    table1 a
        INNER JOIN table2 b
            ON a.id1 = b.id2 
```

*   [SQLFiddle 演示链接](http://sqlfiddle.com/#!2/3c8a0/1)

要了解有关联接的更多信息，请参阅下面的链接。

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

**更新 1**

```
SELECT  b.FLD_CUSTOMER_CLAIM_ID, 
        FLD_CUSTOMER_REG_CONTACT_ID,    
        FLD_TYPE,   
        FLD_NAME,   
        FLD_EMAIL_ID,   
        FLD_MOBILE, 
        FLD_DEPARTMENT, 
        FLD_ROLE,   
        FLD_SALUTATION,
        FLD_CRM_CUSTOMER_REG_TAX_ID,    
        FLD_TAX_TYPE,   
        FLD_APPLICABLE_FLAG,    
        FLD_MANUAL_FILLING_FLAG,    
        FLD_EFILLING_FLAG
FROM
  (
    SELECT @row:=@row+1 RowNo, a.*
    FROM   TBL_CUSTOMER_REGISTRATION_CONTACT_DETAILS a, (SELECT @row:=0) s
    WHERE  a.FLD_CUSTOMER_CLAIM_ID = 32768
  ) b INNER JOIN
  (
    SELECT @rowB:=@rowB+1 RowNo, a.*
    FROM   TBL_CUSTOMER_REGISTRATION_TAX_DETAILS a, (SELECT @rowB:=0) s
    WHERE  a.FLD_CUSTOMER_CLAIM_ID = 32768
  ) c ON b.RowNo = c.RowNo 
```

*   [SQLFiddle 演示链接](http://sqlfiddle.com/#!2/6418c/22)

# android - TabHost Android 使文本加粗

> ID：14107746
> 
> 赞同：0
> 
> 时间：2013-01-01T04:05:20.803
> 
> 标签：android, android-layout, android-intent, android-style-tabhost

我正在寻找文本粗体的方式，基本上是 Tab Host 使文本粗体。

示例图像如下

![在此处输入图像描述](../Images/c26374930bc1f39464c5b3a16fdc98d0.png)

下面是我的代码。

```
tabHost.setOnTabChangedListener(new OnTabChangeListener()
    {
        @Override
        public void onTabChanged(String tabId) 
        {
            if (tabId.equals("READING")) 
            {
                for(int i=0;i< tabHost.getTabWidget().getChildCount();i++)
                {
                    //unselected
                    tabHost.getTabWidget().getChildAt(i).setBackgroundColor(Color.parseColor("#E6A9EC")); 
                }
                // selected
                tabHost.getTabWidget().getChildAt(tabHost.getCurrentTab()).setBackgroundColor(Color.WHITE);
            }
            else
            {
                for(int i=0;i< tabHost.getTabWidget().getChildCount();i++)
                {
                 //unselected
                    tabHost.getTabWidget().getChildAt(i).setBackgroundColor(Color.parseColor("#E6A9EC"));
                }
                // selected
                tabHost.getTabWidget().getChildAt(tabHost.getCurrentTab()).setBackgroundColor(Color.WHITE);
            }
        }
   }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:29:54.933

我发现这是最简单的方法：
将选项卡添加到 TabHost 后，请执行以下操作：

```
TextView textView = (TextView) tabHost.getTabWidget().getChildAt(i)
                .findViewById(android.R.id.title); 
```

'i' 只是新标签的索引。就我而言，我使用的是 for 循环。之后非常简单，只需执行以下操作：

```
textView .setTypeface(null, Typeface.BOLD); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T04:29:28.007

您可以在自定义主题更改中对其进行样式设置

```
<item name="android:tabWidgetStyle">@android:style/Widget.TabWidget</item> 
```

和

```
<style name="Widget.TabWidget">
        <item name="android:textAppearance">@style/TextAppearance.Widget.TabWidget</item>
        <item name="android:ellipsize">marquee</item>
        <item name="android:singleLine">true</item>
</style>  

<style name="TextAppearance.Widget.TabWidget">
    <item name="android:textSize">14sp</item>
    <item name="android:textStyle">bold</item>
    <item name="android:textColor">@android:color/tab_indicator_text</item>
</style> 
```

# android - MediaStore.Images.Media.MINI_THUMB_MAGIC 做什么？

> ID：14107748
> 
> 赞同：4
> 
> 时间：2013-01-01T04:06:08.367
> 
> 标签：android, mediastore

我只是好奇 MediaStore.Images.Media.MINI_THUMB_MAGIC 列包含什么。它与图像的缩略图有什么关系吗？谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-01T04:20:25.173

请参阅Android 开发人员参考的[MediaStore.Images.ImageColumns](http://developer.android.com/reference/android/provider/MediaStore.Images.ImageColumns.html)。对于文档——它说它返回“迷你拇指 ID”。

另请参阅[在地图上显示缩略图](https://stackoverflow.com/questions/5013176/displaying-photo-thumbnails-on-map)以了解如何使用此 ID：

```
long thumbId = cursor.getLong(cursor.getColumnIndex(MediaStore.Images.ImageColumns.MINI_THUMB_MAGIC));
String[] args = new String[]{String.valueOf(thumbId)};
Cursor ct = managedQuery(MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI, null, MediaStore.Images.Thumbnails._ID + "= ?", args, null); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-22T19:12:34.810

`MINI_THUMB_MAGIC`返回一个随机数，您无法从中获取缩略图 ID。使用`MediaStore.Images.Media._ID`，它与`MediaStore.Images.Thumbnails.IMAGE_ID`

```
ArrayList<String> ids; // ArrayList of MediaStore.Images.Media._ID
String selection = MediaStore.Images.Thumbnails.IMAGE_ID + " IN (" + TextUtils.join(",", ids) + ")";
Cursor cursor2 = resolver.query(
                        MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI,
                        new String[]{{MediaStore.Images.Thumbnails.DATA,MediaStore.Images.Thumbnails.IMAGE_ID}},
                        selection,
                        null,
                        null); 
```

# c# - 在网络浏览器中托管一个点网表单应用程序？

> ID：14107753
> 
> 赞同：0
> 
> 时间：2013-01-01T04:06:51.693
> 
> 标签：c#, .net, winforms

我已经有一个 dot net forms (3.5) 桌面应用程序，现在我需要为它提供一个 Web 界面。

我想知道是否有一种方法可以在某种容器内通过 Web 交付相同的应用程序。

有什么可以用来做这件事的吗？如果不是，那么以最少的工作量构建 Web 界面的最佳方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T04:10:51.710

这两种编程模型太不同了。如果它是一个简单的应用程序，您可以查看[ASP.NET 上的 webforms](http://www.asp.net/web-forms)，但它仍然需要您为 web 移植您的应用程序。

# java - Java 集合和内存使用

> ID：14107758
> 
> 赞同：0
> 
> 时间：2013-01-01T04:09:11.553
> 
> 标签：java, collections

我有一个关于 Java 内存使用的问题。这是为了我的启迪，以及以后搜索并找到它的任何其他人！出于问题的目的，请假设，这是一种单一的方法，没有什么超出范围......在我的问题中;-)

我创建了 5 个新对象，其中包含一个名为“名称”的字符串类型的属性。我创建了一个 ArrayList 并将 5 个对象添加到 ArrayList。然后我创建一个 HashMap 并遍历先前创建的 ArrayList，将对象添加到 HashMap。

Q1。当我将 ArrayList 中的对象添加到 HashMap 时，我假设我只是在创建另一个“指针”集合，因为我没有使用“新”关键字。因此，除了 HashMap 本身（对象不重复）之外，不会消耗新的内存。

Q2。如果我在 HashMap 中的一个对象中更改“名称”的值，是否会在进行更改后迭代 ArrayList 时看到相同的更改。

我很感激对我的理解进行“健全性检查”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T04:10:59.377

Q1：创建了HashMap并创建了对对象的引用。所以内存被消耗了，但是引用并不是很大，但是如果引用的数量很大，就会产生影响。

Q2：编辑：是的，名称字段会改变。更好的是，编写一个小程序来检查它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T04:19:25.003

A1：是的，除了引用和 HashMap 之外，不会创建任何新内容。（假设您没有为 HashMap 创建一组新的键）

A2：是的，更改将反映在 ArrayList 上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T01:16:01.987

回答你的问题。

1.) 当您将对象添加到 a`HashMap`时，对象不会重复。在内部，虽然地图将创建新对象以保持其内部结构。映射的内部结构由`HashMap.Entry`包含链接列表的对象组成，其中所有值映射到相同的哈希码。因此，每当您将对象添加到地图时，都会创建一个或多个内部对象。

2.）我假设您将对象存储在`HashMap`使用它们的名称作为键。在这种情况下，更改对象的名称将更新对象（无论是通过列表还是映射访问，它始终是同一个对象），但不会更新映射中的映射。在地图中，对象仍将以其旧名称存储！

```
 Map map = new HashMap();
 Foo f = new Foo();
 f.setName("A");
 map.put(f.getName(),f);
 f.getName(); // => "A"
 map.get("A"); // => f
 f.setName("B");
 f.getName(); // => "B"
 map.get("B"); // => null
 map.get("A"); // => f 
```

# clojure - 在 clojure 中实例化对象

> ID：14107761
> 
> 赞同：1
> 
> 时间：2013-01-01T04:09:42.040
> 
> 标签：clojure

我对clojure非常陌生，所以我想用java编写代码。

我所拥有的是这个当前的代码。但似乎抛出 CompilerException java.lang.RuntimeException: Can't take value of a macro: #'clojure.core/->, compile:(NO_SOURCE_PATH:2)

此外，它似乎只实例化一个对象

```
(defrecord Learning [Name Age Gender])
  (def person 
    (apply -> Learning
           (clojure.string/split
             "Jon,12,Male", #",")
           )
    ) 
```

但是，我想做的是用java编写代码。例如在Java中，我们会有一个像

```
Public class Person {
Private int age;
Private String Gender;
Private String Name;

Person(String Name, String gender, int age)
{
this.name = Name;
this.age = age;
this.Gender = gender;
}
}

To Instantiate an instance of this class we would have a line like 

Person Jon = new Person(Jon, Male, 12); 
```

我将如何在clojure中做到这一点？

我有这个

```
(defn update [x]
  (def person 
    (apply ->Learning
           (clojure.string/split
             x, #",")
           )
    )
) 
```

但它说它是一个畸形的表达。我想做的就像在java中创建一个构造函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T04:15:24.147

为避免编译器错误，只需删除和之间`->`的空格`Lerning`

```
(def person (apply ->Learning
                   (clojure.string/split
                    "Jon,12,Male", #","))) 
```

它会起作用的

```
person
-> Learning{:Name "Jon", :Age "12", :Gender "Male"} 
```

# email - CLOUDFLARE - 邮件设置

> ID：14107762
> 
> 赞同：0
> 
> 时间：2013-01-01T04:09:44.113
> 
> 标签：email, cloudflare

我使用 Cloudflare 已经有一段时间了，但最近，我用我的域购买了一个邮件服务器。

我不确定如何通过 cloudflare “root 流量”——因为目前我无法接收邮件，但我可以发送邮件。

我知道我需要使用 MX Records，但我不知道如何让它工作。

这些是我的邮件服务的设置：

```
Mail Server Username: help@domain.im
Incoming Mail Server: mail.domain.im
Incoming Mail Server: (SSL) mail.au.syrahost.com
Outgoing Mail Server: mail.domain.im (server requires authentication) port 25
Outgoing Mail Server: (SSL) mail.au.syrahost.com (server requires authentication) port 25
Supported Incoming Mail Protocols: POP3, POP3S (SSL/TLS), IMAP, IMAPS (SSL/TLS)
Supported Outgoing Mail Protocols: SMTP, SMTPS (SSL/TLS) 
```

任何帮助是极大的赞赏。对不起，如果我解释得不够清楚！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T04:40:17.390

如果我正确理解您的问题，您一直在使用 Cloudflare 和您的网站，现在想知道如何在 Cloudflare 上设置新的邮件服务器。

您提供的邮件详细信息用于配置电子邮件客户端，但您需要的是用于指定如何为您的域路由电子邮件的 MX 详细信息。

要了解 MX 详细信息，请先询问为您的邮件服务器提供服务的人。

它们通常看起来像：
MX priority 10 domain-x MX priority 20 doman-y ..... domain-x 和 domain-y 可能与您的实际网站域相同，也可能不同。

获得 MX 详细信息后，登录 Cloudflare，单击域的设置图标并选择 DNS 设置。添加新 MX 记录的详细信息，并检查那里是否可能存在需要删除的过时 MX 记录。

祝你好运！

# c++ - 某处的节点类逻辑错误？

> ID：14107763
> 
> 赞同：1
> 
> 时间：2013-01-01T04:09:52.850
> 
> 标签：c++, qt, pointers

我试图实现一个简单的节点类，但是当我尝试通过根节点访问子节点时，它是空的，但是如果我直接访问子节点，它就会正确填充。我是否在某个地方出现了逻辑错误，或者有人可以提示我出了什么问题？

```
Node::Node(QString name, Node *parent)
{
    this->name = name;
    this->parent = parent;

    parent->children.append(this);
} 
```

\\

```
 class Node
    {
    public:
        Node(QString name) { this->name = name; }
        Node(QString name, Node *parent);
        ~Node(void);

    void addChild(Node *child);

    QString getName() { return name; }
    Node* getChild(int row) { return children[row]; }
    Node* getParent() { return parent; }

    int childCount() { return children.size(); }
    int getRow() {return this->parent->children.indexOf(this);}

    QString log(int tabLevel = -1);

private:
    QString name;
    QList<Node*> children;
    Node *parent;
}; 
```

我试图找出错误，结果是，子节点似乎有两个不同的地址，所以有两个不同的对象，但我不知道为什么：/

```
 Node rootNode = Node("rootNode");
Node childNode0 = Node("childNode0", &rootNode);
Node childNode1 = Node("childNode1", &rootNode);
Node childNode2 = Node("childNode2", &rootNode);
Node childNode3 = Node("childNode3", &childNode0);
Node childNode4 = Node("childNode4", &childNode0);

qDebug() << "RootNode: " + rootNode.getName() << " | RootChilds: " << rootNode.childCount();
qDebug() << "NodeName: " +rootNode.getChild(0)->getName() << " | NodeChilds: " << rootNode.getChild(0)->childCount();

for(int i = 0; i < childNode0.childCount(); i++)
{
    qDebug() << "NodeName: " << childNode0.getName() << " | NodeChilds: " << childNode0.childCount() << "Child Nr: " << i << " Name -> " << childNode0.getChild(i)->getName();
} 

qDebug() << "Adress via root: " << rootNode.getChild(0) << "\nAdress via node: " << &childNode0 ; 
```

}

输出：

```
"RootNode: rootNode"  | RootChilds:  3 
"NodeName: childNode0"  | NodeChilds:  0 
NodeName:  "childNode0"  | NodeChilds:  2 Child Nr:  0  Name ->  "childNode3" 
NodeName:  "childNode0"  | NodeChilds:  2 Child Nr:  1  Name ->  "childNode4" 
Adress via root:  0x41fc84 
Adress via node:  0x41fcc0 
```

我希望有一个人可以帮助我

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T05:02:55.477

当您这样做时，您正在向父母`Node`提供临时地址`Node`

```
Node childNode0 = Node("childNode0", &rootNode);
//                ^ rootNode gets this temporary Node as its first child 
```

而不是`Node`通过从临时复制来构造 s，而是：

```
Node childNode0("childNode0", &rootNode); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T04:39:17.487

我不认为`return children[row];`在功能`getChild`上是正确的。你确定不想要`*children.begin()`？

不同之处在于，`children[row]`假设您有一个数组`QList<Node*>'s`并且您想要访问第行 QList，而`*children.begin()`实际上引用了 QList 的第一个元素。

# python - 从文件中获取字符串

> ID：14107765
> 
> 赞同：0
> 
> 时间：2013-01-01T04:10:28.650
> 
> 标签：python, file-io, python-2.7

我有一个标题和密码文件，格式如下：

```
<title> <password>
... 
```

我需要搜索文件并返回给定 python 2.7 中标题的密码。做这个的最好方式是什么？我是处理文件的新手，所以如果有更好的方法来格式化此任务的文件，请随意给出答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T04:18:04.103

如果您的文件可能非常大，并且您希望将其全部加载到 ram 中，您可以遍历每一行，检查您需要的标题值。这种方法的性能将完全取决于扫描通过匹配线的速度。

如果您的文件大小合理并且可以读入内存，您可以考虑使用[`pickle`](http://docs.python.org/2/library/pickle.html#module-cPickle)or[`json`](http://docs.python.org/2/library/json.html)来存储您的文件，并将其序列化为`dict`. 这样您就可以读入文件并立即将标题作为键取出。

python[`shelve`](http://docs.python.org/2/library/shelve.html)模块还为您提供了一个更高级别的对象，该对象将充当字典，并为您处理对底层数据库文件的序列化。它基本上是一个持久字典。这可能是效率和性能的最佳平衡。

使用普通 dict 或使用 shelve 都意味着没有字符串解析，因为键是您的标题，值是您的密码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T04:22:21.960

```
def find_pass(fname,target_title):
    with open(fname) as f:
        for ln in f:
            # some test to see if this is the line you want
            if ln.startswith(target_title):
                return ln[len(target_title):].strip() 
```

# java - Java GUI 旋转和平移矩形

> ID：14107768
> 
> 赞同：4
> 
> 时间：2013-01-01T04:10:52.537
> 
> 标签：java, swing, rotation, awt, java-2d

我正在尝试在 JPanel 中绘制一个矩形，该矩形将平移然后自行旋转以模仿汽车的运动。我已经能够使矩形平移和旋转，但是它围绕（0,0）的原点旋转。我很高兴我能够让矩形移动和旋转，因为我对 Java GUI 很陌生，但我似乎不知道如何让矩形围绕自身旋转，因为我对它进行了更多实验，以及何时我初始化了矩形并将其旋转 45 度，它的位置发生了变化，我假设这是从旋转方法附加的变换矩阵。

我在网站上查看了如何解决这个问题，但是我只找到了如何旋转一个矩形，而不是如何像模拟汽车的运动一样旋转和移动。我认为它与它的变换矩阵有关，但我只是在推测。所以我的问题是我怎样才能让矩形能够旋转和移动，而不是靠在 JPanel 中的一个点上。

这是我到目前为止提出的代码：

```
public class Draw extends JPanel implements ActionListener {

private int x = 100;
private int y = 100;
private double theta = Math.PI;

Rectangle rec = new Rectangle(x,y,25,25);

Timer timer = new Timer(25,this);

Draw(){
    setBackground(Color.black);
    timer.start();
}

public void paintComponent(Graphics g){
    super.paintComponent(g);
    Graphics2D g2d = (Graphics2D)g;     
    g2d.setColor(Color.white);
    rec.x = 100;
    rec.y = 100;
    g2d.rotate(theta);
    g2d.draw(rec);
    g2d.fill(rec);

}

public void actionPerformed(ActionEvent e) {
    x = (int) (x + (Math.cos(theta))*1);
    y = (int) (y + (Math.sin(theta))*1);
    theta = theta - (5*Math.PI/180);
    repaint();
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-01T06:05:25.867

通常使用以下两种方法之一：

*   *围绕 的中心 ( x* , *y* )旋转图形上下文，`Shape`如下所示[。](https://stackoverflow.com/a/5594424/230513)

    ```
    rotate(double theta, double x, double y) 
    ```

*   平移到原点，旋转并向后平移，如图[所示](https://stackoverflow.com/a/3420651/230513)。

    ```
    g2d.translate(this.getWidth() / 2, this.getHeight() / 2);
    g2d.rotate(theta);
    g2d.translate(-image.getWidth(null) / 2, -image.getHeight(null) / 2); 
    ```

请注意第二个示例中*明显*的串联顺序相反。

附录：更仔细地查看您的示例，以下更改`Rectangle`围绕面板中心旋转。

```
g2d.rotate(theta, getWidth() / 2, getHeight() / 2); 
```

此外，使用`@Override`注释，并为您的面板提供合理的首选尺寸：

```
@Override
public Dimension getPreferredSize() {
    return new Dimension(640, 480);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T04:35:16.123

使用仿射变换旋转矩形并将其转换为旋转多项式。检查下面的代码：

```
public void paintComponent(Graphics g) {
    super.paintComponent(g);
    Graphics2D g2d = (Graphics2D) g;
    g2d.setColor(Color.white);
    /* rotate rectnagle around rec.x and rec.y */
    AffineTransform at = AffineTransform.getRotateInstance(theta, 
        rec.x, rec.y);
    /* create the plunomial */
    Polygon p = new Polygon();
    /* path interator of the affine transformed polynomial */
    PathIterator i = rec.getPathIterator(at);
    while (!i.isDone()) {
        double[] points = new double[2];
        i.currentSegment(points);
        p.addPoint((int) points[0], (int) points[1]);

        i.next();
    }
    g2d.fill(p);
} 
```

# java - Java 泛型 - 何时使用“T”和“？”

> ID：14107774
> 
> 赞同：0
> 
> 时间：2013-01-01T04:12:52.977
> 
> 标签：java, generics

有什么区别？

```
public class MyClass<? extends MySuperClass> {

     private T data ;
     private MyClass<? extends MySuperClass> parent ;

} 
```

和

```
public class MyClass<T extends MySuperClass> {

     private T data ;
     // the below line - no compilation errors
     private MyClass<? extends MySuperClass> parent ;
     // the below line - compilation errors 
     private MyCLass<T extends MySuperClass> child ;

} 
```

什么时候用什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T04:24:38.043

`<T>`, `<T>`, 和`<?>`完全不同。

*   `class X<T>`声明一个泛型类，其类型参数（占位符）名为`T`. 在该类中，`T`是一个有效类型。

*   `X<T> something`是变量或字段声明。它声明一个类型为泛型的变量，并*指定*泛型参数的值。

*   `X<?> something`也是一个变量或字段声明。它声明了一个类型为泛型的变量，但没有指定泛型参数的值。

* * *

创建泛型类时，您可以选择向泛型参数添加约束，指定当人们声明该类的实例（变量）时允许的类型。

因此，`class X<T extends SomeClass>`创建了一个具有不太灵活的类型参数的泛型类。

* * *

当您使用泛型类（例如，`private Collection<String> myStrings`）时，您显然不能对泛型参数的值指定约束（因为您已经指定了实际值）。

因此，`private Collection<String extends Comparable> myStrings`没有任何意义。

* * *

当您使用带有通配符（或未*绑定*）参数（例如，`private Collection<?> myThingies`）的泛型类时，您可以选择对可能的参数指定约束。这允许您假设有关泛型参数的（未知）值的事情。

因此，`private Collection<? extends Runnable> myRunners` 是一些未知类型的集合，可保证该类型实现`Runnable`. 因此，您可以调用`.run()`集合中的事物。
但是，您不能在集合中添加任何内容，因为您不知道集合实际上应该包含什么类型。

# php - 我想从magento后端订单中获取订单的送货地址ID

> ID：14107775
> 
> 赞同：0
> 
> 时间：2013-01-01T04:12:56.253
> 
> 标签：php, zend-framework, magento

我试过这个

```
$sales_order = Mage::getModel('sales/order')->load($_order->getRealOrderId());
$billing_address_id = $sales_order->billing_address_id; 
$shipping_address_id = $sales_order->shipping_address_id; 
```

这不适用于后端订单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T11:23:50.110

不要使用 realOrderId() 加载模型 - 使用 id 代替，即 $_order->getId()

您正在使用的代码在哪里？我假设您正在加载一个订单集合 - 您应该能够将 shipping_address_id 属性添加到选择中，这样您就不必重新加载模型。IE..

$orderCollection->addAttributeToSelect('shipping_address_id');

最后，我个人会根据具体情况使用 getData() 或魔法吸气剂来检索 magento 模型上的属性，即

getData('shipping_address_id')

或者

getShippingAddressId()

# zend-framework2 - Zend Framework 2 - 身份验证/ACL

> ID：14107778
> 
> 赞同：4
> 
> 时间：2013-01-01T04:14:12.903
> 
> 标签：zend-framework2, zend-auth, zend-acl

嗨，我是 ZF2 的新手，我正在尝试通过创建扩展应用程序来了解主要概念，以了解有关 ZF2 的所有信息并测试我的知识。

如果我的问题听起来很愚蠢，或者我在使用东西的过程中没有得到一些东西，请原谅我，我会边走边学。

此时我想将身份验证和 ACL 集成到我的项目中，我需要回答一些问题，以便我大致了解此过程的工作原理以及如何使用它。

我已经集成了一个登录表单，所以我可以进行身份​​验证，我可以这样做，创建一个 PHP 会话 Cookie，我可以通过 AuthService 中的 hasIdentity() 识别用户。

当我即将创建 ACL 时，我阅读了文档并认为我理解了它，如果用户有权访问某些页面/控制器等，我如何能够检查我的应用程序的每个页面请求。

从我阅读的内容来看，它必须在模块的引导程序中，以便在每个页面加载时识别用户并检查 ACL 的访问权限。如果用户有权限，他被授予访问权限并请求了我加载的页面，但如果他没有访问权限，他将被重定向到任何其他页面（索引/索引或错误页面等）

但到目前为止，我找不到任何有用的教程或关于如何为我的模块创建引导程序以及如何实现预加载访问检查的真正好的建议。

是否有任何有用的文章（带有代码以便更好地理解）或关于如何使 auth acl 和模块引导程序工作并一起工作的教程？在尝试让我的用户系统正常工作时，我还必须注意其他事项吗？

提前感谢您的任何建议！

顺便说一句，新年快乐 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T21:02:41.400

Ive been working on the same problem recently and i came across a tutorial that can be modified to bootstrap some auth checks.

[http://akrabat.com/zend-framework-2/simple-logging-of-zf2-exceptions/](http://akrabat.com/zend-framework-2/simple-logging-of-zf2-exceptions/)

I hope this helps :)

# java - 如何上传 CSV 文件，然后自动将数据插入数据库？

> ID：14107788
> 
> 赞同：4
> 
> 时间：2013-01-01T04:17:26.987
> 
> 标签：java, spring, web-applications, file-upload, supercsv

我有基于 Java 的 Spring MVC 应用程序，它也使用 Spring 安全性。我正在使用 hibernate 作为这个 web 应用程序的 ORM 工具。

以下是我的要求——

用户将能够使用 Web 浏览器上传 CSV 文件。CSV 文件的格式已知有以下 5 个字段：

```
userId, location, itemId, 数量, tranDate
001，纽约，00A8D5，2，2012 年 12 月 31 日
002，明尼苏达州，00A7C1，10，2012 年 12 月 22 日
.
.

```

像这样有大约 100 行。

我在项目中使用 Super CSV：

```
private void readWithCsvBeanReader(String CSV_FILENAME) throws Exception {

    String CSV_FILENAME = "\\\\Serv01\\Files\\QueryResult.csv";
    //String CSV_FILENAME = "C:\\Files\\QueryResult.csv";
    ICsvBeanReader beanReader = null;
    try {
        beanReader = new CsvBeanReader(new FileReader(CSV_FILENAME),
                CsvPreference.STANDARD_PREFERENCE);

        // the header elements are used to map the values to the bean (names
        // must match)
        final String[] header = beanReader.getHeader(true);
        // get Cell Processor
        final CellProcessor[] processors = getProcessors(); 
```

在这里，我正在读取 CSV 文件的内容，然后使用 Hibernate 插入它。

这很好用，因为我在本地或 Windows 共享上提供 CSV 路径。

```
String CSV_FILENAME = "\\\\Serv01\\Files\\QueryResult.csv";
or via this:
String CSV_FILENAME = "C:\\Files\\QueryResult.csv"; 
```

1.  如何实现此要求，以便使用 Spring MVC 的网页上的按钮提供 CSV 文件路径位置？

2.  是否也可以从远程位置自动获取文件，以便我将文件上传到 FTP 位置，然后程序可以连接到远程 ftp 位置并按计划处理文件？

PS：我是文件操作的新手，如果有人可以指出一些文章，那就太好了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T16:53:23.903

> 像这样有大约 100 行。

不要费心将 CSV 保存为 tmp 文件，因为 Spring 的[Mulitpart](http://static.springsource.org/spring/docs/3.0.0.M3/reference/html/ch16s08.html)会为您执行此操作并直接插入行（*该请求可能需要更长的时间来处理，但鉴于您表面上的当前知识，您可以担心稍后优化*）

```
private void readWithCsvBeanReader(MultipartFile uploadedFile) throws Exception {

    ICsvBeanReader beanReader = null;
    try {
        beanReader = new CsvBeanReader(new InputStreamReader(uploadedFile.getInputStream()),
                CsvPreference.STANDARD_PREFERENCE);

        // the header elements are used to map the values to the bean (names
        // must match)
        final String[] header = beanReader.getHeader(true);
        // get Cell Processor
        final CellProcessor[] processors = getProcessors(); 
```

使您的控制器类似于：

```
@RequestMapping(value = "/add", method=RequestMethod.POST)
public String upload(@RequestParam("file") MultipartFile file) throws IOException {
// call your csv parsing code.
} 
```

确保你的 FORM 看起来像：

```
<h1>Add a File for testing</h1>
<form method="post" action="/add" class="well form-vertical" enctype="multipart/form-data">
    <input type="file" name="file" />
    <button type="submit" class="btn">{{actionLabel}}</button>
</form> 
```

**注意`enctype`**

对于输入和输出，您应该了解[Java 的 IO 装饰器模式](https://stackoverflow.com/questions/6366385/decorator-pattern-for-io)。

**我建议你尽可能简单，这样你就可以学习基础知识。然后担心添加更强大的解决方案/库。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T07:48:11.693

[您需要按照此处](http://www.mkyong.com/spring-mvc/spring-mvc-file-upload-example/)的说明创建 FileUploadController 。然后，当您将文件作为 servlet 中的流获取时，您需要进行所有验证并将文件保存到临时/永久位置，以便以后在数据库导入过程中使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T16:07:30.517

为了使用远程 FTP 文件位置，我会研究 Spring Integration。这方面的文档在[这里](http://static.springsource.org/spring-integration/reference/html/ftp.html)。

# ios - Xcode 4 和 Interface Builder：编辑垂直间距约束（锚定顶部，而不是底部）

> ID：14107799
> 
> 赞同：8
> 
> 时间：2013-01-01T04:20:36.413
> 
> 标签：ios, xcode, cocoa-touch, interface-builder, xib

我有一个在设备上布局不正确的小部件（它在 IB 中*看起来*不错，但不太正确）。小部件是一个标签，它位于屏幕中间。Interface Builder 给它一个带有“底部锚点”的垂直空间约束。在这里，bottom 表示屏幕的底部（而不是下方的小部件，或锚定到顶部屏幕）。

我在检查员中，但我看不到如何更改为顶部锚点（最好是上面的小部件）。我尝试阅读 Apple 的[文档](http://developer.apple.com/library/ios/#recipes/xcode_help-interface_builder/articles/UnderstandingAutolayout.html)和特别是[Editing Constraints](http://developer.apple.com/library/ios/#recipes/xcode_help-interface_builder/articles/AutolayoutEditing.html)，但它令人困惑，并没有解释如何进行更改（或者我错过了讨论 - 这是 7 句话）。

下面是界面生成器下的屏幕截图，显示了固定在屏幕底部的垂直空间约束。它的属性还有很多不足之处——Equal、Constant 和 Priority 并没有真正的帮助。

![在此处输入图像描述](../Images/47d6d5ec37fd18674a533f338b7c1642.png)

有谁知道如何编辑约束？具体来说，我想（1）从底部*到*顶部更改垂直间隔的锚；(2) 锚定在上面的小部件上，而不是屏幕顶部。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-01T08:34:32.760

按住 shift 键同时选择“Embedded”和“Calculated”元素。

选择这两个元素后，使用约束菜单：

![在此处输入图像描述](../Images/bba7140a65888f61ce366edd08276474.png)

这个菜单，连同精心选择的元素，是在 IB 中愉快地编辑约束的核心。在您的情况下，选择中心项目，即 Pin 菜单。选择垂直间距 - 这将在两个元素之间的垂直间距上创建一个新的约束。或者，选择单个元素并将“Top space to superview”固定到顶部而不是底部。

您现在可以选择并删除视图底部的垂直间距。IB 之前不会让你删除它，因为你必须有一套完整的、明确的约束。添加新的垂直间距约束后，您现在有了它。

为了进一步说明，这是一个空的视图控制器，我拖了一个文本字段：

![在此处输入图像描述](../Images/d625a859bbcf7c3f2efde45c862cb985.png)

所有约束都是紫色的，这意味着 IB 已经为我添加了它们（它们是系统约束）并且它们不能被删除——它们是定位和调整文本字段大小所需的最小约束。

现在，我将选择文本字段，并将顶部空间固定到超级视图：

![在此处输入图像描述](../Images/898f5a73c0e47c73cadba13b3e4eae7b.png)

现在您可以看到两个垂直空间约束已变为蓝色（它们现在是用户约束）并且它们在编辑器中的外观更厚。这意味着可以删除其中之一。我选择底部空间的约束并点击删除：

![在此处输入图像描述](../Images/7e80dda83f1ad1463be0a6f5d9806e53.png)

请注意，这仍然具有用户约束的外观 - 但如果我尝试删除它，IB 将自动重新创建固定到超级视图底部的系统约束，让我们回到第一方。

我在这里写过关于这个以及类似的自动布局主题的[文章](http://commandshift.co.uk/blog/2013/01/18/autolayout-in-interface-builder/)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-21T22:00:53.487

我得到了一个关于自动布局的词。如果有效，则有效，但如果无效，则使用老式方式（使用代码）

# .net - 使用 PE 导出表解析函数地址

> ID：14107801
> 
> 赞同：1
> 
> 时间：2013-01-01T04:21:01.417
> 
> 标签：.net, dll, mapping, dllexport, portable-executable

谁能解释我如何从 PE 图像中正确获取函数地址，然后使用委托调用该函数？我发现了一个很好的谷歌搜索代码，它可以从 DLL 库中加载导出，但它只能从中获取函数名......所以我对其进行了如下修改：

```
[DllImport("ImageHlp", CallingConvention = CallingConvention.Winapi), SuppressUnmanagedCodeSecurity]
public static extern bool MapAndLoad(string imageName, string dllPath, out LOADED_IMAGE loadedImage, bool dotDll, bool readOnly);

public static IntPtr CustomGetProcAddress(string modulePath, string moduleProc)
{
    LOADED_IMAGE loadedImage;

    if (MapAndLoad(modulePath, null, out loadedImage, true, true))
        return GetAddr(loadedImage, moduleProc);
    else
        return IntPtr.Zero;
}

private static IntPtr GetAddr(LOADED_IMAGE loadedImage, string moduleProc)
{
    var hMod = (void*)loadedImage.MappedAddress;

    if (hMod != null)
    {
        uint size;
        var pExportDir = (IMAGE_EXPORT_DIRECTORY*)ImageDirectoryEntryToData(
            (void*)loadedImage.MappedAddress,
            false,
            IMAGE_DIRECTORY_ENTRY_EXPORT,
            out size);

        uint* pFuncNames = (uint*)RvaToVa(loadedImage, pExportDir->AddressOfNames);
        ushort* pFuncOrdinals = (ushort*)RvaToVa(loadedImage, pExportDir->AddressOfNameOrdinals);
        uint* pFuncAddr = (uint*)RvaToVa(loadedImage, pExportDir->AddressOfFunctions);

        for (uint i = 0; i < pExportDir->NumberOfNames; i++)
        {
            uint funcNameRva = pFuncNames[i];

            if (funcNameRva != 0)
            {
                char* funcName = (char*)RvaToVa(loadedImage, funcNameRva);
                string name = Marshal.PtrToStringAnsi((IntPtr)funcName);
                _exports.Add(name);

                if (name == wantedFunction)
                    return addr = new IntPtr(*(uint*)(pFuncAddr + (*pFuncOrdinals * 4)));
            }
        }
    }

    return IntPtr.Zero;
} 
```

我确定我引用了接近解决方案...但我总是得到 AccessViolationException （当我使用错误的指针时）或 InvalidFunctionPointerInDelegate 和 PInvokeStackImbalance （当我尝试使用 Marshal.GetDelegateForFunctionPointer 将指针转换为委托然后执行它时）。我尝试了所有方法，但无法使其工作（我已经使用 LoadLibrary 和 GetProcAddress 提取了我正在寻找的函数的正确地址......所以我可以比较结果，但我不想使用那些职能）。

[编辑]我找到了另一个例子，但我不确定它是否能满足我的要求： [http : *//www.rohitab.com/discuss/topic/39366-c-loadlibary-from-byte/page_k* _bb2fe024f8a71424996db6d9af08c1fc_ *settingNewSkin* _19](http://www.rohitab.com/discuss/topic/39366-c-loadlibary-from-byte/page__k__bb2fe024f8a71424996db6d9af08c1fc__settingNewSkin__19)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T18:04:07.797

你不能那样做。库中的`MapAndLoad`and 函数`ImageHlp`仅将 PE 文件作为数据文件加载到内存中，以便对其进行检查。它不会运行 Windows 加载程序在加载 DLL 以使其可执行（RVA 修复等）时执行的所有逻辑。

如果要加载 DLL，按名称查找函数并获取指向它的可调用指针，请使用`LoadLibrary`and `GetProcAddress`。这些功能旨在完成您正在尝试做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T02:45:19.550

如前所述，该`MapAndLoad`函数只是将文件作为数据加载 - 它加载到的内存页面将不可执行，因此尝试跳转到该内存中的某个位置几乎肯定不会起作用。如果你想绕过使用，你将需要一个更复杂的方法`LoadLibrary`——但第一步是确保将 PE 文件的可执行部分加载到可执行内存中（然后实现所有其他功能Windows Loader！）我从来没有尝试过这个，但从我在简短搜索中可以看到，有许多与解决诸如 Windows DEP（数据执行保护）等问题相关的问题。

# networking - 选择 172.16/192.168 背后的原因？

> ID：14107804
> 
> 赞同：22
> 
> 时间：2013-01-01T04:22:58.687
> 
> 标签：networking, protocols

众所周知，有三个 IPv4 地址块被选择为专用网络保留：

```
 10.0.0.0        -   10.255.255.255  (10/8 prefix)
 172.16.0.0      -   172.31.255.255  (172.16/12 prefix)
 192.168.0.0     -   192.168.255.255 (192.168/16 prefix) 
```

（由[RFC 1918](https://www.rfc-editor.org/rfc/rfc1918)指定）。然而，虽然我可以理解为什么 10.0.0.0 会是一个自然的选择，但我想不出为什么在所有可能性中选择 172.16.0.0 和 192.168.0.0 的具体原因。我试图用谷歌搜索，但什么也没得到，RFC 文档也没有提供任何解释。这真的只是一个随机的决定吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-01T04:29:53.117

正如 ganeshh.iyer 所说“

> 10.0.0.0/8 是旧的 ARPANET，他们于 1983 年 1 月 1 日开始使用。当他们在 1990 年关闭 ARPANET 时，10.0.0.0/8 块被释放。考虑到 IPv4 的目标对网络上的所有主机都是通用的，是否应该存在私有 IP 空间存在很多争论。
> 
> 最后，实用性胜出，RFC 1597 保留了现在众所周知的私有地址空间。当 ARPANET 消失时，10.0.0.0/8 分配被标记为保留，因为已知 ARPANET 确实消失了（主机被转移到 MILNET、NSFNET 或 Internet），所以决定这是最好的 A 类要分配的块。
> 
> 注意 A 类。这是在 CIDR 之前。因此，A、B 和 C 类私有地址网络块需要超出正确的 IP 范围。
> 
> 我知道选择 172.16.0.0/12 是因为它在保留块中的 IP 空间中提供了最连续的 B 类 (/16) 地址块。192.0.0.0/24 始终被保留，原因与 0.0.0.0/8 和 128.0.0.0/16 被保留（旧 C、A 和 B 类网络块的第一个块）相同，因此将 192.168.0.0/24 分配为私人适合 - 192.0.2.0/24 已经是 TEST-NET，您可以在公共文档中使用它们而不必担心有人尝试它（参见 example.com 的另一个示例。）“

引用自：

*   [https://supportforums.cisco.com/thread/2014967](https://supportforums.cisco.com/thread/2014967)
*   [https://supportforums.cisco.com/people/ganeshh.iyer](https://supportforums.cisco.com/people/ganeshh.iyer)

# c# - 谁能告诉我为什么我不能从它的项目之外访问这个代码？

> ID：14107806
> 
> 赞同：0
> 
> 时间：2013-01-01T04:24:03.113
> 
> 标签：c#, .net, vb.net, visual-studio-2010, api

我在网上找到了一些用于图像搜索/识别的代码，因为我几乎不知道任何 csharp，所以我把它放在一个类中并构建它。现在，当我尝试从 vb 项目访问它时，它不会出现。即使在引用它之后，我也无法真正访问它。我很奇怪，因为这些功能没有共享，据我所知，C# 中的“静态”与 vb.net 中的“共享”相同。虽然在添加它时出现错误。任何人都可以确认这是否是我可以的问题'不访问它？？当我从我的 vb.net 项目中引用这个项目时，我也无法访问这些类。

```
using System;
using System.Collections.Generic;
using System.Drawing;
using System.Linq;
using System.Text;
using System.IO;

namespace ImageRecognition
{
class LockedFastImage
{
    private Bitmap image;
    private byte[] rgbValues;
    private System.Drawing.Imaging.BitmapData bmpData;

    private IntPtr ptr;
    private int bytes;

    public LockedFastImage(Bitmap image)
    {
        this.image = image;
        Rectangle rect = new Rectangle(0, 0, image.Width, image.Height);
        bmpData = image.LockBits(rect, System.Drawing.Imaging.ImageLockMode.ReadWrite, image.PixelFormat);

        ptr = bmpData.Scan0;
        bytes = Math.Abs(bmpData.Stride) * image.Height;
        rgbValues = new byte[bytes];
        System.Runtime.InteropServices.Marshal.Copy(ptr, rgbValues, 0, bytes);
    }

    ~LockedFastImage()
    {
        // Try to unlock the bits. Who cares if it dont work...
        try
        {
            image.UnlockBits(bmpData);
        }
        catch { }
    }

    /// <summary>
    /// Returns or sets a pixel of the image. 
    /// </summary>
    /// <param name="x">x parameter of the pixel</param>
    /// <param name="y">y parameter of the pixel</param>
    public Color this[int x, int y]
    {
        get
        {
            int index = (x + (y * image.Width)) * 4;
            return Color.FromArgb(rgbValues[index + 3], rgbValues[index + 2], rgbValues[index + 1], rgbValues[index]);
        }

        set
        {
            int index = (x + (y * image.Width)) * 4;
            rgbValues[index] = value.B;
            rgbValues[index + 1] = value.G;
            rgbValues[index + 2] = value.R;
            rgbValues[index + 3] = value.A;
        }
    }

    /// <summary>
    /// Width of the image. 
    /// </summary>
    public int Width
    {
        get
        {
            return image.Width;
        }
    }

    /// <summary>
    /// Height of the image. 
    /// </summary>
    public int Height
    {
        get
        {
            return image.Height;
        }
    }

    /// <summary>
    /// Returns the modified Bitmap. 
    /// </summary>
    public Bitmap asBitmap()
    {
        System.Runtime.InteropServices.Marshal.Copy(rgbValues, 0, ptr, bytes);
        return image;
    }
}

class ImageChecker
{

    private LockedFastImage big_image;
    private LockedFastImage small_image;
    /// <summary>
    /// The time needed for last operation.
    /// </summary>
    public TimeSpan time_needed = new TimeSpan();

    /// <summary>
    /// Error return value.
    /// </summary>
    static public Point CHECKFAILED = new Point(-1, -1);

    /// <summary>
    /// Constructor of the ImageChecker
    /// </summary>
    /// <param name="big_image">The image containing the small image.</param>
    /// <param name="small_image">The image located in the big image.</param>
    public ImageChecker(Bitmap big_image, Bitmap small_image)
    {
        this.big_image = new LockedFastImage(big_image);
        this.small_image = new LockedFastImage(small_image);
    }

    /// <summary>
    /// Returns the location of the small image in the big image. Returns CHECKFAILED if not found.
    /// </summary>
    /// <param name="x_speedUp">speeding up at x achsis.</param>
    /// <param name="y_speedUp">speeding up at y achsis.</param>
    /// <param name="begin_percent_x">Reduces the search rect. 0 - 100</param>
    /// <param name="end_percent_x">Reduces the search rect. 0 - 100</param>
    /// <param name="begin_percent_x">Reduces the search rect. 0 - 100</param>
    /// <param name="end_percent_y">Reduces the search rect. 0 - 100</param>
    public Point bigContainsSmall(int x_speedUp = 1, int y_speedUp = 1, int begin_percent_x = 0, int end_percent_x = 100, int begin_percent_y = 0, int end_percent_y = 100)
    {
        /*
         * SPEEDUP PARAMETER
         * It might be enough to check each second or third pixel in the small picture.
         * However... In most cases it would be enough to check 4 pixels of the small image for diablo porposes.
         * */

        /*
         * BEGIN, END PARAMETER
         * In most cases we know where the image is located, for this we have the begin and end paramenters.
         * */

        DateTime begin = DateTime.Now;

        if (x_speedUp < 1) x_speedUp = 1;
        if (y_speedUp < 1) y_speedUp = 1;
        if (begin_percent_x < 0 || begin_percent_x > 100) begin_percent_x = 0;
        if (begin_percent_y < 0 || begin_percent_y > 100) begin_percent_y = 0;
        if (end_percent_x < 0 || end_percent_x > 100) end_percent_x = 100;
        if (end_percent_y < 0 || end_percent_y > 100) end_percent_y = 100;

        int x_start = (int)((double)big_image.Width * ((double)begin_percent_x / 100.0));
        int x_end = (int)((double)big_image.Width * ((double)end_percent_x / 100.0));
        int y_start = (int)((double)big_image.Height * ((double)begin_percent_y / 100.0));
        int y_end = (int)((double)big_image.Height * ((double)end_percent_y / 100.0));

        /*
         * We cant speed up the big picture, because then we have to check pixels in the small picture equal to the speeded up size 
         * for each pixel in the big picture.
         * Would give no speed improvement.
         * */

        //+ 1 because first pixel is in picture. - small because image have to be fully in the other image
        for (int x = x_start; x < x_end - small_image.Width + 1; x++)
            for (int y = y_start; y < y_end - small_image.Height + 1; y++)
            {
                //now we check if all pixels matches
                for (int sx = 0; sx < small_image.Width; sx += x_speedUp)
                    for (int sy = 0; sy < small_image.Height; sy += y_speedUp)
                    {
                        if (small_image[sx, sy] != big_image[x + sx, y + sy])
                            goto CheckFailed;
                    }

                //check ok
                time_needed = DateTime.Now - begin;
                return new Point(x, y);

            CheckFailed: ;
            }

        time_needed = DateTime.Now - begin;
        return CHECKFAILED;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T04:25:31.573

您没有将`public`访问修饰符添加到您的类中，因此它们会自动声明为`internal`. 修复它，一切都应该工作。

例子：

```
public class LockedFastImage { /*Your code...*/} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T04:28:25.273

您没有为您的类指定任何访问说明符，因此默认情况下您的类`internal`就是您无法在程序集之外访问它的原因。

[对于类和结构访问修饰符 - MSDN](http://msdn.microsoft.com/en-us/library/ms173121.aspx)

> 直接在命名空间中声明的类和结构（换句话说，不嵌套在其他类或结构中）可以是公共的或内部的。**如果未指定访问修饰符，则默认为 Internal。**

```
public class LockedFastImage 
{.... 
```

您可能会看到[访问修饰符 C# - MSDN](http://msdn.microsoft.com/en-us/library/ms173121.aspx)

**内部的**

> 类型或成员可以由同一程序集中的任何代码访问，但不能从另一个程序集中访问。

# ios - 当用户在弹出框之外触摸时，不想在 Titanium 中关闭弹出框

> ID：14107808
> 
> 赞同：0
> 
> 时间：2013-01-01T04:25:15.963
> 
> 标签：ios, titanium, appcelerator, titanium-mobile, popover

我刚开始在 Titanium 工作。现在使用以下代码在钛中处理弹出框。

```
var myPopover = Ti.UI.iPad.createPopover({ height: 150, width: 150 });
popover.add(view);
popover.show({ view: button }); 
```

我的问题是，当用户在弹出框之外触摸时，弹出框正在关闭（默认行为），我不希望这样。

在 iOS 中有一个委托方法叫做：`- (BOOL)popoverControllerShouldDismissPopover:(UIPopoverController *)popoverController`. 如果我们不想在用户触摸外部时关闭弹出框只是返回`NO`，有没有办法在**Titanium**中做到这一点？我阅读了[**Titanium.UI.iPad.Popover**](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.UI.iPad.Popover)文档，但找不到任何此类方法。

请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T16:18:49.573

不幸的是，如果您自己没有大量工作，您将无法在短期内完成。

一些技巧：

不要相信 api 文档包含所有内容。相反，要么查看 Github 中的 SDK，要么在您的系统上找到 SDK，然后在 iOS（在 iPhone 文件夹中）类中搜索此方法。

如果你去 appcelerator 的 JIRA 账户，你可以请求这个实现。去 Q&A 并发出一些声音，让其他人关注 JIRA 问题，以便 Appcelerator 优先处理它。

您可以编写一个扩展弹出框功能的模块，实际上使用模块您可以扩展任何内容并自己创建 javascript 桥接器，以便您可以访问任何属性或任何您想要的内容。Wiki 上有这方面的指南..

快乐狩猎；）

# java - 当 Android NatveActivity 在 C++ JNI 端完成/退出时如何获取回调？

> ID：14107813
> 
> 赞同：2
> 
> 时间：2013-01-01T04:26:23.630
> 
> 标签：java, android, android-ndk, java-native-interface, opengl-es-2.0

我有一个运行 openGL 窗口的本机活动，并集成了一个 JNI，我还注册了调用，因此我可以将 c++ 调用到 Java，反之亦然。

因为我必须在 Java 端调用完成之前分离本机线程，所以我不能有从 c++ 到 Java 的注册调用（因为我必须释放它，否则我会从 DalvinVM 收到错误报告，表明本机线程没有分离）。

你能告诉我我可以在 c++ 端调用哪个函数来“finish()”这个本机活动（JNI 提供的一些调用）吗？在 Java 方面我可以期待什么回调？OnDestroy 会被调用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-07T16:36:00.860

所以必须做的是当你从 c++ 端退出主循环时，本机活动终止。无需在 c++ 和 Java 之间进行复杂的通信。

# c# - 在调整大小时沿父元素移动元素

> ID：14107816
> 
> 赞同：0
> 
> 时间：2013-01-01T04:27:02.123
> 
> 标签：c#, wpf, graphics, pixelsense

我现在是表面开发的新手（Pixelsense）。我在 ScatterView 中的图像上有对象或元素。我想要的是当 ScatterViewItems 被调整大小（缩放）时，我希望元素也被转换到相同的位置并且大小也应该改变，以便元素看起来被缩放。正如我在图片中显示的那样，

![在此处输入图像描述](../Images/0f3f837ce571f5ef00f48aaaf4503779.png)
红色框可以调整大小，因此圆圈也需要调整大小，并且需要以相同的方式转换为新坐标。

# javascript - 使用 Javascript 动态创建具有递增 ID 的 dom 元素

> ID：14107817
> 
> 赞同：4
> 
> 时间：2013-01-01T04:27:33.250
> 
> 标签：javascript, dom

我有一个 ID 为“orangeButton”的 div，每次单击它都会创建一个新的 div。这很好用，但是......我希望每个新创建的 div 都有一个递增的数字添加到它的 ID。

我不知道该怎么做。

这是迄今为止我的评论代码的小提琴。

[http://jsfiddle.net/taoist/yPrab/1/](http://jsfiddle.net/taoist/yPrab/1/)

谢谢

**Javascript代码**

```
 var applicationArea = document.getElementById("applicationArea");
    var orangeButton = document.getElementById("orangeButton");

    orangeButton.onclick = function() {
      var newDivThingy = document.createElement("div");
      newDivThingy.id  = 'newDivThingy';  // I want each newly created div to have a      numeric value concatenated to it's ID. IE newDivThingy1 newDivThingy2 newDivThingy3
      applicationArea.appendChild(newDivThingy);

    };​ 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-01T04:31:41.110

我错过了什么，为什么不使用计数器？

```
var counter = 0;
button.onclick = function(){
   var newDivThingy = document.createElement("div");
   newDivThingy.id  = 'newDivThingy' + (++counter);
   // continue your stuff here     
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T04:51:33.023

像 underscorejs 这样的库为此提供了一个 uniqueid 函数。否则它很容易实现。

```
myNamespace.uniqueId = (function () {
    var counter = 0; // in closure
    return function (prefix) {
        counter++;
        return (prefix || '') + '-' + counter; 
    };
}()); 
```

用法。

```
newDiv.id = myNamespace.uniqueId('newDiv'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T04:36:15.267

只需使用一个整数并在添加每个元素时递增它。

```
var applicationArea = document.getElementById("applicationArea"),
    orangeButton = document.getElementById("orangeButton"),
    counter = 1;

orangeButton.onclick = function() {
    var newDivThingy = document.createElement("div");
        newDivThingy.id = "newDivThingy" + counter++;
    applicationArea.appendChild(newDivThingy);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-14T17:45:37.320

我毫不怀疑您有解决方案，并且可能已经忘记了这篇文章。但是，我想展示一个紧凑格式的解决方案。

请注意，计数器设置为 (counter++)，因此它将从 1 开始。

```
var orangeButton = document.getElementById("orangeButton");
var counter = 0;
  orangeButton.onclick = function() {
    document.getElementById('applicationArea')
    .appendChild(document.createElement('div'))
    .setAttribute("id", 'newDivThingy' + counter++);
  // I want each newly created div to have a
  // numeric value concatenated to it's ID.
  // IE newDivThingy1 newDivThingy2 newDivThingy3
  };​ 
```

# ms-access - 访问 2007 年男性、女性、男女通用类别的任一性别

> ID：14107822
> 
> 赞同：0
> 
> 时间：2013-01-01T04:29:03.023
> 
> 标签：ms-access, ms-access-2007

我是 Access 2007 的新手。我是一名 ERP 功能顾问，几乎没有编程经验。

我正在设置一个供个人使用的 Access 数据库。假设我有男性、女性、男女皆宜的产品类别。我有黑色和白色的产品颜色。输入订单时，我选择颜色（组合框），即黑色，然后选择性别（组合框），即男性。在订单表格中，性别可以是男性或女性，但不是男女皆宜。

在 prodcut id 字段（组合框）中，我需要查看具有男性和中性性别的黑色项目。

当我在产品 ID 组合中设置查询时，OR 运算符位于 AND 运算符之前，然后我也会看到白色项目。结果，我看到了所有男性和中性物品。

可以这么说，我找不到将 OR 运算符放在 AND 运算符中的方法。

我改变了方法，没有将男性、女性、中性放在一个字段中，而是创建了两个复选框字段，男性和女性。这次我尝试查询 Products.Male=True if GenderCombo=Male, Products.Female=True if GenderCombo=Female 以及颜色但没有运气。

您推荐哪种方法以及查询应该是什么样的。

在此先感谢您的帮助。

贝克尔。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T08:13:00.673

检查您的查询脚本，并注意 AND 的优先级高于 OR。你将不得不使用括号来得到你想要的。

例子：

```
where productcolor = 'Black' and gender = 'Unisex' or gender = 'Male' 
```

这将为您提供所有黑色中性和任何颜色的所有男性。

你想要的可能是：

```
where productcolor = 'Black' and (gender = 'Unisex' or gender = 'Male') 
```

你也可以这样写：

```
where productcolor = 'Black' and gender in ('Unisex', 'Male') 
```

# java - 实现其他类的方法

> ID：14107823
> 
> 赞同：-1
> 
> 时间：2013-01-01T04:29:11.700
> 
> 标签：java

我无法理解为什么它不起作用？

我有我的方法类：

```
package particles;

import org.newdawn.slick.Color;
import org.newdawn.slick.Graphics;

public class Methods {
Graphics g;

public void showhud(){
    g.setColor(Color.white);
    g.drawString("Screen: Game", 675, 10);
    g.drawString("Version: 1.0", 675, 25);
    }

} 
```

但是当我尝试在我的其他类中实现 showhud() 时，它不起作用！

这就是我使用它的方式：

```
package particles;

import org.newdawn.slick.GameContainer;
import org.newdawn.slick.Graphics;
import org.newdawn.slick.SlickException;
import org.newdawn.slick.state.BasicGameState;
import org.newdawn.slick.state.StateBasedGame;
import particles.Methods;

public class Game extends BasicGameState {
Methods m;

public void init(GameContainer container, StateBasedGame game) throws SlickException {

}

public void render(GameContainer container, StateBasedGame game, Graphics g) throws SlickException {
    m.showhud();
}

public void update(GameContainer container, StateBasedGame game, int delta) throws SlickException {

}

public int getID() {
    return 0;
}

} 
```

我得到的错误是：

```
Tue Jan 01 17:19:36 NZDT 2013 ERROR:null
java.lang.NullPointerException
at particles.Game.render(Game.java:18)
at org.newdawn.slick.state.StateBasedGame.render(StateBasedGame.java:207)
at org.newdawn.slick.GameContainer.updateAndRender(GameContainer.java:703)
at org.newdawn.slick.AppGameContainer.gameLoop(AppGameContainer.java:456)
at org.newdawn.slick.AppGameContainer.start(AppGameContainer.java:361)
at particles.Main.main(Main.java:23) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T04:31:50.743

你还没有初始化`m`- 它是 (still) `null`，所以当你执行

```
m.showhud(); 
```

你得到一个 NPE 因为`m`是`null`.

`Methods`您必须为变量分配一个实例`m`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T05:05:32.977

您可能需要实例化两个类成员引用**g**和**m**。目前，这两个引用都没有指向任何内容。它们必须分别指向 Graphics 和 Methods 对象。

1.  如果可能，向 Methods 类添加一个构造函数，负责初始化**g**。

2.  如果 init() 是游戏（您的类）生命周期的开始，则在此状态/块中初始化**m 。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T04:31:49.310

您永远不会分配对`g`. 换句话说，您`g = ...`的代码中没有任何地方。因此，当您的`Methods`类被实例化时，`g`它被初始化为默认值，即`null`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-01T04:32:43.377

你还没有初始化`Methods m`对象

通过您的代码，我相信`int()`方法应该已经初始化`m object`

# mysql - MySQL ...开始崩溃恢复

> ID：14107827
> 
> 赞同：0
> 
> 时间：2013-01-01T04:30:05.160
> 
> 标签：mysql, crash, recovery

我一直在寻找解决这个问题的方法。我的 MySql 给了我以下读数：

```
121231 20:41:05 [Note] Plugin 'FEDERATED' is disabled.
121231 20:41:05 InnoDB: The InnoDB memory heap is disabled
121231 20:41:05 InnoDB: Mutexes and rw_locks use Windows interlocked functions
121231 20:41:05 InnoDB: Compressed tables use zlib 1.2.3
121231 20:41:05 InnoDB: Initializing buffer pool, size = 512.0M
121231 20:41:05 InnoDB: Completed initialization of buffer pool
121231 20:41:05 InnoDB: highest supported file format is Barracuda.
InnoDB: The log sequence number in ibdata files does not match
InnoDB: the log sequence number in the ib_logfiles!
121231 20:41:05  InnoDB: Database was not shut down normally!
InnoDB: Starting crash recovery.
InnoDB: Reading tablespace information from the .ibd files...
InnoDB: Restoring possible half-written data pages from the doublewrite
InnoDB: buffer...
121231 20:41:06  InnoDB: Waiting for the background threads to start
121231 20:41:07 InnoDB: 1.1.8 started; log sequence number 124716458
121231 20:41:07 [Note] Server hostname (bind-address): '0.0.0.0'; port: 3306
121231 20:41:07 [Note]   - '0.0.0.0' resolves to '0.0.0.0';
121231 20:41:07 [Note] Server socket created on IP: '0.0.0.0'.
121231 20:41:09 [Note] Event Scheduler: Loaded 0 events
121231 20:41:09 [Note] c:\xampp\mysql\bin\mysqld.exe: ready for connections.
Version: '5.5.27'  socket: ''  port: 3306  MySQL Community Server (GPL) 
```

每次开始。我试过删除文件，删除数据库，运行 Magento 的修复数据库工具，从一个新数据库重新开始，但不管我得到这个错误是什么。

这让我感到不舒服，因为我不确定某些东西可能会损坏或损坏。我正在使用 Windows Vista 和 Xampp，但我也在使用 nginX 并显示相同的内容。

我刚刚重新创建了一个全新的数据库，现在关闭后（有时我必须这样做）错误再次出现！这是正常现象还是有什么问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-10T21:42:45.467

从日志中可以看到 InnoDB 开始崩溃恢复：

```
InnoDB: Starting crash recovery. 
```

原因是 MySQL 关闭不干净。为什么？可能是 MySQL 退出时间过长，操作系统终止了进程（如果您重新启动服务器）。或者 MySQL 因错误而崩溃。

# symfony - SqliteProfilerStorage 中的 PHP 执行超时

> ID：14107833
> 
> 赞同：1
> 
> 时间：2013-01-01T04:32:34.287
> 
> 标签：symfony, profiler, execution-time

在我的 Symfony2 应用程序中，登录时出现以下错误。如果我们再次刷新页面，错误就会消失。

```
Fatal error: Maximum execution time of 30 seconds exceeded
in SqliteProfilerStorage.php on line 84 
```

会是什么原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T15:09:09.243

手动删除`app/cache/dev/profiler.db`. 即使在 SSD 磁盘上数据库大小变大时，也会发生这种情况。

您可以在`php.ini`.

如果情况持续，您可以在 config_dev.yml 中禁用 symfony 分析器

# shopify - 无法从外部域将产品添加到 Shopify 购物车

> ID：14107835
> 
> 赞同：1
> 
> 时间：2013-01-01T04:33:13.617
> 
> 标签：shopify, cart

我无法从外部域将产品添加到我的 Shopify 商店的购物车。我创建了一个变体 ID 为 264554714 的产品。还有其他变体，但我已将其减少到一个，但仍然无法使其工作。我已经关注了 Shopify 论坛和 Stackoverflow 上的所有示例，但无济于事。我的表格看起来像规定的工作。

```
<form id="submitProduct" action="http://mydomain.com/cart/add" method="post" style="display: none;">
    <input type="hidden" name="id" value="264554714">
    <input type="submit" name="add" value="Add to Cart">
</form> 
```

我尝试了许多不同的方法来提交表单和/或变体组合。感觉好像缺少了一些简单的东西。我使用 Python 和 Django 在 Google App Engine 上托管这个 Shopify 应用程序。我已确保该产品存在且具有确切的变体 ID。如果有什么我没有想过要尝试的，请告诉我。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-12T06:52:48.243

我参加这个聚会有点晚了。但是，如果您想发布到 shopify 购物车，您只需在商店的永久链接中包含产品变体 ID 作为键值对......这不是表单提交，shopify 将解析自定义 URL 并自动将产品添加到您的购物车。

```
<a href="http://your-store.myshopify.com/cart/70881412:1,70881382:1">buy now</a> 
```

其中 70881412 是产品多属性的 ID，1 是数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T11:56:39.693

我只是想把我在评论中所说的话。即使使用单个变体 ID，我也无法将帖子发送到 store.com/cart/add，更不用说多个变体选项了。不过，我意识到 Shopify 提供的永久链接可以满足我的需要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T23:47:19.627

尝试查看有关此主题的 Shopify 教程：[http ://wiki.shopify.com/Adding_to_the_Cart_from_a_remote_website](http://wiki.shopify.com/Adding_to_the_Cart_from_a_remote_website)

# html - HTML中的PDF链接打开空白页

> ID：14107838
> 
> 赞同：2
> 
> 时间：2013-01-01T04:34:19.523
> 
> 标签：html, pdf, browser, hyperlink

我正在共享驻留在外部服务器中的 PDF 文件的链接。

以下是链接的样子：

```
<a href="http://static.googleusercontent.com/external_content/untrusted_dlcp/www.google.com/en//help/hc/pdfs/mobile/AndroidUsersGuide-40-en.pdf">link 1</a>
<a href="http://mywindowsazureblob.blob.core.windows.net/levelblob/files/93c9f263-fbba-4e51-9726-95884aca6f2f.pdf">link 2</a> 
```

在我制作的上述示例页面中（重命名了天蓝色域），第一个链接在 Chrome 的 PDF 查看器中打开，第二个链接在空白页面中打开。

可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T05:07:42.397

我想我已经找到了解决方案。

将文件上传到 Azure blob 时，Azure 服务器不够智能，无法根据文件的扩展名/内容设置文件的内容类型，因此当客户端下载时，它会误导浏览器。

默认的 Azure blob 内容类型是`application/octet-stream`.

[在这里](http://social.msdn.microsoft.com/Forums/nl-NL/windowsazuredata/thread/3a9bec05-27f6-4002-89be-5126dbfd86f8)和[这里](https://stackoverflow.com/questions/12719818/azure-blob-not-storing-pdfs)查看更多信息。

# .net - 替代 TfsTeamProjectCollectionFactory.GetTeamProjectCollection 采用 ICredentialsProvider

> ID：14107842
> 
> 赞同：9
> 
> 时间：2013-01-01T04:34:49.277
> 
> 标签：.net, tfs, sdk, tfs-sdk

根据[MSDN](http://msdn.microsoft.com/en-us/library/ff737874.aspx)`GetTeamProjectCollection(RegisteredProjectCollection projectCollection, ICredentialsProvider fallbackCredentialsProvider`，该类的方法`TfsTeamProjectCollectionFactory`现在已弃用：

*   “注意：此 API 现在已过时。”

*   `[ObsoleteAttribute("This method has been deprecated and will be removed in a future release. See GetTeamProjectCollection(RegisteredProjectCollection) instead.", false)]`

建议是使用只接受 的重载`RegisteredProjectCollection`，但是如果我们想要凭证的后备机制，从现在开始应该使用什么？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-01T10:59:21.267

您需要使用新的[TfsTeamProjectCollection 构造函数](http://msdn.microsoft.com/en-us/library/hh723864.aspx)以及此[TfsClientCredentials 构造函数](http://msdn.microsoft.com/en-us/library/hh763965.aspx)，该构造函数允许交互式提示进行身份验证。

```
// Use default windows credentials, and if they fail, AllowInteractive=true
var tfsCreds = new TfsClientCredentials(new WindowsCredential(), true);

TfsTeamProjectCollection tpc = new TfsTeamProjectCollection(
    new Uri("http://yourserver:8080/tfs/DefaultCollection"),
    tfsCreds); 
```

# php - New Relic + Wordpress - 忽略 wp-cron.php

> ID：14107845
> 
> 赞同：0
> 
> 时间：2013-01-01T04:35:26.700
> 
> 标签：php, wordpress, newrelic

我们在我们的服务器上安装了 New Relic，以监控我们网站的性能。但最近我们想从 New Relic 监控中删除 wp-cron.php。

我将以下代码放在 wp-cron.php 中：

```
[...]

if ( !defined('ABSPATH') ) {
/** Set up WordPress environment */
require_once('./wp-load.php');
}

if (extension_loaded('newrelic')) {
    newrelic_ignore_transaction();
    newrelic_ignore_apdex();
}

[...] 
```

不幸的是，此代码不起作用，New Relic 仍然在报告中显示 wordpress cronjobs 时间过长。我们不需要知道 cron 作业在我们的 wordpress 应用程序中消耗了多少时间。

有谁知道如何从 New Relic 中删除它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T12:06:51.703

我发现为每个 PHP 应用程序或应用程序中的脚本设置变量的最佳方法是**在 PHP.ini中****设置*auto_prepend_file***以指向为您设置所述变量的 PHP 文件。

我使用的代码[发布在 git 上](https://github.com/gaia/NewRelic_PHP_API/blob/master/newrelic.php)，请随意借用/改进/建议。为了简单起见，我也在这里列出它：

```
###
# NewRelic PHP API central file
# Description: Allows PHP installs using mod-fgcid to set newrelic_set_appname
# Usage: Inside PHP.ini for each vhost in your server,
# point to this script using: auto_prepend_file = "newrelic.php"
# Where you place the script depends on your include_path setting.
# See http://www.php.net/manual/en/ini.core.php#ini.auto-prepend-file
# Version: 0.2
# Author http://MATTERmedia.com/
#
# This script is released under the GNU General Public License, version 2 (GPL).
# http://www.gnu.org/licenses/old-licenses/gpl-2.0.html
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
###

if (extension_loaded('newrelic')) {
    if (!isset($_SERVER['HTTP_HOST'])) {
        newrelic_set_appname ("Unknown");
        } else {
            # If UseCanonicalName is set to Off, Apache will use (user inputted) HTTP_HOST for SERVER_NAME
            # Best is to rely on HTTP_HOST and validate it against a list of allowed hosts.
            # See http://shiflett.org/blog/2006/mar/server-name-versus-http-host
            $host = strtolower($_SERVER['HTTP_HOST']);
            # Easily disable any vhost from sending data to newrelic.
            $disabled_hosts = array('foo.example.com');
            $valid_hosts = array('bar.example.com');
            # Add a secondary AppName
            $secondary_appname = ';All Virtual Hosts';          
            if ((!in_array($host, $disabled_hosts)) && (in_array($host, $valid_hosts))) {
                    newrelic_set_appname($host.$secondary_appname);
                } else {                    
                    newrelic_ignore_transaction();
                    # technically you wouldn't need to disable_autorum when you ignore_transaction, but it's good practice.
                    newrelic_disable_autorum();
            }           
        }
} 
```

**如果您的服务器配置允许每个目录 php.ini**，请删除一个新的 php.ini 并让 auto_prepend_file 指向一个调用*newrelic_ignore_transaction()*的 php 文件。

**如果您的服务器配置不允许每个目录 php.ini**（例如使用 mod_fcgid），请修改建议的代码以检测正在运行的脚本并在满足该条件时发出*newrelic_ignore_transaction() 。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T20:14:59.577

我一无所知`New Relic`感谢您的问题，我发现这似乎是一个非常有用的工具。

环顾四周，我发现这个片段`Drupal`与 cron 作业有关。见`TRUE`第 68 行的论点。也许你需要那个......

[实现 New Relic 的 Drupal 模块](http://drupalcode.org/sandbox/neclimdul/1146810.git/blob/4be4853ce62e71707da9e546ea6940fa5ef79e53:/new_relic_rpm.module)

```
57 /**
58 * Implementation of hook_cron().
59 *
60 * This is used to set cron tasks to be not tracked by RPM if so desired.
61 */
62 function new_relic_rpm_cron() {
63     $cron_tracking = variable_get('new_relic_rpm_track_cron', 'norm');
64     if ($cron_tracking == 'bg') {
65         newrelic_background_job(TRUE);
66     }
67     elseif ($cron_tracking == 'ignore') {
68         newrelic_ignore_transaction(TRUE); // pass TRUE to ignore
69     }
70 } 
```

# html - 如何使用 CSS 使导航栏链接居中，同时保持两侧为灰色？

> ID：14107847
> 
> 赞同：0
> 
> 时间：2013-01-01T04:35:59.683
> 
> 标签：html, css, center

如何使用 CSS 使导航栏链接居中，同时保持两侧为灰色？

博客和历史有一个下拉菜单。这是一个屏幕截图：

[![](../Images/d97744aa5d45f8d270692c4e2d63d771.png)](https://i.stack.imgur.com/2kvTm.png)
[（来源：[gyazo.com](http://gyazo.com/1c4f67dd83e1c83dea844b65fd2d5ab9.png)）]

**CSS：**

```
.navbar ul {
    list-style: none;
    margin: 0;
    padding: 0;
}

.navbar li {
    float: left;
    width: 100px;
    background-color: #444444;
    text-align: center;
    border-right: 1px solid white;
    position: relative;
    height: 30px;
    line-height: 30px;
}

.navbar li ul li {
    float: none;
    width: 150px;
    text-align: left;
    padding-left: 5px;
    border-top: 1px solid white;
}

.navbar a {
    text-decoration: none;
    color: white;
}

.navbar li ul {
    position: absolute;
    top: 30px;
    left: 0;
    visibility: hidden;
}

.navbar li:hover ul {
    visibility: visible;
}

.navbar li:hover {
    background-color: maroon;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T04:50:28.793

编辑了我的答案.. 我已经让你的 Container div 清除浮动，并将定义的宽度设置为导航栏。

[http://jsfiddle.net/jFdhM/](http://jsfiddle.net/jFdhM/)

```
#container {
    border-radius: 10px;
    box-shadow: 3px 3px 4px;
    padding: 8px;
    background-color: #FFFFFF;
    width: 748px;
    margin: 0 auto;
}
#top {
    width: 748px;
}
.navbar {
    width: 505px;
    margin:0 auto;
}
.navbar ul {list-style:none; padding:0; margin: 0 auto;text-align: center;}
.navbar li {float:left; width:100px; background-color:#444444; text-align:center;
         border-right:1px solid white; position:relative;
         height:30px; line-height:30px;}
.navbar li ul li {float:none; width:150px; text-align:left; padding-left:5px;
         border-top:1px solid white;}
.navbar a {text-decoration:none; color:white;}
.navbar li ul {position:absolute; top:30px; left:0; visibility:hidden;}
.navbar li:hover ul {visibility:visible;}

.navbar li:hover {background-color:maroon;}

#maincontent {
    clear: both;
    padding: 10px;
    font-family: "Microsoft Sans Serif";
    font-size: medium;
} 
```

# netty - 如果第一个解码器/编码器对达到目的，如何添加多个网络解码器并有条件地跳过其他解码器

> ID：14107848
> 
> 赞同：1
> 
> 时间：2013-01-01T04:36:03.937
> 
> 标签：netty

我想处理“xx bytecount sid newline payload”和“xx 000 sid newline”类型的消息。我正在使用字符串编码器和解码器。不幸的是，这与第一个不匹配。我知道我可以编写一个自定义解码器并创建一个动态缓冲区并继续注入数据，直到达到有效负载的字节数。但是，如果我的自定义编码器成功命中，我该如何跳过字符串编码器和解码器。

还有一个问题 。如何读取自定义解码器中剩余的字节数。假设我能够读取计数如何将其设置为状态变量以读取更多数据

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T06:35:42.427

如果我是你，我只会编写一个解码器来解码两种消息类型。如果您坚持在管道中保留多个解码器，您也可以这样做。

首先，将解码第一个消息类型（xxx bytecount ...）的解码器插入到管道中。

其次，当遇到第二种消息类型时，解码器不会被编程。对于它不理解的消息类型，让它只是将消息转发给下一个处理程序。然后解码第二种消息类型的第二个解码器将对其进行解码。

第三，对解码第二个消息类型（xxx 000 ...）的第二个解码器进行编程，检查接收到的消息是否是由第一个解码器解码的消息。如果是这样，第二个解码器应该将消息逐字转发给下一个处理程序。

# debian - Debian Wheezy 下的安装问题

> ID：14107852
> 
> 赞同：0
> 
> 时间：2013-01-01T04:36:54.800
> 
> 标签：debian, g-wan

有没有人成功在 Debian Wheezy 上运行 G-WAN？

我正在尝试使用 G-WAN 进行测试，并在未来全面转向它。我喜欢做我的网站轻量级和加载速度极快。今天我需要本机和多线程（如 G-WAN）解决方案来编写 PHP 等脚本语言。G-WAN 是完美的。我查看了它的网站，发现他们的创建者非常高级）。这是我用于测试目的的单核 VDS（但是它已经完全清理并使用了最新的半稳定技术）。

Linux 其他 3.2.0-4-486 #1 Debian 3.2.35-2 i686 GNU/Linux

我安装了 glibc-2.13-1、libc-dev、openjdk-7-jdk、libsqlite3-dev、php5-cli。我想测试 G-WAN，所以我现在不需要其他语言来支持。

我删除了两个文件：tidy.c 和 tidy__.c 但是我不认为它们有问题。

在“跟踪”中，我有：`Tue, 01 Jan 2013 04:18:48 GMT: start`

错误日志（Seg Fault）：

本网站不接受该代码。我无法在复制代码的每一行手动编写符号。这是代码的链接：

[http://pastebin.com/JAaH53DE](http://pastebin.com/JAaH53DE)

PS对不起，我是新来的。Idk 如何正确粘贴代码。我发现将自定义代码添加到代码的任何行以及为什么空格应该并且可以定义一些代码语法是愚蠢的。

OFK：如果存在任何其他对 G-WAN 几乎没有支持的资源，如果有人提到它，那就太完美了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T10:03:02.120

我没有用 G-WAN 测试过 PHP，但正如之前的 G-WAN 线程中所报告的那样，最新版本存在稳定性问题。

我的建议是清空你的 csp 文件夹，然后只创建一个非常简单的 C/C++ 脚本。然后用 sudo 运行 gwan。在我的标准 Linux Mint 中，C 脚本可以正常工作。

# c# - 使用 UpdatePanel 时出现 Javascript 错误。ID 未定义 234437825 行

> ID：14107854
> 
> 赞同：0
> 
> 时间：2013-01-01T04:37:19.230
> 
> 标签：c#, javascript, asp.net, updatepanel

我收到以下 JavaScript 错误：`ID is undefined`. 我的代码不是很大，而且我的 HTML 脚本中没有超过 100 行。所以我在 IE 中启用了调试模式，当尝试调试时，它会`scriptresource.axd`在`ViewState`. 我在我的代码中使用更新面板。

奇怪的是它不会停止任何功能。所有功能都在工作。我也可以异步回帖。

我试图通过逐步删除我的 HTML 代码来缩小问题的范围。通过这样做，我发现错误是由于ScriptManager控制而出现的。

我也没有从代码隐藏中看到任何运行时异常。

以前有人遇到过这个错误吗？

# php - 如何在magento订单送货地址中获取自定义地址属性值？

> ID：14107855
> 
> 赞同：-1
> 
> 时间：2013-01-01T04:37:38.920
> 
> 标签：php, zend-framework, magento

我有一个自定义地址属性。在后端，订单页面我需要获取该属性值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T06:15:54.600

试试这个

```
$orderId = '100000001';

$order = Mage::getModel('sales/order')->loadByIncrementId($orderId);

$customAttributeValue = $order->getShippingAddress()->getAttributeText('your_custom_attribute'); 
```

# javascript - 关闭/打开 div

> ID：14107856
> 
> 赞同：1
> 
> 时间：2013-01-01T04:37:49.340
> 
> 标签：javascript, jquery

一旦一个div被关闭，它可以被打开吗？

第一的，

```
 $("#num-one").off();
        $("#num-two").off();
        $("#num-three").off(); 
```

稍后，

```
 $("#num-one").on();
        $("#num-two").on();
        $("#num-three").on(); 
```

因为尽管打开了 div，但它们不再响应点击事件 - 一旦它们被关闭，它们是否可以打开？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T04:39:40.577

您必须再次使用参数绑定它，“告诉”他们要绑定哪个事件以及要绑定事件的*元素*。

```
$("#num-one").on('click', function(){
}); 
```

您创建一个函数并绑定其中的所有事件，并在您想要绑定时调用它。

```
function bindMyEvents()
{

    $("#num-one").on('click', function(){
    });

    $("#num-two").on('click', function(){
    });

    $("#num-three").on('click', function(){
    });

}

bindMyEvents(); // to bind the events with single call 
```

或者

# javascript - javascript/jquery：按下选项卡时在表单中聚焦下一个文本区域（不是输入字段）

> ID：14107858
> 
> 赞同：0
> 
> 时间：2013-01-01T04:38:20.153
> 
> 标签：javascript, jquery, forms, tabs, next

我在表单中的所有输入都`textarea`带有 class `large`。

我正在尝试以下方法，但它不起作用：

```
if(e.which == 9){ // tab
    $(this).next('textarea.large').focus();
} 
```

我尝试 `$next = $(":textarea:eq(" + ($(":textarea").index(this) + 1) + ")"); $next.focus();`
无济于事（：textarea 不是有效的伪元素），以及其他一些变体。

我也试过这个：

```
$(this).next(':input').focus(); 
```

我已经在 SO 上检查了其他代码，但它似乎专注于`input type='text'`，并且似乎不适用于我的 textareas。

是否没有简单直接、跨浏览器兼容的方式来获取表单中的所有文本区域并转到下一个？其中一些文本区域将是**动态创建**的，因此在第一次加载页面时它们不会都存在。但是 tab 需要为所有这些工作。

## 编辑

这很容易在一个简单的小提琴中解决，但问题是，我在以下条件和事件中发生了一些其他事情：

```
jQuery(document).on('keydown blur','textarea.large',function(
 if (e.which == 13 || e.type=='focusout' || e.type=='blur' || e.which == 32) //32 is space
 { ... a bunch of stuff on the page, which naturally takes focus out of the current input
  }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-14T11:02:53.000

我使用 next() 选择最接近编辑按钮的下一个文本区域时遇到了类似的问题。编辑图像时，单击将文本放入带有 CKEDITOR 的对话框弹出窗口中，其中文本取自 textarea。

html结构：

```
<tr>
    <td>
        <img src='edit.png' class='edit_comments' />
        <br />
        <textarea>blah blah</textarea>
    </td>
</tr>
<tr>
    <td>
        <img src='edit.png' class='edit_comments' />
        <br />
        <textarea>blah blah</textarea>
    </td>
</tr> 
```

这不起作用：

```
$( ".edit_comments" ).click(function() {
        var closest_textarea = $(this).next("textarea"); 
```

这做到了：

```
$( ".edit_comments" ).click(function() {
        var closest_textarea = $(this).closest("tr").find("textarea"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T04:42:24.510

您可以将 tabindex 属性设置为 input 和 textarea 元素。

[http://w3schools.com/tags/att_global_tabindex.asp](http://w3schools.com/tags/att_global_tabindex.asp)

# javascript - 未捕获的类型错误：对象# 没有方法'css'

> ID：14107860
> 
> 赞同：1
> 
> 时间：2013-01-01T04:39:13.260
> 
> 标签：javascript, jquery

我想最终遍历正文中的所有节点（尚未实现）并从每个节点获取背景和文本颜色。但是，我得到了`Uncaught TypeError: Object #<HTMLBodyElement> has no method 'css'`。它发生在`var bg = node.css("background-color");`

这是我的代码

```
function grabColors() {
    var colorArray = new Array();
    var body = $("body");

    console.log(body);

    body.each(function(index, node){
        console.log(node);
        getColorsFromChild(node);
    });
    console.log(colorArray);
}

function getColorsFromChild(node) {
    var bg = node.css("background-color");
    var bg2 = node.css("background");
    var color = node.css("color");

    if ($.inArray(bg, colorArray) == -1) {
        colorArray.push(bg);
    }
    if ($.inArray(bg2, colorArray) == -1) {
        colorArray.push(bg2);
    }
    if ($.inArray(color, colorArray) == -1) {
        colorArray.push(color);
    }
}
grabColors(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T04:41:24.957

您正在尝试在由`each`. 您必须将 DOM 对象转换为 jQuery 对象才能在其上调用与 CSS 相关的函数。

*改变*

```
var bg = node.css("background-color"); 
```

*到*

```
var bg = $(node).css("background-color"); 
```

# php - 如何获取特定区域当前运行的 EC2 资源的计数

> ID：14107863
> 
> 赞同：0
> 
> 时间：2013-01-01T04:39:55.227
> 
> 标签：php, amazon-web-services, amazon-ec2

我试图列出一个地区的所有可用资源。

目前正在通过调用各个函数并进行计数来实现这一点，但如果有任何单个函数调用返回所有这些计数值，那将非常耗时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T10:00:07.657

“调用各个函数”是什么意思？

通过查看[DescribeInstances 的 API 文档](http://docs.amazonwebservices.com/AWSEC2/latest/APIReference/ApiReference-query-DescribeInstances.html)，它看起来非常简单：没有参数，您将获得所有实例（当然，一旦您遍历所有预留）。

您可以做些什么来提高性能是应用过滤器。例如，如果您知道要计算的实例的 AMI Id，则可以将其作为资源传递。

# iphone - 如何在iphone中获取触摸区域的颜色

> ID：14107864
> 
> 赞同：-1
> 
> 时间：2013-01-01T04:39:58.607
> 
> 标签：iphone, ios

任何人都可以知道如何获得触摸颜色`UIView`吗？当我触摸视图时，我想要视图触摸区域上的颜色。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T04:47:28.213

您可以使用此开源[**库**](https://github.com/ivanzoid/ikit/tree/master/UIView+ColorOfPoint)来执行此操作。`UIView`这是一个具有附加功能的类别。

添加后，您可以获得如下颜色：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [[event allTouches] anyObject];
    NSLog("%@",[self colorOfPoint:[touch locationInView:self]]);
} 
```

还要检查[**iPhone UIImage 像素颜色**](http://www.markj.net/iphone-uiimage-pixel-color/)

这是[SO中另一个线程的链接](https://stackoverflow.com/questions/1160229/how-to-get-the-color-of-a-pixel-in-an-uiview)

# excel - 使用 Excel VBA 从 Oracle 表中检索数据到 Excel

> ID：14107870
> 
> 赞同：1
> 
> 时间：2013-01-01T04:42:09.327
> 
> 标签：excel, vba, oracle

我编写了代码来从 Oracle DB 中的表中获取数据并使用 VBA 转储到 Excel 表中。

在 Excel 中，它重复显示第一行。例如，如果从数据库返回 45 行不同的行，则在 Excel 工作表中，所有 45 行都与数据库中的第一行相同。

如何将行从 DB 获取到 Excel？

```
Sub Results()

    Dim SQL As String
    Dim OraDynaSet As Object
    Dim i As Integer

    SQL = "Select * from Employee where EmpID=20"
    Set OraDynaSet = objDataBase.DBCreateDynaset(SQL, 0&)

    If OraDynaSet.RecordCount > 0 Then

        'There were records retrieved

        OraDynaSet.MoveFirst

        For ICOLS = 0 To OraDynaSet.Fields.Count - 1
            .Cells(1, ICOLS + 1).Value = OraDynaSet.Fields(ICOLS).Name
        Next ICOLS

        'Loop the recordset for returned rows
        For i = 0 To OraDynaSet.RecordCount - 1

            For j = 0 To ICOLS - 1
                .Cells(2 + i, j + 1) = OraDynaSet.Fields(j).Value 
            Next j
        Next i

    Else
        MsgBox "No Matching records found"
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-09T09:54:04.717

```
Dim SQL As String
Dim OraDynaSet As Object
Dim i As Integer

SQL = "Select * from Employee where EmpID=20"
Set OraDynaSet = objDataBase.DBCreateDynaset(SQL, 0&)

 If OraDynaSet.RecordCount > 0 Then
'There were records retrieved

     OraDynaSet.MoveFirst

     For ICOLS = 0 To OraDynaSet.Fields.Count - 1
       .Cells(1, ICOLS + 1).Value = OraDynaSet.Fields(ICOLS).Name
     Next ICOLS

    'Loop the recordset for returned rows
    For i = 0 To OraDynaSet.RecordCount - 1

      For j = 0 To ICOLS - 1
        .Cells(2 + i, j + 1) = OraDynaSet.Fields(j).Value

        Next j
        OraDynaSet.Movenext
    Next i

Else
    MsgBox "No Matching records found"
End If
End Sub 
```

# wordpress - WordPress 元数据被损坏、删除或更改

> ID：14107871
> 
> 赞同：0
> 
> 时间：2013-01-01T04:42:13.943
> 
> 标签：wordpress

我有一个元变量，其字符串值应始终为 0 或 1，并存储在页面上。我可以使用元框中的一个简单下拉框来设置它，它似乎工作得很好。出于某种奇怪的原因，它有时会看似随机地从 1 变为 0。我不知道为什么，即使在我没有编辑或更新的页面上似乎也会发生这种情况。我很困惑，甚至不知道从哪里开始寻找，因为我还没有弄清楚如何复制这个问题。

有没有人有任何建议来寻找一种可能的方法来复制这个或找出原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T04:49:56.063

IMO：这种错误只能捕获调试。存在一个名为[mtop](http://mtop.sourceforge.net/)的工具，可让您查看所有数据库操作...

![在此处输入图像描述](../Images/bade26d97aea9594b362837dbd50f0bf.png)

**更新**

更简单的是记录一段时间内的所有查询（直到您看到故障）这里有一个相关问题：[记录所有查询在 mysql 中](https://stackoverflow.com/questions/303994/log-all-queries-in-mysql)。然后，您只需仔细查看`update`相应表格中的操作。这可以在 windows 或 *nix 中完成。祝你好运...

# php - 在 php 中，如何使用正则表达式来捕获两个模式之间的所有内容（以及每个模式的最短实例）？

> ID：14107875
> 
> 赞同：0
> 
> 时间：2013-01-01T04:43:44.773
> 
> 标签：php, regex

我一定是过于复杂了，但我无法为我的生活弄明白。

我有一个存储为字符串的标准 html 文档，我需要获取段落的内容。我会做一个例子。

```
$stringHTML=
"<html>

<head>
<title>Title</title>
</head>

<body>

<p>This is the first paragraph</p>
<p>This is the second</p>
<p>This is the third</p>
<p>And fourth</p>

</body>
</html>"; 
```

如果我使用

```
$regex='~(<p>)(.*)(</p>)~i';
preg_match_all($regex, $stringHTML, $newVariable); 
```

我不会得到 4 个结果。相反，我会得到 10。我得到 10，因为正则表达式匹配第一个`<p>`和第一个`</p>`以及第一个`<p>`和第四个`</p>`

如何在两个单词之间进行搜索，只返回每个段落之间的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T06:13:34.440

使用 DOM 或 XPATH 之类的 HTML 解析器来解析 HTML。[**不要使用正则表达式来解析 HTML**](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)。这是 DOMDocument 如何轻松解析它的方法。

```
$doc = new \DOMDocument;
$doc->loadHTML($stringHTML);
$ps = $doc->getElementsByTagName("p");
for($i=0;$i<$ps->length; $i++){
    echo $ps->item($i)->textContent. "\n";
} 
```

[**代码在行动**](http://codepad.viper-7.com/GBXxsm)

* * *

使用这个正则表达式（正如你所说*的正则表达式练习*）你会得到 4 个结果。

```
preg_match_all("#<p>(.*)</p>#", $stringHTML, $matches);
print_r($matches[1]); 
```

这里使用[了环视语法](http://www.regular-expressions.info/lookaround.html)。请参阅[**实际代码**](http://codepad.viper-7.com/DTUptJ)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T04:51:09.947

用于`.*?`获取最短匹配而不是最长匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T05:59:57.883

你的正则表达式应该是`/<p>(.*?)<\/p>/i`. 它只会匹配之间的字符串`<p></p>`并将其放入数组中。

*你不应该做一个小组：`(<p>)`*

# php - 将 JSON 对象对保存在数组中

> ID：14107876
> 
> 赞同：1
> 
> 时间：2013-01-01T04:43:48.433
> 
> 标签：php, json

我对 JSON 很陌生，我真的需要帮助。所以我得到了这个 $oldAuctions 对象，在使用 PHP 的 json_decode 函数 ( `json_decode($oldAuctions, TRUE);`) 之后，它返回了类似这样的东西，其中有 11 个对象，每个对象有 9 组名称/值对...

```
{
    "recent_results": [
        {
            "closing_yield": "0.800",
            "auction_id": "106",
            "use_buy_it": "0",
            "issuer": "National Bank",
            "term": "1 Year",
            "is_charity": "1",
            "end_date": "12-26-2012",
            "closing_price": "100.000000",
            "issue_type": "FDICs"
        },
        {
            "closing_yield": "1.090",
            "auction_id": "339",
            "use_buy_it": "0",
            "issuer": "National Bank",
            "term": "1 Year",
            "is_charity": "1",
            "end_date": "12-12-2012",
            "closing_price": "100.000000",
            "issue_type": "FDICs"
        },
        {
            "closing_yield": "2.000",
            "auction_id": "041",
            "use_buy_it": "0",
            "issuer": "National Bank",
            "term": "5 Year",
            "is_charity": "1",
            "end_date": "09-11-2012",
            "closing_price": "100.000000",
            "issue_type": "FDICs"
        }
    ]
} 
```

现在我需要抓取每一对并将它们的值保存在一个数组中。例如，我想获取`auction_id`并将它的值保存在一个数组中......我该怎么做？

另外，只是为了简单的测试目的，我尝试先打印出这些值……但这也不起作用……

```
foreach($oldAuctions as $IDs)       
{
   echo 'Ids: '.$IDs->auction_id;
} 
```

我将衷心感谢您的帮助。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T04:58:11.517

调用后`json_encode`你的数组`$oldAuctions`变成了一个 JSON**字符串**。您不能将其作为数组或对象作为字符串进行迭代。

因为`$oldAuctions`已经是一个数组，您可以简单地使用`forach`

```
foreach($oldAuctions['recent_results'] as $result){
    echo 'Ids: '.$result['auction_id']. "\n";
} 
```

# objective-c - 从 LocalNotification 唤醒后 self.navigationController == nil

> ID：14107878
> 
> 赞同：3
> 
> 时间：2013-01-01T04:44:22.813
> 
> 标签：objective-c, cocoa-touch, uinavigationcontroller, uilocalnotification

我在 Xcode 4.3.2 中工作

我实现`Local Notifications`了在预定时间提醒用户新事件。因此，当我的应用程序在后台并且时钟敲响时（例如）上午 8 点，用户将收到来自我的应用程序的通知。

当用户决定从后台查看应用程序时，我会加载一个 nib。目前，这个笔尖工作正常：它显示了它在笔尖中排列的视图。但是，在向用户显示 nib 后，我想将用户转发到`LocalNotificationsHandler.m`. 当我尝试推送第二个视图时，我的应用程序失败。因此，虽然没有错误消息，但似乎第二个笔尖不会加载。

简而言之，流程如下：

*   当我的应用在后台运行时，用户会收到通知
*   用户选择查看应用
*   将`LocalNotificationsHandler nib`加载
*   `self.navigationController == nil`（在 LocalNotificationsHandler.m 中）
*   self.navigationController 不会 "[pushViewController: "new view" animated:YES]" 获取新视图

我想知道我的 AppDelegate.m 文件中是否缺少某些内容，因此我在 AppDelegate.m 文件中包含了“didFinishLaunchingWithOptions”：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.
    // Add the navigation controller's view to the window and display.

    NSLog(@"did finish launching with options");
    [self.window addSubview:tabBarController.view];
    [self.window makeKeyAndVisible];

    [[UIApplication sharedApplication] registerForRemoteNotificationTypes:(UIRemoteNotificationTypeAlert | UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeSound)];

  if (self.locationManager == nil)
  {
    locationManager = [[CLLocationManager alloc] init];
    locationManager.purpose = @"We will try to use you location";
  }

  if([CLLocationManager locationServicesEnabled])
  {
    [self.locationManager startUpdatingLocation];
  }

  self.navigationController.navigationBar.tintColor = nil;

  return YES;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T07:50:06.137

您正在使用过时的（自 iOS 3 起）将 viewcontroller 的视图添加到主 UIWindow 的方法。那应该是这样的：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // create properly sized window
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    // create instance of root VC and assign to window
    MainViewController *vc = [[MainViewController alloc] init];
    self.window.rootViewController = vc;
    [vc release];

    [self.window makeKeyAndVisible];

    return YES;
} 
```

只有当它实际上是从 UINavigationController 呈现时，才会设置视图控制器的 navigationController 属性。

有关更多信息，请参阅此文章：http: [//www.cocoanetics.com/2012/11/revisited/](http://www.cocoanetics.com/2012/11/revisited/)

# c - SSL BIO 和 FFI

> ID：14107880
> 
> 赞同：1
> 
> 时间：2013-01-01T04:45:15.730
> 
> 标签：c, haskell, ssl, openssl

我在 Haskell 中有一个流式 API（与 OpenSSL 的 BIO 不同），我想将 SSL/TLS“代理”注入其中。更具体地说，假设我有一个网络模型

`Server| <---> |Logger>| <---> |<Logger| <---> |Client`

（我写`Logger>`的意思是“下游”记录器）并且我想写一个 FFI 来调用 OpenSSL 以将 TLS 注入到这里的中心

`Server| <---> |Logger>| <---> |TLS>| <---> |<TLS| <---> |<Logger| <---> |Client`

这样和之间的通信`TLS>`就`<TLS`被加密了。让我构建的 OpenSSL 最简单的接口是什么`<TLS`？在那之后，最简单的构建界面是`TLS>`什么？

换句话说，我的项目与我读过的大多数教程不同，因为我希望能够同时`BIO_gets`使用`BIO_puts`SSL 结构。这类似于我为 SSL 客户端连接管理自己的传输，但“传输”是通过将 C 指针向上提升到 Haskell 来执行的。

（我确信我完全错过了关于`SSL`+`BIO`交互的一些基本知识。）

* * *

从[http://www.openssl.org/docs/crypto/BIO_s_bio.html](http://www.openssl.org/docs/crypto/BIO_s_bio.html)我看到一个应用程序，就像我正在拍摄的那样：

`BIO *internal_bio, *network_bio;`
`...`
`BIO_new_bio_pair(internal_bio, 0, network_bio, 0);`
`SSL_set_bio(ssl, internal_bio, internal_bio);`
`SSL_operations();`

这似乎大致正确。我将能够同时`puts`和`gets`on `network_bio`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T08:52:48.267

如果您的项目不需要 openssl 并且您可以使用任何 TLS 库，则可以使用更简单的[tls](http://hackage.haskell.org/package/tls)，它与 Haskell 更好地集成，并且内置支持通过[Backend](http://hackage.haskell.org/packages/archive/tls/1.0.3/doc/html/Network-TLS.html#t%3aBackend)类型进行自定义传输。这将比通过 Haskell 处理 openssl 低级 API 简单得多。

# android - android webview setdefaultfontsize(int size)，大小单位是什么？

> ID：14107881
> 
> 赞同：5
> 
> 时间：2013-01-01T04:45:51.660
> 
> 标签：android, webview, font-size

安卓网页视图

```
webview.setdefaultfontsize(int size); 
```

什么是尺寸单位？

```
webview.getSettings().setDefaultFontSize(20); 
```

是它`20pt`还是`20dp`其他uinit？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-01T04:50:25.767

字体单位是 sp

## sp

Scale-independent Pixels - 这类似于 dp 单位，但它也根据用户的字体大小偏好进行缩放。建议您在指定字体大小时使用此单位，以便根据屏幕密度和用户偏好进行调整。

有关 sp、dp、像素的更多信息，请参阅[此处](http://developer.android.com/guide/topics/resources/more-resources.html#Dimension)

# scala - Scala：为什么 List[=>Int] 不起作用？

> ID：14107882
> 
> 赞同：8
> 
> 时间：2013-01-01T04:46:17.127
> 
> 标签：scala, lazy-evaluation

我一直在努力学习 scala 的来龙去脉，最近我遇到了一些我很好奇的事情。

据我了解，如果我想将一个有效地延迟评估的代码块传递给一个函数，（而不是当场评估它）我可以输入：

```
def run(a: =>Int):Int = {...} 
```

从这个意义上说，函数 run 接收一个尚未被评估的代码块，它评估并返回计算出的 Int 。然后我尝试将这个想法扩展到 List 数据结构。打字：

```
def run(a: List[=>Int]) = {...} 
```

但是，这会返回错误。我想知道为什么不允许这样做。除了通过这种语法之外，我如何传递未评估的代码块列表？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-01T05:09:09.347

`=>Int`是按名称参数的语法。`=>Int`不是类型，因此不能用作`List`. 但是，`()=>Int`是一种类型。它是返回的空函数类型`Int`。所以这有效：

```
def run(a: List[()=>Int]) = {...} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-01T05:25:47.000

by-name 参数不是 Scala 中的一等类型。

`List[()=>Int]`是解决方案之一。否则，您可以使用以下`Lazy`数据结构。

*   [https://gist.github.com/1164885](https://gist.github.com/1164885)
*   [https://github.com/scalaz/scalaz/blob/v6.0.4/core/src/main/scala/scalaz/Name.scala#L99-107](https://github.com/scalaz/scalaz/blob/v6.0.4/core/src/main/scala/scalaz/Name.scala#L99-107)
*   [https://github.com/scalaz/scalaz/blob/v7.0.0-M7/core/src/main/scala/scalaz/Name.scala#L37-L60](https://github.com/scalaz/scalaz/blob/v7.0.0-M7/core/src/main/scala/scalaz/Name.scala#L37-L60)
*   [https://github.com/scala/scala/blob/v2.10.0/src/reflect/scala/reflect/internal/transform/Transforms.scala#L9-23](https://github.com/scala/scala/blob/v2.10.0/src/reflect/scala/reflect/internal/transform/Transforms.scala#L9-23)
*   [https://github.com/harrah/xsbt/blob/v0.12.1/compile/api/SafeLazy.scala](https://github.com/harrah/xsbt/blob/v0.12.1/compile/api/SafeLazy.scala)
*   [https://github.com/okomok/ken/blob/0.1.0/src/main/scala/com/github/okomok/ken/Lazy.scala](https://github.com/okomok/ken/blob/0.1.0/src/main/scala/com/github/okomok/ken/Lazy.scala)
*   [https://github.com/playframework/Play20/blob/2.1-RC1/framework/src/play/src/main/scala/play/api/libs/functional/Util.scala#L3-L11](https://github.com/playframework/Play20/blob/2.1-RC1/framework/src/play/src/main/scala/play/api/libs/functional/Util.scala#L3-L11)

# regex - 如何从现有的 RegEx 模式中排除几个单词

> ID：14107883
> 
> 赞同：6
> 
> 时间：2013-01-01T04:46:23.490
> 
> 标签：regex

我有以下匹配占位符的模式，例如 ( `%s`, `%16.6fAl`, `%d`, 等)：

`%([a-z]+)\b|%([a-z0-9\.]{2,20})\b`

但是，我确实需要忽略以下占位符：

`%w` `%1w` `%2w` `%3w` `%O` `%M`

我试图查找并检查论坛，但恐怕我的正则表达式知识有限。有没有人可能有解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T09:34:46.400

你可以试试这个。它满足您给定的示例。

%([a-lnp-vx-z]+)\b|%((?:[0-9][^w]{1,19})|(([az.]{2,20})) )\b

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T06:13:50.357

如果您想匹配除五个非常具体的占位符之外的所有占位符，并且您的代码允许，最简单的方法可能是首先匹配所有占位符，然后（如果匹配）使用另一个正则表达式检查五个“禁止”的占位符并忽略他们。编写一个匹配`%d`, `%1d`, `%4d`, `%4w`但不匹配 的 RegExp`%1w`将是……有趣的。当然可能，只是不好玩。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T06:07:43.227

我认为您可能想要模式匹配您实际想要的内容，而不是尝试排除您不想要的内容。

这是 printf 的粗略正则表达式

```
%([+- #0])?(([1-9][0-9]*)|\*)?(\.([1-9][0-9]*)|\*)? ([hljztL]|hh|ll)?[diuoxXfFeEgGaAspn]
```

# database-design - 两表合一管理

> ID：14107884
> 
> 赞同：1
> 
> 时间：2013-01-01T04:46:51.867
> 
> 标签：database-design, grocery-crud

![在此处输入图像描述](../Images/49ebc5830495435ea894177a56bbf2ac.png)

以上是我的数据库设计。

在我的数据库设计中，我有一个 otherinfo 表。如果学生属于某个部门，则此表包含与学生相关的详细信息。这是因为并非所有部门都参加体育赛事。

是否可以将这两个表合二为一？

例子：

桌子：

![在此处输入图像描述](../Images/8c52e1bf254504e946cbb40fd206a26a.png)

在添加/编辑中：

![在此处输入图像描述](../Images/2a86d4400834b5e6af50332e0ae3708d.png)

然后在保存之后……如果像我说的那样，选择的部门对体育活动不活跃，详细信息将被插入到两个表中或仅在一个表中。

有没有办法使用当前可用的功能以简单的方式做到这一点..？但我也愿意解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T06:02:48.053

看到你的解释我的想法是：

其他信息应该在学生表中，因为当部门是体育时，会进入其他信息，因此我们可以将其保存在同一张表中。

我不认为为其他信息制作新表格。

新表中的部门可以，因为可以有多个表，但是如果有 1 个部门的其他信息，那么我们可以将其保存在学生表本身中。

# objective-c - iOS 6.0.1 无法在 WIFI 上播放视频

> ID：14107886
> 
> 赞同：0
> 
> 时间：2013-01-01T04:47:30.553
> 
> 标签：objective-c, ios6, wireless

我有 iPhone 4 和 6.0.1 的 iPad，并且我创建了一个小应用程序，它可以让你捕捉一个最长 30 秒的短视频，并将其上传到我的服务器。当我尝试访问视频时，我无法打开它。我看到一个“播放”按钮，上面有一条线，所以它说我不能播放。

有线的事情是，我尝试在使用 3G 而不是 WIFI 时播放视频，并且它有效。

我尝试过使用 mp4、m4v、m4a、mov，但没有任何效果。

我的路由器和任何其他视频应用程序（如 YouTube）或从 Facebook 打开视频都没有任何问题 - 可以。

# wpf - 如何在组合框项目标签之间进行绑定

> ID：14107891
> 
> 赞同：1
> 
> 时间：2013-01-01T04:49:07.390
> 
> 标签：wpf, xaml, dictionary, combobox, itemtemplate

我定义`Dictionary`包含 int 作为 key 和 string 作为 value `Dictionary<int, string >`。`ComboBoxItem`我在和这个之间做了绑定`Dictionary`：

```
<ComboBox ItemsSource="{Binding myDictionary}" >
    <ComboBox.ItemTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding Key}" Tag="{Binding Value}"/>
        </DataTemplate>
    </ComboBox.ItemTemplate>
</ComboBox> 
```

现在，我想在项目选定标签之间进行绑定。我该怎么做 ？我知道该怎么做，以防我想要组合的 SelectedValue（在组合中选择文本）==> 但我需要标签而不是文本...... :(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T10:00:17.100

您可以绑定到 SelectedItem.Tag

例子：

```
 <TextBlock Text="{Binding ElementName=cmbDictionary,Path=SelectedItem.Tag}"/> 
```

# wordpress - 无法将图片上传到 wordpress（nginx+varnish+apache）

> ID：14107893
> 
> 赞同：2
> 
> 时间：2013-01-01T04:49:38.137
> 
> 标签：wordpress, apache, file-upload, nginx, varnish

我正在运行两台服务器。

*   一种是运行 nginx 的网关，用于将不同域的请求分派到不同的服务器。
*   另一个是我的 WordPress 安装服务器。

我在 Apache 前面使用 Varnish 来做缓存（只有缓存，没有负载平衡）。我已经关闭`KeepAlive`并为 Apache 设置`Timeout`了 20 秒。

现在我正在上传大小为 160KB 的图像，但它失败了，而我的服务器配置允许最大大小为 20MB。在 WordPress 中提交上传表单后，我可以从浏览器的状态栏中看到文件被上传了几次（大多是 2 或 3 次）。当我使用 WordPress 的异步上传插件时，我还可以看到进度条从 0% 到 100% 一次又一次地增长，直到失败。

当它失败时，它卡在路径上`/wp-admin/media-upload.php?inline=&upload-page-form=`并且 Chrome 显示“错误 101 (net::ERR_CONNECTION_RESET)：连接已重置。” 我试过火狐，完全一样。

我在 Varnish 和 Apache 的错误日志中看不到任何相关内容。但是，我确实在 nginx 的访问日志中看到了以下日志的多行：

```
220.255.1.18 - - [01/Jan/2013:12:16:36 +0800] "POST /wp-admin/media-upload.php?inline=&upload-page-form= HTTP/1.1" 400 0 "http://MY-DOMAIN/wp-admin/media-new.php" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_5) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.101 Safari/537.11"
220.255.1.29 - - [01/Jan/2013:12:16:41 +0800] "POST /wp-admin/media-upload.php?inline=&upload-page-form= HTTP/1.1" 400 0 "http://MY-DOMAIN/wp-admin/media-new.php" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_5) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.101 Safari/537.11"
220.255.1.23 - - [01/Jan/2013:12:16:51 +0800] "POST /wp-admin/media-upload.php?inline=&upload-page-form= HTTP/1.1" 400 0 "http://MY-DOMAIN/wp-admin/media-new.php" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_5) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.101 Safari/537.11"
220.255.1.26 - - [01/Jan/2013:12:17:03 +0800] "POST /wp-admin/media-upload.php?inline=&upload-page-form= HTTP/1.1" 400 0 "http://MY-DOMAIN/wp-admin/media-new.php" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_5) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.101 Safari/537.11" 
```

所以有什么问题？我该如何解决？

# dart - 从开头或结尾修剪 Dart 字符串中的空格

> ID：14107905
> 
> 赞同：8
> 
> 时间：2013-01-01T04:52:17.977
> 
> 标签：dart

我对 Dart 非常陌生，正在尝试了解基本库。对于字符串，提供了一个 trim() 函数。这很好，但是没有明显的方法可以只在字符串的开头或结尾修剪空格吗？我找不到他们。谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-01T04:57:11.900

没有用于仅修剪前导或尾随空格的特定方法。但是很容易实现它们：

```
/// trims leading whitespace
String ltrim(String str) {
  return str.replaceFirst(new RegExp(r"^\s+"), "");
}

/// trims trailing whitespace
String rtrim(String str) {
  return str.replaceFirst(new RegExp(r"\s+$"), "");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-09T10:34:07.380

库[MoreDart](http://pub.dartlang.org/packages/more)有一些受 Guava 启发的助手，可让您从开头、结尾或两者有效地修剪字符串：

```
import 'package:more/char_matcher.dart';

...

var whitespace = new CharMatcher.whitespace();    // what to trim

whitespace.trimFrom(input);   // trim from beginning and end
whitespace.trimLeadingFrom(input);   // trim from beginning
whitespace.trimTrailingFrom(input);   // trim from end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-11T04:51:40.070

我们今天刚刚将`trimLeft`和添加`trimRight`到 Quiver，但事实证明它们也将添加到`String`未来的 SDK 版本中。不过，您今天可以使用 Quiver。

这些实现与基于 Regex 的解决方案之间的区别在于空格的定义与`String.trim`. 正则表达式识别较少的空白字符。

[http://pub.dartlang.org/packages/quiver](http://pub.dartlang.org/packages/quiver)

# android - 如何在android中显示来自输入流的svg图像？

> ID：14107907
> 
> 赞同：5
> 
> 时间：2013-01-01T04:52:52.010
> 
> 标签：android, svg

如何在 android 中将 svg xml 字符串显示为图像？我遇到的示例加载了可绘制文件夹中已经存在的图像，但在我的情况下，svg 数据在字符串中？

# java - Java 中的 3 层连接

> ID：14107908
> 
> 赞同：-3
> 
> 时间：2013-01-01T04:54:32.637
> 
> 标签：java, database, 3-tier

我正在构建一个 Java EE 应用程序作为前端，MySQL 作为数据库的后端......

我想在数据库和 Java 表单之间建立三层连接。

我需要什么？我需要一个像 glassfish 或 apache tomcat 这样的应用程序服务器吗？？？它与hibernate、spring或servelets或javabeans或其他东西有关吗？我真的很困惑，想从乞讨开始。

你能指导我吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T05:02:02.397

这是一个非常广泛的问题，但仍然简单地说

你提到了两层

1：java表单：可以使用JSP

3：MySQL数据库，后端

现在关于第 2 层，您可以使用服务小程序。小服务程序。

是的，你需要一个服务器，比如 tomcat。

我会建议学习有关 MVC 的知识。您可以使用类似 struts 的方法很好地为您的应用程序建模。

# coldfusion - ColdFusion - 将查询转换为 CFC 设置器

> ID：14107909
> 
> 赞同：6
> 
> 时间：2013-01-01T04:55:32.573
> 
> 标签：coldfusion, coldfusion-10

我正在将一个旧站点转换为 CF 10，并希望提供一些我的帮助代码。

代码查看查询，找到我们实例中的内容并填充它们：

```
<cffunction name="populateSelf">
    <cfargument name="source" type="query" required="yes" />
    <cfif arguments.source.recordcount EQ 1>
        <cfloop list="#arguments.source.columnlist#" index="local.col">
            <cfif structKeyExists(variables.instance, local.col)>
                <cfset variables.instance[local.col] = arguments.source[local.col]) />
            </cfif>
        </cfloop>
    </cfif> <!--- one record? --->
</cffunction> 
```

我已经`structKeyExists(variables.instance, local.col)`使用“getMetaData()”对我们当前的属性进行了方便的评估，但我在下一行遇到了问题：`<cfset variables.instance[local.col] = arguments.source[local.col]) />`

如果我将其更改为`<cfset this[local.col] =arguments.source[local.col] />`，它会忽略隐式设置器并将结果放在 this 范围内......

为了尝试调用我们的设置器，我尝试了这段代码：

```
<cfset setValue =arguments.source[local.col] />
<cfset evaluate("set#local.col#('#setValue#')" /> 
```

但这似乎很复杂且容易出错（也必须转义字符串中的任何“'”）。

使用查询加载部分或全部 CFC 属性而不必显式调用`this.setPROPERTYNAME(query.COLUMN)`可能几十次的最佳方法是什么？？？？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-01T10:32:20.790

因此，如果我正确阅读了所有这些内容，那么您的问题实际上是“我如何动态调用方法？”，而其余所有内容都是定型的？

您可以使用字符串来设置动态变量名称，然后设置一个函数引用，然后通过引用调用该函数：

```
myMethodName = "set#local.col#";
myMethodReference = this[myMethodName];
myMethodReference(arguments.source[local.col]); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-01T10:31:18.380

如果要动态调用方法，可以使用 cfinvoke

```
<cfinvoke method="set#property#"> 
```

有道理？

# java - java中的ArrayList打印最后插入的值？

> ID：14107910
> 
> 赞同：1
> 
> 时间：2013-01-01T04:56:18.673
> 
> 标签：java, jsp, arraylist

我有以下java类

```
package com.picvik.model;

import java.util.Date;

public class ViewAlbum {

private Integer albumid;
private String albumname;
private String description;
private String location;
private Date date;
private Integer uid;

public Integer getAlbumid() {
    return albumid;
}
public void setAlbumid(Integer albumid) {
    this.albumid = albumid;
}
public String getAlbumname() {
    return albumname;
}
public void setAlbumname(String albumname) {
    this.albumname = albumname;
}
public String getDescription() {
    return description;
}
public void setDescription(String description) {
    this.description = description;
}
public String getLocation() {
    return location;
}
public void setLocation(String location) {
    this.location = location;
}
public Date getDate() {
    return date;
}
public void setDate(Date date) {
    this.date = date;
}
public Integer getUid() {
    return uid;
}
public void setUid(Integer uid) {
    this.uid = uid;
}

} 
```

我正在从 db 中检索数据并将其添加到我的数组列表中，如下所示

```
public ArrayList getAllAlbums(Integer uid) {
    ViewAlbum album = new  ViewAlbum();
    ArrayList<ViewAlbum>allAlbums = new ArrayList<ViewAlbum>();
    try {
        String qstring = "SELECT albumid, albumname, description, location," +
                " date, uid FROM picvik_picture_album WHERE " +
                "uid = '" + uid + "';";

        System.out.println(qstring);
        connection = com.picvik.util.MySqlConnection.getInstance().getConnection();
        ptmt = connection.prepareStatement(qstring);
        resultSet = ptmt.executeQuery();
        while(resultSet.next()) {
            //System.out.println(resultSet.getString("albumname"));
            album.setAlbumid(resultSet.getInt("albumid"));
            album.setAlbumname(resultSet.getString("albumname"));
            album.setDescription(resultSet.getString("description"));
            album.setLocation(resultSet.getString("location"));
            album.setDate(resultSet.getDate("date"));
            album.setUid(resultSet.getInt("uid"));
            allAlbums.add(album);
        }

        resultSet.close();
        ptmt.close();
        connection.close();

    } catch (Exception e) {
        e.printStackTrace();
    }   
    return allAlbums;
} 
```

但是当我试图打印存储在数组列表中的值时。它总是给我最后插入的记录。

```
<div class="row">
                <div class="span10">
                    <s:iterator value="allAlbums">
                        <s:property value="albumname"/>
                    </s:iterator>   
                </div>
            </div> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-01T04:59:58.590

这里，

```
ViewAlbum album = new ViewAlbum();
// ...

while (resultSet.next()) {
    album.setAlbumid(resultSet.getInt("albumid"));
    // ...
    allAlbums.add(album);
} 
```

您正在`album`为所有记录重用相同的实例。每次在循环中都会覆盖实例的数据。该列表不包含实例的副本，但它包含对单个实例的*引用的副本。*你知道，Java 是面向对象的。

您应该为`album`每条记录创建一个新实例。将实例化移动到循环内部。

```
// ...

while (resultSet.next()) {
    ViewAlbum album = new ViewAlbum();
    album.setAlbumid(resultSet.getInt("albumid"));
    // ...
    allAlbums.add(album);
} 
```

### 也可以看看：

*   [如何通过引用正确传递 Integer 类？](https://stackoverflow.com/questions/3330864/how-can-i-pass-an-integer-class-correctly-by-reference/3330884#3330884)

* * *

**与具体问题无关**，您应该在`finally`块中关闭 JDBC 资源，或者在`try()`try-with-resources 语句中打开它们，否则在执行查询或处理结果集时出现异常，它们仍然会泄漏。您还应该将 JDBC 资源的声明移到方法块内，否则您也会遇到线程安全问题。最后但同样重要的是，您应该使用 setter 方法`PreparedStatement`在 SQL 字符串中设置用户控制的变量。如果它们是字符串，那么您就会遇到 SQL 注入攻击漏洞。

### 也可以看看：

*   [由 ResultSet 支持的 Java 迭代器](https://stackoverflow.com/questions/1870022/java-resultset-hasnext/1870272#1870272)
*   [JDBC MySql 连接池实践避免连接池耗尽](https://stackoverflow.com/questions/2313197/jdbc-mysql-connection-pooling-practices)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T05:18:47.633

您只有一个 ViewAlbum 实例，并且您在整个循环中仅使用该单个实例播放（设置值）。因此，在循环完成后，您只有一个对象插入到 ArrayList 中，N(Size of Resultset) 没有次数。

# jquery - 将选定文本绑定到选择框的属性

> ID：14107911
> 
> 赞同：0
> 
> 时间：2013-01-01T04:56:25.867
> 
> 标签：jquery, html, jquery-ui

我创建了一个小应用程序来将文本从 textarea 添加到 div 块。我希望当用户单击黄色 div 文本时不会追加，并且所选文本的属性（字体系列、字体大小）也在选择框中突出显示

```
$(document).ready( function() {
$('#page1').click(function(e){
var $el = $("<li class='text'>"+$('#ta').val()+"</li>"),
    $this = $(this), offset = $this.offset();
$el.css({
    position: 'absolute',
    left: e.pageX - offset.left,
    top: e.pageY - offset.top
});
$this.append($el);
($el).draggable();
$("#page1 li").click(function(){
$("#page1 li").removeClass('active');
$(this).addClass("active");

});
});
    $("#fs").change(function() {
        $('li.active').css("font-family", $(this).val());
    });
    $("#size").change(function() {
        $('li.active').css("font-size", $(this).val() + "px");
    });

  }); 
```

Jsfiddle 链接：http: [//jsfiddle.net/sharma_pooja/P2Kyk/31/](http://jsfiddle.net/sharma_pooja/P2Kyk/31/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T06:50:36.280

关于你想要什么的解释不是很清楚。我想你想要这样的东西：

```
$('#page1').click(function(e){
  if( $(e.target).is('li.text') ){
      return;
  }
  /* other code*/

}) 
```

演示：http: [//jsfiddle.net/P2Kyk/32/](http://jsfiddle.net/P2Kyk/32/)

# javascript - 无法使用 jquery 在 SELECT 中选择多个选项

> ID：14107913
> 
> 赞同：0
> 
> 时间：2013-01-01T04:57:08.960
> 
> 标签：javascript, jquery

我有一个允许多项选择的 HTML 选择元素。我正在使用 ajax 请求的结果填充选项。我正在向选项添加自定义属性。在一个实例中，当另一个 ajax 请求完成时，我想更新多选值。我有以下 javascript 方法来做这个选择：

```
// select = id of the select control.
// selected = list of json objects with an id representing those that are selected.
updateSelection = function( select, selected ) {
    $('#'+select+' option').each( function() {
        var item = $(this);
        $.each(selected, function() {
            item.removeAttr( "selected" );
            if ( this.id === parseInt(item.attr("optionId"), 10 )) {
                alert( "selecting " + item.text());
                item.attr("selected", true );
            }
        });
    });
}; 
```

运行该方法之前的 HTML 如下所示：

```
<select id="putPlatforms" multiple="multiple">
    <option optionid="1" optionversion="1">PC</option>
    <option optionid="3" optionversion="1">Xbox 360</option>
</select> 
```

在仅选择“PC”的情况下，做出选择并反映在 UI 中。如果仅选择“Xbox 360”，则相同。如果应该选择 BOTH 选项，我会看到提示将同时选择这两个选项，但只选择 Xbox 360。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T05:13:21.023

使用[这个问题](https://stackoverflow.com/questions/2049710/how-to-select-options-in-multiple-select-list-with-jquery)的答案，我能够使它工作。我将我的功能更改为以下内容：

```
// select = id of the select control.
// selected = list of json objects with an id representing those that are selected.
updateSelection = function( select, selected ) {
    $('#'+select+' option').attr('selected', false );
    $.each(selected, function() {
        $('#'+select+' option[optionid='+this.id+']').attr('selected', true );
    });
}; 
```

# mysql - MySQL 更改触发器以使用动态数据库名称

> ID：14107917
> 
> 赞同：2
> 
> 时间：2013-01-01T04:57:27.553
> 
> 标签：mysql, sql, triggers, prepared-statement

我有一个完美的工作触发器。随着我添加更多测试，我发现我想更改此触发器以根据当前数据库动态选择数据库。在生产中，此触发器驻留在数据库中`rdata`并与`default`. 但是在测试中，触发器驻留在`test_rdata`并与`test_default`. 如何修改以下触发器以动态选择正确的数据库

```
DROP TRIGGER IF EXISTS `af_rdata_data_trigger_4` $$
CREATE TRIGGER af_rdata_data_trigger_4
    AFTER INSERT on Results FOR EACH ROW
    BEGIN
        DECLARE project_id INT;
        -- Do this first - another table may have already created it..
        INSERT INTO default.rdata_project (`user`,`result_number`, `created_on`)
        VALUES (USER(), NEW.LBLDGRUNNO, NOW()) ON DUPLICATE KEY UPDATE last_update=NOW();
        -- Now push in our values 

        -- THIS IS WHAT NEEDS TO BE DYNAMIC!!
        UPDATE default.rdata_project project JOIN Results
        ON project.result_number = Results.LBLDGRUNNO SET
            project.annual_total_cost = Results.FTOTCOST
        WHERE project.result_number=NEW.LBLDGRUNNO;

    END$$
DELIMITER ; 
```

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T05:26:45.597

**您可以使用STORED PROCEDURE**创建动态**SELECT**语句，并从您的**TRIGGER****调用**该过程。例如检查下面的代码：

 ******```
DELIMITER $$

DROP PROCEDURE IF EXISTS `sp_UpdateProject`$$

CREATE PROCEDURE `sp_UpdateProject`(IN _dbName VARCHAR(100), IN _LBLDGRUNNO INT)
BEGIN 
    SET @s = CONCAT("UPDATE ", _dbName, ".rdata_project project ");
    SET @s = CONCAT(@s, "JOIN Results ON project.result_number = Results.LBLDGRUNNO ");
    SET @s = CONCAT(@s, "SET project.annual_total_cost = Results.FTOTCOST ");
    SET @s = CONCAT(@s, "WHERE project.result_number=", _LBLDGRUNNO,";");
    PREPARE stmt FROM @s;
    EXECUTE stmt;
    DEALLOCATE PREPARE stmt;
END$$

DELIMITER ;

DROP TRIGGER IF EXISTS `af_rdata_data_trigger_4` $$
CREATE TRIGGER af_rdata_data_trigger_4
    AFTER INSERT ON Results FOR EACH ROW
    BEGIN
        DECLARE project_id INT;
        -- Do this first - another table may have already created it..
        INSERT INTO default.rdata_project (`user`,`result_number`, `created_on`)
        VALUES (USER(), NEW.LBLDGRUNNO, NOW()) ON DUPLICATE KEY UPDATE last_update=NOW();
        -- Now push in our values 

        -- THIS IS WHAT NEEDS TO BE DYNAMIC!!
        CALL sp_UpdateProject(dbName, NEW.LBLDGRUNNO);
    END$$
DELIMITER ; 
```******

# android - 如何从项目中仅在 Android 设备中显示一个 MainActivity

> ID：14107918
> 
> 赞同：1
> 
> 时间：2013-01-01T04:57:33.750
> 
> 标签：android, android-activity, android-manifest

我在 android 中制作了一个包含四个活动的 Timer 应用程序。现在，当我在我的 android 设备中安装 .apk 时，它会在屏幕上显示所有四个活动图标，而不是只显示主活动图标..请帮助我..我的清单文件是如下;

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.timerdemo2"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".NewProject"
            android:label="@string/title_activity_main" 
             android:screenOrientation="portrait">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

            </intent-filter>
        </activity>
        <activity
            android:name=".Timedetails"
            android:label="@string/title_activity_timedetails"
             android:screenOrientation="portrait" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

            </intent-filter>
        </activity>
        <activity
            android:name=".ListActivity"
            android:label="@string/title_activity_list"
             android:screenOrientation="portrait" >
            <intent-filter>

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_new_project"
             android:screenOrientation="portrait" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T05:04:52.823

试试这个代码而不是上面的代码并记住应用程序添加标签的主要活动

```
 <intent-filter>
                <action android:name="android.intent.action.MAIN" />
               <category android:name="android.intent.category.LAUNCHER" />    
            </intent-filter> 
```

你的清单应该是这样的

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.timerdemo2"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".NewProject"
            android:label="@string/title_activity_main" 
             android:screenOrientation="portrait">

        </activity>
        <activity
            android:name=".Timedetails"
            android:label="@string/title_activity_timedetails"
             android:screenOrientation="portrait" >

        </activity>
        <activity
            android:name=".ListActivity"
            android:label="@string/title_activity_list"
             android:screenOrientation="portrait" >

        </activity>
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_new_project"
             android:screenOrientation="portrait" >

         <intent-filter>
                <action android:name="android.intent.action.MAIN" />
               <category android:name="android.intent.category.LAUNCHER" />

            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T05:04:39.827

这是因为您正在申请`</intent-filter>`所有活动而不是主要活动，只需进行如下更改

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="com.example.timerdemo2"
        android:versionCode="1"
        android:versionName="1.0" >

        <uses-sdk
            android:minSdkVersion="8"
            android:targetSdkVersion="15" />

        <application
            android:icon="@drawable/ic_launcher"
            android:label="@string/app_name"
            android:theme="@style/AppTheme" >
            <activity
                android:name=".MainActivity"
                android:label="@string/title_activity_main" 
                 android:screenOrientation="portrait">
                <intent-filter>
                <action android:name="android.intent.action.MAIN" />
            </intent-filter>
            </activity>

            <activity
                android:name=".NewProject"
                android:label="@string/title_activity_new_project"
                 android:screenOrientation="portrait" >

            </activity>
            <activity
                android:name=".Timedetails"
                android:label="@string/title_activity_timedetails"
                 android:screenOrientation="portrait" >

            </activity>
            <activity
                android:name=".ListActivity"
                android:label="@string/title_activity_list"
                 android:screenOrientation="portrait" >

            </activity>

        </application>

    </manifest> 
```

[关于意图过滤器有相当多的文档](http://developer.android.com/guide/components/intents-filters.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T05:03:20.850

更改您的意图过滤器，MAIN/LAUNCHER 意图过滤器本质上告诉 android 该活动是应用程序的启动活动，而不是使用：

```
<action android:name="android.intent.action.MAIN" /> 
```

采用 ：

```
<action android:name="android.intent.action.VIEW" /> 
```

# mysql - 在mysql中复制没有数据的数据库结构（带有空表）

> ID：14107919
> 
> 赞同：49
> 
> 时间：2013-01-01T04:57:39.737
> 
> 标签：mysql, copy, database-schema

有没有办法在 MySQL 中复制没有数据的数据库结构，所以新数据库将与从中复制的相同，但有空表。

在得到一些建议后，我尝试了该命令，但出现语法错误，我的`username = root`和`password = nothing`. 我猜是默认的。我正在尝试以下命令，

```
mysqldump -u root -p -d xyz_db | mysql -u root -p -Dnew_db 
```

我在命令中缺少或放错了什么？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-01-01T04:59:07.157

```
mysqldump -u user -ppass -d olddb | mysql -u user -ppass -D newdb 
```

新数据库必须已经存在。mysqldump 命令中的`-d`标志防止复制数据。

`-p`标志和密码之间没有空格。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-01T05:40:43.450

您可以使用**mysqldump进行备份，并使用命令行使用****mysql**进行恢复。

**用于备份数据库**

```
$ mysqldump -u root-pPassword -P3309 --routines --no-data testdb > "d:\dbwithnodata.sql" 
```

**用于恢复数据库**

```
$ mysql -u root-pPassword -P3309 newdb < "d:\dbwithnodata.sql" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-09T16:58:48.173

您可以使用备份 MYSQL 数据库结构

```
mysqldump -u username –p  -d database_name > backup.sql 
```

（你不应该在命令行提供密码，因为它会导致安全风险。MYSQL 默认会要求输入密码。）你可以在数据库中创建创建表

```
mysql -u username -p new_database < backup.sql 
```

现在您可以使用管道将第一个命令的输出作为第二个命令的输出，您将不再需要`backup.sql`

```
mysqldump -u username –p  -d database_name|mysql -u username -p new_database 
```

中的所有表都将在`new_database`没有数据的情况下创建。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-01T05:00:23.533

来自[electrictboolbox.com/mysqldump-schema-only](http://www.electrictoolbox.com/mysqldump-schema-only/)：

转储所有没有数据的表的数据库结构添加 -d 标志以表示不应在输出中包含任何数据，其中“mydatabase”是要转储的数据库的名称，“someuser”是登录名用于连接数据库。以下命令将转储指定 MySQL 数据库中所有表的表结构：

```
$ mysqldump -d -u someuser -p mydatabase 
```

-d 标志表示不在转储中包含数据。或者，如果您发现更容易记住，您可以使用 --no-data 代替：

```
$ mysqldump --no-data -u someuser -p mydatabase 
```

-u 标志指示将提供密码的用户名和 -p 标志。按下后将提示您输入密码。

或者，可以在命令行上提供密码，但 -p 标志和密码之间不能有空格。例如，如果密码是“apples”，请执行以下操作：

```
$ mysqldump --no-data -u someuser -papples mydatabase
$ mysqldump -d -u someuser -p mydatabase > mydatabase.sql # This will output to a sql file 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-02-08T09:43:32.253

试试这个：

```
$ mysqldump --no-data -h localhost -u root -p database_name > imported_db_name.sql 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-25T23:34:16.173

`mysqldump -d`还不够，因为在触发器、程序等中，您可以将类似`'old_db'.tb_name`的引用替换为`'new_db'.tb_name`

```
mysql -u user -ppass -e "CREATE DATABASE new_db" 

mysqldump -u user -ppass -d old_db |     # pull structure  -d flag  
sed "s/\`old_db\`\./\`new_db\`\./g" |    # solve foreign_keys, triggers etc 
sed 's/AUTO_INCREMENT=[0-9]\+/''/g' |    # reset indexes
mysql -u user -ppass new_db              # push structure 
```

* * *

下面是一个 bash 脚本，它还创建目标数据库并执行一些检查

> **# ./db_clone.sh   *old_db*  *new_db***

我使用`/root/.mysqlcnx` 带有凭据的文件（而不是使用 -u root -pPass）

```
[client]
user = root # or powerfull_user with GRANTS 
password = pass_string
host = localhost 
```

以及以下用于克隆数据库的脚本 *[在虚拟机上进行试验以获得信心]*

```
#!/bin/bash

if [ $# -lt 2 ]; then
   echo "syntax:\n.\db_clone.sh source_db_name target_db_name [--drop]\n"
exit 1
fi

    # checking target database $2 exits
tg_db=$(mysql --defaults-extra-file=~/.mysqlcnx -s -N -e "SELECT count(*)>0 FROM 
         information_schema.SCHEMATA where SCHEMA_NAME='${2}'")
if [ $tg_db = '1' ]; then
    # checking target database has tables
    tg_tb=$(mysql --defaults-extra-file=~/.mysqlcnx -s -N -e " SELECT count(*) > 0 
            FROM information_schema.TABLES WHERE TABLE_SCHEMA='${2}'")
  if [ $tg_tb = '1' ]; then
     if [ $# -eq 3 ] && [ "$3" = '--drop' ]; then
        echo "TYPE 'YES' (case sensitive) TO OVERRIDE"
        read opt # request confirmation 
        if [ "$opt" != "YES" ]; then
            echo "OPERATION CANCELED!"
            exit 1
        fi
     else
       printf "DATABASE \"${2}\" EXISTS AND HAS TABLES\nUSE --drop as 3rd arg to override!\n"
       exit 1
     fi
  fi
else 
  mysql --defaults-extra-file=~/.mysqlcnx -e "CREATE DATABASE \`${2}\`" 
fi

echo "CREATING ${2}"
mysqldump --defaults-extra-file=~/.mysqlcnx -d $1 | # dump source
sed "s/\`${1}\`\./\`${2}\`\./g" |  #  solving `source_db`.tb_name       
sed 's/AUTO_INCREMENT=[0-9]\+/''/g' | # solving  AUTO_INCREMENT=1
mysql --defaults-extra-file=~/.mysqlcnx $2  # populating target_db 
echo "DONE" 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-05-14T06:55:47.817

正如手册在复制数据库中所说，您可以将转储直接通过管道传输到 mysql 客户端：

```
mysqldump db_name | mysql new_db_name 
```

如果您使用的是 MyISAM，您可以复制文件，但我不建议这样做。这有点狡猾。

从各种好的其他答案中整合

mysqldump 和 mysql 命令都接受用于设置连接详细信息（以及更多）的选项，例如：

```
mysqldump -u <user name> --password=<pwd> <original db> | mysql -u <user name> -p <new db> 
```

例子 ：`mysqldump -u root -pmypassword old_database | mysql -u root -pmypassowrd new_database`

[博客链接](https://php-scripts-form.blogspot.com/2021/05/mysql-cloning-mysql-database-on-same.html)

# c++ - OpenGL 错误。运行时立方体顶点在错误的位置？

> ID：14107924
> 
> 赞同：0
> 
> 时间：2013-01-01T04:58:41.360
> 
> 标签：c++, opengl, runtime-error, vertical-alignment

我正在创建 Minecraft 的新手版本克隆。首先，我想渲染一个立方体并在所有边上添加一个特定的纹理来开始。我创建了一个 Block 类，它包含来自输​​入的顶点，并有一个名为 RenderBlock 的输出函数来渲染带有附加纹理的“块”。

这是输入 8 个数组的函数，代表块的 8 个顶点的 8 个坐标。

```
void Block::SetVertices(float UL[],float UR[],float ZR[],float ZL[],float UL2[],float           UR2[],float ZR2[],float ZL2[])
{
  Front_Square[1][1]=UL[1];
  Front_Square[1][2]=UL[2];
  Front_Square[1][3]=UL[3];
  std::cout << "Front Top Left Coordinates" << std::endl;    
  std::cout << Front_Square[1][1] << ","<<Front_Square[1][2] << "," << Front_Square[1][3] << std::endl;
  Front_Square[2][1]=UR[1];
  Front_Square[2][2]=UR[2];
  Front_Square[2][3]=UR[3];
  std::cout << "Front Top Right Coordinates" << std::endl;    
  std::cout << Front_Square[2][1] << ","<<Front_Square[2][2] << "," << Front_Square[2][3] << std::endl;
  Front_Square[3][1]=ZR[1];
  Front_Square[3][2]=ZR[2];
  Front_Square[3][3]=ZR[3];
  std::cout << "Front Bottom Right Coordinates" << std::endl;    
  std::cout << Front_Square[3][1] << ","<<Front_Square[3][2] << "," << Front_Square[3][3] << std::endl;
  Front_Square[4][1]=ZL[1];
  Front_Square[4][2]=ZL[2];
  Front_Square[4][3]=ZL[3];
  std::cout << "Front Bottom Left Coordinates" << std::endl;    
  std::cout << Front_Square[4][1] << ","<<Front_Square[4][2] << "," << Front_Square[4][3] << std::endl;
  //--------------BACK SQUARE------------------------------------------------------------------------------------------------------------------------//  
  Back_Square[1][1]=UL2[1];
  Back_Square[1][2]=UL2[2];
  Back_Square[1][3]=UL2[3];

  Back_Square[2][1]=UR2[1];
  Back_Square[2][2]=UR2[2];
  Back_Square[2][3]=UR2[3];

  Back_Square[3][1]=ZR2[1];
  Back_Square[3][2]=ZR2[2];
  Back_Square[3][3]=ZR2[3];

  Back_Square[4][1]=ZL2[1];
  Back_Square[4][2]=ZL2[2];
  Back_Square[4][3]=ZL2[3]; 
}; 
```

这是渲染块的函数。

```
void Block::RenderBlock(const char*SideTexture)
{
 glEnable(GL_TEXTURE_2D);
 Tex[1]=loadTexture(SideTexture); 
 glBindTexture(GL_TEXTURE_2D, Tex[1]);
 glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);  
 glBegin(GL_QUADS);
glTexCoord2f(0.0f, 1.0f); glVertex3f(Front_Square[1][1],Front_Square[1][2],Front_Square[1][3]);//FTL
glTexCoord2f(1.0f, 1.0f); glVertex3f(Front_Square[2][1],Front_Square[2][2],Front_Square[2][3]);//FTR
glTexCoord2f(1.0f, 0.0f); glVertex3f(Front_Square[3][1],Front_Square[3][2],Front_Square[3][3]);//FBR
glTexCoord2f(0.0f, 0.0f); glVertex3f(Front_Square[4][1],Front_Square[4][2],Front_Square[4][3]);//FBL
     glEnd();

    glBindTexture(GL_TEXTURE_2D, Tex[1]);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
     glBegin(GL_QUADS);
glTexCoord2f(0.0f, 1.0f); glVertex3f(Back_Square[1][1],Back_Square[1][2],Back_Square[1][3]);//BTL
glTexCoord2f(1.0f, 1.0f); glVertex3f(Back_Square[2][1],Back_Square[2][2],Back_Square[2][3]);//BTR
glTexCoord2f(1.0f, 0.0f); glVertex3f(Back_Square[3][1],Back_Square[3][2],Back_Square[3][3]);//BBR
glTexCoord2f(0.0f, 0.0f); glVertex3f(Back_Square[4][1],Back_Square[4][2],Back_Square[4][3]);//BBL
     glEnd();

    glBindTexture(GL_TEXTURE_2D, Tex[1]);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
     glBegin(GL_QUADS);
glTexCoord2f(0.0f, 1.0f); glVertex3f(Back_Square[1][1],Back_Square[1][2],Back_Square[1][3]);//BTL
glTexCoord2f(1.0f, 1.0f); glVertex3f(Front_Square[1][1],Front_Square[1][2],Front_Square[1][3]);//FTL
glTexCoord2f(1.0f, 0.0f); glVertex3f(Front_Square[4][1],Front_Square[4][2],Front_Square[4][3]);//FBL
glTexCoord2f(0.0f, 0.0f); glVertex3f(Back_Square[4][1],Back_Square[4][2],Back_Square[4][3]);//BBL
     glEnd();

    glBindTexture(GL_TEXTURE_2D, Tex[1]);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
     glBegin(GL_QUADS);
glTexCoord2f(0.0f, 1.0f); glVertex3f(Back_Square[2][1],Back_Square[2][2],Back_Square[2][3]);//BTR
glTexCoord2f(1.0f, 1.0f); glVertex3f(Front_Square[2][1],Front_Square[2][2],Front_Square[2][3]);//FTR
glTexCoord2f(1.0f, 0.0f); glVertex3f(Front_Square[3][1],Front_Square[3][2],Front_Square[3][3]);//FBR
glTexCoord2f(0.0f, 0.0f); glVertex3f(Back_Square[3][1],Back_Square[3][2],Back_Square[3][3]);//BBR
     glEnd();

     glBindTexture(GL_TEXTURE_2D, Tex[1]);
     glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
 glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
     glBegin(GL_QUADS);
glTexCoord2f(0.0f, 1.0f); glVertex3f(Back_Square[4][1],Back_Square[4][2],Back_Square[4][3]);//BBL
glTexCoord2f(1.0f, 1.0f); glVertex3f(Back_Square[3][1],Back_Square[3][2],Back_Square[3][3]);//BBR
glTexCoord2f(1.0f, 0.0f); glVertex3f(Front_Square[3][1],Front_Square[3][2],Front_Square[3][3]);//FBR
glTexCoord2f(0.0f, 0.0f); glVertex3f(Front_Square[4][1],Front_Square[4][2],Front_Square[4][3]);//FBL
     glEnd();

    glBindTexture(GL_TEXTURE_2D, Tex[1]);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
     glBegin(GL_QUADS);
glTexCoord2f(0.0f, 1.0f); glVertex3f(Back_Square[1][1],Back_Square[1][2],Back_Square[1][3]);//BTL
glTexCoord2f(1.0f, 1.0f); glVertex3f(Back_Square[2][1],Back_Square[2][2],Back_Square[2][3]);//BTR
glTexCoord2f(1.0f, 0.0f); glVertex3f(Front_Square[2][1],Front_Square[2][2],Front_Square[2][3]);//FTR
glTexCoord2f(0.0f, 0.0f); glVertex3f(Front_Square[1][1],Front_Square[1][2],Front_Square[1][3]);//FTL
     glEnd();
    glDisable(GL_TEXTURE_2D);
     }; 
```

Blocks Dirt 和 Grass Dirt 的 2 个数组

```
float TL[] = {0.0f,-1.0f,1.0f,0.0f};
float TR[] = {0.0f,1.0f,1.0f,0.0f};
float BR[] = {0.0f,1.0f,-1.0f,0.0f};
float BL[] = {0.0f,-1.0f,-1.0f,0.0f};
float TL2[] = {0.0f,-1.0f,1.0f,-2.0f};
float TR2[] = {0.0f,1.0f,1.0f,-2.0f};
float BR2[] = {0.0f,1.0f,-1.0f,-2.0f};
float BL2[] = {0.0f,-1.0f,-1.0f,-2.0f} 
```

草

```
float DTL[] = {0.0f,-1.0f,1.0f+Grass_XChan,0.0f};
float DTR[] = {0.0f,1.0f,1.0f+Grass_XChan,0.0f};
float DBR[] = {0.0f,1.0f,-1.0f+Grass_XChan,0.0f};
float DBL[] = {0.0f,-1.0f,-1.0f+Grass_XChan,0.0f};
float DTL2[] = {0.0f,-1.0f,1.0f+Grass_XChan,-2.0f};
float DTR2[] = {0.0f,1.0f,1.0f+Grass_XChan,-2.0f};
float DBR2[] = {0.0f,1.0f,-1.0f+Grass_XChan,-2.0f};
float DBL2[] = {0.0f,-1.0f,-1.0f+Grass_XChan,-2.0f}; 
```

抱歉，代码太长了。如果你想看的话，这里是 Main.cpp。

```
#include <GL/glut.h>
#include <iostream>
#include <assert.h>
#include <fstream>
#include "block.h"
using namespace std;
float positionX = 0.0f;
float positionY = 0.0f;
float positionZ = -4.0f;
float angle = 0.0f;
float RotX=0.01f;
float RotY=0.0f;
float RotZ=0.0f;
float Grass_XChan=2.0f;
float Grass_ZChan=-2.0f;
bool Render = true;
Block Dirt;
Block Grass;
float TL[] = {0.0f,-1.0f,1.0f,0.0f};
float TR[] = {0.0f,1.0f,1.0f,0.0f};
float BR[] = {0.0f,1.0f,-1.0f,0.0f};
float BL[] = {0.0f,-1.0f,-1.0f,0.0f};
float TL2[] = {0.0f,-1.0f,1.0f,-2.0f};
float TR2[] = {0.0f,1.0f,1.0f,-2.0f};
float BR2[] = {0.0f,1.0f,-1.0f,-2.0f};
float BL2[] = {0.0f,-1.0f,-1.0f,-2.0f};

float DTL[] = {0.0f,-1.0f,1.0f+Grass_XChan,0.0f};
float DTR[] = {0.0f,1.0f,1.0f+Grass_XChan,0.0f};
float DBR[] = {0.0f,1.0f,-1.0f+Grass_XChan,0.0f};
float DBL[] = {0.0f,-1.0f,-1.0f+Grass_XChan,0.0f};
float DTL2[] = {0.0f,-1.0f,1.0f+Grass_XChan,-2.0f};
float DTR2[] = {0.0f,1.0f,1.0f+Grass_XChan,-2.0f};
float DBR2[] = {0.0f,1.0f,-1.0f+Grass_XChan,-2.0f};
float DBL2[] = {0.0f,-1.0f,-1.0f+Grass_XChan,-2.0f};
void display(void)
{
  glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
  glMatrixMode(GL_MODELVIEW);
  glLoadIdentity();
  glTranslatef(positionX, positionY, positionZ);
  glPushMatrix();
  glRotatef(angle,RotX,RotY,RotZ);
  Dirt.RenderBlock("C:/Users/Progr_Anim/Desktop/textures/DirtBottom.bmp");
  Grass.RenderBlock("C:/Users/Progr_Anim/Desktop/textures/GrassTop.bmp");

  glPopMatrix();
  glutSwapBuffers();
   }
  //-------------------------------------------------------------------------------------------------------------------------------------------
    void HandleResize(int w, int h) {
glViewport(0, 0, w, h);
glMatrixMode(GL_PROJECTION);
glLoadIdentity();
gluPerspective(45.0, (float)w / (float)h, 1.0, 200.0);
   }
   void Camera(unsigned char key,int x,int y)
   {
   switch(key)
 {
  case 'w':
       positionZ += 0.08f;
       break;
  case 's':
       positionZ -= 0.08f;
       break;
  case 'a':
       positionX += 0.08f;
       break;
  case 'd':
       positionX -= 0.08f;
       break;
  case 'c':
       if(angle>=360.0f)
       {
       angle=0.0f;                
       }
       angle+=5.0f;
       break;
  case '1':
       angle = 0.0f;
       RotX=1.0f;
       RotY=0.0f;
       RotZ=0.0f;
       break;
  case '2':
       angle = 0.0f;
       RotX=0.0f;
       RotY=1.0f;
       RotZ=0.0f;
       break;
  case '3':
       angle = 0.0f;
       RotX=0.0f;
       RotY=0.0f;
       RotZ=1.0f;
       break;
  case 'q':
       exit(0);
       break;
     }     
  }
 int main(int argc, char** argv)
 {
   Dirt.SetVertices(TL,TR,BR,BL,TL2,TR2,BR2,BL2);
   Grass.SetVertices(DTL,DTR,DBR,DBL,DTL2,DTR2,DBR2,DBL2);
   glutInit(&argc, argv);
   glutInitDisplayMode(GLUT_RGB | GLUT_DOUBLE | GLUT_DEPTH);
   //Create Window
   glutInitWindowSize(640,480);
   glutCreateWindow("Love");
   glEnable(GL_DEPTH_TEST);
   glEnable(GL_COLOR_MATERIAL);
   glutDisplayFunc(display);
   glutReshapeFunc(HandleResize);
   glutKeyboardFunc(Camera);
   glutIdleFunc(display);
   glutMainLoop();
     return 0;
    } 
```

这是旋转立方体的视频，顶部是草块，底部是土块。 [关联](http://youtu.be/dLX3TE-nKMk)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T09:43:26.370

我将在这里回答一个问题，因为我认为帖子中没有足够的信息。

这段代码中的数组被使用，就好像第 0 个元素不存在一样，并且使用的数组的定义在前面有一个额外的零作为填充。

然而，有些数组在这里的代码中没有定义，必须在别处声明，可能带有大小。我将猜测这个大小对于 1 索引数组是错误的。

即`back_square`并且`front_square`可能被声明为：

```
float back_square[4][3]; 
```

而不是：

```
float back_square[5][4]; 
```

这就是它们的使用方式。

结果将是未定义的行为，在这种情况下可能是覆盖顶点，折叠立方体的一个角。

无论哪种方式，我强烈建议*不要*以这种方式使用数组，并习惯从零开始的事情。

# python - Python if/else 不工作...不满足 if 条件，但 else 不执行

> ID：14107925
> 
> 赞同：1
> 
> 时间：2013-01-01T04:58:47.263
> 
> 标签：python, amazon-s3, boto

出色地。我想到了。事实证明，if 在不应该匹配的时候并没有准确地运行，那是因为`_s3_bucket.list(prefix=basename)`= []。我对 python 的信心已经恢复。：） 谢谢你们！

为什么这段代码永远不会打印“不匹配”？当正则表达式匹配时，它会成功打印“匹配”，但如果不匹配，则不会执行 else。`print type(match)`返回`<type 'list'>`。

```
object_regex = re.compile('%s\.(\d+)\.%s' % \
    (re.escape('.'.join(basename.split('.')[:-2])),
     re.escape(basename.split('.')[-1])))
for obj in _s3_bucket.list(prefix=basename):
    match = object_regex.findall(obj.name)
    print match //prints nothing when nothing is found. not even []
    if match:
        print "matches"
    else:
        print "doesnt match" 
```

我也试过

```
if not match:
    print "doesnt match"
else:
    print "matches" 
```

它也从不执行 if 。

打印输出（调用函数时打印 UPLOAD TO S3）：

```
UPLOAD TO S3 /fonts/HelveticaNeueLTPro-Lt.1351206175.otf
[u'1351206175']
matches
UPLOAD TO S3 /fonts/HelveticaNeueLTPro-Bd.1351206175.otf
[u'1351206175']
matches
UPLOAD TO S3 /css/common.1357015625.css      <-- what is going on here?
UPLOAD TO S3 /css/landing-style.1356896077.css
[u'1356896077']
matches 
```

当我`print type(match)`不是每次都`print match`得到`<type 'list'>`时，这让我相信匹配确实是一个空列表。但是空列表应该这样做......

```
>>> match=[]
>>> if match:
...     print "ASDF"
... 
>>> if not match:
...     print "asdf"
... 
asdf 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T05:16:33.027

的返回值`findall`是一个列表。如果 RE 有组，那么根据文档，它可能包含不匹配的空组条目。由于您使用的是组，因此它可能会返回一个空元组列表。但由于列表不是空的，它的计算结果为 True。不管。

为了显示这一点，打印出 findall 的返回值。打印用于调试的东西是常见的做法。这将是我首先想到的。

或者

您的方法`_s3_bucket.list(prefix=basename)`没有返回任何要迭代的内容，并且跳过了整个循环块。那输出是什么？

但

我们无法真正判断，因为您动态构建您的 RE，我们不知道它的真实外观或它将匹配什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T05:27:22.690

当没有匹配时，函数 findall 返回 []。示例如下：

```
>>> import re
>>> res = re.findall('\d','ad34hsfg2')
>>> print res
['3', '4', '2']
>>> res = re.findall('\d','adhsfg')
>>> print res
[]
>>> print res == None
False
>>> print res == 0
False 
```

所以，现在我想你应该明白了。我回答你的问题吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T06:28:35.993

实际的问题是`_s3_bucket.list(prefix=basename)`== []，什么时候`object_regex.findall(obj.name)`应该是 []。因此，if/else 从未执行。我不知道为什么，当我打印类型时，它仍然打印......但我想我忘记将那个设置为不匹配正则表达式。

基本上，如果 if/else 似乎不起作用，它的控制流可能会被它之前的某些东西切断！

感谢大家！新年快乐！

# jquery - Jquery 滑块由于未知原因无法正常工作

> ID：14107930
> 
> 赞同：1
> 
> 时间：2013-01-01T04:59:12.897
> 
> 标签：jquery, slider

我正在尝试使用我以前多次使用过的 jquery 滑块 - 但这次它不起作用，我不知道为什么。

这是 HTML 代码，基本上只是一个主滑块 div，里面有另一个 div 用于幻灯片，每个幻灯片 div 都有一个幻灯片类（对不起，我不能在没有“更多解释”的情况下发布这个）：

```
<div id="slider">
<div id="slides">
    <div class="slide">
        <img src="images/portfolio/web1.jpg" alt=""/>
    </div>
    <div class="slide">
        <img src="images/portfolio/web5.jpg" alt=""/>
    </div>
</div>
    <img src="images/arrow-L.png" alt="Left" id="slider-arrow-left"/>
    <img src="images/arrow-R.png" alt="Right" id="slider-arrow-right"/>
</div> 
```

而 CSS，只是设置高度和宽度：

```
#slider{height: 200px; position: relative; z-index: 1;}
#slider #slides {height: 200px; width: 883px; overflow: hidden; position: absolute; top: 0px; left: 0px;}
#slider #slides .slide{height: 200px; width: 883px;}
#slider img#slider-arrow-left {position: absolute; left: -30px; top: 80px; cursor: pointer;   z-index: 999;}
#slider img#slider-arrow-right{position: absolute; right: 0px; top: 80px; cursor: pointer; z-index: 999;} 
```

和jQuery：

```
$(document).ready(function(){

    $('#slides').cycle({ 
        fx:      'scrollHorz', 
        speed:  'slow', 
        timeout: 10000, 
        pause:   1,
        prev: $('#slider-arrow-left'),
        next: $('#slider-arrow-right'),
        cssBefore:{ 
            top: 0,
            opacity: 1,
            display: 'block'
        }, 
        animOut: {  
            top: 360
        },
        before: function(curr, next, opts){
            var $curr = $(curr);
            var $next = $(next);
        },
        pause: 1,
        pager: '#slider-controls',
        pagerAnchorBuilder: function (idx, slide) {
            return '#slider-controls li:eq(' + idx + ') a';
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T05:30:03.807

我已经使用[jQuery 循环插件](http://jquery.malsup.com/cycle/)尝试了您的示例。而且看起来还不错

```
$(document).ready(function(){

    $('#slides').cycle({ 
        fx:      'scrollHorz', 
        speed:  'slow', 
        timeout: 0, //prevents auto start of jquery cycle.
        pause:   1,
        prev: $('#slider-arrow-left'),
        next: $('#slider-arrow-right'),
        cssBefore:{ 
            top: 0,
            opacity: 1,
            display: 'block'
        }, 
        animOut: {  
            top: 360
        },
        before: function(curr, next, opts){
            var $curr = $(curr);
            var $next = $(next);
        },
        pause: 1,
        pager: '#slider-controls',
        pagerAnchorBuilder: function (idx, slide) {
            return '#slider-controls li:eq(' + idx + ') a';
        }
    });

});​ 
```

这里 ：

[jsFiddle](http://jsfiddle.net/TPeGv/1/)

你可以相应地调整它。

# perl - Perl 中的 Net::SMPP，如何从我的 ESME 向 SMSC 发送确认

> ID：14107934
> 
> 赞同：3
> 
> 时间：2013-01-01T05:00:23.347
> 
> 标签：perl, sms, smpp

我正在编写一个使用 Net::SMPP 充当接收器和发送器的 Perl 脚本。当移动用户向短代码（例如 123）发送消息时，它会到达我的 SMPP 帐户，我的 SMPP 应用程序会读取消息并回复用户确认，例如“谢谢您发送消息”。我收到用户发送到我的 SMPP 应用程序的消息完全没问题。问题是将确认 (delivery_sm_resp) 发送回 SMSC，以便它从流中删除该消息，以便可以收集其他用户发送的下一条消息。我尝试使用该功能，但我无法确定从 SMSC 收到的消息中获取 message_id 到我的 ESME 的位置。

我的代码是。

```
my $transmitter = Net::SMPP->new_transmitter($host,port=> $port,system_id => '123',password  => '',) or die;

$receiver = Net::SMPP->new_receiver($host,system_id => '123',password => '',port => $port,)
    or die "Can't create server: $!";

while (1) {
    warn "Waiting for PDU";
    $pdu = $receiver->read_pdu() or die "$$: PDU not read. Closing connection";
    print "Received #$pdu->{seq} $pdu->{cmd}:". Net::SMPP::pdu_tab->{$pdu->{cmd}}{cmd} ."\n";
    warn Dumper($pdu);

    print "\n\n ** Hello ** " . $pdu->{message_id} . "\n ** now printing ** " . $pdu->{sm_default_msg_id};
    $transmitter->deliver_sm_resp( message_id => $pdu->{sm_default_msg_id}, seq => $pdu->{seq});
    $resp_pdu = $transmitter->submit_sm(
        destination_addr => $pdu->{source_addr},
        short_message    => "you sent a message with text " . $pdu->{short_message}
    ) or die "Response indicated error: " . $resp_pdu->explain_status();

} 
```

我从 SMSC 接收到我的 ESME 的消息显示如下。请帮我找到其中的 message_id，它可用于确认 SMSC，以便它从流中删除该消息，并且可以接收其他用户发送的下一条消息。否则我会收到相同的 PDU 3 次，直到超时，下一条消息才能被处理。

```
Waiting for PDU at s.pl line 23.
Received #2 5:deliver_sm
$VAR1 = bless( {
             'source_addr_ton' => 1,
             'known_pdu' => 1,
             'schedule_delivery_time' => '',
             'protocol_id' => 0,
             'status' => 0,
             'short_message' => 'A',
             'dest_addr_npi' => 0,
             'source_addr' => '44702601843',
             'validity_period' => '',
             'registered_delivery' => 0,
             'dest_addr_ton' => 0,
             'seq' => 2,
             'data_coding' => 1,
             'service_type' => '',
             'replace_if_present_flag' => 0,
             'cmd' => 5,
             'priority_flag' => 0,
             'data' => '44702601843420A',
             'destination_addr' => '420',
             'esm_class' => 0,
             'sm_default_msg_id' => 0,
             'source_addr_npi' => 0,
             'reserved' => undef
           }, 'Net::SMPP::PDU' ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T18:21:06.943

回答：我对此进行了更多检查，发现要从 ESME --> SMSC 发送确认响应，应在代码中使用以下命令。我希望它对某人有所帮助。:)

```
$receiver->data_sm_resp(message_id => $pdu->{sm_default_msg_id}, seq => $pdu->{seq}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T20:14:59.563

附件是允许我接收短信的代码

```
#!/usr/bin/perl
#
# Copyright (c) 2001 SymLABS <symlabs@symlabs.com>, All Rights Reserved.
# See README for license. NO WARRANTY.
#
# 10.7.2001, Sampo Kellomaki <sampo@symlabs.com>
# $Id: esme-rec.pl,v 1.4 2002/02/11 16:43:47 sampo Exp $
#
# ESME in receiver role.
#
# Test Net::SMPP in SMSC role
#
# Usage: ./esme-rec.pl *version*
#    version can be 4 or 3             #4

use Net::SMPP;
use Data::Dumper;

$trace = 1;
$sysid = "username";
$pw = "password";
$host = 'ip address';
$port = port;
$facil = 0x00010003;
($vers) = @ARGV;
$vers = $vers == 4 ? 0x40 : 0x34;   #4
$if_vers = 0x00;

use constant reply_tab => {
    0x80000000 => { cmd => 'generic_nack', reply => undef, },
    0x00000001 => { cmd => 'bind_receiver',
            reply => sub { my ($me,$pdu) = @_;
                   $me->set_version(0x34);
                   $me->bind_receiver_resp(system_id => $sysid,
                               seq => $pdu->{seq});
                       }, },
    0x80000001 => { cmd => 'bind_receiver_resp', reply => undef, }, 
    0x00000002 => { cmd => 'bind_transmitter',
            reply => sub { my ($me, $pdu) = @_;
                   $me->set_version(0x34);
                   warn "Doing bind_tx_resp";
                   $me->bind_transmitter_resp(system_id => $sysid,
                               seq => $pdu->{seq});
                   }, },
    0x80000002 => { cmd => 'bind_transmitter_resp', reply => undef, }, 
    0x00000003 => { cmd => 'query_sm',
            reply => sub { my ($me, $pdu) = @_;
                   $me->query_sm_resp(message_id=>$pdu->{message_id},
                              final_date=>'010711135959000+',
                               seq => $pdu->{seq},
                              ) }, },
    0x80000003 => { cmd => 'query_sm_resp', reply => undef, },     
    0x00000004 => { cmd => 'submit_sm',
            reply => sub { my ($me, $pdu) = @_;
                   $me->submit_sm_resp(message_id=>'123456789',
                               seq => $pdu->{seq}) }, },
    0x80000004 => { cmd => 'submit_sm_resp', reply => undef, },   
    0x00000005 => { cmd => 'deliver_sm', reply => undef, },    # we originate this
    0x80000005 => { cmd => 'deliver_sm_resp', reply => undef, },  # *** need to handle this?
    0x00000006 => { cmd => 'unbind',
            reply => sub { my ($me, $pdu) = @_;
                   $me->unbind_resp(seq => $pdu->{seq});
                   warn "$$: Remote sent unbind. Dropping connection.";
                   exit;
                   }, },       
    0x80000006 => { cmd => 'unbind_resp',
            reply => sub { warn "$$: Remote replied to unbind. Dropping connection.";
                   exit;
                   }, },
    0x00000007 => { cmd => 'replace_sm',
            reply => sub { my ($me, $pdu) = @_;
                   $me->replace_sm_resp(seq => $pdu->{seq}) }, },
    0x80000007 => { cmd => 'replace_sm_resp', reply => undef, }, 
    0x00000008 => { cmd => 'cancel_sm', reply => sub { my ($me, $pdu) = @_;
                           $me->cancel_resp(seq => $pdu->{seq}) }, },
    0x80000008 => { cmd => 'cancel_sm_resp', reply => undef, },  
    0x00000009 => { cmd => 'bind_transceiver',
            reply => sub { my ($me, $pdu) = @_;
                   $me->set_version(0x34);
                   $me->bind_transceiver_resp(system_id => $sysid,
                                  seq => $pdu->{seq});
                   }, },
    0x80000009 => { cmd => 'bind_transceiver_resp', reply => undef, }, 
    0x0000000b => { cmd => 'outbind',
            reply => sub {  my ($me, $pdu) = @_;
                    $me->set_version(0x34);
                    $me->bind_receiver(system_id => $sysid,
                               password => $pw) }, },
    0x00000015 => { cmd => 'enquire_link',
            reply => sub { my ($me, $pdu) = @_;
                   $me->enquire_link_resp(seq => $pdu->{seq}) }, },      
    0x80000015 => { cmd => 'enquire_link_resp', reply => undef, }, 
    0x00000021 => { cmd => 'submit_multi',
            reply => sub { my ($me, $pdu) = @_;
                   $me->submit_multi_resp(message_id=>'123456789',
#                                 no_unsuccess=>0,
                              seq => $pdu->{seq} ) }, },
    0x80000021 => { cmd => 'submit_multi_resp', reply => undef, }, 
    0x00000102 => { cmd => 'alert_notification', reply => undef, },  # ***
    0x00000103 => { cmd => 'data_sm', reply => undef, },  # ***
    0x80000103 => { cmd => 'data_sm_resp', reply => undef, }, 

#4#cut

    # v4 codes

    0x80010000 => { cmd => 'generic_nack_v4', reply => undef, }, 
    0x00010001 => { cmd => 'bind_receiver_v4',
            reply => sub { my ($me, $pdu) = @_;
                   $me->set_version(0x40);
                   $me->bind_receiver_resp(system_id => $sysid,
                               facilities_mask => $facil,
                               seq => $pdu->{seq});
                   }, },
    0x80010001 => { cmd => 'bind_receiver_resp_v4', reply => undef, }, 
    0x00010002 => { cmd => 'bind_transmitter_v4',
            reply => sub { my ($me, $pdu) = @_;
                   $me->set_version(0x40);
                   $me->bind_transmitter_resp(system_id => $sysid,
                                  facilities_mask =>  $facil,
                                  seq => $pdu->{seq});
                   }, },
    0x80010002 => { cmd => 'bind_transmitter_resp_v4', reply => undef, }, 
    0x00010003 => { cmd => 'query_sm_v4',
            reply => sub { my ($me, $pdu) = @_;
                   $me->query_sm_resp(message_id=>$pdu->{message_id},
                              final_date=>'010711135959000+',
                              seq => $pdu->{seq}) }, },
    0x80010003 => { cmd => 'query_sm_resp_v4', reply => undef, },     
    0x00010004 => { cmd => 'submit_sm_v4',
            reply => sub { my ($me, $pdu) = @_;
                   $me->submit_sm_resp(message_id=>'123456789',
#                                  num_unsuccess=>0,
#                                  destination_addr=>$pdu->      {source_addr},
                               error_status_code => 0,
                               seq => $pdu->{seq} ) }, },
    0x80010004 => { cmd => 'submit_sm_resp_v4', reply => undef, },   
    0x00010005 => { cmd => 'deliver_sm_v4', reply => undef, },
    0x80010005 => { cmd => 'deliver_sm_resp_v4', reply => undef, },  # Need to handle this?
    0x00010006 => { cmd => 'unbind_v4',
            reply => sub { my ($me, $pdu) = @_;
                   $me->unbind_resp(seq => $pdu->{seq});
                   warn "$$: Remote sent unbind. Dropping connection.";
                   exit;
                   }, },       
    0x80010006 => { cmd => 'unbind_resp_v4',
            reply => sub { warn "$$: Remote replied to unbind. Dropping connection.";
                   exit;
                   }, },       
    0x00010007 => { cmd => 'replace_sm_v4',
            reply => sub { my ($me, $pdu) = @_;
                   $me->replace_sm_resp(seq => $pdu->{seq}) }, },
    0x80010007 => { cmd => 'replace_sm_resp_v4', reply => undef, }, 
    0x00010008 => { cmd => 'cancel_sm_v4',
            reply => sub { my ($me, $pdu) = @_;
                   $me->cancel_resp(seq => $pdu->{seq}) }, },      
    0x80010008 => { cmd => 'cancel_sm_resp_v4', reply => undef, },  
    0x00010009 => { cmd => 'delivery_receipt_v4',
            reply => sub { my ($me, $pdu) = @_;
                   $me->delivery_receipt_resp(seq => $pdu->{seq}) }, },
    0x80010009 => { cmd => 'delivery_receipt_resp_v4', reply => undef, },  
    0x0001000a => { cmd => 'enquire_link_v4',
            reply => sub { my ($me, $pdu) = @_;
                   $me->enquire_link_resp(seq => $pdu->{seq}) }, },
    0x8001000a => { cmd => 'enquire_link_resp_v4', reply => undef, },
    0x0001000b => { cmd => 'outbind_v4',
            reply => sub { my ($me, $pdu) = @_;
                   $me->set_version(0x34);
                   $me->bind_receiver(system_id => $sysid,
                              password => $pw,
                              facilities_mask => $facil,
                              seq => $pdu->{seq}) }, },
#4#end
};

($smpp, $resp) = Net::SMPP->new_transceiver($host,
                  smpp_version => $vers,
                  interface_version => $if_vers,
                  system_id => $sysid,
                  password => $pw,
                  addr_ton => 0x01,
                  addr_npi => 0x01,
                  source_addr_ton => 0x01,
                  source_addr_npi => 0x01,
                  dest_addr_ton => 0x01,
                  dest_addr_npi => 0x01,
                  system_type => '',
                  facilities_mask => $facil,
                  port => $port,
#               timeout => 7,
                  )
    or die "Can't create server: $!";

warn Dumper $resp;

print "#### Connected: ###### \n smpp:$smpp, \n resp:$resp";

while (1) {
 warn "Waiting for PDU";
 $pdu = $smpp->read_pdu() or { $bind_fail = "yes" };

Net::SMPP::Pdu_tab->{$pdu->{cmd}}{cmd} ."\n";

### read in data
 $short_message = $pdu->{short_message};
 $source_addr = $pdu->{source_addr};
 $seq = $pdu->{seq};

print "\n ===> Bind failed=$bind_fail \n";

########### if bind failed above - try to reconnect
 if ($bind_fail eq "yes"){
 print "\n Reconnecting \n";
 ($smpp, $resp) = Net::SMPP->new_transceiver($host,
 smpp_version => $vers,
 interface_version => $if_vers,
 system_id => $sysid,
 password => $pw,
 addr_ton => 0x00,
 addr_npi => 0x01,
 source_addr_ton => 0x0,
 source_addr_npi => 0x1,
 dest_addr_ton => 0x0,
 dest_addr_npi => 0x1,
 system_type => '',
 facilities_mask => $facil,
 port => $port,
 # timeout => 7,
 )
 or die "Can't create server: $!";
 sleep 2;
 }#fi bind_fail

warn Dumper($pdu) if $trace;
 $mh_msg_id = "$pdu->{seq}";

 if (defined reply_tab->{$pdu->{cmd}}) {
 $smpp->deliver_sm_resp(message_id => $mh_msg_id, seq => $mh_msg_id) or die; ### we use pdu->    {seq} as message_id, as we cannot find message_id, fix later

warn "Replied";

} else {
 warn "Don't know to reply to $pdu->{cmd}";
 sleep 1;
 }
 }

#EOF 
```

# tcp - 关于通过 Pcap.net 发送 syn tcp 数据包到扫描 HTTP 代理服务器

> ID：14107936
> 
> 赞同：1
> 
> 时间：2013-01-01T05:00:55.653
> 
> 标签：tcp, pcap.net

我想非常快地扫描 HTTP 代理服务器我找到了一个解决方案，我可以使用 Pcap.net 但问题是，我如何通过使用 pcap.net 发送 syn tcp 数据包来扫描 HTTP 代理服务器在 codeplex 中有一个示例。但它完成了不要计算我的问题

[http://pcapdotnet.codeplex.com/discussions/402598](http://pcapdotnet.codeplex.com/discussions/402598)

# macos - 为什么我的 NSButton 在隐藏时会捕获鼠标事件？

> ID：14107937
> 
> 赞同：-2
> 
> 时间：2013-01-01T05:00:56.520
> 
> 标签：macos, cocoa, events, mouse

我希望我的主窗口有不同的状态，所以我创建了两个`NSViews`. 一个叫`A_view`另一个是`B_view`。我添加了一个`NSButton`被调用`A_button`的`A_view`.

单击 时`A_button`，`A_view` 隐藏并`B_view`显示。单击添加到主窗口中的其他按钮时，状态更改并`B_view`隐藏，`A_view`显示。但是，我发现当`A_view`被隐藏时，我点击`B_view`的位置`A_button`仍然`A_Button`捕捉到鼠标事件。

任何人都可以告诉我为什么以及我能做些什么来防止这种情况发生？谢谢你！我很高兴结交朋友，这是我的邮件 gohamgx@gmail.com。希望能和大家交流一些可可的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T08:19:42.923

除非您明确调用操作方法，否则隐藏按钮无法执行操作。

可以肯定的是，即使您可以禁用该按钮。

让我知道现在发生了什么

# apple-push-notifications - Azure 移动计划 APNS 不发送推送

> ID：14107938
> 
> 赞同：0
> 
> 时间：2013-01-01T05:01:21.390
> 
> 标签：apple-push-notifications, azure-mobile-services

我有 azure 移动服务器，我想使用调度程序作业推送通知，但是当我运行测试时它会触发错误。

谁能指导我什么是问题和解决方案？

**Shedular 脚本：**

```
 function push() {                       
            setTimeout(function() {
                push.apns.send("XXXXXXdeviceTokenXXXXX", {
                    alert: "Toast: ", badge: 8            
                },{
                    error : function(err) {
                        console.log('error on 123.');
                    }
                });
            }, 2500);    
        } 
```

**错误代码：**

> TypeError：无法在 Object._onTimeout (:8:19) [外部代码] 处调用未定义的方法“发送”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T02:22:27.450

通过将函数名称定义为`push`，您将覆盖全局[`push`对象](http://msdn.microsoft.com/en-us/library/windowsazure/jj554217.aspx)，其中包含`apns`具有`send`函数的成员。尝试在脚本中使用不同的名称定义函数。

# objective-c - 实时馈送摄像头方向 - IOS 6

> ID：14107939
> 
> 赞同：0
> 
> 时间：2013-01-01T05:01:32.917
> 
> 标签：objective-c, ios, orientation, avcapturesession, avcapturedevice

我正在努力寻找解决这个问题的方法。我无法从我筛选过的各种示例和其他 SO 帖子中得出正面或反面。

我的问题是我想从 iPad 上的实时视频源中获取静止图像。我成功地看到了实时提要并且可以成功拍摄静止图像，但是我有两个问题：

1.  实时供稿方向错误。我正在开发 iPad 应用程序以仅在横向模式下工作。出现的实时提要由于某种原因向右倾斜 90 度？（显然，此时我的 iPad 是横向的）

2.  拍摄的静止图像被颠倒翻转（并且仍然向侧面倾斜，但是由于颠倒翻转而最终向左倾斜 90 度）。

我浏览了其他帖子，但我只是没有得到提供的修复，如何实现它们。希望有人可以在这里提供帮助。谢谢。

代码：

```
-(void)viewDidAppear:(BOOL)animated
{
AVCaptureSession *session = [[AVCaptureSession alloc] init];
session.sessionPreset = AVCaptureSessionPresetMedium;

//CALayer *viewLayer = self.cameraView.layer;
//NSLog(@"viewLayer = %@", viewLayer);

AVCaptureVideoPreviewLayer *captureVideoPreviewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:session];

captureVideoPreviewLayer.frame = self.cameraView.bounds;
[self.cameraView.layer addSublayer:captureVideoPreviewLayer];

AVCaptureDevice *device = [self frontCamera];

NSError *error = nil;
AVCaptureDeviceInput *input = [AVCaptureDeviceInput deviceInputWithDevice:device error:&error];
if (!input) {
    // Handle the error appropriately.
    NSLog(@"ERROR: trying to open camera: %@", error);
}
[session addInput:input];
stillImageOutput = [[AVCaptureStillImageOutput alloc] init];
NSDictionary *outputSettings = [[NSDictionary alloc] initWithObjectsAndKeys: AVVideoCodecJPEG, AVVideoCodecKey, nil];
[stillImageOutput setOutputSettings:outputSettings];

[session addOutput:stillImageOutput];
[session startRunning];
}

- (AVCaptureDevice *)frontCamera {
NSArray *devices = [AVCaptureDevice devicesWithMediaType:AVMediaTypeVideo];
for (AVCaptureDevice *device in devices) {
    if ([device position] == AVCaptureDevicePositionFront) {
        return device;
    }
}
return nil;
}

- (IBAction)takePhoto:(id)sender {

AVCaptureConnection *videoConnection = nil;
for (AVCaptureConnection *connection in stillImageOutput.connections)
{
    for (AVCaptureInputPort *port in [connection inputPorts])
    {
        if ([[port mediaType] isEqual:AVMediaTypeVideo] )
        {
            videoConnection = connection;
            break;
        }
    }
    if (videoConnection) { break; }
}

//NSLog(@"about to request a capture from: %@", stillImageOutput);
[stillImageOutput captureStillImageAsynchronouslyFromConnection:videoConnection completionHandler: ^(CMSampleBufferRef imageSampleBuffer, NSError *error)
 {
     //CFDictionaryRef exifAttachments = CMGetAttachment( imageSampleBuffer, kCGImagePropertyExifDictionary, NULL);
     /*if (exifAttachments)
     {
         // Do something with the attachments.
         NSLog(@"attachements: %@", exifAttachments);
     }
     else
         NSLog(@"no attachments");*/

     NSData *imageData = [AVCaptureStillImageOutput jpegStillImageNSDataRepresentation:imageSampleBuffer];
     UIImage *image = [[UIImage alloc] initWithData:imageData];

     self.imageView.image = image;
 }];
} 
```

# javascript - 缺少分号

> ID：14107942
> 
> 赞同：0
> 
> 时间：2013-01-01T05:02:01.833
> 
> 标签：javascript

## 解决了

在下面的代码中，Firefox 在第 3 行的语句之前说我丢失`;`了。我该如何解决这个问题？

这是从文本文件中加载一些[Base64编码的内容并在程序的其他地方使用它。](http://en.wikipedia.org/wiki/Base64)

```
function preloader(url,handleData) {
    $.ajax({
        url: url,
        success:function(data) {
            handleData(data);
        }
    });
}
preloader("extra/joke_img.txt",function(output){var localStorage['joke_img']=output;}); 
```

# google-chrome - 如何通过重写 include_matches 来解决 exclude_matches 错误而无需编程注入？

> ID：14107951
> 
> 赞同：1
> 
> 时间：2013-01-01T05:04:17.503
> 
> 标签：google-chrome, google-chrome-extension, expression, content-script

[我正在构建一个 Chrome 扩展程序，但由于 Chrome 中的错误](http://code.google.com/p/chromium/issues/detail?id=100106)导致`exclude_matches`CSS 失败，我遇到了问题。我知道有一些方法可以使用 Programmatic Injection 绕过它，但这会导致一些性能问题，所以我想知道是否有人可以想办法以`include_matches`不包括我想要排除的内容的方式重写我的（因为任何不匹配的东西都会被自动排除）。这是一个很长的镜头，但我想如果有人能做到，他们就会在这里！一个可以使用的示例将是以下代码：

```
{
....
  "content_scripts": [{
        "matches": [ "http://example.com/*" , "http://*.example.com/*" ]
  }]
....
} 
```

显然，上面涵盖了 上的任何链接`example.com`，但我想知道是否有办法以这种方式重写它，使 URL`example.com/z/`不符合规则，但诸如此类的 URL`example.com/z/s/`仍然可以工作。

基本上，唯一不允许的 URL 是上述格式（“ `/z/`”）的 URL，所以我想知道是否有一种方法可以指定不允许在该位置带有斜杠的 URL。听起来很愚蠢，我想我对正则表达式的思考太多了，所以任何帮助都非常感谢！

即使我输入这个，我也觉得我可能会被 PI 卡住，但值得一试！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T07:15:05.847

不幸的是，谷歌的[“匹配模式和球体”](http://developer.chrome.com/extensions/content_scripts.html#match-patterns-globs)并不总是像人们预期的那样运作。特别是，使用`?`通配符。你会认为你可以使用`http://example.com/?*`它[应该匹配“任何单个字符”（而不是空字符串）](http://developer.chrome.com/extensions/content_scripts.html#match-patterns-globs)。

无论如何，这有点小技巧，但您*至少*可以使用26`include_globs`条规则，如下所示：

```
{
    ....
    "content_scripts":  [ {
        "matches":      [   "http://example.com/*",
                            "http://*.example.com/*"
        ],
        "include_globs":[   "*example.com/z/a*",
                            "*example.com/z/b*",
                            "*example.com/z/c*",
                            "*example.com/z/d*",
        // Etc., etc.
                            "*example.com/z/x*",
                            "*example.com/z/y*",
                            "*example.com/z/z*"
        ]
    } ]
    ....
} 
```

唉，规则是区分大小写的，因此根据站点/服务器，您可能需要复制大写和国际字符的规则。

# matlab - MATLAB多维矩阵访问

> ID：14107954
> 
> 赞同：3
> 
> 时间：2013-01-01T05:04:42.373
> 
> 标签：matlab, matrix

SO会员们新年快乐！

新年的第一篇文章，希望能有所收获！:D

我有一个大小为 100、100、100、3 的 4D 矩阵 X。我用 X(51,:,51,:) 提取它的子矩阵，并期望结果是一个 100x3 2D 矩阵。但是不，结果是一个大小为 1、100、1、3 的 4D 矩阵。怎么会？

更令人困惑的结果是：

*   我可以使用 plot(X(51,:,51,i)) 和 plot(X(:,51,51,i)) 与 i=1, 2, 3 就好了

*   不能将 plot(X(51,51,:,i)) 与相同的 i 一起使用

简而言之，MATLAB 子矩阵提取不会导致矩阵尺寸减小吗？并且不同的子访问行为不同，即对最后一个维度更小心？

谢谢！

编辑01：

为方便起见，我将使用单例显示我的测试结果并在此处挤压： ![子矩阵访问](../Images/9dd2cac13e78e76604f9a7e2bce380ac.png)

挤压的使用：

![挤压](../Images/ebe23c181592abec0635ccc2b6d6374e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T05:17:06.330

正如您所注意到的，当您对`100 by 100 by 100 by 3`矩阵进行索引时，`(51, :, 51, :)`您会得到 size 的结果`[1 100 1 3]`。的尺寸`size = 1`称为*单件*尺寸。

MATLAB 不会自动删除非尾随单例维度（对于大于 2D 的矩阵） - 使用[挤压](http://www.mathworks.com/help/matlab/ref/squeeze.html)来消除这些维度。如果最后一个维度是单例，则会自动处理。

所以在你的情况下，你有

```
X = zeros(100,100,100,3);
Y = X(51,:,51,:); #% size(Y) = [1 100 1 3];
Y2 = squeeze(X(51,:,51,:)); #% size(Y2) = [100 3] - singletons removed

P1 = X(51,:,51,1); #% size(P1) = [1 100 1 1] which becomes [1 100] (2D)
P2 = X(51,51,:,1); #% size(P2) = [1 1 100 1] which becomes [1 1 100] (3D) 
```

# ios - 如何获取 dispatch_queue 中的元素计数

> ID：14107956
> 
> 赞同：5
> 
> 时间：2013-01-01T05:05:07.287
> 
> 标签：ios, count, dispatch

我创建了一个调度队列来发送网络数据，例如消息或图片。一个块用于发送一条消息或图片。并将它们放入调度队列。当套接字确实发送了消息或图片时，我想检查调度队列中还有多少块。有没有办法做到这一点？谢谢！

# c# - 如何以格式化的方式序列化列表

> ID：14107958
> 
> 赞同：0
> 
> 时间：2013-01-01T05:05:16.863
> 
> 标签：c#, serialization

我有一个像这样的班级名单

```
public class Root
{
 public List<Sensor> sensorList
 {
    get;set;
 }
} 
```

序列化这个类的时候，xml是这样的

```
<?xml version="1.0" encoding="us-ascii"?>
<Root xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <sensorList>
    <Sensor>
      <Channel>1</Channel>
    </Sensor>
    <Sensor>
      <Channel>2</Channel>
    </Sensor>
  </sensorList>
</Root> 
```

但我需要这样的xml

```
<Root xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"> 
    <Sensor>
      <Channel>1</Channel>
    </Sensor>
    <Sensor>
      <Channel>2</Channel>
    </Sensor>  
</Root> 
```

我如何使用列表来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T05:36:22.833

将 XmlElement 属性添加到`sensorList`Root 中的属性可为您提供所需的结果。检查下面的代码。

```
class Program
{
    static void Main(String[] args)
    {
        Root temp = new Root();
        temp.sensorList = new List<Sensor>();
        temp.sensorList.Add(new Sensor() { Channel = "1"});
        temp.sensorList.Add(new Sensor() { Channel = "2" });

        XmlSerializer ser = new XmlSerializer(typeof(Root));
        XDocument mydoc = new XDocument();
        using (XmlWriter writer = mydoc.CreateWriter())
        {
            ser.Serialize(writer, temp);
        }

        Console.WriteLine(" After serialize :" + mydoc.ToString());

        using (XmlReader reader = mydoc.CreateReader())
        {
            Root newTemp = (Root)ser.Deserialize(reader);
            Console.WriteLine("After deserialize :" + newTemp.sensorList.Count);
        }
    }
}

public class Root
{
    [XmlElement(ElementName="Sensor")]
    public List<Sensor> sensorList
    {
        get;
        set;
    }
}

public class Sensor
{
    public string Channel;
} 
```

# php - 可以更改此查询以执行两个功能吗？

> ID：14107961
> 
> 赞同：0
> 
> 时间：2013-01-01T05:05:56.690
> 
> 标签：php, mysql, database, pagination

我决定在这里重新编写和详细说明，而不是再次发布。

我从 jtheman 收到了以下代码，它允许我从我的数据库中选择 52 个更新，并每周添加一个新的并删除旧的。它绝对完美。

他的代码：

```
$starttime = strtotime("28 December 2012"); // a recent Friday
  $week = 7 * 24 * 60 * 60; // time value of a week
  $posts = 185; // number of posts in your db
  $limit = 52; // number of shown posts
  $offset = floor((time()-$starttime)/$week); // rounds down difference in weeks from startdate until now
  while ($offset>$posts-$limit) $offset = $offset - ($posts-$limit); 
  // this will start over when you have reached the end of the cycle ie offset 148... 
```

我的查询：

```
// retrieve all update details
$conn = dbConnect('query');
$sql = "SELECT *
FROM updates
WHERE flag_live = 'Y'
ORDER BY update_id DESC
LIMIT ".$offset.",".$limit;
$result = $conn->query($sql) or die(mysqli_error());
$uInfo = $result->fetch_assoc(); 
```

同样，这非常有效。新问题是我在一页上获得 52 个更新，我希望能够设置，比如每页 4 个，并滚动浏览 13 页而不是一页长。

所以，我想要做的是改变这个查询，以便选择 52 个更新（并且每周五添加一个新的并删除一个旧的）但是我只能在页面上一次显示 4 个. 我意识到这不是分页问题，​​因为这是编写查询以基本上执行两个功能。

这可以用子查询来完成吗？我可以只使用 jQuery 滑块或等效项来进行分页，但我真的想避免这种情况。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T08:35:54.580

要在 PHP 代码中解决它（在服务器端），您可以添加一个 url 参数`?page=x`，其中 x 是您的页码。

计算中几乎相同：

```
$starttime = strtotime("28 December 2012"); // a recent Friday
$week = 7 * 24 * 60 * 60; // time value of a week
$posts = 185; // number of posts in your db
$totallimit = 52; // number of shown posts (on all pages)
$limit = 4; // number of posts on each page.
$offset = floor((time()-$starttime)/$week); // rounds down difference in weeks from startdate until now
while ($offset>$posts-$totallimit) $offset = $offset - ($posts-$totallimit); 
// this will start over when you have reached the end of the cycle ie offset 148...

// get the page number (or set it to 0 if not set)
if (isset($_GET['page']) && intval($_GET['page'])) $page=intval($_GET['page']);
else $page = 0;

$offset = $offset + ($page*$limit); // correct the offset according to the page number 
```

然后使用您的数据库查询而不进行更改。

然后在您的视图中添加页面链接（如果之前执行上述代码，则此代码有效）：

```
<?php for($p=0;$p<ceil($totallimit/$limit);$p++): ?>
   <a href="mypage.php?page=<?php echo $p; ?>" <?php if ($p==$page) echo 'class="active"'; ?>>Page <?php echo $p+1; ?></a> |
<?php endfor; ?> 
```

（替换`mypage.php`为您的脚本的正确文件名）

我为当前所选页面的页面锚点添加了一个类，`active`但是您可以随意执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T05:27:22.170

我认为这就是您的要求.. 使用此“功能”您可以“切换”更多选项，但我认为您不会真正需要它.. 只需更改`$limit=`数字以满足您的需求。

```
<?php

  $starttime = strtotime("28 December 2012"); // a recent Friday
  $week = 7 * 24 * 60 * 60; // time value of a week
  $posts = 200; // number of posts in your db
  //$limit = 52; // number of shown posts

if($posts > 100) // or you can enter here $posts == 200, but it is better 2 leave it on "automatic"..
{ 
$limit = 52; //or as many you like like 30
} 
else
{ 
$limit = 6; // or as many you like ie 10 
}

  $offset = floor((time()-$starttime)/$week); // rounds down difference in weeks from     startdate until now
  while ($offset>$posts-$limit) $offset = $offset - ($posts-$limit); 
  // this will make the cycle start over when you have reached the end (ie offset 148)...

  ?> 
```

# biztalk - 过滤来自自定义管道的消息

> ID：14107962
> 
> 赞同：0
> 
> 时间：2013-01-01T05:06:51.250
> 
> 标签：biztalk, biztalk-2010

我遇到了 BizTalk 2010 的另一个问题。我应该收到 XML 格式的记录集合。我收到的 XML 是一个信封，里面有多个记录。我的简单任务是在不使用编排的情况下对 XML 中的记录进行分批并将它们放入不同的文件夹中。我创建了一个保存记录结构的 xsd，然后创建了另一个 xsd，它是包含我导入的前一个 xsd 的信封。我确实有一个指向 xsd 信封的 xpath-body。到目前为止，一切似乎都运行良好，因为我已经从带有信封的 xsd 生成了一个 XML，并且确实使用 xmldasm.exe 对其进行了测试。结果令人满意，因为 XML 按预期分批成 XML 格式的多个记录。

然后，我只使用 XML 反汇编程序创建了一个自定义接收管道并设置了正确的文档，然后成功部署了项目。从管理控制台，我配置了我的应用程序，创建了 FILE 类型的接收端口和发送端口。从发送端口，我将过滤器设置为`BTS.MessageType == MyTestProject.MyXsdRoot`.

最后，我已经成功启动了我的应用程序。

但是，当我在 InputFolder 中删除一个包含多个记录的测试信封 XML（我使用上面的 xmlDasm.exe 测试过的那个）时，文件夹中的 XML 被消耗，但在 OutputFolder 中没有生成任何内容。从控制台，我看到了一个路由错误（可恢复）。显然，由于缺乏 BizTalk 经验，我忽略了一些事情。

有更多知识的人可以指出哪里出了问题，或者我应该怎么做才能找出问题所在？

更新：

- - - - 信封 - - - - - - - - - - - - - - - - -

```
<?xml version="1.0" encoding="utf-16" ?> 
- <xs:schema xmlns="http://UsingOrchestration.SetOfProcedures" xmlns:b="http://schemas.microsoft.com/BizTalk/2003" xmlns:ns0="http://UsingOrchestration.Procedures" targetNamespace="http://UsingOrchestration.SetOfProcedures" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:import schemaLocation="UsingOrchestration.Procedure" namespace="http://UsingOrchestration.Procedures" /> 
- <xs:annotation>
- <xs:appinfo>
  <b:schemaInfo is_envelope="yes" xmlns:b="http://schemas.microsoft.com/BizTalk/2003" /> 
- <b:references>
  <b:reference targetNamespace="http://UsingOrchestration.Procedures" /> 
  </b:references>
  </xs:appinfo>
  </xs:annotation>
- <xs:element name="SetOfProcedures">
- <xs:annotation>
- <xs:appinfo>
  <b:recordInfo body_xpath="/*[local-name()='SetOfProcedures' and namespace-uri()='http://UsingOrchestration.SetOfProcedures']" /> 
  </xs:appinfo>
  </xs:annotation>
- <xs:complexType>
- <xs:sequence>
  <xs:element minOccurs="1" maxOccurs="unbounded" ref="ns0:ProcedureCompleted" /> 
  </xs:sequence>
  </xs:complexType>
  </xs:element>
  </xs:schema> 
```

---------------------实际信息------------------

```
 <?xml version="1.0" encoding="utf-16" ?> 
- <xs:schema xmlns="http://UsingOrchestration.Procedures" xmlns:b="http://schemas.microsoft.com/BizTalk/2003" targetNamespace="http://UsingOrchestration.Procedures" xmlns:xs="http://www.w3.org/2001/XMLSchema">
- <xs:element name="ProcedureCompleted">
- <xs:complexType>
- <xs:sequence>
  <xs:element name="AltID" type="xs:string" /> 
  <xs:element name="RotationName" type="xs:string" /> 
  <xs:element name="ProcedureID" type="xs:string" /> 
  <xs:element name="ProcedureFee" type="xs:string" /> 
  <xs:element name="Comment" type="xs:string" /> 
  </xs:sequence>
  </xs:complexType>
  </xs:element>
  </xs:schema>
--------- Test xml------------------------------------------
<ns0:SetOfProcedures xmlns:ns0="http://UsingOrchestration.SetOfProcedures">
  <ns1:ProcedureCompleted xmlns:ns1="http://UsingOrchestration.Procedures">
    <AltID>AltID_0</AltID>
    <RotationName>RotationName_0</RotationName>
    <ProcedureID>ProcedureID_0</ProcedureID>
    <ProcedureFee>ProcedureFee_0</ProcedureFee>
    <Comment>Comment_0</Comment>
  </ns1:ProcedureCompleted>
  <ns1:ProcedureCompleted xmlns:ns1="http://UsingOrchestration.Procedures">
    <AltID>AltID_1</AltID>
    <RotationName>RotationName_1</RotationName>
    <ProcedureID>ProcedureID_1</ProcedureID>
    <ProcedureFee>ProcedureFee_1</ProcedureFee>
    <Comment>Comment_1</Comment>
  </ns1:ProcedureCompleted>
  <ns1:ProcedureCompleted xmlns:ns1="http://UsingOrchestration.Procedures">
    <AltID>AltID_2</AltID>
    <RotationName>RotationName_2</RotationName>
    <ProcedureID>ProcedureID_2</ProcedureID>
    <ProcedureFee>ProcedureFee_2</ProcedureFee>
    <Comment>Comment_2</Comment>
  </ns1:ProcedureCompleted>
</ns0:SetOfProcedures> 
```

使用完全相同的 XML，我可以过滤它`BTS.ReceivePortName`，该集合已正确分批，但是当我过滤它时根本不会处理它`BTS.MessageType`。我一定错过了什么，只是不知道是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T09:06:09.327

请检查您是否遵循以下[链接](http://msdn.microsoft.com/en-us/library/ee277658%28v=bts.10%29.aspx)中的所有步骤。也许您可能忘记在模式上设置**Envelope**属性。此外，您不需要用于 XML 分批的自定义管道，因为默认的 XMLReceive 管道能够做到这一点。

# java - 检查与服务器的连接

> ID：14107963
> 
> 赞同：2
> 
> 时间：2013-01-01T05:07:06.930
> 
> 标签：java, android, button

我是 Android 和 Java 的新手，在较小程度上，如果这个问题很荒谬，请原谅我。**如果这篇文章的格式很糟糕，我也很抱歉，请理解我是新来的，是的，说明无处不在，但我不知道如何添加后续帖子，所以我只是编辑了原始帖子并添加了我收到的新信息.

我在一个 Android 项目中有一个活动，必须检查它是否可以连接到服务器。我只有一个按钮，单击该按钮将运行代码以检查服务器连接。

当我单击按钮时，应用程序关闭`(Unfortunately .... has stopped).`

如果需要，我可以提供完整的错误日志。这是我的代码：

注意：**R.id.check_text 指的是布局 XML 中的一个 TextView**

鉴于 isConnectedToServer 方法的结果，我需要更改此文本。

```
public class StartActivity extends Activity {

public static final int timeout = 3000;
public static final String TAG = "StartActivity";
public static final String url = "http://serverIP:port";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_start);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_start, menu);
    return true;
}

public boolean isConnectedToServer(String url, int timeout) {
    try {
        URL serverURL = new URL(url);
        URLConnection urlconn = serverURL.openConnection();
        urlconn.setConnectTimeout(timeout);
        urlconn.connect();
        return true;
    } catch (IOException e) {
        Log.e(TAG, e.getLocalizedMessage(), e);
    } catch (IllegalStateException e) {
        Log.e(TAG, e.getLocalizedMessage(), e);
    }
    return false;   

}
public void connectionReturn(View view) {
    boolean a;
    a = this.isConnectedToServer(url, timeout);
    if (a == true) {
        EditText edConnStatus = (EditText) findViewById(R.id.check_text);
        edConnStatus.setText("Connection established");

    } else {
        EditText edConnStatus = (EditText) findViewById(R.id.check_text);
        edConnStatus.setText("Connection to server could not be established");
    }

}
} 
```

当然，在我的布局 XML 中，我有一个 Button，其内容如下：

```
 <Button
    android:id="@+id/bn_checkconnection"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:onClick="connectionReturn"
    android:text="@string/checkservconn" /> 
```

我感谢可以提供的任何帮助，并感谢大家。

**最近的编辑：** 我将connectionReturn方法更改为具有参数View view（即connectionReturn（View vw））并看到onClick错误，现在它调用connectionReturn方法。我没有得到同样的错误，我现在得到了新的！当我单击按钮时，应用程序冻结，Eclipse 打开 Socket.class 并显示：

找不到源 JAR 文件 c:...\androidsdk\platforms\android17\android.jar 没有源附件 在下面附上源....

和

Eclipse 中的 Debug 窗口视图弹出如下：

Thread [<1> main] (Suspended (exception NetworkOnMainThreadException))

Socket.connect(SocketAddress, int) line: 849<--**它立即指向这个。**
HttpConnection.(HttpConnection$Address, int) line: 76 HttpConnection.(HttpConnection$Address, int, HttpConnection$1) line: 50
HttpConnection$Address.connect(int) line: 340
HttpConnectionPool.get(HttpConnection$Address, int) line: 87
HttpConnection.connect(URI, SSLSocketFactory, Proxy, boolean, int) line: 128
HttpEngine.openSocketConnection() line: 316 HttpEngine.connect() line: 311
HttpEngine.sendSocketRequest() line: 290
HttpEngine.sendRequest() line: 240
HttpURLConnectionImpl.connect() 行：81
StartActivity.isConnectedToServer(String, int) line: 37 StartActivity.connectionReturn(View) line: 50
Method.invokeNative(Object, Object[], Class, Class[], Class, int, boolean) line: 不可用 [native method]
Method.invoke(Object, Object...) line: 511
View$1.onClick(View) line: 3592 Button(View).performClick() line: 4202
View$PerformClick.run() line: 17340 Handler.handleCallback(Message ) line: 725
ViewRootImpl$ViewRootHandler(Handler).dispatchMessage(Message) line: 92 Looper.loop() line: 137 ActivityThread.main(String[]) line: 5039
Method.invokeNative(Object, Object[], Class, Class [], Class, int, boolean) line: 不可用 [native method]
Method.invoke(Object, Object...) line: 511
ZygoteInit$MethodAndArgsCaller.run() 行：793
ZygoteInit.main(String[]) 行：560 NativeStart.main(String[]) 行：不可用 [本机方法]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T05:14:16.880

使用`android:onClick`属性时记住这一点

属性的`android:onClick`值`"isConnectedToServer"`是用户单击按钮时系统调用的活动中方法的名称。

打开Activity类（位于项目的src/目录下），添加对应的方法：

/** 当用户点击发送按钮时调用 */

```
public void sendMessage(View view) {
    // Do something in response to button
} 
```

这需要您导入`View`该类：

为了让系统将此方法与赋予 android:onClick 的方法名称相匹配，签名必须与所示完全相同。具体来说，该方法必须：

```
 1). Be public.
 2). Have a void return value.
 3). Have a View as the only parameter (this will be the View that was clicked). 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T09:03:47.613

您可以使用此功能知道链接是否已打开，互联网是否已连接

```
public boolean isConnected() {
    try {
        ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo netInfo = cm.getActiveNetworkInfo();

        if (netInfo != null && netInfo.isConnected()) {
            // Network is available but check if we can get access from the
            // network.
            URL url = new URL("www.google.com");
            HttpURLConnection urlc = (HttpURLConnection) url
                    .openConnection();
            urlc.setRequestProperty("Connection", "close");
            urlc.setConnectTimeout(2000); // Timeout 2 seconds.
            urlc.connect();

            if (urlc.getResponseCode() == 200) // Successful response.
            {
                return true;
            } else {
                Log.d("NO INTERNET", "NO INTERNET");
                showToast("URL down");
                return false;
            }
        } else {
            showToast("No Internet Connection");
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
    return false;
} 
```

# mysql - phpMyAdmin 中的 MySQL 循环

> ID：14107965
> 
> 赞同：0
> 
> 时间：2013-01-01T05:07:28.387
> 
> 标签：mysql, sql, insert, phpmyadmin

我之前使用`SQL`phpMyAdmin 中的命令行直接更新我的数据库（而不是编写 C 脚本）。我想知道是否可以做一些更复杂的事情。

我有两张桌子。`tableB`当前是空的，并且存在是因为我想更改`tableA`. （我想`snum`从`tableA`.）

```
tableA
-------
unum   (int)
snum   (int)
etc

tableB
-------
unum   (int)
snum   (int) 
```

我需要做的是为 中`tableB`的每条记录创建一个记录，并在我进行`tableA`时复制。然后我将从 tableA中删除，然后使用 a来组合表格。（问题是每个最初没有预见到的值可以有多个值。）`unum``snum``snum``LEFT JOIN``snum``unum`

是否可以仅通过 phpMyAdmin 中的 MySQL 命令填充`tableB`，还是需要编写一个小脚本？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T05:09:51.067

此处不需要循环，您可以简单地执行此操作，因为您要将行从复制`tableA`到`tableB`. 执行`INSERT INTO...SELECT`语句，

```
INSERT INTO TableB (unum, snum)
SELECT unum, snum
FROM tableA 
```

*后续问题：`snum`因为每个都有很多，所以价值是多少`unum`？你想全部插入还是只选择？*

# java - 需要帮助来理解 ConvolveOp 的内核类中使用的矩阵

> ID：14107974
> 
> 赞同：2
> 
> 时间：2013-01-01T05:10:37.460
> 
> 标签：java, swing, graphics2d

这是来自肮脏的富客户的代码——由 Chet Hasse 编写。

```
 private void buildConvolveOpTab(JTabbedPane tabbedPane) {
    BufferedImage dstImage = null;
    float[] sharpen = new float[] {
         0.0f, -1.0f,  0.0f,
        -1.0f,  5.0f, -1.0f,
         0.0f, -1.0f,  0.0f
    };
    Kernel kernel = new Kernel(3, 3, sharpen);
    ConvolveOp op = new ConvolveOp(kernel);
    dstImage = op.filter(sourceImage, null);

    tabbedPane.add("Convolve", new JLabel(new ImageIcon(dstImage)));
} 
```

谁能告诉我如何确定该矩阵“锐化”的元素。我用谷歌搜索了很多，但没有发现任何有用的东西。提前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T05:36:47.563

这只是离散卷积核之一，主要用于图像处理以应用各种空间滤波器，如`blur`or`sharpen`或`edge detection`。您提到的特定内核是`laplacian`锐化过滤器的近似值。

1.  参考：[http ://homepages.inf.ed.ac.uk/rbf/HIPR2/log.htm](http://homepages.inf.ed.ac.uk/rbf/HIPR2/log.htm)
2.  卷积滤波器小程序： http: [//homepages.inf.ed.ac.uk/rbf/HIPR2/convolutiondemo.htm](http://homepages.inf.ed.ac.uk/rbf/HIPR2/convolutiondemo.htm)

# windows - 在变量中转义与号 - 赢得批次

> ID：14107975
> 
> 赞同：24
> 
> 时间：2013-01-01T05:10:43.767
> 
> 标签：windows, batch-file, escaping

我有一个包含＆符号的变量，我需要创建另一个包含第一个变量的变量。我知道“&”字符[可以用 carret (^) 转义，](https://stackoverflow.com/questions/1327431/how-do-i-escape-ampersands-in-batch-files)但我不知道如何转义变量内的文本。

```
set Name1 = Red ^& Green
set Name2 = %Name1% ^& Blue 
```

*'Green' 不是内部或外部命令、可运行程序或批处理文件。*

我什至无法“回显”包含＆符号的变量 - 我得到同样的错误。

我需要使用变量来将它们的内容输入到输出中或操作由变量命名的文件，例如

```
type "%Name1%.txt"
type "%Name2%.txt" 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-01T07:38:24.227

最简单的解决方案是使用引号进行赋值，并延迟扩展。这消除了任何逃避的需要。

```
@echo off
setlocal enableDelayedExpansion
set "Name1=Red & Green"
set "Name2=!Name1! & Blue"
echo !Name2! 
```

如果您混合了带引号和不带引号的文本，则有时必须转义某些字符。但这仅在初始分配时才需要。使用延迟扩展时，变量的内容永远不需要转义。

```
@echo off
setlocal enableDelayedExpansion
set var="This & that" ^& the other thing.
echo !var! 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-01T05:19:24.467

不幸的是，您将不得不双重转义与符号，因为它被评估两次或将变量值放在引号中。

```
set Name1=Red ^^^& Green
set Name2=%Name1% ^& Blue 
```

但是您还需要在使用 Name2 时添加另一组转义。这将是一个主要的痛苦。

```
set Name1=Red ^^^^^& Green
set Name2=%Name1% ^^^& Blue 
```

**或使用报价（推荐）**

```
set "Name1=Red ^& Green"
set "Name2=%Name1% ^& Blue" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T06:22:05.170

我想到了两种解决方案，这两种解决方案都不够通用，但它们都“有效”：

1.  如前一个解决方案中所述，始终将内容放在引号中并在需要时将其删除。
2.  重新引用 &'s: set name2=%name1:&=^&% ^& Blue

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2017-05-19T11:58:22.937

最简单的解决方案是这个：

```
for /f "delims= usebackq" %a in (`echo "First & ? * Last"`) do echo # %~a 
```

...在批处理脚本中：

```
for /f "delims= usebackq" %%a in (`echo "First & ? * Last"`) do echo # %%~a 
```

或者

```
for /f "delims= usebackq" %%a in (`echo "%~1"`) do echo # %%~a 
```

# servicebus - 当我尝试在 BrokeredMessage 属性中设置对象时，为什么序列化失败并显示“不支持的类型”？

> ID：14107978
> 
> 赞同：2
> 
> 时间：2013-01-01T05:12:17.147
> 
> 标签：servicebus, azureservicebus

我有一个简单的类，如下所示：

```
[DataContract]
public class Actor
{
    public string Email { get; set; }
    public string Name { get; set; }
    public Guid Id { get; set; }
} 
```

我正在尝试将其作为 BrokeredMessage 中的属性发送，如下所示：

```
BrokeredMessage message = new BrokeredMessage(entity);
message.Properties["entityType"] = entity.GetType().Name;
message.Properties["action"] = action;
message.Properties["actor"] = actor;     // <-- This causes a failure
message.Properties["tenant"] = tenant;

topicClient.Send(message); 
```

但我不断收到一条`SerializationException`消息 `Serialization operation failed due to unsupported type Starlight.Events.Actor`

我尝试提供自己的序列化程序，但没有帮助：

```
var knownTypes = new List<Type>();
knownTypes.Add(typeof(Actor));
var dcs = new DataContractSerializer(entity.GetType(), knownTypes);

BrokeredMessage message = new BrokeredMessage(entity, dcs); 
```

这仍然给出了同样的例外。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-11-29T16:04:58.223

我来到这里是因为在较新的 ServiceBus 消息类型上出现类似错误，该消息类型具有“UserProperties”，而不是在较旧的 BrokeredMessage 类型上找到的“Properties”集合。[在此处](https://docs.microsoft.com/en-us/dotnet/api/microsoft.azure.servicebus.message.userproperties?view=azure-dotnet)阅读文档，可以将一组有限的受支持类型添加为用户属性。也许相同的规则适用于 BrokeredMessage 用户属性。

> 备注：仅支持以下值类型：byte、sbyte、char、short、ushort、int、uint、long、ulong、float、double、decimal、bool、Guid、string、Uri、DateTime、DateTimeOffset、TimeSpan

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T22:48:10.443

您是否检查过 DataContractSerializer 能够正确序列化/反序列化 Actor 类是否可以自行序列化？

如果是这种情况，第二件要检查的事情是生成的序列化对象的大小。根据[BrokeredMessageProperties](http://msdn.microsoft.com/en-us/library/windowsazure/hh532019.aspx)文档，每个单独的标头的大小限制为 342b，所有组合属性的大小限制为 64kb，整个消息的大小限制为 256kb。如果您超过其中任何一个，您还将获得 SerializationException：

> 如 Windows Azure AppFabric 服务总线配额中所示，每个属性的最大大小为 32K。所有属性的累积大小不能超过 64K。这适用于 BrokeredMessage 的整个标头，它既有用户属性，也有系统属性（如 SequenceNumber、Label、MessageId 等）。属性占用的空间计入消息的总大小及其最大大小 256K。如果应用程序超出上述任何限制，则会生成 SerializationException 异常，因此您应该期望处理此错误情况。

# iphone - 模糊图像的特定部分（矩形、圆形）？

> ID：14107979
> 
> 赞同：28
> 
> 时间：2013-01-01T05:12:16.613
> 
> 标签：iphone, objective-c, ios

我想模糊图像矩形或圆形。谷歌搜索后，我发现很容易模糊整个图像，但很难模糊图像的特定部分（矩形、圆形）。那怎么可能？？？

提前致谢

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-01-01T07:27:53.107

![在此处输入图像描述](../Images/79150b6a8629a86ae0509ec256cbd0a6.png)

只需将您的`UIImageView`属性名称设置为“imageView”并在您的实现文件中添加以下四个具有相同顺序的方法。此外，将您的 ImageView 模式设置为“重绘”。为给定的模糊效果添加 UIImage 类别或使用任何自定义类，它将为您工作。

方法 1 - 裁剪图像

```
#pragma mark - Cropping the Image 

- (UIImage *)croppIngimageByImageName:(UIImage *)imageToCrop toRect:(CGRect)rect{

    CGImageRef imageRef = CGImageCreateWithImageInRect([imageToCrop CGImage], rect);    
    UIImage *cropped = [UIImage imageWithCGImage:imageRef];
    CGImageRelease(imageRef);

    return cropped;   

} 
```

方法 2 - 合并两个图像

```
#pragma mark - Marge two Images 

- (UIImage *) addImageToImage:(UIImage *)img withImage2:(UIImage *)img2 andRect:(CGRect)cropRect{

    CGSize size = CGSizeMake(imageView.image.size.width, imageView.image.size.height);
    UIGraphicsBeginImageContext(size);

    CGPoint pointImg1 = CGPointMake(0,0);
    [img drawAtPoint:pointImg1]; 

    CGPoint pointImg2 = cropRect.origin;
    [img2 drawAtPoint: pointImg2];

    UIImage* result = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return result;
} 
```

方法 3 - RoundRect 图像

```
#pragma mark - RoundRect the Image

- (UIImage *)roundedRectImageFromImage:(UIImage *)image withRadious:(CGFloat)radious {

    if(radious == 0.0f)
        return image;

    if( image != nil) {

        CGFloat imageWidth = image.size.width;
        CGFloat imageHeight = image.size.height;

        CGRect rect = CGRectMake(0.0f, 0.0f, imageWidth, imageHeight);
        UIWindow *window = [[[UIApplication sharedApplication] windows] objectAtIndex:0];
        const CGFloat scale = window.screen.scale;
        UIGraphicsBeginImageContextWithOptions(rect.size, NO, scale);

        CGContextRef context = UIGraphicsGetCurrentContext();

        CGContextBeginPath(context);
        CGContextSaveGState(context);
        CGContextTranslateCTM (context, CGRectGetMinX(rect), CGRectGetMinY(rect));
        CGContextScaleCTM (context, radious, radious);

        CGFloat rectWidth = CGRectGetWidth (rect)/radious;
        CGFloat rectHeight = CGRectGetHeight (rect)/radious;

        CGContextMoveToPoint(context, rectWidth, rectHeight/2.0f);
        CGContextAddArcToPoint(context, rectWidth, rectHeight, rectWidth/2.0f, rectHeight, radious);
        CGContextAddArcToPoint(context, 0.0f, rectHeight, 0.0f, rectHeight/2.0f, radious);
        CGContextAddArcToPoint(context, 0.0f, 0.0f, rectWidth/2.0f, 0.0f, radious);
        CGContextAddArcToPoint(context, rectWidth, 0.0f, rectWidth, rectHeight/2.0f, radious);
        CGContextRestoreGState(context);
        CGContextClosePath(context);
        CGContextClip(context);

        [image drawInRect:CGRectMake(0.0f, 0.0f, imageWidth, imageHeight)];

        UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();

        return newImage;
    } 
    return nil;
} 
```

方法 4 - 触摸移动

```
#pragma mark - Touch Methods

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {

    UIImage *croppedImg = nil;

    UITouch *touch = [touches anyObject];
    CGPoint currentPoint = [touch locationInView:self.imageView];

    double ratioW=imageView.image.size.width/imageView.frame.size.width ;

    double ratioH=imageView.image.size.height/imageView.frame.size.height;

    currentPoint.x *= ratioW;
    currentPoint.y *= ratioH;

    double circleSizeW = 30 * ratioW;
    double circleSizeH = 30 * ratioH;

    currentPoint.x = (currentPoint.x - circleSizeW/2<0)? 0 : currentPoint.x - circleSizeW/2;
    currentPoint.y = (currentPoint.y - circleSizeH/2<0)? 0 : currentPoint.y - circleSizeH/2;

    CGRect cropRect = CGRectMake(currentPoint.x , currentPoint.y,   circleSizeW,  circleSizeH);

    NSLog(@"x %0.0f, y %0.0f, width %0.0f, height %0.0f", cropRect.origin.x, cropRect.origin.y,   cropRect.size.width,  cropRect.size.height );

    croppedImg = [self croppIngimageByImageName:self.imageView.image toRect:cropRect];

    // Blur Effect 
    croppedImg = [croppedImg imageWithGaussianBlur9];

    // Contrast Effect 
    // croppedImg = [croppedImg imageWithContrast:50];

    croppedImg = [self roundedRectImageFromImage:croppedImg withRadious:4]; 

    imageView.image = [self addImageToImage:imageView.image withImage2:croppedImg andRect:cropRect];  
} 
```

UIImage 类别类

UIImage+ImageBlur.h

```
#import <UIKit/UIKit.h>

@interface UIImage (ImageBlur)

- (UIImage *)imageWithGaussianBlur9;

@end 
```

UIImage+ImageBlur.m

```
#import "UIImage+ImageBlur.h"

@implementation UIImage (ImageBlur)

- (UIImage *)imageWithGaussianBlur9 {
    float weight[5] = {0.1270270270, 0.1945945946, 0.1216216216, 0.0540540541, 0.0162162162};
    // Blur horizontally
    UIGraphicsBeginImageContextWithOptions(self.size, NO, self.scale);
    [self drawInRect:CGRectMake(0, 0, self.size.width, self.size.height) blendMode:kCGBlendModeNormal alpha:weight[0]];
    for (int x = 1; x < 5; ++x) {
        [self drawInRect:CGRectMake(x, 0, self.size.width, self.size.height) blendMode:kCGBlendModeNormal alpha:weight[x]];
        [self drawInRect:CGRectMake(-x, 0, self.size.width, self.size.height) blendMode:kCGBlendModeNormal alpha:weight[x]];
    }
    UIImage *horizBlurredImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    // Blur vertically
    UIGraphicsBeginImageContextWithOptions(self.size, NO, self.scale);
    [horizBlurredImage drawInRect:CGRectMake(0, 0, self.size.width, self.size.height) blendMode:kCGBlendModeNormal alpha:weight[0]];
    for (int y = 1; y < 5; ++y) {
        [horizBlurredImage drawInRect:CGRectMake(0, y, self.size.width, self.size.height) blendMode:kCGBlendModeNormal alpha:weight[y]];
        [horizBlurredImage drawInRect:CGRectMake(0, -y, self.size.width, self.size.height) blendMode:kCGBlendModeNormal alpha:weight[y]];
    }
    UIImage *blurredImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    //
    return blurredImage;
}

@end 
```

快乐的编码......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-01T08:34:56.007

在 view 或 imageview 中添加以下 Pangesture

```
UIPanGestureRecognizer *panGesture=[[UIPanGestureRecognizer alloc]initWithTarget:self action:@selector(imageTaped:)];
[panGesture setMaximumNumberOfTouches:1];
[self.view addGestureRecognizer:panGesture]; 
```

模糊图像的方法

```
- (void)imageTaped:(UIPanGestureRecognizer *)gestureRecognizer
{

    CIContext *context = [CIContext contextWithOptions:nil];
    CGPoint touchLocation = [gestureRecognizer locationInView:self.imgviewMain];

    CGRect temp=CGRectMake(touchLocation.x-25, ((self.imgviewMain.frame.size.height-50) - touchLocation.y)+25, 50, 50);

    CIImage *inputImage0 = [[CIImage alloc] initWithImage:self.imgviewMain.image];

    CIImage *inputImage = [[CIImage alloc] initWithImage:[UIImage imageWithCGImage:[context createCGImage:inputImage0 fromRect:temp]]];
    CIFilter *blurFilter = [CIFilter filterWithName:@"CIGaussianBlur"];
    [blurFilter setDefaults];
    [blurFilter setValue: inputImage forKey: @"inputImage"];
    [blurFilter setValue: [NSNumber numberWithFloat:0.1]
                  forKey:@"inputRadius"];

    CIImage *outputImage = [blurFilter valueForKey: @"outputImage"];
    UIImageView *imgtest=[[UIImageView alloc]init];

    imgtest.image=[UIImage imageWithCGImage:[context createCGImage:outputImage fromRect:outputImage.extent]];

    UIImage *image;

    UIImage *bottomImage = self.imgviewMain.image; 
          image = imgtest.image;    

    CGSize newSize = CGSizeMake(self.imgviewMain.frame.size.width, self.imgviewMain.frame.size.height);
    UIGraphicsBeginImageContext( newSize );

    [bottomImage drawInRect:CGRectMake(0,0,768,1024)];

    CGRect newRect2=CGRectMake(temp.origin.x,((self.imgviewMain.frame.size.height-50) - temp.origin.y), image.size.width, image.size.height);
    image=[self makeRoundedImage:image radius:10];

    [image drawInRect:newRect2 blendMode:kCGBlendModeNormal alpha:0.5];
     UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();

    self.imgviewMain.image=newImage;
   } 
```

圆形图像方法

```
-(UIImage *)makeRoundedImage:(UIImage *) image
                      radius: (float) radius;
{
    CALayer *imageLayer = [CALayer layer];
    imageLayer.frame = CGRectMake(0, 0, image.size.width, image.size.height);
    imageLayer.contents = (id) image.CGImage;

    imageLayer.masksToBounds = YES;
    imageLayer.cornerRadius = radius;

    UIGraphicsBeginImageContext(image.size);
    [imageLayer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *roundedImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return roundedImage;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-10T19:46:29.173

我知道我参加聚会有点晚了，但这可能会帮助其他努力完成这项工作的人。

我最近需要实现它，但我在互联网上找不到关于这个特定主题的太多信息（特别是在处理不同的 UIImageView 的比例类型（如 Scale to Fill、Center 等）时如何让它工作）。所以我开发了一个小项目，它完全符合您的期望。

![在此处输入图像描述](../Images/2c18838e487061914d23c17a2b27924c.png)

[https://github.com/pauloubuntu/ios-blur-pan-gesture](https://github.com/pauloubuntu/ios-blur-pan-gesture)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-10T06:11:39.120

我设法为基于 OSX 的项目进行了 insta blur。OSX 和 iOS 的绘图和图形上下文管理代码可能不同。希望这可以帮助其他想要做类似事情的 macOS 开发人员！

在这里，当用户拖动鼠标时，我们裁剪图像并将其覆盖在主图像视图上

```
- (void)mouseDragged:(NSEvent *)theEvent {

        NSPoint currentPoint = [self.view convertPoint:[theEvent locationInWindow] fromView:nil];
        NSPoint currentPointForOverLay = currentPoint;
        double ratioW=self.imageView.image.size.width/ self.imageView.frame.size.width ;
        double ratioH=self.imageView.image.size.height/self.imageView.frame.size.height;

        double circleSizeW = 30;   //Width and Height of Rect
        double circleSizeH = 30;

        currentPointBackup.x *= ratioW;
        currentPointBackup.y *= ratioH;

        CGRect overLayRect = CGRectMake(currentPointBackup.x , currentPointBackup.y,  circleSizeW  * ratioW,  circleSizeH * ratioH);

        CGRect cropRect = CGRectMake(currentPoint.x, currentPoint.y, circleSizeW, circleSizeH);

        //NSLog(@"x %0.0f, y %0.0f, width %0.0f, height %0.0f", cropRect.origin.x, cropRect.origin.y,   cropRect.size.width,  cropRect.size.height);

        //Logic to CROP Image on OSX 
        NSSize ratio = [(NSImageView*)self.imageExtractor.canvasController.contentView originalImageRatio];
        CGFloat x = cropRect.origin.x / ratio.width;
        CGFloat y = cropRect.origin.y / ratio.height;
        CGFloat w = cropRect.size.width / ratio.width;
        CGFloat h = cropRect.size.height / ratio.height;
        NSRect sourceFrame = NSMakeRect(x, y, w, h);
        NSRect targetFrame = NSMakeRect(0, 0, w*1.0f, h*1.0f);
        NSImage *targetImage = [[NSImage alloc] initWithSize:targetFrame.size];
        if(targetImage.size.width > 0 && targetFrame.size.height > 0) {
            [targetImage lockFocus];
            [[(NSImageView*)self.imageExtractor.canvasController.contentView originalImage] drawInRect:targetFrame fromRect:sourceFrame operation:NSCompositingOperationCopy fraction:1.0f];
            [targetImage unlockFocus];
        }
        //End CROP Image on OSX  

        //Apply filters
        NSData *data = targetImage.TIFFRepresentation;
        CIImage *croppedCIImage = [[CIImage alloc] initWithData:data];

        CIImage *filteredCIImage;
        if (self.filterTypeOnCanvas == BlurFilterMode)
        {
            CGFloat filterValue = self.blurSlider.floatValue;
            filteredCIImage = [filterManager getBlurredImage:croppedCIImage withAmount:filterValue];
        }
        else if (self.filterTypeOnCanvas == PixilateFilterMode)
        {
            CGFloat filterValue = self.pixillateSlider.floatValue;                
            filteredCIImage = [filterManager getPixellatedImage:croppedCIImage withAmount:filterValue];
        }

        CGImageRef cgimgRef = [context createCGImage:filteredCIImage
                                            fromRect:[croppedCIImage extent]];

        NSImage *blurredNSImage = [[NSImage alloc] initWithCGImage:cgimgRef size:cropRect.size];

        //Finally overlay the blurred image on main image
        NSImage *newImage = [imageUtils overlayImages:self.imageView.image overlayImage:blurredNSImage overLayRect:nsRect];

        self.imageView.image = newImage;
   } 
```

> 叠加图像逻辑

```
- (NSImage *) overlayImages:(NSImage *)backgroundImage overlayImage:(NSImage *)overlayImage
           overLayRect:(NSRect)overLayRect
{
     NSImage *newImage = [[NSImage alloc] initWithSize:[backgroundImage size]];
     [newImage lockFocus];

     CGRect newImageRect = CGRectZero;
     newImageRect.size = [newImage size];

     [backgroundImage drawInRect:newImageRect];
     [overlayImage drawInRect:overLayRect];

     [newImage unlockFocus];

     return newImage;
} 
```

> 应用过滤器

```
-(CIImage *)getBlurredImage:(CIImage *)img withAmount:(float)intensity {
    CIFilter *blurFilter = [CIFilter filterWithName:@"CIDiscBlur"];
    [blurFilter setValue:img forKey:kCIInputImageKey];
    [blurFilter setValue:@(intensity) forKey:@"inputRadius"];
    return blurFilter.outputImage; 
}

-(CIImage *)getPixellatedImage:(CIImage *)img withAmount:(float)scale
{
    CIFilter *pixilateFilter = [CIFilter filterWithName:@"CIPixellate"];
    [pixilateFilter setValue:img forKey:kCIInputImageKey];
    [pixilateFilter setValue:@(scale) forKey:@"inputScale"];

    return pixilateFilter.outputImage;
} 
```

# javascript - Javascript 函数中的 IN 运算符，如 SQL 中的运算符

> ID：14107981
> 
> 赞同：6
> 
> 时间：2013-01-01T05:13:39.253
> 
> 标签：javascript, in-operator

我尝试了以下方法，但它引发了异常：

```
 if (!$get('sslot_hf0').value in ('X', 'Y', 'Z', '0')) {
                $get('sslot_hf0').value = 'X';
            } 
```

我正在寻找类似于`IN`运算符的功能`SQL`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T05:31:35.303

您可以使用[`indexOf`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)

```
['X', 'Y', 'Z', '0'].indexOf('Z')
> 2
['X', 'Y', 'Z', '0'].indexOf('T')
> -1

if (['X', 'Y', 'Z', '0'].indexOf($get('sslot_hf0').value) !== -1) {
  //...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T06:13:55.200

您可以将以下函数用于相同目的，第二个参数可以是数组或对象，第一个参数是您在数组或对象中搜索的值。

```
 function inStruct(val,structure)
        {

          for(a in structure)
             {
               if(structure[a] == val)
                 {
                   return true;
                 }
             }
           return false;
        }
if(inStruct('Z',['A','B','Z']))
    {
       //do your stuff
    } 
```

// 这个函数也遍历继承的属性

即在您包含的js库的某些地方

```
Array.prototype.foo = 10; 
```

比

```
 instruct(10,[1,2,3]) // will return true 
```

对象也会发生同样的情况。检查这个小提琴 [http://jsfiddle.net/rQ8AH/17/](http://jsfiddle.net/rQ8AH/17/)

**编辑::**

谢谢大家的评论......这是更新的代码，我认为最好保留旧功能。所以，有人可以注意到差异。

```
function inStruct(val,structure)
    {

      for(a in structure)
         {

           if(structure[a] == val && structure.hasOwnProperty(a))
             {
               return true;
             }
         }
       return false;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T05:16:14.537

`in`在 Javascript 中的功能不同。您必须使用`||`(or `OR`) 运算符使用多重比较来拆分它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-24T03:05:45.537

SQL：

```
something in ('X','Y','Z','0') 
```

现代 JavaScript（包括 IE>8）：

```
['X','Y','Z','0'].indexOf(something)>-1 
```

更现代的 JavaScript (!IE)：

```
['X','Y','Z','0'].includes(something) 
```

如果您需要`includes`旧版浏览器（包括 IE）的简单 polyfill：

```
if(!Array.prototype.includes) Array.prototype.includes =function(value,start) {
    start=parseInt(start)||0;
    for(var i=start;i<this.length;i++) if(this[i]==value) return true;
    return false;
}; 
```

根据 AuxTaco 的评论，这里是适用于 IE>8 的 polyfill 版本：

```
if (!Array.prototype.includes) Object.defineProperty(Array.prototype, 'includes', {
    value: function(value,start) {
        start=parseInt(start)||0;
        for(var i=start;i<this.length;i++) if(this[i]==value) return true;
        return false;
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-01T05:34:26.410

如果你想要有用的集合操作函数并且不介意添加库，请查看[underscorejs](http://underscorejs.org "下划线")

否则期望编写 for 循环来循环值并执行相等检查。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-01T07:41:11.397

创建一个数组

并使用 jquery.inArray() 检查

在这里阅读更多[http://api.jquery.com/jQuery.inArray/](http://api.jquery.com/jQuery.inArray/)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-01-01T05:29:12.350

你可以做到这一点，又好又容易，将值存储在数组中并使用`IN`

```
 var temparr = ['x', 'y', 'z', '0'];
     if (!$get('sslot_hf0').value in temparr) {
                $get('sslot_hf0').value = 'X';
            } 
```

希望这可以帮助

# opengl - 关于无缝 cub 贴图纹理

> ID：14107985
> 
> 赞同：0
> 
> 时间：2013-01-01T05:14:21.723
> 
> 标签：opengl, textures, opengl-3

我不确定无缝 cubmap 是如何工作的。我所知道的是，使用此功能，在边缘处，两个边缘之间会出现平滑的颜色变化。

因此，我在每个面上渲染一个具有 8*8 纹理的立方体，并且在 glTexImage2D() 调用之前调用 glEnable(GL_TEXTURE_CUBE_MAP_SEAMLESS)。但是通过在上面添加 glEnable 调用，我看不到输出有任何差异。我期待立方体的边缘有平滑的颜色变化。我使用 GL_CLAMP_TO_EDGE 模式进行包装，使用 GL_NEAREST 进行缩小和放大过滤。

代码：

```
 GLbyte subpix[]={0, 0, 0, 127,     127,127,127, 127,  127,0,127,127,  0,127,0,127, 0, 127, 127, 127,  127,127,127, 127,   0,0,0,127,  127,127,0,127, 127, 0, 0, 127,
                            0, 127, 127, 127,  127,127,127, 127,   0,0,0,127,  127,127,0,127, 0, 0, 0, 127,    127,127,127, 127,  127,0,0,127,  0,127,0,127, 127,127,0,127,
                            0, 0, 0, 127,    127,127,127, 127,  127,0,0,127,  0,127,0,127, 0, 0, 0, 127,     127,127,127, 127,  127,0,127,127, 56, 32, 54, 127,
                            0, 127, 127, 127,  127,127,127, 127,   127,0,0,127,  0,127,0,127, 127, 0, 0, 127,    0,127,127, 127,  0,0,0,127,  127,127,0,127, 54, 100, 12,127,
                            127, 0, 0, 127,    0,127,127, 127,  0,0,0,127,  127,127,0,127, 56, 32, 54, 127,  54, 100, 12,127,  123,54, 12, 127,  32, 127, 23, 127, 21, 90, 111,127,
                        0, 127, 127, 127,  127,127,0, 127,    127,0,0,127,  0,127,0,127,  127, 0, 0, 127,    0,127,127, 127 , 54, 100, 12,127, 56, 32, 54, 127
        };  

  *target11=GL_TEXTURE_CUBE_MAP;

        glGenTextures(1, &textureId);
        nResult |= GL_ERROR_CHECK((GL_NO_ERROR, "glGenTextures(1, &textureId);"));      

        glBindTexture(*target11, textureId);
        glEnable(GL_TEXTURE_CUBE_MAP_SEAMLESS);

        for(int i=0;i<6;i++)
        {
        glTexImage2D(GL_TEXTURE_CUBE_MAP_POSITIVE_X+i, 0, GL_RGBA16_SNORM, 7 ,7, 0, GL_RGBA, GL_BYTE,subpix);
        nResult |= GL_ERROR_CHECK((GL_NO_ERROR, "glTexImage2D(types[i], 0, *format, 7 ,7, 0, GL_RGBA, GL_UNSIGNED_BYTE,pix31);"));
            }   

        glTexParameteri(*target11, GL_TEXTURE_MIN_FILTER,GL_NEAREST);
        nResult |= GL_ERROR_CHECK((GL_NO_ERROR, "glTexParameteri(*target11, GL_TEXTURE_MIN_FILTER,GL_NEAREST);"));

         glTexParameteri(*target11, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
         nResult |= GL_ERROR_CHECK((GL_NO_ERROR, "glTexParameteri(*target11, GL_TEXTURE_MAG_FILTER, GL_NEAREST);"));

         glTexParameteri(*target11, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
    nResult |= GL_ERROR_CHECK((GL_NO_ERROR, "glTexParameteri(*target11, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);"));

    glTexParameteri(*target11, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
            nResult |= GL_ERROR_CHECK((GL_NO_ERROR, "glTexParameteri(*target11, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);"));
    glEnable(GL_DEPTH_TEST); 
```

让我知道我哪里出错了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T10:47:43.267

> 和 GL_NEAREST 用于缩小和放大过滤。

您正在使用点采样；您明确*要求*每个纹素之间的接缝。所以没有什么可以无缝的。

无缝立方体贴图就是在立方体的面之间进行*过滤*。您根本没有进行过滤，因此您没有使用无缝立方体贴图。

# django - django 1.5 创建项目 - ImportError: cannot import name total_ordering

> ID：14107988
> 
> 赞同：2
> 
> 时间：2013-01-01T05:15:45.447
> 
> 标签：django

我是 django 的新手

当我尝试运行“django-admin.py startproject mysite”命令时，我收到了以下错误消息：

lib/python3.1/site-packages/django/utils/functional.py"，第 349 行，在 from functools import total_ordering ImportError: cannot import name total_ordering

我使用 virtualenv 和 django 1.5b2

我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T05:21:42.550

[您应该至少更新到 Python 3.2。](http://docs.python.org/3/library/functools.html#functools.total_ordering)

> *3.2 版中的新功能。*

# c# - C# 图像获取对象

> ID：14107993
> 
> 赞同：1
> 
> 时间：2013-01-01T05:17:22.233
> 
> 标签：c#, .net

我正在查看来自第 3 方的开源并发现：

```
this.BackgroundImage = (Image)resourceManager.GetObject("$this.BackgroundImage"); 
```

“$this”是什么意思，我在哪里可以找到 BackgroundImage？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T05:28:27.213

检查[ResourceManager.GetObject 的文档](http://msdn.microsoft.com/en-us/library/963f81yd.aspx)，`$this`没有任何特殊含义。整个字符串`"$this.BackgroundImage"`只是一个应用于表单资源的标签。这是典型的 Windows 窗体设计者。创建一个表单，转到属性窗口，选择`BackgroundImage`属性并选择磁盘上的图像文件。然后打开表单的 .Designer.cs 文件，你会看到类似的代码。

# iphone - 如何在 iphone 应用程序中跟踪应用程序活动

> ID：14107997
> 
> 赞同：0
> 
> 时间：2013-01-01T05:18:11.163
> 
> 标签：iphone, android-activity, tracking

我正在制作一个应用程序，我想跟踪用户的活动。例如，如果用户选择任何歌曲列表，那么活动它会显示用户选择的列表，然后如果他选择任何其他的，那么它应该跟踪正在使用的应用程序的所有活动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T06:04:12.703

您应该参考以下第三方库：

1)[谷歌分析。](https://developers.google.com/analytics/devguides/collection/ios/)

2) [Flurry 分析。](http://www.flurry.com/)

3)[更多](http://list.ly/list/Ff-list-of-mobile-analytics-tools)

# android - 无法访问 ContactsXmpp 类型的封闭实例？

> ID：14107999
> 
> 赞同：1
> 
> 时间：2013-01-01T05:18:24.797
> 
> 标签：android, syntax-error, static-methods

这是我正在使用的课程

```
public class ContactsXmpp extends SherlockFragmentActivity {

private static Context ctx;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.contacts_xmpp_sip);

    ctx = this;
} 
```

当我从此方法调用 asynctask 时出现错误。这是错误 `No enclosing instance of type ContactsXmpp is accessible. Must qualify the allocation with an enclosing instance of type ContactsXmpp (e.g. x.new A() where x is an instance of ContactsXmpp).`

```
private static void alert( String str, final String name ) {

    AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(ctx);       
    alertDialogBuilder.setMessage(str + ": " + name);
    alertDialogBuilder.setCancelable(false)
    .setPositiveButton("Yes",new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog,int id) {                 
            Subscription(name);          
            new ColorsXMPP_AfterLogin().execute();     ///** error getting here..                                
        }
    }); 

    alertDialogBuilder.setNegativeButton("No", new DialogInterface.OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int which) {
            unSubscribe(name);
        }           
    });

    AlertDialog alertDialog = alertDialogBuilder.create();       
    alertDialog.show();         
} 
```

异步任务在这里

```
public class ColorsXMPP_AfterLogin extends AsyncTask<AfterLogging, Void, Void> {

    private ProgressDialog _dialog;

    @Override
    protected void onPreExecute() {          
        super.onPreExecute();            
        Log.e(TAG, " GmailXMPP_AfterLogin onPreExecute" );
    }

    @Override
    protected void onPostExecute(Void feed) {
        //ProgressBar_hide();       
        _dialog.dismiss();
        Log.e(TAG, " GmailXMPP_AfterLogin onPostExecute" );        
    }

    @Override
    protected Void doInBackground(AfterLogging... arg0) {

        Log.e(TAG, " GmailXMPP_AfterLogin doInBackground" );

        return null;
    }
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T09:32:40.530

您不能在方法中实例化`ColorsXMPP_AfterLogin`类（我假设两者都在活动中）。问题在于它被声明为*内部类*，而内部类需要创建封闭类的实例（它们需要此连接）。在静态方法中，您没有此实例，因此编译器会抛出该错误。你有几个选项来解决这个问题，我推荐的一个是在（声明为）中作为嵌套类或将它完全移动到它自己的 java 文件中（如果你需要连接到'只需传递一个引用的构造函数中的那个）。`static``alert``ContactsXmpp``ColorsXMPP_AfterLogin`*`alert``ColorsXMPP_AfterLogin``ContactsXmpp``public static class ColorsXMPP_AfterLogin...``Activity``Context``ctx``AsyncTask`*

 *您还可以使用该`ctx`变量来创建`ColorsXMPP_AfterLogin`类似的实例：

```
ctx.new ColorsXMPP_AfterLogin(); 
```*