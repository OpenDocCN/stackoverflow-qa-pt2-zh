# StackOverflow 问答 14924000-14924999

# ruby - Ruby 看到不存在的命名空间前缀

> ID：14924000
> 
> 赞同：-3
> 
> 时间：2013-02-17T17:41:09.683
> 
> 标签：ruby, namespaces, ruby-1.9.3

我正在打包我自己的 gem，其中包括一个名为 的模块`Convert3D`和一个名为`ShapeSet`.

当我尝试从 ShapeSet 的初始化方法中调用 Convert3D 模块的方法时，会出现以下错误。需要 Convert3D 模块，并且该方法在调用 ShapeSet.new 的 irb 上下文中工作。

```
NameError: uninitialized constant ShapeSet::Convert3d 
```

鉴于在任何地方都没有提到“ShapeSet::Convert3d”，红宝石在这里做什么，我可能做错了什么导致它？

我在 OSX 10.8.2 上使用 Matz Ruby 1.9.3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T17:44:46.527

您有一个错字：您忘记将 d 大写。

通过在 Shapeset 类的方法中编写 Convert3d，您是在询问 ruby​​ 是否存在 Shapeset::Convert3d OR ::Convert3d 并且它都没有找到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T17:46:53.003

因为您指`Convert3D`的是 的上下文内部，所以`ShapeSet`ruby​​ 会尝试查找`ShapeSet::Convert3D`. 不知道为什么有时会发生这种情况，有时不会。

但解决方案很简单：为了确保您`Convert3D`在全局命名空间中引用，您始终可以编写`::Convert3D`.

HTH。

# teamcity - 创建团队城市构建模板

> ID：14924005
> 
> 赞同：3
> 
> 时间：2013-02-17T17:41:30.817
> 
> 标签：teamcity, teamcity-7.0

我正在与团队城市合作，我计划在其中为我的一些项目设置几个不同的构建。

构建将非常相似，即。所有运行测试，fxcop 等。

不必通过多次配置每个构建的步骤，可以创建一个配置模板然后将其重用于其他构建？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T19:37:38.650

TeamCity 有这个有用的功能，它被称为相同的 - `Build Configuration Template`。[在这里](http://confluence.jetbrains.com/display/TCD7/Build+Configuration+Template)阅读如何使用它。

# java - 如何获取 Hibernate entityManager.createNamedQuery 结果

> ID：14924006
> 
> 赞同：2
> 
> 时间：2013-02-17T17:41:31.373
> 
> 标签：java, hibernate, jpa, jpa-2.0

我正在使用休眠 4.0

我的 DAO 类中有如下方法，其中方法返回 Entity 类`Employees`。我正在调用一个返回的 Oracle 函数`sys_refcursor`。如何`entityManager.createNamedQuery`在下面的方法中返回？

非常感谢任何帮助。

```
@Override
     public Employees getEmployeeRecords(String employeeNumber) {

         <??> = entityManager.createNamedQuery("myfunction");
     return <??>;

     } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T06:23:16.780

see i do like this

```
Query query = em.createQuery("SELECT e FROM Employee e WHERE e.name = :name ");
query.setParameter("name", name);

List<Employee> results = query.getResultList();
return results; 
```

here i am returning list of Employee type , if you want to send one object then do like this

```
return results.get(0); 
```

Regards

Anshul

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T19:00:13.270

您可能对 "entityManager.createNativeQuery("SQL Syntax query") 感兴趣，其中可以执行 SQL 语法查询。返回数据类型为 "ResultSet"。

```
ResultSet result = entityManager.createNativeQuery("Your_SQL_function").getSingleResult(); 
```

另一方面，'entityManager.createNamedQuery("defined-query-name")' 应该在代码执行之前定义其查询（在持久性配置或类注释中）。示例：在您的班级中名列前茅

`@NamedQuery(id="findFirstEmployee" query="from Employees e where id = 1")`

您的代码应如下所示：

```
public Employees getEmployeeRecords(String employeeNumber) {

    Emloyee result = entityManager.createNamedQuery("findFirstEmployee").getSingleResult();
 return result; 
```

* * *

References: [http://www.oracle-base.com/articles/misc/using-ref-cursors-to-return-recordsets.php](http://www.oracle-base.com/articles/misc/using-ref-cursors-to-return-recordsets.php)

# c++ - 重载 << 重复符号链接错误

> ID：14924007
> 
> 赞同：6
> 
> 时间：2013-02-17T17:41:34.650
> 
> 标签：c++, operator-overloading

我的头快要爆炸了。我不明白我在尝试用两个类（punto 和 vector）重载 '<<' 运算符时做错了。下面是代码，代码是写在classes头文件里面的：

```
 std::ostream& operator << (ostream& salida, const punto& origen)
    {   
        // Se escriben los campos separados por el signo
        salida << "Punto --> x: " << origen.xf << " , y: " << origen.yf;
        return salida;
    }

    std::ostream& operator << (ostream& salida, const vector& origen)
    {
        // Se escriben los campos separados por el signo
        salida << "Punto --> x: " << origen.p1.xf << " , y: " << origen.p1.yf;
            return salida;
    } 
```

错误出现在链接步骤中，并且没有与类头的双重链接，因为它是一个非常简单的示例。

![在此处输入图像描述](../Images/a77619bccaefa81e7f657e4409c51b76.png)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-17T17:56:33.707

这个特定的错误意味着一个函数被编译成两个不同的翻译单元。如果您将函数定义放在头文件中并将其包含到两个不同的源文件中，则很可能会发生这种情况。

从广义上讲，您有两种解决方案：

1.  在标题中声明而不是定义您的函数。在源文件中定义（实现）它。
2.  将您的函数声明为静态或内联。

# edi - 如何获得 X12 EDI 规范？

> ID：14924013
> 
> 赞同：3
> 
> 时间：2013-02-17T17:42:24.150
> 
> 标签：edi, x12

具体来说，835 和 837，更具体地说，是各种状态代码及其含义的列表。

我通过 google 和 dadduckgo 找到了一些商业资源。有免费的资源吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T06:15:00.803

这些规范的版权归 DISA 或 WPC（在 HIPAA 标准的情况下——本质上是基本 X12 标准的增强版本）所有，并且可以从他们那里购买。

然而，正如 Axel 所建议的，对于更流行的交易集，您通常可以从网上获得实施指南，这些通常会包含您需要的所有内容。

这些规范通常没有免费的机器可读版本，因为正式版本的成本很高。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T21:27:59.577

一种选择是向 Google 询问特定的消息类型，例如`Health Care Claim Payment/Advice`(X12 835)。这将向您显示大量指南和文档。

另一种选择是下载 EDI X15 映射/转换工具的试用版并研究其语法文件。

医疗保健代码在[这里](http://www.wpc-edi.com/Reference/)。

# css - 第一项的多列问题

> ID：14924016
> 
> 赞同：0
> 
> 时间：2013-02-17T17:42:30.530
> 
> 标签：css, multiple-columns

我在这里看到了什么？我不介意其余的段落不排列，但最上面的段落必须排列。我错过了什么？

OSX Mountain Lion 上的浏览​​器 Fx 19 和 Chrome 24 全屏

**注意：**由于自动插入的标准化 css，它在 jsfiddle 中消失了

[没有规范化 CSS 的 JSFIDDLE](http://jsfiddle.net/mplungjan/AsMH9/show/) ![在此处输入图像描述](../Images/d5bd9dd03158b8a9d5a9b6ae4b3b722f.png)

```
<!DOCTYPE html>
<html>
<head>
<style>
#multicolumn { 
-moz-column-count:3; /* Firefox */
-webkit-column-count:3; /* Safari and Chrome */
 column-count:3; 
-moz-column-gap: 10px;
-webkit-column-gap: 10px;
column-gap: 10px;
-moz-column-rule: 1px solid #000;
-webkit-column-rule: 1px solid #000;
column-rule:1px solid #000;
}
</style>
</head>
<body>
<div id="multicolumn"><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec nulla lorem, tincidunt in pulvinar non</p>
<p>Suspendisse est odio, porttitor non semper porttitor, sagittis in enim. Aenean mollis elit dapibus</p>
<p>Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; </p>
<p>Etiam imperdiet suscipit odio, posuere ultrices diam porttitor nec. In tincidunt iaculis neque</p>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum porta consectetur sapien, </p>
<p>Donec tortor mauris, congue sit amet imperdiet sed, vehicula vel eros.</p>
<p>Curabitur porttitor mattis felis et placerat. Nulla facilisi. Curabitur varius imperdiet sapien,</p>
<p>in vulputate quam auctor id. In quis eros eget sapien dignissim porttitor.</p>
<p> In hac habitasse platea dictumst. Nulla ut lorem sed felis blandit pretium.</p>
<p> Donec eget turpis ac ante gravida aliquet at nec magna.</p>
<p> Curabitur eleifend massa id sapien iaculis scelerisque. </p>
<p>Sed interdum, sapien ac laoreet tempus, orci turpis tristique sapien, </p>
<p>at ultrices dolor nulla eget dui. Vivamus sit amet turpis et erat vehicula tincidunt. Etiam a sodales neque.</p>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T17:47:52.483

默认情况下，该`<p>`元素有一些上边距。添加一个 CSS 规则来重置第一段，如下所示：

```
p:first-of-type {
    margin-top:0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T18:16:39.753

我同意 Austin 的观点，即**p: first-of-type { margin-top:0; }**解决了这个问题。

我解决此问题的方法是暂时删除所有 p 标签……换句话说，用没有任何 p 标签的直接“Lorem ipsum”文本填充所有列。当您立即将所有列的顶部排成一行时……这样您就可以确定这是 ap 标签格式问题。

# codeigniter - 使用 Tank auth 和 Codeigniter 创建管理员用户/区域

> ID：14924021
> 
> 赞同：0
> 
> 时间：2013-02-17T17:42:37.113
> 
> 标签：codeigniter, authentication, admin, tankauth

我正在为我的体育俱乐部建立一个迷你社交网络，并希望创建一个“管理员”部分，管理员可以从中管理用户帐户，例如禁止用户、删除用户等。

我正在使用[tank auth](http://konyukhov.com/soft/tank_auth/)来处理普通站点用户的身份验证，但现在我需要另一个安全区域供管理员使用。我处理这个问题的最佳方法是什么？我是否将另一个字段添加到名为“是”和“否”的用户`admin`表`1`中`0`。如果用户是管理员，然后检查管理仪表板控制器？

理想情况下，我希望普通用户无法看到管理区域的登录表单。因此，如果 joe bloggs（该网站的注册会员）猜测`mydomain.com/admin`他们不会在那里看到任何东西，那么只有管理员用户会看到。

如果有更好的方法可以解决这个问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T19:14:46.373

这就是我会做的，因为 Tank-auth 选择完整的行，如果您在表中添加字段，它应该会自动添加到您的对象中。

```
$user = $this->users->get_user_by_id($this->tank_auth->get_user_id(), TRUE);

if($user->admin == 1){ 
    //this user is admin 
} 
```

这是最简单的方法。

# android - 找不到包含以下内容的存储库：osgi.bundle 和 org.eclipse.update.feature

> ID：14924026
> 
> 赞同：4
> 
> 时间：2013-02-17T17:42:55.870
> 
> 标签：android, eclipse, github, egit

我正在尝试将我的 Android 应用程序链接到 Github 存储库。

遵循 EGit 用户指南，我首先创建了一个新的 Git 存储库，但是当尝试添加到版本控制（“团队”->“添加到版本控制”）时，此选项不在我的列表选项中，要么推送，要么提交，合并和许多其他。我只能从 Apply Patch 或 Share Project 中选择。

所以我猜我在**协作**部分缺少一些软件。然后我尝试安装缺少的 Git 东西：命令行界面和 Mylyn 版本连接器。

当我尝试安装软件时，eclipse根据一些存储库错误遇到问题：`osgi.boundle`和`org.eclipse.update.feature`.

> 收集要安装的项目时发生错误会话上下文是：(profile=profile, phase=org.eclipse.equinox.internal.p2.engine.phases.Collect, operand=, action=)。
> 
> 找不到包含：osgi.bundle,org.eclipse.jgit.iplog,2.1.0.201209190230-r 的
> 存储库 找不到包含：osgi.bundle,org.eclipse.jgit.pgm,2.1.0.201209190230-r 的
> 存储库包含：org .eclipse.update.feature,org.eclipse.jgit.pgm,2.1.0.201209190230-r
> 找不到包含：osgi.bundle,org.eclipse.jgit.ui,2.1.0.201209190230-r 的
> 存储库包含：osgi.bundle ,org.eclipse.mylyn.git.core,1.0.2.v20120916-1200
> 找不到包含的存储库：org.eclipse.update.feature,org.eclipse.mylyn.git,1.0.2.v20120916-1200
> 找不到包含的存储库: osgi.bundle,org.eclipse.mylyn.git.ui,1.0.2.v20120916-1200
> 找不到包含：osgi.bundle,org.eclipse.mylyn.versions.core,1.0.2.v20120916-1200 的存储库
> 未找到包含以下内容的存储库：org.eclipse.update.feature,org.eclipse.mylyn.versions,1.0.2.v20120916-120 未
> 找到包含以下内容的存储库：osgi.bundle,org.eclipse.mylyn.versions.ui,1.0.2 .v20120916-1200 未
> 找到包含以下内容的存储库：osgi.bundle,org.kohsuke.args4j,2.0.12.v200910131500

我一直在寻找其他一些帖子，比如[这个](https://stackoverflow.com/questions/6470802/what-to-do-about-eclipses-no-repository-found-containing-error-messages)关于存储库错误的帖子，他们建议删除更新站点并重新安装它。我已经完成了，但我不断收到同样的错误。

实际上我有以下可用的软件站点：

*   Android 开发者工具更新站点：*dl-ssl.google.com/android/eclipse/*
*   Eclipse 更新：*download.eclipse.org/eclipse/updates/4.2*
*   Eclipse 更新站点 4.3：*download.eclipse.org/eclipse/updates/4.3milestones*
*   朱诺：*download.eclipse.org/releases/juno*

我在 Windows 7 - 64 位上使用 ADT Build: v21.0.1-543035。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:37:28.780

命令行界面和 Mylyn 版本连接器都是可选的，对于常见用例来说不是必需的。

使用*Share Project...*首先将项目连接到新创建的 Git 存储库。之后，您应该在团队菜单中有更多选项。*然后，您可以使用Add to Index*将文件添加到版本控制。

至于为什么安装附加功能不起作用，可能是您选择了错误的更新站点。目前，EGit 2.2 是最新的稳定版本（很快会是 2.3）。因此，在安装附加功能之前，您可能需要先更新到最新版本。

# svn - 尝试查看差异时出现乌龟错误

> ID：14924030
> 
> 赞同：0
> 
> 时间：2013-02-17T17:43:15.747
> 
> 标签：svn, tortoisesvn

在尝试查看我对文件所做的更改时，我收到以下错误：

![在此处输入图像描述](../Images/70bfa375e3387e4595bc195ba32bbabb.png)

我安装了最新的 TortoiseSVN 1.7.11，Build 23600 - 64 Bit，2012/12/12 19:08:52

重新启动了我的电脑。在此文件所在的文件夹上运行“[清理” 。](http://tortoisesvn.net/docs/nightly/TortoiseSVN_en/tsvn-dug-cleanup.html)仍然收到此错误。

**更新：**在 Notepad++ 中打开 tmp 文件。文件底部添加了 NULL 字符。我能够通过删除这些字符来解决问题。

![在此处输入图像描述](../Images/e3ec37ad3b40f5c3ea542cec6d663f5f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:44:39.323

您可能将文件保存为 Unicode 而不是 ASCII（这是错误的最后一行建议您检查的内容）。因此，您的计算机或您的环境没有任何问题需要“清理”。检查文件编码，如果结果是 Unicode，则将其更改为 ASCII。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T13:08:30.590

不确定 NUL 字符是如何进入文件的（在主文件中不是 tmp）。删除 NUL 字符，将其签入。然后对文件进行更改并进行 diff 和 diff 工作。

# shell - 需要帮助设置 cron。脚本在 ssh 中运行良好

> ID：14924032
> 
> 赞同：1
> 
> 时间：2013-02-17T17:43:29.627
> 
> 标签：shell, path, cron

所以我认为问题最有可能是路径。但我对如何正确设置它感到困惑。

所以我的脚本的顶部看起来像：

```
#!/bin/sh

MYSQL="$(which mysql)"
if [ -z "$MYSQL" ]; then
    echo "Error: MYSQL not found"
    exit 1
fi 
```

当我在 ssh 中运行脚本时，它运行良好！但是当我设置 cron 时，在 directadmin 中使用这些命令：

```
/home/username/script.sh 
```

也试过：

```
/bin/sh /home/username/script.sh 
```

他们都给我以下错误：

```
Error: MYSQL not found 
```

所以这是我在网上找到的：

```
SHELL=/bin/sh
PATH=/etc:/bin:/sbin:/usr/bin:/usr/sbin 
HOME=/var/log 
```

我假设我需要在我的脚本中添加至少一个上述语句。该服务器是一个 freebsd 服务器，我假设一切都在默认位置。我知道当我执行 whereis sh 时它会返回 /bin/sh

我不知道如何检查 PATH 或 home。我是 freebsd 的新手，所以任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T17:56:49.747

Crontab 作业由系统提交，不执行正常的系统启动脚本（设置 PATH 和类似的东西）。

我在 Solaris 上的 Korn shell 中完成了所有工作，并在我所有脚本的开头添加了与这些类似的行：

```
#!/bin/ksh
#-------------------------------------------------------------------------------
# /opt/app/batch/daily_dns.ksh  Daily DNS Batch process via crontab
# 16 3 * * * /opt/app/batch/dns/bin/daily_dns.ksh > /opt/app/batch/daily_dns.log
#-------------------------------------------------------------------------------
. /etc/profile 
```

你可能需要做类似的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T07:27:26.897

这是因为 PATH 问题。您可以根据上述答案在 crontab 文件中指定路径变量，也可以修改脚本。

如果您决定选择后者，这里是需要修改的内容，

1.  在您的标准终端上，运行“ *which which* ”以找出系统上“which”工具的确切路径（通常为“ */usr/bin/which* ”）
2.  将脚本中的命令“which”替换为其完整路径。

现在您可以在 crontab 中使用 -“ */bin/sh /path/to/your/script ”来 cron 脚本。*在这种情况下，您不需要在 crontab 文件中添加任何额外的路径变量。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T16:12:54.817

您可以阅读 env(1) 联机帮助页并使用它来诊断和修复您的问题，或者如果您愿意，也可以从脚本中修复环境。

正如你提到的它是一个freebsd 服务器，我猜你在/usr/local 下安装了mysql - 它不包含在cron 的默认$PATH 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T17:56:09.013

我只是做出有根据的猜测，因为我只熟悉 Debian，但 cron 以 root 身份运行任务并以非交互方式运行它们。这意味着它获得与您的 root 用户相同的路径，并且通常在设置路径之前从 .bash_profile 退出非交互式提示。

TL;DR：检查您的 root 用户是否具有 MYSQL 变量，并检查 root 用户的 .bash_profile 是否在非交互式提示下退出。

# xmpp - XMPP,

> ID：14924034
> 
> 赞同：2
> 
> 时间：2013-02-17T17:43:41.603
> 
> 标签：xmpp

我`psi`用来连接到 xmpp 服务器`chrome.pl`。我正在说话，突然我的消息开始立即从我的服务器 xmpp 地址返回。典型的交换看起来像这样（这是来自`psi`XML 控制台）：

我的留言：

```
<message type="chat" to="…@jabbim.pl/…" id="accfa">
<body>nie wiem</body>
<active xmlns="http://jabber.org/protocol/chatstates"/>
</message> 
```

服务器响应：

```
<message type="chat" id="accfa" to="…@jabbim.pl/…" failed="1">
<body>nie wiem</body>
<active xmlns="http://jabber.org/protocol/chatstates"/>
</message> 
```

`failed="1"`我在任何 XMPP 规范中都找不到与此相关的任何内容。那是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-07-05T16:42:24.173

正如@Flow 在他的评论中所说，这不是消息节的有效属性（参见[https://www.rfc-editor.org/rfc/rfc6120#appendix-A.5](https://www.rfc-editor.org/rfc/rfc6120#appendix-A.5)）。从外观上看，服务器应该返回一个“type”属性设置为“error”的消息节，以及一个相关的 <error/> 元素（参见[https://www.rfc-editor.org/rfc/ rfc6120#section-8.3.3](https://www.rfc-editor.org/rfc/rfc6120#section-8.3.3)的条件列表）。

# facebook - Facebook 喜欢按钮劫持我的网址并将其更改为其他内容？

> ID：14924035
> 
> 赞同：0
> 
> 时间：2013-02-17T17:43:42.340
> 
> 标签：facebook, facebook-like, facebook-social-plugins, phishing

我想添加一个 facebook like 按钮`www.foldablehats.com`，`www.foldablehats.com`但尽管有 og 标签和其他标记，但喜欢评论引用`http://education.apwg.org/r/en/index.htm`

[http://jsfiddle.net/mwJkv/](http://jsfiddle.net/mwJkv/)

是什么赋予了？当我将标记更改为 google 时，它​​工作正常。当我将其改回时，`www.foldablehats.com`它会重定向到一些奇怪的网络钓鱼链接`education.apwg.org`。Facebook 是否将此网址标记为网络钓鱼？我不明白发生了什么。

# xcode - presentModalViewController for 4.3 支持警告

> ID：14924039
> 
> 赞同：0
> 
> 时间：2013-02-17T17:44:01.703
> 
> 标签：xcode, viewcontroller, presentmodalviewcontroller

我的代码中有一个问题，即在 iOS 4.3 及更高版本中包含 presentModalViewController。

当iOS版本支持时，我正在使用以下代码来使用presentModalViewController和presentViewController。（取自@Stackoverflow帖子）

```
 if([self respondsToSelector:@selector(presentViewController:animated:completion:)])
    [self presentViewController:myView animated:YES completion:^{/* done */}];
else if([self respondsToSelector:@selector(presentViewController:animated:)])
    [self presentModalViewController:myView animated:YES];
else
    NSLog(@"Oooops, what system is this !!! - should never see this !"); 
```

当我在 >5.0 和 <5.0 中测试它时，上面的效果很好。但是在我的 AppDelegate.mi 中有一个检查例程，用于检测应用程序是否第一次运行。

如果是，则先打开一个视图，与启动视图不同。

```
if (![defaults boolForKey:@"everLaunched"]) {
    //NSLog(@"First run");
if([self.viewController respondsToSelector:@selector(presentViewController:animated:completion:)])
        [self.viewController presentViewController:infoView animated:YES completion:^{/* done */}];
    else if([self.viewController respondsToSelector:@selector(presentViewController:animated:)])
       [self.viewController presentModalViewController:infoView animated:YES];
    else
        NSLog(@"1Oooops, what system is this !!! - should never see this !"); 
```

}

显然它正在工作，但我在第一次启动应用程序时收到警告，我担心它会在各种设备中给我带来意想不到的错误

```
Unbalanced calls to begin/end appearance transitions for <ViewController: 0x689da90>. 
```

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T07:57:26.757

可能在第二种情况下，您应该要求响应 presentModalViewController 而不是 presentViewController

你的代码

```
if([self respondsToSelector:@selector(presentViewController:animated:completion:)])
    [self presentViewController:myView animated:YES completion:^{/* done */}];
else if([self respondsToSelector:@selector(**presentViewController:animated**:)])
    [self presentModalViewController:myView animated:YES];
else 
```

# c++ - c++ 稀疏向量

> ID：14924040
> 
> 赞同：-2
> 
> 时间：2013-02-17T17:44:04.967
> 
> 标签：c++, vector, operations

问题1）

我在 C++ 中有一个大的稀疏双精度向量，我需要从向量中有效地解析出非零元素的索引。我显然可以遍历长度并做到这一点，有更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T17:56:04.737

除非您对双打向量的构成有一些特殊的了解（例如，它已排序），否则您将获得最有效的循环。

当然，您可能应该考虑 eladidan 建议的结构变化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T17:56:31.023

> 我在 C++ 中有一个大的稀疏双精度向量，我需要从向量中有效地解析出非零元素的索引。我显然可以遍历长度并做到这一点，有更好的方法吗？

如果向量是真正稀疏的（`n = o(N)`其中`n`是非零元素的数量并且`N`是向量的大小），那么用`std::map<int,double>`or表示它`std::unordered_map<int,double>`可能是最好的。通过`std::map`方式，您可以在`O(log(n))`. 使用`std::unordered_map`查找操作需要的摊销时间为`O(1)`. 在这两种情况下，非零元素的数量只是容器的大小。这两种方法也占用`O(n)`空间而不是`O(N)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T18:21:21.407

如果您无法[更改数据的表示](https://stackoverflow.com/a/14924175/430766)，则必须检查每个元素以过滤掉[几乎等于零](http://en.cppreference.com/w/cpp/types/numeric_limits/epsilon#Example)的元素。然而，这个任务是[令人尴尬的并行](http://en.wikipedia.org/wiki/Embarrassingly_parallel)，所以也许你可以将工作负载划分为一堆线程，以至少提高运行时间（尽管不是复杂性）。

# iphone - 如何从 Twitter 获取最新推文？

> ID：14924050
> 
> 赞同：4
> 
> 时间：2013-02-17T17:44:50.017
> 
> 标签：iphone, ipad, twitter, ios-simulator

我试图使用下面的链接从 twitter 获取最新的推文。

[http://api.twitter.com/1.1/statuses/public_timeline.json](http://api.twitter.com/1.1/statuses/public_timeline.json)

但这行不通。所以请指导我如何获取最新的推文。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T17:57:50.077

API 端点似乎`statuses/public_timeline.json`已在去年 10 月被删除，因此它未包含在 API v1.1 中。

[Twitter 开发文档](https://dev.twitter.com/docs/api/1/get/statuses/public_timeline)`statuses/sample.json`建议改用端点。有关 API 规范，请参见[此处](https://dev.twitter.com/docs/api/1.1/get/statuses/sample)。

# gnuplot - 如何将线型设置为 Gnuplot 中多个绘图的默认线型？

> ID：14924055
> 
> 赞同：10
> 
> 时间：2013-02-17T17:45:21.733
> 
> 标签：gnuplot

我想使用 gnuplot 创建绘图。所有图中的线宽都应为 3。如果我只为一个情节做这件事，这是通过以下方式完成的：

```
set style line 1 linewidth 3 
```

有什么方法可以默认全局执行吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-17T18:24:19.640

您可以指定

```
set terminal <terminal> linewidth 3 
```

这将更改绘图中所有线条的默认线宽，包括绘图边框。

如果这不是您想要的，您可以指定循环中的所有行（gnuplot 4.6+），其中`n`是您要绘制的行数：

```
do for [i=1:n] {
    set style line i linewidth 3
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-01T21:05:23.280

还有其他“线条样式”可以一次为所有行设置而没有索引，例如 for `linespoints`：

```
set style data linespoints
plot '-', '-'
    1, 1
    2, 2
    3, 3
    e
    1, 1
    2, 4
    3, 9
    e 
```

[查看手册http://www.gnuplot.info/docs_5.0/gnuplot.pdf](http://www.gnuplot.info/docs_5.0/gnuplot.pdf)的 TOC 的“样式”部分，了解可以默认设置的其他内容。

# c# - 在 C# 中将数字从 0 舍入

> ID：14924056
> 
> 赞同：2
> 
> 时间：2013-02-17T17:45:34.120
> 
> 标签：c#, winforms, math, rounding

我做了一些研究，发现了方法`Math.Round`和`MidpointRounding.AwayFromZero`方法。

第二种方法可以满足我的要求，但我不明白使用它背后的语法。

例如，如果你有`double`5.5 并且想要使用正常舍入得到 6，并使用 4.4 得到 4，这将如何完成？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T17:48:29.013

一些[重载`Math.Round`](http://msdn.microsoft.com/en-us/library/system.math.round.aspx)将[`MidpointRounding`](http://msdn.microsoft.com/en-us/library/system.midpointrounding.aspx)值作为参数。

因此，您可以写：

```
Math.Round(2.225m, 2, MidpointRounding.AwayFromZero) 
```

并且该表达式的计算结果为`2.23`.

# php - 用 PHP 阅读另一个网站

> ID：14924058
> 
> 赞同：2
> 
> 时间：2013-02-17T17:46:01.763
> 
> 标签：php, html-table

我有一个 PHP 脚本，它创建一个日历并突出显示当天和所有内容。我想打开一个网站并阅读如下表，并获取“日期”的“信息”并将其放在我的日历上。

```
<table>
<tr>
<th>Date</th>
<th>Info</th>
</tr>
<tr>
<td>2/20/2013</td>
<td>Meeting</td>
</tr>
<tr>
<td>2/24/2013</td>
<td>Another meeting</td>
</tr>
</table> 
```

使用此代码：

```
$url = $pageurl;
$content = file_get_contents($url);
$needle = $month . '/' . $list_day . '/' . $year;
if (strpos($content, $needle)) {
    $calendar .= '<p>STUFF</p><p>MORE STUFF</p>';
} 
```

我取得了一些成功，我现在可以将“STUFF”和“MORE STUFF”输出到日历上出现的一天。但现在我想准确地发布那一天的内容。我怎样才能做到这一点？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T17:56:31.820

[我在这里](https://stackoverflow.com/a/14548282/1058140)回答了一个类似的问题。`getCellValue()`您可以从那里复制该功能，并像这样使用它：

```
$dom = new DomDocument();
$dom->preserveWhiteSpace = false;

$dom->loadHtml('...table HTML here...');

$table = $dom->getElementsByTagName('table')->item(0);

print getCellValue($table, 'Info', array(
  'Date' => '2/20/2013',
)); 
```

这应该打印请求日期（“会议”）的相应“信息”值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T17:48:43.920

您可能想要使用 DOM 解析器之类的东西。我在 Google 中寻找“DOM Parser PHP”，这是第一个链接：

[PHP 中的 DOM 解析库](http://simplehtmldom.sourceforge.net/)

# performance - 有什么好的 Pig Accumulator 接口实现的例子吗？

> ID：14924059
> 
> 赞同：1
> 
> 时间：2013-02-17T17:46:06.617
> 
> 标签：performance, apache-pig, udf

我需要从 HDFS 读取数百万条记录，丰富它们并将它们作为 XML 文件存储在每个 XML 文件的 10K 条记录中。

我一直在尝试使用 Accumulator 接口并将我的 pig.accumulative.batchsize 设置为 2 进行测试。

但是，被调用的方法是“exec()”而不是 Accumulator 的“accumulate”方法。

我的UDF课程大纲如下：

```
public class MyAccUDF extends EvalFunc <Tuple> implements Accumulator <Tuple>{

    public Tuple exec(Tuple input) throws IOException {
        //..
    }

    public void accumulate(Tuple b) throws IOException {
        //...
    }

    public void cleanup() {
        //..
    }

    public Tuple getValue() {
        //..
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:16:06.607

累加器接口不保证每次都被执行。Programming Pig 一书[概述了累加器接口不会受到尊重的地方](http://books.google.ca/books?id=0zimI7NoObIC&pg=PA139&lpg=PA139&dq=accumulator%20interface%20pig&source=bl&ots=O6U_T86OkE&sig=mzQr5OuejR-4jiTTWGGBCSQZJ2g)：

> 只要有可能，Pig 将选择使用 UDF 的代数实现而不是累加器。这是因为累加器有助于避免将记录溢出到磁盘，但它不会降低网络成本或帮助平衡减速器。如果 foreach 中的所有 UDF 都实现了累加器，并且至少有一个没有实现代数，Pig 将使用累加器。如果至少有一个不使用累加器，Pig 将不会使用累加器。这是因为 Pig 已经将整个包读入内存以传递给未实现累加器的 UDF，因此累加器中不再有任何值。

您的 UDF 必须在`exec()`和中实现其逻辑`accumulate()`。可以在 UDF 中找到这种功能重复的[简单`COUNT`示例](http://svn.apache.org/repos/asf/pig/trunk/src/org/apache/pig/builtin/COUNT.java)。

# c - pthreads和并发

> ID：14924061
> 
> 赞同：3
> 
> 时间：2013-02-17T17:46:20.860
> 
> 标签：c, multithreading, concurrency, pthreads

我有以下代码：

```
#include <pthread.h>
#include <stdio.h>
#include <stdlib.h>

#define LOOPS 10000

void *run(void *arg)
{
    int id = strtol(arg,NULL,0);
    int i;
    for(i=0; i<LOOPS; i++)
    {
        printf("In %d.\n",id);
    }
}

int main()
{
    pthread_t p1,p2;
    void *res;

    pthread_create(&p1,NULL,run,"1");
    pthread_create(&p2,NULL,run,"2");
    pthread_join(p1,&res);
    pthread_join(p2,&res);
    return 0;
} 
```

当我运行它时，字符串“In 1”连续显示 10000 次，然后“In 2”连续显示 10000 次，反之亦然。字符串不应该像这里一样交替显示而不是连续显示吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-17T17:51:36.070

调度程序交错线程的顺序不是确定性的（……嗯，但仅从调度程序/内核的角度来看）。您不应该对订单做出假设。

在*这种情况下*，您会体验到任何一个线程都可以在调度程序->抢占它并​​允许另一个线程运行之前完成它们的全部工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T18:04:53.857

调度程序在*时隙*中运行进程。时隙足够大以提高效率，但又足够小以产生同时执行的错觉。

在多核 CPU 上，在操作系统内核级别实现的线程实际上将并行执行。

最重要的是，输出有时会被缓冲，因为进行一次大写所需的处理能力与进行一次小写所需的处理能力大致相同。当输出到交互式终端设备时，大多数系统都禁用缓冲，但现在环境的细节开始变得非常重要。

对于要交错的输出，它必须是无缓冲的并在多核或异常细粒度的调度程序上运行，并且愿意仅仅因为您产生一行输出而进行昂贵的上下文切换。如果是多核，则通过库和内核的执行路径必须同时在三个核上平衡。这可能永远不会发生。

毕竟，您一次创建一个，而一个总是准备好在另一个之前运行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-17T18:08:25.453

其他两个答案是正确的，但我想补充一点：

两个输出*是*交错的。它们只是不是每隔一两行交错一次，而是更可能是数千行。当每个线程被赋予一个时间量时，它就有输出*数千*行的时间。由于您只在每个线程上打印 10k 行，因此一个线程有时间在另一个线程开始之前完成它的工作。

尝试用`for`无限循环替换你的循环，看看会发生什么。

# android - Phonegap：Android 入门？-- 在 Linux 上

> ID：14924063
> 
> 赞同：7
> 
> 时间：2013-02-17T17:46:29.627
> 
> 标签：android, linux, cordova, ubuntu-12.04

在 Phonegap.com，[Android 入门？页面](http://docs.phonegap.com/en/2.4.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android)有以下部分：

*   3A。**在Mac OS**上设置 PATH 环境变量
***   3B。**在Windows**上设置 PATH 环境变量**

 ****但**没有适用于 Linux 的部分。为什么 ？如果在 Linux (Ubuntu) 上我该怎么办？**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-17T17:58:32.447

我自己在 linux 上使用 phonegap，因为我已经通过 Eclipse（Linux 的 Eclipse JUNO）安装了 android SDK，为了便于访问，我使用了 Eclipse 的 applaud 插件。

安装步骤：

1.  从“软件中心”或 eclipse 的网站下载 eclipse。

2.  Android 开发者网站 ( [http://developer.android.com/sdk/installing/installing-adt.html](http://developer.android.com/sdk/installing/installing-adt.html) )上给出的 Android SDK 使用说明

3.  Applaud 插件（可选）：[http](http://www.mobiledevelopersolutions.com/home/start) ://www.mobiledevelopersolutions.com/home/start该站点包含安装 Android SDK 和 applaud 插件的分步过程。

路径环境变量

在 Linux 上，PATH 环境变量可以在 ~/.bashrc ~/.bash_profile 文件中定义。如果您有这些文件中的任何一个，请使用 gedit、vi 或 Emacs 等文本编辑器打开文件并查找导出 PATH 变量的行。如果找到这样的行，请对其进行编辑以将工具目录的完整路径添加到路径中。如果没有这样的行，您可以添加这样的行：

export PATH=${PATH}:your_sdk_dir/tools 将完整路径替换为

your_sdk_dir。

如需更多帮助，请参阅

[http://fyi.oreilly.com/2009/02/setting-up-your-android-develo.html](http://fyi.oreilly.com/2009/02/setting-up-your-android-develo.html)****

# java - Android，创建引用类数组

> ID：14924064
> 
> 赞同：2
> 
> 时间：2013-02-17T17:46:35.290
> 
> 标签：java, android, arrays, nullpointerexception

我慢慢变得疯狂......试图定义一个非常简单的类数组来保存其他引用类的实例。但是我一直收到空指针错误。我错了什么？对于任何帮助，我都非常感谢！

```
//-------------------------
// main activity
//-------------------------
package bangkokguy.android.fromscratch;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class MainActivity extends Activity {
  @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Palya kaki = new Palya();
}

@Override
  public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
  }
}
//-------------------------
// class Palya
//-------------------------
package bangkokguy.android.fromscratch;

public class Palya {
  public Kocka sok_kocka [];
  public Palya() {
    sok_kocka = new Kocka[10];
    <b>sok_kocka [1].letter = ' '; /*!!! null pointer here */</b>
  }
}
//-------------------------
// class Kocka
//-------------------------
package bangkokguy.android.fromscratch;

public class Kocka /*implements _NewLetter, _IsFree*/ {
  public char letter;
  static final char c_empty = ' ';
  public Kocka () {letter = c_empty;}
  public Kocka (char letterke) {letter = letterke;}
  public void _NewLetter (char letterke) {letter = letterke;}
  public boolean _IsFree () {return letter == c_empty;}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T17:49:22.320

制作数组是不够的，您还必须为每个索引提供一些内容。否则，数组中的每个索引都将适用`null`于 Object 数组。例如，在创建数组后将某些内容分配给索引 0：

```
sok_kocka = new Kocka[10]; 
sok_kocka [0] = new Kocka(); 
```

如果要避免 NPE，则必须对数组中的所有索引执行此操作。还要记住数组索引*从 开始*，`0`而***不是*** `1`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T17:51:35.743

`sok_kocka = new Kocka[10];`创建一个大小为 10 的空数组，可以容纳“Kocka”类型的对象。然而，这并不意味着数组中有任何项目 - 您必须手动分配这些项目。

# c++ - 如何删除数组 C++？

> ID：14924066
> 
> 赞同：0
> 
> 时间：2013-02-17T17:46:42.267
> 
> 标签：c++, arrays

如果我有一个结构：

```
typedef struct {
  unsigned char data[HEX_FLASH_BUFFER];
  bool isLoad;
  unsigned int length;
} s_hexFLASH;

typedef struct {
  s_hexFLASH flash;
} s_hexFile;

s_hexFile *hex = new s_hexFile; 
```

如何删除整个结构？因为当 a 做了这样的事情时：

```
delete[] hex->flash.data; 
```

在此之后我仍然能够读取数据：

```
cout << hex->flash.data[0] << endl; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T17:48:55.883

`unsigned char data[HEX_FLASH_BUFFER];`定义了一个具有自动存储时长的固定长度数组，这意味着当结构对象被释放时，它会被自动释放。

换句话说：你没有通过调用分配它，`new[]`所以没有理由调用`delete[]`它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-17T17:49:02.410

您不需要 delete `data`，因为它首先不是动态分配的。`delete`与`new`. 所以打电话`delete hex;`

综上所述，在现代 C++ 中，您基本上不会`delete`手动使用关键字。您使用智能指针`shared_ptr`并`unique_ptr`管理动态分配的内存。但更常见的是仅使用本地（自动）变量。

另请注意：`typedef struct { ... } name;`应该只是`struct name {...};`. 前者是陈旧的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T17:51:44.990

`delete`（和`delete[]`）简单地释放动态分配的内存（并为非 POD 类型运行析构函数，但这现在并不重要）。

`data`这里有自动存储期限。不仅`delete[]`在这里不起作用，它还会导致未定义的行为。如果您尝试进行`delete`非动态分配的内存，一个好的编译器会警告您。

即使内存不再标记为“正在使用”，您仍然可以访问它，但这会导致未定义的行为。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T17:50:04.493

```
delete hex; 
```

将删除分配给十六进制结构的内存

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-17T18:36:37.437

成员数据没有*自动*存储期限。它具有它作为非静态成员的类所具有的任何存储持续时间。

# c++ - static_cast 如何将 int 转换为 char 但不能 reinterpret_cast？

> ID：14924067
> 
> 赞同：8
> 
> 时间：2013-02-17T17:46:51.013
> 
> 标签：c++, type-conversion

我不确定之前是否有人问过，但我相信一定是这样。考虑问题开始的简单行：

```
int a ;
char b = reinterpret_cast<char> (a); 
```

我理解`reinterpret_cast`将 x 类型的位模式解释为 y 类型，因为它不应该由于大小不匹配而工作，实际上它没有。

现在考虑另一个代码：

```
int a ;
char b = static_cast<char> (a); 
```

这行得通！. 现在我的问题是它如何工作？我的意思是编译器会砍掉这些位吗？. 我很确定`sizeof(char) < sizeof(int)`。如果是这样，`reinterpret_cast`也应该使用相同的技术吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-17T17:51:22.013

`int`从到有一个明确定义的转换`char`；就是`static_cast`这样。事实上，你不需要演员表。你可以在这里使用一个作业。另一方面，`reinterpret_cast`说假装一种类型的对象中的位代表另一种类型的对象；对于某些类型可以（或多或少），但是没有明智的方法可以假装 int 中的位可以在不应用转换的情况下用作 char 中的位，并且`reinterpret_cast`不这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T17:59:26.737

static_cast 可以强制发生定义的转换，也可以反转定义的转换（添加或删除 const/volatile 除外）。你认为 reinterpret_cast 是一些可以做任何事情的超级演员。事实并非如此。它有一组定义的转换。

它可以将一种类型的指针转​​换为另一种类型的指针（只要保留 const/volatile）。对于引用，它同样可以这样做。它可以将指针转换为整数类型，反之亦然。

除此之外，它什么也不做，而且你的程序格式不正确。

# javascript - Sec-WebSocket-Accept 与 KinectJS 不匹配

> ID：14924079
> 
> 赞同：0
> 
> 时间：2013-02-17T17:48:12.257
> 
> 标签：javascript, websocket, kinect

我正在尝试使用*KinectJS*，但是当我使用模式将远程地址发送到演示时，出现以下错误：

```
Sec-WebSocket-Accept mismatch,=
INVALID SOCKET 
```

应用程序无法通过WebSocket建立连接，似乎与`KinectSocketServer`库提供的Kinect服务器有关，特别是base64请求头可能是错误的...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T08:52:36.830

根据所遵循的 WebSocket 草案版本，至少有两种 WebSocket 握手协议。KinectJS 可能使用的是较旧的实现。

有关要使用的正确握手协议的详细信息，请参阅[最新的官方 WebSocket 草案](https://datatracker.ietf.org/doc/html/draft-ietf-hybi-thewebsocketprotocol-17)。

# javascript - CKEDITOR 4.0 动态分离工具栏

> ID：14924083
> 
> 赞同：1
> 
> 时间：2013-02-17T17:48:29.653
> 
> 标签：javascript, jquery, ckeditor, toolbar

我试图弄清楚如何创建一个 ckeditor 实例，并将工具栏附加到与我正在创建实例的 DIV 分开的 DIV 上。我在配置数组中看到您可以设置 config.sharedSpaces = { top: 'divid' } （至少在旧版本中可以），但我不能在配置页面上这样做，它需要在页面上完成我正在创建实例。有谁知道如何做到这一点？

这是我创建实例的方式：

```
CKEDITOR.replace( 'editor', {
        toolbarGroups: [
            { name: 'document', groups: [ 'mode', 'document', 'doctools' ] },
            { name: 'clipboard',   groups: [ 'clipboard', 'undo' ] },
            { name: 'basicstyles', groups: [ 'basicstyles', 'cleanup' ] },
            { name: 'colors' },
            { name: 'styles'},
            { name: 'paragraph', groups: [ 'list', 'align' ], items: [ 'NumberedList', 'BulletedList', '-', 'Outdent', 'Indent', '-', 'Blockquote' ] },
            { items: [ 'Image', 'Table', 'HorizontalRule', 'SpecialChar' ] },
            { name: 'links' },
            { name: 'editing', groups: [ 'find', 'selection', 'spellchecker' ] },
            { name: 'tools'}
        ]
    }); 
```

是的，我知道我可以使用 clone()，但我希望有一个更干净的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-20T13:01:45.170

对于 CKEditor 4.1+，您可以使用可选的[共享空间](http://ckeditor.com/addon/sharedspace)插件（需要[添加到您的 CKEditor 构建中](http://docs.ckeditor.com/#!/guide/dev_plugins)）。

```
<div id="top">
    <!-- This div will handle all toolbars. -->
</div>

<div>
    <textarea id="editor1" name="editor1">My editor content</textarea>
</div>

<script>
    CKEDITOR.replace( 'editor1', {
        // Configure CKEditor to use the Shared Space plugin.
        extraPlugins: 'sharedspace',
        // The Resize plugin does not make sense in this context.
        removePlugins: 'resize',
        sharedSpaces: {
            // Configure the editor instance to place the toolbar in the div id='top'.
            top: 'top'
        }
    } );
</script> 
```

请参阅[“共享工具栏和底部栏”文档](http://docs.ckeditor.com/#!/guide/dev_sharedspace)，其中包含代码示例和带有源代码的[工作演示](http://sdk.ckeditor.com/samples/sharedspace.html)，以供复制和下载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-12T16:21:15.000

在初始化编辑器之前，请写下：

```
<script>
CKEDITOR.config.sharedSpaces = {
    'top' : 'myToolbar',
    };
</script> 
```

如果 sharedspaces 插件不可用，请从[http://ckeditor.com/addon/sharedspace下载](http://ckeditor.com/addon/sharedspace)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T20:45:36.210

共享空间功能在 CKEditor 4.0 中不可用。它将很快在[CKEditor 4.1](https://dev.ckeditor.com/query?group=status&milestone=CKEditor+4.1)中重新引入- 请参阅[票证](https://dev.ckeditor.com/ticket/9387)（它已经合并到[major](https://github.com/ckeditor/ckeditor-dev/tree/major)）。

# python - 如何在 XCode 4.6 中配置 Python？

> ID：14924086
> 
> 赞同：2
> 
> 时间：2013-02-17T17:48:35.743
> 
> 标签：python, xcode, configuration, installation

我真的尝试寻找解决方案，但找不到简单的方法来做到这一点。

如何为**Python 2.7配置****XCode 4.6**以便我可以编写代码并通过它运行模拟？

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T19:05:53.877

[https://vandadnp.wordpress.com/2012/07/05/building-and-running-python-scripts-with-xcode-4-x/](https://vandadnp.wordpress.com/2012/07/05/building-and-running-python-scripts-with-xcode-4-x/)

不过，我在让自定义工作目录选项实际工作时遇到了一些麻烦。**

# ruby-on-rails - Rails Ajax Jquery Delete 后提交 Post 请求

> ID：14924091
> 
> 赞同：12
> 
> 时间：2013-02-17T17:48:47.897
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3, jquery

我正在尝试使用 Ajax 删除我的 Rails 模型的一个实例。

它发生在单击按钮时，我的代码如下所示：

```
$("#button").click(function(){ 
    $.ajax({
        type: "POST",
        url: "/slot_allocations/" + slotallocation_id,
        dataType: "json",
        data: {"_method":"delete"},
        complete: function(){
            $( "#SlotAllocationForm" ).dialog( "close" );
            alert("Deleted successfully");
        }
    });
}); 
```

我能够成功删除它，但是该`delete`方法始终会跟随`post`服务器请求以使用现有数据创建新模型。这些是对服务器的请求。

```
1\. POST http://localhost:3000/slot_allocations/1009 [HTTP/1.1 204 No Content  57ms]    
2\. POST http://localhost:3000/slot_allocations [HTTP/1.1 302 Found  111ms]
3\. GET http://localhost:3000/slot_allocations/1010 [HTTP/1.1 200 OK  185ms] 
```

`#1`单击我的按钮时发生。但是，我不太清楚为什么`#2`会`#3`发生。

视图中有两个按钮：

```
<button id="button">Delete</button>
<div class="actions"><%= f.submit %></div> 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-17T17:58:19.243

假设您的按钮在表单内，单击它可能会提交该表单，除了触发 ajax 请求。

您要做的是阻止单击按钮的默认操作，即提交表单。

`function()`将参数更改为`function(event)`，然后添加`event.preventDefault()`调用：

```
$("#button").click(function(event){ 
    $.ajax({
        type: "POST",
        url: "/slot_allocations/" + slotallocation_id,
        dataType: "json",
        data: {"_method":"delete"},
        complete: function(){
            $( "#SlotAllocationForm" ).dialog( "close" );
            alert("Deleted successfully");
        }
    });
    event.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-11-07T16:10:01.117

您可以使用：

```
type: "DELETE" 
```

代替：

```
type: "POST" 
```

并删除

```
data: {"_method":"delete"} 
```

# iphone - 从 iPhone 向单独的服务提交位置信息？

> ID：14924098
> 
> 赞同：0
> 
> 时间：2013-02-17T17:49:34.210
> 
> 标签：iphone

尽管应用程序在后台运行或作为后台服务运行，是否可以将有关 iPhone 位置的信息发送到单独的服务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T19:05:07.020

您需要在 CLLocationManagerDelegate 方法中调用 webservice，请参见下面的示例

```
- (void)locationManager:(CLLocationManager *)manager
didUpdateToLocation:(CLLocation *)newLocation
       fromLocation:(CLLocation *)oldLocation
{
    CLLocationCoordinate2D coordinate = [newLocation coordinate];
    CLLocationCoordinate2D oldCoordinate = [oldLocation coordinate];    
    CLLocation *newlocation = [[CLLocation alloc] initWithLatitude:coordinate.latitude longitude:coordinate.longitude];
    CLLocation *oldlocation = [[CLLocation alloc] initWithLatitude:oldCoordinate.latitude longitude:oldCoordinate.longitude];

    latitude =coordinate.latitude; 
    longitude =coordinate.longitude;

    CLLocationDistance distDifference = [newlocation distanceFromLocation:oldlocation];
    int distance = distDifference;
    if (distance>0.5) {
    if (isInternetReachable==TRUE) {
        [self callWebserviceSetlocationInBackground:newLocation];
        }
    }    
    [newlocation release];
    [oldlocation release];   
}

    Also you need to set "Required background modes" Flag to "App registers for location updates" to use core location updated in background.
  http://i.stack.imgur.com/WtcCm.png
  This may help you. 
```

只需通过以下方法更改调用 Web 服务代码的方法。我希望它会起作用：-

```
 -(void) callWebserviceSetlocationInBackground:(CLLocation *)location
    {
        // REMEMBER. We are running in the background if this is being executed.
        // We can't assume normal network access.
        // bgTask is defined as an instance variable of type UIBackgroundTaskIdentifier

        // Note that the expiration handler block simply ends the task. It is important that we always
        // end tasks that we have started.

    UIApplication *app = [UIApplication sharedApplication];

   UIBackgroundTaskIdentifier bgTask = [app beginBackgroundTaskWithExpirationHandler:^{ [app endBackgroundTask:bgTask];}];

   NSLog(@"call web service in background lati  = %f  and long  =%f",location.coordinate.latitude,location.coordinate.longitude);

   [app endBackgroundTask:bgTask];
   bgTask = UIBackgroundTaskInvalid;
} 
```

谢谢。

# ruby-on-rails - $ rake db:create rake 中止！无法加载这样的文件——mysql2

> ID：14924099
> 
> 赞同：1
> 
> 时间：2013-02-17T17:49:37.343
> 
> 标签：ruby-on-rails

在将工作应用程序从 sqlite 切换到 postgres 后，我在 rails 应用程序上使用 postgres。当我运行 rake 时，我得到错误 cannot load such file -- mysql2\. 我从来没有在这个应用程序中使用过 mysql。有任何想法吗？

**编辑：**

我的 gemfile 不包括 mysql 并且数据库适配器是 postgresql

这是堆栈跟踪：

```
c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/thinking-sphinx-3.0.1/lib/thinking_sphinx.rb:5:in `require'
c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/thinking-sphinx-3.0.1/lib/thinking_sphinx.rb:5:in `<top (required)>'
c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/thinking-sphinx-3.0.1/lib/thinking-sphinx.rb:1:in `require'
c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/thinking-sphinx-3.0.1/lib/thinking-sphinx.rb:1:in `<top (required)>'
c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22/lib/bundler/runtime.rb:68:in `require'
c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22/lib/bundler/runtime.rb:66:in `each'
c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22/lib/bundler/runtime.rb:66:in `block in require'
c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22/lib/bundler/runtime.rb:55:in `each'
c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22/lib/bundler/runtime.rb:55:in `require'
c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22/lib/bundler.rb:122:in `require'
C:/Users/Rotimi/My Documents/Aptana Studio 3 Workspace/Book_Search/book_search/config/application.rb:13:in `<top (required)>'
c:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
c:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
C:/Users/Rotimi/My Documents/Aptana Studio 3 Workspace/Book_Search/book_search/Rakefile:5:in `<top (required)>'
c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/rake_module.rb:25:in `load'
c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/rake_module.rb:25:in `load_rakefile'
c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:583:in `raw_load_rakefile'
c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:89:in `block in load_rakefile'
c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:160:in `standard_exception_handling'
c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:88:in `load_rakefile'
c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:72:in `block in run'
c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:160:in `standard_exception_handling'
c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:70:in `run'
c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-10.0.3/bin/rake:33:in `<top (required)>'
c:/RailsInstaller/Ruby1.9.3/bin/rake:19:in `load'
c:/RailsInstaller/Ruby1.9.3/bin/rake:19:in `<main>' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T19:06:13.537

我认为您的问题与思考狮身人面像有关。我假设您已经使用以下选项构建了它：

./configure --prefix=/usr/local --with-pgsql --without-mysql

Also, note that mysql2 is a requirement for thinking-sphinx. See here:

[https://github.com/pat/thinking-sphinx](https://github.com/pat/thinking-sphinx)

in particular under installation:

> It’s a gem, so install it like you would any other gem. You will also need to specify the Mysql2 gem as well (this is not an inbuilt dependency because JRuby, when supported, will need something different):
> 
> gem 'mysql2', '0.3.12b4' gem 'thinking-sphinx', '3.0.0' The mysql2 gem is required for connecting to Sphinx, so please include it even when you’re using PostgreSQL for your database.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T17:51:46.727

从 Gemfile 中删除 mysql2。尝试获取完整的堆栈跟踪，以便查看谁需要 mysql2。在此处发布堆栈跟踪。在 database.yml 中指定 postgres 作为您的适配器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T17:54:55.837

如果您使用捆绑器或从 environment.rb 中删除 gem mysql2，请从 gemfile 中删除

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-15T08:05:40.187

Remember to include gem 'mysql2' BEFORE 'flying-sphinx' and 'thinking-sphinx' gems

# javascript - 音译脚本 - 奇怪的错误

> ID：14924100
> 
> 赞同：0
> 
> 时间：2013-02-17T17:49:39.950
> 
> 标签：javascript, html, transliteration

该 HTML 脚本会音译输入其中的每个单词、短语或字母。

本质上，它是一个非官方的翻译器。

使用 jsFiddle 测试代码时，出现以下错误：

> {"error": "请使用 POST 请求"}

我将文件正确保存为 .html，并使用 Google Chrome 打开它。

一切都是这样工作的；我能够音译文本，但是当我输入太多要音译的文本时，框内的文本将被省略，代码（页面）本质上会“刷新”自身。

但是，此代码*确实可以*翻译小的短语和单词。

要音译的字符数量是否有限制？

我不确定错误表示什么，但我确定上述 jsFiddle 错误与这个错误相对应。

这让我很困惑。

音译代码如下：

```
<html>
<head>
    <title>English - Imzreth Translator</title>
    <script>
        validator = "aábcdeéfghjiíklmnoöpqrstuüvwxyzAÁBCDEÉFGHIJKLMNOÖPQRSTUÜVWXYZ’";
        vowels = "aáeéiíoöuüyAÁEÉIÍOÖUÜY’";

        aemap = new Array();
        aemap["au"] = "a";
        aemap["a"] = "a";
        aemap["l"] = "b";
        aemap["b"] = "b";
        aemap["c"] = "c";
        aemap["ku"] = "d";
        aemap["d"] = "d";
        aemap["u"] = "e";
        aemap["u"] = "e";
        aemap["f"] = "f";
        aemap["gé"] = "g";
        aemap["g"] = "g";
        aemap["h"] = "h";
        aemap["o"] = "i";
        aemap["i"] = "i";
        aemap["t"] = "j";
        aemap["j"] = "j";
        aemap["ré"] = "k";
        aemap["k"] = "k";
        aemap["l"] = "l";
        aemap["m"] = "m";
        aemap["q"] = "n";
        aemap["n"] = "n";
        aemap["i"] = "o";
        aemap["o"] = "o";
        aemap["ph"] = "p";
        aemap["p"] = "p";
        aemap["q"] = "q";
        aemap["r"] = "r";
        aemap["s"] = "s";
        aemap["s"] = "t";
        aemap["t"] = "t";
        aemap["e"] = "u";
        aemap["u"] = "u";
        aemap["z"] = "v";
        aemap["v"] = "v";
        aemap["w"] = "w";
        aemap["l"] = "x";
        aemap["x"] = "x";
        aemap["y"] = "y";
        aemap["á"] = "y";
        aemap["z"] = "z";

        eamap = new Array();
        eamap["a"] = "au";
        eamap["b"] = "l";
        eamap["c"] = "c";
        eamap["d"] = "ku";
        eamap["e"] = "u";
        eamap["f"] = "f";
        eamap["g"] = "gé";
        eamap["h"] = "h";
        eamap["i"] = "o";
        eamap["j"] = "t";
        eamap["k"] = "ré";
        eamap["l"] = "l";
        eamap["m"] = "m";
        eamap["n"] = "n";
        eamap["o"] = "i";
        eamap["p"] = "ph";
        eamap["q"] = "q";
        eamap["r"] = "r";
        eamap["s"] = "s";
        eamap["t"] = "s";
        eamap["u"] = "e";
        eamap["v"] = "z";
        eamap["w"] = "w";
        eamap["x"] = "l";
        eamap["y"] = "á";
        eamap["z"] = "z";

        eamap["A"] = "A";
        eamap["B"] = "B";
        eamap["C"] = "C";
        eamap["D"] = "D";
        eamap["E"] = "E";
        eamap["F"] = "F";
        eamap["G"] = "G";
        eamap["H"] = "H";
        eamap["I"] = "I";
        eamap["J"] = "J";
        eamap["K"] = "K";
        eamap["L"] = "L";
        eamap["M"] = "M";
        eamap["N"] = "N";
        eamap["O"] = "O";
        eamap["P"] = "P";
        eamap["Q"] = "Q";
        eamap["R"] = "R";
        eamap["S"] = "S";
        eamap["T"] = "T";
        eamap["U"] = "U";
        eamap["V"] = "V";
        eamap["W"] = "W";
        eamap["X"] = "X";
        eamap["Y"] = "Y";
        eamap["Z"] = "Z";
        promap = new Array();
        promap["a"] = "aah";
        promap["b"] = "buh";
        promap["c"] = "se";
        promap["d"] = "duh";
        promap["e"] = "eh";
        promap["f"] = "f";
        promap["g"] = "guh";
        promap["h"] = "h’";
        promap["i"] = "íh";
        promap["j"] = "juh";
        promap["k"] = "kuh";
        promap["l"] = "l’";
        promap["m"] = "m";
        promap["n"] = "n";
        promap["o"] = "öh";
        promap["p"] = "puh";
        promap["q"] = "quah";
        promap["r"] = "ra";
        promap["s"] = "s";
        promap["t"] = "t’uh";
        promap["u"] = "ooh";
        promap["v"] = "vuh";
        promap["w"] = "wuh";
        promap["x"] = "k’ss";
        promap["y"] = "ya";
        promap["z"] = "z";
        promap["ph"] = "f’";
        promap["au"] = "aw";
        promap["gé"] = "zhé";
        promap["á"] = "ahh";
        promap["ku"] = "kü";

        promap["A"] = "Á";
        promap["B"] = "B’";
        promap["C"] = "CÉ";
        promap["D"] = "D’";
        promap["E"] = "EH";
        promap["F"] = "F’";
        promap["G"] = "G’";
        promap["H"] = "H’";
        promap["I"] = "Í’";
        promap["J"] = "J’";
        promap["K"] = "K’";
        promap["L"] = "L’";
        promap["M"] = "M";
        promap["N"] = "N";
        promap["O"] = "Ö’";
        promap["P"] = "P’";
        promap["Q"] = "Q’";
        promap["R"] = "RA";
        promap["S"] = "SEE";
        promap["T"] = "T’UH";
        promap["U"] = "OOH";
        promap["V"] = "VUH";
        promap["W"] = "WUH";
        promap["X"] = "K’SS";
        promap["Y"] = "YA";
        promap["Z"] = "Z";
        promap["PH"] = "F";
        promap["AU"] = "AW";
        promap["KU"] = "KÜ";

        function transme() {
            if (document.theform.picker[0].checked) { // english to al bhed 
                builder = "";
                toggler = 0;

                for (var i = 0; i < document.theform.stimulus.value.length; i++) {
                    if (document.theform.stimulus.value.charAt(i) == "[") {
                        toggler = 1;
                    };
                    if (document.theform.stimulus.value.charAt(i) == "]") {
                        toggler = 0;
                    };

                    if (toggler == 1) {
                        builder = builder + document.theform.stimulus.value.charAt(i);
                    } else {
                        if (validator.indexOf(document.theform.stimulus.value.charAt(i)) == -1) {
                            builder = builder + document.theform.stimulus.value.charAt(i);
                        } else {
                            builder = builder + eamap[document.theform.stimulus.value.charAt(i)];
                        };
                    };
                };

                builder2 = "";
                toggler = 0;
                prev = 0;

                for (var i = 0; i < document.theform.stimulus.value.length; i++) {
                    if (document.theform.stimulus.value.charAt(i) == "[") {
                        toggler = 1;
                    };
                    if (document.theform.stimulus.value.charAt(i) == "]") {
                        toggler = 0;
                    };

                    if (toggler == 1) {
                        builder2 = builder2 + document.theform.stimulus.value.charAt(i);
                    } else {
                        if (validator.indexOf(document.theform.stimulus.value.charAt(i)) == -1) {
                            builder2 = builder2 + document.theform.stimulus.value.charAt(i);
                            prev = 0;
                        } else {
                            temp = promap[eamap[document.theform.stimulus.value.charAt(i)]];
                            if (prev == 1) {
                                if ((vowels.indexOf(temp.charAt(0)) == -1) && (temp.length != 1)) {
                                    builder2 = builder2 + "-";
                                };
                            };
                            builder2 = builder2 + temp;
                            prev = 1;
                        };
                    };
                };
                document.theform.response.value = builder + "\n\nPronounced: \"" + builder2 + "\"";

            } else { //al bhed to english
                builder = "";
                toggler = 0;

                for (var i = 0; i < document.theform.stimulus.value.length; i++) {
                    if (document.theform.stimulus.value.charAt(i) == "[") {
                        toggler = 1;
                    };
                    if (document.theform.stimulus.value.charAt(i) == "]") {
                        toggler = 0;
                    };

                    if (toggler == 1) {
                        builder = builder + document.theform.stimulus.value.charAt(i);
                    } else {
                        if (validator.indexOf(document.theform.stimulus.value.charAt(i)) == -1) {
                            builder = builder + document.theform.stimulus.value.charAt(i);
                        } else {
                            builder = builder + aemap[document.theform.stimulus.value.charAt(i)];
                        };
                    };
                };
                document.theform.response.value = builder;
            };
            return false;
        };
    </script>
</head>

<body>
    <form method="get" name="theform" action="" onSubmit="return transme()">
        <p><b><h2>English to Custom Language Translator (With Phonetics)</h2></b>

            <p><b>Translate Text:</b>

                <br>    <u>(Excluded text should be within brackets).</u>

                <br>
                <textarea name="stimulus" cols="60" rows="6" wrap="VIRTUAL"></textarea>
            </p>
            <p><b>Translated Text:</b>

                <br>
                <textarea name="response" cols="60" rows="6" wrap="VIRTUAL"></textarea>
            </p>
            <p><b>Translation Options:</b>

                <br>
                <input name="picker" type="radio" value="0" checked>English to Custom Language (With Phonetics)
                <br>
                <input name="picker" type="radio" value="1">Custom Language to English (With Rough Phonetics)</p>
            <p>
                <input type="submit" value="Transl ate / Traunslausu!">
            </p>
    </form>
</body>

</html> 
```

我很乐意在修复代码以确保完整功能方面获得帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T17:55:24.427

删除`onload`包装器（jsfiddle 页面的左上角），您的代码可以正常工作。

[**小提琴**](http://jsfiddle.net/fnx3j/)

使用`onload`包装器，您的函数无法在全局范围内访问，因此您的提交处理程序`onSubmit="return transme()"`会导致“transme is not defined”错误，并且由于该函数从未被调用，因此它永远不会到达`return false`会阻止表单提交的地方。

# jquery - ScrollView 使 windows phone 中的 phonegap 应用程序崩溃

> ID：14924101
> 
> 赞同：1
> 
> 时间：2013-02-17T17:49:53.743
> 
> 标签：jquery, windows-phone-7, jquery-mobile

我有一个问题，我在我的 phonegap 应用程序中使用 jquery 移动滚动视图，它在 iOS 中运行良好

& Android 和 BB 操作系统，但在 windows phone phonegap 中它会导致应用程序崩溃，在浏览器中它不会滚动但存在滚动条

任何帮助？！

# javascript - DOM加载后添加的复选框上的复选框单击事件

> ID：14924104
> 
> 赞同：1
> 
> 时间：2013-02-17T17:49:59.300
> 
> 标签：javascript, jquery, events

我正在尝试在一系列复选框上触发一个事件。问题是，我相信，只是因为我在第一次加载 DOM 之后添加了这些复选框以及 JavaScript 事件处理程序，所以在单击这些新复选框时，事件处理程序无法触发它们。

这是我的代码：

```
//this runs after the initial load of the page.
var fillSeries = function() {
    $.getJSON('api/series', function(data) {
    var result = '';
    for(var i = 0; i < data.length; i++) {

        //the first result is structure.
        if(i == 0)
            continue;

        var tablerow = '<tr><td><input type="checkbox" class="showarray" value="'+ data[i].id +'" /> ' + data[i].title + '</td></tr>';
        result += tablerow;
    }
    $('#series-table').append(result);
    // remove the loading icon and text
    $('#loading').remove();
});
}
// checkbox onclick listener
$('.showarray').click(function() {
    console.log($(this).val());
}); 
```

如何使事件触发？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T18:00:41.770

尝试在您的回调中附加事件侦听器，在您附加新内容之后立即：
所以代替 this: `$('#series-table').append(result);`，尝试：

```
$('#series-table').append(result).find('.showarray').click(function(e) {
    console.log($(this).val());
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T17:58:38.213

如果问题是页面加载后元素被动态添加到 DOM 的结果是正确的，请尝试使用：

```
$(document).on('click', '.showarray', function() {
    console.log($(this).val());
}); 
```

这将处理类名为 showarray 的所有元素的点击事件，即使在页面加载后动态添加也是如此。

编辑：看起来你已经开始工作了，但为了完整起见，我修正了我的答案。.on() 需要与相关元素的父元素相关联，分配给处理程序的实际选择器是第二个参数。

# ios - 在 iOS 应用程序中使用 viewForHeaderInSection 方法

> ID：14924106
> 
> 赞同：2
> 
> 时间：2013-02-17T17:50:07.037
> 
> 标签：ios, uitableview, uiview, uinavigationcontroller

我有一个包含多个段的分组 UITableView。我想在页脚的每个段下方有一个按钮，当按下它时会将用户带到不同的视图控制器（带有一些选项 - 要在目标 VC 中加载的数据模型）。有问题的两个 ViewController 由 UINavigationController 管理。

我不确定实现这一目标的最佳方法是什么......

我试过了：

1.  在 IB 中创建每个 UIView（带有按钮）并尝试将视图添加到那里的节页脚。我不认为这是可能的。

2.  纯粹在代码中创建 UIView，然后将它们添加到每个部分页脚。这工作正常，但是这里的问题是我无法在 IB 中连接我的 segue 和 segue 标识符。我正在使用 prepareForSegue 方法将正确的数据模型发送到目标 VC（取决于按下哪个段页脚按钮），所以我需要这个。这里有替代方案吗，我可以通过其他方式触发发送我的数据模型吗？

谢谢，詹姆斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T18:23:34.120

# 1 是可能的。

[将您的客户视图从笔尖中拉出，就像您从笔尖加载](http://answers.oreilly.com/topic/2578-loading-a-nib-file-programmatically-objective-c/)任何其他自定义视图一样；然后使用添加它：

```
- (UITableViewHeaderFooterView *)headerViewForSection:(NSInteger)section 
```

**编辑**对不起，并不是暗示#2 也不可行。

```
- (id)instantiateViewControllerWithIdentifier:(NSString *)identifier

// like this:
UIViewController * vc = [[self storyboard] instantiateViewControllerWithIdentifier:@"TheNewView"]
[self.navigationController pushViewController:vc animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T18:40:48.227

使用选项 2，从视图控制器而不是从特定视图或按钮创建您的 segue。给它一个有意义的标识符，然后在您的按钮的操作方法中，调用`performSegueWithIdentifier:sender:`您的视图控制器。您可以传入任何您喜欢的对象作为视图控制器，包括索引路径或保存部分标识符的 NSNumber，因此您可以在 prepareForSegue 中访问它并使用数据模型的适当部分。

# android - 三星 Galaxy S3 上的通话记录删除

> ID：14924109
> 
> 赞同：2
> 
> 时间：2013-02-17T17:50:48.553
> 
> 标签：android

我想尝试以编程方式删除手机中的通话记录，但是从我尝试过的所有方法（通过谷歌和这里的各种问题查看），我无法删除它们。即使是已经在市场上用于备份我的信息以便我可以测试我的代码的应用程序也不起作用。

尝试以下没有任何作用，以及循环记录：

```
cursor.delete(CallLog.Calls.CONTENT_URI, null, null); 
```

所有的权限都在那里。有没有人可能有任何其他方法或知道为什么这在 Galaxy S3 上不起作用？

谢谢

# ios - 无法将对象添加到单例中的 nsmutable 数组

> ID：14924118
> 
> 赞同：1
> 
> 时间：2013-02-17T17:51:52.030
> 
> 标签：ios, ios6, nsmutablearray, singleton

相同的代码适用于 iOS 5，但不适用于 iOS 6。计数显示为 0。有什么想法吗？它应该说至少 1 作为计数，因为我已经验证 house.png 是一个有效的图像。

这是我的代码：

```
MyManager * myManager = [MyManager sharedInstance];
                NSString *pathOfImageFile = [[NSBundle mainBundle] pathForResource:@"house" ofType:@"png"];
                UIImage *myImage = [UIImage imageWithContentsOfFile:pathOfImageFile];

                UIImageView * tempImageView = [[UIImageView alloc] initWithImage:myImage];
                [myManager.assets addObject:tempImageView];

                NSLog(@"image count: %d", [myManager.assets count]); 
```

这是我的单身人士：

```
#import <Foundation/Foundation.h>
#import <MapKit/MapKit.h>

@interface MyManager : NSObject
{

    MyManager *_sharedObject;
    NSMutableArray * assets;

}

//Property Listing
@property(nonatomic,copy) NSString * postTitle;
@property(nonatomic,copy) NSString * postText;
@property(nonatomic,copy) NSString * postLink;
@property(nonatomic,copy) NSString * postCategory;
//assets
@property (nonatomic, strong) NSMutableArray * assets;

+ (id)sharedInstance;
- (void)reset;

@end

#import "MyManager.h"

@implementation MyManager

//Property Listing
@synthesize postTitle=_postTitle;
@synthesize postText=_postText;
@synthesize postLink=_postLink;
@synthesize postCategory=_postCategory;
@synthesize assets=_assets;

- (id)init
{
    self = [super init];
    if ( self )
    {
         assets = [[NSMutableArray alloc] init];
        NSLog(@"Singleton Initialized...");
    }
    return self;
}

+ (id)sharedInstance
{
    static dispatch_once_t pred = 0;
    __strong static id _sharedObject = nil;
    dispatch_once(&pred, ^{
        _sharedObject = [[self alloc] init]; // or some other init method
    });
    return _sharedObject;
}

- (void)reset
{

    self.postTitle =@"";
    self.postText=@"";
    self.postLink=@"";
    self.postCategory=@"";
    [self.assets removeAllObjects];
}

@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T18:04:05.807

您有与您的`assets`财产相关的额外 ivars。

您定义一个名为 的属性`assets`。然后（不必要地）合成指定生成的 ivar 应命名为 的属性`_assets`。

您还（不必要地）声明了一个名为`assets`.

在您的`init`方法中，您将数组分配给`assets`ivar。在您的`reset`方法中，您清除`assets`属性（使用`_assets`ivar）。

摆脱显式的`assets`ivar。摆脱`@synthesize`声明。这将为您留下一个自动生成的`_assets`.

更新您的代码以使用属性或`_assets`ivar。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T17:59:14.113

尝试：

```
 _assets = [[NSMutableArray alloc] init]; 
```

您在界面中将 sharedObject 定义为属性：`MyManager *_sharedObject;`

如果您总是通过`[MyManager sharedInstance];`该实例获取在该本地静态变量中保存已初始化实例的实例，则您不希望出现这种情况。

# php - Preg_replace 返回 1 美元的真实内容

> ID：14924119
> 
> 赞同：0
> 
> 时间：2013-02-17T17:52:00.877
> 
> 标签：php, regex, preg-replace

我在`preg_replace()`.

我这样使用它：

```
$pattern[] = "/\[test\](.*?)\[\/test\]/is";
$replace[] = $this->test('$1');

$content = preg_replace($pattern, $replace, $content); 
```

然后该函数`test()`打印出发送给它的值。但价值永远是公正的`$1`，而它应该是来自的内容`[test]...[/test]`。

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T17:59:26.233

如果您希望将匹配项替换为`$this->test`具有第一个子模式的相应匹配字符串的方法的返回值，则需要使用`preg_replace_callback`and 包装函数：

```
$pattern = "/\[test\](.*?)\[\/test\]/is";
$replace = function($match) use ($this) { return $this->test($match[1]); };
$content = preg_replace_callback($pattern, $replace, $content); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T17:57:37.673

`test()`永远不会收到 的值`$1`，它总是会得到文字字符串`"$1"`。当您这样做时`$this->test()`，您调用该`test()`函数，它接收您放在括号中的内容作为参数。

到`test()`执行时，正则表达式尚未计算。你必须这样做：

```
$pattern = "/\[test\](.*?)\[\/test\]/is";
$content = $this->test( preg_replace( $pattern, '$1', $content)); 
```

这将导致`test()`接收 的值`$1`。否则，您需要`preg_replace_callback()`：

```
$pattern[] = "/\[test\](.*?)\[\/test\]/is";
$content = preg_replace($pattern, function( $match) { 
    return $this->test( $match[1]); 
}, $content); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-17T17:54:49.267

单引号表示文字字符串。

所以`'$1'`会回来`$1`

while`"$1"`会将存储的正则表达式捕获的值解释`$1`为其值

# mongodb - mongodb中同一集合的联合

> ID：14924129
> 
> 赞同：5
> 
> 时间：2013-02-17T17:52:54.680
> 
> 标签：mongodb, mongodb-query

我需要最可行的方法来搜索具有以下结构的文档。

```
{ _id:"",
var1: number,
var2: number,
var3: number,
} 
```

在 sql 方式中，我需要的结果集是这三个的 UNION（n 条记录按 var1 排序，n 条记录按 var2 排序，n 条记录按 var3 排序）

使用 UNION 我希望删除重复项。

作为 mongodb 的新手，我无法找到为此类操作编写查询的正确方法，我相信在 mongodb 中它必须是可能的。

> 如果万一它不可能，您能否建议一个替代的 nosql 解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T02:32:35.537

与您要查找的内容最接近的 MongoDB 运算符是，但这与将两个单独的查询组合成一个结果的[SQL UNION](http://en.wikipedia.org/wiki/Set_operations_%28SQL%29#UNION_operator)[`$or`](http://docs.mongodb.org/manual/reference/operator/or/)并不完全相同。MongoDB 查询始终针对单个集合，但允许您拥有多个查询子句。`$or`

例如：

```
db.collection.find(
    // Find documents matching any of these values
    {$or:[
        {var1: 123},
        {var2: 456},
        {var3: 789}
    ]}
).sort(
    // Sort in ascending order
    {var1:1, var2:1, var3:1}
) 
```

由于您仅限于查询单个集合，因此已经在文档级别对结果进行了重复数据删除，并且如果指定了一个，所有结果将共享相同的排序顺序。

如果您想在 MongoDB 中模拟 UNION（或使用多个集合/查询的其他操作），则必须编写多个查询并在应用程序代码中合并结果集。

# jquery - 我在哪里可以获得 jquery 插件 SHA512

> ID：14924130
> 
> 赞同：0
> 
> 时间：2013-02-17T17:52:58.820
> 
> 标签：jquery, jquery-plugins, sha512

****我谷歌搜索没有结果？谁能帮我 ？****

****可能可以用 sha512 构建简单的 jquery 插件吗？** 我使用 sha512 示例搜索简单的工具 enycrypt jquery $.sha512Hex("test123"); 可能导致“daef4953b9783365cad6615223720506cc46c5167cd16ab500fa597aa08ff964eb24fb19687f34d7665f778fcb6c5358fc0a5b81e1662cf90f73a2671c53f991”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T17:59:39.570

寻找这个？ [http://sourceforge.net/projects/jssha/files/](http://sourceforge.net/projects/jssha/files/)

SO 问题：[JQuery、jssha 和 SHA512 - 如何调用函数](https://stackoverflow.com/questions/9544159/jquery-jssha-and-sha512-how-to-call-function)**

# php - 如何使用 simple_html_dom 获取和打印元标记中的属性

> ID：14924131
> 
> 赞同：0
> 
> 时间：2013-02-17T17:53:01.593
> 
> 标签：php, html, simple-html-dom

好吧，我在这里不知所措。我是编程新手，一直在谷歌上搜索，甚至在这里问过这个问题，但无济于事，所以我现在再试一次，因为我研究得更好了。

我需要从这行代码的“内容”属性中检索文本：

```
<meta property='og:title' content="title goes here" /> 
```

这是我到目前为止不起作用的代码：

```
//saves the URL as HTML
$movie_html = file_get_html($movie_url);

//finds the title within the HTML
$movie_title_meta = $movie_html->find("meta[name=og:title]");
$movie_title = $movie_title_meta->content;

//prints the score
var_dump($movie_title_meta); 
```

我希望该代码给我的是：

```
title goes here 
```

但相反，我得到一个 NULL 错误。我有一种感觉 var_dump() 实际上并不是我想要做的，但一个简单的 echo() 也会返回错误。我现在不知道该怎么做，所以任何帮助都将不胜感激。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T18:39:24.333

尝试使用 David Walsh 的 PHP Simple HTML DOM Parser ... [http://davidwalsh.name/php-notifications](http://davidwalsh.name/php-notifications)

# applescript - 使用 AppleScript 从 Evernote 导出附件

> ID：14924132
> 
> 赞同：1
> 
> 时间：2013-02-17T17:53:03.807
> 
> 标签：applescript, evernote

我在创建一个非常简单的 AppleScript 以从 Evernote 笔记中导出附件时遇到了重大问题。我已经多次使用以下代码，它似乎可以工作，但实际上它会默默地失败，即使事件日志显示正确的响应也是如此。

我听说 Evernote 的最新版本存在严重的 AppleScript 支持问题。如果有人是 Evernote 和 AppleScript 的“专家”，我也会非常感谢对我的脚本进行审查，以确保我不会忘记任何事情。

我正在使用 Mac OS X 10.8.2 和 Evernote 5.0.5 (400805) 的 Mac App Store 版本。

代码：

```
set ExportPath to "LegatusHD1:Users:me:Downloads:Test"
set theAttachments to {}
set selectedItems to {}

tell application "Evernote"
set selectedItems to selection
repeat with selectedItem in selectedItems
    set theAttachments to (attachments of selectedItem)
    repeat with theAttachment in theAttachments
        set theFilename to (ExportPath & ":" & theAttachment's filename)
        write theAttachment to theFilename
        set theFilename to ""
    end repeat
end repeat
end tell 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T03:36:42.580

Apple 最近为 AppStore 中的应用程序引入了沙盒。因此，根据您的 OSX 版本，这可能是它静默失败的原因——因为 Evernote 应用程序无法访问其自己的文件夹结构之外的文件系统。您可以尝试将导出路径设置为 Evernote 文件夹中的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-29T04:23:15.010

这个问题很老，但我只是在寻找我现在可以提供的答案时绊倒了它：

仅供参考，我正在运行：通过 App Store 安装的 OSX 10.9.1 (Mavericks) 和 Evernote 5.4.4。

我可以确认 Mustafa 是正确的，使用该应用程序的 App Store 版本只能写入沙箱中的文件 (/Users/{username}/Library/Containers/com.evernote.Evernote/)

# 简短的回答

从 Evernote 网站安装应用程序，或者如果您想使用 App Store 中的应用程序：

使用上述脚本将导出路径更改为沙箱内的内容，例如：

```
set ExportPath to "Users:{username}:Library:Containers:com.evernote.Evernote:Data:attachment_export" 
```

请记住先创建附件导出文件夹，然后将 {username} 替换为您的用户名

# 调试注意事项

不幸的是，当您尝试在沙箱之外编写时，applescript 编辑器不会显示任何错误。但是，您可以在 Console 应用程序中查看错误（在 Applications -> Utilities 中找到）。在控制台的搜索框（右上角）中输入“沙盒”，在窗口底部您将看到如下内容：

> 2014 年 1 月 29 日 10:22:29.426 沙盒 [310]: ([4433]) Evernote(4433) 拒绝文件写入创建 /Users/{用户名}/Desktop/Evernote 快照 20140128 134741.jpg

# playframework - 如何在具有自定义文件夹结构的播放框架中使用 requirejs

> ID：14924134
> 
> 赞同：5
> 
> 时间：2013-02-17T17:53:14.777
> 
> 标签：playframework, requirejs, playframework-2.1

我刚切换到玩框架 2.10 并且喜欢使用 RequireJS。不过，我确实有一个自定义文件夹结构（一直懒得写 javascript，所以它的 /js/ ;）。而 dist 然后我得到以下错误：

> 错误：错误：模块路径不存在：/tmp/build_udsbfo9u2iwl/target/scala-2.10/classes/public/javascripts/app.js 用于名为：app. 路径相对于：/tmp/build_udsbfo9u2iwl [info] RequireJS 优化完成。

所以 require 显然只在 javascripts 文件夹中查找。我想一定有某个地方配置了文件夹，但我找不到它。

那么，如何在 play framework 2.10 中配置 requireJs 以在优化时使用我的文件夹？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-19T17:35:55.743

在 Build.scala 中设置 requireJsFolder 值：

```
import sbt._
import Keys._
import play.Project._

object ApplicationBuild extends Build {

  val appName         = "play-2-1-features"
  val appVersion      = "1.0-SNAPSHOT"

  val appDependencies = Seq(
    jdbc,
    anorm,
    "junit" % "junit-dep" % "4.11" % "test"
  )

  val main = play.Project(appName, appVersion, appDependencies).settings(
    requireJs += "main.js"
    , requireJsFolder := "js" //changes location from javascripts to js
  )
} 
```

然后你可以在你的模板中使用它：

```
@helper.requireJs(core = routes.Assets.at("javascripts/require.js").url, module = routes.Assets.at("js/main").url) 
```

这是我的示例项目[https://github.com/schleichardt/play-2.1-features/tree/stackoverflow-question-14924134](https://github.com/schleichardt/play-2.1-features/tree/stackoverflow-question-14924134)（注意：它不在主分支中）

# node.js - 按数组长度排序，如果模型中没有填充

> ID：14924135
> 
> 赞同：0
> 
> 时间：2013-02-17T17:53:17.523
> 
> 标签：node.js, mongodb, mongoose

所以，我有两个猫鼬模型：

```
User: {
   name: String,
   ..........
   locations: []
}

Location: {
   title: String,
   .............
   owner: {
      type: Schema.Types.ObjectId,
      ref: 'User'
   }
} 
```

我在节点中的查找功能，对于用户是这样的：

```
api.find = function(filter, sort, skip, limit){
    var callback = arguments[arguments.length - 1];
    filter = treatFilter(filter);
    sort = treatSort(sort);
    if(callback && typeof callback === 'function'){
        User.find(filter).sort(sort).skip(skip).limit(limit).exec(function(err, users){
            if(users.length === 0){
                callback(err, users);
            }
            for(var i = 0, complete = 0; i < users.length; i++){
                (function(idx){
                    var user = users[idx];
                    var id = user.id;
                    Location.find({owner: id}, function(err, locations){
                        user.locations = locations;
                        if(++complete === users.length){
                            callback(err, users);
                        }
                    });
                })(i);
            }
        });
    }
}; 
```

我的`sort`对象必须是什么样子才能按位置数量排序？

谢谢，如果您有任何疑问，我很乐意解释我的代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T19:37:39.667

根据这篇文章（[猫鼬 - 按数组长度排序](https://stackoverflow.com/questions/11604075/mongoose-sort-by-array-length)）

您必须维护一个单独的字段来存储位置计数——不是太多的开销，但维护起来有点烦人

我研究了按虚拟字段进行排序，但这也是不可能的，而且可能效率很低......

# android - 通过我的应用程序 Android 重定向 Web 流量？

> ID：14924138
> 
> 赞同：-2
> 
> 时间：2013-02-17T17:53:34.867
> 
> 标签：android, redirect, web, webview, traffic

我想捕获试图访问和更改每个 Url 和 Go 的所有应用程序的所有 Url。我的意思是我需要更改 Android 中每个 Web 流量的标头。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T18:26:14.517

幸运的是，这通常是不可能的，除非通过安全漏洞或在根设备上。欢迎您编写代理服务器，但*用户*必须选择使用该代理服务器。

# php - 去除 file_put_contents php 的 url

> ID：14924139
> 
> 赞同：0
> 
> 时间：2013-02-17T17:53:38.583
> 
> 标签：php, xml, xml-parsing

我有一个解析 XML 文件的脚本。它需要将文件中引用的图像保存到本地服务器。我遇到的问题是它试图将图像保存为完整的 url 路径，这会导致 http 错误。这是重要的 XML：

```
$xml_str = file_get_contents(''.$target_file_path.'');
$xml = new SimpleXMLElement($xml_str);
$items = $xml->xpath('//image1/@src');
foreach($items as $item) {
$content = file_get_contents(''.$url.''.$item.'');
file_put_contents(''.$images_folder_path.''.$item.'', $content); 
```

我需要剥离存储在 $item 中的 url，只在 file_get_contents 和 file_put_contents 之间留下 image.jpg，任何帮助将不胜感激。

编辑：XML 输入是：

```
<time>13:12</time>
<date>02/15/13 </date>
<image1 src="http://path/to/image.jpeg" height="180" width="144" style="border-color: #800000" border="1" /> 
```

图像是远程存储的，我需要将它们复制到本地服务器，因为当脚本到达 file_put_contents 时，完整的 url 存储在“item”变量中，试图将文件保存为

```
/home/server/public_html/folder/http://path/to/image.jpeg 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T18:00:29.447

怎么样：

```
basename("http://www.example.com/picture.jpg"); 
```

它会输出`picture.jpg`

# android - 在android中选择查询？

> ID：14924140
> 
> 赞同：0
> 
> 时间：2013-02-17T17:53:55.560
> 
> 标签：android, android-sqlite

```
public Cursor getsomething()
  {
      this.open();
      Cursor c = database.rawQuery("SELECT content_id FROM " +
              DatabaseHandler.Table_Name2 +
              " where  playlist_id==100813", null);
 if (c != null ) {
  if  (c.moveToFirst()) {
        do {
        String path = c.getString(c.getColumnIndex("content_id"));
          MainActivity.t1.append("\n");
         MainActivity.t1.append(path);
        }while (c.moveToNext());
             } 
       }    
        this.close();
      return null;
  } 
```

我正在使用上面的代码来获取值，但它显示了 content_id 列中的所有值。我究竟做错了什么？

```
this.open();
        ContentValues values2 = new ContentValues();
        String csvFilename = "/mnt/sdcard/playlist.csv";
        CSVReader csvReader = new CSVReader(new FileReader(csvFilename));
        String Rowst[] = null;
        while((Rowst = csvReader.readNext()) != null) {
               st1 = Rowst[0];
               st2= Rowst[1];
               st3= Rowst[2];
               st4= Rowst[3];
               st5= Rowst[4];
               st6 = Rowst[5];
               st7 = Rowst[6];
               st8 = Rowst[7];
               st9 = Rowst[8];
               st10 = Rowst[9];
               st11 = Rowst[10];
               st12 = Rowst[11];
               st13 = Rowst[12];
               st14 = Rowst[13];
               st15 = Rowst[14];
               st16 = Rowst[15];
               st17 = Rowst[16];
               st18 = Rowst[17];
               st19 = Rowst[18];
               values2.put(DatabaseHandler.play1,st1);
               values2.put(DatabaseHandler.play2,st2);
               values2.put(DatabaseHandler.play3,st3);
               values2.put(DatabaseHandler.play4,st4);
               values2.put(DatabaseHandler.play5,st5);
               values2.put(DatabaseHandler.play6,st6);
               values2.put(DatabaseHandler.play7,st7);
               values2.put(DatabaseHandler.play8,st8);
               values2.put(DatabaseHandler.play9,st9);
               values2.put(DatabaseHandler.play10,st10);
               values2.put(DatabaseHandler.play11,st11);
               values2.put(DatabaseHandler.play12,st12);
               values2.put(DatabaseHandler.play13,st13);
               values2.put(DatabaseHandler.play14,st14);
               values2.put(DatabaseHandler.play15,st15);
               values2.put(DatabaseHandler.play16,st16);
               values2.put(DatabaseHandler.play17,st17);
               values2.put(DatabaseHandler.play18,st18);
               values2.put(DatabaseHandler.play19,st19);
           database.insert(DatabaseHandler.Table_Name2, null, values2);

        }
        csvReader.close(); 
        this.close(); 
```

这是我在此表中插入数据的代码，我正在尝试读取 sdcard 上的 csvfile 并将其数据输入表中我做错了什么我也发布了这个如果它有帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T19:05:25.537

```
public Cursor getsomething()
{
 this.open();
 Cursor c = db.query(DatabaseHandler.Table_Name2, null, "playlist_id=100813", null, null, null, null);

   if (c.getCount() > 0)
    {
     if  (c.moveToFirst())
     {
       do {
              String path = c.getString(c.getColumnIndex("content_id"));
              MainActivity.t1.append("\n");
              MainActivity.t1.append(path);

          }while (c.moveToNext());
     } 
   }    
    this.close();
    return null;
 } 
```

# wordpress - WordPress：cPanel 密码保护 wp-admin 生成太多重定向

> ID：14924141
> 
> 赞同：1
> 
> 时间：2013-02-17T17:53:54.977
> 
> 标签：wordpress, passwords, cpanel

我正在尝试使用 cPanel 的内置密码保护选项来保护 wp-admin/ 目录。问题是，当我创建规则并将用户与新创建的用户相关联时，这实际上会在该目录上生成一个无限重定向序列。也许是因为我已经登录了，但我不确定。我实际上不知道这在 WP 中是如何工作的，但是自从我开始为 Smashing Magazine 写文章以来，我知道这是可能的，因为他们在后端站点上使用了相同的功能。任何帮助将不胜感激。谢谢。

# mysql - 减去两列并在运行时对结果求和

> ID：14924142
> 
> 赞同：1
> 
> 时间：2013-02-17T17:53:58.940
> 
> 标签：mysql, runtime, sum

我在 MySQL 中有两个表，其中包含大量数据。我想减去两列并显示生成列的总和......

这是我所拥有的

```
CREATE TABLE fin_invoice(
id MEDIUMINT NOT NULL AUTO_INCREMENT,
invoice_no INT,
total INT,
PRIMARY KEY (id)
) ENGINE=MyISAM;
INSERT INTO fin_invoice (`id`, `invoice_no`, `total`) VALUES (NULL, '1000', '1000'),
(NULL, '1001', '2000'),(NULL, '1002', '3000'),(NULL, '1003', '1200'),(NULL, '1004',     '2000'),
(NULL, '1005',   '1202'),(NULL, '1006', '220'); 
```

表二是

```
CREATE TABLE fin_money(
id MEDIUMINT NOT NULL AUTO_INCREMENT,
fk_invoice INT,
amount INT,
PRIMARY KEY (id)
) ENGINE=MyISAM;

INSERT INTO `fin_money` (`id`, `fk_invoice`, `amount`) VALUES (NULL, '1', '100'),
(NULL, '2', '200'),(NULL, '3', '300'),(NULL, '4', '500'),(NULL, '5', '600'),
(NULL, '6',   '800'),(NULL, '7', '50'); 
```

表二（fin_money）通过外键 fk_invoice 连接到表 1（fin_invoice）。所以关系是 fin_invoice.id=fin_money.fk_invoice

我想得到这个

```
+----+-------------+--------+------+---------+
| id |  total      | amount | bal  | running |
+----+-------------+--------+------+---------+
|  1 |        1000 |    100 |  900 |     900 |
|  2 |        2000 |    200 | 1800 |    2700 |
|  3 |        3000 |    300 | 2700 |    5400 |
|  4 |        1200 |    500 |  700 |    6100 |
|  5 |        2000 |    600 | 1400 |    7500 |
|  6 |        1202 |    800 |  402 |    7902 |
|  7 |         220 |     50 |  170 |    8072 |
+----+-------------+--------+------+---------+ 
```

其中 bal=total-amount 和 running 是之前 id 的 bal 和 running 之和。例如 900+0=900 和 1800+900=2700 等等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T17:58:22.090

这应该使用局部变量来创建运行总计：

```
SELECT fi.id, 
  fi.total, 
  fm.amount,
  fi.total-fm.amount bal,
  @runTotal:=@runTotal+fi.total-fm.amount runTotal
FROM fin_invoice fi 
  JOIN fin_money fm ON fi.id = fm.fk_invoice
  JOIN (SELECT @runTotal:= 0) r; 
```

这是[SQL Fiddle](http://sqlfiddle.com/#!2/2dd73/4)。

结果：

```
ID  TOTAL   AMOUNT  BAL    RUNTOTAL
1   1000    100     900    900
2   2000    200     1800   2700
3   3000    300     2700   5400
4   1200    500     700    6100
5   2000    600     1400   7500
6   1202    800     402    7902
7   220     50      170    8072 
```

# java - 使用 Java 在命令行上打印的明文

> ID：14924146
> 
> 赞同：7
> 
> 时间：2013-02-17T17:54:20.347
> 
> 标签：java, cmd

如何使用 Java 清除在命令行中打印的文本？我想`Text1`在打印后清除并用`Text2`. 我搜索并找到此代码，但它不起作用。

```
public class className {

    public static void main(String[] args) throws IOException {
        System.out.println("Text1");
        Runtime.getRuntime().exec("cls");
        System.out.println("Text2");
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-17T18:01:31.660

您可以通过打印来做到这一点`\b`：

```
System.out.print("Text1");
System.out.print("\b\b\b\b\b");
System.out.print("     "); 
```

[请注意，这在Eclipse Console](https://bugs.eclipse.org/bugs/show_bug.cgi?id=76936)中不起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-09-09T18:29:23.200

试试这个解决方案：

```
new ProcessBuilder("cmd", "/c", "cls").inheritIO().start().waitFor(); 
```

我使用的是 Windows 8，这个解决方案对我有用。希望它对你也一样。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-10T20:24:04.713

您可以简单地使用 '\r' （回车）转义序列。

```
System.out.print("Text1");
System.out.print("\rText2"); 
```

只会打印'Text2'

# ios - 使用 CoreGraphics 在 iOS 中创建圆形渐变进度条

> ID：14924151
> 
> 赞同：1
> 
> 时间：2013-02-17T17:54:39.577
> 
> 标签：ios, core-graphics, uibezierpath

我想做这样的事情：

![圆形进度条渐变](../Images/d17957938680ee99d7439f811fcbeb0e.png)

我试图用这样的核心图形来制作它：

```
 float radius = CGRectGetWidth(rect)/2.0f - self.circleBorderWidth/2.0f;
float angleOffset = 0;

UIBezierPath *aPath = [UIBezierPath bezierPathWithArcCenter:CGPointMake(CGRectGetMidX(rect), CGRectGetMidY(rect))
                                                     radius:radius
                                                 startAngle:-angleOffset
                                                   endAngle:(mCircleSegs + 1)/(float)kCircleSegs*M_PI*2 - angleOffset
                                                  clockwise:YES];

CGPathRef shape = CGPathCreateCopyByStrokingPath(aPath.CGPath, NULL, 3, kCGLineCapSquare, kCGLineJoinMiter, 1.0f);

CGContextRef ctx = UIGraphicsGetCurrentContext();
CGContextAddPath(ctx, shape);
CGContextClip(ctx);

AngleGradientLayer *angle = [[AngleGradientLayer alloc] init];
angle.colors = [NSArray arrayWithObjects:
                (id)[UIColor colorWithRed:0 green:0 blue:0 alpha:1].CGColor,
                (id)[UIColor colorWithRed:1 green:1 blue:1 alpha:1].CGColor,
                nil];

CGContextClipToRect(ctx, self.bounds);
[angle drawInContext:ctx];

[angle release]; 
```

但我认为我在这里走错了路。它看起来不像示例。CoreGraphics 能画出这样的东西吗？如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T18:05:29.607

您用作剪辑的贝塞尔路径似乎只是圆的一小部分，而在您显示的图像中，路径更复杂：圆的 2 个部分，由 2 条线连接，整个路径有一个“环”形状。

这种方法应该可行，我将它用于具有相同外观的计时器。虽然我没有直接使用[AngleGradientLayer](https://github.com/paiv/AngleGradientLayer)，但我修改了它的`- (CGImageRef)newImageGradientInRect:(CGRect)rect`方法，返回一个 UIImage。但是我不得不将这个图像旋转 + PI/2，因为巴甫洛夫渐变角度渐变是水平开始的。

我使用 UIImage，因为它是一个不会改变的背景，所以我在我的图层中保存了这个 UIImage 的一个实例，并在我更新剪切路径时绘制它

```
- (void)drawInContext:(CGContextRef)ctx
{

    UIBezierPath *currentPath = [self timerPath];
   // other drawing code for glow (shadow) and white stroke)
    CGContextAddPath(ctx, currentPath.CGPath);
    // clip !
    CGContextClip(ctx);
    CGContextDrawImage(ctx, self.bounds, _circularGradientImage.CGImage);

    //_circularGradientImage from modified newImageGradientInRect method.

} 
```

这是我得到的：

![在此处输入图像描述](../Images/56f4d740e144e3f9c43f11fa134b2932.png)

# cakephp - CakePHP - 从 FormHelper 生成的数字字段中删除增量按钮

> ID：14924156
> 
> 赞同：0
> 
> 时间：2013-02-17T17:54:53.680
> 
> 标签：cakephp, cakephp-2.3

我已经通过 API 和文档进行了拖网搜索，并且看不到任何方法可以以编程方式禁用 CakePHP FormHelper 添加到十进制字段的增量按钮。

有谁知道在视图中执行此操作的正确方法，我唯一的其他选择是使用 jQuery 删除它们，我可以这样做，但如果有办法，宁愿“正确”地做。

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T18:05:50.547

我的猜测是，这些增量按钮*不在*您的 HTML 中，而是由您的浏览器生成，如果您使用“数字”输入（新 HTML 5 输入类型的一部分），例如 . CakePHP 将根据字段类型和名称自动尝试匹配正确的输入类型（例如，电子邮件地址的“电子邮件”输入。您可以通过手动指定输入类型来覆盖它，如下所示：

```
 echo $this->Form->input('myfieldname', array('type'=>'text')); 
```

这应该输出一个“常规”文本输入，浏览器不会对其进行“特殊”处理；

```
<input type='text' .......> 
```

虽然，您也会失去这些 HTML5 输入的积极方面，例如自动验证值和禁止非数字字符。可能有“抑制”装饰（步骤按钮）的选项，但这可能因每个浏览器而异。

# ajax - 我的 ajax 代码没有问题

> ID：14924163
> 
> 赞同：0
> 
> 时间：2013-02-17T17:55:27.437
> 
> 标签：ajax

其显示错误丢失：属性 id 之后

```
$.ajax({
url:"save.php",
data:"param="+escape(name),
dataType:"html",
cache:"false",
success(result){
$(".right").html(result);
}
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T18:03:59.410

`success`是一个属性，您可以将回调函数分配给，例如：

```
$.ajax({
    url:"save.php",
    data:"param="+escape(name),
    dataType:"html",
    cache:"false",
    success: function(result){
        $(".right").html(result);
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T18:06:34.413

这是 success() 回调的正确语法：success: function() { ... }

# c# - 对 OrmLite 的 SQL Server 特定类型支持

> ID：14924173
> 
> 赞同：15
> 
> 时间：2013-02-17T17:56:24.383
> 
> 标签：c#, sql, sql-server, ormlite-servicestack

我刚刚了解了一种天才类型，它可以简化我的很多工作，但看起来我首选的 ORM 无法识别它。

是否有让 ServiceStack OrmLite`HierarchyId`在 SQL Server 中识别的解决方法？关于修改哪些文件的任何建议以及如何进行的任何提示？

**编辑 ：**

这是对问题的更好说明。我有以下课程：

```
public class MyClass
{
    public int Id { get; set; }
    public SqlHierarchyId HierarchyId { get; set; }
} 
```

[SqlHierarchyId](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.types.sqlhierarchyid%28v=sql.110%29.aspx)是一种自定义 SQL Server 数据类型。OrmLite 将为它生成以下类：

![第一次 MyClass 渲染](../Images/7b0077376632b5d355ca27dd291805b0.png)

有趣的是，我可以在`[StringLength(255)]`属性上使用属性，它会获取`varchar(255)`类型：

![第二次 MyClass 渲染](../Images/2765b0856cd34c6d4af94d3683fe2a49.png)

我在这里手动更改了表格并添加了列数据类型以展示差异。请注意第三列的数据类型：

![SqlHierarchyId](../Images/18e1d6b42010e843fc1d72c895a6b856.png)

拥有一个`varchar`表示对于其他 DBMS 来说非常好，因为[它可以在 C# 中转换](https://stackoverflow.com/a/4316585/837623)，但对于 SQL Server，最好让它匹配相应的数据类型。`hierarchyid`这将使视图的创建更容易（由于数据类型的内置函数）。

我知道 EF4 不支持该类型（不确定 5）。我还浏览了GitHub 上的[OrmLiteDialectProviderBase.cs](https://github.com/ServiceStack/ServiceStack.OrmLite/blob/master/src/ServiceStack.OrmLite/OrmLiteDialectProviderBase.cs)文件，我可以看到支持的 ADO.NET 数据类型列表。

我的简单问题是：这是 ADO.NET 的一个强大限制，还是可以在 OrmLite 中看到？如果有任何建议，我愿意帮助扩展这部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-25T05:12:47.150

ADO.NET 支持 hierarchyid 类型，可以在[此处](http://blogs.msdn.com/b/jimoneil/archive/2009/02/23/h-is-for-hierarchyid.aspx)找到示例，并显示 ADO.NET 可以直接从 Sql Server 读取值作为 hierarchyid，但您需要将参数作为字符串传递给服务器。

向 ORM 框架添加对 hierarchyid 类型方法的支持会破坏 ORM API 和 RDMS 之间的抽象。我认为这是尚未将此类功能添加到实体框架的原因。

您可以通过在数据库中保留层次结构的字符串表示形式并将 hierarchyid 版本作为数据库和 C# 类中的计算属性来解决此问题，您需要从 ORM 映射中排除计算的 C# 属性。

例如，您的表列将被声明为：

```
[SqlHierarchyId] AS ([hierarchyid]::Parse([HierarchyId])) PERSISTED 
```

你的班级是：

```
public class MyClass {

    public string HierarchyId {
        get;
        set;
    }

    [Ignore]
    public SqlHierarchyId SqlHierarchyId {
        get {
            return SqlHierarchyId.Parse(new SqlString(HierarchyId));
        }
        set {
            HierarchyId = value.ToString();
        }
    }

} 
```

这将从 .Net 层持久更新，并允许您使用 hierarchyid 方法在 SQL Server 中构造查询并使用 .Net 层中的物化对象。

您必须针对 ORM 层中的字符串表示构造查询，但这仍然可以利用一些 hierarchyid 辅助方法，例如：

```
public IEnumerable<MyClass> GetDescendants(MyClass node) {

    string currentLocation = node.HierarchyId;
    string followingSibling 
        = node.SqlHierarchyId.GetAncestor(1)
              .GetDescendant(node.SqlHierarchyId, SqlHierarchyId.Null)
              .ToString();

    return db.Select<MyClass>(n => n.HierarchyId > currentLocation 
                                && n.HierarchyId < followingSibling);

} 
```

如果我的 ORMLite 语法错误，请致歉。

# android - 保存Hash map的ArrayList

> ID：14924177
> 
> 赞同：9
> 
> 时间：2013-02-17T17:56:33.457
> 
> 标签：android

在我的应用程序中，我想将数据保存在`savedInstanceState()`. 我想保存`ArrayList<HashMap<String,String>>`。到目前为止，我无法做到这一点。这是困扰我的代码

```
@Override
    protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        outState.putParcelableArrayList("places", (ArrayList<? extends Parcelable>) places);

    } 
```

恢复（）方法

```
private void restore(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        //What should i do here! i have try many things but none of them is helping

    } 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-17T18:03:04.740

因为`ArrayList`,`HashMap`并且`String`是`Serializable`你可以使用`Bundle.putSerializable`and`Bundle.getSerializable`

```
@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putSerializable("places", places);
}

private void restore(Bundle savedInstanceState) {
    if (savedInstanceState != null) {
        places = (ArrayList<HashMap<String,String>>) savedInstanceState.getSerializable("places"); 
    }
} 
```

另外，请确保您是`restore`从`onRestoreInstanceState`或`onCreate`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T18:41:20.517

假设你有：

```
 ArrayList< HashMap< String,String>> arr = new ArrayList< HashMap< String,String>> ();

    @Override
    protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putParcelableArrayList("places", (ArrayList<    ? extends Parcelable>) arr);
    }

   @Override
   protected void onRestoreInstanceState(Bundle savedInstanceState) {

   ArrayList<HashMap<String,String>> a = (ArrayList<HashMap<String,String>>)savedInstanceState.get("places");
   /*for(int i =0; i< a.size(); i++){
        HashMap<String,String> map = a.get(i);
        for(String s : map.keySet()){
            Log.d("log",s+" :: "+map.get(s));
        }
    }*/
} 
```

# java - 如何在按下按钮时重复调用方法（Java with Swing）？

> ID：14924180
> 
> 赞同：1
> 
> 时间：2013-02-17T17:56:50.497
> 
> 标签：java, swing, jbutton, mousepress

只要按下按钮，我就会尝试重复调用一个方法。但我得到一个无限循环。有人可以帮我吗？

```
private void jButton6MousePressed(java.awt.event.MouseEvent evt) {  
    pressed = true;
    while(pressed) {
        car.accelerator();
    }
}

private void jButton6MouseReleased(java.awt.event.MouseEvent evt) {
   pressed = false;
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T18:07:12.183

你得到一个无限循环，因为你写了一个无限循环，你需要

```
JButton.addActionListener(new ActionListener(){
  public void actionPerformed(ActionEvent e) {
   car.accelerator();
  }
}); 
```

如果您希望它在拥有自己的情况下重复该动作，这将更加困难，[这里](http://www.experts-exchange.com/Programming/Languages/Java/Q_20409837.html)是您如何做到这一点的示例。简而言之，您需要使用线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T18:20:16.373

Swing 线程进入无限循环。您应该在另一个线程中运行循环：

```
private class BooleanHolder{
   bool pressed;
};
final BooleanHolder pressed = new BooleanHolder();

private void jButton6MousePressed(java.awt.event.MouseEvent evt) {  
   presed.pressed=true;
   Thread t = new Thread( new Runnable(){
      public void run(){
         while(pressed.pressed)
         {
           car.accelerator();
         }
      }
   }
   t.start();
}
private void jButton6MouseReleased(java.awt.event.MouseEvent evt) {
   pressed.pressed=false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T19:59:30.930

如果不知道做什么`car.accelerator();`，就不可能做出准确的建议。

如果`car.accelerator()`以任何方式与 UI 交互，您需要小心，您不应该从除 EDT 之外的任何线程更新 UI。

相反，您可以使用快速射击`javax.swing.Timer`

```
private Timer accelerateTimer;

//** ... **//

accelerateTimer = new Timer(15, new ActionListener() {
    public void actionPerformed() {
        car.accelerator();
    }
});
accelerateTimer.setRepeats(true);

//** ... **//

public void mousePressed(MouseEvent me) {
    accelerateTimer.restart();
}

public void mouseReleased(MouseEvent me) {
    accelerateTimer.stop()
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T18:07:04.923

我很确定一旦按下设置为true，你就永远不会退出while循环，所以按钮没有被按下的事实永远不会注册，程序被卡住了。我唯一能想到的就是使用计时器定期检查 JButton 的状态。或者，您可以使用多线程。也就是说，将 PRESSED 设置为线程 1 中由 JButton 设置的字段（正如您所做的那样），并在线程 2 中设置循环，检查线程 1 中 PRESSED 的状态。

编辑：哎呀，我看到 bmorris591 已经建议使用多线程。

# matlab - 如何在 Matlab 中显示（打印）向量？

> ID：14924181
> 
> 赞同：25
> 
> 时间：2013-02-17T17:56:55.553
> 
> 标签：matlab, printf, disp

我有一个矢量`x = (1, 2, 3)`，我想将它显示（打印）为`Answer: (1, 2, 3)`.

我尝试了很多方法，包括：

```
disp('Answer: ')
strtrim(sprintf('%f ', x)) 
```

但我仍然无法让它以我需要的格式打印。

有人可以指出我的解决方案吗？

**编辑：**`x`预先不知道 值和（长度） 。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2015-01-08T13:42:49.670

我更喜欢以下更干净的：

```
x = [1, 2, 3];
g=sprintf('%d ', x);
fprintf('Answer: %s\n', g) 
```

哪个输出

```
Answer: 1 2 3 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-17T18:59:56.367

您可以使用

```
x = [1, 2, 3]
disp(sprintf('Answer: (%d, %d, %d)', x)) 
```

这导致

```
Answer: (1, 2, 3) 
```

对于任意大小的向量，您可以使用

```
disp(strrep(['Answer: (' sprintf(' %d,', x) ')'], ',)', ')')) 
```

另一种方法是

```
disp(strrep(['Answer: (' num2str(x, ' %d,') ')'], ',)', ')')) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-10-02T15:38:49.217

这是利用 Matlab`strjoin`功能的另一种方法。`strjoin`可以轻松自定义值之间的分隔符。

```
x = [1, 2, 3];
fprintf('Answer: (%s)\n', strjoin(cellstr(num2str(x(:))),', ')); 
```

这导致：`Answer: (1, 2, 3)`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-17T18:29:19.580

你可以这样试试：

```
fprintf('%s: (%i,%i,%i)\r\n','Answer',1,2,3) 
```

我希望这有帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-18T11:14:41.467

这是一个更通用的解决方案，它以这种格式打印向量 x 的所有元素：

```
x=randperm(3);
s = repmat('%d,',1,length(x));
s(end)=[]; %Remove trailing comma

disp(sprintf(['Answer: (' s ')'], x)) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-24T14:46:52.010

打印一个可能有复数的向量-

```
fprintf('Answer: %s\n', sprintf('%d ', num2str(x))); 
```

# three.js - three.js 中的文本：旋转时透明度丢失

> ID：14924182
> 
> 赞同：1
> 
> 时间：2013-02-17T17:56:58.663
> 
> 标签：three.js, webgl

我正在尝试[使用 text in three.js](https://github.com/mrdoob/three.js/wiki/Text-in-Three.js)的第二种方法，在画布上绘图并将结果用作纹理。它基本上可以工作，除了以下问题 - 不知道它是否是一个错误：

我创建了两个具有透明背景的文本，然后重叠。它们显示正常，但是当我旋转其中一个时，透明度被弄乱了。

我使用以下（摘录）功能创建文本对象

```
function createText(text, ...){
    var textHolder = document.createElement( 'canvas' );
    var ctext = textHolder.getContext('2d');
    ...
    var tex = new THREE.Texture(textHolder);
    var mat = new THREE.MeshBasicMaterial( { map: tex, overdraw: true});
    mat.transparent = true;
    mat.map.needsUpdate = true;
    var textBoard = new THREE.Mesh(new THREE.PlaneGeometry(textHolder.width, textHolder.height),mat);
    textBoard.dynamic = true;
    textBoard.doubleSided = true;
    return textBoard;
} 
```

并将它们添加到场景中。[在jsfiddle](http://jsfiddle.net/leonbloy/SXA8n/)中查看完整代码的演示

![在此处输入图像描述](../Images/2204886a4275311195967fbce4305724.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T18:55:16.507

webGL 中的透明度很棘手。

在您的情况下，最好的解决方案是为您的透明文本材料执行以下操作：

```
mat.depthTest = false; 
```

更新的小提琴：http: [//jsfiddle.net/SXA8n/4/](http://jsfiddle.net/SXA8n/4/)

三.js r.55

# javascript - 更改立方体面的颜色

> ID：14924187
> 
> 赞同：14
> 
> 时间：2013-02-17T17:57:49.560
> 
> 标签：javascript, colors, three.js, mesh, face

我实际上发现[了这个](https://stackoverflow.com/questions/14181631/changing-color-of-cube-in-three-js)问题，但它说不`material.color`存在。我需要知道如何更改我正在绘制的立方体的各个面的颜色：

```
var newCube = new THREE.Mesh(new three.CubeGeometry(size, size, size), new three.MeshNormalMaterial({ vertexColors: three.FaceColors })); 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-02-17T18:23:21.517

**此答案仅适用于 r.125 之前的 three.js 版本。**

以下是设置和更改立方体面颜色的方法：

```
var geometry = new THREE.BoxGeometry( size, size, size );
for ( var i = 0; i < geometry.faces.length; i ++ ) {
    geometry.faces[ i ].color.setHex( Math.random() * 0xffffff );
}

var material = new THREE.MeshBasicMaterial( { color: 0xffffff, vertexColors: true } ); 
```

如果*在渲染几何图形后*`geometry.faces[i].color`更改，则必须设置.*`geometry.colorsNeedUpdate = true`*

 *三.js r.124

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-01-29T15:53:26.957

对于最终来到这里并希望看到此代码正常工作的人来说，这[是一个小提琴。](http://jsfiddle.net/wilt/w67tzfhx/81/)

我做了一个盒子，在脸上系了 3 种颜色：

```
// colors
red = new THREE.Color(1, 0, 0);
green = new THREE.Color(0, 1, 0);
blue = new THREE.Color(0, 0, 1);
var colors = [red, green, blue];

for (var i = 0; i < 3; i++) {
    geometry.faces[4 * i].color = colors[i];
    geometry.faces[4 * i + 1].color = colors[i];
    geometry.faces[4 * i + 2].color = colors[i];
    geometry.faces[4 * i + 3].color = colors[i];
} 
```

面部颜色在`animate`循环中更改。

* * *

还可以[在此处查看相关问题，](https://stackoverflow.com/questions/44828713/paint-cube-faces-as-a-whole-not-the-triangles-that-make-up-the-face-three-js)其中有[一个很好的答案](https://stackoverflow.com/a/44836160/1697459)`THREE.BufferGeometry`，展示了在实例上使用材料索引和组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-12-18T16:01:13.913

**对于大于 r.125 的版本**

> 立方体的每一面都由两个三角形组成。所以这个想法是每次迭代处理六个顶点，以便每边创建一个（随机）颜色。

[https://discourse.threejs.org/t/how-to-color-individual-faces-of-a-boxgeometry-tononindexed-object-using-vertices/30099](https://discourse.threejs.org/t/how-to-color-individual-faces-of-a-boxgeometry-tononindexed-object-using-vertices/30099)

```
 const piece = new THREE.BoxGeometry(1, 1, 1).toNonIndexed();
  const material = new THREE.MeshBasicMaterial({
    vertexColors: true
  });
  const positionAttribute = piece.getAttribute('position');
  const colors = [];

  const color = new THREE.Color();

  for (let i = 0; i < positionAttribute.count; i += 6) {

    color.setHex(0xffffff * Math.random());

    colors.push(color.r, color.g, color.b);
    colors.push(color.r, color.g, color.b);
    colors.push(color.r, color.g, color.b);

    colors.push(color.r, color.g, color.b);
    colors.push(color.r, color.g, color.b);
    colors.push(color.r, color.g, color.b);
  } // for

  // define the new attribute
  piece.setAttribute('color', new THREE.Float32BufferAttribute(colors, 3));
  cube = new THREE.Mesh(piece, material); 
```

[**JSFiddle**](https://jsfiddle.net/5cm6wvqz/1/)*

# curl - Curl 在雅虎选项页面上不断出现错误页面

> ID：14924189
> 
> 赞同：0
> 
> 时间：2013-02-17T17:57:52.153
> 
> 标签：curl, get, yahoo, options, finance

当我试图在 yahoo 上访问此页面时（*异常高容量*选项卡，每页 100 行）

[http://finance.yahoo.com/options/lists/?mod_id=mediaquotesoptions&tab=tab2&rc​​nt=100](http://finance.yahoo.com/options/lists/?mod_id=mediaquotesoptions&tab=tab2&rcnt=100)

在 Windows 7 中使用命令行：

curl.exe -v -A "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:18.0) Gecko/20100101 Firefox/18.0" [http://finance.yahoo.com/options/lists/?mod_id=mediaquotesoptions&tab=tab2&rc ​​nt= 100](http://finance.yahoo.com/options/lists/?mod_id=mediaquotesoptions&tab=tab2&rcnt=100)

我不断得到错误的页面（默认*的高容量*选项卡，每页 50 行），好像选项卡和 rcnt 参数根本没有被 Curl 传递。

我尝试了我能想象到的所有事情，包括使用 POST 传递 tab 和 rcnt、更改用户代理等，但没有任何效果。我怀疑这与雅虎网站上的浏览器检测或会话控制有关，但不知道该去哪里。

任何建议将不胜感激！博

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:56:57.027

博兴，

尝试将 URL 括在双引号中，这应该可以解决您面临的问题。

弗拉基米尔

# c# - 扩展一个类及其属性之一

> ID：14924190
> 
> 赞同：0
> 
> 时间：2013-02-17T17:57:56.767
> 
> 标签：c#, dependency-injection

我一遍又一遍地遇到这个类设计问题，我开始意识到我一定做错了什么。这个想法是B类：A。这些类使用配置对象和BConfig：AConfig。问题是我想不出一个好方法来使 BConfig 中的属性可以访问。

这是该问题的简化示例。

```
public class Request{

  public virtual RequestConfiguration Config{
   get
   {
     if(Config == null)
       Config= ConfigurationManager.GetSection("RequestConfig")
              as RequestConfiguration;
     return Config;
   }
  }

  public virtual string DoSomething(){
    return "Url:" + Config.Url;
  }

}

public class AuthRequest : Request
{
   public override RequestConfiguration Config
   get
   {
     if(Config == null)
       Config= ConfigurationManager.GetSection("RequestConfig")
              as AuthRequestConfiguration;
     return Config;
   }
  }

  public override string DoSomething(){
    return String.Format("Url:{0} U:{1} P:{2}",Config.Url,Config.User,Config.Pass);
  }
}

/*---- Configuration Classes ----*/
public class RequestConfiguration : ConfigurationSection
{
    [ConfigurationProperty("RequestHost", IsRequired = true)]
    public string RequestHost
    {
        get { return (string)base["RequestHost"]; }
    }
}    
public class AuthRequestConfiguration : RequestConfiguration
{
    [ConfigurationProperty("User", IsRequired = true)]
    public string User
    {
        get { return (string)base["User"]; }
    }

    [ConfigurationProperty("Pass", IsRequired = true)]
    public string Pass
    {
        get { return (string)base["Pass"]; }
    }
} 
```

显然这段代码不能编译。 **是否可以对此代码进行任何小的更改以实现相同的原理？** 还是我需要一起采取完全不同的方法？

目标是我可以使用配置文件中设置的简单依赖注入来确定要发出什么类型的请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T18:45:00.790

`Request`通用化怎么样？`Request<TConfig> where TConfig : RequestConfiguration`：

```
public class Request<TConfig> where TConfig : RequestConfiguration
{
    private TConfig _config;

    public virtual TConfig Config
    {
        get { return _config ?? (_config = ConfigurationManager.GetSection("RequestConfig") as TConfig); }
    }

    public virtual string DoSomething()
    {
        return "Url:" + Config.Url;
    }
}

public class AuthRequest : Request<AuthRequestConfiguration>
{
    public override string DoSomething()
    {
        return String.Format("Url:{0} U:{1} P:{2}", Config.Url, Config.User, Config.Pass);
    }
}

public class RequestConfiguration : ConfigurationSection
{
    [ConfigurationProperty("Url", IsRequired = true)]
    public string Url
    {
        get { return (string) this["Url"]; }
    }
}

public class AuthRequestConfiguration : RequestConfiguration
{
    [ConfigurationProperty("User", IsRequired = true)]
    public string User
    {
        get { return (string) this["User"]; }
    }

    [ConfigurationProperty("Pass", IsRequired = true)]
    public string Pass
    {
        get { return (string) this["Pass"]; }
    }
} 
```

那能解决你的问题吗？至少代码构建:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T18:33:15.613

这取决于如何在 RequestConfiguration 和 AuthRequestConfiguration 上声明属性。

例如，如果您在 RequestConfiguration 类中将 Url 属性声明为虚拟，并在 AuthRequestConfiguration 类中将其声明为覆盖，则它应该符合您的预期。

MSDN 的详细示例在这里[http://msdn.microsoft.com/en-us/library/9fkccyh4(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/9fkccyh4(v=vs.80).aspx)

# http - Twitter REST API vs Streaming API - 它如何影响服务器端

> ID：14924191
> 
> 赞同：1
> 
> 时间：2013-02-17T17:58:00.987
> 
> 标签：http, web-applications, twitter, websocket

有一个应用程序应该读取每个注册用户的用户推文，处理它们并存储数据以供将来使用。它可以通过 2 种方式访问​​ Twitter：REST API（每 x 分钟轮询一次 twitter），或者使用它的 Streaming API 来获取推文。

除了服务器端完全不同的实现之外，我想知道对服务器端的其他影响是什么？

假设应用程序有成千上万的用户。为每个用户构建一种队列和轮询 twitter（最简单的场景）更好，还是使用 Streaming API 并为每个用户保持 HTTP 连接打开更好？我有点担心后者，因为它需要保持大量的连接一直打开。有什么我不知道的缺点吗？如果我想在 Heroku 或 EC2 实例上部署我的应用程序，可以吗？或者有任何限制吗？

在其他不断需要为每个用户获取数据的应用程序中是如何完成的？

# java - 将结果更新到 AlertDialog Android 的 TextView

> ID：14924193
> 
> 赞同：1
> 
> 时间：2013-02-17T17:58:16.147
> 
> 标签：java, android, dialog, textview, alert

当我尝试将程序的结果设置为对话框中的 textView 时，应用程序强制关闭。我通过链接具有 textview 的 xml 来制作对话框，而我尝试更新的正是这个 textview。

```
AlertDialog.Builder alert = new AlertDialog.Builder(this); 
    LayoutInflater factory = LayoutInflater.from(this);        
    resultOne=(TextView)findViewById(R.id.resultOne); //resultone is a textview in xml dialog

    resultOne.setText("hello");  //this code is making the app close

    final View textEntryView = factory.inflate(R.layout.dialog, null);
    alert.setView(textEntryView);
    alert.show(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T18:01:32.020

更改顺序，以便在膨胀*后访问 View 的子项。*您还需要使用`textEntryView`来查找 id，如下所示：

```
LayoutInflater factory = LayoutInflater.from(this);        
final View textEntryView = factory.inflate(R.layout.dialog, null);

resultOne=(TextView)textEntryView.findViewById(R.id.resultOne); //resultone is a textview in xml dialog

resultOne.setText("hello");
alert.setView(textEntryView);

alert.show(); 
```

# iphone - 如何发布 iPhone 应用程序并创建二进制文件

> ID：14924196
> 
> 赞同：0
> 
> 时间：2013-02-17T17:58:28.683
> 
> 标签：iphone, ios, xcode, app-store

我想提交我朋友最先上传的新版本的应用程序。现在我想在应用商店更新它。

我正在按照[本](http://www.edumobile.org/iphone/iphone-programming-tutorials/submitting-iphone-apps-to-the-apple-app-store-a-step-by-step-guide/)教程链接在应用商店上传应用

但是，每当我下载临时证书以进行分发并单击它时，它都会显示未找到有效的签名身份。我做错了什么。我已经从钥匙串访问创建证书并将其上传到证书下的开发并下载它。然后创建我的APP id然后创建临时证书并下载并单击它，然后它在xCODE中打开（找不到有效的签名身份。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T18:07:07.623

只有开发账户所属的用户才能向应用商店提交应用。它使用他们的证书进行提交。如果您想提交到商店，您需要您的朋友在您的计算机上安装他们的证书。然后，您可以使用它来进行提交。只要准备好在您的朋友的证书到期时重复该过程即可。

# python - 加载巨大的 XML 文件并处理 MemoryError

> ID：14924200
> 
> 赞同：13
> 
> 时间：2013-02-17T17:58:47.463
> 
> 标签：python, xml, beautifulsoup, mediawiki

我有一个非常大的 XML 文件（准确地说是 20GB，是的，我需要全部）。当我尝试加载文件时，我收到此错误：

```
Python(23358) malloc: *** mmap(size=140736680968192) failed (error code=12)
*** error: can't allocate region
*** set a breakpoint in malloc_error_break to debug
Traceback (most recent call last):
  File "file.py", line 5, in <module>
    code = xml.read()
MemoryError 
```

这是我拥有的当前代码，用于读取 XML 文件：

```
from bs4 import BeautifulSoup
xml = open('pages_full.xml', 'r')
code = xml.read()
xml.close()
soup = BeautifulSoup(code) 
```

现在，我将如何消除此错误并能够继续编写脚本。我会尝试将文件拆分为单独的文件，但由于我不知道这会如何影响 BeautifulSoup 以及 XML 数据，我宁愿不这样做。

（XML 数据是我自愿参加的一个 wiki 的数据库转储，使用它导入来自不同时间段的数据，使用来自许多页面的直接信息）

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-17T18:18:13.670

不要使用 BeautifulSoup 来尝试解析这么大的 XML 文件*。*请改用[ElementTree API](http://docs.python.org/2/library/xml.etree.elementtree.html)。具体来说，使用该[`iterparse()`函数](http://docs.python.org/2/library/xml.etree.elementtree.html#xml.etree.ElementTree.iterparse)将文件解析为流，在收到元素通知时处理信息，然后再次*删除*元素：

```
from xml.etree import ElementTree as ET

parser = ET.iterparse(filename)

for event, element in parser:
    # element is a whole element
    if element.tag == 'yourelement'
         # do something with this element
         # then clean up
         element.clear() 
```

通过使用事件驱动的方法，您无需将*整个*XML 文档保存在内存中，您只需提取所需的内容并丢弃其余部分。

请参阅[`iterparse()`教程和文档](http://effbot.org/zone/element-iterparse.htm)。

或者，您也可以使用[lxml 库](http://lxml.de/)；它以更快、功能更齐全的软件包提供相同的 API。

# .htaccess - htaccess：添加第二个重写规则

> ID：14924214
> 
> 赞同：0
> 
> 时间：2013-02-17T18:00:41.070
> 
> 标签：.htaccess

我的 .htcaccess 文件中有以下内容。它将非 www 站点重定向到 www 站点。我可以使用同一个文件对另一个站点 mysite2 执行相同的操作吗？如何？

```
Options +FollowSymLinks
RewriteEngine on
RewriteCond %{HTTP_HOST} ^mysite1.com$ [NC]
RewriteRule ^(.*)$ http://www.mysite2.com/$1 [R=301,L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T18:34:53.387

对于要应用重写规则的每个根 URL，您需要一个单独的 .htacces 文件。换句话说，你不能做你正在尝试的事情。

# java - 如何将字符串的字符更改为'*'

> ID：14924215
> 
> 赞同：0
> 
> 时间：2013-02-17T18:00:44.847
> 
> 标签：java

所以我正在尝试制作一个简单的命运之轮类型的游戏。但我有一个严重的问题开始。我只是想将我的短语转换为“*”，以便在用户猜测其中一个字母是什么之前看不到它。这是我到目前为止所拥有的：

```
public class Puzzle
{
    private String solution="DOG PILE";
    private StringBuilder puzzle;

    public Puzzle(String solution)
    {

        int startindex=puzzle.indexOf(solution);
        puzzle.replace(startIndex, endIndex, "-");

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T18:04:35.220

使用正则表达式和替换方法：

```
String hideSolution = solution.replaceAll(".", "-"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T18:14:42.393

你可以试试这样的

```
public static String hide(String data, StringBuilder charactersToShow) {
    return data.replaceAll("[^\\s" + charactersToShow.toString() + "]", "*");
}

public static void main(String[] args) throws Exception {
    StringBuilder gueses = new StringBuilder();
    String solution = "DOG PILE";

    System.out.println(hide(solution, gueses));//

    gueses.append('D');
    System.out.println(hide(solution, gueses));

    gueses.append('I');
    System.out.println(hide(solution, gueses));
} 
```

输出：

```
*** ****
D** ****
D** *I** 
```

**小解释**：

`replaceAll`方法有两个参数：描述字符串哪一部分应该被替换的*正则表达式*，第二个参数是替换。该方法的结果是新字符串，因此不会更改原始字符串。

作为正则表达式，我使用了`[]`带否定的字符类，`[^...]`因此它将匹配不在该类中的任何字符。除了我`\\s`在开头添加的用户字符之外，因为它代表每个空格（普通空格、制表符、换行符等），因为您可能不想将它们替换为`*`.

`'`如果您不想替换它，您可能还想添加到该“集合”中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T18:26:20.023

使用番石榴库

例子：

```
String noDigits = CharMatcher.JAVA_DIGIT.replaceFrom(string, "*"); // star out all digits 
```

# google-apps-script - Google App 脚本和本地数据库连接

> ID：14924227
> 
> 赞同：2
> 
> 时间：2013-02-17T18:02:19.470
> 
> 标签：google-apps-script

我的机器上安装了 mysql 服务器。我想使用 Google 应用脚本的 jdbc 服务连接到同一个本地 mysql 实例。我收到连接失败错误。所以，我想确认一下： 1\. 是否可以使用 jdbc 服务连接到在私人机器（笔记本电脑）上运行的 mysql 实例。2\. 如果不是，则始终必须连接到公共 IP。连接到在私人机器上运行的 mysql 实例的替代方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T22:46:05.277

这绝对有效，但您需要允许 Google 的机器连接到您的机器。这意味着在您的防火墙中打开一个洞，可能在您的路由器上设置端口转发等。

有一种替代方法可以在您的安全安排中戳一个洞，它称为安全数据连接器，它可以让您的机器启动与 Google 的连接 - [https://developers.google.com/secure-data-connector/](https://developers.google.com/secure-data-connector/)

不幸的是，我不相信 SDC 支持 JDBC（我相信它只支持基于 HTTP 的通信）。

（PS 一个非常简单的解决方法是将您的本地数据库镜像到某种云服务，然后允许从 Google 访问该副本）。

# c - C中的矩阵乘法与来自文件的输入

> ID：14924229
> 
> 赞同：2
> 
> 时间：2013-02-17T18:02:38.373
> 
> 标签：c, matrix-multiplication

我已经编写了一个矩阵乘法程序，但我想修改它。首先，我想将矩阵更改为 first[a][b] 而不是 10 并从文件中读取矩阵的维度。我是否需要使用 malloc 根据矩阵的维度动态分配内存，或者我可以取一些最大值，但是会导致大量内存的浪费我是否需要将矩阵的维度存储在文件中的数组中。建议我需要哪些更改？我没有打开文件，只是将标准输入重定向到文件。我无法通过文件获取输入？？

修改后的代码如下

```
#include <stdio.h>

int main() 
{
 int m, n, p, q, c, d, k, sum = 0;
  int **first, **second, **multiply;
  printf("Enter the number of rows and columns of first matrix\n");
  scanf("%d%d", &m, &n);
  first = malloc(m*sizeof(int*));
   for (int i =0;i <m; i++)
first[i] =malloc(n*sizeof(int));
    second = malloc(p*sizeof(int*));
     for(int i=0;i<p;i++)
second[i] = malloc(q*sizeof(int));
multiply = malloc(m*sizeof(int));
for (int i=0;i<q;i++)
multiply[i] = malloc(q*sizeof(int));
printf("Enter the elements of first matrix\n");
    for (  c = 0 ; c < m ; c++ )
    for ( d = 0 ; d < n ; d++ )
      scanf("%d", &first[c][d]);
    printf("Enter the number of rows and columns of second matrix\n");
  scanf("%d%d", &p, &q);
  if ( n != p )
    printf(
  "Matrices with entered orders can't be multiplied with each other.\n");
  else {
 printf("Enter the elements of second matrix\n");
 for ( c = 0 ; c < p ; c++ )
  for ( d = 0 ; d < q ; d++ )
    scanf("%d", &second[c][d]);
 for ( c = 0 ; c < m ; c++ ) {
  for ( d = 0 ; d < q ; d++ ) {
    for ( k = 0 ; k < p ; k++ ) {
      sum = sum + first[c][k]*second[k][d];
    }
    multiply[c][d] = sum;
    sum = 0;
  }
  }
 printf("Product of entered matrices:-\n");
 for ( c = 0 ; c < m ; c++ ) {
  for ( d = 0 ; d < q ; d++ )
    printf("%d\t", multiply[c][d]);
  printf("\n");
 }
for (int i = 0; i < p; i++)
  free(second[i]);
free(second);
for (int i = 0; i < q; i++)
  free(multiply[i]);
  free(multiply);
}
for (int i = 0; i < m; i++)
free(first[i]);
 free(first);
return 0;
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T18:11:26.827

**变更声明：**

```
int i, m, n, p, q, c, d, k, sum = 0;
int **first, **second, **multiply; 
```

**之后`scanf("%d%d", &m, &n);`：**

```
first = malloc(m*sizeof(int*));
for (i = 0; i < m; i++)
  first[i] = malloc(n*sizeof(int)); 
```

**之前`printf("Enter the elements of second matrix\n");`：**

```
second = malloc(p*sizeof(int*));
for (i = 0; i < p; i++)
  second[i] = malloc(q*sizeof(int));

multiply = malloc(m*sizeof(int*));
for (i = 0; i < q; i++)
  multiply[i] = malloc(q*sizeof(int)); 
```

**自由语句：（**在程序结束时）（如果程序**没有**立即退出，则**始终**需要）

 **代替：

```
 }
  return 0;
} 
```

和：

```
 for (i = 0; i < p; i++)
      free(second[i]);
    free(second);
    for (i = 0; i < q; i++)
      free(multiply[i]);
    free(multiply);
  }
  for (i = 0; i < m; i++)
    free(first[i]);
  free(first);
  return 0;
} 
```

**另一种方法：**分配一个连续的内存块

声明：

```
int *first, *second, *multiply; 
```

`malloc`'s: (没有for循环)

*   `first = malloc(m*n*sizeof(int));`
*   `second = malloc(p*q*sizeof(int));`
*   `multiply = malloc(m*q*sizeof(int));`

用法：

*   更改`first[c][k]`为`first[c*m+k]`
*   更改`second[k][d]`为`second[k*p+d]`
*   更改`multiply[c][d]`为`first[c*m+d]`

`free`'s: (没有for循环)

*   `free(first);`
*   `free(second);`
*   `free(multiply);`**

# objective-c - RestKit 0.20 - 动态嵌套对象映射

> ID：14924235
> 
> 赞同：5
> 
> 时间：2013-02-17T18:03:11.030
> 
> 标签：objective-c, json, mapping, restkit

我正在开发 Objective C 项目，该项目使用 RestKit 框架来解析 JSON 响应。现在我需要一些关于以下情况的对象映射设置帮助： JSON 响应：

```
 {
   "data": {
       "SOME.API.Auth": {
           "maxVersion": 2,
           "minVersion": 1,
           "path": "auth.cgi"
       },
       "SOME.Station": {
           "maxVersion": 1,
           "minVersion": 1,
           "path": "Station/task.cgi"
       }
   },
   "success": true
} 
```

和以下对象：

```
@interface Response : NSObject
@property (strong, nonatomic) NSArray *data;
@property (assign, nonatomic) BOOL success;
@end

@interface SomeAPIInfo : NSObject
@property (strong, nonatomic) NSString *name;
@property (strong, nonatomic) NSString *path;
@property (strong, nonatomic) NSString *minVersion;
@property (strong, nonatomic) NSString *maxVersion;
@end 
```

这是我的映射设置：

```
RKObjectMapping *responseMapping = [RKObjectMapping mappingForClass:[Response class]];
[responseMapping addAttributeMappingsFromDictionary:@{@"success": @"success"}];

RKObjectMapping *dataObjectMapping =  [RKObjectMapping mappingForClass:[SomeAPIInfo class]];
dataObjectMapping.forceCollectionMapping = YES;
[dataObjectMapping addAttributeMappingFromKeyOfRepresentationToAttribute:@"name"];
[dataObjectMapping addAttributeMappingsFromDictionary:@{
@"(name).path": @"path",
@"(name).minVersion": @"minVersion",
@"(name).maxVersion": @"maxVersion"}];

[responseMapping addPropertyMapping:[RKRelationshipMapping relationshipMappingFromKeyPath:@"data"
                                                                               toKeyPath:@"data"
                                                                             withMapping:dataObjectMapping]];

RKResponseDescriptor *responseDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:responseMapping
                                                                                  pathPattern:nil
                                                                                      keyPath:nil
                                                                                  statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful)];

[_objectManager addResponseDescriptor:responseDescriptor]; 
```

问题是“数据”对象未正确映射： NSArray *data; 填充了 2 个“SomeAPIInfo”对象。名称已正确填写，但其他值（路径、最大版本、最小版本）为空。

我究竟做错了什么 ？还有另一种映射“数据”对象的方法吗？也许直接进入 NSDictionary，所以“Some.API.Auth”是关键，“SomeAPIInfo”是对象（没有“name”属性）。

感谢帮助！

**编辑：**我认为映射不起作用，因为键中的点（“SOME.API.Auth）。

```
RKMappingOperation.m:
- (NSArray *)simpleAttributeMappings
{
    NSMutableArray *mappings = [NSMutableArray array];
    for (RKAttributeMapping *mapping in self.nestedAttributeMappings) {
        if ([mapping.sourceKeyPath rangeOfString:@"."].location == NSNotFound) {
            [mappings addObject:mapping];
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-14T16:07:22.037

[我遇到了由 RestKit https://github.com/RestKit/RestKit/issues/1532](https://github.com/RestKit/RestKit/issues/1532)中的错误引起的类似问题。我会尝试通过创建具有相同结构但没有点的假 JSON 响应来消除可能的点问题，并查看问题是否仍然存在。

# php - 在我的服务器上运行循环 PHP 脚本

> ID：14924236
> 
> 赞同：0
> 
> 时间：2013-02-17T18:03:14.137
> 
> 标签：php, apache

我有一台`apache`正在运行的 windows pc，我需要一个`php`脚本来持续运行以监听来自 a 的输入`UDP port`，并采取所需的操作并将其发回。

我知道如何做到这一点的唯一方法是安装`curl`for`cmd`并`php script`使用`WHILE loop`. 恐怕这是错误的做法。并且可能不可靠并占用大量系统资源。

人们可以评论上述方法吗？我听说过 cron ..但这仅适用于 unix 吗？我能做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T18:14:32.563

嘿，试试下面的解决方案。使用 bat 文件并安排执行该 bat 文件。

例如在bat文件`executephp.bat`中，这样写

```
c:\xampp\php\php.exe -f c:\xampp\htdocs\do_something.php 
```

保存包含该行的 bat 文件。

转到 Windows 调度程序并创建一个新任务并在操作选项卡中，浏览指向 executephp.bat 并开始 -> 直接到您拥有该 executephp.bat 的目录。

例如，如果您将文件保存在`C:\xampp\htdocs`将其`C:\xampp\htdocs`放在开头的位置。

记住即使用户没有登录也要调用脚本。

一切都设置好了，它将毫无问题地执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T18:14:42.153

Apache 后面的 PHP 脚本总是有一个最大的执行时间，所以`while`-loop 应该总是在特定的超时后停止。

您最好使用 cron 或 Venkat 推荐的批处理脚本。那里有一些很棒的 cron 服务，它们会向您的服务器发出 GET 请求并运行脚本。看看这个相关的线程：[Scheduled Request to my website from an external source](https://stackoverflow.com/questions/14537584/scheduled-request-to-my-website-from-an-external-source/14537615#14537615)

这不符合您的需求吗？

# facebook - 通过应用程序将照片发布到墙上（不是文件上传）

> ID：14924237
> 
> 赞同：0
> 
> 时间：2013-02-17T18:03:17.430
> 
> 标签：facebook, facebook-graph-api, post, facebook-wall

我在服务器上有图像文件夹，如何从我的图像目录中发布照片或由我的应用程序生成而不是通过表单上传。

```
 $path = 'name/'.$user_id.'.jpg';
    $post_url = '/'.$user_id.'/photos'; 

    //post photo
    $facebook->setFileUploadSupport(true);
            //posts message on page statues 
            $msg_body = array(
            'source'=>'@'.realpath($path),
            'message' => 'like and share photo'
            );

        if ($user_id) {
          try {
                $postResult = $facebook->api($post_url, 'post', $msg_body );
            } catch (FacebookApiException $e) {
            echo $e->getMessage();
          }
        }else{
         echo 'photo was not uploaded';
        }
        echo '<pre>'.print_r($postResult).'</pre>'; 
```

显示 print_r 结果: **(#324) 需要上传文件**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:36:28.593

您需要获得“photo_upload”权限才能执行此操作。

这是使用 JavaScript SDK 的示例（php 可能非常相似）：

```
FB.login(function(response) {
   if (response.authResponse) {
      FB.api('/me/photos', 'post', { url: "http://yourimagehere.png" }, function(response) {
          if (!response || response.error) {
               console.log(response);
          } else {
               alert('OK');
          }
      });
   }
},{scope:'photo_upload'}); 
```

上面的代码将在用户相册中自动创建新相册“[YourAppName] Photos”并在其中插入您的图像。图片也应该发布到用户墙上（如果他没有在他/她的隐私政策中阻止该功能）。

它现在有效；）

# android - 将 Android 通知从 FLAG_ONGOING_EVENT 切换为可取消

> ID：14924240
> 
> 赞同：2
> 
> 时间：2013-02-17T18:03:31.393
> 
> 标签：android, android-notifications

我有一个正在进行的任务，完成后，我希望通知可以取消。

为此，我创建了一个带有 notification.flags 为零的新通知，但该通知一直**无法取消**。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T10:17:51.760

显然，`FLAG_FOREGROUND_SERVICE`即使在重置标志之后，通知也无法变为可取消。

仅删除`FLAG_FOREGROUND_SERVICE`和使用`0`or`FLAG_ONGOING_EVENT`后，通知可以分别**取消**或**不可取消**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T18:13:03.477

请看这里：[Android更新通知](http://developer.android.com/guide/topics/ui/notifiers/notifications.html#Updating)

简而言之，你要做的是：

*   首次创建通知并为其分配通知 ID。
*   一旦您的服务完成执行，创建一个具有相同 ID 的新可取消通知
*   触发该通知，它应该使先前的通知可取消。

# php - PHP - 通过网络浏览器呈现动态网页

> ID：14924241
> 
> 赞同：2
> 
> 时间：2013-02-17T18:03:31.800
> 
> 标签：php, dynamic, web

我是 php 和编程的新手，我一直在学习教程，但是在尝试将产品显示到网页上时遇到了问题，这是正在测试的代码

```
<?php 

if (isset($_GET['id'])) {

    include "storescripts/connect_to_mysql.php"; 
    $id = preg_replace('#[^0-9]#i', '', $_GET['id']); 
    $sql = mysql_query("SELECT * FROM products WHERE id='$id' LIMIT 1");
    $productCount = mysql_num_rows($sql); 
    if ($productCount > 0) {

        while($row = mysql_fetch_array($sql)){ 
             $product_name = $row["product_name"];
             $price = $row["price"];
             $details = $row["details"];
             $category = $row["category"];
             $subcategory = $row["subcategory"];
             $date_added = strftime("%b %d, %Y", strtotime($row["date_added"]));
         }

    } else {
        echo "That item does not exist.";
        exit();
    }

} else {
    echo "Data to render this page is missing.";
    exit();
}
mysql_close();
?> 
```

当我尝试通过浏览器查看页面时，我收到消息“缺少呈现此页面的数据”

我知道这与

```
if (isset($_GET['id'])) { 
```

我假设这可能与“id”有关，但我不知道如何解决它。任何指示和帮助将不胜感激，如果这看起来很基本，但就像我说的那样，我是新手，无法解决这个问题。我整天都在努力

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T18:05:34.323

显然，`$_GET['id']`没有设置。如果您的链接类似于`http://www.example.com/index.php?id=32`，它将被设置。

其次，不要在未清理它们的情况下在查询中使用 GET/POST 变量！

第三，首先不要使用 mysql_query，而是使用 PDO 或 mysqli

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T18:08:53.120

当您看到 $_GET 时，它正在寻找 URL 中的参数。所以：

```
http://localhost/yourphpscript.php?id=123 
```

...是它所期待的。某些 ID 必须在 URL 中定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T18:31:37.483

你可以试试这段代码：

```
 <?php
    if (isset($_GET['id'])){ //Someone submitted a form or just prepended parameter to link
      include "storescripts/connect_to_mysql.php"; //Include script with mysql connection
      $id = preg_replace('#[^0-9]#i', '', $_GET['id']); //Sanitize input - remove everything besides numbers
      $result = mysql_query("SELECT * FROM products WHERE id='$id' LIMIT 1"); //Execute query. Only 1 product because of LIMIT 1
      if (mysql_num_rows($result)==1){ //If the product is found
         $product = mysql_fetch_assoc($result) ; //Take the product
         foreach ($product as $property => $value){ //Go through each property of product
           echo "<div> {$property} : {$value} </div>" ;
         }
      }
    } else {?>
      <form method="get" action="<?php $_SERVER['PHP_SELF'] ; ?>">
        <input type="text" name="id" />
        <input type="submit" value="Submit product ID"/>
      </form>
<?php    
}
    ?> 
```

只要问你是否有任何问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T19:03:29.530

学会追踪你的身份证。清理并检查发送 id 的 url 是否传递了正确的值，并在开始时再次检查值，如

```
 <?php
                    echo $_GET['id'];
                      ?> 
```

用它来知道你的 id 值是多少

# gcc - 如何在 GCC 中打印/转换十进制浮点值？

> ID：14924247
> 
> 赞同：5
> 
> 时间：2013-02-17T18:03:57.483
> 
> 标签：gcc, floating-point, decimal

GCC 文档描述了最近的GCC 中[有限的十进制浮点支持](http://gcc.gnu.org/onlinedocs/gcc/Decimal-Float.html#Decimal-Float)。

但我如何实际使用它？

例如在 Fedora 18、GCC 4.7.2 上。

一个简单的 C 程序，例如

```
int main()
{
    _Decimal64 x = 0.10dd;
    return 0;
} 
```

编译（使用 -std=gnu99 时） - 但我实际上如何做其他有用的事情 - 比如打印 _Decimal64 值或将字符串转换为 _Decimal64 值？

文档为（我假设）诸如 printf 之类的东西谈论了“单独的 C 库实现” - 我必须使用哪个附加库来 - 比如说 - 打印十进制浮点计算的结果？

我试过了

```
printf("%Df\n", x); 
```

这不起作用 - printf 刚刚产生：`%Df`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T18:26:38.693

正如文档所说，GCC 不提供 I/O，因为`printf`等是由 libc 而不是 GCC 提供的。

IBM 为 GNU C 库 libdfp 提供了一个扩展，它添加了`printf`挂钩以使 Decimal I/O 工作。我没用过，但你应该可以从 eglibc svn 存储库中获取代码并自己构建它：

```
svn co http://www.eglibc.org/svn/libdfp/trunk libdfp 
```

网络搜索表明 Ubuntu 将其打包为`libdfp`，并且它也可能在 RHEL6 上可用。

自述文件说：

```
When libdfp is loaded printf will recognize the following length modifiers:

        %H - for _Decimal32
        %D - for _Decimal64
        %DD - for _Decimal128

It will recognize the following conversion specifier 'spec' characters:

        e,E
        f,F
        g,G
        a,A  (as debuted in ISO/IEC TR 24732)

Therefore, any combination of DFP length modifiers and spec characters is
supported. 
```

# html - 如何在“div”元素中改变加载轮的位置

> ID：14924248
> 
> 赞同：2
> 
> 时间：2013-02-17T18:03:57.367
> 
> 标签：html, position, loading, spin.js

当用户按下按钮时，我正在使用 [`spin.js`](http://spin.js.org/)加载轮出现。

唯一的问题是我无法更改它出现的位置。

```
//Spinner Options
var opts = {
    lines: 13, // The number of lines to draw
    length: 7, // The length of each line
    width: 4, // The line thickness
    radius: 5, // The radius of the inner circle
    corners: 1, // Corner roundness (0..1)
    rotate: 0, // The rotation offset
    color: '#000', // #rgb or #rrggbb
    speed: 1, // Rounds per second
    trail: 60, // Afterglow percentage
    shadow: false, // Whether to render a shadow
    hwaccel: false, // Whether to use hardware acceleration
    className: 'spinner', // The CSS class to assign to the spinner
    zIndex: 2e9, // The z-index (defaults to 2000000000)
    top: 'auto', // Top position relative to parent in px
    left: 'auto' // Left position relative to parent in px
};
var spinner = new Spinner(opts).spin(); 
```

在选项的末尾，出现`top: 'auto', left:'auto'`。我试过输入“10”或“10px”。但它会引发错误。

如何在“div”元素中改变加载轮的位置？

# c - 减去链表元素时出现分段错误

> ID：14924249
> 
> 赞同：4
> 
> 时间：2013-02-17T18:03:58.537
> 
> 标签：c, linked-list

我试图减去两个连续的节点并将结果放在它们之前的一个新节点中。但是我遇到了分段错误，然后程序停止响应。

这`LinkList`是一个结构。

```
void subtract_node(LinkList **p)
{
    LinkList *q,*temp=NULL,*r;
    int i=0;
    q=r=*p;
    temp=(LinkList*)malloc(sizeof(LinkList));
    while(q!=NULL)
    {
        temp->item=q->next->item-q->item;
        temp->next=q;
        if(i==0)
        {
            *p=r=temp;
            r=r->next->next;
            q=q->next->next;
        }
        else
        {
            r->next=temp;
            temp=r;
            r=r->next->next;
            q=q->next->next;
        }
        printf("%d",i++);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T18:06:55.380

`next`如果不先对其内容进行空检查，则无法取消引用链接列表中的指针。具体来说，这个表达式

```
q->next->item - q->item 
```

`q->next`当is时会失败`NULL`。您确实在循环的标题中进行了检查`q`，`NULL`但您还需要检查`q->next`以避免崩溃：

```
while((q!=NULL) && (q->next != NULL)) {
    ...
} 
```

# java - 在 Java 中使用 XQuery 从 xml 文件中提取 CData

> ID：14924251
> 
> 赞同：1
> 
> 时间：2013-02-17T18:04:02.400
> 
> 标签：java, xml, xquery, kml

我有一个包含一组节点的 kml 文件（基本上是 xml）；名称、描述、坐标等。到目前为止，我只得到了两个值；名称和坐标。现在我也想获取描述数据，唯一的问题是它是 CData 并且在解析时会被忽略。

到目前为止，我一直在使用 XQuery 来获取数据。

```
XPathExpression expr = xpath.compile("//name/text()");
Object result = expr.evaluate(doc, XPathConstants.NODESET);
NodeList nodes = (NodeList) result;
for... 
```

在 kml 文件中，它只是 <![CDATA[.....]> 而不是“101”（实际字符串）使用相同的查询它什么也不返回。

kml 文件具有以下结构：

```
<Document>
  <Placemark>
    <name>101</name>
    <description><![CDATA[.....]]></description>
    <polygon>
      <coordinates>......</coordinates>
    </polygon>
  </Placemark>

  <Placemark>
  ....
  </Placemark>

</Document> 
```

有没有办法通过 XQuery 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T19:39:55.703

使用以下`XPath`表达式，即**不**指定`text()`：

```
XPathExpression expr = xpath.compile("//description"); 
```

并阅读`CDATA`内容`node.getTextContent()`

# android - Android，互联网连接，普通电话无应答

> ID：14924253
> 
> 赞同：0
> 
> 时间：2013-02-17T18:04:06.283
> 
> 标签：android, voice

我为我的 Galaxy SII 编写了简单的应用程序，用于与远程服务器的永久连接。一个 5 秒，它发送和接收数据。当应用程序工作时，没有人不能给我打电话。网络回答他 - 对话者不可用。当我使用像 K-9 这样的邮件客户端时，我也遇到了同样的情况。我使用 GPRS 或 3G 连接没关系。

构建互联网应用程序以避免这个问题的主要规则是什么（如果是？）（我的意思是普通传入电话连接的问题）？

我发送数据的普通代码（在远程服务中）是这样的：

```
While (condition)
{
try {
Thread.sleep(500);
} catch (InterruptedException e1) {
// TODO Auto-generated catch block
e1.printStackTrace();
}

try {
    out.write(data + "\n");
    out.flush();
} catch (InterruptedException e) {
    e.printStackTrace();
}
} 
```

问候， 阿蒂克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T20:47:33.130

首先，如果你想等待**5 秒**，你应该使用 `Thread.sleep(5000);` **not** `Thread.sleep(500);`半秒。

其次，考虑使用`Timer`代替`Thread.sleep()`和将数据发送到服务器`while(condition)`

使用上述建议修改代码后，尝试从 中进行测试`emulator`并模拟*电话呼叫*。

# c# - 从源 sql 数据库复制到目标 sql 数据库

> ID：14924259
> 
> 赞同：0
> 
> 时间：2013-02-17T18:05:07.710
> 
> 标签：c#, ms-access, sql-server-2008-r2, database-schema

我必须将数据从一个 SQL Server 数据库复制到另一个 SQL Server 数据库。

在目标 SQL Server DB 中存在诸如 Identity 和其他数据类型之类的列，但在源数据库中不存在。源表只有 term 列，但目标表有 id（身份）和 term 列。

在复制期间，我收到如下错误：

> 当 IDENTITY_INSERT 设置为 ON 或复制用户插入 NOT FOR REPLICATION 标识列时，必须为表“Terms”中的标识列指定显式值。

```
string colNames = "";
foreach (DataColumn col in ds.Tables[0].Columns)
{
    colNames += col.ColumnName + ",";
}
colNames = colNames.Remove(colNames.Length - 1, 1);
sqlCmd2.Parameters.Clear();

bool hasIdentityCol = false;
sqlCmd2.CommandType = CommandType.Text;

sqlCmd2.CommandText = "SELECT OBJECTPROPERTY(object_id('" + row["Table_Name"] + "'), 'TableHasIdentity')";
if (sqlCmd2.ExecuteScalar() != DBNull.Value && Convert.ToInt32(sqlCmd2.ExecuteScalar()) > 0)
{
    hasIdentityCol = true;
}

if (hasIdentityCol == true)
{
    sqlCmd2.CommandText = "SET IDENTITY_INSERT  dbo." + row["Table_Name"] + " ON";
    sqlCmd2.Transaction = sqlTran;
    sqlCmd2.ExecuteNonQuery();
}

sqlCmd2.CommandText = "INSERT INTO   " + txtDestinationDatabase.Text + ".dbo." + row["Table_Name"] + "(" + colNames + ")  SELECT " + colNames + " FROM " + txtSourceDatabase.Text + ".dbo." + row["Table_Name"];
sqlCmd2.Transaction = sqlTran;
sqlCmd2.ExecuteNonQuery();
if (hasIdentityCol == true)
{
    sqlCmd2.CommandText = "SET IDENTITY_INSERT " + txtDestinationDatabase.Text + ".dbo." + row["Table_Name"] + " OFF";
    sqlCmd2.Transaction = sqlTran;
    sqlCmd2.ExecuteNonQuery();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T20:47:27.960

如果打开`IDENTITY_INSERT`，则必须为标识列指定值。您说您的源表没有可以复制到标识列中的列。要完成这项工作，只需删除`SET IDENTITY_INSERT`语句并仅复制您实际拥有的列。

如果还有其他不可为空的列，您可能必须为这些列硬编码值。

# linux - 是否可以将目录中的所有文件重命名为 0.jpg、1.jpg、2.jpg 等？

> ID：14924260
> 
> 赞同：0
> 
> 时间：2013-02-17T18:05:09.237
> 
> 标签：linux, windows, file, rename

我在一个目录中有一堆图像（100+），所有图像都具有不同的名称。有没有办法将它们重命名，可能使用脚本（我正在运行 Windows），以 0.jpg、1.jpg、2.jpg 等......而不必单独重命名每个？如果在 Windows 中不可能，我可以启动一个 Linux 虚拟机并将它们复制过来。

到目前为止我有这个

```
@echo off
setlocal enableDelayedExpansion
set MYDIR=F:\Pictures\Wallpapers
set /a count = 0
for /F %%x in ('dir /B/D %MYDIR%') do (
  echo %%x
  @echo !count!
  set /a count+=1
) 
```

显示正确的文件名和正确的计数器，但是当我尝试时

```
ren %%x !count!.jpg 
```

告诉我“系统找不到指定的文件。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T18:34:47.883

您没有提供源文件的完整路径。不要忘记这`%%x`只是文件名；你需要预先`%MYDIR%`拥有一个完整的路径：

```
ren %MYDIR%\%%x !count!.jpg 
```

# mysql - MySQL 多个 Where 子句使用一个表

> ID：14924261
> 
> 赞同：0
> 
> 时间：2013-02-17T18:05:17.870
> 
> 标签：mysql, pdo

我有一张这样的桌子：

```
user_id, name, second_name 
```

样本数据：

```
1, "fred", "smith"
2, "john", "smith"
3, "karl", "johnson" 
```

我想找到所有名字叫“fred”的人。然后我想找到所有与“Fred”有相同第二个名字的人。如果可能，我想在一个查询中执行此操作。与此类似的查询：

```
SELECT * FROM people WHERE name=:first_name OR second_name=:result_from_first_row 
```

此示例查询的输出将是：

```
1, "fred", "smith"
2, "john", "smith" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T18:19:11.207

SELECT * FROM people WHERE second_name IN (SELECT second_name FROM people WHERE name=:first_name)

# java - Eclipse - 将每个主要方法分配给单独的控制台

> ID：14924262
> 
> 赞同：2
> 
> 时间：2013-02-17T18:05:22.063
> 
> 标签：java, eclipse, console, main

我目前正在编写一个程序，我想知道当我运行以下 main 方法时，eclipse 是否可以为每个 main 自动打开单独的控制台：

```
public static void main(String[] args) {
    object1.main(args);
    object2.main(args);
    object3.main(args);
    object4.main(args);
} 
```

我当前的解决方案是运行每个主要方法并在“显示选定的控制台”选项中选择适当的方法来查看，尽管每次我想测试我的程序时这是一个非常乏味的过程。如果您有任何建议，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T20:15:19.433

如果您`main`从另一个`main`方法中多次调用您的方法，这与多次调用任何其他静态方法没有什么不同。特别是，您的程序的所有这些实例都将在同一个 JVM 中执行。

相反，您可以使用简单的[Ant 脚本](https://ant.apache.org/manual/index.html)来启动程序的多个实例，例如：

```
<?xml version="1.0"?>
<project name="Test" default="run_external">
    <target name="compile">
        <delete dir="bin" />
        <mkdir dir="bin" />
        <javac srcdir="src" destdir="bin" />
    </target>
    <target name="run_many" depends="compile">
        <parallel>
            <java classname="test.Main" classpath="bin" />
            <!-- copy-paste 'java' block for more instances -->
        </parallel>
    </target>
    <target name="run_external" depends="compile">
        <parallel>
            <exec executable="xterm" dir="bin">
                <arg value="-e" />
                <arg value="java test.Main" />
            </exec>
            <!-- copy-paste 'exec' block for more instances -->
        </parallel>
    </target>
</project> 
```

该脚本定义了三个*目标*——执行哪个目标在`default`参数中确定。

*   第一个目标，`compile`只是调用`javac`来构建`src`目录中的所有源。这会在运行任何其他目标之前自动执行。
*   第二个目标，`run_many`简单地并行启动您的 Main 类几次。每个实例将在单独的 JVM 中运行，但所有这些实例的输出将在 Eclipse 的控制台窗口中混合。
*   第三个目标，`run_external`启动一个`xterm`终端仿真器，运行相应的Java 进程，即对于您的程序的每个实例，都应该弹出一个新终端。（在 Windows 上执行此操作时，您可能必须使用`cmd.exe`或类似的。）

不确定这是否是您要找的。希望这可以帮助。

# javascript - JavaScript jQuery 花式框

> ID：14924263
> 
> 赞同：0
> 
> 时间：2013-02-17T18:05:22.450
> 
> 标签：javascript, jquery, fancybox

我对fancybox有疑问。我在这里阅读了一些答案，但没有找到解决我的问题的方法。我的网页中加载了这些脚本：

花式盒子的脚本：

```
<script type="text/javascript" src="fancybox/jquery.mousewheel-3.0.4.pack.js"></script>
<script type="text/javascript" src="fancybox/jquery.fancybox-1.3.4.pack.js"></script> 
```

我的页面包含的其他脚本：

```
 <script src="assets/js/jquery-1.8.3.min.js"></script>
    <script src="assets/js/jquery.plugins.min.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>
    <script src="assets/plugins/selectnav/selectnav.min.js"></script>
    <script src="assets/plugins/tweet/jquery.tweet.js"></script>
    <script src="assets/plugins/fitvids/jquery.fitvids.js"></script>
    <script src="assets/plugins/isotope/jquery.isotope.min.js"></script>
    <script src="assets/plugins/sharrre/jquery.sharrre-1.3.4.min.js"></script>
    <script src="assets/plugins/revolutionslider/js/jquery.themepunch.revolution.min.js"></script>
    <script src="assets/js/template.js"></script>
    <script src="assets/js/customizer.js"></script> 
```

问题是，当我拥有所有这些花哨的盒子时，它就不起作用了。我尝试了许多组合，发现 fancbox 工作的唯一可能是从页面中删除脚本'jquery-1.8.3.min.js'。如果我删除它，下拉菜单不起作用，而fancybox 可以。

问题出在哪里？我只是复制了脚本，而不是正文代码，因为我认为它不是必需的。

# c# - 使用 Linq-to-SQL 从存储过程中检索多个数据

> ID：14924266
> 
> 赞同：2
> 
> 时间：2013-02-17T18:05:41.343
> 
> 标签：c#, sql-server-2008, linq-to-sql, stored-procedures, silverlight-4.0

我正在使用 Silverlight 和 Linq-to-SQL 与数据库进行通信。

我有一个存储过程，它接收 2 个参数（`PFOID`和`Quantity`）`Userid`并返回一个产品名称。

如果我们发送多个值，例如多个`pfoid`'s 和`quantity`'s，它将返回多个产品名称，如下所示

存储过程看起来像这样..

```
ALTER PROCEDURE [PFO].[PFOValidateUpdateData]
    @PfoIDs xml, -- list of PFO ID's
    @UserID uniqueidentifier --The Identity of the User making the call.
AS
BEGIN
    -- SET DEFAULT BEHAVIOR
    SET NOCOUNT ON          -- Performance: stops rows affected messages
    SET DEADLOCK_PRIORITY LOW   -- This SP to be the Deadlock victim

    -- Initialise Lock-Timeout and Deadlock vars for Insert
    DECLARE @iLockTimeoutRetries as int 
    DECLARE @iDeadLockRetries as int
    DECLARE @dtLockTimeoutSleepInterval as datetime 
    DECLARE @dtDeadlockSleepInterval as datetime
    DECLARE @iErrorNumber as int

    SET @iLockTimeoutRetries = 0 
    SET @iDeadLockRetries = 0 
    SET @dtLockTimeoutSleepInterval = sCommon.fnLockTimeoutSleepInterval()
    SET @dtDeadlockSleepInterval= sCommon.fnDeadlockSleepInterval()
    SET @iErrorNumber = 0

    -- procedure specific
    DECLARE @idoc as int
    DECLARE @IsBrightstarUser as bit

    RETRY:
    BEGIN TRY
        --Create Temp table to store stores!
        CREATE TABLE [#PFOList]
        (
            [PFOId] nvarchar(50),
            [Quantity] INT
        )

        --Create Temp table to store User stores!
        CREATE TABLE [#UserStoreList]
        (
            [StoreID_XRef]      nvarchar(50)
        )

       print CONVERT(varchar(1000), @PfoIDs)

        --Create Document
        EXEC sp_xml_preparedocument @idoc OUTPUT, @PfoIDs

        -- Append to new list of Store records
        INSERT INTO [#PFOList] (
                    [PFOId],
                    [Quantity]
                    )
        SELECT  [PFOID],[Quantity]
        FROM OPENXML (@idoc, 'ArrayOfString/string',2)
        WITH( [PFOID] nvarchar(50),[Quantity] [INT]) Stores
        --WHERE [PFOId] Is Not NULL

        -- Clean UP
        exec sp_xml_removedocument @iDoc

        -- are we dealing with a brightstar user?
        SET @IsBrightstarUser = CASE WHEN exists
            (SELECT *
            FROM dbo.aspnet_UsersInRoles AS uir inner join
            dbo.aspnet_Roles  AS roles ON uir.RoleId = roles.roleid
            WHERE roles.rolename = 'Brightstar Employee' and uir.userid = @userid)
            THEN 1 ELSE 0 END

         --Get User Storelist
         INSERT INTO [#UserStoreList] (
                    [StoreID_XRef]
                    )
         SELECT s.StoreId_XRef  
         FROM  PFO.UserStoreLink us(nolock)
         INNER JOIN PFO.Store  s(nolock)
         ON us.StoreId=s.StoreId
         where UserId=@UserID        

         --Select * from [#PFOList]
         --SELECT @IsBrightstarUser AS ISBrightstaruser
         --SELECT * from [#UserStoreList]

    --If BrightstarCustomer Update all the Quantities.
    IF @IsBrightstarUser=1
    BEGIN
               UPDATE 
                    PFO.PFO
                SET
                     IsBrightstarReviewComplete = 1
                    ,[ModifyingUsersID] = @UserID
                    ,[ModifiedDate] = getdate()
                    ,[PlannedQty] = pfol.[Quantity]
                    ,[BrightstarReviewedQty]=pfol.[Quantity]
                FROM
                    PFO.PFO as pfo
                    INNER JOIN [#UserStoreList] as stores on pfo.StoreId_XRef=stores.StoreID_XRef           
                    INNER JOIN [#PFOList] as pfol on pfo.PFOId =  pfol.PFOId 
                WHERE @IsBrightstarUser = 1     
    END
    ELSE BEGIN    
           --Update Non Contrained Orders
           UPDATE 
                PFO.PFO
            SET
                 [ModifyingUsersID] = @UserID
                ,[ModifiedDate] = getdate()
                ,[PlannedQty] = pfol.[Quantity]
            FROM
                PFO.PFO (nolock) as pfo
                INNER JOIN [#UserStoreList] as stores on pfo.StoreId_XRef=stores.StoreID_XRef           
                INNER JOIN [#PFOList] as pfol on pfo.PFOId =  pfol.PFOId 
            WHERE pfo.IsBrightstarReviewComplete=1  AND IsConstraint=0

           --SELECT * from PFO.PFO (nolock) where PFOId='04676723-2afb-49ff-9fa1-0131cabb407c'

        --Update Contrained Orders
        --Get Existing quantities for the User
            CREATE TABLE #ExistingProductQuantity
            (
              [PfoID]  nvarchar(100)  
             ,[Product]  nvarchar(255) 
             ,[PlannedQty]  INT 
             ,[BrightstarReviewedQty]  INT    
            )

            CREATE TABLE #CustProductQuantity
            (
              [Product]  nvarchar(255)
             ,[IsUpdatable]  BIT    
            )

            INSERT INTO #ExistingProductQuantity
            ( [PfoID],[Product],[PlannedQty],[BrightstarReviewedQty])
            SELECT PFOId,InventoryId,PlannedQty,BrightstarReviewedQty
            FROM PFO.PFO as pfo
            INNER JOIN [#UserStoreList] as stores on pfo.StoreId_XRef=stores.StoreID_XRef   
            WHERE pfo.IsBrightstarReviewComplete=1 AND IsConstraint=1       

            UPDATE 
            #ExistingProductQuantity
            SET [PlannedQty]=pfol.[Quantity]
            FROM #ExistingProductQuantity eoq
            INNER JOIN [#PFOList] as pfol on eoq.PFOId =  pfol.PFOId 

            INSERT INTO #CustProductQuantity
            (  [Product],[IsUpdatable] )
            SELECT 
            [Product],
            CASE WHEN SUM(PlannedQty)<=SUM(BrightstarReviewedQty) THEN 1 ELSE 0 END
            FROM #ExistingProductQuantity
            GROUP BY [Product]

            --SELECT * from #ExistingProductQuantity
            --SELECT * from #CustProductQuantity

           --Update the products that can be updatable
            UPDATE 
                PFO.PFO
            SET
                 [ModifyingUsersID] = @UserID
                ,[ModifiedDate] = getdate()
                ,[PlannedQty] = pfol.[Quantity]
            FROM
                PFO.PFO as pfo
                INNER JOIN #UserStoreList as stores on pfo.StoreId_XRef=stores.StoreID_XRef         
                INNER JOIN #PFOList as pfol on pfo.PFOId =  pfol.PFOId 
                INNER JOIN #CustProductQuantity as pr on pr.Product=pfo.InventoryId 
            WHERE pfo.IsBrightstarReviewComplete=1 AND pr.IsUpdatable=1 AND IsConstraint=1

           --Return the products that are not updatabele    
             select  [Product]          
             FROM #CustProductQuantity
             where [IsUpdatable]=0
    END 
    END TRY
    BEGIN CATCH
        -- Get the ErrorNumber
        Set @iErrorNumber = ERROR_NUMBER()

        --Handle Deadlock situation (Deletes, Inserts & Updates)
        IF @iErrorNumber = 1205  
        BEGIN
            -- If we have not made enough attempts to break the lock
            IF @iDeadLockRetries < sCommon.fnMaxDeadlockRetries()
            BEGIN
                -- Increment the Attempt count
                SET @iDeadLockRetries = @iDeadLockRetries + 1
                -- Pause to allow the deadlock contention to clear
                WAITFOR DELAY @dtDeadlockSleepInterval
                GOTO RETRY
            END
        END

        -- Handle Lock Timeout situation (Deletes, Inserts & Updates)
        IF @iErrorNumber = 1222  
        BEGIN       
            -- If we have not made enough attempts to break the Deadlock
            IF @iLockTimeoutRetries < sCommon.fnMaxLockTimeoutRetries()
            BEGIN
                -- Increment the Attempt count
                SET @iLockTimeoutRetries = @iLockTimeoutRetries + 1
                -- Pause to allow the lock contention to clear
                WAITFOR DELAY @dtLockTimeoutSleepInterval
                GOTO RETRY
            END
        END

        exec Common.RethrowError 
    END CATCH
END 
```

结果如下..

```
 Product
 6435LVWK-360-CD819E3
 NSCHI535C1097I360-4C 
 NSCHU485C1819I360-0C

 Return Value
 0 
```

我的 Linq-to-SQL 连接是这样的

```
[global::System.Data.Linq.Mapping.FunctionAttribute(Name="PFO.PFOValidateUpdateData")]
    public int PFOValidateUpdateData([global::System.Data.Linq.Mapping.ParameterAttribute(Name = "PfoIDs", DbType = "Xml")] System.Xml.Linq.XElement pfoIDs, [global::System.Data.Linq.Mapping.ParameterAttribute(Name = "UserID", DbType = "UniqueIdentifier")] System.Nullable<System.Guid> userID)
    {
        IExecuteResult result = this.ExecuteMethodCall(this, ((MethodInfo)(MethodInfo.GetCurrentMethod())), pfoIDs, userID);
        return ((int)(result.ReturnValue));
    } 
```

我正在尝试从存储过程中检索所有数据，但是当我调试它时，返回值为“o”..

如果您能帮我检索存储过程返回的所有数据，我将不胜感激……非常感谢……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T22:40:01.073

好吧，我知道这不是正确的方法...暂时，它对我有用...我创建了另一个表，其中包含两列 ProductId 和 ID，我在设计器中插入存储过程返回的值.cs 我要退回桌子，

```
[global::System.Data.Linq.Mapping.FunctionAttribute(Name="PFO.PFOValidateUpdateData")]
        public ISingleResult<PFOValidData> PFOValidateUpdateData([global::System.Data.Linq.Mapping.ParameterAttribute(Name = "PfoIDs", DbType = "Xml")] System.Xml.Linq.XElement pfoIDs, [global::System.Data.Linq.Mapping.ParameterAttribute(Name = "UserID", DbType = "UniqueIdentifier")] System.Nullable<System.Guid> userID)
        {
            IExecuteResult result = this.ExecuteMethodCall(this, ((MethodInfo)(MethodInfo.GetCurrentMethod())), pfoIDs, userID);
            return ((ISingleResult<PFOValidData>)(result.ReturnValue));
        } 
```

而在 Domainservice

```
List<string> PFOValidateUpdateData(string pfoIds, Guid userID)
        {
           List<string> productIdList = new List<string>();

      // Acquire the int  
               result = this.DataContext.PFOValidateUpdateData(element, userID);

               foreach (var item in result)
               {
                   productIdList.Add(item.ProductID);
               }
 return productIdList; 
```

获取存储过程返回的多个值....

请让我知道是否有更好的方法来解决这个问题...谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T21:33:11.450

如果您的存储过程返回 nvarchar 的集合，则您的 Linq2Sql 方法的签名不正确。它不应该返回一个 int，而是一个[ISingleResult](https://stackoverflow.com/questions/4433491/dbml-generates-isingleresultobject-from-my-stored-procedure-when-i-want-a-coll)。

所以正确的签名将是：

```
public ISingleResult<string> PFOValidateUpdateData(...)
{
    IExecuteResult result = this....;
    return (ISingleResult<string>)result.ReturnValue;
}

var products = PFOValidateUpdateData(...).ToList(); 
```

如果要在存储过程中返回多个 SELECT 的结果，则必须使用[IMultipleResults](https://stackoverflow.com/questions/371445/linq-to-sql-stored-procedures-with-multiple-results)。

# three.js - 三.js + 网格修改器

> ID：14924268
> 
> 赞同：1
> 
> 时间：2013-02-17T18:05:47.287
> 
> 标签：three.js, webgl, copperlicht, pre-3d

来自 ActionScript + Papervision 我熟悉“AS3DMod”，这是一个修改 3D 网格以弯曲、扭曲等的库。现在我正在使用 THREE.js 并发现：“#MOD3 As3dMod 3D Modifier Library port for Javascript and Three.js, Pre3d and J3D and Copperlicht”但是对于任何远程当前版本的 THREE.js（以及是为画布渲染而不是 webGL 编写的）。创建者无法更新。有谁知道任何类似的 3D 库可以在 webGL 中“弯曲、扭曲、膨胀”3D 网格？我不够熟练，无法自己更新。感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T19:10:33.890

我不知道，但根据您使用的修饰符，自己编写修饰符可能不会太难。通常，您可以将 js 中的逻辑重用于 Canvas 渲染器，而对于 WebGLRenderer，您可以在 Vertex 着色器中实现它。

# java - 连接到远程heroku实例时neo4j rest graphdb挂起

> ID：14924284
> 
> 赞同：0
> 
> 时间：2013-02-17T18:06:57.157
> 
> 标签：java, rest, heroku, neo4j

```
public class Test  
{  
       private static RestAPI rest = new RestAPIFacade("myIp","username","password");  
       public static void main(String[] args)
       {
              Map<String, Object> foo = new HashMap<String, Object>();
          foo.put("Test key", "testing");
              rest.createNode(foo);  
       }
} 
```

没有输出它只是无限期地挂在连接上。

环境：
Eclipse JDK 7
neo4j-rest-binding 1.9：[https](https://github.com/neo4j/java-rest-binding)
://github.com/neo4j/java-rest-binding Heroku

关于为什么这只是挂起的任何想法？

以下代码有效：

```
 public class Test  
    {  
           private static RestAPI rest = new RestAPIFacade("myIp","username","password");  
           public static void main(String[] args)
           {
                        Node node = rest.getNodeById(1);
           }
    } 
```

因此，我可以正确地检索远程值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T18:48:31.823

我想这是由于缺乏交易使用造成的。默认情况下，neo4j-rest-binding 将多个操作聚合到一个请求中（也就是一个事务）。有两种方法可以解决这个问题：

1.  `-Dorg.neo4j.rest.batch_transaction=false`通过为您的 JVM设置将事务行为更改为“1 个操作 = 1 个事务” 。请注意，这可能会影响性能，因为每个原子操作都是单独的 REST 请求。
2.  在您的代码中使用事务：

.

```
RestGraphDatabse db = new RestGraphDatabase("http://localhost:7474/db/data",username,password);
Transaction tx = db.beginTx();
try {
    Node node = db.createNode();
    node.setPropery("key", "value");
    tx.success();
} finally {
    tx.finish();
} 
```

# java - 循环遍历一个 int 数组并在其中使用模数

> ID：14924285
> 
> 赞同：1
> 
> 时间：2013-02-17T18:07:00.640
> 
> 标签：java, arrays, modulo

我需要实现一种方法，该方法返回具有奇数索引的所有元素的交替总和减去具有偶数索引的所有元素的总和。返回的总和应该是`-1`。`1 - 4 + 9 - 16 + 9 = -1`.

这是我的代码：

```
public class Arrays
{
public static void main(String[] args){

    int [] data = {1 ,4, 9, 16, 9};

    oddAndEven(data);
}

public static int[] oddAndEven(int[] data){
    int sum = 0;
    int sumA = 0;
    int index = data.length;
    for(int i:data){
    if(index % sumA == 1){
            sum = sum-i;
        }
    else{
        sum = sum+i;
    }
}
    System.out.println(sum);
    return sum;
    }
} 
```

有人可以告诉我哪里出错了吗？

这是一堂课，所以请原谅我的基本代码和错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T18:35:59.383

那这个呢 ？

```
public class ArrayMeNow {

    public static void main(String[] args) {
        int [] data = {1 ,4, 9, 16, 9};

        int result = oddAndEven(data);
        System.out.println(result);
    }

    private static int oddAndEven(int[] data) {
        int multiplier = 1;
        int result = 0;

        for(int v:data){
            result += v * multiplier;
            multiplier *= -1;
        }

        return result;
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T18:37:53.163

```
public static int oddAndEven(int[] data) {
    int sum = 0;

    for (int i=0;i<data.length;i++) {
        if (i % 2 == 1) {
            sum = sum - data[i];
        } else {
            sum = sum + data[i];
        }
    }
    System.out.println(sum);
    return sum;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T18:38:05.660

`for(int i:data)`不会改变索引的值。并且`sumA`应该是`2`。

将您的 for 循环更改为：

```
for (int i = 0; i < data.length; i++)
  if (i % 2 == 1)
    sum -= data[i];
  else
    sum += data[i]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-17T18:38:30.390

我会这样做：

```
public class test {
    public static void main(String[] args) {

    int [] data = {1 ,4, 9, 16, 9};
    oddAndEven(data);
}

public static void oddAndEven(int[] data) {

    int total = 0;

    for (int i = 0; i < data.length; i++)
    {
        if (i%2==0)
            total = total + data[i];
        else
            total = total - data[i];
    }

    System.out.println(total);
} 
```

1.  我已经摆脱了方法中的 return 并将其更改为 void （因为您正在打印其中的结果，因此无需返回它。

2.  您不需要两个不同的总和值，也不需要存储数组的长度。

3.  使用总值并将其设置为 0。然后 for 循环遍历数组的长度。%2 将数字除以 2 并确定余数。所以对于第一个循环，它将计算 0/2 并计算出余数（显然是 0）。因为它 ==0，所以执行 for 循环中的第一个 if 语句（添加数字）。
    第二次通过，它计算 1/2，即 0，剩余 1 - 所以执行 else 语句，依此类推。

4.  此外，请注意我是如何去掉 if 和 else 语句周围的大括号的。只要这些语句是单行，就不需要大括号 - 取出往往会使程序更易于阅读（在我看来）。显然，如果它们下面需要多于一行，则需要读取大括号。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-18T04:28:44.400

您必须返回**NOT**`sum`类型。这是另一种方法。`int` **`int[]`**

 **```
public static int doAlternateAddSubOn(int[] array) {
    int sum = 0;
    for(int i=0; i<array.length; i++) {
        // When index 'i' is Even, the position is Odd
        sum = (i%2==0) ? sum+array[i] : sum-array[i];
    }
    return sum;
} 
```**

# ios - handleTurnEventForMatch:didBecomeActive：回调仅在某些时候到达

> ID：14924294
> 
> 赞同：8
> 
> 时间：2013-02-17T18:07:41.323
> 
> 标签：ios, callback, notifications, gamekit, gkturnbasedmatch

[这是对这个问题](https://stackoverflow.com/questions/7935336/how-do-i-get-notifications-for-gamekit-turn-based-matches)的跟进。如果您没有收到**任何**回调`handleTurnEventForMatch:didBecomeActive:`，请尝试那里的答案。

在我的游戏中，我有时只会收到回合事件通知。但是如果我回到`matchMakerViewController`并重新加载比赛，状态总是正确的。

我的游戏在每个回合中多次上传回合状态。有趣的是，如果另一台设备收到一个通知对手轮到的通知，它就不太可能收到同一轮的进一步通知。但是，这不是 100%。

一般来说，我的互联网连接似乎工作得很好。

有什么想法可能导致这种情况吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-13T11:14:49.750

我终于弄清楚了问题所在。

好吧，如果您使用`GKTurnBasedMatchmakerViewController`，那么它会从您当前的委托中窃取委托。

它可能有类似的东西：

```
[GKTurnBasedEventHandler sharedTurnBasedEventHandler].delegate = self; 
```

这很有意义，因为当游戏中心发生更改时，视图控制器需要更新，因此它成为`GKTurnBasedEventHandler`.

如果您想将委托返回给您自己的对象，但您应该输入以下行：

```
[GKTurnBasedEventHandler sharedTurnBasedEventHandler].delegate = self; 
```

在`GKTurnBasedMatchmakerViewControllerDelegate`协议中所有功能的最顶端。

# android - 手机不充电时应用服务停止

> ID：14924295
> 
> 赞同：2
> 
> 时间：2013-02-17T18:07:47.203
> 
> 标签：android, service, background-process, timertask

我的活动通过调用启动服务`startservice()`。为了简化我的问题，假设该服务将是一个计数器，并且该计数器将每 10 秒增加一次。

```
Timer t_counter;
int counter = 0; 

@Override   
public int onStartCommand(Intent intent, int flags, int startId) {

    t_counter = new Timer();
    t_counter.schedule(new TimerTask() { 
        @Override
        public void run() {
            counter++;
            Log.d("counter: ",Integer.toString(counter));
        }}, 0, 10000);

    return Service.START_STICKY;
} 
```

当手机正在充电时（或处于调试模式 - 因为我可以看到`Logcat`），服务按预期工作。`Logcat`无论应用程序是否处于后台，大约每 10 秒显示一次调试信息。但是当我拔掉电话时，服务会在一段时间后停止运行。应用程序（启动服务的活动）处于活动状态时的事件。请注意，服务没有被破坏，只是被搁置，或者类似的东西。

因为当我再次插入手机时，计时器会继续，并且计数器的值会从我刚刚拔下手机的值开始增加。因此，如果服务已被销毁，那么价值将再次为零。（我也在调试服务的生命周期，但看不到`onStartCOmmand()`，`onDestroy()`会被调用）

我已经为它搜索了解决方案，但我认为我没有为这种行为找到正确的答案。我知道我应该使用[`AlarmManager`](https://stackoverflow.com/questions/8713361/keep-a-service-running-even-when-phone-is-asleep)而不是 Timer。[或者，如果我将服务前台](https://stackoverflow.com/a/14078075/1342413)放在，它也可以工作`startForeground()`，或者单独的[进程](http://developer.android.com/guide/components/processes-and-threads.html#Threads)可以解决这个问题。但我想知道为什么我的解决方案适用于充电。另外，我在哪里可以找到有关此“空闲”服务状态的信息。（不执行定时器计划，但不破坏）谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T18:11:02.257

`lock`如果您的服务必须在后台运行，您需要保留

```
PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
PowerManager.WakeLock wl = 
                      pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, "My Tag");
wl.acquire();
// when you done
wl.release(); 
```

更好的方法是使用`AlarmManager`，因为保持服务一直运行会耗尽电池并浪费系统资源。

# jquery - jQuery 点击更改 CSS

> ID：14924298
> 
> 赞同：-3
> 
> 时间：2013-02-17T18:08:08.593
> 
> 标签：jquery, onclick

我有一个简单的问题，但不知道如何实现这一点。我所知道的是我必须使用该`click()`功能。

基本上，我有一个 id 的 div `#box1`。我应用了 CSS 样式`overflow:auto`，以便在表格长度（#box1 内的长表格）超过 div 的宽度时会有一个垂直滚动条`#box1`。

现在我想在 div 下方添加一个链接。该链接应执行以下操作：

*   单击时，将 div 的 CSS`#box1`添加`overflow:auto`到`overflow:visible`
*   同时，虽然它更改了上面的 CSS，但链接应该更改为显示一个新链接（旧链接消失），`overflow:auto`当单击该链接时，该链接将更改回 CSS。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T18:13:35.627

你可以使用`css`方法。

```
$('#myButton').click(function(event) {
    event.preventDefault();
    $('#box1').css('overflow', function(i, o) {
        return o == 'auto' ? 'visible' : 'auto';
    })
}); 
```

而不是隐藏/显示 2 个不同的按钮，您可以使用`text`方法：

```
$('#myButton').click(function(event) {
    // ...  
    $(this).text(function(i, text){
       return text == 'show' ? 'hide' : 'show';
    })
}); 
```

[http://jsfiddle.net/u6Nc8/](http://jsfiddle.net/u6Nc8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T18:13:12.330

**小提琴：http: [//jsfiddle.net/wbjSX/](http://jsfiddle.net/wbjSX/)**

```
$('#theLink').click(function() {
    if (turnToVisible) {
        $('#box1').css('overflow', 'visible');
        turnToVisible = false;
        $('#theLink').text('foobar');
    }
    else {
        $('#box1').css('overflow', 'auto');
        turnToVisible = true;
        $('#theLink').text('foobarbaz');
    }
}); 
```

这样的事情应该让你开始。

它基本上将您想要的 div 存储在一个变量`turnToVisible`中。您可以使用该`text`功能来更改链接的文本，并使用该`css`功能来更改 CSS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T18:15:41.437

好的，您需要打开文本：

```
<a id="myDivLink" href="javascript:void(0);">Disable scrolling</a>
<script type="text/javascript">
$(document).ready(function(){
  $("#myDivLink").click(function(){
    var anchor = $(this);
    if(anchor.html()==="Disable scrolling") {
      $("#myDiv").css("overflow","visible");
      anchor.html("Enable scrolling");
    } else {
      $("#myDiv").css("overflow","auto");
      anchor.html("Disable scrolling");
    }
  });
});
</script> 
```

怎么样？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T18:18:52.580

HTML：

```
<div id="#box1"></div>
<a href="#" id="#toggle">Toggle</a> 
```

JS：

```
(function($){
    $(document).ready(function(){
        $("#toggle").click(function(e){
            e.preventDefault();
            if($("#box1").css("overflow") === "auto"){
                $("#box1").css("overflow", "visible");
            }else{
                $("#box1").css("overflow", "auto");
            }
        });
    });
}(window.jQuery)); 
```

基本上，您需要阻止链接加载另一个页面`e.preventDefault()`。然后，如果框有`overflow: auto`，请将其设置为`overflow: visible`，反之亦然。

# android - 在 Android 中预加载网页（使用 WebView？）

> ID：14924302
> 
> 赞同：16
> 
> 时间：2013-02-17T18:08:38.767
> 
> 标签：android, android-activity, webview, android-webview

我想在 Android 中预加载一个网页。网页包含文本和图形元素。该网页将在未来显示在尚未创建的 Activity 中。

据我了解，例如 WebView 必须与 Activity 绑定，因此无法将 WebView 用于此任务。

有人有任何不涉及解析html页面和“手动”下载所有元素的建议吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-17T18:32:07.653

根据 android 的文档：**出于明显的安全原因，您的应用程序有自己的缓存、cookie 存储等——它不共享浏览器应用程序的数据。**

因此，我们可以通过以下方式巧妙地利用上述信息：

*   每当您想开始加载您的网站时，请创建一个新的 WebView 对象并从中请求 url。代码将如下所示：

    ```
     WebView view = new WebView(context);
     view.loadUrl(myBigWebSite); 
    ```

*   Android 将缓存该 webview 数据，当您从另一个活动请求 loadUrl 时，它应该已经加载。

    ```
     // in your WebView activity
     myWebView.loadUrl(myBigWebSite); 
    ```

有关 webViews 的更多信息，请访问文档页面：[WebView doc](http://developer.android.com/reference/android/webkit/WebView.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T18:17:51.737

您可以将所有必需的文件（图像等）下载到网络线程上的某个文件夹中，然后使用类似

```
webview.loadUrl("file:///my_cached_folder/index.html"); 
```

如果引用并存在，也将从该文件夹中挑选图像。[在此处](https://stackoverflow.com/questions/14773336/how-open-local-html-page-in-browser)阅读有关在 webview 上打开本地文件的信息。

# sql-server - 在数据流中向脚本组件发送 0 行时是否应该调用脚本组件？

> ID：14924305
> 
> 赞同：1
> 
> 时间：2013-02-17T18:08:46.937
> 
> 标签：sql-server, ssis

我一直在使用的 SSIS 包遇到了一个非常奇怪的情况。

我有一个 foreach 循环，其中包含一个数据流任务，该任务为循环之前填充的记录集对象中的每条记录执行。

在数据流任务中，我有一个 ADO.NET 源、一个查找，最后是一个目标脚本组件。脚本组件在*PreExecute*中初始化数据表，添加输入中的每一行，然后将数据表作为表值参数发送到存储过程。查找任务设置为仅将不匹配的行发送到脚本组件。

奇怪的情况是，我发现当查找中的所有行都匹配时，脚本组件仍在执行，发送给它的行数为 0。这导致存储过程中出现错误，因为我只希望在脚本组件收到超过 0 行时调用它。我通过首先检查是否有实际传入的数据来纠正存储过程本身中的问题。

在其他包中，我在查找后设置目标脚本组件的情况非常相似，其中传入了 0 条记录，并且没有看到那里发生这种行为 - 唯一的区别是它们不在 foreach 循环中。

所以，我真的很想知道，以供将来参考，如果它是一个 SSIS 脚本组件的预期行为，它将在传入 0 行的情况下执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T19:27:12.703

**`PreExecute`****`PostExecute`**即使没有从以下输出重定向到配置为*Data Flow Task*中的组件的**行**，方法也会执行。*`Lookup Transformation`**`Script Component`**`Destination`*

 **   *查找匹配输出*
*   *查找无匹配输出*

确保以相同方式配置您认为工作方式与不工作的程序包不同的程序包。*

# django-authentication - django-facebook 未登录 facebook 测试用户

> ID：14924307
> 
> 赞同：0
> 
> 时间：2013-02-17T18:08:53.993
> 
> 标签：django-authentication, django-facebook

我正在创建一个网络应用程序，允许用户使用他们的 Facebook 帐户进行注册。我正在使用 django-facebook 对新用户进行身份验证/注册。我正在尝试我认为最简单的设置，使用 django 注册而不是 userena。当我使用自己的 Facebook 帐户时，一切正常：我被要求确认我允许该应用访问我的个人资料，在 auth_user 表中创建一个新帐户并且我已登录。

但是，当我以测试用户身份登录 Facebook 时，我确认我允许该应用程序，然后我被重定向到 facebook/connect/?facebook_login=1&attempt=1&code=AQBM0-z……新帐户未创建。

这是我的相关设置：

```
TEMPLATE_CONTEXT_PROCESSORS = (
    'django_facebook.context_processors.facebook',
    'django.contrib.auth.context_processors.auth',
    'django.core.context_processors.debug',
    'django.core.context_processors.i18n',
    'django.core.context_processors.media',
    'django.core.context_processors.static',
    'django.core.context_processors.tz',
    'django.contrib.messages.context_processors.messages',
)

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
)

AUTHENTICATION_BACKENDS = (
    'django_facebook.auth_backends.FacebookBackend',
    'django.contrib.auth.backends.ModelBackend',
)

FACEBOOK_APP_ID = NNN
FACEBOOK_APP_SECRET = NNNN
FACEBOOK_REGISTRATION_BACKEND ='django_facebook.registration_backends.FacebookRegistrationBackend'

AUTH_PROFILE_MODULE = 'django_facebook.FacebookProfile' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T18:10:33.667

似乎整个问题是 django-facebook 从 facebook 数据中删除了长电子邮件。这使得身份验证无法创建帐户。

我刚刚在 api.py 中注释掉了以下几行

```
if len(user_data.get('email', '')) > 75:
    #no more fake email accounts for facebook
    del user_data['email'] 
```

# ember.js - 如何在emberjs中解析模型中的嵌套数组

> ID：14924308
> 
> 赞同：0
> 
> 时间：2013-02-17T18:09:03.493
> 
> 标签：ember.js

我无法弄清楚如何从我们的后端服务器解析一些 json 数据。首先，这是它返回的数据：

```
{
  "newsitem": {
    "id": "1",
    "title": "Some title",
    "images": [
        "IMG_0147.JPG",
        "desert1.jpg"
    ],
    "videos": [
        "AEOpX8tmiUI",
        "kxopViU98Xo"
    ]
  }
} 
```

我试图在我的模型中解析这个：

```
App.Newsitem = DS.Model.extend({
    title: DS.attr('string'),

    images: DS.attr('array'),
    videos: DS.attr('array')
}); 
```

但这给了我一个不支持“数组”的错误。我应该如何解析这些数据，我应该如何通过把手模板打印出 DOM`images`和 DOM 中的值？`videos`我正在寻找最佳实践答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:56:58.850

很多功劳归功于`nerdyworm`频道`#emberjs`的答案：您必须为您的新数据类型创建自己的序列化/反序列化方法，如下所示：

```
DS.JSONTransforms.array = {
  serialize: function(jsonData) {
    return Ember.typeOf(jsonData) == 'array' ? jsonData : [];
  },
  deserialize: function(externalData) {
    return Ember.typeOf(externalData) == 'array' ? externalData : [];
  }
} 
```

然后在您的车把模板中，您可以执行以下操作：

```
<script type="text/x-handlebars" data-template-name="newsitem">
    <div class="detail">
        {{#each image in images}}
            {{image}}<br/>
        {{/each}}
    </div>
</script> 
```

# asp.net - 代码仍然在新页面上加载内容

> ID：14924312
> 
> 赞同：0
> 
> 时间：2013-02-17T18:09:59.097
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2, razor

嗨，我的 MVC 应用程序有问题。我想点击 ActionLink > 从服务器加载数据 > 并将数据插入到同一页面中的 div 中。但是我的代码仍然在新页面上加载内容，我不知道为什么。有人帮我吗？

这是我在 HomeController 中的 Index.cshtml，

```
 @model IEnumerable<Kango_kmen.KangoKmenWS.WSEntityInfo>
    @Content.Script("jquery-1.9.1.min.js", Url)
    @Content.Script("jquery.unobtrusive-ajax.min.js",Url)
    @Content.Script("jquery.unobtrusive-ajax.js",Url)
    @Content.Script("myScript.js",Url)

    @section Entities{

    <table>
    <tr>
    <th>
      <input type="submit" value="zobrazit" />
    </th>
    <th>
        iD
    </th>
    <th>
        name
    </th>

    </tr>

    @foreach (var item in Model) {
    <tr>
    <td>
    @Ajax.ActionLink("..", "CheckEntity", new { id = item.iD }, 
            new AjaxOptions{ UpdateTargetId="properties",
                             HttpMethod="GET",
                             InsertionMode=InsertionMode.InsertAfter,
            })
    </td>
    <td>            
        @Html.DisplayFor(modelItem => item.iD)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.name)
    </td>

    </tr>  
    <tr>
     <td>
         <div id="properties">

         </div>
     </td>
    </tr>
     }
    </table>
     }

     @section PropertyInfo{
     <p>Property info</p>
     } 

     @section Properties{
     <p>properties</p>
     } 
```

这是我在 HomeController 中的控制器

```
 public PartialViewResult CheckEntity(int id)
    {

        var model = WSConnect.getEntityInfo(id);
        if(model !=null){
            return PartialView("CheckEntity", model.property);
        }
        var modell = new WSEntityInfo[0];
        return PartialView("CheckEntity", modell);
    } 
```

ChecktEntity 是部分视图，但每次我单击 ActionLink 控制器加载 url：/Home/CheckEntity/1000 以查看此新页面上的视图数据时“（

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T18:13:19.010

您的代码有两点错误：

1.  您已经包含了`jquery.unobtrusive-ajax.js`两次脚本，一次是缩小版，一次是标准版。你应该只包含一次
2.  `jquery.unobtrusive-ajax.js`不兼容，`with jquery 1.9.1`因为 jQuery 1.9 中的重大更改之一是该[`.live()`方法已被删除](http://jquery.com/upgrade-guide/1.9/#live-removed)并且`jquery.unobtrusive-ajax.js`脚本依赖于它。如果您查看您的 javascript 控制台，您会看到以下错误：`The .live method is undefined.`. 因此，如果您想在 ASP.NET MVC 中使用不显眼的 AJAX 功能，您将不得不降级 jQuery 的版本。例如`1.8.3`版本应该没问题。

所以：

```
@model IEnumerable<Kango_kmen.KangoKmenWS.WSEntityInfo>
@Content.Script("jquery-1.8.3.min.js", Url)
@Content.Script("jquery.unobtrusive-ajax.min.js", Url)
@Content.Script("myScript.js", Url) 
```

还请学习如何调试您的 javascript 代码。使用诸如 FireBug 或 Chrome 开发人员工具栏之类的工具，所有这些错误都会在其中显示。

# android - 在Android中解析具有不同属性值的XML节点

> ID：14924314
> 
> 赞同：0
> 
> 时间：2013-02-17T18:10:05.417
> 
> 标签：android, xml-parsing

我有以下 XML 数据，

```
<RESPONSE>
<param name="Type">NBFundTransfer</param>
<param name="Id">3213</param>
<param name="Token">26&ffr$5%877</param>
<param name="Stage">1</param>
</RESPONSE> 
```

我想按名称获取节点。我使用以下方法获取数据，

```
NodeList nl = doc.getElementsByTagName("RESPONSE");
String[] Agreement = new String[nl.getLength()];
for (int i = 0; i < nl.getLength(); i++) {
    Node item = nl.item(i);
    if (item.getNodeType() == Node.ELEMENT_NODE) {
        Element ielem = (Element) item;
        NodeList id = ielem.getElementsByTagName("param");
        Data[i] = id.item(0).getChildNodes().item(0).getNodeValue();
    }
} 
```

但问题是，我只从名为“Type”的第一个节点获取数据“NBFundTransfer”。我想从所有其他节点（Id、Token 等）获取数据。请有人帮我解决。谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T18:31:15.130

公共类 XMLParsingExample 扩展 Activity {

```
/** Create Object For SiteList Class */
SitesList sitesList = null;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    /** Create a new layout to display the view */
    LinearLayout layout = new LinearLayout(this);
    layout.setOrientation(1);

    /** Create a new textview array to display the results */
    TextView name[];
    TextView website[];
    TextView category[];

    try {

        /** Handling XML */
        SAXParserFactory spf = SAXParserFactory.newInstance();
        SAXParser sp = spf.newSAXParser();
        XMLReader xr = sp.getXMLReader();

        /** Send URL to parse XML Tags */
        URL sourceUrl = new URL(
                "http://www.androidpeople.com/wp-content/uploads/2010/06/example.xml");

        /** Create handler to handle XML Tags ( extends DefaultHandler ) */
        MyXMLHandler myXMLHandler = new MyXMLHandler();
        xr.setContentHandler(myXMLHandler);
        xr.parse(new InputSource(sourceUrl.openStream()));

    } catch (Exception e) {
        System.out.println("XML Pasing Excpetion = " + e);
    }

    /** Get result from MyXMLHandler SitlesList Object */
    sitesList = MyXMLHandler.sitesList;

    /** Assign textview array lenght by arraylist size */
    name = new TextView[sitesList.getName().size()];
    website = new TextView[sitesList.getName().size()];
    category = new TextView[sitesList.getName().size()];

    /** Set the result text in textview and add it to layout */
    for (int i = 0; i < sitesList.getName().size(); i++) {
        name[i] = new TextView(this);
        name[i].setText("Name = "+sitesList.getName().get(i));
        website[i] = new TextView(this);
        website[i].setText("Website = "+sitesList.getWebsite().get(i));
        category[i] = new TextView(this);
        category[i].setText("Website Category = "+sitesList.getCategory().get(i));

        layout.addView(name[i]);
        layout.addView(website[i]);
        layout.addView(category[i]);
    }

    /** Set the layout view to display */
    setContentView(layout);

} 
```

}

# python - 如何从无限的 Popen.stdout 对象中获取最后 N 行

> ID：14924316
> 
> 赞同：0
> 
> 时间：2013-02-17T18:10:39.353
> 
> 标签：python, popen, lines

我正在尝试从当前无限的 Popen.stdout 对象中获取最后 N 行。无限我的意思是无限/许多被写入标准输出的日志条目。我尝试了受时间限制的 Popen.stdout.readline() ，但这只会产生很多随机问题，尤其是输出很少。当前输出的某种快照会对我有所帮助，但我找不到类似的东西。我主要找到的所有解决方案都是针对终止的外部进程，但我的是一个服务器应用程序，在我阅读最后几行后应该能够写入标准输出。

问候，

法尔比特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T05:22:14.710

在 Unix 上，当你启动你的进程时，你可以`tail`先将它输入：

```
p=subprocess.Popen("your_process.sh | tail --lines=3", stdout=subprocess.PIPE, shell=True)
r=p.communicate()
print r[0] 
```

的用法`shell=True`是这里的关键。

# php - 寻找 vps 内存峰值的来源 (lemonstand)

> ID：14924317
> 
> 赞同：1
> 
> 时间：2013-02-17T18:10:44.943
> 
> 标签：php

我在dreamhost vps 上运行lemonstand，这是一个基于php 的电子商务软件。

大约每周一到两次，我收到一封电子邮件，说我的 vps 超过了其内存分配的 10%，并且它正在自动重新启动。

如何找到此内存峰值的来源？我试图安装 newrelic 以尝试寻找它，但是当我通过 ssh 执行安装命令时它显然没有正确安装，好吧，我只是不知道下一步该去哪里。

是否有其他应用程序或其他方法来寻找我的内存峰值的来源？

# jquery - 同一页面上的多个 jQuery 实例

> ID：14924319
> 
> 赞同：1
> 
> 时间：2013-02-17T18:10:58.657
> 
> 标签：jquery, instance

我有一个动态生成的页面上的项目列表 - 我可以很容易地获得每个项目的 $itemid。

我正在尝试为每个人设置一个投票，但我无法使实例足够不同，以使投票链接的实例不会相互混淆，并且该页面正在尝试发布所有项目到我的 vote.php 页面

```
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<script type="text/javascript">
    $(document).ready(function()
    {
        $(".submitVote a").click(function()
        {
            var ID = <?php echo $itemid;?>;
            var add = 1;
            var votedby = <?php echo $usr_id ;?>;
            var rating = <?php echo $ratings;?> 

            var queryString = 'id='+ ID +'&votedby='+votedby +'&add='+add +'&rating='+rating;
            $("#vote").text(rating+1); 

                $.ajax({
                type: "POST",
                url: "vote.php",
                data: queryString,
                cache: false,
                success: function(html)
                {

                    $(".submitVote").html('<p style="margin:1px;padding:0px;"></p>');
                    $("#greet").html("Thanks for voting!");
                    $("#greet").delay(500).fadeOut(5000);

                }
                });
        });
    });
</script>

    <div id="<?php echo $itemid;?>" style="width:350px;">
        <span class="submitVote" >
            <p style="margin:1px;padding:0px;">
                Submit your <a href="#">vote</a>
            </p>
        </span>
        <div id="voteBox">
            <div id="vote<?php echo $itemid;?>"> <?php echo $ratings;?> </div>
            <span style="color:#fae240;">votes</span>
        </div> 
        <div id="greet" style="padding-left:65px;"></div>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T19:29:04.250

好的，在您的 HTML 中：

```
<div id="<?php echo $itemid;?>" style="width:350px;">
    <span class="submitVote" >
        <p style="margin:1px;padding:0px;">
            Submit your <a href="#">vote</a>
        </p>
    </span>
    <div id="voteBox">
        <div id="vote<?php echo $itemid;?>"> <?php echo $ratings;?> </div>
        <span style="color:#fae240;">votes</span>
    </div> 
    <div id="greet" style="padding-left:65px;"></div>
</div> 
```

（嗯，生成 HTML 的 PHP）你已经在某处放置了一个项目 ID。您可以做的是将它添加到，`<a>`以便在“点击”处理程序中更容易找到：

```
 Submit your <a href='#' data-item-id='<?php echo $itemid;?>' data-ratings='<?php echo $ratings;?>' data-user-id='<? php echo $usr_id; ?>'>vote</a> 
```

用户 id 可能只存储一次，但为了简单起见，我将保留它。通过这样做，您投票所需的一切都在`<a>`它本身上。这很有用，因为您的事件处理程序将使用该 DOM 节点作为`this`. 因此，您只需要页面中的 JavaScript 代码一次 - 或者，更好的是，它可以在您导入的单独文件中。

```
$(document).ready(function()
{
    $(".submitVote a").click(function()
    {
        var $clicked = $(this);
        var $voteBlock = $clicked.closest('.submitVote');
        var ID = $clicked.data('item-id');
        var add = 1;
        var votedby = $clicked.data('user-id');
        var rating = $clicked.data('ratings'); 

        var queryString = 'id='+ ID +'&votedby='+votedby +'&add='+add +'&rating='+rating;
        $("#vote").text(rating+1); 

            $.ajax({
            type: "POST",
            url: "vote.php",
            data: queryString,
            cache: false,
            success: function(html)
            {

                $voteBlock.html('<p style="margin:1px;padding:0px;"></p>');
                $("#greet").html("Thanks for voting!");
                $("#greet").delay(500).fadeOut(5000);

            }
            });
    });
}); 
```

那些`.data()`从`<a>`.

*编辑*——我更新了上面的函数，以确保只有被`<a>`点击的才会在投票后被删除。我添加了变量“$voteBlock”，它将`<span>`是`<a>`. （顺便说一句，将 a`<p>`放入 a并不是真正正确的 HTML `<span>`，但它可能不会导致严重的问题。您可以将 a 替换为`<span>`但`<div>`无论如何。）

# javascript - 如何使用转换将元素位置从 x1 转换为 x2？

> ID：14924322
> 
> 赞同：1
> 
> 时间：2013-02-17T18:11:08.743
> 
> 标签：javascript, jquery, css, css-transitions, css-transforms

HTML：

```
<div id="foo"></div> 
```

CSS：

```
#foo { width: 100px; height: 100px; background: #f00; }
.a { -webkit-transition: -webkit-transform 1s linear; -webkit-transform: translateY(100px); }
.b { -webkit-transition: -webkit-transform 1s linear; -webkit-transform: translateY(50px); } 
```

JavaScript：

```
$(function () {
    var elm = $('#foo');

    var animate = function (className, callback) {
        elm.addClass(className);

        setTimeout(function () {
            elm.removeClass(className)

            callback();
        }, 1000);
    };

    animate('a', function () {
        animate('b');
    });
}); 
```

问题：

在第二次迭代期间，元素实际上是从先前翻译的 Y 移动的，而不是无翻译的元素状态。

使用关键帧会起作用，尽管这需要添加更多预定义的 CSS 类，这并不是一个真正的选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T18:14:18.367

我想出的可能解决方案是使用`setTimeout`.

```
$(function () {
    var elm = $('#foo');

    var animate = function (className, callback) {
        setTimeout(function () {
            elm.addClass(className);
        }, 0);

        setTimeout(function () {
            elm.removeClass(className)

            callback();
        }, 1000);
    };

    animate('a', function () {
        animate('b');
    });
}); 
```

两者的名称可以在[http://jsfiddle.net/CP8An/](http://jsfiddle.net/CP8An/)和[http://jsfiddle.net/CP8An/1/](http://jsfiddle.net/CP8An/1/)看到。后者是期望的结果。

我不明白为什么`setTimeout`需要 - 毕竟，之前定义的类在调用回调之前被删除了。使用`setTimeout`似乎更像是一种解决方法而不是解决方案。这可能对正在处理类似问题的人有所帮助，尽管我仍然愿意接受其他建议。

# php - PHP Content-length 标头延迟加载

> ID：14924323
> 
> 赞同：2
> 
> 时间：2013-02-17T18:11:12.847
> 
> 标签：php, http-headers, content-length, php-gd

我有一个 PHP 网页，它从数据库中获取一个 BLOB 并将其输出为图像。当用户上传这张图片时，我将文件大小（例如**491099**）存储到数据库中。

当通过我的网页请求图像时，我添加水印，设置`HTTP HEADERS`并通过`imagejpeg($img)`. 现在的问题是，当我的图像完全加载（几乎不需要时间）时，我的浏览器仍然看起来“忙”（加载指示器旋转）。当通过异步调用请求此页面时，这也会使加载时间变长，即使图像实际上是在短时间内加载的。

当我简单地删除`Content-length`标题时，图像就像以前一样被加载，但现在浏览器在加载时立即停止，因此处理时间非常快。

所以看起来浏览器认为（由于我的`Content-length`标题）它仍然应该加载一些东西，而实际上它不是......

删除`Content-length`标题不是选项，因为在我读过的许多浏览器中都需要这样做。

```
// set the header for the image
header("Content-length: " . $image->imageSize);    //would be 491099 in my example
header("Content-type: " . $image->imageType);
header('Content-Disposition: inline; filename=" '. $image->imageName . '"');

$watermark          = imagecreatefrompng('../images/watermark.png');
$watermark_width    = imagesx($watermark); 
$watermark_height   = imagesy($watermark);  
$dest_x             = ($image->imageWidth - $watermark_width) / 2;  
$dest_y             = $image->height - $watermark_height - 5;
$img = imagecreatefromstring($image->image);
imagecopymerge($img, $watermark, $dest_x, $dest_y, 0, 0, $watermark_width, $watermark_height, 55);

imagejpeg($img); 
```

（请注意，这`$image`是我创建的自定义图像类的一个对象，它包含有关图像的所有信息。）

有人知道我为什么会有这种行为吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T18:17:01.067

请尝试：

```
ob_start();
imagejpeg($img);

// this should be the real image size
$size = ob_get_length();

header("Content-length: " . $size); 

// send it
ob_flush(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T18:21:00.143

在未更改的图像上添加水印会创建一个新图像，该图像几乎肯定会有不同的文件大小，特别是如果它是 jpeg（有损压缩）。事实上，即使您不进行任何修改，某些图像程序和库也会重新压缩 jpg，从而产生不同的文件内容（尽管可能不是明显不同的图像）。

One Trick Pony 的答案将为您提供正确的新图像文件大小，并且对性能的影响最小。

另一种选择是在将 blob 保存到数据库之前添加水印，但随后您将失去呈现原始图像的能力。

# python - Python MYSQL 重复问题

> ID：14924324
> 
> 赞同：0
> 
> 时间：2013-02-17T18:11:15.757
> 
> 标签：python, mysql

```
cur.execute("""INSERT INTO football.match_events(type, player, time, game_id) VALUES (%s, %s, %s, %s)""", (etype, player_id, time, game_id)) 
```

我正在完成一个项目，我在其中抓取和处理足球文本评论。此 INSERT 语句是处理黄牌的一段代码的一部分。不幸的是，由于这些评论是实时更新的，有时会有更正（尽管他们没有说更正，所以我无法过滤它们）。这导致我在一次预订中有两排，因为它在评论中出现了两次。

我正在为 SQL 语句寻找一种简单的方法来检查查询中的所有字段是否已经一起存在于表中的一行中。我希望这是有道理的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T18:29:13.193

您可以使用[REPLACE INTO](http://dev.mysql.com/doc/refman/5.0/en/replace.html)（假设 MySQL）来为您工作。如果值不存在，它将插入该值，如果存在，则替换现有条目。

您还应该创建一个适当的密钥，可能基于您的示例中的 game_id，以便可以更新现有条目。

# php - 从链接中获取 javascript 中的变量

> ID：14924327
> 
> 赞同：0
> 
> 时间：2013-02-17T18:11:44.070
> 
> 标签：php, javascript

我试图让一个 PHP 变量通过 javascript 发送，但我遇到了麻烦。我正在使用我在网上找到的 jQuery 弹出窗口，当用户单击一个项目时，我需要该 item_id 变量可以在我想要添加表单的弹出窗口中获取。

我的 PHP 部分。

```
<a href="#?w=500&item_id='.$stock['id'].'" rel="popup1" class="poplight"> 
```

和Javascript。

```
$(document).ready(function(){

    //When you click on a link with class of poplight and the href starts with a # 
    $('a.poplight[href^=#]').click(function() {
        var popID = $(this).attr('rel'); //Get Popup Name
        var popURL = $(this).attr('href'); //Get Popup href to define size

        //Pull Query & Variables from href URL
        var query= popURL.split('?');
        var dim= query[1].split('&');
        var popWidth = dim[0].split('=')[1]; //Gets the first query string value
        var itemID = dim[0].split('=')[2]; //Gets the second query string value

        //Fade in the Popup and add close button
        $('#' + popID).fadeIn().css({ 'width': Number( popWidth ) }).prepend('<a href="#" class="close"><img src="/layout/close_pop.png" class="btn_close" title="Close Window" alt="Close" /></a>');

        //Define margin for center alignment (vertical + horizontal) - we add 80 to the height/width to accomodate for the padding + border width defined in the css
        var popMargTop = ($('#' + popID).height() + 80) / 2;
        var popMargLeft = ($('#' + popID).width() + 80) / 2;

        document.getElementById('popup1').innerHtml = itemID;

        //Apply Margin to Popup
        $('#' + popID).css({ 
            'margin-top' : -popMargTop,
            'margin-left' : -popMargLeft
        });

        //Fade in Background
        $('body').append('<div id="fade"></div>'); //Add the fade layer to bottom of the body tag.
        $('#fade').css({'filter' : 'alpha(opacity=80)'}).fadeIn(); //Fade in the fade layer 

        return false;
    });

    //Close Popups and Fade Layer
    $('a.close, #fade').live('click', function() { //When clicking on the close or fade layer...
        $('#fade , .popup_block').fadeOut(function() {
            $('#fade, a.close').remove();  
    }); //fade them both out

        return false;
    });

}); 
```

`var itemID = dim[0].split('=')[2]; //Gets the second query string value`我添加了我认为你工作的内容，但它没有`document.getElementById('popup1').innerHtml = itemID;`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T18:19:53.620

使用复杂的函数来检索 URL 查询参数：

```
function getParameterByName(name, locationObject)
{
  name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
  var regexS = "[\\?&]" + name + "=([^&#]*)";
  var regex = new RegExp(regexS);
  var results = regex.exec(locationObject.search);
  if(results == null)
    return "";
  else
    return decodeURIComponent(results[1].replace(/\+/g, " "));
} 
```

[从[这里](https://stackoverflow.com/a/901144/1282023)采用]

简单地这样称呼它：

```
getParameterByName('item_id', someLink); 
```

工作小提琴：http: [//jsfiddle.net/ADpYT/](http://jsfiddle.net/ADpYT/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T18:48:07.547

您对原始代码有一个简单的疏忽。当您获得`dim`变量时，您会得到一个数组，其中包含在 & 处拆分的 2 个项目。在上面的代码中，你得到了`["w=500", "item_id=some_value"]`。所以为了得到 itemID，你必须使用 dim[1]。 `var itemID=dim[1].split('=')[1];`

# c# - 媒体元素跳过播放列表中的某些项目

> ID：14924329
> 
> 赞同：1
> 
> 时间：2013-02-17T18:11:56.637
> 
> 标签：c#, media

我有一个必须播放项目列表的媒体播放器。用户可以选择其中一个，因此项目必须是可选的，另一方面，所有项目都可以按顺序播放。但是当我等待按顺序播放时，看到 madia 播放器跳过了一些项目。例如;

```
1 -> is played
2 -> is played
3 -> is skipped
4 -> is played
5 -> is skipped
6 -> is skipped
7 -> is skipped 
8 -> is played 
```

我无法理解这个问题的原因。有想法吗？

这是我的媒体元素；

```
 <StackPanel x:Name="PlayerStackPanel" Orientation="Horizontal">
        <MediaElement x:Name="Player" 
                      MediaOpened="Player_MediaOpened"      
                      MediaEnded="Player_OnMediaEnded">
        </MediaElement>
   </StackPanel> 
```

选择第一个项目后，selectionchanged 代码运行；

```
 void ItemListView_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        if (this.UsingLogicalPageNavigation()) this.InvalidateVisualState();

        PlayView();

        selectedItem = sender as Selector;
        ContentItem pc = (ContentItem)selectedItem.SelectedItem;
        if (pc != null && !string.IsNullOrEmpty(pc.AudioFilePath))
        {
            Player.Source = new Uri(this.BaseUri, "../Assets/" + pc.AudioFilePath);
            Player.Play();
        }
        else
            Player.Source = null;           
    } 
```

当第一个音频项目结束时，调用 Player_OnMediaEnded 方法我想以编程方式增加 selectedindex，在此事件之后，选择更改再次运行。

```
 private void Player_OnMediaEnded(object sender, RoutedEventArgs e)
    {
        ticks.Stop();
        ticks.Tick -= ticks_Tick;
        Player.Stop();
        if (this.itemListView.SelectedIndex != contentItems.Count-1)
        this.itemListView.SelectedIndex += 1;
    } 
```

用debug，看到一个音频文件结束后，mediended被调用不止一个。而且这个呼叫计数也在不断变化。

为什么我的代码会产生这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:56:46.110

解决了。

我正在使用持续时间滑块，当媒体播放器结束时，它也必须结束。但在某些情况下，它们无法同步，因此持续时间滑块无法正常用于排队的音频项目，它会立即完成下一个项目并跳过其他项目。

# django - 南不迁移 django.contrib.admin

> ID：14924333
> 
> 赞同：1
> 
> 时间：2013-02-17T18:12:16.393
> 
> 标签：django, django-models, django-admin, django-south

我有一个由 South 管理的 Django 项目。当我第一次启动项目时，我运行了正常程序：

*   安装南
*   将 South 添加到 INSTALLED_APPS
*   执行初始同步数据库
*   schemamigration --initial，然后是 migrate myapp

一切都运行良好，从那以后我已经进行了几次迁移。现在我启用了站点的 django 管理部分（INSTALLED_APPS、urls 等）。当我尝试添加测试用户时，收到以下错误：

```
Request Method: POST
Request URL:    http://127.0.0.1:8000/admin/auth/user/add/
Django Version: 1.4.3
Exception Type: DatabaseError
Exception Value:    
no such table: django_admin_log 
```

我试着跑步`schemamigration myapp --auto`，但它告诉我什么都没有改变。我什至尝试运行`convert_to_south django.contrib.admin`，以及尝试虚假迁移，但我一直收到同样的错误。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T18:19:01.617

只有使用 south 的应用程序才会由 south 管理

`django.contrib.admin`没有。相反，您需要另一个`syncdb`（它将单独保留任何现有表，因此应该可以安全运行）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T19:58:16.140

第二个答案是正确的

> 只有使用 south 的应用程序才会由 south 管理

所以使用南不是一个可能的解决方案。

您的问题是 syncdb 认为 django_admin_log 的表已经创建。

### 解决方案

1.  打开你的`django_content_type`桌子。
2.  删除`name="log entry", app_label="admin", model="logentry"`内容类型的记录。
3.  再次运行同步数据库

# ruby-on-rails - Friendly_id 范围问题。数字蛞蝓

> ID：14924334
> 
> 赞同：2
> 
> 时间：2013-02-17T18:12:21.550
> 
> 标签：ruby-on-rails, ruby-on-rails-3, friendly-id

我正在尝试使用友好 ID 创建更多自定义 url。但是，我想用于 slug 的列仍然是一个数字。我不想只为 slug 创建一个单独的列，因为它是相同的。

我有*很多*属于*拍卖*的。
*拍卖*有很多*拍*品（待售物品）。

A *Lot*有`lot_number`，这是*Auction*独有的。不过，它在整个表格中并不是唯一的。这基本上只是在每次拍卖中订购批次的一种方式。

我的 URL 看起来像：/auctions/1/lots/21 (/auctions/:auction_id/lots/:id)
我希望它们是：/auctions/1/lots/1 (/auctions/:auction_id/lots/:lot_number )

我将以下内容添加到**lot.rb**：

```
extend FriendlyId
friendly_id :lot_number 
```

它几乎可以工作。它向我显示了一个批号正确但拍卖错误的批次。
我在 Friendly ID 文档中阅读了有关范围的信息，这听起来很完美。我可以将拍卖范围限定在拍卖范围内……
所以我尝试了：

```
extend FriendlyId
friendly_id :lot_number, :use => :scoped, :scope => :auction_id 
```

现在我看到以下错误：

```
SQLite3::SQLException: no such column: lots.slug: SELECT  "lots".* FROM "lots"  WHERE "lots"."slug" = '1' LIMIT 1 
```

为什么是 SQL `WHERE lots.slug = 1`？不应该`WHERE lots.auction_id = 1`吗？
我使用了错误的语法吗？不知道我哪里出错了。

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T18:15:27.447

我认为你应该看看Rails 中用于查找模型的方法`from_param`和方法：http: [//apidock.com/rails/ActiveRecord/Base/to_param](http://apidock.com/rails/ActiveRecord/Base/to_param)`to_param`

# java - 构造函数说明

> ID：14924355
> 
> 赞同：0
> 
> 时间：2013-02-17T18:14:53.517
> 
> 标签：java, constructor

鉴于此代码：

```
public class Example
{

public Example(String name)
  {
    input = name;
  }

public someMethod()
  {
    //some code
  }
} 
```

在 java 中，当您声明一个新的（对象或实例）时：

```
Example foo = new Example("jo"); 
```

这里实际发生了什么？我的问题是：

1.  是使用类构造函数的参数创建的新对象吗？

2.  新对象会在大括号内包含构造函数和数据成员的所有参数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T18:17:30.673

鉴于您的代码没有`default constructor`

该行将`Example foo = new Example();`导致编译错误

默认构造函数是默认定义的，**除非**您添加另一个带参数的构造函数。在这种情况下，您必须明确定义，`default constructor`否则您只能使用带有参数的构造函数创建实例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T18:17:59.100

正如 Rohit 所说，由于未指定默认 ctor，您将遇到编译器错误。

但是，假设您*确实*有一个默认 ctor：会发生什么是创建数据成员，即为每个 *非静态*实例成员分配内存。

如果该类扩展了任何类，则应在子类的构造函数主体执行之前调用构造函数（父 ctor），然后构造函数主体使用局部变量或作为 ctor 参数传递的局部变量初始化数据成员。

如果构造函数体执行到一个完成，即没有例外，它返回一个对新创建对象的引用。

所以：

1.  `new`如果一切顺利，则创建对象并返回该对象的引用。

2.  构造函数只初始化数据。使用构造函数体中定义的数据，或构造函数调用者提供的参数。这些参数不会创建对象，它们提供可能对对象有用的数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T18:20:36.460

这不会编译。如果您不包含构造函数，Java 会自动为您定义一个构造函数。它不包括参数。因此，如果您从代码中取出公共示例片段，或者添加到无参数构造函数中，Java 将编译它。

当您创建构造函数然后尝试实例化该类的对象而不给它任何属性时，您的代码将无法编译（导致编译错误）。

此外，值得指出的是，您的代码无论如何都不会工作，因为`input`您使用的代码没有在任何地方定义。它应该在公共示例之前定义，如下所示：

```
 String input; 
```

如果您这样做并且没有指定构造函数（即让 Java 为您创建它），Java 将保存值“null”作为输入。

您创建的对象可以访问任何声明为公共且属于该类的实例变量。

**编辑：现在您已经更改了代码以包含参数的传递，只要您在课堂上的回答中声明字符串输入，它将编译。**

# php - unknown column in where clause, but I've already verified

> ID：14924356
> 
> 赞同：0
> 
> 时间：2013-02-17T18:14:59.757
> 
> 标签：php, mysql, mysqli

I'm struggling with this simple line of SQL...

Running it keeps giving me the error: `Error: Unknown column 'comics' in 'where clause'`.

This would normally be an easy fix... just go check to make sure "comics" exists as an entry in column "table_name". But I've already checked that...

![enter image description here](../Images/9a9fd2d36a5e83fb3da69e7426db20ee.png)

I don't see anything wrong with my SQL:

```
$sql = "SELECT ip FROM votes WHERE ip = '".$_SERVER['REMOTE_ADDR']."' AND table_name = $table AND imgid = $imgid"; 
```

EDIT:

Btw, I've already tried it with quotes:

```
 $sql = "SELECT ip FROM votes WHERE ip = '".$_SERVER['REMOTE_ADDR']."' AND table_name = '$table' AND imgid = $imgid"; 
```

But that throws the error:

```
Fatal error: Call to undefined method mysqli_result::num_rows() in C:\wamp\www\HTwS\scripts\likecounter.php on line 40 
```

Can anyone help?

Thanks!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T18:16:57.367

The value of `table_name` is a string, and must therefore be single-quoted in the query. Failing to quote it as a string value, MySQL assumes that the supplied unquoted `$table` is a column identifier.

```
$sql = "SELECT ip FROM votes WHERE ip = '".$_SERVER['REMOTE_ADDR']."' AND table_name = '$table' AND imgid = $imgid";
//------------------------------------------------------------------------------------^^^^^^^^^ 
```

If `$imgid` is also a non-numeric value you'll need to quote that one as well.

We assume it has already been properly filtered against SQL injection, if it is the result of user input. I'll note, since the update includes MySQLi-specific code, that you really ought to be doing this [as a prepared statement](http://php.net/manual/en/mysqli.prepare.php) rather than a constructed string call to `mysqli::query()`.

```
// Recommended to do this with  a prepared statement.
$stmt = $mysqli->prepare("SELECT ip FROM votes WHERE ip = ? AND table_name = ? AND imgid = ?");
if ($stmt) {
  $stmt->bind_param('ssi', $_SERVER['REMOTE_ADDR'], $table, $imgid);
  $stmt->execute();
  // Bind results, fetch, etc...
} 
```

* * *

### Edit after question update and comment:

> Call to undefined method mysqli_result::num_rows()

The error message implies that you have attempted to access the MySQLi result property `num_rows` as a *method call* with `()` rather than a property. You should be using:

```
$result->num_rows 
```

... instead of

```
$result->num_rows() 
```

# javascript - 捕获 iframe 的控制台日志

> ID：14924362
> 
> 赞同：27
> 
> 时间：2013-02-17T18:15:56.383
> 
> 标签：javascript, iframe, console

有没有办法在 iframe 之外捕获控制台？

我正在开发一个类似于 jsFiddle 的[在线 IDE](http://codemagic.aklp.gr)，我想让用户选择至少读取 javascript 控制台的结果。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-17T19:21:03.320

如果要在窗口容器的主体内打印日志消息，可以在那里声明面板：

```
var console = {
    panel: $(parent.document.body).append('<div>'),
    log: function(m){
        this.panel.prepend('<div>'+m+'</div>');
    }       
};
console.log('message'); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2017-11-11T18:40:01.930

如果您不想附加到 HTML，这是另一种解决方案

```
var console = {
  __on : {},
  addEventListener : function (name, callback) {
    this.__on[name] = (this.__on[name] || []).concat(callback);
    return this;
  },
  dispatchEvent : function (name, value) {
    this.__on[name] = (this.__on[name] || []);
    for (var i = 0, n = this.__on[name].length; i < n; i++) {
      this.__on[name][i].call(this, value);
    }
    return this;
  },
  log: function () {
    var a = [];
    // For V8 optimization
    for (var i = 0, n = arguments.length; i < n; i++) {
      a.push(arguments[i]);
    }
    this.dispatchEvent("log", a);
  }
}; 
```

在 iframe 之外

```
iframe.contentWindow.console.addEventListener("log", function (value) {
  console.log.apply(null, value);
}); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2021-07-21T17:04:42.797

您可以使用 Chrome 开发者工具。有一个 Javascript 选择器“顶部”，您可以在其中选择源。来自该来源的日志将显示出来。

[![Chrome DevTools Javascript 上下文选择器](../Images/5059414e6f45f0b19ec0d62bb15e5ebf.png)](https://i.stack.imgur.com/zCA6a.png)

# python - 在 Rpy2 的 ggplot 中使用对数轴缩放

> ID：14924363
> 
> 赞同：0
> 
> 时间：2013-02-17T18:16:09.180
> 
> 标签：python, r, ggplot2, rpy2

我正在尝试使用 ggplot 在 Rpy2 的对数刻度上格式化我的轴。在普通的 R 中，可以这样做：

```
qplot(data=data, x=x, y=y) + geom_point() + scale_y_log2() 
```

获取 log2 轴。当我尝试`ggplot2.scale_y_log2`在 Rpy2 中使用时，它抱怨它没有找到，尽管`ggplot2.scale_x_log10`(log* *10* *) 工作正常。如何在 Rpy2 中获得 log2 轴？

相关问题：如果我的数据已经记录（例如，它在我将 log2 应用于行的 Pandas 数据框中），我如何在 Rpy2 中获取 ggplot 以将轴格式化为对数轴（即像 2^1、2 这样的刻度^2, 2^4, ...) 无需再次记录数据？只是重新格式化标签，因为数据已经在日志值中。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T19:12:06.867

由于这是一个 Python / rpy2 问题，Python 中的代码：

```
from rpy2.robjects.lib import ggplot2
from rpy2.robjects import r
from rpy2.robjects.packages import importr

scales = importr('scales')

iris = r('iris')

p = ggplot2.ggplot(iris) + \
    ggplot2.geom_point(ggplot2.aes_string(x="Sepal.Length", y="Sepal.Width")) + \
    ggplot2.scale_x_continuous(trans = scales.log2_trans())

p.plot() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T18:42:23.753

要回答问题的第一部分，您不能在 R 中执行此操作：

```
qplot(data=data, x=x, y=y) + geom_point() + scale_y_log2() 
```

你得到这个错误：

```
 Error: could not find function "scale_y_log2" 
```

所以，你必须先定义它：

```
library(scales)
scale_y_log2 <- function (...) 
{
  scale_y_continuous(..., trans = log2_trans())
}
dat <- data.frame(x=1:10,y=1:10)
qplot(data=dat, x=x, y=y) + geom_point() + scale_y_log2() 
```

# git - Git 仓库转移

> ID：14924365
> 
> 赞同：1
> 
> 时间：2013-02-17T18:16:18.953
> 
> 标签：git, web, github

我正在为我正在为客户工作的网站创建一个 Git 存储库。我正要设置源，将 repo 与我的 GitHub 帐户相关联，但是如果将来有人接管该项目会发生什么？如果不为我的每个客户创建 GitHub 帐户，我如何才能将 Git 存储库转移给其他人？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T18:46:07.843

请记住，“设置回购的来源”是通过以下方式完成的：

```
git remote add origin /url/repo 
```

这仅适用于您的本地克隆，并且不会被任何人在 GitHub 上分叉您的 repo 并[克隆他们自己的分叉复制](https://stackoverflow.com/questions/9257533/what-is-the-difference-between-origin-and-upstream-in-github/9257901#9257901)：他们的起源将指向他们的分叉，而不是您的分叉。

简而言之，添加远程是一种本地操作，不会跨存储库复制（推/拉）。
它存储在repo ( )的*本地*配置中[`.git/config`](http://www.gitguys.com/topics/the-configuration-file-remote-section/)

![GitHub 分叉](../Images/931e4961726323480892cb9a8c76861e.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T18:21:23.773

一方面，您可以将 Github 存储库转移到其他帐户（在存储库的设置页面上有一个选项，如果有任何问题，Github 支持也会提供帮助）。

另一方面，接手项目的人只需要在自己的 github 帐户上创建一个新的 repo 并推送 repo 的内容（然后你可以删除它）。他只需要从您那里获取 repo 内容，可以通过以下方式完成：a）复制您的工作副本（例如 tar 并将其提供给他）或 b）从您的 github 中提取（您需要给他读取权限到你的回购，这可能是私人的——但既然你可以在之后删除它，那应该没什么大不了的）。

# api - DHL 实时运输计算器

> ID：14924374
> 
> 赞同：0
> 
> 时间：2013-02-17T18:16:55.567
> 
> 标签：api, shopify

是否可以将 DHL 的 api 实施到 Shopify 中？

我们假设您也需要 Shopify 中的自定义 UI。

不知道为什么不提供此功能，因为 DHL 具有最优惠的国际运输费率。

让我们知道是否有人愿意开发这个以及成本是多少。

先谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T20:36:07.180

您可以创建一个应用程序来查询 DHL 的运费。你可以把它挂在购物车上。这样一来，您的客户就会知道 DHL 会根据您为您的产品准备的东西收取什么费用。基于权重的估计与维度估计不同。

假设您对运费有不错的估计，那么您可能希望在 Shopify 中连接运费以使用 DHL。这就是问题所在。如果您无法在 Shopify 中连接到 DHL 来设置费率，那么您在结账时无能为力。

也许 Shopify 现在有钩子，所以商店可以调用自己的运费？问问他们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-16T20:39:48.790

StarShipIt 有 Shopify 和 DHL 的实时计算器，我建议与他们联系。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-06-15T06:03:21.227

Shopify 没有为 DHL 提供承运人计算的运费。由于这个问题自 2008 年以来就已提出，我怀疑他们不会，至少在不久的将来不会。就个人而言，我已经通过电子邮件发送了技术支持，但尚未收到明确的答复。如果这是您网站的必需品，您可能必须尝试其他解决方案。

# c# - 为服务器架构设计一个模块化的委托调度器

> ID：14924376
> 
> 赞同：1
> 
> 时间：2013-02-17T18:17:00.383
> 
> 标签：c#, .net, events, parallel-processing, scheduler

关于基于事件的循环的论点已经说了很多，实现并行性和和之间的`Thread`区别`Task<T>`。我想引用

[任务和线程有什么区别？](https://stackoverflow.com/questions/4130194/what-is-the-difference-between-task-and-thread)

这清楚地解释了 a 如何`Task<T>`是一个承诺，而线程*可能是*用来实现它的手段之一。

这个另一个问题代替了介绍的第一点

[.NET 中是否可以使用 C# 实现基于事件的异步模式而无需多线程？](https://stackoverflow.com/questions/2842264/is-it-possible-in-net-using-c-to-achieve-event-based-asynchronous-pattern-wi)

问题来了。我正在考虑如何设计一个可重用的**.NET 基础结构类型**，当特定事件发生时可以调用委托。当然，我已经评估了第二个问题提供的所有参考资料，但我觉得我仍然需要进行更多调查。

我想实现类似的目标：

```
var sched = new Scheduler(new DefaultSchedulingStrategy());
var listnr = new TcpListener();
sched.DefineEventSource<Socket>(listnr.AcceptSocketAsync);
shed.OnEvent(
  (socket) = {
    // handling socket here
  }); 
```

我知道这似乎非常接近`Task.Factory.FromAsync<T>`。无论如何，我在这里想要实现的也是能够改变不同工作负载的调度策略，并尝试尽可能多地抽象激活事件的逻辑。

我还考虑过用 F# 编写一个简单的调度程序（例如基于代理），创建一个 C# 友好的可重用库，然后用 C# 编写服务器的其余部分（因为它是我目前的主要开发语言）。

我希望我足够清楚（*抱歉，英语不是我的主要语言*）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T22:31:25.277

在我了解了[Reactive Extensions](http://rx.codeplex.com)的美妙世界之后，我总是向所有想要对复杂事件处理做点什么的人推荐它们。[这里](http://introtorx.com)也有很好的介绍这项技术。我猜这对您的需求很有用。

# c++ - C ++如何比较2个整数以查看它们是否相等？一个是用户输入，另一个是结构的一部分？

> ID：14924383
> 
> 赞同：3
> 
> 时间：2013-02-17T18:17:36.120
> 
> 标签：c++, integer, compare

我有一个用户输入 ID（它是 int），然后我有一个联系人 ID，它是我的 Struct 的一部分。联系人 ID 也是 int。

我需要比较它们是否相同，如果它们相同，那么我知道它存在。

这是我发现的最接近的东西，但它不起作用： [http ://www.cplusplus.com/reference/string/string/compare/](http://www.cplusplus.com/reference/string/string/compare/)

通过阅读该页面，我做了类似的事情：

```
if(user_input_id.compare(p->id)==0) 
{
} 
```

我收到错误消息说表达式必须具有类类型。

如何在 C++ 中比较两个整数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T18:21:46.100

您找到的功能是用于比较两个`std::string`s。你没有`std::string`s，你有`int`s。要测试两个`int`s 是否相等，只需`==`像这样使用：

```
if (user_input_id == p->id) {
  // ...
} 
```

事实上，即使你有两个`std::string`s，你也很可能想在`==`那里使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T18:21:15.340

我不确定你的意思，但恕我直言

```
int k;
std::cin>>k;
if (k==p->id) 
    do_sth();
else
    do_sth_else(); 
```

关键是您不要将输入存储为字符串，而是一个 int。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T18:28:44.807

```
 //simple program to compare
    #include<iostream>
    using namespace std;
    typedef struct node {
        int a;
    }node;
    int main() {
        node p;
        p.a = 5;
        int a;
        cin >> a;
        if( p.a == a )
            cout << "Equal" << endl;
        else 
            cout << "Not Equal"<< endl;
        return 0;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-09T17:55:57.707

如果你的结构的名字是 p 并且你有一个叫做 hello 的整数，你可以执行以下操作

```
int input;
cin << input;
if(input == p.hello){
    cout << "the input is equal to p.hello" << endl;
}
else{
    cout << "the input is not equal to p.hello" << endl;
} 
```

# c# - 尝试获取可以具有无限嵌套子对象的选定对象的所有子对象

> ID：14924385
> 
> 赞同：1
> 
> 时间：2013-02-17T18:17:48.170
> 
> 标签：c#, algorithm, recursion

我有一个文件夹层次结构，其中一个文件夹可以有一个父文件夹，深度不受限制。

所以...文件夹 A FolderId = 1 ParentFolderId = Null（顶级）

文件夹 B FolderId = 2 ParentFolderId = 1（嵌套在 A 下）

文件夹 C FolderId = 3 ParentFolderId = 2（嵌套在 B 下）

文件夹 D FolderId = 4 ParentFolderId = 3（嵌套在 C 下）

我想获取文件夹 B 的所有子文件夹（或用户选择的任何文件夹），以便我可以删除所有子文件夹，但保留父文件夹（当然，除非选择了顶级文件夹）。

这可能是一些相当简单的递归或 foreach 循环，但我今天早上正在努力解决它！我正在使用 C# 和 EF，所以使用它的东西会很有帮助。如果可能的话，我希望结果是一个平面列表。

理想情况下，我希望将它作为我的自定义文件夹对象的一种方法，以便我拥有的任何文件夹，我都可以说 Folder.Children() 或类似的东西。

文件夹对象：

```
 public class Folder
  {
    public int Id { get; set; }

    public string Name { get; set; }
    public string Description { get; set; }

    public int? ParentId { get; set; }
    public virtual Folder Parent { get; set; }

    public virtual ICollection<File> Files { get; set; }
  } 
```

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T18:35:49.523

这是一种递归方法，可以满足您的要求。您使用要获取的子文件夹的 Id 参数调用此方法，它将检索所有子对象和子对象以及马马虎虎。

```
public List<Folder> GetFolderChildsRecursive(Int32 forlderId)
{
    List<Folder> childsOfFolder = context.Folder.Where(e=>e.ParentId == folderId).ToList();
    foreach(Folder child in childsOfFolder)
    {
        List<Folder> childs = GetFoldersRecursive(child.Id);
        childsOfFolder.AddRange(childs);
    }
    return childOfFolder;
} 
```

# opencv - CvSVM.predict() 给出“NaN”输出和低精度

> ID：14924388
> 
> 赞同：4
> 
> 时间：2013-02-17T18:18:04.107
> 
> 标签：opencv, svm

我使用 CvSVM 仅对两种类型的面部表情进行分类。我使用基于 LBP（局部二进制模式）的直方图从图像中提取特征，并使用`cvSVM::train(data_mat,labels_mat,Mat(),Mat(),params)`, where,

data_mat 的大小为 200x3452，包含 200 个行主要形式的样本的归一化（0-1）特征直方图，每个具有 3452 个特征（取决于邻域点的数量）

labels_mat 是对应的标签矩阵，只包含 0 和 1 两个值。参数为：

CvSVMParams 参数；

```
params.svm_type     =CvSVM::C_SVC;
params.kernel_type  =CvSVM::LINEAR;
params.C            =0.01;
params.term_crit=cvTermCriteria(CV_TERMCRIT_ITER,(int)1e7,1e-7); 
```

问题是：-

1.  在测试时，我得到了非常糟糕的结果（大约 10%-30% 的准确率），即使在应用了不同的内核和 train_auto() 函数之后也是如此。

2.  `CvSVM::predict(test_data_mat,true)`给出“NaN”输出

我将不胜感激任何帮助，这让我很难过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-01T12:50:35.330

我想，你的类在你使用的特征空间中是线性硬/不可分离的。在分类器训练步骤之前将 PCA 应用于您的数据集并估计此问题的有效维度可能会更好。此外，我认为使用其他分类器测试您的数据集会很有用。您可以为此目的调整标准 opencv 示例 points_classifier.cpp。它包括许多具有相似界面的不同分类器，您可以使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-01T13:25:03.553

SVM 泛化能力低。首先通过主成分分析降低数据维度，然后将 SVM kerenl 类型更改为 RBF。

# javascript - 带有动态参数的主干集合 url

> ID：14924396
> 
> 赞同：0
> 
> 时间：2013-02-17T18:18:57.020
> 
> 标签：javascript, ruby-on-rails, backbone.js

我正在用 Backbone.js 编写一个 Rails 应用程序。

在 Rails 中，我有一个路由，`config/routes.rb`它接受这样的参数：`/api/u/foo`. 它通过参数获取所有帖子，在这种情况下`foo`。这个的输出是 foo 的所有帖子。Foo 是一个用户，他有很多帖子。

在 Backbone 中，我需要在集合上设置`url`属性以从路由中获取参数，如下所示`/u/foo`：我想要那个去得到`/api/u/foo.json`。我怎么能这样做？我尝试`user`在 Backbone 路由上进行争论，但我无法将它放到集合中。

文件的相关部分`routes.rb`：

```
scope 'api' do
  get "/u/:user", :action => "index", :controller => "posts"
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T18:34:25.167

假设`foo`是您的参数，那么 Backbone 将应用该 URL 来获取单个用户而不是集合才有意义。

我相信您的路线已经很好，`/api/u`应该在哪里返回集合和`/api/u/123`单个用户。你想要的是发送额外的参数`/api/u?foo=bar`来过滤你的集合。

只需将这些发送到 Backbone 中的 .fetch() 调用中即可使其正常工作。在控制器中应用必要的更改以根据可能的各种参数进行过滤。

## 更新

知道你想要每个用户的帖子，你的问题实际上必须做嵌套路由。这里已经有人问过了： [Backbone and Rails Nested Routes](https://stackoverflow.com/questions/8332249/backbone-and-rails-nested-routes)

Backbone.js 的文档在这里：[http ://documentcloud.github.com/backbone/#FAQ-nested](http://documentcloud.github.com/backbone/#FAQ-nested)

为了保持更*安静*，我会这样定义路线：

```
scope '/api' do
  resources :users, only: [], path: 'u' do
    resources :posts, only: :index
  end
end 
```

结果是：

api_user_posts GET /api/u/:user_id/posts(.:format) api/posts#index

# linux - core-site.xml 文件中的端口

> ID：14924399
> 
> 赞同：0
> 
> 时间：2013-02-17T18:19:07.870
> 
> 标签：linux, hadoop, mapreduce, port, hdfs

我试图`HDFS`通过命令在文件系统中创建文件夹

```
./hadoop fs -mkdir /user/hadoop 
```

结果我收到了以下消息

```
13/02/17 09:45:50 INFO ipc.Client: Retrying connect to server: one/192.168.1.8:9000\. Already tried 0 time(s).
13/02/17 09:45:51 INFO ipc.Client: Retrying connect to server: one/192.168.1.8:9000\. Already tried 1 time(s).
13/02/17 09:45:52 INFO ipc.Client: Retrying connect to server: one/192.168.1.8:9000\. Already tried 2 time(s).
13/02/17 09:45:53 INFO ipc.Client: Retrying connect to server: one/192.168.1.8:9000\. Already tried 3 time(s).
13/02/17 09:45:54 INFO ipc.Client: Retrying connect to server: one/192.168.1.8:9000\. Already tried 4 time(s).
13/02/17 09:45:55 INFO ipc.Client: Retrying connect to server: one/192.168.1.8:9000\. Already tried 5 time(s).
13/02/17 09:45:56 INFO ipc.Client: Retrying connect to server: one/192.168.1.8:9000\. Already tried 6 time(s).
13/02/17 09:45:57 INFO ipc.Client: Retrying connect to server: one/192.168.1.8:9000\. Already tried 7 time(s).
13/02/17 09:45:58 INFO ipc.Client: Retrying connect to server: one/192.168.1.8:9000\. Already tried 8 time(s).
13/02/17 09:45:59 INFO ipc.Client: Retrying connect to server: one/192.168.1.8:9000\. Already tried 9 time(s).
Bad connection to FS. command aborted. exception: Call to one/192.168.1.8:9000 failed on connection exception: java.net.ConnectException: Connection refused 
```

在 /export/hadoop-1.0.1/conf/core-site.xml 文件中指定以下内容：

```
<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>

<!-- Put site-specific property overrides in this file. -->

<configuration>

<property>
 <name>fs.default.name</name>
 <value>hdfs://192.168.1.8:9000</value>
</property>

</configuration> 
```

想指定——我指定的端口是否正确？如果不存在，请说明需要什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:51:15.970

好像 hadoop 守护进程没有运行。与 jps 核对

# javascript - 窗口位置未按预期工作

> ID：14924411
> 
> 赞同：0
> 
> 时间：2013-02-17T18:20:20.223
> 
> 标签：javascript, playframework, routes

我希望以下 JavaScript 函数重定向到与我的**路由**文件匹配的 URL。

```
function getUrl() 
{   
    var hash= $('#hashText').val();

    // When the user has not entered a hash, alert to inform them.
    if (!hash)
    {
        alert("Please enter a hash first.");
    }
    else
    {
        alert("Redirecting to ... http://localhost:8080/tasks/" + hash);
        window.location = "http://localhost:8080/tasks/" + hash;
    }
} 
```

**这是我的路由**文件中相应的路由条目。

```
GET     /tasks/:hash                controllers.Application.getTask(hash: Int) 
```

然而，这个函数的结果是：

`http://localhost:9000/tasks?hash=2014281623`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T18:37:13.730

如果您将代码更改为：

```
var url = 'http://localhost:9000/tasks/';
url += escape(hash);
window.location = url; 
```

# c# - Datagridview 值更改时更改数据表列值

> ID：14924412
> 
> 赞同：0
> 
> 时间：2013-02-17T18:20:22.193
> 
> 标签：c#, winforms, datagridview

我在表单上有两个 datagridview 控件。当我们在 DGV1 中选择更改时，DGV2 行会根据 DGV1 中的 ID 进行过滤。现在，如果我在 DGV2 的单元格中进行更改，则名为 Amount 的列会在 DGV1 中更新。我已经使用更改的单元格值实现了这一点并且它工作正常。为此我正在使用数据表。所以当我想在数据库中保存 dgv2 中的更改时。在 DGV2 中输入的值没有保存。为此我也在改变数据表中的值取决于行索引。下面是 DGV1 中的数据

```
ID 数量 单价 金额
----------------------

1 20 2 40
2 40 3 120

在下面的 DGV2 中是数据

ID 销售数量
------------
1 5   
2 10  
1 15
2 10

```

因此，当用户单击 DGV1 中的任何单元格时，DGV2 行会被过滤（正如您在 DGV1 中看到的 ID=1 有 2 个值）。这一切都很好。下面是我在 Cellvalue changed of DGV2 中编写的代码行，以便数据表单元格也被更新，因为我需要使用 foreach 循环保存在数据库中。

```
dtBatch.Rows[i].SetField("SellQty", gvBatchDetails.Rows[i].Cells["SellQty"].Value); 
```

我正在使用变量 i (int)。但是当用户在 DGV1 中输入 ID 2 时过滤该行时，第一行的 i 值也更改为 0。在 Datatable ID 2 中位于索引 1 处。那么如何制作在这种情况下，数据表的变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T09:00:40.457

我已经通过从 datagridview 获取选定的行来解决这个问题。

```
 DataRow[] rowList = QuoteSalesItemSearch.dtBatch.Select("BatchItemID='" + ItemID + "'" + "and BatchNo='" + BatchNo + "'");
  foreach (DataRow dr in rowList)
   dr["SellQty"] = gvBatchDetails.Rows[e.RowIndex].Cells["SellQty"].Value; 
```

# android - 如何使用 onItemLongClick 显示上下文菜单？

> ID：14924414
> 
> 赞同：4
> 
> 时间：2013-02-17T18:20:30.330
> 
> 标签：android, android-contextmenu

我试图在这里得到答案，但没有得到任何完美的答案。我正在尝试显示上下文菜单`onItemLongClick`但没有成功，因为我同时使用`onItemClick`和`onItemLongClick`

我正在`onItemClick`开始一项新活动，但两者都没有成功。

这是代码

```
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.all_contacts);  

    contactList = new ArrayList<HashMap<String,String>>();

    new LoadAllContacts().execute();

    registerForContextMenu(getListView());

    ListView listView = getListView();

    listView.setOnItemLongClickListener(new OnItemLongClickListener() {

        @Override
        public boolean onItemLongClick(AdapterView<?> parent, View view,
                int postion, long id) {
                registerForContextMenu( view );
                openContextMenu( view ); 
            return true;
        }
    });
    listView.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, View view, int postion, long id) {
            Intent intent = new Intent(AllContactsActivity.this, editContactActivity.class);    
        }
    });
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    if(resultCode == 100)
    {
        Intent intent = getIntent();
        finish();
        startActivity(intent);
    }
}

@Override
public void onCreateContextMenu(ContextMenu menu, View v,
        ContextMenuInfo menuInfo) {
    super.onCreateContextMenu(menu, v, menuInfo);
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.listview_menu, menu);
}
@Override
public boolean onContextItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.editContactMI:
        Intent i = new  Intent(getApplicationContext(), editContactActivity.class);
        i.putExtra(TAG_ID, cId);
        i.putExtra(TAG_NAME, cName);
        i.putExtra(TAG_CONTACT_NO, cNumber);
        startActivityForResult(i, 100);
        cId = null;
        cName = null;
        cNumber = null;
        break;
    case R.id.deleteContactMI :
        new DeleteContact().execute();
        break;
    case R.id.saveContactMI:
        break;
    default:
        cId = null;
        cName = null;
        cNumber = null;
        break;
    }

    return true;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T18:24:37.810

> 我正在尝试在 onItemLongClick 上显示上下文菜单

要使用上下文菜单系统，您无需实现`OnItemLongClickListener`. 相反，您调用`registerForContextMenu()`（例如，来自`onCreate()`活动）。只需从上面显示的代码中删除您`OnItemLongClickListener`的，您应该会有更好的运气。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-19T06:07:29.677

试试这个：

```
listView.setOnItemLongClickListener(this); 
```

* * *

```
@Override
public boolean onItemLongClick(AdapterView<?> parent, View view, int position, long id) {
    Cursor c_index = (Cursor) parent.getItemAtPosition(position);
    detail_id = c_index.getInt(c_index.getColumnIndexOrThrow(DbAdapter.KEY_RID));
    registerForContextMenu( parent );
    openContextMenu( parent );
    return true;
} 
```

* * *

```
@Override
public void onCreateContextMenu(ContextMenu menu, View v, ContextMenu.ContextMenuInfo menuInfo) {
    super.onCreateContextMenu(menu, v, menuInfo);
    if (v.getId()==R.id.list) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.menu_context, menu);
    }
} 
```

* * *

```
@Override
public boolean onContextItemSelected(MenuItem item) {
    switch(item.getItemId()) {
        case R.id.action_details:
            //some code
            return true;
        case R.id.action_share:
            //some code
            return true;
        case R.id.action_del:
            //enter code here`
           return true;
        default:
            return super.onContextItemSelected(item);
    }
} 
```

# java - 如何将 CSV 导入 neo4j

> ID：14924421
> 
> 赞同：1
> 
> 时间：2013-02-17T18:21:11.843
> 
> 标签：java, neo4j

我是 Neo4j 的新手。我为 windows 下载了 neo4j 1.9。我尝试在 Gremlins 中运行代码，以便将 CSV 文件导入 Neo4j。我将 CSV 文件（其中一个包含节点，另一个包含关系）保存到 graph.db 中名为 target 的新文件夹中。然后我执行了这一行：

```
java -server -Xmx4G -jar ../batch-import/target/batch-import-jar-with-dependencies.jar neo4j/data/graph.db nodes.csv rels.csv 
```

但我得到了这个错误：

启动失败

```
==> groovysh_parse: 51: expecting EOF, found 'target' @ line 51, column 42.
==>    r -Xmx4G -jar ../batch-import/target/bat
==>                                  ^
==> 
```

当我运行这个时，我得到了同样的错误：

```
"git clone git://github.com/jexp/batch-import.git" 
```

当我想通过此代码安装 Maven 时：

```
 "sudo apt-get install maven2" 
```

我收到了这个错误：

```
No such property: apt for class: groovysh evaluate. 
```

如果帮助我将 csv 文件导入 Neo4j，我将不胜感激。谢谢法特梅

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T18:36:03.330

文档[https://github.com/jexp/batch-import](https://github.com/jexp/batch-import)侧重于 Mac 和 Linux 系统。在 Windoze 上运行时，您需要将所有 unix 路径分隔符 ("/") 转换为 windows 等效项 ("\")。

apt-get 命令也是 Linux 特定的。

有关如何将 csv 数据导入 neo4j 的非常基本的描述，请查看[http://blog.neo4j.org/2013/01/fun-with-beer-and-graphs.html](http://blog.neo4j.org/2013/01/fun-with-beer-and-graphs.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T07:23:35.493

如果你安装了java，你也可以从以下网址下载一个现成的jar： [https ://github.com/jexp/batch-import/downloads](https://github.com/jexp/batch-import/downloads)

不要从 gremlin shell 执行它，而是从普通命令行执行它（Windows - 运行 - cmd）

您也可以单击 github 存储库的“下载为 zip”按钮来获取代码。

对于 Maven 下载和解压 apache maven，来自：[http ://maven.apache.org](http://maven.apache.org)

# php - 添加无限字段表单并从数据库中选择

> ID：14924427
> 
> 赞同：0
> 
> 时间：2013-02-17T18:21:21.227
> 
> 标签：php, codeigniter

我需要制作一个表格来从数据库中检索值。默认情况下，该表单将有一个日期字段 AND/OR 下拉菜单和一行三个字段。用户可以根据需要添加/删除额外的行。这三个字段是：

*   带有选项的下拉菜单，作为 db 中的表名（例如，employee_name、vehicle_name 等）
*   条件下拉列表（如/等于/大于等）
*   用户可以在其中输入数据的文本框（例如，福特、铃木等）。

如何制作一个表单，我可以根据需要添加/删除字段，然后通过 PHP 代码检索值并将其用作查询以从数据库中选择和显示适当的值？

我使用 PHP Codeigniter 方法来构建这个自定义搜索表单。

[形成图像](http://www.flickr.com/photos/93336185@N06/8484142759/in/photostream)

# sql-server - 如何为代表记录号的表中的每一行分配一个数字？

> ID：14924429
> 
> 赞同：8
> 
> 时间：2013-02-17T18:21:32.163
> 
> 标签：sql-server, database-design, sql-server-express

如何显示表中的行数，当添加新记录时，表示该行的数字会更高，而当删除记录时，数字会相应更新？
更清楚地说，假设我有一个像这样的简单表格：

> ID int（主键） 名称 varchar(5)

ID 设置为自行递增（使用标识规范），因此它不能表示行（记录）的数量，因为如果我有例如 3 条记录：

> ID NAME
> 1 亚历克斯
> 2 斯科特
> 3 萨拉

我删除了 Alex 和 Scott 并添加了一条新记录：

```
3 Sara
4 Mina 
```

所以基本上我正在寻找一个 sql 端解决方案来执行此操作，这样我就不会在多个地方更改源代码中的任何其他内容。

我试图写一些东西来完成工作，但它失败了。这里是 ：

```
SELECT        COUNT(*) AS [row number],Name
FROM          dbo.Test
GROUP BY ID, Name
HAVING        (ID = ID) 
```

这显示为：

```
row number            Name
1                     Alex
1                     Scott
1                     Sara 
```

虽然我希望它显示为：

```
row number            Name
1                     Alex
2                     Scott
3                     Sara 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-17T18:43:10.400

如果您只想在选择数据而不是在数据库中的行中使用数字，那么您可以使用它

```
select row_number() over(order by id) from dbo.Test 
```

这将给出第 n 行的行号 n。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T18:46:04.967

尝试

```
SELECT id, name, ROW_NUMBER() OVER (ORDER BY id) AS RowNumber
FROM   MyTable 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-17T18:27:39.497

您想要的称为自动增量。

对于 SQL-Server，这是通过将`IDENTITY(1,1)`属性添加到表定义来实现的。

其他 RDBMS 使用不同的语法。例如，Firebird 有生成器，可以进行计数。在 BEFORE-INSERT 触发器中，您可以将 ID 字段分配给生成器的当前值（将自动增加）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T20:20:04.320

前段时间我遇到了这个确切的问题，但我使用的是 SQL Server 2000，所以虽然 row number() 是最好的解决方案，但在 SQL Server 2000 中，这是不可用的。解决方法是创建一个临时表，插入所有具有自动增量的值，然后用 T-SQL 中的新表替换当前表。

# c - 创建算法：当盒子中有最大点数时，盒子拆分

> ID：14924432
> 
> 赞同：-2
> 
> 时间：2013-02-17T18:21:48.693
> 
> 标签：c, algorithm

您好，我需要以下帮助来制作算法：

假设一个具有 xmax、xmin、ymin、ymax 的二维空间域，空间中有“n~10,000”个点。

1.  浏览点位置列表。

2.  当盒子里有最大的点数（比如说 10）时，盒子分成 4 个相等的小盒子。

3.  然后再次检查每个较小的框是否超过最大值。的点。它将再次分成 4 个相等的小盒子......直到盒子的点数少于每个盒子的最大点数。

有什么建议我可以如何制作这个算法？请？

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T18:28:49.370

您应该尝试自己对此进行编程，然后在遇到问题**时再次询问。**

为了让您开始，这里有一个想法：创建**两个索引数组，**它们从 0 上升到您拥有的点数。然后使用点的 x 值对一个索引数组进行排序，并使用 y 值对另一个索引数组进行排序。**然后，您可以通过简单地从每个数组中获取第n 个**条目并结合您获得的 2 个点的 x/y 最大值来读取您需要的内容。（另外：要获得下一个交叉点，您不需要再次排序，只需使用下一个第 n 个条目）

# forms - 使用 Symfony 2 以嵌套形式推送选项

> ID：14924433
> 
> 赞同：1
> 
> 时间：2013-02-17T18:21:55.217
> 
> 标签：forms, service, nested, symfony-2.1, nested-forms

我正在使用选择框处理表单。这些方框代表国家之间不同的比例。

因此，我创建了一个服务，它生成自定义值以根据用户的偏好提供选择框。这适用于第一级表单：

控制器代码：

```
$form = $this->createForm(new formType, $entity, array(

     // Getting the service    
     'myScales'     => $this->get('myBnd.scales'),

     // Getting user's scale preference
     'scalesLocale'  => $this->get('security.context')->getToken()->getUser()->getScaleLng(),

     )); 
```

然后，我在 formType 中得到了显示自定义选择所需的一切：

```
public function buildForm(FormBuilder $builder, array $options) {

    $scaleSelect = array();        
    // Here is a custom code using $options['myScales'] and $options[scalesLocale']
    // This builds the relevant $scaleSelect

    // ....

$builder
        ->add('scale', 'choice', array(
            'choices'   => $scaleSelect
        ))
        ->add('subscale', 'collection', array(
            'type' => new subType,
            'prototype' => true,
            'allow_add' => true,
            'allow_delete' => true,
        )) 
```

然后我需要定义嵌套的子类型。它还需要一个自定义的选择框。如何将变量发送给它`$scaleSelect`以生成（相同）适当的选择框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T20:24:36.683

我想到的最快的选择：

```
 ->add('subscale', 'collection', array(
           'type' => new Subtype($scaleSelect),
           'prototype' => true,
           'allow_add' => true,
           'allow_delete' => true,
       )) 
```

然后在您的子类型类中：

```
 function __construct($choices) {
         $this->choices = $choices;
     } 
```

之后，您可以使用 $this->choices 在 buildform 中访问您传递的选项。希望能帮助到你。

# java - 关于将一万个对象放入其中的Hashmap的性能

> ID：14924434
> 
> 赞同：0
> 
> 时间：2013-02-17T18:21:58.293
> 
> 标签：java, map

我是 Java 世界的新手，我只想知道 Hash Map 的默认大小是 10，它根据负载因子 0.75 扩展自身，然后发生冲突并创建一个新的链表数组所有的洗牌都会发生。

但是我的问题是假设当我将 10,000 个对象放入其中时 Map 的性能如何，

例如

```
 Map map=new HashMap(); 
```

如何放置 10,000 个对象，必须遵循任何 for 循环，请告知

```
for(1=0;1<=10,000,i++)
{
} 
```

其次，在放置对象时会对性能产生什么影响，以及对地图性能有什么影响。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T18:25:44.230

是的，您可以循环并将每个对象一次放入 hashmap ..

您可以使用具有更高值的 HashMap(int initialCapacity) 用于 initialCapacity..因为您知道会有 10000 个对象...

从哈希映射中检索的性能取决于您的对象 hashcode() 实现......

不同对象的哈希码返回的更多不同值将对象均匀分布在各个桶中......这会导致更快的检索时间......

请查看 hashmap 的工作原理，这会给您一些想法：

[http://javarevisited.blogspot.com/2011/02/how-hashmap-works-in-java.html](http://javarevisited.blogspot.com/2011/02/how-hashmap-works-in-java.html)

# java - Graphics.drawImage() 处的空指针异常

> ID：14924442
> 
> 赞同：0
> 
> 时间：2013-02-17T18:22:43.217
> 
> 标签：java, nullpointerexception, java-3d

这是我用来在 J3D Canvas3D 上绘制图像的代码：

```
 Graphics g = Canvas.getGraphics(); //Canvas is the Canvas3D
    g.drawImage(new ImageIcon("back/loadingscreen.png").getImage(),
            0, 0, Canvas); 
```

但是，每当我运行代码时，我都会在 g.drawImage() 行得到 NullPointerException。我不知道是什么导致了异常，我们将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T18:27:42.260

您的 ImageIcon 为空，请使用它来正确加载您的 ImageIcon

```
 InputStream stream = this.getClass().getClassLoader().getResourceAsStream("back/loadingscreen.png");
     BufferedImage bufferedImage=ImageIO.read(stream);
     ImageIcon icon= new ImageIcon(bufferedImage);

     Graphics g = Canvas.getGraphics(); 
        g.drawImage(icon.getImage(), 0, 0, Canvas); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T18:41:59.767

尝试这样的事情：

图形 g = Canvas.getGraphics();

如果（g==null）{

System.out.println("没有从 getGraphics 方法接收到任何 Graphics 对象。");

}

ImageIcon icon = new ImageIcon("back/loadingscreen.png");

如果（图标==空）{

```
System.out.println("The icon is not received meaning the URL path (back/laodingscreen.png) is probably wrong."); 
```

}

# java - 引用动态创建的 JButton

> ID：14924445
> 
> 赞同：0
> 
> 时间：2013-02-17T18:22:55.087
> 
> 标签：java, swing

我有一个 JPanel，我在上面动态添加了很多 JButton。所有这些都运行良好。稍后在我的程序执行中，我需要参考这些按钮并提取按钮文本。我很难弄清楚如何回馈他们。

当我创建每个按钮时，我给了它一个唯一的名称。假设这是我创建按钮的代码：

```
public void createButton(Container parent, String btnName) {
   JButton btn = new JButton("xyz");
   btn.setName(btnName);
   btn.addActionListner(new ActionListner() {
      //code
   }
   parent.add(btn);
 } 
```

在另一种方法中，我试图检索按钮上的标签，因为它可能在运行时发生了变化。我是否需要在创建这些按钮时保留这些按钮的数组？或者有没有办法可以直接参考他们？

这就是我正在做的事情，但这很愚蠢。任何人都可以提出正确的方法吗？

```
public String getBtnLabel(String btnName) {
   JButton btn = (JButton) btnName;
   return btn.getText();
} 
```

如果答案是我只需要创建数组然后对其进行迭代，那很好。只是在寻找其他选择。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T18:30:26.327

您需要使用 a`Map<String, JButton>`所以当您创建动态按钮时，您需要给它们起一个独特的名称：

```
//somewhere at the top of your class
private final Map<String, JButton> myButtonMap = new HashMap<>();

public void createButton(Container parent, String btnName) {
   JButton btn = new JButton("xyz");
   btn.setName(btnName);
   btn.addActionListner(new ActionListner() {
      //code
   }
   parent.add(btn);
   myButtonMap.put(btnName, btn);
 } 
```

然后只需从地图中获取

```
public String getBtnLabel(String btnName) {       
   return myButtonMap.get(btnName).getText();
} 
```

如果未定义按钮，这显然会引发 NPE...
此外，您需要在完成后从地图中删除它，否则您会要求内存泄漏...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T18:29:27.487

我建议你使用[`Map< String, JButton >`](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html).

在创建时，您将新按钮放入其中[`buttons.put( name, btn )`](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html#put%28K,%20V%29)

在您使用的事件处理程序中[`JButton btn = buttons.get( name )`](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html#get%28java.lang.Object%29)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-17T18:30:29.747

是的，您需要保留对按钮的引用。数组是一种选择，但由于数组使用起来很尴尬，你应该更喜欢 List。

如果您有对包含按钮的 JPanel 的引用，则可以从中获取它们。但这可能相当麻烦。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-17T18:31:43.410

我建议在地图中保留按钮列表或对它们的引用，但是您可以这样做：

```
for (Component i : parent.getComponents()) {
    if (i.getName().equals(btnName)) {
         JButton b = (JButton) i;
         // do stuff..
    }
} 
```

使用父组件并迭代添加的组件。

# php - 是否可以通过链接将照片发布到 Facebook，而不是上传？

> ID：14924446
> 
> 赞同：-1
> 
> 时间：2013-02-17T18:23:03.203
> 
> 标签：php, facebook

这是否可以在用户/页面的时间轴上创建照片，而不是通过上传所述照片，而是通过提供已上传图像的 URL？到目前为止，我的代码是这样的：

```
$response = $fb->api ("/$page_id/photos", 'post', array (
    'name'          => $_description,
    'source'        => $_image_path
)); 
```

这会导致`OAuthException`#324 “需要上传文件”。另外，我想立即将照片发布在页面的时间线上 - 它会发生吗，还是我需要为此单独打电话？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T18:33:02.090

`source`您可以为切换参数`url`，并为其提供可公开访问的 HTTP URL 作为值。

但请注意，这仅适用于*尚未*在 Facebook 上的照片 - 向其提供 Facebook 上照片的 URL 将导致一条错误消息，指出无法从其 CDN 发布照片。

# android - Android 一种为/所有偏好触发 onSharedPreferenceChange() 的方法

> ID：14924451
> 
> 赞同：4
> 
> 时间：2013-02-17T18:23:22.413
> 
> 标签：android, sharedpreferences

1.  我通过读取文本文件并对其进行解析来加载一组新设置。
2.  对于我在那里找到的每个设置，我提取值并更新相应的首选项（无论是 CheckPreference、ListPreference 还是 EditTextPreference）。
3.  所有这些都是从设置片段完成的。这意味着在我进行更改时，首选项屏幕会显示在视图中。
4.  因为我以编程方式更改值 ( `editor().commit`)，所以不会触发 onSharedPreferenceChange()。

这就是为什么我之后使用此代码刷新所有首选项的原因：

```
private void refreshPreferences() {
    SharedPreferences sp = PreferenceManager.getDefaultSharedPreferences(mContext);
    for(int i = 0; i < getPreferenceScreen().getPreferenceCount(); i++) {
        onSharedPreferenceChanged(sp, getPreferenceScreen().getPreference(i).getKey());
    }
} 
```

它完美地工作。我只是想知道是否存在使所有首选项无效的系统调用会达到相同的结果（对 onSharedPreferenceChanged() 的自动调用）

我不是肛门，我只是不喜欢手动调用应该由操作系统调用的方法。

**编辑**
这是我当前更改首选项的代码。我之前尝试使用编辑器进行更改，但也没有生成 onSharePreferncesChanged() 调用。
来源：它是从文件中读取的多行字符串

```
private enum Type { INT, BOOLEAN, EDITTEXT, LIST }; 

private void loadPreference(int key, char [] source, Type t) {
    String s = new String(source);
    Log.i(TAG, "+ loadPreference(key:" + key + ", source:(" + s + "), t:" + t + ")");
    String sKey = getText(key).toString();
    Matcher m;
    Preference p = findPreference(sKey);
    switch( t ) {
    case BOOLEAN:
        m = Pattern.compile("(?m)^" + sKey + "=\"(true|false)\"$").matcher(s);
        if( m.find() ) ((CheckBoxPreference)p).setChecked(m.group(1).equals("true"));
        break;
    case INT:
        m = Pattern.compile("(?m)^" + sKey + "=\"(\\d+)\"$").matcher(s);
        if( m.find() ) ((EditTextPreference)p).setText(m.group(1));
        break;
    case EDITTEXT:
        m = Pattern.compile("(?m)^" + sKey + "=\"(.*)\"$").matcher(s);
        if( m.find() ) ((EditTextPreference)p).setText(m.group(1));
        break;
    case LIST:
        m = Pattern.compile("(?m)^" + sKey + "=\"(\\d+)\"$").matcher(s);
        if( m.find() ) ((ListPreference)p).setValueIndex(Integer.valueOf(m.group(1)));
        break;
    default:
    }
    Log.i(TAG, "- loadPreference()");
}

public void onSharedPreferenceChanged(SharedPreferences prefs, String key) {
    Log.i(TAG, "+ onSharedPreferenceChanged(prefs:" + prefs + ", key:" + key + ")");
    if( key != null ) {
        updatePreference(prefs, key);
        updateSummary(findPreference(key));
    } else {
        Log.e(TAG, "Preference without key!");
    }
    Log.i(TAG, "- onSharedPreferenceChanged()");
}

@Override
public void onResume() {
    Log.i(TAG, "+ onResume()");
    super.onResume();
    // Set up a listener
    getPreferenceScreen().getSharedPreferences().registerOnSharedPreferenceChangeListener(this);
    Log.i(TAG, "- onResume()");
}

@Override
public void onPause() {
    Log.i(TAG, "+ onPause()");
    super.onPause();
    // Unregister the listener
    getPreferenceScreen().getSharedPreferences().unregisterOnSharedPreferenceChangeListener(this);
    Log.i(TAG, "- onPause()");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T00:32:33.810

实现此目的的符合准则的方法是使用[`OnSharedPreferenceChangeListener`](http://developer.android.com/reference/android/content/SharedPreferences.OnSharedPreferenceChangeListener.html).

在你问题的第 4 点，你说

> 因为我以编程方式更改值，所以不会触发 onSharedPreferenceChange()。

这取决于您*如何*更改设置。在你的第 2 点，你说

> 对于我在那里找到的每个设置，我都会提取值并更新相应的首选项...

请确保您使用设置编辑器并*提交*您的更改，类似于以下内容：

```
SharedPreferences sp = PreferenceManager.getDefaultSharedPreferences(mContext);
SharedPreferences.Editor editor = sp.edit();
editor.putString("key","value"); // your updated setting
editor.commit(); 
```

如果您的其他类正确实现了 an`OnSharedPreferenceChangeListener`并通过调用`registerOnSharedPreferenceChangeListener(this)`您的 default注册了它`SharedPreferences`，您应该能够在`onSharedPreferenceChanged()`方法中侦听这些更改。

至少这是[Dev Guide on Settings](http://developer.android.com/guide/topics/ui/settings.html#Listening)中的文章所建议的，并且我已经以类似的方式成功实现了它（“以编程方式”更改设置）。

**更新的答案：**
由于您的评论说上述内容不起作用，我再次查看了我的代码。确实，我认为您想从不同的班级实现这一目标，所以我弄错了您的问题。

如果您在`PreferenceFragment`（或`PreferenceActivity`）中，您也*可以*实现该`OnSharedPreferenceChangeListener`接口，但将其注册为您当前显示的首选项`PreferenceScreen`。最佳做法是`onResume()`通过调用注册它

```
getPreferenceScreen().getSharedPreferences().registerOnSharedPreferenceChangeListener(this); 
```

然后注销`onPause()`：

```
getPreferenceScreen().getSharedPreferences().unregisterOnSharedPreferenceChangeListener(this); 
```

如前所述，您会收到您的偏好`onSharedPreferenceChanged()`更改`PreferenceFragment`。这是（现在是真实的）它在我的代码中的工作方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-21T12:33:07.920

当新值等于前一个值时，不会触发 OnSharedPreferencesChangeListener。在这种情况下 SharedPreferences 不会更新。

我在适当的时候解决了这个问题，清除了旧值。

# jquery - jquery点击事件被堆叠和执行

> ID：14924458
> 
> 赞同：0
> 
> 时间：2013-02-17T18:24:29.940
> 
> 标签：jquery, drupal

使用以下代码（在drupal中）

```
 ( function ($) {
  Drupal.behaviors.auction_house = {
    attach: function(context,settings) {

      $(document).ready(function(){
        // buy item animation
        $(".buy_item_button").click(function() {
          $(".slide_bags").fadeOut(222).fadeIn(222);
          return false;
        });
        // datagrid
        $('#auction_house_table').dataTable();   
      });

    }
  };
})(jQuery); 
```

如果单击，则触发事件，如果再次单击，则触发事件 2 次，然后 3 次，然后 4 次，依此类推。所以让我们称之为“被堆叠”。重要信息：包含附加 onclick 功能的链接的内容是通过 ajax 加载的。

这怎么会发生，我该如何防止这种情况发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T18:54:40.727

`'click'`我猜你正在多次绑定事件（当加载 ajax 内容时）。您可以`unbind`再次绑定之前的事件，也可以在重新绑定之前检查事件是否已经绑定：

在绑定事件之前取消绑定：

```
$(".buy_item_button").unbind('click').click(function() {
    //your code...
}); 
```

此外，请参阅**[此链接](https://stackoverflow.com/a/6361507/112731)**以检查事件是否已绑定到元素。

但我认为最好的方法是将`click`事件仅绑定到最新添加的内容。因此，与其将事件直接绑定到`.buy_item_button`选择器；您可以选择新内容和有班级`find`的孩子：`.buy_item_button`

```
$("#new-content").find(".buy_item_button").click(function() {
    //your code...
}); 
```

# javascript - jquery 在 javascript for 循环中无法按预期工作

> ID：14924463
> 
> 赞同：0
> 
> 时间：2013-02-17T18:25:26.443
> 
> 标签：javascript, jquery

我遇到了在 javascript for 循环中使用 jQuery 的问题。经过超过 24 小时的调查，我决定发布问题的核心。我已将代码缩减为简单示例：

```
var a, i, j;
var n = $("div.kategorija_tekst").length;
document.write("n = " + n + "<br>");
for (i = 0; i < n; i++){
    a = $("div.kategorija_tekst").length;
    document.write("polje["+i+"]  = " + a +"<br>");
    for (j = 0; j < a; j++){
        document.write($("div.def_tekst").eq(j).height() + "px, ");
    }
} 
```

我有：

*   在 Opera 12.14、Google Chome 24.0.1312.57 m、Safari 5.1.7.、Firefox 18.0.2 中：

    > n = 6, polje[0] = 0, polje[1] = 0, polje[2] = 0, polje[3] = 0, polje[4] = 0, polje[5] = 0,

*   在 IE8 中：

    > n = 6

但应该预期为：

> n = 6, polje[0] = 6, 28px, 28px, polje[1] = 6, 28px, 28px, polje[2] = 6, 28px, 28px, polje[3] = 6, 28px, 28px, polje[ 4] = 6, 28px, 28px, polje[5] = 6, 28px, 28px,

奇怪的！为什么`a`for 循环内的变量值为零？为什么`height()`值（在嵌套`for`循环中）完全丢失？为什么 IE8 连这一行都没有写成功？

```
("polje["+i+"]  = " + a + "<br>") 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T18:36:56.923

document.write 覆盖文档内容：

```
var a, i, j;
var n = $("div.kategorija_tekst").length; 
document.write("n = " + n + "<br>"); //document no longer has any elements
for (i = 0; i < n; i++){
    a = $("div.kategorija_tekst").length; // returns null, no such thing in document
    document.write("polje["+i+"]  = " + a +"<br>");
    for (j = 0; j < a; j++){
        document.write($("div.def_tekst").eq(j).height() + "px, ");
    }
} 
```

您正在覆盖文档内容，因此下一个选择器始终返回 null。

# php - 在 PHP 中将 html 作为字符串返回

> ID：14924466
> 
> 赞同：0
> 
> 时间：2013-02-17T18:25:43.433
> 
> 标签：php, html, get

当我使用 CocoaRestClient 在 HTML 网站上提交 GET 时，它将返回该网站的源代码。如何在 php 中返回与字符串相同的内容（或转换为字符串或解析的内容）？我试过使用

```
 echo $_GET[$url]; 
```

但它似乎没有返回任何东西。

注意：返回的字符串可能会相当大。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T18:29:11.643

如果您询问如何从 PHP 发出 HTTP 请求并将响应作为字符串获取，对于最简单的情况，您可以使用[`file_get_contents`](http://www.php.net/manual/en/function.file-get-contents.php)：

```
$html = file_get_contents('http://www.google.com'); 
```

如果你想做一些更可配置的事情，那么你必须使用[`curl`](http://php.net/manual/en/book.curl.php).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T18:38:40.987

您是否想阻止将源发送到访问者的浏览器并将其作为字符串获取？您可以使用输出缓冲区。

将此行放在代码的开头：

```
ob_start(); 
```

从现在开始，通常发送到浏览器的所有内容都将被缓冲。要结束缓冲并获取内容，请使用：

```
$out = ob_get_contents();    // this will only get the contents
$out = ob_get_clean();       // this will also empty the buffer 
```

要停止缓冲：

```
ob_end_clean();              // will just stop buffering
ob_end_flush();              // will also echo() current buffer 
```

[在此处输出缓冲区文档](http://pl1.php.net/manual/en/ref.outcontrol.php)。

# mysql - 配置 WordPress 站点的开发、登台和生产版本

> ID：14924467
> 
> 赞同：0
> 
> 时间：2013-02-17T18:25:44.223
> 
> 标签：mysql, wordpress

我有一个已经投入生产的由 Wordpress 提供支持的网站。我想在我的本地机器上创建这个站点的 MAMP 驱动的开发副本，以及一个驻留在我的网络主机上的暂存副本。时机成熟时，我会将内容从本地开发推送到登台，并在测试后登台到生产。

就正确地将所有内容添加到所有三个站点而言，我确实在 Codex 中看到[了这篇文章](http://codex.wordpress.org/Running_a_Development_Copy_of_WordPress)，但我认为如果我可以使用更简单的方法：

1.  使用 WP 仪表板下的“工具 > 导出”将生产站点内容下载为 XML 文件。
2.  将 XML 文件导入我本地 MAMP 站点上的 phpMyAdmin。
3.  确保所有插件配置匹配。
4.  在 MAMP 端使用“工具 > 导出”创建另一个 XML 文件，然后将其导入新的临时站点。
5.  更改暂存站点的 wp-config 文件中的 DB 名称、UN 和 PW 信息。
6.  要将 XML 文件从暂存转移到生产，我将重复步骤 4。wp-config 文件已经启动并运行，因此无需在此处进行任何更改。

此外，由于我在生产环境中更改了数据库的“wp_”表前缀，因此我假设我需要对开发环境和暂存环境执行相同的操作。

我不擅长 MySQL，只使用了一点 phpMyAdmin，这就是我问这个问题的原因。如果我做了所有这些，我是否错过了一些重要的事情，我是否会惊人地崩溃并烧毁我的网站？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T20:18:22.023

我想只要确保 wp-config.php 中指定的数据库与版本匹配即可。

IE。

```
development wp-config.php specifies wp_devdb
staging wp-config.php specifies wp_stagedb
production wp-config.php specified wp_productiondb 
```

创建数据库（在本地使用 mamp）

```
mysql -u root -p 
```

（然后输入您的密码）

```
mysql->create database wp_devdb
->create database wp_devdb 
```

如果重要，请不要删除任何表，即除非您想要全新安装，否则不应删除您的生产表

# c - pthread_cond_wait(&cond_t, &mutex); 解锁然后锁定互斥锁？

> ID：14924469
> 
> 赞同：48
> 
> 时间：2013-02-17T18:25:53.290
> 
> 标签：c, pthreads, mutex

我`pthread_cond_wait(&cond_t, &mutex);`在我的程序中使用，我想知道为什么这个函数需要一个互斥变量作为第二个参数。

是否`pthread_cond_wait()`在开始时（执行开始）解锁互斥锁，`pthread_cond_wait()`然后在完成时（就在离开之前`pthread_cond_wait()`）锁定？

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2013-02-17T19:30:28.300

关于条件变量及其用法的主题有*很多文本，所以我不会用大量丑陋的细节让你厌烦。*它们存在的原因是允许您通知**谓词**状态的更改。以下是理解正确使用条件变量及其互斥关联的*关键：*

*   `pthread_cond_wait()`同时**解锁**互斥锁*并*开始等待条件变量发出信号。因此，在调用互斥锁之前，您必须*始终*拥有该互斥锁的所有权。

*   `pthread_cond_wait()`与互斥**锁**一起返回，因此您必须解锁互斥锁以允许在完成后在其他地方使用它。是否因为条件变量发出信号而发生返回*是不相关*的。您仍然需要检查您的谓词，无论是否考虑潜在的*虚假唤醒*。

*   互斥锁的目的**不是**保护条件变量；它是为了保护条件变量被用作信号机制的*谓词。*这是 pthread 条件变量及其互斥锁最常被误解的习语。条件变量不需要互斥保护；谓词数据*确实如此*。将谓词视为条件变量/互斥锁对的用户正在监视的外部状态。

例如，等待布尔标志的一段微不足道但明显*错误*`fSet`的代码：

```
bool fSet = false;

int WaitForTrue()
{
    while (!fSet)
    {
        sleep(n);
    }
} 
```

我应该很明显，主要问题是谓词 ,`fSet`根本不受保护。*很多*事情都可能在这里出错。例如：从您评估 while 条件到您开始等待（或旋转，或其他）的时间，值可能已经改变。如果不知何故*错过了*该更改通知，则您无需等待。

我们可以稍微改变一下，这样至少谓词会以某种方式受到保护。修改*和*评估谓词的互斥很容易通过（还有什么）互斥锁提供。

```
pthread_mutex_t mtx = PTHREAD_MUTEX_INITIALIZER;
bool fSet = false;

int WaitForTrue()
{
    pthread_mutex_lock(&mtx);
    while (!fSet)
        sleep(n);
    pthread_mutex_unlock(&mtx);
} 
```

好吧，这看起来很简单。现在我们永远不会在没有首先获得对它的独占访问权（通过锁定互斥锁）的情况下评估谓词。但这仍然是一个大问题。我们锁定了互斥体， *但在循环结束之前我们从不释放它*。如果其他人都遵守规则并在评估或修改 之前等待互斥锁`fSet`，那么在我们放弃互斥之前，他们永远无法这样做。在这种情况下，唯一能做到这一点的“人”是*我们*。

那么如何添加更多层呢。这行得通吗？

```
pthread_mutex_t mtx = PTHREAD_MUTEX_INITIALIZER;
bool fSet = false;

int WaitForTrue()
{
    pthread_mutex_lock(&mtx);
    while (!fSet)
    {
        pthread_mutex_unlock(&mtx);
        // XXXXX
        sleep(n);
        // YYYYY
        pthread_mutex_lock(&mtx);
    }
    pthread_mutex_unlock(&mtx);
} 
```

嗯，是的，它会“工作”，但也好不到哪里去。`XXXXX`与`YYYYY`我们不拥有互斥锁之间的时间段（这没关系，因为我们`fSet`无论如何都不会检查或修改）。但是在此期间的任何时候，其他线程都可以（a）获得互斥锁，（b）修改，和（c）释放互斥锁，直到我们完成我们的，再次获得互斥`fSet`锁，我们才会知道这件事`sleep()`锁定，然后循环进行另一次检查。

*必须*有更好的方法。应该有一种方法可以释放互斥体*并*开始等待某种信号，告诉我们谓词可能发生了变化。同样重要的是，当我们收到该信号并返回我们的代码时，我们应该已经拥有授予我们检查谓词数据的访问权限的锁。这*正是*条件变量旨在提供的。

* * *

**作用中的条件变量**

输入条件变量 + 互斥锁对。互斥体保护对更改*或检查*谓词的访问，而条件变量建立了一个监视更改的系统，更重要的是，通过谓词互斥以*原子*方式（就您而言，无论如何）这样做：

```
int WaitForPredicate()
{
    // lock mutex (means:lock access to the predicate)
    pthread_mutex_lock(&mtx);

    // we can safely check this, since no one else should be 
    // changing it unless they have the mutex, which they don't
    // because we just locked it.
    while (!predicate)
    {
        // predicate not met, so begin waiting for notification
        // it has been changed *and* release access to change it
        // to anyone wanting to by unlatching the mutex, doing
        // both (start waiting and unlatching) atomically
        pthread_cond_wait(&cv,&mtx);

        // upon arriving here, the above returns with the mutex
        // latched (we own it). The predicate *may* be true, and
        // we'll be looping around to see if it is, but we can
        // safely do so because we own the mutex coming out of
        // the cv-wait call. 
    }

    // we still own the mutex here. further, we have assessed the 
    //  predicate is true (thus how we broke the loop).

    // take whatever action needed. 

    // You *must* release the mutex before we leave. Remember, we
    //  still own it even after the code above.
    pthread_mutex_unlock(&mtx);
} 
```

对于其他一些线程来发出上面的循环信号，有几种方法可以做到，下面两种最流行：

```
pthread_mutex_lock(&mtx);
TODO: change predicate state here as needed.
pthread_mutex_unlock(&mtx);
pthread_cond_signal(&cv); 
```

其他方式...

```
pthread_mutex_lock(&mtx);
TODO: change predicate state here as needed.
pthread_cond_signal(&cv);
pthread_mutex_unlock(&mtx); 
```

每个人都有不同的内在行为，我邀请您针对这些差异做一些功课，并确定哪个更适合特定情况。*前者以引入潜在*的无根据的唤醒为代价提供了更好的程序流程。后者减少了这些唤醒，但代价是上下文协同作用减少。*两种*方法都可以在我们的示例中使用，您可以试验每种方法如何影响您的等待循环。无论如何，最重要的一点是，*两种*方法都可以完成此任务：

**除非互斥锁被锁定，否则永远不要更改*或检查*谓词条件**。***曾经***。

* * *

**简单的监控线程**

这种类型的操作在作用于特定谓词条件的*监视器*线程中很常见，它（没有错误检查）通常看起来像这样：

```
void* monitor_proc(void *pv)
{
    // acquire mutex ownership
    //  (which means we own change-control to the predicate)
    pthread_mutex_lock(&mtx);

    // heading into monitor loop, we own the predicate mutex
    while (true)
    {
        // safe to check; we own the mutex
        while (!predicate)
            pthread_cond_wait(&cv, &mtx);

        // TODO: the cv has been signalled. our predicate data should include
        //  data to signal a break-state to exit this loop and finish the proc,
        //  as well as data that we may check for other processing.
    }

    // we still own the mutex. remember to release it on exit
    pthread_mutex_unlock(&mtx);
    return pv;
} 
```

* * *

**更复杂的监控线程**

修改这个基本表单以考虑*通知*系统，一旦您收到通知，就不需要您保持互斥锁锁定，这会涉及更多一点，但不是很多。下面是一个监视器过程，一旦我们确定我们已经被服务（可以这么说），它就不会在常规处理期间保持互斥锁锁定。

```
void* monitor_proc(void *pv)
{
    // acquire mutex ownership
    //  (which means we own change-control to the predicate)
    pthread_mutex_lock(&mtx);

    // heading into monitor loop, we own the predicate mutex
    while (true)
    {
        // check predicate
        while (!predicate)
            pthread_cond_wait(&cv, &mtx);

        // some state that is part of the predicate to 
        // inform us we're finished
        if (break-state)
            break;

        // TODO: perform latch-required work here.

        // unlatch the mutex to do our predicate-independant work.
        pthread_mutex_unlock(&mtx);

        // TODO: perform no-latch-required work here.

        // re-latch mutex prior to heading into wait
        pthread_mutex_lock(&mtx);            
    }

    // we still own the mutex. remember to release it on exit
    pthread_mutex_unlock(&mtx);
    return pv;
} 
```

有人会在哪里使用这样*的东西*？好吧，假设您的“谓词”是工作队列的“状态”以及一些告诉您停止循环并退出的标志。在收到“不同”的通知后，您检查是否应该继续执行循环，并决定是否应该继续，从队列中弹出一些数据。修改队列需要锁定互斥锁（记住，它的“状态”是我们谓词的一部分）。一旦我们弹出了我们的数据，我们就在本地拥有它并且可以*独立*于队列状态来处理它，所以我们释放互斥体，做我们的事情，然后需要互斥体进行下一次复飞。有很多方法可以对上述概念进行编码，包括明智地使用`pthread_cond_broadcast`等。

事实证明这比我希望的要长得多，但这是学习 pthread 编程的人的*主要*障碍，我觉得额外的时间/努力是值得的。我希望你能从中有所收获。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-02-17T18:33:53.313

当第一个线程调用[`pthread_cond_wait(&cond_t, &mutex);`](http://linux.die.net/man/3/pthread_cond_wait)它时，它会释放互斥锁并等待条件`cond_t`发出信号完成**并且** `mutex`可用。

因此，当[`pthread_cond_signal`](http://linux.die.net/man/3/pthread_cond_signal)在另一个线程中调用时，它不会“唤醒”等待中的线程。`mutex`必须先解锁，只有这样第一个线程才有机会获得锁，这意味着*“一旦[`pthread_cond_wait`](http://linux.die.net/man/3/pthread_cond_wait)互斥锁成功返回，就应该被锁定并归调用线程所有。”*

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-17T18:27:29.260

是的，它解锁，等待条件满足，然后等待它可以重新获取传递的互斥锁。

# c++ - 数组的最小值

> ID：14924470
> 
> 赞同：0
> 
> 时间：2013-02-17T18:25:54.083
> 
> 标签：c++, arrays, function, codeblocks, minimum

我正在尝试编写一个返回数组最小值的函数。到目前为止，我有这个，但它返回的只是 0。

我看不到它会如何返回 0，因为我正在使用 for 循环循环遍历数组。也许它没有像我想的那样循环遍历数组值。谁能详细说明这段代码中的逻辑和谬误？

```
#include <iostream>

using namespace std;

int newArray[9] = {4,5,9,3,6,2,1,7,8};

int minArray()
{
    int index = 1;
    int minimum;

    for (int i = 0; i < 9; i++)
    {
        if (newArray[i] > newArray[index])
        {
            minimum = newArray[index];
        }
        index++;

    }

    return minimum;
}

int main()    
{   
    cout << "original array:\n ";
    for (int i = 0; i < 9; i++)
    {
        cout << newArray[i] << ", ";
    }

    cout << "minimum value of array: ";
    cout << minArray();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T18:31:30.620

一个好主意可能是使用数组中的元素初始化最小值。所以：

```
minimum = newArray[0] 
```

在您的循环中（伪代码假设您不想要答案）：

```
if: newArray[pos] < minimum

        minimum = newArray[pos]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T18:31:46.667

该`minimum`变量最初应分配给数组中的一个值，然后将数组中的每个元素与`minimum`. 如果小于，则分配`minimum`该值：

```
int minArray()
{
    int minimum = newArray[0];
    int index = 0;

    for (int i = 0; i < 9; i++)
    {
        if (newArray[i] < minimum)
        {
            minimum = newArray[i];
        }
        index++;

    }
  return minimum;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T18:40:03.373

我会做这样的事情：

```
#include <iostream>

int minArray(int a[], int size) {
    if (size <= 0) return 0; //
    int m = a[0];
    for (int i = 1; i < size; ++i) {
       if (a[i] < m) m = a[i];
    }
    return m;
}

int main() {
    int a[] = { 4, 3, 6, 2 };
    std::cout << minArray(a, 4);
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T18:46:49.170

`minimum`您应该使用某个已知值或最大整数值进行初始化。

```
int minArray()
{
    int minimum = newArray[0];

    for (int i = 1; i < 9; i++)
    {
        if (minimum > newArray[i])
        {
            minimum = newArray[i];
        }
    }

    return minimum;
} 
```

而且你处理错了`index`（实际上你根本不需要它）。如何`index`代替`minimum`：

```
int minArray()
{
    int index = 0;

    for (int i = 1; i < 9; i++)
    {
        if (newArray[index] > newArray[i])
        {
            index = i;
        }
    }

    return newArray[index];
} 
```

这两个示例都应该可以正常工作，但我建议先使用。

# java - 使用按钮更改类视图

> ID：14924472
> 
> 赞同：0
> 
> 时间：2013-02-17T18:26:05.667
> 
> 标签：java, android

我试图通过按下按钮让程序从一个班级转到另一个班级。我知道这需要有意识地完成，但我不确定要使用什么动作来实现意图。另外，我宁愿不尝试使用 OnClickListener，因为在我看来这对于我需要做的事情来说有点过分了。虽然我可能是错的，我只是想多了。这是我的代码：

```
 public void loginScreen(View view) {
   // Should take user to the next view when button pressed
      Intent intent = new Intent(this, LoginActivity.class);
      Button login = (Button) findViewById(R.id.button1);
      intent.getData(login);
      startActivity(intent);
    } 
```

我希望它在仅按下按钮 1 时进入下一个屏幕，所以我不知道是否只有第 3 行和第 6 行是唯一需要的，但如果它只是那两行它将不起作用。我相信问题出在 getData，我不知道该放什么，但我知道 getData 错了。我可能还缺少其他东西，但我不知道是什么。

另外，如果这不容易理解，请原谅我，这是第一次尝试在这里提出问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T18:33:28.783

在没有明确设置 onClickListener 的情况下：

```
<button
    ...
    android:onClick="loginClicked" />

public void loginClicked(View v) {
    Intent intent = new Intent(this, LoginActivity.class);
    startActivity(intent);
} 
```

显式设置 onClickListener 也不是矫枉过正。

你的问题并不完全清楚，所以如果你需要更多，请告诉我，我会编辑我的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T18:34:30.417

在您的 XML 文件中，您可以声明您的点击：

```
<Button
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:onClick="loginScreen" /> 
```

然后在您的活动中：

```
public void loginScreen(View button) {
  Intent intent = new Intent(this, LoginActivity.class);
  startActivity(intent);
} 
```

这是[onClick 查看 API](http://developer.android.com/reference/android/view/View.html#attr_android%3aonClick)

> 单击视图时要在此视图的上下文中调用的方法的名称。此名称必须对应于只采用一个 View 类型参数的公共方法。例如，如果您指定 android:onClick="sayHello"，则必须声明您的上下文（通常是您的 Activity）的 public void sayHello(View v) 方法。

请注意，如果您将 onClick 添加到 Fragment 布局，它仍然需要在 Activity 中捕获。

# javascript - 谷歌地图：根据街道地址渲染地图

> ID：14924485
> 
> 赞同：1
> 
> 时间：2013-02-17T18:26:56.673
> 
> 标签：javascript, jquery, google-maps

我以为会很简单，猜不到。我的网站上有用户个人资料，每个个人资料都有一个街道地址（格式：1234 Some Street, City, State, Zip）。

我想根据该信息（不是经度和纬度......）在页面上添加一个小地图。

**有没有一个插件可以完成这个简单的任务？**阅读谷歌文档是一件令人头疼的事情，而且似乎使这个简单的任务比它需要的要困难得多。

**编辑：我想要那个 javascript 地图，而不是静态的**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T18:32:17.123

也许是这样的：

> [http://hpneo.github.com/gmaps/](http://hpneo.github.com/gmaps/)

它附带直观的示例，说明如何快速开始使用 Google Maps API。

一个例子：街景

> [http://hpneo.github.com/gmaps/examples/streetview.html](http://hpneo.github.com/gmaps/examples/streetview.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T18:29:26.230

[Geocoding API](https://developers.google.com/maps/documentation/javascript/geocoding)可能是您正在寻找的。

> 地理编码是将地址（如“1600 Amphitheatre Parkway, Mountain View, CA”）转换为地理坐标（如纬度 37.423021 和经度 -122.083739）的过程，您可以使用它来放置标记或定位地图。
> 
> ...
> 
> Google Maps API 提供了一个地理编码器类，用于根据用户输入动态进行地理编码和反向地理编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T18:30:08.397

是的，只需使用类似的东西：

```
<img align='top' border="1" src="http://maps.google.com/maps/api/staticmap?center=An        
reagan, Drummond Rd, Evanton, Dingwall, Ross-Shire IV16 9UT    
&maptype=roadmap&zoom=14&size=500x350&sensor=false&maptype=HYBRID&markers=color:blue|label:An Creagan, Drummond Rd, 
Evanton, Dingwall, Ross-Shire IV16 9UT|An Creagan, Drummond Rd, Evanton, Dingwall, Ross-Shire IV16 9UT" alt="A & A Cleaning Service"> 
```

# machine-learning - 图像分类的深度学习

> ID：14924486
> 
> 赞同：19
> 
> 时间：2013-02-17T18:26:58.913
> 
> 标签：machine-learning, neural-network, deep-learning, dbn

在阅读了几篇关于深度学习和深度信念网络的论文后，我对它的工作原理有了一个基本的了解。但仍然坚持最后一步，即分类步骤。我在 Internet 上找到的大多数实现都与生成有关。（MNIST 数字）

是否有一些解释（或代码）可以讨论使用 DBN 对图像（最好是自然图像或对象）进行分类？

此外，一些方向的指示会非常有帮助。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-01-16T19:52:11.337

**基本思想**

如今，用于图像分类问题的最先进的深度学习（例如[ImageNet](http://www.image-net.org/challenges/LSVRC/2013/)）通常是“深度卷积神经网络”（Deep ConvNets）。它们看起来大致类似于[Krizhevsky 等人](http://books.nips.cc/papers/files/nips25/NIPS2012_0534.pdf)的 ConvNet 配置： ![在此处输入图像描述](../Images/dd597d6e8745644e5e766614fa3aa9e1.png)

对于**推理（分类）**，您将图像输入左侧（注意左侧的深度为 3，对于 RGB），通过一系列卷积过滤器进行处理，然后在右手边。这张图片特别适用于 ImageNet，它专注于对 1000 个类别的图像进行分类，因此 1000d 向量是“这张图片适合该类别的可能性的分数”。

**训练**神经网络只是稍微复杂一些。对于训练，您基本上重复运行分类，并且每隔一段时间进行一次反向传播（参见 Andrew Ng 的讲座）以改进网络中的卷积过滤器。基本上，反向传播询问“网络正确/错误地分类了什么？对于错误分类的东西，让我们稍微修复一下网络。”

* * *

**执行**

**[Caffe](http://caffe.berkeleyvision.org/)**是深度卷积神经网络的一个非常快速的开源实现（比Krizhevsky 等人的[cuda-convnet更快）。](http://code.google.com/p/cuda-convnet/)Caffe 代码非常容易阅读；每种类型的网络层（例如卷积层、最大池化层等）基本上都有一个 C++ 文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-12T10:07:55.573

您应该在用于生成的网络之上使用 softmax 层 ( [http://en.wikipedia.org/wiki/Softmax_activation_function](http://en.wikipedia.org/wiki/Softmax_activation_function) )，并使用反向传播来微调最终网络。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-12T06:04:46.253

这些天人们开始在分类层中使用 SVM。

深度学习正在非常自由和广泛地发展。

# java - 尽管配额详细信息中出现呼叫，但 Google 应用程序引擎未发送邮件

> ID：14924488
> 
> 赞同：0
> 
> 时间：2013-02-17T18:27:08.843
> 
> 标签：java, google-app-engine

周末我一直在玩 Google App Engine 和 Google Web Toolkit，相处得很好，构建了一个简单的应用程序。

绊脚石似乎是发送电子邮件。我的代码是：

```
private void sendOffenderMail( OffenceDetails offence )
{
    if( offence.email == null || offence.email.equals("") )
    {
        return;
    }

    Properties props = new Properties();
    Session session = Session.getDefaultInstance(props, null);

    String msgBody = "You have been added to the list";

    if( offence.notes != null && !offence.notes.equals( "" ) )
    {
        msgBody += "\n\nThe following notes were included:\n\n" + offence.notes;
    }

    Message msg = new MimeMessage(session);

    try {

        msg.setFrom( new InternetAddress(<gmail account belonging to project viewer>, "List Admin") );
        msg.addRecipient(
                Message.RecipientType.TO,
                new InternetAddress (offence.email, offence.name )
                );
        msg.setSubject("You've been added to the list...");
        msg.setText(msgBody);
        Transport.send(msg);

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (MessagingException e) {
        e.printStackTrace();
    }
} 
```

当我在开发服务器上运行此日志时，会在控制台中打印出有关将要发送的邮件的日志。当我部署到应用程序引擎并尝试没有任何反应时，我没有收到任何邮件。

如果我查看配额详细信息，我可以在那里看到邮件 api 调用。如果我查看日志，则没有错误（但我看不到那里的日志......）。

似乎很奇怪，我基本上被收取了发送此邮件的费用（配额已用完），但实际上没有邮件通​​过。

顺便说一句，我检查了我的垃圾邮件文件夹。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T20:03:33.617

您使用的 gmail 帐户似乎是 Project Viewer。[文档声明](https://developers.google.com/appengine/docs/java/mail/overview#Sending_Mail)它应该是开发人员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T13:19:56.423

最后，我只使用了当前登录用户的电子邮件地址——它始终是管理员，因为如果您是管理员，您只能访问应用程序的这一部分。我无法使用属于其中一位管理员的硬连线地址使其工作。

# css - IE CSS 问题 - 没有合适的位置

> ID：14924489
> 
> 赞同：0
> 
> 时间：2013-02-17T18:27:28.290
> 
> 标签：css, html, background, positioning, fixed

我希望这个问题很容易解决，因为这个网站本来是一个简单的项目，结果却一团糟！我不确定这是否是我实现的代码的一个独特问题，或者它是否经常发生。

我使用 div 和 css 创建了一个网站，其中背景缩放到窗口的大小。在 Chrome、Firefox、Safari、IE9 等中完全按照我想要的方式工作。但是在 IE < 9 中它是完全不合理的！有人请帮忙，因为我真的很想避免从下到上编码。

[http://www.mwrenovationsllc.com](http://www.mwrenovationsllc.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T18:37:25.950

旧版本的 IE 对设置 DOCTYPE 非常挑剔。确保您的 HTML 结构具有以下布局：

```
<!DOCTYPE html>
<html>
    <head>
        // head contents here...
    </head>
    <body>
        // body contents here...
    </body>
</html> 
```

如果这不能正常工作，请尝试使用更具体的 DOCTYPE，例如：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

# php - 检查数组中是否存在多个值

> ID：14924492
> 
> 赞同：0
> 
> 时间：2013-02-17T18:27:39.333
> 
> 标签：php, arrays

我想检查数组返回中是否存在多个值（EX：，`5`）`110`为真。（不使用循环）

我不使用 from 循环，因为如果返回为真，我想加载一个页面

**作为：**

```
if(in_array('5' OR '110', array('5,4,2,66,12,110'))){
    echo 'true';//Load page
}else{
    echo 'false';
} 
```

如何？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T18:31:07.830

```
if(array_intersect(array('15', '110'), explode(',', '5,4,2,66,12,110'))){
    echo 'true';//Load a page
}else{
    echo 'false';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T18:48:48.510

如果您正在寻找一种快速的方法，请使用：

```
if ( preg_match ( '/(^|,)(5|110)(,|$)/','5,4,2,66,12,110' ) )
  return true;
else
  return false; 
```

**编辑**

```
if ( preg_match ( "/(^|,)(" . implode ('|', $needles ) . ")(,|$)/", implode (',', $haystack ) ) )
  return true;
else
  return false; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T18:30:54.857

```
$a=array(5,4,2,66,12,110);
if(in_array('5',$a) OR in_array('10',$a )){
    echo 'true';//Load page
}else{
    echo 'false';
} 
```

# mongodb - mongodb count 每个字段/键的不同值的数量

> ID：14924495
> 
> 赞同：137
> 
> 时间：2013-02-17T18:27:46.900
> 
> 标签：mongodb, mongodb-query, aggregation-framework

是否有一个查询来计算一个字段在 DB 中包含多少不同的值。

我有一个国家字段，有 8 种国家值（西班牙、英国、法国等）

如果有人添加更多带有新国家/地区的文档，我希望查询返回 9。

有没有比分组和计数更简单的方法？

* * *

## 回答 #1

> 赞同：252
> 
> 时间：2013-02-18T02:43:04.980

MongoDB 有一个[`distinct`命令](http://docs.mongodb.org/manual/reference/command/distinct/)，它返回一个字段的不同值的数组；您可以检查数组的长度以进行计数。

还有一个 shell[`db.collection.distinct()`](https://docs.mongodb.com/manual/reference/method/db.collection.distinct/)助手：

```
> db.countries.distinct('country');
[ "Spain", "England", "France", "Australia" ]

> db.countries.distinct('country').length
4 
```

如 MongoDB 文档中所述：

> 结果不得大于最大 BSON 大小 (16MB)。如果您的结果超过最大 BSON 大小，请使用聚合管道使用`$group`运算符检索不同的值，如使用聚合管道检索不同的值中[所述](https://docs.mongodb.com/manual/reference/operator/aggregation/group/#std-label-aggregation-group-distinct-values)。

* * *

## 回答 #2

> 赞同：140
> 
> 时间：2015-10-29T15:37:24.257

这是使用聚合 API 的示例。为了使情况复杂化，我们从文档的数组属性中按不区分大小写的单词进行分组。

```
db.articles.aggregate([
    {
        $match: {
            keywords: { $not: {$size: 0} }
        }
    },
    { $unwind: "$keywords" },
    {
        $group: {
            _id: {$toLower: '$keywords'},
            count: { $sum: 1 }
        }
    },
    {
        $match: {
            count: { $gte: 2 }
        }
    },
    { $sort : { count : -1} },
    { $limit : 100 }
]); 
```

给出结果，例如

```
{ "_id" : "inflammation", "count" : 765 }
{ "_id" : "obesity", "count" : 641 }
{ "_id" : "epidemiology", "count" : 617 }
{ "_id" : "cancer", "count" : 604 }
{ "_id" : "breast cancer", "count" : 596 }
{ "_id" : "apoptosis", "count" : 570 }
{ "_id" : "children", "count" : 487 }
{ "_id" : "depression", "count" : 474 }
{ "_id" : "hiv", "count" : 468 }
{ "_id" : "prognosis", "count" : 428 } 
```

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2018-02-08T22:37:09.973

使用 MongoDb 3.4.4 和更高版本，您可以利用**[`$arrayToObject`](https://docs.mongodb.com/manual/reference/operator/aggregation/arrayToObject/)**运算符和**[`$replaceRoot`](https://docs.mongodb.com/manual/reference/operator/aggregation/replaceRoot/)**管道来获取计数。

例如，假设您有一组具有不同角色的用户，并且您想要计算角色的不同计数。您需要运行以下聚合管道：

```
db.users.aggregate([
    { "$group": {
        "_id": { "$toLower": "$role" },
        "count": { "$sum": 1 }
    } },
    { "$group": {
        "_id": null,
        "counts": {
            "$push": { "k": "$_id", "v": "$count" }
        }
    } },
    { "$replaceRoot": {
        "newRoot": { "$arrayToObject": "$counts" }
    } }    
]) 
```

**示例输出**

```
{
    "user" : 67,
    "superuser" : 5,
    "admin" : 4,
    "moderator" : 12
} 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2015-05-13T13:03:24.017

您可以利用[Mongo Shell Extensions](https://github.com/gabrielelana/mongodb-shell-extensions#Collection-distinctAndCount)。这是一个单一的 .js 导入`$HOME/.mongorc.js`，如果你也在 Node.js/io.js 中编码，你可以附加到你的 .js 或以编程方式。

**样本**

对于每个不同的字段值，计算文档中的出现次数（可选地通过查询过滤）

> >`db.users.distinctAndCount('name', {name: /^a/i})`

```
{
  "Abagail": 1,
  "Abbey": 3,
  "Abbie": 1,
  ...
} 
```

field 参数可以是一个字段数组

> >`db.users.distinctAndCount(['name','job'], {name: /^a/i})`

```
{
  "Austin,Educator" : 1,
  "Aurelia,Educator" : 1,
  "Augustine,Carpenter" : 1,
  ...
} 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2018-02-23T05:45:00.467

`field_1`要在集合中找到不同的，但我们也需要一些`WHERE`条件，而不是像下面这样：

`db.your_collection_name.distinct('field_1', {WHERE condition here and it should return a document})`

因此，找到与`names`年龄 > 25 的集合不同的数字：

`db.your_collection_name.distinct('names', {'age': {"$gt": 25}})`

希望能帮助到你！

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2020-10-25T12:58:12.593

我使用这个查询：

```
var collection = "countries"; var field = "country"; 
db[collection].distinct(field).forEach(function(value){print(field + ", " + value + ": " + db[collection].count({[field]: value}))}) 
```

输出：

```
countries, England: 3536
countries, France: 238
countries, Australia: 1044
countries, Spain: 16 
```

此查询首先区分所有值，然后计算每个值的出现次数。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2021-02-15T19:54:38.217

[我想要一个更简洁的答案，我使用聚合和组](https://docs.mongodb.com/manual/reference/operator/aggregation/group/#retrieve-distinct-values)中的文档想出了以下内容

`db.countries.aggregate([{"$group": {"_id": "$country", "count":{"$sum": 1}}}])`

# python - Python (2.6) ftplib 没有连接到站点，但是 FTP 从 IE Explorer 工作

> ID：14924496
> 
> 赞同：0
> 
> 时间：2013-02-17T18:27:52.547
> 
> 标签：python, ftp, ftplib

我不确定我是否对 FTP 有误解，或者我试图通过 FTP 访问的站点是否有什么有趣的地方。

当我尝试时：

```
import ftplib
HOST = 'www.site.org'
USER = <user name>
PASSWD = <password>
FTPConn = ftplib.FTP(HOST,USER,PASSWD) 
```

结果是：

```
error:[Errno 10060] A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host failed to respond properly 
```

接下来我尝试直接从命令窗口使用 ftp，但同样无法建立连接。

但是，当我使用 IE 浏览器并在地址栏中键入时：

```
ftp://USER:PASSWD@HOST 
```

我能够通过 IE 资源管理器下载文件。

通过 ftplib 进行 FTP 传输时，我是否做错了什么，或者我试图从中进行 FTP 传输的站点是否存在某种安全问题/功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T18:41:50.277

IE 很可能被配置为使用 FTP 代理，`ftplib`但不是。

# ios - 不能从函数调用参数

> ID：14924504
> 
> 赞同：-4
> 
> 时间：2013-02-17T18:28:50.600
> 
> 标签：ios, cocoa-touch

当我调用函数时，我的应用程序具有构建字段。
它显示 Mach-O 链接器错误。
我在哪里犯了错误？

```
-(void)viewDidAppear:(BOOL)animated
 {
    ScrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 44, self.view.frame.size.width, self.view.frame.size.height-88)];
    ScrollView.pagingEnabled = YES;

    ScrollView.contentSize = CGSizeMake(self.view.frame.size.width*13, self.view.frame.size.height-88);
    [self.view addSubview:ScrollView];

    arrImages = [NSArray arrayWithObjects:@"image-001", @"image-002", nil];

    LoadImage:(1);
}

-(void)LoadImage:(int *)index;
{
    ImageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height-88)];

    [ImageView setImage:[arrImages objectAtIndex:index]];
    [ScrollView addSubview:ImageView];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T18:30:50.770

该行：

```
LoadImage:(1); 
```

应该：

```
[self LoadImage:1]; 
```

此外，您的`LoadImage:`方法应该采用 type 的参数`int`，而不是`int *`.

这些是一些非常基本的错误。我建议你花点时间学习一下 Objective-C 的基础知识。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T18:30:21.707

```
LoadImage:(1);  // <--- error

[self LoadImage:1]; // <--- like that 
```

编辑：正如@Till 指出的那样，也将您的声明更改为采用int：

在标题 (.h) 中：

```
-(void)LoadImage:(int)index; 
```

在实施中（.m）：

```
-(void)LoadImage:(int)index { //<--- lose that semi-colon
...
} 
```

所有这些修复都应该可以解决问题

# r - 如何将我的数据子集为间隔

> ID：14924505
> 
> 赞同：1
> 
> 时间：2013-02-17T18:28:55.993
> 
> 标签：r, dataframe

我是新手`R`，我正在努力让我的脚本更有效率。我有一个`data.frame`观察 `25480`和`17`变量。

我的变量之一是`Subject`每个科目都有其编号。但是，每个受试者的观察次数 ( `lines`) 并不相等。我想根据他们的号码将我的`subjects`分成。`groups`我该怎么做？

在我使用这个公式之前：

```
gaze <- subset(gaze, Subject != "261" & Subject != "270" & Subject != "275") 
```

但是现在我有太多的主题，每次都重复主题。是否可以定义主题的间隔 to`cut`或 to `split`。我试过这个命令，但它似乎不起作用：

```
gazeS <- (gaze$Subject[112:216])
cut(gaze, seq(gaze, from = 112, to = 116)) 
```

你能帮我修复这个代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T20:52:41.527

由于因子变量没有排序方法（即使它们显示为数字），您需要首先转换任何排序操作才能工作，并且 R-FAQ 说要使用：

```
as.numeric(as.character(fac)) 
```

所以：

```
subset(gaze, !as.numeric(as.character(Subject)) in 260:280) 
```

或者：

```
subset(gaze, !( as.numeric(as.character(Subject)) >= 260 &
            as.numeric(as.character(Subject)) <= 280)  ) 
```

或者：

```
subset( gaze, !Subject %in% as.character(260:280) ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T18:33:04.947

如果我正确理解您的需求，您可以使用类似

```
gaze$Subject <- as.integer(as.charachter(gaze$Subject))
gaze <- subset(gaze, Subject >= 261 & Subject <= 280) 
```

将 id 转换为字符很重要，否则可能会发生有趣的事情，因为因子级别是按字母顺序而不是数字顺序排列的。然而，避免这种情况的最好办法是在读取数据时直接设置列类（例如，使用`colClasses`参数 of `read.table`）。

# youtube-api - YouTube JavaScript API：使用“未启动”状态

> ID：14924506
> 
> 赞同：2
> 
> 时间：2013-02-17T18:29:06.673
> 
> 标签：youtube-api, youtube-javascript-api

来自播放器文档：“当播放器首次加载视频时，它将广播一个未启动 (-1) 事件。”

这个事件的预期用途是什么？也就是说，与状态不存在时相比，我的主机代码看到它的结果会有何不同？我看到的示例代码除了记录它什么都不做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T21:27:05.137

我不认为它很有用。我不认为你错过了一些更深层次的真相。我认为它反映了一种主要由玩家本身在内部使用的状态，并且为了完整性而在 API 中公开了它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-27T14:30:01.937

可能是检测是否启用自动播放的好方法。即“未启动”会发生在不支持自动播放但尝试过的平台上，但“正在播放”将是其他系统的事件。

# xcode - Xcode：将全新框架链接到全新应用程序失败并显示“找不到图像”

> ID：14924513
> 
> 赞同：4
> 
> 时间：2013-02-17T18:29:32.960
> 
> 标签：xcode, frameworks, dyld

我对 Xcode 和 Objective-C 完全陌生，但在其他方面我是经验丰富的（网络）程序员。我想创建一个包含自制框架的应用程序。

现在我已经阅读了相当多的内容，我想我已经合理地掌握了 OS X 如何在运行时解决依赖关系，以及@rpath、@executable_path 和@loader_path 的作用。

我做了以下创建框架：

1.  创建名为 Test 的新 Cocoa 框架。
2.  将安装目录设置为“@rpath”。
3.  将“Test.h”添加到公共标头。
4.  点击运行。
5.  右键单击“产品”下的 Test.framework，选择在 Finder 中显示。它是项目“Debug”目录中一个名为“Test.framework”的目录。它似乎有合理的内容（Versions/A 目录和指向“Headers”、“Resources”和“Test”二进制文件的符号链接）

我执行以下操作来创建应用程序：

1.  创建名为“TestApp”的新 Cocoa 应用程序。
2.  将测试框架添加到项目中。选择“将文件添加到项目”。从Test框架项目的“Release”目录中选择“Test.framework”目录。选中“将项目复制到目标组的文件夹”离开“为​​任何添加的文件夹创建组”。在。
3.  确保将框架文件复制到应用程序包。选择“添加构建阶段”->“添加复制文件”将 Test.framework 文件夹（或组？）从侧边栏中拖到复制文件区域。
4.  添加一个名为“@executable_path/../Frameworks”的额外“框架搜索路径”

当我选择运行时，我在构建过程中收到以下警告：

> 构建目标TestApp
> 
> ld /Users/meryn/Library/Developer/Xcode/DerivedData/TestApp-ajwvknoonliuqqfaqxacxrmapyfz/Build/Products/Debug/TestApp.app/Contents/MacOS/TestApp normal x86_64 cd /Users/meryn/Work/test-app/TestApp setenv MACOSX_DEPLOYMENT_TARGET 10.8 /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch x86_64 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10 .8.sdk -L/Users/meryn/Library/Developer/Xcode/DerivedData/TestApp-ajwvknoonliuqqfaqxacxrmapyfz/Build/Products/Debug -F/Users/meryn/Library/Developer/Xcode/DerivedData/TestApp-ajwvknoonliuqqfaqxacxrmapyfz/Build/Products /Debug -F/Users/meryn/Work/test-app/TestApp "-F@executable_path/../Frameworks"-filelist /Users/meryn/Library/Developer/Xcode/DerivedData/TestApp-ajwvknoonliuqqfaqxacxrmapyfz/Build/Intermediates/TestApp.build/Debug/TestApp.build/Objects-normal/x86_64/TestApp.LinkFileList -mmacosx-version-min=10.8 -fobjc-arc -fobjc-link-runtime -framework Cocoa -framework Test -o /Users/meryn/Library/Developer/Xcode/DerivedData/TestApp-ajwvknoonliuqqfaqxacxrmapyfz/Build/Products/Debug/TestApp.app/Contents/MacOS/TestApp
> 
> ld：警告：找不到选项“-F@executable_path/../Frameworks”的目录

我可以想象这个警告是意料之中的，因为 Ld 可能根本不知道“@executable_path”。它是否正确？

随后，运行应用程序失败并显示：

> dyld：库未加载：@rpath/Test.framework/Versions/A/Test 引用自：/Users/meryn/Library/Developer/Xcode/DerivedData/TestApp-ajwvknoonliuqqfaqxacxrmapyfz/Build/Products/Debug/TestApp.app/Contents/ MacOS/TestApp 原因：找不到图像

奇怪的是，TestApp.app 包确实包含一个 Frameworks 目录，其中包含 Test.framework 目录。鉴于我对 OS X 如何搜索依赖项的了解，我认为我添加的搜索路径应该可以很好地解决。

这是在 XCode 4.6、OS X 10.8 上。

`otool -L TestApp`给

> 测试应用：
> 
> /System/Library/Frameworks/Cocoa.framework/Versions/A/Cocoa（兼容版本1.0.0，当前版本19.0.0）
> 
> @rpath/Test.framework/Versions/A/Test（兼容版本 1.0.0，当前版本 1.0.0）
> 
> /System/Library/Frameworks/Foundation.framework/Versions/C/Foundation（兼容版本300.0.0，当前版本945.11.0）
> 
> /usr/lib/libobjc.A.dylib（兼容版本 1.0.0，当前版本 228.0.0）
> 
> /usr/lib/libSystem.B.dylib（兼容版本 1.0.0，当前版本 169.3.0）
> 
> /System/Library/Frameworks/AppKit.framework/Versions/C/AppKit（兼容版本45.0.0，当前版本1187.33.0）

可以在这里看到“@rpath”未扩展吗？

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-27T07:32:43.960

由于库标识符设置为`@rpath`前缀路径，链接到库的应用程序需要指定一个或多个`-rpath`选项，指示在运行时搜索库时`dyld`应该用什么替换变量。如果您将框架复制`@rpath`到. 您可以在您的 TestApp 目标上使用 Xcode 中的 ('Runpath Search Paths') 配置设置来设置参数的值。`@loader_path/../Frameworks``TestApp.app/Contents/Frameworks``-rpath``LD_RUNPATH_SEARCH_PATHS`

> 我可以想象这个警告是意料之中的，因为 Ld 可能根本不知道“@executable_path”。它是否正确？

添加`@executable_path/../Frameworks`到 Xcode 的框架搜索路径是没有用的。框架搜索路径是静态链接器 ( `ld`) 的构建时概念，而`@executable_path`变量是动态链接器 ( `dyld`) 的运行时概念。

# jquery - 如果没有类为 in 的子菜单，则在第一个子菜单中添加一个类

> ID：14924521
> 
> 赞同：1
> 
> 时间：2013-02-17T18:30:25.297
> 
> 标签：jquery

如果没有`submenu`类，则此方法有效`in`，但在另一个页面上有一个带有类的子菜单，`in`此脚本仍然运行。

```
$(".nav-submenu").not(".in").eq(0).addClass("in"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T18:34:04.267

```
if(!$(".nav-submenu.in").length)
  $(".nav-submenu").eq(0).addClass("in"); 
```

# cocoa - Applescript 无法打开应用程序

> ID：14924523
> 
> 赞同：2
> 
> 时间：2013-02-17T18:30:27.650
> 
> 标签：cocoa, applescript

我编写了一个（还）不可编写脚本的 Mac 应用程序，我想用 Applescript 运行它。以下任一脚本都会出现“发生类型 10660 的错误。”。经过数小时的搜索，我没有找到解决方案，也没有找到对错误的解释。

```
if exists application "RotorDCU" then
    display dialog "Found." buttons {"OK"}
else
    display dialog "Not found." buttons {"OK"}
end if

tell application "RotorDCU"
    activate
end tell 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T20:18:17.200

错误 -10660 是启动服务错误，在接口文件中进行了说明`LSInfo.h`：

> 该应用程序在垃圾箱文件夹中时无法运行

是`RotorDCU`在垃圾箱里吗？

# google-app-engine - 谷歌应用引擎/谷歌应用域收费

> ID：14924524
> 
> 赞同：1
> 
> 时间：2013-02-17T18:30:28.107
> 
> 标签：google-app-engine, google-apps

我已经设法将我的新 Google App Engine 应用程序托管在我的域上。为此，我必须注册一个“免费”的谷歌应用程序帐户。

谷歌应用程序帐户要钱，我有 30 天的免费试用期。30 天试用期结束后，Google App Engine 使用的我的域名会停止工作吗？

我是否必须每月支付 5 美元或其他费用才能将我的谷歌应用引擎应用程序托管在域上？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T21:41:44.323

您不必付费。

您可以获得免费的单用户 Google Apps 帐户。[请参阅https://developers.google.com/appengine/docs/domain?hl=en](https://developers.google.com/appengine/docs/domain?hl=en)上的“在自定义域上为您的应用提供服务”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T18:35:57.217

是的，

> 要在自定义域上提供您的应用程序，您必须首先将该域与 Google Apps 帐户相关联。

来自 [https://developers.google.com/appengine/docs/domain](https://developers.google.com/appengine/docs/domain)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T19:58:09.163

是的，您确实需要一个 Google Apps 帐户，不，您不需要为此付费。

当您注册一个新的 AppEngine 帐户时，您应该选择创建一个新的应用程序帐户，在那里您将获得一个包含一个用户的应用程序帐户。这将是免费的。看到这个：[http ://www.labnol.org/internet/google-apps-free/26926/](http://www.labnol.org/internet/google-apps-free/26926/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T18:42:09.233

不，您可以使用 cname 进入您的应用引擎域（www.example.com --> example.appspot.com）但是，这不适用于裸域，例如 example.com 您的提供商（大多数提供商）可以将您的所有域流量重定向到您的 app_id。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-26T15:13:52.543

到目前为止，您似乎必须注册一个企业帐户并获得为期 1 年的 50 美元信用额度，之后谷歌将有更好的解决方案。

看到这个线程的同情不满。 [https://groups.google.com/forum/#!msg/google-appengine/pVZfdeky-ow/TO1SmipM2Y0J](https://groups.google.com/forum/#!msg/google-appengine/pVZfdeky-ow/TO1SmipM2Y0J)

（希望 Google 支持人员告诉我，*在*我删除我已经拥有的企业帐户之前...）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-25T15:45:33.867

我知道这是一个老问题，但标记的答案不再正确。谷歌正在推动所有想要自定义域的人为企业帐户付费。

但是有一种**解决方法**：

1.  转到 AppEngine -> 应用程序设置 -> 添加域 -> 注册 Google Apps
2.  开始 30 天免费试用 - 不要添加计费选项
3.  设置您的域
4.  将域添加到您的应用引擎项目
5.  30 天试用期到期后，该域仍可**使用**。

# spring - 尝试在 jsp 中显示图像（blob 对象）时出错（使用 Oracle 数据库的 Spring 和 Hibernate）

> ID：14924527
> 
> 赞同：5
> 
> 时间：2013-02-17T18:30:44.470
> 
> 标签：spring, hibernate, blob

这个问题与 oracle 10g 数据库有关。相同的代码适用于 MySQL 数据库。

我的模特班

```
package com.killerlinks.model;

    import java.io.Serializable;
    import java.sql.Blob;

    import javax.persistence.Column;
    import javax.persistence.Entity;
    import javax.persistence.GeneratedValue;
    import javax.persistence.GenerationType;
    import javax.persistence.Id;
    import javax.persistence.Lob;
    import javax.persistence.Table;

    @Entity
    @Table(name="links")
    public class Linkform implements Serializable
    {
        /**
         * 
         */
        private static final long serialVersionUID = 1L;
        @Id
        @GeneratedValue(strategy=GenerationType.AUTO)
        @Column(name="id")
        private Long id;
        @Column(name="tittle")
        private String tittle;
        @Column(name="xdesc")
        private String desc;
        @Column(name="url")
        private String url;
        @Column(name="category")
        private String category;
        @Column(name="xdate")
        private String date;
        @Column(name="xtime")
        private String time;
        @Column(name="tags")
        private String tags;

        @Column(name="image")
        @Lob
        private Blob fileData;

        public Long getId() {
            return id;
        }
        public void setId(Long id) {
            this.id = id;
        }
        public String getTittle() {
            return tittle;
        }
        public void setTittle(String tittle) {
            this.tittle = tittle;
        }
        public String getDesc() {
            return desc;
        }
        public void setDesc(String desc) {
            this.desc = desc;
        }
        public String getUrl() {
            return url;
        }
        public void setUrl(String url) {
            this.url = url;
        }
        public String getCategory() {
            return category;
        }
        public void setCategory(String category) {
            this.category = category;
        }
        public String getDate() {
            return date;
        }
        public void setDate(String date) {
            this.date = date;
        }
        public String getTime() {
            return time;
        }
        public void setTime(String time) {
            this.time = time;
        }
        public String getTags() {
            return tags;
        }
        public void setTags(String tags) {
            this.tags = tags;
        }

        @Override
        public String toString()
        { 
            return "Linkform [tittle=" + tittle + ", url=" + url + ", category="+ category +", tags="+ tags +", desc="+ desc +", fileData="+fileData+" ]";
        }
        public Blob getFileData() {
            return fileData;
        }
        public void setFileData(Blob fileData) {
            this.fileData = fileData;
        }
    } 
```

这个方法来自我的控制器类，它有助于将 blob 对象保存到模型类。

```
private Linkform preparingModelBean(LinkformBean linkformbean, MultipartFile file)
    {
        Linkform linkform = new Linkform();
        linkform.setTittle(linkformbean.getTittle());
        linkform.setUrl(linkformbean.getUrl());
        linkform.setCategory(linkformbean.getCategory());
        linkform.setDesc(linkformbean.getDesc());
        linkform.setTags(linkformbean.getTags());

        Date date = new Date();
        SimpleDateFormat sdate = new SimpleDateFormat("yyyy.MM.dd");
        SimpleDateFormat stime = new SimpleDateFormat("HH:mm");

        linkform.setDate(sdate.format(date));
        linkform.setTime(stime.format(date));

        try {
            Blob blob = Hibernate.createBlob(file.getInputStream());

            linkform.setFileData(blob);

        } catch (IOException e) {
            e.printStackTrace();
        }

        return linkform;
    } 
```

这是控制器类的另一种方法，我正在尝试读取 blob 对象

```
@RequestMapping(value ="/image/{id}")
    public String image(@PathVariable("id")Long id, HttpServletResponse response)
    {
        Linkform linkform = linkformservice.getALink(id);

        try {
            response.setHeader("Content-Disposition", "inline;filename=\"" +linkform.getTittle()+ "\"");
            OutputStream out = response.getOutputStream();
            response.setContentType("image/jpeg");
            IOUtils.copy(linkform.getFileData().getBinaryStream(), out);
            out.flush();
            out.close();

        } catch (IOException e) {
            e.printStackTrace();
        } catch (SQLException e) {
            e.printStackTrace();
        }
        return null;
    } 
```

当我试图调用特定图像时，这是我得到的输出

![错误信息我得到](../Images/a6b420e1c7762bc16b9083122c26cca4.png)

当我从浏览器触发 url`http://localhost:7070/KillerLinks/image/381.htm`

这是我的控制台中显示的错误

```
java.sql.SQLException: Closed Connection
    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:112)
    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:146)
    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:208)
    at oracle.sql.BLOB.getDBAccess(BLOB.java:955)
    at oracle.sql.BLOB.getBinaryStream(BLOB.java:229)
    at org.hibernate.lob.SerializableBlob.getBinaryStream(SerializableBlob.java:39)
    at com.killerlinks.controllers.CategoryController.image(CategoryController.java:63)
    at sun.reflect.GeneratedMethodAccessor36.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.doInvokeMethod(HandlerMethodInvoker.java:710)
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:167)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:414)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:402)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:771)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:716)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:647)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:552)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.__invoke(StandardContextValve.java:123)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.__invoke(StandardHostValve.java:171)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:931)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:619)
java.sql.SQLException: Closed Connection
    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:112)
    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:146)
    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:208)
    at oracle.sql.BLOB.getDBAccess(BLOB.java:955)
    at oracle.sql.BLOB.getBinaryStream(BLOB.java:229)
    at org.hibernate.lob.SerializableBlob.getBinaryStream(SerializableBlob.java:39)
    at com.killerlinks.controllers.CategoryController.image(CategoryController.java:77)
    at sun.reflect.GeneratedMethodAccessor36.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.doInvokeMethod(HandlerMethodInvoker.java:710)
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:167)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:414)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:402)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:771)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:716)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:647)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:552)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.__invoke(StandardContextValve.java:123)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.__invoke(StandardHostValve.java:171)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:931)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:619)
Hibernate: select linkform0_.id as id1_0_, linkform0_.category as category1_0_, linkform0_.xdate as xdate1_0_, linkform0_.xdesc as xdesc1_0_, linkform0_.image as image1_0_, linkform0_.tags as tags1_0_, linkform0_.xtime as xtime1_0_, linkform0_.tittle as tittle1_0_, linkform0_.url as url1_0_, linkform0_.xviews as xviews1_0_ from links linkform0_ where linkform0_.id=? 
```

请帮我修复错误。我想显示图像。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T05:18:51.727

尝试这个

```
 @RequestMapping(value ="/image/{id}")
public void image(@PathVariable("id")Long id, HttpServletResponse response)
{
    Linkform linkform = linkformservice.getALink(id);
    InputStream image = null;
    image = linkform.getFileData().getBinaryStream();

    try {
        OutputStream out = response.getOutputStream();
        response.setContentType("image/jpeg");

        int length = (int) image.available();
        int bufferSize = 1024;
        byte[] buffer = new byte[bufferSize];
        while ((length = image.read(buffer)) != -1) {
            out.write(buffer, 0, length);
        }
           response.flushBuffer();
        //image.close();
        out.flush();
        out.close();

    } catch (IOException e) {
        e.printStackTrace();
    } catch (SQLException e) {
        e.printStackTrace();
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T09:54:23.237

是否有任何其他代码调用**linkform.getFileData()**？如果没有，您介意修改您的代码，如下所示。实体类：

```
@Column(name="image")
@Lob
private Byte[] fileData;

public Byte[] getFileData() {
    return fileData;
}
public void setFileData(Byte[] fileData) {
     this.fileData = fileData;
} 
```

并根据新的**getFileData()**更改您的控制器。

我不能保证这个解决方案一定能解决你的问题，但值得一试。我这么说的原因是异常跟踪告诉您代码在打开数据库连接以加载 Blob 数据时失败。根据java doc，**Interface Blob**实际上是一个指向底层SQL Blob的逻辑指针，而不是保存真实数据。由于控制器不在休眠会话中，它可能无法打开另一个到 DB 的连接来检索 Blob 值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T21:41:50.960

我认为您的控制器应如下所示：

```
@RequestMapping(value ="/image/{id}")
    public void image(@PathVariable("id")Long id, HttpServletResponse response)
    {
        Linkform linkform = linkformservice.getALink(id);

        try {
            response.setContentType("application/x-download");
            response.setHeader("Content-Disposition", "attachment; filename=" + filename);

            OutputStream out = response.getOutputStream();
            response.setContentType("image/jpeg");
            IOUtils.copy(linkform.getFileData().getBinaryStream(), out);
            out.flush();
            out.close();

        } catch (IOException e) {
            e.printStackTrace();
        } catch (SQLException e) {
            e.printStackTrace();
        }
    } 
```

它会将您的文件发送到直接下载。

此外，您可以将图像文件添加到 html 页面

```
<img src="/image/5"></img> 
```

# javascript - 点击后 data-* 不更新

> ID：14924538
> 
> 赞同：3
> 
> 时间：2013-02-17T18:31:24.000
> 
> 标签：javascript, jquery

我正在尝试更新`data-coords`（第 11 行），但是当我这样做时，代码运行但`data-coords`不更新。为什么？它看起来对我有效，我错过了什么吗？

```
$(document).on('click', '.next-prev-js', function (e) {
    var item = e.target;
    if($(item).is("img") && tagging){
        var offset = $(item).offset();
        var imgid = $(item).attr("data-image-id");
        var obi = $("#blackout-image").offset();
        x = (e.clientX - offset.left);
        y = (e.clientY - offset.top);
        addTag(e.clientX - obi.left - 55, e.clientY - 55);
        saveCoords(x, y, imgid);
        $(item).attr("data-coords", x+","+y);
        tagging = false;
        $(".tag-self").text("Tag yourself");
        $("#blackout-image img").css({cursor: "pointer"});
        $("#blackout-image .face").delay(3000).fadeOut("fast");
        return false;
    }
    var action = $(item).attr("data-action");
    nextPrevImage(action);
    return false;
}); 
```

这是 HTML 部分（这是在 php echo 语句中）：

```
<a class='thumb-photo' href=''>
    <img class='thumb-img' data-coords='$x,$y' data-id='$id' data-image-id='$imid' data-file='$f' src='/user-data/images/image.php?id=$id&file=$f&height=240&width=240' width='240' height='240' />
</a> 
```

**演示**

（此过程中不要刷新页面）

如果单击其中一个图像，它将在查看器中打开。

*   在左侧将鼠标悬停在“他在哪里”上，一个正方形将显示数据坐标的位置（来自缩略图）
*   接下来单击“标记自己”，然后单击图像中的位置。
*   按“esc”或单击透明区域关闭查看器
*   再次单击图像，将鼠标悬停在“他在哪里”上，坐标仍然是旧坐标，但在单击新位置后它们应该已更新

[http://wows.phpsnips.com/profile.php?id=1&tab=photos](http://wows.phpsnips.com/profile.php?id=1&tab=photos)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T18:33:09.957

您应该使用[数据](http://api.jquery.com/data/)方法。

```
 $(item).data({coords: x+","+y}); 
```

或者

```
 $(item).data("coords", x+","+y); 
```

在 jsfiddle 中工作。

您可以通过以下方式查看数据属性：

```
 console.log($(item).data()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T18:57:21.387

属性的工作方式`data-`是在页面加载时将值复制到 jQuery 数据对象中。之后他们就不再真正联系了。因此，如果您更改属性，对象**将不会**自动更新。反过来也一样。

我做了一个快速测试来演示这种行为：

**jQuery：**

```
var $d = $('div');
alert('Load: Attribute "a" gets copied to data object.\rData Attribute: ' + $d.attr('data-test') + '\rData Object: ' + $d.data('test'));

$d.attr('data-test','b');
alert('Changed attribute to "b". Attribute changed, object still "a".\rData Attribute: ' + $d.attr('data-test') + '\rData Object: ' + $d.data('test'));

$d.data('test','c');
alert('Changed data object to "c". Object changed, attribute still "b".\rData Attribute: ' + $d.attr('data-test') + '\rData Object: ' + $d.data('test')); 
```

**演示：http:**
[//jsfiddle.net/F5qkq/](http://jsfiddle.net/F5qkq/)

因此，在您的情况下，您只需更改 data 属性，`attr`但内部数据对象保持不变，因为它们不再连接。

data-attribute 仅真正用于使用起始值初始化数据对象。但在那之后，如前所述，您应该只使用 jQuery 的`data`函数来更改内部数据对象。

# android - 使用 OpenCV 和 Android NDK 未找到库（但在另一个活动中找到）

> ID：14924540
> 
> 赞同：1
> 
> 时间：2013-02-17T18:31:30.577
> 
> 标签：android, eclipse, opencv, android-ndk, unsatisfiedlinkerror

我已经浏览了无数资源（包括但不限于[OpenCV4Android 的 Google 小组](https://groups.google.com/forum/#!msg/android-opencv/LIixgr-iYSs/cEZWqxp5O3QJ)、StackOverflow 和[OpenCV 的答案](http://answers.opencv.org/question/2658/static-initialization-problem/)页面试图解决这个问题，达到了建议变得多余的地步。这个问题可能或多或少类似于以前的（尚未解决）我的[问题](https://stackoverflow.com/questions/14588578/opencv-using-android-ndk-could-not-be-resolved-error)，但情况不同，因此可能是不同的错误来源。

我已将 Android Activity 添加到包含成功运行的应用程序的包中（OpenCV 的教程 3 示例演示了 ndk 的使用）。该活动使用 OpenCV 的 java API，但调用`System.loadLibrary("nativefile");`where`nativefile`表示本地库。`loadLibrary`下面提到了调用的块；它在`onManagerConnected()`方法中。在这一`loadLibrary`行，Logcat 发出：

```
02-17 19:27:39.239: E/AndroidRuntime(10872): FATAL EXCEPTION: main
02-17 19:27:39.239: E/AndroidRuntime(10872): java.lang.UnsatisfiedLinkError: Library nativefile not found
02-17 19:27:39.239: E/AndroidRuntime(10872):    at java.lang.Runtime.loadLibrary(Runtime.java:461)
02-17 19:27:39.239: E/AndroidRuntime(10872):    at java.lang.System.loadLibrary(System.java:557) 
```

这种错误确实在其他问题中多次出现；我已经尝试了我遇到的建议。但是，对这个问题有一个值得注意的观察；成功运行的应用程序（OpenCV 示例）通过`System.loadLibrary("nativefile");`.

代码相当长，因此对问题没有帮助。但是，下面总结了我认为与该问题有关的关键要素，它还总结了与该问题相关的一些先前的答案。

*   调用的 .cpp 文件具有正确的方法名称，我在其中验证它是否包含包名称和类名称以及方法名称，其模式类似于：`Java_packageNameSeperatedWithUnderScores_callingClassName_methodName`. 此外；代码被包围在一个`extern "C"`块中，与其他用于本地开发的 OpenCV 示例 cpp 文件一样。
*   更新 Android 清单以了解它启动了相关活动。
*   下面是`Android.mk`文件：

    `LOCAL_PATH := $(call my-dir) include $(CLEAR_VARS)
    include ../../sdk/native/jni/OpenCV.mk LOCAL_MODULE := nativefile
    LOCAL_SRC_FILES := nativefile.cpp
    LOCAL_LDLIBS += -llog -ldl
    include $(BUILD_SHARED_LIBRARY)`

*   下面是`Application.mk`文件

    `APP_STL := gnustl_static
    APP_CPPFLAGS := -frtti -fexceptions
    APP_ABI := all`

*   我试过用 替换`all`并`APP_ABI`再次`armeabi`尝试用`armeabi-v7a`，但是没有不同的结果。

*   [正如评论中所建议的](https://stackoverflow.com/questions/13385265/ndk-library-not-found)，我还验证了 apk（在提取后）在各种架构类型文件夹下的`.so`文件夹中包含所需的文件。`lib`
*   下面是`BaseLoaderCallBack`实例化块，与 OpenCV 示例中的块没有太大不同，但是我不调用 OpenCV 相机，因为该应用程序对从 SD 卡读取的图像执行图像处理。

    ```
     BaseLoaderCallback loader = new BaseLoaderCallback(this){
     public void onManagerConnected(int status){  
        switch(status){     
            case LoaderCallbackInterface.SUCCESS:{ 
                 System.loadLibrary("nativefile"); break; }  
            default:{  
                 super.onManagerConnected(status); break; }  
        } } }; 
    ```

*   然而，与 OpenCV 的示例不同，在有问题的 Activity 中，该行`loader.onManagerConnected(LoaderCallbackInterface.SUCCESS);`被添加到`onCreate()`方法中，因为该方法`onManagerConnected`似乎没有被调用。

*   在每个 OpenCV 语句块之前，都会`if (OpenCVLoader.initDebug())`检查条件。我也尝试了[推荐](http://docs.opencv.org/trunk/android/service/doc/JavaHelper.html) `OpenCVLoader.initAsync(OpenCVLoader.OPENCV_VERSION_2_4_3, this, loader)`的条件检查，但仍然没有不同的结果。
*   此外，ndk-build 运行成功`.so`，为本机库构建文件`nativefile`。

鉴于在同一个包中的其他活动，加载库并很好地利用它（当然在相应地修改清单文件和 cpp 方法名称之后），我认为项目属性是正确的（例如添加 OpenCV 库和必要的环境路径等）。

我多次查看了 OpenCV 示例，并遵循了相同的做法，但略有不同，如上所述。

有什么想法可能是问题的根源吗？

感谢您的时间。

# r - 为残差建立线性模型时R可变长度不同

> ID：14924541
> 
> 赞同：1
> 
> 时间：2013-02-17T18:31:32.010
> 
> 标签：r, linear-regression, lm

我正在解决一个问题，我想使用其他两个线性模型的残差来构建线性模型。我使用 UN3 数据集来显示我的问题，因为它比使用我的实际数据集更容易将问题放在这里。

这是我的 R 代码：

```
head(UN3)
m1.lgFert.purban <- lm(log(Fertility) ~ Purban, data=UN3)
m2.lgPPgdp.purban <- lm(log(PPgdp) ~ Purban,  data=UN3)
m3 <- lm(residuals(m1.lgFert.purban) ~ residuals(m2.lgPPgdp.purban)) 
```

这是我得到的错误：

```
> m3 <- lm(residuals(m1.lgFert.purban) ~ residuals(m2.lgPPgdp.purban))
Error in model.frame.default(formula = residuals(m1.lgFert.purban) ~ residuals(m2.lgPPgdp.purban),  : 
  variable lengths differ (found for 'residuals(m2.lgPPgdp.purban)') 
```

我真的不明白为什么会发生这个错误。如果是与日志相关的问题，那么我在构建前两个模型时应该会收到错误消息。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T18:40:22.753

`na.action`很可能是您的默认设置`na.omit`（用 勾选`options("na.action")`）。这意味着`NA`值会被无声地删除，从而导致残差向量的长度不同。您可能想要使用，它用s`na.action="na.exclude"`填充残差。`NA`

```
library(alr3)
options("na.action")
#$na.action
#[1] "na.omit"

m1.lgFert.purban <- lm(log(Fertility) ~ Purban, data=UN3,na.action="na.exclude")
m2.lgPPgdp.purban <- lm(log(PPgdp) ~ Purban,  data=UN3,na.action="na.exclude")

m3 <- lm(residuals(m1.lgFert.purban) ~ residuals(m2.lgPPgdp.purban))
#Coefficients:
#                 (Intercept)  residuals(m2.lgPPgdp.purban)  
#                    -0.01245                      -0.18127 
```

# javascript - 如何通过在 JavaScript 中调用函数来使用 onclick 更改 div 的颜色？

> ID：14924543
> 
> 赞同：3
> 
> 时间：2013-02-17T18:31:38.820
> 
> 标签：javascript

如果我将`this.style.background="#000";`inline 放在 div 中，例如`onclick="this.style.background="#000";`，它可以工作。但是，如果我将它放在一个函数中并从同一个 onclick 事件中调用该函数，它就不起作用。但是，如果我让该函数执行其他操作（例如显示警告框），它确实可以工作。这是怎么回事？

这是代码：

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript" src="jquery.js"></script>
<style>
.tile {
    width: 48px;
    height: 48px;
    margin: 0px;
    padding: 0px;
    float: left;
    background-color:red;
    border: 1px solid black;
}
</style>
</head>

<body>
<div class="tile" onclick="myFunction()"></div>

<script>
function myFunction() {
    this.style.background="#000000";
}
</script>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T18:54:39.817

我注意到你包括 jQuery。您应该强烈考虑[将您的标记和 JavaScript 分开](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)。如果您确实走那条路，那将是这样的：

```
<html>
<head>
<script type="text/javascript" src="jquery.js"></script>
<style>
.tile {
    width: 48px;
    height: 48px;
    margin: 0px;
    padding: 0px;
    float: left;
    background-color:red;
    border: 1px solid black;
}
</style>
</head>

<body>
<div class="tile"></div>

<script>
$(function () {
    $(".tile").click(function () {
        $(this).css('background-color', '#000000');
    });
});
</script>

</body>

</html> 
```

**示例：http:** [//jsfiddle.net/6zAN7/9/](http://jsfiddle.net/6zAN7/9/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T18:40:13.347

如果您想这样做，则需要在调用函数时传递 DIV 元素的引用。在执行 onclick 处理程序期间，“this”将引用当前元素。将其作为参数传递！

这是更正后的代码：

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript" src="jquery.js"></script>
<style>
.tile {
width: 48px;
height: 48px;
margin: 0px;
padding: 0px;
float: left;
background-color:red;
border: 1px solid black;
}
</style>
</head>

<body>
<div class="tile" onclick="myFunction(this)"></div>

<script>
function myFunction(divObj) {
    divObj.style.background="#000000";
}
</script>

</body>

</html> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-17T18:39:37.837

```
<div class="tile" onclick="myFunction(this)"></div>

<script>
function myFunction(x) {
    x.style.background="#000000";
}
</script> 
```

# javascript - HTML5样板js结构

> ID：14924548
> 
> 赞同：4
> 
> 时间：2013-02-17T18:31:53.953
> 
> 标签：javascript, html, html5boilerplate

我想知道是否有人可以检查我对 HTML5Boilerplate js 目录的预期用途的理解。我知道 main.js 是我应该放置我创作的所有站点特定 javascript 的地方。Plugins.js 是我放置所有使用的 jQuery 插件的地方。main.js 和 plugins.js 都将在构建过程中连接和缩小。Vendor.js 拥有 JavaScript 库。该目录将被缩小（除非它已经被缩小）但不会被连接。

如果这是真的，那么我的问题是应该将具有模块化结构的可爱滑块放在哪里？我想我希望它被缩小和连接，所以它不应该进入供应商目录。我不相信我可以在不破坏它的模块化结构的情况下将 Cuteslider 的 javascript 添加到 main.js 或 plugins.js。我应该创建一个新目录，并将其称为应用程序之类的名称，以保存可爱滑块代码，然后修改构建代码以缩小和连接它吗？

这是cuteslider的代码结构片段

```
cute
    cute.2d.module.js
    cute.canvas.module.js
    cute.css3d.module.js
    cute.gallery.plugin.js
    cute.slider.js
    cute.transitions.all.js 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:16:28.810

首先，您必须将 cuteslider 视为插件。

在 plugins.js 中添加使插件工作所需的文件（*cute.slider.js*、*cute.transitions.all.js*和*respond.min.js*）。

然后添加js以将滑块加载到*main.js*中的页面中

```
$(document).ready(function() {
        // code here to load cuteslider
}); 
```

模块化外观只能在*main.js*文件中设置。

# php - 自定义 Drupal 7 模块未出现在配置中

> ID：14924549
> 
> 赞同：0
> 
> 时间：2013-02-17T18:32:02.127
> 
> 标签：php, drupal

我一直在使用[本](http://drupal.org/node/361112)指南开发 Drupal 7 模块。

我希望这个模块简单地将它们显示给管理员，然后管理员可以从那里更改和接受它们。我可以让我的模块出现在模块部分，但是当我启用它时，我构建的表单和菜单项不在它们应该在的位置。配置部分没有菜单项，因此我无法导航到我制作的表单。这是我的.module：

```
/**
* Implements hook_help.
*
* Displays help and module information.
*
* @param path
*   Which path of the site we're using to display help
* @param arg
*   Array that holds the current path as returned from arg() function
*/
function moderate_submissions_help($path, $arg) {
  switch ($path) {
    case "admin/help#moderate_submissions":
      return '<p>' . "Allows admins to moderate new pending submissions." . '</p>';
      break;
  }
} 

/**
* Implements hook_menu().
*/

function moderate_submissions_menu() {
    $items = array();
    $items['admin/config/content/moderate_submissions'] = array(
        'title' => 'Moderate Submissions',
        'description' => 'Go through submissions.',
        'page callback' => 'drupal_get_form',
        'access arguments' => array('access administration pages'),
        'type' => MENU_NORMAL_ITEM,
    );
}

/**
* Page callback: Settings
*
* @see moderate_submissions_menu()
*/

function moderate_submissions_form($form, &$form_state) {
    $form['moderate_submissions_max'] = array(
        '#type' => 'textfield',
        '#title' => t('Maximum number of posts'),
        '#size' => 2,
        '#maxlength' => 2,
        '#description' => t('The maximum number of links to display in the block.'),
        '#required' => TRUE,
    );

    return system_settings_form($form);
} 
```

还有我的 .info：

```
name = Moderate Submissions
description = Moderate pending goal submissions.
core = 7.x
configure  = admin/config/content/moderate_submissions 
```

这可能是我在尝试使教程适应我正在构建的内容时忽略的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T19:23:13.103

`moderate_submisisons_menu()`需要返回`$items`。

# c++ - boost locale - 转换数字的基本用法？

> ID：14924554
> 
> 赞同：1
> 
> 时间：2013-02-17T18:32:39.480
> 
> 标签：c++, visual-studio-2010, localization, boost-locale

好吧，这很“奇怪”，但我似乎无法使用 boost::locale （在 microsoft visual studio 2010 下）将数值转换为字符串并提高词法转换。

```
int main() {

    boost::locale::generator gen;
    std::locale::global(std::locale(gen("de_DE")));
    std::cout << boost::lexical_cast<double>("1,253") << std::endl;
    return 0;
} 
```

在德语语言环境中，“，”符号应用作十进制标识符。所以上面应该是“1.253”。但是它不起作用（lexical_cast 给出了一个例外） - 使用`std::locale::global(std::locale("German_Germany.1252"));`确实有效 - 但是我希望使用便携式系统而不是将自己“限制”到微软的命名/代码页。

我将如何使用 boost::locale，或者使用比 std::locale 更便携的本地化？

# java - 资源关闭异常

> ID：14924555
> 
> 赞同：1
> 
> 时间：2013-02-17T18:32:40.643
> 
> 标签：java, hibernate

当我尝试将多个 Android 设备连接到网络服务器时，我收到此“org.hibernate.ResourceClosedException：此 TransactionCoordinator 已关闭”。我在以下代码中遇到异常

```
public static List<Ride> getRides(){

session = HibernateUtil.getSessionFactory().getCurrentSession();
session.beginTransaction();
@SuppressWarnings("unchecked")
List<Ride> rides=session.createCriteria(Ride.class).list(); //Excpetion
session.getTransaction().commit();
return rides;
} 
```

谁能给我任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:04:52.410

Hibernate Session 不是线程安全的。在网络服务器环境中，它不能用于静态方法，也不能有静态变量。（Web 服务器访问在不同的线程中处理。）

# security - 使用服务器端 php 对 javascript 调用进行身份验证

> ID：14924556
> 
> 赞同：0
> 
> 时间：2013-02-17T18:32:57.410
> 
> 标签：security, symfony, angularjs

我在一个项目中使用 Symfony2 后端和 AngularJS 前端。Symfony 用于显示初始视图并提供 RESTful API，其中 AngularJS 嵌入到视图中。

基本上 AngularJS 将用于前端（视图）并调用 Symfony API 与数据库（模型）进行交互。

我有一堆 Angular http 获取和帖子，它们将 URL 公开给我的 API。在我的场景中保护 API 的最佳方法是什么？

我确实可以使用 Angular 访问服务器端，但是如何将该身份验证从 Symfony 传递给 Angular？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T19:12:13.060

这是一个常见的需求，有几种方法 - 但他们通常选择使用会话。

您可能会发现这篇文章很好地概述了特定于 AngularJS 的实现......

[http://www.espeo.pl/2012/02/26/authentication-in-angularjs-application](http://www.espeo.pl/2012/02/26/authentication-in-angularjs-application)

# ruby - ruby 中 rspec 测试的实现问题

> ID：14924557
> 
> 赞同：2
> 
> 时间：2013-02-17T18:32:58.180
> 
> 标签：ruby, block

我在 ruby​​ 中有这个测试我正在尝试实现 require "silly_blocks"

```
describe "some silly block functions" do

  describe "reverser" do
    it "reverses the string returned by the default block" do
      result = reverser do
        "hello"
      end
      result.should == "olleh"
    end

    it "reverses each word in the string returned by the default block" do
      result = reverser do
        "hello dolly"
      end
      result.should == "olleh yllod"
    end
  end 
```

这是方法

```
def do_reverse(str)
 str = str.split 
 first_str = str[0].reverse
 second_str= str[1]
 if (second_str == nil)
  str = first_str.to_s
 else
 second_str = str[1].reverse
 str = (first_str +" "+ second_str)
 end 
end 
```

我可以实现它的最佳方式是什么。当我尝试进行测试时它失败了，但是该方法本身会返回储备。我只是有点困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-12T07:56:13.777

试试这个代码：

```
def reverser

   yield.split.map { |word| word.reverse}.join(" ")

end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T18:41:57.293

这是一个简单的方法来做你正在寻找的东西，有规格。

```
# lib/reverse_words.rb
def reverse_words(phrase)
  return '' if phrase.nil?
  words = phrase.split
  phrase.split.map(&:reverse!).join(' ')
end

def reverser
  reverse_words(yield)
end

# spec/reverse_words_spec.rb
describe "#reverse_words" do
  context "when single word" do
    subject { reverse_words("hello") }
    it { should == "olleh" }
  end

  context "when multiple words" do
    subject { reverse_words("hello dolly") }
    it { should == "olleh yllod" }
  end

  context "when nil" do
    subject { reverse_words(nil) }
    it { should == '' }
  end

  context "when empty" do
    subject { reverse_words('') }
    it { should == '' }
  end

end 
```

请注意，`reverser`规范只是利用了`reverse_words`已经指定通过的行为。

```
describe "#reverser" do
  subject do
    reverser do
      "this is a test"
    end
  end
  it { should == reverse_words("this is a test") }
end 
```

这是一个不那么冗长的 reverse_words 规范：

```
describe "#reverse_words (less wordy)" do
  # counterintuitive keys as answers to support the nil case
  cases = { "olleh" => "hello",
      "olleh yllod" => "hello dolly",
      ''            => nil,
      ''            => ''
    }

  cases.each_pair do |expected, input| 
    context "#{input} should equal #{expected}" do
      subject { reverse_words(input) }
      it { should == expected }
    end
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-17T17:43:34.897

所以。我也来这里寻找有关如何执行此操作的信息。因为语言不清楚。我去异地查看，找到了足够的信息来通过测试。

因此，块是花括号之间的东西，有时跟随 ruby​​ 中的函数，例如

```
list.each {|i| i.reverse} 
```

所以规范正在做的是试图弄清楚当它发生时会发生什么：

```
rerverser {"hello"} 
```

将 yield 放在函数中只会返回块中的任何内容，所以

```
def print_block
    puts yield
end

print_block {"Hello world."}

#=> "Hello world" 
```

然后你可以像操纵任何参数一样操纵产量。块还有很多。[这是一个很好的起点](http://blog.codahale.com/2005/11/24/a-ruby-howto-writing-a-method-that-uses-code-blocks/)，但如果您到目前为止已经解决了所有 Test First 的 learn_ruby 练习，那么您就需要知道这些知识来解决该练习。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-29T03:14:27.237

这行得通。您想要的数据存储在“yield”中。

```
def reverser
  yield.gsub(/\w+/) { |w| w.each_char.to_a.reverse.join }
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-15T09:27:48.923

我的逆向方法：

```
def reverser
    # yield is the string given in the block
    words = yield.split(' ')
    final = []
    words.each do |word|
        final.push(word.reverse)
    end
    final.join(' ')
end 
```

# ember.js - Ember 使用查询初始化路由模型

> ID：14924558
> 
> 赞同：3
> 
> 时间：2013-02-17T18:33:01.567
> 
> 标签：ember.js

我正在尝试使用 DS 查询初始化 Route 的模型，如下所示

```
App.Router.map(function() {
    this.resource('post', { path: '/posts/:post_slug' });
});

App.PostsRoute = Ember.Route.extend({
    model: function(params) {
        var records = App.Post.find({ slug: params.post_slug });
        return records.get('firstObject');
    }
}); 
```

在这里，我通过它的 slug 找到一个 Post 并将第一个结果设置为路由模型。但由于`records`是异步填充的，模型数据设置不正确。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-17T21:53:45.073

使用延迟模式解决了这个问题。

```
App.PostsRoute = Ember.Route.extend({
    model: function(params) {
        var records = App.Post.find({ slug: params.post_slug });
        var promise = Ember.Deferred.create();
        records.addObserver('isLoaded', function() {
            promise.resolve(records.get('firstObject'));
        });
        return promise;
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T18:41:33.903

那应该做到这一点：

```
App.Router.map(function() {
  this.resource('posts');
  this.resource('post', { path: '/posts/:post_id' });
});

App.PostsRoute = Ember.Route.extend({
  model: function() {
    return App.Post.find();
  }
});

App.PostRoute = Ember.Route.extend({
  model: function(params) {
    return App.Post.find(params.post_id);
  }
}); 
```

# css - 如何使水平导航栏居中

> ID：14924566
> 
> 赞同：0
> 
> 时间：2013-02-17T18:33:28.017
> 
> 标签：css, navigation, centering, menubar

我很难将导航按钮集中在我的网站上。我已经搜索并尝试了不同的选项，但没有发现任何成功。这是我的代码的样子。PS - 我的代码来自一个优雅的主题模板。

```
#menu {
    margin: 0 auto;
    display: inline-block;
    list-style: none;
    padding: 0;
    border-top: 3px solid #f7f7f7;
    overflow: hidden;
}

#menu #main-menu {
    float: none !important!;
    width: auto;
    margin-left: auto;
    margin-right: auto;
}

#menu .nav li {
    float: left;
    border-right: 1px dashed #dcdcdc;
    width: auto;
    margin-left: auto;
    margin-right: auto;
}

#menu .nav a, ul#mobile_menu a {
    font-size: 12px;
    color: #c6c6c6;
    text-decoration: none;
    text-transform: uppercase;
    display: block;
    height: 44px;
    overflow: hidden;
    -webkit-transition: background-color 0.2s ease-in;
    -moz-transition: background-color 0.2s ease-in;
    -o-transition: background-color 0.2s ease-in;
    transition: background-color 0.2s ease-in;
}

#menu .nav a > span {
    padding: 12px 14px 11px;
}

#menu .nav ul li a > span {
    padding: 0;
}

#menu .nav ul li {
    border: none;
}

#menu .nav ul a, ul#mobile_menu a {
    padding: 14px 5px 14px 25px;
    height: auto;
    overflow: visible;
    width: 195px;
}

#menu .nav ul a:hover, ul#mobile_menu a:hover {
    background: #4b93ad;
    text-decoration: none;
}

span.menu_slide {
    color: #fff;
    background: #549eb9;
}

ul#mobile_menu a {
    display: block;
    padding-left: 5px;
    padding-right: 5px;
    width: auto;
}

#menu .nav > li.current_page_item > a:hover {
    background: none;
    color: #c6c6c6;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T18:52:41.440

尝试`#menu {margin: 0 auto;}`

或者

```
#menu {
float: left;
text-align: center;
}

#menu ul {
display: inline-block;
} 
```

如果您提供链接，我可以为您查看。

# php - 在 PHP/MySQL 中使用 LAST_INSERT_ID() 和另一个表中的行进行两次插入

> ID：14924569
> 
> 赞同：1
> 
> 时间：2013-02-17T18:33:50.197
> 
> 标签：php, mysql, select, insert, lastinsertid

我正在使用 PHP 和 MySQL (V5.1) 制作一个活动日历，管理员将在其中添加一个活动，然后也会为该活动创建一个出席列表。我有三个表：事件、出席和成员。到目前为止，我可以使用通过 PHP 表单输入的信息来创建事件。我正在尝试通过从刚刚创建的事件中插入事件 ID 以及从成员表中拉入成员列表（使用他们的成员 ID）来更新出席表。但是，没有任何内容可以添加到出席表中。有人可以让我知道我应该做些什么不同的事情吗？

我在表格中使用的一些字段：
事件：event_ID（主键，自动递增）、姓名、位置、日期
出勤：出勤_ID（主键，自动递增）、event_ID、member_ID、出席
成员：member_ID（主键，自动增量），名称，电子邮件

```
enter code here 
```

这是代码：

```
mysql_query("SET AUTOCOMMIT=0");
mysql_query("START TRANSACTION");

$query1 = mysql_query("INSERT INTO events (name , location , date) VALUES ('".mysql_real_escape_string($name)."' , '".mysql_real_escape_string($location)."' , '".mysql_real_escape_string($date)."')");

$query2 = mysql_query("INSERT INTO attendance (event_ID , member_ID) SELECT LAST_INSERT_ID(), members.member_ID FROM members");

if ($query1 and $query2) { 
mysql_query("COMMIT");
} else {
mysql_query("ROLLBACK"); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T18:40:20.673

你可以使用[mysql_insert_id()](http://www.php.net/manual/en/function.mysql-insert-id.php)

```
$query1 = mysql_query("INSERT INTO events (name , location , date) VALUES ('".mysql_real_escape_string($name)."' , '".mysql_real_escape_string($location)."' , '".mysql_real_escape_string($date)."')");

$insert_id = mysql_insert_id() ;

$query2 = mysql_query("INSERT INTO attendance (event_ID , member_ID) SELECT {$insert_id}, members.member_ID FROM members") ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T18:41:19.523

几个重要的点。首先，如果您获得了最后一个插入 ID，您应该首先执行 LOCK 和 UNLOCK 查询：

*   锁定表`events`写入；
*   解锁桌子

其次，您可以使用 mysqli_insert_id() 方法获取最后插入的 ID。这意味着您在插入的表中必须有一个 AUTO_INCREMENT 字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T18:42:25.023

放入`VALUES`以`$query2`形成正确的 SQL 语句：

```
$query2 = mysql_query("INSERT INTO attendance (event_ID , member_ID) **VALUES (**SELECT LAST_INSERT_ID(), members.member_ID FROM members"); 
```

# polygon - 从多边形制作顺时针多边形

> ID：14924571
> 
> 赞同：1
> 
> 时间：2013-02-17T18:33:54.167
> 
> 标签：polygon

我知道如何确定多边形是否为顺时针方向（计算面积并与 0 进行比较。如果面积 > 0 则多边形为顺时针方向）。如果多边形不是顺时针，那么如何将其转换为顺时针多边形？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T18:36:08.073

只是顶点的逆序。如果您使用顶点 v1、v2、...、vN 铺设多边形并且它不是顺时针方向，那么多边形 vN、...、v2、v1 将是顺时针方向。

# perl - 我想格式化我的 perl 输出

> ID：14924572
> 
> 赞同：-5
> 
> 时间：2013-02-17T18:33:54.477
> 
> 标签：perl

我得到以下输出：

```
"I"=> ["Isoleucine","Ile",["ATT,ATC,ATA"]];
"L"=> ["Leucine","Leu",["TTA,TTG,CTT,CTC,CTA,CTG"]];
"K"=> ["Lysine","Lys",["AAA,AAG"]]; 
```

当我使用代码时

```
foreach(@genetic_codes){
  chomp;
  my @genetic_codes = split(':',$_);
  if(@genetic_codes != 5){
    # error on this line
    next;
  }
  my $group = join(',',split(/,\s*/,$genetic_codes[4]));
  print "$genetic_codes[2]=> [$genetic_codes[0],$genetic_codes[1],[$group]];\n";
} 
```

我怎样才能摆脱我的钥匙周围的双引号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T19:46:12.397

我会忘记`split`，并使用正则表达式来查找不是冒号或引号的所有子字符串。这将自动修剪引号。

这个程序会做你想做的事。它使用您上一个问题中的数据。

```
use strict;
use warnings;

print "my %amino_acids = (\n";

while (<DATA>) {
  my @data = /[^:"]+/g;
  my @codons = $data[4] =~ /[A-Z]+/g;
  printf qq{  %s => ["%s", "%s", [%s]],\n},
      @data[2,0,1],
      join ', ', map qq{"$_"}, @codons;
}

print ")\n";

__DATA__
"Methionine":"Met":"M":"AUG":"ATG"
"Phenylalanine":"Phe":"F":"UUU, UUC":"TTT, TTC"
"Proline":"Pro":"P":"CCU, CCC, CCA, CCG":"CCT, CCC, CCA, CCG" 
```

**输出**

```
my %amino_acids = (
  M => ["Methionine", "Met", ["ATG"]],
  F => ["Phenylalanine", "Phe", ["TTT", "TTC"]],
  P => ["Proline", "Pro", ["CCT", "CCC", "CCA", "CCG"]],
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T19:07:15.377

双引号似乎是它们各自字符串的一部分。这表明您的解析可能被破坏。您作为代码示例提供的循环也没有多大意义（重新定义您在循环内循环的变量，即使这应该是无害的，也是不好的风格）。

看来你愿意

```
my @genetic_codes = /(?:\A|(?<=:)) "([^"]*)" (?=:|\z)/xg; # not tested
...; 
```

或者

```
my @genetic_codes = split /:/;
s/^"//, s/"$// for @genetic_codes;
...; 
```

或类似的东西。

第一种可能性将您替换`split`为大致等效的正则表达式应用程序`/g`并列出上下文。

第二种解决方案可能更可取，它会从`@genetic_codes`. 此解决方案可能更灵活且不易出错。

提示：您可以只做而不是拆分/加入

```
(my $group = $genetic_codes[4]) =~ s/(?<=,)\s+//g; # remove whitespace after every comma 
```

# java - 在 Mountain Lion 上的 Eclipse Indigo 中启用 JDK 7

> ID：14924576
> 
> 赞同：13
> 
> 时间：2013-02-17T18:34:37.080
> 
> 标签：java, eclipse, scala, java-7

我正在使用 Eclipse (Indigo SR2) 开发一个 Scala 项目。今天我将我的机器更新为 Mountain Lion，因为我们需要 JDK 7 的一些功能。安装 JDK 7 工作正常：

```
$ java -version
java version "1.7.0_13"
Java(TM) SE Runtime Environment (build 1.7.0_13-b20)
Java HotSpot(TM) 64-Bit Server VM (build 23.7-b01, mixed mode) 
```

在 Eclipse 中，我更改了以下设置：

*   Java => 编译器 => 已安装的 JRE：使用路径添加 JDK1.7.0`/Library/Java/JavaVirtualMachines/jdk1.7.0_13.jdk/Contents/Home`
*   Java => 编译器 => 已安装的 JRE => 执行环境：将 JavaSE-1.7 设置为`JDK1.7.0`
*   Java => 编译器：合规级别：1.7
*   Scala => 编译器：目标 = jvm-1.7

然后我重新启动 Eclipse 并尝试运行脚本。但是，我总是得到错误：

```
value getPlatformMXBean is not a member of object java.lang.management.ManagementFactory 
```

所述方法仅在 Java 1.7 中可用，并且 Eclipse 似乎没有找到它，尽管命令单击它会显示类中的功能`ManagementFactory`。关于 Eclipse => 配置显示它仍在使用 JDK 6 ( `java.runtime.version=1.6.0_37-b06-434-11M3909`)，但我需要 JDK 7。

所以我尝试了以下方法（如 StackOverflow 和其他网站上所述）：

*   添加`-vm /Library/Java/JavaVirtualMachines/jdk1.7.0_13.jdk/Contents/Home/bin/java`到eclipse.ini文件（根据[eclipse网站](http://wiki.eclipse.org/Eclipse.ini#Specifying_the_JVM)仔细检查路径，文件中的正确位置，并在中间添加换行符）
*   将相同的内容添加到 Info.plist
*   `$ /Applications/eclipse/Eclipse.app/Contents/MacOS/eclipse -vm /Library/Java/JavaVirtualMachines/jdk1.7.0_13.jdk/Contents/Home/`
*   创建从 1.6 到 1.7 的符号链接

但运气不好，Eclipse 一直只从 JDK-6 开始。奇怪的是，我可以将 JRE 显式更改`Run=>Run Configurations`为 JDK7，它会以这种方式运行。但我不想为每个可运行文件更改它。

有什么进一步的建议吗？

* * *

感谢 EECOLOR 的提示，我能够在 JDK7 运行良好的 Eclipse Juno 中使用 Scala 插件。但是，现在我遇到了似乎是依赖问题。我得到的异常可以在这里看到：[https ://gist.github.com/anonymous/ac0f3a3655419e5149fa](https://gist.github.com/anonymous/ac0f3a3655419e5149fa)

奇怪的是，当我从命令行使用简单的`java -cp JARFILE com.AND-SO-ON.file`. 为了构建源代码和获取依赖项，我们使用 SBT。

我的 Eclipse.ini 如下所示（Xmx 除外的默认设置）：

```
-startup
../../../plugins/org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar
--launcher.library
../../../plugins/org.eclipse.equinox.launcher.cocoa.macosx.x86_64_1.1.200.v20120522-1813
-product
org.eclipse.epp.package.java.product
--launcher.defaultAction
openFile
-showsplash
org.eclipse.platform
--launcher.XXMaxPermSize
256m
--launcher.defaultAction
openFile
-vmargs
-Dosgi.requiredJavaVersion=1.5
-Dhelp.lucene.tokenizer=standard
-XstartOnFirstThread
-Dorg.eclipse.swt.internal.carbon.smallFonts
-XX:MaxPermSize=256m
-Xms40m
-Xmx1060m
-Xdock:icon=../Resources/Eclipse.icns
-XstartOnFirstThread
-Dorg.eclipse.swt.internal.carbon.smallFonts 
```

相同的项目（即*实际上*是相同的项目，而不仅仅是相同的代码）在 Eclipse Indigo 中运行没有依赖性问题。编辑：刚刚发现，这个异常是由 JDK7 引起的，而不是使用的 Eclipse 版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T19:54:57.933

我正在使用支持 Juno 的预览版就好了：[http ://scala-ide.org/download/milestone.html#scala_ide_21_milestone_3](http://scala-ide.org/download/milestone.html#scala_ide_21_milestone_3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T10:21:01.937

与此同时，我设法解决了这些问题。

**第一次尝试：**

*   更新到最新的 JDK（目前为 1.7.0u15）
*   再次从 Github 克隆代码
*   安装 Eclipse*靛蓝*
    *   重新安装 Eclipse 解决了 JDK6 的问题，现在它只是从 JDK7 开始，没有任何进一步的配置
*   安装 Scala 插件
*   使用创建一个新的 Eclipse 项目`sbt eclipse`
*   导入创建的项目

糟糕，不起作用！我仍然得到这个例外：

```
value getPlatformMXBean is not a member of object java.lang.management.ManagementFactory 
```

...这很奇怪，因为 Eclipse 现在*真的*可以使用 JDK7 运行。没有深入挖掘，我只是试了一下 Eclipse Juno。

**第二次尝试：**

*   做和上面一样
*   安装 Eclipse *Juno*而不是 Indigo
*   是的，它有效！:)

**结论：**

所以我不知道为什么，但 Eclipse Indigo 不知何故不喜欢`getPlatformMXBean`. 这似乎不是 JDK 的问题，而是 Eclipse 本身的问题。

# actionscript-3 - eventDispatcher 从一个子类到另一个类

> ID：14924579
> 
> 赞同：0
> 
> 时间：2013-02-17T18:35:01.700
> 
> 标签：actionscript-3, air, adobe, dispatchevent

我已经为以下问题苦苦挣扎了几个小时，例如，如果您不扩展该类，如何从另一个类调用自定义类。

我的主基类上有一个计时器事件 Base.myTimer.addEventListener(TimerEvent.TIMER, processTime) - 基类

然后我稍后在代码中删除该方法 Base.mytimer.removeEventListener(TimerEvent.TIMER, processTime. - Base class

我有一个按钮（Btn 类），当它完成处理后，我想再次调用该方法，但我无法让它工作，因为该方法在按钮类中不存在，但在 Base 类中，所以 flash 显然给了我错误 processTime 未定义。

例如，现在我想从按钮内重新实例化事件侦听器，所以我有

Base.myTimer.addEventListener(TimerEvent.TIMER, processTime); 或 this.parent.parent["myTimer"].addEventListener()

myTimer 是 Base 类中的静态 Timer。

如果不是自定义方法，例如 Base.myTimer.dispatchEvent(new TimerEvent(TimerEvent.TIMER))，我可以制作一个普通的 dispatchEvent。

到目前为止我看到的例子还没有解决我的问题。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T08:17:59.577

看起来按钮类是基类的子树的一部分。在这种情况下，您可以在单击按钮类时执行 dispatchEvent

```
dispatchEvent(new Event("AddListenerAgain", true)); 
```

在 Base 类中，您必须已经可以访问按钮类，因此您可以说：

```
button.addEventListener("AddListenerAgain", addListener); 
```

然后在 Base 类中

```
private function addListener(e:Event) : void {
 myTimer.addEventListener(TimerEvent.TIMER, processTime);
} 
```

在此示例中，我已调度并侦听原始字符串。这不是推荐的做法。您必须阅读如何调度自定义事件才能正确执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T19:49:42.093

您可以将对 Base 类的实例的引用传递到您的 Button 实例中。

```
// Button class
package {
    import Base;
    // Other imports...

    public class Button {
        public function Button(base:Base):void {
            // processTime and myTimer must be public.
            // I put this line in the constructor for brevity, but if you stored base 
            // in an instance variable, you could put this anywhere in the button 
            // class.
            Base.myTimer.addEventListener(TimerEvent.TIMER, base.processTime)
        }
    }
}

// Create button like this. 
var button:Button = new Button(base);

// Or if button is created inside of Base
var button:Button = new Button(this); 
```

更好的是在 Base 类中创建两个方法，用于添加和删除侦听器，并将 myTimer 和 processTime 设为私有：

```
public class Base {
    public function addTimerListeners():void {
        myTimer.addEventListener(TimerEvent.TIMER, processTime)
    }

    public function removeTimerListeners():void {
        myTimer.removeEventListener(TimerEvent.TIMER, processTime)
    }
} 
```

然后你可以从类外调用这两个方法。这使您的班级的内部工作更加隐藏。如果您决定要将 myTimer 更改为实例变量而不是静态变量，则无需对 Base 类之外的代码进行任何更改。这称为封装，是一种很好的做法。

# android - Android ICS - 仅当 CA 证书安装提示不存在时才显示

> ID：14924582
> 
> 赞同：0
> 
> 时间：2013-02-17T18:35:24.637
> 
> 标签：android

我开发了一个需要与服务器进行安全通信的 android 应用程序。我收到关于不受信任服务器的异常，因为我的服务器证书不是 android 证书列表的一部分。

我使用以下 KeyChain API（从 ICS 开始提供）来提示用户安装证书，之后可以无缝地进行通信。

```
 BufferedInputStream bis = new BufferedInputStream(getAssets().open(
                PKCS12_FILENAME));
        byte[] keychain = new byte[bis.available()];
        bis.read(keychain);

        Intent installIntent = KeyChain.createInstallIntent();
        installIntent.putExtra(KeyChain.EXTRA_PKCS12, keychain);
        installIntent.putExtra(KeyChain.EXTRA_NAME, DEFAULT_ALIAS);
        startActivityForResult(installIntent, INSTALL_KEYCHAIN_CODE); 
```

我在应用程序启动时使用上面的代码，即使证书已经存在，它也会提示。关于这一点，我有以下两个问题，

1.  如何以编程方式识别特定证书是否已经存在？这样我只在它不存在时才提示。

2.  在应用程序安装过程中是否发生了任何事件，我应该使用它来提示用户安装证书？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T01:53:26.010

您可以使用类似的方法来枚举受信任的证书。如果别名以“用户”开头，则它是用户安装的。不过，这不是公共 API 的一部分，因此它可能会在未来的版本中中断。更多细节在这里： http: [//nelenkov.blogspot.com/2011/12/ics-trust-store-implementation.html](http://nelenkov.blogspot.com/2011/12/ics-trust-store-implementation.html)

```
KeyStore ks = KeyStore.getInstance("AndroidCAStore");
ks.load(null, null);
Enumeration aliases = ks.aliases();
while (aliases.hasMoreElements()) {
    String alias = aliases.nextElement();
    X09Certificate cert = (X509Certificate) 
       ks.getCertificate(alias);
    Log.d(TAG, "Subject DN: " + 
       cert.getSubjectDN().getName());
    Log.d(TAG, "Issuer DN: " + 
       cert.getIssuerDN().getName());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T18:47:35.810

由于似乎[无法](https://stackoverflow.com/questions/9124631/how-i-get-a-certificate-list-installed-in-android-4-0)以编程方式检索已安装证书的列表，因此您不能说您的证书何时已安装。恕我直言，如果您遇到有关不受信任的服务器的异常，您应该安装它。

在应用程序安装期间也没有发生事件（谁应该捕捉到这样的事件？）

# java - MongoDB：有没有办法在同一操作中查找文档并在其中设置值？

> ID：14924583
> 
> 赞同：0
> 
> 时间：2013-02-17T18:35:24.297
> 
> 标签：java, mongodb, mongodb-java

我有一个名为“消息”的集合。每条消息都有一个“读取”布尔值。在某些情况下，当我检索消息时，我想将值设置为“true”，同时返回预先修改的值。

所以，假设我有 1 条消息，其“读取”值为“假”。当我检索它时，我想返回初始的“假”值，但在同一个操作中，我想将它设置为“真”。

有什么办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T19:40:53.337

该[`findAndModify`命令](http://docs.mongodb.org/manual/reference/command/findAndModify/)是您要查找的内容：

> 4\. 该命令返回为此更新选择的原始未修改文档。

如果您在 Mongo shell 中使用它，您的用法将如下所示：

```
db.messages.findAndModify({query: {read: false}, update: {read: true}}) 
```

不过，看起来您正在使用 Java。Java 驱动程序为`findAndModify()`. 您可以在[DBCollection 的 javadoc 中](http://api.mongodb.org/java/current/com/mongodb/DBCollection.html)查看它们。

# python - 是否有支持 AWS ElastiCache 的自动发现功能的 Python Memcached 库？

> ID：14924586
> 
> 赞同：2
> 
> 时间：2013-02-17T18:35:37.917
> 
> 标签：python, memcached, amazon-elasticache

最近，AWS 宣布了 ElastiCache 的自动发现功能，尽管他们只是正式发布了 Java 客户端。有人知道支持此功能的 Python Memcached 库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T18:53:16.230

据我所知，ElastiCache 集群只是一堆 memcached 服务器，因此您需要为 memcached 客户端提供所有服务器的列表，并让客户端进行相关的负载平衡。

对于 Python，您有几个选择：

*   pylibmc - 它是 libmemcached 的包装器 - 最好和最快的 memcached 客户端之一

*   python-memcached - 本机 Python 客户端 - 非常基础，但易于使用、安装和使用

不幸的是，他们还没有在 python 中提供客户端来处理新的自动发现功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-28T23:15:50.357

有 django 库：[django-elasticache](https://github.com/gusdan/django-elasticache)。

[您可以在我对同一问题的](https://stackoverflow.com/a/22107561/1120528)回答中找到更多详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-15T14:21:25.017

我写了一个包，它可以做elasticache自动发现： [https ://github.com/yupeng820921/elasticache_pyclient](https://github.com/yupeng820921/elasticache_pyclient)

# visual-studio-2012 - 调试器类型之间的区别

> ID：14924587
> 
> 赞同：2
> 
> 时间：2013-02-17T18:35:42.653
> 
> 标签：visual-studio-2012

`native only`、`managed only`和调试器类型`script only`有什么区别？`mixed (managed and native)`它们可以在项目的属性页面中找到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T19:58:22.867

不同的运行时环境有不同的调试器。您正在选择要使用的调试器，以避免启动一个您永远不会使用的调试器，从而减少开销。调试器类型有：

*   托管：适用于以托管语言（如 C# 或 VB.NET）编写的 .NET 代码
*   Native：适用于 C 或 C++ 编译器生成的代码
*   混合：当您需要调试与本机代码互操作的 .NET 代码（在 C++/CLI 项目中很常见）或当您需要调试 pinvoke 问题时，您将做出选择
*   脚本：对调试在浏览器中运行的脚本代码（如 Javascript）很有用
*   GPU：用于调试在显卡中运行的 C++ AMP 代码
*   Silverlight：用于调试在浏览器中运行的 Silverlight 代码
*   T-SQL：用于调试在 SQL Server 上运行的存储过程
*   Workflow：用于调试WF工作流

# objective-c - Objective-C 实例变量

> ID：14924597
> 
> 赞同：1
> 
> 时间：2013-02-17T18:36:09.757
> 
> 标签：objective-c, class, variables, methods, instance

几年前有一个关于实例与类方法的问题。用下面的代码说明了这一点。我大部分都理解，除了为什么我需要实例变量“age”和实例方法“age”？

实例变量“age”的getter 和setter 不会用@synthetize 创建吗？

```
Static int numberOfPeople = 0;

@interface MNPerson : NSObject {
     int age;  //instance variable
}

+ (int)population; //class method. Returns how many people have been made.
- (id)init; //instance. Constructs object, increments numberOfPeople by one.
- (int)age; //instance. returns the person age
@end

@implementation MNPerson
- (id)init{
    if (self = [super init]){
          numberOfPeople++;
          age = 0;
    }    
    return self;
}

+ (int)population{ 
     return numberOfPeople;
}

- (int)age{
     return age;
}

@end
main.m:

MNPerson *micmoo = [[MNPerson alloc] init];
MNPerson *jon = [[MNPerson alloc] init];
NSLog(@"Age: %d",[micmoo age]);
NSLog(@"%Number Of people: %d",[MNPerson population]); 
```

（来自@micmoo 的原始代码）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T18:41:01.293

实例方法`age`用于*封装*。它允许子类覆盖该方法，并在需要时提供不同的实现。例如，子类可能希望根据初始日期和当前日期计算年龄，而不是存储它。如果您使用实例变量，子类将无法覆盖`age`；如果您添加一个实例方法，那么子类将能够提供新的实现。

另一个优点是您不能写信给`age`：您班级的用户可以获得`age`，但他们不能`set`。

> 实例变量“age”的getter 和setter 不会被创建`@synthetize`吗？

`@synthesize`需要一个属性声明，该类中缺少该声明。属性对于该语言来说相对较新，这可以解释为什么它们没有在您找到的代码中使用。

当前做同样事情的方法是声明一个*属性*而不是一个 ivar 和一个访问器，并完全跳过`@synthesize`：

```
@property (nonatomic, readonly) int age; 
```

`age`您可以通过分配`_age`自动创建的支持变量从类内部写入；用户可以使用`[obj age]`or`obj.age`语法读取值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T18:40:17.850

这段代码显然是在引入声明的属性和`@sythesize`指令之前编写的，它们是在 Mac OS X Leopard 时代用所谓的“Objective-C 2.0”引入的。[The Cacao 有](http://www.theocacao.com/document.page/510)一个简短的介绍，它将向您展示旧方式的样子。

是的，用现代的方式做会好得多，但是在那些黑暗的时代，我们必须在类的接口中声明每个 ivar，并手动编写每个 setter 和 getter。每个人，在雪地里，双向上坡，没有靴子。

# performance - 大 UTF-8 字符串的快速 fmt.Scanf()

> ID：14924598
> 
> 赞同：1
> 
> 时间：2013-02-17T18:36:11.937
> 
> 标签：performance, input, go

我有一个大约 8000000 个 UTF-8 字符的字符串。通过扫描`fmt.Scanf()`大约需要 10 秒，我怎样才能更快地完成它？我有一个 C`scanf()`函数的 Go 包装器，它是我的老师编写的，作为 Go 的 fmt.Scanf() 中的一些错误的解决方法，它可以在 1-2 秒内工作，但我不喜欢使用辅助包来完成​​这些简单的任务。你能推荐一些在纯 Go 中读取字符串的更快方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T19:13:27.953

找到了解决方案。`bufio`工作得更快（因为它是缓冲的，而`fmt`'s 的功能不是，它不解析任何东西）：

```
reader := bufio.NewReader(os.Stdin)
str, _ := reader.ReadString('\n')   // Like fmt.Scanf("%s", &str), but faster
var x, y rune
fmt.Fscanf(reader, "%c %c", &x, &y) // I need to read something else
                                    // (see comments for the question)
                                    // It's easy, as I can use fmt.Fscanf 
```

...甚至比 C`scanf()`包装器还要快。

# c# - c# web app - 允许客户端FTP整个文件夹

> ID：14924600
> 
> 赞同：0
> 
> 时间：2013-02-17T18:36:23.030
> 
> 标签：c#, .net, ftp

我有一个**c# webapp**，我需要允许用户**将整个文件夹**及其内容上传到服务器。我的代码**仅在本地测试时才有效**，因为它正在*搜索本地目录的所有内容并上传*。

当我将应用程序部署到服务器时，我不确定如何保持这个工作。有人知道**允许您一次上传整个文件夹的 Web 界面示例**吗？

```
private void uploadWebsite(string dirPath, string uploadPath, string imagesPath)
{
     string[] files = Directory.GetFiles(dirPath, "*.*");
     string[] subDirs = Directory.GetDirectories(dirPath);

     foreach (string file in files)
     {
         ftpClient.upload(uploadPath + "/" + Path.GetFileName(file), file);
         if (file.Contains(".jpg") || file.Contains(".png") || file.Contains(".gif"))
             ftpClient.upload(uploadPath + "/images/" + Path.GetFileName(file), file);
     }

     foreach (string subDir in subDirs)
     {
         ftpClient.createDirectory(uploadPath + "/" + Path.GetFileName(subDir));
         uploadWebsite(subDir, uploadPath + "/" + Path.GetFileName(subDir), null);
     }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T19:29:12.643

为了获得可用的最终用户体验，您必须依靠 Flash 来提供上传控件。像这样的东西：

[http://webdeveloperplus.com/jquery/multiple-file-upload-with-progress-bar-using-jquery/](http://webdeveloperplus.com/jquery/multiple-file-upload-with-progress-bar-using-jquery/)

这归结为向最终用户提供一次选择多个项目的方法。后端的代码也发生了巨大的变化，因为您将处理一系列文件上传。

维护目录结构也可能是个问题；IIRC [大多数/全部？] 浏览器仅在使用 multipart/form-data 传输数据时提供文件名。

您应该考虑是否要求最终用户创建一个 zip 文件 - 因此只需要选择一个文件进行上传并保留目录结构 - 可能是解决此问题的更好解决方案。

# html - 如何设置单选按钮的样式？

> ID：14924601
> 
> 赞同：4
> 
> 时间：2013-02-17T18:36:25.793
> 
> 标签：html, css

我根本没有找到任何说明如何在我的示例中设置像 div 这样的单选按钮样式：http: [//jsfiddle.net/Q5SRe/](http://jsfiddle.net/Q5SRe/)

分区：

```
div { 
    width:50px;
    height:50px;
    background-color:green
} 
```

我也希望当单选按钮被选中时它有：

```
border: medium solid #000; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-17T18:39:44.863

单选按钮是[Shadow DOM](http://glazkov.com/2011/01/14/what-the-heck-is-shadow-dom/)的一部分，目前还不能跨浏览器通用样式。

目前获取自定义单选按钮的最佳方法是使用图像或[复选框 hack](http://css-tricks.com/the-checkbox-hack/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T18:49:23.273

我以前用过[这个](http://ryanfait.com/resources/custom-checkboxes-and-radio-buttons/)，它不是跨浏览器兼容的，我建议你让事情变得更简单，但这取决于你的个人选择和用例

# wpf - MVVM 多对话框头痛

> ID：14924602
> 
> 赞同：0
> 
> 时间：2013-02-17T18:36:27.273
> 
> 标签：wpf, mvvm, caliburn.micro

我正在使用caliburn micro。我的问题是如何管理对话框。最大的问题是，因为当不使用窗口时，您的代码不会停止并等待。

所以我做了这样的事情。

```
public void ShowDialog(IScreen dialogModel, Action<object> callback = null)
{
    ActivateItem(dialogModel);

    if (callback != null)
        dialogModel.Deactivated += delegate { callback(dialogModel); };

} 
```

这有很多问题。例如，如果我想显示对话框 A，然后在回调时我想在某些情况下显示对话框 B，就会出现问题。我必须为 DoSomething 编写一个额外的函数，以免重复。并且我失去了所有其他局部变量..当需要更多级别时问题就更大了..

```
 showDialog(A, (cb)=>{

    if(...) {

    showDialog(B,(cb2)=>{
       DoSomething();

    });

    }
    else{
    DoSomething();
    }
}); 
```

另外因为我想一次显示一个对话框，所以我扩展了 Collection.OneActive 。但这也有问题。在停用事件回调中，如果我愿意，我无法关闭所有！因为它会在内存中保留触发 Deactivate 后的下一个引用，即使您清除它，它也会再次出现..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T20:13:31.307

当您在对话框之间移动时使用一个类来跟踪状态信息，而不是像原始示例中所示嵌套闭包，怎么样？

我认为你在正确的轨道上，但似乎你有两个问题：

1.  您正在执行的嵌套数量不利于代码清晰。
2.  您需要一种更好的方法来捕获对话框之间的局部变量和状态信息。

为了解决第一个问题，我建议将您的逻辑分解为不同的方法。每次停用对话框时，您都可以使用一种方法来处理应该在之后执行的逻辑。

要解决第二个问题，您可以尝试创建一个类，该类负责存储您希望在对话框之间传递的信息。此类的一个实例可以作为参数传入每个在对话停用时要执行的方法。

以下是您可以如何做到这一点：

**指挥类**

```
public class DialogTestsViewModel : Conductor<object>.Collection.OneActive
{
    /// <summary>
    /// Shows a dialog and executes its callback if necessary.
    /// </summary>
    /// <param name="dialogModel">The dialog view model to be shown.</param>
    /// <param name="callback">The callback to be executed when dialog is closed.</param>
    public void ShowDialog(IScreen dialogModel, Action callback = null)
    {
        // Show the dialog.
        ActivateItem(dialogModel);

        // If there is a callback, call it when dialog is closed / deactivated.
        if (callback == null) return;
        dialogModel.Deactivated += (sender, args) => callback();
    }

    /// <summary>
    /// This method kicks off the dialog chain.
    /// </summary>
    public void ShowFirstDialog()
    {
        // Create a new context. This will hold state information
        // as it is passed between dialogs.
        var context = new TestDialogContext();

        // Create the first dialog's view model.
        var viewModel = new FirstDialogViewModel();

        // Show the first dialog.
        ShowDialog(viewModel, () => OnFirstDialogDeactivated(viewModel, context));
    }

    /// <summary>
    /// Logic to be executed when the first dialog is closed.
    /// </summary>
    /// <param name="viewModel">The first dialog's view model.</param>
    /// <param name="context">The state information.</param>
    private void OnFirstDialogDeactivated(FirstDialogViewModel viewModel, TestDialogContext context)
    {
        // Check the view model here and store state information inside the context.
        if (viewModel.SomethingIsChecked)
        {
            context.ShouldShowSecondDialog = true;
        }

        // Use information in the view model or the context to decide if we should show the next dialog.
        // You could also make a decision about which dialog to show next here.
        if (context.ShouldShowSecondDialog)
        {
            var secondDialog = new SecondDialogViewModel();
            ShowDialog(secondDialog, () => OnSecondDialogDeactivated(context));
        }
    }

    /// <summary>
    /// Logic to be executed when the second dialog is closed.
    /// </summary>
    /// <param name="context">The state information.</param>
    private void OnSecondDialogDeactivated(TestDialogContext context)
    {
        // Do more stuff.
    }
} 
```

**对话上下文类**

您可以在此处存储需要在对话框之间传递的状态信息。我在这里只包含了一个属性作为示例，但是您可以在此处放置很多信息。

```
/// <summary>
/// State information to be passed between dialogs.
/// </summary>
public class TestDialogContext
{
    public bool ShouldShowSecondDialog { get; set; }
} 
```

# ios - iOS，rails，devise：如何保持用户登录（会话与 authentication_token）

> ID：14924606
> 
> 赞同：3
> 
> 时间：2013-02-17T18:37:07.590
> 
> 标签：ios, ruby-on-rails, devise

我正在尝试使用 rails 后端构建一个 iOS 应用程序。我选择了设计作为用户认证和会话管理系统。

目前我已经修改了原始的 Devise RegistrationsController 和 SessionsController 以便它们返回 JSON 响应。SessionsController 中的示例创建方法如下：

```
def create
    build_resource
if resource.save
  if resource.active_for_authentication?
    sign_up(resource_name, resource)
    respond_to do |format|
      format.json { render :json => ["success", resource, User.serialize_into_cookie(resource)]}
    end
  else
    expire_session_data_after_sign_in!
    respond_to do |format|
      format.json { render :json => ["inactive", resource]}
    end
  end
else
  clean_up_passwords resource
  respond_to do |format|
    format.json { render :json => ["error", resource]}
  end
end
end 
```

我想知道的是通过 iOS 应用程序持续登录的最佳方式是什么。

大多数设计教程仅适用于 Web 应用程序，我不确定应该如何将它们应用到我的 iOS 应用程序中。

我使用的框架是“AFNetworking”，而我用于网络的类是“AFHTTPClient”和“AFJSONRequestOperation”。但我不知道如何在客户端检索和存储会话，以便以后使用。

1.  也许我应该使用不同的网络框架，使用适当的标头和事物来检索会话和 cookie？像 ASIHTTPClient 之类的东西？

2.  或者我应该在设计中使用 token_authenticable 功能来保持登录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T06:51:22.243

如果您的项目只是一个 json 后端，通常首选使用 token_authenticable。JSON 易于使用且干净，并且设计可让您快速设置并为您处理一切。

# java - notify() 和 notifyAll() 的区别

> ID：14924610
> 
> 赞同：4
> 
> 时间：2013-02-17T18:37:18.980
> 
> 标签：java, multithreading, notify

我知道在这个网站上已经讨论过类似的问题，但是考虑到一个具体的例子，我还没有得到他们的帮助。我可以在理论上掌握 notify() 和`notifyAll()`关于`Thread`“唤醒”的区别，但是当使用其中任何一个而不是另一个时，我无法理解它们如何影响程序的功能。因此我设置了以下代码，我想知道使用它们中的每一个有什么影响。我可以从一开始就说它们给出了相同的输出（总和打印了 3 次）。

它们实际上有何不同？有人如何修改程序，以便应用通知或`notifyAll`对其功能发挥关键作用（给出不同的结果）？

任务：

```
class MyWidget implements Runnable {
private List<Integer> list;
private int sum;

public MyWidget(List<Integer> l) {
    list = l;
}

public synchronized int getSum() {
    return sum;
}

@Override
public void run() {
    synchronized (this) {
        int total = 0;
        for (Integer i : list)
            total += i;

        sum = total;

        notifyAll();
    }
} 
```

}

线：

```
public class MyClient extends Thread {
MyWidget mw;

public MyClient(MyWidget wid) {
    mw = wid;
}

public void run() {
    synchronized (mw) {
        while (mw.getSum() == 0) {
            try {
                mw.wait();
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
        System.out.println("Sum calculated from Thread "
                + Thread.currentThread().getId() + " : " + mw.getSum());
    }
}

public static void main(String[] args) {
    Integer[] array = { 4, 6, 3, 8, 6 };
    List<Integer> integers = Arrays.asList(array);

    MyWidget wid = new MyWidget(integers);

    Thread widThread = new Thread(wid);
    Thread t1 = new MyClient(wid);
    Thread t2 = new MyClient(wid);
    Thread t3 = new MyClient(wid);

    widThread.start();
    t1.start();
    t2.start();
    t3.start();
} 
```

}

**更新：** 我明确地写了它。无论使用 notify 还是 notifyAll，结果都是相同的： Sum 从 Thread 12 计算：27 Sum 从 Thread 11 计算：27 Sum 从 Thread 10 计算：27

因此我的问题是：有什么区别？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-17T18:43:13.217

差异比您的示例所要引起的要微妙。用 Josh Bloch 的话（Effective Java 2nd Ed，Item 69）：

> ...可能有理由使用`notifyAll`代替`notify`. 就像将`wait`调用放在循环中可以防止对可公开访问的对象进行意外或恶意通知一样，使用`notifyAll`代替`notify`可以防止不`wait`相关线程的意外或恶意通知。否则，这样`wait`的 s 可能会“吞下”关键通知，使其预期的接收者无限期地等待。

所以这个想法是，您必须考虑`wait`在您等待的同一监视器上输入的其他代码片段，以及那些吞下通知而不以设计方式做出反应的其他线程。

其他陷阱也适用，这可能会导致线程饥饿，例如多个线程可能等待不同的条件，但`notify`总是碰巧唤醒同一个线程，以及条件不满足的线程。

即使与您的问题没有直接关系，我觉得引用这个结论也很重要（原作者强调）：

> 总而言之，`wait`与. **很少有理由****在新代码中使用****和。**如果您维护使用and的代码，请确保它始终使用标准习惯用法从循环中调用。该方法一般应优先使用。如果使用，必须非常小心以确保活性。`notify``java.util.concurrent`**`wait``notify`**`wait``notify``wait``while``notifyAll``notify``notify`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T18:45:37.140

这在各种文档中都有明确说明。不同之处在于`notify()`选择（随机）一个线程，等待给定的锁，然后启动它。 `notifyAll()`相反，重新启动*所有*等待锁的线程。

最佳实践建议线程总是在一个循环中等待，只有在满足它们等待的条件时才退出。如果所有线程都这样做，那么您始终可以使用`notifyAll()`，保证等待条件已满足的每个线程都重新启动。

**编辑添加希望有启发性的代码：**

这个程序：

```
import java.util.concurrent.CountDownLatch;

public class NotifyExample {
    static final int N_THREADS = 10;
    static final char[] lock = new char[0];
    static final CountDownLatch latch = new CountDownLatch(N_THREADS);

    public static void main(String[] args) {
        for (int i = 0; i < N_THREADS; i++) {
            final int id = i;
            new Thread() {
                @Override public void run() {
                    synchronized (lock) {
                        System.out.println("waiting: " + id);
                        latch.countDown();
                        try { lock.wait(); }
                        catch (InterruptedException e) {
                            System.out.println("interrupted: " + id);
                        }
                        System.out.println("awake: " + id);
                    }
                }
            }.start();
        }

        try { latch.await(); }
        catch (InterruptedException e) {
            System.out.println("latch interrupted");
        }
        synchronized (lock) { lock.notify(); }
    }
} 
```

在一个示例运行中产生了这个输出：

```
waiting: 0
waiting: 4
waiting: 3
waiting: 6
waiting: 2
waiting: 1
waiting: 7
waiting: 5
waiting: 8
waiting: 9
awake: 0 
```

除非有进一步的通知调用，否则其他 9 个线程都不会唤醒。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T18:44:48.437

`notify`唤醒（任何）等待集中的一个线程，`notifyAll`唤醒等待集中的所有线程。`notifyAll`大部分时间都应该使用。如果您不确定要使用哪个，请使用`notifyAll`.

在某些情况下，一旦等待完成，所有等待的线程都可以采取有用的行动。一个例子是一组等待某个任务完成的线程；一旦任务完成，所有等待的线程都可以继续他们的业务。在这种情况下，您将使用`notifyAll()`同时唤醒所有等待线程。

另一种情况，例如互斥锁，只有一个等待线程在收到通知后可以做一些有用的事情（在这种情况下获取锁）。在这种情况下，您宁愿使用`notify()`. 如果实施得当，您*也可以*在`notifyAll()`这种情况下使用，但是您会不必要地唤醒无论如何不能做任何事情的线程。

Javadocs 上[`notify`](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#notify%28%29)。

Javadocs 上[`notifyAll`](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#notifyAll%28%29)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T18:45:01.287

一旦只有一个线程等待总和不为零，则没有区别。如果有多个线程在等待，notify 将只唤醒其中一个，而其他所有线程将永远等待。

运行此测试以更好地了解差异：

```
public class NotifyTest implements Runnable {
    @Override
    public void run ()
    {
        synchronized (NotifyTest.class)
        {
            System.out.println ("Waiting: " + this);

            try
            {
                NotifyTest.class.wait ();
            }
            catch (InterruptedException ex)
            {
                return;
            }

            System.out.println ("Notified: " + this);
        }
    }

    public static void main (String [] args) throws Exception
    {
        for (int i = 0; i < 10; i++)
            new Thread (new NotifyTest ()).start ();

        Thread.sleep (1000L); // Let them go into wait ()

        System.out.println ("Doing notify ()");

        synchronized (NotifyTest.class)
        {
            NotifyTest.class.notify ();
        }

        Thread.sleep (1000L); // Let them print their messages

        System.out.println ("Doing notifyAll ()");

        synchronized (NotifyTest.class)
        {
            NotifyTest.class.notifyAll ();
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T20:53:55.187

我发现我的程序发生了什么。三个`Thread`s 即使使用 也打印结果`notify()`，因为它们无法进入等待状态。中的计算`widThread`执行得足够快，足以抢占处于`Thread`等待状态的其他 s 的进入，因为它取决于条件`mw.getSum() == 0`（while 循环）。计算`widThread`总和，以便剩余`Thread`的 s 永远不会“看到”其值为 0。如果删除了 while 循环并且`widThread`开始位于其他`Thread`s 的开始之后，则`notify()`只有一个`Thread`打印结果，其他正如理论和其他答案所表明的那样，正在永远等待。

# c++ - C++ 嵌套迭代器

> ID：14924612
> 
> 赞同：2
> 
> 时间：2013-02-17T18:37:26.527
> 
> 标签：c++, iterator, nested-loops, random-access

有一个像下面这样的嵌套迭代器可以吗？

```
for (vector<type>::iterator i = list.begin(); i != list.end(); ++i) {
    for (vector<type>::iterator j = i; j != list.end(); ++j) {
        ...
    }
} 
```

请注意，`j`从 开始`i`，而不是`list.begin()`。由于迭代器是随机访问的，我可以保证两者`i`和`j`将具有相同的顺序吗？有更好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T18:39:28.023

你的代码是正确的。

两个迭代器将具有相同的顺序，并且只要您不进行任何[*使迭代器无效*](https://stackoverflow.com/a/6438087/13767)的操作（例如从向量中擦除或推送到向量），递增`j`就不会产生影响。`i`[](https://stackoverflow.com/a/6438087/13767)

 ** * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T18:40:18.330

这完全没问题。随机访问并不意味着随机顺序。这意味着您可以通过在迭代器上使用加法运算符 ( `+`and ) 来跳过容器。`-`例如，使用随机访问迭代器`it`，您可以执行`it + 10`. 对于非随机访问迭代器，您必须执行`it++`10 次才能达到相同的效果。（该`std::advance`函数将为您封装它）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-17T18:39:29.357

只要您不在循环*内*做任何可能使迭代器无效的事情，这绝对没问题。

（顺便说一句，在我看来，`list`这是一个有问题的名字。）`std::vector`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-17T18:40:54.580

这应该可以正常工作。Vector 按顺序存储元素，两个迭代器都将遵循此顺序。*

# java - Picasa getAlbum 请求在 Android 上不起作用

> ID：14924626
> 
> 赞同：0
> 
> 时间：2013-02-17T18:39:32.707
> 
> 标签：java, android, http, google-api, picasa

```
String album = "http://picasaweb.google.com/data/feed/api/user/"+email;
HttpURLConnection con = (HttpURLConnection) new URL(albumUrl).openConnection();

  // request method, timeout and headers
  con.setRequestMethod("GET") ;
  con.setReadTimeout(15000);
  con.setRequestProperty("Authorization", "GoogleLogin auth="+auth);
  con.setRequestProperty("GData-Version", "2");

  // set timeout and that we will process output
  con.setReadTimeout(15000);
  con.setDoOutput(true);

  // connnect to url
  con.connect();

  // read output returned for url
  BufferedReader reader = new BufferedReader(new InputStreamReader(con.getInputStream())); 
```

**问题：**每次我调用**con.getInputStream()**它都会给我**文件未找到异常。****但是当我在桌面浏览器** 中加载相同的 url 时，它会显示正确的数据。

我很困惑为什么在**android**上它会抛出异常。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-05T19:14:47.303

你得到这个了吗？也许你只是错过了 https

下面的示例对经过身份验证的用户和实验字段列表使用*默认值。*

```
url = "https://picasaweb.google.com/data/feed/api/user/default?kind=album&access=public&fields="
                + URLEncoder
                        .encode("entry(title,id,gphoto:numphotosremaining,gphoto:numphotos,media:group/media:thumbnail)",
                                "UTF-8"); 
```

[https://developers.google.com/picasa-web/docs/2.0/developers_guide_protocol#ListAlbums](https://developers.google.com/picasa-web/docs/2.0/developers_guide_protocol#ListAlbums)

# ios - 在 iOS 和 OS X 之间同步数据的 iCloud + Core Data 的替代品

> ID：14924629
> 
> 赞同：11
> 
> 时间：2013-02-17T18:39:50.977
> 
> 标签：ios, macos, core-data, synchronization, icloud

我正在为 iOS/OS X 开发一个应用程序，我想在它们之间同步数据。现在我使用 Core Data 来存储持久数据。我读到 iCloud 还不够成熟，无法与核心数据一起使用。

1.  真的吗 ？

所以我尝试使用新的 DropBox 同步 API（同步 SQLite 文件），但不支持 OS X。

1.  Parse SDK 是个好主意吗？（它还允许我添加 Android 支持）
2.  如果没有，您有其他解决方案吗？

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-17T23:47:16.037

> 我读到 icloud 还不够成熟，无法与核心数据一起使用。
> 
> 真的吗 ？

是的，我已经使用它很多次了，但目前我不能推荐它。

> 所以我尝试使用新的 dropBox 同步 API（同步 sqlite 文件），但不支持 mac。
> 
> 1.  parse sdk 是个好主意吗（这将允许我添加 android 支持）？
> 2.  如果没有，您有其他解决方案吗？

Parse 有很好的声誉。[有一个名为FTASync](https://github.com/itsniper/FTASync)的开源项目将其与 Core Data 集成。

其他一些选项：

*   [TICoreDataSync](https://github.com/nothirst/TICoreDataSync)，它通过 Dropbox 同步，但允许您使用 Core Data
*   [WasabiSync](http://www.wasabisync.com)，一个通过自己的服务器同步 Core Data 的第三方项目。
*   [Simperium](https://simperium.com)，另一个类似 Wasabi 的，通过他们自己的服务器同步核心数据。

目前，我对其中任何一个都没有足够的经验来支持它们。它们都是为了在 iCloud 之外同步 Core Data 而设计的，但我不能说哪个效果最好。

# asp.net - ASP.NET 模型绑定、ListView 和 CheckBox.Checked

> ID：14924631
> 
> 赞同：2
> 
> 时间：2013-02-17T18:40:04.550
> 
> 标签：asp.net, checkbox, .net-4.5, model-binding

我正在使用 ASP.NET 4.5 模型绑定通过编辑来呈现 ListView 控件中的项目。

```
<asp:ListView ID="Results" runat="server" SelectMethod="SelectClientStatus" DataKeyNames="ID" ItemPlaceholderID="itemPlaceHolder" ItemType="ClientStatus" OnItemCommand="Results_ItemCommand" InsertItemPosition="LastItem" UpdateMethod="UpdateClientStatus" InsertMethod="InsertClientStatus">
    <LayoutTemplate>
        <table>
            <tr>
                <th runat="server">
                    <asp:LinkButton ID="SortByDescription" runat="server" ClientIDMode="Static" CommandName="Sort" CommandArgument="Description" Text="Description" />
                </th>
                <th>Active</th>
                <th></th>
            </tr>
            <asp:PlaceHolder ID="itemPlaceHolder" runat="server" />
        </table>
        <agp:PagerControl runat="server" ID="PagerControl" />
    </LayoutTemplate>
    <ItemTemplate>
        <tr>
            <td>
                <%#: Item.Description%>
            </td>
            <td>
                <%#: Item.IsClientActive %>
            </td>
            <td>
                <asp:LinkButton ID="Edit" runat="server" ClientIDMode="Static" CommandName="Edit" CommandArgument="<%#: Item.ID %>" Text="Edit" />
            </td>
        </tr>
    </ItemTemplate>
</asp:ListView> 
```

当我添加我的 EditItemTemplate 时，我有一个复选框，我正在尝试将 Checked 属性绑定到模型......

```
<EditItemTemplate>
    <tr>
        <td>
            <asp:TextBox ID="Description" runat="server" Text="<%#: BindItem.Description%>" />
        </td>
        <td>
            <asp:CheckBox ID="IsActive" runat="server" Checked="<%#: BindItem.IsClientActive %>" />
        </td>
        <td>
            <asp:LinkButton ID="Update" runat="server" ClientIDMode="Static"
                CommandName="Update" CommandArgument="<%#: Item.ID %>"
                Text="Update" />
            <asp:LinkButton ID="Cancel" runat="server" ClientIDMode="Static"
                CommandName="Cancel" CommandArgument="<%#: Item.ID %>"
                Text="Cancel" />
        </td>
    </tr>
</EditItemTemplate> 
```

这是问题开始的地方，运行页面现在显示一条消息“CS0030：无法将类型'string'转换为'bool'”，提示行...

```
<td>
<asp:CheckBox ID="IsActive" runat="server" Checked="<%#: BindItem.IsClientActive %>" />
</td> 
```

我错过了什么？如何将 IsClientActive 的值绑定到 Checkbox 控件的 Checked 属性？值得注意的是，在模型中，IsClientActive 属性被定义为布尔值且不可为空。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T19:24:00.930

我的错; `Checked="<%#: BindItem.IsClientActive %>"`应该是`Checked="<%# BindItem.IsClientActive %>"`（注意省略冒号 (:)）

# perl - 是什么导致了这些错误？

> ID：14924643
> 
> 赞同：0
> 
> 时间：2013-02-17T18:41:17.980
> 
> 标签：perl, initialization, fasta

`$Xentr4`在第 6 行的 Convert1.pl 的连接 (.) 或字符串中使用未初始化的值

我收到以下错误：

> 在 Convert1.pl 第 6 行打开没有这样的文件或目录时出错"

```
#!/usr/bin/perl -w
# This script takes a user specified interleaved fasta input file $ARGV[0] and converts it to a sequential fasta file
use strict;

my $Xentr4=$ARGV[0];
open(IN, "<$Xentr4") || die ("Error opening $Xentr4 $!");

my $line = <IN>; 
print $line;

while ($line = <IN>)
{
        chomp $line;
        if ($line=~m/^>/) { 
                print "\n",$line,"\n"; 
               }
        else { 
                print $line; 
               }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T18:47:50.427

该错误可能会出现，因为您没有传递任何命令行参数。并且由于您`$Xentr4`使用第一个命令行参数进行初始化，因此在没有任何参数的情况下它将保持未初始化状态。

您需要将文件名作为命令行参数传递给脚本。

* * *

除此之外，您应该使用`3-arg`open：

```
open (IN, "<", $Xentr4) or die ("Error opening $Xentr4 $!"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:17:23.390

变量`$Xentr4`可能正确`undef`也`filepath`可能不正确。

为了避免此类问题，您可以添加检查。

```
if ( (defined $Xentr4) && (-e $Xentr4) ) {
    open(IN, "<$Xentr4") || die ("Error opening $Xentr4 $!");
} else {
     print "Check the Argument passed.\n";
} 
```

# mysql - 从表中的第 15 条记录到最后一条记录获取数据

> ID：14924658
> 
> 赞同：0
> 
> 时间：2013-02-17T18:42:38.940
> 
> 标签：mysql, limit, offset

从表 A 中，我使用限制从 0-15 获取行。

现在我再次需要从 15 到最后一行的所有记录，这样我不知道总行数。

如何做到这一点？使用`offset 15`没有帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T18:48:47.697

将这两个参数用于`LIMIT`. 对于第二个参数，使用一个异常大的数字，该数字至少大于表中的记录数。 [从手册](http://dev.mysql.com/doc/refman/5.5/en/select.html)

> LIMIT 接受一两个数字参数...
> 
> 有两个参数，第一个参数指定要返回的第一行的偏移量，第二个参数指定要返回的最大行数。初始行的偏移量为 0（不是 1）：
> 
> 选择 * 从 tbl 限制 5,10；# 检索第 6-15 行
> 
> 要检索从某个偏移量到结果集末尾的所有行，您可以为第二个参数使用一些较大的数字。此语句检索从第 96 行到最后一行的所有行：
> 
> 从 tbl 限制 95,18446744073709551615 中选择 *；

# android - Android sqlite 数据库等到初始数据填充完成

> ID：14924660
> 
> 赞同：3
> 
> 时间：2013-02-17T18:42:50.013
> 
> 标签：android, sqlite, fts3

我正在关注 Android 示例的“可搜索字典”，并使用一些数据（1200 条记录）预先填充了我的 FTS3 数据库。我想在我的活动初始加载时显示 3 条“默认”记录，但我需要等到所有记录都插入 FTS3。当我查看日志时，我看到

02-17 10:26:44.188: D/WorldClockWidgetActivity(1188): #默认城市: 0

02-17 10:27:11.668: D/CitiesDatabase(1188): 完成加载单词。

```
 @Override
    public void onCreate(SQLiteDatabase db) {
        mDatabase = db;
        mDatabase.execSQL(FTS_TABLE_CREATE);
        loadDictionary();
    }

    /**
     * Starts a thread to load the database table with words
     */
    private void loadDictionary() {
        new Thread(new Runnable() {
            public void run() {
                try {
                    loadWords();
                } catch (IOException e) {
                    throw new RuntimeException(e);
                }
            }
        }).start();
    }
enter code here 
```

我试图将上述内容更改为 ASyncTask，但问题是无法从正在加载数据的“CitiesOpenHelper 扩展 SQLiteOpenHelper”访问我的主要活动的列表适配器。

我的问题是如何判断我的数据是否已加载，以便加载默认值并显示给用户？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T18:45:35.623

步骤#1：`loadWords()`进入`onCreate()`并摆脱线程。

第 2 步：从您的活动或片段开始调用`getReadableDatabase()`or`getWriteableDatabase()`和您的查询，设置您的.`AsyncTask``ListAdapter``onPostExecute()`

# c# - 如何调试给出错误 500 的恶意表单上传？

> ID：14924666
> 
> 赞同：1
> 
> 时间：2013-02-17T18:43:18.787
> 
> 标签：c#, asp.net-mvc-3, razor

我目前有一个上传表单，看起来像

```
<form action="/Upload/Registration?measurementId=139" enctype="multipart/form-data" method="post">
    <fieldset>
        <legend>Registrationfiles</legend>
        <input type="hidden" name="MeasurementId" value="139"/>
            <div class="editor-field">
                <input id="RadioSelection" name="RadioSelection" type="radio" value="0" />
                <label>or</label>
                <input type="hidden" name="RecordId[0]" value="375" />
                <input type="file" name="RegistrationFile[0]" />
            </div>
        <p class="submit">
            <input type="submit" value="Save" />
        </p>
    </fieldset>
</form> 
```

我有两种方法`UploadController`：

```
[Authorize]
public ActionResult Registration(int measurementId)
{
    [...]
    return View(registrationViewModel);
} 
```

和

```
[HttpPost]
[Authorize]
public ActionResult Registration(RegistrationViewModel data, ICollection<int> RecordId, ICollection<HttpPostedFileBase> RegistrationFile)
{
    [...]
} 
```

当我访问[http://mySite.com/Upload/Registration?measurementId=139](http://mySite.com/Upload/Registration?measurementId=139)时，我得到了表单（如预期的那样），但是当我提交它时，我得到了`Error 500 - (Internal Server Error)`.

这个错误的原因是什么？

我有很多断点，但没有一个被击中。它只说明“错误 500”。

这是响应标头：

```
HTTP/1.1 500 Internal Server Error
Cache-Control: private, s-maxage=0
Server: Microsoft-IIS/7.5
X-AspNetMvc-Version: 3.0
X-AspNet-Version: 4.0.30319
X-Powered-By: ASP.NET
Date: Sun, 17 Feb 2013 18:50:13 GMT
Content-Length: 0 
```

编辑：当我删除第二种方法时，我没有收到错误 500。而且我从来没有收到[YSOD](http://www.urbandictionary.com/define.php?term=YSOD)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T12:56:32.583

在您的 web.config 中，将 customErrors 设置为“On”并重定向到 Error.cshmtl。您应该这样做只是为了修复 500 错误，然后再将其放回“关闭”。

For further instructions see [Can't get defaultRedirect to work](https://stackoverflow.com/questions/6211911/cant-get-defaultredirect-to-work) or [https://stackoverflow.com/a/6211961/1176596](https://stackoverflow.com/a/6211961/1176596) .

One possible problem might be that one of your used Models in a View lacks a default constructor. If so, you will get a MissingMethodException in your Error view.

# javascript - 获得对其他功能全面的变量

> ID：14924667
> 
> 赞同：0
> 
> 时间：2013-02-17T18:43:27.030
> 
> 标签：javascript, jquery, html

我有以下内容：

```
if ($firstBG.hasClass("inview")) {
    $(window).resize(function () {
        var height = $(window).height();
        var getfactor1 = 680 / 697;
        var posval1 = height * getfactor1;
        console.log(posval1);
    });

    $firstBG.css({
        'backgroundPosition': posval1)
    });
} 
```

但它没有`posval1`在后台函数中获取值。我究竟做错了什么？我想在调整大小函数中获取`posval1`值`if inview`！

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T18:50:47.510

您将需要从调整大小处理程序设置 css 属性。如果你想初始化它，你可以触发它：

```
if($firstBG.hasClass("inview")){
    $(window).resize(function() {        
        var height = $(window).height();
        var getfactor1 = 680/697;
        var posval1 = height*getfactor1;
        console.log(posval1);
        $firstBG.css({'backgroundPosition': posval1)});
    }).resize(); 
```

# java - 使用 VAO 的 JOGL 中的纹理是黑色的

> ID：14924670
> 
> 赞同：0
> 
> 时间：2013-02-17T18:43:44.797
> 
> 标签：java, opengl, textures, jogl, vertex-array

到目前为止，我使用了已弃用的立即模式渲染，并且我正在尝试切换到 VAO，然后是 VBO。二维四边形通常使用 VAO 渲染，但是当我尝试附加纹理时，它仍然是黑色的。如果有人可以查看我的代码并指出我错的部分，我将不胜感激。

```
public class CSpriteVAO {
/*VAO*/
private FloatBuffer vertices;
private ShortBuffer indices;
private FloatBuffer textures;
private int VAOVertices;
private int VAOIndices;
private int VAOTextures;

/*SPRITE*/
private String mTexture;
private CPoint mPosition;
private CPoint mDimension;
private CPreferences mPreferences;

public CSpriteVAO(GL2 gl, CPreferences preferences, String spriteID, CRectangle dimensions){
    mPreferences = preferences;
    mTexture = spriteID;
    mDimension = new CPoint(dimensions.width, dimensions.height);
    mPosition = new CPoint(dimensions.x, dimensions.y);

    CCreateVAO(gl);
}

public void onDraw(GL2 gl){
    gl.glLoadIdentity();
    CBindTexture(gl);
    CDraw(gl);
}

private void CDraw(GL2 gl){
    //gl.glCullFace(GL2.GL_CW);
    gl.glTranslatef(mPosition.x, mPosition.y, 0);
    gl.glEnableClientState(GL2.GL_VERTEX_ARRAY);
    gl.glEnableClientState(GL2.GL_TEXTURE_COORD_ARRAY);
        gl.glBindBuffer(GL2.GL_ARRAY_BUFFER, VAOVertices);
        gl.glVertexPointer(3, GL2.GL_FLOAT, 0, 0);

        gl.glBindBuffer(GL2.GL_ARRAY_BUFFER, VAOTextures);
        gl.glTexCoordPointer(2, GL2.GL_FLOAT, 0, VAOTextures);

        gl.glBindBuffer(GL2.GL_ELEMENT_ARRAY_BUFFER, VAOIndices);
        gl.glDrawElements(GL2.GL_TRIANGLES, indices.capacity(), GL2.GL_UNSIGNED_SHORT, 0);

    gl.glDisableClientState(GL2.GL_TEXTURE_COORD_ARRAY);
    gl.glDisableClientState(GL2.GL_VERTEX_ARRAY);
}

private void CCreateVAO(GL2 gl){
    //float[] textureArray = {0f, 1f, 1f, 1f, 1f, 0f, 0f, 0f};
    float[] textureArray = {0f, 0f, 1f, 0f, 1f, 1f, 0f, 1f};
    textures = Buffers.newDirectFloatBuffer(textureArray.length);
    textures.put(textureArray);
    textures.flip();

    float[] vertexArray = {0,            mDimension.y, 0,
                           mDimension.x, mDimension.y, 0,
                           mDimension.x, 0,            0,
                           0,            0,            0};
    vertices = Buffers.newDirectFloatBuffer(vertexArray.length);
    vertices.put(vertexArray);
    vertices.flip();

    short[] indexArray = {0, 1, 2, 0, 2, 3};
    indices = Buffers.newDirectShortBuffer(indexArray.length);
    indices.put(indexArray);
    indices.flip();

    int[] temp = new int[3];
    gl.glGenBuffers(3, temp, 0);

    VAOTextures = temp[0];
    gl.glBindBuffer(GL2.GL_ELEMENT_ARRAY_BUFFER, VAOTextures);
    gl.glBufferData(GL2.GL_ELEMENT_ARRAY_BUFFER, textures.capacity() * Buffers.SIZEOF_FLOAT, textures, GL2.GL_STATIC_DRAW);
    gl.glBindBuffer(GL2.GL_ELEMENT_ARRAY_BUFFER, 0);

    VAOVertices = temp[1];
    gl.glBindBuffer(GL2.GL_ARRAY_BUFFER, VAOVertices);
    gl.glBufferData(GL2.GL_ARRAY_BUFFER, vertices.capacity() * Buffers.SIZEOF_FLOAT, vertices, GL2.GL_STATIC_DRAW);
    gl.glBindBuffer(GL2.GL_ARRAY_BUFFER, 0);

    VAOIndices = temp[2];
    gl.glBindBuffer(GL2.GL_ELEMENT_ARRAY_BUFFER, VAOIndices);
    gl.glBufferData(GL2.GL_ELEMENT_ARRAY_BUFFER, indices.capacity() * Buffers.SIZEOF_SHORT,  indices, GL2.GL_STATIC_DRAW);
    gl.glBindBuffer(GL2.GL_ELEMENT_ARRAY_BUFFER, 0);
}

protected void CBindTexture(GL2 gl){
    if (mTexture != CUtils.CurrentTexture){
        if (mTexture != null){
            CAssets.CWGGetTexture(mTexture).enable(gl);
            CAssets.CWGGetTexture(mTexture).bind(gl);
        }
        CUtils.CurrentTexture = mTexture;
    }
}
} 
```

记录在案：我的 vcard 报告有（显然）支持 VAO 的 OpenGL 4.3.0。使用纹理立即渲染效果很好。

我真的很感激任何帮助。提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T19:36:46.490

检查你的纹理坐标。

如果这不起作用，请检查您是否已将顶点颜色设置为白色（因此它会显示纹理中显示的颜色）。

# forms - 当验证项目去记录（Oracle Forms）

> ID：14924671
> 
> 赞同：0
> 
> 时间：2013-02-17T18:43:46.017
> 
> 标签：forms, oracle, triggers

我有一个来自表**(PRODUCTOS)**的块，其中包含以下字段：**(PRODUCTO_NO(id),DESCRIPCION,PRECIO_ACTUAL,STOCK_DISPONIBLE)**

我需要在 producto_no 字段上编写代码，并在执行“ **when-validate-item** ”时使用正确的数据填充所有字段。

```
BEGIN
    SELECT producto_no, descripcion, precio_actual, stock_disponible
    INTO   :productos.producto_no, :productos.descripcion, :productos.precio_actual, :productos.stock_disponible
  FROM productos
  WHERE producto_no = :PRODUCTOS.PRODUCTO_NO;

EXCEPTION
    .......
END; 
```

这很好用，但我想使用**insert_record、delete_record、**按钮，这不会“冲浪”数据库数据。有什么方法可以在 when-validate-item 上使用想要的记录？

另一种方式：在我的删除按钮（按下按钮）我有这个代码：

```
BEGIN
        DELETE FROM PRODUCTOS WHERE PRODUCTO_NO = :PRODUCTO_NO;
        COMMIT; --2 VECES SI FUNCIONA
EXCEPTION
    WHEN OTHERS THEN
    message('ESE REGISTRO AÚN NO EXIS EN LA BASE DE DATOS. NO SE PUEDE ELIMINAR.');
END; 
```

这仅在我按两次按钮时才有效，第一次无效：S

对不起我的英语。非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T23:32:35.700

抱歉，如果我没有理解您的问题，但是如果您有一个基于表的块，并且您希望根据同一个表中条目的值填充项目，为什么不直接使用 ENTER_QUERY 和 EXECUTE_QUERY？

然后让您的 DELETE btn 简单地执行 DELETE_RECORD。

我很困惑。

# mysql - 根据条件获取元组列表

> ID：14924672
> 
> 赞同：-1
> 
> 时间：2013-02-17T18:43:53.137
> 
> 标签：mysql, sql

我有两个关系

```
Author (authorId, authorName, country)

PrizeWinner (mAuthId, fAuthId, year) 
```

在哪里：

```
fk(mAuthId) -> authorId of Author 
fk(fAuthId) -> authorId of Author 
```

PrizeWinner 表包含在给定年份获得最佳作者奖的男性和女性对的 ID。

**当男性 (mAuthID) 和女性作者 (fAuthId) 来自同一个国家时，我们需要列出所有获奖作者对**

对此的任何帮助或线索将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T18:55:27.907

```
SELECT male.*, female.*
FROM 
    PrizeWinner p
        INNER JOIN Author male ON male.authorId = p.mAuthId
        INNER JOIN Author female ON female.authorId = p.fmAuthId
WHERE
    male.country = female.country 
```

关于你的评论，试试这个：

```
SELECT DISTINCT all.authorName, all.country
FROM 
    PrizeWinner p
        INNER JOIN Author male ON male.authorId = p.mAuthId
        INNER JOIN Author female ON female.authorId = p.fmAuthId
        INNER JOIN Author all ON all.authorId = male.authorId OR all.authorId = female.authorId
WHERE
    male.country = female.country 
```

# android - 如何从 Facebook SDK 3.0 获取好友列表

> ID：14924673
> 
> 赞同：2
> 
> 时间：2013-02-17T18:44:11.247
> 
> 标签：android, facebook-graph-api, facebook-android-sdk

我是 Facebook 与 android 集成的新手。我已经使用 facebook-android-SDK-3.0 登录了 Facebook。（[https://developers.facebook.com/docs/howtos/androidsdk/3.0/login-with-facebook/](https://developers.facebook.com/docs/howtos/androidsdk/3.0/login-with-facebook/)）

现在我想在 ListView 中获取所有朋友的姓名、生日和显示，然后单击朋友墙上的列表发布。

[http://img829.imageshack.us/img829/6136/samplefriendslistbirthd.jpg](http://img829.imageshack.us/img829/6136/samplefriendslistbirthd.jpg)

我怎样才能做到这一点？

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T09:39:25.500

让我们看看 Facebook-SDK3.0 中的 FriendPickerSample

# sql - 在 Oracle 中找不到表 v$parameter

> ID：14924681
> 
> 赞同：7
> 
> 时间：2013-02-17T18:44:48.953
> 
> 标签：sql, oracle, oracle11g

我想使用 SQL 查询获取 Oracle 中的会话数：

```
SELECT value FROM v$parameter WHERE name = 'sessions' 
```

但我得到这个错误：

```
Error starting at line 1 in command:
SELECT value FROM v$parameter WHERE name = 'sessions'
Error at Command Line:1 Column:18
Error report:
SQL Error: ORA-00942: table or view does not exist
00942\. 00000 -  "table or view does not exist"
*Cause:    
*Action: 
```

也许我使用的 Oracle 用户没有特权？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-19T02:36:41.223

通常，更好的方法是使用一个过程并授予该过程必要的权限。但是，如果您想直接使用 SQL，您可以授予`SELECT_CATALOG_ROLE`或授予`SELECT ANY DICTIONARY`用户。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-17T18:48:34.563

大概。要授予权限，您需要将表名用作`V_$PARAMETER`. 它来自于授予动态视图权限时的一些限制。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2017-05-05T21:41:10.757

使用权限： -*选择任何表*，在 Oracle 12c 中使用 SYSDBA 以 SYS 身份运行授权时*更改任何表*为我解决了这个问题。

# php - 在 PHP 中填充日期对象数组的缺失元素

> ID：14924682
> 
> 赞同：1
> 
> 时间：2013-02-17T18:44:53.330
> 
> 标签：php, date

我有一个`array`看起来像`objects`：`php`

```
Array
(
    [0] => Array
      (
        [day] => 1/23/2013
        [executions] => 1
      )

    [1] => Array
      (
        [day] => 1/24/2013
        [executions] => 1
      )

    [2] => Array
      (
        [day] => 1/27/2013
        [executions] => 10
      )

    [3] => Array
      (
        [day] => 1/29/2013
        [executions] => 1
      )

    [4] => Array
      (
        [day] => 1/30/2013
        [executions] => 3
      )

    [5] => Array
      (
        [day] => 2/8/2013
        [executions] => 1
      )

   [6] => Array
      (
        [day] => 2/11/2013
        [executions] => 3
      )

) 
```

我正在构建这些数据的图表，基本上它代表过去 30 天。问题是我没有得到丢失的日子，即当查询没有执行时。我希望用 PHP 来填补这些缺失的日子，只需将 设置`day`为正确的日期，然后`executions`将`0`. 因此，结果数组应该包含 30 个元素，假设 start 是`1/18/2013`并且 end 是 today `2/17/2013`。

知道在 PHP 中实现这一目标的最佳算法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T18:53:54.600

就像是：

```
$start = '1/18/2013';
$end = '2/17/2013';

$range = new DatePeriod(
  DateTime::createFromFormat('m/d/Y', $start),
  new DateInterval('P1D'),
  DateTime::createFromFormat('m/d/Y', $end));

$filler = array();

foreach($range as $date)
  $filler[] = array(
    'day'      => $date->format('m/d/Y'),
    'execution' => 0,
  };

$array += $filler; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T18:49:15.517

使用 DateTime 循环遍历每个日期：

```
$start = new DateTime('2013-01-18');
$end = new DateTime('2013-02-17');
while ($start <= $end)
{
    $current_date = $start->format('m/d/Y');
    // Right here look in your array and see if that date exists
    // and do whatever you need to do if it does/does not
    $start->modify("+1 day");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T19:20:32.180

你可以使用这个：

```
$startDate = new DateTime ( "-30 days" );
$dateItter = new DatePeriod ( 
    $startDate,
    new DateInterval ('P1D'),
    30  
);

$original = array (
    array ( 
        'days' => '02/16/2013',
        'executions' => 5
    )   
);

$result = array (); 

foreach ( $dateItter as $date )
{
    $executions = 0;

    foreach ( $original as $item ) { 
        if ( $item['days'] == $date->format ( 'm/d/Y' ) ) 
            $executions = $item['executions'];
    }   

    $result[] = array (
        "day" => $date->format ( 'm/d/Y' ),
        "executions" => $executions
    );  
}

var_dump ( $result ); 
```

数据量大时速度慢，但30个项目就可以了！

# c - makefile 错误: make: *** No rule to make target `omp.h' ; 使用 OpenMP

> ID：14924683
> 
> 赞同：1
> 
> 时间：2013-02-17T18:44:53.230
> 
> 标签：c, gcc, makefile, openmp

所有，我正在用 OpenMP 编译一个 C 程序。这是我第一次使用makefile。执行“make”时，gcc 报错make: *** No rule to make target `omp.h', needed by`smooth.o'。停止。但是 omp.h 在 /usr/lib/gcc/i686-linux-gnu/4.6/include/omp.h 中，我想知道如何修复它。有人可以帮我吗？谢谢你。

```
CC=gcc
CFLAGS = -fopenmp

all: smooth

smooth: smooth.o ompsooth.o
    $(CC) $(CFLAGS) -o smooth smooth.o ompsmooth.o

ompsmooth.o: ompsmooth.c assert.h stdio.h stdlib.h omp.h ompsmooth.h
    gcc $(CFLAGS) ompsmooth.c

smooth.o: smooth.c ompsmooth.h omp.h stdio.h stdlib.h string.h sys/types.h sys/stat.h     fcntl.h
    gcc $(CFLAGS) smooth.c

clean:

    rm *.o
    rm smooth 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T18:46:47.090

除非您期望您的标准头文件发生更改，否则最简单的解决方案就是将它们从先决条件列表中删除。

如果您不想执行上述操作，那么您要么需要指定完整路径`omp.h`，要么使用该[`VPATH`](http://www.gnu.org/software/make/manual/make.html#General-Search)机制。

# c# - 如何获得参数化 nchar 的一个查询计划？

> ID：14924687
> 
> 赞同：1
> 
> 时间：2013-02-17T18:45:24.363
> 
> 标签：c#, sql-server

我有向 sql server 提交查询的 c# web 应用程序。查询有三个参数，两个是int，一个是nchar。对于 nchar 参数的每个长度，我得到了不同的查询计划。有没有办法只获得一个计划？

更多细节：

该查询相当大且复杂，因此我不会在这里全部包含在内。但是，有 WHERE 部分是

```
WHERE gp.Control=@Control AND r.RegionType=@RegionType 
```

r.RegionType 是表中定义为 nchar(10) 的列。我的 c# 代码使用以下内容设置参数：

```
cmd.Parameters.Add(parmRegionType, System.Data.SqlDbType.NChar).Value = rgn.Key; 
```

其中 rgn.key 可能具有以下四个值之一：“All”、“County”、“DGP”或“State”。

当我转储查询计划时

```
SELECT usecounts, cacheobjtype, objtype, text, query_plan
FROM sys.dm_exec_cached_plans 
CROSS APPLY sys.dm_exec_sql_text(plan_handle) 
CROSS APPLY sys.dm_exec_query_plan(plan_handle) 
WHERE text LIKE '%(@RegionType nchar(%),@CacheCnt int,@Control int)%'
AND text NOT LIKE '%this query%' 
```

我得到以下结果（编辑格式和截断文本）

```
usecounts cacheobjtype  objtype  text                                                                                                                                                                                                                                                             query_plan
--------- ------------- -------- -----------------------------------------------
1         Compiled Plan Prepared (@RegionType nchar(5),@CacheCnt int,@Control...
1         Compiled Plan Prepared (@RegionType nchar(6),@CacheCnt int,@Control...
2         Compiled Plan Prepared (@RegionType nchar(3),@CacheCnt int,@Control...

(3 row(s) affected) 
```

所以你可以看到当@RegionType 是三个字符长（“All”和“DGP”）、五个字符长（“State”）和六个字符长（“County”）时，有一个查询计划。

有没有办法对此进行编码，以便只准备一个查询计划，而与 @RegionType 参数的长度无关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T19:07:51.507

使用`NVarChar`并将[长度设置](http://msdn.microsoft.com/en-us/library/40959t6x.aspx)为最大预期可能值（例如，无论`RegionType`列的最大长度是多少）。

看起来像`6`你的情况，因为那是`County`

```
cmd.Parameters.Add(parmRegionType, System.Data.SqlDbType.NVarChar, 6).Value = rgn.Key; 
```

# android - Facebook 喜欢使用帖子 ID 的帖子

> ID：14924688
> 
> 赞同：0
> 
> 时间：2013-02-17T18:45:32.270
> 
> 标签：android, facebook

我在 Facebook 上创建了一个帖子并收到了帖子 ID。现在我想创建一个带有指向我帖子的 URL 的点赞[按钮](http://developers.facebook.com/docs/reference/plugins/like-box/)，因此当点击“点赞”时，用户会喜欢他的帖子。

可能吗？我如何使用 JavaScript 或使用 Android-Facebook sdk3？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T19:18:21.247

假设您有权限，您可以通过发出连接`HTTP` `POST`请求来点赞帖子。`POST_ID/likes``publish_stream`

，`javascript sdk`你可以做类似的事情

```
FB.api("/POST_ID/likes", 'post',function(response) {
    if (!response || response.error) {
    alert('Error occured');
  } else {
    alert('successfully, liked the post!');
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T19:24:00.677

与网页不同，您不能将 Facebook **Like**按钮添加到 Android 应用程序。我不确定这是否可以在`WebView`. 但是，您可以通过对 Facebook API 使用“POST”或“DELETE”查询将该功能添加到 Like a post：

这是我在应用程序中*切换*帖子的点赞状态的一个功能示例：

**注意：此代码适用于较旧的 v2.x SDK。因此，您需要调整一些特定于最新 v3.x SDK 的内容**

在您将用于发布/删除 Like 的 onClickListener 上，运行以下代码：

```
try {
    String query = "SELECT user_likes FROM stream WHERE post_id= \'"
            + THE_POST_ID + "\'";
    Bundle params = new Bundle();
    params.putString("method", "fql.query");
    params.putString("query", query);
    String fqlResponse = Utility.mFacebook.request(params);

    JSONArray JALikes = new JSONArray(fqlResponse);

    for (int j = 0; j < JALikes.length(); j++) {
        JSONObject JOTemp = JALikes.getJSONObject(j);

        if (JOTemp.has("user_likes"))   {
            String userLikeStatus = JOTemp.getString("user_likes");
            if (userLikeStatus.equals("true"))  {

                try {
                    Bundle parameters = new Bundle();
                    Utility.mFacebook.request("POST_ID/likes", parameters, "DELETE");

                    // SHOW THE "LIKE" IS REMOVED
                }
                catch(Exception e)  {
                    e.printStackTrace();
                }
            } else if (userLikeStatus.equals("false")) {
                try {
                    Bundle parameters = new Bundle();
                    Utility.mFacebook.request("POST_ID/likes", parameters, "POST");

                    // SHOW THAT THE POST IS NOW "LIKED"
                }
                catch(Exception e)  {
                    e.printStackTrace();
                }

            }
        }
    }
} catch (Exception e) {
    e.printStackTrace();
} 
```

在代码的第一部分（**在 之前`for loop`**），如果登录用户喜欢帖子，我会检查当前状态。根据结果​​（**在 中`for loop`**），我要么删除赞，要么发布赞。

虽然它是一个较旧的 SDK，但代码仍然有效，并且只需进行一些修改（如果需要）就可以正常工作。

# php - 清理邮件数据后出现 AJAX 错误

> ID：14924697
> 
> 赞同：0
> 
> 时间：2013-02-17T18:45:59.200
> 
> 标签：php, javascript, jquery, ajax, email

我有一个在成功提交后发送电子邮件的 Ajax 表单。这在我的本地环境中没有任何问题。当我计划使用该页面时，我需要为来自表单的数据添加某种形式的清理，主要是为了防止邮件标题注入。

为此，我使用以下功能：

```
// see http://www.erich-kachel.de/?p=26 for details
function QB_SECURE_MAIL_PARAM($param_ = '', $level_ = 2) { 

    unset($filtered); 
    /* replace until done */ 
    while ($param_ != $filtered || !isset($filtered)) { 
        if (isset($filtered)) { 
            $param_ = $filtered; 
        } 
        $filtered = preg_replace( 
            "/(Content-Transfer-Encoding:|MIME-Version:|content-type:|" . 
            "Subject:|to:|cc:|bcc:|from:|reply-to:)/ims", "", $param_); 
    } 
    unset($filtered); 

    if ($level_ >= 2) { 
        /* replace until done */ 
        while ($param_ != $filtered || !isset($filtered)) { 
            if (isset($filtered)) { 
                $param_ = $filtered; 
            }         
            $filtered = preg_replace( 
                "/(%0A|\\\\r|%0D|\\\\n|%00|\\\\0|%09|\\\\t|%01|%02|%03|%04|%05|" .
                "%06|%07|%08|%09|%0B|%0C|%0E|%0F|%10|%11|%12|%13)/ims", "", $param_);
        } 
    } 
    return $param_; 
} 
```

例如，给出了以下代码段：

```
$headers = "From: " . QB_SECURE_MAIL_PARAM($from); 

mail(QB_SECURE_MAIL_PARAM($recipient), 
     QB_SECURE_MAIL_PARAM($subject), 
     QB_SECURE_MAIL_PARAM($message, 1), 
     $headers); 
```

在我的代码中，看起来像这样：

```
$email = QB_SECURE_MAIL_PARAM( $email );
$name = QB_SECURE_MAIL_PARAM( $name );
$message = QB_SECURE_MAIL_PARAM( $message , 1 );

$header  = "MIME-Version: 1.0" . "\r\n";
$header .= "Content-type: text/html; charset=utf-8" . "\r\n";
$header .= "Content-Transfer-Encoding: quoted-printable" . "\r\n";
$header .= "Reply-To:" . $email . "\r\n";
$header .= "From: myForm <noreply@form.net>" . "\r\n";
mail ( "my.mail@mail.com" , "You have a message from " .  $name . " waiting for you" , $message , $header ); 
```

**邮件被发送，但在 AJAX 中`error`事件被触发。为什么？**

我再说一遍：没有这个`QB_SECURE_MAIL_PARAM`功能一切正常，所以问题就在那里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T05:20:08.620

可能是 Mime 版本的一些问题

# matlab - 从两个构建一个 3by3n 矩阵 列向量

> ID：14924702
> 
> 赞同：0
> 
> 时间：2013-02-17T18:46:14.020
> 
> 标签：matlab, loops, optimization

我有两个列向量，每个列向量 size `<nx1>`。该`config`向量`721,722,723 and 724`仅包含数字`length`，而 size 的向量`<nx1>`仅包含数字。我需要构建矩阵 Z，它的大小`<3x3n>`： `note:matrices a,b,c and d are each <3x3> matrices.`在这里很难用文字表达规则，让我先举个例子：

`length=[1 2 3],config=[721 722 723],a=eye(3),b=ones(3),c=magic(3);`

> ```
> z=[ 1     0     0     2     2     2    24     3    18
>     0     1     0     2     2     2     9    15    21
>     0     0     1     2     2     2    12    27     6] 
> ```
> 
> 也就是说，如果 config(i) 为 722 且 length(i) 为 2，则将 2*matrix_a 附加到 z 矩阵，依此类推。

我做了以下事情：

```
 z=[0 0 0;0 0 0;0 0 0];
    for i=1:3
    [~,col]=size(z);
      if config(i)==721
       z(:,col+[1:3])=length(i)*a
      end
      if config(i)==722
       z(:,col+[1:3])=length(i)*b
      end
      if config(i)==723
       z(:,col+[1:3])=length(i)*c
      end
    end
    z=z(:,4:end) 
```

但是没有更好的无环矢量化方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-28T11:33:48.330

我不确定您是否仍然需要此信息，但我找到了解决方案：

```
config = [722 722 723 723 721];
lenght=[3 4 5 6 7];
a=eye(3);b=ones(3);c=magic(3);
d1 = kron( ~rem(config, 721).*lenght, a);
d2 = kron( ~rem(config, 722).*lenght, b);
d3 = kron( ~rem(config, 723).*lenght, c);
result = d1 + d2 + d3; 
```

我的数据的结果：

```
a =

     1     0     0
     0     1     0
     0     0     1

b =

     1     1     1
     1     1     1
     1     1     1

c =

     8     1     6
     3     5     7
     4     9     2

result =

     3     3     3     4     4     4    40     5    30    48     6    36     7     0     0
     3     3     3     4     4     4    15    25    35    18    30    42     0     7     0
     3     3     3     4     4     4    20    45    10    24    54    12     0     0     7 
```

# jquery - jQuery 验证单选按钮单击

> ID：14924704
> 
> 赞同：1
> 
> 时间：2013-02-17T18:46:16.733
> 
> 标签：jquery, twitter-bootstrap, jquery-validate

我有一个联系表格，询问是否愿意通过电子邮件或电话联系。当您单击电子邮件单选按钮时，会出现一个电子邮件文本字段。单击电话单选按钮也是如此。例如，当我单击电子邮件单选按钮并输入无效电子邮件时，无效电子邮件错误消息会出现模糊。现在，当我单击电话时，会出现电话文本字段，但无效的电子邮件错误消息不会消失。这就是我希望发生的事情。

**HTML（带引导程序）**

```
<div class="control-group">
  <label class="control-label" for="How_would_you_like_to_be_contacted_">How would you like to be contacted?</label>
  <div class="controls">
    <label class="radio">
      <input id="contact_type_email" name="contact_type" type="radio" value="email" />
      <label for="Email">Email</label>
    </label>

    <label class="radio">
      <input id="contact_type_telephone" name="contact_type" type="radio" value="telephone" />
      <label for="Telephone">Telephone</label>
    </label>
  </div>
</div>

<div class="control-group" id="email">
  <label class="control-label" for="contact_email">Email</label>
  <div class="controls">
    <input id="contact_email" name="contact[email]" size="30" type="text" />
  </div>
</div>

<div class="control-group" id="telephone">
  <label class="control-label" for="contact_telephone">Telephone</label>
  <div class="controls">
    <input id="contact_telephone" name="contact[telephone]" placeholder="###-###-####" size="30" type="text" />
  </div>
</div> 
```

**JavaScript**

```
$(document).ready(function() {
  $('#email').hide();
  $('#telephone').hide();

  $('#contact_type_email').click(function() {
    $('#email').show();
    $('#telephone').hide();
    $('#contact_telephone').val('');
  });

  $('#contact_type_telephone').click(function() {
    $('#telephone').show();
    $('#email').hide();
    $('#contact_email').val('');
  });

  $('#new_contact').validate({
    rules: {
      'contact[name]': {
        required: true
      },
      'contact[email]': {
        required: {
          depends: function(element){
            return $("#contact_type_email").prop("checked");
          }
        },
        email: true
      },
      'contact[telephone]': {
        required: {
          depends: function(element) {
            return $("#contact_type_telephone").prop("checked");
          }
        },
        phoneUS: true
      }
    }
    errorPlacement: function(error, element) {
      error.appendTo("#error");
}
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T22:48:30.830

从OP的评论：

> @Sparky，这是我的 jsFiddle：[jsfiddle.net/mikeglaz/BmNWR](http://jsfiddle.net/mikeglaz/BmNWR)。当我单击电子邮件单选按钮时，输入无效的电子邮件地址，然后单击电话单选按钮，我的无效电子邮件错误消息仍然存在。– 麦克格拉兹

这就是我在上一个问题[的答案的最后一次编辑中](https://stackoverflow.com/a/14529239/594235)试图向您展示的内容。

我清理了你的逻辑并添加了`$('label').hide();`......

```
$('#contact_type_email').click(function () {
    $('#email').show();
    $('#telephone').hide();
    $('#contact_telephone').val('');             // <-- fixed this
    $('label[for="contact_telephone"]').hide();  // <-- added this
});

$('#contact_type_telephone').click(function () {
    $('#telephone').show();
    $('#email').hide();
    $('#contact_email').val('');
    $('label[for="contact_email"]').hide();      // <-- added this
}); 
```

**修改后的 jsFiddle 演示：http: [//jsfiddle.net/BmNWR/8/](http://jsfiddle.net/BmNWR/8/)**

# scala - 如何为泛型类型编写 scalaz.IsEmpty 参数

> ID：14924707
> 
> 赞同：3
> 
> 时间：2013-02-17T18:46:31.270
> 
> 标签：scala, generics, typeclass, scalaz, higher-kinded-types

我正在尝试编写一个通用方法，它将任何具有[`scalaz.IsEmpty`](https://github.com/scalaz/scalaz/blob/scalaz-seven/core/src/main/scala/scalaz/IsEmpty.scala)typeclass 实例的内容包装到`Option`. 它应该返回空值，如果它是非空的，则将其`None`包装进去。`Some`这是我到目前为止提出的：

```
import scalaz._
import Scalaz._

def asOption0[C](c: C)(implicit ev: IsEmpty[({ type B[A] = C })#B]) =
  if (ev.isEmpty(c)) None else Some(c)

def asOption1[A, C[_]](c: C[A])(implicit ev: IsEmpty[C]) =
  if (ev.isEmpty(c)) None else Some(c) 
```

`asOption0`适用于原始类型，例如`String`（通过使用[类型 lambda](https://stackoverflow.com/questions/8736164/what-are-type-lambdas-in-scala-and-what-are-their-benefits)来指示`C`具有 shape `B[_]`）并`asOption1`适用于具有一元类型构造函数的类型，例如`List`：

```
scala> asOption0("")
res1: Option[String] = None

scala> asOption1(List(1,2,3))
res0: Option[List[Int]] = Some(List(1, 2, 3))

scala> asOption0(List(1,2,3))
<console>:17: error: could not find implicit value for parameter
                     ev: scalaz.IsEmpty[[A]List[Int]]

scala> asOption1("hello")
<console>:17: error: could not find implicit value for parameter
                     ev: scalaz.IsEmpty[Comparable] 
```

是否可以同时编写一种适用于`String`、`List`和 更高类型的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T22:03:01.477

```
scala> asOption0(List(1,2,3))
<console>:17: error: could not find implicit value for parameter
                     ev: scalaz.IsEmpty[[A]List[Int]] 
```

此错误告诉您它找不到`IsEmpty`列表的实例，这是因为类型参数无关紧要。Scalaz 对任何列表都有一个隐式，无论类型参数如何。

该方法请求一个`IsEmpty[List[Int]]`，而 Scalaz 只有一个可用于`IsEmpty[List[_]]`. 由于`IsEmpty`不关心列表的内容，我们只是`asOption0`通过提供更详细的版本来使该方法快乐`IsEmpty`：

```
def asOption0[C](c: C)(implicit ev: IsEmpty[({ type B[_] = C })#B]) =
  if (ev.isEmpty(c)) None else Some(c)  

implicit def detailedIsEmpty[A, C[_]](implicit ev: IsEmpty[C]) =
  ev.asInstanceOf[IsEmpty[({ type B[_] = C[A] })#B]]

asOption0("test")             //> res0: Option[String] = Some(test)
asOption0(List(1, 2, 3))      //> res1: Option[List[Int]] = Some(List(1, 2, 3))
asOption0("")                 //> res2: Option[String] = None
asOption0(List[Int]())        //> res3: Option[List[Int]] = None 
```

* * *

## 编辑

我又看了一下这个问题，找到了一个看起来更干净的解决方案。我担心这不是 OP 正在寻找的结果。

```
trait IsEmptyLike[F] {
  def isEmpty(fa: F): Boolean
}

object IsEmptyLike {

  implicit def case0[A](implicit ev: IsEmpty[({ type B[_] = A })#B]) =
    new IsEmptyLike[A] {
      def isEmpty(fa: A): Boolean = ev.isEmpty(fa)
    }
  implicit def case1[A[_], B](implicit ev: IsEmpty[A]) =
    new IsEmptyLike[A[B]] {
      def isEmpty(fa: A[B]): Boolean = ev.isEmpty(fa)
    }
  implicit def case2[A[_, _], B, C](implicit ev: IsEmpty[({ type D[X] = A[B, X] })#D]) =
    new IsEmptyLike[A[B, C]] {
      def isEmpty(fa: A[B, C]): Boolean = ev.isEmpty(fa)
    }
}

def asOption[C](c: C)(implicit ev: IsEmptyLike[C]) =
  if (ev.isEmpty(c)) None else Some(c) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T18:30:39.007

借助[`scalaz.Unapply`](https://github.com/scalaz/scalaz/blob/scalaz-seven/core/src/main/scala/scalaz/Unapply.scala)它可以编写`asOption`适用于许多不同类型（由 支持的类型`Unapply`）并且不需要任何额外的隐式转换的泛型：

```
import scalaz._
import Scalaz._

def asOption[MA](ma: MA)(implicit U: Unapply[IsEmpty, MA]): Option[MA] =
  if (U.TC.isEmpty(U(ma))) None else Some(ma)

asOption("")              //> res0: Option[String] = None
asOption("hello")         //> res1: Option[String] = Some(hello)

asOption(List[Int]())     //> res2: Option[List[Int]] = None
asOption(List(1,2))       //> res3: Option[List[Int]] = Some(List(1, 2))

asOption(Map[Int,Int]())  //> res4: Option[Map[Int,Int]] = None
asOption(Map(1 -> 2))     //> res5: Option[Map[Int,Int]] = Some(Map(1 -> 2)) 
```

这是`Unapply`'s 文档字符串的第一部分：

> 表示`MA`已被解构为`M[_]` 应用于类型的类型构造函数的类型`A`，以及相应的类型类实例`TC[M]`。
> 
> 伴随对象中的隐式转换提供了一种为部分应用的类型构造函数获取类型类实例的方法，以代替[SI-2712](https://issues.scala-lang.org/browse/SI-2712)中描述的直接编译器支持。

# css - CSS 屏幕分辨率

> ID：14924710
> 
> 赞同：0
> 
> 时间：2013-02-17T18:46:39.967
> 
> 标签：css, resolution

我正在开发一个网站，更具体地说，这个网站：[http](http://securitybreak.tk) ://securitybreak.tk 。问题是当我调整我的屏幕分辨率时，网页看起来与我构建的分辨率（1600x900）有很大不同。我尝试了很多东西，例如：

```
body{
width:100%;
} 
```

但这似乎不起作用！

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T18:57:50.517

您需要将 width 属性添加到要缩放的所有元素。不要将它添加到正文中，创建一个容器。然后找到其中的所有div。

我在此处添加代码以使其更易于阅读：

```
<style>
    #container
    {
        width: 100%;
    }
    #left
    {
        width: 50%;
        background: #123456;
        float: left;
    }
    #right
    {
        width: 50%;
        background: #654321;
        float: left;
    }
</style>

<div id="container">
    <div id="left">Left</div>
    <div id="right">Right</div>
</div> 
```

请注意，更改屏幕大小也会平滑地更改元素大小。

# python - 如何从文本文件中选择随机行

> ID：14924721
> 
> 赞同：10
> 
> 时间：2013-02-17T18:48:46.607
> 
> 标签：python, file, random, python-3.3

我正在尝试为我的学校制作一个彩票计划（我们有一个经济体系）。

我的程序生成数字并将其保存到文本文件中。当我想从我的发电机中“拉”出数字时，我希望它确保有赢家。

问：我如何让 Python 从我的文本文件中随机选择一行并将我的输出作为该数字给出？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-17T18:50:38.120

> 如何让 python 从我的文本文件中选择一个随机行并将我的输出作为该数字给出？

假设文件相对较小，以下可能是最简单的方法：

```
import random
line = random.choice(open('data.txt').readlines()) 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-18T22:52:54.727

如果文件非常大 - 您可以在给定文件大小的情况下寻找文件中的随机位置，然后获取下一个完整行：

```
import os, random 
def get_random_line(file_name):
    total_bytes = os.stat(file_name).st_size 
    random_point = random.randint(0, total_bytes)
    file = open(file_name)
    file.seek(random_point)
    file.readline() # skip this line to clear the partial line
    return file.readline() 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-02-23T13:41:42.940

```
def random_line():
    line_num = 0
    selected_line = ''
    with open(filename) as f:
        while 1:
            line = f.readline()
            if not line: break
            line_num += 1
            if random.uniform(0, line_num) < 1:
                selected_line = line
    return selected_line.strip() 
```

虽然这里给出的大多数方法都可以工作，但它们倾向于一次将整个文件加载到内存中。但不是这种方法。因此，即使文件很大，这也可以。

乍一看，这种方法不是很直观。这背后的定理表明，当我们看到 N 行时，到目前为止，它们中的每一个都被选中的概率恰好是 1/N。

[来自“Python Cookbook](https://books.google.co.in/books?id=yhfdQgq8JF4C&pg=PA124&lpg=PA124&dq=read%20a%20random%20line%20python&source=bl&ots=-7olyslO2Y&sig=WHKEGVUqxEB331u324r-RYUMVaA&hl=en&sa=X&ved=0ahUKEwiz7u-A4o3LAhVHUY4KHYz8Bp8Q6AEIYDAJ#v=onepage&q=read%20a%20random%20line%20python&f=false) ”的第 123 页

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-17T18:53:41.303

在我的头顶上：

```
import random
def pick_winner(self):
    lines = []
    with open("file.txt", "r") as f:
        lines = f.readlines();
    random_line_num = random.randrange(0, len(lines))
    return lines[random_lines_num] 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-17T19:07:48.163

对你的输入文件稍作修改（在第一行存储项目的数量），你可以统一选择一个数字，而不必先将整个文件读入内存。

```
import random
def choose_number( frame ):
    with open(fname, "r") as f:
        count = int(f.readline().strip())
        for line in f:
            if not random.randrange(0, count):
                return int(line.strip())
            count-=1 
```

假设你有 100 个数字。选择第一个数字的概率是 1/100。选择第二个数字的概率是 (99/100)(1/99) = 1/100。选择第三个数字的概率是 (99/100)(98/99)(1/98) = 1/100。我将跳过正式的证明，但选择 100 个数字中的任何一个的几率都是 1/100。

将计数存储在第一行中并不是绝对必要的，但它可以省去为了计算行数而必须读取整个文件的麻烦。无论哪种方式，您都不需要将整个文件存储在内存中以选择任何具有相同概率的单行。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-17T18:58:35.400

另一种方法：

```
import random, fileinput

text = None
for line in fileinput.input('data.txt'):
    if random.randrange(fileinput.lineno()) == 0:
        text = line
print text 
```

分配：

```
$ seq 1 10 > data.txt

# run for 100000 times
$ ./select.py > out.txt

$ wc -l out.txt 
100000 out.txt

$ sort out.txt | uniq -c
  10066 1
  10004 10
  10023 2
   9979 3
   9926 4
   9936 5
   9878 6
  10023 7
  10154 8
  10011 9 
```

我没有看到偏斜，但也许数据集太小了......

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-02-20T04:13:43.413

我看到了一个 python 教程并找到了这个片段：

```
def randomLine(filename):
#Retrieve a  random line from a file, reading through the file once
        fh = open("KEEP-IMPORANT.txt", "r")
        lineNum = 0
        it = ''

        while 1:
                aLine = fh.readline()
                lineNum = lineNum + 1
                if aLine != "":
                        #
                        # How likely is it that this is the last line of the file ? 
                        if random.uniform(0,lineNum)<1:
                                it = aLine
                else:
                        break
        nmsg=it
        return nmsg
        #this is suposed to be a var pull = randomLine(filename) 
```

# php - 处理用户对动态网页的输入

> ID：14924724
> 
> 赞同：0
> 
> 时间：2013-02-17T18:49:06.203
> 
> 标签：php, html

我的网页有一个问题，我想获取用户输入（文本/选择值和图片），然后将它们处理成一个新的 HTML 页面，该页面的标题与我已经有一个用于图片的 DragnDrop 区域中的相同，该区域将图片推送到/上传

当用户按下提交按钮时，一切都会发生。

```
<div id="container">

<div id="content-left">
<h1>Mbushi të dhënat për kontakt</h1>
<form>
    <label for="title">Title</label>
    <input type="text" name="title"><br>
  <label for="male">Sell</label>
  <input type="radio" name="option" id="male" value="male"><br>
  <label for="female">Buy</label>
  <input type="radio" name="option" id="female" value="female"><br><br>
  g
  <input type="submit" value="Submit">
</form>
    </div>

<div id="dropbox">
        <span class="message">Zhvendosni fotot këtu për ti ngarkuar.<br><i>Limiti 1mb për foto.</i></span>
</div> 
```

我对 PHP 有点陌生，我想如何将它处理成一个新的网页，每个网页都有预定义的样式。

我已将所有内容设置为 .php 网站。我只是想念这个来处理用户输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T18:52:06.347

```
<form action="WRITE_THE_PATH_TO_FILE_HERE.php" method="GET">
    <label for="title">Title</label>
    <input type="text" name="title"><br>
  <label for="male">Sell</label>
  <input type="radio" name="option" id="male" value="male"><br>
  <label for="female">Buy</label>
  <input type="radio" name="option" id="female" value="female"><br><br>

  <input type="submit" value="Submit">
</form> 
```

然后在 PHP 中检查传递给页面的内容

```
<?php

var_dump($_GET) ;

if (isset($_GET['title'], $_GET['option'])){
  echo "Title and option have been submitted" ;
}

?> 
```

# json - YouTube api 不会返回所有订阅

> ID：14924729
> 
> 赞同：0
> 
> 时间：2013-02-17T18:49:27.627
> 
> 标签：json, api, youtube-api

好的，所以我正在使用[https://gdata.youtube.com/feeds/api/users/default/subscriptions?alt=json&start-index=1&max-results=50&v=2.1](https://gdata.youtube.com/feeds/api/users/default/subscriptions?alt=json&start-index=1&max-results=50&v=2.1)

获取已登录用户的订阅。在第一次请求之后，我也会查看链接元素以获取所有其他订阅。在完成所有这些处理之后，我有时会得到奇怪的结果。90% 的时候一切正常。

在其他 10% 的时间里，我得到了重复的频道，这导致某些频道丢失了。

有没有办法解决这个问题？因为看起来这在 YouTube 方面是一个异常现象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T15:37:23.490

请用破碎的例子与我联系。

我还强烈建议使用 Data API v3 “ [https://developers.google.com/youtube/v3/docs/subscriptions/list](https://developers.google.com/youtube/v3/docs/subscriptions/list) ” 提供 'mine=true'

# r - R：通过数据框中另一个变量的唯一值计算变量的平均值？

> ID：14924731
> 
> 赞同：5
> 
> 时间：2013-02-17T18:49:29.710
> 
> 标签：r

我是 R 新手。我有一个如下所示的数据框：

```
Pupil ID     State      GPA
1            FL         3.9
2            TX         3.2
3            NY         2.2
4            AK         3.0
5            CO         2.4 
```

...等等。我想做的是创建一个新的数据框，如下所示：

```
State        Mean GPA     Number of pupils 
AL           2.91         23
AK           3.23         24 
```

等等。换句话说，我想找到状态的唯一值，并计算每个人的平均 GPA 和每个人的学生人数。

这在R中可能吗？我知道我可以`table(data$State)`得到唯一的状态和学生的数量，但我不知道如何计算状态的唯一值的平均值。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-17T18:55:53.293

执行此操作的许多方法之一：

```
x <- read.table(header=T, text="Pupil.ID     State      GPA
1            FL         3.9
2            TX         3.2
3            NY         2.2
4            AK         3.0
5            CO         2.4")

aggregate(GPA~State, data=x, FUN=function(x) c(mean=mean(x), count=length(x)))
##   State GPA.mean GPA.count
## 1    AK      3.0       1.0
## 2    CO      2.4       1.0
## 3    FL      3.9       1.0
## 4    NY      2.2       1.0
## 5    TX      3.2       1.0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-29T19:23:28.950

最好的方法是`group_by()`结合使用`summarise()`dplyr 包。如果 df 是您的数据框，

```
df %>%
   group_by(State) %>%
   summarise(mean_GPA = mean(GPA),
             number_of_pupils = n()) 
```

将为您提供每个独特州的平均 GPA 以及学生人数（行数）。

# c# - Signalr Connect 断开连接并重新连接

> ID：14924733
> 
> 赞同：3
> 
> 时间：2013-02-17T18:49:38.603
> 
> 标签：c#, asp.net-mvc, signalr

我想确保我为 SignalR 库正确实现了组功能。

我正在做的是允许用户为特定项目寻求帮助。启动项目的用户可以将其他用户添加到他们项目的协作表中。

```
Collaboration 
(
    UserID Uniqueidentifier,
    ProjectID INT
) 
```

如果任何一个用户进入协作模式，我想将该用户添加到一个组中，因此如果另一个用户登录并进入协作模式，他们将被添加到同一个组中。这些组始终命名为`ProjectID`.

因此，当用户登录并打开项目时，如果该项目在协作表中，我会将它们添加到`Groups.Add(Conext.ConnectionId,projID)`;

* * *

以下是我的问题：

当用户从客户端连接并调用 OnConnected 时，如果不存在具有 projID 的组，这会引发错误，还是信号器会即时创建该组？

```
 public override Task OnConnected(string projID)
    {
        return Groups.Add(this.Context.ConnectionId, projID);
    } 
```

当客户端关闭他们的浏览器时，是调用 OnDisconnected 的时候吗？如果该用户由于某种原因不在所述 projID 组中，这会抛出错误还是信号器会处理这个？

```
 public override Task OnConnected(string projID)
    {
        return Groups.Add(this.Context.ConnectionId, projID);
    } 
```

对于 OnReconnected，这是否意味着如果用户注销并执行其他操作然后重新登录，他们会自动添加回连接丢失之前所在的组？

```
 public override Task OnReconnected(string projID)
    {
        return Clients.Group(projID).rejoined(Context.ConnectionId,
            DateTime.Now.ToString());
    } 
```

对于上述所有方法，我是否需要调用每个覆盖方法的基本方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T08:29:52.767

1.  SignalR 将在您`Groups.Add()`第一次调用特定的`projID`. 它不会抛出错误。
2.  `OnDisconnected`每当连接消失时都会调用。如果您拨打电话`Stop()`，则断开连接并`OnDisconnected` 立即调用该方法。如果你只是关闭浏览器，该 `OnDisconnected`方法通常会在延迟大约 30 秒后被调用（有一个配置开关来控制这个）
3.  用户根据他们的连接 ID 绑定到特定组。如果用户返回时使用不同的连接 ID，则必须将其再次添加到相应的组中。您可以查看 SignalR 提供的 Chat 示例，了解如何处理此类情况。

# php - Twilio：验证身份验证令牌和帐户 SID

> ID：14924734
> 
> 赞同：0
> 
> 时间：2013-02-17T18:49:45.147
> 
> 标签：php, twilio

我正在开发一个脚本，用户可以在其中插入他们的 Twilio 帐户 SID 和身份验证令牌（基本上是用户名密码组合）。通过 Twilio REST API 发送 SMS 消息时使用这些凭据。如果凭据不正确，我会收到一个致命错误（这很糟糕..）。

如果用户服务器已启用`CURL`或`file_get_contents`启用，我可以对该用户帐户发出请求（`curl_init('https://' . $accountsid . ':' . $authtoken . '@api.twilio.com/2010-04-01/Accounts');)`并根据`http`响应代码验证凭据。

但是，问题并不在于所有服务器都具有`curl`或`file_get_contents`启用。因此，如果用户输入了错误的 Account SID 和/或 Auth Token，他们将在尝试发送消息时收到致命错误。

显然，您无法捕获和禁用 a `fatal error`，所以有什么想法可以在不使用`curl`or的情况下验证帐户凭据`file_get_contents`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T22:58:23.610

PHP 的流包装器 - [http://php.net/manual/en/wrappers.php.php](http://php.net/manual/en/wrappers.php.php) - 将允许您发出 HTTP 请求。在您的情况下，您可以使用 Account Sid 和 Auth Token 来请求诸如帐户信息之类的东西。如果你取回信息，你期望，你就完成了。如果没有，你适当地处理。

无论如何，您可以稍微简化流程。我们有一个名为 Twilio Connect 的工具，它*与*OAuth 类似，因为它们不向您提供凭据，它们只是授权您使用他们的帐户。AccountSid/AuthToken 从不共享。

这里有一些关于它的文档：http: [//www.twilio.com/docs/connect](http://www.twilio.com/docs/connect)

（披露：此处为 Twilio 员工。）

# dll - 如何从本机 dll 获取源代码？

> ID：14924735
> 
> 赞同：1
> 
> 时间：2013-02-17T18:49:57.400
> 
> 标签：dll, native, reflector

如何从本机 dll 获取源代码？使用反射器没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T18:56:13.930

你不能。

严格来说，您也无法使用 Reflector 获取*托管*dll 的源代码（例如，没有注释；如果它被混淆了，您也将看不到源代码）。.NET Reflector**非常**擅长反汇编 MSIL 代码。

您*可以* **反汇编**本机 dll，只是您不会喜欢它。例如，我正在尝试调试不是我的代码中的崩溃：

```
CPU Disasm
Address   Hex dump          Command                                  Comments
20C46D9B  |>  8B4424 14     |MOV EAX,DWORD PTR SS:[LOCAL.1]
20C46D9F  |.  8B40 10       |MOV EAX,DWORD PTR DS:[EAX+10]
20C46DA2  |.  83C0 08       |ADD EAX,8
20C46DA5  |>  8B08          |/MOV ECX,DWORD PTR DS:[EAX]
20C46DA7  |.  3B0F          ||CMP ECX,DWORD PTR DS:[EDI]             ; Crash with EDI=00000008
20C46DA9  |.  75 12         ||JNE SHORT 20C46DBD
20C46DAB  |.  83EE 04       ||SUB ESI,4
20C46DAE  |.  83C7 04       ||ADD EDI,4
20C46DB1  |.  83C0 04       ||ADD EAX,4
20C46DB4  |.  83FE 04       ||CMP ESI,4
20C46DB7  |.^ 73 EC         |\JAE SHORT 20C46DA5 
```

但是源代码？不。

# python - 如何向 python 2.6 添加新编码？

> ID：14924742
> 
> 赞同：4
> 
> 时间：2013-02-17T18:50:55.643
> 
> 标签：python, encoding, character-encoding, python-2.6

还有一个编码问题，我正在处理使用 IBM870 编码的 IBM 大型机，python 不支持该编码，或者没有其他任何东西。

[幸运的是，一位有天赋的编码人员编写了一个脚本，该脚本使用FileFormat.info](http://www.fileformat.info/info/charset/index.htm)上可用的字符列表为 python 生成适当的编码定义

使用的列表是这个：[IBM870 字符列表](http://www.fileformat.info/info/charset/IBM870/list.htm)

生成的编码可以在这里看到：[cp870.py](http://pastebin.com/TJpngqLb)

有问题的系统是运行 python 2.6 的 RHEL 6.3：

```
Python 2.6.6 (r266:84292, Aug 28 2012, 10:55:56) 
[GCC 4.4.6 20120305 (Red Hat 4.4.6-4)] on linux2 
```

cp870.py 放置在：

```
/usr/lib64/python2.6/encodings/ 
```

以下条目已添加到：

```
/usr/lib64/python2.6/encodings/aliases.py

# cp870 codec
'870'                : 'cp870',
'csibm870'           : 'cp870',
'ibm870'             : 'cp870', 
```

别名已正确解析，如此处所示（[感谢此答案](https://stackoverflow.com/a/1736533/164839)）：

```
>>> from encodings.aliases import aliases
>>> def find(q):
...     return [(k,v) for k, v in aliases.items() if q in k or q in v]
... 
>>> find('870')
[('ibm870', 'cp870'), ('870', 'cp870'), ('csibm870', 'cp870')]
>>> find('cp870')
[('ibm870', 'cp870'), ('870', 'cp870'), ('csibm870', 'cp870')]
>>> find('ibm870')
[('ibm870', 'cp870'), ('csibm870', 'cp870')] 
```

当我尝试 encode() 一些字符时，它没有按计划工作：

```
>>> 'c'.encode('cp870')
'\x83'
>>> 'č'.encode('cp870')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib64/python2.6/encodings/cp870.py", line 12, in encode
    return codecs.charmap_encode(input,errors,encoding_table)
UnicodeDecodeError: 'ascii' codec can't decode byte 0xc4 in position 0: ordinal not in range(128) 
```

这是 '\x83' 根据 cp870.py 应该是什么：

```
u'\x83'     #  0x23 -> NO BREAK HERE (U+0083) 
```

由于我是python的新手，有人可以告诉我还需要什么才能让python正确加载和使用这种编码吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T21:12:29.007

在 Python 2.x 中，unicode 字符串需要使用前缀**u**或**U**进行标记。不带前缀的字符串采用 ASCII（或其他 8 位编码）。

此外，python 期望您的输入是 ASCII 编码的（尽管可以配置另一种编码）。因此，当您将非 ASCII 字符放在引号中时，解释器会尝试将其解码为 ASCII，这会导致您看到的错误。

因此，您需要指定**u**前缀，并使用**转义序列**来指定字符：

```
U'\x83'.encode('cp870') 
```

# objective-c - 为什么我的基础课不起作用？

> ID：14924750
> 
> 赞同：-1
> 
> 时间：2013-02-17T18:51:43.640
> 
> 标签：objective-c

这真让我抓狂。我有一堂课：

```
@interface qanda : NSObject

@property (nonatomic, copy) NSString *quote;
@property (nonatomic, copy) NSString *author;

@end 
```

是的，我确实在另一个文件中合成了它们。

然后在我的 Viewdidload 文件中声明了一些对象。

```
- (void)viewDidLoad
{
    qanda *qanda1 = [[qanda alloc] init];
    qanda1.quote = @"All our dreams can come true – if we have the courage to pursue          them. ";
    qanda1.author = @"Walt Disney";
} 
```

我的 ViewDidLoad 文件有一个简短的摘录。

但是，当我尝试访问该对象的字符串时，我得到一个错误，我不知道为什么。

```
self.quote.text = qanda.quote;` 
```

（顺便说一句，引用是一个出口）我得到的错误是：“使用未声明的标识符'qanda1'；你的意思是'qanda'吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T19:09:47.073

从我在这里看到的情况来看，您`qanda *qanda1`仅限于`viewDidLoad`方法。一旦该方法返回，`qanda1`就不再存在。

在视图控制器的头文件中，为`qanda1`.

```
@class Qanda;    
@interface MyViewController : UIViewController
    .
    .
    .
@property Qanda *qanda1;
@end 
```

在实现文件“MyViewController.m) 中：

```
#import "Qanda.h"

@implementation MyViewController
.
.
.
-(void)viewDidLoad {
    Qanda *qanda1 = [[Qanda alloc] init];
    qanda1.quote = @"All our dreams can come true – if we have the courage to pursue          them. ";
    qanda1.author = @"Walt Disney";
}

.
.
.
@end 
```

这样，您可以在`qanda1`整个生命周期中访问`MyViewController`. 您现在可以在被调用`self.quote.text = qanda1.quote;`后的任何时间执行您的操作。`viewDidLoad`

我建议阅读变量范围（[这里是 SO 的一个很好的起点](https://stackoverflow.com/a/11751099/620197)），以便您完全了解这里发生的事情。

**更新**

正如对您的问题的评论中提到的，遵循一些基本的命名约定可能有助于区分实例变量和类名。（对于[Objective C](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CodingGuidelines/Articles/NamingBasics.html#//apple_ref/doc/uid/20001281-BBCHBFAH)，但大多数语言都遵循相同的，如果不是相似的模式）。

按照通常的约定，您的“qanda”类将如下所示：

```
@interface Qanda : NSObject

@property (nonatomic, copy) NSString *quote;
@property (nonatomic, copy) NSString *author;

@end 
```

# c# - 两次变换 Model3DGroup

> ID：14924756
> 
> 赞同：3
> 
> 时间：2013-02-17T18:52:32.813
> 
> 标签：c#, wpf

我需要转换 Model3DGroup 两次（一次设置位置，一次设置旋转）。我试过这个：

```
var model = ModelImporter.Load(gameAssetPath);
model.Transform = new TranslateTransform3D(
        placedObject.SpawnCoordinates.X,
        placedObject.SpawnCoordinates.Y,
        placedObject.SpawnCoordinates.Z);
var modelRotation = new Model3DGroup();
modelRotation.Children.Add(model);
modelRotation.Transform = new RotateTransform3D(new AxisAngleRotation3D(), placedObject.SpawnCoordinates.Roll, placedObject.SpawnCoordinates.Pitch, placedObject.SpawnCoordinates.Yaw); 
```

那是不行的。我在谷歌和 SO 上搜索过，似乎找不到任何东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T18:56:24.747

为此，您需要[TransformGroup](http://msdn.microsoft.com/en-us/library/system.windows.media.transformgroup.aspx)类。

该课程将结合您的转换。

```
var model = ModelImporter.Load(gameAssetPath);
var modelRotation = new Model3DGroup();
modelRotation.Children.Add(model);
var t1 = new TranslateTransform3D(
        placedObject.SpawnCoordinates.X,
        placedObject.SpawnCoordinates.Y,
        placedObject.SpawnCoordinates.Z);
var t2 = new RotateTransform3D(
         new AxisAngleRotation3D(), 
        placedObject.SpawnCoordinates.Roll, 
        placedObject.SpawnCoordinates.Pitch, 
        placedObject.SpawnCoordinates.Yaw);
var tg = new TransformGroup();
tg.Children.Add(t1);
tg.Children.Add(t2);
modelRotation.Transform = tg; 
```

# windows - EasyPHP 和 Windows 8 端口 127.0.0.1 问题

> ID：14924760
> 
> 赞同：1
> 
> 时间：2013-02-17T18:52:50.613
> 
> 标签：windows, easyphp

我刚刚在我的 Win8 笔记本电脑上安装了 EasyPHP，但我无法打开 EasyPHP Administration。

我在网上检查了一些解决方案，但没有成功。我尝试将 httpd.config 从 127.0.0.1:80 更新为 127.0.0.1:8080 和 127.0.0.1:8001，然后什么也没有。

当我安装时，我可以使用 www 文件夹的内容打开本地网络。

这个问题的解决方案是什么？如何在 EasyPHP 中运行管理选项卡？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T23:18:14.713

我有一个类似的问题，你需要做的是以管理员身份运行 easyPHP。由于您正在运行 Windows 8，这就是方法。

**第 1 步：**在您的平铺屏幕上找到 easyPHP
**第 2 步：**右键单击它，下面会弹出一个菜单栏。
**第三步：**选择“以管理员身份运行”

这应该能搞定，如果没有，请告诉我。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T11:38:40.110

Tried stuff above, no luck. Bottom line:

*   Could not get it work in IE10, Metro or desktop version of the browser.
*   Got to 127.0.0.1 in Chrome and Firefox (This is Local Web)
*   From Local Web I can click on the home icon and get to Administration
*   Works Run as Administrator or not

I do need to add, it ain't going to win any performance issues

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T21:11:05.833

I had the same issue. May have something to do with IPv6 being the default on Windows 8.

In the end, I installed XAMPP instead, this appears to just work. That installation does have a minor difference in the apache .conf file: Listen 80 instead of Listen 127.0.0.1:80

I don't think this is the full solution for EasyPHP though, as I tried that change.

# ruby-on-rails - 使用更好的 ActiveRecord 命令和数组、哈希在 Rails 中保持代码干燥？

> ID：14924761
> 
> 赞同：0
> 
> 时间：2013-02-17T18:52:53.340
> 
> 标签：ruby-on-rails, ruby, rails-activerecord

让我们看一下当前的代码，它可以工作，但不是[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)！

```
def create_key_performance_indicators
  organization_aco = Organization.find_by_name('ACO').id
  KeyPerformanceIndicator.where(name: 'ED Visits per 1,000').first_or_create(
    target: 100,
    organization_id: organization_aco
  )
  KeyPerformanceIndicator.where(name: 'Average Length of Stay').first_or_create(
    target: 5,
    organization_id: organization_aco
  )
  KeyPerformanceIndicator.where(name: 'Admits per 1,000').first_or_create(
    target: 100,
    organization_id: organization_aco
  )
end 
```

所以有一个名为**KeyPerformanceIndicators**的表，它有一个外键，其中包含 Organization_id 字段到**组织**表。

首先要清理的是命令的三次复制粘贴`KeyPerformanceIndictor.where`，也许我们可以以某种方式将这些值放入数组或哈希等中......然后在这个方法中循环它们。但是我对所有这些语言和语法都很陌生，我怎样才能做到这一点？或者，如果您有更好的想法来实现这一切，我们都非常欢迎和赞赏:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T19:17:33.170

请看一下这个要点：[https ://gist.github.com/cthulhu666/4972937](https://gist.github.com/cthulhu666/4972937)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T19:29:48.413

怎么样...

```
def create_key_performance_indicators
  organization_aco = Organization.find_by_name('ACO').id
  [
    [ 'ED Visits per 1,000'    , 100 ] ,
    [ 'Average Length of Stay' , 5   ] ,
    [ 'Admits per 1,000'       , 100 ]
  ].each do |name, target|
      KeyPerformanceIndicator.where(name: name).first_or_create(
        target: target,
        organization_id: organization_aco
      )
  end
end 
```

# c# - 如何在 ASP.NET MVC4 (Razor) 中设置 TinyMCE 编辑器的初始内容？

> ID：14924763
> 
> 赞同：1
> 
> 时间：2013-02-17T18:53:14.110
> 
> 标签：c#, .net, asp.net-mvc-4, tinymce

我已经按照[本教程](http://www.tugberkugurlu.com/archive/tinymce-html-text-editior-and-asp-net-mvc-setting-it-up-has-become-easy-with-nuget)通过 nuget 获取 TinyMCE 并在 MVC4 中将其与 Razor 一起使用。

一切正常，但是当我的表单加载时，我需要在 TinyMCE 控件中放置一些默认文本。

我怎么做？

对我来说，问题是我正在使用 Razor（我通常不这样做）并且所有内容都是抽象的（例如`@Html.EditorFor(m => m.Message)`）。我在 TinyMCE 中看不到任何“挂钩”，可以让我在页面呈现之前设置内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T19:39:59.843

整理好——您必须在控制器中设置值。因此，如果您认为：

```
 @Html.LabelFor(m => m.Message)
                @Html.EditorFor(m => m.Message) 
```

然后你需要在你的控制器中：

```
 public ActionResult Index()
        {
            var someValue = "foo"; //Get your data here
            var model = new CorporateAccountModel {Message = someValue};
            return View(model);
        } 
```

而已。视图中不需要额外的编码，这让我有点不舒服，但很有效。

# google-app-engine - 在 Go 中自动包含来自数据存储区的 ID

> ID：14924765
> 
> 赞同：1
> 
> 时间：2013-02-17T18:53:16.400
> 
> 标签：google-app-engine, google-cloud-datastore, go

我在 App Engine 上使用 Go。我正在从 App Engine 数据存储区加载结构数据。目前我必须在从数据存储区加载对象后从键中获取对象 ID，然后将其分配给对象。在 App Engine 管理面板中，我可以在使用数据存储查看器时看到密钥和 ID 值。

我可以自动将密钥或数字 ID 作为属性从数据存储包含到加载的对象吗？（使用或不使用 PropertyLoader 接口）。

这样我就不必总是在查询之后通过从给定的键解析它来包含它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T23:37:26.410

我相信简短的回答是“不”，没有任何规定`appengine/datastore`可以自动发生。请参阅[此组主题](https://groups.google.com/forum/?fromgroups=#!topic/google-appengine-go/ghfvPvFvdTk)。

# c# - 在 iframe 中打开 pdf

> ID：14924766
> 
> 赞同：2
> 
> 时间：2013-02-17T18:53:19.710
> 
> 标签：c#, asp.net, pdf, iframe

我想在 asp.net 页面内的 inframe 中打开 PDF 文件。我试过这个

```
<iframe src="http://samplepdf.com/sample.pdf" width="400px" height="300px"  /> 
```

这工作正常。

但是，当我将路径更改为 PDF 文件时，如下所示

```
<iframe id ="myframe" src=@"C:\Book.pdf" width="400px" height="300px"  runat="server"/> 
```

框架内不显示任何内容。

我尝试在 CodeBehind 中更改路径如下

```
myframe.Attributes.Add("src", @"C:\Book.pdf"); 
```

但是 pdf 文件没有在 iframe 中打开。什么是问题？有人知道解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T18:54:59.417

HTML 无法与本地磁盘上的文件路径交互。

您需要使用 Web 服务器中的路径来引用 PDF 文件。

# php - 通过带有问号 (?) 的 url 传递值在移动设备中不起作用

> ID：14924767
> 
> 赞同：0
> 
> 时间：2013-02-17T18:53:20.470
> 
> 标签：php, url, redirect

我有一个通过 url 获取价值并重定向到其他网页的页面。网址看起来像：

[http://www.mywebsite.com/offer.php?email_id=abcd@yahoo.com&offer_id=1](http://www.mywebsite.com/offer.php?email_id=abcd@yahoo.com&offer_id=1)

现在 offer.php 获取 email_id 和 offer_id 并将其重定向到其他网页；例如[http://www.abcdef.com](http://www.abcdef.com)。

该网址在桌面网络浏览器和我的安卓手机中运行良好。但在 symbian 浏览器和 iphone 浏览器中，它只是显示 url 未找到！

谁能建议我一种可以克服这个问题的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T21:00:24.140

@AnteOmnio 链接在我的笔记本电脑上不起作用，只是显示一个空白页。请在您的所有设备上尝试以下链接并告诉我结果，这是一个简单的测试，看看网络/设备/代码是否有问题

以下链接的代码是：

```
<?php

echo "Welcome To Test Offer Page<br><br>";

if(!$_GET){
    echo "I have no details of who you are!";
}else{
    echo "Your Email ID is <b>".$_GET["email_id"]."</b> and you're Offer ID id <b>".$_GET["offer_id"]."</b>";
} 
```

[http://clients.nishantarora.in/projects/AnteOmnio/offer.php?email_id=anteomnio@yahoo.com&offer_id=1](http://clients.nishantarora.in/projects/AnteOmnio/offer.php?email_id=anteomnio@yahoo.com&offer_id=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T19:17:45.233

您正在使用 java-script 来重定向在移动设备上存在一系列问题的用户，而不是您应该使用服务器端重定向。

`header('Location: '.$url);`

使用标头重定向时，请确保之前没有输出（甚至没有空格或新行），否则它将不起作用

# java - 使用 Java 对 mysql 数据库进行简单备份和恢复

> ID：14924770
> 
> 赞同：21
> 
> 时间：2013-02-17T18:53:56.677
> 
> 标签：java, mysql, database, backup, restore

如何从 java 代码备份 mysql 数据库，例如：

1.  它的保存路径是动态分配的。
2.  Path 中的空格不会产生问题。
3.  路径是使用执行的 jar 文件生成的。
4.  DBname、DBusername 或 DBpass 是动态分配的。
5.  创建一个专门的文件夹来保存备份文件。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-17T18:53:56.677

**注意：下面给出的代码是解决问题的一种方法，可能不是最好的方法。代码中的一切都是可变的。如果环境变量中没有mysql，则在mysqldump和mysql之前添加路径（例如对于XAMPP，C:\xampp\mysql\bin\mysqldump）**

（希望这能解决您的问题。我花了一天时间完全弄清楚所有事情并正确实施它们）

**备份方法：**

```
public static void Backupdbtosql() {
    try {

        /*NOTE: Getting path to the Jar file being executed*/
        /*NOTE: YourImplementingClass-> replace with the class executing the code*/
        CodeSource codeSource = YourImplementingClass.class.getProtectionDomain().getCodeSource();
        File jarFile = new File(codeSource.getLocation().toURI().getPath());
        String jarDir = jarFile.getParentFile().getPath();

        /*NOTE: Creating Database Constraints*/
        String dbName = "YourDBName";
        String dbUser = "YourUserName";
        String dbPass = "YourUserPassword";

        /*NOTE: Creating Path Constraints for folder saving*/
        /*NOTE: Here the backup folder is created for saving inside it*/
        String folderPath = jarDir + "\\backup";

        /*NOTE: Creating Folder if it does not exist*/
        File f1 = new File(folderPath);
        f1.mkdir();

        /*NOTE: Creating Path Constraints for backup saving*/
        /*NOTE: Here the backup is saved in a folder called backup with the name backup.sql*/
         String savePath = "\"" + jarDir + "\\backup\\" + "backup.sql\"";

        /*NOTE: Used to create a cmd command*/
        String executeCmd = "mysqldump -u" + dbUser + " -p" + dbPass + " --database " + dbName + " -r " + savePath;

        /*NOTE: Executing the command here*/
        Process runtimeProcess = Runtime.getRuntime().exec(executeCmd);
        int processComplete = runtimeProcess.waitFor();

        /*NOTE: processComplete=0 if correctly executed, will contain other values if not*/
        if (processComplete == 0) {
            System.out.println("Backup Complete");
        } else {
            System.out.println("Backup Failure");
        }

    } catch (URISyntaxException | IOException | InterruptedException ex) {
        JOptionPane.showMessageDialog(null, "Error at Backuprestore" + ex.getMessage());
    }
} 
```

**还原方法：**

```
public static void Restoredbfromsql(String s) {
        try {
            /*NOTE: String s is the mysql file name including the .sql in its name*/
            /*NOTE: Getting path to the Jar file being executed*/
            /*NOTE: YourImplementingClass-> replace with the class executing the code*/
            CodeSource codeSource = YourImplementingClass.class.getProtectionDomain().getCodeSource();
            File jarFile = new File(codeSource.getLocation().toURI().getPath());
            String jarDir = jarFile.getParentFile().getPath();

            /*NOTE: Creating Database Constraints*/
             String dbName = "YourDBName";
             String dbUser = "YourUserName";
             String dbPass = "YourUserPassword";

            /*NOTE: Creating Path Constraints for restoring*/
            String restorePath = jarDir + "\\backup" + "\\" + s;

            /*NOTE: Used to create a cmd command*/
            /*NOTE: Do not create a single large string, this will cause buffer locking, use string array*/
            String[] executeCmd = new String[]{"mysql", dbName, "-u" + dbUser, "-p" + dbPass, "-e", " source " + restorePath};

            /*NOTE: processComplete=0 if correctly executed, will contain other values if not*/
            Process runtimeProcess = Runtime.getRuntime().exec(executeCmd);
            int processComplete = runtimeProcess.waitFor();

            /*NOTE: processComplete=0 if correctly executed, will contain other values if not*/
            if (processComplete == 0) {
                JOptionPane.showMessageDialog(null, "Successfully restored from SQL : " + s);
            } else {
                JOptionPane.showMessageDialog(null, "Error at restoring");
            }

        } catch (URISyntaxException | IOException | InterruptedException | HeadlessException ex) {
            JOptionPane.showMessageDialog(null, "Error at Restoredbfromsql" + ex.getMessage());
        }

    } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-17T19:14:13.370

如果[Hibernate](http://hibernate.org)配置正确，这是小菜一碟：

```
Session session = HibernateUtil.getSessionFactory().openSession();
// for every table, have the bean implement Serializable and use the next 4 lines
List <TblBean> tblCollection = session.createCriteria(TblBean.class).list();
FileOutputStream backup = new FileOutputStream("backupOf"+TblBean.getClass().getName()+".dat");
ObjectOutputStream backupWriter = new ObjectOutputStream(backup);
backupWriter.write(tblCollection); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-24T07:00:40.047

```
public static String getData(String host, String port, String user, String password, String db,String table) throws Exception {

    //an "C:/xampp/mysql/bin/mysqldump" ---- location ito han mysqldump

    Process run = Runtime.getRuntime().exec(
            "C:/xampp/mysql/bin/mysqldump --host="  + host + " --port=" + port + 
            " --user=" + user + " --password=" + password +
            " --compact --databases --add-drop-table --complete-insert --extended-insert " +
            "--skip-comments --skip-triggers "+ db+" --tables "+table);

    InputStream in = run.getInputStream(); 
    BufferedReader br = new BufferedReader(new InputStreamReader(in));
    StringBuffer temp = new StringBuffer();
    int count;
    char[] cbuf = new char[BUFFER];

    while ((count = br.read(cbuf, 0, BUFFER)) != -1)
        temp.append(cbuf, 0, count);

    br.close();
    in.close();

    return temp.toString();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-08T04:42:58.667

除了 chettyharish 的回答，如果您的服务器操作系统是 ubuntu，则路径应该有前斜杠“/”而不是反斜杠“\”，例如`/path/to/your/file`

例如：`String savePath = "\"" + jarDir + "\\backup\\" + "backup.sql\"";`

将会 ：`String savePath="/"+jarDir+"/backup/backup.sql"`

# sentiment-analysis - 情绪分析

> ID：14924772
> 
> 赞同：7
> 
> 时间：2013-02-17T18:54:11.747
> 
> 标签：sentiment-analysis

在执行情绪分析时，如何让机器理解我指的是苹果（iphone），而不是苹果（水果）？

感谢您的建议！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T19:05:40.393

嗯，有几种方法，

我会从检查大写字母开始，通常，当提到一个名字时，第一个字母是大写的。

在进行情感分析之前，我会使用一些词性和命名实体识别来标记相关的词。

[斯坦福 CoreNLP](http://nlp.stanford.edu/software/CRF-NER.shtml#Download)是一个很好的文本分析项目，它将教你基本概念。

来自 CoreNLP 的示例：

![在此处输入图像描述](../Images/7fd45e5156f2ad57d2da11f8c0bec6c2.png)

您可以看到标签如何帮助您。

并查看[更多信息](https://stackoverflow.com/questions/6893858/how-i-classify-an-word-of-a-text-in-things-like-names-number-money-date-etc)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-04-13T13:06:51.080

正如 Ofiris 所述，NER 只是解决问题的一种方法。我觉得用词嵌入来表示你的词更有效。这样，机器会自动识别单词的上下文。例如，“Apple”主要与“eat”一起出现，但是如果给定的输入“Apple”与“mobile”或该域中的任何其他词一起出现，机器将理解它是“iPhone apple”而不是“apple fruit” ”。有 2 种流行的方法来生成词嵌入，例如 word2vec 和 fasttext。Gensim 为 word2vec 和 fasttext 提供了更可靠的实现。

[https://radimrehurek.com/gensim/models/word2vec.html](https://radimrehurek.com/gensim/models/word2vec.html) [https://radimrehurek.com/gensim/models/fasttext.html](https://radimrehurek.com/gensim/models/fasttext.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-13T13:17:01.273

许多开源预训练的 NER 模型已经解决了这个问题。无论如何，您可以尝试重新训练现有的 NER 模型以对其进行微调以解决此问题。[您可以在此处](https://explosion.ai/demos/displacy-ent)找到 Spacy NER 所做的 NER 结果演示。

[![在此处输入图像描述](../Images/55ad587d67b086fd3cbe77e52bd5ff47.png)](https://i.stack.imgur.com/YGSCt.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-15T15:48:25.493

如果存在日期、知名品牌、vip 或历史人物，您可以使用 NER（命名实体识别）算法；在这种情况下，正如 Ofiris 所建议的，Stanford CoreNLP 提供了一个很好的命名实体识别器。

对于多义词的更一般的消歧（即，具有多个意义的词，例如“好”），您可以使用与词义消歧 (WSD) 算法相结合的词性标注器。可以在[此处](https://www.scopus.com/record/display.uri?eid=2-s2.0-84959468291&origin=AuthorNamesList&txGid=1D9DC7C71B8F7FA6EB1D05F266F59DBB.wsnAw8kcdt7IPYLO0V48gA%3a5&isdataSearchEnable=false&dataSearchDocumentCount=0)找到后者的示例，但我不知道为此目的有任何可免费下载的库。

# java - Java 计数器循环

> ID：14924773
> 
> 赞同：0
> 
> 时间：2013-02-17T18:54:18.210
> 
> 标签：java

我对编程非常陌生，并试图掌握如何在 Java 中倒计时的想法。

我想运行一个程序，要求您以这种形式输入 5 首歌曲：

```
Please enter song 1: "Thriller"
Choose 4 more songs. 
```

所以我从 5 倒数到 1，我能得到一些关于如何做到这一点的想法吗？这是我在下面的糟糕尝试，但请注意我的计数器会增加（这不是我想要的）。

```
import java.util.Scanner;

public class testing {  
    public static void main(String[] args) {
        String song;
        int amount = 0;
        Scanner kdb = new Scanner(System.in);
        while (amount < 5) {
            System.out.println("enter song:");
            song = kdb.next();
            amount++;
            System.out.println("you chose " + song + amount + " more required");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T18:59:56.163

更改`amount++`（与 相同`amount = amount + 1`）。它应该是`amount--`（与 相同`amount = amount - 1`）。

重写程序（带`for`循环）：

```
import java.util.Scanner;

public class Test {
    public static void main(String... args) {
        String song;
        Scanner kdb = new Scanner(System.in);
        for (int amount = 5; amount > 0; amount--) {
            System.out.println("Enter song:");
            song = kdb.next();
            System.out.println("You chose " + song + ". Choose" + amount + " more");
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T19:06:26.607

这就是我的做法，

```
 public static void main(String[] args) {
        // TODO Auto-generated method stub
        String song;
        int amount = 1;
        Scanner kdb = new Scanner(System.in);
        while (amount <= 5) {
            System.out.println("enter song:");
            song = kdb.next();
            if(amount<5){
            System.out.println("you chose " + song + amount + " more required");
            }
            ++amount;
        }

    } 
```

# kendo-ui - iframe 模式下的剑道窗口：未从服务器请求 URL

> ID：14924775
> 
> 赞同：2
> 
> 时间：2013-02-17T18:54:25.820
> 
> 标签：kendo-ui

我认为以下是有效的配置：

```
 var wdiv = $("#messagewindow");
    if (!wdiv.data("kendoWindow")) {
        wdiv.kendoWindow({ 
            iframe: true,
            width: "777px",
            height: "666px",               
            title:  "foo title",           
            data: { startdate: urldate, eeid: eeid, deptid: deptid },
            url: "foo.htm",
            type: "GET"
        });
    }     

    wdiv.data("kendoWindow").open(); 
```

窗口打开，但没有网络活动。 根据 Fiddler，**没有从服务器请求 Foo.htm 。**

我是否忽略了配置中的某些内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T20:10:42.010

创建时没有url之类的东西。

[http://jsbin.com/umuzil/1/edit](http://jsbin.com/umuzil/1/edit)

您寻找的内容称为内容。[刷新](http://docs.kendoui.com/api/web/window#refresh)窗口时使用 URL 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T20:01:55.123

指定 url 的选项是`content`. 文档在[这里](http://docs.kendoui.com/api/web/window#content-objectstring)。

# c - 如何将标准输入扫描到可变数量的流中

> ID：14924776
> 
> 赞同：0
> 
> 时间：2013-02-17T18:54:30.143
> 
> 标签：c, scanf

我想扫描`stdin`到可变数量的 char 数组。像这样的东西：

```
char words1[num][100];    //num passed as command line argument
i = 0;
for (i = 0; i < num; ++i)
{
    While (fscanf(stdin, "%s %s %s ...", words[i], words[i + 1], word[i + 2] ...) != EOF)
    {
         fprintf(outFileStream, "%s", words[i];
    }
} 
```

目标是拆分`stdin`为`num`多个文件流，以供多个进程对文件进行排序。我想也许`vfscanf`会有所帮助，但您仍然需要知道要发送多少个格式说明符。我想我可以 for 循环并与 a 一起`strcat(format, " %s")`使用？有人可以举个例子吗？`vfscanf``va_list`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T21:22:41.153

如果我正确理解您的问题，我认为您不需要复杂的`fscanf`格式，而只需一次读取一个字符串。也就是说，您可以使用以下内容：

```
#include <stdio.h>

int main (int argc, char** argv) {
    int num = atoi(argv[1]);
    char words[num][100];
    int i = 0;
    while (fscanf(stdin,"%s",words[i]) > 0) { 
       fprintf(stdout,"Stream %d: %s\n",i,words[i]);
       i = (i + 1 ) % num;
    }
} 
```

给定一个输入文件`texta.txt`如下：

```
a
b
c
d
e
f
g
h
i
j
k
l
m
n 
```

...然后上面的程序将给出：

```
$ ./nstream 4 <texta.txt
Stream 0: a
Stream 1: b
Stream 2: c
Stream 3: d
Stream 0: e
Stream 1: f
Stream 2: g
Stream 3: h
Stream 0: i
Stream 1: j
Stream 2: k
Stream 3: l
Stream 0: m
Stream 1: n 
```

# ruby - 当 object#initialize 重载时，与 Ruby 中的 IRB 输出混淆

> ID：14924777
> 
> 赞同：1
> 
> 时间：2013-02-17T18:54:30.890
> 
> 标签：ruby, ruby-1.9.3

当没有为类定义提供“初始化”方法时，我实际上试图查看的内容，然后您所说的类应该调用`"Object#initialize"`，在这里我尝试自定义并查看它是否已被调用。通过这种方法，我得出了一个结论（尽管这是错误的），当我输入“ob = A .new”时，是的，我可以重载该方法。但是`Object#initialize`一切都以以下异常结束。然后我认为我在自定义中做错了。所以我尝试在异常块中创建对象，当我输入“开始”并按下“ENTER”时 - 我得到了同样的错误。

```
>>  class A
>>  def Object.new initialize
>>   p "hi"
>>   rescue
>>  end
>>  end
=> nil
>>  begin # <~~~ Here I have pressed on ENTER
"hi"  #<~~~~ How was it print out?
/usr/lib/ruby/1.9.1/irb/ruby-token.rb:94:in `Token': undefined method `set_backtrace' for "hi":String (NoMethodError)
    from /usr/lib/ruby/1.9.1/irb/ruby-lex.rb:348:in `block in lex_init'
    from /usr/lib/ruby/1.9.1/irb/slex.rb:236:in `call'
    from /usr/lib/ruby/1.9.1/irb/slex.rb:236:in `match_io'
    from /usr/lib/ruby/1.9.1/irb/slex.rb:221:in `match_io'
    from /usr/lib/ruby/1.9.1/irb/slex.rb:75:in `match'
    from /usr/lib/ruby/1.9.1/irb/ruby-lex.rb:286:in `token'
    from /usr/lib/ruby/1.9.1/irb/ruby-lex.rb:262:in `lex'
    from /usr/lib/ruby/1.9.1/irb/ruby-lex.rb:233:in `block (2 levels) in each_top_level_statement'
    from /usr/lib/ruby/1.9.1/irb/ruby-lex.rb:229:in `loop'
    from /usr/lib/ruby/1.9.1/irb/ruby-lex.rb:229:in `block in each_top_level_statement'
    from /usr/lib/ruby/1.9.1/irb/ruby-lex.rb:228:in `catch'
    from /usr/lib/ruby/1.9.1/irb/ruby-lex.rb:228:in `each_top_level_statement'
    from /usr/lib/ruby/1.9.1/irb.rb:155:in `eval_input'
    from /usr/lib/ruby/1.9.1/irb.rb:70:in `block in start'
    from /usr/lib/ruby/1.9.1/irb.rb:69:in `catch'
    from /usr/lib/ruby/1.9.1/irb.rb:69:in `start'
    from /usr/bin/irb:12:in `<main>'
@ubuntu:~$ 
```

***现在我的问题是***——

*   “嗨”是如何打印的？

*   上面打印的错误的原因是什么？

*   如果`initialize`不允许这样的定义，那么为什么在我结束类定义后没有出现错误？

**编辑**

根据@casper，我在下面尝试过：

```
>> def Object.new
>> p "hi"
>> end
=> nil
>> begin
/usr/lib/ruby/1.9.1/irb/ruby-token.rb:96: stack level too deep (SystemStackError) 
```

但是这里没有`"hi"`打印回来。

那么是什么让“hi”在第一种情况下打印回来？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T20:25:46.750

你到底想做什么？你刚刚重新定义了`Object.new`，所以你让一切变得混乱也就不足为奇了。

您基本上可以通过以下方式获得相同的效果：

```
>> def Object.new
>> end
>> [press enter]
KABOOM 
```

打印的原因`"hi"`是有人刚刚调用`Object.new`了 ，可能是`irb`REPL 循环，它期望一个对象，但它却得到了 gobledygook。

你也可以试试这个：

```
def Object.new *args
  p args
end 
```

你会看到有趣的东西。但是，在那之后您将无法退出 irb 或对其进行任何有用的操作。再说一遍：你刚刚破产了`Object`。

为了理解它，您应该阅读以下内容：
[在 Ruby 中，“new”和“initialize”之间的关系是什么？初始化时如何返回零？](https://stackoverflow.com/questions/10383535/in-ruby-whats-the-relationship-between-new-and-initialize-how-to-return-n)

然后你可以试试这个：

```
class Object
  class << self
    alias :old_new :new
  end
end 
```

现在你可以这样做：

```
def Object.new *args
   p args
   old_new *args
end 
```

这不会中断`new`，因为您仍在调用它的旧版本。但是，您现在每次有人打电话时都会打印出东西`new`。

# php - MYSQL 行数据不会在 HTML 表单字段中回显/显示

> ID：14924780
> 
> 赞同：0
> 
> 时间：2013-02-17T18:54:44.110
> 
> 标签：php, html, mysql, forms

我的部分任务是创建一个表单以通过 HTML 表单更新特定的行数据。我已经成功地从 mysql 数据库中检索了行数据，但是当我尝试在 html 表单的字段中显示特定的行数据（StudentNumber、FirstName、LastName 等）时，它只显示空字段。我可能错过了什么？

这是显示表单的 php 页面的编码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"> 
<head> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
<title>updating data record</title>
</head> 
<body>

<?php
//connect to the database
  $conn = mysql_connect('localhost', 'root', '');
    if (!$conn) {
    die('Not connected : ' . mysql_error());
}   
    $db_selected = mysql_select_db('ccm3413', $conn);
    mysql_set_charset("utf8",$conn);
    $id = $_GET['id'];

    $result = mysql_query("SELECT * FROM studentinfo WHERE recordID = '$id'");
    while ($row = mysql_fetch_assoc($result)) {
    }

?>

<form id="form1" name="form1" method="post" action="processUpdateRecord.php"> 
  <p> 
    <label>Student Number: 
      <input name="StudentNumber" type="text" id="StudentNumber" size="10" value="<?php echo $row['StudentNumber']; ?>"/> 
    </label> 
  </p> 
  <p> 
    <label>First Name: 
      <input name="FirstName" type="text" id="FirstName" size="20" value="<?php echo $row['FirstName']; ?>"/> 
    </label> 
  </p> 
  <p> 
    <label>Last Name: 
      <input name="LastName" type="text" id="LastName" size="20" value="<?php echo $row['LastName']; ?>"/> 
    </label> 
  </p> 
  <p> 
    <label>Email Address: 
      <input name="EmailAddr" type="text" id="EmailAddr" size="50" value="<?php echo $row['EmailAddr']; ?>"/> 
    </label> 
  </p> 
  <p> 
    <label>Telephone: 
      <input name="PhoneNumber" type="text" id="PhoneNumber" size="20" value="<?php echo $row['PhoneNumber']; ?>"/> 
    </label> 
  </p> 
  <p> 
    <input type="submit" name="Update" id="Update" value="Update" /> 
  </p>

</form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T00:39:11.597

您需要将表单放在 while 括号内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T19:02:55.227

试试这个代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"> 
<head> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
<title>updating data record</title>
</head> 
<body>

<?php
//connect to the database
  $conn = mysql_connect('localhost', 'root', '');
    if (!$conn) {
    die('Not connected : ' . mysql_error());
}   
    $db_selected = mysql_select_db('ccm3413', $conn);
    mysql_set_charset("utf8",$conn);
    $id = mysql_real_escape_string($_GET['id']);

    $result = mysql_query("SELECT * FROM studentinfo WHERE recordID = '$id'");
    $student = (mysql_num_rows($result)==1) ? mysql_fetch_assoc($result) : null ; //You expect only 1 student, right?

if (is_array($student)){
?>

<form id="form1" name="form1" method="post" action="processUpdateRecord.php"> 
  <p> 
    <label>Student Number: 
      <input name="StudentNumber" type="text" id="StudentNumber" size="10" value="<?php echo $student['StudentNumber']; ?>"/> 
    </label> 
  </p> 
  <p> 
    <label>First Name: 
      <input name="FirstName" type="text" id="FirstName" size="20" value="<?php echo $student['FirstName']; ?>"/> 
    </label> 
  </p> 
  <p> 
    <label>Last Name: 
      <input name="LastName" type="text" id="LastName" size="20" value="<?php echo $student['LastName']; ?>"/> 
    </label> 
  </p> 
  <p> 
    <label>Email Address: 
      <input name="EmailAddr" type="text" id="EmailAddr" size="50" value="<?php echo $student['EmailAddr']; ?>"/> 
    </label> 
  </p> 
  <p> 
    <label>Telephone: 
      <input name="PhoneNumber" type="text" id="PhoneNumber" size="20" value="<?php echo $student['PhoneNumber']; ?>"/> 
    </label> 
  </p> 
  <p> 
    <input type="submit" name="Update" id="Update" value="Update" /> 
  </p>
</form>
<?php

else {
  echo "The student has not been found" ;
} ?>

</body>
</html> 
```

# c# - Entity Framework Linq Query Plus Sql 函数嵌套查询

> ID：14924781
> 
> 赞同：0
> 
> 时间：2013-02-17T18:54:46.443
> 
> 标签：c#, linq, entity-framework

我有以下 linq 查询

```
public IEnumerable<DealershipWithDealersViewModel> Get(float latitude, float longitude)
        {
            return from dealer in Db.Dealerships
                          join i in Db.NearestDealers(latitude, longitude)
                          on dealer.DealerID equals i.DealerID
                          select new DealershipWithDealersViewModel
                                     {
                                         DealerID = dealer.DealerID,
                                         Dealer = dealer.Dealer,
                                         DoSales = dealer.DoSales,
                                         DoService = dealer.DoService,
                                         AddressProvinceID = dealer.AddressProvinceID,
                                         AddressLocationID = dealer.AddressLocationID,
                                         Address1 = dealer.Address1,
                                         Address2 = dealer.Address2,
                                         Tel = dealer.Tel,
                                         Fax = dealer.Fax,
                                         MapLat = dealer.MapLat,
                                         MapLong = dealer.MapLong,
                                         Location = dealer.Location.LocationName,
                                         DealerUsers = dealer.DealerUsers
                                            .Select(y => new DealerUserViewModel
                                                             {
                                                                DealerUserID = y.DealerUserID,
                                                                FirstName  = y.Firstname,
                                                                Surname = y.Surname,
                                                                LandLine = y.LandLine,
                                                                Email = y.Email,
                                                                Position = y.DealerType.DealerPosition
                                                             })

                                     };
        } 
```

![在此处输入图像描述](../Images/66b60068c6f643bb1f148e3d16882a00.png) 我不断收到以下错误**嵌套查询没有适当的键**。我在网上找不到任何关于它的信息。如果我在没有 DealerUsers 的情况下加载上述内容，它会按预期工作，但我需要嵌套数据。谢谢！顺便说一句，下面的工作。

```
public IEnumerable<DealershipWithDealersViewModel> Get(float latitude, float longitude)
        {
            return from dealer in Db.Dealerships
                          join i in Db.NearestDealers(latitude, longitude)
                          on dealer.DealerID equals i.DealerID
                          select new DealershipWithDealersViewModel
                                     {
                                         DealerID = dealer.DealerID,
                                         Dealer = dealer.Dealer,
                                         DoSales = dealer.DoSales,
                                         DoService = dealer.DoService,
                                         AddressProvinceID = dealer.AddressProvinceID,
                                         AddressLocationID = dealer.AddressLocationID,
                                         Address1 = dealer.Address1,
                                         Address2 = dealer.Address2,
                                         Tel = dealer.Tel,
                                         Fax = dealer.Fax,
                                         MapLat = dealer.MapLat,
                                         MapLong = dealer.MapLong,
                                         Location = dealer.Location.LocationName

                                     };
        } 
```

![在此处输入图像描述](../Images/7feb4ed9ec9716c5271356fa6beff03f.png)

**更新**

这也有效。

```
return Db.Dealerships.Select(x => new DealershipWithDealersViewModel
            {
                DealerID = x.DealerID,
                Dealer = x.Dealer,
                DoSales = x.DoSales,
                DoService = x.DoService,
                AddressProvinceID = x.AddressProvinceID,
                AddressLocationID = x.AddressLocationID,
                Address1 = x.Address1,
                Address2 = x.Address2,
                Tel = x.Tel,
                Fax = x.Fax,
                MapLat = x.MapLat,
                MapLong = x.MapLong,
                Location = x.Location.Location1,
                DealerUsers = x.DealerUsers.Select(y => new DealerUserViewModel
                                                            {
                                                                DealerUserID = y.DealerUserID,
                                                                FirstName = y.Firstname,
                                                                Surname = y.Surname,
                                                                LandLine = y.LandLine,
                                                                Email = y.Email,
                                                                Position = y.DealerType.DealerType1
                                                            })
            }); 
```

![在此处输入图像描述](../Images/50eda80a9abeca179168122bf4563365.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T19:03:51.070

你正在做的事情可能是不可能的。请参阅：[MSDN](http://msdn.microsoft.com/en-us/library/bb387167.aspx)。在文章的底部，它指出

> 不支持需要从嵌套查询中提取键的某些类型的查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T00:34:54.557

这是可组合性的问题。EF 将始终尝试将您的查询转换为 SQL。如果这成功了，很好。如果没有，它不会尝试使其工作，例如通过切换到 linq 到引擎盖下的对象（就像 linq to sql 可能做的那样）。您试图将存储过程结果连接到 SQL 查询。这甚至不能在普通 SQL 中完成，因为 sproc 结果是不可组合的，更不用说 EF 了。

您只需使用`Db.Dealerships.AsEnumerable()`and将结果加入内存中`Db.NearestDealers(latitude, longitude)`。

`DealerID`因此，如果您可以将过滤器参数添加到过程的签名中，那将非常有用。

# java - 使用文本文件中的数据

> ID：14924782
> 
> 赞同：-3
> 
> 时间：2013-02-17T18:54:46.587
> 
> 标签：java, file-io

[这是](http://en.literateprograms.org/index.php?title=Special%3aDownloadCode/Dijkstra%27s_algorithm_%28Java%29&oldid=15444)我正在研究的 Dijkstra 算法的网站，但是边缘的数据是在程序内部创建的。我想要的是将数据作为文本文件，我已经制作了一个文本文件，并且还能够将其作为字符串逐行读取。

但我不知道如何从程序中的文本文件中使用这些数据。任何人都可以给我任何建议吗？

我的数据看起来像这样，正在创建一个图表

起点、终点、成本

2 3 1

2 4 1

2 5 2

2 6 2

3 1 1

3 2 1

3 4 1

* * *

这是我现在读取文件的代码，我可以打印出所有行或特定行，它读取数组列表中的数据。但我想做行拆分 (String[] fields = line.split(" ");) 这样我就可以在数据中打印出一个数字。但是当我把它放在代码中时不允许我这样做，任何人都可以为我添加它。

文件 file = new File("data1.txt");

```
 List<String> lines = new ArrayList<String>();

    try{
        Scanner scanner = new Scanner(file);

        while (scanner.hasNextLine()) {
            lines.add(scanner.nextLine());

        }
        scanner.close();

    } catch (FileNotFoundException e) {
        System.out.println("File not found.");  
    }

    for (int i = 0 ; i <lines.size(); i++){

        String getlines = lines.get(i);

    }

        System.out.print(lines.get(0)+"\n");

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T22:01:32.553

您可以使用以下代码读取文件：

```
 File file = new File("YOUR_FILE_PATH"); 
    try {
        Scanner scanner = new Scanner(file); 

        scanner.nextLine(); // to ignore the first line which has the header

        ArrayList<GraphNode> graphList = new ArrayList<GraphNode>();

        while (scanner.hasNextLine()) {
            String line = scanner.nextLine();
            String[] fields = line.split(" ");

            // Do something with these values
            graphList.add(new GraphNode(Integer.parseInt(fields[0]),
                                        Integer.parseInt(fields[1]),
                                        Integer.parseInt(fields[2]));

        }
        scanner.close();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } 
```

当您创建文件以制作分隔符时，您应该保持一致，`,`或者`space`因为在您的示例中，标题由 分隔`,`，而数据由`space`

您可以有一个简单的类来保存您的数据，例如：

```
class GraphNode {
    private int start;
    private int end;
    private int cost;

    public GraphNode(int start, int end, int cost) {                
            this.start = start;
            this.end = end;
            this.cost = cost;
    }

    public int getStart() {
            return start;
    }

    public void setStart(int start) {
            this.start = start;
    }

    public int getEnd() {
            return end;
    }

    public void setEnd(int end) {
            this.end = end;
    }

    public int getCost() {
            return cost;
    }

    public void setCost(int cost) {
        this.cost = cost;
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T19:01:36.707

您将文本文件中的数据放入（在您的情况下）一种字符串数组/列表/任何适合您使用循环的目的。然后，您可以通过它们的索引 fx 来获取它们。和他们一起做数学。

如果您想在之后将它们从字符串类型转换为数字类型，您可以使用 parseInteger 方法（fx 并且如果您只处理整数）将它们转换为正确的数据类型。显然，float 类也有一个 parseFloat 方法，依此类推。

在您读取文件并将数据插入某种字符串数组之后。我建议您使用循环将它们放在适当数据类型的新数组中，并使用解析方法来转换它们。

之后，您可以从新数组中获取值并根据需要对它们进行数学运算。

# c# - 使用 XSLT 将 XML 值拆分为新的 XML

> ID：14924786
> 
> 赞同：1
> 
> 时间：2013-02-17T18:55:08.747
> 
> 标签：c#, xml, xslt

是否可以使用 XSLT 或 C# 从

```
<XML>
  <Name>Name1;Name2</Name> 
  <Adress>Adress1;Adress2</Adress>
</XML> 
```

对此

```
<XML>
    <LINE>
        <Name>Name1</Name> 
        <Adress>Adress1</Adress> 
    </LINE>
    <LINE>
        <Name>Name2</Name> 
        <Adress>Adress2</Adress> 
   </LINE>
</XML> 
```

非常感激任何的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T02:54:46.907

**这个 XSLT 2.0 转换：**

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:xs="http://www.w3.org/2001/XMLSchema" exclude-result-prefixes="xs">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/*">
  <xsl:copy>
    <xsl:variable name="vTop" select="."/>
    <xsl:variable name="vAddresses" select="tokenize(Adress, ';')"/>

    <xsl:for-each select="tokenize(Name, ';')">
     <xsl:variable name="vPos" select="position()" as="xs:integer"/>
     <xsl:apply-templates select="$vTop/Name">
       <xsl:with-param name="pNameData" select="."/>
       <xsl:with-param name="pAdrData" select="$vAddresses[$vPos]"/>
     </xsl:apply-templates>
    </xsl:for-each>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="Name">
  <xsl:param name="pNameData"/>
  <xsl:param name="pAdrData"/>

  <Line>
   <Name><xsl:value-of select="$pNameData"/></Name>
   <Adress><xsl:value-of select="$pAdrData"/></Adress>
  </Line>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<XML>
    <Name>Name1;Name2</Name>
    <Adress>Adress1;Adress2</Adress>
</XML> 
```

**产生想要的正确结果：**

```
<XML>
   <Line>
      <Name>Name1</Name>
      <Adress>Adress1</Adress>
   </Line>
   <Line>
      <Name>Name2</Name>
      <Adress>Adress2</Adress>
   </Line>
</XML> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T19:31:02.623

这是一个非常简单的 XSLT 1.0 解决方案：

**输入文件**：

```
<XML>
  <Name>Name1;Name2</Name> 
  <Address>Address1;Address2</Address>
  <Name>Name3;Name4</Name> 
  <Address>Address3;Address4</Address>
</XML> 
```

**样式表**：

```
<?xml version="1.0" encoding="utf-8"?>

<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>
  <xsl:strip-space elements="*"/>

  <xsl:template match="XML">
    <XML>
      <xsl:apply-templates select="Name"/>
    </XML>
  </xsl:template>

  <xsl:template match="Name" mode="name-address">
    <xsl:param name="name" select="substring-before(., ';')"/>
    <xsl:param name="address" select="substring-before(following-sibling::*[1][self::Address], ';')"/>

    <LINE>
      <Name>
        <xsl:value-of select="$name"/>
      </Name>
      <Address>
        <xsl:value-of select="$address"/>
      </Address>
    </LINE>
  </xsl:template>

  <xsl:template match="Name">
    <xsl:apply-templates select="." mode="name-address"/>
    <xsl:apply-templates select="." mode="name-address">
      <xsl:with-param name="name" select="substring-after(., ';')"/>
      <xsl:with-param name="address" select="substring-after(following-sibling::*[1][self::Address], ';')"/>
    </xsl:apply-templates>
  </xsl:template>

</xsl:stylesheet> 
```

**输出**：

```
<?xml version="1.0" encoding="UTF-8"?>
<XML>
   <LINE>
      <Name>Name1</Name>
      <Address>Address1</Address>
   </LINE>
   <LINE>
      <Name>Name2</Name>
      <Address>Address2</Address>
   </LINE>
   <LINE>
      <Name>Name3</Name>
      <Address>Address3</Address>
   </LINE>
   <LINE>
      <Name>Name4</Name>
      <Address>Address4</Address>
   </LINE>
</XML> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T19:18:04.387

我不了解 XSLT，但如果可能的话，可能会有一个非常复杂的解决方案。

但在 C# 中，它相当简单。这是一种方法（使用 LINQ to XML）：

```
var inputXml = 
    @"<XML>
        <Name>Name1;Name2</Name> 
        <Adress>Adress1;Adress2</Adress>
    </XML>";

var inputXmlDoc = XDocument.Parse(inputXml);

var names = inputXmlDoc.Root.Descendants("Name").Single().Value.Split(';');
var addresses = inputXmlDoc.Root.Descendants("Adress").Single().Value.Split(';');

var outputXmlDoc = new XDocument(
    new XElement("XML",
        names.Zip(addresses, (n, a) => new {n, a})
            .Select(pair => new XElement("LINE",
                    new XElement("Name", pair.n),
                    new XElement("Address", pair.a)
            ))
        )
    );

Console.WriteLine(outputXmlDoc); 
```

# database - 不是单组群功能 ORACLE

> ID：14924787
> 
> 赞同：0
> 
> 时间：2013-02-17T18:55:10.503
> 
> 标签：database, oracle

表： http: [//pastie.org/6205255](http://pastie.org/6205255)

如何显示具有最大（总和（时间））的导师姓名？

首先我尝试了这个：

```
select max(sum(time))
from tutorial
group by tutor; 
```

答案是 5 它只是显示了最大时间但没有显示谁有时间（导师姓名）我试图添加选择导师，最大值（总和（时间））....但是错误

第二，我试过这个：（最大值和总和之间的分离）

```
select max(x) "THE MAXIMUM"
from (
    select sum(time) x,tutor from tutorial group by tutor
); 
```

answer = 5\. 我试着写`select tutor,max(x) "THE MAXIMUM" ......`但仍然出错

他们都有同样的错误。错误说：

```
ORA-00937: not a single-group group function
00937\. 00000 -  "not a single-group group function" 
```

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T19:11:38.113

对于 Oracle，一种简单的方法是`GROUP BY`按时间总和（降序）进行正常排序并选择第一行；

```
SELECT * FROM (
   SELECT SUM("time") "time", "tutor"
   FROM tutorial
   GROUP BY "tutor"
   ORDER BY "time" DESC
)
WHERE ROWNUM=1 
```

[一个用于测试的 SQLfiddle](http://sqlfiddle.com/#!4/53f53/3)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T19:20:32.760

我今天无法使用电脑，但试试这个。

```
用一个 as (
  选择导师，sum(time) sum_time
    从教程
    由导师分组
b 为 (
  选择导师，sum_time，rank() over(order by sum_time desc) RN
    从一个
)
  选择导师，sum_time
    从 b
    其中 RN = 1

```

如果不止一位导师并列榜首，这可能会返回不止一排。将 rank 更改为 row_number 以任意选择一个。

# wpf - 如何更改为黑色 Windows 箭头光标？

> ID：14924789
> 
> 赞同：2
> 
> 时间：2013-02-17T18:55:18.870
> 
> 标签：wpf, windows, user-interface, cursor

我注意到，当您将鼠标悬停在某些区域上时，Visual Studio 和 blend 都会从标准的 Windows 白色光标变为黑色光标。我查看了 Cursors 枚举，找不到等效的黑色光标。这是 Visual Studio 中包含的特殊光标还是 Windows 的一部分？我在哪里可以找到这个游标资源？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T23:41:09.220

Windows 确实有一个标准的黑色箭头光标。它`IDC_ARROW`在“Windows Black”指针方案中，因此除非您更改了方案，否则您不会看到它。请注意，指针方案严格来说是用户偏好。应用程序不应该改变它，永远。

光标文件位于`\Windows\Cursors\arrow_r.cur`. [这个问题](https://stackoverflow.com/questions/46805/custom-cursor-in-wpf)的答案描述了在 WPF 中设置自定义光标的几种技术。

# ruby - Jekyll - Yaml 前端访问变量

> ID：14924791
> 
> 赞同：0
> 
> 时间：2013-02-17T18:55:20.250
> 
> 标签：ruby, jekyll

尝试在以下 yaml 中访问 showFaces

```
facebook   :
    likeButton :
        showFaces : false 
```

我明白了

```
Liquid Exception: undefined method `[]' for nil:NilClass in post 
```

用代码

```
@array = context['page']['facebook']['likeButton'] 
```

和

```
@array = context['page']['facebook'] 
```

我明白了

```
[{"likeButton"=>{"showFaces"=>false}}] 
```

如此接近

我是 Ruby 新手，所以任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:13:46.363

使用

```
facebook :
    - plugin    : likebutton
      showfaces : true
    - plugin    : comments
      showfaces : true 
```

解决了这个问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T19:07:27.717

我相信问题可能与 YAML 文件中的标识有关。您可以在这里找到几个示例：[http](http://www.yaml.org/start.html) : //www.yaml.org/start.html，在您的示例中，facebook 和 likeButton 处于同一级别。

# macos - 保护 WiFi shell 脚本免受 shell 注入（sh、tcsh）

> ID：14924792
> 
> 赞同：2
> 
> 时间：2013-02-17T18:55:20.797
> 
> 标签：macos, wifi, code-injection, tcsh, openbsd

见过名为 的 WiFi 基站`"| rm -rf ~ | rm -rf /`吗？

在编写某种简单分析或 WiFi 基站数据记录的脚本时，如何确保攻击者无法将 shell 命令注入到您的表达式中？

例如，我想记录来自`ifconfig run0 scan`OpenBSD 和[`airport -s`OS X](https://apple.stackexchange.com/questions/81221/how-do-i-get-wi-fi-info-from-within-terminal)的数据，并且我已经在 sh/tcsh 中有一些脚本可以很好地满足我的需求。但是我怎么能确保我不会成为 shell 注射的受害者呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:06:56.827

这个问题已经多次在 OpenBSD 列表 (misc@) 以及其他地方得到解决。首先，我建议您不要执行从网络获得的东西，特别是在脚本中。也许您可以编辑您的问题，以更具体地说明您想对这些数据做什么，以便我们的答案可以针对它量身定制。

*   如果您想使用此信息连接到网络（作为网络管理员），请将自己置于脚本和输入之间。因此，在获得扫描输出后，只需复制您在实际脚本中批准的 nwid。看看这个[关于不死的讨论](http://undeadly.org/cgi?action=article&sid=20120113172334)

*   如果您需要在输入上运行自动化脚本以用于其他目的（数据收集？），请考虑创建一个 chrooted dir ，其中包含您的脚本和静态编译的 shell 并在 chroot 下运行它。当然，您不应该依赖这种方法来进行比您在问题中提到的更复杂的攻击。

希望这可以帮助。

# java - 如何使for循环扫描仪代码下降一定数量？

> ID：14924794
> 
> 赞同：0
> 
> 时间：2013-02-17T18:55:48.563
> 
> 标签：java, for-loop, java.util.scanner

如何使for循环扫描仪代码下降一定数量？例如，输入 30，然后输入 3，然后它会像 30、27、24、21 等一样下降。

这就是我到目前为止所拥有的。我希望 int y 表示一次删除了多少。

```
import java.util.Scanner; // ...

public class b
{
  public static void main(String[] args) {  
    int x,y;

    Scanner scannerObject = new Scanner(System.in);
    System.out.println("how many  bottles hanging on the wall");

    x = scannerObject.nextInt();
    System.out.println("how many  bottles are taken down the wall");

    y = scannerObject.nextInt();
    for (int counter = x; counter > 0; counter--)
    {
      if (counter == 1)
      {
        System.out.println(" " + counter + "  bottle hanging on the wall");
      }
      else
      {
        System.out.println(" " + counter + "  bottles hanging on the wall");
      }

      System.out.println("And if one  bottle should accidently fall, ");
    }

    System.out.println("No  bottles hanging on the wall");
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T19:13:13.817

将您的 for 循环替换为：

```
for (int counter = x; counter > 0; counter-=y) 
```

这应该会给你想要的输出。

变化`counter-=y`相当于`counter=counter-y`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T19:06:48.503

放在`x = x - y;`for循环里面。这将`x`表示当前挂在墙上的瓶子的数量，即，`x`在您的示例中，每次迭代都会减少 3。

# python - 通过套接字的 Python 3 https 连接

> ID：14924795
> 
> 赞同：0
> 
> 时间：2013-02-17T18:55:51.640
> 
> 标签：python, sockets, web, python-3.x

我需要通过套接字使用 https 连接（使用 socks 代理），我正在尝试使用 ssl 但出现错误：

```
>>> import socket
>>> import ssl
>>> s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
>>> s.connect(("www.google.com.ua",443))
>>> ss=ssl.wrap_socket(s)
Traceback (most recent call last):
  File "<pyshell#4>", line 1, in <module>
    ss=ssl.wrap_socket(s)
  File "/usr/lib/python3.2/ssl.py", line 521, in wrap_socket
    ciphers=ciphers)
  File "/usr/lib/python3.2/ssl.py", line 276, in __init__
    raise x
  File "/usr/lib/python3.2/ssl.py", line 272, in __init__
    self.do_handshake()
  File "/usr/lib/python3.2/ssl.py", line 451, in do_handshake
    self._sslobj.do_handshake()
ssl.SSLError: [Errno 8] _ssl.c:392: EOF occurred in violation of protocol 
```

我怎样才能使它正确？提前谢谢。

# python - 在linux上增加tcp接收窗口

> ID：14924797
> 
> 赞同：2
> 
> 时间：2013-02-17T18:56:03.027
> 
> 标签：python, sockets, tcp, tcpdump, setsockopt

类似于[在 C 中设置 TCP 接收窗口并在 Linux 中使用 tcpdump](https://stackoverflow.com/questions/2223825/setting-tcp-receive-window-in-c-and-working-with-tcpdump-in-linux)以及[为什么更改 SO_RCVBUF 的值不起作用？](https://stackoverflow.com/questions/10063497/why-changing-value-of-so-rcvbuf-doesnt-work)，我无法在 ubuntu linux 2.6.32-45 上*增加*大于 5888 的初始 tcp 接收窗口

```
#!/usr/bin/python
from socket import socket, SOL_SOCKET, SO_RCVBUF, TCP_WINDOW_CLAMP
sock = socket()
sock.setsockopt(SOL_SOCKET, SO_RCVBUF, 65536)
sock.setsockopt(SOL_SOCKET, TCP_WINDOW_CLAMP, 32768)
sock.connect(('google.com', 80)) 
```

tcpdump 说：

```
me > google: Flags [S], seq 3758517838, win 5840, options [mss 1460,sackOK,TS val 879735044 ecr 0,nop,wscale 6], length 0
google > me: Flags [S.], seq 597037042, ack 3758517839, win 62392, options [mss 1430,sackOK,TS val 541301157 ecr 879735044,nop,wscale 6], length 0
me > google: Flags [.], ack 1, win 92, options [nop,nop,TS val 879735051 ecr 541301157], length 0 
```

`sysctl -a | grep net.*mem`说：

```
net.core.wmem_max = 131071
net.core.rmem_max = 131071
net.core.wmem_default = 112640
net.core.rmem_default = 112640
net.core.optmem_max = 10240
net.ipv4.igmp_max_memberships = 20
net.ipv4.tcp_mem = 77376        103168  154752
net.ipv4.tcp_wmem = 4096        16384   3301376
net.ipv4.tcp_rmem = 4096        87380   3301376
net.ipv4.udp_mem = 77376        103168  154752
net.ipv4.udp_rmem_min = 4096
net.ipv4.udp_wmem_min = 4096 
```

是否有其他东西对我的连接设置了接收窗口限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T19:31:51.297

这看起来像是 TCP 慢启动的影响。这个 2008 年的内核线程提供了一个很好的解释（我已经链接到线程中的最后一个响应）：

*   [SO_RCVBUF 不会改变接收者广告窗口](http://kerneltrap.org/mailarchive/linux-netdev/2008/1/16/574586)

如果您继续观看流，窗口大小*应该*会增加，直到您设置的最大值。

# templates - Rebol 中的“reword”功能是什么？如何使用它？

> ID：14924801
> 
> 赞同：9
> 
> 时间：2013-02-17T18:56:23.533
> 
> 标签：templates, template-engine, rebol, variable-expansion, rebol3

我今天看到有人提到了这个`reword`功能，但是它的文档非常简短。它看起来像 shell 脚本环境变量替换，或者可能是正则表达式替换，但不同。我如何使用这个功能，我会遇到什么样的陷阱？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-18T01:31:18.713

## 这里有龙！

该`reword`函数是一个实验，以一种适合我们做事方式的方式将 shell 样式的字符串插值添加到 Rebol。与 Rebol 的许多系列函数不同，它确实针对仅处理字符串类型进行了优化，并且设计反映了这一点。当前版本是一个设计原型，最终将作为本机重做，但它确实按设计工作，因此谈论它的工作原理和使用方法是有意义的。

## 做什么`reword`？

基本上是这样的：

```
>> reword "$a is $b." [a "This" b "that"]
== "This is that." 
```

它接受一个模板字符串，它搜索转义序列，并用相应的替换值替换它们。这些值也作为对象、映射或键和值块传递给函数。键几乎可以是任何东西，甚至是数字：

```
>> reword "$1 is $2." [1 "This" 2 "that"]
== "This is that." 
```

如果它们不是字符串，则键将转换为字符串。如果键被转换为相同的字符串，则它们被认为是相同的，当您执行以下操作时会发生这种情况：

```
>> reword "A $a is $a." [a "fox" "a" "brown"]
== "A brown is brown." 
```

它不像正则表达式替换那样定位，它是基于关键字的。如果您有一个在 values 块中多次指定的键，则该键的最后一个值就是我们刚刚看到的被使用的值。任何未设置或无值都会被跳过，因为在将内容放入字符串时这些值没有意义。

您也可以使用其他转义标志，甚至是多字符标志：

```
>> reword/escape "A %%a is %%b." [a "fox" b "brown"] "%%"
== "A fox is brown." 
```

甚至根本没有转义标志，它会到处替换密钥：

```
>> reword/escape "I am answering you." [I "Brian" am "is" you "Adrian"] none
== "Brian is answerBrianng Adrian." 
```

*哎呀，那没用。*这是因为键不区分大小写，并且它们不需要被空格或其他此类分隔符包围。但是，如果将它们指定为字符串，则可以在键本身中放置空格，这样效果会更好：

```
>> reword/escape "I am answering you." ["I am" "Brian is" you "Adrian"] none
== "Brian is answering Adrian." 
```

尽管如此，`reword`制作没有转义字符的模板往往会很棘手，而且速度会有点慢，因此并不经常这样做。

不过还有一个更好的技巧……

## 功能替换

真正有趣的地方是当`reword`您使用函数作为替换值时，因为每次改写都会*调用该函数。*说，你想用一个计数器替换：

```
>> reword "$x then $x and $x, also $x" object [y: 1 x: does [++ y]]
== "1 then 2 and 3, also 4" 
```

或者甚至是位置，因为它可以将字符串位置作为参数：

```
>> reword "$x then $x and $x, also $x" object [x: func [s] [index? s]]
== "1 then 9 and 16, also 25" 
```

*等等，这看起来不对，那些数字似乎不对。*这是因为该函数返回的是*模板*字符串的索引，而不是*结果*字符串。在编写这些函数时请牢记这一点。该功能甚至不必只分配给一个键，它可以检测或使用它：

```
>> reword "$x or $y" object [x: y: func [s] [ajoin ["(it's " copy/part s 2 ")"]]]
== "(it's $x) or (it's $y)" 
```

见，模板变量，转义和所有。并且该功能可能会产生副作用，例如此行计数器：

```
>> reword/escape "Hello^/There^/nl" use [x] [x: 0 map reduce ["^/" does [++ x "^/"] "nl" does [x]]] ""
== "Hello^/There^/2" 
```

它甚至带有`/into`选项，因此您可以使用它分阶段构建字符串。

但是对于来自内置插值语言的人来说，最大的问题是......

## 为什么值块，为什么不像普通语言一样使用变量？

因为*Rebol 不能那样工作*。Rebol 没有词法绑定，它做其他事情，所以在字符串中没有办法知道从哪里获取变量的值而不这么说。在其中一种具有插值的 shell 语言中，这相当于必须将对整个环境的引用传递给插值函数。但是，嘿，我们可以在 Rebol 中做到这一点：

```
>> use [x] [x: func [s] [index? s] reword "$x then $x and $x, also $x" bind? 'x]
== "1 then 9 and 16, also 25" 
```

该`bind?`方法将适用于`use`，绑定循环和函数。如果你在一个对象中，你也可以使用`self`：

```
>> o: object [x: func [s] [index? s] y: func [s] [reword s self]]
== make object! [
    x: make function! [[s][index? s]]
    y: make function! [[s][reword s self]]
]
>> o/y "$x then $x and $x, also $x"
== "1 then 9 and 16, also 25" 
```

但是要小心，否则你最终会做这样的事情：

```
>> o/y "$x then $x and $x, also $x, finally $y"
** Internal error: stack overflow 
```

龙！*这是将变量和替换键分开的一个很好的理由......*

# java - Spring MVC 多文件上传与 HTML5 多文件表单功能

> ID：14924809
> 
> 赞同：13
> 
> 时间：2013-02-17T18:57:37.670
> 
> 标签：java, html, spring, file-upload

我正在尝试使用带有@Controller 和@RequestMapping 的spring 3.1.2 上传多个文件。

这是我所做的和我的配置。

html5形式：

```
<form action="addFileSystemImage.foo" method="post" enctype="multipart/form-data">

    <input class='fileInput' type="file" name="files[]" multiple="multiple" />

    <input type="text" value="13asdf12eadsf" name="locId"/>

    <input type="submit" />

</form> 
```

控制器方法：

```
@RequestMapping(value="/publisher/addFileSystemImage.foo", method=RequestMethod.POST)
public @ResponseBody List<UploadedFile> addFileSystemImage(@RequestParam("files[]") ArrayList<MultipartFile> files, String locId, HttpServletRequest request) {

 //do lotsa voodoo rocket science here to process the files  

} 
```

我的会议：

```
 <mvc:annotation-driven />
 <context:component-scan base-package="foo.package"></context:component-scan>
 <bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver"></bean> 
```

提交表单确实会到达 addFileSystemImage 方法。locId 参数的数据在这里，但“文件”参数未绑定。无论我尝试过哪种参数/字段名称/参数类型的组合，它都系统地为空。

HttpServletRequest 参数是一个 org.springframework.web.multipart.support.DefaultMultipartHttpServletRequest 并且它包含一个 multiPartFile 属性，该属性实际上包含文件数据。在调试中查看它的价值给了我

```
{files[]=[org.springframework.web.multipart.commons.CommonsMultipartFile@16afd7f9, org.springframework.web.multipart.commons.CommonsMultipartFile@728c2811, org.springframework.web.multipart.commons.CommonsMultipartFile@4f9aaed7]} 
```

这意味着我的 files[] 确实在这里......但不知何故它没有正确通过数据绑定步骤......

现在......我知道你会告诉我我可以从请求中检索数据......但我宁愿让它正常工作...... Sring方式...... :) 并让我的 MultipartFile ArrayList 正确人口稠密。

我错过了什么吗？有没有人真正使这项工作正常进行？我能做些什么来填充这个 ArrayList （甚至是一个常规的 Array ）？

我遇到了这个 [带有 ajax 文件上传和 MultipartFile 的 Spring MVC](https://stackoverflow.com/questions/7246041/spring-mvc-with-ajax-file-upload-and-multipartfile/11329508#11329508)解决方案，它和我做的事情几乎一样，但显然我一定做错了，因为这个解决方案不适合我。

注意：我确实设法让它与单个文件上传一起工作。但我今天的挑战是一次获取多个文件。

任何帮助表示赞赏。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-17T03:38:06.953

尽管感谢 Alex，您已经得到了答案，但我还是想详细说明一下。使用 Spring 绑定，表单字段被绑定到它们在 HTML 中的“名称”属性。由于不可能有一个*名为*files[] 的表单字段（如果使用该语法声明变量名，它的名称是 files，但它是声明类型的数组），Spring 无法匹配它 - 并且这种情况下的行为是忽略请求中的数据。

使用 MultipartFile 等类型，您可以使用名为“files”的列表或数组，如以下示例：

```
private List<MultipartFile> files;
private MultipartFile[] files; 
```

使用适当的 getter 和 setter，您可以相应地访问和改变文件列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-03T04:22:46.157

是否包含 commons-fileupload 依赖项？

```
<dependency>
  <groupId>commons-fileupload</groupId>
  <artifactId>commons-fileupload</artifactId>
  <version>1.3</version>
</dependency> 
```

即使将 ArrayList 作为控制器处理程序上的参数类型，我也测试了文件上传工作正常

# nhibernate - 如果模型是会话失败事务的一部分，NHibernate 将不允许我在会话中插入模型

> ID：14924813
> 
> 赞同：3
> 
> 时间：2013-02-17T18:58:14.210
> 
> 标签：nhibernate, transactions, nhibernate-caches

为什么在第一次尝试插入模型时从数据库返回错误后我不能只插入模型：

```
Report report = null;
using (var session = SessionFactory.OpenSession()) {
    try {
        using (var transaction = session.BeginTransaction()) {
            report = new Report();
            session.SaveOrUpdate(report);//Exception: Name field required
            transaction.Commit();
        }
    }
    catch { }

    try {
        using (var transaction = session.BeginTransaction()) {
            report.Name = "theName";
            session.SaveOrUpdate(report);

            //Causes Exception:
            //Row was updated or deleted by another transaction (or unsaved-value 
            //mapping was incorrect): [ReportViewer.DataAccess.Models.Report#22]                          
            transaction.Commit();
        }
    }
    catch { }
} 
```

但是当我更新现有模型时，我得到一个错误，我可以进行修复（在这种情况下设置一个名称）并尝试再次更新：

```
Report report = null;
using (var session = SessionFactory.OpenSession()) {
    using (var transaction = session.BeginTransaction()) {
        report = new Report();
        report.Name = "theName";
        session.SaveOrUpdate(report);
        transaction.Commit();
    }
}
using (var session = SessionFactory.OpenSession()) {

    //get entity saved from previous session
    report = session.Get<Report>(report.Id);

    try {
        using (var transaction = session.BeginTransaction()) {
            report.Name = null;
            session.SaveOrUpdate(report);//Exception: Name field required
            transaction.Commit();
        }
    }
    catch { }

    try {
        using (var transaction = session.BeginTransaction()) {

            //updates and does not give an error
            report.Name = "theName";
            session.SaveOrUpdate(report);
            transaction.Commit();
        }
    }
    catch { }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T19:34:07.723

当数据库触发异常时，NHibernate 会话*必须*关闭（disposed）。不能保证在异常发生后保持一致（内部或与 DB 状态）。

[请参阅NHibernate 参考中有关异常处理](http://nhforge.org/doc/nh/en/index.html#manipulatingdata-exceptions)的章节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T15:00:48.443

正如 Oskar 所说，您应该在发生异常后丢弃 NHibernate 会话。但是，插入失败的原因是您已经通过调用`SaveOrUpdate`它使报告持久化（您应该`Save`在此处使用）。当您`SaveOrUpdate`在同一个实例上再次调用时，NHibernate 会抛出异常，因为该对象已经是持久的。如下重写代码可能会让插入成功（但不推荐）：

```
try {
    using (var transaction = session.BeginTransaction()) {
        report.Name = "theName";                   
        transaction.Commit();
    }
} 
```

在更新示例中，调用`SaveOrUpdate`无效，因为当 NHibernate 加载对象时，该对象变得持久。理解 NHibernate 的[实例状态](http://nhforge.org/doc/nh/en/index.html#architecture-states)以及如何[使用持久对象](http://nhforge.org/doc/nh/en/index.html#manipulatingdata)是基本的并且被广泛误解。

更好的方法是在将对象保存到数据库之前对其进行验证。

# php - ajax onchange 用户名验证和暴力攻击

> ID：14924816
> 
> 赞同：0
> 
> 时间：2013-02-17T18:58:48.657
> 
> 标签：php, ajax

我为用户名创建了 ajax onchange 验证。如果用户输入的用户名已经存在或包含无效字符或较短等，则立即收到警告：用户名已存在/包含无效字符/短于...

Ajax onchange 接受用户输入，并通过 php 验证。

现在我在想。以这种方式，可能的蛮力攻击者很容易获得有关现有用户名的信息......？还是没有危险……？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T19:13:25.850

本质上，所有用户名验证请求的工作方式是向服务器发送请求。仅仅因为您在这里使用 AJAX 并不会使其更容易受到蛮力攻击。

但是请记住@NickFury 所说的一些事情，请确保您有重试限制。也许使用成倍增加的密码重试时间。

强制实施良好的密码大小限制和其他准则以及重试限制将使暴力破解几乎不可能。*但是*，如果用户决定使用`welcome`他/她的密码，那是他们的错。

但请确保永远不要将密码以纯文本形式存储在数据库中。始终使用 BCrypt 之类的东西。

# python - 在 Python 中返回外部函数错误

> ID：14924820
> 
> 赞同：5
> 
> 时间：2013-02-17T18:59:11.110
> 
> 标签：python, function

这就是问题所在：给定以下 Python 程序，假设用户从键盘输入数字 4。返回的值是多少？

```
N = int(input("enter a positive integer:"))
counter = 1
while (N > 0):
    counter = counter * N
    N = N - 1
    return counter 
```

然而，当我运行系统时，我不断收到外部函数错误我做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-17T19:01:31.413

您只能从函数内部返回，而不能从循环中返回。

看起来您的 return 应该在 while 循环之外，而您的完整代码应该在函数内。

```
def func():
    N = int(input("enter a positive integer:"))
    counter = 1
    while (N > 0):
        counter = counter * N
        N -= 1
    return counter  # de-indent this 4 spaces to the left.

print func() 
```

如果这些代码不在函数内部，那么您根本不需要 a `return`。只需`counter`打印`while loop`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-17T18:59:54.217

您有一个`return`不在函数中的语句。函数由`def`关键字启动：

```
def function(argument):
    return "something"

print function("foo")  #prints "something" 
```

`return`在函数之外没有任何意义，因此 python 会引发错误。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-07-28T22:08:20.113

您不是在任何函数中编写代码，您只能从函数返回。删除 return 语句，只打印你想要的值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-07T10:05:30.807

正如其他贡献者已经解释的那样，您可以打印出计数器，然后将 return 替换为 break 语句。

```
N = int(input("enter a positive integer:"))
counter = 1
while (N > 0):
    counter = counter * N
    N = N - 1
    print(counter)
    break 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-01T14:43:20.313

当您从循环返回时，它基本上会发生，您只能从函数返回

# html - 如何制作一个足够大的盒子来容纳里面的某个元素？

> ID：14924824
> 
> 赞同：4
> 
> 时间：2013-02-17T18:59:24.860
> 
> 标签：html, css

考虑这样的文档：

```
<DOCTYPE html>
<html><head><title>test</title></head>
<body>
<div>
<img src="..." alt="" style="clear:both" />
<p>Lorem ipsum...</p>
</body></html> 
```

图像（在我的情况下，它实际上是嵌入的 SVG 临时生成的）具有事先不知道的大小。封闭的 div 的宽度怎么可能刚好足以容纳图像（即下面的段落以与上面的图像相同的宽度中断）？

[这是对这个问题](https://stackoverflow.com/questions/14920401/how-to-simulate-hfill-with-html-and-css/14921863#14921863)的跟进。我目前正在处理的代码可以在[这里](https://fuz.su/%7Efuz/yase/)找到。板上方的文字应与板具有相同的宽度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T19:12:20.610

这可以使用`display:table`设置的最小宽度来完成。我`width:1px`在下面的示例中使用了，但任何最小宽度都可以。

HTML：

```
<div>
    <img src="..." alt="" />
    <p>Lorem ipsum...</p>
</div> 
```

CSS：

```
div {
    width: 1px;
    display: table;
} 
```

结果将如下所示：

![在此处输入图像描述](../Images/b74aaf8b09e630c7630b73f3e2d86fed.png)

[JS 小提琴示例](http://jsfiddle.net/EzPpT/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T19:09:14.277

您可以使用浮动来适应容器

```
<div style="float:left;background:yellow;">
    <img ...>
    <p>...</p>
</div> 
```

或者您可以尝试（不适用于 IE7 ......但您可能可以修复它）

```
<div style="display:inline;display:inline-block;background:yellow;">
    <img ...>
    <p>...</p>
</div> 
```

较新的 Mozilla 和 webkit 浏览器有

```
<div style="width:fit-content;margin:0 auto;background:yellow;">
   <img ...>
    <p>...</p>
</div> 
```

我不确定您的 SVG 会发生什么，但在`<svg>`声明中您可以指定矢量 AFAIK 的实际渲染大小

希望有帮助..

# python - python中的“参数”是什么

> ID：14924825
> 
> 赞同：4
> 
> 时间：2013-02-17T18:59:38.390
> 
> 标签：python, arguments

我是 python 新手，我正在阅读一本在线书籍。有一章解释了它们是什么以及何时使用它们的论点，但我不太理解这些解释。谁能更好地解释什么是论点？
请尽量简单地解释，因为我是初学者，英语不是我的母语

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-17T19:34:07.097

参数只是在调用函数时提供给函数的值：

```
x = foo( 3 )         # 3 is the argument for foo
y = bar( 4, "str" )  # 4 and "str" are the two arguments for bar 
```

参数通常与参数形成对比，参数是用于指定函数在调用时需要哪些参数的名称。当一个函数被调用时，每个参数都被分配一个参数值。

```
# foo has two named parameters, x and y
def foo ( x, y ):
    return x + y

z = foo( 3, 6 ) 
```

`foo`给定两个参数 3 和 6。第一个参数分配给第一个参数`x`. 第二个参数分配给第二个参数，`y`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T19:08:46.030

Python函数必须有各种参数。
args（参数）和 kwargs（关键字参数） args 是必需参数，而 kwargs 设置了默认值

以下函数采用 arg 'foo' 和 kwarg 'bar'

```
def hello_world(foo, bar='bye'):
    print(foo)
    print(bar) 
```

这是调用函数的方式

```
>>> hello_world('hello')
hello
>>> hello_world('hello', bar='cya')
hello
cya 
```

# html - 表在 Internet Explorer 中的 div 中未对齐

> ID：14924826
> 
> 赞同：0
> 
> 时间：2013-02-17T18:59:41.220
> 
> 标签：html, css, wordpress, internet-explorer, html-table

Internet Explorer 让我很难受。我制作了一个 WordPress 主题，并使其大部分与 IE 兼容，除了帖子底部的表格。该表溢出了它所在的容器 div 的一侧，并且在 IE 中似乎也太大了。（应该是 430 x 200 像素）你可以在这里看到 JSFiddle：http: [//jsfiddle.net/vlyandra/kEm3R/](http://jsfiddle.net/vlyandra/kEm3R/)

用于生成每个帖子的 Wordpress 主题代码如下所示：

```
<article id="post-<?php the_ID(); ?>" <?php post_class(); ?>>
<div class="bordered centered">
    <p class="negative-margin alignleft header"><?php the_title(); ?></p><p class="negative-margin alignright date"><?php the_date(); ?></p><div style="clear:both;"></div>
    <?php if ( is_search() ) : // Only display Excerpts for Search ?>
        <div class="entry-summary">
            <?php the_excerpt(); ?>
        </div><!-- .entry-summary -->
    <?php else : ?>
        <div class="entry-content negative-margin">
            <?php if ( has_post_thumbnail() ):?>
            <div id="entry-left">
                <?php   $large_image_url = wp_get_attachment_image_src( get_post_thumbnail_id($post->ID), 'large');
                echo '<a href="' . $large_image_url[0] . '" title="' . the_title_attribute('echo=0') . '" >';
                echo get_the_post_thumbnail($post->ID, 'large'); 
                echo '</a>';?>
            </div>
            <div class="entry-right">
                <?php the_content( __( 'More <span class="meta-nav">&rarr;</span>', 'huckleberry' ) ); ?>
                <?php wp_link_pages( array( 'before' => '<div class="page-links">' . __( 'Pages:', 'huckleberry' ), 'after' => '</div>' ) ); ?>
            </div><div style="clear:both;"></div>
            <div class="entry-right">
                <table class="fixed-height fixed-width">
                    <tr>
                        <td class="valigned"><h3 class="date">Details</h3>
                            <?php the_field('details');?>
                        </td>
                        <td class="valigned">
                            <a href="<?php echo MultiPostThumbnails::get_post_thumbnail_url(get_post_type(), 'secondary-image');?>">
                                <?php if (class_exists('MultiPostThumbnails')) : MultiPostThumbnails::the_post_thumbnail(get_post_type(), 'secondary-image'); endif; ?>
                            </a>
                        </td>
                        <td class="valigned">
                            <a href="<?php echo MultiPostThumbnails::get_post_thumbnail_url(get_post_type(), 'tertiary-image');?>">
                                <?php if (class_exists('MultiPostThumbnails')) : MultiPostThumbnails::the_post_thumbnail(get_post_type(), 'tertiary-image'); endif; ?>
                            </a>
                        </td>
                        <td class="valigned">
                            <a href="<?php echo MultiPostThumbnails::get_post_thumbnail_url(get_post_type(), 'fourth-image');?>">
                                <?php if (class_exists('MultiPostThumbnails')) : MultiPostThumbnails::the_post_thumbnail(get_post_type(), 'fourth-image'); endif; ?>
                            </a>
                        </td>
                    </tr>
                </table>
            </div>
            <?php else : ?>
                <?php the_content( __( 'More <span class="meta-nav">&rarr;</span>', 'huckleberry' ) ); ?>
                <?php wp_link_pages( array( 'before' => '<div class="page-links">' . __( 'Pages:', 'huckleberry' ), 'after' => '</div>' ) ); ?>
        </div>
            <?php endif; ?>
    <?php endif; ?> 
```

我对 IE 很糟糕，希望能得到任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T19:35:37.300

您是否尝试过以下...

```
margin:0px auto; or
left:0; right:0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T20:07:23.807

您已将其所在的 div 设置为正确的尺寸，并且不希望它从该 div 溢出...

那么设置

CSS：

```
tblid{
width : 100%;
length : 100%;
} 
```

不确定上面是否是正确的css格式

# c++ - 编译器用来确定移动操作是否安全的标准是什么？

> ID：14924827
> 
> 赞同：4
> 
> 时间：2013-02-17T18:59:41.980
> 
> 标签：c++, c++11, move-semantics

给定以下代码（[http://liveworkspace.org/code/5oact](http://liveworkspace.org/code/5oact)）：

```
class Foo
 {
     public:
         Foo()
         {
             log(__PRETTY_FUNCTION__);
         }
         Foo(const Foo& other)
         {
             log(__PRETTY_FUNCTION__);
         }
         Foo& operator=(const Foo& other)
         {
             log(__PRETTY_FUNCTION__);
             return *this;
         }
         Foo(Foo&& other) noexcept
         {
             log(__PRETTY_FUNCTION__);
         }
         Foo& operator=(Foo&& other) noexcept
         {
             log(__PRETTY_FUNCTION__);
             return *this;
         }
         ~Foo(){}
 }; 
```

使用这样的类：

```
std::vector<Foo> tt;

tt.emplace_back();
tt.emplace_back();
tt.emplace_back();
tt.emplace_back(); 
```

我得到以下输出：

```
Foo::Foo()
Foo::Foo()
Foo::Foo(const Foo&)
Foo::Foo()
Foo::Foo(const Foo&)
Foo::Foo(const Foo&)
Foo::Foo() 
```

如果我删除自定义析构函数，我会得到以下输出：

```
Foo::Foo()
Foo::Foo()
Foo::Foo(Foo&&)
Foo::Foo()
Foo::Foo(Foo&&)
Foo::Foo(Foo&&)
Foo::Foo() 
```

为什么在我声明析构函数时编译器使用复制构造函数而不是移动？我知道移动操作不能抛出（如果我`noexcept`从代码中删除，编译器根本不会使用它），但是析构函数与它有什么关系呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T19:23:30.937

首先，您的编译器似乎存在使用错误 noexcept 规范的问题。根据标准，*12.4.3*：

> 没有*异常规范*的析构函数声明被隐式认为具有与隐式声明相同的*异常规范*

`noexcept`如果所有成员和基的析构函数也是如此，则析构函数的隐式声明将是`noexcept`。因此，您的显式析构函数声明应等效于：

```
~Foo() noexcept {} // or:
~Foo() noexcept(true) {} 
```

但是您的编译器将其视为：

```
~Foo() noexcept(false) {} 
```

其次，*析构函数*的*异常规范*影响是否移动的决定的原因是因为操作中涉及到析构。正如移动*构造函数*和*移动赋值*操作会影响决策一样，如果有可能在过程中抛出异常，则不会使用移动。*`noexcept`*

# sql - Qt TableView 只排序一次

> ID：14924835
> 
> 赞同：0
> 
> 时间：2013-02-17T19:00:20.297
> 
> 标签：sql, qt, tableview

我有一个填充了 QSqlQueryModel 的 QTableView。我正在尝试根据选中的 RadioButton 对表格进行排序，但是当我按下它们时没有任何反应。有一次我可以对其进行排序，但只有一次。我在这里做错了什么？

```
void MainWindow::on_openButton_clicked()
{
    QString filePath = ui->lineEdit->text();

    if( filePath != "" ){
        if( openDB( filePath ) ){
            ui->debugLabel->setText("Database opened");
            MainWindow::populateTable();
        }else{
            ui->debugLabel->setText("Unable to open database");
        }
    } else {
        ui->debugLabel->setText("Path is empty");
    }
}

void MainWindow::populateTable(){
    if( readDB() ){
        ui->tableView->setModel(toast.dbModel);
    }
}

void MainWindow::on_shootButton_toggled(bool checked)
{
    if( checked ){
        ui->tableView->sortByColumn( 0 );
    }
}

void MainWindow::on_winButton_toggled(bool checked)
{
    if( checked ){
        ui->tableView->sortByColumn( 1 );
    }

}
bool openDB(QString path){
    db = QSqlDatabase::addDatabase("QSQLITE");
    db.setDatabaseName(path);
    return db.open();
}
bool readDB(){
    if( db.isOpen() ){
        dbModel->setQuery( "select * from test", db );
        return true;
    } else {
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-18T10:31:26.460

`QSqlQueryModel`默认情况下不可排序，`QSqlTableModel` *可*排序但两者之间存在差异。您可以`QSqlQueryModel`通过继承类并重新实现该`sort()`方法来进行排序，如果您查看文档，`QAbstractItemModel`它将为您提供一些有关它的详细信息。

# math - 计算显示分辨率（宽度和高度）

> ID：14924837
> 
> 赞同：0
> 
> 时间：2013-02-17T19:00:29.547
> 
> 标签：math, wolfram-mathematica

我想计算宽度/高度的显示结果，这个比率总是 0.75 例如：768/1024=0,75

我只有 MegaPixel 6,1 MP 的价值

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T19:17:39.390

不是数学：

```
width*height=megapixels
3*width*height=3*megapixels
3*width=4*height
4*height*height=3*megapixels
height^2=3*megapixels/4
height=sqrt(3*megapixels)/2
width=4/3*height 
```

您可能会遇到错误，因为 6.1 MP 不准确

# jquery - jquery全局访问数据，将其推送到对象中

> ID：14924838
> 
> 赞同：0
> 
> 时间：2013-02-17T19:00:44.160
> 
> 标签：jquery

我有一个通过 AJAX 调用提取数据的函数。我正在创建一个我想在其他函数中访问的对象。所以我想将数据发送到另一个全局对象。

这是当前的javascript：

```
var foursquareMapData = [];

function MapData() {

    $.ajax({
        dataType: 'jsonp',
        url: 'https://s3.amazonaws.com/sxsw_trending/sxsw_trending.json',
        jsonp: "callback",
        jsonpCallback: "sxswTrending",
        success: function (data) {
            //console.log(data);
            // var foursquareMapData = [];
            for (var i = 0; i < data.Trending.length; i++) {

                var mapData = {
                    index: i + 1,
                    lat: data.Trending[i].lat,
                    lng: data.Trending[i].lng,
                    count: data.Trending[i].hereNow,
                    address: data.Trending[i].address
                }
                //console.log(mapData);
                foursquareMapData.push(mapData);
            }
            //console.log(foursquareMapData);
        }
    });

}
console.log(foursquareMapData); 
```

将“mapData”对象推入foursqureMaData 似乎不起作用。我可能没有正确地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T19:04:18.627

那是因为您在 ajax 调用完成之前调用了控制台日志。尝试在 ajax 成功函数的末尾输出它，那么它应该是正确的。

[编辑]
哦刚刚看到你在成功函数的末尾已经有一个 console.log 了。那不是显示正确的数据吗？

[edit2]
你确实在`MapData()`某个地方打电话，对吧？因为它不在您的代码中。

# php - php - 不将变量加载到数据库中

> ID：14924841
> 
> 赞同：0
> 
> 时间：2013-02-17T19:01:03.303
> 
> 标签：php

我有一个数据库表 - 序列（自动增量主键）、版本和 turk_number。我正在使用以下代码插入新行。我通过 $_GET 接收这些变量并且我做了一个打印输出，所以我知道这些变量是可用的，所以我不确定出了什么问题。序列号和版本已加载，但未加载 turk_number。

```
$turk_number ='';
$serial='';
$version='';
if(isset($_GET['serial']))
{
    $serial=$_GET['serial'];
    $_SESSION['serial'] = $serial;
}
if(isset($_GET['version']))
{
    $version = $_GET['version'];
    $_SESSION['version'] = $version;
    print "version=" . $version;
}
if(isset($_GET['turk_number']))
{
    $turk_number= $_GET['turk_number'];
    $_SESSION['turk_number'] = $turk_number;
    print "turk number=".$turk_number;
}

//this assigns a participant a unique serial id at the beginning of the game
$hostname = "localhost";
$username = "root";
$password = "";
$dbname = "resolver";

try 
{
print 'turk2=' . $turk_number;
    $dbh = new PDO("mysql:host=$hostname;dbname=$dbname", $username, $password);

    $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

    $query2 = "INSERT INTO participants (version, turk_number) VALUES (:version, :turk_number)";
        $stmt = $dbh ->prepare($query2);
        $stmt ->execute(array(':version' => $version,
                            ':turk_number' => $turk_number));

}
catch(PDOException $e)
{
    echo $e->getMessage();
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-17T19:03:39.733

你忘记了引号。

改变：

```
$query2 = "INSERT INTO participants (version, turk_number) VALUES (:version, :turk_number)"; 
```

至：

```
$query2 = "INSERT INTO participants (version, turk_number) VALUES (':version', ':turk_number')"; 
```

# java - 具有多个表的 Android 内容提供程序

> ID：14924842
> 
> 赞同：0
> 
> 时间：2013-02-17T19:01:17.597
> 
> 标签：java, android

我正在使用一个 android 内容提供程序，并且我有一些要插入数据的表。第一个表有三列，在我的 usecontentprovider 类中，我使用底部的 toast 消息显示正在添加的所有行。一切正常。然后我尝试包含另一个具有两列（id2，id3）的表，我尝试查询该表并显示正在添加的行，每当我这样做时，我都会收到一条错误消息，提示无法读取第 0 行，第 -1 列一个有 1 行 3 列的 CursorWindow。我不确定我做错了什么，所以任何帮助将不胜感激。

```
public class UseContentProvideActivity extends Activity {

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);

            // add the 1st course
            ContentValues values = new ContentValues();
            values.put(MyContentProvider._ID, 1510);
            values.put(MyContentProvider.NAME, "Jordan");
            values.put(MyContentProvider.GRADE, 9);
            Uri uri = getContentResolver().insert(MyContentProvider.CONTENT_URI,
                            values);

            ContentValues values2 = new ContentValues();
            values2.put(MyContentProvider._ID2, 1510);
            values2.put(MyContentProvider._ID3, 9000);
            Uri uri2 = getContentResolver().insert(MyContentProvider.CONTENT_URI2,
                            values);
            uri2 = getContentResolver().insert(
                            Uri.parse("content://cs.ecl.provider.Courses/friend"), values);

            // query added highschooler
            Toast.makeText(this, "Added Schooler:", Toast.LENGTH_SHORT).show();
            Uri allDescs = Uri.parse("content://cs.ecl.provider.Courses/highschooler");
            Cursor cl = managedQuery(allDescs, null, null, null, "name");
            if (cl.moveToFirst()) {
                    do {
                            Toast.makeText(
                                            this,
                                            cl.getString(cl.getColumnIndex(MyContentProvider._ID))
                                                            + ", "
                                                            + cl.getString(cl
                                                                            .getColumnIndex(MyContentProvider.NAME))
                                                            + ", "
                                                            + cl.getString(cl
                                                                            .getColumnIndex(MyContentProvider.GRADE)),

                                            Toast.LENGTH_LONG).show();
                    } while (cl.moveToNext());
            }

            //2nd table
            // query added friends
                            Toast.makeText(this, "Added Friend:", Toast.LENGTH_SHORT).show();
                            Uri allDescs2 = Uri.parse("content://cs.ecl.provider.Courses/friend");
                            Cursor cl2 = managedQuery(allDescs2, null, null, null, "name");
                            if (cl2.moveToFirst()) {
                                    do {
                                            Toast.makeText(
                                                            this,
                                                            cl2.getString(cl2.getColumnIndex(MyContentProvider._ID2))
                                                                            + ", "
                                                                            + cl2.getString(cl2
                                                                                            .getColumnIndex(MyContentProvider._ID3))
                                                                            ,

                                                            Toast.LENGTH_LONG).show();
                                    } while (cl2.moveToNext());
                            }

            getContentResolver().delete(
                            Uri.parse("content://cs.ecl.provider.Courses/highschooler"), null,
                            null);
    } 
```

}

```
public class MyContentProvider extends ContentProvider {

    public static final String PROVIDER_NAME = "cs.ecl.provider.Courses";

    // first url
    public static final Uri CONTENT_URI = Uri.parse("content://"
                    + PROVIDER_NAME + "/highschooler");

    // second url
    public static final Uri CONTENT_URI2 = Uri.parse("content://"
                    + PROVIDER_NAME + "/friend");

    // third url
    public static final Uri CONTENT_URI3 = Uri.parse("content://"
                    + PROVIDER_NAME + "/like");

    public static final String _ID = "_id";
    public static final String NAME = "name";
    public static final String GRADE = "grade";

    public static final String _ID2 = "_id1";
    public static final String _ID3 = "_id2";

    private static final int COURSES = 1;
    private static final int COURSE_ID = 2;

    // 2nd
    private static final int COURSES2 = 3;
    private static final int COURSE2_ID = 4;

    private static final UriMatcher uriMatcher;
    static {
            uriMatcher = new UriMatcher(UriMatcher.NO_MATCH);
            uriMatcher.addURI(PROVIDER_NAME, "highschooler", COURSES);
            uriMatcher.addURI(PROVIDER_NAME, "highschooler/#", COURSE_ID);

            // second table
            uriMatcher.addURI(PROVIDER_NAME, "friend", COURSES2);
            uriMatcher.addURI(PROVIDER_NAME, "friend/#", COURSE2_ID);

    }

    // for using SQLite database
    private SQLiteDatabase coursesDB;
    private static final String DATABASE_NAME = "Lab2";
    private static final String DATABASE_TABLE = "Highschooler";

    // 2nd table
    private static final String DATABASE_TABLE2 = "Friend";

    private static final int DATABASE_VERSION = 1;
    private static final String DATABASE_CREATE = "create table "
                    // + DATABASE_TABLE + " (_id integer primary key autoincrement, "
                    + DATABASE_TABLE + " (_id integer, "
                    + "name text not null, grade integer);";

    private static final String DATABASE_CREATE2 = "create table "
    // + DATABASE_TABLE + " (_id integer primary key autoincrement, "
                    + DATABASE_TABLE2 + " (_id1 integer, " + "_id2 integer);";

    // for using SQLite database
    private static class DatabaseHelper extends SQLiteOpenHelper {
            DatabaseHelper(Context context) {
                    super(context, DATABASE_NAME, null, DATABASE_VERSION);
            }

            @Override
            public void onCreate(SQLiteDatabase db) {
                    db.execSQL(DATABASE_CREATE);
                    db.execSQL(DATABASE_CREATE2);
            }

            @Override
            public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
                    db.execSQL("DROP TABLE IF EXISTS descs");
                    onCreate(db);
            }
    }

    @Override
    public int delete(Uri arg0/* uri */, String arg1/* selection */,
String[] arg2/* delectionArgs */) {
            int count = 0;
            switch (uriMatcher.match(arg0)) {
            case COURSES:
                    count = coursesDB.delete(DATABASE_TABLE, arg1, arg2);
                    break;
            case COURSE_ID:
                    String id = arg0.getPathSegments().get(1);
                    count = coursesDB.delete(DATABASE_TABLE, _ID + " = " + id
                                    + (!TextUtils.isEmpty(arg1) ? " AND (" + arg1 + ')' : ""),
                                    arg2);
                    break;
            default:
                    throw new IllegalArgumentException("Unknown URI " + arg0);
            }
            getContext().getContentResolver().notifyChange(arg0, null);
            return count;
    }

    @Override
    public String getType(Uri uri) {
            switch (uriMatcher.match(uri)) {
            // get all courses
            case COURSES:
                    return "vnd.android.cursor.dir/vnd.ecl.courses ";
                    // get one course
            case COURSE_ID:
                    return "vnd.android.cursor.item/vnd.ecl.courses ";

                    // new stuff
                    // get all courses
            case COURSES2:
                    return "vnd.android.cursor.dir/vnd.ecl.courses2 ";
                    // get one course
            case COURSE2_ID:
                    return "vnd.android.cursor.item/vnd.ecl.courses2 ";

            default:
                    throw new IllegalArgumentException("Unsupported URI: " + uri);
            }
    }

    @Override
    public Uri insert(Uri uri, ContentValues values) {

             Uri _uri = null;
                switch (uriMatcher.match(uri)){
                case  COURSES:
                    System.out.println("GOT TO INSERT1");
                    long _ID1 = coursesDB.insert(DATABASE_TABLE, "", values);
                    //---if added successfully---
                    if (_ID1 > 0) {
                        _uri = ContentUris.withAppendedId(CONTENT_URI, _ID1);
                        getContext().getContentResolver().notifyChange(_uri, null);
                    }
                    break;
                case COURSES2:
                    System.out.println("GOT TO INSERT2");
                    long _ID2 = coursesDB.insert(DATABASE_TABLE2, "", values);
                    //---if added successfully---
                    if (_ID2 > 0) {
                        _uri = ContentUris.withAppendedId(CONTENT_URI2, _ID2);
                        getContext().getContentResolver().notifyChange(_uri, null);
                    }
                    break;
                default: throw new SQLException("Failed to insert row into " + uri);
                }
                return _uri;
            }

    @Override
    public boolean onCreate() {
            Context context = getContext();
            DatabaseHelper dbHelper = new DatabaseHelper(context);
            coursesDB = dbHelper.getWritableDatabase();
            return (coursesDB == null) ? false : true;

    }

    @Override
    public Cursor query(Uri uri, String[] projection, String selection,
                    String[] selectionArgs, String sortOrder) {

            SQLiteQueryBuilder sqlBuilder = new SQLiteQueryBuilder();
            sqlBuilder.setTables(DATABASE_TABLE);

            if (uriMatcher.match(uri) == COURSE_ID)
                    // -- if getting one course --
                    sqlBuilder.appendWhere(_ID + " = " + uri.getPathSegments().get(1));

            if (sortOrder == null || sortOrder == "")
                    sortOrder = NAME;

            Cursor cl = sqlBuilder.query(coursesDB, projection, selection,
                            selectionArgs, null, null, sortOrder);

            // register to watch a content URI for changes
            cl.setNotificationUri(getContext().getContentResolver(), uri);
            return cl;
    }

    @Override
    public int update(Uri uri, ContentValues values, String selection,
                    String[] selectionArgs) {
            int count = 0;
            switch (uriMatcher.match(uri)) {
            case COURSES:
                    count = coursesDB.update(DATABASE_TABLE, values, selection,
                                    selectionArgs);
                    break;
            case COURSE_ID:
                    count = coursesDB.update(
                                    DATABASE_TABLE,
                                    values,
                                    _ID
                                                    + " = "
                                                    + uri.getPathSegments().get(1)
                                                    + (!TextUtils.isEmpty(selection) ? " AND ("
                                                                    + selection + ')' : ""), selectionArgs);
                    break;
            default:
                    throw new IllegalArgumentException("Unknown URI " + uri);
            }
            getContext().getContentResolver().notifyChange(uri, null);
            return count;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-14T15:13:16.670

当然，我对 ContentProviders 很陌生（本周才开始学习它们），但我认为您的问题就在这里：

```
public Cursor query(Uri uri, String[] projection, String selection,
                String[] selectionArgs, String sortOrder) {

        SQLiteQueryBuilder sqlBuilder = new SQLiteQueryBuilder();
        sqlBuilder.setTables(DATABASE_TABLE); 
```

您将表设置为`DATABASE_TABLE`，而不是使用开关来捕获 的出现`COURSES2`，这是您的 UriMatcher 代码，用于当您以 结束 Uri 时`/friend`。因此，它试图查看您的 Highschoolers 表，并且您为该表提供了无效的列名（我认为这就是它无法读取“列 -1”的原因）。

所以这里是你如何让它引用 Friends 表：

```
 public Cursor query(Uri uri, String[] projection, String selection,
                String[] selectionArgs, String sortOrder) {
     SQLiteQueryBuilder sqlBuilder = new SQLiteQueryBuilder();
     switch(uriMatcher.match(uri)){
         case COURSE_ID:
             // -- if getting one course --
             sqlBuilder.setTables(DATABASE_TABLE);
             sqlBuilder.appendWhere(_ID + " = " + uri.getPathSegments().get(1));
             break;
         case COURSES2
             sqlBuilder.setTables(DATABASE_TABLE2);
             break;
         default:
             throw new IllegalArgumentException("Bad Uri");
    } 
```

关于您的代码的另一个注意事项：尝试使您的变量比`DATABASE_TABLE`and `DATABASE_TABLE2`， or `COURSES`and更具描述性`COURSES2`。使用描述性变量使事情更容易记住，尤其是随着代码的增长（我目前使用的是 843 行的 ContentProvider，而且它还在增长）。

就像我说的，我是 ContentProviders 的新手，所以我可能遗漏了你可以做的一些其他事情来改进你的代码，但我提供的解决方案应该足以让你的代码正常工作。

# php - 类似乎不是托管的 Doctrine 实体。你忘了映射它吗？

> ID：14924849
> 
> 赞同：2
> 
> 时间：2013-02-17T19:01:42.100
> 
> 标签：php, symfony, doctrine-orm, mapping, query-builder

我想要做的是获取一个帖子（帖子实体）表单，我可以在其中从另一个实体（文件实体）中选择一张特色图片。

最后，我只想显示“特色图像”类型的文件，但即使我删除了我的 query_builder 我有一个异常说：

> “Site\Backend\Adminbundle\Entity\File”类似乎不是托管的 Doctrine 实体。你忘了映射它吗？

这是我的 PostType 表单

```
public function buildForm(FormBuilderInterface $builder, array $options) {
    $builder
           ->add('title')
           ->add('thumb', 'entity', array(
                'class' => 'Site\Backend\Adminbundle\Entity\File',
                'query_builder' => function(EntityRepository $er) {
                    return $er->createQueryBuilder('f')
                        //->where('f.state = :state')
                        //->setParameter('state', $prms['state'])
                        ->orderBy('f.dateUpdated', 'DESC');
                }
           ))
} 
```

另一方面，我有两个实体：

这是我的文件实体

```
<?php

namespace Site\Backend\AdminBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Assert;
use Symfony\Component\HttpFoundation\File\UploadedFile;
use Doctrine\Common\Collections\ArrayCollection;

/**
 * Site\Backend\AdminBundle\Entity\File
 *
 * @ORM\Table()
 * @ORM\Entity
 * @ORM\HasLifecycleCallbacks
 */
class File {

/**
 * @var integer $id
 *
 * @ORM\Column(name="id", type="integer")
 * @ORM\Id
 * @ORM\GeneratedValue(strategy="AUTO")
 */
private $id;

/**
 * @var \DateTime
 *
 * @ORM\Column(name="dateCreated", type="datetime")
 */
private $dateCreated;

/**
 * @var \DateTime
 *
 * @ORM\Column(name="dateUpdated", type="datetime")
 */
private $dateUpdated;

/**
 * @var string $name
 *
 * @ORM\Column(name="name", type="string", length=255)
 */
private $name;

/**
 * @Assert\File(maxSize="6000000")
 */
private $file;

/**
 * @ORM\Column(type="string", length=255)
 */
public $path;

/**
 * @ORM\ManyToOne(targetEntity="TypeFile", inversedBy="files")
 */
private $type;

/**
 * @var string
 *
 * @ORM\OneToMany(targetEntity="Site\Backend\BlogBundle\Entity\Post", mappedBy="thumb")
 */
private $posts;

public function __construct() {
    $this->setDateCreated(new \DateTime());
    $this->setDateUpdated(new \DateTime());
    $this->type = new ArrayCollection();
}

/**
 * @ORM\PrePersist()
 * @ORM\PreUpdate()
 */
public function preUpload() {
    $this->setDateUpdated(new \DateTime());
    if (null !== $this->file) {
        // do whatever you want to generate a unique name
        $this->path = sha1(uniqid(mt_rand(), true)) . '.' . $this->file->guessExtension();
    } else {
        //throwException($e);
    }
}

/**
 * @ORM\PostPersist()
 * @ORM\PostUpdate()
 */
public function upload() {
    if (null === $this->file) {
        return;
    }

    // if there is an error when moving the file, an exception will
    // be automatically thrown by move(). This will properly prevent
    // the entity from being persisted to the database on error
    $this->file->move($this->getUploadRootDir(), $this->path);

    unset($this->file);
}

/**
 * @ORM\PostRemove()
 */
public function removeUpload() {
    if ($file = $this->getAbsolutePath()) {
        if (file_exists($file)) {
            unlink($file);
        }
    }
}

public function getAbsolutePath() {
    return null === $this->path ? null : $this->getUploadRootDir() . '/' . $this->path;
}

public function getWebPath() {
    return null === $this->path ? null : './' . $this->getUploadDir() . '/' . $this->path;
}

protected function getUploadRootDir() {
    // the absolute directory path where uploaded documents should be saved
    return __DIR__ . '/../../../../../web/' . $this->getUploadDir();
}

protected function getUploadDir() {
    // get rid of the __DIR__ so it doesn't screw when displaying uploaded doc/image in the view.
    return 'uploads/' . $this->type;
}

/**
 * Get id
 *
 * @return integer 
 */
public function getId() {
    return $this->id;
}

/**
 * Set name
 *
 * @param string $name
 * @return File
 */
public function setName($name) {
    $this->name = $name;

    return $this;
}

/**
 * Get name
 *
 * @return string 
 */
public function getName() {
    return $this->name;
}

/**
 * Set path
 *
 * @param string $path
 * @return File
 */
public function setPath($path) {
    $this->path = $path;

    return $this;
}

/**
 * Get path
 *
 * @return string 
 */
public function getPath() {
    return $this->path;
}

public function __toString() {
    return $this->name;
}

/**
 * Add type
 *
 * @param Site\Backend\AdminBundle\Entity\TypeFile $type
 * @return File
 */
public function addType(\Site\Backend\AdminBundle\Entity\TypeFile $type) {
    $this->type[] = $type;

    return $this;
}

/**
 * Remove type
 *
 * @param Site\Backend\AdminBundle\Entity\TypeFile $type
 */
public function removeType(\Site\Backend\AdminBundle\Entity\TypeFile $type) {
    $this->type->removeElement($type);
}

/**
 * Get type
 *
 * @return Doctrine\Common\Collections\Collection 
 */
public function getType() {
    return $this->type;
}

/**
 * Set type
 *
 * @param Site\Backend\AdminBundle\Entity\TypeFile $type
 * @return File
 */
public function setType(\Site\Backend\AdminBundle\Entity\TypeFile $type = null) {
    $this->type = $type;

    return $this;
}

public function getFile() {
    return $this->file;
}

public function setFile($file) {
    $this->file = $file;
}

/**
 * Set dateCreated
 *
 * @param \DateTime $dateCreated
 * @return File
 */
public function setDateCreated($dateCreated) {
    $this->dateCreated = $dateCreated;

    return $this;
}

/**
 * Get dateCreated
 *
 * @return \DateTime 
 */
public function getDateCreated() {
    return $this->dateCreated;
}

/**
 * Set dateUpdated
 *
 * @param \DateTime $dateUpdated
 * @return File
 */
public function setDateUpdated($dateUpdated) {
    $this->dateUpdated = $dateUpdated;

    return $this;
}

/**
 * Get dateUpdated
 *
 * @return \DateTime 
 */
public function getDateUpdated() {
    return $this->dateUpdated;
}

/**
 * Add posts
 *
 * @param \Site\Backend\BlogBundle\Entity\Post $posts
 * @return File
 */
public function addPost(\Site\Backend\BlogBundle\Entity\Post $posts)
{
    $this->posts[] = $posts;

    return $this;
}

/**
 * Remove posts
 *
 * @param \Site\Backend\BlogBundle\Entity\Post $posts
 */
public function removePost(\Site\Backend\BlogBundle\Entity\Post $posts)
{
    $this->posts->removeElement($posts);
}

/**
 * Get posts
 *
 * @return \Doctrine\Common\Collections\Collection 
 */
public function getPosts()
{
    return $this->posts;
}
} 
```

这是我的 Post 实体

```
<?php

namespace Site\Backend\BlogBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Doctrine\Common\Collections\ArrayCollection;

/**
 * Post
 *
 * @ORM\Table()
 * @ORM\Entity
 */
class Post
{
    /**
     * @var integer
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @var string
     *
     * @ORM\Column(name="title", type="string", length=255)
     */
    private $title;

    /**
     * @var \DateTime
     *
     * @ORM\Column(name="dateCreated", type="datetime")
     */
    private $dateCreated;

    /**
     * @var \DateTime
     *
     * @ORM\Column(name="dateUpdated", type="datetime")
     */
    private $dateUpdated;

    /**
     * @var \DateTime
     *
     * @ORM\Column(name="datePublished", type="datetime", nullable=true)
     */
    private $datePublished;

    /**
     * @var string
     *
     * @ORM\Column(name="state", type="string", length=255)
     */
    private $state;

    /**
     * @var string
     *
     * @ORM\Column(name="content", type="text")
     */
    private $content;

    /**
     * @var Author
     * @ORM\ManyToOne(targetEntity="Site\Backend\AdminBundle\Entity\User", inversedBy="posts")
     */
    private $author;

    /**
     * @var Thumb
     * @ORM\ManyToOne(targetEntity="Site\Backend\AdminBundle\Entity\File", inversedBy="posts")
     */
    private $thumb;

    /**
     * @var Comments
     * @ORM\OneToMany(targetEntity="Comment", mappedBy="post")
     */
    private $comments;

    /**
     * @var Categories
     * @ORM\ManyToMany(targetEntity="Category", cascade={"persist"})
     */
    private $categories;

    /**
     * @var Tags
     * @ORM\ManyToMany(targetEntity="Tag", cascade={"persist"})
     */
    private $tags;

    /**
     * Constructeur
     */
    public function __construct()
    {
        $this->setDateCreated(new \DateTime());
        $this->setDateUpdated(new \DateTime());
        $this->comments = new ArrayCollection();
        $this->Categories = new ArrayCollection();
        $this->tags = new ArrayCollection();
    }

    public function __toString(){
        return $this->title;
    }
    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set title
     *
     * @param string $title
     * @return Post
     */
    public function setTitle($title)
    {
        $this->title = $title;

        return $this;
    }

    /**
     * Get title
     *
     * @return string 
     */
    public function getTitle()
    {
        return $this->title;
    }

    /**
     * Set dateCreated
     *
     * @param \DateTime $dateCreated
     * @return Comment
     */
    public function setDateCreated($dateCreated)
    {
        $this->dateCreated = $dateCreated;

        return $this;
    }

    /**
     * Get dateCreated
     *
     * @return \DateTime 
     */
    public function getDateCreated()
    {
        return $this->dateCreated;
    }

    /**
     * Set dateUpdated
     *
     * @param \DateTime $dateUpdated
     * @return Comment
     */
    public function setDateUpdated($dateUpdated)
    {
        $this->dateUpdated = $dateUpdated;

        return $this;
    }

    /**
     * Get dateUpdated
     *
     * @return \DateTime 
     */
    public function getDateUpdated()
    {
        return $this->dateUpdated;
    }

    /**
     * Get datePublished
     *
     * @return \DateTime 
     */
    public function getDatePublished()
    {
        return $this->datePublished;
    }

    /**
     * Set datePublished
     *
     * @param \DateTime $datePublished
     * @return Comment
     */
    public function setDatePublished($datePublished)
    {
        $this->datePublished = $datePublished;

        return $this;
    }

    /**
     * Set state
     *
     * @param string $state
     * @return Post
     */
    public function setState($state)
    {
        $this->state = $state;

        return $this;
    }

    /**
     * Get state
     *
     * @return string 
     */
    public function getState()
    {
        return $this->state;
    }

    /**
     * Set content
     *
     * @param string $content
     * @return Post
     */
    public function setContent($content)
    {
        $this->content = $content;

        return $this;
    }

    /**
     * Get content
     *
     * @return string 
     */
    public function getContent()
    {
        return $this->content;
    }

    /**
     * Set author
     *
     * @param \Site\Backend\AdminBundle\Entity\User $author
     * @return Post
     */
    public function setAuthor(\Site\Backend\AdminBundle\Entity\User $author = null)
    {
        $this->author = $author;

        return $this;
    }

    /**
     * Get author
     *
     * @return \Site\Backend\AdminBundle\Entity\User 
     */
    public function getAuthor()
    {
        return $this->author;
    }

    /**
     * Add comments
     *
     * @param \Site\Backend\BlogBundle\Entity\Comment $comments
     * @return Post
     */
    public function addComment(\Site\Backend\BlogBundle\Entity\Comment $comments)
    {
        $this->comments[] = $comments;

        return $this;
    }

    /**
     * Remove comments
     *
     * @param \Site\Backend\BlogBundle\Entity\Comment $comments
     */
    public function removeComment(\Site\Backend\BlogBundle\Entity\Comment $comments)
    {
        $this->comments->removeElement($comments);
    }

    /**
     * Get comments
     *
     * @return \Doctrine\Common\Collections\Collection 
     */
    public function getComments()
    {
        return $this->comments;
    }

    /**
     * Add Categories
     *
     * @param \Site\Backend\BlogBundle\Entity\Category $categories
     * @return Post
     */
    public function addCategory(\Site\Backend\BlogBundle\Entity\Category $category)
    {
        $this->categories[] = $category;

        return $this;
    }

    /**
     * Add Categories
     *
     * @param \Site\Backend\BlogBundle\Entity\Category $categories
     * @return Post
     */
    public function addCategoriesNew(\Site\Backend\BlogBundle\Entity\Category $category)
    {
        $this->categories[] = $category;

        return $this;
    }

    /**
     * Remove Categories
     *
     * @param \Site\Backend\BlogBundle\Entity\Category $categories
     */
    public function removeCategory(\Site\Backend\BlogBundle\Entity\Category $category)
    {
        $this->categories->removeElement($category);
    }

    /**
     * Remove Categories
     *
     * @param \Site\Backend\BlogBundle\Entity\Category $categories
     */
    public function removeCategoriesNew(\Site\Backend\BlogBundle\Entity\Category $category)
    {

    }

    /**
     * Get Categories
     *
     * @return \Doctrine\Common\Collections\Collection 
     */
    public function getCategories()
    {
        return $this->categories;
    }

    /**
     * Get Categories
     *
     * @return \Doctrine\Common\Collections\Collection 
     */
    public function getCategoriesNew()
    {
        //return $this->categories;
    }

    /**
     * Add tags
     *
     * @param \Site\Backend\BlogBundle\Entity\tag $tags
     * @return Post
     */
    public function addTag(\Site\Backend\BlogBundle\Entity\Tag $tags)
    {
        $this->tags[] = $tags;

        return $this;
    }

    /**
     * Add tags
     *
     * @param \Site\Backend\BlogBundle\Entity\tag $tags
     * @return Post
     */
    public function addTagsNew(\Site\Backend\BlogBundle\Entity\Tag $tags)
    {
        $this->tags[] = $tags;

        return $this;
    }

    /**
     * Remove tags
     *
     * @param \Site\Backend\BlogBundle\Entity\Tag $tags
     */
    public function removeTag(\Site\Backend\BlogBundle\Entity\Tag $tags)
    {
        $this->tags->removeElement($tags);
    }

    /**
     * Remove Tags
     *
     * @param \Site\Backend\BlogBundle\Entity\tag $tags
     */
    public function removeTagsNew(\Site\Backend\BlogBundle\Entity\Tag $tags)
    {
        //$this->tags->removeElement($tags);
    }

    /**
     * Get Tags
     *
     * @return \Doctrine\Common\Collections\Collection 
     */
    public function getTags()
    {
        return $this->tags;
    }

    /**
     * Get Tags
     *
     * @return \Doctrine\Common\Collections\Collection 
     */
    public function getTagsNew()
    {
        //return $this->Tags;
    }

    /**
     * Add Categories
     *
     * @param \Site\Backend\BlogBundle\Entity\Category $categories
     * @return Post
     */
    public function addCategorie(\Site\Backend\BlogBundle\Entity\Category $categories)
    {
        $this->categories[] = $categories;

        return $this;
    }

    /**
     * Remove Categories
     *
     * @param \Site\Backend\BlogBundle\Entity\Category $categories
     */
    public function removeCategorie(\Site\Backend\BlogBundle\Entity\Category $categories)
    {
        $this->categories->removeElement($categories);
    }

    /**
     * @ORM\preUpdate
     */
    public function setUpdateValue(){
        $this->setDateUpdated(new \DateTime());
    }

    /**
     * Set thumb
     *
     * @param \Site\Backend\AdminBundle\Entity\File $thumb
     * @return Post
     */
    public function setThumb(\Site\Backend\AdminBundle\Entity\File $thumb = null)
    {
        $this->thumb = $thumb;

        return $this;
    }

    /**
     * Get thumb
     *
     * @return \Site\Backend\AdminBundle\Entity\File 
     */
    public function getThumb()
    {
        return $this->thumb;
    }
    } 
```

提前谢谢我希望我很清楚，如果不是这样，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T04:44:53.970

尝试改变：

Site\Backend\Admin **bundle** \Entity\File

至

Site\Backend\Admin **B**解压\Entity\File

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T07:53:12.377

解决此案的另一种方法：

```
->add('thumb', null, array(
                  'query_builder' => function(EntityRepository $er) {
                      return $er->createQueryBuilder('f')
                            ->select('f')
                            ->leftJoin('f.type', 't')
                            ->where('t.name = :type')
                            ->setParameter('type', 'Featured Images')
                            ->orderBy('f.dateUpdated', 'DESC');
                  }
               )) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-08T13:54:14.650

如果您使用多个连接，您可能忘记映射您的捆绑包。确保是这种情况`app/config/config.yml`：

```
orm:
  entity_managers:
    default:
      mappings:
        AppBundle: ~
        SiteBackendAdminBundle: ~ 
```

或者，如果您想拆分为多个实体管理器：

```
orm:
  entity_managers:
    default:
      mappings:
        AppBundle: ~
    admin:
      mappings:
        SiteBackendAdminBundle: ~ 
```

文档[Symfony/Doctrine：多个实体管理器](https://symfony.com/doc/current/doctrine/multiple_entity_managers.html)。

# asp.net-mvc - 隐藏的 ViewModel 属性在 null 时默认为 0 - 应保持为 null

> ID：14924850
> 
> 赞同：0
> 
> 时间：2013-02-17T19:01:43.353
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

获取控制器方法：

```
 public ActionResult Create(int? parentId)
    {
        var model = new CreatePersonViewModel();

        // pull set from db
        var parent = _db.Persons.FirstOrDefault(s => s.PersonId == parentId);

        if (parent != null)
        {
            model.ParentId = parent.PersonId;
        }

        return View("Create", model);
    } 
```

邮政：

```
public ActionResult Create(CreatePersonViewModel viewModel) // viewModel.ParentId is 0 when it's passed to this method from the view, even though I didn't set it, and it's null coming from GET.  
        {
            //bla bla
        } 
```

我的观点：

```
@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>CreatePersonViewModel</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.Name)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Name)
            @Html.ValidationMessageFor(model => model.Name)
        </div>

        @Html.HiddenFor(model => model.ParentId) // tried with second parameter of "null" as well

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
} 
```

知道为什么视图在该属性中返回 0 值以应对它应该为空的情况吗？我没有任何细节要在这里添加，但表单验证要求更多文本，所以在这里。

# c# - 转换 ac# 表达式

> ID：14924851
> 
> 赞同：0
> 
> 时间：2013-02-17T19:01:48.653
> 
> 标签：c#, lambda, expression, expressionvisitor

我正在尝试转换 ac# 表达式。这是我正在寻找的示例结果。兑换：

```
Expression<Func<TestObj, bool>> filter = p => p.LastName == "Smith"; 
```

对此：

```
Expression<Func<DynamicItem, bool>> converted = p => p.FieldID == 5 && p.FieldValue == "Smith" 
```

正如您在下面的代码中看到的那样，FieldID 实际上是通过类上的属性的反射来获取的。我现在得到的错误是从 Convert 返回的错误是“'System.Int32' 类型的表达式不能用于返回类型'System.Boolean'”

我碰壁了，想也许有人可以看到我在这里做错了什么。这是我的代码：

```
public class MongoReplaceAttribute : Attribute
{
    public int FieldID { get; set; }
}

public class TestObj
{
    [MongoReplaceAttribute(FieldID = 1)]
    public string FirstName { get; set; }

    [MongoReplaceAttribute(FieldID = 2)]
    public string LastName { get; set; }
}

public class DynamicItem
{
    public int FieldID { get; set; }
    public string FieldValue { get; set; }
}

class Program
{
    static void Main(string[] args)
    {
        string v = "Smith";

        Expression<Func<TestObj, bool>> test = p => p.LastName == v;
        var list = MagicFunction(test);

        Console.ReadLine();
    }

    static IEnumerable<DynamicItem> MagicFunction(Expression<Func<TestObj, bool>> filter)
    {
        List<DynamicItem> rands = new List<DynamicItem>() 
        { 
            new DynamicItem 
            { 
                FieldID = 1, 
                FieldValue = "Bob" 
            }, 
            new DynamicItem 
            { 
                FieldID = 2, 
                FieldValue = "Smith" 
            },
            new DynamicItem 
            { 
                FieldID = 1, 
                FieldValue = "Alice" 
            }, 
            new DynamicItem 
            { 
                FieldID = 2, 
                FieldValue = "Smith" 
            } 
        };

        var f2 = Converter<DynamicItem>.Convert(filter);

        return rands.AsQueryable<DynamicItem>().Where(f2);
    }
}

class Converter<TTo>
{
    class ConversionVisitor : ExpressionVisitor
    {
        private readonly ParameterExpression newParameter;
        private readonly ParameterExpression oldParameter;

        public ConversionVisitor(ParameterExpression newParameter, ParameterExpression oldParameter)
        {
            this.newParameter = newParameter;
            this.oldParameter = oldParameter;
        }

        protected override Expression VisitLambda<T>(Expression<T> node)
        {
            return base.VisitLambda<T>(node);
        }

        protected override Expression VisitBinary(BinaryExpression node)
        {
            Expression left = this.Visit(node.Left);
            Expression right = this.Visit(node.Right);
            Expression conversion = this.Visit(node.Conversion);

            if (left != node.Left)
            {
                return base.Visit(left);
            }
            else if (right != node.Right)
            {
                var r = base.Visit(right);
                return r;
            }
            else
            {
                return node;
            }
        }

        protected override Expression VisitParameter(ParameterExpression node)
        {
            return newParameter;
        }

        protected override Expression VisitMember(MemberExpression node)
        {
            if (node.Expression != oldParameter)
            {
                return base.VisitMember(node);
            }

            var s = node.Member;
            var attrReader = s.GetCustomAttributes(typeof(MongoReplaceAttribute), true).Cast<MongoReplaceAttribute>();

            //If we are a mongo attribute
            if (attrReader != null && attrReader.Count() > 0)
            {
                var id = attrReader.First().FieldID;
                Expression<Func<DynamicItem, bool>> ret = p => p.FieldID == id && p.FieldValue == (string)GetValue(node);
                ParameterExpression param = Expression.Parameter(typeof(DynamicItem), "p");
                var lambda = Expression.Lambda<Func<DynamicItem, bool>>(ret.Body, param);
                return base.Visit(lambda.Body);
            }
            return base.VisitMember(node);
        }

        private object GetValue(MemberExpression member)
        {
            var objectMember = Expression.Convert(member, typeof(object));
            var getterLambda = Expression.Lambda<Func<object>>(objectMember);
            var getter = getterLambda.Compile();
            return getter();
        }
    }

    public static Expression<Func<TTo, TR>> Convert<TFrom, TR>(
        Expression<Func<TFrom, TR>> e)
    {
        var oldParameter = e.Parameters[0];
        var newParameter = Expression.Parameter(typeof(TTo), oldParameter.Name);
        var converter = new ConversionVisitor(newParameter, oldParameter);
        var newBody = converter.Visit(e.Body);
        return Expression.Lambda<Func<TTo, TR>>(newBody, newParameter);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T19:42:20.637

在下面`newBody`的代码中，似乎没有正确创建。`e.Body`is `p.LastName == "Smith"` but `newBody`is`p.FieldID`而不是 expected `p.FieldId==5`。注意缺少的相等比较。
因此，在最后一行中，当您尝试`Func<DynamicItem, bool>`从返回 int (p.FieldId) 的主体创建 Lambda 时，它会引发错误。

这很可能是由于 ConversionVisitor 中的一些错误。调试您的 ConversionVisitor 以查看它为什么会创建不正确的正文。

```
public static Expression<Func<TTo, TR>> Convert<TFrom, TR>(
    Expression<Func<TFrom, TR>> e)
{
    var oldParameter = e.Parameters[0];
    var newParameter = Expression.Parameter(typeof(TTo), oldParameter.Name);
    var converter = new ConversionVisitor(newParameter, oldParameter);
    var newBody = converter.Visit(e.Body);
    return Expression.Lambda<Func<TTo, TR>>(newBody, newParameter);
} 
```

# tdd - 测试 CRUD 中的 KO 断言，来自 Phpunit 和 Yii

> ID：14924852
> 
> 赞同：0
> 
> 时间：2013-02-17T19:01:59.843
> 
> 标签：tdd, phpunit, yii, gii

我正在遵循手册“使用 Yii1.1 和 PHP5 开发敏捷 Web 应用程序”，但我不知道，为什么测试 CRUD 失败，

在正确测试“数据库连接”（第 4 章）之后，它是从 Gii 正确创建的“实体 AR 类”，但在创建 testCRUD 时，输出返回是一个错误的断言，如下所示：

好的（1 个测试，0 个断言）

只是我在手册中没有遵循一个步骤，即创建 CDbConnection 类，因为测试连接没问题。此外，我检查了所有更改类 Test 和 main.php 文件，一切正常。

实体测试.php

```
class EntityTest extends CDbTestCase
{   
    public function testCRUD()
    {
    }
} 
```

实体.php

```
 public function testCRUD()
    {
    $newEntity=new Entity;
    $newEntity->setAttributes(
        array(
                'name' => 'Test Entity 1',
                'description' => 'Test entity number one',
                'type_id' => 1,
                'location_lat' => 77,
                'location_lon' => 77,
                'create_time' => '2013-02-16 20:36:00',
                'create_user_id' => 1,
                'update_time' => '0000-00-00 00:00:00',
                'update_user_id' => 0,
            )
    );
    $this->assertTrue($newEntity->save(false));

    $retrievedEntity=Entity::model()->findByPk(1);
    $this->assertTrue($retrievedEntity instanceof Entity);
    $this->assertEquals('Salva la Prospe',$retrievedProject->name);
} 
```

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T02:22:51.620

测试在它自己的类中运行方法，它不会在它正在测试的对象中调用测试方法。

这解释了为什么它说 0 个断言。您的测试只是一个空方法。

只需将所有 testCRUD 代码从 Entity.php 文件移动到 EntityTest.php 文件，它就可以工作了。

# jquery - 无法使用 jquery 检索文本输入的值

> ID：14924855
> 
> 赞同：0
> 
> 时间：2013-02-17T19:02:31.557
> 
> 标签：jquery

当如此简单的事情以我的头撞上一个小时而结束时，它杀死了我。

我只是想收集有关 ajax 提交的信息。

我能做的是检索属性值，我可以设置文本输入的值，然后检索该值，但如果该值是由用户手动设置的，我无法检索该值。出于测试目的，我添加了按钮来执行我尝试过的所有操作。

我还在 jsfiddle 上设置了它，它在那里工作正常 [http://jsfiddle.net/x6p5k/](http://jsfiddle.net/x6p5k/)

我怀疑问题出在我正在使用的pageslide jquery插件中 [http://srobbin.com/jquery-plugins/pageslide/](http://srobbin.com/jquery-plugins/pageslide/)

谢谢您的帮助

HTML

```
<label class="control-label" for="inputName">Name</label>
  <div class="controls">
    <input type="text" id="inputName" name="inputName" value="" placeholder="Name">
  </div>

 <label class="control-label" for="inputEmain">Email</label>
  <div class="controls">
    <input type="text" id="inputEmail" name="inputEmail" value="" placeholder="Email Address">

...

<button type="button" class="btn btn-primary pull-right" id="value">value</button>  
<button type="button" class="btn btn-primary pull-right" id="type">type</button>    
<button type="button" class="btn btn-primary pull-right" id="set_value">set value</button> 
```

jQuery

```
$("#value").click(function()
    {
    var Variablename = $("#inputName").val();
    window.alert(Variablename);
    });

$("#type").click(function()
    {
    var Variablename = $("#inputName").attr("type");
    window.alert(Variablename);
    });

$("#set_value").click(function()
    {
    $("input#inputName").val("hello world");
    }); 
```

当您单击顶部菜单上的联系人时，我试图使其工作的网站是[http://whispersofawillow.org 。](http://whispersofawillow.org)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T19:16:45.147

我认为您使用 2 个具有相同 id 的 div 的事实：

```
$("input#inputName").length 
```

使用上面的行检查您的控制台。

正如我所调查的那样，每次您将表单添加到您的页面时，都会向您的页面添加一个新的输入。

# unix - 为什么是cd。甚至有用

> ID：14924858
> 
> 赞同：0
> 
> 时间：2013-02-17T19:02:51.013
> 
> 标签：unix

我试图理解为什么有人会使用`cd .` 该`cd ..`命令将您带到您的父目录。该`cd`命令将带你到你的主目录，`cd .`带你到你的“密码”

我可以看到前两个的用途，但最后一个没有。任何人都可以分享他们的经验`cd .`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T19:07:23.353

`cd .`很少有用，但`.`有很多用途。例如，某些版本`find`需要目录参数并且不将其设置`.`为默认值，因此您必须键入`find .`. 或者从 运行脚本`.`，你会这样做`./script.sh`。或者要列出当前目录的权限，您可以执行`ls -ld .`.

我曾经有过的一个用途`cd .`是，如果您所在的目录已被删除并重新创建。许多命令开始神秘地失败，直到您键入`cd .`转到目录的“新”化身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T19:07:38.097

该`cd`命令可以采用任何格式的相对路径，包括`.`.

`cd`为disallows添加一个特殊的例外是没有意义的`.`。

相对路径对`.`其他命令很有用；例如，这是引用当前目录的最简单方法。

# javascript - 从矩阵javascript中删除重复的行

> ID：14924860
> 
> 赞同：0
> 
> 时间：2013-02-17T19:03:09.867
> 
> 标签：javascript, arrays, duplicate-removal

**请阅读**：我知道这感觉就像在 Stack Overflow 上得到了令人作呕的回答，但我发誓我找不到一个好的答案。[此外，将其标记为“可能重复”太元了！](http://xkcd.com/917/)

我有一个特定顺序的值矩阵（在javascript中）：

[ [1,2], [1,2], [3,4], [5,6] [5,6] ]

但是我最近了解到，[当有相同的行时，Google 图表会崩溃](https://stackoverflow.com/questions/14782295/javascript-remove-all-mouseover-events-from-an-object)。我需要删除重复项；但是，该数组相当大，我无法承受幼稚实现的二次时间。

通常，如果每行都是可散列的，我会将它们添加到字典`{ }`中以查看我已经看到的；但是，javascript 不允许对数组进行散列处理。

最好的方法是什么？我想我可以将每一行的数组转换为一个字符串并将其用作键，但这感觉就像一个非常肮脏（并且可能很慢）的黑客攻击。我真的很喜欢你的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-02-27T11:30:26.110

您可以使用 Set 和 JSON Stringify/Parse 轻松删除重复项。所以这种方法将保持矩阵的顺序。

```
const array = [[1, 2],[1, 2],[3, 4],[5, 6],[5, 6]];
const set = new Set(array.map(JSON.stringify));
const arr = [...set].map(JSON.parse);

console.log(arr);// output : [[1,2], [3,4], [5,6]] 
```

# c++ - 可变参数模板：无效表达式的无效使用

> ID：14924861
> 
> 赞同：2
> 
> 时间：2013-02-17T19:03:27.623
> 
> 标签：c++, c++11, variadic-templates

我正在尝试为事件创建一个通用集合，以便它可用于不同类型的事件集。在使用可变参数模板时，我遇到了[这个答案](https://stackoverflow.com/a/9650857)，这对我的示例有所帮助：

```
#include <boost/test/unit_test.hpp>

#include <string>
#include <unordered_map>

namespace
{
struct Event3 {
    static const int event_type = 3;
    int a;
};

struct Event5 {
    static const int event_type = 5;
    double d;
};

struct Event7 {
    static const int event_type = 7;
    std::string s;
};

template <class ...K>
void gun(K...) {}

template <class... Ts>
class EventCollection
{
    template <typename T>
    void update_map(std::unordered_map<int, size_t> & map, const T &)
    {
        BOOST_CHECK(map.find(T::event_type) == map.end());
        map[T::event_type] = sizeof(T);
    }

public:
    std::unordered_map<int, size_t> curr_map;

    EventCollection(Ts... ts)
    {
        gun(update_map(curr_map, ts)...); // will expand for each input type
    }
};

} // namespace

BOOST_AUTO_TEST_CASE( test_01 )
{
    Event3 x{13};
    Event5 y{17.0};
    Event7 z{"23"};

    EventCollection<Event3, Event5, Event7> hoshi(x, y, z);
    BOOST_CHECK_EQUAL(hoshi.curr_map.size(), 3);
} 
```

然而，线

```
gun(update_map(curr_map, ts)...); // will expand for each input type 
```

给我一个“错误：无效使用无效表达式”。谁能告诉我，如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T19:07:36.193

问题是你的`update_map`回报`void`。因此你不能这样写：

```
gun(update_map(curr_map, ts)...); 
```

因为应该将返回值作为参数`update_map`传递给。`gun`

解决方法是传递一些东西`gun`作为参数，所以你可以这样做：

```
gun( (update_map(curr_map, ts),0)...); 
```

现在表达式`(update_map(curr_map, ts),0)`结果`0`是作为参数传递给`gun`. 那应该行得通。您可以将其视为：

```
T argmument = (update_map(curr_map, ts),0);  //argument is 0, and T is int 
```

--

此外，正如另一个答案指出的那样，参数的评估顺序`gun()`未指定（意味着调用函数的顺序`update_map`未指定），这可能会导致不希望的结果。另一个解决方案已经解决了这个问题。这是另一个（有点棘手和容易！）：

```
//ensure that the size of the below array is at least one.
int do_in_order[] = {0, (update_map(curr_map, ts),0)...}; 
```

因为数组元素的初始化顺序是明确定义的（从左到右），所以现在所有的调用都以`update_map`明确定义的顺序发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T19:08:44.073

`update_map`是一个返回 void 的函数。

该行包括调用`update_map`，然后将返回值传递给`gun`。

您不能将`void`返回值传递给另一个函数。

因此“无效使用无效表达式”。

有很多方法可以解决这个问题，包括`update_map`退货`struct empty {};`

请注意，您的代码会导致调用`update_map`以未指定的顺序发生。这很容易导致意外行为。

我可以建议：

```
void do_in_order();
template<typename F0, typename... Functors>
void do_in_order( F0&& f0, Functors&& funcs... ) {
  f0();
  do_in_order( std::forward<Functors>(funcs)... );
} 
```

然后将调用替换为`gun`：

```
do_in_order([&]{update_map(curr_map, ts);}...); // will expand for each input type 
```

它将要做的事情打包成 lambdas，然后调用它们以传递它们。

现在，这也完全消除了对`update_map`函数的需求：

```
do_in_order([&]{
  BOOST_CHECK(curr_map.find(ts::event_type) == curr_map.end());
  map[ts::event_type] = sizeof(ts);
}...); 
```

这太棒了。

# php - 如何升级 symfony2 版本？

> ID：14924867
> 
> 赞同：2
> 
> 时间：2013-02-17T19:03:48.123
> 
> 标签：php, symfony, upgrade, symfony-2.1, composer-php

有没有一种简单的方法可以通过命令行等方式将您的 symfony2.1.6 升级到 2.1.7？我正在使用 composer.json

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T19:03:48.123

下载`composer.phar`然后在symfony文件夹中运行

```
php composer.phar update 
```

如果您遇到一些错误，请先尝试删除供应商，然后重试。 `rm - R vendor/*`

# qt - unicode 字符无法转换为 cp1252

> ID：14924870
> 
> 赞同：0
> 
> 时间：2013-02-17T19:04:06.317
> 
> 标签：qt, unicode, utf-8

我正在编写一个 QT5 应用程序（使用 QT Creator），它使用像星座这样的特殊字符。此代码在 Linux Mint 14 上运行良好：

QString s = QString::fromUtf8("\u2648");

但是当我在 Windows XP SP3 上编译它时，得到一个编译器警告，它说当前代码页是 cp1252 并且字符 \u2648 无法转换。当我运行程序时，这个字符显示为问号。

根据我的系统设置，我的 Windows 上安装了 UTF8（代码页 65001）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T20:42:46.093

（注意，这个我没试过，也不知道你用的是哪个编译器，对QT完全不熟悉，所以可能会错。以下是基于Windows上Unicode的常识。）

在 Windows 上，通常假定 8 位字符串位于系统的当前代码页（也称为“ANSI”代码页）中。这**绝不**是UTF-8。在您的系统上，它显然是 cp1252。所以实际上有两件事出错了：

1.  您正在指定一个 Unicode 字符，编译器会尝试将其转换为正确的代码页。在 Windows 上，这会导致编译时错误，因为 cp1252 没有代表 u+2648 的代码点。
2.  但是假设代码可以编译，它仍然无法工作。您将这个字符串（它将在 cp1251 中）传递给 fromUtf8，它需要一个 UTF-8 字符串。由于字符串不是有效的 UTF-8，这可能会导致运行时错误。

在您的 Linux 系统上，两者都是“偶然”工作的，因为它使用 UTF-8 处理 8 位字符串。

要做到这一点，请立即在 UTF-8 中指定 8 位字符串：

```
QString s = QString::fromUtf8("\xE2\x99\x88"); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-17T19:18:19.423

这是我的建议，以使一切正常：

1.  只有一种编码类型 UTF-8！如果可能，请在任何地方使用它。因此，在 QtCreator 设置中为源 UTF-8 设置默认代码页。

2.  您可以在 QtCreator 中转换您的源代码：编辑 -> 选择编码并在代码页中重新加载。如果无法完成，请以`iconv`这种方式使用 linux 控制台应用程序：

    > iconv -f cp1252 -t utf-8 your_source_in_cp1251.cpp > your_source_in_utf8.cpp

3.  我在源代码中将此代码片段用于 C 字符串：在`main.cpp`add`#include <QTextCodec>`中，然后执行：

```
// For correct encoding
QTextCodec *codec = QTextCodec::codecForName("UTF-8");
QTextCodec::setCodecForCStrings(codec); 
```

# php - IE中的PHP会话ID重置

> ID：14924872
> 
> 赞同：0
> 
> 时间：2013-02-17T19:04:11.913
> 
> 标签：php, session, session-cookies

我有一个只有以下代码的页面：

```
<?php
session_start();
echo session_id();
?> 
```

在本地主机上运行。在 IE 中，我的会话 ID 在每次页面加载时都会重置（即会话被重置，所有旧会话信息都将丢失）。在任何其他浏览器中它都可以正常工作，并且我的会话 ID 在刷新时不会改变。

这发生在浏览器模式 IE7、IE8 和 IE9（实际浏览器 = IE9）中。我在“接受所有 cookie”上有 IE 隐私（cookie）设置。然而，在开发者工具“缓存->查看 cookie 信息”中没有显示任何内容。清除所有会话 cookie 也无济于事，清除浏览器缓存也无济于事。但是，在 PHP 会话存储目录中，每次刷新都会创建一个新的会话文件。

php会话配置：

```
session.auto_start Off Off
session.bug_compat_42 On On
session.bug_compat_warn On On
session.cache_expire 180 180
session.cache_limiter nocache nocache
session.cookie_domain no value no value
session.cookie_httponly Off Off
session.cookie_lifetime 0 0
session.cookie_path / /
session.cookie_secure Off Off
session.entropy_file no value no value
session.entropy_length 0 0
session.gc_divisor 1000 1000
session.gc_maxlifetime 1440 1440
session.gc_probability 1 1
session.hash_bits_per_character 5 5
session.hash_function 0 0
session.name PHPSESSID PHPSESSID
session.referer_check no value no value
session.save_handler files files
session.save_path D:\webserver\environment\temp\sessions D:\webserver\environment\temp\sessions
session.serialize_handler php php
session.use_cookies On On
session.use_only_cookies On On
session.use_trans_sid 0 0 
```

所以奇怪的是这只发生在 IE 上，没有其他浏览器，而且 IE 似乎配置正确......

感谢您的任何提示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T20:41:55.613

按“刷新”通常会发送与以前相同的请求 - 即使您已清除缓存。

彻底关闭IE。转到控制面板，从那里打开“Internet 选项”并删除 cookie。如果你想确定的话，也清除缓存。然后打开 IE 再试一次。

# clojure - 将 Clojure *.clj 编译成 *.class，有些函数没有生成

> ID：14924880
> 
> 赞同：1
> 
> 时间：2013-02-17T19:05:20.873
> 
> 标签：clojure, leiningen

我正在按照[此处](http://dynamic-thinking.blogspot.gr/2009/06/clojure-first-steps-into-compilation.html)的说明进行操作，并尝试通过调用**lein jar从****clj**源生成 Java 类。

 **但是，当我稍微编辑代码以添加我自己的测试功能时：

```
(ns some.Example
  (:gen-class))

(defn -main
  [greetee]
  (println (str "Hello " greetee "!")))

(defn -foo []
  "foo bar") 
```

.. 然后继续使用**lein jar**生成一个 Java 类文件（我在帖子末尾附加了 project.clj）我发现生成的**jar**包含作为内部类的方法：

```
$ jar tvf example-1.0.0.jar 
    76 Sun Feb 17 20:56:24 EET 2013 META-INF/MANIFEST.MF
  1225 Sun Feb 17 20:56:24 EET 2013 META-INF/maven/some/example/pom.xml
    87 Sun Feb 17 20:56:24 EET 2013 META-INF/maven/some/example/pom.properties
  2697 Sun Feb 17 20:56:24 EET 2013 some/Example__init.class
  1499 Sun Feb 17 20:56:24 EET 2013 some/Example$loading__4784__auto__.class
  1035 Sun Feb 17 20:56:24 EET 2013 some/Example$_main.class
   565 Sun Feb 17 20:56:24 EET 2013 some/Example$_foo.class
  1771 Sun Feb 17 20:56:24 EET 2013 some/Example.class
   162 Sun Feb 17 18:03:12 EET 2013 project.clj
   129 Sun Feb 17 19:23:54 EET 2013 some/Example.clj 
```

并且**some.Example**类仅包含**main**方法，但不包含**foo**：

```
$ javap some.Example
public class some.Example {
  public static {};
  public some.Example();
  public java.lang.Object clone();
  public int hashCode();
  public java.lang.String toString();
  public boolean equals(java.lang.Object);
  public static void main(java.lang.String[]);
} 
```

所以问题是：我们如何指定一个**clj** Clojure 文件，该文件生成一个带有许多静态和实例方法的 Java 类，目的是从 Java 代码中调用这些方法？

## project.clj 用于 *lein jar* 操作

```
(defproject some/example "1.0.0"
  :description "A sample project"
  :dependencies [[org.clojure/clojure "1.4.0"]]
  :aot [some.Example]
  :source-paths ["."]
  ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T19:43:14.500

您需要声明您的类将拥有的方法：

```
(ns some.Example
  (:gen-class
     :methods [[foo [] String]])) 
```

请注意，这将 foo 声明为非静态方法，因此它还需要一个`this`参数：

```
(defn -foo [this]
  "foo bar") 
```

如果您希望该方法是静态的，则需要附加一些元数据：

```
(ns some.Example
      (:gen-class
         :methods [#^{:static true}[bar [] int]]))
(defn -bar []
  3) 
```

尝试阅读[这篇](http://kotka.de/blog/2010/02/gen-class_how_it_works_and_how_to_use_it.html)文章，它会变得更快一点。**

# jquery - 单击时替换图像

> ID：14924885
> 
> 赞同：0
> 
> 时间：2013-02-17T19:06:19.267
> 
> 标签：jquery, html, css

我有两个表，第一个（id=symbols）包含 3 个图像。第二个表 (id=tbl) 将包含各种不同的图像。

我正在尝试用从符号表中选择的图像替换一个单元格的图像（对于这个例子，假设它是顶行右侧的第二个单元格）。

将鼠标悬停在符号表上时，我想突出显示它们。单击时，我想用单击的图像替换另一个表格中的图像，并更改包含所选图像的表格单元格的背景颜色。我还需要能够识别单击了哪个图像（或单元格）。

这是我目前的小提琴不太好[http://jsfiddle.net/bLb3H/70/](http://jsfiddle.net/bLb3H/70/)。

谢谢您的帮助。

```
<table id="symbols">
<tr>
<td  ><img src="http://icons.iconarchive.com/icons/deleket/soft-scraps/32/Button-Blank-Yellow-icon.png"/></td>
  <td  >
      <img src=" http://icons.iconarchive.com/icons/deleket/soft-scraps/32/Button-Blank-Blue-icon.png"/>

  </td>
  <td class="items  p1 p3"><img src="http://icons.iconarchive.com/icons/yootheme/social-bookmark/32/social-google-buzz-button-icon.png"/></td>      
  </tr>
</table>  

<table border="1" id="tbl">
<tr>
  <td ></td>
  <td  bgcolor=#000000 >
      <img src="http://icons.iconarchive.com/icons/deleket/soft-scraps/32/Button-Blank-Red-icon.png"/>
  </td>
  <td class="items  p1 p3"></td>      
  </tr>

  <tr>      
  <td bgcolor=#000000 ></td>
  <td class="items  p1"></td>
  <td class="items p3" bgcolor=#000000 ></td>
 </tr>

 <tr>      
  <td class="piece" id="p1" ></td>
  <td bgcolor=#000000 ></td>
    <td class="piece" id="p3" ></td>
  </tr>

</table> 
```

jQuery

```
 var imgs = $('img');

  imgs.click(function () {
    var img = $(this);
    $("#tbl").find("tbody tr").eq(2).children().first().attr('src', img);
  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T19:22:19.543

这是一种方法.. [http://jsfiddle.net/4Ym43/](http://jsfiddle.net/4Ym43/)

```
var imgs = $('img'); 

imgs.click(function(){
  var img = $(this); 
    $("#tbl").find("tbody tr:eq(0) td:eq(1) img").attr('src', img.attr('src'));
  //The cells we can move our image to.

}); 
```

虽然我宁愿使用 id 或类

# zend-framework - Zend 导航和 Zend 语言环境

> ID：14924887
> 
> 赞同：0
> 
> 时间：2013-02-17T19:06:32.877
> 
> 标签：zend-framework, navigation, zend-locale

我正忙着用 ZF1 建立一个多语言网站。一切都很好，期待一件事，多语言部分与 zend 导航相结合。当我打开开发页面的 URL 时，标准语言是英语（[http://website.nl/en](http://website.nl/en)）。导航栏（基于 zend 导航）显示如下网址：/en/blog、/en/events 等。但是当我将 de 语言从英语更改为荷兰语（[http://website.nl/nl](http://website.nl/nl)）时，导航栏仍然显示 /en/home、/en/blog 等。

有人知道问题是什么吗？

路由代码：

```
 // Routing
 $front = Zend_Controller_Front::getInstance();

 // Remove default router
 $router = $front->getRouter();
 $router->removeDefaultRoutes();

 // Add routers from config
 $config = new Zend_Config_Xml(APPLICATION_PATH . '/configs/routes.xml');
    $router->addConfig($config, 'routes'); 
```

导航代码：

```
 $this->bootstrap('layout');
    $this->bootstrap('view'); 
    $layout = $this->getResource('layout');
    $view = $layout->getView();

    // Set path to navigation.xmls
    $config = new Zend_Config_Xml(APPLICATION_PATH . '/configs/navigation.xml');

    // ACL
    $acl = new Application_Model_Acl();

    // Get the identity of the user
    $auth = Zend_Auth::getInstance()->getIdentity();

    $navigation = new Zend_Navigation($config);
    $view->navigation($navigation)
        ->setAcl($acl)
        ->setRole($auth->role); 
```

部分路由xml

```
 <cameloth type="Zend_Controller_Router_Route_Hostname">
        <route>websiteurl</route>
        <defaults _layout="sitecameloth/layout" module="siteCameloth" />
        <chains>
            <locale>
                <route>:locale</route>
                <defaults controller="index" locale="en" /> 
                <reqs locale="[a-z]{2,3}" />
                <chains>
                    <index>
                        <route></route>
                        <defaults _layout="sitecameloth/front" action="index" />
                    </index>

                    <news>
                        <route>blog</route>
                        <defaults controller="news" />
                        <chains>
                            <list>
                                <route>:page</route>
                                <defaults action="list" page="1" />
                            </list>
                            <read>
                                <route>:id/:title</route>
                                <defaults action="read" />
                            </read>
                        </chains>
                    </news> 
```

语言环境插件

```
 public function preDispatch(Zend_Controller_Request_Abstract $request)
    {
    $lang = $request->getParam('locale', '');

    if ($lang !== 'en' && $lang !== 'nl')
        $request->setParam('locale', 'en');

    $lang = $request->getParam('locale');

    if ($lang == 'en')
        $locale = 'en_US';
    else
        $locale = 'nl_NL';

    $zl = new Zend_Locale();
    $zl->setLocale($locale);
    Zend_Registry::set('Zend_Locale', $zl);

    $translate = new Zend_Translate('gettext', APPLICATION_PATH . '/languages/' . $locale . '.mo');
    Zend_Registry::set('Zend_Translate', $translate);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T15:08:13.553

您应该通过翻译器告诉路由器使用哪个语言环境，我在引导程序中执行此操作：

```
protected function _initRewrite()
    {
        $translator = new Zend_Translate('array', APPLICATION_PATH . '/language/url-fr.php', 'fr');
        $translator->addTranslation(APPLICATION_PATH . '/language/url-en.php', 'en');

        // Set the current locale for the translator
        $locale = Zend_Registry::get('Zend_Locale');
        $translator->setLocale($locale);

        // Set it as default translator for routes
        Zend_Controller_Router_Route::setDefaultTranslator($translator);

        $front_controller = Zend_Controller_Front::getInstance();
        $router = $front_controller->getRouter();

        $config = new Zend_Config_Ini(APPLICATION_PATH . '/configs/routes.ini', APPLICATION_ENV);
        $router->addConfig($config, 'routes');

        $router->addDefaultRoutes();
    } 
```

有关我的答案的更多信息：[Zend Navigation setting language parameter for route doesn't reflect in app](https://stackoverflow.com/questions/10669912/zend-navigation-setting-language-parameter-for-route-doesnt-reflect-in-app/14858654#14858654)

# actionscript-3 - 非常奇特的 AS3 自动格式化错误 (Flash CS6)

> ID：14924888
> 
> 赞同：0
> 
> 时间：2013-02-17T19:06:44.790
> 
> 标签：actionscript-3, flash-cs6

我正在制作游戏，并注意到自动格式化与某段代码不一致，所以我在另一个类中设置了一个测试并得到了重复结果，更改 else 语句中的代码可以防止错误，尽管绝对没有理由我明白为什么它会首先发生，有什么智慧可以提供吗？如果其他人可以复制此错误，那也值得了解。

**未格式化：**

```
package  {
public class someClass {
    public function someFunction()
    {
        // code
    }
    function activateForage(currentKinsmen)
    {
        if (getStockID("berry") == 0)
        {
            createStock("food", "berry", Math.ceil(Math.random()*1));
        }
        else
        {       
            listPanel.stockDivider.getChildByName("stock"+getStockID("berry")).stockQuantity += Math.ceil(Math.random()*1);
        }       
    }
    function anotherFunction ()
    {
        // more code
    }
}
} 
```

**格式化：**

```
package 
{
public class someClass
{
    public function someFunction()
    {
        // code
    }
    function activateForage(currentKinsmen)
    {
        if (getStockID("berry") == 0)
        {
            createStock("food", "berry", Math.ceil(Math.random()*1));
        }
        else
        {
        }
    }
    listPanel.stockDivider.getChildByName("stock"+getStockID("berry")).stockQuantity += Math.ceil(Math.random()*1);
    };
};
function anotherFunction()
{
    // more code
}
}
} 
```

自动格式化代码两次会导致此错误：

```
Line 26 1087: Syntax error: extra characters found after end of program. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T19:15:37.757

不确定它是否会自行修复错误，但您应该在函数中添加 ":void"，例如：

```
function anotherFunction():void 
```

我假设您关闭了严格的错误？关闭它们似乎更容易，但从长远来看，打开它们会为您节省大量时间。

首先，它会指出你错过了 ":void"

# python-2.7 - python中的非阻塞子进程

> ID：14924890
> 
> 赞同：2
> 
> 时间：2013-02-17T19:06:50.490
> 
> 标签：python-2.7, subprocess, nonblocking, tcsh

对于 perl 的包装器，我需要 python 中的非阻塞子进程（有各种类型的 shell io）。此外，我对 shell 输出和返回值感兴趣。有时返回值为 0，但代码实际上并没有做任何事情。
所以我现在可以使用 subprocess.call() （非阻塞但不是 shell 输出）或 subprocess.Popen() （阻塞但 shell 输出）。

我做了一些阅读，但唯一的解决方案似乎是有一个单独的队列来执行此操作。我错过了更容易的事情吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T21:13:27.640

`subprocess.Popen`并不是天生的阻塞。您仍然可以使用`proc.stdin.write()`and `proc.stdout.read()`; 唯一的问题是，如果管道填满，您可能会在一侧阻塞，甚至死锁[1]。如果您知道您的子进程只会读取或写入少量数据，则不必担心。

所以你可以这样做：

```
proc = subprocess.Popen(['perl', 'somescript.pl'], stdout=subprocess.PIPE)
buf = StringIO()
CHUNKSIZE = 1024  # how much to read at a time

while True:
    # do whatever other time-consuming work you want here, including monitoring
    # other processes...

    # this keeps the pipe from filling up
    buf.write(proc.stdout.read(CHUNKSIZE))

    proc.poll()
    if proc.returncode is not None:
        # process has finished running
        buf.write(proc.stdout.read())
        print "return code is", proc.returncode
        print "output is", buf.getvalue()

        break 
```

在更大的应用程序中，您可以将其安排在您的事件循环、反应器等中发生。

* * *

[1] 操作系统一次只允许这么多数据放入管道中。假设您`cat`作为子进程运行，并将大量数据写入其标准输入。 `cat`会将数据写入它自己的标准输出，直到它填满，然后它会阻塞，直到你的程序从标准输出读取一些数据并清空管道。但是您的程序仍在写入标准输入，并且`cat`不再从中读取，因此管道也会填满。两个进程都将被阻塞写入，等待另一个读取，这永远不会发生。

# iphone - 具有匿名函数/块的 NSTimer？

> ID：14924892
> 
> 赞同：43
> 
> 时间：2013-02-17T19:07:00.797
> 
> 标签：iphone, objective-c, nstimer

我希望能够在未来安排三个小事件，而不必为每个事件编写一个函数。我怎样才能做到这一点`NSTimer`？我理解块有助于匿名函数，但它们可以在内部使用`NSTimer`吗？如果可以，如何使用？

```
[NSTimer scheduledTimerWithTimeInterval:gameInterval  
         target:self selector:@selector(/* I simply want to update a label here */) 
         userInfo:nil repeats:NO]; 
```

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-02-17T19:11:38.157

如果您想实现类似于 NSTimer 的功能并阻止执行，则可以使用 dispatch_after。

这是相同的示例代码：

```
 int64_t delayInSeconds = gameInterval; // Your Game Interval as mentioned above by you

    dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);

    dispatch_after(popTime, dispatch_get_main_queue(), ^(void){

        // Update your label here. 

    }); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2016-05-05T21:08:43.710

您实际上可以调用：

```
NSTimer.scheduledTimerWithTimeInterval(ti: NSTimeInterval,
                    target: AnyObject, 
                    selector: #Selector, 
                    userInfo: AnyObject?, 
                    repeats: Bool)
```

像这样使用它：

```
NSTimer.scheduledTimerWithTimeInterval(1, 
                    target: NSBlockOperation(block: {...}), 
                    selector: #selector(NSOperation.main), 
                    userInfo: nil, 
                    repeats: true)
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2016-10-25T15:09:12.263

[Cocoa 中存在基于块的计时器 API](https://developer.apple.com/reference/foundation/timer/2091888-init)（从 iOS 10+ / macOS 10.12+ 开始） - 以下是从 Swift 3 开始使用它的方法：

```
Timer(timeInterval: gameInterval, repeats: false) { _ in
    print("herp derp")
} 
```

… 或在 Objective-C 中：

```
[NSTimer scheduledTimerWithTimeInterval:gameInterval repeats:NO block:^(NSTimer *timer) {
    NSLog(@"herp derp");
}]; 
```

如评论中所述，请注意不要在块内使用强自引用以避免保留循环（[更多信息](https://www.avanderlee.com/swift/weak-self/)）。

如果您需要针对早于 iOS10、macOS 12、tvOS 10、watchOS 3 的操作系统版本，您应该使用其他解决方案之一。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-08-10T21:55:35.313

@Peter Peng 答案的 Objective-C 版本：

```
_actionDelayTimer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:[NSBlockOperation blockOperationWithBlock:^{
    NSLog(@"Well this is useless.");
}] selector:@selector(main) userInfo:nil repeats:YES]; 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-02-17T19:12:52.673

这很容易，但它不包含在 Apple 框架中，至少目前还没有。

您可以为自己编写一个基于块的包装器`NSTimer`，例如使用[GCD](http://developer.apple.com/library/ios/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)，或者您可以使用现有的第 3 方库，例如：[https](https://github.com/jivadevoe/NSTimer-Blocks) ://github.com/jivadevoe/NSTimer-Blocks 。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-12-05T23:47:35.897

我在 NSTimer 上创建了一个类别，可以将其与块一起使用。

[https://github.com/mBrissman/NSTimer-Block](https://github.com/mBrissman/NSTimer-Block)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-12-21T20:53:40.260

# 截至 2018 年底，您完全可以这样做：

```
Timer.scheduledTimer(withTimeInterval: 0.25, repeats: true) { timer in
  print("no, seriously, this works on iPhone")
} 
```

这要感谢@JohnnyC！

真是奇怪！

[![在此处输入图像描述](../Images/9bf4417aa0c2825a95b1d94829e91f93.png)](https://i.stack.imgur.com/N1d0h.png)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-08-11T06:15:59.123

我已经制作了一个宏来执行此操作并自动处理 dealloc、arc、retain 循环等。无需担心使用弱引用。它也将始终在主线程上

```
#define inlineTimer(__interval, __block) {\
dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)((0.0) * NSEC_PER_SEC)), dispatch_get_main_queue(), (__block));\
[NSTimer scheduledTimerWithTimeInterval:__interval repeats:YES block:^(NSTimer *__timer) {\
if (self.window != nil) {\
dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)((0.0) * NSEC_PER_SEC)), dispatch_get_main_queue(), (__block));\
} else {\
[__timer invalidate];\
}\
}];\
} 
```

* * *

示例用法：

```
__block ticks = 0;

inlineTimer(0.5, ^{
    ticks++;
    self.label.text = [NSString stringWithFormat:@"Ticks: %i", ticks];//strong reference to self and self.label won't cause retain cycle! Wahoo
}); 
```

请注意 self.label 不是弱引用，但由于宏的结构，这一切都会自动释放。

当然，这仅适用于 UI 类，因为它正在检查 .window 何时应该解除分配。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-03-14T15:16:34.917

我喜欢这个黑客@Peter-Pang！BlockOperation 是动态创建的，由运行队列拥有的 Timer 拥有，并调用块上的主选择器来运行它....好！！！

更新为`Swift 3`

`Timer.scheduledTimer(timeInterval: 1, target: BlockOperation { // ... }, selector: #selector(Operation.main), userInfo: nil, repeats: false)`

# android - 服务中的Android启动意图活动错误

> ID：14924893
> 
> 赞同：0
> 
> 时间：2013-02-17T19:07:06.460
> 
> 标签：android, android-intent, service

在我的应用程序中，有一个服务类。我想在 10 秒后使用此服务启动一个意图。当我尝试基本的 toast 消息而不是开始意图时，它可以工作。但是，当我编写`startActivity(intent)`时发生错误。这是我的代码。我在哪里犯错？

```
public class EkraniKilitle extends Service {

    Handler yardimci;
    Intent kilitEkrani;
    final static long ZAMAN = 10000;

    @Override
    public IBinder onBind(Intent arg0) {
        return null;
    }

    @Override
    public void onCreate() {

        super.onCreate();

        kilitEkrani = new Intent(EkraniKilitle.this, KilitEkrani.class);

        yardimci = new Handler();
        yardimci.postDelayed(new Runnable() {
            @Override
            public void run() {

                servisiDurdur();
                startActivity(kilitEkrani);

            }
        }, ZAMAN);

    }

    public void servisiDurdur() {

        stopService(new Intent(this, EkraniKilitle.class));

    }

    @Override
    public void onDestroy() {

        super.onDestroy();

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T22:08:07.943

`startActivity(kilitEkrani);` **之前** 调用`servisiDurdur();`并停止您当前的服务您所需要的只是调用`stopSelf()`您不必使用`stopService`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T20:01:50.237

我想您需要将您的第二个活动添加到`manifest`
后`</activity>`添加`<activity android:name=".MySecondClass"/>`

# php - 使用 json 和 bootstrap 自动完成

> ID：14924894
> 
> 赞同：2
> 
> 时间：2013-02-17T19:07:05.983
> 
> 标签：php, json, twitter-bootstrap, autocomplete

这是我的代码：

**class_search.php**

```
 case 'users':
            if(!empty($_REQUEST['user'])){                  
                if(strlen($_REQUEST['user']) >= 3){
                    $_REQUEST['user'] = $this->sanitize($_REQUEST['user'], 'string');
                    $stmt = $this->sql->prepare('SELECT
                                                        id,
                                                        nome,
                                                                                                                    url
                                                    FROM
                                                        animes
                                                    WHERE
                                                        nome LIKE ?

                                                    LIMIT 10');

                    $stmt->execute(array('%'.$_REQUEST['user'].'%'));
                    $this->queries++;
                    $c = 0;
                    if($admin){
                        $result['users'] = array();
                    }

                    if($stmt->rowCount() > 0){
                        while($row = $stmt->fetch(PDO::FETCH_ASSOC)){
                            if($admin){
                                $result['users'][$c] = array('name'=>($prefix ? '[usr] ' : '').$row['nome'], 'id'=>$row['id']);
                                $c++;
                            }else{
                                $result[] = ($prefix ? '[usr] ' : '').$row['nome'];
                            }
                        }
                    }
                }
            }
            break; 
```

**通用.js**

```
$('#top_search').typeahead({
    source: function(typeahead, query) {
        $.ajax({
            url: baseurl + "/ajax_calls.php",
            dataType: "json",
            type: "POST",
            data: {
                call: 'top_search',
                user: query
            },
            success: function(data) {
                typeahead.process(data);
            }
        });
    },
    onselect: function(obj) {
        location.href= baseurl + '/animes/'+obj;
    }
}) 
```

**ajax_calls.php**

```
 case 'top_search':
            $status = $site->process_autosearch('users');
            break

; 
```

我在使用 onselect 时遇到问题，我需要在我的 MySQL 中选择行 url 并编码为 json，因为当我点击一个结果时，我会重定向到 mysite.com/animes/name of Anime/（是的，带空格）和我需要解决这个问题。

phpMyAdmin 中的动漫表：http: [//s18.postimage.org/3ulrcmss9/Animes_Table.jpg](http://s18.postimage.org/3ulrcmss9/Animes_Table.jpg)

快速视频：[http ://www.screenr.com/plZ7](http://www.screenr.com/plZ7)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T08:16:28.833

您将需要使用[`urlencode()`](http://php.net/manual/en/function.urlencode.php). 在您的 class_search.php 文件中，更新此部分：

```
if($admin){
    $result['users'][$c] = array('name'=>($prefix ? '[usr] ' : '').urlencode($row['nome']), 'id'=>$row['id']);
    $c++;
}else{
    $result[] = ($prefix ? '[usr] ' : '').urlencode($row['nome']);
} 
```

为了使名称在搜索自动完成中也看起来不错，您还需要修改 jQuery，将[`decodeURIComponent()`](http://www.w3schools.com/jsref/jsref_decodeuricomponent.asp)函数包装在 obj 周围，如下所示：

```
onselect: function(obj) {
    location.href= baseurl + '/animes/' + decodeURIComponent(obj);
} 
```

# javascript - Fancybox 画廊弹出问题

> ID：14924903
> 
> 赞同：1
> 
> 时间：2013-02-17T19:07:46.157
> 
> 标签：javascript, jquery, html, fancybox

我确定我已经为此选择了完美的标题，但是如果有人能想出更好的标题，请随时编辑。无论如何，当您单击意味着打开一个弹出窗口的图像时，我在为我的画廊集成 jQuery 插件fancybox 时遇到了一个小问题。展示画廊[点击这里](http://thecharlesnyc.com/dev/jperiod/ExpressionEngine/index.php/gallery)

我选择使用 iframe 的原因是我希望画廊同时展示视频和图像。iframe 是实现此目的的正确格式吗？

```
<script type="text/javascript">
$(document).ready(function() {
    $(".various").fancybox({
        minWidth    : 902,
        minHeight   : 505,
        fitToView   : true,
        width       : '50%',
        height      : '50%',
        closeClick  : true,
        openEffect  : 'fade',
        closeEffect : 'fade',
        type : 'iframe',
        preload: 'auto',
        helpers: {
            thumbs: {
             width   : 50,
             height  : 50
            } // closes thumbs
           } // closes helpers
    });
}); 
```

我正在使用插件[蒙太奇](http://tympanus.net/Development/AutomaticImageMontage/)作为响应元素。如果两个插件之间存在某种形式的冲突。有人可以纠正我哪里出错了。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-17T19:54:43.223

我最近尝试使用 fancybox 来显示图像和照片，但我找不到合适的解决方案。相反，我使用[PrettyPhoto](http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/)，我发现它非常好，有很多可定制的选项。如果您愿意/能够从 fancybox 切换，我建议您使用它。

要设置它，只需设置您的 PrettyPhoto 选择器

```
$("a[rel^='prettyPhoto']").prettyPhoto(); 
```

然后，对于要在画廊中显示的图像和/或视频的每个链接，只需将属性（在方括号中为画廊的名称）添加到链接

```
rel="prettyPhoto[myGalleryName]" 
```

# railstutorial.org - Michael Hartl RailsTutorial Chapter 10.2.2 Sample Microposts

> ID：14924906
> 
> 赞同：0
> 
> 时间：2013-02-17T19:07:51.687
> 
> 标签：railstutorial.org

我正在完成 Michael Hartl 的 Rails 教程第 10.2.2 章示例 Microposts

访问[http://ruby.railstutorial.org/chapters/user-microposts?version=3.2#sec-creating_microposts](http://ruby.railstutorial.org/chapters/user-microposts?version=3.2#sec-creating_microposts)

我遇到了配置文件页面 css 无法正确呈现的问题。Rspec 通过，页面加载，我可以毫无问题地浏览整个站点。css 代码由将 css 代码链接到 rails 输出的类调用。我会尽可能多地粘贴我能想到的信息。 **注意：** 我是 Rails 编程或面向对象的任何东西的绝对初学者，因此请在您的回答中具体说明，因为我可能还没有理解该主题的经验。

我会发布图片，但我还没有获得所需的声誉点数。

这里有一些代码......

这是未正确呈现的个人资料页面的 HTML

```
<% provide(:title, @user.name) %>
<div class="row">
  <aside class="span4">
    <section>
      <h1>
        <%= gravatar_for @user %>
        <%= @user.name %>
      </h1>
    </section>
  </aside>

  <div class="span8">
    <% if @user.microposts.any? %>
      <h3>Microposts (<%= @user.microposts.count %>)</h3>
      <ol class="microposts">
        <%= render @microposts %>
      </ol>
      <%= will_paginate @microposts %>
    <% end %>
  </div>

</div> 
```

这是此页面的 css 代码

```
/* microposts */

  .microposts {
    list-style: none;
    margin: 10px 0 0 0;

    li {
      padding: 10px 0;
      border-top: 1px solid #e8e8e8;
    }
  }
  .content {
    display: block;
  }

  .timestamp {
    color: $grayLight;
  }

  .gravatar {
    float: left;
    margin-right: 10px;
  }

  aside {
    textarea {
      height: 100px;
      margin-bottom: 5px;
    }
  } 
```

此外，如果用户登录，主页也会调用此 css 代码来呈现微博。该页面也无法正确呈现微博。主页 HTML 如下

```
<% if signed_in? %>
  <div class="row">
    <aside class="span4">
      <section>
        <%= render 'shared/user_info' %>
      </section>
      <section>
        <%= render 'shared/micropost_form' %>
      </section>
    </aside>
     <div class="span8">
      <h3>Micropost Feed</h3>
      <%= render 'shared/feed' %>
    </div>
  </div>  
<% else %>

  <div class="center hero-unit">

    <h1>Welcome to the Sample App</h1>

        <h2>
            This is the home page for the
            <a href="http://railstutorial.org/">Ruby on Rails Tutorial</a>
            sample application <br>Sample App Tutorial Completed by Jake Danforth.
        </h2>

        <%= link_to "Sign up now... Because it's Awesome!!!", signup_path, class: "btn btn-large btn-primary" %>
    </div>

    <%= link_to image_tag("rails.png", alt: "Rails"), 'http://rubyonrails.org/' %>
<% end %> 
```

最后一个代码调用 _user_info.html.erb 文件，该代码包含在下面

```
<a href="<%= user_path(current_user) %>">
  <%= gravatar_for current_user, size: 52 %>
</a>
<h1>
  <%= current_user.name %>
</h1>
<span>
  <%= link_to "view my profile", current_user %>
</span>
<span>
  <%= pluralize(current_user.microposts.count, "micropost") %>
</span> 
```

随着我不断解决此问题，我将更新我能找到的内容。问题在于 <%= render @microposts %> 调用 @microposts 变量（对吗？）。这在文件 users_controller.rb 中定义为

```
 def show
    '@user = User.find(params[:id])
    '@microposts = @user.microposts.paginate(page: params[:page])
  end 
```

据我所知，这不会导致css文件。不知何故，这需要调用 css 文件中的 .microposts 类来呈现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T19:02:39.637

我在 CSS 代码中发现了一个错误。我重新排列了 CSS 代码以进一步清理它，并找到了一个额外的括号。我不知道为什么代码仍然没有错误地渲染页面，但是，当我移除括号时，它开始按预期渲染屏幕。我将把这个文件留在网上，以防其他人在尝试本教程并遇到括号问题。确保左括号和右括号相等！

# c# - 结构的 Pinvoke

> ID：14924909
> 
> 赞同：0
> 
> 时间：2013-02-17T19:08:08.933
> 
> 标签：c#, struct, pinvoke

我有以下结构定义：

```
#ifndef struct_emxArray_real_T
#define struct_emxArray_real_T
struct emxArray_real_T
{
    real_T *data;
    int32_T *size;
    int32_T allocatedSize;
    int32_T numDimensions;
    boolean_T canFreeData;
};
#endif /*struct_emxArray_real_T*/ 
```

并希望通过 PInvoke 在 C# 中使用它。该结构旨在表示一个矩阵。任何 C# 结构代码将不胜感激。谢谢！

有人在[这里](http://dotnetforum.net/topic/37251-c-how-to-call-a-c-function/)尝试过：

```
[StructLayout(LayoutKind.Sequential, Size = 1)]
public unsafe struct mytype
{
public double* data;
public int* size;
public int allocatedSize;
public int numDimensions;
public bool canFreeData;
} 
```

但没有让它工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T19:12:08.730

C# 结构不支持指针类型。

相反，指针必须移植为`IntPtr`; 您可以使用`Marshal`该类来解析指针。

因此，你应该写类似

```
[StructLayout(LayoutKind.Sequential)]
public unsafe struct mytype
{
    public IntPtr data;
    public IntPtr size;
    public int allocatedSize;
    public int numDimensions;
    public bool canFreeData;
} 
```

检查您的字体大小`boolean_T`；您可能需要使用该`[MarshalAs(...)]`属性来指定正确的大小。

# google-chrome - 如何控制primefaces数据表宽度（超大数据）

> ID：14924911
> 
> 赞同：1
> 
> 时间：2013-02-17T19:08:19.580
> 
> 标签：google-chrome, primefaces, datatable

我有一些可能包含很长的 varchar 数据的 primefaces 数据表。让 primfaces 默认宽度会影响网页大小，这在使用 Chrome 的小型平板电脑上显示时会导致问题。

当数据大小达到一定值时，如何设置primefaces数据表自动返回行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T11:59:07.433

您可以使用`<p:dataTable style="width: #{fooBean.tableWidth};" ... />`或在您的`<p:column width="#{fooBean.certainColumnWidth}>`. `FooBean#getTableWidth()`和的值`FooBean#getCertainColumnWidth()`应在您检索数据时及时设置。请注意，在 dataTable*样式*属性中，您可以使用百分比等相对值，但在列*宽*属性中只允许使用像素。

# c++ - 计算矩阵向量的列和 > 使用迭代器？

> ID：14924912
> 
> 赞同：6
> 
> 时间：2013-02-17T19:08:39.650
> 
> 标签：c++, vector, stl, mean, accumulate

在上一篇文章[中，列向量带有行的意思——使用 std::accumulate?](https://stackoverflow.com/questions/14915602) 我问是否可以使用 STL 功能来计算矩阵的行均值

```
vector< vector<double> > data ( rows, vector<double> ( columns ) ); 
```

@benjaminlindley 的最佳答案不仅是我在寻找的东西，而且是美丽的东西。永远充满希望，我认为计算列均值会很容易，所以 STL 相当于

```
vector<double> colmeans( data[0].size() );
    for ( int i=0; i<data.size(); i++ )
        for ( int j=0; j<data[i].size(); j++ )            
            colmeans[j] += data[i][j]/data.size(); 
```

其中平均值不是在 each 内部计算`vector<double>`，而是在所有向量中的相同索引上计算：

```
colmeans[0]       == ( data[0][0] + data[1][0] + ... data[rows][0] ) / rows
colmeans[1]       == ( data[0][1] + data[1][1] + ... data[rows][1] ) / rows
colmeans[2]       == ( data[0][2] + data[1][2] + ... data[rows][2] ) / rows
...
colmeans[columns] == ( data[0]   [columns] + 
                       data[1]   [columns] + 
                       ... 
                       data[rows][columns] ) / rows 
```

事实证明这是完全不同的——accumulate 不想处理向量的向量。是否有可能与`[]`操作员一起使用累积？我什至无法想出一个看起来不正确的中间形式（摆脱`for i`or循环）。`for j`

`accumulate`和`[]`运营商有什么关系？或者`bind`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T21:22:21.670

这是我想出的，使用`for_each`and `transform`：

```
std::vector<std::vector<double>> data { {1,2,3}, {1,2,3}, {1,2,3} };

std::vector<double> colsums( data[0].size() ); // initialize the size
                                                // to number of columns

std::for_each(data.begin(), data.end(),

    [&](const std::vector<double>& row)
    {
        // Use transform overload that takes two input ranges.
        // Note that colsums is the second input range as well as the output range.
        // We take each element of the row and add it to the corresponding
        // element of colsums vector:
        std::transform(row.begin(), row.end(), colsums.begin(), colsums.begin(),
                       [](double d1, double d2) { return d1 + d2; });
    });

std::cout << "Column means: ";
std::transform(
    colsums.begin(), colsums.end(),
    std::ostream_iterator<double>(std::cout, " "),
    [&data](double d) { return d / data.size(); }); 
```

[LWS 演示](http://liveworkspace.org/code/2bW3X5$1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T22:16:23.153

首先让我声明你真的不应该嵌套 std::vectors。除此之外，我得到了一些解决方案，它当然比您的初始代码长，但从长远来看可以节省：

```
#include <vector>
#include <boost/iterator/iterator_adaptor.hpp>
#include <boost/iterator/counting_iterator.hpp>

typedef std::vector<std::vector<double> > Data;

struct ColumnElement : boost::iterator_adaptor<ColumnElement,
                                                Data::const_iterator,
                                                const double> {
        int col;

        ColumnElement(int col, const Data::const_iterator &iter)
        : iterator_adaptor(iter), col(col)
        {}
        const double& dereference()const { return (*base())[col]; }
};

struct Column {
        int col;
        const Data *data;

        Column(int col, const Data *data) : col(col), data(data) {}
        ColumnElement begin()const { return ColumnElement(col, data->begin()); }
        ColumnElement end()const { return ColumnElement(col, data->end()); }
        int size()const { return std::distance(begin(), end()); }
};

struct Columns : boost::iterator_adaptor<Columns, boost::counting_iterator<int>,
                                        Column, boost::use_default, Column> {
        const Data *data;

        Columns(int col, const Data *data): iterator_adaptor(col), data(data) {}

        Column dereference()const { return Column(*base(), data); }
};

Columns columnsBegin(const Data &data) { return Columns(0, &data); }
Columns columnsEnd(const Data &data) {
        return Columns(data.empty() ? 0 : data.front().size(), &data);
} 
```

这可以简而言之：

```
double Mean(const Column &d) {
        return std::accumulate(d.begin(), d.end(), 0.0) / d.size();
}

int main() {
        Data data = {   {1, 2, 3},
                        {2, 2, 2},
                        {9, 8, 7}};
        std::vector<double> colMeans(data[0].size());
        std::transform(columnsBegin(data), columnsEnd(data), 
                       colMeans.begin(), Mean);
        std::copy(colMeans.begin(), colMeans.end(),
                  std::ostream_iterator<double>(std::cout, ","));
        std::cout << "\n";
} 
```

我使用了一些增强功能来缩短它，但它可以在没有增强的情况下完成（但要长得多）。

这个想法是创建一个遍历所有列的迭代器（`Columns`只是为了简短而调用）和一个迭代一列的所有元素的迭代器（`ColumnElement`也缩短了，应该更好地命名`ColumnElementIterator`），`Column`它表示一列的所有元素的范围。

# oop - OOP 中的维护

> ID：14924914
> 
> 赞同：1
> 
> 时间：2013-02-17T19:08:41.873
> 
> 标签：oop

什么是面向对象编程的上下文中的维护？我以为是写可读的代码，重构和其他东西。但是我在考试中弄错了。请简要说明。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T19:50:08.147

您给出的实际问题和答案是什么？取决于上下文可能是为什么没有给出分数。

软件维护是一个总称。比如修复bug、提高代码质量等技术包括重构。

然而，代码是为了可维护性而编写的，它涵盖了许多要寻找的东西

*   强内聚和低耦合
*   封装
*   设计模式的使用
*   代码度量 - 圈复杂度（不仅仅是 OO）

看看 SOLID 原理和命令-查询分离

如果问题是关于如何在 OO 中实现可维护的代码，那么我会期待以上内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T19:24:30.473

> 面向对象编程环境中的维护

正确应用 OO 概念的结构良好的代码更容易由我们自己和随着时间的推移“继承”我们的项目的人维护。

这是我能给出的唯一可以理解你的句子的答案

# datatables - 带有 on() 的 jquery 事件委托到数据表

> ID：14924920
> 
> 赞同：0
> 
> 时间：2013-02-17T19:09:21.827
> 
> 标签：datatables, jquery, event-delegation

我有 4 页的 jquery 数据表。当我加载页面时，点击事件工作正常。从第二页开始，点击事件不起作用。我阅读了[http://api.jquery.com/on/](http://api.jquery.com/on/) 链接，但我很困惑让它工作。

```
<table id="datatable">
<thead><th></th><th></th></thead>
<tbody></tbody>
</table> 
```

```
$('#datatable tbody tr').find('td:gt(0):lt(9)').on("click", "", function(e) {
     e.preventDefault();
     e.stopPropagation.
}); 
```

该表作为 ajax 客户端加载，当我对表进行分页时，会用新数据刷新。如何将点击事件附加到下一组行

这是[jsfiddle的链接](http://jsfiddle.net/bNvhH/14/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:37:04.733

我相信正确的语法应该是：

```
$('#datatable tbody tr').on("click", "td:gt(0):lt(2)", function(e) {}); 
```

# c# - 我应该如何将行为注入实体

> ID：14924924
> 
> 赞同：2
> 
> 时间：2013-02-17T19:09:36.377
> 
> 标签：c#, .net, entity-framework, design-patterns, dependency-injection

我正在探索实体框架数据库的使用，我试图了解是否应该将行为注入实体，如果是，那么最好的技术是什么。我过去通常这样做是为了避免贫血的域对象。几个用例是我将规范注入实体（规范模式/定义可组合业务规则），或者我可能将 ninject 实现的工厂注入根实体，其中实现的绑定由策略/工厂方法确定使用点）因此，例如在下面，我将使用 IOC 注入 ISomethingSpec 实现。

```
 class Foo
 {
    void DoSomething()
    { 
        if(somethingSpec.SatisfiedBy(this)
        {
        }
    }
} 
```

请问，我应该考虑将行为与实体关联起来的不同模式吗？或者，如果合理的话，在我首先将 EF5 与数据库一起使用的情况下，使用部分类/属性和方法注入是否是最佳选择？

这是我的第一篇文章，所以我希望它的格式不会离题太远。我在查看其他类似问题时发布，但我无法就将行为与域对象/EF 实体关联的最佳实践达成共识。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T19:38:24.803

我使用实体框架的[规范模式](http://en.wikipedia.org/wiki/Specification_pattern)来过滤从数据库中检索到的数据。我认为您可以使用相同的方法并使其适应您的需求。

您可以使用 DI 容器来注入您的规范和您可能需要的其他对象。第一步是为您的规范对象定义一个契约，如下所示：

```
public interface ISpecification<T> where T : class
{
    Expression<Func<T, bool>> GetExpression();
    bool IsSatisfiedBy(T entity);
} 
```

一个通用的规范对象可以这样定义：

```
public class Specification<T> : ISpecification<T> where T : class
{
    private Expression<Func<T, bool>> expression;

    public Expression<Func<T, bool>> GetExpression()
    {
        return expression;
    }

    public Specification(Expression<Func<T, bool>> expression)
    {
        this.expression = expression;
    }

    public bool IsSatisfiedBy(T entity)
    {
        var query = (new[] { entity }).AsQueryable();

        return query.Any(this.expression);
    }
} 
```

然后您可以像这样更改您的 Foo 类，因此您可以使用 DI/IoC 容器注入依赖项：

```
public class Foo()
{
    public ISpecification<Foo> Specification 
    {
        get;
        private set;
    }

    public Foo(ISpecification<Foo> specification)
    {
        this.Specification = specification;
    }

    public void DoSomething()
    { 
        if(Specification.SatisfiedBy(this))
        {
            //...
        }
    }
} 
```

创建和使用规范：

```
// example - create one specification
Expression<Func<Foo, bool>> expression =  ....;  
ISpecification<Foo> fooSpecification = new Specification<Foo>(expression);

// using the specification with linq
var entities = dbContext.Foos.Where(fooSpecification.GetExpression());

// performing validation
var foo = new Foo{
    // ....
};

if(fooSpecification.IsSatisfiedBy(foo))
{
    // do something....
} 
```

更多细节在这里：

[http://ruijarimba.wordpress.com/2011/06/05/entity-framework-and-t4-generate-specification-objects-for-your-entities/](http://ruijarimba.wordpress.com/2011/06/05/entity-framework-and-t4-generate-specification-objects-for-your-entities/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T15:45:34.413

关于这个问题，在 Rui 的有用评论之后进行了一些调查后，我得出的结论是，我将服务注入实体的意图是有缺陷的。因此，我最初的问题的答案是使用域事件来显着减少耦合，或者按照下面的链接使用“双重调度”。我目前正在将 nServiceBus 视为实现领域事件的技术（并作为 nServiceBus 本身的介绍）

以下文章帮助我理清了服务类型以及如何与域模型一起使用的思路：

[领域事件拯救](http://www.udidahan.com/2009/06/14/domain-events-salvation/)

# eclipse - 如何将 JAX-RS 添加到现有项目

> ID：14924925
> 
> 赞同：4
> 
> 时间：2013-02-17T19:09:41.633
> 
> 标签：eclipse, jakarta-ee, jax-rs

我正在使用 Java EE、Java 1.7、glassfish 3 和 Eclipse Indigo。我有一个根据本教程构建的现有 Web 项目：[http ://www.tech-juice.org/2012/05/13/hello-world-with-jsf-2-0-glassfish-3-maven-svn -and-eclipse/#comment-10560](http://www.tech-juice.org/2012/05/13/hello-world-with-jsf-2-0-glassfish-3-maven-svn-and-eclipse/#comment-10560)。现在，我想将 RESTful Web 服务添加到项目中。我去 Project -> properties, Project Facets 并检查 JAX-RS。然后我单击“需要进一步配置”的链接。我给一个 servlet 类名。我现在被告知“必须选择至少一个用户库”。

这是什么意思？

我看过，但没有看到关于将 JAX-RS 添加到现有项目的教程。

谢谢，斯科特

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T22:33:55.177

禁用实现库选择应该可以工作。如果您不想使用默认实现，我相信存在库配置项。

![在此处输入图像描述](../Images/ce75b5647bdbf92bfe0e70e18b7e5d6c.png)

# java - 输入侦听器是否应该同步？

> ID：14924926
> 
> 赞同：0
> 
> 时间：2013-02-17T19:09:44.693
> 
> 标签：java, synchronization, keylistener

我在下面发布的示例代码显示了两个类。一个实现 KeyListener，另一个实现 Runnable，并在每 20 毫秒休眠一次的无限循环中运行。当一个键被按下时，keyChar，它是一个int的形式，被用作一个索引，设置一个布尔数组的索引是真还是假，表示该键被按下与否。同时，进程循环在键数组中搜索其真值或假值，并将真值设置为假，然后打印出字符。我的问题是我是否需要使用锁来使用同步来访问 charArray，因为它在两个线程中使用：进程线程和键侦听器线程。

示例代码：

```
import java.awt.Component;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;

public class Input implements KeyListener {

public boolean[] charArray;

public Input(Component component) {
    charArray = new boolean[127];
    component.addKeyListener(this);
}

@Override
public void keyPressed(KeyEvent e) {
            (possible synchronization with a lock?)
    int keyChar = e.getKeyChar();
    if (keyChar == 27 || keyChar == 9 || keyChar == 10 || keyChar == 127) //useless keys like del, tab, esc, etc..
        keyChar = 65535;
    if (keyChar < 65535) //65535 represents no true char value
        charArray[keyChar] = true;
}

@Override
public void keyReleased(KeyEvent e) {
}

@Override
public void keyTyped(KeyEvent e) {
}
}

import java.awt.Dimension;
import javax.swing.JFrame;

@SuppressWarnings("serial")
public class Process extends JFrame implements Runnable {

private boolean running;
private Input input;

public Process() {
    running = false;
    input = new Input(this);
    setTitle("Keyboard Test");
    setSize(new Dimension(200, 200));
    toFront();
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setVisible(true);
}

/**
 * @param args
 */
public static void main(String[] args) {
    new Process().startThread();
}

public synchronized void startThread() {
    running = true;
    new Thread(this).start();
}

@Override
public void run() {
    while (running) {
                    (possible synchronization with a lock?)
        for (int i = 0; i < input.charArray.length; i++) {
            if (input.charArray[i] == true) {
                input.charArray[i] = false;
                System.out.println((char) i);
            }
        }
        try {
            Thread.sleep(20);
        } catch (InterruptedException e) {
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T19:21:02.950

对于 AWT 或 Swing，第一条规则是永远不要同步或以其他方式干扰调度线程。如果您对此不熟悉，请查看[Dispatch Thread Issues](http://docs.oracle.com/javase/1.5.0/docs/api/java/awt/doc-files/AWTThreadIssues.html)

在您的情况下，我会将非 GUI 线程功能完全分离到一个单独的类中 - 并在必要时使用 java.util.concurrent 中真正有用的类之一在两者之间进行通信。

如果由于线程问题而导致锁定或延迟，并且您实际上处于 Dispatch Thread 中，则整个 GUI 将冻结

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T19:18:45.670

您的`charArray`变量至少从两个线程（您在 Process 中启动的线程和 Input 类中的 EDT）访问您的变量，因此您需要同步这些访问以确保可见性（即确保一个线程所做的更改对另一个线程可见）。

请注意，您的代码中还有其他几个问题，例如：

*   你不应该在构造过程中让这个逃脱（通过调用`input = new Input(this)`or `component.addKeyListener(this)`） - 这可能会导致多线程环境中的奇怪行为
*   你应该尝试`JFrame`在你的类中有一个变量`Process`而不是扩展`JFrame`
*   我不确定您打算如何设置`running`为 false，但是您的`run`方法中没有围绕该变量进行同步，因此您可能看不到它变为 false。

# python - 如何在文本框中添加滚动条

> ID：14924928
> 
> 赞同：0
> 
> 时间：2013-02-17T19:10:24.857
> 
> 标签：python, tkinter

我正在尝试向构成我的 GUI 一部分的文本框添加滚动条。

到目前为止，我已经制作了文本框和（我认为）滚动条，但不知道如何组合这两个项目。

```
textBox_1 = Text(myGUI).place(x=75, y=300)
scroll_1 = Scrollbar(myGUI)
scroll_1.configure() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T21:18:41.077

您需要执行两个步骤：需要将滚动条连接到小部件，以及需要将小部件连接到滚动条。例如：

```
textBox_1 = Text(...)
scroll_1 = Scrollbar(...)
textBox_1.configure(yscrollcommand=scroll_1.set)
scroll_1.configure(command=textBox_1.yview) 
```

另外，我注意到您`place`在创建小部件时调用了它。你不能这样做。当你这样做时`Text(...).place(...)`，它会存储 in 的结果`place`，`textbox_1`而*不是*的结果`Text(...)`。另外，当布局与小部件创建分开时，维护代码会更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T19:26:10.540

使用时`Tkinter`，无论您使用什么几何管理器，如果您想保留对 Widget 的引用，都需要创建您的小部件并在单独的行上使用几何管理器。换句话说，`Widget.place`返回`None`（`Widget.pack`和一样`Widget.grid`）。

```
textBox_1 = Text(myGUI)
textBox_1.place(x=75, y=300)
scroll_1 = Scrollbar(myGUI)
textbox_1.config(yscrollcommand=scroll_1.set) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T19:17:51.293

应该：

```
textbox_1.config(yscrollcommand=scroll_1.set) 
```

# javascript - Javascript push() 方法更改引用数组中的值

> ID：14924933
> 
> 赞同：0
> 
> 时间：2013-02-17T19:10:44.347
> 
> 标签：javascript

所以，这并不像我期望的那样工作：

```
var x = [1,2,3];
var y = x;
y.push(4);
console.log(x); 
```

我以为它会记录 [1,2,3] 但它会记录 [1,2,3,4]！我需要的是有一个函数，它只为 y 添加一个值，而不是 x - 我希望能够弄乱 [1,2,3] 数组，但也能够“回到它”并且取消所做的更改。我希望这有足够的意义......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T19:11:58.193

```
var x = [1,2,3];
var y = x.slice();
y.push(4);
console.log(x);  // Outputs 1,2,3 
```

Using`slice`是获取数组*副本的最简单方法。*

请记住，在 Javascript 中`x`和`y`是对数组的*引用。*在这方面，Javascript 的行为不同于例如 PHP。

所以当你这样做时，`y.push(4)`你将一个元素推入由`x`.

# r - 使用 R 将 data.frame 转换为简单向量

> ID：14924935
> 
> 赞同：15
> 
> 时间：2013-02-17T19:10:57.430
> 
> 标签：r

我有这个`data.frame`：

```
> print(v.row)
    X1  X2  X3  X4  X5  X6  X7  X8  X9 X10 X11 X12 X13 X14 X15 X16 X17 X18 X19 X20 X21 X22 X23 X24
57 177 165 177 177 177 177 145 132 126 132 132 132 126 120 145 167 167 167 167 165 177 177 177 177
> dput(v.row)
structure(list(X1 = 177, X2 = 165, X3 = 177, X4 = 177, X5 = 177, 
    X6 = 177, X7 = 145, X8 = 132, X9 = 126, X10 = 132, X11 = 132, 
    X12 = 132, X13 = 126, X14 = 120, X15 = 145, X16 = 167, X17 = 167, 
    X18 = 167, X19 = 167, X20 = 165, X21 = 177, X22 = 177, X23 = 177, 
    X24 = 177), .Names = c("X1", "X2", "X3", "X4", "X5", "X6", 
"X7", "X8", "X9", "X10", "X11", "X12", "X13", "X14", "X15", "X16", 
"X17", "X18", "X19", "X20", "X21", "X22", "X23", "X24"), row.names = 57L, class = "data.frame") 
```

我会删除所有行名和列名以获得简单的`vector`. 但是该`as.vector`函数不起作用（它返回 a `data.frame`）。

```
> as.vector(v.row)
    X1  X2  X3  X4  X5  X6  X7  X8  X9 X10 X11 X12 X13 X14 X15 X16 X17 X18 X19 X20 X21 X22 X23 X24
57 177 165 177 177 177 177 145 132 126 132 132 132 126 120 145 167 167 167 167 165 177 177 177 177 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-17T19:16:51.833

看`?unlist`

> 给定一个列表结构 x，unlist 将其简化为一个向量，该向量包含出现在 x 中的所有原子成分。

```
unlist(v.row)
[1] 177 165 177 177 177 177 145 132 126 132 132 132 126 120 145 167 167 167
       167 165 177 177 177 177 
```

**编辑**

您也可以这样做`as.vector`，但您需要提供正确的模式：

```
 as.vector(v.row,mode='numeric')
 [1] 177 165 177 177 177 177 145 132 126 132 132 132 126 120 145 167 167
      167 167 165 177 177 177 177 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-04-13T16:24:00.660

只是关于 agstudy 答案的第二部分的注释：

```
df <- data.frame(1:10) 
as.vector(df, mode="integer") #Error

as.vector(df[[1]],mode="integer") #Works; 
as.vector(df[[1]]) #Also works 
```

即，显然您必须从数据框中选择列表元素，即使只有 1 个元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-31T16:54:36.853

我有这个来自 csv 的数据框

```
x <- as.numeric(dataframe$column_name) 
```

工作得很好。（与`dataframe[3]`3 相同，我的列索引不起作用）

# javascript - PHP post删除样式属性

> ID：14924936
> 
> 赞同：1
> 
> 时间：2013-02-17T19:10:58.820
> 
> 标签：javascript, jquery, ajax, codeigniter, styles

我有一个奇怪的情况，我似乎无法在谷歌上找到答案。

我正在使用一个 javascript 数组，对其应用 JSON.stringify，然后通过 AJAX 发布到 php 控制器，以将现在的 json_encoded 数组存储在表中。通过 ajax 发布后，$_POST 以某种方式剥离了正在提交的 html 上的样式属性。

这是通过 javascript/jquery 获取的示例 html：

```
<"div class="blahblah" style="border:1px solid #000000;"><strong>test</strong></div> 
```

这是 AJAX 邮政编码：

```
var post_data = [];
    $("divclasshere").each(function(){
        post_data.push({html:$(this).html()});
    });
    var data = JSON.stringify(post_data); 
    $.ajax({
        type: "POST",
        url: "save",
        data: { content: data },
        success: function(result){
        }
    }); 
```

这是将其保存到数据库的控制器功能：

```
$data = array(
    'content' => $this->input->post('content')
);
$this->db->update('table', $data); 
```

如果我 print_r 在 PHP 控制器上的数据上，我得到（示例）

```
<div class="blahblah"><strong>test</strong></div> 
```

但是 div class="blahblah" 元素上没有样式属性。如果这有什么不同，我正在使用 CodeIgniter？在某些情况下，它会去除第一部分：style="border:1px 并留下实心 #000000;"

编辑：

这是发布的内容（例如）：

```
content:[{"html":"<div class=\"content\" style=\"border:1px solid #000000;\"></div>"}] 
```

这是得到 print_r'd 的内容：

```
<pre>[{"html":"<div class=\"content\"  solid #000000;\"></div>"}] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T21:34:54.380

核心 _remove_evil_attributes 函数从标签中删除样式属性。为了克服这个问题，你有一个解决方法。只需在应用程序的核心目录 ( **application/core/MY_security.php** ) 中创建一个文件名 My_Security.php 并将以下代码粘贴到其中以覆盖默认功能。

```
<?php if (!defined('BASEPATH')) exit('No direct script access allowed');
class MY_Security extends CI_Security {
    function __construct()
    {
      parent::__construct();
    }

    // --------------------------------------------------------------------

    /*
        * Modified for cb_cms
     */
    protected function _remove_evil_attributes($str, $is_image)
    {
        // All javascript event handlers (e.g. onload, onclick, onmouseover), style, and xmlns
        $allowed = array("your allowed url's without domain like '/admin/edittext/'");
        if(in_array($_SERVER['REQUEST_URI'],$allowed)){
            $evil_attributes = array('on\w*', 'xmlns');
        }else{
            $evil_attributes = array('on\w*', 'style', 'xmlns');
        }

        if ($is_image === TRUE)
        {
            /*
             * Adobe Photoshop puts XML metadata into JFIF images, 
             * including namespacing, so we have to allow this for images.
             */
            unset($evil_attributes[array_search('xmlns', $evil_attributes)]);
        }

        do {
            $str = preg_replace(
                "#<(/?[^><]+?)([^A-Za-z\-])(".implode('|', $evil_attributes).")(\s*=\s*)([\"][^>]*?[\"]|[\'][^>]*?[\']|[^>]*?)([\s><])([><]*)#i",
                "<$1$6",
                $str, -1, $count
            );
        } while ($count);

        return $str;
    }

} 
?> 
```

# android - 蓝牙 Android 无法发送任何内容

> ID：14924938
> 
> 赞同：0
> 
> 时间：2013-02-17T19:11:20.410
> 
> 标签：android, bluetooth

当我以为我有一个答案时，我整天都在寻找答案-它没有用。我在这里阅读了很多主题，但我仍然遇到问题。我不能通过蓝牙发送任何东西。

```
package sk.example.arduinobtcontrol;

import java.util.Set;

import java.io.IOException;
import java.io.OutputStream;
import java.lang.reflect.Method;
import java.util.UUID;

import org.apache.http.conn.ConnectTimeoutException;

import android.app.Activity;
import android.bluetooth.BluetoothAdapter;
import android.bluetooth.BluetoothClass.Device;
import android.bluetooth.BluetoothDevice;
import android.bluetooth.BluetoothServerSocket;
import android.bluetooth.BluetoothSocket;
import android.content.Intent;
import android.os.Bundle;
import android.provider.Settings.Secure;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Adapter;
import android.widget.Button;
import android.widget.ImageButton;
import android.widget.TextView;
import android.widget.Toast;

public class ArduinoBTControl extends Activity {
    private String adress = "00:12:12:04:41:66";
    Button Vyhladaj,Pripoj,Switch;
    TextView tex;
    BluetoothAdapter mAdapter = BluetoothAdapter.getDefaultAdapter();
    BluetoothDevice mDevice = mAdapter.getRemoteDevice(adress);
    byte sendByte;
    public OutputStream mOutputStream=null;

    // static BluetoothSerialService blue;
    private static final int REQUEST_ENABLE_BT = 3;
    public static final UUID uuid = UUID.fromString("00001101-0000-1000-8000-00805F9B34FB");

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_arduino_btcontrol);
        if(!mAdapter.isEnabled()) {
            Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
            startActivityForResult(enableBtIntent, REQUEST_ENABLE_BT);
        }
        Vyhladaj = (Button)findViewById(R.id.button1);
        Vyhladaj.setOnClickListener(new Button_Clicker());
        Switch = (Button)findViewById(R.id.button2);
        Switch.setOnClickListener(new Button_Clicker());
        Pripoj = (Button)findViewById(R.id.button3);
        Pripoj.setOnClickListener(new Button_Clicker());
        tex = (TextView)findViewById(R.id.textView1);
    }

    class Button_Clicker implements Button.OnClickListener
    {
        @Override
        public void onClick(View v) {
            switch(v.getId()) {
            case R.id.button1:
            {
                BluetoothAdapter adapter = BluetoothAdapter.getDefaultAdapter();
                adapter.startDiscovery();
                Set<BluetoothDevice> devices = adapter.getBondedDevices();
                for(BluetoothDevice device : devices) {
                    tex.setText(tex.getText()+"\nFound device:"+device);
                }
            }
            Toast.makeText(v.getContext(), "Hello!! button Clicked", Toast.LENGTH_SHORT).show();
            break;
            case R.id.button2:
                //System.exit(0);break;
                write(sendByte);break;
            case R.id.button3: Conect(mDevice); break;
            }
        }
    }

    private BluetoothSocket mSocket;
    public void Conect(BluetoothDevice mDevice) {
        BluetoothSocket tmp=null;
        mAdapter.cancelDiscovery();

        try {
            Method m = mDevice.getClass().getMethod("createRfcommSocket", new Class[] {int.class});
            tmp = (BluetoothSocket) m.invoke(mDevice, 1);
        } catch(Exception e) {
            Toast.makeText(getApplicationContext(), "FAIL", Toast.LENGTH_LONG).show();
        }
        mSocket = tmp;
        try{
            mSocket.connect();
        } catch (IOException connectException) {
            try{mSocket.close();}
            catch(IOException closeException) {}
            return;
        }
    }

    public void write(byte sendByte) {
        try {
            mOutputStream = mSocket.getOutputStream();
            mOutputStream.write(sendByte);
            Toast.makeText(getApplicationContext(),"Odoslane", Toast.LENGTH_SHORT).show();
        }
        catch (IOException e) {}
    }

    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_arduino_btcontrol, menu);
        return true;
    }
} 
```

有整个代码，认为当我按下 button2 调用 write(sendByte) 时，应用程序崩溃虽然 eclipse 没有显示错误并编译应用程序。所以我认为问题出在

```
 public void write(byte sendByte){
        try {mOutputStream = mSocket.getOutputStream();
             mOutputStream.write(sendByte);
            Toast.makeText(getApplicationContext(),"Odoslane", Toast.LENGTH_SHORT).show();
        }
        catch (IOException e) {}
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T21:27:38.507

也许你`mSocket.connect()`失败了，但由于你没有在异常中打印任何东西，你永远不会知道！

```
try{ 
    mSocket.connect();
} catch (IOException connectException) {
    connectException.printStachTrace(); // SHOW THE ERROR  
    try{mSocket.close();}  
    catch(IOException closeException) {}
    return;
} 
```

另外你为什么使用反射来创建`createRfcommSocket`？请参阅以下代码片段作为指南：

```
static final UUID SERIAL_UUID = UUID
        .fromString("00001101-0000-1000-8000-00805F9B34FB");

String BTAddress = "00:12:12:04:41:66";

BluetoothDevice btDevice = btAdapter.getRemoteDevice(BTAddress);
BluetoothSocket btSocket = btDevice.createRfcommSocketToServiceRecord(SERIAL_UUID);
btSocket.connect();
BluetoothSocket iStream = btSocket.getInputStream();
OutputStream oStream = btSocket.getOutputStream(); 
```

同样出于测试和调试目的，您可以编写一些硬编码值，例如`write(5);`

# c# - 如何避免 Winforms ToolStrip 左侧的 3 个像素间隙？

> ID：14924939
> 
> 赞同：2
> 
> 时间：2013-02-17T19:11:29.160
> 
> 标签：c#, winforms, margin, padding, toolstrip

我正在使用 Windows 7 和 Winforms/C#。

当我将工具条添加到工具条容器时，工具条左侧有 3 个像素的空间。即使我将位置设置为 0,0，它也会将其重置回 3,0。这是一张图片来证明这一点：

![在此处输入图像描述](../Images/8d8e8b2ea65217950e0a01be62bb4e7e.png)

我怎样才能避免这种情况？我已将 ToolStripContainer 的填充和边距设置为 0，并尝试了不同的 RenderMode，但似乎没有任何帮助。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T02:48:08.287

```
public Form1()
{
    InitializeComponent();
    this.toolStripContainer1.TopToolStripPanel.RowMargin = new Padding(0);
} 
```

只需`RowMargin`在`ToolStripContainer`. 它在设计器中不可用，因此需要在代码中设置，如上所示。显然，默认情况下，它的`Left`属性`RowMargin`设置为 3。这就是为什么当您将其设置为 0 时位置没有改变的原因。

结果：

![RowMargin 为 0 的 ToolStripContainer](../Images/87a685fcf0f9663190c8aa3076b456bd.png)

编辑：似乎我激发了自己的好奇心。现在我想看看我是否可以摆脱底部的 2 像素间隙。到目前为止，这似乎更难追踪。

编辑2：好的，我想通了。它是由`ToolStrip`'s 渲染器完成的。在此示例中，我使用`System`as `RenderMode`，因此我在项目中添加了一个新类，该类继承`ToolStripSystemRenderer`并覆盖了该`OnRenderToolStripBorder`方法，并注释掉了对基方法的调用。

```
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public class MyToolStripSystemRenderer : ToolStripSystemRenderer
    {
        protected override void  OnRenderToolStripBorder(ToolStripRenderEventArgs e)
        {
            //base.OnRenderToolStripBorder(e);
        }
    }
} 
```

然后我在表单的构造函数中添加了另一行来分配自定义渲染器。

```
public Form1()
{
    InitializeComponent();
    this.toolStrip1.Renderer = new MyToolStripSystemRenderer();
    this.toolStripContainer1.TopToolStripPanel.RowMargin = new Padding(0);
} 
```

结果：
![RowMargin 为 0 且无 2 像素边框的 ToolStrip 面板](../Images/2e2b1cb225745dfbe0df5d4385cda950.png)

编辑3：所以我今天发现这是一个已知的错误`ToolStripSystemRenderer`。我想我没有找到它，因为我最初认为它与`ToolStripContainer`. 无论如何，对于那些有帮助的人，这里有一个关于工具条“边界”的问题。[https://stackoverflow.com/a/2060360/2056131](https://stackoverflow.com/a/2060360/2056131)

# postgresql - Postgresql - 从 Excel 文件填充数据库

> ID：14924942
> 
> 赞同：0
> 
> 时间：2013-02-17T19:11:37.880
> 
> 标签：postgresql

我想从一个 excel 文件填充我的客户数据库，我正在使用 \copy 命令，但我收到以下错误。谁能帮我解决这个问题？

```
\copy customer from '/home/2008/uehtes/Desktop/Comp421/data.xlsx';
ERROR:  invalid byte sequence for encoding "UTF8": 0xde76
CONTEXT:  COPY customer, line 1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T23:07:08.260

PostgreSQL 的`COPY`命令及其`psql` `\copy`包装器不理解或不支持 Microsoft Office Excel ( `xls`) 或 Microsoft Office XML 电子表格 ( `xlsx`) 文件格式。

您必须将 Excel 文件另存为 CSV 并使用`\copy ... CSV`，或者使用能够理解 Microsoft Excel 格式的 ETL 工具。保存为 CSV 将是迄今为止最简单的方法。

Excel 工作表中的数据必须与您要`copy`进入的表的 PostgreSQL 列定义兼容。例如，您不能将值复制`ABC123`到`integer`列中。

如果您的 Excel 数据杂乱无章，充满了无效值，或者存在其他问题，请考虑先在 Excel 中通过添加验证对其进行清理。`TEMPORARY`或者，您可以将其导入到`UNLOGGED`问题列全部使用`text`数据类型定义的 PostgreSQL 表中，然后使用`INSERT INTO ... SELECT`命令将清理后的数据插入最终表中。最后一个选择是再次使用 ETL 工具（如上述工具之一）在加载和插入数据时清理数据。

您选择哪种方法取决于您更喜欢使用 SQL 查询、ETL 工具还是 Excel。

# objective-c - UIImageView 调整大小

> ID：14924952
> 
> 赞同：0
> 
> 时间：2013-02-17T19:12:18.547
> 
> 标签：objective-c, xcode, uistoryboard

在我的故事板上，我有一个 UIImageView，它没有按预期占据整个屏幕。在运行时，图像占据了整个屏幕，这是一个问题，因为我想在顶部添加一些按钮。

这是我将图片分配给视图的位置：

```
_imageView.image = [UIImage imageNamed:@"floors.png"]; 
```

以下是相关截图：

![故事板中的 UIImageView（不占用全视图）](../Images/d0c6206310ed029125afe7438cb10ea4.png) ![在运行时，当它占据全视图并与“按钮”重叠时](../Images/f4effff1543a844eedad335d973a4f8b.png)

如何使图像保持与故事板上的大小相同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T19:15:41.437

![在此处输入图像描述](../Images/1660ab6caf88c805ad34222dfd5ae719.png)

将imageview的视图模式设置为按比例填充情节提要

检查的另一个选项是您是否正确设置了自动布局

# php - PDO fetch 未从表中返回任何行

> ID：14924955
> 
> 赞同：-2
> 
> 时间：2013-02-17T19:12:38.773
> 
> 标签：php, pdo

为什么我的 PDO 提取没有从表中返回任何行？

```
 $sql = "SELECT * from ts_rounds WHERE current=:current";
    $stm = $pdo->prepare( $sql );
    $stm->execute( array( ':current' => 1 ) );
    $rows = $stm->fetch();
    echo $row["name"]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T19:14:27.270

将 : 放在第一行的 = 之后：

```
$sql = "SELECT * from ts_rounds WHERE current=:current"; 
```

# javascript - 为什么我的函数不将 json 文件转换为数组 json

> ID：14924960
> 
> 赞同：1
> 
> 时间：2013-02-17T19:13:18.060
> 
> 标签：javascript, jquery, arrays, json

showArray 是一个显示 json 文件内容的函数，我的函数有什么问题？为什么它不起作用

```
function getArray() {
    var quest = [];
    $.getJSON('data.json', function (json) {
        for (var key in json) {
            if (json.hasOwnProperty(key)) {
                var item = json[key];
                quest.push({
                    Name:item.Name
                });
            }
        }
        callback(quest);
    });
}
$(document).ready(function () {
    getArray();
});
function showArray() {
    var callback = function (quest) {
        console.log(quest)
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T19:15:34.070

`callback`是一个**局部**变量。您需要将其传递给`getArray()`函数，可能通过将其作为参数传递。

# php - mysql中的更新表-删除旧的，插入新的，更新更新的

> ID：14924961
> 
> 赞同：1
> 
> 时间：2013-02-17T19:13:20.237
> 
> 标签：php, html, mysql

我有一个显示为 html 表的 mysql 表。用户能够更新、插入和删除行。单击保存按钮后，我想更新我的 mysql 表。

我目前的方法是删除所有行并在保存时插入所有新行。但是，当我的插入功能出现错误并且我已经删除了所有内容时，我遇到了问题。

我觉得这种方法很草率，导致不必要的删除。它可能会删除并插入 50 行只是为了更新一个单元格。

在mysql中更新表的正确方法是什么？

编辑：我目前的工作解决方案是这个

*   向表中添加已删除的列，默认值为 0

*   为行中的每个单元格在表上创建唯一索引（ID 除外）

*   保存表时，更新每一行，设置deleted = 1

*   对于表中的每一行，插入到 mysql 中，重复集已删除 = 0

*   仅显示已删除 = 0 的行

您可以选择删除已删除 = 1 的行来清理它，但我喜欢将其保留为备份。

这个解决方案会出现两个问题：

*   不允许有两个相同的行。如果发现重复项，mysql 将仅替换 deleted = 0

*   如果一行中的一个单元格被更改，将创建一个新行并且不会简单地更新旧行。这可以修复，但我几乎不介意能够“撤消”编辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T19:24:43.323

我有两个想法如何去做。

1.

如果每一行都有一个 id，您可以直接处理更新。只是用户-> 数据库。如果无法应用更改，则不会删除任何内容。

> 1.| 简 | 20
> 
> 2.| 菲利普| 30
> 
> 3.| 卢卡斯 | 50

生成查询，如更新“2”将他的年龄从 30 替换为 20，然后刷新窗口。将处理更新，不需要全部删除。刷新后，新的 html 表被写出所有的变化。

2.

继续使用您的方法，但确保在并行表中可以处理更新。

*   如果可以，则向用户显示该表，并且在他接受后，并行表的并行内容将插入已使用的表中。

*   如果不能，写错误并且什么都不做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T19:26:51.723

本周我遇到了同样的问题。我的决定是将列表数据表保存在会话变量中。稍后，在mysql上插入这个变量列表。如果此插入脚本出现异常，我将回滚事务以撤消操作。但是，无一例外，所有行都被删除并且会话变量被清除。我也需要改进这个过程！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T00:33:55.390

在 w3schools 上查看“更新”。

您将需要按照以下方式做一些事情：

```
Update (tablename)
Set (columnname)='newvalue'
Where id='idYouWantToUpdate' 
```

更新是你想要做的。不删除所有内容并再次插入所有内容。

# python - 代码中的matplotlib原始字符串换行符

> ID：14924963
> 
> 赞同：2
> 
> 时间：2013-02-17T19:13:22.397
> 
> 标签：python, matplotlib

matplotlib文本字段代码中的字符或字符链是什么来断行以避免代码行过长？

例如：

```
plt.text(0.5, 0.5,
    r'$\mathsf{sin\left(\frac{\pi}{180} f_1 \theta + \varphi_1\right) + B sin\left(\frac{\pi}{180} f_2 \theta + \varphi_2\right)}$' 
```

用于`"\"`打破在无格式文本中打印的长行产量。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T19:21:15.927

我通常利用字符串文字连接。IOW，如果您在没有任何干预运算符的情况下彼此相邻的字符串，那么它们会自动加入：

```
>>> "a" + "b"
'ab'
>>> "a" "b"
'ab' 
```

所以

```
plt.text(0.5, 0.5,
         r'$\mathsf{sin\left(\frac{\pi}{180} f_1 \theta + \varphi_1\right)'
         r'     + B sin\left(\frac{\pi}{180} f_2 \theta + \varphi_2\right)}$') 
```

也可以。（因为这是 TeX，所以我添加了一些额外的空格来使两条线对齐；如果我们正在使用对空格更敏感的东西，那将无法工作。）

# javascript - 如何使用 JavaScript 计算鼠标特定的移动

> ID：14924964
> 
> 赞同：1
> 
> 时间：2013-02-17T19:13:22.647
> 
> 标签：javascript, jquery, events, mouse

我想知道如何计算鼠标特定的移动。

我想就如何确定鼠标从 A 移动到 B 提供一些建议。

比如像win8。当鼠标在窗口一侧时，然后将其放下，将出现一个侧边栏。

```
$(window).on('mousemove' function(e){
   if(e.pageX is on area of or close to the side of window){
      // how can I calculate if the mouse Y is from a point to a point??
      if(Y is moved from A to B){
          //do something
      }
   }
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T19:44:53.517

`window`您可以通过检查其宽度来确定其左侧：

```
if(e.pageX >= ($(window).width() - 20)) 
```

将检查鼠标是否在窗口右侧的 20px 内。

要检查它移动了多远，您需要以某种方式记录最后一个已知位置，然后进行比较。因此，例如，您可能会执行以下操作：

```
var last_pos = { x: false, y: false },
 coord_check = $(window).width() - 20; // or whatever value from the right you want to check.

$(window).on('mousemove' function(e) {

    if(e.pageX >= coord_check)
    {
        // If they're null, we can't do anything:
        if((last_pos.x !== false && last_pos.y !== false) && ((e.pageX - last_pos.x) > 20)) {
            // you can access the current position through e.pageX and e.pageY
            // last_post.x and last_pos.y will tell you the last known position
        }
    }

    // Now we need to update the last position:
    last_pos.x = e.pageX;
    last_pos.y = e.pageY;

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T19:47:21.033

您应该有“区域”来控制，并在 mousemove 中跟踪最后一个和当前区域，并基于注册事件处理程序来处理场景，例如从 A 到 B，从 C 到 X 等等. :)

这里有一个任务列表：

*   创建具有 x、y、宽度、高度和名称的区域对象数组
*   在 onmouse move 检查当前区域是否与当前区域不同，然后将前一个区域设置为当前区域，并将当前区域名称更改为当前区域名称。
*   将变量 event 设置为 previous + '-' + current
*   检查事件处理程序数组中事件位置中的任何数据，如果有任何函数调用则

希望能帮助到你 ！

# assembly - 在 fasm (MS-DOS) 中访问 0xF000FFFE（计算机类型）的内存

> ID：14924967
> 
> 赞同：2
> 
> 时间：2013-02-17T19:13:43.447
> 
> 标签：assembly, x86, dos, fasm, real-mode

问题是：我需要从 BIOS 内存中获取“计算机”类型。我知道，我可以在 fasm 中这样做（我的程序和所有段都是 16 位）：

```
mov al, [0xF000FFFE] 
```

但这会返回零，这是不对的，因为 turbo c++ 3.1 中的等效代码

```
UCHAR pcType = *((UCHAR*)0xF000FFFE); 
```

**使用 LARGE 模型**（在代码生成设置中）时，返回我计算机的正确“类型” 。那么如何在 fasm 中修复它？（例如我知道，masm 有 .model 指令，但 fasm 中没有这样的东西）。请帮忙...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-08-29T22:41:23.490

Turbo-C 正在执行从**远**地址 0xF000FFFE 读取的指令。段是地址的高 16 位，偏移量是地址的低 16 位。在大内存模型中，**远**指针 0xF000FFFE 指向段 0xF000，偏移量 = 0xFFFE。实模式[段：偏移（逻辑）地址](https://thestarman.pcministry.com/asm/debug/Segments.html)通过计算转换为物理地址`(segment<<4)+offset`，在这种情况下是物理地址 (0xF000<<4)+0xFFFE = 0xFFFFE，它是内存的 1MiB 标记以下的倒数第二个字节在系统 ID 字节所在的 ROM BIOS 中。

您将需要创建等效的 FASM 代码以将段寄存器之一设置为 0xF000，然后检索偏移量 0xFFFE 处的值。[以下代码只是通过Int 21h/AH=4Ch](http://www.ctyme.com/intr/rb-2974.htm)返回的错误级别（代码）将系统 ID 返回给 DOS 。返回值在*AL*中：

```
format mz                      ; Create a DOS EXE program

    mov ax, 0xf000
    mov es, ax                 ; ES = 0xf000
    mov al, [es:0xfffe]        ; Read byte at 0xF000:0xFFFE

    mov ah, 4Ch                ; DOS Exit and Return with error code function
    int 21h                    ; Exit and return System ID in AL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T15:52:43.637

它在 Turbo C 中工作，因为它将 32 位值解释为段：偏移量对而不是平面指针。如果要使用平面指针，则应使用地址 0xFFFFFFFE（如果 BIOS 未禁用闪存映射），或 0xFFFFE，即与指针 F000:FFFE 对应的线性内存地址。这两个都只在虚幻模式下工作，因为它们使用大于 64K 的偏移量，这在纯实模式下是不可能的。最简单的可能是使用普通的 16 位段：偏移地址，就像您在评论中提到的那样，因为这将始终有效。

# java - JTable show JTextFiled search result

> ID：14924969
> 
> 赞同：0
> 
> 时间：2013-02-17T19:14:02.183
> 
> 标签：java, swing, jtable

I have a JTextFiled and JTable that read data from text file.

I want to add a keyListener to my JTextFiled that when enter a number ' program should search my textfile and show lines that start with that number on my JTable.

My Text File:

```
26     thired     62     Yes
29     sixth     92     No
35     vff     53     No
33     oll     36     No
38     koole     86     No 
```

For example, When i write "3" in textfield, my JTable should display this three lines on own:

```
35     vff     53     No
33     oll     36     No
38     koole     86     No 
```

My Code:

```
public class BookPage extends JFrame implements KeyListener{

private AllBooks bookModel;
private JTable bTabel;
JTextField tf1;

public BookPage(){
    bookModel=new AllBooks();
    bTabel=new JTable(bookModel);

    tf1=new JTextField(20);
    tf1.addKeyListener(this);

    JPanel panel= new JPanel();
    JScrollPane scroolpane=new JScrollPane(bTabel);
    panel.add(tf1);
    panel.add(scroolpane);
    this.setContentPane(panel);
    this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    this.setBounds(300, 60, 800, 600);
    this.setVisible(true);
}

public static void main(String[] args){
    new BookPage().setVisible(true);
}

@Override
public void keyTyped(KeyEvent e) {
    String line=tf1.getText().trim();
    SearchBook(line);

}

@Override
public void keyPressed(KeyEvent e) {
    throw new UnsupportedOperationException("Not supported yet.");
}

@Override
public void keyReleased(KeyEvent e) {
    throw new UnsupportedOperationException("Not supported yet.");
}

public void SearchBook(String Bid){
    File f=new File("AllBookRecords.txt");
    try{
        FileReader Bfr=new FileReader(f);
        BufferedReader Bbr=new BufferedReader(Bfr);
        String bs;
        while( (bs=Bbr.readLine()) != null ){
            String[] Ust=bs.split("     ");
            String id=Ust[0];
            String Bname=Ust[1];
            String Bdate=Ust[2];
            String borrowS=Ust[3];
            if(id.equals(Bid.trim())){
               bTabel.setValueAt(Bname, 10, 1);
            }
        }
    }
    catch (IOException ex) {

    }
}
} 
```

Second Class:

```
public class AllBooks extends AbstractTableModel{
BookInformation Binfos1=new BookInformation();

String[] Bcol=new String[]{"Id","Name","Date","Borrow Status"};
ArrayList<BookInformation> Bdata=new ArrayList<BookInformation>();

public AllBooks(){
    try{
        FileReader fr=new FileReader("AllBookRecords.txt");
        BufferedReader br=new BufferedReader(fr);
        String line;

        while( (line=br.readLine()) != null){
            Bdata.add(initializeBookInfos(line));
        }
        br.close();
    }
    catch(IOException ioe){

    }
}

public static BookInformation initializeBookInfos(String myLine){
    BookInformation Binit=new BookInformation();
    String[] bookCellArray=myLine.split("     ");
    Binit.setBookID(bookCellArray[0]);
    Binit.setBookName(bookCellArray[1]);
    Binit.setBookDate(bookCellArray[2]);
    Binit.setBorrowStatus(bookCellArray[3]);
    return Binit;
}
public void RemoveMyRow(int row){
    if(RemoveBookFromFile(row)){
       Bdata.remove(row);
      fireTableRowsDeleted(row, row);
    }
}

public boolean RemoveBookFromFile(int index){

    File Mf=new File("AllBookRecords.txt");
    File Tf=new File("Boutput.txt");
    try{
        BufferedReader Ubr=new BufferedReader(new FileReader(Mf));
        PrintWriter Bpw=new PrintWriter(new FileWriter(Tf));
        String line;
        while( (line=Ubr.readLine()) != null ){
            if(line.trim().length() == 0){
                continue;
            }
            if(!line.startsWith(String.valueOf(getValueAt(index, 0)))){
                Bpw.println(line);
            }
        }
        Bpw.close();
        Ubr.close();
        Mf.delete();
        Tf.renameTo(Mf);
        return true;
    } catch(FileNotFoundException e1){
        return false;
    }
    catch(IOException ioe){
          return false;
    }
}

public void AddRow(BookInformation bookinfo){
    if(WriteBooktofile(bookinfo.toString())){
        Bdata.add(bookinfo);
        fireTableRowsInserted(Bdata.size()-1, Bdata.size()-1);
    }
    else{
        JOptionPane.showMessageDialog(null, "Unable Add To File"+bookinfo.getBookName());
    }
}

public boolean WriteBooktofile(String bookc){
    try{
        File f=new File("AllBookRecords.txt");

            FileWriter fw=new FileWriter(f.getAbsoluteFile(), true);
            BufferedWriter bw=new BufferedWriter(fw);
            bw.write(bookc);
            bw.close();
            return true;
    }
    catch(Exception e){
        return false;
    }
}

@Override
public String getColumnName(int col){
    return Bcol[col];
}

@Override
public int getRowCount() {
    if(Bdata !=null){
    return Bdata.size();
    }
    else{
        return 0;
    }
}

@Override
public int getColumnCount() {
    return Bcol.length;
}

@Override
public Object getValueAt(int rowIndex, int columnIndex) {
    BookInformation binfo=Bdata.get(rowIndex);
    Object value;

    switch(columnIndex){

        case 0:
            value=binfo.getBookID();
            break;
        case 1:
            value=binfo.getBookName();
            break;
        case 2:
            value=binfo.getBookDate();
            break;
        case 3:
            value=binfo.getBorrowStatus();
            break;
        default :
            value="...";  
    }
    return value;
}
} 
```

Second Class:

```
public class BookInformation {

private String BookName;
private String BookDate;
private String BookID;
private String BorrowStatus;

public String getBookName() {
    return BookName;
}

public void setBookName(String book_name) {
    this.BookName = book_name;
}

public String getBookDate() {
    return BookDate;
}

public void setBookDate(String book_date) {
    this.BookDate = book_date;
}

public String getBookID() {
    return BookID;
}

public void setBookID(String Book_id) {
    this.BookID = Book_id;
}

@Override
public String toString(){
    return BookID + "     " + BookName+ "     "
            + BookDate +"     "+ BorrowStatus + "\n";
}

public String getBorrowStatus() {
    return BorrowStatus;
}

public void setBorrowStatus(String borrowStat) {
    BorrowStatus = borrowStat;
}

} 
```

thanks for help.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T20:35:35.453

Load all of the data into a JTable. Then use the table filtering feature to display only the rows you want. The **TableFilterDemo** from the [Sorting and Filtering](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#sorting) section of the Swing tutorial is a working example that does this.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T21:31:36.250

I have to make some changes on your nativ code to make it works. Please note that i have not check the hole code of his functionality.

I use

```
 @Override
        public void keyReleased(KeyEvent e) {
            String line = tf1.getText().trim();
            SearchBook(line);
        } 
```

instead of `public void keyTyped(KeyEvent e) {}` because it doesn't transmit the first value

Your old BookPage looks now as

```
public class BookPage extends JFrame implements KeyListener {

    private static final long serialVersionUID = 1L;

    private AllBooks bookModel;

    private JTable bTabel;

    JTextField tf1;

    public BookPage() {
        bookModel = new AllBooks();
        bTabel = new JTable(bookModel);

        tf1 = new JTextField(20);
        tf1.addKeyListener(this);

        JPanel panel = new JPanel();
        JScrollPane scroolpane = new JScrollPane(bTabel);
        panel.add(tf1);
        panel.add(scroolpane);
        this.setContentPane(panel);
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        this.setBounds(300, 60, 800, 600);
        this.setVisible(true);
    }

    public static void main(String[] args) {
        new BookPage().setVisible(true);
    }

    @Override
    public void keyTyped(KeyEvent e) {
    }

    @Override
    public void keyPressed(KeyEvent e) {
    }

    @Override
    public void keyReleased(KeyEvent e) {
        String line = tf1.getText().trim();
        SearchBook(line);
    }

    public void SearchBook(String bid) {
        List<BookInformation> filtedRows = new ArrayList<BookInformation>();
        try {
            InputStream stream = getClass().getResourceAsStream("AllBookRecords.txt");
            BufferedReader reader = new BufferedReader(new InputStreamReader(stream, "UTF-8"));
            String bs;
            while((bs = reader.readLine()) != null) {
                BookInformation information = new BookInformation();
                String[] Ust = bs.split("\\t");
                information.setBookID(Ust[0]);
                information.setBookName(Ust[1]);
                information.setBookDate(Ust[2]);
                information.setBorrowStatus(Ust[3]);
                if(information.getBookID().equals(bid) || information.getBookID().startsWith(bid)) {
                    filtedRows.add(information);
                }
            }
            if(!filtedRows.isEmpty()) {
                      //remove old rows
                for(int i = bookModel.getRowCount() - 1; i >= 0; i--) {
                    bookModel.RemoveMyRow(i);
                }
                     //add new rows
                for(BookInformation bookInformation : filtedRows) {
                    bookModel.AddRow(bookInformation);
                }
            }
            bookModel.fireTableDataChanged();

        } catch(IOException ex) {
            ex.getStackTrace();
            System.out.println(ex.getMessage());
        }
    }
} 
```

the major changes are done in `public void SearchBook(String bid) {}` if some is not clear feel free to ask me.

In your AllBooks just a little change

```
public class AllBooks extends AbstractTableModel {

    private static final long serialVersionUID = 1L;

    BookInformation Binfos1 = new BookInformation();

    String[] bCol = new String[] { "Id", "Name", "Date", "Borrow Status" };

    ArrayList<BookInformation> bData = new ArrayList<BookInformation>();

    public AllBooks() {
        try {
            InputStream stream = getClass().getResourceAsStream("AllBookRecords.txt");
            BufferedReader reader = new BufferedReader(new InputStreamReader(stream, "UTF-8"));
            String line;

            while((line = reader.readLine()) != null) {
                bData.add(initializeBookInfos(line));
            }
            reader.close();
        } catch(IOException ioe) {

        }
    }

    public static BookInformation initializeBookInfos(String myLine) {
        BookInformation Binit = new BookInformation();
        String[] bookCellArray = myLine.split("\\t");
        Binit.setBookID(bookCellArray[0]);
        Binit.setBookName(bookCellArray[1]);
        Binit.setBookDate(bookCellArray[2]);
        Binit.setBorrowStatus(bookCellArray[3]);
        return Binit;
    }

    public void RemoveMyRow(int row) {
        if(RemoveBookFromFile(row)) {
            bData.remove(row);
            fireTableRowsDeleted(row, row);
        }
    }

    public boolean RemoveBookFromFile(int index) {

        File Mf = new File("AllBookRecords.txt");
        File Tf = new File("Boutput.txt");
        try {
            BufferedReader Ubr = new BufferedReader(new FileReader(Mf));
            PrintWriter Bpw = new PrintWriter(new FileWriter(Tf));
            String line;
            while((line = Ubr.readLine()) != null) {
                if(line.trim().length() == 0) {
                    continue;
                }
                if(!line.startsWith(String.valueOf(getValueAt(index, 0)))) {
                    Bpw.println(line);
                }
            }
            Bpw.close();
            Ubr.close();
            Mf.delete();
            Tf.renameTo(Mf);
            return true;
        } catch(FileNotFoundException e1) {
            return false;
        } catch(IOException ioe) {
            return false;
        }
    }

    public void AddRow(BookInformation bookinfo) {
        if(WriteBooktofile(bookinfo.toString())) {
            bData.add(bookinfo);
            fireTableRowsInserted(bData.size() - 1, bData.size() - 1);
        } else {
            JOptionPane.showMessageDialog(null, "Unable Add To File" + bookinfo.getBookName());
        }
    }

    public boolean WriteBooktofile(String bookc) {
        try {
            File f = new File("AllBookRecords.txt");

            FileWriter fw = new FileWriter(f.getAbsoluteFile(), true);
            BufferedWriter bw = new BufferedWriter(fw);
            bw.write(bookc);
            bw.close();
            return true;
        } catch(Exception e) {
            return false;
        }
    }

    @Override
    public String getColumnName(int col) {
        return bCol[col];
    }

    @Override
    public int getRowCount() {
        if(bData != null) {
            return bData.size();
        } else {
            return 0;
        }
    }

    @Override
    public int getColumnCount() {
        return bCol.length;
    }

    @Override
    public Object getValueAt(int rowIndex, int columnIndex) {
        BookInformation binfo = bData.get(rowIndex);
        Object value;

        switch(columnIndex) {

            case 0:
                value = binfo.getBookID();
                break;
            case 1:
                value = binfo.getBookName();
                break;
            case 2:
                value = binfo.getBookDate();
                break;
            case 3:
                value = binfo.getBorrowStatus();
                break;
            default:
                value = "...";
        }
        return value;
    }

} 
```

Now your AllBookRecords.txt is with tab separated (\t)

```
26  thired  62  Yes
29  sixth   92  No
35  vff 53  No
33  oll 36  No
38  koole   86  No 
```

There is a several way to deal with this issue but i don't want to write every on my way but try to make your code works with little changes

# javascript - 如何显示（） 基于使用 javascript 在 url 中指定的标签

> ID：14924977
> 
> 赞同：0
> 
> 时间：2013-02-17T19:14:37.210
> 
> 标签：javascript

我的标签式菜单及其内容的 html：

```
<div class="tab-menu"> <!-- menu -->
    <ul>
        <li><a href="#tab1">link to tab 1</a></li>
        <li><a href="#tab2">link to tab 2</a></li>
        <li><a href="#tab3">link to tab 3</a></li>
    </ul>
</div>
<div class="tab-wrapper"> <!-- content -->
<!-- BEGIN FIRST TAB -->
    <div id="tab1" class="tab">first tab content</div>
    <div id="tab2" class="tab">second tab content</div>
    <div id="tab3" class="tab">third tab content</div>
</div> 
```

...并且使菜单工作的脚本是

```
 // Displays the first tab when 
$(".tabs").each(function(){
    $(this).find(".tab").hide();
    $(this).find(".tab-menu li:first a").addClass("active").show();
    $(this).find(".tab:first").show();
});

$(".tabs").each(function(){

    $(this).find(".tab-menu a").click(function() {

        $(this).parent().parent().find("a").removeClass("active");
        $(this).addClass("active");
        $(this).parent().parent().parent().parent().find(".tab").hide();
        var activeTab = $(this).attr("href");
        $(activeTab).fadeIn();
        return false;

    });

}); 
```

当用户单击选项卡时，菜单起作用。这意味着菜单默认打开时第一个`<div>`可见，当用户单击另一个选项卡时，对应的选项会`<div>`按预期显示。但是，当我输入 url 时`mysite/path#tab2`，它仍然会打开 tab1 打开。我需要做什么才能使用 tab2 打开它？具体来说，如何访问 url 并提取标签？我想在 javascript 中执行此操作

编辑：似乎`document.location.href`提供了完整的网址。如何解析和提取此 url 中的标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T19:22:27.787

加载页面时，检查`location.hash`属性并相应地执行：

```
$(function() {
    $(".tab").hide();
    $(".tab-menu a").removeClass("active");

    $(location.hash).show();
    $(".tab-menu a[href='" + location.hash + "']").addClass("active");
}); 
```

比这更好，根本不注册任何`click`侦听器，只需使用`hashchange`事件：

```
$(window).hashchange(function() {
    $(".tab").hide();
    $(".tab-menu a").removeClass("active");

    $(location.hash).show();
    $(".tab-menu a[href='" + location.hash + "']").addClass("active");
}); 
```

# php - 将 JSON 格式的数据从 PHP 脚本传递到 AJAX

> ID：14924979
> 
> 赞同：1
> 
> 时间：2013-02-17T19:14:50.900
> 
> 标签：php, ajax, json

我创建了一个 PHP 类，它从数据库中检索所有数据并以 JSON 格式取回结果：

```
public function getCategories() {
    if (!$this->isConnectionAlive()) {
        $this->getConnection();
    }

    $data = $this->dbconn->prepare("SELECT DISTINCT cat FROM regalo");
    $data->execute();
    $results=$data->fetchAll(PDO::FETCH_ASSOC);
    $json_data = json_encode($results);
} 
```

然后类的一个对象调用这个方法并且能够成功地做到这一点：

```
$dbh = new DatabaseHandler('localhost', 'fakeuser', 'fakepass', 'fakedb');

$dbh->getCategories(); 
```

如何将此数据传递给我的 AJAX 脚本，以便它可以操作 JSON 格式的结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T19:17:19.603

这应该在您的 javascript 中执行：

```
$.get('/getCategories',null,function(response){
  console.log(response);
},"JSON"); 
```

你需要在 php 脚本中回显你的 json 编码数据

```
public function getCategories() {
    if (!$this->isConnectionAlive()) {
        $this->getConnection();
    }

    $data = $this->dbconn->prepare("SELECT DISTINCT cat FROM regalo");
    $data->execute();
    $results=$data->fetchAll(PDO::FETCH_ASSOC);
    $json_data = json_encode($results);
    header('Content-type: text/json');
    header('Content-type: application/json');
    echo $json_data;
} 
```

实际上，我也会将其放入它自己的东西中以供以后重复使用：

```
public static function send_json_data($php_array)
{
        header('Content-type: text/json');
        header('Content-type: application/json');
        echo json_encode($php_array);
        exit(); //if you have hooks or something else that executes after output in your script, take this line out.
} 
```

# sql-server - 在 SQL Server 中编写父到子组查询？

> ID：14924981
> 
> 赞同：1
> 
> 时间：2013-02-17T19:14:59.597
> 
> 标签：sql-server, stored-procedures

有没有更有效的方法来编写没有子查询的查询？

表`Question_Group`：

```
Question_Group_ID int, 
Question_Group_Name nvarchar, 
Question_Group_Indent int,  // 1=parent,2=child,3=grandchild
Question_Group_Order int, 
Question_Parent_ID int 
```

我的查询：

```
SELECT 
   parent.Question_Group_Name, parent.Question_Group_Order, 
   L2Child.Question_Group_Name, L2Child.Question_Group_Order 
FROM
   (SELECT 
       Question_Group_ID, Question_Group_Name, Question_Group_Indent, 
       Question_Group_Order, Question_Parent_ID
    FROM
       Question_Groups 
    WHERE
       Question_Group_Indent = 1) parent
LEFT JOIN
   (SELECT
       Question_Group_ID, Question_Group_Name, Question_Group_Indent, 
       Question_Group_Order, Question_Parent_ID
    FROM 
       Question_Groups 
    WHERE 
       Question_Group_Indent = 2) L2Child ON parent.Question_Group_ID = L2Child.Question_Parent_ID
ORDER BY 
    parent.question_group_Order 
```

结果：

```
Pre-Site            1   NULL                                    NULL
Agency Information  2   Contacts                            1
Agency Information  2   Contracting Services                    2
Agency Information  2   Start-Up Agency                         3
Agency Information  2   Hiring                                  4
Agency Information  2   Budgeted and Actual Sworn Force         5
Agency Information  2   CP Questions                            6
Hiring Grants   3       Per Hiring Grant Questions          1
Non-Hiring Grants   4   Per Non-Hiring Grant Questions          1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T20:34:33.550

我不确定它是否更有效，但您可以使用 CTE 编写它以使其更具可读性。

```
WITH parent AS (SELECT Question_Group_ID, Question_Group_Name, Question_Group_Indent, 
                    Question_Group_Order, Question_Parent_ID
                FROM Question_Groups 
                WHERE Question_Group_Indent=1),
     L2Child AS (SELECT Question_Group_ID, Question_Group_Name, Question_Group_Indent, 
                    Question_Group_Order, Question_Parent_ID
                FROM Question_Groups 
                WHERE Question_Group_Indent=2)
SELECT parent.Question_Group_Name, parent.Question_Group_Order, 
    L2Child.Question_Group_Name, L2Child.Question_Group_Order 
FROM parent
LEFT JOIN L2Child
    ON parent.Question_Group_ID = L2Child.Question_Parent_ID
ORDER BY parent.question_group_Order 
```

另一种选择是以这种方式重写它

```
SELECT parent.Question_Group_Name, parent.Question_Group_Order, 
    L2Child.Question_Group_Name, L2Child.Question_Group_Order 
FROM Question_Groups AS parent
LEFT JOIN Question_Groups AS L2Child
    ON parent.Question_Group_ID = L2Child.Question_Parent_ID
    AND L2Child.Question_Group_Indent=2
WHERE parent.Question_Group_Indent=1
    ORDER BY parent.question_group_Order 
```

阅读[本文](http://www.sqlservercentral.com/articles/T-SQL/93039/)以了解为什么我将“左”表条件放在 WHERE 子句中，将“右”表条件放在 ON 子句中。

# database - 将数据库导入magento

> ID：14924982
> 
> 赞同：0
> 
> 时间：2013-02-17T19:15:01.387
> 
> 标签：database, magento, import

我想将tecdoc数据库导入magento，但直到现在还没有成功。我有 msql 格式的 tecdoc，可以将其导出为 csv 和 xml。我的问题是如何导入产品以保留数据库的架构。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-09T00:00:34.377

好吧，我怀疑我的帖子可能超出了主题，但这里有一个 magento 扩展，它从 Soap API 收集 Tecdoc 数据并实时显示结果。

[http://www.nimble3.com/car-parts-supplier-website-development-using-hpi-tecdoc/](http://www.nimble3.com/car-parts-supplier-website-development-using-hpi-tecdoc/)

演示： http: [//nimble3.com/demo/tecgento/template-2/car-parts.html](http://nimble3.com/demo/tecgento/template-2/car-parts.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T12:04:13.057

不确定您是否仍然需要回答您的问题，或者您是否已经想通了。我应该提前说一件事，TECDOC 和 Magento 是完全不同的结构，你需要更清楚你的问题。我目前正在处理的是一些复杂的查询，这些查询将产生特定的产品和类别。并使用 Perl 将其插入 Magento

# objective-c - 如何使用 OAuth 和 NSURLRequest 从 Twitter 获取请求令牌？

> ID：14924985
> 
> 赞同：3
> 
> 时间：2013-02-17T19:15:33.460
> 
> 标签：objective-c, twitter, oauth

我正在尝试使用以下代码从 twitter 获取和请求令牌：

```
NSString *letters = @"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
int length = 42;
NSMutableString *nonce = [NSMutableString stringWithCapacity: length];
for (int i = 0; i < length; i++) {
    [nonce appendFormat: @"%C", [letters characterAtIndex: arc4random() % [letters length]]];
}

NSURL *requestTokenURL = [NSURL URLWithString:@"https://api.twitter.com/oauth/request_token"];
NSInteger numberOfSecs = round([[NSDate date]timeIntervalSince1970]);
NSString *timestampString = [NSString stringWithFormat:@"%i", numberOfSecs];

NSMutableDictionary *signingParams = [[NSMutableDictionary alloc]initWithCapacity:10];
[signingParams setObject:@"xxxxxxxxxxxxxxx" forKey:@"oauth_consumer_key"];
[signingParams setObject:[nonce copy] forKey:@"oauth_nonce"];
[signingParams setObject:@"HMAC-SHA1" forKey:@"oauth_signature_method"];
[signingParams setObject:timestampString forKey:@"oauth_timestamp"];
[signingParams setObject:@"1.0" forKey:@"oauth_version"];

NSMutableURLRequest *mURLRequest = [[NSMutableURLRequest alloc]initWithURL:requestTokenURL];
mURLRequest.HTTPMethod = @"POST";
NSString *callbackURLString = @"http://bytolution.com";
//that is one fat piece of code...
NSString *authenticationHeaderString = [NSString stringWithFormat:@"OAuth oauth_callback=\"%@\", oauth_nonce=\"%@\", oauth_signature_method=\"HMAC-SHA1\", oauth_timestamp=\"%@\", oauth_consumer_key=\"xxxxxxxxxxxxxxxxx\", oauth_signature=\"%@\", oauth_version=\"1.0\"", [callbackURLString URLEncodedString], nonce, timestampString, [BYOAuthSignatureString signatureStringWithParameters:signingParams URL:[mURLRequest.URL absoluteString] HTTPMethod:mURLRequest.HTTPMethod]];

[mURLRequest setValue:authenticationHeaderString forHTTPHeaderField:@"Authorization"];

NSHTTPURLResponse *urlResponse;
NSError *error;
NSData *responseData = [NSURLConnection sendSynchronousRequest:mURLRequest returningResponse:&urlResponse error:&error];
NSString *dataString = [[NSString alloc]initWithData:responseData encoding:NSUTF8StringEncoding];
NSLog(@"data: %@, response:%@, error: %@", dataString , urlResponse.allHeaderFields, error); 
```

该类`BYOAuthSignatureString`创建签名以签署请求，我检查了请求的所有参数。他们应该根据 Twitter 的文档工作。

[创建签名](https://dev.twitter.com/docs/auth/creating-signature)

[使用 Twitter 实现登录](https://dev.twitter.com/docs/auth/implementing-sign-twitter)

但我的日志说

`data: Failed to validate oauth signature and token, response:(null), error: Error Domain=NSURLErrorDomain Code=-1012 "The operation couldn’t be completed. (NSURLErrorDomain error -1012.)" UserInfo=0x20892200 {NSErrorFailingURLKey=https://api.twitter.com/oauth/request_token, NSErrorFailingURLStringKey=https://api.twitter.com/oauth/request_token, NSUnderlyingError=0x20891ac0 "The operation couldn’t be completed. (kCFErrorDomainCFNetwork error -1012.)"}`

谢谢你的帮助！

# python - 在类函数中定义类函数：Python

> ID：14924987
> 
> 赞同：2
> 
> 时间：2013-02-17T19:15:37.877
> 
> 标签：python, class, nested

我有一个代码，我想在类函数中定义一个类函数。这是我想做的一个更简单的例子。该程序的目标是打印 4。

```
>>> class bluh:
...     def haha(self):
...             print 3
...     def __init__(self):
...             def haha(self):
...                     print 4
... 
>>> x = bluh()
>>> x.haha()
3 
```

我应该如何编写这个程序来做我想做的事？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-17T19:19:40.927

这真的取决于你想做什么。

```
>>> class Foo(object):
...     def haha(self):
...         print 3
...     def __init__(self):
...         def haha():
...             print 4
...         self.haha = haha
... 
>>> a = Foo()
>>> a.haha
<function haha at 0x7f4539e25aa0>
>>> a.haha()
4 
```

在前面的例子中，`haha`它实际上不是一个方法——它只是一个函数。但它会`self`从闭包中获得参考，而且很多时候，这可能已经足够好了。如果你真的想在实例上打猴子补丁/鸭子打一个新方法，你需要使用`types.MethodType`. 有关示例，请参见[此处。](https://stackoverflow.com/a/2982/748858)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T19:19:49.343

这将从实例向类添加方法。在大多数情况下，这不是您想做的事情，但语言使它变得如此简单。

```
class A(object):
    def __init__(self):
        def foo(self):
            print "bar"
        self.__class__.foo = foo 
```

当您构建某种数据驱动的自我修改代码时，使用这种技巧是合理的（对于我们大多数人来说，这不是每天都会遇到的情况）

# oracle - ORACLE：sql语句使用了主内存

> ID：14924988
> 
> 赞同：0
> 
> 时间：2013-02-17T19:15:39.580
> 
> 标签：oracle, memory, main

是否可以获得普通sql语句所需的已用主内存？我试图了解解释计划的工作原理，我找到了包含解释计划的 PLAN_TABLE，但我不确定 PLAN_TABLE 是否提供有关已用内存的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T22:18:11.047

PLAN_TABLE 保存来自[EXPLAIN PLAN](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_9010.htm#SQLRF01601)语句的信息，这是您的查询在执行时可能遵循的执行计划。实际执行统计数据可能与事先预期的完全不同。如果您正在寻找实际使用的内存，那么 PLAN_TABLE 还不够好。实际执行统计可以从[V$SQL_PLAN_STATISTICS_ALL](http://docs.oracle.com/cd/E11882_01/server.112/e25513/dynviews_3057.htm)获得。这些是用函数[dbms_xplan.display_cursor](http://rwijk.blogspot.com/2008/03/dbmsxplandisplaycursor.html)很好地打印出来的。它在 MEMSTATS 部分向您显示“Used-Mem”。或者您可能想要检查动态视图[V$SESSTAT](http://docs.oracle.com/cd/E11882_01/server.112/e25513/dynviews_3028.htm#i1416128)。

问候，
罗布。

# eclipse - 如何在eclipse中使用WEKA源码？

> ID：14924991
> 
> 赞同：0
> 
> 时间：2013-02-17T19:15:45.767
> 
> 标签：eclipse, weka

我开始为 WEKA 编码，在我的项目中包含 weka.jar。但是现在我需要更改 WEKA 源代码中的一些部分。这意味着我想我必须在我的 Eclipse 环境中将源代码添加为新项目。

我用 WEKA SVN 做到了这一点，它作为新项目出现了。但现在我不知道如何处理它。如何将 WEKA.jar 替换为源代码，以便一切正常，但我可以进行一些更改？

非常感谢您！

2081105

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-06T12:56:19.463

我在netbeans中试过，很简单，只需4步

1.  下载 Weka 源代码 svn checkout [https://svn.cms.waikato.ac.nz/svn/weka/tags/dev-3-5-8/weka](https://svn.cms.waikato.ac.nz/svn/weka/tags/dev-3-5-8/weka)
2.  您可以直接在 Netbeans 中打开该项目
3.  构建项目
4.  运行 -> weka.gui.GUIChooser

# javascript - 最小化点击（）

> ID：14924992
> 
> 赞同：0
> 
> 时间：2013-02-17T19:15:47.023
> 
> 标签：javascript, jquery, html

```
$(this).click(function() {
    clicked($(this));
}); 
```

如何将此代码最小化为一行？

试过这个 - 不起作用：

```
$(this).click(clicked(this)); 
```

它将像这样使用：

```
function clicked(element) {
    element.css('...');
        // some other code
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T19:16:36.303

您可以`clicked`直接传递函数：

```
$(this).click(clicked); 
```

但是你需要改变你的`clicked`函数来包装元素。

```
function clicked() {
    $(this).do("whatever")
} 
```

* * *

*关于您更新的问题*，您可以根据需要`clicked`返回一个函数。

```
function clicked(element) {
    return function() {
        element.css('...');
        // some other code
    }
} 
```

那么你可以这样做：

```
$(this).click(clicked($(this))); 
```

但我会亲自更改您的`clicked`功能，使其像第一个版本一样工作。

# imageview - ImageView 不调整图像大小

> ID：14924995
> 
> 赞同：0
> 
> 时间：2013-02-17T19:16:14.850
> 
> 标签：imageview, javafx-2

我想使用 ImageView 来调整图像的大小，但是图像没有被调整大小：

```
ImageView imageView = new ImageView(image); 
imageView.setPreserveRatio(true);
imageView.setFitHeight(40);
System.out.println("imageview image width = " + imageView.getImage().getWidth());
System.out.println("imageview image height = " + imageView.getImage().getHeight()); 
```

输出是

```
imageview image width = 674.0
imageview image height = 888.0 
```

但是，宽度应该是 40。我的 ImageView 没有附加到任何场景，我也不想附加它，它只能用于调整图像大小。**有没有办法强制 ImageView 调整其图像的大小，即使 ImageView 没有附加到任何场景？**我使用 ImageView 调整大小的原因是，我想调整 RAM 中的图像大小，而不是从磁盘再次读取它，请参阅[此问题](https://stackoverflow.com/questions/14911077/resize-an-image-without-reading-it-again-from-disk/14917551)以获取更多详细信息。

感谢您的任何提示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-05T08:21:58.683

使用 ImageView 来调整大小似乎很 hacky。

更好的方法是将您的 Image 转换为 BufferedImage 并以旧方式调整大小。（JavaFx（尚未）提供调整内存图像大小的内部方法）

```
int width = 500; // desired size
int height = 400;
Image original = ...; // fx image

BufferedImage img = new BufferedImage(
        (int)original.getWidth(),
        (int)original.getHeight(),
        BufferedImage.TYPE_INT_ARGB);

SwingFXUtils.fromFXImage(original, img);
BufferedImage rescaled = Scalr.rescaleImage(img, width, heigth);  // the actual rescale

// convert back to FX image
WritableImage rescaledFX = new WritableImage(width, heigth);
SwingFXUtils.toFXImage(rescaled, rescaledFX); 
```

[Scalar](http://www.thebuzzmedia.com/software/imgscalr-java-image-scaling-library)是一个很好的库，用于在本机 java 中调整图像大小。显然，您可以使用其他/更简单的重新缩放方法，但图像质量不会那么好。

# c++ - 类的内存对齐

> ID：14924998
> 
> 赞同：7
> 
> 时间：2013-02-17T19:16:38.137
> 
> 标签：c++, memory-management, memory-alignment

我正在使用[Game Engine Architecture](http://www.amazon.de/Game-Engine-Architecture-Jeff-Lander/dp/1568814135)一书的帮助来开发内存管理器。目前我正在阅读有关内存对齐的信息（在书本和网络中），但我不确定对齐如何正确用于课程。我理解内存对齐的概念（例如，一个 4 字节的数据块应该位于以 0x0、0x4、0x8 或 0xC 结尾的地址）但是在`allocateAligned()`书中的 -function 处有一条评论说对齐必须是幂两个。如果我有一个有两个`int`和一个的类`char`，`sizeof(classs)`告诉我，这个类有 12 个字节大。那么，你会通过 32 作为对齐方式吗？会不会浪费内存，可能会导致碎片化？
我的问题是，如何正确对齐类，您能否更详细地解释一下（如果您想对齐更大的数据块，例如 121 个字节，会发生什么情况）以及对齐更大的块是否有意义（因为如果我被告知正确，处理器在一次调用中仅获取 8 个字节）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-17T19:20:57.303

类型的对齐永远不能大于类型的大小。这是因为在数组中，元素之间不能有填充。

然而，同样重要的是，类型的对齐可能*小于*类型的大小。

让我们考虑一下您的类类型：它有三个成员，两个 4 字节整数和一个 2 字节整数。我们假设一个 4 字节整数的对齐是 4 个字节，一个 2 字节整数的对齐是 2 个字节（这很常见）。在这种情况下，您的类类型的对齐方式只有 4 个字节。它可以位于任何 4 字节边界上，并且它的每个成员都将正确对齐。

这就是为什么你的类类型有两个字节的填充：12 可以被 4 整除，但 10 不能。如果你的类没有填充，它的大小只有 10 个字节，并且在一个元素数组中，一半的对象会错位。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T19:24:47.443

类型的对齐方式可以小于但不能大于其大小。在典型的 32 位实现中，您的

```
struct X {
    int a;
    int b;
    char c;
}; 
```

可能会有`sizeof(X) == 12`和`alignof(X) == 4`。显然你不能`X`每四个字节都有一个，因为它们会重叠，但是对齐意味着 , `0x1000`,`0x1004`和`0x1008`都是`0x100c`你*可能*开始一个`X`.

请注意，返回的类型大小`sizeof`始终是对齐的倍数，因为`sizeof`它指定数组元素之间的字节数，并且您不希望数组中的第一个条目对齐但第二个不对齐。