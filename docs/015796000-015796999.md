# StackOverflow 问答 15796000-15796999

# asp.net - VS2010用记事本打开网站？修补程序不好？

> ID：15796007
> 
> 赞同：0
> 
> 时间：2013-04-03T19:14:29.073
> 
> 标签：asp.net, visual-studio-2010, notepad++, hotfix

我在 Windows XP pro (sp3, x86) 上使用 VS2010，我刚刚安装了修补程序[kb2106584](http://archive.msdn.microsoft.com/KB2106584)。一些人报告了此修复程序，[例如此处](http://weblogs.asp.net/joelvarty/archive/2010/08/26/vs-2010-fix-for-hang-on-debugging-asp-net-3-5-apps.aspx)，作为解决我之前遇到的 Asp.Net Development Server 无法从 VS 正确打开的问题的修复程序。但是，我的问题是由 ESET NOD32 与 devenv.exe 的 http 流量混淆并导致我计算机中的所有端口都用完引起的。
无论如何，一旦完成，我就打开了我的网站备份，然后单击调试。Asp.Net 开发服务器弹出，这是修补程序应该实现的，然后记事本++打开我上次使用它的选项卡，而 IE 从未出现。“等等，什么？” 再试一次。然后再次。总是记事本++，从来没有IE，总是没有打开新文档，只是一些完全不相关的东西。
我在 SO 上看到了另一篇关于这件事的帖子，[here](https://stackoverflow.com/questions/12968836/visual-studio-is-opening-web-page-in-notepad)，但他的问题是文件/文件系统损坏。我的项目在源代码管理中，所以我尝试删除并恢复到昨天的修订。仍然打开记事本++，所以这不是我的问题。
我也尝试过重建，它什么也没做，并删除我的本地解决方案文件，它也什么也没做。我重新启动程序，然后重新启动计算机，均无济于事。
我开始相信这是把事情搞砸的修复程序，所以我尝试将系统还原到几天前。再一次，没有骰子；它仍然拉起记事本++而不是IE。

所以，问题变成了：
是否有一个或两个设置我可以尝试更改以使其再次打开正确的程序？
或者这是一个坏/不正确的修补程序，如果是，我该如何卸载它？它没有出现在“添加/删除程序”对话框中，我也没有在 VS 或安装程序中看到卸载它的选项。

提前致谢。

[编辑] 另请注意：Notepad++ 实际上并没有打开网站文件，它只是用我上次留下的任何东西打开。我不知道这是否有帮助，但我觉得细节将不胜感激。[/编辑]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:48:45.273

**已修复：**
卸载 n++，删除每个包含“notepad++”的注册表项和文件夹（除了一个，我从其字符串中删除了“;notepad++.exe”），然后重新安装 n++ 使 VS 停止打开 notepad++。
现在它再次打开默认的网络浏览器。

[编辑]
**对于任何其他**最终遇到这个特定和奇怪问题的人的注意事项：
尝试更改 VS 中的“浏览方式...”设置是值得的，方法是单击`Default.aspx`“Internet Explorer” . 我的清单包括 Notepad++ 作为可用的互联网浏览器。
如果它确实有效，这可能是比以前更好的解决方案。

我不知道这个设置会允许 Notepad++ 作为一个选项，直到我不得不在这一切之后再次将它设置回 IE，**这可能一直是问题所在。**显然，[VS 有时只是更改此设置](https://stackoverflow.com/questions/79954/visual-studio-opens-the-default-browser-instead-of-internet-explorer)。N++ 是如何或为什么作为 Internet 浏览器出现的完全超出了我的理解，但**我帮自己**从列表中“删除`NotePad++`”，你可能也希望这样做。
再说一次，当我可以改变一个神秘重置的设置时，我永远不会真正知道我是否彻底摧毁了所有东西，但至少可以为后代记录这个[教训？]。
[/编辑]

所有这些都发现它[是？]一个伪造的注册表项，[可能已经？]被修补程序修改了；notepad++ 和 Visual Studio 2010 Ultimate 都不会在卸载时清理或在重新安装时替换的注册表项 它
是什么？我不知道。就像我说的，这周我什至没有使用 n++，直到 VS 开始为我打开它，我所做的唯一更改就是安装该修补程序。

# node.js - 检索特定用户 ID 的信息

> ID：15796009
> 
> 赞同：-2
> 
> 时间：2013-04-03T19:14:38.387
> 
> 标签：node.js, facebook-graph-api

我的博士工作致力于社交网络分析。由于选择了工具 Node JS 和 Facebook API 现在我可以做的是使用附加信息检索用户的 ID，但要构建图形我需要用户朋友的列表。我有 Heroku 应用程序，但我对如何处理 te APP_ID 来获取构建数据所需的信息感到非常失望。我应该从哪里开始？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:25:18.563

有一些 Node.js 包可用于此目的。

[Facebook 的第三方 SDK](https://developers.facebook.com/tools/third-party-sdks/#nodejs)

如果您想编写相同的代码并在服务器（nodejs）和客户端（[FB JS-SDK](https://developers.facebook.com/docs/reference/javascript/)）之间共享，[这非常有用](https://github.com/Thuzi/facebook-node-sdk)

为了开始，您需要从用户那里获得 access_tokens，您需要从中获取信息。（通过 FB 应用程序）

```
FB.login(function(response) {
    if (response.authResponse) {
        var res = response.authResponse;
        FB.api('/me', function(response) {
          registerUser({ "fb_user_id": res.userID,      //register user in your database
                         "access_token": res.accessToken
                       }, function() {
              //handle here after registration
          });
        });
    } else {
        //handle reject in requested fields
    }
},  { scope: 'email,friends_about_me'});
//you can set scope field according to your use. 
```

有关可在范围字段中使用的扩展配置文件属性，请参阅[此内容。](https://developers.facebook.com/docs/reference/login/extended-profile-properties/)

获得 access_tokens 后，您可以将它们与上述第三方 SDK 之一一起使用。

例如使用[facebook-node-sdk](https://github.com/Thuzi/facebook-node-sdk)，

此 sdk 还为您提供请求 access_token api

```
var FB = require('fb');
var accessToken = FB.getAccessToken();
FB.setAccessToken(accessToken);

FB.api('idHere', { fields: ['id', 'name'] }, function (res) {     //you can access fields, access_token has access to
  if(!res || res.error) {
    console.log(!res ? 'error occurred' : res.error);
    return;
  }
  console.log(res.id);
  console.log(res.name);
}); 
```

您也可以`api function`直接与 access_token 一起使用。

```
FB.api('me', { fields: ['id', 'name'], access_token: 'access_token' }, function (res) {
    console.log(res);
} 
```

# hashmap - 使用 MyBatis 的骆驼路线提供 HashMaps 的 ArrayList 而不是 HashMap

> ID：15796015
> 
> 赞同：0
> 
> 时间：2013-04-03T19:15:05.393
> 
> 标签：hashmap, apache-camel, mybatis

在 Camel 路由中使用 MyBatis 从数据库表中选择键/值对我遇到了以下问题。

我的路线（作为内容丰富器的一部分）：

```
from("direct:resource")
   .setBody().constant(123)
   .to("mybatis:selectParameters?statementType=SelectList")
   ...; 
```

映射器：

```
<select id="selectParameters" parameterType="int" resultType="java.util.HashMap">
   SELECT 
      KEY
     ,VALUE
   FROM 
      TABLE
   WHERE 
      ID=#{id}
</select> 
```

一切正常，除了主体包含一个 HashMap 的 ArrayList（每个键/值对一个）而不是一个具有 nk/v 对的 HashMap。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T08:35:00.223

我假设您应该使用 statementType=SelectOne 因为您只在 SQL 查询中选择一行。因为您使用 SelectList，所以总是返回一个 List，即使 SQL 结果集中只有 1 行。

您可以在这里查看哪些语句类型是可能的：http: [//camel.apache.org/mybatis](http://camel.apache.org/mybatis)

当然，有关使用 MyBatis 等的更多详细信息，请参阅 MyBatis 文档。

# unit-testing - PHPunit 找不到测试

> ID：15796017
> 
> 赞同：7
> 
> 时间：2013-04-03T19:15:09.740
> 
> 标签：unit-testing, phpunit

PHPunit 无法找到我的测试，但它确实找到了我的 XML 配置。这是配置：

```
<?xml version="1.0" encoding="UTF-8"?>
<phpunit backupGlobals="false"
         backupStaticAttributes="false"
         bootstrap="vendor/autoload.php"
         colors="false"
         convertErrorsToExceptions="true"
         convertNoticesToExceptions="true"
         convertWarningsToExceptions="true"
         processIsolation="false"
         stopOnFailure="false"
         syntaxCheck="false"
>
    <testsuites>
        <testsuite name="Symply Test Suite">
            <directory>src/Symply/EventManager/Tests</directory>
        </testsuite>
    </testsuites>
</phpunit> 
```

这是目录结构：

![目录结构](https://i.stack.imgur.com/z8WcD.png) PHPunit 只是说，在运行脚本时，“没有执行测试”。我不知道为什么这不起作用，因为我在 XML 目录标签中指定了目录。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-04T06:57:29.350

您需要提供`suffix`属性：

```
<directory suffix="Test.php">...</directory> 
```

阅读[文档](https://phpunit.readthedocs.io/en/latest/configuration.html)以获取更多信息。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-03-07T02:37:50.270

我遇到了同样的问题。这篇文章有点老了，但我想我会分享我从阅读这个页面并更多地研究它得出的结论。

测试目录中的文件没有以 *Test.php 结尾，当我将它们更改为该格式时，它可以工作。太棒了，您可以通过在 xml 中定义后缀来定义自己的命名约定。

希望对任何可能阅读本文但仍然有点困惑的人有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T11:29:53.870

我想我想通了。仅通过命令行使用 PHPunit 时，一切正常。我猜Netbeans有一些问题。我需要在那里指定一个测试文件夹，所以我想我会选择 src 文件夹？感谢所有试图帮助我的人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-21T05:59:44.867

我正在尝试使用 PHPUnit 7.1.5 和 php7.1.16 在 PhpStorm 上运行我的测试，这给了我没有执行测试的消息。将我的 PHPUnit 更改为 4.8.36，它工作正常。

# sql - SQL Server 2008 R2 将服务器链接到另一个 SQL Server 200r R2 选择查询错误“数字”类型的数据无效

> ID：15796019
> 
> 赞同：1
> 
> 时间：2013-04-03T19:15:21.553
> 
> 标签：sql, sql-server-2008-r2, linked-server

我们在带有 SP1 的 SQL Server 2008 R2 链接服务器上收到以下错误消息，该服务器连接到另一个带有 SP2 的 SQL Server 2008 R2。错误消息是：“数字”类型的数据无效，并且间歇性发生。它工作了几个月并再次出现。去年 2012 年 7 月致电 Microsoft 支持，他们也无法解决此问题，我们在其神秘消失后关闭了此案。我们所做的只是在问题消失之前应用了一些 Windows 操作系统补丁。现在问题又出现了。错误消息来自一个简单的查询

```
select * 
from Sales_LinkedServer].sales.dbo.temp_sales_detail 
```

但是，此表包含超过 200 万条记录。尝试使用，但仍然失败

```
OPENQUERY: 
Select * 
From OPENQUERY ([Sales_LinkedServer],
'Select * 
From Sales.dbo.temp_sales_detamil'); 
```

此外，这发生在我们的生产服务器上，但类似的开发服务器完全没有问题。

# r - 如何创建标准大小的向量，以便将它们添加到数据框中？

> ID：15796021
> 
> 赞同：0
> 
> 时间：2013-04-03T19:15:26.037
> 
> 标签：r

我有一个带有一系列观察结果的向量（称为 t1）。我想通过从 t1 弹出第一个观察值来创建一组新向量（依此类推，以用于后续的近似副本）。但我想保持向量的长度相同，以便以后可以将它们添加到数据框中。

我能够使其工作如下：

```
t1 <- c(1, 2, 3)
t2 <- t1[-1]
t3 <- t2[-1]

t2[length(t2)+1] <- 0

t3[length(t3)+1] <- 0
t3[length(t3)+1] <- 0

t.all <- cbind(as.data.frame(t1), as.data.frame(t2), as.data.frame(t3))

t.all

  t1 t2 t3
1  1  2  3
2  2  3  0
3  3  0  0 
```

但这很笨拙，如果我想创建大量列，这将是乏味的。如何使向量保持相同的长度（或以另一种方式解决此问题）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T19:28:52.713

这是您尝试执行的操作的循环版本，uding`do.call`和`lapply`：

```
cbind(t1,do.call(cbind,lapply(seq_along(t1)-1,
                     function(x)c(tail(t1,-x),rep(0,x)))))

    t1    
[1,]  1 2 3
[2,]  2 3 0
[3,]  3 0 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T20:07:40.957

这是使用向量索引的另一种方式：

```
t1 <- (2,5,3)
mm <- do.call(rbind, lapply(seq_along(t1), function(x) t1[x:length(t1)][1:length(t1)]))
#      [,1] [,2] [,3]
# [1,]    2    5    3
# [2,]    5    3   NA
# [3,]    3   NA   NA

mm[is.na(mm)] <- 0
#      [,1] [,2] [,3]
# [1,]    2    5    3
# [2,]    5    3    0
# [3,]    3    0    0 
```

`apply`不使用家庭的另一种方法：

```
t1 <- c(2,5,4,6)
len <- length(t1)
matrix(t1[outer(1:len, 0:(len-1), '+')], ncol=len)

#      [,1] [,2] [,3] [,4]
# [1,]    2    5    4    6
# [2,]    5    4    6   NA
# [3,]    4    6   NA   NA
# [4,]    6   NA   NA   NA 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T20:21:47.737

```
> t.all <- sapply(0:2, function(x) c( t1[(x+1):3], rep(0,x) ) )
> t.all
     [,1] [,2] [,3]
[1,]    1    2    3
[2,]    2    3    0
[3,]    3    0    0 
```

如果您需要它成为一个 data.frame，那么首先将其构建为矩阵然后环绕`as.data.frame`最终结果会更有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T20:24:19.990

如何根据需要通过回收来逐行创建矩阵`t1`：

```
tmat <-cbind(t1,t1,t1,t1,....) # as many as needed 
```

然后只需使用矩阵三角形函数

```
newmat<- tmat * upper.tri(tmat,diag=TRUE) 
```

这与您的样本有偏差，但每行包含相同的信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T20:38:41.267

大多数其他答案都集中在创建最终的 data.frame 上。如果那是您的最终目标，那么它们提供了很好的方法。相反，这个答案只关注您如何取下第一个元素并保留长度的问题。为了使事情保持整洁，最好在一个函数中完成整个事情。

```
shift <- function(tx) {append(tx[-1],0)} 
```

然后你可以拥有

```
t1 <- c(1, 2, 3)
t2 <- shift(t1)
t3 <- shift(t2)

t.all <- data.frame(t1, t2, t3) 
```

这给了你同样的结果。

```
> t.all
  t1 t2 t3
1  1  2  3
2  2  3  0
3  3  0  0 
```

如果您想将此函数与循环构造结合起来创建 data.frame，最简单的方法是先通过矩阵。

```
t.all <- matrix(t1, nrow=length(t1), ncol=length(t1))
lapply(seq(length=length(t1))[-1], function(i) {
  t.all[,i] <<- shift(t.all[,(i-1)])
})
t.all <- as.data.frame(t.all) 
```

它给出了相同的data.frame，但列名略有不同

```
> t.all
  V1 V2 V3
1  1  2  3
2  2  3  0
3  3  0  0 
```

# python - 我坚持如何让我的用户输入他们的分数

> ID：15796022
> 
> 赞同：1
> 
> 时间：2013-04-03T19:15:28.497
> 
> 标签：python, database, python-2.7, pygame

基本上我已经在 pygame 中与用户创建了一个游戏。我使用 tkinter GUI 登录。

我已经编写了 SQL 部分，它会在我的数据库中输出我的分数.

有人可以帮忙吗？

代码：

```
def gameover():
    message = Msg("Game Over")
    message.update()
    player.kill()
    shot.kill()
    SQL = 'INSERT INTO TblScore(Score, StudentID) VALUES (' + str(score.value) + ', ' + str(8) + ')'
    Databaseconnector.INSERT(SQL)
    pygame.quit() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:42:52.237

你可以尝试这样的事情：

```
for event in pygame.event.get():
    if (event.type == pygame.KEYDOWN):
        if(event.key>= K_a && event.key <= K_z):
           s+=chr(event.key) 
```

这会将按下的键字符附加到您的字符串 s。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T02:38:08.740

（我还没有使用过guis，但这是我的猜测）

您可以保存他们的登录 ID 或说 x = input('输入您的登录 ID") 然后将 ID 从“x”中拉出

# vba - 使用后清除文本框

> ID：15796023
> 
> 赞同：0
> 
> 时间：2013-04-03T19:15:34.677
> 
> 标签：vba, ms-access

我有一个访问表单，我在其中输入数据以插入表中进行存储，我使用的代码是

```
Private Sub cmd_go_Click()
Dim insertstring As String

insertstring = "INSERT INTO KWTable (KW, Source, Code) VALUES('" & text_key.Value & "','" &         combo_source.Value & "','" & txt_code.Value & "');"

DoCmd.RunSQL insertstring

End Sub 
```

我想知道是否可以添加一个代码，以便在插入数据后，文本框和组合框会自动清除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:19:25.067

使用控件的属性。具体来说，尝试将`.Text`or`.Value`属性设置为`""`：

```
txtTextBox.Text = "" 
```

或者：

```
txtTextBox.Value = "" 
```

# php - 使用锚标记执行 SQL 查询

> ID：15796025
> 
> 赞同：-1
> 
> 时间：2013-04-03T19:15:39.493
> 
> 标签：php, html, sql, anchor

请帮助解决这个问题，

我的页面中有一个锚标记。

我想在用户单击锚标记时执行 SQL UPDATE 查询，如何在不重新加载页面的情况下执行此操作？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T19:23:19.287

如果这是你的锚：

```
<a href="#a" id="myAnchor">myAnchor</a> 
```

那么你可以使用jquery

```
<script type="text/javascript">
$('#myAnchor').click(function(){
$.ajax({
  url: "sendWhatEverYouWant.php",
data:{ varName: $(this).attr('id')}
);
});
</script> 
```

检查[http://api.jquery.com/jQuery.ajax/上的文档](http://api.jquery.com/jQuery.ajax/)

在 php 中，您使用以下命令将请求作为正常的 get 请求处理：

```
$_GET['varName'] 
```

# ruby-on-rails - Ruby：在最后一个数字字符上拆分字符串

> ID：15796027
> 
> 赞同：1
> 
> 时间：2013-04-03T19:15:42.750
> 
> 标签：ruby-on-rails, ruby

我的 Ruby 模型中有以下方法：

老的：

```
def to_s
    numbers = self.title.scan(/\d+/) if self.title.scan(/\d+/)
    return numbers.join.insert(0, "#{self.title.chop} ") if numbers

    "#{self.title.titlecase}"
  end 
```

新的：

```
def to_s
    numbers = self.title.scan(/\d+/)
    return numbers.join.insert(0, "#{self.title.sub(/\d+/, '')} ") if numbers.any?

    self.title.titlecase
  end 
```

A`title`可以是这样的：Level1 或 TrackStar

所以 TrackStar 应该成为 Track Star 而 Level1 应该是 Level 1，这就是为什么我开始扫描数字

我正在尝试像 Level 1 一样显示它。上面的作品，我只是想知道是否有更雄辩的解决方案

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T19:24:04.903

试试这个：

```
def to_s
  self.title.split(/(?=[0-9])/, 2).join(" ")
end 
```

第二个参数`split`是确保像“Level10”这样的标题不会被转换为“Level 1 0”。

**编辑**- 要在单词之间添加空格，我会使用`gsub`：

```
def to_s
  self.title.gsub(/([a-z])([A-Z])/, '\1 \2').split(/(?=\d)/, 2).join(" ")
end 
```

请务必在 . 的第二个参数中使用单引号`gsub`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T19:24:36.677

这个怎么样：

```
'Level1'.split(/(\d+)/).join(' ')
#=> "Level 1" 
```

# c++ - Makefile：将.o放在不同目录中的规则

> ID：15796030
> 
> 赞同：4
> 
> 时间：2013-04-03T19:15:54.037
> 
> 标签：c++, makefile, directory-structure

我有这个目录结构：

*   `./src`包含 . `cpp`以及`.h`我需要的所有文件
*   `./bin`应该包含`.o`暂时的和`.bin`永久的。此外，调用时应删除此文件夹`make clean`。
*   `./`包含`Makefile`

这是我目前的`Makefile`：

```
CFLAGS = -Wall -pedantic -g
CC = g++
EXEC = flrfile
SRC_DIR = src
BIN_DIR = bin
OBJ = FixedLengthFieldsRecord.o FixedLengthRecordFile.o main.o

all: flrfile

../$(BIN_DIR)/%.o: $(SRC_DIR)%.cpp $(SRC_DIR)%.h
    $(CC) $(CFLAGS) -c $(SRC_DIR)%.cpp -o $@

$(EXEC): $(OBJ)
    @mkdir -p bin
    $(CC) $(CFLAGS) $(BIN_DIR)/$(OBJ) -o $(BIN_DIR)/$(EXEC)

.PHONY : clean

clean:
    -rm -rf $(BIN_DIR) 
```

当我运行时`make`，我收到此错误：

```
make: *** No rule to make target `FixedLengthFieldsRecord.o', needed by `flrfile'.  Stop. 
```

为什么是这样？

PS：另外，我怎样才能使`OBJ = FixedLengthFieldsRecord.o FixedLengthRecordFile.o main.o`更通用？我不想写所有`.o`...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T19:20:52.727

这是因为你没有规则`something.o`，你有规则`../bin/something.o`。

如果您将`OBJ`声明更改为

```
OBJ = ../$(BIN_DIR)/FixedLengthFieldsRecord.o ../$(BIN_DIR)/FixedLengthRecordFile.o ../$(BIN_DIR)/main.o 
```

它应该工作。

您可以使用通配符从源目录获取对象

```
SOURCES := $(wildcard $(SRC_DIR)/*.cpp)
OBJ := $(patsubst $(SRC_DIR)/%,%,$(SOURCES))
OBJ := $(patsubst %.cpp,%.o,$(OBJ))
OBJ := $(addprefix ../$(BIN_DIR)/,$(OBJ)) 
```

这样做是首先它从 中获取 cpp 文件列表`$(SRC_DIR)`，删除路径，然后替换 o 的所有 cpp 后缀，最后在每个项目前添加 `../$(BIN_DIR)/'。

# ruby-on-rails - 我们是否需要在 ActiveRecord 模型中声明 class_name 和 foreign_key

> ID：15796031
> 
> 赞同：0
> 
> 时间：2013-04-03T19:15:57.167
> 
> 标签：ruby-on-rails, activerecord

我们需要在 rails3 应用程序的模型类中声明 class_name 和 foreign_key 吗？

```
class User < ActiveRecord:Base
    has_many :user_foos, :class_name => 'UserFoo', :foreign_key => :user_foo_id
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:28:11.867

不是，如果表名是`user_foos`并且类名是`UserFoo`。你可以简单地做：

```
has_many :user_foos 
```

`:class_name`修饰符用于类名实际上不是所使用的关联名的单数形式，或者命名空间导致类名解析不正确的情况。并且`:foreign_key`用于外键列名使用特殊格式的情况（这通常发生在引用同一个表中的一行时，或者几个列指向同一个父表的不同记录时）。

# bing - Bingbot 忽略 robots.txt 并尝试检索基于流量的 sspsitemap.xml

> ID：15796035
> 
> 赞同：0
> 
> 时间：2013-04-03T19:16:06.337
> 
> 标签：bing, robots.txt, bingbot

我有一个应用程序，其内容不应被公开索引。因此，我禁止访问所有爬虫。

机器人.txt：

```
# Robots shouldn't index a private app.
User-agent: *
Disallow: / 
```

但是，Bing 一直忽略这一点，并且每天都会请求一个`/trafficbasedsspsitemap.xml`文件，而我不需要创建该文件。

我也不需要每天收到此文件的 404 错误通知。我只想让 bingbot 消失，那么我需要做什么来禁止它发出请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:55:38.850

根据[这个答案](https://webmasters.stackexchange.com/questions/44257/bingbot-request-for-trafficbasedsspsitemap-xml-which-does-not-exist#answer-44339)，这是 Bingbot 检查由 IIS 和 Apache 的 Bing Sitemap 插件生成的 XML 站点地图。它显然不能被 robots.txt 阻止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T19:20:54.363

对于那些来自谷歌的人-

您可以通过 apache 用户代理检测/重写指令阻止机器人，这样您就可以完全阻止 bingbot。 [https://superuser.com/questions/330671/wildcard-blocking-of-bots-in-apache](https://superuser.com/questions/330671/wildcard-blocking-of-bots-in-apache)

[使用 htaccess 阻止特殊目录的所有机器人/爬虫/蜘蛛](https://stackoverflow.com/questions/10735766/block-all-bots-crawlers-spiders-for-a-special-directory-with-htaccess)

等等

# iphone - 我的 debian 服务器是否需要 ssl 证书才能与 APNS 通信？

> ID：15796036
> 
> 赞同：0
> 
> 时间：2013-04-03T19:16:07.930
> 
> 标签：iphone, ios, xcode, apple-push-notifications

我目前正在学习为 iOS 开发，并达到了我想玩一些推送通知的地步。我能够使用开发证书为 iPhone 注册推送通知，但现在我想在我的 debian 根服务器和 APNS 之间建立连接（第一次尝试我将连接到沙箱服务器）。一些教程向我展示了如何为我的 Mac 接收证书，但因此我需要为我的服务器提供一个有效的证书，还是我对这个假设有误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:27:44.917

据我所知，APNS 仅适用于苹果证书。简而言之：

*   在配置门户中创建应用程序 ID
*   为推送通知启用它
*   按照常规程序生成证书。
*   将生成的证书和私钥组合成一个 .pem 文件，我们就可以与苹果进行通信了。

本教程就是我所需要的： [http ://www.raywenderlich.com/3443/](http://www.raywenderlich.com/3443/)

# d3.js - pan d3.js 图

> ID：15796037
> 
> 赞同：0
> 
> 时间：2013-04-03T19:16:11.833
> 
> 标签：d3.js

我将如何修改以下使用 d3 的代码，以允许沿 x 轴拖动图形：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
<style type="text/css">
    .axis path, .axis line {
        fill: none;
        stroke: #ddd;
        stroke-width: 1px;
        shape-rendering: crispEdges;
    }
    .axis path
    {
        stroke: #999;
        stroke-width: 2px;
    }

</style>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript" src="http://d3js.org/d3.v2.min.js?2.9.4"></script>
</head>
<body>
    <div id="chart" class="background">
    </div>
</body>
    <script type="text/javascript">
        var data = [{
            Id: "1",
            Year: 1950,
            Relevance: 55,
            Category: "Cat1",
            SpecFreq: 5,
            GenFreq: 10
        }, {
            Id: "2",
            Year: 1975,
            Relevance: 25,
            Category: "Cat1",
            SpecFreq: 2,
            GenFreq: 31
        }, {
            Id: "1",
            Year: 1990,
            Relevance: 75,
            Category: "Cat1",
            SpecFreq: 8,
            GenFreq: 23
        }];

        $(function () {
            DrawFocus(data);
        });

        function DrawFocus(data) {
            //dimensions
            var margin = {
                top: 5.5,
                right: 19.5,
                bottom: 39.5,
                left: 39.5
            },
            width = 800 - margin.left - margin.right,
            height = 500 - margin.top - margin.bottom;

            //data domain extents
            var extentX = d3.extent(data, function (d) {
                return d.Year;
            });
            var extentY = d3.extent(data, function (d) {
                return d.Relevance;
            });

            //pad extents to provide some extra "blank" areas around edge of graph
            extentX[0] = extentX[0] - 5;
            extentX[1] = extentX[1] + 5;
            extentY[0] = extentY[0] - 5;
            extentY[1] = extentY[1] + 5;

            //scales
            var x = d3.scale.linear().domain(extentX).range([0, width]);
            var y = d3.scale.linear().domain(extentY).range([height, 0]);
            var radiusMax = .025 * width;
            var radius = d3.scale.sqrt().domain([0, 100]).range([0, radiusMax]);
            var color = d3.scale.ordinal().domain(["Cat1", "Cat2", "Cat3"]).range(["#b7b8a0", "#898a72", "#878772"]);

            //axes
            var xAxis = d3.svg.axis().scale(x).orient("bottom").tickFormat(d3.format("d")).tickSize(-height);
            var yAxis = d3.svg.axis().scale(y).orient("left").tickSize(-width);

            //create and size svg element, add zoom behavior
            var svg = d3.select("#chart").append("svg")
                .attr("width", width + margin.left + margin.right)
                .attr("height", height + margin.top + margin.bottom)
                .append("g")
                .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

            // Add the x-axis.
            svg.append("g")
                .attr("class", "x axis")
                .attr("transform", "translate(0," + height + ")")
                .call(xAxis)
                .selectAll("text")
                .style("font-size", "10px")
                .attr("dy", "1.5em");

            // Add the y-axis.
            svg.append("g")
                .attr("class", "y axis")
                .call(yAxis);

            // Add the x-axis label.
            svg.append("text")
                .attr("class", "x label")
                .attr("text-anchor", "end")
                .attr("x", width / 2)
                .attr("y", height + 35)
                .text(" Year");

            // Add the y-axis label.
            svg.append("text")
                .attr("class", "y label")
                .attr("text-anchor", "end")
                .attr("x", -1 * height / 2)
                .attr("y", -40)
                .attr("dy", ".75em")
                .attr("transform", "rotate(-90)")
                .text("Relevance");

            //plot genFreq
            var gGenerally = svg.append("g").selectAll("circle")
                .data(data)
                .enter().append("circle")
                .style("fill", function (d) {
                    return color(d.Category);
                })
                .attr("cx", function (d) {
                    return x(d.Year);
                })
                .attr("cy", function (d) {
                    return y(d.Relevance);
                })
                .attr("r", function (d) {
                    return radius(d.GenFreq);
                })
                .append("title")
                .text(function (d) {
                    return "(" + d.Year + ", " + d.Relevance + ", " + d.GenFreq + ", " + d.SpecFreq + ")";
                });

            //plot specFreq
            var gWithin = svg.append("g").selectAll("circle")
                .data(data)
                .enter().append("circle")
                .style("fill", function (d) {
                    return "#d6d487";
                })
                .attr("cx", function (d) {
                    return x(d.Year);
                })
                .attr("cy", function (d) {
                    return y(d.Relevance);
                })
                .attr("r", function (d) {
                    return radius(d.SpecFreq);
                })
                .append("title")
                .text(function (d) {
                    return "(" + d.Year + ", " + d.Relevance + ", " + d.GenFreq + ", " + d.SpecFreq + ")";
                });

            return svg;
        }
    </script>
</html> 
```

我在网上找到了几个[示例](http://static.cybercommons.org/js/d3/examples/zoom-pan/zoom-pan.html)，并意识到我需要使用缩放行为，但无法准确地弄清楚如何做到这一点。上面的[代码](http://jsfiddle.net/zhbbA/1/)有一个小提琴可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:25:01.717

应用如下所示的缩放功能，以及一些额外的代码来限制缩放域，我需要做的就是让它[工作](http://jsfiddle.net/W63xm/6/)。一旦图形被滚动到任何方向的远端，我似乎确实会出现一些奇怪的“粘性”。它有时会犹豫片刻，然后再往回滚动。我不确定是什么原因造成的。此外，这个例子有点不切实际，因为我正在修剪我的域以匹配我的数据中的最小值和最大值，然后添加一个 +- 5 缓冲区。所以，你真的只能滚动那个缓冲区域。但是，我认为如果您应用了更大的域，它的行为会相同。

```
<html>
<head>
<style type="text/css">
    .axis path, .axis line {
        fill: none;
        stroke: #ddd;
        stroke-width: 1px;
        shape-rendering: crispEdges;
    }
    .axis path
    {
        stroke: #999;
        stroke-width: 2px;
    }

</style>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript" src="http://d3js.org/d3.v2.min.js?2.9.4"></script>
</head>
<body>
    <div id="chart" class="background">
    </div>
</body>
    <script type="text/javascript">
        var data = [{
            Id: "1",
            Year: 1950,
            Relevance: 55,
            Category: "Cat1",
            SpecFreq: 5,
            GenFreq: 10
        }, {
            Id: "2",
            Year: 1975,
            Relevance: 25,
            Category: "Cat1",
            SpecFreq: 2,
            GenFreq: 31
        }, {
            Id: "1",
            Year: 1990,
            Relevance: 75,
            Category: "Cat1",
            SpecFreq: 8,
            GenFreq: 23
        }];

        $(function () {
            DrawFocus(data);
        });

        function DrawFocus(data) {
            //dimensions
            var margin = {
                top: 5.5,
                right: 19.5,
                bottom: 39.5,
                left: 39.5
            },
            width = 800 - margin.left - margin.right,
            height = 500 - margin.top - margin.bottom;

            //data domain extents
            var extentX = d3.extent(data, function (d) {
                return d.Year;
            });
            var extentY = d3.extent(data, function (d) {
                return d.Relevance;
            });

            //pad extents to provide some extra "blank" areas around edge of graph
            extentX[0] = extentX[0] - 5;
            extentX[1] = extentX[1] + 5;
            extentY[0] = extentY[0] - 5;
            extentY[1] = extentY[1] + 5;

            //scales
            var x = d3.scale.linear().domain(extentX).range([0, width]);
            var y = d3.scale.linear().domain(extentY).range([height, 0]);
            var radiusMax = .025 * width;
            var radius = d3.scale.sqrt().domain([0, 100]).range([0, radiusMax]);
            var color = d3.scale.ordinal().domain(["Cat1", "Cat2", "Cat3"]).range(["#b7b8a0", "#898a72", "#878772"]);

            //axes
            var xAxis = d3.svg.axis().scale(x).orient("bottom").tickFormat(d3.format("d")).tickSize(-height).ticks(10);
            var yAxis = d3.svg.axis().scale(y).orient("left").tickSize(-width).ticks(10);

            //create and size svg element, add zoom behavior
            var svg = d3.select("#chart").append("svg")
                .attr("width", width + margin.left + margin.right)
                .attr("height", height + margin.top + margin.bottom)
                .call(d3.behavior.zoom().x(x).y(y).scaleExtent([1, 8]).on("zoom", zoom))
                .append("g")
                .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

            // Add the x-axis.
            svg.append("g")
                .attr("class", "x axis")
                .attr("transform", "translate(0," + height + ")")
                .call(xAxis)
                .selectAll("text")
                .style("font-size", "10px")
                .attr("dy", "1.5em");

            // Add the y-axis.
            svg.append("g")
                .attr("class", "y axis")
                .call(yAxis)
                .selectAll("text")
                .style("font-size", "10px")
                .attr("dx", "-1em");

            // Add the x-axis label.
            svg.append("text")
                .attr("class", "x label")
                .attr("text-anchor", "end")
                .attr("x", width / 2)
                .attr("y", height + 35)
                .text(" Year");

            // Add the y-axis label.
            svg.append("text")
                .attr("class", "y label")
                .attr("text-anchor", "end")
                .attr("x", -1 * height / 2)
                .attr("y", -40)
                .attr("dy", ".75em")
                .attr("transform", "rotate(-90)")
                .text("Relevance");

            //plot genFreq
            var gGenerally = svg.append("g").selectAll("circle")
                .data(data)
                .enter().append("circle")
                .style("fill", function (d) {
                    return color(d.Category);
                })
                .attr("cx", function (d) {
                    return x(d.Year);
                })
                .attr("cy", function (d) {
                    return y(d.Relevance);
                })
                .attr("r", function (d) {
                    return radius(d.GenFreq);
                })
                .append("title")
                .text(function (d) {
                    return "(" + d.Year + ", " + d.Relevance + ", " + d.GenFreq + ", " + d.SpecFreq + ")";
                });

            //plot specFreq
            var gWithin = svg.append("g").selectAll("circle")
                .data(data)
                .enter().append("circle")
                .style("fill", function (d) {
                    return "#d6d487";
                })
                .attr("cx", function (d) {
                    return x(d.Year);
                })
                .attr("cy", function (d) {
                    return y(d.Relevance);
                })
                .attr("r", function (d) {
                    return radius(d.SpecFreq);
                })
                .append("title")
                .text(function (d) {
                    return "(" + d.Year + ", " + d.Relevance + ", " + d.GenFreq + ", " + d.SpecFreq + ")";
                });

            function zoom() {
                if (x.domain()[0] >= extentX[0] -5 && x.domain()[1] <= extentX[1] +5 && y.domain()[0] >= extentY[0] -5 && y.domain()[1] <= extentY[1] +5) {
                    svg.select(".x.axis").call(xAxis).selectAll("text")
                    .style("font-size", "10px")
                    .attr("dy", "1.5em");

                    svg.select(".y.axis").call(yAxis).selectAll("text")
                    .style("font-size", "10px")
                    .attr("dx", "-1em");

                    svg.selectAll("circle").attr("transform", "translate(" + d3.event.translate + ")" + " scale(" + d3.event.scale + ")");
                }
            }

            return svg;
        }
    </script>
</html> 
```

# javascript - 动态设置 Fancybox2 宽度/高度

> ID：15796042
> 
> 赞同：0
> 
> 时间：2013-04-03T19:16:23.273
> 
> 标签：javascript, jquery, html, fancybox, fancybox-2

我正在尝试使用 fancybox v2 来显示其内容是动态生成的 div。我在计划的后期设置了 div 的大小。我已经尝试了来自 fancybox 文档的示例来显示大小固定的 div。它看起来像这样：

```
<a id="fancy" href="#showdiv">Show contents of div.</a>
<div id="showdiv">...</div>

<script>
$(document).ready(function() {
    $("#fancy").fancybox({autoSize:false, width: W, height: H, ...});
});
</script> 
```

我想要的是`W=$("#showdiv").width`和`H=$("#showdiv").height`。显然，在准备好文档时，我无法使用 H 和 W。我该怎么做呢？

编辑：这是内容 div 的 html：

```
<div id="hidediv" style="display:none">
    <div id="showdiv" style="display:block;position:relative">
        <canvas id="mycanvas" style="position:relative;display:block"></canvas>
    </div>
</div> 
```

在锚点“#fancy”的点击处理程序中，我这样做：

```
function onclick() {
    var jcanvas = $("#mycanvas").css('width', some_width).css('height', some_height);
    // draw on canvas
} 
```

“#fancy”是与 Fancybox 相关的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T02:50:36.673

假设这个函数处理你的响应`HTTP POST`

```
function onclick() {
    // set size of canvas
    var jcanvas = $("#mycanvas").css({
        "width": some_width, // variable from response ?
        "height": some_height
    });
    // draw on canvas
} 
```

`afterLoad`...然后使用fancybox回调调用该函数，例如

```
$("#fancy").fancybox({
    fitToView: false, // the box won't be scaled to fit the view port (optional)
    afterLoad: onclick()
}); 
```

**编辑**：

另一种选择是使用 jQuery 在同一个函数中同时处理画布和花式框，`.on()`所以如果你有

```
<a id="fancy" href="#showdiv">Show contents of div</a> 
```

使用这个脚本：

```
$("#fancy").on("click", function () {
    // do HTTP POST
    // on success, get size form response
    var some_width = 300,
        some_height = 180;
    // set canvas size
    var jcanvas = $("#mycanvas").css({
        // variables from response
        "width": some_width, 
        "height": some_height
    });
    // draw on canvas
    //
    // then open fancybox ($(this) = #showdiv )
    $.fancybox($(this),{
        // API options etc
        fitToView: false
    });
}); 
```

在这种情况下，您不需要任何回调。

**注意**：`.on()`需要 jQuery v1.7+

有关文档目的，请参阅**[JSFIDDLE](http://jsfiddle.net/6XNV2/)**。

# php - 将数组提取到列表中

> ID：15796044
> 
> 赞同：0
> 
> 时间：2013-04-03T19:16:32.103
> 
> 标签：php, mysql, arrays, list, foreach

我正在尝试使用 foreach as list 命令提取每个子数组。

更新：

我现在正在尝试这个：

```
 foreach ($data as $element) {
  list($id,$ownerid,$owner,$coords,$name,$score,$citytype,$location) = $element;
  findcontinent($coords);
  echo $coords;
  echo '<br>';
  echo $cont;
  echo '<br>';} 
```

我调用的函数如下。例如，当我从数组 $data[0]['coords'] 静态调用特定坐标时，我知道此函数有效。

```
function findcontinent($coords){
            $tc2 = explode(":",$coords);
            $tcx = (int)(trim($tc2[0],"'\'"));
            $tcy = (int)(trim($tc2[1],"'"));
            $tcx2 = round((($tcx)*(600/383)),0);
            $tcy2 = round((($tcy)*(600/360)),0);

            if($tcx2 < 100) // checking for continents ending with 0
            {
            $tcx3 = '0';
            $xtrans = substr((string)$tcx3,0,1);
            }
            else
            {
            $xtrans = substr((string)$tcx2,0,1);
            }           

            if($tcy2 < 100) // checking for continents starting with 0
            {
            $tcy3 = '0';
            $ytrans = substr((string)$tcy3,0,1);
            }
            else
            {
            $ytrans = substr((string)$tcy2,0,1);
            }
    $cont = C.$ytrans.$xtrans;
    return($cont);

} 
```

然后我想运行一组 SQL 命令来更新数据库。我有正确的语法吗？

我的数组如下 - 示例。实际的数据集可能是动态的，许多单独的子数组？

```
[data] => Array
    (
        [0] => Array
            (
                [id] => 16515340
                [owner_id] => 3475
                [owner] => Player1
                [coords] => '268:252
                [name] => AC2013
                [score] => 11863
                [city_type] => castle
                [location] => land
            )

        [1] => Array
            (
                [id] => 16515335
                [owner_id] => 3475
                [owner] => Player1
                [coords] => '263:252
                [name] => AC2013
                [score] => 7
                [city_type] => castle
                [location] => water
            )

        [2] => Array
            (
                [id] => 17891610
                [owner_id] => 3523
                [owner] => Player2
                [coords] => '282:273
                [name] => City of Repoman9900
                [score] => 1978
                [city_type] => castle
                [location] => water
            )

        [3] => Array
            (
                [id] => 10616856
                [owner_id] => 73
                [owner] => Player2
                [coords] => '024:162
                [name] => 1killer
                [score] => 1308
                [city_type] => castle
                [location] => water
            )

        [4] => Array
            (
                [id] => 10813465
                [owner_id] => 2862
                [owner] => Player3
                [coords] => '025:165
                [name] => City of vuvuzea991
                [score] => 1091
                [city_type] => castle
                [location] => land
            )

        [5] => Array
            (
                [id] => 17367317
                [owner_id] => 84
                [owner] => Player4
                [coords] => '277:265
                [name] => Dreadland
                [score] => 776
                [city_type] => castle
                [location] => water
            )

        [6] => Array
            (
                [id] => 2162850
                [owner_id] => 2989
                [owner] => Player5
                [coords] => '162:033
                [name] => City of Dinoeyez
                [score] => 157
                [city_type] => castle
                [location] => water
            )

        [7] => Array
            (
                [id] => 2818192
                [owner_id] => 556
                [owner] => Player6
                [coords] => '144:043
                [name] => City of wildfire123
                [score] => 7
                [city_type] => castle
                [location] => water
            )

    ) 
```

由于看起来关联数组无法分解为列表，这本来不错，因此尝试运行此循环以提取甚至 1 条记录，但失败了

$计数 = 0; // 循环遍历数组

```
foreach($data as $data=>$inner_array){
    $c2 = (string)$count;   
    $id = $data[$count]['id'];
    echo $id;
    echo '<br>';
    echo $count;
    echo '<br>';    
 //then increment counter and move to next
     $count = $count+1;
    } 
```

计数器返回得很好，但我似乎无法解析子数组中的任何变量。回显输出如下：

`<br>0<br><br>1<br><br>2<br><br>3<br><br>4<br><br>5<br>`

我现在使用的数据集是 6 个子数组，所以我知道它正确地通过了循环。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T19:23:56.517

```
foreach ($data as list($id,$ownerid,$owner,$coords,$name,$score,$citytype,$location)) {
  // commands
} 
```

由于这种使用`list`只允许在 PHP 的 beta 版本中使用，因此更便携的语法需要两个步骤：

```
foreach ($data as $element) {
  list($id,$ownerid,$owner,$coords,$name,$score,$citytype,$location) = $element;
  // commands
} 
```

`foreach ($data=>inner_array as xxx)`无效。var=>var 语法仅在 之后有效`as`，在其之前无效。我不确定你为什么嵌套了 for 循环——你只需要迭代一个数组。

当子数组是关联数组时，我会非常谨慎地使用这种语法。列表分配基于子数组中元素的顺序，它不会尝试将变量名与键匹配。`owner_id`因此，如果您有一个元素位于元素之前的子数组`id`，则列表分配将设置`$id`为所有者 ID 和`$owner_id`ID。关联数组中元素的顺序是它们添加到数组中的顺序（除非您使用函数重新排列它们，例如`array_sort()`or `array_splice()`），所以除非您确定始终以相同的顺序添加键，否则可以是危险的。

更新：

像这样的列表分配不适用于关联数组。根据[PHP 列表文档](http://us3.php.net/manual/en/function.list.php)：

> **list()**仅适用于数字数组，并假定数字索引从 0 开始。

因此，您需要单独分配变量：

```
foreach ($data as $element) {
  $id = $element['id'];
  $owner_id = $element['owner_id'];
  // and so on
} 
```

# shell - shell中&&运算符的参数太多？

> ID：15796055
> 
> 赞同：0
> 
> 时间：2013-04-03T19:17:09.777
> 
> 标签：shell

```
if [ $(ps -ef | grep date) ] && [ $(ps -ef | grep time) ]
then
     echo "success"
else
    exit 1
fi 
```

给出 [: too many arguments 错误

出了什么问题？

* * *

来自评论：

> 有两个进程正在运行，如果执行我的自动化工具，我想检查这两个进程是否正在运行。为此我需要检查这两个进程是否正在运行，当你说`grep`包含在参数中时你是对的，它总是成功我只想检查两个进程是否正在运行而忽略了`grep`部分。我可以做一些事情，比如检查`$? == 0`，但我将如何为这两个进程做这件事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:39:42.623

Better do this, it will be lighter than multiple subshells `$( )` and pipes `|` (many `fork()`s in the background) :

```
if pidof &>/dev/null date && pidof &>/dev/null time; then
     echo "success"
else
    exit 1
fi 
```

No need the test commands :

```
[           # POSIX test 
```

or

```
[[          # bash enhanced test 
```

or

```
test        # word test 
```

we use *boolean logic* here.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T19:24:58.747

该`[`命令需要相当有限的值列表。您的命令的输出可能会生成大量数据，这些数据看起来`ps -ef`不像预期的那样。`[ value1 = value2 ]``[`

你可以试试：

```
if [ "$(ps -ef | grep date)" ] && [ "$(ps -ef | grep time)" ]
then echo "success"
else exit 1
fi 
```

如果至少有一个命令引用`date`和至少一个命令引用，这将报告成功`time`（并且由于`grep`命令包含该参数，它应该始终成功），但这可能不是您所追求的。使用双引号强制执行的单个参数，该`[`命令检查参数是否为空字符串（如果不是则成功）。

你真正想做什么？

# asp.net - SqlException 未被用户代码处理。（全文索引）

> ID：15796056
> 
> 赞同：0
> 
> 时间：2013-04-03T19:17:10.017
> 
> 标签：asp.net, vb.net, sql-server-2012, ssms, full-text-indexing

我正在使用 vs 2012 Professional 和 SQL-Server 2012 Express。

我试图运行 Admin.aspx，它有一个文本框来搜索数据库中的用户。

但是，每次我尝试搜索用户名时都会收到此错误

```
Cannot use a CONTAINS or FREETEXT predicate on table or indexed view 'users' because it is not full-text indexed. 
```

从我搜索的内容来看，需要启用全文索引，在我的情况下，它在 SQL Server Management Studio 中显示为灰色，在 Express 版中不可用 (???)。

我怎样才能克服这个问题？

**管理员.aspx**

```
Imports System.Data.SqlClient

Partial Class Admin
    Inherits System.Web.UI.Page

    Protected Sub btnSearchUser_Click(sender As Object, e As EventArgs) Handles btnSearchUser.Click

        Dim conn As New SqlConnection("Data Source=BRIAN-PC\SQLEXPRESS;Initial Catalog=master_db;Integrated Security=True")
        Dim searchComm As String = "SELECT username FROM users WHERE CONTAINS (username, @username)"

        Dim searchSQL As New SqlCommand

        conn.Open()

        searchSQL = New SqlCommand(searchComm, conn)
        searchSQL.Parameters.AddWithValue("@username", txtUserSearch.Text)

        Dim datareader As SqlDataReader = searchSQL.ExecuteReader()

        While datareader.Read

            lstUsers.Items.Add(datareader.Item("username"))

        End While

        datareader.Close()
        conn.Close()

    End Sub
End Class 
```

如您所见，用户在搜索框中输入用户名，并且对于包含来自文本框输入的单词的每条记录，都将作为项目添加到列表框中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:43:51.423

我不相信您需要全文搜索来检查用户名中的相等性。你认为你可以使用以下代替`CONTAINS`吗？

```
SELECT username FROM dbo.users WHERE username = @username; 
```

如果您绝对觉得需要全文搜索，那么：

1.  您需要具有高级服务的 Express Edition；我不认为 Visual Studio 附带该版本。您可以[在此处下载](http://www.microsoft.com/en-us/download/details.aspx?id=35579)( `SQLEXPRADV_x64_ENU.exe`)。
2.  [正如我在这个答案中指出的那样，](https://stackoverflow.com/a/10407725/61305)您需要使用 DDL 来创建全文目录和索引，因为 UI中的[错误似乎仍未解决](http://connect.microsoft.com/SQLServer/feedback/details/740181/management-studio-does-not-fully-manage-full-text-in-sql-server-express)。如果您下载 (1)，您将拥有一个 Management Studio Express 版本，该版本*可能*有修复但肯定会完全正常运行（SP1 版本是 SSMS Express 的第一个版本，它具有完整版本的所有功能，这可能解释为什么它是灰色的）。

例子：

```
CREATE FULLTEXT CATALOG my_catalog;
GO
CREATE FULLTEXT INDEX 
  ON dbo.users(username LANGUAGE 1033) 
  KEY INDEX uq_un ON my_catalog; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T19:42:49.203

全文索引至少需要 SQL Server Express With Advanced Services，标准 Express 版不具备全文索引功能。

然后您可以创建您的全文目录和索引，有关更多信息，请参阅以下链接：

[创建和管理全文索引](http://msdn.microsoft.com/en-us/library/cc879306.aspx)

# model-view-controller - 来自aspx方法的角度js http请求

> ID：15796057
> 
> 赞同：0
> 
> 时间：2013-04-03T19:17:10.573
> 
> 标签：model-view-controller, angularjs

我有一个页面locations.aspx，它在locations.aspx/getData 中有一个方法。当我使用代码时

```
$http.jsonp($scope.url)
    .success(function (data, status, headers, config) {
        alert(data);
}).error(function (data, status, headers, config) {
    $scope.status = status;
}); 
```

$scope.url 是 locations.aspx/getData 它加载 aspx 页面的 html 页面，但不访问该方法。我可以使用访问该方法

```
$.ajax({
    type: "POST",
    url: $scope.url,
    data: {},
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function (p) {
    var temp = $.parseJSON(p.d);
    $scope.allItems.push(temp);
},
    error: function () {
        alert('error');
    }
}); 
```

但数据永远不会在视图端更新或绑定。html上的一个例子是

```
 <select ng-model="selectLocation" id="selectLocation" ng-change="onLocationChange()">
                        <option></option>
                        <option ng-repeat="l in allItems">{{l.location}}</option>
</select> 
```

ajax 调用后 allItems 数组中确实有一个项目，但视图永远不会更新。

**我的 ajax 调用标头是**

请求网址：localhost:41796/locations.aspx/getData

请求方法：POST

状态码：200 OK

请求标头view source

接受：应用程序/json，文本/javascript，*/*；q=0.01

内容类型：应用程序/json；字符集=utf-8

Response Headersview source Cache-Control:private, max-age=0

连接：关闭

内容长度：270

内容类型：应用程序/json；字符集=utf-8

**我的 $http 标头是**

请求网址：localhost:41796/locations.aspx/getData

请求方法：GET

状态码：200 OK

请求标头视图已解析

获取 /locations.aspx/getData HTTP/1.1

主机：本地主机：41796

连接：保持活动

响应标头视图已解析

HTTP/1.1 200 正常

服务器：ASP.NET 开发服务器/10.0.0.0

缓存控制：私有

内容类型：文本/html；字符集=utf-8

内容长度：7177

连接：关闭

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:45:31.380

根据上面的讨论，您似乎正在使用 ASP.NET 并遇到了特定的问题。

ASP.NET 有时会非常挑剔它会解析什么和不会解析什么——尤其是当涉及到 MVC 时（你似乎没有在这里使用它，但也许 [WebMethod] （我假设你正在使用）有同样的问题）。

您可以以相同的方式`$.ajax`使用 Angular，而不是弄乱 jQuery ：`$http`

```
$http({
    method: 'POST',
    url: $scope.url,
    contentType: 'application/json; charset=utf-8'
})
.success(function (data, status, headers, config) {
    alert(data);
})
.error(function (data, status, headers, config) {
    $scope.status = status;
}); 
```

检查这个：[http://docs.angularjs.org/api/ng](http://docs.angularjs.org/api/ng) .$http#Parameters 了解更多信息。

# apache - Apache httpd.conf 使用别名限制对父级的访问

> ID：15796058
> 
> 赞同：0
> 
> 时间：2013-04-03T19:17:17.327
> 
> 标签：apache, httpd.conf

我有一个目录的别名

```
Alias /out /myData/all
<Directory /myData/all >
    Options Indexes MultiViews
     AllowOverride None
     Order deny,allow
     Allow from all
</Directory> 
```

myData/all 有许多不同项目的子目录。当有人通过直接链接访问 host/out/project01 时，我想限制他们单击**父目录**并查看 out 下的所有项目文件夹的能力。这可能与别名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:21:19.077

如果你在谈论类似的事情：

```
http://example.com/out/project01/..
                                 ^^--- "up a level" link 
```

那么实际请求的页面将是

```
http://example.com/out/ 
```

这是`/myData/all`目录的别名。由于该目录启用了索引（`Options Indexes`），他们可以浏览所有项目。

要么关闭索引，要么将别名下移一个级别：

```
Alias /out /myData/all/project01 
```

以便提升一个级别：

```
http://example.com/out/.. 
```

只是带你去

```
http://example.com/ 
```

# ios - iOS故事板，自动布局：IB munges宽度的UIDatePicker

> ID：15796062
> 
> 赞同：2
> 
> 时间：2013-04-03T19:17:47.030
> 
> 标签：ios, interface-builder, uidatepicker, autolayout

我正在使用 Xcode 4.6.1 为 iPhone 5、iOS 6 构建故事板。

我的一个场景，对于 UIViewController 子类，在根视图中包含一个 UIDatePicker。

UIDatePicker 的高度是固定的，IB 分配一个高度约束来匹配。令人惊讶的是，IB 允许选择器任意宽度。我在选择器上设置了以下水平约束：

*   超级视图的前导空间 = 0
*   宽度 = 320
*   未指定尾随空格

这应该足以保持一致和完整。

每当我关闭故事板（每当我执行版本控制操作时，Xcode 似乎都会这样做）并再次打开它，IB 将宽度设置为 480（超出超级视图的后缘 160 点）。约束仍然存在。

将约束更改为与父视图的前导和尾随距离为零，并保持宽度自由：

*   超级视图的前导空间 = 0
*   未指定宽度
*   超级视图的尾随空间 = 0

当我进行更改时，按预期更改了选择器的大小，但对错误没有影响。当情节提要重新打开时，宽度设置为 480，而我设置的约束（前导和尾随零点）仍然存在。

我已将约束设置为优先级 1000，但我只是在挣扎。

有谁知道如何让 IB 做我想做的事？当应用程序运行时一切都会好起来吗？

# java - 在编组 jaxb 时从根元素中删除 xmlns 属性

> ID：15796063
> 
> 赞同：6
> 
> 时间：2013-04-03T19:17:47.533
> 
> 标签：java, xml, jaxb, xml-namespaces, jaxb2-maven-plugin

这可能与[JAXB Marshaller 有关 - 如何抑制 xmlns 命名空间属性？](https://stackoverflow.com/questions/9829277/jaxb-marshaller-how-do-i-suppress-xmlns-namespace-attributes)

但我的问题有点不同。我进行常规的 java 编组，我的 xsd 没有命名空间。生成的 xml 也没有命名空间，除了根元素。

```
<?xml version="1.0" encoding="UTF-8"?><rootElement xmlns:ns2="unwanted namespace"> 
```

这`unwanted namespace`是来自同一个项目的另一个模式，我不确定为什么在这个阶段被选中。

我的 jaxb2-maven-plugin 生成的 rootElement.java 看起来像：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "", propOrder = {
"feed"
})
@XmlRootElement(name = "rootElement", namespace = "")
public class RootElement{
....
} 
```

在这一点上，我想要的只是`xmlns:ns2="unwanted namespace"`从生成的 xml 中删除属性，我正在努力解决它。

我查看了我的 package-info.java，它看起来像：

```
@javax.xml.bind.annotation.XmlSchema(namespace = "unwanted namespace", elementFormDefault =   javax.xml.bind.annotation.XmlNsForm.QUALIFIED)
package com.mypackage; 
```

我尝试添加他，但由于某种原因`-npa`它无法正常工作。`jaxb2-maven-plugin`我试过了，`NamespaceMapper`但这适用于更改前缀。我无法让它完全删除命名空间。这让我困扰了一天。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-06-29T10:09:03.067

我现在也有类似的要求。对我有用的唯一解决方案是实现 XMLStreamWriter 的包装器。

请在[此处](https://stackoverflow.com/a/38096137/1210904)查看我的答案。我还描述了我尝试过的其他解决方案。

使用上面链接中的代码进行序列化如下所示：

```
XMLOutputFactory factory = XMLOutputFactory.newFactory();

StringWriter writer = new StringWriter(XML_BUFFER_INITIAL_SIZE);
XMLStreamWriter xmlWriter = null;

try {
  xmlWriter = factory.createXMLStreamWriter(writer);
  JAXBContext context = JAXBContext.newInstance(MyJAXBGeneratedClass.class);
  Marshaller marshaller = context.createMarshaller();
  marshaller.marshal(reportContainer, new NamespaceStrippingXMLStreamWriter(xmlWriter));
  xmlWriter.flush();
}
finally {
  if (xmlWriter != null)
    xmlWriter.close();
}

return writer.toString(); 
```

# c# - 如何与不同的 TCP 客户端进行通信，而不仅仅是与第一个连接的客户端通信？

> ID：15796066
> 
> 赞同：0
> 
> 时间：2013-04-03T19:17:53.120
> 
> 标签：c#

我有一个异步 TCP 项目，我可以处理多个连接。

但是，例如：如果我有两个客户端连接，我该如何与他们通信？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T21:40:53.333

好吧，显然您需要某种容器来保存当前连接以及一个内部标识符（键），以便您找到要发送内容的连接。

如果您对此有疑问，请发布更具体的问题。

# c# - 在 C# 中使用 SMTP 发送电子邮件

> ID：15796067
> 
> 赞同：1
> 
> 时间：2013-04-03T19:17:54.747
> 
> 标签：c#, smtp

**它只是说“发送邮件失败”。不确定代码或 SMTP 服务器的问题？请帮助这是我的代码，变量是通过表格发送的，我已经确认所有变量都可以

SMTP 设置在 Web.config 中**

```
<?xml version="1.0"?>
<configuration>
  <system.net>
    <mailSettings>
      <smtp from="newsletter@abc.com">
        <network host="mail.abc.com" port="25" userName="newsletter@abc.com" password="abc#!@"/>
      </smtp>
    </mailSettings>
  </system.net>
    <system.web>

    </system.web>
</configuration> 
```

**C# 中的代码**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Net.Mail;

public partial class SendMail : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }
    protected void cmdSend_Click(object sender, EventArgs e)
    {
        MailMessage mMailMessage = new MailMessage();

        // address of sender
        mMailMessage.From = new MailAddress(txtFrom.Text);
        // recipient address
        mMailMessage.To.Add(new MailAddress(txtTo.Text));
        // Check if the bcc value is empty
        if (txtBcc.Text != string.Empty)
        {
            // Set the Bcc address of the mail message
            mMailMessage.Bcc.Add(new MailAddress(txtBcc.Text));
        }

        // Check if the cc value is empty
        if (txtCc.Text != string.Empty)
        {
            // Set the CC address of the mail message
            mMailMessage.CC.Add(new MailAddress(txtCc.Text));
        }     // Set the subject of the mail message
        mMailMessage.Subject = txtSubject.Text;
        // Set the body of the mail message
        mMailMessage.Body = txtBody.Text;
        // Set the format of the mail message body as HTML
        mMailMessage.IsBodyHtml = true;
        // Set the priority of the mail message to normal
        mMailMessage.Priority = MailPriority.Normal;

        // Instantiate a new instance of SmtpClient
        SmtpClient mSmtpClient = new SmtpClient();

        // Send the mail message
        try
        {
            mSmtpClient.Send(mMailMessage);
        }
        catch (Exception ex)
        {
            ;//log error
            lblMessage.Text = ex.Message;
        }
        finally
        {
            mMailMessage.Dispose();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:29:34.853

尝试使用 telnet 命令检查是否可以发送邮件。

开始-> 输入“telnet”：

```
open smtp.server.com 25
Helo smtp.server.com 
Mail from:yourAdress@server.com
Rcpt to:yourAdress@server.com

Data
Subject:The life
OMG
.
Quit 
```

如果 telnet 不存在，请通过添加/删除 Windows 功能添加它。请参阅：[http ://technet.microsoft.com/en-us/library/cc771275(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc771275%28v=ws.10%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T19:24:00.553

~~首先，我们没有指定 SMTP 服务器名称：~~

 ~~```
SmtpClient smtp = new SmtpClient(@"abc.company.com"); 
```~~ 

~~其次，在像上面的代码片段一样指定 SMTP 服务器名称后，~~确保防火墙或 Symantec（或类似的程序）没有阻止出站请求。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-03T19:40:15.820

在您的 try catch 块中，您将需要处理所有异常。继续循环直到`exception.innerexception`为空。更详细的错误信息将在邮件消息发送失败的内部异常中找到。外部异常和相应的消息将是通用的，没有那么有用。

一些示例可以在这里找到：

[检查内部异常的最佳方法？](https://stackoverflow.com/questions/1456563/best-way-to-check-for-inner-exception#)

这里有一些伪代码

```
 while (ex != null)
    {
        //LogThisException(ex);
        ex = ex.InnerException;
    } 
```

# jquery - 如何获取自定义元素值

> ID：15796080
> 
> 赞同：0
> 
> 时间：2013-04-03T19:18:45.370
> 
> 标签：jquery, html

这一定不止一次，但我不知道如何命名，我需要它的价值。如何？

```
<div data-type="value i need"></div> 
```

我到处都看到诸如数据类型（或其他自定义名称）之类的东西，但我无法命名它或在 jquery 中获取值。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:22:05.820

它被称为 HTML 5 数据属性。

给您的元素一个 id 或类，然后调用`$("#id").data("type")`or`$("#id").attr("data-type")`来访问该值。

查看[JSFIDDLE](http://jsfiddle.net/tRNSz/)上的工作示例。

# mysql - 使用选择结果并进行比较

> ID：15796083
> 
> 赞同：1
> 
> 时间：2013-04-03T19:18:49.643
> 
> 标签：mysql, select

我的问题：

如何让 MySQL 在选择先前选择的值时使用而不重复

我的回答，取自[另一个帖子](https://stackoverflow.com/a/6081523/1709763)

像这样在 SELECT 上设置变量直接：

```
SELECT @q:= ##longQuery## AS a, (@q>2) AS b; 
```

我有这个 MySQL：

```
SELECT ##longQuery## AS a, (a>2) AS b; 
```

但我得到了：

```
ERROR 1054 (42S22): Unknown column 'a' in 'field list' 
```

我不想重复**##longQuery##**，因为它在实际代码中实际上相当冗长。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T19:23:34.723

两种可能的解决方案：

1.  使用子查询
2.  使用变量

**子查询解决方案**

```
select a, a>2 as b
from (select 1 as a) as q; 
```

**“可变”解决方案**

```
set @a = 1;
select @a as a, @a>2 as b; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T19:20:47.423

使用子查询将起作用

```
SELECT a, (a>2) AS b
FROM (
  SELECT 1 AS a
) f 
```

# jquery - 如何基于此脚本隐藏未选中的复选框？

> ID：15796085
> 
> 赞同：1
> 
> 时间：2013-04-03T19:18:54.360
> 
> 标签：jquery

**HTML**

```
<div>Group 1
    <br>
    <label>
        <input type="checkbox" name="testing" value="B" checked="checked">A</label>
    <br />
    <label>
        <input type="checkbox" name="testing" value="I">B</label>
    <br />
    <label>
        <input type="checkbox" name="testing" value="A">C</label>
    <br />
</div>
<div>Group 2
    <br>
    <label>
        <input type="checkbox" name="testing2" value="B">A</label>
    <br />
    <label>
        <input type="checkbox" name="testing2" value="I">B</label>
    <br />
    <label>
        <input type="checkbox" name="testing2" value="A">C</label>
    <br />
</div> 
```

**JS**

```
$("input:checkbox").change(function () {
    var checkname = $(this).attr("name");

    if (this.checked) {

        $("input:checkbox[name='" + checkname + "']").removeAttr("checked").parent().hide();
        this.checked = true;
        $(this).parent().show();
    } else {
        $("input:checkbox[name='" + checkname + "']").parent().show();
    }
}); 
```

选中复选框时的隐藏/显示脚本可以完美运行，但是如果复选框在窗口加载时初始检查，如何使其运行上述脚本以便隐藏其他未选中的脚本？

[http://jsfiddle.net/warface/uvYzW/](http://jsfiddle.net/warface/uvYzW/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T19:21:56.827

您可以使用以下代码在已选中的复选框上触发更改事件并触发您的代码。

```
$("input:checkbox[checked]").trigger("change"); 
```

更新小提琴：http: [//jsfiddle.net/uvYzW/2/](http://jsfiddle.net/uvYzW/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T19:40:22.333

将此代码添加到末尾：

```
$(function(){
    $('input:checked').parent().siblings('label').hide();
    $('input:checked').parent().show();
}); 
```

# javascript - 下拉列表选项不起作用

> ID：15796086
> 
> 赞同：0
> 
> 时间：2013-04-03T19:18:55.393
> 
> 标签：javascript, paypal

请原谅这个新手用户！我正在尝试创建一个表格，用户可以在其中从音乐会节目列表中进行选择，然后为所选节目选择一个日期（从 2 个或 3 个相关日期中）。同一组下拉菜单必须再重复 3 次。这是一个部分季节订阅包，其中顾客可以选择 6 个节目中的 4 个以及每个节目的所需日期，所有这些信息都需要发布到 Paypal 以进行处理/购买。

请查看此测试页面：[http](http://early-music.org/Test_forTzN.html) ://early-music.org/Test_forTzN.html和此 jsfiddle.net 页面：[jsfiddle.net/saraswati/v6Pur/31](http://jsfiddle.net/saraswati/v6Pur/31/)

正如在网页上看到的那样，我的脚本适用于“Concert 1”，但不适用于 Concerts 2、3 和 4。在 jsfiddle 页面上，即使 Concert 1 也不起作用。

感谢您的帮助！

这是代码：

```
<script type="text/javascript">
        var progamsAndDates = {};
        progamsAndDates['TUDORS'] = ['Sept. 15', 'Sept. 16'];
        progamsAndDates['NOCHES'] = ['Oct. 20', 'Oct. 21'];
        progamsAndDates['CHRISTMAS'] = ['Dec. 14', 'Dec. 15', 'Dec. 16'];
        progamsAndDates['CELTIC'] = ['Jan. 26', 'Jan. 27'];
        progamsAndDates['UNREQUITED'] = ['Mar. 02', 'Mar. 03'];
        progamsAndDates['SECRET'] = ['Apr. 20', 'Apr. 21'];

        function ChangeDateDropList (id) { 

            var programDropList = document.getElementById ("program"+id);
            var dateDropList = document.getElementById ("date"+id);
            var selProgram = programDropList.options[programDropList.selectedIndex].value;

            // remove all dates
            while (dateDropList.options.length) {
                dateDropList.remove (0);
            }

            // add new dates
            var dates = progamsAndDates[selProgram];
            if (dates) {
                for (var i=0; i < dates.length; i++) {
                    var date = new Option (dates[i], i);
                    dateDropList.options.add (date);
                }
            }
        } 
  </script>

<tr id=row2>
<td><input type="hidden" name="os0" value="Concert 1"><body onload="ChangeDateDropList ();">   
    <select id="program" onchange="ChangeDateDropList();"> 
        <option value="" selected="selected">Select a Program</option> 
        <option value="TUDORS">The Tudors</option> 
        <option value="NOCHES">Noches, Noches</option> 
        <option value="CHRISTMAS">Christmas Eurotour</option> 
        <option value="CELTIC">Celtic Trinity</option>
        <option value="UNREQUITED">Unrequited Love</option>
        <option value="SECRET">Secret No More</option> 
    </select> 

    <select id="date"> 
    </select> 
</body>
</td>

<td><input type="hidden" name="os1" value="Concert 2"><body onload="ChangeDateDropList ();">   
    <select id="program1" onchange="ChangeDateDropList(1);"> 
        <option value="" selected="selected">Select a Program</option> 
        <option value="TUDORS">The Tudors</option> 
        <option value="NOCHES">Noches, Noches</option> 
        <option value="CHRISTMAS">Christmas Eurotour</option> 
        <option value="CELTIC">Celtic Trinity</option>
        <option value="UNREQUITED">Unrequited Love</option>
        <option value="SECRET">Secret No More</option> 
    </select> 

    <select id="date1"> 
    </select>
</body> 
</td>

<td><input type="hidden" name="os2" value="Concert 3"><body onload="ChangeDateDropList ();">   
    <select id="program2" onchange="ChangeDateDropList(2);"> 
        <option value="" selected="selected">Select a Program</option> 
        <option value="TUDORS">The Tudors</option> 
        <option value="NOCHES">Noches, Noches</option> 
        <option value="CHRISTMAS">Christmas Eurotour</option> 
        <option value="CELTIC">Celtic Trinity</option>
        <option value="UNREQUITED">Unrequited Love</option>
        <option value="SECRET">Secret No More</option> 
    </select> 

    <select id="date2"> 
    </select> 
</body>
</td>

<td><input type="hidden" name="os3" value="Concert 4"><body onload="ChangeDateDropList ();">   
    <select id="program3" onchange="ChangeDateDropList(3);"> 
        <option value="" selected="selected">Select a Program</option> 
        <option value="TUDORS">The Tudors</option> 
        <option value="NOCHES">Noches, Noches</option> 
        <option value="CHRISTMAS">Christmas Eurotour</option> 
        <option value="CELTIC">Celtic Trinity</option>
        <option value="UNREQUITED">Unrequited Love</option>
        <option value="SECRET">Secret No More</option> 
    </select> 

    <select id="date3"> 
    </select> 
</body>
</td>
</tr>
</table>
<br>
<center>
<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_cart_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
</form>
</center> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:56:36.633

你有几个问题：

1.  您有多个“程序”和“日期”元素。其中每一个都需要自己的唯一 ID，以便您知道您在 javascript 中指的是哪一个。

2.  您的 ChangeDateDropList 函数需要 1 个参数，而您没有传递任何参数。（注意：这不是不正确的语法。只是指出它，因为它似乎沿着正确的路线走，需要将参数传递给你的函数，但忘记在函数调用中实际传递参数）。

解决此问题的最简单方法是使用数字后缀重命名每个程序和日期元素，例如：“program1”、“date1”、“program2”、“date2”等。完成后，您可以将数字后缀传递给ChangeDateDropList 函数，然后使用它来正确引用元素：

```
function ChangeDateDropList (id) { 

        var programDropList = document.getElementById ("program"+id);
        var dateDropList = document.getElementById ("date"+id);
        ... 
```

不要忘记更新您的 onchange 调用：

```
<select id="program1" onchange="ChangeDateDropList(1);"> 
```

# php - Codeigniter 路由段/参数

> ID：15796088
> 
> 赞同：3
> 
> 时间：2013-04-03T19:18:55.567
> 
> 标签：php, codeigniter

```
$route['segment1/(:any)/(:any)'] = "myController/$1/$2"; 
```

在这种情况下，我将不得不链接 segment1/someMethod/someParam，但是如果我在 url 中没有参数怎么办，我需要这样写：

```
$route['segment1/(:any)'] = "myController/$1";
$route['segment1/(:any)/(:any)'] = "myController/$1/$2"; 
```

因此这两种情况现在都可以工作，所以问题是：我可以一次编写这两行代码吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T19:29:42.917

这：

```
$route['segment1/(:any)'] = "myController/$1";
$route['segment1/(:any)/(:any)'] = "myController/$1/$2"; 
```

是重复的，他们做同样的事情，只使用其中一个，我建议

```
$route['segment1/(:any)'] = "myController/$1"; 
```

希望清楚，使用它时，`"myController/$1"`您是说`myController/`应该路由以下所有内容，如果不`$1`存在参数，它也可以工作。

绝对只使用其中一个，不要害怕没有参数，它就像一个魅力;）

# node.js - 带有 socks5 代理截断响应的 Node.js 请求

> ID：15796094
> 
> 赞同：0
> 
> 时间：2013-04-03T19:19:22.253
> 
> 标签：node.js, http, proxy

好吧，我就是不明白。

假设我有一些 node.js 应用程序发出一些 get/post 请求。假设我在 localhost:9050 也有一些 socks5 代理服务器。

当我使用代理卷曲网址时，一切顺利。

但是当我尝试使用 http.request 获取它时，使用 node-socksified httpAgent 将请求传递给 socks 代理，响应在接收到第一块数据后立即发出“结束”事件。

我尝试了另一个具有相同结果的代理实现。我猜它以某种方式与处理套接字的 node.js 相关联，但我只是不明白我在做什么错。

有人有同样的问题吗？

我的代码看起来像这样：

```
var options = ...

options.agent = new SocksAgent({
    socks_host : "127.0.0.1",
    socks_port : 9050
});

var req = http.request(options, function(res) {

    res.on("data", function(chunk) {
        console.log(chunk);
    });

    res.on("end", function() {
        console.log("end");
    });
});

req.end(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-30T17:53:57.730

此问题是由于 socks 代理实现未在节点 0.10.x 中实现对新可读流接口的支持而引起的。

我编写的两个 socks v5 客户端实现 - [http-client](https://github.com/mattcg/socks5-http-client)和[https-client](https://github.com/mattcg/socks5-https-client)支持新旧接口，即它们适用于节点 0.10.x 和 0.8.x 或更低版本。

# c++ - 如何在`char * &`类型的非常量引用中硬编码c字符串参数

> ID：15796099
> 
> 赞同：0
> 
> 时间：2013-04-03T19:19:24.940
> 
> 标签：c++, pointers, arguments

为什么我不能编译这个程序？

```
void foo( const char* & str ) {
    str = "bar";
 }

 foo( "foo" ); //Compiler Error!! Why?

 const char* str = "foo";
 foo( str ); // No Erro 
```

我怎样才能对我的论点进行硬编码？喜欢 foo`( "MyString" )`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:22:13.343

A`const char* &`是对某处存在的某个指针的*引用。*

在这里，没有这样的指针*可以引用*。有一个字符*数组*，但**创建数组不会创建指针**。

```
foo( "foo" ); //Compiler Error!! Why? 
```

在这里，既有一个数组，也有`"foo"` **一个**指向该数组的指针。

```
const char* str = "foo";
foo( str ); // No Erro 
```

**从评论编辑：**

> 那为什么我写不出来`foo( &"foo" )`？？“foo”数组的地址？

试着这样想。

这与您不能编写`&&&&&&"foo"`来创建`char*******`.

A`char*******`将是一个指向内存的指针，那里有一个指向内存的指针......（你明白了）

C++ 不会*自动*为您在内存中创建所有这些东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T19:23:02.783

文字不能绑定到非常量左值引用。

同样的原因你不能这样做：

```
void foo(int& x) {}
// ..
foo(5); 
```

您可以使用右值引用：

```
 void foo( const char* && str ) {
    str = "bar";
 } 
```

不过我不推荐这个。

无论如何，修改指针是没有意义的，因为它是临时的，无论如何都会立即超出范围。你为什么做这个？您真的打算`const char* const&`将哪个绑定到两者吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T19:32:34.773

`"foo"`有类型`char const[4]`，没有`char const*`。数组不能绑定到对指针的引用，因为数组不是指针。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T19:20:29.587

"foo" 不是 const char* 类型

第二个声明是。

# gwt - 一种无需重新加载即可使用外部链接控制网页的方法

> ID：15796103
> 
> 赞同：0
> 
> 时间：2013-04-03T19:19:37.897
> 
> 标签：gwt, hyperlink, event-handling, href, reload

我们有一个基于 GWT 的胖客户端，例如 Web 应用程序。该应用程序相当大，并且有一些初始加载时间。

我们希望向应用程序的用户发送带有 href 链接的电子邮件消息，这些链接将在我们的应用程序中打开特定资产。好吧，这当然会导致单击链接再次打开应用程序，重新加载它，这是我们希望避免的。理想情况下，我们希望 href 链接以某种方式向我们的应用程序/网页发出信号，以便我们可以在应用程序中获取事件并对其做出反应。

有什么想法我们应该如何解决这个问题，或者这是否可能？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T22:33:37.530

您需要使用 GWT[超链接](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/Hyperlink.html)，它是用作“内部”超链接的小部件。也就是说，它是到正在运行的应用程序的另一个状态的链接。单击时，它将使用 History.newItem(java.lang.String) 创建一个新的历史框架，但不会重新加载页面。

如果您还没有使用它，这里有关于[GWT 历史机制的信息](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsHistory)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:09:28.863

似乎没有任何优雅的解决方案可以将事件从链接发送到现有浏览器窗口。到目前为止我遇到的几个解决方案：

a) 为应用程序实施 cookie 轮询解决方案，以轮询 cookie 是否存在或更改。该链接指向我们的服务器，该服务器仅设置 cookie，并通过这种方式将事件通知正在运行的应用程序。一些棘手的处理应该在从服务器返回的临时页面之间使用某种 2 路协议来实现，以处理应用程序尚未（尚未）运行的情况。

b) 与解决方案 a) 中的方法相同，但使用 html5 本地存储进行通信。这样就不需要轮询器，因为本地存储会在内容更改时触发事件。这将是一个可能的解决方案，但不适合我，因为我们必须支持没有本地存储支持的旧浏览器。

c) 用于将事件从服务器传递到客户端的长轮询 ajax 或 Web 套接字。一个解决方案，但似乎有点矫枉过正，可能至少需要一个现代浏览器才能使用网络套接字。

# javascript - Javascript/JQuery：在嵌套循环中初始化时多维数组失去作用域

> ID：15796110
> 
> 赞同：1
> 
> 时间：2013-04-03T19:19:47.640
> 
> 标签：javascript, jquery, arrays, scope, multidimensional-array

我一定遗漏了一些基本的东西，但是当在嵌套循环中调用全局多维数组变量时，我几乎对这个查询感到厌烦

代码：

```
//global variable

line2 = new Array();

$.fn.gtest = function(){

var values1 =  "a,s";

    lines = values1.split(',');
    //First Loop
    $.each(lines, function(lineNo, line) {
    //second Loop
             for( var datavalueNo = 0; datavalueNo < 5; datavalueNo++) {
                        line2[datavalueNo] = new Array();
                        line2[datavalueNo][lineNo] = new Array();
                        line2[datavalueNo][lineNo][0] = "Test";
                        line2[datavalueNo][lineNo][1] = "1";
             }

    });

}; 
```

在第一个循环结束时 line2 的值为：Test,1,Test,1,Test,1,Test,1,Test,1

在第二个循环结束时 line2 的值为： ,Test,1,,Test,1,,Test,1,,Test,1,,Test,1

for 循环被调用两次。

从第一次第二次循环（称为第一次的 for 循环）填充到 line2 的所有值都消失了，只剩下第二次第二次循环的值（称为第二次的相同 for 循环）。

我希望我能够使我的查询清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:54:59.390

您覆盖值的原因是`line2[datavalueNo] = new Array();`

您必须检查之前是否定义了此变量：

```
 //global variable
  var line2 = [];
  $.fn.gtest = function(){
    var values1 = "a,s",
        lines = values1.split(',');
    $.each(lines, function(lineNo, line) {
      for(var datavalueNo = 0; datavalueNo < 5; datavalueNo++) {
        if(line2[datavalueNo] === undefined) {
           line2[datavalueNo] = [];
        }
        line2[datavalueNo].push(["Test",1]);
      }
    });
  }; 
```

[http://jsfiddle.net/qgeqy/](http://jsfiddle.net/qgeqy/)

# c# - XElement 到具有相同键替代的字典

> ID：15796112
> 
> 赞同：1
> 
> 时间：2013-04-03T19:19:49.390
> 
> 标签：c#, xml

我有一个这样的xml

```
<parent id="001">
    <first>Brian</first>
    <last>Johnson</last>
    <gender>Male</gender>
</parent> 
```

我的代码目前这样处理它：

```
public Dictionary<string, string> GetParentInfo(string id, XDocument xml)
{
    var parent = xml.Descendants("parent")
                    .Where(p => p.Attribute("id").Value == id)
                    .FirstOrDefault();

    var parentInfo = parent.Elements()
                           .ToDictionary(x => x.Name.LocalName, x => X.Value);

    return parentInfo;
} 
```

我的问题是我的 xml 现在更改为：

```
<parent id="001">
    <first>Brian</first>
    <last>Johnson</last>
    <gender>Male</gender>
    <child>Jimmy</child>
    <child>Janet</child>
    <child>Carl</child>
</parent> 
```

字典不再合适，我想不出如何处理这种变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:43:21.650

我会像这样创建您的 Parent 类：

```
 private class Parent
    {
        public string Id { get; set; }
        public string FirstName { get; set; }
        public string LastName { get; set; }
        public string Gender { get; set; }
        public IEnumerable<string> Children { get; set; }
    } 
```

并有一个解析您的 xml 的工厂方法：

```
 private static Parent ParentInfo(string id, XDocument xml)
    {
        return xml.Descendants("parent")
                .Where(p => (string)p.Attribute("id") == id)
                .Select(x => new Parent {
                            FirstName = (string)x.Element("first"),
                            LastName = (string)x.Element("last"),
                            Gender = (string)x.Element("gender"),
                            Children = x.Elements("child").Select(y => (string)y)
                           })
                .FirstOrDefault();
    } 
```

烦人的 xml 模式来解析。

* * *

编辑：使用强制转换而不是对 .Value 的调用，因此它对空值更具弹性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T19:56:47.323

如何为 Parent 编写一个类，然后为它编写一个构造函数，它接受一个 XElement 并将其解析为类的属性。你仍然可以保留字典，但它会是`Dictionary<string, Parent>`

```
public class Parent
{
  public string ID {get;set;}
  public string First {get;set;}
  public string Last {get;set;}
  public string Gender {get;set;}
  public List<string> ChildrensNames {get;set;}

  public Parent(XElement parentXML) { // parse XML and fill properties
  }

} 
```

# javascript - 如何在点击时获取任何元素的 id

> ID：15796114
> 
> 赞同：0
> 
> 时间：2013-04-03T19:19:56.360
> 
> 标签：javascript, jquery

当单击页面上的*任何*元素告诉您有关该元素的标签名称（或 id 或任何其他信息）时，是否可以弹出警报？我基本上想为每个元素设置以下内容：

```
$('#wrapper').click(function() {
            alert($(this).prop('tagName'));
        }) 
```

除了我不想为页面上的每个元素都编写该代码，因为这将花费很长时间并且在各个方面都非常不切实际。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:22:41.220

使用选择器将您的侦听器绑定到全局对象上。

```
$(document).on('click', '*', function() {
  alert($(this).prop('tagName'));
}); 
```

应该管用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T19:22:56.770

```
document.body.addEventListener("click", function (e) {
       e = e || window.event;
       alert(e.toElement.getAttribute("id"));
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T19:23:01.120

这个怎么样

```
$(document).on('click', '*', function() {
    // Set clicked element's id to variable
    var elementName = $(this).attr('id');
    // Alert displaying id of clicked element
    alert(elementName);
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-03T08:21:17.323

这是一个纯javascript方法：

```
document.onclick = function(e) {
        e = e || window.event;
        var o = e.srcElement||e.target;
        alert(o.id);
    } 
```

# c# - 如何创建初始化程序来创建和迁移 mysql 数据库？

> ID：15796115
> 
> 赞同：14
> 
> 时间：2013-04-03T19:20:08.467
> 
> 标签：c#, mysql, migration, entity-framework-4.3, initializer

我已经学习如何使用 EF 大约一个星期了，并且一直被困在创建/更新我的数据库的问题上。如果数据库不存在，我可以创建一个初始化程序来创建数据库：

```
static class Program
{
    static void Main()
    {
        Database.SetInitializer<GumpDatabase>(new GumpDatabaseInitializer());
....

class GumpDatabaseInitializer : CreateDatabaseIfNotExists<GumpDatabase>
{
    public GumpDatabaseInitializer()
    {
    }
    protected override void Seed(GumpDatabase context)
    {
        context.Database.ExecuteSqlCommand("CREATE UNIQUE INDEX Name ON Stations (Name)");
        // Other stuff
    }
} 
```

或者我可以创建一个配置来迁移数据库

```
static class Program
{
    static void Main()
    {
        Database.SetInitializer<GumpDatabase>(new MigrateDatabaseToLatestVersion<GumpDatabase, Configuration>());
....

internal sealed class Configuration : DbMigrationsConfiguration<GumpDatabase>
{
    public Configuration()
    {
        AutomaticMigrationsEnabled = true;
        SetSqlGenerator("MySql.Data.MySqlClient", new MySql.Data.Entity.MySqlMigrationSqlGenerator()); 
    }

    protected override void Seed(GumpDatabase context)
    {

    } 
```

每个都可以正常工作，但我还没有想出一种方法来做到这两点。我可以通过更改 SetInitializer 调用在两个初始化程序之间切换，但是如果我想创建数据库（如果它不存在）并且如果它是迁移它我该怎么办？我需要创建自定义初始化程序吗？

谢谢

**根据 NSGaga 答案编辑**

```
class CreateOrMigrateDatabaseInitializer<TContext, TConfiguration> : CreateDatabaseIfNotExists<TContext>, IDatabaseInitializer<TContext>
    where TContext : DbContext
    where TConfiguration : DbMigrationsConfiguration<TContext>, new()
{
    private readonly DbMigrationsConfiguration _configuration;
    public CreateOrMigrateDatabaseInitializer()
    {
        _configuration = new TConfiguration();
    }
    public CreateOrMigrateDatabaseInitializer(string connection)
    {
        Contract.Requires(!string.IsNullOrEmpty(connection), "connection");

        _configuration = new TConfiguration
        {
            TargetDatabase = new DbConnectionInfo(connection)
        };
    }
    void IDatabaseInitializer<TContext>.InitializeDatabase(TContext context)
    {
        Contract.Requires(context != null, "context");

        if (context.Database.Exists())
        {
            if (!context.Database.CompatibleWithModel(throwIfNoMetadata: false))
            {
                var migrator = new DbMigrator(_configuration);
                migrator.Update();
            }
        }
        else
        {
            context.Database.Create();
            Seed(context);
            context.SaveChanges();
        }

    }
    protected virtual void Seed(TContext context)
    {
    }
} 
```

和

```
internal sealed class Configuration : DbMigrationsConfiguration<GumpDatabase>
{
    public Configuration()
    {
        AutomaticMigrationsEnabled = true;
        AutomaticMigrationDataLossAllowed = false;
        SetSqlGenerator("MySql.Data.MySqlClient", new MySql.Data.Entity.MySqlMigrationSqlGenerator()); 
    }

    protected override void Seed(GumpDatabase context)
    {
    }
} 
```

和

```
class GumpDatabaseInitializer : CreateOrMigrateDatabaseInitializer<GumpDatabase,Gump.Migrations.Configuration>
{
    public GumpDatabaseInitializer()
    {
    }
    protected override void Seed(GumpDatabase context)
    {
        context.Database.ExecuteSqlCommand("CREATE UNIQUE INDEX Name ON Stations (Name)");
        context.Database.ExecuteSqlCommand("CREATE UNIQUE INDEX Name ON Sequences (Name)");
        context.Database.ExecuteSqlCommand("CREATE UNIQUE INDEX StationPartNumber ON StationPartNumbers (StationId,PartNumberId)");
    }
} 
```

最后

```
static void Main()
{
    Database.SetInitializer<GumpDatabase>(new GumpDatabaseInitializer()); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-03T19:35:13.210

我认为您几乎就在那里-您可以查找源代码`MigrateDatabaseToLatestVersion`（它是开源的[http://entityframework.codeplex.com/）-](http://entityframework.codeplex.com/)它非常简单，它所做的几乎就是调用`DbMigrator`-尽我所能看。

您所要做的似乎就是将两者合并-使用一个或另一个作为基础，在其中添加其他功能-我认为应该可以正常工作。

```
class CreateAndMigrateDatabaseInitializer<TContext, TConfiguration> : CreateDatabaseIfNotExists<TContext>, IDatabaseInitializer<TContext> 
    where TContext : DbContext
    where TConfiguration : DbMigrationsConfiguration<TContext>, new()
{
    private readonly DbMigrationsConfiguration _configuration;
    public CreateAndMigrateDatabaseInitializer()
    {
        _configuration = new TConfiguration();
    }
    public CreateAndMigrateDatabaseInitializer(string connection)
    {
        Contract.Requires(!string.IsNullOrEmpty(connection), "connection");

        _configuration = new TConfiguration
        {
            TargetDatabase = new DbConnectionInfo(connection)
        };
    }
    void IDatabaseInitializer<TContext>.InitializeDatabase(TContext context)
    {
        Contract.Requires(context != null, "context");

        var migrator = new DbMigrator(_configuration);
        migrator.Update();

        // move on with the 'CreateDatabaseIfNotExists' for the 'Seed'
        base.InitializeDatabase(context);
    }
    protected override void Seed(TContext context)
    {
    }
} 
```

像这样称呼它...

```
Database.SetInitializer(new CreateAndMigrateDatabaseInitializer<GumpDatabase, YourNamespace.Migrations.Configuration>()); 
```

...实际上，像您之前所做的那样覆盖它（因为它是通用实现）`CreateDatabaseIfNotExists`（您只需为配置提供额外的“参数”） - 只需提供“种子”。

```
class GumpDatabaseInitializer : CreateAndMigrateDatabaseInitializer<GumpDatabase, YourNamespace.Migrations.Configuration>
{
    protected override void Seed(GumpDatabase context)
    {
        context.Database.ExecuteSqlCommand("CREATE UNIQUE INDEX Name ON Stations (Name)");
    }
} 
```

...并称它为

```
Database.SetInitializer(new GumpDatabaseInitializer()); 
```

**编辑：** 根据评论 - DbMigrator 不应运行两次。它总是检查（花费一些时间）并进行“空白”更新并继续前进。但是，以防万一您想在进入之前删除它并“检查”-这应该可以工作（更改上面的类似部分）...

```
var migrator = new DbMigrator(_configuration);
if (!context.Database.CompatibleWithModel(throwIfNoMetadata: false))
    if (migrator.GetPendingMigrations().Any())
        migrator.Update(); 
```

（这是一个冗余/双重检查 - 一个 if-s 应该就足够了。在那里休息一下 - 看看到底发生了什么，它不应该进入 - 一旦迁移 Db。正如我所提到的，当我测试它。

**编辑：**

将内部替换为`InitializeDatabase`...

```
var doseed = !context.Database.Exists();
// && new DatabaseTableChecker().AnyModelTableExists(context);
// check to see if to seed - we 'lack' the 'AnyModelTableExists' - could be copied/done otherwise if needed...

var migrator = new DbMigrator(_configuration);
// if (doseed || !context.Database.CompatibleWithModel(throwIfNoMetadata: false))
    if (migrator.GetPendingMigrations().Any())
        migrator.Update();

// move on with the 'CreateDatabaseIfNotExists' for the 'Seed'
base.InitializeDatabase(context);
if (doseed)
{
    Seed(context);
    context.SaveChanges();
} 
```

这可以解决（中途）不播种 - 如果迁移首先进行。必须首先进行迁移，否则您会遇到问题。

你仍然需要正确地做到这一点——如果不是你可能需要的全部，这就是要点——但如果有任何与 MySQL 等有关的问题，这里可能需要做更多的工作。

**注意：**如果您有数据库，仍然不会调用播种，但它是空的。问题是混合了两种不同的初始化程序。因此，您必须解决这个问题 - 通过实现 Create... 在内部执行的操作（我们无法调用的调用）或其他方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-10T06:51:12.867

其实应该是：

```
var migrator = new DbMigrator(_configuration);
if (!context.Database.CompatibleWithModel(false) || migrator.GetPendingMigrations().Any())
    migrator.Update(); 
```

因为如果我们有一个与我们的数据库模型无关的迁移，例如在我们的任何表中插入一行，则不会执行迁移。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-23T14:16:44.423

要同时执行（种子和迁移），您实际上只需要使用带有`MigrateDatabaseToLatestVersion`初始化程序的迁移。当您为您的上下文启用迁移时，将创建一个`Configuration`派生类`DbMigrationsConfiguration`，您可以覆盖该[`Seed`](https://msdn.microsoft.com/en-US/library/mt177875(v=vs.113).aspx)方法来为您的数据库播种。请注意，当此方法执行时，数据库可能已经包含种子数据，但[`AddOrUpdate`](https://msdn.microsoft.com/en-US/library/system.data.entity.migrations.dbsetmigrationsextensions.addorupdate(v=vs.113).aspx)扩展方法可以方便地帮助您在数据库中进行“更新插入”。

这与`Seed`其他一些数据库初始化程序的方法不同，其中数据库仅在最初创建时才播种。但是，当您使用迁移时，您可能希望在数据库更改时更改种子数据，并且使用`MigrateDatabaseToLatestVersion`使这成为可能。

要将播种与迁移结合起来，您必须在新项目中执行以下步骤：

1.  `DbContext`使用关联实体创建代码优先

2.  在包管理器控制台中执行命令`Enable-Migrations`

3.  在`Migrations`文件夹中，使用方法`Configuration`生成一个类`Seed`。您可以修改此方法来为您的数据库播种：

    ```
    protected override void Seed(MyContext context) {
      // Add two entities with name "Foo" and "Bar".
      context.MyEntities.AddOrUpdate(
        e => e.Name,
        new MyEntity { Name = "Foo" },
        new MyEntity { Name = "Bar" }
      );
    } 
    ```

4.  您需要创建一个派生自的数据库初始化程序[`MigrateDatabaseToLatestVersion`](https://msdn.microsoft.com/en-us/library/hh829293(v=vs.113).aspx)：

    ```
    class MyContextInitializer
      : MigrateDatabaseToLatestVersion<MyContext, Migrations.Configuration> { } 
    ```

    您还必须通过`Database.SetInitializer(new MyContextInitializer())`在应用程序启动时调用或在`App.config`文件中使用[`<databaseInitializer/>`](https://msdn.microsoft.com/en-us/data/jj556606.aspx#Initializers)元素来配置初始化程序。

5.  在生成的`Configuration`类的构造函数中，您可以启用自动迁移：

    ```
    public Configuration() {
      AutomaticMigrationsEnabled = true
    } 
    ```

    但是，在一个团队中，您可能不想这样做。在这种情况下，您将不得不创建一个初始迁移（除非它是在您创建时创建的`Enable-Migrations`）。在包管理器中执行命令`Add-Migration InitialCreate`。这将创建创建数据库所需的第一个迁移。

此时你有一个`DbContext`with migrations 和一个`Seed`方法。

总结一下：启用迁移，使用初始化程序并在启用迁移时生成的类中`MigrateDatabaseToLatestVersion`添加种子数据。`Configuration`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-09T09:01:56.810

虽然**MigrateDatabaseToLatestVersion**确实会创建不存在的数据库，甚至允许您为其播种，但如果您已经有一个基于**CreateDatabaseIfNotExists**的工作解决方案和/或不想通过测试种子数据的存在而使其复杂化，您可以只需通过从它继承而不是从**CreateDatabaseIfNotExists**继承来使用以下内容：

```
public class CreateOrMigrateDatabaseInitializer<TContext, TConfiguration> : CreateDatabaseIfNotExists<TContext>, IDatabaseInitializer<TContext>
        where TContext : DbContext
        where TConfiguration : DbMigrationsConfiguration<TContext>, new()
    {

        void IDatabaseInitializer<TContext>.InitializeDatabase(TContext context)
        {
            if (context.Database.Exists())
            {
                if (!context.Database.CompatibleWithModel(throwIfNoMetadata: false))
                {
                    var migrationInitializer = new MigrateDatabaseToLatestVersion<TContext, TConfiguration>(true);
                    migrationInitializer.InitializeDatabase(context);
                }
            }

            base.InitializeDatabase(context);
        }
    } 
```

这是基于以前的答案和 OP 自己的解决方案。这也应该适用于其他提供程序，但我只使用 SQL Server 进行了测试。

# python - Numpy 矩阵减法混淆

> ID：15796119
> 
> 赞同：10
> 
> 时间：2013-04-03T19:20:20.280
> 
> 标签：python, matrix, numpy

我对我不小心使用两个 numpy 矩阵（后来修复）执行的操作的结果有疑问。

假设我有一个列向量 A = [1,2,3] 和一个行向量 B = [1,1,1]。据我所知，没有正确的数学方法可以“减去”这两个向量，即这应该是一个未定义的操作。然而，当我这样做时，我回来了：

```
>>> matrix([[0, 1, 2],
            [0, 1, 2],
            [0, 1, 2]]) 
```

我以为这可能是某种广播操作，但这仍然让我有些困扰。numpy.matrix 对象不应该只包含数学上有效的矩阵运算吗？

任何帮助表示赞赏！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T20:41:33.740

A和B一起广播：

```
A = np.matrix([[1],[2],[3]])
#a 3x1 vector
#1
#2
#3

B = np.matrix([[1,1,1]])
#a 1x3 vector
#1 1 1

A-B
#a 3x3 vector
#0 0 0
#1 1 1
#2 2 2 
```

A 沿其大小 1 维（列）广播到

```
#1 1 1
#2 2 2
#3 3 3 
```

B 沿其大小 1 维（行）广播到

```
#1 1 1
#1 1 1
#1 1 1 
```

然后像往常一样为两个 3x3 矩阵计算 AB。

如果您想知道它为什么这样做而不是报告错误，那是因为 np.matrix 继承自 np.array。np.matrix 覆盖乘法，但不覆盖加法和减法，因此它使用基于 np.array 的操作，当维度允许时广播。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T19:30:59.617

我无法真正解释其中的原因，因为我经常使用`np.matrix`而不是`np.array`来防止这种事情。感谢@Jaime 在上面评论中的链接，很明显这`np.matrix`只是一个`np.ndarray`重新定义的中缀操作的子类，其中线性代数有适当的答案。在没有的地方，它依赖于`np.ndarray`with的规则`ndim = 2`。

似乎**加法遵循矩阵乘法规则**，其中哪些元素`A`与 中的哪些元素配对`B`：

```
In [1]: import numpy as np
In [2]: A = np.matrix([1,2,3]).T
In [3]: B = np.matrix([1,1,1])

In [4]: A
Out[4]: 
matrix([[1],
        [2],
        [3]])

In [5]: B
Out[5]: matrix([[1, 1, 1]])

In [6]: A+B
Out[6]: 
matrix([[2, 2, 2],
        [3, 3, 3],
        [4, 4, 4]])

In [7]: A*B
Out[7]: 
matrix([[1, 1, 1],
        [2, 2, 2],
        [3, 3, 3]]) 
```

这与您得到的行为相同`np.array`：

```
In [9]: a = np.arange(3)[...,None]

In [10]: b = np.arange(3)

In [11]: a
Out[11]: 
array([[0],
       [1],
       [2]])

In [12]: b
Out[12]: array([0, 1, 2])

In [13]: a+b
Out[13]: 
array([[0, 1, 2],
       [1, 2, 3],
       [2, 3, 4]]) 
```

# jenkins - Jenkins内置LDAP和Jenkins LDAP插件有什么区别

> ID：15796121
> 
> 赞同：1
> 
> 时间：2013-04-03T19:20:29.933
> 
> 标签：jenkins, ldap, hudson, jenkins-plugins, hudson-plugins

我对 Jenkins LDAP 插件和 jenkins 自带的 LDAP 感到困惑，而没有安装任何插件。

有人知道 Jenkins Built in LDAP 和 Jenkins LDAP Plugin 有什么区别吗

参考：[https ://wiki.jenkins-ci.org/display/JENKINS/Standard+Security+Setup](https://wiki.jenkins-ci.org/display/JENKINS/Standard+Security+Setup)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:33:26.280

我认为它们之间没有区别。LDAP 功能只是作为这个插件取出来的。

所以，我在我的服务器上使用了内置功能。工作正常。

# javascript - jQuery没有得到正确的东西

> ID：15796122
> 
> 赞同：0
> 
> 时间：2013-04-03T19:20:30.257
> 
> 标签：javascript, jquery, url

我目前在正确使用 jQuery 时遇到了一些麻烦。我正在尝试通过 jQuery.get 加载一些 csv 文件（即 google.com），并构建一些图表。不知何故，jQuery 无法正确加载文件。这是我的代码：

```
<html>
    <head>

    <!--Load the AJAX API-->

    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script type="text/javascript">

        $(document).keypress(function(e) {if(e.keyCode == 13) {updateData();};});

        drawchart("2013.04.02")

        function drawchart(date){

            jQuery.ajaxSetup({async:false});

            var sql = "http://www.andrewpatton.com/countrylist.csv";

            console.log(sql);

            var ans= jQuery.get(sql);

            ans.done(...draw...);

            ans.fail(console.log("fail"));
        }

    </script>
    </head>

<body>

<input id="date-input" style=margin-left:160px type="text"  id="date" name="date" />
<input type="button" value="submit" onClick="updateData();"/>
<p style=margin-left:160px> Date format: YYYY.MM.DD </p>

</body>
</html> 
```

我已经测试了 url，当我在浏览器中输入 url 时，它确实返回了一个 .csv 文件，所以我的猜测是 jQuery 有一些我没有得到的东西......

有人可以告诉我可能会发生什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:31:16.670

正如@adeneo 在评论中提到的，您在这里遇到了跨域请求问题。这是一个不受欢迎（但完全合理）的安全“功能”。要获得所需的结果，您需要使用服务器端语言（PHP/Ruby/Python 等）来获取 CSV 文件，必要时对其进行解析，然后在 jQuery 脚本中使用该数据。

解决这个问题的传统方法是对您的请求使用 JSONP，但是当您要加载`.csv`文件时，这种方法将不起作用。

更多信息[在这里](https://stackoverflow.com/a/3506238/1048479)

# java - 收到ajax响应后提交表单

> ID：15796127
> 
> 赞同：0
> 
> 时间：2013-04-03T19:20:47.413
> 
> 标签：java, javascript, ajax, jquery, websphere-commerce

我有一个场景，我需要使用 ajax 来调用控制器命令。命令成功执行后，它返回给我一个 ViewName。但是这个视图没有被调用（对应于这个视图的 JSP 页面没有被加载）。但我得到了 ajax 响应。

我想进行ajax调用。当我收到回复时，基于此我想提交表单。在这个加载的 JSP 页面上，我应该可以使用 ajax 响应。有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T01:46:05.910

一种选择：在表单中放置一个隐藏字段。一旦 ajax 调用返回，在您的成功函数中，您将响应数据放入隐藏字段。根据任何其他参数，您可以设置表单的操作。最后提交表格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:42:53.490

ajax调用的重点是将数据返回到现有页面，但如果json返回视图名称，只需将窗口位置设置为javascript中的视图名称。这会将浏览器转发到适当的位置。

# c - int main() 有什么问题？

> ID：15796134
> 
> 赞同：4
> 
> 时间：2013-04-03T19:20:56.793
> 
> 标签：c, prototype, main

我无法计算我在那里和这里看到 C 代码的次数，将*main*定义为

```
int main() { ... 
```

当我编译它时

```
gcc -ansi -pedantic -Wstrict-prototypes -Werror foo.c 
```

它出错了

```
foo.c:2: warning: function declaration isn't a prototype 
```

为什么会这样

```
int main(void) 
```

需要使错误消失吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T19:24:55.043

因为定义

```
int main() { /* ... */ } 
```

不包括原型；它没有指定参数的数量或类型。

这：

```
int main(void) { /* ... */ } 
```

确实包括一个原型。

使用空括号，您是说它`main`采用固定但未指定数量和类型的参数。使用`(void)`，您明确表示它*不需要任何*参数。

对于前者，调用如下：

```
main(42); 
```

不一定会被诊断出来。

这可以追溯到原型被引入语言之前的 ANSI 之前的日子，大多数函数都是用空括号定义的。那时，这样写是完全合法的：

```
int foo();

int foo(n)
int n;
{
    /* ... */
}

...

foo(42); 
```

当原型被添加到语言中时（从 C++ 中借用），有必要保留空括号的旧含义；添加了“新”（这是 1989 年）语法`(void)`，因此您可以明确地说函数不带参数。

（C++ 有不同的规则；它不允许老式的非原型函数，空括号意味着函数不带参数。C++ 允许`(void)`与 C 兼容的语法，但通常不推荐。）

最佳实践是使用`(void)`，因为它更明确。表单是否有效还不完全清楚`int main()`，但我从未见过不接受它的编译器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T19:22:45.323

它不会出错 - 它会发出警告。该标志说明了一切：它希望您关心`main`（通常是`int argc, char **argv)`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T19:36:54.430

根据[gcc 文档](http://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html)，添加时会发出警告，`-Wstrict-prototypes`因为：

> -Wstrict-prototypes（仅限 C 和 Objective-C）
> 如果在**声明或定义函数时未指定参数类型，**则发出警告。（如果前面有一个指定参数类型的声明，则允许在没有警告的情况下进行旧式函数定义。）

但对你来说这是一个错误，因为`-Werror`：

> -Werror
> 将所有警告变成错误。

一般来说，定义一个`main()`类似的东西是错误的（不管你在这里看到了什么），C 规范定义了`main()`5.1.2.2.1 中的外观：

> 程序启动时调用的函数名为 main。实现没有声明这个函数的原型。它应定义为返回类型为 int 且不带参数：
> 
> `int main(void) { /* ... */ }`
> 
> 或者带有两个参数（这里称为 argc 和 argv，尽管可以使用任何名称，因为它们是声明它们的函数的局部变量）：
> 
> `int main(int argc, char *argv[]) { /* ... */ }`

# c# - C# xml 文档生成器

> ID：15796135
> 
> 赞同：0
> 
> 时间：2013-04-03T19:20:58.927
> 
> 标签：c#, xml, document

我已经评论了我所有的代码并获得了生成的 xml 文档，我想知道是否有办法在网页上很好地查看这个，比如 javadoc。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:35:53.030

有[Sandcastle 帮助文件生成器](http://shfb.codeplex.com/)，它允许生成不同格式的文档（HTML、CHM 等）。

# regex - 正则表达式 '/^$/d' 是什么意思？

> ID：15796137
> 
> 赞同：5
> 
> 时间：2013-04-03T19:21:08.807
> 
> 标签：regex, unix

我试图使用 bash 脚本删除文件中的空白行。现在，当我在 INTERNET 中搜索时，我遇到了它的两种变体。一方面，我们可以直接修改源文件，另一方面我们可以将输出存储在另一个文件中。以下是代码片段：

```
sed -i '/^$/d' fileName.txt

sed '/^$/d' fileName.txt > newFileName.txt 
```

我无法理解的是如何将正则表达式 '/^$/d' 解释为空行。恐怕我不擅长正则表达式。有人可以解释一下吗？

还有其他方法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-03T19:23:36.230

```
/^$/d

/ - start of regex
^ - start of line
$ - end of line
/ - end of regex
d - delete lines which match 
```

所以基本上找到任何空的行（起点和终点是相同的，例如没有字符），然后删除它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T19:25:06.610

让我们从正则表达式的解释开始：

```
/^$/d 
```

`^`匹配行首和`$`行尾。所以`^$`将匹配空行。

您还将`d`标志与`sed`. 这将删除匹配的行。

并`-i`切换`sed -i '/^$/d' fileName.txt`使`sed`就地删除线。如果你忽略它，它会将结果输出到标准输出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T19:22:02.463

`/^$/d`是一个`sed`删除空行的命令。它实际上是两个东西粘在一起：一个正则表达式`/^$/`和一个`sed`指令`d`。

该`/^$/`组件是一个匹配空字符串的正则表达式。更具体地说，它查找行首 ( `^`) 紧跟行尾 ( `$`)，即空行。如果行中有任何内容（空格或其他内容），则该模式将不匹配，因为行尾不会直接跟随行首。

`d`组件是一个`sed`表示“删除”的指令。在此用法中，`d`适用于与给定正则表达式 ( `/^$/`) 匹配的任何行，因此它将删除任何空行。

因为`sed`在自动打印模式下运行（没有`-n`开关），它将打印所有未删除的行——因此，在这种情况下不匹配`/$^/`——因此该命令最终成为一个过滤器，从输入。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T19:23:47.760

`/^$/`: 选择空行（`^`匹配行首，`$`匹配行尾，因此这匹配开始和立即结束且没有中间内容的行）。
`d`: 删除匹配的行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T19:23:23.420

```
^ - start of a line
$ - end of line 
```

所以

```
/^$/ 
```

它匹配行开头紧跟行尾的行。这意味着，空行。

sed 命令的`d`意思是删除匹配的行，即删除空行。

所以基本上：

```
sed '/regex/d(elete)'  --this is not a real command line, just for explanation. 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-03T19:23:49.360

`^$`表示空行，因为`^`是一个零宽度锚，表示行的*开头*，`$`是一个零宽度的锚，表示行的*结尾*。因此`^$`必须为零宽度（即根本没有字符）才能匹配。`^`行前或行后也不能有任何字符`$`。

# facebook-graph-api - 为什么发布到 facebook 页面会产生“用户尚未授权应用程序”

> ID：15796138
> 
> 赞同：15
> 
> 时间：2013-04-03T19:21:11.277
> 
> 标签：facebook-graph-api

我已经阅读了 fb 文档并编写了将消息发布到 facebook“页面”的代码，但是我收到了一个我不希望看到的错误：

```
(#200) The user hasn't authorized the application to perform this action 
```

这是我所做的：

*   我设置了一个 facebook 应用程序，它提供了我的`APP_ID`和 `APP_SECRET`.
*   我建立了一个测试facebook“页面”。让我们将其 fb id 称为`PAGE_ID`.
*   使用 OAuth 为用户获取`USER_ACCESS_TOKEN`范围为“publish_actions,manage_pages”。当重定向到 facebook auth 页面时，我接受了我的应用程序请求的权限。
*   我使用 GET 进行了一次 GET `https://graph.facebook.com/me/accounts`，`USER_ACCESS_TOKEN`然后我返回了我管理的页面列表，包括我想要发布到的页面。

我的页面的这个数据块如下所示：

```
{
  "data": [
    {
      "category": "Community", 
      "name": "My Generic Test Page", 
      "access_token": PAGE_ACCESS_TOKEN, 
      "id": PAGE_ID, 
      "perms": [
        "ADMINISTER", 
        "EDIT_PROFILE", 
        "CREATE_CONTENT", 
        "MODERATE_CONTENT", 
        "CREATE_ADS", 
        "BASIC_ADMIN"
      ]
    }, 
    ....
  ]
} 
```

然后我使用`PAGE_ACCESS_TOKEN`向页面发布消息：

*   我做了一个 POST`https://graph.facebook.com/PAGE_ID/feed`的字段`message`等于`This is a test post.`

脸书返回：

```
{
  "error": {
    "message": "(#200) The user hasn't authorized the application to perform this action", 
    "type": "OAuthException", 
    "code": 200
  }
} 
```

使用[令牌调试器](https://developers.facebook.com/tools/debug/access_token)，我可以确认 my`PAGE_ACCESS_TOKEN`是有效的，并且具有范围：`manage_pages`和`publish_actions`.

我在哪里缺少授权应用程序？我需要额外的范围吗？我是否错过了在 facebook 授权屏幕上单击某些内容？我缺少的应用程序上有设置吗？经过几天的调试，我一定对这个问题视而不见。:-|

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-11T07:32:00.003

例如，您应该添加名为**status_update的权限**

[https://www.facebook.com/dialog/permissions.request?_path=permissions.request&app_id=145634995501895&redirect_uri=https%3A%2F%2Fwww.facebook.com%2Fconnect%2Flogin_success.html%3Fdisplay%3Dpage&response_type=token&fbconnect=1&perms= status_update&from_login=1&m_sess=1&rcount=1](https://www.facebook.com/dialog/permissions.request?_path=permissions.request&app_id=145634995501895&redirect_uri=https%3A%2F%2Fwww.facebook.com%2Fconnect%2Flogin_success.html%3Fdisplay%3Dpage&response_type=token&fbconnect=1&perms=status_update&from_login=1&m_sess=1&rcount=1)

![在此处输入图像描述](https://i.stack.imgur.com/FyjSJ.png)

我可以使用我刚刚获得的访问令牌发布到我喜欢的页面： ![在此处输入图像描述](https://i.stack.imgur.com/oAmqO.png)

如果您想以页面管理员的身份发帖，则需要同时拥有**manage_pages 和 status_update**权限，例如

[https://www.facebook.com/dialog/permissions.request?_path=permissions.request&app_id=145634995501895&redirect_uri=https%3A%2F%2Fwww.facebook.com%2Fconnect%2Flogin_success.html%3Fdisplay%3Dpage&response_type=token&fbconnect=1&perms= manage_pages%2Cstatus_update&from_login=1&m_sess=1&rcount=1](https://www.facebook.com/dialog/permissions.request?_path=permissions.request&app_id=145634995501895&redirect_uri=https%3A%2F%2Fwww.facebook.com%2Fconnect%2Flogin_success.html%3Fdisplay%3Dpage&response_type=token&fbconnect=1&perms=manage_pages%2Cstatus_update&from_login=1&m_sess=1&rcount=1)

![在此处输入图像描述](https://i.stack.imgur.com/UaxsP.png)

干杯

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-06T02:48:33.147

好吧，这似乎是我们大多数人在尝试在社交网络中进行活动时常犯的错误。在尝试创建开放图形操作之前，您需要在初始授权请求中设置权限。默认情况下，您只能“只读”访问他们的基本信息。在认证时设置许可对于 Facebook 和 LinkedIn API 来说是必须的。

在此处查看[Facebook 开放图权限](http://developers.facebook.com/docs/reference/login/open-graph-permissions/)`public_actions`部分并在授权代码中进行相关更改，并解决您的问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-01-24T03:15:57.800

`status_update`不再使用。要在页面上发布，我必须同时使用`manage_pages`和`publish_pages`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-06-30T04:19:31.743

我发现获取有效令牌和检查权限的最佳方法是通过[Graph API Explorer](https://developers.facebook.com/tools/explorer/)，但 Facebook 的文档很*广泛*，但并不总是最容易遵循。

*在资源管理器中，您必须同时查看：*

1.  **该应用程序**目前位于顶部并且非常微妙，我已经错过了很多年。
2.  **Get Token Dropdown**单击什么来获取令牌，当您单击箭头时，您可以选择您有权访问的页面和其他项目来选择令牌。

# android - onLocationChanged() 没有在我的服务中执行

> ID：15796139
> 
> 赞同：1
> 
> 时间：2013-04-03T19:21:16.763
> 
> 标签：android, gps, salesforce, android-service

我正在尝试自动更新我的位置，并在位置更改时让云相关代码的其他部分工作。这是我的服务代码：

```
 package com.salesforce.samples.templateapp;

import java.util.HashMap;

import org.json.JSONArray;

import com.salesforce.androidsdk.app.ForceApp;
import com.salesforce.androidsdk.rest.RestClient;
import com.salesforce.androidsdk.rest.RestRequest;
import com.salesforce.androidsdk.rest.RestResponse;
import com.salesforce.androidsdk.rest.RestClient.AsyncRequestCallback;

import android.app.AlertDialog;
import android.app.Dialog;
import android.app.DialogFragment;
import android.app.Service;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.location.Criteria;
import android.location.GpsStatus.Listener;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.os.IBinder;
import android.provider.Settings;
import android.util.Log;
import android.widget.TextView;
import android.widget.Toast;

public class MyServices extends Service {
    RestClient client;
    double plat;
    double plong;
    int Two_Min=2*60*1000;

    // TextView infoText;

    public int onStartCommand(Intent intent, int flags, int startId) {

        Toast.makeText(this, "Location Updation has started", Toast.LENGTH_LONG)
                .show();
        Log.v("X","Response:in onStartCommand()");
        //Intent in = new Intent().setClass(MyServices.this, GPSUpdate.class);
            //in.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            //startActivity(in);
        detectLocation();
                return START_STICKY;

    }

    private void detectLocation() {
        // TODO Auto-generated method stub
        Toast.makeText(this, "Inside detectlocation()", Toast.LENGTH_SHORT)
                .show();
        LocationManager lm1 = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        LocationListener ll1 = new MyLocationListetner();

        Criteria crit = new Criteria();
        crit.setAccuracy(Criteria.ACCURACY_FINE);
        String best = lm1.getBestProvider(crit, false);
       // lm1.requestLocationUpdates(best, 0, 1, ll1);
        Log.v("X",
                "Response:After creating lm and ll ");

    //  boolean b1=lm1.addGpsStatusListener((Listener) ll1);
        //Log.v("X",
            //  "Response: "+b1);

        lm1.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, ll1);
        Log.v("X",
                "Response:After lm1.requestLocationUpdates ");

        /*Location loc = null;
        loc.getLatitude();
        loc.getLongitude();
        Log.v("X","Response:"+loc);
        ll1.onLocationChanged(loc);*/
    }

    class MyLocationListetner implements LocationListener {

        @Override
        public void onLocationChanged(Location location) {
            // TODO Auto-generated method stub
            Log.d("X","Response:inside onLocationChanged ");
            Toast.makeText(getApplicationContext(), "inside onLocationChanged()", Toast.LENGTH_LONG).show();
            //Log.v("X","Response:"+location);
            if (location != null) {
                plat = location.getLatitude();
                plong = location.getLongitude();
                Log.d("X",
                        "Response:Location " + Double.toString(plat)+Double.toString(plong));

                String objectType = "akshayg__User__c";
                String objectId = "a02900000089fK3";
                HashMap<String, Object> fields = new HashMap<String, Object>();
                fields.put("Name", "Ashish");
                // fields.put("akshayg__Donor_Location__Latitude__s",
                // Double.toString(plat));
                // fields.put("akshayg__Donor_Location__Longitude__s",
                // Double.toString(plong));
                RestRequest request = null;

                try {
                    request = RestRequest.getRequestForUpdate(
                            getString(R.string.api_version), objectType,
                            objectId, fields);
                    // Toast.makeText(this, "Location Updation has started",
                    // Toast.LENGTH_LONG).show();
                } catch (Exception e) {
                    // printHeader("Could not build update request");
                    printException(e);
                    return;
                }

                client.sendAsync(request, new AsyncRequestCallback() {

                    @Override
                    public void onSuccess(RestRequest request,
                            RestResponse result) {

                        // Toast.makeText(this,
                        // ""+Double.toString(plat)+","+Double.toString(plong),
                        // Toast.LENGTH_LONG).show();

                        try {
                             //Toast.makeText(this, "Location Updated",Toast.LENGTH_LONG).show();

                            Log.v("X",
                                    "Response:inside onSuccess() " + result.toString());
                            /*JSONArray records = result.asJSONObject()
                                    .getJSONArray("records");
                            for (int i = 0; i < records.length(); i++) {
                                // listAdapter.add(records.getJSONObject(i).getString("Name"));
                                // listAdapter.add(records.getJSONObject(i).getString("akshayg__Phone_Number__c"));
                                // listAdapter.add(records.getJSONObject(i).getString("akshayg__Donor_Location__Latitude__s"));
                                // listAdapter.add(records.getJSONObject(i).getString("akshayg__Donor_Location__Longitude__s"));
                            }
                        */ 
                        }
                        catch (Exception e) {
                            onError(e);
                        }
                    }

                    @Override
                    public void onError(Exception exception) {
                        Log.v("X",
                                "Response: " + exception.toString());

                        // Toast.makeText(MainActivity.this,
                        // MainActivity.this.getString(ForceApp.APP.getSalesforceR().stringGenericError(),
                        // exception.toString()),
                        // Toast.LENGTH_LONG).show();
                    }

                });
            }

        }

        private void printException(Exception e) {
            String err = "Error: " + e.getClass().getSimpleName();
            Toast.makeText(getApplicationContext(), err, Toast.LENGTH_LONG)
                    .show();
        }

        @Override
        public void onProviderDisabled(String provider) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onProviderEnabled(String provider) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {
            // TODO Auto-generated method stub

        }

    }

    public void onDestroy() {
        super.onDestroy();
        Toast.makeText(this, "Location Updation has stoped", Toast.LENGTH_LONG)
                .show();
    }

    @Override
    public IBinder onBind(Intent arg0) {
        // TODO Auto-generated method stub
        return null;
    }
} 
```

弹出“内部检测位置”之前的祝酒词并记录条目直到

```
04-04 00:42:34.687: V/X(10217): Response:After lm1.requestLocationUpdates 
```

但除此之外，代码是无法访问的......即使 GPS 标志显示在操作栏中，但显示位置的 toast 没有弹出......请帮助......！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:47:52.283

在`requestLocationUpdates(LocationManager.GPS_PROVIDER, 10, Two_Min, ll1)`您将 Two_Min（您已设置为 5*60*1000 = 300000）传递到 minDistance 参数中，该参数应该是米数。尝试将 minDistance 设置为 0。

# ruby-on-rails - 将随机值设置为密码属性

> ID：15796141
> 
> 赞同：0
> 
> 时间：2013-04-03T19:21:21.010
> 
> 标签：ruby-on-rails, activerecord

我试图给密码输入一个随机值来更新它，但它没有改变

控制器代码：

```
 @sat.password=nil
 @set=SecureRandom.hex(5)
 @sat.password=@set 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:26:02.227

嘿，在您更改 @sat 的某些属性后，您需要说`@sat.save`. 否则，您可以使用更新属性...

```
@sat.update_attributes(:password => SecureRandom.hex(5)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:37:04.360

我会冒险猜测您正在使用设计或类似的东西来管理密码？您可能需要这样做：

```
@sat.password = @sat.password_confirmation = SecureRandom.hex(5)
@sat.save 
```

# scala - 推断类型的类型别名

> ID：15796143
> 
> 赞同：2
> 
> 时间：2013-04-03T19:21:22.340
> 
> 标签：scala

我有一个返回类型复杂的方法，我想要一个函数，该函数将这个方法的结果作为参数。是否可以为方法的返回类型创建别名？类似于 C++ 中的 typeof

例如

```
object Obj {
    def method(x:Int) = 1 to x
    type ReturnType = ???

    //possible solution if i know a parameter for which the method won't fail
    val x = method(1)
    type ReturnType = x.type

    //another possible solution, I don't need a parameter that won't fail 
    //the method but i still think there is a better way
    lazy val x = method(1)
    type ReturnType = x.type

    //I would then like to have a function which takes ReturnType as a parameter
    def doit(t:ReturnType) = Unit
} 
```

问题是编译器知道类型，但我不知道如何从他那里得到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T22:15:19.303

我能想到的唯一方法是：

```
class Return[T](f:() => T) {
  type Type = T
}

def getDifficultReturnType() = 1 to 10

val Return = new Return(getDifficultReturnType)

def doIt(t:Return.Type) = {

} 
```

我不确定这是否是您正在寻找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T21:08:03.657

据我所知，这是不可能的。也许在未来的带有[类型宏](http://docs.scala-lang.org/overviews/macros/typemacros.html)的 Scala 版本中。

无论如何，在我看来，如果类型不重要，则将其丢弃不是一个好的设计。我知道您不想输入 80 个字符，但如果保留该类型（听起来）很重要，那么应该在*某个*时候进行说明。

您可以使用*类型别名*：

```
object Obj {
  type ReturnType = My with Very[LongAndComplicated] with Name
  // explicit type ensures you really get what you want:
  def method(x: Int): ReturnType = 1 to x  

  def doit(t: ReturnType) {}
} 
```

# c# - Metro App Navigation 在调用 GoHome 或 GoBack 时导致主页重新加载

> ID：15796150
> 
> 赞同：2
> 
> 时间：2013-04-03T19:21:53.470
> 
> 标签：c#, navigation, microsoft-metro, windows-runtime, frame

`GoHome`从调用或导航回到主页时，如何防止主页重新加载`GoBack`？

目前，整个主页重新加载/初始化。有没有办法缓存这个页面，所以不会发生重新加载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T20:00:43.250

将 Page.NavigationCacheMode 设置为必需。

# c++ - 使用 C/C++ 访问 S3/DynamoDB 的选项

> ID：15796152
> 
> 赞同：6
> 
> 时间：2013-04-03T19:22:01.310
> 
> 标签：c++, c, amazon-web-services, amazon-s3, amazon-dynamodb

我一直在寻找 S3 和 DynamoDB 的 C/C++ 接口。我在`libaws`支持 S3 但不支持 dynamodb 的 sourceforge 上找到了，但看起来不像它的维护。任何指针？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T20:39:37.147

我自己也来到了同样的十字路口。不幸的是，我找不到任何可靠的库，所以我使用 POST 自己编写，如下所述：

[http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/MakingHTTPRequests.html](http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/MakingHTTPRequests.html)

我与 AWS 建立了一个持久的、非阻塞的套接字连接。我使用 send(...) 发布并使用 libev 监听 AWS 套接字上的响应，将客户端的套接字发送到回调，以便我可以直接从回调中响应用户。这复制了一些官方 SDK 使用的非阻塞调用，例如 Node.js 的调用。

如果您想了解更多信息，请随时给我发电子邮件：chris specificsymbol rockingdayo punctuation com

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T20:59:42.630

对于 S3，有[libaws](https://github.com/teltech/libaws)。您也可以尝试获取[WebStor](http://www.meetup.com/Amazon-Web-Services-Official-Events/messages/boards/thread/22633112)的源代码，（博客文章中的链接），但我没有尝试过。

DynamoDB 将更加强大，因为它是一项更新的服务。最好的办法是遵循 Chris 的建议并自己调用 REST。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-27T05:47:12.400

这是最近发布的用于 C 的 AWS DynamoDB 库。它仍在积极开发中。以前的（功能较少的）版本已在生产环境中使用了一年多。

[https://github.com/devicescape/aws_dynamo](https://github.com/devicescape/aws_dynamo)

# r - 访问 data.frame R 中的各个值

> ID：15796157
> 
> 赞同：0
> 
> 时间：2013-04-03T19:22:08.593
> 
> 标签：r, list, dataframe

在这个例子中

```
cars <- c("FORD", "GM")
price  <- list( c(1000, 2000, 3000),  c(2000, 500, 1000))
myDF <- data.frame(cars=cars, price=cbind(price)) 
```

如何访问价格的各个值，例如 500：

就像是`myDF$price[2][2]`

非常感谢。

* * *

*与此问题相关：* [data.frame 中具有多个值的列](https://stackoverflow.com/questions/15790148/column-with-multiple-values-in-data-frame)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T19:26:52.783

这里有三个选项：

```
> myDF[[2]][[2]][2]
[1] 500
> myDF[[c(2, 2, 2)]]
[1] 500
> myDF$price[[2]][2] ## This is like what you were after...
[1] 500 
```

基本上都说，获取第二列，然后从第二列获取第二个向量，然后获取向量中的第二项。

第三个选项似乎是您想要做的，但`[[`在这种情况下需要，而不是`[`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T20:49:35.780

[我无法评论，所以我必须给出答案]

一种更简单的方法来做你正在尝试的事情是

```
price  <- data.frame(FORD=c(1000, 2000, 3000), GM=c(2000, 500, 1000))
price$GM[2] 
```

# asp.net - 下拉列表始终插入默认值

> ID：15796160
> 
> 赞同：1
> 
> 时间：2013-04-03T19:22:17.227
> 
> 标签：asp.net

我有一个包含数据库表数据的下拉列表，我想在另一个表中插入这个 ddl + 2 texbox 字段。插入工作但始终插入默认的下拉列表女巫首先显示。我错过了什么？

```
 protected void Page_Load(object sender, EventArgs e)
            {

                string connectionString = cs.getConnection();
                string query = "SELECT Id, NAME FROM PROFITCATEGORIES";
                using (SqlConnection myConnection = new SqlConnection(connectionString))
                {
                    myConnection.Open();
                    SqlCommand command = new SqlCommand(query, myConnection);
                    using (SqlDataReader rdr = command.ExecuteReader())
                    {

                        DropDownListCategory.DataSource = rdr;
                        DropDownListCategory.DataTextField = "Name";
                        DropDownListCategory.DataValueField = "ID";
                        DropDownListCategory.DataBind();

                    }
                }

            }

            protected void ButtonSave_Click(object sender, EventArgs e)
            {
                if (String.IsNullOrWhiteSpace(TextBoxValue.Text))
                    return;
                string connectionString = cs.getConnection();
                string insertSql = "INSERT INTO profits(Value,DateCreate,IdCategory,IdUser) VALUES(@Value, @DateCreate,@CategoryId,@UserId)";

                using (SqlConnection myConnection = new SqlConnection(connectionString))
                {
                    myConnection.Open();
                    SqlCommand command = new SqlCommand(insertSql, myConnection);
                    //параметризация се прави тук за да се избегне SQL Injection
                    command.Parameters.AddWithValue("@Value", TextBoxValue.Text);
                    command.Parameters.AddWithValue("@DateCreate", TextBoxData.Text);
                    command.Parameters.AddWithValue("@CategoryId", DropDownListCategory.SelectedValue);
                    command.Parameters.AddWithValue("@UserId", cui.getCurrentId());
                    command.ExecuteNonQuery();
                    //пренасочваме заявката към същата страница за да се видят новите резултати и да се избегне проблем с дублиране на инсерт при рефреш на страницата
                    Response.Redirect("~/Profit.aspx");
                    myConnection.Close();
                }
                TextBoxValue.Text = string.Empty;

            } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T19:37:36.997

您在每次页面加载时重新绑定列表。将数据绑定代码包装在一个`if (!IsPostBack)`块中。

```
protected void Page_Load(object sender, EventArgs e)
{
   if (!IsPostBack)
   {
      // Bind the list here...
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T19:36:48.727

每次按下 asp:button 时，页面都会重新加载，并且 page_load 方法中的代码会再次初始化。这就是为什么默认项总是插入到您的数据库中。

将其放在 page_load 中的代码周围：**(if (!Page.IsPostback))**

```
 protected void Page_Load(object sender, EventArgs e)
            { 

               if (!Page.isPostback)
                {
                string connectionString = cs.getConnection();
                string query = "SELECT Id, NAME FROM PROFITCATEGORIES";
                using (SqlConnection myConnection = new SqlConnection(connectionString))
                {
                    myConnection.Open();
                    SqlCommand command = new SqlCommand(query, myConnection);
                    using (SqlDataReader rdr = command.ExecuteReader())
                    {

                        DropDownListCategory.DataSource = rdr;
                        DropDownListCategory.DataTextField = "Name";
                        DropDownListCategory.DataValueField = "ID";
                        DropDownListCategory.DataBind();

                    }
                }
              }

            } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T19:34:49.203

使用 AppendDataBoundItems 属性并将其设置为 true，并且仅在 PostBack 上绑定：

[如何在 ASP.NET 中向 Databound DropDownList 控件添加附加项？](http://imar.spaanjaars.com/281/how-do-i-add-an-additional-item-to-a-databound-dropdownlist-control-in-aspnet)

[ListControl.AppendDataBoundItems 属性](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.appenddatabounditems.aspx)

# opengl - Haskell 中的 OpenGL VBO

> ID：15796162
> 
> 赞同：5
> 
> 时间：2013-04-03T19:22:25.783
> 
> 标签：opengl, haskell, vertex-array, vertex-array-object

基于[这篇文章](http://www.haskell.org/pipermail/haskell-cafe/2008-August/046514.html)，我试图弄清楚如何在 Haskell 中使用 VBO。我试图填写那里没有涵盖的位：

```
data Sprite = Sprite { spriteImage :: Image
                     , spritePosition :: Position
                     } deriving (Show, Eq)

spriteBatch :: [Sprite] -> [(TextureObject, [Sprite])]
spriteBatch = (map f) . toList . (groupedBy (imageTexture . spriteImage))
    where f (t, s) = (t, s)

offset = plusPtr nullPtr

renderSprites :: [Sprite] -> IO ()
renderSprites l = (flip mapM_) (spriteBatch l) $ \(t, sps) -> do
        textureBinding Texture2D $= Just t
        let l = concat $ map sprToList sps
        vbo <- vboOfList ((length l)*4) l
        displayVbo vbo $ fromIntegral $ length sps
    where
        sprToList :: Sprite -> [GLfloat]
        sprToList (Sprite (Image _ (TexCoord2 u0 v0) (TexCoord2 u1 v1) (Size w h) _) (Position x y)) = 
            [fromIntegral x, fromIntegral y, u0, v0
            ,fromIntegral (x+w), fromIntegral y, u1, v0
            ,fromIntegral (x+w), fromIntegral (y+h), u1, v1
            ,fromIntegral x, fromIntegral (y+h), u0, v1
            ]

vboOfList :: Int -> [GLfloat] -> IO BufferObject
vboOfList size elems = do
    let ptrsize = toEnum $ size * 4
        arrayType = ElementArrayBuffer
    (array:_) <- genObjectNames 1
    bindBuffer arrayType $= Just array
    arr <- newListArray (0, size - 1) elems
    withStorableArray arr $ \ptr -> bufferData arrayType $= (ptrsize, ptr, StaticDraw)
    bindBuffer ArrayBuffer $= Nothing
    return array

displayVbo buff size = do
    let stride = 2*(2*4)
        vxDesc = VertexArrayDescriptor 2 Float stride $ offset 0
        texCoo = VertexArrayDescriptor 2 Float stride $ offset 8
    bindBuffer ArrayBuffer $= Just buff

    arrayPointer VertexArray $= vxDesc
    arrayPointer TextureCoordArray $= texCoo

    clientState VertexArray $= Enabled
    clientState TextureCoordArray $= Enabled

    drawArrays Quads 0 size
    bindBuffer ArrayBuffer $= Nothing 
```

[你可以在这里](https://github.com/scan/Colin/blob/vbo/src/Colin/Sprite.hs)找到完整的代码，以备不时之需。

在[master 分支](https://github.com/scan/Colin/blob/master/src/Colin/Sprite.hs)上，相同的函数使用普通`vertex`调用来绘制，`Sprites`并且它工作得很好。但是使用 VBO，精灵就不存在了。我得到一个空白屏幕。

谁能向我解释我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-28T08:19:45.717

您正在为顶点和 uv 使用一个缓冲区。使用两个缓冲区，一个用于顶点，一个用于 uvs。

# ios - iOS - 如何以编程方式计算以已知文件限制大小录制音频/视频的时间限制

> ID：15796163
> 
> 赞同：1
> 
> 时间：2013-04-03T19:22:30.380
> 
> 标签：ios

我尝试了很多谷歌，但似乎没有人在 iOS 中做过。我的问题是：我的服务器只允许客户端上传大小有限的视频/音频/图像文件（例如：视频 30M，音频 1M）。有了这个限制，我想计算允许用户录制音频/视频的时间。此计算必须考虑不同的设备，例如 iPad 3 的摄像头比 ipad 2 更好，因此我们将有更少的时间来录制视频。我想知道我们是否可以根据已知的文件大小以编程方式计算时间限制。

谢谢，栾。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:38:20.243

When working with large amounts of data such as video and audio, compression should play a part in your calculation.

Compression results can vary greatly depending on what you are recording and as a result it would be unrealistic to try to forecast a certain maximum duration.

I can think of two options:

*   Predetermine very restrictive recording times per device (I believe it is possible in iOS to tell an iPad3 from an iPad2)
*   Figure out a way to re-encode a smaller part of the video until it is within limits.

Best of luck!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:34:56.387

Cantgetright 有原因很难完美地描述这一点。

您真正关心的是相机的百万像素（定义）、一秒视频的最坏情况存储大小以及手机上还有多少免费兆。

如果您了解这些元素中的大部分，那么时间可能是您确定最后一个元素的约束条件。

总是高估尺寸以保证它无论如何都能工作。无论如何，人们都不知道他们的 iDevice 上的 5 秒视频有多大，所以你可能会吝啬分配的时间

# ios - 为 iPhone 应用设置过期日期

> ID：15796167
> 
> 赞同：0
> 
> 时间：2013-04-03T19:22:49.103
> 
> 标签：ios, time

目前我正在开发一款游戏 iOS 应用程序，我将提供给我的一些客户进行演示。

但是，在分发我的应用程序时，我想在我的应用程序中设置一个过期机制，这样它就会在“N”天后过期。这意味着（例如 30 天后）我的应用程序将无法运行。我可以通过使用系统日期和时间来实现这一点，这意味着每当我的程序启动时，我都会检查今天的日期和到期日期。

问题是如果用户更改系统时间，我的比较将不正确。

此外，如果用户删除并重新安装该应用程序，它将无法正常工作。

有什么帮助或建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T19:40:53.660

Look at [Ad Hoc Distribution](http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/DevPortalGuide/CreatingandDownloadingaDistributionProvisioningProfile/CreatingandDownloadingaDistributionProvisioningProfile.html)

Ad-hoc development builds last for 3 months, however if you want to add a time limit then you could:

Add a key-value in `NSUserDefaults` which stores the start date of the app (time taken from a webservice such as [http://www.earthtools.org/webservices.htm#timezone](http://www.earthtools.org/webservices.htm#timezone)) then every time the app enters the foreground check the time against it and if it is over the threshold then to cancel loading the app.

```
NSDate *now        = //load current datetime from restkit
NSDate *startDate  = [[NSUserDefaults standardUserDefaults] objectForKey:@"startDate"];
NSDate *futureDate = [NSDate dateWithTimeInterval:60 * 60 * 24 * 30 sinceDate:startDate];

if ([futureDate compare:now] == NSOrderedAscending) {
    //stop the application loading by loading a NIB and displaying a message.
} 
```

I would recommend using [RestKit](http://restkit.org/) to request data from the web-service.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T19:27:18.347

当应用程序过期时，在钥匙串中存储一些东西来表明这一事实。然后只需在启动时检查，而不是日期。

或者，您可以让它检查您控制的 Web 服务。

# ruby-on-rails - 使用路由文件的 Ruby 链接助手

> ID：15796174
> 
> 赞同：0
> 
> 时间：2013-04-03T19:23:21.573
> 
> 标签：ruby-on-rails, routes, hyperlink

好的，所以我知道这是非常基本的，但是我到处搜索，但找不到解决方案。这是我的路线文件：

```
match '/interestonly' => 'interestonlymortgagecalculators#interestonlymortgagecalculator' 
```

如何创建链接以链接到此？我教它会很简单

```
<%= link_to 'Interest Only Mortgage Calculator',  interestonly %> 
```

有人可以帮助我吗？我知道这是非常基本的东西，但我找不到任何东西，可能是由于我对问题的措辞

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:32:33.923

您将需要阅读以下内容：[Ruby on Rails 指南：Rails Routing from the Outside In](http://guides.rubyonrails.org/routing.html#paths-and-urls)。我已经直接链接到相关部分。

您需要的是路径助手，您可以通过`rake routes`在命令行中运行来访问它。路径助手将在左栏中。在上面代码中的逗号之后，您应该输入路径助手。

# eclipse - 警告：“默认”配置可能无法构建，因为它使用了此系统不支持的“Cygwin GCC”工具链

> ID：15796177
> 
> 赞同：0
> 
> 时间：2013-04-03T19:23:26.247
> 
> 标签：eclipse, cygwin, cocos2d-x

我正在 Eclipse 中处理 cocos2dx，当我将 cygwin 设置为工具链时，我看到以下错误。

```
**** WARNING: The "Default" Configuration may not build ****
**** because it uses the "Cygwin GCC" **** 
**** tool-chain that is unsupported on this system. **** 
```

如果更新 cygwin，我应该如何更新它以及它应该包含哪些组件？我无法运行程序“make”，启动失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T05:09:44.977

伙计们，我想出了解决方案。我没有下载几个 cygwin 包 gcc 和 gdb。下载这些包并随后运行，但它产生了一个新错误，指出“：”不能使用，但该错误也得到了轻松处理，由 stackoverflow 上的另一篇文章提供

# java - 在 JPanel 中将焦点设置到 Swing 控件的最佳实践

> ID：15796178
> 
> 赞同：1
> 
> 时间：2013-04-03T19:23:27.757
> 
> 标签：java, swing, focus

一种思想流派说，当 windowOpened 事件触发时，添加一个窗口侦听器并设置焦点：

```
addWindowListener(new WindowAdapter(){ 
  public void windowOpened( WindowEvent e){ 
    txtMessage.requestFocus();
  } 
}); 
```

另一种思想流派说使用 SwingUtilities.invokeLater 方法在单独的线程中设置焦点。

```
SwingUtilities.invokeLater(new Runnable()
{
  public void run() {
    field.requestFocus();
  }
}); 
```

谁能告诉我哪个是最佳实践，或者您何时会选择其中一个？使用线程解决方案时，线程是否可能会丢失并且永远不会设置焦点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T19:43:59.847

对 GUI 的所有更新都必须在事件调度线程 (EDT) 上完成。如果您不确定自己是否在上面，invokeLater(...) 将始终保证它。如果您使用它并且不需要它，它不会伤害任何东西。

此外，您应该使用`field.requestFocusInWindow();`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T19:50:42.137

```
addWindowListener(new WindowAdapter(){ 
  public void windowOpened( WindowEvent e){ 
    SwingUtilities.invokeLater(new Runnable()
    {
      public void run() {
      field.requestFocusInWindow();
      }
    });
  } 
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T02:21:03.300

最佳实践是不使用`requestFocusInWindow()`requestFocus()。

我更喜欢第二种方法。我认为它适用于所有情况。

面板应该独立于它们将被添加到的窗口（JFrame 或 JDialog）而创建，因此面板在构建时不会引用窗口。例如：

```
JPanel panel = new CustomPanel();
JFrame frame = new JFrame();
frame.add( panel ); 
```

对于第三种方法，您可以查看[RequestFocusListener](http://tips4java.wordpress.com/2010/03/14/dialog-focus/)。

# model - XNA 和模型没有正确加载，或者我做错了

> ID：15796179
> 
> 赞同：1
> 
> 时间：2013-04-03T19:23:32.847
> 
> 标签：model, xna, fbx

我可以在 XNA 中成功加载一个简单的模型 (fbx)，但是当我尝试加载我的宇宙飞船模型时，它显示“索引超出了数组的范围”。它有两个网格；一个是船，另一个是驾驶舱。我在它上面有镜像修改器以保持它的对称性和一个细分修改器使它变得漂亮和平滑。该模型是在 Blender 中制作的。

当我移除驾驶舱和修改器时，它会正确加载，但当然以剥离形式查看并不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:16:12.753

您可以在导出之前应用修改器以使它们在网格上永久存在。

# c++ - 使用 C++ 确定可执行文件的路径

> ID：15796180
> 
> 赞同：1
> 
> 时间：2013-04-03T19:23:34.107
> 
> 标签：c++, path, executable

我正在使用 C++、flex 和 GNU bison 编写一个简单的语言解释器/翻译器。我需要知道可执行文件的路径。对于诸如“mylang mysource.ext”之类的简单情况，我可以使用`argc`and获取路径`argv`，但是如果通过 shebang 调用文件（例如“#/usr/bin/env mylang”），我该怎么办？

在其他情况下`argc`，`argv`组合不起作用。是否有可能覆盖这种情况？如果是这样，我想获得可执行文件的完整路径。解决方案必须是跨平台的。如果可能的话，我想避免使用外部库，尤其是 boost，这对我的目标来说非常大。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T00:38:20.960

这将非常依赖于平台，但对于 linux，符号链接“/proc/self/exe”指向当前映像的物理路径。从这里，您可以使用 readlink 来确定路径。我最近使用了这个：

```
#include <stdlib.h>
#include <unistd.h>
#include <errno.h>
#include <string>
#include <stdexcept>
#include <boost/scoped_array.hpp>

std::string path;

size_t size = 1024;
const ssize_t err = static_cast<ssize_t>(-1);
while (true)
{
    boost::scoped_array<char> buffer(new char[size]);

    ssize_t res = readlink("/proc/self/exe", buffer.get(), size);

    if (res == err)
    {
        if (errno == ENAMETOOLONG)
            size *= 2; // try again
        else
            throw std::runtime_error("unexpected error during readlink");
    }
    else
    {
        path.assign(buffer.get(), res);
        break;
    }
} 
```

这是使用 G++ 4.1.2 完成的，因此不可`unique_ptr`用，也可以轻松删除对`boost::scoped_array`.

注意：这为您提供了当前图像的完整路径，而不是图像所在的目录。要获取目录，您需要进行一些操作。Boost Filesystem 也有一些很好的功能来做到这一点。否则，您将不得不自己解析它。

此外，如果您是库，并且不能依赖另一部分代码更改当前工作目录，或者无权访问`argv`. `getcwd`+*当且仅当*您可以保证您的应用程序或库中的任何内容都不会从您下方更改当前工作目录（CWD）时， +`argv[0]`才能正常工作。仅当 CWD 不变时才有效。*`argv[0]`*

 *此外，如果可执行文件是通过环境变量查找 la 定位的`$PATH`，则您需要实现路径解析以找到您的真实位置。`argv[0]`仅返回您的启动方式。即，如果您运行命令“ls -al”，`argv[0]`则命令“ls”将只是“ls”。如果您运行“/usr/bin/ls -al”，`argv[0]`将是“/usr/bin/ls”。*

# javascript - 如何延迟增加var？

> ID：15796185
> 
> 赞同：1
> 
> 时间：2013-04-03T19:23:42.500
> 
> 标签：javascript, jquery

我试图在用户通过链接时为元素设置动画

```
var i = 0;

function next(){
    while (i>-10) {
        i--;
        $('#conteudo').animate({left:"'"+i+"px'"},'slow');
    };
}

$('#next').hover(function(){
    next();
}); 
```

但它立即增加值-10 ..我试图做这样的事情：-1..-2..-3..-4..直到它达到-10。我可以在延迟增加之前控制延迟吗？

我做错了什么？

这是 jsfiddle [http://jsfiddle.net/KwhSg/的链接](http://jsfiddle.net/KwhSg/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T19:28:12.163

我猜你误解了什么[`animate`](http://api.jquery.com/animate/)。尝试用这个替换整个东西：

```
$('#next').hover(function(){
    $('#conteudo').animate({left:'-=10'},'slow');
}); 
```

[`Animate`](http://api.jquery.com/animate/)已经负责动画、延迟和作品。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T19:30:13.253

就像另一个回答者指出的那样，`animate`旨在为您解决这个问题。但是为了学习，这里是如何做你想做的事情：

```
var i = 0;
function next(){
    $('#conteudo').css({left:"'"+i+"px'"});
    // use setTimeout to pause for 30 milliseconds and let the view update
    if (i-- > -10) setTimeout(next, 30);
}

$('#next').hover(function(){
    next();
}); 
```

您需要使用`setTimeout`而不是 while 循环。它在迭代之间暂停（在这种情况下为 30 毫秒），以便视图可以更新。

在您最初的尝试中，只要 while 循环正在执行，它就可以完全控制该过程，因此在循环完成之前视图无法更新。一旦循环完成，它已经完成了 decrementing `i`，所以你不会得到任何动画。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T19:30:41.223

您可以设置一个布尔变量，可以在“悬停”事件上设置为真，在“悬停”事件上设置为假，所以你的 while 循环就像这样

```
function next(){
    while (i>-10 && !notHovered) {
        i--;
        $('#conteudo').animate({left:"'"+i+"px'"},'slow');
    };
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T19:26:36.800

您可以使用 setTimeout 功能

[http://www.w3schools.com/jsref/met_win_settimeout.asp](http://www.w3schools.com/jsref/met_win_settimeout.asp)

只需使用它以给定的时间间隔增加您的动画值

由于这仍然没有解决，这里有一个解决方案。您可以根据需要更改超时/动画速度。

[http://jsfiddle.net/649az/](http://jsfiddle.net/649az/)

```
var i =10;
function next(){        
     $('#conteudo').animate({left:"-=10"},'slow');
}

$('#next').hover(function(){

    while (i>0){
        i--;
       setTimeout(next(),1000);
    }
}); 
```

# iphone - 如何在 CALayer 中将图像的“图像”放在一起？

> ID：15796186
> 
> 赞同：-1
> 
> 时间：2013-04-03T19:23:44.240
> 
> 标签：iphone, objective-c, xcode

我想使用几个 CALayer 作为 UIViewController 的子层。第一个是背景。

其他人都在这个背景面前。

我如何将带有孔/透明点的图像放在一起/绘制图像并将其绘制在 CALayer 中，以便背景仍然可见。

我不想为每个图像使用一个 CALayer，我最终会得到 20 000 个 CALayer 或更多......

那么如何将图像的“图像”放在 CALayer 中？（然后用作子层）

代码示例：

```
// rootView which is a UIViewController
- (void)viewDidLoad
{
    [super viewDidLoad];

    _sproutLayer = [[CGSproutLayer alloc] initWithLayer:[CALayer layer]];
    [self.view.layer addSublayer:_sproutLayer];
    [_sproutLayer setZPosition:1];
    [_sproutLayer setNeedsDisplay];

    _backgroundLayer = [[CALayer alloc] init];
    CGRect positionOne = CGRectMake(100, 100, 150, 150);
    _backgroundLayer.frame = positionOne;
    _backgroundLayer.backgroundColor = [UIColor blueColor].CGColor;
    _backgroundLayer.name = @"One";
    _backgroundLayer.contents = (id) [UIImage imageNamed:@"background.png"].CGImage;
    [self.view.layer addSublayer:_backgroundLayer];
    [_backgroundLayer setZPosition:0];
    [_backgroundLayer setNeedsDisplay];

    _refreshTimer = [NSTimer scheduledTimerWithTimeInterval:0.01 target:self selector:@selector(doIterate:) userInfo:nil repeats:YES];
}

- (void)doIterate:(NSTimer *)timer
{    
    [self.something doComputeStuff];
    ...
    [_sproutLayer draw];
}

// CGSproutLayer which is a CALAyer
- (void)draw 
{   
    int cellSize = self.bounds.size.width / WIDTH;
    double xOffset = 0;

    CGRect cellFrame = CGRectMake(0, 0, cellSize, cellSize);
    NSUInteger cellIndex = 0;
    cellFrame.origin.x = xOffset;

    for (int i = 0; i < WIDTH; i++)
    {
        cellFrame.origin.y = 0;
        for (int j = 0; j < HEIGHT; j++, cellIndex++)
        {         
                NSNumber *currentCell = [self.levelState.board objectAtIndex:cellIndex];                 
                if (currentCell.intValue == sprouts)
                {
                    [image1 drawInRect:cellFrame];
                }
                else if (currentCell.intValue == grass)
                {
                    [image2 drawInRect:cellFrame];
                }       
            cellFrame.origin.y += cellSize;
        }
        cellFrame.origin.x += cellSize;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:46:59.703

我像 sethHB 建议的那样解决了它：这个解决方案非常快，并且足以满足我上面建议的图像数量。

```
- (void)draw 
{
    CGSize size = self.view.frame.size;
    UIGraphicsBeginImageContext(size);

    CGRect cellFrame = CGRectMake(0, 0, cellSize, cellSize);

    for (int i = 0; i < WIDTH; i++)
    {
        cellFrame.origin.y = 0;
        for (int j = 0; j < HEIGHT; j++, cellIndex++)
        {
                CGPoint pp = CGPointMake(i, j);
                if (currentCell.intValue == sprouts)
                {
                    [image1 drawAtPoint:pp blendMode:kCGBlendModeOverlay alpha:1.0];                 
                }
                else if (currentCell.intValue == grass)
                {
                    [image2 drawAtPoint:pp blendMode:kCGBlendModeOverlay alpha:1.0];                    
                } 
            }
            cellFrame.origin.y += cellSize;
        }
        cellFrame.origin.x += cellSize;
    }
    UIImage* blendedImage = UIGraphicsGetImageFromCurrentImageContext();
    _frontLayer.contents = (id) blendedImage.CGImage;
    UIGraphicsEndImageContext();
} 
```

谢谢你！

# java - 在 JTable 中默认选中一个项目

> ID：15796196
> 
> 赞同：0
> 
> 时间：2013-04-03T19:24:00.823
> 
> 标签：java, swing, jtable

我有一个应用程序，当用户按下按钮时，它会向 JTable 添加“层”。应用程序在创建新文件时添加第一层。我希望在 JTable 中自动选择该层。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:38:27.713

您可以通过 JTable 的选择模型来控制选择。

```
 myJTable.getSelectionModel().setSelectionInterval( index, index ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T19:48:14.237

简单情况：

```
//if needed set selection model
table.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
//at first, select row
table.getSelectionModel().setSelectionInterval(from, to);
//then select column if needed
table.setColumnSelectionInterval(from, to)
//at the end request focus
table.requestFocusInWindow(); 
```

更困难的是，您有一个允许多行选择的表格：

```
table.setSelectionMode(ListSelectionModel.MULTIPLE_INTERVAL_SELECTION);
//select needed lines
ListSelectionModel model = table.getSelectionModel();
model.clearSelection();
int[] focusedLines = new int[] {0, 4, 10};
for(int actualRow : focusedLines)
{
    model.addSelectionInterval(actualRow, actualRow);
}
//then select column if needed
table.setColumnSelectionInterval(from, to)
//at the end request focus
table.requestFocusInWindow(); 
```

# string-formatting - Delphi Prism：从二进制文件中读取字符串返回奇怪的字符

> ID：15796197
> 
> 赞同：0
> 
> 时间：2013-04-03T19:24:04.613
> 
> 标签：string-formatting, binaryreader, oxygene, binarywriter

我正在将字符串写入文件并使用 binarywriter 和 binaryreader 将其读回。当字符串被读回时，它看起来很有趣而且很长。我不知道它为什么这样做。

这是我使用 binarywriter 写入文件的方法：

```
TFileHeader = Record
        ID:String;
        version:SmallInt;
end;

method WriteGroups(fname:string; cg:ArrayList);
var
  strm : BinaryWriter;
  i:integer;
  cnt:Integer;
  GroupHeader:TFileHeader;
begin    
  GroupHeader.ID:='GroupFile'; <<<-----I am having problem with this string.
  GroupHeader.version:=6;

  if Environment.OSVersion.Platform = System.PlatformID.Unix then
     fname := baseDir +'/calgroup.dat'
  else
     fname := baseDir +'\calgroup.dat';

  if cg.Count > 0 then
  begin
    strm := new BinaryWriter(File.Create(fname));

    cnt := cg.Count;
    strm.Write(GroupHeader.version);
    strm.Write(GroupHeader.ID);
    strm.Write(cnt);

    for i := 0 to cnt - 1 do
    begin
      TCalGroup(cg[i]).WriteMGroup(strm);
    end;
    strm.Close;
  end;
end; 
```

以下是我使用 BinaryReader 从文件中读取的方法：

```
method ReadGroups(fname:string; cg:ArrayList);
var
  strm : BinaryReader;
  GroupHeader:TFileHeader;
  cnt:SmallInt;
  i:integer;
  cgp:TMagiKalCalGroup;
begin
  GroupHeader.ID :='';
  GroupHeader.version := 0;

  if Environment.OSVersion.Platform = System.PlatformID.Unix then
     fname := baseDir +'/calgroup.dat'
  else
     fname := baseDir +'\calgroup.dat';

  if File.Exists(fname) then
  begin
    ClearGroups(cg);
    strm := new BinaryReader(file.OpenRead(fname));

    GroupHeader.version:=strm.ReadInt32;
    GroupHeader.ID := strm.ReadString; <-----Here is the problem. See the image below..

    if ((GroupHeader.ID='') or (GroupHeader.version>100)) then
    begin
        strm.Close;
        Exit;
    end;

    if (GroupHeader.version<5) then
    begin
      strm.Close;
      exit;
    end;

    cnt := strm.ReadInt16;

    for i := 0 to cnt - 1 do
    begin
      reformat:=false;
      cgp := new TMagiKalCalGroup('New Grp');
      cgp.ReadMGroup(Strm);
      cgp.UpdateDateTime(System.DateTime.Now);
      cg.Add(cgp);
    end;
    //strm.Free;
    strm.Close;
  end;
end; 
```

这是我在调试代码时看到的：

![在此处输入图像描述](https://i.stack.imgur.com/2oePp.png)

如您所见或看不到，“GroupHeader.ID”应该只包含“Groupfile”而不是包含垃圾的长字符串。

那么，我做错了什么？这是字符串格式错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T19:31:16.440

`Smallint`是一个 16 位的值。读取文件时，您将该值作为 32 位值而不是 16 位值读取，因此您最终会读取一些属于存储字符串长度的字节。然后，当您读取字符串时，字符串字符的前 2 个字节被解释为字符串长度的一部分，这就是您最终得到垃圾的原因。

阅读组时您有类似的逻辑错误。 `Integer`是一个 32 位的值。读取组计数时，您将其读取为 16 位值，这意味着您的组读取将关闭 2 个字节，并且也会损坏。

`ReadGroups()`您需要在函数内部更改这些行：

```
cnt: Smallint;
...
GroupHeader.version:=strm.ReadInt32;
...
cnt := strm.ReadInt16; 
```

改为：

```
cnt: Integer;
...
GroupHeader.version := strm.ReadInt16;
...
cnt := strm.ReadInt32; 
```

# java - UI 与事件处理程序的分离

> ID：15796201
> 
> 赞同：0
> 
> 时间：2013-04-03T19:24:14.150
> 
> 标签：java, events, event-handling

为什么将事件的来源（例如按钮）与处理事件的地方（例如事件处理程序）分开会更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:36:45.347

一方面，GUI 天生就很难测试。如果您可以成功地从 GUI 中删除大部分/所有应用程序逻辑，那么所有需要测试的代码都将位于一个单独的类（没有 GUI 小部件）中，现在可以在 JUnit 下轻松测试。

# jsf-2 - 带有复选框 jsf 的数据表

> ID：15796202
> 
> 赞同：0
> 
> 时间：2013-04-03T19:24:16.387
> 
> 标签：jsf-2, primefaces

我有一个带有复选框列的数据表。来自dataTable的数据我加载数据库。到目前为止，一切进展顺利。我需要在某种情况下出现一些标记的复选框，因为我这样做？

在dataTable代码之后：

```
<p:dataTable id="dataTable" var="valor" 
                        style="width:100%; text-align:center"
                        value="#{beanMensagemXContato.dataModelMsg}"
                        paginator="true" rows="5"  
                        paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"  
                        rowsPerPageTemplate="5,10,15"
                        selection="#{beanMensagemXContato.selectedMensagens}">

                        <f:facet name="header">  
                            Mensagens  
                        </f:facet>  

                        <p:column selectionMode="multiple" style="width:5%">

                        </p:column>                     

                        <p:column>
                            <f:facet name="header">
                                <h:outputText value="Código" />
                            </f:facet>
                            <h:outputText value="#{valor.idtMensagem}" />
                        </p:column>

                        <p:column>
                            <f:facet name="header">
                                <h:outputText value="Mensagem" />
                            </f:facet>
                            <h:outputText value="#{valor.nomMensagem}" />
                        </p:column>

                        <p:column>
                            <f:facet name="header">
                                <h:outputText value="Descrição" />
                            </f:facet>
                            <h:outputText value="#{valor.desMensagem}" />
                        </p:column>

                        <p:column>
                            <f:facet name="header">
                                <h:outputText value="Configurador" />
                            </f:facet>
                            <h:outputText value="#{valor.indConfigurador}" />
                        </p:column>
                    </p:dataTable> 
```

在下面的代码正确加载列表之前，屏幕只显示一条选定的记录。

```
listaMsgContato = consultaContatoEmail.listarMensagensAssociadas(selectedConsulta.getIdtContato());
        int l=0;
        int tamanho = listaMsgContato.size();
        selectedMensagens = new Mensagem[tamanho];
        for(int i=0; i<listaMsgContato.size(); i++){            
            for(int j=0; j<listaMsg.size();j++){
                System.out.println("Lista Msg Contato: " + listaMsgContato.get(i).getIdtMensagem() + " - Lista Msg: " + listaMsg.get(j).getIdtMensagem());
                if((long)listaMsgContato.get(i).getIdtMensagem()==(long)listaMsg.get(j).getIdtMensagem()){
                    System.out.println("Entrou");
                    //Fazer o selectedMensagens receber os valores.
                    selectedMensagens[l]=listaMsg.get(j);                   
                    l++;    
                }
            }           
        } 
```

我认为你在我的 xhtm.xml 中遗漏了一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:38:53.427

没有使用primefaces选择列，但是......

INMO您应该将所需的元素添加到 中`selectedMensagens`，`selectedMensagens`应该代表选定的行...，在服务器端执行该逻辑（`@PostConstruct`例如），如果某个元素`dataModelMsg`满足条件，您应该将其添加到`selectedMensagens`

# ios - segue 被 NSTimer 解雇

> ID：15796203
> 
> 赞同：0
> 
> 时间：2013-04-03T19:24:20.637
> 
> 标签：ios, nstimer, segue

我对 iOS 很陌生，我认为这应该很容易回答：
我有一个 Master-Detail-Application 有许多子视图，它们工作正常，并且在后台我有几个计时器正在运行。现在，当计时器触发时，我想从用户当前所在的任何位置切换到单个视图。（有一个按钮可以返回他来自的地方）

做这个的最好方式是什么？

我应该以某种方式获取当前活动的视图控制器并告诉他进行转场吗？

谢谢！

**更新：**
澄清：我的所有计时器都有一个非 UI 相关（NSObject）调度程序，当计时器触发以弹出一个特殊视图时，它必须以某种方式通知我的 UI，该视图应该覆盖当前活动视图并在关闭时再次显示它。一个常规的全屏弹出窗口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:36:01.177

如果您在计时器触发时尝试进行转场，那很容易。做

```
[NSTimer scheduledTimerWithTimeInterval:5.0 target:self selector:@selector(segue) userInfo:nil repeats:NO];

-(void)segue {
  [self performSegueWithIdentifier:@"id" sender:self];
} 
```

# java - 通过类将数组的所有内容保存到file.txt中，然后从同一个文件加载/保存/读取？

> ID：15796208
> 
> 赞同：0
> 
> 时间：2013-04-03T19:24:36.790
> 
> 标签：java, oop, class, save, saving-data

我正在尝试将用户输入保存在我引用的名为“contacts.txt”的文件中。我必须收集用户输入并将它们存储为电话簿格式，然后允许用户呼叫他们保存在此文件中的信息。我无法将输入写入“contacts.txt”文件。this 引用的两个函数如下所示是`doSave()`和`doAddEntry()`。

我已经为此工作了几个小时并且遇到了一堵砖墙，并且已经运行了数百万次调试（可能是错误的）以查看这一切都出错了......

任何人都可以提供任何可以让我走上正轨的见解吗？

**<已解决>**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:28:01.390

您应该`Entry`创建一个`Serializable`类并使用`Serialization`将数组保存`Entry` `objects`在文件中，并`deserialization`从保存在文件中的字节流中获取对象数组。例如，考虑下面给出的代码。这`Person`是一个实现`java.io.Serializable` `marker interface`. `SerializeArray` 在数组的主体中`Person`创建并`Persons.ser`使用`saveArray`. 然后使用 . 从文件中读回该数组`loadArray`。

```
import java.io.*;
class Person implements Serializable //Make Person class Serializable so that its objects can be serialized.
{
    private static final long SerialVersionUID = 20L;
    String name;
    int age;
    public Person(String name,int age)
    {
        this.name = name;
        this.age = age;
    }
    public String toString()
    {
        return "Name:"+name+", Age:"+age;
    }
}
public class SerializeArray 
{
    public static void saveArray(Person[] arr)throws Exception //writes the array of Person to a file "Persons.ser"
    {
        ObjectOutputStream os = new ObjectOutputStream(new FileOutputStream("Persons.ser"));
        os.writeObject(arr);
        os.close();
    }
    public static Person[] loadArray()throws Exception //Reads the array of Persons back from file.
    {
        ObjectInputStream oin = new ObjectInputStream(new FileInputStream("Persons.ser"));
        Person[] arr = (Person[]) oin.readObject();
        oin.close();
        return arr;
    }
    public static void main(String[] args) throws Exception
    {
        Person[] arr= new Person[3];
        for (int i = 0 ; i < arr.length ; i++)
        {
            arr[i] = new Person("Person"+i,25+i);
        }
        System.out.println("Saving array to file");
        saveArray(arr);
        System.out.println("Reading array back from file");
        Person[] per = loadArray();
        for (Person p : per)
        {
            System.out.println(p);
        }
    }
} 
```

**更新**
要将这个概念合并到您的程序中，您应该首先将您的 Entry 类声明更改为如下所示：

```
public class Entry implements java.io.Serializable 
```

然后改变你的`doSave()`方法如下：

```
public void doSave() throws Exception {
        ObjectOutputStream os = new ObjectOutputStream(new FileOutputStream("contacts.txt"));
        os.writeObject(entryList);
        os.close();
    } 
```

然后改变你的`doLoad()`方法如下：

```
public void doLoad() throws Exception {
    if (length != 0) {
        //throw new Exception ("I'm not empty"); 
        //File c = new File ("contacts.txt");//No need to access the File here..
        Scanner input = new Scanner(c);
        while (input.hasNextLine()) {
            Entry e = new Entry();
            e.name = input.next();
            if ("q".equalsIgnorecase(e.name))
            break;
            e.number = input.next();
            e.notes = input.next();
            doAddEntry(e);
        }
        doAddEntry(null);
    }   
} 
```

`doAddEntry`并按如下方式更改您的方法：

```
public void doAddEntry(Entry entry) throws Exception {
    if (entry == null)
    {
      //save file here..
      doSave(); 
    }
    else if (length == 200) {
    //save file here..
    doSave(); 
    throw new Exception("I'm full");
   }
   else
   {
    boolean matched = false;
    for (int i = 0; i<length; i++) {
    if (entryList[i].name.compareToIgnoreCase(entry.name) == 0) {
      matched = true;
      break;
    }
    if(!matched)
    {
      entryList[entryList.length] = entry;
    }
   }
} 
```

}

# python - 我的 python 函数中缺少什么？（初学者）

> ID：15796209
> 
> 赞同：1
> 
> 时间：2013-04-03T19:24:36.800
> 
> 标签：python, python-2.7

编写一个名为guess_number 的函数，它接收1 个数字参数。它要求用户输入 1 到 10 之间的数字，直到用户猜出参数中的数字。它返回用户猜测的次数。

到目前为止，这是我的代码，但我似乎无法弄清楚我错过了什么。它在输入阶段停止。

```
def guess_number(x):
    count = 0
    a = input('Guess my number between 1 and 10')
    while a!= x:
        count += 1
    else:
        count += 1
        return count 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:27:12.440

您只要求用户输入一次。

一旦进入 while 循环，用户就不会被提示输入新的猜测。这意味着`a`never 的值会改变，因此您将永远被困在循环中。

尝试包括一个附加`input`语句：

```
def guess_number(x):
    count = 0
    a = input('Guess my number between 1 and 10')
    while a != x:
        count += 1
        a = input('Guess again!')
    else:
        count += 1
        return count 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T19:28:35.233

这是工作代码：

```
def guess_number(x):
    count = 1
    a = input('Guess my number between 1 and 10')
    while a != x:
        count += 1
        a = input('Guess my number between 1 and 10')
    return count 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T19:28:36.420

您的程序在这一点上卡住了：

```
while a!= x:
        count += 1 
```

假设 x 为 5，a 为 3。在这种情况下，a!=x 将评估为 True，您将进入循环，并且 count 将递增，但您永远不会离开 while 循环，因为 a 将始终与 x 不同.

这段代码应该这样做：

```
def guess_number(x):
    count = 1
    while True:
        a = input('Guess my number between 1 and 10')
        if a != x:
            count += 1
        else:
            return count 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T19:28:54.940

除了移动循环`input`内部之外`while`，除非您打算`x`作为字符串传入，否则您还需要在进行比较之前将其转换`a`为 an 。`int`

```
def guess_number(x):
    count = 0
    while int(input('Guess a number.')) != x:
        count += 1
    return count 
```

在风格上，您不应该在提示中烘焙范围（1 到 10），除非该函数实际上限制了可以从中选择的数字范围；`x`可以是任何东西。我知道这个问题给出了具体的要求，但你应该质疑那些对设计有不好影响的要求。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T19:29:38.873

```
def guess_number(x):
    count = 0
    while True:
        a = input('Guess my number between 1 and 10')
        if a!= x:
            count += 1
        else:
            count += 1
            return count 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-03T19:32:49.817

你有几个问题。首先，您`input`需要在循环内，否则它只会被询问一次。所以你想要这个：

```
def guess_number(x):
    count = 0
    while int(raw_input('Guess my number between 1 and 10')) != x:
        count += 1
    else:
        count += 1
        return count 
```

注意（非常重要！）使用 of`int(raw_input(...))`而不是 just `input`！允许您的用户在您的函数中执行任意代码是一个非常糟糕的想法，这就是为什么他们将`input`' 在 Python 3 中的行为更改为在 Python `raw_input`2 中所做的那样。

# javascript - 通过 Adob e Edge 上的外部 Javascript 更改 .css 属性？

> ID：15796210
> 
> 赞同：0
> 
> 时间：2013-04-03T19:24:36.923
> 
> 标签：javascript, css, fonts, adobe-edge

我正在尝试在外部 .js 文件上创建各种函数，因此我可以在 Edge 中多次调用它们而无需编码。问题是，在导入 jQuery 和我的外部 Javascript 文件后，一些代码可以工作，但我在这部分卡住了：更改符号的 .css 属性，更具体地说，是“font-size”属性。我目前的功能是：

```
function setFont(textid,fontsize,originalWinWidth){ 
//textid: symbol's name; fontsize: current font size of this symbol; originalWinWidth:
//window size at the start of the animation

console.log("Set Font:");

//set the original font size
var originalFontSize = Math.round(originalWinWidth/fontsize);
console.log("Original Font Size: " + originalFontSize);
console.log("Text ID: " + textid);

//set the font size using jquery
sym.$(textid).css("font-size", originalFontSize);  
} 
```

我在最后一行收到错误“事件处理程序中的 Javascript 错误！事件类型 = 元素”，代码的所有其他部分都有效。知道这可能是什么吗？

谢谢，

拉斐尔·卡里尼亚托

# python - 将一堆 .csv 文件中的第 3 行复制到元文件

> ID：15796212
> 
> 赞同：0
> 
> 时间：2013-04-03T19:24:38.737
> 
> 标签：python, csv

对于这个项目，我有一个名为“Files”的文件夹，在这个文件夹中，我有一百个标记为 1 到 100 的文件夹。在从 1 到 100 的每个文件夹中，有一个名为“data1.csv”的 .csv 文件，并且有在所有 1-100 个文件夹中的每个 data1.csv 中都有相同的 3 行，并带有逗号分隔的文本（当然还有一些数据变化）

我想要我的 python 脚本： 1\. 在每个 1-100 文件夹中的每个 data1.csv 的第 3 行中以逗号分隔格式获取所有文本，并将其转储到主 .csv 文件中。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:34:30.893

如何遍历目录（os.walk）

[http://docs.python.org/2/library/os.html](http://docs.python.org/2/library/os.html)

打开一个文件，它被认为是最好的做法

```
with open(filename,'r') as fin: 
```

它“包装”文件处理程序并将其关闭在块之外，这与旧样式相反

```
fin = open(filename,'r')
fin.readline()
fin.close() 
```

python有列表

```
lst = [] 
```

您将要使用该示例来遍历目录树，并获取完整的文件路径

只需遍历所有文件，使用

```
result = fin.readline() #3x or
result = fin.readlines()[2] 
```

最后将结果附加到您的 lst

```
lst.append(result) 
```

最后，通过以下 cmd 将其转储到文件中

```
with open(outfilename,'w') as fout:
    fout.write( '\n'.join(lst) ) 
```

# java - 关于 jmenuitem 选择的对话

> ID：15796220
> 
> 赞同：0
> 
> 时间：2013-04-03T19:24:56.900
> 
> 标签：java, swing, awt

我构造了一个 GameFrame 类，它有一个带有 a 的 JFrame， `jmenubar`并在菜单中添加了一些项目。出于 OOP 的原因，我将 actionlistener 类（实现我自己的并将其作为参数传递给框架 jmenubar）从 GameFrame 中分离出来。

问题是，当其中一个`JmenuItems`被选中时，它应该启动一个对话，要求用户输入一个 URL。但是只有在选择菜单项时才会创建此对话框，所以我该如何**避免**执行以下操作？（这不是很 OOP）

```
@Override
public void actionPerformed(ActionEvent e) {
    JMenuItem item = (JMenuItem) e.getSource();

    if (item.getText().equals("URL")) {
        //create a dialogue 
        //get the input
        //pass it to something else
    }
} 
```

我想避免在我的事件处理程序类中创建摆动组件并避免在我的组件类中使用事件处理程序，但我看不出有什么办法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:53:31.990

创建一个 custom `ActionLIstener`，并为构造函数传递它需要引用的项目的引用（即使您放置侦听器的对象与您在`actionPerformed()`方法上需要的对象相同。

```
class MyActionListener implements ActionListener {

    JMenuItem item;

    MyActionListener(JMenuItem item) {
        this.item = item;
    }

    public void actionPerformed(ActionEvent e) {
        // here you have the reference for the item. Printing the text:
        System.out.println(item.getText());
    }

} 
```

这种方法的缺点是每个 JMenuItem 都需要一个侦听器。

# android - 在 samsung nexus 上运行 apk 不会响应

> ID：15796222
> 
> 赞同：0
> 
> 时间：2013-04-03T19:25:01.980
> 
> 标签：android

我在 sdk 中制作了一个简单的 apk，模拟器很好，一切正常，完成导出，当尝试在我的设备 samsung nexus 上运行 apk 时，它甚至不会显示它，我尝试从邮件中进行 DL，它说“通过分析出现错误“，任何提示或帮助如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:10:06.897

如果您使用的是 Eclipse，请选择“Project --> Clean”选项。然后重建apk文件。有时清洁会解决问题。

# c - 错误：类型冲突

> ID：15796223
> 
> 赞同：0
> 
> 时间：2013-04-03T19:25:03.287
> 
> 标签：c, xml

我正在用 C 语言编写代码以完成任务。

这是相关代码：

```
 //operation: text(elem)
xml_list *text(xml_list *elem){
  if(isEmpty(elem)){
    return Nil();
  }
  return append(text1(head(elem)),text(tail(elem)));
}

//operation: text1(elem)
xml_list *text1(xml_list *elem){
  if(isText(elem)){
    return Cons(elem,Nil());
  }
  else{
    return text(childeren(elem));
  }
} 
```

这给了我错误：`error: conflicting types for 'text1' xml_list *text1(xml_list *elem){`

我无法弄清楚问题的根源。我已经连续工作了 8 个小时，对此我有点失去理智。请有人帮助我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T19:27:10.650

你用`text1`

```
xml_list *text(xml_list *elem){
  if(isEmpty(elem)){
    return Nil();
  }
  return append(text1(head(elem)),text(tail(elem)));
} 
```

在它被声明之前，所以编译器（不幸的是）使用旧的“隐式`int`”规则，并假设`text1`返回一个`int`.

当遇到说它返回 an 的定义时，它与从隐式声明中`xml_list*`获得的类型冲突。`int`

在标头中声明您的函数，并将其包含在源代码中，以便在使用函数时知道所有原型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T19:31:53.103

当它到达时

```
return append(text1(head(elem)),text(tail(elem))); 
```

编译器不知道`text1`. 所以它假设`int`并记住它。稍后当它到达 text1 的定义时，它会发生冲突。

为了解决这个前向声明 text1 like

```
xml_list *text1(xml_list *); // <---- Here

xml_list *text(xml_list *elem){
  if(isEmpty(elem)){
    return Nil();
  }
  return append(text1(head(elem)),text(tail(elem)));
}

//operation: text1(elem)
xml_list *text1(xml_list *elem){
  if(isText(elem)){
    return Cons(elem,Nil());
  }
  else{
    return text(childeren(elem));
  }
} 
```

# amazon-web-services - 如何将 Java Web 应用程序部署到 AWS 弹性 beantalk？

> ID：15796224
> 
> 赞同：3
> 
> 时间：2013-04-03T19:25:03.493
> 
> 标签：amazon-web-services, amazon-elastic-beanstalk

我写了一个 AWS java web 项目，它可以在我的本地服务器上运行。

但是当我参考[http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create_deploy_Java.sdlc.html](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create_deploy_Java.sdlc.html)

在弹性 beantalk 上部署应用程序。我只能得到一个空白页。我也尝试将 WAR 文件上传到弹性 beanstalk，但仍然有一个空白页。

我通过 SSH 连接到 EC2 实例，但没有找到我的应用程序的文件夹。我认为tomcat7/myapp 文件夹中应该有某个地方。谁能告诉我为什么，以及如何将java应用程序部署到它？

我也尝试了 travelLog 示例，但仍然无法获得页面显示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T21:27:44.007

我尝试了不同的 JRE 1.6，现在我可以发布我的应用程序了。

真的很奇怪，我不知道为什么 JRE 1.7 不起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T05:00:00.340

关于弹性豆茎的快速事实：

1.  默认情况下在 beanstalk 实例上安装 java open sdk。
2.  在文件夹中：/opt/elasticbeanstalk/hooks 你可以找到部署的脚本
3.  默认情况下 beanstalk 将应用程序部署到 /var/lib/tomcat6/

# objective-c - 属性未初始化

> ID：15796228
> 
> 赞同：0
> 
> 时间：2013-04-03T19:25:19.950
> 
> 标签：objective-c

无论我做什么，我似乎都无法初始化这些属性中的任何一个，我总是得到 0 或 null 作为输出。

```
Player.h:
@interface Player : NSObject
{
    NSString *name;
}
@property (nonatomic, strong) NSString *name;
@end

Player.m:
@implementation Player
@synthesize name;
@end

MainGameDisplay.h:
#import "Player.h"
@interface MainGameDisplay : UIViewController<UIScrollViewDelegate>
{
    Player *player, *rival1, *rival2, *rival3;
}

MainGameDisplay.m:
-(void) initCharAttributes {
    player = [[Player alloc] init];
    player.name = @"PlayerName";
    NSLog(@"NAME:%@", player.name);  //Output=  NAME:(null)
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:55:52.437

试试这些改变。您不需要在 MainGameDisplay.h 上公开这么多的实现。此外，您的属性将自动合成，因此您的 @synthesize 和支持 iVar 不是必需的。此外，除非它负责初始化类的实例，否则不应以 init 开头方法名称。

```
Player.h:
@interface Player : NSObject

@property (nonatomic, strong) NSString *name;

@end

Player.m:
@implementation Player

@end

MainGameDisplay.h:
@interface MainGameDisplay : UIViewController

MainGameDisplay.m:
#import "Player.h"

@interface MainGameDisplay () <UIScrollViewDelegate>

@implementation MainGameDisplay {
    Player *player, *rival1, *rival2, *rival3;
}

- (void)charAttributes {
    player = [[Player alloc] init];
    player.name = @"PlayerName";
    NSLog(@"NAME:%@", player.name);  //Output=  NAME:(null)
} 
```

# random - 如何：为加密应用程序生成大小为四分之一 MB 的加密安全随机数据

> ID：15796229
> 
> 赞同：0
> 
> 时间：2013-04-03T19:25:21.450
> 
> 标签：random, cryptography, prng

我需要生成大小为四分之一 MB 的加密安全随机数据文件。任何想法我怎么能做到这一点。任何可用的库/ API。请指导，因为我是 Cryto 的新手。

该数据 (gen) 必须是 C 程序的 inut，该程序在标题上具有以下使用注释：

crypto_prg g gfile sfile pfile mfile < gen：生成由 gen 确定的代码。将代码写入 gfile (7k)、sfile (53k)、pfile (4k)、mfile (82k)。需要一些时间。编码需要mfile。解码需要gfile sfile pfile。gen 应该是大约四分之一兆字节的随机数据。gen 没有足够的随机数据可能无法生成代码。在这种情况下，crypto_prg 会警告你。

在这种情况下，我需要生成“gen”。我怎样才能做到这一点。请指教，因为我是新手。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T19:40:41.400

在 Java 中，您可以使用[SecureRandom](http://docs.oracle.com/javase/7/docs/api/java/security/SecureRandom.html)生成加密安全数据。如果您只需要生成一次数据，那么使用以下内容就足够简单了：

RandomDataGenerator.java

```
public static void main(String args[]) {
    SecureRandom random = new SecureRandom();
    byte bytes[] = new byte[262144]; // Number of bytes in 0.25MB
    random.nextBytes(bytes);

    try {
        FileOutputStream fos = new FileOutputStream("random.data");
        fos.write(myByteArray);
        fos.close();
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

让我知道你是否有任何问题让这个工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T02:59:44.707

如果您在基于 *NIX 的系统（Linux、OSX、Android）上执行此操作，您可以简单地从特殊文件 /dev/urandom 读取任意数量的字节。

请参阅：[https ://security.stackexchange.com/questions/3936/is-a-rand-from-dev-urandom-secure-for-a-login-key](https://security.stackexchange.com/questions/3936/is-a-rand-from-dev-urandom-secure-for-a-login-key)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-17T23:16:11.577

在 *NIX 中，您应该使用`/dev/random`than `/dev/urandom`，因为 random 更慢但更安全。

仍然在 linux 上`APG`应该默认安装。尝试类似：

```
apg -a 1 -n 12 -m 16 -x 20 -M sncl 
```

最后你可以使用`PWGen`（默认不安装）：

```
Cdt 
```

# r - 如何在不使用 for 循环的情况下使用 ggplot 添加多行给定系数的两个向量？

> ID：15796232
> 
> 赞同：1
> 
> 时间：2013-04-03T19:25:38.560
> 
> 标签：r, ggplot2, visualization

使用 for 循环的速度明显较慢，而且看起来不正确。如果有人可以使用 geom_abline(intercept, slope) 的其他方法，我将不胜感激。变量 Coeff 是一个包含所有参数的四个数据帧的列表，每个数据帧有 1001 行（第一个没用）。

```
p <- qplot(x,y,data = data,color = I("blue"))
for (i in 1:1000){
p <- p + geom_abline(intercept = Coeff[[1]]$Intercept[i+1], slope = Coeff[[1]]$X[i+1],alpha = 0.1,size = 0.1, colour = "red")
}
for (i in 1:1000){
p <- p + geom_abline(intercept = Coeff[[3]]$Intercept[i+1], slope = Coeff[[3]]$X[i+1],alpha = 0.1,size = 0.1, colour = "yellow")
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T19:52:59.420

您可以将向量传递给`slope`和`intercept`

```
g <- ggplot(data.frame(x=-10:10, y=-10:10), aes(x, y))+geom_point()
my_coefs <- data.frame(slope=-5:5, intercept=-5:5)

g + geom_abline(data=my_coefs, aes(slope=slope, intercept=intercept)) 
```

# jquery - MVC3 2 列表框在回发时交换项目捕获更改

> ID：15796239
> 
> 赞同：0
> 
> 时间：2013-04-03T19:26:28.227
> 
> 标签：jquery, asp.net-mvc-3, listbox, postback

上周我一直在阅读关于这个主题的帖子，并且已经接近但仍然不完全在那里。任何帮助都会有所帮助。我有许多 hyper-v 服务器，并试图不断更新分配给它的来宾 VM。我有两个列表 1 分配来宾机器的列表。第二个可用访客机器列表

我有以下内容：

视图模型：

```
namespace MyFirstApplication.ViewModels
{
    public class HVHostGuestViewModel
    {
        public string HVCname { get; set; }
        public int AvailMemory { get; set; }
        public int AvailDisk { get; set; }
        public SelectList HVGuests {get; set; }
        public SelectList AvailGuests { get; set; }
        public List<string> GuestsRemoved { get; set; }
        public List<string> GuestsAdded { get; set; }
        public string HVComments { get; set; }
    }
} 
```

控制器：

```
public ActionResult Manage(int id)
    {
        tblHVHost tblhvhost = db.tblHVHosts.Find(id);
        var AssignedComputers = (from c in db.tblComputers
                                  where (c.tblHVHostHVHostId == id  && c.HostName !    = "DTR")
                                  orderby(c.HostName)
                                  select c).ToList();

        var UnAssignedComputers = (from c in db.tblComputers
                                   where c.tblHVHostHVHostId == 1 && c.HostName != "DTR"
                                   orderby(c.HostName)
                                   select c).ToList();

     var GuestVM = new SelectList(AssignedComputers,"tblHVHostHVHostId","HostName");
     var AvailVM = new SelectList(UnAssignedComputers, "tblHVHostHVHostId","HostName");

        var HVViewModel = new HVHostGuestViewModel
        {
           HVCname = tblhvhost.HVCName,
           AvailDisk = 1000,
           AvailMemory = 32,
           HVComments = tblhvhost.HVComments,
          HVGuests = GuestVM,
          AvailGuests = AvailVM                
        };

        return View(HVViewModel);

    }
    //
    // POST:/HVHost/Manage/
    [HttpPost]
    public ActionResult Manage(HVHostGuestViewModel HVViewModel)
    {

        return View();
    } 
```

查看：（使用 Razor 引擎）

## 将 VM 分配给 Hyper-V 服务器

```
@using (Html.BeginForm("Manage", "HVHost", FormMethod.Post)){

<table>

    <tr>          
        <th> Assigned Machines </th>
        <th></th>
        <th> Available Machines</th>
   </tr>
    <tr>
        <td>
            @Html.ListBox("Guests", Model.HVGuests)
        </td>

        <td>
              <input id="MoveRight" type="button" value=" >> " />
            <br />
              <input id="MoveLeft" type="button" value=" << " />
        </td>

        <td>
             @Html.ListBox("Available", Model.AvailGuests) 

        </td>
    </tr>
    <tr>
        <td></td>
         <td> <input type="submit" value="Submit" onclick =" " /> </td>
         <td></td>

    </tr>
</table>

@Html.HiddenFor(model => model.GuestsRemoved)
@Html.HiddenFor(model => model.GuestsAdded) 
```

}

jQuery脚本：

```
$(function () {
    $("#MoveRight,#MoveLeft").click(function (event) {
        var id = $(event.target).attr("id");
        var selectFrom = id == "MoveRight" ? "#Guests" : "#Available";
        var moveTo = id == "MoveRight" ? "#Available" : "#Guests";

        var selectedItems = $(selectFrom + " :selected").toArray();
        $(moveTo).append(selectedItems);
        selectedItems.remove;
        var name = $(event.target).attr("Text");

        $("#GuestsRemoved").val("MPE999")
        $("#GuestsAdded").val("mpe111")

    })
}); 
```

什么是工作：我得到两个列表，并且能够在两者之间移动项目（从左到右/从右到左）。这是使用我找到的 jQuery 脚本。

到目前为止，从我读过的内容来看，我有两个选择： 1 每次事件后回发到服务器。2）留在客户端，在隐藏字段中保留所选项目的列表，这些项目在回发时可供控制器使用。我决定尝试选项 2。我在视图模型中添加了两个元素：GuestsRemoved、GuestAdded 作为列表我使用 Razor 帮助器语法将这些元素添加到我的视图中：@html.HiddenFor(model => model.guestsRemoved) & @Html.HiddenFor （模型 => 模型.GuestsAdded）。接下来，我将它添加到我的 Jquery 脚本中。我通过为其分配一个测试值来验证值将返回到控制器： $("#GuestsAdded").val("mpe111")

所以这就是我卡住的地方。我无法找出给出“HostName”的正确属性，这就是我想要返回的。此实例中的主机名列表。

原始 html 看起来像：< select id="Guests" multiple="multiple" name="Guests"> MPE123

选择列表对象是：
var GuestVM = new SelectList(AssignedComputers,"tblHVHostHVHostId","HostName")

我不知道如何到达“主机名”。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:25:59.203

尝试这个：

`var listOfHostNHames = $(selectFrom + " :selected").text();`

# scikit-learn - 找到重要的分类特征

> ID：15796247
> 
> 赞同：15
> 
> 时间：2013-04-03T19:26:40.243
> 
> 标签：scikit-learn, feature-selection

我正在尝试使用逻辑回归模型对一些 EEG 数据进行分类（这似乎对我的数据进行了最佳分类）。我拥有的数据来自多通道 EEG 设置，所以本质上我有一个 63 x 116 x 50 的矩阵（即通道 x 时间点 x 试验次数（有两种试验类型 50），我已将其重新调整为长向量，每个试验一个。

我想做的是在分类之后查看哪些特征在对试验进行分类时最有用。我该怎么做？是否可以测试这些功能的重要性？例如，分类主要由 N 个特征驱动，这些是特征 x 到 z。因此，例如，我可以说通道 10 在时间点 90-95 对分类很重要或很重要。

那么这是可能的还是我问错了问题？

非常感谢任何评论或论文参考。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-04-03T22:05:38.840

Scikit-learn 包含不少特征排序方法，其中：

*   单变量特征选择（[http://scikit-learn.org/stable/auto_examples/feature_selection/plot_feature_selection.html](http://scikit-learn.org/stable/auto_examples/feature_selection/plot_feature_selection.html)）
*   递归特征消除（[http://scikit-learn.org/stable/auto_examples/feature_selection/plot_rfe_digits.html](http://scikit-learn.org/stable/auto_examples/feature_selection/plot_rfe_digits.html)）
*   随机逻辑回归/稳定性选择（[http://scikit-learn.org/stable/modules/generated/sklearn.linear_model.RandomizedLogisticRegression.html](http://scikit-learn.org/stable/modules/generated/sklearn.linear_model.RandomizedLogisticRegression.html)）

（见[http://scikit-learn.org/stable/modules/feature_selection.html](http://scikit-learn.org/stable/modules/feature_selection.html)更多）

其中，我绝对推荐给 Randomized Logistic Regression 一个机会。根据我的经验，它始终优于其他方法并且非常稳定。关于此的论文：http: [//arxiv.org/pdf/0809.2932v2.pdf](http://arxiv.org/pdf/0809.2932v2.pdf)

**编辑：** 我写了一系列关于不同特征选择方法及其优缺点的博客文章，这可能有助于更详细地回答这个问题：

*   [http://blog.datadive.net/selecting-good-features-part-i-univariate-selection/](http://blog.datadive.net/selecting-good-features-part-i-univariate-selection/)
*   [http://blog.datadive.net/selecting-good-features-part-ii-linear-models-and-regularization/](http://blog.datadive.net/selecting-good-features-part-ii-linear-models-and-regularization/)
*   [http://blog.datadive.net/selecting-good-features-part-iii-random-forests/](http://blog.datadive.net/selecting-good-features-part-iii-random-forests/)
*   [http://blog.datadive.net/selecting-good-features-part-iv-stability-selection-rfe-and-everything-side-by-side/](http://blog.datadive.net/selecting-good-features-part-iv-stability-selection-rfe-and-everything-side-by-side/)

# content-management-system - Vignette CMS 中使用了什么样的数据库

> ID：15796249
> 
> 赞同：0
> 
> 时间：2013-04-03T19:26:45.003
> 
> 标签：content-management-system, vignette

在我们的企业应用程序中，我们使用 Vignette for CMS。CMS 页面内容保存到某种数据库中。现在在设置 Vignette 时，我没有看到任何外部数据库（如 Oracle）的设置。所以我猜数据库是独立于 Vignette 构建的。知道这是如何在 Vignette 中实现的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:31:15.040

```
OpenText Web Experience Management (formerly Vignette Content Management) Supports Oracle, SQL Server, DB2 
```

[http://en.wikipedia.org/wiki/List_of_content_management_systems](http://en.wikipedia.org/wiki/List_of_content_management_systems)

# java - 在 Excel 中，提供列号，找到下一个空单元格并输入数据。（爪哇）

> ID：15796254
> 
> 赞同：0
> 
> 时间：2013-04-03T19:27:09.083
> 
> 标签：java, excel

我有一些数据的excel。说：

*   A 列的数据直到第 3 行；
*   B 列的数据直到第 18 行；
*   C 列的数据直到第 12 行；

我需要一个带有参数列和数据的方法，该方法转到该列中的下一个可用单元格并输入数据。

例如 appendData(0,"Xyz") 应在单元格 A4 中输入“Xyz”。我正在使用 jxl。这是我到目前为止所能得到的..

```
 public static void appendData(int column, String data) throws BiffException, IOException, WriteException{
    Workbook file=Workbook.getWorkbook(inputWorkbook);
    WritableWorkbook writeBook=Workbook.createWorkbook(inputWorkbook,file);
    WritableSheet sheet = writeBook.getSheet(0);
    WritableFont wf=new WritableFont(WritableFont.ARIAL);

    WritableCellFormat cf = new WritableCellFormat(wf);

    cf.setWrap(true);
    for (int i = 0; i <= sheet.getRows(); i++) {
        Cell cell = sheet.getCell(column, i);
        String cellContent = cell.getContents().toString();
        if (cellContent.isEmpty()) {
            Label label = new Label(column, i, data,cf);
            sheet.addCell(label);
        }
    }
    writeBook.write();
    writeBook.close();
    return;
}

    public static void main(String[] args) throws BiffException, WriteException, IOException{
    appendData(0, "UID1"); 
```

}

它失败并出现以下错误：

线程“主”jxl.write.biff.RowsExceededException 中的异常：jxl.write.biff.WritableSheetImpl 的 jxl.write.biff.WritableSheetImpl.getRowRecord(WritableSheetImpl.java:1214) 超出了工作表允许的最大行数.addCell(WritableSheetImpl.java:1151) 在 com.tivo.tsg.common.XLWriter.appendData(XLWriter.java:59) 在 com.tivo.tsg.common.XLWriter.main(XLWriter.java:79)

有人可以帮忙吗？

谢谢，迈克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:04:26.363

**注意：**旧版 Microsoft Excel（文件扩展名为 *.xls）支持 65536（2 次方 16）。检查您是否尝试获取或写入大于 65536 行的位置。

**故障排除选项：**

1.  在循环内打印 'i' 的值，看看它失败的次数。它可能会提供更多线索。
2.  您的文件中的 59 是什么样的。异常从代码的第 59 行开始。分享细节，它可以提供帮助。com.tivo.tsg.common.XLWriter.appendData(XLWriter.java:59)

3.  检查此链接的最后 2 个答案，该答案建议设置其他选项。它可能有助于解决问题。

    [http://community.jaspersoft.com/questions/518045/maximum-number-rows-within-excel-spreadsheet](http://community.jaspersoft.com/questions/518045/maximum-number-rows-within-excel-spreadsheet)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T06:41:38.747

```
public static void appendData(int column, String data) throws BiffException, IOException, WriteException{
    Workbook file=Workbook.getWorkbook(inputWorkbook);
    WritableWorkbook writeBook=Workbook.createWorkbook(inputWorkbook,file);
    WritableSheet sheet = writeBook.getSheet(0);
    WritableFont wf=new WritableFont(WritableFont.ARIAL);
    WritableCellFormat cf = new WritableCellFormat(wf);
    cf.setWrap(true);
    Cell[] cell = sheet.getColumn(column);
    int len = cell.length;
    Label label = new Label(column, len, data,cf);
    sheet.addCell(label);
    writeBook.write();
    writeBook.close();
    return;
} 
```

这对我有用！我想我以前的方法本身是错误的。

# jquery - 在大多数情况下，数组返回为 [object, object]。这是什么意思？

> ID：15796260
> 
> 赞同：0
> 
> 时间：2013-04-03T19:27:17.533
> 
> 标签：jquery, xml, arrays

在以下示例中，前两个返回 [object, object]，但第三个返回我对前两个的期望，即“Next”

```
alert(sceChoicesArr);

alert(sceChoicesArr[0]);

alert(sceChoicesArr[0].text()); 
```

这是正在创建的数组：

```
var sceChoicesArr = [];

$(xml).find('choice').each(function(){sceChoicesArr.push($(this));}); 
```

这是它在上面的行中寻找的 xml 位：

```
<choice>Next</choice> 
```

我正在尝试将数组吐出到 html 中，并且我一直在写出类似于此页面上的示例的内容：[使用 jquery 显示数组中的所有项目](https://stackoverflow.com/questions/9541570/display-all-item-in-array-using-jquery)以及此：http: [//jsfiddle.net/chrisabrams/hYQm4 /](http://jsfiddle.net/chrisabrams/hYQm4/)但这些示例似乎都无法提取数组中的值，因为当我用警报检查它时，我得到的只是 [object, object]

所以我的问题是，什么是 [object, object]，为什么我得到它而不是“Next”？

在我看来，我的数组的唯一值应该等于 ["Next"]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:45:04.990

在您的代码中，您使用的是`sceChoicesArr.push($(this));`. **它将一个jQuery 对象**推送到数组中。

`alert`隐式调用`Object.prototype.toString`with `sceChoicesArr`，当在对象上调用时，返回`"[object Object]"`.

而不是使用：

```
sceChoicesArr.push($(this)); 
```

采用：

```
sceChoicesArr.push($(this).text()); 
```

然后以“可读”形式获取数组：

```
sceChoicesArr.join(", ") 
```

**或者**继续 push `$(this)`，然后得到一个“可读”的形式，使用：

```
var readableArr = $.map(sceChoicesArr, function (value, index) {
    return $(value).text();
}); 
```

这将返回一个新数组，其中仅包含每个元素的文本。然后只需使用：

```
readableArr.join(", ") 
```

如果您只想查看数组的内容（而不是在其他任何地方使用它），您可以使用`console.log(sceChoicesArr);`which 应该为您的变量提供有用的概述。

# windows - 如何在 Windows 8 中安装、编译和使用 Rebar

> ID：15796263
> 
> 赞同：16
> 
> 时间：2013-04-03T19:27:24.723
> 
> 标签：windows, erlang, rebar

这可能吗？

我遇到的所有关于如何构建和使用 Rebar 的教程都涉及 Unix 命令，而我是一个最不幸的 Windows 用户。如果我能提供帮助，我真的很想避免安装 Cygwin。

例如，要构建 Rebar，您将获得：

```
$ git clone git://github.com/rebar/rebar.git
$ cd rebar
$ ./bootstrap
Recompile: src/getopt
...
Recompile: src/rebar_utils
==> rebar (compile)
Congratulations! You now have a self-contained script called "rebar" in
your current working directory. Place this script anywhere in your path
and you can use rebar to build OTP-compliant apps. 
```

**什么是 windows-cmd 等效项？**

以下任何链接或教程提供有关如何在 Windows shell 中使用钢筋的分步说明将不胜感激。

**更新：**

手动下载 Rebar 并将其解压到我的目录后：C:\erlang\rebar

我进入 windows shell 并输入：

```
SET PATH=C:\Program Files\erl5.10.1\bin 
```

这是位于包含 erlang.exe 的目录中的“bin”文件夹

接下来我输入：

```
C:\erlang\rebar>bootstrap.bat 
```

编译！:)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-03T21:37:51.023

rebar 目录中应该有一个`bootstrap.bat`脚本。你不需要 cygwin 来工作，但你需要安装 Erlang 并在路径上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-10-11T18:13:42.857

我假设您已经安装了[erlang](http://erlang.org/download.html)并将其添加到您的路径中。

你可以下载[Git](https://git-scm.com/downloads)并安装它。然后打开 git bash 并输入

*   `git clone https://github.com/rebar/rebar.git`

*   一旦将其克隆到您想要的位置，您就可以通过进入 rebar 目录来运行该命令。

    ./bootstrap

*   现在它可以正常工作并告诉您已在当前工作目录中编译了钢筋文件。

很好，您可以在项目中使用钢筋。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-09T23:56:19.543

您也可以从 (Windows) 命令 shell调用*path\to\erlang-install\bin* \escript.exe**引导程序。**

*bootstrap*只是一个 e(rlang) 脚本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-04T12:52:34.280

您可以下载并安装[适用于 Windows 的 Git](https://git-for-windows.github.io/) 然后，使用它来运行相同的确切指令：

```
git clone git://github.com/rebar/rebar.git
cd rebar
./bootstrap 
```

一切都应该正常。

# jquery - 编写插件 jQuery 文档

> ID：15796264
> 
> 赞同：0
> 
> 时间：2013-04-03T19:27:28.090
> 
> 标签：jquery, plugins

我正在玩弄一些创作插件，所以我转向了 jQuery 文档，其中讨论了不要弄乱 $.fn 对象，以及没有一个插件应该超过 $.fn 命名空间......

```
(function( $ ){

  var methods = {
    init : function( options ) { 
      // THIS 
   },
    show : function( ) {
      // IS
    },
    hide : function( ) { 
      // GOOD
    },
    update : function( content ) { 
      // !!! 
    }
  };

  $.fn.tooltip = function( method ) {

    // Method calling logic
    if ( methods[method] ) {
      return methods[ method ].apply( this, Array.prototype.slice.call( arguments, 1 ));
    } else if ( typeof method === 'object' || ! method ) {
  return methods.init.apply( this, arguments );
    } else {
      $.error( 'Method ' +  method + ' does not exist on jQuery.tooltip' );
    }    

  };

})( jQuery );

// calls the init method
$('div').tooltip(); 

// calls the init method
$('div').tooltip({
  foo : 'bar'
}); 
```

我明白了一切，直到：

```
 return methods[ method ].apply( this, Array.prototype.slice.call( arguments, 1 )); 
```

部分。

我将那一点更改为：

```
$.fn.tooltip = function(method)
{
    if(myFunc[method])
    {
        return myFunc[method].apply();
    }
} 
```

它工作得很好......有人可以向我解释那里发生了什么以及为什么我的工作似乎很好吗？

编辑：顺便说一句，我知道我没有完全继续 if/else 结构，那是因为我完全专注于我提到的行，而不是 if 结构的其余部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:23:48.637

您这样做的方式很好，但是，它不允许您将任何参数传递给您的方法。

例如，如果您的插件有一个`option`允许您更改工具提示文本选项的方法，您可以这样调用它：

```
$(element).tooltip("option","text","foobar!!"); 
```

如果您删除所有其他代码并使用您的方式执行此操作，则该`option`方法将不会接收`"text"`or`"foobar!!!"`参数。

# bash - Bash 中的音量逐渐增加

> ID：15796266
> 
> 赞同：0
> 
> 时间：2013-04-03T19:27:41.760
> 
> 标签：bash, volume, mplayer

我正在制作一个闹钟，并希望从基本上没有音量开始，并每 2 秒将声音增加一个“等级”/值，直到某个预定义的点不再增加。

截至目前我正在使用`mplayer`（它是一个广播电台，所以我正在运行`mplayer http://66.225.205.192:80`），但我不在乎我使用什么（VLC等））

我的完整代码是

```
while true; do
  mplayer http://66.225.205.192:80
  sleep 1
done 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:48:05.930

谷歌搜索“mplayer 闹钟”实际上会产生很多处理此问题的页面和您可以立即实际使用的解决方案，但无论如何让我们试一试。

```
#!/bin/bash

{
    for ((volume = 0; volume <= 100; volume += 5)); do
        /usr/bin/aumix -v${volume} -w100 >/dev/null
        sleep 2
    done
} &

mplayer http://66.225.205.192:80
echo "good morning! :-)" 
```

你需要 install `aumix`，这里用它来改变音量（当然你也可以用别的）。之间的块在`{` `}`后台运行。该`aumix`命令将 PCM 音量设置为 100%，并以每两秒 5% 的增量逐渐调整主音量，一旦达到 100%，循环结束并退出后台作业。

我从未使用过`aumix`，您可能需要阅读它的手册页以防它无法按预期工作（这是未经测试的）。

`mplayer`在前台运行，直到您退出它，然后它~~会为您煮咖啡以~~热烈的欢迎。

这会让你开始吗？

# rvm - rdiscount “错误：无法构建 gem 原生扩展。”

> ID：15796274
> 
> 赞同：1
> 
> 时间：2013-04-03T19:27:56.053
> 
> 标签：rvm, rdiscount

这很有趣。我有 rdiscount 在一个 rvm gemset 中工作，但是当我尝试将它添加到另一个时，我会得到`ERROR: Failed to build gem native extension.`所以我尝试从原始 gemset 中删除它并重新安装它只是得到相同的错误。我不确定发生了什么。我正在尝试将它与 Jekyll 和 Octopress 构建一起使用。我在 OS X 10.7.5 上。

这是发生的事情：

```
Using /Users/rachelnabors/.rvm/gems/ruby-1.9.2-p290 with gemset jekyll
Can-Opener:RachelNabors.com rachelnabors$ gem install rdiscount
Building native extensions.  This could take a while...
ERROR:  Error installing rdiscount:
    ERROR: Failed to build gem native extension.

    /Users/rachelnabors/.rvm/rubies/ruby-1.9.2-p290/bin/ruby extconf.rb
checking for random()... yes
checking for srandom()... yes
checking for rand()... yes
checking for srand()... yes
checking size of unsigned long... long
checking size of unsigned int... int
no int with size 4
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --without-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/Users/rachelnabors/.rvm/rubies/ruby-1.9.2-p290/bin/ruby
    --with-rdiscount-dir
    --without-rdiscount-dir
    --with-rdiscount-include
    --without-rdiscount-include=${rdiscount-dir}/include
    --with-rdiscount-lib
    --without-rdiscount-lib=${rdiscount-dir}/lib

Gem files will remain installed in /Users/rachelnabors/.rvm/gems/ruby-1.9.2-p290@jekyll/gems/rdiscount-2.0.7.1 for inspection.
Results logged to /Users/rachelnabors/.rvm/gems/ruby-1.9.2-p290@jekyll/gems/rdiscount-2.0.7.1/ext/gem_make.out 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T21:13:13.830

同样的失败： [https ://github.com/rtomayko/rdiscount/issues/48](https://github.com/rtomayko/rdiscount/issues/48)

不支持 Ruby 1.9.2。另见： [https ://github.com/rtomayko/rdiscount/wiki/Support-Matrix](https://github.com/rtomayko/rdiscount/wiki/Support-Matrix)

1.9.3 应该没问题！

# ruby-on-rails - Rails 订单仅适用于

> ID：15796276
> 
> 赞同：1
> 
> 时间：2013-04-03T19:28:02.647
> 
> 标签：ruby-on-rails, rails-activerecord

我在任何地方都找不到这个文档，但这是我的问题：当我通过活动记录查询并使用“only”时，“order”子句被忽略。例如我有一个博客模型：

```
Blog.order('id desc') 
```

首先返回所有具有最高 ID 的博客 - 正如预期的那样，但是：

```
Blog.order('id desc').only(:id) 
```

仅返回 id（如预期的那样）但 order 子句被完全忽略，最小的 id 首先出现。

我已经用 Ruby 1.9.3p327 以及 Rails 4.0.0.beta1 和 Rails 3.2.13 对此进行了测试，我得到了相同的结果。

这是功能还是错误？对我来说这是一个错误，因为 Rails 工作人员大肆宣扬 find_by_sql 并不是真正需要的，但在这种情况下它是：

```
Blog.find_by_sql("select id from blogs order by id desc") 
```

这给出了正确的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:34:21.150

尝试使用[`pluck`](http://guides.rubyonrails.org/active_record_querying.html#pluck)而不是`only`. `only`用于覆盖先前形成的查询链的部分。正如[文档](http://guides.rubyonrails.org/active_record_querying.html#only)所示：

```
Post.where('id > 10').limit(20).order('id desc').only(:order, :where) 
```

结果是：

```
SELECT * FROM posts WHERE id > 10 ORDER BY id DESC 
```

这是因为`limit`修改将被忽略，因为传递给的列表`only`不包括`:limit`.

**更新**

如果您需要返回实际模型对象而不是 id 数组，请使用[`select`](http://guides.rubyonrails.org/active_record_querying.html#selecting-specific-fields)：

```
Blog.order('id desc').select('id') 
```

# iphone - 我想在 ios6 中添加 json 框架并使用它如何从服务器获取数据？

> ID：15796277
> 
> 赞同：-3
> 
> 时间：2013-04-03T19:28:09.537
> 
> 标签：iphone, ios, ipad

我必须从网络服务中检索数据并存储到表格视图中。[我有一个框架，](https://www.dropbox.com/s/fxicf1qknrjy7mg/JSON.zip)但这对我不起作用

这里的问题是使用不允许创建它的创建对象。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T05:32:09.877

您不需要创建 json.h 文件的对象。您只需要导入 json.h 文件，然后通过`[responseString JSONValue]`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T07:55:36.897

检查此代码

```
@interface videoViewController ()

{ 
  NSMutableData *webData;
  NSURLConnection *connection;
  NSMutableArray *array;
  NSMutableArray *array2;  
}

- (void)viewDidLoad
{

  [super viewDidLoad];
  array=[[NSMutableArray alloc]init];
  array2=[[NSMutableArray alloc]init];
  NSURL *url=[NSURL URLWithString:@"http://localhost/videosphp/videoname2.php"];
  NSURLRequest *request=[NSURLRequest requestWithURL:url];
  connection=[NSURLConnection connectionWithRequest:request delegate:self];
  if(connection)
   {
     webData=[[NSMutableData alloc]init];
   }
}

-(void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse     *)response
{
  [webData setLength:0];
}

-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
  [webData appendData:data];
}

-(void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
  UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"alert" message:@"Unable to    connect internet. Please check your internet connection" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
  [alert show];
  return;
}

-(void)connectionDidFinishLoading:(NSURLConnection *)connection
{
  //use NSDictionary if the data in dictionary
  NSArray *allDataArray=[NSJSONSerialization JSONObjectWithData:webData options:0    error:nil];
  for (NSDictionary *diction in allDataArray) 
  {
    NSString *videoname=[diction objectForKey:@"videoname"];
    [array addObject:videoname]; 
  }
  [[self tableview]reloadData];
}

-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
   return 1;   
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
   return [array count];  
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:        (NSIndexPath    *)indexPath
 {
    static NSString *CellIdentifier=@"Cell";
    UITableViewCell *cell=[tableView    dequeueReusableCellWithIdentifier:CellIdentifier];
    if(!cell)
    {
      cell=[[UITableViewCell  alloc]initWithStyle:UITableViewCellAccessoryDisclosureIndicator     reuseIdentifier:CellIdentifier];
    }
    cell.textLabel.text=[array objectAtIndex:indexPath.row];
    return cell;
 } 
```

# javascript - 在 switch 语句中更改图像

> ID：15796285
> 
> 赞同：0
> 
> 时间：2013-04-03T19:28:24.640
> 
> 标签：javascript, image, switch-statement

我的 HTML 中有一张图片，但我想在用户给出答案时更改图片。出于某种原因，第一个功能有效，但图像没有改变..有人可以帮我吗。

到目前为止，这是我的代码：

```
window.onload = function () {
    'use strict';

    var showMessage = function (text) {
        var messageCenter = document.getElementById('messageCenter');
        messageCenter.innerHTML += "<p>" + text + "</p>\n";
    };

    var checkName = function (name) {
        switch (prompt("What is your name?")) {
            case "Leonard":
                showMessage("Leonard! How did I not recognize you! Why would you like to get rid of me!");
                break;
            case "Penny":
                showMessage("Penny Penny Penny! You've got so much to learn.");
                break;
            case "Howard":
                showMessage("Howard, the only one without a Ph.D");
                break;
            case "Raj":
                showMessage("Interesting. You're afraid of insects and women. Ladybugs must render you catatonic!");
                break;
            default:
                showMessage("Well, I'm not familiair with you. I don't like to talk to strange people.");
                break;
        }
    };
    checkName()

    var myImage = document.getElementById('sheldon');
    var checkCase = function (img) {
        switch (img) {
            case "Leonard":
                myImage("verbaasd.jpg");
                break;
            case "Penny":
                myImage("les.jpg");
                break;
            case "Howard":
                myImage("howard.jpg");
                break;
            case "Raj":
                myImage("loser.jpg");
                break;
            default:
                myImage("sheldon.jpg");
                break;
        }
    };
    checkCase()
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T17:07:12.327

你的错误在`myImage()`. 您使用 DOM 对象设置此变量并将其作为普通函数调用。这会给你一个错误。您还忘记了存储名称并将其作为参数传递给您的检查函数。

您的代码应该是：

```
window.onload = function () {
    'use strict';

    var name = prompt("What is your name?");

    var showMessage = function showMessage(text) {
        var messageCenter = document.getElementById('messageCenter');
        messageCenter.innerHTML += "<p>" + text + "</p>\n";
    };

    var checkName = function (name) {
        switch (name) {
            case "Leonard":
                showMessage("Leonard! How did I not recognize you! Why would you like to get rid of me!");
                break;
            case "Penny":
                showMessage("Penny Penny Penny! You've got so much to learn.");
                break;
            case "Howard":
                showMessage("Howard, the only one without a Ph.D");
                break;
            case "Raj":
                showMessage("Interesting. You're afraid of insects and women. Ladybugs must render you catatonic!");
                break;
            default:
                showMessage("Well, I'm not familiair with you. I don't like to talk to strange people.");
                break;
        }
    };
    checkName(name);

    var myImage = function myImage(img) {
        var sheldon = document.getElementById('sheldon');
        sheldon.innerHTML = '<img src="' + img + '"/>';
    };

    var checkCase = function (name) {
        switch (name) {
            case "Leonard":
                myImage("verbaasd.jpg");
                break;
            case "Penny":
                myImage("les.jpg");
                break;
            case "Howard":
                myImage("howard.jpg");
                break;
            case "Raj":
                myImage("loser.jpg");
                break;
            default:
                myImage("sheldon.jpg");
                break;
        }
    };
    checkCase(name);
}; 
```

现在您`myImage()`的功能是在 ID 的容器中插入新图像`sheldon`。

如果您不想为图像创建容器，而是想直接引用图像，可以更改以下`myImage()`函数：

```
 var myImage = function myImage(img) {
        var sheldon = document.getElementById('sheldon');
        sheldon.src = img;
    }; 
```

顺便说一句，我看到您正在学习，所以从基础开始是正确的，但请记住，有更简洁的方法可以做到这一点。

希望对你有帮助。

# html - CSS打破测量的窗口大小

> ID：15796286
> 
> 赞同：0
> 
> 时间：2013-04-03T19:28:25.123
> 
> 标签：html, css, layout, web

我正在设计一个在 Jekyll (-v 0.12.1) 上运行的博客，并遇到一个问题，即测量 index.html 的窗口大小为 1103 像素，然后帖子页面上相同的未更改窗口将测量 1088 像素（使用 XScope）。

这导致标题徽标在页面之间“移动”几个像素，我一生都无法弄清楚原因 - 除了设置边距/宽度会减少帖子页面上的窗口测量值（但是不在索引上）。

## post.html

```
---
layout: default
---

<section class="post">
  <div class="container">
    <article class="centered">

      <header class="post-header">
        <div class="post-meta">{{ page.date | date: "%b %d, %Y" }}</div>
        <h1 class="post-title">
          <a href="{{ page.url }}">{{ page.title }}</a>
        </h1>
      </header>

      <div class="post-body">

      {{ content }}

      </div>

    </article>
  </div>
</section> 
```

## 发布 CSS

```
.post {
  margin-top: 2rem;

  .post-header {
    margin-bottom: 2rem;

    .post-meta {
      margin-bottom: 0.3rem;
      font-family: $font-family-sans;
      color: $light-text-color;
      font-weight: 300;
      text-align: center;
      font-size: 0.8rem;
      text-transform: uppercase;
    }

    .post-title {
      @extend .beta;
      @extend %hN;
      font-family: "proxima-nova-alt-ext-cond", sans-serif;
      text-transform: uppercase;
      text-align: center;
    }
  }
} 

.container {
  width: 85%;
  margin-left: auto;
  margin-right: auto;
  max-width: 63em;
}

.centered {
    max-width: 31rem; 
    width: 80%;
    margin: 0 auto;
    display: block;
} 
```

# android - 撤消/重做整个图像的调整（Android）

> ID：15796287
> 
> 赞同：1
> 
> 时间：2013-04-03T19:28:30.313
> 
> 标签：android, image-processing, processing, undo

**笔记：**

请耐心等待，这（恕我直言）不是十几个关于在绘画/绘图场景中撤消的问题的重复。

**背景：**

我一直在使用 Processing for Android 开发一个图像处理应用程序，现在我正在尝试实现一个简单的一步撤消/重做功能。

我最初（撤消友好）的想法是仅将调整应用于下采样的预览图像，保留一系列调整操作，并在保存时将它们应用于原始图像。我不得不放弃这个想法有两个原因：

*   一些动作需要几秒钟才能完成，如果我们有一些这样的动作，它会使已经很慢的保存过程变得乏味地变慢。

*   当应用于下采样图像而不是全尺寸图像时，某些操作（例如减少颜色噪声）会产生截然不同的（错误）结果。但无论如何，这是一个不太严重的问题......

所以我决定去存储之前/之后的图像。

**问题：**

不幸的是，由于内存限制，无法在内存中缓冲图像。所以我现在正在做的是将之前/之后的图像保存到内部存储中。

但这会造成性能/质量困境：

*   **jpeg**速度很快（即在我的 Xperia Arc S 上节省约 500 毫秒），但在两/三次迭代后质量会下降到无法接受的程度。

*   **png**当然是无损的，但是速度非常慢（要保存约 7000 毫秒），这使得它不切实际。

*   **bmp**我想可能会很快，但是 android 不编码 bmp（我认为 android 的处理将“file.bmp”保存为 tiff）。

*   **tiff**的性能有些可接受（保存约 1500 毫秒），但 android 不解码 tiff。

*   我还尝试使用此函数将**原始**像素数组写入文件：

    ```
    void writeData(String filename, int[] data) {
      try {
        DataOutputStream dos = new DataOutputStream(new BufferedOutputStream(openFileOutput(filename, Context.MODE_PRIVATE)));
        for (int i = 0; i < data.length; i++) {
          dos.writeInt(data[i]);
        }
        dos.close();
      }
      catch (IOException e) {
        e.printStackTrace();
      }
    } 
    ```

    但它需要超过 2000 毫秒才能完成，所以我现在放弃了。

**问题：**

1.  为此目的是否有更快的写入/读取数据的方法？

2.  ...或者我应该回到最初的想法并尝试尽可能多地解决它的问题？

3.  还有其他建议吗？

**更新：**

我想出了这个方法来写原始数据：

```
void saveRAW2(String filename) {
  byte[] bytes = new byte[orig.pixels.length*3];
  orig.loadPixels(); //orig = my original PImage, duh!
  int index = 0;
  for (int i = 0; i < bytes.length; i++) {
    bytes[i++] = (byte)((orig.pixels[index] >> 16) & 0xff);
    bytes[i++] = (byte)((orig.pixels[index] >> 8) & 0xff);
    bytes[i] = (byte)((orig.pixels[index]) & 0xff);
    index++;
  }
  saveBytes(filename, bytes);
} 
```

...完成时间不到 1000 毫秒。

如果我将文件写入我的 SD 卡上，它的运行速度会快 3 倍，但我想我不能指望它在每部手机上都相同。正确的？

无论如何，我正在使用这种方法将保存的数据读回 orig.pixels：

```
void loadRAW(String filename) {
  byte[] bytes = loadBytes(filename);
  int index = 0;
  int count = bytes.length/3;
  for (int i = 0; i<count; i++) {
    orig.pixels[i] = 
      0xFF000000 |
      (bytes[index++] & 0xff) << 16 |
      (bytes[index++] & 0xff) << 8 |
      (bytes[index++] & 0xff);
  }
  orig.updatePixels();
} 
```

这需要大约 1500 毫秒才能完成。有什么优化的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T20:04:18.833

我建议找出Android“暂存盘”区域是什么，并将您的图像处理为图块，将它们缓存在该暂存盘上。这可能比直接使用内存要慢一些，但这意味着您可以在不遇到内存限制的情况下进行图像编辑，并且（如果 Android 的 SDK 具有合理的 API），将图块写入完整文件应该不会花费太多时间. 也就是说，您已经从“处理”转移到纯 Java，所以问题不再是关于处理的问题了......我的回答可能不如非常熟悉 Android SDK 的人好

# android - 如何为 ARM 交叉编译 OpenSSH？

> ID：15796291
> 
> 赞同：4
> 
> 时间：2013-04-03T19:28:39.993
> 
> 标签：android, android-ndk, arm, cross-compiling, openssh

我正在尝试使用 Android NDK 编译 OpenSSH，但失败了。

我的尝试包括以下步骤：

1.  交叉编译 OpenSSL for Android 并将头文件/库安装到`/home/me/arm`

2.  [从这里](http://ftp.openbsd.org/pub/OpenBSD/OpenSSH/portable/openssh-6.2p1.tar.gz)获取 OpenSSH 6.2p1

3.  提取存档并运行`./configure`：

    ```
    ./configure --prefix=/home/me/arm \
            --host=arm-linux-androideabi \
            --with-ssl-dir=/home/me/arm
    ```

    ...导致以下错误：

    ```
    getrrsetbyname.c:166:2：错误：未知类型名称'HEADER'
    ```

4.  修改`./configure`命令以包括：

    ```
    ac_cv_search_getrrsetbyname=是
    ```

    ...解决了一个问题，但仍然因另一个错误而中止：

    ```
    /usr/include/linux/un.h:17:8: 错误: 'struct sockaddr_un' 的重新定义
    ```

5.  *再次*修改`./configure`命令以包括：

     *```
    ac_cv_header_sys_un_h=是
    ```

    ...这让我更进一步，但*仍然*因错误而中止：

    ```
    channels.c：在函数“channel_prepare_select”中：
    channels.c:2143:2：警告：函数“多少”的隐式声明
    [-Wimplicit-function-declaration]
    channels.c:2145:45: error: 'fd_mask' undeclared (首先在这个函数中使用)
    ```* 

 *现在我被困住了。我已经破解了打开的 Android`sys/select.h`并发现它[`fd_mask`在任何地方都没有定义](https://github.com/libevent/libevent/blob/master/select.c#L63)。我也找不到`./configure`解决此问题的选项。还有`howmany()`未定义的问题。

我需要进行哪些更改才能使程序编译？

* * *

**编辑：**我现在已经设法走得更远了。我添加了以下行`./configure`来克服“未定义`fd_mask`”错误：

```
--with-cflags=-Dfd_mask=int
```

然后我收到以下错误：

```
错误：“struct passwd”没有名为“pw_gecos”的成员
```

Android 的`passwd`结构没有`pw_gecos`成员。如果不为源代码创建一个实际的补丁，这是不可能纠正的。补丁在[这里](https://github.com/nathan-osman/AndroX/blob/ad64b792791e1088e40444037402605e17949865/src/patch/openssh.patch)。

我现在遇到以下错误：

```
dns.c：在函数“dns_result_totext”中：
dns.c:56:7: error: 'ERRSET_SUCCESS' undeclared (第一次在这个函数中使用)
dns.c:56:7：注意：每个未声明的标识符仅报告一次
  它出现的功能
dns.c:58:7: error: 'ERRSET_NOMEMORY' undeclared (第一次在这个函数中使用)
...
```

* * *

**编辑：**我对上面的补丁做了一些修改，到目前为止消除了很多错误。我也加了`ldns`。配置命令现在看起来像这样：

```
补丁 -p0 <openssh.patch;
自动配置；
./configure --prefix=/home/me/arm \
            --host=arm-linux-androideabi \
            --with-ldns=/home/me/arm\
            --with-ssl-dir=/home/me/arm \
            ac_cv_header_sys_un_h=是
```

...[这](https://github.com/nathan-osman/AndroX/blob/811f0c28abf1f9e95d24d79a6d79728025241b04/src/patch/openssh.patch)是新补丁。我现在得到的错误是：

```
loginrec.c：在函数“construct_utmp”中：
loginrec.c:665:17: error: 'DEAD_PROCESS' undeclared (first use in this function)
loginrec.c:665:17：注意：每个未声明的标识符仅报告一次
  它出现的每个函数
loginrec.c：在顶层：
loginrec.c:727:45：警告：在参数列表中声明了“struct utmpx”
  [默认启用]
```*

# apache - 创建一个类似“teach.joshhornby.co.uk”的网址

> ID：15796294
> 
> 赞同：-1
> 
> 时间：2013-04-03T19:29:03.063
> 
> 标签：apache, url, hosting, virtualhost

我正在尝试在我的服务器上创建一个 URL，例如上面的那个`teach.joshhornby.co.uk`

当人们输入地址时，我希望他们访问我的服务器上称为后端的文件夹。

我已经在 http.d 文件的虚拟主机中尝试过这个

```
<VirtualHost *:80>
DocumentRoot /var/www/html/backend
ServerName www.teach.joshhornby.co.uk

# Other directives here

</VirtualHost> 
```

当我在浏览器中输入此 URL 时，没有任何反应。我拥有 joshhornby.co.uk 所以理论上应该能够创建一个子域。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:49:36.807

您可能需要更多目录指令，例如：

```
<VirtualHost *:80>
DocumentRoot /var/www/html/backend
ServerName www.teach.joshhornby.co.uk
<Directory /var/www/html/backend>
Allow from all
Options +Indexes
</Directory>
</VirtualHost> 
```

否则，您是否为子域创建了 DNS 条目？从命令行，你能 ping www.teach.joshhornby.co.uk 吗？如果不是，浏览器将不知道 www.teach.joshhorny.co.uk 使用哪个 IP。您可以在您的域名注册商处解决这个问题，为teaching.joshhornby.co.uk 和 www.teach.joshhorny.co.uk 添加一条 A 记录，并将值设置为您服务器的 IP。

# visual-studio-2010 - Visual Studio 2012：在构建时运行 Web 性能

> ID：15796295
> 
> 赞同：0
> 
> 时间：2013-04-03T19:29:06.843
> 
> 标签：visual-studio-2010, visual-studio-2012, build, performance-testing

我是 Visual Studio 的新手，这可能很容易做到，但我已经研究了将近一周，但没有得到任何结果。

问题是我正在尝试对 TFS 下的 Visual Studio 2010 中的 Web 项目进行一些 QA。我已经记录并编码了我的一些测试，但是当任何开发人员进行新签入时，我需要运行这些测试。

我已经阅读了一些来自 MSDN 的操作指南，但是这个逐步演练对于 Web 性能测试来说不够具体。

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T10:10:34.473

在您的情况下，您需要编辑构建定义以包括构建验证测试（BVT）：这些测试可以检查构建后和部署后。

Web 性能测试、负载测试、编码 UI 测试……对于 TFS 来说完全一样：运行一些代码来检查某些内容。

好的起点就[在这里](http://msdn.microsoft.com/en-us/library/ms182465.aspx)。

# xpath - xpath条件匹配可能吗？

> ID：15796301
> 
> 赞同：1
> 
> 时间：2013-04-03T19:29:23.160
> 
> 标签：xpath

好的，基本上我正在尝试使用 XPath 来查找“给定条件”的匹配项。基本上，使用以下 xml：

```
 <stuff1>
   <stuff2>abc</stuff2>
 </stuff1>
 <stuff3>
   <stuff4>abc</stuff4>
   <stuff5>true</stuff5>
 </stuff3>
 <stuff3>
   <stuff4>abc</stuff4>
   <stuff5>false</stuff5>
   <stuff6>extra stuff</stuff6>
 </stuff3> 
```

我想做的是根据 stuff2==stuff4 选择与 stuff3 匹配的 stuff1，但同时也选择 stuff3 的“stuff5”值为 false，但不是 true。

我知道`//stuff1[stuff2/text()=../stuff3/stuff4/text()]`会选择与 stuff3 匹配的 stuff1，但是如何指定 stuff3 的 stuff5 值必须为 false？抱歉，如果这是基本的或在其他地方回答的，随机搜索似乎不容易揭示答案。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T19:37:26.727

你快到了，如果你只想匹配值为 false`stuff3`的元素`stuff5`，你可以通过将谓词添加`[stuff5/text()="false"]`到`stuff3`匹配中来做到这一点。

完整的 XPath 应该如下所示：

`//stuff1[stuff2/text()=../stuff3[stuff5/text()="false"]/stuff4/text()]`

# struts2 - 使用 maven jetty 插件更改生成的战争名称

> ID：15796302
> 
> 赞同：0
> 
> 时间：2013-04-03T19:29:27.880
> 
> 标签：struts2, jetty, maven-3, pom.xml, maven-jetty-plugin

我正在使用 maven Struts2 空白工件来创建我的 Web 应用程序。这是我的 pom.xml ：-

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>com.website.my</groupId>
<artifactId>MyArtifact</artifactId>
<version>3</version>
<packaging>war</packaging>
<name>My Artifact</name>

<properties>
    <struts2.version>2.3.12</struts2.version>
</properties>

<dependencies>

    <dependency>
        <groupId>org.apache.struts</groupId>
        <artifactId>struts2-core</artifactId>
        <version>${struts2.version}</version>
    </dependency>

    <dependency>
        <groupId>org.apache.struts</groupId>
        <artifactId>struts2-config-browser-plugin</artifactId>
        <version>${struts2.version}</version>
    </dependency>

    <dependency>
        <groupId>org.apache.struts</groupId>
        <artifactId>struts2-junit-plugin</artifactId>
        <version>${struts2.version}</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>commons-logging</groupId>
        <artifactId>commons-logging</artifactId>
        <version>1.1.1</version>
    </dependency>

    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.5</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>2.4</version>
        <scope>provided</scope>
    </dependency>

    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>jsp-api</artifactId>
        <version>2.0</version>
        <scope>provided</scope>
    </dependency>

</dependencies>

<build>
    <plugins>
        <plugin>
            <groupId>org.mortbay.jetty</groupId>
            <artifactId>jetty-maven-plugin</artifactId>
            <version>8.1.7.v20120910</version>
            <configuration>
                 <war>C:\Users\pranay\Documents\GitHub\MyArtifact\target\myWeb.war</war>                    
                <stopKey>CTRL+C</stopKey>
                <stopPort>8999</stopPort>
                <systemProperties>
                    <systemProperty>
                        <name>log4j.configuration</name>
                        <value>/Users/lukaszlenart/Projects/Apache/STRUTS_2_3_12/target/checkout/archetypes/struts2-archetype-blank/src/main/resources/log4j.properties</value>
                    </systemProperty>
                    <systemProperty>
                        <name>slf4j</name>
                        <value>false</value>
                    </systemProperty>
                </systemProperties>
                <scanIntervalSeconds>10</scanIntervalSeconds>
                <webAppSourceDirectory>/Users/lukaszlenart/Projects/Apache/STRUTS_2_3_12/target/checkout/archetypes/struts2-archetype-blank/src/main/webapp/</webAppSourceDirectory>
               <webApp>
                    <contextPath>/MyArtifact</contextPath>
                    <descriptor>C:\Users\Pranay\Documents\GitHub\MyArtifact\src\main\webapp\WEB-INF</descriptor>
                </webApp>
            </configuration>
            <dependencies>
                <dependency>
                    <groupId>log4j</groupId>
                    <artifactId>log4j</artifactId>
                    <version>1.2.17</version>
                </dependency>
            </dependencies>
        </plugin>
    </plugins>
</build> 
```

上面的 pom.xml 使用码头服务器创建战争文件。所以当我运行 mvn jetty:war-run 然后它创建名为 MyArtifact-3.war(artifactId-version) 的战争文件，但我希望我的战争文件名为 myWeb 。战争。我在 pom.xml 的配置中使用了*战争*标签来指定我想要的战争名称（根据此链接[http://www.eclipse.org/jetty/documentation/current/jetty-maven-plugin.html#running-assembled- webapp-as-war](http://www.eclipse.org/jetty/documentation/current/jetty-maven-plugin.html#running-assembled-webapp-as-war)）。但是，它不起作用。请让我知道如何更改生成的战争文件名。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T19:38:02.467

很简单，只需覆盖该[`<finalName>`](http://maven.apache.org/pom.html#The_BaseBuild_Element_Set)值。

```
<project>
  <build>
    <finalName>${project.artifactId}</finalName>
  </build>
</project> 
```

# github-api - 通过 github-api 获取所有 GitHub 用户

> ID：15796304
> 
> 赞同：13
> 
> 时间：2013-04-03T19:29:37.660
> 
> 标签：github-api

GitHub API 文档说 url

[https://api.github.com/users](https://api.github.com/users)

将按照他们注册的顺序给所有用户，但我似乎只得到前 135 个。

任何想法如何获得真正的完整列表？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-03T19:31:41.827

请`since`在您的 GET 请求中使用参数。

```
https://api.github.com/users?since=XXX 
```

可能这样做是为了限制处理此类请求所需的资源。没有这样的限制，它只是要求[DoS](https://en.wikipedia.org/wiki/Denial-of-service_attack)攻击。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T19:32:32.873

如果您检查该请求的响应标头，Github 在标头下提供分页链接`Links`

```
Link: <https://api.github.com/users?since=135>; rel="next", <https://api.github.com/users{?since}>; rel="first" 
```

我相信自从他们的 api `v3`Github 一直在向超媒体 api 发展。

[Github 超媒体 API](http://developer.github.com/v3/#hypermedia)

**编辑**

这超出了这个问题的范围，但它是相关的。了解有关超媒体 API 和 REST 的更多信息。看看 Steve Klabnik 的这些幻灯片

[http://steveklabnik.github.com/hypermedia-presentation/#1](http://steveklabnik.github.com/hypermedia-presentation/#1)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T16:36:07.150

现有的两个答案都是 100% 正确的，但我建议您对碰巧使用的任何语言使用包装器。其中有很多，并且有一个用于 ruby​​ 的官方答案（Octokit）。这是所有这些的[列表](http://developer.github.com/v3/libraries/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-08T23:08:10.077

您可以像这样过滤[`type:user`](https://docs.github.com/en/github/searching-for-information-on-github/searching-users#search-only-users-or-organizations)：

```
[https://api.github.com/search/users?q=type:user](https://api.github.com/search/users?q=type%3Auser) 
```

**另请参阅**：[GitHub API 获取用户/组织总数](https://stackoverflow.com/q/47502683/1366033)

# android - XmlResourceParser 为空？

> ID：15796310
> 
> 赞同：1
> 
> 时间：2013-04-03T19:29:48.183
> 
> 标签：android, xml, xml-parsing

我目前正在创建一个 android 应用程序，并且我有一个供用户选择的列表，并且我希望旁边的每个项目都有一个图像。我为列表创建了一个适配器，并为列表创建了一个单独的 list_row 布局。

列表的实际数据存储在本地 res/xml/data.xml 中，如下所示：

```
<dataset>

    <data>
        <name>all</name>
        <image>all</image>
    </data>
    <data>
        <name>car</name>
        <image>car</image>
    </data>

</dataset> 
```

现在，在此列表的主要活动中，我尝试从本地源解析 XML 数据，然后将其作为字符串传递给 Document 元素并处理数据。我已经调试了这个问题，并注意到下面的行不起作用，因为设置的字符串为空：

```
XmlResourceParser parserXml = getResources().getXml(R.xml.data);
String xmlString = parserXml.getText(); 
```

解析数据的完整代码如下：

```
 XmlResourceParser parserXml = getResources().getXml(R.xml.dresses);
    String xmlString = parserXml.getText(); // getting XML from URL

XMLParser parser = new XMLParser();
    Document doc = parser.getDomElement(xmlString); // getting DOM element

    NodeList nl = doc.getElementsByTagName(KEY_DATA);

    for (int i = 0; i < nl.getLength(); i++) {

        HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element) nl.item(i);

        map.put(KEY_NAME, parser.getValue(e, KEY_NAME));
        map.put(KEY_IMAGE, parser.getValue(e, KEY_IMAGE));

        dataInfo.add(map);
    } 
```

任何人都可以帮我解决这个问题，在此先感谢:)

编辑.....

我也尝试过按照建议使用 XmlPullParser 方法，但我仍然遇到相同的问题，即 String 为空。我使用的代码如下：

```
XmlPullParser xpp = this.getResources().getXml(R.xml.data);
String xmlString1 = xpp.getText(); 
```

如果这有帮助，我在下面包含了整个文件：

```
public class Dresses extends Activity {

    static final String KEY_DATA = "dress"; // parent node
    static final String KEY_NAME = "name";
    static final String KEY_IMAGE = "image";

    ListView list;
    ItemTypeAdapter adapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        ArrayList<HashMap<String, String>> itemTypes = new ArrayList<HashMap<String, String>>();

        XmlPullParserFactory factory;
        try {
            factory = XmlPullParserFactory.newInstance();
            factory.setNamespaceAware(true);
        } catch (XmlPullParserException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }

        XmlPullParser xpp = this.getResources().getXml(R.xml.data);
        String xmlString1 = xpp.getText();
            Log.d("Testing Type List Data: ", xmlString1);

        XmlResourceParser parserXml = getResources().getXml(R.xml.data);
        String xmlString = parserXml.getText(); // getting XML from URL
        Log.d("Type List Data: ", xmlString);

        XMLParser parser = new XMLParser();
        Document doc = parser.getDomElement(xmlString); // getting DOM element

        NodeList nl = doc.getElementsByTagName(KEY_DATA);

        for (int i = 0; i < nl.getLength(); i++) {

            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nl.item(i);

            map.put(KEY_NAME, parser.getValue(e, KEY_NAME));
            map.put(KEY_IMAGE, parser.getValue(e, KEY_IMAGE));

            itemTypes.add(map);
        }

        list=(ListView)findViewById(R.id.list);

        // Getting adapter by passing xml data ArrayList
        adapter=new ItemTypeAdapter(this, itemTypes);
        list.setAdapter(adapter);

        // listening to single list item on click
        list.setOnItemClickListener(new OnItemClickListener() {
          public void onItemClick(AdapterView<?> parent, View view,
              int position, long id) {

              // selected item
              String type = ((TextView) view).getText().toString();

              // Launching new Activity on selecting single List Item
              Intent i = new Intent(getApplicationContext(), ItemListActivity.class);
              // sending data to new activity
              i.putExtra("type", type);
              startActivity(i);

          }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.data, menu);
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:43:12.667

确保您在活动中调用它。如果它仍然不起作用，那么也尝试使用用户 XmlPullParserFactory

```
XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
    factory.setNamespaceAware(true);

    XmlPullParser xpp = context.getResources().getXml(R.xml.data);

    int eventType = xpp.getEventType();
    while (eventType != XmlPullParser.END_DOCUMENT) {
     if(eventType == XmlPullParser.START_DOCUMENT) {
         System.out.println("Start document");
     } else if(eventType == XmlPullParser.START_TAG) {
         System.out.println("Start tag "+xpp.getName());
     } else if(eventType == XmlPullParser.END_TAG) {
         System.out.println("End tag "+xpp.getName());
     } else if(eventType == XmlPullParser.TEXT) {
         System.out.println("Text "+xpp.getText());
     } else if(eventType == XmlPullParser.TEXT) {
     }
     eventType = xpp.next();
    }
    System.out.println("End document"); 
```

这对我有用

```
package com.example.test4;

import java.io.IOException;

import org.xmlpull.v1.XmlPullParser;
import org.xmlpull.v1.XmlPullParserException;
import org.xmlpull.v1.XmlPullParserFactory;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.widget.ListView;

public class MainActivity extends Activity {

   static final String KEY_DATA = "dress"; // parent node
   static final String KEY_NAME = "name";
   static final String KEY_IMAGE = "image";

   ListView list;

   // ItemTypeAdapter adapter;

   @Override
   public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.activity_main);

      XmlPullParserFactory factory = null;
      try {
         factory = XmlPullParserFactory.newInstance();
      } catch (XmlPullParserException e) {
         // TODO Auto-generated catch block
         e.printStackTrace();
      }
      factory.setNamespaceAware(true);

      XmlPullParser xpp = getResources().getXml(R.xml.data);

      int eventType = 0;
      try {
         eventType = xpp.getEventType();
      } catch (XmlPullParserException e) {
         // TODO Auto-generated catch block
         e.printStackTrace();
      }
      while (eventType != XmlPullParser.END_DOCUMENT) {
         if (eventType == XmlPullParser.START_DOCUMENT) {
            System.out.println("Start document");
         } else if (eventType == XmlPullParser.START_TAG) {
            System.out.println("Start tag " + xpp.getName());
         } else if (eventType == XmlPullParser.END_TAG) {
            System.out.println("End tag " + xpp.getName());
         } else if (eventType == XmlPullParser.TEXT) {
            System.out.println("Text " + xpp.getText());
         } else if (eventType == XmlPullParser.TEXT) {
         }
         try {
            eventType = xpp.next();
         } catch (XmlPullParserException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
         } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
         }
      }
      System.out.println("End document");

   }

   @Override
   public boolean onCreateOptionsMenu(Menu menu) {
      getMenuInflater().inflate(R.menu.activity_main, menu);
      return true;
   }
} 
```

这是输出

```
04-05 14:37:08.690: I/System.out(27153): Start document
04-05 14:38:48.185: I/System.out(27153): Start document
04-05 14:39:30.795: I/System.out(27153): Start tag dataset
04-05 14:40:09.540: I/System.out(27153): Start tag data
04-05 14:40:09.540: I/System.out(27153): Start tag name
04-05 14:40:09.540: I/System.out(27153): Text all
04-05 14:40:09.540: I/System.out(27153): End tag name
04-05 14:40:09.540: I/System.out(27153): Start tag image
04-05 14:40:09.540: I/System.out(27153): Text all
04-05 14:40:09.540: I/System.out(27153): End tag image
04-05 14:40:09.540: I/System.out(27153): End tag data
04-05 14:40:09.540: I/System.out(27153): Start tag data
04-05 14:40:09.545: I/System.out(27153): Start tag name
04-05 14:40:09.545: I/System.out(27153): Text car
04-05 14:40:09.550: I/System.out(27153): End tag name
04-05 14:40:09.550: I/System.out(27153): Start tag image
04-05 14:40:09.550: I/System.out(27153): Text car
04-05 14:40:09.550: I/System.out(27153): End tag image
04-05 14:40:09.550: I/System.out(27153): End tag data
04-05 14:40:09.550: I/System.out(27153): End tag dataset
04-05 14:40:09.555: I/System.out(27153): End document 
```

res/xml/data.xml 中的 data.xml

```
<?xml version="1.0" encoding="utf-8"?>
<dataset>
    <data>
        <name>all</name>
        <image>all</image>
    </data>
    <data>
        <name>car</name>
        <image>car</image>
    </data>
</dataset> 
```

# mysql - 优化复杂 GROUP BY 查询的性能

> ID：15796319
> 
> 赞同：0
> 
> 时间：2013-04-03T19:30:19.553
> 
> 标签：mysql, sql, database-performance

有没有办法优化以下查询。大约需要 11 秒：

```
SELECT 
    concat(UNIX_TIMESTAMP(date), '000') as datetime, 
    TRUNCATE(SUM(royalty_price*conversion_to_usd*
             (CASE WHEN sales_or_return = 'R' THEN -1 ELSE 1 END)*
             (CASE WHEN royalty_currency = 'JPY' THEN .80 
                   WHEN royalty_currency in ('AUD', 'NZD') THEN .95 ELSE 1 END) )
    ,2) as total_in_usd
FROM 
    sales_raw 
GROUP BY
    date 
ORDER BY
    date ASC 
```

做一个解释我得到：

```
1   SIMPLE  sales_raw   index   NULL    date    5   NULL    735855  NULL 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T19:54:09.997

这是评论中问题的答案。它在这里的格式更好：

过滤一组索引日期的示例意味着执行以下操作：

```
where date >= AStartDateVariable
and date < TheDayAfterAnEndDateVariable 
```

如果日期字段上没有索引，则创建一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T19:55:44.357

您也许可以加快速度。您似乎对`date`. 发生的事情是在索引中读取行，然后查找每一行。如果数据不是按日期字段排序的，那么这可能不是最佳的，因为读取将在本质上是随机页面。在原始表不适合内存的情况下*，*这会导致称为“页面抖动”的情况。需要一条记录，从内存中读取该页面（在内存缓存中替换另一个页面），并且下一次读取也可能导致缓存未命中。

要查看是否发生这种情况，我会建议两件事之一。(1) 尝试删除索引`date`或将`group by`条件切换为`concat(UNIX_TIMESTAMP(date), '000')`。其中任何一个都应该删除索引作为一个因素。

从您的附加评论来看，这并没有发生，尽管索引的好处似乎很小。

(2) 您还可以扩展索引以包含查询中使用的所有表。除日期外，该指数还需要包含版税_价格、转换为美元、销售或退货和版税_货币。这将允许索引完全满足查询，而无需在页面中查找其他信息。

您还可以与您的 DBA 确认您有足够大的页面缓存来匹配您的硬件功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T21:02:13.657

这是一个简单的 group by 查询，甚至不涉及连接。我希望问题出在您正在使用的功能上。

请从一个简单的查询开始，仅检索日期和 conversion_to_usd 的总和。检查性能并逐步建立查询，始终检查性能。很快就能发现罪魁祸首。

Concats 通常是缓慢的操作，但我想知道 sum 之后的 truncate 是否会使优化器感到困惑。第二种情况可以通过使用带有货币代码表和相应百分比的连接来代替，但它并不明显会产生很大的不同。首先找出罪魁祸首。

您还可以存储具有正确数量的值，但这会引入非规范化。

# macos - 如何将 libgit2 编译成 OSX 应用程序包？

> ID：15796320
> 
> 赞同：2
> 
> 时间：2013-04-03T19:30:23.600
> 
> 标签：macos, unity3d, libgit2

OSX 对 Window 的 .DLL 文件的回答是一个“捆绑包”，或者我一直在阅读，但我不太清楚如何开始将 libgit2 构建成可用的东西。

我通常在 Windows 上工作，并且正在开发一组将在[Unity3D](http://www.unity3d.com/)中使用的插件。到目前为止，插件采用 Windows .DLL 文件的形式。但是，在 Mac 上使用 Unity3D 工作的开发人员无法使用该插件，因为它依赖于构建为[libgit2 的 git2.dll 的](https://github.com/libgit2/libgit2)本机代码。

根据 Unity3D 关于[为桌面平台构建插件](http://docs.unity3d.com/Documentation/Manual/PluginsForDesktop.html)的文档，我需要以某种方式构建一个原生的`bundle`. 说明指向使用 XCode 执行设置捆绑项目的任务，但是在如何构建它时我似乎迷失了方向。

根据 libgit2 项目页面上的文档，我可以使用该`CMake GUI`实用程序

> [...]生成特定于平台的构建项目或 IDE 工作区

但是，生成的 XCode 项目似乎不是一个`bundle project`，而是某种其他类型的项目，至少就我的目的而言，它是“垃圾文件”。

Unity3D 描述的捆绑包的预期格式是什么？

我怎样才能“混合-n-匹配”，从而可以构建一个 XCode 捆绑项目，只需从项目中的 libgit2 存储库中删除所需的文件，然后点击构建以获得我之前的问题中请求的格式?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T21:58:34.960

Windows 上的 DLL 是一个动态库，类似于`.dylib`Mac OS 上的。`.dylib`CMake 规则将在 Mac OS 上创建一个。

使用默认的 gcc 目标：

```
% git clone https://github.com/libgit2/libgit2
% cd libgit2
% mkdir build
% cd build
% cmake ..
% make -j8
% ls -Flas libgit2*.dylib
1348 -rwxr-xr-x  1 ethomson  staff  1379120 Apr  3 16:55 libgit2.0.17.0.dylib*
   4 lrwxr-xr-x  1 ethomson  staff       20 Apr  3 16:55 libgit2.0.dylib@ -> libgit2.0.17.0.dylib
   4 lrwxr-xr-x  1 ethomson  staff       15 Apr  3 16:55 libgit2.dylib@ -> libgit2.0.dylib 
```

如果您使用 XCode 而不是 gcc/clang 目标，这应该是您正在构建的目标的目录。就我而言，`Debug`.

# ios - ios-“交换” UIViews 可能吗？

> ID：15796324
> 
> 赞同：2
> 
> 时间：2013-04-03T19:30:36.240
> 
> 标签：ios, views

这是我的代码：

```
if([pantallas objectForKey:par]){
    UIView *vista= [[UIView alloc] initWithFrame:self.Botones.frame];
    vista.backgroundColor= [UIColor brownColor];

    CGSize la=  CGSizeMake(50,60);
    int cuantos= [part2 count];
    NSArray *arr= [COLGenerales tileN:cuantos RectsOfSize:la  intoSpaceOf:vista.frame withMaxPerRow:5 spaceVertical:10 spaceHorizontal:10];
    for(int j=0; j<cuantos; j++){
        UIButton *bot= [[UIButton alloc] initWithFrame:[[arr objectAtIndex:j] CGRectValue]];
        bot.tag=j;
        bot.titleLabel.text=par;
        bot.titleLabel.hidden=true;
        bot.imageView.image = [UIImage imageNamed:[[part2 allKeys] objectAtIndex:j]];
        [bot addTarget:self action:@selector(registrar:) forControlEvents:UIControlEventTouchDown];
        [vista addSubview:bot];

    }

    [pantallas setObject:vista forKey:par];

   self.Botones= vista; 
    }else{
    self.Botones= [pantallas objectForKey:par];
} 
```

Botones 是嵌入到该类控制的视图中的简单视图（首先由 Nib 文件发起），COLGenerales 的类方法返回一个编码为 NSValues 的 CGRects 数组，registrar: 是一个本地方法。

一切都已正确设置（我已经用调试器彻底检查了这一点）。视图已成功创建、设置并添加到字典中。

但是，我绝对不会改变实际的屏幕。我什至包括了背景颜色更改，只是为了检查按钮是否存在某种问题。没有。对此有什么建议的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:25:43.140

我建议使用包含这两个视图的 UINavigation 控制器。

您可以参考此链接[Swaping between UIViews in one UIViewController](https://stackoverflow.com/questions/2003318/swapping-between-uiviews-in-one-uiviewcontroller)

基本上，您创建一个视图，为第一个视图 removeSubview，然后使用 addSubview 添加第二个视图！[view1 removeFromSuperview];

[self.view addSubview: view2];

其他参考来源： [切换/交换视图的简单、干净的方法？](https://stackoverflow.com/questions/4982287/an-easy-clean-way-to-switch-swap-views)

[如何在简单的 View iPhone App 上为 View Swap 设置动画？](https://stackoverflow.com/questions/983598/how-to-animate-view-swap-on-simple-view-iphone-app)

希望这会有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T20:25:59.040

作为 IBOutlet 的属性与视图层次结构没有内在联系——它只使从 xib 填充该属性成为可能。当您设置 self.Botones 时，您需要执行以下操作：

```
[self.Botones removeFromSuperview];
self.Botones = newValue;
[self.BotonesSuperview addSubview:self.Botones]; 
```

如果您`self.Botones`在很多地方更新，并且您总是希望更改反映在屏幕上，您可以将其添加到 setter 实现中：

```
-(void)setBotones:(UIView*)newValue {
    if (newValue != _Botones) {
        [_Botones removeFromSuperview];
        _Botones = newValue;
        [self.BotonesSuperview addSubview:_Botones];
    }
} 
```

# java - Java 数组是如何处理的？

> ID：15796326
> 
> 赞同：0
> 
> 时间：2013-04-03T19:30:41.970
> 
> 标签：java, arrays

首先，总结一下：我正在解决 CodingBat.com 上的一些基本问题（对于初学者或像我这样生疏的人来说是好东西），并决定以“新”方式循环遍历数组。

我说我“生锈了”。

**这有效：**

```
public int arrayCount9(int[] nums) {
  int b=0;
  for(int i=0; i<nums.length;i++){
    if(nums[i]==9) b++;
  }
  return b;
} 
```

**这不起作用：**

```
public int arrayCount9(int[] nums) {
  int b=0;
   for(int i: nums){
     if(nums[i]==9) b++;
   }
  return b;
} 
```

错误：异常：java.lang.ArrayIndexOutOfBoundsException：9（行号：4）

**所以问题是 if(nums[i]==9) b++; **

所以我的问题是：

**1)** **有什么问题？**

**2)** **有人有规格参考吗？**

关于#2，我试过谷歌搜索，但没有找到我要找的东西，即使有教程，我也无法完全掌握下面的巫术。

我提前谢谢你。

编辑 [相关问题的链接](http://codingbat.com/prob/p184031)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T19:32:15.497

您将迭代值用作索引。它应该是：

```
for(int i: nums){
    if(i==9) b++;
} 
```

因此，如果您的值大于数组中的数组大小，则会出现索引越界异常。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T19:33:28.737

您对 for each 循环的工作方式感到困惑。
这样做，看看你是否能找出问题所在

```
 for(int i: nums){
     System.out.println(i);
   } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-03T19:33:04.507

当您以“新方式”使用它时，您不再需要访问数组，您已经拥有循环内每个项目的引用。

```
public int arrayCount9(int[] nums) {
  int b=0;
   for(int i: nums){
     if(i == 9) b++;
   }
  return b;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T19:35:19.827

请参阅规范的这一部分：

[http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#d5e17093](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#d5e17093)

它会解释这一切。增强的 for 循环将立即从迭代器返回值，因此您的 'i' 实际上是数组值而不是索引。

# css - 即使设置了文本装饰，下划线仍然显示

> ID：15796329
> 
> 赞同：1
> 
> 时间：2013-04-03T19:30:46.347
> 
> 标签：css, text-decorations

即使我已将 text-decoration 设置为 none，h1 元素上仍会显示下划线。如果您想查看完整的 css，请转到[此处](http://pastebin.com/rUVst9dL)。我是css新手，这只是我在互联网上找到的一些代码的改编版本，如果问题很明显，对不起。如果问题不在于下面的代码（我认为可能是这样），那么我将添加其他相关代码。

您可以在[此处查看正在处理的页面](http://www.codebundle.net/)

```
#pagetop h1 , a:visited
{
    display:block;
    float:left;
    line-height:90px;
    color:#FFFFFF;
    text-align:left;
    font-size:27px;
    font-weight:bold;
    font-family:Arial, Helvetica, sans-serif;
    float:left;
    margin-left:23px;
    text-decoration:none;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:33:51.793

h1 标记中的链接中有文本装饰。添加此样式：

```
h1 a
{
text-decoration:none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T19:37:09.520

您的 CSS 选择器`#pagetop h1 , a:visited`表明您希望将这些样式应用于 an`h1`以及`a`处于访问状态的 an。

代码中的逗号表示单独选择器的列表，而不是组合选择器。在您的情况下，您不需要分别为`h1`和指定相同的样式`a`。

您要选择的是an within`a`的后代（因此它不适用于所有s）：`h1``#pagetop``h1`

```
#pagetop h1 a { text-decoration: none; } 
```

# php - 使用 PHP CURL 的参数丢失或未作为 JSON 数组发送

> ID：15796330
> 
> 赞同：0
> 
> 时间：2013-04-03T19:30:47.223
> 
> 标签：php, json, curl

错误：

```
{"jsonrpc":"2.0","id":0,"error":{"code":1,"message":"Parameters missing or not sent as an JSON array. "}} 
```

我的代码：

```
<?php

$ch = curl_init();
curl_setopt($ch, CURLOPT_HTTPHEADER, array("Content-Type: application/json","Accept: text/plain, */*; q=0.01")); 
curl_setopt($ch, CURLOPT_URL, 'http://example.com/rpc/ClientApi?_session=XX');
curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode(array('method' => 'AdsApi.giveAdLifeByCategory','params' => '["Ads4Life"]', 'id' => '0')));
curl_setopt($ch, CURLOPT_POST, 1); 
$result = curl_exec($ch);

?> 
```

我正在尝试模仿这个请求：

```
[{"method":"AdsApi.giveAdLifeByCategory","params":["Ads4Life"],"id":0}] 
```

正确回应：

```
[{
     "jsonrpc": "2.0",
     "id": 0,
     "result": {
         "status": true,
         "timeStamp": 0
     }
}] 
```

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:39:23.263

错误的括号：

```
... 'AdsApi.giveAdLifeByCategory','params' => '["Ads4Life"]', 'id' => '0')));
                                               ^---       ^-- 
```

您的“模拟”示例在其周围有括号，但是您将它们嵌入到数组键定义中，因此当生成 JSON 时，它实际上是：

```
... "params": "[\"Ads4Life\"]" ... 
```

和嵌入在字符串中`["`。`"]`

大概应该只是

```
... 'AdsApi.giveAdLifeByCategory','params' => array('Ads4Life'), 'id' => '0')));
                                                   ^^^^^^^^^^ 
```

# scala - 与多个客户端进行 Akka 远程处理？

> ID：15796336
> 
> 赞同：1
> 
> 时间：2013-04-03T19:31:11.147
> 
> 标签：scala, akka

我正在开发一个作为命令行工具运行的应用程序，并且我正在使用 Scala/Akka。我希望这个命令行工具使用客户端/服务器架构。当启动此工具的第一个实例时，它会在后台启动一个服务器实例，该实例实际上执行所有处理。如果用户随后打开多个终端窗口并启动此应用程序的更多实例，它将连接到现有服务器而不是启动新服务器。基本上我需要多个客户端与单个服务器交谈。这可以通过 Akka 的远程处理来完成，还是我需要在某个地方运行带有消息代理的更经典的客户端/服务器架构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T00:28:26.970

是的，可以使用 Akka 远程处理来完成。

您需要`ActorSystem`使用众所周知的端口配置“服务器”。然后`system.actorFor`在客户端中使用以获取`ActorRef`在服务器上运行的参与者。

确保您在配置中使用的主机名与您在 中使用的路径中使用的主机名相同`actorFor`。

# c++ - 命令行工具的最佳设计

> ID：15796337
> 
> 赞同：3
> 
> 时间：2013-04-03T19:31:11.807
> 
> 标签：c++, design-patterns, command-line-tool

这是一个简单的任务，让我简要描述一下！

我应该编写一个以文件名作为参数的命令行工具，我要读取的文件由几行组成，每一行都应该是一个要执行的*命令*，命令后面跟着它是适当的要申请的论据，以明确：

```
FILE

sum; 1, 2, 3, 4

Output

10 
```

命令行工具应满足这些要求：

1-易于维护、**开发**（将来可能会添加更多*命令*）和用户友好。

2-命令行参数可能会被修改并且可以添加新的。

3-可以作为一个开源项目，一个有组织的源树。

我希望开发人员能够处理源代码并充分理解它。

我是这些东西的新手，我对设计模式有点陌生，所以我不太了解，我想遵循开发这个程序的最佳实践，如果适用，我真的想使用设计模式并让我的代码更好更清洁，所以请建议并指导我以最好的方式编写这个工具，我不想写脏代码，我想写一个高质量的代码，它可以做它的意图并且可以很容易地进一步开发。

请建议并随时批评我刚才所说的话。

**最后一件事，我将使用 C++！**

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:40:34.070

1- [Boost.Program_options](http://www.boost.org/libs/program_options/) is your friend when it comes to parsing command line options.
2- Take a look at the [**command pattern**](http://en.wikipedia.org/wiki/Command_pattern). Although it is easier to implement in language that has reflection facilities, it is still possible to have a map of "command strings" mapped to function. Please use C++11 facilities for this. i.e. std::function.
3- There is no standard structure for C++ projects. Personally, I use Boost's recommended structure.

# c# - 此 AutoMapper 配置的 EmitMapper 等效项是什么？

> ID：15796338
> 
> 赞同：2
> 
> 时间：2013-04-03T19:31:12.707
> 
> 标签：c#, automapper, tree-structure, emitmapper

我有以下类和接口定义，并且想使用 EmitMapper 而不是 AutoMapper 从类映射到接口。当前代码有效，但我想使用 EmitMapper，但还没有弄清楚如何使用它。

```
public interface  ITreeViewDTO
{
    int Id { get; set; }
    string Name { get; set; }
    int? Parent_Id { get; set; }
    string ExtraData { get; set; }
    IEnumerable<ITreeViewDTO> SubNode { get; set; }
}

public class Navigation
{
    public int Id { get; set; }
    public string Name{ get; set; }
    public int? Parent_Id { get; set; }
    public virtual IList<Navigation> SubNavigations { get; set; }
} 
```

这是所需映射的当前 AutoMapper 配置：

```
Mapper.CreateMap<Navigation, ITreeViewDTO>()
   .ForMember(dest => dest.SubNode, 
              opt => opt.MapFrom<IEnumerable<Navigation>>(src => src.SubNavigations));
var iTreeView = Mapper.Map<Navigation, ITreeViewDTO>(root); 
```

上述示例的等效 EmitMapper 代码是什么？

# c++ - 从异构 std::list 中检索数据

> ID：15796341
> 
> 赞同：1
> 
> 时间：2013-04-03T19:31:16.070
> 
> 标签：c++, list

在下面的代码中，我只是尝试使用异构 std::list 进行试验，其中我将三个派生类对象存储在 Base* 类型的列表中。从列表中检索数据时，我遇到了一些问题。我该怎么做呢？下面的代码有效，因为所有三个类的定义都是相同的。所以编译器以某种方式设法给了我预期的输出。

```
#include <list>
#include <iostream>
#include <string.h>

class Base;
typedef std::list<Base*> any_list;

class Base{};

class Derived1 : public Base
{
public:
    std::string s;
    Derived1():s("D1"){}
};
class Derived2 : public Base
{
public:
    std::string s;
    Derived2():s("D2"){}
};
class Derived3 : public Base
{
public:
    std::string s;
    Derived3():s("D3"){}
};

int main(int argc, char **argv) {
    any_list l;
    l.push_back(new Derived1);
    l.push_back(new Derived2);
    l.push_back(new Derived3);

    for(any_list::iterator itr=l.begin();itr!=l.end();++itr)
        std::cout<<((Derived1*)*itr)->s;
} 
```

请注意 o/p 是 -

> D1 D2 D3

现在，如果我在任何类中添加一个额外的成员，这将不起作用（这是预期的和正确的）。那么我应该如何对数据进行类型转换并从异构列表中检索它呢？我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:38:35.543

Easiest way might be to define Base like so:

```
class Base {
public:
    virtual const std::string& getData() = 0;
} 
```

And then have your various derived classes implement `getData()` as appropriate. That way, your output loop could just be:

```
for (Base* b : l) {
    cout << b->getData();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T19:58:41.130

我会重新定义`Base`有一个虚拟方法来输出信息：

```
class Base {
    friend std::ostream & operator << (std::ostream &os, const Base &b) {
        b.print(os);
        return os;
    }
    virtual void print (std::ostream &os) const = 0;
public:
    virtual ~Base () {}
}; 
```

然后，您被迫`print`在每个派生类中实现一个方法。您的打印循环如下所示：

```
 for (any_list::iterator itr=l.begin();itr!= l.end();++itr)
        std::cout << **itr; 
```

您的列表应避免管理裸指针，因为您将自己置于内存泄漏的风险之中。您可以改用智能指针：

```
typedef std::list< std::unique_ptr<Base> > any_list; 
```

由于`unique_ptr`需要从指针显式构造，因此需要更新填充列表的代码。

```
 l.push_back(std::unique_ptr<Base>(new Derived1));
    l.push_back(std::unique_ptr<Base>(new Derived2));
    l.push_back(std::unique_ptr<Base>(new Derived3)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T19:38:38.357

Your cast `(Derived1*)*itr` is equivalent to a `static_cast` which states:

> If the prvalue of type “pointer to cv1 `B`” points to a `B` that is actually a subobject of an object of type `D`, the resulting pointer points to the enclosing object of type `D`. Otherwise, the result of the cast is undefined.

So you have undefined behaviour because you are casting pointers that point at `Derived2` and `Derived3` objects to a `Derived1*`.

The proper way to achieve this is to have `std::string s;` defined in `Base` and give it a constructor that takes a `std::string` argument. Then you can make the constructors of `Derived1` to `Derived3` call this constructor with the appropriate string argument.

If you add any extra members to one of the `Derived` classes, you won't be able to access them through the polymorphic `Base*`. However, trying to do that is a sign of bad design. You should only be treating the objects that a `Base*` points at as though they were `Base` objects. That is, `Base` describes the interface for those objects.

If you *really need to* do something that is derived class specific to an object pointed to a `Base*`, you can use a `dynamic_cast`:

```
if (Derived1* p = dynamic_cast<Derived1*>(*itr)) {
  // This condition will only be true if the object pointed to by `*itr` really is a Derived1
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T19:24:39.143

```
#include <list>
#include <vector>
#include <iostream>
#include <string.h>

class Base;
typedef std::list<Base*> any_list;

class Base{
public:
    virtual ~Base(){}
    virtual std::string getData()=0;
};

class Derived1 : public Base
{
public:
    std::string s;
    Derived1():s("D1"){}
    std::string getData()
    {
        return s;
    }
};
class Derived2 : public Base
{
public:
    std::string s;
    Derived2():s("D2"){}
    std::string getData()
    {
        return s;
    }
};
class Derived3 : public Base
{
public:
    std::string s;
    Derived3():s("D3"){}
    std::string getData()
    {
        return s;
    }
};

int main(int argc, char **argv) {
    any_list l;
    l.push_back(new Derived1);
    l.push_back(new Derived2);
    l.push_back(new Derived3);

    for(any_list::iterator itr=l.begin();itr!=l.end();++itr)
        std::cout<<((Base*)*itr)->getData()<<std::endl;
} 
```

谢谢您的帮助。混乱是清楚的，问题就解决了。顺便说一句，什么是 -

> typedef std::list< std::unique_ptr > any_list;

我没有找到命名空间中调用`unique_ptr`的任何内容`std::`。:(

# c - C prob 中的服务器-客户端

> ID：15796347
> 
> 赞同：0
> 
> 时间：2013-04-03T19:31:30.613
> 
> 标签：c, sockets, file-upload, segmentation-fault

我有两个程序。一个是客户端，另一个是服务器。用于通信的协议必须像 HTTP，但带有文件传输，GET File。问题出在客户端函数中，该函数读取服务器发送的标头（服务器完美发送）。标题将是这样的：

```
404 *error code etc*  
MODE GET *get head unknown*  
AM 2969 *always the same*  
FILE *NAME*  
SIZE *sizeofthefile*  
END_HEADER 
```

然后该函数必须`recv`逐行读取 ed 缓冲区，并使用`sscanf`将标头的值读取到作为指针传递的结构中。问题是，无论我如何尝试编辑和试验代码以查看问题所在，我都会被段错误所淹没。

```
void getheader(int sock,head_in*inheader)  
{  
    char n[10];  
    int c;  
    int k=0;  
    char buffer[101];  
    if(recv(sock,buffer,100,0)<=0) serror("Error recving\n",sock);  
        c=strlen(buffer);  
    for(int i=0;i<6;i++)
    {    
        int w=0;
        for(int j=0;j<c;j++)
        {
            if((buffer[j+k]=='\n')&&(buffer[j+k]!='\0')) break;
            w++;
        }

        char *line=(char*)malloc(w+1);
        for(int j=0;j<w;j++)
        {
            line[j]=buffer[j+k];
        }
        k=k+w+1;

        if(i==0) sscanf(line,"%d ",&inheader->code);
        if(i==1) sscanf(line,"%s %s",n,inheader->mode);
        if(i==2) sscanf(line,"%s %d",n,&inheader->am);
        if(i==3) sscanf(line,"%s %s",n,inheader->name);
        if(i==4) sscanf(line,"%s %d",n,&inheader->size);

        free(line);
    }                                               
} 
```

# jquery - 加载后将 jQuery Mobile 元素添加到页面？

> ID：15796356
> 
> 赞同：2
> 
> 时间：2013-04-03T19:32:08.933
> 
> 标签：jquery, jquery-mobile, markup, jquery-mobile-button

在这个 jsFiddle 示例中...

[http://jsfiddle.net/LFgSr/](http://jsfiddle.net/LFgSr/)

...我正在尝试在页面加载后在 div 中添加 jQuery Mobile 样式的按钮。页面加载时出现在页面上的大按钮看起来很棒......但是当我尝试“动态”添加另一个外观相似的按钮（通过单击“添加另一个按钮”）时，它不会被设置为它应该是（即使我通过 jQuery 为按钮“附加”正确的 HTML 代码）。

这是完整的代码...

```
<!DOCTYPE html>
<html>

<head>

    <title>Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
    <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>

</head>

<body>

    <!-- Mark-up -->

    <input id="addButton" type="button" value="Add Another Button">

    <div style="width: 300px; height: 400px; top: 50px; left: 10px; position: absolute; border: 1px solid black;" >
        <section id="page1" data-role="page">
            <div class="content" data-role="content">
            <a href="#" data-role="button">This is a button!</a>
            </div>
        </section>
    </div>

    <!-- Script -->

    <script>
        $(document).ready(function() {
            $('#addButton').click(function() {
                $('.content').append('<a href="#" data-role="button">This is another button!</a><br />');
            });
        });
    </script>

</body>
</html> 
```

我在这里想念什么？如何让 jQuery Mobile 像这样识别对 HTML 的动态更新？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T19:40:23.943

这是一个工作示例：http: [//jsfiddle.net/Gajotres/2uerX/](http://jsfiddle.net/Gajotres/2uerX/)

```
$(document).on('pagebeforeshow', '#index', function(){       
    $('#addButton').click(function() {
        $('.content').append('<a href="#" data-role="button">This is another button!</a><br />');
        $('[data-role="button"]').button();
    });
}); 
```

当您动态添加新的 jQM 内容时，jQM 还必须增强新内容。如果是按钮，它是通过以下方式完成的：

```
$('[data-role="button"]').button(); 
```

要了解有关它的更多信息，请查看我的其他答案/文章：[**jQuery Mobile：动态添加内容的标记增强**](https://stackoverflow.com/a/14550417/1848600)

# .net - 正则表达式返回最后十三位的前十二位？

> ID：15796359
> 
> 赞同：2
> 
> 时间：2013-04-03T19:32:14.043
> 
> 标签：.net, regex, grouping, lookahead

我正在研究这个正则表达式，但它没有按我预期的那样运行。到目前为止，这是我的正则表达式——`.{12}(?=.)$|(^.{1,12}$)`

上半场，`.{12}(?=.)$`是我卡住的地方。我正在尝试匹配输入字符串中最后 13 个字符中的前 12 个字符。

示例：
`1234567890123`--> `123456789012`
`123456789012345`--> `345678901234`
`12345678901234567890`-->`890123456789`

对我来说，前瞻似乎失败了。使用`q(?=w)`正确匹配 aq 后跟 aw 之类的演示，但我无法让它在我的特定实例中工作。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T19:36:11.783

前瞻是零宽度，所以`(?=.)$`是矛盾的

```
.{12}(?=.$)|^.{1,12}$ 
```

# arrays - 动态 texbox 数组

> ID：15796371
> 
> 赞同：0
> 
> 时间：2013-04-03T19:33:06.913
> 
> 标签：arrays, dynamic, excel, textbox, vba

在表单中，每次我单击 te 按钮时，都会出现一个新的文本框。我想用所有这些文本框制作一个数组。问题是，所有这些文本框都有一个动态名称。我如何将它们放入数组中？这是我的代码：

```
Set nieuwtxtingredient = Me.Controls.Add("Forms.Textbox.1", "Ingredient", True)
With nieuwtxtingredient
.Width = Me.txtIngredient0.Width
.Height = Me.txtIngredient0.Height
.Left = Me.txtIngredient0.Left
.Top = Me.txtIngredient0.Top + 30 * aantalBoxes
.Name = "txtIngredient" + CStr(aantalBoxes)
End With

Dim naam As String
Dim ingredientArray() As String

ReDim ingredientArray(1 To aantalBoxes)
ingredientArray(aantalBoxes) = **Me.txtIngredient0.Value** 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:41:31.543

在您的代码中，您将对新文本框的引用保存在`nieuwtxtingredient`.

您可以将此引用保存在一个文本框数组中，然后读取每个文本框的名称和值。

这就是我建议修改代码的方式：

```
Dim aantalBoxes As Integer
Dim ingredientArray() As Control

 Private Sub btnVoegToe_Click()

    Dim aantalRecepten As Integer
    Dim Teller As Integer

    aantalRecepten = Cells(2, Columns.Count).End(xlToLeft).Column

    Cells(2, aantalRecepten + 2).Value = Me.txtNaamRecept.Value

    For Teller = 1 To aantalBoxes ' <-- starts at 1, formula below adjusted

        Cells(2 + Teller, aantalRecepten + 2).Value = ingredientArray(aantalBoxes).Value

    Next Teller

End Sub

Private Sub btnVolgendeIngredient_Click()

    aantalBoxes=aantalBoxes + 1     ' <-- must calculate the total

    ReDim Preserve ingredientArray(aantalBoxes) ' <-- you had this in the earlier version

    Set nieuwtxtingredient = Me.Controls.Add("Forms.Textbox.1", "Ingredient", True)

    With nieuwtxtingredient

        .Width = Me.txtIngredient0.Width
        .Height = Me.txtIngredient0.Height
        .Left = Me.txtIngredient0.Left
        .Top = Me.txtIngredient0.Top + 30 * aantalBoxes
        .Name = "txtIngredient" + CStr(aantalBoxes)

    End With
                                       ' first Textbox is numbered 1
    set ingredientArray(aantalBoxes) = nieuwtxtingredient  ' <-- you had this in the earlier version

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-24T14:16:53.260

见这个例子，[http://jsfiddle.net/7zkzttpr/2/](http://jsfiddle.net/7zkzttpr/2/)

```
$(document).ready(function() {
    var max_fields      = 10; //maximum input boxes allowed
    var wrapper         = $(".input_fields_wrap"); //Fields wrapper
    var add_button      = $(".add_field_button"); //Add button ID

    var x = 1; //initlal text box count
    $(add_button).click(function(e){ //on add input button click
        e.preventDefault();
        if(x < max_fields){ //max input box allowed
            x++; //text box increment
            $(wrapper).append('<div><input type="text" name="mytext[]"/><a href="#" class="remove_field">Remove</a></div>'); //add input box
        }
    });

    $(wrapper).on("click",".remove_field", function(e){ //user click on remove text
        e.preventDefault(); $(this).parent('div').remove(); x--;
    })
}); 
```

当你创建一个新的文本框时，给文本框命名为一个数组，这样你就可以得到一个数组中所有文本框的值。

# javascript - 如何计算折线距离？

> ID：15796372
> 
> 赞同：1
> 
> 时间：2013-04-03T19:33:07.403
> 
> 标签：javascript, google-maps, google-maps-api-3

```
function createLine()
{

geocoder = new google.maps.Geocoder();
var latlng = new google.maps.LatLng(7.5653, 80.4303);
var mapOptions = {
    zoom: 8,
    center: latlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
}
map = new google.maps.Map(document.getElementById("directionpanel"), mapOptions);

var address = document.getElementById('startvalue').value;
var address2 = document.getElementById('endvalue').value;

var temp, temp2;

geocoder.geocode({ 'address': address }, function (results, status) {
    temp = results[0].geometry.location;
    geocoder.geocode({ 'address': address2 }, function (results, status) {
        temp2 = results[0].geometry.location;

    var route = [
      temp,
      temp2
    ];

    var polyline = new google.maps.Polyline({
        path: route,
        strokeColor: "#ff0000",
        strokeOpacity: 0.6,
        strokeWeight: 5
    });

    polyline.setMap(map);
    });
});
} 
```

此代码工作正常。我想计算我创建的线的距离。我想通过警报以米为单位显示此值。请帮帮我...（在这种情况下，两个点直接与线相连。我想计算直线距离。）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-03T19:59:36.593

使用[google.maps.geometry.spherical.computeLength](https://developers.google.com/maps/documentation/javascript/reference#spherical)（一定要包含[几何库](https://developers.google.com/maps/documentation/javascript/geometry)）

```
function createLine()
{

geocoder = new google.maps.Geocoder();
var latlng = new google.maps.LatLng(7.5653, 80.4303);
var mapOptions = {
    zoom: 8,
    center: latlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
}
map = new google.maps.Map(document.getElementById("directionpanel"), mapOptions);

var address = document.getElementById('startvalue').value;
var address2 = document.getElementById('endvalue').value;

var temp, temp2;

geocoder.geocode({ 'address': address }, function (results, status) {
    temp = results[0].geometry.location;
    geocoder.geocode({ 'address': address2 }, function (results, status) {
        temp2 = results[0].geometry.location;

    var route = [
      temp,
      temp2
    ];

    var polyline = new google.maps.Polyline({
        path: route,
        strokeColor: "#ff0000",
        strokeOpacity: 0.6,
        strokeWeight: 5
    });

    var lengthInMeters = google.maps.geometry.spherical.computeLength(polyline.getPath());
    alert("polyline is "+lengthInMeters+" long");

    polyline.setMap(map);
    });
});
} 
```

[工作示例](http://www.geocodezip.com/v3_SO_drawLineFromGeocodedResults.html)（更新了上一个问题的示例以包括长度计算）

**代码片段：**

```
var geocoder;
var map;

function initialize() {
  geocoder = new google.maps.Geocoder();
  var latlng = new google.maps.LatLng(7.5653, 80.4303);
  var mapOptions = {
    zoom: 8,
    center: latlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  }
  map = new google.maps.Map(document.getElementById("map"), mapOptions);

  createLine();
}

function createLine() {

  var address = document.getElementById('startvalue').value;
  var address2 = document.getElementById('endvalue').value;

  var temp, temp2;

  geocoder.geocode({
    'address': address
  }, function(results, status) {
    if (status != "OK") alert("geocode of address:" + address + " failed, status=" + status);
    temp = results[0].geometry.location;
    document.getElementById('results').innerHTML += temp.toUrlValue() + "<br>";
    geocoder.geocode({
      'address': address2
    }, function(results, status) {
      if (status != "OK") alert("geocode of address:" + address + " failed, status=" + status);
      temp2 = results[0].geometry.location;
      document.getElementById('results').innerHTML += temp2.toUrlValue() + "<br>";

      var route = [
        temp,
        temp2
      ];

      var polyline = new google.maps.Polyline({
        path: route,
        strokeColor: "#ff0000",
        strokeOpacity: 0.6,
        strokeWeight: 5
      });

      var lengthInMeters = google.maps.geometry.spherical.computeLength(polyline.getPath());
      // alert("polyline is "+lengthInMeters+" long");            
      document.getElementById('results').innerHTML += "Polyline is " + lengthInMeters + " meters long<br>";

      polyline.setMap(map);
      var bounds = new google.maps.LatLngBounds();
      bounds.extend(temp);
      bounds.extend(temp2);
      map.fitBounds(bounds);
    });
  });
}
google.maps.event.addDomListener(window, 'load', initialize);
```

```
html,
body,
#map {
  margin: 0;
  padding: 0;
  height: 100%;
}
```

```
<input id="startvalue" type="text" width="90" value="Megaswewa, Sri Lanka"></input>
<input id="endvalue" type="text" width="90" value="Kandy, Sri Lanka"></input>
<input type="button" value="Geocode" onclick="createLine()"></input>
<div id="map" style="width:600px;height:500px;"></div>
<div id="results"></div>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCkUOdZ5y7hMm0yrcCQoCvLwzdM6M8s5qk&libraries=geometry"></script>
```

# html - 通过网址访问图片，不包括扩展名

> ID：15796375
> 
> 赞同：2
> 
> 时间：2013-04-03T19:33:11.317
> 
> 标签：html, webserver

我以前在网上看到过这个，但我无法理解它是如何工作的。希望有人可以帮助解释这一点。

假设我们在这个地址有一张照片。 [http://www.website.com/image-150x150.jpg](http://www.website.com/image-150x150.jpg)

我该如何设置它，如果你去[http://www.website.com/image-150x150](http://www.website.com/image-150x150)它会显示那张照片？

所以唯一的区别是我不必包含扩展名，即。*.jpg。

最重要的是，我也希望能够像这样引用它：

```
<img src="http://www.website.com/image-150x150" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T19:39:11.847

If you are using Apache, you need to add a `.htaccess` rule similiar to this:

```
RewriteEngine On
redirectMatch 301 ^(.*)\.jpg $1 
```

In the case of IIS (which I haven't used at all!), consider using something like this:

```
<rewrite>
    <rules>
        <rule name="rewrite php">
            <!--Removes the .php extension for all pages.-->
            <match url="(.*)" />
            <conditions logicalGrouping="MatchAll">
            <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
            <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
            <add input="{REQUEST_FILENAME}" negate="true" pattern="(.*).jpg" />
            </conditions>
            <action type="Rewrite" url="{R:1}.jpg" />
        </rule> 
    </rules>
</rewrite> 
```

I'm sure that you have to change this based on your need.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:20:49.893

您可以删除扩展名并使用 img 标签引用它，它应该可以工作。由于编码是 jpeg 格式并且 img 标签接受这种编码，它应该能够转换和显示正确的图像。

# android - 创建新意图后禁用程序后退按钮

> ID：15796377
> 
> 赞同：0
> 
> 时间：2013-04-03T19:33:12.650
> 
> 标签：android

我是 android 编程新手，只是从本指南的基础知识开始

[Android 启动活动](http://developer.android.com/training/basics/firstapp/starting-activity.html)

该应用程序允许用户输入一个字符串，一旦用户单击发送，它会将您带到显示消息的新意图。现在在显示2张图片的链接底部，没有可见的后退按钮，但在我的模拟器上，“我的第一个应用程序”是一个表示它可以返回的按钮。但是，如果我按下它，它会使程序崩溃。有没有办法禁用标题消息作为按钮？

如果我按下手机上的后退按钮，程序运行得非常好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:20:31.897

我认为标题栏只是位于 android 库中的常规视图，而不是`res`与您的应用程序关联的文件夹。您应该能够找到标题栏并使用以下内容禁用点击：

```
View v = findViewById (android.R.id.title);
v.setClickable(false); 
```

这应该禁用标题栏上的点击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:36:24.640

```
getActionBar().setDisplayHomeAsUpEnabled(true); 
```

这是您正在寻找的线路。请注意，它也被适当地评论。

# sass - 我可以使用 SASS 中的 & 符号来引用父类的特定标签吗？

> ID：15796380
> 
> 赞同：46
> 
> 时间：2013-04-03T19:33:21.433
> 
> 标签：sass

我有一门课程`semantic`适用于许多不同的元素。根据应用类的 html 标签，我希望它应用不同的样式。这就是我尝试这样做的方式：

```
.semantic {
    &ul {
        padding: 0;
        margin: 0;
    }
    &p {
        margin: 0;
    }
} 
```

这行不通。当然我可以这样写，但它不会很“干”：

```
 .semantic ul {
    padding: 0;
    margin: 0;
 }

 .semantic p {
     margin: 0;
 } 
```

这可能吗？

编辑：为澄清起见，这里是我的 HTML 的示例：

```
<ul class='semantic'>
    <li>An Item</li>
</ul>

<p class='semantic'>This text is semantically a paragraph, but should not be displayed as such</p> 
```

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2015-06-05T14:23:00.827

在 Sass 3.4 上：

```
.semantic {
    @at-root {
      ul#{&} {
        padding: 0;
        margin: 0;
      }
      p#{&} {
        margin: 0;
      }
    }
} 
```

生成：

```
ul.semantic {
  padding: 0;
  margin: 0;
}

p.semantic {
  margin: 0;
} 
```

[@at-root](http://sassbreak.com/getting-back-to-our-roots/)将块移动到顶层。这有几个用途（见链接），但在这里它被用来保持利用`&`语法而不暗示规则是`.semantic`.

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-04-03T19:53:33.513

你想要的理论上看起来像这样：

```
.semantic {
    ul& {
        padding: 0;
        margin: 0;
    }
    p& {
        margin: 0;
    }
} 
```

这是不可能的，因为`&`必须是第一个。你只需要处理它不是 DRY 的事实并用手写出来：

```
ul.semantic {
    padding: 0;
    margin: 0;
}

p.semantic {
    margin: 0;
} 
```

从 Sass 3.3 或 3.4 开始，可以使用以下语法：

```
.semantic {
    ul#{&} {
        padding: 0;
        margin: 0;
    }
    p#{&} {
        margin: 0;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T00:09:20.380

由于 CSS 特殊性的工作原理，您可以这样做：

```
.semantic {
  margin: 0; 
}

ul.semantic {
  padding: 0;
} 
```

在您的 HTML 中，`p.semantic`并且`ul.semantic`将拥有`margin: 0;`并且只会`ul.semantic`拥有`padding: 0;`

少 Sass，少 CSS。干燥。

如果与您的示例不同，真实站点上的元素的共同点更少，您可能需要重新考虑为什么它们需要具有相同的类名。

# java - 实现类的正确方法无法实例化

> ID：15796384
> 
> 赞同：3
> 
> 时间：2013-04-03T19:33:33.703
> 
> 标签：java

**短的：**

除了省略构造函数之外，我还需要做其他事情吗？

**长：**

我想实现无法实例化的类。我在这里找到了数学类的例子：http: [//docs.oracle.com/javase/6/docs/api/java/lang/Math.html](http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html)

所以我会写同样的东西：

```
public final class MyClass{

    public static int doubleMe(int x){
        return 2*x;
    }
} 
```

没有构造函数，所以实例化应该是不可能的。

但我不确定我的课程是否会进入决赛。也许（不一定）我想在将来扩展它（例如 public class myClassB extends myClass）并且这个关键字会阻止它 - 所以它必须在那里吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T19:35:08.840

> 除了省略构造函数之外，我还需要做其他事情吗？

是的。如果您自己不编写构造函数，Java 将提供一个。

您需要编写自己的*私有*构造函数：

```
public final class MyClass {
    // Prevent the compiler from supplying a constructor automatically.
    private MyClass() {}

    public static int doubleMe(int x){
        return 2*x;
    }
} 
```

（我已经修复了你的类的名称以遵循正常的 Java 命名约定。）

如果您查看源代码，`java.lang.Math`您会出于同样的原因在那里找到一个私有构造函数。

> 但我不确定我的课程是否会进入决赛。也许（不一定）我想在将来扩展它（例如 public class myClassB extends myClass）并且这个关键字会阻止它 - 所以它必须在那里吗？

您应该仅出于多态性的原因扩展您的类 - 这与无法实例化的类无关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T19:35:19.617

> 没有构造函数，所以实例化应该是不可能的。

否 - 如果没有声明构造函数，那么 Java 会自动为类提供一个隐式默认构造函数，没有形式参数和`throws`子句（[JLS §8.8.9](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.8.9)）。您需要显式声明一个私有构造函数，以使该类无法从外部实例化。现在至于您的第二个问题：扩展一个无法实例化的类是没有意义的，因此将您的类声明为`final`- 尽管这不是使其不可实例化的要求。

您可能会发现 JLS 的以下部分相关：[第 8.8.10 节：防止类的实例化](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.8.10)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T19:35:17.253

除了制作每个方法之外`static`，将类标记为`abstract`. 这将防止它被实例化。

```
abstract public class MyClass {
  ...
} 
```

创建私有构造函数将阻止外部类`MyClass`构建它，但不会阻止内部方法之一`MyClass`执行它（私有构造函数对类本身可见）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T19:35:19.480

使用抽象而不是最终。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T19:47:13.843

使用一个（好吧，实际上尽可能多）构造函数并从中抛出一个未经检查的异常。

没有人能够创建这样一个类的实例。

不过，他们可以使用类的静态方法/字段。

这种方法听起来很野蛮，但在形式上它会奏效。

# android - 对 RAW_CONTACT_ID 的 ContactsContract.data 查询返回 0 行

> ID：15796386
> 
> 赞同：0
> 
> 时间：2013-04-03T19:33:41.357
> 
> 标签：android, android-contacts

我正在尝试从 DATA 表中获取特定 RAW_CONTACT_ID 的数据，但我得到的只是空查询输出。逻辑似乎很简单，但我就是不知道为什么会这样。谷歌搜索但找不到类似的东西。

```
 public void onCreate(Bundle savedInstanceState)
{
super.onCreate(savedInstanceState);
TextView tv = new TextView(this);    

String where = RawContacts.DELETED + "<> 0 and " + RawContacts.ACCOUNT_TYPE + "=?";
Cursor c = getContentResolver().query(ContactsContract.RawContacts.CONTENT_URI, 
                                        new String[] {RawContacts._ID,
                                                      RawContacts.ACCOUNT_NAME,
                                                      RawContacts.ACCOUNT_TYPE,
                                                      RawContacts.DISPLAY_NAME_PRIMARY
                                                      }, 
                                        where,
                                        new String[] {"Local Phone Account"}, 
                                        null);
int i = 0;
if (c.getCount() > 0) {
    while (c.moveToNext()  && i < 10) {
        i = i + 1;
        // get the id from RawContacts cursor
        String rawID = c.getString(c.getColumnIndex(RawContacts._ID));
        tv.append("searching RawID " + rawID + "\n" +
                    "account name: " + c.getString((c.getColumnIndex(RawContacts.ACCOUNT_NAME))) + "\n" + 
                    "account type: " + c.getString(c.getColumnIndex(RawContacts.ACCOUNT_TYPE)) + "\n" +
                    "display name: " + c.getString(c.getColumnIndex(RawContacts.DISPLAY_NAME_PRIMARY)) + "\n"
                    );

        // create a cursor from Data table for the RawContacts ID    
        Cursor cur = getContentResolver().query(Data.CONTENT_URI, 
                                                new String[] {Data._ID}, 
                                                Data.RAW_CONTACT_ID + "=?", 
                                                new String[] {String.valueOf(rawID)}, 
                                                null
                                                );

        tv.append("found " + cur.getCount() + " matches for id " + String.valueOf(rawID) + "\n");
        cur.close();
        }
}
setContentView(tv);
} 
```

# ios - 获取信号峰值之间的时间

> ID：15796387
> 
> 赞同：0
> 
> 时间：2013-04-03T19:33:42.050
> 
> 标签：ios, signals

全部。

我需要帮助，我有这样的信号

```
 /\
     /\                  /  \
    /  \      /\        /    \
0 ---------------------------------------
  /      \  /    \    /        \    /
          \/      \  /          \  /
                   \/            \/ 
```

我需要检测所有峰值（负和正）。所有值都是浮点数，我得到所有 66 毫秒。我想知道两个峰之间的时间。我需要帮助来实现它，我想我需要将所有值存储在一个带有上一个峰值的时间戳的数组中，任何人都有最好的方法来做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:08:03.753

要发现一个高峰，您可能需要发现方向的变化。

您不一定必须将值存储在数组中。

伪代码：

```
//every frame:
frameIncrement++;
currentDir = currentVal - prevVal
if( (prevDir < 0 && currentDir > 0) || (prevDir > 0 && currentDir < 0)) {
  //change in direction!
  time = frameIncrement * 66
  frameIncrement = 0
}

prevDir = currentDir
prevVal = currentVal 
```

希望这可以帮助！

# javascript - 通过 url 运行 javascript

> ID：15796390
> 
> 赞同：-1
> 
> 时间：2013-04-03T19:33:55.793
> 
> 标签：javascript

我的问题是：

我有一个 eibport：www.bab-tec.de/

您可以在现场部分查看现场演示。

现在的问题。

我想通过输入以下网址在此页面上启动或运行 javascript： `http:// IP-EIBPORT /#javascript:click(Button)`

或以另一种方式。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:42:54.343

您可能希望设置您的脚本以查找特定的哈希并基于该哈希运行函数。

```
switch(location.hash){
   case "#button":
         //click button
   break;
   case "#other":
         //do something else
   break;
} 
```

`/#button`然后使用像或这样的网址`/#other`

* * *

完全按照您的意愿行事的方法如下，但不推荐！

```
eval(location.hash.substr(1)); 
```

使用这样的 url`/#alert('test');`会起作用，但这意味着任何人都可以链接到您的网站并执行 javascript，这是非常不安全的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T19:42:43.890

您不能在 URL 本身中包含调用 JavaScript 的代码。您可以做的最好的事情是在目标页面上有一个脚本来检查位置并做出相应的响应。

例如，假设您想`sum`通过 url 公开方法。如果有人要使用以下查询字符串加载您的页面：`?method=sum&params=5,5`，您可以有适当的逻辑来查找这些部分并处理它们。

```
var methods = {
    sum: function () {
        var result = 0; i = -1;
        while ( ++i < arguments.length ) 
            result += parseInt( arguments[i], 10 );
        return result;
    }
};

var method = location.search.match(/method=(.*)&/)[1],
    params = location.search.match(/params=(.*)$/)[1].split(",");

var result = methods[ method ].apply( this, params );

alert( result ); 
```

看看它在行动： http: [//jsfiddle.net/jonathansampson/TF5ta/show/ ?method=sum¶ms=5,5](http://jsfiddle.net/jonathansampson/TF5ta/show/?method=sum&params=5,5)

# matlab - Matlab：从matlab中的曲线获取数据值

> ID：15796391
> 
> 赞同：0
> 
> 时间：2013-04-03T19:33:56.520
> 
> 标签：matlab, plot

我在 matlab 中创建了数组`x_data`和`y_data`值，并将它们绘制成：

```
plot(x_data,y_data,'o') 
```

现在我将一个四阶多项式拟合到数据中。

我怎样才能得到`x_data`和`y_data`对应于这个四阶多项式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:52:11.980

用于[`polyval`](http://www.mathworks.com/help/matlab/ref/polyval.html)多项式评估。

`y = polyval(p,x)`返回在 x 处计算的 n 次多项式的值。输入参数 p 是一个长度为 n+1 的向量，其元素是要评估的多项式的降幂系数。

# mediawiki - 如何使 Geshi 格式易于复制？

> ID：15796396
> 
> 赞同：1
> 
> 时间：2013-04-03T19:34:12.660
> 
> 标签：mediawiki, geshi

我已经安装了 Geshi 扩展，以允许在我的 MediaWiki 支持的网站上突出显示语法。我试图弄清楚如何使语法突出显示易于复制。

目前，当我尝试复制代码格式时，行号会与代码一起复制：

![在此处输入图像描述](https://i.stack.imgur.com/f8Bwu.png)

我曾尝试查看[Geshi 选项](http://www.mediawiki.org/wiki/Extension:SyntaxHighlight_GeSHi)，但无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-12T07:00:17.497

[GeSHi 文档在http://qbnz.com/highlighter/geshi-doc.html#line-numbers](http://qbnz.com/highlighter/geshi-doc.html#line-numbers)中谈到了这一点

```
$geshi->set_header_type(GESHI_HEADER_PRE_TABLE); 
```

# tkinter - 密码字段输入 -- 显示 *

> ID：15796400
> 
> 赞同：0
> 
> 时间：2013-04-03T19:34:21.313
> 
> 标签：tkinter

我希望如果有人在文本框中写入它应该被加密。我在 tkinter Python plz 帮助中使用。

```
self.password=Entry(app)
            self.password.grid(row=1,column=1,sticky=W) 
```

例如在密码中，当有人写“电影”时，它应该像这样可见`******`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T07:18:11.217

很简单。

`e = Entry(root,show='*')`

# javascript - 使用 javascript 正确模拟“模式”属性

> ID：15796410
> 
> 赞同：1
> 
> 时间：2013-04-03T19:34:56.980
> 
> 标签：javascript, regex, html, pattern-matching

我正在尝试使用 javascript 复制 html5 模式属性，但结果不一致。

模式是`[a-zA-Z\. \']+`

在 Chrome 中，键入“asd 123”不会通过测试。

使用类似的东西

```
el.value.match(new RegExp(el.pattern)) 
```

让“asd 123”通过，显然是因为“asd”是匹配的。

`^`我可以通过在我的模式的开头和结尾添加和来解决这个特定问题`$`，但问题是 - 是否有一些功能完全按照模式属性实现？还有其他我应该期待的惊喜吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T19:55:43.233

添加`^`并且`$`或多或少地将其完全作为`pattern`属性实现。`pattern`根据HTML 5 ( [http://www.w3.org/html/wg/drafts/html/master/forms.html#the-pattern-attribute](http://www.w3.org/html/wg/drafts/html/master/forms.html#the-pattern-attribute) )中 w3c 规范的最新版本：

> 这意味着用于该属性的正则表达式语言与 JavaScript 中使用的相同，**除了模式属性与整个值匹配，而不仅仅是任何子集（有点好像它在开头暗示了一个 ^(?:的模式和 )$ 最后)**。

（重点补充）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T20:00:53.647

> 还有其他我应该期待的惊喜吗？

是的。您可以在 HTML5 规范中查找该[`pattern`属性](http://www.w3.org/TR/html5/forms.html#the-pattern-attribute)：

> > 如果`input`元素具有`pattern`指定的属性，并且该属性的值在编译为禁用 、 和标志的 JavaScript 正则表达式时`global`（`ignoreCase`请`multiline`参阅 ECMA262 第 5 版，第 15.10.7.2 至 15.10.7.4 节），则编译成功，则生成的正则expression 是元素的编译模式正则表达式。

这很好，因为这意味着 JS 正则表达式将完全像 HTML 一样。

> > 编译后的模式正则表达式在与字符串匹配时，必须将其开头锚定到字符串的开头，并将其结尾锚定到字符串的结尾。
> > 
> > 注意：这意味着用于此属性的正则表达式语言与 JavaScript 中使用的相同，除了模式属性与整个值匹配，而不仅仅是任何子集（有点好像它`^(?:`在模式和`)$`最后一个）。

如您所见，仅添加`^`and`$`是不够的。例如，如果有人输入了一个析取`A|B`，那么`^A|B$`就不是正确的——它必须是`^(A|B)$`。

此外，您可能会注意到该`pattern`属性不适用于设置为 的输入`multiple`。

> 是否有一些功能完全按照模式属性实现？

您可以查看[https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills#web-forms](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills#web-forms)以了解一些常见的 polyfill 库/插件，但我还没有测试任何符合标准的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T20:05:31.733

这种功能的本质可能类似于

```
function validate( el ) {
  // Check hasAttribute to avoid a regex like ^(?:null)$
  return el.value && el.hasAttribute( 'pattern' ) 
    ? new RegExp( '^(?:' + el.getAttribute( 'pattern' ) + ')$' ).test( el.value )
    : null
} 
```

*（IE 8+ 因为 hasAttribute）*

尽管正确的验证实现还必须考虑其他因素，例如`required`属性的存在。有关更多详细信息，请参阅[数据表单验证](https://developer.mozilla.org/en-US/docs/HTML/Forms/Data_form_validation)和 HTML5 表单填充程序，例如[使 HTML5 表单向后兼容](http://perplexed.co.uk/5201_making_html5_form_backwards_compatible.htm)。

# html - 为什么此代码中的图像下方有空格？

> ID：15796414
> 
> 赞同：4
> 
> 时间：2013-04-03T19:35:09.713
> 
> 标签：html, css

我有以下代码，它允许红色从 a 元素中显示出来。为什么是这样。我原以为 a 元素只会扩展到内容的大小，但看起来它比这大一点。请参阅此处的代码笔[http://codepen.io/anon/pen/soqEz](http://codepen.io/anon/pen/soqEz)。

**HTML**

```
<a href="#"><img src="http://placehold.it/150x150" /></a> 
```

**CSS**

```
a{
  background: red;
  margin-bottom:0;
  padding-bottom:0;
  border-bottom:0;
}
img {
  margin-bottom:0;
  padding-bottom:0;
  border-bottom:0;
} 
```

**编辑：我看到下面的答案......但任何人都可以解释*为什么*空间在那里（我的意思是考虑到它是一个块级元素......首先它的目的是什么）......相反试图摆脱它。谢谢**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T19:37:20.027

该`img`元素是`inline`默认的。 `inline`元素充当文本，默认为`vertical-align: baseline`. 这意味着图像的底部与文本的底部对齐。请注意，小写的 p 或 g 位于垂直文本对齐的底部下方。您可以通过添加`vertical-align: bottom`OR来修复它`display: block`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T19:38:21.980

它这样做是因为它是一个内联元素。更改显示类型

```
img {
    display:block;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T19:38:33.017

因为图像`inline`默认是一个元素。添加`display: block`到您的`img`规则并查看。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T19:39:10.893

在您的情况下，您需要添加显示：块，但添加到图像标签而不是链接标签。添加

```
img
{
display:block;
} 
```

# android - 使用 Xamarin 和 StackMob 的测试驱动开发 (TDD)？

> ID：15796415
> 
> 赞同：0
> 
> 时间：2013-04-03T19:35:11.157
> 
> 标签：android, tdd, stackmob

我有兴趣在使用 Xamarin 创建我的移动应用程序的 Android 和 IOS 版本的项目中使用 StackMob 作为我的 BeAAS。我正在使用 StackMob.NET 解决方案

[https://github.com/ermau/StackMob.NET](https://github.com/ermau/StackMob.NET)。

我成功地从 Android 模拟器运行演示，但是我无法通过 NUnit（Visual Studio 或 Xamarin Suite）成功联系 StackMob。

这是因为我没有尝试从移动视图中进行连接吗？或者是否可以创建可以连接到 StackMob 的测试方法？

另外，有没有人尝试过将 StackMob 与 Xamarin 或 .Net 集成？

# android - 如何调整 Android Dev 代码以便可以通过蓝牙发送对象？

> ID：15796417
> 
> 赞同：0
> 
> 时间：2013-04-03T19:35:15.033
> 
> 标签：android, bluetooth

嗨，我需要通过蓝牙为我的战舰游戏发送一个船级。我试图编辑用于发送字符串的代码，但我真的不确定我在做什么。我的代码如下。我知道我需要在发送之前对对象进行序列化，但我只是得到了错误，我也会显示出来。提前谢谢你代码：

```
public class ConnectedThread extends Thread {
    private final BluetoothSocket mmSocket;
    private final InputStream mmInStream;
    private final OutputStream mmOutStream;

    public ConnectedThread(BluetoothSocket socket) {
        Log.d(TAG, "connectedthread started");
        // mHandler.obtainMessage(TEST).sendToTarget();
        mmSocket = socket;
        InputStream tmpIn = null;
        OutputStream tmpOut = null;
        // Get the input and output streams, using temp objects because
        // member streams are final
        try {

            tmpIn = socket.getInputStream();
            tmpOut = socket.getOutputStream();

        } catch (IOException e) {
            Log.e(TAG, "temp sockets not created");
        }

        mmInStream = tmpIn;
        mmOutStream = tmpOut;

    }

    public void run() {

        Log.i(TAG, "Begin mConnectedThread");
        byte[] buffer = new byte[1024]; // buffer store for the stream
        int bytes; // bytes returned from read()
        ByteArrayOutputStream bos = new ByteArrayOutputStream();
        // Keep listening to the InputStream until an exception occurs
        while (true) {
            try {
                    // Read from the InputStream
                    bytes = mmInStream.read(buffer);
                    // Send the obtained bytes to the UI activity
                    Log.i(TAG, "reaaaad msg");
                    mHandler.obtainMessage(SetUpGame.MESSAGE_READ2, bytes,
                            -1, buffer).sendToTarget();

                    try {       
                        ObjectInputStream in = new ObjectInputStream(new ByteArrayInputStream(buffer));
                        Ship object = (Ship) in.readObject();
                        in.close();
                        mHandler.obtainMessage(SetUpGame.MESSAGE_READ_OBJ, -1,
                                -1, object).sendToTarget();
                        }
                    catch(ClassNotFoundException cnfe) {
                        Log.e("deserializeObject", "class not found error", cnfe);
                        } catch(IOException ioe) {
                            Log.e("deserializeObject", "io error", ioe);
                            } 

                }

            catch (IOException e) {
                Log.e(TAG, "disconnectd");
                break;
            }
        }
    }

    /*
     * Call this from the main activity to send data to the remote device
     */
    public void write(byte[] buffer) {

        try {

            mmOutStream.write(buffer);
            Log.i(TAG, "writeeee msg");
            mHandler.obtainMessage(SetUpGame.MESSAGE_WRITE, -1, -1, buffer)
                    .sendToTarget();
        } catch (IOException e) {
            Log.e(TAG, "Exception during write");
        }
    }

    public void writeObj(Ship ship) {
        ByteArrayOutputStream bos = new ByteArrayOutputStream();
        try {
            ObjectOutput outObj = new ObjectOutputStream(bos);
            outObj.writeObject(ship);
            outObj.close();
            // Get the bytes of the serialized object
            byte[] buf = bos.toByteArray();
            }
        catch(IOException ioe) {
            Log.e("serializeObject", "error", ioe);
            } 
        }

    /* Call this from the main activity to shutdown the connection */
    public void cancel() {
        try {
            mmSocket.close();

        } catch (IOException e) {
            Log.e(TAG, "close of connect socket failed");
        }
    }

} 
```

日志猫：

> 04-03 20:25:32.799: E/deserializeObject(30255): io 错误 04-03 20:25:32.799: E/deserializeObject(30255): java.io.StreamCorruptedException 04-03 20:25:32.799: E/ deserializeObject(30255): atjava.io.ObjectInputStream.readStreamHeader(ObjectInputStream.java:2369) 04-03 20:25:32.799: E/deserializeObject(30255): at java.io.ObjectInputStream.(ObjectInputStream.java:433) 04 -03 20:25:32.799：E/deserializeObject(30255)：在 com.example.battleships.v2.ChatService$ConnectedThread.run(ChatService.java:292)

和：

> 04-03 20:25:31.868: E/serializeObject(30255): 错误 04-03 20:25:31.868: E/serializeObject(30255): java.io.NotSerializableException: com.example.battleships.v2.SetUpGame$FriendlyGrid 04-03 20:25:31.868: E/serializeObject(30255): 在 java.io.ObjectOutputStream.writeNewObject(ObjectOutputStream.java:1535) 04-03 20:25:31.868: E/serializeObject(30255): 在 java. io.ObjectOutputStream.writeObjectInternal(ObjectOutputStream.java:1847) 04-03 20:25:31.868: E/serializeObject(30255): 在 java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1689) 04-03 20:25: 31.868: E/serializeObject(30255): 在 java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1653) 04-03 20:25:31.868: E/serializeObject(30255): 在 java.io.ObjectOutputStream.writeFieldValues(ObjectOutputStream .java:1143) 04-03 20:25:31.868: E/serializeObject(30255):在 java.io.ObjectOutputStream.defaultWriteObject(ObjectOutputStream.java:413) 04-03 20:25:31.868: E/serializeObject(30255): 在 java.io.ObjectOutputStream.writeHierarchy(ObjectOutputStream.java:1241) 04-03 20 :25:31.868: E/serializeObject(30255): 在 java.io.ObjectOutputStream.writeNewObject(ObjectOutputStream.java:1575) 04-03 20:25:31.868: E/serializeObject(30255): 在 java.io.ObjectOutputStream。 writeObjectInternal(ObjectOutputStream.java:1847) 04-03 20:25:31.868: E/serializeObject(30255): 在 java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1689) 04-03 20:25:31.868: E/ serializeObject(30255): at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1653) 04-03 20:25:31.868: E/serializeObject(30255): at com.example.battleships.v2.ChatService$ConnectedThread.writeObj (ChatService.java:333) 04-03 20:25:31.868: E/serializeObject(30255): at com.example.battleships.v2.ChatService.writeObj(ChatService.java:86) 04-03 20:25:31.868: E/serializeObject(30255): at com.example.battleships .v2.SetUpGame$3.onClick(SetUpGame.java:119) 04-03 20:25:31.868: E/serializeObject(30255): 在 android.view.View.performClick(View.java:2533) 04-03 20: 25:31.868: E/serializeObject(30255): 在 android.view.View$PerformClick.run(View.java:9320) 04-03 20:25:31.868: E/serializeObject(30255): 在 android.os.Handler .handleCallback(Handler.java:587) 04-03 20:25:31.868: E/serializeObject(30255): 在 android.os.Handler.dispatchMessage(Handler.java:92) 04-03 20:25:31.868: E /serializeObject(30255): 在 android.os.Looper.loop(Looper.java:150) 04-03 20:25:31.868: E/serializeObject(30255): 在 android.app.ActivityThread.main(ActivityThread.java: 4385) 04-03 20:25:31.868: E/serializeObject(30255): at java.lang.reflect.Method.invokeNative(Native Method) 04-03 20:25:31.868: E/serializeObject(30255): at java.lang.reflect.Method.invoke( Method.java:507) 04-03 20:25:31.868: E/serializeObject(30255): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849) 04-03 20:25: 31.868: E/serializeObject(30255): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607) 04-03 20:25:31.868: E/serializeObject(30255): 在 dalvik.system.NativeStart .main（本机方法）java:849) 04-03 20:25:31.868: E/serializeObject(30255): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607) 04-03 20:25:31.868: E/ serializeObject(30255)：在 dalvik.system.NativeStart.main(Native Method)java:849) 04-03 20:25:31.868: E/serializeObject(30255): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607) 04-03 20:25:31.868: E/ serializeObject(30255)：在 dalvik.system.NativeStart.main(Native Method)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:41:03.990

Your objects need to be [`Serializable`](http://www.tutorialspoint.com/java/java_serialization.htm), as well as its fields. If you don't care about (some of) the fields, you can use the `transient` keyword.

For example:

```
class House implements Serializable{

    private int numberOfWindows; //No problem here

    private Roof myRoof; //The Roof class should implement Serializable as well!

    private transient Door myFrontDoor; //The Door class doesn't need to implement Serializable, it will be ignored.

} 
```

See [here](http://developer.android.com/reference/java/io/Serializable.html).

# java - JPanel 和 BufferedImage

> ID：15796425
> 
> 赞同：2
> 
> 时间：2013-04-03T19:35:34.967
> 
> 标签：java, swing, jpanel, bufferedimage, java-2d

如何在 JPanel 中显示 BufferedImage ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T19:40:08.793

[试试这个 ：](https://stackoverflow.com/a/299555/1743852)

```
import java.awt.Graphics;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.imageio.ImageIO;
import javax.swing.JPanel;

public class ImagePanel extends JPanel{

private BufferedImage image;

public ImagePanel() {
   try {                
      image = ImageIO.read(new File("image name and path"));
   } catch (IOException ex) {
        // handle exception...
   }
}

@Override
protected void paintComponent(Graphics g) {
    super.paintComponent(g);
    g.drawImage(image, 0, 0, null); // see javadoc for more info on the parameters            
}

} 
```

并尝试阅读此[示例以将 BufferedImage 显示为 ImageIcon](http://java-buddy.blogspot.com/2012/10/example-to-display-bufferedimage-as.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T19:48:25.537

我现在不确定，但我相信你需要做一个

```
BufferedImage image = ImageIO.read(new File("image path"));
ImageIcon img = new ImageIcon(image);
img.setVisible(true);
add(img); 
```

在构造函数内部。我现在不记得了，我没有编译器来测试，但这就是我如何将图像正常添加到面板并`super.repaint();`根据需要调用。

编辑：我相信`repaint();`也会完成这项工作。

# apache - 对 Apache CXF 创建的 Wsdl 施加限制

> ID：15796429
> 
> 赞同：1
> 
> 时间：2013-04-03T19:35:55.050
> 
> 标签：apache, jakarta-ee, cxf

我目前正在开发一些 Web 服务的项目，我们选择了 Apache CXF 作为首选技术。我们正在使用最后契约的方法（我们正在编写我们的服务并允许 CXF 为我们生成 wsdl。）虽然我们已经能够使用 Java-WS 注释来根据需要设置某些字段，但我们无法弄清楚如何对 wsdl 中的字符串元素施加字符限制。虽然这不是什么大不了的事（我们与我们正在合作的供应商相当接近，所以暂时同意不让向我们提出的请求超过所说的长度就足够了），我们很好奇是否有一种方法来做到这一点。

有没有办法使用 CFX 对输入字符串施加 20 个字符的限制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T19:53:24.027

这不是 JAXB 提供的东西。但是，有一个分叉了 jaxb-ri 的项目添加了对此的支持：

[https://github.com/whummer/jaxb-facets](https://github.com/whummer/jaxb-facets)

如果您不需要在 WSDL 中反映方面，则可以将验证作为 JAXB bean 的 setter 方法的一部分进行。

```
setName(String s) {
   if (s.length() > 20) thrown new Exception(....);
   name = s;
} 
```

还有一些事件是 JAXB bean 在解组之后可以响应的，您可以在其中验证事物。请参阅 javadoc 中的 afterUnmarshall 描述：http: [//docs.oracle.com/javase/6/docs/api/javax/xml/bind/Unmarshaller.html](http://docs.oracle.com/javase/6/docs/api/javax/xml/bind/Unmarshaller.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T22:33:09.747

当您对 web 服务执行自下而上的方法时（即首先 impl，然后是 WSDL），您将受到 web 服务引擎对数据类型的限制的摆布。

但是，如果您采用自顶向下的方法（首先是 WSDL，然后是 impl），您可以消除这类问题，但需要您知道如何开发 WSDL 和应用方面（限制）。

幸运的是，CXF 两者都支持，你可以试试[`wsdl2java`](http://cxf.apache.org/docs/developing-a-service.html#DevelopingaService-Runningwsdl2java).

还要记住，添加一个方面并不意味着它将由 web 服务引擎强制执行。大多数引擎只是忽略它，尽管我不确定 CXF。

# git - 提交未正确显示

> ID：15796431
> 
> 赞同：1
> 
> 时间：2013-04-03T19:35:59.087
> 
> 标签：git, version-control

我遇到了一个我无法解释也找不到解决方法的 git 问题。

我有一个包含 15000 多个文件（大约 650 MB）的存储库，在过去一周左右的时间里，我一直在丢失提交，或者至少没有正确显示它们。它不会发生在每次提交/推送中，而是随机发生（看起来）。我使用 Stash 前端运行 git。我想不出任何可能导致这种行为的基础设施变化等。

如果我更改目录 aaa/bbb/ccc 中名为 test.xml 的文件并提交并推送，我有时会在更改完成的 repo 克隆或任何其他克隆中看不到更改。如果我执行“git log”，则没有日志条目。如果我在目录 ccc 中执行“git log”，我可以在父目录 aaa 和 bbb 中看到日志条目。

如果我执行“git reflog”，则更改存在并且在正确的分支（master）上，如果我执行“git branch --contains”（在任何克隆中），它会在 master 分支中找到。

这一切都使用 git 1.7.11.msysgit.1 在 Windows 上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T17:34:07.173

回答我自己的问题...

事实证明，“丢失的”提交可以通过命令 'git log --follow' 找到。为什么 git 认为这些提交是“重命名”仍然有些神秘，但可能可以通过后来的合并提交覆盖更改来解释，原始更改放回更晚的提交，然后再次被几个合并提交覆盖。

# php - 当需要许多新对象实例时，如何实现依赖注入？

> ID：15796432
> 
> 赞同：1
> 
> 时间：2013-04-03T19:35:59.273
> 
> 标签：php, dependency-injection

我正在尝试理解一些 DI 概念。如本例所示，可以轻松地为每个依赖项转换单个实例。

**非直接投资**

```
$my_cal = new MyCal();

class MyCal {
    public function __construct() {
        $this->date  = new MyDate();
        $this->label = new MyLabel();
    }
} 
```

**DI**

```
$my_date  = new MyDate();
$my_label = new MyLabel();
$my_cal   = new MyCal($my_date, $my_label);

class MyCal {
    public function __construct(MyDate $date_class, MyLabel $label_class) {
        $this->date  = $date_class;
        $this->label = $label_class;
    }
} 
```

但是如何转换具有许多实例调用（例如 30 个）的类？

**非直接投资**

```
$my_cal = new MyCal();

class MyCal {
    public function __construct() {
        $today       = new MyDate(...);
        $tomorrow    = new MyDate(...);
        $next_day    = new MyDate(...);
        $yesterday   = new MyDate(...);
        $another_day = new MyDate(...);
        // ...
        $label1 = new MyLabel(...);
        $label2 = new MyLabel(...);
        $label3 = new MyLabel(...);
        $label4 = new MyLabel(...);
        // ...
    }
} 
```

这可能是使用容器或工厂的时候吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T09:31:57.230

解决方案非常简单。
您只需要传递一次依赖项。在这种情况下，您应该执行以下操作：

```
$date = new MyDate();

class MyCal {
   function __construct( MyDate $dateService ) {
        $today       = $dateService->get('today');
        $tomorrow    = $dateService->get('tomorrow');
        $next_day    = $dateService->get('next_day');
        ...
   }
} 
```

这样，您就暴露了您的类依赖于另一个对象的事实，`MyDate`并且您只需将其传递一次。

# excel - 如何自动刷新 Excel 文件并通过电子邮件发送？

> ID：15796433
> 
> 赞同：2
> 
> 时间：2013-04-03T19:35:59.953
> 
> 标签：excel

我有一些 Excel 文件（数据透视表和图表）与 Access 数据库有数据连接。我希望做的是让它们自动刷新并在每个月的 1 日收到电子邮件。

我在 Access 中做了类似的事情，我有一个数据库，其中包含一个可以运行并通过电子邮件发送的查询。我通过在数据库中创建一个表单，在打开数据库时自动打开表单，然后在表单中使用 VBA 运行查询（DoCmd.OpenQuery），然后通过电子邮件发送它（DoCmd.SendObject）来实现这一点

我可以用 Excel 文件做类似的事情吗？我想我可以将“数据”选项卡下的“连接属性”设置为“打开文件时刷新数据”，但这假设用户具有活动的网络连接，因为数据库位于服务器上。此外，如果用户保存文件并在将来再次打开它，它将具有当前数据而不是原始数据。

所以简而言之，我需要：

1.  打开 Excel 文件
2.  刷新数据
3.  电子邮件文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T12:15:38.380

这就是我最终做的事情：

在 Access 中，我有一些 Make Table 查询可以制作 Excel 文件将使用的表格 (duh)。我创建了一个表单，在数据库打开时自动打开它，`Form_Load()`如果我输入以下内容：

```
With DoCmd
    .SetWarnings False
    .OpenQuery "My Query 1"
    .OpenQuery "My Query 2"
    .SetWarnings True
End With
Application.Quit 
```

在每个 Excel 文件中，我在网上找到了一些 VBA 代码来创建 PDF，然后通过电子邮件发送。在这种情况`Workbook_Open()`下，我有以下内容：

```
ActiveSheet.Unprotect
ActiveWorkbook.Connections("MyConnection").Refresh
ActiveSheet.Protect

Call FunctionThatCreatesPDFAndEmails

ActiveWorkbook.Close False 
```

然后，我在 Windows 任务计划程序中放置了一些任务 .. 一个打开 Access 数据库（这会导致生成表查询运行，然后自行关闭），然后为每个需要更新和发送电子邮件的 Excel 文件执行一个任务。所以现在我有 Access 更新源数据表，然后 Excel 打开每个文件，刷新数据，并通过电子邮件发送自身的 PDF。任务完成！

# rendering - 光栅化和渲染有什么区别？

> ID：15796436
> 
> 赞同：10
> 
> 时间：2013-04-03T19:36:04.657
> 
> 标签：rendering, rasterizing

任何人都可以解释渲染与光栅化有何不同，特别是在字体渲染的上下文中（为什么不是字体光栅化）？

在光栅化器对图像进行光栅化之前，渲染可以称为特殊技术（如灰度渲染和亚像素渲染）吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T19:52:55.147

*渲染*是一个广义术语，通常意味着将计算机可读信息（例如 3d 场景中的对象）转换为一个或多个图像。

*光栅化*是一个更具体的术语，通常表示将矢量（基于曲线）图像转换为光栅化（基于像素）图像的过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-02T23:39:50.337

渲染涉及为要绘制的元素执行矢量和形状几何图形的计算。

光栅化涉及将渲染的矢量和形状转换为像素位图以供显示。

# c# - 在 C# 中将子节点添加到树视图

> ID：15796440
> 
> 赞同：1
> 
> 时间：2013-04-03T19:36:09.830
> 
> 标签：c#, treeview

我有一个包含汽车品牌及其各自型号的树视图。我有一个添加新 Make（父节点）的按钮。

```
private void btnMake_Click(object sender, EventArgs e)
{
    string inputMake;
    inputMake = Microsoft.VisualBasic.Interaction.InputBox("Enter Make: ", "Add Car Manufacturer");
    carMake.Add(inputMake); // arrayList to store car Makes
    carTree.Nodes.Add(new TreeNode(inputMake));
} 
```

我遇到的问题是添加模型（子节点）。我有一个添加模型的按钮，但我不知道如何区分适当的父节点。

我目前有以下代码：

```
private void btnModel_Click(object sender, EventArgs e)
{
    string inputModel;
    int index = carTree.Nodes.IndexOf(carTree.SelectedNode);
    //MessageBox.Show(carMake[index].ToString());
    //inputModel = Microsoft.VisualBasic.Interaction.InputBox("asfdasdf", "asdfasdf");
    //carTree.Nodes[index].Nodes.Add(new TreeNode(inputModel));
} 
```

由于 testing ，最后几行被注释掉了。. . 我将护理 Makes（父节点）放入 ArrayList，但在访问 ArrayList 时遇到问题。此行返回错误：

```
 //MessageBox.Show(carMake[index].ToString()); 
```

最终，我想要一些帮助，以最有效的方式将子节点添加到相应的父节点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T19:52:21.510

试试这个 ：

```
if(carTree.SelectedNode == null)
  MessageBox.Show("Please select a node first");    

carTree.SelectedNode.Nodes.Add(new TreeNode("Child")); 
```

# c# - C# Linq 在 CSV 中选择 ID 等于 ID 的行

> ID：15796441
> 
> 赞同：1
> 
> 时间：2013-04-03T19:36:10.617
> 
> 标签：c#, sql-server, linq, csv

我所拥有的是从查询字符串（例如 23、51、6、87、29）接收到的一串逗号分隔的 ID。或者，该字符串可以只说“全部”。

在我的 Linq 查询中，我需要一种说法（在伪代码中）：

```
from l in List<>
    where l.Id = all_of_the_ids_in_csv
    && other conditions
select new {...} 
```

我只是不知道该怎么做。我什至不确定用谷歌搜索什么来让我朝着正确的方向前进。任何指向正确方向的东西都会非常有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T19:41:28.727

我建议将您的查询分成两部分 - 第一部分将按 ID 选择，而选择的部分将选择*其他条件*。

首先：检查查询字符串是否包含数字，或者*只是`all`*：

```
var IEnumerable<ListItemType> query = sourceList;

if(queryStringValue != "All")
{
    var ids = queryStringValue.Split(new[] { ',' })
                              .Select(x => int.Parse(x)) // remove that line id item.Id is a string
                              .ToArray();

    query = query.Where(item => ids.Contains(item.Id));
}

from l in query
    // other conditions
select new {...} 
```

因为 LINQ 查询延迟执行，您可以构建这样的查询而不会降低性能。`ToList`在您要求结果（通过调用或枚举）之前，不会执行查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T19:41:02.073

如果您真的只需要一个 LINQ 查询：

```
var idArray = all_of_the_ids_in_csv.Split(',');
from l in List<>
    where (all_of_the_ids_in_csv == "All" || idArray.Contains(l.Id))
    && other conditions
select new {...} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T19:41:45.420

诀窍是使用`string.Split`

```
var ids = string.split(rawIdString, ",").ToList();
var objects = ids.Where(id=> /*filter id here */).Select(id=>new { /* id will be the single id from the csv */ }); 
// at this point objects will be an IEnumerable<T> where T is whatever type you created in the new statement above 
```

# cakephp - Cakephp：临时转到另一个表格时如何保持表格填写？

> ID：15796443
> 
> 赞同：0
> 
> 时间：2013-04-03T19:36:14.733
> 
> 标签：cakephp, cakephp-2.3

在 cakephp 2.3 中：

假设我有一个由`controllerX`. 我开始填写数据，在某处有一个用于执行某些任务的按钮，该按钮将打开一个由`controllerY`for生成的新表单（模态窗口） `ModelY`。每当我完成第二张表格时，我都会丢失我在第一张表格中填写的所有内容。我尝试了几件事，包括重定向到`$this->referrer()`，但都不起作用。

谢谢

**更新 1）** 我正在添加代码片段：注意：我正在使用 twitter bootstrap。下面的代码来自“违规”添加视图。在这个表单中，我想让用户添加一个新的组织。

```
<script type="text/javascript">

        /****** helper functions *******/
    function onClickAddOrgLink() {
        $('#myModal').modal();
    }

</script>

<?php
echo $this->Form->create();
echo $this->Form->input('number');
echo $this->Form->input('organization_id');
//Add new organization button
echo '<a id="addOrgLink" href="#myModal" role="button" class="btn" data-toggle="modal">Add new Org</a>';
$this->Js->get('#addOrgLink')->event('click', 'onClickAddOrgLink()');

echo $this->Form->input('remarks', array('type'=>'textarea','rows'=>'6'));
echo $this->Form->end(array('class'=>'btn btn-primary', 'div'=>false,'name'=>'submit', 'label' => 'add'));
?>
<!-- Modal -->
<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h3 id="myModalLabel">adding a new org</h3>
    </div>
    <div class="modal-body">
        <p>
            <?php
            echo $this->Form->create('Organization', array('controller'=>'organizations', 'action'=>'add'));
            echo $this->Form->input('company_name', array('div'=>false));
            echo $this->Form->input('address1', array('div'=>false));

            echo '  <div class="modal-footer">
                    <button class="btn" data-dismiss="modal" aria-hidden="true">cancel</button>&nbsp;&nbsp;';
            echo $this->Form->end(array('class'=>'btn btn-primary', 'div'=>false, 'name'=>'submit', 'label' => 'ADD'));
            echo '</div>';
            ?>
        </p>
    </div>
</div> 
```

这是添加新的组织操作：

```
var $helpers=array('Session', 'Js', 'Html');

    public function add() {
        $this->autoRender=false;
        $this->Organization->create();
        $this->Organization->save($this->request->data);
        $this->redirect($this->referer());
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T21:38:54.140

不是一个“完整”的答案，而是一些可能有助于实施解决方案的建议；

## 选项 1 - 自动保存（草稿）

实施`autosave`；在包含表单的任何页面上，添加一个 JavaScript 以特定时间间隔（例如每 xx 秒）*或*当用户离开页面时将表单（通过 AJAX）提交到服务器端自动保存处理程序。

服务器端处理程序将提交的数据存储在会话中，使用页面的 URL 作为“标识符”（例如 /Users/edit/123）。返回页面时，检查会话中是否存在草稿（自动保存），并使用该信息填充请求数据；

```
public function beforeRender() {
    if (!$this->request->is('post')) {
        // restore autosave data for the current url if no form is posted
        $this->request->data = $this->AutosaveComponent->restore($this->request->here);
    } else {
        // form is posted; flush the autosave data for the current URL
        $this->AutosaveComponent->flush($this->request->here);
    }
} 
```

## 选项 2 - 灯箱

另一种选择是在灯箱中打开“中断”表单；当前正在处理的表单将保持打开状态，提交灯箱表单不会中断此操作。

## 更新 - 一些建议

基本上，您想要实现的是；

*   用户选择一个组织，输入备注并提交表单
*   如果组织尚不存在，则允许用户通过模式/弹出窗口*添加*新组织。通过模态添加后选择该组织，输入备注并填写表格。

### 使用 AJAX 提交 Modal 框

目前，您的模态窗口将通过“常规”提交而不是通过 AJAX 提交，因此页面将在提交模态框后重新加载。

您应该通过 AJAX 提交 Modal 框，然后使用 AJAX“完成”处理程序将新创建的组织附加到下拉列表中。

但是，由于您还必须在 Modal 框中显示*组织的验证错误，因此最好也通过 AJAX**加载*“添加组织表单”。

所有这些都需要对您的代码*和*额外的 JavaScript 进行相当多的更改来执行 AJAX 处理。

### 创建新组织*，同时*提交备注

基本上，将两种形式组合成一个形式；

*   默认情况下，“组织”的输入字段是隐藏的
*   如果用户从下拉列表中选择现有组织，“组织”字段将保持隐藏状态
*   如果用户从下拉列表中选择“其他组织...”，“组织”字段将变为可见，用户可以输入新组织的详细信息

提交表格后：

*   如果用户选择了“其他组织...”，则插入新组织并使用新组织的“id”插入“备注”。
*   如果用户选择了*现有*组织，则仅插入备注。

# c# - 这个 XSD 到底哪里出了问题？

> ID：15796444
> 
> 赞同：0
> 
> 时间：2013-04-03T19:36:18.430
> 
> 标签：c#, xml, xsd-validation

我正在尝试编写 XSD 文档

```
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema" targetNamespace="urn:books" xmlns:bks="urn:books">
 <xsd:element name="Books" type="bks:BooksForm"/>
    <xsd:complexType name="BooksForm">
        <xsd:sequence>
            <xsd:element name="Book"    type="bks:BookForm"  minOccurs="0"     maxOccurs="unbounded"/>
        </xsd:sequence>
    </xsd:complexType>

  <xsd:complexType name="BookForm">
    <xsd:sequence>
      <xsd:element name="Author"   type="bks:AuthorForm" minOccurs="1"  /><!--1-->
      <xsd:element name="Isbn"    type="xsd:string" minOccurs="1" />
      <xsd:element name="Title"    type="xsd:string" minOccurs="1" />
      <xsd:element name="Publisher" type="xsd:string"  minOccurs="1" />
      <xsd:element name="YearValue" type="bks:YearForm" minOccurs="1" /><!--2-->
    </xsd:sequence>
    <xsd:attribute name="Cover"   type="xsd:string"/>
  </xsd:complexType>

    <xsd:complexType name="AuthorForm">
    <xsd:sequence>
     <xsd:element name="Name"   type="bks:NameForm"/><!--1-->
      <xsd:element name="Contact"    type="bks:ContactForm"/> <!--2-->
    </xsd:sequence>
    </xsd:complexType>

    <xsd:complexType name="YearForm">
        <xsd:sequence>
            <xsd:element name="Year"   type="xsd:integer"/><!--1-->
        </xsd:sequence>
    <xsd:attribute name="Edition"   type="xsd:integer"/>
    </xsd:complexType>

    <xsd:complexType name="NameForm">
    <xsd:sequence>
     <xsd:element name="First"   type="xsd:string"/><!--1-->
      <xsd:element name="Last"    type="xsd:string"/> <!--2-->
    </xsd:sequence>
    </xsd:complexType>

    <xsd:complexType name="ContactForm">
    <xsd:sequence>
     <xsd:element name="Phone"   type="xsd:string"/><!--1-->
     </xsd:sequence>
     <xsd:attribute name="Office"   type="xsd:string"/>
    </xsd:complexType>

</xsd:schema> 
```

与以下 XML 文档匹配的

```
<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="Courses.xsl"?>
<Books>
  <Book Cover="Paper back">
    <Isbn>978-1-4652-0558-2</Isbn>
    <Title>Service-Oriented Computing</Title>
    <Author>
      <Name>
        <First>John</First>
        <Last>Doe</Last>
      </Name>
      <Contact Office="BY400">
        <Phone>480-965 000</Phone>
      </Contact>
    </Author>
    <Publisher>Kendall Hunt</Publisher>
    <Year Edition="3">
      <Year>2012</Year>
    </Year>
  </Book>
....</Books> 
```

但是，当我尝试在线验证时出现以下错误

```
Line 3, 8   cvc-elt.1.a: Cannot find the declaration of element 'Books'. 
```

但据我所知，我已经正确地声明了它。谁能指出我在这里做错了什么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T20:13:03.090

第一个问题实际上与这一行有关： `<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema" targetNamespace="urn:books" xmlns:bks="urn:books">`

`books`在这里没有大写，就像在文档中的其他地方一样。

这是一个更“完整”的修复：

我做了几件事。首先，我删除了`targetNamespace`和`xmlns:bks`部分。然后我重新排序了`BookForm`类型中的一些项目，固定`YearValue`为`Year`xml 数据中的内容。然后我删除了所有对`bks`. 它现在验证。

```
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema">
 <xsd:element name="Books" type="BooksForm"/>
    <xsd:complexType name="BooksForm">
        <xsd:sequence>
            <xsd:element name="Book"    type="BookForm"  minOccurs="0"     maxOccurs="unbounded"/>
        </xsd:sequence>
    </xsd:complexType>

  <xsd:complexType name="BookForm">
    <xsd:sequence>
      <xsd:element name="Isbn"    type="xsd:string" minOccurs="1" />
      <xsd:element name="Title"    type="xsd:string" minOccurs="1" />
      <xsd:element name="Author"   type="AuthorForm" minOccurs="1"  /><!--1-->
      <xsd:element name="Publisher" type="xsd:string"  minOccurs="1" />
      <xsd:element name="Year" type="YearForm" minOccurs="1" /><!--2-->
    </xsd:sequence>
    <xsd:attribute name="Cover"   type="xsd:string"/>
  </xsd:complexType>

    <xsd:complexType name="AuthorForm">
    <xsd:sequence>
     <xsd:element name="Name"   type="NameForm"/><!--1-->
      <xsd:element name="Contact"    type="ContactForm"/> <!--2-->
    </xsd:sequence>
    </xsd:complexType>

    <xsd:complexType name="YearForm">
        <xsd:sequence>
            <xsd:element name="Year"   type="xsd:integer"/><!--1-->
        </xsd:sequence>
    <xsd:attribute name="Edition"   type="xsd:integer"/>
    </xsd:complexType>

    <xsd:complexType name="NameForm">
    <xsd:sequence>
     <xsd:element name="First"   type="xsd:string"/><!--1-->
      <xsd:element name="Last"    type="xsd:string"/> <!--2-->
    </xsd:sequence>
    </xsd:complexType>

    <xsd:complexType name="ContactForm">
    <xsd:sequence>
     <xsd:element name="Phone"   type="xsd:string"/><!--1-->
     </xsd:sequence>
     <xsd:attribute name="Office"   type="xsd:string"/>
    </xsd:complexType>

</xsd:schema> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T19:56:17.570

我为你写了一个新的 XSD；希望它能满足您的需求：

```
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="Books">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="Book">
          <xs:complexType>
            <xs:sequence>
              <xs:element type="xs:string" name="Isbn"/>
              <xs:element type="xs:string" name="Title"/>
              <xs:element name="Author">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="Name">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element type="xs:string" name="First"/>
                          <xs:element type="xs:string" name="Last"/>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="Contact">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element type="xs:string" name="Phone"/>
                        </xs:sequence>
                        <xs:attribute type="xs:string" name="Office"/>
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element type="xs:string" name="Publisher"/>
              <xs:element name="Year">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element type="xs:short" name="Year"/>
                  </xs:sequence>
                  <xs:attribute type="xs:byte" name="Edition"/>
                </xs:complexType>
              </xs:element>
            </xs:sequence>
            <xs:attribute type="xs:string" name="Cover"/>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T20:25:15.623

我认为您的 XSD 没有问题，但 XML 没有问题。您的 XML 中缺少命名空间规范。它应该是：`<Books xmlns="urn:books">`

# ios - 是否可以在 Xcode 中为字符串文件创建类似结构的继承？

> ID：15796446
> 
> 赞同：3
> 
> 时间：2013-04-03T19:36:23.927
> 
> 标签：ios, localizable.strings

我有一个应用程序，它根据目标具有不同的字符串集。是否可以有一个基本字符串文件，然后只覆盖另一个中的几个键？

例如，如果我的基本文件是这样的：

```
"some-string" = "base-value"
"other-string" = "1234" 
```

然后对于我的一个目标，关联另一个具有以下内容的字符串文件：

```
"some-string" = "overridden-value" 
```

因此，如果我运行包含附加字符串文件的目标，输出将是：

```
NSLocalizedString(@"some-string", nil) => "overridden value"
NSLocalizedString(@"other-string", nil) => "1234" 
```

我非常希望不要在覆盖字符串文件中抛出未修改的字符串。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T19:45:33.930

怎么样

```
NSLocalizedStringWithDefaultValue(@"some-string",
                                  @"additionalStringsTableName", 
                                  [NSBundle mainBundle],
                                  NSLocalizedString(@"some-string", nil),
                                  nil); 
```

在覆盖的字符串文件中执行查找。如果失败，则返回默认`NSLocalizedString()`结果。

拥有整个代码是一件相当丑陋的事情。因此，您可能想要使用一些宏魔术来获得更短的通话时间。像这样的东西：

```
#define MyLocalizedString(key, comment) NSLocalizedStringWithDefaultValue(key,
                                  OVERRIDE_TABLE_NAME, 
                                  [NSBundle mainBundle],
                                  NSLocalizedString(key, comment),
                                  comment); 
```

（为了清楚起见，写在多行上）。然后你可以定义`OVERRIDE_TABLE_NAME`为一个编译器选项。

# c - .c 源文件消失了，还有希望吗？

> ID：15796447
> 
> 赞同：0
> 
> 时间：2013-04-03T19:36:32.040
> 
> 标签：c, compilation, compiler-errors, file-not-found

当我想编译和测试我的程序时，我正在做一些 C 编程。

`gcc -g -o main file.c file2.c file3.c ...`直到那时，我才突然从 gcc 收到十几个未定义的参考错误消息。ls 和 ls -la 显示我的 file1.c 已**消失**。我在屏幕上，但没有从其他任何地方连接。还有希望吗？

我在远程终端上运行它，所以我唯一的希望是联系系统管理员并请求回滚我的主目录吗？

**更新**

我已经设法获得了几个小时前的备份，所以现在一切都应该很好。**谁在读这个**：做备份。我没有。我很幸运，这不是我赌注再次发生的事情。

我没有备份的唯一原因是因为我将它与一些库链接，这样调试它比使用 makefile 更容易。我错了。*备份一切*。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:47:05.847

我会尝试`history`查看您是否不小心将文件移动到某个地方。也将尝试`ls -la`查看是否没有备份文件。

# hibernate - 在系统启动时让 Hibernate 插入数据

> ID：15796448
> 
> 赞同：0
> 
> 时间：2013-04-03T19:36:33.617
> 
> 标签：hibernate, jsf, jsf-2

Hibernate 属性 - hibernate.hbm2ddl.import_files - 只有在 - hibernate.hbm2ddl.auto - 设置为创建时才会被触发。

是否有任何实现来“改变”它？

不是 hibernate.hbm2ddl.import_files 的行为方式......而是一种在系统启动后 Hibernate 插入一些数据的方式（即使创建了表）。执行纯 SQL 脚本无法满足我的需求，因为不会尊重 @Id @GeneratedValue。

最后，我需要一种方法让系统检测数据库中是否存在某些数据，如果不存在，则将其填充。有没有人知道这样做并尊重我的@GeneratedValue 计数器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T00:28:42.440

您可以只创建一个`@ApplicationScoped`托管 bean，它调用将数据插入数据库的方法。

```
@ManagedBean(eager = true)
@ApplicationScoped
public class App {

    @PostConstruct
    public void init() {
        myDAO.initDatabaseIfNeeded();
    }
} 
```

该方法`myDao.initDatabaseIfNeeded()`在应用程序初始化时调用，并且在解决任何依赖关系之后 - 因此在 Hibernate 已经创建了任何表之后。

我最近在 Spring 应用程序上做了类似的事情，所以在我的例子中*myDAO*实际上是一个 Spring 服务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T05:35:40.373

除了 elias 提出的正确答案之外，您还可以添加一个`ServletContextListener`，因为它可能是实现您的功能的更清晰的方法。为此，您需要实现`ServletContextListener`接口并使用 注释该类`@WebListener`，或者在您的 web.xml 中声明它。

```
public class MyServletContextListener implements ServletContextListener {

@Override
public void contextInitialized(ServletContextEvent sce) {
    initializeDatabase();
}

@Override
public void contextDestroyed(ServletContextEvent sce) {   }

} 
```

然后你要么必须在 web.xml 中添加一个声明：

```
<listener>
    <listener-class>yourpackage.MyServletContextListener</listener-class>
</listener> 
```

或者，如果您当前使用的是 Servlet 3.0，只需使用`@WebListener`.

# python - Py2app 与本机 Python 2.6

> ID：15796454
> 
> 赞同：0
> 
> 时间：2013-04-03T19:36:52.003
> 
> 标签：python, macos, matplotlib, igraph, py2app

我有一个主要依赖于 matplotlib、tkinter、numpy 和 scipy 的 python 应用程序，我一直在为多个操作系统分发。我在 python.org 版本的 python 2.6 之上构建这些。对于 mac，我过去使用 py2app 和 pyinstaller 构建我的应用程序的独立版本取得了很好的成功。然而，最近，我包含了需要 patsy、pandas 和 igraph 的函数，并且必须迁移到 python 2.6 的 mac 分布式版本才能使 igraph 工作。在 Mac 上为我的操作系统（10.6）构建我的软件的 py2app 版本时一切正常，但是当我在 10.8 上运行时，我遇到了以下错误：

```
Traceback (most recent call last):
 File "UI.pyc", line 603 createHeatMap
 File "clustering.pyc", line 31, in <module>
 File "mpl_toolkits/__init__.pyc", line 2, in <module>
 File "/System/Library/Frameworks/Python.framework/Versions/2.6/Extras/lib/python/pkg_resources.py", line 698, in <module>
 File "/System/Library/Frameworks/Python.framework/Versions/2.6/Extras/lib/python/pkg_resources.py", line 701, in Environment
 File "/System/Library/Frameworks/Python.framework/Versions/2.6/Extras/lib/python/pkg_resources.py", line 96, in get_supported_platform
 File "/System/Library/Frameworks/Python.framework/Versions/2.6/Extras/lib/python/pkg_resources.py", line 222, in get_build_platform
 File "/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/distutils/util.py", line 98, in get_platform
 File "/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/distutils/sysconfig.py", line 537, in get_config_vars
 File "/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/distutils/sysconfig.py", line 405, in _init_posix
DistutilsPlatformError: invalid Python installation: unable to open /user/include/python2.6/pyconfig.h (No such file or directory) 
```

通过将文件 pyconfig.h 保存到目标机器上的指定位置（在 10.8 中不存在，但在 10.6 中存在），可以解决此问题，这使我的应用程序可以正常工作。在我的 py2app pacakge 目录中，在“Contents/Resources”下有一个指向“include”目录的符号链接，它指向：/System/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/pyconfig 。H。如果我将 pyconfig.h 文件作为附加资源包含在我的 py2app 设置文件中，它也会包含在包中，但仍然无法识别。

任何人都可以建议一个好的解决方法，不需要我使用 python.org 版本的 python（我很幸运让 igraph 使用它）。

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:51:44.927

这是 py2app 中的一个已知问题，请参阅[https://bitbucket.org/ronaldoussoren/py2app/issue/36/py2app-fails-to-build-a-working-executable](https://bitbucket.org/ronaldoussoren/py2app/issue/36/py2app-fails-to-build-a-working-executable)。pyconfig.h 文件仅存在于安装了开发人员工具的机器上，这就是我自己没有注意到问题的原因。

最简单的解决方法可能是在创建应用程序包后用文件副本替换 pyconfig.h 符号链接。

# for-loop - 终止循环的 for 循环的括号表达式部分的名称是什么？

> ID：15796458
> 
> 赞同：-4
> 
> 时间：2013-04-03T19:36:56.370
> 
> 标签：for-loop, terminology

我正在尝试回答以下问题：

> 终止循环的 for 循环部分的名称是什么？

括号是`()`，但我不明白剩下的问题。如果我有一个像这样的循环：

```
// enter code here

int k = 0;
for (int j=0;j<=10;j++)
{
  k++
} 
```

`j<=10`子表达式的名称是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-16T14:05:52.090

> 终止循环的 for 循环的括号部分的名称是什么？

在您的示例中，`j<=10`是定义循环[退出条件](http://www.dummies.com/how-to/content/how-to-construct-a-basic-for-loop-in-the-c-languag.html)的整个循环表达式的一部分。一些资料将循环表达式的这一部分描述为[continue 或 end 条件](http://www.codingunit.com/c-tutorial-for-loop-while-loop-break-and-continue)。这个子表达式也可以用其他方式来描述，但是*退出条件*非常明确，并且清楚地传达了它的目的和意图。每当退出条件评估为真时，循环将退出。

当然，您也可以在循环主体内放置额外的循环控件，例如*break*或*continue*。但是，这些流控制关键字不是循环本身定义的一部分，因此超出了您原始问题的范围。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T19:40:03.613

You might call it the for loop's "condition" as it's called at [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for) for example.

```
for ([initialization]; [condition]; [final-expression])
   statement 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-12-16T13:31:19.040

答案是“中断声明”。

# php - 使用 symfony 上传和文件验证

> ID：15796464
> 
> 赞同：0
> 
> 时间：2013-04-03T19:37:15.947
> 
> 标签：php, file-upload, symfony-1.4

我是 Symfony 的新手，上传文件时遇到问题

我只是不让它工作，而且我找不到能告诉我确切如何使用它或告诉我它是如何工作的东西（我已阅读 smyfony 官方文档）

这是我的代码：

表格

```
class PagosForm extends BasePagosForm
{
  public function configure()
  {
    $this->setWidgets(array('file' => new sfWidgetFormInputFile()));

    $this->widgetSchema->setNameFormat('pagos[%s]');

    $this->setValidators(array('file' => new sfValidatorFile(array(
        'required'   => false
        ))));
  }
} 
```

行动

```
public function executeSelect(sfWebRequest $request)
  {
     $this->form = new PagosForm();
  }

 public function executeUpload(sfWebRequest $request)
  {

    $this->form = new PagosForm();

    if ($request->isMethod('post'))
    {
      $this->form->bind($request->getParameter($this->form->getName()), $request->getFiles($this->form->getName()));

      if ($this->form->isValid())
      {
        echo "isvalid";
        move_uploaded_file($_FILES["file"]["tmp_name"], sfConfig::get('sf_upload_dir').'/'.$_FILES["file"]["name"]);
      }
      else 
      {  
        echo "isinvalid";
        //echo var_dump($this->form);
      }
    }
  } 
```

在选择中，输出了一个用于选择文件并提交的按钮：这将我们带到操作上传。

选择成功.php

```
<?php echo form_tag('pagos/upload', 'enctype="multipart/form-data"', 'method="POST"') ?>
<?php echo $form['file'] ?>
<?php echo submit_tag('Send') ?> 
```

我在使用 eclipse 时遇到了一些问题，所以我使用 Sublime text 2（文本编辑器）进行编码，所以我很难找到错误。

我之所以使用它`move_uploaded_file`是因为由于某种原因，我无法让它发挥 symfony 上传文件的功能。这样我就可以搞定了，但是如果我想加一些验证（比如只允许上传excel文件），就搞不定了。。

我总是打印“isinvalid”行，除非我删除了设置验证器的表单中的行。因此，由于某种原因，验证器无法正常工作..

我也尝试创建自定义验证器，扩展 sfValidatorFile，但根本不起作用（我什至无法上传任何文件或呈现页面）

所以，在我的脑袋爆炸之前，我需要一点帮助（由 symfony 引起：P）

代码有什么问题，我总是得到无效文件？我正在尝试上传一个 3 KB 的简单 .txt，如果我删除了验证，我可以正常上传

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T13:06:53.550

由于没有人回答这个问题，我会自己说：

我需要用来`<?php echo $form->renderHiddenFields() ?>`渲染 _csrf_token 字段（和其他隐藏的输入）。

有了这个，验证已经通过

# css - 将div放在右下角

> ID：15796470
> 
> 赞同：2
> 
> 时间：2013-04-03T19:37:27.507
> 
> 标签：css

考虑以下 HTML：

```
<div class="wrapper">
    <div class="a"></div>
    <div class="b"></div>
    <div class="c"></div>
</div> 
```

使用这个 CSS：

```
.wrapper {
    width: 800px;
    height: 300px;
    background-color: red;
}
.a {
    width: 400px;
    height: 120px;
    background-color: green;
}
.b {
    width: 100px;
    height: 150px;
    background-color: blue;
}
.c {
    width: 100px;
    height: 150px;
    background-color: lightblue;
} 
```

我现在需要将 a 放在左上角，将 b 放在右侧 c 的顶部。

我的第一个解决方案是这样做：

```
.a{
float: left;
}
.b{
float:right;
}
.c{
float:right;
} 
```

现在的问题是c在b的左边，但需要在它下面......即使a有不同的高度，有没有解决这个问题的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:41:43.247

试试这个

```
<div class="wrapper">
    <div class="a"></div>
    <div class="rightside">
        <div class="b"></div>
        <div class="c"></div>
    <div>
    <div class="clear"></div>
</div> 
```

用CSS：

```
.a {float: left}
.rightside {float: right}
.clear {clear: both} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T19:51:29.837

你也可以试试这个：

```
<div class="wrapper">
    <div class="a"></div>
    <div class="b"></div>
    <div style="clear: both;"></div>
    <div class="c"></div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T20:06:06.240

**使用 CSS + HTML 的解决方案**

您可以将`b`and`c`放在一个包含 div ( `#container`) 中，然后`float:right` `#container`.

HTML：

```
<div class="wrapper">
    <div class="a"></div>
    <div id="container">
        <div class="b"></div>
        <div class="c"></div>
    </div>
</div> 
```

CSS：

```
.a {
    float: left;
}

#container {
    float: right;
} 
```

## [JS 小提琴示例](http://jsfiddle.net/4xshM/1/)

* * *

* * *

**仅使用 CSS 的解决方案**

如果您无法更改页面的 HTML（或不想更改），则可以使用纯 CSS 通过使用绝对定位来完成。

CSS：

```
.wrapper {
    position: relative;
}

.a {
    position: absolute;
    top: 0;
    left: 0;
}

.b {
    position: absolute;
    right:0;
    top: 0;
}

.c {
    position: absolute;
    right:0;
    top: 150px; /* or bottom:0 */
} 
```

## [JS Fiddle 示例（使用`position:absolute`）](http://jsfiddle.net/4xshM/3/)

# php - Zend Framework v2.0 - 致命错误：在 Client.php 中找不到接口“Zend\Stdlib\DispatchableInterface”

> ID：15796473
> 
> 赞同：1
> 
> 时间：2013-04-03T19:37:40.497
> 
> 标签：php, http, zend-framework2

我们有 Zend Framework v2.0 设置和 WAMP 设置。我们已经确认我们的 WAMP 正在使用 localhost 中的测试（回显）文件按预期工作。

我们想使用 Zend 框架和 PHP 发出一个 HTTP 请求。我们的 .PHP 错误如下：

“致命错误：在第 32 行的 C:\wamp\bin\php\zend-framework\library\Zend\Http\Client.php 中找不到接口 'Zend\Stdlib\DispatchableInterface'”

这是我们精简的 PHP 文件：

```
<?php

require_once 'Zend/Http/Client.php';
require_once 'Zend/Http/Response.php';

//...custom HTTP request here not tied to the error

?> 
```

该文件位于：C:\wamp\www

Zend 框架位于：'C:\wamp\bin\php\zend-framework

当 Client 文件尝试实现 DispatchableInterface 时，我们的代码似乎在 Client.php 文件中出错：

```
class Client implements Stdlib\DispatchableInterface 
```

我们的 php.ini 对 include_path 有以下设置：

```
; Windows: "\path1;\path2"
include_path = ".;C:\wamp\bin\php\zend-framework\library" 
```

感谢您的任何帮助！

# gfortran - Gfortran 执行循环 if 语句错误

> ID：15796474
> 
> 赞同：0
> 
> 时间：2013-04-03T19:37:47.647
> 
> 标签：gfortran

我有一个简单的 Fortran 代码，但我遇到了一个我找不到解决方案的错误。有谁知道如何解决这一问题？

```
subroutine sort(A,A_done,N,P)
! Sort a real array by algebraically increasing value and return the permutation that 
! rearranges the array
  implicit none

  Integer N, TEMP1, K, L, P(N), TEMP2
  real(8), dimension(:) ::  A_done
  real(8), dimension(:) ::  A

  DO K=1, N-1
    DO L=K+1, N
        if A(K)>A(L)
                TEMP1=A(K)
            TEMP2=P(K)
            A(K)=A(L)
                P(K)=P(L)
        A(L)=TEMP1
            P(L)=TEMP2
    end if

    END DO
  END DO
  A_done=A
  RETURN
  END 
```

gfortran -Wall -Werror -fbounds-check -w -L -lm -o 模拟 readinput.for nooutfile.for mean.for covariance.for correlation.for rperm.for simmain.for sort.for In file sort.for:13

```
 if A(K)>A(L)
    1 
```

错误： (1) 在文件 sort.for:20 中的不可分类语句

```
 end if
      1 
```

错误：在 (1) 处需要 END DO 语句 make: *** [Simulation] 错误 1

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T13:09:55.330

您忘记了一对括号和一个“then”：

在`if A(K)>A(L)`您必须输入`if (A(K)>A(L)) then`

除此之外，您的代码还有多个问题：

1.  at`TEMP1=A(K)`和类似的表达式，你将一个 real(8) 值传递给一个整数变量
2.  我不明白`P`变量的作用（你能描述一下吗？），但你也在那里混合了 real(8) 和 integer。
3.  您必须在子例程中指定数组的维度。（我认为有一种方法不使用模块）
4.  请记住，您更改了 A，然后将其复制到 A_done。为什么要这样做？您会丢失原始值并消耗更多内存。

我做了一些你可能想要保留的更正，你可以做更多。此代码编译并运行良好。

```
Program test

    implicit none
    integer N
    real(8), allocatable :: A(:), A_done(:), P(:)

    N=5
    Allocate (A(N), A_done(N), P(N))

    A=(/5,3,6,1,9/)
    call sort(A, A_done, N, P)

    Write (*,*) A_done

End

subroutine sort(A,A_done,N,P)
! Sort a real array by algebraically increasing value and return the permutation that 
! rearranges the array
    implicit none

    Integer N, K, L
    real(8), dimension(N) ::  A, A_done, P
    real(8) :: TEMP1, TEMP2

    DO K=1, N-1
            DO L=K+1, N
                    if (A(K)>A(L)) then
                            TEMP1=A(K)
                            TEMP2=P(K)

                            A(K)=A(L)
                            P(K)=P(L)

                            A(L)=TEMP1
                            P(L)=TEMP2
                    end if
            END DO
    END DO
    A_done=A
    RETURN
END 
```

# python - 使用python评估字符串算术表达式

> ID：15796475
> 
> 赞同：0
> 
> 时间：2013-04-03T19:37:54.207
> 
> 标签：python

我如何评估以下内容：

```
a=b=c=d=e=0  # initially 
```

如果用户输入：

```
"a=b=4" as a string, it should modify the existing value. 
```

因此，如果用户输入，结果将类似于 a=4, b=4：

```
"a=(c=4)*2", it should evaluate as expression and update the values. 
```

所以结果将类似于 a=8, c=4

括号可以进一步嵌套。

任何帮助将非常感激。我正在使用python。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T19:47:40.110

如果这是一个绝对不关心安全性的简单控制台脚本，您可以使用它`exec()`来执行数学语句。但是，python 不支持诸如 之类的代码`a=(c=4)*2`，因此无法原生实现。

**但是**，`exec()`如果它在 Web 服务器上运行，则会出现一个巨大的安全漏洞。如果预计这是不受信任和潜在恶意用户可以提交命令的地方，您应该考虑对其进行清理和自己解析，或者[实施沙盒。](https://pypi.python.org/pypi/pysandbox/)

**TL;DR**由于您正在处理不受支持的自定义命令，因此您应该编写自己的解析器来处理和执行这些命令，而不必担心执行不受信任的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T19:49:09.443

可能最好的方法是为这个特定的语法编写一个解析器（最糟糕的是涉及 eval/exec 的东西 - 将用户提供的内容提交给这些函数是蠕虫的安全罐）。

看看这个例子：

*   [http://pyparsing.wikispaces.com/file/detail/SimpleCalc.py](http://pyparsing.wikispaces.com/file/detail/SimpleCalc.py)

# html - 通过 CSS 隐藏列时如何修改 colspan 属性？

> ID：15796479
> 
> 赞同：3
> 
> 时间：2013-04-03T19:38:02.683
> 
> 标签：html, css, media-queries, html-table

我试图通过将一个类分配给一个特定的列来实现[“看不见的列”响应表技术](http://elvery.net/demo/responsive-tables/)，如果浏览器太窄，我可以隐藏该列。

截断的虚拟 html 示例：

```
<!doctype html>
<html>
  <head>
    <style>
      table {
          width:100%;
          background-color:#000;
          border-spacing: 1px;
      }

      table tr {
          background-color:#fff;
      }

      table tr:nth-child(2n+1) {
          background-color: #ccc;
      }

      table tr.Title 
      {
        color:#fff;
        background-color:#0e228c;

      }

      table tr.ColumnHeadings
      {
        background-color:#e4e0d4;

      }

      @media only screen and (max-width: 1024px) {
          .VolumeCell {display:none;} 
      }
    </style>
  </head>
  <body>
    <table>
      <tr class="Title">
        <th colspan="6">Stock Prices</th>
      </tr>
      <tr class="ColumnHeadings">
        <th>Code</th>
        <th>Company</th>
        <th>Price</th>
        <th>Change</th>
        <th>Change %</th>
        <th class="VolumeCell">Volume</th>
      </tr>
      <tr>
        <td>AAC</td>
        <td>Austrailian Agricultural Company Ltd</td>
        <td>$1.39</td>
        <td>-0.01 </td>
        <td>-0.36%</td>
        <td class="VolumeCell">9,395</td>
      </tr>
      <tr>
        <td>AAD</td>
        <td>Ardent Liesure Grp.</td>
        <td>$1.15</td>
        <td>+0.02 </td>
        <td>1.32%</td>
        <td class="VolumeCell">56,431</td>
      </tr>
      <tr>
        <td>AAX</td>
        <td>Ausenco Ltd.</td>
        <td>$4.00</td>
        <td>-0.04 </td>
        <td>-.99%</td>
        <td class="VolumeCell">90,641</td>
      </tr>
    </table>
  </body>
</html> 
```

这一切都很好，花花公子，除了在某些浏览器中表格的最右侧有一个像素边框或空间，特别是 Chrome 26。我尝试调整许多表格元素的边框折叠和边框媒体查询。我还尝试设置负边距来考虑像素。作为一个固执肛门的人，我不能放手，但我宁愿不使用 jQuery 来解决这个问题。

那么我该如何解释缺失的列呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T19:38:02.683

您不能从 CSS 修改 colspan 属性。如果您确实需要更改该值，则必须修改 DOM。

但是，您可以使用一个`<caption>`完全符合您要求的元素，而不是您用来包含所有列的“标题”类。它实际上是表格的标题。见[http://www.quackit.com/html_5/tags/html_caption_tag.cfm](http://www.quackit.com/html_5/tags/html_caption_tag.cfm)

这是使用标题元素的标记的修改版本。在 Chrome 中调整大小时，它会按照您的意愿行事。

```
table {
              width:100%;
              background-color:#000;
              border-spacing: 1px;
          }

          table tr {
              background-color:#fff;
          }

          table tr:nth-child(2n+1) {
              background-color: #ccc;
          }

          caption
          {
            color:#fff;
            background-color:#0e228c;

          }

          table tr.ColumnHeadings
          {
            background-color:#e4e0d4;

          }

          @media screen and (max-width: 1024px) {
              .VolumeCell {display:none;} 
          }
```

```
 <table>
          <caption>
            Stock Prices
          </caption>
          <tr class="ColumnHeadings">
            <th>Code</th>
            <th>Company</th>
            <th>Price</th>
            <th>Change</th>
            <th>Change %</th>
            <th class="VolumeCell">Volume</th>
          </tr>
          <tr>
            <td>AAC</td>
            <td>Austrailian Agricultural Company Ltd</td>
            <td>$1.39</td>
            <td>-0.01 </td>
            <td>-0.36%</td>
            <td class="VolumeCell">9,395</td>
          </tr>
          <tr>
            <td>AAD</td>
            <td>Ardent Liesure Grp.</td>
            <td>$1.15</td>
            <td>+0.02 </td>
            <td>1.32%</td>
            <td class="VolumeCell">56,431</td>
          </tr>
          <tr>
            <td>AAX</td>
            <td>Ausenco Ltd.</td>
            <td>$4.00</td>
            <td>-0.04 </td>
            <td>-.99%</td>
            <td class="VolumeCell">90,641</td>
          </tr>
        </table>
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-04-10T10:23:52.483

万一有类似的问题，但`colspan`不扩展整行，在这种情况下`caption`是没有意义的。

一个简单的技巧是不要隐藏所需的列`display: none;`，而是

```
width: 0px; 
```

这样一来，colspan 的列仍然存在，尽管不可见。

# ruby-on-rails - 无法运行 rails 服务器（activesupport 错误）

> ID：15796482
> 
> 赞同：0
> 
> 时间：2013-04-03T19:38:05.010
> 
> 标签：ruby-on-rails, rubymine

在我的应用程序中，在过去的几天里，我无法再运行`rails server/rails s`甚至`bundle exec rails server`命令。它以前像魅力一样运行。

我尝试使用 git 还原更改，但没有运气，我尝试了我能想到的所有可能的礼仪。我使用 ruby​​mine，但使用 Terminal 时同样的问题。

当我运行时：

```
ma@SL510:~/ts$ rails server 
```

我得到以下错误堆栈跟踪：

```
from /home/ma/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:251:in `block in require'
    from /home/ma/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /home/ma/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:251:in `require'
    from /home/ma/.rvm/gems/ruby-1.9.3-p392@global/gems/unicorn-4.6.2/lib/unicorn/http_request.rb:4:in `<top (required)>'
    from /home/ma/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:251:in `require'
    from /home/ma/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:251:in `block in require'
    from /home/ma/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /home/ma/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:251:in `require'
    from /home/ma/.rvm/gems/ruby-1.9.3-p392@global/gems/unicorn-4.6.2/lib/unicorn.rb:103:in `<top (required)>'
    from /home/ma/.rvm/gems/ruby-1.9.3-p392/gems/bundler-1.3.4/lib/bundler/runtime.rb:72:in `require'
    from /home/ma/.rvm/gems/ruby-1.9.3-p392/gems/bundler-1.3.4/lib/bundler/runtime.rb:72:in `block (2 levels) in require'
    from /home/ma/.rvm/gems/ruby-1.9.3-p392/gems/bundler-1.3.4/lib/bundler/runtime.rb:70:in `each'
    from /home/ma/.rvm/gems/ruby-1.9.3-p392/gems/bundler-1.3.4/lib/bundler/runtime.rb:70:in `block in require'
    from /home/ma/.rvm/gems/ruby-1.9.3-p392/gems/bundler-1.3.4/lib/bundler/runtime.rb:59:in `each'
    from /home/ma/.rvm/gems/ruby-1.9.3-p392/gems/bundler-1.3.4/lib/bundler/runtime.rb:59:in `require'
    from /home/ma/.rvm/gems/ruby-1.9.3-p392/gems/bundler-1.3.4/lib/bundler.rb:132:in `require'
    from /home/ma/ts/config/application.rb:16:in `<top (required)>'
    from /home/ma/.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.13/lib/rails/commands.rb:53:in `require'
    from /home/ma/.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.13/lib/rails/commands.rb:53:in `block in <top (required)>'
    from /home/ma/.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.13/lib/rails/commands.rb:50:in `tap'
    from /home/ma/.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.13/lib/rails/commands.rb:50:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

我不知道我该如何解决这个问题，让 rails server 命令再次运行！任何帮助将不胜感激！

ps：如果我需要提供更多信息，请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:48:50.633

感谢 Jef 创建了一个新的 gemset 并使用它，然后：

```
gem install unicorn 
```

修复了该命令的问题:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:23:02.580

您可以尝试创建一个全新的 gemset（并使用它），然后`bundle install`让 Bundler 安装 Gemfile 中列出的 gem。堆栈跟踪似乎表明您正在使用全局 gemset，这是一个非常糟糕的主意。

# python - 设置 virtualenv 文件夹时出错

> ID：15796483
> 
> 赞同：1
> 
> 时间：2013-04-03T19:38:08.793
> 
> 标签：python, virtualenv

我正在尝试设置虚拟环境，但出现以下错误：

```
 $virtualenv ./olp/
New python executable in ./olp/bin/python
Installing setuptools............done.
Installing pip.....
  Complete output from command /home/tom/Documents/Dev/olp/bin/python -x /home/tom/Documents/Dev/olp/bin/easy_install ./pip-X.X.tar.gz:
  Processing pip-X.X.tar.gz
error: Not a recognized archive type: ./pip-X.X.tar.gz
----------------------------------------
...Installing pip...done.
Traceback (most recent call last):
  File "/usr/local/bin/virtualenv", line 9, in <module>
    load_entry_point('virtualenv==1.9.1', 'console_scripts', 'virtualenv')()
  File "/usr/local/lib/python2.7/dist-packages/virtualenv.py", line 979, in main
    no_pip=options.no_pip)
  File "/usr/local/lib/python2.7/dist-packages/virtualenv.py", line 1094, in create_environment
    install_pip(py_executable, search_dirs=search_dirs, never_download=never_download)
  File "/usr/local/lib/python2.7/dist-packages/virtualenv.py", line 667, in install_pip
    filter_stdout=_filter_setup)
  File "/usr/local/lib/python2.7/dist-packages/virtualenv.py", line 1057, in call_subprocess
    % (cmd_desc, proc.returncode))
OSError: Command /home/tom/Documents/Dev/olp/bin/python -x /home/tom/Documents/Dev/olp/bin/easy_install ./pip-X.X.tar.gz failed with error code 1 
```

然后似乎创建了虚拟环境：

```
olp$ tree
.
├── bin
│   ├── easy_install
│   ├── easy_install-2.7
│   ├── python
│   ├── python2 -> python
│   └── python2.7 -> python
├── include
│   └── python2.7 -> /usr/include/python2.7
├── lib
│   └── python2.7
│       ├── _abcoll.py -> /usr/lib/python2.7/_abcoll.py
│       ├── _abcoll.pyc
│       ├── abc.py -> /usr/lib/python2.7/abc.py
│       ├── abc.pyc
│       ├── codecs.py -> /usr/lib/python2.7/codecs.py
│       ├── codecs.pyc
│       ├── config -> /usr/lib/python2.7/config
│       ├── copy_reg.py -> /usr/lib/python2.7/copy_reg.py
│       ├── copy_reg.pyc
│       ├── distutils
│       │   ├── distutils.cfg
│       │   ├── __init__.py
│       │   └── __init__.pyc
│       ├── encodings -> /usr/lib/python2.7/encodings
│       ├── fnmatch.py -> /usr/lib/python2.7/fnmatch.py
│       ├── fnmatch.pyc
│       ├── genericpath.py -> /usr/lib/python2.7/genericpath.py
│       ├── genericpath.pyc
│       ├── lib-dynload -> /usr/lib/python2.7/lib-dynload
│       ├── linecache.py -> /usr/lib/python2.7/linecache.py
│       ├── linecache.pyc
│       ├── locale.py -> /usr/lib/python2.7/locale.py
│       ├── no-global-site-packages.txt
│       ├── ntpath.py -> /usr/lib/python2.7/ntpath.py
│       ├── orig-prefix.txt
│       ├── os.py -> /usr/lib/python2.7/os.py
│       ├── os.pyc
│       ├── posixpath.py -> /usr/lib/python2.7/posixpath.py
│       ├── posixpath.pyc
│       ├── re.py -> /usr/lib/python2.7/re.py
│       ├── re.pyc
│       ├── site-packages
│       │   ├── easy-install.pth
│       │   ├── setuptools-0.6c11-py2.7.egg
│       │   └── setuptools.pth
│       ├── site.py
│       ├── site.pyc
│       ├── sre_compile.py -> /usr/lib/python2.7/sre_compile.py
│       ├── sre_compile.pyc
│       ├── sre_constants.py -> /usr/lib/python2.7/sre_constants.py
│       ├── sre_constants.pyc
│       ├── sre_parse.py -> /usr/lib/python2.7/sre_parse.py
│       ├── sre_parse.pyc
│       ├── sre.py -> /usr/lib/python2.7/sre.py
│       ├── stat.py -> /usr/lib/python2.7/stat.py
│       ├── stat.pyc
│       ├── types.py -> /usr/lib/python2.7/types.py
│       ├── types.pyc
│       ├── UserDict.py -> /usr/lib/python2.7/UserDict.py
│       ├── UserDict.pyc
│       ├── warnings.py -> /usr/lib/python2.7/warnings.py
│       ├── warnings.pyc
│       ├── _weakrefset.py -> /usr/lib/python2.7/_weakrefset.py
│       └── _weakrefset.pyc
└── local
    ├── bin -> /home/tom/Documents/Dev/olp/bin
    ├── include -> /home/tom/Documents/Dev/olp/include
    └── lib -> /home/tom/Documents/Dev/olp/lib 
```

谁能帮我解决错误？我做错什么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:49:42.523

我发现了问题所在。当我启动 virtualenv 并且它试图在另一个安装之上安装 pip 时，我似乎不在文件夹内，并且感到困惑......

# c# - C# 事件处理程序行为

> ID：15796485
> 
> 赞同：0
> 
> 时间：2013-04-03T19:38:10.950
> 
> 标签：c#, .net, events

我有这个代码

```
List<DaSubscription> lstSubscription=new List<DaSubscription>();

for(int i=0;i<20;i++)//20 is just to simulate the behavior
{

    DaSubscription Generic=new DaSubscription();
    Generic.DataChanged += new DataChangedEventHandler(Generic_DataChanged);
    lstSubscription.add(Generic);
}

//EVENT Handler which is raised from a 3rd party library [COM]                 

void Generic_DataChanged(DaSubscription aDaSubscription, DaItem[] items, ValueQT[] values, int[] results)
{
   UpdateDataChangedDTO(items, values);
} 
```

由于相同的事件处理程序 [m_daSubscription_Generic_DataChanged] 被分配给同一类 [m_daSubscription] 的多个实例。我的问题是，如果多个实例同时调用这个处理程序，这里将如何处理。是否会有任何实例覆盖数据。或者事件处理程序对于每个实例都是分开的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:52:34.587

事件处理程序单独执行。听起来您担心参数被另一个处理程序调用覆盖。那不会发生（我认为这甚至不可能）。由于看起来您没有访问事件处理程序中的任何共享对象，因此您应该非常安全。

# perl - Perl how to catch two exceptions thrown at once

> ID：15796492
> 
> 赞同：1
> 
> 时间：2013-04-03T19:38:33.687
> 
> 标签：perl, exception, eval, bioperl

I am parsing a large EMBL file (>1G) and convert it to a gff file. It has some entries are not matching the traditional embl formation thus cause the bioperl module to throw exceptions. My question is since entries with error are only small portion of total sequences and I want to continue the script and just ignore the exception for now. But the perl script was always stoped by exceptions.

I am under a linux OS and with perl version 5.8.8

my perl script

```
use strict;
use Bio::SeqIO;
use Bio::Tools::GFF;
use warnings;
use Try::Tiny;

open (E ,">","emblError.txt");

if (@ARGV != 1) {    die "USAGE: embl2gff.pl   > outputfile.\n"; }

my $in = Bio::SeqIO->new(-file=>$ARGV[0],-format=>'EMBL');
eval {
   while (my $seq = $in->next_seq) {
      for my $feat ($seq->top_SeqFeatures) {
          my $gffio = Bio::Tools::GFF->new(-gff_version => 3);
          print $feat->gff_string($gffio)."\n";
        }
    }
};
if ($@) {
    warn "Oh no! [$@]\n";
} 
```

The error I got

```
Name "main::E" used only once: possible typo at embl2GFF3.pl line 7.

--------------------- WARNING ---------------------
MSG: exception while parsing location line [join(9174..9343,14214..14303)complement(9268..9363),complement(9140..9198),complement(8965..9034),complement(8751..8884),complement(8419..8535),complement(8232..8337),complement(7952..8149),complement(7256..7332),complement(7051..7175),complement(6769..6877),complement(6601..6659),complement(4690..6530))] in reading EMBL/GenBank/SwissProt, ignoring feature mRNA (seqid=XcouVSXmac70forkSpecies.Scaffold1050.final):
------------- EXCEPTION: Bio::Root::Exception -------------
MSG: Bad operator 1: had multiple locations 2, should be SplitLocationI
STACK: Error::throw
STACK: Bio::Root::Root::throw /usr/lib/perl5/site_perl/5.8.8/Bio/Root/Root.pm:472
STACK: Bio::Factory::FTLocationFactory::from_string /usr/lib/perl5/site_perl/5.8.8/Bio/Factory/FTLocationFactory.pm:210
STACK: Bio::Factory::FTLocationFactory::from_string /usr/lib/perl5/site_perl/5.8.8/Bio/Factory/FTLocationFactory.pm:204
STACK: Bio::SeqIO::FTHelper::_generic_seqfeature /usr/lib/perl5/site_perl/5.8.8/Bio/SeqIO/FTHelper.pm:133
STACK: Bio::SeqIO::embl::next_seq /usr/lib/perl5/site_perl/5.8.8/Bio/SeqIO/embl.pm:403
STACK: embl2GFF3.pl:14
-----------------------------------------------------------

---------------------------------------------------

--------------------- WARNING ---------------------
MSG: exception while parsing location line [join(14219..14303,14368..14513)complement(9140..9198),complement(8965..9034),complement(8751..8884),complement(8419..8535),complement(8232..8337),complement(7952..8149),complement(7256..7332),complement(7051..7175),complement(6769..6877),complement(6601..6659),complement(6461..6530))] in reading EMBL/GenBank/SwissProt, ignoring feature CDS (seqid=XcouVSXmac70forkSpecies.Scaffold1050.final):
------------- EXCEPTION: Bio::Root::Exception -------------
MSG: Bad operator 1: had multiple locations 2, should be SplitLocationI
STACK: Error::throw
STACK: Bio::Root::Root::throw /usr/lib/perl5/site_perl/5.8.8/Bio/Root/Root.pm:472
STACK: Bio::Factory::FTLocationFactory::from_string /usr/lib/perl5/site_perl/5.8.8/Bio/Factory/FTLocationFactory.pm:210
STACK: Bio::Factory::FTLocationFactory::from_string /usr/lib/perl5/site_perl/5.8.8/Bio/Factory/FTLocationFactory.pm:204
STACK: Bio::SeqIO::FTHelper::_generic_seqfeature /usr/lib/perl5/site_perl/5.8.8/Bio/SeqIO/FTHelper.pm:133
STACK: Bio::SeqIO::embl::next_seq /usr/lib/perl5/site_perl/5.8.8/Bio/SeqIO/embl.pm:403
STACK: embl2GFF3.pl:14
-----------------------------------------------------------

---------------------------------------------------
Oh no! [Can't call method "isa" on an undefined value at /usr/lib/perl5/site_perl/5.8.8/Bio/Seq.pm line 1142, &lt;GEN0> line 538764.
] 
```

NOTE: I didn't post the exception twice, it just happen this way and only one exception seems to be caught .

Here is the block of embl file cause the problem. The mRNA entry causes the first exception and the CDS causes the second.

```
FT   mRNA            join(9174..9343,14214..14303)
FT                   complement(9268..9363),complement(9140..9198),
FT                   complement(8965..9034),complement(8751..8884),
FT                   complement(8419..8535),complement(8232..8337),
FT                   complement(7952..8149),complement(7256..7332),
FT                   complement(7051..7175),complement(6769..6877),
FT                   complement(6601..6659),complement(4690..6530))
FT                   /gene="ENSXMAG00000014948"
FT                   /note="transcript_id=ENSXMAT00000015030"
FT   CDS             join(14219..14303,14368..14513)
FT                   complement(9140..9198),complement(8965..9034),
FT                   complement(8751..8884),complement(8419..8535),
FT                   complement(8232..8337),complement(7952..8149),
FT                   complement(7256..7332),complement(7051..7175),
FT                   complement(6769..6877),complement(6601..6659),
FT                   complement(6461..6530))
FT                   /gene="ENSXMAG00000014948"
FT                   /protein_id="ENSXMAP00000015010"
FT                   /note="transcript_id=ENSXMAT00000015030"
FT                   /db_xref="HGNC_transcript_name:ENO3-201" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T19:42:35.153

`eval`不捕获低级 Perl 错误。还要检查[`$SIG{__DIE__}`](http://perldoc.perl.org/perlvar.html#%25SIG)处理程序。如果一个 die-handler 写得不熟练，它可能就死了。例如，如果处理程序不检查[`$EXCEPTIONS_BEING_CAUGHT`](http://perldoc.perl.org/perlvar.html#%24EXCEPTIONS_BEING_CAUGHT)，它可能`exit`来自死处理程序。

但只要看看你的输出，如果它打印了这个：

```
Oh no! [Can't call method "isa" on an undefined value at 
/usr/lib/perl5/site_perl/5.8.8/Bio/Seq.pm line 1142, line 538764\. ] 
```

然后，它并没有按照您所说的那样做。您`eval` *正在*捕获错误，否则您将无法`"Oh no!"`在前面打印它。看起来它自己*也在*做一些堆栈跟踪转储。

*最后*，您的程序状态看起来是依赖于数据的，并且文件中的一些错误值可能会将其置于错误状态。无论出于何种原因，它都无法创建一个`BIO::Seq`对象并将其传递给某个函数，该函数检查参数是否为`isa`其他内容。看起来您输入文件中的违规行是#538,764。但我可能是错的。

**注意：**在评论中解决您的问题。如果 Bioperl 正在处理它发现的错误，而您只想浏览一系列记录，那么我的建议是您将您的`eval` *放在*循环中——要么是循环，要么是`while`循环`for`。对于某些多线程应用程序来说，这是一种非常标准的形式。

```
 while ( 1 ) {
     eval { $me->spin(); 1; } or say "WARNING: $@";
     # unless we are officially done, just get ready to
     # handle somebody causing an exception in our thread.
     last if $me->done; 
 } 
```

如果可能，请记住将 放在`eval`要恢复处理的位置。

# jsf - 如果 f:viewParam / 转换器返回 null，如何将人发送到 404 页面？

> ID：15796497
> 
> 赞同：2
> 
> 时间：2013-04-03T19:38:44.790
> 
> 标签：jsf, jsf-2, http-status-code-404, converter

假设您有一个带有视图参数的页面，例如`/widgets?widgetId=1`

```
 <f:metadata>
        <f:viewParam
            name="widgetId"
            value="#{widgetIdMB.widgetId}"
            converter="#{widgetIDConverter}" />
    </f:metadata> 
```

所以，少说你的转换器抛出一个`ConverterException`，因为有人试图导航到 `/widgets?widgetId=1000000`数据库中不存在的。发生这种情况时，有没有办法将人发送到 404 页面？

编辑：

我使用转换器来转换值。如果无法在数据库中查找该值，则转换器返回 null，而不是抛出 ConverterException。

然后我使用验证器。验证器将抛出一个验证异常，但不会在调用 omnifaces 实用程序类之后：`Faces.responseSendError(404, "Not Found");`

这似乎是关注点分离的最佳实现。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T19:57:07.013

[`ExternalContext#responseSendError()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExternalContext.html#responseSendError%28int,%20java.lang.String%29)在`Converter`满足条件时使用。

```
context.getExternalContext().responseSendError(404, message);
context.responseComplete();
return null; 
```

不要忘记`FacesContext#responseComplete()`事后打电话，这不是出于某种原因隐式完成的，与`ExternalContext#redirect()`. 否则 JSF 会将当前页面附加到响应的末尾，或者`IllegalStateException`在它已经提交时抛出一个。

`404`您也可以使用幻数代替幻数[`HttpServletResponse.SC_NOT_FOUND`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletResponse.html#SC_NOT_FOUND)。

```
context.getExternalContext().responseSendError(HttpServletResponse.SC_NOT_FOUND, message);
context.responseComplete();
return null; 
```

# r - 保存到 CSV 时日期信息消失

> ID：15796499
> 
> 赞同：3
> 
> 时间：2013-04-03T19:38:51.587
> 
> 标签：r, date, csv, quantmod

我正在尝试从 Internet 中提取一些数据，然后将其导出到 CSV 文件，但我在 CSV 文件中丢失了我的日期信息。我不知道为什么。我是 R 新手，所以请保持简单的回答。这是我的代码：

```
Library(quantmod)
getSymbols("SPY", from = "2012-01-01", to = "2012-12-31")
write.csv(SPY, "C:/SPY.csv") 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-06T12:42:20.150

因为 SPY 是一个 xts/zoo 对象，所以这可以解决问题：

代替：

```
write.csv(SPY, "C:/SPY.csv") 
```

和

```
write.zoo(SPY,"C:/SPY.csv",index.name="Date",sep=",") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-08T13:50:15.573

尝试：

```
write.csv(SPY, file= "SPY.csv", row.names = index(SPY)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T19:42:32.017

您确定日期信息丢失了吗？如果您使用 MS-Excel 打开 .CSV，则可能是 Excel 正在修改您的数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T12:57:03.290

如果你这样做`str(SPY)`，你会看到你的 xts 对象的内部结构。日期在索引中，而不是在主要数据中。

我使用这三行将 xts 对象保存为 csv 文件：

```
#Convert to a data frame so it can be written to disk
d=as.data.frame(SPY)
d=cbind(datestamp=rownames(d),d)
write.csv(d,file="SPY.csv",row.names=F) 
```

# documentation - Visio 2013 中的官方文档和数据库属性窗口

> ID：15796500
> 
> 赞同：1
> 
> 时间：2013-04-03T19:38:51.907
> 
> 标签：documentation, ms-office, visio

Visio 2013 中的“数据库属性”窗口在哪里？我看不到为实体（键和属性）设置属性的地方。我找不到微软的官方文档。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-27T19:32:16.063

请阅读以下[Visio 博客](http://blogs.office.com/b/visio/archive/2012/10/17/uml-and-database-diagrams-in-the-new-visio.aspx)。在我看来，Visio 2013 中似乎已弃用了许多功能 - 特别是与 SW 和 DB 图表功能相关的功能。

由于 Viso 2013 不适合我的开发人员需求，我最终降级到 Visio 2010。希望这会有所帮助......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-25T19:42:44.943

到目前为止，我发现最快的方法是将鼠标悬停在实体框的右下角 2 秒（给予或接受）。然后会弹出一条红线，单击该红线并添加一个新属性。我并不是说这很棒，但它是我发现的最好的。我可能会回到2010年。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T20:57:44.847

您必须右键单击形状并选择数据和其他属性。

# c - 在 C 中复制多个文件

> ID：15796503
> 
> 赞同：2
> 
> 时间：2013-04-03T19:39:02.890
> 
> 标签：c, file, copy, cp

当我尝试在 C 中复制多个文件时遇到问题。它复制目录中的第一个文件，但不再复制。其他文件甚至没有打开，我不知道问题是什么。任何的想法？

```
bool copyFileToDirectory(char *file, char *directory){
    int input_fd, output_fd;
    ssize_t ret_in, ret_out;
    char* buffer[2048];
    struct stat fileStat;

    /* Check permissions */
    access (directory, W_OK);
    if (errno == EACCES) {
        perror("Output file not writable");
        return false;
    }
    if (errno == EROFS) {
        perror("Output file not writable (read-only)");
        return false;
    }
    int rval = access (file, R_OK);
    if (rval != 0) {
        printf ("Input file is not readable (access denied)\n");
        return false;
    }

    /* Copy */
    input_fd = open (file, O_RDONLY);
    stat(file, &fileStat);

    chdir(directory);

    output_fd = open(file, O_WRONLY | O_CREAT | O_TRUNC, 0666);
    chmod(file, fileStat.st_mode);

    while((ret_in = read (input_fd, &buffer, 2048)) > 0){
        ret_out = write (output_fd, &buffer, (ssize_t) ret_in);
        if(ret_out != ret_in){
            perror("An error has ocurred during the process\n");
            return false;
        }
    }

    close(input_fd);
    close(output_fd);

    return true; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T17:05:57.210

为了解决这个问题，我添加了以下几行：

```
 char cwd[1024];
    getcwd(cwd, 1024); 
```

*有了这个，我得到了当前工作目录的地址。*

然后，

```
 chdir(cwd); 
```

*我们必须回来获取后续副本*。

**最终代码：**

```
bool copyToDirectory(char *file, char *directory){
    char cwd[1024];
    getcwd(cwd, 1024);
    int input_fd, output_fd;
    ssize_t ret_in, ret_out;
    char* buffer[2048];
    struct stat fileStat;

    /* Check permissions */
    access (directory, W_OK);
    if (errno == EACCES) {
        perror("Output file not writable");
        return false;
    }
    if (errno == EROFS) {
        perror("Output file not writable (read-only)");
        return false;
    }
    int rval = access (file, R_OK);
    if (rval != 0) {
        printf ("Input file is not readable (access denied)\n");
        return false;
    }

    /* Copy */
    input_fd = open (file, O_RDONLY);
    stat(file, &fileStat);

    chdir(directory);

    output_fd = open(file, O_WRONLY | O_CREAT | O_TRUNC, 0666);
    chmod(file, fileStat.st_mode);

    while((ret_in = read (input_fd, &buffer, 2048)) > 0){
        ret_out = write (output_fd, &buffer, (ssize_t) ret_in);
        if(ret_out != ret_in){
            perror("An error has ocurred during the process\n");
            return false;
        }
    }

    close(input_fd);
    close(output_fd);

    chdir(cwd);

    return true; 
} 
```

# jquery - MVC 4 如何在 Ajax.ActionLink 帮助器的 OnSuccess 回调中添加带参数的函数？

> ID：15796508
> 
> 赞同：0
> 
> 时间：2013-04-03T19:39:12.217
> 
> 标签：jquery, asp.net-mvc

我遇到了几个问题，试图在我的 ajax 调用后触发 OnSuccess 方法时向我想要调用的函数添加参数。

目前我有以下代码：

```
@using (Ajax.BeginForm(null, null, new AjaxOptions { OnSuccess = "isFormSuccessful('AddDomainNameForm','#ajaxModal',data)", UpdateTargetId = "ajaxTarget" })) 
```

这不会产生错误，并且该函数确实被调用，但它没有在适当的时间被调用。在目标 div 中重新绘制响应之前调用它。当我调查这个问题时，有很多文章说这是在 OnSuccessCallback 中的函数中传递参数时引起的。那些相同的文章建议做这样的事情：

```
OnSuccess = "function(){exampleFunction('" + param1 + "');}" 
```

当我尝试这样做时，jQuery 1.9.1 会引发以下错误：

> 函数必须有名称。

我想知道这是否是较新的 jQuery 的问题。我传递的参数是必要的，因为在从服务器发回的数据中找不到它们。

非常感谢您对实现这一目标的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:43:16.473

尝试使函数匿名：

```
OnSuccess = "(function(){exampleFunction('" + param1 + "');})();" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T02:41:29.393

事实证明，我是一个完整的 nob，并且没有在表单绘制的 get 一半上填充额外的参数。我为浪费您的时间而道歉。

# iphone - 如何将其转换为 nsurl？

> ID：15796513
> 
> 赞同：-4
> 
> 时间：2013-04-03T19:39:30.790
> 
> 标签：iphone, ios, objective-c, nsurl

如何将其转换为 nsurl。这是从其他工具包示例中窃取的，这可以工作，但是我需要从网站上的 .json 而不是本地 .json 文件中获取数据（这就是示例文件正在做的事情）。

```
 - (NSFetchedResultsController *)newFetchedResultsController
  {
   NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"Contact"];
fetchRequest.sortDescriptors = @[ [NSSortDescriptor sortDescriptorWithKey:@"firstName" ascending:YES] ];
NSFetchedResultsController *fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest
                                                                                           managedObjectContext:self.managedObjectContext
                                                                                             sectionNameKeyPath:nil
                                                                                                      cacheName:nil];
fetchedResultsController.delegate = self;
return fetchedResultsController;
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:41:58.583

此代码中的任何内容都不会转换为 NSURL，更不用说 URL 字符串了。

***不过，来自***fetchedResultsController的结果可能包含一个 URL。这将需要显示更多代码，或者至少需要显示“联系人”实体所拥有的东西。

# java - 二进制搜索和对两个数组使用 SortKey - 非常详细 [Java]

> ID：15796515
> 
> 赞同：0
> 
> 时间：2013-04-03T19:39:31.900
> 
> 标签：java, arrays, binary, key

我正在制作一个读取如下文本文件的程序：

```
 3679        87
   196        60
 17914        12
 18618        64
  2370        65
   584        85
 18524        34
 12024         5
  6992        76
 18410        56 
```

所以列表是这样设置的，左列是商品ID，右列是库存中的商品编号（好像这是一家商店）。我需要这个程序做的是，从最低到最高对左列（项目 ID）进行排序，然后将列表打印出来，如图所示，并让正确的库存数量与之对齐。所以它看起来像这样：

```
 184       14
    196       60
    206       31
    584       85
    768       85
    2370      65
    3433      5
    3679      87

    etc.... 
```

所以到目前为止我自己写的是，我导入文件，将数字分成两个不同的数组，这样我就可以使用 Arrays.sort() 对 ID 进行排序。

现在我要做的是，确保如果我对 ID 进行排序，我可以让库存遵循其分配的 ID。我在 Java Docs 上进行了一些搜索，发现了 SortKey 函数，我想知道如何使用它？或者，如果它甚至是解决这个问题的正确方法。

这是我当前的代码：

```
 import java.io.File;
   import java.io.FileNotFoundException;
   import java.io.FileReader;
   import java.util.ArrayList;
   import java.util.Arrays;
   import java.util.List;
   import java.util.Scanner;

    public class Store {

     public static void main(String[] args) throws FileNotFoundException {

    // **************Scanner s = new
    // Scanner(input).useDelimiter("\\s*,\\s*");

    ArrayList<String> numbersString = new ArrayList<String>();

    ArrayList<Integer> numbers = new ArrayList<Integer>();
    ArrayList<Integer> ids = new ArrayList<Integer>();
    ArrayList<Integer> inventory = new ArrayList<Integer>();
    int arraySize = numbersString.size();

    List<Integer> l1 = new ArrayList<Integer>();
    List<Integer> l2 = new ArrayList<Integer>();

    Scanner s = new Scanner(new FileReader("file50.txt"));

    try {

        while (s.hasNext()) {
            l1.add(s.nextInt());
            l2.add(s.nextInt());
        }
        System.out.print(l1);
         System.out.println();
        System.out.print(l2);

        int[] list1 = new int[l1.size()];
        int[] list2 = new int[l2.size()];
        ArrayList<Integer> l3 = new ArrayList<Integer>();

        for (int x = 0; x <= l1.size() - 1; x++) {

            int n = l1.get(x);
            list1[x] = n;

        }
        // System.out.print(Arrays.toString(list1));
        for (int p = 0; p <= l2.size() - 1; p++) {

            int o = l2.get(p);
            list2[p] = o;

        }
        for(int y = 0; y < l1.size(); y++){

        }

        Arrays.sort(list1);
        Arrays.sort(list2);
        //System.out.println();
        //System.out.print(Arrays.toString(list1));

    }

    catch (Exception i) {

        i.printStackTrace();
    }

 }
     } 
```

我希望我有足够的意义，对于如何做我想做的事情的任何建议都会很棒！

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T19:43:00.130

这个问题很适合映射。（Java 中的键值存储）使用 TreeMap（自动为键提供自然排序），因此您根本不需要实现排序。你的任务就是用文件值填充你的树形图。

# java - JAX-WS MTOM streaming: server reads entire stream before sending

> ID：15796516
> 
> 赞同：4
> 
> 时间：2013-04-03T19:39:35.050
> 
> 标签：java, streaming, jax-ws, mtom

I have a JAX-WS RI server that does MTOM streaming. From the client, everything is fine. The server receives a StreamingDataHandler, and neither side uses much memory sending 1 GB. Retrieving the file, however, the server is reading the entire contents before sending it. The client is OK. I'm using DataHandler on both ends, so that aspect of things is fine. I just don't want the server to read all the data from the InputStream before it starts sending. I have the following annotations on the impl:

```
@MTOM
@StreamingAttachment(parseEagerly = false, memoryThreshold = 1L)
@WebService(...) 
```

I've tried `parseEagerly` `true` and `false`. I set the memory threshold low because I'm not concerned about small performance hits for small files.

Is this a bug with JAX-WS RI?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T16:15:20.980

这就是我所做的。像魅力一样工作。

**界面**（认为它很像你所做的）

```
@WebService
@SOAPBinding(style = Style.RPC)
public interface ResultsServer {    
    @WebMethod
    @XmlMimeType("application/octet-stream")
    public DataHandler getResultDataAsXML(@WebParam Integer raceId) throws Exception;
} 
```

**执行**

```
@MTOM
@WebService(endpointInterface = "ca.sportstats.wtc.ResultsServer")
@StreamingAttachment(parseEagerly=true, memoryThreshold=4000000L)
public class ResultsServerImpl implements ResultsServer {

    @Override
    public DataHandler getResultDataAsXML(@WebParam Integer raceId) throws Exception {
        File xmlFile = new File("c:/tmp/xml/response.xml");
        //... write my xml file using an XMLStreamWriter
        return new DataHandler(new FileDataSource(xmlFile));
    }
} 
```

**测试**

```
public class Test {
    public static void main(String[] args) throws Exception {

       URL url = new URL("http://url/to/ipmlementation/ResultsServerImplService?wsdl");
       QName qname = new QName("http://test.test.com/", "ResultsServer");

       Service service = Service.create(url, qname);
       ResultsServerImpl resultServer = service.getPort(ResultsServerImpl.class);

       /************  test download  ***************/
       DataHandler handler = resultServer.getResultDataAsXML(4);
       StreamingDataHandler dh = (StreamingDataHandler) handler;
       File file = File.createTempFile("test-received.xml", "");
       dh.moveTo(file);
       dh.close();

    }
} 
```

这对我来说可以流式传输（从服务器）一个大型 XML 文件，而无需在内存中读取它。

**也可以看看**

*   [https://metro.java.net/guide/ch06.html](https://metro.java.net/guide/ch06.html)
*   [http://docs.oracle.com/cd/E15523_01/web.1111/e13734/mtom.htm#i279618](http://docs.oracle.com/cd/E15523_01/web.1111/e13734/mtom.htm#i279618)
*   [http://www.mkyong.com/webservices/jax-ws/jax-ws-attachment-with-mtom/](http://www.mkyong.com/webservices/jax-ws/jax-ws-attachment-with-mtom/)

# php - How to export query results from a table to csv?

> ID：15796518
> 
> 赞同：0
> 
> 时间：2013-04-03T19:39:35.973
> 
> 标签：php, javascript, html, sql

So I have several pages that query our DB and then present the results in a large table on the webpage. There is also a button that allows the user to export the results to a csv file. This first code snippet works perfectly well. But a couple of the other pages do not work and open a csv file with nothing in it. I got it working briefly last week, but then it stopped working again. When I got it working it appeared to be a formatting inconsistency, which explains why it would work on one page and not another. Also due to this, I do not believe the problem exists in the js that exports it

So here is the working snippet:

```
</div></td>
<td ><div id="layer2">
<p class="bodytext">

<?php

   //select the table
   $query = "SELECT * FROM CEP_T ORDER BY Cep_ID, Student_ID";

   $result = mysql_query($query);
   $numberOfCeps = mysql_numrows($result);

?>

   <html>
   <head>
   <meta content="text/html; charset=ISO-8859-1" http-equiv="content-type">
   <script type="text/javascript" src="myJavaScripts.js"></script>
   <script type="text/javascript" src="tableSort.js"></script>
   <title>Display CEPs Info...</title>
   <link REL=StyleSheet HREF="formatStyles.css" TYPE="text/css" MEDIA=screen,print>
   </head>

   <body>
   <h3>Display <?php echo $numberOfCeps; ?> CEP designees:</h3>
   <div style="text-align: left; font-family: Arial;"><small><big><big>
   <!-- <span style="font-family: Helvetica,Arial,sans-serif;"><a href="reports.php">Back To Reports!</a> </span> -->
<form action="getCSV.php" method ="post" > 
<input type="hidden" name="csv_text" id="csv_text">
<input type="submit" value="Get CSV File" 
        onclick="getCSVData()">
</form>

<script type="text/javascript" src="javaExport.js">

</script>
<script type="text/javascript">
function getCSVData(){
 var csv_value=$('#displayAllCeps').table2CSV({delivery:'value'});
 $("#csv_text").val(csv_value); 
}
</script>

<div style="text-align: left; font-family: Arial;"><small><big>

   <?php (then it goes on to define the headers and place the results in table cells) 
```

And here is the code that is not working:

```
 </div></td>
<td><div id="layer2">
<p class="bodytext">

<?php
    $contactType = $_GET['contactType'];
    $company = $_GET['company'];
    $endingCreateDate='';
    $beginningCreateDate='';
    $beginningCreateDate = date("Y-m-d",strtotime($_GET['beginningCreateDate']));
    $endingCreateDate = date("Y-m-d",strtotime($_GET['endingCreateDate']));
    $filterwhere="";
    $filterfrom="";
    if($contactType!=""){

    $filterwhere=" AND ct.Contact_Type_ID=$contactType ".$filterwhere;
    //$filterfrom=", CONTACT_T".$filterfrom;
    }
    if($beginningCreateDate!="1969-12-31"){

    $filterwhere=" AND Date_Created > '$beginningCreateDate' ".$filterwhere;
    //$filterfrom=", CONTACT_T".$filterfrom;
    }

    if($endingCreateDate!="1969-12-31"){

    $filterwhere=" AND Date_Created < '$endingCreateDate' ".$filterwhere;
    //$filterfrom=", CONTACT_T".$filterfrom;
    }
    if($company!=""){
            $filterwhere=" AND Individual_Company='$company' ".$filterwhere;
    //$filterfrom=", INDIVIDUAL_WORK_INFO_T".$filterfrom;
    }

        $query = "SELECT i.Individual_ID,First_Name,Last_Name,Email_Address, Address1,Address2,City,State,Postal_Code,Country,Home_Phone,Mobile_Phone,Individual_Company,Work_Phone,Work_Extension,Region,Date_Created, Last_Meeting_Date, Referred_By, c.Note,     ct.Contact_Type, i.Do_Not_Mail
        FROM INDIVIDUAL_T i                
        INNER JOIN CONTACT_T c ON c.Contact_ID=i.Individual_ID
        INNER JOIN INDIVIDUAL_WORK_INFO_T iw ON iw.Individual_ID =i.Individual_ID
        INNER JOIN CONTACT_TYPE_T ct ON c.Contact_Type=Contact_Type_ID".$filterfrom."
        WHERE Is_Student = 'No' AND Is_Contact = 'Yes'".$filterwhere."
        ORDER BY Last_Name, First_Name";

   $result = mysql_query($query);
   $numberOfRows = mysql_numrows($result);
?>

   <html>
   <head>
   <meta content="text/html; charset=ISO-8859-1" http-equiv="content-type">
    <script type="text/javascript" src="myJavaScripts.js"></script>
    <script type="text/javascript" src="tableSort.js"></script>
   <link REL=StyleSheet HREF="formatStyles.css" TYPE="text/css" MEDIA=screen,print>
   <title>Display all contacts...</title>
   </head>

   <body>
   <h3>Display <?php echo $numberOfRows; ?> contacts...</h3>
   <div style="text-align: left; font-family: Arial;"><small><big><big>
   <!-- <span style="font-family: Helvetica,Arial,sans-serif;"><a href="reports.php">Back To Reports!</a> </span> -->

<form action="getCSV.php" method ="post" > 
<input type="hidden" name="csv_text" id="csv_text">
<input type="submit" value="Get CSV File" 
        onclick="getCSVData()">
</form>

<script type="text/javascript" src="javaExport.js">

</script>
<script type="text/javascript">
function getCSVData(){
 var csv_value=$('#displayAllContacts').table2CSV({delivery:'value'});
 $("#csv_text").val(csv_value); 
}
</script>
<div style="text-align: left; font-family: Arial;"><small><big>
<!--<div id="Book1_10219" align=center x:publishsource="Excel">-->
<?php(then it goes on to define the headers and place the results in table cells) 
```

I apologize for my ignorance, but i have been staring at the code for several days now and have no idea what else to do

# latex - XeLaTeX 和 pdfLaTeX 有什么区别？

> ID：15796519
> 
> 赞同：20
> 
> 时间：2013-04-03T19:39:40.453
> 
> 标签：latex, pdflatex, xetex

有多个 TeX 排版引擎。两个命令 (`pdflatex`和`xelatex`) 都会生成 PDF。什么是技术/有效/历史/等。这两个命令的区别？我正在使用 TeX Live。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-03T20:51:49.950

正如您已经指出的那样，[PdfTeX](http://en.wikipedia.org/wiki/PdfTeX)和[XeTeX](http://en.wikipedia.org/wiki/XeTeX)以及 for 的等效命令是出于相同目的的两个实现。`latex`维基百科的文章有更多关于历史和发展的细节。

从操作的角度来看，主要区别之一是 XeTeX 对字体有更好的支持——特别是您可以使用系统字体而不仅仅是 TeX 字体。它还对非拉丁字符编码有更好的支持。

# c# - Thread.Abort 可接受的做法？

> ID：15796521
> 
> 赞同：1
> 
> 时间：2013-04-03T19:39:50.213
> 
> 标签：c#, multithreading

我正在开发一个应用程序，用户可以在其中启动一个在单独线程上产生的“任务”。

用户很可能会启动这个任务，然后以每次略有不同的参数重新启动它几次。

我可以使用`Thread.Abort`，或者我可以重写任务中的代码，以便任务检查用户是否要重新启动它的许多点。

应该`Thread.Abort`只在特殊情况下使用，还是可以接受这种事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T20:12:21.127

如果线程执行需要停止，则检查代码中的特定位置通常会更好，因为您无法控制使用`Thread.Abort`. 这可能会使应用程序处于某种不确定（可能无效）的状态，具体取决于线程的作用。另一个优势是不必处理`ThreadAbortException`. 更多解释[在这里](https://stackoverflow.com/questions/6382997/is-using-thread-abort-and-handling-threadabortexception-in-net-safe-practice)。

但是，根据您的问题，我了解到中止线程的唯一原因是使用不同的参数重新启动它。相反，向线程发出参数已更改的信号，并重用同一线程。创建新线程是一项相对昂贵的操作，在您的情况下可以避免。

# java - 这个登录过滤器实现安全吗？

> ID：15796522
> 
> 赞同：0
> 
> 时间：2013-04-03T19:39:58.443
> 
> 标签：java, jakarta-ee, servlets, servlet-filters

我有一个登录过滤器，如下所示：

```
@WebFilter("*.xhtml")
public class LoginFiltre implements Filter {
    @Override
    public void doFilter(ServletRequest arg0, ServletResponse arg1,
            FilterChain chain) throws IOException, ServletException {

        HttpServletRequest req = (HttpServletRequest) arg0;
        HttpServletResponse res = (HttpServletResponse) arg1;
        System.out.println(req.getRequestURI());
        System.out.println(req.getContextPath());
        Credentials credentials = (Credentials) req.getSession().getAttribute(
                "credentials");

        if (req.getRequestURI().contains("login")) {
            System.out
                    .println("login olmak istiyor faces servlet e yönlendirilecek");
            chain.doFilter(arg0, arg1);
        } else if (credentials != null
                && credentials.getUsername().length() != 0
                && credentials.isIsloggedin()) {
            System.out.println("login olmus faces servlet e yönlendiriliyor");
            chain.doFilter(arg0, arg1);
        } else {
            System.out.println("login olmamis yönlendirilecek");
            res.sendRedirect(req.getContextPath() + "/login.xhtml");
        }
    }

    @Override
    public void init(FilterConfig arg0) throws ServletException {
    }
} 
```

我希望这个过滤器检查除登录页面之外的所有请求的身份验证，如何将所有页面放在一个名为secure（login.xhtml 除外）的文件夹中并为此过滤器使用/secure/* 之类的前缀映射？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T20:21:30.197

这个检查

```
if (req.getRequestURI().contains("login")) { 
```

弱。例如，如果您有一个`logins.xhtml`所有登录用户的列表怎么办？您允许*每个*URL 只包含字符“登录”。您应该执行**精确的**URL 匹配。

```
String loginURL = req.getContextPath() + "/login.xhtml";

if (req.getRequestURI().equals(loginURL)) { 
```

并在重定向 URL 中重用它：

```
res.sendRedirect(loginURL); 
```

* * *

**与具体问题无关**，这个过滤器也阻塞了 CSS/JS 资源。所以所有`<h:outputStylesheet>`和`<h:outputScript>`资源都停止工作。您可能也希望允许它们。此外，`.xhtml`扩展和您的问题历史表明您正在使用 JSF。当会话过期或用户在另一个选项卡上注销时，此过滤器将失败，并且对 JSF ajax 请求没有反馈。相反，您应该返回一个特殊的 XML 响应来触发 JavaScript 端的重定向。您可以在此答案中找到另一个涵盖所有内容的示例：[会话到期时的授权重定向在提交 JSF 表单时不起作用，页面保持不变](https://stackoverflow.com/questions/14580267/jsf-redirect-isnt-working-when-button-submitted/14582031#14582031)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T19:56:26.667

我知道这不是您要寻找的答案，但安全性是最好留给专业人士的事情之一。除非你有一组非常独特的需求，否则你应该尝试找到一个合适的开源库，例如[Spring Security](http://static.springsource.org/spring-security/site/index.html)、[Apache Shiro](http://shiro.apache.org)等。他们花了很多时间来确保它们的实现是安全的，而且它们是广泛部署，因此他们有很多目光。当您推出自己的安全性时，您冒着引入以后可能导致违规的错误的风险。

# php - 轻松将 wordpress 数据库从本地迁移到生产环境

> ID：15796525
> 
> 赞同：2
> 
> 时间：2013-04-03T19:40:05.427
> 
> 标签：php, mysql, database, wordpress

我发现自己经常执行此例程来将 wordpress 数据库迁移到登台或生产服务器：

1.  对本地 wordpress 数据库进行 SQL 转储
2.  打开 .SQL 文件，然后搜索并用“mysite.com”替换所有“localhost:9999”
3.  将修改后的 .SQL 导入生产数据库

我觉得这很麻烦。有没有更简单的方法来做到这一点？我希望在版本控制下推送更改的文件同样简单吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T19:43:03.223

WordPress.org 上有一篇关于移动 WP 项目的精彩文章。具体来说，有一个非常方便的搜索和替换工具（在文章中讨论过），它可以更轻松地完成您的工作。

**文章：**
[http ://codex.wordpress.org/Moving_WordPress](http://codex.wordpress.org/Moving_WordPress)

**搜索和替换工具：http:**
[//interconnectit.com/products/search-and-replace-for-wordpress-databases/](http://interconnectit.com/products/search-and-replace-for-wordpress-databases/)

我建立了很多 WP 网站，这种方法每次都能无缝地为我工作。搜索和替换工具是我的首选工具。

# git - 部分 git 应用

> ID：15796528
> 
> 赞同：22
> 
> 时间：2013-04-03T19:40:09.647
> 
> 标签：git

我怎样才能`git apply --index`不因为一个大块失败而完全中止？我有一个 100K+ 的补丁，其中有几十个文件被删除和添加，手动做`patch -p1`, `git add`,`git rm`跳舞会很痛苦。

编辑： `git apply --reject --index`似乎完成了三分之二的工作：应用补丁并暂存删除的文件以进行删除，但不添加新文件。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-12-03T20:33:02.530

从 git 版本 1.7.12 开始，[`git apply`有一个`--3way`(or `-3`) 选项](http://git-scm.com/docs/git-apply)，它将：

1.  应用它可以计算出的任何更改并暂存它们（即：将它们添加到工作树和索引中），
2.  添加任何新文件并暂存它们（即：将它们添加到工作树和索引中），并且，
3.  当它遇到合并冲突时，对于每个冲突的块，它将：

    1.  将您正在修补的分支中的代码放在标记之间，并且`<<<<<<< ours`，`=======`
    2.  将补丁文件中的代码放在`=======`和`>>>>>>> theirs`标记之间。

    ... 有冲突的文件不会被暂存：您必须手动修复它们，`git add`然后再修复它们。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-02-20T19:27:18.457

尝试`git apply --reject <patchfile>`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-02-26T09:09:24.840

这就是我所做的，

首先，执行`git apply --reject`. 然后以交互方式运行`git add -p`并选择帅哥。`add -p`你也可以使用其他 git GUI 来代替。要添加新文件，如果未添加，请手动添加。

# email - 端口 465 和 587 有什么区别？

> ID：15796530
> 
> 赞同：267
> 
> 时间：2013-04-03T19:40:13.333
> 
> 标签：email, smtp, port, postfix-mta, email-client

这些端口*465*和*587*都用于发送邮件（提交邮件），但它们之间的真正区别是什么？

* * *

## 回答 #1

> 赞同：251
> 
> 时间：2013-04-03T19:59:22.757

# SMTP 协议：smtps（端口 465）v. msa（端口 587）

端口 465 和 587 用于电子邮件客户端到电子邮件服务器的通信 -使用 SMTP 协议**发送电子邮件。**

**端口 465**用于[smtps](https://en.wikipedia.org/wiki/Smtps)
SSL 加密在任何 SMTP 级别通信之前自动启动。

**端口 587**用于[msa](https://en.wikipedia.org/wiki/Mail_submission_agent)
它几乎就像标准 SMTP 端口。 [**MSA 应该在身份验证后接受电子邮件**](https://en.wikipedia.org/wiki/Mail_submission_agent#Mandatory_authentication)（例如，在 SMTP AUTH 之后）。当 DUL范围的网络[管理员](https://en.wikipedia.org/wiki/Dialup_Users_List)可以阻止到 SMTP 端口（端口 25）的**传出**连接时，它有助于阻止**传出的垃圾邮件。***如果服务器支持 SSL 加密，并且您的 ISP 不**[过滤服务器的 EHLO 回复（2014 年报告）](http://it.slashdot.org/story/14/11/11/2349244/isps-removing-their-customers-email-encryption)* *，则可以通过 SMTP 级别的**[STARTTLS](https://en.wikipedia.org/wiki/Starttls)**命令启动 SSL 加密。*

 *** * *

**MTA 到 MTA 通信（邮件服务器到邮件服务器）使用**端口 25 。**它可以用于客户端到服务器的通信，但目前不是最推荐的。标准[SMTP](https://en.wikipedia.org/wiki/Smtp)端口接受来自其他邮件服务器的电子邮件到其“内部”邮箱*，无需身份验证*。**

 *** * *

## 回答 #2

> 赞同：135
> 
> 时间：2013-11-12T23:33:04.873

# 587 与 465

这些端口分配由**Internet 编号分配机构 (IANA) 指定**：

*   [端口 587](https://www.iana.org/assignments/service-names-port-numbers/service-names-port-numbers.xhtml?search=587)：**[SMTP] 消息提交**(SMTP-MSA)，一种接受来自电子邮件客户端 (MUA) 的电子邮件提交的服务。在 RFC 6409 中描述。
*   [端口 465](https://www.iana.org/assignments/service-names-port-numbers/service-names-port-numbers.xhtml?search=465)：**SSM 的 URL 集合目录** *（与电子邮件完全无关）*

从历史上看，端口 465 最初计划用于 SMTP 上的**SMTPS**加密和身份验证“包装器”，但它很快就被弃用了（几个月内和 15 多年前），转而支持**STARTTLS** over SMTP (RFC 3207)。尽管如此，可能有许多服务器支持已弃用的协议包装器，主要是为了支持实现 SMTPS 的旧客户端。除非您需要支持此类较旧的客户端，否则 SMTPS 及其在端口 465 上的使用应该只是一个历史脚注。

令人绝望的混乱和不精确的术语**SSL**经常被用来表示**SMTPS**包装器和**TLS**来表示**STARTTLS**协议扩展。

### 为了完整性：端口 25

*   [端口 25](https://www.iana.org/assignments/service-names-port-numbers/service-names-port-numbers.xhtml?search=25)：**简单邮件传输**(SMTP-MTA)，一种接受来自其他服务器（MTA 或 MSA）的电子邮件提交的服务。在 RFC 5321 中描述。

### 资料来源：

*   IANA*[服务名称和传输协议端口号注册](http://www.iana.org/assignments/service-names-port-numbers/service-names-port-numbers.txt)*
*   “<a href="http://www.imc.org/ietf-apps-tls/mail-archive/msg00204.html" rel="noreferrer">撤销 smtps TCP 端口” - 来自 Internet Mail Consortium 主管 Paul 的电子邮件霍夫曼，1998 年 11 月 12 日。
*   [RFC 6409 - 邮件的消息提交](http://www.rfc-editor.org/rfc/rfc6409.txt)
*   [RFC 5321 - 简单邮件传输协议](http://www.rfc-editor.org/rfc/rfc5321.txt)
*   [RFC 3207 - 用于通过传输层安全的安全 SMTP 的 SMTP 服务扩展](http://www.rfc-editor.org/rfc/rfc3207.txt)
*   [RFC 4607 - IP 的源特定组播](http://www.rfc-editor.org/rfc/rfc4607.txt)

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2018-09-27T23:25:27.860

[RFC 8314](https://www.rfc-editor.org/rfc/rfc8314)的发布改变了这个问题的正确答案。因此，端口 465 和 587 都是邮件提交代理 (MSA) 的有效端口。端口 465 需要在连接设置时协商 TLS/SSL，如果选择协商 TLS，端口 587 使用 STARTTLS。IANA 注册表已更新为允许为此目的合法使用端口 465。对于邮件中继，仅使用端口 25，因此 STARTTLS 是使用邮件中继进行 TLS 的唯一方法。将邮件中继和邮件提交视为两个非常不同的服务（具有许多行为差异，例如需要身份验证、不同的超时、不同的消息修改规则等）碰巧使用类似的有线协议是很有帮助的。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-09-08T14:44:04.173

我一直使用端口 465。

[danorton](/a/19942206)的答案已经过时了。正如他和[维基百科](https://en.wikipedia.org/wiki/SMTPS)所说，端口 465 最初计划用于 SMTPS 加密，并在 15 年前迅速弃用。但是很多 ISP 仍在使用端口 465，尤其是为了符合[RFC 8314](https://www.rfc-editor.org/rfc/rfc8314)的当前建议，它鼓励使用隐式 TLS，而不是使用端口 587 的 STARTTLS 命令。（参见第[3.3](https://www.rfc-editor.org/rfc/rfc8314#section-3.3)节）。使用端口 465 是与充当邮件提交代理 (MSA) 的 SMTP 服务器开始隐式安全会话的唯一方法。

基本上，RFC 8314 建议放弃明文电子邮件交换，并且所有三种常见的 IETF 邮件协议仅在隐式 TLS 会话中使用，以尽可能保持一致性。因此，对于 SMTPS、IMAP4S 和 POP3S，推荐的安全端口分别为 465、993 和 995。

尽管 RFC 8314 确实允许继续使用端口 587 和 STARTTLS 命令的显式 TLS，但这样做会使邮件用户代理（MUA，邮件客户端）面临降级攻击，中间人拦截 STARTTLS请求升级到 TLS 安全性但拒绝它，从而强制会话保持明文。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-04-11T09:33:59.577

**端口 465：** IANA 已将新服务重新分配给此端口，它不应再用于 SMTP 通信。

但是，由于它曾经被 IANA 认定为有效，因此可能存在仅能够使用此连接方法的遗留系统。通常，仅当您的应用程序需要时才使用此端口。快速谷歌搜索，您会发现许多建议使用端口 465 作为推荐设置的消费者 ISP 文章。希望这很快结束！它不符合 RFC。

**端口 587：** 这是默认的邮件提交端口。当邮件客户端或服务器提交要由适当的邮件服务器路由的电子邮件时，它应该始终使用此端口。

每个人都应该考虑将此端口用作默认端口，除非您被上游网络或托管服务提供商明确阻止。该端口与 TLS 加密相结合，将确保安全提交电子邮件并遵循 IETF 制定的指导方针。

**端口 25：** 此端口继续主要用于 SMTP 中继。SMTP 中继是将电子邮件从电子邮件服务器传输到电子邮件服务器。

在大多数情况下，现代 SMTP 客户端（Outlook、Mail、Thunderbird 等）不应使用此端口。传统上，住宅 ISP 和云托管提供商会阻止它，以遏制从受感染的计算机或服务器转发的垃圾邮件数量。除非您专门管理邮件服务器，否则您的计算机或服务器上不应有流量通过此端口。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-09-18T18:37:11.370

我不想点名，但似乎有人完全错了。引用的标准机构声明如下：submissions 465 tcp Message Submission over TLS protocol [IESG] [IETF_Chair] 2017-12-12 [RFC8314]

如果您愿意，不妨阅读参考的 RFC。

这似乎清楚地暗示端口 465 是强制加密通信并确保它就位的最佳方式。587 端口不提供这样的保证。****

# struts2 - struts :404 status 未找到请求资源

> ID：15796535
> 
> 赞同：0
> 
> 时间：2013-04-03T19:40:26.977
> 
> 标签：struts2, myeclipse

我正在编写我的第一个 struts 示例。我遵循了确切的步骤，但即使遇到这个问题，也不知道在我老师的机器上工作的错误代码是什么，但在我的机器上却没有，我认为我正在做一个小错误，请帮助我定位 1) 我有 index.jsp

```
<%@ taglib uri="/struts-tags" prefix="s" %>
<s:form action="login">
<s:textfield name="username" label="username:"></s:textfield>
<s:submit></s:submit>
</s:form> 
```

2）带有Loginaction类（pogo类）的bean包

```
package bean;

public class Loginaction {
    String username;

    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }
    public String execute()
    {

            return "success";

    }

} 
```

3）struts.xml

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
   "-//Apache Software Foundation//DTD Struts Configuration 2.3//EN"
   "http://struts.apache.org/dtds/struts-2.3.dtd">
<struts>
<package name="demo" extends="struts-default">
<action name="login" class="bean.Loginaction">
<result name="success">welcome.jsp</result>

</action>
</package>

</struts> 
```

4) 欢迎.jsp

```
<h1>hi user.</h1> 
```

5) web.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<web-app id="WebApp_9" version="2.4"
    xmlns="http://java.sun.com/xml/ns/j2ee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">
<display-name>struts1</display-name>
  <welcome-file-list>

    <welcome-file>index.jsp</welcome-file>

  </welcome-file-list>
  <filter>
    <filter-name>struts2</filter-name>
    <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
  </filter>
  <filter-mapping>
    <filter-name>struts2</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping>
</web-app> 
```

6）和目录结构

src 文件夹中的包和 struts.xml 以及 web-inf（jsps 和 web.xml）中的其他包和 struts.xml

在控制台上我得到了``

```
Apr 4, 2013 12:54:26 AM org.apache.catalina.core.AprLifecycleListener init
INFO: The Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: /home/tarun/MyEclipse Blue/binary/com.sun.java.jdk.linux.x86_64_1.6.0.u43/bin:/home/tarun/MyEclipse Blue/plugins/com.genuitec.eclipse.easie.tomcat.myeclipse_11.0.0.me201211151802/tomcat/bin
Apr 4, 2013 12:54:26 AM org.apache.coyote.http11.Http11Protocol init
SEVERE: Error initializing endpoint
java.net.BindException: Address already in use:8080
    at org.apache.tomcat.util.net.JIoEndpoint.init(JIoEndpoint.java:501)
    at org.apache.coyote.http11.Http11Protocol.init(Http11Protocol.java:177)
    at org.apache.catalina.connector.Connector.initialize(Connector.java:1059)
    at org.apache.catalina.core.StandardService.initialize(StandardService.java:677)
    at org.apache.catalina.core.StandardServer.initialize(StandardServer.java:792)
    at org.apache.catalina.startup.Catalina.load(Catalina.java:518)
    at org.apache.catalina.startup.Catalina.load(Catalina.java:538)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:260)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:412)
Apr 4, 2013 12:54:26 AM org.apache.catalina.startup.Catalina load
SEVERE: Catalina.start
LifecycleException:  Protocol handler initialization failed: java.net.BindException: Address already in use:8080
    at org.apache.catalina.connector.Connector.initialize(Connector.java:1061)
    at org.apache.catalina.core.StandardService.initialize(StandardService.java:677)
    at org.apache.catalina.core.StandardServer.initialize(StandardServer.java:792)
    at org.apache.catalina.startup.Catalina.load(Catalina.java:518)
    at org.apache.catalina.startup.Catalina.load(Catalina.java:538)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:260)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:412)
Apr 4, 2013 12:54:26 AM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 379 ms
Apr 4, 2013 12:54:26 AM org.apache.catalina.core.StandardService start
INFO: Starting service Catalina
Apr 4, 2013 12:54:26 AM org.apache.catalina.core.StandardEngine start
INFO: Starting Servlet Engine: Apache Tomcat/6.0.13
Apr 4, 2013 12:54:27 AM com.opensymphony.xwork2.util.logging.commons.CommonsLogger info
INFO: Parsing configuration file [struts-default.xml]
Apr 4, 2013 12:54:27 AM com.opensymphony.xwork2.util.logging.commons.CommonsLogger info
INFO: Parsing configuration file [struts-plugin.xml]
Apr 4, 2013 12:54:29 AM com.opensymphony.xwork2.util.logging.commons.CommonsLogger info
INFO: Parsing configuration file [struts.xml]
Apr 4, 2013 12:54:29 AM org.apache.coyote.http11.Http11Protocol start
SEVERE: Error starting endpoint
java.net.BindException: Address already in use:8080
    at org.apache.tomcat.util.net.JIoEndpoint.init(JIoEndpoint.java:501)
    at org.apache.tomcat.util.net.JIoEndpoint.start(JIoEndpoint.java:515)
    at org.apache.coyote.http11.Http11Protocol.start(Http11Protocol.java:204)
    at org.apache.catalina.connector.Connector.start(Connector.java:1132)
    at org.apache.catalina.core.StandardService.start(StandardService.java:531)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:710)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:566)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:288)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413)
Apr 4, 2013 12:54:29 AM org.apache.catalina.startup.Catalina start
SEVERE: Catalina.start: 
LifecycleException:  service.getName(): "Catalina";  Protocol handler start failed: java.net.BindException: Address already in use:8080
    at org.apache.catalina.connector.Connector.start(Connector.java:1139)
    at org.apache.catalina.core.StandardService.start(StandardService.java:531)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:710)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:566)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:288)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413)
Apr 4, 2013 12:54:29 AM org.apache.catalina.startup.Catalina start
INFO: Server startup in 3506 ms
Apr 4, 2013 12:54:29 AM org.apache.catalina.core.StandardServer await
SEVERE: StandardServer.await: create[8005]: 
java.net.BindException: Address already in use
    at java.net.PlainSocketImpl.socketBind(Native Method)
    at java.net.PlainSocketImpl.bind(PlainSocketImpl.java:383)
    at java.net.ServerSocket.bind(ServerSocket.java:328)
    at java.net.ServerSocket.<init>(ServerSocket.java:194)
    at org.apache.catalina.core.StandardServer.await(StandardServer.java:373)
    at org.apache.catalina.startup.Catalina.await(Catalina.java:630)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:590)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:288)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413)
Apr 4, 2013 12:54:29 AM org.apache.coyote.http11.Http11Protocol pause
INFO: Pausing Coyote HTTP/1.1 on http-8080`enter code here`
Apr 4, 2013 12:54:29 AM org.apache.catalina.connector.Connector pause
SEVERE: Protocol handler pause failed
java.lang.NullPointerException
    at org.apache.jk.server.JkMain.pause(JkMain.java:679)
    at org.apache.jk.server.JkCoyoteHandler.pause(JkCoyoteHandler.java:153)
    at org.apache.catalina.connector.Connector.pause(Connector.java:1074)
    at org.apache.catalina.core.StandardService.stop(StandardService.java:563)
    at org.apache.catalina.core.StandardServer.stop(StandardServer.java:744)
    at org.apache.catalina.startup.Catalina.stop(Catalina.java:616)
    at org.apache.catalina.startup.Catalina$CatalinaShutdownHook.run(Catalina.java:659) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T21:19:05.890

这意味着一个进程已经在使用端口 8080。通常，新手会因为启动一个 tomcat 实例而没有关闭前一个实例而被绊倒。你应该检查一下。此外，可能已经有另一个服务在侦听端口 8080。如果是这样，您需要确定哪个进程正在使用端口 8080。

我的建议是您了解您的系统上有哪些工具可以帮助您回答以下问题：

1）什么进程正在运行？

2）哪些网络端口开放用于监听传入请求，也就是哪些是服务器？

一旦你能做到这一点，你就会知道如何识别冲突的进程，然后你只需要关闭它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-26T01:55:30.783

尝试杀死您看到错误的机器上的所有 tomcat 和 Java 进程，然后再次尝试启动 tomcat。在您的情况下，8080 已被另一个进程使用。先杀死它，然后再试一次。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-07-08T09:52:38.467

只需更改**server.xml**文件中的 tomcat 服务器 http 端口 nb 保持原样即可。

为此，请按照以下步骤操作：

1.  打开**../tomcat5.x/conf/server.xml**并更改端口 nb 例如**8081**或 8090 任何而不是 8080
    In...
    `<---Define a non-SSL HTTP/1.1 Connector on port 8080---->`
    `<Connector port="8090" ..........>`
2.  保存。
3.  最后启动tomcat服务器

就这样。
谢谢你。

拉姆

# ios - error phonegap xcode

> ID：15796542
> 
> 赞同：4
> 
> 时间：2013-04-03T19:40:37.373
> 
> 标签：ios, xcode, cordova

I have a phonegap project on android. This woeks well but when I compile on the phonegap website I have some problems on the ios version.

So I try using xcode using the xcode simulator but I have the folloing error:

```
2013-04-03 21:29:27.261 Assas[2339:c07] Multi-tasking -> Device: YES, App: YES
2013-04-03 21:29:28.455 Assas[2339:c07] [LOG] true
2013-04-03 21:29:28.940 Assas[2339:c07] -[__NSCFArray    dataUsingEncoding:allowLossyConversion:]: unrecognized selector sent to instance 0x8939150
2013-04-03 21:29:28.942 Assas[2339:c07] *** Terminating app due to uncaught exception     'NSInvalidArgumentException', reason: '-[__NSCFArray dataUsingEncoding:allowLossyConversion:]:     unrecognized selector sent to instance 0x8939150'
*** First throw call stack:
(0x14c012 0x25a2e7e 0x1d74bd 0x13bbbc 0x13b94e 0x163b0 0x16243 0x5bbdb 0x5b32c 0x5aedd     0x5b075 0x5af93 0x25b66b0 0x1125765 0xcff3f 0xcf96f 0xf2734 0xf1f44 0xf1e1b 0x33d37e3     0x33d3668 0x387ffc 0x214c 0x20a5)
libc++abi.dylib: terminate called throwing an exception 
```

I take the content of my www folder in my android project, I just change the config.xml and the cordova jsfile

I'm using phonegap 2.4.0 on both projects

edit:

the error is in Others Sources/main.m

```
#import <UIKit/UIKit.h>

int main(int argc, char* argv[])
{
    @autoreleasepool {
        int retVal = UIApplicationMain(argc, argv, nil, @"AppDelegate");
        return retVal;
    }
} 
```

on line 6

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T23:49:56.710

您的应用程序正在使用自动引用计数（这是新的），Phonegap 还不支持它。解决方案如下：

1\. 转到项目的构建设置并关闭自动引用计数。构建设置-用户定义-CLANG_ENABLE_OBJC_ARC-从YES更改为NO

2.危险/坏但解决错误：删除@autoreleasepool，代码似乎是 `int main(int argc, char* argv[]) { int retVal = UIApplicationMain(argc, argv, nil, @"AppDelegate"); return retVal; }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:37:08.957

对于 Android 和 ios，cordova javascript 是不同的。因此，当您复制 www 时，请确保将 android 的 cordova.js 替换为 ios 的 cordova.js。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-05T21:51:49.340

对我来说，我在插件的 javascript 文件中重新排列了插件参数的顺序，但我没有在 iOS 代码中反映这些更改。我在我的插件参数中发送字符串、长整数和整数的混合：

```
// Old javascript
cordova.exec(success, fail, "MyPlugin", "PluginMethod", [0, 758493037474, "String"]);

// New javascript
cordova.exec(success, fail, "MyPlugin", "PluginMethod", ["String", 0, 758493037474]); 
```

确保也更新您的后端代码（不，对吧！！！）

```
// Old objective C
int myid              = [command.arguments objectAtIndex:0];
double mydouble       = [[command.arguments objectAtIndex:1] doubleValue];
NSString *mystring    = [command.arguments objectAtIndex:2];

// New objective C
NSString *mystring    = [command.arguments objectAtIndex:0];
int myid              = [command.arguments objectAtIndex:1];
double mydouble       = [[command.arguments objectAtIndex:2] doubleValue]; 
```

# maven - Gradle 如何与共享的 Ivy 或 Maven 存储库集成？

> ID：15796545
> 
> 赞同：3
> 
> 时间：2013-04-03T19:40:48.183
> 
> 标签：maven, repository, gradle, ivy

我一直在阅读 Gradle 及其存储库支持功能。文档表明它支持 Ivy 或 Maven 存储库。这对我的影响并不完全清楚。

在 Maven 回购的情况下，我认为我的理解更完整。构建时，Nexus 或 Artifactory 等本地存储库将缓存来自 MavenCentral 的所需公共依赖项。对于发布，Gradle 将为项目生成一个 POM.xml，您可以将私有工件发布回本地存储库。**我的理解正确吗？**我想控制正在使用的公共依赖项，以及纠正公共 MavenCentral POM 中的错误。

对于常春藤，我有点困惑。一方面，**共享的常春藤回购是什么样的？**它只是通过 SSH、SFTP、HTTP 等托管的远程目录树吗？这是否适用于混合 Windows/Unix 环境？**Gradle 如何将公共依赖项和内置工件移动到共享的 Ivy 存储库中？**詹金斯也可以执行这一步，如何？当定义了新的公共依赖项并且需要将它们移动到共享的 Ivy 存储库中时，是否需要额外的构建步骤，或者这是否无缝完成？

最后，假设两个模型的特征基本相同。与 Jenkins 构建机器一起维护的解决方案是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T06:11:28.723

您对 Gradle 中的 Maven 支持的理解是正确的。您可以完全控制依赖项以及它们的来源（Gradle 没有任何硬编码的存储库，因此您可以使用[Bintray](http://www.bintray.com)而不是 Maven Central，例如，要纠正的错误更少）。

Ivy 的依赖管理是类似的。Ivy 有它自己的布局（[在 Artifactory 中支持，但在 Nexus 中不支持，](http://docs.codehaus.org/display/MAVENUSER/Maven+Repository+Manager+Feature+Matrix) *请参阅“存储库支持”*），并且网络中存在少量公共 Ivy 存储库（例如[Ivy RoundUp](http://code.google.com/p/ivyroundup/)）。由于 Ivy 擅长使用 Maven 存储库，因此大多数 Ivy 用户只使用 Maven Central 和/或 Bintray。

Ivy 和 Maven 的主要区别不在于存储库格式，而在于元数据格式。Ivy 使用 ivy.xml（尽管名称不是必须的）而不是 pom.xml，并且 xml 架构不同。Gradle 支持这两种格式，并且可以从 pom.xml 和 ivy.xml 读取传递依赖项，并且可以为您的项目生成元数据并将其部署到两种格式的存储库中。

# php - how show and hide the forms on web page? can i do it with php?

> ID：15796546
> 
> 赞同：-1
> 
> 时间：2013-04-03T19:40:48.427
> 
> 标签：php, mysql, forms, show-hide

i want to develop a web page containing two forms.when page loads it just display the first form and after it is filled then the second table display at the demand of user and both forms values will be stored in 2 different tables in database.i dont know what's the logic behind that. plz suggest me solution and examples link.thankyou before this is my code just for display one form but the second has the same pattern

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<?php 
if (!empty($_POST['det_loc'])) {
   //do something here;
   mysql_connect("localhost","root");//database connection
mysql_select_db("admin");

//inserting data into DET_LOCATION Table
$locID=$_POST["LocID"];
$latitude=$_POST["Latitude"];
$longitude=$_POST["Longitude"];
$store = "INSERT INTO det_location(LocID,Latitude,Longitude) VALUES('$locID','$latitude','$longitude')";
//declare in the order variable
$result = mysql_query($store);  //order executes
if($result)
{
    echo "<br>Input data is succeed";

} else{
    echo "<br>Input data is fail";
}
}

if (!empty($_POST['more_loc'])) {
   //do something here;
   mysql_connect("localhost","root");//database connection
    mysql_select_db("admin");

//inserting data into DET_LOCATION Table
$latitude=$_POST["Latitude"];
$longitude=$_POST["Longitude"];
$store = "INSERT INTO det_location(Latitude,Longitude) VALUES('$latitude','$longitude')";
//declare in the order variable
$result = mysql_query($store);  //order executes
if($result)
{
    echo "<br>All data is Entered";

} else{
    echo "<br>Input data is fail";
}
}
?>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Input Detail Location</title>
</head>

<body>
<table border="1">
  <tr>
    <td align="center">Det_Location</td>
  </tr>
  <tr>
    <td>
      <table>
        <form method="post" action="det_loc">
    <tr>
          <td>locID</td>
          <td><input type="Integer" name ="LocID" size="20">
          </td>
        </tr>
    <tr>
          <td>Latitude</td>
          <td><input type="Float" name ="Latitude" size="20">
          </td>
        </tr>
                <tr>
          <td>Longitude</td>
          <td><input type="Float" name="Longitude" size="20">
          </td>
        </tr>
          </form>
      </table>

    </td>
  </tr>
  <tr>
  <td>
 <input type="submit" name="det_loc" value="Add more" />
 </td>
  </tr>
  </table>

  <table border="1">
  <tr>
    <td align="center">More Locations</td>
  </tr>
  <tr>
    <td>

    <table>
        <form method="post" action="">
    <tr>
          <td>Latitude</td>
          <td><input type="Float" name ="Latitude" size="20">
          </td>
        </tr>
                <tr>
          <td>Longitude</td>
          <td><input type="Float" name="Longitude" size="20">
          </td>
        </tr>
        <tr>
          <td>Latitude</td>
          <td><input type="Float" name ="Latitude" size="20">
          </td>
        </tr>
                <tr>
          <td>Longitude</td>
          <td><input type="Float" name="Longitude" size="20">
          </td>
        </tr>
          </form>
        </table>

      </td>
    </tr>
     <tr>
    <td>
    <input type="submit" name="more_loc" value="Send Data" />
     </td>
        </tr>
</table>
 </td>
  </tr>
  </table>

</body> 
```

*   but it display both tables on the same page and doesnt send data to the mysql database.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T19:50:03.717

这取决于您何时希望隐藏表单。如果您想用 PHP 隐藏它们，则应在将表单发送给用户之前完成。否则，您将需要 javascript，或者将多个请求发送到您的服务器。

你想要达到的目标就像“用枪打子弹，希望当子弹到一半的时候，你把枪指向下方，子弹也会掉下来”。不会发生。这是不可能的。如果您希望在客户端发生更改，则需要在客户端进行一些更改。

# java - 上传列表到服务器

> ID：15796549
> 
> 赞同：0
> 
> 时间：2013-04-03T19:40:55.500
> 
> 标签：java, android

我想将一个新的`ParseObject`（[用于在 Parse 上存储数据](https://parse.com/docs/android_guide#objects-classes_anchor)）保存到服务器。这是我的代码：

```
private List<String> groupFreindsName = new ArrayList<String>();
if (groupFreindsName.size() > 0) {
    Log.d("group", "query success");
    final ParseObject saleObj = new ParseObject("all");
    saleObj.put("type", "g");
    saleObj.addAll("groupFreindsName", groupFreindsName);
    saleObj.put("ppp", "ppp");
    saleObj.saveInBackground();
} 
```

但是它不会将其保存到服务器；当我调试它时，我看到它进入了这个方法并进入了这个`saveInBackground()`方法。但是，我在服务器上看不到该对象。

如果我删除该行：

```
 saleObj.addAll("groupFreindsName", groupFreindsName); 
```

它成功上传了对象。

此外，在这两次`groupFreindsName`列表中都不是空的并且包含字符串，并且在这两次我都没有遇到异常。

这是日志猫：

```
04-03 20:32:27.723: D/dalvikvm(1249): GC_FOR_ALLOC freed 1624K, 12% free 28407K/32036K, paused 118ms, total 131ms
04-03 20:32:29.153: I/Choreographer(1249): Skipped 267 frames!  The application may be doing too much work on its main thread.
04-03 20:32:30.693: I/Choreographer(1249): Skipped 36 frames!  The application may be doing too much work on its main thread.
04-03 20:32:32.893: D/InputEventConsistencyVerifier(1249): KeyEvent: ACTION_UP but key was not down.
04-03 20:32:32.893: D/InputEventConsistencyVerifier(1249):   in android.widget.EditText{4121a9a0 VFED..CL .F....I. 0,493-425,538 #7f0800a5 app:id/descriptionTextGroup}
04-03 20:32:32.893: D/InputEventConsistencyVerifier(1249):   0: sent at 973006000000, KeyEvent { action=ACTION_UP, keyCode=KEYCODE_G, scanCode=34, metaState=0, flags=0x8, repeatCount=0, eventTime=973006, downTime=972697, deviceId=0, source=0x101 }
04-03 20:32:32.893: D/InputEventConsistencyVerifier(1249):   -- recent events --
04-03 20:32:32.893: D/InputEventConsistencyVerifier(1249):   1: sent at 972697535000, MotionEvent { action=ACTION_UP, id[0]=0, x[0]=139.0, y[0]=26.0, toolType[0]=TOOL_TYPE_FINGER, buttonState=0, metaState=0, flags=0x0, edgeFlags=0x0, pointerCount=1, historySize=0, eventTime=972697, downTime=972661, deviceId=0, source=0x1002 }
04-03 20:32:32.893: D/InputEventConsistencyVerifier(1249):   2: sent at 972661805000, MotionEvent { action=ACTION_DOWN, id[0]=0, x[0]=139.0, y[0]=26.0, toolType[0]=TOOL_TYPE_FINGER, buttonState=0, metaState=0, flags=0x0, edgeFlags=0x0, pointerCount=1, historySize=0, eventTime=972661, downTime=972661, deviceId=0, source=0x1002 }
04-03 20:32:35.394: I/Choreographer(1249): Skipped 40 frames!  The application may be doing too much work on its main thread.
04-03 20:32:35.633: I/Choreographer(1249): Skipped 33 frames!  The application may be doing too much work on its main thread.
04-03 20:32:36.663: I/Choreographer(1249): Skipped 67 frames!  The application may be doing too much work on its main thread.
04-03 20:32:36.823: D/dalvikvm(1249): GC_CONCURRENT freed 856K, 8% free 29608K/32036K, paused 105ms+95ms, total 366ms
04-03 20:32:39.274: D/dalvikvm(1249): GC_CONCURRENT freed 1433K, 6% free 30153K/32036K, paused 121ms+137ms, total 377ms
04-03 20:32:39.683: I/Choreographer(1249): Skipped 34 frames!  The application may be doing too much work on its main thread.
04-03 20:32:40.384: I/Choreographer(1249): Skipped 41 frames!  The application may be doing too much work on its main thread.
04-03 20:32:40.844: I/Choreographer(1249): Skipped 113 frames!  The application may be doing too much work on its main thread.
04-03 20:32:41.154: I/Choreographer(1249): Skipped 73 frames!  The application may be doing too much work on its main thread.
04-03 20:32:43.193: D/group(1249): query success
04-03 20:32:46.683: I/Choreographer(1249): Skipped 49 frames!  The application may be doing too much work on its main thread.
04-03 20:32:48.593: D/dalvikvm(1249): GC_FOR_ALLOC freed 1725K, 6% free 30261K/32144K, paused 111ms, total 130ms
04-03 20:32:48.593: I/dalvikvm-heap(1249): Grow heap (frag case) to 30.103MB for 456992-byte allocation
04-03 20:32:48.723: D/dalvikvm(1249): GC_FOR_ALLOC freed 1086K, 10% free 29621K/32592K, paused 98ms, total 98ms
04-03 20:32:50.233: D/onScroll(1249): enter onScroll3 
```

这是一个更新的 logcat：

```
04-04 07:11:00.231: W/System.err(1158): com.parse.ParseException: can't add objects for a field that isn't an array
04-04 07:11:00.281: W/System.err(1158):     at com.parse.ParseCommand$3.then(ParseCommand.java:340)
04-04 07:11:00.297: W/System.err(1158):     at com.parse.Task$10.run(Task.java:442)
04-04 07:11:00.297: W/System.err(1158):     at com.parse.Task$1.execute(Task.java:67)
04-04 07:11:00.301: W/System.err(1158):     at com.parse.Task.completeImmediately(Task.java:439)
04-04 07:11:00.301: W/System.err(1158):     at com.parse.Task.continueWith(Task.java:316)
04-04 07:11:00.301: W/System.err(1158):     at com.parse.Task.continueWith(Task.java:327)
04-04 07:11:00.301: W/System.err(1158):     at com.parse.Task$8.then(Task.java:377)
04-04 07:11:00.301: W/System.err(1158):     at com.parse.Task$8.then(Task.java:1)
04-04 07:11:00.301: W/System.err(1158):     at com.parse.Task$11.run(Task.java:474)
04-04 07:11:00.301: W/System.err(1158):     at com.parse.Task$1.execute(Task.java:67)
04-04 07:11:00.311: W/System.err(1158):     at com.parse.Task.completeAfterTask(Task.java:471)
04-04 07:11:00.321: W/System.err(1158):     at com.parse.Task.access$9(Task.java:467)
04-04 07:11:00.321: W/System.err(1158):     at com.parse.Task$7.then(Task.java:343)
04-04 07:11:00.321: W/System.err(1158):     at com.parse.Task$7.then(Task.java:1)
04-04 07:11:00.336: W/System.err(1158):     at com.parse.Task.runContinuations(Task.java:502)
04-04 07:11:00.341: W/System.err(1158):     at com.parse.Task.access$5(Task.java:498)
04-04 07:11:00.341: W/System.err(1158):     at com.parse.Task$TaskCompletionSource.trySetResult(Task.java:557)
04-04 07:11:00.341: W/System.err(1158):     at com.parse.Task$TaskCompletionSource.setResult(Task.java:591)
04-04 07:11:00.341: W/System.err(1158):     at com.parse.Task$11$1.then(Task.java:485)
04-04 07:11:00.341: W/System.err(1158):     at com.parse.Task$11$1.then(Task.java:1)
04-04 07:11:00.341: W/System.err(1158):     at com.parse.Task$10.run(Task.java:442)
04-04 07:11:00.341: W/System.err(1158):     at com.parse.Task$1.execute(Task.java:67)
04-04 07:11:00.341: W/System.err(1158):     at com.parse.Task.completeImmediately(Task.java:439)
04-04 07:11:00.351: W/System.err(1158):     at com.parse.Task.access$8(Task.java:435)
04-04 07:11:00.351: W/System.err(1158):     at com.parse.Task$6.then(Task.java:309)
04-04 07:11:00.351: W/System.err(1158):     at com.parse.Task$6.then(Task.java:1)
04-04 07:11:00.361: W/System.err(1158):     at com.parse.Task.runContinuations(Task.java:502)
04-04 07:11:00.361: W/System.err(1158):     at com.parse.Task.access$5(Task.java:498)
04-04 07:11:00.361: W/System.err(1158):     at com.parse.Task$TaskCompletionSource.trySetResult(Task.java:557)
04-04 07:11:00.361: W/System.err(1158):     at com.parse.Task$TaskCompletionSource.setResult(Task.java:591)
04-04 07:11:00.361: W/System.err(1158):     at com.parse.Task$11$1.then(Task.java:485)
04-04 07:11:00.361: W/System.err(1158):     at com.parse.Task$11$1.then(Task.java:1)
04-04 07:11:00.361: W/System.err(1158):     at com.parse.Task$10.run(Task.java:442)
04-04 07:11:00.371: W/System.err(1158):     at com.parse.Task$1.execute(Task.java:67)
04-04 07:11:00.371: W/System.err(1158):     at com.parse.Task.completeImmediately(Task.java:439)
04-04 07:11:00.371: W/System.err(1158):     at com.parse.Task.continueWith(Task.java:316)
04-04 07:11:00.371: W/System.err(1158):     at com.parse.Task.continueWith(Task.java:327)
04-04 07:11:00.371: W/System.err(1158):     at com.parse.Task$11.run(Task.java:478)
04-04 07:11:00.371: W/System.err(1158):     at com.parse.Task$1.execute(Task.java:67)
04-04 07:11:00.371: W/System.err(1158):     at com.parse.Task.completeAfterTask(Task.java:471)
04-04 07:11:00.381: W/System.err(1158):     at com.parse.Task.access$9(Task.java:467)
04-04 07:11:00.381: W/System.err(1158):     at com.parse.Task$7.then(Task.java:343)
04-04 07:11:00.381: W/System.err(1158):     at com.parse.Task$7.then(Task.java:1)
04-04 07:11:00.381: W/System.err(1158):     at com.parse.Task.runContinuations(Task.java:502)
04-04 07:11:00.381: W/System.err(1158):     at com.parse.Task.access$5(Task.java:498)
04-04 07:11:00.381: W/System.err(1158):     at com.parse.Task$TaskCompletionSource.trySetResult(Task.java:557)
04-04 07:11:00.381: W/System.err(1158):     at com.parse.Task$TaskCompletionSource.setResult(Task.java:591)
04-04 07:11:00.381: W/System.err(1158):     at com.parse.Task$3.run(Task.java:225)
04-04 07:11:00.381: W/System.err(1158):     at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:390)
04-04 07:11:00.381: W/System.err(1158):     at java.util.concurrent.FutureTask.run(FutureTask.java:234)
04-04 07:11:00.381: W/System.err(1158):     at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:153)
04-04 07:11:00.381: W/System.err(1158):     at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:267)
04-04 07:11:00.391: W/System.err(1158):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
04-04 07:11:00.391: W/System.err(1158):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
04-04 07:11:00.391: W/System.err(1158):     at java.lang.Thread.run(Thread.java:856) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:05:37.113

您可以使用`addUnique`（将对象添加到与给定键关联的数组中，前提是它尚不存在于数组中。）

例如：

代替

```
 saleObj.addAll("groupFreindsName", groupFreindsName); 
```

和

```
for(String value: groupFreindsName){
saleObj.addUnique("groupFreindsName", value);
} 
```

或与

```
saleObj.add("groupFreindsName", groupFreindsName); 
```

# android - Android - 每天早上 5 点运行警报管理器的服务

> ID：15796552
> 
> 赞同：1
> 
> 时间：2013-04-03T19:41:05.697
> 
> 标签：android, date, time, alarmmanager

我需要在每天早上 5 点运行我的更新服务，以便在用户早上拿起手机时刷新数据。我到目前为止的代码是 -

```
Log.d(TAG, "setAutoRun");
AlarmManager alarmMgr = (AlarmManager)getSystemService(Context.ALARM_SERVICE);
Intent intent = new Intent(this, RefreshIntentService.class);
PendingIntent pendingI = PendingIntent.getService(this, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);
Calendar time = Calendar.getInstance();

time.setTimeInMillis(System.currentTimeMillis());

time.add(Calendar.SECOND, 60); // this was just to test out the alarm service
alarmMgr.set(AlarmManager.RTC, time.getTimeInMillis(), pendingI); 
```

我该如何修改它以使其每天早上 5 点运行？我知道我可以设置一个间隔，以便它会在 X 分钟内再次运行，但是如果用户那时不打开它，我怎么能在早上 5 点开始它。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T19:47:12.430

我相信`Calendar params`像这样编辑你应该可以工作并更改为`setRepeating()`

```
Calendar time = Calendar.getInstance();
time.set(Calendar.HOUR_OF_DAY, 5);   

alarmMgr.setRepeating(AlarmManager.RTC, time.getTimeInMillis(), AlarmManager.INTERVAL_DAY, pendingI); 
```

[AlarmManager.INTERVAL_DAY](http://developer.android.com/reference/android/app/AlarmManager.html#INTERVAL_DAY)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T19:52:55.897

您可以使用 setRepeating 方法，在该方法中您可以通过特定时间。看这个例子：

```
private void scheduleAlarms() {
        Intent intent = new Intent(mContext, AlarmActivity.class);
        mPendMorInt = PendingIntent.getActivity(
                mContext, Constants.ALARM_MORNING_CODE, intent, PendingIntent.FLAG_CANCEL_CURRENT);
        mPendAftInt = PendingIntent.getActivity(
                mContext, Constants.ALARM_AFTERNOON_CODE, intent, PendingIntent.FLAG_CANCEL_CURRENT);

        List<Long> alarms = SelectorAlarm.timeAlarms(mContext);
        if (alarms.size() >= 1) {
            mAlarmManager = (AlarmManager) mContext.getSystemService(Context.ALARM_SERVICE);
            mAlarmManager.setRepeating(AlarmManager.RTC_WAKEUP, getRightTimeAlarm(alarms.get(Constants.MORNING)),
                    AlarmManager.INTERVAL_DAY, mPendMorInt);
            mAlarmManager.setRepeating(AlarmManager.RTC_WAKEUP, getRightTimeAlarm(alarms.get(Constants.AFTERNOON)),
                    AlarmManager.INTERVAL_DAY, mPendAftInt);
        }
    } 
```

# jquery - 单个页面上的多个 jQuery 插件实例

> ID：15796555
> 
> 赞同：0
> 
> 时间：2013-04-03T19:41:21.587
> 
> 标签：jquery, jquery-plugins, cycle

我有一个页面，其中包含多个缩略图“循环”图库实例。问题是我想让插件的这些实例以特定的顺序并在设定的时间后启动。他们每个人都只会经历一次过渡。我可以设置某种间隔吗？

**这是我的 HTML：**

```
<figure role="container-1">
 <a href="#" class="singleFlip">
  <img src="/assets/img/1-img.jpg" border="0" />
  <img src="/assets/img/1-flipped.jpg" border="0" />
 </a>
</figure>

<figure role="container-2">
 <a href="#" class="singleFlip">
  <img src="/assets/img/2-img.jpg" border="0" />
  <img src="/assets/img/2-flipped.jpg" border="0" />
 </a>
</figure>

<figure role="container-3">
 <a href="#" class="singleFlip">
  <img src="/assets/img/3-img.jpg" border="0" />
  <img src="/assets/img/3-flipped.jpg" border="0" />
 </a>
</figure> 
```

**这是我的 JS：**

```
$('.singleFlip').cycle({
    fx:      'turnRight',
    delay:   10000,
    speed:   500,
    timeout: 8000,
    autostop: 1
}); 
```

**回答：**

```
$('.singleFlip').each(function (i) {
 $(this).cycle({
  fx: 'turnRight',
  delay:   10000 * i,
  speed:   500,
  timeout: 8000,
  autostop: 1
 });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:19:31.480

感谢您的信息！

```
$('.singleFlip').each(function (i) {
 $(this).cycle({
  fx: 'turnRight',
  delay:   10000 * i,
  speed:   500,
  timeout: 8000,
  autostop: 1
  });
}); 
```

# c++ - 使用 PIC18f46k20 微控制器的中断

> ID：15796557
> 
> 赞同：1
> 
> 时间：2013-04-03T19:41:26.830
> 
> 标签：c++, microcontroller, interrupt, pic, pic18

我是 C++ 的新手，在初始化我的电机速度控制项目所需的电阻器时遇到问题。我已经使用了数据表（下面的链接），但无法解决问题 [PIC_datasheet](http://ww1.microchip.com/downloads/en/devicedoc/41303g.pdf)

我遇到的两个问题

*   没有发生中断。中断过程的代码如下

*   当我启用全局中断即“INCONbits.GIE =​​ 1”时，图片（LED 和屏幕）上没有任何显示，就好像它处于睡眠模式一样。

初始化。

```
 void InitializeSystem(void)
   {

OSCCON = 0b01110000;
OSCTUNEbits.PLLEN = 0;                  // turn off the PLL

// Setup I/O Ports.

ANSEL = 0x00;                          // all digital   check if needed*
TRISA = 0;                              // TRISA outputs
LATA = 0b11110000;                      // drive PORTA pins low

oled_res = 1;                           // do not reset LCD yet
oled_cs = 1;                            // do not select the LCD

TRISB = 0b11111111;

LATC = 0b00101000;
TRISC = 0b00000000;

TRISD = 0;                              // TRISD is LED output
LATD = 0;                               // turn off LEDS

TRISE = 0b00000111;

//configure buttons
WPUB = 0b00001111;
INTCON2bits.RBPU = 0;                   // turn on weak pull ups for RB0-RB3

INTCONbits.INT0IF = 0;                  // clear RB0 INT
INTCONbits.INT0IE = 1;                  // enable RB0 INT
INTCON2bits.INTEDG0 = 0;                // interrupt on falling edge 

INTCON3bits.INT1IF = 0;                 // clear RB1 INT
INTCON3bits.INT1IE = 1;                 // enable RB1 INT   
INTCON2bits.INTEDG1 = 0;                // interrupt on falling edge

INTCON3bits.INT2IF = 0;                 // clear RB2 INT
INTCON3bits.INT2IE = 1;                 // enable RB2 INT
INTCON2bits.INTEDG2 = 0;                // interrupt on falling edge

// Setup TMR0
T0CON = 0b00000010;          // 16- bit prescaller 1:8
INTCONbits.TMR0IE=1;
INTCONbits.TMR0IF=0;
INTCON2bits.TMR0IP=0;

// Configure Timer 1
T1CON   = 0b11111101;

// Configure MSSP for SPI master mode
SSPCON1 = 0b00110010;                   // clock idle high, Clk /64

SSPSTAT = 0b00000000;

PIR1bits.TMR1IF = 0; 
PIE1bits.TMR1IE = 1; 

OSCCON = 0b01110000;
OSCTUNEbits.PLLEN = 1;  // Puts the PIC at 64MHz
CCP1CON = 0b00001100;
PSTRCON = 0b00010001;

   // setup timer 2 for pwm
   T2CON = 0b00000111;// Prescale = 1:16, timer on, postscale not used with CCP module
PR2 = 255;     // Configure the Timer2 period
TRISCbits.TRISC2  = 0;              // Make CCP1 pin as output
CCP1CON = 0x0C;           // Configure CCP1 module in PWM mode
T2CON = 0x01;             // Set Prescaler to be 4, hence PWM frequency is set to   4.88KHz.
T2CON |= 0x04;            // Enable the Timer2, hence enable the PWM.
SetPWMDutyCycle(pwm);       // Intialize the PWM to 0.5 duty cycle

// Set up global interrupts
IOCB = 1;   
  RCONbits.IPEN = 1;                    // Enable priority levels on   interrupts
INTCONbits.RBIE = 1;
INTCONbits.RBIF = 0;
 INTCONbits.GIE = 1;

 T0CONbits.TMR0ON = 1;   // START TIMER0

} // end InitializeSystem
void SetPWMDutyCycle(unsigned int DutyCycle)      // Give a value in between 0 and      1024 for DutyCycle
{
CCPR1L   = DutyCycle>>2;            // Put MSB 8 bits in CCPR1L
CCP1CON &= 0xCF;                    // Make bit4 and 5 zero
CCP1CON |= (0x30&(DutyCycle<<4));   // Assign Last 2 LSBs to CCP1CON
} 
```

中断服务

```
#pragma code InterruptVectorLow = 0x18
void InterruptVectorLow (void)
{
  _asm  
     goto InterruptServiceLow //jump to interrupt routine
  _endasm
}

//----------Interrupt Service Routine-------------------------------------
#pragma interrupt InterruptServiceHigh
void InterruptServiceHigh(void)
{

if(INTCONbits.RBIF)
{
    INTCONbits.RBIF = 0;

    if(PORTBbits.RB6!=0)                                         
        {
            UpperCounter++; //increment UpperCounter if RB6 goes high                           
            speed_counter++; // increment the counter used to calculate  
                                              //speed                                               
            LATDbits.LATD7=~LATDbits.LATD7;  // LED7 changes state each   
                                                             //rising edge                      
            Delay10TCYx(1);         
        }

   else if(PORTBbits.RB7!=0)    
             //count pulses from ch B                                       
        {
            LowerCounter++; //increment LowerCounter if RB7 goes high                                                                    
            speed_counter++;                                    
                    LATDbits.LATD0=~LATDbits.LATD0; //LED0 changes state each  
                                                            //rising edge                   
            Delay10TCYx(1);             
        }

     else if(PORTBbits.RB5 != 0)
                   //count pulses from ch Z                                                                   
        {
            LowerCounter=0;  //reset LowerCounter                           
                    UpperCounter=0;   //reset UpperCounter                          
            Delay10TCYx(1);             
        }
}
}

#pragma interruptlow InterruptServiceLow// "interruptlow" pragma for low priority
void InterruptServiceLow(void)
{

if(INTCONbits.TMR0IF)
       {
    position2=speed_counter;                                            

    speed=((((position2-position1)/64)*60)/2.1);        
        //calculate speed. TMR0 on 16bit prescalar1:8     
    TMR0H = 0;    
            //  clear timer - always write upper byte first                                        
    TMR0L = 0;
            INTCONbits.TMR0IF = 0;    
             // clear (reset) flag                                   
    LATDbits.LATD2=~LATDbits.LATD2;
    position1=speed_counter;
 }
} 
```

# java - Centos RES 内存不断增加并超过 java 的初始和最大内存

> ID：15796562
> 
> 赞同：2
> 
> 时间：2013-04-03T19:41:33.983
> 
> 标签：java, linux, garbage-collection

我们有一个在 Centos 6.4 上运行的 java 应用程序，我们注意到 RES 大约为 378m，大于分配的最大值 256m。这是否意味着我们的应用程序正在泄漏？到目前为止，还没有发生 GC，但有很多 YGC？这说明什么？

下面是我的 jstat 结果和 MAT 结果。

```
Timestamp         S0     S1     E      O      P     YGC     YGCT    FGC    FGCT     GCT   
      2331438.3  56.95   0.00  62.79  82.79  80.37   1362   54.337     0    0.000   54.337
      2331443.3  56.95   0.00  62.79  82.79  80.37   1362   54.337     0    0.000   54.337
      2331448.4  56.95   0.00  62.79  82.79  80.37   1362   54.337     0    0.000   54.337
      2331453.4  56.95   0.00  62.79  82.79  80.37   1362   54.337     0    0.000   54.337
      2331458.4  56.95   0.00  62.79  82.79  80.37   1362   54.337     0    0.000   54.337
      2331463.4  56.95   0.00  62.79  82.79  80.37   1362   54.337     0    0.000   54.337
      2331468.4  56.95   0.00  62.79  82.79  80.37   1362   54.337     0    0.000   54.337
      2331473.4  56.95   0.00  63.24  82.79  80.37   1362   54.337     0    0.000   54.337
      2331478.4  56.95   0.00  63.24  82.79  80.37   1362   54.337     0    0.000   54.337
      2331483.4  56.95   0.00  63.78  82.79  80.37   1362   54.337     0    0.000   54.337
      2331488.4  56.95   0.00  63.78  82.79  80.37   1362   54.337     0    0.000   54.337
      2331493.4  56.95   0.00  63.79  82.79  80.37   1362   54.337     0    0.000   54.337
      2331498.4  56.95   0.00  63.79  82.79  80.37   1362   54.337     0    0.000   54.337
      2331503.4  56.95   0.00  63.79  82.79  80.37   1362   54.337     0    0.000   54.337 
```

垫子结果

```
java.lang.ref.Finalizer @ 0xf5e19670 40 92,688 
next java.lang.ref.Finalizer @ 0xf5e1a6a8 40 93,024 
next java.lang.ref.Finalizer @ 0xf5e1bda0 40 122,768 

Suspect 1.

The class "java.lang.ref.Finalizer", loaded by "<system class loader>", occupies 1,337,176 (30.93%) bytes. The memory is accumulated in one instance of "java.lang.ref.Finalizer" loaded by "<system class loader>".

Keywords
java.lang.ref.Finalizer

Suspect 2
 6 instances of "com.mysql.jdbc.JDBC4Connection", loaded by "sun.misc.Launcher$ExtClassLoader @ 0xf58bf000" occupy 432,624 (10.01%) bytes. 

Biggest instances:

•com.mysql.jdbc.JDBC4Connection @ 0xf61c54f8 - 94,864 (2.19%) bytes. 
•com.mysql.jdbc.JDBC4Connection @ 0xf61c4678 - 86,600 (2.00%) bytes. 
•com.mysql.jdbc.JDBC4Connection @ 0xf61c4bf8 - 85,456 (1.98%) bytes. 
•com.mysql.jdbc.JDBC4Connection @ 0xf626c348 - 68,000 (1.57%) bytes. 
•com.mysql.jdbc.JDBC4Connection @ 0xf626c7d0 - 68,000 (1.57%) bytes. 

Keywords
com.mysql.jdbc.JDBC4Connection
sun.misc.Launcher$ExtClassLoader @ 0xf58bf000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:45:55.030

`-Xmx`仅限制 JVM 的堆内存空间 除了堆空间 JVM 正在为

*   Perm 空间（类元数据）默认高达 64 MiB
*   线程堆栈（每个线程 256k，可配置）
*   应用程序显式分配的 I/O 缓冲区和堆外缓冲区

# checkbox - XPages：如何选择视图控件的分类列中的所有文档

> ID：15796567
> 
> 赞同：0
> 
> 时间：2013-04-03T19:41:43.513
> 
> 标签：checkbox, xpages

我有一个视图控件，其中第一列被分类。我找到了如何在列标题上放置一个复选框，但这不是我想要的。我希望能够选择一个类别中的所有文档。如果我在分类列上设置复选框属性，我会在每一行上获得该列的复选框。我想要类别名称旁边的一个复选框。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T22:05:24.867

我认为您正在尝试创建一种大多数人会感到困惑的设计模式。如果您查看大多数显示树数据（分类视图实际上是）的基于 Web 的应用程序，那么通常的方法是当父节点（类别）被选中时，这将触发其所有子节点被选中。取消选择时反向相同。当您将其映射到分类视图时，一种实现方式是拥有一列复选框（您现在拥有）。您需要编写代码来处理单击事件以填充所有子节点的复选框，因为这不是任何 XPages 视图控件的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T14:45:39.523

我放弃了，朝着不同的方向走去。我现在显示存储位置的列表字段，每个条目都有复选框。我没有显示每个位置的文件中的详细信息。用户可以选择他们想要的位置 ID，然后操作按钮将获取每个选定位置的文档集合并在幕后更新它们。

我仍然认为这种模式是有用的。 [这](http://css-tricks.com/examples/IndeterminateCheckboxes/)是我想做的一个例子（[解释](http://css-tricks.com/indeterminate-checkboxes)），尽管我没有考虑过“不确定”状态。在示例页面上，单击顶级条目之一，您将看到我的目标。

谢谢彼得和蒂姆的参与。

# macos - 为什么 node.js 进程突然在 osx 上死掉，而在任何日志文件中都没有解释？

> ID：15796571
> 
> 赞同：7
> 
> 时间：2013-04-03T19:41:56.510
> 
> 标签：macos, node.js, coffeescript, kill, pid

90% 的时间我总是得到一个堆栈跟踪。但有时这个过程就退出了，我不知道为什么。无论如何总是打印堆栈跟踪？或者在 dmesg 或其他东西中找到更多信息？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-10T16:28:22.773

好吧终于找到了找到错误的方法：

```
node --trace app.js 
```

它输出每个函数调用，我可以在它退出之前看到堆栈跟踪：

```
startup.processKillAndExit.process.exit 
```

我的堆栈跟踪指向：

```
redis.get('bar', (err, data) -> JSON.parse(value).foo) 
```

`JSON.parse(value)`回来`null`所以`.foo`抛出：

```
[TypeError: Cannot read property 'foo' of null] 
```

并且由于某种原因，`TypeError`redis 回调内部被吞没并导致节点退出而不打印错误。

# c++ - 如何读取发送到 OpenGL 进行渲染的所有当前面

> ID：15796574
> 
> 赞同：0
> 
> 时间：2013-04-03T19:42:04.750
> 
> 标签：c++, c, opengl, 3d, buffer

我有一个旧程序，我想从中读取网格数据，有没有一种方法可以访问任何程序（不仅仅是读取的程序）正在发送到 OpenGL 缓冲区的所有面/三角形条。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:43:08.583

查看[glintercept](http://code.google.com/p/glintercept/)

```
GLIntercept is a OpenGL function call interceptor for Windows that will intercept and log all OpenGL calls. 
```

# php - PHP 通过调用 header() 函数返回到同一页面

> ID：15796576
> 
> 赞同：0
> 
> 时间：2013-04-03T19:42:05.280
> 
> 标签：php, forms, web

嗨，我正在制作一个在提交表单时返回自身的 php 页面，但是 php 内部有一个案例，当它为 true 时，应该执行 header("Location: url") 函数。

有可能这样做吗？

```
 <form action="" method="post">
      <input type="text" name="username" value="" />
        <?php
 if (isset($_POST['submitted'])) {

$username = $_POST['username'];

        $qryS="SELECT * FROM student WHERE ID='$username';";
        $resultS=mysql_query($qryS);
            if($resultS){
            if(mysql_num_rows($resultS)>=1) {

            header("location: studentprofile.php");
            }}
                else {

            echo"<p><small> There was an error</p>";

            }   
}

         ?>
      <input type="submit" name="submitted" value="Submit" /></p>

    </form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T19:44:18.427

已发送数据 (HTML) 后，您将无法发送任何标题。如果您在输出任何内容之前将 if 子句和 header() 调用移至 - 没有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T19:43:54.613

是的，这是可能的（只要没有输出发送到浏览器——您可以在您的情况下使用[输出缓冲](http://php.net/manual/en/zlib.configuration.php)）。您只需要确保逻辑可以防止重定向循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T19:44:28.957

你应该`header("location: studentprofile.php");`在任何事情之前使用。在文件顶部的 html 标记之前使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T19:51:52.370

```
<?php
if (isset($_POST['submitted'])) {

    $username = mysql_real_escape_string($_POST['username']);

    $qryS = "SELECT * FROM student WHERE ID='$username'";
    $resultS = mysql_query($qryS);

    // changed to == 1, you probably only want to select one record
    if(mysql_num_rows($resultS) ==1) {
        header("location: studentprofile.php");
    } else {
        echo"<p><small> There was an error</p>";
    }
}
?>

<form action="?submitted" method="post">
<input type="text" name="username" value="" />
<input type="submit" name="submitted" value="Submit" /></p>
</form> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-03T19:54:28.667

您可以使用 JavaScript。

例如：

```
<?php
...
if(mysql_num_rows($resultS)>=1) {
    ?>
    <script>
    window.location = 'studentprofile.php';
    </script>
    <?php
}} 
```

# java - 节点链表堆栈

> ID：15796582
> 
> 赞同：0
> 
> 时间：2013-04-03T19:42:47.873
> 
> 标签：java, stack

刚刚结束春假，很难记住一些这些东西。

现在我正在尝试创建一个 Lstack 类，该类将创建一个堆栈 ADT，该堆栈 ADT 实现为节点的链接列表。

这是 Lstack 类

```
public class Lstack {
    int numUsed = 0;
    Lstack list = new Lstack();
    public Lstack(){
    }
    public void push(Car x){

    }
} 
```

我如何将 Car x （一个对象）推入堆栈？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T19:45:37.307

堆栈是一种`LIFO`结构。
因此，如果您在 a 的支持下实现它，`linked list`那么您应该确保您进入`push`您的**同一侧**。 由于这是一个家庭作业，我不会提供更多信息。这应该足够了`list``pop`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:09:03.713

我做对了吗？

```
public class Lstack {
    int size;
    int numUsed = 0;
    Car[] list;
    public Lstack(){
        list = new Car[size];
    }
    public void push(Car x){
        list[numUsed] = x;
        numUsed++;
    }
    public Car pop(){
        Car temp;
        numUsed--;
        temp = list[numUsed];
        return temp;
    }
    public boolean isEmpty(){
        if(numUsed==0){
            return true;
        }
        else
            return false;
    }
    public int size(){
        return numUsed;
    }
    public void display(){
        System.out.println("--------------------------------------------");
        System.out.print("TOP | ");
        for(int i = 0; i < numUsed; i++){
            System.out.print(list[i].plate +" | ");
        }
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T19:49:39.993

堆栈是一种后进先出 (LIFO) 结构。所以我会这样：

该类`Car`必须具有`next`同一类的成员：

```
class Car {
    String brand;
    Car next;
    public Car(String brand, Car car) {
        this.brand = brand;
        next = car;
    }
    // And the class code goes on
} 
```

至于链表：

```
 class Llist {
     Car top;
     public Llist() {
         top = null;
     }
     public void push(String carBrand) {
         top = new Car(carBrand, top);
     }
 } 
```

只是一个例子。

# ssrs-2008 - 如何使用 RS Scripter 将报表从一台服务器移动到另一台服务器？

> ID：15796594
> 
> 赞同：0
> 
> 时间：2013-04-03T19:43:15.657
> 
> 标签：ssrs-2008, reporting-services

我遵循了我在网上找到的所有指南，但没有一个完全有效。我让程序连接到 ssrs 服务器以显示所有报告。我还获得了为我想要移动的报告生成的脚本。该脚本无法在程序生成它的目录中找到 .rss 文件。

目标：将报告 + 订阅从服务器 A 传输到服务器 B 注意：服务器上的文件夹结构不同。（不知道如何/在哪里定义此路径）脚本的文件夹是默认文件夹，c:\tempreports 和rs.exe 在我的本地机器上。

当我运行批处理文件时，它出错说它在路径中找不到 .rss 文件。路径应该是 c:\tempreports\reportpathonserver\report.rss

我查看了 log.txt，它具有正确的文件路径，所以不知道我做错了什么。有人可以帮我设置这种类型的转移吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T18:30:09.460

经过数小时的搜索和设置。将报告传输到具有不同文件夹结构的新服务器。您必须使用创建新的父文件夹选项。这使您可以知道报告需要放在哪里。目前，我正在解决我收到的订阅错误，说密码不能为空。我不确定它指的是哪个密码，但我认为它是订阅本身的密码（似乎很明显）但是由于该软件缺乏资源......不要假设任何东西。如果有人遇到此错误或知道如何修复它，请不要害羞！我宁愿不花更多时间在如此简单的事情上解决密码冲突。

我能够解决这个问题。由于整个 SSRS 服务器结构从旧更改为新结构，因此我必须更改生成文件中的一些内容才能使其正常工作。一是为订阅处理不同的数据源。必须更新方法中的`<reference></reference>`标签`createsubscription`以指向新的 DS。经过大量的试验和错误，我终于让它工作了。希望此信息对其他人有所帮助。

# android - MainActivity.this、NextActivity.class：为什么不只是类名？

> ID：15796614
> 
> 赞同：2
> 
> 时间：2013-04-03T19:44:29.917
> 
> 标签：android

我有以下代码：

```
Intent intent = new Intent(MainActivity.this, NextActivity.class);
startActivity(intent); 
```

我不明白为什么我们将关键字**this**与当前类放在一起，而将关键字**class**与我们希望开始的类的名称放在一起。

我所知道的是：

**this**指的是类的当前实例，而**class**是我们用来定义新类的关键字。**有人可以通过使用这个**和带有**类**名称的类来解释我想说什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T19:57:17.183

从[文档中](http://developer.android.com/reference/android/content/Intent.html#pubctors)：

> public Intent (Context packageContext, Class cls) 在 API 级别 1 中添加
> 
> 为特定组件创建意图。所有其他字段（操作、数据、类型、类）都是空的，尽管稍后可以通过显式调用对其进行修改。这提供了一种方便的方法来创建旨在执行硬编码类名的意图，而不是依赖系统为您找到合适的类；请参阅 setComponent(ComponentName) 以获取有关此影响的更多信息。
> 
> 参数
> 
> packageContext 实现此类的应用程序包的上下文。
> 
> cls 用于意图的组件类。

简而言之：您的构造函数需要一个[Context](http://developer.android.com/reference/android/content/Context.html)和一个[Class](http://developer.android.com/reference/java/lang/Class.html)。类是指为给定 Java 源文件创建的 Java 类文件，它可能是当前未使用的东西。上下文与类完全无关，就用法而言，当传递给方法时，通常指的是已经实例化的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T19:49:56.680

要做出新的意图，您只需要说

```
Intent intent = new Intent(this, NextActivity.class);
startActivity(intent); 
```

**这**是定义当前类，而您不能将其用于下一个活动，因为它不是当前类。你会为此使用**类**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T19:49:31.310

这也可以正常工作，但是当您使用对话框时，关键字**this**不会引用 MainActivity。当我们使用 MainActivity.this 时，我们使用关键字**this**来避免这些情况。如果您在 Activity Class 上下文中工作，那么仅使用**this**关键字可以正常工作。自己尝试一下以及使用关键字**class**的原因- 我认为 Intent() 方法的参数应该是类类型，这就是我们将类类型参数传递给函数（构造函数）的原因。

# unix - 捕获 shell 命令的输出而不 [也] 将其输出发送到标准输出

> ID：15796616
> 
> 赞同：0
> 
> 时间：2013-04-03T13:33:41.727
> 
> 标签：unix, perl

我正在编写一个 Perl 程序来获取特定文件的修改时间。我尝试了以下场景：

1.  `$time = system("stat -c %y temp.txt")`--> 这会将 $time 设置为“0”并将“2013-04-03 06:10:02.000000000 -0600”写入标准输出。

2.  `$time = `stat -c %y temp.txt``--> 这会将 $time 设置为“2013-04-03 06:10:02.000000000 -0600”，并在标准输出上显示相同的内容（“2013-04-03 06:10:02.000000000 -0600”）。

3.  `$time = exec("stat -c %y temp.txt")`--> 这不会设置 $time，但会在标准输出上打印“2013-04-03 06:10:02.000000000 -0600”。

由于这一次又一次地用相同类型的数据淹没我的标准输出，我想摆脱它。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T19:31:12.057

反引号（以及相关的`qx`运算符或`readpipe`函数）不会在标准输出上写入任何输出；他们执行命令，捕获命令的输出并将其返回（通常将其分配给某个变量）。所以

```
$time = `stat -c %y temp.txt` 
```

将设置`$time`而不向标准输出写入任何内容。该命令有可能将某些内容写入标准错误，但从您描述的症状来看，这看起来并不是正在发生的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:48:23.040

你最好使用 perl 的内置`stat`函数：

```
@st = stat('temp.txt');

```

`$st[9]`现在包含上次修改时间的 Unix 纪元时间戳。你可以把它变成像这样更有用的格式

```
($sec,$min,$hour,$mday,$mon,$year,$wday,$yday,$isdst) = localtime($st[9]);

```

或者只是得到一个像这样的可打印字符串

```
$time = localtime($st[9]);

```

# c# - 通过 DataContract 序列化到 XML Writer

> ID：15796619
> 
> 赞同：1
> 
> 时间：2013-04-03T19:44:44.563
> 
> 标签：c#, linq-to-entities, xml-serialization, datacontractserializer

我对 .NET 还很陌生，但是现在已经在这个项目上工作了一段时间，进展甚微，而且随着课程数量的增加，它变得有点不堪重负。

客观的：

1.  从实体框架表生成数据（应该使用 LINQ）<- LINQ 似乎正在工作。

2.  将数据转换为 XML <-根本不工作

3.  如果不工作，则发送电子邮件<-这工作得很好，很奇怪，哈哈；）

谁能给我一个代码示例，您可以在其中通过 DataContract 连接到实体并序列化（如果这是最好的方法，可能使用泛型）到 XML Writer？根据这里的评论是我想要的一个样本。-- 所以我们还说，在这个模型中，我们想要加入“DIRTYMIKE”表，其中包括“男孩”作为一个对象，其名称将通过 xml 和 PRIUS 中的“CARS”表通过 id 提取显然这是一个理论上的实体集，但希望它能给某人带来笑声:)

这是我刚刚开始的一些理论课-希望这能更多地解释目标是什么：

```
 public class TheOtherGuys 
{
    private static ILog log;
    private string theBoysWrapper;
    private int rowsRead = 0;
    private int outputRecords = 0;
    private bool warnings = false;
    private bool fatal = false;
    private bool fatalMsg = false;
    /// <summary>
    /// Next wrap the xml with a Document Wrapper and Element Wrapper
    /// </summary>
   public TheOtherGuys(ILog log)
    {

        XmlDocument doc = new XmlDocument();
        XmlDeclaration dec = doc.CreateXmlDeclaration("1.0", null, null);
        doc.AppendChild(dec);//creates root
        XmlElement root = doc.CreateElement("DIRTYMIKE");
        doc.AppendChild(root);
        XmlElement nextElem = doc.CreateElement("THEBOYS");
        log = LogManager.GetLogger(this.GetType());
        if (log.IsDebugEnabled == true)
        {
            log.Debug(GetType().Name + ".Constructor(): enter");
        }
        //creates new xml Document and set up declaration and root

        if (log.IsDebugEnabled == true)
        {
            log.Debug(GetType().Name + ".Constructor(): exit");
        }
    }
    //Read data from DIRTY_MIKE_AND_THE_BOYS and CAR Tables
    //Translate the results into xml
    private void process(DateTime process) {

        XmlDocument doc = new XmlDocument();
        XmlDeclaration dec = doc.CreateXmlDeclaration("1.0", null, null);
        doc.AppendChild(dec);//creates root
        XmlElement root = doc.CreateElement("OTHERGUYS");//maybe  a conditional statement to          change the root to 'OTHERGUYS'
        doc.AppendChild(root);
        XmlElement nextElem = doc.CreateElement("CAR");
        doc.AppendChild(nextElem);

        if (log.IsDebugEnabled == true)
        {
            log.Debug(GetType().Name + ".process(): enter - prius=" + process);
        }
        StringBuilder sb = new StringBuilder();
        sb.Append(" select ");
        sb.Append("     'PRIUS' CAR, ");  // 1
        sb.Append("     'PJM' MKT_CD, ");      // 2
        sb.Append("     decode(to_char(lh.time_id-1/24, 'HH24'), '00',  ");
        sb.Append("            to_char(lh.time_id-1, 'YYYYMMDD'), to_char(lh.time_id-1/24, 'YYYYMMDD')) START_DT, ");   // 3
        sb.Append("     decode(to_char(lh.time_id-1/24, 'HH24'), '00',  ");
        sb.Append("            '240000', to_char(lh.time_id-1/24, 'HH24MISS')) START_TIME, "); //4
        sb.Append("     decode(to_char(lh.time_id, 'HH24'), '00',  ");
        sb.Append("            to_char(lh.time_id-1, 'YYYYMMDD'), to_char(lh.time_id, 'YYYYMMDD')) END_DT, ");  // 5
        sb.Append("     decode(to_char(lh.time_id, 'HH24'), '00',  ");
        sb.Append("            '240000', to_char(lh.time_id, 'HH24MISS')) END_TIME,      ");  // 6
        sb.Append("       cars._car_id            TX_PT,     ");  //8
        sb.Append("     lh.data_value TARGET_FD ");  // 12
        sb.Append("from DATABASE.MYTABLE lh,          ");
        sb.Append("     DATABASE.CAR car_id                         ");
        sb.Append("where lh.car_id = unit.car_id         ");
        sb.Append("AND lh.time_id > to_date(?, 'MM/DD/YYYY') ");
        sb.Append("AND lh.time_id <= to_date(?, 'MM/DD/YYYY' ) + 1 ");
        sb.Append("AND lh.atb_data_category = 69  AND lh.data_value <> 0        ");
        sb.Append(" order by ");
        sb.Append("     lh.time_id, lh.car_id ");

        sb.ToString();// or something like that 
       myDataLayer.theOtherGuysEntitie nme = new myDataLayer.theOtherGuysEntities(myConnection.getEntityFrameworkConnection(typeof(myDataLayer.theOtherGuysEntities)));
        if (log.IsDebugEnabled == true)
        {
            log.Debug(GetType().Name + ".process(): odb" + odb);
            try
            {
                DateTime dt = DateTime.ParseExact(processingDate.ToString(), "MM/dd/yyyy hh:mm:ss tt", CultureInfo.InvariantCulture);
                string s = dt.ToString("dd/M/yyyy");

            }catch(Exception e) {
                fatal=true;
                fatalMsg = true;
                if(log.IsFatalEnabled==true) {
                    log.Fatal(GetType().Name + ".process(): exception", e);
                }
                Console.Error.WriteLine("The OtherGuys Failed Dirty Mike is in the Prius with name{}, name{1}, name{2}, name {3}.");
     //Really I am supposed to use LINQ for the querying
    // and then conditionalstatementsthrough my business logic to handle the decoding 
```

再次感谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T19:49:45.810

```
public static string ToXmlUsingDataContract<T>(T obj)
{
    var dcs = new DataContractSerializer(typeof(T));
    var sb = new StringBuilder();

    using (var writer = XmlWriter.Create(sb))
    {
        dcs.WriteObject(writer, obj);
    }

    return (sb.ToString());
} 
```

只需创建某种类型的数据传输对象，或者直接将实体对象传递给此函数，您将获得有效的、可反序列化的 XML。

# mysql - 当我查询模式时，MySQL 会给出波动的行数？

> ID：15796623
> 
> 赞同：22
> 
> 时间：2013-04-03T19:44:58.503
> 
> 标签：mysql

在这里，我在笔记本电脑上的开发数据库上一遍又一遍地按下并运行相同的命令；

```
mysql> select count(*) from tblTraceOutput;
+----------+
| count(*) |
+----------+
|   300175 |
+----------+
1 row in set (0.42 sec)

mysql> select count(*) from tblTraceOutput;
+----------+
| count(*) |
+----------+
|   300175 |
+----------+
1 row in set (0.35 sec)

mysql> select count(*) from tblTraceOutput;
+----------+
| count(*) |
+----------+
|   300175 |
+----------+
1 row in set (0.45 sec) 
```

在这里我也在做同样的事情，按“向上”并再次运行最后一个命令，但输出正在改变。这里发生了什么？什么都没有使用这个数据库，因为它是我本地笔记本电脑上的一个副本，供我自己修修补补。为什么 table 的 table 行数会发生变化`tblTraceOutput`？

```
mysql> SELECT table_name, table_rows FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA = 'smoketrace';
+----------------+------------+
| table_name     | table_rows |
+----------------+------------+
| tblCategories  |          9 |
| tblResults     |      32463 |
| tblRoutes      |        300 |
| tblSettings    |          2 |
| tblTraceOutput |     303463 |
| tblTraces      |         12 |
+----------------+------------+
6 rows in set (0.01 sec)

mysql> SELECT table_name, table_rows FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA = 'smoketrace';
+----------------+------------+
| table_name     | table_rows |
+----------------+------------+
| tblCategories  |          9 |
| tblResults     |      32948 |
| tblRoutes      |        246 |
| tblSettings    |          2 |
| tblTraceOutput |     297319 |
| tblTraces      |         12 |
+----------------+------------+
6 rows in set (0.00 sec)

mysql> SELECT table_name, table_rows FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA = 'smoketrace';
+----------------+------------+
| table_name     | table_rows |
+----------------+------------+
| tblCategories  |          9 |
| tblResults     |      32948 |
| tblRoutes      |        451 |
| tblSettings    |          2 |
| tblTraceOutput |     302127 |
| tblTraces      |         12 |
+----------------+------------+
6 rows in set (0.02 sec) 
```

刷新页面时，我在 phpMyAdmin 中看到了这种行为，所以我想在 CLI 上检查自己，如您所见，它确实在发生变化！

```
mysql --version
./bin/mysql  Ver 14.14 Distrib 5.5.8, for Linux (i686) using  EditLine wrapper
free -m
             total       used       free     shared    buffers     cached
Mem:          1880       1830         49          0         51        600
-/+ buffers/cache:       1179        701
Swap:         1027          0       1026
uname -a
Linux laptop 3.4.11 #1 SMP Sun Sep 23 15:03:21 BST 2012 i686 i686 i386 GNU/Linux 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-03T19:50:31.737

假设您使用的是 InnoDB，因为[根据 MySQL INFORMATION_SCHEMA TABLES 文档](http://dev.mysql.com/doc/refman/5.5/en/tables-table.html)，这是 5.5.x 中的默认设置。

还有这个注释：

> 如果表在 INFORMATION_SCHEMA 数据库中，则 TABLE_ROWS 列为 NULL。
> 
> 对于 InnoDB 表，行数只是 SQL 优化中使用的粗略估计。（如果 InnoDB 表是分区的，这也是如此。）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-03T19:50:36.560

这不是一个错误。`table_rows`列中报告的值`information_schema.tables`不能保证准确，我们也不期望准确。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-03T19:48:59.753

如果您使用 InnoDB 作为存储引擎，则行数是估计值。

```
For InnoDB tables, the row count is only a rough estimate used in SQL optimization. 
```

[来源](http://dev.mysql.com/doc/refman/5.0/en/tables-table.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T19:49:53.610

看来您正在使用 InnoDB 表。它们仅对状态表中的行数进行非常粗略的估计，以帮助 MySQL 优化器为查询计划选择提供依据。对于准确的行数，如果经常需要，您应该保留一个单独的计数器（因为 select count(*) 远非有效）。

# printing - 直接在 WinRT Windows Store App 中打印 XPS 文档

> ID：15796624
> 
> 赞同：2
> 
> 时间：2013-04-03T19:44:59.977
> 
> 标签：printing, windows-8, windows-runtime, winrt-xaml

**问：**有没有办法在 WinRT 应用程序中打印 XPS 文档？

**背景**：我想从基于 XAML 的 Windows 应用商店应用程序中打印 XPS 文档，但这似乎是不可能的。标准桌面方法[StartXpsPrintJob](http://msdn.microsoft.com/en-us/library/windows/desktop/dd374437(v=vs.85).aspx)不适用于 Windows 应用商店应用程序。WinRT 特定的[Windows.UI.Xaml.Printing](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.printing) / [Windows.Graphics.Printing](http://msdn.microsoft.com/en-us/library/windows/apps/br226489.aspx)方法需要一个实际的 UIElement，但 WinRT XAML 不支持所有 XPS 功能，例如非矩形剪切路径、不透明蒙版等（它也不支持似乎支持[打印 Glyph 元素](https://stackoverflow.com/questions/15776488/how-to-print-glyph-elements-in-winrt)，但那是另一回事了。）那么，我是否遗漏了什么，或者没有办法直接从 WinRT 打印 XPS 文档？由于 Windows 使用 XPS 作为其打印路径，因此无法直接提供 XPS 数据进行打印似乎很奇怪。

**更新**：我花了更多时间尝试直接打印 XPS 文档。Direct2D 提供打印接口，但其 API 仅[接受 Direct2D 命令](http://msdn.microsoft.com/en-us/library/windows/desktop/hh847998%28v=vs.85%29.aspx)。我想直接发送 XPS 数据，但[此页面](http://msdn.microsoft.com/en-ca/library/windows/desktop/hh973242%28v=vs.85%29.aspx)显示“Windows 打印子系统和打印机组件......对 Direct2D 应用程序完全隐藏。” 目前，我可以看到打印 XPS 文档的唯一方法是将它们转换为一系列 Direct2D 命令，然后通过[PrintControl](http://msdn.microsoft.com/en-us/library/windows/desktop/hh847997%28v=vs.85%29.aspx)立即将其转换回 XPS 。这似乎没有必要且效率低下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T06:49:15.413

“或者没有办法直接从 WinRT 打印 XPS 文档？” - 这听起来是正确的。他们似乎放弃了 XPS/FlowDocument。

一种可能的解决方法是自己制作 XPS->UIELEMENT 转换器，然后它将进行必要的转换。但是，正如您已经提到的，WinRT XAML 是有限的。它删除了很多必要的东西。因此，您很可能会做出“半解决方案”。

这是一篇很好的文章，它解释了 WinRT XAML 中可能的“限制”：

[http://blog.tallcomponents.com/2012/04/rasterizing-winrt.html](http://blog.tallcomponents.com/2012/04/rasterizing-winrt.html)

我认为可能的解决方案是：

1）您编写自己的 XPS 光栅化器，它采用 .XPS 文件并将其转换为可以打印的 PNG。这是一项漫长的工作，如果不是更多，可能需要大约 5-7 个月。

2) 只需使用 XPS->HTML 转换器。也许已经有第三方库可以做到这一点？在 WInRT 中打印 html 是可能的：P

3) 看看你能不能接触到 TallComponents。这样您就可以将 XPS 转换为 PDF 到 IMAGE。

# django - django+gunicorn+nginx

> ID：15796626
> 
> 赞同：0
> 
> 时间：2013-04-03T19:45:10.743
> 
> 标签：django, nginx, gunicorn

我按照[http://senko.net/en/django-nginx-gunicorn/](http://senko.net/en/django-nginx-gunicorn/)中的说明部署我的 django 应用程序。我的应用程序在 gunicorn 下运行，并且我已配置 nginx 来为该站点提供服务。一切都很好，只是静态文件在实际静态文件目录的“静态”子目录中查看。

我在 nginx 配置文件中有以下静态文件节：

```
location /static {
    root /webapps/myproject/project_staticfiles;
} 
```

/webapps/myproject/project_staticfiles 是我拥有所有静态文件的地方（我使用 manage.py collectstatic 将静态文件放在那里）。但是，在 nginx 配置中配置的端口访问站点时，找不到它们。error.log 显示它们在更深的目录中查看：/webapps/myproject/project_staticfiles/static。

确实，当我创建一个新目录“静态”并将所有静态文件放在那里时，一切都找到了。在我的项目 settings.py 文件中，我有：

```
STATIC_URL = '/static/'
STATIC_ROOT = '/webapps/myproject/project_staticfiles' 
```

导致这种奇怪行为的设置是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T22:34:59.453

我认为您正在寻找使用[别名](http://wiki.nginx.org/HttpCoreModule#alias)：

```
location /static {
    alias /webapps/myproject/project_staticfiles;
} 
```

如果您阅读[root](http://wiki.nginx.org/HttpCoreModule#root)上的文档，它会指出：

> root 指定请求的文档根目录。例如，使用此配置：

```
location  /i/ {   
    root  /spool/w3; 
} 
```

> 对“/i/top.gif”的请求将返回文件“/spool/w3/i/top.gif”。您可以在参数中使用变量。

`root`将目录附加到文件路径`alias`中，这就是为什么`static`将目录附加到您的根目录以形成`/webapps/myproject/project_staticfiles/static`

# python - 将 cross_validation.cross_val_score 与 metrics.precision_recall_fscore_support 一起使用

> ID：15796627
> 
> 赞同：5
> 
> 时间：2013-04-03T19:45:11.073
> 
> 标签：python, scikit-learn, cross-validation

我是 scikits-learn 的新手，我想使用`cross_validation.cross_val_score`with`metrics.precision_recall_fscore_support`这样我就可以获得所有相关的交叉验证指标，而不必为了准确性、一次为了精度、一次为了召回和一次为了准确而运行我的交叉验证f1。但是当我尝试这个时，我得到一个 ValueError：

```
from sklearn.datasets import fetch_20newsgroups

from sklearn.svm import LinearSVC
from sklearn.feature_extraction.text import TfidfVectorizer
from sklearn import metrics
from sklearn import cross_validation
import numpy as np

data_train = fetch_20newsgroups(subset='train', #categories=categories,
                                shuffle=True, random_state=42)
clf = LinearSVC(loss='l1', penalty='l2')
vectorizer = TfidfVectorizer(
  sublinear_tf=False, 
  max_df=0.5,
  min_df=2, 
  ngram_range = (1,1),
  use_idf=False,
  stop_words='english')

X_train = vectorizer.fit_transform(data_train.data)

# Cross-validate:
scores = cross_validation.cross_val_score(
  clf, X_train, data_train.target, cv=5, 
  scoring=metrics.precision_recall_fscore_support) 
```

这是错误：

```
 File "<stdin>", line 3, in <module>
  File "sklearn/cross_validation.py", line 1148, in cross_val_score
    for train, test in cv)
  File "sklearn/externals/joblib/parallel.py", line 514, in __call__
    self.dispatch(function, args, kwargs)
  File "sklearn/externals/joblib/parallel.py", line 311, in dispatch
    job = ImmediateApply(func, args, kwargs)
  File "sklearn/externals/joblib/parallel.py", line 135, in __init__
    self.results = func(*args, **kwargs)
  File "sklearn/cross_validation.py", line 1075, in _cross_val_score
    score = scorer(estimator, X_test, y_test)
  File "sklearn/metrics/metrics.py", line 1261, in precision_recall_fscore_support
    print beta
ValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all() 
```

注意，您需要 .14-git 版本才能在`cross_validation.cross_val_score`.

```
import sklearn
sklearn.__version__

'0.14-git' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-07-24T21:57:10.897

您应该将 sci-kit learn 更新到最新版本 0.16。

[有关评分参数，请参阅此页面](http://scikit-learn.org/stable/modules/model_evaluation.html#scoring-parameter)

并非所有的 sklearn.metrics 都有效，而且名称也不同。接受以下参数：

```
ValueError: 'wrong_choice' is not a valid scoring value. Valid options are        
['accuracy', 'adjusted_rand_score', 'average_precision', 'f1', 'f1_macro', 
'f1_micro', 'f1_samples', 'f1_weighted', 'log_loss', 'mean_absolute_error', 
'mean_squared_error', 'median_absolute_error', 'precision',   
'precision_macro', 'precision_micro', 'precision_samples', 
'precision_weighted', 'r2', 'recall', 'recall_macro', 'recall_micro', 
'recall_samples', 'recall_weighted', 'roc_auc'] 
```

# bash - 转置巨大的制表符分隔文件 (2.1TB) @ 8.5Kx39M 的有效方法

> ID：15796628
> 
> 赞同：2
> 
> 时间：2013-04-03T19:45:15.087
> 
> 标签：bash, transpose

我有几个巨大的制表符分隔文件 @ 每个 ~2.1 TB，~8.5 K 行，~39.3M 列。第一列是可变长度的所有字符串（ID），其余是零后三个位置的非负固定精度小数（即，ID 之后的每一列都是 5 个字符长 0.000）。

在具有 256GB RAM 的 Linux 机器中转置文件的最有效方法是什么？最终，在转置之后，我想将文件分成 500K 行，以便我可以开始处理它。硬盘没问题，有70TB的可用空间。

这是我能想到的（每个文件大约需要 2.5 天）。问题是每个文件的行数和列数都略有不同。我不想在每次运行时都修改脚本。或者，我可以编写一个专门的 C 程序来执行此操作，但我不愿意这样做。

```
#!/bin/bash
i=$1
mkdir temp-$i
cd temp-$i
echo "Splitting $i"
split -dl 1 -a 4 ../$i
echo "Transposing all lines"
for a in x???? ; do
    cat $a | sed 's/\t/\n/g' > $a.txt
    mv $a.txt $a
done
echo "Joining all columns"
# Here's where it gets really ugly:
paste x0000 x0001 ... x0999 > a.txt
paste x1000 x1001 ... x1999 > b.txt
paste x2000 x2001 ... x2999 > c.txt
paste x3000 x3001 ... x3999 > d.txt
paste x4000 x4001 ... x4999 > e.txt
paste x5000 x5001 ... x5999 > f.txt
paste x6000 x6001 ... x6999 > g.txt
paste x7000 x7001 ... x7999 > h.txt
paste x8000 x8001 ... x8499 > i.txt
paste ../colinfo-$i.txt a.txt b.txt c.txt d.txt e.txt f.txt g.txt h.txt i.txt > ../tr-$i.txt
cd ../
rm -Rf temp-$i 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T21:41:16.587

粘贴操作正在扼杀你的表现。如何创建与列一样多的文件，然后使用单次通过输入文件，将数据写入列文件。IE。：

输入文件：

```
ID     data1 data2 data3 .... data5000
94239  0.001 0.002 0.003 .... 5.000
43244  0.011 0.012 0.013 .... 5.010 
```

输出文件：

col0：

```
ID    94239   43244 
```

col1：

```
data1 0.001   0.011 
```

...这里还有 4999 个文件...

col5000：

```
data5000 5.000 5.010 
```

可以使用这个 perl 程序来拆分列：

```
#!perl -n

use strict;
use warnings;
use File::Path 'make_path';

$INPUT_RECORD_SEPARATOR = "\t";

my $colno = 0;
my $maxcol = 0;
while(my $col = <STDIN>) {
    $colno = 0 if $col =~ s/\n//;
    $colno++;
    my $path = join '/', $colno =~ /(\d{3})/g;
    if($colno > $maxcol) {
        make_path $path;
        $maxcol = $colno;
    }
    open my $OUT, '>>', "$path/col.tsv";
    print $OUT "$col\t";
    close $OUT;
} 
```

（未经测试！）

然后最后将文件连接在一起：

```
cat col0 col1 ... col5000 > newfile.tsv 
```

（`xargs`可能需要。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T10:04:00.413

[https://gitlab.com/ole.tange/tangetools/raw/master/transpose/transpose](https://gitlab.com/ole.tange/tangetools/raw/master/transpose/transpose)

```
cat table.csv | transpose -d , > transposed.csv
transpose -d '\t' table.tsv > transposed.tsv 
```

这是一个通用工具，您可以在其中指定要使用的分隔符和缓冲区大小。

它的工作原理是将 table.csv 切成 10M 块（可以调整，`-b`并且应该按照 FreeMem/NumberOfCores/10 的顺序）。然后将它们并行转置（每个 CPU 内核一个）。最后将转置的块粘贴在一起。

它假定每一行都是完整的 CSV 记录（即引用的 \n 将不起作用）。

速度：3 GB CSV 文件 1000000x300 表需要 2.5 分钟。

速度：3 GB CSV 文件 300x1000000 表需要 5 分钟。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-10T02:56:56.820

您的文件大小非常规则，因此可以找到数据的确切位置，并通过 IO 读/写操作一次获得转置结果。

它只需要计算第一行的长度，其他行都是5字节的数字。

```
Input File example:
ID  data1   data2   data3   data4   data5   data6   data7 ...
78028   0.185   0.146   0.910   0.458   0.223   0.853   0.215 ...
76877   0.049   0.486   0.313   0.777   0.599   0.197   0.676 ...
81636   0.055   0.640   0.081   0.477   0.713   0.866   0.308 ... 
```

数据'0.049'(target row=2, col=3)的文件偏移量为：length(headerline)+length(eachdataline)*(col-2)+row*(5+1)

以下 python 代码适用于我的测试数据

```
#encoding=utf-8
import sys
from sys import argv
import os
import time

start = time.time()
def elapsed():
    return time.time() - start

def transpose(filepath):
    # calculate offset for header line
    header_item_offsets = []
    org_rowcnt, org_colcnt = 0, 0
    with open(filepath) as infile:
        for line in infile:
            if org_rowcnt==0:
                headeritems = line[:-1].split('\t')     # remove \n, then split by \t
                org_colcnt = len(headeritems)
                offset = 0
                offset_headerline = len(line)      # + 1 #windows end with \r\n
                offset_dataline = org_colcnt*6    # +1 # windows end with \r\n
                for item in headeritems:
                    header_item_offsets.append(offset)
                    offset += len(item)+1
                # append one more offset for the last item
                header_item_offsets.append(offset)
            org_rowcnt += 1

    with open(filepath,'rb') as infile, open( filepath+'_transed.txt','w') as outfile:
        # transpose
        for row in xrange(org_colcnt):
            line = []
            for col in xrange(org_rowcnt):
                if col==0:
                    # data from header line
                    offset = header_item_offsets[row]
                    readsize = header_item_offsets[row+1] - header_item_offsets[row] - 1
                else:
                    # data from data line offset = header_offset + eachline_offset*(col-1) + row*6
                    offset = offset_headerline + offset_dataline*(col-1) + row*6
                    readsize = 5
                infile.seek(offset)
                line.append( infile.read(readsize) )
            outfile.write( '\t'.join(line) + '\n' )
            if row%10000==0:
                print "Generating row %d" % row

if __name__=="__main__":
    script, filepath = argv
    transpose(filepath)
    print "Running Time:\t", elapsed() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T13:37:25.437

您将每个字节写入 4 次：split、sed、paste 和 final。

如果我们可以避免多次写入字节，我们将节省时间。

该脚本一次性完成拆分和 sed。

并且一次性完成粘贴和最终处理。

因此，您只会将数据写入临时空间一次。

最后，它使用 <() bash 构造：

```
paste <(paste t{1..999}) <(paste t{1000..2000}) 
```

这会寻找很多，所以如果你可以改变磁盘的预读，那将是一个非常好的主意。（blockdev --setra 和 --setfra）

脚本：

```
#!/usr/bin/perl                                                                                                                         

use English;

while(<>) {
    s/,/\n/g;
    open(OUT,">","t$NR") or die;
    print OUT $_;
    close OUT;
}

my $nfiles = $NR;

@cmd = ("paste ");
my $last = 0;
for my $n (1..$nfiles) {
    if(not $n % 1000) {
    push @cmd, "<(paste t{".($last+1)."..".$n."})";
    $last = $n;
    }
}
if(not $last == $nfiles) {
    push @cmd, "<(paste t{".($last+1)."..".$nfiles."})";
}
system "bash -c '@cmd'"; 
```

致电：

```
cat table | mysplit.pl | split -C 500000; rm t* 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T15:02:40.693

如果到目前为止没有一个解决方案足够快，我相信这会是。

我们知道每一行都是 39.3M*(5+1) + 一点。因此，相对容易找到每一行的确切起始位置。这样做将花费大约 8.5k 次搜索 + 读取。

鉴于我们所做的 8.5k 起始位置：

```
for s (startpositions) {
    push r, record.init(s)
}
nrows = len(startpositions)

while (not finished) {
    for row (1..nrows-1) {
        print r[row].get(),"\t"
    }
    print r[nrows].get(),"\n"
}

class record:
init(position) {
    pos = position
}

get() {
    if values.empty and not end_of_line {
        seek pos
        buffer += read(1MB)
        pos += 1MB
        if buffer =~ s/\n.*// {
            end_of_line = true;
        }
        values = split /\t/, buffer
        buffer = pop values
    }
    return pop values
} 
```

这样，我们每 1 MB 只进行 1 次搜索，并且我们只读取文件一次并且没有临时文件。

1 MB/记录应该缓存总共 8.5 GB，因此在 256 GB 机器上将 1 MB 增加到 20 MB 应该是安全的，每 20 MB 数据提供 1 次搜索。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-24T14:00:27.247

如果您允许像 mzedeler 建议的临时文件并希望继续为我工作：

```
inFile="bigTable.csv"
sep=","
outFile="bigTable.transposed.csv"

TMPWD=`mktemp -d --tmpdir=$TMPDIR transpose.XXXXXXXX`

prefix=$TMPWD/col

while read line; do
  cat \
    | mawk -vFS="$sep" -f  <(
      #generate AWK-code and print first entries to the temporary files
      echo $line \
        | mawk -vFS="$sep" -vprefix=$prefix '
            {
              printf("{")
              endCmd="END {"
              for(i=1;i<=NF;i+=1){
                file=sprintf(prefix"%05d",i)
                printf("%s",$i) > file
                printf("printf(\"%s%%s\",$%s) >> \"%s\"; ",FS,i,file)
                endCmd= endCmd""sprintf("printf(\"\\n\") >> \"%s\"; ",file)
              }
              endCmd=endCmd"}"
              printf("} ")
              print endCmd
            }
          '
    )
done < <( cat $inFile )

cat ${prefix}* > $outFile

rm -rf $TMPWD 
```

诚然，我只有一个 12x25M，但它在大约 2 分钟内运行。我试图通过包含代码生成步骤来避免 AWK 中的 for 循环。内部代码在表格上：

```
{printf(",%s",$1) >> "tmp/col00001"; ... printf(",%s",$N) >> "tmp/col0000N"; }
END {printf("\n") >> "tmp/col00001"; ... printf("\n") >> "tmp/col0000N" } 
```

# python - Django 调试错误页面不适用于 AJAX 调用

> ID：15796629
> 
> 赞同：3
> 
> 时间：2013-04-03T19:45:21.547
> 
> 标签：python, django

django 的一个很棒的特性是在 On 500 错误时返回的调试页面。

但是，在 AJAX 调用中，我得到了当`DEBUG = False`. 执行非 AJAX 请求时不会发生此问题：在“正常”请求中，如果发生 Internet 服务器错误，则返回漂亮的调试页面。

我昨天从 django 1.3 升级到 1.5。

我的 settings.py 有以下内容：

```
DEBUG = True
TEMPLATE_DEBUG = True
TEMPLATE_CONTEXT_PROCESSORS contain django.core.context_processors.debug 
```

我已将我的重置`settings.py`为“出厂设置”，但问题仍然存在。

受影响的最简单代码的示例 - 即使是最简单的代码也会受到影响：

```
def webservice(request):
     raise KeyError
     return HttpResponse('it didnt work') 
```

这是由以下请求调用的：

```
$.post('/webservice/', {'a':1, 'b':2}) 
```

需要注意的是，我使用的是jquery，并且这个小宝贝so csrf_token 是加到requests中的：

```
$(document).ajaxSend(function(event, xhr, settings) {
        function sameOrigin(url) {
            var host = document.location.host, // host + port
                protocol = document.location.protocol,
                sr_origin = '//' + host,
                origin = protocol + sr_origin;
            return (url == origin || url.slice(0, origin.length + 1) == origin + '/') ||
                (url == sr_origin || url.slice(0, sr_origin.length + 1) == sr_origin + '/') ||
                // or any other URL that isn't scheme relative or absolute i.e relative.
                !(/^(\/\/|http:|https:).*/.test(url));
        }
        function safeMethod(method) {
            return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
        }
        if (!safeMethod(settings.type) && sameOrigin(settings.url)) {
            xhr.setRequestHeader("X-CSRFToken", '{{csrf_token}}');
        }
    }); 
```

**后代的解决方案**

1.4 中的行为更改为仅在请求为 ajax 时返回回溯。下面是如何选择性地恢复该功能（当您主要在 ajax 请求领域工作时，这非常有用）：

编辑`django.views.debug`第 65 行

```
if request.is_ajax(): 
```

到

`if request.is_ajax() and settings.MINIFY_505_ON_AJAX`：

然后`MINIFY_505_ON_AJAX = False`加入`settings.py`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T20:31:33.983

“漂亮的调试页面”取决于 DEBUG 设置（来自[https://docs.djangoproject.com/en/dev/ref/settings/#debug](https://docs.djangoproject.com/en/dev/ref/settings/#debug)）

```
One of the main features of debug mode is the display of detailed error pages.
If your app raises an exception when DEBUG is True, Django will display a 
detailed traceback, including a lot of metadata about your environment, such
as all the currently defined Django settings (from settings.py). 
```

TEMPLATE_DEBUG 添加与模板渲染错误相关的额外信息。

**更新**：

如果 request.is_ajax() 为真，那么这就是它应该工作的方式，然后在响应正文中返回文本回溯，检查源：

[https://github.com/django/django/blob/master/django/views/debug.py#L59-70](https://github.com/django/django/blob/master/django/views/debug.py#L59-70)

此行为在 1.4 中更改，提交：[https ://github.com/django/django/commit/0d9b6a5bc43c06716212bd3f847460ce985381aa](https://github.com/django/django/commit/0d9b6a5bc43c06716212bd3f847460ce985381aa)

**更新 2**：

这有点骇人听闻，但出于调试目的，您可以修改 HTTP_X_REQUESTED_WITH 标头，使 request.is_ajax() 为 false，然后强制 html 响应。（见[https://github.com/django/django/blob/master/django/http/request.py#L136-137](https://github.com/django/django/blob/master/django/http/request.py#L136-137)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T20:01:39.163

该`TEMPLATE_DEBUG`选项仅适用于呈现 Django 模板时发生的错误。由于您的函数不呈现任何模板，因此该选项将无效。

来自[https://docs.djangoproject.com/en/dev/ref/settings/#template-debug](https://docs.djangoproject.com/en/dev/ref/settings/#template-debug)：

> 打开/关闭模板调试模式的布尔值。**如果这是真的，花哨的错误页面将显示模板渲染**期间引发的任何异常的详细报告。此报告包含模板的相关片段，并突出显示相应的行。

这也意味着即使您的函数确实渲染了模板，如果在渲染模板之前发生错误，您仍然会得到纯文本输出。

请注意，在以下示例中：

```
def year_archive(request, year):
    a_list = Article.objects.filter(pub_date__year=year)
    raise Exception("something horrible happened")
    return render_to_response('news/year_archive.html', {'year': year, 'article_list': a_list}) 
```

`Exception`以前是被养的`render_to_response`，所以`TEMPLATE_DEBUG`永远没有机会跑。

如果您想查看非模板错误的回溯，则需要查看命令行输出或日志。

# testing - 如何在 Xcode 中运行“测试代码”并且在发布版本中没有与测试相关的代码？

> ID：15796632
> 
> 赞同：0
> 
> 时间：2013-04-03T19:45:39.463
> 
> 标签：testing, xcode4

**修正：我的数据库是空**的。我的代码覆盖了我现有的（填充的）数据库。这没东西看 ：）

我有 3 个“测试”类在我的应用程序上运行测试。该应用程序的部分功能是解析 HTML，因此我有一个标记代码数据库可供测试。我不希望我发布的代码中包含这 3 个测试类和标记代码数据库。我如何设置 Xcode 来实现这一点？

我也在运行单元测试，所以我已经放入了一个测试方法来挂钩我的测试类，但是下面的 if 语句不评估为真：

```
if (sqlite3_prepare_v2(database, sql, -1, &statement, NULL) == SQLITE_OK) 
```

首先想到的是 libsqlite3.0.dylib 和 .sqlite 是否被复制（它是），此外，在此行之前的以下语句**确实评估为 true**：

```
if (sqlite3_open([path UTF8String], &database) == SQLITE_OK 
```

所以我可以假设（？）sqlite db和dylib已经到位。

请记住，代码是从已知的工作副本中完全复制的，我重新研究了以下内容：

*   我已经验证了数据库和 sql 变量在有问题的行不是 nil 之前不是 nil
*   我已将 dylib、.sqlite 和测试类目标分配给所有目标（主要是因为我正在了解目标的一般工作方式）
*   使用断点我验证了我的 Xcode 创建的测试用例类上的测试方法正在被调用

我想知道这是我缺少的设置，还是 SenTestingKit 框架不支持它。是否可以以这种方式挂钩测试类？

# java - tomcat7-maven-plugin：运行多个 webapps 但端口 8080 已在使用中

> ID：15796633
> 
> 赞同：6
> 
> 时间：2013-04-03T19:45:58.713
> 
> 标签：java, maven, web-applications, tomcat7, embedded-tomcat-7

我正在尝试使用`tomcat7-maven-plugin`设置嵌入式 tomcat 容器，分阶段运行 webapps `pre-integration-test`，运行集成测试，然后分阶段关闭 tomcat `post-integration-test`。该项目是一个多模块 maven 项目（包含`app1`、`app2`等）。父母`pom.xml`看起来像以下，

```
<build>
  <plugins>
    <plugin>
      <groupId>org.apache.tomcat.maven</groupId>
      <artifactId>tomcat7-maven-plugin</artifactId>
      <version>2.1</version>
      <configuration>
        <contextFile>path/to/context.xml</contextFile>
        <tomcatUsers>path/to/tomcat-users.xml</tomcatUsers>
        <fork>true</fork>
      </configuration>
      <executions>
        <execution>
          <id>tomcat-run</id>
          <goals>
            <goal>run</goal>
          </goals>
          <phase>pre-integration-test</phase>
        </execution>
        <execution>
          <id>tomcat-shutdown</id>
          <goals>
            <goal>shutdown</goal>
          </goals>
          <phase>post-integration-test</phase>
        </execution>
      </executions>
    </plugin>
  </plugins>
</build> 
```

然后我就跑了`mvn clean integration-test --projects=app1,app2`。**当第二个应用程序启动**时，我得到`java.net.BindException`，

```
SEVERE: Failed to initialize end point associated with ProtocolHandler ["http-bio-8080"]
java.net.BindException: Address already in use <null>:8080
    at org.apache.tomcat.util.net.JIoEndpoint.bind(JIoEndpoint.java:406)
    at org.apache.tomcat.util.net.AbstractEndpoint.init(AbstractEndpoint.java:610)
    at org.apache.coyote.AbstractProtocol.init(AbstractProtocol.java:429)
    at org.apache.coyote.http11.AbstractHttp11JsseProtocol.init(AbstractHttp11JsseProtocol.java:119)
    at org.apache.catalina.connector.Connector.initInternal(Connector.java:981)
    at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:102)
    at org.apache.catalina.core.StandardService.initInternal(StandardService.java:559)
    at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:102)
    at org.apache.catalina.core.StandardServer.initInternal(StandardServer.java:814)
    at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:102)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:139)
    at org.apache.catalina.startup.Tomcat.start(Tomcat.java:335)
    at org.apache.tomcat.maven.plugin.tomcat7.run.AbstractRunMojo.startContainer(AbstractRunMojo.java:1091)
    at org.apache.tomcat.maven.plugin.tomcat7.run.AbstractRunMojo.execute(AbstractRunMojo.java:512)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:319)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: java.net.BindException: Address already in use
    at java.net.PlainSocketImpl.socketBind(Native Method)
    at java.net.PlainSocketImpl.bind(PlainSocketImpl.java:383)
    at java.net.ServerSocket.bind(ServerSocket.java:328)
    at java.net.ServerSocket.<init>(ServerSocket.java:194)
    at java.net.ServerSocket.<init>(ServerSocket.java:150)
    at org.apache.tomcat.util.net.DefaultServerSocketFactory.createSocket(DefaultServerSocketFactory.java:49)
    at org.apache.tomcat.util.net.JIoEndpoint.bind(JIoEndpoint.java:393)
    ... 34 more 
```

那么是否有`tomcat7-maven-plugin`在嵌入式 tomcat 中运行多个 webapp 的配置？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-04T07:37:15.633

请参阅[tomcat7:run](http://tomcat.apache.org/maven-plugin-2.0/tomcat7-maven-plugin/run-mojo.html) mojo 参数：您可以配置插件执行以使用其他端口，类似于此配置：

```
<execution>
    <id>tomcat-run</id>
    <goals>
        <goal>run</goal>
    </goals>
    <phase>pre-integration-test</phase>
    <configuration>
        <port>9090</port>
    </configuration>
</execution> 
```

当然，为第二个项目使用另一个端口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T06:28:00.540

应该支持。您应该在配置中配置 webapps 元素，Tomcat 将部署所有应用程序：http: [//tomcat.apache.org/maven-plugin-2.0/tomcat7-maven-plugin/run-mojo.html](http://tomcat.apache.org/maven-plugin-2.0/tomcat7-maven-plugin/run-mojo.html)

也看看[如何使用 maven 插件 tomcat7:run with multiple contexts (WARs)？](https://stackoverflow.com/questions/11959975/how-to-use-maven-plugin-tomcat7run-with-multiple-contexts-wars)

# internet-explorer - IE中选择列表的宽度

> ID：15796640
> 
> 赞同：0
> 
> 时间：2013-04-03T19:46:33.663
> 
> 标签：internet-explorer, select, drop-down-menu, option

我在 IE 中阅读了文章[Dropdownlist width ，](https://stackoverflow.com/questions/73960/dropdownlist-width-in-ie)但不幸的是我无法适应我的需要。

我有一个选择列表，其中包含一些在新窗口中打开 URL 的选项，我使用下面的 jQuery：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

链接选择列表选项的脚本如下：

```
<script type="text/javascript">
  $(document).ready(function() { 
  $('.openSelect').change(function(){ 
    var selectedValue=$(this).val(); 
      if (selectedValue.match(/http/)) { 
       var open = window.open($(this).val(),'_blank'); 
       if (open == null || typeof(open)=='undefined'){ 
       alert("Please turn off pop-up blocker and reload this page to visit:  " + selectedValue); 
       }
 }
});
});
</script> 
```

我的问题是下拉菜单宽度受到 IE6、7 和 8 中表格单元格宽度的限制，所以我必须以某种方式修复它以扩展为最长选项内容的宽度。唯一的限制是我必须保留上面的脚本并以某种方式修改它，而不是完全改变它。

以下页面给出了选择列表的示例： [http ://www.myairlease.com/available/available_for_lease_737](http://www.myairlease.com/available/available_for_lease_737)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T18:03:31.757

我查看了描述插件的页面的源代码，他们使用的内容与他们在说明中给出的完全不同......

有人可以帮助解决如何进行吗？

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T19:40:48.393

谢谢您的帮助！！

我尝试使用 LinkSelect 插件，但我肯定做错了什么。 [http://www.givainc.com/labs/linkselect_jquery_plugin.htm#options](http://www.givainc.com/labs/linkselect_jquery_plugin.htm#options)

我的选择标签如下

```
<select class="openSelect" style="width:px; color:#0066ff;"> 
```

所以我只是在头部加载以下内容：

```
<script type="text/javascript" src="js/jquery.linkselect.min.js"></script>
<script type="text/javascript" src="js/jquery.bgiframe.js"></script>
<link type="text/css" href="css/jquery.linkselect.css" rel="stylesheet" media="all" /> 
```

并将我的脚本更改为以下内容？

```
<script type="text/javascript">
$(document).ready(function() { 
 $('.select.openSelect').openSelect();
  $('.openSelect').change(function(){ 
  var selectedValue=$(this).val(); 
  if (selectedValue.match(/http/)) { 
       var open = window.open($(this).val(),'_blank'); 
       if (open == null || typeof(open)=='undefined'){ 
       alert("Please turn off pop-up blocker and reload this page to visit:  " + selectedValue); 
       }
     }
  });
});
</script> 
```

我试过了，它不起作用，所以知道我的错误在哪里吗？

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T20:59:19.933

您遇到的问题是 IE8 和更早版本使用操作系统的内置下拉框控件来处理 HTML 选择框。所有其他浏览器，包括 IE9 和更高版本都会自己呈现选择框，但 IE6/7/8 不会。

这带来了许多怪癖和限制，您看到的效果是最明显的效果之一。

简短的回答是，在 IE8 和更早版本中没有办法强制标准选择框显示比选择框本身更宽的字符串。有一些 hacky 的变通方法，但它们并不能很好地工作，尤其是当您处理基于表格的布局时。

更长的答案是，如果您需要这样做，那么您唯一的选择是使用自定义选择框控件。有许多 jQuery 插件用它们自己的覆盖默认选择框。有很多负载可供选择，并且它们具有各种不同的功能，因此我不会推荐特定的功能，而是将您定向到列出了十个最佳功能的[网站。](http://www.jquery4u.com/plugins/10-jquery-selectboxdrop-down-plugins/)可以肯定的是，至少其中一些会按照您需要的方式工作。

一般来说，它们使用起来非常简单，并且不需要对您的 HTML 代码进行任何更改；只需在您的文档准备功能中添加一点额外的 javascript 即可激活它们。

我希望这会有所帮助。

# algorithm - 可以使用堆排序排序的元素数量？

> ID：15796643
> 
> 赞同：2
> 
> 时间：2013-04-03T19:46:49.030
> 
> 标签：algorithm, sorting, math, runtime, time-complexity

我在考试中遇到了一个非常混乱的问题并且尝试错了，这是一个客观类型的问题，给出了四个选项，现在我知道正确的选项但我没有解释。

**问题 ：**

使用 heapsort 在Ɵ(logn) 时间内可以排序的元素数是

a) Ɵ(1)

b)Ɵ(√log n)

c)Ɵ(​​log n / loglog n)

d)Ɵ(log n)

**选项c是正确的。**

我选择了选项 a)，我认为在 log n 时间内只有一个元素会被排序，这是错误的，我不知道为什么选项 c) 是正确的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T20:30:14.070

忽略这个问题要求在堆排序上绑定 Theta 的事实，在一般情况下它没有，这就是为什么这是令人困惑的：

在处理朗道表示法（= O，Ɵ，Omega 的东西）时，我们习惯于将输入大小指定为`n`; 您在这里被问到的是“我们必须将输入大小设置为什么才能获得Ɵ（log n）的复杂性”。

例如：考虑列表遍历；这将带您`O(n)`查看大小列表`n`。另一方面，如果我们将输入限制`log n`为 一些`n`，我们会得到 的复杂度`O(log n)`。将这个想法转移到排序算法中，我们知道`O(n log n)`如果我们给它一个 size 的列表，堆排序的最坏情况复杂度`n`。那么如果我们给它一个 size 列表会发生什么`log n`呢？复杂性变小了：我们从`(n) log (n)`到

`(log n) log (log n) = log n log log n`

现在解释为什么 c) 是正确的答案，我会写`l(n)`而不是`log n`让它更易读。

将输入大小调整`n * l(n)`为`l(n)/l(l(n))`c) 状态。然后我们得到：

```
l(n)/l(l(n)) * l(l(n)/l(l(n)))
= l(n)/l(l(n)) * [l(l(n) - l(l(l(n)))]
= l(n) - [l(n) * l(l(l(n)))]/l(l(n)) 
```

如您所见（希望如此），主导项是`l(n) = log n`，因此对于大小为 的输入`l(n)/l(l(n))`，堆排序的最坏情况复杂度为`O(log n)`。然而，Theta 对于一般情况来说绝对是错误的。

旁注：有人知道如何使条款漂亮吗？我知道我们这里没有 LaTeX 内联，但这看起来一点也不好看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:29:50.053

令 t=exp(n) 为您拥有的时间，m 为您在该时间内可以排序的项目数。

a) m = Θ(1) ⇒ t → ∞：无论何时，您都只能对有限数量的项目进行排序。
b) m = Θ(√t) ⇒ t = Θ(m²)：你需要二次时间。愚蠢的冒泡排序。
c) m = Θ(t/log t) ⇒ t = Θ(m log m)：这是堆排序的复杂度。
d) m = Θ(t) ⇒ t = Θ(m)：线性时间排序好得令人难以置信。

我必须承认 c) 的转换主要是基于“直觉”。我有理由相信它是正确的或至少“几乎正确”，但我不知道我用来证明这一点的正式规则。

# javascript - 遍历数组时获取索引而不是实际值

> ID：15796654
> 
> 赞同：0
> 
> 时间：2013-04-03T19:47:41.597
> 
> 标签：javascript

我正在使用这段代码。

```
var stuff = "mango,tango,snake";
for (thing in stuff.split(","))
  console.log(thing); 
```

我期待三行字。我得到三行索引。我检查了*toString*等方法。没有任何帮助。

1.  为什么？
2.  我应该改用什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:48:40.493

这是正常的行为。要记录值，请使用

```
var arr = stuff.split(",");
for (var thing in arr)
  console.log(arr[thing]); 
```

请参阅[MDN`for in`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for...in)（强调我的）：

> 每次迭代都会为变量分配不同的属性**名称。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T19:51:12.797

*Javascript 数组*也只是一个对象*，*它也继承自`Object`. 但是该*Array*也继承`Array.prototype`并获得了一些特殊的方法和行为。

但毕竟它只是一个*Object*，这意味着它的结构看起来像

```
{
    0:   'mango',
    1:   'tango',
    2:   'snake'
} 
```

如果您现在`for..in`在该对象上循环，我们只会得到您描述的结果（以及我们应该期望的结果）。对象的*键*，只是*索引值*，我们只是循环对象键，对吧？

要获取键后面的实际值，我们访问整个对象，例如

```
objectName[ key ] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T20:04:52.717

*我应该改用什么？*

您可以使用`ECMAScript 5 's`功能[Array.forEach](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach)来满足您的需求。

```
var stuff = "mango,tango,snake";
stuff.split(",").forEach(function(thing){ alert(thing); }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T20:07:23.893

循环遍历数组的标准方法是使用：

```
var stuffArray=stuff.split(",");
for (var i=0, stuffLength=stuffArray.length;i<stuffLength;i++) {
    // here you can retrieve the value stuffArray[i]
} 
```

还有一个[forEach 方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach)，但旧浏览器（如 IE 8）不支持。

for...in 循环遍历数组对象的属性，并且可能给您提供的不仅仅是数组项。

# asp.net - Click 事件不会在嵌套用户控件中触发，也不会调试

> ID：15796659
> 
> 赞同：1
> 
> 时间：2013-04-03T19:47:56.520
> 
> 标签：asp.net, user-controls, event-handling, webforms

我正在使用 VS 2012/ASP.NET（网络表单）4.5。我有一个带有传统用户控件的页面：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/ControlCenter/MasterAdmin.master" AutoEventWireup="true" CodeFile="OrderDetail.aspx.cs" Inherits="ControlCenter_OrderDetail" %>

<%@ register src="~/Controls/OrderDetailMenu.ascx" tagprefix="eoi" tagname="OrderDetailMenu" %>

<asp:content ID="OrderDetailHead" ContentPlaceHolderID="head" Runat="Server">
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
<script type="text/javascript" src="../Scripts/jquery-1.7.1.min.js"></script>
<script type="text/javascript" src="../Scripts/jquery-ui-1.8.20.js"></script>
</asp:content>
<asp:content ID="OrderDetailBody" ContentPlaceHolderID="BodyContent" Runat="Server">
<table style="width: 100%;">
    <tr>
        <td colspan="4">
            <eoi:orderdetailmenu id="OrderDetailMenu" runat="server" />
        </td>
    </tr>
.............. 
```

在控件内部，我使用 jQuery 对话框来显示嵌套的用户控件：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeFile="OrderDetailMenu.ascx.cs" Inherits="Controls_OrderDetailMenu" %>
<%@ register src="~/Controls/UserComments.ascx" tagprefix="eoi" tagname="UserComments" %>
<%@ register src="~/Controls/OrderComments.ascx" tagprefix="eoi" tagname="OrderComments" %>

<script type="text/javascript">
$(document).ready(function()
{
    //init dialog
    $("#userCommentsPanel").dialog({
        title: "Add User Comment",
        height: 300,
        width: 700,
        autoOpen: false,
        show: "puff",
        hide: "puff", 
        buttons: [
            {
                text: "Close Window",
                click: function()
                {
                    $(this).dialog("close");
                }
            }
        ]
    });

    //popup link event
    $("#addUserCommentsLink").click(function(e)
    {
        $("#userCommentsPanel").dialog("open");
        e.preventDefault();
        return false;
    });
});
</script>
<table border="0" cellpadding="2" cellspacing="3">
<tr>
    <td>
        <a href="#" id="addUserCommentsLink" name="addUserCommentsLink">
            Add User Comment
        </a>
    </td>
</tr>
</table>
<asp:panel id="userCommentsPanel" clientidmode="Static" runat="server">
<div class="userCommentsPopup">
    <eoi:usercomments id="UserComments" runat="server" />
</div>
</asp:panel> 
```

嵌套控件内部是简单的表单，如下所示：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeFile="UserComments.ascx.cs" Inherits="Controls_UserComments" %>
<table style="width:100%;" id="userCommentsFormTable" runat="server">
<tr>
    <td width="1%">&nbsp;</td>
    <td>&nbsp;</td>
</tr>
<tr>
    <td colspan="2">
        <asp:validationsummary id="userCommentsSummary" runat="server" cssclass="validation" ShowModelStateErrors="true" />
    </td>
</tr>
<tr>
    <td>
        <asp:textbox id="commentsBox" runat="server" columns="80" rows="5" textmode="MultiLine"></asp:textbox>
    </td>
    <td>&nbsp;</td>
</tr>
<tr>
    <td align="right">
        <asp:button id="commentsButton" runat="server" text="Save" onclick="commentsButton_Click" />
    </td>
    <td>&nbsp;</td>
</tr>
</table> 
```

...事件处理程序：

```
 protected void commentsButton_Click(object sender, EventArgs e)
{
        //this method is never executed. :(
} 
```

Page_Load 触发，但按钮单击事件没有......根本没有发生任何事情。这里发生了什么事？断点也不会被击中。就好像事件什么都不做。我确定这与页面生命周期的丑陋有关，但我无法在 Googleland 中找到解决方法。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T23:25:45.663

我终于在这里找到了解决方案：

[jQuery UI 对话框（模态），防止任何回发](https://stackoverflow.com/questions/13951338/jquery-ui-dialogmodal-prevents-any-postback)

只需在对话框声明之后添加这行神秘的代码：

```
$("#userCommentsPanel").parent().appendTo(jQuery("form:first")); 
```

...它只是工作。

# android - Android Webview 应用程序不会让视频播放器全屏显示

> ID：15796661
> 
> 赞同：23
> 
> 时间：2013-04-03T19:47:59.533
> 
> 标签：android, eclipse, webview, video-player

您好我为我的视频网站创建了一个 WebView 应用程序。该网站的设计是为移动用户加载的混合体。只有与移动设备兼容的视频才会加载到混合设备上。播放器来自 Vk、DailyMotion、YouTube 和 QuickTime。

视频只能在 SDK 11 及更高版本上播放，但是当我单击播放器按钮进入全屏模式时，它只会停止播放视频，而永远不会进入全屏模式。

(Webviewactivity.java)

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    getWindow().requestFeature(Window.FEATURE_PROGRESS);
    setContentView(R.layout.main);

    parentView = (RelativeLayout) findViewById(R.id.parent_rl);

    webviewProgress = (ProgressBar) findViewById(R.id.webview_progress);

    webview = (WebView) findViewById(R.id.webview);
    webview.getSettings().setJavaScriptEnabled(true);
    webview.getSettings().setBuiltInZoomControls(true);
    webview.getSettings().setAllowFileAccess(true);
    webview.setWebViewClient(new MyWebViewClient());
    webview.getSettings().setPluginState(WebSettings.PluginState.ON);
    webview.loadUrl(URL);
    webviewProgress.setProgress(0);

    webview.setWebChromeClient(new MyWebChromeClient());
    webview.setDownloadListener(new DownloadListener() {
        public void onDownloadStart(String url, String userAgent,
                String contentDisposition, String mimetype,
                long contentLength) {
            mProgressDialog = new ProgressDialog(WebViewActivity.this);
            mProgressDialog.setMessage("Downloading...");
            mProgressDialog.setIndeterminate(false);
            mProgressDialog.setMax(100);
            mProgressDialog
                    .setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
            DownloadFile downloadFile = new DownloadFile();
            downloadFile.execute(url);
        }
    });

    initSlider();

    initAdmob();
}

/**
 * When when file was chosen
 */
@Override
protected void onActivityResult(int requestCode, int resultCode,
        Intent intent) {
    if (requestCode == FILECHOOSER_RESULTCODE) {
        if (null == mUploadMessage)
            return;
        Uri result = intent == null || resultCode != RESULT_OK ? null
                : intent.getData();
        mUploadMessage.onReceiveValue(result);
        mUploadMessage = null; 
```

（主.xml）

```
android:id="@+id/parent_rl"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:keepScreenOn="true" >

<ProgressBar
    android:id="@+id/webview_progress"
    style="?android:attr/progressBarStyleHorizontal"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:maxHeight="5dip"
    android:minHeight="5dip"
    android:progressDrawable="@drawable/blueprogress" />

<FrameLayout
    android:id="@+id/framelayout"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/webview_progress"
    android:orientation="vertical" >

    <WebView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/webview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" /> 
```

（清单.xml）

```
package="com.wCHfree"
android:versionCode="7"
android:versionName="1.1" >

<uses-sdk
    android:minSdkVersion="11"
    android:targetSdkVersion="17" />

<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.INTERNET" />

<application
    android:icon="@drawable/ic_launcher_red"
    android:label="@string/app_name"
    android:theme="@android:style/Theme.Black" >
    <activity
        android:name="com.webview.splashScreen.SplashScreenActivity"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.webview.splashScreen.WebViewActivity"
        android:configChanges="orientation|screenSize|screenLayout"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
    </activity>
    <activity
        android:name="com.google.ads.AdActivity"
        android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize" /> 
```

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-04-24T18:35:08.023

您需要实现WebChromeClient 的`showCustomView`&`hideCustomView`方法，还需要`android:hardwareAccelerated="true"`在您的 AndroidManifest 文件中。我在这里发布我的示例项目。我所做的是在我的 main.xml 中保留一个 Framelayout(customContainer)，并在此处添加在 showCustomView 中收到的视图，并在 onHide 中将其删除。也相应地隐藏/显示 webview。下面的代码在设备上完美运行。

AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
          package="com.example.webview"
          android:versionCode="1"
          android:versionName="1.0">
    <uses-sdk android:minSdkVersion="8"/>
    <uses-permission android:name="android.permission.INTERNET"/>
    <application android:label="@string/app_name" android:icon="@drawable/ic_launcher"
            android:hardwareAccelerated="true">
        <activity android:name="MyActivity"
                  android:configChanges="orientation|keyboardHidden"
                  android:hardwareAccelerated="true"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN"/>
                <category android:name="android.intent.category.LAUNCHER"/>
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
        >
    <WebView
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:id="@+id/webView"
            android:layout_gravity="center"
            />
    <FrameLayout
            android:id="@+id/customViewContainer"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:visibility="gone"
            />
</LinearLayout> 
```

video_progress.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:id="@+id/progress_indicator"
              android:orientation="vertical"
              android:layout_centerInParent="true"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent">

    <ProgressBar android:id="@android:id/progress"
                 style="?android:attr/progressBarStyleLarge"
                 android:layout_gravity="center"
                 android:layout_width="wrap_content"
                 android:layout_height="wrap_content"/>

    <TextView android:paddingTop="5dip"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:layout_gravity="center"
              android:text="loading"
              android:textSize="14sp"
              android:textColor="?android:attr/textColorPrimary"/>
</LinearLayout> 
```

我的活动.java

```
package com.example.webview;

import android.app.Activity;
import android.graphics.Bitmap;
import android.os.Bundle;
import android.view.KeyEvent;
import android.view.LayoutInflater;
import android.view.View;
import android.webkit.WebChromeClient;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.widget.FrameLayout;

public class MyActivity extends Activity {
    private WebView webView;
    private FrameLayout customViewContainer;
    private WebChromeClient.CustomViewCallback customViewCallback;
    private View mCustomView;
    private myWebChromeClient mWebChromeClient;
    private myWebViewClient mWebViewClient;

    /**
     * Called when the activity is first created.
     */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        customViewContainer = (FrameLayout) findViewById(R.id.customViewContainer);
        webView = (WebView) findViewById(R.id.webView);

        mWebViewClient = new myWebViewClient();
        webView.setWebViewClient(mWebViewClient);

        mWebChromeClient = new myWebChromeClient();
        webView.setWebChromeClient(mWebChromeClient);
        webView.getSettings().setJavaScriptEnabled(true);
        webView.getSettings().setAppCacheEnabled(true);
        webView.getSettings().setBuiltInZoomControls(true);
        webView.getSettings().setSaveFormData(true);
        webView.loadUrl("http://m.youtube.com");
    }

    public boolean inCustomView() {
        return (mCustomView != null);
    }

    public void hideCustomView() {
        mWebChromeClient.onHideCustomView();
    }

    @Override
    protected void onPause() {
        super.onPause();    //To change body of overridden methods use File | Settings | File Templates.
        webView.onPause();
    }

    @Override
    protected void onResume() {
        super.onResume();    //To change body of overridden methods use File | Settings | File Templates.
        webView.onResume();
    }

    @Override
    protected void onStop() {
        super.onStop();    //To change body of overridden methods use File | Settings | File Templates.
        if (inCustomView()) {
            hideCustomView();
        }
    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_BACK) {

            if (inCustomView()) {
                hideCustomView();
                return true;
            }

            if ((mCustomView == null) && webView.canGoBack()) {
                webView.goBack();
                return true;
            }
        }
        return super.onKeyDown(keyCode, event);
    }

    class myWebChromeClient extends WebChromeClient {
        private Bitmap mDefaultVideoPoster;
        private View mVideoProgressView;

        @Override
        public void onShowCustomView(View view, int requestedOrientation, CustomViewCallback callback) {
           onShowCustomView(view, callback);    //To change body of overridden methods use File | Settings | File Templates.
        }

        @Override
        public void onShowCustomView(View view,CustomViewCallback callback) {

            // if a view already exists then immediately terminate the new one
            if (mCustomView != null) {
                callback.onCustomViewHidden();
                return;
            }
            mCustomView = view;
            webView.setVisibility(View.GONE);
            customViewContainer.setVisibility(View.VISIBLE);
            customViewContainer.addView(view);
            customViewCallback = callback;
        }

        @Override
        public View getVideoLoadingProgressView() {

            if (mVideoProgressView == null) {
                LayoutInflater inflater = LayoutInflater.from(MyActivity.this);
                mVideoProgressView = inflater.inflate(R.layout.video_progress, null);
            }
            return mVideoProgressView;
        }

        @Override
        public void onHideCustomView() {
            super.onHideCustomView();    //To change body of overridden methods use File | Settings | File Templates.
            if (mCustomView == null)
                return;

            webView.setVisibility(View.VISIBLE);
            customViewContainer.setVisibility(View.GONE);

            // Hide the custom view.
            mCustomView.setVisibility(View.GONE);

            // Remove the custom view from its container.
            customViewContainer.removeView(mCustomView);
            customViewCallback.onCustomViewHidden();

            mCustomView = null;
        }
    }

    class myWebViewClient extends WebViewClient {
        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            return super.shouldOverrideUrlLoading(view, url);    //To change body of overridden methods use File | Settings | File Templates.
        }
    }

} 
```

**[您可以从这里克隆示例项目..](https://github.com/akhgupta/WebviewVideo)**

# file - LISP：如何从文件中读取内容并将其写入另一个文件？

> ID：15796663
> 
> 赞同：3
> 
> 时间：2013-04-03T19:48:10.003
> 
> 标签：file, io, lisp

我想编写一个函数，该函数将两个文件的名称作为参数并将内容从第一个文件复制到第二个文件。

到目前为止，我编写了一个从文件读取的函数：

```
(defun readFile (name)
 (let ((in (open name)))
  (format t "~a~%" (read-line in))
   (close in))) 
```

还有一个将字符串写入文件的函数：

```
(defun writeFile (name content)
(with-open-file (stream name
    :direction :output
    :if-exists :overwrite
    :if-does-not-exist :create)
(format stream content))) 
```

按照 Savantes 的说明，我再次编写了该函数，它的外观是这样的：

```
(defun read-write-to-file (input-file output-file)
(WITH-OPEN-FILE (output-stream output-file
         :direction :output
         :if-exists :new-version
         :if-does-not-exist :create)
  (WITH-OPEN-FILE (input-stream input-file
                 :direction :input)
        (FORMAT output-stream "~a" (READ input-stream nil 'eof))
))) 
```

现在唯一的问题是它没有读取整个文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T13:41:21.863

Common Lisp 食谱实际上包含您问题的答案：

[http://cl-cookbook.sourceforge.net/io.html](http://cl-cookbook.sourceforge.net/io.html)

请参阅该页面底部的“批量 I/O”部分。

稍作修正和修改，代码将如下所示：

```
(defun my-copy-file (from-file to-file)
  (with-open-file (input-stream from-file
                :direction :input
                :element-type '(unsigned-byte 8))
    (with-open-file (output-stream to-file
                   :direction :output
                   :if-exists :supersede
                   :if-does-not-exist :create
                   :element-type '(unsigned-byte 8))
      (let ((buf (make-array 4096 :element-type (stream-element-type input-stream))))
    (loop for pos = (read-sequence buf input-stream)
       while (plusp pos)
       do (write-sequence buf output-stream :end pos)))))) 
```

这应该能够处理文本文件以及二进制文件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T20:42:53.617

你找到了`with-open-file`。将其用于输入和输出。不要使用`open`and`close`来代替。

打开这两个文件，然后从输入流到`write`输出`read-line`流。

顺便说一句，您`WRITEFILE`显然无法编译。

另外，请使用正确的名称和缩进。

*问题更新后编辑：*

`Read-line`读取一行。您可以使用 来编写它`write-line`，以便保留行尾。您需要在循环中执行此操作才能复制更多行。

提示：你应该在代码中用小写写你的名字。阅读器会自动将它们大写。我选择在`WRITEFILE`上面写，以显示您选择的名称在内部是如何处理的。大小写无关。 `L`并且`l`是相同的。在 Lisp 代码中，部分名称通常用连字符分隔。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-07-22T18:21:33.577

可能是一个更简洁的解决方案，至少与上述一样快，使用来自 ASDF （以及 Quicklisp）的优秀[UIOP包](https://github.com/fare/asdf/tree/master/uiop)[中的 copy-stream-to-stream ：](http://bimib.disco.unimib.it/people/Marco.Antoniotti/Projects/CL/HELAMBDAP/tests/asdf-uiop/docs/html/dictionary/Function-COPY-STREAM-TO-STREAM.html)

```
(require 'uiop)
(defun file-copy (source destination)
  (with-open-file (in source :direction :input)
    (with-open-file (out destination :direction :output)
      (uiop:copy-stream-to-stream in out)))) 
```

它应该与默认使用 WRITE-SEQUENCE 一样快（如果不是更快）。请参阅第一个链接以获取更多选项`copy-stream-to-stream`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-08-21T12:28:32.350

此函数将内容从第一个文件复制到第二个文件：

```
(defun my-function (first second)
  (cl-fad:copy-file first second)) 
```

（当然必须加载cl-fad包）

彼得

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-04T12:48:16.910

第一：不要为此目的使用“READ”，使用“READ-LINE”。'READ' 执行读取宏，这会打开一个安全漏洞。相反，您需要使用“WRITE-LINE”。

当您使用 'READ-LINE' 时，您应该会看到它确实做到了这一点：它只读取一行并返回该行，或者（在您的情况下）当没有行可读取时返回符号 'EOF'。它还会在下一个“EOL”之后推进您的读取指针（或类似的东西，我不太熟悉流的实现细节），因此当您在该流上执行下一个“READ-LINE”时，会读取下一行。您现在只需要反复读写，直到遇到文件末尾。

# javascript - 如果宽度 < x，则添加侦听器以删除滚动功能

> ID：15796667
> 
> 赞同：0
> 
> 时间：2013-04-03T19:48:16.607
> 
> 标签：javascript, jquery

我设置了这种 css 样式，以`#sidebox`在屏幕宽度小于 1024 像素时删除侧边栏行为。它也被替换到它的原始位置，在该位置它作为内容中的普通 div，因此：'位置：相对'。

```
@media screen and (max-width: 1024px) {
    #sidebox {
        position: relative;
        top: 0;
        right: 0;
    }
} 
```

下一步*（这是我需要帮助的）*是删除 JQuery 脚本，该脚本`#sidebox`在低于某个高度时会滚动到顶部，但在屏幕大于 1024 像素时仍让它以这种方式运行。

因此，当调整屏幕大小超过 1024 像素时，`#sidebox`应该滚动到顶部。这种行为被称为“跟随”。

下面是我为完成上述任务而设置的 JQuery 脚本：

```
if ($(window).width() > 1024) {
    $(window).scroll(function () {
        $("#sidebox").css("top", Math.max(0, 120 - $(this).scrollTop()));
    });
}

$(window).resize(function() {
    if ($(window).width() > 1024) {
        $("#sidebox").css("top", Math.max(0, 120 - $(this).scrollTop()));
    } else {
        $("#sidebox").css("top"), 0;
    }
}); 
```

那我怎么帮你问？好吧，正如您可能已经猜到的那样，这种行为是有缺陷的。
`#sidebox`*（在 css 中）* `<div id="sidebox">...</div>`*（在 html 中）*只有在刷新站点时才会表现得令人满意。

似乎它`$(window).resize`不能作为调整大小的侦听器。

因此，当我的窗口宽度为 1920px 并且我打开站点时，侧边栏将按需要运行，但是当我将窗口的宽度调整为低于 1024px 时，由于上面看到的 css，它会转到正确的位置，但仍然尝试滚动，因为`$(window).resize`没有按我希望的那样运行。

# javascript - EmberJS：渲染视图时的问题

> ID：15796669
> 
> 赞同：0
> 
> 时间：2013-04-03T19:48:28.677
> 
> 标签：javascript, ruby-on-rails-3, ember.js

我正在尝试实现一个非常单一的应用程序，但我遇到了一个（可能是愚蠢的）问题。

我有一个主页，其中包含指向专辑的链接，该链接呈现专辑的集合。

单击相册应显示该相册。

一切正常，除了当我点击专辑时没有任何反应。

我希望它会显示出来......

您可以在此处尝试实时示例：不再有效。

源代码在那里：不再有效。

谢谢，这可能很愚蠢，但我找不到为什么它不起作用！！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T19:57:10.253

我想，缺少一个出口。您的 AlbumResource 嵌套在 AlbumsRoute 中。因此 AlbumsRoute 的模板应该包含一个 {{outlet}}。**Outlets 是 Ember 注入 Views 的地方。默认情况下，Ember 会尝试在当前活动的模板（在您的情况下为专辑）中找到一个出口，并将尝试在那里注入 ChildView（在您的情况下为 AlbumView）。**

```
<h1>Posts</h1>
<ul>
{{#each album in controller}}
  <li>{{#linkTo 'album' album}}{{album.name}}{{/linkTo}}</li>
{{else}}
  <li>There are no albums.</li>
{{/each}}
</ul>
{{outlet}} 
```

**备注：**请注意，在 SO 问题中链接如此复杂的设置几乎没有用。它很难阅读，我很幸运找到了它（如果我有的话）。最好设置一个小提琴或至少将一个现场示例与未缩小的来源联系起来。

# sproutcore - sproutcore 和 sc-init 之间的区别

> ID：15796673
> 
> 赞同：1
> 
> 时间：2013-04-03T19:48:50.727
> 
> 标签：sproutcore

命令之间有什么区别：

`sproutcode gen app AppName`

和

```
sc-init AppName 
```

当我运行第一个时，我看到以下内容：

```
~ Created directory at apps
WARN 22:36:15.009 ~ For specific help on how to use this generator, type: sc-gen statechart_app --help 
FATAL 22:36:15.009 ~ Permission denied - /var/lib/gems/1.8/gems/sproutcore-1.9.1/lib/apps 
```

如果我使用第二个命令`sc-init`，它可以正常工作，并且应用程序是在我创建的文件夹中创建的。

为了使其`sproutcore`工作，我`sudo`在它前面添加，我以这种方式创建的应用程序存储在`/var/libs/gem`.

如何在`sproutcore`不使用命令的情况下使用命令`sudo`并将其指向我想要的文件夹中保存应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T13:50:24.593

我强烈建议您阅读[Sproutcore 构建工具指南](http://guides.sproutcore.com/build_tools.html)，以全面了解它们提供的功能以及每个命令的用途。

`sproutcore init`（或`sc-init`简称）旨在生成一个完整的 Sproutcore 项目，其中包含多个应用程序。而`sproutcore gen app AppName`旨在在现有项目中生成应用程序。

我认为你的问题`sproutcore gen`是你在项目之外运行它，所以它默认为基础项目目录，它恰好是 gem 的一部分，你无权访问（嗯......不使用 sudo 就是）。

我敢打赌，如果您使用`sc-init`创建项目，`cd`进入目录，然后运行`sproutcore gen app MyAwesomeApp`它，它将按您的预期工作。

但一定要查看我上面链接的指南，因为它将引导您完成整个过程。

# c# - 我可以使用私有方法吗？

> ID：15796674
> 
> 赞同：-4
> 
> 时间：2013-04-03T19:48:52.147
> 
> 标签：c#, wpf, awesomium

我正在使用 awesomium WebControl。

我想使用方法：`LoadURL(String)`。但这是一种私有方法。有没有可能使用私有方法的方法？

我的代码：

XAML：

```
<my:WindowsFormsHost Name="windowsFormsHost" Visibility="Hidden"/> 
```

[C#] 背后的代码

```
Awesomium.Windows.Forms.WebControl Browser2 = new Awesomium.Windows.Forms.WebControl();
        private void start_Click(object sender, RoutedEventArgs e)
    {

        windowsFormsHost.Child = Browser2;

        windowsFormsHost.Visibility = Visibility.Visible;
    } 
```

我想使用：

```
Browser2.LoadURL(String); 
```

方法在这里： [http ://awesomium.com/docs/1_6_3/sharp_api/?tc=163d5346-d13d-e0cf-49ba-72b2b04d7620](http://awesomium.com/docs/1_6_3/sharp_api/?tc=163d5346-d13d-e0cf-49ba-72b2b04d7620)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T19:50:29.357

你不能调用私有方法。

私有成员只能在类的主体或声明它们的结构中访问

# java - @SequenceGenerator with allocationSize>1 生成重复的主键

> ID：15796676
> 
> 赞同：5
> 
> 时间：2013-04-03T19:48:54.560
> 
> 标签：java, hibernate

我正在使用上面的代码来生成 id：

```
@Id
@GeneratedValue(generator = "seqq")
@SequenceGenerator(name = "seqq", sequenceName = "seqq", allocationSize = 20, initialValue = 1)
public long getId() {
    return id;
} 
```

我还更新了 persistence.xml：

```
 <property name="hibernate.id.new_generator_mappings" value="true"/> 
```

并更新数据库中的 ddl：

```
CREATE SEQUENCE seqq
  INCREMENT 20
  MINVALUE 1
  MAXVALUE 9223372036854775807
  START 9171
  CACHE 1; 
```

由于这个 allocationSize = 20 与增量值相同。但是，我得到任意错误，说重复键值违反了唯一约束“myobjects_pkey”。通常在第一次保存试用后会发生此错误。似乎休眠试图保持具有相同 ID 的实体。但是 START 确保该行高于 table id 中现有的任何行。如何消除重复约束错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-10T19:48:09.170

设置 hibernate.id.new_generator_mappings=true 后，Hibernate 将生成以 LASTPRODUCEDID-ALLOCATIONSIZE 开头的 id 值。我使用默认的 50 allocationSize 经历了以下情况：

使用新生成器之前：

```
 entity.id          SEQ last number
     48847                  48847
     48848                  48848
     48849                  48849
     48850                  48850 
```

使用新生成器后：

```
 entity.id          SEQ last number
     48801                  48851
     48802                  48852 
```

因此，您必须增加分配大小的序列。由于您的序列的 by 子句的增加应该等于 allocationSize，这意味着只需查询您的序列的 nextval。您可以使用以下脚本执行此操作：

```
 DECLARE
    v NUMBER;
  BEGIN
    FOR r IN (select sequence_name from user_sequences) LOOP
      EXECUTE IMMEDIATE 'SELECT '|| r.sequence_name ||' .NEXTVAL FROM DUAL' INTO v;
    END LOOP;
  END;
  / 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:03:40.510

尝试指定策略如下：

 `````
@GeneratedValue(strategy=GenerationType.SEQUENCE, generator = "seqq") 
````  `* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T11:23:28.477

尝试这个

```
 /** The identity. */
    @Id
    @Column(name = "id", unique = true, nullable = false)
    @SequenceGenerator(name = "ID_SEQU_GENERATOR", sequenceName = "DB_SEQ")
    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "ID_SEQU_GENERATOR")
    public long getId() {
       return id;
    } 
```

`DB_SEQ`这应该在`DB as sequence`.``

# sql-server - 按包含多个记录的其他表中的值更新表

> ID：15796678
> 
> 赞同：1
> 
> 时间：2013-04-03T19:48:56.987
> 
> 标签：sql-server

我已经看到几个类似的问题，其中包含在另一个表上按值更新表。

但是，如果 T2 拥有多个具有相同帮助的记录，并且也只更新 T1 中状态 = O 的记录？

```
T1
aid = 2345|Status = O
aid = 2120|Status = B

T2
aid = 2345|Status=B|Date=23/12/2002
aid = 2345|Status=F|Date=11/05/2002
aid = 2345|Status=G|Date=4/04/2002
aid = 2345|Status=R|Date=12/03/2002
aid = 2120|Status=G|Date=4/04/2012
aid = 2120|Status=R|Date=12/03/2005 
```

例子：

```
 UPDATE T1
    SET T1.Status = T2.Status
    Where T1.aid = (T2.aid of the record that holds newest date or max date)
    AND = T1.Status = 'O' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T19:55:23.453

那么，对于 SQL Server 2005+，您可以执行以下操作：

**更新**

```
;WITH CTE AS
(
    SELECT  *,
            RN = ROW_NUMBER() OVER(PARTITION BY aid ORDER BY [Date] DESC)
    FROM Table2
)
UPDATE T1
SET T1.Status = T2.Status
FROM Table1 T1
INNER JOIN CTE T2
    ON T1.aid = T2.aid
WHERE T2.RN = 1
AND T1.Status = 'O' -- for your "updated" question 
```

* * *

另一种方法是：

```
UPDATE  T1
SET     T1.Status = COALESCE(
          ( SELECT TOP (1) 
                     T2.Status
            FROM     T2
            WHERE    T2.aid = T1.aid
            ORDER BY [Date] DESC
          ), T1.Status)
FROM    T1
WHERE   T1.Status = 'O' ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T19:55:19.040

通常，您使用来自多个表的`JOIN`to `UPDATE`，然后您可以在其自身上使用 MAX 和 JOIN 表 2：

```
UPDATE a
SET a.Status = b.Status
FROM T1 a 
    JOIN T2 b ON a.aid = b.aid
    JOIN (
        SELECT aid, MAX(date) maxdate
        FROM T2
        GROUP BY aid
    ) c ON b.aid = c.aid AND b.date = c.maxdate 
```

# key - phpseclib sftp 使用私钥和密码连接

> ID：15796682
> 
> 赞同：3
> 
> 时间：2013-04-03T19:49:16.777
> 
> 标签：key, sftp, phpseclib

无论如何使用 phpseclib 或任何其他方法将 sftp 与私钥和 ftp 密码连接起来。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-03T19:52:21.253

SFTP 服务器同时使用密码和公钥身份验证的情况很少见。我的猜测是，您最有可能拥有的是受密码保护的私钥。如果是这样，您可以这样登录：

```
<?php
include('Net/SFTP.php');
include('Crypt/RSA.php');

$sftp = new Net_SFTP('www.domain.tld');
$key = new Crypt_RSA();
$key->setPassword('whatever');
$key->loadKey(file_get_contents('privatekey'));
if (!$sftp->login('username', $key)) {
    exit('Login Failed');
}

print_r($sftp->nlist());
?> 
```

如果确实您的服务器确实在执行以下两项操作，则应该可以：

```
<?php
include('Net/SFTP.php');
include('Crypt/RSA.php');

$sftp = new Net_SFTP('www.domain.tld');
$key = new Crypt_RSA();
$key->setPassword('whatever');
$key->loadKey(file_get_contents('privatekey'));
if (!$sftp->login('username', $key) && !$sftp->login('username', 'password')) {
    exit('Login Failed');
}

print_r($sftp->nlist());
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T19:13:32.267

我会说自己尝试密码验证。

这是根据日志发生的情况。

phpseclib 向服务器发送一个 SSH_MSG_SERVICE_REQUEST，实际上是在说“嘿-我想验证-可以吗？”

服务器以 SSH_MSG_SERVICE_ACCEPT 响应，实际上是在说“确定 - 将你得到的发送给我！”

然后 phpseclib 发送一个 SSH_MSG_USERAUTH_REQUEST 与对应于你的私钥的公钥，有效地说“好的 - 让我们用我的私钥进行身份验证 - 以确保你会接受它......这个公钥在你的白名单中吗？”

然后服务器以 NET_SSH2_MSG_USERAUTH_PK_OK 消息响应，有效地说，“是的 - 我们可以使用密钥 - 请现在用它签署服务器标识符”。

phpseclib 这样做，然后服务器就像“没关系！我只是记得 - 我做的唯一类型的身份验证是基于密码的身份验证！”

phpseclib 去“meh”大声笑，然后发送另一个 SSH_MSG_SERVICE_REQUEST，再次请求身份验证，服务器就像“什么！？你为什么要求身份验证！？”

似乎 phpseclib 可能不应该发送第二个 SSH_MSG_SERVICE_REQUEST 消息 - 它应该直接发送到 SSH_MSG_USERAUTH_REQUEST - 但可惜它目前没有这样做。我将尝试更新代码库来做到这一点，并将向作者提交拉取请求。

谢谢！

# tsql - 如何从一个表中获取一列并插入到另一个表中

> ID：15796684
> 
> 赞同：2
> 
> 时间：2013-04-03T19:49:21.523
> 
> 标签：tsql, sql-server-2012

例如，如果我有这些表：

*   表：tableA，列：（tableA_id，名称，...）
*   表：**tableB**，列：(tableB_id, *cost* , ...) [外键：tableA]
*   表：tableC，列：（tableC_id，名称，...）
*   表：tableD，列：(tableD_id, dates, ...) [外键： **tableB** & tableC]

如何将*成本*列从 tableB 获取到 tableD？或者您在将应用程序运行到网格中时实际上得到了*成本列？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:01:24.560

如果我理解你的问题..

答案1：

```
SELECT ghi.cost, xyz.* FROM [tableXYZ] xyz inner join [tableGHI] ghi on [tableXYZ].[tableXYZ] = [tableGHI].[tableXYZ_FK] 
```

和答案2：

更好的方法是创建与其他表 FK 不相等的新 PK。主键是表的句柄，您可以使用它来管理代码中的数据。

# ruby - 如何修改 RequestId 中间件或者 Heroku 为什么不使用标准的 HTTP_X_REQUEST_ID？

> ID：15796685
> 
> 赞同：4
> 
> 时间：2013-04-03T19:49:23.117
> 
> 标签：ruby, logging, heroku, ruby-on-rails-3.2

Heroku 推出了一项新的实验室功能，用于从其路由器[跟踪 http-request-id 。](https://devcenter.heroku.com/articles/http-request-id)

一个有用的背景知识：Rails 3.2 推出了一个带有 TaggedLogger 的功能，可以在日志中[包含一个唯一的请求 ID](https://stackoverflow.com/a/9380164/459863)，以便您可以跟踪给定日志行属于哪个 Web 请求。这在运行多个将日志流式传输到同一个日志存储的 Web 服务器时非常重要，例如在 Heroku 或 Unicorn 设置上的多个 dyno 中很常见，等等。

现在，借助 Heroku 的实验室功能，Heroku 路由器将生成此请求 ID，以便您可以在请求进入应用程序之前从路由器级别跟踪请求。这很重要，例如，如果请求未能完成，由于超时等。

不幸的是，Heroku 没有为此选择标准的请求标头键，`HTTP_X_REQUEST_ID`Rails 会接受并通过它，而是制作了一个自定义的键`HTTP_HEROKU_REQUEST_ID`，Rails 不会在没有修改的情况下通过。***Heroku，为什么这里偏离惯例？***

所以，我有两个选择：要么用`RequestId`使用 Heroku 标题键的复制和粘贴作业替换 Rails 默认中间件，要么修改 Rails 中间件。我不喜欢复制和粘贴工作，因为它们不干燥并且很容易过时，因此猴子补丁是更好的选择。怎么办呢？

我尝试添加一个文件`config/initializers/middleware.rb`：

```
module ActionDispatch
  class RequestId
    private
    def external_request_id(env)
      if request_id = env["HTTP_X_REQUEST_ID"].presence || env['HTTP_HEROKU_REQUEST_ID'].presence
        request_id.gsub(/[^\w\-]/, "").first(255)
      end
    end
  end
end 
```

但这不会被执行。我该如何修补这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-20T21:32:44.607

有一个解决方案！我刚刚将它添加到我的 production.rb 并且它有效！

```
 config.log_tags = [lambda {|req| req.env['HTTP_HEROKU_REQUEST_ID']}] 
```

归功于[https://stackoverflow.com/a/10712252/2422778](https://stackoverflow.com/a/10712252/2422778)和 Railscasts

**编辑**
只是想指出，截至 2014 年 1 月 17 日 Heroku 修复了请求 ID 标头名称，现在是

```
env['HTTP_X_REQUEST_ID'] 
```

见：[https ://devcenter.heroku.com/articles/http-request-id](https://devcenter.heroku.com/articles/http-request-id)

# php - TCPDF - Codeigniter - 无法加载 PDF 文档

> ID：15796695
> 
> 赞同：1
> 
> 时间：2013-04-03T19:49:51.047
> 
> 标签：php, codeigniter, pdf, tcpdf

控制器：

```
public function test(){
    $data = array();
    $this->load->library('tcpdf');
    $this->display_page($data);
} 
```

test.php：（没有全部发布，因为它有点长）

```
global $l;
$l = Array();
$l['a_meta_charset'] = 'UTF-8';
$l['a_meta_dir'] = 'ltr';
$l['a_meta_language'] = 'en';
$l['w_page'] = 'page';

// create new PDF document
$pdf = new TCPDF(PDF_PAGE_ORIENTATION, PDF_UNIT, PDF_PAGE_FORMAT, true, 'UTF-8',              false);

-- pdf stuff -- 

$pdf->Output('example_007.pdf', 'I'); 
```

在 Chrome 中，它只是显示“加载 PDF 文档失败。”。没有错误，控制台中没有任何内容。在 Firefox 中，它说：“文件不以 '%PDF-' 开头。Local\EWH`_'s3-0y”。

Local\ 末尾的字符串在每次加载时随机出现。

我曾尝试使用输出缓冲和刷新，但无济于事。我很茫然。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-12-07T09:53:13.427

**`exit;`**输出pdf后尝试放。我希望它能像对我一样解决这个问题。

-- pdf 的东西 --

```
$pdf->Output('example_007.pdf', 'I');
exit; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-14T22:52:16.900

尝试这个

```
ob_clean();
ob_flush();
$pdf->Output('example_007.pdf', 'I');
ob_end_flush();
ob_end_clean(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-21T08:28:47.507

杜尼亚德是正确的。当我在 Chrome 的调试工具中查看网络响应​​时，我看到“%PDF-”魔法出现在第二行而不是第一行。我在所需的包含文件中发现了一些空格，在分隔符之前和之后输出到 pdf 文件之前的浏览器。在 php 分隔符解决问题之前和之后消除这个空格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-20T11:49:30.190

如果您使用 YII FRAMEWORK，请确保您 renderPartial 而不是在控制器中渲染视图

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T19:55:01.280

在生成发票之前，您可能正在向浏览器输出一些内容。转到页面的源并查看是否有任何内容，包括空格（新行或空格）并将其删除。

# automated-tests - 在 Microsoft 测试管理器上分发测试

> ID：15796700
> 
> 赞同：2
> 
> 时间：2013-04-03T19:50:00.920
> 
> 标签：automated-tests, microsoft-test-manager

我已经使用 Microsoft 测试管理器很长时间了。我已经为 SCVMM 实验室配置了 3 台用于运行测试的 Web 客户端机器。

一切正常，除了 1 个问题：我有近 350 个测试。当我运行全部甚至一小部分时，它们被划分在 3 台 Web 客户端机器上。但有些测试比其他测试需要更多时间。正因为如此，一些机器快速完成工作，但其他机器继续执行更多测试。

这就是我的意思：

*   我进行了 300 次测试，由 3 台机器执行
*   每台机器都要执行 100 个测试
*   机器 1 和 2 快速完成工作
*   机器 3 执行 80 次测试并继续进行直到完成。

我的问题是：有什么方法可以优化这个，所以当其他机器还在工作时，没有机器会空闲？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T01:46:16.110

我建议考虑更改`BucketSize`您的测试设置。不幸的是，我不认为这是标准支持的，您必须使用可以在[此处](http://blogs.msdn.com/b/aseemb/archive/2010/08/11/how-to-run-automated-tests-on-different-machines-in-parallel.aspx)找到和解释的实用程序。如果您将存储桶大小减少到 25 左右，那么当较快的机器完成其当前存储桶时，测试控制器将分配一个新存储桶，而较慢的机器仍在其当前存储桶上工作。
我认为这应该对您有用，尽管该实用程序不受支持，并且我以前没有自己尝试过 bucketsize。

# wcf - 发送加密数据 wcf - windows phone

> ID：15796703
> 
> 赞同：0
> 
> 时间：2013-04-03T19:50:06.137
> 
> 标签：wcf, windows-phone-7

我正在使用 WCF 服务与 DB 进行通信。我的 WP7.5 应用程序通过 WCF 将数据发送到 DB。我用的是basichttpbinding，因为WP只支持这个。我想以加密形式发送数据。我知道，https 用于这些目的。这是我的 web.config：

```
<system.serviceModel>
<behaviors>
  <serviceBehaviors>
    <behavior name="serviceBehavior">
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug httpHelpPageEnabled="true" includeExceptionDetailInFaults="true" />
    </behavior>
  </serviceBehaviors>
</behaviors>
<bindings>
  <basicHttpBinding>
      <binding name="baseBinding" >
      </binding>
  </basicHttpBinding>
</bindings>
<services>
  <service behaviorConfiguration="serviceBehavior" name="TestWCF.WcfNotificationService.WcfNotificationService">
    <endpoint address="base" binding="basicHttpBinding" bindingConfiguration="baseBinding"
      contract="TestWCF.WcfNotificationService.IWcfNotificationService" />
    <host>
      <timeouts openTimeout="00:05:00" />
    </host>
  </service>
</services> 
```

我用谷歌搜索，发现我必须将 securityMode 设置为传输，但是当我尝试在我的 WP 应用程序中更新服务引用时，它给了我一个例外。你能帮我吗，如何实现这一点，数据将被加密？非常感谢！

**编辑**

这是错误：

> 找不到与具有绑定 BasicHttpBinding 的端点的 https 方案匹配的基地址。注册的基地址方案是 [http]。

当我在客户端更新服务参考时，我得到了这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T22:22:42.367

看来您的配置有问题。BasicHttpBinding 需要配置为支持 https。例如看这里：[http ://blog.adnanmasood.com/2008/07/16/https-with-basichttpbinding-note-to-self/](http://blog.adnanmasood.com/2008/07/16/https-with-basichttpbinding-note-to-self/)

正如那里指出的那样，您需要更改：

```
<basicHttpBinding>
      <binding name="baseBinding" >
      </binding>
 </basicHttpBinding> 
```

至

```
<basicHttpBinding>
      <binding name="baseBinding" >
          <security mode="Transport">
              <transport clientCredentialType="None"/>
           </security>
      </binding>
 </basicHttpBinding> 
```

此外，改变

```
<serviceMetadata httpGetEnabled="true"/> 
```

至

```
<serviceMetadata httpsGetEnabled="true"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:21:46.900

如果您在 IIS 中托管 WCF 服务，请确保您已使用 SSL 证书配置了 https 绑定。看看[这个](http://msdn.microsoft.com/en-us/library/hh556232.aspx)看看如何配置它。如果您是自托管服务，请确保添加如下基地址：

```
 <host>
          <baseAddresses>
            <add baseAddress="https://[machineName]/Service.svc"/>
          </baseAddresses>
        </host> 
```

# jquery-ui - 如何防止 JQgrid 的搜索过滤器在 jqueryUI 对话框后面打开？

> ID：15796711
> 
> 赞同：1
> 
> 时间：2013-04-03T19:50:31.783
> 
> 标签：jquery-ui, search, jqgrid, dialog

下面的代码在 JqueryUI 对话框中使用 JQgrid。当第一次按下“查找记录”按钮时，过滤器表格在网格前面显示得很好。关闭过滤器，很好。打开过滤器，很好，关闭它。

但是第三次​​按下 Find Records 按钮，过滤器窗体出现在对话框窗体的后面。关于原因/解决方案的任何想法 - 以便过滤器表单始终出现在网格和对话框的前面？谢谢...

* * *

```
<!doctype html>
<html lang="en">
<head>  
<meta charset="utf-8">  
<title>tabs demo</title>  

<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css">  
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>  
<script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>

<!-- <script src="js/jquery-1.9.0.min.js" type="text/javascript"></script> -->
<script src="js/i18n/grid.locale-en.js" type="text/javascript"></script>
<script src="js/jquery.jqGrid.min.js" type="text/javascript"></script>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>My First Grid</title>

<link rel="stylesheet" type="text/css" media="screen" href="css/ui-lightness/jquery-ui.css" />
<link rel="stylesheet" type="text/css" media="screen" href="css/ui.jqgrid.css" />

</head>

<body> 
<button id="opener">open the dialog</button>
<div id="dialog" title="My Test">
    <table id="MyGrid"></table>
    <div id="MyGridDiv" MyGrid>
    </div>
</div>       

<script>
$( "#dialog" ).dialog({ autoOpen: false});
$( "#opener" ).click(function() {  
$( "#dialog" ).dialog( "open" );});
</script>

<script>
jQuery("#MyGrid").jqGrid({
datatype: "local",
height: 250,
colNames:['Inv No','Date', 'Client', 'Amount','Tax','Total','Notes'],
colModel:[
{name:'id',index:'id', width:60, sorttype:"int"},
{name:'invdate',index:'invdate', width:90, sorttype:"date"},
{name:'name',index:'name', width:100},
{name:'amount',index:'amount', width:80, align:"right",sorttype:"float"},
{name:'tax',index:'tax', width:80, align:"right",sorttype:"float"},     
{name:'total',index:'total', width:80,align:"right",sorttype:"float"},      
{name:'note',index:'note', width:150, sortable:false}       
],
multiselect: true,
pager: '#MyGridDiv',  <!-- required for search dialog -->
caption: "Test"
});
var mydata = [
{id:"1",invdate:"2007-10-                01",name:"test",note:"note",amount:"200.00",tax:"10.00",total:"210.00"},
{id:"2",invdate:"2007-10-02",name:"test2",note:"note2",amount:"300.00",tax:"20.00",total:"320.00"},
{id:"3",invdate:"2007-09-01",name:"test3",note:"note3",amount:"400.00",tax:"30.00",total:"430.00"},
{id:"4",invdate:"2007-10-04",name:"test",note:"note",amount:"200.00",tax:"10.00",total:"210.00"},
{id:"5",invdate:"2007-10-05",name:"test2",note:"note2",amount:"300.00",tax:"20.00",total:"320.00"},
{id:"6",invdate:"2007-09-06",name:"test3",note:"note3",amount:"400.00",tax:"30.00",total:"430.00"},
{id:"7",invdate:"2007-10-04",name:"test",note:"note",amount:"200.00",tax:"10.00",total:"210.00"},
{id:"8",invdate:"2007-10-03",name:"test2",note:"note2",amount:"300.00",tax:"20.00",total:"320.00"},
{id:"9",invdate:"2007-09-01",name:"test3",note:"note3",amount:"400.00",tax:"30.00",total:"430.00"}
];
for(var i=0;i<=mydata.length;i++)
jQuery("#MyGrid").jqGrid('addRowData',i+1,mydata[i]);

<!-- Search options-->              
jQuery("#MyGrid").jqGrid('navGrid','#MyGridDiv',
{
del:false,add:false,edit:false},{},{},{},{multipleSearch:true}
);

</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T03:19:58.423

我也有类似的情况，并通过在 jquery 对话框属性中添加 modal:true 来修复。

更改您的代码

```
$( "#dialog" ).dialog({ autoOpen: false}); 
```

至

```
$( "#dialog" ).dialog({ autoOpen: false,modal:true}); 
```

请记住，如果 modal 设置为 true，则对话框将具有模态行为；页面上的其他项目将被禁用，即无法交互。模态对话框在对话框下方但在其他页面元素上方创建覆盖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-27T05:13:38.080

在某些情况下，您希望将 modals 选项设置为 true 的所有内容。

我的解决方案是创建一个额外的 jquery UI 对话框，用于搜索并删除 jqGrid 提供的默认搜索。这应该与后面的任何 jqueryui 对话框完美配合，因为弹出窗口使用 JqueryUI 本身，不管“modal”选项是真还是假。

```
$("#myGrid").jqGrid().navgrid("#myGridPager", {
   search:false
}).navButtonAdd("#myGridPager", {
   caption:""
   , buttonicon:"ui-icon-search"
   , onClickButton: function(){
      $("#myGridSearchDialog").dialog("open");
   }
}); 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T14:48:23.947

但是如果对话框不需要是模态的呢？有什么方法可以改变搜索表单的 z-index 吗？

# vb.net - VB.NET：在选择每一行时存储 ListView 数据

> ID：15796717
> 
> 赞同：0
> 
> 时间：2013-04-03T19:50:49.140
> 
> 标签：vb.net, listview

我有一个列表视图，它的第一列是类 ID。

在 ListView1_SelectedIndexChanged 上，即选择每一行时，我希望变量 ClassID 存储 Class ID 的值。

我必须使用什么代码？

我试过 ClassID = ListView1.Items.subitems(0).text，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:34:51.510

您很接近，但您忘记指定要访问的行。

```
ClassID = ListView1.Items.subitems(0).text 
```

应该

```
ClassID = ListView1.selectedItems(0).subitems(0).text 
```

请注意，这假设您一次只允许它选择一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T07:10:57.417

我找到了答案。它应该是

```
ClassID = ListView1.Items(ListView1.FocusedItem.Index).SubItems(0).Text 
```

# powershell - 管道输出从一个程序到另一个程序

> ID：15796718
> 
> 赞同：2
> 
> 时间：2013-04-03T19:50:51.517
> 
> 标签：powershell, pipe, exe

在 powershell 中，我试图将一个 exe 的输出通过管道传输到另一个。我可以在命令提示符下执行此操作，但似乎无法使其在 powershell 中运行。在命令提示符下，我这样做...

```
Program1.exe -param "myParameter" | Program2.exe myOtherParameter 
```

有谁知道如何在PowerShell中做到这一点？我试过了....

```
set-alias Program1 "C:\....Program1.exe"
set-alias Program2 "C:\....Program2.exe"
........
Program1 -param $something | Program2 $somethingElse
Program1 -param $something > Program2 $somethingElse
Program1 -param $something | out-file Program2 $somethingElse 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T20:01:05.270

这是一个已知问题。您可能想[在 Connect 网站上对该问题进行投票](https://connect.microsoft.com/PowerShell/feedback/details/691490/pipe-operator-corrupts-raw-binary-data)。这里发布了一个解决方法：[http ://www.powershellcookbook.com/recipe/WCiL/capture-and-redirect-binary-process-output](http://www.powershellcookbook.com/recipe/WCiL/capture-and-redirect-binary-process-output)

但是那个网站似乎暂时关闭了。

# apache-pig - Pig：强制每个输入文件使用一个映射器

> ID：15796719
> 
> 赞同：0
> 
> 时间：2013-04-03T19:50:52.547
> 
> 标签：apache-pig, input-split

跟进[Pig：强制 UDF 在 Reducer 中发生或设置映射器数量](https://stackoverflow.com/questions/15735696/pig-force-udf-to-occur-in-reducer-or-set-number-of-mappers)。我有一个 UDF，它在我的猪工作流程中作为地图步骤运行。它需要一个 X 文件列表，每个从前一步保存的 reducer 1 个。我希望有 X 映射器（每个输入文件 1 个）来运行这个 UDF，因为它非常耗时，所以 Pig 没有像我想要的那样并行运行它。基于[Hadoop 流式传输：每个地图的单个文件或多个文件。不要拆分](https://stackoverflow.com/questions/14027594/hadoop-streaming-single-file-or-multi-file-per-map-dont-split)我认为解决方案是防止拆分，所以我做了一个猪 Load Func 之类的。

```
public class ForceMapperPerInputFile extends PigStorage {
    @Override
    public InputFormat getInputFormat() {
        return new MapperPerFileInputFormat();
    }
}
class MapperPerFileInputFormat extends PigTextInputFormat {
    @Override
    protected boolean isSplitable(JobContext context, Path file) {
       return false;
    }
} 
```

当我使用它时，它的效果与我想要的完全相反，映射器任务的数量减少了近一半。

我如何才能真正强制每个输入文件只有一个映射器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:08:41.203

`SET pig.noSplitCombination true;`

（或`-Dpig.noSplitCombination=true`作为运行脚本时的命令行选项之一）

# c# - 从aspx sqldatasource获取返回值

> ID：15796721
> 
> 赞同：1
> 
> 时间：2013-04-03T19:51:06.577
> 
> 标签：c#, asp.net, sqldatasource

我已经通过aspx中的代码前面使用了插入命令，输出参数为：

```
asp:Parameter Name="ReturnCustomerID" Type="String" Direction="Output" 
```

在代码隐藏（C#）中，`OnInserted="SqlDS_CustomerDetails_OnInserted"`我有：

```
protected void SqlDS_CustomerDetails_OnInserted(object sender, SqlDataSourceStatusEventArgs e)
{
    String newCustomerID;
    newCustomerID = e.Command.Parameters["@ReturnCustomerID"].Value.ToString();
} 
```

但由于某种原因，我的返回值一直为空......我尝试直接在 SQL 服务器中执行存储过程，它很好并且返回了正确的 ID，但不是在 c# 或 ASPX 中。

有没有办法直接将输出参数“评估”到代码前面的标签文本？IE

```
asp:Label ID="NewCustomerID" runat="server" Text='<%# Eval("ReturnCustomerID") %>'> 
```

我只需要将 ID 绑定到该标签的任何方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-13T17:59:18.667

我看到您已将 ReturnCustomerID 参数类型设置为字符串。从存储过程返回字符串作为返回参数时，必须在调用存储过程之前将该参数设置为非空值 - 即使它是仅输出参数。所以你需要让你的参数有一个InputOutput的方向：

```
<asp:Parameter Name="ReturnCustomerID" Type="String" Direction="InputOutput"> 
```

在 SqlDataSource.Inserting 事件中，您需要设置一个默认值：

```
e.Command.Parameters("@ReturnCustomerID").Value = "XXXXXXXXX" 
```

请参阅此链接[http://social.msdn.microsoft.com/Forums/en-SG/sqlintegrationservices/thread/6c95fa58-ad54-4626-96f5-339495c1715f](http://social.msdn.microsoft.com/Forums/en-SG/sqlintegrationservices/thread/6c95fa58-ad54-4626-96f5-339495c1715f)

并向下滚动到 Paul Smith 的帖子。

# python - Python/Django：我必须遵循哪些步骤才能使用 {{ next }} 正确重定向用户？

> ID：15796726
> 
> 赞同：1
> 
> 时间：2013-04-03T19:51:17.140
> 
> 标签：python, django, redirect, django-authentication, next

几个小时以来，我一直在试图弄清楚但没有结果。`{{ next }}`变量对我不起作用（我的意思是它是空的），但是以这种方式工作`{{ request.REQUEST.next|urlencode }}`。但是，不会使用 GET 或 POST 将我重定向到下一个位置。Django 可以自动执行此操作，还是我必须在每个视图中手动编写代码？

我正在使用 DJango 1.3。

这是我的一段代码：

**设置.py**

```
MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
)

TEMPLATE_CONTEXT_PROCESSORS = (
    'django.core.context_processors.debug',
    'django.core.context_processors.i18n',
    'django.core.context_processors.media',
    'django.core.context_processors.static',
    'django.contrib.auth.context_processors.auth',
    'django.contrib.messages.context_processors.messages',
    'django.core.context_processors.request',
)
LOGIN_URL = '/' 
```

**登录表单**

```
{% load url from future %}

<form action="{% url 'user:login' %}" method="post">
        {{ form.username }}<br />
        {{ form.password }}<br />
        <input type="hidden" name="next" value="{{ request.REQUEST.next|urlencode }}" />
        {% csrf_token %}
    <button id="submit" class="btn btn-primary" type="submit">Login</button>
</form> 
```

**登录视图**

```
from django.shortcuts import render, redirect
from django.contrib import auth
from .forms import LoginForm
from django.views.decorators.csrf import csrf_exempt

@csrf_exempt
def login(request):
    if request.method == 'POST':
        form = LoginForm(request.POST)
        if form.is_valid():
            user = auth.authenticate(
                    username=form.cleaned_data["username"],
                    password=form.cleaned_data["password"]
                    )
            auth.login(request, user)

            #I added this piece of code in order to achieve the redirection
            #but i preffer a lot if Django could do it for me.
            next = request.POST.get('next', None)
            if next:
                return redirect(next)
        else:
            errors = form.errors.items()
            return render(request, 'base/homepage.html', {'form':form, 'errors':errors} )

    return redirect('base:homepage') 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T21:28:45.493

您不能从模板重定向。您必须从处理`'user:login'`.

为此，请使用django中的[重定向快捷方式：](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#redirect)

```
from django.shortcuts import redirect
   def your_user_login_view(request):
       #handle the form
       #if everything is all right:
       return redirect(request.GET.get('next')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T02:19:44.657

您必须在登录视图中添加条件

```
{% load url from future %}

<form action="{% url 'user:login' %}" method="post">
        {{ form.username }}<br />
        {{ form.password }}<br />
        <input type="hidden" name="next" value="{{ request.GET.next }}" />
        {% csrf_token %}
    <button id="submit" class="btn btn-primary" type="submit">Login</button>
</form>

def login(request):
    if request.POST:
        user = authenticate(username=request.POST['username'],
                            password=request.POST['password'])
        if user is not None:
            if user.is_active:
                login(request, user)
                if request.POST['next']:
                    return HttpResponseRedirect(request.POST['next'])
                else:
                    return HttpResponseRedirect(reverse('app_name:home'))

    return render(request, 'login.html') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T21:53:47.470

假设您使用的是“django.contrib.auth.views.login”。

这用于覆盖登录重定向位置，默认情况下，当您登录时，您将被重定向到 LOGIN_REDIRECT_URL 设置中的任何内容（默认为“/accounts/profile/”）。

如果您在登录表单中添加一个名为“next”（默认）的（隐藏）字段，则该字段的值将成为新的重定向位置，并且在表单验证成功后您将被重定向到那里。

在表单中有一个固定的“下一个”值可能很有用，但通常常见的用例是向登录 url 添加一个 GET 参数，如下所示：[http ://example.com/my/login/url/?next= /loggedin/](http://example.com/my/login/url/?next=/loggedin/)并将其用作下一个字段值的值，允许您指定不同的下一个 URL（例如将用户重定向到他之前的位置），这应该在模板中作为 {{ next }} 可用，如果那是空白的，您可能没有下一个 GET 参数（URL 中没有 ?next=/next/url/）。

如果提交后您被重定向到同一个表单页面，那么您可能遇到表单验证错误，请尝试在模板中的某处添加 {{ form.errors }} 来检查这一点，也许是 csrf 检查失败？

您可以在此处查看此视图​​：[https ://github.com/django/django/blob/master/django/contrib/auth/views.py#L28-63](https://github.com/django/django/blob/master/django/contrib/auth/views.py#L28-63)

# android - 使用 Egit 和 Android 或 AppEngine 项目处理不同团队成员环境的最佳方式

> ID：15796728
> 
> 赞同：0
> 
> 时间：2013-04-03T19:51:20.903
> 
> 标签：android, google-app-engine, egit

如果 Eclipse Android 或 AppEngine 项目中的每个团队成员都有不同的计算环境，例如 SDK、Java 等的不同路径，那么设置 EGit 和 Git 存储库的最佳方法是什么，以便推/拉'不要用他们的特定路径覆盖他们的特定项目属性和/或设置？

我最好的猜测是，这些特定于每个计算环境的与路径/目录相关的项目设置位于文件中，例如

```
.classpath  
.project
project.properties 
```

并且这些应该在 Egit 中“假设不变”。

还有其他文件吗？有没有更好的方法来避免用 Eclipse 或 Egit 覆盖这些类型的设置/属性？

谢谢。

# c# - 与 COM 参考（版本 1.0 类型库）和 VS 2010 相关的构建警告

> ID：15796731
> 
> 赞同：5
> 
> 时间：2013-04-03T19:51:27.390
> 
> 标签：c#, ole

我刚刚完成了从 Visual Studio 2008 到 Visual Studio 2010 的一系列 C# 项目的重组和升级。此外，所有项目都更改为针对 .NET 4.0 运行时。一切都成功构建，但是，我现在收到一堆与我的应用程序所依赖的 COM 引用相关的警告。警告之一如下。每次构建解决方案时，我都会收到近 100 个类似于以下警告的警告。

```
Warning 60  Type library importer encountered a property getter 'ClearTopCardQue' on type 'FuelDirectOLETLB.FuelDirectOLE' without a valid return type.  The importer will attempt to import this property as a method instead. c:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets  1558    9   FDServer 
```

我已致电编写我引用的对象的第 3 方供应商，但无济于事。他们建议我确保我的目标是 x86。他们还说我应该能够针对任何版本的 .NET 运行时构建我的项目。就个人而言，我怀疑这与我在 Visual Studio 2010 / .NET Runtime 4.0 中引用版本 1 类型库这一事实有关，而在我在 VS 2008 / .NET Runtime 3.5 上构建之前。我已尝试针对所有构建配置（即 x86、x64、任何 Cpu）进行构建，并尝试将运行时的每个版本恢复为 2.0。这些警告与我有关，因为我不确定它们表示什么。有人可以提出任何建议/建议来帮助我找到这些警告的原因吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-03T21:27:03.490

这是一个善意的警告，无需担心。他们只是没有正确地为组件编写 IDL。COM 中的属性 getter 是方法，就像它们在 .NET 中一样。该方法必须具有正确的签名和属性才能被视为可以直接转换为 .NET 属性的有效属性。

这有时会搞砸。一个很好的例子是 Windows Media Player。从临时目录中的 Visual Studio 命令提示符运行此命令：

```
 Tlbimp.exe c:\windows\system32\wmp.dll 
```

你会看到：

> TlbImp：警告 TI0000：类型库导入器在类型“WMPLib.IWMPNowPlayingHelperDispatch”上遇到属性获取器“sessionPlaylistCount”，但没有有效的返回类型。导入器将尝试将此属性作为方法导入。
> 导入到 WMPLib.dll 的类型库

下一个类型：

```
 Oleview.exe c:\windows\system32\wmp.dll 
```

它将类型库反编译回 IDL。在右窗格中选择文本并将其复制/粘贴到文本编辑器中。找到“sessionPlaylistCount”，你会看到：

```
[id(0x00000ba3), propget]
HRESULT sessionPlaylistCount([out] long* pVal); 
```

当您将它与其他属性进行比较时，您会发现错误，他们忘记了 [retval] 属性。

这不是问题，因为 Tlbimp.exe 只会使其成为方法而不是属性。你会写信`get_sessionPlaylistCount(out count)`使用损坏的属性。这是不方便的，因为语法很笨拙，但在其他方面不是问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-07T15:39:11.563

## 如何删除警告信息（wmp.dll）？

老问题，但问题仍然存在：

即使可以忽略警告消息，但将其放在错误列表中也很烦人。什么有助于消除`x86`和`x64`;的警告？

我添加了对不同版本的 Windows Media Player 的引用，并且对于这两种 CPU 架构都没有更多警告或错误。

这在`Windows 10`; 不能确定其他环境。

对代码进行了轻微修改以适应“新”参考。如果您不需要专门带来警告的构建，您可以尝试一下。请参考附件图片，**`Build 12.0.10011.x`**为我工作。

[![构建 12.0.14393.x](https://i.stack.imgur.com/rWVsq.png)](https://i.stack.imgur.com/rWVsq.png)

[![构建 12.0.10011.x](https://i.stack.imgur.com/eFBID.png)](https://i.stack.imgur.com/eFBID.png)

# sql - 公用表表达式的用途是什么？

> ID：15796733
> 
> 赞同：2
> 
> 时间：2013-04-03T19:51:32.207
> 
> 标签：sql, ansi-sql

```
WITH Extracted_Sessions ( a,b ) AS 
(
   select a,b from db.tblnm
) 
```

这个 SQL 是做什么的？有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T20:17:30.100

这称为“公用表表达式”。如果我没记错的话，SQL 99 中已经引入了一个 SQL 特性。

它与派生表非常相似。你的例子相当于

```
select a,b
from (
  select a,b from db.tblnm
) as Extracted_Sessions 
```

主要区别在于您可以在查询中多次使用 CTE，而对于派生表，您需要每次都重复基础查询，例如：

```
WITH Extracted_Sessions ( a,b ) AS 
(
   select a,b from db.tblnm
)
select *
from Extracted_Sessions e1
  join Extracted_Sessions e2 on e1.a = e.2b 
```

（注意这可能没有意义，只是为了证明您可以多次访问 CTE）。

Postgres 手册有一个很好的 CTE 教程：[http ://www.postgresql.org/docs/current/static/queries-with.html](http://www.postgresql.org/docs/current/static/queries-with.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T19:56:48.233

猜测这是一个通用表表达式：它是一个很像临时表的结构：

将名称`Extracted_Sessions`与列一起使用`a`并`b`代替查询`select a, b from db.tblnm`......做一些事情，`Extracted_Sessions`就好像它是真实的一样。

常用于构建递归查询。

# python - Python实例引用访问方法

> ID：15796734
> 
> 赞同：0
> 
> 时间：2013-04-03T19:51:32.643
> 
> 标签：python, instance, pass-by-reference

我是编程新手，所以如果这很明显，请多多包涵。

我在同一个 *.py 文件中有两个类。片段如下。我正在尝试与客户一起模拟电梯，并且在主程序中我将创建 n 个客户。我希望电梯类中名为 startLift 的方法能够访问客户的各个实例，但我不确定如何执行此操作，所以如果我循环访问我的客户，在每次迭代时调用 startLift，我该怎么做所以它引用了这个实例。

先感谢您。

电梯类：

```
def __init__(self):

    self.stops = building.getFloors(redbrick)

    if self.stops <1:
        print "elevator out of bounds"
    else:
        print "elevator has ",building.getFloors(redbrick),"stops" 
```

我试着改写这个问题：

self.stops = building.getFloors(redbrick)

我在电梯类中调用了 building 方法，因此建筑物将有关它可以行驶多少层的信息传递给电梯类。

"redbrick" 是 buliding 类的一个实例，为了让它工作 "building.getfloors() ，我必须传递一个 builiding 的实例，否则我会得到

“必须使用构建实例作为第一个参数调用未绑定的方法 getFloors()（什么都没有）”

但是如果我创建它，我如何将建筑物的多个实例传递到“building.getfloors()”中

白砖=建筑（）

红砖=建筑（）

黄砖=建筑（）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T23:21:13.803

我将通过不实际回答此答案中的问题来打破 SO 的基本规则，但是评论太长了。

部分问题似乎是对类和实例如何与 python 一起工作或在一般编程中的误解（这没有错，我们都在某个时候学习）。结果，您的问题是有效的，但提出的很尴尬，所以让我们退后一步。

您当前的电梯**init** () 方法并没有真正像描述的那样工作。为了进入大楼，你必须把它交给电梯的**init** ()。例如，您的 Building 和 Elevator 类（我用大写表示它是一个类，而不是该类的实例），可能如下所示：

```
class Building:
    def __init__(self, floors=1, color=None):
        self.floors = floors
        self.color = color

    def getFloors(self):
        return self.floors

class Elevator:
    def __init__(self, building):
        self.stops = building.getFloors()
        self.current_floor = 1 
```

然后，在您的主程序中，您将拥有如下内容：

```
redbrick = Building(floors=4, color='red')
redbrick_elevator = Elevator(redbrick) 
```

注意我的大写约定—— building 是电梯的**init** () 方法的参数，并且是类 Building 的实例。当我调用 getFloors() 方法时，它是在实例而不是类上调用的，并且实例 redbrick 作为 self 自动传递给 getFloors()。

现在，您的旧（预编辑）客户类很好（但我会称之为客户）。但是调用电梯的方法不会起作用，因为客户没有被传递进来。所以，例如，你可能有这样的事情：

```
class Elevator:
    def __init__(self, building):
        self.stops = building.getFloors()
        self.current_floor = 1
        self.customer_list = []
        self.stop_list = []

    def getCurrentFloor(self):
        return self.current_floor

    def callElevator(self, floor):
        self.stop_list.append(floor)

    def getOn(self, customer):
        self.customer_list.append(customer)
        self.stop_list.append(customer.getEndFloor())

    def letOff(self):
        for customer in self.customer_list[:]:
            if self.current_floor == customer.getEndFloor():
                self.customer_list.remove(customer)

... 
```

希望这足以让您入门，既有关于类和实例如何在 python 中工作的一些想法，也有一种存储不同类实例之间关系的简单方法。

# c# - 在更高级别成功捕获异常后执行后续命令

> ID：15796736
> 
> 赞同：0
> 
> 时间：2013-04-03T19:51:39.627
> 
> 标签：c#, exception-handling

对于我正在开发的一个应用程序，我的一个队友一直在开发一个通用错误处理程序，当我们的一个系统进入异常状态时，它会向我们的团队执行一些报告，处于相对较高的水平。

然而，几周前，我写了一些低级别的代码（特别是数据库访问），提供了一些通知。随着这个团队成员的高级代码的出现，团队的其他成员觉得我们可以安全地删除我的 try/catch 系统。

一个问题：`IsSuccessful`从这个特定的存储库方法返回的数据结构上有一个标志。发生异常时，该标志保持为假（成功获取数据时，该标志设置为真。）

因此，目前，我的代码如下所示：

```
public FooResult Foo()
{
  FooResult result = new FooResult { IsSuccessful = false };
  SqlParameter[] args = new []
  {
    // Some args, immaterial to the situation.
  }

  try
  {
    DataSet ds = SqlHelper.ExecuteDataset(_connection, CommandType.Text, query, args);
    result = new FooResult
             {
               IsSuccessful = true,
               // ...Other fields are set...
             };
  }
  catch
  {
    result.IsSuccessful = false;
    throw;   // Per request
  }

  return result;
} 
```

这导致了我的**问题**：在抛出异常并在更高级别处理时，之后会发生什么？我的代码会冒泡回到它停止的地方，还是在其他地方恢复执行？当出现问题并在不同级别进行清理时，代码将继续运行在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:55:05.593

抛出异常会强制 a `stack unwinding`，这意味着，当前的执行堆栈将被放弃，最终你会在有 a 的地方结束`catch()`。
这意味着，如果您`exception`在调用方法中捕获 an，您将最终进入 ist `catch()`-handler，并且您将不会返回到被调用者中发生异常的位置。因此，如果您有退货声明，则永远无法实现！

[这](http://www.dotnetspark.com/kb/2346-call-stack-call-site-and-stack-unwinding.aspx)是一篇很好的短文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T19:56:07.847

如果您在其中抛出异常，`FooResult`您在其中创建的对象将永远不会被返回。`Foo()`

异常会破坏代码的正常控制流并冒泡，直到有人捕捉到异常或程序完全停止。

更高级别可能会捕获异常并重试，但这不在您的方法的控制范围内。

# extjs4 - 网格中每个组的按钮

> ID：15796743
> 
> 赞同：1
> 
> 时间：2013-04-03T19:52:04.977
> 
> 标签：extjs4

我试图弄清楚是否可以在我的网格中为每个组设置一个按钮。下面是一个屏幕截图，显示了我希望按钮的位置。基本上我只需要每组一个按钮。

[http://dl.dropbox.com/u/36721131/screenshot.png](http://dl.dropbox.com/u/36721131/screenshot.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:57:08.247

也许修改组标题可能对您有用。阅读 [Ext.grid.feature.Grouping.groupHeaderTpl](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.feature.Grouping-cfg-groupHeaderTpl)

# html - 背景图像未拉伸以覆盖平板电脑高度

> ID：15796748
> 
> 赞同：0
> 
> 时间：2013-04-03T19:52:17.977
> 
> 标签：html, css

我的网站有足够大的背景图片，但是当我使用我的表格看到它时，图片并没有覆盖整个屏幕。您可以在底部看到灰色背景（我假设由浏览器生成）。另外，如果我在我的页面上展开文章，高度会增加，但图像不会到达中心

这是我正在测试的网站：[http ://www3.carleton.ca/clubs/sissa/html5/](http://www3.carleton.ca/clubs/sissa/html5/)

CSS：

```
body{
    width: 100%; /*always specify this when using flexBox*/ 
    height:100%;
    display: -webkit-box;
    display: -moz-box;
    display: box;
    text-align:center;
    -webkit-box-pack:center; /*way of centering the website*/
    -moz-box-pack:center;
    box-pack:center;
    background:url('images/bg/bg14.jpg') no-repeat center center fixed;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    background-size: cover;
    font-family: Arial, Helvetica, sans-serif;
    font-size: 13px;
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/l1ym5.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T20:56:59.640

我通过将规则更改为解决了这个`-webkit-background-size: cover`问题`-webkit-background-size: cover !important`

到目前为止似乎有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:07:45.890

我在使用百分比时取得了更大的成功`background-size`。

```
element {
  background:url(xyz.jpg) no-repeat center center;
  background-size:100% 100%;
  /* OR */
  background-size:100% auto;
  /* OR */
  background-size:auto 100%;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-31T16:36:18.023

我通过在 HTML 上放置高度和宽度找到了解决方案。其他解决方案不会让背景填满我的 Nexus 10 的屏幕。

```
html { 
    background: url(backgroundImg.jpg) no-repeat center center fixed; 
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
    height: 100%;
    width: 100%;
} 
```

如果我在 iPad 上遇到问题，那么我会尝试在 !important 中添加回来。只是想看看我能不能没有。

# c++ - 带有函数的 C++ 自定义链表

> ID：15796754
> 
> 赞同：-1
> 
> 时间：2013-04-03T19:52:39.263
> 
> 标签：c++, function, pointers, linked-list

我实现了一个简单的链表。看哪！

```
struct List{
    List *next;
    bool last;
    string data;
};

List *head; 
```

但是，当我尝试使用函数构建它，然后遍历它时，程序崩溃并出现错误 0x00005（这是内存错误，对吗？）。在构建函数中，一切似乎都很好，但否则会引发错误。这是我列出的功能：

```
void mkList(List *ptr, int num){
    if(num != 0){
        ptr = new List;
        ptr->data = "asd";

        if(num == 1)ptr->last = true;
            else ptr->last = false;

        mkList(ptr->next,num-1);
    }
} 
```

我试图遍历列表的方法主要是：

```
int main(){
    mkList(head,5);

    List *ptr = head;

    while(!ptr->last){
        cout << ptr->data <<endl;
        ptr = ptr->next;
    }
    return 0;
} 
```

在第二个元素之前一切似乎都很好，我什至可以计算出第一个元素的数据！我做错什么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:01:27.103

在这一行

```
mkList(ptr->next,num-1); 
```

您正在传递一个悬空指针。它只是指向任何地方。您实际上需要传递指针的地址，如

```
mkList(&ptr->next,num-1); 
```

并将您的功能重新定义为

```
void mkList(List **ptr, int num); 
```

但这很疯狂，可以更容易地完成......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:01:47.213

您的程序崩溃的原因是在这段代码中：

```
ptr = new List;
ptr->data = "asd";
...
mkList(ptr->next,num-1); // <-- ptr->next is uninitialized ! 
```

`ptr->next`您使用产生***未定义行为***的未初始化变量。可能的解决方案可能是为您定义一个默认构造函数`struct`：

```
struct List{
    List() : next(NULL) { }
    List *next;
    string data;
}; 
```

其中此链表中的最后一个元素是`next`设置为 的元素`NULL`。您不需要额外的数据成员来标记最后一个元素（您不需要`bool last`）。

这将解决未定义的行为，但要真正使您的程序按预期工作，您需要更改 的原型`void mkList(List *ptr, int num)`以将`ptr`用作指向 的指针`List`，以便对指针本身所做的更改对调用者可见：

```
void mkList(List** ptr, int num) {
    if (num <= 0)
        return;

    *ptr = new List();
    (*ptr)->data = "asd";
    mkList(&(*ptr)->next, num-1);
} 
```

从以下位置调用`main`：

```
mkList(&head, 5); 
```

虽然递归不是这里最幸运的选择。***保持简单***是一个好习惯，如果为了可读性，不要害怕编写更多代码行：

```
void mkList(List** ptr, int num)
{
    List* lastNode = NULL;
    for (int i = 0; i < num; ++i)
    {
        // create new node:
        List* node = new List();
        node->data = "asd";

        // store the pointer to the head:
        if (i == 0) *ptr = node;

        // move to the next element:
        if (lastNode) lastNode->next = node;
        lastNode = node;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T20:09:18.853

我认为您需要重新访问指针的概念。您需要了解指针是保存*另一个变量**的*内存地址的变量。

 *如果你有这样的代码：

```
void foo(int a){
 a = 5;
}

// ...

int b = 0;
foo(b) 
```

你不希望 b 在最后一行之后变成 5，是吗？与指针相同。

```
void foo(List *a){
 a = new List;
}

// ...

List *b;
foo(b); 
```

不会以任何方式影响 b。现在，如果你想从另一个函数中设置 b 的值，你可以传递一个*指向*b 的指针（记住，指针是一个变量，所以有一个指向指针的指针是完全可以的）：

```
void foo(List **a){
 a = new List;
}

// ...

List *b;
foo(&b);
// now b will point to the newly allocated memory 
```

一旦你理解了这一点，你就很容易修复这个代码。*

# python - 没有 oauth2 库的 Tumblr xAuth

> ID：15796755
> 
> 赞同：0
> 
> 时间：2013-04-03T19:52:42.030
> 
> 标签：python, oauth, oauth-2.0, tumblr, maya

我正在为 Autodesk Maya 开发一个插件。应用程序的 Python 库与普通 Python 库不在同一位置（Maya 使用 Python 2.6.4）。基本上，3D 艺术家既不愿意也不能将 oath2 安装到他们机器上的正确位置。我同样可能不知道为他们做这件事的方法。

最终，我希望能够让 3D 艺术家下载一个简单的 python 文件，运行它，登录并单击一个按钮，上传他们正在处理的内容的更新。我已经得到了一个电子邮件版本的工作 - smpt 几乎没有那么多的箍要跳过（这不一定是一件好事）。

有什么方法可以提供 oauth2 模块的功能而无需进行一些复杂的安装？您知道无需通过安装过程即可捆绑 oauth2 模块的任何方法吗？到目前为止，我的 google-fu 在这些方面都让我失望了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:48:10.917

修改[ez_setup.py](http://peak.telecommunity.com/dist/ez_setup.py)（另见[这篇文章](https://stackoverflow.com/questions/12966147/how-can-i-install-python-modules-programmatically-through-a-python-script/13016849#13016849)），包括长线间隙的所有内容。

然后放：

```
use_setuptools()

from setuptools.command import easy_install
easy_install.main( ["oauth2"] )
from pkg_resources import require
require('oauth2') 
```

在此之后添加您需要的任何内容。可能出现的问题：

*   用户可能需要成为管理员（这可以被规避，但如果艺术家没有管理员，那么无论如何安装东西都不是他们的事）
*   单击不可能的用户必须使用 **脚本编辑器在 Maya 中实际运行脚本 -> 加载脚本**
*   安装程序可能更容易
*   我实际上没有时间来测试这个

**PS：**并非所有玛雅人都运行 python 2.6.4

# c - EOF 练习 1-6 K&R C 编程语言

> ID：15796758
> 
> 赞同：3
> 
> 时间：2013-04-03T19:52:46.787
> 
> 标签：c, eof, getchar, kernighan-and-ritchie

这直接取自 K&R 书：

> 的优先级`!=`高于 的`=`，这意味着在没有括号的情况下，关系测试`!=`将在赋值之前完成`=`。所以声明
> 
> ```
> c = getchar() != EOF 
> ```
> 
> 相当于
> 
> ```
> c = (getchar() != EOF) 
> ```
> 
> 这具有将 c 设置为 0 或 1 的不良影响，具体取决于 getchar 的调用是否返回文件结尾。（在第 2 章中有更多内容。）
> 
> **练习 1-6。**验证表达式`getchar() != EOF`是 0 还是 1。

我无法理解如何做这个练习以及理解被引用的段落是怎么回事。

我知道 EOF 是 int 类型的符号常量，通常保持值 -1。由于负值 int 在进行比较时永远不能保持与 char 相同的值，因此需要将其提升为 int ，然后以某种方式发出文件结束的信号。

我也知道没有上面指定的括号，比较`!=`是在分配之前完成的，但这实际上是什么意思？该功能发生了什么？我还打印了 EOF 的值，它是 -1 当它说验证它是 0 还是 1 时，这个练习意味着什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T20:01:23.707

它是这么说的：

`c = (getchar() != EOF)`

表示从 中读取一个字符`stdin`，然后将其与 EOF 进行比较。如果为真，则结果为 1，如果为假，则为 0。然后将该结果分配给`c`。读取的字符丢失了，因此产生了“不良影响”。

它希望您自己以这种方式运行它，以查看如何通过发送 EOF 与任何其他字符来生成 0 和 1。

# jquery - 通过ajax发送变量

> ID：15796759
> 
> 赞同：0
> 
> 时间：2013-04-03T19:52:49.867
> 
> 标签：jquery, ajax

我已经发送表单字段的值是使用 val() 发送的。我想通过 ajax 发送普通的 php 变量，这是 id 值

```
 var dminute= $("#dminute").val();

var dataString = 'dminute='+ dminute + '&dhour=' + dhour + '&minuteid1=' + minuteid1+ '&hourid1=' + hourid1+ '&datepicker=' + datepicker; 
```

对于 php 变量，我应该如何发送？

```
 var dminute=$dminute; 
```

语法错误..如果有人愿意，请告诉如何发送..在此先感谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:54:04.227

您可以使用 php 标签。如果您的代码不在单独的 .js 文件中

尝试这个

```
var dminute= <?php echo $dminute ?>; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T19:55:56.583

如果要将 php 变量分配给 javascript var，

```
var dminute= <?php echo $dminute;?>; 
```

# c# - 将 DateFormatString 更改为显示 11:59:59 而不是 12:00:00

> ID：15796761
> 
> 赞同：1
> 
> 时间：2013-04-03T19:52:53.287
> 
> 标签：c#, asp.net, .net, oracle

这是一个非常简单的问题，虽然我不知道如何最好地解决它。我必须2个字段：

```
<asp:BoundField DataField="AUCTIONBEGINS" HeaderText="Auction Begins" DataFormatString="{0:d}" HtmlEncode="False" >
<asp:BoundField DataField="AUCTIONENDS" HeaderText="Auction Ends" DataFormatString="{0:d}" HtmlEncode="False" > 
```

我的问题是您分配给这两个字段的值被写入 Oracle 数据库，但我希望它们以下列方式写入：
对于 AUCTIONBEGINS ---> 1/1/2013 12:00:00 AM 对于 AUCTIONENDS - --> 2013 年 1 月 10 日晚上 11:59:59

有没有一种简单的方法可以将它硬编码到 DataFormatString 中？或者我应该在写入数据库之前在服务器端执行此操作吗？

编辑*对不起，不太清楚。两个字段最后都以 12:00:00 AM 时间戳保存，我想在 AUCTIONENDS DataField 上隐式添加 11:59:59 PM

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T20:06:15.067

如果你想要的是晚上 11:59:59，我通常会做类似的事情

```
 EndDate.AddDays(1).AddSeconds(-1); 
```

这将为您提供日期当天的最后一秒。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-10-19T12:41:28.560

如果您想要的是晚上 11:59:59，那么对我来说，现在的最佳做法是使用：

```
EndDate.Add(DateTime.MaxValue.TimeOfDay) 
```

代替：

```
EndDate.AddDays(1).AddSeconds(-1) 
```

[![在此处输入图像描述](https://i.stack.imgur.com/z07YW.png)](https://i.stack.imgur.com/z07YW.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T20:06:49.953

您可以简单地将 -1 秒添加到日期：

```
auctionEnd = auctionEnd.AddSeconds(-1); 
```

例如，这会将 1/10/2013 12:00:00 AM 转换为 1/9/2013 11:59:59 PM。

# jquery - 如何隐藏在 Meteor 中加载页面后添加的所有文档？

> ID：15796771
> 
> 赞同：-1
> 
> 时间：2013-04-03T19:53:16.867
> 
> 标签：jquery, meteor

**谢谢大家，我已经使用 Akshat 的解决方案迭代解决了这个问题，特别感谢 Akshat 如何帮助我解决了除此之外的另一个问题 - 快速、准确和出色的问题解决！**

好的，所以我正在尝试在流星中创建一个帖子系统，我希望流星不显示新帖子，只计算它们并让用户决定何时显示它们。在此先感谢，丹尼尔。

（喜欢 twitter 的 x 新推文）

编辑：大家好，到目前为止，感谢您的所有回答。问题是，这可能是一个非常具体的案例，因为我也在实现无限滚动，所以让它无反应不会有帮助。

代码：

```
var Posts = new Meteor.Collection("posts");
if (Meteor.isClient) {
  Session.set("current_page",1);
Template.posts.posts= function() {
        return Posts.find({}, {limit: Session.get("current_page")*20,sort: {created_at:-1}});
    };

function getDocHeight() {
    var D = document;
    return Math.max(
        Math.max(D.body.scrollHeight, D.documentElement.scrollHeight),
        Math.max(D.body.offsetHeight, D.documentElement.offsetHeight),
        Math.max(D.body.clientHeight, D.documentElement.clientHeight)
    );
}
$(window).scroll(function() {   
   if($(window).scrollTop() + $(window).height() > getDocHeight() - 100) {
       Session.set("current_page",Session.get("current_page")+1);
   }
});
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:00:32.643

您可以使用块助手`#constant`将区域标记为常量。它将在第一次创建模板时加载，然后才加载。

[查看 Meteor 文档](http://docs.meteor.com/#constant)

示例：page.js

```
Template.page.collection = function() {
     return MyCollection.find({});
} 
```

示例：page.html

```
<template name="page">
    {{#consant}}
         {{#each collection}}
              {{this}}
         {{/each}}
     {{/constant}}
 </template> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T20:17:16.193

很多好答案！另一种方法是对您希望它以这种方式运行的帖子使用非反应性查询。新结果基本上是[反应性](http://docs.meteor.com/#reactivity)的结果，您可以在查询中[禁用反应性](http://docs.meteor.com/#find)

例如

```
MyCollection.find({}, {reactive:false}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T20:02:58.370

使用 Collection.find().count() 方法

[http://docs.meteor.com/#count](http://docs.meteor.com/#count)

# delphi - 获取计算机名称并在 delphi 中使用 showmessage 显示它

> ID：15796774
> 
> 赞同：-1
> 
> 时间：2013-04-03T19:53:26.350
> 
> 标签：delphi, delphi-7

我使用此代码

如何让它作为消息出现在我的屏幕上？

```
Function GetUserFromWindows:String;    
Var    
  UserName : string;   
  UserNameLen : Dword;    
Begin    
  UserNameLen := 255;  
  SetLength(userName, UserNameLen) ;   
  If GetUserName(PChar(UserName), UserNameLen) Then     
    Result := Copy(UserName,1,UserNameLen - 1)       
  Else     
    Result := 'Unknown';      
End; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-03T19:59:45.173

您的功能是错误的，首先是：

```
function GetUserFromWindows: string;
var
  iLen: Cardinal;
begin
  iLen := 256;         // UNLEN constant in LMCons.h says 256 - hard coded.
  Result := StringOfChar(#0, iLen);
  GetUserName(PChar(Result), iLen);
  SetLength(Result, iLen);
end; 
```

如果你真的想要*计算机名称*，正如你的问题标题所说，它并没有太大的不同：

```
function GetComputerNameFromWindows: string;
var
  iLen: Cardinal;
begin
  iLen := MAX_COMPUTERNAME_LENGTH + 1;         // From Windows.pas
  Result := StringOfChar(#0, iLen);
  GetComputerName(PChar(Result), iLen);
  SetLength(Result, iLen);
end; 
```

现在你可以在任何你喜欢的地方使用它们中的任何一个：

```
procedure TForm1.Button1Click(Sender: TObject);
begin
  ShowMessage(GetUserFromWindows);
  ShowMessage(GetComputerNameFromWindows);
end; 
```

或者：

```
procedure TForm1.FormCreate(Sender: TObject);
begin
  Label1.Caption := GetUserFromWindows;
  Label2.Caption := GetComputerNameFromWindows;
end; 
```

# android - 无法获取 URL http://dl-ssl.google.com/android/eclipse/addon.xm

> ID：15796780
> 
> 赞同：1
> 
> 时间：2013-04-03T19:53:34.460
> 
> 标签：android, sdk

我尝试在 Windows 7 中为 Android 运行 sdk 32 BIT，但收到错误消息无法获取 URL [http://dl-ssl.google.com/android/eclipse/addon.xm](http://dl-ssl.google.com/android/eclipse/addon.xm) **原因：未知主机 dl-ssl.google。 com** 获取 URL 失败[http://dl-ssl.google.com/android/eclipse/addon.xml](http://dl-ssl.google.com/android/eclipse/addon.xml) **原因：未知主机 dl-ssl.google.com**

我阅读了一些网页，解释说我需要更新 HTTP prxoy 服务器，我尝试了几个选项，但没有奏效。

我需要在 IE9 中做任何更改吗？

HTTP 代理服务器应该是什么？

你知道我该如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:27:12.333

我以前也有同样的问题。您可以下载所需组件的 zip 文件并在 Eclipse 中手动安装它们。按照这个链接 - [https://developer.android.com/sdk/installing/installing-adt.html#Troubleshooting](https://developer.android.com/sdk/installing/installing-adt.html#Troubleshooting)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-09T19:00:17.353

我知道这适用于 Android Studio 而不是 Eclipse，但如果有人偶然发现它：

在尝试了我在 Internet 上找到的所有内容后，我得到了 Android Studio 安装的解决方案。如果您使用的是 Android Studio 并收到此错误：

找到`[Path_to_Android_SDK]\sdk\tools\android.bat`。就我而言，它位于`C:\Users\Nathan\AppData\Local\Android\android-studio\sdk\tools\android.bat`.

右键单击它，点击`Edit`，然后一直向下滚动到底部。

找到它说的地方：`call %java_exe% %REMOTE_DEBUG% ...`

将其替换为`call %java_exe% -Djava.net.preferIPv4Stack=true %REMOTE_DEBUG% ...`

重新启动 Android Studio/SDK，一切正常。这为我解决了许多问题，包括无法获取 XML 文件或创建新项目。

# java - 比较两个 ArrayList - 一个作为另一个的子集

> ID：15796781
> 
> 赞同：4
> 
> 时间：2013-04-03T19:53:42.477
> 
> 标签：java, arraylist, compare, subset

我知道我们可以`containsAll`在比较两者时使用该方法`ArrayLists`来检查一个是否是另一个的子集。但这就是我想要的。考虑一个

`ArrayList super = 1,2,3,4,5,6,7,8,9,10`

和

`ArrayList sub1 = 1,2,3,4`

和另一个

`ArrayList sub2 = 2,4,6,8`.

现在，如果我这样做了

`super.containsAll(sub1)`，它将评估为，`true`因为`sub1`包含在 中`super`。

如果我这样做了`super.containsAll(sub2)`，它也会评估为，`true`因为数字 2、4、6 和 8 包含在`super`.

我想知道是否有办法检查两个`ArrayLists`以便`super.containsAll(sub2)`评估为`false`中的数字`sub2`不会以相同的顺序出现在`super`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T20:03:00.450

我相信你可以用它`Collections.indexOfSublist`来做到这一点。更多信息在这里：[http ://docs.oracle.com/javase/6/docs/api/java/util/Collections.html](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T19:58:42.170

我想你必须自己实现它。你应该遍历 super 和 if `super(i).equals(sub2(0))`，检查接下来的项目是否与 sub2 的相同。

# perl - 用于配置 grep 输出的 Perl 脚本

> ID：15796783
> 
> 赞同：3
> 
> 时间：2013-04-03T19:53:46.623
> 
> 标签：perl, bash, grep

我有一个用以下列格式分隔的日志文件：

```
<date>  <time> | <fruit> | <color> | <num_1> | <num_2> | <num_3> 
```

例如：

```
2013-03-27  23:01:52 | apple | green | 55 | 120 | 29
2013-03-27  23:01:56 | plumb | purple | 28 | 1 | 394
2013-03-27  23:01:59 | apple | red | 553 | 21 | 7822 
```

我想编写一个 perl 脚本（尽管 python 或 bash 也是可以接受的），`greps`该脚本在`<date>`and`<time>`字段（第 1 列）和或`<num_1>`，取决于您给脚本的输入。因此，在上述信息上运行会给你，并且：`<num_2>``<num_3>``perl extract.pl 2``<date>``<time>``<num_2>`

```
2013-03-27  23:01:52 | 120
2013-03-27  23:01:56 | 1
2013-03-27  23:01:59 | 21 
```

我尝试了以下方法，但似乎不起作用：

```
#!/usr/bin/perl

use warnings;
use strict;

my $col = $1;

print `grep "myapplog.txt" "m/_(\d{4})(\d\d)(\d\d)/ | $col"` 
```

在这里，我将`col`var 设置为脚本的第一个 arg，然后尝试打印与第一列和需求`<num_X>`列的日期时间匹配的 grep。有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T20:00:36.110

尝试在 awk 模式下使用 perl

```
$ perl -F'\|' -lane 'print $F[0]," | ", $F[4]' input
2013-03-27  23:01:52  |  120 
2013-03-27  23:01:56  |  1 
2013-03-27  23:01:59  |  21 
```

纯awk：

```
awk -F"|" '{print $1, "|", $5}' input 
```

纯重击：

```
#!/bin/bash

IFS="|"

while read -a ARRAY;
do
    echo ${ARRAY[0]} "|" ${ARRAY[4]}
done < input 
```

**更新**

例如，将参数传递给 awk 解决方案以确定要打印的女巫列，使用：

```
$ awk -vcol="5" -F"|" '{print $1, "|", $col}' input 
```

在 bash 中，函数/脚本的第一个参数位于其中，`$1`因此将其用作 ARRAY 的索引。

使用 python 比单线更正式的东西：

```
#!/usr/bin/env python

import sys

col = raw_input('which column to print? -> ')
try:
    col = int(col)
except ValueError:
    print >> sys.stderr, "That was no integer"

with open("input") as fd:
    for line in fd:
        tmp = line.strip().split('|')
        print tmp[0], "|", tmp[col] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T20:12:23.233

尝试这样做

使用您希望的第一个参数（使用`@ARGV`数组，而不是`$1`in `perl`）：

```
#!/usr/bin/perl

use warnings; use strict;
use autodie; # No need to check open() errors

$\ = "\n";   # output record separator (no need \n)

# file-handle
open my $fh, "<", "myapplog.txt";

chomp(my $col = $ARGV[0]);

die("Not an integer !\n") unless $col =~ /^\d+$/;

# using the famous and magical <diamond> operator:
while (<$fh>) {
    chomp;
    my @F = split /\|/; # splitting current line in @F array
    print join("|", @F[0,$col+2]); # join on a array slice
}

close $fh; 
```

# r - 将文件加载到 R 中

> ID：15796791
> 
> 赞同：2
> 
> 时间：2013-04-03T19:54:22.270
> 
> 标签：r

我第一次使用 R 我试图保存数据并再次加载它，我使用这个

```
> a <- 1:10
> save(a, file = "desktop/Data.Rdata")
> rm(a)
> load("desktop/Data.Rdata") 
```

警告：

```
 cannot open compressed file 'desktop/Data.Rdata', probable reason 'No such file or directory' 
```

请帮帮我。

工作的人

```
> a <- 1:10
> getwd()
[1] "C:/Users/saramachandran/Documents"
> save(a,file="Documents/sai.R")
Error in gzfile(file, "wb") : cannot open the connection
In addition: Warning message:
In gzfile(file, "wb") :
  cannot open compressed file 'Documents/sai.R', probable reason 'No such file or directory'
> save(a,file="/Documents/sai.R")
Error in gzfile(file, "wb") : cannot open the connection
In addition: Warning message:
In gzfile(file, "wb") :
  cannot open compressed file '/Documents/sai.R', probable reason 'No such file or directory'
> save(a,file="C:/Users/saramachandran/Documents/sai.R")
> rm(a)
> load("C:/Users/saramachandran/Documents/sai.R")
> print(a)
 [1]  1  2  3  4  5  6  7  8  9 10
> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T19:59:09.473

尝试使用：

```
a <- 1:10
save(a, file = path.expand("~/desktop/Data.Rdata"))
rm(a)
load(path.expand("~/desktop/Data.Rdata")) 
```

**编辑：**

您发布了以下内容...

```
> a <- 1:10
> getwd()
[1] "C:/Users/saramachandran/Documents"
> save(a,file="Documents/sai.R")
Error in gzfile(file, "wb") : cannot open the connection
In addition: Warning message:
In gzfile(file, "wb") :
  cannot open compressed file 'Documents/sai.R', probable reason 'No such file or directory'
> save(a,file="/Documents/sai.R") 
```

问题是工作目录已经在 Documents 中。所以你试图保存到：

```
 C:/Users/saramachandran/Documents/Documents 
```

这不存在。

改用它（或明确说明您发现的路径）：

```
a <- 1:10
save(a, file = "Data.Rdata")
rm(a)
load("Data.Rdata") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-09T12:31:31.177

我有几次同样的错误。我通过将我的项目设置*为工作目录*来解决它。单击您的项目 - 更多 - 下拉菜单并选择“设置为工作目录”。希望这有帮助，祝你好运。

# python - 如何测试一个列表的两个元素，如果它们相等，将一个列表的元素放入一个新列表

> ID：15796792
> 
> 赞同：0
> 
> 时间：2013-04-03T19:54:23.213
> 
> 标签：python

我有 3 个列表：

```
neighbour = []
scanned = [[],[]]   
localisation = [[],[],[]] 
```

我想测试扫描列表的第 0 个子列表（列）中的每个项目，看看它是否等同于邻居列表中的任何项目。

如果它是等效的，我想将扫描的两个子列表附加到本地化的第一个和第二个子列表。

我相信这个测试将检查扫描的第 0 个子列表中的项目是否与邻居子列表中的任何项目匹配：

```
for i in scanned[0]:
    for j in neighbour:
        if i == j: 
```

但我不确定如何将已扫描的两个子列表附加到本地化的第一个和第二个子列表中。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T19:57:40.387

好吧，我可能会以不同的方式构建您的列表，但我会在一分钟内完成。

要做你想做的事，你需要以更老派的方式进行迭代：

```
neighbour = ['a', 'b', 'c']
scanned = [['a', 'b'],[1, 2]]   
localisation = [[],[],[]] 

for i in range(len(scanned[0])):
    if scanned[0][i] in neighbour:
        localisation[1].append(scanned[0][i])
        localisation[2].append(scanned[1][i])
print localisation
>>> [[], ['a', 'b'], [1, 2]] 
```

这是假设我（最终）正确理解了您想要的内容。然而，看起来`scanned`实际上是两个列表，其中一个列表中的每个元素都以某种方式与另一个列表中的相同索引元素相关。改用 a 可能会让你的生活变得更轻松`dict`：

```
# The keys from the dict are from scanned[0]; the values are from scanned[1]
scanned = {'a':1, 'b':2} 
```

现在与这些列表有关的所有事情都变得更加容易（包括您必须对它们做的任何其他事情），因为您不必单独跟踪您的索引：

```
neighbour = ['a', 'b', 'c']
scanned = {'a':1, 'b':2}
localisation = [[], [], []] 

for s in scanned:
    if s in neighbour:
        localisation[1].append(s)
        localisation[2].append(scanned[s])

print localisation
>>> [[], ['a', 'b'], [1, 2]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T20:00:18.827

您的问题与 NLP [Stemming](http://en.wikipedia.org/wiki/Stemming)有关吗？如果是这样，请查看 Python [NLTK](http://nltk.org/)。

要为 中的每个子列表生成匹配元素列表`scanned`：

```
for l in scanned:
    localisation.append(set(l).intersection(neighbour)) 
```

你的定义有点混乱，我不确定我是否理解你想要的。假设`len(scanned[0]) == len(scanned[1])`：

```
matches = set(neighbour).intersection(scanned[0])
for match in matches:
    i = scanned.index(match)
    localisation.append((match, scanned[0][i], scanned[1][i])) 
```

在这种情况下，字典比列表列表更好。

```
neighbour = ['Good morning', 'Good afternoon']
scanned = {'Good morning': 'Buenos dias', 'Good night': 'Buenas noches'}
localisation = []

matches = set(neighbour).intersection(scanned.keys())
for match in matches:
    localisation.append((match, scanned[match])) 
```

请提供示例输入和预期输出。

# php - php和xml的问题

> ID：15796801
> 
> 赞同：0
> 
> 时间：2013-04-03T19:54:59.847
> 
> 标签：php, xml, xpath

我正在尝试使用 php 处理几个 xml 文件。我已经阅读了 php simpleXML 网站上的解释和一些示例，但我无法从 xml 中获取我想要的内容。
我无法控制 xml。这是 xml 文件的片段：

```
<end-user-emails>
    <user email="test@testemails.com"/>
</end-user-emails> 
```

我目前拥有的一段代码：

```
$result = $xml->xpath("end-user-emails/user[@email]");
print_r($result[0][email]); 
```

哪个输出：

```
SimpleXMLElement Object ( [0] => test@testemails.com ) 
```

我找不到简单地返回属性值的方法。
我尝试将其转换为字符串并得到错误。我尝试了以下几种变体：

```
$result = $xml->end-user-emails[0]->user[0]->attributes(); 
```

它告诉我，尽管有先前的输出，但我不能调用 attributes() 因为它没有在对象上被调用。

因此，如果有人可以让我知道如何从 xml 中获取属性名称和值，将不胜感激。属性名称不是必需的，但我想使用它，所以我可以检查我是否真的在抓取电子邮件，例如：

```
if attributeName = "email" then $email = attributevalue 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T20:13:32.283

该`attributes()`方法将返回一个类似对象的数组，因此这应该可以满足您的要求，但仅适用于 php 5.4+

```
$str = '
<end-user-emails>
    <user email="test@testemails.com"/>
</end-user-emails>';
$xml = simplexml_load_string($str);
// grab users with email
$user = $xml->xpath('//end-user-emails/user[@email]');
// print the first one's email attribute
var_dump((string)$user[0]->attributes()['email']); 
```

如果您使用的是 php5.3，则必须像这样遍历 attributes()：

```
foreach ($user[0]->attributes() as $attr_name => $attr_value) {
    if ($attr_name == 'email') {
        var_dump($attr_name, (string)$attr_value);
    }
} 
```

您也可以分配该变量的返回值`->attributes()`并`['email']`在该变量上使用。如果您事先不知道属性名称，则循环也很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T20:05:10.303

要获取用户的电子邮件地址（在您的示例中），请将 xml 加载到一个对象中，然后解析每个项目。我希望这有帮助。

```
//load the data into a simple xml object
$xml = simplexml_load_file($file, null, LIBXML_NOCDATA);
//parse over the data and manipulate
foreach ($xml->action as $item) {
    $email = $item->end-user-emails['email'];
    echo $email;

}//end for 
```

有关更多信息，请参阅[http://php.net/manual/en/function.simplexml-load-file.php](http://php.net/manual/en/function.simplexml-load-file.php)

# ruby-on-rails - Rails 中面向最终用户的表单构建器

> ID：15796805
> 
> 赞同：2
> 
> 时间：2013-04-03T19:55:08.173
> 
> 标签：ruby-on-rails, ruby, forms

是否有允许用户生成您在 CMS 或 stackforms 中看到的表单的 Rails 应用程序？类似于调查应用程序，用户选择每个字段以及它是否是文本、下拉列表、电子邮件、复选框等，它会在他们的网站上创建一个表单，并让管理员查看结果、编辑它们等。

# database - 产品版本与属性的匹配范围

> ID：15796808
> 
> 赞同：0
> 
> 时间：2013-04-03T19:55:20.080
> 
> 标签：database, database-design, database-schema

我正在考虑将一些产品规格转移到数据库中。目前，它们是在一种自制 XML 的文本文件中实现的。例如，如果我们的产品是袜子，我们想通过该袜子的版本来跟踪颜色，它看起来像：

```
<SOCK ID>
  <COLOR>
      <VERSIONS>
        <LOW_000_HIGH_103  "Yellow">
        <LOW_114_HIGH_999  "Blue">
      </VERSIONS>
    </COLOR>
</SOCK ID> 
```

规格往往相当稳定，因此有很长的版本没有变化。所以我的问题是如何最好地表示这是一个数据模式。

我的想法是为独特的规范创建一个表，然后一个辅助多对一表将每个产品 ID 和版本号与相应的规范匹配。当然，如果它将产品和*范围*与规范匹配会很好，这在 SQL 中是否可行，或者是否有其他更好的模式？

编辑：我发现[这个](http://www.dbforums.com/database-concepts-design/532204-database-design-range-data.html)解决方案推荐指定的开始和结束范围值作为字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T21:59:12.210

如果我理解正确，您有产品，每个产品都有版本，每个版本可能都有一些属性。

我认为你的方法很好。只需将所有数据存储在各种关系中即可。

SQL 非常灵活，您可以通过它获得很大的创意。我将从简单地以一种您可以直观思考的方式存储数据开始。当您需要进行范围查询时，您可能需要考虑一下如何编写查询，但这是可能的。

请记住，您可以执行诸如在 SQL 中进行透视（将行转换为列）或将数据分组甚至将数据放入内存中的临时表等操作，以帮助慢慢地将数据形成类似于您想要的内容。

# asp.net - 如果在自定义 url 上，loginstatus 控件不指向登录页面

> ID：15796812
> 
> 赞同：1
> 
> 时间：2013-04-03T19:55:25.990
> 
> 标签：asp.net, redirect, asp.net-membership, loginstatus

我有公开的用户个人资料链接，例如`example.com/user/username`.

我`loginstatus`在母版页中有一个控件。

如果我在用户页面上，可以说；`example.com/user/testuser` 我点击登录，它不会将我重定向到`Login.aspx`. 而是给出一个`404`错误。

如何解决？

感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:05:41.903

我也遇到了相对路径的问题。在浏览了网络上的一些文章之后。（其中一个是[http://www.ifinity.com.au/Blog/EntryId/46/Why-does-Url-Rewriting-break-all-my-image-links](http://www.ifinity.com.au/Blog/EntryId/46/Why-does-Url-Rewriting-break-all-my-image-links)）我通过设置解决了`rebaseClientPath`这个`false`问题`Context.RewritePath`在 Global.asax 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:18:06.840

无论您在or中写入*URL* ，请使用该方法，如下所示：`MasterPage``WebUSerControl``ResolveUrl()`

```
<a href='<%=ResolveUrl("~/MyLoginPage.aspx")%>'>Login</a> 
```

这将确保无论当前位置如何，您都能到达正确的页面。

# java - 如果直接调用 Thread.getUncaughtExceptionHandler().uncaughtException 会发生什么坏事？

> ID：15796813
> 
> 赞同：3
> 
> 时间：2013-04-03T19:55:28.660
> 
> 标签：java, exception-handling

将已检查的异常直接扔给 UncaughtExceptionHandler 有什么负面影响？

```
 Thread t = new Thread() {

            @Override
            public void run() {
                try {
                    verb();
                } catch (Exception e) {
                    getUncaughtExceptionHandler().uncaughtException(this,e);
                }
            }
        }; 
```

显然，对应用程序有（应该是）后果 - 编写 verb() 的人认为应该处理这个特定条件。假设我愿意忽略这一点，还会出现什么问题？

在线程即将终止*之前*调用 ExceptionHandler 是否有后果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:12:19.153

不应该有负序列。
如果您没有明确设置自定义处理程序，`ThreadGroup`则将调用[该](http://docs.oracle.com/javase/7/docs/api/java/lang/ThreadGroup.html#uncaughtException%28java.lang.Thread,%20java.lang.Throwable%29)方法：

> 此方法确定 Throwable 参数是否是 ThreadDeath 的实例。如果是这样，没有什么特别的。否则，一条包含线程名称的消息（从线程的 getName 方法返回）和使用 Throwable 的 printStackTrace 方法的堆栈回溯将打印到标准错误流。

如果您设置了自定义，最有可能的是它只会记录一些东西。因此，您只会看到线程日志和堆栈跟踪。
除非您的自定义处理程序做了一些特定的事情，这些事情只有在线程终止时才应该完成，但从 OP 看来情况并非如此。

# sql - 如何列出已在 COUNT 语句中组合的项目

> ID：15796815
> 
> 赞同：-1
> 
> 时间：2013-04-03T19:55:39.897
> 
> 标签：sql

我有一个有两个表的数据库： 表 1 有用户 表 2 有这些用户的代表

如果可能的话，我想在一个查询中执行以下操作：

1.  列出从用户表中提取的委托人用户 ID
2.  计算委托人拥有的委托人数量
3.  列出代表的 ID

我已经完成了第 1 步和第 2 步，但如果可能的话，不知道如何实现第 3 步。到目前为止，这是我的查询：

```
Select distinct users.UserID, Count(delegates) as 'Number of Delegates'
  From delegates
  inner Join users on delegates.delegates = users.handle
  Group by Users.UserID
  Order by Count(delegates) desc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:20:17.200

这是 SQL-Server 解决方案：

```
Select * From
(
Select users.UserID, users.handle, Count(delegates) as 'Number of Delegates'
  From delegates
  inner Join users on delegates.delegates = users.handle
  Group by Users.UserID, users.handle

) myTbl
Inner Join delegates d
on delegates.delegates = myTble.handle 

Order by 'Number of Delegates' desc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T20:00:51.300

[http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

```
Select distinct users.UserID,
       COUNT(delegates) as 'Number of Delegates',
       GROUP_CONCAT(delegates.delegate_id SEPARATOR ',') as 'Delegate list'
  From delegates
  inner Join users on delegates.delegates = users.handle
  Group by Users.UserID
  Order by Count(delegates) desc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T19:59:44.287

由于您已按用户 ID 分组，因此您不能在 Select 子句中使用 Delegate ID。您拥有的一种选择是同时按 userID 和 DelegateID 进行分组，但缺点是相同的计数会重复多次。

# c# - 每次升级从我的 dotNet 应用程序使用的 COM 库时，是否需要重新构建和重新部署？

> ID：15796818
> 
> 赞同：3
> 
> 时间：2013-04-03T19:55:47.280
> 
> 标签：c#, .net, com, interop

我有一个使用 COM 组件的 C# .net 2.0 windows 应用程序。当我添加对此 COM 库的引用时，Visual Studio 2005 会自动添加一个互操作程序集 DLL。

如果 COM 组件频繁升级，我需要做些什么来保持我的应用程序也升级？我是否需要升级互操作 DLL？为了跟上 COM 升级，我是否需要每次都重新构建和重新部署？

我不能 100% 理解这个互操作性问题，我只需要尽量减少每次 COM 升级的工作量。我需要避免每次都重建和重新部署。有什么最佳方法可以实现这一目标吗？

我一直在阅读 MSDN 中的 Advanced COM Interoperability ( [http://msdn.microsoft.com/en-us/library/bd9cdfyx.aspx](http://msdn.microsoft.com/en-us/library/bd9cdfyx.aspx) )，但仍然没有明确的答案。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T20:22:40.327

您不需要更新互操作 DLL，只要组件的 COM 接口不变。因此，这取决于对组件进行了何种更改。

发行说明将是明显的信息来源。如果做不到这一点，比较`.tlb`文件（如果它们与组件一起交付）可能是一种选择。

潜在地，该组件也可能支持多个接口版本，这样就无需立即更新您的应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T22:02:35.073

> 并且找不到有问题的 COM 的任何 tlb 文件。

它通常嵌入在 COM 服务器 DLL 中。您可以使用 Visual Studio 看到的东西，文件 + 打开 + 文件并选择 DLL。您将看到一个 TYPELIB 节点，资源 1 是类型库。

您可以通过从 Visual Studio 命令提示符运行 Oleview.exe 来反编译类型库。文件 + 查看 Typelib 并选择 DLL。将右窗格的内容复制/粘贴到文本编辑器中并保存。如果此 IDL有*任何更改，那么您***必须**重新构建导入库和您的程序。不这样做会导致很难诊断运行时问题，包括访问冲突异常和调用完全错误的方法。

这很难自动化，显然您会更喜欢供应商让您了解重大更改的更好方式。在这台服务器上工作的程序员应该很清楚这样做的必要性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T22:46:37.540

当我与一个可能会进行大量构建的组件进行 COM 互操作时，但 COM 组件并没有经常更改，那么我将使用 TLBIMP 来创建一个互操作，我只是引用我的互操作，我可以进行版本控制（尽管互操作版本可能需要 .NET4）。

将以下所有内容设为批处理文件（单行）并使用适当的 tlbimp。

```
"C:\Program Files\Microsoft SDKs\Windows\v7.1\Bin\NETFX 4.0 Tools\tlbimp" 
"C:\pathtocomdll\comcomponent.dll" 
/out:"Interop.mycomponent.dll" 
/asmversion:"1.1.0.0" /keyfile:"\\server\keyfiles\library.snk"  
/company:"my company"  /productversion:"1.1.0.0" 
/copyright:"2013" 
/product:"company product" /namespace:"company.namespace" 
```

如果您使用的 COM 组件只是升级它们的版本而不改变它们的接口，那么您不需要重建您的 Interop。如果您使用的是 .net4，您还可以将互操作嵌入到您的项目中。

# ruby - Sass/Compass 未使用 Guard 和 Middleman 设置进行编译

> ID：15796820
> 
> 赞同：2
> 
> 时间：2013-04-03T19:55:51.520
> 
> 标签：ruby, sass, compass-sass, guard, middleman

我正在运行 Mac OS X Mountain Lion 并最近通过 RVM 设置 Ruby。然后我安装了 Middleman ( [http://middlemanapp.com/](http://middlemanapp.com/) )，它工作正常。我已经能够添加配置设置并构建项目。

我的问题来自尝试使用 Guard 编译 Sass/Compass 并与 LiveReload 链接以自动刷新我的浏览器。

我的中间人项目结构如下：

> {项目名称}/站点/源

（来源是中间人文件夹，它编译到同一级别的“构建”文件夹）

我的 gemfile/config.rb/guardfile 在这里：

> {项目名称}/站点/

下面列出了我的 Gemfile、Config.rb 和我的 Guardfile。

**宝石文件：**

```
# If you have OpenSSL installed, we recommend updating
# the following line to use "https"
source 'https://rubygems.org'

gem 'middleman', '~>3.0.12'
gem 'sass'                      
gem 'compass'
gem 'oily_png'
gem 'guard'
gem 'guard-compass'
gem 'guard-shell'             # Run shell commands.
gem 'guard-livereload'        # Browser reload.

gem 'rb-fsevent', :require => false     # Mac OSX 
```

**Congid.rb**（还包含一些中间人构建的配置，但与 Sass/Compass 无关）

```
# Sass options:
# http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#options
sass_options = Hash.new

# Enable Sass inspection directly from the browser.
#
# Chrome Canary support (Applies to Webkit Nightlies as well.):
#   http://blog.q42.nl/post/35203391115/debug-sass-and-less-in-webkit-inspector-and-save-css-cha
# Firefox Extension:
#   https://addons.mozilla.org/en-US/firefox/addon/firesass-for-firebug
#
# Set to true to enable. Enabling will disable `line_comments`.
#
sass_options[:debug_info] = true

##
# Compass configuration:
# http://compass-style.org/help/tutorials/configuration-reference

# Development is the default environment. When compiling for production, this
# should be flagged as :production. This can be done through the command line
# with the following.
#
#   $ compass compile -e production --force
#

environment = :development

sass_dir    = 'source/sass'
css_dir     = 'source/css'
js_dir      = 'source/js'
images_dir  = 'source/img'
relative_assets = true
output_style    = (environment == :production ? :compressed : :expanded) 
```

**保护文件**

```
# ~/.guardfile

# More info at https://github.com/guard/guard#readme

notification :off

puts "Using guard file for markweston project."

group :development do

  if File.exists?("./config.rb")
    # Compile on start.
    puts `compass compile --time --quiet`
    # https://github.com/guard/guard-compass
    guard :compass do
      watch(%r{(.*)\.s[ac]ss$})
    end
  end

  ## Look for specified files in the current and child directories.
  ## `find` requires Ruby 1.9 or greater.
  require 'find'
  if Find.find(Dir.pwd).detect{|dir|dir=~/.+\.(css|js|html?|php|inc|theme)$/}
    guard :livereload do
      watch(%r{.+\.(css|js|html?|php|inc|theme)$})
    end
  end

  # Uncomment block above and remove this if using Ruby 1.9 or greater.
  # https://github.com/guard/guard-livereload.
  # guard :livereload do
  #  watch(%r{.+\.(css|js|html?|php|inc|theme)$})
  # end

end 
```

我可以运行有效的“bundle exec guard”，当我在浏览器中运行 LiveReload 时，终端会告诉我浏览器已连接。

需要注意的一件事是，在运行“bundle exec guard”后出现此错误：

> /Users/Mark/.rvm/gems/ruby-1.9.3-p385/gems/compass 0.12.2/lib/compass/configuration/inheritance.rb 行 ["264"] 上的 NoMethodError：激活

目前也很难弄清楚这一点。

主要问题是，当我在 sass 目录中保存的 .scss 文件之一中实际编写任何 Sass 时，它们不会编译为我的 css 目录中的 .css。终端什么也没说，什么也没发生。我的配置有问题，但无法弄清楚是什么。

有人可以帮忙吗？

谢谢，

标记。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T23:59:27.127

我在[`middleman-livereload`宝石](https://github.com/middleman/middleman-livereload)上运气不错。

此外，Middleman 内置了 Compass 和 Sass，您可以通过在开发期间运行`middleman server`和访问来大大简化此操作，`http://localhost:4567/`这将负责您的预处理以及运行`guard`以`live-reload`刷新您的浏览器。您将不再需要运行`compass watch`或`guard`命令。

我的 gemfile 看起来像这样：

```
gem "middleman", "~> 3.0.13"
gem "middleman-livereload" 
```

因此，我强烈建议使用规定的[开发周期](http://middlemanapp.com/getting-started/#toc_9)，而不是尝试重新包含内置的 Sass 和 Compass。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T16:11:31.500

我们已经建立了一个中间人项目的简单设置。随意使用它：[https ://github.com/beef/beef-middleman](https://github.com/beef/beef-middleman)

# clojure - Clojure 宏返回两个或多个 s 表达式

> ID：15796831
> 
> 赞同：5
> 
> 时间：2013-04-03T19:56:23.737
> 
> 标签：clojure

Clojure 中有没有办法编写一个返回两个或多个 s 表达式的宏（或使用现有的宏）？

例子。假设我正在尝试生成前 10 个正方形：

```
(map * (range 10) (range 10)) 
```

现在我想尝试使用**重复**，以便以后可以提供功率（现在为 2）作为参数：

```
(map * (repeat 2 (range 10))) 
```

但是，上述内容不起作用，因为**repeat**返回具有两个范围而不是两个范围的单个 s 表达式。

请不要提供“返回前 10 个方块”功能的替代实现。我对处理此类情况的惯用方法或普遍适用的解决方法感兴趣。

我想我正在寻找一种在下面实现**爆炸**的方法：

```
(explode '( a b c )) ;; evals to a b c
(map * (explode (repeat 2 (range 10))) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T20:37:19.020

单个宏无法做到这一点。

宏是一个函数，它**接受一个 s 表达式并将其转换为另一个 s 表达式。**输入可以是任何表达式序列（符号、原语、其他表达式等），输出是插入代替原始宏调用的单个表达式。

一般来说，宏必须围绕调用 map 和转换整个表单

```
(your-macro-here (map * (repeat 2 (range 10)))) 
```

如果您有两个宏，一个生成表达式，另一个包含整个外部形式，则外部宏可能会找到包含宏结果的单个表达式，在您的示例中为两个范围，并将它们提升一层以成为独立表达式. 我不建议在实践中这样做，它只是为了说明宏的功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T21:08:21.273

正如 Arthur 所说，你不能完全用宏来做你正在寻找的东西。变通方法是可能的，具体取决于您要对这些表单执行的操作。

如果您只是想评估宏生成的多个表单，例如为了简化样板代码，您可以将这些多个表单包装在一个`do`表单中：

```
(defmacro defn-foos [& foos]
  `(do ~@(map (fn [foo] `(defn ~foo [])) foos)))

(defn-foos my-fn-1 my-fn-2)
;; expands as:
;; (do (defn my-fn-1 [])
;;     (defn my-fn-2 [])) 
```

如果您想在函数调用中使用扩展形式作为位置参数，就像您所做的那样，那么您最好的选择可能是将它们包装在 a 中`list`，然后使用`apply`which 解包列表作为函数的位置参数。

要了解这是如何工作的，请注意原始问题中的第二个示例可以使用以下方法进行简单修改`apply`：

```
(apply map * (repeat 2 (range 10))) 
```

# javascript - 如何从弹出窗口打开网站？

> ID：15796835
> 
> 赞同：-1
> 
> 时间：2013-04-03T19:56:46.023
> 
> 标签：javascript, html

我想从单击按钮时打开的窗口打开网站。这是看起来像的屏幕截图：

[http://www.flickr.com/photos/92807764@N06/8617593002/in/photostream](http://www.flickr.com/photos/92807764@N06/8617593002/in/photostream)

这是我执行弹出窗口的方法：

```
<a onClick="MyWindow=window.open('availability.php','MyWindow','toolbar=no,location=no,directories=no,status=no, menubar=no,scrollbars=no,resizable=no,width=600,height=300'); return false;">
    <button class="Über-clean" type="submit"style="float:right;" >Check Availability</button>
</a> 
```

所以我点击“检查可用性”，然后窗口出现“立即预订”按钮。我想要做的是当我单击“立即预订”时，它会在原始主页上打开一个页面，换句话说，“检查可用性”是当我单击“立即预订”时发生的情况：

[http://www.flickr.com/photos/92807764@N06/8616499063/in/photostream](http://www.flickr.com/photos/92807764@N06/8616499063/in/photostream)

该页面在窗口本身中打开，这是我不想要的。如何在原始选项卡中打开 booker.php？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:03:40.480

```
<a href="test.html" target="windowName">TEST</a> 
```

如果已存在名为“windowName”的窗口或框架，则将页面加载到其中。否则，首先创建一个新窗口。

窗口名称必须是一个单词（只能是字母、数字和下划线，不能以数字开头）。

有四个预定义的目标：

```
_blank  always opens a new window.
_self   always opens in the current window or frame.
_parent opens in the parent frame, if any, otherwise as _self.
_top    opens in entire browser window, even if there are frames. 
```

例如在 javascript window.open("test.html","windowName");

# c# - 用于多个客户端的异步 TCP 服务器

> ID：15796836
> 
> 赞同：4
> 
> 时间：2013-04-03T19:56:46.587
> 
> 标签：c#, sockets, asynchronous, tcp, asynccallback

我有一个异步侦听传入连接的 TCP 服务器。如果只连接一个客户端，一切正常。但是如果有两个或更多的连接，服务器就不会收到第一条消息。当我调试 ReceiveCallback 函数时，我可以看到服务器获取消息的长度而不是数据。即，如果我连接两个客户端并尝试发送第一条消息：“hello”，服务器得到：received = 5; buffer= /0/0/0/0/0，所以什么都不显示。在同一客户端的第二条消息中，服务器获取数据。

这就是我的服务器的样子：

```
 private void StartServer()
    {
        try
        {
            serverSocket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
            serverSocket.Bind(new IPEndPoint(IPAddress.Any, 3333));
            serverSocket.Listen(100);
            serverSocket.BeginAccept(new AsyncCallback(AcceptCallback), null);   

        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message, Application.ProductName, MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
    }

     private void AcceptCallback(IAsyncResult ar)
    {
        try
        {
            Socket clientSocket = serverSocket.EndAccept(ar); 
            clientSocketList.Add(clientSocket);
            AppendToTextBox("ClientConnected");
            clientSocket.BeginReceive(buffer, 0, buffer.Length, SocketFlags.None, new AsyncCallback(ReceiveCallback), clientSocket);
            serverSocket.BeginAccept(new AsyncCallback(AcceptCallback), null);

        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message, Application.ProductName, MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
    }

        private void ReceiveCallback(IAsyncResult ar)
    {
        try
        {
            int received = 0;
            Socket current = (Socket)ar.AsyncState;
            received = current.EndReceive(ar);
            byte[] data = new byte[received];

            if (received == 0)
            {
                return;
            }

            Array.Copy(buffer, data, received);
            string text = Encoding.ASCII.GetString(data);

            AppendToTextBox(text);
            buffer = null;
            Array.Resize(ref buffer, current.ReceiveBufferSize);

            current.BeginReceive(buffer, 0, buffer.Length, SocketFlags.None, new AsyncCallback(ReceiveCallback), current);
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message, Application.ProductName, MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T22:36:21.053

[请参阅http://msdn.microsoft.com/en-us/library/dxkwh6zw.aspx](http://msdn.microsoft.com/en-us/library/dxkwh6zw.aspx)上的示例

您想更改代码，以便在每次调用时分配一个新缓冲区`BeginReceive`：

```
 Socket clientSocket = serverSocket.EndAccept(ar); 
        clientSocketList.Add(clientSocket);
        AppendToTextBox("ClientConnected");
        var buffer = new byte[BUFFER_LENGTH];  // <---
        clientSocket.BeginReceive(buffer, 0, buffer.Length, SocketFlags.None, new AsyncCallback(ReceiveCallback), clientSocket);
        serverSocket.BeginAccept(new AsyncCallback(AcceptCallback), null); 
```

每个客户端必须有一个缓冲区。否则，一个客户端可以覆盖另一个客户端使用的缓冲区。

# jquery - JQuery，我怎样才能只做主 可以点击吗？

> ID：15796840
> 
> 赞同：1
> 
> 时间：2013-04-03T19:57:00.697
> 
> 标签：jquery, jquery-plugins

我正在创建一个 JQuery 插件来在某个 div 之间切换。我有一个可见的 div，您可以单击它来切换隐藏的 div。我让隐藏的 div 出现，但是当我点击隐藏的 div 时它消失了。即使单击隐藏的 div，如何使隐藏的 div 显示并保持可见？

这是我的代码。

HTML：

```
<html>
<head>
    <link rel='stylesheet' type='text/css' href='stylesheet.css'/>
    <script type='text/javascript' src='script.js'></script>
</head>
<body>  

<div id="clickable_box" class="tooltip4"></div>

<script type="text/javascript">  
$('div.tooltip4').tooltip()
</script>       

</body>  
</html> 
```

CSS：

```
#appearing_box {  
display: none; 
border: 1px solid #BFBFBF;
height: 50px;
width: 150px;
}  

#clickable_box {
height: 50px;
width: 50px;
border: 1px solid black;
} 
```

查询：

```
(function($){  
$.fn.tooltip = function(options) {  

    this.each(function() {  
        var $this = $(this); 
        var $box = $('<div id="appearing_box"> <form><textarea>When?</textarea><form> </div>');     

            $this.click(function() {  
                $($box)
                .appendTo($this)  
                .css({
                backgroundColor: '#0099ff' 
                }),   
                    $box.toggle();   
            });     
    });    
};  
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:03:11.430

因为你的appering_box div在里面`.tooltip`..点击`appering_box`正在调用`.tooltip`点击..所以尝试appearing_box`e.pstopPropagation()`点击功能来停止事件气泡..

试试这个

```
$.fn.tooltip = function(options) { 
  ...  
 //your codes
};
$(".tooltip4").on('click', "#appearing_box",function(e) {
  e.stopPropagation();
}) 
```

[在这里工作小提琴](http://jsfiddle.net/gUjNy/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:07:26.893

将以下委托事件句柄附加到您的代码：

```
$this.on('click', '#appearing_box', function (e) {
    e.stopPropagation();
}); 
```

这是[小提琴](http://jsfiddle.net/gUjNy/)。

# sql - 在定义的跨度内查找可以安排培训师的连续日期

> ID：15796846
> 
> 赞同：3
> 
> 时间：2013-04-03T19:57:11.603
> 
> 标签：sql, tsql, sql-server-2005, schedule, date-range

我们有一张表格，用于将培训师分配给计划中的客户安装。在表中，每一位培训师都有一年中每一天的记录。（我们可以而且有时会在周末工作。）我正在构建一个搜索工具，允许我们的调度员搜索在日期 Y 和 Z 之间有 X 天可用的培训师。

```
Table mySchedule

Trainer        Date       Dirty (Bit)
------------------------------------------------                
Joe         06/01/2013      0
Jessica     06/01/2013      0
Alan        06/01/2013      0
Heather     06/01/2013      0
Joe         06/02/2013      1
Jessica     06/02/2013      1
Alan        06/02/2013      0
Heather     06/02/2013      0
Joe         06/03/2013      1
Jessica     06/03/2013      1
Alan        06/03/2013      1
Heather     06/03/2013      0 
```

这是我的表格的简化版本，涵盖了 3 天的四位培训师。如果他们安排了一些事情，Dirty = 1。如果他们可以自由安排，Dirty = 0。

我想要构建的是一个允许以下内容的查询：

*   定义工作需要进行的开始和结束日期。

*   定义需要培训师的连续天数。

*   返回每个匹配的培训师，以及他们在至少等于请求天数的时间段内可用的第一个日期。

**纯文本示例：**

客户要求培训师在 6 月的任何时候在现场待两天。查询应返回：

```
Alan, 06/01/2013
Heather, 06/01/2013 
```

如果客户在 6 月将请求更改为三天，则查询将返回：

```
Heather, 06/01/2013 
```

我一直在寻找几天，我发现了一些看起来很接近的东西，但最终，我无法让它们工作。在大多数情况下，失败的形式是执行时间过长。这里有一些看起来很有希望的，也许可以被比我包装更强大的 SQL-Fu 的人改编：

*   [如何使用 SQL 查找表中的 N 个连续记录](https://stackoverflow.com/questions/2725807/how-to-find-n-consecutive-records-in-a-table-using-sql)
*   [Microsoft T-SQL 计算连续记录](https://stackoverflow.com/questions/2790841/microsoft-t-sql-counting-consecutive-records)
*   [如何在具有连续日期和重复数据的记录中查找日期范围](https://stackoverflow.com/questions/2839244/how-to-find-date-ranges-in-records-with-consecutive-dates-and-duplicate-data)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:43:33.397

假设缺少的计划记录默认为“可用”，这样的事情应该可以工作：

```
WITH cteRawData As
(
   SELECT
      S.Trainer,
      S.Date,

      -- If there are no later busy dates within the period,
      -- assume they're free until the end of the period:
      IsNull(ED.EndDate, DateAdd(day, 1, @EndDate)) As EndDate
   FROM
      mySchedule As S
      CROSS APPLY
      (
         SELECT
            Min(Date) As EndDate
         FROM
            mySchedule As S2
         WHERE
            S2.Trainer = S.Trainer
         And
            S2.Date > S.Date
         And
            S2.Date <= @EndDate
         And
            S2.Dirty = 1
      ) As ED
   WHERE
      S.Date Between @StartDate And @EndDate
   And
      S.Dirty = 0
),
cteData As
(
   SELECT
      Trainer,
      Date,
      DateDiff(day, Date, EndDate) As NumberOfDays
   FROM
      cteRawData
)
SELECT
   Trainer,
   Min(Date) As EarliestStartDate
FROM
   cteData
WHERE
   NumberOfDays >= @NumberOfDays
GROUP BY
   Trainer
; 
```

[http://www.sqlfiddle.com/#!3/7b3e2/17](http://www.sqlfiddle.com/#!3/7b3e2/17)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:45:04.810

不确定这将如何针对更大的数据集执行，但它会为所提供的数据集获得正确的结果。缺失的数据点被认为是可用的。

```
declare @startDate datetime, @endDate datetime, @days int
select @startDate = '6/1/2013', @endDate='6/3/2013', @days=2

select trainer, min(date)
from
    (
    select  trainer,date,
            (select top 1 date
            from mySchedule sInner
            where sInner.date > sOuter.date
                    and sInner.trainer = sOuter.trainer
                    and sInner.Dirty = 1    
                    and sInner.date between @startDate and @endDate
            order by sInner.date) as nextDirtyDate
    from    mySchedule sOuter
    where sOuter.dirty=0
            and sOuter.date between @startDate and @endDate
    ) sub
group by trainer, nextDirtyDate
having dateDiff(d, min(date), isNull(nextDirtyDate,dateAdd(d,1,@endDate))) >= @days 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T21:19:06.270

注意：我不知道性能有多好，因为它使用的是运行总数。

当dirty = 0时，它也会使用dirty flag来获得一个正数，
例如`CASE WHEN B.Dirty = 0 THEN 1 ELSE -1 END`

它使用查询中 2 个地方的天数
`S.Date - NNN + 1 AS StartDate`
`HAVING Sum(CASE WHEN B.Dirty = 0 THEN 1 ELSE -1 END) = NNN`

```
-- Note the need to put the value of 3 to be put at 2 places
SELECT S.Trainer, S.Date - 3 + 1 AS StartDate,
Sum(CASE WHEN B.Dirty = 0 THEN 1 ELSE -1 END) AS RunningAvl
FROM Schedule S INNER JOIN
Schedule B
ON S.Trainer = B.Trainer
WHERE B.Date <= S.Date
AND S.Date BETWEEN '2013-06-01' AND '2013-06-30'
AND B.Date BETWEEN '2013-06-01' AND '2013-06-30'
GROUP BY S.Trainer, S.Date
HAVING Sum(CASE WHEN B.Dirty = 0 THEN 1 ELSE -1 END) = 3
ORDER BY S.Trainer, S.Date ;

-- Note the need to put the value of 2 to be put at 2 places
SELECT S.Trainer, S.Date - 2 + 1 AS StartDate,
Sum(CASE WHEN B.Dirty = 0 THEN 1 ELSE -1 END) AS RunningAvl
FROM Schedule S INNER JOIN
Schedule B
ON S.Trainer = B.Trainer
WHERE B.Date <= S.Date
AND S.Date BETWEEN '2013-06-01' AND '2013-06-30'
AND B.Date BETWEEN '2013-06-01' AND '2013-06-30'
GROUP BY S.Trainer, S.Date
HAVING Sum(CASE WHEN B.Dirty = 0 THEN 1 ELSE -1 END) = 2
ORDER BY S.Trainer, S.Date 
```

[http://www.sqlfiddle.com/#!3/99f2d/1](http://www.sqlfiddle.com/#!3/99f2d/1)

# python - 为什么我得到'int'对象不是可迭代的错误？

> ID：15796849
> 
> 赞同：0
> 
> 时间：2013-04-03T19:57:19.030
> 
> 标签：python, python-2.7

指示：

编写一个名为 roll_big 的函数，它接收 1 个数字参数。它生成从 1 到参数大小的随机数；将数字相加。它在掷出 1 时停止。不计算 1，但返回其余数字的总和。

我不明白为什么 for 循环对我的代码有问题。我需要解决什么问题？

```
import random
def roll_big(x):
    count = 0
    while True:
        for i in random.randrange(1,x):
            if i == 1:
                return count
            else:
                count += i 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T20:00:51.767

`randrange`不返回序列，它只是返回一个数字：

```
import random

def roll_big(x):
    count = 0
    while True:
        i = random.randrange(1, x)
        if i == 1:
            return count
        else:
            count += i 
```

[randrange 的文档。](http://docs.python.org/2/library/random.html#random.randrange)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:02:31.273

`random.randrange(1,x)`返回 1 和 x 之间的单个整数，而不是列表。您需要将代码修改为以下内容（注意：未经测试）：

```
def roll_big(x):
    count = 0
    while True:
        i = random.randrange(1, x)
        if i == 1:
            return count
        else:
            count += i 
```

# c++ - 在 C++ 中使用平铺地图的 SFML 平台游戏

> ID：15796850
> 
> 赞同：0
> 
> 时间：2013-04-03T19:57:24.213
> 
> 标签：c++, sfml

嗨，我有一个用于映射的类，它正在绘制到屏幕上，但它只在窗口左侧垂直向下绘制。我可以弄清楚我哪里出错了。任何帮助将非常感激。很确定这与我在绘图函数中的 for 循环有关。

```
void Map::Initialise(const char *filename)
{
     std::ifstream openfile(filename);
     std::string line;
     std::vector <int>  tempvector;
    while(!openfile.eof())
    {
        std::getline(openfile, line);

        for(int i =0; i < line.length(); i++)
        {
            if(line[i] != ' ') // if the value is not a space
            {
                char value[1] = {line[i]}; // store the character into the line variable
                tempvector.push_back(atoi(value)); // then push back the value stored in value into the temp vector
            }
            mapVector.push_back(tempvector); // push back the value of the temp vector into the map vector
            tempvector.clear(); // clear the temp vector readt for the next value
        }
    }
}

void Map::DrawMap(sf::RenderWindow &Window)
{
    sf::Shape rect = sf::Shape::Rectangle(0, 0, BLOCKSIZE, BLOCKSIZE, sf::Color(255, 255, 255, 255));
    sf::Color rectCol;
    sf::Sprite sprite;
    for(int i = 0; i < mapVector.size(); i++)
    {
        for(int j = 0; j < mapVector[i].size(); j++)
        {
            if(mapVector[i][j] == 0)

               rectCol = sf::Color(44, 117, 255);

            else if (mapVector[i][j] == 1)

                rectCol = sf::Color(255, 100, 17);

            rect.SetPosition(j * BLOCKSIZE, i * BLOCKSIZE);
            rect.SetColor(rectCol);
            Window.Draw(rect);

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:03:42.687

首先，使您的提取成为`while`循环的条件：

```
while(std::getline(openfile, line))
{
  // ...
} 
```

使用`openfile.eof()`是一个非常糟糕的主意；仅仅因为您还没有到达文件的末尾，并不意味着下一次提取会成功。你只是继续前进，不知道你是否真的有一个有效的`line`。

其次，这将无法正常工作：

```
char value[1] = {line[i]}; // store the character into the line variable
tempvector.push_back(atoi(value)); 
```

我明白你为什么使用 a `char[1]`- 你希望它被转换为指针，因为`atoi`需要一个`const char*`. 但是，`atoi`还期望它指向的数组以空值终止。你的不是。它只是一个`char`.

有一种更好的方法可以将 a 转换为`char`它所代表的整数。所有数字数字字符的值都保证是连续的：

```
char value = line[i];
tempvector.push_back(value - '0'); 
```

现在，真正的问题来了。你在读完一个字符后把你推`tempvector`到了后面。`mapVector`您需要将其移出`for`该行的循环：

```
while(std::getline(openfile, line))
{
    for(int i =0; i < line.length(); i++)
    {
        // ...
    }

    // Moved here
    mapVector.push_back(tempvector); // push back the value of the temp vector into the map vector
    tempvector.clear(); // clear the temp vector readt for the next value
} 
```

# database - 情境相关数据的数据库表设计

> ID：15796853
> 
> 赞同：0
> 
> 时间：2013-04-03T19:57:28.233
> 
> 标签：database, postgresql, database-design

假设您有一个表，其中包含非常依赖于情况的数据。

一个例子是玩家选择获胜的游戏集合。这个选择应该被存储，但是游戏是不同的，所以一个游戏中的选择并不真正适合另一个游戏中的选择。

一般来说，让表格足够宽以处理所有案例并为每个条目保留一些（但不同的）部分未使用会更好，还是应该为每个案例制作一个特殊的表格？

还是有其他更好的技术？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:17:42.433

我不确定，如果我理解正确，您似乎需要一个需要 3 个表的 m:n 关系：

```
CREATE TABLE game
    (
    id int PRIMARY KEY,
    game nchar(x)
    )

CREATE TABLE solution
    (
    id int PRIMARY KEY,
    solution nchar(x)
    )

CREATE TABLE game_solution
    (
    id int PRIMARY KEY,
    id_game int NULL REFERENCES game( id),
    id_solution int NULL REFERENCES solution( id)
    ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-05T23:20:30.710

@Lars：我刚刚重读了你的问题。

为了简短起见：

1.  如果您需要*最高性能*，请保持其完全结构化，即使您必须创建许多新表。

2.  如果您需要*灵活性*，例如存储您还不知道的结果结构的未来游戏的结果，而不考虑性能，则存储二进制值或包含解决方案的文件的链接。

3.  如果您需要*灵活性*和*更好的性能*并且已经知道*最常见的解决方案类型*的结构，请将它们存储在结构化表和所有其他不可预测的（未来）解决方案中，作为二进制文件或文件链接。

4.  如果您想保持简单，请使用第 1 点或第 2 点，因为第 3 点会为您的程序增加很多复杂性。

我希望这是正确的答案。我很好奇，如果有人有更好的建议！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T20:34:43.860

你的问题很笼统，所以简短的回答是：这取决于！较长的一个是：如果您只有几款差异不大的游戏，“宽”牌桌是一个简单的解决方案。在某些情况下，我会寻求该解决方案，但通常不会。

我的建议是：问问自己，所有选择/选择的共同点。该数据应该进入一个通用表。特定游戏的特殊数据应放在每个游戏的单独相关表中。

不知道你作为程序员的背景如何。但是，如果您熟悉 OO 编程，只需 google 一下如何将类层次结构映射到 SQL 数据库的策略。

# php - 中止 jquery 长轮询和 php

> ID：15796854
> 
> 赞同：0
> 
> 时间：2013-04-03T19:57:33.657
> 
> 标签：php, long-integer, polling

我正在使用带有 jquery 的长轮询。我可以通过简单地执行 ajax_request.abort() 来中止任何 ajax 请求，但是我应该怎么做才能停止由 ajax 调用调用的 PHP 进程运行？

ps我的while循环有限制，但有时我只需要停止一切。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:59:09.863

在您的 php 进程循环中 - 放置一些会在特定超时/条件后中止循环的东西？理想情况下，它不应该是一个阻塞循环，否则会更痛苦..

做不到这一点 - max_execution_time 应该启动并终止进程吗？

# java - “Java”未被识别为内部或外部命令

> ID：15796855
> 
> 赞同：210
> 
> 时间：2013-04-03T19:57:37.800
> 
> 标签：java

在尝试检查我正在运行的 Java 的当前版本时，我收到错误“java 未被识别为内部或外部命令、可运行程序或批处理文件。”。

我正在运行 Windows 7 操作系统并下载了最新的 JDK，我觉得我可能不小心从机器中删除了 java，因为我之前能够使用命令“java -version”检查 Java 版本。

我必须下载什么软件才能让 Java 再次在我的机器上运行？

编辑：

在确保所有环境变量都指向当前的 Java SDK 之后，我设法让 Java 再次从我的 cmd 运行。

* * *

## 回答 #1

> 赞同：246
> 
> 时间：2013-04-03T19:59:07.810

您需要配置环境变量，`JAVA_HOME`并且`PATH`.

`JAVA_HOME`必须包含 java 的路径，并且应该将**%JAVA_HOME%\bin**添加到`PATH`

或者，您可以简单地添加到`PATH`bin 文件夹的整个路径，而不使用`JAVA_HOME`变量，但是，当您需要在您的机器上拥有多个 java 版本时，这会有点烦人（这样您只需要更改`JAVA_HOME`和甚至不打扰`PATH`）

* * *

## 回答 #2

> 赞同：181
> 
> 时间：2014-10-18T09:46:01.847

对于 Windows 7：

1.  右键单击`My Computer`

2.  选择`Properties`

3.  选择`Advanced System Settings`

4.  选择`Advanced`选项卡

5.  选择`Environment Variables`

6.  `Path`在下面选择`System Variables`

7.  点击`Edit`按钮

8.  在变量值编辑器中，将其粘贴到行首

    ```
    C:\Program Files\Java\jdk1.7.0_72\bin; 
    ```

9.  单击确定，然后再次确定

10.  重新启动命令提示符，否则它不会看到路径变量的更改

11.  `java -version`在命令提示符下键入。

* * *

**第 8 步注意事项：**

1.  这里使用的 java 版本可能与这里使用的不同——这只是一个示例。
2.  路径变量中可能还有其他值。不要删除已经存在的内容，这一点非常重要。这就是为什么说明要在行首粘贴给定值的原因*——*这意味着您不会删除现有值，只需将 java 放在它之前。如果其他版本的 java 也在路径上，这也解决了您遇到的任何问题。

**第 6 步的注意事项：**

1.  这会为计算机设置路径，而不是为单个用户设置路径。可能您正在使用其他开发人员也使用的计算机，在这种情况下，您宁愿设置用户变量，而不是系统变量

* * *

## 回答 #3

> 赞同：61
> 
> 时间：2013-04-03T20:00:42.393

听起来您没有在路径中添加正确的目录。

首先找出您在哪个目录中安装了 Java。例如，在我的盒子上，它位于`C:\Program Files\java\jdk1.7.0_11`¹中。找到后，尝试直接运行它。例如：

```
c:\> "c:\Program Files\java\jdk1.7.0_11\bin\java" -version 
```

一旦您确定了正确的版本，请将`bin`目录添加到您的`PATH`环境变量中。

请注意，您不需要`JAVA_HOME`环境变量，并且已经有一段时间不需要了。一些工具可能会使用它——如果你使用其中之一，那么当然，设置它——但如果你只是使用（比如说）Eclipse 和命令行`java`/`javac`工具，没有它你就可以了。

* * *

¹是的，这提醒了我需要更新...

* * *

## 回答 #4

> 赞同：58
> 
> 时间：2015-02-11T09:47:01.920

* * *

## 回答 #5

> 赞同：23
> 
> 时间：2019-08-03T16:54:35.427

搜索环境变量。 [![在此处输入图像描述](https://i.stack.imgur.com/IiQI3.png)](https://i.stack.imgur.com/IiQI3.png)

打开“编辑系统环境变量”。然后点击“环境变量”。 [![在此处输入图像描述](https://i.stack.imgur.com/nA5Ap.png)](https://i.stack.imgur.com/nA5Ap.png)

在“用户变量”下单击“路径”，然后单击“编辑”。 [![在此处输入图像描述](https://i.stack.imgur.com/DY5IP.png)](https://i.stack.imgur.com/DY5IP.png)

找到您的 Java 路径并单击“编辑”。 [![在此处输入图像描述](https://i.stack.imgur.com/KM2hL.png)](https://i.stack.imgur.com/KM2hL.png)

然后粘贴您的java安装文件夹的路径。大多数情况下，您可以在与此类似的路径上找到它。C:\Program Files\Java\jdk-12.0.2\bin

然后单击确定。现在在开始菜单中，键入 cmd。打开命令提示符。type java -version 如果你做对了，它应该会显示类似这样的内容。 [![在此处输入图像描述](https://i.stack.imgur.com/G4yfe.png)](https://i.stack.imgur.com/G4yfe.png)

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2015-03-30T18:02:05.400

对我来说，它在将 ,: 放在系统变量路径的开头之后开始工作：--

![在此处输入图像描述](https://i.stack.imgur.com/w7GDm.png)

![在此处输入图像描述](https://i.stack.imgur.com/1ZfdF.png)

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2017-01-24T21:24:40.260

我的解决方案是将相同的值（JDK bin 文件夹的路径）放入`JAVA_HOME`和`Path`

![JAVA_HOME](https://i.stack.imgur.com/Hk7QVm.png) ![小路](https://i.stack.imgur.com/LoBnUm.png)

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2015-01-16T15:01:54.947

就我而言，PATH 已正确设置，但 PATHEXT 已被我错误地使用 .exe 扩展名清除。这就是为什么窗口在命令提示符下找不到 java 或任何 .exe 应用程序的原因。希望它可以帮助某人。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2015-08-02T21:15:37.907

这个问题出现在 Windows 8 上。首先复制 java jdk 的路径 - 例如 C:\Program Files\Java\jdk1.7.0_51\bin。

1.  右键桌面上的我的电脑图标，然后单击属性。

2.  在左侧窗格中选择“高级系统设置”。

3.  在“高级”选项卡下，选择底部的“环境变量”。

4.  在系统变量中，选择“路径”变量并进行编辑。

粘贴路径并添加一个';' 最后 - 例如 C:\Program Files\Java\jdk1.7.0_51\bin;

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-03-18T16:07:58.600

我有同样的问题。只需在您的计算机上安装确切的 java 位即可。如果您的 PC 是 64 位，则安装 64 位 java。如果是 32 位，则反之亦然 :)

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2018-12-31T19:04:39.563

不知道为什么，但就我而言，原因是因为我运行的是 Anaconda 终端而不是 CMD。

在我使用 CMD 并更新上述所有评论中提到的路径设置后，我这边的问题得到了解决。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2021-02-11T16:35:27.803

如果您使用的是笔记本电脑并且没有`Pause\Break`按钮。对于 20h2 及以上版本的 Windows 10 用户：

1 *`WIN`→**输入**“关于您的PC”→底部滚动→高级系统设置→`Environment variables`* **或** *`WIN`+ `R`→`shell:::{bb06c0e4-d293-4f75-8a90-cb05b6477eee}`打开经典系统属性→左侧→高级系统设置→`Environment variables`*

也适用于 Windows 10 和 Windows 7：

1 *`WIN`→ 这台电脑 → 属性 → 高级系统设置 →`Environment variables`*

2.  在系统变量部分点击新建…</li>
3.  在变量名中写：`JAVA_HOME`
4.  在变量值写入：`C:\Program Files\Java\jdk-15.0.2\bin`，按`OK`

我已经从[Vijay Bhatt采取了步骤 2-4](https://stackoverflow.com/users/3139451/vijay-bhatt)

[![在 UI 中添加新的系统变量](https://i.stack.imgur.com/od7h4.png)](https://i.stack.imgur.com/od7h4.png)

有一种更快的方法来设置系统变量。以管理员身份运行控制台（终端）。

添加新变量的通用命令 synax：

```
setx variableName value /M 
```

在我们的示例中，我们需要将其设置为

```
setx JAVA_HOME "C:\Program Files\Java\jdk-15.0.2\bin" /M` 
```

像这样： [![使用管理控制台添加新的系统变量](https://i.stack.imgur.com/9alT9.png)](https://i.stack.imgur.com/9alT9.png)

`/M`- flag 指定在系统环境中设置变量。执行命令后，您应该会看到以下消息： `SUCCESS: Specified value was saved.`

如何检查它是否已添加？

1.  关闭您的活动终端；
2.  打开你最喜欢的终端；
3.  键入`java -version`。

您应该会看到与此类似的内容： [![结果图片](https://i.stack.imgur.com/UmkG0.png)](https://i.stack.imgur.com/UmkG0.png)

**注意：** 用户变量可以在没有 root（管理员权限）的情况下创建，而创建`System variable`; 您需要以**root 身份打开控制台**。

我曾经`C:\Program Files\Java\jdk-15.0.2\bin`举过一个例子，在你的情况下，它可能与我的不同。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2019-12-01T11:44:34.873

我更正了路径变量，但**命令提示符**需要**重新启动**，否则将无法验证对路径变量的更改。可能对像我这样的人有帮助。所以“**重启命令提示符**”

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2021-04-24T14:28:37.150

更新环境变量后，我在 Windows 10 中打开了一个新的命令提示符，但没有关闭旧的（为了方便我的命令并且懒得再次输入），新的 cmd 窗口仍然指的是以前版本的 Java。

然后，一旦我关闭了以管理员权限运行的所有 cmd 提示，新的 java 版本就会得到反映。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2013-05-07T06:24:24.750

如果您在 Windows Box 中安装了 cygwin，或者使用 UNIX Shell，那么

```
Issue bash#which java 
```

这将告诉您 java 是否在您的类路径中。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-03-06T06:01:14.937

如果您在用户变量下设置了环境变量（`JAVA_HOME`和`PATH`），命令提示符（以管理员身份运行）将无法识别 java。为此，您需要在系统变量下设置环境变量。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-03-17T02:57:06.640

试试这个：

系统变量：PATH = /bin 安装的 jdk 文件夹

[https://docs.oracle.com/javase/10/install/installation-jdk-and-jre-microsoft-windows-platforms.htm](https://docs.oracle.com/javase/10/install/installation-jdk-and-jre-microsoft-windows-platforms.htm)

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2021-04-09T09:13:15.700

对于仍然有问题的人来说，只是一些额外的信息，而不是编辑 java 的路径变量，删除路径的那部分（只有 java ！！）并创建一个指向 jdk/jre 的新变量。

这似乎对我有用。

# android - 将powermock添加到android测试项目时，apkbuilder发现重复文件

> ID：15796858
> 
> 赞同：5
> 
> 时间：2013-04-03T19:57:51.073
> 
> 标签：android, unit-testing, mockito, powermock

我正在尝试将 powermock-mockito 和 mockito 添加到 Android 测试项目中。我使用 android 命令行工具创建了 android 测试项目来创建 build.xml 和项目结构。我的 libs/ 目录中有以下 jars：

*   dexmaker-1.0.jar
*   dexmaker-mockito-1.0.jar
*   mockito-all-1.9.5.jar
*   powermock-mockito-1.5-full.jar

当我尝试使用 ant debug 构建项目时，出现以下错误：

```
[apkbuilder] Creating ProjectTests-debug-unaligned.apk and signing it with a debug key...
[apkbuilder] Found duplicate file for APK: mockito-extensions/org.mockito.plugins.MockMaker
[apkbuilder] Origin 1: /home/cmiller/Projects/android-project/ProjectTests/libs/powermock-mockito-1.5-full.jar
[apkbuilder] Origin 2: /home/cmiller/Projects/android-project/ProjectTests/libs/powermock-mockito-1.5-full.jar

BUILD FAILED
/home/cmiller/Applications/adt-bundle-linux/sdk/tools/ant/build.xml:951: The following error occurred while executing this line:
/home/cmiller/Applications/adt-bundle-linux/sdk/tools/ant/build.xml:962: The following error occurred while executing this line:
/home/cmiller/Applications/adt-bundle-linux/sdk/tools/ant/build.xml:319: com.android.sdklib.build.DuplicateFileException: Duplicate files at the same path inside the APK 
```

我不确定它是如何在单个 jar 中找到重复文件的。build.xml 文件根本没有被修改，我还没有创建 custom_rules.xml。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-29T18:49:01.787

Just remove the duplicate class `org.mockito.plugins.MockMaker` from one of the jars. I solved this by doing the following:

1.  Make backup copy of `powermock-mockito-1.5-full.jar`
2.  Rename `powermock-mockito-1.5-full.jar` to `powermock-mockito-1.5-full.zip`
3.  Unzip `powermock-mockito-1.5-full.zip`
4.  `rm -rf mockito-extensions`
5.  `jar cf powermock-mockito-1.5-full.jar META-INF/ org/`
6.  Put the updated jar in the libs folder.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T05:55:06.837

您是否检查过该文件是否真的在 jar 文件中重复？Afaik 可以在一个 zip 文件中包含两次相同的文件。在该文件中从 jar 中删除它可能会有所帮助。不知道它会如何到达那里。

# java - 访问精灵的像素

> ID：15796859
> 
> 赞同：0
> 
> 时间：2013-04-03T19:57:52.390
> 
> 标签：java, libgdx

我的问题很简单，但我找不到答案。1\. 你能在 libgdx 中访问精灵的像素值吗？假设我有 sprite `sprite`，如何获得它的 [0,0] RGBA 值。2.如果我想创建法线贴图，是从RGBA加载到Java数组更快，还是从sprite访问。

如果它在文档中，我真的很抱歉，我试图找到它但找不到。如果您确实在那里找到了它，有什么建议可以有效地搜索 java-docs 中的内容吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:12:27.503

好的，我找到了答案。看来解决方案是使用`Pixmap`而不是精灵。

# linux - 逐行读取txt文件并逐字符分割

> ID：15796860
> 
> 赞同：0
> 
> 时间：2013-04-03T19:57:55.483
> 
> 标签：linux, bash

我正在**编写 Bash 脚本**。我的问题：标题说明了一切。我想要纯 bash 代码。假设我在文本文件中有这个：

**格式：（名称；用户名；代码）**

```
John Doe;johnDoe;534092
John Dor;johnDor;923845
Joan Doe;Joan;232423 
```

我想知道如何按字符“;”分割字符串（行）。

*我需要知道这一点，因为我接下来要做的是：*我想阅读这个文本文件，并为文件中的每个名称创建一个新用户（与名称相同的主目录），密码应该是代码，默认值应该成为巴什。

**顺便说一句：**我正在使用“while read line ...”读取文件

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T20:04:13.987

```
while IFS=';' read fullName userName password; do
    useradd ... # $fullName, $userName, and $password are available
done < users.txt 
```

# sql - SQL Server 在重命名时出现列问题

> ID：15796866
> 
> 赞同：1
> 
> 时间：2013-04-03T19:58:30.367
> 
> 标签：sql, sql-server, sql-server-2005, ssms

我有一个表，在设计模式下，该列`[square brackets]`围绕列名。这是什么来的？我似乎无法删除它，它会导致问题。

![在此处输入图像描述](https://i.stack.imgur.com/6Wp5o.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-03T20:01:45.360

您的列名使用[保留关键字](http://msdn.microsoft.com/en-us/library/ms189822.aspx)。如果您不喜欢方括号，那么在很多情况下都需要它们，所以也许您应该考虑（a）使用非保留字（如 IsDefault）或（b）不使用设计器. 也许两者兼而有之。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-03T20:29:10.480

要摆脱括号，请...

```
Exec sp_rename '[schema].[table].[[DEFAULT]]]', 'BetterColumnName', 'Column'; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T20:02:34.430

在表格设计模式下，如果您将任何列名指定为 Default，它将自动被 [] 包围，因为 Default 是保留关键字。您可以通过右键单击该行并删除它来删除它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T20:01:10.820

通常情况下，该字段中包含特殊字符（如空格）。尝试仅将其设置为字符和/或数字，它应该会消失。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T20:11:17.400

不符合所有标识符规则的标识符必须在 Transact-SQL 语句中进行分隔。例如：

```
SELECT *
FROM [My Table]      --Identifier contains a space and uses a reserved keyword.
WHERE [order] = 10   --Identifier is a reserved keyword. 
```

参考：特定文档的 MSDN：http: [//msdn.microsoft.com/en-US/library/ms175874%28v=SQL.90%29.aspx](http://msdn.microsoft.com/en-US/library/ms175874%28v=SQL.90%29.aspx)

# php - 找出 SQL 数据库中值的“排名”

> ID：15796867
> 
> 赞同：0
> 
> 时间：2013-04-03T19:58:35.910
> 
> 标签：php, mysql, sql, performance, select

什么是具有最高性能的最简单方法，以确定包含 > 100.000 个条目的 MySQL 数据库中整数值的“等级”。

例如，我有一个表“分数”，其中有一列“值”

```
value 
50 
150 
10 
200 
180 
```

在这种情况下，150 的等级为 3，200 的等级为 1，10 的等级为 5，依此类推……

php 中用来确定特定值的“等级”的语句是什么样的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:02:39.337

如果您不关心关系，我会这样做：

```
SELECT COUNT(*)+1 AS rank FROM scores WHERE value > $myScore 
```

[在SQL Fiddle](http://sqlfiddle.com/#!2/4662c9/16/0)上查看它的实际效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:12:06.243

```
 select Value, RankNumber
from (
    select Value, @RankNumber:= @RankNumber +1 as RankNumber
    from table1, (select @RankNumber:=0) t
    order by Value desc
  ) A
where A.Value = 180 
```

**[DEMO](http://sqlfiddle.com/#!2/4662c9/6)**
对于性能问题，你可以运行一个测试，看看它是否能满足你的要求吧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T20:20:35.530

因为我不知道您是否想要行号或排名（包括平局），所以这里有两个使用`user-defined`变量的选项：

```
SELECT * 
FROM (
    SELECT value, 
      @rn:=@rn+1 RowNumber,
      @rank:=if((@value=value),@rank, @rn) rank,
      @value:=value
    FROM scores
      JOIN (SELECT @value:=-1, @rn:=0, @rank:=0) t
    ORDER BY value DESC
   ) t
WHERE value = 150 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/168c3/2)

这反映在其他 RDBMS 中`RANK()`。`ROW_NUMBER()`

# c# - 用户在 IE 10 上获得“拒绝访问”

> ID：15796872
> 
> 赞同：2
> 
> 时间：2013-04-03T19:58:50.930
> 
> 标签：c#, asp.net, asp.net-4.0, internet-explorer-10, access-denied

我有几个用户抱怨无法使用 IE 10 浏览器使用我的网站，但他们可以使用 IE 9 和 Chrome。他们的问题是他们能够登录，但是当单击任何其他选项卡时，他们会收到`AccessDenied`错误，这只有在用户尚未登录或我们无法检查存储在成功登录后可用的 cookie 中的用户信息时才有可能. 我想知道使用[Hanselman 博客](http://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx)中描述的修复程序是否可以解决我的问题。

我确实观察到我的生产服务器上`ie.browser`的`firefox.browser`文件与上面文章中描述的不一样。真正令人困惑的是，我能够在 IE 10 上登录并毫无问题地使用该网站，但我无法重现该问题？

请就什么可能是真正的问题以及我是否应该在不破坏其他任何东西的情况下应用修复程序提出建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T22:00:09.327

不是 JavaScript Access Denied 消息吗？例如，当您尝试访问您有引用但它不再存在的窗口对象时，可能会发生这种情况。我只在具有多个框架/iframe/弹出窗口（试图相互通信）的站点上看到这个问题。调试时几乎无法重现（使用 F12 -> 开发工具）。尝试包装您的代码以尝试捕获并放置

```
debugger; 
```

进入捕获。将调用调试器，您将能够检查问题。在您尝试之前，必须关闭 JavaScript 调试！

或者，您可以强制访问者将您的站点添加到受信任区域，如本[知识库文章](http://support.microsoft.com/kb/908356)中所述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T18:49:52.093

此问题已解决。是的，这是浏览器 IE 10 的一个问题，因为所有用户在打开“兼容性视图”时都可以正常工作。由于我的浏览器上的公司组策略设置，我的浏览器上启用了它们的兼容性视图设置，因此我无法重现该问题。
- 解决此问题的一种方法是应用修补程序或使用该方法更新 .browser 文件。
- 否则，您可以安装 .NET 4.5，我最终必须这样做，这也会更新 .browser 文件。由于您的应用程序以 .NET 4.0 为目标，因此它仍然可以按预期工作，除非您不会遇到任何问题。这也解决了网站的其他 CSS 问题。
谢谢你的建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-05T18:47:00.353

当我遇到类似问题时，更改“兼容性视图”对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-12T09:02:31.707

采用

```
setTimeout(function() {..},1000); 
```

有时在 IE8 中，document.domain 设置得不够快，我必须在超时后调用 iframe 函数才能使其工作 - 否则我会遇到同样的问题。

# visual-studio - TFS 如何使用 Affects & Affected By 链接类型？

> ID：15796875
> 
> 赞同：0
> 
> 时间：2013-04-03T19:59:00.767
> 
> 标签：visual-studio, tfs, tfs-workitem

在创建新的错误和任务时，我经常发现自己希望我有一个“由”链接类型，它表达了某些工作和新工单之间的因果关系。缺少这个特定的措辞，但在没有它的情况下，我总是考虑使用 Affects & Affected By。但是，我找不到有关如何使用这些链接类型以及系统是否将它们用于任何特定目的（如报告或查询等）的任何指导。

为此，我有两个问题：

*   我该如何表达这种因果关系？与 2005/2008 年的不伦不类、无方向的“相关”？
*   Affects & Affected By 的实际用途是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-30T17:21:27.860

这些是主要的工作项链接类型，具体取决于链接是在 WorkItem 和另一个 WorkItem 之间，还是在 WorkItem 和 Test Case 之间。

**工作项 -> 工作项**

*   家长/孩子
*   前任/继任者
*   有关的

**工作项 -> 测试用例**

*   测试/测试者
*   影响/受其影响
*   共享步骤/测试用例

您还可以创建自定义链接类型！

参考：[链接工作项和对象以支持可追溯性](http://msdn.microsoft.com/en-ca/library/vstudio/dd293534.aspx)

# c# - 在c#项目中编译c代码

> ID：15796880
> 
> 赞同：-2
> 
> 时间：2013-04-03T19:59:08.440
> 
> 标签：c#, .net, c

我想在 c# 项目中编译 c 代码（检查语法），或者我想知道如何在 c# 应用程序中使用 GCC 编译器

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T20:01:18.270

[Process.Start](http://msdn.microsoft.com/en-us/library/h6ak8zt5.aspx)将允许您运行任何应用程序，包括 GCC（或任何其他编译器/make 实用程序）并传递参数。

```
Process.Start("gcc.exe", "my.c"); 
```

您可能需要更多的命令行选项，而不仅仅是文件名（即输出/包含文件夹位置），并且如果 PATH 环境变量中不可用，则可能需要指定编译器的路径。

# ruby - 找出重复哈希值的所有键的快速方法

> ID：15796881
> 
> 赞同：1
> 
> 时间：2013-04-03T19:59:08.843
> 
> 标签：ruby, hash

我有一个哈希如下：

```
hash = {"Monday" => "a", "Tuesday" => "b", "Wednesday" => "c", "Thursday" => "b", "Friday" => "c"} 
```

我想得到一个新的哈希，它将是：

```
{"a" => "Monday", "b" => "Tuesday, Thursday" , "c" => "Wednesday, Friday"} 
```

`Hash#invert`只给出第一个值并丢失重复的值。有什么有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T20:23:47.470

```
hash.inject({}){ |h, (k,v)| (h[v] ||= []) << k; h }
=> {"a"=>["Monday"], "b"=>["Tuesday", "Thursday"], "c"=>["Wednesday", "Friday"]} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T20:02:02.117

```
result = hash.inject({}){|m, kv| m[kv.last] ||= []; m[kv.last] << kv.first; m} 
```

这将为您提供以下形式的哈希：

```
{"a" => ["Monday"], "b" => ["Tuesday", "Thursday"] , "c" => ["Wednesday", "Friday"] } 
```

如果您绝对需要它们作为逗号分隔的列表，您可以在之后加入它们：

```
result = Hash(*result.map{|k, v| [k, v.join(', ')]}) 
```

或者在第一次迭代时附加它们：

```
result = hash.inject({}) do |m, kv| 
  if m[kv.last]
    m[kv.last] << ", " 
  else
    m[kv.last] = ""
  end
  m[kv.last] << kv.first
  m
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T20:03:54.667

[使用来自Facets](http://rubyworks.github.com/facets/)的几个抽象的功能方法：

```
require 'facets'
hash.map_by { |k, v| [v, k] }.mash { |k, vs| [k, vs.join(", ")] }
#=> {"a"=>["Monday"], "b"=>["Tuesday", "Thursday"], "c"=>["Wednesday", "Friday"]} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T20:11:23.973

`each_with_object`是一种替代方法，不确定我是否可以以某种方式摆脱三元 . . .

```
 hash.each_with_object({}) { |kv,new_hash| k,v = kv; new_hash[v] = new_hash[v] ? new_hash[v] + ',' + k : k}
 => {"a"=>"Monday", "b"=>"Tuesday,Thursday", "c"=>"Wednesday,Friday"} 
```

# c++ - 将 long long 类型的数量传递给函数（引用与值）（C++）

> ID：15796885
> 
> 赞同：1
> 
> 时间：2013-04-03T19:59:15.590
> 
> 标签：c++, parameter-passing, long-integer

我不熟悉使用不是双精度数或整数的数字。我知道传递 int 或 double 应该按值传递（考虑到内存/速度），但我不确定如何将 long long 数据类型传递给函数。

基本上，一个 long long 数字是否足够大，以至于通过 const 引用传递它比通过值传递它更快？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:07:50.427

考虑到 long long 数字需要 64 位并且差异很小，按值传递应该没问题。

通常，对于一个类或结构，通过 const 引用传递是一种有效或更好的方法，但是当类或结构的大小很小时，事情就变得棘手了，因为引用可能会引入额外的内存寻址和访问成本。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-03T20:10:10.687

它是否更快取决于您的编译器和计算机体系结构。`long long`在编译器上并不总是可用 - 尤其是 32 位编译器。一般来说，我会说您可能不会注意到速度差异，除非您经常调用该*函数*。

如果它的大小接近 double 或 float 也取决于您的编译器。但是任何计算错误的可能性在两者上都同样大`long long`-`double`只有错误的大小不同（如果有的话）。

对于您所描述的内容-我会说按价值传递。本质上，我建议仅在您需要修改值并且需要将该更改传播回调用函数时才通过引用传递 - 而无需返回值。

# opencv - 在 opencv 2.4.2 中使用 EM

> ID：15796886
> 
> 赞同：0
> 
> 时间：2013-04-03T19:59:18.477
> 
> 标签：opencv

我在寻求帮助。由于 EM 类，我无法构建我的项目。我使用 opencv 2.4.2

我找不到问题出在哪里。有人可以建议吗？

```
cv::TermCriteria Termination;
Termination.type=CV_TERMCRIT_ITER;
Termination.maxCount=num_numIter;
cv::EM model=cv::EM(NClusters,cv::EM::COV_MAT_SPHERICAL,Termination);
model.train(groupped_one_person_features); 
```

最后一行得到 LINK ERR，我不知道如何创建 EM 类的对象。NClusters 是 int，还有什么问题？

我用过：`#include "opencv2/ml/ml.hpp"`

此代码会导致以下错误：

> 2 错误 LNK2019: 无法解析的外部符号“public: virtual bool __cdecl cv::EM::train(class cv::_InputArray const &,class cv::_OutputArray const &,class cv::_OutputArray const &,class cv::_OutputArray const &)" (?train@EM@cv@@UEAA_NAEBV_InputArray@2@AEBV_OutputArray@2@11@Z) 在函数 "void __cdecl compute_LBPH_patterns_EM(struct ArrayData *,struct Pattern *,int,int)" (?compute_LBPH_patterns_EM@ @YAXPEAUArrayData@@PEAUPattern@@HH@Z) D:\Work\EBIS2012CPlusPlus\Imet_v1.0_x64\Imet_v1.0_x64\compute_patterns.obj AND Error 1 error LNK2019: unresolved external symbol "public: virtual __cdecl cv::EM::~ EM(void)" (??1EM@cv@@UEAA@XZ) 在函数“void __cdecl compute_LBPH_patterns_EM(struct ArrayData *,struct Pattern *,int,int)”中引用(?compute_LBPH_patterns_EM@@YAXPEAUArrayData@@PEAUPattern@@HH@Z) D:\Work\EBIS2012CPlusPlus\Imet_v1.0_x64\Imet_v1.0_x64\compute_patterns.obj AND Error 3 error LNK2019: unresolved external symbol "public: __cdecl cv::EM ::EM(int,int,class cv::TermCriteria const &)" (??0EM@cv@@QEAA@HHAEBVTermCriteria@1@@Z) 在函数“void __cdecl compute_LBPH_patterns_EM(struct ArrayData *,struct Pattern *, int,int)" (?compute_LBPH_patterns_EM@@YAXPEAUArrayData@@PEAUPattern@@HH@Z) D:\Work\EBIS2012CPlusPlus\Imet_v1.0_x64\Imet_v1.0_x64\compute_patterns.obj(??0EM@cv@@QEAA@HHAEBVTermCriteria@1@@Z) 在函数“void __cdecl compute_LBPH_patterns_EM(struct ArrayData *,struct Pattern *,int,int)”(?compute_LBPH_patterns_EM@@YAXPEAUArrayData@@PEAUPattern@@HH) 中引用@Z) D:\Work\EBIS2012CPlusPlus\Imet_v1.0_x64\Imet_v1.0_x64\compute_patterns.obj(??0EM@cv@@QEAA@HHAEBVTermCriteria@1@@Z) 在函数“void __cdecl compute_LBPH_patterns_EM(struct ArrayData *,struct Pattern *,int,int)”(?compute_LBPH_patterns_EM@@YAXPEAUArrayData@@PEAUPattern@@HH) 中引用@Z) D:\Work\EBIS2012CPlusPlus\Imet_v1.0_x64\Imet_v1.0_x64\compute_patterns.obj

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:48:29.500

尝试使用这个-

```
using namespace cv;
EM em_model;
const TermCriteria term_crit = TermCriteria(TermCriteria::COUNT+TermCriteria::EPS, 
                                                           100, FLT_EPSILON);
em_model = EM(clustercount, EM::COV_MAT_DIAGONAL, term_crit);
em_model.train(samples, loghood, labels, probs); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-16T03:07:00.217

干得好

```
#include <opencv2\opencv.hpp>

using namespace cv;             //use the opencv namespace

EM em_model;                    //EM model

int main()
{
    //get samples
    Mat samples;

    //define and crate ternmination critaria
    int type     = TermCriteria::COUNT + TermCriteria::EPS;     
    int maxCount = EM::DEFAULT_MAX_ITERS;
    TermCriteria termCritaria = TermCriteria(type, maxCount, FLT_EPSILON);

    //define EM parameters and instantiate model
    int nclusters      =  EM::DEFAULT_NCLUSTERS;
    int covMatrix_type =  EM::COV_MAT_DEFAULT;
    em_model = EM(nclusters, covMatrix_type, termCritaria);

    //train EM model
    em_model.train(samples);

    return 0;
} 
```

# c# - WPF 应用程序读取 ACAD 3D

> ID：15796890
> 
> 赞同：0
> 
> 时间：2013-04-03T19:59:32.747
> 
> 标签：c#, wpf, autocad

我正在制作一个 WPF 应用程序，我想在其中打开 Autocad 文件并获取 3Dsolids 的尺寸（宽度、高度等）。

经过几天的麻烦，我终于设法打开文件并阅读它，现在唯一的问题是我无法获得 3D 实体的尺寸。

```
using Autodesk.AutoCAD.ApplicationServices;
using Autodesk.AutoCAD.DatabaseServices;
using Autodesk.AutoCAD.Runtime;

using acadApp = Autodesk.AutoCAD.ApplicationServices.Application;
using System.Runtime.InteropServices;
using Autodesk.AutoCAD.Interop;
using Autodesk.AutoCAD.Interop.Common; 

namespace WpfApplication2
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        private static IAcadApplication oAcadApp = null;
        private static string sAcadID = "AutoCAD.Application.18";
        AcadDocument doc;        

        public MainWindow()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, RoutedEventArgs e)
        {

            try  //get a running AutoCAD instance if avaialbale
            {
                oAcadApp = (IAcadApplication)System.Runtime.InteropServices.Marshal.GetActiveObject(sAcadID);
                doc = oAcadApp.Documents.Open(@"C:\Users\Bernard\Desktop\Drawing2.dwg", false);
                oAcadApp.Visible = true;
            }
            catch (System.Exception) //none found so start a new instance
            {
                System.Type AcadProg = System.Type.GetTypeFromProgID(sAcadID);
                oAcadApp = (IAcadApplication)System.Activator.CreateInstance(AcadProg);
                if (this.IsLoaded)
                {
                    doc = oAcadApp.Documents.Open(@"C:\Users\Bernard\Desktop\Drawing2.dwg", false);
                    oAcadApp.Visible = true;
                }
            }            
        }

        private void button2_Click(object sender, RoutedEventArgs e)
        {
            AcadModelSpace modelspace = doc.ModelSpace;
            MessageBox.Show("aantal objecten = " + modelspace.Count + "");          

            for (int i = 0; i < modelspace.Count; i++)
            {
                AcadEntity entity = modelspace.Item(i);
                MessageBox.Show("objecttype = " + entity.EntityType);
                if (entity.EntityType == 3)
                {
                    Acad3DSolid solid = (Acad3DSolid)entity;
                }
            }
        }
    }
} 
```

Acad3DSolid 实体 = (Acad3DSolid) 实体；这给了我 3DSolid，但我找不到像 solid.Width 之类的东西。

有谁有想法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:40:01.273

我想你想要函数 GetBoundingBox。

# unit-testing - CakePHP 在测试用例中使用事务 (getDataSource)

> ID：15796896
> 
> 赞同：1
> 
> 时间：2013-04-03T19:59:48.410
> 
> 标签：unit-testing, cakephp, testing

在 CakePHP 2.2.5 中有一个组件来处理我的应用程序的付款。我可以从浏览器/常规会话中成功运行组件内的函数“addPayment”，但是当我在测试用例中运行它时它失败了。

`$this->controller->Product->getDataSource();`在组件内初始化事务时出现错误“尝试获取非对象的属性” 。

似乎`$this->controller`或未`$this->controller->Product`在组件中设置。有什么想法可以解决它以使其`$this->controller->Product->getDataSource();`有效吗？

**应用程序/测试/案例/控制器/组件/财务组件：**

```
App::uses('ComponentCollection', 'Controller');
App::uses('Component', 'Controller');
App::uses('FinanceComponent', 'Controller/Component');

class TestFinanceController extends Controller {
    public $uses = array('Product');
}

class FinanceComponentTest extends CakeTestCase {

    public $Finance = null;
    public $Controller = null;

/**
 * setUp method
 *
 * @return void
 */
    public function setUp() {
        parent::setUp();

        $CakeRequest = new CakeRequest();
        $CakeResponse = new CakeResponse();
        $this->Controller = new TestFinanceController($CakeRequest, $CakeResponse);

        $Collection = new ComponentCollection();
        $this->Finance = new FinanceComponent($Collection);
        $this->Finance->startup($this->Controller);
    }

/**
 * tearDown method
 *
 * @return void
 */
    public function tearDown() {
        unset($this->Finance);
        unset($this->Controller);

        parent::tearDown();
    }

/**
 * testAddPayment method
 *
 * @return void
 */
    public function testAddPayment() {
        // Get products
        $products = $this->Controller->Product->find('all', array(
            'limit' => 2,
            'offset' => rand(2,6)
        ));
        $this->assertEquals(2, count($products));

    // hidden code to shorten example...

        // Test buying from main store
        $values = array(
            // hidden code to shorten example...
        );

        $payment = call_user_func_array(array($this->Finance, 'addPayment'), array_values($values));
    }
} 
```

**应用程序/控制器/组件/FinanceComponent.php：**

```
class FinanceComponent extends Component {

    /**
     * Controller instance reference
     *
     * @var object
     */
    public $controller;
    public $dataSource;

    public $mainUserId = 1;
    public $mainStoreId = 1;

    /**
     * Constructor
     */
    public function __construct(ComponentCollection $collection, $settings = array()) {
        parent::__construct($collection, $settings);
        $this->controller = $collection->getController();
    }

    public function addPayment($amount, $amountTax, $userId, $products, $storeId, $transactionId = null, $affiliateUserId = null) {
        // Start Transaction
        $this->__transactionStart();

        try {
                 // hidden code to shorten example...

            // Commit Transaction
            $this->__transactionCommit();

            return array(
                'status' => 'success'
            );

        } catch (Exception $e) {
            // Rollback Transaction
            $this->__transactionRollback();

            return array(
                'status' => 'error',
                'message' => 'Error ' . $e->getLine() . ': ' . $e->getMessage()
            );
        }
    }

    protected function __transactionStart() {
        $this->dataSource = $this->controller->Product->getDataSource();
        $this->dataSource->begin();
    }

    protected function __transactionRollback() {
        $this->dataSource->rollback();
    }

    protected function __transactionCommit() {
        $this->dataSource->commit();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T21:16:59.230

CakePHP 2.x is using 'lazy loading' for a lot of things, it may be possible that the Model is not loaded because of that:

[http://book.cakephp.org/2.0/en/appendices/2-0-migration-guide.html#models](http://book.cakephp.org/2.0/en/appendices/2-0-migration-guide.html#models)

It may be worth to have a look at the CakePHP test cases for the PaginatorComponent and look for examples:

[https://github.com/cakephp/cakephp/blob/2.2.5/lib/Cake/Test/Case/Controller/Component/PaginatorComponentTest.php#L334](https://github.com/cakephp/cakephp/blob/2.2.5/lib/Cake/Test/Case/Controller/Component/PaginatorComponentTest.php#L334)

Probably, you'll need to manually call `Controller::constructClasses();` in order to properly initialise the components and models.

# android - 无法在 windows 7 上将 sony acro s phone 附加到 adb

> ID：15796900
> 
> 赞同：0
> 
> 时间：2013-04-03T20:00:17.077
> 
> 标签：android

阅读有关如何执行此操作的大量信息，包括所有简单的建议，例如“在手机上启用调试”或“使用供应商驱动程序”等。

1.  询问没有遇到问题的人不要在这里发帖。
2.  [来自http://www.sonymobile.com/](http://www.sonymobile.com/)的供应商驱动程序不是 dll 的形式，所以我不能直接切换到它。它提供了对 adb 没有帮助的 PC Companion。
3.  当我使用谷歌 USB 驱动系统告诉我它不能使用。
4.  当我使用[http://developer.sonymobile.com/downloads/drivers/xperia-acro-s-driver-for-ics/](http://developer.sonymobile.com/downloads/drivers/xperia-acro-s-driver-for-ics/)它对我也没有帮助。
5.  有些人[无法在 Eclipse 中检测到 Sony Xperia](https://stackoverflow.com/questions/12053720/cannot-detect-sony-xperia-in-eclipse/15657558#15657558)会说他们可以编辑 google usb 驱动程序文件以使其可运行，但在这种情况下对我来说太难了 - Windows 7 有详细的事件日志来查找其中相关的内容。（在在驱动程序安装期间寻找正确的设备 ID 字符串）。

我的要求是在这里发布真正有用的建议，最好去 Skype alexinspire 在那里我可以与团队查看器共享我的机器来做清楚的事情。我真的有麻烦了。认为你能理解我。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T15:26:29.433

我希望我在聚会上不会太晚。请按照以下步骤操作，这对我有用：

附加您的设备，转到设备管理器，在其他设备中有您的移动设备（已卸载的设备）右键单击设备->选择属性转到详细信息->属性->选择硬件ID，复制它...。

现在在您的 android sdk 文件夹中搜索文件名“android_winusb.inf”或直接转到**\android-sdk\extras\google\usb_driver\android_winusb.inf** 在记事本中打开此文件**（具有管理员权限）** 并添加您的这种方式的硬件id

```
;Sony Acro S
%CompositeAdbInterface% = USB_Install, "enter_your_device_Hardware_ID"(without quotes) 
```

[![在此处输入图像描述](https://i.stack.imgur.com/Va48a.png)](https://i.stack.imgur.com/Va48a.png)

现在回到您的设备驱动程序安装，并以这种方式从文件中搜索 **Android\android-sdk\extras\google\usb_driver**

它会给你警告，无论如何都要安装它..你已经完成了。它现在应该出现在你的日食中。

**注意：此解决方案对我有用，我不对您的数据或手机造成的任何损失负责。**

# c - 无法释放内存（断言错误）

> ID：15796902
> 
> 赞同：0
> 
> 时间：2013-04-03T20:00:19.830
> 
> 标签：c, pointers, free

当我尝试释放我的循环缓冲区时，我收到一个断言错误（表达式：crtisvalidheapppointer）。为什么会这样？

相关结构：

```
typedef struct quote {
    unsigned int seconds;
    double rate;
} quote;

typedef struct cbuf {
    unsigned int max;
    unsigned int start;
    unsigned int end;
    unsigned int size;
    quote *quotes;
} cbuf; 
```

malloc 和释放的代码块：

```
#define INITIAL_SIZE 10
static cbuf cb1 = {INITIAL_SIZE, 0, 0, 0, NULL};
cb1.quotes = (quote*)malloc(INITIAL_SIZE * sizeof(quote));
if(cb1.quotes == NULL)
{
    printf("Error - memory allocation failed.");
    exit(1);
}

free(&cb1); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T20:02:22.880

```
free(&cb1); 
```

您正在尝试释放`cb1`驻留的内存，但是

```
static cbuf cb1 = {INITIAL_SIZE, 0, 0, 0, NULL}; 
```

那不是`malloc`编辑。

```
free(cb1.quotes) 
```

是你需要释放的东西。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T20:02:13.197

你不能释放你没有分配的东西：

```
free(&cb1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T20:42:00.330

您唯一需要记住的是：您只能释放动态分配的内存

在您的情况下，您已为“cb1.quotes”而不是为 cb1 动态分配内存，因此您必须释放 cb1.quotes 而不是 cb1。

带着敬意

希姆斯

# java - 从文件中加载对象的 ArrayList

> ID：15796905
> 
> 赞同：0
> 
> 时间：2013-04-03T20:00:35.563
> 
> 标签：java, object, arraylist, load, save

我一直在尝试在 Java 中保存和加载对象，但我在加载文件时遇到了一些问题。我在这里要做的是加载一个名为 Employee 的对象的 ArrayList，我已经对其进行了序列化。当我尝试加载它时，我仍然遇到一堵红色的错误墙。我究竟做错了什么？这是我的代码：

```
try (FileInputStream filStrom = new FileInputStream(filpeker);
                        ObjectInputStream objektStrom = new ObjectInputStream(filStrom))
                    {
                    employeelist = (ArrayList<Employee>)objektStrom.readObject();
                    objektStrom.close();
                } catch (IOException | ClassNotFoundException e) {
                    JOptionPane.showMessageDialog(null, "Feil under lesing av fil! " + e.getMessage());
                    e.printStackTrace();
                } 
```

我得到的错误是：

```
java.io.InvalidClassException: ovinger9.Employee; no valid constructor
at java.io.ObjectStreamClass$ExceptionInfo.newInvalidClassException(Unknown Source)
at java.io.ObjectStreamClass.checkDeserialize(Unknown Source)
at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
at java.io.ObjectInputStream.readObject0(Unknown Source)
at java.io.ObjectInputStream.readObject(Unknown Source)
at java.util.ArrayList.readObject(Unknown Source)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at java.io.ObjectStreamClass.invokeReadObject(Unknown Source)
at java.io.ObjectInputStream.readSerialData(Unknown Source)
at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
at java.io.ObjectInputStream.readObject0(Unknown Source)
at java.io.ObjectInputStream.readObject(Unknown Source)
at ovinger9.EmployeeGUI$2.actionPerformed(EmployeeGUI.java:135)
at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
at java.awt.Component.processMouseEvent(Unknown Source)
at javax.swing.JComponent.processMouseEvent(Unknown Source)
at java.awt.Component.processEvent(Unknown Source)
at java.awt.Container.processEvent(Unknown Source)
at java.awt.Component.dispatchEventImpl(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Window.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
at java.awt.EventQueue.access$200(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue$4.run(Unknown Source)
at java.awt.EventQueue$4.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue.dispatchEvent(Unknown Source)
at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T20:09:09.020

向类添加不带参数的公共构造函数`ovinger9.Employee`（除了您已经拥有的另一个构造函数）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T20:09:54.367

如果您的`Employee`类扩展了一个 not`Serializable`的类，并且超类没有零参数构造函数，则可能会发生这种情况，如[`java.io.Serializable`](http://docs.oracle.com/javase/7/docs/api/java/io/Serializable.html)文档中所述。要解决它，请将您的超类声明为`Serializable`，或向超类添加零参数构造函数。

# angularjs - ng-repeat + ng-click 没有按预期工作

> ID：15796908
> 
> 赞同：4
> 
> 时间：2013-04-03T20:00:37.677
> 
> 标签：angularjs

似乎这是一个非常常见的问题。替换发生了，但是 ng-click 无法单击（或者它似乎没有被调用）。有人能告诉我为什么会失败吗？

```
<ul>
     <li ng-repeat="color in colors"> 
         <a ng-click="chooseColor({{$index}})">{{color.name}}</a>
     </li>
</ul> 
```

这是小提琴。

它似乎是 {{$index}}。如果我用静态数字替换它，它可以工作。

注意：找到[这个问题](https://stackoverflow.com/questions/14539038/ngrepeat-does-not-work-inside-angularui-bootstrap-dialog)- 但它没有帮助。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-03T20:05:30.307

这些`{{}}`位用于模板（插值）。这应该适合你：

```
ng-click="chooseColor($index)" 
```

该`ng-click`指令正在寻找~~真正的 JavaScript 代码~~一个[Angular Expression](http://docs.angularjs.org/guide/expression)，而不是它需要插入的文本。

# bash - TMUX：在显示命令提示符时显示显示窗格？

> ID：15796909
> 
> 赞同：0
> 
> 时间：2013-04-03T20:00:38.597
> 
> 标签：bash, unix, tmux

tmux 允许我们这样做吗？

我正在尝试配置的是一个命令行，您将在其中输入您打算移动到某处的窗格，而非常不幸的是，一旦您在“显示窗格”显示期间按下任何键就会将其关闭。在输入命令期间能够看到窗格的显示窗格枚举将非常方便。

我使用命令脚本完成的是指定要加入的窗口。由于 tmux 不允许我们将窗格加入到它已经在其中的同一窗口中，因此我正在编写脚本以将窗格从窗口中断开。我相信我需要使用 run-shell 来编写脚本，但这与是否有可能以某种方式让它在命令提示符期间显示窗格索引的问题无关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:44:18.687

如果没有这个特性，仍然可以让 shell 本身深入了解 Tmux 上下文。看到[这个答案](https://superuser.com/a/385890/98199)。这是一个功能齐全的解决方法，尽管可能不如 tmux 功能调整那么优雅。

事实证明，这项设置 unix 环境的任务绝对是一项艰巨的任务。我会很有效率，我不知道该怎么做。

# jquery - jQuery动画到可变高度

> ID：15796910
> 
> 赞同：0
> 
> 时间：2013-04-03T20:00:38.723
> 
> 标签：jquery, variables

我想要折叠上方的按钮，上面写着“向下滚动！” 点击时。我希望它使整个浏览器的高度向下动画。因为人们有不同的屏幕分辨率。我想使用一个变量。然而这是完全不可能的。

下面的代码有效，但仅设置高度为 800 像素。

相反，我需要它与`var hheight`.

我整晚都在搜索stackoverflow，只有很少的线索可循，也没有真正的解决方案。

这是有效的：

```
function jqUpdateSize(){
    // Get the dimensions of the viewport
    var width = jQuery(window).width();
    var hheight = jQuery(window).height();

    jQuery('#jqWidth').html(width);
    jQuery('#jqHeight').html(hheight);
};
jQuery(document).ready(jqUpdateSize);    // When the page first loads
jQuery(window).resize(jqUpdateSize);     // When the browser changes size

jQuery(document).ready(function() {
    jQuery(".my-btn").click(function(event){
    jQuery('html, body').animate({scrollTop:'+=' + 800 + 'px'}, '800');
    });
}); 
```

以下不起作用：

```
jQuery('html, body').animate({scrollTop:'+=' + hheight+ 'px'}, '800'); 
```

希望有人知道如何处理这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:09:01.030

你需要一个匿名函数`ready()`和`resize()`

所以，

```
jQuery(document).ready(function(){jqUpdateSize();});
jQuery(window).resize(function(){jqUpdateSize();}); 
```

否则，您的`jqUpdateSize`函数永远不会被调用，并且您的变量`hheight`中没有任何内容

最佳做法是将所有这些都放在`document.ready()`

像这样：

```
jQuery(document).ready(function() {
    jqUpdateSize();
    jQuery(window).resize(function(){jqUpdateSize();});
    jQuery(".my-btn").click(function(event){
        jQuery('html, body').animate({scrollTop:'+=' + hheight + 'px'}, '800');
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:12:45.087

```
var hheight = jQuery(window).height();
jQuery('html, body').animate({scrollTop:'+=' + hheight+ 'px'}, '800'); 
```

这项工作很好---[演示](http://jsfiddle.net/DXj87/4/)

尝试将其 `jQuery(window).resize(jqUpdateSize);`移入`ready`

它应该看起来像这样

```
jQuery(document).ready(function() {
    jQuery(window).resize(jqUpdateSize);
    jQuery(".my-btn").click(function(event){
    jQuery('html, body').animate({scrollTop:'+=' + 800 + 'px'}, '800');
    });
}); 
```

# git - Git：处理来自已删除远程的远程分支

> ID：15796921
> 
> 赞同：0
> 
> 时间：2013-04-03T20:01:03.580
> 
> 标签：git, git-remote

1.  `git branch -a`节目`remotes/team/master`和`remotes/team/my-branch`

2.  `git remote rm team`说`"error: Could not remove config section 'remote.team'"`（因为我用文本编辑器编辑了配置文件）。

既然`team`遥控器不见了，我该如何删除这些（本地）远程分支？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:04:05.157

要删除远程跟踪分支：

```
git branch -rd team/master 
```

`-r`是远程的意思。所以`-rd`意味着删除远程跟踪分支。

要自动远程任何不再有上游分支的远程跟踪分支：

```
git remote prune 
```

# android - 在Android中连续禁用Gridview位置

> ID：15796923
> 
> 赞同：1
> 
> 时间：2013-04-03T20:01:08.757
> 
> 标签：android, android-gridview

我已尽我最大的努力在包括 SO 在内的所有地方寻找解决方案，但似乎我无处可去，我决定问这个问题，看看我是否能找到能帮助我解决这个问题的人。好的，这就是我想要做的：

我有一个 4 列和 4 行的 GridView。GridView 使用 imageAdapter 填充图像。当连续选择一个图像时，该位置的图像会更改为另一个图像，当再次选择（取消选择）时，它会变回前一个图像。那也行。我现在要做的是，当一个位置被选中时，我想禁用所有其他位置，直到再次单击它来取消选择所选位置。本质上，我想确保不能同时选择两个位置。我已经尽力了，但现在这似乎有点不可能。谁能告诉我我做错了什么。当用户选择一个位置时，其他人不会连续被禁用。以下是我的代码： 任何帮助将不胜感激。感谢您的预期帮助。

私人 OnItemClickListener onGridItemClickListener = new OnItemClickListener() {

```
 public void onItemClick(AdapterView<?> parent, View v, int position, long id) {

     //if (v == null) return;  //Just added 03/04/2013

    int rowOfSelectedItem =  getRowInGrid(position);
    Log.i(TAG, "Selected View is : "+v.getId()+" (Id arg = "+id+")- Position is "+ position+" Row is = "+rowOfSelectedItem);

    switch(rowOfSelectedItem){
    case 1:
        //iterate through first row items and check if any of the items was selected before
        for(int x=2; x < 4; x++){
            //
            Object tag = ((ImageView)gridView.getChildAt(x)).getTag();
            Log.i(TAG, "This is : "+ x + "TAG is " + tag);
            if(tag ==null || !Boolean.valueOf(tag.toString())){
                //disable clicking so the user cannot select another image on same row
                ((ImageView)gridView.getChildAt(x)).setClickable(false);
                ((ImageView)gridView.getChildAt(x)).setEnabled(false);
                Log.i(TAG, "This is : "+ x + tag);

            }

        }
        break;
    case 2:

        for(int x=4; x < 8; x++){
            //
            Object tag = ((ImageView)gridView.getChildAt(x)).getTag(); 
            if(tag ==null || !Boolean.valueOf(tag.toString())){
                //disable clicking so the user cannot select another image on same row
                ((ImageView)gridView.getChildAt(x)).setClickable(false);
                ((ImageView)gridView.getChildAt(x)).setEnabled(false);

            }
        }
        break;
    case 3:
        for(int x=8; x < 12; x++){
            //
            Object tag = ((ImageView)gridView.getChildAt(x)).getTag(); 
            if(tag ==null || !Boolean.valueOf(tag.toString())){
                //disable clicking so the user cannot select another image on same row
                ((ImageView)gridView.getChildAt(x)).setClickable(false);
                ((ImageView)gridView.getChildAt(x)).setEnabled(false);

            }
        }
        break;
    case 4:
        for(int x=12; x < 16; x++){
            //
            Object tag = ((ImageView)gridView.getChildAt(x)).getTag(); 
            if(tag ==null || !Boolean.valueOf(tag.toString())){
                //disable clicking so the user cannot select another image on same row
                ((ImageView)gridView.getChildAt(x)).setClickable(false);
                ((ImageView)gridView.getChildAt(x)).setEnabled(false);

            }
        }
        break;
    } 
```

私有 int getRowInGrid（int 位置）{

```
 if(position <= 3){
        return 1;
    }
    else if(position <=7){
        return 2;
    }
    else if(position <= 11){
        return 3;
    }
    else if(position <= 15){
        return 4;
    }
    else{ return -1;}
} 
```

# angularjs - Angularjs - 如何在服务中设置模块值？

> ID：15796924
> 
> 赞同：20
> 
> 时间：2013-04-03T20:01:10.270
> 
> 标签：angularjs, angularjs-service

我有一个 Angular 应用程序的以下服务模块。

```
angular.module('rs.services', [])
  .value('uid', null)

  .factory('login', ['$http', 'uid', function($http, uid) {
    return function(user, pass) {
      var p = $http.post('/login', {"user": user, "pass": pass})
        .success(function(data, status, headers, config) {
          // set uid
        })
        .error(function(data, status, headers, config) {
          // do something
        });

      return p;
    }
  }]);

  // a service that uses uid to authenticate the request
  .factory('userPrefs' ['$http', 'uid', function($http, uid) {
    return function() {
      return $http.post('/user/prefs', {"uid": uid});
    }
  }]); 
```

用户登录后，`login`服务返回一个唯一的会话 id，我想设置模块的`uid`值以供其他服务调用参考。

我很确定上面的代码不起作用，因为我不能在模块的配置阶段使用值作为依赖项。如何在服务中设置`uid`值`login`并在模块内的其他服务中访问它，或者如果这不可能，我如何创建可以由这些服务设置/获取的值？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-03T20:12:23.087

作为原语的值并不意味着保存在应用程序过程中发生变化的信息。您需要将 UID 值设为*对象*或标准服务。作为一个对象：

```
.value( 'uid', {} );

.factory('userPrefs' ['$http', 'uid', function($http, uid) {
  // ...
  uid.id = response.data.uid;
  // ...
}); 
```

您可能还希望将所有与用户相关的内容放入单个服务中，而不是三个。有关更多信息，请参阅此其他 SO 帖子：[https ://stackoverflow.com/a/14206567/259038](https://stackoverflow.com/a/14206567/259038)

# c++ - 使用 SURF 将帧与多个图像进行比较给了我相同的结果

> ID：15796926
> 
> 赞同：0
> 
> 时间：2013-04-03T20:01:11.183
> 
> 标签：c++, opencv, surf

我正在使用带有visual c ++ 2010的openCV 2.44我想使用网络摄像头识别几个对象并在找到对象时打印对象的名称，但是当我与框架进行比较时，我得到相同的值，用于与obj1,2进行帧和图像之间的每个比较,3,4,5（good_matches.size(),good_matches1.size().. 具有相同的值）你能告诉我出了什么问题以及我如何加快算法速度

```
#include <opencv2\imgproc\imgproc_c.h>
#include <stdio.h>
#include <math.h>
#include <opencv\highgui.h>
#include <opencv\cv.h>
#include <opencv2/features2d/features2d.hpp>
#include <opencv2/calib3d/calib3d.hpp>
#include <opencv2/core/core.hpp>
#include <opencv2/nonfree/features2d.hpp>
#include <opencv2/legacy/legacy.hpp>
using namespace cv;

#define nimg 5

int main()
{
    Mat object =  imread( "aa.jpg", CV_LOAD_IMAGE_GRAYSCALE );
    Mat object1 = imread( "bb.jpg", CV_LOAD_IMAGE_GRAYSCALE );
    Mat object2 = imread( "bb.jpg", CV_LOAD_IMAGE_GRAYSCALE );
    Mat object3 = imread( "bb.jpg", CV_LOAD_IMAGE_GRAYSCALE );
    Mat object4 = imread( "bb.jpg", CV_LOAD_IMAGE_GRAYSCALE );

 /*   if( !object.data )
    {
        std::cout<< "Error reading object " << std::endl;
        return -1;
    }
*/

    //Detect the keypoints using SURF Detector
    int minHessian = 500;

    SurfFeatureDetector detector( minHessian );

    std::vector<KeyPoint> kp_object;
    std::vector<KeyPoint> kp_object1;
    std::vector<KeyPoint> kp_object2;
    std::vector<KeyPoint> kp_object3;
    std::vector<KeyPoint> kp_object4;

    detector.detect( object,  kp_object );
    detector.detect( object1, kp_object1 );
    detector.detect( object2, kp_object2 );
    detector.detect( object3, kp_object3 );
    detector.detect( object4, kp_object4 );

    //Calculate descriptors (feature vectors)
    SurfDescriptorExtractor extractor;
    Mat des_object;
    Mat des_object1;
    Mat des_object2;
    Mat des_object3;
    Mat des_object4;

    extractor.compute( object, kp_object, des_object );
    extractor.compute( object1, kp_object1, des_object1 );
    extractor.compute( object2, kp_object2, des_object2 );
    extractor.compute( object3, kp_object3, des_object3 );
    extractor.compute( object4, kp_object4, des_object4 );

    FlannBasedMatcher matcher;

    VideoCapture cap(1);

    namedWindow("Good Matches");

    std::vector<Point2f> obj_corners(4);

    //Get the corners from the object
    obj_corners[0] = cvPoint(0,0);
    obj_corners[1] = cvPoint( object.cols, 0 );
    obj_corners[2] = cvPoint( object.cols, object.rows );
    obj_corners[3] = cvPoint( 0, object.rows );

    char key = 'a';
    int framecount = 0;
    Mat frame;

 Mat des_image, img_matches;

 char vect[nimg];
 char contor;
 char ok, ko;

    while (1)
    {

        cap >> frame;

        if (framecount < 5)
        {
            framecount++;
            continue;
        }

        std::vector<KeyPoint> kp_image;

        std::vector<vector<DMatch > > matches;
        std::vector<vector<DMatch > > matches1;
        std::vector<vector<DMatch > > matches2;
        std::vector<vector<DMatch > > matches3;
        std::vector<vector<DMatch > > matches4;

        std::vector<DMatch > good_matches;
        std::vector<DMatch > good_matches1;
        std::vector<DMatch > good_matches2;
        std::vector<DMatch > good_matches3;
        std::vector<DMatch > good_matches4;

        std::vector<Point2f> obj;
        std::vector<Point2f> scene;
        std::vector<Point2f> scene_corners(4);
        Mat H;
        Mat image;

        cvtColor(frame, image, CV_RGB2GRAY);

        detector.detect( image, kp_image );
        extractor.compute( image, kp_image, des_image );

        matcher.knnMatch(des_object, des_image, matches, 2);

    //  printf("d \n");
//////////////////////////////////////////////////////

        contor=0;

        for(int i = 0; i < min(des_image.rows-1,(int) matches.size()); i++) //THIS LOOP IS SENSITIVE TO SEGFAULTS
        {
            if((matches[i][0].distance < 0.6*(matches[i][1].distance)) && ((int) matches[i].size()<=2 && (int) matches[i].size()>0))
            {
                good_matches.push_back(matches[i][0]);
            }
        }

        vect[contor]=good_matches.size();
/////////////////////////////////////////////////////   

        contor=1;
        matcher.knnMatch(des_object, des_image, matches1, 2);

        for(int i = 0; i < min(des_image.rows-1,(int) matches1.size()); i++) //THIS LOOP IS SENSITIVE TO SEGFAULTS
        {
            if((matches1[i][0].distance < 0.6*(matches1[i][1].distance)) && ((int) matches1[i].size()<=2 && (int) matches1[i].size()>0))
            {
                good_matches1.push_back(matches1[i][0]);
            }
        }

        vect[contor]=good_matches1.size();

/////////////////////////////////////////////////////   

        contor=2;
        matcher.knnMatch(des_object, des_image, matches2, 2);

        for(int i = 0; i < min(des_image.rows-1,(int) matches2.size()); i++) //THIS LOOP IS SENSITIVE TO SEGFAULTS
        {
            if((matches2[i][0].distance < 0.6*(matches2[i][1].distance)) && ((int) matches2[i].size()<=2 && (int) matches2[i].size()>0))
            {
                good_matches2.push_back(matches2[i][0]);
            }
        }
        vect[contor]=good_matches2.size();
////////////////////////////////////////////////////        

        contor =3; 
        matcher.knnMatch(des_object, des_image, matches3, 2);

        for(int i = 0; i < min(des_image.rows-1,(int) matches3.size()); i++) //THIS LOOP IS SENSITIVE TO SEGFAULTS
        {
            if((matches3[i][0].distance < 0.6*(matches3[i][1].distance)) && ((int) matches3[i].size()<=2 && (int) matches3[i].size()>0))
            {
                good_matches3.push_back(matches[i][0]);
            }
        }
        vect[contor]=good_matches3.size();

//////////////////////////////////////////////////

        contor=4;
        matcher.knnMatch(des_object, des_image, matches4, 2);

        for(int i = 0; i < min(des_image.rows-1,(int) matches4.size()); i++) //THIS LOOP IS SENSITIVE TO SEGFAULTS
        {
            if((matches4[i][0].distance < 0.6*(matches4[i][1].distance)) && ((int) matches4[i].size()<=2 && (int) matches4[i].size()>0))
            {
                good_matches4.push_back(matches[i][0]);
            }
        }
      vect[contor]=good_matches4.size();

printf("%d %d %d %d %d \n ",vect[0],vect[1],vect[2],vect[3],vect[4]);

ok=0;
    for (contor=1;contor<nimg;contor++)
        if (vect[contor]>vect[contor-1])
            ok=contor;
for (ko=10;ko>3;ko++)
{
if (ok==0 && vect[ok]>ko)
    {printf("obj1 \n");

ko=2;}
else if (ok==1 && vect[ok]>ko)
    {printf("obj2 \n");
ko=2;}
else if (ok==2 && vect[ok]>ko)
    {printf("obj3 \n");
    ko=2;}
else if (ok==3 && vect[ok]>ko)
    {printf("obj4 \n");
    ko=2;}
else if (ok==4 && vect[ok]>ko)
    {printf("obj5 \n");
    ko=2;}

}        

        //Show detected matches
        imshow( "Good Matches",frame /*img_matches*/ );

        key = waitKey(1);  
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T04:35:44.820

对不起，很长的帖子，它运行它给了我很好的匹配，但只适用于第一个图像（对象），其他人得到与第一个相同的结果，在这段代码的末尾我想要匹配，matches1,2,3,4 有不同每个图像（对象）的结果都知道凸轮看到什么对象，在vect中为每个图像保留good_matches.size（）（比较）

```
//////////////////////////////////////////////////////
matcher.knnMatch(des_object, des_image, matches, 2);
        contor=0;

        for(int i = 0; i < min(des_image.rows-1,(int) matches.size()); i++) //THIS LOOP IS SENSITIVE TO SEGFAULTS
        {
            if((matches[i][0].distance < 0.6*(matches[i][1].distance)) && ((int) matches[i].size()<=2 && (int) matches[i].size()>0))
            {
                good_matches.push_back(matches[i][0]);
            }
        }

        vect[contor]=good_matches.size();
/////////////////////////////////////////////////////   

        contor=1;
        matcher.knnMatch(des_object, des_image, matches1, 2);

        for(int i = 0; i < min(des_image.rows-1,(int) matches1.size()); i++) //THIS LOOP IS SENSITIVE TO SEGFAULTS
        {
            if((matches1[i][0].distance < 0.6*(matches1[i][1].distance)) && ((int) matches1[i].size()<=2 && (int) matches1[i].size()>0))
            {
                good_matches1.push_back(matches1[i][0]);
            }
        }

        vect[contor]=good_matches1.size();

/////////////////////////////////////////////////////   

        contor=2;
        matcher.knnMatch(des_object, des_image, matches2, 2);

        for(int i = 0; i < min(des_image.rows-1,(int) matches2.size()); i++) //THIS LOOP IS SENSITIVE TO SEGFAULTS
        {
            if((matches2[i][0].distance < 0.6*(matches2[i][1].distance)) && ((int) matches2[i].size()<=2 && (int) matches2[i].size()>0))
            {
                good_matches2.push_back(matches2[i][0]);
            }
        }
        vect[contor]=good_matches2.size();
////////////////////////////////////////////////////        

        contor =3; 
        matcher.knnMatch(des_object, des_image, matches3, 2);

        for(int i = 0; i < min(des_image.rows-1,(int) matches3.size()); i++) //THIS LOOP IS SENSITIVE TO SEGFAULTS
        {
            if((matches3[i][0].distance < 0.6*(matches3[i][1].distance)) && ((int) matches3[i].size()<=2 && (int) matches3[i].size()>0))
            {
                good_matches3.push_back(matches[i][0]);
            }
        }
        vect[contor]=good_matches3.size();

//////////////////////////////////////////////////

        contor=4;
        matcher.knnMatch(des_object, des_image, matches4, 2);

        for(int i = 0; i < min(des_image.rows-1,(int) matches4.size()); i++) //THIS LOOP IS SENSITIVE TO SEGFAULTS
        {
            if((matches4[i][0].distance < 0.6*(matches4[i][1].distance)) && ((int) matches4[i].size()<=2 && (int) matches4[i].size()>0))
            {
                good_matches4.push_back(matches[i][0]);
            }
        }
      vect[contor]=good_matches4.size(); 
```

# c++ - 为什么用于零拷贝的 OpenOnload 扩展 API 没有用于 UDP 发送或 TCP 接收的任何内容？

> ID：15796937
> 
> 赞同：0
> 
> 时间：2013-04-03T20:01:33.737
> 
> 标签：c++, zero-copy, openonload

根据 OpenOnload Extensions API 文档，零拷贝 API 不包括 UDP 发送和 TCP 接收方案。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-11T02:52:46.783

好的，得到solarflare的回复，接收tcp和发送udp的场景没有接收udp和发送tcp那么高的需求。

# asp.net - 如何在 Linq 中使用 DateAdd 函数？

> ID：15796938
> 
> 赞同：1
> 
> 时间：2013-04-03T20:01:35.593
> 
> 标签：asp.net, linq, dateadd

我有一个用户可以发布的事件，并且可以为每个事件添加相关评论，虽然我的数据库引擎驻留在我们的服务器中，但我住在东欧（Cy），我们有 7-8 小时的时差. 我对事件和评论都使用了 Linq 匿名类型，所以我想知道如何使用 DateAdd 函数来更正评论的日期时间中的时间差异。

这是我的 linq 表达式的示例；

```
var myEvents = from a in myEntities.AddEvents
               where a.Authorized == true
               orderby a.Id descending
               select new
               {
                   a.Id,
                   a.VenueName,
                   a.EventType,
                   a.Date,
                   a.StartTime,
                   a.EndTime,
                   a.Address,
                   a.Phone,
                   a.Reviews (This is for "Comments" and where i stuck!)
               }; 
```

任何想法表示赞赏！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T22:09:52.150

现在问题已经解决了，非常感谢！当我将主题列修改为使用 addHours 函数时，我基本上使用了 foreach 循环。现在一切正常。尽管非常感谢，但以下解决方案均不适用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:04:15.903

您可以使用[`DateTime.AddHours`](http://msdn.microsoft.com/en-us/library/system.datetime.addhours.aspx)例如

```
var myEvents = from a in myEntities.AddEvents
               ...
               select new
               {
                   ...
                   Date = a.Date.AddHours(7),
                   ...
               }; 
```

类似的方法可以用于添加[天](http://msdn.microsoft.com/en-us/library/system.datetime.adddays.aspx)、[月](http://msdn.microsoft.com/en-us/library/system.datetime.addmonths.aspx)、[年](http://msdn.microsoft.com/en-us/library/system.datetime.addyears.aspx)、[分钟](http://msdn.microsoft.com/en-us/library/system.datetime.addminutes.aspx)、[秒](http://msdn.microsoft.com/en-us/library/system.datetime.addseconds.aspx)或[毫秒](http://msdn.microsoft.com/en-us/library/system.datetime.addmilliseconds.aspx)。

但是，对于实体框架，您需要使用[`EntityFunctions.AddHours`](http://msdn.microsoft.com/en-us/library/dd383050.aspx)或者它的盟友。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-11T08:52:47.903

以下是 Linq 中 DateAdd 的语法：

```
DateTime.Now.AddMonths(YourInteger)
DateTime.Now.AddHours(YourInteger) 
```

...等等。使用它的最好方法是创建一个新变量，否则你会遇到错误。

```
DateTime yourDate = DateTime.Now.AddMonths(6); 
```

在此之后，您可以使用您创建的变量来验证 Linq 中的数据。

如果你这样做：

```
new entityStuff{
    field = o.date >= DateTime.Now.AddMonths(X) //months, days... you have other methods besides this one!
} 
```

你会遇到一个错误。

你应该这样做，至少和我一起工作！

```
new entityStuff{
    field = o.date >= yourDate
} 
```

希望对你有帮助，对我有帮助 =)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T20:14:07.787

在插入事件和评论时使用 TimeZoneInfo.ConvertTime，例如

```
DateTime CommentDate = TimeZoneInfo.ConvertTime(DateTime.Now, TimeZoneInfo.FindSystemTimeZoneById("Arabic Standard Time")); 
```

请检查以下链接如何使用 TimeZoneInfo.ConvertTime

[http://www.xiirus.net/articles/article-_net-convert-datetime-from-one-timezone-to-another-7e44y.aspx](http://www.xiirus.net/articles/article-_net-convert-datetime-from-one-timezone-to-another-7e44y.aspx)

# flash - 基于 Flash AS3 的网站 - 为每个菜单设置不同的颜色

> ID：15796946
> 
> 赞同：0
> 
> 时间：2013-04-03T20:01:50.880
> 
> 标签：flash, actionscript

我根据 ActiveTuts 的教程制作了一个网站。

这是我的代码：

```
var navArray:Array=["HOME", "WORK", "MOVIES", "ABOUT", "CONTACT"];

for (var i:Number=0; i<4; i++) {
    var navItem:NavItem=new NavItem  ;
    navItem.x=navItem.width*i;
    navItem.nav_name.text=navArray[i];

    buttonArray.push(navItem);
    navItem.addListeners();
    navContainer.addChild(navItem);
    navItem.name=String(i);
    navItem.addEventListener(MouseEvent.CLICK, onNavClick);
} 
```

我想在每个菜单上加上一种颜色。

[http://active.tutsplus.com/tutorials/web-design/create-a-full-screen-scalable-flash-website-part-1/](http://active.tutsplus.com/tutorials/web-design/create-a-full-screen-scalable-flash-website-part-1/)

它在第二个视频中。

这是我的完整代码：

```
// INITIAL VARIABLES

var buttonArray:Array = new Array( );
var currentButton:Object=new Object  ;

// ADD NAVIGATION CONTAINER

var navContainer:Sprite=new Sprite  ;
addChild(navContainer);

// NAMES OF BUTTONS

var navArray:Array=["HOME", "WORK", "MOVIES", "ABOUT", "CONTACT"];

// ADD ALL THE BUTTONS WITH A FOR LOOP

for (var i:Number=0; i<5; i++) {
    var navItem:NavItem=new NavItem  ;

    navItem.x=navItem.width*i;
    navItem.nav_name.text=navArray[i];
    buttonArray.push(navItem);
    navItem.addListeners();

    navContainer.addChild(navItem);

    navItem.name=String(i);

    navItem.addEventListener(MouseEvent.CLICK, onNavClick);

}

function onNavClick(evt:MouseEvent):void {

    // PREVIOUS BUTTON  
    currentButton.y = 0;
    currentButton.addListeners();
    currentButton.addEventListener(MouseEvent.CLICK, onNavClick);

    // NEXT BUTTON
        currentButton = evt.target;
        currentButton.removeListeners();
        currentButton.removeEventListener(MouseEvent.CLICK, onNavClick);
}

// INITIAL STATE OF NAVIGATION

initialNavigation();

function initialNavigation():void {

    buttonArray[0].y=-10;
    currentButton=buttonArray[0];
    currentButton.removeListeners();
    currentButton.removeEventListener(MouseEvent.CLICK, onNavClick);

} 
```

现在是 navItem 代码：

```
// FORMAT TEXTFIELD
nav_name.autoSize=TextFieldAutoSize.LEFT;
nav_name.selectable=false;

// POSITION TEXT ACCORDING TO IT'S WIDTH
nav_name.x=224-nav_name.width-15;
nav_name.mouseEnabled=false;

// ROLL OVER

function onOver(evt:MouseEvent):void {

    TweenLite.to(this, 0.2, { y:-10});
    trace("OVER");
}

function onOut(evt:MouseEvent):void {

    TweenLite.to(this, 0.2, { y:0});
}

function addListeners():void {

    this.addEventListener(MouseEvent.ROLL_OVER, onOver);
    this.addEventListener(MouseEvent.ROLL_OUT, onOut);
}

function removeListeners():void {

    this.removeEventListener(MouseEvent.ROLL_OVER, onOver);
    this.removeEventListener(MouseEvent.ROLL_OUT, onOut);
} 
```

我试着像 CGa 说的那样做，颜色没问题，但现在我的“addlisteners”不再工作了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:27:44.080

我看不到教程，但你可以做的是：

1.  给文本颜色：navItem.nav_name.textColor = 0xCC0000; （这个是红色的……，0x000000是黑色的，等等）

2.  如果navItem是一个movieclip并且没有动画，打开它，创建四个帧，添加一个stop()；到第一帧。然后你可以添加到你粘贴的代码中：

navItem.gotoAndStop(i + 1);

如果您选择这样做，您应该确保在您创建的每一帧中都可以访问 navItem 的 nav_name。

我希望这会有所帮助，如果我能看到教程，我会更有帮助......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:48:05.060

这完全取决于 NavItem 是什么。我查看了您提到的教程，我知道它是一个使用 flash ide 创建的按钮。这个按钮是来自 flash ide 的 Button 类，它有一个包含按钮状态的四帧。如果你想改变这些按钮的颜色，我建议创建四个，每个都有自己的颜色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T18:12:42.187

感谢您的回答。

这是我提到的教程的链接：

[http://active.tutsplus.com/tutorials/web-design/create-a-full-screen-scalable-flash-website-part-1/](http://active.tutsplus.com/tutorials/web-design/create-a-full-screen-scalable-flash-website-part-1/)

它在第二个视频中。

并且“navItem”是一个没有动画的电影剪辑>>我将尝试在其中创建四个帧，如 CGA 所说

# asp-classic - ADODB.Field 错误“80020009”

> ID：15796949
> 
> 赞同：0
> 
> 时间：2013-04-03T20:01:58.160
> 
> 标签：asp-classic

最近我们收到了这个错误：ADODB.Field error '80020009'

BOF 或 EOF 为 True，或者当前记录已被删除。请求的操作需要当前记录。

```
/PHET/mscripts/TestScoring.asp, line 52 
```

此特定文件用于其他 10 个测试，并且不会出错。我检查了数据库，一切看起来都很好。这是引发错误的实际页面...

```
<%@LANGUAGE="VBSCRIPT"%>
<!--#include file="DoSecure.asp" -->
<!--#include virtual="/lib/dbConnModules.asp" -->
<%
Dim rsAnswer__MMColParam
rsAnswer__MMColParam = Session("ModuleID")
Set rsAnswer = Server.CreateObject("ADODB.Recordset")
rsStrAnswer = "SELECT * FROM TestAnswers WHERE TestName = '" & Request.Form("testName") & "' and ApplicationID = '" & Session("ApplicationID") & "' and moduleID = '" + Replace(rsAnswer__MMColParam, "'", "''") + "'"
rsAnswer.open rsStrAnswer, dbConnModules
answerArray = array(rsAnswer("AnswerQ1"), rsAnswer("AnswerQ2"), rsAnswer("AnswerQ3"), rsAnswer("AnswerQ4"), rsAnswer("AnswerQ5"), rsAnswer("AnswerQ6"), rsAnswer("AnswerQ7"), rsAnswer("AnswerQ8"), rsAnswer("AnswerQ9"), rsAnswer("AnswerQ10"), rsAnswer("AnswerQ11"), rsAnswer("AnswerQ12"), rsAnswer("AnswerQ13"), rsAnswer("AnswerQ14"), rsAnswer("AnswerQ15"), rsAnswer("AnswerQ16"), rsAnswer("AnswerQ17"), rsAnswer("AnswerQ18"), rsAnswer("AnswerQ19"), rsAnswer("AnswerQ20"))
testArray = array(Request.Form("Q1"), Request.Form("Q2"), Request.Form("Q3"), Request.Form("Q4"), Request.Form("Q5"), Request.Form("Q6"), Request.Form("Q7"), Request.Form("Q8"), Request.Form("Q9"), Request.Form("Q10"), Request.Form("Q11"), Request.Form("Q12"), Request.Form("Q13"), Request.Form("Q14"), Request.Form("Q15"), Request.Form("Q16"), Request.Form("Q17"), Request.Form("Q18"), Request.Form("Q19"), Request.Form("Q20"))
if not rsAnswer.EOF then
    myCorrect = 0
    For i=0 To (rsAnswer("NumOfQs") - 1)
        'Response.Write(i+1 & Request.Form("q" & i+1) & "<br />")
        If isNull(answerArray(i)) then answerArray(i) = "" End If
        If answerArray(i) = testArray(i) Then
            myCorrect = myCorrect + 1
        End if
    Next
    'Response.Write(myCorrect)
end if  
'Response.Write(myCorrect)
%>
<%
strTestRecord = "insert into TestRecords (ApplicationID, ModuleID, TestName, UserEmail, Q1, Q2, Q3, Q4, Q5, Q6, Q7, Q8, Q9, Q10, Q11, Q12, Q13, Q14, Q15, Q16, Q17, Q18, Q19, Q20, Debugger, numberCorrect) values ('" &_ 
        Session("ApplicationID") & "', '"&_
        Session("ModuleID") & "', '"&_
        Replace(Request.Form("testName"), "'", "''") & "', '"&_
        Session("UserEmailAddr") & "', '"&_
        Replace(Request.Form("Q1"), "'", "''") & "', '" &_
        Replace(Request.Form("Q2"), "'", "''") & "', '" &_
        Replace(Request.Form("Q3"), "'", "''") & "', '" &_
        Replace(Request.Form("Q4"), "'", "''") & "', '" &_
        Replace(Request.Form("Q5"), "'", "''") & "', '" &_
        Replace(Request.Form("Q6"), "'", "''") & "', '" &_
        Replace(Request.Form("Q7"), "'", "''") & "', '" &_
        Replace(Request.Form("Q8"), "'", "''") & "', '" &_
        Replace(Request.Form("Q9"), "'", "''") & "', '" &_
        Replace(Request.Form("Q10"), "'", "''") & "', '" &_
        Replace(Request.Form("Q11"), "'", "''") & "', '" &_
        Replace(Request.Form("Q12"), "'", "''") & "', '" &_
        Replace(Request.Form("Q13"), "'", "''") & "', '" &_
        Replace(Request.Form("Q14"), "'", "''") & "', '" &_
        Replace(Request.Form("Q15"), "'", "''") & "', '" &_
        Replace(Request.Form("Q16"), "'", "''") & "', '" &_
        Replace(Request.Form("Q17"), "'", "''") & "', '" &_
        Replace(Request.Form("Q18"), "'", "''") & "', '" &_
        Replace(Request.Form("Q19"), "'", "''") & "', '" &_
        Replace(Request.Form("Q20"), "'", "''") & "', '" &_
        Request.Form("Debugger") & "', " & myCorrect & ")"      
Session("NumOfQs") = rsAnswer("NumOfQs")
Session("NumToPass") = rsAnswer("NumToPass")

Session("YourScore") = myCorrect

if myCorrect > Session("NumToPass") then pf = "pass" else pf = "fail" end if ' PASS OR FAIL
strTestRecordComplete = "insert into CheckRequirements (ApplicationID, UserEmail, ModuleID, RequirementName, PassOrFail, OperationalIPAddr) values ('" & Session("ApplicationID") & "', '" & Session("UserEmailAddr") & "', '" & Session("ModuleID") & "', '"& Request.Form("testName") & "', '" & pf & "', '" & Request.ServerVariables("REMOTE_ADDR") & "')"
dbConnModules.Execute(strTestRecord)
dbConnModules.Execute(strTestRecordComplete)
if Request.Form("TestName") = "pretest" Then
    Response.Redirect("../" & Session("ModuleDir") & "/TestResults.asp?fr=pre&desturl="& Request.Form("desturl"))
elseif Request.Form("TestName") = "posttest" Then
    Session("rsYourAnswers") = testArray
    Response.Redirect("../" & Session("ModuleDir") & "/TestResults.asp?fr=post&desturl="& Request.Form("desturl"))
End If
%>
<%
rsAnswer.Close()
Set rsAnswer = Nothing
%>
<!--#include virtual="/lib/dbConnModulesClose.asp" --> 
```

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T07:25:48.133

您在两个地方访问记录集，而不检查它是否包含任何记录。只需将访问记录集的代码移动到您已经拥有的条件中：

```
rsAnswer.open rsStrAnswer, dbConnModules
testArray = array(Request.Form("Q1"), Request.Form("Q2"), Request.Form("Q3"), Request.Form("Q4"), Request.Form("Q5"), Request.Form("Q6"), Request.Form("Q7"), Request.Form("Q8"), Request.Form("Q9"), Request.Form("Q10"), Request.Form("Q11"), Request.Form("Q12"), Request.Form("Q13"), Request.Form("Q14"), Request.Form("Q15"), Request.Form("Q16"), Request.Form("Q17"), Request.Form("Q18"), Request.Form("Q19"), Request.Form("Q20"))
if not rsAnswer.EOF then
    answerArray = array(rsAnswer("AnswerQ1"), rsAnswer("AnswerQ2"), rsAnswer("AnswerQ3"), rsAnswer("AnswerQ4"), rsAnswer("AnswerQ5"), rsAnswer("AnswerQ6"), rsAnswer("AnswerQ7"), rsAnswer("AnswerQ8"), rsAnswer("AnswerQ9"), rsAnswer("AnswerQ10"), rsAnswer("AnswerQ11"), rsAnswer("AnswerQ12"), rsAnswer("AnswerQ13"), rsAnswer("AnswerQ14"), rsAnswer("AnswerQ15"), rsAnswer("AnswerQ16"), rsAnswer("AnswerQ17"), rsAnswer("AnswerQ18"), rsAnswer("AnswerQ19"), rsAnswer("AnswerQ20"))
    myCorrect = 0
    For i=0 To (rsAnswer("NumOfQs") - 1)
        'Response.Write(i+1 & Request.Form("q" & i+1) & "<br />")
        If isNull(answerArray(i)) then answerArray(i) = "" End If
        If answerArray(i) = testArray(i) Then
            myCorrect = myCorrect + 1
        End if
    Next
    'Response.Write(myCorrect)
    Session("NumOfQs") = rsAnswer("NumOfQs")
    Session("NumToPass") = rsAnswer("NumToPass")
Else  
    Session("NumOfQs") = 0
    Session("NumToPass") = 0
End If 
```

请记住从原始代码的末尾删除这两行：

```
Session("NumOfQs") = rsAnswer("NumOfQs")
Session("NumToPass") = rsAnswer("NumToPass") 
```

因为它现在已添加到“主”块中。

# ios - 自定义委托方法不适用于 iOS

> ID：15796950
> 
> 赞同：3
> 
> 时间：2013-04-03T20:02:01.960
> 
> 标签：ios, objective-c, xcode

我创建了一个自定义委托方法来更新 ViewController 的背景颜色。我无法让委托方法做出响应。这是我的代码：

VASettingsView.h

```
#import <UIKit/UIKit.h>
#import <GLKit/GLKit.h>

@class VASettingsView;

@protocol VASettingsViewDelegate <NSObject>
- (void)setNewBackgroundColour:(GLKVector4)newColour;
@end

@interface VASettingsView : UIView {
    id <VASettingsViewDelegate> delegate;
}

@property (strong, nonatomic) IBOutlet UIButton *blackBackgroundButton;
@property (strong, nonatomic) IBOutlet UIButton *saveButton;

@property GLKVector4 backgroundColourSetting;

// Set delegate method
@property (nonatomic,weak)id delegate;

- (IBAction)blackButtonPressed:(id)sender;
- (IBAction)saveButtonPressed:(id)sender;

@end 
```

VASettingsView.m

```
#import "VASettingsView.h"

@implementation VASettingsView

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {

    }
    return self;
}

- (IBAction)blackButtonPressed:(id)sender {
    self.backgroundColourSetting = GLKVector4Make(0.0, 0.0, 0.0, 0.0);
}
- (IBAction)saveButtonPressed:(id)sender {
    [delegate setNewBackgroundColour:self.backgroundColourSetting];
}

@end 
```

VARendererViewController.h

```
@class VA_CASFrame;
@class VA_Character;
@class VA_Orbit_Camera;

#import <UIKit/UIKit.h>
#import <GLKit/GLKit.h>
#import <QuartzCore/QuartzCore.h>
#import "VASettingsView.h"

@interface VARendererViewController : GLKViewController <VASettingsViewDelegate>
{
    // Code

} 
```

VARendererViewController.m

ViewDidLoad

```
// Setup UIView to be delegate
VASettingsView *settingsView = [[VASettingsView alloc] init];
settingsView.delegate = self; 
```

设置新背景颜色

```
- (void)setNewBackgroundColour:(GLKVector4)newColour{

    self.backgroundColour = GLKVector4Make(newColour.x,
                                           newColour.y,
                                           newColour.z,
                                           newColour.w
                                           );
    NSLog(@"STOP");
} 
```

故事板：

![容器和 UIView](https://i.stack.imgur.com/WMpVZ.png)

我无法到达 setNewBackgroundColour 并且已经寻找了几个小时的答案。我看不到我做错了什么？

山姆

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T20:41:57.143

我怀疑问题是你在 VARendererViewController 中分配了一个新的 VASettingsView 实例，而不是获得一个你放在屏幕上的指针。由于您没有显示如何在屏幕上获得 VASettingsView，或者如何创建它的视图，因此这只是一个猜测。

编辑后：

代替，

```
VASettingsView *settingsView = [[VASettingsView alloc] init];
settingsView.delegate = self; 
```

试试这个，

```
VASettingsView *settingsView = self.childViewControllers[0];
SettingsView.delegate = self; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T20:21:37.157

如果您使用的是 iOS 6.0 SDK，问题可能是委托属性未链接到实例变量`delegate`。Apple 更改了标准，如果您不`@synthesize`使用该属性，则会调用相应的实例变量`_delegate`。

要解决您的问题，请尝试合成`delegate`属性或通过调用方法来访问`self.delegate`它`saveButtonPressed:`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T20:43:24.933

您的问题是您在方法中声明了一个局部变量，并设置了它的委托。当您 exit`viewDidLoad`时，该变量消失了。您需要创建`VASettingsView *settingsView`一个实例变量（即在您的实现中声明它），然后将其委托设置为`viewDidLoad`.

# php - 根据从先前表单中选择的清单创建新表单

> ID：15796952
> 
> 赞同：0
> 
> 时间：2013-04-03T20:02:05.543
> 
> 标签：php, javascript, jquery, html

基本上我想创建一个表单，在提交时会根据清单选择创建一个新表单。

例如，在查看我的代码时，如果我检查了 Section 1, Test Item 2 并提交了它。在提交时，它会拉出一个新页面（或加载到当前页面），步骤越深入。我正在尝试制作一个可用于多个文档的模板，因此仅将其添加到那里对我来说是行不通的。

(1) 如何使第 1、2 和 3 部分在检查之前一无所有？不必单击复选框两次以使其消失，我宁愿让它不存在并在选中时出现。

(2) 我希望 All checklist 检查所有框，但不显示或隐藏它们（我知道这不是为此编码的，但我不知道如何）

这是我的代码：http: [//jsfiddle.net/kNsW9/2/](http://jsfiddle.net/kNsW9/2/)

```
<script>
$(document).ready(function(){
    $('#all').click(function(){
        if ($('#all').is(':checked'))
            $(this).nextAll('li').show();
        else
            $(this).nextAll('li').hide();
    });

    $('#1').click(function(){
        if ($('#1').is(':checked'))
            $(this).nextUntil('ol').show();
        else
            $(this).nextUntil('ol').hide();
    });

    $('#2').click(function(){
        if ($('#2').is(':checked'))
            $(this).nextUntil('ol').show();
        else
            $(this).nextUntil('ol').hide();
    });

    $('#3').click(function(){
        if ($('#3').is(':checked'))
            $(this).nextUntil('ol').show();
        else
            $(this).nextUntil('ol').hide();
    });
});
</script>
<form>
Table of Contents<br />
Please Select What to Test:<br />
<input type="checkbox" id="all" onclick="check(this.id)"></input>All
<ol><input type="checkbox" id="1"></input>Section 1
<li><input type="checkbox"></input>Test Item 1</li>
<li><input type="checkbox"></input>Test Item 2</li>
</ol>
<ol><input type="checkbox" id="2"></input>Section 2
<li><input type="checkbox"></input>Test Item 1</li>
<li><input type="checkbox"></input>Test Item 2</li>
<li><input type="checkbox"></input>Test Item 3</li>
<li><input type="checkbox"></input>Test Item 4</li>
<li><input type="checkbox"></input>Test Item 5</li>
<li><input type="checkbox"></input>Test Item 6</li>
</ol>
<ol><input type="checkbox" id="3"></input>Section 3
<li><input type="checkbox"></input>Test Item 1</li>
<li><input type="checkbox"></input>Test Item 2</li>
<li><input type="checkbox"></input>Test Item 3</li>
<li><input type="checkbox"></input>Test Item 4</li>
<li><input type="checkbox"></input>Test Item 5</li>
</ol>
<!--<input type="submit" value="Submit">-->
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:27:20.103

我在你的 jsfiddle 中做了一些改变，不确定这是否是你要找的。让我知道是这样还是我误解了这个问题：

**演示：http:** [//jsfiddle.net/kNsW9/4/](http://jsfiddle.net/kNsW9/4/)

你在正确的方向只需要做一些小的改变

```
$('#1').nextUntil('ol').hide()
$('#2').nextUntil('ol').hide();
$('#3').nextUntil('ol').hide();

$('#all').click(function(){
    $('#1').click();
    $('#2').click();
    $('#3').click();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T20:29:15.333

让我知道这对你有什么作用......

[http://jsfiddle.net/kNsW9/9/](http://jsfiddle.net/kNsW9/9/)

*我用css更新了控制LI的可见性而不是jquery检查所有将检查所有子项目，取消选中所有将取消选中所有子项目

*我假设如果你选中所有，然后取消选中所有应该取消选中的子项，对吗？

```
$('#all').click(function(){
    var checked = $(this).prop('checked');
    $('#section1,#section2,#section3').each(function() {
        $(this).find('input:checkbox').prop('checked', checked);
    });
}); 
```

# orchardcms - 如何使用“Widget的技术名称，用于css类和替代品

> ID：15796962
> 
> 赞同：0
> 
> 时间：2013-04-03T20:02:39.150
> 
> 标签：orchardcms

我试图弄清楚如何使用“用于 css 类和替代品的 Widget 的技术名称”。我的假设是，当我在我的sites.css 文件中添加#custom 部分时，它将被引用到“Widget 的技术名称，用于css 类和替代品”中指定的“custom”。场地。

谢谢约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T05:30:21.903

不，`#custom`这意味着那是身份证。查看小部件周围的元素。你会看到它被添加为一个类，而不是一个 id。

# python - Jinja2：说“在另一个宏或模板中渲染这个宏”

> ID：15796965
> 
> 赞同：6
> 
> 时间：2013-04-03T20:02:45.040
> 
> 标签：python, templates, macros, jinja2

我想在一个通用容器宏或模板中呈现许多宏。使用伪代码：

宏1

宏2

宏3

容器

在模板中：

```
"render macro1 inside of Container" e.g. {{ macro1 with Container }} 
```

我不想每次都通过渲染Container然后里面的宏，我只需要指定，当这个宏，用这个另一个宏括起来

我认为“呼叫”（[http://jinja.pocoo.org/docs/templates/#macros](http://jinja.pocoo.org/docs/templates/#macros)）是我正在寻找的，但我现在不太明白。任何输入，以及如果不清楚，我该如何澄清这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T16:26:29.007

这对我有用：

```
{% macro _enclosure() %}
    <div id="topenclosure">hello I'm on top</div>
        {{ caller() }}
    <div id="bottomenclosure">hello I'm on the bottom</div>
{% endmacro %}

{% macro account_user_profile_macro(i) %}
    {% call _enclosure() %}
        {{i.__dict__}}
    {% endcall %} 
{% endmacro %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-17T07:37:47.243

从[文档](https://jinja.palletsprojects.com/en/3.0.x/templates/#call)：

在某些情况下，将宏传递给另一个宏会很有用。为此，您可以使用特殊调用块。以下示例显示了一个利用调用功能的宏以及如何使用它：

```
{% macro render_dialog(title, class='dialog') -%}
    <div class="{{ class }}">
        <h2>{{ title }}</h2>
        <div class="contents">
            {{ caller() }}
        </div>
    </div>
{%- endmacro %}

{% call render_dialog('Hello World') %}
    This is a simple dialog rendered by using a macro and
    a call block.
{% endcall %} 
```

# ios - 解决两个相互影响的二传手的方法

> ID：15796973
> 
> 赞同：2
> 
> 时间：2013-04-03T20:03:13.667
> 
> 标签：ios, cocoa, ios5, getter-setter

我有一个自定义类，包含一个性别字符串和一个用于服务器交互的布尔值。

。H

```
@interface Member : NSObject
...
@property (nonatomic, strong) NSString *gender;
@property (nonatomic) BOOL isMale;
... 
```

.m

```
 - (void)setIsMale:(BOOL)isMale
    {
        _isMale = isMale;

        if (isMale) {
            self.gender = @"Male";
        }
        else {
            self.gender = @"Female";
        }
    } 
```

我也想做相反的事情，这意味着当性别更改为女性时，我希望我的 isMale 属性设置为 NO。但是如果也为性别定义一个 setter，这两个 setter 将处于无限循环中。有没有办法实现两个不会相互循环的私有设置器？

这将是导致无限循环的代码

```
- (void)setGender:(NSString *)gender
{
    _gender = gender;

    if ([gender isEqualToString:@"Male"]) {
        self.isMale = YES;
    }
    else if ([gender isEqualToString:@"Female"]) {
        self.isMale = NO;
    }
    else {
        // discard...
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T20:15:08.303

不存储`isMale`在 ivar 中怎么办？这就是我要做的：

```
// `gender` is auto-synthesized

- (BOOL)isMale {
    return [self.gender isEqualToString:@"male"];
}

- (void)setIsMale:(BOOL)isMale {
    self.gender = @"male";
}

// In case you use KVO
+ (NSSet *)keyPathsAffectingValueForIsMale {
    return [NSSet setWithObject:@"gender"];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T20:07:53.887

> 这将是导致无限循环的代码

这是正确的：如果你在 setter 中使用 setter，你会得到一个无限递归。这就是为什么您应该在 setter ^+中设置实例变量而不是属性的原因。另一种解决方案是检查当前值：如果一个属性被设置为它已经拥有的值，setter 应该退出。

但是，在您的情况下，应该以不同的方式解决问题：您应该存储一个属性并计算另一个属性，而不是存储两个属性。保留`isMale`, 并为`gender`属性提供 getter 和 setter：

```
-(NSString*)gender {
    return _isMale ? @"Male" : @"Female";
}
-(void)setGender:(NSString*)gender {
    if ([gender isEqualToString@"Male"]) {
        _isMale = YES;
    } else if ([gender isEqualToString@"Female"]) {
        _isMale = NO;
    } else {
        // Error
    }
} 
```

这是面向对象设计（实际上，任何数据设计）的非常重要的原则之一：您不应该存储可以“即时”轻松计算的东西。经典示例是`birthday`+`current_age`对：您应该存储`birthday`，并计算`current_age`以避免不一致。

* * *

^+在 ARC 之前，这通常不是真的，即使使用 ARC，您也可能希望对标记为 的字符串属性使用 setter `copy`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T20:08:25.240

笑声的第三个原则，或“Divide et impera”：

```
- (void)setIsMale:(BOOL)male
{
    [self setIsMaleInternal:male];
}

- (void)setGender:(NSString *)_gen
{
    if ([_gen isEqualToString:@"male"]) {
        [self setIsMaleInternal:YES];
    } else if ([_gen isEqualToString:@"female"]) {
        [self setIsMaleInternal:NO];
    } else {
        [World burn]; // or just an exception?
    }
}

- (void)setIsMaleInternal:(BOOL)flag
{
    _isMale = flag;
    if (flag) {
        _gender = @"male";
    } else {
        _gender = @"female";
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T20:08:45.670

解决方案是直接在每个 setter 中引用 iVars ...

```
- (void)setIsMale:(BOOL)isMale
{
    _isMale = isMale;

    if (isMale) {
        _gender = @"Male";
    }
    else {
        _gender = @"Female";
    }
} 
```

但是，由于 isMale 本质上是派生的，您甚至需要它的属性吗？你能公开一个 isMale 方法吗？

```
- (BOOL) isMale {
   return [self.gender isEqualToString:@"Male"];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T20:21:36.347

另一种解决方案是检查设置器中的相等值：

```
- (void)setIsMale:(BOOL)isMale {
    if (_isMale != isMale) {
        _isMale = isMale;

        self.gender = (isMale? @"male" : @"female");
    }
}

- (void)setGender:(NSString *)gender {
    // this is not perfect, you have to take nils into account
    if ([_gender isEqualToString:gender]) {
        _gender = gender;

        self.isMale = [_gender isEqualToString:@"male"];
    }
} 
```

设置两个值一次后，条件将失败，然后打破无限递归。

# jquery - JSONP 邮政代理

> ID：15796978
> 
> 赞同：1
> 
> 时间：2013-04-03T20:03:39.937
> 
> 标签：jquery, ajax

我正在编写一个与 Twitter API 集成的相当基本的 Web 应用程序。我正在使用 jQuery 和 AJAX 请求 Twitter 所需的身份验证令牌，但我违反了异步跨站点请求策略或其他任何策略。

我会使用 JSONP，但 Twitter API 需要一个 POST。我已阅读我应该使用中间代理。我不知道这涉及什么并且找不到任何资源？我可以用 PHP 编写。

谁能解释一下什么是代理页面？

**更新**

在阅读下面接受的答案后，我编写了一个 PHP 代理脚本，这就是我想出并开始工作的：

```
 <?php

    class proxy {

        public $serviceURL;
        public $postString;
        public $headers;
        public $response;

        public function __construct($url) {  
            $this->serviceURL = $url;
            $this->postStringify($_POST);
        }

        private function postStringify($postArray) {
            $ps = '';
            foreach($postArray as $key => $value) { 
                $ps .= $key . '=' . $value . '&'; 
            }
            rtrim($ps, '&');
            $this->postString = $ps;    
        }

        private function isCurlInstalled() {
            return (in_array('curl', get_loaded_extensions())) ? true : false;
        }

        public function makeRequest() {
            if ($this->isCurlInstalled()) {
                $ch = curl_init();
                curl_setopt($ch, CURLOPT_URL, $this->serviceURL);
                curl_setopt($ch, CURLOPT_POST, 1);
                curl_setopt($ch, CURLOPT_TIMEOUT, 10);            
                curl_setopt($ch, CURLOPT_POSTFIELDS, $this->postString);
                curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
                curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
                curl_setopt($ch, CURLOPT_HTTPHEADER, $this->headers);
                $this->response = curl_exec($ch);
                if ($this->response === false) $this->response = curl_error($ch);
                curl_close($ch);
            } else {
                $this->response = 'Need to install Curl!';
            }

            return $this->response;

        }

        public function debug() {
            var_dump($this->response);
        }

    }

?> 
```

在 AJAX 请求调用的另一个文件中：

```
 <?php

    include ('proxy.php');

    ini_set('display_errors',1); 
    error_reporting(E_ALL);

    $consumerKey = 'myKEY!';
    $consumerSecret = 'mySecret!';
    $bearerTokenCredentials = $consumerKey . ':' . $consumerSecret;
    $base64TokenCredentials = base64_encode($bearerTokenCredentials);

    $authProxy = new proxy('https://api.twitter.com/oauth2/token/');
    $authProxy->headers = array(
        'Content-Type: application/x-www-form-urlencoded',
        'Authorization: Basic ' . $base64TokenCredentials,
    );

    $response = $authProxy->makeRequest();
    if (is_null($response)) $authProxy->debug(); else echo $response;

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T20:05:12.180

代理脚本将简单地获取您的 POST 数据并将其转发到 Twitter。

在您的客户端代码中，您将使用类似`yourProxyScript.php`. 在该代理脚本中，您将从 中获取所有内容`$_POST`以及您需要的任何其他数据，并[使用 cURL 将其发布到 Twitter API URL](http://davidwalsh.name/curl-post)。

# asp.net - 从 3 个必填字段验证器中选择至少一个复选框

> ID：15796984
> 
> 赞同：1
> 
> 时间：2013-04-03T20:03:52.997
> 
> 标签：asp.net, checkbox, jquery-validate, validation

我正在尝试使我的代码放置必填字段验证器，以便从三个复选框中选择至少一个。这是我的代码：

```
<div class="left marginT5 marginR10">
 <input type="checkbox" id="chk1" value="option1" runat="server" class="styled" /> Choice1
 </div>
 <div class="left marginT5 marginR10">
<input type="checkbox" id="chk2" value="option2" runat="server" class="styled" /> Choice2
 </div>
 <div class="left marginT5 marginR10">
 <input type="checkbox" id="chk3" value="option3" runat="server" class="styled" /> Choice3
 </div> 
```

我知道我可以使用 checkboxlist 但由于设计问题我只能使用单个复选框控件。知道如何“强制”用户选择至少一个复选框吗？提前致谢， Laziale

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T20:18:56.713

您可以尝试使用自定义验证器。这应该让你开始：

aspx

```
<asp:CustomValidator ID="CustomValidator1" runat="server" 
    EnableClientScript="true"
    ErrorMessage="Please choose at least one"
    ClientValidationFunction="ValidateRadioButtons">
</asp:CustomValidator> 
```

javascript/jQuery

```
function ValidateRadioButtons(source, args) {
  var options = $('.styled');
  for (var i = 0; i < options.length; i++) {
    if (options[i].checked) {
      args.IsValid = true;
      return false;
    }
  }
  args.IsValid = false;
} 
```

[自定义验证器](http://msdn.microsoft.com/en-us/library/9eee01cx%28v=vs.71%29.aspx)

您也应该进行服务器端验证，以防 javascript 被禁用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T21:46:06.987

你已经标记了这个，`jquery-validate`所以我可以假设你正在使用 jQuery Validate 插件吗？如果是这样，您**必须**在字段上使用`name`属性`input`。如果组中的所有复选框元素都相同，则***默认情况下***`name`您将获得请求的行为。

 ***演示：http: [//jsfiddle.net/q3yrd/](http://jsfiddle.net/q3yrd/)**

```
<input type="checkbox" name="chk" id="chk1" value="option1" runat="server" class="styled" />
<input type="checkbox" name="chk" id="chk2" value="option2" runat="server" class="styled" />
<input type="checkbox" name="chk" id="chk3" value="option3" runat="server" class="styled" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T20:06:40.477

由于验证器是“按控制”的，因此没有一种开箱即用的解决方案。您必须自己实现它。它应该很容易，只是不像添加必填字段验证器那么容易......

最好的方法通常是在 javascript（客户端）和服务器端进行回发验证，但取决于您的应用程序，其中一个或两个都可以工作。*

# php - 查找标签错误（分组标签）

> ID：15796989
> 
> 赞同：0
> 
> 时间：2013-04-03T20:04:04.223
> 
> 标签：php, javascript, css

我认为我有一个标签错误，因为当我将代码分组到“Coda 2”中时它可以工作，但是当我分组时`<html>`它`<body>`会产生错误。我把代码给你，以帮助我找到错误。

当我尝试运行它时，似乎代码在第 97 行有一个错误，就是它所说的那个`' }else {`

```
echo "<p id='result_fail'>No puede exceder la cantidad especificada de caracteres.</p>";'

<html>

    <body>
<?php

        include('conexion.php'); 
                //CONDICION PARA LOS ERRORES
        if(isset($_POST['boton'])){
            }else if($_POST['date'] == ''){
                $error2 = '<span class="error">Ingrese la fecha</span>';
            }else if($_POST['subtitle'] == ''){
                $error3 = '<span class="error">Ingrese un subtitle</span>';
            }else if($_POST['image'] == ''){
                $error4 = '<span class="error">Ingrese la imagen</span>';
            }else if ($_POST['text'] == ''){
                $error5 = '<span class="error">Ingrese el texto</span>';
            }else{
                //DECLARAMOS VARIABLES
                $titulo = $_POST['title'];
                $fecha = $_POST['date'];
                $subtitulo = $_POST['subtitle']; //subtitle
                $imagen = $_POST['image']; //imagen
                $texto = $_POST['text'];
                $tiponot = $_POST['type'];

                //CHEQUEAMOS QUE LOS CONTENIDOS SEAN APROPIADOS
                    if ( (strlen($subtitle) <= 75) && (strlen($subtitulo) <= 75) && (strlen($texto) <= 5000) ) {

                        $titulo = trim($titulo);//ELIMINA ESPACIOS EN BLANCO

                        $temptitle = trim($titulo);//ELIMINA ESPACIOS EN BLANCO

                        $temptitle = strtolower($temptitle);//CONVIERTE TODO A MINUSCULA

                        //REEMPLAZA LOS CARACTERES CON SIGNOS, TILDES O COMAS, ETC POR CARACTERES LIMPIOS Y LOS ESPACIOS POR RAYAS PARA QUE SEA MEJOR ALMACENADO
                        $b = array("á","é","í","ó","ú","ä","ë","ï","ö","ü","à","è","ì","ò","ù","ñ"," ",",",".",";",":","¡","!","¿","?","/","*","+","´","{","}","¨","â","ê","î","ô","û", "^","#","|","°","=","[","]","&lt;","&gt;","`","(",")","&amp;","%","$","¬", "@","Á","É","Í","Ó","Ú","Ä","Ë","Ï","Ö","Ü","Â","Ê","Î","Ô","Û","~","À", "È","Ì","Ò","Ù","_","\\","\"","\"");

                        $c = array("a","e","i","o","u","a","e","i","o","u","a","e","i","o","u","n","-","","", "","","","","","","","","","","","","","a","e","i","o","u","","","","","", "","","","","","","","","","","","","a","e","i","o","u","a","e","i","o", "u","a","e","i","o","u","","a","e","i","o","u","-","","","");

                        $temptitle = str_replace($b,$c,$temptitle);//TODO CARACTER DE $B QUE APAREZCA ES REMPLAZADO POR $C Y PUESTO EN $TEMPTITLE

                        $nombrearchivo .= rand(0,9) . rand(0,9) . rand(0,9). rand(0,9) . rand(0,9); //CONCATENA AL FINAL DEL ARCHIVO UN RANDOMIZE DE 5 DIGITOS DIFERENTES PARA DARLES UNA ID A CADA ARCHIVO Y QUE NO SE PISEN 

                        $titulo =    stripslashes($titulo); //ELIMINAMOS SLASHES

                        $nombrearchivo = $temptitle. '-';// PONE UNA BARRA MEDIA LUEGO DE TODA EL TITULO

                        $ext = '.php';//PONE TERMINACIÓN ".PHP" EN EL NOMBRE DEL ARCHIVO

                        $nombrearchivoext = $nombrearchivo . $ext;
                        //CREAMOS EL ARCHIVO
                        if (fopen($nombrearchivoext, 'w') == true ) {

                            echo '<p id="exito">Se ha creado <b>'.$nombrearchivoext.'</b> Correctamente</p>';

                            //ABRIMOS EL ARCHIVO Y LE METEMOS CONTENIDO

                            $fh = fopen($nombrearchivoext, 'w') or die("can't open file");

                            $content = '
                            <html>
                            <head>
                            <meta http-equiv="content-type" content="text/html" />
                                <meta name="author" content="www.visualsac.net" />
                                <link rel="stylesheet" type="text/css" href="style.css" />
                                <title>'.$titulo.'</title>
                            </head>
                            <div class="body">
                            <div class="global"> 
                                <h1>Global</h1>
                                <h2>HOME</h2>
                                     <? include("menubar.html")?>
                                     <div>'.$titulo.'</div>
                                     <p style="font-weight: bold ">'.$subtitle.'</p>
                                     <p style="font-family:Seogue UI;">'.$texto.'</p>
                                     </html>

           ';

                        fwrite($fh,$content);// ESCRIBIMOS LOS DATOS EN EL ARCHIVO. PONEMOS LAS DOS CONDICIONES QUE PIDE
                        $user = 'localhost';
                        $usuario = 'root';
                        $pass = '';
                        $tablename = 'noticias';
                        $connect = mysql_connect($user, $root, $pass)or die(mysql_error());
                            mysql_query("INSERT INTO $tablename values ('text','date','title','subtitle','image','type')") or die (mysql_error());   

                }else {
                        $result = '<div class="result_fail">No se pudo crear el archivo <img src="http://web.tursos.com/wp-includes/                        images/smilies/icon_sad.gif" alt=":(" class="wp-smiley"> </div>';

                        }else   {
                            echo"<p id='result_fail'>No puede exceder la cantidad especificada de caracteres. </p>";
                                }                       

                ?>
                <form class='contacto' method='POST' action=''>
                    <div><label>Tipo de nota</label><select type=checkbox name='type' value='<?php $_POST['type'];?>'>                                  <option>Business<option>lifestyle<option>technology</select></div>
                    <div><label>Date:</label><input type=date class='date' name='date' value='<?php echo $_POST['date']; ?>'><?php echo                     $error2 ?></div>
                    <div><label>subtitle:</label><input type='text' class='subtitle' name='subtitle' value='<?php echo                                  $_POST['subtitle']; ?>'><?php echo $error3 ?></div>
                    <div><label>Imagen:</label><input type='text' class='image' name='image' value='<?php echo $_POST['image']; ?>'>
                    <?php echo $error4 ?></div>
                    <div><label>Text:</label><textarea rows='6' class='text' name='text' value='<?php echo $_POST['text'];?>'><?php                     echo $_POST['text']; ?></textarea><?php echo $error5 ?></div>
                    <div><input type='submit' value='Envia Mensaje' class='boton' name='boton'></div>
                    <?php echo $result; ?>
               </form>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:08:31.747

对于 1 个“if”，您有 2 个“else”语句

```
}else {
$result = '<div class="result_fail">No se pudo crear el archivo <img src="http://web.tursos.com/wp-includes/                        images/smilies/icon_sad.gif" alt=":(" class="wp-smiley"> </div>';

}else   {
echo"<p id='result_fail'>No puede exceder la cantidad especificada de caracteres. </p>";
} 
```

如果您不显示消息 No puede exceder la cantidad especificada de caracteres。if ( (strlen($subtitle) <= 75) && (strlen($subtitulo) <= 75) && (strlen($texto) <= 5000) == false 然后在您的代码中添加“;”（没有开始）：

```
}else {
$result = '<div class="result_fail">No se pudo crear el archivo <img src="http://web.tursos.com/wp-includes/                        images/smilies/icon_sad.gif" alt=":(" class="wp-smiley"> </div>';

}**;**
else   {
echo"<p id='result_fail'>No puede exceder la cantidad especificada de caracteres. </p>";
} 
```

# python - 从 HTML 字符串中删除所有 div 标签

> ID：15796994
> 
> 赞同：2
> 
> 时间：2013-04-03T20:04:15.800
> 
> 标签：python, regex

我正在尝试剥离所有 div。

输入：

```
<p>111</p>

<div class="1334">bla</div>

<p>333</p>

<p>333</p>

<div some unkown stuff>bla2</div> 
```

期望的输出：

```
 <p>111</p>

    <p>333</p>

    <p>333</p> 
```

我试过这个，但它不工作：

```
release_content = re.sub("/<div>.*<\/div>/s", "", release_content) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T20:18:34.623

[不要对这个问题使用正则表达式](https://stackoverflow.com/a/1732454/1253312)。使用 html 解析器。这是 Python 中使用 BeautifulSoup 的解决方案：

```
from BeautifulSoup import BeautifulSoup

with open('Path/to/file', 'r') as content_file:
    content = content_file.read()

soup = BeautifulSoup(content)
[div.extract() for div in soup.findAll('div')]

with open('Path/to/file.modified', 'w') as output_file:
    output_file.write(str(soup)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T20:06:03.207

python 中的正则表达式模式不需要任何分隔符：

```
release_content = re.sub("<div>.*<\/div>", "", release_content) 
```

你确定`div`s 没有任何属性吗？嵌套`div`的 s 会发生什么？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T20:06:25.710

您正在使用*贪婪*运算符：`*`. 它会在停止之前尝试尽可能多的匹配。您可以尝试使用非贪婪版本，`*?`. 只要您没有嵌套`<div>`标签，您就可以了。

```
release_content = re.sub("(?s)<div>.*?<\/div>", "", release_content) 
```

如果你可以有嵌套`<div>`标签，那么你会想要使用像[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)这样的 HTML 库。

根据您的编辑，要考虑属性，您可以简单地修改`<div>`模式的前导：

```
release_content = re.sub("(?s)<div(?: [^>]*)?>.*?<\/div>", "", release_content) 
```

# codeigniter - 在 CodeIgniter 中通过 URL 传递参数

> ID：15796996
> 
> 赞同：-1
> 
> 时间：2013-04-03T20:04:18.173
> 
> 标签：codeigniter, url, encryption, urlencode, urldecode

我在从 url 传递参数时遇到问题。我使用的功能有时会给出正确的结果，有时不会。

这是我的控制器功能：

```
 public function link_gen(){
    $text = "i have lost my password please help me";

    $encrypted_text = $this->encrypt->encode($text);
    $encrypted_url = urlencode($encrypted_text);
    echo $encrypted_url. br();

    echo br(). $this->retrive(urldecode($encrypted_url));

    echo anchor('encryption/ret_back?username='.$encrypted_url, 'click me'); 
```

// echo anchor('encryption/ret_back/'.$encrypted_url, '点击我'); }

```
public function ret_back(){ 
```

// 回声 br()。$this->retrive(urldecode($str));

```
 $user = $this->input->get('username');
    echo br(). $this->retrive(urldecode($user));

    echo $user. br();
    echo "hellooooo". br();
} 
```

为了测试，我加密了一个文本，然后在 URL 中使用 对其进行编码`urlencode()`，然后我使用 URL 将此字符串传递给另一个函数，然后使用 URL 中的字符串解码`urldecode()`，然后对文本进行解码。但是当我运行它时，有时会出现解码的文本，有时不会。

谁能告诉我这个的原因和解决方案？

我想在“忘记密码”模块中使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:09:11.483

这取决于您如何创建链接以及如何从 url 检索数据。

无论如何，这些都是获取 url 数据的简单示例：

1.  `get from $_GET[] (http://site.com/?q=hello+world)` 在这种情况下，您将获得参数 q`echo $this->input->get('q',true);`

2.  `get data from uri segments (http://site.com/id/230)` 在这种情况下，您通过以下方式获得 id 值`echo $this->uri->segment(2);`

那么，如果 url 中的数据存在，则系统不可能没有得到，所以打开 url 时请确保数据在您的 url 中。

# php - MySQL：组合来自两个表的多个值

> ID：15796997
> 
> 赞同：0
> 
> 时间：2013-04-03T20:04:21.167
> 
> 标签：php, mysql, join

我正在制作一个互动节日节目，并决定将信息保存在数据库中以便于显示和搜索。每个节目可以用三种不同的语言呈现，它们可以有一个或多个演出时间，以及许多不同的艺术家。所以有很多东西会因节目而异，这就是为什么最好将一些信息放在他们自己的表格中。尤其是艺术家，因为同一位艺术家可能会出现在许多不同的节目中，并且每个节目的艺术家人数各不相同。

到目前为止，我有一个主表，其中包含节目标题、说明、演出时间、票价等。我希望艺术家有自己的表，并通过他们的 ID 引用艺术家并将它们作为 PHP 脚本附加到不同的节目循环通过主表。

1.  如何从主表的另一个表中引用艺术家 ID？

2.  从他们的表中获取艺术家的好查询是什么样的？

表格（初步计划）：

**主表**

```
id | show title | show date | description | performers
------------------------------------------------------
1  | Beethoven  | 13.4.2013 | A classic   | 1,35,22,3
2  | Mozart     | 14.4.2013 | Fantastic   | 9,4,66

etc.. 
```

**艺术家表**

```
id | name  | instrument |
-------------------------
1  | Steve | Violin     |
2  | Alex  | Piano      |

etc... 
```

“表演者”列中的数字将对应于艺术家表中的 ID。不过，不确定这是引用它们的正确方法。然后 PHP 脚本将两者结合起来并输出一个完整的节目项目。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:58:55.280

以下是我将如何设置数据模式：

```
CREATE TABLE `artists` (
  `artist_id` int(10) unsigned NOT NULL auto_increment,
  `artist_name` varchar(100) NOT NULL default '',
  `instrument` varchar(100) NOT NULL default '',
  PRIMARY KEY  (`artist_id`)
) TYPE=MyISAM AUTO_INCREMENT=1 ;

CREATE TABLE `Shows` (
  `show_id` int(11) NOT NULL auto_increment,
  `show_title` varchar(255) NOT NULL default '',
  `description` varchar(255) NOT NULL default '',
  `language` varchar(255) NOT NULL default '',
  PRIMARY KEY  (`show_id`)
) TYPE=MyISAM AUTO_INCREMENT=1 ;

CREATE TABLE `show_times` (
  `show_time_id` int(10) unsigned NOT NULL auto_increment,
  `show_id` int(10) unsigned NOT NULL default '0',
  `show_date` date NOT NULL default '0000-00-00',
  `show_time` time NOT NULL default '00:00:00',
  PRIMARY KEY  (`show_time_id`)
) TYPE=MyISAM AUTO_INCREMENT=1 ;

CREATE TABLE `show_time_artist_lookup` (
  `show_time_id` int(10) unsigned NOT NULL default '0',
  `artist_id` int(10) unsigned NOT NULL default '0',
  PRIMARY KEY  (`show_time_id`,`artist_id`)
) TYPE=MyISAM; 
```

这将允许您在不同的日期/时间使用相同的演出信息。然后艺术家将被绑定到使用查找表显示时间。

编辑：实际上对于语言，由于您有一小部分选项，您可以使用二进制数学并将一个很小的数字存储在单个字段中。例如：

1 = 英语 2 = 意大利语 4 = 德语

您可以存储 TinyINT 值（将架构更改为此）

```
`language` tinyint(2) NOT NULL default '1', 
```

与三个值中的任何一个或组合。例如，如果节目以英语和意大利语提供，您将存储值 3。对于所有三种语言，它将是 7。然后，当您提取节目数据时，您可以使用任何编程语言进行二进制数学比较来解码它. 这是一个解释如何在 PHP 中执行此操作的页面：[http ://www.litfuel.net/tutorials/bitwise.htm](http://www.litfuel.net/tutorials/bitwise.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T21:00:12.823

假设您有一个`show`包含两列的表：show_id、name。其中 show_id 是主键。假设您有一个`artist`包含两列的表：artist_id、name。其中artist_id 是主键。

您需要的称为 m:n 关系，这意味着一个艺术家可以分配给多个节目，而一个节目可以有多个艺术家。为此，您需要创建一个新表来存储此关系。让我们`show_artist`用两列 show_id、artist_id 来命名它。两列都是 PRIMARY KEY。此表中的每一行将存储一位特定艺术家（由艺术家 ID 定义）和一场演出（由 show_id 定义）之间的一种关系

如果您知道 show_id，则可以使用以下查询获取该节目中的所有艺术家姓名：

```
SELECT name FROM show_artist JOIN artist USING (artist_id) WHERE show_id = [YOUR SHOW ID] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T21:01:16.840

您进行查询的方式是使用通常称为“连接”表的方法。这是一个额外的表格，您可以在其中一列中列出节目 ID，在另一列中列出艺术家 ID。例如：

**MainArtists 表**

```
showid | artistid
-------------------
1      | 1
1      | 2
2      | 1 
```

在这个连接表中，Steve 和 Alex 都在贝多芬表演中，但只有 Steve 在莫扎特表演中。

要取出它们，您可以在 mysql 中使用 join 命令：

```
SELECT * FROM Main
INNER JOIN MainArtists ON ShowArtists.showid = Main.id
INNER JOIN Artists ON Artists.id = MainArtists.artistid 
```

此查询将为每个节目的每位艺术家提供一行。如果您只想要节目 #1 中的艺术家列表，您可以在末尾添加“WHERE main.id = 1”，依此类推。

最好将 Main 和 Artists 中的 id 列分配为主键，并将 MainArtists 中的 showid 和 Artistid 列分配为链接回各自表的外键。互联网上有很多关于连接和外键/主键关系的资源，因此搜索这些术语应该会对您有所帮助。