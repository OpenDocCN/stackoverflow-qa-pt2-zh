# StackOverflow 问答 12628000-12628999

# php - 是否可以在不修改 php.ini 文件的情况下启用 php 中的 mssql 模块？

> ID：12628001
> 
> 赞同：1
> 
> 时间：2012-09-27T18:39:02.893
> 
> 标签：php, sql-server

如何在不修改 php.ini 文件的情况下在 php 中启用 mssql 模块。

实际上我没有访问服务器设置，我的网站在哪里上传。

我能用任何像 ini_set() 这样的 php 代码来实现吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:51:37.727

这是做不到的！

注意：您的共享主机必须运行 windows（许多运行 linux）并且必须安装 sql server。如果是windows机器，那么启用mssql的唯一方法就是修改ini文件，重启webserver。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T18:53:57.260

模块在 php 的（网络服务器）启动时加载。之后你不能这样做

# haskell - 是否可以并行运行多个提示实例？

> ID：12628003
> 
> 赞同：3
> 
> 时间：2012-09-27T18:39:10.190
> 
> 标签：haskell

有没有办法在运行时启动两个提示解释器并随后将较小的计算分配给一个或另一个？当我为一个小表达式调用提示（例如，输入到网站中）时， - 没有可靠的测试 - 在我看来，启动/加载提示的时间大约是一秒。如果实例已经启动，那么第二个将被剃掉。

该提示似乎没有我可以启动它的功能，并保持它很好地等待以后使用。

（自动）插件当然是另一个选择，但我认为这更适合模块，而对于较小的计算则不太优雅。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T04:28:17.277

GHC api，它的提示是根据（各种插件包也是）实现的，不支持并发使用。

不过，您可以让提示运行。它是 的一个实例`MonadIO`。

```
interpreterLoop :: (MonadIO m, Typeable) a => Chan ((MVar a, String)) -> InterpreterT m ()
interpreterLoop ch = do
    (mvar, command) <- liftIO $ readChan ch
    a <- interpret command $ argTypeWitness mvar
    liftIO $ putMVar mvar a
    interpreterLoop ch
  where
    argTypeWitness :: MVar a -> a
    argTypeWitness = undefined -- this value is only used for type checking, never evaluated

runInLoop :: Typeable a => Chan ((MVar a, String)) -> String -> IO a
runInLoop ch command = do
    mvar <- newEmptyMVar
    writeChan ch (mvar, command)
    takeMVar mvar 
```

（我没有对此进行测试，所以我可能遗漏了一两个细节，但基本的想法是可行的。）

# google-chrome-extension - 当 declarativeWebRequest 可用于稳定通道时

> ID：12628008
> 
> 赞同：0
> 
> 时间：2012-09-27T18:39:32.250
> 
> 标签：google-chrome-extension

有谁知道 declarativeWebRequest API 何时会从开发通道中移出？它从版本 21（或 22）开始可用，现在开发版本是 23，并且 beta 通道没有实现此 API。我写了一个使用这个 API 的应用程序，我想知道它什么时候发布。

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-11-10T23:23:33.540

declarativeWebRequest API 现在在 beta 通道中可用。应该很快就会进入稳定通道...

# android - 无法使用 SQLiteAssetHelper 打开数据库

> ID：12628014
> 
> 赞同：2
> 
> 时间：2012-09-27T18:40:02.590
> 
> 标签：android, sqlite

> **可能重复：**
> [Android sqlite 返回：错误代码 = 14](https://stackoverflow.com/questions/7316191/android-sqlite-returned-error-code-14)

我已经使用 SQLiteAssetHelper 类/库从 assets/databases 文件夹中操作数据库，如该[链接](https://github.com/jgilfelt/android-sqlite-asset-helper)中所示。我完全按照所有说明进行操作，但我仍然无法访问数据库。

```
09-27 19:35:46.417: I/Database(27474): sqlite returned: error code = 14, msg = cannot open file at source line 25467
09-27 19:35:46.417: E/Database(27474): sqlite3_open_v2("/data/data/com.gatec.douaa/databases/data", &handle, 2, NULL) failed
09-27 19:35:46.428: W/SQLiteAssetHelper(27474): could not open database data - unable to open database file
09-27 19:35:46.428: W/SQLiteAssetHelper(27474): copying database from assets...
09-27 19:35:46.447: W/SQLiteAssetHelper(27474): extracting file: 'database.db'...
09-27 19:35:46.477: E/SQLiteAssetHelper(27474): Couldn't open data for writing (will try read-only):
09-27 19:35:46.477: E/SQLiteAssetHelper(27474): com.readystatesoftware.sqliteasset.SQLiteAssetException: Missing databases/data.zip file in assets or target folder not writable 
```

代码：

```
public class MyDatabase extends SQLiteAssetHelper {

    private static final String DATABASE_NAME = "data";
    private static final int DATABASE_VERSION = 1;

    public MyDatabase(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);

    } 
```

请问有什么帮助吗？不知道问题的根源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T20:39:27.173

为什么将 .db 文件放在 .zip 中？请尝试将其放入未归档的资产中。或者，您可以尝试在 zip 存档中放入一个没有问题的 .db 文件，以了解问题出在哪里。

# java - CXF WADL2Java 不产生正确的输入参数

> ID：12628015
> 
> 赞同：3
> 
> 时间：2012-09-27T18:40:03.650
> 
> 标签：java, cxf, wadl

我浏览了文档，它帮助我找出了我遇到的几个问题，但没有解决以下两个问题：

1) 我有一个 get(GET) 方法：`get(@Context Request request, @PathParam("isbn")String isbn)`
如何为它制定 WADL，以便在生成的 Java 代码中获得 @Context？

2) 我有一个更新 (PUT) 方法：`update(@PathParam("isbn") String isbn, BookState st)`
如何制定 WADL 以在生成的 Java 代码中获取 BookState？

这是我当前的 WADL，它不这样做：

```
<resource path="/{isbn}">

        .... 
        <method name="GET" id="get" >
                <request />
                <response>
                        <representation mediaType="application/xml" element="prefix1:book" />
                </response>
        </method>
        <method name="PUT" id="update" >
                <request>
                        <representation mediaType="application/xml" element="prefix1:book" />

                </request>
                <response>
                        <representation mediaType="application/octet-stream" />
                </response>
        </method>
</resource> 
```

# c# - 将 2 个数据表合并为 1 个具有相同行数的数据表。

> ID：12628020
> 
> 赞同：1
> 
> 时间：2012-09-27T18:40:24.337
> 
> 标签：c#, asp.net

如何将两个数据表合并到同一行。我正在使用不同的存储过程将数据放入数据集中。在使用 c# 的 asp.net 中，我想合并它们，以便与表 1 的行数相同，并从表 2 中添加一列。

例如：

```
DataTable table1 = dsnew.Tables[0];
DataTable table2 = dsSpotsLeft.Tables[0];
table1.Merge(table2); 
```

这是取我 4 行而不是 2 行。我在这里想念什么？提前致谢！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T06:28:17.600

在这种情况下您不能使用该方法`Merge`，而是应该创建新的`DataTable`dt3，然后根据表 1 和表 2 添加列和行：

```
var dt3 = new DataTable();

var columns = dt1.Columns.Cast<DataColumn>()
                  .Concat(dt2.Columns.Cast<DataColumn>());

foreach (var column in columns)
{
    dt3.Columns.Add(column.ColumnName, column.DataType);
}

//TODO Check if dt2 has more rows than dt1...
for (int i = 0; i < dt1.Rows.Count; i++)
{
    var row = dt3.NewRow();
    row.ItemArray = dt1.Rows[i].ItemArray
                       .Concat(dt2.Rows[i].ItemArray).ToArray();

    dt3.Rows.Add(row);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T19:26:05.113

在不了解这些表的设计的情况下，其中一些是猜测。

听起来您想要执行的是`JOIN`. 例如，如果您有一张如下所示的表：

```
StateId, StateName 
```

和另一个看起来像的桌子

```
EmployeeId, EmployeeName, StateId 
```

你想得到一个看起来像的结果集

```
EmployeeId, EmployeeName, StateId, StateName 
```

您将执行以下查询：

```
SELECT Employee.EmployeeId, Employee.EmployeeName, Employee.StateId, State.StateName
FROM Employee
INNER JOIN State ON Employee.StateId = State.StateId 
```

这会为您提供一个结果集，但不会更新任何数据。同样，推测您的数据集，我假设您的 Employee 表版本可能看起来像结果集：

```
EmployeeId, EmployeeName, StateId, StateName 
```

但`StateName`需要有人居住。在这种情况下，您可以编写查询：

```
UPDATE Employee
SET Employee.StateName = State.StateName
FROM Employee
INNER JOIN State ON Employee.StateId = State.StateId 
```

在 SQL Server 中测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T01:38:15.633

假设你有表`Category`和`Product`相关的`CategoryID`，然后试试这个

```
var joined = from p in prod.AsEnumerable()
             join c in categ.AsEnumerable()
             on p["categid"] equals c["categid"]
             select new
             {
                 ProductName = p["prodname"],
                 Category = c["name"]
             };

var myjoined = joined.ToList(); 
```

来源

*   [对 DataTable 的 LINQ 查询](https://stackoverflow.com/questions/10855/linq-query-on-a-datatable)
*   [C#中DataTables的内连接](https://stackoverflow.com/questions/665754/inner-join-of-datatables-in-c-sharp)
*   [http://social.msdn.microsoft.com/Forums/en-US/adodotnetdataset/thread/ecb6a83d-b9b0-4e64-8107-1ca8757fe58c/](http://social.msdn.microsoft.com/Forums/en-US/adodotnetdataset/thread/ecb6a83d-b9b0-4e64-8107-1ca8757fe58c/)

那是一个 LINQ 解决方案。您还可以遍历第一个数据表并从第二个数据表添加列

# php - AJAX 拖放服务器重新排序

> ID：12628022
> 
> 赞同：0
> 
> 时间：2012-09-27T18:40:31.427
> 
> 标签：php, datatables

我正在使用[jQuery DataTables Row Reordering 插件](http://code.google.com/p/jquery-datatables-row-reordering/)对页面上的测验列表进行重新排序。处理[AJAX 响应](http://code.google.com/p/jquery-datatables-row-reordering/wiki/ServerSideIntegration)并将更改持久保存到数据库（在我的例子中是 MySQL）的最佳方法是什么？

目前，我只是从数据库中提取测验列表，将它们传递给执行重新排序的函数，然后循环遍历结果以将测验保存回数据库。这是我的重新排序函数，带有示例测试用例和输出：

```
<?php
 /**
 * Reorders a list of quizzes.
 * Assumes that the input list of quizzes is in sorted
 * order and looks like this:
 *
 *  $quizzes = array(array('id'=>27, 'sort_order'=>1), ...);quiz_id:{$quiz['id']} from: $from to: $to dir: $dir\n";
        if($counter === $to) {
            $next = $quiz;
        } else if(count($quizzes) === $from) {
            array_pop($quizzes); // discard
            continue;
        } else {
            $next = array_pop($quizzes);
        }

        $next['sort_changed'] = ($next['sort_order'] !== $counter);
        $next['sort_diff'] = $counter - $next['sort_order'];
        $next['sort_order'] = $counter;

        $reordered[] = $next;
        $counter--;
    }

    return array_reverse($reordered);
}
?> 
```

例子：

```
<?php
$quizzes = array(
    array('id' => 1, 'sort_order' => 1),
    array('id' => 2, 'sort_order' => 2),
    array('id' => 3, 'sort_order' => 3),
    array('id' => 4, 'sort_order' => 4),
    array('id' => 5, 'sort_order' => 5)
);
$from = 4;
$quiz = $quizzes[$from-1];
$to = 1;

$result = reorder($quizzes, count($quizzes), $quiz, $from, $to, 'back');
print json_encode($result);
?> 
```

输出如下：

```
[{"id":4,"sort_order":1,"sort_changed":true,"sort_diff":-3},
{"id":1,"sort_order":2,"sort_changed":true,"sort_diff":1},
{"id":2,"sort_order":3,"sort_changed":true,"sort_diff":1},
{"id":3,"sort_order":4,"sort_changed":true,"sort_diff":1},
{"id":5,"sort_order":5,"sort_changed":false,"sort_diff":0}] 
```

这是我想太多了吗？有没有更简单的解决方案？

# ruby-on-rails - Rails：将 .pdf 文件存储在 Dropbox 中

> ID：12628023
> 
> 赞同：1
> 
> 时间：2012-09-27T18:40:32.653
> 
> 标签：ruby-on-rails, paperclip, download, dropbox

我正在使用回形针、保管箱和回形针保管箱 gem 来从单个保管箱帐户上传和下载旧考试 (.pdf)，以避免为 Amazon S3 服务付费。我可以使用以下控制器方法毫无问题地将文件上传到帐户：

```
def upload_exam
  if params[:document]
    @exam = Exam.new(:course_id => params[:course], :user_id => current_user.id, 
    :professor => params[:professor], :term => params[:term], 
    :document => params[:document], :description => params[:description])
  respond_to do |format|
  if @exam.save
    format.html { redirect_to test_bank_path, notice: 'Exam was successfully uploaded.' }
  else
    format.html { render action: "upload_exam" }
  end
end 
```

为了下载文件，我使用了相同的 send_file 方法，该方法可以从 download_exam 控制器中我的应用程序的公共目录发送回形针文件：

```
send_file @exam.document.path, :filename => @exam.document_file_name,
:type => @exam.document_content_type, :disposition => "attachment" 
```

但这会运行错误

```
Cannot read file /documents/documents/18/original/ASCE_7-05_Chapter_3.pdf 
```

我相信我的应用程序正在公用文件夹中查找该文件，而我的研究还没有找到从保管箱文件夹下载的方法。如果有人有这方面的经验，请帮忙！！

# c# - 将 Web 浏览器中的 HTML 节点/参数保存为字符串

> ID：12628032
> 
> 赞同：0
> 
> 时间：2012-09-27T18:41:01.110
> 
> 标签：c#, html, c#-4.0

我提前为我的错误术语道歉，我对 C# 和一般编码都很陌生。

我想扫描我的网络浏览器（webBrowser1）的 html 并找到某个参数/节点的值。我知道如何使用 getElementById 虽然在这种情况下不起作用。

我需要扫描的 HTML 部分在这里：

```
<body>
   <div id="wrap">
       <div id="main" role ="main" class="...">
           <div style="width:100%; margin...">
               <applet code="...">
                   <param name="lotsOfParamsHere" value="...">
                   <param name="server" value="myString1">
                   <param name="port" value="myString2">
                   <param name="mppass" value="myString3">
               </applet>
            </div>
        </div>
    </div>
</body> 
```

我想将服务器、端口和 mppass 的值保存为我的程序中的字符串。我查看了 HTMLAgilityPack 和常用方法，但我根本不擅长从 HTML 中获取数据。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T18:47:50.387

```
HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
doc.LoadHtml(html);

var dict = doc.DocumentNode.Descendants("param")
    .ToDictionary(n=>n.Attributes["name"].Value,n=>n.Attributes["value"].Value); 
```

现在您可以将其用作

```
var port = dict["port"]; 
```

* * *

或者没有 HtmlAgilityPack，您可以直接从 webbrowser 控件中获取它

```
var dict = webBrowser1.Document.GetElementsByTagName("param")
          .Cast<HtmlElement>()
          .ToDictionary(p => p.GetAttribute("name"), p => p.GetAttribute("value")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T19:14:00.613

获取价值...

```
$(document).ready(function() {

alert($('#wrap param[name=server]').val());

}); 
```

# sql - 想知道如何正确授予 SQL Server 上已创建用户的权限

> ID：12628042
> 
> 赞同：1
> 
> 时间：2012-09-27T18:41:27.693
> 
> 标签：sql, sql-server, grant

我在 SQL Server 上创建了一些用户，但对于我是否授予我的 LOGIN 或 USER 帐户“更改任何登录名”或“更改任何链接服务器”有点困惑？

众所周知，在 SQL Server 上，您按以下顺序创建用户：

1.  创建 LOGIN sysUser1（在主数据库中）
2.  为 LOGIN sysUser1 创建 USER myUser1（在用户数据库中）
3.  创建模式 myUser1 授权 myUser1
4.  然后，根据需要为 myUser1 运行 sp_addrolemember
5.  然后，做赠款

我很困惑我是否应该：

1.  授予更改任何登录到 myUser1

或者

1.  授予更改任何登录到 sysUser1

谁能澄清一下？我想错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T19:30:33.760

ALTER LOGIN 是服务器级别的权限，因此您不能将其授予数据库用户。在您的情况下，您需要将其授予 sysUser1 。

请参阅[http://msdn.microsoft.com/en-us/library/ms186717.aspx](http://msdn.microsoft.com/en-us/library/ms186717.aspx)

编辑：链接服务器的 Dito。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T19:32:13.167

登录名和链接服务器都是实例级别的对象，而不是数据库级别的对象，因此这些权限都需要应用于登录名，而不是用户。

如果您使用的是 SQL Server 2012，则可以创建自己的实例级别角色，但在 2008 及以下版本中，您仅限于内置服务器角色。

有一个名为 setupadmin 的服务器角色，它允许成员管理链接服务器。

# java - 使用 Maven 构建错误

> ID：12628043
> 
> 赞同：0
> 
> 时间：2012-09-27T18:41:29.277
> 
> 标签：java, eclipse, gwt, maven-2, jonas

在 Eclipse 下，我刚刚对 Java 代码进行了一些更改，之后，我自动进行了 Clean / Build（清理我的 4 个项目），然后对包含入口点的项目进行 GWT 编译（此项目的 GWT 编译） ，最后导出包含入口点的项目的WAR（Export / War File）。我必须将 WAR 放在 Jonas 服务器的目录 webapps/autoload 上。我停止 Jonas 服务器，然后重新启动 Jonas 服务器。

问题是：当我通过 Internet Explorer 访问应用程序服务器时，我最后一次更改的代码不存在。但是，当我在 localhost:8080 中执行应用程序时，它们会出现。

我怀疑我的 WAR 是从先前的编译中创建的。你认为这是问题吗？我看到了一个问题：当我清理项目时，对于 3 个项目，我有这个非常普遍的错误：

```
27/09/12 20:16:36 CEST: Build errors for my_project;
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal
org.apache.maven.plugins:maven-compiler-plugin:2.0.2:compile (default-compile) on project alizesWeb: Compilation failure 
```

首先，我该如何解决这个非常普遍且未解释的错误？

其次，您是否认为这个错误是我的问题的原因（没有我最后更改的应用程序）。

第三，如果没有，我该怎么做才能将我的修改定位并集成到应用程序中？

这是 Maven 控制台的全部内容：

```

    27/09/12 21:24:39 CEST: D:\utilisateurs\tcampos\Desktop\workspaceHeadAlizesVM\alizesWeb
    27/09/12 21:24:39 CEST: mvn -B -s D:\utilisateurs\tcampos\Desktop\MavenRepository\settings.xml clean
    27/09/12 21:24:47 CEST：Maven 生成器：AUTO_BUILD
    27/09/12 21:24:54 CEST：使用现有的启动配置
    27/09/12 21:24:59 CEST: D:\utilisateurs\tcampos\Desktop\workspaceHeadAlizesVM\alizesWeb
    27/09/12 21:24:59 CEST: mvn -B -s D:\utilisateurs\tcampos\Desktop\MavenRepository\settings.xml
    27/09/12 21:25:13 CEST: D:\utilisateurs\tcampos\Desktop\workspaceHeadAlizesVM\clas2CoreGwt
    27/09/12 21:25:13 CEST: mvn -B -s D:\utilisateurs\tcampos\Desktop\MavenRepository\settings.xml clean
    27/09/12 21:25:16 CEST：Maven 生成器：AUTO_BUILD
    27/09/12 21:25:21 CEST：使用现有的启动配置
    27/09/12 21:25:22 CEST: D:\utilisateurs\tcampos\Desktop\workspaceHeadAlizesVM\clas2CoreGwt
    27/09/12 21:25:22 CEST: mvn -B -s D:\utilisateurs\tcampos\Desktop\MavenRepository\settings.xml
    27/09/12 21:25:31 CEST: D:\utilisateurs\tcampos\Desktop\workspaceHeadAlizesVM\clas2CoreServer
    27/09/12 21:25:31 CEST: mvn -B -s D:\utilisateurs\tcampos\Desktop\MavenRepository\settings.xml clean
    27/09/12 21:25:32 CEST：Maven 生成器：AUTO_BUILD
    27/09/12 21:25:40 CEST：使用现有的启动配置
    27/09/12 21:25:42 CEST: D:\utilisateurs\tcampos\Desktop\workspaceHeadAlizesVM\clas2CoreServer
    27/09/12 21:25:42 CEST: mvn -B -s D:\utilisateurs\tcampos\Desktop\MavenRepository\settings.xml
    27/09/12 21:25:49 CEST: D:\utilisateurs\tcampos\Desktop\workspaceHeadAlizesVM\alizesServices
    27/09/12 21:25:49 CEST: mvn -B -s D:\utilisateurs\tcampos\Desktop\MavenRepository\settings.xml clean
    27/09/12 21:25:59 CEST：使用现有的启动配置
    27/09/12 21:26:01 CEST: D:\utilisateurs\tcampos\Desktop\workspaceHeadAlizesVM\alizesServices
    27/09/12 21:26:01 CEST: mvn -B -s D:\utilisateurs\tcampos\Desktop\MavenRepository\settings.xml
    27/09/12 21:26:06 CEST：Maven 生成器：AUTO_BUILD
    27/09/12 21:31:20 CEST：Maven 生成器：FULL_BUILD 需要FullBuild
    27/09/12 21:31:20 CEST：[INFO] 使用“UTF-8”编码复制过滤的资源。
    27/09/12 21:31:20 CEST: [INFO] 跳过不存在的资源目录 D:\utilisateurs\tcampos\Desktop\workspaceHeadAlizesVM\clas2CoreServer\src\main\resources
    27/09/12 21:31:20 CEST：[INFO] 无需编译 - 所有类都是最新的
    27/09/12 21:31:20 CEST：[INFO] 使用“UTF-8”编码复制过滤的资源。
    27/09/12 21:31:20 CEST：[INFO] 跳过不存在的资源目录 D:\utilisateurs\tcampos\Desktop\workspaceHeadAlizesVM\clas2CoreServer\src\test\resources
    27/09/12 21:31:24 CEST：Maven 生成器：FULL_BUILD 需要FullBuild
    27/09/12 21:31:24 CEST：[INFO] 使用“UTF-8”编码复制过滤的资源。
    27/09/12 21:31:24 CEST: [INFO] 复制 175 个资源
    27/09/12 21:31:25 CEST: [INFO] 将 174 个源文件编译到 D:\utilisateurs\tcampos\Desktop\workspaceHeadAlizesVM\clas2CoreGwt\target\classes
   27/09/12 21:31:27 CEST：clas2CoreGwt 的构建错误；org.apache.maven.lifecycle.LifecycleExecutionException: 无法执行目标 org.apache.maven.plugins:maven-compiler-plugin:2.0.2:compile (default-compile) on project clas2CoreGwt: 编译失败
    27/09/12 21:31:50 CEST：Maven 生成器：FULL_BUILD 需要FullBuild
    27/09/12 21:31:50 CEST：[INFO] 使用“UTF-8”编码复制过滤的资源。
    27/09/12 21:31:50 CEST：[INFO] 复制 5 个资源
    27/09/12 21:31:50 CEST: [INFO] 复制 144 个资源
    27/09/12 21:31:50 CEST：[INFO] 复制 95 个资源
    27/09/12 21:31:50 CEST：[信息] 没有要编译的资源
    27/09/12 21:31:50 CEST：[INFO] 使用“UTF-8”编码复制过滤的资源。
    27/09/12 21:31:50 CEST: [INFO] 跳过不存在的资源目录 D:\utilisateurs\tcampos\Desktop\workspaceHeadAlizesVM\alizesServices\src\test\resources
    27/09/12 21:33:46 CEST：Maven 生成器：FULL_BUILD 需要FullBuild
    27/09/12 21:33:46 CEST：[INFO] 使用“UTF-8”编码复制过滤的资源。
    27/09/12 21:33:46 CEST: [INFO] 跳过不存在的资源目录 D:\utilisateurs\tcampos\Desktop\workspaceHeadAlizesVM\alizesWeb\src\main\resources
    27/09/12 21:33:46 CEST: [INFO] 将 175 个源文件编译到 D:\utilisateurs\tcampos\Desktop\workspaceHeadAlizesVM\alizesWeb\target\classes
    27/09/12 21:33:47 CEST：alizesWeb 的构建错误；org.apache.maven.lifecycle.LifecycleExecutionException: 未能执行目标 org.apache.maven.plugins:maven-compiler-plugin:2.0.2:compile (default-compile) on project alizesWeb: 编译失败
    27/09/12 21:34:08 CEST：Maven 生成器：AUTO_BUILD

```

它在构建我的工作区的 4 个项目之前停止。
在这个 Maven 控制台中，用粗体字可以看到，对于我的工作区中的至少 2 个项目，alizesWeb 和 clas2coreGwt，一个存在构建错误。
我问我这些错误是否不是我上面描述的问题的原因（我的最后一次更改没有放在我的应用程序服务器中）

**这是写在“日志错误”视图中的错误：**

```
 org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.0.2:compile (default-compile) on project alizesWeb: Compilation failure
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:581)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:324)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:247)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:104)
    at org.maven.ide.eclipse.internal.embedder.MavenImpl.execute(MavenImpl.java:233)
    at org.maven.ide.eclipse.internal.project.GenericBuildParticipant.executePostBuild(GenericBuildParticipant.java:139)
    at org.maven.ide.eclipse.internal.project.GenericBuildParticipant.build(GenericBuildParticipant.java:78)
    at org.maven.ide.eclipse.internal.builder.MavenBuilder.build(MavenBuilder.java:153)
    at org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:627)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:170)
    at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:201)
    at org.eclipse.core.internal.events.BuildManager$1.run(BuildManager.java:253)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T19:46:26.677

编译失败意味着你的代码是无法编译的，所以没有一个可行的 jar/war 是一个原因，是的。

Eclipse 应该在“问题”视图（窗口-> 打开视图）中告诉您问题出在哪里。正如您所说，该消息是一般性的，因此您需要找出详细信息才能修复它。

# javascript - 在检查每个键、值对 Javascript 时遍历 Hashtable

> ID：12628045
> 
> 赞同：12
> 
> 时间：2012-09-27T18:41:33.033
> 
> 标签：javascript, hash, foreach

> **可能重复：**
> [如何枚举 javascript 对象的属性？](https://stackoverflow.com/questions/85992/how-do-i-enumerate-the-properties-of-a-javascript-object)

我正在尝试遍历哈希表。但是每次运行时我都需要检查值。

我将如何使用 foreach 表来执行此操作？在 sudo 代码中，我想这样做：

```
var tHash = {
 name: n,
 date: d,
 labels: l,
}

foreach(value in tHash){
   if(tHash.name== somevalue){do something};
   if(tHash.label == somevalue) {do something}; 
```

这基本上就是我想做的，但不确定如何开始。

编辑：这不仅仅是一个哈希，它是一个哈希数组......我应该在开始时提到我放置代码的方式是我使用 for 循环加载哈希数组的方式。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-27T18:52:44.627

您可以使用循环遍历 Hashobject 的键`for ... in`。您获取 Hash 的每个属性（键），还可以使用该属性访问 Value。

```
var tHash = {
  name: "n",
  date: "d",
  labels: "l" 
}

for (var key in tHash){
  console.log(key + " -> " + tHash[key]));   
  // if (key == "name") doSomething();
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-27T18:46:32.670

这可以正常工作。

```
var tHash = {
 name: "Jeremy",
 date: "0",
 labels: 4
}

if (tHash.name === "Jeremy") {alert("Welcome, Master")};
if (tHash.labels !== 0) {alert("There is a label waiting")}; 
```

# php - PHP中奇怪的布尔评估行为

> ID：12628051
> 
> 赞同：0
> 
> 时间：2012-09-27T18:42:07.007
> 
> 标签：php, boolean, boolean-logic

让我与您分享一些PHP代码：

```
$var1 = '';

$var2 = 0;

echo '<pre>';
var_dump($var1 == $var2); //prints bool(true)
echo '</pre>';

echo '<pre>';
var_dump($var1 != $var2); //prints bool(false)
echo '</pre>';

echo '<pre>';
var_dump(!$var1 == $var2); //prints bool(false)
echo '</pre>';

echo '---<br />';

echo '<pre>';
var_dump($var1 === $var2); //prints bool(false)
echo '</pre>';

echo '<pre>';
var_dump($var1 !== $var2); //prints bool(true)
echo '</pre>';

echo '<pre>';
var_dump(!$var1 === $var2); //prints bool(false) .. WTFF????
echo '</pre>'; 
```

问题是......为什么最后一条语句`(! $var1 === $var2)` **不会**`($var !== $var2)`产生与???相同的结果？我的意思是，这是我们所期望的，不是吗？

我曾经交替使用这两种方式，但现在我只使用`!==`虽然我仍然不知道为什么另一种形式不起作用......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T18:44:36.663

`!$var1`是`TRUE`，`$var2`是`0`。

它们不相等，所以结果是`false`。

也许你对`!($var1 === $var2)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T18:45:04.447

最后一条语句被评估为：

```
(!$var1) === $var2 
```

因为`$var1`是一个假值（空字符串），反转它会给你一个真值（`1`），它不等于（当然也不相同！）`0`。因此，比较是`false`。

（请注意，我在这里故意使用术语“真实”和“虚假”，因为`''`和`0`不完全是`true`和`false`。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T18:46:07.327

这是一个[优先](http://php.net/manual/en/language.operators.precedence.php)事项：

not 运算符首先应用于`$var1`并产生*布尔值 true*。并且*布尔值 true*不完全等于*int 0*，因此它的计算结果为 false。

# android - 使用 Robolectric 和 AndroidAnnotations 进行 Android 测试

> ID：12628053
> 
> 赞同：3
> 
> 时间：2012-09-27T18:42:18.673
> 
> 标签：android, robolectric, android-annotations

我正在使用 AndroidAnnotations 开发应用程序，并希望使用 Robolectric 进行单元测试。

我无法让它工作。应用程序和测试放在单个项目中。源置于 下`/src/main/java`，并在 下进行测试`/src/test/java`。这两个文件夹都是源文件夹。

当使用 Eclipse JUnit 启动器从 Eclipse 运行测试时，我得到：

```
Class not found org.demoapp.MyActivityTest
java.lang.ClassNotFoundException: org.demoapp.MyActivityTest
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:248)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.loadClass(RemoteTestRunner.java:693) 
```

从命令行运行时，`mvn clean test`我得到：

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.3.2:compile (default-compile) on project demo-app: Compilation failure:
[ERROR] \demo-app\src\test\java\org\demoapp\MyActivityTest.java:[3,16] package org.junit does not exist
[ERROR] \demo-app\src\test\java\org\demoapp\MyActivityTest.java:[4,23] package org.junit.runner does not exist
[ERROR] \demo-app\src\test\java\org\demoapp\MyActivityTest.java:[6,33] package com.xtremelabs.robolectric does not exist
[ERROR] \demo-app\src\test\java\org\demoapp\MyActivityTest.java:[8,1] cannot find symbol
[ERROR] symbol: class RunWith
...
... 
```

尽管所有类都在 eclipse 中编译。

其实我不知道这里有什么问题。我应该从哪里开始？

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

    <modelVersion>4.0.0</modelVersion>
    <groupId>org.demoapp</groupId>
    <artifactId>demo-app</artifactId>
    <version>1.0-SNAPSHOT</version>
    <packaging>apk</packaging>
    <name>Demo :: App</name>

    <properties>
        <environment>development</environment>
    </properties>

    <dependencies>
        <dependency>
            <groupId>com.google.android</groupId>
            <artifactId>android</artifactId>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>org.apache.commons</groupId>
            <artifactId>commons-io</artifactId>
        </dependency>
        <dependency>
            <groupId>com.googlecode.libphonenumber</groupId>
            <artifactId>libphonenumber</artifactId>
        </dependency>
        <dependency>
            <groupId>com.google.code.gson</groupId>
            <artifactId>gson</artifactId>
        </dependency>
        <dependency>
            <groupId>commons-lang</groupId>
            <artifactId>commons-lang</artifactId>
        </dependency>
        <dependency>
            <groupId>com.googlecode.androidannotations</groupId>
            <artifactId>androidannotations</artifactId>
        </dependency>
        <dependency>
            <groupId>com.googlecode.androidannotations</groupId>
            <artifactId>androidannotations</artifactId>
            <classifier>api</classifier>
        </dependency>
        <dependency>
            <groupId>com.pivotallabs</groupId>
            <artifactId>robolectric</artifactId>
            <version>1.1</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.8.2</version>
            <scope>test</scope>
        </dependency>
    </dependencies>

    <build>
        <finalName>${project.artifactId}</finalName>

        <sourceDirectory>src</sourceDirectory>

        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                    <encoding>UTF-8</encoding>
                </configuration>
            </plugin>
            <plugin>
                <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                <artifactId>android-maven-plugin</artifactId>
                <version>3.3.0</version>
                <extensions>true</extensions>
                <configuration>
                    <manifest>
                        <debuggable>true</debuggable>
                    </manifest>
                </configuration>
                <executions>
                    <execution>
                        <id>manifestUpdate</id>
                        <phase>process-resources</phase>
                        <goals>
                            <goal>manifest-update</goal>
                        </goals>
                    </execution>
                    <execution>
                        <id>alignApk</id>
                        <phase>package</phase>
                        <goals>
                            <goal>zipalign</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>

        <pluginManagement>
            <plugins>
                <plugin>
                    <artifactId>maven-compiler-plugin</artifactId>
                    <version>2.3.2</version>
                </plugin>
                <plugin>
                    <artifactId>maven-jarsigner-plugin</artifactId>
                    <version>1.2</version>
                </plugin>
                <plugin>
                    <artifactId>maven-resources-plugin</artifactId>
                    <version>2.5</version>
                    <configuration>
                        <encoding>UTF-8</encoding>
                    </configuration>
                </plugin>

                <plugin>
                    <groupId>org.codehaus.mojo</groupId>
                    <artifactId>build-helper-maven-plugin</artifactId>
                    <version>1.5</version>
                </plugin>
                <plugin>
                    <groupId>org.eclipse.m2e</groupId>
                    <artifactId>lifecycle-mapping</artifactId>
                    <version>1.0.0</version>
                    <configuration>
                        <lifecycleMappingMetadata>
                            <pluginExecutions>
                                <pluginExecution>
                                    <pluginExecutionFilter>
                                        <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                                        <artifactId>android-maven-plugin</artifactId>
                                        <versionRange>[3.2.0,)</versionRange>
                                        <goals>
                                            <goal>manifest-update</goal>
                                        </goals>
                                    </pluginExecutionFilter>
                                    <action>
                                        <execute />
                                    </action>
                                </pluginExecution>
                            </pluginExecutions>
                        </lifecycleMappingMetadata>
                    </configuration>
                </plugin>
            </plugins>
        </pluginManagement>
    </build>

    <profiles>
        <profile>
            <id>development</id>
            <activation>
                <property>
                    <name>environment</name>
                    <value>!production</value>
                </property>
            </activation>
            <properties>
                <deployment.stage>In Development</deployment.stage>
            </properties>
        </profile>
        <profile>
            <id>production</id>
            <properties>
                <deployment.stage>In Production</deployment.stage>
            </properties>
        </profile>
        <profile>
            <id>release</id>
            <activation>
                <property>
                    <name>performRelease</name>
                    <value>true</value>
                </property>
            </activation>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-jarsigner-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>signing</id>
                                <goals>
                                    <goal>sign</goal>
                                    <goal>verify</goal>
                                </goals>
                                <phase>package</phase>
                                <inherited>true</inherited>
                                <configuration>
                                    <removeExistingSignatures>true</removeExistingSignatures>
                                    <archiveDirectory />
                                    <includes>
                                        <include>${project.build.directory}/${project.artifactId}.apk</include>
                                    </includes>
                                    <keystore>keystore/keys.keystore</keystore>
                                    <alias>alias</alias>
                                    <storepass>${sign.storepass}</storepass>
                                    <keypass>${sign.keypass}</keypass>
                                    <verbose>true</verbose>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                    <plugin>
                        <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                        <artifactId>android-maven-plugin</artifactId>
                        <version>3.3.0</version>
                        <inherited>true</inherited>
                        <configuration>
                            <sign>
                                <debug>false</debug>
                            </sign>
                            <zipalign>
                                <verbose>true</verbose>
                                <inputApk>${project.build.directory}/${project.artifactId}.apk</inputApk>
                                <outputApk>${project.build.directory}/${project.artifactId}-signed-aligned.apk
                                </outputApk>
                            </zipalign>
                            <manifest>
                                <debuggable>false</debuggable>
                                <versionName>${project.version}</versionName>
                                <versionCodeAutoIncrement>true</versionCodeAutoIncrement>
                            </manifest>
                            <proguard>
                                <skip>true</skip>
                            </proguard>
                        </configuration>
                        <executions>
                            <execution>
                                <id>manifestUpdate</id>
                                <phase>process-resources</phase>
                                <goals>
                                    <goal>manifest-update</goal>
                                </goals>
                            </execution>
                            <execution>
                                <id>alignApk</id>
                                <phase>package</phase>
                                <goals>
                                    <goal>zipalign</goal>
                                </goals>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>
    </profiles>

    <dependencyManagement>
        <dependencies>
            <dependency>
                <groupId>com.google.android</groupId>
                <artifactId>android</artifactId>
                <version>2.3.1</version>
            </dependency>
            <dependency>
                <groupId>org.apache.commons</groupId>
                <artifactId>commons-io</artifactId>
                <version>1.3.2</version>
            </dependency>
            <dependency>
                <groupId>com.googlecode.libphonenumber</groupId>
                <artifactId>libphonenumber</artifactId>
                <version>5.1</version>
            </dependency>
            <dependency>
                <groupId>com.google.code.gson</groupId>
                <artifactId>gson</artifactId>
                <version>2.2.2</version>
            </dependency>
            <dependency>
                <groupId>commons-lang</groupId>
                <artifactId>commons-lang</artifactId>
                <version>2.6</version>
            </dependency>
            <dependency>
                <groupId>com.googlecode.androidannotations</groupId>
                <artifactId>androidannotations</artifactId>
                <version>2.6</version>
                <scope>provided</scope>
            </dependency>
            <dependency>
                <groupId>com.googlecode.androidannotations</groupId>
                <artifactId>androidannotations</artifactId>
                <classifier>api</classifier>
                <version>2.6</version>
            </dependency>
        </dependencies>
    </dependencyManagement>
</project> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T22:21:36.757

在您的 pom.xml 中，您将源目录设置为`src`，但您说您的源在`src/main/java`文件夹中并且您在`src/test/java`.

你可以尝试删除`<sourceDirectory>src</sourceDirectory>`，所以 Maven 使用这个默认的文件结构？

另外，就目前而言，我从未能够使用 Eclipse 的 robolectric 启动单元测试......但它适用于 maven。

# python - 在不使用第二个文件的情况下更新文件中的一行

> ID：12628054
> 
> 赞同：0
> 
> 时间：2012-09-27T18:42:20.390
> 
> 标签：python, csv

我正在尝试更新文件，但仅更新某些行。有很多行，我不想重写整个文件来更新它。前任。在 4k 行中我需要更改第 n 项中的 5 项

这个问题的大多数答案都使用两个文件或完全重写。我想知道是否有一个更有效的命令，一个可以一次攻击一行而不在进程结束时写入整个文件的命令。如果没有可能的方法，那么最有效的方法是什么。

我使用 Python 2.7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T19:31:09.137

问题是，磁盘上的文件只是一个*字节*序列。而不是智能存储的*行*序列。也就是说，您可以更改文件中的第 n 行，当且仅当它包含的字节数在该操作之后保持不变。

如果您的 csv 格式允许在这些行中包含任意数量的无关紧要的空白，则可以使它们足够大以容纳您可能写入的任何数据（例如固定的足够大的行大小）。然后，您可以更新单行而无需重写整个文件。不过，您需要确保覆盖以前的内容（如果有）。

# ios - [[leaderboard localPlayerScore] rank] 的值是否还没有排名？

> ID：12628062
> 
> 赞同：0
> 
> 时间：2012-09-27T18:42:52.747
> 
> 标签：ios, xcode, gamekit, rank, leaderboard

出于某种原因，我无法重置我的排行榜来测试这一点，那么如果本地玩家尚未在指定的排行榜中排名，有谁知道对象的`rank`属性值是多少？`GKScore`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T10:22:56.353

它将为零。

> 秩
> 
> 分数在排行榜搜索结果中的位置。(只读) @property(nonatomic, readonly, assign) NSInteger rank 讨论
> 
> 此属性的值仅对从 Game Center 返回的分数对象有效。rank 属性表示得分在返回结果中的位置，1 为最佳得分，2 为次佳，以此类推。可用性
> 
> ```
> Available in iOS 4.1 and later. 
> ```

阅读此[文档](http://developer.apple.com/library/ios/#documentation/GameKit/Reference/GKScore_Ref/Reference/Reference.html)以获取更多信息。

# javascript - 为什么 JSLint 告诉我使用“=== undefined”而不是“typeof ... === 'undefined'”？

> ID：12628068
> 
> 赞同：14
> 
> 时间：2012-09-27T18:43:09.607
> 
> 标签：javascript, jquery, jslint

我编写了以下代码：

```
showTitles = (typeof showTitles !== 'undefined') ? showTitles : 'Y';
showSelectGroup = (typeof showSelectGroup !== 'undefined') ? showSelectGroup : 'Y'; 
```

但是 JSLint 说：

> 警告 3 JS Lint：意外的“typeof”。使用 '===' 直接与 undefined 进行比较。

我应该如何更改我的代码？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-27T18:45:36.597

Probably by using

```
showTitles = (showTitles === undefined) ? 'Y' : showTitles;
showSelectGroup = (showSelectGroup === undefined) ? 'Y' : showSelectGroup; 
```

jslint has no issues with that (assuming showTitles and showSelectGroup are declared with var)

However, I'd write it as

```
var showTitles = showTitles || 'Y';
var showSelectGroup = showSelectGroup || 'Y'; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-27T18:45:54.070

Note that whether this is best practice in general is debatable, but if you want to make it work with JSLint, you could do this

```
showTitles = (showTitles !== undefined) ? showTitles : 'Y'; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-12-01T03:22:35.033

此消息反映了最新的最佳实践。从 ES5 严格模式开始， 的全局值`undefined` [不再可以更改](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined#Typeof_operator_and_undefined)，直接比较代码更简单，速度更快。简而言之，[JSLint 了解这一切](https://github.com/jamesallardice/jslint-error-explanations/issues/10#issuecomment-18273885)，并为您提供了很好的建议。

在这种情况下，更改`typeof showTitles !== 'undefined'`为`showTitles === undefined`。

# java - java中的多维数据结构

> ID：12628070
> 
> 赞同：1
> 
> 时间：2012-09-27T18:43:13.620
> 
> 标签：java, arrays, data-structures, map, jax-ws

我需要创建一个具有以下语法的数据结构：

```
[
 status: "success",
 statusDescription: "statusDescription"
 count: "5",
 states: [
  [stateId: "1", stateDescription: "1 description"],
  [stateId: "2", stateDescription: "2 description"],
  [stateId: "3", stateDescription: "3 description"],
  [stateId: "4", stateDescription: "4 description"],
  [stateId: "5", stateDescription: "5 description"]

 ]
] 
```

我不确定如何在 Java 中做到这一点。我正在尝试 ArrayLists 和 Maps 的各种组合，但不太明白。

**编辑：**我实际上需要将此数据类型作为对 JAX-WS @WebMethod 调用的响应返回。创建一个单独的类，尤其是带有 List 元素的类会导致问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T18:45:07.637

Build your own class. Please.

```
class Foo {
  private final String status;
  private final String statusDescription;
  private final int count;
  private final List<State> states;
}

class State {
  private final int stateId;
  private final String stateDescription;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T18:45:06.193

```
class Response {
   private boolean success;
   private String statusDescription; 
   private List<State> states;
}

class State {
   private int id;
   private String description;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T18:55:11.423

我会这样写：

```
public class Whatever {
    private Status status;
    private String statusDescription;
    private int count;
    private List<Map<int,String>> states;
} 
```

或这个：

```
public class Whatever {
    private Status status;
    private String statusDescription;
    private int count;
    private List<State> states;
} 
```

其中 State 和 Status 是枚举。由你决定。我想状态有限

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T18:44:43.477

Define a class, with an array [or `ArrayList`] of states.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T18:45:50.243

? Do your own class.

`status`, `statusDescription` are String properties of your class.

`count` is an integer property (or String if you want).

`states` is either an enum, a Map or a two dimensional array. Whatever fits.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-27T18:58:47.387

真的很糟糕的设计，但正是你想要的：

```
public static void main(String[] args) {
    HashMap<String, Object> hashMap = new HashMap<String, Object>();
    hashMap.put("status", "success");
    hashMap.put("statusDescription", "statusDescription");
    hashMap.put("count", "5");
    List<Object> list = new ArrayList<Object>();
    hashMap.put("states", list);
    for (int i = 1; i < 5; i++) {
        HashMap<String, String> hashMapInternal = new HashMap<String, String>();
        hashMapInternal.put("stateId", String.valueOf(i));
        hashMapInternal.put("stateDescription", i + " description");
        list.add(hashMapInternal);
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-27T18:47:38.857

为此，您可以创建一个类，例如

```
 class A

     {
       private int statusId;
        private String Description;
        private int count;
      } 
```

现在根据您的要求创建一个数据结构，并将 A 类的对象添加到该数据结构中。

# php - 回复：选择要为 android 发出的 PHP 变量

> ID：12628072
> 
> 赞同：0
> 
> 时间：2012-09-27T18:43:18.107
> 
> 标签：php, android, httpresponse

我使用 HttpResponse 从 PHP 脚本（称为脚本 #1）中捕获 JSON。该脚本通过 print_r() 发出 JSON。

问题：PHP 包含一个脚本（称为脚本#2），它也使用 print_r 来发出变量。我也在程序的另一部分独立使用这个脚本。问题是我在android中的httpResponse函数捕获了脚本#2中的print_r发射，而不是脚本#1中的print_r。我该如何解决这个问题？

以下是正在发生的事情的概要：脚本 #2（包含 print_r）-> 脚本 #1（使用 #2 中的数据并发出 print_r）-> Android HttpResponse 从 #2 而不是 #1 收集 print_r。

# c - what does an "expression" in C language mean?

> ID：12628077
> 
> 赞同：3
> 
> 时间：2012-09-27T18:43:54.243
> 
> 标签：c

I have been involved in C programming for quite some time now. A few days back, I stumbled upon a wrongly written code, which let me to the following question.

What would the following C code print out.

```
if (0,2)  
    printf("red"); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-27T18:46:50.713

代码的输出将是：

```
red 
```

该`if`语句的条件使用*逗号运算符*，它计算第二个操作数的结果，在本例中为：*2*。由于 C 中的非零类似于*true*，因此表达式为*true*，并且`printf`执行。

使用逗号运算符，计算第一个操作数并丢弃结果，然后计算第二个操作数，表达式的结果和类型是第二个操作数的计算结果和类型。[在 wikipedia 上](http://en.wikipedia.org/wiki/Comma_operator)阅读有关逗号运算符的更多信息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-27T18:46:30.930

它[会打印`red`](http://ideone.com/FJwPH)，不像

```
if (2,0)
    printf("red") 
```

这不会打印任何内容。

这就是C[中逗号运算符](http://en.wikipedia.org/wiki/Comma_operator)的工作方式——它一个一个地计算其操作数，并产生最后一个的结果作为其整体结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T19:05:02.643

在您给出的上下文中，逗号运算符是无用的。

```
if (0,2)
   printf("red"); 
```

在这种情况下，它说：

```
Do nothing with 0
if (2)  //which is true
print "red" 
```

基本上它对你没有任何作用，除非你希望最后一个值之前的 opp(s) 有意义。一个**稍微**有用的例子说明你为什么想要这个：

```
int i, j;
int arr[4] = {1,2,3,4};
for(i=0, j=1; i<4; j+=2, i+=2){
    printf("arr[%d] = %d\n", i, arr[i]);
    printf("arr[%d] = %d\n", j, arr[j]);
} 
```

现在这个循环只有 2 次迭代，我们打印出数组中的所有 4 个值：

```
arr[0] = 1
arr[1] = 2
arr[2] = 3
arr[3] = 4 
```

它在那里也有两个以上的操作，所以如果你愿意，你可以这样做：

```
if(a++, b++, 1)
  printf("red"); 
```

现在您将在打印“红色”时增加 a 和 b

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T18:47:50.067

在`if`语句中，如果控制表达式不为零，则执行该语句。

`0, 2`是一个逗号表达式，它的计算`2`结果是不为零的右操作数。

所以`if`表达式中的语句：

```
printf("red"); 
```

将在您的示例中执行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T20:27:05.767

要回答标题中的问题（来自[C 2011 在线草案](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)）：

> ### 6.5 表达式
> 
> 1*表达式*是一系列运算符和操作数，它们指定一个值的计算，或者指定一个对象或函数，或者产生副作用，或者执行它们的组合。运算符的操作数的值计算在运算符结果的值计算之前排序。

在片段中

```
if (0,2)
    printf("red"); 
```

`0,2`是*逗号表达式*；每个子表达式`0`和`2`从左到右计算，逗号表达式的值是最右边的子表达式的值（在这种情况下，`2`）。由于 的结果`0,2`不为零，因此采用分支并`printf`执行语句。

请注意，逗号运算符与用于分隔函数中的参数的逗号不同：

```
foo(a, b, c); 
```

在这种情况下，`a, b, c`是*参数列表*，而不是逗号表达式。没有特定的评估顺序（`c`可以在`a`或之前评估`b`），也没有结果值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-27T18:49:33.553

它将打印`red`，因为[逗号运算符](http://en.wikipedia.org/wiki/Comma_operator)评估第一个操作数并丢弃结果，然后评估第二个操作数并返回结果，因此它返回`2`哪个是`TRUE`值，因此进入 IF 块。

# c# - 文本框的文本属性未显示其值

> ID：12628081
> 
> 赞同：0
> 
> 时间：2012-09-27T18:44:22.633
> 
> 标签：c#, .net

我有一个要添加的对象列表。

```
private List<Employee> employees = new List<Employee>(); 
```

我的表单应用程序上有一个按钮来创建一个新的员工对象并将其添加到列表中。在单击它之前，它会显示“添加小时工”。单击它后，它会更改为“保存小时工”。我只是使用布尔值来确定要显示的文本。

```
private void addHrlyEmpBtn_Click(object sender, EventArgs e)
    {
        resetBtn.Enabled = true;
        cancelBtn.Enabled = true;

        if (!addHourly)
        {
            resetBtn.Enabled = true;
            cancelBtn.Enabled = true;
            textBox4.Enabled = false;
            textBox4.Text = (employees.Count + 1).ToString();
            textBox7.Enabled = false;
            addHrlyEmpBtn.Text = "Save Hourly Employee";
        }
        else if (addHourly)
        {
            //Grab values, create new object, and add to list.
            //Set addHourly to false;
        }
        //Other stuff
    } 
```

我正在尝试显示`employees.Count + 1`到`textBox4`，但由于某种原因它不起作用。根本没有显示任何文本。理想情况下，我希望禁用文本框但仍显示该值。我只希望它在`!addHourly`.

难道我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T18:48:14.877

您编写的代码原则上没有任何问题。

我强烈建议为所有变量赋予有意义的名称。像*textBox4*这样的名称可能会给您自己和代码的未来维护者造成混淆。

如果该值没有像您预期的那样发生变化，那么您很可能没有输入*if*分支。

在

```
if (!addHourly) 
```

查看*addHourly*是否具有您期望的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T18:51:17.493

检查 addHrlyEmpBtn_Click 是否被调用。

如果没有尝试将 Click 事件与设计器的 addHrlyEmpBtn_Click 方法相关联

或者`addHrlyEmpBtn.Click += addHrlyEmpBtn_Click;`在构造函数中添加

# bash - 我应该更喜欢 $(hostname) 而不是 ${HOSTNAME}

> ID：12628085
> 
> 赞同：0
> 
> 时间：2012-09-27T18:44:34.193
> 
> 标签：bash, scripting, hostname

所以有命令`hostname`和环境变量`HOSTNAME`，我认为后者是一般脚本中 fork & exec 的一小部分节省。在我关心的系统（Ubuntu）上，它们似乎是等价的。如果我将其中一个标志传递给`$(hostname)`. 对此我不知道是否存在共识？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T18:17:12.283

这取决于你希望它有多全面......

环境变量可以更改，并且该`HOSTNAME`变量不是只读的。然而，命令的输出`hostname`将始终返回最新和最准确的信息。

我个人总是会`hostname`在环境变量上使用命令。

# qt-mobility - QMessageManager queryMessages 在诺基亚 N8 中不起作用

> ID：12628093
> 
> 赞同：0
> 
> 时间：2012-09-27T18:45:01.373
> 
> 标签：qt-mobility, nokia-n8

我正在尝试从 Symbian 手机收件箱中读取 SMS 消息。我用 Qt Creator 创建了一个应用程序并让它在 Symbian Simulator 中运行，但在诺基亚 N8 中它无法读取任何消息（SMS 或电子邮件）。

这是我的最小代码：

```
#include "mainwindow.h"
#include "ui_mainwindow.h"

#include <QtCore/QCoreApplication>
#include <QMessageManager>

QTM_USE_NAMESPACE

MainWindow::MainWindow(QWidget *parent)
    : QMainWindow(parent), ui(new Ui::MainWindow)
{
    ui->setupUi(this);
    QMessageManager mm;
    QMessageIdList msgs = mm.queryMessages();
    ui->textBrowser->append(QString("Messages %1").arg(msgs.size()));
    for (int i = 0; i < msgs.count(); ++i) {
        QMessage message = mm.message(msgs.at(i));
        ui->textBrowser->append(message.from().addressee());
        ui->textBrowser->append(message.to().at(0).addressee());
        ui->textBrowser->append(message.textContent());
    }
}
// ...rest is boilerplate code 
```

在模拟器中，它会打印它拥有的测试消息。在 N8 中，尽管有 SMS 和电子邮件消息，但它只显示“Messages 0”。

在 .pro 文件中我已经声明

```
CONFIG += mobility
MOBILITY += messaging 
```

我是 Qt 的新手，所以这很可能是每个人都认为理所当然的事情。我尝试了调试和发布版本，并将 Qt Creator 创建的 sis 文件复制到手机并安装它，但结果是一样的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T19:19:58.150

查看[用户指南：Symbian 签名](http://www.developer.nokia.com/Community/Wiki/User_guide%3a_Symbian_Signed)。要阅读 SMS 消息，您需要为 symbian 添加 ReadUserData 功能。在 .pro 文件中，添加

```
symbian:TARGET.CAPABILITY += ReadUserData 
```

# android - Phonegap build for android and splash screen is stretched for tablet

> ID：12628096
> 
> 赞同：6
> 
> 时间：2012-09-27T18:45:04.807
> 
> 标签：android, cordova

![Note: This is how android suggested to size the screens](../Images/711b80ee1d3f2ed24edd7e08a5608ffb.png)So I am using phonegap to build an app. I have splash screen that I am displaying and is listed in config.xml like this.

```
<gap:splash src="splash/android/ldpi.png" gap:platform="android" gap:density="ldpi" />         <gap:splash src="splash/android/mdpi.png" gap:platform="android" gap:density="mdpi"/>
<gap:splash src="splash/android/hdpi.png"  gap:platform="android" gap:density="hdpi" />
<gap:splash src="splash/android/xhdpi.png" gap:platform="android" gap:density="xhdpi" /> 
```

The problem is that when I test it on my Samsung galaxy skyrocket 2 phone it shows the "hdpi.png" image and when I test it on my Samsung galaxy 10 inch tablet it shows the mdpi.png image.

Shouldn't this be the other-way around?

Based on android specification (see the picture above) my mdpi.png is of size 320x480 and hdpi.png as 480x800 so the mdpi.png appeared stretched in the tablet.

How to get around with this? Do you think I should be defining say multiple splash screen sizes for mdpi e.g. for normal screen 32x480, large screen 480x800 etc. But if we go by this approach then how to define this in config.xml? Because there we are filtering based on only **gap:density="mdpi"** or should we be adding sizes also and hence add multiple entries to same **gap:density="mdpi"** ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-16T13:45:13.727

我知道这是不同的方法，但也许最简单的方法是使用 9-patch 文件？

您可以使用[此处](http://www.bleathem.ca/blog/2015/01/cordova-splashscreen.html)或[此处](https://iphonedevlog.wordpress.com/2013/07/02/creating-and-installing-a-splash-screen-for-android-using-eclipse-and-phonegap/)的说明构建一个，命名`splash.9.png`并放入`platforms/android/res/drawable`文件夹中。

# php - Fix for Innodb Integrity constraint violation: 1452

> ID：12628097
> 
> 赞同：3
> 
> 时间：2012-09-27T18:45:05.070
> 
> 标签：php, mysql, magento, foreign-keys, constraints

What Innodb query can I use to correct the following problem?

> SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails (`mrvallar_magdb`.`catalog_product_entity_varchar`, CONSTRAINT `CATALOG_PRODUCT_ENTITY_VARCHAR_IBFK_3` FOREIGN KEY (`entity_id`) REFERENCES `catalog_product_entity_orig` (`entity_id`) ON DELETE)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T18:47:29.247

您尝试使用不存在`catalog_product_entity_varchar`的值插入/更新记录`entity_id``catalog_product_entity_orig`

您需要将该实体插入到“ *orig* ”表中，然后才能在“ *varchar* ”表中引用它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-19T16:54:09.890

您尝试插入具有引用表中不存在的外键的记录。这是您遇到问题的原因。

您将需要检查为什么引用的 id 不存在并纠正这种情况。可能的解决方案：

1.  您可以修复您的数据并确保将来不会出现此类不一致的情况。

2.  您可以检查所有引用的值是否存在，如果不存在，请在有问题的插入之前插入它们

3.  您可以通过在 where 子句中检查引用记录的存在来将选择插入到您的表中。

# jsf - Facelet 组合组件上的 JSF2 convertNumber 无法读取资源包

> ID：12628102
> 
> 赞同：0
> 
> 时间：2012-09-27T18:45:26.403
> 
> 标签：jsf, jsf-2, richfaces

我有以下尝试将用户输入验证为整数并且不显示错误文本。如果我不使用资源包（硬编码），它将显示。我可以使用带有 value attribute="#{bundle['INVALID_ENTRY']}" 的 outputText 并且它显示在同一页面上。有任何想法吗？

```
<h:inputSecret required="true" redisplay="true"
                               converterMessage = "#{bundle['INVALID_ENTRY']}"
                               value = "#{backingBean.code}" maxlength="4">
                    <f:validateLength maximum="4"/>
                    <f:convertNumber integerOnly="true"/>
                    <rich:ajaxValidator event="onblur" />
 </h:inputSecret> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T19:33:29.363

修复是在 facelet 组合组件以及包含组合组件的页面上加载资源包。h:inputSecret 是（Facelet 组合组件）上的一个组件，并且由于某种原因 inputSecret 的 converterMessage 丢失了对包的引用。

# r - Excluding elements of a vector from another vector, not using setdiff

> ID：12628104
> 
> 赞同：4
> 
> 时间：2012-09-27T18:45:28.237
> 
> 标签：r

I have a character vector, and I want to exclude elements from it which are present in a second vector. I don't know how to work the negation in this case while still considering the entire vector

```
vector[vector ! %in% vector2] 
```

I can obviously do `vector[vector != single_character]` but that only works for a single character.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-27T18:51:36.877

你很近

```
vector[!vector %in% vector2] 
```

或者，即使您说“不使用 setdiff”

```
setdiff(vector, vector2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T21:14:18.877

您可以定义一个新的运算符，

```
 `%ni%` = Negate(`%in%`) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T18:51:46.230

```
vector1 <- letters[1:4]
set.seed(001)
vector2 <- sample(letters[1:15], 10, replace=TRUE)

 vector1
[1] "a" "b" "c" "d"
vector2
 [1] "d" "f" "i" "n" "d" "n" "o" "j" "j" "a"

vector2 [!(vector2 %in% vector1)] # elements in vector2 that are not in vector1
[1] "f" "i" "n" "n" "o" "j" "j" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-11T12:37:49.580

现在有一个更优雅的解决方案：

```
library(textclean)
# master character vector
vector1 = c("blue", "green", "red")
# vector containing elements to be removed from master vector
vector2 = c("green", "red")
drop_element_fixed(vector1, vector2)

# Output:
# [1] "blue" 
```

# jsf-2 - AutoComplete throwing nullpointer when in ui:include code

> ID：12628106
> 
> 赞同：0
> 
> 时间：2012-09-27T18:45:35.280
> 
> 标签：jsf-2, primefaces, uiinclude

I am using a PrimeFaces autoComplete box in my code. I have used this components in various places in my application with no problem. When I have it in a block of code that is dynamically included via ui:include, I get:

```
14:32:30,115 SEVERE [javax.enterprise.resource.webcontainer.jsf.context] (http-steves-10.11.100.136-15081-2) java.lang.NullPointerException 
```

If I take the exact code copy and paste it into the parent right before the ui:include, it works there. So obviously the problem has something to do with it being in the ui:include. Is there a problem with ajax controls in an include? What would I need to work around this?

My environment is PF3.4RC1, JBoss7.1, Mojarra 2.1.5

**Update:** Here is the code I am using. I haven't bothered including the backing beans because I put breakpoints in that code and it only is touched when I use the "working" autocomplete. As an additional piece of information, I tries putting a commandbutton on the fragment and it too fails to call the actionlistener method on the backing bean.

Main (Parent) page:

```
<p:panel id="dataEntryPane"
    rendered="#{manageItemHandler.currItem ne null}">
    <!-- This Auto Complete works -->
    <p:autoComplete
        completeMethod="#{itemAutoComplete.autoCompleteList}" var="item"
        itemLabel="#{item.itemNum}" itemValue="#{item}"
        converter="ItemConverter" queryDelay="750">

        <f:facet name="itemtip">
        <p:panelGrid columns="2" cellpadding="5" style=" width:400px;">
                <f:facet name="header">
                <p:column colspan="2">
                    <h:outputText value="Item Information"
                         style="font-weight:bold; font-size:20px; font-style:italic;" />
                 </p:column>
                 </f:facet>

             <p:row>
                 <h:outputText value="#{item.itemNum}" />
             </p:row>
             <p:row>
                 <h:outputText value="#{item.itemDesc}" />
             </p:row>
         </p:panelGrid>
     </f:facet>
 </p:autoComplete>

    <ui:include src="#{manageItemHandler.dataEntryFrag}" />
</p:panel> 
```

Included Fragment:

```
<p:panel>
    <f:facet name="header">
        <h:outputText value="Operation - #{manageItemHandler.dataEntryOp.operationNum} BOM Entry" />
        <p:commandButton value="SignOff"
            actionListener="#{manageItemHandler.doSignOff(manageItemHandler.dataEntryOp.bom)}"
            style="float:right"
            rendered="#{speed2Session.isRendered('editManageItemOp')}" />
    </f:facet>

        <!-- This autocomplete does not work -->
    <p:autoComplete completeMethod="#{itemAutoComplete.autoCompleteList}"
        var="item" itemLabel="#{item.itemNum}" itemValue="#{item}"
        converter="ItemConverter" queryDelay="750">

        <f:facet name="itemtip">
            <p:panelGrid columns="2" cellpadding="5" style=" width:400px;">
                <f:facet name="header">
                    <p:column colspan="2">
                        <h:outputText value="Item Information" style="font-weight:bold; font-size:20px; font-style:italic;" />
                    </p:column>
                </f:facet>

                <p:row>
                    <h:outputText value="#{item.itemNum}" />
                </p:row>

                <p:row>
                    <h:outputText value="#{item.itemDesc}" />
                </p:row>
            </p:panelGrid>
        </f:facet>
    </p:autoComplete>

    <p:dataTable id="dt_bom" value="#{manageItemHandler.dataEntryOp.bom}"
        var="bom">
        <p:column headerText="Item Number">
            <p:inputText value="#{bom.component}"
                disabled="#{speed2Session.isDisabled('editManageItemOp')}" />
        </p:column>
        <p:column headerText="Item Description">
            <h:outputText value="#{bom.descrip}" />
        </p:column>
        <p:column headerText="QTY">
            <p:inputText value="#{bom.qty}"
                disabled="#{speed2Session.isDisabled('editManageItemOp')}"></p:inputText>
        </p:column>
    </p:dataTable>
    <p:commandButton value="test button"></p:commandButton>
</p:panel> 
```

Unfortunately, the above error is all that I get in the stack trace. Here are a few preceeding lines for completeness. I Typed into the autocomplete box twice in the trace and you can see by the time what was logged when I did.

```
15:58:11,578 INFO  [stdout] (http-steves-10.11.100.136-15081-6) Hibernate: 
15:58:11,578 INFO  [stdout] (http-steves-10.11.100.136-15081-6)     select
15:58:11,579 INFO  [stdout] (http-steves-10.11.100.136-15081-6)         itemdata0_.DESCRIP as col_0_0_ 
15:58:11,579 INFO  [stdout] (http-steves-10.11.100.136-15081-6)     from
15:58:11,580 INFO  [stdout] (http-steves-10.11.100.136-15081-6)         MCSITEM itemdata0_ 
15:58:11,580 INFO  [stdout] (http-steves-10.11.100.136-15081-6)     where
15:58:11,581 INFO  [stdout] (http-steves-10.11.100.136-15081-6)         itemdata0_.ITEM=?

15:58:16,538 INFO  [com.newpig] (http-steves-10.11.100.136-15081-6) In AutoLoginFilter.doFilter
15:58:16,541 INFO  [com.newpig] (http-steves-10.11.100.136-15081-6) In SecurityFilter.doFilter
15:58:16,542 INFO  [com.newpig] (http-steves-10.11.100.136-15081-6) OriginalURL: /speed2/modules/main.faces
15:58:16,575 SEVERE [javax.enterprise.resource.webcontainer.jsf.context] (http-steves-10.11.100.136-15081-6) java.lang.NullPointerException
16:02:43,442 INFO  [com.newpig] (http-steves-10.11.100.136-15081-6) In AutoLoginFilter.doFilter
16:02:43,445 INFO  [com.newpig] (http-steves-10.11.100.136-15081-6) In SecurityFilter.doFilter
16:02:43,446 INFO  [com.newpig] (http-steves-10.11.100.136-15081-6) OriginalURL: /speed2/modules/main.faces
16:02:43,475 SEVERE [javax.enterprise.resource.webcontainer.jsf.context] (http-steves-10.11.100.136-15081-6) java.lang.NullPointerException 
```

**UPDATE 2:** My intention is to dynamically swap out a section of the screen as the user clicks buttons. As a test, I defaulted to the fragment in question (SpecSheet) when the backing bean is created. When I do that, the Autocomplete works for that fragment. When I switch to another fragment(BOM) with an autocomplete, that one doesn't work. If I switch back to SpecSheet, that autocomplete still works.

# java - Hibernate 存储过程困境

> ID：12628109
> 
> 赞同：0
> 
> 时间：2012-09-27T18:45:40.967
> 
> 标签：java, hibernate, orm

迁移到 Hibernate 时，替换数据库中存储过程的最佳方法是什么。想象一个在没有 Hibernate 的情况下独立运行的 Java 应用程序，然后人们会决定使用 Hibernate。这样做的最佳做法是什么？我是否应该将使用存储过程的那些部分原封不动地保留下来，并一一摆脱存储过程并使其成为一个无存储过程的程序？还是我应该 HQL 来调用存储过程？

这么看，是不是使用存储过程和使用Hibernate对比？使用 Hibernate 的目的不是让编码人员从处理关系映射中解放出来吗？如果您必须在应用程序中处理存储过程，那么处理 Hibernate 是否值得？如果你有处理存储过程的知识和时间，你最好使用原生 sql 而不是 Hibernate？

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:55:21.430

您可以使用休眠事件系统实现类似于存储过程的功能，[http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/events.html](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/events.html)

它是否是一个好主意是一个相当开放的问题。我认为，这取决于许多不同的因素。最重要的是，你到底在构建什么，什么样的团队正在研究它，它的文档记录如何。

让事情自动发生，如果它真的有很好的文档并且开发人员真的关注文档，那么它真的很整洁。否则，可能会导致混乱。我想您必须问一个问题，使用它的好处（如果有的话）是什么，而在您的特定情况下有什么负面影响。并基于此做出决定，我非常怀疑您会从其他人在他们所工作的团队中的经历中找到正确或错误的答案，因为对于您参与的项目/团队而言，这可能不一定是可观的和。

# php - javascript are not working on Google chrome

> ID：12628110
> 
> 赞同：1
> 
> 时间：2012-09-27T18:45:48.833
> 
> 标签：php, javascript, html, codeigniter, google-chrome

On Codeigniter I have a code

HTML

```
//ROOTPATH is the constant Path and $recordId is coming from a loop.

<a href="#" onclick="windowRedirect('<?php echo ROOTPATH; ?>&action=deleteRecord&id=<?php echo $recordId; ?>','Are you sure you want to Delete');return false;">Delete</a> 
```

Javascript

```
windowRedirect(url,msg)
{
  if(confirm(msg)) 
  { 
    window.location.href = url;
  }
  else
  {
   return false;
  }
} 
```

I have written a simple javascript which will redirect url if user click on OK button but I am getting weird problem on Google chrome where this code is working perfectly on Mozila Firefox, IE 8/9 and Applae Safari. Can any one tell me how can I solve this Google Chrome Problem.

Though I have a doubt this script is probably not working because of '#' on the href field but I am not sure.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:56:16.110

这是一个工作示例：

```
<html>
</head>
<script>
function window_redirect(url,msg)
{

  if(confirm(msg))
  { 
    window.location = url;
  }
  else
  {
   return false;
  }

}
</script>
</head>
<body>

<a onclick="window_redirect('http://www.google.com','Are you sure you want to Delete');" href="#" >Delete</a>

</body>
</html> 
```

您忘记在函数之前调用状态“函数”，如果您将 onclick 放在元素（链接）上，请始终将其放在 href="#" 之前，如果不是这种情况，某些浏览器将不会调用 onclick。

# java - Jersey/web.xml/Servlet Routing Issue

> ID：12628112
> 
> 赞同：0
> 
> 时间：2012-09-27T18:45:52.933
> 
> 标签：java, rest, web-applications, jersey, jax-rs

So this will be mostly code to illustrate the issue, but issue as follows:

pointing my browser to localhost:8080/licsrv/items return 404.

revelant web.xml

```
<!-- Java Remoting Servlet -->
    <servlet>
        <servlet-name>licenseGenService</servlet-name>
        <servlet-class>org.springframework.web.context.support.HttpRequestHandlerServlet</servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>licenseGenService</servlet-name>
        <url-pattern>/remoting/licensing</url-pattern>
    </servlet-mapping>

    <!-- Restful API Servlet-->
    <servlet>
        <servlet-name>licensingRestService</servlet-name>
        <servlet-class>
            com.sun.jersey.spi.spring.container.servlet.SpringServlet
        </servlet-class>
        <init-param>
            <param-name>
                    com.sun.jersey.config.property.packages
            </param-name>
            <param-value>
                mypackage.rest
            </param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>licensingRestService</servlet-name>
        <url-pattern>/orders</url-pattern>
    </servlet-mapping>

    <servlet-mapping>
        <servlet-name>licensingRestService</servlet-name>
        <url-pattern>/items</url-pattern>
    </servlet-mapping>

    <servlet-mapping>
        <servlet-name>licensingRestService</servlet-name>
        <url-pattern>/customers</url-pattern>
    </servlet-mapping> 
```

ItemsResourceImpl.java

```
@Path("/items")
public class ItemsResourceImpl implements ItemsResource 
{

@GET
    @Produces("text/html")
    public String testItems()
    {
        return "<html><body><h1>Items Resource Tester</h1><p>Items Resource is available.</p></body></html>";
    }

.....
} 
```

And then I have the bean in my applicationContext.xml

Now ItemsResource (an interface) also has annotations and methods defined, could this be the issue? My impression was that Jax-RS annotations are not inherited. Is it the fact that I have two servlets and am missing something? I have a pure REST service with just one servlet and same configuration doing the same thing. Depending on how I change the configuration I get 405 Method Not Allowed out of it as well. Any ideas?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T20:10:03.363

尝试访问`http://localhost:8080/licsrv/items/items`. 注释定义了相对于应用程序根的`@Path`路径（由 web.xml 中的 servlet 映射定义）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T18:59:04.237

servlet 映射对我来说很可疑。我不熟悉spring，但如果servlet映射是这样的：

```
<servlet-mapping>
    <servlet-name>licensingRestService</servlet-name>
    <url-pattern>/orders/*</url-pattern>
</servlet-mapping> 
```

url 应该像: `localhost:8080/licsrv/orders/items`，具有相同的`ItemsResourceImpl`实现。

# css - Custom Navigation Bar breaks apart in Chrome.

> ID：12628115
> 
> 赞同：0
> 
> 时间：2012-09-27T18:45:56.470
> 
> 标签：css, google-chrome

I am just cleaning up some CSS for a client.

I am not a front-end person, but have been saved by bootstrap (thank you, twitter).

However, I am having a really hard time cleaning up a custom navigation panel (no twitter). I have provided the CSS below. I need it to be able to:

1) close gracefully at the end (the beginning starts with a vertical border, not an arrow. I would like the end to have symmetry and close the way it began).

2) Get the container to not expand to the end of the page.

3) I can't seem to get it to work in chrome. It falls apart in chrome but works in IE and Ff.

Here is the link. Any advice? Thanks so much.

[http://annualdinnerdev.elasticbeanstalk.com/](http://annualdinnerdev.elasticbeanstalk.com/)

```
 /* ------- Wizard Interface ---------- */

 #wizHeader
        {
            border: solid 3px #fff;
            margin-bottom:25px;
            -moz-box-shadow: 3px 3px 4px #C2CBCE;
            -webkit-box-shadow: 3px 3px 4px #C2CBCE;
            box-shadow: 3px 3px 4px #C2CBCE; /* For IE 8 */
            -ms-filter: "progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=135, Color='#C2CBCE')"; /* For IE 5.5 - 7 */
            filter: progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=135, Color= '#C2CBCE' );

        }

        #wizHeader li label
        {
            font-size:x-large;
        }

        #wizHeader li a
        {
            font-size:large;
        }

        #wizHeader li .prevStep
        {
            background-color: #D6E6FA;
            color:#000;
        }
        #wizHeader li .prevStep:after
        {
            border-left-color: #D6E6FA !important;
        }
        #wizHeader li .currentStep
        {
            background-color: #6699CC;
            color:#fff;
        }
        #wizHeader li .currentStep:after
        {
            border-left-color: #6699CC !important;
        }
        #wizHeader li .nextStep
        {
            background-color: #F0E9EA;
            color:gray;
        }
        #wizHeader li .nextStep:after
        {
            border-left-color: #F0E9EA !important;
        }
        #wizHeader
        {
            list-style: none;
            overflow: hidden;
            font: 14px Helvetica, Arial, Sans-Serif;
            margin: 0px;
            padding: 0px;
        }
        #wizHeader li
        {
            float: left;
        }
        #wizHeader li a
        {
            color: white;
            text-decoration: none;
            padding: 10px 0 10px 55px;
            background: brown; /* fallback color */
            background: hsla(34,85%,35%,1);
            position: relative;
            display: block;
            float: left;
        }
        #wizHeader li a:after
        {
            content: " ";
            display: block;
            width: 0;
            height: 0;
            border-top: 50px solid transparent; /* Go big on the size, and let overflow hide */
            border-bottom: 50px solid transparent;
            border-left: 30px solid hsla(34,85%,35%,1);
            position: absolute;
            top: 50%;
            margin-top: -50px;
            left: 100%;
            z-index: 2;
        }
        #wizHeader li a:before
        {
            content: " ";
            display: block;
            width: 0;
            height: 0;
            border-top: 50px solid transparent;
            border-bottom: 50px solid transparent;
            border-left: 35px solid white;
            position: absolute;
            top: 50%;
            margin-top: -50px;
            margin-left: 1px;
            left: 100%;
            z-index: 1;
        }
        #wizHeader li:first-child a
        {
            padding-left: 10px;
        }
        #wizHeader li:last-child
        {
            padding-right: 18px;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T20:50:27.987

1.  向#wizHeader 添加背景颜色以创建右侧边框的视觉效果。
2.  在#wizHeader 中指定一个宽度值，以防止它扩展到页面右侧。
3.  对我来说似乎在 Chrome 上运行良好（最新版本）

以下是一些要添加到#wizHeader 的声明示例（将这些添加到当前在 CSS 声明中的声明）

```
 #wizHeader {
   background: #6699CC; 
   width: 960px; 
} 
```

**根据评论添加更多...**

箭头向下移动的原因是因为 's 是块元素，向左浮动，所以它们会流动以适应可用的任何宽度，并在用完时下降到下一行。

如果你想切断最后一个箭头，你会通过瞄准目标获得更好的运气

*   包裹最后一个。这对我有用，在 Chrome 的检查器中编辑：

    ```
    #wizHeader li:last-child {
      width: 172px; /* you might have to tweak this a bit*/
      overflow: hidden;
      padding-right: 0;
    } 
    ```

    然后，相应地更改#wizHeader 的宽度。930px 宽似乎可以用上面的代码片段解决问题。

# javascript - 从目标 url 重定向的 YQL 查询

> ID：12628126
> 
> 赞同：1
> 
> 时间：2012-09-27T18:46:48.730
> 
> 标签：javascript, jquery, redirect, cross-domain, yql

我正在尝试废弃一个网站，但是当我尝试使用 YQL 连接到它时，我被重定向到该网站的主页，而不是我试图获取内容的页面。

有谁知道我可以做些什么来防止我的请求被重定向或任何解决方案来避免这个问题？

这是我尝试执行但失败的请求：目标站点：
[http](http://gticket.imagix.be/os1.aspx)
://gticket.imagix.be/os1.aspx 雅虎控制台中的请求：http:
[//query.yahooapis.com/v1 /public/yql?q=select%20*%20from%20html%20where%20url%3D%22http%3A%2F%2Fgticket.imagix.be%2Fos1.aspx%22&diagnostics=true](http://query.yahooapis.com/v1/public/yql?q=select%20%2a%20from%20html%20where%20url=%22http://gticket.imagix.be/os1.aspx%22&diagnostics=true)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T19:13:44.673

这不是因为`yql`，实际上它有`302`重定向。如果你直接把[这个](http://gticket.imagix.be/os1.aspx)url放在浏览器的地址栏或者点击它，那么你可以看到它已经被重定向到了网站的首页，你无法阻止。

[这](http://query.yahooapis.com/v1/public/yql?q=select%20%2a%20from%20html%20where%20url=%22http://gticket.imagix.be/os1.aspx%22&diagnostics=true)是重定向后页面的yql结果。

**更新：**

另请记住，如果网站选择使用 robots.txt 指令阻止 YQL，您将无法访问它。`yql`因此，如果以这种方式设置了站点，则站点可以拒绝请求，这是有关阻止[的文章](http://developer.yahoo.com/yql/provider/)`yql`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T19:10:12.493

YQL 中有一个 followRedirects 选项可供您使用。[在这里](http://developer.yahoo.com/forum/YQL/Possible-to-retrieve-redirected-destination-url-/1262125821000-04b56c0e-a282-3af1-9e09-085329883dc8)检查

# javascript - 函数未定义 - jsf/javascript

> ID：12628130
> 
> 赞同：0
> 
> 时间：2012-09-27T18:47:08.190
> 
> 标签：javascript, ajax, jsf

我无法调用我的 javascript 函数。我现在在 onChange SelectMenu 中尝试过并标记 ajax，但两者都给出以下消息：

> 消息：未定义“sumarFilas”。

跟随函数和 jsf 的函数调用：

```
<script language="javascript">

    var numfilasRelacion=1;
    var form=document.theForm;
    var valorNRN="";

    function  sumaRelacion()    {

    var miTablaRelacion = document.getElementById("form:j_idt115_panel");

    var fila = document.createElement("tr");
    var celda1 = document.createElement("td");
    var celda2 = document.createElement("td");
    var celda3 = document.createElement("td");
    var celda4 = document.createElement("td");
    var celda5 = document.createElement("td");

    numfilasRelacion=miTablaRelacion.getElementsByTagName("tr").length + 1 ;

    celda1.innerHTML = "<p:inputText id='inicioRango' />";
    celda2.innerHTML = "<p:inputText id='finalRango' />";
    celda3.innerHTML = "<p:inputText id='numeroGrupoId' />";
    celda4.innerHTML = "<p:inputText id='checkpto'/>";
    celda5.innerHTML = "<p:inputText id='checkptoH'/>";
    fila.appendChild(celda1);
    fila.appendChild(celda2);
    fila.appendChild(celda3);
    fila.appendChild(celda4);
    fila.appendChild(celda5);
    miTablaRelacion.appendChild(fila);
    }

    function restarFilas(rangos) {
    var miTablaRelacion = document.getElementById("form:j_idt115_panel");
    var i = numfilasRelacion-1;
    do{
        miTablaRelacion.deleteRow(i);
        numfilasRelacion=numfilasRelacion-1;
        i=i-1;
      }
    while (miTablaRelacion.rows.length != rangos)
    }

    function sumarFilas(){
        alert("sumarFilas");
    var numfilas=numfilasRelacion;
    var rangos = document.getElementById("form:j_idt115_panel").value;
    if(rangos>numfilas){                                
        for(var i=0;rangos-numfilas>i;i++){
        sumaRelacion();
        }
    }else{
        restarFilas(rangos);
    }
     }
</script> 
```

jsf：

```
<h:outputText value="Nº Intervalo a Portar:" />
<p:selectOneMenu value="#{bean.parametro.intervalo}">
    <f:selectItem itemLabel="1" itemValue="1" />
    <f:selectItem itemLabel="2" itemValue="2" />
    <f:selectItem itemLabel="3" itemValue="3" />
    <f:selectItem itemLabel="4" itemValue="4" />
    <f:selectItem itemLabel="5" itemValue="5" />
    <f:selectItem itemLabel="6" itemValue="6" />
    <f:selectItem itemLabel="7" itemValue="7" />
    <f:selectItem itemLabel="8" itemValue="8" />
    <f:selectItem itemLabel="9" itemValue="9" />
    <f:selectItem itemLabel="10" itemValue="10" />
    <f:ajax event="change" onevent="sumarFilas"></f:ajax>    

</p:selectOneMenu>

<h:panelGrid columns="6" style="margin-bottom:10px" cellpadding="5"
    id="pgrid121">

    <h:outputText value="Portabilidade Grupo" id="pg1" />
    <p:selectBooleanCheckbox
        value="#{bean.parametro.portabilidadeGrupo}" id="pg11" />

    <h:outputLabel for="numInicial1" value="Nº Inicial Int:" id="ni1" />
    <p:inputText id="numInicial1" value="#{bean.parametro.numInicial}" />

    <h:outputLabel for="numFinal1" value="Nº Final Int:" id="nf1" />
    <p:inputText id="numFinal1" value="#{bean.parametro.numFinal}" />

    <h:outputLabel for="idGrupo1" value="Id do Grupo:" id="ig1" />
    <p:inputText id="idGrupo1" value="#{bean.parametro.idgrupo}" />

    <h:outputText value="PTO" id="pt1" />
    <p:selectBooleanCheckbox value="#{bean.parametro.pto}" id="pt11" />

</h:panelGrid> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T19:26:10.493

您尝试使用 javascript 生成 JSF 代码。Javascript**在服务器处理整个 jsf 页面后**运行，生成 html，然后将呈现的 html 响应发送到浏览器。浏览器无法自己处理 JSF 代码，它完全超出了[JSF 生命周期](http://www.ibm.com/developerworks/library/j-jsf2/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T19:31:57.863

尝试如下更改您的功能

```
function sumarFilas(data){
    if (data.status === 'success') {
        alert("sumarFilas");
        var numfilas=numfilasRelacion;
        var rangos = document.getElementById("form:j_idt115_panel").value;
        if(rangos>numfilas){                                
            for(var i=0;rangos-numfilas>i;i++){
            sumaRelacion();
            }
        }else{
            restarFilas(rangos);
        }
    } 
} 
```

请让我知道这对你有没有用...

另外，看看这个**BalusC**答案

[jsf 2.0 (myfaces) 中的 ajax 调用，在渲染完成之前调用 ajax 标签中的 onevent javascipt 函数](https://stackoverflow.com/a/11351236/617373)

# c# - Google 日历插入事件导致“远程服务器返回错误：(400) 错误请求。” 错误

> ID：12628132
> 
> 赞同：0
> 
> 时间：2012-09-27T18:47:23.037
> 
> 标签：c#, asp.net, webforms, google-calendar-api

我的代码：

我的代码隐藏文件中有这个。

```
Event newEvent = new Event
            {
                Summary = "Tin Roof",
                Description = "Its gonna be epic",
                Location = "Claremont",
                Start = new EventDateTime
                {
                    Date = "2012-02-14", 
                    DateTime = "2011-06-03T10:00:00.000-07:00",
                    TimeZone = "Cape Town",                    
                },
            };

            _service.Events.Insert(newEvent, "validcalendarId@group.calendar.google.com").Fetch(); 
```

这是我在尝试将事件插入日历时遇到的错误。错误：

```
Google.Apis.Requests.RequestError
Required [400]
Errors [
    Message[Required] Location[ - ] Reason[required] Domain[global]
] 
```

有什么想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-04T11:11:01.170

我知道它是一个旧帖子，但时区看起来不正确。尝试改用非洲/约翰内斯堡。此外，如果您使用日期字段，它会执行“全天”日历条目。否则使用开始时间。您还应该添加一个结束时间对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T18:49:15.380

我会仔细检查网址。如果 URL 在客户端看起来没问题，我建议查看服务器上的访问日志以查看正在访问的 URL。4xx 错误表示未找到资源。如果端点是正确的，但请求是 fubared，你会得到一个 5xx 错误代码。（假设您的服务器端框架使用标准 HTTP 响应代码）。

# ruby-on-rails - 如何在 Rails 配置路径中访问 yaml

> ID：12628133
> 
> 赞同：5
> 
> 时间：2012-09-27T18:47:27.357
> 
> 标签：ruby-on-rails, ruby, gem, yaml

我正在编写一个 ruby​​ gem，我想让用户使用您自己的 yaml 文件配置，但我不知道如何测试 user_config.yml 是否存在于 rails 配置路径中。
仅当此文件存在于配置路径中时，我才想使用 user_config.yml。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-28T00:17:12.590

`Rails.root`（或`RAILS_ROOT`在 Rails 的早期版本中）为您提供应用程序根目录的路径。从那里，您可以查看您感兴趣的文件是否存在。

例如

```
path = File.join(Rails.root, "config", "user_config.yml")
if File.exists?(path)
  # do something
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T19:12:22.903

您可以使用数组类型的 $LOAD_PATH 变量访问 Rails 应用程序的加载路径。

因此

```
if $LOAD_PATH.include?('/path/where/user/should/put/their/user_config.yml')
  # EDIT
  config_options = File.new('rails_app/config/user_config.yml', 'r')
else
  # EDIT
  config_options = File.new('path/to/default/config.yml', 'r')
end 
```

[Ruby File 类](http://www.ruby-doc.org/core-1.9.3/File.html#)还有另一种有用的方法，称为#exists？这当然会检查文件是否存在。有关更多信息，请参阅文件类文档。

希望这能让你开始。您的问题相当模糊，如果您需要更多帮助，请回复更多详细信息。

# matlab - 计算扫频正弦波形的每个样本的频率

> ID：12628139
> 
> 赞同：1
> 
> 时间：2012-09-27T18:47:43.580
> 
> 标签：matlab, audio

我有一系列扫频正弦音频信号的录音，我想知道每个样本的有效频率是多少。

例如，正弦扫描可能在 400-10000 Hz 之间，持续 500 个样本。

我在 Matlab 中工作，我会使用 logspace(a,b,n) 但它只接受 a 和 b 作为 10 的幂。我需要能够在任意 2 个值之间产生对数递增的值数组的东西。

理想情况下在matlab中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T18:56:37.913

您可以将值 a 和 b 表示为 10 的指数，因为 10^(log10(a)) = a。

所以：

```
 n = 100;        %number of points between a and b
 y = logspace(log10(a), log10(b), n); 
```

# python - Python：将一个类的方法分配给另一个类的实例

> ID：12628142
> 
> 赞同：3
> 
> 时间：2012-09-27T18:47:47.550
> 
> 标签：python

我想使用 new.instancemethod 将一个类 (A) 中的函数 (aFunction) 分配给另一个类 (B) 的实例。我不确定如何让 aFunction 允许自己应用于 B 的实例 - 目前我收到一个错误，因为 aFunction 期望在 A 的实例上执行。

[注意：我不能使用 __class__ 属性将实例转换为 A，因为我正在使用的类（在我的示例中为 B）不支持类型转换]

```
import new

class A(object):
    def aFunction(self):
        pass

#Class which doesn't support typecasting
class B(object): 
    pass

b = B()
b.aFunction = new.instancemethod(A.aFunction, b, B.__class__)
b.aFunction() 
```

这是错误：

```
TypeError: unbound method aFunction() must be called with A instance as first argument (got B instance instead) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T19:15:45.587

`new.instancemethod`接受一个功能。`A.aFunction`是一个未绑定的方法。那不是一回事。（您可能想尝试添加一堆打印语句来显示所有涉及的内容 - <code>A.aFunction()`A().aFunction`等 - 以及它们的类型，以帮助理解。）

我假设你不知道[描述符](http://docs.python.org/howto/descriptor.html)是如何工作的。如果您不想了解所有血淋淋的细节，那么实际发生的情况是您`aFunction`在类定义中的声明会在函数之外创建一个非数据描述符。这是一个神奇的东西，这意味着，根据你访问它的方式，你会得到一个未绑定的方法（`A.aFunction`）或一个绑定的方法（`A().aFunction`）。

如果您修改`aFunction`为 a `@staticmethod`，这实际上会起作用，因为对于静态方法来说，两者`A.aFunction`都`A().aFunction`只是函数。（我不确定标准是否保证这是真的，但很难看出其他人会如何实现它。）但是如果你想要“aFunction 允许自己应用于 B 的实例”，一个静态的方法对你没有帮助。

如果你真的想得到底层函数，有很多方法可以做到；我认为就帮助您了解描述符的工作原理而言，这是最清楚的：

```
f = object.__getattribute__(A, 'aFunction') 
```

另一方面，最简单的可能是：

```
f = A.aFunction.im_func 
```

然后，调用`new.instancemethod`是将函数转换为描述符的方法，该描述符可以作为 B 类实例的常规方法调用：

```
b.aFunction = new.instancemethod(f, b, B) 
```

打印出一堆数据让事情变得更加清晰：

```
import new

class A(object):
  def aFunction(self):
    print self, type(self), type(A)

#Class which doesn't support typecasting
class B(object): 
    pass

print A.aFunction, type(A.aFunction)
print A().aFunction, type(A().aFunction)
print A.aFunction.im_func, type(A.aFunction.im_func)
print A().aFunction.im_func, type(A().aFunction.im_func)

A.aFunction(A())
A().aFunction()

f = object.__getattribute__(A, 'aFunction')
b = B()
b.aFunction = new.instancemethod(f, b, B)
b.aFunction() 
```

你会看到这样的东西：

```
<unbound method A.aFunction> <type 'instancemethod'>
<bound method A.aFunction of <__main__.A object at 0x108b82d10>> <type 'instancemethod'>
<function aFunction at 0x108b62a28> <type 'function'>
<function aFunction at 0x108b62a28> <type 'function'>
<__main__.A object at 0x108b82d10> <class '__main__.A'> <type 'type'>
<__main__.A object at 0x108b82d10> <class '__main__.A'> <type 'type'>
<__main__.B object at 0x108b82d10> <class '__main__.B'> <type 'type'> 
```

唯一没有显示的是创建绑定和未绑定方法的魔法。为此，您需要查看`A.aFunction.im_func.__get__`，此时您最好阅读描述符 howto 而不是尝试自己挖掘它。

最后一件事：正如brandizzi 指出的那样，这是您几乎不想做的事情。替代方案包括： 编写`aFunction`为自由函数而不是方法，因此您只需调用`b.aFunction()`; 分解出一个真正起作用的函数，然后`A.aFunction`调用`B.aFunction`它；`B`聚合一个并`A`转发给它；等等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T03:28:50.710

我已经发布了对您提出的问题的答案。但是你不应该不得不降低到必须理解`new.instancemethod`来解决你的问题的水平。发生这种情况的唯一原因是你问错了问题。让我们看看你*应该*问什么，以及为什么。

> 在 PySide.QtGui 中，我希望列表小部件项具有设置字体和颜色的方法，但它们似乎没有。

这才是你真正想要的。很可能有一种简单的方法可以做到这一点。如果是这样，这就是你想要的答案。此外，从这个开始，你可以避免所有关于“你真正想做什么？”的评论。或“我怀疑这是否适合您尝试做的任何事情”（这通常伴随着反对票，或者更重要的是，潜在的回答者只是忽略了您的问题）。

> 当然，我可以只编写一个带有 QListWidgetItem 的函数并调用该函数，而不是使其成为一个方法，但这对我不起作用，因为*_*。

我认为有一个对你不起作用的原因。但我真的想不出一个好的。无论哪一行代码都是这样说的：

```
item.setColor(color) 
```

相反会这样说：

```
setItemColor(item, color) 
```

很简单。

即使您需要，例如，传递一个绑定了项目的颜色设置委托，使用函数和使用方法几乎一样容易。而不是这个：

```
delegate = item.setColor 
```

它的：

```
delegate = lambda color: setItemColor(item, color) 
```

因此，如果您有*充分*的理由需要将其作为一种方法，那么您确实应该解释一下。如果你很幸运，结果会证明你错了，而且有一种比你尝试的方法更简单的方法来做你想做的事。

> 显而易见的方法是让 PySide 让我指定一个类或工厂函数，这样我就可以编写一个 QListWidgetItem 子类，而我曾经处理过的每个列表项都是该子类的一个实例。但我找不到任何方法来做到这一点。

这似乎应该是 PySide 的一个特性。所以也许是这样，在这种情况下你想知道。如果不是，并且您或任何评论者或回答者都无法想出一个很好的理由，它是糟糕的设计或难以实现，您应该提交一个功能请求，它可能会出现在下一个版本中。（如果您需要在下周针对当前版本发布代码，这并不是说这对您有帮助，但仍然值得这样做。）

> 由于我找不到这样做的方法，我试图找到某种方法将我的`setColor`方法添加到`QListWidgetItem`类中，但想不出任何东西。

猴子修补类非常简单：

```
QListWidgetItem.setColor = setItemColor 
```

如果你不知道你可以做到这一点，那很好。如果人们知道这就是你想要做的，这将是他们建议的第一件事。（好吧，也许没有多少 Python 程序员对猴子补丁了解很多，但它仍然比了解描述符或`new.instancemethod`.更好的答案。

即使您确实知道这一点，某些扩展模块也不会让您这样做。如果您尝试过但失败了，请解释什么不起作用：

> PySide 不允许我将方法添加到类中；当我尝试修补猴子时，*_* _。

也许有人知道为什么它不起作用。如果没有，至少他们知道你试过了。

> 所以我必须将它添加到每个实例中。

猴子修补实例如下所示：

```
myListWidgetItem.setColor = setItemColor 
```

同样，您会得到一个快速的答案，而且是一个更好的答案。

但也许你知道这一点，并尝试过，但它也没有奏效：

> PySide 也不允许我将方法添加到每个实例；当我尝试时，*_* _。
> 
> 所以我尝试修补`__class__`每个实例，使其指向一个自定义子类，因为这在 PyQt4 中有效，但在 PySide 中它*_* _。

这可能不会为您带来任何有用的东西，因为这正是 PySide 的工作方式。但值得一提的是你试过了。

> 所以，我决定创建那个自定义子类，然后复制它的方法，就像这样，但是*_*。

一直到这里，您将在原始问题中放入所有内容。如果确实有必要解决您的问题，那么信息就在那里。但是，如果有一个简单的解决方案，您就不会从那些只是猜测其工作原理的人那里得到一堆令人困惑的答案`new.instancemethod`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T18:54:40.083

如果可能的话，您可以`aFunction`使用`@staticmethod`装饰器来解除绑定：-

```
class A(object):
    @staticmethod
    def aFunction(B):    # Modified to take appropriate parameter..
        pass

class B(object): 
    pass

b = B()
b.aFunction = new.instancemethod(A.aFunction, b, B.__class__)
b.aFunction() 
```

*注意： - 您需要修改方法以采用适当的参数..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-09T10:22:49.333

我很惊讶这些答案都没有给出看似最简单的解决方案，特别是在您希望现有实例通过“嫁接”而将方法 x 替换为来自另一个类（例如子类）的方法 x（同名）时给它。

我在相同的上下文中遇到了这个问题，即使用 PyQt5。具体来说，使用一个`QTreeView`类，问题是我已经对树结构（第一列）中涉及的所有树项进行了子类化`QStandardItem`（调用它`MyItem`），除其他外，添加或删除这样一个项目涉及一些额外的东西，特别是添加字典的键或从该字典中删除键。

覆盖`appendRow`(and `removeRow`, `insertRow`, `takeRow`, 等) 没有问题：

```
class MyItem( QStandardItem ):
    ...

    def appendRow( self, arg ):
        # NB QStandarItem.appendRow can be called either with an individual item 
        # as "arg", or with a list of items 
        if isinstance( arg, list ):
            for element in arg:
                assert isinstance( element, MyItem )
                self._on_adding_new_item( element )
        elif isinstance( arg, MyItem ):
            self._on_adding_new_item( arg )
        else:
            raise Exception( f'arg {arg}, type {type(arg)}')
        super().appendRow( self, arg ) 
```

...`_on_adding_new_item`填充字典的方法在哪里。

当您想要添加“0 级”行时，问题就出现了，即其父行是`QTreeView`. 自然地，您希望这个新的“level-0”行中的项目为每个项目创建一个字典条目，但是如何获得这个不可见的根项目 class`QStandardItem`呢？

我尝试覆盖模型的方法`invisibleRootItem()`来交付不是`super().invisibleRootItem()`，而是一个新的`MyItem`. 这似乎不起作用，可能是因为`QStandardItemModel.invisibleRootItem()`在幕后做了一些事情，例如将项目的`model()`方法设置为返回`QStandardItemModel`.

解决方案非常简单：

```
class MyModel( QStandardItemModel ):
    def __init__( self ):
        self.root_item = None
        ...

    ...

    def invisibleRootItem( self ):
        # if this method has already been called we don't need to do our modification
        if self.root_item != None:
            return self.root_item 

        self.root_item = super().invisibleRootItem()
        # now "graft" the method from MyItem class on to the root item instance
        def append_row( row ):
            MyItem.appendRow( self.root_item, row  )
        self.root_item.appendRow = append_row 
```

...但这还不够，但是：`super().appendRow( self, arg )`在根项上调用 in`MyItem.appendRow`时会引发异常，因为 a`QStandardItem`没有`super()`. 相反，`MyItem.appendRow`改为：

```
def appendRow( self, arg ):
    if isinstance( arg, list ):
        for element in arg:
            assert isinstance( element, MyItem )
            self._on_adding_new_item( element )
    elif isinstance( arg, MyItem ):
        self._on_adding_new_item( arg )
    else:
        raise Exception( f'arg {arg}, type {type(arg)}')
    QStandardItem.appendRow( self, arg ) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-27T18:55:36.267

谢谢 Rohit Jain - 这就是答案：

```
import new

class A(object):
    @staticmethod
    def aFunction(self):
        pass

#Class which doesn't support typecasting
class B(object): 
    pass

b = B()
b.aFunction = new.instancemethod(A.aFunction, b, B.__class__)
b.aFunction() 
```

# c# - 正则表达式 - 查找匹配后的所有行：

> ID：12628146
> 
> 赞同：3
> 
> 时间：2012-09-27T18:47:50.980
> 
> 标签：c#, regex

给定电子邮件正文中的以下文本：

> 不要修改上面的主题行。发送此电子邮件表示我请求延迟将此产品更改通知 (PCN) 分发到 9001 (Qwest)。该延迟请求的理由如下：
> 
> 这就是我需要捕捉的原因。
> 
> 它可以有很多行。
> 
> 并持续很长时间

我正在尝试捕获“...在下面提供：”之后的所有文本。

传递给 BodyRegex 的模式是：

```
.*provided below:(?<1>.*) 
```

正在执行的代码是：

```
Regex regex2 = new Regex(BodyRegex, RegexOptions.IgnoreCase | RegexOptions.Multiline);
string note = null;
Match m2 = regex2.Match(body);
if (m2.Success)
{
    note = m2.Groups[1].Value;
} 
```

未找到匹配项。

我需要使用什么匹配模式来捕获“下面提供：”之后的所有文本行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T19:21:00.263

(?...) 部分是前瞻语法，这不是您想要的。

您可能想尝试看看后面：

```
(?<=provided below:)[.|\n|\W|\w]* 
```

我遇到了 .NET 无法按照您期望的方式识别行尾字符的问题 .* ，因此是 or 条件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T18:50:00.023

将此正则表达式与`single line`选项一起使用

```
^.*?provided below:(.*?)$ 
```

在[这里工作](http://regexhero.net/tester/)

# java - 如何设置 cron 作业来启动和停止 java jar？

> ID：12628147
> 
> 赞同：4
> 
> 时间：2012-09-27T18:48:04.867
> 
> 标签：java, cron

我已经将我的 JAVA 代码编译成一个 jar 文件，该文件已移植到我的 ubuntu 服务器。我可以使用通常的方式手动启动它，`java -jar myJar.jar`但我希望我的程序仅激活 8 小时。如何将我的 jar 文件设置为从上午 9 点开始并在下午 5 点自动关闭的进程？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T18:56:56.293

我会编写一个简单的启动器脚本，它执行以下操作：

*   采用两个命令行选项：
    *   `--start`
        *   设置类路径和环境，如 JAVA_HOME 以使 jar 运行。
        *   产卵`java -jar myJar.jar`。
        *   捕获进程 ID 并将其存储`myJar.pid`在特定位置的文件中。
    *   `--stop`
        *   从中读取进程 ID`myJar.pid`并发送`kill`信号。

[然后在cron](https://help.ubuntu.com/community/CronHowto)中安排两个作业，一个`--start`在上午 9 点用参数调用这个启动器脚本，另一个`--stop`在下午 5 点用参数调用同一个脚本。

我还会在我的应用程序中注册一个[关闭挂钩](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Runtime.html#addShutdownHook%28java.lang.Thread%29)，以便在发出终止信号时优雅地退出。

# c# - 如何从动态对象集中动态获取对象 T 的属性 使用实体框架？

> ID：12628148
> 
> 赞同：2
> 
> 时间：2012-09-27T18:48:08.303
> 
> 标签：c#, entity-framework, reflection

我正在尝试创建一个报告屏幕，该屏幕动态调整自身以适应使用实体框架生成的模型中存在的数据库视图的内容。

要获取我正在使用此代码的实体：

```
var view = context.GetType().GetProperty(viewName).GetValue(context, null); 
```

此代码返回`ObjectSet<viewType>`满足我部分需求的代码。

现在我需要获取视图类型的属性，以便获取列。

我尝试使用类似的东西：

```
var methodInfo = view .GetType().GetMethod("First");
var properties = methodInfo.ReturnType.GetProperties(BindingFlags.Public | BindingFlags.Instance); 
```

但它没有找到“第一”方法，我不知道在哪里可以找到一些帮助我如何使它工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T18:56:43.453

```
var gtype = view.GetType().GetGenericArguments()[0]; 
```

如果视图是 ObjectSet<FooBars>

gtype 将是 FooBars

然后你可以在 gtype 上调用 GetProperties。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T18:53:27.483

首先是 System.Linq.Queryable 上的扩展方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T18:52:33.240

我相信，您正在尝试找到一种方法`first()`来满足`ObjectSet<viewType>`您的真正需求。`viewType`所以这就是你需要的。

```
var methodInfo = view.GetType().GetGenerericArguments()[0].GetMethod("First"); 
```

# java - 使用哪个联接操作将多个表与 JPA/SQL 查询结合起来？

> ID：12628156
> 
> 赞同：2
> 
> 时间：2012-09-27T18:48:40.400
> 
> 标签：java, sql, jpa, join

我有一个 JPA 数据库设置，如下所示：

```
@Entity
public class Contact {

    @Id
    private Long id;
    @Column(length = 64)
    private String firstname;
    @Column(length = 64)
    private String surname;

    @OneToMany(mappedBy = "contact") 
    private List<Address> adresses = new ArrayList<Address>();
    @OneToMany(mappedBy = "contact") 
    private List<Telephone> telephones = new ArrayList<Telephone>();

}

@Entity
public class Address {

    @Id
    private Long id;
    @Column(length = 128)
    private String street;
    @Column(length = 16)
    private String plz;

    @ManyToOne 
    private Contact contact;

}

@Entity
public class Telephone {

    @Id
    private Long id;
    @Column(length = 32)
    private String number;

    @ManyToOne
    private Contact contact;

} 
```

现在我的搜索表单有以下查询：

```
em.createQuery("SELECT DISTINCT c FROM Contact c LEFT JOIN c.addresses a LEFT JOIN c.telephones t "
                        + "WHERE c.surnameLIKE '%"+var_surname+"%' "
                        + "AND c.firstname LIKE '%"+var_firstname+"%' "
                        + "AND a.street LIKE '%"+var_street+"%'"
                        + "AND t.nummer LIKE '%"+var_telephone+"%'"
                        ).getResultList(); 
```

我现在的问题是如何在一个 JPA 查询中加入所有 3 个表以查找名字、街道和号码？我已经尝试过使用 LEFT JOIN，但是当例如 Telephone 表为空时（如果所有表都有适当的条目，它可以正常工作），我没有得到任何结果。即使没有电话号码，我也希望有一个包含联系人的结果列表，即使联系人有多个电话号码，也只有一个结果。

非常感谢您提前提供的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T19:01:04.313

您是否尝试过使用“LEFT OUTER JOIN”，例如下面？

```
 "SELECT DISTINCT c FROM Contact c LEFT OUTER JOIN c.addresses a LEFT OUTER JOIN c.telephones t "
          + "WHERE c.surnameLIKE '%"+var_surname+"%' "
          + "AND c.firstname LIKE '%"+var_firstname+"%' "
          + "AND a.street LIKE '%"+var_street+"%'"
          + "AND t.nummer LIKE '%"+var_telephone+"%'"
          ).getResultList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T13:24:24.070

DISTINCT 应​​该删除重复项，

如果没有关系，您需要使用 OR 来获得结果，

```
 + "AND ((a.id is null) OR (a.street LIKE '%"+var_street+"%'))" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T08:08:13.310

感谢您提供有用的答案。最后，我必须通过动态构建搜索字符串来解决问题，根据用户留空的字段有选择地添加/删除连接操作数的某些部分。

```
 public List<Person> querySearch(String snachname, String svorname, String srechtsform, String sadresse, String sort, String sland, String stelefon, String semail, LoadGroup group) {
        if(srechtsform.equals("Alle")) {
            srechtsform = "";
        }
        if(sland.equals("Alle")) {
            sland = "";
        }
        String q = "SELECT DISTINCT * FROM Person p LEFT OUTER JOIN Adresse a ON (a.PERSON_ID=p.ID) LEFT OUTER JOIN Telefon t ON (t.PERSON_ID=p.ID) LEFT OUTER JOIN Email e ON (e.PERSON_ID=p.ID) WHERE p.nachname1 LIKE '%"+snachname+"%'AND p.vorname LIKE '%"+svorname+"%' AND p.rechtsform LIKE '%"+srechtsform+"%' ";
        if(sadresse.equals("") && sort.equals("") && sland.equals("")) {
            q += "AND (a.ID IS NULL OR (a.strasse LIKE '%"+sadresse+"%' AND a.ort LIKE '%"+sort+"%' AND a.land LIKE '%"+sland+"%')) "; 
        } else {
            q += "AND a.strasse LIKE '%"+sadresse+"%' AND a.ort LIKE '%"+sort+"%' AND a.land LIKE '%"+sland+"%' "; 
        }
        if(stelefon.equals("")) {
            q += "AND (t.ID IS NULL OR t.nummer LIKE '%"+stelefon+"%') ";
        } else {
            q += "AND t.nummer LIKE '%"+stelefon+"%' ";
        }
        if(semail.equals("")) {
            q += "AND (e.ID IS NULL OR e.mailadresse LIKE '%"+semail+"%') ";
        } else {
            q += "AND e.mailadresse LIKE '%"+semail+"%' ";
        }
        q += "GROUP BY p.ID";
        Query query = em.createNativeQuery(q, Person.class);
        if(group!=null) { query.setHint(QueryHints.LOAD_GROUP, group); }
        return query.getResultList();
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-06T04:39:36.220

JPA 不支持“LEFT OUTER JOIN a ON b”样式语法（请参阅[http://chrisiecorner.blogspot.fi/2012/12/jpa-and-outer-joins.html](http://chrisiecorner.blogspot.fi/2012/12/jpa-and-outer-joins.html)）

您必须进行本机查询。

# css - 如何设置音频播放器的样式？

> ID：12628157
> 
> 赞同：0
> 
> 时间：2012-09-27T18:48:41.203
> 
> 标签：css

我正在尝试设置用户单击音乐文件时生成的音频播放器的样式。

在chrome的开发者工具中，结构如下

```
<embed src='music.wav' >
    #document
        <html>
            <body>
                <video controls autoplay name='media'>
             <source src='music.wav' type='audio/x-wav'>
        </video>
        <body>
    <html>
</embed> 
```

在这种情况下，如何设置 chrome 生成的视频播放器的样式？非常感谢！

# php - 如何使用正则表达式的方法以使用 PHP 打印到动态表中

> ID：12628158
> 
> 赞同：2
> 
> 时间：2012-09-27T18:48:40.970
> 
> 标签：php, regex, loops, methods

我有一份课程清单以及学生参加这些课程所需的时间。课程如下：

```
CON8101 Residential Building/Estimating 16 hrs/w 
CON8411 Construction Materials I 4 hrs/w 
CON8430 Computers and You 4 hrs/w 
MAT8050 Geometry and Trigonometry 4 hrs/w 
```

我已经使用这个 RegEx 来提取课程名称和每门课程每周花费的时间。有4门以上的课程，4门是上面的例子。可以有多达50门课程。

```
$courseHoursRegEx = "/\s[0-9]{1,2}\shrs/w/";
$courseNameRegEx = "/[a-zA-Z]{3}[0-9]{4}[A-Z]{0,1}\s?/[a-zA-Z]{3,40}/"; 
```

并应用以下函数（不确定是否 100% 正确）来提取 RegEx 字符串。使用 $courseLine 是我从早期打开的文本文档中保存每一行的字符串的变量。它跟踪从字符串中提取的总小时数。

**$courses 是用户在 html 部分中输入的复选框数组**

```
$totalHours += GetCourseHours($courseLine);
function GetCourseHours($couseLine)
    {
        if(!preg_match($courseHoursRegEx, $courseLine))
            {
                return $courseLine;
            }
    }
function GetCourseName($courseLine)
    {
        if(!preg_match($courseNameRegEx, $courseLine))
            {
                return $courseLine;
            }
    } 
```

我使用了一个 foreach 循环来输出所有选定的课程，以便在表格中进行排序。

```
foreach($courses as $course)
    {
    $theCourse = GetCourseName($course);
    $theHours = GetCourseHours($course)
    } 
```

编辑：输出代码

```
for($i = 1; $i <= $courses; ++$i)
{
printf("<tr><td>\$%.2f</td><td>\$%.2f</td></tr>", $theCourse, $theHours);

} 
```

**我不确定如何将我拥有的内容输出到按课程名称和每门课程的小时数组织的动态表中。我无法让我的页面运行，我找不到任何语法错误，我担心这是我的逻辑。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T19:11:14.137

首先，（在正则表达式中修复了一些小问题之后）你可以在一个`preg_`电话中完成所有这些。方法如下：

```
preg_match_all("~([a-zA-Z]{3}\d{4}[A-Z]{0,1}\s.+)\s(\d{1,2})\shrs/w~", $str, $matches); 
```

`$str`可以是同时包含所有行的多行字符串。或者您可以一次传入一行。如果您一次传入所有行，`$matches`将如下所示：

```
Array
(
    [0] => Array
        (
            [0] => CON8101 Residential Building/Estimating 16 hrs/w
            [1] => CON8411 Construction Materials I 4 hrs/w
            [2] => CON8430 Computers and You 4 hrs/w
            [3] => MAT8050 Geometry and Trigonometry 4 hrs/w
        )

    [1] => Array
        (
            [0] => CON8101 Residential Building/Estimating
            [1] => CON8411 Construction Materials I
            [2] => CON8430 Computers and You
            [3] => MAT8050 Geometry and Trigonometry
        )

    [2] => Array
        (
            [0] => 16
            [1] => 4
            [2] => 4
            [3] => 4
        )

) 
```

现在您可以简单地遍历所有名称`$matches[1]`并总结`$matches[2]`. 请注意，这两个内部数组对应于我在正则表达式中使用的圆括号内的*内容。*这些就是所谓的子模式，它们*捕获*额外的（子）匹配。也`$matches[0]`将始终包含整个模式的完整匹配，但在这种情况下您不需要它。

# windows - 调用 CryptCATCatalogInfoFromContext 抛出错误

> ID：12628161
> 
> 赞同：0
> 
> 时间：2012-09-27T18:48:46.177
> 
> 标签：windows, vb.net, winapi, code-signing, sha1

我想调用wintrust.dll中可用的**函数****CryptCATCatalogInfoFromContext**。但是当我这样做时，我收到一条错误消息，指出**指定的数组不是预期的类型。** 我正在使用以下代码来调用方法。我使用的某些数据类型似乎与所需的数据类型不匹配。

 ****```
 'import wintrust.dll
    <DllImport("Wintrust.dll", PreserveSig:=True, SetLastError:=False)> _
    Private Shared Function CryptCATCatalogInfoFromContext(ByVal catalogContext As IntPtr, ByVal hash As CATALOG_INFO_, ByVal dwFlags As Integer) As Boolean
    End Function

    'create structure CATALOG_INFO
    <StructLayout(LayoutKind.Sequential)> _
        Public Structure CATALOG_INFO_
        Public cbStruct As UInteger
        <MarshalAs(UnmanagedType.SafeArray)> _
        Public wszCatalogFile() As Char 
    End Structure 
```

我已经获得了 CatalogContext。

```
 Dim infoStruct As New CATALOG_INFO_()
        infoStruct.cbStruct = 256
        Dim c(255) As Char
        infoStruct.wszCatalogFile = c
        CryptCATCatalogInfoFromContext(CatalogContext, infoStruct, 0) 
```

最后一行抛出错误**指定的数组不是预期的类型。** 我是否为数组使用了错误的数据类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T19:23:06.270

是的，错误的声明。它不是 SafeArray，而是 Unicode 字符串。正确的声明是：

```
<StructLayout(LayoutKind.Sequential, CharSet:=CharSet.Unicode)> _
Public Structure CATALOG_INFO
    Public cbStruct As UInteger
    <MarshalAs(UnmanagedType.ByValTStr, SizeConst:=260)> _
    Public wszCatalogFile As String
End Structure 
```****

# javascript - IE 图像宽度截断

> ID：12628163
> 
> 赞同：1
> 
> 时间：2012-09-27T18:48:58.370
> 
> 标签：javascript, html, css, internet-explorer-9, width

编写图像时，我无法访问其尺寸，因此无法指定确切的宽度和高度。图像为 19 像素 * 16 像素。我拥有的唯一属性是`id`、和Chrome `class`、FF 和 Safari 将其渲染为 19x16，但 IE 将其截断为 16x16。我在这里做错了什么？`align="absmiddle"``border="0"`

**编辑：**

```
<img align="absmiddle" id="tree_img_0_0_0" border="0" title="tree node" alt="" src="../icons/web/Lminus.png?-=1k23z39"> 
```

我说的png是19px * 16px。

包含的 div 是

```
<div class="treenode" style="width:100%;font-family:Segoe UI, Lucida Grande, Lucida Sans Unicode, Tahoma, Arial, Verdana, sans-serif;font-size:9.0pt;font-weight:normal;font-style:normal;"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T18:57:30.707

似乎没有足够的证据，但是您是否将 align 属性移至样式？

查看[如何用 css 替换 absmiddle](http://www.web-sheeps.com/rec/69-Image-vertical-align-with-CSS,-avoid-abs)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T14:19:17.107

因此，鉴于 IE 令人沮丧的不同，我最终制作了一个“绘制图像”功能并计算了一个设定的宽度而不是使用 width:100%

# python - 在 Windows 上安装 SciPy 时遇到问题

> ID：12628164
> 
> 赞同：18
> 
> 时间：2012-09-27T18:49:03.197
> 
> 标签：python, windows, installation, scipy

我安装了 Python 2.7 和 NumPy。我已经为 SciPy 下载了预构建的二进制文件，但安装脚本失败并出现以下错误：

未找到Blas`(http://www.netlib.org/blas/)`库。搜索库的目录可以在 `numpy/distutils/site.cfg`文件（部分`[blas]`）中指定，也可以通过设置 BLAS 环境变量来指定。

我真的对这件事了解得不够多，无法愚弄它。我认为这是一个简单的安装过程，但似乎并非如此。我用谷歌搜索了 BLAS 环境变量，但找不到任何合适的东西。任何帮助表示赞赏。

麦克风

编辑：没关系，我找到了一个非官方的[安装程序 exe](http://sourceforge.net/projects/scipy/files/scipy/0.11.0/)。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2016-10-25T19:09:11.140

尝试使用 Scipy 轮文件安装。从这里下载：[http ://www.lfd.uci.edu/~gohlke/pythonlibs/#scipy](http://www.lfd.uci.edu/~gohlke/pythonlibs/#scipy)

确保下载与您的 Python 版本和笔记本电脑兼容的版本。然后像这样安装它：`pip install "path\to\your\wheel\file\scipy-0.18.1-cp27-cp27m-win_amd64.whl"`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-27T19:55:00.543

要在 Windows 上安装 SciPy，您必须安装一个 fortran 编译器。SciPy 项目推荐使用 MinGW。请参阅[构建和安装 SciPy](http://scipy.github.io/old-wiki/pages/Installing_SciPy/Windows)。要安装 MinGW，请遵循以下说明：[如何安装 MinGW (GCC) 编译器套件](http://www.mingw.org/wiki/InstallationHOWTOforMinGW)。然后在运行 pip 或 easy_install 安装 SciPy 之前，确保已将 MinGW 添加到路径中。请参阅[MinGW 安装说明 - 环境变量](http://www.mingw.org/wiki/Getting_Started#toc4)

附带说明，使用[Enthought Distribution](http://www.enthought.com/products/epd.php)（初始安装的一部分）或[Active State Distribution](http://www.activestate.com/activepython)（[仅通过 pypm 32 位](http://code.activestate.com/pypm/scipy/)）会更容易，因为它们已经为 SciPy 预编译了二进制包。或者，您可以使用适用于 Windows 的 SciPy 预编译二进制[包安装程序](https://sourceforge.net/projects/scipy/files/scipy/0.16.1)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-08T06:21:48.963

在这里，我将分享我为安装**scipy**所做的工作。

> 我的电脑配置是`windows-7 64-bit & python 2.7`

*   **首先，我从**[http://www.lfd.uci.edu/~gohlke/pythonlibs/](http://www.lfd.uci.edu/~gohlke/pythonlibs/) 下载所需的包 （哪个版本与您的配置相匹配：cp27==>python2.7 & cp36==>3.6）
*   **其次** ，我使用提取文件`7zip`（也可以使用任何拉链，如 winrar）
*   **第三**，我复制`scipy`我提取的文件夹并将其粘贴到`C:\Python27\Lib\site-packages`（或将其放在您的 PC 中的确切位置，例如`..\..\Lib\site-packages`）

> 注意：在以同样的方式安装**scipy**之前必须安装**numpy 。** `first`

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-24T13:06:35.307

在 Windows 上安装 Scipy 需要 C 编译器和系统上存在难以在 Windows 上安装的第三方 C 库。但是，您可以通过命令提示符使用 Wheel (.whl) 文件来安装 Scipy。

我遇到了同样的问题，这就是我所做的：

转到[https://pypi.python.org/pypi/scipy](https://pypi.python.org/pypi/scipy)并下载与您的系统和您安装的 Python 版本兼容的 Scipy 版本，例如，如果您安装了 32 位 Windows 和 Python 3.6，那么您下载带有 cp36 (version3.6) 和 Win-32 的版本。

下载后将此文件复制到安装 Python 的目录中的 Scripts 或 Lib 文件夹中。

接下来在更改到复制文件的目录后使用命令提示符安装它：

```
C:\....> pip install scipy-1.0.0b1-cp36-cp36m-win32.whl 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2017-07-12T05:17:45.527

在 Windows 上下载 scipy 的步骤-

```
1.Go to website sourceforge.net

2.Click Files

3.Downlaod the type you want

4.Install it. 
```

很容易，它对我有用。**

# java - 为什么 android.util.Base64 返回不同的字符串？

> ID：12628166
> 
> 赞同：1
> 
> 时间：2012-09-27T18:49:11.600
> 
> 标签：java, android, base64

我正在使用 android.util.Base64 对 HTTP 基本身份验证的用户名 + 密码进行编码，如下所示：

```
String encoded = Base64.encodeToString((username+":"+password).getBytes(), Base64.NO_WRAP); 
```

如果我使用“用户”和“密码”作为用户名和密码，我希望得到 dXNlcjpwYXNzCg==（来自 openssl）

```
echo 'user:pass' | openssl base64 
```

但相反，我得到了这个：

![返回的字符串](../Images/8805f6fc76f344c779a91bcdad49519a.png)

任何想法为什么会这样？

谢谢，

杰克

注意：只需将结果字符串传递给显示进度对话框：

```
Tools.ShowProgress(encoded, Login.this); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T18:54:38.137

```
(username+":"+password).getBytes() 
```

[String.getBytes()](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#getBytes%28%29)返回当前平台编码中字符串的字节数。为确保与其他平台匹配，您可能希望将[String.getBytes(Charset)](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#getBytes%28java.nio.charset.Charset%29)与 UTF-8 一起使用：

```
(username+":"+password).getBytes("UTF-8") 
```

如果这不是问题，那么要检查的另一件事是您的输入是否是您认为的：

```
String input = username+":"+password;
log.warn("Input was: " + input);
// calculate base64 
```

# jquery - JQuery验证器在第一次提交后工作 - asp .net

> ID：12628167
> 
> 赞同：0
> 
> 时间：2012-09-27T18:49:11.777
> 
> 标签：jquery, asp.net, jquery-validate

我对 JQuery 验证器有疑问。仅当我首先按下提交按钮时，验证开始才有效。但我只想在表单有效的情况下提交。而且我不知道为什么验证字段也会在它之后形成。请在 JS 代码中查看我的评论

```
<script src="/static/js/jquery.hint.js" type="text/javascript"></script>
<script src="/static/js/jquery.validate.min.js" type="text/javascript"></script>
<script src="/static/js/additional-methods.js" type="text/javascript"></script>

<script type="text/javascript">

    function ValidateForm (e) {
       //fix for hint
        setTimeout(function() 
                    { $('input').focus(); },
                500);

        return $("#contactForm").valid(); //this should prevent call of click event but I don't know why form first time is valid always :(      
    }

    jQuery(function ($) {
        var container = $("div.container"), validator;

        $(":input[data-hint-title]").hint();
        // validate the form when it is submitted
        validator = $("#contactForm").validate({
            errorContainer: container,
            errorLabelContainer: $("ol", container),
            wrapper: "li",
            meta: "validate",
            rules: {
                firstname: "required",
                lastname: "required",
                address: "required",
                city: "required",
                zipcode: "required",
                country: "required",
                phone: "required",
                email: {
                    required: true,
                    email: true
                },
                confirmEmail: {
                    required: true,
                    email: true,
                    equalTo: "#email"
                },
                message: {
                    required: true,
                    maxlength: 600
                }
            }
        });

        validator.resetForm();
    });

</script> 
```

这是 HTML 代码的剪切形式

```
<form id="contactForm" action="" method="POST" runat="server" ClientIDMode="Static">
<asp:ScriptManager EnablePartialRendering="true"
 ID="ScriptManager1" runat="server"></asp:ScriptManager>
<fieldset>
    <div class="row justify ibChildren">
        <span>
            <asp:TextBox runat="server" ID="firstname" data-hint-title="* first name" CssClass="required" ClientIDMode="Static" />
            </span>
        <span>
        <asp:TextBox runat="server" ID="lastname" data-hint-title="* last name" CssClass="required" ClientIDMode="Static" />

            </span>
    </div>

        <span>
         <asp:TextBox runat="server" ID="country" data-hint-title="* country" CssClass="required" ClientIDMode="Static" />

            <%--<input type="text" name="seach" value="" id="country" data-hint-title="Country" class="required" />--%></span>
    </div >
    <div class="row justify ibChildren">
        <span>
         <asp:TextBox runat="server" ID="phone" data-hint-title="* phone" CssClass="required" ClientIDMode="Static" />

            <%--<input type="text" name="seach" value="" id="phone" data-hint-title="Phone" />--%></span>
        <span>
           <%-- <input type="text" name="seach" value="" id="email" data-hint-title="Email" class="required"
                type="email" />--%>
                <asp:TextBox runat="server" ID="email" data-hint-title="* email" CssClass="required" ClientIDMode="Static" />

                </span>
    </div>
    <div class="row justify ibChildren">
        <span>
         <asp:TextBox runat="server" ID="productname" data-hint-title="product (name, shade, item #) other" ClientIDMode="Static" />
            <%--<input type="text" name="seach" value="" id="productName" data-hint-title="Product Name" class="required" />--%></span>
        <span>
             <asp:TextBox runat="server" ID="confirmEmail" data-hint-title="* confirm email" CssClass="required" ClientIDMode="Static" />

            <%--<input type="text" name="seach" value="" id="confirmEmail" data-hint-title="Confirm Email"
                class="required" type="email" />--%></span>
    </div>
    <div class="row full">
     <asp:TextBox runat="server" ID="message" TextMode="multiline" data-hint-title="* message" CssClass="required" ClientIDMode="Static" Columns="20" Rows="2" />
    </div>
    <div class="row submit">
    <asp:UpdatePanel ID="UpdatePanel1" runat="server">
<ContentTemplate>
    <asp:UpdateProgress ID="UpdateProgress1" runat="server" AssociatedUpdatePanelID="UpdatePanel1">
    <ProgressTemplate>
                Processing ...
            </ProgressTemplate>
    </asp:UpdateProgress>
    <asp:Label ID="lblStatus" runat="server" Text="" CssClass="requiredHint"></asp:Label>
    <asp:Button id="sendMail" runat="server" Text="Submit" CssClass="submit" OnClick="Send_Click" OnClientClick="ValidateForm();"  /></ContentTemplate>
  </asp:UpdatePanel>
    </div>
</fieldset>

<!-- our error container -->
<div class="container" >
    <h4>There are serious errors in your form submission, please see below for details.</h4>
    <ol>
        <li><label for="<%= firstname.ClientID %>" class="error">Please enter your first name</label></li>
        ...........
        <li><label for="<%= lastname.ClientID %>" class="error">Please enter your last name</label></li>   
    </ol>
</div>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T19:09:35.107

改变

```
OnClientClick="ValidateForm();" 
```

经过

```
OnClientClick="return ValidateForm();" 
```

# c# - 如何在有机会引发异常之前将 null 值转换为 string.empty？

> ID：12628169
> 
> 赞同：1
> 
> 时间：2012-09-27T18:49:16.730
> 
> 标签：c#, winforms, datagridview, nullreferenceexception, datagridviewtextboxcell

我有以下代码将先前的值输入到 DataGridView 单元格中。如果在第 0 行和第 2 列或更大，则左侧的 val，否则正上方的值：

```
private void dataGridViewPlatypi_CellEnter(object sender, DataGridViewCellEventArgs args)
{
    // TODO: Fails if it sees nothing in the previous cell
    string prevVal = string.Empty;
    if (args.RowIndex > 0)
    {
        prevVal = dataGridViewPlatypi.Rows[args.RowIndex - 1].Cells[args.ColumnIndex].Value.ToString();
    } else if (args.ColumnIndex > 1)
    {
        prevVal = dataGridViewPlatypi.Rows[args.RowIndex].Cells[args.ColumnIndex-1].Value.ToString();
    }
    dataGridViewPlatypi.Rows[args.RowIndex].Cells[args.ColumnIndex].Value = prevVal;
} 
```

只要有值得被看到和复制的价值，这就很好用。但是，如果单元格为空白，我会得到：

> System.NullReferenceException 未被用户代码处理
> Message=Object 引用未设置为对象的实例。

我猜这是一个使用空合并运算符的机会，但是（假设我的猜测很好），我该如何实现呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T18:55:20.303

尝试这样的事情：

```
string s = SomeStringExpressionWhichMightBeNull() ?? "" ; 
```

简单的！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T19:24:11.633

使用如下方法：

```
public static class MyExtensions
{
    public static string SafeToString(this object obj)
    {
        return (obj ?? "").ToString();
    }
} 
```

那么你可以像这样使用它：

```
object obj = null;

string str = obj.SafeToString(); 
```

或作为您的代码中的示例：

```
prevVal = dataGridViewPlatypi.Rows[args.RowIndex - 1].Cells[args.ColumnIndex].Value.SafeToString(); 
```

这会创建一个扩展方法，因此，如果您为扩展类在所有对象中的命名空间添加一个，则在智能感知中`using`似乎有一个方法。`SafeToString`该方法实际上不是实例方法，它只是显示为一个，因此如果对象为空，它不会生成空引用异常，而是简单地传递`null`给该方法，该方法将所有空值视为空字符串。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-27T18:52:10.037

假设*Value*是 null （从你的帖子中不完全清楚）你可以做

```
object cellValue = 
    dataGridViewPlatypi.Rows[args.RowIndex - 1].Cells[args.ColumnIndex].Value;
prevValue = cellValue == null ? string.Empty : cellValue.ToString() 
```

# jquery - MVC 3 - 动态添加文本框

> ID：12628174
> 
> 赞同：0
> 
> 时间：2012-09-27T18:49:53.950
> 
> 标签：jquery, asp.net-mvc-3

我有一个情况，用户可以选择他们想要输入信息的测试。例子：

```
Test1
Test2
Test3
Test4 
```

当SELECT SET TEST1，TEST3时，我需要使用这两个文本框字段（test1，test2）创建表单。我正在考虑遍历用户选择的选项，然后进行表演，通过 jquery 隐藏，但不确定这是否是解决此问题的最佳方式。有没有一种优雅的方式来显示用户选择的字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T20:39:08.453

```
$(':checkbox').each(function(){ //loop through your checkboxes

    if($(this).prop('checked')) { //if the current checkbox is checked

        var text = $(this).text(); //Test1, Test2 or whatever it might be. Would probably be better to store as a data-attribute on the checkbox

        var $textfield = $('<input/>').attr({ type: 'text' }).val(text); //generate a textfield with the selected text from the checkbox

        $('#yourForm').append($textfield); //add textfield to the form
    }

    $('#yourForm').show();

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T21:09:17.967

这样的事情可能很简单：

```
<ul id="textboxes">
    <li>
        <input type="checkbox" id="c1" name="c1" />                
        <input type="text" id="t1" name="t1" />
    </li>
    <li>
        <input type="checkbox" id="c2" name="c2" /> 
        <input type="text" id="t2" name="t2" style="display:none" />
    </li>
<ul> 
```

然后你的jQuery：

```
$('input[type="checkbox"]').click(function() {
    var id = $(this).attr('id').replace('c','');
    $('#t'+id).slideToggle(); 
}); 
```

显然你可以在那里有更多的盒子。如果你要走一条更动态的路线，无限，我会更真实地添加字段。

[jsFiddle](http://jsfiddle.net/tKVRr/3/)

# iphone - 如何正确初始化Objective C中的子类？

> ID：12628182
> 
> 赞同：2
> 
> 时间：2012-09-27T18:50:13.880
> 
> 标签：iphone, objective-c, ios, uiview, initialization

我有两个 UIView。它们都需要自定义初始化，而且在 initWithFrame: 和 initWithCoder: 中简单地复制初始化代码似乎重复且容易出错。但是，具有像 initMyStuff 这样的标准初始化方法名称会导致子版本被调用两次。我可以通过为每个类赋予一个唯一的初始化名称（如 initStuffForCustomViewParent）来解决此问题，但如果有一种方法可以维护标准的自定义初始化方法名称以使我的代码更具可读性，我更愿意这样做。这是该问题的示例实现：

```
@implementation CustomViewParent
-(id)initWithFrame:(CGRect)aRect
{
    if(self=[super initWithFrame:aRect])
        [self initMyStuff];
    return self;
}

-(id)initWithCoder:(NSCoder *)aDecoder
{
    if(self = [super initWithCoder:aDecoder])
        [self initMyStuff];
    return self;
}

-(void)initMyStuff
{
    // Do stuff (never called)
}
@end

@implementation CustomViewChild
-(id)initWithFrame:(CGRect)aRect
{
    if(self=[super initWithFrame:aRect])
        [self initMyStuff];
    return self;
}

-(id)initWithCoder:(NSCoder *)aDecoder
{
    if(self = [super initWithCoder:aDecoder])
        [self initMyStuff];
    return self;
}

-(void)initMyStuff
{
    // Do stuff (called twice)
}
@end

// SAMPLE
// Calls CustomViewChild's initMyStuff twice and CustomViewParent's initMyStuff never
CustomViewChild *obj = [[CustomViewChild alloc] init]; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T18:55:38.310

`CustomViewChild`不应该打电话`initMyStuff`。只需在父母中调用这个，孩子的`initMyStuff`应该调用`[super initMyStuff]`。

但无论哪种情况，都不要调用它，`initMyStuff`因为这表明它是一种`init`方法，意味着某些行为。将其称为类似`setup`（假设目标是从`initWithFrame`和调用它`initWithCoder:`）。

# windows - 为 64 位设备驱动程序公开 32/64 位 DLL API？

> ID：12628185
> 
> 赞同：1
> 
> 时间：2012-09-27T18:50:30.823
> 
> 标签：windows, dll, 64-bit, driver

我将为 64 位平台（即 Win7）制作一个设备驱动程序，并且我还想在 DLL 中公开设备 API，这些 API 可以分发给编写他们的应用程序的用户。

问题是，我如何为 32 位和 64 位应用程序构建这样的 DLL？这里的问题实际上只有大约 32 位。

我可以只编写 DLL 并在 32 位和 64 位中编译它吗？还是我真的需要一些 IPC 来包装 64 位 dll 以便 32 位应用程序可以间接调用设备驱动程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:54:20.150

32 位和 64 位之间的转换应该在现有的用户内核层进行。您的 DLL 将使用 IOCTL 命令与驱动程序通信，当驱动程序是 64 位时，32 位 DLL 将必须使用 64 位 IOCTL 结构。

无需添加第二个 IPC 层。

# javascript - 从段落内的文本创建新节点

> ID：12628190
> 
> 赞同：2
> 
> 时间：2012-09-27T18:51:04.007
> 
> 标签：javascript, jquery, html

我有一个有很多段落的网站。其中一些有文字和图像：

```
<p>first paragraph</p>
<p>second paragraph</p>
<p>third paragraph</p>
<p>fourth paragraph<img alt="alt" src="src"/></p>
<p>fifth paragraph</p> 
```

我想`<img>`用新段落中的标签对段落进行编号：

```
<p id="1">first paragraph</p>
<p id="2">second paragraph</p>
<p id="3">third paragraph</p>
<p id="4">fourth paragraph</p>
<p id="5"><img alt="alt" src="src"/></p>
<p id="6">fifth paragraph</p> 
```

请注意，如果第 4 段中的文字在图片之后，那么最终的情况应该是：

```
<p id="1">first paragraph</p>
<p id="2">second paragraph</p>
<p id="3">third paragraph</p>
<p id="4"><img alt="alt" src="src"/></p>
<p id="5">fourth paragraph</p>
<p id="6">fifth paragraph</p> 
```

现在我只有这段代码，但它没有将图像添加到单独的段落中：

```
elem.find('p').each(function () {
    id++;
    $(this).attr('id', 'id_' + id);
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T19:03:51.423

一种方法：

```
$('p').each(
    function(i){
        while(this.childNodes.length > 1) {
            var p = document.createElement('p');
            p.appendChild(this.childNodes[1]);
            this.parentNode.insertBefore(p,this.nextSibling);
        }
    });

$('p').attr('data-index',function(i) { return i; });​​​​​​​​​​​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/gq36e/)。

我已经修改了第一块代码以保留 childNodes 的顺序（在[使用上述代码的示例](http://jsfiddle.net/davidThomas/gq36e/2/)中存在缺陷（查看`textNode`后面的第二个`img`，它在错误的位置）：

```
$('p').each(
    function(i){
        while(this.childNodes.length > 1) {
            var p = document.createElement('p');
            p.appendChild(this.lastChild);
            this.parentNode.insertBefore(p,this.nextSibling);
        }
    }); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/gq36e/1/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T19:01:18.603

[这个小提琴](http://jsfiddle.net/LAJzT/2/)怎么样

```
$('p').each(function(index, p) {
    p.find('img').each(function() {
        if (p.text() != '') {
            var newParagraph = $('<p></p>');
            var html = p.html();
            newParagraph.append($(this));

            if (html.substring(0,1) != '<') {
                p.after(newParagraph);
            }
            else {
                p.before(newParagraph);
            }

        }         
    });
});

$('p').each(function(i) {
   $(this).attr('id', i);
}); 
```

# php - 从同一个表中获取每个类别的 4 个最新行

> ID：12628191
> 
> 赞同：1
> 
> 时间：2012-09-27T18:51:08.260
> 
> 标签：php, mysql

在我解释我的问题之前，我将快速回顾一下表结构是如何的：

类型：MySQL 帖子/主题表：

```
 int      int**     UNIX Time     Int        Int
--------------------------------------------------
| id | category | postdate | topic_id | is_topic |
--------------------------------------------------
|  1 |    a     | 12345678 |    1     |     1    |
--------------------------------------------------
|  2 |    a     | 12345678 |    1     |     0    |
--------------------------------------------------
|  3 |    b     | 12345678 |    3     |     1    |
--------------------------------------------------
|  4 |    b     | 12345678 |    3     |     0    |
--------------------------------------------------
|  5 |    c     | 12345678 |    5     |     1    |
--------------------------------------------------
|  6 |    c     | 12345678 |    5     |     0    |
-------------------------------------------------- 
```

**我正在使用字母使表格更易于阅读

我正在尝试检索每个类别的 4 个最新行，并且我可以使用 GROUP BY 从每个类别中获取 1 个最新行，但我不知道如何为每个类别获取多个。

我尝试过这样的事情：

```
SELECT *
FROM posts p
WHERE NOT EXISTS
(
    SELECT *
    FROM posts
    WHERE category = p.category
    LIMIT 4
) 
```

我还尝试使用人们在 SO 上为其他答案提供的其他答案，但我似乎无法使它们符合我的目的。

我在这里完全迷失了，因为当涉及到这些更复杂的查询时，mysql 并不是我的强项。

任何正确方向的帮助或指示将不胜感激！

谢谢！

**更新**：请注意，类别的数量不是静态的，并且会发生变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T19:01:56.123

这样的事情可能会做：

```
select * from
    (select 
         @rank:=CASE WHEN @ranked <> category THEN 1 ELSE @rank+1 END as rank,
         id,
         category,
         postdate,
         topic_id,
         is_topic
         @ranked:=category
     from 
          (select @rank := -1) a, 
          (select @ranked :=- -1) b, 
          (select * from posts order by category, postdate desc) c
    ) ranked_posts
where ranked_posts.rank <= 4 
```

基本上这里发生的是我正在尝试创建其他引擎中存在的“排名”函数（想到 MS SQL）。

查询遍历所有帖子，按类别、发布日期排序，并在每一行添加一个“排名”数字，当类别更改时重置排名。喜欢：

```
rank | category  
1          a     
2          a     
...
100        a     
1          b 
2          b
1          c
2          c
3          c 
```

您在“子查询”中执行此操作以模仿表，然后只需选择排名 <= 4 的行（您需要的行）。如果您需要更多或更少，您可以调整该数字。

要记住的一件事是排序很重要，否则等级会搞砸。类别必须“分组”，因此`ORDER BY category`然后按您的条件排序的组`postdate desc`。

# jquery - 通过点击事件在 div 之间切换

> ID：12628192
> 
> 赞同：0
> 
> 时间：2012-09-27T18:51:09.740
> 
> 标签：jquery

我有这段代码。基本上，我喜欢做的是，当点击 cpu_div 时，我喜欢显示 all_cpu div，当点击 all_cpu div 时，我喜欢显示 cpu_div。这个想法是在 div 之间来回切换：

```
html code:

<div id="cpu_all"> </div>
<div id="cpu_div"></div>

       var serverA = "http://url/cpu.png";
       $("#cpu_div").click(function () {
        var myImage = new Image();
        $(myImage).load(function () {

            $('#all_cpu').show();
            $("#all_cpu").html(myImage);

        }).error(function () {
            $('#all_cpu').hide();
         }).attr('src', serverA)
    });

    $("#all_cpu").click(function () {
        $('#all_cpu').hide();
        $("#cpu_div").show();
    }); 
```

当点击 cpu_div 时，它会调出 all_cpu div 但是当点击 all_cpu div 时，什么也没有发生。任何人都可以插话看看这里有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:56:31.690

```
$("#cpu_div, #all_cpu").on('click', function() {
    $("#cpu_div, #all_cpu").not(this).show();
    $(this).hide();
}); 
```

如果这仍然不起作用，请尝试一下：

```
$(document).on('click', '#cpu_div, #all_cpu', function() {
    $("#cpu_div, #all_cpu").not(this).show();
    $(this).hide();
}); 
```

此外，在我看来，使用本机 onload 函数会是一个更好的主意：

```
$("#cpu_div, #all_cpu").on('click', function() {
    var myImage = new Image();

    myImage.src = 'http://url/cpu.png';
    myImage.onload = function() {
         //do stuff
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T18:55:03.037

正如@Adrian 所建议的那样，如果没有您的 HTML，我们就无法知道正在发生的一切，但听起来您想要`toggle()`这两个 div 的可见性

```
$("#all_cpu,#cpu_div").click(function () {
    $('#all_cpu').toggle();
    $("#cpu_div").toggle();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T19:01:57.293

问题是，您在尝试加载图像后设置了 attr('src') 。将您的代码更改为

```
 $(myImage).attr('src', serverA).load(...) 
```

会解决的。

# linux - 将文本行保存到数组中时出错

> ID：12628200
> 
> 赞同：0
> 
> 时间：2012-09-27T18:51:47.807
> 
> 标签：linux, bash, shell, aix

我正在尝试从 location.txt 中提取目录位置并将其保存到一个数组中，但它看起来并不好。当我执行脚本时，

我得到这个错误

```
 ./test.sh: line 7: location.txt: No such file or directory bina@ajax $ ./test.sh
  ./test.sh: line 5: =/apps/IBM: No such file or directory
  ./test.sh: line 5: =/usr/home: No such file or directory
  ./test.sh: line 11: Unix_Array[0]: command not found

  ./test.sh: line 11: Unix_Array[1]: command not found 
```

这是我的代码

```
 #!/bin/sh

   counter=0
   while read -r line; do
       ${Unix_Array[${counter}]}=$line;
       let counter=counter+1;
   done < location.txt

   for ((i=0 ;counter > i; i++))
   do
       echo $(Unix_Array[$i])
   done 
```

和文本文件 location.txt

```
 /apps/IBM
   /usr/home
   /var/login 
```

有人可以告诉我我做错了什么吗？我可能犯了一个我不知道的愚蠢错误……（我是 UNIX 的新手）

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T19:16:16.070

只需删除您的第一个`${}`，`${Unix_Array[${counter}]}=$line;`因为您只想分配给数组，而不是分配**和**检索其值，您的固定脚本将如下所示：

```
#!/bin/sh

counter=0
while read -r line; do
   Unix_Array[${counter}]=$line;
   let counter=counter+1;
done < location.txt

for ((i=0 ;counter > i; i++))
do
     echo ${Unix_Array[$i]}
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T19:23:41.790

如果您使用的是 bash 4 或更高版本，则可以放弃`while read`循环以支持以下`readarray`命令：

```
readarray Unix_Array < location.txt

for line in "${Unix_Array[@]}"; do
    echo "$line"
done 
```

# android - 为什么我的 Webview 会自行调整大小？

> ID：12628201
> 
> 赞同：0
> 
> 时间：2012-09-27T18:51:49.123
> 
> 标签：android, layout, plugins, webview, settings

我是 android 开发的菜鸟，每当我尝试播放视频时，我的 webview 都会自行调整大小。为了让 webview 播放视频，我必须添加以下代码行：

```
youtube.getSettings().setPluginState(PluginState.ON); 
```

在我的布局中，我的 webview 位于 listview 上方。但是，现在当 webview 播放视频时，它会变成全屏并覆盖 listview。在我添加上面的行之前，这并没有发生。如何阻止我的 webview 自行调整大小？任何帮助是极大的赞赏？

这是我的布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:id="@+id/LLvideos" >

<WebView
        android:id="@+id/webViewyoutube"
        android:layout_width="match_parent"
        android:layout_height="350dp" >
    </WebView>

<!-- List view -->
<ListView
    android:id="@+id/videolist"
    android:layout_width="fill_parent"
    android:layout_height="200dp"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:divider="#00000000"
    android:dividerHeight="0dp" >
</ListView> 
```

这是我的视频链接

```
youtube.loadUrl("http://link.brightcove.com/services/player/bcpid1683318714001?bckey=AQ~~,AAAAC59qSJk~,vyxcsD3OtBPHZ2UIrFX2-wdCLTYNyMNn&bclid=1644543007001&bctid=1858951133001"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T03:51:04.463

听起来你有一个缩放问题。试试 youtube.setInitialScale(50)。这应该有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T19:07:00.353

尝试像这样设置 webview 布局：

```
webview.getSettings().setLayoutAlgorithm(LayoutAlgorithm.SINGLE_COLUMN); 
```

# java - 在 linux (CentOS 5.4) 中运行 jNotify 的问题

> ID：12628203
> 
> 赞同：2
> 
> 时间：2012-09-27T18:51:59.333
> 
> 标签：java, centos5, jnotify

我正在尝试在 centos 5.4（64 位）框中设置 jnotify 以监视目录以进行文件更改。我按照说明将 libjnotify.so 放在 java 库路径中。这是我的条目

```
 java -Xms64m -Xmx2048m -Djava.library.path=. -Dfile.encoding=UTF-8 -jar test-1.1.0.jar 
```

当我尝试执行它时，出现以下异常

```
 Exception in thread "main" java.lang.UnsatisfiedLinkError: /root/testprocessor/libjnotify.so: /lib64/libc.so.6: version `GLIBC_2.12' not found (required by /root/testprocessor/libjnotify.so)
        at java.lang.ClassLoader$NativeLibrary.load(Native Method)
        at java.lang.ClassLoader.loadLibrary0(ClassLoader.java:1778)
        at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1703)
        at java.lang.Runtime.loadLibrary0(Runtime.java:823)
        at java.lang.System.loadLibrary(System.java:1028)
        at net.contentobjects.jnotify.linux.JNotify_linux.(Unknown Source)
        at net.contentobjects.jnotify.linux.JNotifyAdapterLinux.(Unknown Source)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
        at java.lang.Class.newInstance0(Class.java:355)
        at java.lang.Class.newInstance(Class.java:308)
        at net.contentobjects.jnotify.JNotify.(Unknown Source) 
```

该错误肯定指向 CentOS 中缺少库“GLIBC_2.12”。只是想知道是否有人遇到过类似的问题？

对此的任何指针将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T00:58:42.107

好的，在 CentOS 极客的帮助下解决了这个问题。如果有人遇到类似问题，只想分享答案。

1.  您可以将您的 CentOS 版本升级到 6.* 以获得 GCLIB_2.12 及更高版本。

2.  如果您在我的情况下无法选择版本升级，则需要创建一个**libjnotify.so并删除对****GCLIB_2.12**的依赖。通过查看 jNotify 源代码，您需要执行以下操作。

```
 cd ~/compile
mkdir jnotify
cd jnotify
unzip ~/downloads/jnotify-lib-0.94.zip
mkdir src
cd src
unzip ../jnotify-native-linux-0.94-src.zip
cd Release
export C_INCLUDE_PATH=/usr/java/jdk1.7.0_07/include/:/usr/java/jdk1.7.0_07/include/linux/
make 
```

这将生成**libjnotify.so**，将其复制到您的 java 库路径并重新启动 jar 文件。它应该可以解决问题。

# windows-phone-7 - 如何在 Windows Phone 中应用特定主题的样式？

> ID：12628207
> 
> 赞同：0
> 
> 时间：2012-09-27T18:52:17.820
> 
> 标签：windows-phone-7

我正在创建一个 Windows Phone (7.5) 应用程序，我需要根据选择的主题（深色或浅色）更改一些样式。

对于这个应用程序来说，仅仅尝试找到在这两种情况下都适用的颜色是不够的。

其中一些可以在我知道的代码中完成，但我想把它放在 xaml 中，因为这实际上只是我在 C# 代码中不想要的标记/样式:)

这是我想用伪代码做的事情：

```
 <ImageBrush x:Key="BackgroundImageBrush" ApplyForTheme="Dark" Stretch="None" 
ImageSource="/WindowsFanDkApp;component/Content/AppBackground.jpg"/>

    <ImageBrush x:Key="BackgroundImageBrush" ApplyForTheme="Light" Stretch="None" 
ImageSource="/WindowsFanDkApp;component/Content/AnotherAppBackground.jpg"/> 
```

似乎找不到任何关于如何做到这一点的资源......所以恐怕这是不可能的:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T18:46:53.323

正如 Cyber​​maxs 建议的那样，您可以使用 ResourceDictionary / MergedDictionaries。以下是使用 XAML 执行此操作的方法：

```
<Application.Resources>
  <ResourceDictionary>
    <ResourceDictionary.MergedDictionaries>
      <ResourceDictionary Source="TestStyles.xaml"/>
    </ResourceDictionary.MergedDictionaries>
  </ResourceDictionary>
</Application.Resources> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T19:19:26.070

您可以在应用程序的资源中搜索特定键，然后更改图像刷的 uri。

这是提示：

```
var isLightTheme = (Visibility)Application.Current.Resources["PhoneLightThemeVisibility"];
var theBrush = new ImageBrush();
var imageUri = new Uri(isLightTheme == Visibility.Visible ? "bg-light.jpg" : "bg-dark.jpg", UriKind.Relative);
theBrush .ImageSource = new System.Windows.Media.Imaging.BitmapImage(imageUri); 
```

**编辑**：如何在启动时加载样式

```
public App()
{
   ...
    //dynamic load style
    LoadDictionary(); 
   ...     
}

private void LoadDictionary()
{
    var dictionaries = Resources.MergedDictionaries;
    dictionaries.Clear();
    string source = String.Format("/MyProject;component/DarkStyles.xaml");
    var themeStyles = new ResourceDictionary { Source = new Uri(source, UriKind.Relative) };
    dictionaries.Add(themeStyles);
} 
```

# java - 使用 NamedParameterJdbcTemplate 设置批量大小

> ID：12628213
> 
> 赞同：3
> 
> 时间：2012-09-27T18:52:29.303
> 
> 标签：java, spring, jdbc, jdbctemplate

我需要在 Spring jdbc 中使用 NamedParameterJdbcTemplate 执行 1kk+ 行的批量插入。所以我的代码是这样的：

```
public void insert(Collection<Person> entities) {
    SqlParameterSource[] params = SqlParameterSourceUtils.createBatch(entities.toArray());
    namedJdbcTemplate.batchUpdate(insertSql, params);
} 
```

实际上，我对 5 个相关的不同表使用批量插入。所以这里的问题是，如果我为这些表中的一个插入大约 1kk 行，应用程序。尝试多次插入它们，然后给我 OutOfMemoryError。我认为这是因为我没有提供批量大小值（有点像提供的总行集合的一部分行，这些行将在插入后提交），但我不知道如何通过我的 NamedParameterJdbcTemplate 值设置此参数。

或者也许还有其他建议如何完成？

谢谢

更新：我在我的配置中使用 SimpleDataSource 和 DataSourceTransactionManager

更新：我尝试使用 SingleConnectionDataSource 并调用方法 setAutoCommit(false)。然后，在上面的代码中对 100k 行进行批处理更新后，我调用了：

```
try {
            ((JdbcTemplate)  dbTemplate.getJdbcOperations()).getDataSource().getConnection().commit();
        } catch (SQLException e) {

} 
```

它工作得更好，但这对我使用这样的代码不利。也许还有另一个更好的解决方案？对于 1kk 行，它仍然说没有足够的内存来执行批处理更新。

# java - Java 泛型：要求泛型是某种类型的子类

> ID：12628216
> 
> 赞同：6
> 
> 时间：2012-09-27T18:52:35.110
> 
> 标签：java, generics

我有一个抽象的泛型类：

```
public abstract class AbstractMessageHandler<T extends AbstractMessageHandler>
{
    public abstract List<String> getTypesOfMessages();
    public abstract void handleMessage(String message, CometClient client);

    public T setResponseValues(AbstractMessage request, T response )
    {
        response.setCompanyId(request.getCompanyId());
        response.setMessageGroup(request.getMessageGroup());
        response.setUserId(request.getUserId());
        response.setTimeStamp(AbstractMessage.getCurrentTimeStamp());

        return response;
    }
} 
```

我需要通用子类成为此类的子类。换句话说，泛型必须是 AbstractMessageHandler 的子类。然而，这给了我编译问题。谁能让我知道我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-27T19:01:16.497

您需要遵循 Enum 类的示例：

```
public abstract class AbstractMessageHandler<T extends AbstractMessageHandler<T>> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T18:55:08.263

在您的通用定义中，您可以执行`<T extends SomeClass>`

例如：

```
abstract class Processor<T extends String> {
    abstract T process();
} 
```

在你的情况下，它看起来`T`应该扩展一些`Response`类，而不是`AbstractMessageHandler`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T01:29:06.860

从给出的代码来看，似乎没有必要将类设为泛型。使用通用方法怎么样（我什至将其设为静态，因为您似乎根本不需要使用当前对象）：

```
public abstract class AbstractMessageHandler
{
    public static <T extends AbstractMessageHandler> T setResponseValues(AbstractMessage request, T response )
    {
        response.setCompanyId(request.getCompanyId());
        response.setMessageGroup(request.getMessageGroup());
        response.setUserId(request.getUserId());
        response.setTimeStamp(AbstractMessage.getCurrentTimeStamp());

        return response;
    }
} 
```

或者更好的是，只需在 AbstractMessageHandler 上定义一个对当前对象进行操作的方法。那么你就不需要这个静态方法，也没有你总是返回的这个奇怪的参数。

```
public abstract class AbstractMessageHandler
{
    public void setResponseValues(AbstractMessage request)
    {
        setCompanyId(request.getCompanyId());
        setMessageGroup(request.getMessageGroup());
        setUserId(request.getUserId());
        setTimeStamp(AbstractMessage.getCurrentTimeStamp());
    }
} 
```

# activerecord - 有没有办法从 ActiveRecord 回调中访问请求对象，比如 before_destroy？

> ID：12628218
> 
> 赞同：0
> 
> 时间：2012-09-27T18:52:42.750
> 
> 标签：activerecord, ruby-on-rails-3.2

我试图找出谁在尝试删除特定记录。我有一个 before_destroy 回调来防止删除，但现在我试图找出是谁在做这件事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T21:50:27.247

我推荐这个

```
@post.request = request 
```

然后在你的`post.rb`

```
attr_accessor :request

before_destroy :wtf

private
def wtf
  Rails.logger.warn "Person from #{request.ip} is trying to destroy, wtf!"
end 
```

# jquery - drupal 7 阻止 jquery ajax 调用工作

> ID：12628220
> 
> 赞同：1
> 
> 时间：2012-09-27T18:52:51.533
> 
> 标签：jquery, ajax, drupal

我有一些教科书式的简单 jquery 代码，可以进行 ajax 调用并将结果写入网页。它独立工作，但在包含在 drupal 7 站点的页面中时不能。

该代码通过自定义模块包含在内，该模块使用 hook_block_view_alter() 写入页面。这里是：

```
<script type="text/javascript" src="/path/to/jquery.js"></script>
<script>
$(document).ready(function(){
    $("#carrotlink").click(function(event){
        event.preventDefault();
        alert("starting ajax call.");
        $.ajax({
         type: "GET",
         url: 'http://my.datasource.page/',
         data: "parameter=5",
         success: function(data) {
            alert('starting ajax callback');
            result = "The oracle says: " + data;
            jQuery('#ccbuy').fadeOut( function() { jQuery('#ccbuy').html(result); jQuery('#ccbuy').fadeIn(); });
            alert('ajax callback complete');
         }
        });
        alert('ajax call complete');
    });
});
</script> 
```

如果我将其放在常规网页中，会发生以下情况：

1.  我单击 ID 为“carrotlink”的链接。
2.  我收到一个警报“开始 ajax 调用”，然后是“ajax 调用完成”。
3.  片刻之后，我收到警报“开始 ajax 回调”和“ajax 回调完成”。
4.  ID 为“ccbuy”的 div 淡出并随着新内容淡入淡出。

当我将此代码包含在 drupal 页面中时，单击该链接会显示“开始 ajax 调用”和“ajax 调用完成”警报，但我从未收到回调警报，并且 div 从未更改。

我花了几个小时试图调试这个，导致上面的简化案例。显然我的 jquery 正在运行，目标链接正在按预期进行更改，并且当我单击它时会调用预期的函数。ajax 调用只是没有发生。为什么会这样？

PS - 我知道drupal 有它自己的通过ajax 替换文本的方法，还有drupal_add_js()。但是我已经编写了我试图将其用作独立网站的一部分的功能，我宁愿将它们包含在 drupal 页面中，也不愿重新实现所有内容。它似乎离工作很近！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T20:56:50.280

您可能只是缺少行为包装器。尝试将文本包装在行为和行为附加代码中：

```
(function ($) {
  Drupal.behaviors.ajax_example = {
    attach:function (context) {

      // If the site name is present set it to the username.
      if ($('#site-name', context).length) {
        $.ajax({
          url: '/ajax/username',
          success: function(data) {

            // Change site name to current user name.
            $('#site-name a span').html(data + '.com');
         }
        });
      }
    }
  }
})(jQuery); 
```

我为我的公司博客写了一篇关于在 Drupal 6 和 7 中执行 ajax 的完整博客文章，这可能也会有所帮助：[http ://clikfocus.com/blog/simple-ajax-example-drupal-6-and-7](http://clikfocus.com/blog/simple-ajax-example-drupal-6-and-7)

# c# - 在 C# 中创建列表列表

> ID：12628222
> 
> 赞同：60
> 
> 时间：2012-09-27T18:52:56.447
> 
> 标签：c#, .net

我似乎很难理解 C# 中通用列表的通用列表的想法。我认为问题源于对`<T>`论点的使用，我以前没有玩过这个论点。有人可以提供一个简短的例子来声明一个类是一个列表，其中包含另一个列表，但其中包含的对象的类型不是立即知道的吗？

我一直在阅读有关泛型的 MS 文档，但我不确定是否可以声明 a `List<List<T>>`，也不知道如何准确地将`<T>`参数传递给内部列表。

编辑：添加信息

在这里宣布一个`List<List<T>>`被认为是合法的吗？如果您想知道，我正在构建一个允许我使用 a`ulong`作为索引器的类，并且（希望）通过维护一个列表来绕过 .Net 令人讨厌的 2GB 限制。

```
public class DynamicList64<T>
    {
        private List<List<T>> data = new List<List<T>>();

        private ulong capacity = 0;
        private const int maxnumberOfItemsPerList = Int32.MaxValue;

        public DynamicList64()
        {
            data = new List<List<T>>();
        } 
```

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-09-27T18:55:41.443

一个简单的例子：

```
List<List<string>> myList = new List<List<string>>();
myList.Add(new List<string> { "a", "b" });
myList.Add(new List<string> { "c", "d", "e" });
myList.Add(new List<string> { "qwerty", "asdf", "zxcv" });
myList.Add(new List<string> { "a", "b" });

// To iterate over it.
foreach (List<string> subList in myList)
{
    foreach (string item in subList)
    {
        Console.WriteLine(item);
    }
} 
```

那是你要找的吗？或者您是否正在尝试创建一个`class`扩展的新`List<T>`成员，该成员具有“列表”成员？

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-09-27T18:57:02.513

或者这个例子，只是为了让它更明显：

```
public class CustomerListList : List<CustomerList> { }  

public class CustomerList : List<Customer> { }

public class Customer
{
   public int ID { get; set; }
   public string SomethingWithText { get; set; }
} 
```

你可以继续下去。前无古人后无来者 ！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T19:01:58.517

```
public class ListOfLists<T> : List<List<T>>
{
}

var myList = new ListOfLists<string>(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-27T22:47:03.693

我也一直在玩弄这个想法，但我试图实现稍微不同的行为。我的想法是创建一个继承自身的列表，从而创建一个数据结构，该数据结构本质上允许您将列表嵌入列表中的列表中的列表中......无限！

**执行**

```
//InfiniteList<T> is a list of itself...
public class InfiniteList<T> : List<InfiniteList<T>>
{
    //This is necessary to allow your lists to store values (of type T).
    public T Value { set; get; }
} 
```

T 是泛型类型参数。它可以确保您班级的类型安全。创建 InfiniteList 的实例时，将 T 替换为您希望填充列表的类型，或者在此实例中，替换为 Value 属性的类型。

**例子**

```
//The InfiniteList.Value property will be of type string
InfiniteList<string> list = new InfiniteList<string>(); 
```

一个“工作”示例，其中 T 本身就是一个字符串类型的列表！

```
//Create an instance of InfiniteList where T is List<string>
InfiniteList<List<string>> list = new InfiniteList<List<string>>();

//Add a new instance of InfiniteList<List<string>> to "list" instance.
list.Add(new InfiniteList<List<string>>());

//access the first element of "list". Access the Value property, and add a new string to it.
list[0].Value.Add("Hello World"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-06T15:26:33.677

看一个直接的例子：

```
public partial class Form1 : Form
{
    List<List<Label>> txtList;
    List<List<int>> num;
    public Form1()
    {
        InitializeComponent();
        txtList = new List< List<Label> >() { 
            new List<Label> { label1, label2, label3 }, 
            new List<Label> { label4, label5, label6 }, 
            new List<Label> { label7, label8, label9 } 
        };

        num = new List<List<int>>() { new List<int>() { 1, 2 }, new List<int>() { 3, 4 } };
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-29T14:56:15.883

我有以下代码

```
 public class ChildClass
    {
        public string FieldName { get; set; }
        public string Value { get; set; }
        public string StatusClass { get; set; }
        public string StatusMessage { get; set; }
    } 
```

创建list obj的列表如下

```
List<List<ChildClass>> obj = new List<List<ChildClass>>(); 
```

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2015-02-25T16:33:07.993

你不应该在列表中使用嵌套列表。

```
List<List<T>> 
```

是不合法的，即使 T 是已定义的类型。

[https://msdn.microsoft.com/en-us/library/ms182144.aspx](https://msdn.microsoft.com/en-us/library/ms182144.aspx)

# jquery - HTML 输入的自动完成属性不起作用

> ID：12628223
> 
> 赞同：0
> 
> 时间：2012-09-27T18:53:16.747
> 
> 标签：jquery, autocomplete

我有一个带有登录按钮的表单。当我单击登录按钮时，我正在显示一个登录对话框。

这是代码：

```
if (typeof window.loginDialogObj === 'undefined') {
    var registerAddress = jQuery('#registerAddress');
    var forgotURL = jQuery('#forgotURL');
    var formHTML = "<div id='loginDialogDiv'>" +
                "   <div id='loginDialogText'>" + pageDictionaryTranslated.LoginDialogText + "</div>" +
                "   <div class='loginTitle'>Username</div> <input id='username' name='username' type='text'><span id='LoginUsernameValidator' style='display:none' class='asterix'>*</span><br/><br/>" +
                "   <div class='loginTitle'>Password</div> <input id='password' name='password' type='password'><span id='LoginPasswordValidator' style='display:none' class='asterix'>*</span><br/>" +
                "   <input id='password' type='hidden' value='test'><br/>" +
                "   <div class='loginDialogMessageContainer'><div id='loginDialogMessage' style='display:none' class='error-input ui-corner-all'></div><div class='clear'></div></div>" +
                "   <div class='forgot'><a href='" + forgotURL.val() + "'>" + pageDictionaryTranslated.LoginDialogForgotPassword + "</a><br/><a id='RegisterButton' href='" + registerAddress.val() + "'>" + pageDictionaryTranslated.ButtonRegister + "</a><br/></div>" +
                "   <div class='popupButton button buttonLogin' id='loginDialogSubmitButton' style='float:right;'><a onclick=\"javascript:DoLogin(window.loginDialogObj);return false;\" href='javascript:void(0);'>" + pageDictionaryTranslated.LoginDialogButtonLoginText + "</a></div>" +
                "</div>";
    window.loginDialogObj = jQuery(formHTML).dialog({
        title: pageDictionaryTranslated.LoginDialogTitle,
        closeOnEscape: true,
        draggable: false,
        resizable: false,
        dialogClass: 'loginModal modal',
        modal: true
    });
}
else {
    // display dialog and clear all fields
    resetFormFields(window.loginDialogObj).dialog('open');
    jQuery("#loginDialogMessage", window.loginDialogObj).html('');
} 
```

当我单击登录按钮时，我发出 AJAX 请求，然后我重定向到受保护的区域。

问题是用户名和密码文本框无法自动完成，客户来找我这个问题：“目前我们阻止浏览器自动完成，我们的开发人员觉得这很糟糕。我需要启用浏览器自动完成。”

我需要帮助！任何想法出了什么问题？

谢谢指教

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T08:08:55.483

我在 HTML 表单中看不到任何明确关闭自动完成功能的内容。

我想知道如果您将 HTML 放在页面上并在适当的时间使用 JavaScript 显示它，而不是在页面中注入 HTML 字符串，您是否会获得自动完成功能。

**更新**

实际上，问题可能在于没有表单 - 如果您将输入包装在`<form ...>`标签中，浏览器可能更有可能提供记住细节的功能。

我假设您的意思是浏览器不提供记住用户名和密码的功能？

# linux - 更改 shell 并在 shell 脚本中执行命令

> ID：12628225
> 
> 赞同：1
> 
> 时间：2012-09-27T18:53:19.350
> 
> 标签：linux, shell

我面临这样一种情况，我必须从我的脚本中执行一个只读脚本，该脚本会更改 shell 并设置一些环境变量。现在我需要从我的脚本中访问这些环境变量。

情况就像脚本-A

```
#!/bin/csh -f
bash
#set some environment variables A,B,C 
```

我没有对脚本-A 的写访问权，它执行了很多对我的脚本-B 来说是必需的配置。

我已经尝试了脚本-B

```
#!/bin/csh -f
./script-A
echo $A 
```

但是，由于外壳已更改，我无法访问 $A。是否有一些工作可以让我做到这一点。

理想情况下，我的脚本 B 中的命令必须在脚本 A 的新环境中运行。在手动交互时，这很好，因为我可以先执行脚本-A，然后执行所需的命令。但是，我必须自动化整个过程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T22:10:01.680

用与您需要执行的相同的 shell 语言重写您自己的脚本，以便您可以使用 shell 的`source`命令执行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T21:53:18.870

如果 script-A 是一个 csh 脚本，那么

```
source script-A 
```

即使 script-A 包含退出语句​​，这也有效：

```
$ cat x.csh 
#!/bin/csh

source y.csh
echo $A - $B

cat y.csh 
#!/bin/csh

set A=10
set B=20
exit 1
set B=30

$ ./x.csh 
10 - 20 
```

如果 script-A 在另一个 shell 中，则需要重写 script-B 以匹配该 shell

哦，顺便说一句，如果可能的话，[DITCH CSH](http://www.grymoire.com/Unix/CshTop10.txt)：

# c# - 如何展平包含相关类的 IEnumerable 的类

> ID：12628226
> 
> 赞同：2
> 
> 时间：2012-09-27T18:53:23.793
> 
> 标签：c#, linq, lambda

我有以下课程：

```
public class OrgAlertList
{
    public string CustMailName { get; set; }

    /// <summary>
    /// Gets all the alerts that apply to this customer.
    /// </summary>
    public virtual IEnumerable<OrgAlertSummary> Alerts { get; set; }
} 
```

它包含一个属性（名为 Alerts），它是我的第二类的 IEnumerable：

```
public class OrgAlertSummary
{
    /// <summary>
    /// Message detailing the alert for the user.
    /// </summary>
    public string Message { get; set; }

    /// <summary>
    /// Message detailing how to fix alert.
    /// </summary>
    public string ActionMessage { get; set; }
} 
```

OrgAlertList 中的 Alerts 属性可以包含零到多个 OrgAlertSummary 项。

我需要编写一个 Lambda 表达式，或使用 LINQ 查询，将类扁平化为一种新类型，其中包含每个 OrgAlertList 项目的 CustMailName、Message 和 ActionMessage，其中 Alerts 属性至少包含一个 OrgAlertSummary 项目。有人能帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T18:58:23.063

试试这个：（未经测试）

```
var q = from orgAlert in myOrgAlertList
        from orgAlertSummary in orgAlert.Alerts
        select new { orgAlert.CustomMailName, 
                     orgAlertSummary.Message, 
                     orgAlertSummary.ActionMessage}; 
```

假设`myOrgAlertList`是某种`IEnumerable<OrgAlertList>`

此查询将创建一个匿名类型，其中包含名为 CustomMailName、Message 和 ActionMessage 的字段。如果您打算将此结果列表导出到其他模块，建议您定义自己的类并在 select 中创建它，而不是使用匿名类型。

# php - 会话变量到期

> ID：12628228
> 
> 赞同：0
> 
> 时间：2012-09-27T18:53:31.100
> 
> 标签：php, session-variables, session-state, session-timeout, sessionid

我有一个使用临时 MySQL 表来存储购物车内容的购物车应用程序。购物车表的每一行都保存了会话值以唯一标识该行。我正在使用以下设置初始值：

```
$session_id = session_id(); 
```

每次用户将商品添加到他们的购物车时，我都会运行一个查询来计算他们购物车中的产品数量，并使用以下命令保存该值：

```
$_SESSION["total_cart_products"] = $cart_total_products['total_cart_products']; 
```

在网站上，每次加载时都会生成购物车页面，方法是通过传递 $session_id 文件并拉取结果来查询购物车表。我在标题中显示了购物车产品总数，因此用户始终知道他们的购物车中有多少商品。

这一切都很好，除了总购物车产品会话在 $session_id 之前到期。因为即使购物车产品总会话已过期并在标题中显示 0，购物车页面仍然可以工作。

我认为这两个会议会同时结束，但事实并非如此。这一切我错过了什么？

谢谢

布雷特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T14:47:08.890

我从来没有找到我的问题的答案 - 为什么我的会话变量似乎超时但主会话没有。

我切换到使用 cookie 并在成功结帐时删除 cookie。

# jquery - 当我将数据添加到现有页面时，它不会执行任何 jQuery 操作

> ID：12628230
> 
> 赞同：0
> 
> 时间：2012-09-27T18:53:36.983
> 
> 标签：jquery

```
<div id="partition">
    hello
    <input type="button" id="btn" value="submit">
</div> <!-- partitions ends -->

<!-- this posts the data and prepends the return data to partition div -->

<script type="text/javascript">
    $(document).ready(function() {
        $('#button').click(function(){
            var content = $('#content').val();
            var contentType = $('input[id=contentType]:checked').val();

            $.post('classes/updateStatus.php', { content: content, contentType: contentType }, function(data)
            {        
                $('#partition').prepend($('<div id="partition">'+data+'</div>').html(data));
            });
</script>

<script type="text/javascript">
$(document).ready(function() {
    $('#btn').click(function(){      
        alert("hello");
    });
</script> 
```

这个脚本的问题是在将数据添加到分区 div 之后，它没有执行必要的操作。在这种情况下，它不会弹出警告框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T19:10:53.043

在第一个标志 - 你应该关闭你的输入标签

```
<input type="button" id="btn" value="submit"/> 
```

你的 JS 函数没有闭合的大括号

***[JSFIDDLE](http://jsfiddle.net/abaksheyev/9acHx/2/)***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T19:30:24.200

问题是您没有关闭该`$(document).ready();`功能

Java 脚本应该是这样的：

```
$(document).ready(function() {
    $('#button').click(function(){
       var content = $('#content').val();
        var contentType = $('input[id=contentType]:checked').val();

        $.post('classes/updateStatus.php', { content: content, contentType: contentType }, function(data)
        {        
            $('#partition').prepend($('<div id="partition">'+data+'</div>').html(data));
        });                    
    });
});

$(document).ready(function() {
    $('#btn').click(function(){      
    alert("hello");
});
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T19:44:24.843

因此，您可以执行以下操作：

```
$(document).ready(function() {     
$('#btn').live("click", function(){               
alert("hello");     
});
}); 
```

（这是旧版本）

或者

```
$(document).ready(function() {     
$('#btn').on("click", function(){               
alert("hello");     
});
}); 
```

（这是新版本）

希望这可以帮助！！

# gradle - 为什么 gradle Exec 任务不运行我的命令？

> ID：12628235
> 
> 赞同：3
> 
> 时间：2012-09-27T18:53:47.583
> 
> 标签：gradle

我已经阅读了 stackoverflow 和 gradle 表格，但我仍然很难过。这里的最终目标是，在我复制了一些文件之后，我想设置可写标志——因为 'copy' 不喜欢覆盖 'nix 上的只读文件（呵呵...），也不能强制这样做（哼哼！）。

这是我所拥有的大纲：

```
task setPermissions (type : Exec) {
  executable = 'chmod -R +w'
}

// ... a little while later ...

task('somethingElse') << {
  // ... unrelated stuff ...
  def String targetDir = "$aVar/theTarget"

  // >> TASK CALL <<
  setPermissions {
    commandLine = [executable + " $targetDir"]
  }

  // but that doesn't work... this does...
  proc = Runtime.getRuntime().exec("chmod -R +w $deployDir")
  proc.waitFor()

} 
```

我尝试了“setPermissions”的变体。

**试验一：**

```
commandLine = 'chmod'
args = '-R', '+w' 
```

在这种情况下，当我调用 setPermissions 时，我将目标目录附加到“args”。

**试验二：**

```
commandLine = 'chmod -R +w' 
```

在这种情况下，当我调用 setPermissions 时，我将目标目录附加到“commandLine”。我还尝试将其设为唯一的“args”值。

**试验 3：**

```
commandLine = 'chmod', '-R', '+w' 
```

在这种情况下，当我调用 setPermissions 时，我将目标目录附加到“commandLine”。我还尝试将其设为唯一的“args”值。

那么我在这里做错了什么，Exec 任务无法正常运行，但 Rt.gR.exec() 会？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T19:46:43.610

您不能从另一个任务中调用一个任务。您必须使一个依赖于另一个，或者从任务操作中调用[Project.exec](http://gradle.org/docs/current/dsl/org.gradle.api.Project.html#org.gradle.api.Project%3aexec%28groovy.lang.Closure%29) *方法。*配置`exec`方法的语法与任务的语法完全相同`Exec`。

PS：您是否尝试过使用[Copy.fileMode](http://gradle.org/docs/current/dsl/org.gradle.api.tasks.Copy.html#org.gradle.api.tasks.Copy%3afileMode)代替`chmod`？

# c++ - c++ 中的 gui 库作为 Web 客户端

> ID：12628240
> 
> 赞同：0
> 
> 时间：2012-09-27T18:54:00.910
> 
> 标签：c++

我正在尝试为我的 c++ 应用程序创建 web gui，任何人都可以推荐任何好的 C++ 库。我查看了[http://www.webtoolkit.eu/wt](http://www.webtoolkit.eu/wt)。但我不确定这是唯一的解决方案。与python连接是一个很好的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T00:04:57.617

还有许多其他技术更推荐用于 Web 应用程序，例如 php、asp.net、Java EE，其中有很多资源在讨论它们，并且存在许多用于此类技术的库。因此，即使您的后端是 C++，您也可以使用其他技术开发前端，这比尝试使用 C++ 开发更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T07:52:17.090

您也可以使用[http://www.treefrogframework.org/](http://www.treefrogframework.org/)。

如果您的服务器是基于 Windows 的，另一种解决方案是通过 REST 与 Casablanca 公开您的 C++ 应用程序， http: [//msdn.microsoft.com/en-us/devlabs/casablanca](http://msdn.microsoft.com/en-us/devlabs/casablanca)。然后为 UI 提供一个 JavaScript 框架。

否则，我建议使用一种更容易与 C++ 绑定以进行服务器开发的语言，例如 D（然后您可以将[http://vibed.org/](http://vibed.org/)用于 Web 部件）。

使用 Python 将要求您使用 SWIG 之类的东西才能访问代码。这完全取决于您需要从 C++ 端公开多少。

# c# - 无法对“int”类型的变量进行操作，因为“int”不包含“GetEnumerator”的公共定义

> ID：12628243
> 
> 赞同：0
> 
> 时间：2012-09-27T18:54:04.030
> 
> 标签：c#, asp.net, stored-procedures

我正在尝试遍历已由 javascript 填充了 fileID 的隐藏字段。我试过这样：

```
foreach(string exhibit in hidExhibitsIDs.Value.Split(','))
{
    comLinkExhibitToTask.Parameters.AddWithValue("@ExhibitID", exhibit);
} 
```

但我不确定它是否会在 id 中作为字符串传递给数据库。（我的数据库中的属性是 int 所以我猜这就是我的存储过程不起作用的原因。）我正在尝试迭代像这样循环为int：

```
foreach (int exhibit in hidExhibitsIDs.Value)
{
    comLinkExhibitToTask.Parameters.AddWithValue("@ExhibitID", exhibit);
} 
```

我试过做`int.Parse(hidExhibitID's.Value)`等，但它给了我上面的错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T18:56:45.007

您的`foreach`循环不会只是神奇地将逗号分隔的数字列表转换为整数枚举。在`Split()`使用`String`. 但是，您需要使用 . 将每个值转换为整数`Convert.ToInt32()`。

就像是：

```
foreach(string exhibit in hidExhibitsIDs.Value.Split(','))
{
   comLinkExhibitToTask.Parameters.AddWithValue("@ExhibitID", Convert.ToInt32(exhibit));
} 
```

# python - 曝光不足或曝光过度照片的 SimpleCV 颜色校正

> ID：12628244
> 
> 赞同：1
> 
> 时间：2012-09-27T18:54:17.280
> 
> 标签：python, simplecv

想知道是否有人知道如何在 SimpleCV 中执行以下操作。我想对照片进行颜色校正，以便在曝光不足或曝光过度时进行校正。我相信相机通过取平均颜色然后调整颜色以将平均值变为 50% 的灰色来做到这一点。这个简单的方法应该适用于我的场景。

如果有人有一些示例 Python 代码来执行此操作或更复杂的内容，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T19:59:15.580

SimpleCV 内置了一个函数：

```
balanced_img = Image('myphoto.jpg').whiteBalance('GrayWorld') # 'Simple' or 'GrayWorld' 
```

[您可以从SimpleCV docs for whiteBalance](http://simplecv.org/docs/SimpleCV.html#i/SimpleCV.ImageClass.Image/whiteBalance)中的链接中了解白平衡方法

这就是你所描述的 - 将平均值调整为灰度。'Simple' 方法基本上在剪裁一些异常值后将每个通道的颜色范围从 0 扩展到 255。

您还可以使用[applyRGBCurve](http://simplecv.org/docs/SimpleCV.html#i/SimpleCV.ImageClass.Image/applyRGBCurve)等功能进行颜色校正。

# python - 如何使用 python-oauth2 发送 oauth 请求

> ID：12628246
> 
> 赞同：6
> 
> 时间：2012-09-27T18:54:29.993
> 
> 标签：python, oauth

我一直在苦苦思索如何使用 oauth 发送经过身份验证的请求。

我能够获得访问令牌，但不完全确定如何向他们提交请求。我在 twitter 的开发者信息中找到了这个：

[https://dev.twitter.com/docs/auth/oauth/single-user-with-examples#python](https://dev.twitter.com/docs/auth/oauth/single-user-with-examples#python) 其中有一些用于发送授权请求的示例代码：

```
def oauth_req(url, key, secret, http_method="GET", post_body=None,http_headers=None):
    consumer = oauth.Consumer(key=consumerKey, secret=consumerSecret)
    token = oauth.Token(key=tokenKey, secret=tokenSecret)
    client = oauth.Client(consumer, token)
    resp, content = client.request(
        url,
        method=http_method,
        body=post_body,
        headers=http_headers,
        #force_auth_header=True                                                                                                                                                 
        )
    return resp,content

oauth_req('http://openapi.etsy.com/v2/shops/:user/transactions',tokenKey,tokenSecret) 
```

但是，当我包含所有信息时，我收到以下错误：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/tmp/python-22060Umg.py", line 153, in <module>
    transactions = oauth_req('http://openapi.etsy.com/v2/shops/:user/transactions',tokenKey,tokenSecret)
  File "/tmp/python-22060Umg.py", line 76, in oauth_req
    force_auth_header=True
TypeError: request() got an unexpected keyword argument 'force_auth_header' 
```

其中 :user 是实际用户（我已将其从帖子中删除），而 tokenKey/tokenSecret 是访问令牌。

我想也许就像注释掉有问题的行一样简单，但没有这样的运气：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/tmp/python-22060hwm.py", line 153, in <module>
    transactions = oauth_req('http://openapi.etsy.com/v2/shops/:user/transactions',tokenKey,tokenSecret)
  File "/tmp/python-22060hwm.py", line 75, in oauth_req
    headers=http_headers
  File "/usr/lib/python2.7/dist-packages/oauth2/__init__.py", line 662, in request
    req.sign_request(self.method, self.consumer, self.token)
  File "/usr/lib/python2.7/dist-packages/oauth2/__init__.py", line 493, in sign_request
    self['oauth_body_hash'] = base64.b64encode(sha(self.body).digest())
TypeError: must be string or buffer, not None 
```

所以现在，stackoverflow，你是我唯一的希望！有人对如何使用我的访问令牌提交请求有建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-28T14:42:26.573

Twitter 的文档已经过时了——`oauth2`他们链接到的版本是一个 3 年前的分支。`force_auth_header`不再有关键字参数`oauth2.Client.request`

即使在删除有问题的行之后仍然会出现错误的原因是因为您的默认值`post_body`是`None`直接传递给`oauth2.Client.request`. 在实践中你将无法做到这一点。您要么必须要求该参数，选择一个有效的默认值（例如空字符串），要么在传递它之前检查以防止出现此错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-28T14:59:41.320

只是为了扩展 Rafe 的评论......

Python 中的大部分 oAuth 库都严重损坏、过时且不再维护。他们中的大多数甚至没有通过自己的测试，更不用说格式规范了。Twitter 不应该引用任何这些东西，但他们确实这样做了。

`Twython`是一个包装 oAuth 的 Python twitter 客户端 - [https://github.com/ryanmcgrath/twython](https://github.com/ryanmcgrath/twython) - 它通过`requests`和`requests-oauth`包包装 oAuth1 规范 - [http://docs.python-requests.org/en/latest/](http://docs.python-requests.org/en/latest/)，[http： //pypi.python.org/pypi/requests-oauth](http://pypi.python.org/pypi/requests-oauth) - 但 Twitter 的 API 接受这一点。

就 oAuth 2 而言，这个库最近有一些工作试图实现它（最后一次提交是在 2 个月前）——https: [//github.com/idan/oauthlib](https://github.com/idan/oauthlib) 。我自己没试过，昨天才知道。

快速添加 - 即使您使用的是 etsy，如果它们支持 oauth1，您应该能够对 twython 进行逆向工程以使用 etsy 端点。

# sql - SQL 查询一组独特的值

> ID：12628247
> 
> 赞同：0
> 
> 时间：2012-09-27T18:54:36.767
> 
> 标签：sql, sqlite

我有一个包含 ID、时间和文本列的数据库表。ID 不唯一。我正在尝试构建一个查询，上面写着“对于每个不同的 ID，给我时间是 T 之前的最大值的行”。第二部分很容易使用 ORDER BY DESC LIMIT 1 WHERE time < T，但我不知道如何确保我得到所有 ID 的覆盖。

举个例子：

```
ID,time,text
1,10,"hello"
1,20,"world"
2,10,"foo"
3,10,"bar"
4,50,"blah" 
```

如果我用时间 25 搜索，我想要：

```
1,20,"world"
2,10,"foo"
3,10,"bar" 
```

我可以通过搜索 DISTINCT ID 然后对每个 ID 进行搜索来执行多个查询，但我希望有一个更有效的复合查询表单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T18:57:44.097

```
SELECT t.ID, t.time, t.text
    FROM YourTable t
        INNER JOIN (SELECT ID, MAX(time) AS MaxTime
                        FROM YourTable
                        WHERE time < T
                        GROUP BY ID) q
            ON t.ID = q.ID
                AND t.time = q.MaxTime 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T18:58:31.723

您可以使用子查询：

```
select t1.id, t1.time, t1.test
from yourtable t1
inner join 
(
    select id, max(time) MaxTime
    from yourtable
    where time < T
    group by id
) t2
   on t1.id = t2.id
   and t1.time = t2.time 
```

# ios - 在 IOS6 SDK 上编译最新版本的 admob 时不断收到错误消息

> ID：12628249
> 
> 赞同：41
> 
> 时间：2012-09-27T18:54:38.710
> 
> 标签：ios, xcode, admob, ios6

我已经下载了最新版本的 googles admob sdk。但是现在我在使用最新的 sdk 编译 xcode 4.5 时不断收到以下错误。

```
Undefined symbols for architecture i386:
  "_OBJC_CLASS_$_ASIdentifierManager", referenced from:
      objc-class-ref in libGoogleAdMobAds.a(GADIdentifierUtilities.o)
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

知道什么可能是错的吗？

* * *

## 回答 #1

> 赞同：181
> 
> 时间：2012-09-27T19:48:12.493

您可能没有添加 AdSupport.framework。还要记住删除`-all_load`链接器标志。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-22T07:26:17.040

xcode 4.5 和 admob 6.x 中需要 AdSupport.framework

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-08T19:41:52.920

另一方面，您可以在不添加额外框架的情况下修复它，**如果您的项目不需要此标志，请**从“Linking > Other Linker Flags”中删除“-Obj”标志。

我的情况不同，我支持 GoogleConvertionTracking.lib 但在几个发布客户决定从客户端删除 GoogleConvertionTracking.lib 之后。从客户端删除所有必需的代码后，我开始收到 **“_OBJC_CLASS_$_ASIdentifierManager”的错误，引用自：”**

通过 GoogleConvertionTracking 的支持文档后，我发现我在“链接”>“其他链接器标志”下添加了“-Obj”编译器标志。

***通过从 rel/deb 的“Linking > Other Linker Flags”中删除这个“-Obj”标志，这个错误就消失了。

**我不必添加 AddSupport.framework 来摆脱这个错误**。此更改可能对那些不想添加额外框架以避免编译错误的人有所帮助。

# java - 带有泛型的 Java 工厂模式

> ID：12628251
> 
> 赞同：23
> 
> 时间：2012-09-27T18:54:40.443
> 
> 标签：java, generics, inheritance

我希望我`BallUserInterfaceFactory`返回一个具有正确泛型类型的用户界面实例。我在下面的示例中遇到错误：

> 绑定不匹配：BallUserInterfaceFactory 类型的通用方法 getBaseballUserInterface(BASEBALL) 不适用于参数 (BALL)。推断的类型 BALL 不是有界参数的有效替代品

```
public class BallUserInterfaceFactory {
    public static <BALL extends Ball> BallUserInterface<BALL> getUserInterface(BALL ball) {

        if(ball instanceof Baseball){
            return getBaseballUserInterface(ball);
        }
        //Other ball types go here

        //Unable to create a UI for ball
        return null;
    }

    private static <BASEBALL extends Baseball> BaseballUserInterface<BASEBALL> getBaseballUserInterface(BASEBALL ball){
        return new BaseballUserInterface<BASEBALL>(ball);
    }
} 
```

我知道它不能保证 BALL 是棒球，因此在 getBaseballUserInterface 方法调用上存在参数类型不匹配。

如果我在 getBaseballUserInterface 方法调用中转换球参数，则会收到错误消息：

> 类型不匹配：无法转换`BaseballUserInterface<Baseball>` 为`BallUserInterface<BALL>`

因为它不能保证我返回的是同一种类型的BALL。

**我的问题是，处理这种情况的策略是什么？**

（为了完整起见，这里是示例中所需的其他类）

```
public class Ball {

}

public class Baseball extends Ball {

}

public class BallUserInterface <BALL extends Ball> {

    private BALL ball;

    public BallUserInterface(BALL ball){
        this.ball = ball;
    }
}

public class BaseballUserInterface<BASEBALL extends Baseball> extends BallUserInterface<BASEBALL>{

    public BaseballUserInterface(BASEBALL ball) {
        super(ball);
    }

} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-27T21:47:07.123

这是错误的设计模式。与其使用一种通用方法和一个 if 阶梯，不如使用重载。重载消除了对 if 阶梯的需要，编译器可以确保调用正确的方法，而不必等到运行时。

例如。

```
public class BallUserInterfaceFactory {

    public static BallUserInterface<Baseball> getUserInterface(
            Baseball ball) {
        return new BallUserInterface<Baseball>(ball);
    }

    public static BallUserInterface<Football> getUserInterface(
            Football ball) {
        return new BallUserInterface<Football>(ball);
    }
} 
```

这样，如果您的代码无法`BallUserInterface`为适当的球创建一个，您还可以获得编译时错误的额外好处。

* * *

为了避免 if 阶梯，您可以使用一种称为双重调度的技术。本质上，我们使用实例知道它属于哪个类并为我们调用适当的工厂方法这一事实。为此，`Ball`需要有一个返回适当`BallInterface`.

您可以使方法抽象或提供引发异常或返回 null 的默认实现。Ball 和 Baseball 现在应该看起来像：

```
public abstract class Ball<T extends Ball<T>> {
    abstract BallUserInterface<T> getBallUserInterface();
} 
```

.

```
public class Baseball extends Ball<Baseball> {
    @Override
    BallUserInterface<Baseball> getBallUserInterface() {
        return BallUserInterfaceFactory.getUserInterface(this);
    }
} 
```

为了使事情更整洁，最好将`getBallUserInterface`包设为私有并在`BallUserInterfaceFactory`. 然后，工厂可以管理额外的检查，例如 null 和任何抛出的异常。例如。

```
public class BallUserInterfaceFactory { 
    public static BallUserInterface<Baseball> getUserInterface(
            Baseball ball) {
        return new BallUserInterface<Baseball>(ball);
    }   
    public static <T extends Ball<T>> BallUserInterface<T> getUserInterface(
            T ball) {
        return ball.getBallUserInterface();
    }
} 
```

### 访客模式

正如评论中所指出的，上述的一个问题是它要求`Ball`类了解 UI，这是非常不可取的。但是，您可以使用访问者模式，这使您能够使用双重调度，但也可以将各种`Ball`类和 UI 解耦。

首先，必要的访问者类和工厂函数：

```
public interface Visitor<T> {
    public T visit(Baseball ball);
    public T visit(Football ball);
}

public class BallUserInterfaceVisitor implements Visitor<BallUserInterface<? extends Ball>> {
    @Override
    public BallUserInterface<Baseball> visit(Baseball ball) {
        // Since we now know the ball type, we can call the appropriate factory function
        return BallUserInterfaceFactory.getUserInterface(ball);
    }   
    @Override
    public BallUserInterface<Football> visit(Football ball) {
        return BallUserInterfaceFactory.getUserInterface(ball);
    }
}

public class BallUserInterfaceFactory {
    public static BallUserInterface<? extends Ball> getUserInterface(Ball ball) {
        return ball.accept(new BallUserInterfaceVisitor());
    }
    // other factory functions for when concrete ball type is known
} 
```

您会注意到访问者和工厂函数必须使用通配符。这是类型安全所必需的。由于您不知道传递的是什么类型的球，因此该方法无法确定返回的是什么 UI（除了它是一个球 UI）。

其次，您需要`accept`在`Ball`接受`Visitor`. 访问者模式的每个具体实现也`Ball`必须实现此方法才能正常工作。实现看起来完全一样，但是类型系统确保了适当方法的分派。

```
public interface Ball {
    public <T> T accept(Visitor<T> visitor);
}

public class Baseball implements Ball {
    @Override
    public <T> T accept(Visitor<T> visitor) {
        return visitor.visit(this);
    }
} 
```

最后，一些可以将所有这些放在一起的代码：

```
Ball baseball = new Baseball();
Ball football = new Football();

List<BallUserInterface<? extends Ball>> uiList = new ArrayList<>();

uiList.add(BallUserInterfaceFactory.getUserInterface(baseball));
uiList.add(BallUserInterfaceFactory.getUserInterface(football));

for (BallUserInterface<? extends Ball> ui : uiList) {
    System.out.println(ui);
}

// Outputs:
// ui.BaseballUserInterface@37e247e2
// ui.FootballUserInterface@1f2f0ce9 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T20:55:23.377

这个问题问得好。

你可以粗暴地施放

```
 return (BallUserInterface<BALL>)getBaseballUserInterface((Baseball)ball); 
```

答案在理论上是有缺陷的，因为我们强制`BASEBALL=Baseball`.

它由于擦除而起作用。实际上，这*取决于*擦除。

我希望有一个更好的答案，即*具体化安全*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T07:41:11.857

```
public class BaseballUserInterface extends BallUserInterface<Baseball> {

    public BaseballUserInterface(Baseball ball) {
        super(ball);
    }
} 
```

您正在使用 BallUserInterface 作为工厂方法的结果。因此，可以隐藏使用哪个混凝土球：

```
public class BallUserInterfaceFactory {

public static BallUserInterface<?> getUserInterface(Ball ball) {

        if(ball instanceof Baseball){
            return getBaseballUserInterface((Baseball)ball);
        }

        return null;
    }

    private static BaseballUserInterface getBaseballUserInterface(Baseball ball){
        return new BaseballUserInterface(ball);
    }
} 
```

如果客户对球的类型感兴趣，您应该提供一个以混凝土球作为参数的工厂方法：

```
public static BaseballUserInterface getUserInterface(Baseball ball){
    return new BaseballUserInterface(ball);
} 
```

# datetime - 在 Crystal 中，如何将自 2012 年 1 月 1 日以来的毫秒转换为日期？

> ID：12628252
> 
> 赞同：0
> 
> 时间：2012-09-27T18:54:40.670
> 
> 标签：datetime, crystal-reports, crystal-reports-2008

在 Crystal Reports 2008 中，如何将自 2012 年 1 月 1 日以来的毫秒数转换为日期变量？

谢谢你的帮助，威尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T19:02:51.457

一天有 86400000 毫秒。所以，

```
local numbervar days := ceiling({table.ms} / 86400000);
dateadd("d",days,#01/01/2012#); 
```

# continuous-integration - Jenkins分布式构建配置

> ID：12628254
> 
> 赞同：1
> 
> 时间：2012-09-27T18:54:54.253
> 
> 标签：continuous-integration, jenkins

我正在尝试以 4 种不同的配置构建软件项目：Windows 7 机器上的 32 位调试、32 位发布、64 位调试、64 位调试。我们的设置当前涉及主节点（0 个执行者）和 2 个从节点，每个从节点有 2 个执行者。一个奴隶是 Mac，另一个是 Windows 机器——我目前只是试图在 Windows 上构建。

我的配置矩阵是这样设置的：

*   第一个轴：用户定义的轴，名称：架构，值：32 位、64 位
*   2nd Axis: Slaves, Name: OS, 我选择了代表Windows机器的节点
*   第三轴：用户定义的轴，名称：BuildType，值：调试，发布

矩阵...

```
+----------------------+-------+--------+
| Configuration Matrix | 32bit | 64-bit |
+----------------------+-------+--------+
| Debug                |   X   |    X   |
+----------------------+-------+--------+
| Release              |   X   |    X   |
+----------------------+-------+--------+ 
```

它能够成功地将来自 Git 的源代码检出到工作区中的所有 4 个构建文件夹中。但是，在定义构建步骤时，我会迷路。我选择“执行 Windows 批处理命令”。这就是我迷路的地方......我在框中指定什么，以便它知道要根据 4 个构建中的哪个构建来调用哪个批处理文件？

我认为它与 Jenkins 的环境变量有关，但我设想这样做：

```
if (Windows Slave Machine)
{
    if (Architecture == 32bit)
    {
        if (BuildType == debug)
        {
            //Call win_32bit_debug.bat
        }
        else
        {
            //Call win_32bit_release.bat
        }
    }
    else
    {
        if (BuildType == debug)
        {
            //Call win_64bit_debug.bat
        }
        else
        {
            //Call win_64bit_release.bat
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T12:44:20.567

您不必在“执行 Windows 批处理命令”中编写此日志 if 语句。只需尝试使用您已经定义的变量：

```
win_%Architecture%_%BuildType%.bat 
```

# java - Android 单例线程安全

> ID：12628255
> 
> 赞同：1
> 
> 时间：2012-09-27T18:54:58.447
> 
> 标签：java, android, thread-safety, singleton

我有一个线程、单例、android 问题。

因此，假设我们有以下单例代码。

```
public class Singleton {
    private Singleton instance;
    private int number1 = 0;

    private Singleton() {
        //lots of initialization code
    }

    public static synchronized Singleton getInstance() {
        if(instance == null) {
            instance = new Singleton();
        }
        return instance;
    }
} 
```

我的问题。对 number1 的访问是线程安全的，还是我需要创建一个带有锁定机制的访问器？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T18:58:05.937

使对象成为单例对影响线程安全没有任何影响。如果您要在多个线程中使用单例，则需要根据需要管理数据同步。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T19:02:58.183

您的代码不会编译，因为`instance`它不是静态的。声明应为：

```
private static Singleton instance; 
```

除此之外，您已经建立了一个很好的机制来确保您的应用程序只有一个`Singleton`.

但是，这样做不会`number1`以任何方式保护您的成员变量。如果您从多个线程访问该成员变量，您仍然需要正确同步事物。

# python - PYTHON - 随机选择

> ID：12628256
> 
> 赞同：0
> 
> 时间：2012-09-27T18:55:01.133
> 
> 标签：python, login, random, choice

我已经建立了一个游戏，我需要使用`random.choice`：

当用户登录时，他们需要进入随机选择的 15 个房间之一。如何修改以下代码以用于`random.choice`选择房间？

```
#login
self.enterRoom("1") 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T18:58:21.447

不使用`random.choice`，
使用`random.randint`：

```
import random
room = random.randint(1,15) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T19:04:38.977

您几乎肯定不想为此使用`random.choice`；Caner Korkmaz 的回答要好得多。

但是如果出于某种原因您确实需要使用`random.choice`（例如，因为这是家庭作业并且您的教授坚持），请参阅[文档](http://docs.python.org/library/random.html)：

> 随机选择（序列）
> 
> 从非空序列 seq 返回一个随机元素。如果 seq 为空，则引发 IndexError。

所以，你需要得到一个包含字符串“1”到“15”的序列。要做到这一点：

```
rooms = [str(i) for i in range(1, 16)] 
```

然后：

```
room = random.choice(rooms) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-28T04:07:28.833

有多种方法可以解决这个问题。只需选择最适合您的情况并且您认为最易读的那个。

当符合条件的选择的数量已经在列表中时， *random.choice()方法效果很好：*

```
>>> rooms = ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12', '13', '14', '15']
>>> random.choice(rooms)
'7' 
```

*random.randrange()*函数在选择是数字且连续时起作用（尽管之后您仍然必须调用*str*）：

```
>>> str(random.randrange(1, 16))
'2' 
```

对于计算机科学的观点，最后一个是最优雅的；然而，就在游戏中清楚地表达代码的意图而言，第一个获胜者会说“随机选择可用房间”。

# windows-runtime - WinRT 中 Path.GetFullPath 的任何替代品？

> ID：12628257
> 
> 赞同：1
> 
> 时间：2012-09-27T18:55:02.963
> 
> 标签：windows-runtime, windows-store-apps, winrt-xaml

在 Windows Store Apps 的 .NET API 中，Path 类没有 GetFullPath 方法。不过，我需要规范化路径，这很容易使用 GetFullPath。有谁知道标准化路径的另一种方法或外部代码？我的意思是例如：

*   如果路径不以驱动器开头，则添加应用程序的路径
*   正确处理 ..\ 和 .\

GetFullPath 相当复杂，模仿功能并不容易。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T06:42:41.593

据我了解，在 WinRT 中，您更愿意使用软件包的安装位置或“已知”文件夹：

1.  Windows.ApplicationModel.Package.Current.InstalledLocation.GetFileAsync(fileName)

2.  KnownFolders.DocumentsLibrary.GetFileAsync(fileName)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T10:52:20.857

我没有找到 GetFullPath 的任何替代品，但开发了一种处理父目录标记 (..\) 的方法，例如 GetFullPath。

这里是：

```
public static string NormalizePath(string path)
{
   if (String.IsNullOrEmpty(path) == false)
   {
      // Correct multiple backslashes
      path = Regex.Replace(path, @"\\+", @"\");

      // Correct parent directory tokens with too many points in it
      path = Regex.Replace(path, @"\\\.\.+", @"\..");

      // Split the path into tokens
      List<string> resultingPathTokens = new List<string>();
      var pathTokens = path.Split('\\');

      // Iterate through the tokens to process parent directory tokens
      foreach (var pathToken in pathTokens)
      {
         if (pathToken == "..")
         {
            if (resultingPathTokens.Count > 1)
            {
               resultingPathTokens.RemoveAt(resultingPathTokens.Count - 1);
            }
         }
         else
         {
            resultingPathTokens.Add(pathToken);
         }
      }

      // Get the resulting path
      string resultingPath = String.Join("\\", resultingPathTokens);

      // Check if the path contains only two chars with a colon as the second
      if (resultingPath.Length == 2 && resultingPath[1] == ':')
      {
         // Add a backslash in this case
         resultingPath += "\\";
      }

      return resultingPath;
   }
   return path;
} 
```

# actionscript-3 - AS3，Flash - 去标签的功能？

> ID：12628272
> 
> 赞同：1
> 
> 时间：2012-09-27T18:55:29.797
> 
> 标签：actionscript-3, flash

我正在考虑制作一个可以调用并将发送到被调用标签的函数..

好吧，我目前对所有按钮都这样做：

```
myButtonSomething.addEventListener(Event, GoToLabelSomething);

function GoToLabelSomething (e:Event):void{
   this.gotoAndStop("Something");
} 
```

不可能这样做吗.. 就像在 PHP 中一样：

```
GoToLabel("something");

function GoToLabel($label) {
  // gotoAndStop($label); or something....
} 
```

我希望我说得通：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T20:33:45.487

您是否正在寻找这样的东西：

```
var labelName:String = "something";
myButtonSomething.addEventListener(Event, function(e:Event){
    GoToLabel(labelName);
});

function GoToLabel (name:String):void{
   this.gotoAndStop(name);
} 
```

# java - 一条线如何用作 Swing 按钮？

> ID：12628277
> 
> 赞同：0
> 
> 时间：2012-09-27T18:55:57.760
> 
> 标签：java, swing, repaint, paintcomponent, mouse-listeners

我正在创建线条和其他组件，并希望它们像 Swing 按钮事件一样响应，因为线条是可点击的：

```
 class CustomLine extends JComponent {

        private int destx = 100;
        private int desty = 100;
        private int startx = 0;
        private int starty = 0;

        public void paintComponent(Graphics g) {
            super.paintComponent(g);
            g.drawLine(startx, starty, destx, desty);
        }

    } 
```

这是如何工作的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T19:05:53.203

从 JButton 扩展它怎么样？只需像使用 JComponent 一样覆盖paint-Method 并像普通按钮一样使用它。我不确定，如果你也需要改变边界。我不熟悉更改 GUI 元素，但也许这应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T19:01:35.827

这将是一道数学题。您需要找到线的方程，然后找到与点的距离（鼠标单击）。
数学已为您完成，例如[这里](http://mathworld.wolfram.com/Point-LineDistance2-Dimensional.html)

您还需要弄清楚如何处理鼠标[事件](http://docs.oracle.com/javase/6/docs/api/java/awt/Component.html#addMouseListener%28java.awt.event.MouseListener%29)。

# scheduled-tasks - 如何使用 Windows 任务调度程序执行 cscript？

> ID：12628278
> 
> 赞同：4
> 
> 时间：2012-09-27T18:56:01.507
> 
> 标签：scheduled-tasks, batch-file, wsh

问题：当我双击 .bat 文件时，它按预期执行。当我在 Windows 任务计划程序中安排它时，它会执行，但具有 cscript 的行除外。

.bat 文件的内容：

```
@echo off
cls

cscript CSV_To_Excel.vbs c:\tableaudata\test.csv c:\tableaudata\test.xlsx
echo.file converted >>log.txt 
```

让我失望的是 log.txt 的创建表明 .bat 文件正在执行。但是没有创建 .xlsx。但是，在手动双击 .bat 时，会创建 log.txt 和 test.xlsx。

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T16:52:10.387

**解决！！**在 Windows 任务计划程序中，我必须单击“更改用户或组”按钮并添加“管理员”组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T00:56:21.143

为了帮助调试这种情况，请将以下内容添加到 cscript 命令行的末尾：

```
>>c:\MyCScriptOutput.txt 2>&1 
```

然后，检查 c:\MyCScriptOutput.txt 文件中是否有任何错误消息。如果是这样，请将此信息（命令行和输出）添加到您的问题中。

我在推测，但问题可能是 cscript 正在尝试交互运行并且无法以交互方式运行，因此您可以尝试将命令行中的“cscript”替换为“cscript //Nologo //B”，看看是否可以解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-05T11:09:47.207

主要问题是您没有从 c:\windows\system32 （schtasks.exe 所在的位置）指定 CSV_To_Excel.vbs 调度程序执行脚本的完整路径因此，您对 cscript 的批处理调用应该是

 `````
cscript %~dp0\CSV_To_Excel.vbs c:\tableaudata\test.csv c:\tableaudata\test.xlsx
echo.file converted >> %~dp0\log.txt 
`````

# mysql - SQL查询找出乱序记录

> ID：12628282
> 
> 赞同：3
> 
> 时间：2012-09-27T18:56:17.200
> 
> 标签：mysql, sql, select, sequence

我有一个包含许多记录的带有 MySQL 数据库的 PHP 程序。特别相关的两列是事件编号和日期。这两者都只会向前发展。然而，有时用户输入的数据是乱序的；例如：

```
Incident Date
1        Jan 1 2000
2        Jan 1 2010
3        Jan 1 2002 
```

看来事件 2 输入的日期错误，应该是 2001 年 1 月 1 日。

有没有办法查询日期乱序的记录？或者我是否必须遍历所有跟踪最后日期的记录才能找到错误？

补充说明：事件不是连续的（它们可能是 1、3、6、123 等）。日期也不是连续的。这些是同一张表中的列。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T18:58:38.870

此命令选择同一表中存在事件编号较低但日期较高的记录的任何记录。

```
 SELECT * FROM TableName T1 WHERE EXISTS 
   (SELECT * FROM TableName T2 
      WHERE T2.Incident < T1.Incident AND T2.Date > T1.Date) 
```

这个稍微复杂一点的命令将只查找“双向”中无序的记录，这意味着它们在文件中较早有一个较晚日期的记录，而在文件后面有一个较早日期的记录。这避免了在文件中很早的记录中出现错误会使所有后续记录出现乱序的情况。但是，它不会在事件数最低或最高的两条记录中发现问题。

```
 SELECT * FROM TableName T1 WHERE EXISTS 
   (SELECT * FROM TableName T2 
      WHERE T2.Incident < T1.Incident AND T2.Date > T1.Date)
 AND EXISTS
   (SELECT * FROM TableName T2 
      WHERE T2.Incident > T1.Incident AND T2.Date < T1.Date) 
```

最后，正如 ruakh 在评论中指出的那样，上面的查询为您提供了所有乱序记录。尽管从技术上讲，您想要的是很难在日期链中找到“破损点”。以下查询将只为您提供链混乱的记录，不需要 IncidentID 单调增加，并允许删除事件。

```
 SELECT * FROM TableName T1 WHERE 
    Date < (SELECT Date FROM TableName T2 WHERE T2.IncidentID = 
   (SELECT MAX(IncidentID) FROM TableName T3 WHERE T3.IncidentID < T1.IncidentID))
 OR Date > (SELECT Date FROM TableName T2 WHERE T2.IncidentID = 
   (SELECT MAX(IncidentID) FROM TableName T3 WHERE T3.IncidentID > T1.IncidentID)) 
```

（未测试，因为我手边没有 MySQL 的副本）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T18:58:14.857

```
select * from yourtable t1
     inner join yourtable t2
     on t1.incident=t2.incident-1
     and t1.date>t2.date 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T18:58:33.433

这将选择日期大于下一个记录日期的所有 id。这应该告诉你哪些是不正常的。

```
SELECT Incident FROM table a 
    WHERE a.Date > (SELECT b.Date FROM table b WHERE b.Incident = (a.Incident + 1)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T19:18:58.783

如果 IncidentID 列始终处于常规增量序列中：

```
SELECT c.IncidentID AS cincID, p.IncidentID AS pincID, 
c.Date AS cDate, p.Date AS pDate,
DATEDIFF(c.Date, p.Date)
FROM Incident c, Incident p
WHERE c.IncidentID = (p.IncidentID + 1)
AND datediff(c.Date, p.Date) < 1 
```

# html - 带有 html 表格的可滚动 div

> ID：12628284
> 
> 赞同：0
> 
> 时间：2012-09-27T18:56:21.833
> 
> 标签：html, css

我在带有滚动条的 div 中有一个表格。

表格中有一些列定义了宽度。直到那时表头都很好。

但是当我向网格添加更多列时，标题测试会被包装，这是我不想要的，而是我想要水平滚动。

正常：http: [//jsfiddle.net/hVRW7/](http://jsfiddle.net/hVRW7/)

更多专栏：http: [//jsfiddle.net/hVRW7/1/](http://jsfiddle.net/hVRW7/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T19:06:03.683

最快的解决方法是将`<th>`标签包装在跨度中，然后给它们固定宽度：

```
<table>
    <thead>
        <tr>
            <th><span>Label1</span></th>
            <th><span>Label2</span></th>            
        </tr>
    </thead>
</table> 
```

然后样式为：

```
th span
{

    display:inline-block;
    width:300px; /* or what you wish */

} 
```

编辑[见 fiddle](http://jsfiddle.net/hVRW7/7/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T19:15:19.767

您的问题是您已将表格宽度的限制定义为 1024 像素，然后您定义了总宽度为 1430 像素的新列。然后所有浏览器都尽力使信息适合定义的 1024px 宽度。由于在您给定的示例中，您只是重复定义相同的列集，您确定需要所有列吗？如果不是，您应该将它们缩小到仅需要的范围，然后确定您的实际总宽度。在确定表格的最大宽度时，整个表格的定义宽度将优先于单个宽度。

# vector - 在clojure中替换向量中第n个元素的简单方法？

> ID：12628286
> 
> 赞同：53
> 
> 时间：2012-09-27T18:56:24.580
> 
> 标签：vector, clojure

例如，我有一个向量`[1, 2, 3]`，我想更新第二个元素，使向量变为`[1, 5, 3]`。在其他语言中，我只会做类似的事情`array[1] = 5`，但我不知道有什么可以让我在 Clojure 中轻松地做到这一点。

关于如何实现这一点的想法，或者我是否应该使用不同的数据结构？

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-09-27T19:10:12.457

`assoc`工作正常。它采用索引来放置新值并返回新创建的向量：

```
Clojure> (assoc [1 2 3] 1 5)
[1 5 3] 
```

* * *

## 回答 #2

> 赞同：-8
> 
> 时间：2014-08-08T16:55:13.080

Yve 的回答没有显示如何更新原始向量。

确实如此，但作为 Clojure 新手，我不确定这是不是最好的方法：

```
main=> (def ar [1 2 3])
#'main/ar
main=> ar
[1 2 3]
main=> (def ar (assoc ar 1 5))
#'main/ar
main=> ar
[1 5 3] 
```

# extjs - Sencha SDK Tools v3 beta 升级我的 v2.0.1 Sencha-Touch 应用程序失败

> ID：12628290
> 
> 赞同：2
> 
> 时间：2012-09-27T18:56:38.407
> 
> 标签：extjs, sencha-touch-2

我一直在努力使用新的 Sencha SDK Tools v3 Beta（是的，我知道，beta），以便我可以优化我的 sencha-touch 项目，但进展并不顺利。

我的目标是将我的项目优化合并到我们的持续集成构建中——在构建过程中运行下面的优化代码：

`sencha app build -e testing`

我已经在我的 Mac OS X 机器上运行它，并且正在让它在 Unix 构建服务器上运行（通过 Jenkins）。但是，由于我的应用程序版本 sencha-touch v2.0.1 和 Sencha Cmd v3.0.0.141 之间的版本不兼容，它失败了。

我的应用程序很小，我想，好吧，我会按照他们方便的说明使用 Sencha Cmd v3.0.0.141 升级我的 v2.0.1 应用程序。根据文档，我需要做的就是：

```
cd [my sencha-touch app dir]
sencha upgrade /path/to/the/latest/sencha-touch/sdk 
```

升级过程*确实*做了一些事情，请参见下面的输出，但我的应用程序现在已损坏，因为它找不到依赖项：

```
GET http://localhost:8080/product-selector/event/publisher/Dom.js?_dc=1348770723554 404 (Not Found) sencha-touch.js:7986
GET http://localhost:8080/product-selector/event/Dispatcher.js?_dc=1348770723544 404 (Not Found) sencha-touch.js:7986
Uncaught Error: [Ext.Loader] Failed loading './event/publisher/Dom.js', please verify that the file exists sencha-touch.js:8328
Uncaught Error: [Ext.Loader] Failed loading './event/Dispatcher.js', please verify that the file exists sencha-touch.js:8328 
```

有人知道那个答案吗？404 文件 Dom.js 和 Dispatcher.js 位于升级过程中创建的“touch”目录中。这里奇怪的是代码没有在里面查找，它只是在查看根目录。我检查了 app.json 文件以查看是否有任何需要更正以将其指向“触摸”目录的内容，但没有找到任何内容。这是升级命令的输出：

```
~/work/product-selector/web-app (feature/upgrade ✔) ᐅ sencha app upgrade ~/frameworks/sencha/sencha-touch
Sencha Cmd v3.0.0.141
[INFO ]     init-properties:
[INFO ]     init-antcontrib:
[INFO ]     init-sencha-command:
[INFO ]     init:
[INFO ]     -before-app-upgrade:
[INFO ]     app-upgrade-impl:
[INFO ]     building application
[INFO ]          [move] Moving 1342 files to /Volumes/Magnetic/Users/x/work/product-selector/web-app/./.sencha_backup/2.0.1.1/sdk
[INFO ]     Renamed /Volumes/Magnetic/Users/x/work/product-selector/web-app/./sdk to /Volumes/Magnetic/Users/x/work/product-selector/web-app/./.sencha_backup/2.0.1.1 for backup
[INFO ]          [copy] Copying 5 files to /Volumes/Magnetic/Users/x/work/product-selector/web-app/./.sencha_backup/2.0.1.1
[INFO ]     Creating new application structure
[INFO ]     init-properties:
[INFO ]     init-antcontrib:
[INFO ]     init-sencha-command:
[INFO ]     init:
[INFO ]     -before-generate-workspace:
[INFO ]     generate-workspace-impl:
[INFO ]     -before-copy-framework-to-workspace:
[INFO ]     copy-framework-to-workspace-impl:
[INFO ]          [copy] Copying 1150 files to /Volumes/Magnetic/Users/x/work/product-selector/web-app/touch
[INFO ]          [copy] Copied 187 empty directories to 1 empty directory under /Volumes/Magnetic/Users/x/work/product-selector/web-app/touch
[INFO ]          [copy] Copying 1 file to /Volumes/Magnetic/Users/x/work/product-selector/web-app/touch
[INFO ]          [copy] Copying 1 file to /Volumes/Magnetic/Users/x/work/product-selector/web-app/touch
[INFO ]     -after-copy-framework-to-workspace:
[INFO ]     copy-framework-to-workspace:
[INFO ]     -after-generate-workspace:
[INFO ]     generate-workspace:
[INFO ]     init-properties:
[INFO ]     init-antcontrib:
[INFO ]     init-sencha-command:
[INFO ]     init:
[INFO ]     -before-generate-app:
[INFO ]     generate-app-impl:
[INFO ]     Generating new packager.json file using native packager
[INFO ]     copy-sdk:
[INFO ]     -after-generate-app:
[INFO ]     generate-app:
[INFO ]     Updating references to framework files
[INFO ]     -after-app-upgrade:
[INFO ]     app-upgrade: 
```

最后一点：升级过程不是我的主要目标，记住我只想在我的构建服务器上自动优化我的构建。我尝试在我的 Unix 构建服务器上安装旧版本的 SDK，但它甚至没有与我的 Apple 笔记本电脑上相同版本的相同命令。所以，我的第二个问题是：

无论如何我可以在我的 sencha touch 2 应用程序中自动进行资源优化吗？例如，这是通过 jenkins 实现的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T03:38:17.277

看起来您使用的是“Sencha Cmd v3 Beta”，而不是“Sencha SDKTools v2.0 beta 3”，是的，有区别。

SDK工具：[http](http://www.sencha.com/products/sdk-tools/download/) ://www.sencha.com/products/sdk-tools/download/ Sencha CMD：[http](http://www.sencha.com/forum/showthread.php?243153-Sencha-Cmd-V3-Beta) ://www.sencha.com/forum/showthread.php?243153-Sencha-Cmd-V3-Beta (最新链接）

我认为 Cmd 可能还不能完全兼容 Sencha Touch，它更适合 ExtJS 和 Architect。我认为 Cmd 应该取代 SDKTools .... 为什么它们同时处于测试阶段，为什么它们的名称不同，以及为什么它们更改名称对我来说是一个巨大的愚蠢之谜。

当您在终端中键入“sencha”时，您应该会得到类似 v2.0 beta 3 的“Sencha Command v2.0.2”和 v3.0 beta 的“Sencha Cmd v3.0”之类的内容。

# iphone - 在iOS6上dismissModalViewControllerAnimated崩溃

> ID：12628294
> 
> 赞同：0
> 
> 时间：2012-09-27T18:56:45.650
> 
> 标签：iphone, ios, cocoa-touch, uiviewcontroller, ios6

我在 iOS 6.0 上面临崩溃。我有一个视图控制器，从中我以模态方式呈现导航视图控制器，然后从导航堆栈中以模态方式呈现另一个视图控制器，最后为了关闭整个模态堆栈，我将以下消息传递给我的第一个视图控制器，从那里显示导航控制器。

现在这在 6.0 以下的 iOS 上运行良好。我该如何处理？

[自我dismissModalViewControllerAnimated：是]；

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T12:30:28.950

我也遇到了类似的崩溃，其中一件事帮助我解决了它是添加：

vc.modalPresentationStyle = UIModalPresentationCurrentContext;

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T19:00:18.760

编辑：假设您向 appDelegate 添加了一个名为 'makeMeNumberOne:(UIViewController *)vc' 的方法：（我知道您使用的是 'modal' 版本，它们在 iOS6 中已被弃用，请切换到 'presented' 变体）。另外我假设您可以找到导航控制器，如果这是一个问题添加评论，我将进一步扩展它，并假设您使用的是 ARC。）

*   您拥有的参数是一个强引用，它保存当前呈现的 viewController，我们称之为 pvc

*   向 navigationController 询问它的 viewControllers，然后得到最后一个

*   作为调试工具，验证这个 vc 有一个非 nil 的presentedViewController 属性

*   消息上面的最后一个视图控制器：

    [lastOne dismissViewControllerAnimated:NO 完成：^{ [navigationController.viewControllers = @[pvc]; }];

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-27T19:44:24.230

可能是因为在 iOS6 中不推荐使用dismissModalViewController？尝试

```
[self dismissViewControllerAnimated:YES completion:nil]; 
```

# installation - 使用 AllowGrayed 的 Inno 设置

> ID：12628299
> 
> 赞同：2
> 
> 时间：2012-09-27T18:56:56.310
> 
> 标签：installation, inno-setup, pascal

我正在尝试将 AllowGrayed 设置为 False，根据 Inno Setup 站点，这似乎应该如何完成，但编译时我不断收到“Unknown Identifier ''ALLOWGRAYED'”错误。我敢肯定，我忽略了一些简单的事情。

```
CompCheckListBox := TNewCheckListBox.Create(CompPage);
CompCheckListBox.Top := StaticText.Top + StaticText.Height + ScaleY(8);
CompCheckListBox.Width := CompPage.SurfaceWidth;
CompCheckListBox.Height := ScaleY(180);
CompCheckListBox.Flat := True;
CompCheckListBox.AllowGrayed := False;
CompCheckListBox.Parent := CompPage.Surface;
CompCheckListBox.AddCheckBox('Option1', '', 0, False, True, False, True, nil);
CompCheckListBox.AddCheckBox('Option2', '', 0, False, True, True, True, nil);
CompCheckListBox.AddCheckBox('Option3', '', 1, False, True, False, False, nil); 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T22:53:44.400

[`TNewCheckListBox`](http://www.jrsoftware.org/ishelp/index.php?topic=scriptclasses)没有`AllowGrayed`属性，所以你发现的是一个文档错误。但是，我想说，您滥用了该方法的`ACheckWhenParentChecked`参数。`AddCheckBox`该参数仅针对子项设置为 True，而不针对父项。因此，尝试以这种方式修改您的脚本：

```
...
CompCheckListBox.AddCheckBox('Option 1', '', 0, False, False, False, True, nil);
CompCheckListBox.AddCheckBox('Option 2', '', 0, False, True, True, False, nil);
CompCheckListBox.AddCheckBox('Option 3', '', 1, False, True, False, True, nil);
CompCheckListBox.AddCheckBox('Option 4', '', 1, False, True, False, True, nil);
... 
```

这是参考中的方法原型：

```
function AddCheckBox(const ACaption, ASubItem: String; ALevel: Byte; AChecked,
  AEnabled, AHasInternalChildren, ACheckWhenParentChecked: Boolean; 
  AObject: TObject): Integer; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T10:20:17.600

这个怎么样（标准组件的语法；如果你愿意，你可以很容易地适应基于代码的页面）：

```
[Components]
Name: parent; Description: ...
Name: parent\main; Description: ...; Flags: fixed
Name: parent\optional; Description ... 
```

仅将文件和其他条目与两个子组件相关联——没有与父组件相关联。理论上，您现在应该有一个设置，如果没有主要组件，就不可能选择可选组件，并且两者看起来是独立的，但实际上是某个更大系统的一部分（当可选组件不是时，它只是部分安装）已安装，但这不会影响主要组件本身）。

# java - 该类型的方法未定义

> ID：12628301
> 
> 赞同：0
> 
> 时间：2012-09-27T18:56:57.543
> 
> 标签：java

我目前正在尝试实现一款名为 500 的纸牌游戏。

在这里，我试图将每种可能的出价类型编入一个简单的索引号。我已经为另一个班级的西装创建了枚举。我现在遇到的问题是我不断收到错误

“方法 Bid(int, Card.Suit) 未为 Bid 类型定义”。

我不明白为什么会这样。任何帮助，将不胜感激。

```
public Bid(int pTricks, Suit pSuit)
{
    assert pTricks >= 6;
    assert pTricks <= 10;
    this.trickCount = pTricks;
    this.trumpSuit = pSuit;
}

public Bid(int pIndex)
{

    switch (pIndex) {
    case 0: Bid(6, Suit.SPADES);
    case 1: Bid(6, Suit.CLUBS);
    case 2: Bid(6, Suit.DIAMONDS);
    case 3: Bid(6, Suit.HEARTS);
    case 4: Bid(6, null);
    case 5: Bid(7, Suit.SPADES);
    case 6: Bid(7, Suit.CLUBS);
    case 7: Bid(7, Suit.DIAMONDS);
    case 8: Bid(7, Suit.HEARTS);
    case 9: Bid(7, null);
    case 10: Bid(8, Suit.SPADES);
    case 11: Bid(8, Suit.CLUBS);
    case 12: Bid(8, Suit.DIAMONDS);
    case 13: Bid(8, Suit.HEARTS);
    case 14: Bid(8, null);
    case 15: Bid(9, Suit.SPADES);
    case 16: Bid(9, Suit.CLUBS);
    case 17: Bid(9, Suit.DIAMONDS);
    case 18: Bid(9, Suit.HEARTS);
    case 19: Bid(9, null);
    case 20: Bid(10, Suit.SPADES);
    case 21: Bid(10, Suit.CLUBS);
    case 22: Bid(10, Suit.DIAMONDS);
    case 23: Bid(10, Suit.HEARTS);
    case 24: Bid(10, null);

    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T18:59:22.113

您想使用`this`关键字来调用另一个构造函数。

例如

```
case 24: this(10, Suit.HEARTS); break; 
```

另外，请确保`break;`在每个案例结束时都有。

编辑：这不起作用，如下面的评论所示。将此逻辑移动到您从构造函数调用的私有方法中，或使用静态工厂方法替换第二个构造函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T19:19:26.253

使用静态初始化器：

```
public static Bid create(int pIndex) {
    switch (pIndex) {
    case 0: return Bid(6, Suit.SPADES);
    case 1: return Bid(6, Suit.CLUBS);
    ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T19:36:46.537

1.  “Bid 类型的方法 Bid(int, Card.Suit) 未定义” 没错！没有具有该签名的方法 - Bid(int, Card.Suit) 是一个**构造函数**。（我可以说，因为访问修饰符和名称之间缺少返回类型或关键字*void ）*

2.  要从另一个构造函数调用构造函数，请使用关键字**this**而不是类名。并且对另一个构造函数（或超级构造函数）的调用必须是第一条语句，因此您编写的开关将不起作用。

3\. 您可能希望使用静态初始化程序来创建投标地图，例如（未经测试）：

```
private static Map<Integer, Bid> bids = new HashMap<Integer, Bid>();

{
    bids.put(0, new Bid(6, Suit.SPADES));
    // ...
} 
```

然后访问地图：

```
public Bid getBidByIndex(int pIndex) {
    return bids.get(pIndex);
} 
```

# sql - JET SQL：在每个表的不同列上连接两个表，我必须使用字符串操作来实现相同的比较格式

> ID：12628304
> 
> 赞同：0
> 
> 时间：2012-09-27T18:57:15.403
> 
> 标签：sql, database

```
TABLE dbo_R5PERSONNEL
column PER_DESC
Do, John 
Jones, Jacky

TABLE dbo_R5USERS
column USR_DESC
John Do
Jack Jones 
```

问：如何连接这两个表以从表 dbo_R5USERS 中获取表 dbo_R5PERSONNEL 的列 PER_DESC 中的所有 USR_DESC。

我使用字符串操作来大写和提取每个表中的姓氏

```
SELECT UCASE(MID(TRIM(dbo_R5USERS.USR_DESC),  INSTR(TRIM(dbo_R5USERS.USR_DESC), ' ') + 1, LEN(TRIM(dbo_R5USERS.USR_DESC)) - INSTR(TRIM(dbo_R5USERS.USR_DESC), ' '))) AS LastName
FROM dbo_R5USERS
WHERE dbo_R5USERS.USR_ACTIVE = '+'
ORDER BY dbo_R5USERS.USR_DESC;

SELECT UCASE(MID(TRIM(dbo_R5PERSONNEL.PER_DESC),1,INSTR(TRIM(dbo_R5PERSONNEL.PER_DESC),',')-1)) AS LastName
FROM dbo_R5PERSONNEL
WHERE dbo_R5PERSONNEL.PER_NOTUSED='+'
ORDER BY dbo_R5PERSONNEL.PER_DESC; 
```

我将如何在这两个子查询中加入 JOIN？还有其他方法可以达到我想要的结果吗？

提前致谢！

更新1：

```
SELECT R.LastName
    , P.LastName FROM 
(
    SELECT UCASE(MID(TRIM(dbo_R5USERS.USR_DESC)
        , INSTR(TRIM(dbo_R5USERS.USR_DESC), ' ') + 1, LEN(TRIM(dbo_R5USERS.USR_DESC)) - INSTR(TRIM(dbo_R5USERS.USR_DESC), ' '))) AS LastName 
    FROM dbo_R5USERS 
    WHERE dbo_R5USERS.USR_ACTIVE = '+'
) R 
INNER JOIN 
( 
    SELECT UCASE(MID(TRIM(dbo_R5PERSONNEL.PER_DESC),1,INSTR(TRIM(dbo_R5PERSONNEL.PER_DESC),‌​',')-1)) AS LastName 
    FROM dbo_R5PERSONNEL 
    WHERE dbo_R5PERSONNEL.PER_NOTUSED='+'
) P 
    ON R.LastName = P.LastName 
```

# google-chrome - 为什么实际显示的颜色与检查器中的十六进制颜色不同（在 Chrome 中）？

> ID：12628307
> 
> 赞同：5
> 
> 时间：2012-09-27T18:57:27.850
> 
> 标签：google-chrome, colors, inspector

有时 Chrome 会在页面的其余部分呈现时使用不正确的颜色在一两秒内绘制特定的 div。然后颜色（非常明显）变为正确的值。

如果我足够早地停止加载（按 Esc），我可以得到不正确的颜色，但检查器对其十六进制值撒谎，而是显示来自 css 的（正确的）十六进制颜色。System ColorPicker 显示实际值。源中的任何地方似乎都没有引用此颜色。

这是在 OS X 上的 Chrome 22.0.1229.79 beta 中，带有外接显示器（不清楚是否可以在没有外接显示器的情况下重现）。我知道与第 3 方显示器相关的配置文件会显着影响颜色表示，但十六进制值应该保持不变，不是吗？

![错误的颜色](../Images/1cc94cce71920f6efff5af820e6bfebf.png)

# core-data - iOS Simulator 6.0 使用自定义排序描述符崩溃

> ID：12628309
> 
> 赞同：1
> 
> 时间：2012-09-27T18:57:33.727
> 
> 标签：core-data, ios6, nssortdescriptor

t创建主从应用程序项目后，我在 MasterViewController.m 中替换了以下代码行，

```
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"timeStamp" ascending:NO]; 
```

和

```
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc]
            initWithKey:@"timeStamp"
              ascending:YES
             comparator:^NSComparisonResult (id obj1, id obj2)
             {
                return NSOrderedSame;
             }]; 
```

这是我对 Apple 代码模板所做的唯一更改。当我在 Simulator 6.0 上运行它时，代码在获取数据时崩溃......

```
if (![self.fetchedResultsController performFetch:&error]) { 
```

使用 objc_exception_throw。顺便说一句，此代码适用于 Simulator 5.1。知道有什么问题吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T19:31:32.933

基于 Objective-C 的排序描述符不能用于获取请求。

来自“核心数据编程指南”：

> ...总而言之，如果您直接执行 fetch，则通常不应将基于 Objective-C 的谓词或排序描述符添加到 fetch 请求中。相反，您应该将这些应用于获取的结果。

顺便说一句，您真的想要一个使所有对象相等的排序描述符吗？

# .net - 两个被同一个对象锁定的 SyncLocked 代码块可以同时执行吗？

> ID：12628311
> 
> 赞同：1
> 
> 时间：2012-09-27T18:57:42.910
> 
> 标签：.net, multithreading, synchronization

我只是想确保我正确理解 SyncLock。鉴于以下代码，是否可以肯定地说这些块中的任何一个都不会同时执行？或者可以肯定地说在执行任何这些块期间不会执行其他代码？我无法理解 SyncLock 究竟做了什么以及为什么它需要一个随机对象来锁定？

```
Dim PADLOCK As Object = New Object() 
```

A座：

```
SyncLock PADLOCK
   '...Code
End SyncLock 
```

B座：

```
SyncLock PADLOCK
   '...Code
End SyncLock 
```

C块：

```
SyncLock PADLOCK
   '...Code
End SyncLock 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T19:01:04.127

不是完全。

首先，锁是可重入的，所以如果一个方法调用另一个方法（或递归调用同一个方法），你可以让**同一个线程**同时使用这两个方法。

其次，如果 "...Code" 包含一个`Monitor.Wait`-*放弃*锁定；在这种情况下，您可以在方法中有两个线程，但**只有一个线程处于活动状态**。调用阻塞，`Wait`直到等待线程可以重新获得锁——所以它仍然是最多一个线程“拥有”锁的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T19:02:06.840

并不真地。**同一块内**的代码不会被不同的线程同时执行。当进程到达 SyncLock 结束时，CLR 释放锁。

为什么你需要一个“随机”对象（如你所说）需要更多解释和更深入地了解 CLR 对象是如何构造、在内存中布局和管理的。

如果很快，您应该始终在锁定语句中使用引用类型，并且该对象必须是非公共的以防止死锁。同样，在简短的回答中很难解释所有这些，我会推荐 Jeffrey Richter 的书“CLR via .Net”——他对这个和其他 .Net 基础主题进行了深入探讨。

# java - Android Keytool 问题

> ID：12628313
> 
> 赞同：0
> 
> 时间：2012-09-27T18:57:50.167
> 
> 标签：java, android, keytool

当我想用 google maps api 的 keytool 获取 md5 时，我有同样的错误

我的错误：

非法错误：bulal2m

我的代码：

C:\Program Files\Java\jre7\bin>keytool -list -alias arabamı bulalım -keystore "c:\key.keystore"

我的别名：arabamı bulalım

我的密钥库文件：key.keystore

我认为有关“ı”字符和空格的错误，但我不知道如何解决

谢谢

# haskell - Monad 在从 Lift 移植到 Yesod 的 Persistent 时遇到了麻烦

> ID：12628314
> 
> 赞同：2
> 
> 时间：2012-09-27T18:57:51.630
> 
> 标签：haskell, monads, persistent, yesod

我有一个 Lift 应用程序，我将其移植到 Yesod，作为学习框架和 Haskell 的一种方式。应用程序的一部分仅驻留在 TCP 和数据库层：解析来自套接字连接的传入字节并将它们转换为更新以供模型处理。我在 Scala 中使用正则表达式和模式匹配进行了此操作，但未能在 Haskell 中重现它。

一个高度简化的例子：

```
share [mkPersist sqlSettings, mkMigrate "migrateAll"] [persist|
Person
    name String
    deriving Show

UnknownMessage
    text String
    deriving Show
|]

parseMsg m = runDB $ do
    case ms of
        ["add",name]       -> insert Person{personName = name}
        ["delete",name]    -> deleteWhere [PersonName ==. name]
        ["change",from,to] -> updateWhere [PersonName ==. from] [PersonName =.to]
        _                  -> insert UnknownMessage{unknownMessageText = m}
where
    ms = splitRegex (mkRegex ",") m 
```

上面的代码只会在四个模式匹配中的三个被注释掉的情况下编译。"insert Person" 不能与 "deleteWhere" 一起玩，甚至不能与 "insert UnknownMessage" 一起玩。结果往往是类型匹配的错误消息，我经常无法做出正面或反面。

我该如何重写上面的代码？是否有针对任何地方受到单子挑战的持久指南？本书章节没有详细介绍如何链接查询等。

编辑：hammar 建议在插入中添加 (>>) 解决了这个问题。如果我删除“runDB $ do”，函数的类型变为“parseMsg :: PersistQuery backend m => String -> backend m ()”。这是否允许我稍后在 monad 中执行返回的查询，就像我在 Scala 中处理我的更新一样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T19:11:43.590

我不是 Yesod 专家，但从快速查看文档看来，问题在于该`insert`操作返回新记录的键，而`updateWhere`两者`deleteWhere`都返回`()`。

```
insert      :: (...) => val -> backend m (Key backend val)
updateWhere :: (...) => [Filter val] -> [Update val] -> backend m ()
deleteWhere :: (...) => [Filter val] -> backend m () 
```

大概，你不关心这里的密钥，所以你可以通过做丢弃它

```
insert Person{personName = name} >> return () 
```

这应该使其类型检查。

# java - 将 ECIES ECP CryptoPP 转换为 JAVA

> ID：12628315
> 
> 赞同：1
> 
> 时间：2012-09-27T18:57:58.070
> 
> 标签：java, bouncycastle, jce, elliptic-curve, crypto++

我有一个 202 字节的密钥，用于解密二进制文件。

```
StringSource keyStr( key, Z3_KEY_LENGTH, true );
AutoSeededRandomPool rng;
ECIES<ECP>::Decryptor ellipticalEnc( keyStr );
unsigned char *tmpBuffer( new unsigned char[ src.Size() ] );
DecodingResult dr = ellipticalEnc.Decrypt( rng, src.Data(), src.Size(), tmpBuffer ); 
```

我尝试为此使用 jsafejce：

```
PKCS8EncodedKeySpec privKeySpec = new PKCS8EncodedKeySpec(key);
KeyFactory factory = KeyFactory.getInstance("EC", "JsafeJCE");
PrivateKey privateKey = factory.generatePrivate(privKeySpec);
Cipher eciesDecrypter = Cipher.getInstance("ECIES/SHA1/HMACSHA1", "JsafeJCE"); 
```

和

```
Cipher eciesDecrypter = Cipher.getInstance("ECIESwithXOR/SHA1/HMACSHA1", "JsafeJCE"); 
```

但是第一个我得到一个块错误，必须除以 16，第二个我得到一个 mac 检查错误。

有没有人有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-02T08:46:56.130

好吧，我真的不知道您要在代码中做什么。我会试着回答一些问题。

* * *

> 将 ECIES ECP CryptoPP 转换为 JAVA

要从 Crypto++ 中获得意义，它的难度如下：

```
// Assuming your key was DER Encoded
byte key[Z3_KEY_LENGTH] = ...;

ECIES<ECP>::Decryptor decryptor;
decryptor.BERDecodePublicKey(ArraySource(key, sizeof(key)).Ref(), false, sizeof(key));

const ECPPoint& point = decryptor.GetPublicElement();
const Integer& x = point.x;
const Integer& y = point.y; 
```

如果您的密钥不是 DER 编码，请参阅Crypto++ wiki 中的[密钥和格式](http://www.cryptopp.com/wiki/Keys_and_Formats)。您还有关于[Elliptic Curve Integrated Encryption Scheme](http://www.cryptopp.com/wiki/Elliptic_Curve_Integrated_Encryption_Scheme)的 wiki 页面。

Java 7 提供了[ECPoint 类](http://docs.oracle.com/javase/7/docs/api/java/security/spec/ECPoint.html)，它采用 X 和 Y 坐标。

* * *

```
> ECIES<ECP>::Decryptor ellipticalEnc( keyStr );
> unsigned char *tmpBuffer( new unsigned char[ src.Size() ] );
> DecodingResult dr = ellipticalEnc.Decrypt( rng, src.Data(), src.Size(), tmpBuffer ); 
```

这看起来不太正确，但是您没有显示足够的代码。

```
size_t maxLength = decryptor.MaxPlaintextLength( src.Size() );
unsigned char *tmpBuffer = new unsigned char[ maxLength ];

DecodingResult dr = ellipticalEnc.Decrypt( rng, src.Data(), src.Size(), tmpBuffer );
if( !result.isValidCoding )
    throw runtime_error("failed to decrypt cipher text");

unsigned char *buffer = new unsigned char[ result.messageLength ];
std::cpy(tmpBuffer, buffer, result.messageLength); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T20:54:46.360

您是否尝试在密钥末尾添加一些空字节，使其长度为 208 字节？这可能会解决您的块大小错误。

# ormlite-servicestack - 使用 ServiceStack OrmLite 执行存储过程时，不存在从对象类型 X 到已知托管提供程序本机类型错误的映射？

> ID：12628325
> 
> 赞同：1
> 
> 时间：2012-09-27T18:58:39.173
> 
> 标签：ormlite-servicestack

这是代码：

```
 using (var con = GetWriteConnection())
            {
                int res = con.Exec(cmd =>
                {
                    cmd.CommandType = CommandType.StoredProcedure;
                    cmd.Parameters.Add(new SqlParameter("@Title",Title));
                    cmd.CommandText = "AddTitle";
                    return int.Parse(cmd.ExecuteScalar().ToString());
                });
                return res;
            } 
```

没有标题表。这是复杂的对象。它被 ServiceStack.OrmLite 序列化为 string(nvarchar(MAX))。如何使用 ServiceStack 的序列化器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T07:02:23.607

```
var str=OrmLiteConfig.DialectProvider.GetQuotedValue(Title, typeof(Title));

str=str.SubString(1,str.Length-2); // (Clearing Quotes) 
```

**UPDATE** `Title.ToJsv()` does not work. Because there is "_type" in string.

# bash - 如何在同一行显示和更新回声

> ID：12628327
> 
> 赞同：144
> 
> 时间：2012-09-27T18:58:49.107
> 
> 标签：bash

我在 Bash 中有以下内容（在 Linux 中）

```
for dir in Movies/*
do
  (cd "$dir" && pwd|cut -d \/ -f5|tr -s '\n' ', ' >> ../../movielist &&
  exiftool * -t -s3 -ImageSize -FileType|tr -s '\t' ',' >> ../../movielist )
echo "Movie $movies - $dir ADDED!"
let movies=movies+1
done 
```

但我希望这样做，以便“回声”在下一行显示以下回声（不与最后一个回声输出连接，而是替换它），使其看起来像是在更新。类似于在同一行显示百分比的进度条。

* * *

## 回答 #1

> 赞同：243
> 
> 时间：2012-09-27T19:10:14.490

好吧，我没有正确阅读此`man echo`页面。

如果我添加了第三个转义字符， echo 有 2 个选项可以做到这一点。

2 个选项是`-n`和`-e`。

`-n`不会输出尾随的换行符。这样一来，每次我回显某些内容时，我就不用换行了。

`-e`将允许我解释反斜杠转义符号。

猜猜我想用什么转义符号：`\r`. 是的，回车会让我回到开头，看起来我在同一行进行更新。

所以回声线看起来像这样：

`echo -ne "Movie $movies - $dir ADDED!"\\r`

我必须逃脱转义符号，这样 Bash 就不会杀死它。这就是为什么您会`\`在其中看到 2 个符号的原因。

正如威廉所说，`printf`也可以像这样完成类似（甚至更广泛）的任务。

* * *

## 回答 #2

> 赞同：71
> 
> 时间：2012-09-27T19:11:57.320

如果我理解得很好，您可以用以下行替换您的回声：

```
echo -ne "Movie $movies - $dir ADDED! \033[0K\r" 
```

这是一个小示例，您可以运行它来了解其行为：

```
#!/bin/bash
for pc in $(seq 1 100); do
    echo -ne "$pc%\033[0K\r"
    sleep 1
done
echo 
```

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2016-12-16T19:40:34.317

其余的答案都很好，但只是想添加一些额外的信息，以防有人来这里寻找替换/更新多行回声的解决方案。

所以我想和大家分享一个例子。以下脚本在 CentOS 系统上尝试过，并使用“timedatectl”命令，该命令基本上打印系统的一些详细时间信息。

我决定使用该命令，因为它的输出包含多行，并且非常适合以下示例：

```
#!/bin/bash
while true; do
  COMMAND=$(timedatectl) #Save command result in a var.
  echo "$COMMAND" #Print command result, including new lines.

  sleep 3 #Keep above's output on screen during 3 seconds before clearing it

  #Following code clears previously printed lines
  LINES=$(echo "$COMMAND" | wc -l) #Calculate number of lines for the output previously printed
  for (( i=1; i <= $(($LINES)); i++ ));do #For each line printed as a result of "timedatectl"
    tput cuu1 #Move cursor up by one line
    tput el #Clear the line
  done

done 
```

以上将`timedatectl`永远打印“”的结果，并将用更新的结果替换以前的回显。

我不得不提到，这段代码只是一个示例，但根据您的需要，可能不是最适合您的解决方案。执行几乎相同（至少在视觉上）的类似命令是“ `watch -n 3 timedatectl`”。

但这是一个不同的故事。:)

希望有帮助！

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2020-12-29T18:22:08.763

我使用 printf，它更短，因为它不需要标志来完成工作：

```
printf "\rMy static $myvars composed text" 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-02-17T12:50:32.990

这很有用，请尝试并根据需要进行更改。

```
#!/bin/bash
for load in $(seq 1 100); do
    echo -ne "$load % downloded ...\r"
    sleep 1
done
echo "100"
echo "Loaded ..." 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2019-01-11T09:58:05.680

你可以试试这个..我自己的版本..

```
funcc() {
while true ; do 
for i in \| \/ \- \\ \| \/ \- \\; do 
  echo -n -e "\r$1  $i  "
sleep 0.5
done  
#echo -e "\r                                                                                      "
[ -f /tmp/print-stat ] && break 2
done
}

funcc "Checking Kubectl" & &>/dev/null
sleep 5
touch /tmp/print-stat
echo -e "\rPrint Success                  " 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-01-16T17:49:58.927

我最喜欢的方法叫做 do the sleep to 50。这里的`i`变量需要在 echo 语句中使用。

```
for i in $(seq 1 50); do
  echo -ne "$i%\033[0K\r"
  sleep 50
done
echo "ended" 
```

# android - 多点触控 android 编程中使用的库和函数列表

> ID：12628328
> 
> 赞同：2
> 
> 时间：2012-09-27T18:58:58.757
> 
> 标签：android, multi-touch

我在计算机工程的最后一年。今年我的项目是开发一个android应用程序，描述如下：1.用户使用6个手指首先在屏幕上留下印象，标记为2.然后标记区域并编号3.用户下一个time 在之前标记的任何区域同时放置 2-3 个手指，根据他放置手指的区域进行一些计算。4.根据这个计算，屏幕上显示一个字符

它基本上是一种多点触控键盘，由用户动态定位在第一位置，并根据按下的点，选择一个字符

盲文实际上是关于....

我还没有开始......我在 c/c++ java 方面非常出色，甚至在大学阶段赢得了比赛，但不知道如何在需要多个输入的 android 中编写基本应用程序..

请给 sm 建议或帮助重新考虑这个...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T19:18:10.250

您将需要查看手势和多点触控。

您可以在此处找到有关 Android 手势的更多信息 [http://developer.android.com/reference/android/gesture/package-summary.html](http://developer.android.com/reference/android/gesture/package-summary.html)

可能有一些你可以使用的库，比如 android-multitouch-controller 这里 [http://code.google.com/p/android-multitouch-controller/](http://code.google.com/p/android-multitouch-controller/)

# perl - Mojolicious websocket中的访问会话

> ID：12628331
> 
> 赞同：1
> 
> 时间：2012-09-27T18:59:03.177
> 
> 标签：perl, websocket, mojolicious

有没有办法像这样访问`session`Mojolicious::Lite 中的 websocket 请求？

```
get '/' => sub {
  my $self = shift;
  $self->session->{foo} = 'bar';
  $self->render('index');
};

websocket '/ws' => sub {
  my $self = shift;
  $self->on(message =>
    sub {
      my ($self, $msg) = @_;
      my $foo = $self->session->{foo}; # <<<<< is actually empty
    }
  );
}; 
```

有什么提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T09:47:56.407

我最终将签名的 cookie 值存储在隐藏的 div 中，然后将其与每个 WS 消息一起作为“协议”的一部分发送。在消息处理程序中，我检查 cookie 值是否存在，检查它的签名，然后 base64-decode 并像往常一样使用它，如下所示：

```
 sub decode_cookie {
      my ($self, $cookie_val) = @_;
      my $json = Mojo::JSON->new();
      my $secret = $self->stash->{'mojo.secret'};
      if ($cookie_val =~ s/--([^\-]+)$//) {
        my $sig = $1;
        #app->log->debug("cookie=".$cookie_val);
        #app->log->debug("sig=".$sig);
        my $check = Mojo::Util::hmac_sha1_sum $cookie_val, $secret;
        unless(Mojo::Util::secure_compare $sig, $check) {
          app->log->warn("invalid session cookie signature");
          return;
        }
      } else {
          app->log->warn("failed to extract cookie value");
          return;
      }
      my $session = $json->decode(Mojo::Util::b64_decode($cookie_val));
      unless($session) {
          app->log->warn("failed to b64-decode session cookie");
          return;
      }
      return $session;
    }

    websocket '/rtc' => sub {
      my $self = shift;
      my $json = Mojo::JSON->new;

      $self->on(message =>
        sub {
          my ($self, $data) = @_;
          app->log->debug("received WS message: ".$data);
          $data = $json->decode($data);

          my $session = decode_cookie($self, $data->{cval});
          # do whatever you have to here...
        }
      ); 
```

# .net - 有没有更优雅的方式来使用 linq 设置属性值？

> ID：12628333
> 
> 赞同：0
> 
> 时间：2012-09-27T18:59:09.323
> 
> 标签：.net, vb.net, linq, linq-to-xml

我有以下代码简介，它将选择我的 XML 中具有**RatingNumericValue的所有****数据**元素，然后将该数据元素的值设置为 RatingNumericValue 的内容。我想知道这是否适合使用谓词。有没有更好的方法使用 linq 来做到这一点？

 **```
 Dim dataEls = From item In copy...<Table>...<Row>...<Cell>...<Data> Select item Where item.@RatingNumericValue IsNot Nothing
    For Each de In dataEls
        de.Value = de.@RatingNumericValue
    Next 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T19:59:20.977

> 有没有更好的方法使用 linq 来做到这一点？

不。LINQ 的目的是*查询*，不包括修改对象。同样，*谓词*用作一种匹配器 - 再次与设置属性无关。

虽然您可以使用`List<T>.ForEach`，但我建议您不要使用它 - 与`foreach`您已经拥有的简单循环相比，它不必要地复杂。

从理论上讲，您可以编写一个谓词，该谓词设置一个属性，然后始终返回 true - 然后您需要`Count()`在结果上调用或其他东西来强制对每个项目执行谓词。我**强烈**建议不要这样做。改变他们调用的数据的谓词是可怕的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T19:04:10.730

您可以使用`List<T>1 extension method ForEach to remove the explicit loop. However, that requires that you convert your`IEnumerable `to a`List`。

[http://msdn.microsoft.com/en-us/library/bwabdf9z.aspx](http://msdn.microsoft.com/en-us/library/bwabdf9z.aspx)

[http://craigwatson1962.com/2010/10/08/using-the-foreach-method/](http://craigwatson1962.com/2010/10/08/using-the-foreach-method/)**

# php - Doctrine 2.2 Symfony 2.1 一对多

> ID：12628334
> 
> 赞同：1
> 
> 时间：2012-09-27T18:59:20.443
> 
> 标签：php, symfony, doctrine-orm

一直在尝试这样做一段时间，但我似乎无法让它工作......

基本上，我们有一个包含多个内容的页面。我试图得到它，所以当实体生成时，我们将能够做类似的事情`$page->getContents()`

当我运行教义：生成：实体命令时，它会跳过内容属性并且不会为其创建getter或setter....

它应该吗？如果没有，我需要做什么才能使其正常工作？

以下是文件：

**页**

```
<?php

namespace Foo\BarBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * Foo\BarBundle\Entity\Page
 *
 * @ORM\Table(name="page")
 * @ORM\Entity
 */
class Page
{
    /**
     * @var integer $pageId
     *
     * @ORM\Column(name="page_id", type="integer", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */
    public $pageId;

    .......

    /**
     * @var \Foo\BarBundle\Entity\Content 
    *
     * @ORM\OneToMany(targetEntity="Content", mappedBy="page", cascade={"all"})
     */
    public $contents;
} 
```

**内容**

```
<?php

namespace Foo\BarBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * Foo\BarBundle\Entity\Content
 *
 * @ORM\Table(name="content")
 * @ORM\Entity
 */
class Content
{
        /**
         * @var integer $contentId
         *
         * @ORM\Column(name="content_id", type="integer", nullable=false)
         * @ORM\Id
         * @ORM\GeneratedValue(strategy="IDENTITY")
         */
        public $contentId;

        .........

        /**
         * @var Page
         *
         * @ORM\ManyToOne(targetEntity="Page", inversedBy="contents")
         * @ORM\JoinColumns({
         *   @ORM\JoinColumn(name="page_id", referencedColumnName="page_id")
         * })
         */
        public $page;
} 
```

**架构**

（取出不重要的列）

```
CREATE TABLE `page` (
  `page_id` int(32) unsigned NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`page_id`),
) ENGINE=InnoDB AUTO_INCREMENT=28 DEFAULT CHARSET=latin1;

CREATE TABLE `content` (
  `content_id` int(32) unsigned NOT NULL AUTO_INCREMENT,
  `page_id` int(32) unsigned NOT NULL,
  PRIMARY KEY (`content_id`),
  KEY `page_id` (`page_id`),
  CONSTRAINT `content_ibfk_1` FOREIGN KEY (`page_id`) REFERENCES `page` (`page_id`),
) ENGINE=InnoDB AUTO_INCREMENT=28 DEFAULT CHARSET=latin1; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T22:39:45.630

您是否尝试过验证您的实体？

```
 $em = $this->getDoctrine()->getEntityManager();
    $validator = new SchemaValidator($em);
    $errors = $validator->validateMapping(); 
```

希望这有助于安东尼诺

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T15:24:50.593

对不起，我来晚了 ！

因此，如果您从数据库生成实体，您将拥有 php 实体（通常在 Entity\ 文件夹中），但在 xml/yml/php 中还有一个“映射文件”，默认情况下在 Resources/config/doctrine... 中创建。

So if you want to make an "fake" relation working you've to declare it in your orm file and your php entity.

Glad it helped you!

# iphone - 创建 iPhone 5 屏幕截图

> ID：12628341
> 
> 赞同：5
> 
> 时间：2012-09-27T18:59:29.930
> 
> 标签：iphone, ios6, screenshot

我已经安装了最新的 xcode 版本并使用 6.0 模拟器等测试了我的应用程序。我如何创建所需的 iPhone 5 屏幕截图，因为我有 4s 而不是要连接的 iphone 5 设备？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-27T19:14:26.193

您可以从模拟器中截取屏幕截图。您必须在模拟器选项中更改设备以获得更大的屏幕尺寸。

更换设备：硬件>设备>iPhone(Retina 4-inch)

您可以使用以下方法缩小它：Window>Scale

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-06T13:03:54.780

更换设备：硬件>设备>iPhone(Retina 4-inch)

按`Command`+`S`

屏幕截图将自动出现在您的桌​​面上

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-27T19:26:20.057

在模拟器中运行您的应用程序（任何，根据您的需要）

当你想要截图时

按`Command`+`s`

或者

文件 -> 保存屏幕截图

它将屏幕截图保存在桌面上（默认）

# qt - Qtimer vs timerEvent - 他们中的哪一个产生更少的开销？

> ID：12628343
> 
> 赞同：10
> 
> 时间：2012-09-27T18:59:38.703
> 
> 标签：qt, timer

我需要每 1 毫秒触发一次计时器。[该](http://doc.qt.digia.com/4.7/signalsandslots.html)文档报告说，插槽调用可能比虚拟函数调用慢得多。

但是，如果我们将信号/插槽与事件发生进行比较，哪种机制会更快、更高效并且产生更少`QTimer`的开销：将`timeout()`信号连接到插槽或裸`QObject::startTimer()`\ `QObject::killTimer()`with `QObject::timerEvent()`？

对于 Windows 和 Linux，上述问题的答案是否相同？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-27T19:33:01.677

`QTimer`实际上只是功能的一个信号槽包装器`QObject::startTimer()`，因此毫无疑问，它在所有平台上都会产生更多的开销（它在内部实现`QObject::timerEvent()`——它的这个函数的实现只是为了发出`timeout()`信号）。

值得注意的`QBasicTimer`是，它是围绕功能的更轻量级的包装器`QObject::startTimer()`。如果您使用`QBasicTimer`，您仍然需要实现`QObject::timerEvent()`，但它会为您管理计时器 ID。因此，a`QBasicTimer`结合了 a 的一些易用性和`QTimer`使用该`QObject::startTimer()`机制的效率。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-28T08:40:49.730

事实上，如果您需要精度，QT 并不能保证您的计时器在 1 毫秒后准确执行。

至少在 QT 4.7.X 之前，如果 QT 有一个事件（在事件循环内处理），所有计时器都会在“事件循环”中在内部检查到期（然后引发它们的信号）。我的意思是，它们不会作为中断其他任务等的操作系统事件执行。

如果您的循环中的任何其他 3 个事件例如每个事件需要 0.5 秒，您可以获得的是 1.5 秒后执行的计时器。

我希望我的记忆没有失败，几个月前我看了一下 QT 计时器代码，现在我不记得计时器事件是在其他事件之后还是之前处理的。

希望这对您有所帮助。

# r - 如何在 ggplot2 中使用具有多个数据集的分面和组？

> ID：12628345
> 
> 赞同：0
> 
> 时间：2012-09-27T18:59:42.613
> 
> 标签：r, ggplot2

我有两个数据框 Data1 和 Data2。Data1 具有日期和价格以及代码。Data2 有日期和 Volume 和 Ticker。这两个数据帧的长度不同。也就是说，日期不能一对一匹配，所以我不能在没有插值的情况下将它们放入一个数据帧中。

我想在同一个图上绘制价格与日期的关系和数量与日期的关系，我猜这意味着不同的层和不同的比例。但我也想在股票上分面。

我如何在 ggplot2 中做到这一点而不诉诸 for 循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T19:58:42.367

查看您的数据会有所帮助，但我认为这应该可行。我为这两个数据集设置了不同的颜色，但这样做不会自动生成图例，并且 y 轴仅标有第一个变量。

```
ggplot(Data1, aes(Date, Price)) + facet_wrap(~ Ticker) + geom_line(color="blue") + geom_line(data=Data2, aes(date, Volume), color="red") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T20:22:21.333

好的，这是我使用上面在评论中表达的想法的答案。

```
ticks=c('JNJ','IBM','MSFT','GOOG','CAT','BAC') 
N1=100 
N2=200
Data1=data.frame(x=runif(N1),y=cumsum(runif(N1)),
                 ticks=sample(ticks,N1,replace=T), tag='data1')
Data2=data.frame(x=runif(N2),y=cumsum(runif(N2)),
                 ticks=sample(ticks,N2,replace=T),tag='data2')
D=rbind(Data1,Data2)

ggplot(data=D,aes(x=x,y=y,colour=tag))+geom_line()+facet_wrap(~ticks) 
```

这工作正常，但我仍然需要重命名变量。

# php - mysql 注入和跨站点脚本 - CodeIgniter

> ID：12628347
> 
> 赞同：0
> 
> 时间：2012-09-27T18:59:56.263
> 
> 标签：php, mysql, sql, codeigniter, code-injection

有一个用 CI 版本 1.7.2 编写的站点。

任务是防止注入攻击和跨站点脚本。

我几乎阅读了与它相关的各种信息。我试过了

`-htmlentities`

`-mysql_real_escape_string`

`-CI xss_clean`

`-pregmatch, escape, htmlspecialchars`

`-CI escape`

`-strip_tags`

`-magic_quotes`

在搜索框中，如果我输入警报代码或 writeResponse，它会显示来自站点和数据库的各种结果。（有些在 Chrome 中不起作用，但警报和其他一切都在 Firefox 和 IE 中起作用）

请提出解决此问题的最佳方法。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T19:08:47.273

如果你还没有听说过。[PDO](http://php.net/manual/en/book.pdo.php)是用于 PHP 和 SQL 的首选技术之一。该文档声称，如果您使用 PDO 的“准备好的语句”，SQL 注入几乎是不可能的，如下所示：

```
<?php
$stmt = $dbh->prepare("INSERT INTO REGISTRY (name, value) VALUES (:name, :value)");
$stmt->bindParam(':name', $name);
$stmt->bindParam(':value', $value);

// insert one row
$name = 'one';
$value = 1;
$stmt->execute();

// insert another row with different values
$name = 'two';
$value = 2;
$stmt->execute();
?> 
```

此示例代码取自： http: [//php.net/manual/en/pdo.prepared-statements.php](http://php.net/manual/en/pdo.prepared-statements.php) 从该链接，阅读第二个要点。

它具有充当抽象的额外好处，使您的系统跨数据库兼容。代码看起来也更好。

浏览文档，看看它是否提供了您正在寻找的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T19:16:26.610

见下面的网址

[PHP 中结合 Code Ignitors xss_clean() 和 Zend PDO 的 SQL 注入和 XSS 保护](https://stackoverflow.com/questions/7753982/sql-injection-and-xss-protection-in-php-combining-code-ignitors-xss-clean-and)

CodeIgniter 已经为您的案例提供了 2 个安全功能。

1.  用户输入的 XSS 过滤：[输入类](http://codeigniter.com/user_guide/libraries/input.html)的方法有第二个布尔参数，它允许您通过 XSS 过滤器运行输入，以防您没有启用全局 xss 过滤器。

2.  对于 SQL 注入，使用绑定查询和活动记录是安全的，它将使您免于 SQL 注入，因为框架会完成所有转义易受攻击的用户输入的工作。用户报告的活动记录漏洞很少，但是 CodeIgnitor 团队（EllisLabs）在后续版本中迅速修复了这些漏洞

**另一个例子**

[在 codeigniter 中防止 SQL 注入](https://stackoverflow.com/questions/3917831/prevent-sql-injections-in-codeigniter)

[http://codeigniter.com/forums/viewthread/124587/#616863](http://codeigniter.com/forums/viewthread/124587/#616863)

[http://codeigniter.com/forums/viewthread/186543/#881859](http://codeigniter.com/forums/viewthread/186543/#881859)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-27T19:04:39.893

这个问题已经被打死了。回顾：[OWASP XSS](https://www.owasp.org/index.php/Cross-site_Scripting_%28XSS%29)和[OWASP SQL 注入](https://www.owasp.org/index.php/SQL_Injection_Prevention_Cheat_Sheet)

# android - Android Spinner 重新设置时的值

> ID：12628348
> 
> 赞同：1
> 
> 时间：2012-09-27T19:00:12.503
> 
> 标签：android, android-spinner

```
 <Spinner
    android:id="@+id/spinner1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/editText2"
    android:layout_marginTop="22dp"
    android:entries="@array/categorylist"
    android:prompt="@string/category" /> 
```

我已经创建了上述格式的微调器！

```
final Spinner spnr= (Spinner)findViewById(R.id.spinner1);
    String category=spnr.getSelectedItem().toString(); 
```

通过以上述格式获取值来推动 db 中的微调器值。

现在当从 db 检索值时。微调器应根据特定值设置...我该如何实现任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T19:47:34.530

那么通过使用**setSelection()**您可以为微调器设置特定的选择而不是第一个（默认情况下）。现在你的问题是如何从你拥有的价值中获得位置。所以这是执行此操作的代码：

```
String yourString = "some value"; //the value you want the position for

ArrayAdapter yourAdap = (ArrayAdapter) mySpinner.getAdapter(); //cast to an ArrayAdapter

int spinnerPosition = yourAdap.getPosition(yourString);

//set the default according to value
spnr.setSelection(spinnerPosition); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T19:26:27.903

只有当您存储设置为 Spinner 条目的项目数组时，这才有可能。您可以在微调器中设置所选项目的位置。所以你必须找出你从数据库中查询的项目的索引。加载 categorylist 的 StringArray 并迭代数组并将每个项目与从数据库中获取的项目进行比较。然后将找到的项目的索引设置为微调器中的选定项目。

```
 String[] list = getResources().getStringArray(R.array.categorylist);
    int index = 0;
    for(String item : list) {
        if(item.equals("your_item")){
            break;
        }
        index++;
    }
    spinner.setSelection(index); 
```

# java - 即使在声明之后，我是否有任何理由需要在初始化期间重新识别我的变量？

> ID：12628352
> 
> 赞同：0
> 
> 时间：2012-09-27T19:00:31.193
> 
> 标签：java, debugging, compiler-errors

我正在实现一个接口。

我有一个声明

```
private T[] entry; 
```

然后，我有这样的构造函数：

```
public Example()
{
    @SuppressWarnings("unchecked")
    entry = (T[])(new Comparable[10]);
} 
```

我的编译器告诉我：

```
<identifier> expected 
```

在

```
entry = (T[])(new Comparable[10]); 
```

我在声明期间不是已经这样做了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T19:01:33.890

该错误是由该`@SuppressWarnings`行引起的。
您不能将注释应用于任意代码行。

相反，您需要将其应用于构造函数。

# yahoo-api - 在 yahoo Finance 获取 csv 格式的日图表数据

> ID：12628354
> 
> 赞同：1
> 
> 时间：2012-09-27T19:00:33.517
> 
> 标签：yahoo-api, yahoo-finance

有没有办法获取此图表显示的数据：

[http://finance.yahoo.com/echarts?s=EURUSD%3DX+Interactive#symbol=EURUSD=X;range=1d](http://finance.yahoo.com/echarts?s=EURUSD=X%20Interactive#symbol=EURUSD=X;range=1d)

以csv格式？我的意思是例如每分钟给定股票/债券等的价值是多少？我知道你可以使用类似的东西来查询雅虎

`http://ichart.yahoo.com/table.csv?s=`

但我正在寻找一种方法来获取详细的每日图表数字数据（只有一个证券交易所日），如上面的链接所示。据我所知，表格可以提供一天的最小分辨率，这并不满足我的要求。我尝试使用上面的链接并将其与“表”或“引号”等混合，但没有运气。

作为奖励，我真的很高兴能够获取一些像上面这样的历史数据，但是如果无法获取历史数据，那么只有当前数据就可以了。

**编辑**

雅虎不是必需品——任何来自其他网站的 cvs 或其他易于解析的格式都可以（只要它是免费的并且是最新的——最多 15 分钟）。

感谢您的任何建议，

卡伊曼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T04:14:45.970

您可以通过以下方式询问财务 api：

```
http://finance.yahoo.com/d/quotes.csv?s= 
```

您可以通过以下方式获取历史数据：

```
http://finance.yahoo.com/q/hp?s= 
```

或者您可以使用 YQL（雅虎查询语言）而不是 CSV，但非常有用：

[http://www.gurchet-rai.net/dev/yahoo-finance-yql](http://www.gurchet-rai.net/dev/yahoo-finance-yql)

# python - Python - 以附加模式打开文件。写永远不会发生

> ID：12628359
> 
> 赞同：3
> 
> 时间：2012-09-27T19:01:02.427
> 
> 标签：python, file-io, append

我已经在这家住了几天了。这是我正在尝试做的事情：

1.  以追加模式打开一个已经存在的 csv 文件
2.  将一串新的csv行添加到底部（下面的'buffer'）
3.  关闭文件
4.  重命名文件以反映最后输入数据的日期。

我的代码片段：

```
if mode == 'a':
    print buffer
    print fn
    f = open(fn,mode)
    f.write(buffer)
    #f.write("\nfoo,bar")
    f.close()
    print f.closed
    os.rename(".\\out\\" + fn, ".\\out\\" + fn[0:17]+tdy[0:4]+ "_" + tdy[5:7] + "_" + tdy[8:10] + ".csv") 
```

附加信息：

*   mode 确实 == 'a' 它进入了循环。

*   `buffer`印刷。打印为一串多行 csv 数据，例如：

    ```
    foo, bar, foo, bar
    foo, bar, foo, bar
    foo, bar, foo, bar 
    ```

*   `fn`是我试图打开并打印的正确文件名。

*   `f.closed`返回`True`

*   `os.rename`工作并重命名文件。当我打开它时，尚未附加缓冲区。

*   我试过`flush()`在关闭前添加一个。

*   我试过没有重命名。

*   我试图附加一个硬编码的字符串。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T19:22:31.510

您在这里处理*两个*文件。

*您在当前*目录中打开`fn`以进行写入，但您将文件重命名为.*`'.\out\' + fn`*

 *打开时`fn`，请确保使用正确的目录：

```
f = open(r'.\out\' + fn ,mode) 
```

请注意，在 Windows 上，您也可以使用`/`分隔符，这更容易处理，因为您不必使用原始字符串或转义斜杠。此外，最好用于`os.path.join()`处理目录和文件：

```
filename = os.path.join('./out', fn) 
```

然后`filename`在整个功能中使用。*

# objective-c - 在 iOS 上，在 UIView 的实例方法中，如果我们 [self removeFromSuperview]，为什么 self 会继续存在？

> ID：12628372
> 
> 赞同：0
> 
> 时间：2012-09-27T19:01:44.023
> 
> 标签：objective-c, ios

如果我们子类`UIView`化并且在这个新类的任何实例方法中，做

```
[self removeFromSuperview];

[foo someMessage];
_a = _a + 1;
self.b++;
for (int i = 0; i < 100000000; i++) {
    self.b++;
    //NSLog(@"b is %i", self.b);
} 
```

会发生什么？假设超级视图是唯一声称拥有该视图所有权的视图，是否会`self`立即被解除分配？

第一行是发送一个`foo`引用外部对象的局部变量消息`someMessage`。第二行是一个局部变量`_b`。第三行是一个属性`b`。接下来的几行只是造成一些延迟。

在 Xcode 4.5 和 iPhone 5 (iOS 6) 上尝试，代码实际上运行没有崩溃。代码是在`-touchesBegan`. 只有在大延迟循环完成后，视图才会在屏幕上消失，可能是由于主循环现在调用`drawRect`并`rootViewController.view`显示视图已经消失（视图在延迟循环之前已经从视图层次结构中消失，但只是没有反映在屏幕）。

如果我使循环只计数到 1000 或 10000，并`NSLog`在该循环内部使用，则该数字实际上可以很好地打印出来而没有任何崩溃。**更新：**据说该对象可能仍然可以访问一小段时间，但似乎即使是 30 秒或一分钟，代码仍然可以正常运行。

那么这是如何工作的呢？如果使用仪器，我实际上看到这个`FooView`对象只有在大延迟循环之后才离开“分配”表。所以奇怪的是，该`FooView`对象似乎直到后来才被释放，而不是在`removeFromSuperView`.

我也有一个`[self.presentingViewController dismissViewControllerAnimated ...]`that dismissed `self`，然后`self.presentingViewController`再次使用下一行，`self.presentingViewController`成为`nil`，但是如果我还添加一个循环以将整数属性递增 10000 并使用 打印出来`NSLog`，它也打印得很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T19:11:11.277

> 假设超级视图是唯一声称拥有该视图所有权的视图，self 会立即被释放吗？

是的，可能，但内存实际上并没有被重用或清除；如果释放后没有发生任何其他事情，您*通常*仍然可以得到看似有效的对象。

尝试：

```
[self removeFromSuperview];
[self performSelector:@selector(tryToCrash) withObject:nil afterDelay:0.1];

//...

- (void)tryToCrash
{
    [foo someMessage];
    _a = _a + 1;
    self.b++;
    for (int i = 0; i < 100000000; i++) {
        self.b++;
        //NSLog(@"i is %i", self.i);
    }
} 
```

这将安排该代码在运行循环的下一次复飞之后发生，您可能会看到崩溃。主要的是你使用了一个你知道已经死了的对象，这还不是 C 的 UB 水平，但肯定不能保证给你任何特定的结果。

> 只有在大延迟循环完成后，视图才会在屏幕上消失，可能是由于主循环现在调用 drawRect

是的，视图只在每次通过运行循环时重绘，并且只有在它们被标记为需要它时才会重绘。超级视图将被如此标记，因为它的子视图之一已被删除。它也有可能将实际释放子视图推迟到这一点。

# django - Django 表单集：删除无效表单

> ID：12628374
> 
> 赞同：3
> 
> 时间：2012-09-27T19:01:51.927
> 
> 标签：django, formsets

我无法完成这项工作。我有一个带有 5 个额外表单的表单集。这 5 个表格有一个非必填但预先填写的字段（要求）。Formset 在提交时总是会引发错误，这是正常的，因为它会将所有表单都视为 has_changed。我希望能够忽略部分填写但必填字段为空的表格。

任何帮助深表感谢。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T19:26:38.110

而不是调用 formset.is_valid() 循环遍历表单并验证每个表单，只有当它满足您的特定要求时，即：

```
for form in formset.forms:
    if (form.data['required_field']):
          form.is_valid() 
```

# date - SQL Developer 只返回日期，而不是时间。我该如何解决？

> ID：12628385
> 
> 赞同：197
> 
> 时间：2012-09-27T19:02:32.213
> 
> 标签：date, datetime, time, oracle-sqldeveloper

以下是 SQL Develoepr 在结果窗口和导出时给我的信息：

```
CREATION_TIME       
------------------- 
27-SEP-12
27-SEP-12
27-SEP-12 
```

这是运行相同查询/数据库的另一款软件给出的内容：

```
CREATION_TIME       
------------------- 
2012-09-27 14:44:46 
2012-09-27 14:44:27 
2012-09-27 14:43:53 
```

如何让 SQL Developer 也返回时间？

* * *

## 回答 #1

> 赞同：417
> 
> 时间：2012-09-27T19:13:09.970

你能试试这个吗？

转到工具> 首选项 > 数据库 > NLS 并将日期格式设置为 MM/DD/YYYY HH24:MI:SS

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2015-05-16T12:32:42.953

也可以使用以下查询设置日期格式：-

更改会话设置 NLS_DATE_FORMAT = 'date_format'

例如：更改会话设置 NLS_DATE_FORMAT = 'DD-MM-YYYY HH24:MI:SS'

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2016-01-21T21:09:07.590

为了扩展之前的一些答案，我发现 Oracle DATE 对象的行为与 Oracle TIMESTAMP 对象不同。特别是，如果您将 NLS_DATE_FORMAT 设置为包括小数秒，则将省略整个时间部分。

*   对于 DATE 和 TIMESTAMP，格式“YYYY-MM-DD HH24:MI:SS”按预期工作
*   格式“YYYY-MM-DD HH24:MI:SSXFF”仅显示 DATE 的日期部分，按预期工作 TIMESTAMP

我个人的偏好是将 DATE 设置为“YYYY-MM-DD HH24:MI:SS”，并将 TIMESTAMP 设置为“YYYY-MM-DD HH24:MI:SSXFF”。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2013-09-30T12:50:31.267

从工具 > 首选项 > 数据库 > NLS 参数并将日期格式设置为

DD-MON-RR HH:MI:SS

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-09-27T19:26:54.737

这将为您提供小时、分钟和秒。嘿presto。

```
select
  to_char(CREATION_TIME,'RRRR') year, 
  to_char(CREATION_TIME,'MM') MONTH, 
  to_char(CREATION_TIME,'DD') DAY, 
  to_char(CREATION_TIME,'HH:MM:SS') TIME,
  sum(bytes) Bytes 
from 
  v$datafile 
group by 
  to_char(CREATION_TIME,'RRRR'), 
  to_char(CREATION_TIME,'MM'), 
  to_char(CREATION_TIME,'DD'), 
  to_char(CREATION_TIME,'HH:MM:SS') 
 ORDER BY 1, 2; 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-06-21T18:57:50.913

这些答案都不适合我，不是 Preferences NLS 配置选项或 ALTER 语句。这是在我的案例中唯一有效的方法：

```
dbms_session.set_nls('nls_date_format','''DD-MM-YYYY HH24:MI:SS'''); 
```

*在 BEGIN 语句之后添加

我正在使用 PL/SQL Developer v9.03.1641

希望这对某人有帮助！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-03-15T08:13:03.103

工具>首选项>数据库> NLS在我的情况下，“日期格式”行中的秒后有“XFF”。将参数更正为“yyyy-mm-dd HH24:MI:SS”后，时间出现了。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-04-18T10:10:43.710

好吧，我发现了这种方式：

> Oracle SQL Developer（左上角图标）> 首选项 > 数据库 > NLS 并将日期格式设置为 MM/DD/YYYY HH24:MI:SS

[![在此处输入图像描述](../Images/7a4d3aa770029b2913097b9456b0dd02.png)](https://i.stack.imgur.com/haMhW.png)

# regex - 如何为一个原始模式搜索执行多个就地 sed？

> ID：12628386
> 
> 赞同：2
> 
> 时间：2012-09-27T19:02:33.953
> 
> 标签：regex, shell, unix, sed

我是 shell 脚本的新手，正在尝试解决一个问题。

基本上，我需要在文本文件中找到`REGEX`模式的实例，对每个结果进行一些`sed`编辑，然后将结果原位输出到原始文本文件，而不会干扰任何其他原始文本。

我面临的心理障碍是 a) 我需要进行多次模式替换才能完成最终的转换结果，因此它不能适合对 sed 的单个调用，并且 b) 如果我 grep 结果使用`REGEX`模式，它只给我与该模式匹配的结果。好的，很好，所以我继续编辑它们以将它们转换为最终所需的输出，但我想将此更改完全写入文本文件中的位置。您不能这样`pipe` `grep`做，`sed -i`因为它不再引用原始文件，只是结果集。我是在以错误的方式思考这个问题，还是有一些我不知道的命令？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T19:32:06.960

在使用 sed 的寻址工具应用命令之前，您可以“grep”：

```
sed '/grep-like regex/ s/pattern to replace/replacement/' -i file 
```

“-i 文件”告诉 sed 就地编辑“文件”。

可以通过分号或通过带有多个“-e”选项的命令行给出多个命令：

```
sed -e '/regex1/ s/pattern1/replacement/' -e '/regex2/ s/pattern2/replacement/'
sed '/regex1/ s/pattern1/replacement/; /regex2/ s/pattern2/replacement/' 
```

如果在上面的示例中 regex1 和 regex2 相同，您还可以使用 backets 将替换命令分组到一个块中：

```
sed '/regex/ { s/pattern1/replacement/; s/pattern2/replacement/ }' 
```

或为了清楚起见：

```
sed '/regex/ {
        s/pattern1/replacement/
        s/pattern2/replacement/
    }' 
```

您还可以通过嵌套 /regexes/ 进一步过滤行以应用命令：

```
sed '/regex1/ {
        s/pattern1/replacement/
        /regex2/ s/pattern2/replacement/
    }' 
```

因此，仅当 regex1 和 regex2 匹配时才执行第二个替换命令。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-27T19:05:48.337

`sed`可以很好地处理多个替换：`sed 's/p1/r1/g; s/p2/r2/g'`

但是如果你想编辑一个文件，不要使用流编辑器。 `sed`是的流媒体版本`ed`。如果要编辑文件，只需使用`ed`.

```
echo ',s/pattern/repl/g;,s/pattern2/repl2/g;w' | tr \; \\012 | ed -s file 
```

鉴于您的评论，我认为您只想在与特定模式匹配的行上进行搜索和替换。例如，要将所有包含“qux”的行上的“foo”替换为“bar”，您可以执行以下操作：

```
echo '/qux/s/foo/bar;w' | tr \; \\012 | ed -s file 
```

请注意，我在使用`ed`. 你可以用 sed 做同样的事情：

```
sed '/qux/s/foo/bar' file 
```

但这`sed -i`是一个讽刺（它破坏了硬链接）。

# tsql - 将 +x 年添加到数据类型“日期时间”的每个字段

> ID：12628395
> 
> 赞同：0
> 
> 时间：2012-09-27T19:03:22.533
> 
> 标签：tsql, axapta, sql-server-2012, dynamics-ax-2012

我想为 AX 2012 获取样本数据，并为每个数据类型字段添加 3 年：日期时间。

我知道有 dateadd 函数，我可以单独更新每个字段，只是不知道如何搜索数据库并找到 datetime 类型的每个字段并执行更新。

也许构建该类型的所有字段的临时表？

我对sql很陌生，所以请温柔...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T19:13:33.593

这将为`UPDATE`每列提供一个单独的语句。

```
DECLARE @sql NVARCHAR(MAX) = N'';

SELECT @sql += N'
UPDATE ' + QUOTENAME(OBJECT_SCHEMA_NAME([object_id]))
 + '.' + QUOTENAME(OBJECT_NAME([object_id]))
 + ' SET ' + QUOTENAME(name) 
 + ' = DATEADD(YEAR, 3, ' + QUOTENAME(name) + ');'
FROM sys.columns 
WHERE system_type_id = 61 
-- or maybe IN (40, 42, 43, 58, 61) if you want to handle all date types 
AND is_computed = 0
AND [object_id] IN 
(
  SELECT object_id FROM sys.tables
  WHERE OBJECTPROPERTY([object_id], 'IsMsShipped') = 0
);

PRINT @sql;
--EXEC sp_executesql @sql; 
```

如果表有多个 datetime 列，您可能会做一些更棘手的事情来对每个表进行多列更新，但对于像这样的一次性任务，额外的复杂性似乎不值得性能差异。

# apache-flex - Flex Image 控件无法处理带有特殊字符的 URL

> ID：12628400
> 
> 赞同：0
> 
> 时间：2012-09-27T19:04:00.307
> 
> 标签：apache-flex, actionscript, flash

我正在构建一个 Flex 应用程序，用户可以在其中输入 Internet 上图像的 URL，然后快速加载 URL 指向的图像。这适用于没有特殊字符的 URL（通过设置`source`属性或调用`load()`on `Image`）。但是，当提交的 URL 包含已经转义的特殊字符时，即在大多数情况下直接从浏览器的 URL 栏中直接复制时，`URLRequest`会再次使用 '%25' 转义百分号，这会使 URL 无效并且服务器返回错误。在浏览器中粘贴相同的 URL 可以很好地加载图像。我已经`decodeURI()`在 URL 上尝试过，但它忽略了一大堆字符，所以我尝试`decodeURIComponent()`了，并且正确解码了所有内容，但是当`URLRequest`去重新编码它，它会忽略现在解码的特殊字符并且不会转义它们，所以在这种情况下 URL 无效，因为它仍然包含不安全的字符并且失败。那么，我怎样才能发送`URLRequest`带有特殊字符（编码或未编码）的东西并让它真正起作用？真的，我希望它不对我的 URL 做任何事情，让我确定它是否有效，但它嵌入在 Flash Player 全局 swc 中，因此是 flash 的封闭源代码，我看不到源代码代码。任何帮助将不胜感激！

这基本上就是我正在做的事情：

```
var image:Image = new Image();
image.source = textInput.text; 
```

我一直在测试的 URL 来自 Getty Images：

[http://cache2.asset-cache.net/gc/sb10064464f-001-dog-looking-up-close-up-gettyimages.jpg?v=1&c=IWSAsset&k=2&d=BRDT%2firX5%2bLh54FjE4ekKh%2bjEirx6jSgMBJOgVxvtKL5ngFuzD9P5u%2bPvlXK4QFiEpHc%2bPvlXUK4QFiEp1Hc%66N 2fKXAA%3d%3d](http://cache2.asset-cache.net/gc/sb10064464f-001-dog-looking-up-close-up-gettyimages.jpg?v=1&c=IWSAsset&k=2&d=BRDT%2firX5%2bLh54FjE4ekKh%2bjEirx6jSgMBJOgVxvtKL5ngFuzD9P5u%2bPvlXK4QAMaEHcwY6NrdJUQFip1%2fKXAA%3d%3d)

如果您单步执行代码，在`loadContent()`函数 in `SWFLoader`(which `Image`extends), after `requestedURL`is created from a`new URLRequest`中，对象`url`上的属性`URLRequest`所有百分号都用 '%25' 转义（再次），生成以下 URL（它将返回一个来自 Getty 的 500 错误）：

[http://cache2.asset-cache.net/gc/sb10064464f-001-dog-looking-up-close-up-gettyimages.jpg?v=1&c=IWSAsset&k=2&d=BRDT%252firX5%252bLh54FjE4ekKh%252bjEirx6jSgMBJOgVxvtKL5ngFuzD9P5u%252bPvlXK4QAMaEHcwY6NrdJUQFip1% 252fKXAA%253d%253d](http://cache2.asset-cache.net/gc/sb10064464f-001-dog-looking-up-close-up-gettyimages.jpg?v=1&c=IWSAsset&k=2&d=BRDT%252firX5%252bLh54FjE4ekKh%252bjEirx6jSgMBJOgVxvtKL5ngFuzD9P5u%252bPvlXK4QAMaEHcwY6NrdJUQFip1%252fKXAA%253d%253d)

**更新**

*   我忘了提到我正在运行 Flex SDK 4.1，而且`Image`是`mx.controls.Image`
*   根据 wvxvw 的建议，我尝试`unescape()`了与使用相同的结果`decodeURIComponent()`
*   我还尝试`encodeURI()`在使用 解码后调用 URL `decodeURIComponent()`，但它当然会忽略解码 URL 中的许多不安全字符，并且不会重新编码它们。`URLRequest`做同样的事情，所以最后调用的 URL 没有被编码，因此失败。
*   同样有趣的是，当我尝试调用`encodeURIComponent()`URL 并在传入之前对其重新编码时，`URLRequest`并没有重新编码百分比，大概是因为它们已经是 '%25'？
*   最后，它似乎只寻找 '%' 符号并简单地用 '%25' 替换它们（如果它们后面还没有被 '25' ），然后忽略其他不安全的字符。为什么会这样做？为什么以前没有其他人遇到过这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T17:52:36.140

对于从具有潜在不安全字符的 URL 加载的图像，您必须手动使用`Loader`or`URLLoader`并加载它们，这避免了`SWFLoader`该`OSToPlayerURI()`功能。

# javascript - 使用 Ember 和 Handlebars，如何在模板块中动态声明参数？

> ID：12628401
> 
> 赞同：0
> 
> 时间：2012-09-27T19:04:01.940
> 
> 标签：javascript, ember.js, handlebars.js

例如，我有一个这样的脚本，它定义了一个新的 div，用页码注释

```
<script type="text/x-handlebars" data-template-name="page-template">
    <div class = 'page'>
       The page is  <b>{{ App.pageView_1.pageNumber }}</b>
    <div>
</script> 
```

对应视图：

```
App.pageView_1 = App.PageView.create({
    templateName: 'page-template',
    pageNumber: 1,
}) 
```

我想动态声明新视图，每个视图都有不同的 pageNumber 字段和视图名称，所以：

```
 App.pageView_2 = App.PageView.create({
      pageNumber: 2,
  });

  App.pageView_3 = App.PageView.create({
      pageNumber: 3,
  }); 
```

请注意，为了清楚起见，已省略了 templateName 字段。

问题是模板块中的参数必须更改为 {{ App.pageView_2.pageNumber }} 等等。

知道如何做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T20:57:56.160

更接近 ember 方式：

```
{{#each App.pagesController}}
    {{#view App.PageView contextBinding="this"}}
        {{pageNumber}}
    {{/view}}
{{/each}} 
```

对于控制器：

```
App.pagesController = Em.ArrayController.create({
    content: [{ pageNumber: 1 }, { pageNumber: 2 }, { pageNumber: 3 }]
}); 
```

顺便说一句，您可能希望在`templateName`最初定义视图时设置 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T05:36:15.290

好吧，首先声明一个通用视图

```
App.pageView = Ember.View.extend({
  templateName: "page_template"
  classNames: ['page']
}) 
```

**page_template.handlebars**

```
The page is {{view.pageNumber}} 
```

现在，您已经声明了这一点，请在任何您想要执行以下操作的地方使用它：

```
{{view App.pageView pageNumber="1"}} 
```

我猜这应该可以工作......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T19:17:14.887

```
{{view App.pageView pageNumber="2"}}
  {{pageNumber}}
{{/view}} 
```

应该可以工作，但似乎是多余的。

# search - ElasticSearch 中令牌过滤器的控制顺序

> ID：12628404
> 
> 赞同：7
> 
> 时间：2012-09-27T19:04:12.117
> 
> 标签：search, elasticsearch, tokenize

试图控制令牌过滤器在 ElasticSearch 中的应用顺序。

我从文档中知道首先应用标记器，然后应用标记过滤器，但他们没有提到如何确定标记过滤器的顺序。

这是我的分析设置脚本中的 YAML 片段：

```
 KeywordNameIndexAnalyzer :
           type : custom
           tokenizer : whitespace
           filter : [my_word_concatenator, keyword_ngram] 
```

我本来以为`my_word_concatenator`之前会应用`keyword_ngram`，但似乎情况并非如此。任何人都知道如何（或是否）可以控制这些过滤器的顺序？

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T07:40:52.743

分析器由标记器组成，它将您的文本拆分为标记。在令牌过滤器进入图片之后，按照您配置它们的顺序，因为您提供了一个数组。如果您有疑问，我建议您看一下[analyze api](http://www.elasticsearch.org/guide/reference/api/admin-indices-analyze.html)，通过它您可以实际测试分析器的工作原理，而无需索引任何文本。

# objective-c - 子类 UINavigationController 的 BarButtonItems

> ID：12628407
> 
> 赞同：0
> 
> 时间：2012-09-27T19:04:30.830
> 
> 标签：objective-c, uinavigationcontroller, uibarbuttonitem

除了使用外观代理之外，似乎没有办法仅对导航栏的`UIBarButtonItem`s 进行子类化——但这会改变`UIBarButtonItem`应用程序中所有 s 的外观。

我希望能够将每个按钮的子类设置为自定义按钮，以便设置它们的色调。

有谁知道如何做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T19:25:32.380

正如@Nagan 所说，您可以使用`appearanceWhenContainedIn:`

一个例子在这里：[uiapperancewhencontainedin](https://stackoverflow.com/questions/8290981/how-to-use-uiappearance-appearancewhencontainedin)

# java - 为系统计时的最佳计量单位是什么

> ID：12628415
> 
> 赞同：0
> 
> 时间：2012-09-27T19:04:54.060
> 
> 标签：java

我想计算一个程序完整执行需要多长时间。可以用它来计时，`System.nanoTime();`但什么是最好的测量单位最适合分析程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T19:11:22.503

这完全取决于您的程序的性质，即您在日志记录中需要什么分辨率。作为一般规则，我认为毫秒就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T19:13:59.650

`System.nanoTime()`旧版本的 JVM 不支持。这些的精度也可能取决于操作系统。[这篇文章](https://blogs.oracle.com/dholmes/entry/inside_the_hotspot_vm_clocks)很有趣，并解释了更多关于这类事情

我个人会使用`System.currentTimeMillis()`它，因为它仍然非常准确，并且受旧 VM 的支持。如果您想要更高的精度，那么我认为这`System.nanoTime()`是您能得到的最好的。

[这篇](https://stackoverflow.com/q/12367331/846476) `SO`文章可能对你也很有趣

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T19:11:01.873

毫秒比纳秒更常见，因为并非每个系统都具有这种保真度。

```
long t0 = System.currentTimeMillis();
// Time passes...
long t1 = System.currentTimeMillis();
long elapsedMillis = t1 - t0; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T19:09:11.423

有什么问题：

```
long t1 = System.nanoTime();
// do something
long t2 = System.nanoTime();
System.out.println(t2 - t1); 
```

您也可以使用`System.currentTimeMillis()`（这可能更合适），这实际上取决于您尝试测量的过程。

# ios - 当用户尝试在不可滚动部分滚动时，如何阻止整个 Web 应用程序在 iOS 中滚动？

> ID：12628418
> 
> 赞同：1
> 
> 时间：2012-09-27T19:05:07.233
> 
> 标签：ios, css, html, iphone-web-app

我为 IOS 创建了一个 Web 应用程序，当用户通过 Safari 将其添加到他们的主屏幕时，如果他们尝试用手指在应用程序的一部分中向上或向下滚动而您无法滚动，它会向上或向下滚动整个应用程序向下然后弹回原位（就像您滚动到网页底部然后继续尝试继续滚动一样）。

有没有办法防止像那样向上或向下滚动？将overflow-y 属性设置为body、document 和window 为隐藏并不能修复它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T21:33:02.043

使用 JavaScript 监听 touchmove 事件并使用`preventDefault()`取消默认行为。这将使您无法从这些元素中“橡皮筋”页面。对于您不希望用户能够拖动的元素，请尝试这样的操作：

```
noScroll = document.getElementById("cant-touch-this");
noScroll.addEventListener("touchmove", function(e) {
    e.preventDefault();
}); 
```

# cloud - 基于云的 MSCRM 非生产开发？

> ID：12628419
> 
> 赞同：0
> 
> 时间：2012-09-27T19:05:20.477
> 
> 标签：cloud, dynamics-crm, dynamics-crm-2011, development-environment, production-environment

我必须对我们基于云的 CRM 2011 实例进行一些开发。显然，生产编辑是个坏主意。

由于我们没有开发环境，我想创建一个 CRM 的 30 天免费试用版。我如何（轻松？）将所有当前数据和自定义从我们的生产实例加载到新试用版中以用作开发环境？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T20:52:59.520

如果您将相同的解决方案发布到您对生产环境所做的 30 天试用版（以相同的顺序 - 记住，最后获胜！）那么您应该应用相同的自定义（假设您没有对您的不是通过解决方案的生活环境）。

然后，您可以在 30 天试用版中创建一个新解决方案，并将您所需的更改应用于新解决方案（将其视为补丁）。然后，当您满意时，将其导出为托管（如果您想稍后进行任何更改，则为非托管）解决方案并将其导入您的生产环境。

数据有点棘手，因为没有“导出我的所有数据”按钮。您可以通过导出功能导出每个实体的所有记录并[导入](http://msdn.microsoft.com/en-us/library/gg328321.aspx)它们，这有点痛苦，尤其是有些记录可能依赖于其他记录。

除非您想编写大量自定义代码，否则这是我所知道的在组织之间传输数据的唯一方法（[示例](http://blogs.msdn.com/b/crm/archive/2011/03/23/transferring-data-from-one-crm-organization-to-other-organization.aspx)）。

# css - 2个动态加载的div并排

> ID：12628422
> 
> 赞同：0
> 
> 时间：2012-09-27T19:05:45.780
> 
> 标签：css, api, html, instagram

我正在使用 Instagram 的 API 和一系列 DIV 创建一个应用程序

Wrapper、Image Container、Image、PopUp（悬停）用户个人资料图像用户名日期图像拍摄

我希望将个人资料图像、用户名和图像全部显示在一行上。

这是一个 jsFiddle：http: [//jsfiddle.net/nAfxc/1/](http://jsfiddle.net/nAfxc/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T19:10:07.903

您需要为您的`.instagram`班级指定宽度。

[请参阅此处](http://jsfiddle.net/nAfxc/3/)的 jsFiddle 。在这种情况下，我只是以 10,000px 为例；您可能想要计算实际数字。可能是这样的：

```
function SetWidth() {

  var WidthOfSinglePic = $('.instagram-feed').width();
  var NumberOfPicsInFeed = $('.instagram').find('.instagram-feed').length;
  var WidthOfParentDiv = parseInt(WidthOfSinglePic  * NumberOfPicsInFeed, 10);

  $('.instagram').width(WidthOfParentDiv);
} 
```

**编辑：要删除`<br>`标签**，这可以解决问题：

```
$('.igHoverContent').each(function () {

  var ContentHTML = $(this).html();

  var CleanContent = ContentHTML.find('br').each(function() {
      $(this).remove();
  }); 

  $(this).html(CleanContent);

}); 
```

**编辑，澄清后：**

```
$('.igHoverContent').each(function () {

   var ThumbnaiTopPosition = $(this).parent().find('igHover2').position().top;
   var ThumbnaiLeftPosition = $(this).parent().find('igHover2').position().left;
   var ThumbnailWidth = $(this).parent().find('img').width();

   var NewLeftPostion = ThumbnaiLeftPosition + ThumbnailWidth;

   $(this).css({
      'top': ThumbnaiTopPosition,
      'left': NewLeftPostion  
   });
}); 
```

注意：当您说*“我希望将个人资料图像、用户名和图像全部显示在一行中”时。*，怎么会有人猜到你的意思是*“我想把每个班级都放在班级`.igHover`旁边`.igHoverProfPic`”？*

**最终编辑：我刚刚发现您生成的 HTML 有问题！！！**您应该删除 this: 的结束标签，`<div class='igHoverContent' />\`以便将数据包含在标签中而不是在标签之外！！！；然后只需将您的 CSS 更改为：

```
.igHoverContent {
position: absolute;
margin: 275px 0px 0px 63px;} 
```

**在此处查看最终输出：http: [//jsfiddle.net/nAfxc/6/](http://jsfiddle.net/nAfxc/6/)**

# xcode - xcode - 控制台输出也在文件中？

> ID：12628424
> 
> 赞同：1
> 
> 时间：2012-09-27T19:05:49.383
> 
> 标签：xcode, console, location, tail

我想 tail -f XCode 的输出控制台，并让它出现在 xcode UI 本身中。控制台是否在某个文件中镜像？

我通过 ~/Library/Developer/Xcode greped -r 但没有找到任何匹配项。

# symfony - FOSUserBundle：对数据库设计的质疑

> ID：12628426
> 
> 赞同：0
> 
> 时间：2012-09-27T19:05:54.250
> 
> 标签：symfony, doctrine-orm, fosuserbundle

我正在使用 FOSUserBundle 在 Symfony2 中开发，我对 DDBB 设计不太确定。我会尽量简单地解释我的情况。假设我的项目就像 facebook。所以你知道实体“用户”将是整个应用程序中最重要和最相关的，一切都与它相关。

关键是我不确定如何使用 FOSUserBundle 处理 DB 层（表、学说实体和关系）。默认情况下，实体 User 必须具有所有 FOSUserBundle 字段（用户名、电子邮件、令牌、email_canonical 等等......）。所以我怀疑我是否应该创建另一个实体来处理与其他实体的关系，比如“UserReal”。它将与第一个实体“用户”有 OneToOne 关系，女巫将仅用于登录或访问目的。或者只创建一个对象“用户”并用它处理所有事情。

我的选择：

1\. - 实体“UserSecurity”女巫扩展了 FosUserBundle 用户实体，仅限用于访问（登录、注销、注册）的情况。- 有实体“UserReal”，或者只是“用户”女巫拥有来自用户的每个字段属性（姓名、姓氏、位置）。它与其他实体（如页面、组、照片）有关系。它是“主要”实体，具有生成值的策略。- UserSecurity 通过 UserSecurity->id_user 与用户建立 OneToOne 关系。- 注册必须插入两个实体。

1.  另一种方式

    *   与第 1 点一样，但主要实体是“UserSecurity”，因此 id 将在其中，并且生成值的策略也将在其中。
    *   用户实体，将具有字段 id_user 与 OneToOne 到 UserSecurity 的关系。
2.  使用一个对象

    *   在一个实体中扩展 FOSUserBundle 并为其设置所有关系。
    *   我不喜欢这样，因为我需要一个没有安全选项的干净对象用户。

我认为 facebook 有很多用户实体实例（例如，每个朋友一个），但只有一个用户登录实例，所以如果我们将它用于所有内容将是错误的。

我想知道其他意见/建议。

我希望它没有被混淆（或者我没有混淆）。

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T19:17:01.330

只需扩展 FOS 用户类，无需`OneToOne`与孪生实体建立关系。

拆分更多实体会导致水合和持久性开销，但还会导致不需要的分离逻辑：您正在定义用户属性 [用户名、密码、名字、姓氏等]，它们都属于同一个实体。

如果您需要不同类型的用户，您应该考虑与其他实体组成子类，但这超出了您问题的范围。

# c++ - 将 std::string 转换为整数

> ID：12628428
> 
> 赞同：20
> 
> 时间：2012-09-27T19:06:04.747
> 
> 标签：c++, string, int, atoi

我正在尝试将`std::string`存储在 a 中的 a转换`std::vector`为整数并将其作为参数传递给函数。

这是我的代码的简化版本：

```
vector <string> record;
functiontest(atoi(record[i].c_str)); 
```

我的错误如下：

```
error: argument of type ‘const char* (std::basic_string<char, std::char_traits<char>, std::allocator<char> >::)()const’ does not match ‘const char*’ 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-09-27T19:37:11.810

使用 C++11：

```
int value = std::stoi(record[i]); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-27T19:07:39.517

```
record[i].c_str 
```

不一样

```
record[i].c_str() 
```

您实际上可以从错误消息中得到这一点：该函数需要 a `const char*`，但是您提供了一个类型的参数，`const char* (std::basic_string<char, std::char_traits<char>, std::allocator<char> >::)()const`它是一个指向`std::basic_string<char, std::char_traits<char>, std::allocator<char> >`返回 a`const char*`并且不带参数的类的成员函数的指针。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-09-27T19:11:41.273

使用标准库中的字符串流。它更干净，它更像是 C++ 而不是 C。

```
int i3;
std::stringstream(record[i]) >> i3; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-15T11:39:53.560

```
#include <boost/lexical_cast.hpp>

functiontest(boost::lexical_cast<int>(record[i])); 
```

# c# - 如何突出显示 C# 中的特定单词？

> ID：12628431
> 
> 赞同：2
> 
> 时间：2012-09-27T19:06:40.103
> 
> 标签：c#, asp.net, .net, highlight

我有一个弹出窗口供用户对视频发表评论。在人们输入消息的表单中，有一个亵渎过滤器。如果它在消息中，它可以正常工作并捕捉到单词。我的问题是，是否有一种方法可以突出显示捕获的单词，以便用户可以看到哪个单词被认为是亵渎的？

这是正在形成并通过过滤器的消息：

```
 if (context.Request["postform"] == "1")
    {
        ProfanityFilter filter = new ProfanityFilter();

        // IF NEITHER THE MESSAGE OR FIRSTNAME CONTAINS ANY PROFANITY IN THEM
        if (filter.containsProfanity(context.Request["message"]) == false && filter.containsProfanity(context.Request["first_name_submitter"]) == false)
        {
            videomessage myVideoMessage = new videomessage();

            myVideoMessage.video_id = context.Request["video_id"];
            myVideoMessage.first_name_submitter = context.Request["first_name_submitter"];
            myVideoMessage.last_initial_submitter = context.Request["last_initial_submitter"];
            myVideoMessage.message = context.Request["message"];
            myVideoMessage.status = "0";

            myVideoMessage.Save();

            return_success = "1";                
        }
        else
        {
            return_success = "0";
            return_errormessage = "<span>Contains profanity</span>";
        }                
    } 
```

这是 ProfanityFilter 类：

```
public class ProfanityFilter
{
    // ***********************************************************************
    // CONSTRUCTORS
    public ProfanityFilter()
    {
    }
    // ***********************************************************************

    // ************************************************************************
    // METHOD: containsProfanity
    public bool containsProfanity(string checkStr)
    {
        bool badwordpresent = false;

        string[] inStrArray = checkStr.Split(new char[] { ' ' });

        string[] words = this.profanityArray();

        // LOOP THROUGH WORDS IN MESSAGE
        for (int x = 0; x < inStrArray.Length; x++)
        {
            // LOOP THROUGH PROFANITY WORDS
            for (int i = 0; i < words.Length; i++)
            {
                // IF WORD IS PROFANITY, SET FLAG AND BREAK OUT OF LOOP
                //if (inStrArray[x].toString().toLowerCase().equals(words[i]))
                if( inStrArray[x].ToLower() == words[i].ToLower() )
                {
                    badwordpresent = true;
                    break;
                }
            }
            // IF FLAG IS SET, BREAK OUT OF OUTER LOOP
            if (badwordpresent == true) break;
        }

        return badwordpresent;
    }
    // ************************************************************************

    // ************************************************************************
    // METHOD: profanityArray()
    // METHOD OF PROFANITY WORDS
    private string[] profanityArray()
    {

        string[] words = { // ARRAY OF WORDS };
return words;
}
} 
```

有没有办法在中添加一些东西`else`来突出显示这个词？或者甚至只是将其颜色从黑色变为红色？

先感谢您！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-27T19:12:06.930

最直接的方法是用代表该词的标记替换所有出现的亵渎词，例如

```
<span class="profane">PUT_THE_WORD_HERE</span> 
```

在您的 CSS 中，包含一条规则

```
span.profane 
```

提供某种视觉指示。

由于您应该努力分离关注点，因此我不会在 ProfanityFilter 本身中进行此标记。一个巧妙的方法是让 ProfanityFilter 为它处理的每个字符串片段提供一个事件。该回调将提供有关该词是否被视为亵渎的指示符，以及片段本身。在事件处理程序中，您将通过附加每个事件的片段来重建原始短语，如果它是亵渎的，则用标记将其包围。该事件还必须接收空格和标点符号，以便可以重新创建完整的原始短语。

短语：

```
"This website sucks.  Really!" 
```

事件：

```
"This", profane: false
" ", profane: false
"website", profane: false
" ", profane: false
"sucks", profane: true
".  ", profane: false
"Really", profane: false
"!", profane: false 
```

如果您不想详细说明，ProfanityFilter 可以返回它找到的亵渎词列表，您可以对原始短语进行全局搜索和替换。

代替：

```
public bool containsProfanity(string checkStr) 
```

和

```
public class ProfanityResult
{
    public bool Profane { get; set; }
    public List<string> ProfanityWords { get; set; }
}

public ProfanityResult containsProfanity(string checkStr) 
```

**更新**

假设您使用第二个选项，您将执行以下操作：

```
string markedMessage = context.Request["message"];
if (result.Profane)
{
    foreach (string word in result.ProfanityWords)
    {
        markedMessage = markedMessage.Replace(
                           word, 
                           "<span class=\""profane\"">" + word + "</span>");
    }    
} 
```

这种方法效率不高，因为它会为每个替换创建一个新的字符串副本，但是如果您正在接受简短的评论或帖子，您将不会注意到效率低下。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T19:56:46.113

你可以这样做：

```
public string containsProfanity(string checkStr)
{
    // .....
    bool badwordpresent = false;

    // LOOP THROUGH WORDS IN MESSAGE
    for (int x = 0; x < inStrArray.Length; x++)
    {
        // LOOP THROUGH PROFANITY WORDS
        for (int i = 0; i < words.Length; i++)
        {
            if( inStrArray[x].ToLower() == words[i].ToLower() )
            {
                inStrArray[x] = "<span class=\"profane\">" + inStrArray[x] + "</span>";
                badwordpresent = true;
                break;
            }
        }
        // if (badwordpresent == true) break; <- removed
    }

    return badwordpresent ? String.join(" ", inStrArray) : null;
} 
```

编辑：如果没有找到坏词，则返回 null。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T19:42:50.800

通过少量重构，您可以实现这一点，但我会像[Eric J 的帖子](https://stackoverflow.com/a/12628503/282110)中那样进行更好的重构：

```
public class ProfanityFilter
{

  public bool containsProfanity(string checkStr, ref List<string> badWords)
  {
    // ...
    if (String.Compare(inStrArray[x], words[i], StringComparison.OrdinalIgnoreCase) == 0)
    {
      badwordpresent = true;
      badWords.Add(inStrArrary[x]);         
    }
    // ...
  }
} 
```

不是`else`处理亵渎的块，而是首先处理`message`and `first_name_submitter`，如果发现亵渎，则退出该方法。

```
List<string> badWords = new List<string>();
if (filter.containsProfanity(context.Request["message"], ref badWords))
{
   return_errormessage = string.Format("<span style=\"color:red\">Message contains the following bad word(s): {0}</span>", 
                          HttpUtility.HtmlEncode(String.Join(" ", badWords.ToArray()));
   return_success = "0";
   return; // break out of method
}

// save video message

return_success = "1"; 
```

# java - 其他用户如何使用我的 GCM 应用程序？

> ID：12628436
> 
> 赞同：1
> 
> 时间：2012-09-27T19:06:53.750
> 
> 标签：java, android, google-cloud-messaging

我开发了一个 GCM 应用程序，其中服务器应用程序通过 GCM 向 Android 应用程序发送通知。现在我想向用户提供这个应用程序，但是我该如何处理`SENDER_ID`和**API Key**。

如何让用户使用我的应用程序，让他们使用我的`SENDER_ID`和 API 密钥，或者这是如何完成的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T19:20:53.117

您可能不希望单个设备发送 GCM 消息。或者，让您的设备向您的服务器发送一条消息，说明应该发送一条 GCM 消息。

这样做的好处有很多：

*   您不必使用您的 Android 应用程序部署 GCM 服务器 JAR。
*   没有将发件人 ID 或 API 密钥传递给设备的混乱管理。
*   您可以使用允许在控制台中发布 GCM 消息的 IP 地址白名单（替代方案需要您将其完全打开）。
*   设备不需要处理`MulticastResult`对象和更新注册 ID（听起来像是您只想在服务器端完成的事情）。

# android - 如何为 Android 支持库启用 javadoc？

> ID：12628439
> 
> 赞同：42
> 
> 时间：2012-09-27T19:07:05.483
> 
> 标签：android, javadoc, android-support-library

当使用 Android 支持库进行兼容性并尝试查看 javadoc 时`FragmentTransaction`，我收到以下错误，因为没有关联的 javadoc 文件：

> android.support.v4.app.FragmentTransaction
> 
> 注意：该元素既没有附加源也没有附加 Javadoc，因此找不到 Javadoc。

支持库添加在项目属性的 Android Dependencies 项下，并显示 Javadoc 位置：（无）- 不可修改，如下所示。有什么解决方法吗？

![在此处输入图像描述](../Images/76af85f5d259003455ba35a08b3aba15.png)

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-09-27T20:17:47.263

我已经在包视图的 Android Dependencies 部分中将一个项目与 android-support-v4.jar 结合在一起。我有一堂课

```
public class CountriesFragment extends ListFragment {...} 
```

和进口

```
import android.support.v4.app.ListFragment; 
```

之上

我在文件夹中创建了一个`android-support-v4.jar.properties`文件`libs`。它包含以下行：

```
doc=c:\\[path-to-android-sdk]\\docs\\reference
src=C:\\[path-to-android-sdk]\\extras\\android\\support\\v4\\src 
```

如果不使用 Windows，您可能必须更改为未转义的正斜杠。

接下来右键单击项目，选择刷新，然后您将获得 javadoc 支持。您实际上并不需要 doc 条目 - src 条目已经包含 javadocs。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-27T19:17:04.400

**编辑：** 参考以下帖子：

[如何将 javadoc 或源附加到 libs 文件夹中的 jar？](https://stackoverflow.com/questions/9873152/how-to-attach-javadoc-or-sources-to-jars-in-libs-folder)

**添加：**

在`\android-sdk\extras\android\support\v4`您的 Android SDK 安装目录下，您将找到源代码`android-support-v4.jar`（即 src 目录），您可以使用[jar 命令](http://docs.oracle.com/javase/tutorial/deployment/jar/build.html)创建相同的 jar 文件。

希望能帮助到你 ：）

**添加：**

检查这篇文章[https://android-review.googlesource.com/#/c/35702/](https://android-review.googlesource.com/#/c/35702/)

根据这个

在项目的**libs**目录中创建一个名为**android-support-v4.jar.properties**的文件，并在其中添加以下行。

 **`src: <relative or absolute path to the source folder (or archive).>`

我尝试了这个解决方案，它对我有用。享受 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-24T11:33:57.983

在 Eclipse 中：转到文件菜单-> 打开文件-> 在工作区中浏览您的项目目录-> 选择 .classpath 文件 openit->

仅保留此文件中的以下条目并删除所有其他条目

```
`<?xml version="1.0" encoding="UTF-8"?>
<classpath>
<classpathentry kind="src" path="src"/>
<classpathentry kind="src" path="gen"/>
<classpathentry kind="lib" path="your dir path without space.../extras/android/support /v4/android-support-v4.jar"/>
<classpathentry kind="output" path="bin/classes"/>
 </classpath> 
```

保存文件。然后在 Eclipse-> Package Explorer -> 右键单击​​ Project -> Android tools -> Fix Project Properties。

如果您想再次交叉检查打开的 .classpath 文件并检查其中的更新，这会将所有必需的文件添加到 project 。

成功运行项目:)**

# shopify - 更新产品：http_status_message => 未找到，但产品确实存在

> ID：12628440
> 
> 赞同：2
> 
> 时间：2012-09-27T19:07:16.633
> 
> 标签：shopify

我在使用“PUT”方法更新产品时遇到问题。我得到了我读过的 404 意味着该产品不存在，尽管它确实存在。我已成功添加产品，所以我知道我的连接良好。

目前，我的范围已设置为尽我所能：*并在开发完成后将其退回。*

```
var $scope = "write_products,write_content,write_themes,write_customers,write_orders,write_script_tags,write_shipping"; 
```

该 api 将更新 url 显示为：**/admin/products/#123456789.json** [http://api.shopify.com/product.html#update](http://api.shopify.com/product.html#update)

我正在使用“ohShpify”PHP API 适配器。*我会在 GitHub 上向他们提问，但看起来他们的评论和 wiki 已关闭。* [https://github.com/cmcdonaldca/ohShopify.php/blob/master/shopify.php](https://github.com/cmcdonaldca/ohShopify.php/blob/master/shopify.php)

**对于那些有兴趣查看课程的人：**

```
<?php class ShopifyClient {
public $shop_domain;
private $token;
private $api_key;
private $secret;
private $last_response_headers = null;

public function __construct($shop_domain, $token, $api_key, $secret) {
    $this->name = "ShopifyClient";
    $this->shop_domain = $shop_domain;
    $this->token = $token;
    $this->api_key = $api_key;
    $this->secret = $secret;
}

// Get the URL required to request authorization
public function getAuthorizeUrl($scope, $redirect_url='') {
    $url = "http://{$this->shop_domain}/admin/oauth/authorize?client_id={$this->api_key}&scope=" . urlencode($scope);
    if ($redirect_url != '')
    {
        $url .= "&redirect_uri=" . urlencode($redirect_url);
    }
    return $url;
}

// Once the User has authorized the app, call this with the code to get the access token
public function getAccessToken($code) {
    // POST to  POST https://SHOP_NAME.myshopify.com/admin/oauth/access_token
    $url = "https://{$this->shop_domain}/admin/oauth/access_token";
    $payload = "client_id={$this->api_key}&client_secret={$this->secret}&code=$code";
    $response = $this->curlHttpApiRequest('POST', $url, '', $payload, array());
    $response = json_decode($response, true);
    if (isset($response['access_token']))
        return $response['access_token'];
    return '';
}

public function callsMade()
{
    return $this->shopApiCallLimitParam(0);
}

public function callLimit()
{
    return $this->shopApiCallLimitParam(1);
}

public function callsLeft($response_headers)
{
    return $this->callLimit() - $this->callsMade();
}

public function call($method, $path, $params=array())
{
    $baseurl = "https://{$this->shop_domain}/";

    $url = $baseurl.ltrim($path, '/'); 
    $query = in_array($method, array('GET','DELETE')) ? $params : array(); 
    $payload = in_array($method, array('POST','PUT')) ? stripslashes(json_encode($params)) : array();
    $request_headers = in_array($method, array('POST','PUT')) ? array("Content-Type: application/json; charset=utf-8", 'Expect:') : array();

    // add auth headers
    $request_headers[] = 'X-Shopify-Access-Token: ' . $this->token;

    $response = $this->curlHttpApiRequest($method, $url, $query, $payload, $request_headers);
    $response = json_decode($response, true);

    if (isset($response['errors']) or ($this->last_response_headers['http_status_code'] >= 400))
        throw new ShopifyApiException($method, $path, $params, $this->last_response_headers, $response);

    return (is_array($response) and (count($response) > 0)) ? array_shift($response) : $response;
}

private function curlHttpApiRequest($method, $url, $query='', $payload='', $request_headers=array())
{
    $url = $this->curlAppendQuery($url, $query);
    $ch = curl_init($url); 
    $this->curlSetopts($ch, $method, $payload, $request_headers); 
    $response = curl_exec($ch); 
    $errno = curl_errno($ch);
    $error = curl_error($ch);
    curl_close($ch);

    if ($errno) throw new ShopifyCurlException($error, $errno);
    list($message_headers, $message_body) = preg_split("/\r\n\r\n|\n\n|\r\r/", $response, 2);
    $this->last_response_headers = $this->curlParseHeaders($message_headers);

    return $message_body;
}

private function curlAppendQuery($url, $query)
{
    if (empty($query)) return $url;
    if (is_array($query)) return "$url?".http_build_query($query);
    else return "$url?$query";
}

private function curlSetopts($ch, $method, $payload, $request_headers)
{
    curl_setopt($ch, CURLOPT_HEADER, true);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
    curl_setopt($ch, CURLOPT_MAXREDIRS, 3);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, true);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
    curl_setopt($ch, CURLOPT_USERAGENT, 'HAC');
    curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 30);
    curl_setopt($ch, CURLOPT_TIMEOUT, 30);

    curl_setopt ($ch, CURLOPT_CUSTOMREQUEST, $method);
    if (!empty($request_headers)) curl_setopt($ch, CURLOPT_HTTPHEADER, $request_headers);

    if ($method != 'GET' && !empty($payload))
    {
        if (is_array($payload)) $payload = http_build_query($payload);
        curl_setopt ($ch, CURLOPT_POSTFIELDS, $payload);
    }
}

private function curlParseHeaders($message_headers)
{
    $header_lines = preg_split("/\r\n|\n|\r/", $message_headers);
    $headers = array();
    list(, $headers['http_status_code'], $headers['http_status_message']) = explode(' ', trim(array_shift($header_lines)), 3);
    foreach ($header_lines as $header_line)
    {
        list($name, $value) = explode(':', $header_line, 2);
        $name = strtolower($name);
        $headers[$name] = trim($value);
    }

    return $headers;
}

private function shopApiCallLimitParam($index)
{
    if ($this->last_response_headers == null)
    {
        throw new Exception('Cannot be called before an API call.');
    }
    $params = explode('/', $this->last_response_headers['http_x_shopify_shop_api_call_limit']);
    return (int) $params[$index];
}   } 
class ShopifyCurlException extends Exception { }
class ShopifyApiException extends Exception {
protected $method;
protected $path;
protected $params;
protected $response_headers;
protected $response;

function __construct($method, $path, $params, $response_headers, $response)
{
    $this->method = $method;
    $this->path = $path;
    $this->params = $params;
    $this->response_headers = $response_headers;
    $this->response = $response;

    parent::__construct($response_headers['http_status_message'], $response_headers['http_status_code']);
}

function getMethod() { return $this->method; }
function getPath() { return $this->path; }
function getParams() { return $this->params; }
function getResponseHeaders() { return $this->response_headers; }
function getResponse() { return $this->response; }
} 
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T19:58:37.787

`#`从您的产品 ID 中删除字符。

它在文档中，因为它是伪 ruby​​ 语法，因此`/admin/products/#{id}.json`转换为`/admin/products/123456789.json`.

# c# - Html 敏捷包实现

> ID：12628449
> 
> 赞同：2
> 
> 时间：2012-09-27T19:08:20.270
> 
> 标签：c#, html-agility-pack

我目前正在组装一个 C# 程序，我正在尝试在我的程序中实现谷歌翻译。我知道我必须在我的程序中使用 HTMLAgilityPack 才能工作。我找到[了这篇文章](https://stackoverflow.com/questions/846994/how-to-use-html-agility-pack)并[下载](http://htmlagilitypack.codeplex.com/)了 HTMLAgilityPack，但是当他说

1) 并构建 HTMLAgilityPack 解决方案。
2) 在您的应用程序中，在 HTMLAgilityPack\Debug（或 Realease）\bin 文件夹中添加对 HTMLAgilityPack.dll 的引用。

我不知道他要我做什么。到目前为止，我已经下载并解压了 HTMLAgilityPack 文件夹。在文件夹中，我有文件：
Net20、Net40、Net40-client、Net45、sl3-wp、sl4、sl4-windowsphone71、sl5、winrt45 如果有人能详细说明我需要做什么程序，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T19:23:39.163

你为什么不看API？这里有一个很好的例子......

[http://forum.codecall.net/topic/64790-c-tr​​anslator-using-google-api/](http://forum.codecall.net/topic/64790-c-translator-using-google-api/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T19:15:27.730

在 Visual Studio 中。在`Solution Explorer`名为的文件夹中`Reference`-> 右键单击​​ -> 添加引用从 hdd *.dll 中选择。

![VS 添加参考](../Images/e84be016b44e84f878aac3a08fb623ee.png)

之后，您将能够使用此库中的方法。

# magento - Magento：如何在观察者内部合并两个集合？

> ID：12628450
> 
> 赞同：2
> 
> 时间：2012-09-27T19:08:29.743
> 
> 标签：magento

我需要重新组织产品列表类别页面。我的产品中有一个*date_field*属性需要遵循此排名：

*   *date_field* >= today的产品首先出现
*   将其合并到*date_field* < 今天的产品

因此，我使用以下代码为*catalog_block_product_list_collection*调度程序创建了一个观察者：

```
$original_collection = clone $observer->getEvent()->getCollection();

$observer->getEvent()->getCollection()
                ->addAttributeToFilter('data_inicio', array('gteq' => date('Y-m-d')));

$collection2 = $original_collection
                ->addAttributeToFilter('data_inicio', array('lt' => date('Y-m-d')));

//and after I will merge both collections by adding each item from $collection2 into $observer 
```

但是当在*$collection2*上再次应用相同的过滤器时，它会引发以下错误：

> 您不能多次定义相关名称“_table_data_inicio_default”

只有过滤器的第一部分工作正常。有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T19:38:56.780

PHP 克隆的问题在于它不是*深度*克隆，因此某些资源是共享的，因此您看到的名称冲突。我发现最好的做法是在 SQL 中做尽可能多的工作，然后这些小问题很少出现。

```
$collection = $observer->getEvent()->getCollection();
// store old ordering
$orderBys = $collection->getSelect()->getPart(Zend_Db_Select::ORDER)
$collection->getSelect()->reset(Zend_Db_Select::ORDER);

// set first order part
$collection->addExpressionAttributeToSelect(
               'future',
               'IF({{data_inicio}}>="' . date('Y-m-d') . '",1,0)',
               'data_inicio')
           ->addAttributeToSort('future', 'desc');

// reinstate old ordering afterwards
foreach ($orderBys as $orderBy) {
    $collection->getSelect()
        ->order(is_array($orderBy) ? implode(' ', $orderBy) : $orderBy);
} 
```

在这里，创建了一个表达式`future`来比较日期，然后首先使用今天或更大的行进行排序。它不是按 排序的`data_inicio`。它可能会覆盖任何默认排序，并且 - 我尚未对此进行测试 - 可能会在用户排序之后应用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T20:58:40.417

- *>addExpressionAttributeToSelect()*是诀窍！我在排序时遇到了一些问题，因为在观察者之前还有其他字段被排序。所以我重新设置了它们...

我的代码：

```
$observer->getEvent()->getCollection()
    ->addExpressionAttributeToSelect(
        'future',
        'IF({{data_inicio}}="' . date('Y-m-d') . '",2,  IF({{data_inicio}}>="' . date('Y-m-d') . '",1,0))',
        'data_inicio')
    ->getSelect()->reset('order')->order(array('future desc', 'data_inicio asc')); 
```

我还在里面添加了另一个 IF 并添加了第二列进行排序。

再次感谢@clockworkgeek。

# clojure - Clojure 中多个函数调用的错误处理

> ID：12628452
> 
> 赞同：3
> 
> 时间：2012-09-27T19:08:35.000
> 
> 标签：clojure

我一直在努力寻找在 Clojure 中进行错误处理的正确方法，并且喜欢关于该主题的一些想法。

给出一个没有错误处理的例子：

```
(defn do-stuff
   (let [result1 (some-function) 
         result2 (other-function)
         result3 (yet-another-function)]
   {:status 200
    :body (foo result1 result2 result3)})) 
```

如果某处出现错误，应返回以下内容：

```
 {:status 4xx
  :body "Some descriptive error message, based on what went wrong"} 
```

如何确保 result1-3 在传递给 foo 之前有效？

如果 let 块中的某个函数内部出现问题（假设没有适当的方法来处理这些函数内部的错误），它们是否应该抛出异常以在 do-stuff 中处理？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T19:16:31.410

如果它们抛出异常，您可以在 let 之外捕获它们：

```
(defn do-stuff
  (try
   (let [result1 (some-function) 
         result2 (other-function)
         result3 (yet-another-function)]
   {:status 200
    :body (foo result1 result2 result3)})
   (catch MyException e
     {:status 4xx
      :body (str "Some descriptive error message, " (.getMessage e)}) 
```

# javascript - 请求全屏

> ID：12628453
> 
> 赞同：2
> 
> 时间：2012-09-27T19:08:42.777
> 
> 标签：javascript, ipad, html, fullscreen, ios6

有没有办法在 iOS6 的 ipad 上的浏览​​器中请求全屏显示？在每个桌面浏览器上实际上都非常容易，但我确实需要 safari 移动版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T19:59:34.923

回答我自己的问题：在 Safari iOS6 中请求全屏是不可能的。您可以使用一些元标记来获得更好的体验并隐藏地址栏。完成此操作后，您可以自行处理哪个元素应该全屏显示。

# regex - 如何将所有 url 请求重定向到 index.php/path/variables，除了以 img/ 开头的请求？

> ID：12628456
> 
> 赞同：0
> 
> 时间：2012-09-27T19:08:47.883
> 
> 标签：regex, mod-rewrite, rewrite, apache

我有一些简单的 RewriteRules 将所有路径变量重定向到 /index.php。但现在我希望为所有 /img/(.*) 网址例外。

这是一个片段。请指教。

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
RewriteRule ^(.*)$ http://%1/$1 [R=301,L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule (.*) index.php/$1 [L] 
```

我尝试`RewriteRule ^img/(.*) img/index.php/$1 [L]`在最后一条包罗万象的行上方添加，但它不起作用。

我追求的结果是这样的：

```
url      --> script / path variables
====================================
/abc/def --> /index.php/abc/def
/img/abc --> /img/index.php/abc 
```

你能为我指出正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T20:13:53.867

您不仅需要将它添加到最后一条 catchall 行的上方，还需要保留 catchall 所需的条件，并同样将它们复制到您自己的`/img/`路由中：

```
RewriteEngine On

RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
RewriteRule ^(.*)$ http://%1/$1 [R=301,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^img/(.*) img/index.php/$1 [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule (.*) index.php/$1 [L] 
```

# javascript - 所有设备上的旋转和调整

> ID：12628457
> 
> 赞同：1
> 
> 时间：2012-09-27T19:08:50.887
> 
> 标签：javascript, html, web-applications, css, media-queries

我遇到的问题是：我正在使用 HTML5、JavaScript 和 CSS3 制作应用程序。我的想法是它可以在任何计算机和平板电脑上使用（之后可能还会包括智能手机），并且它必须适合任何尺寸。我尝试使用“媒体查询”，但是当我旋转设备（从水平到垂直，反之亦然）时不合适。我尝试使用此功能，但最终没有工作：

```
/*SCRIPT PARA TAMANIO DE LA VENTANA*/ 
    window.onload=function() 
    {    
        dameElTamanioDePantalla(); 
    }

    function dameElTamanioDePantalla () 
    {
        setTimeout(function() { window.scrollTo(0,1); }, 10); 
        var alto = document.height; 
        var ancho = document.width; 
        document.getElementById('barraSuperior').style.width = "100%"; 
        document.getElementById('barraSuperior').style.height = ((alto*0.05).toString()).concat("px"); 
        document.getElementById('barraInferior').style.width = "100%"; 
        document.getElementById('barraInferior').style.height = ((alto*0.05).toString()).concat("px"); 
        document.getElementById('contenidoPrincipal').style.width = "95%"; 
        document.getElementById('contenidoPrincipal').style.height = ((alto*0.9).toString()).concat("px");
    }

    /*SCRIPT QUE DETECTA Y CAMBIA EL MEDIA QUERY SI CAMBIA DE LANDSCAPE A PORTRAIT*/

    detectOrientation();
window.onorientationchange = detectOrientation;
function detectOrientation(){
    if(typeof window.onorientationchange != 'undefined'){
        if ( orientation == 0 ) {
             //Do Something In Portrait Mode
            dameElTamanioDePantalla();
        }
        else if ( orientation == 90 ) {
             //Do Something In Landscape Mode
            dameElTamanioDePantalla();
        }
        else if ( orientation == -90 ) {
             //Do Something In Landscape Mode
            dameElTamanioDePantalla();
        }
        else if ( orientation == 180 ) {
             //Do Something In Landscape Mode
            dameElTamanioDePantalla();
        }
    }
} 
```

# sql - 按 A 列分组，但比较 B 列

> ID：12628459
> 
> 赞同：5
> 
> 时间：2012-09-27T19:08:56.417
> 
> 标签：sql, sql-server, sql-server-2008, tsql

在过去的几个小时里，这个让我难过，在这个阶段我想我需要一些帮助......

我需要比较单个表中的多个组，并确定列 B 中列出的项目匹配的位置。例如： -

```
Col A...............Col B
John................Apple
John................Orange
John................Banana
Mary................Orange
Mary................Strawberry
David...............Apple
David...............Orange
David...............Banana 
```

我希望返回“John”和“David”，因为它们在 col B 中的项目匹配。希望这是有道理的！提前致谢！G

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T19:43:16.320

这是此解决方案的[SQL Fiddle](http://sqlfiddle.com/#!3/24435/1/0)，因此您可以自己使用它。

```
 select A.ColA Person1, B.ColA Person2
    from (select ColA, count(ColB) CountBs
          from tbl
          group by ColA) G1
    join (select ColA, count(ColB) CountBs
          from tbl
          group by ColA) G2 on G1.ColA < G2.ColA
                           and G1.CountBs = G2.CountBs
    join tbl A on A.ColA = G1.ColA
    join tbl B on B.ColA = G2.ColA and A.ColB = B.ColB
group by A.ColA, B.ColA, G1.CountBs
having count(distinct A.ColB) = G1.CountBs

-- subqueries G1 and G2 are the same and count the expected colB's per colA
-- G1 and G2 are joined together to get the candidate matches
--    of ColA with the same number of ColB's
-- we then use G1 and G2 to join into tbl, and further join
--    between A and B where the ColB's match
-- finally, we count the matches between A and B and make sure the counts match
--    the expected count of B's for the pairing 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T21:04:22.447

所有在 b 列中有一个项目与一个人匹配的人（我假设您正在寻找可能不仅仅是 2 个匹配项？）：

```
SELECT tableName.ColA, tableName.ColB
FROM (SELECT ColB
    FROM tableName
    GROUP BY ColB
    HAVING COUNT(1) > 1) fruits
INNER JOIN tableName ON fruits.ColB = tableName.ColB
ORDER BY tableName.ColB, tableName.ColA 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T01:35:18.397

ColA1 与 ColA2 匹配，如果：
计数 (ColA1) = 计数 (ColA2) = 计数 (ColA1 x ColA2)

这种方法试图优化查询速度。

物化原始计数，因为它被多次使用并且可以声明一个 PK。
（CTE 只是语法并被评估）

where RA.rawcount = RB.rawcount 只允许在计数相等时评估连接。并且查询计划表明它是首先执行的。

```
create table #rawcount
(ColA varchar(50) not null primary key, rawcount int  not null)  
insert into #rawcount
select   [ColA], COUNT(*) as  [rawCount]
from     [tbl]
group by [ColA]
order by [ColA]

select a.ColA as ColA1, b.ColA as ColA2, COUNT(*) [matchcount]
from tbl A
join tbl B
 on  a.ColB = b.ColB 
 and a.ColA < b.ColA
join #rawcount RA 
 on  RA.ColA = A.ColA
join #rawcount RB 
 on  RB.ColA = B.ColA
where RA.rawcount = RB.rawcount  -- only evaluate if count same
group by a.ColA, b.ColA, RA.rawcount
having COUNT(*) = RA.rawcount 
```

# netbeans - Netbeans 7.2/Jdk 7u7 捆绑包 - javafx failure..jfxrt.jar 问题

> ID：12628466
> 
> 赞同：1
> 
> 时间：2012-09-27T19:09:21.487
> 
> 标签：netbeans, javafx-2, java-7, netbeans-7.2

我刚刚完成了从 oracle 下载的 netbeans 7.2/JavaFx2.2 SDK 包的全新安装。我的旧代码都不会编译。这是我收到的错误：（我知道代码是好的 - 考虑排除坏代码）。奇怪的是，与 Netbeans 发行版捆绑在一起的 javafx 示例程序运行良好。我已经在这个问题上浪费了一天。类路径似乎设置得很好。java -version 返回“...（构建 1.7.0_07）

如果有人可以一步一步地给我，那就太棒了。

请帮忙！

将 2 个文件复制到 C:\Pro JavaFx Apress Code\Pro JavaFX 2\8727_ch05code\StarterApp\dist\lib 检测到 JavaFX Ant API 版本 1.2 C:\Pro JavaFx Apress Code\Pro JavaFX 2\8727_ch05code\StarterApp\nbproject\jfx-impl .xml:939：错误：jfxrt.jar 需要在类路径上，用于 -createbss 和 -createJar，但没有 -nocss2bin

谢谢，马克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T20:45:36.087

在 NetBeans 中：

1.  打开你的`Project Properties`
2.  去`Build | Packaging`
3.  确保未选中*二进制编码 JavaFX CSS 文件*选项。

css 文件的二进制编码只是一个小的性能优化，即使在生产版本中，它可能并不重要（例如，html webapps 中使用的 css 都不是二进制编码的），所以我不会担心留下二进制未选中编码复选框。

我相信您看到的错误只是 NetBeans 和 Java 版本组合中的错误。最有可能的是，当 JavaFX 默认放置在 Java 类路径（可能是 jdk7u10）上时，NetBeans 中 CSS 的二进制编码将重新开始工作，因为 JavaFX 运行时 jar (jfxrt.jar) 将被找到。

# iphone - GPUImage ChromaKeyFilter 正在抠出我的整个图像

> ID：12628467
> 
> 赞同：0
> 
> 时间：2012-09-27T19:09:22.283
> 
> 标签：iphone, ios, image-processing, gpuimage

刚刚接触到每个人似乎都在谈论的这个 GPUImage 框架。

无论如何，我正在尝试做一个过滤器链 - 前两个过滤器在链接在一起时会产生预期的结果，但是当我添加第三个时，整个图像被设置为 0 alpha

我的代码：

```
-(UIImage*)doFilter:(int)aVal{

GPUImagePicture *stillImageSource = [[GPUImagePicture alloc] initWithImage:self];
GPUImageLuminanceThresholdFilter *lumFilterOne = [[GPUImageLuminanceThresholdFilter alloc] init];
lumFilterOne.threshold = (float)aVal/255;

GPUImageFalseColorFilter *colorAFilter = [[GPUImageFalseColorFilter alloc] init];
colorAFilter.firstColor = (GPUVector4){0.5f, 0.5f, 0.5f, 1.0f};
colorAFilter.secondColor = (GPUVector4){1.0f, 1.0f, 1.0f, 1.0f};

GPUImageChromaKeyFilter *chromaFilter = [[GPUImageChromaKeyFilter alloc] init];
[chromaFilter setColorToReplaceRed:1.0f green:1.0f blue:1.0f];
chromaFilter.thresholdSensitivity = 0.0f;

[stillImageSource addTarget:lumFilterOne];
[stillImageSource processImage];

[lumFilterOne addTarget:colorAFilter];
[stillImageSource processImage];

[colorAFilter addTarget:chromaFilter];
[stillImageSource processImage];

return [chromaFilter imageFromCurrentlyProcessedOutput];
} 
```

正如我上面所说，当我更换这个

```
[colorAFilter addTarget:chromaFilter];
[stillImageSource processImage];

return [chromaFilter imageFromCurrentlyProcessedOutput]; 
```

用这个（移除色度键过滤器）

```
return [colorAFilter imageFromCurrentlyProcessedOutput]; 
```

我得到了预期的结果 - 输入图像阈值化为所选阈值，生成的黑色区域变为灰色，白色保持白色。

一旦我引入 ChromaKey 滤镜，整个图像就会被抠出。

我希望只把白色调出来。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T20:15:17.030

我从来没有弄清楚这一点，但我正在回答我自己的问题，因为我最终只是编写了自己的着色器来完成我需要的一切。干杯。

# jquery-mobile - 带有标题的 JQueryMobile 弹出窗口显示后退按钮

> ID：12628468
> 
> 赞同：1
> 
> 时间：2012-09-27T19:09:23.580
> 
> 标签：jquery-mobile, popup

我有一个调用弹出窗口的按钮：

```
<a id="clearAll" href="#confirmDelete" data-rel="popup" data-position-to="window" data-role="button" data-mini="true"  data-theme="c" data-transition="pop" >Clear Error</a>

<div data-role="popup" id="confirmDelete" data-overlay-theme="a" data-add-back-btn="false" data-theme="c" style="max-width: 400px;" class="ui-corner-all" >
    <div data-role="header" data-theme="a" class="ui-corner-top" data-add-back-btn="false">
        <h1>Clear Log?</h1>
    </div>
    <div data-role="content" data-theme="d" class="ui-corner-bottom ui-content">
        <h3 class="ui-title">Are you sure you want to delete all the entries in this log?</h3>
        <p>This action cannot be undone.</p>
        <div class="ui-grid-a">
            <div class="ui-block-a">
                <a href="#" data-role="button"data-theme="b">Delete</a>  
            </div>
            <div class="ui-block-b">
                <a href="#" data-role="button" data-rel="back" data-theme="c">Cancel</a>    
            </div>
        </div>
    </div>
</div> 
```

如果调用此页面的链接不包含 data-ajax="false"，则即使使用 data-add-back-btn="false"，弹出窗口也会包含一个后退按钮。如何摆脱按钮？我确实想要主页上的后退按钮，而不是弹出窗口上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-01T05:56:32.443

好的@Christine，就像我评论的那样，弹出窗口甚至为弹出窗口内的标题提供了不同类型的后退/关闭按钮。但解决方案很简单：将以下内容添加到您的自定义 css 文件中（确保在 jquerymobile css 文件之后引用该文件）：

```
div[data-role="popup"] div[data-role="header"] .ui-btn {
    display: none;
} 
```

这应该隐藏所有弹出窗口标题栏中的所有按钮。随心定制！

# php - 是否有一个程序可以查看 LESS 和 PHP/HTML 文件并删除未使用的 CSS

> ID：12628470
> 
> 赞同：0
> 
> 时间：2012-09-27T19:09:30.533
> 
> 标签：php, html, css, less

随着几个 CSS 引导程序和样板的出现，是否没有一个程序可以抓取某个目录（元素、类、id）中的所有标签并从一个较少的文件中删除所有未使用的内容并编译为 CSS 文件？这不会节省大量空间吗？如果您知道，请告诉我。

编辑：我不是在谈论实时运行它或其他任何东西。对于我们这些预编译的人来说更多

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T19:38:21.430

我不知道，但我所做的是将事情组织在单独的文件中。这样我就可以只汇总特定视图所需的内容。我倾向于不太具体，所以我确定任何给定页面上都有未使用的规则。我可能拥有的一个基本示例是：

无基数

```
// this is the sheet for the global layout and is needed for every page

@import "reset.less";
@import "util.less"; // these are all mixins for grids, clearfix, gradients, etc..
@import "typography.less"; // fontface, basic typo grid
@import "brand.less"; //mixins for colors, brand specific sprites, etc..
@import "components.less"; // these are rules for components that might be used anywhere

/* rules for global layout and default element styles follow */ 
```

视图名.less

```
// this is the view/page specific sheet
@import "util.less"; // these are all mixins for grids, clearfix, gradients, etc..
@import "typography.less"; // fontface, basic typo grid
@import "brand.less"; //mixins for colors, brand specific sprites, etc..
@import "viewname.components.less"; // set of component styles used only for this view 
```

viewname.components.less

```
// this is a "roll up" sheet that imports different componets used in this specific view
// this way i can each component separate but still use them in different views.
@import "somewidget.component.less";
@import "someotherwidget.component.less"; 
```

所以基本上我只包含 2 个样式表作为基础样式表和一个用于视图的样式表。在交付之前，所有内容都在服务器端进行编译和缩小

# c# - 以编程方式在 OpenXML 中的 Excel 中填充一行

> ID：12628477
> 
> 赞同：1
> 
> 时间：2012-09-27T19:10:01.143
> 
> 标签：c#, excel, openxml

我需要通过 OpenXML 在 excel 行中添加一些额外的单元格。但是，下面的代码似乎并没有起到作用。希望有任何帮助以使这项工作正常进行。

```
private Row PadRow(Row row, int p)
{
    try
    {
        int currentcount = p - row.Descendants<Cell>().Count<Cell>();
        for (int count = 0; count < currentcount; count++)
            row.Append(new Cell() { DataType = CellValues.String, CellValue = new CellValue(" ") });
    }
    catch (Exception ex)
    {
        throw ex;
    };
    return row;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T21:13:13.007

找到了一个很好的解决方法。

[http://lateral8.com/articles/2010/3/5/openxml-sdk-20-export-a-datatable-to-excel.aspx](http://lateral8.com/articles/2010/3/5/openxml-sdk-20-export-a-datatable-to-excel.aspx)

```
 /// <summary>
        /// Gets the Excel column name based on a supplied index number.
        /// </summary>
        /// <returns>1 = A, 2 = B... 27 = AA, etc.</returns>
        private string getColumnName(int columnIndex)
        {
            int dividend = columnIndex;
            string columnName = String.Empty;
            int modifier;

            while (dividend > 0)
            {
                modifier = (dividend - 1) % 26;
                columnName =
                    Convert.ToChar(65 + modifier).ToString() + columnName;
                dividend = (int)((dividend - modifier) / 26);
            }

            return columnName;
        }
        private Cell createTextCell(int columnIndex, int rowIndex,  object cellValue)
        {
            Cell cell = new Cell();

            cell.DataType = CellValues.InlineString;
            cell.CellReference = getColumnName(columnIndex) + rowIndex;

            InlineString inlineString = new InlineString();
            Text t = new Text();

            t.Text = cellValue.ToString();
            inlineString.AppendChild(t);
            cell.AppendChild(inlineString);

            return cell;
        }

        public void ProcessDCTRows(IEnumerable<Row> dataRows, SharedStringTable sharedString)
        {
            try
            {
                //Extract the information for each row 
                foreach (Row row in dataRows)
                {
                    IEnumerable<String> cellValues;
                    if (row.Descendants<Cell>().Count<Cell>() < 234)
                    {
                        int lastcolindex = row.Descendants<Cell>().Count<Cell>(); 
                        int rowindex = Convert.ToInt32(row.RowIndex.ToString());
                        int currentcount = 234 ;
                        for (; lastcolindex < currentcount; lastcolindex++)
                        {
                            row.AppendChild( createTextCell(lastcolindex,rowindex," " ));
                        }

                    }

.   . //add processing code here

} 
```

# mysql - 如何在多个表中插入数据

> ID：12628478
> 
> 赞同：1
> 
> 时间：2012-09-27T19:10:03.453
> 
> 标签：mysql, database

我已经查看了关于 SO 的其他问题，但我似乎无法理解它是如何工作的。我正在建立一个枪支在线商店，该商店将对枪支和相关物品进行分类。我有两个问题-

**问题 1**

在这个问题中，我有一个添加产品表单，其中产品分为两部分；第一个是主要属性，第二个是次要属性。这是测试表的SS：

![在此处输入图像描述](../Images/c3bfe8cadf8745cfdaf8033c9ca3c7d4.png)

例如，某些枪支具有该型号的八种不同变体。它的枪管长度、枪托样式、子弹口径大小和其他功能可能不同。因此，我将在页面顶部显示 PRIMARY ATTRIBUTES，并在图表中列出所有列出 SECONDARY ATTRIBUTES 的子模型。

主要属性是该类别中的每个产品肯定具有的属性。次要属性是某些产品将具有的属性。因此，当填写并提交表单时，我希望将数据一次性插入所有表中。这是我的表：

![在此处输入图像描述](../Images/64388741674597a3bb538dceba3d4302.png)

**问题 2**

我的 SECONDARY ATTRIBUTES 表的创建方式可以一次添加一个属性。在上面的屏幕截图中，有八个辅助属性，我会创建一个循环，每次循环插入数据八次吗？希望这是有道理的，如果没有，我会更详细地介绍。

*注意，我使用的是 PHP/MySQL。*

**编辑**

我听取了大家的建议，并尝试使用这些建议来设计我的数据库。请看一下，看看我所做的是否有效。我正在学习 one->one、one->many、many->many 等简单概念……我看到的唯一可能是 one->one 的是制造商的产品。这看起来正确吗？我花了很多时间试图使它成为最好的，我感谢每个人的反馈/批评。以下是我的新架构：

![在此处输入图像描述](../Images/1d5496ff93fc397612d4cdc6852d0946.png)

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T19:16:00.377

1.  您不能“一次性”插入到多个表中，但您可以做下一个最好的事情：将插入视为单个事务的一部分，这样如果出现问题，任何已完成的工作部分都将是退出。

2.  单个语句可以插入多条记录：[http ://www.electrictoolbox.com/mysql-insert-multiple-records/](http://www.electrictoolbox.com/mysql-insert-multiple-records/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T19:16:01.067

MySQL 支持多行插入：

```
INSERT INTO table
( col1, col2 )
VALUES
( 1, 'blah'),
( 2, 'foo'),
( 3, 'foobar') 
```

您还可以使用 MySQLi 或 PDO，使用参数绑定，准备插入，然后多次执行 (http://us3.php.net/manual/en/mysqli.prepare.php)

# c# - 拆分字符串并获取特定元素

> ID：12628485
> 
> 赞同：0
> 
> 时间：2012-09-27T19:10:56.777
> 
> 标签：c#

在 VBA 中，split 函数可用于拆分字符串并使用以下命令在一行中获取特定元素

```
'Get 4th element of split directly
spElement = Split(someString,",")(3) 
```

在 C# 中有类似的方法吗？我见过像这样使用 LINQ Last() 的例子

```
spElement = someString.Split(',').Last(); 
```

但是是否可以按数字获取拆分数组的实际元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T19:11:52.033

`[]`您可以在 c#中使用数组中的特定位置

```
spElement = someString.Split(',')[3]; 
```

有关更多信息，请查看MSDN 上的此[数组教程](http://msdn.microsoft.com/en-us/library/aa288453%28v=vs.71%29.aspx)

# ruby-on-rails - 尝试在 Ubuntu 上开始使用 Rails

> ID：12628490
> 
> 赞同：1
> 
> 时间：2012-09-27T19:11:14.697
> 
> 标签：ruby-on-rails, ruby, rvm, ubuntu-12.04

我在我的 Ubuntu 机器上运行 Rails 时遇到了一些困难。我希望这个脚本可以轻松安装： [https ://github.com/rkjha/RailsOnUbuntu/blob/master/rails-installer.sh](https://github.com/rkjha/RailsOnUbuntu/blob/master/rails-installer.sh)

但是我遇到了很多问题。首先是我的 Ubuntu 发出的 rvm 搞砸了，所以我运行了这个解决方案： [在 Ubuntu 上安装 RVM](https://stackoverflow.com/questions/8402827/installing-rvm-on-ubuntu)

但是，我仍然对以下看似愚蠢的问题感到头疼：

./rails-installer.sh：第 38 行：/home/meawoppl/.rvm/scripts/rvm：没有这样的文件或目录

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T20:30:05.133

为什么不遵循[RVM 站点安装说明](https://rvm.io/rvm/install)：

```
curl -L get.rvm.io | bash -s stable --rails 
```

这将安装最新的：

*   转速
*   红宝石
*   导轨

它会暂时停止显示要执行的命令 - 但没有太多工作要做，只需将其复制/粘贴到其他终端即可。

RVM2 将进一步简化上述步骤，使其全部自动化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T01:13:46.627

我已经在 Ubuntu 上多次使用[Rails Ready脚本，它非常棒。](https://github.com/joshfng/railsready)非常有用和推荐。

# java - Java 和 C++ 中的 HMAC 摘要不同

> ID：12628496
> 
> 赞同：-1
> 
> 时间：2012-09-27T19:11:41.680
> 
> 标签：java, c++, cryptography, hmac, hmacsha1

我正在尝试集成 2 个系统，一个使用 C++，另一个使用 Jva 来生成 HMAC 摘要。

以下是 C++ 代码：-

```
static const GUID seedGUID = { 0xd6fecf42, 0x2d1e, 0x4db9, { 0xa2, 0x73, 0xeb,
0x34, 0x13, 0xe, 0xa1, 0x37 } };
shaCheckSum.AddData((char*)&seedGUID, sizeof(seedGUID));
shaCheckSum.AddData((char*)szSeed, uiSeedLen);
shaCheckSum.AddData((char*)szStr, uiStrLen);
shaCheckSum.FinalDigest(szResult); 
```

生成的 HMAC 为 9B2D06D314018A5134EA1CF54D5A9F20CECC473965BD9801AAC9D4868EF39D38

szSeed 是 0.4726005982213448 szStr 是 test@test.com

以下是Java代码：-

```
 final String HMAC_SHA1_ALGORITHM = "HmacSha256";
    final String secret = "D6FECF42-2D1E-4db9-A273-EB34130EA137";
    final SecretKeySpec signingKey = new SecretKeySpec(secret.toLowerCase().getBytes(),HMAC_SHA1_ALGORITHM);
    final Mac mac = Mac.getInstance(HMAC_SHA1_ALGORITHM);
    mac.init(signingKey);
    mac.update("0.4726005982213448".getBytes());
    mac.update("test@test.com".getBytes());
    final byte[] rawHmac = mac.doFinal();
    for (final byte element : rawHmac)
    {
       result += Integer.toString((element & 0xff) + 0x100, 16).substring(1);
    }
    System.out.println( result); 
```

结果 HMAC 为 f91b07623fea970b5f9d1f5d83f850b3a6077c0e80f42b574a01d861143eac09

两者的 HMAC 是不同的。

如何解决这个问题？

感谢您的关注！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T20:05:47.197

在 C++ 版本中，您传递的是`seedGUID`while 在 Java 版本中的字节，您传递的是 guid 字符串表示的二进制编码。您应该在 Java 版本中创建一个字节数组：

```
byte[] signingKey = new byte[]{ 0xd6, 0xfe, 0xcf, 0x42, 0x2d, 0x1e, 0x4d, 0xb9, 0xa2, 0x73, 0xeb, 0x34, 0x13, 0xe, 0xa1, 0x37 };
mac.init(signingKey); 
```

您还必须确保对加密的字符串使用相同的编码。您的 C++ 版本可能使用 ASCII 字符，因此您必须指定数据的字符集：

```
mac.update("0.4726005982213448".getBytes("US-ASCII"));
mac.update("test@test.com".getBytes("US-ASCII")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T22:20:04.590

除了 Lee 所写的之外，我认为您在 C++ 版本中根本没有使用[HMAC](http://www.ietf.org/rfc/rfc2104.txt)。在我看来，您使用的是 SHA-？`FinalDigest()`直接保护消息摘要（如方法调用所暗示的那样）。SHA-256 是HMAC 计算的*一部分*，但仅仅执行 SHA-256 肯定不会产生相同的结果。

# javascript - 更改页面 D3/JS 上的 Shapes 位置

> ID：12628500
> 
> 赞同：2
> 
> 时间：2012-09-27T19:11:51.953
> 
> 标签：javascript, html, svg, d3.js

```
<!DOCTYPE html>
<html>
<head>
<title>Practice</title>
<script type="text/javascript" src="http://d3js.org/d3.v2.js"></script>
</head>
<body> 
```

将 div 链接到 js

```
<div id="svgpathSVGdata"></div> 
```

D3.js 的开始

```
<script type="text/javascript">

    var divElem = d3.select("#svgpathSVGdata"); 
```

设置画布

```
 var svgcanvas = divElem.append("svg:svg")
        .attr("width", 800)
        .attr("height", 800); 
```

目前它是颠倒的，我也希望将它移到更中央

```
 svgcanvas.append("svg:path")
        .attr("d","M -200,0 A200,200 0 0,0 500,0 L -200,0") 
        .style("stroke-width", 2)
        .style("stroke", "steelblue")
        .style("fill", "none");
</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T19:52:26.413

您可以应用`transform`属性来移动路径并将其翻转到正确的一侧：

```
var divElem = d3.select("#svgpathSVGdata");
var svgcanvas = divElem.append("svg:svg")
        .attr("width", 800)
        .attr("height", 800);
svgcanvas.append("svg:path")
        .attr("d","M -200,0 A200,200 0 0,0 500,0 L -200,0") 
        .attr("transform", "translate(220,400) scale(1, -1)")
        .style("stroke-width", 2)
        .style("stroke", "steelblue")
        .style("fill", "none");​ 
```

[http://jsfiddle.net/QALqg/](http://jsfiddle.net/QALqg/)

# c++ - c++向量推回错误

> ID：12628507
> 
> 赞同：2
> 
> 时间：2012-09-27T19:12:28.420
> 
> 标签：c++, vector, fstream, push-back

每次我尝试使用 Visual C++ 2008 进行调试时都会出错

```
#include <iostream>
#include <vector>
#include <string>
#include <fstream>

using namespace std;

void load(const char* filename) {
    vector <string*> vec;
    ifstream in(filename);
    char buffer[256];
    while(!in.eof()) {
        in.getline(buffer, 256);
        vec.push_back(new std::string(buffer));
    }
}

int main(int argc, char* args[]) {
    cin.get();
    return 0;
} 
```

得到这个错误

```
Compiling...
main.cpp
Linking...
main.obj : error LNK2019: unresolved external symbol __imp___CrtDbgReportW referenced in function "public: __thiscall std::_Vector_const_iterator,class std::allocator > *,class std::allocator,class std::allocator > *> >::_Vector_const_iterator,class std::allocator > *,class std::allocator,class std::allocator > *> >(class std::basic_string,class std::allocator > * *,class std::_Container_base_secure const *)" (??0?$_Vector_const_iterator@PAV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@V?$allocator@PAV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@2@@std@@QAE@PAPAV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@1@PBV_Container_base_secure@1@@Z)
E:\blabla\Debug\test2.exe : fatal error LNK1120: 1 unresolved externals 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T19:24:19.107

看起来好像您正在构建项目的调试版本，但您正在链接 C-Runtime DLL 的非调试版本。你可以检查这个：

```
[Project] -> Properties -> C/C++ --> Code Generation --> Runtime Library 
```

运行时库应列为：“多线程调试 DLL (/MDd)”，用于调试构建。

您实际上应该发现项目构建得很好，因为“发布”在发布版本`CrtDbgReportW`中没有被调用`std::vector`，因此不需要在链接时找到该符号。

# c# - 在 XML-RPC.NET 中，如何处理直到运行时才知道类型的返回值？

> ID：12628510
> 
> 赞同：2
> 
> 时间：2012-09-27T19:12:42.140
> 
> 标签：c#, .net, xml-rpc, xml-rpc.net

我在 C# 中使用库 XML-RPC.NET 在我的服务器上调用 XML-RPC 方法。当一切正常时，该方法返回一个字符串，但当发生错误时，它返回一个 XmlRpcStruct。

当我得到不同于我在方法签名中指定的返回类型时，XML-RPC.NET 引发了异常：

```
string login(string username, string password); 
```

异常消息：“响应包含预期字符串的结构值”

在 XML-RPC.NET 的文档中它是这样说的：

“我如何指定直到运行时才知道类型的数据？

有时，直到运行时才知道参数、返回值或结构成员的类型。在这种情况下，应使用 System.Object 数据类型。对于返回值，实际类型可以在运行时确定并适当处理。”

所以我将返回类型更改为对象，现在它可以工作了。但是现在我不知道如何处理返回值。如果它是 XmlRpcStruct 类型，我不想将它转换为我的错误类。否则我把它当作一个字符串。如何将其转换为我的错误类？XML-RPC-NET 是否有转换方法或我可以调用的方法？

```
public interface Proxy : IXmlRpcProxy
{
    [XmlRpcMethod("login")]
    object login(string username, string password);
}

// When the login method fails I get an XmlRpcStruct that has a
// key "status" with a string value. I'd like to cast the returned
// XmlRpcStruct to my Error class. How?
public class Error : XmlRpcStruct
{
    public string status;
} 
```

然后当我调用该方法时：

```
object ret = proxy.login("admin", "1234");
Type t = ret.GetType();

if (t == typeof(XmlRpcStruct))
{
    // This will set err to null even though ret is not null
    // How do I convert it?
    Error err = ret as Error;
}
else
{
    string result = (string)ret;
} 
```

有没有更简单的方法来做到这一点？我可以将我的方法设置为字符串的返回类型，然后尝试/捕获方法调用，但随后我丢失了错误中返回的状态消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T20:29:46.617

如果您的 Error 类要保存一个 XmlRpcStruct 变量怎么办：

```
public class Error
{
    public string status;
    public XmlRpcStruct xmlstr;
} 
```

然后您可以将您的 XmlRpcStruct 分配给 Error 对象的变量：

```
object ret = proxy.login("admin", "1234");
Type t = ret.GetType();

if (t == typeof(XmlRpcStruct))
{
    Error err = new Error();
    err.xmlstr = (XmlRpcStruct)ret;
}
else
{
    string result = (string)ret;
} 
```

而且您仍然可以通过 Error 类的变量访问原始 XmlRpcStruct 而不会丢失它到 try 语句。通过继承可能有更好的方法来实现这一点，但这是一个快速修复。

# ios - iOS发送带有位置对象的短信

> ID：12628518
> 
> 赞同：1
> 
> 时间：2012-09-27T19:13:36.990
> 
> 标签：ios, xcode, object, text, sms

我一直在试图弄清楚如何发送包含您的位置的 SMS 消息。我希望它是类似于您在 iphone 上分享您的位置时的位置对象 - 而不仅仅是直接地址。有没有办法做到这一点？我查看了苹果提供的[参考资料](http://developer.apple.com/library/ios/#DOCUMENTATION/MessageUI/Reference/MFMessageComposeViewController_class/Reference/Reference.html#//apple_ref/occ/cl/MFMessageComposeViewController)，但是我没有看到任何向身体添加特殊对象的方法。看起来您只能添加文本。

任何有关这方面的信息将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T19:24:35.473

SMS 只是通过载波电波传输的文本内容（字符串），除非您使用应用程序可以识别和解析的格式发送 SMS，否则您无法将实际对象嵌入到正文中

消息中的链接、地址和时间等内容通过纯文本发送，然后 Apple 的消息应用程序对其进行解析并添加相关的上下文选项（例如超链接，以便您可以在 Safari 中打开链接以及日历中的日期和地图中的地址等）。无法将您自己的上下文格式选项添加到股票消息应用程序

# css - CSS - 固定位置导致 Mac 上的字体变粗（Safari、Chrome）

> ID：12628523
> 
> 赞同：0
> 
> 时间：2012-09-27T19:13:50.953
> 
> 标签：css, google-chrome, safari

我注意到我的 Mac 上的 Chrome 和 Safari 都有一些奇怪的行为：

*   山狮
*   Safari 6.0 (8536.25)
*   铬 21.0.1180.89

该页面是一个简单的固定 div，其中包含一些文本，我添加了第二个 div，它在 5 秒内执行简单的 CSS 翻译，因此您可以轻松看到差异。我的网络应用程序使用 CSS 过渡来显示和隐藏部分，而在它执行此操作时，屏幕的大部分似乎发生了变化。

我已将示例代码和 .mov 文件放在服务器上，因此希望您会看到相同的问题：

[http://physicaltable.com/index.html](http://physicaltable.com/index.html)和[http://physicaltable.com/CSS_JIGGLE_TEST_2.mov](http://physicaltable.com/CSS_JIGGLE_TEST_2.mov)

奇怪的粗体不会出现在 Windows 7 上的 Chrome 中，也不会出现在 iPad 2 (v5.1.1) 上

有没有其他人见过这种类型的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:49:13.690

我意识到这不是一个很好的答案，但我发现这主要是因为元素的渲染。如果元素需要使用硬件或任何其他类型的图形渲染，它基本上会获取文本的图像，对其进行调整，然后重新渲染文本（如果可以的话）。

“拍照”是失去大胆的地方，因为浏览器/显示器/某些东西正在添加使文本看起来不错的天赋。当然，它看起来并不那么好，但这只是我。

我注意到除了全白/黑以外的不同颜色，它的行为可能不同。我希望随着浏览器和渲染的进步，事情会变得顺利。

# javascript - onclick 动态创建输入元素

> ID：12628526
> 
> 赞同：0
> 
> 时间：2012-09-27T19:14:00.127
> 
> 标签：javascript, html, forms

嘿伙计们，所以当我单击具有 javascript 功能的特定单选按钮时，我正在 div 中创建输入元素。

它工作得很好，但是当我第一次加载表单时，输入元素不会出现在 div 中，因为单选按钮尚未“单击”，尽管其中一个单选按钮是默认选中的。

基本上，如果它被选中，我希望它们出现，所以在身体负载时我必须调用一个函数来检查我想要默认的单选按钮，并且我必须手动显示如果我点击单选按钮会出现的相应输入元素。

这似乎是我想要实现的目标的愚蠢工作，有什么想法吗？

```
 <body onload="startup()">
        <input type="radio" name="type" onclick="createInput()" id="testradio" value="test">test</input>

 <div id="area">
 </div>
</body>

function startup()
{
    document.getElementById("testradio").checked = true
    createInput();
}

function createInput()
{
    var testinput = "<input name='options' value='testing' type='checkbox'>test<br>"
    document.getElementById("area").innerHTML = testinput 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T19:30:15.387

您应该设置默认值，然后调用事件。（说onchange）

像这样的东西：

```
document.getElementById('elID').onchange(); 
```

然后，这将使您的事件侦听器触发，就好像在 ui 中更改的值不在代码中一样。

# html - 在父悬停时更改子 div 的字体颜色

> ID：12628530
> 
> 赞同：16
> 
> 时间：2012-09-27T19:14:06.087
> 
> 标签：html, css

我有一个问题，我不确定是否可能，但我想我会尝试问。

假设我有三个 div：

```
<div id="parent_div">

   <div id="child_div_1">Blue</div>

   <div id="child_div_2">Red</div>

</div> 
```

如果 parent_div 中的所有文本都设置为黑色，当父 div 悬停在上方时，我将如何将字体颜色分别设置为蓝色和`child_div_1`红色？`child_div_2`

抱歉，如果这有点令人困惑，但是有没有办法最好只使用 CSS 来做到这一点？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-09-27T19:15:50.467

```
#parent_div:hover #child_div_1 {
   color: blue;
}
#parent_div:hover #child_div_2 {
   color: red;
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-27T19:16:03.670

只需根据`:hover`父级的状态定位相关的子元素：

```
/* defaults */
#parent_div div {
    color: #000; /* or whatever... */
}

/* hover rules */

#parent_div:hover #child_div_1 {
    color: blue;
}
#parent_div:hover #child_div_2 {
    color: red;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/32Ewa/)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-27T19:17:42.637

在父元素上使用`:hover`伪类：

```
#parent_div { color: black; }

#parent_div:hover #child_div_1 { color: blue; }
#parent_div:hover #child_div_2 { color: red; } 
```

演示：http: [//jsfiddle.net/Guffa/M3WsW/](http://jsfiddle.net/Guffa/M3WsW/)

# sql - SQL 需要按多列对数据进行分组

> ID：12628534
> 
> 赞同：-2
> 
> 时间：2012-09-27T19:14:44.637
> 
> 标签：sql, sql-server, group-by

我正在尝试将数据从 table1 转换为 table2

**表格1**

```
UserId  Date1
1       9/26/2012
2       9/26/2012
1       9/26/2012
1       9/26/2012
2       9/26/2012
2       9/27/2012
2       9/27/2012
1       9/27/2012 
```

**表2**

```
UserId  Date1       recCount
1       9/26/2012  3
2       9/26/2012  2
1       9/27/2012  2
2       9/27/2012  1 
```

这显然不起作用，但不知道从这里去哪里：

```
SELECT 
    UserId,
    Date1,
    Count(*)
FROM table1
GROUP BY UserId, Date1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T19:30:18.303

看起来您只显示包含时间的列中的日期。从 SQL Server 2008 开始，您可以使用 CAST AS DATE 来删除时间部分。

```
SELECT 
    UserId,
    CAST(Date1 as date) Date1,
    Count(*) RecCount
FROM table1
GROUP BY UserId, CAST(Date1 as date) 
```

如果`transforming into`你的意思是把数据放到另一个表中，那么

```
INSERT table2
SELECT 
    UserId,
    CAST(Date1 as date),
    Count(*)
FROM table1
GROUP BY UserId, CAST(Date1 as date) 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-27T19:31:08.880

原始帖子回答了我提出的问题。我的查询中有一个不属于那里的 where 语句。

# json - 如何做一个 JSON 网络服务

> ID：12628538
> 
> 赞同：1
> 
> 时间：2012-09-27T19:15:13.380
> 
> 标签：json, web-services

我需要创建一个将在 iOS、Windows Phone 和 Android 应用程序中使用的网络服务。

我在 Internet 上找到了很多教程，但没有人使用真正的 JSON 文件。我有一个例子说明我的意思：

[https://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=true&screen_name=tiste&count=2](https://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=true&screen_name=tiste&count=2)

使用 Twitter 之类的 Web 服务更好，还是我们可以只使用 PHP 中的标头？如果是第一个，我该怎么做？

最后，JSON 是最适合 Web 服务通信的选项吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T19:32:20.103

大多数当代 Web 应用程序都是围绕 api 构建的——它们被称为以 api 为中心。推特就是其中之一。您不是唯一需要为移动平台创建 Web 前端和应用程序的人。拥有所有这些平台的 api 将为您节省大量时间。

这个领域现在发展很快。有许多框架（客户端和服务器端）可供选择。由于您没有告诉我们您将使用哪种技术/编程语言，所以我只能建议您在 google 上搜索一个以 api 为中心的框架或一个 rest 框架。如果您扩展您的问题，我将给出更具体的答案。

同时，您可以阅读以下一般文章...

*   [http://net.tutsplus.com/tutorials/php/creating-an-api-centric-web-application/](http://net.tutsplus.com/tutorials/php/creating-an-api-centric-web-application/)
*   [http://en.wikipedia.org/wiki/REST](http://en.wikipedia.org/wiki/REST)
*   [http://en.wikipedia.org/wiki/OAuth](http://en.wikipedia.org/wiki/OAuth)
*   [http://blog.programmableweb.com/2011/09/23/short-list-of-restful-api-frameworks-for-php/](http://blog.programmableweb.com/2011/09/23/short-list-of-restful-api-frameworks-for-php/)

# javascript - RequireJS 和原型继承

> ID：12628539
> 
> 赞同：2
> 
> 时间：2012-09-27T19:15:16.137
> 
> 标签：javascript, requirejs, prototypal-inheritance

我遇到了使用 RequireJS 和原型继承的问题。这是我的模块：

```
define(function () {
  function Module(data) {
    this.data = data;
  }

  Module.prototype.getData = function () {
    return this.data;
  };

  Module.prototype.doSomething = function () {
    console.log(this.data);
    console.log(this.getData());
  };

  return Module;

  Module.prototype.callFunction = function (fn) {
    if (this[fn]) {
      console.log('call');
      Module.prototype[fn]();
    }
  };
}); 
```

然后我实例化模块，如下所示：

```
var module = new Module({ name: 'Marty' });
module.getData(); // returns { name: 'Marty' }
module.data; // returns { name: 'Marty' }
module.callFunction('doSomething') // returns undefined on the first (and second) console log 
```

中的`console.log`s`module.doSomething()`总是返回`undefined`。我是否误解了原型继承如何与 RequireJS 一起工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T23:11:33.447

事实证明，我错误地编写了 callFunction 方法。正确的方法是：

```
Module.prototype.callFunction = function (fn) {
  if (this[fn] && typeof this[fn] === "function") {
    this[fn]();
  }
}; 
```

问题是使用`Module.prototype`而不是`this`. 哎呀。

# java - 隐藏@ModelAttribute 变量不出现在 URL 中？春季MVC

> ID：12628541
> 
> 赞同：3
> 
> 时间：2012-09-27T19:15:19.643
> 
> 标签：java, spring, spring-mvc

我正在使用 Spring MVC 3，并且我有以下控制器

```
@RequestMapping(value="FileUploadForm",method=RequestMethod.GET)
public String showForm(ModelMap model){
    UploadForm form = new UploadForm();
    model.addAttribute("FORM", form);
    return "FileUploadForm";
}

@RequestMapping(value="FileUploadForm",method=RequestMethod.POST)
public ModelAndView processForm(@ModelAttribute(value="FORM") UploadForm form,BindingResult result){
    if(!result.hasErrors()){
        FileOutputStream outputStream = null;
        String filePath = System.getProperty("java.io.tmpdir") + "/" + form.getFile().getOriginalFilename();
        try {
            outputStream = new FileOutputStream(new File(filePath));
            outputStream.write(form.getFile().getFileItem().get()); 
            outputStream.close();
            System.out.println(form.getName());

             return new ModelAndView(new RedirectView("success?Filepath="+filePath, true, true, false));
        } catch (Exception e) {
            System.out.println("Error while saving file");
            return new ModelAndView("FileUploadForm");
        }

    }else{
        return new ModelAndView("FileUploadForm");
    }

} 
```

该控制器获取文件路径并用于爆炸

```
@RequestMapping(value="success")
public String blasta(@ModelAttribute("Filepath") String filepath, Model model){
    Blast sb = new Blast("somepath");
    String[] blastIt = sb.blast("somepath", filepath);
    String newLine = System.getProperty("line.separator");
    ArrayList<Object> result = new ArrayList<>();

    for (int i = 5; i < blastIt.length; i++) {
        if(blastIt[i].startsWith("Lambda")){
            break;
        } else {
            seila.add(blastIt[i]);
            System.out.println(blastIt[i]);
        }
        model.addAttribute("RESULT", result);

    }      
    File f1 = new File(filepath);
    f1.delete();
    return "success";

} 
```

一切正常，但我仍然在 url 中获得文件路径。

```
http://localhost:8081/Ambase/success?Filepath=filePath 
```

如果可能的话，我想要这种方式

```
http://localhost:8081/Ambase/success 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-04-08T05:46:26.380

尝试将此代码添加到**servlet-config.xml**

```
<mvc:annotation-driven ignoreDefaultModelOnRedirect="true" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T05:21:00.680

为避免此问题，您应该使用`RedirectAttributes`. 它将 filePath 的值添加到重定向视图参数中，您可以在控制器中获取它**blasta**。

为此，您需要在控制器函数**processForm**中再添加一个参数。在所有参数的末尾添加`RedirectAttributes attributes`，然后在 RedirectView 语句上方添加以下行。

```
attributes.addFlashAttribute("Filepath",filePath); 
```

然后你可以在**blasta**控制器函数里面的ModelMap中得到这个属性。

希望这对您有所帮助。干杯。

# php - 致命错误：不能将字符串偏移量用作数组

> ID：12628544
> 
> 赞同：0
> 
> 时间：2012-09-27T19:15:30.117
> 
> 标签：php, mysql, arrays, offset

> 致命错误：不能在第 12 行的 C:\xampp\htdocs\includes\categories\categories.php 中使用字符串偏移作为数组

```
$categories[$parent][] = $row; 
```

**类别.php**

```
 <?php

$sql = "SELECT catid, catname, parentid FROM categories";
$res = mysql_query($sql);
while ($row = mysql_fetch_assoc($res)) {
    $parent = intval($row['parentid']);
    if (!isset($categories[$parent])) {
        $categories[$parent] = array();
    }
    $categories[$parent][] = $row;
}
    ?>
    <table border="0" cellpadding="10" cellspacing="0">
    <tr>
        <td valign="top">
    <?php
    $category_string = "";
    function build_categories_options($parent, $categories, $level) {
        global $category_string;
        if (isset($categories[$parent]) && count($categories[$parent])) {
            $level .= " - ";
            foreach ($categories[$parent] as $category) {
                $opt_value = substr($level.$category['catname'],3);
                $category_string .= '<option value=""></option><option value="'.$category['catid'].'">'.$opt_value.'</option>';
                build_categories_options($category['catid'], $categories, $level);
            }
            $level = substr($level, -3);
        }
        return $category_string;
    }
    $category_options = build_categories_options(0, $categories, '');
    $category_options = '<select class="chosen" name="categories" id="categories">'.$category_options.'</select>';
    echo $category_options; 
    ?>
</td> 
```

**在我插入带有类别的帖子后，此错误将显示？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T19:24:19.417

我看不到在哪里`$categories`初始化，但我敢打赌当你进入`while`循环时它不是一个数组，这就是你收到错误的原因。尝试为您的`while`循环执行此操作：

```
// initialize $categories to make sure it is an array
$categories = array();
while ($row = mysql_fetch_assoc($res)) {
    $parent = intval($row['parentid']);
    $categories[$parent][] = $row;
} 
```

您不需要显式初始化`$categories[$parent]`...这将在您调用时自动完成`$categories[$parent][] = $row;`。我们知道它会从空白开始，因为我们在循环之前从一个空数组开始。

# java - netbeans中的编码结构

> ID：12628548
> 
> 赞同：1
> 
> 时间：2012-09-27T19:15:36.590
> 
> 标签：java, netbeans

这是 Java 和 Netbeans 新手提出的问题。在将其发布到此处之前，我已经在 google 中进行了很多搜索。

我正在使用 netbeans 创建一个 gui 应用程序。在标准书籍中，Java 编码的结构被建议为，

```
class className{
  field names

  constructor(){

  }

  method1(){

  }

  method2(){

  }

  main method(){

  }
} 
```

在 Netbeans 中，

```
class ClassName{

   constructor(){
        initComponents();
   }

   initComponents(){

   }

   //autogenerated code for methods related to swing actions

    action1(){

    }

    action2(){

    }        

   main method(){

   }

  field Names;

} 
```

我的问题是，我在哪里写 method1() 和 method2()？我应该将字段名放在末尾还是顶部？- 无法编辑自动生成的字段名。所以，我是否必须写我在顶部或底部声明的字段名称。我知道任何地方都可以。但我想确保我在正确的地方对它们进行编码。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T19:24:18.840

有些如果这是个人喜好。有些人喜欢课程结束时的字段，我个人喜欢一开始的字段。

我倾向于首先放置构造函数，然后是方法，并允许自动生成的代码位于底部，我将内部类放在最后。

但这只是我。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T19:32:01.483

事实上，你可以在任何你认为最好的地方写你的方法。

对于 Swing 应用程序，Netbeans 将使用您刚刚展示的这种相当笨拙的类结构 - 实例变量、常量等位于类的底部。

就个人而言，我更喜欢将常量放在顶部，然后是变量、构造函数、公共、受保护、默认和私有方法（按此顺序） - 然后是任何内部类（如果有的话）。

必须有一种方法可以更改 Netbeans 类模板 - 但我从未深入研究过 Netbeans 的类结构模板设置 - 仅用于标题的注释。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T19:28:38.777

我不确定 Netbeans 是如何工作的，但如果它在您的文件中生成代码，也许您应该将自己的函数存储在其他地方，这样您就可以自由选择您的结构，而无需让 Netbeans 占用您文件的一部分。

# html - 检查浏览器过去是否允许地理定位服务？

> ID：12628549
> 
> 赞同：2
> 
> 时间：2012-09-27T19:15:38.930
> 
> 标签：html, browser, geolocation

目前，我可以确定用户是否允许或拒绝浏览器定位服务。但是如何检测用户的浏览器之前是否允许该权限？我不想再次向用户显示“设置消息”。

```
$("#updateLocation").click(function(e){
      e.preventdefault;
      navigator.geolocation.getCurrentPosition(allowLocation,deniedLocation);
      return false;
});

function allowLocation(position){
// codes
}

function deniedLocation(){
// codes
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T19:56:28.560

您可以通过使用 HTML5 **localstorage**来简单地做到这一点，它允许您创建键值对：

```
$("#updateLocation").click(function(e){
      e.preventdefault;
      if(localStorage.location == undefined){
            var ip-located-geo-location = navigator.geolocation.getCurrentPosition();
            // code to get ip-located geolocation
            var user_defined_location = prompt("Please enter your location", ip-located-geo-location);
            localStorage.location = user_defined_location;
      }
      else{
            // use localStorage.location
      }
      return false;
}); 
```

如果该位置之前没有保存，那么它会请求 user_defined_location，同时显示 ip-located-position，从而更新 localStorage，这样用户下次就不必根据自己的偏好重新设置位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-03T09:39:43.670

我也面临同样的问题。而且，经过我的搜索和实验，我终于找到了答案

您可以添加此 JS 代码：

```
navigator.permissions.query({name:'geolocation'}).then(function(result) {
  // Will return ['granted', 'prompt', 'denied']
  console.log(result.state);
}); 
```

然后，您可以根据需要使用您的自定义代码。

来源：[https ://developer.mozilla.org/en-US/docs/Web/API/Navigator/permissions](https://developer.mozilla.org/en-US/docs/Web/API/Navigator/permissions)

# iphone - 如何在 Xcode 中重叠音频文件并为 iPhone 组合？

> ID：12628554
> 
> 赞同：5
> 
> 时间：2012-09-27T19:15:57.773
> 
> 标签：iphone, xcode, audio, overlay

所以我有两个音频文件，格式相同，长度可能不同。我想合并这些文件（将音频从一个叠加到另一个，而不是在末端加入它们）。

假设我有两个文件：

1.  音频文件 A，长度 30 秒，大小 220k
2.  音频文件 B，长度 45 秒，大小 300k

我想要一个组合音频文件：

1.  音频文件 C，长度 45 秒，大小 300k（我知道这可能更多）

感谢大家的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T21:41:26.970

这是我在我的应用程序中所做的。

```
- (void) setUpAndAddAudioAtPath:(NSURL*)assetURL toComposition:(AVMutableComposition *)composition
{
    AVURLAsset *songAsset = [AVURLAsset URLAssetWithURL:assetURL options:nil];

    AVMutableCompositionTrack *track = [composition addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:kCMPersistentTrackID_Invalid];
    AVAssetTrack *sourceAudioTrack = [[songAsset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0];

    NSError *error = nil;
    BOOL ok = NO;

    CMTime startTime = CMTimeMakeWithSeconds(0, 1);
    CMTime trackDuration = songAsset.duration;
    //CMTime longestTime = CMTimeMake(848896, 44100); //(19.24 seconds)
    CMTimeRange tRange = CMTimeRangeMake(startTime, trackDuration);

    //Set Volume
    AVMutableAudioMixInputParameters *trackMix = [AVMutableAudioMixInputParameters audioMixInputParametersWithTrack:track];
    [trackMix setVolume:0.8f atTime:startTime];
    [self.audioMixParams addObject:trackMix];

    //Insert audio into track
    ok = [track insertTimeRange:tRange ofTrack:sourceAudioTrack atTime:CMTimeMake(0, 44100) error:&error];
}

- (IBAction)saveRecording
{
     AVMutableComposition *composition = [AVMutableComposition composition];
        audioMixParams = [[NSMutableArray alloc] initWithObjects:nil];

    //IMPLEMENT FOLLOWING CODE WHEN WANT TO MERGE ANOTHER AUDIO FILE
    //Add Audio Tracks to Composition
    NSString *URLPath1 = [[NSBundle mainBundle] pathForResource:@"mysound" ofType:@"mp3"];
    NSString *URLPath2 = [[NSBundle mainBundle] pathForResource:@"mysound2" ofType:@"mp3"];
    NSURL *assetURL1 = [NSURL fileURLWithPath:URLPath1];
    [self setUpAndAddAudioAtPath:assetURL1   toComposition:composition];

    NSURL *assetURL2 = [NSURL fileURLWithPath:URLPath2];
    [self setUpAndAddAudioAtPath:assetURL2   toComposition:composition];

    AVMutableAudioMix *audioMix = [AVMutableAudioMix audioMix];
    audioMix.inputParameters = [NSArray arrayWithArray:audioMixParams];

    //If you need to query what formats you can export to, here's a way to find out
    NSLog (@"compatible presets for songAsset: %@",
           [AVAssetExportSession exportPresetsCompatibleWithAsset:composition]);

    AVAssetExportSession *exporter = [[AVAssetExportSession alloc]
                                      initWithAsset: composition
                                      presetName: AVAssetExportPresetAppleM4A];
    exporter.audioMix = audioMix;
    exporter.outputFileType = @"com.apple.m4a-audio";
    NSURL *exportURL = [NSURL fileURLWithPath:exportFile];
    exporter.outputURL = exportURL;

// do the export
        [exporter exportAsynchronouslyWithCompletionHandler:^{
            int exportStatus = exporter.status;
            NSError *exportError = exporter.error;

            switch (exportStatus) {
                case AVAssetExportSessionStatusFailed:

                    break;

                case AVAssetExportSessionStatusCompleted: NSLog (@"AVAssetExportSessionStatusCompleted"); 
                    break;
                case AVAssetExportSessionStatusUnknown: NSLog (@"AVAssetExportSessionStatusUnknown"); break;
                case AVAssetExportSessionStatusExporting: NSLog (@"AVAssetExportSessionStatusExporting"); break;
                case AVAssetExportSessionStatusCancelled: NSLog (@"AVAssetExportSessionStatusCancelled"); break;
                case AVAssetExportSessionStatusWaiting: NSLog (@"AVAssetExportSessionStatusWaiting"); break;
                default:  NSLog (@"didn't get export status"); break;
            }
        }];
 } 
```

请注意，我前一段时间确实这样做了，您可能需要稍微使用它才能使其正常工作。但它确实在某一时刻起作用。如果您遇到问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-22T07:41:29.250

如果在所选资产中未找到音频资产轨道。您可以使用此语句检查特定视频的声音。

```
if([[songAsset tracksWithMediaType:AVMediaTypeAudio] firstObject]==NULL)
{
    NSLog(@"Sound is not Present");
}
else
{
    NSLog(@"Sound is Present");
    //You will initalise all things
    AVAssetTrack *sourceAudioTrack = [[songAsset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0];

} 
```

# php - 选择一列的 DISTINCT，但其他列正常返回

> ID：12628559
> 
> 赞同：0
> 
> 时间：2012-09-27T19:16:09.033
> 
> 标签：php, sql, distinct

我的问题很容易解释：

我需要一个为列选择 DISTINCT 的查询，但我也需要选择其他列，通常没有 DISTINCT。任何人都可以向我展示这样的查询作为示例吗？

它应该是一个通用查询！

谢谢。

```
$sql = 'SELECT DISTINCT user_id FROM ' . DONATION_SECURITY_TABLE . " 
        $sql_where 
        ORDER BY payment_status ASC, user_id ASC"; 
```

我还需要让这个查询选择其他东西，不仅仅是 user_id 不同，我还需要选择：donation_id、payment_status、pending_reason、txn_id、mc_gross 和金额。

样品表：

```
donation_id    user_id    mc_gross    payment_status    txn_id (has UNIQUE index)
1              4          5.00        Completed         g54g4
2              5          10.00       Pending           54yhh
3              4          6.00        Pending           54yhg
4              7          15.00       Completed         fdhgf 
```

*查询应返回：user_id 的 DISTINCT，不同的*user_id 的 mc_gross 的总和，最新的 payment_status（对于 user_id = 4 将返回 Pending）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T19:45:08.573

这应该有效：

```
select t1.user_id, 
       t1.donation_id, 
       t1.payment_status, 
       t1.pending_reason,
       t1.txn_id, 
       t2.sum_gross, 
       t1.amount
from the_table t1
join (
   select max(donation_id) as max_id, 
          sum(mc_gross) as sum_gross,
          user_id
   from the_table
   group by user_id
) t2 on t2.max_id = t1.donation_id
    and t2.user_id = t1.user_id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T20:19:01.750

试试这个：

```
select T2.USER_ID, T2.TOTAL_MC_GROSS, T2.LAST_DONATION_ID, 
T1.PAYMENT_STATUS, T1.TXN_ID, T1.PENDING_REASON   from
MY_TABLE T1 inner join
(
select USER_ID, SUM(MC_GROSS) AS TOTAL_MC_GROSS , 
MAX(DONATION_ID) AS LAST_DONATION_ID
from MY_TABLE 
group by USER_ID
) 
T2
on T1.DONATION_ID = T2.DONATION_ID 
```

# javascript - 如何显示来自其他网站的内容（在同一域上）？

> ID：12628560
> 
> 赞同：-2
> 
> 时间：2012-09-27T19:16:10.977
> 
> 标签：javascript, php, jquery, wordpress

我在我的网站[http://thedripple.com](http://thedripple.com)上使用 wordpress 。我只想在我的主站点的帖子上显示[http://thedripple.com/products （安装了另一个 wordpress）的帖子中的表格！](http://thedripple.com/products)我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T19:27:00.243

因为它们可能在同一个域上：

```
<div id="posts"></div>

$('#posts').load('/products/hp-envy-spectre-xt #wp-table-reloaded-id-2-no-1'); 
```

您需要以某种方式拉入 css 以使其正确显示。 [例子：](http://jsfiddle.net/Yg6wF/)

# c++ - 跳过 59GB fastq 文件的前半部分来处理后半部分：逐行读取，还是 fgetpos？

> ID：12628563
> 
> 赞同：0
> 
> 时间：2012-09-27T19:16:27.520
> 
> 标签：c++, genome, fgetpos, large-data

我有 2 ~59GB 的“.fastq”格式的文本文件。fastq 文件是从测序仪读取的基因组学文件。每 4 行是一个新的读取，但这些行的大小是可变的。

文件大小大约为 59GB，大约有 211M 读取——这意味着，给或取，大约 211M*4 = 844M 行。我正在使用的程序 Bowtie 目前能够执行以下选项：

“--跳过 105M --qupto 105M”

这本质上意味着“跳过前 105M 读取，只处理下一个 105M 读取”。通过这种方式，您可以分解文件的处理。问题是，它跳过的方式非常慢。它只是像往常一样读取前 105M 读取，但不处理它们。然后，一旦达到给出的读取值，它就会开始比较。

我想知道我是否可以使用 C/C++ 的 fsetpos 之类的东西将位置设置为文件的中间[或任何地方]，我意识到这可能会将我放在一行中间的某个位置，然后从那里找到开始第一次完整读取开始处理，而不是等待它读取大约 422M 行，直到它到达它需要去的地方。有没有人有在这么大的文件上做 fsetpos 的经验，并且知道性能是否比它目前的表现更好？

谢谢——尼克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T19:47:11.223

是的，您可以使用 C++ 定位到文件的中间。

对于大文件，性能通常比读取数据要好。

一般来说，在文件中定位的过程：

1.  请求读取文件的目录条目。
2.  搜索目录以找到文件位置的轨道和扇区。
3.  注意：某些文件系统可能具有大文件的目录扩展名，因此需要读取更多数据。
4.  在下一次读取时，告诉硬盘驱动器转到给定的磁道和扇区，然后读入数据。

您正在节省所有先前数据通过通信端口进入内存（或被忽略）的时间。

# c++ - Gtk+ 信息栏的问题

> ID：12628572
> 
> 赞同：0
> 
> 时间：2012-09-27T19:17:09.733
> 
> 标签：c++, gtk, gtkmm

当我的程序未连接到数据库时，我正在尝试将信息栏添加到对话框中。但是，如果我关闭对话框并再次打开它，则每次有一个新按钮时，信息栏都会显示。这是我的代码：

**窗口.hpp**

```
class Window: public Gtk::Window {
private:
/// more things
  Gtk::InfoBar info;
  Gtk::Container* infoBarContainer;
  Gtk::Label info_label;
protected:
  void onConnectedBody(void);
  void onNotConnectedBody(void);
  void onInfoBarResponse(int response);
  void onMenuDbConnect(void);
  void onMenuDbDisconnect(void);
public:
  /// more things...
}; 
```

**窗口.cpp**

```
Window::Window(
) :
 infoBarContainer(0),
 info_label("")
{
  // more things
  info.add_button(Gtk::Stock::OK, 0);
  infoBarContainer = dynamic_cast<Gtk::Container*>(info.get_content_area());
  if( infoBarContainer ) infoBarContainer->add(info_label);      
}

Window::onMenuDbConnect(){
  if( controller->Connected() ) {
    onConnectedBody();
  } else {
    onNotConnectedBody();
  }
}

Window::onConnectedBody(){
 Gtk::Dialog dialog("Connected to database",true,true);
  dialog.set_resizable( false );
  dialog.set_has_separator(true);
  Gtk::Button close;
  Gtk::VBox* vbox = dialog.get_vbox();
  Gtk::Label label;
  label.set_markup("<b>Already connected.</b>"); 
  vbox->pack_start(label,false,false);
  close.set_label("Close");
  close.signal_clicked().connect(sigc::mem_fun(*this,&Window::onButtonClose));
  dialog.set_size_request(250,80);
  vbox = 0;
  close.set_can_default( true );
  dialog.add_action_widget(close,1);
  close.grab_default();

  dialog.show_all_children();
  dialog.run();    
}
Window::onNotConnectedBody(){
 Gtk::Dialog dialog("Connect to database",true,true);
 dialog.set_resizable( false );
 dialog.set_has_separator(true);
 Gtk::Button close;
 Gtk::VBox* b = dialog.get_vbox();

 info.signal_response().connect(sigc::mem_fun(*this,&Window::onInfoBarResponse) ); 
 info_label.set_text("Remember to fill all fields");
 b->pack_start(info,Gtk::PACK_SHRINK);

 Gtk::Label label;
 label.set_markup("<b>Database:</b>");
 Gtk::Label label_host;
 label_host.set_markup("<b>Host:</b>");
 Gtk::Label label_user;
 label_user.set_markup("<b>User:</b>");  
 Gtk::Label label_pass;
 label_pass.set_markup("<b>Pass:</b>");  

 label.set_justify(Gtk::JUSTIFY_LEFT);
 label_host.set_justify(Gtk::JUSTIFY_LEFT);
 label_user.set_justify(Gtk::JUSTIFY_LEFT);
 label_pass.set_justify(Gtk::JUSTIFY_LEFT);

 entry.set_max_length(10);
 entry.set_text("Figures");
 entry_host.set_text("localhost");
 label.set_markup("<b>Database:</b>");

 b->pack_start(label,false,false);
 b->pack_start(entry,false,false);
 b->pack_start(label_host,false,false);
 b->pack_start(entry_host,false,false);
 b->pack_start(label_user,false,false);
 b->pack_start(entry_user,false,false);

  b->pack_start(label_pass,false,false);
 b->pack_start(entry_pass,false,false);

 close.set_label("Connect");
 close.signal_clicked().connect(sigc::mem_fun(*this,&Window::onButtonDbConnect));
 close.set_can_default( true );
 dialog.add_action_widget(close,1);
 close.grab_default();
 dialog.set_size_request(250,250);
 dialog.show_all_children();
 dialog.run();
}
void Window::onInfoBarResponse(int response) {
  info.hide();
} 
```

所以，我想要的是在我进入 onMenuDbConnect 并且尚未连接到数据库时显示信息栏。如果已连接，则不会显示任何信息栏。我的程序的其他组件，如 DB 控制器，运行良好。

有任何想法吗？谢谢。

# c# - 在 WPF 中创建旋转文本

> ID：12628576
> 
> 赞同：1
> 
> 时间：2012-09-27T19:17:28.067
> 
> 标签：c#, wpf, text

我正在尝试创建一些旋转的文本并将该图像保存到 PNG 文件中。生成的 PNG 不应大于所需（或最小填充）。只要*没有旋转*，我就可以使用它，但是一旦我旋转文本，它就会在文件中被剪掉。我确信这与调整 RotateTransform 的 CenterX 和 CenterY 或创建 TranslateTransform 有关，但我找不到任何关于如何正确执行此操作的信息，并且我的试错测试已经变成了试验-和-*沮丧*。

我的示例代码如下。我正在寻找一种可以使用任意角度而不仅仅是-45度的解决方案。

最后，如果有人知道如何满足这些要求，但说使用“旧式”图形对象而不是 WPF 工具，我也愿意接受该解决方案。

```
private static void CreateImageFile()
{
    FormattedText ft;
    Geometry textBox;
    string fontName;
    Typeface face;
    DrawingVisual viz;
    RotateTransform rt;
    TranslateTransform tt;
    Rect rect;
    RenderTargetBitmap bmp;
    PngBitmapEncoder encoder;

    ft = CreateText("Lorem ipsum dolor sit amet, consectetur adipisicing" + Environment.NewLine + "elit, sed do eiusmod tempor", "Verdana", 12, false, false);
    textBox = ft.BuildHighlightGeometry(new Point());

    fontName = "Arial";
    face = new Typeface(fontName);

    // now create the visual we'll draw them to
    viz = new DrawingVisual();
    rt = new RotateTransform() { Angle = -45 };
    rect = rt.TransformBounds(ft.BuildHighlightGeometry(new Point(0, 0)).Bounds);

    using (DrawingContext dc = viz.RenderOpen())
    {
        dc.PushTransform(rt);
        dc.DrawText(ft, new Point(0, 0));
        dc.Pop();
    }

    bmp = new RenderTargetBitmap((int)rect.Width, (int)rect.Height, 96, 96, PixelFormats.Pbgra32);
    bmp.Render(viz);

    encoder = new PngBitmapEncoder();
    encoder.Frames.Add(BitmapFrame.Create(bmp));
    using (FileStream file = new FileStream("TextImage.png", FileMode.Create))
        encoder.Save(file);
}

private static FormattedText CreateText(string text, string typeface, double fontSize, bool bold, bool italic)
{
    FontStyle fontStyle = FontStyles.Normal;
    FontWeight fontWeight = FontWeights.Medium;

    if (bold == true) fontWeight = FontWeights.Bold;
    if (italic == true) fontStyle = FontStyles.Italic;

    // Create the formatted text based on the properties set.
    FormattedText formattedText = new FormattedText(
        text,
        CultureInfo.CurrentCulture,
        FlowDirection.LeftToRight,
        new Typeface(new FontFamily(typeface),
            fontStyle,
            fontWeight,
            FontStretches.Normal),
        fontSize,
        Brushes.Black, // This brush does not matter since we use the geometry of the text. 
        null,
        TextFormattingMode.Display
        );

    return formattedText;
} 
```

* * *

## 更新

基于以下一些建议，我决定在 GUI 中尝试不同的策略和实验。我创建了一个这样的窗口：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="160" Width="160" Loaded="Window_Loaded">
    <Grid>
        <Canvas Name="WorkCanvas" HorizontalAlignment="Center" VerticalAlignment="Center">
            <TextBlock RenderTransformOrigin="0.5,0.5">
                <TextBlock.RenderTransform>
                    <TransformGroup>
                        <ScaleTransform/>
                        <SkewTransform/>
                        <RotateTransform Angle="-45"/>
                        <TranslateTransform/>
                    </TransformGroup>
                </TextBlock.RenderTransform>This is a test</TextBlock>
        </Canvas>
    </Grid>
</Window> 
```

如您所见，它同时使用了 the`RotateTransform`和建议`RenderTransformOrigin`的 ，结果如下图所示。而且，如您所见，文本**没有**通过`Canvas`. 这**似乎**是我的全部问题。如何旋转文本**并**使其正确居中。

![例子](../Images/aacd806c0aed5c04fdc25a9a3f061f80.png)

* * *

## 更新 2

这次我决定尝试 a`Grid`而不是 a `Canvas`，我现在可以让文本在网格中正确居中，但由于我不能使用`FormattedText`对象，我似乎无法测量实际的边界框。`TextBlock`或 的所有测量值`Grid`都返回，就好像它根本没有旋转（查看`ActualWidth`、`ActualHeight`和`DesiredSize`）。如果我无法获得旋转的边界框大小，我无法保存 PNG 而不会被剪裁。

哦，我尝试在未旋转的网格中旋转文本并旋转网格本身，在尝试确定尺寸时都给出相同的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T04:24:22.753

您可以尝试将文本包装在具有 rendertransformOrigin 的元素中。让您更改该元素。尝试画布或网格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T19:41:04.840

我认为您缺少的是您需要将[RenderTransformOrigin](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28SYSTEM.WINDOWS.UIELEMENT.RENDERTRANSFORMORIGIN%29;k%28VS.XAMLEDITOR%29;k%28TargetFrameworkMoniker-%22.NETFRAMEWORK%2cVERSION%3dV4.0%22%29&rd=true)设置为 0.5,0.5 以便您的旋转变换围绕图像中心而不是左上边缘。

**更新**

回应您上面的更新。问题是使用画布。如果你完全删除你的变换，你会看到你的 TextBlock 不是从一开始就居中的。它实际上是围绕它的中心旋转的，只是中心不是画布的中心。试试这个：

```
<Grid HorizontalAlignment="Center" VerticalAlignment="Center">
        <TextBlock TextAlignment="Center" RenderTransformOrigin="0.5,0.5">
            <TextBlock.RenderTransform>
                    <RotateTransform Angle="-45"/>
            </TextBlock.RenderTransform>
            This is a test
        </TextBlock>
</Grid> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T16:46:45.177

经过一番摸索，在 Matt 和 kbo4sho88 的帮助下，我终于找到了正确的方法。除了其他发帖者的帮助外，我终于发现我需要调用 TransformToVisual 和 TransformBounds 来获取正确文件大小所需的边界框。但是，在那之前，我不得不调用 Measure 和 Arrange，因为这些对象没有显示在屏幕上。

呸！

```
private static void CreateImageFile()
{
    Grid workGrid;
    TextBlock workTextBlock;
    RenderTargetBitmap bitmap;
    PngBitmapEncoder encoder;
    Rect textBlockBounds;
    GeneralTransform transform;

    workGrid = new Grid()
    {
        VerticalAlignment = VerticalAlignment.Center,
        HorizontalAlignment = HorizontalAlignment.Center
    };

    workTextBlock = new TextBlock()
    {
        Text = "Lorem ipsum dolor sit amet, consectetur adipisicing" + Environment.NewLine + "elit, sed do eiusmod tempor",
        FontFamily = new FontFamily("Verdana"),
        FontSize = 36,
        TextAlignment = TextAlignment.Center,
        RenderTransformOrigin = new Point(0.5, 0.5),
        LayoutTransform = new RotateTransform(-45)
    };

    workGrid.Children.Add(workTextBlock);

    /*
     * We now must measure and arrange the controls we just created to fill in the details (like
     * ActualWidth and ActualHeight before we call TransformToVisual() and TransformBounds()
     */
    workGrid.Measure(new Size(double.PositiveInfinity, double.PositiveInfinity));
    workGrid.Arrange(new Rect(0, 0, workGrid.DesiredSize.Width, workGrid.DesiredSize.Height));

    transform = workTextBlock.TransformToVisual(workGrid);
    textBlockBounds = transform.TransformBounds(new Rect(0, 0, workTextBlock.ActualWidth, workTextBlock.ActualHeight));

    /*
     * Now, create the bitmap that will be used to save the image. We will make the image the 
     * height and width we need at 96DPI and 32-bit RGBA (so the background will be transparent).
     */
    bitmap = new RenderTargetBitmap((int)textBlockBounds.Width, (int)textBlockBounds.Height, 96, 96, PixelFormats.Pbgra32);
    bitmap.Render(workGrid);

    encoder = new PngBitmapEncoder();
    encoder.Frames.Add(BitmapFrame.Create(bitmap));
    using (FileStream file = new FileStream("TextImage.png", FileMode.Create))
        encoder.Save(file);
} 
```

当然，这只是一个示例（但有效）方法，最后一个将被参数化。

谜题的最后一部分是在[WPF 中找到的：Getting new coordinates after a Rotation](https://stackoverflow.com/questions/581837/wpf-getting-new-coordinates-after-a-rotation)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-07T20:55:27.337

我通常处理自定义渲染的方式是使用我自己的`FrameworkElement`并覆盖该`OnRender`方法。所以，举个例子：

```
using System;                  
using System.Windows;           //  For the FrameworkElement baseclass
using System.Windows.Media;     //  To get the drawing context

public class CustomThing : FrameworkElement
{
    //  Constructor
    CustomThing() 
    {
    }

    //  Custom render code called whenever control is invalidated
    protected override OnRender(DrawingContext context)
    {
        if (!this.IsVisible || this.ActualHeight <= 0 || this.ActualWidth <= 0)
        {
            return;   //  Don't do anything if this thing isn't renderable
        }
        Typeface tf = new Typeface(this.FontFamily, FontStyles.Normal, this.FontWeight, FontStretches.Normal);                    
        FormattedText fText = new FormattedText(this.Text, System.Globalization.CultureInfo.CurrentCulture, FlowDirection.LeftToRight, tf, this.FontSize, this.Foreground);

        //  You could have accessors so that the various properties such as Fonts, etc. are 
        //  Properties of the class, and using DependencyProperties, they can be set so they
        //  automatically cause an invalidation when they change.

        double txWidth = fText.Width;
        double txHeight = fText.Height;
        //  This measures the text

        double w = this.ActualWidth;
        double h = this.ActualHeight;
        double w2 = w / 2.0;
        double h2 = h / 2.0;
        //  Get the center point for the rotation
        //  In this case, the center of the control

        Transform trans = new RotateTransform(-90.0, w2, h2);
        //  The transform is for counter-clockwise 90 degrees, centered
        //  in the center of the control.

        context.PushTransform(trans);
        //  All drawing operations will be performed with the
        //  transformation applied

        Point txPos = new Point(w2 - (txWidth / 2.0), h2 - (txHeight / 2.0));
        //  The render origin for the text is the upper left
        //  hand corner of the bounding box.  This uses the same origin for
        //  the rotation, then shifts it by half the dimensions of the text.

        context.DrawText(fText, txPos);

        context.Pop();
        //  The pop method is only needed if you need to continue work
        //  with the drawing context and don't want the transform
        //  operating on future rendering.
    }   
} 
```

还有其他细节，例如，如果您希望控件是鼠标交互的（包括 using `System.Windows.Input`），那么您需要通过为整个控件区域绘制背景颜色来开始渲染。最主要的是你不需要测量旋转文本的形状，只需要测量未旋转的文本。如果您想将最终文本定位在控件中心以外的任何其他位置，只需确保您的旋转中心也是与文本偏移相同的参考点。

我通常做的另一件事是使用依赖属性，以便所有样式都可以在 XAML 中完成。这样，可以在设计器中预览自定义对象，同时动态更改属性，项目的典型条目如下所示：

```
public static readonly RoutedEvent TextChangedEvent = EventManager.RegisterRoutedEvent("TextChanged", RoutingStrategy.Bubble, typeof(RoutedPropertyChangedEventHandler<string>), typeof(CustomThing));

public event RoutedPropertyChangedEventHandler<string> TextChanged
{
    add { AddHandler(TextChangedEvent, value); }
    remove { RemoveHandler(TextChangedEvent, value); }
}

public static readonly DependencyProperty TextProperty = DependencyProperty.Register("Text", typeof(string), typeof(CustomThing), new FrameworkPropertyMetadata("", FrameworkPropertyMetadataOptions.AffectsRender, new PropertyChangedCallback(OnTextChanged)));

public string Text
{
    get => (string)GetValue(TextProperty);
    set => SetValue(TextProperty, value);
}

private static void OnTextChanged(DependencyObject obj, DependencyPropertyChangedEventArgs args)
{
    CustomThing cntrl = (CustomThing)obj;
    RoutedPropertyChangedEventArgs<string> e = new RoutedPropertyChangedEventArgs<string>((string)args.OldValue, (string)args.NewValue, TextChangedEvent);
    cntrl.OnTextChanged(e);
}

protected virtual void OnTextChanged(RoutedPropertyChangedEventArgs<string> e)
{
    RaiseEvent(e);
} 
```

# php - PHP相当于一个javascript时间戳（毫秒不是微）

> ID：12628580
> 
> 赞同：1
> 
> 时间：2012-09-27T19:18:02.527
> 
> 标签：php, javascript, timestamp

> **可能重复：**
> [如何在 PHP 中以毫秒为单位获取当前时间？](https://stackoverflow.com/questions/4184769/how-to-get-current-time-in-ms-in-php)

我试图找出以毫秒为单位获取当前时间的最佳方法。作为一家公司，我正在为数据库中的存储毫秒数工作，因为他们声称就 UTC 转换而言它更准确。他们通过javascripts日期函数获得大部分时间。所以我想弄清楚的是做这个 php 方面的最佳方法是什么。我看到了喜忧参半的结果。

`time()*1000`似乎很受欢迎，但对我来说这没有意义，因为你最终得到了一个正常的时间戳，最后有 3 个额外的零，是的，这更接近准确，但仍然不准确。我也看过

`microtime(time(), TRUE)`或某种程度的东西，但这会从我收集的内容中返回带有小数的结果。这又不符合我正在寻找的东西。那就是说。获取由 PHP 动态创建的 javascript 样式时间戳的 javascript 可读版本的最佳方法是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-27T19:27:27.963

`microtime(time(), TRUE)`无效，`time()*1000`不会给你最好的结果

你可以试试

Javascript

```
 document.write(new Date().getTime()); // 1348773527231 
```

PHP

```
print(round(microtime(true) * 1000)); // 1348773528231 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T19:29:18.793

microtime(true) 不 = time()*1000

```
// Start
$stamp = microtime(true);

// End
$total_time = microtime(true) - $stamp;

echo $total_time; 
```

如果您不想要小数，请使用 round($stamp);

# asp.net - 使用 asp.net 执行存储过程

> ID：12628581
> 
> 赞同：0
> 
> 时间：2012-09-27T19:18:05.970
> 
> 标签：asp.net, stored-procedures

我正在尝试在 asp.net 中执行存储过程。存储过程需要 3 个参数，所有 3 个都是 ID（整数）。这 3 个参数是：TaskID、ExhibitID 和 InvestigatorID。

我有一个隐藏字段，其中包含来自 javascript 函数的 ExhibitID 数组。我的问题是如何在遍历数组时执行查询？

这是我的存储过程的示例：

```
var cnSaveTask = new SqlConnection(ConfigurationManager.ConnectionStrings["OSCIDConnectionString"].ToString());
        var comLinkExhibitToTask = new SqlCommand("p_CaseFileTasksExhibitLinkAdd", cnSaveTask) { CommandType = CommandType.StoredProcedure };
        foreach (string exhibit in hidExhibitsIDs.Value.Split(','))
        {
            comLinkExhibitToTask.Parameters.AddWithValue("@TaskID", taskID);
            comLinkExhibitToTask.Parameters.AddWithValue("@ExhibitID", Convert.ToInt32(exhibit));
            comLinkExhibitToTask.Parameters.AddWithValue("@InvestigatorID", int.Parse(Session["InvestigatorID"].ToString()));

        }

        try
        {
            cnSaveTask.Open();
            comLinkExhibitToTask.ExecuteNonQuery();
        } 
```

但它在我的数据库中不起作用。什么都没有添加。我的猜测是，由于它是迭代而不是执行，它只是每次都不断替换“exhibitID”，然后最终尝试执行它。但我不认为只是`"comLinkExhibitToTask.ExecuteNonQuery()"` 在尝试之外添加是一个好主意。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T19:22:28.787

您可以将 try 块移动到 foreach 循环中，或者用 try 块包装 foreach 循环。（取决于您希望进行的错误处理 - 继续下一个关于错误的展示或完全中止执行）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T19:37:10.883

我从未使用过 AddWithValue，所以我无法谈论它的功能。以下是我通常如何编写这样的数据库调用。

```
using (SqlConnection cnSaveTask = new SqlConnection(ConfigurationManager.ConnectionStrings["OSCIDConnectionString"].ConnectionString))
{
    cnSaveTask.Open();

    using (SqlCommand comLinkExhibitToTask = new SqlCommand("p_CaseFileTasksExhibitLinkAdd", cnSaveTask))
    {
        comLinkExhibitToTask.CommandType = CommandType.StoredProcedure;

        comLinkExhibitToTask.Parameters.Add(new SqlParameter("@TaskID", SqlDbType.Int) {Value = taskID});
        // etc.

        comLinkExhibitToTask.ExecuteNonQuery();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T20:11:33.973

解决方案：

```
var cnSaveTask = new SqlConnection(ConfigurationManager.ConnectionStrings["OSCIDConnectionString"].ToString());
        try
        {
            var comLinkExhibitToTask = new SqlCommand("p_CaseFileTasksExhibitLinkAdd", cnSaveTask) { CommandType = CommandType.StoredProcedure };
            cnSaveTask.Open();
            comLinkExhibitToTask.Parameters.Add(new SqlParameter("@TaskID", SqlDbType.Int));
            comLinkExhibitToTask.Parameters.Add(new SqlParameter("@ExhibitID", SqlDbType.Int));
            comLinkExhibitToTask.Parameters.Add(new SqlParameter("@InvestigatorID", SqlDbType.Int));

            foreach (string exhibit in hidExhibitsIDs.Value.Split(','))
            {
                comLinkExhibitToTask.Parameters["@TaskID"].Value = taskID;
                comLinkExhibitToTask.Parameters["@ExhibitID"].Value = Convert.ToInt32(exhibit);
                comLinkExhibitToTask.Parameters["@InvestigatorID"].Value = int.Parse(Session["InvestigatorID"].ToString());

                comLinkExhibitToTask.ExecuteNonQuery();
            }
        }
        catch (Exception ex)
        {
            ErrorLogger.Log(0, ex.Source, ex.Message);
        }
        finally
        {
            if (cnSaveTask.State == ConnectionState.Open)
            {
                cnSaveTask.Close();
            }
        } 
```

由于我处于循环状态，因此它不断添加参数。所以只要在循环外声明参数，只在循环内传递值。这样只有3个参数，并且值将相应地传入

# sql - 如何在 SQL Server 的 case 语句中执行 SUM()

> ID：12628585
> 
> 赞同：10
> 
> 时间：2012-09-27T19:18:38.997
> 
> 标签：sql, sql-server

我想在我的 case 语句中添加一些计算以动态创建新列的内容，但出现错误：

> *列 'Test1.qrank' 在选择列表中无效，因为它既不包含在聚合函数中，也不包含在 GROUP BY 子句中。*

这是我正在处理的代码

```
case 
    when test1.TotalType = 'Average' then Test2.avgscore
    when test1.TotalType = 'PercentOfTot' then (cnt/SUM(test1.qrank))
    else cnt
end as displayscore 
```

我确实尝试过分组，但没有成功。

有什么提示吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-27T19:39:33.560

当您在 GROUP BY 语句中使用子句而不将其包含在选择中时，可能会发生您发布的错误。

**例子**

这个有效！

```
 SELECT t.device,
            SUM(case when transits.direction = 1 then 1 else 0 end) ,
            SUM(case when transits.direction = 0 then 1 else 0 end) from t1 t 
            where t.device in ('A','B') group by t.device 
```

这一个不是（从选择中省略了 t.device）

```
 SELECT 
            SUM(case when transits.direction = 1 then 1 else 0 end) ,
            SUM(case when transits.direction = 0 then 1 else 0 end) from t1 t 
            where t.device in ('A','B') group by t.device 
```

这将产生您的错误，抱怨我正在为未包含在选择中的内容进行分组

请提供所有查询以获得更多支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T19:39:20.983

您可以先使用公用表表达式创建 SUM，将其连接到表中，然后根据需要使用 WHEN 从 CTE 或原始表中获取值。

```
WITH PercentageOfTotal (Id, Percentage) 
AS 
(
    SELECT Id, (cnt / SUM(AreaId)) FROM dbo.MyTable GROUP BY Id
)
SELECT 
    CASE
        WHEN o.TotalType = 'Average' THEN r.avgscore
        WHEN o.TotalType = 'PercentOfTot' THEN pt.Percentage
        ELSE o.cnt
    END AS [displayscore]
FROM PercentageOfTotal pt
    JOIN dbo.MyTable t ON pt.Id = t.Id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T19:26:17.887

如果您使用的是 SQL Server 2005 或更高版本，则可以使用窗口功能`SUM() OVER ()`。

```
case 
when test1.TotalType = 'Average' then Test2.avgscore
when test1.TotalType = 'PercentOfTot' then (cnt/SUM(test1.qrank) over ())
else cnt
end as displayscore 
```

但是，如果您显示完整的查询以获取您实际需要的上下文，那会更好。

# .net - 类库 (.dll) 应该从哪里读取其配置？

> ID：12628589
> 
> 赞同：5
> 
> 时间：2012-09-27T19:18:59.110
> 
> 标签：.net, dll, configuration, web-config, class-library

我已经在做一个 .net 项目，但我认为这个问题可以适用于任何编程语言/框架。

问题是阅读类库配置的*良好做法是什么。*我可以想到以下选项：

1.  **从应用程序域的配置文件中读取。**例如，对于 .net Web 应用程序，从 web.config 读取
2.  **从为此类库制作的特定自定义文件中读取。**就像为您的类库创建一个 xml 文件并将您的配置放在那里。
3.  **调用者应将所需的配置传递给类库**（通过类构造函数）。所以在这种情况下，类库不会直接从配置文件中读取，而是希望调用者发送所需的信息。

有什么想法/偏好吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T19:28:14.223

令人惊讶（或不足为奇？）这取决于。

从**开发人员的**角度来看，最好通过库 API 提供调用方配置，因为它允许库在更广泛的上下文中使用，而不依赖于库的托管方式。提供一个可以从应用程序域或私有文件中提取的配置加载器是很重要的，如果不执行任何配置，则合理可用的默认值是一个理智的保护程序。

从**操作员的**角度来看，能够覆盖开发人员提供的任何设置也很有用，因为它们在您的环境中没有意义。但是，如果开发人员故意试图将环境的形状强加给您，我不清楚这将如何工作。

我认为最好的折衷方案是允许所有三种可能性，[就像 log4net 一样](http://logging.apache.org/log4net/release/manual/configuration.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T19:21:39.310

标准做法似乎是这样

> 从应用程序域的配置文件中读取。例如，对于 .net Web 应用程序，从 web.config 读取

通常你有一个特定于你的库的配置部分，它有很多这种做法的示例（nhibernate、log4net、spring.net 等）。此部分可以指向一个单独的文件，以使您的文件尽可能短，例如：

```
<log4net configSource="Config\log4net.config.xml" /> 
```

**编辑**

我同意@Jeffrey Hantin，它实际上取决于您尝试执行的配置类型。

应将“动态”设置放在配置文件中，以允许灵活且易于更改。其他一些，作为休眠映射，更适合以“流畅”的方式（通过代码）应用。

流畅的配置减少了拼写错误的可能性，但它们并不总是合适的。

# rest - 我可以为 Salesforce 公共休息服务进行 url 重写吗？

> ID：12628593
> 
> 赞同：0
> 
> 时间：2012-09-27T19:19:46.893
> 
> 标签：rest, salesforce

我在 Salesforce 中有以下宁静的服务：

```
@RestResource(urlMapping='/testRest')
global class testRest {

    @HttpPost
    global static void doPost(){
        // do some stuff
    }
} 
```

我有一个站点可以访问这个类，因此任何人（未经身份验证）都可以在[https://mydomain.force.com/sitename/services/apexrest/testRest访问此服务](https://mydomain.force.com/sitename/services/apexrest/testRest)

我想让用户以更短的 url 访问此服务，我希望他们能够访问[https://mydomain.force.com/sitename/rest/testRest上的服务](https://mydomain.force.com/sitename/rest/testRest)

有没有办法做到这一点？我尝试使用带有以下代码的 Site.UrlRewriter：

```
 if(url.toLowerCase().startsWith('/rest/testrest')){
        return new PageReference('/services/apexrest/testRest'); 
```

但这会将我重定向到 FileNotFound 页面。我在这里错过了什么吗？

# coldfusion - 将数据绑定到 CFTEXTAREA

> ID：12628594
> 
> 赞同：0
> 
> 时间：2012-09-27T19:19:50.173
> 
> 标签：coldfusion, coldfusion-8

我正在使用 bind 属性填充一个 cfselect 框。我希望能够从两个下拉列表中进行选择，然后根据该选择填充 CFTEXTAREA。我以为我可以发出类似的绑定属性命令，但 textarea 输出：

```
[object Object] 
```

CF8 文档说这是可能的吗？我错过了什么？

表格代码：

```
<cfselect name="descriptionDD" value="description" bind="cfc:cfcs.menudata.getData()" bindonload="true" />

<cftextarea name="detailDD" value="service_detail" bind="cfc:cfcs.menudata.getDetail({descriptionDD})" bindonload="true" /> 
```

氟氯化碳代码：

```
<cfcomponent>
<!---First Select Box --->
<cffunction name="getData" access="remote" returntype="query">

    <!--- Function to get data from datasource --->
    <cfquery name="data" datasource="ezpay">
    select description
    from service_descriptions
    order by description
    </cfquery>

    <!--- Return results --->
    <cfreturn data>
</cffunction>

<!---Second Select Box --->
<cffunction name="getDetail" access="remote" returnType="query">
        <cfargument name="description" type="any" required="true">

            <cfquery name="dataDetail" datasource="ezpay">
            SELECT service_detail
            from service_descriptions
            WHERE description = '#ARGUMENTS.description#'
            ORDER BY ID ASC
            </cfquery>

        <cfreturn dataDetail>
</cffunction>

</cfcomponent> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T20:02:04.503

> 但 textarea 输出：`[object Object]`

这通常意味着您要返回一个复杂的对象，而需要一个简单的字符串。`[object Object]`本质上是复杂对象的字符串表示形式（在您的情况下是查询）。

TextArea 旨在显示单个值。所以你的绑定函数应该返回一个字符串，而不是一个查询对象。

```
<cffunction name="getDetail" access="remote" returnType="string">
    <cfargument name="description" type="any" required="true">

    <!--- localize function variables --->
    <cfset var dataDetail = "">
    <cfquery name="dataDetail" datasource="ezpay">
        SELECT service_detail
        FROM   service_descriptions
        <!--- adjust cfsqltype if needed --->
        WHERE description = <cfqueryparam valu="#ARGUMENTS.description#" cfsqltype="cf_sql_varchar">
        ORDER BY ID ASC
    </cfquery>

    <cfreturn dataDetail.service_detail>
</cffunction> 
```

# php - 仅获取 Array 中的值而不是键

> ID：12628595
> 
> 赞同：2
> 
> 时间：2012-09-27T19:19:56.253
> 
> 标签：php, arrays, loops, for-loop, stylesheet

我想要完成的是使用数组链接到 CSS 样式表。

首先，我创建要执行的函数，styles() styles() 函数看起来像这样..

```
//CSS Stylesheets Includes
function styles()
{
    $linkStyles = array(
    0 => 'main',
    1 => 'topBar',
    2 => 'globals',
    3 => 'search',
    4 => 'menu',
    5 => 'footer',
    6 => 'banner',
    7 => 'slideshow',
    8 => 'graphs',
    9 => 'contact',
    10 => 'news',
    11 => 'products',
    12 => 'support'
    );

    for($i = 0; $i <= count($linkStyles); $i++)
    {
        ?><link rel="stylesheet" charset="text/css" href="css/style_<?php array($linkStyles[$i]); ?>.css" /><?php
    }
} 
```

现在我遇到的问题是在 for() 循环中使用数组。我不明白如何只获取数组键中的值。

例如，如果我在键 0 下查找 $linkStyles 数组，我希望它只返回 'main' 而没有引号。最终输出将类似于，

```
<link rel="stylesheet" charset="text/css" href="css/style_main.css" /> 
```

当然，因为有一个循环，它会有 12 个指向样式表的链接，而不仅仅是 1 个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T19:22:17.047

```
foreach ($linkStyles as $v)
{
    echo '<link rel="stylesheet" charset="text/css" href="css/style_' . $v . '.css" />';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T19:23:25.020

尝试这个：

```
function styles()
{
    $linkStyles = array(
    0 => 'main',
    1 => 'topBar',
    2 => 'globals',
    3 => 'search',
    4 => 'menu',
    5 => 'footer',
    6 => 'banner',
    7 => 'slideshow',
    8 => 'graphs',
    9 => 'contact',
    10 => 'news',
    11 => 'products',
    12 => 'support'
    );

    foreach($linkStyles as $style)
    {
        ?><link rel="stylesheet" charset="text/css" href="css/style_<?php echo($style); ?>.css" /><?php
    }
} 
```

此外，如果数字将像这样按顺序排列，则不需要为数组元素分配数字键。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T19:22:29.247

只需`$linkStyles[$i]`在访问数组元素时使用。

看看[这个](http://php.net/manual/en/language.types.array.php)页面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T19:22:41.743

替换您的以下行：

```
array($linkStyles[$i]); 
```

对于这个：

```
echo $linkStyles[$i]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T19:23:01.057

```
 for($i = 0; $i <= count($linkStyles); $i++)
{
    echo "<link rel='stylesheet' charset='text/css' href='css/style_$linkStyles[$i].css'/>";
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-28T12:42:54.960

IMO你可以使用php函数“array_values”

[http://php.net/manual/es/function.array-values.php](http://php.net/manual/es/function.array-values.php)

# c++ - 函数 __gnu_cxx::__stl_next_prime(usigned long) 有什么作用？

> ID：12628597
> 
> 赞同：0
> 
> 时间：2012-09-27T19:20:00.907
> 
> 标签：c++, stl, gnu

我刚刚在代码中看到了该函数，直觉上它应该返回大于参数的下一个素数。但是，当我这样称呼它时，我得到 53！然后当我通过 54 时，我得到 97。我没有找到关于它在网上做什么的描述，有人能指点我吗？或者有人知道这是做什么的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T19:22:12.303

它返回足够大于指定素数的下一个素数，值得将哈希表重新组织到该数量的桶。如果它返回了下一个素数，那么您将过于频繁*地重新组织您的哈希表。*它是哈希表代码的一个实现细节，并不打算被外部代码使用。

# java - Java 同步块 vs concurrentHashMap vs Collections.synchronizedMap

> ID：12628600
> 
> 赞同：9
> 
> 时间：2012-09-27T19:20:08.087
> 
> 标签：java, synchronization

假设如果有一个同步方法，并且在该方法中，我会更新一个哈希图，如下所示：

```
public synchronized void method1()
{
    myHashMap.clear();
    //populate the hashmap, takes about 5 seconds.
} 
```

现在当method1正在运行并且hashmap正在重新填充时，如果有其他线程试图获取hashmap的值，我假设它们会被阻塞？

现在而不是使用同步方法，如果我将 hashmap 更改为 ConcurrentHashMap 如下所示，行为是什么？

```
public void method1()
{
     myConcurrentHashMap.clear();
    //populate the hashmap, takes about 5 seconds.
} 
```

如果我使用 Collections.synchronizedMap 怎么办？是一样的吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-27T19:26:31.553

CHM(ConcurrentHashMap)，它不是在一个公共锁上同步每个方法，一次限制对单个线程的访问，而是使用一种称为锁条带的更细粒度的锁定机制来允许更大程度的共享访问。任意多个读线程可以并发访问map，reader可以和writer并发访问map，有限数量的writer可以并发修改map。结果是并发访问下的吞吐量要高得多，而单线程访问的性能损失很小。ConcurrentHashMap 与其他并发集合一起，通过提供不抛出 ConcurrentModificationException 的迭代器进一步改进了同步集合类，从而消除了在迭代期间锁定集合的需要。

**与所有改进一样，仍有一些权衡。**对整个 Map 进行操作的方法的语义，例如 size 和 isEmpty，已经略微弱化以反映集合的并发性。由于 size 的结果在计算时可能已经过时，它实际上只是一个估计值，因此 size 允许返回近似值而不是精确计数。虽然起初这似乎令人不安，但实际上像 size 和 isEmpty 这样的方法在并发环境中的用处要小得多，因为这些量是移动的目标。

第二，`Collections.synchronizedMap`

它只是带有同步方法的简单 HashMap - 我称它为 CHM 已弃用

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-27T19:30:57.567

如果您想对您的同步进行所有读写操作`HashMap`，您需要将`synchronize`所有方法放在访问`HashMap`; 仅仅阻止一种方法是不够的。

`ConcurrentHashMap`允许线程安全地访问您的数据而无需锁定。这意味着您可以在一个线程中添加/删除值，同时在另一个线程中获取值而不会遇到异常。另请参阅[ConcurrentHashMap 的文档](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentHashMap.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T19:32:54.947

你可能会做

```
volatile private HashMap map = newMap();

private HashMap newMap() {
    HashMap map = new HashMap();
    //populate the hashmap, takes about 5 seconds
    return map;
}

public void updateMap() {
    map = newMap();
} 
```

读取器看到一个常量映射，因此读取不需要同步，也不会被阻塞。

# java - 比较字符串 - Java

> ID：12628602
> 
> 赞同：-1
> 
> 时间：2012-09-27T19:20:19.140
> 
> 标签：java, string, compare

> **可能重复：**
> [如何比较 Java 中的字符串？](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)

我是 Java 新手。我有以下问题：

```
string s = "someword";

if (s == "someword")
// do something 
```

有时对我不起作用。不知道为什么。

感谢您的回复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T19:20:51.793

在 Java`==`中比较参考。用于`.equals()`比较值。

重复：[如何在 Java 中比较字符串？](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)

# jquery - Jquery Mobile 和 Mobiscroll：我的弹出窗口只工作一次

> ID：12628604
> 
> 赞同：2
> 
> 时间：2012-09-27T19:20:36.440
> 
> 标签：jquery, ajax, jquery-mobile, mobiscroll

我可以让 mobiscroll 日期时间选择器工作的唯一方法是禁用 ajax 并从其他文件中设置 rel="external"。我想要 Jquery 的 ajax 的平滑过渡，但我无法让它工作。这就是我设置声明的方式：

```
 $('#gauge_page').live('pageinit', function(event)  
{
    alert( 'This page was just enhanced by jQuery Mobile!' );
   var now = new Date();
    var then = new Date();
    then.setHours(then.getHours()-12);

    $('#start_datetime').scroller({
         preset: 'datetime',
        theme: 'android-2',
        display: 'modal',
        mode: 'scroller',
        dateFormat: 'mm/dd/yy',
        timeFormat: 'hh:ii a' 
    });

    $('#start_datetime').scroller('setDate', then, true);

     $('#end_datetime').scroller({
        preset: 'datetime',
        theme: 'android-2',
        display: 'modal',
        mode: 'scroller',
        dateFormat: 'mm/dd/yy',
        timeFormat: 'hh:ii a' 

    });

    $('#end_datetime').scroller('setDate', now, true);

}); 

<div id="date_form_start">
        <h4><b>Start</b></h4>       
        <input type="text" name="start_datetime" id="start_datetime"  class="date_form_field_datetime" />           
    </div> 
```

每次都会显示 alert() 消息，但只有在刷新页面时才会初始化日期字段。那么如何使用 pageinit 事件正确初始化它呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T20:51:08.683

@Jasper 是对的。`<div data-role="page">`如果您使用 AJAX，则不会执行它之外的任何代码。为了让我的代码正常工作，我必须将代码放在其中`<div>`

# java - 检索大量 DTO 的最快 Java 集合是什么？

> ID：12628606
> 
> 赞同：5
> 
> 时间：2012-09-27T19:20:49.100
> 
> 标签：java, performance, collections

我正在从 DTO 对象返回大量集合，并想知道是否有人能指出我正确的方向。任何类型的集合都可以，但我不知道哪一个最适合返回大量对象的任务。

我知道这可以根据线程等进行更改，但我至少在寻找一般指导和基准。此外，我需要保留在标准 Java 集合中（没有第三方库）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T20:10:58.200

正如不可靠的说法：如果您需要一个简单的集合，那么 ArrayList 应该表现得很好，因为它基于一个使用 System 函数定义快速的 Array。

如果您将初始容量设置为更高的值（不知道您所说的大数），那么它会更快，因为它减少了增量重新分配的数量。

任何其他集合都有某种开销，例如查找哈希码或蜜蜂同步。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T20:02:39.777

以`ArrayList`正确大小初始化（如果您知道要添加多少 DTO 或上限）是`Collection`您会发现的最简单和最小的。通过在初始化时设置它的大小，它不需要调整其内部数组的大小，这是一个产生垃圾的操作。最好直接使用数组，这非常低级，如果需要调整大小，您需要手动管理（这就是`ArrayList`为您所做的）。

要创建一个 pre-sized `ArrayList`，请使用`ArrayList(int capacity)`构造函数。

# javascript - 使用 jQuery 在 Firefox 中将 div 居中

> ID：12628611
> 
> 赞同：0
> 
> 时间：2012-09-27T19:21:00.500
> 
> 标签：javascript, jquery, html, css, firefox

因此，我尝试使用以下代码使用 jQuery 在窗口中居中 div：

```
(function($) {
    $.fn.extend({
        center: function(options) {
            var options = $.extend({ // Default values
                inside: window,
                // element, center into window
                transition: 0,
                // millisecond, transition time
                minX: 0,
                // pixel, minimum left element value
                minY: 0,
                // pixel, minimum top element value
                withScrolling: true,
                // booleen, take care of the scrollbar (scrollTop)
                vertical: true,
                // booleen, center vertical
                horizontal: true // booleen, center horizontal
            }, options);
            return this.each(function() {
                var props = {
                    position: 'absolute'
                };
                if (options.vertical) {
                    var top = ($(options.inside).height() - $(this).outerHeight()) / 2;
                    if (options.withScrolling) top += $(options.inside).scrollTop() || 0;
                    top = (top > options.minY ? top : options.minY);
                    $.extend(props, {
                        top: top + 'px'
                    });
                }
                if (options.horizontal) {
                    var left = ($(options.inside).width() - $(this).outerWidth()) / 2;
                    if (options.withScrolling) left += $(options.inside).scrollLeft() || 0;
                    left = (left > options.minX ? left : options.minX);
                    $.extend(props, {
                        left: left + 'px'
                    });
                }
                if (options.transition > 0) $(this).animate(props, options.transition);
                else $(this).css(props);
                return $(this);
            });
        }
    });
})(jQuery);​ 
```

这在 Chrome 中运行良好，但在 Firefox 中似乎没有垂直居中，我不知道我做错了什么。Firefox 是否存在会导致无法计算窗口高度的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T19:30:27.320

尝试这个：

```
jQuery.fn.center = function () {
    this.css("position","absolute");
    this.css("top", Math.max(0, (($(window).height() - this.outerHeight()) / 2) + 
                                            $(window).scrollTop()) + "px");
    this.css("left", Math.max(0, (($(window).width() - this.outerWidth()) / 2) + 
                                            $(window).scrollLeft()) + "px");
    return this;
} 
```

用法：

```
$(element).center(); 
```

[资源](https://stackoverflow.com/questions/210717/using-jquery-to-center-a-div-on-the-screen)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T19:36:44.047

我不记得我改变了什么，但这里是：

```
$.fn.extend({
    center: function(options) {
        var options = $.extend({ // Default values
            inside: window,
            // element, center into window
            transition: 0,
            // millisecond, transition time
            minX: 0,
            // pixel, minimum left element value
            minY: 0,
            // pixel, minimum top element value
            withScrolling: true,
            // booleen, take care of the scrollbar (scrollTop)
            vertical: true,
            // booleen, center vertical
            horizontal: true // booleen, center horizontal
        }, options);

        $(this).each(function() {
            var props = {
                position: 'absolute'
            };
            if (options.vertical) {
                var top = ($(options.inside).height() - $(this).outerHeight()) / 2;
                if (options.withScrolling) top += $(options.inside).scrollTop() || 0;
                top = (top > options.minY ? top : options.minY);
                $.extend(props, {
                    top: top + 'px'
                });
            }
            if (options.horizontal) {
                var left = ($(options.inside).width() - $(this).outerWidth()) / 2;
                if (options.withScrolling) left += $(options.inside).scrollLeft() || 0;
                left = (left > options.minX ? left : options.minX);
                $.extend(props, {
                    left: left + 'px'
                });
            }
            if (options.transition > 0) $(this).animate(props, options.transition);
            else $(this).css(props);

        });

        return $(this);
    }
}); 
```

它似乎在 Firefox 中运行良好：http: [//jsfiddle.net/NQRUF/4/](http://jsfiddle.net/NQRUF/4/)

# sql - 运行 Maven/Hibernate 项目时如何加载 .sql 文件？

> ID：12628614
> 
> 赞同：0
> 
> 时间：2012-09-27T19:21:13.383
> 
> 标签：sql, hibernate, maven

我正在使用 hbm2ddl 创建我的表，它工作得很好，但我也希望 hibernate 在每次运行我的项目时加载一个 .sql 文件来填充数据库。我发现如果我的 .sql 文件在类路径中，Hibernate 应该这样做，但它似乎不起作用。

我不确定文件是否在类路径中，我不知道如何找到它。目前我的 load.sql 在 Other Sources/csr/main/resources/

我用谷歌搜索并读到我可以在我的项目的属性/库菜单中添加一个文件到类路径，但似乎 Maven 项目没有该部分。

我正在将 Mysql 与 JDBC 和 Netbeans 7.1.2 一起使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T10:44:21.143

您必须在 hibernate.xml 中指定要加载的 SQL 文件

```
<hibernate-configuration>
    <session-factory>
        ... some other stuff comes here     
        <property name="hibernate.hbm2ddl.auto">create-drop</property>
        <property name="hibernate.hbm2ddl.import_files">
            /import1.sql, /import2.sql
        </property>
    </session-factory>
<hibernate-configuration> 
```

仅当 hbm2ddl.auto = create-drop 时才会加载脚本。导入文件在所有其他选项上都被忽略 请注意，此文件中只允许使用单行语句。

这两个属性在[Hibernate Configuration, Chapter 3.4中描述](http://docs.jboss.org/hibernate/orm/3.6/reference/en-US/html/session-configuration.html#configuration-optional)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T07:18:26.977

您可以使用[sql-maven-plugin](http://mojo.codehaus.org/sql-maven-plugin/)来执行此类操作。这可以运行 sql 脚本等。 hbm2ddl 创建可以由 sql-maven-plugin 执行的 SQL 脚本。

# knockout.js - Asp.net mvc4，淘汰赛js，淘汰赛ViewModel加载所有视图？

> ID：12628617
> 
> 赞同：1
> 
> 时间：2012-09-27T19:21:15.597
> 
> 标签：knockout.js, asp.net-mvc-4

我是 asp.net mvc4 和 knockoutjs 的新手，需要帮助了解视图的工作原理。

1.  我在共享文件夹中有一个 _Layout.vbhtml，它是项目中所有页面的“主”页面。

2.  我有 AccountController、HomeController 和 GrowerController

3.  我在 Views 文件夹中有 GrowerController 的 Grower 文件夹。像往常一样，索引是默认视图。

4.  在 Views/Grower/Index 中，我有一个从服务器检索数据的 knoockout ViewModel。

5.  **现在，当我转到 Home/Index 等其他视图时，我在 Firebug 的控制台中看到，即使我不在创建淘汰 ViewModel 的视图上，它也会发出这些调用以从服务器获取数据。**

我很困扰。发生这种情况是因为我对所有页面都使用了 _layout.vbhtml 吗？我究竟做错了什么？

**编辑：** * **_Layout.vbhtml***

```
 <!DOCTYPE html>
    <html lang="en">
      <head>
       <meta charset="utf-8" />
       <title>@ViewData("Title")</title>
       <meta name="viewport" content="width=device-width" />
       <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
       <link href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" rel="stylesheet" type="text/css" />

        @* Javascrips files *@
        <script src="@Url.Content("~/Scripts/knockout-2.1.0.js")" type="text/javascript"></script>
        <script src="@Url.Content("http://code.jquery.com/jquery-1.7.1.min.js")" type="text/javascript"></script>
        <script src="@Url.Content("http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/custom.js")" type="text/javascript"></script>

        <!-- Custom stylesheet overriding styles -->
        @If Request.QueryString("pr") = "dow" or ViewData("pr") = "dow" Then
         @<link rel="stylesheet" href="@Url.Content("~/Content/CustomDow.css")" />
        Else
         @<link rel="stylesheet" href="@Url.Content("~/Content/Custom.css")" />
        End If
     </head>
     <body>
       <div data-role="page" data-theme="b">
        <div data-role="header">
            @If IsSectionDefined("Header") Then
                @RenderSection("Header")
            Else
                @<h1>@ViewData("Title")</h1>
                @Html.Partial("_LoginPartial")
            End If
        </div>
        <div data-role="content">
            @RenderBody()
        </div>
    </div>

    @RenderSection("scripts", required:=False)
</body> 
```

***种植者/索引.vbhtml***

```
 @Code
      ViewData("Title") = "Select a Grower/Branch"
    End Code

    @section scripts
      <script type="text/javascript">

      function SuperViewModel() {

        //====== GrowerInfo =======
        var self = this;
        self.GrowerName = ko.observable();
        self.GrowerCompany = ko.observable();
        self.GrowerAddress = ko.observable();
        self.ShowGrowerCompany = ko.observable();
        self.GrowerID = ko.observable();

        self.updateGrowerInfo = function () {
          $.getJSON("GetGrower", function (allData) {
          self.GrowerName(allData.Name);
          self.GrowerCompany(allData.CompanyName);
          self.GrowerAddress(allData.Address);
          self.ShowGrowerCompany(allData.ShowCompany);
          self.GrowerID(allData.ID);
         });
        };

        //Load initial state from server and populate viewmodel
        self.updateGrowerInfo();
        //========= End GrowerInfo ==========

         if ($("#hfFlag").val() == "1") {
          //========= BranchInfo ==========
          self.BranchName = ko.observable();
          self.Company = ko.observable();
          self.Address = ko.observable();
          self.ID = ko.observable();

          //Load initial state from server and populate viewmodel
          self.updateBranchInfo = function () {
           $.getJSON("GetBranch", function (allData) {
            self.BranchName(allData.Name);
            self.Company(allData.CompanyName);
            self.Address(allData.Address);
            self.ID(allData.ID);
          });
        };

        self.updateBranchInfo();
        //=========== End BranchInfo ==============
      }

      //=============== GrowerList ===============
      var MyGrower = function (data) {
       this.growerId = ko.observable(data.GrowerId);
       this.growerName = ko.observable(data.GrowerName);
     };

      self.growers = ko.observableArray([]);

      self.updateGrowers = function () {
        //refresh listview
        $("#ulGrowerList").listview();
        $("#ulGrowerList").listview("refresh");

      $.getJSON("GetGrowers", function (allData) {
        var mappedGrowers = $.map(allData, function (item) { return new MyGrower(item) });
        self.growers(mappedGrowers);

        });
      };

      self.setSelectedClassToGrowerList = function (item, event) {

        $(ulGrowerList).closest('ul').find('a').removeClass('highlight');
        $(ulGrowerList).closest('ul').find('.selected').remove();

        $(event.target).toggleClass("highlight");
        if ($(event.target).hasClass("highlight")) {
          $(event.target).append("<span class='selected'>Selected</span>");

          replaceByValue('GrowerID', event.target.id);
          postjsonToServerNow("grower");

          //update GrowerInfo 
          $.getJSON("GetGrower", function (allData) {
            self.GrowerName(allData.Name);
            self.GrowerCompany(allData.CompanyName);
            self.GrowerAddress(allData.Address);
            self.ShowGrowerCompany(allData.ShowCompany);
            self.GrowerID(allData.ID);
          });

        } else {
          $(event.target).find(".selected").remove();
        }
      };

      self.setSelectedClassToBranchList = function (item, event) {

        $(ulBranchList).closest('ul').find('a').removeClass('highlight');
        $(ulBranchList).closest('ul').find('.selected').remove();

        $(event.target).toggleClass("highlight");

        if ($(event.target).hasClass("highlight")) {
          $(event.target).append("<span class='selected'>Selected</span>");

          replaceByValue('BranchID', event.target.id);
          postjsonToServerNow("branch");
        } else {
          $(event.target).find(".selected").remove();
        }

      };

      //Load initial state from server and populate viewmodel
      self.updateGrowers();

      //============ End GrowerList =============
    }

    //============= End ViewModel Section ====================//

      $(document).bind('pageinit', function () {
        //enable ko
        ko.applyBindings(new SuperViewModel());

        $("#divBranchList").hide();

        //show hide lists
        $("#btnGrower").click(function () {
        $("#divGrowerList").show();
        $("#divBranchList").hide();
       });

       $("#btnBranch").click(function () {
         $("#divBranchList").show();
         $("#divGrowerList").hide();
       });

      });
    </script>
    End Section

    <table class="maintable" id="maintable">
      <tr>
        <td class="left">
          <div id="GrowerInfo">
            <strong>Grower</strong><br />
            <a data-role="button" data-theme="e" id="btnGrower" data-bind="click: updateGrowers">
              <h3>
               <span data-bind="text: GrowerName"></span>
              </h3>
              <span data-bind="text:GrowerCompany, visible: ShowGrowerCompany" class="block"></span><span data-bind="text: GrowerAddress">
              </span>
              <br />
              <span data-bind="text: GrowerID"></span>
            </a>
          </div>
          @If ViewData("IsDealer") Then
            @<div id="BranchInfo">
              <strong>Branch</strong> <a data-role="button" data-theme="e" id="btnBranch">
                <h3>
                  <span data-bind="text: BranchName"></span>
                </h3>
                <span data-bind="text: Company"></span>
                <br />
                <span data-bind="text: Address"></span>
                <br />
                <span data-bind="text: ID"></span></a>
            </div>
          End If
        </td>
        <td class="splitline">
        </td>
        <td class="right">
          <div class="content-right">
            <div id="divGrowerList" style="overflow: auto; height: 450px; padding: 10px;">

            <p>Total growers: <span data-bind="text: growers().length">&nbsp;</span></p>

               <ul data-inset="true" data-filter="true" data-bind="foreach: growers" data-role="listview" id="ulGrowerList">
                  <li><a data-bind="click: $parent.setSelectedClassToGrowerList, attr: {id: growerId}"><span data-bind="text: growerName, attr: {id: growerId}, click: $parent.setSelectedClassToGrowerList" /></a></li>
              </ul>

              <textarea name="growers" rows="10" data-bind="value: ko.toJSON(growers)"></textarea>

            </div>
            <div id="divBranchList">
              @If ViewData("IsDealer") Then
                @Html.Action("MyBranchList2")
              End If
            </div>
            @If ViewData("IsDealer") Then
              @<input type="hidden" id="hfFlag" value="1" />
            Else
              @<input type="hidden" id="hfFlag" value="0" />
            End If
          </div>
        </td>
      </tr>
    </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T20:14:22.630

`_layout`您已经在页面中定义了您的 Knockout ViewModel 。

如果您打算在所有页面上使用此视图模型，这很好，但听起来您不想这样做。将其移动到特定的操作视图中以将其隔离。

在上面对 Sethi 的评论中，您提到 javascript 在您这样做时不起作用……这可能是因为您在布局和视图中都放置了脚本标签。我敢打赌，您正在尝试在加载 knockout.js 之前构建视图模型。

好习惯：

在您的布局中，将您的脚本标签放在页面底部，就在`</body>`关闭标签之前...关闭之前的最后一个标签应该是您`RenderSection()`设置的调用。

现在，您可以在视图中的任何位置定义此脚本部分并确保它将在您的框架脚本之后发生 - 例如。jQuery、Knockout 等。

另外，请记住，使用 jQuery 几乎总是最好使用它`$.ready()`来确保您的脚本仅在 DOM 加载后运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T12:12:56.930

`script`没有看到您的 _Layout.vbhtml 我不能肯定地说，但是由于您在每个页面上都运行了 javascript，因此您的 _Layout.vbhtml 上可能有您的标签

所以，把它移到你的 Index.vbhtml 中，**或者**把它放在`<head>`标签中，`@RenderSection("Scripts")`在你的 Layout.vbhtml 中使用 a 并在你的视图中使用：

```
@Section "Scripts"

@<script>
    // write JS here or reference a file using the src attribute
</script>

End Section 
```

这会将您的 Layout.vbhtml 之间的所有内容放置`@Section "SectionName"`在`End Section``@RenderSection("Scripts")`

**编辑：**

从您对 one.beat.consumer 的评论中，我想我看到了您的问题。但请理解我仍在猜测，因为我还没有看到你的代码 -**一个大问题，因为你没有提到你正在使用 jQuery Mobile**。

常规 MVC4 Web 应用程序和 jQuery Mobile 应用程序之间存在重大差异。

一个是：使用 jQM，您总是在同一个页面上——您通过 ajax 从服务器加载页面，然后将其剥离为`<div data-role="page">...</div>`. 这解释了为什么如果您将特定页面的脚本放在它们的`<head>`部分中，jQM 会忽略它。唯一`<head>`未被忽略的部分是加载的原始页面**，它并不总是您的主页**。

因此，要为特定页面加载脚本，您不能`<head>`使用 MVC 部分将其放入元素中。您需要在`<div data-role="page">`. *虽然如果你正在缓存你的页面，它只会触发一次，`pageshow`如果你希望它再次触发，你可能需要绑定到它（也许刷新视图模型）。*

最后，

你说你在你的`pageinit`处理程序中应用你的视图模型。每当从服务器获取页面并注入 DOM 时都会调用此方法。

如果您想让您的 js 不在视图中，您可以在 _Layout.vbhtml 中引用站点范围的 js 文件 (custom.js)`<head>`并使用：

```
$(document).on('pageinit', '#PageId', function(event) {
    /* do viewmodel stuff here */
}); 
```

每当一个`<div data-role="page">`with`id="PageId"`被获取并注入到 DOM 中时，这将运行。您可以在此处使用任何选择器，因此`.require-vm`可用于在`class="require-vm"`注入页面时触发。

# c# - VirtualPathProvider 不解析剃刀标记

> ID：12628620
> 
> 赞同：1
> 
> 时间：2012-09-27T19:21:27.923
> 
> 标签：c#, asp.net-mvc, razor, virtualpathprovider

如本文所述，我正在使用 VirtualPathProvider 从数据库中加载剃刀视图[。](http://blog.rocketbase.co.uk/2011/04/asp-net-mvc-virtual-path-provider/)

问题是当视图加载时，没有解析 Razor 标记。它正在页面上完全像这样呈现`"@inherits System.Web.Mvc.WebViewPage hello world`“

对于这个例子，我已经硬编码了方法返回的字符串`GetContent()`。

这是我的代码：

```
public class MvcVirtualPathProvider : VirtualPathProvider {
    // virtualPath example >>  "~/Views/View/21EC2020-3AEA-1069-A2DD-08002B30309D.cshtml"
    private static bool IsPathVirtual(string virtualPath)
    {
        string path = VirtualPathUtility.ToAppRelative(virtualPath);

        // returns true if the path is requested by the "ViewController" controller
        if (path.StartsWith("~/Views/TextualReporting/db/", StringComparison.InvariantCultureIgnoreCase))
        {
            return true;
        }
        return false;
    }

    public override bool FileExists(string virtualPath) {
        if (IsPathVirtual(virtualPath)) {
            SimpleVirtualFile file = (SimpleVirtualFile)GetFile(virtualPath);
            if (file.Exists) {
                return true;
            }
            return false;
        }
        return Previous.FileExists(virtualPath);
    }

    public override VirtualFile GetFile(string virtualPath) {
        if (IsPathVirtual(virtualPath)) {
            return new SimpleVirtualFile(virtualPath);
        }
        return Previous.GetFile(virtualPath);
    }

    // Simply return the virtualPath on every request.
    public override string GetFileHash(string virtualPath, System.Collections.IEnumerable virtualPathDependencies) {
        if (IsPathVirtual(virtualPath)) {               
            return virtualPath;
        }
        return base.GetFileHash(virtualPath, virtualPathDependencies);
    }

    private class SimpleVirtualFile : VirtualFile {
        private string content;

        public bool Exists {
            get { return (content != null); }
        }

        public SimpleVirtualFile(string virtualPath)
            : base(virtualPath) {
            GetContent();
        }

        public override Stream Open() {
            ASCIIEncoding encoding = new ASCIIEncoding();
            return new MemoryStream(encoding.GetBytes(this.content), false);
        }

        protected void GetContent() {
            if (IsPathVirtual(VirtualPath)) {                   
                this.content = "@inherits System.Web.Mvc.WebViewPage \r\n hello world";                    
            }
        }
    }

    // just implement the default override and return null if the path is a Virtual Path
    public override CacheDependency GetCacheDependency(string virtualPath,
        System.Collections.IEnumerable virtualPathDependencies, DateTime utcStart) {
        if (IsPathVirtual(virtualPath)) {
            return null;
        }
        return Previous.GetCacheDependency(virtualPath, virtualPathDependencies, utcStart);
    }
} 
```

# zend-framework - 如何使用 Zend_Date 和区域设置格式的缩写月份

> ID：12628633
> 
> 赞同：1
> 
> 时间：2012-09-27T19:22:24.163
> 
> 标签：zend-framework, locale, zend-date

我正在尝试使用使用用户语言环境的缩写月份设置长日期格式。这就是我现在所拥有的。

```
//getDateTimeObject('field') grabs a Zend_Date object of the field
$creationDate = $this->getDateTimeObject('objectCreated');
$creationDate->get(Zend_Date::DATE_LONG) 
```

这会产生适当的日期。对于 en_US，“2012 年 9 月 27 日”。对于 en_GB，“2012 年 9 月 27 日”。问题是我需要它使用缩写月份：en_US“2012 年 9 月 27 日”和 en_GB“2012 年 9 月 27 日”。

如何尊重语言环境并使用缩写月份？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T20:29:31.117

```
echo $creationDate->get(Zend_Date::DATE_MEDIUM); 
```

# java - Java IO 无法读取 Java Applet 下的输入文件

> ID：12628639
> 
> 赞同：1
> 
> 时间：2012-09-27T19:22:59.983
> 
> 标签：java, ioexception

Java在读取图像文件时抛出异常：

```
javax.imageio.IIOException: Can't read input file!
at javax.imageio.ImageIO.read(ImageIO.java:1275)
at UI.readMatrix(UI.java:27)
at MazeViewControl.init(MazeViewControl.java:45)
at sun.applet.AppletPanel.run(AppletPanel.java:424)
at java.lang.Thread.run(Thread.java:680) 
```

图像 IO 在作为 Java 应用程序运行时工作正常：

```
public class MazeViewControl extends JApplet {
UI ui;
MazeView view;
Maze maze;
int theme;
int option;
String filename="src/maze0.bmp";

public  void init() {
    ui=new UI();
    maze=new Maze();
        try {
            ui.readMatrix("src/maze0.bmp", maze, 1, 0, 0,0,319,239);
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }

public class UI {
    public UI(){
        return;
    }
/**
   * read and construct the map from a txt file
   * @param filename
   * @throws IOException 
   */
    public void readMatrix(String filename, Maze m, int theme, int option, int sx, int sy, int ex, int ey) throws IOException{
        /* pre-read the file*/

        //Create file for the source
        File input = new File(filename);
        int rows=0;
        int columns=0;
        //Read the file to a BufferedImage
        // Surround this with try/catch or have your method
        // throw an exception
        System.out.println(filename);
        BufferedImage image = ImageIO.read(input); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T19:26:05.270

这就是它应该如何工作的方式。小程序无法访问本地文件。您可能需要一个具有文件系统访问权限的签名小程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T19:35:10.223

这是意料之中的。

如果 Java 小程序可以自由访问所有本地文件，想象一下攻击某人的本地计算机将是多么容易。`java.io.File`在编写 Java 应用程序时，您可以使用它来读取文件。但是，如果您正在编写 Java 小程序，则必须将输入文件打包为 jar 的一部分，并将文件作为“资源”访问：

为了解决这个问题，您将需要使用以下方法：

```
YourClass.class.getClassLoader().getResourceAsStream("yourfile.txt") 
```

或者

```
InputStream inputStream = classLoader.getResourceAsStream("yourfile.txt") 
```

这很容易做到，可以在[这里](http://mindprod.com/jgloss/getresourceasstream.html)找到快速解释和用法。

# html - 使 div 忽略将边距设置为 0 auto 的父 div

> ID：12628644
> 
> 赞同：1
> 
> 时间：2012-09-27T19:23:14.303
> 
> 标签：html, css

如何忽略父 div 的样式

```
margin: 0 auto; 
```

我想忽略 div 的这种样式而不将其嵌套在其父级之外。这在 CSS 中可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T19:24:10.777

只需设置孩子的边距。这将覆盖父母的CSS。CSS 以分层方式工作，其中使用最具体的 CSS（“最接近”元素，因为没有更好的术语）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T19:30:56.473

是的，只为 div 设置一个值，例如

```
.parent { margin: 0 auto; }
.other-Div { margin: 0; } 
```

# android - 当我最小化并返回应用程序时应用程序崩溃屏幕变黑

> ID：12628645
> 
> 赞同：-1
> 
> 时间：2012-09-27T19:23:15.113
> 
> 标签：android, crash, minimize

当我最小化、关闭 3G 并返回应用程序时，我的应用程序崩溃了。此应用程序从 Internet（SAX 解析器）捕获 XML 信息，然后通过按主页按钮，关闭 3G 并返回到应用程序看起来是黑色的。

谢谢你的帮助

我的主要代码

```
 SitesList5101 sitesList5101 = null;

static final int DIALOG_ERROR_CONNECTION = 1;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.xmlultimoterceroo);

    TextView nemotecnico[];
    TextView precio[];
    TextView variacion[];
    TextView ttransado[];
    TextView pcierre[];
    TextView utrans[];

    TableRow tr[] = new TableRow[108];
    TableLayout layout = (TableLayout)findViewById(R.id.layout);

            try{

                SAXParserFactory spf = SAXParserFactory.newInstance();
                SAXParser sp = spf.newSAXParser();
                XMLReader xr = sp.getXMLReader();

                URL sourceUrl = new URL("http://www.bovalpo.com/cgi-local/xml_bcv.pl?URL=5101");
                MyXMLHandler5101 myXMLHandler = new MyXMLHandler5101();
                xr.setContentHandler(myXMLHandler);
                xr.parse(new InputSource(sourceUrl.openStream()));

            } catch (Exception e){
                System.out.println("XML PArsing Exc =" +e);
            }

    sitesList5101 = MyXMLHandler5101.sitesList5101;

    nemotecnico = new TextView[sitesList5101.getNemotecnico().size()];
    precio = new TextView[sitesList5101.getPrecio().size()];
    variacion = new TextView[sitesList5101.getVariacion().size()];
    ttransado = new TextView[sitesList5101.getTtransado().size()];
    pcierre = new TextView[sitesList5101.getPcierre().size()];
    utrans = new TextView[sitesList5101.getUtrans().size()];

    for(int i = 0; i < sitesList5101.getRegistro().size(); i++){

        nemotecnico[i] = new TextView(this);
        nemotecnico[i].setText(" "+ sitesList5101.getNemotecnico().get(i));
        nemotecnico[i].setTextColor(Color.parseColor("#000000"));
        nemotecnico[i].setTypeface(null, Typeface.BOLD);

        precio[i] = new TextView(this);
        precio[i].setText(" "+ sitesList5101.getPrecio().get(i));
        precio[i].setTextColor(Color.parseColor("#333333"));
        precio[i].setTypeface(null, Typeface.BOLD);

        variacion[i] = new TextView(this);
        variacion[i].setText(" "+ sitesList5101.getVariacion().get(i));
        variacion[i].setTextColor(Color.parseColor("#000000"));
        variacion[i].setTypeface(null, Typeface.BOLD);

        ttransado[i] = new TextView(this);
        ttransado[i].setText(" "+ sitesList5101.getTtransado().get(i));
        ttransado[i].setTextColor(Color.parseColor("#333333"));
        ttransado[i].setTypeface(null, Typeface.BOLD);

        pcierre[i] = new TextView(this);
        pcierre[i].setText(" "+ sitesList5101.getPcierre().get(i));
        pcierre[i].setTextColor(Color.parseColor("#333333"));
        pcierre[i].setTypeface(null, Typeface.BOLD);

        utrans[i] = new TextView(this);
        utrans[i].setText(" "+ sitesList5101.getUtrans().get(i));
        utrans[i].setTextColor(Color.parseColor("#333333"));
        utrans[i].setTypeface(null, Typeface.BOLD);

        nemotecnico[i].setTextSize(10);
        precio[i].setTextSize(11);
        variacion[i].setTextSize(11);
        ttransado[i].setTextSize(11);
        pcierre[i].setTextSize(11);
        utrans[i].setTextSize(11);

        Pattern pattern = Pattern.compile("^([a-z: ]*)?+(\\+?[0-9]+([,\\.][0-9]*)?)$");
        Matcher matcher = pattern.matcher(sitesList5101.getVariacion().get(i));
        if(!matcher.matches())

        variacion[i].setTextColor(Color.parseColor("#ff0000"));
        else
        variacion[i].setTextColor(Color.parseColor("#006633"));

    }

    int cont = sitesList5101.getNemotecnico().size();

    for(int i =0; i<cont; i++){
        tr[i] = new TableRow(this);

        tr[i].addView(nemotecnico[i], new TableRow.LayoutParams(1));
        tr[i].addView(precio[i], new TableRow.LayoutParams(2));
        tr[i].addView(variacion[i], new TableRow.LayoutParams(3));
        tr[i].addView(ttransado[i], new TableRow.LayoutParams(4));
        tr[i].addView(pcierre[i], new TableRow.LayoutParams(5));

        layout.addView(tr[i], new TableLayout.LayoutParams());

    }
}

/*********  AlertDialog *********************************************/
/*********  AlertDialog *********************************************/

  public boolean isOnline(Context c) {
        ConnectivityManager cm = (ConnectivityManager) c
        .getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo ni = cm.getActiveNetworkInfo();

        if (ni != null && ni.isConnected())
          return true;
        else
          return false;
        }

    @Override
    protected Dialog onCreateDialog(int id) {
      Dialog dialog = null;
      switch (id) {
      case DIALOG_ERROR_CONNECTION:
        AlertDialog.Builder errorDialog = new AlertDialog.Builder(this);
        errorDialog.setTitle("Problema de Conexión");
        errorDialog.setMessage("No tiene conexión a internet, es necesario para acceder al contenido");
        errorDialog.setNeutralButton("ACEPTAR",
        new DialogInterface.OnClickListener() {

          public void onClick(DialogInterface dialog, int id) {
            finish();
          }
        });

       AlertDialog errorAlert = errorDialog.create();
       return errorAlert;

      default:
        break;
      }
    return dialog;
    }

    /*********  AlertDialog *********************************************/
    /*********  AlertDialog *********************************************/

public void refrescar8(View view){
    Button button = (Button)findViewById(R.id.button1);

    if (!isOnline(this)) {
        if(view==button)
            button.setBackgroundResource(R.drawable.buttonrefresh7);
      showDialog(DIALOG_ERROR_CONNECTION); //displaying the created dialog.
    } else {
        if(view==button)
            button.setBackgroundResource(R.drawable.buttonrefresh7);
    onRestart();
    }
}

@Override
protected void onRestart() {
    // TODO Auto-generated method stub
    super.onRestart();
    Intent i = new Intent(xml5101.this, xml5101.class);
    startActivity(i);
    finish();
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T19:35:15.287

如果关闭 GSM，是否有 WIFI 连接或没有连接到互联网？如果没有互联网连接，访问 URL 将失败并引发异常，您可以捕获并打印到标准输出。您检查过 LogCat 输出吗？

# javascript - 尝试访问时无法读取未定义的属性“目标”文件

> ID：12628649
> 
> 赞同：1
> 
> 时间：2012-09-27T19:23:39.450
> 
> 标签：javascript, file-upload, filereader

我正在尝试更改文件上传图像以选择或单击此画布相关脚本中同一页面上的图像。

```
function aFileIsLoaded(e1)
{
        var filename = e1.target.files[0];
        var fr = new FileReader();
fr.onload = function(e2)
{
      backgroundimage = new Image();
      backgroundimage.src=e2.target.result;
     var context = document.getElementById('myCanvas').getContext('2d');
     context.canvas.width = backgroundimage.width;
     context.canvas.height = backgroundimage.height;
     context.drawImage(backgroundimage, 0, 0, backgroundimage.width, backgroundimage.height);

};
    fr.readAsDataURL(filename);
}

window.onload=function(){
var s = document.getElementById("fontsize");
s.value="48";
document.getElementById('loadpicture').addEventListener('change', aFileIsLoaded, false);
backgroundimagemode=NONE;
carpeInit();
update();
} 
```

以前，这个图像是这样调用的，文件是从桌面选择的

```
<input type="file" name="back" id="loadpicture" src="myimage.png" > 
```

现在我正在尝试在同一页面中加载图像：

```
<img src="myimage.png" name="back" id="loadpicture" onclick="aFileIsLoaded()"> 
```

但我收到此错误：

```
Uncaught TypeError: Cannot read property 'target' of undefined 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T00:43:38.937

您正在调用自定义函数：

```
function aFileIsLoaded(e1)
{
        var filename = e1.target.files[0]; 
```

此函数期望文件输入更改事件的 Event 对象实例作为其第一个也是唯一的参数传递。您没有在*onclick*处理程序中传递此参数*e1*

 *```
 onclick="aFileIsLoaded()"> 
```

解决方法是使用 DOM 查找来查找问题中的元素以读取其文件

```
 var filename = document.getElementById('loadpicture').files[0] 
```

由于该示例缺少 HTML 代码，因此答案可能不完整。

有关活动的更多信息

[https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener)*

# objective-c - 从 URL 加载图像但逐步显示

> ID：12628652
> 
> 赞同：0
> 
> 时间：2012-09-27T19:23:53.023
> 
> 标签：objective-c, ios

我有一个可以加载大约 5 张图像的屏幕，但它们是巨大的图像。现在我使用一个

```
NSURLRequest 
```

和一个：

```
 connectionDidFinishLoading 
```

..用于回调告诉我每个图像何时加载。

问题是图像会一张一张地弹出。有没有办法让它在加载时显示图像？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T23:00:55.647

您需要执行此操作的内容可作为 CGImageSource 方法获得。

首先，您使用异步 NSURLConnection 来获取数据。您将收到的数据添加到 NSMutableData 对象，因为它到达，所以数据对象变得越来越大，直到完成。

您还可以创建渐进式图像源：

```
CGImageSourceRef imageSourcRef = CGImageSourceCreateIncremental(dict); 
```

你会在这里和谷歌上找到很多例子如何设置所需的字典。

然后当数据到达时，您将 TOTAL 数据对象传递给此方法：

```
CGImageSourceUpdateData(imageSourcRef, (__bridge CFDataRef)data, NO); // No means not finished 
```

然后，您可以向图像源询问图像，该图像在下载时将是部分图像。使用 CGImage，您可以创建 UIImage。

当您获得最终数据时，您会更新上次的图像源：

```
CGImageSourceUpdateData(imageSourcRef, (__bridge CFDataRef)data, YES); 
```

然后，您使用图像源获取最终图像，您就完成了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T19:38:23.610

加载时显示，我不认为加载时`UIImageView`可以加载`UIImages`不完整的数据。我会选择 [AsyncImageView](https://github.com/nicklockwood/AsyncImageView)，它可以处理异步加载图像的所有负担。`UIActivityIndicator`而且已经添加到它。所以它会更加用户友好

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-16T09:04:54.600

您可以子类化`UIImageView`并使用它。

```
 -(void)connection:(NSURLConnection*)connection didReceiveResponse:(NSURLResponse*)response
    {
        imageData = [NSMutableData data];
        imageSize = [response expectedContentLength];
        imageSource = CGImageSourceCreateIncremental(NULL);
    }

        -(void)connection:(NSURLConnection*)connection didReceiveData:(NSData*)data
        {
            [imageData appendData:data];

             CGImageSourceUpdateData(imageSource, (__bridge CFDataRef)imageData, ([imageData length] == imageSize) ? true : false);
            CGImageRef cgImage = CGImageSourceCreateImageAtIndex(imageSource, 0, NULL);
            if (cgImage){
                UIImage* img = [[UIImage alloc] initWithCGImage:cgImage scale:1.0f orientation:UIImageOrientationUp];
                dispatch_async( dispatch_get_main_queue(), ^{
                    self.image = img;
                });
                CGImageRelease(cgImage);
            }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T20:15:55.370

使用块和 GCD 的 dispatch_async 方法。

看这个例子：

```
//communityDetailViewController.h 
```

@interface communityDetailViewController : UIViewController {

```
UIImageView *imgDisplay;
UIActivityIndicatorView *activity;

// the dispatch queue to load images
dispatch_queue_t queue; 
```

}

@结尾

//communityDetailViewController.m

```
- (void)loadImage 
```

{

```
[activity startAnimating];

NSString *url = @"URL the image";

if (!queue) {
    queue = dispatch_queue_create("image_queue", NULL);
}

dispatch_async(queue, ^{
    NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:url]];
    UIImage *anImage = [UIImage imageWithData:data];

    dispatch_async(dispatch_get_main_queue(), ^{
        [activity stopAnimating];
        activity.hidden = YES;
        if (anImage != nil) {
            [imgDisplay setImage:anImage];
        }else{
            [imgDisplay setImage:[UIImage imageNamed:@"no_image_available.png"]];
        }
    });
}); 
```

}

# postgresql - PostgreSQL SELECT 的速度是否会受到表上太多索引的不利影响？

> ID：12628654
> 
> 赞同：10
> 
> 时间：2012-09-27T19:24:01.243
> 
> 标签：postgresql, indexing

我已经读过，当数据库上有很多索引时，它会严重损害性能，但在 PostgreSQL 文档中我找不到任何关于它的信息。

我有一个非常大的表，有 100 列和 10 亿行，我经常需要在很多不同的领域进行大量搜索。

如果我添加很多索引（可能 10 个唯一列索引和 5 个或 7 个 3 列索引），PostgreSQL 表的性能会下降吗？

编辑：随着性能下降，我的意思是获取行（选择）的性能，数据库将每月更新一次，因此更新和插入时间不是问题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-27T19:26:52.837

当表的内容被修改时，索引会被维护（即`INSERT`, ）`UPDATE``DELETE`

PostgreSQL 的查询计划器可以决定何时使用索引，何时不需要索引，顺序扫描更佳。

因此，索引过多会损害修改性能，而不是获取。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T19:26:39.717

每个索引都必须更新，`insert`并且`update`涉及这些列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T05:32:36.103

我的网站上有一些图表：http: [//use-the-index-luke.com/sql/dml](http://use-the-index-luke.com/sql/dml)

> 索引是纯粹的冗余。它仅包含也存储在表中的数据。在写操作期间，数据库必须保持这些冗余一致。具体来说，这意味着插入、删除和更新不仅会影响表，还会影响保存受影响数据副本的索引。

章节标题暗示了索引可能产生的影响：

> 插入——不能直接从索引中受益
> 
> Delete — 为 where 子句使用索引
> 
> 更新——不影响表的所有索引

# apache - 在 EC2 linux 中使用 ZendFramework 时在操作页面上找不到页面

> ID：12628662
> 
> 赞同：0
> 
> 时间：2012-09-27T19:24:20.777
> 
> 标签：apache, zend-framework, amazon-ec2

我刚刚在我的 ec2 映像中设置了一个灯堆栈，现在我正在尝试在其中使用 ZendFramework 1.11.12。

所以这是我到目前为止所做的：

```
1\. Go to /etc/httpd/conf/httpd.conf and change all 'AllowOverride None' to 'AllowOverride All'. Restart apache;
2\. Set up an alias for zend_tool: 'alias zf=/path/to/bin/zf.sh'. I use zf for it;
3\. Use 'zf create project xxx' to create a project. Here I can go to the Index controller by entering 'ipAddress/xxx';
4\. Use 'zf create action test Index' to create a action called 'test' in the Index controller. And I failed on this step ... ... 
```

谁能告诉我我错过了什么？

先感谢您：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T19:59:40.963

只是错过了网址上的一个虚拟部分......没关系。所以 Zend 中 url 的语法是这样的：ipAdress/controller/action。我在行动之前错过了控制器。这就解释了答案。

# html - CSS：在这个例子中，设置右边距如何使元素的父元素变得可见？

> ID：12628666
> 
> 赞同：5
> 
> 时间：2012-09-27T19:24:37.267
> 
> 标签：html, css

在寻找可通过键盘访问的菜单时，我偶然发现了[这个问题](https://stackoverflow.com/questions/8741521/accessible-css-dropdown-menu)，它的答案是 CSS 下拉菜单[http://jsfiddle.net/cfWpE/](http://jsfiddle.net/cfWpE/)。它似乎在菜单中的锚点上使用样式而不是`:hover`在`<ul>`项目上使用样式来显示没有任何 Javascript 的子菜单，但我不知道如何。

比我更擅长 CSS 的人能解释一下这是如何工作的吗？我想尝试将其扩展到 3 级菜单，但如果不了解它是如何在两个级别上工作的，那将会很困难。

**为清楚起见进行了编辑：**

实际上让我感到困惑的不是键盘部分。我知道通过`:focus`当前焦点链接上的更新选项卡，但似乎适用于这些元素的唯一 CSS 规则是

```
ul.menu li.list a.category:hover,
ul.menu li.list a.category:focus,
ul.menu li.list a.category:active {
    margin-right:1px;
    background: black;
} 
```

我不明白将 margin-right 设置为 1 像素如何使父级`<li>`可见。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-01T16:22:48.220

这是实现下拉菜单的有趣技术。

列表项`.list`的负数很高`margin-top`，宽度为`250px`. 这会将它们的内容置于浏览器的视口之外。子锚点`a.category`具有完全相同的值的正边距顶部，因此它们对用户可见，就好像它们被正常定位一样。现在，the`a.category`和 the`ul.submenu`都已`float:left`应用。这就是为什么子菜单不会出现在锚点下方，而是出现在它旁边的原因。（但它没有顶部边距，所以它仍然是“不可见的”）两个元素 (`a.category`和`ul.submenu`) 都有`125px`宽度并且完全适合`li`宽度为`250px`. 现在悬停在锚点上`1px`利润。这使得两个元素都太宽而无法并排放入父容器中，因此浮动的子菜单会换行并突然出现在锚点下方 - TADA:-D

我希望你能听从我的解释——如果不问我需要澄清哪一部分；）

将其扩展到第三级是不可能的-我只会使用带有`display:block;`and的常规 css 菜单`hide`。但是，您可以使用绝对定位并将`top`值从非常高的负值切换到`0`悬停时，这将具有相同的效果。

[一般来说，我会小心使用它。一些搜索引擎将通过负边距或文本缩进隐藏的文本视为[黑帽 SEO](http://websearch.about.com/od/seononos/a/spamseo.htm)，并可能因此对其进行处罚。尽管谷歌可能足够聪明，可以将其识别为常规下拉菜单]

# jquery - 垂直站点上的多个全屏背景图像

> ID：12628669
> 
> 赞同：1
> 
> 时间：2012-09-27T19:25:11.740
> 
> 标签：jquery, css, background, fullscreen

使用 JQuery ScrollTo 插件，我创建了以下垂直站点[LINK](http://www.thenally.com/wordpress/)。基本页面架构如下：

```
<div id="fixed-menu">
     <!-- MAIN MENU FIXED TO TOP OF WINDOW -->
</div>

<div id="wrapper">
     <div id="mask">
          <div id="page1">
             <!-- PAGE 1 CONTENT -->
          </div>
          <div id="page2">
             <!-- PAGE 2 CONTENT -->
          </div>
          <div id="page3">
             <!-- PAGE 3 CONTENT -->
          </div>
          <div id="page4">
             <!-- PAGE 4 CONTENT -->
          </div>
     </div>
</div> 
```

我的问题是当尝试为每个单独的“页面”设置全屏背景图像时。我有使用 JQuery 插件 Fullscreenr 创建背景图像的经验，该图像可以正确适应不同的屏幕分辨率等。不过，我不熟悉如何为网站的每个“页面”设置不同的背景图像。我一直在考虑另一种方法可能是根据选择的菜单项触发背景图像的更改。有没有人对此事有任何经验或建议？我曾尝试堆叠图像，但我想避免在网站上的任何位置看到部分背景图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T19:31:33.153

看看 Jquery 航路点。基本上，这使您可以在站点滚动到某个点时执行 javascript 事件。 [http://imakewebthings.com/jquery-waypoints/](http://imakewebthings.com/jquery-waypoints/)

因此，您将设置每个“页面”出现在页面中的路径点，并相应地更改背景图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T18:51:42.510

由于很难让 JQuery Waypoints 成功运行，我最终只是在鼠标单击相关标题后更改了背景图像。因为该站点只是自动滚动（没有鼠标滚轮功能），所以这可以正常工作。

使用的JQuery代码如下：

```
<script type="text/javascript">
$(function() {
    $('a.panel-about').click(function(){
    $("#bgimg").attr('src',"<?php bloginfo('stylesheet_directory'); ?>/images/bg2.jpg");
    return false;
    });
});
</script> 
```

因此，当单击“panel-about”类的链接时，背景图像会从 html 中指定的现有 bg1.jpg 更改为 bg2.jpg。

# php - 双重查询从数据库中检索数据

> ID：12628670
> 
> 赞同：1
> 
> 时间：2012-09-27T19:25:19.817
> 
> 标签：php, xml

请帮助我在 php 中执行该过程，以便我获取从变量派生的数据。在这种情况下，我创建了一个用于创建 xml 文件的 php 文件。在这里，我得到了数据，即频道，我希望该频道中的每个父母都将输入数据。请看我的代码：

```
<?php
$dbhost = "localhost";
$dbuser = "root";
$dbpass = "";
$dbname = "db_epg";
mysql_connect($dbhost,$dbuser,$dbpass);
mysql_select_db($dbname);

$sql = "select distinct(channel_name) FROM epg";
$q   = mysql_query($sql) or die(mysql_error());
$xml = "<timetable start='00:00' end='24:00' title='Friday, September 28th, 2011'>";

while($r = mysql_fetch_array($q)){
     $CN   = $r['channel_name'];
     $xml .= "<channel>".$CN."</channel>";  

}   

    $xml .= "</timetable>";
    $sxe = new SimpleXMLElement($xml);
    $sxe->asXML("epg.xml");

    ?> 
```

我的代码的结果是：[http ://s9.postimage.org/rjsodf9mn/result.png](http://s9.postimage.org/rjsodf9mn/result.png)

如果我想做一个循环，在每个数据通道上都会没有数据子，那我该怎么办呢？

我尝试在这个**while**部分进行另一个查询：

```
while($r = mysql_fetch_array($q)){
$CN         = $r['channel_name'];
$xml .= "<channel>".$CN."</channel>";   

$sql2 = "select * FROM epg where channel_name='".$CN."'";
$q2  = mysql_query($sql2) or die(mysql_error());

while($r2 = mysql_fetch_array($q2)){
    $Mulai      = date('H:i', strtotime($r2['waktu_mulai']));
    $Selesai    = date('H:i', strtotime($r2['waktu_akhir']));
    $Title      = $r2['judul'];
    $Desk       = $r2['sinopsis'];

      $xml .= "<event start='".$Mulai."' end='".$Selesai."'>";
      $xml .= "<title>".$Title."</title>";
      $xml .= "<description>".$Desk."</description>"; 
      $xml .= "</event>";   
    }

} 
```

但我失败了。有人能帮我吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T02:45:39.483

尝试修改您的代码，如下所示，请检查语法错误，因为我没有机会尝试它:)

```
while ($r = mysql_fetch_array($q)) {
   // open channel header
   $CN  = $r['channel_name'];
   $xml .= "<channel name='".$CN."'>";   

   // event details for channel
   $sql2 = "select * FROM epg where channel_name='".$CN."'";
   $q2  = mysql_query($sql2) or die(mysql_error());
   while($r2 = mysql_fetch_array($q2)) {
      $Mulai      = date('H:i', strtotime($r2['waktu_mulai']));
      $Selesai    = date('H:i', strtotime($r2['waktu_akhir']));
      $Title      = $r2['judul'];
      $Desk       = $r2['sinopsis'];
      $xml .= "<event start='".$Mulai."' end='".$Selesai."'>";
      $xml .= "<title>".$Title."</title>";
      $xml .= "<description>".$Desk."</description>"; 
      $xml .= "</event>";   
   }

   // close channel
   $xml .= "</channel>";   
} 
```

你也可以在这里看到代码 这里[的代码](https://gist.github.com/3797653)

# highcharts - 自定义工具提示并将数字格式化为高图的小数点后 2 位

> ID：12628673
> 
> 赞同：39
> 
> 时间：2012-09-27T19:25:29.387
> 
> 标签：highcharts

我正在使用 Highcharts 图表来显示饼图。我想更改工具提示以显示实际`data`字段以及系列名称来代替百分比值。

[这是 jsFiddle 的示例](http://jsfiddle.net/ha3tX/)

如果您检查上面的示例，您会发现 2 件事

1.  工具提示是：pointFormat: '{series.name}: **{point.percentage}%** ' 即

    浏览器份额：一些百分比值

我想展示：

```
Browser share: 40 (data value instead of percentage) 
```

2\. 接下来是饼图中每个部分的显示文本。可以看到`n`小数位数使图表看起来非常难看。

我想只显示最多 2 个小数点的数字，就像`percentageDecimals: 1`工具提示中使用的那样。

我为第一个尝试了一些东西，比如返回对象数组的 series.data。还有 series.data[0]。但目前没有成功

我怎样才能做到这两件事？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-08-06T10:16:19.060

您可以使用[格式化字符串](http://www.highcharts.com/docs/chart-concepts/labels-and-string-formatting)来帮助您格式化数字和日期。

## x 小数位

### [查看 JSFiddle](http://jsfiddle.net/highcharts/AYWsW/)

```
// point.percentage = 29.9345816
pointFormat: '{point.percentage:.0f}%' // returns: `30%` - (rounds to nearest)
pointFormat: '{point.percentage:.1f}%' // returns: `29.9%`
pointFormat: '{point.percentage:.2f}%' // returns: `29.93%`
pointFormat: '{point.percentage:.3f}%' // returns: `29.935%` 
```

## 千位分隔符

### [查看 JSFiddle](http://jsfiddle.net/highcharts/rmTWS/)

```
// point.percentage = 1029.9
{point.percentage:,.0f} // returns: `1,030`
{point.percentage:,.1f} // returns: `1,029.9` 
```

* * *

### 在文档中阅读更多内容：

[文档：http://www.highcharts.com/docs/chart-concepts/labels-and-string-formatting](http://www.highcharts.com/docs/chart-concepts/labels-and-string-formatting)

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2012-09-27T19:48:53.500

`pointFormat`您可以通过将工具提示从更改为`pointFormat: '{series.name}: <b>{point.percentage}%</b>',`来更改它以显示数据值`pointFormat: '{series.name}: <b>{point.y}%</b>',`

`Highcharts.numberFormat()`您可以使用格式化程序中的函数对数字进行四舍五入：

```
formatter: function() {
    return '<b>'+ this.point.name +'</b>: '+ Highcharts.numberFormat(this.percentage, 2) +' %';
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-10T03:25:31.493

这是关于工具提示格式化程序的详细说明[http://api.highcharts.com/highcharts#tooltip.formatter](http://api.highcharts.com/highcharts#tooltip.formatter)

```
this.point (not shared) / this.points[i].point (shared) 
```

`this.points[i].point`如果`this.point`不起作用，请尝试

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-12T19:57:35.583

显示实际数据值的最简单方法是省略格式化程序函数。工具提示将默认显示实际数据。

# gnu - 列出库的符号

> ID：12628675
> 
> 赞同：0
> 
> 时间：2012-09-27T19:25:38.233
> 
> 标签：gnu, libtool

因为`.so`我用`nm -gC`，因为`.a`我只用`nm`。我应该用来做`.la`什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T19:29:17.023

`.la`文件只是 使用的辅助文件`libtool`，因此它们不包含可执行代码和符号。

# php - 教程 - 创建新闻项目。提交新文章后得到404

> ID：12628676
> 
> 赞同：1
> 
> 时间：2012-09-27T19:25:50.557
> 
> 标签：php, codeigniter

了解**Code Igniter**，并遵循本教程的这个特定部分：

`http://codeigniter.com/user_guide/tutorial/create_news_items.html`

一切正常，直到我单击*“创建新闻项目”*。我收到**404**页面，我的 URL 栏如下所示：

`http://localhost/tut/index.php/news/localhost/tut/index.php/news/create`

想也许是路线的错：

```
$route['default_controller'] = "news/index";
$route['404_override'] = '';
$route['news/(:any)'] = 'news/view/$1';
$route['news'] = 'news'; // what's this for?
$route['news/create'] = 'news/create'; 
```

另外，我的 config.php：

```
$config['base_url'] = 'localhost/tut'; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T19:31:35.867

根据[this thead](http://codeigniter.com/forums/viewthread/209923/)，您的`base_url`设置不正确。请按照线程的建议。

# php - JSON 无效（JSONview），但我不知道如何

> ID：12628683
> 
> 赞同：2
> 
> 时间：2012-09-27T19:26:20.113
> 
> 标签：php, json, json-view

好吧，我已经疯了。我正在从 PHP 输出 JSON，而 Chrome 和 Firefox 的 JSON View 扩展声称它是无效的。这两个扩展在[JSON View 的示例](http://jsonview.com/example.json)上都能正常工作，所以我的 JSON 似乎确实*有*问题——但我不知道是什么。

火狐版本有错误信息：

```
There was an error parsing the JSON document. The document may not be well-formed. 
```

Chrome 版本缺少此类错误消息，但仍将 JSON 打印为纯文本。

我*正在*设置标头，如下所示：`header('Content-Type: application/json');`我在 Firebug 和 Chrome 的开发工具中检查了响应标头；在这两种情况下都正确设置。删除它会隐藏 Firefox 版本中的错误消息，并且纯文本不是等宽字体，仅此而已。

完整的请求标头：

```
Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Cache-Control:max-age=0
Connection:keep-alive
Cookie:msgPublishID=1347362550,1345649049; logout_rem=1; sh_rand=625703e7f9f9e03efabaef56f52ff97d7f68bc67; username=kryan; password=f85720746a490ece4dd7a945f5c9ed8e25b15f1f; fullname=Kevin+Ryan; user_type=1
Host:localhost
Pragma:no-cache
User-Agent:Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.89 Safari/537.1 
```

完整的响应标头：

```
Connection:Keep-Alive
Content-Length:371
Content-Type:application/json
Date:Thu, 27 Sep 2012 19:12:52 GMT
Keep-Alive:timeout=5, max=99
Server:Apache/2.4.2 (Win32) OpenSSL/1.0.1c PHP/5.4.4
X-Powered-By:PHP/5.4.4 
```

我已经对 JSON 本身进行了许多变体，但是当像这样简单的事情发生时，我无法想象这是 JSON 的问题：

```
{"session":"expired"} 
```

仍然失败。我反复检查过；这实际上是服务器响应的全部内容，但 JSON View 仍然抱怨。对于更复杂的 JSON，我一直在使用

```
echo json_encode($output, JSON_PRETTY_PRINT); 
```

其中`$output`是关联数组；输出看起来完全正确，但 JSON View 仍在抱怨。这是`echo`文件中唯一没有被注释掉的。

那么这里到底出了什么问题呢？我真的需要 JSON 视图；我经常使用非常大的 JSON，折叠和展开对象和数组的能力对于调试我的应用程序至关重要。[这个在线 JSON 查看器](http://jsonviewer.stack.hu/)似乎可以工作，但如果我每次测试这些 PHP 文件时都必须复制和粘贴这些文件的输出，我的工作效率就会受到影响。

编辑：我发现有效的一件事是如果我这样做：

```
<?php
    header('Content-Type: application/json');
    die('{"debug":true}');
    // remainder of the program as-is, starting with...
    require('dbinfo.php'); 
```

如果我再这样做：

```
<?php
    header('Content-Type: application/json');
    require('dbinfo.php'); // note this comes before the die statement
    die('{"debug":true}');
    // remainder of the program as-is 
```

我再次得到错误。

所以这意味着`dbinfo.php`导致问题的原因。

编辑：对不起，我已经`dbinfo.php`从这个问题中删除了，因为它可能包含不应该公开的敏感数据（即使我去掉了明显的东西）。由于 的内容*不*`dbinfo.php`相关，因此删除它似乎更安全。请看下面我的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T21:13:04.630

啊。

我想通了：BOM 把事情搞砸了，当然它也是完全不可见的。在没有 BOM 的情况下检查并将编码更改为 UTF-8 完全解决了问题。

我不知道这个BOM的东西是PHP的设计问题还是Unicode的设计问题，但它肯定是令人讨厌的。

# ruby - 如何定义我的 ENV 变量？

> ID：12628686
> 
> 赞同：0
> 
> 时间：2012-09-27T19:26:34.877
> 
> 标签：ruby, ruby-on-rails-3, environment-variables

我的生产和开发环境都有以下配置。

```
config.action_mailer.smtp_settings = {
  :address   => "smtp.mandrillapp.com",
  :port      => 587,
  :user_name => ENV["MANDRILL_USERNAME"],
  :password  => ENV["MANDRILL_PASSWORD"]
} 
```

我用谷歌搜索了一段时间，但没有找到让我理解的答案。如何为我的 Rails 项目设置用于开发和生产的 ENV 变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T02:29:18.730

For development, you'll want to use a configuration file that is ignored in version control. It could be YAML, JSON, ruby, bash... it's a trivial choice. You'll then use an initializer file to make sure these variables are loaded when the app boots. For production, you can copy the config file (it may even have different settings) into the right place as part of your deploy process; or if you're using heroku, you can set these from command line using `heroku config:add YADA=yada`.

Here's a basic example with settings coming from a YAML file:

```
# config/settings.yml
development:
 MANDRILL_USERNAME=secret_username
 MANDRILL_PASSWORD=secret_password
 ANOTHER_SECRET_SETTING=the_list_goes_on_and_on
production:
 MANDRILL_USERNAME=different_username
 MANDRILL_PASSWORD=another_password
 ANOTHER_SECRET_SETTING=get_the_idea?

# .gitigore
# ...
config/settings.yml

# config/initializers/environment_settings.rb
environment_settings = YAML.load_file('./config/settings.yml')[Rails.env]
environment_settings.each do |key, value|
  ENV[key] ||= value
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T19:38:05.027

它们是环境变量；您不会将它们设置为开发和生产。

您可以通过多种方式设置应用程序配置变量，或者您可以在运行前在 shell 中设置它们，或者您可以使用特定于环境的名称，或者...

# f5 - 具有非 HTTP 流量的 F5 OneConnect

> ID：12628687
> 
> 赞同：0
> 
> 时间：2012-09-27T19:26:36.157
> 
> 标签：f5, big-ip

是否可以将 F5 OneConnect 用于非 http 流量？似乎有可能创建可以确定何时附加/分离的 iRules，但我还没有看到任何示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T20:00:17.483

是的，有可能。根据 F5 AskF5 [SOL7208](http://support.f5.com/kb/en-us/solutions/public/7000/200/sol7208.html)：

```
The OneConnect profile may be used with any TCP protocol, 
but will function only when applied to virtual servers that 
are processing simple request/response protocols where 
transaction boundaries are explicitly obvious, such as those 
in which each request and each response is contained within 
a single packet. 
```

所以它仍然取决于你想要负载平衡的协议。你要负载平衡什么协议？

# php - 删除字符串中较小的图像

> ID：12628692
> 
> 赞同：0
> 
> 时间：2012-09-27T19:26:48.540
> 
> 标签：php, image, detect

我写这篇文章是因为我有这个问题：

我有一个带有 html 字符的字符串。

我想要的是从这个字符串中删除所有小于 10px 宽度的图像。我怎么能在 PHP 中做到这一点？

我一直在考虑使用一些循环，但我不知道如何实现它。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T19:57:51.900

你可以试试

```
$final = array();
$images = array();
$template = "<img src='%d.jpg' height='%d' width='%d' />";

for($i = 0; $i < 10;  $i++)
{
    $height = mt_rand(9, 12);
    $weight = mt_rand(9, 12);
    $images[] = sprintf($template , $i,$height,$weight);

}

var_dump($images);

foreach($images as $image)
{
    $attribute = simplexml_load_string($image);
    $attribute = $attribute->attributes();

    if((int) $attribute['height'] <  10 or (int) $attribute['width'] < 10)
        continue ;
    $final[] = $image;
}

var_dump($final); 
```

输出

```
array
  0 => string '<img src='0.jpg' height='11' width='9' />' (length=41)
  1 => string '<img src='1.jpg' height='12' width='9' />' (length=41)
  2 => string '<img src='2.jpg' height='10' width='11' />' (length=42)
  3 => string '<img src='3.jpg' height='12' width='11' />' (length=42)
  4 => string '<img src='4.jpg' height='11' width='9' />' (length=41)
  5 => string '<img src='5.jpg' height='9' width='11' />' (length=41)
  6 => string '<img src='6.jpg' height='9' width='9' />' (length=40)
  7 => string '<img src='7.jpg' height='10' width='9' />' (length=41)
  8 => string '<img src='8.jpg' height='12' width='9' />' (length=41)
  9 => string '<img src='9.jpg' height='10' width='10' />' (length=42)
array
  0 => string '<img src='2.jpg' height='10' width='11' />' (length=42)
  1 => string '<img src='3.jpg' height='12' width='11' />' (length=42)
  2 => string '<img src='9.jpg' height='10' width='10' />' (length=42) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-27T19:36:04.983

我会尝试[http://php.net/manual/en/function.getimagesize.php](http://php.net/manual/en/function.getimagesize.php)

# css - 在 iPhone/iPad 上渲染 Rails 站点，而不支持全新的视图或 html。轻松破解这个？

> ID：12628695
> 
> 赞同：1
> 
> 时间：2012-09-27T19:26:58.997
> 
> 标签：css, ruby-on-rails-3, sass

我有一个现有的 Rails 网站，它在 iPhone 和 iPad 上的渲染效果很差。我无法捏住屏幕并放大或缩小，图像很大并且不在页面上，背景不会延伸到整个宽度。

目前我不需要整个移动站点，但我希望主页自动缩小，以便整个页面在 iPhone 上呈现，并调整大小以自动填满屏幕。另外，我希望用户能够放大和缩小（就像在任何其他网站上一样）。

有没有我可以使用的 CSS hack？一段识别页面的代码正在被 iPhone 访问并根据 X 和 Y 尺寸呈现页面？我可以粘贴到样式表中的东西吗？我想在不支持移动设备的全新视图或 html 的情况下做到这一点。我正在使用 Rails 和 SCSS。

发布的是主页的 SCSS：

```
.main#home {
    background-image:url(blue-back.jpg); 
    width:100%; 
    position:relative;

    #airplane {
        position:absolute; 
        top:-441px; 
        left:40px; 
        font-size:24px; 
        color:white;

        #banner {
            position:absolute; 
            left:0; 
            top:0; 
            background-image: url(home-banner.png); 
            width:590px;
            height:104px; 
            background-repeat:no-repeat;
        }
        #plane {
            position:absolute; 
            left:587px; 
            top:-19px; 
            background-image: url(airplane.png); 
            width:59px;    
            height:39px; background-repeat:no-repeat;
        }
    }
    #welcome {
        position:absolute; 
        top:-327px; 
        left:0px; 
        padding:31px 39px 60px 39px; 
        background-color:$white;    
        @include border-radius(6px); 
        @include box-shadow(0 0 5px rgba(0, 0, 0, 0.5)); 
        width:440px;

        h2 {
            line-height:1.4; 
            font-size:23px; 
            color:$textfont; 
            text-align:center;
        }
        .button-wrapper {
            position:absolute; 
            width:520px; 
            left:0; 
            bottom:-33px; 
            text-align:center;

            div {
                display: inline-block; 
                text-align: center;
            }
        }
    }
    #bottom-actions {
        text-align:center; 
        padding:30px 225px 60px; 
        display:inline-block;

        button { 
            margin: 0 8px; 
            float:left;
        }
    }
}
#grass {
    height:44px; 
    width:100%; 
    border-bottom:15px solid $white; 
    background-image: url(grass.jpg); 
    background-repeat:repeat-x;
}
#home-over {
    position:absolute; 
    top:-13px; left:22px;
}
#vimeo-video {
    text-align: center;

    .vim-video {
        position: relative; 
        border: 12px ridge #253032;
    }
}
#why-use {
    h3 {
        color:$white; 
        font-family:$lobster; 
        width:100%; 
        text-align:center; 
        padding:30px 0 25px 0; 
        @include text-shadow;
    }
    #why-use-wrapper {
        display:inline-block; 
        width:100%;

        .block {
            background-color:$backgray; 
            margin-right:30px; 
            padding:25px; 
            width:270px; 
            position:relative; 
            float:left; 
            @include border-radius(4px);

            img {
                width:100%;
            }
            h4 {
                margin:8px 0 4px; 
                color:$blue
            }
            p {
                line-height:1.5; 
                color:#333333; 
                font-size:14px;
            }
        }
        .block.last {
            margin-right:0px;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T20:53:04.863

查看[CSS Media Queries](http://www.w3.org/TR/css3-mediaqueries/)，它允许根据屏幕大小应用不同的 CSS。

这是一个使用媒体查询来设置 a 字体大小的 css 示例`h2`：

```
@media all and (max-width: 1000px) and (min-width: 700px) {
  h2 {
     font-size: 12px;
  }
} 
```

[这](http://css-tricks.com/css-media-queries/)是一个很好的概述，其中包含其工作原理的示例。

# haskell - OverlappingInstances 有什么好的用例吗？

> ID：12628700
> 
> 赞同：16
> 
> 时间：2012-09-27T19:27:10.840
> 
> 标签：haskell

我正在设计一个库，它将极大地受益于 OverlappingInstances 编译器标志的使用。但是[每个人都](https://stackoverflow.com/questions/10830757/is-there-a-list-of-ghc-extensions-that-are-considered-safe)在谈论[这个](https://stackoverflow.com/questions/10942136/whats-so-bad-about-overlappinginstances)扩展并警告它的危险。我的问题是，在 hackage 的任何地方都有很好地使用这个扩展的例子吗？关于如何封装坏处并正确使用扩展是否有任何经验法则？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-27T21:40:27.107

也许一个思想实验会让这个扩展有点神秘。

假设我们已经放弃了使用多个模式案例定义的函数必须全部在一个地方的限制，这样您就可以`foo ("bar", Nothing) = ...`在模块的顶部编写，然后在`foo ("baz", Just x) = ...`其他地方有案例。事实上，让我们更进一步，允许在*不同的模块中完全*定义案例！

如果您认为这听起来会令人困惑且容易出错，那么您是对的。

为了恢复一些理智，我们可以添加一些限制。例如 (ha, ha)，我们可以要求以下属性保持：

*   在任何使用这种函数的地方，给定的参数必须*完全匹配一种*模式。其他任何东西都是编译器错误。
*   添加新模式（包括通过导入另一个模块）永远不应改变有效代码的含义——要么选择相同的模式，要么产生编译器错误。

应该清楚的是，匹配简单的构造函数，比如`True`or`Nothing`是很简单的。我们也可以稍微手动一下，并假设编译器可以消除文字的歧义，比如`"bar"`和`"baz"`以上。

另一方面，用 like 模式绑定参数`(x, Just y)`变得尴尬——编写这样的模式意味着放弃编写类似`(True, _)`或`(False, Just "foobar")`以后的模式的能力，因为这会产生歧义。更糟糕的是，模式保护变得几乎没用，因为它们需要非常普遍的匹配。许多常见的习语会产生无穷无尽的歧义头痛，当然编写一个“默认”的贯穿模式是完全不可能的。

这大致是类型类实例的情况。

我们可以通过放宽所需的属性来重新获得一些表达能力：

*   在任何使用这种函数的地方，它必须*至少匹配一种*模式。没有匹配是编译器错误。
*   如果使用一个函数以使多个模式匹配，则将使用*最具体*的模式。如果没有唯一的最特定模式，则会产生错误。
*   如果以与一般实例匹配的方式使用函数，但可以在运行时将其应用于与更具体实例匹配的参数，则这是编译器错误。

请注意，我们现在处于这样一种情况，即仅导入一个模块就可以通过将一个新的、更具体的模式带入范围来改变函数的行为。在涉及高阶函数的复杂情况下，事情也可能变得模糊不清。尽管如此，在许多情况下，问题是不太可能出现的——例如，在库中定义一个通用的失败模式，同时让客户端代码在需要时添加特定的案例。

这就是你的大致位置`OverlappingInstances`。正如上面示例中所建议的，如果创建新的重叠总是不可能或不希望的，并且不同的模块最终不会看到不同的、冲突的实例，那么它可能没问题。

真正归结为，`OverlappingInstances`在“开放世界”假设下，任何可能的实例都可以在以后添加，因此消除的限制是为了使使用类型类表现得更加明智。通过放宽这些要求，您自己承担了这些负担；因此，请仔细考虑可以添加新实例的所有方式，以及这些场景中的任何一个是否是一个重大问题。如果您确信在晦涩难懂的极端情况下没有什么可以打破，那么请继续使用扩展。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-27T20:15:08.297

大多数人请求重叠实例是因为他们想要约束导向推理而不是类型导向推理。类型类是为类型导向推理而设计的，而 Haskell 没有为约束导向推理提供优雅的解决方案。

但是，您仍然可以通过使用新类型来“封装优点”。给定以下容易出现重叠实例的实例定义：

```
instance (SomeConstraint a) => SomeClass a where ... 
```

您可以改为使用：

```
newtype N a = N { unN :: a }

instance (SomeConstraint a) => SomeClass (N a) where ... 
```

现在 Haskell 的类型类系统有一个适当的特定类型来匹配 (ie `N a`)，而不是无缘无故地匹配每个单一类型。这使您可以控制实例的范围，因为现在只有包装在`N`newtype 中的内容才会匹配。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-28T08:34:20.727

`OverlappingInstances`允许您编写许多有用的东西，否则在类型类级别无法实现，其中绝大多数可以重新组织以使用单个功能依赖项（此处以实物多态风格编写）

```
class TypeEq (a :: k) (b :: k) (t :: Bool) | a b -> t where
  typeEq :: Proxy a -> Proxy b -> HBool t 
```

目前只能使用`OverlappingInstance`. 用例的示例包括 Oleg 将 OOP 编码到 Haskell 中。因此，我的一个很好使用的例子`OverlappingInstances`是[经典 HList 论文中的](http://code.haskell.org/HList/Data/HList/TypeEqO.hs)[这个实现`TypeEq`](http://code.haskell.org/HList/Data/HList/TypeEqO.hs)

这个特殊的功能可以通过编译器支持非常简单地提供（甚至在类型函数而不是fundep级别上工作），因此在某个地方使用TypeEq粘贴单个模块对我来说似乎不是那么糟糕。

当我从事危险的类型类黑客攻击时，我经常发现`IncoherentInstances`行为（选择第一个匹配的实例）更容易推理和更灵活，因此至少在设计的探索阶段使用它。一旦我有一些东西可以做我想做的事，我就会尝试摆脱扩展，特别注意那些表现不佳的东西（比如这些）。

# eclipse - 带有 Eclipse Juno 和 J2EE Preview 服务器的简单 Servlet

> ID：12628704
> 
> 赞同：7
> 
> 时间：2012-09-27T19:27:28.570
> 
> 标签：eclipse, servlets

我正在尝试使用 Eclipse Juno 创建我的第一个 HelloWorld servlet 并在 J2EE Preview Server 中查看它。

这是我的 Servlet 类：

```
import java.io.IOException;
import java.io.PrintWriter;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 * Servlet implementation class HelloWorld
 */
public class HelloWorld extends HttpServlet {
    private static final long serialVersionUID = 1L;

    /**
     * @see HttpServlet#HttpServlet()
     */
    public HelloWorld() {
        super();
        // TODO Auto-generated constructor stub
    }

    /**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        response.setContentType("text/html");
        PrintWriter pw = response.getWriter();
        pw.println("<html>");
        pw.println("<head><title>Hello World</title></title>");
        pw.println("<body>");
        pw.println("<h1>Hello World</h1>");
        pw.println("</body></html>");
    }

    /**
     * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
    }

} 
```

这是我的 eclipse 自动生成的 web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  <display-name>HelloWorld</display-name>
  <welcome-file-list>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>default.html</welcome-file>
    <welcome-file>default.htm</welcome-file>
    <welcome-file>default.jsp</welcome-file>
  </welcome-file-list>
  <servlet>
    <description></description>
    <display-name>HelloWorld</display-name>
    <servlet-name>HelloWorld</servlet-name>
    <servlet-class>HelloWorld</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>HelloWorld</servlet-name>
    <url-pattern>/HelloWorld</url-pattern>
  </servlet-mapping>
</web-app> 
```

当我选择“在服务器上运行”>“J2EE 预览”时，我得到这个：

> 未找到错误404
> 
> 此服务器上没有上下文匹配或处理此请求。此服务器已知的上下文是：
> 
> 你好世界（/HelloWorld）

我在哪里做错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T07:12:12.190

在“J2EE Preview”服务器中，上下文路径是项目的名称。当您启动服务器时，这会列出所有可用的上下文路径。

例如，如果您的应用程序名为“app1”，则您的 URL 将为“http://localhost:8080/app1/HelloWorld”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T18:50:49.257

我有同样的问题，无法让它工作。我创建了一个更简单的应用程序，只是一个 hello world JSP 页面。

这个过程非常基本，您创建一个 web 动态项目并在 WebContent 目录下创建一个 index.jsp 文件，这应该足以通过运行方式启动您的应用程序 -> 在服务器中运行 -> J2EE 预览，但总是得到：

404 not found 此服务器上没有匹配或处理此请求的上下文。此服务器已知的上下文是：test(/test)

我听说 eclipse juno 不如 indigo 稳定，我刚刚下载了 indigo Java EE 版本，完全一样，它工作正常，没有问题。

编辑：我忘了提到您可以下载另一个应用程序服务器，例如 JBoss 或 Glassfish，并尝试在它们上运行您的应用程序，这应该可以解决您的问题。

您可以尝试通过将所有文件和文件夹删除到您的工作区中来解决此问题，删除 .metadata 文件夹及其所有内容，启动 eclipse 并重试这可能有效。

希望这可以帮到你。问候！

# emacs - Emacs 中 SLIME 的语法高亮模式

> ID：12628706
> 
> 赞同：2
> 
> 时间：2012-09-27T19:27:31.083
> 
> 标签：emacs, elisp, slime

如何在 emacs 中为 SLIME 启用语法高亮模式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T20:24:23.260

我猜你所说的 SLIME 是指 SLIME REPL。它使用**repl**主要模式，你不能只为它启用字体锁定，因为已经启用了一个，它与**lisp-mode**和**clojure-mode**中的完全不同。您最好的选择可能是使用**repl-mode**的字体锁定面。[这篇文章](https://groups.google.com/forum/#!topic/clojure/jYShTPC_ppk)可能会有所帮助。

# php - PHP, SimpleXMLIterator, RecursiveIteratorIterator

> ID：12628707
> 
> 赞同：0
> 
> 时间：2012-09-27T19:27:42.127
> 
> 标签：php, simplexml

我试图理解我正在研究的代码的一小部分，这是代码的[链接](http://pastebin.com/7ixuQWG3)，我不明白的部分是这样的：

```
new RecursiveIteratorIterator($it, 1) 
```

关于这部分我不明白的是第二个参数，我试图使用这个参数的值，我认为它是关于 XML 结构的，但它的逻辑有点奇怪，所以如果有人可以向我澄清关于第二个参数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T19:44:54.483

好的，让我分解一下

您首先需要了解的是这一行：

```
 $it = simplexml_load_string($xmlstring, 'SimpleXMLIterator'); 
```

来自 PHP 文档

> 您可以使用此可选参数，以便 simplexml_load_string() 将返回指定类的对象。

这意味着所有输出都将使用`SimpleXMLIterator`，并且迭代的最佳方法是使用`RecursiveIteratorIterator`

`Recursion`是以自相似的方式重复项目的过程。[见维基](http://en.wikipedia.org/wiki/Recursion)

例子

```
$xml = '
<movies>
  <movie>abcd</movie>
  <movie>efgh</movie>
  <movie>
    <name> Test </name>
    <type> Action </type>   
    </movie>    
</movies>';

echo "<pre>" ;
echo "With Just SimpleXmlIterator\n";

foreach (new SimpleXmlIterator($xml) as $value ) {
    print($value . PHP_EOL);
}

echo "<pre>" ;
echo " RecursiveIteratorIterator \n";

foreach (new RecursiveIteratorIterator  (new SimpleXmlIterator($xml)) as $value ) {
    print(trim($value) . PHP_EOL);
} 
```

输出 1

```
With Just SimpleXmlIterator
abcd
efgh 
```

输出 2

```
RecursiveIteratorIterator 
abcd
efgh
Test
Action 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T19:29:14.857

您应该阅读[构造函数](http://php.net/manual/en/recursiveiteratoriterator.construct.php)的文档。在此处复制相关部分：[`RecursiveIteratorIterator`](http://php.net/manual/en/class.recursiveiteratoriterator.php)

可选**模式**。可能的值为

*   **RecursiveIteratorIterator::LEAVES_ONLY** - 默认值。列表只在迭代中离开。
*   **RecursiveIteratorIterator::SELF_FIRST** - 列出迭代中的叶子和父母，父母先来。
*   **RecursiveIteratorIterator::CHILD_FIRST** - 列出迭代中的叶子和父节点，叶子在前。

# c# - 使用 powershell 设置事件日志“最大大小”操作

> ID：12628708
> 
> 赞同：2
> 
> 时间：2012-09-27T19:27:43.267
> 
> 标签：c#, powershell, event-log

查看事件日志属性时（在 Server 2008 中），您可以为达到最大事件日志大小时发生的情况设置三个操作：

*   根据需要覆盖事件
*   满时归档日志
*   不要覆盖事件

使用 Powershell，我可以使用[limit-eventlog](http://technet.microsoft.com/en-us/library/hh849843.aspx)来设置事件日志保留，以将其设置`OverflowAction`为 DoNotOverwrite 或 OverwriteAsNeeded，但我似乎无法`Archive the log when full`选择操作。

有什么想法可以通过powershell选择这个选项吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T20:00:05.970

唯一的方法（IMO）是修改`registry`. 下面是一个为应用程序日志设置“完整时归档日志”操作的示例：

```
new-ItemProperty -path HKLM:\SYSTEM\CurrentControlSet\services\eventlog\Application `
-name AutoBackupLogFiles -Value 1 -PropertyType 'dword' 
```

如果之前选择了选项，则密钥已经存在，因此只需将密钥值设置为 1：

```
set-ItemProperty -path HKLM:\SYSTEM\CurrentControlSet\services\eventlog\Application `
    -name AutoBackupLogFiles -Value 1 
```

# java - Java 显示由小写字母组成的大写字母

> ID：12628710
> 
> 赞同：2
> 
> 时间：2012-09-27T19:28:26.120
> 
> 标签：java, string, formatting

我想写一个方法，用大写字母显示一个人的首字母，用相应的小写字母制作大写字母，例如：

```
MMMMMMMMMM    CCCCCCCCC
MM  MM  MM    CCCCCCCCC
MM  MM  MM    CC
MM  MM  MM    CC
MM  MM  MM    CC
MM      MM    CCCCCCCCC
MM      MM    CCCCCCCCC 
```

关于我应该如何去做的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T19:35:03.313

第一步是有一种方法来创建每个单独的字母（A、B、...、Z）。将这些存储为`String[]`s。例如，您的 M 将是：

```
{MMMMMMMMMM, MM  MM  MM, MM  MM  MM, MM  MM  MM, MM  MM  MM, MM      MM, MM      MM} 
```

我刚刚获取了所有的行并将它们存储为一个数组。现在如果你有 2 `String[]`，比如说`letter1`and `letter2`，你可以像这样“连接”它们：

```
String[] concat = new String[letter1.length];
for (int i = 0 ; i < concat.length ; i++)
    concat[i] = letter1[i] + "\t" + letter2[i]; 
```

现在您只需打印：

```
for (String s : concat)
    System.out.println(s); 
```

* * *

在你的情况下，它会是这样的：

```
// letter1 and letter2 would be created by some other method that you must define
String[] letter1 = new String[]{"MMMMMMMMMM", "MM  MM  MM", "MM  MM  MM", "MM  MM  MM", "MM  MM  MM", "MM      MM", "MM      MM"};
String[] letter2 = new String[]{"CCCCCCCCC" , "CCCCCCCCC", "CC       ", "CC       ", "CC       ", "CCCCCCCCC", "CCCCCCCCC"};

String[] concat = new String[letter1.length];
for (int i = 0 ; i < concat.length ; i++)
    concat[i] = letter1[i] + "\t" + letter2[i];

for (String s : concat)
    System.out.println(s); 
```

# ruby-on-rails - 缩小 Ruby on Rails IF-ELSE 代码

> ID：12628714
> 
> 赞同：3
> 
> 时间：2012-09-27T19:28:42.487
> 
> 标签：ruby-on-rails, if-statement

我怎样才能缩小下面的代码。它可以在一行中完成吗？

```
<% if pos_count < 0 %>
  <% pos_name = "SHORT" %>
  <% else %>
  <% pos_name = "LONG" %>
<% end %> 
```

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-27T19:32:58.800

可以使用条件运算符（它是三元运算符）在一行中完成：

```
<% pos_name = (pos_count < 0) ? "SHORT" : "LONG" -%> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T21:27:42.040

看起来像这个视图逻辑，最佳实践是最小化它。我建议将其提取到视图助手（或装饰器，如果您愿意）中。

作为 Istvan，建议您可以使用三元运算符，但为了便于阅读，我将其保留为 if-else 语句并将其移动到如下方法中：

应用程序/帮助者/my_view_helper.rb

```
module MyViewHelper
  def pos_name(pos_count)
    if pos_count < 0
      "SHORT"
    else
      "LONG"
    end
  end
end 
```

# javascript - Javascript 向后看

> ID：12628716
> 
> 赞同：4
> 
> 时间：2012-09-27T19:29:01.237
> 
> 标签：javascript, regex

我试图在 Javascript 中模仿后面的样子，

我想匹配字符串“object.all”而不是“object.call”。我试过了：

```
new RegExp('(?!(\\.))all') 
```

但是这两个例子都是匹配的，我想要的是看看后面是否有一个`.`（点）就在后面`all`，有人可以解释一下我的正则表达式有什么问题吗？

提前致谢

* * *

这个不错：

```
'object.all'.replace(new RegExp('(?!(\\.))all'), 'foo') 
// => object.foo 
```

对于这个，我希望结果是“object.call”：

```
'object.call'.replace(new RegExp('(?!(\\.))all'), 'foo')
// => object.cfoo 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T19:50:59.990

问题是它仍然是一个前瞻性。因此，它会检查点是否与“a”存在于同一位置，而不是位于后面的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T20:12:02.320

虽然这看起来很复杂，但这将完成工作：

```
function replaceAll(string, replacement) {
  var output = string.replace(/(\.)?all/g, function($0, $1) {
    return $1 ? $1 + replacement : $0;
  });
  return output;
}

var test1 = replaceAll("object.all", "foo");
var test2 = replaceAll("object.call", "foo");

console.log(test1); // object.foo
console.log(test2); // object.call 
```

我使用了@m.buettner 之前在评论中链接的文章（[在 JavaScript 中模仿](http://blog.stevenlevithan.com/archives/mimic-lookbehind-javascript)Lookbehind），这是我今年早些时候正在编写的一些代码。

# html - 带方括号的编码 URL。Chrome/Firefox/IE 中的不同行为

> ID：12628717
> 
> 赞同：10
> 
> 时间：2012-09-27T19:29:05.167
> 
> 标签：html, url, cross-browser, escaping

我有一个看起来像这样的链接（它有点难看，因为它是 URL ）

```
<a href="/items?fc%5B%5D=12345&amp;fc%5B%5D=56789&amp;utf8=%E2%9C%93">foo</a> 
```

说清楚一点，它是经过 URL 编码的并转换为

```
<a href="/items?fc[]=12345&fc[]=56789&utf8=✓">foo</a> 
```

提交表单时，目标 URL 在不同的浏览器中看起来不同：

在 Firefox 中，它看起来像需要的：

```
http://mydomain/items?fc[]=12345&fc[]=56789&utf8=✓ 
```

在 Chrome 中，方括号显示为 URL 编码的（使用其中许多时会给出非常丑陋和不专业的地址）。

```
http://mydomain/items?fc%5B%5D=12345&fc%5B%5D=56789&utf8=✓ 
```

在 IE9（和更早版本）中，所有内容都显示为 URL 编码：

```
http://mydomain/items?fc%5B%5D=12345&fc%5B%5D=56789&utf8=%E2%9C%93 
```

我可以忍受“utf8 = ...”部分，因为它只是IE中的一个问题。但是当方括号被明确输入到 URL 中时，没有一个浏览器在处理方面有任何问题，所以我不明白为什么 Chrome 和 IE，而不是 Firefox 必须显示带有 URL 编码的括号。

由于表单的 html 代码在所有浏览器中都是相同的，我想这与浏览器有关，而不是与站点有关（在这种情况下是 Ruby on Rails 站点）

编辑：所以要澄清我的实际问题：为什么会有所不同？有没有办法让它至少在 Chrome 中看起来不错？它可以通过在 href="..." 中不进行 URL 转义来修复，但我想这违反了 URL 编码规则？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:43:15.183

当您想要共享这些链接（有状态）时，我想您预计您的链接将被共享、从网页链接、复制、通过电子邮件发送等。

即使在浏览器之外（例如，您的链接被复制到其他页面、电子邮件等），也可能会发生一些编码。如果您必须使用这些字符，您可能不得不接受丑陋会出现在某个地方。

# computer-forensics - 法医事件响应，操作指南/流程

> ID：12628718
> 
> 赞同：-1
> 
> 时间：2012-09-27T19:29:08.320
> 
> 标签：computer-forensics

我正在寻找关于如何应对计算机入侵的非常好的资源和/或书籍。我遇到了许多涉及该主题的书籍，说明了获取法医文物的工具和技术，但我正在寻找一个操作指南/过程。

例如，您阅读了……在开始 IR 响应之前首先验证事件是否已实际发生。在这种情况下我具体该怎么做？我有很多选择。我是否进行 netstat 以查看是否存在违规 IP 地址，是否评估文件系统以查看是否可以找到可疑文件等。当然，这些决定中的每一个都有数据的残留影响，你必须稍后解释。其次，您如何解决大型网络中的许多计算机受到影响的情况。如果你清理一个，其他的可能仍然存在并会重新感染。我正在寻找可以回答这些问题的来源。

有人可以建议一个很好的信息来源。为了这？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T18:49:37.460

您问题的第二部分询问了 IR 用于识别大型网络上所有被黑客入侵的计算机，以防止再次感染。仅供参考，这是关于该主题的论文。这是最早的 IR 论文之一，但可能会有所帮助：

“事件响应的入侵检测，使用军事战场情报过程” [http://seclab.cs.ucdavis.edu/papers/science.pdf](http://seclab.cs.ucdavis.edu/papers/science.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T18:44:55.467

听起来您可能正在寻找事件响应 (IR) 的标准操作程序 (SOP)，即 IR 食谱。根据我的经验，由于受保护的资产、可用资源、技术技能水平等方面的差异，组织之间的 IR 流程和技术可能会有很大差异。此外，由于攻击类型、所涉及的技术（例如、系统和网络）、可用的安全资源、安全监控（日志）等。所有这些变化都限制了为 IR 创建 SOP 的机会。

例如，有两位思科作者写的一本关于安全监控的好书。我强烈推荐它，但你可能没有他们拥有的所有安全资源和技能。对他们有效的方法可能不适合您的环境。

“安全监控：企业网络事件检测的成熟方法” [http://www.amazon.com/Security-Monitoring-Incident-Detection-Enterprise/dp/0596518161](https://rads.stackoverflow.com/amzn/click/com/0596518161)

无论如何，所有这些都是说，如果您正在寻找 IR 食谱解决方案，考虑 IR SOP 的这些限制可能会有所帮助。

# macos - 在 mac os x 上设置 opengl

> ID：12628724
> 
> 赞同：3
> 
> 时间：2012-09-27T19:29:22.257
> 
> 标签：macos, cocoa, opengl

我想开始学习 Opengl 并在 Mac os x 操作系统上制作一些基本的 3d 应用程序。

我使用 C++，我应该使用命令行还是 Cocoa 应用程序？命令行是否意味着它将制作非 GUI 而 coca 框架将制作 GUI？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T19:44:01.647

我建议使用 Cocoa，因为进入全屏意味着您需要从桌面/窗口管理器中取消控制。我认为您可以通过同时查看源代码和 OpenGL 程序来更轻松地编写程序（如果您使用窗口来启动 OpenGL 程序，这会容易得多）。

查看[C 语言中的 Cocoa OpenGL 应用程序](https://stackoverflow.com/questions/2102151/how-to-write-a-cocoa-opengl-app-in-c)（使用 google 搜索网络），了解如何获取 OpenGL 上下文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T02:06:25.840

[GLFW](http://www.glfw.org/)是一个跨平台的 C 库，用于创建 OpenGL 窗口和处理输入。

[用户指南](http://glsdk.sourceforge.net/glfw/docs/UsersGuide.pdf)的第一章给出了如何使用它的最小示例。

它可以与 XCode 一起使用，但如果你想通过命令行用它编译一些东西，请使用：

```
g++ *.cc -lglfw -framework OpenGL -framework Cocoa -framework IOKit 
```

当然，您仍然需要安装 XCode 和命令行工具。

# c++ - 不直观的嵌套类继承

> ID：12628725
> 
> 赞同：2
> 
> 时间：2012-09-27T19:29:22.380
> 
> 标签：c++, inheritance, gcc

以下代码对 C++ 标准有效吗？奇怪的是 C::B 会起作用，因为 struct B 在 A 的命名空间中。但它确实可以用 gcc 编译。

```
struct A { struct B {}; };
struct C : public A::B {};
struct D : public C::B {}; 
```

如果这是符合标准的 C++，那么这个结构的合理应用是什么？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T19:34:55.700

是的，它是有效的 C++。一个类在它自己的范围内（因此两者都`B`引用`B::B`同一个类`B`），并且一个类的父类在它自己的范围内。所以既然`B`is 在`C`'s 范围内并且`B`在它自己的范围内，`C::B`指的是`B`which is `A::B`。

（旁注：不要将*命名空间*与*范围*混淆。）

C++03 §9 第 2 段说：

> 类*名被插入到在看到**类名*之后立即声明它的作用域中。类*名*也被插入到类本身的范围内；这被称为*注入类名*。出于访问检查的目的，*注入的类名*被视为公共成员名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T19:38:05.247

这是符合标准的 C++。

嵌套类的一个合理应用（通过范围解析）是 pImpl 设计模式（尽管您可以以不会演示嵌套类的方式实现它，但这里我选择演示嵌套类）。注意：继承是可能令人困惑的方面之一，但真正的概念是嵌套类的范围解析。

```
//ExposedClass in Exposed.h

class CExposedClass
{
public:
CExposedClass();
~CExposedClass();
void doThis();
void doThat();

private:
class CXImpl;
CXImpl *pImpl;

};

//ExposedClass Impl in Exposed.cpp

#include "Exposed.h"

class CExposedClass::CXImpl
{
 int someData;
};

CExposedClass::CExposedClass():pImpl(new CXImpl()){}
CExposedClass::~CExposedClass(){delete pImpl;}
void CExposedClass::doThis(){}
void CExposedClass::doThat(){} 
```

在一个类的范围内定义的类使用范围解析从另一个范围寻址。

# css - 使用 jQuery 动画 -webkit-filter

> ID：12628727
> 
> 赞同：3
> 
> 时间：2012-09-27T19:29:49.603
> 
> 标签：css

好的，所以我在 div 上有一个过滤器，默认情况下使用这些 css 属性使该 div 的背景图像变为灰度。

我了解我的 onblur 和 onfocus 作品以及如何使用 jQuery 将它们与 animate() 一起使用。

比如这个，这对我来说很有效并且很有意义：

```
$('div.cell').hover(function() {
    $('div.cell').animate({

        border: 'none',
        height: '100px',
    }, 2000, function() {

    // Animation complete.

    });
}); 
```

现在我遇到了动画某些css3属性的语法问题。

而不是动画`border: none`，`height: 100px`但是我如何为这两个属性设置动画？？？

```
filter: none;
-webkit-filter: grayscale(0); 
```

我现在拥有的是这样的：

```
$('#clickme').click(function() {
  $('#book').animate({
    filter: 'none'
  }, 5000, function() {
    // Animation complete.
  });
}); 
```

但是我在尝试`-webkit-filter`从`grayscale(1);`to动画时遇到了 MAJOR 语法错误`grayscale(0);`

多谢你们！让我知道您是否还有其他需要。

* * *

所以这就是我现在所拥有的......

```
$(function() {
    $("div.cell").focus(function(){
        alert('WHOA');
        $("div.cell").attr('grayNow');
    });
});​ 
```

它仍然无法正常工作...

连同一些CSS

```
.grayNow {
    -webkit-filter: grayscale(0); 
    filter: none;  
}​ 
```

我什至没有收到警报！:(

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T19:45:21.577

我不确定您为什么要使用 jQuery animate 来执行此操作，就好像您使用过渡那么这些动画是硬件加速的 - jQuery animate 仅应作为最后的手段使用，或者在旧浏览器需要支持的情况下使用。

反正：

[http://jsfiddle.net/Ej8s3/](http://jsfiddle.net/Ej8s3/)

简而言之，添加一个过渡，使用新属性创建一个类，使用一些 JS 打开和关闭它。我使用过 jQuery，但如果没有 jQuery，这样做是微不足道的。

# php - PHP MVC，PDO：循环返回的mysql数据

> ID：12628736
> 
> 赞同：1
> 
> 时间：2012-09-27T19:30:31.390
> 
> 标签：php, mysql, pdo

在我的数据库层类中，我有一个将选择 sql 查询作为参数的方法：

```
public function select($sqlQuery) {             
  $stmt = $this->pdo->prepare($sqlQuery);
  $stmt->execute();
  $ret = $stmt->fetch(PDO::FETCH_ASSOC);
  return $ret;
} 
```

我希望能够将获取的数据返回到我的模型，然后在我的视图类中循环遍历它，而不在视图中使用任何 PDO。

这应该如何以正确的方式完成？

我希望能够以 $row['testCol'] 等形式访问表格行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T00:09:31.230

模型是一层。不是类或对象。

而且，如果您通过遵守[SRP](http://en.wikipedia.org/wiki/Single_responsibility_principle)来编写代码，则模型层将包含几种不同类型的结构。至少，您将拥有用于域业务逻辑和存储抽象的单独类。

您在这里所拥有的完全是一团糟。您不仅将域逻辑和存储机制集中在同一个类中（并假装它是“模型”），而且您还将 SQL 直接暴露给表示层。

* * *

如果您尝试构建适当的模型层，则当前视图将从服务实例请求信息（这将是结构的类型，用于将域业务逻辑与视图和控制器分开）并获取所需的数据。

该服务将实例化适当的[域对象](http://c2.com/cgi/wiki?DomainObject)，并根据控制器先前设置的状态，使用某种形式的存储抽象（[数据映射器](http://martinfowler.com/eaaCatalog/dataMapper.html)、[存储库](http://martinfowler.com/eaaCatalog/repository.html)、[工作单元](http://martinfowler.com/eaaCatalog/unitOfWork.html)、[dao](http://www.oracle.com/technetwork/java/dataaccessobject-138824.html)或某种类似结构）将信息检索到它们中。然后，在对填充的域对象执行所需的数据操作之后，它会将数据返回到视图。

View 根据从控制器接收到的信息和先前的信号，将决定应该生成什么样的响应。如果响应的指示是 HTML，它将使用一个或（通常）多个模板来组成输出。认为它还不如只发送一个 HTTP 位置标头来触发重定向。

为了进一步阅读，我会推荐[这个答案](https://stackoverflow.com/a/5864000/727208)。

* * *

关键是：您目前已经将 MVC 的概念简化到甚至打破了表示层和模型层之间的分离的程度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T15:03:42.153

您可以轻松返回`$stmt`。它允许您对其进行迭代，并且可以像这样访问`PDO::FETCH_ASSOC`：

```
$rows = $model->select($sqlQuery);

...

foreach($rows as $row)
{
    echo $row['testCol'], "\n";
} 
```

在你的函数里面是这样的：

```
public function select($sqlQuery) {             
  $stmt = $this->pdo->prepare($sqlQuery);
  $stmt->execute();
  return $stmt;
} 
```

保持简单，从长远来看，这将对您有所帮助。您只需要在您的视图中可以访问的东西，例如数组，而 PDO 为您提供了开箱即用的功能。如果需要，您可以稍后轻松地将其替换为 - 比方说 - 一个数组。也许不是数组的最佳示例，但我相信你明白了。

并且只是在页边空白处注明：不要称它为模型，只需称其为数据库或类似名称。它更好地命名总是有用的东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T19:31:22.463

调用[`fetchAll()`](http://php.net/manual/en/pdostatement.fetchall.php)而不是`fetch()`，这将返回一个完整的多维数组。

```
public function select($sqlQuery) {             
  $stmt = $this->pdo->prepare($sqlQuery);
  $stmt->execute();
  $ret = $stmt->fetchAll(PDO::FETCH_ASSOC);
  return $ret;
}

$results = $your_object->select("SELECT * FROM yourtable");
// It's a 2D array!
var_dump($results); 
```

# c# - 带有参数的 LINQ“位置”

> ID：12628737
> 
> 赞同：0
> 
> 时间：2012-09-27T19:30:32.220
> 
> 标签：c#, sql, linq, linq-to-sql, lambda

我确定这是菜鸟的错误，但我自己找不到答案。

```
public class Database : DataContext 
{
    public Table<Record> RecordTable;
    public Database(string connection) : base(connection) {}
}

[Table(Name = "RecordsTable")]
public class Record
{
    [Column( IsPrimaryKey = true, CanBeNull = false)]
    public int codedID;
}

// inside some class
private void ReadTestData(Database openedDatabase, int expectedValue)
{
    Table<Record> rec = openedDatabase.GetTable<Record>();
    var q =
        from a in rec
        where (GetMonth == expectedValue)   // <--- that line doesn't work
        select a;

    foreach (var b in q) { System.Console.WriteLine("something"); }
}

static Expression<Func<Record, int>> GetMonth = a => a.codedID/10000;

public static int DecodeMonth(int codedID)
{
    int month = codedID/10000;
    //(...)
    return month;
} 
```

我想调用**DecodeMonth**函数并将其返回值与预期值进行比较。我该怎么做？

我做了一些研究并设法运行这样的代码：

```
var q = openedDatabase.RecordTable.Where(GetMonthBool);

static Expression<Func<Record, bool>> GetMonthBool = a => (a.codedID/10000 == 1); 
```

但是expectedValue 被硬编码为“1”——这并不能解决我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T19:38:45.870

创建一个创建这样的表达式的方法

```
private Expression<Func<Record, bool>> GetMonthBoolFunc(int value)
{
    return a => (a.codedID/10000 == value); 
}

var q = openedDatabase.RecordTable.Where(GetMonthBoolFunc(1)); 
```

# ajax - 通过 Jquery 的 ajax 函数 POST 表单数据以路由接受 JSON 的 3 种方法

> ID：12628739
> 
> 赞同：0
> 
> 时间：2012-09-27T19:30:33.790
> 
> 标签：ajax, jquery

注意：我已经看到了很多关于此的问题，但每个问题的答案都略有不同，由于答案不同，我想知道什么是规范或最佳实践。他们都不清楚为什么会有差异，或者何时使用其中一个。有些只是过时了。

Jquery 1.8.0 版，示例使用coffeescript。

我有一个带有数据的表单，点击提交获取数据并发布它的方式是根据我所读到的三件事之一：（如果下面的示例中有未声明的变量，请假设他们已经分配到别处）

1：

```
data = $.param(form.serializeArray())
$.ajax( url, {
  headers: { 
    Accept : "application/json",
    "Content-Type": "application/json"
  },
  dataType: "json",
  type: "POST",
  data: data, 
```

[发布 jquery .serializeArray(); 通过ajax输出](https://stackoverflow.com/questions/4862189/posting-jquery-serializearray-output-through-ajax)

2\. 除此行外，同 (1)：

```
data = JSON.stringify(form.serializeArray()) 
```

[使用 JQuery 通过 ajax 动态发送 json 格式的表单数据](https://stackoverflow.com/questions/11482939/send-post-form-data-in-json-format-via-ajax-with-jquery-dynamically)

3\. 除此行外，同 (1)：

```
data = form.serialize() 
```

[http://api.jquery.com/jQuery.post/#example-3](http://api.jquery.com/jQuery.post/#example-3)

[这也许可以解释](http://benalman.com/news/2009/12/jquery-14-param-demystified/)为什么最好使用`$.param`，但这是一篇关于 jQuery 1.4 的旧帖子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T19:56:15.840

这是来自 (http://jquery.com/) 版本 1.8.2 的 jquery 源，用于在 ajax 调用之前构建参数

```
 function buildParams( prefix, obj, traditional, add ) {
    var name;

    if ( jQuery.isArray( obj ) ) {
        // Serialize array item.
        jQuery.each( obj, function( i, v ) {
            if ( traditional || rbracket.test( prefix ) ) {
                // Treat each array item as a scalar.
                add( prefix, v );

            } else {
                // If array item is non-scalar (array or object), encode its
                // numeric index to resolve deserialization ambiguity issues.
                // Note that rack (as of 1.0.0) can't currently deserialize
                // nested arrays properly, and attempting to do so may cause
                // a server error. Possible fixes are to modify rack's
                // deserialization algorithm or to provide an option or flag
                // to force array serialization to be shallow.
                buildParams( prefix + "[" + ( typeof v === "object" ? i : "" ) + "]", v, traditional, add );
            }
        });

    } else if ( !traditional && jQuery.type( obj ) === "object" ) {
        // Serialize object item.
        for ( name in obj ) {
            buildParams( prefix + "[" + name + "]", obj[ name ], traditional, add );
        }

    } else {
        // Serialize scalar item.
        add( prefix, obj );
    }
} 
```

从列出的代码中，您可以看到上面列出的所有“方式”都在上面列出的函数中的参数处理中进行处理，并最终以相同的字符串化版本结束

# eclipse - 将 GWT 部署到 Cloudfoundry 的问题

> ID：12628742
> 
> 赞同：0
> 
> 时间：2012-09-27T19:30:58.460
> 
> 标签：eclipse, gwt, cloud-foundry

我正在尝试让一个基本的 GWT 应用程序在 cloudfoundry 中工作。

问题来自 Eclipse，一切都很好。它说已部署并已启动。

当我到达 URL 时，错误是：VCAP ROUTER: 404 - DESTINATION NOT FOUND。

此外，从 Eclipse 中，除了使用屏幕看起来可疑之外，它还可以。截屏：![在此处输入图像描述](../Images/de408992f274caad5cad8b2a22c20698.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:12:20.707

我使用右键单击模块描述符 *.gwt.xml 并部署以创建战争。并按照此处所述部署在tomcat 7上： [tomcat 7 on cloudfoundry](http://blog.cloudfoundry.org/2012/06/18/deploying-tomcat-7-using-the-standalone-framework/) ，效果很好。您可以使用上述步骤在 cloudfoundry.com 上部署 gwt

# iphone - 声明和调用声音的更好方法

> ID：12628745
> 
> 赞同：0
> 
> 时间：2012-09-27T19:31:02.723
> 
> 标签：iphone, objective-c, ios, xcode

我有这个声音块，但我想在 didloader 中预加载大部分内容，然后调用 `AudioServicesPlaySystemSound(soundID);`

节目内

```
-(void)buttonpress{
                    CFBundleRef mainBundle = CFBundleGetMainBundle();
                    CFURLRef soundFileURLRef;
                    soundFileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef) @"chalkfreeze", CFSTR ("mp3"), NO);
                    UInt32 soundID;
                    AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID);
                    AudioServicesPlaySystemSound(soundID);
} 
```

提供编码

```
-(void)viewDidloader
{
CFBundleRef mainBundle = CFBundleGetMainBundle();
                    CFURLRef soundFileURLRef;
                    soundFileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef) @"chalkfreeze", CFSTR ("mp3"), NO);
                    UInt32 soundID;
                    AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID);
}

- (void)buttonpress
{
AudioServicesPlaySystemSound(soundID);
} 
```

所以类似于上面的代码，但它不起作用，当我尝试在 .h 文件中声明 soundID 时，它开始出现错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T20:06:53.257

您应该可以在任何地方播放它而不会出现任何问题。只需将 soundID 设为实例变量即可。

[请参考http://developer.apple.com/library/ios/#samplecode/GLPaint/Introduction/Intro.html#//apple_ref/doc/uid/DTS40007328](http://developer.apple.com/library/ios/#samplecode/GLPaint/Introduction/Intro.html#//apple_ref/doc/uid/DTS40007328)的SoundEffect类

# sql - SQL 查询 - 无效的列名和参数 - data.SE

> ID：12628749
> 
> 赞同：3
> 
> 时间：2012-09-27T19:31:08.927
> 
> 标签：sql, stackexchange, dataexplorer

不是程序员，而是使用 data.stackexchange.com。我正在查询公共 SE 数据资源管理器，并且我指定的列名无效。另外，如何指定计数（帖子）和计数（投票）？是否有人查询 data.se 并知道 db 模式能够帮助我更正此代码？

```
Select Count (u.Id)
From Users u 
Left Join Posts p on u.Id = p.OwnerUserId
Left join SuggestedEdits e on u.Id = e.OwnerUserId
left join Votes v on u.Id = v.UserId
WHERE ((u.CreationDate BETWEEN 'qwerty' AND 'qwerty')
AND (p.CreationDate BETWEEN 'qwerty' AND 'qwerty')
AND (p.ClosedDate is null)
OR (e.CreationDate BETWEEN 'qwerty' AND 'qwerty'))
AND Count (Posts) = x
OR Count (Votes) = y
Group by u.CreationDate, p.OwnerUserId, UserTypeId, u.DisplayName, p.CreationDate 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T19:40:20.323

您是否尝试过[此处的](https://data.stackexchange.com/stackoverflow/query/new)*Compose Query*选项。如果单击该链接，它会在侧边栏的右侧显示数据库架构。

请注意，侧边栏可以隐藏，只需单击链接即可再次显示。那是你需要的吗？

**编辑**

我仍然不确定您到底要做什么。如果我处于你的位置，我会首先对每个单独的表运行一些简单的查询。这样您就可以看到那里存储了哪些数据。

运行此查询并查看结果：

```
SELECT *
FROM Users
WHERE CreationDate BETWEEN '2012-06-01 08:00:00' AND '2012-06-02 09:00:00' 
```

运行此查询并查看结果：

```
SELECT *
FROM Posts
WHERE CreationDate BETWEEN '2012-06-01 08:00:00' AND '2012-06-02 08:10:00' 
```

运行此查询并查看结果：

```
SELECT *
FROM Votes
WHERE CreationDate BETWEEN '2012-06-01 08:00:00' AND '2012-06-02 08:10:00' 
```

我不确定您为什么在联接中包含 SuggestedEdits 表，因为您似乎没有在其他任何地方使用该表。所以离开它。

现在，在看到数据的样子之后，您应该能够将它们拼凑在一起以找到您想要的东西。哪个我还不知道？希望这样的事情可以帮助您入门。此查询将返回一些结果，但我不确定它是否是您所追求的。

```
SELECT Count(u.Id), Count(p.Id), Count(v.Id)
FROM Users u
LEFT JOIN Posts p on u.Id = p.OwnerUserId
LEFT JOIN Votes v on u.Id = v.UserId
WHERE u.CreationDate BETWEEN '2012-06-01 08:00:00' AND '2012-06-02 09:00:00'
GROUP BY u.CreationDate, p.OwnerUserId, v.VoteTypeId, u.DisplayName, p.CreationDate 
```

# php - Codeigniter 2.1 - 在获取之前计算数组

> ID：12628751
> 
> 赞同：1
> 
> 时间：2012-09-27T19:31:15.750
> 
> 标签：php, codeigniter, codeigniter-2

我有这个功能：

```
 function gi_get_by($col,$id, $itd, $tbl, $limit = 10)
        {    
        $this->db->select('*');
        $this->db->from('global_info');
        $this->db->join($tbl, 'id_' . $tbl . ' = id_global_info');
        $this->db->where('info_type_id', $itd);
        if($col == 'date_created' || $col == 'tag') {$this->db->like($col, $id);}        
        else {$this->db->where($col, $id);}
        if($tbl == 'ad') :
        $this->db->order_by('paid', 'desc');
        endif;
        $this->db->order_by('date_created', 'desc');  
        $this->db->limit($limit, $this->uri->segment(2));
        $q = $this->db->get();        
        return $q = $q->result_array();   
        } 
```

我需要的是在限制之前计算结果数量并稍后在控制器中使用它们。我有一个想法在没有**$limit**的情况下复制这个函数，但它会复制相同的函数。有没有其他方法可以做到这一点，或者我必须重复？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T19:43:00.457

我不太明白你想要做什么，但如果你想要一个可选的限制，你可以将其默认为 false：

```
 function gi_get_by($col,$id, $itd, $tbl, $limit=false)
        {    
        $this->db->select('*');
        $this->db->from('global_info');
        $this->db->join($tbl, 'id_' . $tbl . ' = id_global_info');
        $this->db->where('info_type_id', $itd);
        if($col == 'date_created' || $col == 'tag') {$this->db->like($col, $id);}        
        else {$this->db->where($col, $id);}
        if($tbl == 'ad') :
        $this->db->order_by('paid', 'desc');
        endif;
        $this->db->order_by('date_created', 'desc');
        if ($limit) {  
          $this->db->limit($limit, $this->uri->segment(2));
        }
        $q = $this->db->get();        
        return $q = $q->result_array();   
        } 
```

如果将它传递给函数，这将有条件地添加限制子句。

此外，最好将 wwhatever`$this->uri->segment(2)`作为参数传递给函数，而不是从函数内部访问它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T19:39:21.190

为什么不选择

```
sql_calc_found_rows 
```

在您的查询中？

[http://www.justincarmony.com/blog/2008/07/01/mysql-php-sql_calc_found_rows-an-easy-way-to-get-the-total-number-of-rows-regardless-of-limit/](http://www.justincarmony.com/blog/2008/07/01/mysql-php-sql_calc_found_rows-an-easy-way-to-get-the-total-number-of-rows-regardless-of-limit/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T19:39:08.727

好吧，这样的事情怎么样：

```
function gi_get_by($col,$id, $itd, $tbl, $limit = 10)
{
    $count = $this->db->query('SELECT * FROM my_table')->num_rows();

    //the rest stuff
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T19:46:49.737

您应该使用活动记录缓存：

[http://codeigniter.com/user_guide/database/active_record.html#caching](http://codeigniter.com/user_guide/database/active_record.html#caching)

```
function gi_get_by($col,$id, $itd, $tbl, $limit = 10)
{    
    // Start the cache
    $this->db->start_cache();

    $this->db->select('*');
    $this->db->from('global_info');
    $this->db->join($tbl, 'id_' . $tbl . ' = id_global_info');
    $this->db->where('info_type_id', $itd);
    if($col == 'date_created' || $col == 'tag') {$this->db->like($col, $id);}        
    else {$this->db->where($col, $id);}
    if($tbl == 'ad') :
    $this->db->order_by('paid', 'desc');
    endif;
    $this->db->order_by('date_created', 'desc');

    // Stop the cache
    $this->db->stop_cache();

    // Get the total
    $total = $this->db->count_all_results();

    // Now set the limit
    $this->db->limit($limit, $this->uri->segment(2));

    $q = $this->db->get();

    // Important! Clear the cache
    $this->db->flush_cache();

    return $q = $q->result_array();   
} 
```

# javascript - 在 Javascript 中声明变量 - 构造函数与文字

> ID：12628752
> 
> 赞同：1
> 
> 时间：2012-09-27T19:31:16.027
> 
> 标签：javascript, variables

今天看一个教程，我发现了以下内容：

```
var q2Var1 = "hi there.",
    q2Var2 = String( "another string here." ); 
```

q2Var 是“构造函数符号”，而 q2Var 是声明变量的“文字符号”，还是我没有得出正确的结论？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T19:43:05.683

不，它们都不使用构造函数来创建字符串对象。

第一个只是一个字符串原语，第二个是通过`String`转换函数发送的字符串原语，它将只返回未更改的字符串原语。

* * *

转换函数通常用于将`String`其他事物转换为字符串原语，例如数字：

```
var s = String(42); 
```

* * *

要创建`String`对象，请使用`new`关键字：

```
var s = new String("hi there."); 
```

该`String`对象具有您用于在字符串上使用的所有方法，例如`length`属性。您也可以在字符串原语上使用它们的原因是，`String`当您对它们使用方法时，它们会自动转换为对象。

所以这：

```
var l = "asdf".length; 
```

实际上与以下内容相同：

```
var l = new String("asdf").length; 
```

* * *

转换函数总是返回一个字符串原`String`语，所以如果你有一个`String`对象，该函数会将它转回一个字符串原语：

```
var s = "asdf"; // typeof s returns "string"

var s = new String(s); // typeof s now returns "object"

s = String(s); // typeof s now returns "string" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T19:37:30.087

我以前从未听说过这些名称，但“构造函数表示法”很可能是 q2Var2 名称，因为您将参数传递给 String 的构造函数。不过，如何称呼它们并不重要，不是吗？:P

# ruby-on-rails-3 - nil:NilClass 的未定义方法“[]”

> ID：12628755
> 
> 赞同：0
> 
> 时间：2012-09-27T19:31:19.650
> 
> 标签：ruby-on-rails-3, methods, controller

我正在关注 Michael Hartl 教程，但我发现了一个问题，但不知道如何解决它......我的问题就在没有[ajax](http://ruby.railstutorial.org/chapters/following-users?version=3.0#code%3afollowing_followers_actions)的情况下。

当我尝试关注其他用户时，我得到了这个：

```
NoMethodError (undefined method `[]' for nil:NilClass):
  app/controllers/follows_controller.rb:4:in `create' 
```

这是我对关系的“关注”控制器 eq

```
before_filter :authenticate_user!
def create
  @user = User.find(params[:follows][:followed_id])
  current_user.follow!(@user)
  redirect_to @user
end

def destroy
 @user = Follow.find(params[:id]).followed
 current_user.unfollow!(@user)
 redirect_to @user
end 
```

其余的（模型，rspec）如果您需要更多代码，我有相同的告诉我，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T19:36:55.010

机会`params[:follows]`是零。检查您提交给`create`操作的参数。

# objective-c - 为什么要在 Objective-C 中自动释放自己的财产？

> ID：12628765
> 
> 赞同：0
> 
> 时间：2012-09-27T19:31:57.933
> 
> 标签：objective-c, ios, memory-management

这是一个代码示例来说明我的意思：

```
- (void) setup {
  [self setupObjectModel];
  [self setupStoreCoordinator];
}

- (void) setupObjectModel {
  NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"Model" withExtension:@"momd"];
  self.managedObjectModel = [[[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL] autorelease];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T19:37:51.673

如果`managedObjectModel`是一个`strong`属性或使用属性定义`retain`，setter 将自动保留传递的参数，因此`autorelease`它将防止内存泄漏（如果你不这样做，`NSManagedObjectModel`虽然只`managedObjectModel`指向它，但保留计数将为 2。 )

这相当于

```
_managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL]; 
```

假设 setter 具有默认行为

# php - 使用 Paypal API 使用 PHP 处理有条件的租金支付

> ID：12628771
> 
> 赞同：0
> 
> 时间：2012-09-27T19:32:24.247
> 
> 标签：php, paypal, conditional, payment

我正在建立一个电子商务网站，让用户能够在指定的时间内租用物品。如果该项目未在该时间内退回，客户将被自动收取另一个租金周期的费用。如果物品被退回，客户将停止收取额外租金周期的费用。如果购买了该物品，则将向客户收取费用，并将向客户收取与租金价格不同的额外金额，并且不再向客户收取额外租金。大部分计费正在进行中，并且有太多变数，无法使用简单的订阅付款方式。

我认为可以使用简单的 PayPal 按钮表单启动交易序列，该表单发送有关我的 IPN 脚本位置、取消付款脚本位置和定期付款脚本位置的信息。

我发现 PayPal 的 API 可以做的事情有一些限制。似乎定期支付 API 是为在指定计费周期内设置的一定数量的设置支付量设置的，该数量设置为客户将被计费的设定次数。我对此不是 100% 确定，但我认为 PayPal 仅在初始交易中访问客户的定期支付 API 并执行连续交易而不检查我的网站内部数据库，这可能会提供数据来影响部分定期支付脚本取消连续付款。当客户退回产品或购买已经出租的产品时，应该出现这种情况的一个例子。PayPal 在向我反馈此类技术问题方面一直很糟糕。PayPal的另一个问题'

任何关于如何使用 PayPal 实现这样的支付系统的建议，如果可能的话，将不胜感激。如果 PayPal 可以做到这一点，我不想制作自己的支付网关。

# javascript - JS如何在路径中包含变量？

> ID：12628774
> 
> 赞同：-1
> 
> 时间：2012-09-27T19:32:30.237
> 
> 标签：javascript

以下变量包含一个字符串，它是图像的路径。

```
iconBlue.image = 'http://www.site.com/icon1.jpg'; 
```

如何在此路径中包含变量？让我更详细地解释一下。假设文件夹 icon1.jpg icon2.jpg 等中有很多图标。我有一个名为 iconspec 的变量，它根据它的值（1 或 2 或 3 等）指向我必须使用的图标。

如何在路径中包含变量 iconspec？

```
iconBlue.image='http://www.site.com/icon"iconspec".jpg 
```

我猜是这样的，但语法正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T19:34:19.057

你只需要把它当作一个带有变量的简单字符串。

在您的情况下，您应该这样做：

```
iconBlue.image = 'http://www.site.com/icon'+iconspec+'.jpg'; 
```

`+`操作符就像 PHP 中的，`.`它合并字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T19:33:57.210

```
iconBlue.image='http://www.site.com/icon'+iconspec+'.jpg'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T19:40:23.857

要采取一些不同的路线，您可以将串联封装在一个函数中并使其更具可重用性：

```
var icon = function(){
    this.path = '';
    this.imageName = '';

    this.imagePath = function() { return this.path + '/' + this.imageName };
};

var iconBlue = new icon(),
    iconRed = new icon();
iconBlue.path = "c:\\stuff";
iconBlue.imageName = "icon1.jpg";

iconRed.path="c:\\morestuff";
iconRed.imageName = "icon2.jpg";

alert(iconBlue.imagePath());
alert(iconRed.imagePath()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T19:42:31.767

最简单的解决方案是使用 将`+`变量连接到字符串：

```
var name = 'sachleen';
var result = 'my name is ' + name;

Output: my name is sachleen 
```

还有几个更强大的选项可用。

[JavaScript sprintf()](http://www.diveintojavascript.com/projects/javascript-sprintf)是`sprintf`JS 的实现。

[JS中的string.format](https://stackoverflow.com/questions/1038746/equivalent-of-string-format-in-jquery)

# jquery - Jquery根据给定值隐藏元素

> ID：12628775
> 
> 赞同：1
> 
> 时间：2012-09-27T19:32:35.460
> 
> 标签：jquery

我有一种情况，我需要遍历一些值，然后隐藏一个具有 id 的 div。

简单来说，这里有一段代码：

```
 var value = 'div1';
  $('#div1).hide(); 
```

我喜欢做的是做类似的事情：

```
 value.hide(); 
```

意思是，传递值是什么，然后在 document.ready() 上动态隐藏它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T19:33:54.000

尝试如下，

```
 var value = 'div1';
  $('#' + value).hide(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T19:34:25.770

> 我喜欢做的是做类似的事情：
> 
> 值.hide();

```
var value = $("#div1");
value.hide(); 
```

或者

```
var value = 'div1';
$('[id="' + value + '"]').hide();​​​​​​​​​​​​ 
```

或者维加所说的:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T19:34:41.437

你可以像字符串一样使用变量[http://jsfiddle.net/](http://jsfiddle.net/) ​</p>

```
var value = 'div1';
$('#' + value).fadeOut(1000); ​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T19:36:47.400

您可以使用以下内容：

```
var value = 'div#div1';
$(value).hide(); 
```

# c# - 可以使用环回 (127.0.0.1) 进行连接，但不能使用我的 IP 地址

> ID：12628781
> 
> 赞同：0
> 
> 时间：2012-09-27T19:32:55.697
> 
> 标签：c#, networking, udp, port, lidgren

我正在使用一个名为[Lidgren network](http://code.google.com/p/lidgren-network-gen3/)的库来处理我的应用程序的所有网络部分。它使用UDP。

我从来没有遇到过 TCP 应用程序和端口转发（apache、FTP、SMTP 等）的任何问题。我使用 TCP 做了一些 TCP 应用程序，我可以毫无问题地连接。

我现在正在制作一个在线游戏，我使用 UDP 进行网络传输。我在我的路由器中端口转发它，我让它运行。当我使用我的远程 IP 地址 (190.136.243.40) 连接到它时，我不能。当我使用环回（127.0.0.1）时，我可以毫无问题地连接。

我关闭了 Windows 防火墙，我重新启动了计算机，但我仍然无法使用我的远程 IP 地址进行连接。

这是我的代码的一部分：

```
public static class ServerInfo
{
    static ServerInfo()
    {
        ServerAddress = Dns.GetHostAddresses("leboran.dyndns.org")[0];
    }
    public const short Port = 6483;
    public static IPAddress ServerAddress;
    public const string AppIdentifier = "UnnamedGameNet";
    public static byte[] MagicByte
    {
        get
        {
            return new byte[4] { 0xF1, 0x64, 0x83, 0xC4 };
        }
    }
} 
```

这是我启动服务器的部分，可能并不重要：

```
public void StartServer()
{
    this.listenThread = new Thread(ListenForClients);
    peerConfig = new NetPeerConfiguration(SharedConstants.ServerInfo.AppIdentifier);
    peerConfig.Port = SharedConstants.ServerInfo.Port;
    peerConfig.EnableMessageType(NetIncomingMessageType.DiscoveryRequest);
    peerConfig.EnableMessageType(NetIncomingMessageType.ConnectionApproval);
    peerConfig.ConnectionTimeout = 2144124;
    netServer = new NetServer(peerConfig);
    listenThread.Start();
} 
```

我使用的端口是 6483。我在端口 25565 上运行 Minecraft 服务器，它运行良好，因此在路由器上配置不错

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T19:39:10.887

我认为这与代码无关。

您的路由器需要配置主机，因为您正尝试从路由器的私有端直接连接到路由器的公共端。

如果您只想能够连接到 dyndns 地址，因此您不必更改代码，您也可以更改 Windows 主机文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T19:35:42.360

有些计算机实际上有多个 ip，实际上它们都有，您可能遇到的是您已将应用程序绑定到监听端口 127.0.0.1 而不是 64.323.23.234 或理想情况下的 0.0.0.0 会绑定您的所有 ip。检查 peerConfig 是否允许您选择绑定到的 ip，默认值可能是 127.0.0.1

也可能是路由器的问题。尝试使您的计算机成为 DMZ 或启用端口转发。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T19:44:49.173

许多消费者路由器使用数据包的来源来确定是将数据视为内部数据还是外部数据。换句话说，如果您在内部网络上并尝试访问路由器的任何 IP 地址，您的路由器会将其视为内部网络（即使用自定义网站响应端口 80，而其他大多数没有响应）。

不幸的是，很难找到解决方案。

# html - css：在基线上显示所有浮动文本（可变字体大小）

> ID：12628784
> 
> 赞同：0
> 
> 时间：2012-09-27T19:33:16.257
> 
> 标签：html, css

任何 CSS 技巧都可以让任何大小的文本出现在具有 float:left 的元素和另一个具有 float:right 的元素内的子元素的基线上？

查看下面的 jsfiddle 链接，看看我在说什么。请注意单词“One”如何具有更大的字体，因此它会颠倒 float:left 中的所有兄弟姐妹，但它不会影响 float:right div 中的跨度。

[http://jsfiddle.net/QeRhU/](http://jsfiddle.net/QeRhU/)

我希望它们都出现在同一个基线上。我希望有一个仍然使用 float:left; 的解决方案。浮动：对；因为我仍然想要它在用户缩放页面时提供的流动行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T19:46:39.720

试试[**这个**](http://jsfiddle.net/YvDzc/)，它不是干净的解决方案，而是一个解决方法，如果你找不到更干净的 css 解决方案，可以完成工作。

# java - 版本名称/代码的 Android 配置/属性文件

> ID：12628785
> 
> 赞同：0
> 
> 时间：2012-09-27T19:33:17.363
> 
> 标签：java, android, eclipse, configuration, properties

我想做的是在可以指定项目设置的 Eclipse 项目中创建一个配置/属性/xml 文件。

上下文是我有一个适用于 2 个用户的应用程序。但是他们需要有不同的版本和内部版本号以及特定于该用户的一些其他参数。我想要的是有两个配置文件，然后能够指定配置文件 1 或 2。棘手的部分是版本代码/名称在 android Manifest 中指定。

最好的方法是如何做到这一点？

要求：

1.  在代码的一部分中指定要使用的配置/属性文件。（即：配置 1 或 2）
2.  Android Manifest 能够引用此文件的版本代码和版本名称。
3.  我可以在我的代码中动态引用这个文件的元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T21:43:30.340

所以我找到了一个很好的方法来做到这一点。我只是制作了一个“配置”xml 文件，其中包含大量资源。

IE：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <integer name="version_code">6</integer>
    <string name="build_version">1.5</string>
        <string name="app_LOGO"> "R.drawable.my_logo"</string>
</resources> 
```

然后在我的清单中我有

```
 android:versionCode="@integer/version_code"
  android:versionName="@string/build_version" 
```

然后我做了一个配置类。

```
public class Configuration {

    private int LOGO = 0;

    public Configuration(Context cont){

        String myResourceId = cont.getResources().getString(R.string.app_LOGO);
        String[] resourceParts = myResourceId.split("\\.");
        String packName = cont.getPackageName();
        int logo = cont.getResources().getIdentifier(resourceParts[2],               resourceParts[1], packName);

        setLogo(logo);
    }
    /**
     * @return the logo
     */
    public int getLogo() {
        return LOGO;
    }
    /**
     * set the Logo
     */
    public void setLogo(int logo) {
        LOGO = logo;
    }
} 
```

我只是调用 Configuration 类，并将我的活动上下文传递到我的活动 onCreate 方法内部的构造函数中。奇迹般有效。

希望这可以帮助某人

干杯。

# vtk - vtkMarchingCubes 将 nifti 表面导出到波前 OBJ

> ID：12628786
> 
> 赞同：0
> 
> 时间：2012-09-27T19:33:19.150
> 
> 标签：vtk, marching-cubes

我想在 nifti 标签集上运行 vtkMarchingCubes。我要为其生成曲面的体素区域都具有相同的值。我有两个问题。首先，我似乎错误地设置了算法，因为生成的 vtkPolyData 显然没有顶点。其次，从 vtkOBJExporter 文档中我不清楚如何将 vtkPolyData 导出为波前 .OBJ 文件。如果有人看到下面的代码有任何问题，或者可以告诉我如何将 vtkPolyData 导出为 OBJ，我将不胜感激。

```
//Read The Nifti Label File
string input_path = "/MyPath/labels.nii";
nifti_image *im = nifti_image_read(input_path.c_str(),true);
cout<<im->nx<<","<<im->ny<<","<<im->nz<<endl; //Confirms Read Works

// Set up vtk image data
vtkImageImport* importer = vtkImageImport::New();
importer->SetImportVoidPointer((void*)im->data);
importer->SetDataScalarTypeToFloat();
importer->SetDataExtent(0, im->nx-1, 0, im->ny-1, 0, im->nz-1);
importer->SetWholeExtent(0, im->nx-1, 0, im->ny-1, 0, im->nz-1);
vtkImageData* point_cloud = importer->GetOutput();
point_cloud->SetScalarTypeToFloat();
point_cloud->SetExtent(0, im->nx-1, 0, im->ny-1, 0, im->nz-1);
point_cloud->SetSpacing(im->dx, im->dy, im->dz);

//Apply Threshold To Cut Out Other Data 
//Is this needed or will Marching Cubes properly identify the region
vtkImageThreshold* threshold = vtkImageThreshold::New();
threshold->ThresholdBetween(label_number,label_number);
threshold->SetInValue(255);
threshold->SetOutValue(0);
threshold->SetInput(point_cloud);

//Apply the Marching Cubes algorithm
vtkMarchingCubes* marching_cubes = vtkMarchingCubes::New();
marching_cubes->SetValue(0, 127.0f);
marching_cubes->SetInput(threshold->GetOutput()); //(vtkDataObject*)point_cloud);

vtkPolyData* surface = marching_cubes->GetOutput();
marching_cubes->Update(); 

//See That Marching Cubes Worked
cout<<"# Vertices: "<< surface->GetNumberOfVerts()<<endl;
cout<<"# Cells: "<< surface->GetNumberOfCells()<<endl;

//Export (How is this done properly?)
vtkOBJExporter* exporter = vtkOBJExporter::New();
exporter->SetInput(vtkRenderWindow *renWin); //I don't want a render window, I want at file
exporter->SetFilePrefix("/MyPath/surface");
exporter->Write(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T00:46:22.833

您可以使用此类[https://github.com/daviddoria/vtkOBJWriter](https://github.com/daviddoria/vtkOBJWriter)以您期望的方式编写 obj 文件（就像所有其他 VTK 编写器一样）。不幸的是，vtkOBJExporter 还想写一些我从未有过的额外信息。

# c# - MVC 4 成员资格额外字段？

> ID：12628794
> 
> 赞同：1
> 
> 时间：2012-09-27T19:33:57.880
> 
> 标签：c#, entity-framework-4, asp.net-membership, asp.net-mvc-4

如果有人能指出我正确的方向，我将不胜感激。

我是 MVC 4 中的成员资格的新手，我在 Google 中找到的大多数链接都是针对 MVC3 的。

如何存储用户信息？在默认数据库中有一个 UserName 字段。我可以添加额外的字段（电话号码、昵称等）还是创建一个 MyUser 类并以某种方式将 ID 链接到 Membership 中的 UserId？

非常感谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T20:38:34.023

MVC4 使用 SimpleMembership。这与传统的会员制度有很大的不同。

它的工作方式是您创建自己的用户表，然后告诉 SimpleMembership 您的用户表中的哪些字段用于自己的目的。

如果您查看 Filters/InitializeSimpleMembershipAttribute.cs，您会在 SimpleMembershipInitializer 类中找到如下所示的一行。

```
WebSecurity.InitializeDatabaseConnection("DefaultConnection", "UserProfile", 
   "UserId", "UserName", autoCreateTables: true); 
```

在这里，您更改字段“UserProfile”以匹配您的表名，“UserId”以匹配您的 UserId 列名，以及“UserName”以匹配您的用户名字段。

然后，您可以简单地将您想要的任何其他字段添加到此表中。

这里的问题是你犯了很多人都会犯的错误。会员资格与登录凭据无关。而已。它不关心其他字段，您将它们放在自己的数据库中并根据用户ID查找它们。

# php - PHP file_get_contents 有限制吗？

> ID：12628801
> 
> 赞同：15
> 
> 时间：2012-09-27T19:34:31.560
> 
> 标签：php, file-get-contents, large-files

我正在尝试使用 php file_get_contents 读取一个大文件（10M）

```
$file = 'http://www.remoteserver.com/test.txt';
$data = file_get_contents( $file );
var_dump ( $data ); 
```

它转储

```
string(32720) 
```

然后输出只显示文件的一部分。file_get_contents 的某处有限制吗？我尝试做 ini_set('memory_limit', '512M')，但没有奏效。

编辑：****忘了提****这是一个远程文件。

**已解决的问题**:: 硬盘空间不足。解决了这个问题，现在一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T19:38:26.527

假设您要加载的文件的内容在逻辑上由换行符分隔（例如：不是二进制文件），那么您最好逐行阅读。

```
$fp = fopen($path_to_file, "r");  
$fileLines = array();
while (!feof($fp)){
  array_push(fgets($fp),$fileContents);
} 
fclose($$fp); 
```

如果您确实需要将文件放在一个“块”中，您总是可以`implode()`（使用您选择的换行符）将数组恢复为单个字符串。

参考 -

*   [`fgets()`](http://php.net/manual/en/function.fgets.php)
*   [`implode()`](http://php.net/manual/en/function.implode.php)

# deployment - Capistrano 部署：`deploy:finalize_update` 之前的任务未执行

> ID：12628803
> 
> 赞同：0
> 
> 时间：2012-09-27T19:34:41.200
> 
> 标签：deployment, capistrano, task

我正在使用 Capistrano v2.13.4 进行部署。

之前的 Capistrano 任务 ( `deploy:special_treats`)`deploy:finalize_update`未执行。

该任务`deploy:special_treats`为 做一些准备（设置互联网访问）`bundle:install`，否则`bundle:install`将无法访问互联网 (`[out :: servername] Could not reach https://rubygems.org/`

在`config/deploy.rb`

`before 'deploy:finalize_update', 'deploy:special_treats'`

和

```
namespace :deploy do
  task :special_treats do
    run "echo 'something special treats: setup the Internet access'"
  end
end 
```

结果为`cap deploy:update`

```
$ cap deploy:update
  * executing `deploy:update'
 ** transaction: start
  * executing `deploy:update_code'
    executing locally: "svn info https://svnlinks --username username --password password --no-auth-cache  -rHEAD"
    command finished in 10336ms
  * getting (via export) revision 33268 to /tmp/20120927171608
    executing locally: svn export -q --username username --password password --no-auth-cache  -r33268 https://svnlinks /tmp/20120927171608
    command finished in 79314ms
  * processing exclusions...
  * Compressing /tmp/20120927171608 to /tmp/20120927171608.tar.gz
    executing locally: tar czf 20120927171608.tar.gz 20120927171608
    command finished in 1401ms
    servers: ["servername"]
 ** sftp upload /tmp/20120927171608.tar.gz -> /tmp/20120927171608.tar.gz
    [servername] /tmp/20120927171608.tar.gz
    [servername] done
  * sftp upload complete
  * executing "cd /usr/website/rr/releases && tar xzf /tmp/20120927171608.tar.gz && rm /tmp/20120927171608.tar.gz"
    servers: ["servername"]
    [servername] executing command
    command finished in 774ms
  * executing `deploy:finalize_update'
    triggering before callbacks for `deploy:finalize_update'
  * executing `bundle:install'
  * executing "cd /usr/website/rr/releases/20120927171608 && bundle install --gemfile /usr/website/rr/releases/20120927171608/Gemfile --path /usr/website/rr/shared/bundle --deployment --quiet --without development 

test"
    servers: ["servername"]
    [servername] executing command
 ** [out :: servername] Could not reach https://rubygems.org/
    command finished in 1403ms
*** [deploy:update_code] rolling back
  * executing "rm -rf /usr/website/rr/releases/20120927171608; true"
    servers: ["servername"]
    [servername] executing command
    command finished in 344ms
failed: "rvm_path=$HOME/.rvm/ $HOME/.rvm/bin/rvm-shell '1.9.3-p194' -c 'cd /usr/website/rr/releases/20120927171608 && bundle install --gemfile /usr/website/rr/releases/20120927171608/Gemfile --path 

/usr/website/rr/shared/bundle --deployment --quiet --without development test'" on servername 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T06:11:27.103

我只是遇到了同样的问题，但在`after deploy:finalize_update`触发器中。不同的是我的脚本在另一台机器上工作了很长时间。

我没有将 capistrano 锁定为 中的 gem `Gemfile`，所以我尝试恢复到相同版本的工作机器，`2.6.0`但这并没有解决它。

经过一些研究和几次试验，我在 github 项目中发现了一些问题，导致了[这种情况](https://github.com/capistrano/capistrano/issues/256)[，](https://github.com/capistrano/capistrano/issues/255)但看起来人们无法完全重现它。

然后我前往文档并浏览我发现 Capistrano 的行为受到了`0.9.x`与命名空间冲突有关的 rake 版本的最新更改的影响，正如您在部署时可以找到的简短注释中看到的那样：[Capistrano 任务 wiki 页面](https://github.com/capistrano/capistrano/wiki/Capistrano-Tasks)的 create_symlink 部分

我没有时间修复脚本以使用 rake 和 capistrano 的最新版本，但通过将 rake 恢复为 version ，我能够让它在另一台机器上重新工作`0.8.7`。

我希望这可以让您继续前进并为解决方案提供一些线索。

# jquery - Jquery - Fancybox - 背景页面移位问题

> ID：12628807
> 
> 赞同：13
> 
> 时间：2012-09-27T19:35:05.840
> 
> 标签：jquery, css, fancybox

Fancybox 加载良好，一切都按我的意愿打开，但问题发生在后台 - 当盒子加载并返回到盒子上的正常位置时，我的整个页面向右移动 8 个像素是可见的（并且令人不安）关闭。

我无法链接到该站点，因为它位于我们公司防火墙后面的开发服务器上。

我正在使用以下脚本：Fancybox、Quform 和 Jquery Banner Rotator。fancybox 调用发生在旋转器内部。我没有修改原始 jquery fancybox CSS 的任何宽度/高度。

我将主体宽度设置为 100%，边距设置为自动，内部 div 的最小宽度为 1138 像素，边距设置为自动。

有谁知道我应该去哪里解决这个问题？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-13T18:40:49.700

我最近在使用 Fancybox v2 时遇到了非常相似的情况。我的初始页面有首屏下方的内容，因此有一个滚动条（也许 OP 也有，目前尚不清楚）。触发 Fancybox 链接会导致页面正文发生相同的变化并清除滚动条；关闭 Fancybox 图像将主体向后移动并重新启用滚动条。

对我的调整`.fancybox-lock`对我不起作用，但在实例化我的 Fancybox 对象时包含以下选项：

```
helpers: { 
    overlay: { 
        locked: false 
    } 
} 
```

唯一需要注意的是，如果您进行滚动，这不会将您的 Fancybox 锁定在页面的中心，即具有 Fancybox 视图的页面是完全可滚动的。对我来说，这是两害相权取其轻。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-03T04:58:42.673

我最近有同样的问题。在fancybox CSS中找到`.fancybox-lock`，并将其更改为：

```
.fancybox-lock {
    overflow: hidden;
    margin: 0 !important;
    } 
```

瞧！:D

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-05-12T09:27:54.913

您可以禁用锁定功能：

```
$(".fancybox").fancybox({
    helpers : {
        overlay : {
            locked : false
        }
    }
}); 
```

为我工作。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-06-24T12:49:53.293

这是一个已知问题，您可以在此处了解更多信息：[issues、fancyapps @ GitHub](https://github.com/fancyapps/fancyBox/issues/360)

我正在使用 fancybox2（版本 2.1.5）。我通过稍微修改“jquery.fancybox.css”文件解决了这个问题：

找到“覆盖助手”部分（从第 165 行开始）并更改两个规则：

```
.fancybox-lock {
/*  overflow: hidden !important;*/
    overflow-x: hidden !important;
    overflow-y: scroll !important;
    width: auto;
} 
```

第二条规则：

```
.fancybox-lock .fancybox-overlay {
/*  overflow: auto;
    overflow-y: scroll;*/
    overflow: hidden !important;
} 
```

这工作得很好（恕我直言），尽管页面在覆盖层后面是可滚动的。

至少抑制了令人不安的“右移”效应。

后来我发现用“right: 0;”定位的元素 向左移动了垂直滚动条的宽度。

这是因为由 fancybox.js-code 通过在 head-element 内附加一个 style-node 来设置 margin-right。

要解决此问题，只需修改 jquery.fancybox.js 文件或 jquery.fancybox-2.1.5-pack.js 文件中的一行代码，具体取决于您使用的是哪一个。

在解压版本的 2017 行中：

```
$("<style type='text/css'>.fancybox-margin{margin-right:" + (w2 - w1) + "px;}</style>").appendTo("head");

// change it to

$("<style type='text/css'>.fancybox-margin{margin-right: 0;}</style>").appendTo("head");

// perhaps comment out the complete line, I haven't testet it though 
```

或在 .pack 文件中（EOL 附近的第 46 行）：

```
/* [much more code before] */ f("<style type='text/css'>.fancybox-margin{margin-right:"+(d-a)+"px;}</style>").appendTo("head")})})(window,document,jQuery);

// change it to:

/* [much more code before] */ f("<style type='text/css'>.fancybox-margin{margin-right:0;}</style>").appendTo("head")})})(window,document,jQuery);

// or try to remove the "f().appendTo()"-part completely (untested) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-05-31T13:30:18.703

我刚刚通过在我的 body 元素中添加“margin-right: auto !important”来解决它:) 这超过了 Fancyboxes 自己的 margin-right: 0 的规则。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-15T09:27:03.560

我使用了 fancybox **v.2.1.4**和一个**固定的、居中**的身体背景图像，并强制垂直滚动条始终显示。

```
body{
  background: url('../img/sfondo.jpg') fixed center top;
  overflow-y: scroll;
} 
```

尽管强制显示滚动条，但我**在 mac 上遇到了 firefox**的背景图像移位问题（chrome 和 safari 都可以，因为狮子滚动条不占用页面内的空间）和 ie,ff,chrome 在 windows 上。

所以我注意到，如果我在背景属性上手动设置**x-offset**而不是世界**中心，****问题就消失了**，所以我在页面的 HEAD 中用一点 jquery 来管理它：

```
<script>
    function centerTheBackground(){
        var pageWidth = $(window).width();
        var imageWidth = 1920; //set here the width of the background image
        var xOffset = (imageWidth/2) - (pageWidth/2);
        jQuery('body').css('background-position', '-' + xOffset + "px top");
    }

    jQuery(function($){
        centerTheBackground();
    });

    $(window).resize(function() {
        centerTheBackground(); //re-center the background image during window resizing
    });             
</script> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-18T13:13:08.687

在 2.1.3 版本中，注释掉 jquery.fancybox.js 中的第 1802-1807 行（下）。

```
if (!this.overlay) {

this.margin = D.height() > W.height() || $('body').css('overflow-y') === 'scroll' ? $('body').css('margin-right') : false;

this.el     = document.all && !document.querySelector ? $('html') : $('body');

this.create(opts);

} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-05-05T10:55:49.990

好吧，我刚刚在 fancybox CSS 中评论了以下行

```
/*.fancybox-lock {
    overflow: hidden;
}
*/ 
```

它开始在以下方面正常工作：

*   fancyBox - jQuery 插件
*   版本：2.1.4（2013 年 1 月 10 日，星期四）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-09-26T20:02:49.547

这为我做到了...

```
.fancybox-lock {
        overflow: hidden !important;
        padding-right: 17px;
}

.fancybox-lock body {
    overflow: hidden !important;
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-09-17T17:46:54.977

我的解决方案`"@fancyapps/fancybox": "^3.5.7"`：

```
@import '@fancyapps/fancybox';

.fancybox-active {
  height: 500px; // fix fancybox showing skiplinks
}

.compensate-for-scrollbar {
  margin-right: auto !important; // fix fancybox messing body's margin: 0 auto
}

body.compensate-for-scrollbar {
  overflow: auto; // fix fancybox jerking background because of hiding scrollbar
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-12-22T12:59:35.547

您正面临滚动条的问题！只需跟踪滚动条宽度并将该宽度用作' *.fancybox-lock* ' ' *margin-right* '。例如，

```
.fancybox-lock{
       margin-right: [your calculated width] !important;
 } 
```

这肯定会解决你的问题，因为我曾经也遇到过这个问题。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-10-13T13:52:54.087

如果您的问题是 Fancybox 打开时的固定元素跳跃，只需在 .fancybox-lock 类中包含的 CSS 中的这些元素中添加一个 padding-right: 17px。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-08-13T05:45:19.690

我正在使用花哨的盒子 3，并且遇到了同样的问题，因为我的主要包装器是绝对位置。

确保你的包装不是，它应该可以正常工作。

# entity-framework - 将 EntityFramework 连接到 Lotus Notes

> ID：12628810
> 
> 赞同：0
> 
> 时间：2012-09-27T19:35:33.217
> 
> 标签：entity-framework, odbc, lotus-notes

理论上我应该能够将 EntityFramework 连接到我可以通过 ODBC 驱动程序访问的任何 Db，这是正确的吗？因此，如果我使用类似[http://www.connectionstrings.com/lotus-notes](http://www.connectionstrings.com/lotus-notes)中提到的库，应该可以将 EF 连接到 Lotus Notes？我知道这是一个应该避免的事情；）这是一次迁移。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T19:51:52.420

理论上是的，但我会在这里寻找最新的驱动程序：

[https://www.ibm.com/developerworks/lotus/documentation/notessql/](https://www.ibm.com/developerworks/lotus/documentation/notessql/)

# javascript - push 在 if 语句中不起作用

> ID：12628813
> 
> 赞同：1
> 
> 时间：2012-09-27T19:35:48.957
> 
> 标签：javascript, arrays, loops

我有下面的代码，但是当它在语句中`items.push`时不起作用。如果在结束之前`if`取消注释该行，则按预期工作。`}``items.push`

```
for (i = 0; i < len; i += 1) {
    row = resultexpense.rows.item(i);

    t.executeSql('SELECT * FROM expensepayments WHERE Barcode = ?',
    [row.barcode], 
        function(t, resultpaid) {
            var myrowpaid, 
                myrowpaidlen;
            myrowpaidlen = resultpaid.rows.length;
            alert(myrowpaidlen); //alerts 1
            if (myrowpaidlen > 0){
                myrowpaid = resultpaid.rows.item(0);
                alert(row.amount); //alerts 90
                alert(myrowpaid.Amount); //alerts 50
                if (row.amount > myrowpaid.Amount){
                    alert(row.amount- myrowpaid.Amount); //alerts 40
                    items.push('<li><a href="#displayexpense" data-description="' + row.description + '" data-buildingcode = "' + row.buildingcode + '" data-barcode="' + row.barcode + '" data-amount="' + row.amount + '" data-buildingaddress="' + row.buildingaddress + '">' + row.description + '</a></li>');
                }
            } else {
                items.push('<li><a href="#displayexpense" data-description="' + row.description + '" data-buildingcode = "' + row.buildingcode + '" data-barcode="' + row.barcode + '" data-amount="' + row.amount + '" data-buildingaddress="' + row.buildingaddress + '">' + row.description + '</a></li>');
            }

        });
//  items.push('<li><a href="#displayexpense" data-description="' + row.description + '" data-buildingcode = "' + row.buildingcode + '" data-barcode="' + row.barcode + '" data-amount="' + row.amount + '" data-buildingaddress="' + row.buildingaddress + '">' + row.description + '</a></li>');

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T19:56:16.660

我不确定`typeof`你的变量是什么，是它`number`还是只是一个`string`？

if`typeof row.amount == "string"`或`typeof myrowpaid.Amount == "string"`then`if`条件不会执行。

可以肯定的是，您的变量是`number`类型，使用`parseInt()`函数转换为数字

```
if (parseInt(row.amount, 10) > parseInt(myrowpaid.Amount, 10)){
                alert(row.amount- myrowpaid.Amount); //alerts 40
                items.push('<li><a href="#displayexpense" data-description="' + row.description + '" data-buildingcode = "' + row.buildingcode + '" data-barcode="' + row.barcode + '" data-amount="' + row.amount + '" data-buildingaddress="' + row.buildingaddress + '">' + row.description + '</a></li>');
            } 
```

* * *

如果您还没有对变量进行减速，请在使用 items 变量之前`items`添加`var items = [];`

# eclipse - 在 GXT 示例应用程序中找不到“com/extjs/gxt/ui/GXT.gwt.xml”

> ID：12628818
> 
> 赞同：4
> 
> 时间：2012-09-27T19:36:06.277
> 
> 标签：eclipse, gwt, extjs, gxt

我正在尝试使用 GXT (ExtJS + GWT) 运行示例应用程序，如教程中所述

[http://www.sencha.com/learn/setting-up-your-first-ext-gwt-project-in-eclipse](http://www.sencha.com/learn/setting-up-your-first-ext-gwt-project-in-eclipse)

当我尝试在 Eclipse 中运行应用程序时，出现错误

```
Loading modules
   com.hello.gxt.HelloGXT
      Loading inherited module 'com.extjs.gxt.ui.GXT'
         [ERROR] Unable to find 'com/extjs/gxt/ui/GXT.gwt.xml' on your classpath; could be a typo, or maybe you forgot to include a classpath entry for source?
      [ERROR] Line 15: Unexpected exception while processing element 'inherits' 
```

我的构建路径如下所示

![在此处输入图像描述](../Images/1010d7995e9c61d3859feee420d063db.png)

运行配置的构建路径如下所示

![在此处输入图像描述](../Images/2d5ef12fe8ab0a5175c1254f59a788c2.png)

这是来源：[https ://dl.dropbox.com/u/11776689/2012_09_27_HelloGXT.zip](https://dl.dropbox.com/u/11776689/2012_09_27_HelloGXT.zip)

我该如何解决这个问题？

'更新 29.09.2012'：前一个错误已修复，但现在我得到另一个错误：

```
Loading modules
   com.hello.gxt.HelloGXT
      Loading inherited module 'com.sencha.gxt.ui.GXT'
         Loading inherited module 'com.sencha.gxt.data.Data'
            Loading inherited module 'com.sencha.gxt.core.Core'
               [ERROR] Unexpected error while processing XML
java.lang.NoClassDefFoundError: com/google/gwt/core/ext/Generator
    at java.lang.ClassLoader.findBootstrapClass(Native Method)
    at java.lang.ClassLoader.findBootstrapClassOrNull(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-27T21:01:24.150

更改您的 *.gwt.xml 文件：

```
<inherits name="com.extjs.gxt.ui.GXT" /> 
```

到

```
<inherits name='com.sencha.gxt.ui.GXT' /> 
```

您使用的教程绝对是针对 2.0 版的。从 GXT 3.0 起，命名空间更改为 com.sencha.gxt...

更新 - 回答下一个问题：

我认为您缺少 gwt-dev.jar

请参阅此内容以供参考：[http](http://www.sencha.com/forum/showthread.php?73617-GWT-1.64-Class-not-found-exception-GXT-module-declaration-is) ://www.sencha.com/forum/showthread.php?73617-GWT-1.64-Class-not-found-exception-GXT-module-declaration-is 。

# objective-c - 可以跳过继承类中的 init 方法吗？

> ID：12628822
> 
> 赞同：3
> 
> 时间：2012-09-27T19:36:34.593
> 
> 标签：objective-c, initialization

[考虑http://developer.apple.com/library/ios/#documentation/general/conceptual/CocoaEncyclopedia/Initialization/Initialization.html](http://developer.apple.com/library/ios/#documentation/general/conceptual/CocoaEncyclopedia/Initialization/Initialization.html)中的以下文本。

> 创建子类时，继承的初始化程序是一个问题。有时，超类 init... 方法可以充分初始化您的类的实例。但是因为它很可能不会，所以你应该重写超类的初始化器。如果不这样做，则会调用超类的实现，并且由于超类对您的类一无所知，因此您的实例可能无法正确初始化。

在同一页面上，我找到了这段文字：

> 每个声明实例变量的对象都应该实现一个初始化方法——除非默认的将一切设置为零初始化就足够了。

我的问题是：如果我跳过 B 类从 A 继承的 B 类中的 init 方法，我可以相信 B 的非继承成员变量设置为零吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T19:46:03.590

> 我的问题是：如果我跳过 B 类从 A 继承的 B 类中的 init 方法，我可以相信 B 的非继承成员变量设置为零吗？

Objective-C 会将[任何新对象的所有 ivars 设置为零](http://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocObjectsClasses.html#//apple_ref/doc/uid/TP30001163-CH11-TPXREF115)：

> alloc 方法为新对象的实例变量动态分配内存，并将它们全部初始化为 0 — 全部，即除了将新实例连接到其类的 isa 变量。为了使一个对象有用，它通常需要更完整地初始化。这就是 init 方法的功能。

因此，如果您没有任何需要初始化的 ivars/属性，则可以跳过为您的类实现初始化方法。当然，您仍然必须通过调用`-init`或其他一些初始化方法来初始化新对象，以便超类有机会初始化自己。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T19:39:16.827

是的，B 类的非继承成员变量将为零。继承变量将具有在类 A 的 init 方法中设置的任何值（如果未设置，则为零）。

# jquery - jquery复制html选择选项但名称不同

> ID：12628824
> 
> 赞同：0
> 
> 时间：2012-09-27T19:36:44.210
> 
> 标签：jquery

我有一个 html 下拉列表：

```
<select name="name1">
<option value="1">John</option>
<option value="2">Doe</option>
<option value="3">Foo</option>
<option value="4">Bar</option>
</select> 
```

是否有一个 jQuery 函数可以生成相同的选项但不同的下拉名称，例如：

```
<select name="name2">
<option value="1">John</option>
<option value="2">Doe</option>
<option value="3">Foo</option>
<option value="4">Bar</option>
</select> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T19:39:46.727

假设这`$place`是您要附加新组合框的位置。

```
$select = $('select').clone();

$place.append($select.attr('name', 'name2')); 
```

[**演示**](http://jsfiddle.net/aSheJ/)

参考：

*   [http://api.jquery.com/clone/](http://api.jquery.com/clone/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T19:38:14.047

尝试克隆并更改名称，

```
var $newSelect = $('select[name=name1]').clone().attr('name', 'name2'); 
```

`append/prepend`$newSelect 到您文档中的任何位置:)

同样正如[大卫](https://stackoverflow.com/questions/12628824/jquery-replicating-html-select-options-but-different-names/12628844#comment17028958_12628844)建议的那样，您可以使用以下方法动态生成名称，

```
var $newSelect = $('select[name=name1]')
                    .clone()
                    .attr('name', function(i,n) { 
                         var int = 
                                parseInt(n.match(/\d*/),10); 
                         return n.replace(/\d*/, int + 1); 
                     }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T19:39:25.570

```
$('<jquery 选择器条件>').clone().attr("name", "new_name")

```

# php - PHP从数据库行构建唯一地址数组

> ID：12628833
> 
> 赞同：0
> 
> 时间：2012-09-27T19:37:27.770
> 
> 标签：php

我如何构建一个唯一的数组来检查每个地址字段。

例如，此刻我得到了一切：

```
$stmnt = "SELECT `location_id`, `location_address1`, `location_address2`,
            `location_town`, `location_region`, `location_postcode`
          FROM locations WHERE user_id = '{$id}'";
$results = $db->fetchAll($stmnt);

    if(!empty($results ))  {
        foreach($results as $row) {
            if($unique){
                $value = $row['location_id'];
                $label = implode(", ", array(
                    'address1'      => $row['location_address1'],
                    'address2'      => $row['location_address2'],
                    'town'          => $row['location_town'],
                    'region'        => $row['location_region'],
                    'postcode'      => $row['location_postcode']
                ));
            } 
```

我在想，`if($unique){`你会在哪里通过搜索这个来检查临时数组中是否存在这个地址1、地址2等？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T19:43:18.130

使用 SELECT DISTINCT 将允许您返回一组独特的结果，不包括与另一个结果重复的结果。如果您愿意，您甚至可以使用 ORDER BY，但请记住，对于 DISTINCT 选择，ORDER BY 中的任何内容也必须在 SELECT 语句中。

# ios - linphone 聊天消息的问题

> ID：12628838
> 
> 赞同：3
> 
> 时间：2012-09-27T19:37:46.760
> 
> 标签：ios

我正在开发一个 iPhone 应用程序，它使用 linphone 进行通信，语音和视频都可以正常工作，但短信不行。

只发送最后一条短信。在我们的 iPhone 应用程序中使用 liblinphone 时会发生这种情况，但在 windows 和 mac 的 linphone 中也会发生这种情况。

你能建议一个解决方法来解决它吗？

谢谢，莱昂纳多。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T18:56:00.090

我正在回答我自己的问题，因为它可能对其他人有用。Linphone 的创建者承认并解决了该错误。现在它运作良好。您可以更新/签出。

# java - 如何实现一个简单的 AsyncTaskLoader？

> ID：12628848
> 
> 赞同：9
> 
> 时间：2012-09-27T19:38:20.913
> 
> 标签：java, android, android-asynctask, android-loader

在我最近的一个 SO 问题中，有人建议我使用`Loader`我的解决方案。所以在这里我试图了解如何实现一个简单的`AsyncTaskLoader`

这是我想出的：

```
public class Scraper extends AsyncTaskLoader<List<Event>> {

    List<Event> lstEvents;

    public Scraper(Context context) {
        super(context);
    }

    public List<Event> loadInBackground() {

            //This is where I will do some work and return the data

    }

} 
```

这就是我想出来的。我阅读了文档，`AyncTaskLoader`但我从未遇到过像它这样神秘和凌乱的东西。有一百万种方法，所有这些方法都是相互对立的，看着它们，很难推断出它们被调用的顺序，甚至它们是否应该被覆盖和调用。这项任务的生命周期是一场该死的噩梦。

我正在寻找的是简单地抓取一些数据并将其返回。我还想将它存储在一个类变量中，以便下次及时返回它，而不必再次抓取所有数据。

我没有打开的游标、流或类似的东西，只有一个名为`lstEvents`（可能很大）的简单变量。我不想泄漏内存和浪费资源，所以如果有人能解释我需要什么来关闭/取消何时何地让这个任务工作，我会很高兴。

我应该在哪里将数据存储到类变量中？我应该在我的`loadInBackground`方法结束时这样做还是应该在`deliverResult`方法中这样做？

在这个简单的场景中，我是否真的需要检查任务是否被取消或是否被重置，或者我是否应该简单地不覆盖这些方法并让`AsyncTaskLoader`处理它。

如果有人知道，一些脚手架代码会很有帮助。万分感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T19:59:33.290

> 在我最近的一个 SO 问题中，有人建议我使用 Loader 作为我的解决方案。

这可能不是一个好建议。

> 这项任务的生命周期是一场该死的噩梦。

更不用说`Loader`合同建议您应该能够动态检测数据的变化并自动向使用 的人提供更新`Loader`，这对于 a 来说很容易`ContentProvider`，对于其他设备上的商店来说很困难，对于像你这样的场景。

坦率地说，我只是使用`AsyncTask`并称它为好。

话虽如此，您可能会看看[我](https://github.com/commonsguy/cwac-loaderex)为 SQLite 数据库 (sans )所做[的`Loader`](https://github.com/commonsguy/cwac-loaderex)实现以及自定义加载程序的示例。*您需要*实现的唯一方法 是和。如果内置实现不足，您*可能*需要- 在您的情况下，我怀疑内置实现会很好。您*可以*添加一些其他方法，正如您将在[我](https://github.com/commonsguy/cwac-loaderex/blob/master/src/com/commonsware/cwac/loaderex/AbstractCursorLoader.java)的 中看到的那样，尽管我再次怀疑您不需要它们。`ContentProvider``SharedPreferences`*`loadInBackground()``onStartLoading()`*`deliverResult()`*[`AbstractCursorLoader`](https://github.com/commonsguy/cwac-loaderex/blob/master/src/com/commonsware/cwac/loaderex/AbstractCursorLoader.java)***

 ***> 有没有地方我真的需要检查任务是否被取消或是否被重置，或者我是否应该简单地不覆盖这些方法并让 AsyncTaskLoader 处理它。

从让它`AsyncTaskLoader`处理开始，只有当您确定出于某种原因需要它们时才担心它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T20:15:14.787

除了来自 CommonsWare 答案的所有好信息之外，还有另一件事需要考虑。实现时`AsyncTaskLoader`，您需要调用`forceLoad()`Loader 或`AsyncTaskLoader`. 否则，`loadInBackground()`根据我的经验，您的方法不会被调用。

根据我对文档的理解，加载程序可以在成员变量中保留其结果，就像您在问题中提出的那样。然后，您可以覆盖`onStartLoading()`并检查缓存的结果列表。如果列表为空，加载程序可以调用`forceLoad()`自身。

另请注意，如果您最终实现了缓存结果，请注意`loadInBackground()`在另一个线程上调用它，因此您可能希望同步对任何成员变量的访问。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-24T15:05:34.447

有点晚了，但可能对正在阅读此问题的其他人有用。这是AsyncTaskLoader的一个实现：

```
public class EventListLoader extends AsyncTaskLoader<List<Event>> {
    private List<Event> events;

    public EventListLoader(Context context) {
        super(context);
        events = new ArrayList<Event>();
    }

    @Override
    public List<Event> loadInBackground(){
        //"Simply scrape some data and return it" as a list of events here.
    }

    @Override
    public void deliverResult(List<Event> data) {
        if (isReset()) {
            releaseResources(events);
            return;
        }

        List<Event> oldData = events;
        events = data;

        if (isStarted())
            super.deliverResult(data);

        releaseResources(oldData);
    }

    @Override
    protected void onStartLoading() {
        if (events != null && !events.isEmpty())
            deliverResult(events);

        if (takeContentChanged() || events == null || events.isEmpty())
            forceLoad();
    }

    @Override
    protected void onStopLoading() {
        super.onStopLoading();
        cancelLoad();
    }

    @Override
    public void onCanceled(List<Event> data) {
        super.onCanceled(data);
        releaseResources(events);
    }

    @Override
    protected void onReset() {
        super.onReset();
        onStopLoading();
        releaseResources(events);
    }

    private void releaseResources(List<Event> data) {
        if (data!= null && !data.isEmpty())
            data.clear();
    }
} 
```

在 ListFragment 中使用它作为：

```
public class EventsListFragment extends ListFragment implements LoaderManager.LoaderCallbacks<List<Event>> {
    private static final int LOADER_ID = 0;

    ...

    @Override
    public void onViewCreated(View view, Bundle savedInstanceState) {
        super.onViewCreated(view, savedInstanceState);
        ...
        setListAdapter(new EventListAdapter());
        if (savedInstanceState == null)
            getLoaderManager().initLoader(LOADER_ID, null, this);
        else
            getLoaderManager().restartLoader(LOADER_ID, null, this);
    }

    @Override
    public Loader<List<Event>> onCreateLoader(int id, Bundle args) {
        return new EventLoader(getActivity());
    }

    @Override
    public void onLoadFinished(Loader<List<Event>> loader, List<Event> data) {
        ((EventListAdapter) getListAdapter()).setData(data);
        invalidateActionMode(); //Only if Contextual Action Bar (CAB) is used.
    }

    @Override
    public void onLoaderReset(Loader<List<Event>> loader) {
        ((EventListAdapter) getListAdapter()).clearData();
    } 
```

如果我们将 EventListAdapter 定义为：

```
public class EventListAdapter extends BaseAdapter {
    protected List<Event> mItems = new ArrayList<>();

    @Override                               
    public boolean isEnabled(int position) {
        return true;
    }

    @Override
    public boolean hasStableIds() {
        return true;
    }

    @Override
    public int getCount() {
        return mItems.size();
    }

    @Override
    public Object getItem(int position) {
        return mItems.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
       ...
    }

    public void setData(List<Event> items){
        mItems.clear();
        mItems.addAll(items);
        notifyDataSetChanged();
    }

    public void clearData(){
        mItems.clear();
        notifyDataSetChanged();
    }
} 
```***

# ajax - AJAX 选项卡面板和绑定数据表

> ID：12628852
> 
> 赞同：1
> 
> 时间：2012-09-27T19:38:36.040
> 
> 标签：ajax, datatable

我正在尝试找到一种将数据表绑定到选项卡面板（在选项卡容器和模板内）的方法，而无需在 page_init 或 page_load 上执行此操作。或将数据表绑定到gridview，然后将该gridview 绑定到选项卡面板。我知道如何将数据表绑定到网格视图，所以这很容易。我必须能够 - 单击一个按钮 - 在该选项卡容器中添加或创建多个选项卡。

我希望用户能够单击一个按钮，运行一些查询，然后使选项卡容器可见，并将数据表中的数据绑定到当时的面板（然后将面板绑定到选项卡容器）。多次这样做。

有人可以提供一个例子或解释我如何实现这一点吗？更新面板是我的答案吗？我在哪里可以找到一些好的例子？

更新

我发现将数据绑定到 Ajax 选项卡中的网格视图非常容易。当然，您需要在 asp 页面和 web.config 文件中声明的脚本管理器 ajax 引用。您还需要将 ajax css 样式添加到现有样式表中。我尝试使用单独的，但没有用。

ASP HTML

```
<AjaxToolkit:TabContainer ID="TabContainer1" runat="server" ActiveTabIndex="0" 
                            Visible="false" ScrollBars="Both"
                            CssClass="Tab2" Width="1326px" Height="464px" >

<AjaxToolkit:TabPanel ID="TabPanel1" runat="server" HeaderText="Empty" Enabled="true"    ScrollBars="Both" CssClass="Tab2">

<ContentTemplate>
<div style="overflow:auto;width:1287px; height: 418px;">
 <font color="white" size="1" face="Verdana">

 <asp:GridView ID="SalesOrderView1"     runat="server" BackColor="White"   BorderColor="#DEDFDE"visible="False"BorderStyle="None"      BorderWidth="1px" 
 CellPadding="4" ForeColor="Black" 
 GridLines="Vertical"     HorizontalAlign="Center">
 <AlternatingRowStyle      BackColor="White" />
 <FooterStyle BackColor="#CCCC99" />
 <HeaderStyle BackColor="#6B696B" Font-Bold="True" ForeColor="White" />
 <PagerStyle BackColor="#F7F7DE"    ForeColor="Black" HorizontalAlign="Right" />
 <RowStyle BackColor="#F7F7DE" />
 <SelectedRowStyle BackColor="#CE5D5A" Font-Bold="True" ForeColor="White" />
 <SortedAscendingCellStyle BackColor="#FBFBF2" />
 <SortedAscendingHeaderStyle BackColor="#848384" />
 <SortedDescendingCellStyle BackColor="#EAEAD3" />
  <SortedDescendingHeaderStyle BackColor="#575357" />
 </asp:GridView>
  </div>
  </font>
 </ContentTemplate>
   </AjaxToolkit:TabPanel>
      <AjaxToolkit:TabPanel ID="TabPanel2" runat="server" HeaderText="Empty" ScrollBars="Both" CssClass="Tab2">
 <ContentTemplate >
 </AjaxToolkit:TabContainer> 
```

在单击按钮事件上将数据绑定到 gridview 的 C# 代码。

```
 SalesOrderView1.Visible = true;
                        TabPanel1.Visible = true;
                        TabPanel1.HeaderText = Order_List[multi_order_count]; 
```

# c# - 脚本在命名空间中不存在。找不到脚本服务

> ID：12628854
> 
> 赞同：1
> 
> 时间：2012-09-27T19:38:36.807
> 
> 标签：c#, asp.net, asp.net-ajax

大约一天以来，我一直在尝试消除三个编译器错误。

错误如下：

```
> Error 1   The type or namespace name 'Script' does not exist in the
> namespace 'System.Web' (are you missing an assembly
> reference?)   D:\WebData\Intranet\depts\MSO\msow_reports\App_Code\SearchPract.cs  7   18  http://localhost/depts/MSO/msow_reports/
> Error 2   The type or namespace name 'ScriptService' could not be found
> (are you missing a using directive or an assembly
> reference?)   D:\WebData\Intranet\depts\MSO\msow_reports\App_Code\SearchPract.cs  14  2   http://localhost/depts/MSO/msow_reports/
> Error 3   The type or namespace name 'Script' does not exist in the
> namespace 'System.Web' (are you missing an assembly
> reference?)   D:\WebData\Intranet\depts\MSO\msow_reports\App_Code\SearchPract.cs  26  17  http://localhost/depts/MSO/msow_reports/ 
```

该项目是一个 .net 3.5 项目，我正在尝试将其导入 Visual Studio 2010。我已尝试更新到 .net 4 并将其保留为 .net 3.5。我的理解是 Script 和 ScriptService 应该在 System.Web.Extensions dll 中。添加对此程序集的引用似乎不起作用。

请注意我的 Web.config 文件中的以下摘录：

```
<compilation debug="true">
  <assemblies>
    <add assembly="System.Management, Version=2.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
    <add assembly="eWorld.UI, Version=2.0.6.2393, Culture=neutral, PublicKeyToken=24D65337282035F2"/>
    <add assembly="System.Windows.Forms, Version=2.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
    <add assembly="System.Design, Version=2.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
    <add assembly="System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
    <add assembly="System.Drawing, Version=2.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
    <add assembly="System.Data, Version=2.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
    <add assembly="System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
    <add assembly="System.Xml, Version=2.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
    <add assembly="System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
    <add assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    <add assembly="System.Xml.Linq, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
    <add assembly="System.Data.DataSetExtensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
    <add assembly="System.Web.Extensions.Design, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    <add assembly="CrystalDecisions.CrystalReports.Engine, Version=13.0.2000.0, Culture=neutral, PublicKeyToken=692FBEA5521E1304"/>
    <add assembly="CrystalDecisions.ReportSource, Version=13.0.2000.0, Culture=neutral, PublicKeyToken=692FBEA5521E1304"/>
    <add assembly="CrystalDecisions.Shared, Version=13.0.2000.0, Culture=neutral, PublicKeyToken=692FBEA5521E1304"/>
    <add assembly="CrystalDecisions.Web, Version=13.0.2000.0, Culture=neutral, PublicKeyToken=692FBEA5521E1304"/>
  </assemblies>
</compilation> 
```

不愉快的代码如下：

```
using System;
using System.Collections.Generic;
using System.Web.Services;
using System.Data;
using System.Data.SqlClient;
using System.Configuration;
using System.Web.Script.Services;

/// <summary>
/// Summary description for SearchPract
/// </summary>
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[ScriptService]
// To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
// [System.Web.Script.Services.ScriptService]
public class SearchPract : System.Web.Services.WebService {

    public SearchPract () {

        //Uncomment the following line if using designed components 
        //InitializeComponent(); 
    }

    [System.Web.Services.WebMethod]
    [System.Web.Script.Services.ScriptMethod]
    public string[] GetPracts(string prefixText, int count) 
```

我尝试将 System.Web.Extensions.dll 和 System.Web.Extensions.Design.dll 添加到 Bin 文件夹以及 web.config 文件。浏览“我的解决方案”时，System.Web.Extensions 程序集仍未显示在对象浏览器中。我假设这是问题的症结所在。在这一点上，我不知道从这里尝试什么。

我想知道我是否忽略了一些明显的东西。

请让我知道我应该提供哪些其他信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-27T06:13:38.827

使用 .NET 2.0 版，您可以添加由 Microsoft 开发的 System.Web.Extensions.DLL 1.0.61231.0 版，它适用于我在 mono 最新版本上使用 ASP .net 2.0 的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T07:18:43.237

从[**MSDN**](http://msdn.microsoft.com/en-us/library/system.web.script.services.scriptserviceattribute.aspx)文档，

ScriptService 来自 .NET 版本 3.5。

如果您的项目的版本低于上述版本，那么显然它将永远无法工作。

要使其正常工作，您需要将项目的版本更改为更高版本。请按照以下步骤操作：

```
myProject Properties --> Application --> Target Framework --> Set it to >3.5 
```

# ios5 - 有什么方法可以更改在 iOS 模拟器上看到的日期/时间（更改 Mac 设置除外）？

> ID：12628859
> 
> 赞同：17
> 
> 时间：2012-09-27T19:39:03.217
> 
> 标签：ios5, xcode4, simulator

我需要做一些测试，包括在几天内前后移动“电话”。我想在模拟器上做这个。是否有任何可用的 hack 允许更改在模拟器上看到的日期，而无需更改 Mac 日期？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-18T10:20:15.020

看起来这很困难......如何使用`xcodebuild`从脚本自动构建和运行应用程序并使用`systemsetup -setdate <mm:dd.yy>`在不同运行之间更改日期？那么你就不需要改变代码中的任何东西了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-21T05:53:57.580

您可以使用方法调配来替换`[NSDate date]`运行时的实现以返回您选择的值。

有关方法调配的更多信息，请参阅[http://www.icodeblog.com/2012/08/08/using-method-swizzling-to-help-with-test-driven-development/](http://www.icodeblog.com/2012/08/08/using-method-swizzling-to-help-with-test-driven-development/)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-01-14T15:22:32.063

我需要自动测试我的应用程序，这需要更改系统时间。我做到了，正如汤姆建议的那样：快乐的 hacky 方法 swizzling。

*出于演示目的，我只更改`[NSDate date]`而不更改`[NSDate dateWithTimeIntervalSince1970:]`。*

首先你需要创建你的类方法作为新的`[NSDate date]`. 我实现它只是为了简单地将时间移动一个常数`timeDifference`。

```
int timeDifference = 60*60*24; //shift by one day
NSDate* (* original)(Class,SEL) = nil;

+(NSDate*)date{
    NSDate* date = original([NSDate class], @selector(date));
    return [date dateByAddingTimeInterval:timeDifference];
} 
```

到目前为止，很容易。有趣的来了。我们从类和交换实现中获取方法（它在 AppDelegate 中对我有用，但在我的 UITests 类中不起作用）。为此，您需要导入`objc/runtime.h`.

```
Method originalMethod = class_getClassMethod([NSDate class], @selector(date));
Method newMethod = class_getClassMethod([self class], @selector(date));

//save the implementation of NSDate to use it later
original  = (NSDate* (*)(Class,SEL)) [NSDate methodForSelector:@selector(date)];

//happy swapping
method_exchangeImplementations(originalMethod, newMethod); 
```

显然，请确保您在部署的应用程序中不使用这些。最后，我只能同意之前的答案，苹果为什么没有为此添加本机支持是非常值得怀疑的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T14:30:42.450

如果您正在创建应用程序，只需更改应用程序中的测试日期，您可以在发布时将其删除。

# sql-server - 每天选择第一组 10 个（删除重复记录）

> ID：12628860
> 
> 赞同：0
> 
> 时间：2012-09-27T19:39:05.963
> 
> 标签：sql-server, tsql

我有一个名为 BillingInformation 的表，其中包含以下列：id、clientId、type、order、value、timestamp

id 是一个人工密钥对于特定日期的每个 clientId 将有 10 种类型，例如

```
clientId   type              order    timestamp
1          Outstanding AR    0        2012-09-24 10:45:28.557
1          Est. Days In AR   1        2012-09-24 10:45:28.580
1          ...               2        2012-09-24 10.45.28.603
1          ...               3        2012-09-24 10.45.28.620  
1          ...               4        2012-09-24 10.45.28.630  
1          ...               5        2012-09-24 10.45.28.653
1          ...               6        2012-09-24 10.45.28.697
1          ...               7        2012-09-24 10.45.28.717
1          ...               8        2012-09-24 10.45.28.727
1          ...               9        2012-09-24 10.45.28.727
2          Outstanding AR    0        ...
2          Est. Days In AR   1        ...
(cont. 8 more rows for client 2) 
```

我的问题是我有一些 clientIds，其中 10 个条目在数据库中不止一次，我只想为每个客户端选择 10 个（其中 order = 0 到 9）。

这是我现在的情况：

```
clientId   type              order    timestamp
1          Outstanding AR    0        2012-09-24 10:45:28.557
1          Est. Days In AR   1        2012-09-24 10:45:28.580
1          ...               2        2012-09-24 10.45.28.603
1          ...               3        2012-09-24 10.45.28.620  
1          ...               4        2012-09-24 10.45.28.630  
1          ...               5        2012-09-24 10.45.28.653
1          ...               6        2012-09-24 10.45.28.697
1          ...               7        2012-09-24 10.45.28.717
1          ...               8        2012-09-24 10.45.28.727
1          ...               9        2012-09-24 10.45.28.727
1          Outstanding AR    0        2012-09-24 10:45:28.557
1          Est. Days In AR   1        2012-09-24 10:45:28.580
1          ...               2        2012-09-24 10.45.28.603
1          ...               3        2012-09-24 10.45.28.620  
1          ...               4        2012-09-24 10.45.28.630  
1          ...               5        2012-09-24 10.45.28.653
1          ...               6        2012-09-24 10.45.28.697
1          ...               7        2012-09-24 10.45.28.717
1          ...               8        2012-09-24 10.45.28.727
1          ...               9        2012-09-24 10.45.28.727
2          Outstanding AR    0        ...
2          Est. Days In AR   1        ... 
```

（客户 2 续 8 行）（客户 3 续 10 行）（依此类推...）

无论客户 1 在 2012 年 9 月 14 日这一天重复多少次记录 0 到 9（不考虑时分秒和毫秒），我只想选择一组 10 条记录和其他记录。因此，如果任何客户在同一月份和同一年重复了 10 组，我只想要在该月份和同一年的一组 10 组。

谁能帮我这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T20:04:12.137

怎么样：

```
WITH CTE AS (
SELECT id, ROW_NUMBER() OVER (PARTITION BY ClientId, CAST([timestamp] AS date), [order] ORDER BY [timestamp]) as rn
FROM BillingInformation
)
SELECT b.*
FROM BillingInformation b
JOIN CTE c on c.id = b.id and c.rn=1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T20:14:46.907

```
select id, clientId, type, [order], value, timestamp
from
(
  select *, row_number() over (partition by clientId, [order],
                                            datediff(d,0,timestamp)
                               order by timestamp desc) rn
  from BillingInformation
) X
where rn=1 
```

# xslt - 如何编写 XSLT 以在 HTML 表中每次出现同级节点时重复同级节点值

> ID：12628863
> 
> 赞同：4
> 
> 时间：2012-09-27T19:39:07.197
> 
> 标签：xslt

我是 XSLT 的新手，如果我的代码很糟糕，请原谅我。我希望有一个 HTML 表格，其中包含针对每次日常干预重复的剧集细节。在使用我的代码时，我什至没有桌子。我一直在寻找方法来做到这一点，但无济于事

我的 XML

```
<?xml version="1.0" encoding="UTF-8" ?>
<?xml-stylesheet type="text/xsl" href="example_XMLTransformationFile.xsl"?>
<ClientImport xmlns:xsi="http://www.w3.org/2001/XMLSchema">
<episode localID="P333456">
    <episodeDetails>
        <caseNo>0000000</caseNo>
        <address1>where Person1 live</address1>
        <address4>Do they live there</address4>
        <postcode>PP1 2PP</postcode>
        <familyName>Person1</familyName>
        <firstName>PersonF1</firstName>
        <dobEst>0</dobEst>
    </episodeDetails>
    <dailyInterventions>
    <dailyIntervention>
        <activityDate>2012-08-23</activityDate>
        <ecg>true</ecg>
        <cpox>true</cpox>
        <invVentET>true</invVentET>
        <invVentTT>false</invVentTT>
    </dailyIntervention>
    <dailyIntervention>
        <activityDate>2012-08-24</activityDate>
        <ecg>true</ecg>
        <cpox>true</cpox>
        <invVentET>true</invVentET>
        <invVentTT>false</invVentTT>
    </dailyIntervention>
    <dailyIntervention>
        <activityDate>2012-08-25</activityDate>
        <ecg>true</ecg>
        <cpox>true</cpox>
        <invVentET>false</invVentET>
        <invVentTT>false</invVentTT>
    </dailyIntervention>
    <dailyIntervention>
        <activityDate>2012-08-26</activityDate>
        <ecg>true</ecg>
        <cpox>true</cpox>
        <invVentET>true</invVentET>
        <invVentTT>false</invVentTT>
    </dailyIntervention>
    <dailyIntervention>
        <activityDate>2012-08-27</activityDate>
        <ecg>true</ecg>
        <cpox>true</cpox>
        <invVentET>true</invVentET>
        <invVentTT>false</invVentTT>
    </dailyIntervention>
    <dailyIntervention>
        <activityDate>2012-08-28</activityDate>
        <ecg>true</ecg>
        <cpox>true</cpox>
        <invVentET>true</invVentET>
        <invVentTT>false</invVentTT>
    </dailyIntervention>
    <dailyIntervention>
        <activityDate>2012-08-29</activityDate>
        <ecg>true</ecg>
        <cpox>true</cpox>
        <invVentET>true</invVentET>
        <invVentTT>false</invVentTT>
    </dailyIntervention>
    <dailyIntervention>
        <activityDate>2012-08-30</activityDate>
        <ecg>true</ecg>
        <cpox>true</cpox>
        <invVentET>false</invVentET>
        <invVentTT>false</invVentTT>
    </dailyIntervention>
    <dailyIntervention>
        <activityDate>2012-08-31</activityDate>
        <ecg>true</ecg>
        <cpox>true</cpox>
        <invVentET>false</invVentET>
        <invVentTT>false</invVentTT>
    </dailyIntervention>
    </dailyInterventions>
</episode>
<episode localID="20120410">
    <episodeDetails>
        <caseNo>0000001</caseNo>
        <address1>where Person2 Lives</address1>
        <address4>Street Person2</address4>
        <postcode>XX1 1XX</postcode>
        <familyName>Person2</familyName>
        <firstName>Person2 A</firstName>
        <dobEst>0</dobEst>
    </episodeDetails>
    <dailyInterventions>
    <dailyIntervention>
        <activityDate>2012-08-23</activityDate>
        <noCrit>true</noCrit>
    </dailyIntervention>
    </dailyInterventions>
</episode>
<episode localID="20120411">
<episodeDetails>
    <caseNo>0000002</caseNo>
    <address1>Where Person3 Lives</address1>
    <address4>Person 3 Street</address4>
    <postcode>WW1 1WW</postcode>
    <familyName>Person3</familyName>
    <firstName>Person 3 B</firstName>
    <dobEst>0</dobEst>
</episodeDetails>
<dailyInterventions>
<dailyIntervention>
    <activityDate>2012-08-24</activityDate>
    <ecg>true</ecg>
    <cpox>true</cpox>
    <invVentET>true</invVentET>
    <invVentTT>false</invVentTT>
</dailyIntervention>
<dailyIntervention>
    <activityDate>2012-08-25</activityDate>
    <ecg>true</ecg>
    <cpox>true</cpox>
    <invVentET>true</invVentET>
    <invVentTT>false</invVentTT>
</dailyIntervention>
<dailyIntervention>
    <activityDate>2012-08-26</activityDate>
    <ecg>true</ecg>
    <cpox>true</cpox>
    <invVentET>true</invVentET>
    <invVentTT>false</invVentTT>
</dailyIntervention>
<dailyIntervention>
    <activityDate>2012-08-27</activityDate>
    <ecg>true</ecg>
    <cpox>true</cpox>
    <invVentET>false</invVentET>
    <invVentTT>false</invVentTT>
</dailyIntervention>
<dailyIntervention>
    <activityDate>2012-08-28</activityDate>
    <ecg>true</ecg>
    <cpox>true</cpox>
    <invVentET>false</invVentET>
    <invVentTT>false</invVentTT>
</dailyIntervention>
<dailyIntervention>
    <activityDate>2012-08-29</activityDate>
    <ecg>true</ecg>
    <cpox>true</cpox>
    <invVentET>false</invVentET>
    <invVentTT>false</invVentTT>
</dailyIntervention>
</dailyInterventions>
</episode>
<episode localID="20120418">
<episodeDetails>
    <caseNo>000004</caseNo>
    <address1>where person4 lives</address1>
    <address4>Person4 Road</address4>
    <postcode>NN1 1NN</postcode>
    <familyName>Person4</familyName>
    <firstName>Person4 B</firstName>
    <dobEst>0</dobEst>
</episodeDetails>
<dailyInterventions>
<dailyIntervention>
    <activityDate>2012-08-24</activityDate>
    <ecg>true</ecg>
    <cpox>true</cpox>
    <invVentET>false</invVentET>
    <invVentTT>false</invVentTT>
</dailyIntervention>
</dailyInterventions>
</episode>
<episode localID="20120419">
<episodeDetails>
    <caseNo>0000005</caseNo>
    <address1>Where Person5 Lives</address1>
    <address4>Person5 Road</address4>
    <postcode>SS1 1SS</postcode>
    <familyName>Person5</familyName>
    <firstName>Person5 K</firstName>
    <dobEst>0</dobEst>
</episodeDetails>
<dailyInterventions>
<dailyIntervention>
    <activityDate>2012-08-25</activityDate>
    <ecg>true</ecg>
    <cpox>true</cpox>
    <invVentET>false</invVentET>
    <invVentTT>false</invVentTT>
</dailyIntervention>
<dailyIntervention>
    <activityDate>2012-08-26</activityDate>
    <ecg>true</ecg>
    <cpox>true</cpox>
    <invVentET>false</invVentET>
    <invVentTT>false</invVentTT>
</dailyIntervention>
<dailyIntervention>
    <activityDate>2012-08-27</activityDate>
    <ecg>true</ecg>
    <cpox>true</cpox>
    <invVentET>false</invVentET>
    <invVentTT>false</invVentTT>
</dailyIntervention>
<dailyIntervention>
    <activityDate>2012-08-28</activityDate>
    <ecg>true</ecg>
    <cpox>true</cpox>
    <invVentET>false</invVentET>
    <invVentTT>false</invVentTT>
</dailyIntervention>
<dailyIntervention>
    <activityDate>2012-08-29</activityDate>
    <ecg>true</ecg>
    <cpox>true</cpox>
    <invVentET>false</invVentET>
    <invVentTT>false</invVentTT>
</dailyIntervention>
<dailyIntervention>
    <activityDate>2012-08-30</activityDate>
    <ecg>true</ecg>
    <cpox>true</cpox>
    <invVentET>false</invVentET>
    <invVentTT>false</invVentTT>
</dailyIntervention>
<dailyIntervention>
    <activityDate>2012-08-31</activityDate>
    <ecg>true</ecg>
    <cpox>true</cpox>
    <invVentET>false</invVentET>
    <invVentTT>false</invVentTT>
</dailyIntervention>
<dailyIntervention>
    <activityDate>2012-09-01</activityDate>
    <ecg>true</ecg>
    <cpox>true</cpox>
    <invVentET>false</invVentET>
    <invVentTT>false</invVentTT>
</dailyIntervention>
<dailyIntervention>
    <activityDate>2012-09-02</activityDate>
    <ecg>true</ecg>
    <cpox>true</cpox>
    <invVentET>false</invVentET>
    <invVentTT>false</invVentTT>
</dailyIntervention>
<dailyIntervention>
    <activityDate>2012-09-03</activityDate>
    <ecg>true</ecg>
    <cpox>true</cpox>
    <invVentET>false</invVentET>
    <invVentTT>false</invVentTT>
</dailyIntervention>
</dailyInterventions>
</episode>
<episode localID="20120420">
<episodeDetails>
    <caseNo>0000006</caseNo>
    <address1>Where person6 Lives</address1>
    <address4>Person6 Road</address4>
    <postcode>EE1 EE1</postcode>
    <familyName>Person6</familyName>
    <firstName>Person6 N</firstName>
    <dobEst>0</dobEst>
</episodeDetails>
<dailyInterventions>
<dailyIntervention>
    <activityDate>2012-08-23</activityDate>
    <ecg>true</ecg>
    <cpox>true</cpox>
    <invVentET>false</invVentET>
    <invVentTT>false</invVentTT>
</dailyIntervention>
<dailyIntervention>
    <activityDate>2012-08-24</activityDate>
    <ecg>true</ecg>
    <cpox>true</cpox>
    <invVentET>false</invVentET>
    <invVentTT>false</invVentTT>
</dailyIntervention>
<dailyIntervention>
    <activityDate>2012-08-25</activityDate>
    <ecg>true</ecg>
    <cpox>true</cpox>
    <invVentET>false</invVentET>
    <invVentTT>false</invVentTT>
</dailyIntervention>
<dailyIntervention>
    <activityDate>2012-08-26</activityDate>
    <ecg>true</ecg>
    <cpox>true</cpox>
    <invVentET>false</invVentET>
    <invVentTT>false</invVentTT>
</dailyIntervention>
<dailyIntervention>
    <activityDate>2012-08-27</activityDate>
    <ecg>true</ecg>
    <cpox>true</cpox>
    <invVentET>false</invVentET>
    <invVentTT>false</invVentTT>
</dailyIntervention>
</dailyInterventions>
</episode> 
```

我的 XSLT

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template match="/">     
        <html>    
            <xsl:apply-templates select="ClientImport"/>       
        </html> 
    </xsl:template> 
    <xsl:template match="ClientImport">     
        <table border="1">
        <tr>
            <th>LOCALID</th>
            <th>CASENO</th>
            <th>ADDRESS1</th>
            <th>ADDRESS4</th>
            <th>POSTCODE</th>
            <th>FAMILYNAME</th>
            <th>FIRSTNAME</th>
            <th>DOBEST</th>
            <th>ACTIVITYDATE</th>
            <th>ECG</th>
            <th>CPOX</th>
            <th>INVVENTET</th>
            <th>INVVENTTT</th>
        </tr>
        <xsl:apply-templates select="episode"/>                 
    </table>         
</xsl:template>
<xsl:template match="episode"> 
    <tr>
        <td><xsl:value-of select="@localID"/></td> 
        <xsl:apply-templates select="dailyInterventions/dailyIntervention"/> 
    </tr>       
</xsl:template>
<xsl:template match="episodeDetails">       
        <td><xsl:value-of select="caseNo"/></td>
        <td><xsl:value-of select="address1"/></td>
        <td><xsl:value-of select="address4"/></td>
        <td><xsl:value-of select="postcode"/></td>
        <td><xsl:value-of select="familyName"/></td>
        <td><xsl:value-of select="firstName"/></td>
        <td><xsl:value-of select="dobEst"/></td>
</xsl:template>
<xsl:template match="dailyInterventions/dailyIntervention"> 
    <xsl:apply-templates select="episodeDetails"> 
    <xsl:for-each select="dailyInterventions/dailyIntervention">
    <tr>

    <td><xsl:value-of select="activityDate"/></td>
    <td><xsl:value-of select="ecg"/></td>
    <td><xsl:value-of select="cpox"/></td>
    <td><xsl:value-of select="invVentET"/></td>
    <td><xsl:value-of select="invVentTT"/></td>
    </tr>
</xsl:for-each>
</xsl:template> 
```

期望的输出

```
localID caseNo  address1    address4    postcode    familyName  firstName   dobEst  activityDate    ecg cpox    invVentET   invVentTT   noCrit
P333456 0   where Person1 live  Do they live there  PP1 2PP Person1 PersonF1    0   23/08/2012  TRUE    TRUE    TRUE    FALSE   
P333456 0   where Person1 live  Do they live there  PP1 2PP Person1 PersonF1    0   24/08/2012  TRUE    TRUE    TRUE    FALSE   
P333456 0   where Person1 live  Do they live there  PP1 2PP Person1 PersonF1    0   25/08/2012  TRUE    TRUE    FALSE   FALSE   
P333456 0   where Person1 live  Do they live there  PP1 2PP Person1 PersonF1    0   26/08/2012  TRUE    TRUE    TRUE    FALSE   
P333456 0   where Person1 live  Do they live there  PP1 2PP Person1 PersonF1    0   27/08/2012  TRUE    TRUE    TRUE    FALSE   
P333456 0   where Person1 live  Do they live there  PP1 2PP Person1 PersonF1    0   28/08/2012  TRUE    TRUE    TRUE    FALSE   
P333456 0   where Person1 live  Do they live there  PP1 2PP Person1 PersonF1    0   29/08/2012  TRUE    TRUE    TRUE    FALSE   
P333456 0   where Person1 live  Do they live there  PP1 2PP Person1 PersonF1    0   30/08/2012  TRUE    TRUE    FALSE   FALSE   
P333456 0   where Person1 live  Do they live there  PP1 2PP Person1 PersonF1    0   31/08/2012  TRUE    TRUE    FALSE   FALSE   
20120410    1   where Person2 Lives Street Person2  XX1 1XX Person2 Person2 A   0   23/08/2012                  TRUE
20120411    2   Where Person3 Lives Person 3 Street WW1 1WW Person3 Person 3 B  0   24/08/2012  TRUE    TRUE    TRUE    FALSE   
20120411    2   Where Person3 Lives Person 3 Street WW1 1WW Person3 Person 3 B  0   25/08/2012  TRUE    TRUE    TRUE    FALSE   
20120411    2   Where Person3 Lives Person 3 Street WW1 1WW Person3 Person 3 B  0   26/08/2012  TRUE    TRUE    TRUE    FALSE   
20120411    2   Where Person3 Lives Person 3 Street WW1 1WW Person3 Person 3 B  0   27/08/2012  TRUE    TRUE    FALSE   FALSE   
20120411    2   Where Person3 Lives Person 3 Street WW1 1WW Person3 Person 3 B  0   28/08/2012  TRUE    TRUE    FALSE   FALSE   
20120411    2   Where Person3 Lives Person 3 Street WW1 1WW Person3 Person 3 B  0   29/08/2012  TRUE    TRUE    FALSE   FALSE   
20120418    4   where person4 lives Person4 Road    NN1 1NN Person4 Person4 B   0   24/08/2012  TRUE    TRUE    FALSE   FALSE   
20120419    5   Where Person5 Lives Person5 Road    SS1 1SS Person5 Person5 K   0   25/08/2012  TRUE    TRUE    FALSE   FALSE   
20120419    5   Where Person5 Lives Person5 Road    SS1 1SS Person5 Person5 K   0   26/08/2012  TRUE    TRUE    FALSE   FALSE   
20120419    5   Where Person5 Lives Person5 Road    SS1 1SS Person5 Person5 K   0   27/08/2012  TRUE    TRUE    FALSE   FALSE   
20120419    5   Where Person5 Lives Person5 Road    SS1 1SS Person5 Person5 K   0   28/08/2012  TRUE    TRUE    FALSE   FALSE   
20120419    5   Where Person5 Lives Person5 Road    SS1 1SS Person5 Person5 K   0   29/08/2012  TRUE    TRUE    FALSE   FALSE   
20120419    5   Where Person5 Lives Person5 Road    SS1 1SS Person5 Person5 K   0   30/08/2012  TRUE    TRUE    FALSE   FALSE   
20120419    5   Where Person5 Lives Person5 Road    SS1 1SS Person5 Person5 K   0   31/08/2012  TRUE    TRUE    FALSE   FALSE   
20120419    5   Where Person5 Lives Person5 Road    SS1 1SS Person5 Person5 K   0   01/09/2012  TRUE    TRUE    FALSE   FALSE   
20120419    5   Where Person5 Lives Person5 Road    SS1 1SS Person5 Person5 K   0   02/09/2012  TRUE    TRUE    FALSE   FALSE   
20120419    5   Where Person5 Lives Person5 Road    SS1 1SS Person5 Person5 K   0   03/09/2012  TRUE    TRUE    FALSE   FALSE   
20120420    6   Where person6 Lives Person6 Road    EE1 EE1 Person6 Person6 N   0   23/08/2012  TRUE    TRUE    FALSE   FALSE   
20120420    6   Where person6 Lives Person6 Road    EE1 EE1 Person6 Person6 N   0   24/08/2012  TRUE    TRUE    FALSE   FALSE   
20120420    6   Where person6 Lives Person6 Road    EE1 EE1 Person6 Person6 N   0   25/08/2012  TRUE    TRUE    FALSE   FALSE   
20120420    6   Where person6 Lives Person6 Road    EE1 EE1 Person6 Person6 N   0   26/08/2012  TRUE    TRUE    FALSE   FALSE   
20120420    6   Where person6 Lives Person6 Road    EE1 EE1 Person6 Person6 N   0   27/08/2012  TRUE    TRUE    FALSE   FALSE 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T20:13:11.363

以下样式表产生我认为所需的输出：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:variable name="lower" select="'abcdefghijklmnopqrstuvwyzy'"/>
    <xsl:variable name="upper" select="'ABCDEFGHIJKLMNOPQRSTUVWYZY'"/>

    <xsl:template match="/">     
        <html>    
            <xsl:apply-templates select="ClientImport"/>       
        </html> 
    </xsl:template> 

    <xsl:template match="ClientImport">     
        <table border="1">
            <tr>
                <xsl:apply-templates select="episode[1]/@localID" mode="header"/>
                <xsl:apply-templates select="episode[1]/episodeDetails[1]/*" mode="header"/>
                <xsl:apply-templates select="episode[1]/dailyInterventions[1]/dailyIntervention[1]/*" mode="header"/>
            </tr>
            <xsl:apply-templates select="episode"/>                 
        </table>         
    </xsl:template>

    <xsl:template match="@*|*" mode="header">
        <th><xsl:value-of select="translate(local-name(), $lower, $upper)"/></th>
    </xsl:template>

    <xsl:template match="episode"> 
        <xsl:apply-templates select="dailyInterventions/dailyIntervention"/>
    </xsl:template>

    <xsl:template match="@localID">
        <td><xsl:value-of select="."/></td> 
    </xsl:template>

    <xsl:template match="episodeDetails">
        <xsl:apply-templates select="../@localID"/>
        <xsl:apply-templates select="*"/>
    </xsl:template>

    <xsl:template match="dailyInterventions/dailyIntervention"> 
        <tr>
            <xsl:apply-templates select="../preceding-sibling::episodeDetails" />
            <xsl:apply-templates select="*"/>
        </tr>     
    </xsl:template>

    <xsl:template match="episodeDetails/* | dailyIntervention/*">
        <td><xsl:value-of select="."/></td>
    </xsl:template>

</xsl:stylesheet> 
```

我将一些样板硬编码项目更改为使用`xsl:apply-templates`.

例如，为了生成标题，它以创建`<th>`并输出项目的大写名称的模式为属性和元素应用模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T01:22:54.030

我只会通过dailyIntervention元素，并为每个找到的元素在表中插入一行。dailyIntervention 节点中不可用的所有字段都可以通过 xpath 的表达式 .. for parent 访问。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="ClientImport">
<html>
    <head>
        <title></title>
    </head>
    <body>
<table border="1">
        <tr>
            <th>LOCALID</th><th>CASENO</th><th>ADDRESS1</th><th>ADDRESS4</th><th>POSTCODE</th><th>FAMILYNAME</th><th>FIRSTNAME</th><th>DOBEST</th><th>ACTIVITYDATE</th><th>ECG</th><th>CPOX</th><th>INVVENTET</th><th>INVVENTTT</th>
        </tr>
        <xsl:apply-templates select="//dailyIntervention"/>
    </table>
    </body>
</html>
</xsl:template>

<xsl:template match="dailyIntervention">
<tr>
    <td><xsl:value-of select="./../../@localID"/></td>
    <td><xsl:value-of select="./../../episodeDetails/caseNo"/></td>
    <td><xsl:value-of select="./../../episodeDetails/address1"/></td>
    <td><xsl:value-of select="./../../episodeDetails/address4"/></td>
    <td><xsl:value-of select="./../../episodeDetails/postcode"/></td>
    <td><xsl:value-of select="./../../episodeDetails/familyName"/></td>
    <td><xsl:value-of select="./../../episodeDetails/firstName"/></td>
    <td><xsl:value-of select="./../../episodeDetails/dobEst"/></td>
    <td><xsl:value-of select="./activityDate"/></td>
    <td><xsl:value-of select="./ecg"/></td>
    <td><xsl:value-of select="./cpox"/></td>
    <td><xsl:value-of select="./invVentET"/></td>
    <td><xsl:value-of select="./invVentTT"/></td>
</tr>
</xsl:template>
</xsl:stylesheet> 
```

# c# - System.Windows.Form.WebBrowser 不会呈现 svg

> ID：12628872
> 
> 赞同：1
> 
> 时间：2012-09-27T19:39:48.123
> 
> 标签：c#, html, com, svg

我可以渲染文本，但不能渲染 svg 元素。当我保存我试图呈现为 svg 文件的 html 时，Internet Explorer 会以它应该的方式呈现完整的图像，所以我相当确信我的输入数据是好的。

这是我启动启动网络浏览器的线程的地方

```
Browserinfo bi = new Browserinfo(height, width, rsltPath, stype);
bi.Temphtml = temphtml.Replace("\\", "/");
Thread webBrowseThread = new Thread(new ParameterizedThreadStart(PerformWebBrowseOp));
webBrowseThread.SetApartmentState(ApartmentState.STA);
webBrowseThread.Start(bi); 
```

bi.Temphtml 是我保存输入数据的文件。这是文件的外观（去掉了内脏）

```
 <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head></head><body><svg xmlns="http://www.w3.org/2000/svg"
    ..svg data...
    </svg></body></html> 
```

这是实际的代码：

```
private void PerformWebBrowseOp(object obj)
{
    Browserinfo bi = (Browserinfo)obj;
    using (Bitmap bitmap = new Bitmap(bi.Width, bi.Height))
    {
        using (WebBrowser webBrowser = new WebBrowser())
        {
            webBrowser.Navigate("file:///"+bi.Temphtml);
            while (webBrowser.Document.Body == null)
            {
                Application.DoEvents();
            }

            IHTMLDocument2 rawDoc = (IHTMLDocument2)webBrowser.Document.DomDocument;
            //rawDoc.write(sbody);
            IHTMLElement rawBody = rawDoc.body;
            IHTMLElementRender2 render = (IHTMLElementRender2)rawBody;

            Rectangle bitmapRect = new Rectangle(0, 0, bi.Width, bi.Height);
            webBrowser.DrawToBitmap(bitmap, bitmapRect);

            System.Drawing.Imaging.Encoder qualityEncoder = System.Drawing.Imaging.Encoder.Quality;
            var quality = (long)100;
            using (EncoderParameter ratio = new EncoderParameter(qualityEncoder, quality))
            {
                using (EncoderParameters codecParams = new EncoderParameters(1))
                {
                    codecParams.Param[0] = ratio;
                    ImageCodecInfo ici = null;
                    if (bi.ImgType == "jpg")
                    {
                        ici = GetImageEncoder(ImageFormat.Jpeg);
                    }
                    else
                    {
                        ici = GetImageEncoder(ImageFormat.Png);
                    }
                    bitmap.Save(bi.SavePath, ici, codecParams);
                }
            }
        }
    }
    ((AutoResetEvent)waithandle[0]).Set();
} 
```

为了保持讨论的重点，以下注释可能会有所帮助：我最初使用 Batik 并让它工作，但我们的网络服务器上没有安装 Java，老板拒绝安装它。回到绘图板！

我下载了 svg.dll，并让它部分工作。它将渲染部分 svg 元素，但不渲染文本。

我想我缺少一个接口或者应该调用一个 com 对象，但不知道如何或做什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:23:53.160

简单的答案，你不能那样做。但是，您可以使用 librsvg 来完成。我已经复制了下面的代码，该代码适用于 png，但不适用于 jpeg。如果有人能看到 jpeg 部分有什么问题，请告诉我。

您将需要的文件是：

```
freetype6.dll
intl.dll
libcairo-2.dll
libcroco-0.6-3.dll
libexpat-1.dll
libfontconfig-1.dll
libgdk-win32-2.0-0.dll
libgdk_pixbuf-2.0-0.dll
libgio-2.0-0.dll
libglib-2.0-0.dll
libgmodule-2.0-0.dll
libgobject-2.0-0.dll
libgthread-2.0-0.dll
libgtk-win32-2.0-0.dll
libpango-1.0-0.dll
libpangocairo-1.0-0.dll
libpangoft2-1.0-0.dll
libpangowin32-1.0-0.dll
libpixbufloader-svg.dll
libpng14-14.dll
librsvg-2-2.dll
libxml2-2.dll
zlib1.dll 
```

从您的 html 页面中提取的 svg 代码应如下所示。

<svg xmlns="http://www.w3.org/2000/svg" width="945" height="325"....</svg>

换句话说，去掉除了 svg 标签中的所有 html

这是 C# 例程

```
private void RasterizeSvg(string tempsvg, string rsltPath, int _width, int _height, string formattype)
{
    string slib = ConfigurationManager.AppSettings["LibrSvgPath"];
    if (slib == null)
    {
        slib = @"C:\Librsvg";
    }
    bool callSuccessful = SetDllDirectory(slib); 
    if (!callSuccessful)
    {
        throw new Exception("Could not set DLL directory");
    }

    // g_type_init is critical for the png to save correctly
    g_type_init();
    rsvg_init();

    IntPtr error = IntPtr.Zero;
    IntPtr rsvghandle = rsvg_handle_new_from_file(tempsvg, out error);

    if (error != IntPtr.Zero)
    {
        throw new Exception(Marshal.ReadInt32(error).ToString());
    }
    rsvg_handle_close(rsvghandle, out error);
    if (error != IntPtr.Zero)
    {
        throw new Exception(Marshal.ReadInt32(error).ToString());
    }
    IntPtr cairosurface = cairo_image_surface_create(cairo_format_t.CAIRO_FORMAT_RGB24, _width, _height);
    IntPtr cairocontext = cairo_create(cairosurface);
    bool brslt = rsvg_handle_render_cairo(rsvghandle, cairocontext);

    cairo_destroy(cairocontext);

    if (formattype == "png")
    {
        cairo_surface_write_to_png(cairosurface, rsltPath);
        cairo_surface_destroy(cairosurface);
    }
    else
    {
        //jpeg not working.  the problem is how to convert from a cairo surface to a pixbuf
        // once we figure that out, we can implement the jpeg conversion

        /*option 1*/
        //IntPtr pixbuf = cairo_create(cairosurface);
        //cairo_set_source_surface(pixbuf, cairosurface, 0, 0);
        //cairo_rectangle(pixbuf, 0, 0, _width, _height);
        //cairo_fill(pixbuf);
        //error = IntPtr.Zero;                

        /*option 2*/
        IntPtr pixbuf = rsvg_handle_get_pixbuf(rsvghandle);
        rsvg_handle_close(rsvghandle, out error);

        cairo_surface_destroy(cairosurface);
        gdk_init(0, "");
        callSuccessful = gdk_pixbuf_save(pixbuf, rsltPath, formattype, out error);
        gdk_exit(out error);

        if (!callSuccessful)
        {
            throw new Exception(error.ToInt32().ToString());
        }
        /* need to release pixbuf memory*/
    }
    g_object_unref(rsvghandle);
} 
```

正如我在顶部所说，jpeg 还没有工作。但它会渲染为png。

最后这里有一些你需要的声明

```
enum cairo_format_t
{
    CAIRO_FORMAT_INVALID = -1,
    CAIRO_FORMAT_ARGB32 = 0,
    CAIRO_FORMAT_RGB24 = 1,
    CAIRO_FORMAT_A8 = 2,
    CAIRO_FORMAT_A1 = 3,
    CAIRO_FORMAT_RGB16_565 = 4,
    CAIRO_FORMAT_RGB30 = 5
}

[DllImport("kernel32.dll", CharSet = CharSet.Auto)]
static extern bool SetDllDirectory(string pathname);

[DllImport("libgobject-2.0-0.dll", SetLastError = true)]
static extern void g_type_init();

[DllImport("libgobject-2.0-0.dll", SetLastError = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Ansi)]
static extern void g_object_unref(IntPtr obj);

[DllImport("librsvg-2-2.dll", SetLastError = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Ansi)]
static extern bool rsvg_handle_render_cairo(IntPtr handle, IntPtr cairorenderer);

[DllImport("librsvg-2-2.dll", SetLastError = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Ansi)]
static extern IntPtr rsvg_handle_get_pixbuf(IntPtr _rsvghandle);

[DllImport("librsvg-2-2.dll", CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Ansi)]
static extern IntPtr rsvg_handle_new_from_file(string file_name, out IntPtr error);

[DllImport("librsvg-2-2.dll", CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Ansi)]
static extern bool rsvg_handle_close(IntPtr _rsvghandle, out IntPtr error);

[DllImport("librsvg-2-2.dll", CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Ansi)]
static extern void rsvg_init();

[DllImport("libcairo-2.dll", SetLastError = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Ansi)]
static extern IntPtr cairo_create(IntPtr cairo_surface_t);

[DllImport("libcairo-2.dll", SetLastError = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Ansi)]
static extern IntPtr cairo_image_surface_create(cairo_format_t _pixformat, int width, int height);

[DllImport("libcairo-2.dll", SetLastError = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Ansi)]
static extern void cairo_surface_write_to_png(IntPtr cairo_surface_t, string filename);

[DllImport("libcairo-2.dll", SetLastError = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Ansi)]
static extern void cairo_set_source_surface(IntPtr destbuf, IntPtr srcsuface, double x, double y);

[DllImport("libcairo-2.dll", SetLastError = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Ansi)]
static extern void cairo_rectangle(IntPtr buf, double x, double y, double width, double height);

[DllImport("libcairo-2.dll", SetLastError = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Ansi)]
static extern void cairo_fill(IntPtr destbuf);

[DllImport("libcairo-2.dll", SetLastError = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Ansi)]
static extern void cairo_destroy(IntPtr buf);

[DllImport("libcairo-2.dll", SetLastError = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Ansi)]
static extern void cairo_surface_destroy(IntPtr buf);

[DllImport("libgdk_pixbuf-2.0-0.dll", CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Ansi)]
static extern bool gdk_pixbuf_save(IntPtr pixbuf, string filename, string type, out IntPtr error);

[DllImport("libgdk_pixbuf-2.0-0.dll", CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Ansi)]
static extern IntPtr gdk_pixbuf_get_from_drawable(IntPtr dest, IntPtr src, IntPtr cmap, int srcx, int srcy, int destx, int desty, int width, int height);

[DllImport("libgdk-win32-2.0-0.dll", CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Ansi)]
static extern void gdk_init(int argcnt, string args);

[DllImport("libgdk-win32-2.0-0.dll", CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Ansi)]
static extern void gdk_exit(out IntPtr error); 
```

# jsf - JSF 2.0 commandButton 什么都不做

> ID：12628873
> 
> 赞同：3
> 
> 时间：2012-09-27T19:39:52.843
> 
> 标签：jsf, facelets

我在实现一个简单的 CRUD 应用程序时遇到了问题，我已经阅读了在 google、stackoverflow 和 roseindia 中找到的几乎所有项目，但我的问题仍然存在。我做了这个简单的facelet：

```
<ui:composition template="./../../templates/adminTemplate.xhtml">

        <ui:define name="tope">
            <h1>Ingreso de Noticias</h1>
        </ui:define>

        <ui:define name="content">
                <h:form id="newsForm">
                    <h:panelGrid columns="2">
                        <h:outputLabel value="Lugar: "/>
                        <h:inputText value="#{noticiasBean.entity.lugar}"/>
                        <h:outputLabel value="Fecha: "/>
                        <h:inputText value="#{noticiasBean.entity.fecha}">
                            <f:convertDateTime pattern="dd/MM/yyyy HH:mm"/>
                        </h:inputText>
                        <h:outputLabel value="Autor: "/>
                        <h:inputText value="#{noticiasBean.entity.autor}"/>
                        <h:outputLabel value="PreTítulo: "/>
                        <h:inputText value="#{noticiasBean.entity.pretitulo}"/>
                        <h:outputLabel value="Título: "/>
                        <h:inputText value="#{noticiasBean.entity.titulo}"/>
                        <h:outputLabel value="Comentario: "/>
                        <h:inputText value="#{noticiasBean.entity.comentario}"/>
                        <h:outputLabel value="Cuerpo: "/>
                        <h:inputTextarea value="#{noticiasBean.entity.cuerpo}"/>
                    </h:panelGrid>
                    <h:commandButton value="Guardar" action="#{noticiasBean.create}"/>
                </h:form>
            <h:messages style="color: red;"/>
        </ui:define>

    </ui:composition> 
```

这是管理模板：

```
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:p="http://primefaces.org/ui">

<h:head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link href="./../resources/css/default.css" rel="stylesheet" type="text/css" />
    <link href="./../resources/css/cssLayout.css" rel="stylesheet" type="text/css" />
    <h:outputStylesheet name="primeStyles.css" library="css"/>
    <title>Facelets Template</title>
</h:head>

<h:body>

    <p:layout fullPage="true">
        <p:layoutUnit position="north" size="70" resizable="true" closable="true" collapsible="true">
            <ui:insert name="tope"> Sección de Administración</ui:insert>
        </p:layoutUnit>
        <p:layoutUnit position="south" size="70">
            <ui:insert> Pie de página </ui:insert>
        </p:layoutUnit>
        <p:layoutUnit position="west" size="160" header="Menu" resizable="true" collapsible="true">
            <h:form id="formMenu">
                <p:panelMenu style="width: 158px;">
                    <p:submenu label="Home">
                        <p:menuitem value="Admin" action="/admin/admin"/>
                        <p:menuitem value="Salir" action="#{loginController.logout}"/>
                    </p:submenu>
                    <p:submenu label="Contenido">
                        <p:menuitem value="Cargar Noticia" action="/admin/noticias/Create"/>
                    </p:submenu>
                </p:panelMenu>
            </h:form>
        </p:layoutUnit>
        <p:layoutUnit position="center">
            <ui:insert name="content">
                Aqui va el contenido
            </ui:insert>
        </p:layoutUnit>
    </p:layout>

</h:body> 
```

这是托管的Bean：

```
@ManagedBean(name="noticiasBean")
@RequestScoped
public class NoticiasBean {

private NoticiaJpaController jpaController = null;
private DataModel items = null;
private Noticia entity;
/**
 * Creates a new instance of NoticiasBean
 */
public NoticiasBean() {
    System.out.println("Instanciado el bean");
}

private NoticiaJpaController getJpaController() {
    if(jpaController == null){
        jpaController = new NoticiaJpaController(Utils.getEntityManagerFactory());
    }
    return jpaController;
}

public Noticia getEntity() {
    if(entity == null){
        entity = new Noticia();
    }
    return entity;
}

public String prepareCreate() {
    entity = new Noticia();
    return "Create";
}

public String create() {
    System.out.println("Llegó al método create");
    try {
        getJpaController().create(entity);
        String mensaje = "Noticia creada exitósamente";
        FacesMessage facesMsg = new FacesMessage(FacesMessage.SEVERITY_INFO, mensaje, mensaje);
        FacesContext.getCurrentInstance().addMessage(null, facesMsg);
        return prepareCreate();
    } catch (Exception e) {
        String mensaje = "Error de Persistencia";
        FacesMessage facesMsg = new FacesMessage(FacesMessage.SEVERITY_INFO, mensaje, mensaje);
        FacesContext.getCurrentInstance().addMessage(null, facesMsg);
        return null;
    }
}

public String prepareList() {
    recreateModel();
    return "List";
}

public DataModel getItems() {
    if (items == null) {
        items = new ListDataModel(getJpaController().findNoticiaEntities());
    }
    return items;
}

private void recreateModel() {
    items = null;
} 
```

}

这是 web.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
<context-param>
    <param-name>javax.faces.PROJECT_STAGE</param-name>
    <param-value>Development</param-value>
</context-param>
<context-param>
    <param-name>javax.faces.FACELETS_SKIP_COMMENTS</param-name>
    <param-value>true</param-value>
</context-param>
<context-param>
    <description>Usado para evitar que ingresen sin estar autenticado</description>
    <param-name>org.apache.myfaces.SERIALIZE_STATE_IN_SESION</param-name>
    <param-value>false</param-value>
</context-param>

<error-page>
    <exception-type>javax.faces.application.ViewExpiredException</exception-type>
    <location>/faces/index.xhtml</location>
</error-page>

<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/faces/*</url-pattern>
</servlet-mapping>
<session-config>
    <session-timeout>
        30
    </session-timeout>
</session-config>
<welcome-file-list>
    <welcome-file>faces/index.xhtml</welcome-file>
</welcome-file-list> 
```

如您所见，没有什么特别的，但是每次我按下 h:commandButton 来保存数据时，总是返回到同一页面 Create.xhtml 没有任何错误消息，也没有将信息保存在数据库中，更糟糕的是，失去对样式文件 syle.css 的引用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T02:26:27.693

经过多次阅读和调查，我修复了阅读@BalusC的此[信息的问题。](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html#AjaxRenderingOfContentWhichContainsAnotherForm)我从不在我的 facelet 中使用两个 h:form 元素，所以我不知道为什么现在可以工作。只是我更改了 Primefaces 的 p:commandButton 和“voila”的 h:commandButton，现在一切正常。

# java - 删除文件并将其移动到java中的目录

> ID：12628875
> 
> 赞同：0
> 
> 时间：2012-09-27T19:39:59.007
> 
> 标签：java, file-io

我正在尝试使用 java 中的 renameTo() 将文件从一个目录移动到另一个目录，但是 renameTo 不起作用（不重命名和移动文件）。基本上，我想先删除一个具有相同文件名的文件，然后将文件从另一个目录复制到我最初删除文件的相同位置，然后复制具有相同名称的新文件。

```
 //filePath = location of original file with file name appended. ex: C:\Dir\file.txt
    //tempPath = Location of file that I want to replace it to file file without the file name.  ex: C:\AnotherDir

    int pos = filePath.indexOf("C:\\Dir\\file.txt");
    //Parse out only the path, so just C:\\Dir
    String newFilePath = filePath.substring(0,pos-1);

    //I want to delete the original file
    File deletefile = new File(newFilePath,"file.txt");

    if (deletefile.exists()) {
        success = deletefile.delete();
    }

    //There is file already exists in the directory, but I am just appending .tmp at the end
    File newFile = new File(tempPath + "file.txt" + ".tmp");

    //Create original file again with same name.
    File oldFile = new File(newFilePath, "file.txt");

    success = oldFile.renameTo(newFile); // This doesnt work. 
```

你能告诉我我做错了什么吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T19:41:23.110

您需要转义字符串文字中的反斜杠：`"C:\\Dir\\file.txt"`。或用于`File.separator`构造路径。

此外，确保`newFile`正确构建路径：

```
File newFile = new File(tempPath + File.separator + "file.txt" + ".tmp");
                               //^^^^^^^^^^^^^^^^ 
```

由于已发布代码 ( `...ex: C:\AnotherDir`) 中的注释表明`tempPath`没有尾部斜杠字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-21T06:28:35.437

我已将文件移动到目标目录，并在移动后以三种方式从源文件夹中删除了这些移动的文件，最后在我的项目中使用了第三种方法。

第一种方法：

```
File folder = new File("SourceDirectory_Path");
    File[] listOfFiles = folder.listFiles();
    for (int i = 0; i < listOfFiles.length; i++) {
    Files.move(Paths.get("SourceDirectory_Path"+listOfFiles[i].getName()), Paths.get("DestinationDerectory_Path"+listOfFiles[i].getName()));
    }
    System.out.println("SUCCESS"); 
```

第二种方法：

```
 Path sourceDir = Paths.get("SourceDirectory_Path");
    Path destinationDir = Paths.get("DestinationDerectory_Path");
      try(DirectoryStream<Path> directoryStream =   Files.newDirectoryStream(sourceDir)){
        for (Path path : directoryStream) {
            File d1 = sourceDir.resolve(path.getFileName()).toFile();
             File d2 = destinationDir.resolve(path.getFileName()).toFile(); 
             File oldFile = path.toFile();
            if(oldFile.renameTo(d2)){
                System.out.println("Moved");
            }else{
                System.out.println("Not Moved");
            }
        }
    }catch (Exception e) {
        e.printStackTrace();
    } 
```

第三种方法：

```
Path sourceDirectory= Paths.get(SOURCE_FILE_PATH);
            Path destinationDirectory = Paths.get(SOURCE_FILE_MOVE_PATH);
            try (DirectoryStream<Path> directoryStream = Files.newDirectoryStream(sourceDirectory)) {
                for (Path path : directoryStream) {                                    
                    Path dpath = destinationDirectory .resolve(path.getFileName());                                    
                    Files.move(path, dpath, StandardCopyOption.REPLACE_EXISTING);
                }
            } catch (IOException ex) {
                ex.printStackTrace();   
            } 
```

快乐编码！:)

# redirect - DNS 记录指向另一个域

> ID：12628876
> 
> 赞同：0
> 
> 时间：2012-09-27T19:40:03.157
> 
> 标签：redirect, dns, records

通常我会上传一个 .htaccess 来将一个域重定向到另一个域。但是，当没有设置主机时，是否可以通过 DNS 设置来以类似于重定向的方式将一个域指向另一个域？

www.domainA.com -> www.domainB.com

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T19:44:22.483

您的域可以只有一个 CNAME 类型，重定向到您的其他域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T19:43:30.023

有很多方法可以做到这一点。

一种是在domainB盒子上设置一个虚拟的domainA服务器。

另一种方法是在您的域中使用网络转发 DNS 记录。

# python - 有什么方法可以减轻 multiprocessing.Process.start() 的成本？

> ID：12628878
> 
> 赞同：1
> 
> 时间：2012-09-27T19:40:18.177
> 
> 标签：python, multiprocessing, pickle

因此，我一直在使用 Python 中的线程和进程进行工具化，并且在此过程中，我制作了一种模式，该模式允许同一个类在线程和/或进程之间来回调整，而不会通过使用别名 RPC 丢失状态数据电话和管道。

一切正常，但是与从腌制文件加载状态相比，启动进程需要花费大量时间，并且 Thread.start() 立即返回，因此构造函数的成本很小。那么：在没有荒谬的启动时间的情况下，启动具有较大初始状态的进程的最佳方法是什么。下面的剪辑和调试输出，“计数器”的大小刚刚超过 34,000K，以模式 2 腌制到文件中。

```
...
elif command == "load":
    # RPC call - Loads state from file "pickle_name":
    timestart = time.time()
    print do_remote("take_pickled_state", pickle_name)
    print "Load cost: " + str(time.time() - timestart)
elif command == "asproc":
    if type(_async) is multiprocessing.Process:
        print "Already running as a Process you fool!."
    else:
        do_remote("stop")
        _async.join()
        p_pipe.close()
        p_pipe, c_pipe = multiprocessing.Pipe()
        timestart = time.time()
        _async = multiprocessing.Process(target = counter, args = (c_pipe,))
        # Why is this so expensive!!?!?!?! AAARRG!!?!
        _async.start()
        print "Start cost: " + str(time.time() - timestart)
elif command == "asthread":
    if type(_async) is threading.Thread:
        print "Already running as a Thread you fool!."
    else:

        # Returns the state of counter on stop:
        timestart = time.time()
        counter = do_remote("stop")
        print "Proc stop time: " + str(time.time() - timestart)
        _async.join()
        p_pipe.close()
        p_pipe, c_pipe = multiprocessing.Pipe()
        timestart = time.time()
        _async = threading.Thread(target = counter, args = (c_pipe,))
        _async.start()
        print "Start cost: " + str(time.time() - timestart)
... 
```

对应的调试语句：

```
Waiting for command...
  >>> load
Load complete.
Load cost: 2.18700003624
Waiting for command...
  >>> asproc
Start cost: 23.3910000324
Waiting for command...
  >>> asthread
Proc stop time: 0.921999931335
Start cost: 0.0629999637604 
```

编辑 1：操作系统：Win XP 64。Python 版本：2.7.x 处理器：至强四核。

编辑 2：我真正不明白的是，进程停止需要大约 1 秒才能返回整个状态，但接收状态和启动需要 20 倍的时间。（添加了调试输出）

# iphone - 支持 ARM6 的 Monotouch iPhone 5 构建和应用程序

> ID：12628882
> 
> 赞同：1
> 
> 时间：2012-09-27T19:40:41.283
> 
> 标签：iphone, xamarin.ios, armv7

我想知道在构建现有应用程序时需要对它做什么。目前，我使用 4.0 作为目标构建 SDK 以 ARM6 和 ARM7 为目标。

我真的不想放弃对 ARM6 的支持，但我也想确保我的应用程序可以在新 iPhone 上使用。据我所知，Apple 也不会让您在商店中已经存在并支持该架构的应用程序上放弃对 ARM6 的支持。

我必须为 iPhone 5 用户创建一个新版本的应用程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T20:19:21.760

Apple 允许您放弃 ARMv6 支持。

诀窍是您必须将部署目标设置为保证支持 ARMv7 的 iOS 版本（我相信这将是 4.3）。

也就是说，您不必为了让您的应用程序在 iPhone 5 上运行而放弃 ARMv6，您现有的应用程序可以正常工作（但您将无法使用任何新的 iOS 6 功能）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T16:49:26.843

如果我不想放弃 ARMv6 支持怎么办？很多人还在用旧手机。我的应用只需要在 iPhone5 上支持全屏即可。

这基本上意味着 Apple 已经阻止了相同的应用程序在 iPhone 5 和更旧的手机上运行！

我会尝试将 iPhone5 版本作为单独的应用程序提交到 iTunes Connect 上，这样人们就可以在旧手机上使用该应用程序，并且仍然可以在 iPhone 5 上享受全屏。希望 Apple 不会拒绝我的应用程序 - 这是他们的错全部！

# regex - 协助创建正则表达式

> ID：12628885
> 
> 赞同：0
> 
> 时间：2012-09-27T19:41:09.800
> 
> 标签：regex

有人可以在这里帮助我吗？我需要创建一个满足以下条件的正则表达式：

有效字符：仅 0-9 和连字符 (-)。条目必须介于 11 到 13 个字符之间。此外，不得包含字符串“73480”

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T19:41:57.303

使用正则表达式模式`^(?!.*73480)[0-9-]{11,13}$`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T19:46:42.590

为了清楚起见，您需要两个正则表达式。

首先检查这是否匹配：

```
/^[-\d]{11,13}$/ 
```

然后检查是否不匹配：

```
/73480/ 
```

在 Perl 中，你会这样做`/^[-\d]{11,13}$/ && !/73480/`。如果这是 PHP，您将两次调用`preg_match`.

试图将所有内容都塞进一个正则表达式会使事情在未来变得难以阅读。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-27T19:45:30.907

网上有一个很棒的正则表达式编辑器，你可以试试：[http](http://txt2re.com/) ://txt2re.com/ 。

只需输入您想要匹配的示例，然后您可以单击以选择您想要匹配的模式。

# asp.net - 使用 VB.Net 未触发用户控制中的验证器

> ID：12628888
> 
> 赞同：1
> 
> 时间：2012-09-27T19:41:15.057
> 
> 标签：asp.net, vb.net, user-controls

我有一个向导控件，其中每个步骤都包含一个用户控件。

在每个用户控件（或每个步骤）上，我都有验证器、自定义验证器、必需的验证器等。我遇到的问题是我必须在 VB.Net 中编写这个应用程序，而这在 C# 中是强加给我的。在其 OnLoad 事件的托管页面中，我通常使用 usercontrol name.RequiredValidator += usercontrol name.RequiredValidator_Validate 来附加事件。但是，在 VB.Net 中我似乎无法做到这一点！

我曾尝试使用 C# 到 VB.net 转换器，但这也不起作用。

所以，我的问题是，你如何在 VB.Net 中的用户控件中附加托管页面中的事件？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T19:46:07.270

假设我们有这个控件（假设我添加了所有需要的属性）：

```
<asp:Button ID="btn" runat="server" /> 
```

在 C# 中，您将连接一个事件，例如：

```
btn.Click += btn_Click; 
```

在 VB.Net 中，您可以像这样连接它：

```
AddHandler btn.Click, AddressOf btn_Click 
```

只需将其应用于您要连接的任何事件。供参考：http: [//msdn.microsoft.com/en-us/library/ms743596.aspx#Y0](http://msdn.microsoft.com/en-us/library/ms743596.aspx#Y0)

# objective-c - llvm 从不同范围内定义的两个中选择第一个（错误的）本地结构定义：这是 llvm 的错误吗？

> ID：12628892
> 
> 赞同：2
> 
> 时间：2012-09-27T19:41:55.870
> 
> 标签：objective-c, llvm, objective-c++

我有以下示例代码：

```
@interface S1 : NSObject
{
    void(*fn_)();
}
@end
@implementation S1
- (void) set:(BOOL)f
{
    if (f)
    {
        struct A { static void f() { std::cout << "1" << std::endl; } };
        fn_ = A::f;
    }
    else
    {
        struct A { static void f() { std::cout << "2" << std::endl; } };
        fn_ = A::f;
    }
}
- (void) test { fn_(); }
@end

struct S2
{
    void set(BOOL f)
    {
        if (f)
        {
            struct A { static void f() { std::cout << "1" << std::endl; } };
            fn_ = A::f;
        }
        else
        {
            struct A { static void f() { std::cout << "2" << std::endl; } };
            fn_ = A::f;
        }
    }
    void test() { fn_(); }
    void(*fn_)();
};

int main(int argc, const char * argv[])
{
    auto s1 = [[S1 alloc] init];
    [s1 set:TRUE];
    [s1 test];
    [s1 set:FALSE];
    [s1 test];

    S2 s2;
    s2.set(TRUE);
    s2.test();
    s2.set(FALSE);
    s2.test();

    return 0;
} 
```

它打印

```
1
1
1
2 
```

但我期待

```
1
2
1
2 
```

如果我将第二个结构的名称更改为不同的名称（例如“B”），则始终按预期工作。

不会出现任何警告，因此很难找出您的程序无法正常运行的原因。

这是我的无知还是llvm的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T18:11:24.503

它确实似乎是一个clang错误。（需要注意的是没有指定Objective-C++语言的标准，所以“正确”的东西有点悬而未决）

如果我不是编译成可执行代码，而是使用这样的命令生成 LLVM IR

```
clang -g -std=c++11  -Wall -Wextra localstruct.mm  -emit-llvm -S 
```

该`-set:`方法编译为此，突出显示两个函数指针分配行：

```
define internal void @"\01-[S1 set:]"(%0* %self, i8* %_cmd, i8 signext %f) uwtable ssp {
  %1 = alloca %0*, align 8
  %2 = alloca i8*, align 8
  %3 = alloca i8, align 1
  store %0* %self, %0** %1, align 8
  call void @llvm.dbg.declare(metadata !{%0** %1}, metadata !1490), !dbg !1491
  store i8* %_cmd, i8** %2, align 8
  call void @llvm.dbg.declare(metadata !{i8** %2}, metadata !1492), !dbg !1491
  store i8 %f, i8* %3, align 1
  call void @llvm.dbg.declare(metadata !{i8* %3}, metadata !1493), !dbg !1494
  %4 = load i8* %3, align 1, !dbg !1495
  %5 = icmp ne i8 %4, 0, !dbg !1495
  br i1 %5, label %6, label %12, !dbg !1495

; <label>:6                                       ; preds = %0
  %7 = load %0** %1, align 8, !dbg !1497
  %8 = load i64* @"OBJC_IVAR_$_S1.fn_", !dbg !1497, !invariant.load !1499
  %9 = bitcast %0* %7 to i8*, !dbg !1497
  %10 = getelementptr inbounds i8* %9, i64 %8, !dbg !1497
  %11 = bitcast i8* %10 to void ()**, !dbg !1497 
```

**`store void ()* @"_ZN10-[S1 set:]1A1fEv", void ()** %11, align 8, !dbg !1497`**

```
 br label %18, !dbg !1500

; <label>:12                                      ; preds = %0
  %13 = load %0** %1, align 8, !dbg !1501
  %14 = load i64* @"OBJC_IVAR_$_S1.fn_", !dbg !1501, !invariant.load !1499
  %15 = bitcast %0* %13 to i8*, !dbg !1501
  %16 = getelementptr inbounds i8* %15, i64 %14, !dbg !1501
  %17 = bitcast i8* %16 to void ()**, !dbg !1501 
```

**`store void ()* @"_ZN10-[S1 set:]1A1fEv", void ()** %17, align 8, !dbg !1501`**

```
 br label %18

; <label>:18                                      ; preds = %12, %6
  ret void, !dbg !1503
} 
```

这两种情况似乎都引用了相同的函数符号`_ZN10-[S1 set:]1A1fEv`。如果您查看结构中方法的相应代码，它引用了两个：`_ZZN2S23setEaEN1A1fEv`和`_ZZN2S23setEaEN1A1fE_0v`。

FWIW，GCC 的 Objective-C++ 编译器产生了预期的结果。请务必将错误报告给 clang 项目，不要只解决代码中的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T21:13:20.433

该代码看起来非常像您正在分配一个实例变量以指向实际位于堆栈上的结构的内容。

您看到的输出只是巧合；它可能会在打开优化和/或任何类型的函数调用复杂性时崩溃。

只是一个猜测——我的 C++ 有点生疏了。

# visual-studio-addins - 为 Visual Studio 加载项提供输入

> ID：12628897
> 
> 赞同：0
> 
> 时间：2012-09-27T19:42:14.763
> 
> 标签：visual-studio-addins

如何使用 Visual Studio 加载项提供输入参数（如要写入文件的文本）？我可以使用 Exec 方法的**ref 对象 varIn**参数吗？如果可以的话？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T07:49:05.113

实际上我可以使用简单的 Windows 窗体来收集输入，不需要任何与 Visual Studio 相关的特殊内容。

# ssis - SSIS包锁定临时表

> ID：12628908
> 
> 赞同：0
> 
> 时间：2012-09-27T19:43:11.047
> 
> 标签：ssis, temp-tables

好的，我有一个包，它首先在序列容器中创建一个临时文件，然后将数据插入表中。然后将数据输入到两个不同序列容器中的两个不同临时表中，然后我有一个数据流任务，它将更多数据插入到第一个临时表中，但它似乎已锁定它，我根本无法访问它，但它不会出错出去。它只是一直表现得好像在等待它可用。

下面是带有红色高亮显示的屏幕截图，以显示表的创建位置以及尝试插入数据时停止的位置。下面是黄色的流量控制。

![在此处输入图像描述](../Images/1b5534d228e1cb8a5f788ba94221ae7a.png)

# scala - scala集合中的subsetOf在哪里？

> ID：12628909
> 
> 赞同：2
> 
> 时间：2012-09-27T19:43:11.757
> 
> 标签：scala

我在这方面不知所措...

查看[Scala 集合](http://www.scala-lang.org/api/current/scala/collection/Set.html)`Set`中的 a ，我看到有一个方法称为. 但是当我试图在实际的 .scala 源代码中找到它时（我查看过[Set.scala、GenSet.scala、SetLike.scala](https://github.com/scala/scala/tree/v2.9.2/src/library/scala/collection)等......）我找不到它！`subsetOf`

哪个特征实际上定义了该方法？还是我错过了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T19:50:10.830

如果您单击 scaladoc 中的函数，您可能会看到它在哪里定义：

![在此处输入图像描述](../Images/17b6a0551c0d757f2f6fc1d4697dca85.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T19:46:00.253

Scala API 指定：

> 定义类：GenSetLike

当您查看 API 页面时，单击方法条目将其展开。您将看到更多信息，包括“定义类”。

如果您查看[GenSetLike.scala](https://github.com/scala/scala/blob/v2.9.2/src/library/scala/collection/GenSetLike.scala#L115)的源代码，您会看到它：

```
def subsetOf(that: GenSet[A]): Boolean = this forall that 
```

# jquery - JQuery 加载困境

> ID：12628912
> 
> 赞同：0
> 
> 时间：2012-09-27T19:43:24.167
> 
> 标签：jquery

我正在使用 JQuery.load() 将文件拉入我希望出现在网站的所有 html 文件中的文档中。

```
$(function() {
$('#footer_include').load('../includes/footer.txt');
}); 
```

这对根文档很有用，但是一旦我进入一个新文件夹并更深入，它就需要一个单独的变体来加载。例如...

```
$(function() {
$('#footer_include').load('../../includes/footer.txt');
}); 
```

是否有更好的解决方案适用于所有文件？我试过

```
./includes/footer.txt 
```

认为它会回到根文件夹，但没有奏效。我正在使用 php，所以也许 php include 会是要走的路？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T19:46:45.163

最好使用`/includes/footer.txt`假设包含在您的根目录中。

这应该适用于所有文件，无论您的根结构中的位置如何，因为它是相对于根而不是当前文件引用的。

# ruby-on-rails - Rails 教程，第 7 章未定义的方法“model_name”

> ID：12628916
> 
> 赞同：0
> 
> 时间：2012-09-27T19:43:37.740
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在使用 Michael Hartl 教程。在第 7 章中，我发现了启动服务器并运行时显示的问题

```
http://localhost:3000/signup 
```

我收到这条消息：

```
 NoMethodError in User#new

 Showing C:/rails_project/sample_app/app/views/user/new.html.erb where line #6 raised:

 undefined method `model_name' for NilClass:Class

 Extracted source (around line #6):

 3: 
 4: <div class="row">
 5:   <div class="span6 offset3">
 6:     <%= form_for(@user) do |f| %>
 7: 
 8:       <%= f.label :name %>
 9:       <%= f.text_field :name %>

 Rails.root: C:/rails_project/sample_app
 Application Trace | Framework Trace | Full Trace

 app/views/user/new.html.erb:6:in `_app_views_user_new_html_erb___578921578_24443340' 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T19:45:20.233

`@user`可能没有被实例化。`users_controller.rb`在方法中检查您是否有`def new`类似`@user = User.new`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T06:02:07.603

做就是了

```
@user = User.new 
```

当您使用尚未定义的变量时会出现这种类型的错误

# .net - 通过检查区域、日期和小时来检查表中的条目是否已存在

> ID：12628917
> 
> 赞同：0
> 
> 时间：2012-09-27T19:43:37.990
> 
> 标签：.net, vb.net, oracle, date

我有一个带有表的数据库，其中存储了几个值以及它所属的区域、它来自的日期以及它来自的小时。该表将定期更新，来自可能包含我已经拥有的新数据和旧数据的源，新数据将被插入，我已经存储的旧数据将被更新，因为它可能从创建之时起就发生了变化，我需要最新的可能。

我可以毫无问题地检查区域和时间是否已经存在：

```
sql.CommandText = "select 'Y' from dual where exists (select * from mytable where hour= "+hour+" and zone='" + zone+ "')" 
```

但是如果将日期添加到方程中，它会在调用 ExecuteScalar 方法时失败：

```
sql.CommandText = "select 'Y' from dual where exists (select * from mytable where hour = " + hour + " and zone = '" + zone+ "' and date_field = '" + datevalue + "')" 
```

我之前尝试过其他方法，但似乎都没有，比如执行 Select Count(*) 并执行阅读器或执行合并语句。

任何帮助表示赞赏。我正在研究 VB、.NET 框架 3.5 和 Oracle 10g。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T20:21:05.350

可能从`DateTime`to的转换`string`是 Sql 服务器无法识别的格式。
您应该使用[SqlParameter](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.aspx)而不是将字符串与值连接起来。还要确保值的类型正确。（`DateTime`为`datevalue`和不`string`）

```
using (var command = new SqlCommand("select 'Y' from dual where exists (select * from mytable where hour = @hour and zone = @zone and date_field = @datevalue)", connection))
{
  command.Parameters.Add(new SqlParameter("hour", hour));
  command.Parameters.Add(new SqlParameter("zone", zone));
  command.Parameters.Add(new SqlParameter("datevalue", datevalue));

  var reader = command.ExecuteReader();
} 
```

这也将避免讨厌的 SQL 注入攻击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T20:22:22.370

在 oracle 中，比较必须如下所示：

```
... AND date_field = TO_DATE('27-09-2012', 'DD-MM-YYYY') 
```

试试这个，如果你想保留字符串版本，但使用 Magnus 所示的参数化查询，可以绕过日期表示问题：

```
sql.CommandText = String.Format(@"SELECT 'Y' FROM dual WHERE EXISTS
    (SELECT * FROM mytable
     WHERE hour = {0} AND zone = {1} AND
           date_field = TO_DATE('{2:dd-MM-yyyy}','DD-MM-YYYY'))",
    hour, zone, datevalue); 
```

注意：`datevalue`假定为`DateTime`.

# web-services - 为外部站点（不使用 OAuth）存储用户凭据的智能方法是什么？

> ID：12628921
> 
> 赞同：6
> 
> 时间：2012-09-27T19:43:52.717
> 
> 标签：web-services, security, authentication, credentials

我意识到，一般来说，您不应该直接存储用户凭据（即，以纯文本形式）；相反，最好存储它们的某种加密形式。

但是，假设我创建了一个与其他第 3 方网站交互的网站；假设这个第 3 方站点提供了一个 API，该 API 需要用户的凭据（使用该站点）进行身份验证。

如果我的目标是，比如说，在这个第 3 方提供的服务之上提供一个卓越的 UI 或引入额外的功能，那么在我看来，我需要以某种方式实际存储用户的凭据，以便我可以使用 API——而不是*我的*网站的用户密码（我可以散列和加盐），但用于外部网站。

有没有“正确”的方法来做到这一点？我最初的想法是以某种形式存储加密的凭据，以便可以在服务器上对其进行解密，以便对第 3 方服务进行 API 调用。这意味着攻击者需要了解加密/解密的工作原理才能窃取用户的外部密码。但是，这对我来说似乎并不牵强。一个聪明的黑客已经攻破了托管我的应用程序的服务器，他可能能够很容易地获取代码并找出它。

因此，这种方法似乎总比没有好，但并不完全好。人们还使用其他策略吗？这整个概念（与需要用户凭据的第 3 方服务交互）是否不明智？

我必须相信至少有一些相当安全的方法可以处理这种情况，因为即使在一些相当高知名度的网站（例如 Mint.com）中，它似乎也比较普遍。

**更新**：澄清一下：我知道在理想的世界中，第 3 方服务将实施某些版本的 OAuth（或等效版本），这样我就不必存储凭据。不幸的是，在这种情况下，第 3 方服务要求在每个 API 请求中发送用户名和密码。那么，我听到的共识是，在这种情况下，大多数开发人员只会拒绝使用该服务（并且很可能会建议他们实施 OAuth）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T19:50:01.257

IMO 认为您*不*应该*负责*将凭据存储在文件系统的某个*位置*。试想一下，即使是第 3 方服务器*也不*知道用户凭据（会有密码的哈希值，而不是存储的实际密码）。
我建议将它们存储为 http-session 的一部分，只要会话处于活动状态，它就会持续存在。

# .net-3.5 - 使用 WIX3.6 安装带有 Burn 的 .NET Framework 3.5 SP1

> ID：12628922
> 
> 赞同：5
> 
> 时间：2012-09-27T19:43:59.487
> 
> 标签：.net-3.5, wix, burn

我正在尝试使用 Burn 和 WIX 3.6 为我的应用程序制作安装程序。安装程序必须能够从 Microsoft 网站安装 .NET 3.5 SP1。我正在使用 WIX 3.5 创建的工作 WIX 项目工作。如果 .NET 3.5 SP1 之前已经安装在目标机器上，它就可以工作。第一步似乎是创建一个包，所以我在我的 Product.wxs 文件中添加了一个元素。当我这样做时，我收到一条错误消息，指出在架构中无效，我必须有一个。这是否意味着我必须将所有产品定义转移到一个片段中？目前还不清楚我是如何做到的。然后事情变得更加复杂，因为 WixNetfxExtension 只为 .NET 4.0 和 4.5 提供 PackageRef。我还没有准备好将我的应用程序切换到该版本的框架。那么如何从捆绑包中的 Web 源获取 .NET 3.5 SP1？

有没有在任何地方这样做的工作示例？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-28T07:07:14.947

您的问题不清楚您要在哪里做事，所以我将从头开始。

创建一个新的 Wix 刻录引导程序项目。这是安装依赖项的位置，然后将生成现有的 Wix 3.5 安装程序。

下载 .net 3.5 SP1 完整包并记下用于下载它的直接 url。

使用 heat.exe（在 wix 3.6 bin 目录中）运行以下命令，该命令将生成一个包含 .net 安装程序详细信息的 WXS 文件。

```
heat.exe payload [path_to_net_installer] -o [path_to_wxs] 
```

this.will 在 wxs 中为您提供以下内容：

```
<RemotePayload CertificatePublicKey="F321408E7C51F8544B98E517D76A8334052E26E8"
               CertificateThumbprint="D57FAC60F1A8D34877AEB350E83F46F6EFC9E5F1" 
               Description=".NET Framework 3.5 Setup"
               Hash="3DCE66BAE0DD71284AC7A971BAED07030A186918" 
               ProductName=".NET Framework 3.5" 
               Size="242743296" 
               Version="3.5.30729.1" /> 
```

将此作为元素的子元素添加到引导程序项目中，[`ExePackage`](http://wix.sourceforge.net/manual-wix3/wix_xsd_exepackage.htm)并使用之前保存的下载 url 更新元素。这将自动下载 .net 安装程序，或者您可以将其放在引导程序 exe 旁边，它会检测到它。

在包含 .net ExePackage 和安装程序的 MsiPackage的[Bundle](http://wix.sourceforge.net/manual-wix3/wix_xsd_bundle.htm)中创建一个[链。](http://wix.sourceforge.net/manual-wix3/wix_xsd_chain.htm)然后你会得到类似的东西（我会让你填写很多必需的属性！）：

```
 <Bundle Name="$(var.SkuName)"
         Copyright="$(var.Copyright)"
         Manufacturer="$(var.Manufacturer)"
         Version="$(var.ProductVersion)"
         UpgradeCode="$(var.UpgradeCode)">
     <Chain>
         <ExePackage Id="dotNetFX3.5">
             <RemotePayload />
         </ExePackage>
         <MsiPackage Id="MyMsi" />
     </Chain>
  </Bundle> 
```

构建，然后你应该有一个包含你的 msi 的大 exe，或者如果你选择不压缩它一个执行你的 msi 的 exe（它需要在同一个文件夹中）。

# php - mod_rewrite php脚本的重定向循环问题

> ID：12628923
> 
> 赞同：1
> 
> 时间：2012-09-27T19:43:59.923
> 
> 标签：php, apache, mod-rewrite, redirect, redirect-loop

我有一个具有以下规则的 .htaccess 文件：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?route=$1 [L,QSA] 
```

在 index.php 我有：

```
$route = (isset($_GET['route'])?explode('/',$_GET['route']):null);

if(!empty($route)){
    $route[0]; //movie
    //$route[1]; //movie-name

    header("Location: " . "http://192.167.1.189/site_name/movie/" . $route[1]);
    // $route[1] = 2271 (movie id)
    exit;
} 
```

目标是从此网址获取：

```
http://192.167.1.189/site_name/movie-page.php?id=2270 
```

到这个网址：

```
http://192.167.1.189/site_name/movie/2270 
```

我还想要一些其他的 url 更改，例如 .../movie-page.php 到 .../movie/ 等等...

我明白为什么我得到重定向循环，但我不知道如何解决它。如何将所有（除了有效文件和目录，如 css 文件和图像）重定向到中央 php 文件，然后重定向到用户友好的 url？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T21:27:40.563

> 我明白为什么我得到重定向循环，但我不知道如何解决它。如何将所有（除了有效文件和目录，如 css 文件和图像）重定向到中央 php 文件，然后重定向到用户友好的 url？

所以听起来这就是你想要做的：

1.  浏览器请求一个友好的 URL
2.  .htaccess 中的重写规则用`?route=`查询字符串重写友好的规则
3.  `index.php`脚本接受请求并对其进行处理，并为浏览器提供所需的内容

但你也想做：

1.  `?route=`浏览器使用查询字符串请求一个丑陋的 URL
2.  重写规则什么都不做，因为 URI 不匹配
3.  `index.php`脚本接受请求，发现它是一个丑陋的 URL，并将浏览器重定向到友好的 URL 。

为此，您需要在脚本中检查最初请求的 URL 的样子。您可以通过查看`$_SERVER['REQUEST_URL']`或`$_SERVER['REQUEST_URI']`变量来做到这一点。他们应该告诉你浏览器实际请求的 URI。

例如，如果有人在他们的浏览器中的 URL 地址栏中输入 URL: `http://192.167.1.189/site_name/movie/2270`，那么重写规则会将其路由到`index.php`，然后在您的 php 文件中您可以检查`$_SERVER['REQUEST_URI']`它，它会说：`/site_name/movie/2270`。

但是如果有人在他们的 URL 地址栏中输入：`http://192.167.1.189/site_name/movie-page.php?id=2270`，那么`$_SERVER['REQUEST_URI']`将是`/site_name/movie-page.php?id=2270`。所以也许你想要在你的**if**语句中这样的东西：

```
if(!empty($route) && 
   strpos($_SERVER['REQUEST_URI'], "site_name/movie/") != 1
  ){ 
```

因此，您要确保 var 中有某些`$route`内容并且`$_SERVER['REQUEST_URI']`var 不是以`/site_name/movie/`.

# php - 如何使用 PHP 为上次上传的文件生成不同的 HTML？

> ID：12628926
> 
> 赞同：0
> 
> 时间：2012-09-27T19:44:02.780
> 
> 标签：php, fancybox

我正在fancybox 中创建一个图片库，但我正在尝试自动上传图片。

Fancybox 画廊是`<a>`标签的集合，但`<a>`列出的第一个标签也有一个`<img>`标签，用于提供打开的缩略图，如下所示：

```
<a href="image1.jpg"><img src="image1thumb.jpg"></a>
<a href="image2.jpg"></a>
<a href="image3.jpg"></a> 
```

目前，我必须为`<a>`我上传的每张新图片手动添加标签，这很乏味。我宁愿将链接添加到 mySQL 数据库，然后由一段 PHP 获取。

用简单的英语，代码将如下所示：

对于最后上传的文件，仅显示`<a href.......><img src=.......></a>`，然后对所有其他图像显示`<a href........></a>`。

我已经有了最后一个上传文件的代码，显示为 $lastupload，但我正在为 foreach 循环而苦苦挣扎。到目前为止，我有：

```
foreach ($lastupload) {
echo '<a class="fancybox" rel="'.$r["rel"].'" href="'.$r["imagelink"].'" title="'.$r["comment"].'"><img src="thumb.jpg"></a>';
        }
else {
echo '<a class="fancybox" rel="'.$r["rel"].'" href="'.$r["imagelink"].'" title="'.$r["comment"].'"></a>
      } 
```

现在，我知道这段代码基本上没用了。我知道我在最初的 foreach 括号中需要更多内容，并且 else 不应该是这个循环的一部分（它应该是 foreach/ifelse），但我不知道如何进一步进行。我看过的所有示例都介绍了我不确定是否适合我正在尝试做的计数。另外，到目前为止，我看过的示例都没有显示如何从 mySQL 数据库生成链接列表。

您可以提供的任何帮助都会有很长的路要走。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T19:48:30.890

你有没有看过`foreach()`循环实际上是如何工作的？您不需要计算此特定循环。或者您可以循环直到结果结束（见下文）。

[http://php.net/manual/en/control-structures.foreach.php](http://php.net/manual/en/control-structures.foreach.php)

至于从您的数据库中提取链接，请查看`mysqli_fetch_assoc()`. 有一些`while()`循环示例可以在您的查询中运行。

[http://php.net/manual/en/mysqli-result.fetch-assoc.php](http://php.net/manual/en/mysqli-result.fetch-assoc.php)

查看 PHP.net 手册中的上述示例，这是一个非常好的信息来源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T19:49:15.943

我不确定我是否完全理解你的问题。我不知道您的示例中的 $r 是什么，但据我所知，您想做这样的事情：

```
$i = 0;
foreach ($r as $row) {
  if ($i == 0) {
    echo '<a class="fancybox" rel="'.$row["rel"].'" href="'.$row["imagelink"].'" title="'.$row["comment"].'"><img src="'.$lastupload.'"></a>';
  }
  else {
    echo '<a class="fancybox" rel="'.$row["rel"].'" href="'.$row["imagelink"].'" title="'.$row["comment"].'"></a>
  }
  $i++;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T16:43:53.433

答案是不要寻找最后上传的文件，只需区别对待查询的第一个结果。

这是我得到的完整代码：

```
<?php
  $foo_query->setFetchMode(PDO::FETCH_ASSOC);
  $is_first=false;
  while($r=$foo_query->fetch()) {
    if($is_first) {
      echo '<a...blah blah blah><img src="thumb.jpg"></a>';
    } else {
      echo '<a...more blah></a>';
    }
  } 
?> 
```

# c++ - 为什么 VS UnitTesting 框架中的 Assert::AreEqual 不能与 std::string 一起使用？

> ID：12628927
> 
> 赞同：9
> 
> 时间：2012-09-27T19:44:15.137
> 
> 标签：c++, string, unit-testing, visual-c++, std

我正在尝试对一些 c++ 代码进行单元测试，但遇到了一些麻烦。

我有类似于以下代码行的东西......

```
std::string s1 = obj->getName();
std::string s2 = "ExpectedName";
Assert::AreEqual(s1, s2, "Unexpected Object Name"); 
```

我收到以下编译器错误...

```
error C2665: 'Microsoft::VisualStudio::TestTools::UnitTesting::Assert::AreEqual' :
none of the 15 overloads could convert all the argument types 
```

似乎它应该与[以下重载](http://msdn.microsoft.com/en-us/library/ms243446%28v=vs.80%29.aspx)匹配：

```
AreEqual<(Of <(T>)>)(T, T, String) 
```

上面的重载不是应该支持任何对象的模板重载吗，只要参数 1 和 2 是相同的类型？还是我错过了什么？

还有其他方法可以完成此断言吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T20:01:26.267

您正在尝试将*托管*单元测试框架与*本机*类型一起使用——如果不先将对象编组为托管类型，这根本行不通。

VS2012 现在自带[原生 C++ 单元测试框架](http://msdn.microsoft.com/en-us/library/hh270864.aspx)；改用此框架，您的代码可以通过更改`"Unexpected Object Name"`为宽字符串（前缀为`L`）并调用[以下重载](http://msdn.microsoft.com/en-us/library/hh694604.aspx#BKMK_General_Are_Equal)来工作：

```
template<typename T> 
static void AreEqual(
    const T& expected, 
    const T& actual, 
    const wchar_t* message = NULL, 
    const __LineInfo* pLineInfo = NULL) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-04T21:13:36.093

如果我们试图留在非托管 C++ 中，并且我们不在乎错误消息的样子，那么这可能是比接受的答案更好的选择：

`Assert::IsTrue(s1==s2)`

更好，我的意思是它至少易于阅读。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T20:47:10.130

我破解了一些解决方法，以便比较整数而不是字符串：

```
Assert::AreEqual(0, s1.compare(s2), "Unexpected Object Name"); 
```

将来，我们可能会切换到原生 C++ 单元测试，但与此同时，这可以解决问题。显然，这个消息不是很有帮助

```
Assert.AreEqual failed. Expected:<0>. Actual:<1>. Unexpected Trajectory Name 
```

但总比没有好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-11T09:55:15.367

我相信解决方案是在字符串之前给我们 L 前缀

```
 Assert::AreEqual<bool>(true, dict->IsBeginWith("", ""), L"Empty"); 
```

您也可以尝试这样的案例，这会给您错误的结果，但会导致对问题的正确理解方向

```
 Assert::AreEqual<bool>(true, dict->IsBeginWith("", ""), (wchar_t*)"Empty"); //Empty
   Assert::AreEqual(true, dict->IsBeginWith("A", "A"), (wchar_t*)"Empty2");
   Assert::AreEqual(true, dict->IsBeginWith("A", "a"), (wchar_t*)""); //CAPITAL LETTER Check 
```

# twilio - 如何在 TwiML 中生成半秒暂停？

> ID：12628933
> 
> 赞同：5
> 
> 时间：2012-09-27T19:44:24.713
> 
> 标签：twilio, twilio-twiml

我正在尝试使用 Twilio 的[<Say>](/docs/api/twiml/say)动词来清晰地发音数字序列。我发现很难在每个数字之间产生自然的（半秒）停顿。我该如何正确地做到这一点？

<Pause> xml 命令只需要几秒钟的整数值，所以使用起来太长了。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-28T13:16:27.997

从这里：[链接](http://www.twilio.com/docs/api/twiml/say)

*   当说数字时，“12345”将被称为“12345”。而“1 2 3 4 5”将被称为“一二三四五”。

*   逗号和句号等标点符号将被语音引擎解释为**自然停顿。**

*   如果你想插入一个长停顿尝试使用`<Pause>`动词。`<Pause>`应该放在`<Say>`标签外面，而不是嵌套在里面。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-08-06T09:42:11.970

不到一秒钟的停顿：

```
<Say language="en-US" voice="alice">
Your verification code is 1,,,,2,,,,3,,,,4,,,,5
</Say> 
```

`commas`您可以根据自己的方便增加和减少数量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-23T18:08:33.920

这是切线相关的，但我认为寻找类似内容的人最终会回答这个问题（就像我一样）。

我希望`Say`动词以自然的 3-3-4 节奏读取美国电话号码。这是一些可以做到这一点的C#。我相信您可以弄清楚如何将其翻译成其他语言：

```
private static string SayNaturalNumber(string digits)
{
    var newNumber = "";
    for (int i = 0; i < digits.Length; i++)
    {
        if (i == 0)
            newNumber += digits[i];
        else
            newNumber += " " + digits[i];

        if (i == 2) //after third digit
            newNumber += ",,,,";

        if (i == 5) //after sixth digit
            newNumber += ",,,,";
    }
    return newNumber;
} 
```

# jquery - 功能 click() 不工作 [Rails 3.2 + jquery]

> ID：12628934
> 
> 赞同：1
> 
> 时间：2012-09-27T19:44:31.297
> 
> 标签：jquery, ruby-on-rails

在我的 index.html.erb 我有：

```
<button type="button" id="clean">Clean</button> 
```

**此按钮是在“something.js.erb”操作之后添加的。** 因此，在 application.js 中：

```
$(function () {
    $('button#clean').click(function(){
        $('#target').remove(); 
    });
}); 
```

为什么不工作？当我将此脚本放入 html 时，它就可以工作了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-12-10T13:03:30.587

以正确的格式使用“on function”。

```
$(document).on('click', 'button#clean', function () {
    $('#target').remove();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T19:48:03.030

确保事先加载 jQuery，我建议使用以下代码

```
 $('button#clean').on("click", function() {
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T19:49:33.057

我会检查你的控制台以确保没有错误，并确保你的 HTML 中包含了 application.js 和 jQuery。

index.html.erb

```
<script type="text/javascript" src="/js/jquery.js"></script>
<script type="text/javascript" src="/js/application.js"></script> 
```

应用程序.js

```
(function ($) {
  $('button#clean').click(function () {
    $('#target').remove();
  });
})(jQuery); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T19:46:13.830

您是否在 HTML 中引用您的 .js 文件？

还按 F12 检查控制台部分中的任何错误

如果您没有看到任何错误，请尝试使用**.on()附加事件处理程序**

```
$('button#clean').on('click', function() {
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T19:53:44.147

如果您希望在转到 foo_controller 的 index.html 之前执行页面特定的 js，那么请执行

```
assets/javascripts/foo/index.js 
```

并放置

```
$(function () {
    $('button#clean').click(function(){
        $('#target').remove(); 
    });
}); 
```

# javafx-2 - JavaFX-2 FXML CSS 反射

> ID：12628935
> 
> 赞同：3
> 
> 时间：2012-09-27T19:44:40.220
> 
> 标签：javafx-2

是否可以将 CSS 中的 javafx.scene.effect.Reflection 用于 FXML 文件？

还有更一般的东西（我还没有找到任何答案）：我可以用 Java API 上可用的 FXML 和 CSS 做任何事情（使用 JavaFX 2.2）吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T20:37:30.230

> 是否可以将 CSS 中的 javafx.scene.effect.Reflection 用于 FXML 文件？

不适用于 JavaFX 2.2 - 只能通过 CSS 设置[阴影和内阴影效果。](http://docs.oracle.com/javafx/2/api/javafx/scene/doc-files/cssref.html#typeeffect)未来的 JavaFX 版本可能会增加通过 CSS 设置更多效果的能力。

现在，如果您想要与 FXML 结合使用的效果，那么您可以使用[控制器](http://docs.oracle.com/javafx/2/api/javafx/fxml/doc-files/introduction_to_fxml.html#controllers)或在 FXML 中定义效果，而无需使用 CSS。

例如：

```
<Button layoutX="20.0" layoutY="32.0" text="Reflected Button">
  <effect>
    <Reflection />
  </effect>
</Button> 
```

要直观地设计和定义基于 FXML 的效果，请使用[SceneBuilder](http://www.oracle.com/technetwork/java/javafx/tools/index.html)，单击您的节点，转到属性窗格并从效果下拉框中选择要自定义的效果。

> 我可以使用 Java API 上可用的 FXML 和 CSS 做任何事情（使用 JavaFX 2.2）吗？

您仍然需要编写一些非 fxml 嵌入代码来启动应用程序并加载您的 fxml。

如果您使用 FXML 的[脚本功能](http://docs.oracle.com/javafx/2/api/javafx/fxml/doc-files/introduction_to_fxml.html#scripting)，您可以完成大部分可以在 Java API 上完成的工作。但是，为了便于维护，我建议使用 FXML 控制器或在 fxml 文件外部托管脚本代码，而不是将其嵌入到 fxml 中。

# iphone - 如何在 iOS 的 UIDatePicker 中禁用以前的时间

> ID：12628938
> 
> 赞同：3
> 
> 时间：2012-09-27T19:44:48.567
> 
> 标签：iphone, objective-c, ios, datepicker

我想禁用以前的时间，即在 datePicker 的当前时间之前，**如在日期选择器中我们可以使用最小日期来执行此**操作。我们如何对时间选择器执行相同操作。

这是代码。

```
 timePicker = [[UIDatePicker alloc] init];
  [self.view addSubview:timePicker];
  float tempHeight = timePicker.frame.size.height;
  timePicker.frame = CGRectMake(0,200 ,self.view.frame.size.width , tempHeight);
  timePicker.hidden = YES;
  timePickerFormatter= [[NSDateFormatter alloc]init ];
  [timePickerFormatter setDateFormat:@"HH:mm"]; 

  **timePicker.datePickerMode = UIDatePickerModeCountDownTimer;**
  timePicker.minuteInterval=15; 
```

`

提前致谢如果有任何方法可以执行此操作，请建议我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T19:58:30.027

在默认的 UIDatePicker 中可以设置最小日期，并且 date 属性同时具有日期和时间值，您可以在其中自行设置

```
 [datePicker setMinimumDate:[NSDate date]]; 
```

这里

```
[NSDate date] 
```

给出当前日期

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T19:55:53.303

所以你想从当前时间禁用以前的时间。

```
timePicker.date = [NSDate date]; 
```

这会将时间设置为当前时间，但我认为您不能禁用上一个时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-18T08:39:46.310

通过这种方法，如果他/她选择了过去的时间，您可以向用户提供警报。条件是您已经在当前日期的最短日期进行了检查。

```
func handleTimePicker(sender: UIDatePicker) {

    let timeFormatterHour = NSDateFormatter()
    let timeFormatterMinutes = NSDateFormatter()
    timeFormatterHour.dateFormat = "hh"
    timeFormatterMinutes.dateFormat = "mm"
    let InputTimeHourString = timeFormatterHour.stringFromDate(sender.date)
    let InputTimeMinutesString = timeFormatterMinutes.stringFromDate(sender.date)
    let InputTimeHourInt = Int(InputTimeHourString)!
    let InputTimeMinutesInt = Int(InputTimeMinutesString)!
    let calculatedInputMinutes = (InputTimeHourInt * 60) + InputTimeMinutesInt

    let TodayTime = NSDate()
    let TodayTimetimeFormatterHour = NSDateFormatter()
    let TodayTimetimeFormatterMinutes = NSDateFormatter()
    TodayTimetimeFormatterHour.dateFormat = "hh"
    TodayTimetimeFormatterMinutes.dateFormat = "mm"
    let TodayTimeInputTimeHourString = TodayTimetimeFormatterHour.stringFromDate(TodayTime)
    let TodayTimeInputTimeMinutesString = TodayTimetimeFormatterMinutes.stringFromDate(TodayTime)
    let TodayTimeInputTimeHourInt = Int(TodayTimeInputTimeHourString)!
    let TodayTimeInputTimeMinutesInt = Int(TodayTimeInputTimeMinutesString)!
    let TodayTimecalculatedInputMinutes = (TodayTimeInputTimeHourInt * 60) + TodayTimeInputTimeMinutesInt

    if TodayTimecalculatedInputMinutes - calculatedInputMinutes < 0
    {
        let shownDateFormatter = NSDateFormatter()
        shownDateFormatter.dateFormat = "hh:mm a"
        self.txtTimeEvent.text = shownDateFormatter.stringFromDate(sender.date)
    }
    else
    {
        let alertController = UIAlertController(title: "Time Selection Problem", message:
            "You cannot select the Past time", preferredStyle: UIAlertControllerStyle.Alert)
        alertController.addAction(UIAlertAction(title: "OK", style: UIAlertActionStyle.Default,handler: nil))
        self.presentViewController(alertController, animated: true, completion: nil)
        let shownTime = NSDate()
        let shownTimeFormatter = NSDateFormatter()
        shownTimeFormatter.dateFormat = "hh:mm a"
         self.txtTimeEvent.text = shownTimeFormatter.stringFromDate(shownTime)

    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-01T19:33:50.457

您在两年前发布了您的问题，但这可能会帮助任何将面临这个问题的人，我今天遇到了同样的问题，这是解决方案：
它并没有真正禁用以前的日期，但是如果用户选择了以前的日期，则上面函数将显示警报并将 UIDatePicker 重置为当前日期：

Swift 4：

```
@IBAction func dateChanged(_ sender: Any) {
    let dtp = sender as! UIDatePicker
    if Date() <= dtp.date {
        print ("correct date")
    } else {
        dtp.date = Date()
        let alert = UIAlertController(title: "Error", message: "You have to choose a correct date", preferredStyle: .alert)
        let action = UIAlertAction(title: "OK", style: .default, handler: nil)
        alert.addAction(action)
        self.present(alert, animated: true, completion: nil)
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-21T06:20:08.857

Swift：在您的 Picker 函数中添加这一行。它只允许未来的时间。

My_Pickername.minimumDate = NSDate()

# coffeescript - npm 包品牌

> ID：12628940
> 
> 赞同：1
> 
> 时间：2012-09-27T19:44:56.023
> 
> 标签：coffeescript, npm, branding, browserify

我用 CoffeeScript 编写了一个库。

它通过 Knockout 视图模型将 Backbone 视图与 Backbone 集合和模型联系起来。它有助于轻松开发管理 Web 界面，我已经在我的项目中使用了它。现在是开源这个包的时候了，但我坚持名字。当前名称 - “bbko”来自 BackBone + KnockOut，但听起来不太好，不是吗？

我不是以英语为母语的人，因此非常感谢您的帮助。

PS 我知道，已经有一个很好的替代库 - KnockBack。这不是我写的）））

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:19:02.700

您需要一些名称建议吗？以下情况之一如何：

1.  敲我的骨头
2.  骨干-mvvm
3.  击倒
4.  电击
5.  内陆
6.  拳击

你也可以采用 Substuck 的方式，给你的包起一个完全不同的名字，例如：

1.  抢劫
2.  前党
3.  三明治
4.  幸运的孩子
5.  拳击
6.  小丑鱼

最终，如何命名模块并不重要。如果它好用，请在 NPM 和 GitHub 上 star 并推荐给其他开发人员。

# c# - 为层次结构构建类结构

> ID：12628941
> 
> 赞同：0
> 
> 时间：2012-09-27T19:44:57.663
> 
> 标签：c#, asp.net, asp.net-mvc, c#-4.0

下面给出的是我的类结构，我正在尝试构建一个可以存储并且可以访问下面给出的数据层次结构的类。

用文字总结（请参见代码后的层次结构）；
所有区域只有 1 个主区域
在一个区域下可以有一个或多个位置。

```
 public class RegionLocItemView
                        {

                            public  Guid Id { get; set; }
                            public  string name { get; set; }
                            public  Guid value { get; set; }
                            public  bool isChecked { get; set; }
                            public List<RegionLocItemView> Children
                            {
                                get ; 
                                set
                                {
                                   //where do i set this from             

                                } ;
                            }
                            public RegionLocItemView(List<RegionLocItemView> a)
                            {
                                Children = a;
                            }

                            public RegionLocItemView()
                            {
                            }

                        } /// end of class                                  

                Accessing class from code below:                      

                var getAvailableLocations = Model.SessionProvider.GetAvailableLocations.Where(e => e.Location.Count >= 1);

                    Guid parentid = Guid.Empty;
                    RegionLocItemView cls = new RegionLocItemView();
                    List<RegionLocItemView> main =  new List<RegionLocItemView>();
                 foreach (var a in getAvailableLocations)
                        {
                            if (a.ParentID == null)
                            {
                                //found Parent of all regions.
                                //cls = new RegionLocItemView();
                                cls.Id = a.ID;
                                parentid = a.ID;
                                cls.name = a.RecordName;
                                //main.Add(cls);
                                // break;
                            }

                            if (a.ParentID == parentid)
                            {
                                RegionLocItemView cls1 = new RegionLocItemView();
                                //found children
                                cls1.Id = a.ID;
                                parentid = a.ID;
                                cls1.name = a.RecordName;
                                cls.Children.Add(new List<RegionLocItemView>(cls1));  

                            }
                        } 
```

我需要一个 IEnumerable 集合列表来存储下面层次结构中的对象。

```
 Main                     
                       Region1                  
                           Location1                
                           Location2           
                           Location3               
                       Region2                 
                            LocationA            
                            LocationB            
                            LocationC             
                        Region...                   
                            Location... 
```

问题：

您能否针对上面的数据重构我上面的类结构，并为我提供如何在 C# 代码中访问该类的代码示例。我正在从 IEnumerable 集合中读取上述数据，并且数据排列不正确，因此我需要执行上述操作。

为什么我想要这个类结构：我想要这个以便我可以将它绑定到一个 Telerik TreView 控件，该控件接受一个 IEnumerable 集合，如一个通用列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T20:03:53.917

也许使用通用框架类可以完成这项工作

```
public class Main : Dictionary<Region, List<Location>> { } 
```

# ios - UIWebView 复制/粘贴不保留字体和大小

> ID：12628948
> 
> 赞同：5
> 
> 时间：2012-09-27T19:45:37.393
> 
> 标签：ios, uiwebview, uipasteboard

在 contenteditable 的 UIWebView 中，当我复制然后粘贴一些文本时，内容会粘贴它可能具有的任何粗体或斜体属性，但字体总是被 Times（总是 size="3"）替换，无论它在复制中是什么文本（例如 Helvetica）。几周前，我在 Apple 的 bug 网站上提交了一份雷达报告，但没有得到任何消息。有什么想法可以解决吗？

# jquery - 选项卡内的 JQuery tablesorter 斑马条纹

> ID：12628949
> 
> 赞同：2
> 
> 时间：2012-09-27T19:45:46.523
> 
> 标签：jquery, tabs, tablesorter

我有一个使用 JQuery 选项卡的网页，其中 3 个选项卡是我尝试使用带有斑马条纹的 JQuery 表排序器的表。第一个选项卡有一个可以正常工作的表格。第 3 和第 4 个选项卡表正确排序，但第一次查看选项卡时，表没有斑马条纹，但排序正确。如果您单击其中一个列标题对表格进行排序，它会进行排序，然后斑马条纹将从那时起起作用。我试图弄清楚如何在第一次查看标签时让条纹工作。起初，我在 $.ready 代码中有所有的表格排序器代码，但是当这不起作用时，我尝试在选择选项卡时对其进行排序。下面是我的代码：

```
<script type="text/javascript">
$(function() {
  $('#tabs').tabs({
    select: function(event, ui) {
      switch (ui.index) {
        case 3:
          $("#bTable").tablesorter({widgets: ['zebra'] , sortList: [[0,0]]});
          break;    
        case 4:
          $("#cTable").tablesorter({widgets: ['zebra'] , sortList: [[0,0]]});
          break;
      }
    }});
});

$(document).ready(function()     {
  $("#aTable").tablesorter({ 
      widgets: ['zebra'] 
  });  
});
</script> 
```

# linux - 在 Linux 上接收所有多播 ICMPv6 数据包

> ID：12628953
> 
> 赞同：1
> 
> 时间：2012-09-27T19:46:09.580
> 
> 标签：linux, network-programming, ipv6, multicast

如果可能的话，我想接收到达某个接口的*所有多播 IPv6 数据包，而无需在第 2 层上进行操作。*

我为原始 ICMPv6 数据包打开了一个套接字，并且接收专用于我的机器的单播数据包工作得很好。然而，许多 ICMPv6 数据包是链路本地多播（例如邻居请求）。侦听所有多播流量（包括请求节点多播）的正确方法是什么？目前我尝试使用 IPV6_ADD_MEMBERSHIP 添加一个多播组，但这似乎不起作用。这是我的代码：

```
/* open RAW socket to receive on */
if ((sockfd = socket(AF_INET6, SOCK_RAW, IPPROTO_ICMPV6)) < 0) {
    perror("socket");
}

/* get device index */
memset(&if_idx, 0, sizeof(struct ifreq));
strncpy(if_idx.ifr_name, DEVNAME, IFNAMSIZ-1);
if (ioctl(sockfd, SIOCGIFINDEX, &if_idx) < 0) {
    perror("SIOCGIFINDEX");
}

/* configure to receive all multicast packets on this interface */
memset(&mreq, 0, sizeof(struct ipv6_mreq));
inet_pton(AF_INET6, "ff02::", &mreq.ipv6mr_multiaddr);
mreq.ipv6mr_interface = if_idx.ifr_ifindex;
if (setsockopt(sockfd, SOL_SOCKET, IPV6_ADD_MEMBERSHIP, &mreq,
            sizeof(struct ipv6_mreq)) < 0) {
    perror("setsockopt");
} 
```

我究竟做错了什么？我想要的必须以某种方式成为可能。我尝试将 ff02:: 和 ff02::1:ff00:0 作为组，后者甚至使 setsockopt 失败。这是怎么回事？不幸的是，关于 IPv6 多播编程的文档很少。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T02:36:38.167

毕竟这似乎是不可能的。我现在使用 Linux 的 AF_PACKET 套接字类型和“熟”模式 (SOCKET_DGRAM) 来访问带有链路层标头的原始 IPv6 数据包和一个 BPF 来过滤掉 ICMPv6 ND 数据包 - 至少我不需要处理解析以太网以这种方式标头，我可以更轻松地支持其他链路层类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T15:39:44.733

使用`SOL_IPV6`而不是`SOL_SOCKET`.

测试订阅`ff80::1`和生成流量`ping6 -I eth0 ff08::1`。

# iphone - Quartz 2D - 画一个点

> ID：12628954
> 
> 赞同：-1
> 
> 时间：2012-09-27T19:46:13.013
> 
> 标签：iphone, ios, macos, quartz-2d

我知道在 Quartz 2D 中使用画线方法画一个点是

```
CGContextMoveToPoint(context,x,y-0.5f);
CGContextAddLineToPoint(context,x,y+0.5f); 
```

有没有其他可能的方法来使用 Quartz 画一个点？我的意思是，一些直接的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T19:58:30.430

```
CGContextFillRect(context, CGRectMake(x,y,1,1)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T12:43:26.610

如果你想让它看起来像一个圆形点试试这个：

```
CGContextStrokeEllipseInRect(context, CGRectMake(x, y, 4, 4)); 
```

它会为您绘制一个矩形内的椭圆（上面的情况显然是一个正方形）。我更喜欢你选择一个正方形，因为它看起来像一个真正的圆形，而不是椭圆形的。但是，这个圆圈从里面是空的，你可以用笔画来填充它。（但它看起来像甜甜圈一样酷！）:)

# python - 使用 Python 删除小单词

> ID：12628958
> 
> 赞同：21
> 
> 时间：2012-09-27T19:46:30.470
> 
> 标签：python, regex

是否可以使用正则表达式删除文本中的小词？例如，我有以下字符串（文本）：

```
anytext = " in the echo chamber from Ontario duo " 
```

我想删除所有 3 个字符或更少的单词。结果应该是：

```
"echo chamber from Ontario" 
```

是否可以使用正则表达式或任何其他 python 函数来做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-09-27T19:47:28.087

无论如何，我认为您不需要这个简单示例的正则表达式...

```
' '.join(word for word in anytext.split() if len(word)>3) 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-09-27T19:49:50.973

当然，这也不是那么难：

```
shortword = re.compile(r'\W*\b\w{1,3}\b') 
```

上面的表达式选择前面有一些非单词字符（基本上是空格或开头）的任何单词，长度在 1 到 3 个字符之间，并且在单词边界处结束。

```
>>> shortword.sub('', anytext)
' echo chamber from Ontario ' 
```

边界匹配在`\b`这里很重要，它们确保您不只匹配单词的前 3 个字符或后 3 个字符。

`\W*`开头允许您删除单词和前面的非单词字符，以便句子的其余部分仍然匹配。请注意，标点符号包含在 中`\W`，`\s`如果您*只想*删除前面的空格，请使用。

值得一提的是，这个正则表达式解决方案在其余单词之间*保留了额外的空格，而 mgilson 的版本将多个空格字符折叠到一个空格中。*不确定这对你是否重要。

他的列表理解解决方案*是*两者中较快的一个：

```
>>> import timeit
>>> def re_remove(text): return shortword.sub('', text)
... 
>>> def lc_remove(text): return ' '.join(word for word in text.split() if len(word)>3)
... 
>>> timeit.timeit('remove(" in the echo chamber from Ontario duo ")', 'from __main__ import re_remove as remove')
7.0774190425872803
>>> timeit.timeit('remove(" in the echo chamber from Ontario duo ")', 'from __main__ import lc_remove as remove')
6.4250049591064453 
```

# c# - DropDownList 数字还是文本？

> ID：12628959
> 
> 赞同：0
> 
> 时间：2012-09-27T19:46:32.560
> 
> 标签：c#, asp.net, .net

我们的项目用户有很多下拉列表控件。我的问题是我们应该为他们在数据库中存储什么，订单号或文本本身。

例如：

```
<option value="1">This is the first option</option>
<option value="2">This is the second option</option> 
```

将“1”和“2”转换为smallint 1、2到数据库。 - 或者 -

```
<option value="This is the first option">This is the first option</option>
<option value="This is the second option">This is the second option</option> 
```

在字段中使用 varchar 数据类型。

订单号有利于统计，但文本是动态修改的，例如在 1 和 2 之间插入另一个选项，不必担心订单。此外，如果它嵌入在 GridView 中，我们可以简单地拉出文本，而不是在 GridView 中放置一个 DropDownList 控件以查看文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T20:02:33.893

如果您不想从数据库表中加载下拉列表，那么这就是我要做的。使用下拉列表中的整数值。然后您要做的是在数据库中创建模仿这些值的表，因为这将使您能够在表上构建外键并执行有意义的报告以及统计信息（就像您谈到的那样） .

最后，您可能希望创建`Enum`与值匹配的 '，因为这将使它们更易于在程序内部使用。例如：

```
public enum MyLookupTable
{
    Value1 = 1,
    Value2 = 2,
    etc...
} 
```

现在，我刚刚描述的只是一步，无需维护下拉菜单，因为您只需要从数据库中加载它们，您可以在[此处](http://www.dbtutorials.com/advanced/populatingdropdown-csharp.aspx)找到一个很好的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T19:48:46.490

使用某种标识符。绝对要一个数字，但不仅仅是订单号。正如您所说，您将来可能会添加其他选项，或者您可能想要重新排列现有值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T20:08:25.823

我建议您创建一个包含订单号和文本的表，其中订单号作为“自动增量”的主键。

例如，如果您在另一个表中需要“这是第一个选项”，请使用第一个表的主键作为第二个表中的“外键”。这样，您只需更改文本值而无需更改任何其他表格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T19:50:49.970

如果只有两个选项，我将`IsFirst`在数据库中创建一个布尔列并从选择的内容中持久保存。第二个选项为假 第一个选项为真

# php - 我在 foreach 语句中使用 foreach 但值重复

> ID：12628966
> 
> 赞同：0
> 
> 时间：2012-09-27T19:46:45.810
> 
> 标签：php

这是我的代码

```
foreach($html->find('ul.listings li a') as $tvshow)
    $tvshows=preg_replace('/<span[^>]*>([\s\S]*?)<\/span[^>]*>/', '', $tvshow->innertext);
foreach($html->find('li a span.epnum') as $e)

    $query=mysql_query("insert into tvshow(count,author,tvshowname,imdblink,tvshowlink,description,year,image,imagetype,website,date,rating) 
              values('$count','$author','$tvshows','$imdblink','$tvshow->href','$tvshowdescription','$e->innertext','$tvshowname','$tvshowtype','$website','$date','$rating')");
    if(!$query)
    {
        die(mysql_error());
    } 
```

这里 $tvshows,$tvshow->href 正在重复，我不希望它们重复。不要担心代码一切都是正确的，只有使用两个 foreach 语句才会重复。请让代码不重复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T19:57:00.777

花括号的威力...

```
foreach($html->find('ul.listings li a') as $tvshow) {
    $tvshows=preg_replace('/<span[^>]*>([\s\S]*?)<\/span[^>]*>/', '', $tvshow->innertext);

    foreach($html->find('li a span.epnum') as $e) {

        $query=mysql_query("insert into tvshow(count,author,tvshowname,imdblink,tvshowlink,description,year,image,imagetype,website,date,rating) 
                  values('$count','$author','$tvshows','$imdblink','$tvshow->href','$tvshowdescription','$e->innertext','$tvshowname','$tvshowtype','$website','$date','$rating')");
        if(!$query)
        {
            die(mysql_error());
        }
    }
} 
```

我怀疑你的 foreach 没有嵌套，因为你没有像你应该有的那样用大括号括起来。

按照您编写它们的方式，它会将它们解释为完全独立的循环。

循环 1：

```
foreach($html->find('ul.listings li a') as $tvshow) 
    $tvshows=preg_replace('/<span[^>]*>([\s\S]*?)<\/span[^>]*>/', '', $tvshow->innertext); 
```

循环 2：

```
 foreach($html->find('li a span.epnum') as $e) 

        $query=mysql_query("insert into tvshow(count,author,tvshowname,imdblink,tvshowlink,description,year,image,imagetype,website,date,rating) 
                  values('$count','$author','$tvshows','$imdblink','$tvshow->href','$tvshowdescription','$e->innertext','$tvshowname','$tvshowtype','$website','$date','$rating')");
        if(!$query)
        {
            die(mysql_error());
        } 
```

说得通？

# svg - 如何将 svg 代码保存为 .svg 图像？

> ID：12628968
> 
> 赞同：101
> 
> 时间：2012-09-27T19:46:53.810
> 
> 标签：svg

如何将以下 svg 代码保存为 .svg 图像

```
<svg width="100%" height="100%" version="1.1" xmlns="http://www.w3.org/2000/svg">

<defs>
<linearGradient id="fill" x1="0%" y1="0%" x2="0%" y2="100%">
<stop offset="0%" style="stop-color:rgb(224,224,224);stop-opacity:1"/>
<stop offset="100%" style="stop-color:rgb(153,153,153);stop-opacity:1"/>
</linearGradient>
</defs>

<path d="M 0 0 L 64 0 L 32 64 z" stroke="colourname" fill="url(#fill)"/>

</svg> 
```

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：190
> 
> 时间：2012-09-30T11:30:27.107

只需将其保存在文本文件中并给它一个 .svg 扩展名。

# c - c：读/写哈希表到文件

> ID：12628969
> 
> 赞同：0
> 
> 时间：2012-09-27T19:46:55.477
> 
> 标签：c, file, struct, io

我正在尝试使用 fwrite 将哈希表写入 C 中的文件并使用 fread 读取它。我有这个结构：

```
struct table {
    struct person *person_table[SIZE];
};
static struct table hashtable; 
```

当我使用 fread 时，我有

```
 fread(&hashtable, sizeof(struct table), 1, file) 
```

和 fwrite：

```
 fwrite(&hashtable, sizeof(struct table), 1, file) 
```

但是，我无法在读写后正确访问数据。问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T19:50:08.550

您不会将哈希表的数据写入文件。相反，您写入包含在指向`struct person`元素的指针中的地址，这些地址在反序列化后无效。

您还需要将数据写入文件（伪代码，假设`struct person`不包含更多指针）：

```
for (person_pointer in person_table) {
  fwrite(person_pointer, sizeof(person), 1, file);
} 
```

# jquery - 试图将 css 应用于 html 表并忽略我的 th

> ID：12628972
> 
> 赞同：0
> 
> 时间：2012-09-27T19:47:02.450
> 
> 标签：jquery, html, css, web

我正在使用表格排序插件，我的表格看起来很垃圾，所以我决定尝试设置它的样式。

不太擅长 css 我试图在网上找到一些预制设计，然后我找到了这个网站：

[http://www.csstablegenerator.com/](http://www.csstablegenerator.com/)

我从那里得到了我的 CSS 代码：

```
.CSSTableGenerator {

    margin:0px;padding:0px;

    width:100%;
    box-shadow: 10px 10px 5px #888888;

    border:1px solid #000000;

    -moz-border-radius-bottomleft:0px;

    -webkit-border-bottom-left-radius:0px;

    border-bottom-left-radius:0px;

    -moz-border-radius-bottomright:0px;

    -webkit-border-bottom-right-radius:0px;

    border-bottom-right-radius:0px;

    -moz-border-radius-topright:0px;

    -webkit-border-top-right-radius:0px;

    border-top-right-radius:0px;

    -moz-border-radius-topleft:0px;

    -webkit-border-top-left-radius:0px;

    border-top-left-radius:0px;

}.CSSTableGenerator table{

    width:100%;

    height:100%;

    margin:0px;padding:0px;

}.CSSTableGenerator tr:last-child td:last-child {

    -moz-border-radius-bottomright:0px;

    -webkit-border-bottom-right-radius:0px;

    border-bottom-right-radius:0px;

}

.CSSTableGenerator table tr:first-child td:first-child {

    -moz-border-radius-topleft:0px;

    -webkit-border-top-left-radius:0px;

    border-top-left-radius:0px;

}

.CSSTableGenerator table tr:first-child td:last-child {

    -moz-border-radius-topright:0px;

    -webkit-border-top-right-radius:0px;

    border-top-right-radius:0px;

}.CSSTableGenerator tr:last-child td:first-child{

    -moz-border-radius-bottomleft:0px;

    -webkit-border-bottom-left-radius:0px;

    border-bottom-left-radius:0px;

}.CSSTableGenerator tr:hover td{

}
.CSSTableGenerator tr:nth-child(odd){ background-color:#aad4ff; }

.CSSTableGenerator tr:nth-child(even)    { background-color:#ffffff; }
.CSSTableGenerator td{

    vertical-align:middle;

    border:1px solid #000000;

    border-width:0px 1px 1px 0px;

    text-align:left;

    padding:7px;

    font-size:10px;

    font-family:Arial;

    font-weight:normal;

    color:#000000;

}.CSSTableGenerator tr:last-child td{

    border-width:0px 1px 0px 0px;

}.CSSTableGenerator tr td:last-child{

    border-width:0px 0px 1px 0px;

}.CSSTableGenerator tr:last-child td:last-child{

    border-width:0px 0px 0px 0px;

}

.CSSTableGenerator tr:first-child td{

        background:-o-linear-gradient(bottom, #005fbf 5%, #003f7f 100%);    background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #005fbf), color-stop(1, #003f7f) );
    background:-moz-linear-gradient( center top, #005fbf 5%, #003f7f 100% );
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#005fbf", endColorstr="#003f7f");  background: -o-linear-gradient(top,#005fbf,003f7f);

    background-color:#005fbf;

    border:0px solid #000000;

    text-align:center;

    border-width:0px 0px 1px 1px;

    font-size:14px;

    font-family:Arial;

    font-weight:bold;

    color:#ffffff;

}

.CSSTableGenerator tr:first-child:hover td{

    background:-o-linear-gradient(bottom, #005fbf 5%, #003f7f 100%);    background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #005fbf), color-stop(1, #003f7f) );
    background:-moz-linear-gradient( center top, #005fbf 5%, #003f7f 100% );
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#005fbf", endColorstr="#003f7f");  background: -o-linear-gradient(top,#005fbf,003f7f);

    background-color:#005fbf;

}

.CSSTableGenerator tr:first-child td:first-child{

    border-width:0px 0px 1px 0px;

}

.CSSTableGenerator tr:first-child td:last-child{

    border-width:0px 0px 1px 1px;

} 
```

问题是他们想给我表格的代码，但我想使用我自己的代码，我无法将两者结合在一起。

他们希望我使用的代码是这样的：

```
<div class="CSSTableGenerator" >
    <table >
        <tr> 
            <td>
                Title 1
            </td>
            <td >
                Title 2
            </td>
            <td>
                Title 3
            </td>
        </tr>
        <tr>
            <td >
                Row 1
            </td>
            <td>
                Row 1
            </td>
            <td>
                Row 1
            </td>
        </tr>
        <tr>
            <td >
                Row 2
            </td>
            <td>
                Row 2
            </td>
            <td>
                Row 2
            </td>
        </tr>
        <tr>
            <td >
                Row 2
            </td>
            <td>
                Row 2
            </td>
            <td>
                Row 2
            </td>
        </tr>
        <tr>
            <td >
                Row 3
            </td>
            <td>
                Row 3
            </td>
            <td>
                Row 3
            </td>
        </tr>
    </table>
</div> 
```

当我尝试将它们混合在一起时，我得到了这个：

![在此处输入图像描述](../Images/1d522dce0fdd4f12225b92584166b76b.png)

如您所见，表格标题看起来是一行，而第一行看起来就像标题应该是什么...

经过调查，我注意到他们为预制表格提供的代码没有使用标题...我将我的代码改为 td 而不是 th 并且看起来不错。但我需要一个 th，因为首先它是正确的编程方式，其次我使用 jquery 插件对我的表进行排序，如果我没有 th，这会中断。

让 css 和我的 jquery 插件一起工作的任何简单方法。我应该只需要更改一些 css，但我尝试了一些不同的东西，这个 css 似乎很顽固，不容易改变。

任何帮助将不胜感激，谢谢！

忘记为我的表添加我的代码：

```
<table id=\"myTable\" class=\"tablesorter\" > 
<thead> 
<tr> 
    <th>Beer Name</th> 
    <th>User Rating</th> 
    <th> Your Rating</th>
</tr> 
</thead> 
<tbody>";

//database call was here, but taken out. Not important to table code

for($i = 0; $i<$FriendBeersNum;$i++){
    $row = $resultBeers->fetch_assoc();
    $fBeerName = $row['beerName'];
    $fBeerRating = $row['rating'];
    $fBeerID = $row['beerID'];

    $beerURL = "beerPage.php?id=$fBeerID";

    //another database call not needed for table help, just getting info for table

    if( $myBeerNum > 0){
        $rowMyBeer = $resultMyBeer->fetch_assoc();
        $myrating = $rowMyBeer['rating'];
    }

    else { $myrating = "N/A";}

    print "  

    <tr>   

    <td> <a href=\"$beerURL\"> $fBeerName </a>   </td>
    <td>  $fBeerRating  </td>
    <td>  $myrating    </td>

    </tr> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T19:50:07.457

如果您希望表格标题看起来与表格单元格相同，只需将标题添加到您已有的单元格样式即可。

但是在这个例子中，您实际上想要将现有的标题样式从 a 更改`td`为 a `th`。

所以这

```
.CSSTableGenerator tr:first-child td {
    styles here
} 
```

应该改为

```
.CSSTableGenerator tr:first-child th  {
    styles here
} 
```

只是为了整理一下，您应该删除`.CSSTableGenerator tr:first-child:hover td`并更改

```
.CSSTableGenerator tr:first-child td:first-child {
        border-width: 0px 0px 1px 0px
} 
```

至

```
.CSSTableGenerator tr:first-child td:first-child {
        border-width: 0px 1px 1px 0px
} 
```

这是一个小提琴 - [http://jsfiddle.net/ajcw/r5Prz/](http://jsfiddle.net/ajcw/r5Prz/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T19:51:53.010

您需要为标题使用`<th>`表头标签。还将css更改`:first-child tr td`为`:first-child tr th`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T19:52:05.010

在 CSS 文件中，替换：

```
.CSSTableGenerator tr:first-child td 
```

和：

```
.CSSTableGenerator thead tr th 
```

# c# - 更新语句没有命中数据库？

> ID：12628974
> 
> 赞同：0
> 
> 时间：2012-09-27T19:47:21.873
> 
> 标签：c#, asp.net, sql-server, database, visual-studio-2010

我刚开始使用我的 Visual Studio 2010，想要创建一个网站，我有 2 个下拉列表和 4 个文本框，用户可以从中输入数据和数据库应该更新但它没有发生，网格视图只是显示我的初始值的数据库。你能帮我得到想要的结果吗？

这是我的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web; 
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data.SqlClient;
using System.Data.Sql;

namespace AppForSis
{
    public partial class AppForSis : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected void Button1_Click(object sender, EventArgs e)
        {
            SqlConnection myConn = new SqlConnection(
               "Data Source=HOME-AA3742A183;Initial Catalog=master;"
               + "Integrated Security=True");
            myConn.Open();
            SqlCommand up = new SqlCommand(
                @"UPDATE 
                      [resource1] 
                  SET
                      [date_entered] = @d, 
                      [pass] = @p, 
                      [fail] = @f, 
                      [blocked] = @b  
                  WHERE  ([rname] = @r)  
                      AND ([mname] = @m)", 
                myConn);

            up.Parameters.AddWithValue("@d", date.Text);
            up.Parameters.AddWithValue("@p", pass.Text);
            up.Parameters.AddWithValue("@f", fail.Text);
            up.Parameters.AddWithValue("@b", blocked.Text);
            up.Parameters.AddWithValue("@r", resource.SelectedValue);
            up.Parameters.AddWithValue("@m", module.SelectedValue);
            up.ExecuteNonQuery();
            myConn.Close();

           GridView1.Visible = true;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T08:05:58.210

尝试重新绑定页面加载中的代码，但使用 if (!Page.IsPostBack) 这意味着您将在第一次加载时绑定数据库的新鲜状态，然后在更新后重新绑定更改。因此，您必须在 Button_Click 中的代码末尾使用 GridView1.DataBind()。请批准这已经解决了您的问题。

# javascript - 如何正确更新实时网站？

> ID：12628975
> 
> 赞同：0
> 
> 时间：2012-09-27T19:47:21.767
> 
> 标签：javascript, web-applications

假设我的网站页面上有用户。

我修改了一个 javascript 文件并更新了我的服务器。

问题是用户在重新加载页面之前不会注意到差异。

该怎么办？

生成一个令牌，对所有请求进行比较以检测过时的代码，并重新加载页面以通过重定向请求？

如果没有请求发送到服务器？如何更新 javascript 文件？不时检查应用程序的版本是否已更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T19:49:52.793

我建议使用彗星之类的东西 [http://en.wikipedia.org/wiki/Comet_%28programming%29](http://en.wikipedia.org/wiki/Comet_%28programming%29)

这样您就不必专门重新加载用户页面。

# javascript - 选择日期时，JQuery Datepicker 未正确更新我的 var

> ID：12628976
> 
> 赞同：0
> 
> 时间：2012-09-27T19:47:22.690
> 
> 标签：javascript, jquery, jquery-ui, javascript-framework

我似乎一辈子都无法让它正常工作。

执行 jQuery 时，它工作正常，并且第一次设置 var（文本）就好了。

然后，如果再次调用它，它会保留原始文本并且不会改变，当然，除非我要刷新网页。

如何修改代码，以便将 var 文本设置为应有的值？

```
var sdate, text

//....1)
        $(document).on('keypress', function (e){ if(e.which === 13 && $('#dd').dialog('isOpen') === true) { $('.ui-state-active').click(); } }); 
        $('#dd').dialog({ autoOpen: true, modal: true, overlay: { opacity: 1.0, background: 'black' }, title: "SELECT A NEW DUE DATE", height: 235, width: 235, draggable: false, resizable: false});

        $('#d1').datepicker({
            onSelect: function() {

                sdate = $(this).val();

                text = 'THIS IS THE ORIGINAL TEXT WHEN A DATE IS SELECTED IN THE DATEPICKER'

                $("#dd").dialog("close");

             }//end of onSelect: function() {
        });//end of datepicker

//....2)
        $(document).on('keypress', function (e){ if(e.which === 13 && $('#dd').dialog('isOpen') === true) { $('.ui-state-active').click(); } }); 
        $('#dd').dialog({ autoOpen: true, modal: true, overlay: { opacity: 1.0, background: 'black' }, title: "SELECT APPROVAL DATE", height: 235, width: 235, draggable: false, resizable: false});

        $('#d1').datepicker({
            onSelect: function() {

                sdate = $(this).val();

                text = 'THE TEXT NEVER CHANGES FOR SOME ODD REASON AND CANT SEEM TO FIGURE OUT WHY'

                $("#dd").dialog("close");

             }//end of onSelect: function() {
        });//end of datepicker 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T20:23:51.107

您两次引用相同的 id (#d1) ...第二个日期选择器应该引用第二个文本框。快速解决。也许是复制和粘贴剩余的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T20:07:32.233

问题是你调用`datepicker`了同一个 HTML 元素（我假设一个输入）两次。第二段代码中的 onSelect 永远不会运行。看到这个[jsFiddle](http://jsfiddle.net/ChUc3/)

你需要做的是有一个第二个`<input>`标签，它也是一个日期选择器，或者想出另一种方式。

# .net - 为什么 Dapper dot net 不打开和关闭连接本身？

> ID：12628983
> 
> 赞同：23
> 
> 时间：2012-09-27T19:47:53.230
> 
> 标签：.net, connection-pooling, sqlconnection, dapper

Dapper 隐含地期望连接在使用时打开。为什么它不能自己打开和关闭？这不是简单的连接管理吗？

我问是因为我和一位同事一直在反复讨论连接池在幕后发生的事情的性质，以及在多个命令之间保持连接打开或打开和关闭它是否有任何好处对于每个命令。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-09-27T20:01:04.410

Dapper 现在（并且在相当长的一段时间内）在内部处理这个问题。它只是工作™</p>

* * *

原始（过时）答案：

你没有错。我没有注意到这种不便的原因是，由于遗留原因（特别是：我们曾经专门使用 LINQ-to-SQL），我们的主要类似连接的东西是`DataContext`- 所以我们将 dapper 方法重新公开为扩展方法`DataContext`.

愚蠢的是：这些方法的作用是：

```
using(db.Connection.EnsureOpen()) {
    db.Connection.{the dapper method}
} 
```

这里 EnsureOpen 是一个厚颜无耻的方法：

*   如果连接打开，则返回 null
*   否则，它打开连接，并返回一个 IDisposable 令牌，完成后关闭连接

所以：我们显然*完全*感受到了你的痛苦，但我们更进一步地实施了它。

请将此记录为功能请求。我们*拥有*所有代码（尽管我需要稍微调整一下以适应非缓冲数据的“阅读器”）——dapper 绝对没有理由不能拥有它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-02T11:26:14.057

我必须在这里添加一个相反的答案，或者至少建议 Dapper 可能会以不同的方式处理连接，如果只是在某些情况下。我刚刚反映了 Dapper.SqlMapper 并且在 ExecuteCommand 方法中进行了检查（由 Execute 调用（在公共 api 上））以检查连接是否关闭，然后打开它，如果不是。

我在同事的代码审查中发现了这一点，强调我在通过 dapper 调用数据库之前没有明确调用 connection.open。这没有被采纳，因为我的集成测试都是绿色的，在运行时一切都是笨拙的。所以我们深入研究了 Dapper 代码。有人可能会争辩说，为了明确性而调用 open 更好，但相反，有些人可能会争辩说代码越少越好。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-27T19:56:34.833

我相信 Dapper 不会管理您的连接，因为它超出了它作为 ORM 映射器的职责。Dapper 不知道您以后是否会重用相同的连接 - 这就是它接受连接作为参数之一的原因。这同样适用于事务 - 应该管理它的是应用程序，而不是 ORM 映射器。

编写自己的管理连接的扩展方法很简单。

# excel - excel图表OX上的值之间的不同空间

> ID：12628984
> 
> 赞同：1
> 
> 时间：2012-09-27T19:47:55.713
> 
> 标签：excel, charts

尝试使用数据制作折线图

```
X Y
1 12
3 34
5 56
6 68
9 79
14 98 
```

是否可以在水平轴上制作不同的spacec？因为现在 1 和 3、9 和 14 等之间是相同的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T03:15:29.200

正如蒂姆威廉姆斯在他的评论中所说，他应该做出一个完整的答案：

使用 Excel XY（散点图）图表。折线图将 X 值视为非数字标签，而 XY 图将 X 和 Y 视为连续数字变量。XY 和折线图中的线条和标记的格式可以相同。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-16T06:56:01.983

要创建具有不同间距条形的条形图，请在 x、y 对之间插入空行，以便行中数据的间距反映 x 点之间的距离。例如，如果 [1, 12] 对位于单元格 A1:B1 中，则将 [3, 34] 对放在两行下方，在单元格 A3:B3 中；[5, 56] 将进入 A5:B5 等。

这可能会产生看起来太窄的条形。您可以通过首先左键单击其中一个条以将它们全部选中，然后右键单击并选择“格式化数据系列”来增加条的宽度。系列选项中的第二个滑块将更改图表的条形宽度。

# php - 在 OpenCart 信息页面中允许 HTML

> ID：12628985
> 
> 赞同：1
> 
> 时间：2012-09-27T19:47:57.353
> 
> 标签：php, opencart

我想允许将 HTML 代码放置在 Opencart 站点的信息页面上。现在看起来好像 HTML 正在通过 htmlspecialchars() 运行，我希望它是评论等的情况，但不是信息页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T20:44:11.963

只要改成`source`所见即所得编辑器上的就可以放html

# servicestack - 具有多个用户/密码的 ServiceStack CredentialAuthProvider

> ID：12628990
> 
> 赞同：4
> 
> 时间：2012-09-27T19:48:19.003
> 
> 标签：servicestack

我想使用自定义身份验证提供程序，但我不知道如何使标准身份验证内容更多地处理用户和密码作为参数。

这可以做到吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T20:18:16.697

取决于你想要做什么，如果你想通过从 CredentialsAuthProvider 继承来创建自己的自定义身份验证提供程序，你可以通过`IHttpRequest`对象访问不同的请求参数：

```
public virtual bool TryAuthenticate(IServiceBase authService, 
    string userName, string password)
{
    var httpReq = authService.RequestContext.Get<IHttpRequest>();
    var fromQueryString = httpRequest.QueryString["CustomField"];
    var fromPostData = httpRequest.FormData["CustomField"];
    var fromEither = httpRequest.GetParam("CustomField"); //Ext method
} 
```

以下是一些其他相关问题和答案，展示了自定义 ServiceStack 内置身份验证的不同方法：

*   [如何扩展 ServiceStack 身份验证](https://stackoverflow.com/questions/11117469/how-can-i-extend-servicestack-authentication)
*   [使用数据库中的数据填充 IAuthSession](https://stackoverflow.com/questions/12594048/populating-iauthsession-with-data-from-the-database)

# javascript - 使用 Google Maps API 进行地理编码 - 更新现有标记而不是添加另一个

> ID：12628994
> 
> 赞同：3
> 
> 时间：2012-09-27T19:48:33.763
> 
> 标签：javascript, google-maps-api-3, geocode

在地理编码时，您如何简单地将现有标记移动到新地理编码结果的结果中。

让我们看这个例子：

*   加载地图时，会出现一个标记
*   当有人进行地理编码时，标记会移动到结果
*   标记是可拖动的，因此用户可以进一步移动标记（如果他们愿意）
*   也许他们想重新对位置进行地理编码，因此新结果应自动移动现有标记。

在此示例中：

[https://google-developers.appspot.com/maps/documentation/javascript/examples/geocoding-simple](https://google-developers.appspot.com/maps/documentation/javascript/examples/geocoding-simple)

...为每个新的地理编码绘制一个新的标记。

那有意义吗？

谢谢！！！

-m

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T19:55:12.027

1.  使标记全局化。
2.  在创建新的之前检查它是否存在。
3.  如果存在，请使用 .setPosition 将其移动到新位置
4.  如果它不存在，请在所需位置创建一个标记。

[做一些接近你想要的事情的例子](http://www.geocodezip.com/v3_FusionTables_geocoder_PointInPolygon.html)

工作代码片段：

```
var map = null;
var marker = null;
var geocoder = new google.maps.Geocoder();
var infowindow = new google.maps.InfoWindow({pixelOffset: new google.maps.Size(0,-34)});

function initialize() {
  map = new google.maps.Map(document.getElementById('map-canvas'), {
    center: new google.maps.LatLng(42, -85),
    zoom: 4
  });
}

function codeAddress() {
  var address = document.getElementById('address').value;
  geocoder.geocode({
    'address': address
  }, function(results, status) {
    if (status == google.maps.GeocoderStatus.OK) {
      map.setCenter(results[0].geometry.location);
      content = results[0].formatted_address;
      infowindow.setContent(content);
      if (marker && marker.setPosition) {
        marker.setPosition(results[0].geometry.location);
      } else {
        marker = new google.maps.Marker({
          map: map,
          icon: {
            url: 'http://maps.google.com/mapfiles/arrow.png',
            anchor: new google.maps.Point(10, 34)
          },
          position: results[0].geometry.location
        });
        google.maps.event.addListener(marker, 'click', function(evt) {
          infowindow.open(map);
        });
      }
      infowindow.setPosition(results[0].geometry.location);
      infowindow.open(map);
    } else {
      alert('Your search was not successful for the following reason: ' + status);
    }
  });
}
google.maps.event.addDomListener(window, 'load', initialize);
```

```
html,
body,
#map-canvas {
  height: 500px;
  width: 500px;
  margin: 0px;
  padding: 0px
}
```

```
<script src="https://maps.googleapis.com/maps/api/js?v=3"></script>
<input id="address" value="New York, NY" />
<input id="geocode" type="button" value="Find" onclick="codeAddress()" />
<div id="map-canvas"></div>
```

# wso2 - 您如何配置 WS02 以在不同的环境中使用不同的端点 URI？

> ID：12628998
> 
> 赞同：1
> 
> 时间：2012-09-27T19:48:48.067
> 
> 标签：wso2, wso2esb

我们目前正在评估多个 ESB 产品（Mule、Fuse 和 WSO2），我们的关键要求之一是在多个环境之间轻松迁移服务。我可以看到在 WSO2 中大部分情况下如何使用 g-reg 完成此操作，但我很难看到我们将如何参数化端点 uris 并在每个环境中单独维护它们？（这在 Mule 和 Fuse 中似乎相当微不足道）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T06:57:57.860

首选方式是：

*   创建/保存所有端点作为注册表资源（使用管理控制台或 Developer Studio）
*   由于端点保存在注册表中，现在 ESB 配置完全独立于环境。（我们可以由此创建一个Carbon应用程序，基本上可以部署在任何环境中）
*   因此，如果您需要从 dev->qa 移动配置，您可以使用创建的相同 .car 文件