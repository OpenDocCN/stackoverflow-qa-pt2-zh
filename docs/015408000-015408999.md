# StackOverflow 问答 15408000-15408999

# android - 如何使用 javascript 从 phone-gap 访问 sq-lite 数据库

> ID：15408000
> 
> 赞同：0
> 
> 时间：2013-03-14T11:30:03.360
> 
> 标签：android, cordova

我需要从位于**data/data/mypackage/databases/mydb**的 .sqlite 文件中访问数据。mydb 是数据库文件，在这里我想使用 javascript 从这个数据库中检索数据。如何做到这一点，任何人帮助我。是否可以从 .sqlite 文件中检索数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:03:13.907

Web SQL 数据库 API 实际上并不是 HTML5 的一部分，因此只需使用 opendatabase 方法， var db = openDatabase('mydb', '1.0', 'Test DB', 2 * 1024 * 1024);

方法采用以下五个参数：

```
Database name
Version number
Text description
Size of database
Creation callback 
```

更多详情[链接](http://www.tutorialspoint.com/html5/html5_web_sql.htm)

# magento - Magento 如何缓存 productCollection

> ID：15408003
> 
> 赞同：6
> 
> 时间：2013-03-14T11:30:18.303
> 
> 标签：magento, caching, apc

我注意到我的主页需要很长时间才能加载——根据 site24x7.com，实际上超过 6 秒，所以我一直在关闭元素以尝试确定原因，这取决于我制作的 2 个产品集合文件展示新产品和畅销产品。

一旦我从主页中删除这些，页面会在不到 0.5 秒的时间内加载。

那么，任何人都可以帮助优化和缓存 productCollection 吗？我在服务器上安装并运行了 APC，但我不确定它是否正在缓存位于 app/design/frontend/default/MY_THEME/catalog/product/newproducts.phtml 中的文件

所以，我的畅销系列（实际上是观看次数最多）看起来像这样；

```
 <?php $storeId = Mage::app()->getStore()->getId(); // return current store id  ?>
    <?php $_productCollection= Mage::getResourceModel('reports/product_collection')
    ->addAttributeToSelect('*')
    ->addStoreFilter($storeId)
    ->addViewsCount()
    ->addFieldToFilter('visibility', Mage_Catalog_Model_Product_Visibility::VISIBILITY_BOTH)
    ->addFieldToFilter('status',Mage_Catalog_Model_Product_Status::STATUS_ENABLED);
    $_productCollection->getSelect()->limit(8)
    ?> 
```

我该如何进一步优化呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T12:52:44.213

尝试

```
 $storeId = Mage::app()->getStore()->getId(); 
  $cache = Mage::getSingleton('core/cache');
  $key = 'homepage-most-view-' . $storeId;

  if(! $data = $cache->load($key)){
      $_productCollection= Mage::getResourceModel('reports/product_collection')
      ->addAttributeToSelect('*')
      ->addStoreFilter($storeId)
      ->addViewsCount()
      ->addFieldToFilter('visibility', Mage_Catalog_Model_Product_Visibility::VISIBILITY_BOTH)
      ->addFieldToFilter('status',Mage_Catalog_Model_Product_Status::STATUS_ENABLED);
      $_productCollection->getSelect()->limit(8)
      // get the element you need from  $_productCollection and store in $array
      $data = serialize($array);
      $cache->save(urlencode($data), $key, array("homepage_cache"), 60*60*24);
  }
  else{
      $data = unserialize(urldecode($data)); 
 } 
```

看

*   [http://www.nicksays.co.uk/developers-guide-magento-cache/](http://www.nicksays.co.uk/developers-guide-magento-cache/)
*   [http://inhoo.net/ecommerce/magento/magento-block-caching/](http://inchoo.net/ecommerce/magento/magento-block-caching/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-01-11T08:12:41.377

如果你想缓存 $collection，Magento 已经内置了集合缓存的可能性。

```
 $_productCollection= Mage::getResourceModel('reports/product_collection');

$cache = Mage::app()->getCache(); //Let's get cache instance
        $cache->setLifetime(86400); //Here we set collection cache lifetime
        $_productCollection->initCache(
            $cache,
            'Bestsellers_', //this is just custom prefix
            array('collections') 
        );
    } 
```

上述代码的信用：apiworks.net（[http://www.apiworks.net/2015/01/magento-collection-caching.html](http://www.apiworks.net/2015/01/magento-collection-caching.html)）

# css - 头像 - 作者框 - 未对齐的 CSS

> ID：15408004
> 
> 赞同：0
> 
> 时间：2013-03-14T11:30:17.953
> 
> 标签：css

帖子后向下滚动到可以看到作者红色边框头像的位置：http: [//designportugal.net/transformar-leads-em-vendas/](http://designportugal.net/transformar-leads-em-vendas/)

头像图像未对齐。它在文本下方。我想将它与它对齐。

这是我尝试过的：

```
.img-frame.left,
#container .img-frame.left {
float: left !important;
margin: -55px 20px 5px 0;
} 
```

**-55px**当前设置为 5px。如果我将其更改为 -55px，则帖子开头的图像会搞砸，因此我无法触摸此选择器。

我也试过这个：

```
.img-frame .alignright,
.img-frame .alignleft,
.img-frame .alignnone,
.img-frame .aligncenter {
margin: 0px 0px 0px 20px; 
```

上边距之前设置为 90px。在 Chrome 的检查器上将其更改为 0px 看起来可以修复它，但如果在我的 CSS 文件上更改它也不起作用。

我没主意了。请注意，这是一个 wordpress 安装。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:41:55.493

试试这个：

```
img.alignleft.avatar.avatar-80.photo{
  margin: 0px 0px 0px 20px;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:14:25.830

它似乎正在删除：

```
.img-frame .alignleft 
```

从：

```
.img-frame .alignright, .img-frame .alignleft, .img-frame .alignnone, .img-frame .aligncenter {
margin: 90px 0px 0px 20px;
} 
```

通过在 Chrome 中进行简短检查即可工作。

或者只是设置：

```
.img-frame .alignleft {
    margin:0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T15:53:27.117

这最终自己解决了。CSS 没有更新，但最终更新了——这不是缓存问题，他只是没有更新代码差异。多么奇怪的主题。

# sql - SQL选择1列的结果作为临时表中的列

> ID：15408008
> 
> 赞同：2
> 
> 时间：2013-03-14T11:30:32.197
> 
> 标签：sql, sql-server, sql-server-2008

我有两张桌子`T1`，`T2`

`T1`有属性`id pk, T2_id fk, Question`
`T2`有属性`id pk, QuestionResponse`

我想通过对 question from 的选择查询`T1`，将查询的结果（问题）作为列存储到临时表中，并`QuestionResponse`作为值。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:25:15.373

从一个表插入到另一个表的语法是：

```
insert into OneTable
(field1, field2, etc)
select field_1, field_2, etc
from OtherTables
etc 
```

但是你应该看看你到目前为止做了什么。我觉得很奇怪。

例如，您的问题表中的答案有一个外键。不应该是反过来吗。

另外，T2 真的是临时表吗？

# vbscript - ExecuteGlobal 预期语句错误 VBscript

> ID：15408011
> 
> 赞同：1
> 
> 时间：2013-03-14T11:30:47.790
> 
> 标签：vbscript, include

我想将一个 VBscript 包含到另一个 VBscript 中（有点模拟 VBS 中的 OO），在网上找到了一些东西，对我来说似乎还可以。我不断收到“预期语句”错误`ExecuteGlobal`：

```
Dim scriptLocation

Sub Main
    scriptLocation ="script2.vbs"
    Include(scriptLocation)
End Sub

Sub Include (strFile)
    Dim fsObj : Set fsObj = CreateObject("Scripting.FileSystemObject")
    Dim vbsFile : Set vbsFile = fsObj.OpenTextFile(strFile, 1, False)
    Dim myFunctionsStr : myFunctionsStr = vbsFile.ReadAll
    vbsFile.Close
    Set vbsFile = Nothing
    Set fsObj = Nothing
    ExecuteGlobal myFunctionsStr
End Sub 
```

有人知道吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T15:47:37.693

一行上的错误消息`ExecuteGlobal`可能意味着：

1.  `ExecuteGlobal`你成功地把声明搞砸了。`Include`最可靠的方法：像对Sub 调用一样添加 param list ()
2.  您加载的代码`myFunctionStr`是罪魁祸首。如果您进行链接/多重包含 VBScript 错误处理的“功能”，则很难找到罪魁祸首。简单的出路：使用 cscript 运行“库”文件。

顺便说一句：OOP 和包含代码（库/模块）之间没有必要的关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T16:28:40.023

内置 sub 没有任何问题`ExecuteGlobal`。尝试这个：

```
ExecuteGlobal "*" 
```

这将带来*预期的语句*错误。但是，如您所见，问题在于字符串内部。因此，只需调试您的*script2.vbs*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-23T10:39:47.203

尝试在 HexEditor 中打开 script2.vbs。如果您的脚本以 UTF-8 编码，则文件开头包含 0x{ef bb bf}。方法 .ReadAll 从文件中读取所有内容到 myFunctionStr，包括 3 个字节。从字符串中删除该字节或将您的 script2.vbs 转换为 ANSI。

# jquery - 如何使用按钮关闭颜色框

> ID：15408020
> 
> 赞同：1
> 
> 时间：2013-03-14T11:31:13.480
> 
> 标签：jquery, button, iframe, colorbox

我使用彩盒 iframe：

```
$(document).ready(function(){
    $(".iframe").colorbox({iframe:true, width:"85%", height:"65%", fastIframe:false});      
}); 
```

在我的第二页上，我有一个按钮，我想在其中发布一些图像，并且在操作之后我想关闭框架窗口。

```
<input type="button" id="selected" value="the_button" /> 
```

和脚本

```
$( document ).ready(function() {

    $("#selected").bind('click',function() {

        window.setTimeout(function() 
        {
            $.colorbox.close(); 
        }, 2500);

        alert('hi');

    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:51:16.930

试试这样：

```
$( document ).ready(function() {

    $("#selected").bind('click',function() {

        window.setTimeout(function() 
        {
           parent.$.colorbox.close();
        }, 2500);

    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-12T07:21:56.423

我面临同样的问题，我用`$('#cboxClose').remove();` 它为我工作。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-05-26T09:43:28.173

将此添加到您的 HTML：

```
<a href="#" onClick="$.colorbox.close();">Close Colorbox</a> 
```

# zend-framework2 - Zend Framework 2：尝试访问 localhost 时出现 403 禁止错误

> ID：15408021
> 
> 赞同：2
> 
> 时间：2013-03-14T11:31:14.377
> 
> 标签：zend-framework2, localhost, http-status-code-403

大家好，我是 Zend Framework 的新手，显然无法使其工作。

当我尝试访问 localhost 时，浏览器会向我抛出 403 禁止访问错误。这是我的虚拟主机文件：

```
 NameVirtualHost *:80
<VirtualHost *:80>
    ServerName zf2-tutorial.localhost
    DocumentRoot /var/www/html/zf2-tutorial/public
    SetEnv APPLICATION_ENV "development"
    <Directory /var/www/html/zf2-tutorial/public>
        Options +Indexes +FollowSymLinks +ExecCGI
    DirectoryIndex index.php
        AllowOverride All
        Order allow,deny
        Allow from all
    </Directory>
</VirtualHost> 
```

我的 htacces 文件位于 /var/www/html/zf2-tutorial/ 上的 zend 应用程序文件夹内的公共目录中：

```
RewriteEngine On
# The following rule tells Apache that if the requested filename
# exists, simply serve it.
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
# The following rewrites all other queries to index.php. The 
# condition ensures that if you are using Apache aliases to do
# mass virtual hosting, the base path will be prepended to 
# allow proper resolution of the index.php file; it will work
# in non-aliased environments as well, providing a safe, one-size 
# fits all solution.
RewriteCond %{REQUEST_URI}::$1 ^(/.+)(.+)::\2$
RewriteRule ^(.*) - [E=BASE:%1]
RewriteRule ^(.*)$ %{ENV:BASE}index.php [NC,L] 
```

我对该目录上的所有文件也拥有 775 权限。然而，apache error_log 似乎不这么认为：

```
[Thu Mar 14 12:15:48.751980 2013] [core:crit] [pid 5755] (13)Permission denied: [client 127.0.0.1:60849] AH00529: /var/www/html/zf2-tutorial/public/.htaccess pcfg_openfile: unable to check htaccess file, ensure it is readable and that '/var/www/html/zf2-tutorial/public/' is executable 
```

最后，我还在 httpd.conf 上设置了 FileInfo 以允许 htaccess 读取。

那么，这里发生了什么的任何线索？谢谢！

**更新：**我发布了 /var/www/html/zf2-tutorial/public 文件夹的文件列表及其权限：

```
total 28
drwxrwxr-x. 5 gerard root 4096 mar 14 14:01 .
drwxr-xr-x. 7 gerard root 4096 mar 14 11:20 ..
drwxrwxr-x. 2 gerard root 4096 ene 31 17:19 css
-rwxrwxr-x. 1 gerard root  711 mar 14 12:25 .htaccess
drwxrwxr-x. 2 gerard root 4096 ene 31 17:19 images
-rwxrwxr-x. 1 gerard root  303 ene 31 17:19 index.php
drwxrwxr-x. 2 gerard root 4096 ene 31 17:19 js 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-23T03:29:06.090

我在使用 EasyPHP DevServ 14 时遇到了同样的问题。

问题来自 httpd.conf 文件中的缺失行

**要求所有授予**

```
<Directory "PATH TO YOUR DIR">
    Options FollowSymLinks Indexes
    AllowOverride All
    Order deny,allow
    Allow from any
    Deny from none
    Require all granted
</Directory> 
```

希望能帮助到你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-18T12:53:31.627

在虚拟主机设置中确保您已添加

```
 Require all granted 
```

但还要确保您的 DocumentRoot 路径是正确的，并且您已经为 Xampp 用户包含了类似的内容：

DocumentRoot "C:/xampp/htdocs/zf2-tutorial/public"

启用访问

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-12T08:10:01.793

您确定您的 Apache 服务器运行正常吗？如果 apache 服务器关闭 php 文件将无法执行并显示为文本

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T19:52:12.383

好的问题解决了！是 SELinux 禁止访问这些文件，所以我只是做了它建议我在 bash 上做的事情：

```
1\. /sbin/restorecon -v /var/www/html/zf2-tutorial/public/.htaccess 
2\. setsebool -P httpd_read_user_content 1 
```

但现在我有一个更严重的问题！浏览器“字面上”显示 index.php 的内容，而不是加载脚本本身。浏览器窗口只是将其显示为文本：

```
 <?php
/**
 * This makes our life easier when dealing with paths. Everything is relative
 * to the application root now.
 */
chdir(dirname(__DIR__));

// Setup autoloading
require 'init_autoloader.php';

// Run the application!
Zend\Mvc\Application::init(require 'config/application.config.php')->run(); 
```

知道发生了什么吗？谢谢！

# sql - SQL 添加具有递增值的新可编辑（非身份）列

> ID：15408022
> 
> 赞同：2
> 
> 时间：2013-03-14T11:31:21.607
> 
> 标签：sql, sql-server, tsql

我有一个 SQL Server 表，我想在我的表中添加一个新列，用于自定义排序。不是标识列，因为我需要能够在创建后更改值。

我的桌子是

```
CREATE TABLE [dbo].[Ponies] (
    [Name] [nvarchar](50) NOT NULL
) 
```

使用类似的数据`[{Name: Rarity},{Name: Applejack}]`。

我希望我的桌子会变得像

```
CREATE TABLE [dbo].[Ponies] (
    [Name] [nvarchar](50) NOT NULL,
    [IndexNumber] [int] NOT NULL
) 
```

我希望数据`[{Name: Rarity, IndexNumber:1},{Name: Applejack, IndexNumber:2}]`在 alter 语句之后。关键是创建后可以更改行的顺序，这意味着添加新行时可以更改旧行的顺序。

我该如何执行该`ALTER`语句以便`IndexNumber`为每个现有数据项添加增量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T11:34:08.110

试试这个：

```
ALTER TABLE dbo.Ponies
ADD IndexNumber INT IDENTITY(1,1) NOT NULL 
```

这会在您的表中添加一个“身份”列 - 每行从 1 开始编号，递增 1。它将为所有插入的新行自动设置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T11:42:34.903

如果你想要一个`editable column`（*不是身份列*），那么试试这样：

[**小提琴演示在这里**](http://sqlfiddle.com/#!3/138dd/3)

```
alter table dbo.Ponies
add [IndexNumber] int not null default 0
Go

declare @index int = 0 
update dbo.Ponies set @index = [IndexNumber] = @index + 1

select * from dbo.Ponies 
```

# javascript - 循环遍历二维数组以获取第二列值

> ID：15408024
> 
> 赞同：2
> 
> 时间：2013-03-14T11:31:22.460
> 
> 标签：javascript, arrays, loops

```
var linkArray = [
['boothsizeDiv_link', false],
['furnishingsprovidedDiv_link', false],
['electricalDiv_link', false],
['rentalfurnishingsDiv_link', false],
['gesgraphicsDiv_link', false],
['geslaborDiv_link', false],
['contractorDiv_link', false],
['carpetingDiv_link', false],
['boothlightingDiv_link', false],
['javitsDiv_link', false],
['boothsealDiv_link', false],
['mannequinsDiv_link', false],
['calcDiv_link', false]
]; 
```

我如何循环遍历该数组以从该数组中获取所有“假”值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T11:35:46.237

使用循环

```
for (var i=0;i<linkArray.length;i++)
{
     document.write(linkArray[i][1] + "<br>");

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T11:35:40.017

如果你只想要一个布尔值列表，你可以使用这个：

```
var falseValues = [];//this will be your list of false values

for(var i = 0; i < linkArray.length; i++){
    var link = linkArray[i];
    //test the value at array index 1 (i.e. the boolean part)
    if(!link[1]){
       falseValues.push(link[1]);//add the false to the list
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T11:48:57.233

从变量名、字符串值和数组结构来看，使用对象而不是数组可能是更好的方法：

```
var linkObject = {
 boothsizeDiv_link: false,
 furnishingsprovidedDiv_link: false,
 electricalDiv_link: false,
 rentalfurnishingsDiv_link: false,
 gesgraphicsDiv_link: false,
 geslaborDiv_link: false,
 contractorDiv_link: false,
 carpetingDiv_link: false,
 boothlightingDiv_link: false,
 javitsDiv_link: false,
 boothsealDiv_link: false,
 mannequinsDiv_link: false,
 calcDiv_link: false
}; 
```

现在您可以像这样获取布尔值的数组：

```
var ret = [];
for (var propertyName in linkObject) {
    ret.push(linkObject[propertyName]);
} 
```

但是你也可以像这样得到一个特定的值：

```
linkObject['boothsizeDiv_link'] 
```

产生`false`。

# c# - wkhtmltopdf 的 PDF 生成问题

> ID：15408027
> 
> 赞同：0
> 
> 时间：2013-03-14T11:31:29.987
> 
> 标签：c#, pdf-generation, wkhtmltopdf

在 PDF 生成的帮助下存在问题`wkhtmltopdf.exe`

这是我的代码：

```
public bool WKHtmlToPdf(string Url, string outputFilename)
{
    string filename = "E:\\XYZ" + "\\" + outputFilename + ".pdf";

    var p = new System.Diagnostics.Process();
    p.StartInfo.FileName = ConfigurationManager.AppSettings["HtmlToPdfExePath"];

    string switches = "--print-media-type ";
    switches += "--margin-top 4mm --margin-bottom 4mm --margin-right 0mm --margin-left 0mm ";
    switches += "--page-size A4 ";
    switches += "--no-background ";
    switches += "--redirect-delay 100";

    p.StartInfo.Arguments = switches + string.Format(" --\"{0}\" --", Url) + " " + filename;

    p.StartInfo.UseShellExecute = false; // needs to be false in order to redirect output
    p.StartInfo.RedirectStandardOutput = true;
    p.StartInfo.RedirectStandardError = true;
    p.StartInfo.RedirectStandardInput = true; // redirect all 3, as it should be all 3 or none
    p.StartInfo.WorkingDirectory = StripFilenameFromFullPath(p.StartInfo.FileName);

    p.Start();

    string output = p.StandardOutput.ReadToEnd();

    p.WaitForExit(60000);

    // read the exit code, close process

    byte[] buffer = p.StandardOutput.CurrentEncoding.GetBytes(output);
    Response.ContentType = "application/pdf";
    Response.AddHeader("Content-Disposition", "inline;filename=download.pdf");
    Response.BinaryWrite(buffer);
    Response.End();

    int returnCode = p.ExitCode;
    p.Close();

    return true;
} 
```

我把这个函数称为：

```
WKHtmlToPdf(Request.Url.GetLeftPart(UriPartial.Authority) + "/SavePDF.aspx?PID="
           + Request.QueryString["PID"].ToString(), "MyInvoice"); 
```

HTML 所在的页面位于：`http://localhost:61493/SavePDF.aspx?PID=10`

我的输出 PDF 文件是：`MyInvoice`

但我得到：

> PDF 文档可能无法正确显示。

可能是什么问题..？

# iphone - Uikit (OpenGL) 中的 Cocos2D 2.0 问题

> ID：15408030
> 
> 赞同：0
> 
> 时间：2013-03-14T11:31:42.197
> 
> 标签：iphone, ios, objective-c, opengl-es, cocos2d-iphone

我有一个大问题，我找不到任何解决方案，所以这就是我寻求帮助的原因。

我正在开发一个包含多个小应用程序的项目，其中大部分是在 UIKit 中制作的，其中大部分是在一些辅助函数的帮助下在 openGL ES 1.0/1.1（不确定）中制作的。我必须开发一些需要碰撞检测和动画的游戏，所以我认为 cocos2d 就可以了。

我设法导入 cocos2d 2.0 并使其正常运行，从菜单中选择游戏将启动导演和 cocos2d 场景，当我想退出它时，我调用 [_director end] 并返回菜单，这也是在 openGL ES 中。

问题是，有时，它主要是随机发生的，我在导演结束调用时收到 0x500 GL 错误，导致菜单变成白色，但仍然响应触摸。

这是我尝试解决此问题的第三天。这是我尝试过的： - 由于 cocos2d 2.0 使用 open GL ES 2.0 而我的菜单是 GL ES 1.0，我认为这是它们之间的冲突，所以我使用了 cocos2d 1.x，但这带来了更多问题，而且它不应该发生冲突当 cocos2d 场景出现在屏幕上时，菜单的 glview 会暂停。

*   当我每次启动 cocos2d 时启用 cocos2d_debug 时，我也会收到这些错误。

    cocos2d：表面尺寸：0x0

    cocos2d：无法使完整的帧缓冲区对象0x0

我从字面上尝试了我在网络上所能做的一切。

这是我用来运行/关闭 cocos2d 的代码

```
// start cocos2d
    _director = (CCDirectorIOS*)[CCDirector sharedDirector];
    CCGLView *glView = [CCGLView viewWithFrame:CGRectMake(0, 0, 320, 480)
                                     pixelFormat:kEAGLColorFormatRGBA8
                                     depthFormat:0 /* GL_DEPTH_COMPONENT24_OES */               
                              preserveBackbuffer:NO                                             
                                      sharegroup:nil                                                
                                   multiSampling:NO                                         
                                 numberOfSamples:0
   [_director setView:glView];
   [_director setDelegate:self];
   [[_delegate glViewAccess] addSubview:glView]; // the glviewacces is the app menu select view

//stop cocos2d
   [_director end];

   // this call restarts the app menu select view update and draw functions and 
   // releases the current instance of the object used to start cocos2d, 
   // releasing the cocos2d scene as well
   [_delegate unloadApplication]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:37:40.090

首先，不要混合使用 OpenGL v1.1 和 2.0 代码。小猫*会*死。

其次，不要调用`[director end]`——真的没必要每次都完全关闭cocos2d，而只是简单的运行`stopAnimation`并`startAnimation`挂起和恢复cocos2d。呼叫结束并没有经过很好的测试，如果这样做可能会出现许多问题。

如果这不能解决问题，请在您的应用程序中发布您如何设置和关闭 cocos2d 的代码以获得更多帮助。

# php - 当数据已经在数据库中时，PHP没有从数据库中获取用户数据

> ID：15408037
> 
> 赞同：-1
> 
> 时间：2013-03-14T11:31:59.313
> 
> 标签：php, mysql

这是代码！当数据已经在数据库中时，PHP 没有从数据库中获取用户数据！帮帮我，我卡住了。当我在 login.php 中输入详细信息时，它会将我重定向到 login.php?invalid=1 并显示错误信息或会话已过期！尽管信息是一样的！

```
<?php 
    session_start();
    include_once("include\config.php");
    $login = $_POST["textfield1"];
    $pwd = $_POST["textfield2"];
    $recordset = mysql_query("select * from users");
    while($record = mysql_fetch_array($recordset)){
    if($login == $record["ulogin"] && $pwd == $record["upassword"]) {
        $_SESSION["ulogin"] = $record["ulogin"];
        $_SESSION["uid"] = $record["uid"];  
        if($record["utype"] == 1){
                $_SESSION["utype"] = $record["utype"];
                header("Location:admin.php?uid=".$record["uid"]);
                exit;
        }else{
                header("Location:home.php");
                exit;
            }
        }
    }
    header("Location:login.php?invalid=1");
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:33:30.593

我已经从：

```
include_once("include\config.php"); 
```

到 ：

```
include_once("include/config.php"); 
```

和

从 ：

```
><?php 
session_start(); 
```

到 ：

```
<?php 
    session_start(); 
```

和

从 ：

```
$recordset = mysql_query("select * from users"); 
```

到 ：

```
$recordset = mysql_query("select * from users WHERE username = "'.$login.'" AND password = "'.$pwd.'"); 
```

请用此代码替换您的代码并尝试。希望这会帮助你。

```
<?php 
session_start();
include_once("include/config.php");
$login = $_POST["textfield1"];
$pwd = $_POST["textfield2"];
$recordset = mysql_query("select * from users WHERE username = "'.$login.'" AND password = "'.$pwd.'"");
while($record = mysql_fetch_array($recordset)){
if($login == $record["ulogin"] && $pwd == $record["upassword"]) {

$_SESSION["ulogin"] = $record["ulogin"];
$_SESSION["uid"] = $record["uid"];  
        if($record["utype"] == 1){
        $_SESSION["utype"] = $record["utype"];
        header("Location:admin.php?uid=".$record["uid"]);
        exit;
        }else{
    header("Location:home.php");
    exit;
    }
 }
} 

       header("Location:login.php?invalid=1");  
   ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T12:40:15.403

```
 <?php
    session_start();
    // http://stackoverflow.com/questions/15408037/php-not-getting-user-data-from-database-when-data-is-already-in-database
    include_once("include/config.php");
    $login = $_POST["textfield1"];
    $pwd = $_POST["textfield2"];
    $recordset = mysql_query("select * from users WHERE ulogin = "'.$login.'" AND upassword = "'.$pwd.'"" ");
    $num_row_user =mysql_num_rows($recordset);
    if($num_row_user>0)
    {
       while($record = mysql_fetch_array($recordset))
       {
         if($record["utype"] == 1) 
         {
            $_SESSION["ulogin"] = $record["ulogin"];
            $_SESSION["uid"] = $record["uid"];
            $_SESSION["utype"] = $record["utype"];
            header("Location:admin.php?uid=".$record["uid"]);
            exit;
         }
         else
         {
            header("Location:home.php");
            exit;
         }
       }
    }
    else
    {
       if (mysql_errno()) 
       { 
          header("Location:login.php?invalid=1&message=QueryError");
       }
       else
       {
          header("Location:login.php?invalid=1&message=invalid username and password");
       } 

    } 
```

1.  您必须检查配置文件 'include\config' 更改为 'include\config' 的文件路径。
2.  并且必须检查包含/配置中的数据库连接。
3.  session_start() 之前没有空格
4.  并改变你的编码风格，因为它会出现更多的性能问题。并使用以下编码风格来减少性能问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T11:34:06.397

更改`include_once("include\config.php");`为`include_once("include/config.php");`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T11:34:17.997

像这样包含您的`config.php`文件：

```
include_once("include/config.php"); 
```

不可能是这样的：

```
include_once("include\config.php"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T11:36:55.893

使用下面的查询

```
select * from users WHERE username = "'.$login.'" AND password = "'.$pwd.'" 
```

那么您不需要一次又一次地循环所有记录。

请确保数据库表有记录。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-14T11:37:01.387

**包含数据库配置文件时出现问题。**

**替换**

```
include_once("include\config.php"); 
```

**和**

```
include_once("include/config.php"); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-14T11:40:18.307

1.  您不应该使用 mysql_ 库 - 它已被弃用。请转换为 mysqli_ 或 PDO
2.  `include_once("include\config.php");`应该`include_once("include/config.php");`
3.  该查询`select * from users`可能会返回大量记录。更好的查询是这样的：

    mysql_query("select * from users where ulogin = '" . mysql_real_escape($login) . "' AND "uppassword = '" . $pwd . "'");

这应该返回一行或根本不返回行。保存扫描整个用户表

# binding - 启用属性的淘汰赛绑定问题

> ID：15408039
> 
> 赞同：0
> 
> 时间：2013-03-14T11:32:04.480
> 
> 标签：binding, knockout.js

考虑以下：

```
<div data-bind="with: QuoteSelectedViewModel">
selected quote is : <span data-bind="text: ProductName"></span>
 <!-- ko foreach: CoverQuotesViewModel -->
<br/>    
    <input type="checkbox" data-bind="checked: IsSelected"></input>
    <input type="text" data-bind="value: Label, enable: IsSelected"></input>
<!-- /ko -->
</div> 
```

QuoteSelectedViewModel 为：

```
 {
  "ProductName": "Perfect",
  "MonthPrice": 0,
  "QuarterPrice": 0,
  "BiannualPrice": 0,
  "YearPrice": 0,
  "CoverQuotesViewModel": [ {
        "ProductName": "Select",
        "Label": "Première Assistance 24h/24 (GRATUITE)",
        "IsVisible": true,
        "IsMandatory": true,
        "IsSelected": false,
        "IsChoice": false,
        "IsComposite": false,
        "YearPrice": "451451",
        "BiannualPrice": 0.49,
        "QuarterPrice": 0.2475,
        "MonthPrice": 0.08333333333333333,
        "Childs": [],
        "SelectedCoverQuote": null
     },
     {
        "ProductName": "Select",
        "Label": "Assistance PLUS 24h/24",
        "IsVisible": true,
        "IsMandatory": false,
        "IsSelected": true,
        "IsChoice": false,
        "IsComposite": false,
        "YearPrice": 36.0646,
        "BiannualPrice": 18.2182,
        "QuarterPrice": 9.20205,
        "MonthPrice": 3.098333333333333,
        "Childs": [],
        "SelectedCoverQuote": null
     }]
   } 
```

请参阅 jsfiddle 上的代码：http: [//jsfiddle.net/graphicsxp/j8HdW/4/](http://jsfiddle.net/graphicsxp/j8HdW/4/)

问题是选中和取消选中复选框不会更新模型，因此它不会更新文本框。

要使演示工作，首先单击“获取报价”按钮，然后单击“选择报价”按钮

知道有什么问题吗？

**编辑**

好的，由于 jsfiddle 过于复杂，这里有一个简化版本：http: [//jsfiddle.net/graphicsxp/WCA5f/](http://jsfiddle.net/graphicsxp/WCA5f/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:22:59.363

你`IsSelected`不是可观察的 -[这对我有用](http://jsfiddle.net/WCA5f/1/)

# java - 关闭通道异常

> ID：15408041
> 
> 赞同：0
> 
> 时间：2013-03-14T11:32:19.487
> 
> 标签：java

任何人都告诉我为什么我会在`sc.connect`

( sc = SocketChannel)

```
/**
 * Verify socket is connected.  If not currently connected will attempt to connect
 * @return true if already connected or connection successfully established
 */
private synchronized boolean verifyConnection() {
    if (sc.isConnected()) {
        return true;
    }
    try {
        if (!sc.isOpen()) {
            logger.info("Channel WebBroker->CC is CLOSED unexpectedly. Opening new channel " + getIpAddress() + ":" + getIpPort() + "");
            openChannel();
        }
        sc.socket().close();
        sc.connect(new InetSocketAddress(getIpAddress(), getIpPort()));
        while(!sc.finishConnect()){
            Thread.sleep(1);    
        }
        logger.info("Connection established " + getIpAddress() + ":" + getIpPort());
        sc.socket().setKeepAlive(true);
        return sc.isConnected();
    } catch (Exception e) {
        logger.info("failed to connect to " + getIpAddress() + ":" + getIpPort(), e);
        return false;
    }
}

private void openChannel() throws Exception {
    sc = SocketChannel.open();
    sc.socket().setKeepAlive(true);
    sc.socket().setSoTimeout(30000);
} 
```

[错误]无法连接到 10.201.1.53:8084

```
 java.nio.channels.ClosedChannelException: null
    at sun.nio.ch.SocketChannelImpl.ensureOpenAndUnconnected(SocketChannelImpl.java:472) ~[na:1.6.0_07]
    at sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:486) ~[na:1.6.0_07] 
```

编辑：最后我发现这是因为下面的行。

```
 sc.socket().close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T21:49:18.983

您无法重新连接套接字。你必须创建一个新的。

您还应该注意 isConnected() 只告诉您是否曾经连接过套接字。它不会告诉您整个连接的当前状态。同样 isOpen() 只告诉你是否已经关闭它：而不是对等方是否已经这样做了。您通常无法编写您尝试编写的方法。判断 TCP 连接是否仍然存在的唯一可靠方法是对其进行写入。通常，检测任何资源是否可用的唯一可靠方法是尝试使用它。不要试图预测未来。无论如何，您仍然必须处理写入失败：为什么要编写所有代码两次？

# javascript - 页面中两个不同轮播的两个过渡时间

> ID：15408044
> 
> 赞同：3
> 
> 时间：2013-03-14T11:32:24.447
> 
> 标签：javascript, html, css, twitter-bootstrap

对于我的网站，页面中有两个不同的引导轮播。每个都应该有自己的过渡速度。经过长时间的尝试，我找到了通过 javascript 的出路

```
document.getElementById("image1").style.cssText="position: relative;-webkit-transition: 5s ease-in-out left;-moz-transition: 5s ease-in-out left;-o-transition: 5s ease-in-out left;transition: 5s ease-in-out left;"; 
```

对于 html

```
<div id="carouseltheme" class="carousel slide">
   <div class="carousel-inner" style="height:280px;margin-left:0em;">
       <div id="image1" class=" active item">
          <div class="row-fluid">
              <div class="span12" style="margin-top:1em;margin-left:5.5em">
                "inner-carousel"
              </div>
          </div>                   
       </div>
       <div id="image1" class="item">
          <div class="row-fluid">
              <div class="span12" style="margin-top:1em;margin-left:5.5em">
                  "inner-carousel"                
              </div>
          </div>
       </div>
    </div>
 </div> 
```

过渡速度降低，但滑动不一致。请帮我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T22:25:14.650

做起来很简单。添加任意数量的轮播并确保每个轮播的 ID 都是唯一的。然后，使用 jQuery 并为每个轮播设置间隔。独立 ID 还允许您根据需要为每个 ID 应用 CSS。

```
$('#carouseltheme').carousel({
    interval: 600
})
$('#carouseltheme2').carousel({
    interval: 1500
})
$('#carouseltheme3').carousel({
    interval: 2000
}) 
```

# objective-c - Zxing OS X 演示无法编译

> ID：15408045
> 
> 赞同：0
> 
> 时间：2013-03-14T11:32:26.117
> 
> 标签：objective-c, macos, zxing

我已经`zxing`为 OS X 下载了 sdk 并尝试编译`OS X`演示项目（位于示例中）。但是构建失败并出现以下错误
`Lexical or Preprocessor issue`：：`ZXing/ZXCapture.h file not found`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T15:36:55.190

如果您检查 svn trunk 并从它所在的位置构建示例，它应该可以毫无问题地构建。如果您只检查了主干的一部分或移动了项目，则可能不会，因为事情不会出现在项目文件所期望的位置。如果您正在构建自己的项目，则需要确保包含路径指向正确的位置，并且库包含在目标的构建阶段中。

通常人们可以帮助更多人从构建日志中粘贴错误（包括导致错误的命令）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T11:55:19.297

您是否设置了标题路径？

见[http://yannickloriot.com/2011/04/how-to-install-zxing-in-xcode-4/#stash.a1mrhcRM.dpbs](http://yannickloriot.com/2011/04/how-to-install-zxing-in-xcode-4/#sthash.a1mrhcRM.dpbs)

# php - 如何仅使用 USPS PHP API 获取运输服务名称和费率

> ID：15408050
> 
> 赞同：0
> 
> 时间：2013-03-14T11:32:42.157
> 
> 标签：php, usps

我将此代码连接到 USPS API 并获得详细的响应长信息列表，然后是服务名称和费率。

我如何才能仅对由 (|) 分隔的服务名称和费率做出响应？

```
<?php
$devurl = "http://Production.ShippingAPIs.com/ShippingAPI.dll";
$puburl = "http://Production.ShippingAPIs.com/ShippingAPI.dll";
$service = "IntlRateV2";
$userid = "xxxxx";
$xml = rawurlencode('<IntlRateV2Request USERID="xxxxx">
<Package ID="1ST">
    <Pounds>15</Pounds>
    <Ounces>0</Ounces>
    <MailType>Package</MailType>
    <ValueOfContents>50</ValueOfContents>
    <Country>Jordan</Country>
    <Container>RECTANGULAR</Container>
    <Size>LARGE</Size>
    <Width>10</Width>
    <Length>15</Length>
    <Height>10</Height>
    <Girth>0</Girth>
    <CommercialFlag>N</CommercialFlag>
    </Package>  
</IntlRateV2Request>');
$request = $devurl . "?API=" . $service . "&xml=" . $xml;
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $request);
curl_setopt($ch, CURLOPT_HEADER, false);
curl_setopt($ch, CURLOPT_HTTPGET, true);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$response = curl_exec($ch);
curl_close($ch);
echo "<pre>";
print_r($response);
echo "</pre>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-28T12:31:04.210

USPS 以其预定义的格式发送响应。您必须将响应转换为 xml，然后使用循环解析它以转换为您想要的格式。

响应包括成本和交付时间各不相同的许多服务。在这里，我使用“xml2array”函数将 xml 转换为数组。你可以在网上找到或者联系我。转换成数组后，我们就可以解析服务了。

还可以访问以获取更多信息 - [http://uspsship.blogspot.in/](http://uspsship.blogspot.in/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-31T03:18:31.450

我知道这是一篇旧帖子，但它可能会帮助其他人找到解决方案。

USPS 最近更改了他们的服务名称。您将从此[API获得所有更新的名称](http://www.walkswithme.net/usps-shipping-api-with-php)

希望它有帮助..

# c# - 以编程方式下载 GitHub 私有 repo 的 C# 示例

> ID：15408053
> 
> 赞同：13
> 
> 时间：2013-03-14T11:32:58.953
> 
> 标签：c#, .net, authentication, github, https

我看到 GitHub 存储库的下载路径是以下形式

```
https://github.com/{username}/{reponame}/archive/{branchname}.zip 
```

对于私有存储库，可以理解，您需要提供凭据才能下载存储库，任何人都可以提供有关如何提供 HTTPS 基本身份验证的 C# 示例，以便我可以以编程方式下载存储库吗？

谢谢，

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-08-03T14:52:11.483

这是一种纯 C# 方式：

```
var githubToken = "[token]";
var url = "https://github.com/[username]/[repository]/archive/[sha1|tag].zip";
var path = @"[local path]";

using (var client = new System.Net.Http.HttpClient())
{
    var credentials = string.Format(System.Globalization.CultureInfo.InvariantCulture, "{0}:", githubToken);
    credentials = Convert.ToBase64String(System.Text.Encoding.ASCII.GetBytes(credentials));
    client.DefaultRequestHeaders.Authorization = new System.Net.Http.Headers.AuthenticationHeaderValue("Basic", credentials);
    var contents = client.GetByteArrayAsync(url).Result;
    System.IO.File.WriteAllBytes(path, contents);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-08-22T09:41:56.667

请参阅有关[创建个人访问令牌的](https://docs.github.com/en/github/authenticating-to-github/creating-a-personal-access-token)指南，然后运行以下命令：

```
var githubToken = "token";
var request = (HttpWebRequest)WebRequest.Create("https://api.github.com/repos/$OWNER/$REPO/contents/$PATH");
request.Headers.Add(HttpRequestHeader.Authorization, string.Concat("token ", githubToken));
request.Accept = "application/vnd.github.v3.raw";
request.UserAgent = "test app"; //user agent is required https://developer.github.com/v3/#user-agent-required
using (var response = request.GetResponse())
{
    var encoding = System.Text.ASCIIEncoding.UTF8;
    using (var reader = new System.IO.StreamReader(response.GetResponseStream(), encoding))
    {
        var fileContent = reader.ReadToEnd();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T11:34:20.107

与卷曲：

```
curl -L -F "login=$USER" -F "token=$TOKEN" https://github.com/$USER/$REPO/$PKGTYPE/$BRANCHorTAG 
```

其中 $TOKEN 是您的 github 配置文件上的 API 令牌，而不是用于与 APIv3 通信的 oAuth2 令牌。

$USER 是与令牌相关联的用户帐户，不一定是 repo 所属的组织/其他用户。$USER 的第二个实例是存储库所在的用户/帐户。

$REPO 是私有存储库的名称

$PKGTYPE 是 tarball 或 zipball，$BRANCHorTAG 是一个分支，比如 master，或者是提交的标签名称。

$USER 的第一个实例必须有权访问属于 $USER 的第二个实例的存储库。

我在任何地方都找不到这个文档，所以如果你想要更详细的信息，我也会写一些关于它的文章。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-02-04T19:16:34.710

我目前正在研究[Okctokit.Net](https://github.com/octokit/octokit.net)。试一试。NuGet：安装包 Octokit

# c++ - LLVM：在 C++ 源代码中注入调试行

> ID：15408061
> 
> 赞同：1
> 
> 时间：2013-03-14T11:33:13.340
> 
> 标签：c++, llvm, llvm-gcc, llvm-clang, llvm-3.0

我已经下载了 LLVM 3.1 并成功构建了它。我的要求是在 C++ 源代码文件中添加一些调试行。我使用 CLANG 3.1 对模块进行了编码。但是 CLANG 报告了很多 gcc 没有的 AST 错误。请注意，我的代码使用 gcc 编译器编译得很好。此外，我的 C++ 程序有很多 #include 语句。LLVM 期望相同的路径在路径中可用，并在不同级别再次失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T22:54:30.940

Clang 有一个名为[libTooling](http://clang.llvm.org/docs/LibTooling.html)的新库，用于简化使用 clang 编写源代码到源代码的工具。我建议你检查一下。使用它的最完整示例是[clang-format](http://clang.llvm.org/docs/ClangFormat.html)，它根据一组格式化指南重新格式化任意 C++ 代码。它演示了如何在源代码级别重写 C++ 代码，同时保留所有语义。在某些地方添加某些语句的插入应该不难破解。

# c# - 如何从使用用户控件的表单中获取用户控件属性中的所有按钮列表

> ID：15408065
> 
> 赞同：-3
> 
> 时间：2013-03-14T11:33:19.650
> 
> 标签：c#, user-controls

我在 c# 中使用用户控件，我想创建一个具有属性的用户控件，该属性具有使用用户控件的表单的所有按钮列表谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:55:17.963

像这样的东西？

```
 public IEnumerable<Button> Buttons
    {
        get
        {
            List<Button> buttons = new List<Button>();
            foreach (Control ctrl in ParentForm.Controls)
            {
                Button btn = ctrl as Button;
                if (btn != null)
                {
                    buttons.Add(btn);
                }
            }
            return buttons;
        }
    } 
```

# c++ - 同时读取两个文件（分段错误）c ++

> ID：15408069
> 
> 赞同：0
> 
> 时间：2013-03-14T11:33:31.473
> 
> 标签：c++, arrays, io

此代码应读取两个 .dat 文件，其格式为：

xy 强度 例如：

```
1 1 70
1 2 0.3
1 3 5 
```

它将读入一个文件并显示正确的信息，并且与另一个文件相同，但是当我尝试读入两个文件时，尽管编译正确，但仍出现“分段错误”。我不是 100% 确定为什么，因为一次处理一个文件时，它可以工作，所以我认为它可能不像我在文件中读取的方式。一旦我可以进行这项工作，我将转移到向量，但我仍在学习它们并想先确定数组。

```
int main()
{

  std::ifstream file1("p001_1.dat");

  std::ifstream file1_2("p001_2.dat");

    double intensity;
    int i;
    int j;
    double pic1[1392][1040]; //number of pixels
    double pic1_2[1392][1040];

    // reads in file creating an array [x][y] = intensity

    cout<<"Reading in: file1"<<endl;

    if (file1.is_open())
      {
        file1.seekg(0);
        while (!file1.eof())
          {
          file1 >> i >> j >> intensity;
            pic1[i][j] = intensity;
            //cout<<i<<endl
        }
        file1.close();
        //file1.clear();
    }
    else {
      cout << "Error, cannot open file 1"; }

    cout << "Reading in file 2" << endl;    

    if (file1_2.is_open())
      {
        file1_2.seekg(0);
        while (!file1_2.eof())
          {
        file1_2 >> i >> j >> intensity; //
        pic1_2[i][j] = intensity;
          }
        file1_2.close();
        //file1_2.clear();
        //cout<<i<<endl;
      }
    else {
      cout << "Error, cannot open file 1_2"; }

//A LOAD OF CALCULATIONS// 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:37:14.473

当你运行只读取一个文件的代码时，你只声明了一个数组还是两个？您的数组都非常大，并且将被放置在您的应用程序堆栈中，堆栈空间不能增长太大是很正常的。作为一个简单的测试，只需将这些变量移动为全局变量，看看你的崩溃是否消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T11:38:44.087

您很可能会收到 StackOverflow 错误

这对堆栈来说太多了：

```
double pic1[1392][1040]; //number of pixels
double pic1_2[1392][1040]; 
```

将它们`main`移到功能之外以快速修复它。否则使用动态分配，甚至更好`std::vector`

# g++ - 在 Cpp 中编写 PHP 扩展

> ID：15408076
> 
> 赞同：0
> 
> 时间：2013-03-14T11:33:42.307
> 
> 标签：g++, php-extension

我正在尝试用 C++ 编写 PHP 扩展。我指的是 Sara Golemon 的“嵌入和扩展 PHP”。

这本书有几个小片段，

```
void describe_zval(zval *foo)
{
    if (Z_TYPE_P(foo) == IS_NULL) {
        php_printf("The variable is NULL");
    } else {
        php_printf("The variable is of type %d",
                            Z_TYPE_P(foo));
    }
} 
```

**我已将上述代码保存在 .cpp**

结构`zval`等在文件`/usr/local/src/php-5.4.11/`及其子目录中定义。那是我的PC[Fedora]上PHP的安装目录。所以我尝试了

`#include <zend.h>`

并`-I /usr/local/src/php-5.4.11/`在编译时使用。但是 zend.h 似乎需要`/usr/local/src/php-5.4.11/`目录中存在一些其他文件。如果我#include 它需要一些其他的等等......基本上一个 .h 链被调用，它驻留在 .h 的几个不同子目录中`/usr/local/src/php-5.4.11/`。我不可能#include 所有这些。是否有任何现有的图书馆？使用 Zend 变量使用 Cpp 进行 PHP 扩展开发

有一个更好的方法吗？我的意思是在我进入整个扩展开发之前，有没有更好的方法来练习这些小片段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:26:02.620

你看过 ext-skel 目录了吗？那里应该有一个脚本来生成一个扩展骨架，它应该让你开始。

# javascript - 单击时更改动态元素的背景颜色

> ID：15408084
> 
> 赞同：1
> 
> 时间：2013-03-14T11:33:58.877
> 
> 标签：javascript, jquery, css

我是 JavaScript 新手，我使用 JavaScript 创建了两个动态 div。当我单击第一个 div 时，它变为活动状态。我希望在单击它时更改 div 背景颜色，然后它应该变为活动状态。当我点击第二个 div 时，第二个 div 应该改变背景颜色，第一个 div 取回原来的颜色。

当我同时单击时，我想更改 btnCage 和 btnMice 的 bgcolor。

```
var buttonDiv= document.createElement('div');

var btnCage = document.createElement('div');
btnCage.id = 'btnCage';
//btnCage.className = 'active';
btnCage.innerHTML = 'By Cages';
buttonDiv.appendChild(btnCage);
btnCage.onclick = function() {
     getMonthlyCensusCages()
}

var btnMice = document.createElement('div');
btnMice.id = 'btnMice';
//btnMice.className = 'active';
btnMice.innerHTML = 'By Mice';
buttonDiv.appendChild(btnMice);
btnMice.onclick = function() {
     getMonthlyCensus()
} 
```

请帮我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T11:40:26.980

你可以这样做：

```
btnMice.onclick = function() {
   this.style.backgroundColor = '#f00';
   btnCage.style.backgroundColor = '#ccc';
}; 

btnCage.onclick = function() {
   this.style.backgroundColor = '#f00';
   btnMice.style.backgroundColor = '#ccc';
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T11:35:25.643

```
var buttonDiv= document.createElement('div');

var btnCage = document.createElement('div');
btnCage.id = 'btnCage';
//btnCage.className = 'active';
btnCage.innerHTML = 'By Cages';
buttonDiv.appendChild(btnCage);

var btnMice = document.createElement('div');
btnMice.id = 'btnMice';
//btnMice.className = 'active';
btnMice.innerHTML = 'By Mice';
buttonDiv.appendChild(btnMice);

// change style or change className
btnCage.onclick = function() {
     this.style.backgroundColor = 'red';
     btnMice.style.backgroundColor = 'black';
     getMonthlyCensusCages();
}

btnMice.onclick = function() {
     this.style.backgroundColor = 'red';
     btnCage.style.backgroundColor = 'black';
     getMonthlyCensus();
} 
```

# c# - 可以在终结器中使用 Interlocked 吗？

> ID：15408088
> 
> 赞同：1
> 
> 时间：2013-03-14T11:34:00.227
> 
> 标签：c#, finalizer, interlocked

假设我需要在终结器中清理一些托管资源，或者至少以需要清理的线程安全方式将其记录在某处。据我了解，在终结器中使用锁是严格禁止的，但是 Interlocked 类呢？这安全吗，不会导致死锁吗？

```
static int deadentries;
~Item() { Interlocked.Increment(ref deadentries); }
public static T Get(int id, Action<T> init) {
    T ret;
    WeakReference<T> tref;
    if (cache.TryGetValue(id, out tref)) {
        if (tref.TryGetTarget(out ret)) return ret;
        else Interlocked.Decrement(ref deadentries);
    }
    if (deadentries * 2 > cache.Count) {
        // etc. etc. 
```

此外，似乎所有终结器都在一个线程上运行，这是有保证的行为还是只是实现细节？如果这只是一个细节，那么在终结器中获取锁（例如，将作业推送到无锁队列中）是否可以，前提是该锁永远不会被其他任何地方使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:48:44.693

一个线程运行的终结器是一个实现细节（这不太可能改变，因为它会违反 MS 坚持的非常严格的兼容性标准。仍然不能依赖）。

锁在终结器中实际上是可以的。它们可能会成为性能或正确性问题，但这并不是因为它们是作为终结器的一部分运行的。这些是锁的一般属性。也可以使用 Interlocked 类。

请记住，终结器可以按任何顺序执行，并且可能同时执行。也不是逆依赖顺序，而是随机顺序。

# android - Android OS 框架 - 将单个可执行文件构建为共享对象

> ID：15408089
> 
> 赞同：2
> 
> 时间：2013-03-14T11:34:01.840
> 
> 标签：android, c++, android-ndk, operating-system

我只是这方面的初学者，所以请耐心等待-

我正在尝试修改框架中的一些现有可执行文件，以便将它们作为 SO 包含在应用程序中（修改允许我从方法调用中获取返回的结果，而不是在命令行调用可执行文件） ,

不幸的是，我发现很难隔离和构建它们。

例如，screencap 可执行文件：

[http://androidxref.com/4.1.1/xref/frameworks/base/cmds/screencap/](http://androidxref.com/4.1.1/xref/frameworks/base/cmds/screencap/)

您可以从[screencap.cpp](http://androidxref.com/4.1.1/xref/frameworks/base/cmds/screencap/screencap.cpp)文件中看到它仅使用 (android) 系统头文件：

```
#include <errno.h>
#include <unistd.h>
#include <stdio.h>
#include <fcntl.h>

#include <linux/fb.h>
#include <sys/ioctl.h>
#include <sys/mman.h>

#include <binder/IMemory.h>
#include <gui/SurfaceComposerClient.h>

#include <SkImageEncoder.h>
#include <SkBitmap.h>
#include <SkData.h>
#include <SkStream.h> 
```

虽然我可以发现这些标头散落在 Android 源代码树周围，但单独链接它们以进行自定义构建将非常耗时 -

我的问题是，我如何使用 android 源框架来构建单个可执行文件*，*而不必弄清楚依赖关系和链接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T11:52:44.530

您可以看到该目录下有一个 Android.mk。

因此，如果您想构建该特定模块：screencap。

只需通过以下方式设置 Android 构建环境：

```
export SHOW_COMMANDS=1
. build/envsetup.sh
lunch 1
mmm screencap 
```

然后你会得到你的可执行文件。在构建过程中，您可以看到 Android 如何构建您的可执行文件，包括那些 g++ 命令。

**更新**：

> 我想将 screencap.cpp 等文件中包含的代码用作 Android 应用程序中较大的 ndk-build 项目的一部分

更改该目录下的 Android.mk 文件，或者您可以将该目录复制到其他位置。

在其中添加几条语句以构建静态库。

```
include $(BUILD_SHARED_LIBRARY) 
```

然后将静态库添加到您的应用程序。它应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T14:13:56.060

（@Jermain Xu 回答的更精简版本）

您可以修改`Android.mk`android 源代码树中的模块并更改

```
include $(BUILD_EXECUTABLE) 
```

至

```
include $(BUILD_SHARED_LIBRARY) 
```

为了将此模块构建为共享库，允许它被链接。它需要完整的完整构建才能链接，但您可以使用`mmm`命令指向模块（此实例中的模块是包含`Android.mk`文件的目录）。

例如，从 android 源代码基目录中，

```
mmm framework/base/cmds/screencap 
```

这将回显构建`.so`文件的位置，该文​​件应该可以在您自己的应用程序中链接。

# python - 在 `__init__.py` 中导入动态生成的模型类

> ID：15408090
> 
> 赞同：1
> 
> 时间：2013-03-14T11:34:04.987
> 
> 标签：python, django, python-import

我有一个返回 django 模型类的函数，并希望将它们导入我的`app/models/__init__.py`.

我的功能是对这个[动态模型示例（Django Wiki）](https://code.djangoproject.com/wiki/DynamicModels#Ageneral-purposeapproach)的轻微修改。它克隆了一个模型并返回一个`<class 'django.db.models.base.ModelBase'>`稍作修改的“影子模型”。

就像一个人会做 (in `app/models/__init__.py`)`from a import test1`一样，我想做类似的事情：

```
from c import modeltocopy
from b import dynamic_model('ShadowModel', app_label='fake',fields=modeltocopy._meta.fields)` 
```

我想这样做是为了从我的动态模型中在备用数据库中创建表。

这样的事情可能吗？

我目前工作的解决方案是一个管理命令，它是从( )`django/core/management/commands/syncdb.py`中定义的元组创建表的修改。 它确实有效，但我被要求导入我的动态模型，而不是只为我的动态模型运行单独的命令。`settings.py``SHADOW_MODELS = (('app.module1.module_a', 'ClassName1'),)`
`/app/models/__init__.py`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:39:18.103

您不能导入函数调用的结果。相反，您可以先导入该函数，然后调用它以在模块的命名空间中创建模型类：

```
from c import modeltocopy
from b import dynamic_model as dyn_model_factory

ShadowModel = dyn_model_factory('ShadowModel', app_label='fake', fields=modeltocopy._meta.fields) 
```

然后读取结果`dynamic_model`以从其他模块导入。

# ios - 大量图像的内存管理的逻辑帮助？

> ID：15408091
> 
> 赞同：0
> 
> 时间：2013-03-14T11:34:05.210
> 
> 标签：ios, objective-c

我正在寻求一些关于逻辑的帮助（不是任何代码）。该应用程序的目的是根据级别编号显示 2/3/4 个不同的图像 - 都在同一个视图中（因此图像消失并且新图像被放置在屏幕上）。在本地拥有所有这些图像将对记忆造成极大损害。我想知道的是保持记忆的最好方法。我一直在阅读有关“属性列表”和“存档”的 Apple 文档，尽管我只了解所读内容的六分之一。我知道 GCD、队列和线程，我不知道如何实现它们，或者它们是否是最好的方法——我实际上只知道它们。

我想存储所有图像，根据级别编号变量将我需要的图像加载到屏幕上，然后在级别编号变量增加一时从屏幕上卸载它们。一旦下一级图像加载到屏幕上，预加载下一级图像并从内存中卸载屏幕上的当前图像可能会更快。

如果这有任何意义，我真的希望它有意义。

提前感谢您的时间和任何帮助:)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:18:47.440

几个想法：

1.  “减少内存”的最佳方法是确保您不保留对`UIImage`不立即需要的对象的强引用。这有时称为延迟加载（仅`UIImage`“即时”创建对象）。因此，即使您的应用程序最终可能会使用许多图像，也只需为当前用户界面立即需要的图像填充`UIImageView`对象（及其相关属性）。`image`同样，确保发布对不再需要的图像的强引用。

2.  图像内存管理与属性列表和存档之间的联系很薄。如果您想询问如何存储图像，它们要么作为应用程序包的一部分随您的应用程序一起交付，要么您从网络中检索它们。在后一种情况下，您可以将这些下载的图像缓存在应用程序的[本地文件系统](http://developer.apple.com/library/mac/#documentation/FileManagement/Conceptual/FileSystemProgrammingGUide/FileSystemOverview/FileSystemOverview.html)中（`Documents`或`Library`文件夹），并且您可以在应用程序的模型中跟踪它们，您可以使用属性列表（plist）或核心数据（或其他形式的持久存储）将其保存到持久存储中。通常不建议尝试将缓存的图像本身存储在这些类型的持久存储中。出于性能原因，除非图像很小，否则最好将文件保存在本地文件系统中，并将对这些文件名的引用保存在持久存储中。

3.  图像内存管理和 GCD/队列/线程之间的联系也很薄。是的，您使用[并发技术](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/Introduction/Introduction.html)，例如`NSOperationQueue`Grand Central Dispatch 的调度队列，用于异步后台操作，例如，如果您想在后台下载图像，以免对用户界面产生不利影响。这更像是一个 UX 问题，而不是内存管理问题。顺便说一句，您可能还想研究使用已建立的第三方框架来简化此过程，例如出色的通用[AFNetworking](https://github.com/AFNetworking/AFNetworking)或以图像为中心的[SDWebImage](https://github.com/rs/SDWebImage)。这些将简化对图像进行异步检索的过程。

# ruby-on-rails - Capistrano 部署：从独角兽开始

> ID：15408105
> 
> 赞同：5
> 
> 时间：2013-03-14T11:34:24.150
> 
> 标签：ruby-on-rails, capistrano

使用 capistrano 进行部署。一切正常，然后在 deploy:start （在 deploy:cold 期间）时，会产生一个错误：

```
 * ←[32m2013-03-14 15:03:05 executing `deploy:start'←[0m
  * ←[33mexecuting "/etc/init.d/unicorn_appname start"←[0m
    servers: ["XXX.XXX.131.4"]
    [XXX.XXX.131.4] executing command
 ** [out :: XXX.XXX.131.4] sh: /etc/init.d/unicorn_appname: not found
    ←[2;37mcommand finished in 1572ms←[0m
failed: "sh -c '/etc/init.d/unicorn_appname start'" on XXX.XXX.131.4 
```

有问题的文件存在。这是它的内容：

```
#!/bin/sh
### BEGIN INIT INFO
# Provides:          unicorn
# Required-Start:    $remote_fs $syslog
# Required-Stop:     $remote_fs $syslog
# Default-Start:     2 3 4 5
# Default-Stop:      0 1 6
# Short-Description: Manage unicorn server
# Description:       Start, stop, restart unicorn server for a specific application.
### END INIT INFO
set -e

# Feel free to change any of the following variables for your app:
TIMEOUT=${TIMEOUT-60}
APP_ROOT=/root/apps/appname/current
PID=$APP_ROOT/tmp/pids/unicorn.pid
CMD="cd $APP_ROOT; bundle exec unicorn -D -c $APP_ROOT/config/unicorn.rb -E production"
AS_USER=root
set -u

OLD_PIN="$PID.oldbin"

sig () {
  test -s "$PID" && kill -$1 `cat $PID`
}

oldsig () {
  test -s $OLD_PIN && kill -$1 `cat $OLD_PIN`
}

run () {
  if [ "$(id -un)" = "$AS_USER" ]; then
    eval $1
  else
    su -c "$1" - $AS_USER
  fi
}

case "$1" in
start)
  sig 0 && echo >&2 "Already running" && exit 0
  run "$CMD"
  ;;
stop)
  sig QUIT && exit 0
  echo >&2 "Not running"
  ;;
force-stop)
  sig TERM && exit 0
  echo >&2 "Not running"
  ;;
restart|reload)
  sig HUP && echo reloaded OK && exit 0
  echo >&2 "Couldn't reload, starting '$CMD' instead"
  run "$CMD"
  ;;
upgrade)
  if sig USR2 && sleep 2 && sig 0 && oldsig QUIT
  then
    n=$TIMEOUT
    while test -s $OLD_PIN && test $n -ge 0
    do
      printf '.' && sleep 1 && n=$(( $n - 1 ))
    done
    echo

    if test $n -lt 0 && test -s $OLD_PIN
    then
      echo >&2 "$OLD_PIN still exists after $TIMEOUT seconds"
      exit 1
    fi
    exit 0
  fi
  echo >&2 "Couldn't upgrade, starting '$CMD' instead"
  run "$CMD"
  ;;
reopen-logs)
  sig USR1
  ;;
*)
  echo >&2 "Usage: $0 <start|stop|restart|upgrade|force-stop|reopen-logs>"
  exit 1
  ;;
esac 
```

尝试通过 ssh (sh -c '/etc/init.d/unicorn_appname start') 运行命令后，我遇到了同样的错误。

可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:46:04.663

如果您从相对路径与绝对路径进行符号链接，这很可能会发生。尝试通过提供绝对路径再次进行符号链接。

`chmod +x /home/username/app/app_name/current/config/unicorn_init.sh`

`ln -nfs /home/username/app/app_name/current/config/unicorn_init.sh /etc/init.d/unicorn_app_name`

看看这是否有效

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T21:21:03.690

谢谢大家的建议。问题终于解决了。问题出在从 Windows 机器上进行部署 - .sh 文件具有 Windows 样式的行结尾，无法被 unix 正确读取。解决方案是相应地更改 IDE 设置（对于 Rubymine：文件->设置->代码样式->常规->行分隔符->unix）并重新创建文件。然后： git add 。git commit -m "fix" git push cap deploy:setup cap deploy:cold

完毕！再次感谢大家！

PS：有人知道为什么资产管道在部署后不能工作吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T12:16:27.997

您的 capistrano deploy:start 任务应为

```
task :start, :roles => :app, :except => { :no_release => true } do
  run "/etc/init.d/unicorn start"
end 
```

除非你故意将你的独角兽初始化文件命名为 /etc/init.d/unicorn_appname。

capistrano 部署用户是否对该文件具有执行权限？

# android - 如何为 Android 自定义 URL 架构使用意图？

> ID：15408110
> 
> 赞同：1
> 
> 时间：2013-03-14T11:34:26.407
> 
> 标签：android, cordova, android-activity, custom-url

[基本上我有与如何在 Android 上实现我自己的 URI 方案](https://stackoverflow.com/questions/2448213/how-to-implement-my-very-own-uri-schema-on-android)中描述的相同的问题

我按照已回答问题中的说明添加到我的 android 清单中：

```
<activity android:name=".MyUriActivity">
    <intent-filter>
        <action android:name="android.intent.action.VIEW" />
        <category android:name="android.intent.category.DEFAULT" />
        <category android:name="android.intent.category.BROWSABLE" />
        <data android:scheme="myapp" android:host="path" />
    </intent-filter>
</activity> 
```

另外，我添加了一个这样的新活动：

```
import android.app.Activity;
import android.os.Bundle;

public class MyUriActivity extends Activity {
    @Override
    public void onCreate(Bundle b){
        System.out.println("URI CLICKED!");
    }
} 
```

我的 Android 应用基于 Phonegap，所以我只是添加了一个指向我的 index.html 的链接，如下所示：

```
<a href="myapp://foo">Click me</a> 
```

当我单击时，我在控制台中看到以下错误：

```
03-14 12:23:16.177: E/Cordova(629): Error loading url myapp://foo
03-14 12:23:16.177: E/Cordova(629): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.VIEW dat=myapp://foo }
03-14 12:23:16.177: E/Cordova(629):     at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1545)
03-14 12:23:16.177: E/Cordova(629):     at android.app.Instrumentation.execStartActivity(Instrumentation.java:1416)
03-14 12:23:16.177: E/Cordova(629):     at android.app.Activity.startActivityForResult(Activity.java:3351)
03-14 12:23:16.177: E/Cordova(629):     at android.app.Activity.startActivityForResult(Activity.java:3312)
03-14 12:23:16.177: E/Cordova(629):     at android.app.Activity.startActivity(Activity.java:3522)
03-14 12:23:16.177: E/Cordova(629):     at android.app.Activity.startActivity(Activity.java:3490)
03-14 12:23:16.177: E/Cordova(629):     at org.apache.cordova.CordovaWebViewClient.shouldOverrideUrlLoading(CordovaWebViewClient.java:209)
03-14 12:23:16.177: E/Cordova(629):     at android.webkit.CallbackProxy.uiOverrideUrlLoading(CallbackProxy.java:274)
03-14 12:23:16.177: E/Cordova(629):     at android.webkit.CallbackProxy.handleMessage(CallbackProxy.java:376)
03-14 12:23:16.177: E/Cordova(629):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-14 12:23:16.177: E/Cordova(629):     at android.os.Looper.loop(Looper.java:137)
03-14 12:23:16.177: E/Cordova(629):     at android.app.ActivityThread.main(ActivityThread.java:4745)
03-14 12:23:16.177: E/Cordova(629):     at java.lang.reflect.Method.invokeNative(Native Method)
03-14 12:23:16.177: E/Cordova(629):     at java.lang.reflect.Method.invoke(Method.java:511)
03-14 12:23:16.177: E/Cordova(629):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
03-14 12:23:16.177: E/Cordova(629):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
03-14 12:23:16.177: E/Cordova(629):     at dalvik.system.NativeStart.main(Native Method) 
```

所以我好像错过了这个活动。怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T11:59:21.287

1.  你没有打电话`super.onCreate(b);`
2.  网址`myapp://foo`与您的`IntentFilter`. 应该是`myapp://path/`，或者您可以更改`IntentFilter`和删除`host`部分。

    ```
    <data android:scheme="myapp"/> 
    ```

# node.js - Jade nodejs中的循环

> ID：15408112
> 
> 赞同：0
> 
> 时间：2013-03-14T11:34:28.097
> 
> 标签：node.js, pug

我正在尝试在`jade`使用中创建分页`nodejs`

但是创建链接有问题，我的代码是：

```
 ul#pagination
-       for (var i = 0; i < #{count}; i++){
            li
                a(href='/home/i')= i
-       } 
```

我也尝试过`a(href='/home/#{i}') #{i}`但`a(href='/home/'+i)= i`不起作用

`#{count}`给了我`total number of pages`，但`loop`正确`not working`。 **为什么？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T13:09:27.983

我改变了缩进，它对我有用：

```
ul#pagination
    - for (var i=1; i<=count; i++)
        li
            a(href='/home/'+i)= i 
```

如果没有`work`，则创建一个新文件`jade file`，然后`include`通过**include newfile**`new file`进行测试，如果它有效，则复制`original file`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T11:41:56.200

Jade 模板中的某些语法可能是可能的，但您也可以考虑在节点脚本中创建链接数组，将其暴露给模板并使用常规的[each loop](https://github.com/visionmedia/jade#a9)。

# c# - 为什么 List 的副本仍然使用 C# 更改原始 List 中的属性

> ID：15408114
> 
> 赞同：3
> 
> 时间：2013-03-14T11:34:34.470
> 
> 标签：c#, .net, properties, deep-copy, shallow-copy

假设我有这门课

```
public class Employee
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public bool isActive { get; set; }
} 
```

并像这样使用它：

```
 List<Employee> Employees = new List<Employee>();
    Employees.Add(new Employee { FirstName = "firstname", LastName = "lastname", isActive = true });
    List<Employee> EmployeesCopy = new List<Employee>(Employees);
    EmployeesCopy[0].isActive = false; 
```

为什么更改的`isActive`属性`EmployeesCopy`也会修改原始列表中的属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T11:39:03.080

因为新列表仍然包含对相同员工对象的引用。您可以通过执行以下操作在新列表中创建新列表：

```
 List<Employee> Employees = new List<Employee>();
    Employees.Add(new Employee { FirstName = "firstname", LastName = "lastname", isActive = true });
    List<Employee> EmployeesCopy = Employees.Select(x => new Employee(x)).ToList();

    public class Employee
    {
        public string FirstName { get; set; }
        public string LastName { get; set; }
        public bool isActive { get; set; }

        public Employee()
        { }

        public Employee(Employee e)
        {
            FirstName = e.FirstName;
            LastName = e.LastName;
            isActive = e.isActive;
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T11:36:37.817

你做的是浅拷贝，而不是深拷贝。这意味着新列表包含与原始列表相同的对象。

要进行深度复制，您需要遍历原始列表并`Employee`为新列表创建新对象，如下所示。

```
private List<Employee> CloneEmployees(List<Employee> original)
{
    var newList = new List<Employee>();
    foreach (var employee in original)
    {
        newList.Add(new Employee 
            { 
                FirstName = employee.FirstName, 
                LastName = employee.LastName, 
                isActive = employee.isActive 
            });
    }
    return newList;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T11:36:48.850

> 为什么EmployeesCopy 的isActive 属性的改变也会修改原来的列表？|

因为这两个列表都指向 Employee 对象的同一个实例。您还需要[深度复制](https://stackoverflow.com/questions/129389/how-do-you-do-a-deep-copy-an-object-in-net-c-specifically)您的 Employee 对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T11:36:14.507

副本是一个新对象，但它包含对原始列表中`List`同一组对象的引用。`Employee`如果您希望`Employee`两个列表中的对象是独立的，那么您必须单独复制它们并将副本放入新列表中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T11:36:46.757

您创建的副本只是列表的副本。不是对象的副本。换句话说，`Employees[0] == EmployeesCopy[0]`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-14T11:36:47.437

因为通过 using`new List<Employee>(Employees);`将为您提供 List 的新实例，而不是列表中包含的对象。您还应该考虑克隆列表中包含的对象，使用二进制序列化来序列化对象图。

# wordpress - 重命名 Wordpress 主题文件夹

> ID：15408115
> 
> 赞同：1
> 
> 时间：2013-03-14T11:34:35.070
> 
> 标签：wordpress, themes, directory, rename

我正在尝试将我的主题文件夹（假设它是 211）重命名为不同的名称。我遵循了所有我能找到的教程，其中说我应该首先激活另一个主题，然后更改 ftp 上的文件夹名称，更改 style.css 中的主题名称，然后当然再次激活我的主题。

我也尝试过复制主题并进行更改。

这对我来说根本不起作用。该网站看起来很奇怪。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:38:58.463

检查 header.php 中样式表的链接是否与新文件夹的位置匹配，如果是这样的话。还要检查 style.css 中的链接 例如： <`link href="twentytwelve/style.css" ref="stylesheet" />`应该看起来像这样。

# android - android 4.0+中上下文动作和表面动作之间的区别

> ID：15408116
> 
> 赞同：0
> 
> 时间：2013-03-14T11:34:36.240
> 
> 标签：android, contextmenu, android-4.0-ice-cream-sandwich

我需要澄清我的应用程序，以便可以在我的 android 应用程序中使用该术语来简化开发。

任何链接或相关参考信息将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:35:04.323

您引用的页面使用“表面”一词​​作为动词，而不是形容词。在这种情况下，“表面”意味着“展示”或“展示”。

我怀疑这句话是你困惑的根源：

> 选择数据时，上下文操作栏允许您显示操作。

...可以重写为：

> 选择数据时，上下文操作栏允许您显示以前未显示的操作。

# caching - 为什么缓存 (System.Web.Caching.Cache) 不用于状态管理？

> ID：15408117
> 
> 赞同：0
> 
> 时间：2013-03-14T11:34:40.000
> 
> 标签：caching, asp.net-4.0, state-management

我试图[在 PostBack 之后理解 Persisting DataSource in GridView](https://stackoverflow.com/questions/6119542/persisting-datasource-in-gridview-after-postback)的公认答案，因为我有类似的问题。

引用：

> 我避免不必要地将东西放入 VeiwState 或会话中，所以我认为保存这些数据的最佳方法是缓存它。

当我查看 MS 对状态管理的建议时：[ASP.NET 状态管理概述](http://msdn.microsoft.com/en-us/library/75x4ha6s%28v=vs.100%29.aspx)缓存无处可寻。有一条评论（搜索 Jim_Huff）询问此问题，但没有得到答复。

**问题**：在这种情况下，[缓存](http://msdn.microsoft.com/en-us/library/system.runtime.caching.memorycache%28v=vs.100%29.aspx)是怎么回事——我应该使用它还是不使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T11:41:24.697

该问题的答案由问题作者提供，这不是一个很好的答案。

状态管理用于管理单个会话的状态。有确保您不会践踏其他用户的会话状态的保护措施，以及用于清除旧会话、放弃会话等的明确机制。

应用程序缓存用于管理整个应用程序的全局状态。用它来管理会话状态是不合适的。

# vba - 为组合框选择选项后移动到新选项卡

> ID：15408118
> 
> 赞同：1
> 
> 时间：2013-03-14T11:34:46.223
> 
> 标签：vba, ms-access

我有一个表单，其中包含按选项卡组织的子表单。我想要做的是在输入新记录时更新字段后，将用户重定向到表单中的选项卡。

这可能是现有的代码。

```
Private Sub FIELD1_AfterUpdate()

If Me.FIELD1.Value = "Yes" Then

Me.Parent.TabCtl50.Value = 4

End If

End Sub 
```

它给出了错误“应用程序定义的或对象定义的错误”

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:37:37.040

您可以参考 pages 属性：

```
 Me.Parent.TabCtl50.Pages(4).SetFocus
 Me.Parent.TabCtl50.Pages("PageNameHere").SetFocus 
```

# javascript - IE 10 未设置/发送 cookie（来自 js）到服务器

> ID：15408121
> 
> 赞同：2
> 
> 时间：2013-03-14T11:35:07.317
> 
> 标签：javascript, cookies, localhost, internet-explorer-10

不久前，我将一个大型开发项目从使用 cookie 切换到使用 localStorage。然而，我意识到我有点枪，而且服务器上实际上需要一些 cookie。

我已将它们从 localStorage 设置回使用 cookie。但是在此期间，我在我的 Win7 开发盒上安装了 IE10，并将我的开发服务器从 IIS Express 切换到在本地运行的 ISS 7.5。

为了让 Fiddler 拦截我的本地流量，我通过 URL 访问开发页面

```
http://local_iis/ 
```

在 Hosts 文件中标识为：

```
local_iis 127.0.0.1 
```

但是 IE10 在使用此测试页面访问此域的页面时无法设置 Cookie：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script type="text/javascript">
        document.cookie = "test=value";
        alert(document.cookie); // gives "" in IE 10
    </script>
</head>
<body>

</body>
</html> 
```

但是，从以下任一方式运行我的测试页面会设置 cookie（并提醒值）

```
http://localhost/
http://127.0.0.1/ 
```

cookie 在 FF 和 Chrome 中都得到正确设置和警报，因为我只使用 IE 进行开发和测试. 我也将 local_iis 添加到受信任的站点。

仍然没有设置cookie。

有谁知道为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T15:48:30.107

根据在[此处](https://stackoverflow.com/questions/15856886/ajax-on-ie10-dont-send-cookies)找到的另一个主题并跟进提到的 MS 博客[，发生](http://blogs.msdn.com/b/ieinternals/archive/2009/08/20/wininet-ie-cookie-internals-faq.aspx?PageIndex=5)这种情况是因为您的机器名称中有下划线！邪恶的吧？

看到这个：

**Q5：当主机名/域包含下划线时，IE不会设置cookie？**

**A: Correct.** Technically, underscore is not a DNS character, and while Windows will let you use an underscore when naming your machine, it warns you that doing so may cause problems. One such problem is that WinINET blocks attempts to set cookies on such domains.

# c++ - 平等对类是反身的吗？（即实例总是等于它们自己？）

> ID：15408122
> 
> 赞同：0
> 
> 时间：2013-03-14T11:35:09.073
> 
> 标签：c++, equality, compiler-optimization

在 C++ 中，相等性测试通常由每个类单独实现。在任何合理的实现下，人们大概会期望一个对象等于它自己。

编译器会进行这种优化吗？

换句话说，如果，编译器是否允许对类类型`&a == &b`假设？`a == b`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T11:38:04.050

不可以。类类型只有在`==`存在合适的用户定义的运算符重载时才能进行比较；并且超载可以做任何事情，“合理”或其他。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T11:38:09.317

一个反例是`NaN`。包含不等于自身`double`。`NaN`

# mysql - 在 MySQL 中使用下划线 _ 作为主键

> ID：15408124
> 
> 赞同：0
> 
> 时间：2013-03-14T11:35:14.490
> 
> 标签：mysql, primary-key

我想有一个 1_5_4 形式的主键，其中

1 是用户 ID

5是comp id

4 是圆形 id

谁能告诉我这对于 MySQL p 键设计是否是好/坏的做法以及它将如何影响索引等。我知道您的目的是保持 p 键的简短，但为了数据库设计的简单性，我愿意牺牲这一点.

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T11:36:49.923

这是一个更令人困惑的数据库设计。我会推荐以下内容：

```
user_id
comp_id
round_id 
```

作为单独的字段。然后，您可以配置复合主键以覆盖所有 3 个字段，确保所有 3 个字段的唯一性

这个问题可能有用。 [如何正确创建复合主键 - MYSQL](https://stackoverflow.com/questions/5835978/how-to-properly-create-composite-primary-keys-mysql)

# php - PHP检查文件是否为图像

> ID：15408125
> 
> 赞同：64
> 
> 时间：2013-03-14T11:35:20.450
> 
> 标签：php, image, file-upload, getimagesize

有没有办法确保接收到的文件是图像`PHP`？

测试扩展对我来说听起来不是很安全，因为您可以上传一个`script`并将其扩展更改为您想要的任何内容。

我也尝试过使用`getimagesize`，但可能有更适合该特定问题的东西。

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2013-03-14T11:38:19.453

**getimagesize()**应该是确定文件是否为图像的最明确方法：

```
if(@is_array(getimagesize($mediapath))){
    $image = true;
} else {
    $image = false;
} 
```

因为这是一个示例**getimagesize()**输出：

```
Array (
[0] => 800
[1] => 450
[2] => 2
[3] => width="800" height="450"
[bits] => 8
[channels] => 3
[mime] => image/jpeg) 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-03-14T11:37:48.667

获取 mimetype 的本机方式：

对于 PHP < 5.3 使用[mime_content_type()](http://php.net/manual/en/function.mime-content-type.php)
对于 PHP >= 5.3 使用[finfo_open()](http://php.net/manual/en/function.finfo-file.php)或[mime_content_type()](http://php.net/manual/en/function.mime-content-type.php)

获取 MimeType 的替代方法是[exif_imagetype](http://php.net/manual/en/function.exif-imagetype.php)和[getimagesize](http://php.net/manual/en/function.getimagesize.php)，但这些依赖于安装适当的库。此外，它们可能只返回图像 mimetypes，而不是[magic.mime](http://php.net/manual/en/book.mime-magic.php)中给出的整个列表。

While`mime_content_type`可从 PHP 4.3 获得，并且是 FileInfo 扩展的一部分（自 PHP 5.3 起默认启用，Windows 平台除外，必须手动启用，详情请参阅[此处](http://php.net/manual/en/fileinfo.installation.php)）。

如果您不想担心系统上可用的内容，只需将所有四个函数包装到一个代理方法中，该方法将函数调用委托给可用的任何内容，例如

```
function getMimeType($filename)
{
    $mimetype = false;
    if(function_exists('finfo_open')) {
        // open with FileInfo
    } elseif(function_exists('getimagesize')) {
        // open with GD
    } elseif(function_exists('exif_imagetype')) {
       // open with EXIF
    } elseif(function_exists('mime_content_type')) {
       $mimetype = mime_content_type($filename);
    }
    return $mimetype;
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-03-14T11:52:25.960

使用文件扩展名和`getimagesize`函数来检测上传的文件是否具有正确的格式只是入门级检查，它可以通过上传具有真实扩展名和图像标题的某些字节但内容错误的文件来简单地绕过。

为了安全起见，您可以对上传的图片进行缩略图/调整大小（即使是原始图像大小）并保存此版本而不是上传的图片。它还可以获取上传的文件内容并搜索特殊字符，例如`<?php`查找文件是否为图像。

# labview - 从 while 循环中更新输出

> ID：15408127
> 
> 赞同：0
> 
> 时间：2013-03-14T11:35:23.260
> 
> 标签：labview

我有一个 ex1.vi，它有 2 个输入 `1).Signal(boolean)` `2).Message(String)`

有 1 个输出 `Parsed message(String)`

现在这个vi有一个while循环，它检测输入的变化并**应该**给出输出。这个 ex1.vi 本身位于实例化它的 main.vi 中的消息循环中。这个 main.vi 生成 Sensor 和消息数据并使用 Parsed 消息。

例如。main.vi 给出`Signal = true`，`message = "hello"`ex1.vi 给出`parsed message = "hi"`。由于 ex1.vi 在 while 循环中，我将如何给出输出？如果我更新一个局部变量并将其连接到输出 main.vi 仍然无法使用，因为 ex1.vi 尚未完成。在不使用全局变量的情况下如何实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:49:40.620

使用队列或用户事件在运行的 VI 之间共享消息。

我很困惑你是如何设置 ex1.vi 的。对于子VI的每次调用，您只能有一组输入和一个输出——您不能监控输入。如果输入数据是通过队列进入的，那么您已经完成了一半。您只需要一个队列即可将消息返回给调用 VI。

如您所知，VI 的输出与返回函数相同，因此您无法返回并继续运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T13:26:50.087

您可以使用功能性全局变量，这可能是更快的解决方案。见这里： [功能性全局变量](https://decibel.ni.com/content/docs/DOC-2143 "功能性全局变量")

消息队列也可以很好地工作，我的选择可能是这两个中的一个，具体取决于应用程序。请参阅此处： [排队消息处理程序](http://www.ni.com/white-paper/14119/en "排队消息处理程序")

哪个更好的解决方案实际上取决于应用程序，您应该根据大局权衡好处。

# ios - URL Schemes 项目 0 已被使用

> ID：15408131
> 
> 赞同：0
> 
> 时间：2013-03-14T11:35:35.360
> 
> 标签：ios, objective-c, cocoa-touch, facebook-javascript-sdk

我正在尝试将 Facebook SDK 3.2 添加到我的应用程序中，他们的要求之一是将应用程序 ud 广告到您在图片中看到的位置。我的问题是我要更新的应用程序已经使用项目 0 和我的应用程序名称从 Safari 连接回应用程序。我不是实现它的人，所以我不知道它是如何工作的。我怎样才能让事物保持原样并且仍然与 facebook sdk 共存？

![在此处输入图像描述](../Images/8c62ebbd89250e5091509c3a190080e9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:39:22.967

只需将其添加为第 1 项，顺序无关紧要，只要您在该 URLSchemes 数组中的某处有 fbID。

# iphone - UIScrollView contentSize 被重置

> ID：15408133
> 
> 赞同：2
> 
> 时间：2013-03-14T11:35:41.230
> 
> 标签：iphone, ios, cocoa

我需要动态地将文本字段添加到滚动视图。我能够做到，添加后我每次都会计算和更新滚动视图的内容大小。

更新内容大小后，我可以在屏幕上查看它，一旦我编辑文本字段（键盘消失），我将内容大小重置为原始值。我在这里错过了什么吗？滚动视图是通过 xib 创建的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:41:09.803

您可以跟踪最后一个 textFiled 的 y 位置。

现在在将所有文本字段添加到 ScrollView 后使用下面的行。

```
[scrollView setContentSize:CGSizeMake(320, yPos)]; 
```

对于键盘问题用户，请使用以下代码。

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField{

[textField resignFirstResponder];
[scrollView setContentSize:CGSizeMake(320, yPos)];
return YES;
} 
```

希望这会帮助你。

一切顺利 ！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T11:50:58.327

```
 - (BOOL)textFieldShouldBeginEditing:(UITextField *)textField 
    {
        self.scrollView.frame = CGRectMake(0, 0, 320, 240);// set height of self.scrollView.frame, as you need.
        return YES;
    }

    - (BOOL)textFieldShouldReturn:(UITextField *)textField 
   {

        [self.txtFieldName resignFirstResponder];
        .
        ,
        .

        self.scrollView.frame = CGRectMake(0, 0, 320, 460); // set height of self.scrollView.frame, as you need.
        [self.scrollView setContentSize:CGSizeMake(320, 465)]; // set height of self.scrollView.ContentSize, as you need.

        return YES;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T11:50:58.743

在`viewDidLoad`方法中，

```
y = 500; // As you wish

scrMain.delegate = self;
scrMain.contentSize = CGSizeMake(320, y); 
```

然后，对于文本字段输入

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField
{
    scrMain.contentSize = CGSizeMake(320, y + 50);
} 
```

返回键后，

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField{

    [textField resignFirstResponder];

    scrMain.contentSize = CGSizeMake(320, y);
    return YES;
 } 
```

# thunderbird - 使用 Thunderbird-lightning 从 URL 获取日历

> ID：15408138
> 
> 赞同：2
> 
> 时间：2013-03-14T11:36:05.050
> 
> 标签：thunderbird, icalendar, thunderbird-lightning

**总结一下即将发生的事情：**

*   如何通过链接发送日历？
*   为什么日历第一次保存在我的本地 PC 上时可以正常工作，而直接从 Web 获取时无法修改，尽管它是在没有消息的情况下导入的？
*   如何找到修改失败的原因？

**完整解释：**

我正在开发一个生成 ICS 日历的应用程序。此日历通过 URL 发送给用户。到目前为止，我发现用户可以通过`Calendar tab`-> `New Calendar`->导入日历`On the Network`。然后提供生成日历的 URL 并按照向导创建一个新日历。这工作得很好，即使我想找到一种方法来允许用户导入日历（如果是这种情况，自动触发向导）只需点击我的链接。我尝试将链接嵌入到邮件中，但是当单击它时会触发浏览器（如果它是在 HTTP 协议中提供的，或者在 WebDAV 协议中提供时出现错误）。你知道有什么方法可以产生一个可以实现我的目标的链接吗？

然而，真正的问题是另一个。当我按照描述 ( `Calendar tab`-> `New Calendar`-> `On the Network`) 导入日历然后尝试修改任何事件数据时，我收到一条`MODIFICATION_FAILED`消息，错误控制台仅显示

```
Timestamp: 03/14/2013 12:20:08 PM
Error: An error occurred when writing to the calendar Test! Error code: MODIFICATION_FAILED. Description: 
Source File: resource://calendar/modules/calUtils.jsm -> file:///home/mdavi/.thunderbird/sdq097yy.default/extensions/%7Be2fda1a4-762b-4020-b5ad-a41df1933103%7D/calendar-js/calCalendarManager.js
Line: 976 
```

我怎样才能找到这个错误的原因？此外，我尝试将生成的日历（或从我的链接下载）导出到 ICS 文件，然后通过`File`-> `Open`->打开此类文件，`Calendar File ...`而不修改导出文件中的任何内容，这样我什至可以修改事件数据. 所以为什么？我生成的 ICS 文件非常简单，如下所示：

```
BEGIN:VCALENDAR
PRODID:-//Events Calendar//iCal4j //EN
METHOD:PUBLISH
VERSION:2.0
CALSCALE:GREGORIAN
BEGIN:VEVENT
UID:...
SUMMARY:...
DTSTART:...
DTEND:...
DESCRIPTION:...
LOCATION:...
URL:...
END:VEVENT
END:VCALENDAR 
```

VEVENT 的所有属性都很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T09:05:49.477

我不确定您是否计划允许用户远程更改您日历上的事件，或者您是否希望他们将日历数据导入到他们自己的日历中。我假设您正在做第一个并且选择了“iCalendar”类型。首先进行一些解释，类型之间存在明显差异：

*   **iCalendar**：此模式使用 WebDAV，它最初不是用于日历数据，而是用于传输文件。为了保存日历数据，.ics 文件被下载、修改然后再次上传
*   **CalDAV**：这是 WebDAV 的扩展，专门用于日历。还有一些额外的查询来确定服务器支持什么。每个事件都可以具体查询，因此客户端不必上传整个文件。

如果您使用 iCalendar 类型，您的 Web 应用程序必须支持更多查询：

*   `PUT /path/to/calendar.ics`：进行此查询以将文件保存到服务器。如果您不支持此方法，则会抛出 MODIFICATION_FAILED。
*   `PROPFIND /path/to/calendar.ics`：这可能是可选的，但有助于减少网络负载并避免数据丢失。执行[ETag 查询](http://hg.mozilla.org/comm-central/file/08b6532424bf/calendar/providers/ics/calICSCalendar.js#l996)以查明文件是否已更改。`If`如果文件未更改，则此 ETag 然后在标头中使用以仅 PUT。

如果您想提供 CalDAV 访问，我建议您使用现有的开源 CalDAV 服务器之一，并为其编写一个使用您的数据的后端。

不幸的是，Lightning 没有办法让 Link 触发自动订阅，但当它这样做时，它可能会通过`webcal://`and`webcals://`方案。我不知道它们是否是标准的，但它们至少是常用的。

选择文件>打开>日历文件时，您正在进行的是使用`file://`URI订阅本地日历。如果您删除该文件，您将丢失您的日历。如果您想将事件导入到内部日历，您需要做的是创建一个本地日历，然后使用事件和任务菜单从文件中导入事件。如果不下载远程文件，就无法做到这一点。

如需更多调试，您可以在选项 > 高级 > 常规 > 配置编辑器中打开高级配置编辑器，然后启用首选项`calendar.debug.log`和`calendar.debug.log.verbose`. 较新版本的 Lightning 可能有更多以 . 为前缀的调试信息`[calICSCalendar]`。

# .htaccess - 用.htaccess 隐藏部分URL？

> ID：15408141
> 
> 赞同：0
> 
> 时间：2013-03-14T11:36:18.550
> 
> 标签：.htaccess, url, mod-rewrite

我试图在重写后隐藏 URL 的一部分。

下面是我在 .htaccess 中使用的重写规则，当有人尝试访问 abc.com 时，这基本上会执行[http://example.com/index.php-someextrainfohere 。](http://example.com/index.php-someextrainfohere)我想要实现的是，我想在重写之后隐藏“-someextrainfohere”部分。从我的感觉来看，我无法通过第二个重写规则来做到这一点。知道我该怎么做吗？

```
RewriteCond %{HTTP_HOST} ^abc.com [NC]
RewriteRule ^(.*)$ http://example.com/index.php-someextrainfohere 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:28:05.730

> 嗯，有一个核心网站托管我的主要脚本。我有多个子站点，它们充当这个核心站点的代理。当有人试图通过子站点访问时，我试图使用一些额外的变量将其转发到核心站点，这些变量允许我跟踪一些数据（每个子站点都不同），这就是我不想要的暴露给我的访客。

在这种情况下，无论如何您都必须进行标头重定向，并且您可以在解析附加信息后在 PHP 脚本中执行此操作。

在 index.php 中：

```
(parse the extra info)

header("location: http://www.xyz.com");
die(); 
```

理论上你也可以使用 HTTP_REFERER 变量而不是添加额外的信息，但它不是 100% 可靠的，因为它可以在客户端关闭。

# c# - 预定义类型“System.Threading.Tasks.Task”在全局别名的多个程序集中定义

> ID：15408142
> 
> 赞同：13
> 
> 时间：2013-03-14T11:36:26.890
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, asp.net-4.5

我刚刚建立了一个新的 asp.net mvc 4 项目，使用最新的 .net 框架（4.5）结合 Visual Studio 2012。在我添加了一些类、辅助项目等之后，我突然注意到我收到了 5 次当我编译项目时同样的警告。警告指出：

> ASPNETCOMPILER：警告 CS1685：预定义类型“System.Threading.Tasks.Task”在全局别名的多个程序集中定义；使用来自 'c:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework\v4.5\mscorlib.dll' 的定义

所以现在我想知道这种类型是在哪些程序集中定义的？我在解决方案中的所有项目都使用 .net 框架的 4.5 版，所以 4.5\mscorlib.dll 应该是唯一的，还是我遗漏了什么？

我的解决方案包含 4 个项目（3 个类库和 1 个 mvc-4 Web 项目）。当我独立编译这 3 个类库时，它们不会显示任何警告。只有 Web 项目会引发警告，但类库项目会被 Web 项目引用。web项目的参考：

*   Antlr3.Runtime
*   微软.CSharp
*   Microsoft.Web.Infrastructure
*   系统
*   系统数据
*   System.Web.DynamicData
*   System.Web.Entity
*   System.Web.ApplicationServices
*   System.ComponentModel.DataAnnotations
*   系统核心
*   System.Data.DataSetExtensions
*   系统.Web.优化
*   System.Xml.Linq
*   系统.Web
*   System.Web.Extensions
*   System.Web.抽象
*   系统.Web.路由
*   系统文件
*   系统配置
*   系统.Web.服务
*   System.EnterpriseServices
*   牛顿软件.Json
*   System.Net.Http
*   System.Net.Http.Formatting
*   System.Net.Http.WebRequest
*   System.Web.Helpers
*   System.Web.Http
*   System.Web.Http.WebHost
*   系统.Web.Mvc
*   System.Web.Razor
*   System.Web.WebPages
*   System.Web.WebPages.Deploymen
*   System.Web.WebPages.Razor
*   网络润滑脂

有没有人建议在哪里看？

提前致谢

BHD

**更新** 似乎更多的人有类似的问题，在我的情况下，答案是：我们在这里使用一些公司库，这些库确实使用了旧版本的框架（3.5）并引起了警告。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T11:57:46.317

类似于文章[C# Compiler Warning 1685](https://stackoverflow.com/questions/602927/c-sharp-compiler-warning-1685)。检查任何引用的程序集本身是否引用了不同版本的 mscorlib.dll。

掌握[DotPeek](http://www.jetbrains.com/decompiler/)或[.NET Reflector](http://www.red-gate.com/products/dotnet-development/reflector/)，您应该能够检查被引用程序集所引用的程序集版本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-12-22T18:02:20.300

Visual Studio 输出可以为您提供触发此事件的程序集的详细信息。您将需要输出处于该`"Detailed"`级别。去（`VS 2019`至少）：

```
Tools -> Options -> Projects and Solutions -> Build and Run 
```

并选择`"Detailed"`for `"MSBuild project build output verbosity"`。

然后获取构建输出并寻找类似`"There was a conflict between..."`. 这应该列出引用程序集以及冲突的程序集版本。该信息应该足以决定行动方案。

# c++ - 如何提高 C++ 计算的速度

> ID：15408143
> 
> 赞同：-7
> 
> 时间：2013-03-14T11:36:28.047
> 
> 标签：c++, mysql, function, math

我编写了这段代码来计算 3 个公式，例如：L `c=Lcb-Lca where Lcb and Lca equals to 7915,7*Log10(Tan(X1/2+45)) / G=Y2-Y1 / V=G/Lc`-> 还有一些中间公式可以帮助我将数据放入正确的形式。问题是我有很多数据要处理，如果可能的话，我想找到优化代码的方法。

```
#include <cstdio>
#include <iostream>
#include <stdlib.h>
#include <cmath>
#include <fstream>
#include <sstream>
#include <string>
#include "mysql/mysql.h"

using namespace std;

const string hostMySQL = "localhost";
const string userMySQL = "root";
const string database = "2_Generated_flights";
const string table = "8_airac_6_test";
const string passwordMySQL = "****";
const int port = 0;
const int clientflag = 0;

int main(int argc, char *argv[]){

    /* connection à MySQL */
    string request;
    MYSQL * connection = mysql_init(NULL);
    MYSQL_RES * result;
    MYSQL_ROW row = NULL;
            if(!mysql_real_connect(connection, hostMySQL.c_str(), userMySQL.c_str(),
               passwordMySQL.c_str(), database.c_str(),
               port, NULL, clientflag)){
    fprintf(stderr, "Connection to database failed: %s\n",
        mysql_error(connection));
    return EXIT_FAILURE;
    }
    cout << "connected to mysql" << endl;

   int sql_min_lat;
   sql_min_lat=mysql_query(connection, "SELECT ind, Lat_begin_segment, Lon_begin_segment, Lat_end_segment, Lon_end_segment from 8_airac_6_test");/*on choisit les variables nécessaires*/
   if (sql_min_lat !=0)
      {
     cout <<mysql_error(connection);
     return EXIT_FAILURE;
      }
    result=mysql_store_result(connection);
    while((row = mysql_fetch_row(result))){
        /*calcul ind*/
        int ind, degrees_lat_begin, degrees_lat_end, degrees_lon_begin, degrees_lon_end, G_int;
        float lat1, lat2, lon1, lon2,  minutes_lat_begin, minutes_lat_end, minutes_lon_begin, minutes_lon_end, G_diff, G_pr;
        double lat_beg_deg, lat_end_deg, lon_beg_deg, lon_end_deg, Lca, Lcb, Lc, G, TanV, V, Rv;
        ind=atoi(row[0]); 
        /*calcul lat_begin en degree*/
        lat1=atof(row[1]);      
        degrees_lat_begin = int (lat1);
        minutes_lat_begin = (lat1 - degrees_lat_begin) * 60;
        minutes_lat_begin=(int)minutes_lat_begin;
        if (minutes_lat_begin >-10 && minutes_lat_begin < 10) 
        {
           minutes_lat_begin= minutes_lat_begin/10;
           }
           else {
               minutes_lat_begin= minutes_lat_begin/100;
               }
        if (minutes_lat_begin ==1 || minutes_lat_begin==-1) {
            minutes_lat_begin=minutes_lat_begin/100;
        }

        lat_beg_deg=degrees_lat_begin + minutes_lat_begin;

        /*calcul lat_end en degree*/
        lat2=atof(row[3]);
        degrees_lat_end = int (lat2);
        minutes_lat_end = (lat2 - degrees_lat_end) * 60;
        minutes_lat_end=(int)minutes_lat_end;
        if (minutes_lat_end >-10 && minutes_lat_end < 10) 
        {
           minutes_lat_end= minutes_lat_end/10;
           }
           else 
               {
                   minutes_lat_end=minutes_lat_end/100;
                   }
        if (minutes_lat_end ==1 || minutes_lat_end==-1) {
            minutes_lat_end=minutes_lat_end/100;
        }
        lat_end_deg=degrees_lat_end + minutes_lat_end;

        cout << "Done degrees_lat_end!" << endl;

        /*calcul lon_begin en degree*/
        lon1=atof(row[2]);
        degrees_lon_begin = int (lon1);
        minutes_lon_begin = (lon1 - degrees_lon_begin) * 60;
        minutes_lon_begin=(int)minutes_lon_begin;
        if (minutes_lon_begin >-10 && minutes_lon_begin < 10) {
           minutes_lon_begin= minutes_lon_begin/10;
           }
           else 
            {
               minutes_lon_begin= minutes_lon_begin/100;
               }

        if (minutes_lon_begin ==1 || minutes_lon_begin==-1) {
            minutes_lon_begin=minutes_lon_begin/100;
        }
        lon_beg_deg=degrees_lon_begin + minutes_lon_begin;

            /*calcul lon_begin en degree*/
        lon2=atof(row[4]);      
        degrees_lon_end = int (lon2);
        minutes_lon_end = (lon2 - degrees_lon_end) * 60;
        minutes_lon_end=(int)minutes_lon_end;
        if (minutes_lon_end >-10 && minutes_lon_end < 10) {
           minutes_lon_end= minutes_lon_end/10;
           }
           else 
            {
               minutes_lon_end= minutes_lon_end/100;
               }

        if (minutes_lon_end ==1 || minutes_lon_end==-1) {
            minutes_lon_end=minutes_lon_end/100;
        }
        lon_end_deg=degrees_lon_end + minutes_lon_end;

        cout << "Done degrees_lon_end!" << endl;

         /*LCA*/        
        Lca=tan(45+lat_beg_deg/2);
        Lca=abs(Lca);
        Lca=7915.7*log10(Lca);
        Lca=abs(Lca);

        /*LCB*/      
        Lcb=tan(45+lat_end_deg/2);
        Lcb=abs(Lcb);
        Lcb=7915.7*log10(Lcb);
        Lcb=abs(Lcb);

        /*LC*/       
        Lc=Lcb-Lca;
        Lc=abs(Lc);

        /*G*/       
        G_diff=lon_end_deg-lon_beg_deg;
        G_diff=abs(G_diff);
        G_int=int(G_diff);      
        G_pr=G_diff-G_int;
        if (G_pr==1) {
            G_pr=0;
        }
        G_pr=G_pr*100;      
        G=G_int*60+int(G_pr);
        TanV=G/Lc;      
        V=atan(TanV)*57.2957795;

        if (lat_end_deg>lat_beg_deg && lon_end_deg>lon_beg_deg) {
            Rv=V;}
            else if (lat_end_deg>lat_beg_deg && lon_end_deg<lon_beg_deg) {
                Rv=360-V;}
                else if (lat_end_deg<lat_beg_deg && lon_end_deg<lon_beg_deg) {
                    Rv=180+V;}
                    else {
                        Rv=180-V;}

    char query[100000];
    sprintf(query, "INSERT INTO testRv(ind, Rv) VALUES(%i, %g)", ind, Rv);
    mysql_query(connection, query);
}

       mysql_close(connection);
       cout << "Done!" << endl;
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T11:40:19.327

要优化代码，您可以在分析算法的复杂性并找到具有较低复杂性的算法后尝试更改算法。这个任务背后没有魔法，你必须研究才能弄清楚。

或者您使用依赖于平台的专用工具来分析代码。分析器会告诉您在程序的每个级别上花费了多少时间。然后可以调查值得努力尝试并找到不同方法的地方。

你的问题没有灵丹妙药。你必须调查和研究。

# c# - 如何解决这个问题：集合中的结构没有改变

> ID：15408147
> 
> 赞同：3
> 
> 时间：2013-03-14T11:36:29.420
> 
> 标签：c#, .net, list, struct

我在使用结构时遇到问题。

我有这个结构：

```
struct MyStruct
{
  public int x;
  public int y;

  public MyStruct(int x,int y)
  {
    this.x = x;
    this.y = y;
  }
} 
```

当我尝试将此结构添加到这样的列表中时：

```
List<MyStruct> myList = new List<MyStruct>();

// Create a few instances of struct and add to list
myList.Add(new MyStruct(1, 2));
myList.Add(new MyStruct(3, 4));
myList[1].x = 1;//<=====Compile-time error! 
```

我收到此错误：

```
Compile-time error: Can't modify '...' because it's not a variable 
```

为什么我会收到此错误以及如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T11:37:25.813

**结构通常是可变的，即您可以直接修改其成员的值。**

根据这个[网站](http://csharp.2000things.com/2013/02/12/778-a-struct-isnt-mutable-when-used-in-a-collection/)：

但是，如果在集合类（如 List）中使用结构，则不能修改其成员。通过对集合进行索引来引用该项目会返回该结构的副本，您无法对其进行修改。要更改列表中的项目，您需要创建结构的新实例。

```
 List<MyStruct> myList = new List<MyStruct>();

 // Create a few instances of struct and add to list
myList.Add(new MyStruct(1, 2));
myList.Add(new MyStruct(3, 4));
myList[1].x = 1;//<=====Compile-time error!

 // Do this instead
 myList[1] = new MyStruct(1,myList[1].y); 
```

如果将结构存储在数组中，则可以更改结构成员之一的值。

```
 MyStruct[] arr = new MyStruct[2];
 arr[0] = new MyStruct(1, 1);
 arr[0].x= 5.0;  // OK 
```

# c# - Task<> 对象上的 C# async/await Progress 事件

> ID：15408148
> 
> 赞同：42
> 
> 时间：2013-03-14T11:36:31.807
> 
> 标签：c#, async-await

我对 C# 5 的 new `async`/`await`关键字完全陌生，我对实现进度事件的最佳方式感兴趣。

`Progress`现在，如果事件本身发生，我更喜欢它`Task<>`。我知道我可以将事件放在包含异步方法的类中，并在事件处理程序中传递某种状态对象，但对我来说，这似乎更像是一种解决方法而不是解决方案。我可能还希望不同的任务在不同的对象中触发事件处理程序，这样听起来很混乱。

有没有办法我可以做类似于以下的事情？：

```
var task = scanner.PerformScanAsync();
task.ProgressUpdate += scanner_ProgressUpdate;
return await task; 
```

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-03-14T11:39:22.020

推荐的方法在[基于任务的异步模式](http://msdn.microsoft.com/en-us/library/hh873175.aspx)文档中进行了描述，该文档为每个异步方法提供了自己的`IProgress<T>`：

```
public async Task PerformScanAsync(IProgress<MyScanProgress> progress)
{
  ...
  if (progress != null)
    progress.Report(new MyScanProgress(...));
} 
```

用法：

```
var progress = new Progress<MyScanProgress>();
progress.ProgressChanged += ...
PerformScanAsync(progress); 
```

笔记：

1.  按照惯例，该`progress`参数可能是`null`调用者不需要进度报告的情况，因此请务必在您的`async`方法中检查这一点。
2.  进度报告本身是异步的，因此您应该在每次调用时创建一个新的参数实例（更好的是，只需为事件参数使用不可变类型）。您不*应该*对`Progress`.
3.  该`Progress<T>`类型将在构造时捕获当前上下文（例如，UI 上下文），并将`ProgressChanged`在该上下文中引发其事件。因此，您不必担心在调用`Report`.

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2013-03-14T11:39:05.217

简单地说，`Task` *不*支持进步。然而，已经有一种传统的方式来做到这一点，即使用[`IProgress<T>`](http://msdn.microsoft.com/en-us/library/hh138298.aspx)界面。基于[任务的异步模式](http://msdn.microsoft.com/en-us/library/hh873175.aspx)基本上建议重载异步方法（在有意义的地方）以允许客户端传入`IProgress<T>`实现。然后，您的 async 方法将通过它报告进度。

Windows 运行时 (WinRT) API*确实*[`IAsyncOperationWithProgress<TResult, TProgress>`](http://msdn.microsoft.com/en-us/library/windows/apps/br206594.aspx)在和类型中内置了进度指示器[`IAsyncActionWithProgress<TProgress>`](http://msdn.microsoft.com/en-us/library/windows/apps/br206581.aspx)...因此，如果您实际上是为 WinRT 编写代码，那么这些都值得研究 - 但也请阅读下面的评论。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-11-06T16:22:38.633

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-27T18:55:14.630

When using a Task.Run lambda I have used an Invoke Action inside of this to update a ProgressBar control. This may not be the best way but it worked in a pinch without having to restructure anything.

```
 Invoke(new Action(() =>

               {
                   LogProgress();
               })); 
```

Which takes it to...

```
 private void LogProgress()
        {       
          progressBar1.Value = Convert.ToInt32((100 * (1.0 * LinesRead / TotalLinesToRead)));
        } 
```

# c - 矢量线性插值与线性外插相同吗？

> ID：15408153
> 
> 赞同：4
> 
> 时间：2013-03-14T11:36:42.770
> 
> 标签：c, vector, interpolation

具有如下所示的线性插值 (lerp) 函数：

```
/// Performs a linear interpolation between two vectors. (@p v1 toward @p v2)
///  @param[out]    dest    The result vector. [(x, y, x)]
///  @param[in]     v1      The starting vector.
///  @param[in]     v2      The destination vector.
///  @param[in]     t       The interpolation factor. [Limits: 0 <= value <= 1.0]
inline void dtVlerp(float* dest, const float* v1, const float* v2, const float t)
{
    dest[0] = v1[0]+(v2[0]-v1[0])*t;
    dest[1] = v1[1]+(v2[1]-v1[1])*t;
    dest[2] = v1[2]+(v2[2]-v1[2])*t;
} 
```

这里通过线性外推，我的意思是在线上找到一个位置（见图） ![在此处输入图像描述](../Images/0d36bf2d53cc1987d87b86dc19baf4ad.png)

它是否适用于线性外推（比如提供`coef > 1`或小于`0`）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T11:53:13.767

是的，外推与插值相同（至少在这种情况下）。

如果您从高中几何中回忆起，任何线都由以下形式的方程定义：

```
y = mx + c 
```

其中`m`是梯度，`c`是偏移量（特别是 y 轴截距）。如果您查看上面的代码，您会看到每个维度都有以下形式的等式：

```
dest = v1 + (v2-v1)*t 
```

这是一样的！我们简单地替换如下：

*   `y <-- dest`
*   `x <-- t`
*   `m <-- (v2-v1)`
*   `c <-- v1`

因此，您可以设置`t`为任何值（不仅仅是在 [0,1] 范围内）并在线上某处获得一个唯一点。

# python - 使用自定义期间重新采样

> ID：15408156
> 
> 赞同：12
> 
> 时间：2013-03-14T11:36:45.957
> 
> 标签：python, pandas

是否有一种“食谱”方法可以对具有（半）不规则周期的 DataFrame 进行重新采样？

我每天都有一个数据集，并希望它重新采样到有时（在科学文献中）被称为 dekad 的数据。我不认为它有一个合适的英语术语，但它基本上将一个月分为三个〜十天的部分，其中第三个是 8 到 11 天之间的任何剩余部分。

我自己提出了两种解决方案，一种是针对这种情况的特定解决方案，另一种是针对任何不规则时期的更通用的解决方案。但是两者都不是很好，所以我很好奇其他人如何处理这些类型的情况。

让我们从创建一些示例数据开始：

```
import pandas as pd

begin = pd.datetime(2013,1,1)
end = pd.datetime(2013,2,20)

dtrange = pd.date_range(begin, end)

p1 = np.random.rand(len(dtrange)) + 5
p2 = np.random.rand(len(dtrange)) + 10

df = pd.DataFrame({'p1': p1, 'p2': p2}, index=dtrange) 
```

我想出的第一件事是按个别月份（YYYYMM）分组，然后手动切片。喜欢：

```
def to_dec1(data, func):

    # create the indexes, start of the ~10day period
    idx1 = pd.datetime(data.index[0].year, data.index[0].month, 1)
    idx2 = idx1 + datetime.timedelta(days=10)
    idx3 = idx2 + datetime.timedelta(days=10)

    # slice the period and perform function
    oneday = datetime.timedelta(days=1)
    fir = func(data.ix[:idx2 - oneday].values, axis=0)
    sec = func(data.ix[idx2:idx3 - oneday].values, axis=0)
    thi = func(data.ix[idx3:].values, axis=0)

    return pd.DataFrame([fir,sec,thi], index=[idx1,idx2,idx3], columns=data.columns)

dfmean = df.groupby(lambda x: x.strftime('%Y%m'), group_keys=False).apply(to_dec1, np.mean) 
```

结果是：

```
print dfmean

                  p1         p2
2013-01-01  5.436778  10.409845
2013-01-11  5.534509  10.482231
2013-01-21  5.449058  10.454777
2013-02-01  5.685700  10.422697
2013-02-11  5.578137  10.532180
2013-02-21       NaN        NaN 
```

请注意，您总是会得到一整月的“dekads”作为回报，这不是问题并且在需要时很容易移除。

另一种解决方案通过提供一系列日期来工作，您可以在这些日期切分 DataFrame 并在每个段上执行功能。它在您想要的时期方面更加灵活。

```
def to_dec2(data, dts, func):

    chucks = []
    for n,start in enumerate(dts[:-1]):

        end = dts[n+1] - datetime.timedelta(days=1)
        chucks.append(func(data.ix[start:end].values, axis=0))

    return pd.DataFrame(chucks, index=dts[:-1], columns=data.columns)

dfmean2 = to_dec2(df, dfmean.index, np.mean) 
```

请注意，我使用先前结果的索引作为日期范围来节省一些时间自己“构建”它。

处理这些案件的最佳方式是什么？Pandas 中是否有更多内置方法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-14T12:14:43.323

如果您使用 numpy 1.7，您可以使用 datetime64 和 timedelta64 数组进行计算：

创建样本数据：

```
import pandas as pd
import numpy as np

begin = pd.datetime(2013,1,1)
end = pd.datetime(2013,2,20)

dtrange = pd.date_range(begin, end)

p1 = np.random.rand(len(dtrange)) + 5
p2 = np.random.rand(len(dtrange)) + 10

df = pd.DataFrame({'p1': p1, 'p2': p2}, index=dtrange) 
```

计算十日的日期：

```
d = df.index.day - np.clip((df.index.day-1) // 10, 0, 2)*10 - 1
date = df.index.values - np.array(d, dtype="timedelta64[D]")
df.groupby(date).mean() 
```

输出是：

```
 p1         p2
2013-01-01  5.413795  10.445640
2013-01-11  5.516063  10.491339
2013-01-21  5.539676  10.528745
2013-02-01  5.783467  10.478001
2013-02-11  5.358787  10.579149 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T12:31:00.490

使用 HYRY 的数据和解决方案直到`d`变量的计算，我们也可以在 pandas 0.11-dev 或更高版本（无论 numpy 版本）中执行以下操作：

```
In [18]: from datetime import timedelta

In [23]: pd.Series([ timedelta(int(i)) for i in d ])
Out[23]: 
0             00:00:00
1     1 days, 00:00:00
2     2 days, 00:00:00
3     3 days, 00:00:00
4     4 days, 00:00:00
5     5 days, 00:00:00
6     6 days, 00:00:00
7     7 days, 00:00:00
8     8 days, 00:00:00
9     9 days, 00:00:00
10            00:00:00

47    6 days, 00:00:00
48    7 days, 00:00:00
49    8 days, 00:00:00
50    9 days, 00:00:00
Length: 51, dtype: timedelta64[ns] 
```

日期的构造类似于上面

```
date = pd.Series(df.index) - pd.Series([ timedelta(int(i)) for i in d ])
df.groupby(date.values).mean() 
```

# android - Sqlite 打开助手插入其他更新？

> ID：15408163
> 
> 赞同：-1
> 
> 时间：2013-03-14T11:36:59.090
> 
> 标签：android, android-sqlite

我要成功插入数据

这是我的代码：

```
 public void insertData(String strTableName,
            ArrayList<HashMap<String, String>> arrListproductdatabase) {
        db = this.getWritableDatabase();
        ContentValues cv = new ContentValues();
        for (int i = 0; i < arrListproductdatabase.size(); i++) {
            // cv.put(columnName, arrListOfRecord.get(i).get("name"));
            cv.put(columnproductname,
                    arrListproductdatabase.get(i).get("product"));
            cv.put(columnproductprice,
                    arrListproductdatabase.get(i).get("price"));
            cv.put(columnproductquantity,
                    arrListproductdatabase.get(i).get("quantity"));
            cv.put(columnproductid,
                    arrListproductdatabase.get(i).get("productID"));
            cv.put(columnresturantID,
                    arrListproductdatabase.get(i).get("resturantID"));

            db.insert(strTableName, null, cv);

        } 
```

我希望当我必须再次按下添加按钮时，它应该检查产品是否已经插入，并且在这种情况下它应该更新和所有。

我不想创建任何重复的值。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:45:17.053

您可以检查数据库中的不同值。请点击链接了解更多详情

[android在将数据插入数据库之前检查重复值](https://stackoverflow.com/questions/10658513/android-check-duplicate-values-before-inserting-data-into-database)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T11:47:50.900

将“产品”字段设置为唯一键。因此，当重复值从标准到达时`insert`，它将简单地返回 -1 并且错误消息将被吞没。

您可以通过使用`insertWithOnConflict (String table, String nullColumnHack, ContentValues initialValues, int conflictAlgorithm)`where 您还指定可以是值的冲突算法来控制行为：

CONFLICT_ABORT
CONFLICT_FAIL
CONFLICT_IGNORE
CONFLICT_REPLACE
CONFLICT_ROLLBACK

查看有关[冲突解决类型](http://www.androidjavadoc.com/1.1_r1_src/android/database/sqlite/SQLiteDatabase.ConflictAlgorithm.html)的描述的参考。

还有一个`updateWithOnConflict`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-14T11:50:47.450

你可以这样做：

```
public boolean checkProduct(String product){

        // shold open database here
        Cursor mCursor = 
                db.query(true, DATABASE_TABLE, null, "product='" + product+"'", null, null, null, null, null);
        if(mCursor != null){
            mCursor.close();
            // shold close database here
            return true;
        }
        // shold close database first here also
        return false;
    } 
```

希望这对您有所帮助。

# eclipse - Eclipse 的 Magicdraw 插件

> ID：15408164
> 
> 赞同：1
> 
> 时间：2013-03-14T11:37:01.157
> 
> 标签：eclipse, eclipse-plugin, uml, magic-draw

我想使用 Magicdraw 为一些 Java 代码创建一个序列图。我已经安装了 Magicdraw Enterprise 版本。

我可以在 Eclipse 中安装一个可以从代码生成序列图的插件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T22:52:44.947

Magicdraw Enterprise 开箱即用 - 不需要 Eclipse。

我目前没有可用的工具，但我会尝试从记忆中解释。

您需要为 Java 创建一个**代码工程集**。

1.  使用名为“从磁盘选择”（或类似名称）的选项卡对其进行配置，然后从磁盘中选择您的 Java 文件。
2.  它应该检测类及其内容并创建一个代码工程集。
3.  展开代码工程集，以及它下面的类。嵌套在类下面的是不同的方法（在这里，我不记得它是在配置菜单的右窗格中，还是在关闭它之后，在包含树中）。
4.  现在，如果您右键单击该方法，您应该可以选择将方法实现生成为序列图。

我希望这个近似的解释有所帮助。如果您需要更详细的内容（例如，我假设您知道代码工程集是什么），请随时提出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-24T11:02:57.050

你试过了吗？[http://jdocs.nomagic.com/190/index.html?overview-summary.html](http://jdocs.nomagic.com/190/index.html?overview-summary.html)（类：ModelElementsManager --> CreateDiagram()

Magicdraw 提供了一个 java API。可以通过编程方式创建序列图。在开发之前，您可能需要遵循这些说明：[https ://docs.nomagic.com/display/MD185/Development+in+Eclipse](https://docs.nomagic.com/display/MD185/Development+in+Eclipse)

我希望，我能够提供帮助。

# asp.net-mvc - 通过 umbraco 中的脚本文件保存表单值

> ID：15408166
> 
> 赞同：1
> 
> 时间：2013-03-14T11:37:05.743
> 
> 标签：asp.net-mvc, razor, umbraco

你好，我想在数据库中保存 umbraco 表单的值，为此我制作了脚本文件，在这个脚本文件中我创建了保存数据的函数，并在同一个脚本文件中调用了这个函数，这个脚本文件用于宏，我有在我的页面模板中调用了这个宏，但它不起作用，这种方法是否合适，或者我必须做其他事情，我的基本目标是在不创建用户控件的情况下将数据保存在数据库中

代码是

```
@functions
{
    public void AddToCart()
    {
        string con = System.Configuration.ConfigurationManager.AppSettings["umbracoDbDSN"].ToString();
        SqlConnection OnCon = new SqlConnection(System.Configuration.ConfigurationManager.AppSettings["umbracoDbDSN"].ToString());
        ItemsDataContext db = new ItemsDataContext(con);
        var request = HttpContext.Current.Request;
        string itemcode= request.Form["ItemCode"].ToString();
        string itemname = request.Form["ItemName"].ToString();
        string itemcategory = Request.Form["ItemCategory"].ToString();
        string userid = "Pallavi";
        db.sp_AddItems(userid, itemcode, itemcategory, itemname, 0);

        HttpContext.Current.Session["UserId"] = "Pallavi";
    }
}

@if (!IsPost)
{
    AddToCart();
} 
```

并在模板上调用这个宏

```
<umbraco:Macro Alias="Uc_Cart" runat="server"></umbraco:Macro> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T12:10:02.820

你的做法是错误的。您必须使用 Umbraco 在其 API 中提供的方法，并且不要尝试将数据直接写入数据库。

尝试使用此代码从 Razor 代码创建一个新文档：

```
@using umbraco.BusinessLogic;
@using umbraco.cms.businesslogic.web;
@{
    DocumentType dt = DocumentType.GetByAlias("Textpage"); 
    User author = umbraco.BusinessLogic.User.GetUser(0); 
    Document doc = Document.MakeNew("My new document", dt, author, parentID); 
} 
```

上面的示例适用于 Umbraco 4.x。如果您使用的是 Umbraco v6.x，您还可以使用新的 API 方法：

```
@{
    // get an instance of the contentService
    var contentService = ApplicationContext.Services.ContentService;
    // create new content, the last param is the userId and is optional [default = 0]
    IContent newContent = contentService.CreateContent("My new document", parentID, "Textpage", 0);
    // set property values
    newContent.SetValue("propertyAlias", "Value");
    // save (or save and publish)
    contentService.Save(newContent);
} 
```

# performance - Oracle 优化器不接受索引提示

> ID：15408167
> 
> 赞同：-2
> 
> 时间：2013-03-14T11:37:10.230
> 
> 标签：performance, oracle, plsql, query-optimization

当我运行合并查询时，索引无法读取并且查询运行速度很慢，请告诉我。

stage_dim_accounts(rbc_code) 中的索引

map_rbc_etl(free_code_9) 中的索引

```
MERGE INTO stage_dim_accounts t 
USING map_rbc_etl s ON (t.rbc_code = s.free_code_9)
WHEN MATCHED THEN UPDATE 
SET t.indx_no= s.indx_no  
WHERE s.annexure= 'AXN-I' 
AND (.free_code_9 <> 'NA' AND s.free_code_9   <> '0') 
AND t.rbc_code <> 'NA' 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T12:33:48.553

优化器足够聪明，知道您的索引是无用的。

如果该列中的大多数值是“0”或“NA”，则索引`free_code`可能很有用。由于您没有提供有关数据量或分布的任何信息，我们无法确定。但是您对 有其他限制条件 `map_rbc_etl`，因此无论如何数据库都需要访问该表。我的猜测是优化器选择在 map_rbc_etl 上使用全表扫描，因为这比大量索引读取要快。

这是因为索引读取是两个操作 - 读取索引，读取行。因此，只有当读取的行的*百分比*很小时，它才会派发股息。否则，读取所有行并将它们筛选到内存中会更有效。

这是调优的“秘密”：索引读取并不总是更快；全表扫描并不总是坏事。

类似的逻辑适用于阅读`stage_dim_accounts`. 索引列不太可能是选择性的。除非 ... 除非 中的行数 `map_rbc_etl`非常少并且仅​​匹配 `stage_dim_accounts`. 我之前对数据指标的评论再次适用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T20:02:13.117

indexes to use on map_rbc_etl( free_code_9, annexure) and on stage_dim_accounts(rbc_code);

now these may not be used for reasons in previous answer. Additional reasons an index may not be used are: 1\. The optimizer decides it would be more efficient not to use index. 2\. if column is on view and has function call on column. To use this use function based indexes. 3\. you perform mathematical operation in query. Note you can look at explain plan and create index to match how it is loading the rows. 4\. you concat columns together in where clause. Use function based index for overcoming this. 5\. You do not include first column in concatenated index in where clause of your statement. Note that Oracle 9i or greater do skip scanning and can use the index. 6\. You use or clause. In this case it is best to create one index for all but the or clause and one for each of the or values then it will use all indexes appropriately.

if you don't know how to use function based indexes an example for a to_upper() in where clause you would use the following

```
create indexName on tableName(to_upper(colname)); 
```

any oracle sql function (built in or user created) can be in the index.

# java - 编写java“flatten”方法的类型问题

> ID：15408170
> 
> 赞同：0
> 
> 时间：2013-03-14T11:37:20.487
> 
> 标签：java, generics

我试图为 Java 想出一个很好的类似 scala 的 flatten 方法，但在类型中迷失了：

```
public static <T, IC extends Collection<T>, OC extends Collection<IC>> IC flatten(OC values) {
  IC result = (IC) new HashSet<T>();
  for (Collection<T> value : values) {
    result.addAll(value);
  }
  return result;
} 
```

这在 1.6 中有效（带有警告），但在 1.7 中我得到：

```
 error: invalid inferred types for T,IC; inferred type does not conform to declared bound(s)
    inferred: Set<AffiliationRole>
    bound(s): Collection<Object>
    where T,IC,OC are type-variables:
    T extends Object declared in method <T,IC,OC>flatten(OC)
    IC extends Collection<T> declared in method <T,IC,OC>flatten(OC)
    OC extends Collection<IC> declared in method <T,IC,OC>flatten(OC) 
```

*更新*：

在 1.7 中产生编译错误的实际代码：

```
 HashSet<Collection<String>> lists = new HashSet<Collection<String>>();
    Collection<String> flatten = ArrayUtil.flatten(lists); 
```

可以通过以下方式修复：Collection flatten = ArrayUtil., HashSet>>flatten(lists);

尽管 assylias 的评论中有一个（好多）更好的解决方案：

```
 public static <T> Collection<T> flatten(Collection<? extends Collection<T>> values) {
      Collection<T> result = new HashSet<T>();
      for (Collection<T> value : values) {
        result.addAll(value);
      }
      return result;
    } 
```

# delphi - 如何在 Delphi 7 中使用 chm？

> ID：15408179
> 
> 赞同：4
> 
> 时间：2013-03-14T11:38:06.157
> 
> 标签：delphi, delphi-7, chm

如何从 Delphi 7 程序中的 chm 文件中调用帮助？

```
Application.HelpFile := 'd:\help.chm';
Application.HelpCommand(HELP_CONTEXT, 10); 
```

结果是

> 为什么我无法从该程序中获得帮助？
> 
> 此程序的帮助是以 Windows 帮助格式创建的，这取决于此版本的 Windows 中未包含的功能。但是，您可以下载一个允许您查看以 Windows 帮助格式创建的帮助的程序。
> 
> 有关详细信息，请访问 Microsoft 帮助和支持网站。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T14:41:44.773

问题在于，默认情况下，Delphi 7 假定帮助文件使用 Vista 未附带的旧 WinHelp 格式。即使您的帮助文件具有 .chm 扩展名，Delphi 也会尝试使用 WinHelp 命令显示它。而且由于 WinHelp 不存在，您会收到您报告的错误消息。

有多种方法可以让帮助系统显示 HTML 帮助。例如，一种常见的技术是实现对象的`OnHelp`处理程序`Application`并将帮助路由到对`HtmlHelp`API 的调用。[我在最近的回答](https://stackoverflow.com/questions/15012547/helpfile-opened-from-modal-window-unresponsive#15013128)中给出了一个非常简单的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T09:27:11.120

要打开 CHM 文件，我使用以下代码：

```
 ShellExecute(Handle, 'open', PChar(ExtractFilePath(Application.ExeName) + 'help.chm'), nil, nil, SW_SHOW); 
```

# ruby - 编译依赖于其他类的 ruby 脚本

> ID：15408182
> 
> 赞同：0
> 
> 时间：2013-03-14T11:38:14.767
> 
> 标签：ruby, ocra

压缩我的脚本时遇到问题。

我有一个 main.rb 和子文件夹中的一些类，例如 Subfolder/Class.rb 在我的 main.rb 中，我有这样声明的类：

**需要'./Subfolder/Class.rb'**

当我只运行我的主脚本时，它就可以工作。当我的 exe 与 main.rb 位于同一位置时，它也可以工作。
但是当我将exe放在其他地方时，我得到了这个错误：

```
C:/Users/MLEING~1/AppData/Local/Temp/ocr53C2.tmp/lib/ruby/site_ruby/1.9.1/rubyge
ms/custom_require.rb:36:in `require': cannot load such file -- ./Parsing/Calibra
tionState (LoadError) from C:/Users/MLEING~1/AppData/Local/Temp/ocr53C2.tmp/lib/ruby/site_ruby
/1.9.1/rubygems/custom_require.rb:36:in `require'
    from C:/Users/MLEING~1/AppData/Local/Temp/ocr53C2.tmp/src/main.rb:9:in `
<main>' 
```

我可以以某种方式将依赖项放入我的 exe 中吗？
我也尝试像这样包含它们：

```
ocra main.rb Subfolder/*.rb 
```

但这无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:44:23.033

您是否尝试过从您的项目中制作红宝石宝石？[http://guides.rubygems.org/make-your-own-gem/](http://guides.rubygems.org/make-your-own-gem/)

Gems 定义了它们自己的依赖关系。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-16T01:29:05.447

您的要求正在使用当前目录的相对路径（您可以看到，因为它以“./”开头

相反，请尝试：

需要“子文件夹/Class.rb”

并确保 $LOAD_PATH 包含所有 ruby​​ 代码解包的位置（您可以通过检查 $0 来查看（或找出 $0 的完整路径并要求 .rb 具有完整路径）

# mysql - MySQL，第二个 INNER JOIN

> ID：15408191
> 
> 赞同：1
> 
> 时间：2013-03-14T11:38:35.207
> 
> 标签：mysql

嗨，我试图与夫妇 INNER JOIN 进行查询，我的错在哪里？

SELECT job_tbl.id, accounts.username AS starter, accounts.username AS worker, job_tbl.comment, job_tbl.date, job_tbl.status

FROM job_tbl

在 job_tbl.starter = accounts.id 上的 INNER JOIN 帐户

在 job_tbl.worker = accounts.id 上的 INNER JOIN 帐户

job_tbl 表在这里：

```
+----+---------+--------+---------+------+--------+
| id | starter | worker | comment | date | status |
+----+---------+--------+---------+------+--------+
| 1  |    1    |    3   |   qwe   | date |   10   |
+----+---------+--------+---------+------+--------+
| 2  |    2    |    1   |   qwe   | date |   10   |
+----+---------+--------+---------+------+--------+ 
```

此处的帐户表：

```
+----+------------+-----------+-------+
| id |  username  | extension | email |
+----+------------+-----------+-------+
| 1  |   Julia    |    100    | email |
+----+------------+-----------+-------+
| 2  |    Eve     |    101    | email |
+----+------------+-----------+-------+
| 3  |    Max     |    102    | email |
+----+------------+-----------+-------+ 
```

结果我希望它是：

```
+----+---------+--------+---------+------+--------+
| id | starter | worker | comment | date | status |
+----+---------+--------+---------+------+--------+
| 1  |  Julia  |   Max  |   qwe   | date |   10   |
+----+---------+--------+---------+------+--------+
| 2  |   Eve   |  Julia |   qwe   | date |   10   |
+----+---------+--------+---------+------+--------+ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T11:41:29.363

您没有指定将哪个`accounts`表实例用作启动器或工作器。试试这个：

```
SELECT job_tbl.id, job_tbl.description, Starter.username AS starter, Worker.username AS worker, job_tbl.comment, job_tbl.date, job_tbl.status
FROM job_tbl
INNER JOIN accounts AS Starter ON job_tbl.starter = Starter.id
INNER JOIN accounts AS Worker ON job_tbl.worker = Worker.id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T11:40:27.800

问题是您要加入两个表而没有指定导致模棱两可的状态的`ALIAS`表。`accounts`

```
SELECT  a.*,
        b.username StarterName,
        c.userName WorkerName
FROM    job_tbl a
        INNER JOIN account b
            ON a.starter = b.id
        INNER JOIN account c
            ON a.worker = c.ID 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

# android - Android 资产管理器异常

> ID：15408195
> 
> 赞同：1
> 
> 时间：2013-03-14T11:38:43.427
> 
> 标签：android, xamarin, xamarin-studio, xamarin.android

我想使用 Android Assets 并按照官方文档中的[教程进行操作。](http://docs.xamarin.com/guides/android/advanced_topics/using_android_assets)

已将资产类型设置为`AndroidAssets`如它所说的那样，但它因找不到文件而引发异常。我有一个根设备，所以在检查时我注意到文件实际上根本不在设备上（/data/data/com.company.application/files/SomeFile.txt）。

**编辑：**

```
String filename = Path.Combine(System.Environment.GetFolderPath(System.Environment.SpecialFolder.Personal), "AboutAssets.txt");
FileStream fs = new FileStream(filename, FileMode.Open, FileAccess.Read); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:56:06.513

Android 资产存储在 APK 文件中，因此您无法使用您的代码找到该文件。这些文件没有绝对路径。

只需使用[`Assets.Open`](http://developer.xamarin.com/api/member/Android.Content.Res.AssetManager.Open/p/System.String/)来访问资产，就像[教程](http://docs.xamarin.com/guides/android/advanced_topics/using_android_assets#Reading_Assets)中所教的一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T19:06:36.810

你可以试试：

```
AssetManager assets = context.getAssets();
InputStream is = assets.open(filename); 
```

上下文对象是指应用程序的上下文。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-16T12:36:10.813

不久前发布了这个并最终没有使用 Xamarin，因为我从未找到解决方案。我最近回到了 Xamarin，最新的更新似乎已经解决了这个问题——同一个项目现在可以正常工作，没有进行任何更改。

因此，如果其他人遇到这种情况 - 请尝试更新。

# c++ - 如何通过 C++ 打开应用程序？

> ID：15408197
> 
> 赞同：-7
> 
> 时间：2013-03-14T11:38:45.343
> 
> 标签：c++

我想通过我的 C++ 应用程序打开一个 PDF 文件。所以我想打开一个PDF程序并将文件名作为参数传递给它。我怎样才能做到这一点？

在 Windows 上，它是一个控制台应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T11:41:53.203

在 Windows 上使用`ShellExecute`with`open`命令，只需将路径传递给 PDF 文件。系统会做剩下的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T11:42:31.207

这取决于您使用的操作系统。在 linux 中，您的答案在这里[http://www.gidforums.com/t-3369.html](http://www.gidforums.com/t-3369.html)

# jquery - 声纳检查 jquery 代码错误

> ID：15408199
> 
> 赞同：3
> 
> 时间：2013-03-14T11:38:54.770
> 
> 标签：jquery, sonarqube, pmd

**我使用声纳检查 jquery 代码，但它总是抛出异常：**

```
C:\Documents and Settings\user\.jenkins\workspace\ksp2\ant\sonar_web.xml:31: com.sonar.sslr.impl.LexerException: Unable to lex url: file:/C:/Documents%20and%20Settings/user/.jenkins/workspace/ksp2/WebContent/js/post/viewEditRevisions.js
Caused by: com.sonar.sslr.impl.LexerException: Unable to lex source code at line : 197 and column : 42 in file : file:/C:/Documents%20and%20Settings/user/.jenkins/workspace/ksp2/WebContent/js/post/viewEditRevisions.js
Caused by: java.lang.IllegalStateException: None of the channel has been able to handle character '"' (decimal value 34) at line 197, column 42
    at org.sonar.channel.ChannelDispatcher.consume(ChannelDispatcher.java:87)
    at com.sonar.sslr.impl.Lexer.lex(Lexer.java:126) 
```

我不知道为什么。我的 jquery 文件太长，它在这一行抛出异常：

```
 var postTemplate = '<h3><div class="title">'+data.postResult.title+'</div></h3><p>'+data.postResult.contentPreview+'</p>'+postTags; 
```

我很困惑，我将编码设置为 UTF-8，但它仍然抛出异常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T01:26:40.583

您可以尝试这种方式： sonar_web.xml 添加以下代码`<property key="sonar.sourceEncoding" value="utf-8" />`

参考：[https ://stackoverflow.com/a/15537832/2193246](https://stackoverflow.com/a/15537832/2193246)

# java - 在单线程应用程序中重用 Runnable

> ID：15408200
> 
> 赞同：0
> 
> 时间：2013-03-14T11:38:56.827
> 
> 标签：java, api-design

我有一些对我隐藏的接口，例如 web-server/OSGi/JMS。对于那件事，我清楚地看到了构建和运行阶段。我在代码中看到了几种关于此的方法。

*   在构造函数中混合构造和运行
*   在工厂方法中混合构建和运行
*   为它们中的每一个添加一些 start()/init() 方法
*   为此目的提取一些接口
*   复用Runnable接口

我喜欢最后一种方法。但我不确定它的正确性。工厂方法会更好吗？或者有什么更好的方法吗？

# ios - 如何将平移手势从滚动视图转发到另一个滚动视图

> ID：15408204
> 
> 赞同：1
> 
> 时间：2013-03-14T11:39:04.937
> 
> 标签：ios, uiscrollview, uigesturerecognizer

我有两个 UIScrollViews，如果用户在滚动视图中滚动，我想让另一个滚动视图滚动。我已经阅读了一个解决方案，该解决方案涉及将 pangesturerecognizer 从最初平移的滚动视图传递到另一个滚动视图，但如果我这样做，原始滚动视图根本不会滚动。

我发现，有一个委托方法

```
(BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer 
```

但是如果我尝试连接滚动视图的 pangesturerecognizers 的代表，我的应用程序就会崩溃。

希望可以有人帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:59:43.593

您只需要更新第二个 ScrollView 的 Bounds

就像是 ：-

```
CGRect updateTheViewWithBounds = viewToUpdate.bounds;
updateTheViewWithBounds.origin = scrolledView.contentOffset;
viewToUpdate.bounds = updateTheViewWithBounds; 
```

这将完成工作。

从评论中可以看出，我将举一个小例子。

在 UiViewController 上创建两个滚动视图

```
scrollOne = [[UIScrollView alloc] init];
    [scrollOne setBackgroundColor:[UIColor greenColor]];
    [scrollOne setFrame:CGRectMake(10, 20, 200, 300)];
    [scrollOne setContentSize:CGSizeMake(600, 600)];
    scrollOne.delegate = self;

    scrollTwo = [[UIScrollView alloc] init];
    [scrollTwo setBackgroundColor:[UIColor redColor]];
    [scrollTwo setFrame:CGRectMake(230, 20, 200, 300)];
    [scrollTwo setContentSize:CGSizeMake(600, 600)];
    scrollTwo.delegate = self;

    [self.view addSubview:scrollOne];
    [self.view addSubview:scrollTwo]; 
```

符合 UIScrollView Delegates 并实现相同。

```
 - (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    if([scrollView isEqual:scrollOne])
    {
        CGRect updateTheViewWithBounds = scrollOne.bounds;
        updateTheViewWithBounds.origin = scrollOne.contentOffset;
        scrollTwo.bounds = updateTheViewWithBounds;
        [scrollTwo flashScrollIndicators];
    }
    else if([scrollView isEqual:scrollTwo])
    {
        CGRect updateTheViewWithBounds = scrollTwo.bounds;
        updateTheViewWithBounds.origin = scrollTwo.contentOffset;
        scrollOne.bounds = updateTheViewWithBounds;
        [scrollOne flashScrollIndicators];
    }
} 
```

滚动上述任何滚动视图都会滚动滚动视图。

# c# - 我必须处置 SQLiteCommand 对象吗？

> ID：15408207
> 
> 赞同：6
> 
> 时间：2013-03-14T11:39:10.073
> 
> 标签：c#, sqlite, .net-3.5, system.data.sqlite

我如何对待`SQLiteCommand`对象，我**是否必须在**`Dispose()`之后调用`ExecuteScalar`，`ExecuteNonQuery`或者`ExecuteReader`不？

[SQLiteCommand](http://www.devart.com/dotconnect/sqlite/docs/Devart.Data.SQLite~Devart.Data.SQLite.SQLiteCommand.html)上的文档示例没有处理它，而在[SQLiteTransaction](http://www.devart.com/dotconnect/sqlite/docs/Devart.Data.SQLite~Devart.Data.SQLite.SQLiteTransaction.html)中，该示例处理了 SQLiteCommand 对象。

不过，我总是关闭数据读取器对象。我的应用程序从许多线程访问数据库。

大多数情况下，我对不泄漏连接或不干扰 SQLite 感兴趣。我知道`using`和`IDisposable`使用

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-14T11:41:31.517

最好的做法`IDisposable`是在完成后立即处理所有实现的内容，因为它可能会使用非托管资源。

这应该使用[`using`-statement](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)来完成，因为它包装了使用此对象的代码，并且在发生异常时也会处理它。

```
using(var con = new SQLiteConnection(conString))
using(var cmd = new SQLiteCommand(con))
{
    con.Open();
    // ...
} // also closes the connection 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T11:43:08.740

如果它是一次性的，如果您不再使用它，请将其丢弃。最好的方法是使用 using

```
using(SQLiteCommand cmd as new SQLiteCoammand())
{
   ...
} 
```

所以它会在离开使用范围时自动释放。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T11:41:03.437

只需这样做：

```
using(var connection = new SqlConnection(ConfigurationManager.ConnectionStrings["MyConn"].ConnectionString))
using(var command = connection.CreateCommand())
{
   command.CommandText = "...";
   connection.Open();
   command.ExecuteNonQuery();
} 
```

不在命令上调用 dispose 不会做任何坏事。但是，在其上调用 Dispose 将抑制对终结器的调用，从而使调用 dispose 提高性能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T11:52:00.290

即使发生绕过调用 Close() 的代码的异常，using 语句也会对对象调用 Dispose。这样您就不必编写 try/finally 块来关闭阅读器或连接。您还可以避免这种您忘记编写正确的 finally 块的 100 分之一的情况。

这样的 100 例中的​​ 1 例往往比人们想象的更频繁地发生

# jquery - 用逗号删除输入值中的匹配字符串

> ID：15408211
> 
> 赞同：0
> 
> 时间：2013-03-14T11:39:18.060
> 
> 标签：jquery, replace, match

如何在之前或之后删除带有逗号的匹配字符串

前任 ：

```
<input value="1,2,3,4,5,6,7,8,9,10"> 
```

jQuery :

```
var input = $("input");
var val = input.val();
var random = Math.ceil(Math.random() * 10);
var new_val = val.replace(random,"");

input.val(new_val); 
```

值看起来不像 1-10（这是一个示例）

我如何在之前或之后删除 comman 的问题？

考虑匹配字符串是否具有第一个位置和最后一个位置。所以有问题

PS：我必须按字符串查找，而不是索引或其他

游乐场：http: [//jsbin.com/ulikof/1/edit](http://jsbin.com/ulikof/1/edit)

任何 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T11:41:37.970

如果在选择随机数时添加尾随逗号，它将删除单个逗号并正确显示：

```
var input = $("input");
var val = input.val();
var random = Math.ceil(Math.random() * 10);

if(val.indexOf(random) != 0) {
  random = ',' + random;
}
else {
  random = random + ','; 
}

var new_val = val.replace(random,"");

input.val(new_val); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T11:45:34.230

这是一种使用纯 JS 的通用方法，您可以在其中添加任意数量的数字而无需更新代码。

[http://jsfiddle.net/zuMNf/1/](http://jsfiddle.net/zuMNf/1/)

```
var input = document.getElementsByTagName('input')[0], // [0] or loop through inputs
    val = input.value,
    arr = val.split(','),
    len = arr.length,
    random = Math.ceil(Math.random() * len);

for(var i = 0; i < len; i++) {
    if(parseInt(arr[i]) == random) {
        var j = i;
    }
};

arr.splice(j, 1);

input.value = arr.join(','); 
```

# javascript - 饼干和 我的脚本是浏览器的一部分——这部分应该是书签。它的作用是：每次添加书签时，将其作为选项添加到作为选择对象的书签中。添加收藏夹时，还会部署 cookie。当用户回访时，脚本会读取 cookie 并一一重新将它们作为选项添加到书签中。这是添加收藏夹并创建 cookie 的部分： function addFav() { var newUrl=prompt("Enter your new favorite", "http://"); 新网址=修复网址（新网址）；var favList=do

ID：15408217

赞同：0

时间：2013-03-14T11:39:29.653

标签：javascript, select, cookies, options

# datetime - 谷歌图表数字日期

> ID：15408219
> 
> 赞同：1
> 
> 时间：2013-03-14T11:39:31.633
> 
> 标签：datetime, user-controls, slider, filtering, google-visualization

错误：第 0 列不是数字第 0 列是我的日期列

```
data.addColumn('date', 'Date');
...
// The variable date here is an epoch
var fullDate = new Date((parseInt(date)*1000));
r.push(new Date(fullDate.getYear(), fullDate.getMonth(), fullDate.getDay()));
// Logging r here yields: Mon Mar 06 113 00:00:00 GMT+1100 (EST)
...
var slider = new google.visualization.ControlWrapper({
  'controlType': 'NumberRangeFilter',
  'containerId': 'control1',
  'options': {
    'filterColumnLabel': 'Date',
       'ui': {'labelStacking': 'vertical'}
  }
}); 
```

我想我需要找到一种方法来使日期数字化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:39:31.633

另一种解决方案是更改滑块的控件类型，而不是使日期数字化。

```
'controlType': 'ChartRangeFilter', 
```

# php - 下载 fwrite($file, $data1); excel表格

> ID：15408221
> 
> 赞同：0
> 
> 时间：2013-03-14T11:39:34.080
> 
> 标签：php, mysql

我有一个页面，显示所有具有过滤功能的数据库..过滤后我想下载到 excel 格式...我成功获取所有数据并 fwrite() 它..现在请解释我如何下载它到excel表

[http://sms.weddingsplanner.co.in/all_inquiry.php](http://sms.weddingsplanner.co.in/all_inquiry.php)这是我的页面，其中出现了 Excel 按钮。

```
 <?php 
                include 'functions.php';
              ob_start();

     if($_POST['types'] == 'name') {  

          $query = "SELECT * FROM visitor_detail WHERE name='".$_POST['filter']."'                               ORDER BY id     DESC ";  
  }  
                         elseif($_POST['types'] == 'mobile') {  

            $query = "SELECT * FROM visitor_detail WHERE mobile='".$_POST['filter']."' ORDER BY id   DESC ";  
       } 
              elseif($_POST['types'] == 'OccasionType') {  

    $query = "SELECT * FROM visitor_detail WHERE OccasionType='".$_POST['filter']."' ORDER BY id DESC ";  
            } 

       elseif($_POST['types'] == 'InquiryDate') {  
    $query="SELECT * FROM visitor_detail WHERE TodayDate between '".$_POST['From']."' and   '".$_POST['TO']."' ORDER BY id DESC " ;  
     }

    elseif($_REQUEST['types'] == 'OccasionDate') {  
                     $que="SELECT * FROM visitor_detail WHERE date between      '".$_REQUEST['From']."' and '".$_REQUEST['To']."' ORDER BY id DESC ";  
                    }
    else {  
                 $query = "SELECT * FROM visitor_detail ORDER BY id DESC ";  
            } 

  $sql = mysql_query($query); 

               $line1="Id\tgender\tname\tmobile\taddress\temail\totherno\tzipcode\tOccasionType\tdate\tgue      st\tdescription\tTodayDate\tauther\t";
             $data="$line1\n";
           $br = '<br>';

         $fileName = "./my.txt";
 $file = fopen($fileName, "w");
fwrite($file, $data."\n");
        $i=1;  
  while($row = mysql_fetch_assoc($sql))
{
            $line2=$i . "\t" . $row['gender'] . "\t" . $row['name'] . "\t" .                           $row['mobile'] . "\t" .    $row['address'] . "\t" . $row['email'] . "\t" . $row['otherno']  . "\t" .     $row['zipcode'] .    "\t" . $row['OccasionType'] . "\t" . $row['date'] . "\t"                              . $row['guest'] . "\t" .    $row['description'] . "\t" . $row['TodayDate'] . "\t" . $row['auther'] . "\t";
      $data1=$line2.$br;
         echo $data1;
              fwrite($file, $data1);
                $i++;
   }
                fclose($file);

  ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:52:56.823

要强制下载服务器上的所有 csv，您可以将其添加到您的 .htaccess 文件中：

```
AddType application/octet-stream pdf 
```

编辑（您的 php 文件中的内联解决方案将更像这样）：

```
header('Content-Type: application/pdf');
header('Content-Disposition: attachment; filename=example.pdf');
header('Pragma: no-cache');
readfile("/path/to/yourfile.pdf"); 
```

# android - 具有自定义字体和粗体样式的文本

> ID：15408225
> 
> 赞同：4
> 
> 时间：2013-03-14T11:39:40.507
> 
> 标签：android, fonts, textview, android-fonts

我正在开发一个应用程序。我正在使用自定义字体。“.ttf”文件自定义文本视图的字体。我将代码用作：

```
Typeface tfArchitectsDaughter = Typeface.createFromAsset(getAssets(), "fonts/ArchitectsDaughter.ttf");
textview.setTypeface(tfArchitectsDaughter); 
```

**现在需要的是：**我想像上面那样自定义文本以及.java 文件中的**BOLD样式。**

如何做到这一点请建议。以及可以对字体进行哪些其他样式或自定义，请提出建议。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-14T11:41:37.597

你可以用

```
textview.setTypeface(tfArchitectsDaughter, Typeface.BOLD); 
```

**注意：**当然你也可以`ITALIC`使用`BOLD_ITALIC`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-14T11:45:51.703

使用 SpannableString。也看看这个教程。[http://blog.stylingandroid.com/archives/177](http://blog.stylingandroid.com/archives/177)。

```
String tempString="Copyright";
TextView text=(TextView)findViewById(R.id.text);
SpannableString spanString = new SpannableString(tempString);
spanString.setSpan(new UnderlineSpan(), 0, spanString.length(), 0);
spanString.setSpan(new StyleSpan(Typeface.BOLD), 0, spanString.length(), 0);
spanString.setSpan(new StyleSpan(Typeface.ITALIC), 0, spanString.length(), 0);
text.setText(spanString); 
```

您还可以在 textview 中为文本使用不同的颜色。

```
SpannableString text = new SpannableString("Lorem ipsum dolor sit amet");  
// make "Lorem" (characters 0 to 5) red  
text.setSpan(new ForegroundColorSpan(Color.RED), 0, 5, 0);  
textView.setText(text, BufferType.SPANNABLE); 
```

[http://www.chrisumbel.com/article/android_textview_rich_text_spannablestring](http://www.chrisumbel.com/article/android_textview_rich_text_spannablestring)。该链接为您提供了更多使用可跨字符串进行样式设置的示例。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-14T11:50:14.547

您可以使用以下代码将文本设置为粗体

创建一个单独的文件作为 style.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <style name="boldText">
        <item name="android:textStyle">bold|italic</item>
        <item name="android:textColor">#FFFFFF</item>
    </style>

    <style name="normalText">
        <item name="android:textStyle">normal</item>
        <item name="android:textColor">#C0C0C0</item>
    </style>
</resources> 
```

在你的java文件中，如果你想让文本在can action之后变为粗体意味着

```
Typeface tfArchitectsDaughter = Typeface.createFromAsset(getAssets(), "fonts/ArchitectsDaughter.ttf");
textview.setTypeface(tfArchitectsDaughter);

myTextView.setTextAppearance(getApplicationContext(), R.style.boldText); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-04T10:00:22.727

您可以将文本加粗为：

```
TextView.setTextAppearance(getApplicationContext(), R.style.boldText); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T13:11:58.007

使用使文本粗体的代码为：

```
TextView.setTextAppearance(getApplicationContext(), R.style.boldText); 
```

# sql-server - SQL 插入 - 消息 207 列名无效

> ID：15408231
> 
> 赞同：2
> 
> 时间：2013-03-14T11:39:55.310
> 
> 标签：sql-server, sql-server-2008-r2, sql-insert

问题是我试图将一些数据插入到我的 SQL 服务器数据库中，但由于某种原因，我不断收到臭名昭著的“无效列名”错误，结果没有插入任何内容。

现在，我相信我知道为什么（有点）会发生这种情况，因为我正在尝试使用案例查询插入一个基于另一列中的字段值的值，但我不确定我真的这样做是正确的 - 请参阅代码：

```
INSERT INTO dbo.table_name(points, discount)
VALUES
(3, CASE WHEN (points = 6) THEN 0.5 WHEN (points = 12) THEN 1.0 ELSE 0 END 
```

我在“点”列上得到无效的列名。它肯定存在，所以我认为我的查询不正确，或者我应该以不同的方式解决这个问题是否正确？

我正在使用 SQL Server 2008 R2 - 不确定这是否有任何区别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T11:48:13.033

VALUES 部分中的数字 3 尚未成为“点”列，因此您不能在 CASE 语句中像这样引用它。您可以将查询重写为类似的内容：

```
INSERT INTO dbo.table_name(points, discount)
select 
    x.points
    ,CASE WHEN (x.points = 6) THEN 0.5 WHEN (x.points = 12) THEN 1.0 ELSE 0 END as discount
from (
    select 3 as points union all
    select 12
) x 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T09:21:49.423

您是否希望能够以某种方式强制执行此业务逻辑？如果是这样，那么在我看来，您可能正在寻找计算列。

```
CREATE TABLE table_name
( 
    ID INT,
    Points INT,
    Discount AS CASE WHEN (Points = 6) THEN 0.5 WHEN (Points = 12) THEN 1.0 ELSE 0 END
) 
```

这样，您插入表中的任何数据都将始终符合这些规则。

插入现在变得非常简单：

```
INSERT INTO table_name (Points) VALUES(6);
INSERT INTO table_name (Points) VALUES(5);
INSERT INTO table_name (Points) VALUES(12); 
```

# jquery - jQuery UI 选项卡和外部链接

> ID：15408232
> 
> 赞同：2
> 
> 时间：2013-03-14T11:39:55.753
> 
> 标签：jquery, html, jquery-ui-tabs

我在让我的 jQuery ui 选项卡链接到外部 HTML 文档时遇到问题，外部 HTML 文档是否必须采用相同的格式，还是应该只是正文内容？

我在 Firefox 控制台上看到的问题是标签不匹配，而这些标签完全`</head>`没有`</head>`意义。

这是 HTML 的样子。

```
<div id = "tabs">
 <ul>
    <li><a href="#policyInfo">Policy Details</a></li>
    <li><a href="editPolicy.html">Edit Policy</a></li> <!-- My problem lies here -->
    <li><a href="#personalInfo">Personal Details</a></li>
 </ul>
... 
```

这就是我的 jQuery 目前的样子。

```
$(function() {
            $("#tabs").tabs();
}); 
```

**总结**：我不知道如何将标签链接到外部网页。我已经尝试过发布在 jQueryUI 网站上的 AJAX 示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:06:40.403

我不知道你为什么会出错。你确定你在href中提到了正确的文件吗？它存在吗？ [JqueryUI Ajax 选项卡](http://jqueryui.com/tabs/#ajax)

```
<div id="tabs"> 
  <ul>
    <li><a href="#policyInfo">Policy Details</a></li>
    <li><a href="editPolicy.html">Edit Policy</a></li> <!-- My problem lies here -->
    <li><a href="#personalInfo">Personal Details</a></li>
  </ul>
 <div id="policyInfo">
    <p>asdf</p>
  </div>
  <div id="personalInfo">
    <p>asdf</p>
  </div>
</div> 
```

查询。

```
$(function() {
    $( "#tabs" ).tabs({
      beforeLoad: function( event, ui ) {
        ui.jqXHR.error(function() {
          ui.panel.html(
            "Couldn't load this tab. We'll try to fix this as soon as possible. " +
            "If this wouldn't be a demo." ); 
        });
      }
    });
  }); 
```

如果你有任何错误？那么可能是您的href位置无效。

# iphone - 自动向呼叫者发送消息

> ID：15408234
> 
> 赞同：-1
> 
> 时间：2013-03-14T11:40:00.600
> 
> 标签：iphone, ios

我想知道有没有办法在 iPhone 中实现一个应用程序，如果一个应用程序运行，那么该应用程序中有一个按钮。并且用户很忙（假设他正在开车）。然后他点击那个按钮.如果在此期间有任何来电者来电，则会向该来电者发送一条自动消息，例如“我很忙。我稍后会打电话给您”。当用户释放按钮时，它将不起作用

请指导我这是否可能，如果是，那么如何？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T11:45:38.730

Apple 不提供调用 API。您不能以编程方式发送短信或拒绝来电。

此外，iOS 6 新增了“请勿打扰”功能：http: [//support.apple.com/kb/HT5463](http://support.apple.com/kb/HT5463)。这个功能就像你说的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T11:45:50.167

这是不可能的。如果没有用户交互，则不允许应用从 iOS 设备发送消息。

您只能使用从您的应用程序发送消息`MFMessageComposer`，但用户必须按发送按钮才能发送消息。您只能为用户撰写消息。

同样最重要的是，您不能拒绝使用您的应用程序来电。没有为此提供公共 API。

# c# - C# 中的模拟退火

> ID：15408237
> 
> 赞同：2
> 
> 时间：2013-03-14T11:40:02.413
> 
> 标签：c#, simulated-annealing

我正在使用模拟退火来解决密码分析问题，但我遇到了难题。我一辈子都无法让我的概率函数正确运行，它要么过于频繁地采用更差的解决方案（所以我在 0.03 和 0.2 的分数附近反弹）或者它不经常采用它（所以我被困在0.35)。我环顾了互联网，但我只遇到了问题涉及找到最小值的示例......我的问题需要找到最大值，最差分数是 0，最好是 1。

我需要关于温度的建议以及我应该使用什么概率函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T17:04:04.960

[维基百科](http://en.wikipedia.org/wiki/Simulated_annealing)上的模拟退火文章提供了一些关于如何初始化和降低 SA 温度的一般指导。这些参数的有效选择通常是非常特定于问题的，并且可能需要通过繁琐的反复试验来确定。

通常，优化算法搜索目标函数的*最小值*。如果您想在*最大化*问题上使用这样的算法，请让优化器*最小化*您的目标函数的*否定*。例如，假设您要为其找到*最大值*的目标函数是`f(x)=score`。然后，您应该请求优化器*最小化* `-f(x)`, ie `-score`（或者，正如您在上面的评论中指出的那样，`1-score`）。

网上有很多模拟退火和其他全局优化算法，例如，参见优化软件决策树上的[这个列表。](http://plato.asu.edu/sub/global.html)*不幸的是，这些代码通常不是用 C# 编写的，但如果这些代码是用 Fortran 或 C 编写的，那么通过P/Invoke*与这些代码交互通常相当容易。

如果您不要求优化器一定要找到全局最优，这里还列出了一些无导数优化[器](http://plato.asu.edu/sub/nlounres.html#function)。这些代码中至少有一个在 C# 版本中可用，即[BOBYQA](https://github.com/cureos/csbobyqa)（事实上，这个算法已被我改编为 C# :-)。

# linux - bash脚本检查文件中的字符串

> ID：15408238
> 
> 赞同：1
> 
> 时间：2013-03-14T11:40:02.920
> 
> 标签：linux, bash, scripting

我该怎么做：

```
if !("abc" in file1 and "def" in file2)
then
  echo "Failed"
fi 
```

我已经知道如何检查 file1: 中的“abc” `grep -Fxq "abc" file1`，但我无法让该`if not (command1 and command2)`部分正常工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T11:51:07.023

你几乎是对的。只需在感叹号和 grep 命令之间添加一个空格，它就可以工作：

```
if ! (grep -Fxq "abc" file1 && grep -Fxq "def" file2); then
     echo "Failed"
fi 
```

假设`bash`，不需要额外的`else`。

请注意，使用括号在子 shell 环境中运行 greps，作为子 shell 进程。您可以通过使用花括号轻松避免这种情况（这称为组命令）：

```
if ! { grep -Fxq "abc" file1 && grep -Fxq "def" file2; }; then
     echo "Failed"
fi 
```

请注意，您需要更多的空格和一个额外的分号——`bash`语法是不是很有趣！？！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T11:47:54.537

你可以这样做：

```
$ grep -Fxq "abc" file1 && grep -Fxq "def" file2 || echo "Failed" 
```

这使用`bash`逻辑运算符 AND`&&`和 OR `||`。

这可以分成多行，例如：

```
$ grep -Fxq "abc" file1 && 
> grep -Fxq "def" file2 ||
> echo "Failed" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T11:49:07.700

```
if (grep -Fxq "abc" file1 && grep -Fxq "def" file2);
then
  echo ""
else
  echo "failed"
fi 
```

# neo4j - Neo4j 服务器启动失败

> ID：15408239
> 
> 赞同：0
> 
> 时间：2013-03-14T11:40:05.170
> 
> 标签：neo4j, ubuntu-12.04

尝试启动 neo4j 服务并收到类似消息

> 警告：检测到最大打开文件的限制为 1024，而建议的最小值为 40000。警告：服务器操作可能会出现问题。有关解除此限制的信息，请参阅 Neo4j 手册。正在启动 Neo4j 服务器...警告：不更改用户进程 [17348]...等待服务器准备好...不好。Neo4j Server 可能无法启动，请检查日志。

日志说：

```
Opened [/home/ub/graph_db/neo4j-community-1.7.M01/data/graph.db/nioneo_logical.log.1] clean empty log, version=224, lastTxId=654769
2013-03-14 11:26:28.111+0000: TM opening log: /home/ub/graph_db/neo4j-community-1.7.M01/data/graph.db/tm_tx_log.1
2013-03-14 11:26:28.159+0000: Failed to load index provider lucene Target file[lucene.log.v318] already exists
org.neo4j.graphdb.NotFoundException: Target file[lucene.log.v318] already exists
    at org.neo4j.kernel.impl.util.FileUtils.renameFile(FileUtils.java:165)
    at org.neo4j.kernel.DefaultFileSystemAbstraction.renameFile(DefaultFileSystemAbstraction.java:78)
    at org.neo4j.kernel.impl.transaction.xaframework.XaLogicalLog.renameLogFileToRightVersion(XaLogicalLog.java:700)
    at org.neo4j.kernel.impl.transaction.xaframework.XaLogicalLog.renameIfExists(XaLogicalLog.java:219)
    at org.neo4j.kernel.impl.transaction.xaframework.XaLogicalLog.open(XaLogicalLog.java:171)
    at org.neo4j.kernel.impl.transaction.xaframework.XaContainer.openLogicalLog(XaContainer.java:64)
    at org.neo4j.index.impl.lucene.LuceneDataSource.<init>(LuceneDataSource.java:229)
    at org.neo4j.index.lucene.LuceneIndexProvider.load(LuceneIndexProvider.java:71)
    at org.neo4j.kernel.AbstractGraphDatabase$DefaultKernelExtensionLoader.loadIndexImplementations(AbstractGraphDatabase.java:986)
    at org.neo4j.kernel.AbstractGraphDatabase$DefaultKernelExtensionLoader.init(AbstractGraphDatabase.java:958)
    at org.neo4j.kernel.LifeSupport$LifecycleInstance.init(LifeSupport.java:362)
    at org.neo4j.kernel.LifeSupport.init(LifeSupport.java:76)
    at org.neo4j.kernel.LifeSupport.start(LifeSupport.java:110)
    at org.neo4j.kernel.AbstractGraphDatabase.run(AbstractGraphDatabase.java:178)
    at org.neo4j.kernel.EmbeddedGraphDatabase.<init>(EmbeddedGraphDatabase.java:69)
    at org.neo4j.server.NeoServerBootstrapper$1.createDatabase(NeoServerBootstrapper.java:65)
    at org.neo4j.server.database.Database.createDatabase(Database.java:80)
    at org.neo4j.server.database.Database.<init>(Database.java:63)
    at org.neo4j.server.NeoServerWithEmbeddedWebServer.startDatabase(NeoServerWithEmbeddedWebServer.java:186)
    at org.neo4j.server.NeoServerWithEmbeddedWebServer.start(NeoServerWithEmbeddedWebServer.java:97)
    at org.neo4j.server.Bootstrapper.start(Bootstrapper.java:87)
    at org.neo4j.server.Bootstrapper.main(Bootstrapper.java:52)
2013-03-14 11:26:28.160+0000: TM shutting down
2013-03-14 11:26:28.382+0000: Closed log /home/biju/graph_db/neo4j-community-1.7.M01/data/graph.db/nioneo_logical.log
2013-03-14 11:26:28.945+0000: NeoStore closed
2013-03-14 11:26:28.946+0000: --- SHUTDOWN diagnostics START ---
2013-03-14 11:26:28.947+0000: --- SHUTDOWN diagnostics END --- 
```

当我在我的机器上安装 ElasticSearch 时，这种情况就开始发生了。启动 Elastic 搜索“JAVA_HOME 问题”时存在一个问题，该问题已排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:29:56.580

我第一次在我的 Linux 笔记本电脑上安装 Neo4j 时遇到了这样一个问题，我解决了将这几行放在*/etc/security/limits.conf*文件末尾的问题：

```
user               hard    nofile          100000
user               soft    nofile          40000 
```

其中*user*是启动 Neo4j 的用户的登录名。*10000*和*40000*有点随意，对我来说没问题，如果你仍然得到错误尝试增加它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T13:57:51.907

如果你有一个有这个问题的数据库，升级不会让它消失。1.8.2 将防止这种情况发生。我看到你正在运行社区，所以保留旧日志并不是那么必要。尝试删除现有的 lucene.log.v318 文件，或者至少将其移开，看看下次启动会发生什么。

# android - 从片段中的相机拍照

> ID：15408240
> 
> 赞同：22
> 
> 时间：2013-03-14T11:40:14.390
> 
> 标签：android, android-fragments, android-camera

在我的`Fragment`我尝试从我的相机拍照，但`onActivityResult`我`Fragment`的没有被调用。拍照后，这`Fragment`没有显示，正在切换到我的第一个`Fragment`。还有其他方法可以在 a 中捕获照片`Fragment`，或者我做错了什么？

这是我当前的代码：

```
public void takePhoto() {
        Intent intent = new Intent("android.media.action.IMAGE_CAPTURE");
        File photo = new File(Environment.getExternalStorageDirectory(),  "Pic.jpg");
        intent.putExtra(MediaStore.EXTRA_OUTPUT,
                Uri.fromFile(photo));
        imageUri = Uri.fromFile(photo);
        PhotosListFragment.this.startActivityForResult(intent, 100);
    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        switch (requestCode) {
        case 100:
            if (resultCode == Activity.RESULT_OK) {
                Uri selectedImage = imageUri;
                getActivity().getContentResolver().notifyChange(selectedImage, null);
                ContentResolver cr = getActivity().getContentResolver();
                Bitmap bitmap;
                try {
                     bitmap = android.provider.MediaStore.Images.Media
                     .getBitmap(cr, selectedImage);

                    viewHolder.imageView.setImageBitmap(bitmap);
                    Toast.makeText(getActivity(), selectedImage.toString(),
                            Toast.LENGTH_LONG).show();
                } catch (Exception e) {
                    Toast.makeText(getActivity(), "Failed to load", Toast.LENGTH_SHORT)
                            .show();
                    Log.e("Camera", e.toString());
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-02-15T13:40:17.160

希望对你有帮助：

```
public class CameraImage extends Fragment {

    private static final int CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE = 1888;
    Button button;
    ImageView imageView;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        final View rootView = inflater.inflate(R.layout.camera_image,
                container, false);

        button = (Button) rootView.findViewById(R.id.button);
        imageView = (ImageView) rootView.findViewById(R.id.imageview);

        button.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View view) {

                Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
                startActivityForResult(intent,
                        CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE);

            }
        });

        return rootView;

    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (requestCode == CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE) {
            if (resultCode == Activity.RESULT_OK) {

                Bitmap bmp = (Bitmap) data.getExtras().get("data");
                ByteArrayOutputStream stream = new ByteArrayOutputStream();

                bmp.compress(Bitmap.CompressFormat.PNG, 100, stream);
                byte[] byteArray = stream.toByteArray();

                // convert byte array to Bitmap

                Bitmap bitmap = BitmapFactory.decodeByteArray(byteArray, 0,
                        byteArray.length);

                imageView.setImageBitmap(bitmap);

            }
        }        
    }    
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2016-09-01T08:46:15.477

这是最受欢迎的问题之一。我们可以找到很多关于这个问题的线程。但它们都对我没有用。

所以我已经使用这个解决方案解决了这个问题。

**让我们首先了解为什么会发生这种情况。**

***我们可以`startActivityForResult`直接从 Fragment 调用，但实际上背后的机制都是由 Activity 处理的。***

一旦您**`startActivityForResult`**从 Fragment 调用，requestCode 将被更改以将 Fragment 的身份附加到代码中。这将使 Activity 能够在收到结果后追踪发送此请求的人。

一旦 Activity 被导航回来，结果将被发送到 Activity 的 onActivityResult 以及修改后的 requestCode 将被解码为原始 requestCode + Fragment 的身份。之后，Activity 会通过 onActivityResult 将 Activity Result 发送到该 Fragment。这一切都完成了。

**问题是：**

Activity 只能将结果发送到直接附加到 Activity 的 Fragment，但不能发送到嵌套的 Fragment。这就是为什么无论如何都不会调用嵌套片段的 onActivityResult 的原因。

**解决方案：**

**1）通过以下代码在您的片段中启动相机意图：**

```
 Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
       Fragment frag = this;
       /** Pass your fragment reference **/
       frag.startActivityForResult(intent, REQUEST_IMAGE_CAPTURE); // REQUEST_IMAGE_CAPTURE = 12345 
```

**2）现在在您的父活动覆盖**`onActivityResult()`**：**

```
 @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
    } 
```

您必须在父活动中调用它才能使其工作。

**3）在您的片段调用中：**

```
@Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        if (resultCode == Activity.RESULT_OK) {
            if (requestCode == REQUEST_IMAGE_CAPTURE) {
                // Do something with imagePath  

                Bitmap photo = (Bitmap) data.getExtras().get("data");
                imageview.setImageBitmap(photo);
                // CALL THIS METHOD TO GET THE URI FROM THE BITMAP
                Uri selectedImage = getImageUri(getActivity(), photo);
                String realPath=getRealPathFromURI(selectedImage);
                selectedImage = Uri.parse(realPath);
            }    
       }
} 
```

**4）获取URI的参考方法：**

*-> 从位图中获取 Uri 的方法*

```
 public Uri getImageUri(Context inContext, Bitmap inImage) {
        ByteArrayOutputStream bytes = new ByteArrayOutputStream();
        inImage.compress(Bitmap.CompressFormat.JPEG, 100, bytes);
        String path = MediaStore.Images.Media.insertImage(inContext.getContentResolver(), inImage, "Title", null);
        return Uri.parse(path);
    } 
```

*-> 从 Uri 获取文件路径的方法*

```
 public String getRealPathFromURI(Uri contentUri) {
        Cursor cursor = null;
        try {
            String[] proj = { MediaStore.Images.Media.DATA };
            cursor = getActivity().getContentResolver().query(contentUri,  proj, null, null, null);
            int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
            cursor.moveToFirst();
            return cursor.getString(column_index);
        } finally {
            if (cursor != null) {
                cursor.close();
            }
        }
    } 
```

而已。使用此解决方案，它可以应用于任何单个片段，无论它是否嵌套。是的，它也涵盖了所有情况！此外，代码也很干净。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-14T11:54:52.587

我试过你的代码，它工作得很好，伙计。我变了

```
PhotosListFragment.this.startActivityForResult(intent, 100); 
```

至

```
getActivity().startActivityForResult(intent, 100); 
```

拍照后，返回相同的活动。

我认为你的两个片段都在同一个活动中。

如果是这种情况，我建议您创建一个新活动并将新片段放在那里。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-22T06:32:30.613

对于 Fragment，这是最简单的解决方案：

```
cameraIamgeView.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            Intent cameraIntent=new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
            getActivity().startActivityFromFragment(PlaceOrderFragment.this, cameraIntent, CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE);
        }
    });

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data){
   // super.onActivityResult(requestCode, resultCode, data);
    try {
    if (requestCode == CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE) {
        if (resultCode == Activity.RESULT_OK && data != null) {

            Bitmap bmp = (Bitmap) data.getExtras().get("data");
            ByteArrayOutputStream stream = new ByteArrayOutputStream();

            /*
            bmp.compress(Bitmap.CompressFormat.PNG, 100, stream);
            byte[] byteArray = stream.toByteArray();

            // convert byte array to Bitmap

            Bitmap bitmap = BitmapFactory.decodeByteArray(byteArray, 0,
                    byteArray.length);
            */

            cameraIamgeView.setImageBitmap(bmp);

        }
    }
    }catch(Exception e){
        Toast.makeText(this.getActivity(), e+"Something went wrong", Toast.LENGTH_LONG).show();

    }
} 
```

# objective-c - 如何将数据保存到项目文件夹中？

> ID：15408241
> 
> 赞同：0
> 
> 时间：2013-03-14T11:40:14.227
> 
> 标签：objective-c, xcode, macos, save

我从网上下载了一个 XML 文件并将其保存在一个文件夹中。使用这些代码

```
NSURL *goo = [[NSURL alloc]initWithString:@"......xml"];
NSData *data = [[NSData alloc] initWithContentsOfURL:goo]; 
NSString *xml = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding]; 
NSString *documentsDirectory = @"/Users/MacBook/Desktop/Bebegim_Icin_Yarisiyorum/Milyoner/Class";   
NSString *xmlFilePath = [documentsDirectory stringByAppendingPathComponent:@"qpack1.xml"];
[xml writeToFile:xmlFilePath atomically:YES encoding:NSUTF8StringEncoding error:nil]; 
```

类文件夹位于 myProject 文件夹中。

但是Apple没有这个路径。我需要说将xml文件保存在我的项目文件夹的Class文件夹中。

```
/Users/MacBook/Desktop/Bebegim_Icin_Yarisiyorum/Milyoner/Class 
```

谁能帮助我，我应该说`../Class`或`.Class`或`./Class`？

在创建 documentDirectory 时我应该说什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:44:51.363

尝试：

```
NSString *documentsDirectory = [NSHomeDirectory()stringByAppendingPathComponent:@"Documents/qpack2.xml"]; 
```

或者：

```
NSArray *pathArray = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)
NSString *docsPAth = [pathArray objectAtIndex:0];
NSString *documentsDirectory = [documentsDirectory stringByAppendingPathComponent:@"qpack2.xml"]; 
```

# cascadingdropdown - 基于级联下拉列表选择值的剑道网格数据源过滤

> ID：15408249
> 
> 赞同：4
> 
> 时间：2013-03-14T11:40:41.037
> 
> 标签：cascadingdropdown

我正在研究 Kendo UI，任何人都可以提供如何根据级联下拉列表选择值更新 Kendo 网格数据源的解决方案。在 Kendo 演示中，我找到了级联下拉列表示例。

要求：

**我有 3 个下拉列表，与 3 个服务绑定，现在我想根据下拉列表选择的值过滤网格数据源。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T05:50:48.023

```
Hai,

          In onchange event of thrid dropdownlist,you need to filter the grid datasource based on codition
              Change:filterGrid

           and a create function:
               function filterGrid() {
                dataSource.filter([
                { field: "orders", operator: "equals", value: $("#OrderID").val() }
                ]);
            } 
```

# windows - rtlheapalloc 在内部调用 virtualalloc 吗？

> ID：15408252
> 
> 赞同：1
> 
> 时间：2013-03-14T11:40:52.330
> 
> 标签：windows, winapi, memory

RtlHeapAlloc 是否在内部调用 VirtuallAlloc？如果不是，它的执行是什么？谁能提供一些关于它的细节或链接？我没有从谷歌找到太多有用的信息。谢谢！

# python - 无法导入名称 LOOKUP_SEP

> ID：15408255
> 
> 赞同：5
> 
> 时间：2013-03-14T11:41:03.660
> 
> 标签：python, django

我正在使用 django 并且正在尝试设置 django-roa 但是当我尝试启动我的网络服务器时出现此错误`cannot import name LOOKUP_SEP`

如果我`django_roa`从我的 INSTALLEDS_APP 中删除它没关系，但我希望 django-roa 工作，我不知道如何解决这个问题。

而且我不知道我可以告诉什么样的细节来找到解决方案。

谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-05-29T09:20:51.847

这个问题是“无法导入名称 LOOKUP_SEP”的顶级 Google 搜索结果，因此虽然它不一定解决`django-roa`与 Django 1.5 之间的任何其他兼容性问题，但我想指出......

您可以通过替换来解决此（特定）错误：

```
from django.db.models.sql.constants import LOOKUP_SEP 
```

和：

```
from django.db.models.constants import LOOKUP_SEP 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T11:50:05.433

`django_roa`尚不兼容 django 1.5。恐怕它只适用于 django 1.3。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-21T08:45:37.143

我从 1.5.2 降级到 1.4.0，我的应用程序又开始工作了。通过点子：

pip install django==1.4

希望有帮助。

# java - neo4j：java：我们可以强制 GraphDB 没有具有重复 Node_Key 的节点吗？如果是，我们该怎么做？

> ID：15408257
> 
> 赞同：0
> 
> 时间：2013-03-14T11:41:14.560
> 
> 标签：java, neo4j, unique-constraint, graph-databases

以下问题讨论了与此相关的示例代码和情况：

[https://stackoverflow.com/questions/15406867/neo4j-java-error-in-indexhits-getsingle-due-to-multiple-nodes-returned-for-g/15408058#15408058](https://stackoverflow.com/questions/15406867/neo4j-java-error-in-indexhits-getsingle-due-to-multiple-nodes-returned-for-g/15408058#15408058)

我正在使用 java 中的 neo4j 创建一个网络图。我的要求是节点的属性之一`Node_Key`应该是唯一的，即图形中不应存在另一个具有相同属性值的节点。

我们怎样才能做到这一点？

我们可以强制 GraphDB 没有具有重复 Node_Key 的节点（或每个节点具有唯一值的任何属性）吗？

# c# - 如何在 selenium 中获取表行 ID

> ID：15408260
> 
> 赞同：0
> 
> 时间：2013-03-14T11:41:24.027
> 
> 标签：c#, javascript, testing, selenium, guid

目前，在页面上，所有控件 ID 都是动态生成的。为了遍历表，我需要获取由 java 脚本生成的行 guid。

例如

```
<table id="tblPass" bgcolor="#ffffff" editmode="Full" style="width: 100%;">
<tr id="87425hdsfs98-38ad-48df-aa7b-j5jf94hs0l" class="passenger"> 
<td class="dragcolumn Adult pass">
<span class="PersonType"> Adult </span>
</td> 
```

我需要一行的 ID，因此我可以根据该 ID 在列中输入更多信息。因为行的所有信息都是相同的，除了那个 id。知道如何使用 selenium 获取此 ID。请指导。

更新：我正在使用硒 RC

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:45:44.893

您需要先找到元素，例如：

```
var element = driver.FindElement(By.CssSelector("tr.passenger"));
var rowID = element.GetAttribute("id");
/* RowID would be "87425hdsfs98-38ad-48df-aa7b-j5jf94hs0l" */ 
```

你已经编辑说你正在使用 RC，这将是这样的：

```
var id = selenium.GetAttribute("css=tr.passenger@id"); 
```

至于首先识别它，那么您将不得不向外工作。

也就是说，如果您想要`tr`示例中的父级，请使用此 XPath：

```
//span[text()='Adult']/ancestor::tr 
```

这会给你元素，然后你查询它的 ID。

# sql - 为这两个实体开发和实现超类/子类 ED 图的最佳方法是什么？

> ID：15408266
> 
> 赞同：0
> 
> 时间：2013-03-14T11:41:31.157
> 
> 标签：sql, database, subclass, entity-relationship, superclass

我想知道是否有人可以帮助我决定开发两个简单数据库实体的最佳方法。我想出了两种方法，但我看不出其中一种比另一种更好的明显原因。

（GroupMessage实体二有错误，属性message出现两次）

![在此处输入图像描述](../Images/78389eb0d61d40dcefaa4bf8e6315962.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:34:22.123

您没有提供很多背景信息，但很明显 FriendMessage 和 GroupMessage 之间存在共享属性。Sender 和 Creator 属性之间可能存在额外的共性，对于 Receiver 和 Group 属性也是如此。如果仅基于 DRY，这使得第一个成为明确的偏好。我想不出任何一个理由或情况会更喜欢第二种完全不相交的表现形式。

# fuseesb - Fuse 中的 Camel 2.10.3 版本

> ID：15408268
> 
> 赞同：1
> 
> 时间：2013-03-14T11:41:31.643
> 
> 标签：fuseesb

我们已经下载了最新版本的 FuseESBEnterprise-7.1.0。但是骆驼版是2.10.0.fuse-71-047。我们如何在 FUSE 中加入 Camel2.10.3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T17:05:37.393

Fuse Camel 版本“2.10.0.fuse-71-047”基于 Apache Camel 2.10 分支。我们一直在将 Apache Camel 分支上的修复和更改同步到 Fuse 分支。因此，在发布的时候，我们会花时间强化代码，并进行额外的测试等。

由于 Fuse ESB Enterprise 7.1 于 2012 年 12 月发布，这意味着 Fuse Camel 版本“2.10.0.fuse-71-047”具有所有修复/更改，直到 2012 年 12 月代码冻结为止。

所以本质上，该版本包含 Apache Camel 2.10.3 版本中的所有内容。

# facebook - 请求对话框不向朋友发送请求

> ID：15408269
> 
> 赞同：1
> 
> 时间：2013-03-14T11:41:32.460
> 
> 标签：facebook, request

我正在尝试使用以下代码在我的应用程序中实现一个简单的请求选项

```
FB.ui({
    method: 'apprequests',
    title: 'My app title',
    message: 'Hi there, join my app'
}, function(response) {
    console.log(response)
}); 
```

这会显示对话框，允许我选择我的朋友，当我发送它时，我会得到正确的回复。（所以和我所有的朋友一起排列）

但是我的朋友都没有真正看到这个请求，我打开了另一个帐户并不断邀请它，但该帐户上没有任何显示。

我在这里还缺少什么吗？

所以简而言之，对话框出现了，我可以邀请我的朋友，但我的朋友没有收到任何通知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:44:53.777

您可能会发现这篇文章很有用：http: [//developers.facebook.com/blog/post/464/](http://developers.facebook.com/blog/post/464/)

对于请求对话框：http: [//developers.facebook.com/docs/reference/dialogs/requests/](http://developers.facebook.com/docs/reference/dialogs/requests/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-10T20:43:48.183

两个可能的问题：1）您的应用程序的通知仅显示在**您在 App Dashboard 上启用**的平台上。

如果您通过网络发送您的请求，并在 Native iOS facebook 客户端上检查它，它们将不会出现，除非您的应用程序在您的仪表板中设置为“Native iOS 应用程序”。如果您在普通浏览器上发送请求并检查它们，您的应用程序必须设置为“Facebook 上的应用程序”等。

2）您的应用程序处于沙盒模式，并且您正在向不是管理员/开发人员/测试人员的人发送请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T16:15:06.417

如果我是对的，您发送的`apprequest`不是一个`notification`因此可能是您在错误的地方寻找应用程序请求。应用程序请求不会显示为通知。

`APPS`相反，您必须在 Facebook 页面左侧的部分中看到它们。转到发送请求的应用程序。如果请求发送成功，您应该能够在那里看到请求。

如果你想发送通知，那么[这里就是](https://developers.facebook.com/docs/concepts/notifications/)这样做的方法。

# python - 如何在unittest中模拟python模块

> ID：15408275
> 
> 赞同：0
> 
> 时间：2013-03-14T11:41:40.880
> 
> 标签：python, mocking

在单元测试中模拟时遇到问题。

```
#!/usr/bin/env python
import sys
sys.modules["foo.Bar"] = __import__("mock_bar")
import foo.Bar
print foo.Bar.__name__ 
```

我`ImportError`在第 4 行有一个例外。我不知道为什么，因为我在第 3 行做了一些模拟。这里有一个关于如何模拟导入的[参考](https://stackoverflow.com/questions/8658043/how-to-mock-an-import)。这是错误消息：

```
Traceback (most recent call last):
  File "test.py", line 4, in <module>
    import foo.Bar
ImportError: No module named foo.Bar 
```

“import foo.Bar”应该等于“__import__('foo.Bar')”，在此之前我已经破解了 sys.modules 来假装模块 'foo.Bar' 已经被导入。为什么 python 仍然尝试导入 foo.Bar 并抱怨？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-01T12:31:52.693

尝试`import foo`在你的`__import__`线路之前做：我认为这会有所帮助。

# c++ - 字符串中的分段错误

> ID：15408282
> 
> 赞同：-6
> 
> 时间：2013-03-14T11:41:55.743
> 
> 标签：c++, c

我只是想从一个字符串中提取两个子字符串。但它显示出分段错误。

**代码是：**

```
const char *str;  
char *s1, *s2;

str = "name:d";  
char *pos = strchr(str, ':');
size_t no    = 1,
       index = pos - str;

if (index > 0) 
{
    strncpy(s1, str, index);  
    cout << "name is:" << s1;  
    index++;  
    strncpy(s2, str + index, no);  
    cout << "direction is:" << s2;       
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T11:45:28.840

以下两行正在复制到未初始化指针引用的内存中：

```
 strncpy(s1,str,index);  
 strncpy(s2,str+index,no); 
```

您需要为`s1`and分配内存`s2`（或者只是使用`std::string`并省去自己的麻烦）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T11:47:11.053

您没有为`s1`或分配任何内存`s2`。您需要做的是使用`new`和分配内存，或者使用`std::string`并省去麻烦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T11:47:28.953

你还没有初始化`s1`或`s2`指向任何东西；因此，尝试写入它们指向的内存（例如`strncpy(s1,str,index)`）会产生未定义的行为 - 如果幸运的话，会出现分段错误。

如果您正在编写 C，则为它们分配内存；如果您正在编写 C++，请使用它`std::string`来为您管理内存分配。

# sql - Rails 3 在没有模型的情况下执行自定义 sql 查询

> ID：15408285
> 
> 赞同：105
> 
> 时间：2013-03-14T11:42:00.303
> 
> 标签：sql, ruby-on-rails

我需要编写一个应该处理数据库的独立 ruby​​ 脚本。我在rails 3中使用了下面给出的代码

```
@connection = ActiveRecord::Base.establish_connection(
:adapter => "mysql2",
:host => "localhost",
:database => "siteconfig_development",
:username => "root",
:password => "root123"
)

results = @connection.execute("select * from users")
results.each do |row|
puts row[0]
end 
```

但出现错误：-

```
`<main>': undefined method `execute' for #<ActiveRecord::ConnectionAdapters::ConnectionPool:0x00000002867548> (NoMethodError) 
```

我在这里想念什么？

**解决方案**

从denis-bu 获得解决方案后，我按照以下方式使用它，并且也有效。

```
@connection = ActiveRecord::Base.establish_connection(
            :adapter => "mysql2",
            :host => "localhost",
            :database => "siteconfig_development",
            :username => "root",
            :password => "root123"
)

sql = "SELECT * from users"
@result = @connection.connection.execute(sql);
@result.each(:as => :hash) do |row| 
   puts row["email"] 
end 
```

* * *

## 回答 #1

> 赞同：168
> 
> 时间：2013-03-14T11:48:56.277

也许试试这个：

```
ActiveRecord::Base.establish_connection(...)
ActiveRecord::Base.connection.execute(...) 
```

* * *

## 回答 #2

> 赞同：100
> 
> 时间：2013-03-14T11:52:36.637

```
connection = ActiveRecord::Base.connection
connection.execute("SQL query") 
```

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2016-05-24T02:09:40.207

我建议使用`ActiveRecord::Base.connection.exec_query`而不是`ActiveRecord::Base.connection.execute`返回一个[`ActiveRecord::Result`](http://api.rubyonrails.org/classes/ActiveRecord/Result.html)（在 rails 3.1+ 中可用），它更容易使用。

然后您可以通过各种方式访问​​它，例如`.rows`,`.each`或`.to_hash`

从[文档](http://api.rubyonrails.org/classes/ActiveRecord/Result.html)：

```
result = ActiveRecord::Base.connection.exec_query('SELECT id, title, body FROM posts')
result # => #<ActiveRecord::Result:0xdeadbeef>

# Get the column names of the result:
result.columns
# => ["id", "title", "body"]

# Get the record values of the result:
result.rows
# => [[1, "title_1", "body_1"],
      [2, "title_2", "body_2"],
      ...
     ]

# Get an array of hashes representing the result (column => value):
result.to_hash
# => [{"id" => 1, "title" => "title_1", "body" => "body_1"},
      {"id" => 2, "title" => "title_2", "body" => "body_2"},
      ...
     ]

# ActiveRecord::Result also includes Enumerable.
result.each do |row|
  puts row['title'] + " " + row['body']
end 
```

[注意：从这里](https://stackoverflow.com/a/37403273/341692)复制了我的答案

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2013-10-24T12:43:13.197

你也可以使用[find_by_sql](http://apidock.com/rails/ActiveRecord/Querying/find_by_sql)

```
# A simple SQL query spanning multiple tables
Post.find_by_sql "SELECT p.title, c.author FROM posts p, comments c WHERE p.id = c.post_id"
> [#<Post:0x36bff9c @attributes={"title"=>"Ruby Meetup", "first_name"=>"Quentin"}>, ...] 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-03-14T11:45:40.200

这个怎么样 ：

```
@client = TinyTds::Client.new(
      :adapter => 'mysql2',
      :host => 'host',
      :database => 'siteconfig_development',
      :username => 'username',
      :password => 'password'

sql = "SELECT * FROM users"

result = @client.execute(sql)

results.each do |row|
puts row[0]
end 
```

您需要安装 TinyTds gem，因为您没有在问题中指定它我没有使用 Active Record

# php - SQL 结果在表格单元格中按日期分组

> ID：15408287
> 
> 赞同：2
> 
> 时间：2013-03-14T11:42:11.997
> 
> 标签：php, sql, html-table

我在 SQL Server 中有一个包含这些字段和值的表。

```
ID_Employee | ID_Company | Date       | Concept | Hours
--------------------------------------------------------
      1     |      1     | 14/03/2013 |    1    |   8
      1     |      1     | 14/03/2013 |    2    |   0
      1     |      1     | 14/03/2013 |    3    |   3
      1     |      1     | 14/03/2013 |    4    |   1
      1     |      1     | 16/03/2013 |    1    |   5
      1     |      1     | 16/03/2013 |    2    |   2
      1     |      1     | 16/03/2013 |    3    |   0
      1     |      1     | 16/03/2013 |    4    |   0 
```

我需要的是显示值 where`ID_Employee=1`和`ID_Company=1`in HTML table 按日期对行进行分组，并将他的列中的小时数排序为他们的概念值。

```
Date       | Concept_1 | Concept_2 | Concept_3 | Concept_4 |
------------------------------------------------------------
14/03/2013 |  8 hours  |  0 hours  |  3 hours  |  1 hour   |
16/03/2013 |  5 hours  |  2 hours  |  0 hours  |  0 hours  | 
```

我不知道如何进行查询或在 php 中使用什么语句（while、for、foreach）`<tr>`为每个不同的日期创建 1 行（），每个概念和小时包含一个单元格（`<td>`）。

html 应如下所示：

```
<tr id="14/03/2013">
    <td class="concept_1">8 hours</td>
    <td class="concept_2">0 hours</td>
    <td class="concept_3">3 hours</td>
    <td class="concept_4">1 hour</td>
</tr>
<tr id="16/03/2013">
    <td class="concept_1">5 hours</td>
    <td class="concept_2">2 hours</td>
    <td class="concept_3">0 hours</td>
    <td class="concept_4">0 hour</td>
</tr> 
```

这可能很容易，但现在我有点困惑，我找不到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:08:38.310

您正在寻找一个[PIVOT](http://msdn.microsoft.com/en-us/library/ms177410%28v=SQL.105%29.aspx)运算符，它可以让您做想要的事情。您可以使用以下查询：

```
select  
    pvt.date,
    [1] AS concept_1,
    [2] AS concept_2,
    [3] AS concept_3,
    [4] AS concept_4
from 
    (
        SELECT 
            date, 
            hours, 
            concept
        FROM table1
    ) p
PIVOT
(   
    AVG(hours)
    FOR concept IN
    ([1], [2], [3], [4]) 
) as pvt 
```

也提供[SqlFiddle](http://www.sqlfiddle.com/#!3/c0a32/1)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:24:51.823

检查这个：

```
declare @tableHTML nvarchar(MAX);
set @tableHTML = CAST((

    select  
        1 AS Tag,
        NULL AS Parent,
        pvt.[date] AS 'tr!1!id',
        ltrim(rtrim(str([1])))+ ' hours' AS 'tr!1!td class="concept_1"!Element',
        ltrim(rtrim(str([2])))+ ' hours' AS 'tr!1!td class="concept_2"!Element',
        ltrim(rtrim(str([3])))+ ' hours' AS 'tr!1!td class="concept_3"!Element',
        ltrim(rtrim(str([4])))+ ' hours' AS 'tr!1!td class="concept_4"!Element'
    from 
        (
            SELECT 
                date, 
                hours, 
                concept
            FROM table1
        ) p
    PIVOT
    (   
        AVG(hours)
        FOR concept IN
        ([1], [2], [3], [4]) 
    ) as pvt
    FOR XML EXPLICIT) AS NVARCHAR(MAX));

PRINT REPLACE(REPLACE(REPLACE(REPLACE(@tableHTML, '</td class="concept_1">', '</td>'), '</td class="concept_2">', '</td>'), '</td class="concept_3">', '</td>'), '</td class="concept_4">', '</td>'); 
```

输出：

```
<tr id="2013-03-14">
    <td class="concept_1">8 hours</td>
    <td class="concept_2">0 hours</td>
    <td class="concept_3">3 hours</td>
    <td class="concept_4">1 hours</td>
</tr>
<tr id="2013-03-16">
    <td class="concept_1">5 hours</td>
    <td class="concept_2">2 hours</td>
    <td class="concept_3">0 hours</td>
    <td class="concept_4">0 hours</td>
</tr> 
```

我使用了**@Sergio**提出的支点- 非常感谢 (+1)

# iphone - 如何检查是否有任何应用程序与文件扩展名相关联

> ID：15408294
> 
> 赞同：7
> 
> 时间：2013-03-14T11:42:35.720
> 
> 标签：iphone, ios, objective-c, ipad, uidocumentinteraction

我想在我的 iOS 应用程序中创建*“打开方式”功能。*

有什么方法可以检查此设备上的任何应用程序是否与我要共享的文件扩展名相关联？

如果当前设备上没有应用程序可以打开具有此类扩展名的文件，则单击*“打开方式”*`UIDocumentInteractionController`按钮后将不会显示，但在这种情况下我不想显示此按钮。

 **所以*问题是：*如何检查设备上的任何应用程序是否可以打开某些具有特定扩展名的文件？*

* * *

**更新：**

例如有财产。`UIDocumentInteractionController`_`NSArray``icons`

它包含可以使用我的扩展名打开文件的所有应用程序的图像。但如果没有应用程序，它包含空应用程序的图像。

所以我不能用`docInteractionController.icons.count == 0`例如检查它。我正在寻找其他技巧。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T14:51:15.180

虽然`UIDocumentInteractionController`不提供*预先*发现是否有任何应用程序可以处理文档的方法，但`-presentOpenInMenuFromRect:` **会**返回一个标志，指示是否有任何应用程序可以打开文档。这要求您已经设置并展示了控制器，这不是最佳的。

有一个解决方法，有点笨拙但很实用：在调用“真实”交互控制器之前，使用虚拟文档创建一个虚拟控制器，并`present`从窗口边界的矩形中创建一个虚拟控制器。这保证了它会“出现”在屏幕外，因此您的用户不会看到它。此时，您已从 中返回标志`-present`，您可以立即关闭虚拟控制器，然后继续适当地显示您的 UI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T14:43:58.290

在 OSX 上，您可以获得能够处理特定内容类型的应用程序包标识符列表，使用`LSCopyAllRoleHandlersForContentType`. 但是在iOS上，我认为没有这样的方法。

如果我找到，我会编辑我的答案。

考虑到您正在寻找其他技巧，您可以检查图标数组中的一个图像是否是通用文档图标。

如果是，那么您知道没有关联的应用程序来处理该文件类型。但是这种方法将取决于操作系统版本，因为通用文件图标可能会改变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T14:07:12.970

来自官方文档：

> 要声明其对文件类型的支持，您的应用程序必须在其 Info.plistproperty 列表文件中包含 CFBundleDocumentTypes 键。（请参阅“核心基础密钥”。）系统将此信息添加到其他应用程序可以通过文档交互控制器访问的注册表中。

对我来说，这表明注册表只能通过 UIDocumentInteractionController 访问，所以不，您无法提前知道文件格式是否有任何可用的应用程序（这完全符合 Apple 不让应用程序直接互动）。

**更新：** 正如您所说，即使没有应用程序，icons 属性也包含图像。我检查了控制器的所有其他方法和属性并没有提示可能打开当前文件格式的应用程序。您说如果没有应用程序可以打开指定的文件格式，则会出现“空应用程序的图像”。也许您可以提取该图标，当数组图标只有一个图像时，检查提取的图像和图标是否相同？*

# postgresql - postgresql：使用另一列合并多行内容的 SQL 查询

> ID：15408296
> 
> 赞同：3
> 
> 时间：2013-03-14T11:42:47.507
> 
> 标签：postgresql, merge, multiple-columns

我有`history`以下列的表格：

```
row_id, msgid, sender, receiver, chatcontent, transdate, transtime 
```

每个聊天记录都作为单独的行存储在表中。

场景：如果内容超过 2048 个字符，我的框架将聊天内容拆分为多个脚本，数据存储在多行中，具有相同的详细信息，例如 msgid、sender、receiver、transdate 和 transtime，只有 chatcontent 与 row_id 作为序列不同.

例如，我在表中的内容是

```
001, msgid1, mark@test.int, james@test.int, this is a long tes, 2013-03-13, 13:55:34
002, msgid1, mark@test.int, james@test.int, t message which is, 2013-03-13, 13:55:34
003, msgid1, mark@test.int, james@test.int,  splitted in multi, 2013-03-13, 13:55:34
004, msgid1, mark@test.int, james@test.int, ple rows, 2013-03-13, 13:55:34
005, msgid2, james@test.int, mark@test.int, yup i got you, 2013-03-13, 13:56:12 
```

现在我想在单个查询中获取数据，该查询应该输出为

```
msgid1, mark@test.int, james@test.int, this is a long test message which is splitted in multiple rows, 2013-03-13, 13:55:34
msgid2, james@test.int, mark@test.int, yup i got you, 2013-03-13, 13:56:12 
```

怎么做。我无法在单个查询中获取所有详细信息。我可以使用命令将聊天内容合并在一列中，但我不想硬编码 msgid 的值

```
SELECT array_to_string(array(SELECT chatcontent FROM history where msgid='msgid1'),''); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-14T12:45:03.390

```
SELECT
    msgid,
    sender,
    receiver,
    transdate,
    transtime,
    array_to_string(array(
        select chatcontent
        from history
        where msgid = h.msgid
        order by row_id
        ), ' '
    ) chatcontent
from history h
group by 1, 2, 3, 4, 5, 6
order by 1 
```

# xsl-fo - Apache-FOP - 如何格式化检索到的数字

> ID：15408305
> 
> 赞同：0
> 
> 时间：2013-03-14T11:43:17.390
> 
> 标签：xsl-fo, apache-fop

我目前正在尝试使用 Apache-FOP 生成发票。使用`<fo:retrieve-marker/>`并且`<fo:marker/>`我能够为每个页面创建小计。

我想正确格式化这个数字：

```
 <fo:block text-align="right">
            <fo:retrieve-marker retrieve-class-name="invoice-subtotal" retrieve-boundary="page" retrieve-position="last-starting-within-page"/>
          </fo:block> 
```

只给我简单的总和（例如 12045），我想要的是 120,45。仅使用 Apache-FOP 1.1 是否可行？检索这个数字是在 XSLT 处理器之后完成的，所以我不能使用 XSLT 格式化函数。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T10:10:32.803

行。我问的似乎不可能。我之前所做的是用 XSLT 计算中间和：

```
<fo:marker marker-class-name="invoice-subtotal"><xsl:value-of select="itemTax/grossPriceRaw + sum(preceding::itemTax/grossPriceRaw)"/></fo:marker> 
```

我为解决这个问题所做的是，我发票中的每个位置现在都包含中间金额。因此计算和格式化取决于编程语言（在本例中为 java）。

我的标记定义现在看起来像这样：

```
<fo:marker marker-class-name="invoice-subtotal"><xsl:value-of select="intSum"/></fo:marker> 
```

所以现在一切正常。

谢谢你的帮助。

# android - 文本颜色与微调器不匹配

> ID：15408307
> 
> 赞同：1
> 
> 时间：2013-03-14T11:43:18.880
> 
> 标签：android, drop-down-menu, android-spinner

正在创建包含一些微调器的 android 应用程序。这里出现了一些问题。有时微调器项目的文本颜色会因设备而异。我怎么能克服这个....

这是为微调器设置值的代码。

```
ArrayAdapter<PatientCaseList> adapter = new ArrayAdapter<PatientCaseList>(getApplicationContext(), android.R.layout.simple_spinner_item,caseList);
adapter.setDropDownViewResource(android.R.layout.simple_dropdown_item_1line);
spinnerCaseNames.setAdapter(adapter); 
```

当我在 android 2.3.3 中使用此应用程序时，它会正确显示选项，但在 3.0 中它不显示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:58:54.383

每个设备都会在 Spinner 上执行自己的主题。

您不应该使用内置微调器布局。而是创建自己的布局。

**my_spinner_layout.xml**

```
 <TextView  
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content"
        android:textColor="#FF0000"         
        /> 
```

**然后使用**

```
 ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, R.layout.my_spinner_layout,list); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T11:51:00.727

您可以为 Spinner 创建自定义主题。例子：

样式.xml

```
<style name="TextAppearanceSpinnerItem" parent="android:TextAppearance.Widget.TextView.SpinnerItem">
    <item name="android:textColor">#000</item>
    <item name="android:textSize">10sp</item>
</style>

<style name="SpinnerItem" parent="android:Widget.TextView.SpinnerItem">
    <item name="android:textAppearance">@style/TextAppearanceSpinnerItem</item>
</style>

<style name="SpinnerTheme" parent="android:Theme">
    <item name="android:spinnerItemStyle">@style/SpinnerItem</item>
</style> 
```

现在将您的自定义主题应用于具有微调器的活动，例如：

```
<activity
        android:name="MainActivity"
        android:label="@string/app_name"
        android:screenOrientation="portrait"
        android:theme="@style/SpinnerTheme
        android:windowSoftInputMode="adjustResize|stateHidden" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

希望这会帮助你。

# jfreechart - JfreeChart XYPlot：删除域轴上的 0

> ID：15408308
> 
> 赞同：0
> 
> 时间：2013-03-14T11:43:20.120
> 
> 标签：jfreechart

有没有办法去除域轴中的 0，以便在 x = 1 处绘制 x = 0 的值？我不想删除 x = 0 处的所有值，我只想将它们向右“推”一个单位并删除 0 标记。

一个例子：

Series1：(-2, 1), (-1, 2), (0, 2), (2, 5) 应该变成 (-2, 1), (-1, 2), (1, 2), ( 3、5)

域轴应该像这样改变：

-|----|----|----|----|----|- 应该变成 -|----|----|----|-

-2_-1_ 0_ 1__ 2_ 3_ ***_* __ *_* __ *_* __ *_* __****-2* _ -1__1 _2*

 *谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:37:29.083

假设您使用的是 XYPlot

```
XYPlot plot = (XYPlot) chart.getPlot();
plot.getDomainAxis().setRange(min, max); 
```

或者

```
XYPlot plot = (XYPlot) chart.getPlot();
plot.setLowerBound(1); 
```

如果你只知道最小值*

# ios - ios app亚洲语言本地化

> ID：15408313
> 
> 赞同：1
> 
> 时间：2013-03-14T11:43:28.427
> 
> 标签：ios, localization, chinese-locale

一位客户向我询问了我们在 App Store 上的一个应用程序的中文本地化工作。我过去曾为其他语言做过，但从来没有为亚洲语言做过，我担心它可能会比欧洲语言有点棘手。RESTFull 服务将通过 JSON 返回大部分内容。

是否存在对此的一些特殊建议？它就像正常的本地化一样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T12:01:51.697

中文和其他语言没有什么不同，首先，检查以下内容：

1.  编码
    您的编码可以处理亚洲字符吗？是否使用 UTF 编码？
2.  字体
    您是否使用自定义字体？他们可以显示亚洲字符吗？
3.  粗体/斜体
    粗体和斜体字体不经常与中文一起使用，有时甚至字体不支持它们，因为文本通常变得难以辨认。检查您的 UI 是否可以处理它。
4.  标签大小
    一般来说，中文文本比其他语言的文本短。检查您的用户界面是否适合中文文本。
5.  字体大小
    一般来说，显示中文的字体应该比显示普通字符的字体大一点。使用拉丁字母，您可以使用非常小的字体，并且文本将保持可读性。对于中文，您必须检查在使用小字体时是否仍然可以区分字符。
6.  日期格式
    您是否`NSCalendar`从当前语言环境正确使用？或者您是否使用公历的特定属性？（中国使用公历，但我不确定其他亚洲国家）。

在所有其他方面，它就像正常的本地化。您可能应该将文本放在那里，然后测试一切是否正常。如果您的应用程序编写正确，则不必涉及任何特殊工作。亚洲语言经常显示出一直存在于应用程序中但没有表现出来的问题。

# caching - 用清漆缓存我的远程网站的问题

> ID：15408319
> 
> 赞同：0
> 
> 时间：2013-03-14T11:43:44.870
> 
> 标签：caching, webserver, varnish, remote-server

我有一周的时间来配置 varnish 来远程缓存我的网站

我尝试了很多配置但什么都没有我没有任何缓存我不会得到任何解释

所以我的配置是

```
enter code here

backend default {

.host ="axelaris-hosting.com";
.port = "80";
.connect_timeout = 600s;
.first_byte_timeout = 600s;
.between_bytes_timeout = 600s;
}

sub vcl_deliver {
    if (obj.hits > 0) {
            set resp.http.X-Cache = "HIT";
    }
    else {
            set resp.http.X-Cache = "MISS";
    }
}
sub vcl_recv {
    if (req.request == "GET" && req.url ~       "\.(js|css|jpg|jpeg|png|gif|gz|tgz|bz2|tbz|mp3|ogg|swf|cgi|ico)$") {
            unset req.http.cookie;
            return (lookup);
    }
}
sub vcl_fetch {
    if (beresp.http.Set-Cookie) {
    if (req.request == "GET" && req.url ~\.(js|css|jpg|jpeg|png|gif|gz|tgz|bz2|tbz|mp3|ogg|swf|cgi|ico)$") {
            unset beresp.http.set-cookie;
            set beresp.ttl = 7d;
            return(deliver);
    } 
```

还有我的第二个问题，我需要安装 om 我的本地机器 nginx 来缓存我的远程网站？

查看此屏幕截图以了解我的问题

[http://www.hostingpics.net/viewer.php?id=251218varnish.png](http://www.hostingpics.net/viewer.php?id=251218varnish.png)

varnih 不会在本地缓存任何内容

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T10:24:03.653

查看[http://www.axelaris-hosting.com/](http://www.axelaris-hosting.com/)脚本是使用完整 URL 加载的。例如：

```
<script src="http://www.axelaris-hosting.com/templates/axelaris-hosting-blue2/js/jquery-1.4.4.js" type="text/javascript"></script> 
```

这就是为什么它们不会通过本地 Varnish 缓存加载的原因。

Varnish 并不是真正设计用来做你打算用它做的事情。

您可能希望将[Squid 作为透明代理](http://www.cyberciti.biz/tips/linux-setup-transparent-proxy-squid-howto.html)运行。

# wix - WiX Bootstrapper：回滚通知

> ID：15408323
> 
> 赞同：3
> 
> 时间：2013-03-14T11:43:51.127
> 
> 标签：wix, wix3.6, burn

在我的托管引导程序的 bundle.wxs 中，我链接了多个包：

```
<Chain>
  <ExePackage Id="Test1"......>
  <ExePackage Id="Test2"......>
  <ExePackage Id="MicrosoftVCPP2005Redistributable" SourceFile="..\Tools\VC2005Redistributable\vcredist_x86.exe" Vital="yes"   InstallCondition="SelectedDBSize1 = 24" />
</Chain> 
```

我正在订阅`ExecutePackageBegin`/`ExecutePackageComplete`事件以检查当前正在执行哪个包，并相应地显示进度文本，指示正在进行哪个安装。

但是，如果由于某种原因回滚操作在中途开始，我想更改进度文本以指示回滚正在进行中。从安装切换到回滚时是否有可用的事件？还是我必须检查被调用的包的顺序并据此决定？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T14:34:58.270

该属性的文档有点错误，但`ExecutePackageBeginEventArgs`该类的`ShouldExecute`属性会告诉您包是“执行”还是“回滚”。在您的情况下，当`ExecutePackageBeginEventArgs.ShouldExecute=false`您知道该包正在回滚时。

# java - 如何在 i18n Web 应用程序中控制布局？

> ID：15408324
> 
> 赞同：1
> 
> 时间：2013-03-14T11:43:57.787
> 
> 标签：java, html, css, jsp, internationalization

假设有 fmt:message 标签出现在固定宽度的 div 标签中：

```
<div style="width=10px"/>
    <fmt:message key="some.code" />
</div> 
```

取决于代码，实际消息可能小于或大于 10 像素，并且文本从 div 中“出来”或使其变大并影响布局。

有没有办法将行终止插入消息或控制实际宽度或 div？

# javascript - 日期转换器功能在 Firefox 中不起作用

> ID：15408326
> 
> 赞同：0
> 
> 时间：2013-03-14T11:44:04.813
> 
> 标签：javascript

这个日期转换器功能在 chrome 上运行良好，但在 Firefox 上却不行！任何人都可以帮助找出问题。

```
function converter(string) {
    var d = new Date(string);
    var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'sep', 'Oct', 'Nov', 'Dec'];

    var hour = d.getHours();

    return d.getFullYear() + ' ' + months[d.getMonth()] + ' ' + d.getDate() + ' | ' + (hour % 12) + ' ' + d.getMinutes() + ':' + (hour > 11 ? 'pm' : 'am');
}

alert(converter('2013-03-10 19:43:55')) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T11:47:21.463

这将修复您的代码：

`converter('2013-03-10T19:43:55')`

请注意`T`日期和时间之间的时间。

编辑：日期时间字符串应该是 ISO 8601 格式。[在此处](http://www.w3.org/TR/NOTE-datetime)阅读更多相关信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T11:47:47.513

`Date.parse`Chrome 对错误的日期格式更宽容，但这在技术上作为or的输入无效`new Date`。您应该确保日期格式正确（RFC2822 或 ISO 8601），或者如果您想允许更多自由格式输入，请使用[http://www.datejs.com/之类的库](http://www.datejs.com/)

更多信息：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/parse](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/parse)

# linux - Bash Shell - 在第二次出现特定字符后返回子字符串

> ID：15408327
> 
> 赞同：4
> 
> 时间：2013-03-14T11:44:05.663
> 
> 标签：linux, bash, sed, substring

我需要在我决定的分隔符后归还所有内容，但仍然不完全知道如何使用 sed。我需要做的是：

```
$ echo "ABC  DE,FG_HI J,123.XYZ-A1,DD/MM/YYYY HH24:MI:SS,,," \
  | sed <some regexp> 
```

对于此示例，返回应该是（子字符串）第二个逗号之后的所有内容：

```
123.XYZ-A1,DD/MM/YYYY HH24:MI:SS,,, 
```

我可以像这样使用 cut 来做到这一点： `echo "ABC DE,FG_HI J,123.XYZ-A1,DD/MM/YYYY HH24:MI:SS,,," | cut -d',' -f 2-`

但有人告诉我 cut 比 sed 慢...

一些拥有它们（并且想要...... :)）的大师可以给我几分钟他的时间并给我建议吗？谢谢！狮子座

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T11:50:36.503

以我的经验`cut`总是比`sed`.

要做你想做的事，`sed`你可以使用一个不匹配的组：

```
echo 'ABC  DE,FG_HI J,123.XYZ-A1,DD/MM/YYYY HH24:MI:SS,,,' |
  sed -r 's/([^,]*,){2}//' 
```

`[^,]`这通过删除非逗号字符后跟逗号两次来删除前两个字段（如果字段本身不包含逗号）`{2}`。

输出：

```
123.XYZ-A1,DD/MM/YYYY HH24:MI:SS,,, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T13:05:51.753

您也可以尝试在`bash`不产生外部进程的情况下进行提取：

```
$ [[ 'ABC  DE,FG_HI J,123.XYZ-A1,DD/MM/YYYY HH24:MI:SS,,,' =~ [^,]*,[^,]*,(.*) ]]
$ echo "${BASH_REMATCH[@]}"
123.XYZ-A1,DD/MM/YYYY HH24:MI:SS,,, 
```

或者

```
$ FOO='ABC  DE,FG_HI J,123.XYZ-A1,DD/MM/YYYY HH24:MI:SS,,,'
$ echo ${FOO/+([^,]),+([^,]),} 
```

或者

```
$ IFS=, read -a FOO <<< 'ABC  DE,FG_HI J,123.XYZ-A1,DD/MM/YYYY HH24:MI:SS,,,'
$ echo ${FOO[@]:2} 
```

（假设这是一次性匹配，而不是迭代文件的内容。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-14T07:09:46.893

此方法是通过查找字符第二次出现的索引并使用 bash 子字符串来获得所需的结果

```
input="ABC  DE,FG_HI J,123.XYZ-A1,DD/MM/YYYY HH24:MI:SS,,,"
index=$(($(echo $input| grep -aob '/' | grep -oE '[0-9]+' | awk 'NR==2') + 1))
result=${input:$index} 
```

# sql - 有没有更好的方法来调整这个查询？

> ID：15408328
> 
> 赞同：-2
> 
> 时间：2013-03-14T11:44:09.667
> 
> 标签：sql, oracle, performance

我有以下查询，想知道是否有更好的方法来调整它？

```
MERGE INTO target_table TARGET USING
(SELECT DISTINCT g1.column_name
FROM test_gtt1 g1,
test_gtt2 g2
WHERE g1.column_name = g2.column_name
AND g1.diff_id      IS NULL
AND g2.diff_id      IS NULL
UNION ALL
SELECT DISTINCT g1.column_name
FROM test_gtt1 g1,
test_gtt2 g2
WHERE 
g1.column_name  = g2.column_name
AND g1.diff_id = g2.diff_id
AND g1.diff_id IS NOT NULL
AND g2.diff_id IS NOT NULL
) SOURCE ON ( TARGET.column_name = SOURCE.column_name)
WHEN MATCHED THEN
UPDATE SET TARGET.column_name2 = 123; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:53:09.027

这取决于数据类型、索引和生成的计划是什么（如果您提供了它会很有帮助）。

但是联合显然是多余的：

```
SELECT DISTINCT g1.column_name
FROM test_gtt1 g1,
test_gtt2 g2
WHERE g1.column_name = g2.column_name
AND ((g1.diff_id IS NULL
      AND g2.diff_id IS NULL)
     OR (g1.diff_id IS NOT NULL
         AND g2.diff_id IS NOT NULL)) 
```

**更新**

我突然想到（在回复 APC 的评论时）也可以使用...获得相同的结果。

```
SELECT DISTINCT g1.column_name
FROM test_gtt1 g1,
test_gtt2 g2
WHERE g1.column_name = g2.column_name
AND DECODE(g1.diff_id, NULL, -1, 1)=DECODE(g2.diff_id, NULL, -1, 1); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-14T12:03:02.703

如果您要将这两组与 UNION 结合使用`diff_id is null`，则无需测试：`diff_id is not null`

```
 select * from foo where bar is null
       union all
       select * from foo where bar is not null 
```

是相同的

```
 select * from foo 
```

# backbone.js - 在主干模型中使用标志，但不作为属性（被保存）

> ID：15408329
> 
> 赞同：0
> 
> 时间：2013-03-14T11:44:10.330
> 
> 标签：backbone.js

所以我想要实现的是当用户想要编辑/查看一个项目（模型）时，我将它们发送到一个 URL，创建一个新的模型实例并在加载相关视图和处理之前调用 .fetch它是新模型。

由于各种原因，我需要知道用户是在编辑还是查看项目（模型），所以我的第一次尝试是这样的：

```
app.Models.Quote = Backbone.Model.extend({

    idAttribute: 'Number',

    initialize: function() {
        this.editMode = false;  
    },

    url: function() {
        return app.Settings.apiUrl() + '/quotes/' + this.id;
    }

}); 
```

所以在视图/编辑视图的各个地方，我可以这样做：

```
if(this.model.editMode){ //foo } 
```

然而，这似乎根本不起作用，即。未找到 editMode（未定义）。

人们实现这一目标的一般解决方案/建议是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:58:09.640

这是这个属性正在工作的快速示例：http: [//jsfiddle.net/damian0o/u9rrh/](http://jsfiddle.net/damian0o/u9rrh/)

通过添加类似的内容确保这是您的视图实例

```
var self = this; 
```

或使用 undersocore 方法

```
_.bindAll(this,""); 
```

在视图初始化方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T11:56:15.207

尝试将 editMode 添加为模型的属性。您现在可以执行 this.model.editMode，在您的模型中，您可以将 editMode 称为 this.editMode。

```
app.Models.Quote = Backbone.Model.extend({

    idAttribute: 'Number',

    editMode: false, // this initializes the value to false   

    initialize: function() {
        //this.editMode = false;  
    },

    url: function() {
        return app.Settings.apiUrl() + '/quotes/' + this.id;
    }

}); 
```

# javascript - 在AngularJs的服务中注入dateFilter

> ID：15408336
> 
> 赞同：35
> 
> 时间：2013-03-14T11:44:34.713
> 
> 标签：javascript, angularjs, angularjs-service

我想知道是否有办法在 AngularJs 的服务中注入过滤器。

我一直在努力

```
app.factory('educationService', [function($rootScope, $filter) {

    // ..... Some code

    // What I want
    console.log(dateFilter(new Date(), 'yyyy-MM-01'));

    // ..... Some code

}]); 
```

所以我想知道是否可以在服务中注入过滤器，或者是否可以通过其他方式访问它。

如果你有一个关于这一点的文档的链接，那就太好了:) 一直在 Angular 的文档中搜索，我发现对此没有任何帮助。

谢谢 ：）

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-03-14T12:11:11.853

首先，您必须像这样注入过滤器：

```
app.factory('myService', ['$rootScope', '$filter', function($rootScope, $filter) 
```

（仅当您在构建过程中使用缩小时才需要该数组）

以编程方式调用特定过滤器：

```
$filter('date')(new Date(), 'yyyy-MM-01'); 
```

`$filter(name)`返回特定的过滤器函数，您可以使用您的参数调用它：

```
var dateFilter = $filter('date');
var filteredDate = dateFilter(new Date(), 'yyyy-MM-01') 
```

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2013-03-14T18:35:20.467

> 过滤器功能注册`$injector`在过滤器名称后缀的过滤器名称下`Filter`。-- [$filterProvider 文档](http://docs.angularjs.org/api/ng.%24filterProvider)

这适用于 Angular 内置过滤器以及您自己的自定义过滤器。

因此，您可以`dateFilter`像这样将其注入您的服务中（如果不缩小）：

```
app.factory('educationService', [function($rootScope, dateFilter) { 
```

如果您只使用一个过滤器，则此方法允许您更具体地了解您的实际依赖关系。如果你需要使用多个过滤器，你可以`$filter`像@Stewie 节目一样注入。

# java - 通过 GenericEntity 在 RESTful Response 对象中使用 Java 泛型模板类型 >

> ID：15408337
> 
> 赞同：15
> 
> 时间：2013-03-14T11:44:44.853
> 
> 标签：java, rest, generics, jersey, jax-rs

我有一个通用 JAX-RS 资源类，并且我定义了一个通用`findAll`方法

```
public abstract class GenericDataResource<T extends GenericModel> {

    @GET
    @Produces(MediaType.APPLICATION_JSON)
    public Response findAll() {
        Query query = em.createNamedQuery(modelClass.getSimpleName()+".findAll");
        List<T> list = query.getResultList();
        return Response.ok(new GenericEntity<List<T>>(list) {}).build();
    }
} 
```

和用户类：

```
public class User extends GenericModel {
    ...
} 
```

这是示例子类定义：

```
@Path("users")
public class UserResource extends GenericDataResource<User> {

    public UserResource() {
        super(User.class);
    }
} 
```

我得到以下异常：

```
com.sun.jersey.api.MessageException: A message body writer for Java class 
java.util.Vector, and Java type java.util.List<T>, 
and MIME media type application/json was not found exception. 
```

如果我将 T 替换为已定义的类，例如`User`：

`GenericEntity<List<User>>(list)`

然后它工作正常。

关于如何使它与通用 T 一起工作的任何想法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-14T11:57:10.357

编译源代码后，由以下行创建的（匿名）类：

```
new GenericEntity<List<T>>(list) {} 
```

使用类型变量来引用其父级。由于类型变量在运行时没有价值，所以不能像这样使用泛型。您被迫从调用站点传递所谓的*类型令牌。*这是一个示例，它需要从 的调用者传递令牌`findAll()`，但您可以在构造函数中需要一个令牌并将其保存在实例变量中：

```
public abstract class GenericDataResource<T extends GenericModel> {
  public Response findAll(GenericEntity<List<T>> token) {
    Query query = em.createNamedQuery(modelClass.getSimpleName() + ".findAll");
    List<T> list = query.getResultList();
    return Response.ok(token).build();
  }
} 
```

调用者将发送一个令牌，如

```
new GenericEntity<List<User>>() {} 
```

如果你只使用非参数化的子类，`findAll()`可以利用反射来构建令牌（未经测试，希望你明白）：

```
@GET
@Produces(MediaType.APPLICATION_JSON)
public Response findAll() {
  Query query = em.createNamedQuery(modelClass.getSimpleName()+".findAll");
  List<T> list = query.getResultList();
  return Response.ok(new GenericEntity(list, getType())).build();
} 
```

您必须实施`getType()`以返回所需的类型。它将是[`ParameterizedType`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/reflect/ParameterizedType.html)能够表示类型的子类`List<DAO<User>>`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-02-05T09:35:09.510

除了答案之外，要在客户端读取 Response 对象：

```
List<MyObject> list = response.readEntity(new GenericType<List<MyObject>>(){})); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-04-03T13:28:07.457

**响应**对象被返回给客户端以响应发送到服务器的请求。Response 类具有 Response.ResponseBuilder 内部类，该内部类收集每个属性设置为其类型为 Response.ResponseBuilder 的字段。Response.ResponseBuilder 应用 Builder 设计模式来构造响应对象。

build() 方法负责连接构建过程中形成的 Response.ResponseBuilder 对象链。例如

```
Response.status(200); 
```

status 方法在分配 STATUS 后返回 Response.ResponseBuilder

```
 Response.status(200).entity( AnyObj ); 
```

实体对象分配类型 Response.ResponseBuilder 的实体（返回的有效负载）并分配给响应的实例变量。之后，status 还会分配状态并返回 Response.ResponseBuilder 实例。构建器在调用 build() 方法时连接它们。

```
Response.status(200).entity( obj ).build(); 
```

最后，build 方法构造了完整的（带有属性的）响应。

现在是**GenericEntity**对象的问题。它表示一个泛型类型 T 的响应实体。

例如，

GenericEntity> obj = new GenericEntity>(lst) {}; Response.status(200).entity(obj).build();

**obj**是上面给出的 List 类型。实体方法接受通用的**Object**类型。如果需要特定类型，您必须将其作为 GenericEntity 类型的参数传递，在运行时通过该参数将其转换为特定类型的对象。

**实际使用**

希望我的 Jersey 框架将 Array 类型的 JSON 作为 Response 对象的一部分响应回客户端，该 JSON 是我的 Java 模型中的 List 对象。

因此，new GenericEntity> --- 将对象/有效负载转换为 List 类型 new GenericEntity --- 运行时类型变为 String

* * *

Web服务端的资源

```
public Response findAllFruits(@QueryParam("frtID") String frtID ) {

         List<String> lst = new ArrayList<String>();
         lst.add("Banana");
         lst.add("Apple");

         GenericEntity<List<String>> obj = new GenericEntity<List<String>>(lst) {};

          return Response.status(200).entity( obj ).build(); 

    } 
```

**输出** 响应发送回客户端。[“香蕉”、“苹果”]

* * *

如何读取响应实体

```
List<CustomType> myObj= response.readEntity(new GenericType<List<CustomType>>() {}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-01T18:30:18.323

为了解决这个问题，我们创建了一个方法来返回 a`GenericEntity`然后从我的泛型类中调用它，如下所示：

```
@XmlRootElement
public abstract class AbstractRest<T extends IEntity> {

    private Long id;

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }
}

public abstract class SmartWebServiceNEW<R extends AbstractRest<T>> {

    @GET
    @Produces({MediaType.APPLICATION_XML})
    public Response findAll() {
        List<T> lista = getDelegate().findAll();
        if (lista == null || lista.isEmpty()) {
            return Response.status(Response.Status.NO_CONTENT).build();
        }
        List<R> retorno = new ArrayList<R>();
        for (T it : lista) {
            retorno.add(toRest(it));
        }
        GenericEntity entity = listToGenericEntity(retorno);
        return Response.ok(entity).build();
    }

    protected abstract GenericEntity listToGenericEntity(List<R> restList);   
}

@Path("/something")
@RequestScoped
public class MyEntityResource extends SmartWebServiceNEW<MyEntityExtendingAbstractRest> {

 @Override
    protected GenericEntity listToGenericEntity(List<MyEntityExtendingAbstractRest> restList) {
        return new GenericEntity<List<MyEntityExtendingAbstractRest>>(restList) {
        };
    }

} 
```

# android - OSNetworkSystem_connect 失败：超时

> ID：15408341
> 
> 赞同：0
> 
> 时间：2013-03-14T11:45:09.410
> 
> 标签：android, socketexception

我正在开发简单的安卓应用程序。在模拟器中它运行良好，但是当我尝试在移动设备中运行时，它给出 OSNetworkSystem_connect 失败：超时错误。我已经用谷歌搜索了解决方案，但没有得到任何有用的信息。有人请告诉我我做错了什么？我正在使用带有 ksoap2、apache 和 mysql 数据库的 Web 服务 在此先感谢

这是我的 Logcat 详细信息

```
03-14 17:12:17.932: I/System.out(15535): [socket][0] connection 10.0.2.2/10.0.2.2:8085;LocalPort=57976(20000)
03-14 17:12:17.932: I/System.out(15535): 10.0.2.2/10.0.2.2:8085(20000)
03-14 17:12:17.932: I/OSNetworkSystem(15535): OSNetworkSystem_connect fd=-1; timeout = 20000
03-14 17:12:37.949: E/OSNetworkSystem(15535): OSNetworkSystem_connect Fail:Tiemout
03-14 17:12:37.951: I/System.out(15535): [socket][1:57976] exception 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:51:28.150

看起来您的服务器与模拟器在同一台机器上运行。`10.0.2.2`是一个特殊的 IP，应该用于连接服务器，使其与模拟器运行在同一台机器上。

要在设备上使用 3G 访问服务器，您需要在可公开访问的服务器上托管服务器，并使用代码中的公共 ip 连接到服务器。

其他选择是将运行服务器和电话的机器放在同一个 wifi 网络上，以便它们在同一个 LAN 上，然后使用提供给机器的 ip 从设备连接到服务器...

# sql-server - SQL Server 2008 中的时间字符串

> ID：15408345
> 
> 赞同：1
> 
> 时间：2013-03-14T11:45:15.157
> 
> 标签：sql-server, tsql

我已经对此进行了搜索，但我的字符串似乎与我能找到的示例格式不同。

我将时间设置为 a`nvarchar(50)`和值，例如`1535`

我有两个这样的列，我想比较两者以找出有多少分钟差异。如何将字符串转换为时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T11:55:19.860

单程;

```
declare @t1 nvarchar(4) = '1535'
declare @t2 nvarchar(4) = '1700'

select 
    datediff(minute, 
             cast(stuff(@t1, 3, 0, ':') as time),
             cast(stuff(@t2, 3, 0, ':') as time))

>>85 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T12:25:10.793

`If you need the difference in minutes`，这是*`without converting`*你价值观的一种方法`to Datetime`。

假设 all`nvarchar values are convertible to int` *并且*它们在 中`24h format`，则*差异为* `c2-c1 in Minutes`：

**[小提琴演示在这里](http://sqlfiddle.com/#!3/3920f/20)**

```
select ((c2*1-c1*1)/100)*60 + (c2*1-c1*1)%100 inMinutes
from t 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T11:56:02.783

假设您的所有值都可以转换为`Time`：

```
DECLARE @val1 as NVARCHAR(50);
DECLARE @val2 as NVARCHAR(50);
SET @val1 = '1535'; SET @val2 = '1655';

SELECT DATEDIFF(minute,convert(time,LEFT(@val1,2)+':'+RIGHT(@val1, 2)+':00'), CONVERT(time,LEFT(@val2,2)+':'+RIGHT(@val2, 2)+':00')) 
```

# linux - 使用 sed 有条件地匹配一个单词

> ID：15408347
> 
> 赞同：2
> 
> 时间：2013-03-14T11:45:18.250
> 
> 标签：linux, bash, sed

我想替换之前包含`abc`但不包含的所有单词。`KLM``abc`

比如`"dasdasKLMabc"`不应该改，但是`"dasabc"`好替换，我想替换`abc`为`rrr`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T11:56:00.813

sed 似乎不支持后视。但是你可以在 perl 中相当容易地做到这一点：

```
sorin@sorin:~$ echo -e "llalaabc\nKLMabc" | perl -pe 's/(?<!KLM)abc/rrr/'
llalarrr
KLMabc
sorin@sorin:~$ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T11:48:38.303

据我所知，GNU sed 不支持前瞻和后瞻。解决您的问题的一种简单方法是`KLMabc`用一些“唯一”字符串替换，替换所有`abc`s 然后将唯一字符串替换回`KLMabc`

```
sed 's/KLMabc/#####/g' <input_file> | sed 's/abc/rrr/g' | sed 's/#####/KLMabc' 
```

或者

```
sed 's/KLMabc/#####/g' -e 's/abc/rrr/g' -e 's/#####/KLMabc' <input_file> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T11:50:38.510

如果你可以使用[`ssed`](https://launchpad.net/ssed/)，你就可以使用 Perl 风格的[后向断言](http://www.regular-expressions.info/lookaround.html)：

```
ssed -R 's/(?<!KLM)abc/rrr/g' input.txt 
```

例子：

```
$ echo "dasdasKLMabc dasabc" | ssed -R 's/(?<!KLM)abc/rrr/g'
dasdasKLMabc dasrrr 
```

# python - 是否可以从 Sphinx 文档生成单个 .pot 文件？

> ID：15408348
> 
> 赞同：7
> 
> 时间：2013-03-14T11:45:24.033
> 
> 标签：python, localization, internationalization, gettext, python-sphinx

我正在执行 i18n / l10n 大型项目文档的任务。文档是用 Sphinx 完成的，它对 i18n 有现成的[基本支持](http://sphinx-doc.org/latest/intl.html)。

[我的问题与另一个问题](https://stackoverflow.com/q/4052736/146792)类似：即每个pot文件的大部分字符串都是相同的，我希望我的翻译人员不要一遍又一遍地重新输入相同的翻译。**我宁愿有一个模板文件**。

我的问题并不是真正合并文件（这只是一个问题`msgcat *.pot > all.pot`），而是这样一个事实 - 为了在以特定语言构建文档时域工作 - 我必须复制并重命名`all.pot`回原始文件名。所以我的解决方法是：

1.  生成`fileA.pot`,`fileB.pot`
2.  将两者合并为`all.pot`
3.  `cp all.pot fileA.pot`+`cp all.pot fileB.pot`

有没有更清洁的方法来做同样的事情？[gettext_compact](http://sphinx-doc.org/latest/config.html#confval-gettext_compact)只让我完成了我的目标的一半......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-18T14:44:51.747

经过 7 个多月的广泛研究和一些尝试的答案，似乎可以肯定地说不——至少在当前版本 1.1.3**中——不可能`.pot`从 Sphinx 文档生成单个文件**。

原始问题中描述的解决方法也是在将不同`.pot`文件合并为一个文件时自动删除重复字符串的最直接方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-17T20:37:35.467

我在这里看到两种可能性：

一种是破解 Sphinx 以完全不使用域……我猜你不想这样做有几个原因。

另一个是：由于您按域进行拆分，因此[msggrep](http://man.cx/msggrep)的 -M 选项看起来就像您需要做的那样。否则，-N 选项仍可用于按源文件过滤。

也就是说，如果明显的解决方案不起作用：

*   生成 fileA.pot、fileB.pot（也可以在这里查看[msguniq](http://man.cx/msguniq)）
*   将它们合并到 all.pot 并提供给翻译人员
*   `for x in file*.pot; do msgmerge -o ${x%t} all-translated.po $x; done`

根据[TFM](http://man.cx/msgmerge)， msgmerge 仅从其第一个参数（翻译的 po 文件）中获取与第二个参数（具有旧翻译的 po 文件，或 pot file = template with只有空的 msgstrings）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-05T03:46:11.467

将以下内容添加到您的`conf.py`:

```
gettext_compact = "docs" 
```

# c++ - 无法将客户端连接到不同计算机上的服务器

> ID：15408361
> 
> 赞同：-1
> 
> 时间：2013-03-14T11:45:56.537
> 
> 标签：c++, visual-studio, mfc, client-server

我在 mfc 中有一个客户端服务器应用程序，它向服务器发送消息（字符串），服务器接收消息，并在文本框中显示客户端使用的端口的 IP 地址。我尝试在另一台计算机上运行客户端 exe 文件，但我收到一条错误消息，提示无法连接到服务器。我运行了调试和发布 exe 文件，所以我认为问题出在代码的某个地方。

客户端代码：

```
#include "stdafx.h"
#include "SocketTestClient.h"
#include "SocketTestClientDlg.h"
#include <string>

#ifdef _DEBUG
#define new DEBUG_NEW
#endif

// CAboutDlg dialog used for App About

class CAboutDlg : public CDialog
{
public:
    CAboutDlg();

// Dialog Data
    enum { IDD = IDD_ABOUTBOX };

    protected:
    virtual void DoDataExchange(CDataExchange* pDX);    // DDX/DDV support

// Implementation
protected:
    DECLARE_MESSAGE_MAP()
};

CAboutDlg::CAboutDlg() : CDialog(CAboutDlg::IDD)
{
}

void CAboutDlg::DoDataExchange(CDataExchange* pDX)
{
    CDialog::DoDataExchange(pDX);
}

BEGIN_MESSAGE_MAP(CAboutDlg, CDialog)
END_MESSAGE_MAP()

// CSocketTestClientDlg dialog

CSocketTestClientDlg::CSocketTestClientDlg(CWnd* pParent /*=NULL*/)
    : CDialog(CSocketTestClientDlg::IDD, pParent)
    , m_senddata(_T(""))
    , m_recvData(_T(""))
{
    m_hIcon = AfxGetApp()->LoadIcon(IDR_MAINFRAME);
}

void CSocketTestClientDlg::DoDataExchange(CDataExchange* pDX)
{
    CDialog::DoDataExchange(pDX);
    DDX_Text(pDX, IDC_EDIT2, m_senddata);
    DDX_Text(pDX, IDC_EDIT1, m_recvData);
}

BEGIN_MESSAGE_MAP(CSocketTestClientDlg, CDialog)
    ON_WM_SYSCOMMAND()
    ON_WM_PAINT()
    ON_WM_QUERYDRAGICON()
    //}}AFX_MSG_MAP
    ON_BN_CLICKED(IDOK, &CSocketTestClientDlg::OnBnClickedOk)
    ON_BN_CLICKED(IDCANCEL, &CSocketTestClientDlg::OnBnClickedCancel)
END_MESSAGE_MAP()

// CSocketTestClientDlg message handlers

BOOL CSocketTestClientDlg::OnInitDialog()
{
    CDialog::OnInitDialog();

    // Add "About..." menu item to system menu.

    // IDM_ABOUTBOX must be in the system command range.
    ASSERT((IDM_ABOUTBOX & 0xFFF0) == IDM_ABOUTBOX);
    ASSERT(IDM_ABOUTBOX < 0xF000);

    CMenu* pSysMenu = GetSystemMenu(FALSE);
    if (pSysMenu != NULL)
    {
        CString strAboutMenu;
        strAboutMenu.LoadString(IDS_ABOUTBOX);
        if (!strAboutMenu.IsEmpty())
        {
            pSysMenu->AppendMenu(MF_SEPARATOR);
            pSysMenu->AppendMenu(MF_STRING, IDM_ABOUTBOX, strAboutMenu);
        }
    }

    // Set the icon for this dialog.  The framework does this automatically
    //  when the application's main window is not a dialog
    SetIcon(m_hIcon, TRUE);         // Set big icon
    SetIcon(m_hIcon, FALSE);        // Set small icon

    // TODO: Add extra initialization here

    return TRUE;  // return TRUE  unless you set the focus to a control
}

void CSocketTestClientDlg::OnSysCommand(UINT nID, LPARAM lParam)
{
    if ((nID & 0xFFF0) == IDM_ABOUTBOX)
    {
        CAboutDlg dlgAbout;
        dlgAbout.DoModal();
    }
    else
    {
        CDialog::OnSysCommand(nID, lParam);
    }
}

// If you add a minimize button to your dialog, you will need the code below
//  to draw the icon.  For MFC applications using the document/view model,
//  this is automatically done for you by the framework.

void CSocketTestClientDlg::OnPaint()
{
    if (IsIconic())
    {
        CPaintDC dc(this); // device context for painting

        SendMessage(WM_ICONERASEBKGND, reinterpret_cast<WPARAM>(dc.GetSafeHdc()), 0);

        // Center icon in client rectangle
        int cxIcon = GetSystemMetrics(SM_CXICON);
        int cyIcon = GetSystemMetrics(SM_CYICON);
        CRect rect;
        GetClientRect(&rect);
        int x = (rect.Width() - cxIcon + 1) / 2;
        int y = (rect.Height() - cyIcon + 1) / 2;

        // Draw the icon
        dc.DrawIcon(x, y, m_hIcon);
    }
    else
    {
        CDialog::OnPaint();
    }
}

// The system calls this function to obtain the cursor to display while the user drags
//  the minimized window.
HCURSOR CSocketTestClientDlg::OnQueryDragIcon()
{
    return static_cast<HCURSOR>(m_hIcon);
}

void CSocketTestClientDlg::OnBnClickedOk()
{

    SOCKET s = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);
    if(s == -1)
    {
        AfxMessageBox("Socket Initialiation Error");
    }
    SOCKADDR_IN serveraddr;
    struct hostent *hostentry;

    bool bSent = false;
    std::string server = "10.13.32.133";
    int portno = 1818;

    hostentry = gethostbyname(server.c_str());
    char *pipaddr = inet_ntoa (*(struct in_addr *)*hostentry->h_addr_list);

     memset(&serveraddr,0, sizeof(serveraddr));
     serveraddr.sin_family = AF_INET;
     serveraddr.sin_port = htons(portno);
     serveraddr.sin_addr.s_addr = inet_addr(pipaddr);

    //serv_addr.sa_data = htons(portno);

    if (connect(s,(SOCKADDR*)&serveraddr,sizeof(SOCKADDR_IN)) < 0) 
    {
         AfxMessageBox("ERROR connecting to the server");
         exit(1);
    }   

    char sbuf[1024], rbuf[1024];

    UpdateData(TRUE);
    sprintf(sbuf,"%s\r\n", (const char*) m_senddata);
    if(send(s, sbuf, strlen(sbuf), 0) == strlen(sbuf))
    {
        recv(s, rbuf, 1024, 0);
        m_recvData = rbuf;
        UpdateData(FALSE);
    }
    ::closesocket(s);
}

void CSocketTestClientDlg::OnBnClickedCancel()
{

    OnCancel();
} 
```

服务器代码：

```
#include "stdafx.h"
#include "SocketTestServer.h"
#include "SocketTestServerDlg.h"
#include <process.h>
#include <string>
#include <sys/types.h>

#ifdef _DEBUG
#define new DEBUG_NEW
#endif

// CAboutDlg dialog used for App About

class CAboutDlg : public CDialog
{
public:
    CAboutDlg();

// Dialog Data
    enum { IDD = IDD_ABOUTBOX };

    protected:
    virtual void DoDataExchange(CDataExchange* pDX);    // DDX/DDV support

// Implementation
protected:
    DECLARE_MESSAGE_MAP()
};

CAboutDlg::CAboutDlg() : CDialog(CAboutDlg::IDD)
{
}

void CAboutDlg::DoDataExchange(CDataExchange* pDX)
{
    CDialog::DoDataExchange(pDX);
}

BEGIN_MESSAGE_MAP(CAboutDlg, CDialog)
END_MESSAGE_MAP()

// CSocketTestServerDlg dialog

CSocketTestServerDlg::CSocketTestServerDlg(CWnd* pParent /*=NULL*/)
    : CDialog(CSocketTestServerDlg::IDD, pParent)
    , m_recvData(_T(""))
{
    m_hIcon = AfxGetApp()->LoadIcon(IDR_MAINFRAME);
}

void CSocketTestServerDlg::DoDataExchange(CDataExchange* pDX)
{
    CDialog::DoDataExchange(pDX);
    DDX_Text(pDX, IDC_EDIT1, m_recvData);
}

BEGIN_MESSAGE_MAP(CSocketTestServerDlg, CDialog)
    ON_WM_SYSCOMMAND()
    ON_WM_PAINT()
    ON_WM_QUERYDRAGICON()
    //}}AFX_MSG_MAP
    ON_BN_CLICKED(IDOK, &CSocketTestServerDlg::OnBnClickedOk)
    ON_WM_TIMER()
    ON_BN_CLICKED(IDCANCEL, &CSocketTestServerDlg::OnBnClickedCancel)
END_MESSAGE_MAP()

// CSocketTestServerDlg message handlers

BOOL CSocketTestServerDlg::OnInitDialog()
{
    CDialog::OnInitDialog();

    // Add "About..." menu item to system menu.

    // IDM_ABOUTBOX must be in the system command range.
    ASSERT((IDM_ABOUTBOX & 0xFFF0) == IDM_ABOUTBOX);
    ASSERT(IDM_ABOUTBOX < 0xF000);

    CMenu* pSysMenu = GetSystemMenu(FALSE);
    if (pSysMenu != NULL)
    {
        CString strAboutMenu;
        strAboutMenu.LoadString(IDS_ABOUTBOX);
        if (!strAboutMenu.IsEmpty())
        {
            pSysMenu->AppendMenu(MF_SEPARATOR);
            pSysMenu->AppendMenu(MF_STRING, IDM_ABOUTBOX, strAboutMenu);
        }
    }

    // Set the icon for this dialog.  The framework does this automatically
    //  when the application's main window is not a dialog
    SetIcon(m_hIcon, TRUE);         // Set big icon
    SetIcon(m_hIcon, FALSE);        // Set small icon

    StartServer();
    return TRUE;  // return TRUE  unless you set the focus to a control
}

void CSocketTestServerDlg::OnSysCommand(UINT nID, LPARAM lParam)
{
    if ((nID & 0xFFF0) == IDM_ABOUTBOX)
    {
        CAboutDlg dlgAbout;
        dlgAbout.DoModal();
    }
    else
    {
        CDialog::OnSysCommand(nID, lParam);
    }
}

// If you add a minimize button to your dialog, you will need the code below
//  to draw the icon.  For MFC applications using the document/view model,
//  this is automatically done for you by the framework.

void CSocketTestServerDlg::OnPaint()
{
    if (IsIconic())
    {
        CPaintDC dc(this); // device context for painting

        SendMessage(WM_ICONERASEBKGND, reinterpret_cast<WPARAM>(dc.GetSafeHdc()), 0);

        // Center icon in client rectangle
        int cxIcon = GetSystemMetrics(SM_CXICON);
        int cyIcon = GetSystemMetrics(SM_CYICON);
        CRect rect;
        GetClientRect(&rect);
        int x = (rect.Width() - cxIcon + 1) / 2;
        int y = (rect.Height() - cyIcon + 1) / 2;

        // Draw the icon
        dc.DrawIcon(x, y, m_hIcon);
    }
    else
    {
        CDialog::OnPaint();
    }
}

// The system calls this function to obtain the cursor to display while the user drags
//  the minimized window.
HCURSOR CSocketTestServerDlg::OnQueryDragIcon()
{
    return static_cast<HCURSOR>(m_hIcon);
}

void CSocketTestServerDlg::StartServer()
{
    SOCKADDR_IN serveraddr;
    int portno = 1818;
    memset(&serveraddr,0, sizeof(serveraddr));
    serveraddr.sin_family = AF_INET;
    serveraddr.sin_port = htons(portno);
    serveraddr.sin_addr.s_addr = INADDR_ANY;

    m_serversocket = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);
    if(m_serversocket == -1)
    {
        AfxMessageBox("Socket Initialiation Error");
    }

    if(bind(m_serversocket, (SOCKADDR*)&serveraddr,sizeof(SOCKADDR_IN)) < 0) 
    {
         AfxMessageBox("ERROR binding in the server socket");
         exit(1);
    }

    if(listen(m_serversocket,0) < 0)
    {
         AfxMessageBox("ERROR listening in the server socket");
         exit(1);
    }   

    SetTimer(0x01, 100, NULL);
}

static void f(void *p)
{
    CSocketTestServerDlg *pDlg = reinterpret_cast<CSocketTestServerDlg*>(p);
    pDlg->ProcessClientRequest();
}

void CSocketTestServerDlg::ProcessClientRequest()
{
    SOCKADDR_IN clientaddr;
    struct hostent *hostentry;
    int len = sizeof(clientaddr);
    SOCKET clientsocket = accept(m_serversocket, (sockaddr*)&clientaddr, &len);

    if(len == -1)
    {
        AfxMessageBox("Error accpeting the client socket");
    }
    else
    {
        char *p = inet_ntoa(clientaddr.sin_addr);
        int portno = ntohs(clientaddr.sin_port);
        // int inet_pton(int af, const char *restrict src, void *restrict dst);

        char rbuf[1024];
        recv(clientsocket, rbuf, 1024, 0);
        for(int i = 1024; i >= 1; i--)
        {
            if(rbuf[i] == '\n' && rbuf[i - 1] == '\r')
            {
                rbuf[i-1] = '\0';
                break;
            }
        }
        CString strRecvData;

        strRecvData.Format("%s\r\n%s %d\r\n%s\r\n\r\n", (const char*)CTime::GetCurrentTime().Format("%B %d, %Y %H:%M:%S"), p, portno, rbuf);
        m_recvData += strRecvData;
        m_bRefershData = true;
        strcat(rbuf, "\r\n");
        send(clientsocket, rbuf, 1024, 0);
        closesocket(clientsocket);
    }
}

void CSocketTestServerDlg::OnTimer(UINT_PTR nIDEvent)
{
    int idx = nIDEvent;

    if(m_bRefershData == true)
    {
        m_bRefershData = false;
        UpdateData(FALSE);
    }

    fd_set fds;
    struct timeval timeout;
    int result;
    timeout.tv_sec = 0;
    timeout.tv_usec = 100;

    FD_ZERO(&fds);
    FD_SET(m_serversocket, &fds);

    int rc = select(sizeof(fds)*8, &fds, NULL, NULL, &timeout);
    if (rc==-1) 
    {
      AfxMessageBox("ERROR selecting in the server socket");
      return;
    }
    else if(rc > 0)
    {
        if (FD_ISSET(m_serversocket, &fds)) 
        {
            m_bRefershData = false;
            HANDLE h = (HANDLE) ::_beginthread(f, 0, (void*) this);
        }

    }        
    CDialog::OnTimer(nIDEvent);
}
void CSocketTestServerDlg::OnBnClickedCancel()
{  

    OnCancel();
}

void CSocketTestServerDlg::OnBnClickedOk()
{

    OnOK();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:39:20.847

首先，查看客户端收到的错误的描述。你可以这样做：

```
if (connect(s,(SOCKADDR*)&serveraddr,sizeof(SOCKADDR_IN)) < 0) 
{
    CString msg = _T("ERROR connecting to the server: ");
    msg += _com_error(HRESULT_FROM_WIN32(WSAGetLastError())).ErrorMessage();
    AfxMessageBox(msg);
    exit(1);
} 
```

您需要为 _com_error 类包含 comdef.h。

一个可能的问题是服务器的计算机通过某种路由器连接到互联网，因此它不能充当服务器。

# java - jconsole 会去掉行尾吗？

> ID：15408363
> 
> 赞同：1
> 
> 时间：2013-03-14T11:46:00.117
> 
> 标签：java, jmx, jconsole, mbeans

我正在尝试使用将字符串粘贴到`MBean`属性中`jconsole`。当然，我已经完成了 1e3 次，没有任何困难。

但是，如果我粘贴的字符串包含行尾，`jconsole`则似乎用空格替换这些 - 而且它在没有告诉我的情况下这样做！

这是真的？如果这是真的，**我怎样才能得到一个带有行尾的字符串`jconsole`？**

**笔记。**我正在使用`Mac OS X`和粘贴带有 Unix 行尾的字符串。一位同事尝试在 Windows 上使用 Windows 行结尾。我们都尝试在包含来自其他操作系统的行尾中粘贴字符串，但不确定我们是否成功粘贴了正确的字符。我们都在使用`Sun/Oracle's standard JDK 1.7`

# sql-server - 将查询更改为动态 sql

> ID：15408366
> 
> 赞同：0
> 
> 时间：2013-03-14T11:46:11.023
> 
> 标签：sql-server

我有以下查询，它接受 XML 输入并将它们存储到临时表中。我需要使查询动态或动态调整任何表或列号修改的函数。我该怎么做：

```
DECLARE @sXML NVARCHAR(4000) 
DECLARE @hDoc INT  
SET @sXML = ' 
<Root> 
 <Item> 
  <Key>1</Key> 
  <Test1>A</Test1> 
  <Test2>A2</Test2> 
 </Item> 
 <Item> 
  <Key>2</Key> 
  <Test1>B</Test1> 
  <Test2>B3</Test2> 
 </Item> 
</Root> 
'  
CREATE TABLE #tabletest 
( 
 [Key] INT, 
 Test1 NVARCHAR(50), 
 Test2 NVARCHAR(50) 
) 
EXEC sp_xml_preparedocument @hDoc OUTPUT, @sXML 
INSERT INTO #tabletest SELECT * FROM OPENXML (@hDoc, '/Root/Item', 2) WITH #tabletest 
EXEC sp_xml_removedocument @hDoc 

select * from #tabletest  
DROP TABLE #tabletest 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:24:03.657

要创建动态 SQL，您需要将查询构建为字符串。使用 If 语句和其他逻辑来添加变量...等。

声明一个文本变量并使用它来连接你想要的 SQL。

然后，您可以使用“EXEC”命令执行此代码

例子：

```
DECLARE @SQL VARCHAR(100)
DECLARE @TableOne VARCHAR(20) = 'TableOne'
DECLARE @TableTwo VARCHAR(20) = 'TableTwo'
DECLARE @SomeInt INT

SET @SQL = 'INSERT INTO '

IF (@SomeInt = 1)
    SET @SQL = @SQL + @TableOne

IF (@SomeInt = 2)
    SET @SQL = @SQL + @TableTwo

SET @SQL = @SQL + ' VALUES....etc'

EXEC (@SQL) 
```

但是，使用此方法时您真正应该注意的是称为“SQL 注入”的安全问题。

你可以在这里阅读：http: [//msdn.microsoft.com/en-gb/library/ms161953 (v=sql.105).aspx](http://msdn.microsoft.com/en-gb/library/ms161953(v=sql.105).aspx)

防止 SQL 注入的一种方法是在将变量传递给 SQL-Server 之前在 C# 代码中对其进行验证。

另一种方法（或者可能在推测中最好使用）不是使用“EXEC”命令，而是使用一个名为“sp_executesql”的内置存储过程。

可在此处找到详细信息：http: [//msdn.microsoft.com/en-gb/library/ms188001.aspx](http://msdn.microsoft.com/en-gb/library/ms188001.aspx) 此处详细说明了如何使用：http: [//msdn.microsoft.com/en-gb/library /ms175170(v=sql.105).aspx](http://msdn.microsoft.com/en-gb/library/ms175170(v=sql.105).aspx)

您必须稍微不同地构建 SQL 并将参数传递给存储过程以及 @SQL。

# crystal-reports - 需要公式帮助

> ID：15408369
> 
> 赞同：-1
> 
> 时间：2013-03-14T11:46:23.947
> 
> 标签：crystal-reports

我正在尝试写一份报告，正在寻找没有接种过某种疫苗的人。问题是我曾经尝试过的配方是说他们已经接种或没有接种疫苗。当我去验证它并不总是正确的

```
if ({table.column} in (ID#) to (ID#)) then
"Has had Immunization"
else if ({table.column} <> (ID#) to (ID#))
then "Has not had Immunization" 
```

ID# 对所有人来说都是同一个号码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:03:35.477

记录选择公式：

```
// list desired immunization values; remove quotes if IDs are numeric
{table.field} IN [
  'ID0',
  'ID1',
  ...
  'IDn'
] 
```

# xml - 在 Cakuban 项目中运行 build.xml 时出错

> ID：15408370
> 
> 赞同：0
> 
> 时间：2013-03-14T11:46:34.607
> 
> 标签：xml, unit-testing, xslt-2.0, xslt-grouping

我们计划使用 Cakupan ( [Link](https://code.google.com/p/cakupan/) ) 作为 XSLT 单元测试覆盖工具。我们已经下载了示例项目并运行了 build.xml。那时我们赌的是波纹管错误。

**C:\Cakupan\build.xml:143: java.lang.NoClassDefFoundError: com/thoughtworks/xstream/XStream**

我在类路径中设置了所有相关库。Bellow build.xml 内容可以确保这一点。

```
<property name="lib.dir" value="lib" />
<path id="classpath.xslt">
   <pathelement location="${lib.dir}/commons-lang-2.1.jar" />
   <pathelement location="${lib.dir}/xstream-1.4.4.jar" />
   <pathelement location="${lib.dir}/xpp3-1.1.4c.jar" />
   <pathelement location="${lib.dir}/saxon9.jar" />
   <pathelement location="${lib.dir}/xalan-2.6.0.jar" />
   <pathelement location="${lib.dir}/${ant.test.lib}" />
   <pathelement location="${lib.dir}/junit-4.10.jar" />
</path> 
```

我已经把所有的罐子放在了 lib 文件夹中。请找到下面的屏幕截图

注意：XStream.class 在 xstream-1.4.4.jar 中可用

![在此处输入图像描述](../Images/d8d3990c8ca546ac746a2ec6d33779ad.png)

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:50:24.070

我们已经在 Patrick（Cakupan 的前任之一 - patrick.oosterveld@gmail.com）的帮助下解决了这个问题。

我们必须在eclipse的ant runtime classpath定义的全局条目中添加xstream jar和xpp3-1.1.4c jar文件。

# python - 累积分布图python

> ID：15408371
> 
> 赞同：34
> 
> 时间：2013-03-14T11:46:39.620
> 
> 标签：python, python-3.x, matplotlib

我正在使用 python 做一个项目，其中有两个数据数组。我们称它们为*pc*和*pnc*。我需要在同一张图上绘制这两者的累积分布。对于*pc*它应该是一个小于图，即在 (x,y) 处，*pc*中的 y 点的值必须小于 x。对于*pnc*，它是一个大于图，即在 (x,y) 处，*pnc*中的 y 点的值必须大于 x。

我试过使用直方图函数 - `pyplot.hist`。有没有更好更简单的方法来做我想做的事？此外，它必须在 x 轴上以对数刻度绘制。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-03-14T20:02:08.310

你很亲密。您不应该将 plt.hist 用作 numpy.histogram，它会同时为您提供值和 bin，而不是您可以轻松绘制累积值：

```
import numpy as np
import matplotlib.pyplot as plt

# some fake data
data = np.random.randn(1000)
# evaluate the histogram
values, base = np.histogram(data, bins=40)
#evaluate the cumulative
cumulative = np.cumsum(values)
# plot the cumulative function
plt.plot(base[:-1], cumulative, c='blue')
#plot the survival function
plt.plot(base[:-1], len(data)-cumulative, c='green')

plt.show() 
```

![在此处输入图像描述](../Images/82278def073ab91d2b361cff0cbc1094.png)

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2014-03-23T08:56:32.677

使用直方图确实不必要地繁重且不精确（分箱使数据模糊）：您可以对所有 x 值进行排序：每个值的索引是较小值的数量。这个更短更简单的解决方案如下所示：

```
import numpy as np
import matplotlib.pyplot as plt

# Some fake data:
data = np.random.randn(1000)

sorted_data = np.sort(data)  # Or data.sort(), if data can be modified

# Cumulative counts:
plt.step(sorted_data, np.arange(sorted_data.size))  # From 0 to the number of data points-1
plt.step(sorted_data[::-1], np.arange(sorted_data.size))  # From the number of data points-1 to 0

plt.show() 
```

此外，更合适的绘图样式确实是`plt.step()`而不是`plt.plot()`，因为数据位于离散位置。

结果是：

![在此处输入图像描述](../Images/b434d2de210011db5e387dd3376bdd90.png)

您可以看到它比 EnricoGiampieri 的答案的输出**更加**参差不齐，但这是真正的直方图（而不是它的近似、模糊版本）。

**PS**：正如 SebastianRaschka 所指出的，最后一点应该理想地显示总计数（而不是总计数-1）。这可以通过以下方式实现：

```
plt.step(np.concatenate([sorted_data, sorted_data[[-1]]]),
         np.arange(sorted_data.size+1))
plt.step(np.concatenate([sorted_data[::-1], sorted_data[[0]]]),
         np.arange(sorted_data.size+1)) 
```

有很多点，`data`如果没有缩放，效果是不可见的，但是当数据只包含几个点时，总计数的最后一个点确实很重要。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-07-04T06:09:01.223

在与@EOL 进行结论性讨论后，我想使用随机高斯样本作为摘要发布我的解决方案（左上角）：

![在此处输入图像描述](../Images/69b1c9aa6fada1be893a5ff5f78e256e.png)

```
import numpy as np
import matplotlib.pyplot as plt
from math import ceil, floor, sqrt

def pdf(x, mu=0, sigma=1):
    """
    Calculates the normal distribution's probability density 
    function (PDF).  

    """
    term1 = 1.0 / ( sqrt(2*np.pi) * sigma )
    term2 = np.exp( -0.5 * ( (x-mu)/sigma )**2 )
    return term1 * term2

# Drawing sample date poi
##################################################

# Random Gaussian data (mean=0, stdev=5)
data1 = np.random.normal(loc=0, scale=5.0, size=30)
data2 = np.random.normal(loc=2, scale=7.0, size=30)
data1.sort(), data2.sort()

min_val = floor(min(data1+data2))
max_val = ceil(max(data1+data2))

##################################################

fig = plt.gcf()
fig.set_size_inches(12,11)

# Cumulative distributions, stepwise:
plt.subplot(2,2,1)
plt.step(np.concatenate([data1, data1[[-1]]]), np.arange(data1.size+1), label='$\mu=0, \sigma=5$')
plt.step(np.concatenate([data2, data2[[-1]]]), np.arange(data2.size+1), label='$\mu=2, \sigma=7$') 

plt.title('30 samples from a random Gaussian distribution (cumulative)')
plt.ylabel('Count')
plt.xlabel('X-value')
plt.legend(loc='upper left')
plt.xlim([min_val, max_val])
plt.ylim([0, data1.size+1])
plt.grid()

# Cumulative distributions, smooth:
plt.subplot(2,2,2)

plt.plot(np.concatenate([data1, data1[[-1]]]), np.arange(data1.size+1), label='$\mu=0, \sigma=5$')
plt.plot(np.concatenate([data2, data2[[-1]]]), np.arange(data2.size+1), label='$\mu=2, \sigma=7$') 

plt.title('30 samples from a random Gaussian (cumulative)')
plt.ylabel('Count')
plt.xlabel('X-value')
plt.legend(loc='upper left')
plt.xlim([min_val, max_val])
plt.ylim([0, data1.size+1])
plt.grid()

# Probability densities of the sample points function
plt.subplot(2,2,3)

pdf1 = pdf(data1, mu=0, sigma=5)
pdf2 = pdf(data2, mu=2, sigma=7)
plt.plot(data1, pdf1, label='$\mu=0, \sigma=5$')
plt.plot(data2, pdf2, label='$\mu=2, \sigma=7$')

plt.title('30 samples from a random Gaussian')
plt.legend(loc='upper left')
plt.xlabel('X-value')
plt.ylabel('probability density')
plt.xlim([min_val, max_val])
plt.grid()

# Probability density function
plt.subplot(2,2,4)

x = np.arange(min_val, max_val, 0.05)

pdf1 = pdf(x, mu=0, sigma=5)
pdf2 = pdf(x, mu=2, sigma=7)
plt.plot(x, pdf1, label='$\mu=0, \sigma=5$')
plt.plot(x, pdf2, label='$\mu=2, \sigma=7$')

plt.title('PDFs of Gaussian distributions')
plt.legend(loc='upper left')
plt.xlabel('X-value')
plt.ylabel('probability density')
plt.xlim([min_val, max_val])
plt.grid()

plt.show() 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2019-12-24T17:13:29.980

为了增加我自己对社区的贡献，在这里我分享一下我绘制直方图的功能。这就是我理解这个问题的方式，同时绘制直方图和累积直方图：

```
def hist(data, bins, title, labels, range = None):
  fig = plt.figure(figsize=(15, 8))
  ax = plt.axes()
  plt.ylabel("Proportion")
  values, base, _ = plt.hist( data  , bins = bins, normed=True, alpha = 0.5, color = "green", range = range, label = "Histogram")
  ax_bis = ax.twinx()
  values = np.append(values,0)
  ax_bis.plot( base, np.cumsum(values)/ np.cumsum(values)[-1], color='darkorange', marker='o', linestyle='-', markersize = 1, label = "Cumulative Histogram" )
  plt.xlabel(labels)
  plt.ylabel("Proportion")
  plt.title(title)
  ax_bis.legend();
  ax.legend();
  plt.show()
  return 
```

如果有人想知道它的外观，请看一下（已激活 seaborn）：

[![在此处输入图像描述](../Images/7d03bb2b4ba8697ba576cc88ef572a91.png)](https://i.stack.imgur.com/wJVnM.png)

此外，关于双格（白线），我一直在努力获得漂亮的双格。这里有一个有趣的方法来规避这个问题：[如何将网格线从辅助轴放在主图后面？](https://stackoverflow.com/questions/55615701/how-to-put-grid-lines-from-the-secondary-axis-behind-the-primary-plot)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-12-10T19:29:09.310

生成此图的最简单方法是使用`seaborn`：

```
import seaborn as sns  
sns.ecdfplot() 
```

这是[文档](https://seaborn.pydata.org/generated/seaborn.ecdfplot.html_)

# java - 在Java中延迟一个循环以获得动画效果

> ID：15408376
> 
> 赞同：4
> 
> 时间：2013-03-14T11:47:03.643
> 
> 标签：java, while-loop, slider, sleep, vaadin

我知道这是一个重复的问题。但是，没有答案帮助我解决了我的问题。我正在[Vaadin](https://vaadin.com/)开展一个项目。因为我的布局很少（[参考此链接以了解我的布局](https://stackoverflow.com/questions/15335159/vaadin-expand-components-in-grid-layout-in-vaadin)）。当我按下按钮时，我需要将组件滑入和滑出。而且，我成功地做到了。

但是，我的问题是；为了让它感觉更好，我想减慢滑动效果。所以，它看起来像一种动画。我通过将 setExpandRatio() 从 1 更改为 0 来滑动组件。

```
setExpandRatio(component, 1.0f); 
```

至

```
setExpandRatio(component, 0f); 
```

这样它就会滑动。

为了减慢滑动速度，我尝试了这个。

```
float i = 1.0;
while(i >= 0)
{
  setExpandRatio(component, i);
  i = i - 0.1;
  try {
    Thread.sleep(1000);
      } 
    catch(InterruptedException ex) {}
} 
```

它只需等待 1 秒钟，然后快速向下滑动组件。我也尝试过使用

```
wait(1000); 
```

但是，没有用。以前有没有人解决过这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T20:05:51.520

看看[Animator](http://vaadin.com/addon/animator)插件，它提供了很好的方法来使用浏览器的客户端功能为组件设置动画。

# jboss - 用于高性能/关键任务应用的 JRuby/TorqueBox

> ID：15408379
> 
> 赞同：8
> 
> 时间：2013-03-14T11:47:18.713
> 
> 标签：jboss, jruby, torquebox, mission-critical

我们正在评估开发电信相关应用平台（以及将一些独立应用程序迁移/整合到新平台中）的几个选项。我们主要关注的问题之一是在高峰时段处理大量请求的能力。

我们认为 TorqueBox 似乎是一个值得考虑的有趣解决方案，因为：

*   速度（仅次于纯 Java 性能）
*   比 Java 更快的开发时间
*   可维护性
*   支持线程/并发，即使它是 Ruby
*   使用 Rails 进行更快/更轻松的前端开发
*   ...
*   RedHat 支持并在 JBoss 上运行（可扩展性、未来开发以及必要时调用 Java 的能力）

1.  **有没有人用 JRuby/TorqueBox 开发/部署过类似的应用程序？**
2.  **未来是否存在严重的性能瓶颈？（或者为什么我们不应该使用 JRuby 而应该坚持使用 Java？）**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-18T12:43:20.710

答案是肯定的，但要注意内存泄漏（gems、线程安全问题等）。您必须熟悉 VisualVM、Eclipse MAT 和/或 NewRelic 等工具。

我们成功地为亚马逊 EC2 上的一些客户在生产环境中使用 Torquebox，每天处理 60k-80k 次访问（新的 c3 实例非常适合 Java）。

部署也是一个问题。由于内存消耗，我们无法设置任何类型的滚动重启。因此，每次我们使用 Capistrano 进行部署时，都需要完全重启 JBoss（对我们来说不是什么大问题）。

最好的，安东尼奥

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-26T10:20:58.360

是的，任何带有 JRuby 的成熟 Java Web 服务器都是有价值的选择。在高峰时段处理高负载的细节实际上取决于您将运行哪种应用程序，您可以负担使用多少“硬件”，但总的来说这是可以实现的，但请注意可能仍然存在一些“陷阱”例如，不能很好地处理线程安全的 Ruby 库（gems）。你只需要了解如何进行比 - 这似乎是因为你想使用'Celluloid.IO':)

# android - Listview在点击时选择多个项目

> ID：15408383
> 
> 赞同：1
> 
> 时间：2013-03-14T11:47:24.377
> 
> 标签：android, android-listview

我正在使用列表视图来显示 Base-Adpater 类中的项目。我将视图夸大为

```
if (convertView == null || vi.findViewById(R.id.artist)== null)
            {
                View vi = inflater.inflate(R.layout.task_list_lay, null);
            } 
```

& 将视图单击侦听器设置为：

```
vi.setOnClickListener(commonListen); 
```

列表视图 xml：

```
 <ListView
    android:id="@+id/list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_below="@+id/table"
    android:layout_marginTop="0dip"
    android:divider="#b5b5b5"
    android:dividerHeight="1dp"
    android:choiceMode="singleChoice" >
 </ListView> 
```

如果我点击多个项目，它会选择所有这些项目并执行每个视图的单击侦听器操作。我不想要这种行为。我只想一次选择一项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:53:17.290

我看到的是你正在使用`onClickListener`

您应该`onItemClickListener`在处理 ListView 时使用。

# python - compare two lists with zeros en larger numbers

> ID：15408387
> 
> 赞同：-1
> 
> 时间：2013-03-14T11:47:31.390
> 
> 标签：python

I have to compare two lists of elements with the same length. (as an example `[0,562,256,0,0,856]` and `[265,0,265,0,874,958]`. Both list have an amount of zeroes and an amount of numbers above 249\. I want to compare these lists. If at an index both lists have a number different from `0` the number should be saved in a list. The result should be two lists with the same length with only numbers above `249` (in the example `[256,856]` and `[265,958]`). Thanks for your help!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T11:55:10.060

Use `zip()` to pair up the elements of each list:

```
listA = [0,562,256,0,0,856]
listB = [265,0,265,0,874,958]

combined = zip(listA, listB)
resultA = [a for a, b in combined if a and b]
resultB = [b for a, b in combined if a and b] 
```

gives:

```
>>> resultA
[256, 856]
>>> resultB
[265, 958] 
```

You could also first use `filter()` to remove all pairs where one or the other element is 0:

```
combined = filter(lambda (a, b): (a and b), zip(listA, listB))
resultA = [a for a, b in combined]
resultB = [b for a, b in combined] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T11:59:50.490

maybe we will find a better way,but

```
list1 = [0,562,256,0,0,856]
list2 = [265,0,265,0,874,958]
rest1 = []
rest2 = []
result1 = []
result2 = []
for i in range(len(list1)):
if list1[i] and list2[i]:
    rest1.append(list1[i])
        rest2.append(list2[i])
for i in range(len(rest1)):
if rest1[i] >249 and rest2[i]>249:
        result1.append(rest1[i])
    result2.append(rest2[i])
print(result1,result1) 
```

# python - 发布到 AWS S3 签名不匹配错误

> ID：15408389
> 
> 赞同：1
> 
> 时间：2013-03-14T11:47:35.030
> 
> 标签：python, rest, amazon-s3, base64

这是我的表格

```
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  </head>
  <body>

  <form action="http://mybucket.s3.amazonaws.com/" method="post" enctype="multipart/form-data">
    Key to upload: <input type="input" name="key" value="user/eric/" /><br />
    <input type="hidden" name="acl" value="public-read" />

    <input type="hidden" name="AWSAccessKeyId" value="myAWSId" />
    <input type="hidden" name="Policy" value="Base64EncodingOfPolicy"/>
    <input type="hidden" name="Signature" value="Signature Calculated as urlencode(base64(HMAC-SHA1(secret, policy base64 encoded string same as utf-8 encoded)))" />
    File: <input type="file" name="file" /> <br />
    <!-- The elements after this will be ignored -->
    <input type="submit" name="submit" value="Upload to Amazon S3" />
  </form>

</html> 
```

这是我的政策

```
{ "expiration": "2014-12-01T12:00:00.000Z",

  "conditions": [

    {"acl": "public-read" },

    {"bucket": "mybucket" },

    ["starts-with", "$key", "user/eric/"],

  ]

} 
```

这是 base64 编码的策略

```
eyAiZXhwaXJhdGlvbiI6ICIyMDE0LTEyLTAxVDEyOjAwOjAwLjAwMFoiLA0KDQogICJjb25kaXRp
b25zIjogWw0KDQogICAgeyJhY2wiOiAicHVibGljLXJlYWQiIH0sDQoNCiAgICB7ImJ1Y2tldCI6
ICJoYWJpdHN1c2VybWVkaWEiIH0sDQoNCiAgICBbInN0YXJ0cy13aXRoIiwgIiRrZXkiLCAidXNl
ci9lcmljLyJdLA0KDQogIF0NCg0KfQ== 
```

我尝试过使用带和不带换行符的 base64 编码字符串。在使用上述编码和换行符时，我应该记住一些具体的事情吗？

`SignatureDoesNotMatch`即使在多次尝试考虑所有可能的排列之后，我仍然会收到错误消息。

我还使用了签名验证工具并检查了 AWS 接受的内容并与之匹配。[http://aws.amazon.com/code/199](http://aws.amazon.com/code/199)

我该如何调试呢？如果您已使用 REST API 成功发布到 S3，您可以分享该片段吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T16:29:25.017

好的，一段时间后我能够解决这个问题。

这是我生成签名的python代码

```
import base64
import hmac
from hashlib import sha1
import urllib

input = open("policy.txt", "rb")
policy = input.read()
policy_encoded = base64.b64encode(policy).encode("UTF-8")
secret = "<my_aws_secret>"

print 'Encoded Policy  %s' %(policy_encoded)

hashed = hmac.new(secret,policy_encoded, sha1)

#This is the required value
signature = base64.b64encode(hashed.digest())

#This is not required for a HTTP POST form based request, only when it has to be passed in urlencoded format
signature_urlencoded = urllib.quote_plus(base64.b64encode(hashed.digest()))

print 'Signature urlencoded  %s' %(signature) 
```

我的 policy.txt 是

```
{ "expiration": "2014-12-01T12:00:00.000Z",

"conditions": [

        {"acl": "public-read" },

        {"bucket": "<mybucket>" },

        {"success_action_status" : "201"},

        ["starts-with", "$key", "uploads/"],
        ]

} 
```

我的表格看起来像

```
<form action="http://habitsusermedia.s3.amazonaws.com/" method="post" enctype="multipart/form-data">

                <input type="hidden" name="acl" value="public-read" />
                <input type="input" name="key" value="uploads/${filename}" />
                <input type="hidden" name="success_action_status" value="201" />

                <input type="hidden" name="AWSAccessKeyId" value="<aws_access_key>" />

                <input type="hidden" name="Policy" value="<policy_encoded_as_base64>"/>

                <input type="hidden" name="Signature" value="<signature>" />

                File: <input type="file" name="file" /> <br />

                <!-- The elements after this will be ignored -->
                <input type="submit" name="submit" value="Upload to Amazon S3" />
                </form> 
```

确保您的 AWS 存储桶配置为接受来自任何域的 POST、PUT。为此使用策略生成工具。

有一篇有用的文章解释了[AWS上的这些概念](http://aws.amazon.com/articles/1434)

# java - libgdx 滚动窗格不显示

> ID：15408391
> 
> 赞同：0
> 
> 时间：2013-03-14T11:47:48.390
> 
> 标签：java, android, libgdx, scrollpane

我在让 libgdxs 滚动窗格控件正常工作时遇到问题。下面的代码显示了一个简单布局的控件设置，其中包含一个标签、一个滚动窗格内的项目列表和一个按钮。问题是我的滚动窗格除了 vScroll/vScrollKnob Ninepatch （那个白色的小方块）之外没有显示任何东西，它看起来像这样：

[截图](http://i.imgur.com/EJKqgXL.png)。

```
 private void setupLayout()
{
    String[] listEntries = {"1","2","3","4","5"};
    ListStyle listStyle = new ListStyle();  
    NinePatch example = new NinePatch(new Texture(Gdx.files.internal("data/example.9.png")));       
    listStyle.selectedPatch = example;
    listStyle.font = new BitmapFont();
    mList = new List(listEntries,listStyle);

    ScrollPaneStyle paneStyle = new ScrollPaneStyle();
    paneStyle.vScroll = example;
    paneStyle.vScrollKnob = example;        
    mListScroll = new ScrollPane(mList,paneStyle);
    mListScroll.setScrollingDisabled(true, false);
    mListScroll.width = 500;
    mListScroll.height = 500;

    LabelStyle ls = new LabelStyle();
    ls.font = new BitmapFont();
    ls.fontColor = new Color(1.0f, 1.0f, 1.0f, 1.0f);
    mLabel = new Label("Label", ls);    

    TextButtonStyle buttonStyle = new TextButtonStyle();
    buttonStyle.font = new BitmapFont();
    mButton = new TextButton("Button",buttonStyle);

    Table table = new Table();
    table.add(mLabel);
    table.row();
    table.add(mButton);
    table.row();
    table.add(mListScroll);
    mStage.addActor(table);
} 
```

如果我不使用滚动窗格并将列表直接添加到表中，它会按预期工作，如下所示：

```
 Table table = new Table();
    table.add(mLabel);
    table.row();
    table.add(mButton);
    table.row();
    table.add(mList);             //changed mListScroll(scrollpane class) to mList(List class)
    mStage.addActor(table); 
```

[截屏](http://imgur.com/lwkCTFp.png)

但是当项目太多时，它会延伸到我的屏幕底部。我在这里做错了什么？我需要在滚动窗格上设置另一个参数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:51:48.570

我相信您遇到的问题是您如何将内容添加到表格中。我建议使用以下代码而不是您的操作方式：

```
Table table = new Table();
table.add(mLabel);
table.row();
table.add(mButton);
table.row();

// Changing the table layout size itself.
table.add(mListScroll).size(500, 500);

mStage.addActor(table); 
```

有关更详细的说明，请参阅[TableLayout](https://code.google.com/p/table-layout/)，此处的快速入门向您展示了更多如何使用表格来布置对象。

# javascript - 如何使用事件侦听器复制 DOM 节点？

> ID：15408394
> 
> 赞同：73
> 
> 时间：2013-03-14T11:48:10.277
> 
> 标签：javascript, dom, dojo

我试过

```
node.cloneNode(true); // deep copy 
```

它似乎没有复制我使用添加的事件侦听器`node.addEventListener("click", someFunc);`。

我们使用 Dojo 库。

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2013-03-14T14:12:30.613

`cloneNode()`不复制事件侦听器。实际上，一旦附加了事件侦听器，就无法通过 DOM 获取它们，因此您的选择是：

*   手动将所有事件侦听器添加到克隆节点
*   重构代码以使用事件委托，以便所有事件处理程序都附加到包含原始和克隆的节点
*   使用包装函数`Node.addEventListener()`来跟踪添加到每个节点的侦听器。例如，这就是 jQuery 的[`clone()`](http://api.jquery.com/clone/)方法能够使用其事件侦听器复制节点的方式。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-04-22T19:25:12.643

这并不能准确回答问题，但如果用例允许*移动*元素而不是*复制*元素，则可以将[removeChild](https://developer.mozilla.org/en-US/docs/Web/API/Node/removeChild)与[appendChild](https://developer.mozilla.org/en-US/docs/Web/API/Node/appendChild)一起使用，这将保留事件侦听器。例如：

```
function relocateElementBySelector(elementSelector, destSelector) {
  let element = document.querySelector(elementSelector);
  let elementParent = element.parentElement;
  let destElement = document.querySelector(destSelector);
  elementParent.removeChild(element);
  destElement.appendChild(element);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-11-04T03:09:26.937

**事件委托示例。**

在阅读了 Tim Down 的回答后，我发现委托事件很容易实现，解决了我遇到的类似问题。我想我会添加一个具体的例子，尽管它是在 JQuery 而不是 Dojo 中。

我正在重新设计语义 UI 中的应用程序，这需要一小块 JS 才能使消息关闭按钮起作用。但是，消息是从`document.importNode`库中使用的 HTML 模板标签中克隆出来的。这意味着即使我确实将事件处理程序附加到新 HTML 中的模板，它们也会在克隆过程中丢失。

我无法执行 Tim 的选项 1，即在克隆期间简单地重新附加它们，因为消息传递库与前端框架无关。（有趣的是，我之前的前端在 Zurb Foundation 中使用“数据可关闭”属性，其功能在克隆过程中仍然存在）。

建议的[正常事件处理是这样](https://semantic-ui.com/collections/message.html#dismissable-block)的：

```
$('.message .close').on('click', function() {
    $(this)
    .closest('.message')
    .transition('fade');
}); 
```

应用程序加载时的“.message”问题仅与单个模板匹配，而不是稍后通过网络套接字到达的实际消息。

使这个委托，意味着将事件附加到消息被克隆到的容器中`<div id="user-messages">`

所以它变成：

```
$('#user-messages').on('click', '.message .close', function() {
    $(this)
    .closest('.message')
    .transition('fade');
}); 
```

这立即奏效，节省了任何复杂的工作，例如包装事件潜艇的第三个选项。

[Dojo 等效](https://dojotoolkit.org/reference-guide/1.10/dojo/on.html#event-delegation)项在概念上看起来非常相似。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-05-28T14:45:18.067

这就是[@JeromeJ](https://stackoverflow.com/questions/15408394/how-to-copy-a-dom-node-with-event-listeners#comment76730835_15411683)在评论中所描述的。使用此 HTML 代码创建初始元素。

`<DIV ONCLICK="doSomething(this)">touch me</DIV>`

当您克隆此元素时，结果将具有相同的处理程序，并且“this”将指向克隆的元素。

如果可以在 JavaScript 中轻松添加 ONCLICK 处理程序，那就太好了。这种方法意味着您必须用 HTML 编写一些代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-28T12:45:18.223

我知道我迟到了，但这是一个对我有用的解决方案：

```
const originalButtons = original.querySelectorAll<HTMLElement>('button');
const cloneButtons = clone.querySelectorAll<HTMLElement>('button');
originalButtons.forEach((originalButton: HTMLElement, index: number) => {
  cloneButtons[index].after(originalButton);
  cloneButtons[index].remove();
}); 
```

# c# - 从类中绑定、排序和分页 GridView

> ID：15408399
> 
> 赞同：1
> 
> 时间：2013-03-14T11:48:17.197
> 
> 标签：c#, asp.net, sorting, gridview

`GridView`我正在研究一个类来在 C# 中对我的 's 进行数据绑定......

我已经做到了，所以我的寻呼机可以工作，但不确定我将如何进行排序工作......到目前为止，我的代码如下所示：

```
public static class Binder
{
public class gridView {
    public static void Bind(GridView grid, IList source, bool pager, bool sorting) {
        grid.DataSource = source;
        if (pager) {
            grid.PageIndexChanging += new GridViewPageEventHandler(PageIndexChanging);
        }
        if (sorting) {
            grid.Sorting += new GridViewSortEventHandler(Sorting);
        }
        grid.DataBind();
    }

    public static void PageIndexChanging(object sender, GridViewPageEventArgs e) {
        if (sender != null) {
            GridView GridView1 = sender as GridView;
            GridView1.PageIndex = e.NewPageIndex;
            GridView1.DataBind();
        }
    }
    public static void Sorting(object sender, GridViewSortEventArgs e) {
        if (sender != null) {
            GridView GridView1 = sender as GridView;
            //What to do?
            GridView1.DataBind();
        }
    }
}
} 
```

我会像这样绑定一个gridview：`Binder.gridView.Bind(MyGridView, MyDataSource, true, true);`

但是我有点迷失了如何进行分类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:01:59.463

您需要在您的 aspx 中启用排序 - AllowSorting="True"

```
<asp:GridView ID="grid" runat="server" DataKeyNames="id" AutoGenerateColumns="False"
                AllowPaging="True" AllowSorting="True" PageSize="25" CellPadding="4" BorderStyle="None"
                OnRowDataBound="gvProfileSearch_RowDataBound" Width="100%" Translate="true"> 
```

* * *

对于 IList，您可以使用 OrderBy-Function

```
IList<T> tmp = new IList<T>();
tmp.OrderByDescending...
tmp.OrderBy... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:38:09.003

此代码用于绑定、分页和排序......

```
 protected void RadgvData_SortCommand(object sender, GridSortCommandEventArgs e)
        {
            GridTableView tableView = e.Item.OwnerTableView;
            e.Canceled = true;
            GridSortExpression expression = new GridSortExpression();
            expression.FieldName = e.SortExpression;
            if (tableView.SortExpressions.Count == 0 || tableView.SortExpressions[0].FieldName != e.SortExpression)
            {
                expression.SortOrder = GridSortOrder.Descending;
            }
            else if (tableView.SortExpressions[0].SortOrder == GridSortOrder.Descending)
            {
                expression.SortOrder = GridSortOrder.Ascending;
            }
            else if (tableView.SortExpressions[0].SortOrder == GridSortOrder.Ascending)
            {
                expression.SortOrder = GridSortOrder.Descending;
            }

            tableView.SortExpressions.AddSortExpression(expression);
            RadgvData.Rebind();

        }

        protected void RadgvData_NeedDataSource(object sender, GridNeedDataSourceEventArgs e)
        {
            try
            {
                DataTable dtData = objCutTypeBAL.getCutTypeDetail(string.Empty);
                if (dtData.Rows.Count > 0)
                {
                    RadgvData.DataSource = dtData;
                }
                else
                {
                    RadgvData.DataSource = String.Empty;
                }
            }
            catch (Exception ex)
            {
                throw ex;
            }
        }
        protected void RadgvData_ItemDataBound(object sender, GridItemEventArgs e)
        {
            if (e.Item is GridPagerItem)
            {
                RadgvData.PagerStyle.AlwaysVisible = true;
            }
            if (e.Item is GridDataItem && e.Item.OwnerTableView.DataMember != "ChildCutType")
            {
                GridDataItem dataitem = (GridDataItem)e.Item;

                ImageButton imgDel = (ImageButton)dataitem["Delete"].Controls[0];
                string strCutType;
                strCutType = dataitem.GetDataKeyValue("CutType").ToString();
                DataTable dtData = objCutTypeBAL.getCutTypeDetail(strCutType);
                if (dtData.Rows.Count > 0)
                {
                    imgDel.Visible = false;
                }
            }
        }

        protected void RadgvData_PageIndexChanged(object sender, GridPageChangedEventArgs e)
        {
            RadgvData.CurrentPageIndex = e.NewPageIndex;
            popGrid();
        } 
```

# javascript - JS 正则表达式适用于 regular-expressions.info，但不适用于我的代码

> ID：15408400
> 
> 赞同：0
> 
> 时间：2013-03-14T11:48:23.967
> 
> 标签：javascript, regex

我在 JavaScript 中有这个字符串：

```
s = "</p><ol><li>First\n</li><li>Second\n</li></ol><p>" 
```

然后我这样做（删除外部的“</p>...<p>”）：

```
s = s.replace(/^<\/([^> ]+)[^>]*>(.*)<\1>$/,"$2"); 
```

什么都没有发生（s 没有改变，并且使用 match() 返回 false），但是如果我去[http://www.regular-expressions.info/javascriptexample.html](http://www.regular-expressions.info/javascriptexample.html)尝试它，它可以工作！

我已经尝试了各种方法（创建一个单独的 regExp 对象，使用 //g，取出 ^$，将 [^> ]+ 替换为 [a-z0-9]*...），但没有任何区别.

它快把我逼疯了。谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:05:35.593

问题只是`.`不匹配换行符`\n`。

如果您将 替换为`.*`，`[\s\S]*`您的正则表达式应该可以工作。

`[\s\S]`表示匹配任何空格或非空格字符，相当于匹配*任何*字符。

# c++ - 动态字符串数组

> ID：15408401
> 
> 赞同：0
> 
> 时间：2013-03-14T11:48:26.027
> 
> 标签：c++, string

我对以下课程有疑问。我认为问题出在字符串数组上，因为我做了另外两个类，问题是一样的。当我运行该程序时，它会抛出“双重免费或损坏”，但我认为不可能有任何双重损坏。输入字符串作为引用或作为 Add 方法中的公共参数时，问题是相同的。

```
class WareH
{
        public:
        WareH(void)
        {
               first = true;
               rows = 1;
               inLine = 0;
               cnt = 0;
               max = 2;
               cL = 0;
               strs = new string[max];
        }
        ~WareH(void)
        {
               delete [] strs;
        }
        bool    Add(string& str, int ending)
        {
               if (first)
                     inLine++;
               else
                     cL++; 
               if (ending == 0)
               {
                     if (first)
                          first = false;
                     if (cL != inLine)
                          return false;
                     rows++;
               } 
               strs[cnt++] = str;
               Bigger();
               return true;
         }
         void Bigger(void)
         {
                if(max == cnt)
                {
                       max *= 2;
                       string* tmp = new string[max];
                       for (int i = 0; i < cnt; i++)
                              tmp[i] = strs[i];
                       delete [] strs;
                       strs = tmp;
                }
         }
         friend ofstream& operator<<(ofstream& of,WareH war)
         {
                for (int a = 0; a < war.cnt; a++)
                       of << war.strs[a] << endl;
                return of;
         }
private:
      bool first;
      int rows, inLine, cnt, max, cL;
      string* strs;
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:03:38.620

当一个类管理资源并在其析构函数中释放它们时，您必须考虑[三法则](https://stackoverflow.com/questions/4172722)以确保复制一个对象不会导致两个对象管理相同的资源。

这就是这里发生的事情：默认的复制构造函数和复制赋值运算符将复制指针，为您提供两个对象，它们都将尝试在销毁时删除同一个数组。解决方案是：

*   删除拷贝构造函数和拷贝赋值运算符，防止拷贝；或者
*   实现它们以将字符串复制到新数组中，而不仅仅是指针；或者
*   使用`std::vector`而不是自己管理内存分配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:06:24.173

> 当我运行该程序时，它会抛出“双重免费或损坏”，但我认为不可能有任何双重损坏。

有根据的猜测：

问题不在于您显示的代码，而在于客户端代码。这是我认为会发生的事情：

您编写了实例化（或按值分配或返回或存储在 std 容器中）`WareH`实例的客户端代码，并且由于您没有定义复制构造函数和赋值运算符（请参阅“[三巨头](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)”），它们最终会从您的源对象。当这些实例中的第一个（相互分配的）被删除时，它们会删除 strs 指针。

当第二个实例被删除时，它们会删除之前删除的相同 strs 指针（因为默认的复制构造函数和赋值运算符不会复制分配的内存，而只是复制指针）。

解决方案（如果确实是问题）：

*   工作（和坏）解决方案：为您的班级明确定义复制构造和赋值运算符。

*   工作（和好的）解决方案：将您的实施`strs`为 a`std::vector<std::string>`而不是`std::string*`and `cnt`。

# c# - 来自 C# 的 IP Cam 实时提要

> ID：15408404
> 
> 赞同：4
> 
> 时间：2013-03-14T11:48:29.560
> 
> 标签：c#, ip-camera

我正在尝试从 C# 应用程序中的 TPLink TL-SC3171G IP cam 获取实时信息。我试过使用 AForge.NET 库，但没有运气。AForge.NET 的示例代码对我不起作用。我收到“远程服务器返回错误：(401) 未经授权的访问。”

我可以通过具有基本 IP 地址的浏览器访问 cam `"http://192.168.168.20"`：。在我尝试过的应用程序中：

```
"http://username:password@192.168.168.20"
"http://username:password@192.168.168.20:port" 
```

你能帮我一些方向吗？它真的不必是 AForge.NET 库。

这是代码：

```
using AForge.Video;
using AForge.Video.DirectShow;

namespace Player
{
    public partial class MainForm : Form
    {
        private Stopwatch stopWatch = null;

        // Class constructor
        public MainForm( )
        {
            InitializeComponent( );
        }

        private void MainForm_FormClosing( object sender, FormClosingEventArgs e )
        {
            CloseCurrentVideoSource( );
        }

        // "Exit" menu item clicked
        private void exitToolStripMenuItem_Click( object sender, EventArgs e )
        {
            this.Close( );
        }

        // Open local video capture device
        private void localVideoCaptureDeviceToolStripMenuItem_Click( object sender, EventArgs e )
        {
            VideoCaptureDeviceForm form = new VideoCaptureDeviceForm( );

            if ( form.ShowDialog( this ) == DialogResult.OK )
            {
                // create video source
                VideoCaptureDevice videoSource = form.VideoDevice;

                // open it
                OpenVideoSource( videoSource );
            }
        }

        // Open video file using DirectShow
        private void openVideofileusingDirectShowToolStripMenuItem_Click( object sender, EventArgs e )
        {
            if ( openFileDialog.ShowDialog( ) == DialogResult.OK )
            {
                // create video source
                FileVideoSource fileSource = new FileVideoSource( openFileDialog.FileName );

                // open it
                OpenVideoSource( fileSource );
            }
        }

        // Open JPEG URL
        private void openJPEGURLToolStripMenuItem_Click( object sender, EventArgs e )
        {
            URLForm form = new URLForm( );

            form.Description = "Enter URL of an updating JPEG from a web camera:";
            form.URLs = new string[]
                {
                    "http://195.243.185.195/axis-cgi/jpg/image.cgi?camera=1",
                };

            if ( form.ShowDialog( this ) == DialogResult.OK )
            {
                // create video source
                JPEGStream jpegSource = new JPEGStream( form.URL );

                // open it
                OpenVideoSource( jpegSource );
            }
        }

        // Open MJPEG URL
        private void openMJPEGURLToolStripMenuItem_Click( object sender, EventArgs e )
        {
            URLForm form = new URLForm();

            form.Description = "Enter URL of an MJPEG video stream:";
            form.URLs = new string[]
                {
                    "http://195.243.185.195/axis-cgi/mjpg/video.cgi?camera=4",
                    "http://195.243.185.195/axis-cgi/mjpg/video.cgi?camera=3",
                    "http://192.168.168.20:80",
                };

            if ( form.ShowDialog( this ) == DialogResult.OK )
            {
                // create video source
                MJPEGStream mjpegSource = new MJPEGStream( form.URL );

                // open it
                OpenVideoSource( mjpegSource );
            }
        }

        // Open video source
        private void OpenVideoSource( IVideoSource source )
        {
            // set busy cursor
            this.Cursor = Cursors.WaitCursor;

            // stop current video source
            CloseCurrentVideoSource( );

            // start new video source
            videoSourcePlayer.VideoSource = source;
            videoSourcePlayer.Start( );

            // reset stop watch
            stopWatch = null;

            // start timer
            timer.Start( );

            this.Cursor = Cursors.Default;
        }

        // Close video source if it is running
        private void CloseCurrentVideoSource( )
        {
            if ( videoSourcePlayer.VideoSource != null )
            {
                videoSourcePlayer.SignalToStop( );

                // wait ~ 3 seconds
                for ( int i = 0; i < 30; i++ )
                {
                    if ( !videoSourcePlayer.IsRunning )
                        break;
                    System.Threading.Thread.Sleep( 100 );
                }

                if ( videoSourcePlayer.IsRunning )
                {
                    videoSourcePlayer.Stop( );
                }

                videoSourcePlayer.VideoSource = null;
            }
        }

        // New frame received by the player
        private void videoSourcePlayer_NewFrame( object sender, ref Bitmap image )
        {
            DateTime now = DateTime.Now;
            Graphics g = Graphics.FromImage( image );

            // paint current time
            SolidBrush brush = new SolidBrush( Color.Red );
            g.DrawString( now.ToString( ), this.Font, brush, new PointF( 5, 5 ) );
            brush.Dispose( );

            g.Dispose( );
        }

        // On timer event - gather statistics
        private void timer_Tick( object sender, EventArgs e )
        {
            IVideoSource videoSource = videoSourcePlayer.VideoSource;

            if ( videoSource != null )
            {
                // get number of frames since the last timer tick
                int framesReceived = videoSource.FramesReceived;

                if ( stopWatch == null )
                {
                    stopWatch = new Stopwatch( );
                    stopWatch.Start( );
                }
                else
                {
                    stopWatch.Stop( );

                    float fps = 1000.0f * framesReceived / stopWatch.ElapsedMilliseconds;
                    fpsLabel.Text = fps.ToString( "F2" ) + " fps";

                    stopWatch.Reset( );
                    stopWatch.Start( );
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T15:56:29.060

现在我是这样做的：

```
string sourceURL = "http://ipaddress/jpg/image.jpg";
            byte[] buffer = new byte[100000];
            int read, total = 0;
            // create HTTP request
            HttpWebRequest req = (HttpWebRequest)WebRequest.Create(sourceURL);
            req.Credentials = new NetworkCredential("username", "pass");
            // get response
            WebResponse resp = req.GetResponse();
            // get response stream
            Stream stream = resp.GetResponseStream();
            // read data from stream
            while ((read = stream.Read(buffer, total, 1000)) != 0)
            {
                total += read;
            }
            // get bitmap
            Bitmap bmp = (Bitmap)Bitmap.FromStream(
                          new MemoryStream(buffer, 0, total));

            pictureBox1.Image = bmp; 
```

当然，我已经将此代码放在一个线程中，并且每 500 毫秒调用一次。

# matlab - matlab中重叠的特征值

> ID：15408414
> 
> 赞同：-1
> 
> 时间：2013-03-14T11:48:48.757
> 
> 标签：matlab

如果我有一个矩阵

```
F=[ 24 3  17 1;
    28 31 19 1;
    24 13 25 2;
    47 43 39 1;
    56 41 39 2]; 
```

在前三列中，我有特征值，第四列用于类标签。我的问题是当特定值的类标签不同时摆脱相同的特征值。

就像`F`矩阵一样，我必须删除第 1、3、4 和 5 行，因为对于第一列，第四列有 2 个不同的值，第三列（39 和 39）也是如此，因为类标签再次被更改。所以输出应该看起来像

```
F=[28 31 19 1]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:41:44.833

直接的方法是遍历列，计算每个值的不同类的数量，并删除与多个类关联的值的行。

### 例子

```
F = [24 3 17 1; 28 31 19 1; 24 13 25 2; 47 43 39 1; 56 41 39 2];

%// Iterate over columns
for col = 1:size(F, 2) - 1

   %// Count number of different classes for each value
   [vals, k, idx] = unique(F(:, col));
   count = arrayfun(@(x)length(unique(F(F(:, col) == x, end))), vals);

   %// Remove values associated to more than one class
   F(count(idx) > 1, :) = [];
end 
```

这导致：

```
F =
    28    31    19     1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T18:13:16.393

另一个问题，没有`arrayfun`（编辑）

```
F = [24 3 17 1; 28 31 19 1; 24 13 25 2; 47 43 39 1; 56 41 39 2]; 
```

分开两个类：

```
A1 = F(F(:,4)==1,1:3);
A2 = F(F(:,4)==2,1:3); 
```

将它们复制到 3D 矩阵以比较 class1 的每一行与 class2 的每一行：

```
B2 = repmat(shiftdim(A2',-1),size(A1,1),1);
B1 = repmat(A1,[1,1,size(A2,1)]);
D4 = squeeze(sum(B1 == B2,2)); 
```

删除行重复的行

```
A1(logical(sum(D4,2)),:) = [];
A2(logical(sum(D4,1)),:) = []; 
```

重构原始矩阵

```
R = [A1 ones(size(A1,1),1);A2 2*ones(size(A2,1),1)]; 
```

# java - 恢复 MySQL 备份

> ID：15408415
> 
> 赞同：0
> 
> 时间：2013-03-14T11:48:49.243
> 
> 标签：java, mysql, swing

我编写了以下代码来恢复 MySQL 备份，

```
 public boolean restoreDB(String dbUserName, String dbPassword) {
        try {

            NewClassx n = new NewClassx();
            n.myf(2);
            String source = jTextField1.getText();
            Process runtimeProcess;
            Connection con = CPool.getConnection();
            Statement stmt = con.createStatement();
            ResultSet res = null;
            res = stmt.executeQuery("select @@datadir");
            String Mysqlpath = "";

            while (res.next()) {
                Mysqlpath = res.getString(1);
            }

            Mysqlpath = Mysqlpath.replace("data", "bin");
            CPool.closeConnection(con);
            CPool.closeStatement(stmt);
            CPool.closeResultSet(res);
            //    String[] executeCmd = new String[]{Mysqlpath + "\\mysql", "--user=" + dbUserName, " -e", "source " + "\"" + source + "\""};
          //  String executeCmd = Mysqlpath + "\\mysql - u "+ dbUserName +" -e "+ "\"" + source + "\"";
            //mysql - u admin -p admin accounts <
             String[] executeCmd = new String[]{Mysqlpath + "\\mysql", " project_db ", " --user=" + dbUserName, " -e", " source "+ " \"" + source + "\""};
          //  System.out.println(executeCmd);

            runtimeProcess = Runtime.getRuntime().exec(executeCmd);
            int processComplete = runtimeProcess.waitFor();

            if (processComplete == 0) {
                JOptionPane.showInternalMessageDialog(this, "Backup restored successfully");
                return true;
            } else {
                JOptionPane.showInternalMessageDialog(this, "Backup was not restored");
            }
        } catch (Exception ex) {
            ex.printStackTrace();
        }

        return false;
    } 
```

在调用上述函数时，我的应用程序冻结而不恢复任何备份。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-29T15:13:30.387

您没有在字符串中写入密码 在用户名后添加“-p 密码”

# arrays - 如何处理 Firebase 中的空数组？

> ID：15408416
> 
> 赞同：18
> 
> 时间：2013-03-14T11:48:50.743
> 
> 标签：arrays, firebase

说`person`可以有多个`cars`，也`car`可以有多个`accidents`。所以我们可以有：

```
# Person with no cars
person:
  name: "Misha"
  cars: []

# Person with free-accident car
person:
  name "Arlen"
  cars:
    0:
      name: "Toyota"
      accidents: [] 
```

Firebase 将这些人存储为：

```
person:
  name: "Misha" 
```

和

```
person:
  name "Arlen"
  cars:
    0:
      name: "Toyota" 
```

因此，在 JavaScript 中，我必须执行以下操作来恢复空数组：（CoffeeScript）

```
if person.cars?
  for car in person.cars
    car.accidents = [] unless car.accidents?
else
  person.cars = [] 
```

有没有更好的方法来处理 Firebase 中的空数组，而无需编写这些不必要的 JavaScript 代码？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-14T16:12:47.963

我认为，如果我理解核心问题，简短的回答是没有办法将一个空数组强制进入 Firebase。但是，有些范例可能比您上面的范例更有效。

请记住，Firebase 是一个实时环境。汽车和事故的数量可以（并且将会）随时变化。最好将一切都视为实时到达的新数据，甚至避免考虑存在或不存在。

```
// fetch all the people in real-time
rootRef.child('people').on('child_added', function(personSnapshot) {

   // monitor their cars
   personSnapshot.ref().child('cars', 'child_added', function(carSnapshot) {

       // monitor accidents
       carSnapshot.ref().child('accidents', 'child_added', function(accidentSnapshot) {
           // here is where you invoke your code related to accidents
       });
   });
}); 
```

请注意如何不需要`if exists/unless`类型逻辑。请注意，您可能还想监视`child_removed`并调用以停止听特定的孩子。`cars``people``ref.off()`

如果出于某种原因您想坚持使用静态模型，那么[forEach](https://www.firebase.com/docs/javascript/datasnapshot/foreach.html)将成为您的朋友：

```
// fetch all the people as one object, asynchronously
// this won't work well with many thousands of records
rootRef.child('people').once('value', function(everyoneSnap) {

   // get each user (this is synchronous!)
   everyoneSnap.forEach(function(personSnap) {

        // get all cars (this is asynchronous)
        personSnap.ref().child('cars').once('value', function(allCars) {

           // iterate cars (this is synchronous)
           allCars.forEach(function(carSnap) { /* and so on */ });

        });

   });   
}); 
```

请注意，即使使用 forEach，也不需要“存在或除非”这种逻辑。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-20T02:43:00.873

我一般用DataSnapshot函数numChildren()看是不是空的不是，像这样

```
var fire = new Firebase("https://example.firebaseio.com/");
fire.once('value', function(data){if (data.numChildren() > 0){ /*Do something*/ }); 
```

# file-io - 如何在不覆盖文件现有内容的情况下将输出写入文本文件？

> ID：15408418
> 
> 赞同：1
> 
> 时间：2013-03-14T11:48:55.513
> 
> 标签：file-io, erlang

我开发了这个将数据从文件传输`erlang`到`.txt`文件的函数：

```
exporttxt()->

F1 ="1",
F2 = "afif",
F3 = "kaled",

file:write_file("test.txt",[io_lib:format("~p\t~p\t~p~n",[F1,F2,F3])] ). 
```

运行此函数后`test.txt`包含这些值：

`"1" "afif" "kaled"`

但是当我改变`F1`,`F2`并`F3`在函数`exporttxt()`中：

```
F1 ="2"
F2 ="ahmed"
F3 = "alagi" 
```

然后`test.txt`只包含这些值：

`"2" "ahmed" "alagi"`

我想`test.txt`包含：

```
"1"  "afif"  "kaled"
"2"  "ahmed" "alagi" 
```

问题在于，在每次执行该函数时，它都会记录新数据，而其中的旧数据会`test.txt`被删除。

如何在`test.txt`不覆盖现有数据的情况下写入新数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T12:48:45.253

在这一点上使用[file:write_file/3 ：](http://erldocs.com/R14B02/kernel/file.html?i=2&search=file%3awri#write_file/3)

第三个论点是`Modes`。读取可能的模式列表`| write | append | exclusive | raw | binary | {delayed_write, Size, Delay} | delayed_write | {read_ahead, Size} | read_ahead | compressed | {encoding, Encoding}`。`append`模式适合您的需求。

# boonex-dolphin - 我们如何在 boonex 中定义角色

> ID：15408423
> 
> 赞同：0
> 
> 时间：2013-03-14T11:49:01.670
> 
> 标签：boonex-dolphin

我想在 boonex 中再创建 2 个角色（管理员和普通用户），并希望根据角色管理网站的隐私设置和可访问性。

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-23T20:47:43.927

转到管理面板>工具>会员设置>在那里您可以创建新的会员级别，为每个级别设置隐私。您需要检查页面访问模块以确保他们可以访问导航菜单中的每个页面。此外，如果您卸载模块进行更新，您将需要检查重新创建的成员资格的成员资格设置。如果您想分配管理员职责，请下载 Boonex 市场免费的 deanos Tool。如果您要分配将在该组页面上完成的版主职责，请在操作块中管理粉丝

# javascript - ActionView::Template::Error（“javascript 文件”未预编译）

> ID：15408424
> 
> 赞同：2
> 
> 时间：2013-03-14T11:49:03.730
> 
> 标签：javascript, jquery, activeadmin, web-deployment, jplayer

```
 Started GET "/admin/login" for 81.21.138.77 at 2013-03-13 16:30:57 +0100
Processing by ActiveAdmin::Devise::SessionsController#new as HTML
  Rendered /u/apps/arbinet/shared/bundle/ruby/1.9.1/gems/activeadmin-0.5.0/app/views/active_admin/devise/shared/_links.erb (1.5ms)
  Rendered /u/apps/arbinet/shared/bundle/ruby/1.9.1/gems/activeadmin-0.5.0/app/views/active_admin/devise/sessions/new.html.erb within layouts/active_admin_logged_out (142.3ms)
Completed 500 Internal Server Error in 150ms

ActionView::Template::Error (jquery.jplayer.min.js isn't precompiled):
    9:     <%= stylesheet_link_tag style.path, style.options %>
    10:   <% end %>
    11:   <% ActiveAdmin.application.javascripts.each do |path| %>
    12:     <%= javascript_include_tag path %>
    13:   <% end %>
    14: 
    15:   <%= csrf_meta_tag %>
  actionpack (3.2.8) lib/sprockets/helpers/rails_helper.rb:142:in `digest_for'
  actionpack (3.2.8) lib/sprockets/helpers/rails_helper.rb:150:in `rewrite_asset_path'
  actionpack (3.2.8) lib/action_view/asset_paths.rb:27:in `compute_public_path'
  actionpack (3.2.8) lib/sprockets/helpers/rails_helper.rb:56:in `asset_path'
  actionpack (3.2.8) lib/sprockets/helpers/rails_helper.rb:32:in `block in javascript_include_tag'
  actionpack (3.2.8) lib/sprockets/helpers/rails_helper.rb:26:in `collect'
  actionpack (3.2.8) lib/sprockets/helpers/rails_helper.rb:26:in `javascript_include_tag'
  activeadmin (0.5.0) app/views/layouts/active_admin_logged_out.html.erb:12:in `block in __u_apps_arbinet_shared_bundle_ruby_______gems_activeadmin_______app_views_layouts_active_admin_logged_out_html_erb__2231755831832575965_32663520'
  activeadmin (0.5.0) app/views/layouts/active_admin_logged_out.html.erb:11:in `each'
  activeadmin (0.5.0) app/views/layouts/active_admin_logged_out.html.erb:11:in `__u_apps_arbinet_shared_bundle_ruby_______gems_activeadmin_______app_views_layouts_active_admin_logged_out_html_erb__2231755831832575965_32663520'
  actionpack (3.2.8) lib/action_view/template.rb:145:in `block in render'
  activesupport (3.2.8) lib/active_support/notifications.rb:125:in `instrument'
  actionpack (3.2.8) lib/action_view/template.rb:143:in `render'
  actionpack (3.2.8) lib/action_view/renderer/template_renderer.rb:59:in `render_with_layout'
  actionpack (3.2.8) lib/action_view/renderer/template_renderer.rb:45:in `render_template'
  actionpack (3.2.8) lib/action_view/renderer/template_renderer.rb:18:in `render'
  actionpack (3.2.8) lib/action_view/renderer/renderer.rb:36:in `render_template'
  actionpack (3.2.8) lib/action_view/renderer/renderer.rb:17:in `render' 
```

当我部署项目时，我得到了这个：

```
 ** [out :: web.arbinet.eu] rake aborted!
 ** [out :: web.arbinet.eu] couldn't find file 'swfobject' 
```

我已经尝试过了：

```
config.assets.compile = true 
```

这：`config.assets.precompile += %w(jquery.jplayer.min.js)` 两者都在生产中

我也是从终端制作的：`bundle exec rake assets:precompile`

没有成功:(！

这是我的 application.js

```
//= require jquery
//= require jquery_ujs
//= require_tree .
//= require jquery-ui
//= require swfobject
//=require jquery-ui.min 
```

和 application.css

```
 *= require_self
 *= require_tree . 
```

任何的想法？我需要帮助！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-24T12:34:32.477

包括`jquery.jplayer.min`在`application.js`via `//= require jquery.jplayer.min`。我认为没有必要预编译文件。

# ember.js - 在调试器中访问内容属性

> ID：15408426
> 
> 赞同：0
> 
> 时间：2013-03-14T11:49:17.337
> 
> 标签：ember.js

如何在 chrome 调试器中访问控制器的内容属性。我真的试图找到一种方法来调试我的应用程序。到目前为止，我找不到这样做的方法。

谢谢

亚历克斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T14:59:01.603

添加语句

```
debugger; 
```

在您要调试的方法中，

1.  打开谷歌浏览器，CTRL+SHIFT+i
2.  点击您的应用程序的 URL，导航到您认为代码将运行的状态

`debugger;`如图所示，谷歌浏览器会自动在语句处停止并将您的注意力集中在**源/脚本**选项卡上

![在此处输入图像描述](../Images/af742acf1993f16704a40d035261f366.png)

在 Watch 表达式选项卡中单击“+”也可以评估您的情况下的代码

```
this.get("content"); 
```

只要您有此断点，您就可以切换到控制台面板并在该上下文中执行代码，完成后您可以通过单击 CTRL+SHIFT+I 或那里的关闭按钮关闭面板，您可以添加断点手动点击行号，希望这会有所帮助

欲了解更多[信息](https://developers.google.com/chrome-developer-tools/docs/scripts)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T14:58:23.693

我正在使用尚未准备好但肯定可用的[Ember 扩展。](https://github.com/tildeio/ember-extension.git)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T15:00:34.347

有2种可能

1.  **使用适用于 Chrome 的 Ember Inspector Tool：**它尚未正式发布，但据我所知，它似乎可用。我还没有时间自己尝试，但是这里有[一篇文章](http://cgcardona.github.com/2013/02/15/playing-around-with-the-ember-inspector/)告诉你如何安装和使用它。

2.  **在浏览器的控制台中访问您的控制器。**然后根据需要检查它。这是访问您的控制器的代码。我自己在我的应用程序中使用它进行调试：

* * *

```
// i assume that your Ember.Application is stored in the global var App
var App = Ember.Application.create({
    getController : function(name){
        return this.__container__.lookup("controller:" + name);
    }
});
// now you can use it like this. To get the users controller (App.UsersController) just use this in the console:
App.getController("users") 
```

# php - 保护我的 MySQL 查询

> ID：15408427
> 
> 赞同：0
> 
> 时间：2013-03-14T11:49:17.683
> 
> 标签：php, mysql

我对 PHP 很陌生，并且被告知我的 MySQL 语句对于注入是不安全的。

有我的旧查询：

```
$addbook = "INSERT INTO bookings (bookID, startDate, startTime, endDate, endTime) ";
$addtempres .= "VALUES ('".$bookid."', '".$startdate."', '".$starttime."', '".$enddate."', '".$endtime."')";
$insertBook = mysql_query($addbook);

$getblogposts = mysql_query("SELECT * FROM blogposts WHERE deleted = 'no' ORDER BY postID DESC LIMIT 4"); 
```

阅读后我知道它们是不安全的，我也知道 mysql_query 是旧的，并且正在贬值。

然而，我已经写了很多这样的查询，并且意识到它们都是旧的和不安全的是令人生畏的，所以我开始尝试保护它们。

所以我这样做了：

```
$escapedbookid = mysql_real_escape_string($bookid) ;
$escapedstartdate = mysql_real_escape_string($sqlcoldate);
$escapedstarttime = mysql_real_escape_string($forstarttime);
$escapedenddate = mysql_real_escape_string($sqlretdate);
$escapedendtime = mysql_real_escape_string($forendtime);
$escapedactive = mysql_real_escape_string('false');

$addtembook = "INSERT INTO bookings (bookID, startDate, startTime, endDate, endTime) ";
$addtempres .= "VALUES ('".$escapedbookid."', '".$escapedstartdate."', '".$escapedstarttime."', '".$escapedenddate."', '".$escapedendtime."')";
$insertRes = mysql_query($addtempbook); 
```

这更安全吗？当我学习将当前查询转换为 PDO 准备语句时，我很欣赏 PDO 准备语句更容易、更安全，但我只是想知道我所做的是否是让事情更安全？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:52:30.197

1.  停止使用 mysql_ 库 - 它已被弃用 - 改用 mysqli_ 库（或 PDO）。
2.  查看准备好的语句的网页 - [http://www.php.net/manual/en/mysqli.prepare.php](http://www.php.net/manual/en/mysqli.prepare.php) - 该示例将为您提供有关如何编写代码免受 SQL 注入影响的模板。

# android - Android 2.3.3 希伯来语自动完成中的搜索不起作用

> ID：15408430
> 
> 赞同：0
> 
> 时间：2013-03-14T11:49:35.220
> 
> 标签：android, autocompletetextview, hebrew

嘿伙计们，我一直在网上搜索这个问题的解决方案，但没有找到任何解决方案（我希望那里有一个）

我的问题：

我设置了一个 AutoCompleteTextView 并将其绑定到一个带有希伯来语数据的数组

当我运行该应用程序并用希伯来语点击一个字母时，什么都没有显示，只有当我按下“c”字母时，它才会显示我的数据（希伯来语）。

请问，有什么帮助吗？

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:16:37.367

不需要 RTL 格式，只需覆盖 PerformFiltering 方法。

# java - 用于从 Java 中的 SugarCrm 检索关系数据的 Soap Webervices Api

> ID：15408433
> 
> 赞同：0
> 
> 时间：2013-03-14T11:49:46.013
> 
> 标签：java, php, soap, sugarcrm

我在 sugarcrm（版本 6.5.3）中有两个模块：

1.  附属公司
2.  地址。

Affiliate 有一个通过一对一关系映射的地址。Java客户端中是否有一个soap api方法，我可以通过它检索附属数据及其映射地址。如果不是我怎么写一个。

或者有什么方法可以从包含两个模块的 id 的关系表中获取数据。

有没有我可以检索关系数据的api。如果可能的话，请给我任何处理像我这样的情况的例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T08:11:51.763

There is the API Method get_relationships() does this solve you problem or did I misunderstood it

# django - URL 上的错误 NoReverseMatch

> ID：15408434
> 
> 赞同：0
> 
> 时间：2013-03-14T11:49:46.697
> 
> 标签：django

有人可以解释这个错误的含义以及如何解决吗？

这是错误消息：

* ***NoReverseMatch 位于 /contacts/group/new/ 为 ''group_list'' 反向匹配，未找到参数 '()' 和关键字参数 '{}'。****

**urls.py**

```
urlpatterns = patterns('',

             url(r'^$', 'contacts.views.home', name="group_list"),

             (r'^group/new/$', 'contacts.views.group', {}, 'group_new'),
             (r'^group/edit/(?P<id>\d+)/$', 'contacts.views.group', {}, 'group_edit'),

) 
```

**模板.py**

```
 <li>
   <a href="{% url 'group_list' %}">
      <i class="icon-group"></i>
       <span>Contacts</span>
</a>
</li> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T11:56:07.063

`prefix`您可以通过利用以下参数来清理您的模式：

```
urlpatterns = patterns('contacts.views',
    url(r'^group/edit/(?P<id>\d+)/$', 'group', name='group_edit'),
    url(r'^group/new/$', 'group', name='group_new'),
    url(r'^$', 'home', name="group_list"),
) 
```

当您使用 url 模板标签时，只需提供模式的名称，而不是将字符串文字交给函数：

```
{% url group_list %} 
```

由于模式是按顺序匹配的，因此我建议将最具体的模式放在首位，否则您可能会遇到一些意外行为。

# php - 如何使用 AJAX 和 JSON 发送和接收

> ID：15408437
> 
> 赞同：0
> 
> 时间：2013-03-14T11:49:54.270
> 
> 标签：php, javascript, jquery, ajax, json

我正在尝试设置一个简单的 AJAX 调用，通过 JSON 将其数据发送到我的 PHP 脚本，然后返回数据。

但我没有运气。

这是我的发送代码：

```
$.ajax({
      url: ROOT+'Address/fetchAddress',
      type: 'POST',
      async: false,
      dataType: 'json',
      data: {
        json: {
          "Id":"0",
          "Name":"Jim"
        }
      },
      error: function(a, b)
      {
        alert(b)
      },
      success: function(data)
      {
        data = $.parseJSON(data);
        alert(data)
      }
    }) 
```

服务器端：

```
public function fetchAddress()
  {
    $JSON = $_POST['json'];
    echo json_decode($JSON);
  } 
```

但是我在警报框中收到“parseerror”，如果我检查我得到的响应：

```
Warning: json_decode() expects parameter 1 to be string, array given in ...public_html\controllers\Address.php on line 20 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T11:52:17.213

这里有一个概念错误。

当您说`dataType: 'json'`这意味着返回的数据是 JSON 格式时。

您仍在 POST 数组中发送数据

```
public function fetchAddress(){
    echo $_POST['json'];
} 
```

获取数据

要在另一边拿起你有一个预先传递的对象（因为数据以 JSON 形式返回）

所以

```
success: function(data)
  {

    alert(data.id+"NAME"+data.name);
  } 
```

（哦，您的数据不是字符串（帖子所期望的），JSON 将其清理成一个不错的字符串

```
json: '{"Id":"0","Name":"Jim"}' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T11:52:16.920

您的 PHP 接收到的数据不需要解码，因为它已经是一个数组。只需将您的功能更改为此，您应该没问题

```
public function fetchAddress()
{
  echo json_encode($_POST['json']);
} 
```

此外，由于您已经说过 jQuery，您的响应是 json，因此无需调用 $.parseJSON() 来获取您获取的数据

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T12:04:19.680

该[`ajax`](http://api.jquery.com/jQuery.ajax/)调用将数据作为数组发送，并期望返回的数据为 JSON，因此 PHP 函数应如下所示

```
public function fetchAddress()
{
    $data = $_POST['json'];
    echo json_encode($data);
} 
```

并且客户端不需要解码返回的数据，因为它指定`dataType: 'json'`然后这已经由`ajax`函数完成

```
$.ajax({
      url: ROOT+'Address/fetchAddress',
      type: 'POST',
      async: false,
      dataType: 'json',
      ...
      success: function(data)
      {
        alert(data)
      }
    }); 
```

# java - 当我从套接字接收到一些数据时，为什么会附加很多空格？

> ID：15408444
> 
> 赞同：0
> 
> 时间：2013-03-14T11:50:13.653
> 
> 标签：java, sockets, serversocket

嗨，我正在编写一个简单的 java 程序来从套接字读取数据，但遇到了一个问题，每次输入后我都会出现很多空格。

目的：编写一个简单的服务器套接字，它可以从客户端套接字读取正确的数据。

到目前为止：我已经能够编写从套接字读取的代码，甚至能够读取数据，但问题是我最后得到了很多空格。

所以我不得不使用trim()，最后来管理空间，但我仍然不知道这是对还是错。

将不胜感激这方面的投入。

注意：我正在使用 windows7 telnet 服务连接到套接字。

```
readSocket() {
    System.out.println(client_socket);
    try {
        System.out.println("reading socket");
        /*BufferedReader brIn = new BufferedReader(new InputStreamReader(client_socket.getInputStream()));
        String inputLine = null;
        while ((inputLine = brIn.readLine()) != null) {
            System.out.println(inputLine);
        }*/
        InputStream is = client_socket.getInputStream();
        byte[] byteArr = new byte[1024];
        int inputsize = -1;
        int currentPos = 0;
        StringBuffer sb = new StringBuffer(11111);
        /*while((inputsize = is.read(byteArr)) != -1) {
            String processed = new String(byteArr);
            sb.append(processed);
        }*/
        int BUFFER_SIZE = 1024;
        int read;
        byte[] buffer = new byte[BUFFER_SIZE];
        String processed = "";
        while ((read = is.read(byteArr, 0, BUFFER_SIZE)) != -1) {
            String current = new String(byteArr);
            //os.write(buffer, 0, read);
            System.out.println("current Process   "+current);

            //processed +=current;
            sb.append(current.toString().trim());
        }
        System.out.println("Socket input is : "+sb.toString());
        System.out.println("Sending response to client  "+processed.toString());
        //client_socket.getOutputStream().write(sb.toString().getBytes());
        //client_socket.getOutputStream().close();

        FileOutputStream fos = new FileOutputStream(new File("C:\\Users\\himanshu2100\\eee.txt"));
        fos.write(processed.getBytes());
        fos.close();
        is.close();
        client_socket.close();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

很好地使用了 Roger Lindsjö 和 mprivat 的建议，我重新设计了我从流中读取的部分。

```
readSocket() {
    System.out.println(client_socket);
    try {
        System.out.println("reading socket");
        InputStream is = client_socket.getInputStream();
        byte[] byteArr = new byte[1024];

        int read;
        int BUFFER_SIZE = 1024;

        ByteArrayOutputStream baos = new ByteArrayOutputStream();

        while ((read = is.read(byteArr, 0, BUFFER_SIZE)) != -1) {
            baos.write(byteArr, 0, read);   //This is an optimized design, instead of having so many strings
        }
        System.out.println("Output is :"+new String(baos.toByteArray()));
        baos.close();
        is.close();
        client_socket.close();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

我希望这是一个更好的解决方案，所以发布它。欢迎提出建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T11:58:56.240

在这条线上：`while ((read = is.read(byteArr, 0, BUFFER_SIZE)) != -1) {`

`read`将包含实际读取的字节数，因此如果您的服务器正在发送字符串“CORRECT”但您的`BUFFER_SIZE`是 1024，您将有很多额外的空间，所以您不能这样做：`String current = new String(byteArr);`. 相反，您必须只使用从流中读取的字节：

```
String current = new String(byteArr, 0, read); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T11:59:25.903

当您读入一个数组时，整个数组可能不会被填充。*read*变量将包含实际读取的字节数。

```
 while ((read = is.read(byteArr, 0, BUFFER_SIZE)) != -1) {
        String current = new String(byteArr, 0, read);
        System.out.println("current Process   "+current);
        sb.append(current);
    } 
```

如果您使用多字节的编码，上述可能不起作用，因为字符的每个部分都可能在单独的读取中，这会创建无效序列。

# architecture - 把一个软件分成多个模块，每个模块都有自己的数据库更好吗？

> ID：15408446
> 
> 赞同：2
> 
> 时间：2013-03-14T11:50:28.430
> 
> 标签：architecture, data-access-layer, bll

我正在开发一个主要在 asp.net 中以 Oracle 11g 作为后端开发的医疗保健应用程序。在其当前状态下，应用程序分为 3 层，即 UI、BLL 和 DAL。由于 BLL 和 DAL 是类库项目，它们被部署为单个 dll（一个 dll 用于 BLL，另一个用于 DAL）。最近，另一位开发人员对该软件进行了审查，他提出将整个软件划分为单独的模块的建议，每个模块都有自己的项目和数据库，即库存模块作为 InventoryUI（asp.net Web 应用程序项目、InventoryBLL（类库项目）和 InventoryDAL（类库项目）。所有模块都获得三个不同的项目，这些项目具有单独的数据库，通过 Web 服务相互通信。

所以我的问题是

1.  这个建议的架构比我们现有的更好吗？
2.  为 BLL 和 DAL 提供多个 dll 是否更好。优缺点都有什么。
3.  为单个应用程序拥有多个数据库会更好吗？如何？

任何链接，建议都非常受欢迎。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T12:00:27.443

物理分离模块的优点是它允许在不同团队之间逻辑分解工作。在您的情况下，您可能有一个库存团队负责所有与库存相关的事情，他们发布一个 API，并且对于所有其他团队，库存模块的基础是一个黑匣子。这是解决您的域中的复杂性的一个优势。

缺点是如果您的项目很小，您可能会在软件开发和部署过程中引入更多的复杂性，特别是如果您执行诸如跨越流程（或机器）障碍之类的事情。

1.  根据项目的需要，特别是在规模方面，建议的架构可能会更好。一些妥协也可能是一种更好的方法——如果你发现你可能有几十个或一百个模块将相似的模块组合在一起是一种实用的方法。

2.  用于业务逻辑和数据访问的多个 DLL 是可以的，只要有一个共同的祖先提供基类以供使用。每个 DAL 在连接字符串方面都有自己的配置是一个非常糟糕的地方。同样，如果一个 DAL 使用映射器模式，另一个使用活动记录 - 虽然两种模式可以共存 - 这些模式应该在基类中提供。

3.  假设您的 RDBMS 支持多个模式，我将首先使用多个模式，然后再访问多个数据库。当数据库的性质发生变化时，我会访问多个数据库 - 高事务量与高读取量（分析）。如果您有需要跨模块的事务，并且您已经将管理这些事务的数据库物理分离，则可能会变得不必要地复杂。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T12:11:47.190

我倾向于做的是首先定义子域，并确保它们根据功能在逻辑上划分；不要太大，不要太小。然后，每个子域将成为一个独立的软件，由服务层、应用程序层、域层和基础设施层组成（正如我[在此处](http://ludwigstuyck.wordpress.com/2013/03/05/a-reference-architecture-part-1/)描述的那样）。

这也意味着他们每个人都有自己的存储库，**但不一定是单独的数据库**。事实上，我主要想保留一个数据库，但使用不同的模式来标识表所属的域。这样，您可以保持表之间的约束（跨模式）并保证数据的一致性。

所以我认为在逻辑模块中构造你的代码是有意义的（事实上你应该这样做），但如果不是真的需要，我**不会**对数据库这样做，因为这会使你的生活在维护和可靠性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T11:56:39.583

这完全取决于您的业务需求。

听起来审稿人指的是 SOA 的方向。分离成独立的物理模块可以提供一定的安全性，因为系统的某些部分可能会发生故障而不会导致一切崩溃。

但是，分离应用程序也给产品带来了复杂性（特别是在为了提交单个业务事务，您必须与多个模块进行通信的场景中）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-14T11:56:42.887

在从事过一个项目（根据客户要求）通过包含另一个应用程序来继承第二个数据库时，我不会提倡这种路线。它使代码库变得混乱，您通常最终需要在数据库之间复制数据，或者需要您的业务逻辑访问两个数据库（直接或通过一些其他机制，例如 Web 服务调用）。在有问题的情况下，这是有必要的，因为一个数据库是 Oracle，另一个是 SQL Server，因此合并这两个数据存储会非常令人头疼，但这不是我会轻易选择的路线。

建议将项目拆分为具有独立数据库的多个项目的审稿人提出了哪些论点？即使您想将业务逻辑按功能区域拆分为单独的 DLL，为什么需要不同的数据库和 DAL？这似乎是为了复杂性而引入复杂性，除非您的代码库确实庞大，或者存储的数据量导致单个数据库中的性能问题，可以通过将数据拆分为单独的数据库来缓解这些问题。鉴于此更改可能涉及的工作量，似乎这个人有责任证明您为什么*应该*这样做！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-14T11:58:38.010

这一切都取决于您的要求。

> 如果您将来需要移动到单独的物理层，这可以派上用场（您可以在不同的机器上运行每个项目，从而分离每个模块）。但是，这将导致整体应用程序性能下降。这将产生的好处是其他项目可以独立访问这些单独的项目/层。

我非常怀疑分离数据库是否会带来任何好处。您是否打算将来将每个数据库移动到不同的盒子中？如果不是，那么我会说坚持使用具有不同模式的单个数据库。

# python - 为什么我的椭圆没有出现？

> ID：15408447
> 
> 赞同：0
> 
> 时间：2013-03-14T11:50:32.193
> 
> 标签：python, matplotlib

我正在尝试在 matplotlib 中绘制一个椭圆，但是当我执行此代码时：

```
from matplotlib.pyplot import *
from matplotlib.patches import Ellipse

fig = Figure()
ax = fig.add_subplot(111)
ax.add_artist(Ellipse(xy=(1, 1), width=2, height=2, facecolor='g', edgecolor='k', alpha=.1))
show() 
```

什么都没有发生。我没有得到任何数字，更不用说椭圆了。

是什么赋予了？

首先十分感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T11:53:21.507

`figure`必须小写。您想[创建一个图形](http://matplotlib.org/1.2.0/api/pyplot_api.html#matplotlib.pyplot.figure)并显示它。如果使用大写拼写，则实例化[`Figure`类](http://matplotlib.org/1.2.0/api/figure_api.html#matplotlib.figure.Figure)。

```
from matplotlib import pyplot as plt
from matplotlib.patches import Ellipse

fig = plt.figure()
ax = fig.add_subplot(111)
ax.add_artist(Ellipse(xy=(1, 1), width=2, height=2, facecolor='g', edgecolor='k', alpha=.1))
plt.show() 
```

# windows - 向量异常处理程序中的 longjmp

> ID：15408451
> 
> 赞同：0
> 
> 时间：2013-03-14T11:50:40.990
> 
> 标签：windows, exception-handling, 64-bit, setjmp

64 位 Windows 程序中的某些类型的事件，例如被零除、空指针引用、堆栈溢出（如果您使用保护页检测到），通常会使用结构化或向量异常来处理（在发现有必要处理它们的程序中） .

在 JIT 编译器的上下文中，结构化异常有点尴尬，因为需要提供展开信息并符合所有函数的展开协议，这可能无法与移动代码块的复制垃圾收集器很好地交互，这表明使用向量异常。

虽然通常期望向量化异常处理程序返回，但将它们用于此目的将涉及使用 longjmp 或一些等效的代码退出处理程序，这些代码会重置堆栈指针而不进行任何展开。

这是合法的，还是我忽略了一些绊脚石？

Unix 中的等价物似乎是合法的，因为它的价值：[Longjmp out of signal handler？](https://stackoverflow.com/questions/7334595/longjmp-out-of-signal-handler)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T22:54:27.813

好吧，它*似乎*在我运行的测试中运行良好。

```
#include <setjmp.h>
#include <stdio.h>
#include <windows.h>

jmp_buf jmp;

LONG CALLBACK eh(PEXCEPTION_POINTERS e) {
    longjmp(jmp, 1);
}

void main() {
    AddVectoredExceptionHandler(1, eh);
    for (int i = 0; i != 10; ++i)
        if (!setjmp(jmp))
            *(char*)0 = 0;
        else
            puts("ok");
    getchar();
} 
```

# sql-server - 如何从最近的还原中将数据库还原为上次修改的状态？

> ID：15408459
> 
> 赞同：0
> 
> 时间：2013-03-14T11:50:57.357
> 
> 标签：sql-server

我和我的 Fried 在不同的系统中开发一个项目，但创建了同名的数据库，今天我不小心在我朋友的机器上恢复了我的数据库。有什么方法可以回滚 SQL-Server 中的数据库，这意味着我想获取我之前恢复的数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:00:42.773

**不。**

这其实是一个很好的事件，以此为契机，停止修改和复制数据库*文件*。作为开发人员，您的可交付成果是源代码，包括用于部署和升级数据库的数据库**脚本的源代码。**查看[迁移](http://guides.rubyonrails.org/migrations.html)以获取优雅的方法。使用[Visual Studio 数据库项目](http://msdn.microsoft.com/en-us/library/ff678491%28v=vs.100%29.aspx)。或者[自己滚](http://rusanu.com/2009/05/15/version-control-and-your-database/)。永远不要从对象浏览器中触摸数据库。

顺便说一句，RESTORE 命令阻止了从覆盖不同的数据库中恢复数据库。您必须明确覆盖了阻塞。

# android - 如何使用edittexts在自定义ListView中实现监听器文本更改？

> ID：15408464
> 
> 赞同：0
> 
> 时间：2013-03-14T11:51:03.127
> 
> 标签：android, android-listview, listener, android-edittext, textchanged

我试图在 ListView 中保存 Edittext 的值并且它可以工作，但是当 ListView 太大时，当我编辑 1 个 edittext 时，如果我滚动 listview，另一个 EditText 正在同时编辑......我没有不知道该怎么办，我浪费了 6 个小时，却一无所获。如果有人可以帮助我，请。

这是自定义Listview的getView的代码

```
@Override
    public View getView(int position, View convertView, ViewGroup parent) {
        final int position2 = position;
        View v = convertView;
        final ViewHolder holder;

        if(v == null) {
            LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.lista_item_prepedido, null);

            holder = new ViewHolder();

            holder.codi = (TextView) v.findViewById(R.id.NomProducte);
            holder.nom = (EditText) v.findViewById(R.id.Preu);
            holder.eliminar = (ImageButton) v.findViewById(R.id.delete);
            View eliminarPrepedido = (ImageButton) v.findViewById(R.id.delete);

            if(blocClients.equals("0"))
            {
                eliminarPrepedido.setVisibility(View.GONE);
                holder.nom.setFocusable(false);
            }

            v.setTag(holder);

            holder.nom.setText(items.get(position).getNom());
            holder.nom.addTextChangedListener(new TextWatcher(){

                @Override
                public void afterTextChanged(Editable s) {

                }

                @Override
                public void beforeTextChanged(CharSequence s, int start,
                        int count, int after) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void onTextChanged(CharSequence s, int start,
                        int before, int count) {

                    items.get(position2).Nom = s.toString();

                    String preu = items.get(position2).Nom;
                    String nomproducte = items.get(position2).Codic;
                    int position = position2;

                    //mostrarMensaje("Valor: "+preu+"  Nom Producte: "+nomproducte+"  CodiClient: " +CodicClient+ " posicio: "+position);
                    baseDatos = openOrCreateDatabase(nombreBD, MODE_WORLD_WRITEABLE, null);

                    String sqlStr = "UPDATE estadistiques SET ultimpreu = '" +preu+"' WHERE codic_client='"+CodicClient+"' AND desc_article = '"+nomproducte+"' ";
                    baseDatos.execSQL(sqlStr);

                    try {
                        fnGlobal.CreaSincroFitxer(sqlStr);
                    } catch (FileNotFoundException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }

                    baseDatos.close();
                }

            });

        } else {
            holder = (ViewHolder) v.getTag();

        }

        holder.codi.setText(items.get(position).getCodic());

        holder.eliminar.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {

                final int position = position2;
                String CodicClient = null;
                Bundle extras = getIntent().getExtras();
                CodicClient = extras.getString("codiClientTab");
                String nomproducte = items.get(position).Codic;
                int Opcio = 1;

                baseDatos = openOrCreateDatabase(nombreBD, MODE_WORLD_WRITEABLE, null);
                String sqlStr = "DELETE FROM estadistiques WHERE codic_client ='"+CodicClient+"' AND desc_article ='"+nomproducte+"'" ;
                baseDatos.execSQL(sqlStr);

                try {
                    fnGlobal.CreaSincroFitxer(sqlStr);
                } catch (FileNotFoundException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                baseDatos.close();

                notifyDataSetChanged();

                onResume();

            }

        });

        return v;
    }
} 
```

列表视图的自定义 XML 项

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/item"
    android:layout_width="fill_parent"
    android:layout_height="?android:attr/listPreferredItemHeight"
    android:background="@drawable/rounded_rectangle"
    android:orientation="horizontal"
    android:padding="6dip" >

    <ImageButton
        android:id="@+id/delete"
        android:layout_width="30dp"
        android:layout_height="30dp"
        android:layout_marginRight="6dp"
        android:layout_marginTop="15dp"
        android:background="@drawable/delete" />

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <EditText
            android:id="@+id/Preu"
            android:layout_width="100dp"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/NomProducte"
            android:layout_alignParentRight="true"
            android:layout_centerVertical="true"
            android:layout_marginRight="5dp"
            android:background="@color/white"
            android:ellipsize="end"
            android:gravity="right"
            android:inputType="numberDecimal"
            android:singleLine="true"
            android:text="nom"
            android:textSize="18sp" />

        <TextView
            android:id="@+id/NomProducte"
            android:layout_width="150dp"
            android:layout_height="wrap_content"
            android:layout_alignBottom="@+id/Preu"
            android:layout_alignParentLeft="true"
            android:layout_marginLeft="5dp"
            android:layout_weight="0.16"
            android:clickable="false"
            android:ellipsize="end"
            android:focusable="false"
            android:focusableInTouchMode="false"
            android:singleLine="true"
            android:text="codi"
            android:textColor="#000000"
            android:textSize="18sp" />

    </RelativeLayout>

</LinearLayout> 
```

非常感谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:05:18.593

如果我理解了你的问题，那么很难让它总是以一种容易理解的方式表现。我建议您更改实现方式，以便在 ListView 中有两个 TextView，显示这两条信息。当可编辑的被点击时，弹出一个对话框来编辑信息，然后用户必须在移动列表视图之前接受或取消该信息，以明确发生了什么。总之，我建议：

*   NomProducte 成为现在设置的 TextView。
*   捕捉 NomProducte 的 onTouch 以弹出一个对话框，显示图像、Preu 文本作为 TextView 和 NomProducte 文本作为 EditText。
*   用户将数据输入到那个。
*   OK -> 接受新的文本动作
*   取消 -> 忽略新的文本操作。

# c# - 修复新连接的超时问题

> ID：15408467
> 
> 赞同：0
> 
> 时间：2013-03-14T11:51:07.030
> 
> 标签：c#, ftp

这是我的一段代码：

```
string my_dir = "";
try
{
    my_dir = ftp.GetCurrentDirectory() + "/test";
    //It sometimes crashes here. I get timeout error.
}
catch
{
    ftp.Close();
    ftp.Open();
    my_dir = ftp.GetCurrentDirectory() + "/test";
} 
```

ftp 是 FtpConnection 类的实例：http://ftplib.codeplex.com/discussions?searchText=&size=10&page [= 1](http://ftplib.codeplex.com/discussions?searchText=&size=10&page=1)

此错误发生在非常大的文件上。我将不得不等待大约 2 小时才能再次获得它。这就是我在这里问的原因。catch 块中的代码是否有意义？它会解决超时问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:01:15.533

如果库不公开 Timeout 属性，您无能为力。FtpConnection 是 WinINET 上的一个非常薄的包装器，因此您唯一的选择是编写一些 P/Invoke 代码来更改 WinINET 的超时。

你使用这个类有什么原因吗？.NET 已经有[FtpWebRequest/FtpWebResponse](http://msdn.microsoft.com/en-us/library/ms229718.aspx)类。[您可以使用FtpWebRequest.Timeout](http://msdn.microsoft.com/en-us/library/system.net.ftpwebrequest.timeout.aspx)属性更改操作的超时，或通过传递[Infinite](http://msdn.microsoft.com/en-us/library/system.threading.timeout.infinite.aspx)值 (-1)禁用超时

# d3.js - nvd3图例重叠

> ID：15408468
> 
> 赞同：1
> 
> 时间：2013-03-14T11:51:17.230
> 
> 标签：d3.js, nvd3.js

我的数据包含两条正确渲染的曲线，但图例重叠，因此第二个的彩色点和文本部分与第一个的文本重叠。当我单击任一点以隐藏曲线时，重叠立即解决，并且不会返回。

代码如下。一个页面上有多个。当我省略 xAxis 线时，问题就解决了，尽管没有明显的联系。

```
d3.json('project_x_data.json', function(data) {
  nv.addGraph(function() {
  var chart = nv.models.lineChart()
                  .x(function(d) { return d[0] })
                  .y(function(d) { return d[1] })
                  .clipEdge(true);

  chart.xAxis.axisLabel('').tickFormat(function(d){
    return d3.time.format('%d/%m/%y')(new Date(d*1000)) });

  d3.select('#chart-project_x_data svg').datum(data)
    .call(chart);

  nv.utils.windowResize(chart.update);
  return chart;
  });
}); 
```

版本:: 浏览器：Firefox、Chrome、Ubuntu 和 OSX。在最新的 novus/nvd3 和 Advael 的当前合并上具有相同的行为。

编辑...

图表包含在引导选项卡中，默认情况下在页面加载时不显示该选项卡。当我在选择选项卡时调整浏览器窗口的大小**（**图表可见可见）时，图例会自行纠正。当我在未选择选项卡（隐藏图表）时调整浏览器窗口的大小**，**然后**选择**选项卡时，图例并未自行更正。由于图表非常......简单，问题似乎是在图表隐藏时完成渲染。

这是否有助于激发任何​​想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T10:46:06.710

这不再是问题了。

现在，只有在选项卡变得可见时，我现在使用Ajax渲染图形。这足以使结果可靠且可重复。

# java - 线程是否创建静态变量的多个实例

> ID：15408470
> 
> 赞同：2
> 
> 时间：2013-03-14T11:51:26.547
> 
> 标签：java, multithreading, static

我现在正在研究 TCP 套接字。我从 Thread 派生我的服务器类。

```
public class TCPServer extends Thread {

  public static int SERVERPORT = 54321;
....
<code>
} 
```

当我使用这个类时，它会打开几个线程。我的问题是，每个线程都有自己的静态变量 SERVERPORT 吗？因为看起来如果我编辑这个变量，它对其他变量没有影响。

我对这个问题的解决方案是创建另一个类，比如“GlobalVariables”并让这个类访问它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T11:52:39.757

> 我的问题是，每个线程都有自己的静态变量 SERVERPORT 吗？

不，不是的。该变量由进程中的所有线程共享。

> 我错过了删除`final`:D 我拥有的变量是类型`static boolean`

即使变量是共享的，但当您在一个线程中对其进行修改时，更改不一定对其他线程可见，直到稍后某个未指定的时间。

您需要采取措施确保可见性。根据您的代码在做什么，这可能包括：

1.  显式同步；
2.  使用`volatile boolean`;
3.  使用`AtomicBoolean`.

# c# - 当前上下文中不存在名称“电子邮件”（Web 应用程序）

> ID：15408483
> 
> 赞同：0
> 
> 时间：2013-03-14T11:52:01.190
> 
> 标签：c#, web, sitefinity

我正在将我的 sitefinity 网站项目转换为 Web 应用程序。

我们有一个最初在网站上工作的用户控件，但现在在构建 Web 应用程序时出现以下错误。

当前上下文中不存在名称“电子邮件”（第 104 行）

```
using System;
using System.Collections.Generic;
using System.Text.RegularExpressions;
using System.Web.Security;
using System.Net.Mail;
using Telerik.Sitefinity.Security;
using Telerik.Sitefinity.Security.Model;
using Telerik.Sitefinity.Model;

namespace UserControls.Saville
{

    public partial class CustomUserRegistration : System.Web.UI.UserControl
    {

        protected void Page_Load(object sender, EventArgs e)
        {
            if (Request.Url.Query.Contains("?registered"))
            {
                userRegistration.Visible = false;
                RegSuccess.Text = "We have emailed you an account activation link. Please check your emails.";
            }
        }

        protected void btnRegister_OnClick(object sender, EventArgs e)
        {
            Match emailValid = Regex.Match(tbxRegEmail.Text, @"^(([\w-]+\.)+[\w-]+|([a-zA-Z]{1}|[\w-]{2,}))@"
                                                                + @"((([0-1]?[0-9]{1,2}|25[0-5]|2[0-4][0-9])\.([0-1]?
                                                            [0-9]{1,2}|25[0-5]|2[0-4][0-9])\."
                                                                + @"([0-1]?[0-9]{1,2}|25[0-5]|2[0-4][0-9])\.([0-1]?
                                                            [0-9]{1,2}|25[0-5]|2[0-4][0-9])){1}|"
                                                                + @"([a-zA-Z]+[\w-]+\.)+[a-zA-Z]{2,4})$");
            if (tbxFirstName.Text != String.Empty &&
                tbxSurname.Text != String.Empty &&
                tbxJobTitle.Text != String.Empty &&
                tbxOrganisation.Text != String.Empty &&
                tbxTelephone.Text != String.Empty &&
                tbxAddressLine1.Text != String.Empty &&
                tbxAddressCity.Text != String.Empty &&
                tbxAddressPostcode.Text != String.Empty &&
                tbxAddressCounty.Text != String.Empty &&
                tbxAddressCountry.Text != String.Empty &&
                tbxRegEmail.Text != String.Empty &&
                tbxRegUsername.Text != String.Empty &&
                tbxRegPassword.Text != String.Empty &&
                tbxCPassword.Text != String.Empty &&
                emailValid.Success &&
                tbxRegPassword.Text.Length > 5 &&
                tbxRegPassword.Text == tbxCPassword.Text)
            {
                var manager = UserManager.GetManager("AspNetSqlMembershipProvider");
                manager.Provider.SuppressSecurityChecks = true;

                if (manager.UserExists(tbxRegUsername.Text))
                {
                    RegError.Text = "Username already in use.";
                }
                else
                {
                    if (manager.EmailExists(tbxRegEmail.Text))
                    {
                        RegError.Text = "Email Address is already registered";
                    }
                    else
                    {
                        MembershipCreateStatus status;
                        User user = manager.CreateUser(tbxRegUsername.Text, tbxRegPassword.Text, tbxRegEmail.Text, "Question", "Answer", false, null, out status);

                        manager.SaveChanges();

                        if (status == MembershipCreateStatus.Success)
                        {
                            UserProfileManager profileManager = UserProfileManager.GetManager();
                            profileManager.Provider.SuppressSecurityChecks = true;

                            SitefinityProfile userProfile = profileManager.CreateProfile(user, Guid.NewGuid(), typeof(SitefinityProfile)) as SitefinityProfile;
                            if (userProfile != null)
                            {
                                userProfile.SetValue("Title", ddlTitle.SelectedItem.Text);
                                userProfile.FirstName = tbxFirstName.Text;
                                userProfile.LastName = tbxSurname.Text;
                                userProfile.SetValue("JobTitle", tbxJobTitle.Text);
                                userProfile.SetValue("Organisation", tbxOrganisation.Text);
                                userProfile.SetValue("MainPhone", tbxTelephone.Text);
                                userProfile.SetValue("MobilePhone", tbxMobileTelephone.Text);
                                userProfile.SetValue("Address_Street_1", tbxAddressLine1.Text);
                                userProfile.SetValue("Address_Street_2", tbxAddressLine2.Text);
                                userProfile.SetValue("Address_City", tbxAddressCity.Text);
                                userProfile.SetValue("Address_PostcodeZIP", tbxAddressPostcode.Text);
                                userProfile.SetValue("Address_CountyState", tbxAddressCounty.Text);
                                userProfile.SetValue("Address_Country", tbxAddressCountry.Text);
                                userProfile.SetValue("Registration_Code", tbxRegCode.Text);
                                userProfile.SetValue("SendMarketing", chkbxMaterials.Checked);
                                profileManager.SaveChanges();

                                RoleManager roleManager = RoleManager.GetManager("AspNetSqlRoleProvider");
                                roleManager.Provider.SuppressSecurityChecks = true;
                                Role untrained = roleManager.GetRole("Untrained");
                                roleManager.AddUserToRole(user, untrained);

                                roleManager.SaveChanges();

                                String emailContent = String.Format("{1}, <br/><br/>Your registration is nearly complete.<br/><br/>Please follow this link to activate your account:<br/><a href='{2}/login?ID={3}'>{2}/login?ID={3}</a>", Environment.NewLine, tbxFirstName.Text, Request.Url.GetLeftPart(UriPartial.Authority), user.Id.ToString());
                                Email.Send(tbxRegEmail.Text, "support.manager@*****.com", "*****", emailContent);

                                Response.Redirect("~/login?registered");
                            }

                            RegError.Text = "An error occurred whilst registering. If problem persists please contact support.manager@*****.com";
                        }
                    }
                }
            }
            else
            {
                RegError.Text = "Please check all required fields have been filled and are valid.";
            }
        }
    }
} 
```

最初我们在项目的不同文件夹中有一个 Email.cs 文件，但 webapp 似乎无法找到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:00:55.820

我可以推荐一个稍微不同的解决方案来发送电子邮件。使用`MailDefinition`和`MailMessage`类来创建电子邮件的正文，然后从那里使用`EmailSender`类以及 Sitefinity 中的 SMTP 设置来发送电子邮件。下面的示例代码：

```
using System.Net.Mail;
using Telerik.Sitefinity.Services;
using Telerik.Sitefinity.Web.Mail;
using Telerik.Sitefinity.Configuration;

var smtpSettings = Config.Get<SystemConfig>().SmtpSettings;
MailDefinition mailDef = new MailDefinition()
{
    IsBodyHtml = true,
    BodyFileName = "~/Files/EmailBody.html",
    Subject = "Thanks for Commenting!",
    From = !smtpSettings.DefaultSenderEmailAddress.IsNullOrEmpty() ?  smtpSettings.DefaultSenderEmailAddress : smtpSettings.UserName
};
MailMessage email = mailDef.CreateMailMessage(this.EmailControl.Value.ToString(), new ListDictionary(), this);
EmailSender.Get().Send(email); 
```

用于将`ListDictionary`正文中的值替换为代码中的值。如果你不需要它，你可以只包含一个空字典。

# java - Java - 规范化和非规范化神经网络中的名义属性

> ID：15408487
> 
> 赞同：2
> 
> 时间：2013-03-14T11:52:20.267
> 
> 标签：java, arrays, neural-network, backpropagation

您好我正在构建一个简单的多层网络，该网络使用反向传播进行训练。我目前的问题是我的数据集中的某些属性是名义上的（非数字），我必须对它们进行规范化。我想知道最好的方法是什么。我正在考虑计算每个属性有多少不同的值，并为每个属性分配一个介于 0 和 1 之间的相等数字。例如，假设我的一个属性具有值 A 到 E，那么以下是否合适？：

```
A = 0
B = 0.25
C = 0.5
D = 0.75
E = 1 
```

我的问题的第二部分是将输出非规范化以使其恢复到标称值。为了获得数字表示，我是否首先对数据集中的每个不同的输出属性值执行与上述相同的操作？此外，在我从网络获得输出后，我是否只看到它更接近哪个数字？例如，如果我得到 0.435 作为输出并且我的输出属性值是这样分配的：

```
x = 0
y = 0.5
z = 1 
```

我是否只找到最接近输出 (0.435) 的值，即 y (0.5)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T13:09:25.680

这实际上取决于您尝试规范化的属性的含义以及 NN 中使用的函数。例如，如果您的属性是非线性的，或者如果您使用的是非线性激活函数，那么线性归一化可能最终不会达到您想要的效果。

如果属性值的范围相对较小，将输入和输出分成二进制输入和输出的集合可能会更简单和更准确。

**编辑**：如果 NN 能够准确地执行其功能，则其中一个输出将显着高于其他输出。如果没有，您可能会遇到问题，具体取决于您何时看到不准确的结果。

预计在早期训练期间会出现不准确的结果。随着您执行更多的训练迭代，它们应该变得越来越不常见。如果他们不这样做，您的 NN 可能不适合您尝试执行的任务。这可能只是增加隐藏层的大小和/或数量的问题。或者它可能是一个更基本的问题，需要了解您正在尝试做什么。

如果您成功地训练了您的 NN，但在处理真实数据集时发现不准确，那么您的训练集可能没有足够的代表性。

在所有这些情况下，很有可能您的 NN 所做的事情与您希望它做的事情完全不同。所以在这一点上，简单地选择最高的输出是一个很好的猜测。但绝对不能保证它会是一个*更好*的猜测。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T13:37:08.083

*如果变量是有序*的而*不是名义*的，你只能做你提议的事情，即使这样，这也是一个有点武断的决定。在我提出解决方案之前，先说明一下术语：

**名义变量与有序变量**

假设`A`,`B`等代表颜色。这些是名义变量的值，*不能*以有意义的方式排序。你不能说红色大于黄色。因此，您不应将数字分配给名义变量。

现在假设`A`, `B`, `C`, 等代表服装尺寸，例如`small`, `medium`,`large`等。即使我们不是在绝对尺度上测量这些尺寸（即我们不说`small`对应于 40 个胸围），很明显`small`< `medium`< `large`. 考虑到这一点，您是否设置`small=1`, `medium=2`, `large=3`, 或`small=2`, `medium=4`,仍然有些随意`large=8`。

**One-of-N 编码** 解决此问题的更好方法是使用所谓的 one-of-N 编码。如果您有 5 个不同的值，则需要 5 个输入单元，每个输入单元可以取值`1`或`0`。继续我的服装示例，尺寸`extra small`可以编码为`10000`、`small`as `01000`、 medium as`00100`等。

类似的原则适用于网络的输出。如果我们将服装尺寸视为输出而不是输入，那么当网络输出向量时`[0.01 -0.01 0.5 0.0001 -.0002]`，您会将其解释为尺寸`medium`。

In reply to your comment on @Daan's post: if you have 5 inputs, one of which takes 20 possible discrete values, you will need 24 input nodes. You might want to normalise the values of your 4 continuous inputs to the range `[0, 1]`, because they may end out dominating your discrete variable.

# mysql - 仅当表不存在时如何执行 DDL？

> ID：15408489
> 
> 赞同：11
> 
> 时间：2013-03-14T11:52:22.923
> 
> 标签：mysql, scala, playframework-2.1, slick

我将 Slick 1.0 与 Play Framework 2.1 和 MySQL 一起使用。

我想控制 ddl 表的创建，以便仅在表不存在时发生。也就是说，表应该只在我第一次开始游戏时创建。

如何在 Slick 中做到这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-09-20T16:44:36.823

因为我喜欢单独控制我的表的创建并保持它干燥，我只是倾向于向我的应用程序添加一个实用程序方法：

```
def createIfNotExists(tables: TableQuery[_ <: Table[_]]*)(implicit session: Session) {
  tables foreach {table => if(MTable.getTables(table.baseTableRow.tableName).list.isEmpty) table.ddl.create}
} 
```

然后，您可以使用隐式会话创建表：

```
db withSession {
  implicit session =>
    createIfNotExists(table1, table2, ..., tablen)
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-14T15:45:25.220

为了他人的利益，SLICK 提供了一个[MTable](http://slick.typesafe.com/doc/1.0.0/api/index.html#scala.slick.jdbc.meta.MTable$)对象，您可以使用它来计算数据库中存在的表的数量。

然后，如果它们不存在，您可以有条件地调用 ddl。在下面的情况下，我希望有 11 个表 + play_evolutions 表

```
import scala.slick.jdbc.meta._

 if (MTable.getTables.list().size < 12) {
        (Contacts.ddl ++ ThirdParties.ddl ++ Directorates.ddl ++ ServiceAreas.ddl ++ ICTServers.ddl
          ++ ICTServerDependencies.ddl ++ ICTSystems.ddl ++ ICTSystemDependencies.ddl ++ ICTSystemServerDependencies.ddl
              ++ CouncilServices.ddl ++ CouncilServiceDependencies.ddl).create
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-05-18T10:55:36.163

我意识到问题是关于 Slick 1 的，但为了 Slick 3 的完整性，我执行以下操作：

```
 Await.result(createTableIfNotExists(tableQuery1, tableQuery2, tableQuery3), Duration.Inf)

  private def createTableIfNotExists(tables: TableQuery[_ <: Table[_]]*): Future[Seq[Unit]] = {
    Future.sequence(
      tables map { table =>
        db.run(MTable.getTables(table.baseTableRow.tableName)).flatMap { result =>
          if (result.isEmpty) {
            db.run(table.schema.create)
          } else {
            Future.successful(())
          }
        }
      }
    )
  } 
```

# c++ - 根据 RFC 规则进行电子邮件验证

> ID：15408490
> 
> 赞同：1
> 
> 时间：2013-03-14T11:52:24.780
> 
> 标签：c++, validation, email, email-validation

我知道这并不完全是 SO 上欢迎的那种问题，但我认为如果有人可以共享完全符合 RFC 规则的电子邮件验证代码片段/功能，那将是最有用的。

# javascript - 创建具有动态名称 JS 的对象

> ID：15408492
> 
> 赞同：1
> 
> 时间：2013-03-14T11:52:29.837
> 
> 标签：javascript

我怎样才能完成这个任务：

```
var i = 'foo';
var x = {
          i: 'bar'
        }
console.log(x);
> {'foo':'bar'}; 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T11:53:18.050

使用括号表示法：

```
var i = 'foo';
var x = {};
x[i] = 'bar'; 
```

# scala - 为这个用例播放 Iteratee

> ID：15408496
> 
> 赞同：1
> 
> 时间：2013-03-14T11:52:32.660
> 
> 标签：scala, playframework, playframework-2.1

我正在学习 Iteratee 和相关 API，以满足我对实时推文的要求之一。使用 Play 2.1 和 Scala 2.10。是否遵循使用 Iteratee 的最佳方式，它也会产生将推文保存到 MongoDB 的结果？

```
val wsStream = new Enumerator[Array[Byte]] {
  def apply[A](iteratee: Iteratee[Array[Byte], A]) = {
    WS.url("https://stream.twitter.com/1.1/statuses/filter.json?track=" + term)
      .sign(OAuthCalculator(Twitter.KEY, tokens))
      .get(_ => iteratee)
  }
}

wsStream.apply(Iteratee.foreach(bytes => saveTweetToMongo(bytes))) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T17:38:01.027

请注意，您可以将多个迭代器应用于同一个枚举器。换句话说，您可以创建 a`streamingTweetIteratee`和 a`saveTweetToMongoIteratee`并将两者应用于提供推文的枚举器。

当我在 REPL 中进行原型设计时，我经常创建一个简单的`loggingIteratee`方法，它将所有内容都集中到 STDOUT 中。我将它和我正在写的迭代器都应用到同一个枚举器。

我假设您想使用 WebSockets 将推文流式传输到客户端？如果您查看 Play 附带的聊天演示！你会知道如何去做。

# symfony-2.1 - 具有特定 query_buider 的 Symfony2 实体表单类型

> ID：15408498
> 
> 赞同：1
> 
> 时间：2013-03-14T11:52:37.133
> 
> 标签：symfony-2.1, symfony-forms

**语境**

就我而言，我有一些带有“折扣券”（折扣）的订单。折扣可以在不同的条件下使用。例如，折扣有一个过期日期，可以由有限数量的客户使用，可以专用于用户，......

每个折扣可以附加到多个订单。

在我的后台，我想在订单创建表单中添加一个“折扣”字段，其中包含可用折扣列表，但只有正确的折扣。

**我做了什么**

*   具有字段 manyToMany 的实体“订单”

    ```
    /**
    * @ORM\ManyToMany(targetEntity="PATH\MyBundle\Entity\Discount", inversedBy="orders")
     * @ORM\JoinTable(name="shop_discounts_orders",
     *      joinColumns={@ORM\JoinColumn(name="order_id", referencedColumnName="id")},
     *      inverseJoinColumns={@ORM\JoinColumn(name="discount_id", referencedColumnName="id")}
     *      )
     */
    private $discounts; 
    ```

*   具有字段 manyToMany 的实体“折扣”

    ```
     /**
     * @ORM\ManyToMany(targetEntity="PATH\MyBundle\Entity\Order", mappedBy="discounts")
     */
     private $orders; 
    ```

*   带有字段 discounts 的表单 OrderType

    ```
    $builder->add('discounts', 'entity',
        array( 'label' => 'Discount vouchers',
            'required' => false,
            'expanded' => true,
            'class' => 'PATH\MyBundle\Entity\Discount',
            'property' => 'title',
            'multiple' => true,
            'query_builder' => function(EntityRepository $er) use ($params) {
                        return $er->getQuerySelectType($params);
                    },
        )); 
    ```

使用此解决方案，我可以在我的实体存储库中返回由我的请求定义的特定折扣。例如，它适用于过期日期条件。

**我想要什么**

我想过滤复选框列表中的结果。实际上，我想将折扣的使用限制为专用用户，限制为产品列表，或者限制使用次数……而这些条件不能通过简单的 sql 请求来完成。

我尝试创建特殊类型。我的想法是有一个实体数组 Discount 并加载一个选择列表......之后，我创建了一个 dataTransformer 但它不起作用！

谢谢你的想法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:32:26.073

例如，您可以使用`$options`from`public function buildForm(FormBuilderInterface $builder, array $options)`传递您的`user`and `product`。使用这 2 个信息，您可以优化您的折扣列表（在您的查询中）

如果这样做，则需要将它们添加到 setDefaultValue

```
public function setDefaultOptions(OptionsResolverInterface $resolver)
{
        $resolver->setDefaults(array(
            'user_discount' => null,
            'product_discount' => null,
        ));
} 
```

在你的控制器中：

```
$form = $this->formFactory->create(new YourFormType(), $entity, array(
    'user_discount' => $this->getUser(),
    'product_discount' => $product,
)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:10:41.977

如果有人和我有同样的问题，我找到了一个解决方案并解释它。

*   创建自定义类型

我的自定义类型的灵感来自 Symfony\Bridge\Doctrine\Form\Type\DoctrineType

```
class DiscountOrderType extends AbstractType
{
     // overide choiceList callback
     public function setDefaultOptions(OptionsResolverInterface $resolver)
     {
        $choiceListCache =& $this->choiceListCache;
        $type = $this;

        $choiceList = function (Options $options) use (&$choiceListCache, &$time, $container) {

          [[ Copy paste same as Doctrine type ]]
        // Create your own choiceList class (EntityChoiceList)
        if (!isset($choiceListCache[$hash])) {
            $choiceListCache[$hash] = new DiscountChoiceList(
                $options['em'],
                $options['class'],
                $options['property'],
                $options['loader'],
                $options['choices'],
                $options['group_by']
            );
            // If you want add container
            $choiceListCache[$hash]->setContainer($container);
        }

        return $choiceListCache[$hash];
    };

    $resolver->setDefaults(array(
        'choice_list'       => $choiceList,
    ));

} 
```

*   创建自定义 EntityChoiceList

我的自定义类型的灵感来自 Symfony\Bridge\Doctrine\Form\ChoiceList\EntityChoiceList

```
class EntityChoiceList extends ObjectChoiceList
{
protected function load()
{
    if ($this->entityLoader) {
        $entities = $this->entityLoader->getEntities();
    } else {
        $entities = $this->em->getRepository($this->class)->findAll();
    }

    // You have access to the entities in the choice list
    // Add your custom code here to manipulate the choice list
    // you can do some check not properly possible with sql request (http requests on each result, ...) before add it in choice list
    // you can add some custom cache rules, ...
    // if you use gedmon and want apply a "join" with translate table, you can add $query->setHint(\Doctrine\ORM\Query::HINT_CUSTOM_OUTPUT_WALKER, 'Gedmo\\Translatable\\Query\\TreeWalker\\TranslationWalker'); before playing request...
    // Possibilities are infinite

    // FOR INSTANCE : you already want unset first entity of the result
    if (isset($entities[0])) {
        unset($entities[0]);
    }
    // END OF CUSTOM CODE
    try {
        // The second parameter $labels is ignored by ObjectChoiceList
        // The third parameter $preferredChoices is currently not supported
        parent::initialize($entities, array(), array());
    } catch (StringCastException $e) {
        throw new StringCastException(str_replace('argument $labelPath', 'option "property"', $e->getMessage()), null, $e);
    }

    $this->loaded = true;
} 
```

当然，您可以尝试为 beautyfull 代码扩展 symfony 类；）。

感谢@maxwell2022 的帮助！

# r - 字符串值的数值

> ID：15408502
> 
> 赞同：0
> 
> 时间：2013-03-14T11:52:40.927
> 
> 标签：r, transformation

只要每个唯一字符串都有唯一的数字返回，我怎么能将字符串值更改为任何数值。

例如`INTcntry`获取, `1`for ...的值但是我不想手动分配它，因为我有 9000 个不同的字符串值。`2708BG``2``2703BG`

```
 idno       INTcntry
4039 3857         2708BG
4040 3858         2708BG
4041 3862         2704BG
4042 3863         2704BG
4043 3864         2704BG
4044 3865         2704BG
4045 3867         2704BG
4046 3868         2704BG
4047 3871         2703BG
4048 3872         2703BG
4199  161         1011CH
4201  163         1011CH 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T11:55:56.037

我怀疑这`INTcntry`是一个因素，

```
is.factor(dd$INTcntry) 
```

在这种情况下，只需利用这一事实：

```
R> levels(dd$INTcntry)
[1] "1011CH" "2703BG" "2704BG" "2708BG"
R> labels(dd$INTcntry)
[1] "1" "2" "3" "4" "5" "6" "7" "8" 
```

所以只需将标签转换为数值：

```
as.numeric(labels(dd$INTcntry)) 
```

或者

```
as.numeric(dd$INTcntry) 
```

如果`INTcntry`不是一个因素，那么只需使用：

```
factor(dd$INTcntry) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T11:56:16.170

一种方法是将变量转换为因子，然后使用`as.numeric`：

```
as.numeric(factor(df$INTcntry)) 
```

# twitter - 如何在默认的 octopress 主题中获取最新的推文？

> ID：15408504
> 
> 赞同：2
> 
> 时间：2013-03-14T11:52:49.117
> 
> 标签：twitter, blogs, octopress

这可能是一个愚蠢的问题，但为什么我不能让我的推文出现在我的 octopress 博客上？我刚刚切换到 octopress，正如我在文档中阅读的那样，您只需在 _config.yml 文件中输入您的 Twitter 名称。然而，Github 对我有用吗？

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:26:45.340

问题是 Twitter 最近更新了他们的 API，结束了对未经身份验证的 JSON 的支持。旧 API 存在，但它会受到 API 滚动中断的影响。你可以在 github 上看到关于它的讨论：[Octopress issue 1099](https://github.com/imathis/octopress/issues/1099)。正如您所指出的，您可以获得一个 Twitter 小部件来完成此操作。

# java - 使用 Spring AOP 进行 @autowired 依赖注入时出现 NullPointerException

> ID：15408507
> 
> 赞同：1
> 
> 时间：2013-03-14T11:52:53.953
> 
> 标签：java, spring, aop

我想劫持在数据库上操作的方法。为此，我想使用 Spring AOP。但是当我没有在我的对象上使用@autowired 依赖时，它会得到 NullPointerException。如果我使用这个@autowired 依赖，AOP 不会触发。

这是我的对象初始化。

```
ApplicationContext context1 = new ClassPathXmlApplicationContext("Spring-Customer.xml");
@Autowired
EmployeeDAO dao = (EmployeeDAO) context1.getBean("employeeDAO"); 
```

这个 dao obect 将在 @Transactional 方法中使用

```
@Transactional
    public void save(Employee employee) {
        dao.persist(employee);
    } 
```

我像这样初始化光束：

```
 <beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd 
    http://www.springframework.org/schema/aop 
    http://www.springframework.org/schema/aop/spring-aop-3.0.xsd ">

    <aop:aspectj-autoproxy proxy-target-class="true" />

    <bean id="employeeDAO" class="com.timesheetz.employee.integration.EmployeeDAO " />

    <!-- Aspect -->
    <bean id="logAspect" class="com.timesheetz.tools.service.LoggerAspect" />

</beans> 
```

劫持方法的 LoggerAspect 类是：

```
 package com.timesheetz.tools.service;

import java.util.Arrays;
import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import org.aspectj.lang.JoinPoint;
import org.aspectj.lang.ProceedingJoinPoint;
import org.aspectj.lang.annotation.AfterReturning;
import org.aspectj.lang.annotation.AfterThrowing;
import org.aspectj.lang.annotation.Around;
import org.aspectj.lang.annotation.Aspect;
import org.aspectj.lang.annotation.Before;
import org.aspectj.lang.annotation.Pointcut;
import org.springframework.core.annotation.Order;
import org.springframework.stereotype.Component;

@Aspect
@Component
public class LoggerAspect
{
    private Log log = LogFactory.getLog(this.getClass());

    @Pointcut("execution(* *.*(..))")
    protected void loggingOperation() {}

    @Before("loggingOperation()")
    @Order(1)
    public void logJoinPoint(JoinPoint joinPoint)
    {
        System.out.println("Join point kind : " + joinPoint.getKind());
        System.out.println("Signature declaring type : "+ joinPoint.getSignature().getDeclaringTypeName());
        System.out.println("Signature name : " + joinPoint.getSignature().getName());
        System.out.println("Arguments : " + Arrays.toString(joinPoint.getArgs()));
        System.out.println("Target class : "+ joinPoint.getTarget().getClass().getName());
        System.out.println("This class : " + joinPoint.getThis().getClass().getName());
    }

    @AfterReturning(pointcut="loggingOperation()", returning = "result")
    @Order(2)
    public void logAfter(JoinPoint joinPoint, Object result)
    {
        System.out.println("Exiting from Method :"+joinPoint.getSignature().getName());
        System.out.println("Return value :"+result);
    }

    @AfterThrowing(pointcut="execution(* *.*(..))", throwing = "e")
    @Order(3)
    public void logAfterThrowing(JoinPoint joinPoint, Throwable e)
    {
        System.out.println("An exception has been thrown in "+ joinPoint.getSignature().getName() + "()");
        System.out.println("Cause :"+e.getCause());
    }

    @Around("execution(* *.*(..))")
    @Order(4)
    public Object logAround(ProceedingJoinPoint joinPoint) throws Throwable
    {
        System.out.println("The method " + joinPoint.getSignature().getName()+ "() begins with " + Arrays.toString(joinPoint.getArgs()));
        try
        {
            Object result = joinPoint.proceed();
            System.out.println("The method " + joinPoint.getSignature().getName()+ "() ends with " + result);
            return result;
        } catch (IllegalArgumentException e)
        {
            System.out.println("Illegal argument "+ Arrays.toString(joinPoint.getArgs()) + " in "+ joinPoint.getSignature().getName() + "()");
            throw e;
        }        
    }

} 
```

我在 pom.xml 中插入了以下标签

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-core</artifactId>
    <version>3.0.5</version>
</dependency>

 <dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-context</artifactId>
    <version>3.0.5</version>
</dependency>

<!-- Spring AOP + AspectJ -->
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-aop</artifactId>
    <version>3.0.5</version>
</dependency>

<dependency>
    <groupId>org.aspectj</groupId>
    <artifactId>aspectjrt</artifactId>
    <version>1.6.11</version>
</dependency>

<dependency>
    <groupId>org.aspectj</groupId>
    <artifactId>aspectjweaver</artifactId>
    <version>1.6.11</version>
</dependency> 
```

我正在使用 spring 3.0.5 版本我有 jars aspectjrt.jar,version-1.6.11 aspectjweaver.jar,version-1.6.11

# java - 我怎么称呼值为 1.9999 的常数

> ID：15408508
> 
> 赞同：0
> 
> 时间：2013-03-14T11:52:55.297
> 
> 标签：java, c++, naming-conventions

我有一个数字类，FixedDecimal。

为此，我有一个测试。我用几个值运行测试；1、1.9、1.99、1.999、1.9999。

我想为这些命名常量。

我应该怎么称呼他们？

```
FixedDecimal _1_ = new FixedDecimal(1, 1);
FixedDecimal _1_9 = new FixedDecimal(19, 10);
FixedDecimal _1_99 = new FixedDecimal(199, 100);
FixedDecimal _1_999 = new FixedDecimal(1999, 1000);
FixedDecimal _1_9999 = new FixedDecimal(19999, 10000); 
```

它看起来有点不直观。除了下划线 (_) 之外，我还可以使用其他字符吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T11:56:41.473

如果常量的名称反映了常量的数字表示，那么您做错了。

好的常数：

```
BOILING_C = 100
BOILING_F = 212
TUESDAY = 2 
```

坏常数：

```
_100 = 100
_212 = 212
//What would you put for Tuesday anyway? 
```

您可能应该直接使用这些值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T12:10:01.773

使用具体的 Unitname 会有所帮助。

```
FixedDecimal _1 = new FixedDecimal(1, 1);
FixedDecimal _19deci = new FixedDecimal(19, 10);
FixedDecimal _199centi = new FixedDecimal(199, 100);
FixedDecimal _1999mili = new FixedDecimal(1999, 1000);
FixedDecimal _19999micro = new FixedDecimal(19999, 10000); 
```

问候

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T12:57:58.680

尽管有关常量命名实践的其他答案是绝对正确的，但您的问题的答案是：在这种情况下，您可以使用 $ 而不是 _ 。

# iphone - iCloud 同步不适用于 iPhone 4S 和 5 上的应用程序

> ID：15408515
> 
> 赞同：2
> 
> 时间：2013-03-14T11:53:09.837
> 
> 标签：iphone, ios, icloud, nsubiquitouskeyvaluestore

**概括：**

安装在支持 iCloud 同步的 iOS（iPhone 4S 或 iPhone 5 - 均已测试）上的应用程序实际上并不与 iCloud 同步。iOS 版本为 6.1.2。

我们正在开发一个应用程序并添加了 iCloud 支持。配置文件在启用 iCloud 的情况下重新创建并存储在设备上。权利在 xcode 中正确配置为使用 iCloud 和键值存储（标识符的值设置为默认值）。我们按照 Apple 的 iCloud 设计指南教程来实现与 iCloud 同步的功能（使用 NSUbiquitousKeyValueStore 类来存储和读取值）。

**重现步骤：**

在 iPhone 4S 或 5（安装了 iOS 6.1.2）上使用支持 iCloud 的应用程序（处于开发模式或从 App Store 安装的应用程序）。转到设置 > iCloud > 文档和数据并启用文档和数据并禁用使用蜂窝数据。尝试将应用程序与 iCloud 一起使用。数据不会在设备之间同步。我们也尝试如下：运行应用程序，将值存储到 iCloud，删除应用程序，重新安装应用程序，运行应用程序，无法从 iCloud 检索值。

关闭 iPhone 并重新打开。转到设置 > iCloud > 文档和数据并启用使用蜂窝数据。

现在运行应用程序并启用 iCloud 并将值存储在 iCloud 中。该值是从 iCloud 同步的……一切正常。

**预期成绩：**

如果禁用使用蜂窝数据并且在设置 > iCloud > 文档和数据中启用了文档和数据，则 iCloud 同步有效。

**实际结果：**

如果在“设置”>“iCloud”>“文档和数据”中禁用“使用蜂窝数据”，iCloud 同步将不起作用。

**笔记：**

此外，通知 NSUbiquitousKeyValueStoreDidChangeExternallyNotification 从未触发选择器集，除非在“设置”>“iCloud”>“文档和数据”中启用了“使用蜂窝数据”。

任何人都可以重现相同的行为吗？有人可以让 iCloud 同步与在设置 > iCloud > 文档和数据中禁用的使用蜂窝数据一起工作吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:12:56.070

**iCloud 键值存储**并不可靠，正如[iCloud 设计指南](http://developer.apple.com/library/mac/#documentation/General/Conceptual/iCloudDesignGuide/Chapters/DesigningForKey-ValueDataIniCloud.html#//apple_ref/doc/uid/TP40012094-CH7-SW1)中所述。

由于键值存储限制，数据传播可能会延迟。

从“**首选项和设置**”指南：

*“键值存储旨在存储不经常更改的数据。如果设备上的应用程序对键值存储进行频繁更改，系统可能会延迟某些更改的同步，以尽量减少往返次数“*

有时，由于此 KVS 限制，`NSUbiquitousKeyValueStoreDidChangeExternallyNotification`即使启用了**Documents & Data**选项和**Use Cellular Data**选项，也不会触发。

这可能是你的问题。

如果没有，您应该等待 Apple 工作人员回复您的错误报告。（我想您已经报告了一个错误，因为您的问题是 Apple 错误报告格式。）

# javascript - dlib http 服务器将网站显示为没有 javascript/css 的纯 html

> ID：15408517
> 
> 赞同：1
> 
> 时间：2013-03-14T11:53:11.817
> 
> 标签：javascript, c++, html, css, httpserver

我尝试在我的 c++ 程序中实现一个小型 http 服务器，以使用 dlib 库 ( [http://dlib.net/network.html#server_http](http://dlib.net/network.html#server_http) ) 将网站用作接口。这段代码应该做的是根据请求读取输入的 html 文件并返回它。

```
class web_server : public server_http
{
    const std::string on_request ( 
        const incoming_things& incoming,
        outgoing_things& outgoing
    )
    {
        ostringstream sout;
        sout<<get_file_contents("Seite.html");
        return sout.str();
    }

}; 
```

它确实有效，但我的浏览器只显示没有任何 javascript/css 元素的纯 html 网站。这些通过以下方式集成到 html 文件中：

```
 <script type="text/javascript" src="scripte.js")>
   </script>
   <link rel="stylesheet" type="text/css" href="Style.css"> 
```

如果我直接用浏览器打开它，html 看起来很好。提前致谢

编辑：谢谢戴维斯金我至少让javascript工作了，而css仍然拒绝工作。我设法放入一个通用响应，现在将任何请求的文件作为字符串发送：on_request 的正文：

```
ostringstream sout;
sout<<get_file_contents("Seite.html");
cout << "request path: " << incoming.path << endl;
string filename=incoming.path.substr(1,incoming.path.length()); 
if (incoming.path.substr(0,1) == "/" && incoming.path.length()>1) return get_file_contents(filename.c_str());
return sout.str(); 
```

再次编辑：它现在可以工作了。Chrome给了我提示，它说样式表文件的MIME类型是text/html，但它应该是text/css。我相应地更改了我的响应方法，它现在可以工作了：

```
if (incoming.path=="/Style.css") outgoing.headers["Content-Type"] == "text/css"; 
```

作为一个后续问题：为什么 css 和 js 文件会触发请求，而不是我在 html 中引用的图像，据我所知，这些图像似乎对混乱的布局有效？但是无论如何还是非常感谢，我会支持你，但遗憾的是我不能......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T21:28:04.940

浏览器将从 Web 服务器请求 Style.css 和 scripte.js 文件，但按照您编写的方式，它只会响应 Seite.html 文件。所以你必须在你的 on_request 方法中添加这样的东西：

```
cout << "request path: " << incoming.path << endl;
if (incoming.path == "/scripte.js")
    return get_file_contents("scripte.js");
else if (incoming.path == "/Style.css")
    return get_file_contents("Style.css"); 
```

# javascript - RGB 到 XYZ 和 LAB 颜色转换

> ID：15408522
> 
> 赞同：17
> 
> 时间：2013-03-14T11:53:21.430
> 
> 标签：javascript, rgb

我在将颜色从 RGB 转换为 LAB 空间时遇到问题 使用[此处](http://www.easyrgb.com/index.php?X=MATH)的公式应该是直截了当的，只是我得到了错误的值

*   RGB = 56,79,132

*   X = 8.592

*   Y = 8.099
*   Z = 22.940

和 CIE-L*ab 作为

*   长* 34.188
*   一个* 8.072
*   b* -32.478

这是我的代码；但我看不出哪里出错了。这可能是由于我之前的这个[家伙](https://stackoverflow.com/questions/6629798/whats-wrong-with-this-rgb-to-xyz-color-space-conversion-algorithm)这样的浮点数。谢谢你。

```
// user colour
var Red   = 56;
var Green = 79;
var Blue  = 132;

// user colour converted to XYZ space
XYZ = RGBtoXYZ(Red,Green,Blue)
var colX = XYZ[0];
var colY = XYZ[1];
var colZ = XYZ[2];

// alert(XYZ)

LAB = XYZtoLAB(colX, colY, colZ)

alert(LAB)

function RGBtoXYZ(R, G, B)
{
    var_R = parseFloat( R / 255 )        //R from 0 to 255
    var_G = parseFloat( G / 255 )        //G from 0 to 255
    var_B = parseFloat( B / 255 )        //B from 0 to 255

    if ( var_R > 0.04045 ) var_R = ( ( var_R + 0.055 ) / 1.055 ) ^ 2.4
    else                   var_R = var_R / 12.92
    if ( var_G > 0.04045 ) var_G = ( ( var_G + 0.055 ) / 1.055 ) ^ 2.4
    else                   var_G = var_G / 12.92
    if ( var_B > 0.04045 ) var_B = ( ( var_B + 0.055 ) / 1.055 ) ^ 2.4
    else                   var_B = var_B / 12.92

    var_R = var_R * 100
    var_G = var_G * 100
    var_B = var_B * 100

    //Observer. = 2°, Illuminant = D65
    X = var_R * 0.4124 + var_G * 0.3576 + var_B * 0.1805
    Y = var_R * 0.2126 + var_G * 0.7152 + var_B * 0.0722
    Z = var_R * 0.0193 + var_G * 0.1192 + var_B * 0.9505
    return [X, Y, Z]
}

function XYZtoLAB(x, y, z)
{
    var ref_X =  95.047;
    var ref_Y = 100.000;
    var ref_Z = 108.883;

    var_X = x / ref_X          //ref_X =  95.047   Observer= 2°, Illuminant= D65
    var_Y = y / ref_Y          //ref_Y = 100.000
    var_Z = z / ref_Z          //ref_Z = 108.883

    if ( var_X > 0.008856 ) var_X = var_X ^ ( 1/3 )
    else                    var_X = ( 7.787 * var_X ) + ( 16 / 116 )
    if ( var_Y > 0.008856 ) var_Y = var_Y ^ ( 1/3 )
    else                    var_Y = ( 7.787 * var_Y ) + ( 16 / 116 )
    if ( var_Z > 0.008856 ) var_Z = var_Z ^ ( 1/3 )
    else                    var_Z = ( 7.787 * var_Z ) + ( 16 / 116 )

    CIE_L = ( 116 * var_Y ) - 16
    CIE_a = 500 * ( var_X - var_Y )
    CIE_b = 200 * ( var_Y - var_Z )

return [CIE_L, CIE_a, CIE_b]
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-14T12:48:51.430

我很确定`^`javascript中的按位异或不是幂运算符。我想`Math.pow`这就是你要找的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-01-05T17:22:43.460

```
/**
 * Converts RGB color to CIE 1931 XYZ color space.
 * https://www.image-engineering.de/library/technotes/958-how-to-convert-between-srgb-and-ciexyz
 * @param  {string} hex
 * @return {number[]}
 */
export function rgbToXyz(hex) {
    const [r, g, b] = hexToRgb(hex).map(_ => _ / 255).map(sRGBtoLinearRGB)
    const X =  0.4124 * r + 0.3576 * g + 0.1805 * b
    const Y =  0.2126 * r + 0.7152 * g + 0.0722 * b
    const Z =  0.0193 * r + 0.1192 * g + 0.9505 * b
    // For some reason, X, Y and Z are multiplied by 100.
    return [X, Y, Z].map(_ => _ * 100)
}

/**
 * Undoes gamma-correction from an RGB-encoded color.
 * https://en.wikipedia.org/wiki/SRGB#Specification_of_the_transformation
 * https://stackoverflow.com/questions/596216/formula-to-determine-brightness-of-rgb-color
 * @param  {number}
 * @return {number}
 */
function sRGBtoLinearRGB(color) {
    // Send this function a decimal sRGB gamma encoded color value
    // between 0.0 and 1.0, and it returns a linearized value.
    if (color <= 0.04045) {
        return color / 12.92
    } else {
        return Math.pow((color + 0.055) / 1.055, 2.4)
    }
}

/**
 * Converts hex color to RGB.
 * https://stackoverflow.com/questions/5623838/rgb-to-hex-and-hex-to-rgb
 * @param  {string} hex
 * @return {number[]} [rgb]
 */
function hexToRgb(hex) {
    const match = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex)
    if (match) {
        match.shift()
        return match.map(_ => parseInt(_, 16))
    }
}

/**
 * Converts CIE 1931 XYZ colors to CIE L*a*b*.
 * The conversion formula comes from <http://www.easyrgb.com/en/math.php>.
 * https://github.com/cangoektas/xyz-to-lab/blob/master/src/index.js
 * @param   {number[]} color The CIE 1931 XYZ color to convert which refers to
 *                           the D65/2° standard illuminant.
 * @returns {number[]}       The color in the CIE L*a*b* color space.
 */
// X, Y, Z of a "D65" light source.
// "D65" is a standard 6500K Daylight light source.
// https://en.wikipedia.org/wiki/Illuminant_D65
const D65 = [95.047, 100, 108.883]
export function xyzToLab([x, y, z]) {
  [x, y, z] = [x, y, z].map((v, i) => {
    v = v / D65[i]
    return v > 0.008856 ? Math.pow(v, 1 / 3) : v * 7.787 + 16 / 116
  })
  const l = 116 * y - 16
  const a = 500 * (x - y)
  const b = 200 * (y - z)
  return [l, a, b]
}

/**
 * Converts Lab color space to Luminance-Chroma-Hue color space.
 * http://www.brucelindbloom.com/index.html?Eqn_Lab_to_LCH.html
 * @param  {number[]}
 * @return {number[]}
 */
export function labToLch([l, a, b]) {
    const c = Math.sqrt(a * a + b * b)
    const h = abToHue(a, b)
    return [l, c, h]
}

/**
 * Converts a and b of Lab color space to Hue of LCH color space.
 * https://stackoverflow.com/questions/53733379/conversion-of-cielab-to-cielchab-not-yielding-correct-result
 * @param  {number} a
 * @param  {number} b
 * @return {number}
 */
function abToHue(a, b) {
    if (a >= 0 && b === 0) {
        return 0
    }
    if (a < 0 && b === 0) {
        return 180
    }
    if (a === 0 && b > 0) {
        return 90
    }
    if (a === 0 && b < 0) {
        return 270
    }
    let xBias
    if (a > 0 && b > 0) {
        xBias = 0
    } else if (a < 0) {
        xBias = 180
    } else if (a > 0 && b < 0) {
        xBias = 360
    }
    return radiansToDegrees(Math.atan(b / a)) + xBias
}

function radiansToDegrees(radians) {
    return radians * (180 / Math.PI)
}

function degreesToRadians(degrees) {
    return degrees * Math.PI / 180
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-26T21:39:48.450

`function xyzc(c){return ((c/255)>0.04045)?Math.pow((((c/255)+0.055)/1.055),2.4)*100:(c/255)/12.92*100;}`

此行将 rgb 通道转换为 XYZ

# opencv - OpenCV 与 OpenNi

> ID：15408525
> 
> 赞同：1
> 
> 时间：2013-03-14T11:53:24.310
> 
> 标签：opencv, kinect, openni

我研究了 NITE 2。在寻找各种示例时，我遇到了一些将 OpenCV 与 OpenNi 一起使用的视频。问题是**opencv 究竟可以与 OpenNI 一起使用**。我知道这是一个非常模糊的问题，但我真的需要知道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T21:02:27.050

OpenCV 是用于开发计算机视觉算法的最佳品种库。它具有大量优化算法，可用于分析深度图以及您可以使用 OpenNI 捕获的 RGB 图像。

NITE 是一个封闭源代码库，其中包含一组实现非常好的但有限的算法。

因此，如果您想实现的不仅仅是给您 NITE 的东西，您将需要方便的工具集。一般来说，OpenCV 是最好的选择。

例如，您可以使用 OpenCV + OpenNI 来开发：

*   使用 3D 和 2D 数据融合进行性别、年龄或情绪识别；
*   3D人脸识别；
*   自定义手势识别；
*   体型测量。

以及许多其他任务，其数量仅受想象力限制。

> VideoCapture 类支持与 OpenNI（Kinect、XtionPRO、...）兼容的深度传感器。可以使用熟悉的 VideoCapture 接口检索深度图、RGB 图像和一些其他格式的输出（请参阅[使用 Kinect 和其他 OpenNI 兼容的深度传感器](http://docs.opencv.org/doc/user_guide/ug_highgui.html?highlight=kinect)）

# java - 在 CDMA BlackBerry 设备（OS5 及更高版本）中获取 Cell ID 和 LAC

> ID：15408526
> 
> 赞同：26
> 
> 时间：2013-03-14T11:53:24.987
> 
> 标签：java, blackberry, cdma

我被困在如何获得支持 OS 5`CellID`及更高版本`LAC`的`CDMA`BlackBerry 设备上。我必须在不使用 GPS 的情况下获得纬度和经度。所以，我已经为 GPRS 设备实现了解决方案，但对于 CDMA 设备，我无法映射 CellID 和 LAC。

我确实在这个论坛上阅读了很多帖子，其他人说 CDMA Info 提供了`BID = CellID`and `NID = LAC`，但它根本没有用，我也尝试了 LAC 的不同组合，例如使用 SID 作为 LAC，但它也没有用。

如何在 OS 5.0+ BlackBerry 设备上获取 Cell ID？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-17T12:56:42.560

使用 getCellInfo() 获取 LAC 和 CellId。只需调用相应的方法：

```
int LAC = GPRSInfo.getCellInfo().getLAC();
int CELLID = GPRSInfo.getCellInfo().getCellId(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-10T18:12:35.697

你试过这个吗？

```
int MCC = RadioInfo.getMCC(RadioInfo.getCurrentNetworkIndex());
int MNC = RadioInfo.getMNC(RadioInfo.getCurrentNetworkIndex());
int LAC = GPRSInfo.getCellInfo().getLAC();
int CELLID = GPRSInfo.getCellInfo().getCellId(); 
```

# java - 考虑到 java 中的夏令时，将 IST 转换为美国时区

> ID：15408527
> 
> 赞同：0
> 
> 时间：2013-03-14T11:53:26.230
> 
> 标签：java, timezone, dst

我在 IST 中有一个日期时间。如果java中给定的日期时间有夏令时，我想根据输入考虑夏令时将其转换为美国时区。这是我试过的

```
function convert(Date dt,int toTimeZoneId){
Calendar cal = Calendar.getInstance();
cal.setTime(dt); // Geting time in IST

//Converted to GMT and set in cal

switch(toTimeZoneId){
    case 1: tzTarget = TimeZone.getTimeZone("America/Adak"); 
        offset = -10;
        break;
    case 2: tzTarget = TimeZone.getTimeZone("America/Anchorage"); 
        offset = -9;
        break;
    case 3: tzTarget = TimeZone.getTimeZone("America/Los_Angeles"); 
        offset = -8;
        break;

    case 4: tzTarget = TimeZone.getTimeZone("America/Denver");
        offset = -7;
        break;
    case 5: tzTarget = TimeZone.getTimeZone("America/Chicago");
        offset = -6;
        break;
    case 6: tzTarget = TimeZone.getTimeZone("America/New_York");
        offset = -5;
        break;
}
//converting from GMT to US timezones based on offset and dst
cal.setTimeZone(tzTarget);
dst = tzTarget.getDSTSavings();
dst = dst/3600000;
offset = offset + dst;
cal.add(Calendar.HOUR, offset);

Date date = cal.getTime();

System.out.println(new SimpleDateFormat("yyyy-MM-dd HH:mm:ss").format(date)); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:52:58.130

要将给定的日期转换为不同的时区，您需要创建具有适当时区的日期格式化程序。日期实例只是相对于纪元的长值；它没有时区信息。所以我们没有将它转换为不同的时区，我们只是在不同的时区中表示它。这就是为什么当我们想要创建日期实例的字符串表示时需要时区信息的原因。

这里有一些代码来说明上述情况。我刚刚将时区添加到您的日期格式字符串中以使事情变得清晰。

```
/*
 * Converts a specified time to different time zones
 */
public void convert(Date dt) {
    // This prints: Date with default formatter: 2013-03-14 22:00:12 PDT
    // As my machine is in PDT time zone
    System.out.println("Date with default formatter: " + new SimpleDateFormat("yyyy-MM-dd HH:mm:ss z").format(dt));

    // This prints: Date with IST time zone formatter: 2013-03-15 10:30:12 GMT+05:30
    SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss z");
    TimeZone tz = TimeZone.getTimeZone("GMT+0530");
    sdf.setTimeZone(tz);
    String dateIST = sdf.format(dt);
    System.out.println("Date with IST time zone formatter: " + dateIST);

    // This prints: Date CST time zone formatter: 2013-03-15 00:00:12 CDT        
    tz = TimeZone.getTimeZone("CST");
    sdf.setTimeZone(tz);
    System.out.println("Date CST time zone formatter: " + sdf.format(dt));
} 
```

我认为这就是你想要做的 - 将给定时间转换为不同的时区。为此，我认为您不需要添加/减去任何偏移量，因为您只希望在不同的时区表示*相同*`TimeZone`的时间，并且实例应该能够在格式化期间处理该问题。

至于夏令时，`TimeZone`应该也能处理好。如果您在我的示例代码中注意到，我曾经`CST`创建`TimeZone`实例并且`CST`是“GMT -06 小时”。但它给出的输出是 in `CDT`，即“GMT -05 hours”，因为这个时区实例使用夏令时。因此，通过使用适当的时区，您也应该能够处理夏令时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:10:25.103

[java.util.GregorianCalendar](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/GregorianCalendar.html)允许您创建带有时区的日期。不幸的是，加法和减法从那里很糟糕。（[你如何在 Java 中减去日期？](https://stackoverflow.com/q/3526485/90322)）

由于您在两个时区之间进行转换，您还可以使用[java.util.TimeZone](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/TimeZone.html)并使用`tz1.getOffset(date) - tz2.getOffset(date)`. 做减法时注意排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-24T07:34:49.147

# 乔达时间

使用[Joda-Time](http://www.joda.org/joda-time/)使这变得容易得多。或者尝试 Java 8 中的新 java.time 包。

这是一些使用 Joda-Time 2.3 的示例代码。搜索 StackOverflow 以获取更多示例。

印度时间……</p>

```
DateTimeZone timeZone_India = DateTimeZone.forID( "Asia/Kolkata" );
DateTime dateTimeIndia = new DateTime( date, timeZone_India ); 
```

正在调整与纽约时间相同的显示时刻……</p>

```
DateTimeZone timeZone_NewYork = DateTimeZone.forID( "America/New_York" );
DateTime dateTimeNewYork = dateTimeIndia.withZone( timeZone_NewYork ); // Same moment, different wall-clock time. 
```

仍然是同一时刻，但在[UTC](https://en.wikipedia.org/wiki/Coordinated_Universal_Time)（无时区偏移）。

```
DateTime dateTimeUtc = dateTimeIndia.withZone( DateTimeZone.UTC ); 
```

# 使用正确的时区名称

避免使用 3-4 个字母的时区代码。它们既不是标准化的，也不是唯一的。`IST`例如，您可以表示爱尔兰标准时间或印度标准时间。使用[正确的时区名称](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones)。

# c# - 以 mm_dd_yyyy 格式解析日期

> ID：15408529
> 
> 赞同：1
> 
> 时间：2013-03-14T11:53:27.933
> 
> 标签：c#, parsing, date

我需要以以下格式解析日期。mm_dd_yyyy 我知道我可以这样做

```
var dateString = "20050802";
var date = myDate = DateTime.ParseExact(dateString,
                                    "yyyyMMdd",
                                    System.Globalization.CultureInfo.InvariantCulture); 
```

然后将 - 替换为下划线字符。但是还有其他方法可以做同样的事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T12:12:43.743

所以有什么问题？
只需制作适当的格式字符串：`MM_dd_yyyy`.

```
var dateTime = DateTime.ParseExact("08_02_2005", "MM_dd_yyyy", CultureInfo.InvariantCulture); // from string to DateTime
var s = dateTime.ToString("MM_dd_yyyy"); // from DateTime to string 
```

# java - Camel 中 LoggingErrorHandler 的意外行为

> ID：15408530
> 
> 赞同：2
> 
> 时间：2013-03-14T11:53:35.710
> 
> 标签：java, apache-camel

所以，我有一个骆驼上下文，`DeadLetterChannel`在上下文级别没有重新传递。在上下文中，我有一条路线：

```
from("direct:input")
     .routeId("enrichHeader")
     .setHeader("myHeader").constant("someValue)
     .to("direct:output"); 
```

我有一个单元测试，我会在其中`interceptSendToEndpoint("direct:output")`引发异常。

然后在单元测试中我做`producerTemplate.sendBody(theBody)`。

现在，如上面配置的异常消息被发送到死信通道。一切都好。但是，如果我配置 a`loggingErrorHandler`我会得到奇怪的行为。因此，如果我将上述路线更新如下：

```
from("direct:input")
     .routeId("enrichHeader")

     .errorHandler(
        loggingErrorHandler("com.myco.myproject")
             .level(LoggingLevel.WARN))

     .setHeader("myHeader").constant("someValue)
     .to("direct:output"); 
```

当我现在运行测试时，我得到了两个意想不到的行为。首先，异常仍然记录在 level`ERROR`而不是配置的`WARN`. 其次，异常被传播回`producerTemplate.sendBody(theBody)`调用。

一方面，日志记录`ERROR`显然很奇怪。另一个看起来很奇怪的部分是处理程序正在传播异常。我原以为它会将其标记为已处理并完成。

这是预期的行为吗？似乎`LoggingErrorHandler`缺少文档。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T00:15:03.403

`LoggingErrorHandler`除了记录异常之外什么都不做。如果你想跳过异常，你必须定义一个策略如下

```
onException(com.myco.myproject.MyException.class).continued(true); 
```

或者你必须在 java中使用`doTry()..doCatch()`just like块。`try{...} catch{...}`

例如：

```
 from("direct:input").routeId("enrichHeader")
    .doTry()
        .setHeader("myHeader").constant("someValue)
        .to("direct:output")
    .doCatch(MyException.class)
        .process(new MYExceptionLoggerAndHandler())
   .end(); 
```

# c# - 查看解决方案的整个类结构

> ID：15408533
> 
> 赞同：0
> 
> 时间：2013-03-14T11:53:43.360
> 
> 标签：c#, visual-studio-2010

我是一名实习程序员，并且有一个大型项目需要学习和开发。所以，我想知道 Visual Studio 2010 中是否有任何工具或功能可以获得完整的类结构（不是类视图）；换句话说，我需要对解决方案的构建方式以及类和对象的使用方式有一个很好的了解。

有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:51:27.853

Right click on you project and click on the View Class diagram. this will show the classes structure to you. that will be easier to understand the structure of the project

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T11:58:17.920

菜单 > 视图 > 对象浏览器

这为您提供了所有已创建并在项目中引用的类和对象的树状视图

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T11:56:02.560

UML 模型帮助你理解软件系统 请看一下[这个](http://msdn.microsoft.com/en-us/library/vstudio/dd409445.aspx)

希望这可以帮助

# android - 用android打包大型数据库

> ID：15408537
> 
> 赞同：2
> 
> 时间：2013-03-14T11:54:10.287
> 
> 标签：android

我正在寻找一个带有 android 应用程序的大型 sqlite 数据库，大约 200-300MB。根据我的阅读，我的选择是将它放在资产文件夹中，并在运行时将其处理出来，从而导致重复数据，或者在运行时从 Web 下载数据库。我不想为这个应用程序创建一个网络服务器，所以我想创建一个单独的应用程序来安装数据库来解决数据重复问题。

所有这些都很糟糕，我想知道是否有更好的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T12:41:30.350

首先，我认为您不允许将 200-300MB 的数据库放在资产文件夹中并将其作为单个 apk 分发，因为 apk 文件大小的硬限制是（根据谷歌的文档）50 MB，我怀疑您的数据库将压缩到那么远。Google 引入了“APK 扩展文件”，用于使用您的 apk 打包大文件。您可以在此处阅读所有相关信息：http: [//developer.android.com/google/play/expansion-files.html](http://developer.android.com/google/play/expansion-files.html)

我认为（但我自己没有扩展文件的经验）这不会解决您提到的由于需要复制数据库文件而必须处理重复数据的问题，但至少在某种意义上这会对您有所帮助您不必在自己的网络服务器上托管数据库文件。我快速浏览了我上面给出的链接上的文档，它清楚地指出，当你完成扩展文件时，你不应该扔掉它们，所以这部分没有帮助。

当然，对于“设置自己的网络服务器部分”：我什至不会费心设置自己的网络服务器。有很多派对可以为您提供一些文件托管服务。可能您将不得不为带宽付费，但是嘿..如果人们下载您的数据库文件很多，这也意味着您的应用程序运行良好；-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T23:15:55.013

我测试[apk 扩展文件](http://developer.android.com/google/play/expansion-files.html)。我创建了一个带有 100 MB sqlite 数据库的测试应用程序，将 apk 和数据库上传到 Play 商店。然后我将应用程序下载到手机上，同时下载了数据库。数据库被自动重命名并放置在可公开访问的目录中：

```
/storage/sdcard0/Android/obb/com.example.app/main.1.com.example.app.obb 
```

该应用程序能够毫无问题地打开数据库，但需要外部读写权限。新的和原来的数据库是一点一点的，一样的。这似乎是我用例的最佳解决方案。

几个问题，新的android开发者控制台不支持上传扩展文件，所以需要使用旧的。Google 只允许 2 个扩展文件，因此对于某些用例来说这可能是个问题。谷歌说你不能重命名或删除文件，如果文件没有自动安装，你的应用必须能够从谷歌本身下载文件。

# c++ - 如何从其他控制台程序获取输出

> ID：15408539
> 
> 赞同：0
> 
> 时间：2013-03-14T11:54:16.767
> 
> 标签：c++, windows, console

我正在开发一个程序，它可以抓取发送到另一个程序控制台的所有内容。我没有访问该程序源的权限，我只需要获取它的输出。

我不知道如何在 Windows 上的 C++ 中执行此操作。

# ruby-on-rails - 在 input 和 =f.input 之间使用 simple_form 时遇到问题

> ID：15408542
> 
> 赞同：1
> 
> 时间：2013-03-14T11:54:26.823
> 
> 标签：ruby-on-rails, ruby, twitter-bootstrap, simple-form, slim-lang

![在此处输入图像描述](../Images/df5914d9b2dbc3e1fb34553796fbff80.png)

这是以下苗条 simple_form 表单的屏幕截图。这显示正确。但这给了我类型 nil 错误。

```
 = simple_form_for :identity, :url => '/auth/identity/register' do |f| 
  h2 Create New Account

  .form-actions
    .control-group
      .controls
        .input-prepend
          span.add-on
            i.icon-user
          input type="text", label:false, :class => "inline"

    .control-group
      .controls
        .input-prepend
          span.add-on
            i.icon-user
          input type="text" id="" name="" f:email

    .control-group
      .controls
        .input-prepend
          span.add-on
            i.icon-user
          input type="text" id="" name="" f:password

    .control-group
      .controls
        .input-prepend
          span.add-on
            i.icon-user
          input type="text" id="" name="" f:password_confirmation

    .control-group
        .controls
          = f.button :submit, :class => 'btn-primary' 
```

![在此处输入图像描述](../Images/7e49f768320e969d9828aaa2b6e419f1.png)

这是以下代码的屏幕截图。这很好用（不给出 nil 类型错误。因为它需要模型字段。）但是外观被打破了。

```
= simple_form_for :identity, :url => '/auth/identity/register' do |f| 
  h2 Create New Account

  .form-actions
    .control-group
      .controls
        .input-prepend
          span.add-on
            i.icon-user
          =f.input :name, label:false

    .control-group
      .controls
        .input-prepend
          span.add-on
            i.icon-user
          = f.input :email, label:false

    .control-group
      .controls
        .input-prepend
          span.add-on
            i.icon-user
          = f.input :password, label:false

    .control-group
      .controls
        .input-prepend
          span.add-on
            i.icon-user
          = f.input :password_confirmation, label:false

    .control-group
        .controls
          = f.button :submit, :class => 'btn-primary' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T13:55:26.970

您可以使用安装生成器获取 simple_form 以生成 twitter 引导表单

```
rails generate simple_form:install --bootstrap 
```

您不必这样做，但它会使您的表单更简单！请参阅文档[https://github.com/plataformatec/simple_form](https://github.com/plataformatec/simple_form)

然后回答您的实际问题，您可以像这样添加您的用户图标

```
= f.input :email, :wrapper => :append do
  = f.input_field :email
   %span.add-on>
     %i.icon-user 
```

附加组件之后的 > 停止 haml 放入一个新行，该行将分隔跨度和输入。有关更多详细信息，请参阅此答案[使用 simple_form 附加/前置引导图标](https://stackoverflow.com/questions/10547502/append-prepend-bootstrap-icons-with-simple-form)

# iphone - 从浏览器上传图像很好，但从 iphone 上传时出现问题

> ID：15408544
> 
> 赞同：0
> 
> 时间：2013-03-14T11:54:31.377
> 
> 标签：iphone, image-uploading

我正在通过浏览器（简单的 html 表单）将图像上传到托管服务器，可以毫无问题地上传图像，但是当我尝试通过 iPhone 上传时，它不会将图像发布到服务器。这是我的代码：

```
 NSString *urlString = @"http://example.com/fileupload.php";

    NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];
    [request setURL:[NSURL URLWithString:urlString]];
    [request setHTTPMethod:@"POST"];

    NSString *boundary = @"---------------------------14737809831466499882746641449";
    NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
    [request addValue:contentType forHTTPHeaderField: @"Content-Type"];

    NSMutableData *body = [NSMutableData data];
    [body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithString:[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"userfile\"; filename=\"a.jpg\"\r\n"]] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[@"Content-Type: application/octet-stream\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[NSData dataWithData:imgData]];
    [body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    [request setHTTPBody:body];

    NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
    NSString *returnString = [[[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding] autorelease];

    NSLog(@"Response: %@",returnString); 
```

我在不同的托管服务器上使用相同的代码并且在那里工作正常。我已经检查过该文件夹有 777 权限。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:08:12.190

删除下面的行，它应该可以工作

```
 NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
[request addValue:contentType forHTTPHeaderField: @"Content-Type"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:22:53.307

首先选择一张图片

代码 ：：

```
@property(nonatomic, retain) UIImage *capturedImg;

-(void)imagePickerController:(UIImagePickerController*)picker didFinishPickingMediaWithInfo:(NSDictionary*)info
{

   NSData *dataImage = UIImageJPEGRepresentation([info objectForKey:@"UIImagePickerControllerOriginalImage"], 1); 
   capturedImg = [UIImage imageWithData:dataImage];
} 
```

对于上传图片，

代码 ：：

```
NSData *imgData = UIImageJPEGRepresentation(capturedImg, 0.8); 
```

并且，这`imgData`将用于将图像作为数据上传

改变 ：：

```
[body appendData:[[NSString stringWithString:[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"file\"; filename=\"a.jpg\"\r\n"]] dataUsingEncoding:NSUTF8StringEncoding]]; // 'userfile' to 'file' 
```

希望对您有所帮助。

谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T16:35:00.230

非常感谢大家的帮助，但问题出在服务器端。我不知道为什么服务器有时会拒绝该文件，有时它工作正常。

再次感谢。

# php - php整数变量传入mysql查询？

> ID：15408546
> 
> 赞同：0
> 
> 时间：2013-03-14T11:54:36.997
> 
> 标签：php, mysql

是否可以在 mysql 查询中传递 php 整数变量？

像`$g = 44 ;`

```
$sql="
    SELECT
        idtransactiondetails,
        idtransactionmaster,
        T.idacledger,
        acledgername,
        transactionamount,
        chequeno 
    from transactiondetails T,
         acledger L 
    where 
        T.idacledger=L.idacledger 
        and idtransactionmaster=int()$g"; 
```

但万一`$g`它不工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:56:09.907

```
$sql="SELECT idtransactiondetails,idtransactionmaster,T.idacledger,acledgername,transactionamount,chequeno from transactiondetails T,acledger L where T.idacledger=L.idacledger and idtransactionmaster="`.$g;` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T11:56:20.190

试试这个

```
$sql="SELECT idtransactiondetails,idtransactionmaster,T.idacledger,acledgername,transactionamount,chequeno from transactiondetails T,acledger L where T.idacledger=L.idacledger and idtransactionmaster=$g"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T11:56:21.080

[连接](http://php.net/manual/en/language.operators.string.php)字符串：

```
 $sql = "SELECT idtransactiondetails, idtransactionmaster, T.idacledger, acledgername, transactionamount, chequeno 
FROM transactiondetails T, acledger L 
WHERE T.idacledger = L.idacledger 
AND idtransactionmaster=" . (int) $g. ";"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T11:58:50.950

不需要在 Query 中使用 int，

```
$sql="SELECT idtransactiondetails,idtransactionmaster,T.idacledger,acledgername,transactionamount,chequeno from transactiondetails T,acledger L where T.idacledger=L.idacledger and idtransactionmaster= $g "; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T12:00:19.087

如果您试图避免 sql 注入 & all，请确认您的变量包含整数值

```
$g = "50'a+_)(*&^%$#@!";
$integer = intval($g); // 50
$sql = "SELECT idtransactiondetails,idtransactionmaster,T.idacledger,acledgername,transactionamount,chequeno from transactiondetails T,acledger L where T.idacledger=L.idacledger and idtransactionmaster = '$integer'"; 
```

# jquery-ui - jQuery UI 选项卡在表达式引擎网站中不起作用

> ID：15408556
> 
> 赞同：1
> 
> 时间：2013-03-14T11:55:12.157
> 
> 标签：jquery-ui, expressionengine, jquery-ui-tabs

我一直在尝试让 jquery ui 为我想在其中添加标签的区域工作，并且过去几天一直在尝试但没有运气！

这个想法是显示或不显示选项卡，这取决于是否有内容。同样对于内容区域，当没有条目时，也不会创建相关的 html。

开发站点的地址是[http://garden.paperfish.co/index.php/problem-solving/roses](http://garden.paperfish.co/index.php/problem-solving/roses)

代码是：

```
<div id="tabs">
    <ul>
{exp:channel:entries channel="plant-categories"}
{reverse_related_entries channel="diseases" limit="1" require_entry="yes"}
    <li><a href="#tabs-1">ασθένειες</a></li>
{/reverse_related_entries}
{/exp:channel:entries}

{exp:channel:entries channel="plant-categories"}
{reverse_related_entries channel="pests" limit="1" require_entry="yes"}
    <li><a href="#tabs-2">εχθροί</a></li>
{/reverse_related_entries}
{/exp:channel:entries}

{exp:channel:entries channel="plant-categories"}
{reverse_related_entries channel="nutrition" limit="1" require_entry="yes"}
        <li><a href="#tabs-3">τροφοπενίες</a></li>
{/reverse_related_entries}
{/exp:channel:entries}

    <li><a href="#tabs-4">όλα</a></li>

</ul>
{exp:channel:entries channel="plant-categories"}
{reverse_related_entries channel="diseases" limit="1" require_entry="yes"}
    <div id="#tabs-1">diseases</div>
{/reverse_related_entries}
    {/exp:channel:entries}

{exp:channel:entries channel="plant-categories"}
{reverse_related_entries channel="pests" limit="1" require_entry="yes"}
    <div id="#tabs-2">pests</div>
{/reverse_related_entries}
{/exp:channel:entries}

{exp:channel:entries channel="plant-categories"}
{reverse_related_entries channel="nutrition" limit="1" require_entry="yes"}
    <div id="#tabs-3">nutrition</div>
{/reverse_related_entries}
{/exp:channel:entries}

    <div id="#tabs-4">all</div>
</div> 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T12:01:08.880

您可以尝试删除内容 div 的 id 前面的哈希值吗

改变

```
<div id="#tabs-1">
    diseases
</div> 
```

到

```
<div id="tabs-1">
    diseases
</div> 
```

# javascript - 顶部对话框。更改背景颜色：（编辑）到整个文档

> ID：15408562
> 
> 赞同：1
> 
> 时间：2013-03-14T11:55:21.047
> 
> 标签：javascript, jquery, asp.net, ajax

```
 <script>
  $(function() {
    $( "#dialog" ).dialog();
  });
  </script>
</head>
<body>

<div id="dialog" title="Basic dialog">
  <p>This is the default dialog which is useful for displaying information. The dialog window can be moved, re-sized and closed with the 'x' icon.</p>
</div> 
```

在您正在查看的页面顶部的屏幕上显示一个对话框。

我想在对话框出现时将背景页面变灰。我查看了文档，但没有看到任何对背景颜色的引用。

[http://api.jqueryui.com/dialog/](http://api.jqueryui.com/dialog/)

任何帮助，将不胜感激。

* * *

**编辑：** 感谢您的帮助...这已经解决了问题但是我刚刚发现如果用户在对话框可见时向下滚动屏幕，正在显示的页面的新部分将变灰。

此 modal:true 似乎仅适用于当前正在查看的内容 - 有谁知道将其应用于整个页面的方法？再次感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T12:01:27.677

像这样使用它：

```
<script>
  $(function() {
   $( "#dialog" ).dialog({modal: true});
 });
</script> 
```

基本上 modal:true 告诉小部件是否必须在背景中显示一些叠加层，否则它将作为一个简单的对话框打开。

[你可以在这里](http://api.jqueryui.com/dialog/#option-modal)找到文档

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T12:00:12.707

看看背景 css，它有`ui-widget-overlay`类：

```
.ui-widget-overlay {
    background: #aaaaaa/*{bgColorOverlay}*/ url(images/ui-bg_flat_0_aaaaaa_40x100.png)/*{bgImgUrlOverlay}*/ 50%/*{bgOverlayXPos}*/ 50%/*{bgOverlayYPos}*/ repeat-x/* {bgOverlayRepeat}*/;
    opacity: .3/*{opacityOverlay}*/;
    filter: Alpha(Opacity=30)/*{opacityFilterOverlay}*/;
} 
```

更改...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T12:02:03.293

将`modal`属性设置为 true（如[文档](http://jqueryui.com/dialog/#modal)所示）：

```
$(function() {
    $("#dialog").dialog({
        modal: true
    });
}); 
```

# c# - 什么是'---从客户端到服务器的转换---'？

> ID：15408563
> 
> 赞同：0
> 
> 时间：2013-03-14T11:55:27.947
> 
> 标签：c#, .net, visual-studio-2010

在附加到 w3wp.exe 并运行我的应用程序时，我在调用堆栈中得到了一个特定的行。请看图片： ![在此处输入图像描述](../Images/9eb15bd4278d3caae1c6380e6fffb983.png)

我想知道以蓝色突出显示的行的重要性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T13:15:09.557

这意味着您处于 2 个不同的堆栈“上下文”中。我通过调用 Web 服务重现了您的问题。我为我的客户端（Web 应用程序）获得 1 个堆栈，为我的服务获得一个堆栈。

在您的情况下，您的调试器未附加在外部进程上。

这是它的打印屏幕。（抱歉是法语）

![从客户端过渡到服务器](../Images/9940fb387e403323b1011cac461962a9.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:10:35.180

这可能与 SoapServerMessage 有关，如此[处所述](http://social.msdn.microsoft.com/Forums/en-US/asmxandxml/thread/0aa3e4ca-5396-4158-b62b-a6e048773f31)

# symfony - Symfony2 routing.yml 中的可选主机

> ID：15408564
> 
> 赞同：3
> 
> 时间：2013-03-14T11:55:35.777
> 
> 标签：symfony, subdomain

我正在为我工​​作的组织开发一个网站。我们的主站点是`www.mainsite.com`，但是我们有几个子站点“继承”了主站点（每个站点访问相同的数据和控制器，只是看起来不同）。例如`sub1.mainsite.com`，`sub2.mainsite.com`等等。

我已经开始为主网站编写代码，并使用 Symfony 2.2 的新子域/主机路由功能，我希望能够根据子域以编程方式更改网站的外观。

如果我添加`host: "{site}.mainsite.com"`到我的一条路线，我可以成功进入`{site}`我的控制器。但是，如果没有子域，则路由不匹配。这可以通过添加一条没有`host`选项的新路线来解决，但这意味着我将路线翻倍，我真的不想这样做。

本质上，我真正需要的是能够基于子域（或无子域）更改网站的外观和它使用的菜单。

有谁知道我该怎么做？

示例路线：

```
news:
    pattern:  /news/{page}
    host: "{site}.mainsite.com"
    defaults: { _controller: MainSiteNewsBundle:News:index, page: 1, site:main }
    requirements:
        page:  \d+
        site: sub1|sub2 
```

另外，顺便说一句，如果*我*能让这个工作，我可以在整个站点范围内应用这个规则而不必修改我的每条路线吗？

# git - 达到一定数量的添加/删除文件后，Git 停止将文件解析为重命名

> ID：15408565
> 
> 赞同：8
> 
> 时间：2013-03-14T11:55:38.253
> 
> 标签：git, move

我有在 Git 中版本化的大型 ant 项目。我们目前正在将构建工具更改为 Maven。这意味着将所有java源文件移动到不同的目录结构中。我创建了 bash 脚本来将 java 源代码移动到一个目录树中，并将其他资源移动到另一个目录中。树。我正在一个接一个地转换一个模块（源代码集）。

我`git status`在移动每个模块后运行，起初我看到`RENAMED`每个文件的正确状态。

在我移动另一个模块并且移动的文件数量达到**大约 100**后，git 停止识别移动的文件并将它们解耦。这意味着在运行后`git status`我会看到每个文件（之前正确识别的事件）两次。一个`DELETED`走旧路，一个`NEW FILE`走新路。

是否有限制自动解析为重命名的文件数量？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T12:03:24.430

你的价值是多少

```
diff.renameLimit 
```

?

尝试设置

```
git config diff.renameLimit 0 
```

禁用限制或尝试设置一个非常高的值。

# c# - 在 C# 中以编程方式配置 Win 7 网络适配器

> ID：15408566
> 
> 赞同：1
> 
> 时间：2013-03-14T11:55:46.860
> 
> 标签：c#, windows, networking, system.security

我想通过 c# 以编程方式配置 Windows 7 中的所有活动网络适配器。

我试过以下代码：

```
string newIPAddress = "100.200.100.11";
        string newSubnetMask = "255.255.255.1";
        string[] newGateway = { "100.200.100.1" };

        ManagementObjectSearcher m = new ManagementObjectSearcher();
        m.Query = new ObjectQuery("Select * from Win32_NetworkAdapterConfiguration Where IPEnabled = True");
        foreach (ManagementObject mo in m.Get())
        {
            try
            {
                ManagementBaseObject setIP;
                ManagementBaseObject newIP = mo.GetMethodParameters("EnableStatic");

                newIP["IPAddress"] = new string[] { newIPAddress };
                newIP["SubnetMask"] = new string[] { newSubnetMask };

                setIP = mo.InvokeMethod("EnableStatic", newIP, null);
                mo.InvokeMethod("SetGateways", new object[] { newGateway, new string[] { "1" } });
                mo.InvokeMethod("SetDNSServerSearchOrder", new object[] { new string[] { "100.100.100.100" } });
            }
            catch (Exception)
            {
                throw;
            }
        } 
```

但它只是更新默认网关并没有改变其他任何东西。

我也使用过 netsh 命令：

```
NetworkInterface[] adapters = NetworkInterface.GetAllNetworkInterfaces();
        foreach (NetworkInterface adapter in adapters)
        {
            Console.WriteLine(adapter.Name);
            Process p = new Process();
            ProcessStartInfo psi = new ProcessStartInfo("netsh", "interface ip set address \"" + adapter.Name + "\" static 192.168.0.10 255.255.255.0 192.168.0.1 ");
            psi.UseShellExecute = false;
            p.StartInfo = psi;
            p.Start();

        } 
```

但它适用于第一个适配器，之后它会出错：

“DHCP服务配置失败，接口可能断开。”

如何在 C# 中配置所有适配器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-26T14:46:42.357

我知道这篇文章很旧，但我相信您遇到了这个问题，因为您正在尝试将多个适配器的 IP 设置为**完全相同**的IP。

# c# - 无法正确获取 ACL

> ID：15408567
> 
> 赞同：0
> 
> 时间：2013-03-14T11:55:53.043
> 
> 标签：c#, pinvoke

我正在尝试获取共享文件夹的 ACL。获取安全描述符的代码如下：

```
private static SECURITY_DESCRIPTOR GetSecurityDescriptor(string path)
{
    var sdUtil = new ADsSecurityUtility();
    Byte[] temp = (Byte[])sdUtil.GetSecurityDescriptor(path, (int)ADS_PATHTYPE_ENUM.ADS_PATH_FILESHARE, (int)ADS_SD_FORMAT_ENUM.ADS_SD_FORMAT_RAW);
    IntPtr ptr = (IntPtr)0;
    SECURITY_DESCRIPTOR sd;
    try
    {
        ptr = Marshal.AllocHGlobal(temp.Length);
        Marshal.Copy(temp, 0, ptr, temp.Length);
        sd = (SECURITY_DESCRIPTOR)Marshal.PtrToStructure(ptr, typeof(SECURITY_DESCRIPTOR));
        return sd;
    }
    catch (Exception)
    {
        throw new Exception("Couldn't get security descriptor");
    }
    finally
    {
        Marshal.FreeHGlobal(ptr);
    }
} 
```

SD没问题，我没问题。然后我试图从 SD 中获取 DACL 和 SACL。

```
private static List<ACL> GetAcls(SECURITY_DESCRIPTOR sd)
{
    List<ACL> result = new List<ACL>(2);
    ACL temp = new ACL();
    int daclPresent = 0;
    int daclDefaulted = 0;
    try
    {
        int res = PInvoke.GetSecurityDescriptorDacl(ref sd, ref daclPresent, ref temp, ref daclDefaulted);
        result.Add(temp);
        temp = new ACL();
    }
    catch (Exception) { }
    try
    {
        int res = PInvoke.GetSecurityDescriptorSacl(ref sd, ref daclPresent, ref temp, ref daclDefaulted);
        result.Add(temp);
    }
    catch (Exception) { }
    return result;
} 
```

外部函数定义如下：

```
 [DllImport("advapi32.dll")]
    public static extern int GetSecurityDescriptorDacl(
        [MarshalAs(UnmanagedType.Struct)] ref SECURITY_DESCRIPTOR pSecurityDescriptor,
        ref int lpbDaclPresent,
        [MarshalAs(UnmanagedType.Struct)] ref ACL pDacl,
        ref int lpbDaclDefaulted
    );

    [DllImport("advapi32.dll")]
    public static extern int GetSecurityDescriptorSacl(
        [MarshalAs(UnmanagedType.Struct)] ref SECURITY_DESCRIPTOR pSecurityDescriptor,
        ref int lpbDaclPresent,
        [MarshalAs(UnmanagedType.Struct)] ref ACL pDacl,
        ref int lpbDaclDefaulted
    ); 
```

当我检查 SD 实例的属性时，我看到以下内容：

```
sd.Dacl
{Permission.ACL}
    AceCount: 83886080
    AclRevision: 169
    AclSize: 1281
    Sbz1: 0
    Sbz2: 21

sd.Sacl
{Permission.ACL}
    AceCount: 6
    AclRevision: 20
    AclSize: 9961474
    Sbz1: 0
    Sbz2: 2359297 
```

ACL 总共包含 6 个 ACE。所以看起来 SACL 包含所有这些。但是，MS 不建议使用这些属性。而是应该使用 GetSecurityDescriptorDacl 和 GetSecurityDescriptorSacl。所以我使用它们。并且看到 DACL 中的 ACE 数为 0，而 SACL 中的 ACE 数也为 0。

所以问题是：如何从安全描述符中正确获取所有 ACE？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:58:22.957

您必须将 SECURITY_DESCRIPTOR 视为不透明句柄。您不能像在线上所做的那样转换为一个：

```
 sd = (SECURITY_DESCRIPTOR)Marshal.PtrToStructure(ptr, 
          typeof(SECURITY_DESCRIPTOR)); 
```

当您执行上述转换时，您丢失了所有所有者、组、DACL 和 SACL 信息，因为您有一个自相关的 SECURITY_DESCRIPTOR 但您没有将数据与结构的定义一起编组。

只需更改各种 API 调用（即 GetSecurityDescriptorDacl 等）的声明以获取 byte[] 而不是 ref SECURITY_DESCRIPTOR 并传入您从 ADsSecurityUtility 收到的 byte[]。

# android - 为android创建日期类型的文本字段

> ID：15408580
> 
> 赞同：4
> 
> 时间：2013-03-14T11:56:14.530
> 
> 标签：android, jquery, html, css, jquery-mobile

我正在为 android 创建一个 HTML5 应用程序。

我正在使用带有以下标头的 jQuery mobile：

```
<link rel="stylesheet" href="../../lib/jquery.mobile-1.3.0.min.css" />
<script src="../../lib/jquery-1.8.2.min.js"></script>    
<script src="../../lib/jquery.mobile-1.3.0.min.js"></script> 
```

[我添加了jQuery mobile 演示站点](http://view.jquerymobile.com/1.3.0/docs/widgets/textinputs/)中描述的输入字段：

```
<input type="date" data-clear-btn="false" name="date-1" id="date-1" value=""> 
```

但是，我只是得到一个文本框，而不是日期选择器。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T12:15:14.770

首先只有 Chrome 会显示 datapicker 组件。其他桌面浏览器将失败，因此不要依赖此实现。

第二件事，jQuery Mobile 没有 datepicker 组件。因此，您将需要使用 3rd 方插件。不要依赖 jQuery UI datepicker 插件，因为它们没有针对移动使用进行优化。

更好地使用一些 3rd 方 jQuery Mobile 插件：

[日期框](http://dev.jtsage.com/jQM-DateBox2/)

和

[移动卷轴](http://code.google.com/p/mobiscroll/)

以下是我的一些答案和示例如何使用 jQM 数据选择器：

[如何仅在字段焦点上显示日期选择器？](https://stackoverflow.com/questions/14443502/how-to-show-datepicker-on-field-focus-only/14444339#14444339)

[jQuery mobile (Android) 的日期选择器](https://stackoverflow.com/questions/13768372/datepicker-for-jquery-mobile-android/13779992#13779992)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T12:06:13.267

只有某些浏览器会显示日期选择器。这篇文章可能有助于您检测它是否会：

[HTML5 类型检测和插件初始化](https://stackoverflow.com/questions/4159838/html5-type-detection-and-plugin-initialization)

如果浏览器不支持 datepicker 那么你可以添加一个自定义 jquery ui datepicker

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T12:05:40.817

当然，这是您需要初始化日期选择器的文本字段：

你需要一个 jquery ui 库：

```
 <script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>

$(document).on('pageinit', function(){
    $("#date-1").datepicker();
}); 
```

试试这个，看看是否有帮助。

# matlab - 从结构创建 simulink 总线

> ID：15408584
> 
> 赞同：1
> 
> 时间：2013-03-14T11:56:18.470
> 
> 标签：matlab, simulink, bus

我有以包含 MATLAB 时间序列对象的分层结构形式存储的测量数据。例如：

```
MyData
  - TimeSeries1
  - TimeSeries2
  - MyHierarchicalData
     -- TimeSeries3 
```

为了在 Simulink 中使用这些，我使用了一个 from file 块，它从单个文件中读取这些结构。但是，要从中选择信号，总线选择器块需要相应的总线对象。由于总线对象或多或少对应于结构，我想知道是否可以从我的结构化时间序列数据中生成总线对象。如果总线仅包含几个变量，手动执行此操作不会有问题，但总线包含大约 250 个元素。

我的第一个猜测是 Simulink API，但我认为这个问题发生得更频繁，并且存在更简单的解决方案。如果没有，而且我走错了路，我也会很感激一些反馈。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-17T16:45:13.380

您可以参考我发布给我自己的（有点相似）问题的答案： [https ://stackoverflow.com/a/17152383/1710688](https://stackoverflow.com/a/17152383/1710688)

由于您已经拥有时间序列对象的结构，因此您需要使用该函数`fieldnames`（[请参阅 MATLAB 文档](http://www.mathworks.com/help/matlab/ref/fieldnames.html)）来获取每个时间序列对象的值。您具有层次结构，因此您还需要使用该函数`class`（[请参阅 MATLAB 文档](http://www.mathworks.com/help/matlab/ref/class.html)）来检查它是时间序列对象还是结构对象，在这种情况下，您需要再次查看其字段名。我不太确定如何创建分层信号总线对象，但希望这个关于[使用总线对象](http://www.mathworks.com/help/simulink/ug/using-bus-objects.html)的链接可以提供帮助。

希望有帮助。

# c# - JSON.NET：反序列化包含从接口派生的对象列表的类

> ID：15408588
> 
> 赞同：4
> 
> 时间：2013-03-14T11:56:22.257
> 
> 标签：c#, json.net, deserialization

我在反序列化我的对象时遇到了麻烦。它包含以下属性：

```
public List<IShape> Shapes { get; set; }; 
```

JSON.NET 反序列化器总是告诉我，无法实例化接口。

我有几个类实现了实现 IShape 接口的接口，例如`Polyline -> IPolyline -> IShape`。我已经尝试了两种解决方案：

*   [https://stackoverflow.com/a/8031283/1525505](https://stackoverflow.com/a/8031283/1525505)
*   [https://stackoverflow.com/a/12769061/1525505](https://stackoverflow.com/a/12769061/1525505)

但是我得到了同样的异常，即 IShape 不能被实例化，被抛出。

`TypeNameHandling.Auto`我用,序列化对象`TypeNameHandling.All`也无济于事，即使我使用上面链接的帖子中提到的转换器。

有谁知道这个问题的解决方案？如果需要一些代码，我很乐意发布它。

这是生成的 JSON 示例。

```
"$type": "SketchModel.Layer, SketchModel",
        "Id": 57865477,
        "Shapes": {
          "$type": "System.Collections.Generic.List`1[[SketchModel.Shapes.AbstractShapes.IShape, SketchModel]], mscorlib",
          "$values": [
            {
              "$type": "SketchModel.Shapes.Polyline, SketchModel", 
```

此行负责该问题：

```
"System.Collections.Generic.List`1[[SketchModel.Shapes.AbstractShapes.IShape, SketchModel]], mscorlib" 
```

它根本不知道如何实例化 IShape。如果我创建一个自定义转换器并让它为每个 IShape 返回一条折线，它可以工作，但不会创建任何其他形状（例如椭圆）。

在 `public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)`自定义转换器中覆盖的方法中，如果我让我打印 objectType 的完整类型名称，它始终是 IShape，而不是其他任何东西......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T12:02:26.850

这个例外是有道理的，因为反序列化器不知道在水合时接口应该代表什么具体类型。

在序列化期间，JSON.NET 允许您对其进行配置以添加一些在这种情况下使用的元数据。 [这个 SO question](https://stackoverflow.com/questions/2254872/using-json-net-converters-to-deserialize-properties)有一个解释如何配置它的答案。

该配置将为反序列化期间使用的 JSON 添加一个类型属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-08T08:13:10.487

我确实遇到了这个问题，只有通过为 Type 显式提供转换器来解决它。如果我使用注释它不起作用 - 我需要在反序列化时传递转换器 - 基本上像这样：

```
state = JsonConvert.DeserializeObject<StateImpl>((String)stateObject, new JsonConverter[] { new StatePersistenceStateEntryConverter(), new StatePersistenceUserInteractionConverter() }); 
```

我的 StateImpl 对象包括以下属性：

```
 [DataMember]
    [JsonProperty("stateEntries", TypeNameHandling = TypeNameHandling.Auto)]
    public List<IStateEntry> StateEntries
    {
        get;
        set;
    }

    [DataMember]
    [JsonProperty("precommitStateEntry", TypeNameHandling = TypeNameHandling.Auto)]
    public IPrecommitStateEntry PrecommitStateEntry
    {
        get;
        set;
    } 
```

IPrecommitStateEntry 扩展了 IStateEntry 接口（仅供参考，以防您想知道为什么转换器中有额外的逻辑）。

另外 - 在我的 IStateEntry 对象中，我有一个类似的子问题：

```
 [DataMember]
    [JsonProperty("userInteractions", TypeNameHandling = TypeNameHandling.Auto)]
    public List<IUserInteraction> UserInteractions
    {
        get;
        set;
    } 
```

因此，我的对象具有 IStateEntry 的子列表属性，并且 IStateEntry 具有 IUserInteraction 的进一步子列表。我的转换器如下：

```
public class StatePersistenceStateEntryConverter : CustomCreationConverter<IStateEntry>
{
    public override IStateEntry Create(Type objectType)
    {
        if (objectType == typeof(IPrecommitStateEntry))
        {
            return new PrecommitStateEntry();
        }
        else
        {
            return new StateEntry();
        }
    }
} 
```

和...

```
public class StatePersistenceUserInteractionConverter : CustomCreationConverter<IUserInteraction>
{
    public override IUserInteraction Create(Type objectType)
    {
        return new UserInteraction();
    }
} 
```

从字面上看，他们所做的只是创建该特定对象实现的实例。

所以我不知道为什么需要转换器，因为显然可以实例化 List ——而不是单独的 IStateEntry。显然，NewtonSoft 实现中的某个地方存在错误 - 或者我错过了一些基本的东西。

希望有帮助。这对我来说是令人沮丧的几个小时，但现在工作了！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-05T18:38:16.297

在您的 Json 字符串中不包含具体类型，您可以使用 a`JsonConverter`将 an 转换`IList<SomeInterface>`为其具体类型：

### 要反序列化的类：

```
public partial class MovieInfo : IMovieInfo
{
    ~~~~

    [JsonProperty("genres")]
    [JsonConverter(typeof(ListConverter<IGenre, Genre>))]
    public IList<IGenre> Genres { get; set; }

    ~~~~
} 
```

### JsonConverter 示例：

```
public class ListConverter<I, T> : JsonConverter
{
    public override bool CanWrite => false;
    public override bool CanRead => true;
    public override bool CanConvert(Type objectType)
    {
        return objectType == typeof(I);
    }
    public override void WriteJson(JsonWriter writer,
         object value, JsonSerializer serializer)
    {
        throw new InvalidOperationException("Use default serialization.");
    }

    public override object ReadJson(JsonReader reader,
         Type objectType, object existingValue,
         JsonSerializer serializer)
    {
        JArray jsonArray = JArray.Load(reader);
        var deserialized = (List<T>)Activator.CreateInstance(typeof(List<T>));
        serializer.Populate(jsonArray.CreateReader(), deserialized);
        return deserialized as IList<I>;
    }
} 
```

# c# - DateTime 的指定字符串

> ID：15408590
> 
> 赞同：-3
> 
> 时间：2013-03-14T11:56:25.447
> 
> 标签：c#, datetime

如何将字符串“3/14/2013 2:01:18 PM”（不是“03/14/2013 02:01:18 PM”！）解析为 DateTime 格式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T12:00:11.693

在c#中，您可以使用`DateTime.ParseExact`方法：

```
var value = DateTime.ParseExact("3/14/2013 2:01:18 PM", "M/d/yyyy h:mm:ss tt", CultureInfo.CurrentCulture, DateTimeStyles.None); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T12:06:45.343

c#中的使用`DateTime.Parse`方法。Like

```
DateTime dtime = DateTime.Parse("3/14/2013 2:01:18 PM"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T12:01:02.743

好吧，这里有一个列表，可以帮助您了解在**C#**中格式化日期时间的不同方法 看看[这个](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

希望这可以帮助

# c# - DateTime.Now.Ticks 太慢了

> ID：15408591
> 
> 赞同：1
> 
> 时间：2013-03-14T11:56:26.140
> 
> 标签：c#

我正在制作一个可以生成密码的密码生成器。

```
 var listOfCharacters = "abcdefghijklmnopqrstuvwxyz" //the chars which are using
    chars = listOfCharacters.ToCharArray();

  string password = string.Empty;

            for (int i = 0; i < length; i++) 
            {
                int x = random.Next(0, chars.Length); //with random he is picking a random char from my list from position 0 - 26 (a - z)

                 password += chars.GetValue(x); // putting x (the char which is picked) in the new generated password

            }
            if (length < password.Length) password = password.Substring(0, length); // if the password contains the correct length he will be returns

            return password; 
```

我的随机：

```
random = new Random((int)DateTime.Now.Ticks); 
```

我正在寻找一种比使用 Ticks 更快的方法来生成密码，因为它对我来说不够快。我正在寻找一个简单的代码，我可以轻松地将其放入上面的代码中。我只是 C# 的初学者。这样我仍然可以使用 `int x = random.Next(0, chars.Length);`，但不是`Random.next`更快。

编辑：当我想要两个在短时间内生成两个密码时。Ticks 会变慢

我的测试代码：

```
 [TestMethod]
    public void PasswordGeneratorShouldRenderUniqueNextPassword()
    {
        // Create an instance, and generate two passwords
        var generator = new PasswordGenerator();
        var firstPassword = generator.Generate(8); //8 is the length of the password
        var secondPassword = generator.Generate(8);

        // Verify that both passwords are unique
        Assert.AreNotEqual(firstPassword, secondPassword);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:17:44.437

您可以使用[Guid](http://msdn.microsoft.com/en-us/library/system.guid.aspx)的哈希码作为 Random 实例的种子值。对于您的情况，它应该足够随机。

```
random = new Random(Guid.NewGuid().GetHashCode()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:48:19.430

以下程序在我的计算机上生成约 500 个密码/毫秒：

```
class Program
{
    static void Main(string[] args)
    {
        var g = new Generator();
        IEnumerable<string> passwords = new List<string>();
        var startTime = DateTime.Now;
        passwords = g.GetPassword().ToList();
    }
}

class Generator
{
    Random r = new Random(Guid.NewGuid().GetHashCode());
    string randomCharsList;
    const int length = 8;
    const int randomLength = 8000;
    const string listOfCharacters = "abcdefghijklmnopqrstuvwxyz";
    public Generator()
    {
        CreateRandom();
    }

    private void CreateRandom()
    {
        var randomChars = new StringBuilder();
        string password = string.Empty;

        for (int i = 0; i < randomLength + length; i++)
        {
            var random = new Random(i * Guid.NewGuid().ToByteArray().First());
            int x = random.Next(0, listOfCharacters.Length);
            randomChars.Append(listOfCharacters[x]);
        }
        randomCharsList = randomChars.ToString();
    }

    public IEnumerable<string> GetPassword()
    {
        int pos;
        var startTime = DateTime.Now;
        while ((DateTime.Now - startTime).Milliseconds < 1)
        {
            pos = r.Next(randomLength);
            yield return randomCharsList.Substring(pos, length);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T12:05:51.570

在启动时创建`Random`一次实例或使用[`RNGCryptoServiceProvider`](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rngcryptoserviceprovider.aspx).

```
// Create the random instance only once.
private static Random _Random = new Random();

static void Main(string[] args)
{
    var listOfCharacters = "abcdefghijklmnopqrstuvwxyz".ToList();
    var result = new StringBuilder();

    for (int i = 0; i < 20; i++)
    {
        // Consider creating the provider only once!
        var provider = new RNGCryptoServiceProvider();
        // The same is true for the byte array.
        var bytes = new byte[4];

        provider.GetBytes(bytes);
        var number = BitConverter.ToInt32(bytes, 0);
        var index = Math.Abs(number % listOfCharacters.Count);

        result.Append(listOfCharacters[index]);
    }

    Console.WriteLine(result.ToString());
    Console.ReadKey();
} 
```

### 偏差测试

```
 static void Main(string[] args)
    {
        var listOfCharacters = "abcdefghijklmnopqrstuvwxyz".ToList();
        var occurences = new Dictionary<char, int>();

        foreach (var character in listOfCharacters)
        {
            occurences.Add(character, 0);
        }

        var provider = new RNGCryptoServiceProvider();
        var bytes = new byte[4];

        for (int i = 0; i < 1000000; i++)
        {
            provider.GetBytes(bytes);
            var number = BitConverter.ToInt32(bytes, 0);
            var index = Math.Abs(number % listOfCharacters.Count);

            occurences[listOfCharacters[index]]++;
        }

        var orderedOccurences = occurences.OrderBy(kvp => kvp.Value);
        var minKvp = orderedOccurences.First();
        var maxKvp = orderedOccurences.Last();

        Console.WriteLine("Min occurence: " + minKvp.Key + " Times: " + minKvp.Value);
        Console.WriteLine("Max occurence: " + maxKvp.Key + " Times: " + maxKvp.Value);
        Console.WriteLine("Difference: " + (maxKvp.Value - minKvp.Value));

        Console.ReadKey();
    } 
```

结果是最高出现次数和最低出现次数之间的值介于 700 - 800 之间，这意味着偏差在 0.08% 的某个地方，并且具有最大差异的两个字符总是不同的。所以我真的看不到任何偏见。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-23T22:05:21.893

只是想在此处添加一条关于生成随机数时的线程安全问题的注释（例如我们遇到此问题的高容量网络服务器）。

本质上， Random 类不是线程安全的，如果发生冲突，它将返回 0（不是我所期望的），不用说这真的会对你的逻辑造成严重破坏 :) 所以如果在多线程环境中使用，那么请确保保护访问任何共享的 Random 对象。

有关更多详细信息，请参阅[https://msdn.microsoft.com/en-us/library/system.random(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/system.random(v=vs.110).aspx)上的“System.Random 类和线程安全”部分。

希望这可以帮助某人。

# android - 使用 SAX 解析器的多级 xml

> ID：15408592
> 
> 赞同：0
> 
> 时间：2013-03-14T11:56:31.540
> 
> 标签：android, xml-parsing, saxparser

我想从下面的 xml 文件中创建一个列表视图：

```
 <Menu>
    <Project name ="Desktop Application">
<name>Desktop Application</name>
<Description>This is some text.</Description>
<image>2130837532</image>
    <Sub>
        <SubName>PowerISO</SubName>
        <SubDescription>This is some text.</SubDescription>
        <SubImage>2130837555</SubImage>
    </Sub>
    <Sub>
        <SubName>Microsoft Office</SubName>
        <SubDescription>This is some text.</SubDescription>
        <SubImage>2130837549</SubImage>
    </Sub>
    <Sub>
        <SubName>Adobe Reader</SubName>
        <SubDescription>This is some text.</SubDescription>
        <SubImage> 2130837506 </SubImage>
    </Sub>
    <Sub>
        <SubName>Vlc Player</SubName>
        <SubDescription>This is some text.</SubDescription>
        <SubImage>2130837587</SubImage>
    </Sub>
    <Sub>
        <SubName>Picasa Photo Viewer</SubName>
        <SubDescription>This is some text.</SubDescription>
        <SubImage>2130837554</SubImage>
    </Sub>
    <Sub>
        <SubName>KM Player</SubName>
        <SubDescription>This is some text.</SubDescription>
        <SubImage>2130837542</SubImage>
    </Sub>
    <Sub>
        <SubName>Cricket</SubName>
        <SubDescription>This is some text.</SubDescription>
        <SubImage>2130837524</SubImage>
    </Sub>
</Project> 
```

依此类推，但是我已经为主要项目创建了一个，但是在单击其中一个之后，我想根据主要项目显示子项目。我无法创建第二个列表，该列表将根据主要项目显示子项目。我已经使用 SAX 解析器完成了这项工作。请帮我做这件事。

这是我的 startElement() 方法，我希望如果项目名称是桌面应用程序，那么桌面应用程序的子项目将显示在列表视图上。我没有得到这个。请帮我！！

```
 public void startElement(String uri, String localName, String qName,
        Attributes attributes) throws SAXException {
    // TODO Auto-generated method stub

    currentElement = true;

    if (qName.equals("Menu")) {
        subList = new ArrayList<SubProjectInfo>();
    } else if (qName.equals("Project")) {
        subProInfo1 = new SubProjectInfo();
        String gh = attributes.getValue("name"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:24:43.260

1.  为属性名称设置为桌面应用程序的项目调用 startElement() 时，将标志设置为 true

2.  为具有其他名称的项目调用 startElement() 时，将相同的标志设置为 false

3.  只要标志为真并且为 SubName 元素调用 startElement()，就将元素的文本内容保存到列表视图中。

# android - asmack android点对点聊天还在聊天中显示第三条用户聊天消息

> ID：15408602
> 
> 赞同：-2
> 
> 时间：2013-03-14T11:56:54.003
> 
> 标签：android, chat, asmack, quickblox

`asmack api`我正在使用with开发 android 聊天应用程序`quickblox`。

我面临的问题是，在对等聊天中，我还在对等聊天中收到第三条用户聊天消息。

任何提示或帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T09:48:36.767

在 OnMessageReceivedListener 检查收到的消息 id

```
String messageString = message.getBody();
  String test=message.getFrom();
  if((friendID+"/Smack").equals(message.getFrom()))
  {

  } 
```

其中friend-ID 是您所连接的id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T13:54:25.237

您必须检查此消息发给哪个用户并过滤此消息是否来自其他用户，而不是来自您当前的对手

# jquery - 查看 jQuery 中的返回值

> ID：15408603
> 
> 赞同：-1
> 
> 时间：2013-03-14T11:57:00.327
> 
> 标签：jquery, ajax

如果它是一件事并执行另一项任务，我将检查函数返回的值，但否则它不起作用？

```
$.post('ajaxs.php', {
      name: name_,
      mail: mail_,
      matn: matn_,
      url: url_,
      id: id_
  },function (data) {
      $('#readmore').html(data);

      if (data == 1) {
          $('#readmore').css({
              "border-color": "#00CC00",
              "border-width": "1px",
              "border-style": "solid"
          });
      } else {
          $('#readmore').css({
              "border-color": "#ff0000",
              "border-width": "1px",
              "border-style": "solid"
          });
      }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:59:38.980

尝试类似：

```
$.post('ajaxs.php', {
    name: name_,
    mail: mail_,
    matn: matn_,
    url: url_,
    id: id_
}, function (data) {
    $('#readmore').html(data)
               .css('border', '1px solid ' + $.trim(data) == "1" ?  '#00CC00' : '#ff0000');
}); 
```

# api - Openstack 通过 Nova API 创建卷

> ID：15408605
> 
> 赞同：2
> 
> 时间：2013-03-14T11:57:06.023
> 
> 标签：api, volume, openstack, cinder

我正在尝试构建一个小型 webapp 来处理我们位于 openstack 基础设施（版本 2012.2.2-dev，捆绑在 ubuntu 12.04 中）上的开发环境，我需要使用 API 创建一些卷（我决定使用 openstack rest api）。我能够启动机器并执行一些其他操作（一切都基于此构建： http: [//api.openstack.org/api-ref.html](http://api.openstack.org/api-ref.html)）。如果我按照 api 参考中的说明发送创建卷的请求，我会得到 404。我尝试了不同的 api 版本（v1），但仍然没有成功。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T19:30:37.760

在较新的 OpenStack 版本中，最好使用 Cinder API 而不是 Nova API。

在 folsom 中，Cinder 使用 IDENTICAL API 引用 Nova 卷相关的 API 集。这是因为这是第一个将卷管理分离为 cinder 作为独立项目的版本。虽然卷 API 引用仍然保留，但它不是默认值，也不是访问卷 REST 查询的首选方法。

查看。

[http://docs.openstack.org/developer/cinder/](http://docs.openstack.org/developer/cinder/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T12:46:29.513

你用什么语言编码？您可以为此使用 SDK 并跳过直接与 API 对话的尝试。看

[https://wiki.openstack.org/wiki/SDKs](https://wiki.openstack.org/wiki/SDKs)

# c# - Adjust brightness contrast and gamma of an image

> ID：15408607
> 
> 赞同：15
> 
> 时间：2013-03-14T11:57:08.260
> 
> 标签：c#, .net, image, image-processing, brightness

What is an easy way to adjust brightness contrast and gamma of an Image in .NET

Will post the answer myself to find it later.

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-14T11:57:08.260

> c# and gdi+ have a simple way to control the colors that are drawn. It’s basically a ColorMatrix. It’s a 5×5 matrix that is applied to each color if it is set. Adjusting brightness is just performing a translate on the color data, and contrast is performing a scale on the color. Gamma is a whole different form of transform, but it’s included in ImageAttributes which accepts the ColorMatrix.

```
Bitmap originalImage;
Bitmap adjustedImage;
float brightness = 1.0f; // no change in brightness
float contrast = 2.0f; // twice the contrast
float gamma = 1.0f; // no change in gamma

float adjustedBrightness = brightness - 1.0f;
// create matrix that will brighten and contrast the image
float[][] ptsArray ={
        new float[] {contrast, 0, 0, 0, 0}, // scale red
        new float[] {0, contrast, 0, 0, 0}, // scale green
        new float[] {0, 0, contrast, 0, 0}, // scale blue
        new float[] {0, 0, 0, 1.0f, 0}, // don't scale alpha
        new float[] {adjustedBrightness, adjustedBrightness, adjustedBrightness, 0, 1}};

ImageAttributes imageAttributes = new ImageAttributes();
imageAttributes.ClearColorMatrix();
imageAttributes.SetColorMatrix(new ColorMatrix(ptsArray), ColorMatrixFlag.Default, ColorAdjustType.Bitmap);
imageAttributes.SetGamma(gamma, ColorAdjustType.Bitmap);
Graphics g = Graphics.FromImage(adjustedImage);
g.DrawImage(originalImage, new Rectangle(0,0,adjustedImage.Width,adjustedImage.Height)
    ,0,0,originalImage.Width,originalImage.Height,
    GraphicsUnit.Pixel, imageAttributes); 
```

# cuda - GTS 450 CUDA 占用

> ID：15408609
> 
> 赞同：0
> 
> 时间：2013-03-14T11:57:09.430
> 
> 标签：cuda

我有一个 GTS 450，它有 4 个 SM，每个 SM 上有 48 个内核。即 192 个 CUDA 核心

考虑我正在使用有限的寄存器内存和共享内存

使用计算能力 2.1，实现 100% 占用的最佳块大小和线程大小是多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:29:36.677

您需要[**下载**](https://developer.nvidia.com/cuda-downloads)适当的 CUDA Toolkit (v5.0) 并查找*CUDA 占用计算器*Excel 表（如果您尚未下载）。如果是这样，您使用我上面提到的文档。设置初始属性/参数后，它将告诉您如何实现 100% 或任何您想要的占用率。其中之一是计算机能力。这也是我要说的最重要的。

# spring - 如何防止用户在注销后使用链接访问页面？

> ID：15408620
> 
> 赞同：1
> 
> 时间：2013-03-14T11:57:29.740
> 
> 标签：spring

注销后，我希望用户永远不要访问该页面，即使他们知道正确的 url 并输入它。如果他们输入他们在登录时看到的页面的 url，它应该被重定向到主页。

我使用了`header.jsp`文件中的代码

```
<core:if test="${userName == null}">
    <script>
         parent.location.href='logout.html'
    </script>
</core:if> 
```

但是由于标题包含在关于我们页面和注册页面中，我不得不为这两个文件创建一个不同的标题，而不包括上面的代码。有更好的解决方案吗？

解释

1.  登录并导航到 URL 中的页面。复制页面的 URL
2.  登出
3.  在同一浏览器窗口中，粘贴 URL

网站运行良好，无需寻找任何登录详细信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T13:56:19.753

我不太确定你在问什么，但我们开始吧：
我假设你正在通过 spring security 保护一些私有 url，例如：

```
<security:http use-expressions="true">
    <!-- ...more configuration stuff -->
    <security:intercept-url pattern="/private/*" access="isFullyAuthenticated()" />
    <!-- ...more configuration stuff -->
    <security:logout invalidate-session="true" logout-url="/logout" logout-success-url="/yourUrlAfterLogout.html"/>
</security:http> 
```

然后，当用户注销时，他就不能再访问私人网址了。
（**更新**：Spring Security 部分结束）

如果您想阻止用户在导航器中按下后退按钮或复制私有 url 时访问这些受保护的页面，您可以配置[WebContentInterceptor](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/web/servlet/mvc/WebContentInterceptor.html)，如下所示：

```
<mvc:interceptors>
    <bean id="webContentInterceptor"
        class="org.springframework.web.servlet.mvc.WebContentInterceptor">
        <property name="cacheSeconds" value="-1" />
        <property name="useExpiresHeader" value="true" />
        <property name="useCacheControlHeader" value="true" />
        <property name="useCacheControlNoStore" value="true" />
    </bean>
</mvc:interceptors> 
```

# java - 从类路径中删除 jboss 默认 jar el-api.jar

> ID：15408622
> 
> 赞同：0
> 
> 时间：2013-03-14T11:57:44.080
> 
> 标签：java, web-applications, jboss, jasper-reports, classloader

我正在`Jboss 4.2.1`用来部署一个使用`jsp-2.1.jar`和其他一些 jar 的 Web 应用程序。`jasper classes`这个 jar 中的使用最新版本的`EL API(1.2)`.

Jboss 只有`EL 1.1(I mean the el-api.jar)`这样它才会在 jboss 启动期间抛出 noSuchMethod 错误。

你能建议如何从类路径中排除这个jar/`jsp-api-2.1.jar`在这个jar之前加载最新的jar（比如）。

```
Exact Error: java.lang.NoSuchMethodError: 
javax.el.ExpressionFactory.newInstance()Ljavax/el/ExpressionFactory; 
```

# objective-c - 绘制 CGPath UIBezierCurve

> ID：15408623
> 
> 赞同：0
> 
> 时间：2013-03-14T11:57:44.220
> 
> 标签：objective-c, uibezierpath, cgpath

![字母](../Images/cbd9bf110382014c8a3248b3492cca80.png)

大家好，我正在研究如何绘制上图中的形状。我一直在寻找和阅读，但对如何使用 UIBezierPath 绘制曲线感到有些困惑。我发现了非常[好的代码](http://oleb.net/blog/2010/12/animating-drawing-of-cgpath-with-cashapelayer/)，它使用带有动画的 CAShapeLayer 来绘制线条。

到目前为止我的代码是：

```
@synthesize animationLayer = _animationLayer;
@synthesize pathLayer = _pathLayer;
@synthesize penLayer = _penLayer;

- (void) setupDrawingLayer
{
  if (self.pathLayer != nil) {
    [self.penLayer removeFromSuperlayer];
    [self.pathLayer removeFromSuperlayer];
    self.pathLayer = nil;
    self.penLayer = nil;
  }

 CGPoint upperCurve = CGPointMake(101, 100);
 CGPoint lowerCurve = CGPointMake(224,200);

 UIBezierPath *path = [UIBezierPath bezierPath];
 path.lineCapStyle = kCGLineCapRound;
 path.miterLimit = -10.0f;
 path.lineWidth = 10.0f;

 [path moveToPoint:lowerCurve];
 [path addQuadCurveToPoint:upperCurve controlPoint:lowerCurve];

 CAShapeLayer *pathLayer = [CAShapeLayer layer];

 pathLayer.frame = self.animationLayer.bounds;

 pathLayer.path = path.CGPath;

 pathLayer.strokeColor = [[UIColor blackColor] CGColor];

 pathLayer.fillColor = nil;

 pathLayer.lineWidth = 10.0f;

 pathLayer.lineJoin = kCALineJoinBevel;

 [self.animationLayer addSublayer:pathLayer];

 self.pathLayer = pathLayer;

}

-(void) startAnimation
{
[self.pathLayer removeAllAnimations];

CABasicAnimation *pathAnimation = [CABasicAnimation animationWithKeyPath:@"strokeEnd"];
pathAnimation.duration = 10.0;
pathAnimation.fromValue = [NSNumber numberWithFloat:0.0f];
pathAnimation.toValue = [NSNumber numberWithFloat:1.0f];
[self.pathLayer addAnimation:pathAnimation forKey:@"strokeEnd"];

}

- (void)viewDidLoad
{
[super viewDidLoad];

self.animationLayer = [CALayer layer];
self.animationLayer.frame = CGRectMake(20.0f, 64.0f,
                                       CGRectGetWidth(self.view.layer.bounds) - 40.0f,
                                       CGRectGetHeight(self.view.layer.bounds) - 84.0f);
[self.view.layer addSublayer:self.animationLayer];

[self setupDrawingLayer];
[self startAnimation];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-12T19:14:07.350

UIBezierPath 通常以 moveToPoint 开头来设置曲线的起点。然后是使用这些方法的任意数量的曲线段： – addLineToPoint: – addArcWithCenter:radius:startAngle:endAngle:顺时针: – addCurveToPoint:controlPoint1:controlPoint2: – addQuadCurveToPoint:controlPoint:

你没有具体说明你遇到了什么麻烦，所以我要飞跃一下，假设你正在努力解决的是 addCurveToPoint:controlPoint1:controlPoint2 。

通过此调用添加的线段从最近添加或移动到曲线中指向第一个参数的点开始绘制线段。它如何波动由控制点决定。

理解它如何波动的最简单方法是想象连接第一个点（在前面的方法调用中建立）到第一个控制点（让我们将此控制点称为线段 1）的线，以及连接第一个参数（结束点）的另一条线添加的线段）到第二个控制点（我们称这个控制点线段 2）。

起点的贝塞尔曲线与控制点线段 1 相切。在曲线的终点与控制点线段 2 相切。

所以如果你想画一条多条贝塞尔曲线，使它们形成一条平滑的线，你需要确保一条曲线的控制点线段2的斜率与曲线的控制点线段1的斜率相同。下一条与之相连的曲线。

从起点到第一个控制点以及终点到第二个控制点的距离决定了曲线的曲率。

我的一个朋友是这样想象的。想象一艘宇宙飞船从 A 点行进到 B 点。宇宙飞船开始时的航向由控制点线段 1 的斜率决定，速度由其长度决定。航向逐渐变为控制点线段 2 的斜率。同时，速度逐渐变为控制点线段 2 的长度。当飞船到达 B 点时，它正与该点相切。部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T22:58:47.283

我解决这类问题的方法是在 Illustrator 等绘图程序中绘制形状。这清楚地显示了贝塞尔曲线点需要去哪里才能得到我想要的曲线。

# javascript - Coffeescript：函数不能在同一个对象上调用函数

> ID：15408624
> 
> 赞同：1
> 
> 时间：2013-03-14T11:57:44.553
> 
> 标签：javascript, html, web, coffeescript, easeljs

我试着写一个简单的咖啡脚本。当用户单击鼠标时，它使用easeljs 生成一个小的灰色圆圈。这是代码

```
$(window).load ->
    game.init()

game=
    init: ->
        canvas= document.getElementById("Canvas")
        alert(canvas)
        @stage= new createjs.Stage(canvas)
        alert(@stage)

        @testshape= new createjs.Shape()
        @testshape.graphics.beginFill("#555")
        @testshape.graphics.rect(50,50,500,500)

        @stage.addChild(@testshape)
        @stage.update()

        window.onmousedown= (ev)->
            alert "click"
            mx=ev.screenX
            my=ev.screenY
            @spawn({x:mx,y:my})

    spawn: (data)->
        alert("spawn")
        x=data.x
        y=data.y

        shape = new createjs.Shape()
        shape.graphics.beginFill("#555")
        shape.graphics.circle(x,y,5)
        @stage.addChild(shape)
        @stage.update() 
```

前两个警报调用工作正常。并且正确创建了 testshape。回调也很好注册：鼠标单击提示警报“单击”。但是方法 spawn 永远不会被调用。我不明白为什么并查看了生成的 javascript：

```
// Generated by CoffeeScript 1.6.1
(function() {
  var game;

  $(window).load(function() {
    return game.init();
  });

  game = {
    gameObjects: [],
    init: function() {
      var canvas;
      canvas = document.getElementById("Canvas");
      alert(canvas);
      this.stage = new createjs.Stage(canvas);
      alert(this.stage);
      this.testshape = new createjs.Shape();
      this.testshape.graphics.beginFill("#555");
      this.testshape.graphics.rect(50, 50, 500, 500);
      this.stage.addChild(this.testshape);
      this.stage.update();
      return window.onmousedown = function(ev) {
        var mx, my;
        alert("click");
        mx = ev.screenX;
        my = ev.screenY;
        return this.spawn({
          x: mx,
          y: my
        });
      };
    },
    spawn: function(data) {
      var shape, x, y;
      alert("rpcspawn");
      x = data.x;
      y = data.y;
      shape = new createjs.Shape();
      shape.graphics.beginFill("#555");
      shape.graphics.circle(x, y, 5);
      this.stage.addChild(shape);
      return this.stage.update();
    }
  };

}).call(this); 
```

javascript似乎可以正常工作。为什么不调用 spawn ？

**更新：** 我已将代码更改为

```
window.onmousedown=(ev)=> 
```

现在该方法被正确调用。但在方法内部，其他成员不可用。这个警报在 spawn

```
alert(@stage) 
```

返回“未定义”。我也修改了 spawn。它现在也使用粗箭头语法。但这并没有解决问题。只剩下一种方法： init 。自然地，我尝试将 init 更改为粗箭头语法。但是这三种方法都使用粗箭头，原来的问题又回来了：没有调用 spawn。

*   如果只有回调和可选的 spawn 使用粗箭头，则 spawn 被正确调用。
*   如果 init 使用粗箭头，则无法调用 spawn。
*   在任何情况下，其他成员都无法从 spawn 内部访问。

更新：我将其更改为 OOP 编程。游戏现在是一个类，粗箭头的解决方案有效

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T12:02:04.760

将您的代码更改为：

```
window.onmousedown= (ev)=>
        alert "click"
        mx=ev.screenX
        my=ev.screenY
        @spawn({x:mx,y:my}) 
```

（注意`=`）。

问题是，当在事件处理程序的上下文中调用时，`@`（`this`在 JavaScript 中也称为）是`window`，而不是`game`.

Using`=>`将方法绑定到`game`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:03:05.383

这里的问题是`this`，您`this.spawn()`在`window.onmousedown`回调中调用的地方实际上是`window`对象，而不是您的`game`对象。

你应该做类似的事情

```
var that = this;
return window.onmousedown = function(ev) {
    var mx, my;
    alert("click");
    mx = ev.screenX;
    my = ev.screenY;
    return that.spawn({
      x: mx,
      y: my
    });
  }; 
```

# ios - Objective-C 更改 Sprite 表 - Sparrow

> ID：15408636
> 
> 赞同：1
> 
> 时间：2013-03-14T11:58:22.113
> 
> 标签：ios, objective-c, xcode, sprite-sheet, sparrow-framework

我目前正在使用 Sparrow 框架开发 iOS 通用应用程序，目前正在尝试使用 Sprite Sheets 创建一系列动画。对于 iPad Retina，我必须以高分辨率输出动画帧。不幸的是，为了让动画正常播放，由于 iOS 精灵表大小限制，我需要使用多个精灵表。

在模拟器上，简单地切换精灵表就可以完美地工作，但在真实设备上，这会降低帧速率，并且如果多个动画正在切换，还会发出内存警告并使应用程序崩溃。

有人遇到过 Sparrow 或 Cocoa 的类似问题吗？你是如何解决这个问题的？

如果没有解决此性能问题，是否有人对如何处理 iOS 设备上的多个精灵表有任何建议？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:27:12.120

所以显然这与新精灵表的实际加载有关。Sparrow 版本 1 不支持异步加载。然而，Sparrow 的人刚刚发布了第 2 版的 BETA，它确实支持异步加载，所以虽然它不能真正帮助我（在开发线上很远），但使用 v2 可能会更好。

[http://forum.sparrow-framework.org/topic/sparrow-20-beta](http://forum.sparrow-framework.org/topic/sparrow-20-beta)

# web-services - 如何通过指定 URL 来访问 JAX-RS Web 服务目录中的文件？

> ID：15408639
> 
> 赞同：5
> 
> 时间：2013-03-14T11:58:27.527
> 
> 标签：web-services, rest, tomcat, jax-rs

给定部署在 Tomcat 下的 JAX-RS Web 服务，如何通过指定 URL 来使某些文件直接从浏览器访问`http://site/path/file`？

假设我有返回 HTML 网页的 Web 服务方法，我需要在该页面中加载存储在 Web 服务目录中的 CSS 文件或图像文件。例如：

```
@GET
@Path("/")
@Produces(MediaType.TEXT_HTML)
public synchronized String root() {
    String head = "<head><link href=\"path/style.css\" rel=\"stylesheet\"></head>";
    String head = "<body><img src=\"path/image.jpg\"/></body>";
    return "<html>"+ head + body + "<html>";
} 
```

我应该将文件放在 Web 服务目录（`WebContent`、`META-INF`、`WEB-INF`等）中的什么位置以及我应该在 html 页面中放置什么路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T21:40:17.363

您基本上有三个选择：[绝对、相对或根链接](http://www.motive.co.nz/glossary/linking.php)。

如果您将文件作为外部资源，则绝对链接可以工作。相对 URL 在大多数情况下对于样式、脚本或图像等静态资源来说是个难题，因为它们必须从引用它们的位置开始解析（它们可以是各种形式，例如`images/image.jpg, ../image.jpg, ../images/image.jpg`等）。

因此，一种首选方法是在应用程序中的已知位置放置样式、脚本或图像，并使用根链接（以斜杠为前缀的 URL）访问它，例如`/Images/image.jpg`.

您的文件夹必须位于应用程序的文件夹中（`WebContent`在您的问题中）。在 WEB-INF 下放置一些东西会隐藏资源，客户端无法再访问它。

这些链接解析到应用程序的根目录，因此您必须考虑上下文路径。一个基本的例子是这样的：

```
@GET
@Path("whatever_path_might_be")
@Produces(MediaType.TEXT_HTML
public String root(@Context ServletContext ctx) {
    String ctxPath = ctx.getContextPath();
    String stylesFolder = ctxPath + "/Styles";
    String imagesFolder = ctxPath + "/Images";

    String head = "<head><link href=\"" + stylesFolder + "/style.css\" rel=\"stylesheet\"></head>";
    String body = "<body><img src=\"" + imagesFolder + "/image.jpg\"/></body>";
    return "<html>"+ head + body + "<html>";
} 
```

这是一个基本示例，我相信您可以找到改进它的方法。您可以将这些路径放在 .properties 文件中并作为常规配置加载。这稍后将允许您从以下内容切换：

```
resources.cssFolder=/appcontext/styles
resources.imgFolder=/appcontext/images 
```

类似于：

```
resources.cssFolder=http://external.server.com/styles
resources.imgFolder=http://external.server.com/images 
```

无需更改一行代码。

# c# - 在静态类中声明 char 数组

> ID：15408640
> 
> 赞同：2
> 
> 时间：2013-03-14T11:58:28.170
> 
> 标签：c#, static

我想在静态常量类中将十六进制十进制值声明为常量字符，如下所示：

```
public static class Constants
{
    public char[] Record_Separator = new Char[] { '\x01E' };  //Record Separator
} 
```

我知道在静态类中实例化 char 是不可能的，因为我想在一个类中保留所有常量，所以想知道是否有另一种方法可以做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-30T03:42:36.417

```
public static class Constants
{
    public static readonly char[] Record_Separator = new Char[] { '\x01E' };  //Record Separator
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T12:08:27.277

```
public class Constants {
    public static final char[] RECORD_SEPARATOR = { 0x1E };
} 
```

注意：你的常数应该是`static`and `final`，否则它不是常数。您已经使用`Char`而不是`char`. `static final`Java 中常量的通用命名约定是`ALL_UPPERCASE`.

您无法制作顶级课程`static`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T12:02:46.630

```
private const double MyConst = 0x01E; 
```

那这个呢？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-30T03:36:55.913

只使用静态构造函数怎么样？

# java - 从一个 url 设置 cookie 并从另一个 url 获取，如果路径未设置为“\”，为什么它不起作用？

> ID：15408642
> 
> 赞同：0
> 
> 时间：2013-03-14T11:58:33.067
> 
> 标签：java, javascript, cookies

我试图实现这一点：http: [//geekswithblogs.net/GruffCode/archive/2010/10/28/detecting-the-file-download-dialog-in-the-browser.aspx](http://geekswithblogs.net/GruffCode/archive/2010/10/28/detecting-the-file-download-dialog-in-the-browser.aspx)

问题是，我有一个带有 url: 的页面`localhost/portal/myapp`，动态地，在该页面上我生成了一个`action`属性等于的表单`localhost/servlet/myapp/generatexls`，所以我在处理该 url 的 servlet 中设置了一个 cookie。问题是，我后来尝试在我的原始页面中从 javascript 中读取我的 cookie `localhost/portal/myapp`，但我不能。如果在设置 cookie 时路径等于`/`，那么很高兴我可以阅读它。所以，问题是，为什么不设置`/`我的 cookie 的路径就无法在原始 url 上读取，为什么它很重要，如果路径未设置为 cookie 有什么问题`/`，它是否隐式设置为表单的操作参数？( `/servlet/myapp/generatexls`) 这就是为什么我无法阅读它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T13:48:46.107

最后执行 buff.writeTo 输出流！

标头设置仅在仍然没有写入响应时才起作用。因为标题是先写的。

可疑：file.close() 丢失，是否都被写入。outStream.close() 最好不要这样做。也许 cookie.setPath("/")

如果有一个 file.length() 用于设置内容长度标头，并执行 file.writeTo 响应输出流，那就更好了。

# mysql - 无法连接到 Mysql 服务器；无法创建/写入 pid 文件

> ID：15408643
> 
> 赞同：7
> 
> 时间：2013-03-14T11:58:34.497
> 
> 标签：mysql, database

您好，我似乎无法连接到我的 mysql 服务器，我收到以下错误

```
ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (111) 
```

当我检查日志时，它显示了以下内容：

```
130314 12:36:16 [Note] Plugin 'FEDERATED' is disabled.
/usr/sbin/mysqld: Table 'plugin' is read only
130314 12:36:16 [ERROR] Can't open the mysql.plugin table. Please run mysql_upgrade to create it.
130314 12:36:16  InnoDB: Initializing buffer pool, size = 8.0M
130314 12:36:16  InnoDB: Completed initialization of buffer pool
130314 12:36:16  InnoDB: Started; log sequence number 13 1336891001
130314 12:36:16 [ERROR] /usr/sbin/mysqld: Can't create/write to file '/var/lib/mysql/live.pid' (Errcode: 13)
130314 12:36:16 [ERROR] Can't start server: can't create PID file: Permission denied 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-08-12T02:54:19.753

我有mysql的示例问题。我在 root 权限下运行，但不知道为什么会发生此错误。问题是 mysql 用户没有权限在`/var/run/mysqld`. 完整日志可能如下所示：

```
140812 09:35:53 mysqld_safe Starting mysqld daemon with databases from /var/lib/mysql
140812  9:35:53  InnoDB: Initializing buffer pool, size = 8.0M
140812  9:35:53  InnoDB: Completed initialization of buffer pool
140812  9:35:53  InnoDB: Started; log sequence number 0 197396648
140812  9:35:53 [ERROR] /usr/libexec/mysqld: Can't create/write to file '/var/run/mysqld/mysqld.pid' (Errcode: 13)
140812  9:35:53 [ERROR] Can't start server: can't create PID file: Permission denied
140812 09:35:53 mysqld_safe mysqld from pid file /var/run/mysqld/mysqld.pid ended 
```

所以解决方案是将mysql用户分配到这个目录：

```
# chown mysql:mysql /var/run/mysqld 
```

然后启动mysqld

```
# service mysqld start 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-15T10:37:00.747

我在 Redhat 下遇到了同样的问题，[这个页面](https://web.archive.org/web/20170426171414/http://crashmag.net/change-the-default-mysql-data-directory-with-selinux-enabled)有切换 mysql 目录的步骤。

```
service mysqld stop
mkdir /srv/mysql/
chown mysql:mysql /srv/mysql 
```

编辑`/etc/mysql/my.cnf`和设置`datadir=/srv/mysql`&`socket=/srv/mysql/mysql.sock`

如果您使用 SELinux 并最终启动服务器，则需要执行其他步骤

```
service mysqld start 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-21T19:56:41.000

在某些情况下，这个错误是因为我们在日志文件 /var/log/mysqld.log 中有错误的权限

```
chown mysql:mysql /var/run/mysqld 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-07T00:00:06.267

在错过了 2 个小时的优质 Netflix 节目后，我继续前进：

```
chmod -R 777 /usr/local/mysql
chmod -R 777 /usr/local/mysql-5.6.19-osx10.7-x86_64 
```

...在 OSX Mavericks 上。皮塔饼。

# assembly - 从端口获取输入

> ID：15408644
> 
> 赞同：0
> 
> 时间：2013-03-14T11:58:35.980
> 
> 标签：assembly, 8051

我正在学习 8051 汇编编程。我在我的书中读到“为了使端口成为输入端口，端口必须通过将 1 写入其所有位来进行编程。” 但这不是错的吗？

如果我将所有位设置为 1，并想在输入`1010`时输入，我将按下连接到第 2 引脚和第 4 引脚的按钮以输入 1010，但端口将读取所有 1。我在 Keil uVision Simulation 上试过，发现了这个问题。

这是一个问题还是我误解了它？

```
org 00h

Reset:

mov P0,#00h
mov P1,#00h
mov P2,#00h
mov P3,#00h

TakeInput:

jb P2.0,Addition// in assembler simulation, this condition is true if I set P2 to #0ffh, which is not required. The user should set this bit for making this condition true

sjmp TakeInput

Addition: 
```

移动 A,P0 添加 A,P1

```
mov P3,A

acall Delay

ajmp Reset

Delay:

mov R0,#1

here:

mov R1,#1

again:

djnz R1,again

djnz R0,here

ret

end 
```

如果我不将所有端口重置为 0，则默认情况下依赖于端口值的跳转指令变为 true。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:37:57.957

这是正确的方法，你的模拟肯定有问题。8051引脚有这种电路：

![引脚电路](../Images/7c8ff4dcae2de7db8b7ec9a1879cf9a4.png)

（[来源](http://www.mikroe.com/img/publication/8051-books/programming-8051-mcu/chapter/ch2/03.gif)）

请注意上拉`Vcc`是可选的，请查看特定芯片的数据表。

该电路的工作原理是，如果您将引脚设置为`0`，则输出将被拉至地，并且只能被读取为`0`因为从外部您无法将其拉高。如果要允许输入两个电平，则必须将引脚设置为`1`。在这种情况下，您可以：

1.  如果您有内部上拉，则保持输出浮动（读作`1`）
2.  将输出拉到`Vcc`（读作`1`）
3.  将输出拉到地（读作`0`）

因此，如果您连接一个按钮，您应该对其进行接线，以便将引脚拉到地。如果需要，添加一个外部上拉电阻。

**更新** 以明确这一点：如果您按照上述说明连接按钮（即按下按钮将引脚接地），则输入将被读取为`1`好像按钮**没有**被按下，并且`0`好像按钮**被**按下了。这是连接按钮的常用方法。

插图使用`MCU 8051 IDE`。请注意，两个开关连接到端口 1 的引脚 7 和 6（即两个最高位），一个是打开的，另一个是关闭的（按下）。

* * *

如果端口位设置为零，则无论开关的状态如何，输入都将为零： ![端口位设置为 0](../Images/769f85510f35bfb8b89f5e5aa143d5c6.png)

* * *

如果端口位设置为 1，则输入将`1`用于打开和`0`关闭开关： ![端口位设置为 1](../Images/88cbeb4c4ab31844389481ac435a4c9e.png)

通向最左侧开关的红色接线表示`P1.7`处于处于状态`Vcc`（因为输出处于处于`1`状态且未被开关拉低）。

# android - Android：在方向更改时拉伸对话框片段布局说适合屏幕

> ID：15408649
> 
> 赞同：0
> 
> 时间：2013-03-14T11:58:49.053
> 
> 标签：android, android-fragments, android-activity, android-dialogfragment, android-orientation

我有一个对话框片段，当这个片段中的布局被夸大时：

当我更改此屏幕的方向时，对话框会变得紧凑，看起来好像它被迫适应横向模式并且不适合屏幕以适当的比例。我应该怎么做.....我尝试覆盖 onConfigurationChange() 方法并再次重新填充布局，但没有帮助我.....我需要知道如何增加方向更改对话框的区域？

这是我的布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:padding="4dip"
android:background="@drawable/techdeals_tip_screen" >

<Button
    android:id="@+id/show"
    android:layout_width="50dp"
    android:layout_height="50dp"
    android:layout_weight="0"
    android:background="@android:color/transparent" 
    android:layout_gravity="right">

    <requestFocus />
</Button> 
```

这是我的对话片段：

```
public static class MyDialogFragment extends SherlockDialogFragment {

    /**
     * Create a new instance of MyDialogFragment.
     */
    static MyDialogFragment newInstance() {
MyDialogFragment f = new MyDialogFragment();
        return f;
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Pick a style based on the num.
        int style = DialogFragment.STYLE_NO_TITLE;
        int theme = 0;
        setStyle(style, theme);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.fragment_tips_dialog, container, false);
        Button button = (Button)v.findViewById(R.id.show);
        button.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                dismiss();
            }
        });
        return v;
    }

    @Override
    public void onStop() {
        super.onStop();
        final Activity activity = getActivity();
        launchNextScreen(getActivity());
        activity.finish();
    }

    /** Method to launch home screen after tip screen. */
    private void launchNextScreen(Activity activity) {
        setViewedWelcomeScreen(activity);
        activity.startActivity(new Intent(activity, HomeTabActivity.class));
    }
} 
```

任何帮助都将非常重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:04:49.447

我认为您应该为您的横向配置创建布局。尝试这样并在那里设置你喜欢的宽度，我认为这会对你有所帮助.. 这是一个链接，你可以阅读它，...... [http://android.programmerguru.com/android-landscape-layout-example /](http://android.programmerguru.com/android-landscape-layout-example/)

# playn - PlayN 启动？

> ID：15408653
> 
> 赞同：0
> 
> 时间：2013-03-14T11:58:57.043
> 
> 标签：playn

我是 PlayN 的新手。我通过 googlecode 阅读了这篇文章：[入门](https://code.google.com/p/playn/)

我想从 Eciplse 开始，但根据 tulorial，我发现我们需要安装 maven，但我没有从我开始自己的项目中获得方法。

寻求帮助：

[链接 1] (playn-2011.appspot.com)

[链接 2] (proppy-playn101.appspot.com)

但是没有安装方式。所以，如果有人知道我应该做什么开始。请帮我设置 PlayN。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T09:54:37.063

上次创建 PlayN 项目时，我发现 eclipse maven 集成在创建新项目时存在问题。以下对我有用：

使用 PlayN 原型创建项目，如 gnumaru 提到的：

> mvn archetype:generate -DarchetypeGroupId=com.googlecode.playn -DarchetypeArtifactId=playn-archetype -DarchetypeVersion=1.6

之后，我在 Eclipse 中导入了项目，就像导入展示柜一样。我最近创建了一个小教程，其中包含有关如何导入展示柜的屏幕截图，您可以在[此处找到它](http://programmerintrouble.blogspot.de/2013/04/getting-started-with-eclipse-and-playn.html)

希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T14:03:42.227

如果您没有了解如何安装`maven`或如何“安装”PlayN，我不明白。

Maven 是一种便携式应用程序。要安装它，您只需下载它，将其解压缩到某个位置，然后将其`bin`文件夹的路径设置到您的`$PATH`变量中。

关于 PlayN，它不是你“安装”的东西。PlayN 可以看作是一组 Java 库，可让您创建多平台游戏。`maven`您可以通过在终端/命令提示符下运行以下命令来创建新的 PlayN 项目：

```
mvn archetype:generate -DarchetypeGroupId=com.googlecode.playn -DarchetypeArtifactId=playn-archetype -DarchetypeVersion=1.6 
```

此命令使用最新（截至 2013 年 3 月）版本的 PlayN 创建一个空白项目。Maven 会下载你需要的所有东西，所以你不必担心手动下载除了 maven 之外的任何东西。

刚创建一个新项目后，就可以使用 编译和测试项目了`maven`，只需进入终端，将目录更改为您创建项目的目录并运行以下命令： 对于 Java，您运行命令`mvn test`（然后将打开一个包含游戏的窗口），对于您运行的 HTML5 `mvn -Phtml integration-test`（然后您可以通过浏览器访问您的游戏，使用`localhost:8080`），对于您运行的 Android `mvn -Pandroid install`（假设您有一个连接到您的计算机的 Android 设备，或者正在运行的模拟器实例）

希望我能有所帮助。

# c++ - 用 C++ 中的函数调用替换强制转换

> ID：15408658
> 
> 赞同：3
> 
> 时间：2013-03-14T11:59:16.257
> 
> 标签：c++, casting, refactoring

重构/替换强制转换的工具或方法的任何建议，例如：

```
(type*) data 
```

进入：

```
convert_to_type(data) 
```

`data`当其中有更高优先级的运算符、括号或换行符时，事情变得更加棘手：

```
(type*) a(b)->
              c 
```

应该变成`convert_to_type(a(b)->c)`不等`convert_to_type(a)(b)->c`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T13:36:32.297

我不知道能够正确解析和自动替换这些的工具。

我知道的最好的选择是使用 g++，`-Wold-style-cast`它会帮助你警告所有这样的 C 风格的转换，允许你通过分析有问题的代码来正确地配置它们。这显然会比工具花费更多的时间，但它也让您有机会审查并防止工具进行不正确的转换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T14:49:48.253

在这种情况下，您将需要一个语义感知的 C++ 解析器。没有那么多工具。

实际上，我唯一能想到的就是 Clang。使用[它的 AST 匹配器](http://clang.llvm.org/docs/LibASTMatchers.html)，您可以编写一个程序来检索对应于 C 样式转换的 AST 节点，然后发出文本替换。因为 Clang 的 AST 是完全语义感知的，所以您可以访问正在转换的表达式、它的类型*以及*它被转换为的类型。

工具或额外部分中有示例，例如，您可以查看[Cpp11Migrate](https://llvm.org/svn/llvm-project/clang-tools-extra/trunk/cpp11-migrate/Cpp11Migrate.cpp)工具以进行匹配*和*替换。

注意：如果你走这条路，你会想熟悉[Clang 的 AST 。](http://clang.llvm.org/docs/IntroductionToTheClangAST.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T08:00:11.147

> 重构/替换强制转换的工具或方法的任何建议，例如：

应该没有。这个问题很棘手，当创建 C++ 类型转换（static_cast、cost_cast 等）时，它们的明确目标之一是“使用自动化工具在代码中应该很容易找到它们。

在某些情况下，在确定一对括号是否用于算术运算（用于运算符优先级的括号）、强制转换或其他内容之前，工具需要进行完整解析。

你最好一个一个地改变它们（这样你会引入更少的错误）。

如果您的代码库很大，您也可以从为此目的编写自己的工具中受益（gcc 对此有警告，因此它们应该很容易找到）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T12:06:49.680

有点认为这会在某个时候在你的脸上爆炸，但是：

```
template<typename T> T myFunc()
{
    // do stuff
    return (T) retVal;
} 
```

# ios - 在不辞职第一响应者的情况下找出 UITextfield 的结束编辑

> ID：15408660
> 
> 赞同：6
> 
> 时间：2013-03-14T11:59:21.873
> 
> 标签：ios, uitextfield, user-inactivity

当用户输入 时`UITextfield`，他停了 2 秒，光标仍然在 上`UITextfield`，那么我们如何识别这个事件呢？即，我想检查编辑是否结束，而无需让第一个响应者从中辞职`UITextField`。这样做的方法是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-14T12:25:28.630

是的，我们可以检查！与`UITextField`代表， `- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string`

```
- (void) callMeAfterTwoSeconds {
    NSLog(@"I'll call after two seconds of inactivity!");
}

- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    [NSRunLoop cancelPreviousPerformRequestsWithTarget:self];
    [self performSelector:@selector(callMeAfterTwoSeconds) withObject:nil afterDelay:2.0];

    return YES;
} 
```

当您键入时（从键盘上敲击键），它会取消之前对该`callMeAfterTwoSeconds`功能的调用，一旦您停止，它会将其设置为在 2 秒延迟后调用，是的，它将在 2 秒后调用。

**更新：** 即使您可以将该文本字段作为对象传递，`performSelector`以了解哪个文本字段处于非活动状态，因为您的`callMeAfterTwoSeconds`函数将类似于，

```
- (void) callMeAfterTwoSeconds:(UITextField *)textfield {
    if(textfield == txtUserName) {
        NSLog(@"User textfield has NO activity from last two seconds!"); }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-14T12:20:38.973

转到您的连接检查器`UITextField`并将“已发送事件”列表中的“编辑更改”连接到`IBAction`您选择的预定义。或者，如果您不使用 Storyboard，您可以通过编程方式进行操作。

```
[youTextField addTarget:self action:@selector(textFieldInputDidChange:) forControlEvents:UIControlEventEditingChanged]; 
```

现在，`IBAction`每次用户更改`UITextField`. 创建一个[计时器](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html)作为 ivar。现在每次`IBAction`被调用，启动计时器，如果它会达到 2 秒而没有被新的调用重新启动，你知道用户没有在`UITextField`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-21T20:45:27.867

我为 searchBar 做了这个，但我认为它也适用于 UITextField。代码在 Swift 中。:)

```
func searchBar(searchBar: UISearchBar, textDidChange searchText: String) {
    searchTimer?.invalidate()
    searchTimer = NSTimer.scheduledTimerWithTimeInterval(1.0, target: self, selector: Selector("search"), userInfo: nil, repeats: false)
}

func search() {
    println("search \(searchBar.text)")
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-11-19T16:51:44.270

我不认为打电话`[NSRunLoop cancelPreviousPerformRequestsWithTarget:self]`是一个好习惯。

相反，我会这样做：

```
[self.searchTextField addTarget:self action:@selector(textFieldDidChange:) forControlEvents:UIControlEventEditingChanged];
//or select the textfield in the storyboard, go to connections inspector and choose the target for 'Editing Changed'

- (IBAction)textFieldDidChange:(id)sender {
    [self performSelector:@selector(editingChanged:) withObject:self.searchTextField.text afterDelay:2.0]; 
}

- (void)editingChanged:(NSString *)text {
    if ([text isEqualToString:self.searchTextField.text]) {
        //do your thing
    }
} 
```

这样用户可以输入，它将触发对 的调用`editingChanged:`，然后您可以仔细检查值是否同时更改，如果没有，则用户停止输入 2 秒。

# r - Xtabs 命令错误

> ID：15408665
> 
> 赞同：1
> 
> 时间：2013-03-14T11:59:38.350
> 
> 标签：r, import

我最近开始学习使用 R。我将 csv 数据导入 R 并使用 xtabs。

我使用以下命令：

```
train.df=read.csv("train.csv")
xtabs( ~class, data=train.df) 
```

我得到错误：

```
Error in model.frame.default(formula = ~class, data = train.df) : 
  object is not a matrix 
```

[我用本页](http://www.r-bloggers.com/classification-trees/)底部给出的数据集尝试了 xtabs 命令，它工作正常。我什至尝试使用 as.matrix(train.df) 将我的数据集转换为矩阵，但这也不起作用。

有人可以指出问题所在吗？

谢谢

# c# - 从结构继承

> ID：15408667
> 
> 赞同：23
> 
> 时间：2013-03-14T11:59:43.290
> 
> 标签：c#, .net, inheritance, struct

我试图弄清楚我的代码有什么问题。我有这个代码：

```
public struct MyStructA
{
    public MyStructA(string str)
    {
        myString= str;
    }

    public string myString;
}

public struct MyStructB: MyStructA
{
    public string myReversString;
} 
```

我得到这个错误：

```
Error at compile time: Type 'MyStructA' in interface list is not an interface 
```

我不明白为什么？.net 不像类那样实现结构？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-14T12:01:35.957

**结构是隐式密封的**

根据此[链接](http://csharp.2000things.com/2013/01/28/767-a-struct-is-implicitly-sealed/)：

C# 中的每个结构，无论是用户定义的还是在 .NET Framework 中定义的，都是密封的——这意味着您不能从它继承。结构是密封的，因为它是一种值类型，并且所有值类型都是密封的。

一个结构可以实现一个接口，因此可以在结构名称之后的冒号后面看到另一个类型名称。

在下面的示例中，当我们尝试定义一个继承自上面定义的结构的新结构时，会出现编译时错误。

```
public struct PersonName
{
    public PersonName(string first, string last)
    {
        First = first;
        Last = last;
    }

    public string First;
    public string Last;
}

// Error at compile time: Type 'PersonName' in interface list is not an interface
public struct AngryPersonName : PersonName
{
    public string AngryNickname;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T12:00:59.820

struct 不支持继承，如果需要你必须使用类，见[msdn](http://msdn.microsoft.com/en-us/library/ah19swz4%28v=vs.71%29.aspx)

> 结构没有继承，就像类一样。一个结构不能从另一个结构或类继承，也不能是一个类的基础。然而，结构继承自基类 Object。结构体可以实现接口，它的实现方式与类完全一样。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-14T19:33:24.473

.NET 中的值类型很奇怪，尽管它们是派生自名为`ValueType`. 对于每个值类型，都有一个堆对象类型，它的行为类似于派生自 的类对象`ValueType`，但值类型存储位置包含一个字节集合，这些字节要么表示原始值，要么是保存所有字节所需的字节的串联它的公共和私人领域。

由于值类型存储位置只保存表示其值所需的字节，并且既不保存类型信息，也不保存对将保存类型信息的对象的任何引用，因此使用值类型存储位置的代码必须确切地知道它是什么。

传统的继承要求对象保存有关其自身类型的信息，但没有规定值类型可以通过哪些方式来做到这一点。

对于 .NET 来说，通过一些特殊规则允许某些有限形式的值类型继承在概念上是可能的（并且有用的），例如`BaseStructure`变量只能保存 a`BaseStructure`而不能保存`DerivedStructure`. 可以定义一个`StructureUser<T> where T:BaseStructure`，并且这样的类或方法可以接受`BaseStructure`和使用这些成员的任何派生类——包括字段——这些成员对于基类是通用的。

不幸的是，很难为泛型定义规则，使其在允许的场景中表现一致，而又不破坏任何现有代码。

例如，在一个类`Foo<T,U> where T:U`中，总是可以将 a 存储`T`到一个 type 的变量中`U`，即使它`U`是一个值类型（即因为值类型是密封的，`T`并且`U`保证是*相同的*类型）。如果`U`可以是可继承的值类型并且`T`可以是派生的，则这样的保证将不成立。

考虑到与这种继承相关的困难，一个更有用的替代方法是提供一种安全（即使是有限的）方法，通过该方法属性可以暴露一个 byref 或一个 const-byref（一个 byref 是在参数使用时传递的东西限定符`ref`）。

这样的特性将消除字段和属性之间不可避免的语义区别，并且取决于它是如何实现的，即使在与类一起使用时也可以提供一些主要优势（例如，它可以允许有效混合不可变和可变类型）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-14T12:01:50.103

结构之间不允许继承，但结构可以实现接口。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-06-07T03:02:48.657

其实有几个很好的理由：

1.  **结构没有“类型”**

    ...除非它们被“装箱”成一个物体。

    `object`另一方面，在存储类型的普通 CLR 中有两个“标题”字段（以及一些 GC 和锁定信息）。添加它会改变结构的大小，并使它们的大小不可预测（因为某些运行时可能会选择以不同的方式添加该信息，例如，单声道运行时向其对象添加的“标题”信息比 .net 框架运行时更多，或者在过去最少这样做）

    当您尝试将结构分配给它实现的接口字段时，实际上会发生这种装箱。所以理论上这是可能的，但是你所有的结构都会被装箱，这对于性能来说真的很糟糕。

2.  **打字和固定大小**

    为了说明为什么专门继承结构将是一个巨大的问题，让我们举一个简单的例子。

    考虑两个结构：`struct MyBaseStruct { public int A; }`和一个假设的 `struct MyDerivedStruct : MyBaseStruct { public int B; }`.

    现在当我打电话时会发生什么`var array = new MyBaseStruct[10];`？运行时会为此分配多少大小？

    分配`array[0] = new MyDerivedStruct();`会很麻烦，在 32 位系统上，它*可能*也会写入第一个***和***第二个插槽。

    即使您尝试“收集”所有派生类型，它也不起作用，如果您加载另一个 dll，该 dll 定义了另一个从您的基本结构派生的结构，该怎么办？

我个人认为了解可能导致设计师首先做出决定的实际问题非常重要。但当然也可以只说*“因为语言的设计者做到了！”* 或*“因为这就是 C# 语言规范所说的”*：P

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-14T12:05:27.697

结构可以实现一个接口，但不能从另一个结构继承。因此，不能将结构成员声明为受保护的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-14T12:02:21.663

从[`MSDN`](http://msdn.microsoft.com/en-us/library/ah19swz4%28v=vs.71%29.aspx);

> **结构没有继承，就像类一样**。一个结构不能从另一个结构或类继承，也不能是一个类的基础。然而，结构继承自基类 Object。结构体可以实现接口，它的实现方式与类完全一样。

但请记住，由于结构是*值类型*并且它们继承[`System.ValueType`](http://msdn.microsoft.com/en-us/library/system.valuetype.aspx)

# c# - 如何创建报表查看器编辑器？

> ID：15408671
> 
> 赞同：1
> 
> 时间：2013-03-14T11:59:48.167
> 
> 标签：c#, asp.net-mvc-4, web, report

我需要创建一个可以生成报告的工具。

我正在使用 .Net C# MVC4。

这个想法是这样的：1个用户可以创建或复制现有的报告。

1.  它需要选择将生成报告的基本表。
2.  然后数据库中的相关表应基于 FK 显示。
3.  他们需要生成一个简单的选项来选择搜索字段。
4.  将选择他想在报告中显示的列。
5.  所有这些信息都需要保存在数据库中。

我想知道网络上是否已经有任何东西已经完成了这些步骤。

或任何可以帮助我创建它的指南。

**我目前的发展：**

在 DB 上，我有 3 个表：

1.  该表具有被调用以连接所有表的存储过程
2.  此表包含每个表可以在报告中显示的所有字段的列表
3.  此表存储要在报告中显示的当前字段：
    *   表名
    *   栏目名称
    *   报告中的订单
    *   是否分组
    *   函数，所以我可以使用 Sum(ColA) 之类的东西
    *   其他不那么重要的可配置的东西

所以在 MVC 上，我需要每个报告的控制器操作，以便它控制搜索字段。我还有一个配置部分来配置上面解释的表 3。Finelly 在数据库上我需要一个存储过程，它可以按预配置的字段进行过滤，然后创建一个动态选择。回到 MVC 中，有一个基于表 3 的自定义方法，可以生成 Excel 或 Pdf 版本的报告。顺便说一句，报告使用 iTextSharp。

**问题，我需要一种方法来允许用户创建新报告而无需开发人员创建新操作。**

# php - 使用 preg_match 从字符串中获取数字

> ID：15408673
> 
> 赞同：14
> 
> 时间：2013-03-14T11:59:50.657
> 
> 标签：php, preg-match

我有一个字符串：

```
 <div id="post_message_957119941"> 
```

我只想使用`preg_match`.

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-14T12:06:20.280

这应该不会太难。

```
$str = '<div id="post_message_957119941">';

if ( preg_match ( '/post_message_([0-9]+)/', $str, $matches ) )
{
    print_r($matches);
} 
```

输出：

`Array ( [0] => post_message_957119941 [1] => 957119941 )`

所以想要的结果总是在：`$matches[1]`

那是你需要的吗？

# php - SQL 连接显示左表中的重复项

> ID：15408674
> 
> 赞同：0
> 
> 时间：2013-03-14T12:00:00.313
> 
> 标签：php, sql, join, duplicates

我正在建立一个汽车租赁系统，我有 2 张桌子，一张用于汽车，一张用于出租。我只希望表 1 中的所有内容都显示一次，而表 2 中的所有内容都显示在表 1 下。

假设我的表如下所示：

## 表格1

*   ID
*   车
*   模型

## 表 2

*   id(同表1 id)
*   租金开始
*   租金停止
*   租期开始
*   租时停止`

**我希望它在表格中显示如下：**

*   Carid(t1) / car(t1) / model(t1)
*   租开始（t2）-租停止（t2）/租时间开始（t2）-租时间停止（t2）

**例子：**

*   1 / 宝马 / 320
*   14.3.2013-14.3.2013 / 13:30-14:30
*   15.3.2013-15.3.2013 / 8:00-13:00

*   2 / 奥迪 / A4

*   15.3.2013-15.3.2013 / 8:00-13:00

**这就是我现在所拥有的：**

```
 $sqlquery = 
  "SELECT * FROM table1 
   LEFT JOIN table2 ON table1.id=table2.id 
   GROUP BY table1.id"; 
```

（对不起我的格式）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:22:12.687

如果您希望所有汽车只列出一次并提供所有相应的汽车租赁，您应该使用某种循环。由于您没有提供您正在使用的数据库，我只能给您伪代码：

```
 $sqlquery = "SELECT * FROM table1";
 *execute query*
 while ($car = *fetch*) {
     *print car data*
     $sqlquery = "SELECT * FROM table2 where id = ?";
     *execute inner query with parameter binding: $car["id"]*
     while ($rent = *fetch*) {
         *print rent data*
     }
 } 
```

一般提示：在第二个表上使用主键并将“id”重命名为“carid”。避免混淆。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:13:28.177

您需要先执行查询，如下所示：

```
$sqlquery = "SELECT * FROM table1 LEFT JOIN table2 ON table1.id=table2.id"; 
```

这将提供每个 id 所需的所有记录（多行）。然后，您需要使用语句（for、foreach 等）过滤 php 中的记录。

流程如下：

1.  执行查询
2.  然后foreach记录检查id，如果id不同于之前的id或者0则回显`Carid(t1) / car(t1) / model(t1)`
3.  否则回显`rentstart(t2)-rentstop(t2) / renttimestart(t2)-Renttimestop(t2)`

希望你明白这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T12:31:29.870

如果您希望一切都在 sql 中完成，您可以创建存储过程：

```
declare @Table1 table
(
  Id int, 
  Car  varchar(100), 
  Model  varchar(100)
)
Insert into @Table1 values
Select ID,Car,model From Table1

Declare @Temp Table
(
    FinalValue varchar(300)
)

Declare @id int

While ((Select Count(*) From @Table1)>0)
Begin
 Set @id =(Select Top 1 id From @Table1)
 Insert Into @Temp 
 Select cast(id as varchar(5))+'/'+car+'/'+model From @Table1 Where Id=@id

 Insert @Temp Select rentstart+'-'+rentstop +'/'+ renttimestart+'-'+Renttimestop From Table2 Where Id=@id

 Delete From @Table1 Where Id=@id
End

Select * From @Temp 
```

输出：

```
1/BMW /320
14.3.2013-14.3.2013/13:30-14:30
15.3.2013-15.3.2013/8:00-13:30
2/Audi/A4
15.3.2013-15.3.2013/8:00-13:30 
```

# ios - 在屏幕上显示浮动 UIView

> ID：15408675
> 
> 赞同：0
> 
> 时间：2013-03-14T12:00:03.933
> 
> 标签：ios, cocoa-touch, uiview

是否可以在 iPad 屏幕上显示 UIView 而无需将其添加到任何其他视图？
当我点击并保持点击屏幕上的任意位置时，视图应该出现在点击位置上，一旦我抬起手指，视图应该消失......
**注意：**点击手势被添加到视图保持全屏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:16:05.203

除非它是其他视图的子视图，否则您无法显示视图。这就是 iOS 系统的工作方式——它是视图的层次结构。如果你愿意，你可以将你的视图添加到 UIWindow，这是你的应用程序的最顶层视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2022-01-06T05:14:14.690

我认为这是在屏幕上显示浮动 UIView 的最简单方法。

```
import UIKit

class ViewController: UIViewController {

    @IBOutlet weak var remoteVideoView: UIView!
    override func viewDidLoad() {
        super.viewDidLoad()

        let gesture = UIPanGestureRecognizer(target: self, action: #selector(ViewController.handleGesture(_:)))
        remoteVideoView.addGestureRecognizer(gesture)
        remoteVideoView.isUserInteractionEnabled = true

}

    @objc func handleGesture(_ gesture: UIPanGestureRecognizer) {
        // handling code
        let translation = gesture.translation(in: self.view)
        let remoteVideoView = gesture.view!
        remoteVideoView.center = CGPoint(x: remoteVideoView.center.x + translation.x, y: remoteVideoView.center.y + translation.y )
        gesture.setTranslation(CGPoint.zero, in: self.view)
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T11:41:37.873

在不添加任何子视图的情况下显示浮动 UIView**显然是不可能**的。**IOS**系统就是这样设计的。每个应用程序都有一个**Window 和一个根 viewController**。其他所有内容都添加到此**viewController**中。要实现**浮动 UIView**之类的功能，您必须将其作为子视图添加到主视图控制器中，以便在不需要时显示和删除它。您的主视图将是覆盖整个设备屏幕的根**viewController 的视图。**我假设您知道如何在视图中添加和删除子视图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T12:05:49.010

默认情况下添加 UIView 并且它应该被隐藏，当用户触摸任何位置时，只需根据您的手指位置设置您的 UIView 位置。当触摸被移除时，只需隐藏那个 UIView。

希望这会帮助你。

一切顺利 ！！！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T12:34:45.880

你必须将你的观点添加到某些东西上。没有其他办法了。

制作一个透明的视图来容纳您的浮动视图。使用 0.0 的 alpha 向其添加浮动视图。

然后在透明视图上实现 touchesBegan：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event  {
    NSLog(@"touches began");
    myFloatingView.alpha = 1.0;
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event  {
    NSLog(@"touches began");
    myFloatingView.alpha = 0.0;
} 
```

当然，您需要对 alpha 进行一点动画处理，以获得非常流畅的效果。

# php - php 购物车警告：mysql_fetch_assoc()：

> ID：15408676
> 
> 赞同：0
> 
> 时间：2013-03-14T12:00:11.563
> 
> 标签：php, cart, shopping

我在购物车中收到错误邮件“警告：mysql_fetch_assoc()：提供的参数不是有效的 MySQL 结果资源”，我在邮件“总计：0.00 美元”上只收到此文本，但购物车不是空的

```
function emailcartview() {
$total=0;
$totalvalue=0;
$str = '';
foreach($_SESSION as $name => $value) {
    if ($value>0){
        if (substr($name, 0, 5)=='cart_'){
            $id = substr($name, 5, (strlen($name)-5));
            $get = mysql_query('SELECT id, name, price, item_number FROM products WHERE id='.mysql_real_escape_string($id));

            $cart = array();
            while ($get_row = mysql_fetch_assoc($get)) {
                $cart[] = array(
                'hsid' => $get_row['id'],
                'price' => $get_row['price'],
                $price = $get_row['price'],
                'itemno' => $get_row['item_number'],
                'name' => $get_row['name'],
                'value' => $value,
                $sub = $value*$cost,
                $total += $sub,
                $totalvalue = $value,
                'realsub' => number_format($sub, 2),
                );

                }
                foreach($cart as $index => $record){
                    global $emailcart;
                    $str = "Item: {$record['itemno']} - {$record['name']} | Qty: {$record['value']} | Cost: {$record['price']} x {$record['value']} = {$record['realsub']} <br>";

           }
        }
    }
}
$str = "Total : $".number_format($total, 2);
return $str;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:15:04.770

可能`mysql_query()`由于 sql 错误而返回 FALSE。并且由于脚本没有错误处理，这个 FALSE 已被传递给`mysql_fetch_assoc`.

```
$get = mysql_query('SELECT id, name, price, item_number FROM products WHERE id='.mysql_real_escape_string($id));
if ( !$get ) {
    trigger_error(mysql_error(), E_USER_ERROR);
} 
```

# php - 为 Google 饼图创建数据

> ID：15408680
> 
> 赞同：1
> 
> 时间：2013-03-14T12:00:16.700
> 
> 标签：php, javascript, google-api

我想这可能更像是一个数学问题，但无论如何我都会尝试！我正在使用 Google 饼图 ( [https://developers.google.com/chart/interactive/docs/gallery/piechart](https://developers.google.com/chart/interactive/docs/gallery/piechart) ) 来显示我的数据。

如何创建完整的饼图，目前它只是创建无法填满整个饼图的小切片！

数据是从 Wordpress 收集的——它只是计算有多少公司是学术的、商业的或临床的。这些是如下变量：

```
<p>Academic<?php echo $academic;?></p>
<p>Business<?php echo $business;?></p>
<p>Clinical<?php echo $clinical;?></p> 
```

对于输出数字 1、2 和 1 的测试数据。通过将变量放入代码中，它会创建小切片，我该如何填充饼图？

**谷歌示例中的馅饼加起来是 24，那么等式是什么？Ps 我数学很烂！**

* * *

```
 google.load("visualization", "1", {packages:["corechart"]});
      google.setOnLoadCallback(drawVisualization);
function drawVisualization() {
  // Create and populate the data table.
        var data = google.visualization.arrayToDataTable([
          ['Task', 'Hours per Day'],
          ['Academic', '<?php echo $academic; ?>'],
          ['Business', '<?php echo $business; ?>'],
          ['Clinical', '<?php echo $clinical; ?>']
        ]);

        var options = {
          backgroundColor: 'none',
          chartArea: {width:"221",height:"221"},
          width:'221',
          height:'221',
          legend: {position: 'none'},
          tooltip: {trigger: 'none'},
          enableInteractivity: false,
          slices: {0: {color: '#a95892'}, 1:{color: '#d7663a'}, 2:{color: '#316086'}}
        };

  // Create and draw the visualization.
  new google.visualization.PieChart(document.getElementById('chart_div')).
      draw(data, options);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T12:14:09.207

这应该有效（至少它在代码游乐场中对我有用）：

```
function drawVisualization() {
var data = google.visualization.arrayToDataTable([
    ['Type', 'Amount'],
    ['Academic', <?php echo $academic;?>],
    ['Business', <?php echo $business;?>],
    ['Clinical', <?php echo $clinical;?>]]);
new google.visualization.PieChart(document.getElementById('visualization')).draw(data, {title:"how many?"});
} 
```

[http://h3n.info/pie.png](http://h3n.info/pie.png)

# php - 在 copy() 错误重定向页面上 - PHP

> ID：15408684
> 
> 赞同：0
> 
> 时间：2013-03-14T12:00:26.903
> 
> 标签：php

正常的`copy("thisflie.php","here.php")or die("error message");`

我可以用吗`if(copy()) { redirect page}`

如果`copy()`我如何重定向页面有错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T12:03:29.377

如果您检查[文档](http://php.net/manual/en/function.copy.php)，您可以看到`copy()`return`TRUE`或者`FALSE`您可以简单地执行以下操作：

```
if(copy($source, $dest) === false){
   // error here
} 
```

老实说，第一个停靠点应该是文档。作为旁注，`or die()`永远不应该是“正常的”，你应该处理你的错误，而不仅仅是在执行过程中终止脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T12:04:20.843

就用这个

```
if(copy() === false){
   // error here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T12:08:06.757

[http://php.net/manual/en/function.copy.php](http://php.net/manual/en/function.copy.php)

返回值

成功时返回 TRUE，失败时返回 FALSE。

所以是的，你可以！

# sharepoint - 使用客户端对象模型 SharePoint 2010 以编程方式获取 ListItemVersion

> ID：15408687
> 
> 赞同：8
> 
> 时间：2013-03-14T12:00:32.143
> 
> 标签：sharepoint, sharepoint-2010, .net-3.5, sharepoint-clientobject

我有一个场景，我必须将 SharePoint 2010 列表（名称=“VersionTestList”）中的所有数据移动到 SQL 服务器数据库。由于列表中启用了版本控制，我也想移动以前的版本详细信息。无论如何，我能够移动最新的项目，但不幸的是我无法获得以前的版本数据。我已经尝试过使用客户端对象模型并能够获取版本，但无法获取相应版本的 ListItem。请在下面找到我到目前为止尝试过的代码，并帮助我解决这个问题。

另外，我正在使用这样的 ListItem 版本：

```
string path = web.ServerRelativeUrl + "/Lists/VersionTestTable/1_.000";
File file = web.GetFileByServerRelativeUrl(path);
clientContext.Load(file, item=>item.ListItemAllFields);
FileVersionCollection versions = file.Versions;
clientContext.Load(versions);
oldVersions = clientContext.LoadQuery(versions.Where(v => v != null));
clientContext.ExecuteQuery(); 
```

我的整个代码是这样的：

```
class Program
{
    static void Main(string[] args)
    {
        GetVersionsUsingCOM();
    }
    public static void GetVersionsUsingCOM()
    {
        File file;
        FileVersionCollection versions;
        IEnumerable<Microsoft.SharePoint.Client.FileVersion> oldVersions;
        ClientContext clientContext = new ClientContex("http://server:1200/test/Poc");
        Web web = clientContext.Web;
        clientContext.Load(web);
        clientContext.ExecuteQuery();

        string path = web.ServerRelativeUrl + "/Lists/VersionTestTable/1_.000";
        file = web.GetFileByServerRelativeUrl(path);
        clientContext.Load(file, item=>item.ListItemAllFields);
        //clientContext.ExecuteQuery();

        versions = file.Versions;
        clientContext.Load(versions);
        oldVersions = clientContext.LoadQuery(versions.Where(v => v != null));
        clientContext.ExecuteQuery();

        if (oldVersions != null)
        {
            foreach (Microsoft.SharePoint.Client.FileVersion _version in oldVersions)
            {
                int count=0;
                Console.WriteLine(_version.CheckInComment);
                Console.WriteLine("Version : {0}", _version.VersionLabel);

          //// Working fine till here but unable to get the version details from version.Url
                string versionItemUrl = web.ServerRelativeUrl +"/" + _version.Url;
                File oldFile = web.GetFileByServerRelativeUrl(versionItemUrl);
                clientContext.Load(oldFile, f=>f.ListItemAllFields);
                clientContext.ExecuteQuery();

                Console.WriteLine(oldFile.ListItemAllFields["Name"]);
                count++;
            }
            oldVersions = null;
        }
        Console.ReadLine();

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-12T11:24:25.323

你必须`web.ServerRelativeUrl`像这样初始化

```
oldVersions = clientContext.LoadQuery(versions.Where(v => v != null));
clientContext.Load(web, w => w.ServerRelativeUrl);
clientContext.ExecuteQuery(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-02T07:20:20.930

你可以像这样得到旧版本的文件

```
string versionItemUrl = file.ServerRelativeUrl.Replace(Path.GetFileName(file.ServerRelativeUrl),"") + _version.Url;
File oldFile = web.GetFileByServerRelativeUrl(versionItemUrl);
clientContext.Load(oldFile, f=>f.ListItemAllFields);
clientContext.ExecuteQuery(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-08-01T09:30:51.153

您应该能够获取列表项数据，使用`SPFileVersion.Properties`它将为您提供文件元数据的哈希表，请参阅[MSDN - SPFileVersion.Properties Property](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spfileversion.properties%28v=office.14%29.aspx)。

在你的`foreach`尝试里面

```
Hashtable oHash = oFileVersion.Properties;
ICollection collKeys = oHash.Keys;

foreach (object oKey in collKeys)
{
    Console.WriteLine(oKey.ToString() + " :: " + oHash[oKey.ToString()].ToString());
} 
```

# wpf - 在屏幕上存储各种 ui 元素数据的最佳方式

> ID：15408688
> 
> 赞同：1
> 
> 时间：2013-03-14T12:00:32.927
> 
> 标签：wpf

我正在开发一个图表工具，我将控件拖放到图表表面，就像 VS 或 visio 或绘画一样。

放置在表面上的每个控件/元素将在右键单击时显示上下文菜单“属性”。“属性”对话框将显示一组与每个元素/控件相关的数据。

我的问题是如何最好地存储/加载这些非 UI 数据，附加到表面上的每个元素/控件。

例如，我在设计模式下创建元素 LED1、断路器 1、连接器 1。我将为
每个元素存储不同的数据集。

存储逻辑会是这样

```
 for all elements on diagram
    1\. input element id,element type.
    2\. store data for that element ID. 
```

当我创建的图表作为应用程序运行时，加载程序必须从存储中为每个元素检索适当的数据。

加载器逻辑可能是这样的

对于图表上的所有元素

1.  检测元素id和元素类型
2.  获取上述 id 的数据。

我认为 xml 的资源。但我的经理似乎并不热情。

我想知道最有经验/最熟练的 wpf 开发人员将如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:20:33.517

我可能不完全理解你的问题。但是我们以自定义二进制格式存储我们的业务数据，这基本上只是将我们的业务数据树的属性值转储到数据库中。根据您的要求，您需要确保处理文件格式（不同版本）的更改并正确处理交叉引用。每个对象都自己转储，第二遍确保解决了交叉引用。

除此之外，我会让它尽可能简单：

每种类型的图表元素的模型类，它们本身仅存储业务相关数据（我会将图表应用程序中的位置和大小视为业务数据）。这些模型可以被序列化。对这些模型进行操作的管理器类，包括撤消重做、视图模型创建等。以及包装这些模型并存储其他内容的视图模型，例如命令、ui 信息（被选中、展开等）。

对于视图，我强烈建议使用虚拟化画布创建自定义 ItemsControl。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:19:02.640

我认为这取决于规模。如果您有数千个对象，您需要保存/加载哪个状态，您最好设置一个数据库，您将在其中存储数据。如果它只有几十个对象 - XmlSerialization 是最明显的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T12:21:07.757

我不认为 XML 是一个坏方法。事实上，这是 Office 子元素的存储方式。看看微软的[XPS 打包](http://msdn.microsoft.com/en-us/library/system.io.packaging.aspx)格式和 API。( [MSDN](http://msdn.microsoft.com/en-us/magazine/cc163664.aspx) )

# c# - 从具有不同列数的逗号分隔文本文件中读取值的最快方法

> ID：15408689
> 
> 赞同：1
> 
> 时间：2013-03-14T12:00:37.917
> 
> 标签：c#, .net, csv

![在此处输入图像描述](../Images/baac06e4ed4b2b840b65b6ac5db85b66.png)

使用 c# 将文本文件中的值（参见上面的示例屏幕截图）读取到 excel 或 .csv 文件中的最有效方法是什么？

第一行将始终具有列名，在此示例中它们是 6 列，但这不是标准。在另一个文件中，列可以是 4 或 9。

跳过那些空白行也很好。

请注意，文本文件可以大到 2 或 4 GB。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:03:31.973

您可以使用 a `BufferedStream`which 作为现有流的缓冲区，即`FileStream`有助于提高性能。

```
using (FileStream fs = File.Open(path, FileMode.Open, FileAccess.Read, FileShare.ReadWrite))
using (BufferedStream bs = new BufferedStream(fs))
using (StreamReader sr = new StreamReader(bs))
{
   string line;
   while ((line = sr.ReadLine()) != null)
   {

   }
} 
```

资料来源：

[在 C# http://msdn.microsoft.com/en-us/library/system.io.bufferedstream.aspx](http://msdn.microsoft.com/en-us/library/system.io.bufferedstream.aspx)[中读取带有流的大型文本文件](https://stackoverflow.com/questions/2161895/reading-large-text-files-with-streams-in-c-sharp)

# php - 如何使用 PHP 从字符串中删除最后一个逗号？

> ID：15408691
> 
> 赞同：110
> 
> 时间：2013-03-14T12:00:43.820
> 
> 标签：php, string, substr

我正在使用循环从数据库中获取值，结果如下：

```
'name', 'name2', 'name3', 
```

我想要这样的：

```
'name', 'name2', 'name3' 
```

我想在循环的最后一个值之后删除逗号。

* * *

## 回答 #1

> 赞同：249
> 
> 时间：2013-03-14T12:02:17.933

使用[`rtrim`](http://php.net/manual/en/function.rtrim.php)功能：

```
rtrim($my_string, ','); 
```

第二个参数表示要删除的字符。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-03-14T12:02:11.290

尝试：

```
$string = "'name', 'name2', 'name3',";
$string = rtrim($string,','); 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2015-03-30T08:59:27.417

试试下面的代码：

```
$my_string = "'name', 'name2', 'name3',";
echo substr(trim($my_string), 0, -1); 
```

使用此代码删除字符串的最后一个字符。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2016-03-22T06:59:29.253

您可以使用`substr`函数来删除它。

```
$t_string = "'test1', 'test2', 'test3',";
echo substr($t_string, 0, -1); 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2014-02-04T07:55:24.103

`rtrim`功能

```
rtrim($my_string,','); 
```

第二个参数表示要从右侧删除的逗号。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-03-14T12:02:31.757

利用`rtrim()`

```
rtrim($string,','); 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2018-11-30T12:07:39.090

为此目的最好使用内爆。Implode 简单而且很棒：

```
 $array = ['name1', 'name2', 'name3'];
    $str = implode(', ', $array); 
```

输出：

```
 name1, name2, name3 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2017-04-19T09:27:38.937

如果您使用作为子字符串的多字节文本，它将影响您的脚本。如果是这种情况，我强烈建议您在 php.ini 中启用 mb_* 函数或执行此操作`ini_set("mbstring.func_overload", 2);`

```
$string = "'test1', 'test2', 'test3',";
echo mb_substr($string, 0, -1);
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2019-10-24T05:56:04.583

您可以使用以下技术之一删除最后一个逗号 (,)

**解决方案1：**

```
$string = "'name', 'name2', 'name3',";  // this is the full string or text.
$string = chop($string,",");            // remove the last character (,) and store the updated value in $string variable.
echo $string;                           // to print update string. 
```

**解决方案2：**

```
$string = '10,20,30,';              // this is the full string or text.
$string = rtrim($string,',');
echo $string;                       // to print update string. 
```

**解决方案3：**

```
 $string = "'name', 'name2', 'name3',";  // this is the full string or text.
 $string = substr($string , 0, -1);
 echo $string; 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-12-09T11:44:16.813

它很简单：

```
$commaseparated_string = name,name2,name3,;
$result = rtrim($commaseparated_string,','); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-09-04T15:24:51.887

在循环期间应用的解决方案：

```
//1 - Using conditional:

$source = array (1,2,3);
$total = count($source);

$str = null;

for($i=0; $i <= $total; $i++){ 

    if($i < $total) {
        $str .= $i.',';
    }
    else {
        $str .= $i;
    }
}

echo $str; //0,1,2,3

//2 - Using rtrim:

$source = array (1,2,3);
$total = count($source);

$str = null;

for($i=0; $i <= $total; $i++){ 

        $str .= $i.',';
}

$str = substr($str,0,strlen($str)-1);
echo $str; //0,1,2,3 
```

# c# - Windows Phone：如何在未经用户许可的情况下拨打电话

> ID：15408693
> 
> 赞同：-5
> 
> 时间：2013-03-14T12:00:49.997
> 
> 标签：c#, windows-phone

我需要开发一个必须进行预定呼叫的应用程序。问题是它必须在未经用户许可的情况下调用。此外，它必须在一段时间后结束通话。因此我不能使用`PhoneCallTask`. 我听说`Microsoft.Phone.Media.Extended.dll`并`Microsoft.Phone.InteropServices.dll`使用了手机的更多功能。

我下载了它们，但我无法将它们添加为 Visual Studio 中项目的参考。它说

> *无法将对更高版本或不兼容程序集的引用添加到项目中。*

我的问题是有什么方法可以实现这样的功能（*未经许可的呼叫和不与用户进行任何交互的结束呼叫。*）？

解决方案可以适用于 windows phone 7.1 或 windows phone 8。

好消息是我不会将它上传到商店......因此，我不需要它进行认证。谢谢...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-14T12:02:30.227

这根本不可能，这是有充分理由的。无论您认为自己有什么充分的理由，这都不是实现目标的正确方法。此外，确实允许认证合作伙伴使用更多功能的互操作程序集仍然不提供这样的功能。

你认为这会导致什么？它会导致程序，默默地拨打非常昂贵的号码。

# applescript - 如何使用 AppleScript 在 Itunes 的子文件夹中选择播放列表？

> ID：15408694
> 
> 赞同：3
> 
> 时间：2013-03-14T12:00:57.127
> 
> 标签：applescript, itunes

此代码将返回 iTunes 中的所有播放列表：

```
tell application "iTunes"

get name of playlists

end tell 
```

如何返回子文件夹中的所有播放列表？

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T13:31:11.300

你可以尝试这样的事情：

```
tell application "iTunes"
    set myList to {}
    set myFolder to folder playlist "testFolder"

    set myPlaylists to playlists
    repeat with aPlaylist in myPlaylists
        try
            if aPlaylist's parent = myFolder then set end of myList to aPlaylist's name
        end try
    end repeat

    return myList
end tell 
```

# jquery - JqueryDateTimePicker 不工作

> ID：15408697
> 
> 赞同：1
> 
> 时间：2013-03-14T12:01:03.927
> 
> 标签：jquery, asp.net-mvc-3

```
I am struggling to make datepicker work. 
```

我添加了所有脚本，但单击文本框时仍然看不到日期选择器。如果我错了，请纠正我。我的代码：

```
 //<![CDATA[
     $(document).ready(function () {
         $('#datePicker').datetimepicker({
         });
     });

     $(function () {
         $('#EndDate').datetimepicker({
             duration: '',
             dateFormat: 'dd/mm/yy',
             showTime: true,
             constrainInput: false
         });
     });
  //]]> 
```

我的html：

```
 <p>
    Date:
    <input type="text" id="datePicker" />
    </p>
    <p>
        <%= Html.Label("EndDate","EndDate:")%>
        <%= Html.TextBox("EndDate") %>
        <%= Html.ValidationMessage("EndDate","*")%>
    </p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T13:07:47.553

确保在包含 datetimepicker.js 之前包含了 JqueryUI.js。

请查看以下链接中的要求部分。

[http://trentrichardson.com/examples/timepicker/](http://trentrichardson.com/examples/timepicker/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:12:17.953

我认为错误在这里：

```
$(document).ready(function () {
     $('#datePicker').datepicker();

     $('#EndDate').datepicker({
         duration: '',
         dateFormat: 'dd/mm/yy',
         showTime: true,
         constrainInput: false
     });
 }); 
```

`and be sure to load jquery ui library too after jquery.`

# c# - 从 Memorystream 将灰度 BMP 写入 ZIP 文件

> ID：15408699
> 
> 赞同：0
> 
> 时间：2013-03-14T12:01:06.797
> 
> 标签：c#, .net, bitmap, dotnetzip, grayscale

我正在尝试测试编写单个图像或压缩包是否更快。我的方法是创建一个 0 到 255（8 位图像）之间值的随机字节数组，并从中形成一个位图，使用 Bitmap.Save 重复写入。通过这种方式，我可以将 PixelFormat 设置为 Format8bppIndexed，从而提供灰度图像：

```
// Random number Generator
Random rnd = new Random();

// Create a single image
int Width = 640;
int Height = 512;
var b = new Bitmap(Width, Height, PixelFormat.Format8bppIndexed);
ColorPalette ncp = b.Palette;
for (int i = 0; i < 256; i++)
    ncp.Entries[i] = Color.FromArgb(255, i, i, i);
b.Palette = ncp;

var BoundsRect = new Rectangle(0, 0, Width, Height);
BitmapData bmpData = b.LockBits(BoundsRect,
                ImageLockMode.WriteOnly,
                b.PixelFormat);
IntPtr ptr = bmpData.Scan0;
int bytes = bmpData.Stride * b.Height;
var rgbValues = new byte[bytes];

// fill in rgbValues, e.g. with a for loop over an input array
rnd.NextBytes(rgbValues);

Marshal.Copy(rgbValues, 0, ptr, bytes);
b.UnlockBits(bmpData);

// copy image to a list of ~1000
List<Bitmap> bmps = new List<Bitmap>();
for (int i = 0; i < 500; i++)
    bmps.Add(new Bitmap(b));

// Write to individual files
DateTime t0=DateTime.Now;
for (int i=0;i<bmps.Count;i++)
    b.Save(@"C:\Temp\DiskTransferTest\IndividualImages\" + i.ToString() + ".bmp");
DateTime t1=DateTime.Now;
Console.WriteLine("Time to write individually: " + (t1-t0).ToString()); 
```

之后，我尝试将它们全部压缩到一个 ZIP 文件中并使用 DotNetZip 保存。这可行，但我得到的是彩色图像而不是灰度图像，因此文件大小要大得多。

```
// Create memorystreams from bitmap to pass to DotNetZip
List<MemoryStream> mss = new List<MemoryStream>();
for (int i = 0; i < bmps.Count; i++)
{
    mss.Add(new MemoryStream());
    bmps[i].Save(mss[i], ImageFormat.Bmp);
    mss[i].Seek(0, SeekOrigin.Begin);
}

// Compress and write
t0 = DateTime.Now;
using (ZipFile zipfile = new ZipFile())
{
    zipfile.CompressionLevel = 0;
    int i=0;
    foreach (MemoryStream ms in mss)
        {
         string pictureName = i.ToString() + ".bmp";
         zipfile.AddEntry(pictureName,ms);
         i++;
        }           
    zipfile.Save(@"C:\Temp\DiskTransferTest\zipped.zip");
}
t1 = DateTime.Now;
Console.WriteLine("Time to write compressed: " + (t1 - t0).ToString()); 
```

关于如何通过 MemoryStream 将灰度写入 zip 的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T13:18:07.873

据我所知，使用该类创建**真正**的灰度图像是不可能的。您必须将当前的属性`Bitmap`交换为仅存储每种颜色一个字节的属性，而不是每种 ARGB 颜色所需的四个字节。该框架不包含任何此类，不继承基类或实现接口，并且它也是密封的，因此您也不能从该类继承。`Bitmap.Palette``ColorPalette``GrayscalePalette``ColorPalette`

另一方面，检查位图文件格式规范我发现没有办法保存**真正**的灰度位图图像（使用 256 字节颜色表）。在 Photoshop CS6 中保存 8 位灰度图像，然后再次打开它表明它已保存为 8 位颜色索引图像（尽管对于调色板中的所有颜色，R = G = B）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T13:59:36.487

问题是您的新位图不是 8bpp 位图。考虑您的代码：

```
// copy image to a list of ~1000
List<Bitmap> bmps = new List<Bitmap>();
for (int i = 0; i < 500; i++)
    bmps.Add(new Bitmap(b));

// Write to individual files
DateTime t0=DateTime.Now;
for (int i=0;i<bmps.Count;i++)
    b.Save(@"C:\Temp\DiskTransferTest\IndividualImages\" + i.ToString() + ".bmp"); 
```

位图`b`是 8bpp 位图。您正在将其写入文件。但如果你检查`bmps[0]`一下，我想你会发现它`PixelFormat`是 32bpp。至少，当我执行此代码时会发生这种情况：

```
var bmp = new Bitmap(640, 480, PixelFormat.Format8bppIndexed);
Console.WriteLine(bmp.PixelFormat); // 8 bpp
var bmp2 = new Bitmap(bmp);
Console.WriteLine(bmp2.PixelFormat); // 32 bpp 
```

在将位图写入内存流的代码中，您访问`bmps[i]`的是 ，而不是 8bpp 图像`b`，就像写入文件时一样。

您需要创建列表位图，设置它们的属性，然后复制`b`. 您不能通过`new Bitmap(b)`构造函数调用复制位图及其属性。

# c# - 如何翻译 ServiceStack 中的复杂对象？

> ID：15408701
> 
> 赞同：4
> 
> 时间：2013-03-14T12:01:09.960
> 
> 标签：c#, servicestack

假设我有两个对象：

```
class Order
{
    string Name {get; set;}
    Customer Customer {get; set;}
    Item[] Items {get; set;}
} 
```

和

```
class OrderDTO
{
    string Name {get; set;}
    CustomerDTO Customer {get; set;}
    ItemDTO[] Items {get; set;}
} 
```

如果我收到一个`orderDTO`完全填充的对象并且执行`orderDTO.TranslateTo<Order>()`结果将只`Name`填充，而不是`Customer`or `Items`。有没有办法进行递归翻译，或者唯一的选择是手动翻译客户和每个项目？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T14:45:21.907

我会将其包装在可重用的扩展方法中，例如：

```
public static OrderDTO ToDto(this Order from)
{
    return new OrderDTO { 
        Name = from.Name,
        Customer = from.ConvertTo<CustomerDTO>(),
        Items = from.Items.Map(x => x.ConvertTo<ItemDTO>()).ToArray(),
    }
} 
```

然后可以在您需要映射到 Order DTO 时调用它，例如：

```
return order.ToDto(); 
```

wiki 上提供了更多 ServiceStack 的[自动映射](https://github.com/ServiceStack/ServiceStack/wiki/Auto-mapping)示例。

ServiceStack 的准则是，如果您的映射需要的不仅仅是从自动映射器推断出的默认常规行为，那么您应该将其包装在 DRY 扩展方法之后，以便您的映射所需的扩展和自定义可以清晰地表达并在代码中轻松维护。这被推荐用于 ServiceStack 中的许多事情，例如在代码中维护非常规和复杂的 IOC 绑定，而不是依赖于晦涩的重量级 IOC 特性。

如果你喜欢它，你当然可以采用像 AutoMapper 这样的 3rd 方工具。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T13:57:44.777

您将不得不自己明确地处理复杂的映射。以下是来自 ServiceStack src 的一些单元测试，展示了当前如何处理复杂类型。

可以看到 Car 对象被序列化为 JSON。

```
var user = new User() {
    FirstName = "Demis",
    LastName = "Bellot",
    Car = new Car() { Name = "BMW X6", Age = 3 }
};

var userDto = user.TranslateTo<UserDto>();

Assert.That(userDto.FirstName, Is.EqualTo(user.FirstName));
Assert.That(userDto.LastName, Is.EqualTo(user.LastName));
Assert.That(userDto.Car, Is.EqualTo("{Name:BMW X6,Age:3}")); 
```

我同意 Trust Me - 我是 Automapper 值得使用的医生。内置的翻译旨在减少依赖。

# hadoop - Hadoop previous.checkpoint 位置

> ID：15408705
> 
> 赞同：0
> 
> 时间：2013-03-14T12:01:18.547
> 
> 标签：hadoop, hdfs

我尝试了 hadoop-1.0.3 和 1.0.4。两者都在伪集群模式下。

我的理解是previous.checkpoint目录应该创建在“fs.checkpoint.dir”指定的二级名称节点下？在所有情况下，我都在“dfs.name.dir”指定的名称节点目录下找到它。这与伪模式有关还是我的理解有误？有人可以帮忙吗！

下面是我的**hdfs-site.xml**文件。

```
<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>

<!-- Put site-specific property overrides in this file. -->

<configuration>
    <property>
        <name>dfs.replication</name>
        <value>1</value>
    </property>
    <property>
        <name>dfs.name.dir</name>
        <value>/home/hadoop/lab/hdfs/namenode</value>
    </property>
    <property>
        <name>dfs.data.dir</name>
        <value>/home/hadoop/lab/hdfs/datanode</value>
    </property>
    <property>
        <name>fs.checkpoint.dir</name>
        <value>/home/hadoop/lab/hdfs/secnamenode</value>
    </property>
</configuration> 
```

下面是守护进程的高级目录结构

```
hadoop@ubuntu:~/lab/hdfs$ ls -l
total 12
drwxr-xr-x 6 hadoop hadoop 4096 Mar 14 03:41 datanode
drwxrwxr-x 5 hadoop hadoop 4096 Mar 14 03:41 namenode
drwxrwxr-x 4 hadoop hadoop 4096 Mar 14 04:46 secnamenode 
```

下面是 NameNode 目录详细信息

```
hadoop@ubuntu:~/lab/hdfs$ ls -l namenode
total 12
drwxrwxr-x 2 hadoop hadoop 4096 Mar 14 04:46 current
drwxrwxr-x 2 hadoop hadoop 4096 Mar 14 03:13 image
-rw-rw-r-- 1 hadoop hadoop    0 Mar 14 03:41 in_use.lock
drwxrwxr-x 2 hadoop hadoop 4096 Mar 14 03:34 previous.checkpoint 
```

以下是 SNN 目录详细信息

```
hadoop@ubuntu:~/lab/hdfs$ ls -l secnamenode
total 8
drwxrwxr-x 2 hadoop hadoop 4096 Mar 14 04:46 current
drwxrwxr-x 2 hadoop hadoop 4096 Mar 14 03:46 image
-rw-rw-r-- 1 hadoop hadoop    0 Mar 14 03:41 in_use.lock 
```

如果您需要任何进一步的细节，请告诉我。

谢谢 破布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-02T09:28:56.437

我对此进行了广泛而绝望的搜索。似乎有一个长期悬而未决的错误[HDFS-1839从](https://issues.apache.org/jira/browse/HDFS-1839)*SecondaryNameNode*中删除了*previous.checkpoint*目录。同样的错误可能是在*NameNode*下创建此目录的原因。

 **到目前为止，我已经看到了 hadoop 的所有版本，并且在所有这些下，*previous.checkpoint*目录始终在*NameNode*下创建。

希望很快这个错误将被修复或 Apache Hadoop 澄清为什么在 NameNode 下创建目录**

# kendo-ui - 剑道网格 - 将组合框和图标添加到同一列

> ID：15408706
> 
> 赞同：0
> 
> 时间：2013-03-14T12:01:20.747
> 
> 标签：kendo-ui, kendo-grid, kendo-combobox

如果您有剑道网格，是否可以在同一列中有组合框和图标？基本上使用编辑器和命令？或者另一个问题是对命令列使用编辑器。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:44:54.400

使用类似这样的编辑器功能：

```
editor: function (container, options) {
    // Add icon
    $('<span class="k-icon k-add"></span>').appendTo(container);
    // Add container for the combobox
    var span = $('<span></span>').appendTo(container);
    // Define the combobox
    $('<input name="' + options.field + '"></input>')
            .appendTo(span)
            .kendoComboBox({
                dataSource: [ "Seatle", "Madrid", "Sofia", "Palo Alto" ]
            });
} 
```

它可能会做得更紧凑，但在这里我试图明确不同的步骤，而不是链接更多的功能。

在此处运行示例：http: [//jsfiddle.net/OnaBai/ehnSq/12/](http://jsfiddle.net/OnaBai/ehnSq/12/)尝试编辑`City`

# java - Java SerialPortEvent 问题：DATA_AVAILABLE 调用比传入数据更快

> ID：15408708
> 
> 赞同：5
> 
> 时间：2013-03-14T12:01:27.443
> 
> 标签：java, events, serial-port, rxtx, serial-communication

我是第一次发帖，所以我希望我按照格式写所有东西。

目前，我正在开发一个在 java 应用程序和测量设备之间使用串行通信与 RXTX 的项目。这很好用，但现在我想捕获设备随事件发送的数据。

下面的代码有效，但存在以下问题： `DATA_AVAILABLE`在发送所有数据之前将被调用 4 次。我在一个名为的字符串中捕获它，`vBuffer`并且我能够捕获数据以获取完整的字符串。

现在我想返回这个数据（完整的字符串），但是找不到一个`SerialPortEvent`会等到所有数据都发送后才返回这个字符串的。

在下面的示例中，我使用了`OUTPUT_BUFFER_EMPTY`但这在发送命令的开始时调用。这意味着当第二次发送命令时，`OUTPUT_BUFFER_EMPTY`事件将返回 vBuffer 以及来自第一个命令的数据，然后立即启动第二个命令。在第 3 次`OUTPUT_BUFFER_EMPTY`发送来自第 2 个命令的数据并启动第 3 个等。

有没有办法`DATA_AVAILABLE`等到所有数据都发送完毕，或者在发送完所有数据后是否有另一个事件会被调用？

额外信息：发送带有`Stringbuilder`字符的命令，以确保发送设备的正确格式。命令的布局如下：`<STX><COMMAND><RTX><CR><LF>`. 我可以通过查看命令何时结束来赶上结束吗？如果是这样，怎么做？

更新：这是我发送函数的代码：

```
 StringBuilder message = new StringBuilder();
  message.append(new Character((char) 2));   // STX (Start of Text)
  message.append("M");                       // Command character
  message.append(new Character((char) 3));   // ETX (End of Text
  message.append(new Character((char) 13));  // CR (Carriage Return)
  message.append(new Character((char) 10));  // LF (Line Feed)
  outputStream.write(message.toString().getBytes()); 
```

在此之后，`DATA_AVAILABLE`将启动。但不要等到所有接收到的数据都完成。

编辑：为了解决这个问题，问题仍然没有进一步。

**串行事件方法：**

```
public void serialEvent(SerialPortEvent event)
 {
  switch (event.getEventType())
  {
   case SerialPortEvent.BI:
   case SerialPortEvent.OE:
   case SerialPortEvent.FE:
   case SerialPortEvent.PE:
   case SerialPortEvent.CD:
   case SerialPortEvent.CTS:
   case SerialPortEvent.DSR:
   case SerialPortEvent.RI:
   case SerialPortEvent.OUTPUT_BUFFER_EMPTY:
    if (vBuffer != "")
     {
      System.out.println(vBuffer);
     }
     break;  
   case SerialPortEvent.DATA_AVAILABLE:
    byte[] readBuffer = new byte[40];

    try
    {
      while (inputStream.available() > 0)
      {
        int numBytes = inputStream.read(readBuffer);
      }
      vBuffer += new String(readBuffer);
      System.out.print(new String(readBuffer));
    }
    catch (IOException e)
    {
      System.out.println(e);
    }
    break; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T08:39:55.693

我找到了一种检查命令集 STX 和 ETX 的方法，也可以查看消息是否完整（ETX 在消息的末尾）。如果这是真的，那么我有一个完整的消息。

问题解决了！

```
public void serialEvent(SerialPortEvent event)
{

 if (event.getEventType() == SerialPortEvent.DATA_AVAILABLE)
 {
  System.out.println("Data available event received");

  try
  {
    int available = inputStream.available();
    byte[] readBuffer = new byte[available];

    if (available > 0)
    {
      inputStream.read(readBuffer);
    }

    messageBuffer = messageBuffer + new String(readBuffer);

    try
    {
      int start = messageBuffer.indexOf(new Character((char) 2));
      int end = messageBuffer.indexOf(new Character((char) 10));

      if (start >= 0 && end >= 0)
      {
        System.out.println("We found 1 complete message!!");
        System.out.println(messageBuffer.substring(start, end));
        _fireBufferEvent();
        messageBuffer = "";
      }
    }
    catch (IndexOutOfBoundsException ex)
    {
      System.out.println("IndexOutOfBoundsException, message not complete yet. Waiting for more data.");
    }
  }
  catch (IOException ex)
  {
    System.out.println("IOException while reading data:");
    System.out.println(ex);
  }
} 
```

# jquery - 在 MVC 中发送 JSON 数据

> ID：15408715
> 
> 赞同：0
> 
> 时间：2013-03-14T12:01:50.617
> 
> 标签：jquery, asp.net-mvc, json

目前正在对 MVC 方法进行 jQuery ajax 调用，并以以下格式从 Controller 发送数据：

```
["UserInfo ID","User ID"] 
```

控制器代码：

```
 var autoSuggestlist;
      ........
      .
     return Json(autoSuggestlist, JsonRequestBehavior.AllowGet); 
```

现在我想添加另一个不同的数据，例如：

```
[ {"editable":true,"edittype":"integer","index":"userInfoId" ] 
```

我如何在 Controller 中将这两种不同的数据发送到 jQuery Ajax

在下面的代码中

```
$.ajax(
        {
            type: "GET",
            url: "/Home/GetColumnNamesForGrid",
            data: "",
            dataType: "json",
            async: false,
            success: function (result) { 
```

结果应该让我得到上面的 JSON 数据。我需要如何修改我的控制器代码。请协助

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:08:24.563

不确定你的意思，但如果你想从控制器发送一个带有属性的对象，你可以这样做：

```
return Json(new { editable = true, edittype = "integer", index = "userInfoId" }, JsonRequestBehavior.AllowGet); 
```

然后从javascript中，您的`result`对象可以按如下方式使用：

```
var editable = result.editable;//will be true 
```

* * *

如果您实际上想同时将两种数据类型发回，则创建一个包装器对象，如下所示：

```
var myObject = new { editable = true, edittype = "integer", index = "userInfoId" };
var myArray = autoSuggestlist;

return Json(new { @myObject = myObject, @myArray = myArray}, JsonRequestBehavior.AllowGet); 
```

然后像这样在javascript中使用：

```
var myObject = result.myObject;
var editable = myObject.editable;//will be true

var myArray = result.myArray;
var firstItem = myArray[0];//will be "UserInfo ID" 
```

# javascript - 在 Nodejs 中使用异步的自定义错误

> ID：15408717
> 
> 赞同：3
> 
> 时间：2013-03-14T12:01:53.647
> 
> 标签：javascript, node.js, error-handling, async.js

我在 Nodejs 应用程序中使用异步来串联运行一系列函数。每个函数都使用 err（可以为 null）和结果调用回调。

我想要做的是在系列回调中检查特定错误......自定义错误：

```
async.series({
  one: function(callback){
       // Doing Stuff
       if(No good)
         callback(new error('Custom Error'), 'Failure');
       else
         callback(null, 1); 
  },
  two: function(callback){
      // Doing Stuff
      if(No good)
         callback(new error('Custom Error 2'), 'Failure');
      else
         callback(null, 2);
  }
},
  function(err, results) {
   if(err) {
     // Test for which error was thrown above 
   }
}); 
```

任何关于创建自定义错误然后在这种情况下对其进行测试的想法都会很棒。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T13:17:23.860

您可以创建一个自定义错误类：

```
var util    = require('util');
var MyError = function (msg) {
  MyError.super_.apply(this, arguments);
};
util.inherits(MyError, Error);
// use it in your callback
callback(new MyError(), ...);
// check for it
if (err instanceof MyError) {
  ... 
}; 
```

# php - laravel 捆绑包中的安装问题与命令

> ID：15408718
> 
> 赞同：-1
> 
> 时间：2013-03-14T12:01:53.980
> 
> 标签：php, laravel, laravel-4

我是 Laravel 的新手。我从未使用过工匠命令。现在我正在尝试安装一个包，但它说要运行以下命令：`php artisan bundle:install charisma`和 `php artisan bundle:publish. 我不知道如何运行这些命令以及在哪里运行这些命令进行安装。谁能一步一步告诉我这些命令如何以及在哪里工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T12:20:30.443

您应该在终端上运行这些命令。

假设您在`documents/projects/test`.

```
cd documents/projects/test
php artisan bundle:install charisma 
```

# c# - 使用 SilverLight Linq-to-SQL 从 2 个 SQL 表中删除

> ID：15408719
> 
> 赞同：0
> 
> 时间：2013-03-14T12:01:58.363
> 
> 标签：c#, silverlight, linq-to-sql

我在 SQL 中有 2 个表，它们都有一个名为 Selection_ID 的字段。我想`Selection_ID = inpSelectionID`使用 Linq-to-SQL 删除所有行。

**我的桌子：** ![在此处输入图像描述](../Images/abc0df18a1365a6b3defba08b690f16b.png)

**我的 C# 函数：**

```
void buttonDeleteSelectionList_Click(object sender, RoutedEventArgs e, Canvas canvasAdvancedSearchFieldResults, int inpSelectionID)
{

    PositionServiceReference.PositionServiceClient service = new PositionServiceReference.PositionServiceClient();
    service.DeleteSelectionCompleted += new EventHandler<System.ComponentModel.AsyncCompletedEventArgs>(service_DeleteSelectionCompleted);
    service.DeleteSelectionAsync(inpSelectionID);
} 
```

**我的服务代码 PositionService.svc.cs：**

```
[OperationContract]
void DeleteSelection(int inpSelectionID)
{
    PositionDataClassesDataContext context = new PositionDataClassesDataContext();

    context.Lloyds_Selection.DeleteOnSubmit(inpSelectionID);
    context.SubmitChanges();

    context.Lloyds_Selection_Vessels.DeleteOnSubmit(inpSelectionID);
    context.SubmitChanges();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:08:11.757

`DeleteOnSubmit`需要实体对象作为参数，所以如果不先从数据库中选择它就不能删除它。也有`DeleteAllOnSubmit`方法，但也需要`IEnumerable`实体。你可以这样使用它：

```
context.Lloyds_Selection.DeleteAllOnSubmit(context.Lloyds_Selection.Where(l => l.Selection_ID  == inpSelectionID)); 
```

但是，您可以使用`DataContext.ExecuteCommand`对数据库执行原始 SQL：

```
string command = string.format("DELETE FROM Lloyds_Section WHERE Selection_ID = {0}", inpSelectionID");
context.ExecuteCommand(command ); 
```

# java - 带有字符串数组的删除方法

> ID：15408722
> 
> 赞同：0
> 
> 时间：2013-03-14T12:02:02.320
> 
> 标签：java, arrays

我正在尝试编写一种删除 CD 的方法（CD 包括艺术家姓名、专辑标题和曲目标题）.. 有 5 张 CD，我想删除其中... 这就是该方法应该做的: **void delete()**将 1) 向用户询问艺术家和标题，然后尝试查找与艺术家和标题匹配的 CD，2) 如果找到则显示 CD，或者告诉用户它没有找到，以及 3) 如果找到，要求用户确认删除（这需要键盘输入），如果用户确认删除CD条目。

这是我的代码：

```
public void delete() {
    Scanner deleteInput = new Scanner(System.in);
    System.out.println("Which artist you would like to delete? ");
    System.out.println("Enter artist name and title to be deleted:");
    String artist = deleteInput.nextLine();
    String title = deleteInput.nextLine();

    for (int i = 0; i <= CDlist.length - 1; i++) {

        if ((CDlist[i].getArtist().equals(artist))
                && (CDlist[i].getTitle().equals(title))) {
            System.out.println("Found: " + CDlist[i].getArtist() + " "
                    + CDlist[i].getTitle());
            if (CDlist[i] == null) {
                continue;
            }

            System.out.println("Would you like to delete it? Yes 0 No 1");                
            if (deleteInput.nextInt() == 1) {
                CDlist[i] = null;
                cdnum--;
            }
        } else {
            System.out.println("CD not found in the list.");
        }
    } 
```

我的问题是，当我键入要删除的正确艺术家和标题时，我得到的输出为 CD 未找到（但它应该说找到然后删除它）请问我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:14:48.843

这就是我的意思。此外，在 for 循环开始后`{`，您的第一个文件中还有一个额外的内容。`if`我希望这不会造成问题。

我根据一些评论添加了忽略案例部分。

```
public void delete() {
    Scanner deleteInput = new Scanner(System.in);
    System.out.println("Which artist you would like to delete? ");
    System.out.println("Enter artist name and title to be deleted:");
    String artist = deleteInput.nextLine();
    String title = deleteInput.nextLine();

    boolean found = false;
    int idx = -1;

    System.err.println("DEBUG: Input Data");
    System.err.println("Artist Name: "+artist+" Length of String: "+artist.length());
    System.err.println("Title: "+artist+" Length of String: "+title.length());
    System.err.println();

    for (int i = 0; i <= CDlist.length - 1; i++) {

        if (CDlist[i]!=null) {
            System.err.println("DEBUG: Checking Index "+i);
            System.err.println("Artist Name: "+CDlist[i].getArtist()+" Length of String: "+CDlist[i].getArtist().length() + " Matches: "+CDlist[i].getArtist().equalsIgnoreCase(artist));
            System.err.println("Title: "+CDlist[i].getTitle()+" Length of String: "+CDlist[i].getTitle().length() + " Matches: "+CDlist[i].getTitle().equalsIgnoreCase(title));
            System.err.println();
        }

        if (CDlist[i]!=null && CDlist[i].getArtist().equalsIgnoreCase(artist) && CDlist[i].getTitle().equalsIgnoreCase(title)) {
            System.out.println("Found: " + CDlist[i].getArtist() + " " + CDlist[i].getTitle());
            found = true;
            idx = i;
                    break;
        }
    }

    if (found) {
        System.out.println("Would you like to delete it? Yes 0 No 1");                
        if (Integer.parseInt(deleteInput.nextLine()) == 1) {
            CDlist[idx] = null;
            //I am assuming cdnum is a variable of the class that can be accessed.
            cdnum--;
        }
    } else {
        System.out.println("CD not found in the list.");
    }
} 
```

注意：您不需要将 CDlist[i] 单独放在 if 语句中，您可以合并到另一个语句中。之所以可以这样做，是因为 java 会查看 left-> right 的内容，因此它会在尝试执行任何操作之前检查 null。您可以单独使用它，但您需要将它放在您的第一个 if 语句之前。

# struts2 - 在struts2中添加属性文件

> ID：15408729
> 
> 赞同：1
> 
> 时间：2013-03-14T12:02:14.057
> 
> 标签：struts2

昨天我通过参考tutorialspoint.com一直在学习struts2，这很好，但今天我遇到了一个问题。

我正在进行内部化，所以他们要求我创建属性文件并将其放在类路径中。

我通过右键单击 src 创建了属性文件，然后单击新的，然后我键入了属性，所以我单击了它，然后我创建了属性文件。

我很困惑我需要把它放在哪里，他们告诉我把它放在类路径中，但我不知道那在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:49:44.183

您应该将这些属性文件放在根文件夹，即**src 文件夹**中，因为 struts2 默认会尝试从根目录中查找属性文件。我附上了一个工作项目的片段，其中属性已经保存在类路径中。

![在此处输入图像描述](../Images/1d86153d285bed37d048051305e83804.png)

# javascript - 制作一个树形 [{"id":1},{"id":2,"children":[{"id":3},{"id":4},{"id":5,"children ":[{"id":6}]}]

> ID：15408730
> 
> 赞同：0
> 
> 时间：2013-03-14T12:02:16.593
> 
> 标签：javascript

我在javascript中有一个字符串变量，如下所示：

```
var tree='[{"id":1},{"id":2,"children":[{"id":3},{"id":4},{"id":5,"children"[{"id":6}]}]';
now i want to create a tree from this in which
# 1 and 2 will at same level
# 3 ,4 ,5 will be the sub nodes of 2.
# 6 will be the sub node of 5. 
```

请帮助通过 javascript 或 jquery 制作一个树形这个树变量。多变的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:46:33.840

有几个错别字，看评论。无论如何，你只需要使用转换`JSON.parse`

```
var tree='[{"id":1},{"id":2,"children":[{"id":3},{"id":4},{"id":5,"children":[{"id":6}]}]}]'; 
//Missing ':' near 'children' and '}]' at the end

var array = JSON.parse(tree); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:41:01.363

```
var tree='[{"id":1},{"id":2,"children":[{"id":3},{"id":4},{"id":5,"children"[{"id":6}]}]';
var objTree = JSON.parse(tree);

console.log(objTree); 
```

请注意，您有几个拼写错误 - 找到它们，获取您的字符串，然后将其放入[http://jsonlint.com的解析器中](http://jsonlint.com)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T12:35:00.517

在我看来，这没什么。我发现了一些拼写错误，但除此之外，它是一个 JSON 结构。在第二个“孩子”之后缺少一个冒号，并且也缺少一些右括号。我删除了引号。

```
var tree = [{
      "id" : 1
    }, {
      "id" : 2,
      "children" : [{
          "id" : 3
        }, {
          "id" : 4
        }, {
          "id" : 5,
          "children" : [{ //missing colon
              "id" : 6
            } //missing bracket
          ] //missing bracket
        }
      ]
    }
  ];
  console.log(JSON.stringify(tree[0]));
  console.log(JSON.stringify(tree[1]));
  console.log(JSON.stringify(tree[1].children)); 
```

# vim - Vim 使用 'a' 就像 'r'

> ID：15408733
> 
> 赞同：2
> 
> 时间：2013-03-14T12:02:18.513
> 
> 标签：vim

有没有办法像使用 r 一样插入单个字符，但是像使用 a 时一样将其附加在光标之后（并返回命令模式）？

例如

```
Some t[e]xt  " cursor on e (in command mode)
Some te[x]t  " input command I'm looking for, cursor on x and in insert mode
Some te[s]t  " type s and go back to command mode 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T12:07:30.933

这是你要找的吗？

[http://vim.wikia.com/wiki/Insert_a_single_character](http://vim.wikia.com/wiki/Insert_a_single_character)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T21:27:22.173

这是另一种有趣的方式。与其他解决方案不同，这个解决方案实际上允许您在插入模式下键入字符并自动恢复到正常模式：

```
fun! s:InsertSingle()
  aug insertSingle
    au CursorMovedI * stopinsert | au! insertSingle
  aug END
  return 'a'
endf

nnoremap <expr> <space> <SID>InsertSingle() 
```

# r - 直方图、密度核和正态分布

> ID：15408735
> 
> 赞同：1
> 
> 时间：2013-03-14T12:02:25.627
> 
> 标签：r, return, histogram, curve-fitting, kernel-density

我想绘制 Allianz SE 公司的简单损失的直方图、密度（高斯核）和拟合的相应正态分布。（这意味着，简单的损失减去简单的回报）

我有以下代码：

```
hist(alvsloss,breaks = 100, freq=F,main="Histogramm,
 density curve (gaussian kernel) of Allianz simple losses ",xlab="loss in percent",ylab="density")
lines(density(alvsloss), col="red", lwd=2)
curve(dnorm(x, mean = mean(alvsloss), sd = mean(alvsloss)), add=TRUE, col="blue", lty="dotted") 
```

现在我遇到了第一个问题：

```
The fitted normal distribution is not drawn, I get the (german) error message:

In dnorm(x, mean = mean(alvsloss), sd = mean(alvsloss)) :
  NaNs wurden erzeugt 
```

未绘制正态分布曲线。

第二个是一般性的问题：如果我省略了正态分布，那么我只有直方图和密度。比我可以通过命令在频率真假之间改变

```
 freq=T 
```

或者

```
 freq=F 
```

我附上了两张图片的截图（我必须上传它，因为我没有至少 10 个声望）。我不明白它们，如果我有 freq=T 这意味着，我在 y 轴上有密度值。所以应该有像 0.0012 或 0.1 这样的值，但不是 300 或 400 的值，密度应该是相对值吗？而且内核无论如何都不匹配，这显然是错误的？如果我有 freq=FI 得到正确的图片。现在我有了绝对值，例如，有 30 个案例我的回报大约为 0.0（中间高峰），对吗？现在密度确实合适，但我原以为它不适合这种情况，因为我认为它是 freq=T 值，所以它应该是另一种方式，在这张照片中它应该是错误的？

如果回答了这个问题，我会有更多的问题：我不喜欢 x 轴，我怎样才能有更详细的缩放？是不是这样说：右边从 0.5 到 0.1 的尾巴比左边的尾巴重，所以在这个区域我们损失的概率比收益的概率高？而极值仅出现在左侧：-0.2 的值，甚至是一个大约 -0.4 的值。所以在这种情况下没有发生极端损失，而实现了极端收益？这是正确的吗？

我的错误是什么，我看不到？

截屏：

你可以在[这里找到数据](http://uploadeasy.net/upload/nsorc.rar)

这是alvsloss数据

完整的解决方案是：

```
hist(alvsloss,breaks = 100, freq=F,main="Histogramm, density curve (gaussian kernel) of Allianz simple losses ",xlab="loss in percent",ylab="density")
lines(density(alvsloss), col="red", lwd=2) 
curve(dnorm(x, mean = mean(alvsloss), sd = sd(alvsloss)), add=TRUE, col="blue",lwd=2) 
```

这给出了以下图片：

![在此处输入图像描述](../Images/7bb2752ed02a9aa633c582f1d0fdfa2a.png)

似乎是正确的，对吧？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T12:17:06.813

R帮助说：

> 合乎逻辑的；如果 TRUE，直方图图形是频率的表示，结果的计数组件；如果为 FALSE，则绘制概率密度、组件密度

当`freq`属性为`TRUE`时，将绘制值在数据中出现的次数。如果您有一个向量，其值为 1 的 400 倍，值为 0 的 300 倍，则条形的高度在 时为 400 和 300，在 时`freq=TRUE`为 4/7 和 3/7 `freq=FALSE`。

对于你问题的第二部分，如果`NA`你的向量中有值，你必须计算平均值：

```
mean(...,na.rm=TRUE) 
```

此外，正如 ndoogan 所说，我认为您的代码中有错字。试试这个：

```
dnorm(x, mean = mean(alvsloss,na.rm=TRUE), sd = sd(alvsloss,na.rm=TRUE)) 
```

最后，您不能使用`curve`来绘制矢量。它仅适用于函数。所以你可以试试：

```
lines(dnorm(x, mean = mean(alvsloss,na.rm=TRUE), sd = sd(alvsloss,na.rm=TRUE)), col="blue", lty="dotted") 
```

或者

```
curve(dnorm,from=ToBeFilled,to=ToBeFilled,col="blue", lty="dotted",mean = mean(alvsloss,na.rm=TRUE), sd = sd(alvsloss,na.rm=TRUE))) 
```

`ToBeFilled`分别是您要绘制的区间的边界。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T12:13:03.600

我不知道从哪里获取您正在使用的数据，但尝试将 dnorm 图中的标准偏差设置为数据的标准偏差......

```
curve(dnorm(x, mean = mean(alvsloss), sd = sd(alvsloss)), add=TRUE, col="blue", lty="dotted") 
```

# r - R中按时间分组

> ID：15408745
> 
> 赞同：-3
> 
> 时间：2013-03-14T12:02:39.430
> 
> 标签：r, time, dataframe, group-by

我希望有人可以帮助我解决这个问题，

我有一个 df，其中一列是时间序列。

我需要根据时间将这些时间序列分组为 4 个不同的值。我想将时间按 07:00 - 11:30、11:31 - 16:59、17:00 - 19:59 和最后 20:00 - 24:00 分组。每个组可以命名为 1、2、3 和 4。

最后将该列添加到我的 df.

最好的问候和感谢！

**编辑**添加一个可重现的例子：

```
c( "07:02:03", "07:32:03", "08:02:03", "08:32:03", 
"09:02:03", "09:32:03", "10:02:03", "10:32:03", "11:02:03", "11:32:03", 
"12:02:03", "12:32:03", "13:02:03", "13:32:03", "14:02:03", "14:32:03", 
"15:02:03", "15:32:03", "16:02:03", "16:32:03", "17:02:03", "17:32:03", 
"18:02:03", "18:32:03", "19:02:03", "19:32:03", "20:02:03", "20:32:03", 
"21:02:03", "21:32:03", "22:02:03", "22:32:03", "23:02:03", "23:32:03", 
"00:02:03", "00:32:03", "01:02:03", "01:32:03", "02:02:03", "02:32:03", 
"03:02:03", "03:32:03", "04:02:03", "04:32:03", "05:02:03", "05:32:03", 
"06:02:03", "06:32:03", "07:02:03", "07:32:03", "08:02:03", "08:32:03", 
"09:02:03", "09:32:03", "10:02:03", "10:32:03", "11:02:03", "11:32:03", 
"12:02:03", "12:32:03", "13:02:03", "13:32:03", "14:02:03", "14:32:03", 
"15:02:03", "15:32:03", "16:02:03", "16:32:03", "17:02:03", "17:32:03", 
"18:02:03", "18:32:03", "19:02:03", "19:32:03", "20:02:03", "20:32:03", 
"21:02:03", "21:32:03", "22:02:03", "22:32:03", "23:02:03", "23:32:03", 
"00:02:03", "00:32:03", "01:02:03", "01:32:03", "02:02:03", "02:32:03", 
"03:02:03", "03:32:03", "04:02:03", "04:32:03", "05:02:03", "05:32:03", 
"06:02:03", "06:32:03", "07:02:03", "07:32:03", "08:02:03", "08:32:03", 
"09:02:03", "09:32:03", "10:02:03", "10:32:03", "11:02:03", "11:32:03", 
"12:02:03", "12:32:03", "13:02:03", "13:32:03", "14:02:03", "14:32:03", 
"15:02:03", "15:32:03", "16:02:03", "16:32:03", "17:02:03", "17:32:03", 
"18:02:03", "18:32:03", "19:02:03", "19:32:03", "20:02:03", "20:32:03", 
"21:02:03", "21:32:03", "22:02:03", "22:32:03", "23:02:03", "23:32:03", 
"00:02:03", "00:32:03", "01:02:03", "01:32:03", "02:02:03", "02:32:03", 
"03:02:03", "03:32:03", "04:02:03", "04:32:03", "05:02:03", "05:32:03", 
"06:02:03", "06:32:03", "07:02:03", "07:32:03", "08:02:03", "08:32:03", 
"09:02:03", "09:32:03", "10:02:03", "10:32:03", "11:02:03", "11:32:03", 
"12:02:03", "12:32:03", "13:02:03", "13:32:03", "14:02:03", "14:32:03", 
"15:02:03", "15:32:03", "16:02:03", "16:32:03", "17:02:03", "17:32:03", 
"18:02:03", "18:32:03", "19:02:03", "19:32:03", "20:02:03", "20:32:03", 
"21:02:03", "21:32:03", "22:02:03", "22:32:03", "23:02:03", "23:32:03", 
"00:02:03") 
```

-Hlynur

**EDIT2**：添加样本df，

```
a  b  c
1  3  09:00
2  5  13:00
3  8  16:00
4  7  21:00
5  9  19:00
6  2  22:00 
```

......

然后 d 列会给我组 (1,2,2,4,3,4)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T08:16:00.060

这是一种方法。您将时间戳从字符转换为整数，只需将它们的值比较在特定范围内，然后使用相应地为结果列分配一个值`ifelse`

```
df <- structure(list(a = 1:100, b = c(100L, 99L, 98L, 97L, 96L, 95L, 94L, 93L, 92L, 91L, 90L, 89L, 88L, 87L, 86L, 85L, 84L, 83L, 
    82L, 81L, 80L, 79L, 78L, 77L, 76L, 75L, 74L, 73L, 72L, 71L, 70L, 69L, 68L, 67L, 66L, 65L, 64L, 63L, 62L, 61L, 60L, 59L, 58L, 
    57L, 56L, 55L, 54L, 53L, 52L, 51L, 50L, 49L, 48L, 47L, 46L, 45L, 44L, 43L, 42L, 41L, 40L, 39L, 38L, 37L, 36L, 35L, 34L, 33L, 
    32L, 31L, 30L, 29L, 28L, 27L, 26L, 25L, 24L, 23L, 22L, 21L, 20L, 19L, 18L, 17L, 16L, 15L, 14L, 13L, 12L, 11L, 10L, 9L, 8L, 7L, 
    6L, 5L, 4L, 3L, 2L, 1L), c = c("07:02:03", "07:32:03", "08:02:03", "08:32:03", "09:02:03", "09:32:03", "10:02:03", "10:32:03", 
    "11:02:03", "11:32:03", "12:02:03", "12:32:03", "13:02:03", "13:32:03", "14:02:03", "14:32:03", "15:02:03", "15:32:03", "16:02:03", 
    "16:32:03", "17:02:03", "17:32:03", "18:02:03", "18:32:03", "19:02:03", "19:32:03", "20:02:03", "20:32:03", "21:02:03", "21:32:03", 
    "22:02:03", "22:32:03", "23:02:03", "23:32:03", "00:02:03", "00:32:03", "01:02:03", "01:32:03", "02:02:03", "02:32:03", "03:02:03", 
    "03:32:03", "04:02:03", "04:32:03", "05:02:03", "05:32:03", "06:02:03", "06:32:03", "07:02:03", "07:32:03", "08:02:03", "08:32:03", 
    "09:02:03", "09:32:03", "10:02:03", "10:32:03", "11:02:03", "11:32:03", "12:02:03", "12:32:03", "13:02:03", "13:32:03", "14:02:03", 
    "14:32:03", "15:02:03", "15:32:03", "16:02:03", "16:32:03", "17:02:03", "17:32:03", "18:02:03", "18:32:03", "19:02:03", "19:32:03", 
    "20:02:03", "20:32:03", "21:02:03", "21:32:03", "22:02:03", "22:32:03", "23:02:03", "23:32:03", "00:02:03", "00:32:03", "01:02:03", 
    "01:32:03", "02:02:03", "02:32:03", "03:02:03", "03:32:03", "04:02:03", "04:32:03", "05:02:03", "05:32:03", "06:02:03", "06:32:03", 
    "07:02:03", "07:32:03", "08:02:03", "08:32:03")), .Names = c("a", "b", "c"), row.names = c(NA, -100L), class = "data.frame")

df$d <- as.numeric(gsub(":", "", df$c))

df$result <- ifelse(df$d >= 70000 & df$d < 113100, 1, 
                    ifelse(df$d >= 113100 & df$d < 170000, 2, 
                    ifelse(df$d >= 170000 & df$d < 200000, 3, 
                    ifelse(df$d >= 200000 & df$d < 240000, 4, 0))))

df$d <- NULL

head(df, 20)
##     a   b        c result
## 1   1 100 07:02:03      1
## 2   2  99 07:32:03      1
## 3   3  98 08:02:03      1
## 4   4  97 08:32:03      1
## 5   5  96 09:02:03      1
## 6   6  95 09:32:03      1
## 7   7  94 10:02:03      1
## 8   8  93 10:32:03      1
## 9   9  92 11:02:03      1
## 10 10  91 11:32:03      2
## 11 11  90 12:02:03      2
## 12 12  89 12:32:03      2
## 13 13  88 13:02:03      2
## 14 14  87 13:32:03      2
## 15 15  86 14:02:03      2
## 16 16  85 14:32:03      2
## 17 17  84 15:02:03      2
## 18 18  83 15:32:03      2
## 19 19  82 16:02:03      2
## 20 20  81 16:32:03      2

tail(df, 20)
##       a  b        c result
## 81   81 20 23:02:03      4
## 82   82 19 23:32:03      4
## 83   83 18 00:02:03      0
## 84   84 17 00:32:03      0
## 85   85 16 01:02:03      0
## 86   86 15 01:32:03      0
## 87   87 14 02:02:03      0
## 88   88 13 02:32:03      0
## 89   89 12 03:02:03      0
## 90   90 11 03:32:03      0
## 91   91 10 04:02:03      0
## 92   92  9 04:32:03      0
## 93   93  8 05:02:03      0
## 94   94  7 05:32:03      0
## 95   95  6 06:02:03      0
## 96   96  5 06:32:03      0
## 97   97  4 07:02:03      1
## 98   98  3 07:32:03      1
## 99   99  2 08:02:03      1
## 100 100  1 08:32:03      1 
```

# c++ - downcasting dynamic_cast with non-polymorphic classes, why doesn't it compile?

> ID：15408746
> 
> 赞同：2
> 
> 时间：2013-03-14T12:02:42.630
> 
> 标签：c++, class, dynamic-cast, downcast

I have the following code:

```
using namespace std;

class BaseOk
{
public:
    virtual void ImplementMe()
    {
    };
};
class DerivedOk : public BaseOk
{
public:
    void ImplementMe()
    {
    }
};

class CBase { };
class CDerived: public CBase { };

int main() 
{ 
    CBase b; CBase* pb;
    CDerived d; CDerived* pd;

    pb = dynamic_cast<CBase*>(&d);     // ok: derived-to-base
    pd = dynamic_cast<CDerived*>(&b);  // wrong: base-to-derived  -> this doesn't compile

    // Polymorphic case

    BaseOk b2; BaseOk* pb2;
    DerivedOk d2; DerivedOk* pd2;

    pb2 = dynamic_cast<BaseOk*>(&d2);     // ok: derived-to-base
    pd2 = dynamic_cast<DerivedOk*>(&b2);  // wrong: base-to-derived -> this returns a NULL pointer

} 
```

The line with the pointer "pd" performs a downcast and I agree that it should fail because the result is a totally different object. My question is: why doesn't the dynamic_cast in that line compile at all instead of just returning a NULL pointer?

I'm using MSVC2012 compiler

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T12:12:12.707

> Why doesn't the `dynamic_cast` in that line compile at all instead of just returning a NULL pointer?

Consider this as a feature/facility rather than a limitation.

`dynamic_cast` is a mechanism where we would find the RTTI (run-time type information) of an object based on the pointer/reference.
Now suppose if a class is not at all polymorphic (i.e. doesn't contain any `virtual` method), then definitely the `dynamic_cast` will **always fail**.
Which means you don't have to use the `dynamic_cast` where there is a 0 probability of passing. *Why should you waste machine cycles on the thing which is known at compile time*? That's why compiler provides you the facility straight away.

There is another hidden advantage of this. Suppose you are using `dynamic_cast` with references, if it fails then an exception is thrown. Would anyone want to handle an exception for something which is already known at compile time!

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T12:12:49.623

Using `dynamic_cast` on a pointer to a non-polymorphic type is an error. That's a diagnosable rule, so you should get a compile-time error.

Using it on a pointer to a polymorphic type which is not convertible to the target type is not an error, and in any case is not generally detectable when compiling. It has well-defined behaviour, giving a null pointer.

# android - 如何在android中使用onResume活动

> ID：15408751
> 
> 赞同：2
> 
> 时间：2013-03-14T12:02:49.503
> 
> 标签：android, android-activity

我正在尝试构建一个应用程序，在该应用程序中我在应用程序上应用密码。当用户离开应用程序并再次打开时，我会要求输入密码。例如应用程序正在运行，用户单击主页按钮意味着离开应用程序然后他再次打开它，应用程序将要求输入密码。

我正在`onResume()`活动方法中创建一个密码对话框。但问题是，如果用户进入下一个屏幕并返回该屏幕，那么`onResume()`也会执行并要求输入密码。但我不想要这个。我希望只有当他离开应用程序并再次出现时才会出现密码警报。请告诉我应该在哪里编写该代码的任何解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:30:21.270

试试看。

假设你有 A，B 活动，在 A 中创建一个静态变量，作为loggedIn=false；

现在假设你从 A 开始 B，在 B 上的 onbackpress 方法总是让 loggedIn=true;

在活动 A 的恢复方法检查中

if(!loggedIn){ showLogin dialog } 然后再次分配 true loggedIn=true;

现在，如果用户按下主页按钮，loggedIn 标志将为 false，并且当恢复应用程序时，将调用登录对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:08:41.163

假设您有两个活动 a（显示对话框）和 b。当您从一个活动 a 导航到另一个活动时 b。活动 a 进入后台。活动 b 处于前台。两者都被放入活动后台。后堆栈的工作方式类似于 LIFO（后进先出）。当您单击返回按钮时。活动 b 从回栈中被推入并显示活动 a。当活动暂停时，它必须恢复。当您的活动停止时，会调用 onStart() 并连续调用 onResume()。因此，如果您在 onResume() 中调用对话框，它将显示出来。

看看下面的链接。

[http://developer.android.com/training/basics/activity-lifecycle/index.html](http://developer.android.com/training/basics/activity-lifecycle/index.html)。

[http://developer.android.com/guide/components/tasks-and-back-stack.html](http://developer.android.com/guide/components/tasks-and-back-stack.html)。

**注意从上面的链接引用：**多个任务可以同时在后台举行。但是，如果用户同时运行多个后台任务，系统可能会开始销毁后台活动以恢复内存，从而导致活动状态丢失。请参阅以下有关活动状态的部分。

编辑

您必须实现 onCreate() 方法来执行基本的应用程序启动逻辑，该逻辑在活动的整个生命周期内只发生一次。所以在 onCreate() 中显示对话框而不是 onResume()。除非活动被破坏，否则它不会再次被创建。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T12:35:50.367

您可以创建一个活动来处理身份验证过程并调用它 (A)。并让您当前的活动为（B）和（C）。所以，事情是这样的：

1- 活动 (A) 是启动器。

2-添加`android:noHistory="true"`到`<activity>`manifest.xml 中的活动 (A) 标记

3- 从 (A) 您可以导航到 (B) 然后到 (C)。

4- 从 (C) 您可以导航回 (B)，但您将无法导航回 (A)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T12:37:30.873

您可以在按下主页键时设置变量

```
@Override

public boolean onKeyDown(int keyCode, KeyEvent event) {

   if(keyCode == KeyEvent.KEYCODE_HOME)
    {
     fromHome = true;
    }

return false;
}; 
```

并在您从此活动导航时设置变量 false

```
fromHome = false; 
```

并检查标志`OnResume()`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T13:27:41.210

在我看来，您实际上要跟踪的是应用程序中“已启动”活动的数量：#(Started activities) > 0 则意味着您的应用程序尚未被置于后台，因为如果用户按下 Home，您的所有应用程序的活动都必然会调用 onStop()。

为了跟踪“开始”活动的数量，您可以像这样引入一个单例：

```
public class LifecycleTracker {

private LifecycleTracker mInstance;

private int mNrOfStarted;

private LifecycleTracker() {
    mNrOfStarted = 0;
}

public static LifecycleTracker getInstance() {
    if (mInstance == null) {
        mInstance = new LifecycleTracker();
    }
    return mInstance;
}

public void incrementStarted() {
    mNrOfStarted++;
}

public void decrementStarted() {
    mNrOfStarted--;
}

public boolean fromBackground() {
    return mNrOfStarted == 0;
}
} 
```

然后，在所有 Activity 的 onStart() 方法中，您应该首先检查您是否来自后台：

```
if (LifecycleTracker.getInstance().fromBackground()) {
    //start authentication
    //don't forget to increment after authentication as well!
} else {
    LifecycleTracker.getInstance().incrementStarted();
} 
```

在所有 Activity 的 onStop() 方法中，您应该减少：

LifecycleTracker.getInstance().decrementStarted();

# entity-framework - OnModelCreating 中的 DbGeography 映射

> ID：15408754
> 
> 赞同：2
> 
> 时间：2013-03-14T12:03:01.523
> 
> 标签：entity-framework, orm, poco, fluent-interface

我有一个属性纬度和经度的类。我`EF 5`用于持久性，所以 DbGeography 是一个不错的选择，但我不希望我的实体类库具有与`EF`.

是否可以映射`OnModelCreating`到此规则，以便 db 表`DbGeography`在我的班级中保持 Lat 和 Lon ？我的意思是流利的api。

如果是真的，当我调用我的存储库的 get 方法时，逆映射（从 DBGeo 到 Lat 和 Lon）是自动的吗？

提前感谢卢卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-01T04:29:26.953

如果您不打算`DbGeography`在应用程序中利用类型的特性，那么以`DbGeography`. 只需使用具有应用程序所需精度的小数类型。

# sql-server - SQL Server 的登录/用户概念向 Oracle 的过渡

> ID：15408755
> 
> 赞同：1
> 
> 时间：2013-03-14T12:03:01.693
> 
> 标签：sql-server, oracle, security, access-control

在 SQL Server 中，用户首先在服务器级别注册为**登录**名，然后将他们作为**用户**添加到该服务器上所有必要的数据库中。

甲骨文有类似的东西吗？我知道 Oracle 对象表空间类型代表 SQL Server 中的数据库对象，但在我看来，好像在 Oracle 中仅注册了数据库用户，这些用户通过细粒度的 GRANT/DENY 操作和角色成员资格访问数据库对象。

在此先感谢，
扬

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T13:30:28.053

检查这篇文章：

[Oracle中用户和模式之间的区别？](https://stackoverflow.com/questions/880230/difference-between-a-user-and-a-schema-in-oracle/11764849#11764849)

我（也）从 Sql Server 开始，不得不学习 Oracle 的不同措辞。

# google-maps - 谷歌地方评论 api 没有在回复中显示评论/评级

> ID：15408762
> 
> 赞同：0
> 
> 时间：2013-03-14T12:03:22.177
> 
> 标签：google-maps, google-places-api

我目前正在尝试使用 Places api 来获取地点评论，但它没有返回该地点的所有评论/评级（正如它在同一地点的地图/google+ 中显示的那样）。

例如-

如果我得到“圣约瑟夫医院和医疗中心”的评论，谷歌地图显示它有两条评论。但是当我收到 json 响应时，它没有显示任何评论/评级。

在此先感
谢希夫

# php - 使用 PHP 在 Linux 中连接 MS Access DB

> ID：15408765
> 
> 赞同：1
> 
> 时间：2013-03-14T12:03:25.343
> 
> 标签：php, pdo, odbc, unixodbc

我的网站托管在 bluehost.com（Linux 服务器）上，我有一个用例，我必须将一些特定的数据导出到 MS Access 文件，

我有以下代码与 MS Access 文件连接：

```
$dbh = null;    
try{
  $dbh = new PDO("odbc:Driver={Microsoft Access Driver (*.mdb)};Dbq=$file_path", $user_name, $password, $db_info);
}catch(PDOException $e){
  echo $e->getMessage();      
}   
return $dbh; 
```

但是当我在托管服务器上运行上述代码时，我得到了错误 SQLSTATE[IM002] SQLDriverConnect: 0 [unixODBC][Driver Manager]Data source name not found, and no default driver specified

后来经过一番搜索，我将数据库连接的代码更改为

```
try{
  $conn = odbc_connect("Driver={Microsoft Access Driver (*.mdb)};Dbq=$file_path", ACCESS_DB_USERNAME, ACCESS_DB_PASSWORD);
}catch(Exception $ex){
  echo $ex->getMessage();
} 
```

在上面的代码中，我没有得到任何异常，但 $conn 为 NULL，这两个代码片段在我的本地 Windows 机器上都可以正常工作，

你们能帮我解决问题吗？我想建立连接并想在 MS Access DB 上运行 INSERT INTO 语句。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T14:07:02.377

[odbc_connect](http://php.net/manual/en/function.odbc-connect.php)的文档说它返回两件事之一。

1.  ODBC 连接。
2.  错误时为 FALSE。

您的代码应该查找 FALSE，而不是异常。

文档还提供了几种不同类型的连接示例。但我认为 Bluehost 在其所有 Linux 服务器上安装 Microsoft Access 驱动程序的可能性小于零。

# java - 分布式处理的不同场景

> ID：15408768
> 
> 赞同：2
> 
> 时间：2013-03-14T12:03:34.793
> 
> 标签：java, distributed, distributed-computing, distributed-system

我有一个 Web 应用程序 - 一个简单的 Web 应用程序存档文件 - 它有多个用于不同存储类型的存储适配器，即。MongoDB 和 CouchDB。通过使用这个应用程序，我可以使用我编写的 Web 服务将数据存储/查询到那些数据库。目前我每个应用程序只能有一个数据库实例，不能有多个，这会阻止我进行并行处理。

* * *

我想要的是在多台机器上运行我的应用程序。除此之外，我想编写一个 UI，使客户端能够在不知道数据库类型/地址的情况下存储/查询数据。

我有两种不同的情况，想问你其中哪一种是更好的方法，为什么。

* * *

**1）**假设我有三台服务器运行三个单一数据库 - couchdb。我可以将我的应用程序上传到这些服务器，然后在我的 UI 或应用程序上方的层的帮助下，我可以定义一个服务器地图，以便我可以存储和查询数据。

![在此处输入图像描述](../Images/607341a62c91b4545bc38ae33d0b745f.png)

正如您在上面看到的，数据库和应用程序位于同一台服务器上，因此它们是远程的。

* * *

**2）**假设三台服务器仍在远程运行，但在这种情况下，我的应用程序是本地的。我让它接受几个数据库实例。

![在此处输入图像描述](../Images/892deec1d7903389a9fba996c5f4e287.png)

* * *

我实际上更喜欢第一个，因为在这种情况下我不需要扩展我的应用程序，但我想听听你的想法。如果你能为这种分布式场景提供一些资源，我会很高兴——我对那种东西完全没有经验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T11:02:32.883

请查看描述[Instagram 架构](http://instagram-engineering.tumblr.com/post/13649370142/what-powers-instagram-hundreds-of-instances-dozens-of)的文章。了解 3 位工程师如何处理每天 1.5 亿张照片的 15-25 百万用户是非常有趣的。

另外我会推荐[有趣](http://highscalability.com/)的博客，它描述了流行网络资源的不同可扩展性解决方案：

*   [Facebook：用于扩展数十亿消息的示例规范架构](http://highscalability.com/blog/2011/5/17/facebook-an-example-canonical-architecture-for-scaling-billi.html)
*   [Tumblr 架构 - 每月 150 亿次页面浏览量，比 Twitter 更难扩展](http://highscalability.com/blog/2012/2/13/tumblr-architecture-15-billion-page-views-a-month-and-harder.html)

有很多信息。

但最常见的是：

*   让一切尽可能简单
*   [使用知名、成熟的技术，得到社区的良好支持](http://zef.me/4235/pick-your-battles)
*   分别扩展应用程序的每个部分

尽管您可能会找到每一个的解释，但我想根据您的要求关注最后一个。

当您想让您的应用程序水平扩展时，您需要将每个集群视为单独的逻辑模块，而不考虑集群中涉及的实际服务器数量。Fe 对于您的 Web 应用程序，您可以设置该应用程序的多个实例并在它们之前设置负载平衡器。因此用户可以访问单个入口点（例如[http://mysite.com](http://mysite.com)），同时实际实例可能是任意的。

如果您需要在彼此之间进行实例协作，那么您需要避免使用内存存储，而是使用“键值”存储，例如[Redis](http://redis.io/)以及消息代理，例如[ActiveMQ](http://activemq.apache.org/)、[RabbitMQ](http://www.rabbitmq.com/)或云版本[Iron.IO](http://www.iron.io/)等.

您还需要将数据存储视为单一入口点，例如分片集群（fe MongoDB 支持开箱即用的[自动分片](http://docs.mongodb.org/manual/sharding)，大多数 NoSQL 解决方案也有它 - [CouchDB](http://guide.couchdb.org/draft/clustering.html)、[HBase](http://hbase.apache.org/replication.html)）。所以基本上你调用一些分片控制器，它根据特定的分片键重定向到相应的实例。但请注意，通常分片可能是非常重要的事情，因此在大多数情况下，当您处理 RDBMS 时，您需要使用垂直可伸缩性。

考虑到以上所有内容，我建议您采用这样的结构：

![简单模式](../Images/5c09478efa3788cb36255b6d6c65d2bf.png)

当然，理想情况下，所有服务器必须在物理上彼此靠近（fe 在同一个数据中心）。但是，如果您打算将您的应用程序用作 World-wide，那么您需要根据更少的延迟对您的实例进行分片。这是关于服务器配置的非常有趣的讲座（即使是关于 MongoDb，我相信一些方法也可能对您的情况有所帮助）：[https ://www.youtube.com/watch?v=TZOH92mZIN8](https://www.youtube.com/watch?v=TZOH92mZIN8)

但是，如果不需要将所有服务器用于分布式“map/reduce”计算，并且为了获得结果，您只需要一个特定服务器的实例，在这种情况下，我相信*场景 #1*非常适合并且更好地满足您的需求（以防万一如果您在实例之前设置负载均衡器）。

# java - Android 权限 ACCES_NETWORK_STATE 错误？

> ID：15408771
> 
> 赞同：2
> 
> 时间：2013-03-14T12:03:38.113
> 
> 标签：java, android, eclipse, android-permissions

我在我的 android 应用程序中使用 Google V2，它运行良好。然而，Eclipse 每次运行时都会给我这个警告：

```
Please add <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/> into AndroidManifest.xml to ensure correct behavior under poor connectivity conditions. 
```

但是我已经在清单中添加了这个权限，并且在我的 xml 中有这个权限：

```
<!-- More usses permissions, this is inside the <manifest> but outside the <application> tag -->
<uses-permission android:name="android.permission.ACCES_NETWORK_STATE" /> 
```

我想我已经设置正确了，但 eclipse 仍然给我这个警告。有谁知道为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T12:39:53.467

> 有谁知道为什么？

你有`android.permission.ACCES_NETWORK_STATE`，这是不正确的。值为`android.permission.ACCESS_NETWORK_STATE`, 部分中有两个`S`字符`ACCESS`。

# c# - WebRequest 极慢

> ID：15408776
> 
> 赞同：1
> 
> 时间：2013-03-14T12:03:45.687
> 
> 标签：c#, .net, httpwebrequest

我的方法如下所示：

```
public string Request(string action, NameValueCollection parameters, uint? timeoutInSeconds = null)
{
    parameters = parameters ?? new NameValueCollection();
    ProvideCredentialsFor(ref parameters);

    var data = parameters.ToUrlParams(); // my extension method converts the collection to a string, works well

    byte[] dataStream = Encoding.UTF8.GetBytes(data);
    string request = ServiceUrl + action;
    var webRequest = (HttpWebRequest)WebRequest.Create(request);
    webRequest.AllowAutoRedirect = false;
    webRequest.Method = "POST";
    webRequest.ContentType = "application/x-www-form-urlencoded";
    webRequest.ContentLength = dataStream.Length;
    webRequest.Timeout = (int)(timeoutInSeconds == null ? DefaultTimeoutMs : timeoutInSeconds * 1000);
    webRequest.Proxy = null; // should make it faster...

    using (var newStream = webRequest.GetRequestStream())
    {
        newStream.Write(dataStream, 0, dataStream.Length);
    }
    var webResponse = (HttpWebResponse)webRequest.GetResponse();

    string uri = webResponse.Headers["Location"];

    string result;
    using (var sr = new StreamReader(webResponse.GetResponseStream()))
    {
        result = sr.ReadToEnd();
    }

    return result;
} 
```

服务器发送 JSON 作为响应。它适用于小型 JSON，但是当我请求大型 JSON 时 - 出现问题。大我的意思是需要1-2分钟才能出现在浏览器中的东西（谷歌浏览器，包括服务器端生成时间）。它实际上是 412KB 的文本。当我尝试使用上述方法请求相同的 JSON 时，我得到一个 Web 异常（超时）。我将超时更改为 10 分钟（至少比 chrome 长 5 倍）。还是一样。

有任何想法吗？

**编辑**

这似乎与 MS 技术有关。在 IE 上，这个 JSON 也不会加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-12T08:44:07.477

确保关闭您的请求。否则，一旦您达到允许的最大连接数（对我来说，有一次低至四个），您必须等待较早的连接超时。最好使用

```
using (var response = webRequest.GetResponse()) {... 
```

# maven - 我在哪里可以找到 maven 的更新和“不臃肿”的 webapp 原型？

> ID：15408777
> 
> 赞同：2
> 
> 时间：2013-03-14T12:03:48.500
> 
> 标签：maven

我对 maven 很陌生，我正在尝试找到一个很好的原型来为 Spring MVC 项目创建一个 webapp“起点”。我一直在 rtfm-ing、谷歌搜索并安装了我在 SO 和其他地方的列表中找到的许多原型，但我从未找到适合我需要的原型。

*   示例 1：我安装了 org.apache.maven.archetypes - maven-archetype-webapp，但它似乎已经过时了，因为它使用 JRE 1.5、JUnit 3.8.1 并且还缺少 src/test/java、src/test/resources 和默认情况下是 src/main/resources。
*   示例 2：使用 eclipse，我从“Spring 模板项目”创建了一个新的“Spring MVC 项目”，它还为我设置了 Maven，但它安装了很多我不确定我什至需要的东西。

我还尝试了其他一些原型，例如 AppFuse 和 Cocoon，但它们的基本 webapp 原型中的“臃肿”甚至更糟。

*我所追求的是 maven-archetype-webapp 给我的东西，但是一个“更新”的版本还包括测试和资源目录。*

**所以我想我的问题是两个折叠：**

**1\. maven-archetype-webapp 原型是否有“更新”版本？**

...和/或...

**2\. 作为 maven 新手，有没有办法创建自己的原型来满足我的需求？**

...还是我完全误解了原型的概念？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T13:38:09.333

> 是否有 maven-archetype-webapp 原型的“更新”版本？

AFAIK，1.0 版是最后一个版本（并且不是最新的）。顺便说一句，它似乎没有定义源代码级别（所以我猜你拥有的 1.5 来自你的 IDE）

> 作为 maven 新手，有没有办法创建适合我需要的原型？

创建一个新的工件非常简单。[这](http://maven.apache.org/guides/mini/guide-creating-archetypes.html)是详细信息。

*对 maven 新手来说，这么简单吗？*好吧，这取决于...但是根据您帖子的质量，您似乎了解了基础知识，所以是的，应该很容易做到。

基本上，原型无非是：

*   您需要的目标项目结构（带有一些文件，如 pom.xml、web.xml、...）
*   描述需要包含在此结构中的资源的文件。

看一下 maven-archetype-webapp-1.0.jar（即解压缩），您将立即了解目录丢失的原因以及 junit-3.8.1 的来源。

注意：您将在 maven 存储库中找到 maven-archetype-webapp-1.0.jar。（可能在这里：/.m2/repository/org/apache/maven/artifacts/maven-archetype-webapp/1.0/...但我没有检查）

# android - 仅在该特定视图上的进度对话框

> ID：15408780
> 
> 赞同：1
> 
> 时间：2013-03-14T12:03:54.767
> 
> 标签：android, android-asynctask, progressdialog

我使用了很多`AsyncTasks`但总是这样：

```
private class connectAsyncTask extends AsyncTask<String, Void, String> {

    //Create a Progress Dialog
@Override
protected void onPostExecute(String info) {
    //Dismiss the dialog
    }
    @Override
protected String doInBackground(String... params) {
    //complete code to get data to be populated on the view
    }
@Override
protected void onPreExecute() {
    //Show the dialog
} 
```

但这就像显示进度对话框一样，直到我获取数据然后填充布局上的所有视图。

相反，我希望它是这样的，一些数据将作为 Bundle 发送，这些数据可用于填充它们各自的视图，并且任何像 ImageView 之类的东西，其图像尚未获取必须显示一个进度对话框。

亚马逊等许多应用程序都是这样做的。甚至对话框也没有任何矩形背景或文本。这个怎么做？

# php - 下拉列表仅从 xml 文件中获取两个值

> ID：15408781
> 
> 赞同：0
> 
> 时间：2013-03-14T12:03:56.207
> 
> 标签：php, javascript, xml, ajax

我正在尝试使用 Ajax 将数据添加到名为 combo_assembly 的组合框中。

功能是：

```
function populate_combo_assembly(xmlindata) {
var xmldata = xmlindata.getElementsByTagName('Assemblies');
    if(xmldata.length <= 0) {
    alert("Data Unavailable");
        return;
    }
    window.document.getElementById('combo_assembly').options.length = 0;
    var firstOption = new Option('--Please select--', '', false, false);
    window.document.getElementById('combo_assembly').options.add(firstOption);
    for(var i =0; i <= xmldata.length; i++) {
        var typename = '';
        var x,y;
        x = xmlindata.getElementsByTagName('name')[i];
        y = x.childNodes[0];
        typename = y.nodeValue;
        var newOption = new Option(typename, typename, false, false);
        window.document.getElementById('combo_assembly').options.add(newOption);

    }

    window.document.getElementById('combo_assembly').disabled = false;  
} 
```

并从文件中获取值..代码是：

```
<?php

include("database/dbconfig.inc.php");

header("Content-type: text/xml");
echo "<?xml version=\"1.0\" ?>\n";
echo "<Assemblies>\n";
$select = "SELECT * FROM assembly";
try {
    foreach($dbh->query($select) as $row) {
        echo "<Assembly>\n<name>".$row['name']."</name>\n<id>".$row['id']."</id>\n<category>".$row['category']."</category>\n</Assembly>\n";
    }
}
catch(PDOException $e) {
    echo $e->getMessage();
    die();
}
echo "</Assemblies>";
?> 
```

问题是这个 xml 文件正在从数据库表中获取所有内容。但是该函数仅从 xml 代码中获取前两个值。xml文件的输出

```
<Assemblies>
<Assembly>
<name>total</name>
<id>A00000</id>
<category>Brake</category>
</Assembly>
<Assembly>
<name>asd</name>
<id>A00001</id>
<category>Brake</category>
</Assembly>
<Assembly>
<name>ga</name>
<id>ga</id>
<category>Suspension</category>
</Assembly>
<Assembly>
<name>65</name>
<id>r00</id>
<category>Brake</category>
</Assembly>
<Assembly>
<name>yty</name>
<id>tyt</id>
<category>Suspension</category>
</Assembly>
<Assembly>
<name>Gaurav</name>
<id>Z0012</id>
<category>Brake</category>
</Assembly>
</Assemblies> 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:08:33.497

您正在检索 xmldata 作为

`var xmldata = xmlindata.getElementsByTagName('Assemblies');`

那不应该是

`var xmldata = xmlindata.getElementsByTagName('Assembly');`

由于信息不包含在包装元素中。

# python - 从dependency_links安装包的问题

> ID：15408782
> 
> 赞同：7
> 
> 时间：2013-03-14T12:04:04.070
> 
> 标签：python, pip, setuptools

这是我的 setup.py：

```
 setup(
        ...
        install_requires=['GEDThriftStubs'],
        dependency_links=['git+ssh://user@git.server.com/ged-thrift-stubs.git#egg=GEDThriftStubs'],
...) 
```

然后我创建包：

```
python setup.py sdist 
```

然后我尝试安装它：

> pip install file://path/package-0.0.1.tar.gz

并在终端中得到这个：

```
Downloading/unpacking GEDThriftStubs (from package==0.0.1)
  Could not find any downloads that satisfy the requirement GEDThriftStubs (from package==0.0.1)
No distributions at all found for GEDThriftStubs (from package==0.0.1) 
```

在像这样的 pip.log 消息中：

```
Skipping link git+ssh://user@git.server.com/ged-thrift-stubs.git#egg=GEDThriftStubs; wrong project name (not gedthriftstubs) 
```

而且我的项目中没有确切的名称“gedthriftstubs”，如果重要的话。

但这很好用：

```
pip install git+ssh://user@git.server.com/ged-thrift-stubs.git#egg=GEDThriftStubs 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-26T17:01:57.127

尝试：

```
$ pip install --process-dependency-links file://path/package-0.0.1.tar.gz 
```

请注意，此标签已从`pip`pip 1.6 中删除。有关更多信息，[请参阅 pip.pypa.io 上的这篇文章。](https://pip.pypa.io/en/develop/dependency_links.html)

> 在 pip 1.5 中，处理依赖链接已被弃用，并在 pip 1.6 中被完全删除。

还有一个关于 pip 和依赖链接的[冗长讨论（问题 #1519）](https://github.com/pypa/pip/pull/1519)

如果这不起作用，您可能还需要在链接上添加版本后缀，如下所示：

```
git+ssh://user@git.server.com/ged-thrift-stubs.git#egg=GEDThriftStubs-0.0.1 
```

哪里`0.0.1`是`version`setup.py 中指定的`ged-thrift-stubs`

# javascript - 检测应用程序重新聚焦事件

> ID：15408783
> 
> 赞同：6
> 
> 时间：2013-03-14T12:04:06.177
> 
> 标签：javascript, ipad, sencha-touch, cordova-2.0.0

我需要知道用户每次开始使用该应用程序的时间。

**情况 1（OK）：应用程序未启动。**

*用户从头开始启动应用程序。*

我在应用程序的引导程序上添加了一个侦听器，并且我知道它何时启动。

**案例 2 (TODO) : 应用程序已启动但不再处于活动状态**

*用户从任务栏重新加载应用程序。*

我想知道应用程序何时从任务栏转到前台（如 alt+tab）。

这很难捕捉，因为应用程序仍在运行，我不知道要听哪个事件。事实上，我什至不知道如何命名这种行为。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-03-29T16:28:40.883

Cordova 中有一个应用程序恢复和暂停事件，因此您无需编辑 Cordova 类文件。以下是我目前在 iOS/Android 应用程序中使用的工作代码。

```
window.onload = function() {  
    //only fired once when app is opened
    document.addEventListener("deviceready", init, false);
    //re-open app when brought to foreground
    document.addEventListener("resume", init, false);
    //trigger when app is sent to background
    document.addEventListener("pause", onPause, false);

}

function init() {
    console.log('device ready or resume fired');
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T14:06:39.477

一个 ios-app 开发者接受帮助我。他的回答非常适合我，因为它看起来很干净且可重复使用。所以我会在这里制作它：

“应用程序来到前台”事件可以通过**applicationWillEnterForeground**事件捕获。Phonegap/Cordova 允许通过 Cordova 类调用 javascript 函数。**webView**对象有一个专门的方法来启动 js 脚本。

所以我打开了文件 Projet/Classes/Cordova/AppDelegate.m ：

```
- (void)applicationWillEnterForeground:(UIApplication *)application {
    NSLog(@"applicationWillEnterForeground: %@", self.viewController.webView);
    [self.viewController.webView stringByEvaluatingJavaScriptFromString:@"notifyForegroundEvent();"];

} 
```

我在 js 文件的根目录中添加了 notifyForegroundEvent() 方法：

```
var notifyForegroundEvent = function() {
  console.log('notifyForegroundEvent()');
  // Do something here
} 
```

等等瞧

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T13:22:56.810

正如我前段时间在 facebook（destkop，非移动设备）上看到的那样，他们检查 mousemove 以确定收到的聊天消息是否应标记为已读。我知道这不是解决方案，但它可能会为您指明一个好的方向。当您切换到其他应用程序时，我还会检查输入焦点会发生什么。也许它模糊了。

# java - For 循环 - HashMap 的第一个参数

> ID：15408785
> 
> 赞同：0
> 
> 时间：2013-03-14T12:04:14.190
> 
> 标签：java, hashmap, loops

我有一个带有两个参数的哈希图，

```
private HashMap<Integer, car> carList; 
```

我已经成功编写了允许我在 HashMap 中放入新值的方法。现在我想知道如何使用 for 循环或类似的东西来遍历我的 Hashmap 的第一个参数。我正在尝试列出所有具有相同 int 值（价格）的汽车；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:05:23.347

该`keySet()`方法将允许您遍历映射键...

```
for(Integer price: carList.keySet()) {
    // something
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T12:06:34.827

做这个：

```
for(Integer price: carList.keySet()) {
    car myCar = carList.get(price);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T12:08:58.313

首先，将变量名改为carMap。现在，您可以使用以下方法之一：

```
for(Integer price: carMap.keySet()) {
    // something related to key.
} 
```

或者：

```
for(Entry<Integer,car> entry: carMap.entrySet()) {
    car c = entry.getValue();
    Integer ket = entry.getKey();
    // something related to key and value.
} 
```

但是，如果关键是价格，而你**每个价格持有一辆汽车**，你就不可能拥有**两辆价格相同的汽车**。您可能想使用：

```
Map<Integer, List<car>> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T12:06:29.990

您可以使用[KeySet()](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html#keySet%28%29)方法。

从文档：

> 返回此映射中包含的键的 Set 视图。集合由地图支持，因此对地图的更改会反映在集合中，反之亦然。如果在对集合进行迭代时修改了映射（通过迭代器自己的删除操作除外），则迭代的结果是不确定的。该集合支持元素移除，即通过 Iterator.remove、Set.remove、removeAll、retainAll 和 clear 操作从映射中移除相应的映射。它不支持 add 或 addAll 操作。

.

> 我正在尝试列出所有具有相同 int 值（价格）的汽车；

以价格为关键是错误的设计。你可以有一个范围对象作为键。即价格范围。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T12:07:07.733

通过键（`Integer`在您的情况下）从地图中检索值如下：

```
carList.get(<your price>) --> this will get your the value(s) for this price 
```

要遍历所有价格，请执行以下操作：

```
for(Integer price: carList.keySet()) {
   .. your work
} 
```

# c# - 从后面的 c# 代码传递函数参数

> ID：15408790
> 
> 赞同：0
> 
> 时间：2013-03-14T12:04:21.567
> 
> 标签：c#, javascript

我有 ASP.NET Web 应用程序项目。我想在其中将值传递给`javascript`来自 c# 代码隐藏页面的函数。

我的 C# 代码片段：-

```
//Here td_Output is TableCell

td_Output.Text = "<input type='button' style='font-size:11px;' onclick='LoadLoayaltyProgram(1,'"+Convert.ToString(Request.Form["Program"])+"');' class='ui-button ui-widget ui-state-default ui-corner-all' role='button' value='Add' />"; 
```

JavaScript 代码：-

```
function LoadLoayaltyProgram(PID,ID) {
    alert(PID +" "+ ID);
} 
```

当我在浏览器中的 .aspx 页面上检查元素时，我看到的代码如下：

```
<input type="button" style="font-size:11px;" onclick="LoadLoayaltyProgram(1," pid112002');'="" class="ui-button ui-widget ui-state-default ui-corner-all" role="button" value="Add"> 
```

**单击“添加”按钮时我没有收到任何警报**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T12:13:40.907

在`LoadLoayaltyProgram`你正在打印 consequtive `'`。`"`因此，将with转义，`\"`这样您就可以像这样重用它：

```
string program = Server.UrlEncode(Request.Form["Program"] ?? string.Empty);
td_Output.Text = String.Format("<input type='button' style='font-size:11px;' onclick='LoadLoayaltyProgram(1, \"{0}\");' class='ui-button ui-widget ui-state-default ui-corner-all' role='button' value='Add' />", program); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T12:11:18.907

```
 onclick="LoadLoayaltyProgram(1," pid112002');'="" 
```

这看起来很奇怪，不应该是这样的吗？

```
 onclick="LoadLoayaltyProgram(1, 'pid112002')" 
```

# java - 从方法中获取实例

> ID：15408791
> 
> 赞同：0
> 
> 时间：2013-03-14T12:04:21.640
> 
> 标签：java, constructor, garbage-collection

在给定的链接中，查看给定的选项并选择使用此代码描述最糟糕情况的选项：

[https://gist.github.com/d34th4ck3r/49e9ae56458d4ed0f8ae](https://gist.github.com/d34th4ck3r/49e9ae56458d4ed0f8ae)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T12:07:44.047

> 可以创建多个 Mango 实例

是：如果两个线程`getInstance`同时执行，它们都可以看到`INSTANCE`null 并创建一个新实例

> 芒果永远不会被创造出来

呵呵...如果您调用`getInstance`，将创建一个实例，所以不会。

> 构造函数是私有的，不能被调用

不，它可以从类中调用`getInstance`

> value 可以被垃圾回收，调用 getInstance 可能会返回垃圾数据

`INSTANCE`只要它是可访问的，就不会被垃圾收集 - 在静态变量的情况下，即在 JVM (*) 的整个生命周期内。

[(*) 更准确地说，只要加载了类，它就不会被垃圾收集。如果关联的类加载器本身被垃圾收集，则可以卸载一个类。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:14:11.930

这是经典的单例对象设计模式

最糟糕的是取决于要求。根据我的理解，如果这是一个更大的程序类，那么芒果永远不应该制作超过一次。

正如 assylias 所说，在有一个 synchronized 关键字之前，结果可能会导致 2 个芒果对象（但那是一个极端情况）

```
synchronized public static Mango getInstance()
    {
        if ( INSTANCE == null )
        {
            INSTANCE = new Mango();
        }
        return INSTANCE;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T12:14:42.460

我认为答案是选项 A：“可以创建多个 Mango 实例”如果没有适当的同步，两个或多个线程可能会同时调用 getInstance()，这会使 Mango 成为不合格的单例

顺便说一句，这看起来像是一个家庭作业或面试问题！:)

# c# - 使用 c# windows 服务打印文件

> ID：15408792
> 
> 赞同：1
> 
> 时间：2013-03-14T12:04:24.527
> 
> 标签：c#

我想使用 windows 服务器自动打印目录中的文件。只要将任何文件添加到目录中，它就会自动打印。我们怎样才能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:05:57.947

我还没有测试从另一个线程打印，但是这两个选项之一应该可以工作。您可能需要修改代码以使用 .Net 2，因为我只使用 3.5 Sp1 或 4。

假设您有一个 Print 方法和一个 Queue，其中 ItemToPrint 是保存打印设置/信息的类

```
public Queue<ItemToPrint> PrintQueue = new Queue<ItemToPrint>();
    private BackgroundWorker bgwPrintWatcher;

    public void SetupBackgroundWorker()
    {
        bgwPrintWatcher = new BackgroundWorker();
        bgwPrintWatcher.WorkerSupportsCancellation = true;
        bgwPrintWatcher.ProgressChanged += new ProgressChangedEventHandler(bgwPrintWatcher_ProgressChanged);
        bgwPrintWatcher.RunWorkerCompleted += new RunWorkerCompletedEventHandler(bgwPrintWatcher_RunWorkerCompleted);
        bgwPrintWatcher.DoWork += new DoWorkEventHandler(bgwPrintWatcher_DoWork);
        bgwPrintWatcher.RunWorkerAsync();
    }

    void bgwPrintWatcher_DoWork(object sender, DoWorkEventArgs e)
    {
        BackgroundWorker worker = sender as BackgroundWorker;
        while (!worker.CancellationPending)
        {
            // Prevent writing to queue while we are reading / editing it
            lock (PrintQueue)
            {
                if (PrintQueue.Count > 0)
                {
                    ItemToPrint item = PrintQueue.Dequeue();
                    // Two options here, you can either sent it back to the main thread to print
                    worker.ReportProgress(PrintQueue.Count + 1, item);
                    // or print from the background thread
                    Print(item);
                }
            }
        }
    }

    private void Print(ItemToPrint item)
    {
        // Print it here
    }

    private void AddItemToPrint(ItemToPrint item)
    {
        lock (PrintQueue)
        {
            PrintQueue.Enqueue(item);
        }
    }

    void bgwPrintWatcher_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        // Anything here will run from the main / original thread
        // PrintQueue will no longer be watched
    }

    void bgwPrintWatcher_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        // Anything here will run from the main / original thread
        ItemToPrint item = e.UserState as ItemToPrint;
        // e.ProgressPercentage holds the int value passed as the first param
        Print(item);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T13:12:28.737

您可以使用 FileSystemWatcher 类。

[说明在这里](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher%28v=vs.110%29.aspx)

# xml - 使用 xslt 生成 xls 时 MS excel 出错

> ID：15408793
> 
> 赞同：1
> 
> 时间：2013-03-14T12:04:24.730
> 
> 标签：xml, excel, xslt, xls

我想用 xls 生成一个 excel .xls 文件。我已经想出了如何生成文件。只有在 MS Excel 中打开文件时，才会出现以下错误。

> 文件已损坏，无法打开。

这是输出；

```
 enterFile: Order_2013.xls

<?xml version="1.0"?>
<Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet"><Styles><Style xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet" ss:ID="Default" ss:Name="Normal"><Alignment ss:Vertical="Bottom"/><Borders/><Font/><Interior/><NumberFormat/><Protection/></Style><Style xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet" ss:ID="s21"><Font ss:Size="22" ss:Bold="1"/></Style><Style xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet" ss:ID="s22"><Font ss:Size="14" ss:Bold="1"/></Style><Style xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet" ss:ID="s23"><Font ss:Size="12" ss:Bold="1"/></Style><Style xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet" ss:ID="s24"><Font ss:Size="10" ss:Bold="1"/></Style></Styles><Worksheet xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet" ss:Name="order"><Table><Column ss:AutoFitWidth="0" ss:Width="85"/><Column ss:AutoFitWidth="0" ss:Width="115"/><Column ss:AutoFitWidth="0" ss:Width="115"/><Column ss:AutoFitWidth="0" ss:Width="160"/><Column ss:AutoFitWidth="0" ss:Width="115"/><Column ss:AutoFitWidth="0" ss:Width="85"/><Column ss:AutoFitWidth="0" ss:Width="85"/><Column ss:AutoFitWidth="0" ss:Width="160"/><Row ss:AutoFitHeight="0" ss:Height="27.75"><Cell ss:StyleID="s21"><Data ss:Type="String">Example Spreadsheet</Data></Cell></Row><Row ss:AutoFitHeight="0" ss:Height="18"><Cell ss:StyleID="s22"><Data ss:Type="String">Vuurvlinderronde 15</Data></Cell></Row><Row><Cell><Data ss:Type="String">
                            test
                            </Data></Cell></Row><Row xmlns:html="http://www.w3.org/TR/REC-html40" xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" ss:AutoFitHeight="0" ss:Height="18"><Cell ss:StyleID="s23"><Data ss:Type="String">
                Collumn 1
                </Data></Cell></Row><Row xmlns:html="http://www.w3.org/TR/REC-html40" xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel"><Cell ss:StyleID="s24"><Data ss:Type="String">
                    Collumn 2
                </Data></Cell><Cell ss:StyleID="s24"><Data ss:Type="String">
                    Collumn 3
                </Data></Cell><Cell ss:StyleID="s24"><Data ss:Type="String">
                    Collumn 4
                </Data></Cell><Cell ss:StyleID="s24"><Data ss:Type="String">
                    Collumn 5
                </Data></Cell></Row></Table></Worksheet></Workbook> code here 
```

这是 xsl 样式表

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<?mso-application progid="Excel.Sheet"?>

<files>
<file filename="Order_%Y%.xls">

<xsl:stylesheet version="1.0" 
xmlns:html="http://www.w3.org/TR/REC-html40"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
    xmlns="urn:schemas-microsoft-com:office:spreadsheet"
    xmlns:o="urn:schemas-microsoft-com:office:office" 
    xmlns:x="urn:schemas-microsoft-com:office:excel"
    xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet">

    <xsl:template match="/">

<xsl:for-each select="orders/order">

        <Workbook>
            <Styles>
                <Style ss:ID="Default" ss:Name="Normal">
                    <Alignment ss:Vertical="Bottom" />
                    <Borders />
                    <Font />
                    <Interior />
                    <NumberFormat />
                    <Protection />
                </Style>
                <Style ss:ID="s21">
                    <Font ss:Size="22" ss:Bold="1" />
                </Style>
                <Style ss:ID="s22">
                    <Font ss:Size="14" ss:Bold="1" />
                </Style>
                <Style ss:ID="s23">
                    <Font ss:Size="12" ss:Bold="1" />
                </Style>
                <Style ss:ID="s24">
                    <Font ss:Size="10" ss:Bold="1" />
                </Style>
            </Styles>

            <Worksheet ss:Name="order">
                <Table>
                    <Column ss:AutoFitWidth="0" ss:Width="85" />
                    <Column ss:AutoFitWidth="0" ss:Width="115" />
                    <Column ss:AutoFitWidth="0" ss:Width="115" />
                    <Column ss:AutoFitWidth="0" ss:Width="160" />
                    <Column ss:AutoFitWidth="0" ss:Width="115" />
                    <Column ss:AutoFitWidth="0" ss:Width="85" />
                    <Column ss:AutoFitWidth="0" ss:Width="85" />
                    <Column ss:AutoFitWidth="0" ss:Width="160" />

                    <Row ss:AutoFitHeight="0" ss:Height="27.75">
                        <Cell ss:StyleID="s21">
                            <Data ss:Type="String">Voorbeeld</Data>
                        </Cell>
                    </Row>
                    <Row ss:AutoFitHeight="0" ss:Height="18">
                        <Cell ss:StyleID="s22">
                            <Data ss:Type="String">
                                <xsl:value-of select="shipping/street" />
                            </Data>
                        </Cell>
                    </Row>
                    <Row>
                        <Cell>
                            <Data ss:Type="String">
                            test
                            </Data>
                        </Cell>
                    </Row>

                    <xsl:call-template name="orders" />

                </Table>
            </Worksheet>

        </Workbook>
</xsl:for-each>
    </xsl:template>

    <xsl:template name="orders">

        <Row ss:AutoFitHeight="0" ss:Height="18">
            <Cell ss:StyleID="s23">
                <Data ss:Type="String">
                Collumn 1
                </Data>
            </Cell>
        </Row>
        <Row>
            <Cell ss:StyleID="s24">
                <Data ss:Type="String">
                    Collumn 2
                </Data>
            </Cell>
            <Cell ss:StyleID="s24">
                <Data ss:Type="String">
                    Collumn 3
                </Data>
            </Cell>
            <Cell ss:StyleID="s24">
                <Data ss:Type="String">
                    Collumn 4
                </Data>
            </Cell>
            <Cell ss:StyleID="s24">
                <Data ss:Type="String">
                    Collumn 5
                </Data>
            </Cell>
        </Row>

        <xsl:for-each
            select="orders/order">

            <Row>
                <Cell>
                    <Data ss:Type="String">
                        <xsl:value-of select="order_id" />
                    </Data>
                </Cell>
                <Cell>
                    <Data ss:Type="String">
                        <xsl:value-of select="order_id" />
                    </Data>
                </Cell>
                <Cell>
                    <Data ss:Type="String">
                        <xsl:value-of select="order_id" />
                    </Data>
                </Cell>
                <Cell>
                    <Data ss:Type="String">
                        <xsl:value-of select="order_id" />
                    </Data>
                </Cell>
            </Row>

        </xsl:for-each>
    </xsl:template>

</xsl:stylesheet>

</file>
</files> 
```

我希望有人能指出我正确的解决方案。

提前致谢！

Ĵ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:28:01.650

XML 格式的 Excel 文件具有扩展名**.xlsx** ，否则 Excel 需要 BIFF 格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:23:29.707

在您的 XSLT 示例中，您将**xsl:stylesheet**元素包含在一个**文件**元素中。

```
<files>
   <file filename="Order_%Y%.xls">
      <xsl:stylesheet version="1.0" ....
         <!-- XSLT Code.... -->
      </xsl:stylesheet>
   </file>
</files> 
```

也许您不是有意将它们放在您的问题中，但**文件**和**文件**元素绝对不应该存在。我认为**文件**根本不是有效的 Excel XML。我希望**Workbook**元素是 Excel XML 文件中最顶层的元素。

您当前的输出还包括`enterFile: Order_2013.xls`顶部的一行文本。同样，也许这只是您的问题的一个问题，但它不应该出现在输出中。输出应该是格式良好的 XML 文档。

另外需要注意的是处理指令的使用

```
<?mso-application progid="Excel.Sheet"?> 
```

尽管这对于 Excel XML 是正确的，但它不需要放在 XSLT 文件中。就目前而言，这将是 XSLT 处理器的处理指令，它将忽略它！您需要 XSLT 在输出中写出处理指令。为此，将此命令添加到第一个模板中

```
<xsl:template match="/">
   <xsl:processing-instruction name="mso-application">
      <xsl:text>progid="Excel.Sheet"</xsl:text>
   </xsl:processing-instruction>
   <xsl:for-each select="orders/order"> 
```

当我在一个空的 XML 文件上尝试 XSLT 时，我能够生成一个成功打开的 Excel XML 文件。

# android - 我如何将图像放置在显示器的底部？

> ID：15408794
> 
> 赞同：0
> 
> 时间：2013-03-14T12:04:26.850
> 
> 标签：android, android-layout

我想用 Eclipse 在 android 上设计一个旋转半轮菜单。我有一个完整的轮子图像，我想把它放在屏幕底部。我必须将全轮的中点放在屏幕底部以获得半轮菜单。我已经在 xml 上尝试过该代码

![在此处输入图像描述](../Images/71982777c4efd43f3ee38b39029834a8.png)

它在模拟器上的模拟并不让我满意。因为车轮图像位于屏幕中央。我希望它放置在我的旋转半轮菜单应用程序的底部。我也知道我可以设置它`android:layout_marginTop="600dp"`，但我想在使用android操作系统的手机上提供其他屏幕尺寸的兼容性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:08:51.720

您可以`RelativeLayout`在该图像之外使用并在图像中设置属性`android:layout_alignParentBottom="true"`

像这样

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:src="@drawable/ic_launcher" />

</RelativeLayout> 
```

# .net - 仅根据其名称加载程序集

> ID：15408795
> 
> 赞同：1
> 
> 时间：2013-03-14T12:04:27.240
> 
> 标签：.net, c#-4.0

我有一个使用该`AssemblyQualifiedName`方法序列化为字符串 str 的 .net 类型。稍后我想通过使用访问此类型`Type.GetType(str);`

现在的问题是程序集版本在类型的序列化和反序列化之间的几个月内发生了变化。然后我创建了一个自定义程序集解析器来删除版本：

```
Type.GetType(str,
                assemblyName =>
                {
                    assemblyName.Version = null;
                    return System.Reflection.Assembly.Load(assemblyName);
                },
                null // type resolver : default
                ); 
```

这可行，但我对此有几个问题：

*   在我的情况下，公共令牌密钥在不同版本之间保持相同是否正常？是什么让他们改变？是否也可以删除公共令牌密钥的标识？（就像我对版本所做的那样）
*   这是正确的方法吗？理想情况下，我只想在给定的程序集中加载给定的类型，但我觉得我做错了什么

谢谢

# java - 绑定地图 K 不是 Java 中的字符串

> ID：15408796
> 
> 赞同：0
> 
> 时间：2013-03-14T12:04:27.687
> 
> 标签：java, binding, map

我在一个项目中使用 BetterBeanBindings，如果我可以对键不是字符串的 Map 进行绑定，那就太好了。

让我们举个例子来说明这种情况：

```
public class Bean {
    // ...
    private Map<String, AnotherObject> mapOne;
    private Map<SomeObject, AnotherObject> mapTwo;
    // ...

    public Map<String, AnotherObject> getMapOne() {
        return this.mapOne;
    }

    public void setMapOne(Map<String, AnotherObject> mapOne) {
        Map<String, AnotherObject> oldMapOne = this.mapOne;
        this.mapOne = mapOne;
        this.propertyChangeSupport.firePropertyChange("mapOne", oldMapOne, mapOne);
    }

    public Map<SomeObject, AnotherObject> getMapTwo() {
        return this.mapTwo;
    }

    public void setMapTwo(Map<SomeObject, AnotherObject> mapTwo) {
        Map<SomeObject, AnotherObject> oldMapTwo = this.mapTwo;
        this.mapTwo = mapTwo;
        this.propertyChangeSupport.firePropertyChange("mapTwo", oldMapTwo, mapTwo);
    }

    // ...
} 
```

BBB 能够对键为 String 的映射进行绑定（~~如果我没记错的话，也可以对数字~~进行绑定，甚至没有原始类型，它们具有标准解析）允许这样做：

```
Bean bean;
// ...
Bindings.createAutoBinding(UpdateStrategy.READ_WRITE
        bean, BeanProperty.create("mapOne.xxx"),
        whateverBean, whateverProperty); 
```

这将正确地将结果绑定`bean.getMapOne().get("xxx")`到第 5 个和第 4 个参数中给定对象的给定属性，反之亦然。

但是，如果我们尝试相同的`mapTwo`

```
Bindings.createAutoBinding(UpdateStrategy.READ_WRITE
        bean, BeanProperty.create("mapTwo.xxx"),
        whateverOtherOrNotBean, whateverOtherOrNotProperty); 
```

绑定尝试解析`bean.getMapTwo().get("xxx")`，因为这是属性定义中提供的内容，`mapTwo`可能不是`String`, 返回`null`. 这是有道理的，因为绑定不必知道如何将其`String`从属性转换为解析所需的对象

有没有办法做到这一点？使用转换器可能有某种解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:59:19.673

我做了一个小变通方法，它并不适用于所有情况，但很一般。

事情是使用一个`Map<K, V>`能够响应类型值`K`或支持主映射的`String`值。`Map<String, V>`

StringBackedMap：

```
import java.util.Map;
import java.util.Set;

public interface StringBackedMap<K, V> extends Map<K, V> {

    public V get(String key);

    public boolean containsKey(String key);

    public Set<Entry<String, V>> backerEntrySet();

    public Set<String> backerKeySet();

} 
```

StringBackedHashMap：

```
import java.util.HashMap;
import java.util.Map;
import java.util.Set;

public class StringBackedHashMap<K, V> extends HashMap<K, V> implements StringBackedMap<K, V> {

    private static final long serialVersionUID = 1L;

    private Map<String, V> backerMap;

    public StringBackedHashMap() {
        super();

        init();
    }

    public StringBackedHashMap(int capacity) {
        super(capacity);

        init();
    }

    public StringBackedHashMap(int capacity, float loadFactor) {
        super(capacity, loadFactor);

        init();
    }

    public StringBackedHashMap(Map<? extends K, ? extends V> map) {
        super(map);

        init();

        putAll(map);
    }

    private void init() {
        this.backerMap = new HashMap<String, V>();
    }

    @Override
    public V get(String key) {
        return this.backerMap.get(key);
    }

    @Override
    public V get(Object key) {
        V value = super.get(key);

        if (value == null) {
            value = this.backerMap.get(key.toString());
        }

        return value;
    }

    @Override
    public boolean containsKey(String key) {
        return this.backerMap.containsKey(key);
    }

    @Override
    public boolean containsKey(Object key) {
        return super.containsKey(key) || this.backerMap.containsKey(key);
    }

    @Override
    public Set<String> backerKeySet() {
        return this.backerMap.keySet();
    }

    @Override
    public Set<Entry<String, V>> backerEntrySet() {
        return this.backerMap.entrySet();
    }

    @Override
    public V put(K key, V value) {
        V oldValue = super.put(key, value);

        this.backerMap.put(key.toString(), value);

        return oldValue;
    }

    @Override
    public void putAll(Map<? extends K, ? extends V> map) {
        super.putAll(map);

        if ((map != null) && (!map.isEmpty())) {
            for (Entry<? extends K, ? extends V> entry : map.entrySet()) {
                this.backerMap.put(entry.getKey().toString(), entry.getValue());
            }
        }
    }

    @Override
    public V remove(Object key) {
        V oldValue = super.remove(key);

        this.backerMap.remove(key.toString());

        return oldValue;
    }

    @Override
    public void clear() {
        super.clear();

        this.backerMap.clear();
    }

} 
```

# silverlight - Silverlight 组件 一个 Datepicker 滚动更改日期

> ID：15408797
> 
> 赞同：0
> 
> 时间：2013-03-14T12:04:29.633
> 
> 标签：silverlight, datepicker, componentone

当鼠标悬停在日期选择器上并且滚动滚轮时，有没有办法阻止组件一日期选择器更改日期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:57:42.537

对于当前发布的版本，我看到了从它继承的唯一方法：

```
public class MyDatePicker : C1DatePicker
{
    protected override void OnMouseWheel(System.Windows.Input.MouseWheelEventArgs e)
    {
        e.Handled = true;
        base.OnMouseWheel(e);
    }
} 
```

我们为此类问题提供完全免费的支持论坛：http: [//our.componentone.com/groups/silverlight/studio-for-silverlight/forum/](http://our.componentone.com/groups/silverlight/studio-for-silverlight/forum/)

# c# - 成员“...”没有支持的 SQL 转换错误

> ID：15408799
> 
> 赞同：1
> 
> 时间：2013-03-14T12:04:36.710
> 
> 标签：c#, .net, linq, linq-to-sql

我正在学习 LINQ 中的技巧并创建了一个数据库并尝试更新表记录，但我一直在获取成员 P.roject1.ChildDBdetails.Id 不支持对 SQL 的转换。这是查询：

```
public void UpdateChildrecord()
{
    using (ChildDBDataContext ChildDB = new ChildDBDataContext(Con_String))
    {
        IQueryable<ChildDBdetails> query = 
                from c in ChildDB.ChildDBdetails  
                where c.Id == id  
                select c;
        ChildDBdetails updaterecord = query.FirstOrDefault();
        updaterecord.Team = newteam;
        ChildDB.SubmitChanges();            
    }   
} 
```

我是 linq-to_sql 的新手，我真的不明白为什么会这样。我该如何解决这个错误？谢谢。

表模型：

```
[Table]
public class ChildDBdetails : INotifyPropertyChanged, INotifyPropertyChanging
{

    [Column(IsPrimaryKey = true, IsDbGenerated = false, CanBeNull = false)]
    private int id;

    public int Id
    {
        get { return id; }
        set
        {
            NotifyPropertyChanging("Id");
            id = value;
            NotifyPropertyChanged("Id");
        }
    }

    [Column]
    private string team;

    public string Team
    {
        get { return team; }
        set
        {
            NotifyPropertyChanging("Team");
            team = value;
            NotifyPropertyChanged("Team");
        }
    }

    #region Implementation of INotifyPropertyChanged

    public event PropertyChangedEventHandler PropertyChanged;
    private void NotifyPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }

    #endregion

    #region Implementation of INotifyPropertyChanging

    public event PropertyChangingEventHandler PropertyChanging;

    private void NotifyPropertyChanging(string propertyName)
    {
        if (PropertyChanging != null)
        {
            PropertyChanging(this, new PropertyChangingEventArgs(propertyName));
        }
    }

    #endregion
} 
```

# c# - 在 C# 中知道传递给泛型方法的参数类型的正确方法是什么？

> ID：15408802
> 
> 赞同：1
> 
> 时间：2013-03-14T12:04:54.197
> 
> 标签：c#, .net, c#-4.0, generics, reflection

从我的`C# 4.0`代码中，我想对`Sybase`and执行一些查询`MSSQL`。正在使用（或将要使用）的数据库将仅**在运行时**决定/知道。

我分别使用`AseCommand`和`SqlCommand`用于 Sybase 和 SQL。

我决定创建这样的通用方法：

```
private Department ExecuteCommand<T>(T databaseCommand) where T : class
{
            Department department = new Department ();

            dynamic command = databaseCommand;

            using (dynamic databaseReader = command.ExecuteReader())
            {
                if (databaseReader.HasRows)
                {

                    while (databaseReader.Read())
                    {
                         department.Employees.Add(this.CreateDepartmentInstance(databaseReader));
                    }
                }
            }

            command.Connection.Dispose();

            return department;
        } 
```

**问题：**

1.  除了 有没有更好的选择`dynamic`？
2.  **知道传递给泛型方法的参数类型的正确方法**通常是什么？
3.  当然，我可以为 Sybase 和 SQL 编写两个单独的方法。但是，当有类似的东西可以使用时，为什么要这样做`dynamic`呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-14T12:07:03.763

您在这里不一定需要动态，您只需要一个通用接口（在这种情况下它们都有）：

```
private Department ExecuteCommand<T>(T databaseCommand) where T : IDbCommand 
```

但是，在这种情况下，由于您没有对类型做任何特别有趣的事情`T`（据我所知），因此以下方法签名就足够了：

```
private Department ExecuteCommand(IDbCommand databaseCommand) 
```

一般来说，如果没有通用接口，我建议使用外观模式，并简单地将方法调用委托给实际实现的等价物。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T12:09:34.083

它看起来像`AseCommand`and `SqlCommand`both implement `IDbCommand`，所以你只需要改变类型约束：

```
private Department ExecuteCommand<T>(T databaseCommand) where T : IDbCommand
{
    Department department = new Department();

    using (IDataReader databaseReader = databaseCommand.ExecuteReader())
    {
        if (databaseReader.HasRows)
        {

            while (databaseReader.Read())
            {
                department.Employees.Add(
                                 this.CreateDepartmentInstance(databaseReader));
            }
        }
    }

    command.Connection.Dispose();

    return department;
} 
```

我想你还需要改变`CreateDepartmentInstance`以接受一个，`IDataReader`如果它还没有。

尽管正如rich.okelly 指出的那样，看起来并没有真正的理由首先在这里使用泛型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T12:08:55.963

回答#2：

```
if (typeof(T) == typeof(object) ) {
    // Check for IEnumerable
} 
```

用您想要检查的任何类型替换对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T12:38:20.477

在您的情况下，使用通用接口就可以了。

一般来说，如果你想找出一个对象的类型，你总是可以使用`is`和`as`- 运算符。

```
private Department ExecuteCommand<T>(T databaseCommand) where T : class
{
            Department department = new Department ();

            var command = databaseCommand;

            using (var databaseReader = command.ExecuteReader())
            {
                if ((databaseReader as IDataReader).HasRows)
                {

                    while ((databaseReader as IDataReader).Read())
                    {
                          department.Employees.Add(this.CreateDepartmentInstance(databaseReader));
                    }
                }
            }

            command.Connection.Dispose();

            return department;
        } 
```

未在 VS 中验证，但它应该可以工作。

# iphone - 在 iOS OpenGL ES 2.0 中在两侧绘制纹理时发生 Z-fighting

> ID：15408805
> 
> 赞同：2
> 
> 时间：2013-03-14T12:05:08.347
> 
> 标签：iphone, ios, opengl-es, opengl-es-2.0

我正在模拟 iOS 中的页面翻转，并尝试在页面的两侧绘制不同的纹理。但是我发现即使我没有更改任何顶点或 texCoords，呈现的页面也会抖动。

以下是每一帧中调用的代码：

```
glEnable(GL_DEPTH_TEST);
glEnable(GL_CULL_FACE);
glCullFace(GL_BACK);

...

Shader2D* shader = [Shader2D getInstance];
glUseProgram(shader.shaderProgramID);
glVertexAttribPointer(shader.vertexHandle, 3, GL_FLOAT, GL_FALSE, 0, (const GLvoid*)vertices);
glVertexAttribPointer(shader.textureCoordHandle, 2, GL_FLOAT, GL_FALSE, 0, (const GLvoid*)texCoords);
glEnableVertexAttribArray(shader.vertexHandle);
glEnableVertexAttribArray(shader.textureCoordHandle);
glActiveTexture(GL_TEXTURE0);
glBindTexture(GL_TEXTURE_2D, [[textures objectAtIndex: 0] textureID]);
glUniformMatrix4fv(shader.mvpMatrixHandle, 1, GL_FALSE, (const GLfloat*)&mvpMatrix);
glUniform1i(shader.texSampler2DHandle, 0);
glDrawElements(GL_TRIANGLES, numIndices, GL_UNSIGNED_SHORT, (const GLvoid*)page.frontFaces);
glDisableVertexAttribArray(shader.vertexHandle);
glDisableVertexAttribArray(shader.textureCoordHandle);

glUseProgram(shader.shaderProgramID);
glVertexAttribPointer(shader.vertexHandle, 3, GL_FLOAT, GL_FALSE, 0, (const GLvoid*)vertices);
glVertexAttribPointer(shader.textureCoordHandle, 2, GL_FLOAT, GL_FALSE, 0, (const GLvoid*)texCoords);
glEnableVertexAttribArray(shader.vertexHandle);
glEnableVertexAttribArray(shader.textureCoordHandle);
glActiveTexture(GL_TEXTURE0);
glBindTexture(GL_TEXTURE_2D, [[textures objectAtIndex: 1] textureID]);
glUniformMatrix4fv(shader.mvpMatrixHandle, 1, GL_FALSE, (const GLfloat*)&mvpMatrix);
glUniform1i(shader.texSampler2DHandle, 0);
glDrawElements(GL_TRIANGLES, numIndices, GL_UNSIGNED_SHORT, (const GLvoid*)page.backFaces);
glDisableVertexAttribArray(shader.vertexHandle);
glDisableVertexAttribArray(shader.textureCoordHandle);

...

glDisable(GL_DEPTH_TEST);
glDisable(GL_CULL_FACE); 
```

值得一提的是，我为双方使用了不同的索引缠绕顺序。`page.frontFaces`逆时针定义和顺时针`page.backFaces`定义。

这是我的着色器：

```
static const char* fragmentShader2d = MAKESTRING(
precision mediump float;
varying vec2 texCoord;

uniform sampler2D texSampler2D;

void main()
{
    gl_FragColor = texture2D(texSampler2D, texCoord);
}
                                              );

static const char* vertexShader2d = MAKESTRING(
attribute vec4 vertexPosition;
attribute vec2 vertexTexCoord;

varying vec2 texCoord;

uniform mat4 modelViewProjectionMatrix;

void main()
{
    gl_Position = modelViewProjectionMatrix * vertexPosition;
    texCoord = vertexTexCoord;
}
                                              ); 
```

**屏幕截图**：

在我的代码中，页面的正面是带有白色字符的红色，背面是橙色和黑色。从图像中可以看出，页面的背面在正面的右边框附近被不规则地绘制。显然，此时应该只绘制页面的正面。

值得注意的是，在这两个图像中，顶点和 texCoords 保持不变。事实上，顶点和 texCoords 在每一帧中都是恒定的，但渲染的图像**不是**！而且我认为它与深度缓冲区有关。

只有**八个**三角形代表页面的网格。最好忽略视频背景。

![在此处输入图像描述](../Images/cf69c52e468a1bf2c8cfca37340090a2.png) ![在此处输入图像描述](../Images/83e0e5ddcb36d1e4044a8d690c769cc0.png)

# objective-c - NSXML 解析器返回空白结果

> ID：15408807
> 
> 赞同：0
> 
> 时间：2013-03-14T12:05:11.683
> 
> 标签：objective-c, xml-parsing, httprequest, nsxmlparser

我目前正在开发一个 iOS 应用程序（目标 = iPod touch）来显示一些信息，这些信息基于 PostgreSQL 数据库，我是一个非常初学者。我做了很多研究，但我一无所获，这确实有助于解决我的问题。

目前，我从一个 php 文件中获取数据，该文件是 iOS 应用程序和数据库之间的“桥梁”。为此，我使用 http-request 向 php 文件询问 xml 格式的数据。在我使用的 php 文件中

```
SELECT query_to_xml('".$queryString."', false, true, '') as xml 
```

得到一个 xml 文件作为回报。

到目前为止一切正常，因此我有一个字符串变量，其中包含来自我的 iOS 应用程序中可用查询的 xml 结果。

**这就是我得到的：**

```
<row xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

  <id>4</id>
  <invnr>61821B741AEBI8</invnr>
  <art>c</art>
  <type_id>2</type_id>
  <rechnung></rechnung>
  <standort>G01E01R01</standort>
  <erstellt>2011-12-06</erstellt>
  <gekauft>2003-01-01</gekauft>
</row> 
```

在objective-c中，我想要两个数组：

**字幕数组**

第一个数组应包含 xml 文件中的标题（id、invnr、art、type_id、rechnung、standort、erstellt、gekauft）。条目“行”不应在数组内。

**值数组**

第二个数组应该只保存值 - 也是空的。在该示例中，它将是 4, 61821B741AEBI8, c, 2, , G01E01R01, 2011-12-06, 2003-01-01

**使用 NSXML 解析器**

这是我目前用于解析 xml 并将数据保存到数组中的配置。

**解析器 didStartElement**

```
-(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName
                                      namespaceURI:(NSString *)namespaceURI
                                      qualifiedName:(NSString *)qName
                                      attributes:(NSDictionary *)attributeDict{

    element = [[NSMutableString alloc] init];

    if(!dataCaptions){
      dataCaptions = [[NSMutableArray alloc]init];
    }

    if([elementName isEqualToString:@"id"] ||
     [elementName isEqualToString:@"invnr"] ||
     [elementName isEqualToString:@"art"] ||
     [elementName isEqualToString:@"type_id"] ||
     [elementName isEqualToString:@"rechnung"] ||
     [elementName   isEqualToString:@"standort"] ||
     [elementName isEqualToString:@"erstellt"] ||
     [elementName isEqualToString:@"gekauft"]){

    [element setString:elementName];
    [dataCaptions addObject:elementName];
    }
} 
```

**解析器发现字符**

```
-(void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string{

    if(!dataValues){
      dataValues = [[NSMutableArray alloc]init];
    }

    BOOL copy;

    if([element isEqualToString:@"id"] ||
       [element isEqualToString:@"invnr"] ||
       [element isEqualToString:@"art"] ||
       [element isEqualToString:@"type_id"] ||
       [element isEqualToString:@"rechnung"]||
       [element isEqualToString:@"standort"] ||
       [element isEqualToString:@"erstellt"] ||
       [element isEqualToString:@"gekauft"]){

       copy = YES;

    }else{
       copy = NO;
    }

    if(copy){
      [dataValues addObject:string];
      NSLog(@"Found: %@ with value: %@", element, string);

    }
} 
```

**解析器 didEndElement**

```
-(void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName
                                    namespaceURI:(NSString *)namespaceURI
                                    qualifiedName:(NSString *)qName{

} 
```

**输出和问题**

问题是解析器似乎多次通过一个元素。这导致我的值数组看起来像这样：

```
 2013-03-14 12:54:54.591 BarcodeScanner[582:907] Array Values(
    4,
    "\n  ",
    61821B741AEBI8,
    "\n  ",
    c,
    "\n  ",
    2,
    "\n  ",
    "\n  ",
    G01E01R01,
    "\n  ",
    "2011-12-06",
    "\n  ",
    "2003-01-01",
    "\n"
) 
```

输出也有点复杂。我的错误是解析器首先采用起始 xml 标记，例如。(Parser didStartElement) ，而不是读取值 4 (Parser foundCharacters) 并至少读取 (Parser didEndElement) ？

我希望有人可以帮助解决这个问题。谢谢和最好的问候-托拜厄斯

```
2013-03-14 12:54:54.423 BarcodeScanner[582:907] Found: id with value: 4
2013-03-14 12:54:54.425 BarcodeScanner[582:907] Found: id with value: 

2013-03-14 12:54:54.426 BarcodeScanner[582:907] Found: invnr with value: 61821B741AEBI8
2013-03-14 12:54:54.428 BarcodeScanner[582:907] Found: invnr with value: 

2013-03-14 12:54:54.430 BarcodeScanner[582:907] Found: art with value: c
2013-03-14 12:54:54.432 BarcodeScanner[582:907] Found: art with value: 

2013-03-14 12:54:54.444 BarcodeScanner[582:907] Found: type_id with value: 2
2013-03-14 12:54:54.446 BarcodeScanner[582:907] Found: type_id with value: 

2013-03-14 12:54:54.448 BarcodeScanner[582:907] Found: rechnung with value: 

2013-03-14 12:54:54.450 BarcodeScanner[582:907] Found: standort with value: G01E01R01
2013-03-14 12:54:54.451 BarcodeScanner[582:907] Found: standort with value: 

2013-03-14 12:54:54.454 BarcodeScanner[582:907] Found: erstellt with value: 2011-12-06
2013-03-14 12:54:54.456 BarcodeScanner[582:907] Found: erstellt with value: 

2013-03-14 12:54:54.461 BarcodeScanner[582:907] Found: gekauft with value: 2003-01-01
2013-03-14 12:54:54.464 BarcodeScanner[582:907] Found: gekauft with value: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T09:33:25.080

您是正确的，您需要实施`didStartElement`,`foundCharacters`和`didEndElement`. 您也是正确的，`foundCharacters`在处理给定元素的过程中将被调用多次，因此您需要通过将字符*附加*到字符串来处理此问题，而不是每次都创建一个新的独立字符串。[或者，正如 Apple 在文档](http://developer.apple.com/library/ios/#documentation/cocoa/reference/NSXMLParserDelegate_Protocol/Reference/Reference.html)中所说：

> 解析器对象可以向委托发送几个 parser:foundCharacters: 消息来报告元素的字符。因为字符串可能只是当前元素的全部字符内容的一部分，所以您应该将它附加到当前的字符累积中，直到元素发生变化。

例如，这是我当前项目中一个简单工作解析器的完整实现。请注意是多么简单`foundCharacters`- 您在基本级别上需要做的就是不断将字符附加到字符串，直到`didEndElement`被调用（然后您可以在其中清除它`didEndElement`并再次开始附加过程）：

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName
  namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName
    attributes:(NSDictionary *)attributeDict{

    if([elementName isEqualToString:@"device"]){
        self.currentDeviceID = [[SRDeviceID alloc]init];
    }
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName{

    if([elementName isEqualToString:@"deviceList"]){
        [self.pairingTableView reloadData];
    }

    if([elementName isEqualToString:@"device"]){
        [self.deviceIDListFromServer addObject:self.currentDeviceID];
    }

    //The accumulation of characters for the current element is complete,
    //so we can tidy up the string and use the result:
    NSString* finalParsedString = [self.currentParseString stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];

    if([elementName isEqualToString:@"deviceName"]){
        self.currentDeviceID.deviceName = finalParsedString;
    }

    if([elementName isEqualToString:@"UUID"]){
        self.currentDeviceID.uuid = finalParsedString;
    }

    if([elementName isEqualToString:@"deviceLocation"]){
        self.currentDeviceID.location = finalParsedString;
    }

    if([elementName isEqualToString:@"deviceLastSeenTime"]){
        self.currentDeviceID.lastSeenTime = finalParsedString;
    }

    //Now we've used the accumulated string from the current element,
    //we can clear it ready to start the accumulation process for
    //the next element's contents:
    self.currentParseString = [NSMutableString stringWithString:@""];

}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string{
    //All we need to do here is add the next lot of characters
    //to the accumulating string for the current element,
    //which continues to happen until didEndElement is called:
    [self.currentParseString appendString:string];
} 
```

# java - 具有自动换行和有限宽度并支持 HTML 的 Swing 组件

> ID：15408809
> 
> 赞同：0
> 
> 时间：2013-03-14T12:05:25.847
> 
> 标签：java, html, swing, jscrollpane, jtextcomponent

我想实现一个带有滚动条的小工具提示，就像在类或成员上方悬停时出现的 eclipse 中的那样。

我遇到的问题是找到一种方法来限制我在工具提示中的滚动窗格中组件的宽度而不是高度。该组件应该支持 HTML，并且当文本超出内部边界的宽度时也可以正确包装文本，但是我尝试过的所有组件都具有换行或 HTML 呈现，但不是两者兼而有之

仅限制宽度的方法也无处可寻，因为每个“setXSize”，其中 X 是“首选”“最大”“最小”等都需要两个参数，并且组件没有“setMaxWidth”方法。

设置“setMaximumSize(new Dimension(256, Integer.MAX_VALUE);”似乎是一个解决方案，但它不起作用，因为“max”和“min”设置的参数大部分时间都被忽略，这非常令人沮丧。

根据要求提供当前的实施示例：

```
public class MyTooltip extends JTooltip{
    private JScrollPane scroll;
    private JEditorPane pane;

    public MyTooltip(String htmlCode){
       this.pane = new JEditorPane();
       this.scroll = new JScrollPane(this.pane);
       this.pane.setEditable(false);
       this.pane.setContentType("text/html");
       this.scroll.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);

       //Here the problems begin
       this.pane.setMaximumSize(new Dimension(512, Integer.MAX_VALUE));
       this.scroll.setMaximumSize(new Dimension(512, Integer.MAX_VALUE));
       this.pane.setText(htmlCode);

       this.add(scroll);
    }
} 
```

*   实际的代码有点复杂。但我认为这是一个很好的近似值......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:10:27.230

您是否尝试`JTextPane`过`HTMLEditorKit`（内容类型文本/html）？

我认为这就是你所需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T20:56:10.257

Ok, the whole problem just solved itself: One had the idea to let the user write his own texts to be displayed on the tooltips, but that included letting him use multiple "spaces" for indentation when he called for it.

To let HTML render this as intended we replaced every "space" with an `& nbsp;` so no optimization on gaps between characters would be performed, but this of course has the result that no algorithm for automatic line wrapping would accept any "gap" between words as a suitable place to break the line.

So our implementation actually works as intended, only the Strings we give the tooltip to display are not suitable to be line broken.

# iphone - 当我点击按钮时得到大的警告/gdp 输出

> ID：15408812
> 
> 赞同：-1
> 
> 时间：2013-03-14T12:05:27.727
> 
> 标签：iphone, ios

我正在开发一个应用程序。我准备了一个带有四个答案框的问题，每个答案框都有一个带有 UILable 的视图，并启用了 UIView 和 UILable 的用户交互，并使用相同的方法为不同的点击手势对象准备了点击手势，当我点击任何按钮第一次响应并在控制台中打印以下内容需要一些时间。请为此问题提供一些帮助。

```
2013-03-14 17:31:37.814 StudyApps[1971:12303] Error loading /System/Library  /Extensions/AudioIPCDriver.kext/Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn:  dlopen(/System/Library/Extensions/AudioIPCDriver.kext/Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn, 262): Symbol not found: ___CFObjCIsCollectable
Referenced from: /System/Library/Frameworks/Security.framework/Versions/A/Security
Expected in: /Users/wifin/Desktop/Desktop/software/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
in /System/Library/Frameworks/Security.framework/Versions/A/Security
2013-03-14 17:31:37.826 StudyApps[1971:12303] Error loading /System/Library/Extensions  /AudioIPCDriver.kext/Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn:  dlopen(/System/Library/Extensions/AudioIPCDriver.kext/Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn, 262): Symbol not found: ___CFObjCIsCollectable
Referenced from: /System/Library/Frameworks/Security.framework/Versions/A/Security
Expected in: /Users/wifin/Desktop/Desktop/software/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
in /System/Library/Frameworks/Security.framework/Versions/A/Security
2013-03-14 17:31:38.084 StudyApps[1971:12303] Error loading /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn:  dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn, 262): Symbol not found: ___CFObjCIsCollectable
Referenced from: /System/Library/Frameworks/Security.framework/Versions/A/Security
Expected in: /Users/wifin/Desktop/Desktop/software/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
in /System/Library/Frameworks/Security.framework/Versions/A/Security
2013-03-14 17:31:38.096 StudyApps[1971:12303] Error loading /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn:  dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn, 262): Symbol not found: ___CFObjCIsCollectable
Referenced from: /System/Library/Frameworks/Security.framework/Versions/A/Security
Expected in: /Users/wifin/Desktop/Desktop/software/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
in /System/Library/Frameworks/Security.framework/Versions/A/Security
2013-03-14 17:31:38.119 StudyApps[1971:12303] Error loading /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn:  dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn, 262): Symbol not found: ___CFObjCIsCollectable
 Referenced from: /System/Library/Frameworks/Security.framework/Versions/A/Security
 Expected in: /Users/wifin/Desktop/Desktop/software/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
in /System/Library/Frameworks/Security.framework/Versions/A/Security
2013-03-14 17:31:38.130 StudyApps[1971:12303] Error loading /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn:  dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn, 262): Symbol not found: ___CFObjCIsCollectable
Referenced from: /System/Library/Frameworks/Security.framework/Versions/A/Security
Expected in: /Users/wifin/Desktop/Desktop/software/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
in /System/Library/Frameworks/Security.framework/Versions/A/Security
2013-03-14 17:31:38.152 StudyApps[1971:12303] Error loading /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn:  dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn, 262): Symbol not found: ___CFObjCIsCollectable
 Referenced from: /System/Library/Frameworks/Security.framework/Versions/A/Security
Expected in: /Users/wifin/Desktop/Desktop/software/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
in /System/Library/Frameworks/Security.framework/Versions/A/Security
2013-03-14 17:31:38.168 StudyApps[1971:12303] Error loading /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn:  dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn, 262): Symbol not found: ___CFObjCIsCollectable
Referenced from: /System/Library/Frameworks/Security.framework/Versions/A/Security
Expected in: /Users/wifin/Desktop/Desktop/software/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
in /System/Library/Frameworks/Security.framework/Versions/A/Security
2013-03-14 17:31:38.692 StudyApps[1971:12303] Error loading /Library/Audio/Plug-Ins/HAL/Hear.plugin/Contents/MacOS/Hear:  dlopen(/Library/Audio/Plug-Ins/HAL/Hear.plugin/Contents/MacOS/Hear, 262): Symbol not found: ___CFObjCIsCollectable
Referenced from: /System/Library/Frameworks/Security.framework/Versions/A/Security
Expected in: /Users/wifin/Desktop/Desktop/software/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
in /System/Library/Frameworks/Security.framework/Versions/A/Security
2013-03-14 17:31:38.692 StudyApps[1971:12303] Cannot find function pointer HearCFPlugInFactory for factory 8368FFAB-0147-4692-97ED-4D50A2483C6C in CFBundle/CFPlugIn 0x76f8fd0 </Library/Audio/Plug-Ins/HAL/Hear.plugin> (bundle, not loaded) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T12:45:04.750

请检查这个答案： [这个 gdb 输出是什么意思？](https://stackoverflow.com/questions/7961840/what-does-this-gdb-output-mean)

总结：这个错误只是来自模拟器的系统框架的控制台噪音，你应该忽略它，它不会影响你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:38:16.597

从您的错误来看，编译器似乎无法找到您添加到项目中的框架。检查您是否正确添加了所需的框架。

**更新**

经过一番搜索后，我遇到了几个有类似问题的问题，这似乎是 iOS SDK 5 Simulator 的一个已确认错误，这意味着如果你在设备上运行就可以了。只需尝试在 iOS 5.1 以外的模拟器上运行它，您可能不会遇到此问题。我建议您像在 Xcode 4.5 中一样升级您的 X 代码，这个问题就解决了。

[礼貌：最初由 Till 回答](https://stackoverflow.com/a/8317546/818506)

# datagrid - datagrid 没有属性数据源

> ID：15408814
> 
> 赞同：0
> 
> 时间：2013-03-14T12:05:28.043
> 
> 标签：datagrid, datasource

我不能使用 dataGrid 的 dataSource 属性？

我的用途是

使用系统；

使用 System.Collections.Generic；

使用 System.Linq；

使用 System.Text；

使用 System.Windows；

使用 System.Windows.Controls；

使用 System.Windows.Data；

使用 System.Windows.Documents；

使用 System.Windows.Input；

使用 System.Windows.Media；

使用 System.Windows.Media.Imaging；

使用 System.Windows.Navigation；

使用 System.Windows.Shapes；

使用 System.IO；

使用 System.Data；

```
 private void button4_Click(object sender, RoutedEventArgs e)
            {
                tabControl1.SelectedIndex = 3;
                dataGrid2.DataSource///////////////does not come up :S

                ExcelData exceldata = new ExcelData();
                this.dataGrid2.DataContext = exceldata;

            } 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:08:32.670

它`DataSource`不是`Datasource`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:13:24.757

请看一下[DataGrid 数据源属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagrid.datasource.aspx)

windows Datagrid 也没有任何 Datacontext 属性

看看[Windows 数据网格](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagrid.aspx)

# android - 安装 ADT 时出现 Eclipse 依赖项错误

> ID：15408821
> 
> 赞同：3
> 
> 时间：2013-03-14T12:06:00.227
> 
> 标签：android, eclipse, eclipse-plugin

我正在尝试在我的 ubuntu 10.04 上的 Eclipse Galileo 3.5.2 中安装 ADT 插件。但我得到了依赖错误。请帮我修复错误。

这是我得到的错误细节。

```
Cannot complete the install because of a conflicting dependency.
  Software being installed: Android Development Tools 21.1.0.v201302060044-569685 (com.android.ide.eclipse.adt.feature.group 21.1.0.v201302060044-569685)
  Software currently installed: Eclipse Platform 3.5.2 (Eclipse Platform 3.5.2)
  Only one of the following can be installed at once: 
    Core Runtime 3.7.0.v20110110 (org.eclipse.core.runtime 3.7.0.v20110110)
    Core Runtime 3.5.0.v20090525 (org.eclipse.core.runtime 3.5.0.v20090525)
  Cannot satisfy dependency:
    From: Eclipse Platform 3.5.2 (Eclipse Platform 3.5.2)
    To: org.eclipse.core.runtime [3.5.0.v20090525]
  Cannot satisfy dependency:
    From: Android Development Tools 21.1.0.v201302060044-569685 (com.android.ide.eclipse.adt.feature.group 21.1.0.v201302060044-569685)
    To: org.eclipse.core.runtime 3.6.0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T12:16:03.537

ADT 插件页面[状态](http://developer.android.com/tools/sdk/eclipse-adt.html)

```
Eclipse Helios (Version 3.6.2) or higher is required for ADT 21.1.0. 
```

您发布的输出显示您正在使用 ADT 21.1.0，因此，似乎是时候更新 eclipse 了：)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T12:39:45.930

不再为 eclipse 3.x 烦恼

下载最新的 Eclipse (Juno - 4.2)： http: [//www.eclipse.org/downloads/](http://www.eclipse.org/downloads/)

或者如果你只做 android 开发更好，下载 android 开发者包，它有内置的 eclipse 版本，预装了 ADT：http: [//developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-24T14:49:35.173

您也可以在以下网址下载 org.eclipse.core.runtime-3.7.0.v20110110.jar：[http ://www.java2s.com/Code/Jar/o/Downloadorgeclipsecoreruntime370v20110110jar.htm](http://www.java2s.com/Code/Jar/o/Downloadorgeclipsecoreruntime370v20110110jar.htm)

# java - 在 javac 中使用高于 -source 的 -target

> ID：15408824
> 
> 赞同：1
> 
> 时间：2013-03-14T12:06:10.810
> 
> 标签：java, performance, compilation

我有一个使用我的机器上安装的项目编写`JDK 1.4.1`的项目。`JDK 1.7`我可以使用以下代码构建那些*1.4 源*：

```
javac @sources.txt -source 1.4 -target 1.4 -deprecation -classpath %cp% -Xstdout log.txt -d .\classes 
```

可以`-source 1.4 -target 1.7`组合运行吗？

* * *

另外我很好奇，如果我在安装了 JDK 1.7.1 的系统上运行使用 JDK 1.4.1 编写的应用程序，会有任何性能提升吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T13:17:08.887

有可能，但是，我认为您这样做不会赢得性能。此外，您不想这样做是有原因的，请参阅[JDK、JRE 和 JAR 兼容性](https://stackoverflow.com/questions/8983310/jdk-jre-an-jars-compatibility)

# python - Pymongo - 转换数据类型并找到最大值

> ID：15408831
> 
> 赞同：1
> 
> 时间：2013-03-14T12:06:29.133
> 
> 标签：python, mongodb, pymongo, aggregation-framework

我在 pymongo 中编写了以下聚合查询，以从 " **high** " 列中获取最大值，从**low**列中获取最小值。

```
db.bseadjprice.aggregate([
                            {
                                "$match": 
                                {
                                    "date" : {"$in":['2012-03-15 00:00:00.000', '2012-03-16 00:00:00.000']},
                                    "scripcode":"533159"
                                }
                            }, 
                            {
                                "$group" : 
                                {
                                    "_id" : "$scripcode", 
                                    "high":{"$max":"$high"}, 
                                    "low":{"$min":"$low"}
                                }
                            }
                        ]) 
```

因为值在刺痛我得到不正确的值。

有没有办法解决这个问题，比如输入“int（$ **low**）”并得到正确的答案？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T23:11:13.707

我认为您可以更改`$type`整个集合的字段，然后运行您的查询。

# java - 为 GWT css 类启用混淆？

> ID：15408835
> 
> 赞同：2
> 
> 时间：2013-03-14T12:06:34.903
> 
> 标签：java, css, gwt, obfuscation

我已将 gwt maven 插件配置中的样式配置参数设置为 OBFUSCATED（使用 maven）。但是，只有我自己的资源包的样式会被混淆，而 GWT 的标准主题不会。

我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T18:00:59.627

我不使用 GWT 的 maven 插件，但我猜您将编译器 (javascript) 输出样式 ( `OBFUSCATED`| `PRETTY`| `DETAILED`) 与`CSS`样式 (不作为选项存在) 混淆了。

样式混淆是 a`CssResource`的功能，即，当您使用 a`CssResource`的 a`ClientBundle`时，默认情况下所有选择器都会被混淆。标准`GWT`主题没有被混淆，所有选择器实际上都通过调用`setStyleName("gwt-WidgetName")`.

# python - AttributeError：“模块”对象没有属性“窗口”

> ID：15408838
> 
> 赞同：0
> 
> 时间：2013-03-14T12:06:40.477
> 
> 标签：python, attributes, tkinter

好吧，我看过很多关于大多数相关问题的帖子，但没有一个完全适合我的。

这些是软件的规格： Python 3.3（多个副本，一个在 Windows XP 32 位上，另一个在 Windows 7 64 位上）两个副本上的相同问题 两台机器上都存在用于 Python 的 win32 API

这是代码：

```
#Training Program for Chemence Owned Laser Cutter
#Written by Jared Lunt in the Python Programming Language.

try:
    import tkinter
except ImportError:
    raise ImportError ("The tkinter Module is required to run this program.")

main = tkinter.Tk()

#The first objective of the app design is to state the Title
main.title("Laser Cutter Operations Training")

#The second objective of the app design is to define the size of the Main Window.
import sys, cmd
sys.path.append('C:/Python33//Lib/site-packages/win32')
from win32api import GetSystemMetrics

systemWidth = GetSystemMetrics (0)
systemHeight = GetSystemMetrics (1)
width = systemWidth / 2
height = systemHeight / 2
left = width / 2
top = height / 2

window = cmd.window()
cmd.ShowWindow(window)
cmd.window(window, edit=True, topLeftCorner=( top, left ), widthHeight=( width, height ) )

main.mainloop()' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T13:15:52.067

你在这里尝试一些非常奇怪的东西。我想知道您从哪里得到导入 cmds 或 cmd 的想法，但无论如何这不是要走的路。

您可以只使用 Tkinter 的[几何](http://effbot.org/tkinterbook/wm.htm#Tkinter.Wm.geometry-method)方法来控制窗口的大小和位置：

```
main.geometry("%sx%s+%s+%s" % (width, height, left, top) ) 
```

而不是使用`cmd`.

# javascript - 通过 Id 从另一个页面获取元素

> ID：15408839
> 
> 赞同：1
> 
> 时间：2013-03-14T12:06:41.980
> 
> 标签：javascript, replace

如果 page2 包含指定的元素，我需要更改 page1 的内容。如果我从同一页面获取 id，此代码效果很好

```
if (document.getElementById("page_element")) {
    var str = document.getElementById("destination").innerHTML;
    var n = str.replace("Login", "Logout");
    document.getElementById("destination").innerHTML = n;
} 
```

但我需要检查 page2 上是否存在元素以更改 page1 的内容。

我必须改变这个

```
 if (document.getElementById("page1_element")) 
```

正确的路径是page2（在我的例子中是logged.html）。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T12:15:24.580

认为这将工作...

```
var iframe = document.getElementById("iframeId"),
    doc = getFrameDocument(iframe);

doc.getElementById("page2_element_id"); // [DOM Element]

function getFrameDocument(iframe){
    return iframe.contentDocument ? iframe.contentDocument : iframe.contentWindow.document;
} 
```

* * *

`return cond ? a : b`方法：

```
if ( cond ) {
    return a;
}
else {
    return b;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-30T05:05:03.460

我想这可能会对你有所帮助...不要对我太苛刻。这是我的第一篇文章：p

```
var element_change_content_page1 = "element_id_page1";
var page2_datatype = "html";
var filename_page2 = "logged.html";
var target_element_id_page2 = "element_id_page2";
var target_element_type_page2 = "div"

$.get( filename_page2 , function(response, status){
//You can also use jQuery " $.post() " Method instead of " $.get() "
//Source: http://www.w3schools.com/jquery/ajax_get.asp
var data = $('<div>' + response + '</div>');
var target_element = data.find( target_element_type_page2 + '#'+ target_element_id_page2 )[0]; //There "might" be more div elements with the same id: specify index
if(typeof target_element !== 'undefined'){
    //Page2 contains specified element
    var container = document.getElementById( element_change_content_page1 );
    container.innerHTML = "Content is changed!!!";
} else {
    //Page2 DOES NOT contain specified element
}
}, page2_datatype); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T00:42:12.317

这样想吧。JavaScript 在浏览器中运行，例如 Chrome。Chrome 可以看到当前加载的页面，但不知道仍然在服务器上的 html 文件，直到它们被带入浏览器。你可以做的是有一个包含不可见的logged.html的iFrame（可能是1x1像素，或者在页面外有一个位置的固定位置（左：4000px）。然后你可以参考iFrame并从中获取元素在那里，这个解释了如何引用 iFrame 中的元素：[getElementById from iframe](https://stackoverflow.com/questions/1896360/getelementbyid-from-iframe)

# java - 如何为 log4jdbc 配置 log4j2.xml？

> ID：15408840
> 
> 赞同：3
> 
> 时间：2013-03-14T12:06:43.923
> 
> 标签：java, xml, logging, jdbc, log4j2

有谁知道如何配置 log4j2.xml 文件以使用 log4jdbc？我已经搜索了几个小时，但似乎找不到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T16:48:06.203

log4jdbc 依赖于[SLF4J](http://www.slf4j.org/)。迄今为止，SLF4J 和 Log4j 2 之间没有合适的连接器。

如果需要，您可以改用[log4jdbc-log4j2](http://code.google.com/p/log4jdbc-log4j2/)，它正好解决了让 log4j2 与 log4jdbc 一起工作的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-27T08:12:59.113

从 beta5 开始，Log4j 2.0 不提供 JDBC Appender。但是，该团队正在开发一个，后续版本可能会包含一个。

这也意味着：如果您有任何功能请求、想法或意见，现在是让团队知道的好时机！

开发邮件列表、用户邮件列表或 Jira 问题跟踪器都是让您听到声音的好地方。

* * *

更新：从 beta 7 开始，Log4j2 提供 JDBC、JPA 和 NoSQL 数据库附加程序。

# c# - 由于无法删除二进制文件，Visual Studio 生成错误

> ID：15408842
> 
> 赞同：1
> 
> 时间：2013-03-14T12:06:46.397
> 
> 标签：c#, .net, visual-studio-2010

我有一个 C# Windows Forms 应用程序（我们称之为 App.exe），由于奇怪的原因无法构建。这似乎是由于 Visual Studio 2010 中的一个错误。我无法升级到 VS2012。

*   在代码更改和构建后，VS2010 似乎无法删除旧的二进制 App.exe。
*   然后它会发现旧二进制文件中的一些类型并抛出错误“以下方法或属性之间的调用不明确”。
*   错误消息中显示的类型相同。所以我认为它在旧二进制文件和源代码中都找到了类型。
*   当我清理和重建，或从磁盘中删除旧的二进制 App.exe 时，构建成功

这是我遇到的错误类型的示例：

```
The call is ambiguous between the following methods or properties:     
'App.Namespace.Class.Method(System.Type)' 
and 
'App.Namespace.Class.Method(System.Type)' 
```

对于解决此问题的任何帮助，我将不胜感激。

**编辑**

这是由应用程序对自身有程序集引用引起的。不知道这是怎么发生的，但是当我删除参考时，问题就解决了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:21:05.383

您是否尝试过创建一个新项目？只需创建一个新项目并添加现有文件。您也可以尝试删除解决方案文件夹中的 bin 和 obj 文件夹。

**更新**

这是一种自动破解，但它应该可以工作。右键单击您的项目并打开其属性。转到构建事件并在预构建事件命令行中输入以下内容：

```
cd $(TargetDir)
del *.exe 
```

这将在构建之前删除旧的二进制文件。希望这可以帮助。

# php - 验证 mysql 列数据并在该行中查找匹配的电子邮件？

> ID：15408852
> 
> 赞同：2
> 
> 时间：2013-03-14T12:07:07.867
> 
> 标签：php, mysql

嗨，我想知道是否有人可以帮助我，我基本上有一个注册表单，用户可以在其中注册，每次注册都会在数据库中生成一个唯一的验证码，并在用户注册时通过电子邮件发送给用户。

我现在正在第二阶段工作，用户点击他们电子邮件中的链接并被带到verification.php

在此页面上，用户必须输入他们在电子邮件中发送的验证/注册码。我在这里的脚本应该查找验证码并确保它与数据库中的匹配。

我想要做的是以某种方式告诉我的查询，如果验证码/注册码与我们在数据库中保存的正确，那么向我们为匹配该验证码的用户保存的电子邮件地址发送一封确认电子邮件。（因此属于该行的电子邮件具有相同的验证码。）

我的桌子看起来像这样

```
id           email               registration_code (verification code)
1      example@email.com                    5093dkfd 
```

目前，我的查询搜索数据库中保存的注册码，但我不知道如何获取它以找到与该注册码匹配的电子邮件并发送电子邮件。这一点我需要帮助。谁能指出我正确的方向，

我还希望查询告诉用户他们是否正确输入了代码，因为它目前告诉他们他们已经正确输入了代码，即使他们没有。

```
/**
 * ShuttleCMS - A basic CMS coded in PHP.
 * Verification Code Check - Used to confirm a user's verification code
 * 
 */
define('IN_SCRIPT', true);
// Start a session
session_start();

//Connect to the MySQL Database
include 'includes/_config/connection.php';

/*
 * Checks form field for verification code, then where verification code has email, send email to recipient     
 */

if ($_POST['verificationcode']=='') {
        header('Location: verification.php?err=1');
}
if(get_magic_quotes_gpc()) {
        $verificationcode = htmlspecialchars(stripslashes($_POST['verificationcode']));
} 
else {
        $verificationcode = htmlspecialchars($_POST['verificationcode']);

}

/*
 * Checks if the verification code exists and look for email in that row which belongs to that verification code to send email out.
 */

$sql = "SELECT COUNT(*) FROM ptb_registrations WHERE registration_code = '$verificationcode' AND '$verificationcode' MATCHES email";
$result = mysql_query($sql)or die('Could not find member: ' . mysql_error());

if (!mysql_result($result,0,0)>0) {
    header('Location: verification.php?err=2');
} 
```

然后我们发送一封确认邮件：

```
/*
         * Email out the infromation
         */

    (EMAIL BODY)
    YOUR code was matched and you are now registered etc. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:19:08.340

像这样的东西应该工作：

```
$sql = "SELECT email FROM ptb_registrations WHERE registration_code = '$verificationcode'";
$result = mysql_query($sql)or die('Could not find member: ' . mysql_error());
if (mysql_num_rows($result) == 0) {
   header('Location: verification.php?err=2');
} else {
  $row = mysql_fetch_array($result);
  $email = $row['email'];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T12:25:35.683

首先，您应该知道 mysql_* 函数已被弃用，您应该使用其他 mysql 库之一，例如 mysqli 或 PDO（支持多种 SQL 风格）。

其次，您应该为您选择的 mysql 库使用适当的转义函数。

要选择匹配的电子邮件，请使用`SELECT email FROM ...`

要检查结果，您可以从一个 num_rows 函数开始（例如`mysql_num_rows`在 mysql 库中或`num_rows`mysqli 中的属性），以查看它是否找到匹配的电子邮件地址，然后如果找到匹配项，则获取实际行内容以获取电子邮件。然后使用 PHP 向该地址发送电子邮件。

# tsql - CONTAINMENT 在自动生成的数据库脚本中被标记为不正确的语法

> ID：15408854
> 
> 赞同：19
> 
> 时间：2013-03-14T12:07:20.097
> 
> 标签：tsql, windows-7-x64, sql-server-2012-express

我使用的是 Windows 7 (x64)，并且我有一个用于创建 SQL Server Express 2012 数据库的自动生成脚本。

脚本开始如下：

```
USE [master]
GO

 CREATE DATABASE [Example]
 CONTAINMENT = NONE
 ON  PRIMARY 
( NAME = N'Example', FILENAME = N'D:\Example.mdf' , SIZE = 4544KB ,
MAXSIZE = UNLIMITED, FILEGROWTH = 1024KB )
 LOG ON 
( NAME = N'Example_log', FILENAME = N'D:\Example_log.ldf' , SIZE = 3136KB ,
MAXSIZE = 2048GB , FILEGROWTH = 10%)
    GO
    ALTER DATABASE [Example] SET COMPATIBILITY_LEVEL = 100
    GO
    IF (1 = FULLTEXTSERVICEPROPERTY('IsFullTextInstalled'))
    begin
    EXEC [Example].[dbo].[sp_fulltext_database] @action = 'enable'
    end
    GO
    ... 
```

脚本第一个错误是

```
Msg 102, Level 15, State 1, Line 3
Incorrect syntax near 'CONTAINMENT'. 
```

这个想法是使用不同的 SQL Server 2012 版本将数据库从一台服务器传递到另一台服务器。我想保留脚本以防我需要在其他地方创建数据库。

为什么自动生成的脚本会导致这个错误？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-14T13:36:36.387

摆脱`CONTAINMENT = NONE`

它是默认设置，因此您不需要它，而且 SQL Server Express 似乎无法使用它。

# c - 没有 calloc/malloc 的数组的动态内存分配

> ID：15408856
> 
> 赞同：-1
> 
> 时间：2013-03-14T12:07:30.913
> 
> 标签：c, arrays

我不明白以下程序中的数组声明：

```
int main(){
  int n;
  printf("How many numbers?");
  scanf(" %d",&n);
  int array['n'];
  for(int i = 0; i < n; i++)
  {
    scanf(" %d",&array[i]);
  }
  for(int i = 0; i < n; i++)
  {
    printf(" %d\n",*(array +i));
  }
  getch();
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:27:08.680

替换`int array['n']`为`int array[n]`并确保您使用 C 编译器来编译代码，它会正常工作。具有非常量大小的自动分配数组称为[VLA](http://en.wikipedia.org/wiki/Variable-length_array)，14 年前在 C99 中引入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:10:51.353

好吧，'' 语法意味着用它的 ascii 值替换。所以

```
int array['n']; 
```

实际上是：

```
int array[110]; 
```

[（ ascii](http://www.asciitable.com/)中的 'n'=110 ）

所以只要 n < 110 这将起作用，但我怀疑这就是编码器的意图！

可能`int array[n];`是这里的意图。缺少`malloc`意味着数组是在堆栈上创建的，而不是在堆上。（进一步阅读：[c 中的内存管理](http://staff.um.edu.mt/csta1/courses/lectures/csa2060/c8a.html)）。

`int array['n'];`编译而`int array[n];`没有编译的原因是因为数组大小需要是常量。'n' 是一个常数 (110)，而 n 不是。

编辑：许多用户已经注意到这一点，所以我不妨把它拼出来，常量数组大小限制是编译器特定的。现代纯 c 编译器允许它，而 c++ 编译器则不允许。[VLA](http://en.wikipedia.org/wiki/Variable-length_array)是一个好主意的问题总体上是一个有争议[的问题](https://groups.google.com/forum/?fromgroups=#!topic/comp.std.c++/K_4lgA1JYeg)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-29T17:06:47.367

```
#include <stdio.h>
#include <stdlib.h>

// working in Dev-C++
int main() {
int a,i;

printf("enter size\n");
scanf("%d",&a);
int arr[a];
for(i=0;i<a;i++)
{
    scanf("%d",&arr[i]);
}
for(i=0;i<a;i++)
{
    printf("%d",arr[i]);
}
return 0;
} 
```

# php - 如何用来自 URL 的文本覆盖图像？

> ID：15408862
> 
> 赞同：2
> 
> 时间：2013-03-14T12:07:36.900
> 
> 标签：php, image-processing

首先让我总结一下情况：

我们目前为当地零售商运行奖励系统，目前通过电子邮件发送给客户的优惠券是一个简单的 PNG 文件，可以打印并返回商店以获得促销折扣。

当客户单击发送到其电子邮件地址的链接时，我们希望将客户的会员编号和姓名覆盖在优惠券上。我们的电子邮件系统允许我们个性化每个客户收到的链接。

例如，当客户收到以下链接时：www.website.com/testvoucher.htm

现在，根据对此事的一些有限经验，我了解到可以使用 php 覆盖凭证图像以创建个性化凭证。我想链接会变成这样：

www.website.com/testvoucher.php?membernumber='2100000'&membername='Mrs%20Smith'

我的问题是如果可能的话使用 php 如何创建从 URL 个性化的图像？

任何反馈将不胜感激。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T12:17:05.310

您将要查看[ImageMagick](http://php.net/manual/en/book.imagick.php) API。更具体地说，[这里](http://php.net/manual/en/imagick.annotateimage.php)`annotateImage`描述的功能。

```
<?php
    /* Create some objects */
    $image = new Imagick();
    $draw = new ImagickDraw();
    $pixel = new ImagickPixel( 'gray' );

    /* New image */
    $image->newImage(800, 75, $pixel);

    /* Black text */
    $draw->setFillColor('black');

    /* Font properties */
    $draw->setFont('Bookman-DemiItalic');
    $draw->setFontSize( 30 );

    /* Create text */
    $image->annotateImage($draw, 10, 45, 0, 'The quick brown fox jumps over the lazy dog');

    /* Give image a format */
    $image->setImageFormat('png');

    /* Output the image with headers */
    header('Content-type: image/png');
    echo $image;
?> 
```

（*从功能文档页面复制粘贴*）

您可以简单地通过电子邮件向他们发送一个链接，`www.website.com/testvoucher.php?membernumber=2100000&membername=Mrs%20Smith`上面的 php 代码稍作修改以使用凭证图像并从 url 获取文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:19:16.340

您可以为此使用 GD Image 库：

[http://php.net/manual/en/book.image.php](http://php.net/manual/en/book.image.php)

您可以使用多个功能根据其扩展名打开图像，例如。：

[http://www.php.net/manual/en/function.imagecreatefromjpeg.php](http://www.php.net/manual/en/function.imagecreatefromjpeg.php) JPEG

[http://www.php.net/manual/en/function.imagecreatefrompng.php](http://www.php.net/manual/en/function.imagecreatefrompng.php)用于 PNG

您也可以通过以下方式获取名称`$_GET['membername']`并将其打印在图像上：

[http://www.php.net/manual/en/function.imagefttext.php](http://www.php.net/manual/en/function.imagefttext.php)

# cakephp - 在组件中使用 Lib

> ID：15408865
> 
> 赞同：0
> 
> 时间：2013-03-14T12:07:45.287
> 
> 标签：cakephp

我想在我的组件中使用*CustomLib 。*我怎样才能做到这一点？

我尝试`App::uses('Util','Lib')`，但不起作用：

```
$number = $this->Util->sqlnum($number);
Error: Call to a member function sqlnum() on a non-object 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T12:21:03.903

使用 App::uses() 你只是告诉 Cake 在哪里可以找到类。您仍然需要自己创建对象

```
$this->Util = new Util();
$number = $this->Util->sqlnum($number); 
```

基础面向对象。

唯一不需要这样做的情况是静态访问方法时。

```
public static function sqlnum($number) {} 
```

和

```
$number = Util::sqlnum($number); 
```

但是，这是否可能取决于您的班级以及该方法的工作原理。

* * *

编辑：并完成此操作：对于模型类，它是不同的。你总是使用：

```
$MyModel = ClassRegistry::init('MyModel'); // never use `new MyModel()` here 
```

并且您不需要 App::uses() 类，因为 ClassRegistry 本身就是这样做的。

# selenium - 如何使用 Webdriver 测试正确的文本是否已输入到字段中？

> ID：15408866
> 
> 赞同：0
> 
> 时间：2013-03-14T12:07:47.040
> 
> 标签：selenium, webdriver

我正在编写 Selenium 测试，需要检查 javascript 是否正确设置了某些字段中的文本。

我一直在尝试使用`.text`这样的方式获取特定 Webelement 的文本值；

```
test = WebDriverWait(self.ff, 10).until(lambda driver : driver.find_element_by_xpath("//input[@id='id_testText']"))
assert test.text == u'TEST' 
```

但`test.text`永远不会获得价值。

我可以`.clear()`，也`.send_keys()`可以，但即使有了这些，我也无法获得价值。那么我在尝试测试它的价值时哪里出错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T12:29:34.747

为什么使用等待获取 webelement？反正

```
test = WebDriverWait(self.ff, 10).until(lambda driver : driver.find_element_by_xpath("//input[@id='id_testText']"))
text = test.get_attribute('value')
assert text == u'TEST' 
```

# c# - 使用c#从文本文件中删除备用行

> ID：15408867
> 
> 赞同：5
> 
> 时间：2013-03-14T12:07:56.047
> 
> 标签：c#, asp.net

我正在做一个项目，我必须从 .txt 文件中读取数据，然后使用查询将每一行插入到表中。

现在例如文本文件的内容将是

11111

1111x

22222

2222x

33333

3333x

等等。

现在您可以看到备用行几乎是重复的，所以我想删除备用行，以便可用数据变为

11111

22222

33333

然后处理我的其余代码。

有什么办法可以做到吗？

到目前为止，我一直在使用数组列表来获得这个

```
using (StreamReader sr = new StreamReader(Server.MapPath("03122013114450.txt"), true))
        {

            string txtValues = sr.ReadToEnd();
            string[] txtValuesArray1 = Regex.Split(txtValues, "\r\n");

            ArrayList array = new ArrayList();
            foreach (string value in txtValuesArray1)
            {
                array.Add(value);
            }

            for (int i = 0; i < array.Count; i++)
            {
                if (array.Count % 2 != 0)
                    array.RemoveAt(i + 2);
                else
                    array.RemoveAt(i + 1);
            }
        } 
```

基本思想是从文本文件的数组列表的索引中删除备用行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T12:17:50.337

刚刚用 LINQ 试过这个

```
string[] lines = File.ReadAllLines("your_file_name");
var result = lines.Where((s, idx) => idx % 2 == 0); 
```

当然，如果您的文件非常大，那么您需要逐行工作并在阅读时跳过不需要的行

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T12:15:52.303

快速优化，

```
static IEnumerable<string> OddLines(string path)
{
    var flipper = true;

    foreach (var line in File.ReadLines(path))
    {
        if (flipper) yield return line;
        flipper = !flipper;
    }
} 
```

你可以像这样使用它，

```
var oddlines = OddLines(Server.MapPath("03122013114450.txt")); 
```

* * *

或者，甚至更简单

```
var oddlines = File.ReadLines(Server.MapPath("03122013114450.txt"))
                   .Where((l, i) => i % 2 == 0); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T12:15:10.807

您通常想要做的是一次读取文件的一行，而不是将磁盘上的所有数据缓冲到内存中。想想它是否是一个 2GB 的文本文件（这不是什么不寻常的问题）——在开始处理它之前，您正在等待 2GB 的文件先加载。

```
ulong count = 0;
using (StreamReader sr = new StreamReader(Server.MapPath("03122013114450.txt"), true))
{
   while (!sr.EndOfStream) {
       count++;
       String line = sr.ReadLine();
       if ((count % 2) == 0) {
           // do additional processing here
           // like insert row into database
       }
    }
} 
```

（我的 C# 生锈了。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T12:19:08.070

另一个优化：

```
using (var sr = new StreamReader(Server.MapPath("03122013114450.txt"), true))
{
    var line = sr.ReadLine();
    while (line != null)
    {
        // Do stuff here. Add to the list, maybe?

        if (sr.ReadLine()!= null) //read the next line and ignore it.
            line = sr.ReadLine();
    }
} 
```

如果要忽略奇数行而不是偶数行，请将`line = sr.ReadLine();`while 循环的末尾移动到开头

# c++ - UDP Socket 接收垃圾值

> ID：15408876
> 
> 赞同：0
> 
> 时间：2013-03-14T12:08:14.320
> 
> 标签：c++, windows, udp, winsock

系统配置：Win XP (i7 2.1 Ghz) 外置 USB 网卡。通讯：主从通讯。约束 - 通信协议 UDP。

套接字配置：RecvFrom - 非阻塞。使用 setsockopt 将套接字大小更改为 1*1024*1024。

我的设置包括一个通过 UDP 与主节点通信的节点，它在 UDP 帧的有效负载中发送分段数据。该分段数据由每个以太网帧 5 个帧组成。从节点向主节点发送 1270 字节的分片数据。从站在不到 2 毫秒的时间内发送 18 - 20 帧。

主机周期性地接收这些帧而不丢弃它们。然而，来自 UDP 帧的有效载荷数据随机包含 2 个正确片段，其余 3 个片段是垃圾值。我在 smae 片段中观察到了 wireshark 上的痕迹，可以观察到正确的数据，但是 recvfrom API 如何在这 3 个片段中收集垃圾数据。看起来实际信息是如何被这个垃圾值替换的。当我将数据包数量减少到每 2 毫秒 2-3 个时，这种行为就会下降。

从控制台跟踪：

```
_recvBuf[2]: 0x5b  _recvBuf[256}: 0x5c  _recvBuf[510]: 0x5d  
_recvBuf[764}: 0x5e  _recvBuf[1018}: 0x5f

_recvBuf[2]: 0x60  _recvBuf[256}: 0x61  _recvBuf[510]: 0x64  
_recvBuf[764}: 0x0  _recvBuf[1018}: 0x0

Expected and as in the Wireshark trace:
_recvBuf[510]: 0x64  --> should be _recvBuf[510]: 0x62
_recvBuf[764}: 0x0  --> should be _recvBuf[510]: 0x63
_recvBuf[1018}: 0x0  --> should be _recvBuf[510]: 0x64 
```

并且垃圾值经常重复到 0xcd，用于随机数据包编号。

！！！数据包 200 - 错误！！！数据包 20000 - 错误！！！数据包 60000 - 错误！！！数据包 2 - 错误

我无法理解为什么会出现这种行为。

代码：

```
receive()
{
rc = select(_sock_fd+1, &read_fd, &write_fd, &excep_fd, &to);

    if (rc == 0 )  
    acess = 1; 

    else if (rc == SOCKET_ERROR) 
    {
        closesocket(_sock_fd);
        return -1;
    } 
    else 
    {
        if (!FD_ISSET(_sock_fd, &read_fd)) 
        {
            LogError("XCP: select() wrong socket descr");
            return -1;
        }
        else
        {

        rc = recvfrom(_sock_fd, (char *)_recvBuf, UDP_RECVBUFLEN, 0, (LPSOCKADDR)&_saddr, &cli_alen);

           printf("_recvBuf[3]: 0x%x  _recvBuf[2]: 0x%x  _recvBuf[256}: 0x%x  _recvBuf[510]: 0x%x  _recvBuf[764}: 0x%x  _recvBuf[1018}: 0x%x\n",_recvBuf[3],_recvBuf[2],_recvBuf[256],_recvBuf[510],_recvBuf[764],_recvBuf[1018]);
            _recvBuf[*(&rc)]='\0';

            if(rc == SOCKET_ERROR) 
            {
                closesocket(_sock_fd);
                return -1;
            }

                    _recvBufLen = rc;

            if (_recvBufLen > 0) 
            {
                int rc = 0;
                acess = 0;

                if (_rxNotification != NULL)
                    _rxNotification(_parent, _xhdl, _recvBuf, _recvBufLen);

                RxbufferLen=*(u16*)&_recvBufLen;

                /* Proto RX Queue Implementation Start */
                if(!(Fullqueue(Rxbufferqueue)))
                    Enqueue(Rxbufferqueue,_recvBuf);

                if(_recvBuf[4]==0xff)
                    acess = 1;
                else
                    acess = 0;

                return rc;
            }
            else 
                return 0;
        }
    } 
```

有关函数的附加信息：

```
void XcpTransportUdp::Enqueue (Queuetype &queue, unsigned char buf[MAX_BUFFER_SIZE_QUEUE],u16 _recvBufLen)  // Push Function for Queue
{
    Rxbufferqueue.BackPointer=(Rxbufferqueue.BackPointer+1)%MAX_BUFFER_IN_QUEUE;
    Rxbufferqueue.Recv_length[Rxbufferqueue.BackPointer]=_recvBufLen;
    memcpy(Rxbufferqueue.Buffer[Rxbufferqueue.BackPointer],buf,Rxbufferqueue.Recv_length[Rxbufferqueue.BackPointer]);
}
u16 XcpTransportUdp::Dequeue (Queuetype &queue, unsigned char Output_buffer[MAX_BUFFER_SIZE_QUEUE])  // Pop Function for Queue
{
    Rxbufferqueue.Frontpointer =(Rxbufferqueue.Frontpointer+1)%MAX_BUFFER_IN_QUEUE;
    BufLen=Rxbufferqueue.Recv_length[Rxbufferqueue.Frontpointer];
    memcpy(Output_buffer,Rxbufferqueue.Buffer[Rxbufferqueue.Frontpointer],Rxbufferqueue.Recv_length[Rxbufferqueue.Frontpointer]);
    return BufLen;
} 
```

:::Edir1::: 我发现错误与内存初始化有关，而不是与套接字有关。enqueue函数中的memcpy函数报长度为0cCD的错误。有谁知道这个问题的解决方案..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T13:57:47.680

我马上看到一件值得怀疑的事情：

您应该首先检查返回代码是否失败**，**尤其*是*在使用返回代码作为数组索引之前！我不认为设置是安全的，但是，如果出现错误`_recvBuf[SOCKET_ERROR] = '\0';`，这正是在线上会发生的事情。`_recvBuf[*(&rc)] = '\0';`另外，什么`*(&rc)`时候可以使用`rc`？

此外，代码没有显示的声明，`_recvBuf`所以我们必须假设它足够大以接收`UDP_RECVBUFLEN`字符（我们在示例代码中看不到其值的另一个符号。）你真的需要`_recvBuf`在`(char *)`调用中`recv()`强制转换吗？我问是因为您似乎将它视为其他地方的字符数组。我也不确定您是否在打印这些字节之前验证您是否阅读了您认为应该阅读的尽可能多的字节。

# c++ - 您可以将任何指针类型或基类传递给函数 typedef

> ID：15408877
> 
> 赞同：0
> 
> 时间：2013-03-14T12:08:15.157
> 
> 标签：c++, std, typedef, std-function

我有这个代码

```
class ClassX {};

class ClassY : public ClassX {};
typedef std::function<void (ClassX*)> myCaller;

class Foo {
    Foo()
    {
        createCaller(this, &Foo::bar); //line 22 with the error
    }

    template <typename Class>
    void createCaller(Class *obj, void (Class::*func)(ClassX*))
    {
         myCaller mc = std::bind(func, obj, std::placeholders::_1);;
    }

    void bar(ClassY* x)
    {
        printf("fooBrr");
    }

}; 
```

它工作正常，直到 bar 采用扩展 ClassX 而不是 ClassX 的 ClassY。

我得到编译时错误：main.cpp:22:9: No matching member function for call to 'createCaller'

问题是我将如何允许 bar 获取扩展 ClassX 的任何类或任何类的参数？有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:31:43.867

你不能这样做，因为它`bar`比`myCaller`. 但是，您可以采用另一种方式：

```
class ClassX {};

class ClassY : public ClassX {};
typedef std::function<void (ClassY*)> myCaller;

class Foo {
    Foo()
    {
        createCaller(this, &Foo::bar); //line 22 with the error
    }

    template <typename Class>
    void createCaller(Class *obj, void (Class::*func)(ClassX*))
    {
         myCaller mc = std::bind(func, obj, std::placeholders::_1);
    }

    void bar(ClassX* x)
    {
        printf("fooBrr");
    }

}; 
```

现在`bar`的限制比`myCaller`它可以绑定的要少。

您还可以`bar`将 a`ClassX*`和 dynamic_cast 它转换为 a`ClassY*`并检查 NULL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T13:13:05.207

对于 ClassY 和其他派生类，可以轻松地：

```
#include <functional>

class ClassX {};

class ClassY : public ClassX {};

typedef std::function<void (ClassX*)> myCaller;

int main()
{
    myCaller f = [](ClassX*){};
    ClassY classY;
    f(&classY);
} 
```

但是，您必须记住一些事情：

*   您传递的是 ClassY 对象的地址，而不是 ClassY 对象本身。你说你会通过ClassY，这是错误的。
*   您将参数声明为`ClassX*`，因此不能将指针传递给 const （即被`const ClassY*`禁止）
*   编译器必须*知道*ClassY 是从 ClassX 派生的，因此您必须包含 ClassY 的定义（标头）。
*   您调用该函数的代码必须有权访问“派生”属性，因此 ClassY 应该从 ClassX派生*公共*`protected`（对于挑剔者：是的，有`friend`，当然还有继承可以通过多级继承间接实现.. .)

但所有这些不仅适用于`std::function`，而且适用于一般的函数。对于不从 ClassX 派生（可见和可访问）的任何其他类，您不能调用该函数。

# windows - 如何以编程方式分配触摸屏以在 Windows 中显示？

> ID：15408883
> 
> 赞同：3
> 
> 时间：2013-03-14T12:08:27.993
> 
> 标签：windows, input, touch, settings, tablet

在 Windows 中，有一个名为 Tablet PC Settings 的面板，允许用户配置哪个显示器将分配给确定的触摸输入。

我想以编程方式执行此操作，但找不到执行此操作的 API。也许我还没有与权利文件划线。

有人知道这个 API 是否是公开的，是否可以用于 3rd 方开发人员？

谢谢

# java - 如何从头开始构建基本终端

> ID：15408889
> 
> 赞同：8
> 
> 时间：2013-03-14T12:08:38.980
> 
> 标签：java, linux, macos, operating-system

我在网上查看了一些建议或指针，包括在 stackoverflow 上，但我发现的任何东西都令人不知所措，我不确定从哪里开始。如果我忽略了一些明显的事情，请道歉。

我想了解终端是如何工作的，我想从头开始构建一个终端，我希望对涵盖终端所需概念和功能的材料提出任何建议或建议，但我不只是想要指向源代码的链接。我发现了很多开源项目，但我发现它们势不可挡。

理想情况下，我想构建自己的终端，可以在 OS X、Linux 和/或 Windows 上运行（我可能会使用 Java，但会考虑其他语言）并最终拥有一个 Web 界面（希望在我的浏览器中安装我的控制台）我知道这已经完成，但我想自己做，这样我就可以详细了解它是如何工作的，并且只是有一个项目要做。

我真正想要的是阅读材料/教程的起点，给我一些方向。如果这意味着退回到比终端更基本的东西，我很乐意这样做，一旦我有一些实际的程序可以让我朝着主要目标前进

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T12:52:55.297

创建到目标计算机的套接字连接，[从它读取，如果有，显示]，[等待用户输入，显示，将其发送到套接字]，重复。你已经有了基本的终端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T13:02:49.793

终端背后的想法是一个无限循环，它解释和执行每个命令。这是 Perl 中的一个示例：

```
use strict;
use warnings;

while(<>) {
    system($_);
}

exit 0; 
```

我知道 Perl 不是最容易阅读的语言（但它肯定是最快的编写语言），但这就是理解上述程序所需的全部内容：

`<>`从标准输入读取。

`system($_)`执行命令（其中`$_`是一个特殊的 Perl 变量，它在循环中工作并表示当前评估的项目，因此，在我们的例子中，是给定的命令）。

您可以尝试运行上述程序，将其保存在您的计算机上`foo.pl`，打开终端并执行`perl foo.pl`。

所以，这是基本的想法。我认为每种语言都实现了一个`system`相同的命令（名称可能会改变，但也可能相同）。您可以查看一下以`man system`了解此命令在`C`. 我不知道Java，但我很确定你必须搜索类似的东西。从这个起点，我想你可以开始搭建自己的终端了。

# perl - perl 表达式 && 和 eq

> ID：15408891
> 
> 赞同：0
> 
> 时间：2013-03-14T12:08:49.807
> 
> 标签：perl

我有一个 Perl 脚本，可以在其中添加预过滤器。

```
if ($row->{'category'}  eq 'Software') { return undef; } 
```

这按预期工作。

但如果我这样做

```
if ($row->{'category'}  eq 'Software' &&  $row->{'title'} =~ m/EDU|OLP|Molp|MOLP|Media/) { return undef; } 
```

我无法让它工作。我没有收到任何错误。

我花了最后一个小时在线寻找解决方案，但似乎找不到。

我也试过`and`代替`&&`.

这是的`Data::Dumper`输出`$row`

```
$VAR1 = {
      'manufacturer_model' => 'FQC-02310           ',
      'junk' => '42.03',
      'manufacturer' => 'Microsoft                     ',
      'model' => 'MSWIN81     ',
      'price' => '28.02',
      'title' => 'Win Pro SA EDU NL                       ',
      'category' => 'Software            ',
      'stock' => '251'
    }; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T12:41:18.163

问题在这里：

```
$row->{'category'}  eq 'Software' 
```

因为 $row->{'category'} 实际上是

```
'Software            ' 
```

考虑到这一点，这应该有效：

```
$row->{'category'} =~ /^Software\s*$/ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T12:41:57.770

问题是您的哈希字段在文本值之后有尾随空格。如果您正在正确构建哈希，例如使用`Text::CSV`，那么您必须处理您收集的数据使用

```
s/\s+\z// for values %$row 
```

在审问它之前。但是，如果虚假空白是 CSV 数据解码错误的结果，那么您应该改正它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T12:13:25.020

```
$row->{'category'} = 'Software';
$row->{'title'} = 'Blank Media';
if (
    $row->{'category'}  eq 'Software'
    &&  $row->{'title'} =~ m/EDU|OLP|Molp|MOLP|Media/
) { print "OK!\n"; } 
```

打印“OK！” 在我看来，您的数据不是您预期的那样（您在 中遇到问题`$row->{'title'}`）。检查您的源数据，检查您的解析器。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-14T12:13:06.923

如果您提供了您期望匹配和不匹配的样本数据，那将有所帮助。

*编辑*
根据示例数据，我会将您的正则表达式更改为：

```
$row->{'title'} =~ /(EDU|OLP|Molp|MOLP|Media)/i 
```

# java - 通过 APACHE TOMCAT 托管在 Windows 中的 JSP 从其他机器运行托管在 Linux VM 中的 jsp 页面

> ID：15408894
> 
> 赞同：0
> 
> 时间：2013-03-14T12:08:52.680
> 
> 标签：java, linux, jsp, tomcat, virtual-machine

嗨，我在 Windows 7 的 Apache Tomcat 7 服务器中托管了一个 jsp 页面。

我的电脑已连接到网络。最初，该页面并未从网络中的其他计算机访问。后来我将端口 8080 添加到它工作的防火墙入站规则中。

真正的问题是，我有一个安装了 Linux 并且运行 TOmcat 的 VM。我在其中托管了一个页面。打个招呼.jsp。当我从本地机器访问它时`http://192.168.202.135:8080/hello.jsp`，（其中“192.168.202.135”是我的虚拟机的IP）它是可访问的。

我在 jsp 页面中写了一段代码，说 win.jsp 托管在我的 Windows 7 中。

```
<html>
<head>
<title>JSP  Page.</title>
</head>
<body>

<a href="http://192.168.202.135:8080/hello.jsp">Run jsp in linux</a>

</body>
</html> 
```

当我单击链接`Run jsp in linux`时，它正在工作。但是当我从其他机器单击该链接时，它不是。为什么会这样？？我已经将它托管在我的机器上。当其他机器上的用户单击它时应该访问该页面吗？

任何帮助，将不胜感激。

编辑：虚拟机中托管的页面只能由主机访问。我编写的代码只会链接到 VM 中的页面。但它应该来自主机。怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:15:15.987

如果那是您的虚拟机 IP 地址，则其他用户不一定可以访问它。这取决于您如何定义主机/虚拟机网络。

# java - 将 GWT 标准主题资源合并到客户端包中？

> ID：15408895
> 
> 赞同：1
> 
> 时间：2013-03-14T12:08:55.243
> 
> 标签：java, css, gwt

是否可以将 GWT 标准主题资源合并到我自己的客户端包中？特别是：样式表和图像？

现在，所有标准主题图像和 standard.css 文件都作为 gwt/ 子目录中的单个文件提供。嗯，这并不完全是捆绑的东西。

# python - QTable Widget Column 0（零）未更新

> ID：15408897
> 
> 赞同：0
> 
> 时间：2013-03-14T12:08:56.510
> 
> 标签：python, pyqt4, qtablewidget

嗨，我在窗口中有一个 QTable 小部件。

列数据将务实地更新。

目前一切正常，但索引 0 列未在数据更新时刷新（如果我单击表格小部件或重新调整窗口大小）。但其他列的反应很好。

我在[PastBin](http://pastebin.com/F1WCaDSB)上发布了一个示例代码片段。

在此代码段中，当我们单击按钮（A、B、C、D）时，它们将更新相应列中第 1 行（复杂镜头）中的计数。

就像我们按下按钮 A 一样。它将增加单元格 (0,0) 中的计数并更新单元格 (0,4) 中的总计

就像我们按下按钮 B 一样。它将增加单元格 (0,1) 中的计数并更新单元格 (0,4) 中的总计

就像我们按下按钮 C 一样。它将增加单元格 (0,2) 中的计数并更新单元格 (0,4) 中的总计

就像我们按下按钮 D 一样。它将增加单元格 (0,3) 中的计数并更新单元格 (0,4) 中的总计

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T05:17:16.973

我们可以通过减小列标题的大小来解决这个问题。完全不知道它是否是 pyqt 错误的原因。但是这样做已经解决了我们的问题。

# php - 如何在 extbase 模型中重置具有 1:1 关系的属性

> ID：15408900
> 
> 赞同：1
> 
> 时间：2013-03-14T12:09:01.470
> 
> 标签：php, typo3, extbase

我对 extbase 中具有 1:1 关系的模型有疑问。我的模型“Beast”有一个链接到另一个模型“MissingBeast”，这是通过 1:1 关系实现的。我可以成功地将 MissingBeast 对象添加到 Beast 对象中。但我不知道如何重置它。

下面的代码展示了 Model Beast 中的属性定义

```
/**
 * missingBeast
 *
 * @var Tx_Hobeast_Domain_Model_MissingBeast
 * @lazy 
 */
 protected $missingBeast;

/**
 * Returns the missingBeast
 *
 * @return Tx_Hobeast_Domain_Model_MissingBeast $missingBeast
 */
public function getMissingBeast() {
    return $this->missingBeast;
}

/**
 * Sets the missingBeast
 *
 * @param Tx_Hobeast_Domain_Model_MissingBeast $missingBeast
 * @return void
 */
public function setMissingBeast(Tx_Hobeast_Domain_Model_MissingBeast $missingBeast) {
    $this->missingBeast = $missingBeast;
} 
```

Model Beast 数据库表中missingBeast 的值就是missingBeast 的id。默认情况下为 0。

我可以在设置 MissingBeast 后将此 id 重置为 0 吗？我试图像这样删除丢失的野兽：

```
 $missingBeast = $this->service->missingBeastRepository->findByBeast($beast);
   $this->service->missingBeastRepository->remove($missingBeast); 
```

但是当我这样做时，以下查询会陷入无限循环。

```
$query = $this->createQuery();
return $query->matching($query->equals("uid", $beast->getMissingBeast()))->execute()->count(); 
```

我正在使用 Typo 版本 4.7.8

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T18:08:10.840

只需将其设置为 NULL，这将删除关系并且不要忘记更新存储库中的模型。

```
$beast = $this->beastRepository->findByUid(345)->setMissingBeast(NULL);
$this->beastRepository->update($beast); 
```

为了能够将属性设置为 NULL，您必须通过将属性默认设置为 NULL 来调整模型，并删除 setter 中的类型提示：

```
/**
 * missingBeast
 *
 * @var Tx_Hobeast_Domain_Model_MissingBeast
 * @lazy 
 */
 protected $missingBeast = NULL;

/**
 * Sets the missingBeast
 *
 * @param Tx_Hobeast_Domain_Model_MissingBeast $missingBeast
 * @return void
 */
public function setMissingBeast($missingBeast) {
    $this->missingBeast = $missingBeast;
} 
```

# php - 将变量从 HTML 传递到 PHP

> ID：15408901
> 
> 赞同：0
> 
> 时间：2013-03-14T12:09:02.300
> 
> 标签：php, html

我制作了一个包含数据库字段的表格，包括一个复选框。（每个表行 1 个 DB 条目）。如果我选择一些条目（通过单击复选框），我想删除这些条目。

我必须将表中的那些 db-key 条目值传递给 PHP。所以我可以用正确的 db-key 删除那个 DB-entry。

我怎样才能做到这一点 ？

我只想在我的 PHP 脚本中使用 HTML 表格条目。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:15:30.633

使用帖子。

```
<form name="deleteThisForm" method="POST"><!-- be sure to include the method="post" attribute-->
    <input name="ID" type="radio" value="1"/>
    <input name="submitDelete" type="submit"/>
</form> 
```

php

```
if(isset($_POST['submitDelete']){
    //mysqli connection etc
    $delete=$DBH->prepare("DELETE FROM this WHERE ID=?");
    $delete->bind_param('i',$_POST['ID']);
    $delete->execute();
    return'deleteled successfully.';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:34:27.673

您可以将表包装在`<form>`标签中，然后每行都有一个复选框，该复选框以该行的数据库标识符作为值。例如：

```
<td><input type="checkbox" name="ids[]" value="1" /></td> 
```

然后，有一个脚本接受`POST`请求并从您的数据库中删除具有传递 ID 的记录。

```
<?php

foreach ($_POST['ids'] as $id) {
    if (preg_match('/^([0-9]+)$/', $id)) {
        // logic to delete from the database
    }
} 
```

# python - Selenium 不适用于 Firefox 19.0.2

> ID：15408902
> 
> 赞同：1
> 
> 时间：2013-03-14T12:09:03.067
> 
> 标签：python, firefox, selenium, webdriver

升级 firefox 19 后，我在 selenium web 驱动程序中遇到以下错误

```
WebDriverException: Message: "Can't load the profile. Profile Dir: 
```

除了降级firefox还有什么办法可以解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:31:41.393

我怀疑硒丢失了配置文件配置。

尝试重新加载一个全新的配置文件，看看这是否能解决您的问题：

```
profile = Selenium::WebDriver::Firefox::Profile.new
driver = Selenium::WebDriver.for :firefox, :profile => profile 
```

或者对于您已经在 Firefox 中创建的特定配置文件：

```
profile = Selenium::WebDriver::Firefox::Profile.from_name "Selenium"
driver = Selenium::WebDriver.for(:firefox, :profile => profile) 
```

# php - 后端控制器覆盖 joomla 2.5

> ID：15408903
> 
> 赞同：1
> 
> 时间：2013-03-14T12:09:05.520
> 
> 标签：php, joomla, joomla2.5

一个快速的问题：是否有可能覆盖 Joomla 2.5 中的一个后端控制器？假设我想覆盖 com_content 组件的后端文章控制器。

设想...

除了普通的文章属性外，我还想存储一些与每篇文章相对应的附加属性。这些属性将存储在另一个表中，因为我在文章和 new_attributes 之间有一对多的关系。为此，我通过编写自定义插件在文章属性的元数据组中添加了新字段。现在我希望将这些新添加的字段存储在一个单独的表中，当前文章 ID 与此 new_attribute 的每个条目相关联。

希望它足以定义场景。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:36:13.297

**Core Hack** 你当然可以做到。但是您会发现，每次更新 Joomla 后，您的更改都会被覆盖。

**覆盖** [http://extensions.joomla.org/extensions/style-a-design/templating/15611](http://extensions.joomla.org/extensions/style-a-design/templating/15611) << 此插件允许“覆盖”Joomla 核心。但是要小心，因为它是第 3 方！Joomla 本身还没有任何东西来支持这一点。[但请注意，这是2013 年谷歌代码之夏](http://docs.joomla.org/GSOC_2013_Project_Ideas#Project%3a_Add_plugin_.27mvc_override.27)工作的一个选择

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T12:42:11.723

你对你想做什么很模糊，所以我们的回答也会很笼统。首先，真正检查或解释您是否需要覆盖控制器（这很不寻常）。

如何在 com_content 中创建一个新控制器 - 视图？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T13:18:21.977

我最近不得不和这个作斗争。您可以编写一个简单的插件，正如[这里](http://www.informit.com/articles/article.aspx?p=1858258&seqNum=8)解释的那样（基本上`JLoader::register()`用于加载您的类）。

**但**正如文章所说：

> 这种技术可以用来覆盖大多数 Joomla 核心类，除了那些在系统插件导入之前已经加载的类。

如果您的课程仍未加载，我建议您访问我[在 github 上](https://github.com/joomla/joomla-cms/pull/860)的 pull request和

在第 150 行更改 library/loader.php

```
self::register(strtolower($class), $base . '/' . $path . '.php',false); 
```

然后，如果您发现这有帮助，请支持该 pullrequest，以便我的 hack 成为标准 Joomla，我们可以自由覆盖我们需要的内容

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T13:05:34.900

在互联网上进行了一些搜索后，我得到了以下文章：

[http://docs.joomla.org/How_to_override_the_component_mvc_from_the_Joomla!_core](http://docs.joomla.org/How_to_override_the_component_mvc_from_the_Joomla!_core)

这似乎可以解决问题...

# android-spinner - Android performClick() 在微调器上

> ID：15408916
> 
> 赞同：2
> 
> 时间：2013-03-14T12:09:45.017
> 
> 标签：android-spinner

当应用于微调器但仅在 android 4.0.1 及更高版本上时，我遇到了 performClick() 方法的问题。它在 2.3 版本上运行良好。

*   用于测试的设备
*   Nexus 7 平板电脑和三星 Ace 2。

在下面的代码中，我使用 setOnItemSelectedListener 而不是 setOnClickListener 但无论如何它适用于 2.3 版本。

非常感谢您的帮助。

```
spinner.setOnItemSelectedListener(new OnItemSelectedListener() {
  public void onItemSelected(AdapterView<?> parentView, View selectedItemView, int position, long id) {
    //do something
    }

  public void onNothingSelected(AdapterView<?> arg0) {
    }
  });
spinner.performClick(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T15:25:38.463

你可能不需要`performClick()`. 在您的活动课程中，尝试以下操作：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  … // other code
  setupSpinner();
}

private void setupSpinner();
  Spinner mySpinner = (Spinner) findViewById(R.id.spinner);
  ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this, R.array.spinner_array, android.R.layout.simple_spinner_item);
  adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        mySpinner.setAdapter(adapter);
        mySpinner.setOnItemSelectedListener(this);
}

@Override
public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
  //do your thing
}

@Override
public void onNothingSelected(AdapterView<?> parent) {
  //do your thing
} 
```

# r - 从R中的字符数组中删除一些行

> ID：15408918
> 
> 赞同：-1
> 
> 时间：2013-03-14T12:09:51.447
> 
> 标签：r, csv

我有一个包含一些 csv 数据和一些文本信息的文件。该文件包含以下数据：

```
name:russel date:21-2-1991
abc,2,saa
anan,3,ds
ama,ds,az
,,

name:rus date:23-3-1998
snans,32,asa
asa,2,saz 
```

因为它包含一些额外的文本信息，所以我无法使用 R 中的 read.csv() 方法读取该文件。所以我使用

```
text <- readLines("samplepf.csv")
lines <- scan(text = text, what = character()) 
```

现在我想从字符数组“行”中删除所有不需要的信息。我只想要 csv 格式的数据。我需要使用什么代码来快速检查所有数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:18:39.433

由于您的其他行没有`,`，我会做这样的事情：

```
tt <- readLines("my_file")
tt.con <- textConnection(tt[grepl(",", tt)])
my.dat <- read.table(tt.con, , sep=",")
close(tt.con)
> my.dat
#      V1 V2  V3
# 1   abc  2 saa
# 2  anan  3  ds
# 3   ama ds  az
# 4             
# 5 snans 32 asa
# 6   asa  2 saz 
```

# c++ - 如何在 ac 函数中创建一个新对象并传递对它的引用？

> ID：15408921
> 
> 赞同：2
> 
> 时间：2013-03-14T12:09:53.543
> 
> 标签：c++, c

**我的问题的本质是：**

在 ac 函数中创建新对象并将对该新对象的一些引用传递给调用者的最佳方法是什么？

**我的整体设置有点复杂，涉及混合的 c 和 c++ 代码，所以我包括一些背景信息：**

我正在为 3D 引擎创建一个 c++ 库。该库旨在用于不同平台上的主机应用程序。

出于简单的兼容性原因，我现在打算将所有 c++ 代码隐藏在纯 c 中的 API 后面。到目前为止，这工作得很好。

我唯一不确定的是，这是通过我的 c API实际*创建引擎实例的最佳方式。*

我的第一种方法是：

```
// in myEngineAPI.h
void myEngineCreate(void * myEngine);
void myEngineRelease(void * myEngine);

// in myEngineAPI.cpp
#include "myEngineAPI.h"
#include "myPrivateCppEngine.h"

void myEngineCreate(void * myEngine) {
    myEngine = new Engine;               // <- this doesn't seem to work as expected
}
void myEngineRelease(void * myEngine) {
    delete ((Engine *)myEngine);
}

// in my host application
#include "myEngineAPI.h"

void * myEngine = NULL;
myEngineCreate(myEngine);    // <- problem: myEngine is still NULL after this line.

// ...draw some fancy stuff...

myEngineRelease(myEngine); 
```

我希望这`myEngineCreate(void * myEngine)`会将我新创建的对象的地址分配给`myEngine`. 但是函数返回后，`myEngine`仍然指向NULL。为什么？

现在我的第二种方法是：

```
// in myEngineAPI.h
void * myEngineCreate();
void myEngineRelease(void * myEngine);

// in myEngineAPI.cpp
#include "myEngineAPI.h"
#include "myPrivateCppEngine.h"

void * myEngineCreate() {
    return new Engine;               // <- ok, the function returns a valid pointer
}
void myEngineRelease(void * myEngine) {
    delete ((Engine *)myEngine);
}

// in my host application
#include "myEngineAPI.h"

void * myEngine = myEngineCreate();  // <- yay, I have a void pointer to my engine

// ...draw some fancy stuff...

myEngineRelease(myEngine); 
```

这行得通。`myEngineCreate()`给我一个指向我的引擎实例的不透明指针，我可以在随后的绘图调用中使用它，也可以将它交给我的释放函数，当我完成它时清理内存。这种方法的问题是，我的分析器抱怨`myEngineCreate()`. 我知道在一个地方创建一个对象并在另一个地方拥有它是一件微妙的事情，我似乎在这里做错了什么 - 但是什么？

提前感谢您的任何建议或帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-14T12:19:28.937

让我们来看看你的`myEngineCreate`功能：

```
void myEngineCreate(void * myEngine) {
    myEngine = new Engine;
} 
```

这不起作用，因为`myEngine`它是函数范围内的局部变量`myEngineCreate`。要在 C 中“通过引用”传递指针，您必须将其作为指向指针的指针传递，并使用 derefernece 运算符分配给指针：

```
void myEngineCreate(void ** myEngine) {
    *reinterpret_cast<Engine**>(myEngine) = new Engine;
} 
```

`&`您可以使用指针的地址运算符来调用它：

```
void * myEngine;
myEngineCreate(&myEngine); 
```

* * *

作为后期的附录，另一种可能的解决方案是*返回*新指针：

```
void* myEngineCreate() {
    retur reinterpret_cast<void*>(new Engine);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T12:25:11.130

> 在 ac 函数中创建新对象并将对该新对象的一些引用传递给调用者的最佳方法是什么？

在 C 中，最好的、面向对象的方法是创建一个*不复杂类型*的对象，也称为不透明类型（void 指针*不是*不透明类型，它只是一个原始地址）。

例子：

// 引擎.h

```
typedef struct engine_t engine_t;

engine_t* engine_create (void); 
```

// 引擎.c

```
struct engine_t
{
  /* all variables placed here will have true private encapsulation */
};

engine_t* engine_create (void)
{
  return malloc(sizeof(engine_t));
} 
```

// main.c

```
int main()
{
  engine_t* my_engine = engine_create();
} 
```

这是 C 中真正的面向对象，在没有 C++ 语言支持的情况下可以实现的最佳 OO。调用者将无法访问该结构的任何成员。

> 但是函数返回后，myEngine 仍然指向 NULL。为什么？

因为指针本身在 C 和 C++ 中是按值传递的。您要么必须传递指针的地址，要么将指针返回给调用者。可以在 SO 上轻松找到有关此主题的多个问题和常见问题解答。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T12:22:10.643

我使用不透明指针做了类似的事情：

```
typedef struct my_c_engine *myCEngine;

extern "C" myCEngine createEngine() {
    return reinterpret_cast<myCEngine>(new myRealEngineClass());
}

extern "C" void releaseEngine(myCEngine c) {
    if(c) {
        myRealEngineClass *x = reinterpret_cast<myRealEngineClass*>(c);
        delete x;
    }
} 
```

我这样做是因为我希望 C 部分完全隔离。

# ios - Phonegap，ios文件阅读器不起作用

> ID：15408923
> 
> 赞同：1
> 
> 时间：2013-03-14T12:09:58.790
> 
> 标签：ios, html, cordova, filereader

```
var xml2;

function onLoad() {
    document.addEventListener("deviceready", onDeviceReady, false);
}

function onDeviceReady() {
    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotFS, fail);
}

function gotFS(fileSystem){
    fileSystem.root.getFile("ccw.xml", null, gotFile, fail);
}

function gotFileEntry(fileEntry) {
    fileEntry.file(gotFile, fail);
}

function gotFile(file) {
    readAsText(file);
}

function readAsText(file) {

    var reader = new FileReader();

    reader.readAsText(file);    

    reader.onload = function(){
    };

    xml2 = reader.result;

    writeJson();

}

function fail(evt) {
    console.log(evt.target.error.code);
}

function parseXml(xml) {

    var dom = null;

    if (window.DOMParser) {
        try {
            dom = (new DOMParser()).parseFromString(xml, "text/xml");
        }
        catch (e) { dom = null; }
    }
    else if (window.ActiveXObject) {
        try {
            dom = new ActiveXObject('Microsoft.XMLDOM');

            dom.async = false;

            if (!dom.loadXML(xml)) // parse error ..
          window.alert(dom.parseError.reason + dom.parseError.srcText);
        }
        catch (e) { dom = null; }
    }
    else
       alert("oops");

   return dom;
}

function writeJson(){

    var json;

    //    for(var i = 0 ; i < xml.length ; i++) {
    show("\n\n" + (json = xml2json(parseXml(xml2), "  ")) + "\n\n");
    //        console.log("====="+i+"/"+xml.lenght+"=====");
    //    }
}

function show(s) { 

    document.getElementById("out").innerHTML += (s+"\n").replace(/&/g, "&amp;").replace (/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g, "<br/>") + "<hr/>";
} 
```

此代码是 xml 到 json 解析代码。我遵循phonegap参考。但我的文件阅读器不会改变 stateReady。那总是状态 0。请帮帮我.. filereader.result 方法在 phonegap 中不起作用？我想回家。:-( .i 将永远看到这篇文章。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-14T05:33:54.117

好吧，您可能已经解决了它，但如果对其他人有用，您的回调没有正确链接，只需使用此行更改您的行

```
fileSystem.root.getFile("ccw.xml", null, gotFile, fail); 
```

和

```
fileSystem.root.getFile("ccw.xml", null, gotFileEntry, fail`); 
```

尝试一下，也有助于添加控制台日志消息，以便您更轻松地调试和了解发生的情况和顺序。

# tsql - 将结果保存到 txt 文件，而不在 sqlcmd 中进行任何其他格式设置

> ID：15408927
> 
> 赞同：0
> 
> 时间：2013-03-14T12:10:08.523
> 
> 标签：tsql, sqlcmd, osql

当我运行此命令时：
`sqlcmd -S server -U sa -P xxxxxxx -i d:clients.sql -o D:\clients.txt`
但在文件中我有 x 行受到影响，“1> 2> 3> 4> 5> 6> 7> 8>” 和许多其他空格
我不仅想要没有任何格式的结果。
在 sql 文件中我有一些选择。

预先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:40:52.937

您可以添加`SET NOCOUNT ON`到脚本以[删除`rows affected`消息](https://stackoverflow.com/questions/2014129/is-there-a-way-to-suppress-x-rows-affected-in-sqlcmd-from-the-command-line)，并添加[`-h-1`](http://msdn.microsoft.com/en-us/library/ms162773.aspx)到命令行以删除列名及其下方的行。这对我有用，只返回行数据：

```
sqlcmd -E -i query.sql -o tmp.txt -h-1 
```

哪里`query.sql`看起来像这样：

```
set nocount on;
select name from sys.objects; 
```

但我不知道这些`1> 2> 3> 4> 5> 6> 7> 8>`角色是从哪里来的。您可能想要发布给出该输出的 SQL 脚本的最小示例。

作为一般评论，我个人不喜欢使用 sqlcmd.exe 来运行查询，因为它很难控制输出。其他一些需要考虑的事情是：

*   如果需要分隔文件，请使用 bcp.exe
*   在 PowerShell、Perl 或您喜欢的任何语言中使用脚本
*   使用 SSIS 包
*   将脚本内容放入存储过程并执行它而不是使用输入文件

# django - 如何在一个模板中使用另一个 style.css？

> ID：15408928
> 
> 赞同：0
> 
> 时间：2013-03-14T12:10:10.090
> 
> 标签：django

如何在一个模板中使用另一个 style.css？

例如：

```
{% extends "base.html" %}
{% block content %}
<p>Here I need to use another css file (not the same like on base.html)</p>

{% endblock %} 
```

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T12:15:29.967

**base.html**

```
<html> 
<head>
    <title>{% block title %}{% endblock %}</title>
    {% block css %}{% endblock css %}
</head>
<body>
    {% block content %}{% endblock content %}
</body> 
</html> 
```

**其他模板**

```
{% extends "base.html" %}

{% block css %}
    {{block.super}}
    //css here
{% endblock css %}

{% block content %}
<p>Here I need to use another css file (not the same like on base.html)</p>

{% endblock content %} 
```

# python - 终止生成器表达式

> ID：15408933
> 
> 赞同：2
> 
> 时间：2013-03-14T12:10:19.260
> 
> 标签：python, generator

我有一个心理障碍，是否有一个通常的 python 1-liner 用于根据某些条件终止列表理解或基因？示例用法：

```
def primes():
  # yields forever e.g. 2, 3, 5, 7, 11, 13 ... 

[p for p in primes() if p < 10]
# will never terminate, and will go onto infinite loop consuming primes()

[p for p in primes() while p < 10]
# should return [2, 3, 5, 7], and consumed 5 items from my generator 
```

我知道`itertools`消费，`islice`但是那些家伙要求您提前知道要消费多少物品。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-14T12:12:13.273

您可以使用[`itertools.takewhile`](http://docs.python.org/2/library/itertools.html#itertools.takewhile)：

```
itertools.takewhile(lambda x: x < 10, primes()) 
```

或者……如果你想避免使用 lambda：

```
itertools.takewhile((10.).__gt__, primes()) 
```

# java - Xpath Xquery：无法添加 在 xml 中，而它存在于源 xml 文件中

> ID：15408941
> 
> 赞同：1
> 
> 时间：2013-03-14T12:10:37.000
> 
> 标签：java, spring, spring-mvc

我正在修改现有配置 XML 文件的一些节点。它包含`<!DOCTYPE>`行。

使用 Xquery 表达式更改 XML 文件后，生成的 XML 文件包含除 `<!DOCTYPE>`行之外的所有数据。

所以，我`<!DOCTYPE>`也想要生成的 XML 文件中的行。

我的源 XML 文件：带`<!DOCTYPE>`行

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE hibernate-configuration SYSTEM "http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
    <session-factory>
        <property name="c3p0.autoCommitOnClose">false</property>
        <property name="hibernate.transaction.factory_class">org.hibernate.transaction.JDBCTransactionFactory</property>
        <property name="dialect">org.hibernate.dialect.MySQLDialect</property> 
```

我生成的 XML 文件：没有`<!DOCTYPE>`行但我想要它

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?><hibernate-configuration>
    <session-factory>
        <property name="c3p0.autoCommitOnClose">false</property>
        <property name="hibernate.transaction.factory_class">org.hibernate.transaction.JDBCTransactionFactory</property>
        <property name="dialect">org.hibernate.dialect.MySQLDialect</property> 
```

我的阅读写作逻辑代码是：

```
DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();

        DocumentBuilder builder;
        Document doc = null;
        XPathExpression expr = null;
        Node attributeElement = null;
        try {

            builder = factory.newDocumentBuilder();
            // creating input stream
            doc = builder.parse(file);
            XPathFactory xpf = XPathFactory.newInstance();
            XPath xpath = xpf.newXPath();

            //expr = xpath.compile("/sitemesh/mapping/@decorator");
            expr = xpath.compile("/hibernate-configuration/session-factory/property/@name='connection.url'");
            attributeElement = (Node) expr.evaluate(doc, XPathConstants.NODE);
            System.out.println("value:"+attributeElement.getNodeValue());

            //attributeElement.setNodeValue("/WEB-INF/views/decorators/" + themeName);

        } catch (Exception e) {
            System.out.println("e:"+e);
        }

        // writing xml file
        TransformerFactory transformerFactory = TransformerFactory
                .newInstance();
        Transformer transformer;
        try {
            transformer = transformerFactory.newTransformer();
            DOMSource source = new DOMSource(doc);
            StreamResult result = new StreamResult(file);// creating output
                                                            // stream
            transformer.transform(source, result);
        } catch (Exception e) {
        } 
```

只需更改 XML 文件的某个节点后，生成的文件不包含任何`<!DOCTYPE>` 行

请帮助，如何`<!doctype>`在我生成的 xml 中添加行。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-30T07:31:46.800

我得到了答案。编辑后写入文件时...

```
transformer = transformerFactory.newTransformer();
            transformer.setOutputProperty(OutputKeys.DOCTYPE_SYSTEM,
                            "http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd");
            DOMSource source = new DOMSource(doc);
            StreamResult result = new StreamResult(file);// creating output
                                                            // stream
            transformer.transform(source, result); 
```

**只需 setOutPutProperty....** 到任何你想要的

谢谢你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-02T05:32:45.887

不要对 DOCTYPE 语句进行硬编码，而是使用字符串变量。它将帮助我们在代码中保持松散耦合。

```
String doctype="http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd";
transformer = transformerFactory.newTransformer();
transformer.setOutputProperty(OutputKeys.DOCTYPE_SYSTEM,doctype);
DOMSource source = new DOMSource(doc);
StreamResult result = new StreamResult(file);// creating output stream                                                    
transformer.transform(source, result); 
```

如果你想要很多这样的文档类型，你也可以在属性文件中维护它。这样以后如果有必要可以很容易地改变。

# java - 如何在 Java 7 中获取相对文件路径差异

> ID：15408943
> 
> 赞同：0
> 
> 时间：2013-03-14T12:10:42.573
> 
> 标签：java, path, nio, java-7

大家好，我在确定两条路径之间的差异时遇到了问题。

假设有两条路径`main.cache`和`another/system.cache`

我想获得这两个路径之间的文件夹差异。例如对于这两个文件，它将是`another/`.

我这样做是因为我有`another/system.cache`相对于`system.cache`文件的文件列表（每行）。例如

```
../images/a.jpg
../images/b.jpg
../images/c.jpg 
```

我需要获取相对于 main.cache 文件的路径，这样我就可以加入 `another/../images/a.jpg`（然后将其规范化为`images/a.jpg`）

我正在`java.nio`和 Pathes 一起玩，并试图解决它，`relativize`但`resolve`没有成功。例如，将其`relativize`视为`main.cache`文件夹并返回`../another/system.cache`这是无意义的。

有没有我错过的简单解决方案？谢谢

# jquery - jQuery Ui datepicker 仅构建容器

> ID：15408955
> 
> 赞同：2
> 
> 时间：2013-03-14T12:11:12.743
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

无法让我的日期选择器构建日历。它只是将容器 div 放在我的 dom 中。

这是代码：

```
<html>
    <head>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
        <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" />
        <script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>
        <script>
            $(function() {
                $('.hasDatepicker').datepicker();
            });
        </script>
    </head>
    <body>
        <form>
            <input type="text" class="hasDatepicker" />
        </form>
    </body>
</html> 
```

[我认为这与此处](http://api.jqueryui.com/datepicker/)的示例非常相似

我想我需要一些帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T12:21:48.383

正如我在评论中提到的那样，如果您使用 class ，它就不起作用`hasDatepicker`。

看到这个[jsFiddle](http://jsfiddle.net/Y2bt7/)。带类的输入`test`有效，但带类的输入`hasDatepicker`不起作用。

因此，相应地更改您的代码：

```
<script>
  $(function() {
    $('.dateInput').datepicker();
  });
</script> 
```

和html：

```
<input type="test" class="dateInput" /> 
```

来自日期选择器源

> /* 类名添加到元素以指示已经配置了日期选择器。*/ markerClassName: 'hasDatepicker',

# delphi - TADOQuery 准备

> ID：15408957
> 
> 赞同：6
> 
> 时间：2013-03-14T12:11:18.360
> 
> 标签：delphi, ado, delphi-6

TADOQuery 组件具有“准备”属性，手册说当准备设置为 TRUE 时，ADO 会“准备”命令，这是什么意思？

以下是手动解释：

> 在调用 Execute 方法之前设置 Prepared 以指定 ADO 是否准备命令。如果 Prepared 设置为 True 并且命令组件连接到数据存储，则 ADO 在执行命令之前准备命令。如果 Prepared 设置为 False，ADO 不会准备命令。

它将参数注入 SQL 文本？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T12:33:13.967

下面是 Delphi 2007 帮助文件中的一些更好的文档：

> 使用 Prepared 属性让提供程序在 Command 对象首次执行之前保存在 CommandText 属性中指定的查询的准备（或编译）版本。这可能会减慢命令的第一次执行，但是一旦提供者编译了命令，提供者将使用该命令的编译版本进行任何后续执行，这将提高性能。
> 
> 如果该属性为 False，则提供者将直接执行 Command 对象而不创建编译版本。
> 
> 如果提供程序不支持命令准备，则在此属性设置为 True 时可能会返回错误。如果提供程序没有返回错误，它会简单地忽略准备命令的请求并将 Prepared 属性设置为 False。

这基本上说 SQL 语句已编译（预解析、标记化和分析）。当查询被多次使用时，每次都可以使用这个编译版本，只需替换参数值，而无需重新编译所有语句并做其他工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T12:32:40.603

Tt 是为了减少与重复执行多次执行的 SQL 语句相关的解析和编译开销。
应用程序可以通过在每次执行时提供不同的参数集来多次执行参数化语句，而不是在参数集不同时重新构建语句。
[执行准备好的语句](http://msdn.microsoft.com/en-us/library/aa905910%28v=sql.80%29.aspx)

# ruby - 未初始化的常量 RUBY_ENGINE

> ID：15408959
> 
> 赞同：0
> 
> 时间：2013-03-14T12:11:20.920
> 
> 标签：ruby, rbenv

我刚刚将 Ruby 1.9.3-p374 安装到 rbenv 中，并且正在捆绑我正在开发的应用程序。但是，当捆绑包到达时，`binding_of_caller`我看到以下错误：

```
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby extconf.rb
extconf.rb:7: uninitialized constant RUBY_ENGINE (NameError) 
```

运行`echo $RUBY_ENGINE`给了我一个空白字符串。手动设置`RUBY_ENGINE`也`ruby`无济于事。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T12:37:41.780

`RUBY_ENGINE`并且`RUBY_VERSION`都是由 ruby​​ 为正在运行的 ruby​​ 程序定义的 constance。它们*不是*普通 shell 上可用的环境变量，这解释了为什么你的`echo`命令空手而归。

此外，正如堆栈跟踪摘录所证明的那样，您使用的**不是**Ruby 1.9.3，而是 Mac 上的默认 Ruby 1.8。与 Ruby 1.8 一样，`RUBY_ENGINE`不可用，您会看到观察到的错误。

而所有这一切的原因可能只是你没有切换 ti 实际上使用你的 rbenv 安装的 ruby​​。为此，您应该`rbenv global 1.9.3-p374`在您的 shell 上尝试类似的操作，并检查您当前的 ruby​​ 是否正确（通过检查 eg `ruby --version`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-11T10:58:55.467

只需检查它是否首先定义。像这样的东西

```
if defined?(RUBY_ENGINE) && RUBY_ENGINE == 'jruby' 
```

# tridion - Tridion - 将组件移动到另一个文件夹

> ID：15408960
> 
> 赞同：2
> 
> 时间：2013-03-14T12:11:23.900
> 
> 标签：tridion, tridion2009

我想将一个组件从一个文件夹移动到另一个已经创建的文件夹。

```
while (textReader.Read())
{
    textReader.MoveToElement();
    Component comp = tdse.GetComponent(textReader.GetAttribute("ID"), constant_Publication, true, -1);
} 
```

我尝试寻找，`comp.Move`但它没有退出。另外，我看到`comp.Info.Path`那里有路径，但是如果我尝试修改它，我会遇到以下错误：

> 错误 7 无法将属性或索引器“Tridion.ContentManager.Interop.TDS._Info.Path”分配给 - 它是只读的。

我可以做些什么来移动组件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T13:56:44.257

看起来您使用的是 TOM 而不是 TOM.NET

您需要对要将新项目放入的文件夹执行粘贴操作

就像是

```
objFolder.PasteItem(comp, 1, false) 
```

第一个参数是你要粘贴的项目，第二个是一个枚举器（EnumTDSCutCopyAction - 1 是剪切（移动），0 是复制）来表示是要*复制粘贴*还是*剪切粘贴*，最后一个是是否您想声明一个唯一的名称。

在 TOM.NET 中有一个`RepositoryLocalObject.Move()`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T12:28:36.667

您的 GetObject() 方法调用似乎缺少一些参数。模板手册指出以下内容：

```
Public Function GetObject( ByVal URI As String, ByVal mode As TDSDefines.EnumOpenMode, Optional ByVal contextPublication As Variant = TDSDefines.URINULL, Optional ByVal filter As TDSDefines.XMLReadFilter = XMLReadNull ) As Object 
```

但是，您传入的第二个参数似乎是发布 ID，而不是 EnumOpenMode。将“OpenModeEditWithFallback”作为函数的第二个参数传递给函数以使组件处于写入模式，之后您应该能够在其上使用 Move 函数。

此外，请考虑在我们的新 Tridion 端[http://tridion.stackexchange.com上发布更多 Tridion 问题](http://tridion.stackexchange.com)

# jquery - jQuery：单个 mouseenter/mouseleave 处理程序

> ID：15408967
> 
> 赞同：0
> 
> 时间：2013-03-14T12:11:40.310
> 
> 标签：jquery, mouseenter, mouseleave, event-delegation

我需要跟踪页面上所有元素的 mouseenter / mouseleave 事件。

直观地编写的代码是：

```
$(window).on('mouseenter mouseleave', function(e) {
  console.log(e.target, e.type);
  // ...
}); 
```

但是每次 mouseenter 发生在子元素上时它都会触发 mouseleave 事件，从而抵消了 mouseenter/mouseleave 的所有好处，即它的工作方式类似于 mouseover/mouseout。

有没有办法在不将处理程序直接附加到所有元素的情况下处理这个问题？

这看起来像一个 jQuery 错误吗？因为从我所知道的和我读过的 jQuery 文档看来，上面的代码应该可以正常工作。

JSBin 玩：http: [//jsbin.com/axuluc/2/](http://jsbin.com/axuluc/2/)

**编辑：**这按预期工作：http: [//jsbin.com/axuluc/9/](http://jsbin.com/axuluc/9/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:20:13.780

**好吧，所有**定义中都包含子元素，不是吗？

如果可能的话，给所需的元素一个类，`class="mouse_active"` 或者使用适当的选择器。

然后...

```
$(window).on('mouseenter mouseleave','.mouse_active', function(e) {
  console.log(e.target, e.type);
  // ...
}); 
```

你仍然附加一个处理程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:44:10.843

这是正确的方法：

```
$(window).hover(
   function(){
      // mouse enter function...
   },
   function(){
      // mouse leave function...
   }
); 
```

[http://api.jquery.com/hover/](http://api.jquery.com/hover/)

# windows-phone-7 - 在 Windows Phone 设备上开发应用程序？

> ID：15408968
> 
> 赞同：0
> 
> 时间：2013-03-14T12:11:41.847
> 
> 标签：windows-phone-7, licensing, app-hub

我正在为 windows phone 平台开发一个应用程序。

我以前从未为这个平台开发过，所以我不熟悉为了能够在设备上开发而需要遵循的过程。

假设我的电子邮件地址应该在我公司的开发许可证中注册。

[我用我的邮件在Windows Phone 开发中心](https://dev.windowsphone.com/en-us)注册为开发人员，我下载了 Zune，我在那里注册了一个帐户，我的手机在 Zune 上被识别。

现在我正在尝试使用 windows phone 开发人员注册工具注册手机，但我收到了错误：`device not registered with marketplace. please return to the app hub for more information`

还有什么我应该做的吗？我是一名 iOS 开发人员，在我的开发人员帐户页面中有一个部分，我可以在其中查看我可以参与哪些开发计划，查看我的配置文件等。

windows平台的这个部分在哪里？

我唯一看到的是`Join now`它要求我创建帐户类型的部分`Company`or `Student/Individual`。但是这些选项是我自己获得开发许可证。

我不应该已经拥有与此电子邮件地址相关联的许可证吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:24:52.460

是的。您还必须在设备中设置 Microsoft 帐户。

换句话说，在设备中转到设置->选择“电子邮件+帐户”->添加帐户->选择“Microsoft帐户”

然后输入您的电子邮件 ID 和其他详细信息

要检查此过程是否成功，请从 Marketplace 下载任何免费应用程序。

还有一件事，“我用我的邮件在 Windows Phone 开发中心注册为开发人员”是什么意思？你付了 99 美元吗？

转到此链接[Dev dashboard](https://dev.windowsphone.com/en-us/dashboard)，如果您看到现在加入 .. 您还没有获得许可证。

# virtual-machine - 删除 .vagrant 文件后如何销毁虚拟机？

> ID：15408969
> 
> 赞同：62
> 
> 时间：2013-03-14T12:11:41.940
> 
> 标签：virtual-machine, vagrant

我删除了包含 .vagrant 文件的目录。当我启动一个新虚拟机时，它抱怨端口正在使用中。那么如何在没有 .vagrant 文件的情况下销毁 VM？

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2013-03-14T13:08:48.880

> 以下 VirtualBox 命令可能会有所帮助。如果 poweroff 不起作用，请尝试 unregistervm。

```
$ VBoxManage list runningvms
$ VBoxManage controlvm <uuid> poweroff
$ VBoxManage unregistervm <uuid> 
```

资料来源： https: [//support.cloud.engineyard.com/entries/21449637-I-deleted-Vagrantfile-vagrant-and-or-the-app-directory-before-halting-the-VM-Now-ey-local-向上错误-](https://support.cloud.engineyard.com/entries/21449637-I-deleted-Vagrantfile-vagrant-and-or-the-app-directory-before-halting-the-VM-Now-ey-local-up-errors-)

用于停止所有正在运行的虚拟机的 Shell 脚本：

```
VBoxManage list runningvms | awk '{print $2;}' | xargs -I vmid VBoxManage controlvm vmid poweroff 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-04-01T16:47:36.420

最简单的做法是启动 VirtualBox 的 GUI 客户端并删除（可能在关闭后）虚拟机。您只需右键单击虚拟机并执行这些操作。

![在此处输入图像描述](../Images/cf236648f3854630018e81c0221118f7.png)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-06-14T09:07:20.400

以下 bash 函数将关闭并销毁与当前用户的所有 VM 相关的所有文件：

```
function killvms() {
  VBoxManage list runningvms | awk '{print $2;}' | xargs -I vmid VBoxManage controlvm vmid poweroff
  VBoxManage list vms | awk '{print $2;}' | xargs -I vmid VBoxManage unregistervm --delete vmid
} 
```

将它添加到你的`~/.bash_aliases`并通过在你的 shell 中调用它`killvms`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-15T18:17:06.897

如果您使用 GUI 删除了 VM，但仍然出现错误，您可以尝试从“%userprofile%\VirtualBox VMs”中删除命名的 VM。这对我有用

# python - sqlite3 查询一直无法插入

> ID：15408970
> 
> 赞同：0
> 
> 时间：2013-03-14T12:11:43.140
> 
> 标签：python, database, sqlite

我正在尝试获取从 cpu 使用中生成的变量，但由于某种原因，无论我尝试什么，终端都会在之后返回语法错误，`getCpuLoad))`而且 sqlite3 查询也不会影响相关的表或数据库。

```
def main():
      while True:
        print"CPU usage=%.2f%%" % (getCpuLoad()*100)
        cursor.execute("INSERT INTO mytable (Date, Cpu) VALUES (?,?)", (today, getCpuLoad))
        time.sleep(INTERVAL)  
      conn.commit()
      conn.close() 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:13:59.803

您正在尝试插入*函数*，而不是结果。再次调用该函数：

```
cursor.execute("INSERT INTO mytable (Date, Cpu) VALUES (?,?)", (today, getCpuLoad())) 
```

if`today`也是一个函数，当然你也需要调用它。

# c# - SQL Server HASHBYTES SHA2_512 和 C#

> ID：15408971
> 
> 赞同：5
> 
> 时间：2013-03-14T12:11:43.667
> 
> 标签：c#, sql-server, encryption, sqlclr

如果我在 SQL Server 中运行以下命令：

```
SELECT HASHBYTES('SHA2_512', 'THE CAT SAT ON THE MAT') 
```

然后在 C# 中运行它

```
string test = WordFunctions.SHA512("THE CAT SAT ON THE MAT"); 
```

我得到了相同的价值，这很棒。但是，如果我在 C# 代码中传递一个字符串变量，则如下所示：

```
string words = "THE CAT SAT ON THE MAT"

byte[] test
test = WordFunctions.SHA512(words); 
```

那么我没有得到相同的价值？！

有任何想法吗？

SHA512 函数如下所示：

```
public static byte[] SHA512(String plaintext)
{
   // convert the passPhrase string into a byte array
   ASCIIEncoding AE = new ASCIIEncoding();
   byte[] passBuff = AE.GetBytes(plaintext);

   SHA512Managed hashVal = new SHA512Managed();
   byte[] passHash = hashVal.ComputeHash(passBuff);

   return passHash;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-05-29T06:26:41.823

以下代码对我有用：

```
private static readonly Encoding Encoding1252 = Encoding.GetEncoding(1252);

public static byte[] SHA1HashValue(string s)
{
    byte[] bytes = Encoding1252.GetBytes(s);

    var sha1 = SHA512.Create();
    byte[] hashBytes = sha1.ComputeHash(bytes);

    return hashBytes;
} 
```

# json - 特征读取中的重写方法读取。

> ID：15408975
> 
> 赞同：4
> 
> 时间：2013-03-14T12:11:49.863
> 
> 标签：json, scala

我正在实现这个 User.scala 类

```
class User(var id : Long , var name : String) {

 def createUser() = {}

 def setName(nome : String) : String = {
    this.name = nome
    return name
 }

 def getName() : String = {
    return name
 }
}

object User {

implicit object userFormat extends Format[User] {

  override def reads(json: JsValue): User = new 
  User(

      (json \ "id").as[Long],

      (json \ "name").as[String]

  )

   override def writes(s: User): JsValue = JsObject(Seq(
        "id" -> JsString(s.id.toString),
        "name" -> JsString(s.name)
    ))   
  }
} 
```

但是在读取方法时出现此错误：覆盖方法读取类型的特征读取 (json:play.api.libs.json.JsValue)play.api.libs.json.JsResult[models.User];
方法读取具有不兼容的类型

我不想使用案例类（或者问题会得到解决），有人可以给我一个提示吗？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-14T13:42:58.173

您应该将“用户”对象包装在 JsResult 中，在本例中[为 JsSuccess](https://github.com/playframework/Play20/blob/2.1-RC3/framework/src/play/src/main/scala/play/api/libs/json/JsResult.scala#L6)

```
JsSuccess(new User(...)) 
```

# javascript - 使用 javascript 流输出

> ID：15408984
> 
> 赞同：0
> 
> 时间：2013-03-14T12:12:17.597
> 
> 标签：javascript, jquery, stream, binary-data

我有一个页面需要根据输入的参数提供一些文件以供下载。二进制文件是在 web 服务上生成的，我使用以下方式生成它并提供给用户。

`document.location.href = MyServiceUrl?req=someAction`

这很好用，但是当 web 服务请求时，它还会在 DB 中生成一些更新（除了文件生成）。进行更新时，我需要在我的页面上刷新数据（我使用 ajax）。问题是：我怎样才能捕捉到 web 服务完成工作的时刻（数据库中已经发生了更改）并给我一个文件让我知道是时候刷新了？

# sql-server - 在 SQL Server 中转义单引号

> ID：15408986
> 
> 赞同：20
> 
> 时间：2013-03-14T12:12:26.610
> 
> 标签：sql-server

我试图执行以下语句来转义单引号（即使用两个单引号）：

```
declare @year varchar(max)
set @year = '111,11';
exec ('SELECT * FROM SplitValues(' + @year + ','','')'); 
```

我什至尝试使用`char(39)`而不是引号：

```
declare @year varchar(max)
set @year = '111,11';
exec ('SELECT * FROM SplitValues(' + @year + ',' + char(39) + ',' + char(39) + ')'); 
```

但这没有帮助。这是我在这个网站上找到的仅有的两个解决方案。有什么帮助吗？

这是清除所有问题的简化查询：

```
declare @year varchar(max)
set @year = '111,11';
SELECT * FROM SplitValues(@year , ',') 
```

我想实现这一点，但使用动态查询。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-15T21:23:47.013

一句忠告。测试动态脚本时，首先只显示它而不是执行它。这样，您将能够完全按照`EXEC`语句看到的那样看到它。

现在到了这个问题。您应该记住，您不是将*变量*传递给`SplitValues`而是将变量的值连接到脚本中。由于值为`varchar`，因此应该用引号将其连接起来。他们的缺席确实是唯一的问题。

第二个参数逗号周围的引号*在这两种情况下*都被正确转义。因此，只需使用其中一种方法在第一个参数周围添加引号：

*   重复引号：

    ```
    DECLARE @year varchar(max), @sql varchar(max);
    SET @year = '111,11';
    SET @sql = 'SELECT * FROM SplitValues(''' + @year + ''','','')';
    SELECT @sql; 
    ```

*   使用`CHAR(39)`：

    ```
    DECLARE @year varchar(max), @sql varchar(max);
    SET @year = '111,11';
    SET @sql = 'SELECT * FROM SplitValues(' + CHAR(39) + @year + CHAR(39) + ',' + CHAR(39) + ',' + CHAR(39) + ')';
    SELECT @sql; 
    ```

显然，第一种方法更紧凑，但是，就像我说的，两者都运行良好，正如[这个 SQL Fiddle 演示](http://sqlfiddle.com/#!3/d41d8/11135)清楚地显示的那样。

但是请注意，如果您原谅双关语，您首先可以轻松地逃避这个问题。而不是`EXEC ()`，你可以使用`EXEC sp_executesql`，它允许你使用*参数*。这是重写使用的相同脚本`sp_executesql`：

```
DECLARE @year varchar(max), @delim char(1);
SET @year = '111,11';
SET @delim = ',';
EXEC sp_executesql
  N'SELECT * FROM SplitValues(@year_param,@delim_param)',
  N'@year_param varchar(max), @delim_param char(1)',
  @year,@delim; 
```

如您所见，无需担心转义引号：SQL Server 会费心正确地替换值，而不是您。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-14T12:16:21.203

只需输入两次单引号：

```
select 'that''s it' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-14T21:42:32.133

好的......你想要这个字符串：

```
SELECT * FROM SplitValues(@year , ',') 
```

并使其成为这样的字符串：

```
'SELECT * FROM SplitValues('111,11' , '','')' 
```

因此，您的最终代码将是：

```
declare @year varchar(max), @sql varchar(max)
set @year = '111,11';
set @sql = 'SELECT * FROM SplitValues(''' + @year + ''' , '''','''')'

select @sql 
```

实际上，finally 选择你会使用`exec()`。但是你真的应该使用`sp_sqlexecute`这样的东西，因为你可以使用参数化查询。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-12-10T10:04:25.710

```
declare @var1 varchar(100)
declare @var3 varchar(100)
declare @var4 varchar(100)

declare @var2 nvarchar(MAX)
set @var1 = ‘anil’
set @var4 = ‘1019518594’

set @var2 = N’select
a.*
from card b
join log a on a.Cust = b.ID
where a.c = ”’ + @var1 + ”’ and b.s =”’+ @var4 +””

print(@var2)

exec sp_executesql @var2 
```

# c - MD5 将 uint8_t 转换为字符串

> ID：15408987
> 
> 赞同：1
> 
> 时间：2013-03-14T12:12:36.123
> 
> 标签：c, md5

我在维基百科上使用 Md5 C 代码

```
int main(int argc, char **argv) {

if (argc < 2) {
    printf("usage: %s 'string'\n", argv[0]);
    return 1;
}

char *msg = argv[1];
size_t len = strlen(msg);

// benchmark
int i;
for (i = 0; i < 1000000; i++) {
    md5(msg, len);
}

//var char digest[16] := h0 append h1 append h2 append h3 //(Output is in little-endian)
uint8_t *p;

// display result

p=(uint8_t *)&h0;
printf("%2.2x%2.2x%2.2x%2.2x", p[0], p[1], p[2], p[3], h0);

p=(uint8_t *)&h1;
printf("%2.2x%2.2x%2.2x%2.2x", p[0], p[1], p[2], p[3], h1);

p=(uint8_t *)&h2;
printf("%2.2x%2.2x%2.2x%2.2x", p[0], p[1], p[2], p[3], h2);

p=(uint8_t *)&h3;
printf("%2.2x%2.2x%2.2x%2.2x", p[0], p[1], p[2], p[3], h3);
puts("");

return 0; 
```

}

那就是代码。我已经了解了它的工作原理，我需要将 MD5 的结果转换为字符串。这可能吗？

基本上我需要转换 p=(uint8_t *)&h0; 它们中的每一个都连接到一个 char[] 并将它们连接起来，换句话说，将整个 MD5 代码放在一个 char[] 中。这是正确的/可能的吗？

昨天我花了一整天的时间来找到这个，我得到的最好的结果是如何使用 sprintft 转换 unit32_t，它确实有效。但对于 unit8_t 它没有。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T12:19:26.557

每个 8 位数字应以`%02x`.

*   前导`0`表示数字将以前导零显示
*   这`2`意味着宽度是两个十六进制字符
*   表示以`x`十六进制打印数字。

所以第一个例子是：

```
p = (uint8_t *) &h0;
printf("%02x%02x%02x%02x", p[0], p[1], p[2], p[3]); 
```

# php - 将会话数组存储到变量中

> ID：15408990
> 
> 赞同：0
> 
> 时间：2013-03-14T12:12:46.957
> 
> 标签：php, mysql, session, multidimensional-array, session-variables

我有一个`$_SESSION['cart_array']`存储购物车数据的会话，一旦 var_dumped 看起来像

```
array(2) {
  [0]=>array(3){
     ["item_id"]=>string(1) "6"
     ["quantity"]=>int(1)
     ["price"]=>string(5) "10.99"
   }
  [1]=>array(3) {
    ["item_id"]=>string(1) "7"
    ["quantity"]=>int(1)
    ["price"]=>string(4) "1.99"
   }
} 
```

我想我需要将每一列存储在一个变量中，以便能够将其解析为我的函数，然后是 Mysql 查询。这是怎么做到的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T12:20:48.427

`$_SESSION`是一个数组。运行一个[foreach()](http://php.net/manual/en/control-structures.foreach.php)循环。

```
echo $_SESSION['cart_array']['0']['item_id']; 
```

编辑：

```
$product_id = $_SESSION['cart_array']['0']['item_id'];
$query2 = mysql_query("INSERT INTO transactionDetails (Order_ID, Product_ID, Price, Quantity) VALUES('{$orderId}', '{$product_id}', '{}', '{}')"); 
```

# java - 需要优化帮助——在java中生成魔方

> ID：15408996
> 
> 赞同：1
> 
> 时间：2013-03-14T12:13:17.793
> 
> 标签：java, memory, optimization, recursion, magic-square

我必须实现一种算法，为给定的边长（n=3,4）创建所有可能的幻方。对于 n=3，算法运行良好。但是对于 n=4，算法没有得到任何结果，因为它不是最优的（太慢了）。我试图优化算法，但它仍然无法正常工作。任何帮助是极大的赞赏。

```
public class MagicSquare {

private int[][] square;
private boolean[] possible;
private int totalSqs;
private int sum;
private static int numsquares;

public MagicSquare(int n){
    square = new int[n][n];
    for(int i=0; i<n; i++){
        for(int j=0; j<n; j++){
            square[i][j] = 0;
        }
    }

    totalSqs = n*n;
    possible = new boolean[totalSqs];
    for(int i=0; i<totalSqs; i++)
        possible[i] = true;

    sum = n*(n*n+1)/2;
    numsquares = 0;
    fill(0, 0);
}

public void fill(int row, int col){
    for(int i=0; i<totalSqs; i++){
        if(possible[i]){
            square[row][col] = i+1;
            possible[i] = false;

            int newcol = col+1;
            int newrow = row;
            if(newcol == square.length){
                newrow++;
                newcol = 0;
            }

            fill(newrow,newcol);
            square[row][col] = 0;
            possible[i] = true;
        }
    }

    if(!checkRows() || !checkCols())
        return;

    if(row == square.length){
        for(int i=0; i<square.length; i++ ){
            for(int j=0; j<square[i].length; j++){
                System.out.print(square[i][j]+" ");
            }
            System.out.println();
        }
        System.out.println();
        numsquares++;
        return;
    }
}

public boolean checkRows(){
    for(int i=0; i<square.length; i++){
        int test = 0;
        boolean unFilled = false;

        for(int j=0; j<square[i].length; j++){
            test += square[i][j];
            if(square[i][j] == 0)
                unFilled = true;
        }

        if(!unFilled && test!=sum)
            return false;
    }
    return true;
}

public boolean checkCols(){
    for(int j=0; j<square.length; j++){
        int test = 0;
        boolean unFilled = false;

        for(int i=0; i<square[j].length; i++){
            test += square[i][j];
            if(square[i][j] == 0)
                unFilled = true;
        }

        if(!unFilled && test!=sum)
            return false;
    }
    return true;
}

public static void main(String[] args) {
    new MagicSquare(3);
    System.out.println(numsquares);
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-01T12:40:24.467

您可以引入其他数组来跟踪行、列和 2 条对角线上的总和。每当您在方格中放置一个新数字或从中删除一个数字时，您都需要更新这些总和。注意当你有一个奇数维度的情况下，中间的数字属于两个对角线，所以两个对角线和都需要更新。

你有4个案例：

1.  您有**一行几乎已满**（例如，维度为 3，例如，您在第一行中已经有 2 个数字。那么您不必猜测第三个数字，您可以通过减去第一个数字的总和来得到它来自幻数的行，这是给定的，它只取决于维度）
2.  （特定情况）您的**最后一行几乎已满**，**最后一列几乎已满**，第**一个对角线几乎已满**（第一列是从左上角元素开始并以右下角元素结束的列）。这基本上是幻方中的最后一个位置。
3.  你有一**列几乎满了**
4.  （特定情况）您的**第一列几乎已满**，因此您的**第二列也几乎已满**（第二列是从右上角元素开始并以左下角元素结束的列）
5.  (+1) 普通情况

在每种情况下，您都可以减少回溯，因为您不必猜测丢失的数字。这可以减少所需的时间。

此外，如果您在对角线上插入元素，并且仅在其他位置插入元素，这将为您赢得额外的时间，因为大多数错误发生在对角线上。如果你想要它真的非常快，可以考虑用 C/C++ 编写代码。

# .net - WCF - 通过不同的项目连接到 NHibernate

> ID：15408998
> 
> 赞同：0
> 
> 时间：2013-03-14T12:13:21.853
> 
> 标签：.net, wcf, nhibernate

我有一个有两个项目的解决方案。让我们假设项目 A 和 B。项目 A 是一个 ASP.Net Web 应用程序，它使用 NHibernate。项目 B 是 WCF 服务，我想通过项目 A 使用数据库及其已经编写的 NHibernate 服务。

我想知道这是否可能？如果要遵循和添加哪些步骤以使其正常工作？

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:26:54.250

如果可能的话，我建议研究将公共数据库功能重构到项目 C 中的可能性。项目 A 和项目 B 将依赖于项目 C（nHibernate/data 项目）。可能有一些配置需要复制。例如，您当前的 ASP .Net Web 应用程序可能有一些与 nHibernate 相关的设置，这些设置需要在您的 WCF 服务项目中复制。