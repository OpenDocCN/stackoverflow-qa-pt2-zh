# StackOverflow 问答 13912000-13912999

# ios - 是否可以使 dispatch_queue_t 为空？

> ID：13912001
> 
> 赞同：1
> 
> 时间：2012-12-17T10:06:42.853
> 
> 标签：ios, objective-c, grand-central-dispatch

我找不到任何关于它的信息。我`dispatch_queue_t`在我的应用程序中有一个我要完成一些任务的地方。但是这些任务需要一些时间，而且有时它们不应该被调用，所以我想清理队列。可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T10:09:25.147

为这些功能使用 NSOperationQueue - 更方便。将操作添加到队列后，您可以取消它们，甚至可以在需要时取消所有挂起的操作。

这是一个很好的入门教程： [http ://www.raywenderlich.com/19788/how-to-use-nsoperations-and-nsoperationqueues](http://www.raywenderlich.com/19788/how-to-use-nsoperations-and-nsoperationqueues)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T08:27:36.110

不，您不能从 dispatch_queue_t 中删除项目。您有两个选择：

1.  你有没有工作项目在做他们的工作之前检查它们是否被取消了
2.  暂停队列；这不会删除项目，但会阻止它们运行

# android - searchManager.getSearchableInfo(getComponentName()) 返回 null

> ID：13912003
> 
> 赞同：14
> 
> 时间：2012-12-17T10:06:54.420
> 
> 标签：android, android-actionbar, android-menu, searchable, searchview

我已按照[此 Android 指南](http://developer.android.com/training/search/setup.html)向活动添加搜索栏。设置如下所示：

资源/菜单/activity_main.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

<item
    android:id="@+id/search"
    android:title="@string/menu_search"
    android:icon="@android:drawable/ic_menu_search"
    android:showAsAction="collapseActionView|ifRoom"
    android:actionViewClass="android.widget.SearchView" />
<item
    android:id="@+id/menu_settings"
    android:orderInCategory="100"
    android:showAsAction="never"
    android:title="@string/menu_settings"
    android:icon="@drawable/ic_menu_settings"/>

</menu> 
```

res/xml/searchable.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<searchable xmlns:android="http://schemas.android.com/apk/res/android"
    android:label="@string/app_name"
    android:hint="@string/search_hint" /> 
```

清单文件中的活动条目：

```
 <activity
        android:name="de.ivu.realtime.app.activity.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
        <meta-data
            android:name="android.app.searchable"
            android:resource="@xml/searchable" />
        <meta-data
            android:name="android.app.default_searchable"
            android:value="de.ivu.realtime.app.activity.MainActivity" />
    </activity> 
```

和 MainActivity 中的代码：

```
@SuppressLint("NewApi")
@Override
public boolean onCreateOptionsMenu(Menu menu)
{
    this.getMenuInflater().inflate(R.menu.activity_main, menu);

    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB)
    {
        SearchManager searchManager = (SearchManager) getSystemService(Context.SEARCH_SERVICE);
        SearchView searchView = (SearchView) menu.findItem(R.id.menu_search).getActionView();
        SearchableInfo searchableInfo = searchManager.getSearchableInfo(getComponentName());
        searchView.setSearchableInfo(searchableInfo);
    }

    return true; 
```

调用`searchManager.getSearchableInfo(getComponentName());`总是返回`null`。我在stackoverflow的其他问题中看到了这一点，但是，那里提出的解决方案似乎都不适用于我的案例。

*   菜单 XML 有一个`<?xml version="1.0" encoding="utf-8"?>`标题
*   可搜索的 XML 没有硬编码字符串
*   重命名菜单项不起作用
*   清洁和重建也无济于事

很感谢任何形式的帮助。谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-10T13:00:31.023

将其添加到您放置 SearchView 的活动中

```
<meta-data
    android:name="android.app.default_searchable"
    android:value=".activity_that_handles_the_search" />

<intent-filter>
    <action android:name="android.intent.action.SEARCH" />
</intent-filter> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T21:49:35.190

就我而言，问题是我在与 ActionBarSherlock 集成时的错误。在这种情况下`android:actionViewClass`应该`com.actionbarsherlock.widget.SearchView`代替`android.widget.SearchView`. 我知道这听起来很愚蠢，但我花了 20 分钟试图弄清楚为什么`searchView`在`null`我的代码中与您的代码相似。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-20T10:55:26.987

代替：

```
android:actionViewClass="android.widget.SearchView" 
```

和：

```
app:actionViewClass="android.widget.SearchView" 
```

因为`app`在使用支持库时经常使用。

# java - 从整数数组中删除重复项

> ID：13912004
> 
> 赞同：13
> 
> 时间：2012-12-17T10:06:55.800
> 
> 标签：java, arrays

我在编码时遇到问题：

编写一个名为的静态方法`removeDuplicates`，该方法将一个整数数组作为输入，并返回一个新的整数数组，其中删除了所有重复项。例如，如果输入数组具有元素 {4, 3, 3, 4, 5, 2, 4}，则结果数组应为 {4, 3, 5, 2}

这是我到目前为止所做的

```
public static int[] removeDuplicates(int []s){
    int [] k = new int[s.length];
    k[0]=s[0];
    int m =1;
    for(int i=1;i<s.length;++i){
        if(s[i]!=s[i-1]){
            k[m]=s[i];
            ++m;
        }//endIF
    }//endFori
    return k;
}//endMethod 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-28T07:38:04.237

要保留顺序并删除整数数组中的重复项，您可以尝试以下操作：

```
public void removeDupInIntArray(int[] ints){
    Set<Integer> setString = new LinkedHashSet<Integer>();
    for(int i=0;i<ints.length;i++){
        setString.add(ints[i]);
    }
    System.out.println(setString);
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-17T10:18:26.280

尝试这个 -

```
public static int[] removeDuplicates(int []s){
    int result[] = new int[s.length], j=0;
    for (int i : s) {
        if(!isExists(result, i))
            result[j++] = i;
    }
    return result;
}

private static boolean isExists(int[] array, int value){
    for (int i : array) {
        if(i==value)
            return true;
    }
    return false;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-02-01T19:45:17.617

首先，你应该知道没有重复的长度（重复）：初始长度减去重复的数量。然后创建具有正确长度的新数组。然后检查 list[] 的每个元素是否存在 dups，如果 dup 成立 - 检查下一个元素，如果 dup 未成立 - 将元素复制到新数组。

```
public static int[] eliminateDuplicates(int[] list) {
    int newLength = list.length;
    // find length w/o duplicates:
    for (int i = 1; i < list.length; i++) {
        for (int j = 0; j < i; j++) {
            if (list[i] == list[j]) {   // if duplicate founded then decrease length by 1
                newLength--;
                break;
            }
        }
    }

    int[] newArray = new int[newLength]; // create new array with new length
    newArray[0] = list[0];  // 1st element goes to new array
    int inx = 1;            // index for 2nd element of new array
    boolean isDuplicate;

    for (int i = 1; i < list.length; i++) {
        isDuplicate = false;
        for (int j = 0; j < i; j++) {
            if (list[i] == list[j]) {  // if duplicate founded then change boolean variable and break
                isDuplicate = true;
                break;
            }
        }
        if (!isDuplicate) {     // if it's not duplicate then put it to new array
            newArray[inx] = list[i];
            inx++;
        }
    }
    return newArray;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-28T17:32:26.110

也许你可以使用 lambdaj（[在这里下载](http://lambdaj.googlecode.com/files/lambdaj-2.4-with-dependencies.jar)，[网站](http://code.google.com/p/lambdaj/)），这个库对于管理集合（..list，arrays）非常强大，以下代码非常简单并且完美运行：

```
import static ch.lambdaj.Lambda.selectDistinct;
import java.util.Arrays;
import java.util.List;

public class DistinctList {
     public static void main(String[] args) {
         List<Integer> numbers =  Arrays.asList(1,3,4,2,1,5,6,8,8,3,4,5,13);
         System.out.println("List with duplicates: " + numbers);
         System.out.println("List without duplicates: " + selectDistinct(numbers));
     }
} 
```

这段代码显示：

```
List with duplicates: [1, 3, 4, 2, 1, 5, 6, 8, 8, 3, 4, 5, 13]
List without duplicates: [1, 2, 3, 4, 5, 6, 8, 13] 
```

在一行中，您可以获得一个不同的列表，这是一个简单的示例，但使用此库您可以解决更多问题。

```
selectDistinct(numbers) 
```

您必须将 lambdaj-2.4.jar 添加到您的项目中。我希望这会有用。

**注意：**这将帮助您假设您可以替代您的代码。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-11-19T07:00:27.593

```
public int[] removeRepetativeInteger(int[] list){
        if(list.length == 0){
            return null;
        }
        if(list.length == 1){
            return list;
        }

    ArrayList<Integer> numbers = new ArrayList<>();
    for(int i = 0; i< list.length; i++){
        if (!numbers.contains(list[i])){
            numbers.add(list[i]);
        }
    }
    Iterator<Integer> valueIterator = numbers.iterator();
    int[] resultArray = new int[numbers.size()]; 
    int i = 0;
    while (valueIterator.hasNext()) {
        resultArray[i] = valueIterator.next();
        i++;
    }
    return resultArray;     

} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-07-28T09:07:09.263

您可以使用不允许重复元素的 HashSet

```
public static void deleteDups(int a []) {

    HashSet<Integer> numbers = new HashSet<Integer>();

        for(int n : a)
        {
            numbers.add(n);
        }

        for(int k : numbers)
        {
            System.out.println(k);
        }
        System.out.println(numbers);
    }       

public static void main(String[] args) {
    int a[]={2,3,3,4,4,5,6};
            RemoveDuplicate.deleteDups(a);

}

}
o/p is 2
3
4
5
6 
```

[2、3、4、5、6]

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-17T10:47:42.667

您还可以使用 Google 的 Guava 库并使用[ImmutableSet](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/ImmutableSet.html)做

```
ImmutableSet.copyOf(myArray).asList(); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-12-17T10:11:03.990

您还可以将数组元素放入 a`Set`中，其语义恰好是它不包含重复元素。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-12-17T10:31:44.153

遍历数组并填充集合，因为集合不能包含重复项。然后将集合中的元素复制到一个新数组中并返回它。如下所示：

```
public static int[] removeDuplicates(int[] array) {
    // add the ints into a set
    Set<Integer> set = new HashSet<Integer>();
    for (int i = 0; i < array.length; i++) {
        set.add(array[i]);
    }

    // copy the elements from the set into an array
    int[] result = new int[set.size()];
    int i = 0;
    for (Integer u : set) {
        result[i++] = u;
    }
    return result;
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-04-17T18:44:20.357

这对我有用：

```
import java.util.Arrays;
import java.util.HashSet;

public class Util {

    public static int[] removeDups(final int[] intArrayWithDups) {
        final int[] intArrayDupsRemoved = new int[intArrayWithDups.length];

        final HashSet<Integer> alreadyAdded = new HashSet<>();
        int innerCounter = 0;
        for (int integer : intArrayWithDups) {
            if (!alreadyAdded.contains(integer)) {
                intArrayDupsRemoved[innerCounter] = integer;
                alreadyAdded.add(intArrayDupsRemoved[innerCounter]);
                innerCounter++;
            }
        }

        return Arrays.copyOf(intArrayDupsRemoved, innerCounter);
    }
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-04-22T13:47:03.130

这是一道面试题。问题：从原地数组中删除重复项：

```
public class Solution4 {
    public static void main(String[] args) {

           int[] a = {1,1,2,3,4,5,6,6,7,8};

          int countwithoutDuplicates =  lengthofarraywithoutDuplicates(a);
          for(int i = 0 ; i < countwithoutDuplicates ; i++) {
              System.out.println(a[i] + " ");
          }
    }

    private static int lengthofarraywithoutDuplicates(int[] a) {
        int countwithoutDuplicates = 1 ;
        for (int i = 1; i < a.length; i++) {
              if( a[i] != a[i-1]      ) {
                 a[countwithoutDuplicates++] = a[i]; 
              }//if
        }//for
        System.out.println("length of array withpout duplicates = >" + countwithoutDuplicates);
        return countwithoutDuplicates;

    }//lengthofarraywithoutDuplicates

} 
```

在 Python 中：

```
def lengthwithoutduplicates(nums):
    if not nums: return 0
    if len(nums) == 1:return 1
    # moving backwards from last element i.e.len(a) -1 to first element 0 and step is -1
    for i in range(len(nums)-1,0,-1):
      # delete the repeated element
        if nums[i] == nums[i-1]: del nums[i]
        # store the new length of the array without the duplicates in a variable
        # and return the variable
    l = len(a)      
    return l

a = [1, 1, 2, 3, 4, 5, 6, 6, 7, 8];

l = lengthwithoutduplicates(a)
for i in range(1,l):print(i) 
```

在 Python 中：使用枚举的列表理解

```
a = [1, 1, 2, 3, 4, 5, 6, 6, 7, 8]

aa = [ ch  for i, ch in enumerate(a) if ch not in a[:i] ]
print(aa) # output => [1, 2, 3, 4, 5, 6, 7, 8] 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2018-07-03T14:38:02.253

尝试这个。

```
 int numbers[] = {1,2,3,4,1,2,3,4,5,1,2,3,4};

 numbers =  java.util.stream.IntStream.of(numbers).distinct().toArray(); 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2021-10-13T14:33:45.037

我找到了这个问题的解决方案。使用 HashSet 是一种对整数数组进行过滤和排序的强大方法。它也非常快。

我写了这个简短的代码来展示这个功能的强大。从整数数组中，它创建两个列表。一个具有没有重复的有序整数，另一个仅显示重复项和它们在初始数组中的次数。

```
public class DuplicatesFromArray {

    public static void main(String args[]) {
        int[] withDuplicates = { 1, 2, 3, 1, 2, 3, 4, 5, 3, 6 };

        // complexity of this solution is O[n]

        duplicates(withDuplicates);

    }

//Complexity of this method is O(n)

    public static void duplicates(int[] input) {

        HashSet<Integer> nums = new HashSet<Integer>();

        List<Integer> results = new ArrayList<Integer>();
        List<Integer> orderedFiltered = new ArrayList<Integer>();

        for (int in : input) {

            if (nums.add(in) == false) {
                results.add(in);
            } else {
                orderedFiltered.add(in);
            }
        }
        out.println(
                "Ordered and filtered elements found in the array are : " + Arrays.toString(orderedFiltered.toArray()));
        out.println("Duplicate elements found in the array are : " + Arrays.toString(results.toArray()));
    }

    /**
     * Generic method to find duplicates in array. Complexity of this method is O(n)
     * because we are using HashSet data structure.
     * 
     * @param array
     * @return
     */
    public static <T extends Comparable<T>> void getDuplicates(T[] array) {
        Set<T> dupes = new HashSet<T>();
        for (T i : array) {
            if (!dupes.add(i)) {
                System.out.println("Duplicate element in array is : " + i);
            }
        }

    }

} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-04-18T19:32:15.447

```
public class DistinctNumbers{
    public static void main(String[] args){
        java.util.Scanner input = new java.util.Scanner(System.in);

        System.out.print("Enter ten numbers: ");
        int[] numbers = new int[10];
        for(int i = 0; i < numbers.length; ++i){
            numbers[i] = input.nextInt();
        }
        System.out.println("The distinct numbers are:");
        System.out.println(java.util.Arrays.toString(eliminateDuplicates(numbers)));
    }

    public static int[] eliminateDuplicates(int[] list){
        int[] distinctList = new int[list.length];
        boolean isDuplicate = false;
        int count = list.length-1;
        for(int i = list.length-1; i >= 0; --i){
            isDuplicate = false;
            for(int j = i-1; j >= 0 && !isDuplicate; --j){
                if(list[j] == list[i]){
                    isDuplicate = true;
                }
            }
            if(!isDuplicate){
                distinctList[count--] = list[i];
            }
        }
        int[] out = new int[list.length-count-1];
        System.arraycopy(distinctList, count+1, out, 0, list.length-count-1);
        return out;
    }
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2012-12-17T10:14:18.193

尝试这个

```
public static int[] removeDuplicates(int[] s) {     
    Integer[] array = new HashSet<Integer>(Arrays.asList(ArrayUtils.toObject(s))).toArray(new Integer[0]);      
    return ArrayUtils.toPrimitive(array);
} 
```

编辑：使用[Apache Lang](http://commons.apache.org/lang/)更新以转换为原语。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2012-12-17T10:11:00.003

您要做的是，您必须检查第二个数组中的每个元素是否已经存在前一个元素。

您可以使用更好的方法使用 HashSet 并返回集合。

```
public static Set removeDuplicates(int []s){
  Set<Integer> set = new HashSet<Integer>();       
   for(int i=0;i<s.length;++i){
          set.add(s[i]);
        }//endFori
  return set;
}//endMethod 
```

如果您需要 int Array，请查看此 [java-hashsetinteger-to-int-array](https://stackoverflow.com/questions/2451184/java-hashsetinteger-to-int-array)链接。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2012-12-17T11:12:34.093

```
public class Test 
static int[] array = {4, 3, 3, 4, 5, 2, 4};
static HashSet list = new HashSet();
public static void main(String ar[])
{       
    for(int i=0;i<array.length;i++)
    {         
      list.add(array[i]);

    }
    System.out.println(list);
}} 
```

输出是：`[2, 3, 4, 5]`

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2013-07-28T08:45:51.340

你可以天真地做。首先，您需要对数组进行排序。您可以使用任何排序算法来做到这一点。我确实使用了快速排序。然后检查一个位置与它的下一个位置。如果它们不相同，则在新数组中添加值，否则跳过此迭代。

**示例代码（快速排序）：**

```
 public static void quickSort(int[] array, int low, int high) {
    int i = low;
    int j = high;

    int pivot = array[low + (high - low) / 2];

    while (i <= j) {
        while (array[i] < pivot) i++;
        while (array[j] > pivot) j--;
        if (i <= j) {
            exchange(array, i, j);
            i++;
            j--;
        }
    }
    if (0 < j) quickSort(array, 0, j);
    if (i < high) quickSort(array, i, high);
}

public static void exchange(int[] array, int i, int j) {
    int temp = array[i];
    array[i] = array[j];
    array[j] = temp;
} 
```

**删除重复项：**

```
 public static int[] removeDuplicate(int[] arrays) {
    quickSort(arrays, 0, arrays.length - 1);

    int[] newArrays = new int[arrays.length];
    int count = 0;
    for (int i = 0; i < arrays.length - 1; i++) {
        if (arrays[i] != arrays[i + 1]) {
            newArrays[count] = arrays[i];
            count++;
        }
    }
    return newArrays;
} 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2018-06-17T01:11:49.107

```
import java.util.Arrays;
import java.util.List;
import java.util.stream.Collectors;

// Remove duplicates from a list of integers
public class IntegerUtils {
    public static void main(String[] args) {
        int intArray[] = {1, 2, 4, 2, 67, 4, 9};
        List<Integer> uniqueList = removeDuplicates(intArray);
        uniqueList.stream().forEach(p -> System.out.println(p));
    }

    public static List<Integer> removeDuplicates(int[] intArray) {
        return Arrays.stream(intArray).boxed().distinct().collect(Collectors.toList());
    }
} 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2016-10-11T02:22:29.133

嘿，你可以使用我创建的这段代码！！！

```
import java.util.*;

public class DistinctNumber {
    public static void main(String[] args) {

        int[] nums=  {1,3,2,3,4,3,2,5,4,6}; 
        int [] T2 = duplicate(nums);
        for (int i = 0; i < T2.length; i++) {
            System.out.println(T2[i]);

        } 
    }
    public static boolean exist(int x,int []A){
        for (int i = 0; i < A.length; i++) {
            if(x==A[i]){
                return true;
            }
        }
        return false;
    }
    public static int [] EliminateDuplicate(int [] numbers){
       int [] B = new int[numbers.length];
       int i=0,j=0;
       for(i=0;i<numbers.length;i++){
           if(!exist(numbers[i], B)){
               B[j] = numbers[i];
               j++;
           }

       }
       int[] C = new int[j];
        for (int k = 0; k < C.length; k++) {
            C[k] = B[k];

        }
       return C;
    }

} 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2017-12-14T13:32:55.173

你可以做这样的事情

```
 public class MyClass {

    public static void main(String args[]) {

        int[] man = {4,56,98,89,78,45,78, 79, 56};

        for (int i = 0; i < man.length; i++)
        {
            for (int j = i+1; j < man.length; j++)
            {
                //check if it is equal
               if (man[i] == man[j])
                {

                     man[j] = man[j] -1;

               //Decrementing size

                   j--;
                }
            }
        }

         //Array without duplicates

        for(int k=0; k<man.length; k++)
        {

            System.out.print(" " + man[k]);
        } 
    }
} 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2018-07-06T14:19:10.050

```
int[] arrayRemoveDuplicates= Arrays.stream("integerArray").distinct().toArray();
    // print the unique array
    for (int i = 0; i < arrayRemoveDuplicates.length; i++) {
        System.out.println(arrayRemoveDuplicates[i]);
    } 
```

java 8中引入的Java.util.streamapi

* * *

## 回答 #23

> 赞同：-1
> 
> 时间：2017-08-24T23:17:36.967

导入 java.util.*；

公共类重复{

```
public static void main(String[] args) {
    // TODO Auto-generated method stub

    int [] myArray  = {1,3,2,4,3,2,3,4,5,6,7,6,5,4,3,4,5,6,76,5,4,3,4,4,5};
    List <Integer> myList = new ArrayList <Integer>();
    myList = removeDuplicates(myArray);

    //Printing Output   
    for (int k=0; k<myList.size();k++)
        System.out.print(" "+ myList.get(k));

}

private static List<Integer> removeDuplicates(int[] myArray) {
    // TODO Auto-generated method stub
    Arrays.sort(myArray);
    List <Integer> myList = new ArrayList <Integer>();
    for (int i=0; i<myArray.length-1; i++){

         if (myArray[i]!= myArray[i+1]){    

                    myList.add(myArray[i]);
            }

    }
    myList.add(myArray[myArray.length-1]);

    return myList;
} 
```

}

* * *

## 回答 #24

> 赞同：-2
> 
> 时间：2015-05-28T03:56:42.070

公共类 Foo {

```
public static void main(String[] args) {
    //example input
    int input[] = new int[]{1, 6 , 5896, 5896, 9, 100,7, 1000, 8, 9, 0, 10, 90, 4};
    //use list because the size is dynamical can change
    List<Integer> result = new ArrayList<Integer>();

    for(int i=0; i<input.length; i++)
    {
        boolean match = false;
        for(int j=0; j<result.size(); j++)
        {
            //if the list contains any input element make match true
            if(result.get(j) == input[i])
                match = true;
        }
        //if there is no matching we can add the element to the result list
        if(!match)
            result.add(input[i]);
    }
    // Print the result
    for(int i=0; i<result.size(); i++)
        System.out.print(result.get(i) + ", ");

} 
```

} 输出：1、6、5896、9、100、7、1000、8、0、10、90、4，

# c++ - C++ 显式构造函数

> ID：13912021
> 
> 赞同：4
> 
> 时间：2012-12-17T10:08:03.380
> 
> 标签：c++, constructor, explicit

我有一个有 2 个构造函数的类。

```
 explicit MyClass(size_t num);
   template<class T> MyClass(T myObj); 
```

每当我制作时我都想要

```
MyClass obj( 30 ); 
```

将调用第一个构造函数，

在隐式构造函数和

```
MyClass obj = 30; 
```

第二个ctor将被调用。

我怎样才能让它发生？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T10:17:21.947

30 是一个有符号整数值，因此它不完全符合您的第一个构造函数的签名（因此，模板被实例化）。

您可以将显式构造函数的签名更改为接受`int`，然后`Myclass obj( 30 );`调用显式构造函数，或者调用它以`30u`匹配显式签名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-02T20:44:37.807

关于第一个对象

```
MyClass obj (30); 
```

这是直接初始化，因此如果参数具有正确的参数类型，则应调用构造函数。在这种情况下，参数不正确，所以为了在这种情况下更准确，我会将 size_t 更改为 unsigned int，然后将 30u 传递给该对象。在这种情况下，将调用第一个构造函数。关于第二个对象

```
MyClass obj = 30; 
```

这是复制初始化，因此我会将第二个构造函数更改为复制构造函数，如下所示：

```
template<class T> MyClass(const T& myObj); 
```

在我看来，在这种情况下，将您的数据成员更改为整数会更好。尽管如此，应该调用第一个构造函数，然后根据需要调用第二个构造函数。

# lucene - 过滤Lucene查询中少于N个词的文档

> ID：13912024
> 
> 赞同：1
> 
> 时间：2012-12-17T10:08:10.027
> 
> 标签：lucene

作为 Lucene 查询的一部分，是否有可能从结果中排除具有少于 N 个术语或小于给定大小的文档？

完整的故事：我有一个包含许多文档的 Lucene 索引。有的很大，有的很小，可能只有几个字。我想进行一些测试，但仅限于大小合理的文档。如何过滤掉小文件？目前，我正在获取术语频率向量并删除少于 N 个术语的文档：

```
BooleanQuery q = some query...
TopDocs top = indexSearcher.search(q, size);
Collection<Integer> docNums = collectDocNums(top);
Iterator<Integer> it = docNums.iterator();
while (it.hasNext()) {
  int candDocNum = it.next();
  TermFreqVector tfv =
    indexReader.getTermFreqVector(candDocNum, "field");
  if (tfv.getTerms().length < N)
     it.remove();
} 
```

这可以通过过滤查询本身或以某种方式批处理它下面的循环来更有效地完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T20:53:26.807

过滤器可能是一个合理的实现。听起来这样的过滤器会在搜索时经常重复使用，所以缓存过滤器是值得的。我不知道有什么标准过滤器可以做到这一点，但是定制的过滤器会很好用。

我会实现类似的东西：

```
//Important to wrap the filter with a CachingWrapper, for performance.
filter = new CachingWrapperFilter(new CustomFilter());

public class CustomFilter() Extends Filter{
    public getDocIdSet(IndexReader reader) {
        return new CustomSet(reader);
    }
}

public class CustomSet(IndexReader reader) extends FilteredDocIdSet{
    public boolean match(int docid) {
        reader.getTermFreqVector(candDocNum, "field");
        return (tfv.getTerms().length >= N);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T11:03:50.347

看看[PositiveScoresOnlyCollector](http://lucene.apache.org/core/4_0_0-BETA/core/org/apache/lucene/search/PositiveScoresOnlyCollector.html)：它只收集具有`score > 0`. 您可能会编写自己的类似收集器，只接受具有`score > X`.

`N`当然，只有当您可以找到和之间的某种关系时，上述内容才适用`X`。据我了解，这两件事应该相关：匹配的术语越少，分数越低，反之亦然。

如果您可以定义一些最低分数阈值，那么这种方法应该比您当前使用的方法更有效。

# eclipse - 如何在 Eclipse 中添加 JSP 注释（而不是 HTML 注释）？

> ID：13912025
> 
> 赞同：1
> 
> 时间：2012-12-17T10:08:10.027
> 
> 标签：eclipse, jsp, keyboard-shortcuts

在 Eclipse 中编辑 JSP 页面时，我可以`<!-- -->`使用键盘快捷键用 HTML 注释 ( )注释掉当前行或选定块`CTRL``SHIFT``/`。

但是，在 JSP 文件中，我通常希望使用 JSP 注释 ( `<%-- --%>`) 来代替。有没有办法用键盘快捷键代替/以及添加这些评论？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T11:08:07.910

您需要创建自己的代码模板，`windows > preferences`然后选择 JSP 和[此处的教程](http://www.avajava.com/tutorials/lessons/what-is-an-eclipse-template-and-how-do-i-use-it.html)

但是我会放弃eclipse并使用intellij，在这种情况下答案是`ctrl+/`

# java - lastindexof() 和 HEX 0x1A

> ID：13912028
> 
> 赞同：1
> 
> 时间：2012-12-17T10:08:11.653
> 
> 标签：java, hex

我是*Java*新手，我想在长字符串中找到一个特殊字符，使用 fi`lastIndexOf`或`indexOf`，只是为了了解它的存在。

字符是十六进制`0x1A`。如何在`lastIndexOf`or中使用十六进制`indexOf`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T10:41:10.277

你可以使用

```
text.indexOf('\u001A'); 
```

或者

```
text.lastIndexOf((char) 0x1A); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T11:10:53.250

[看看这个 java 文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html)

可以通过这些函数的返回值来检验是否存在。

如果返回 -1，则源字符串中不存在给定的字符串 /char。

# android - 应用安装程序异常进程终止(android)

> ID：13912033
> 
> 赞同：0
> 
> 时间：2012-12-17T10:08:32.600
> 
> 标签：android, titanium, titanium-mobile

我的 iphone 项目运行良好，但在运行 android 项目时
`(mobile sdk 2.1.1,2.1.2,2.1.3GA checked all)`。我尝试过干净的构建，也`titanium sdk build 2.1.3`从 [appcelerator 构建](http://builds.appcelerator.com.s3.amazonaws.com/)替换， 但控制台出现以下异常

```
ERROR] Exception occured while building Android project:
[ERROR] Traceback (most recent call last):
[ERROR]   File "/Library/Application Support/Titanium/mobilesdk/osx/2.1.3.GA/android/builder.py", line 2282, in <module>
[ERROR]     s.run_emulator(avd_id, avd_skin, avd_name, avd_abi, add_args)
[ERROR]   File "/Library/Application Support/Titanium/mobilesdk/osx/2.1.3.GA/android/builder.py", line 567, in run_emulator
[ERROR]     handler(3,None)
[ERROR]   File "/Library/Application Support/Titanium/mobilesdk/osx/2.1.3.GA/android/builder.py", line 552, in handler
[ERROR]     os.kill(p.pid, signal.SIGTERM)
[ERROR] OSError: [Errno 3] No such process 
```

我也将配置运行为跟踪、调试但没有成功

```
[ERROR] Application Installer abnormal process termination. Process exit value was 1
[ERROR] Timed out waiting for emulator to be ready, you may need to close the emulator and try again 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T07:42:07.157

回答我的问题

我重新安装了android包（2.2）它在设置路径时给了我错误（没有sdk home）我创建了android-sdk-home文件夹并将内容（Tools.platform-tools等文件夹）放入其中，它对我有用

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-25T00:02:28.273

也许您需要停止所有控制台进程并重试。确保您有新的 android 版本（2.2 或 2.3）的新模拟器

# mysql - 在sql中显示超过3个月的记录

> ID：13912035
> 
> 赞同：11
> 
> 时间：2012-12-17T10:08:40.450
> 
> 标签：mysql, sql

我需要创建一个 SSIS 包，它将在`table(T1)`超过**3 个月**（基于`ALERT_TIMESTAMP`）中遍历记录并将它们移动到另一个`table(T2)`

我的查询是：

```
SELECT * FROM T1
WHERE (DATEDIFF([month], ALERT_TIMESTAMP, GETDATE()) > 3) 
```

`Alert_timestamp`列是`Datetime`格式。例如：`'10/26/2012 12:00:00 AM'`

当我运行查询时，它应该显示所有早于**3 个月**的记录，但事实并非如此。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-17T10:19:30.403

试试这个

```
select * from `table` where `yourfield` >= DATE_SUB(CURDATE(), INTERVAL 3 MONTH) 
```

例如，对于天、年，请参见下文。

```
DATE_SUB(CURDATE(), INTERVAL 15 DAY) /*For getting record specific days*/

DATE_SUB(CURDATE(), INTERVAL 1 YEAR) /*for getting records specific years*/ 
```

* * *

对于 Anand，查询

```
BETWEEN DATE_SUB( CURDATE( ) ,INTERVAL 6 MONTH ) AND DATE_SUB( CURDATE() ,INTERVAL 3 MONTH ) 
/* For Getting records between last 6 month to last 3 month 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T10:18:19.040

您发布的不是 MySQL。假设您使用的是 MS SQL Server，您应该使用该`ABS()`函数。

```
SELECT   * FROM        T1
WHERE     ABS(DATEDIFF([month], ALERT_TIMESTAMP, GETDATE())) > 3 
```

# xpages - xpage 可以使用来自 notes 客户端的身份验证吗？

> ID：13912037
> 
> 赞同：0
> 
> 时间：2012-12-17T10:08:45.863
> 
> 标签：xpages

我有一个需要身份验证的 Xpages 应用程序。当我在笔记客户端（集成的网络浏览器）中打开这个 xpage 应用程序时，我还必须进行身份验证。有没有一种方法可以让我在客户端打开 xpage 时不必进行身份验证。那么，有没有办法让 xpage 可以使用来自 notes 客户端的身份验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T20:09:34.017

Notes 内部 Web 浏览器无法从 Notes 登录中获取用户的凭据。但是，可以使用帐户 API 来执行您需要的操作。您可以通过 Notes Preferences-> 添加帐户帐户.. 创建一个新的 HTTP 帐户。我相信（但不是 100% 确定）帐户中定义的凭据将被使用。我不是 100% 确定这一点，但值得一试！

# powershell - Powershell'Move-Item'如果不存在则不会创建目录

> ID：13912038
> 
> 赞同：17
> 
> 时间：2012-12-17T10:08:59.683
> 
> 标签：powershell

我有一个 Powershell 脚本，它做了很多事情，其中​​之一是移动文件：

```
$from = $path + '\' + $_.substring(8)
$to   = $quarantaine + '\' + $_.substring(8)

Move-Item $from $to 
```

但它碰巧目录结构还没有出现在`$to`路径中。所以我希望 Powershell 用这个突击队来创建它。我试过`Move-Item -Force $from $to`了，但这并没有帮助。

我可以做些什么来确保 Powershell 创建所需的目录以使事情正常进行？
我希望我说清楚，如果没有，请询​​问！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-17T12:18:02.550

您可以自己创建它：

```
$from = Join-Path $path $_.substring(8)
$to = Join-Path $quarantaine $_.substring(8)

if(!(Test-Path $to))
{
    New-Item -Path $to -ItemType Directory -Force | Out-Null
}

Move-Item $from $to 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-18T00:09:38.557

您可以使用 system.io.directory .NET 类来检查目标目录并在它不存在时创建。这是使用您的变量的示例：-

```
if (!([system.io.directory]::Exists($quarantine))){
   [system.io.directory]::CreateDirectory($quarantine)
}
Copy-File $from $to 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-28T14:25:13.773

你也可以像这样添加一个实用函数：

```
Function Move-Item-Parent([string]$path, [string]$destination) {
    New-Item $destination -ItemType Directory -Force
    Move-Item $path $destination
} 
```

然后像这样调用它：

```
Move-Item-Parent $from $to 
```

# iphone - 显示蜂窝数据已关闭警报

> ID：13912040
> 
> 赞同：5
> 
> 时间：2012-12-17T10:09:04.657
> 
> 标签：iphone, objective-c, ios, uialertview

如何显示此警报视图？我知道我需要检查可访问性的连接，但是如何使用设置和确定按钮显示此警报？我需要它用于 iOS 6。

![在此处输入图像描述](../Images/6240cda7954cc3d4c51f7cbf12f0e13b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T10:37:00.153

不幸的是，在 iOS 5.1 及更高版本中，您无法从您的应用程序中打开设置应用程序。

如果您使用的是较低版本，则以下内容将起作用。

创建警报视图，如：

```
UIAlertView *cellularData = [[UIAlertView alloc] initWithTitle: @"Cellular Data is Turned Off" message:@"Turn on ellular data or use Wi-Fi to access data"  delegate:self cancelButtonTitle:@"OK" otherButtonTitles:@"Settings", nil];
[cellularData show]; 
```

实现`clickedButtonAtIndex`类似：

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
   if(buttonIndex == 1)
   {
      [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"prefs:root=General&path=Network"]]
   }
} 
```

它将从您的应用程序中打开设置应用程序。

# python - 如何从这条线中每 10 秒提取一次百分比？

> ID：13912041
> 
> 赞同：0
> 
> 时间：2012-12-17T10:09:04.443
> 
> 标签：python, parsing

> **可能重复：**
> [如何使用 DJango 在网络浏览器中显示 rsync --progress？](https://stackoverflow.com/questions/13523931/how-to-show-the-rsync-progress-in-web-browser-using-django)

我有这个linux命令：

```
rsync -avz --info=progress2 source:/file /destination 
```

我在 Python 中这样使用过：

```
proc = subprocess.Popen(['sshpass', '-p', password, 'rsync', '-avz', '--info=progress2', source12, destination], 
                                    stderr=subprocess.PIPE, stdout=subprocess.PIPE).communicate()[0] 
```

这会将输出和进度存储在 proc 变量中，如下所示：

```
receiving incremental file list
rathi/
rathi/20090209.02s1.1_sequence.txt.gz
    209,398,969  27%   11.95MB/s    0:00:45 
```

我只想从上面的行中提取进度百分比。我想每 1 分钟检查一次变量并提取更新后的百分比。对于解析我认为可以使用`re`module. 我怎样才能达到我的结果？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T10:26:07.810

您确实可以通过 re 获得进展。

```
progress = re.search('\d*%',str).group() 
```

其中 str 是您要搜索的字符串。

编辑：

你需要做一个while循环，例如

```
while(progress < 101%):
    get_new_progress
    re.search.... 
```

# javascript - 使用 jquery 打印 Json 值

> ID：13912042
> 
> 赞同：-4
> 
> 时间：2012-12-17T10:09:07.190
> 
> 标签：javascript, jquery, json

如何打印我获取的 json 对象的值。

这就是我所做的

```
$.each(data, function(key, value){
    console.log(key + ": " + value);
}); 
```

这就是价值所包含的。

```
Object
->Person: Array[1]
    -->0: Array[10]
         --->0: "id:8"
         --->1: "name:Holly"
    --->length: 1
    --->__proto__: Array[0]
->__proto__: Object 
```

这就是我得到的

```
0: [object Object]
1: [object Object]
2: ........ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T10:12:14.753

要么做

```
console.log(data) 
```

或者

```
console.log(JSON.stringify(data)) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-17T10:15:00.900

值是一个对象，所以它像对象一样打印。

如果你想要对象中的数据，

您将需要分别打印如下：

`Value[0][0]`等..

# jakarta-ee - 添加@Stateful 或@Stateless 注释实际上有什么作用？

> ID：13912044
> 
> 赞同：18
> 
> 时间：2012-12-17T10:09:08.760
> 
> 标签：jakarta-ee, ejb

我刚刚开始掌握 Java EE。我知道向一个类添加`@Stateful`或`@Stateless`注释会使它成为一个 EJB bean。但是，一旦我这样做，后台实际发生了什么？我在 Wikipedia 上看到以下与 EJB 相关的内容。

*   事务处理
*   与 Java Persistence API (JPA) 提供的持久性服务集成
*   并发控制
*   使用 Java 消息服务和 Java EE 连接器架构的事件
*   异步方法调用

1.  当我将一个类标记为 EJB 时，上面列出的项目是否会在后台得到“处理”？一旦我将一个类设为 EJB，就会遵循一个完全不同的代码路径，它会遍历上述每一个，这是发生了什么吗？
2.  我看到使用 CDI 我可以选择注入 EJB bean，而不是 CDI bean。在这种情况下，我是否应该始终使用 EJB bean 而不是 CDI bean，因为 EJB bean 比 CDI bean 更强大？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T21:16:30.313

有关这两个问题的一些见解，请参阅[此答案](https://stackoverflow.com/questions/13487987/where-to-use-ejb-3-1-and-cdi/13504763#13504763)。

该答案中要关注的重点是：

*   EJB 和 CDI bean 是代理组件，你得到的对象是假的，真正的对象是隐藏的，这就是添加服务的方式：caller->proxy->services->realObject
*   CDI 和 EJB 实际上是一样的，可以自由混合。您使用哪个取决于您尝试执行的操作。除非我需要该答案中列出的项目之一，否则我倾向于使用 CDI。然后我只是升级或添加一个新的bean。

请注意，我在该答案中确实错过的一件事是整个`@MessageDriven`概念。

### 消息驱动 Bean

将 JMS / Connector 放在同一行非常有趣，因为这正是它们的实现方式。消息驱动 Bean (MDB) 实际上应该称为“连接器驱动 Bean”，因为 MDB 的所有通信和生命周期实际上都与连接器架构规范相关联，并且与 JMS 没有直接关系——JMS 只是唯一的连接器人见过。 [那里有很大的潜力](http://blog.dblevins.com/2010/10/ejbnext-connectorbean-api-jax-rs-and.html)。希望我们能在 Java EE 7 中看到一些改进。

# xml - 如何在 Wix 中找到 baseAddress？

> ID：13912048
> 
> 赞同：1
> 
> 时间：2012-12-17T10:09:21.723
> 
> 标签：xml, wcf, wix, installation, base-address

我有一个使用 Wix 进行设置的 Wcfservice。

在安装过程中，我有一个 Gui，它收集不同的设置，然后在 Product.wxs 中更改这些设置。但是我很难找到要更改的 baseAddress 设置。

我的配置文件有这个部分：

```
<system.serviceModel>
    <behaviors>
        <serviceBehaviors>
            <behavior name="Default">
                <serviceMetadata httpGetEnabled="true"/>
            </behavior>
        </serviceBehaviors>
    </behaviors>
    <services>
        <service behaviorConfiguration="Default" name="OurServiceLibrary.OurService">
            <clear/>
                        <endpoint name="OurBasicHttpBinding" address="basic" binding="basicHttpBinding" contract="OurServiceLibrary.IOurService" listenUriMode="Explicit"/>
            <host>
                <baseAddresses>
                    <!-- The base-address must be updated with the correct url for the hosting machine. -->
                    <add baseAddress="http://localhost:8081/ourservice"/>
                </baseAddresses>
            </host>
        </service>
    </services>
</system.serviceModel> 
```

我尝试更改设置时使用的代码是：

```
<!--Put path to settings in local variable-->
<?define ServiceModelSettingsPath="//configuration/system.ServiceModel/services/service/host/baseAddresses/" ?>

<!--Modify settings with values entered in the installation UI-->
<util:XmlFile Id="ModifyServiceBaseAdress"
         Action="setValue"
         Permanent="yes"
         ElementPath="$(var.ServiceModelSettingsPath)/add"
         Name ="baseAddress"
         File="[#OurServiceSettingsFile]"
         Value="connectionString=[SERVICEBASEADRESS_VALUE]"
         SelectionLanguage="XPath"
         Sequence="1" /> 
```

尝试运行设置时，我收到一条错误消息，提示“找不到节点：//configuration/system.ServiceModel/services/service/host/baseAddresses//在 XML 文件中添加”

显然节点的路径是错误的，但我看不到怎么做，谁能帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:37:30.440

就是这样，一个简单的拼写错误。双斜杠没有任何区别。但是在路径中更改为 serviceModel 确实如此。

然后又发现了一个错误，设置值的时候不需要connectionString=，只需要：

值="[EVENTREPORTINGADDRESS_VALUE]"

谢谢！

# f# - 理解歧视工会的推理

> ID：13912049
> 
> 赞同：2
> 
> 时间：2012-12-17T10:09:22.760
> 
> 标签：f#, type-inference, discriminated-union

考虑以下代码...

```
type TypeOne () =
    member val Name = "" with get, set

type TypeTwo () =
    member val Name = "" with get, set
    member val Property = 0 with get, set

[<RequireQualifiedAccess>]
type UnionType =
    | TypeOne of TypeOne
    | TypeTwo of TypeTwo

// this only succeeds because we have defined the union type a
// requiring qualified access. otherwise TypeOne would be inferred
// as the union case, not the type (understandably)...

let t1 = TypeOne ()

// if we want t1 "as" the union type, we have to do the following...

let ut1 = UnionType.TypeOne t1

// the following function returns a result of type UnionType
// but we have to explicitly do this for each type

let makeUnion switch =
    match switch with
        | true -> UnionType.TypeOne (TypeOne ())
        | _ -> UnionType.TypeTwo (TypeTwo ()) 
```

正如评论中的那样，似乎无法推断返回结果应该是联合类型，如果我们必须要求对联合类型进行合格的访问，这是非常冗长的（这似乎是令人担忧的错误）。

也没有办法创建一个只接受联合类型并将它们作为联合返回的函数。（在这种情况下，一个函数接受 TypeOne 或 TypeTwo 并返回 UnionType）。或者有吗？是否有更好的方式与受歧视的工会合作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T10:19:09.103

```
type TypeOne() =
    member val Name = "" with get, set

type TypeTwo() =
    member val Name = "" with get, set
    member val Property = 0 with get, set

type UnionType =
    | TypeOne of TypeOne
    | TypeTwo of TypeTwo

/// You can give some hints to the type checker 
/// by saying that you want a class constructor
let t1 = new TypeOne()

/// No need to use fully-qualified access on union types
let ut1 = TypeOne t1

let makeUnion switch =
    match switch with
    | true -> TypeOne (new TypeOne())
    | false -> TypeTwo (new TypeTwo()) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T10:30:39.260

正如 pad 所指出的那样——你不需要用它的父类型来限定一个联合案例——所以你可以写

```
let makeUnion switch =
    match switch with
    | true -> TypeOne (new TypeOne ())
    | false -> TypeTwo (new TypeTwo ()) 
```

但是，您将始终必须指定`TypeOne`. 如果您有多个采用相同参数的案例，这是为了避免出现歧义 - 比如

```
type foo=
|Bar of int
|Baz of int 
```

然后即使知道返回类型，编译器也无法计算出返回什么。一个更常见的例子实际上是不带参数的情况——假设你决定重新定义真假：

```
type bool = |True |False 
```

# codeigniter - 使用 CodeIgniter 构建的演示应用程序

> ID：13912051
> 
> 赞同：11
> 
> 时间：2012-12-17T10:09:38.230
> 
> 标签：codeigniter, demo

几个星期以来，我一直在学习如何使用 CodeIgniter，但我对如何使用它构建一个真正的应用程序有点困惑。

是否有任何开源演示可供我用来查看流程在其中的工作方式。在谷歌上找不到任何东西。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-17T10:32:30.480

[CodeIgniter 入门以及如何创建所有这些出色的应用程序：](http://devsnippets.com/article/getting-started-with-codeigniter-and-how-to-create-all-those-great-apps.html) 包含 12 个易于遵循的教程来构建小型应用程序！

4.1 使用 CodeIgniter 构建 RSS 2.0 提要
4.2 使用 CodeIgniter 生成 PDF 文件
4.3 使用 CodeIgniter 的购物车类构建购物车
4.4 CodeIgniter Clan Site- Part1 & Part2
4.5 使用 Code Igniter 验证 Web 表单4.6 使用 CodeIgniter 4.7 CodeIgniter 和
的示例 Facebook 应用程序
Ajax 使用 JQuery 教程
4.8 使用分页进行实时搜索
4.9 如何使用 CodeIgniter 更新您的 Twitter 状态
4.10 Codeigniter 事件日历
4.11 使用 CodeIgniter 和 Mootools 进行实时搜索
4.12 使用 CodeIgniter 创建文件托管站点

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T10:38:37.027

我环顾四周，发现这个网站[http://qoodles.phpfogapp.com/](http://qoodles.phpfogapp.com/)它是用 codeigniter 构建的，源代码在 github 上：[https ://github.com/hush2/qoodles](https://github.com/hush2/qoodles)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-17T10:18:05.863

在 hotscripts.com 上查看 CodeIgniter 创建的以下脚本和应用程序。

[http://www.hotscripts.com/search/all-scripts/codeigniter](http://www.hotscripts.com/search/all-scripts/codeigniter)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-17T10:25:46.630

请将此 github 项目用于演示 Codeigniter CMS 应用程序 [https://github.com/daylightstudio/FUEL-CMS/tree/master/fuel](https://github.com/daylightstudio/FUEL-CMS/tree/master/fuel)

# java - Xtext：如何从 JvmTypeReference 获取集合类型参数（泛型）？

> ID：13912053
> 
> 赞同：2
> 
> 时间：2012-12-17T10:09:48.313
> 
> 标签：java, xtext

在 Xtext 中，我正在尝试编写一个实用方法来返回集合类型（泛型类型），其中集合类型由解析器创建的 JvmTypeReference 表示，我需要知道类型参数：

```
@Inject TypeReferences typeReferences;
public JvmType getCollectionType(JvmTypeReference clazz) {
    if (typeReferences.isInstanceOf(clazz, Collection.class)) {
        collectionType = typeReferences.getArgument(clazz, 0);
        return collectionType;
    }
} 
```

示例1：对于输入，`java.util.List<String>`我希望方法返回`java.lang.String`，示例2：对于输入`java.util.Set<a.b.m.Book>`返回`a.b.m.Book`。

我需要生成器的集合类型参数类型。

听上去好听却`typeReferences.getArgument(..)`归于`JvmParameterizedTypeReference: E`何处。唔。我进了死胡同。`getType()``JvmTypeParameter <E> java.util.List`

甚至有可能还是类型擦除也适用于`JvmTypeReference`？我希望不是。

谢谢你的任何提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T14:13:42.510

解决了。`getCollectionType()`是正确的。不正确的是输入，我创建`JvmTypeReference`. 它们并非直接源自已解析的模型。只有顶级元素在我的 DSL 中明确指定了类型。所有子元素类型都是使用 Xtext“自省”以级联方式从上到下推断的。推断类型存储在模型本身中；各种其他的东西都依赖于它们，比如验证。要将推断的 JvmTypeReference 存储在 Model AST 中，必须对其进行复制。

我没有正确创建副本。错误的库调用。

错误的：

```
public JvmTypeReference createDefensiveCopyOfJvmTypeReference(JvmTypeReference typeReference) {
    return typeReferences.createTypeRef(typeReference.getType());
} 
```

正确的：

```
public JvmTypeReference createDefensiveCopyOfJvmTypeReference(JvmTypeReference   typeReference) {
    return EcoreUtil.copy(typeReference);
} 
```

好吧，这`TypeReferences#createTypeRef()`并不完全错误。它创建所需类型的副本，但表现出类似于 Java 中的“类型擦除”。

我也在[Xtext 论坛](http://www.eclipse.org/forums/index.php/m/991312/)上提出了这个问题。

查看我的[DeepCloneDSL](https://bitbucket.org/espinosa/deepclonedsl)项目以获取完整的源代码。

PS
为什么我们要制作副本`JvmTypeReference`？以及来自 Xtext 常见类型的其他实例？`JvmTypeReference`是一个复杂的类型，`EObject`它本身就是 AST 的一个片段，一个模型的片段。通过设置类型`JvmType`或类似的属性，将模型片段插入另一个模型；它不能被插入两次或同时在两个不同的模型中。Xtext 本身会阻止某些操作，有些操作更棘手，必须找到[困难的方法](https://bugs.eclipse.org/bugs/show_bug.cgi?id=396433)。

# moq - 起订量，设置存根和预期结果

> ID：13912059
> 
> 赞同：1
> 
> 时间：2012-12-17T10:10:20.210
> 
> 标签：moq

我正在创建一个模拟和一个存根。存根是以下合约：

```
public interface IMailService
{
   void SetCredentials(ICredentials credentials);
   bool Connect();
} 
```

我的断言如下：“将正确的凭据传递给 IMailService，将成功连接”。所以我创建了我的模拟对象：

```
var mockAdapter = new Mock<IMailService>(); 
```

现在我应该准备这个适配器。如果使用正确的凭据调用 SetCredentials 方法，则 Connect() 方法应返回 true。否则它将返回false。

我只是不确定如何使用 Moq 设置此行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T10:19:40.663

您需要 2 个测试来涵盖这一点，一个是`Connect`返回`true`，另一个是返回`false`。

```
[Fact] // or [Test] depending on your testing framework
public void MailServiceConnectsIfCredentialsAreValid()
{
    var mockMailService = new Mock<IMailService>();
    mockMailService.Setup(x => x.Connect()).Returns(true);

    // The rest of your code which will use the mockMailService.Object...
}

[Fact]
public void MailServiceFailsToConnectIfCredentialsAreInvalid()
{
    var mockMailService = new Mock<IMailService>();
    mockMailService.Setup(x => x.Connect()).Returns(false);

    // The rest of your code which will use the mockMailService.Object...
} 
```

出于测试的目的，您并不关心`ICredentials`通过了什么。您只是涵盖了两种可能性，`IMailService.Connect()`即它返回`true`或`false`。确定会发生什么的实际逻辑将存在于您的实际实现的测试中`IMailService`。

您也可能会废弃该`SetCredentials`方法，然后将其传递`ICredentials`给`Connect`.

```
bool Connect(ICredentials credentials); 
```

# php - 重写到显示输入 URL 的另一个地址

> ID：13912064
> 
> 赞同：2
> 
> 时间：2012-12-17T10:10:47.013
> 
> 标签：php, .htaccess, mod-rewrite

我正在尝试重定向：

输入网址：

`http://localhost/Test/Test1/key/val`

到以下地址，但显示以前的 URL：

`http://localhost/Test/Test1/Test1.php?key=val`

该`.htaccess`文件位于`/Test`.

我有这个，但总是收到 HTTP 错误`404 NOT FOUND`：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI} ^([^/]*)/([^/]*)/([\w]+)$ [NC]
RewriteRule ^(.*)$  /%1.php?%2=%3 [L] 
```

我已经搜索过这个，但找不到类似的问题已解决。

对于对规则进行适当修改的任何帮助，我将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T10:28:05.433

我在您的规则中看到了几个问题。

.1 重写条件正则表达式不匹配。

.2 如果输入的 URI 有一个斜杠，脚本将不会得到查询字符串，因为`val`变成`val/`

.3 没有什么可以防止循环。

你可以试试这个：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} (.*)[^/]*/([^/]*)/([^/]*)/([\w]+)/? [NC]
RewriteCond %{REQUEST_URI} !\.php  [NC]
RewriteRule .*  %1/%2/%2.php?%3=%4 [L] 
```

希望这就是你所需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T10:12:22.220

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI} ^([^/]*)/([^/]*)/([\w]+)$ [NC]
RewriteRule ^(.*)$  /Test1/%1.php?%2=%3 [L] 
```

# xcode - Xcode 4.5 上的 OpenCV 2.4.3

> ID：13912068
> 
> 赞同：3
> 
> 时间：2012-12-17T10:11:15.577
> 
> 标签：xcode, opencv, osx-mountain-lion

我正在尝试在 Mountain Lion 10.8 上使用 xcode 4.5 编译一个使用 opencv 的项目，我密切关注此链接上的过程：

[使用 Xcode 为 OS X Lion / Mountain Lion 编译 OpenCV (2.3.1+)](https://stackoverflow.com/questions/8552839/compile-opencv-2-3-1-for-os-x-lion-mountain-lion-with-xcode)

这是我遵循的顺序；

*   使用端口安装opencv：sudo port install opencv configure.compiler = llvm-gcc-4.2
*   打开 Xcode 并创建一个新项目（使用 c++ 的命令行应用程序）。
*   在“库搜索路径”中添加了“/opt/local/lib/**”路径
*   添加了任何 libopencv_。Dylib 到一个新组
*   在“标头搜索路径”中添加了“/opt/local/include/**”路径

每次我尝试编译 xcode 时都会出现以下错误：

```
In file included from /Users/oliver/OpenCVHelloWorld/main.cpp:12:
In file included from /opt/local/include/opencv2/opencv.hpp:46:
In file included from /opt/local/include/opencv2/core/core_c.h:47:
/opt/local/include/opencv2/core/types_c.h:322:17: error: use of undeclared identifier 'lrint'
    return (int)lrint(value);
                ^
/opt/local/include/opencv2/core/types_c.h:742:5: error: use of undeclared identifier 'assert'
    assert( (unsigned)CV_MAT_DEPTH(type) <= CV_64F );
    ^
/opt/local/include/opencv2/core/types_c.h:773:5: error: use of undeclared identifier 'assert'
    assert( (unsigned)row < (unsigned)mat->rows &&
    ^
/opt/local/include/opencv2/core/types_c.h:780:9: error: use of undeclared identifier 'assert'
        assert( type == CV_64FC1 );
        ^
/opt/local/include/opencv2/core/types_c.h:790:5: error: use of undeclared identifier 'assert'
    assert( (unsigned)row < (unsigned)mat->rows &&
    ^
/opt/local/include/opencv2/core/types_c.h:797:9: error: use of undeclared identifier 'assert'
        assert( type == CV_64FC1 );
        ^
In file included from /Users/oliver/OpenCVHelloWorld/main.cpp:12:
In file included from /opt/local/include/opencv2/opencv.hpp:46:
/opt/local/include/opencv2/core/core_c.h:1118:5: error: use of undeclared identifier 'assert'
    assert( _elem->flags >= 0 /*&& (elem->flags & CV_SET_ELEM_IDX_MASK) < set_header->total*/ );
    ^
In file included from /Users/oliver/OpenCVHelloWorld/main.cpp:12:
In file included from /opt/local/include/opencv2/opencv.hpp:47:
In file included from /opt/local/include/opencv2/core/core.hpp:56:
In file included from /usr/include/c++/4.2.1/algorithm:64:
In file included from /usr/include/c++/4.2.1/bits/stl_algobase.h:70:
In file included from /usr/include/c++/4.2.1/iosfwd:44:
/usr/include/c++/4.2.1/bits/c++locale.h:76:5: error: use of undeclared identifier 'va_start'
    va_start(__args, __fmt);
    ^
/usr/include/c++/4.2.1/bits/c++locale.h:84:5: error: use of undeclared identifier 'va_end'
    va_end(__args);
    ^
/usr/include/c++/4.2.1/cstdarg:54:20: note: expanded from macro 'va_end'
#define va_end(ap) va_end (ap)
                   ^
In file included from /Users/oliver/OpenCVHelloWorld/main.cpp:12:
In file included from /opt/local/include/opencv2/opencv.hpp:47:
In file included from /opt/local/include/opencv2/core/core.hpp:56:
In file included from /usr/include/c++/4.2.1/algorithm:64:
In file included from /usr/include/c++/4.2.1/bits/stl_algobase.h:70:
In file included from /usr/include/c++/4.2.1/iosfwd:48:
In file included from /usr/include/c++/4.2.1/bits/postypes.h:45:
In file included from /usr/include/c++/4.2.1/cwchar:51:
/usr/include/c++/4.2.1/ctime:65:11: error: no member named 'clock_t' in the global namespace
  using ::clock_t;
        ~~^
/usr/include/c++/4.2.1/ctime:67:11: error: no member named 'tm' in the global namespace
  using ::tm;
        ~~^
/usr/include/c++/4.2.1/ctime:69:11: error: no member named 'clock' in the global namespace
  using ::clock;
        ~~^
/usr/include/c++/4.2.1/ctime:70:11: error: no member named 'difftime' in the global namespace
  using ::difftime;
        ~~^
/usr/include/c++/4.2.1/ctime:71:11: error: no member named 'mktime' in the global namespace
  using ::mktime;
        ~~^
/usr/include/c++/4.2.1/ctime:72:11: error: no member named 'time' in the global namespace
  using ::time;
        ~~^
/usr/include/c++/4.2.1/ctime:73:11: error: no member named 'asctime' in the global namespace
  using ::asctime;
        ~~^
/usr/include/c++/4.2.1/ctime:74:11: error: no member named 'ctime' in the global namespace
  using ::ctime;
        ~~^
/usr/include/c++/4.2.1/ctime:75:11: error: no member named 'gmtime' in the global namespace
  using ::gmtime;
        ~~^
/usr/include/c++/4.2.1/ctime:76:11: error: no member named 'localtime' in the global namespace
  using ::localtime;
        ~~^
fatal error: too many errors emitted, stopping now [-ferror-limit=]
20 errors generated. 
```

我还尝试将编译器更改为 LLVM GCC 4.2 编译器，但没有成功。有人可以告诉我使用 opencv Mountain Lion 和 Xcode 4.5 在 xcode 上构建项目的确切步骤吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T02:26:16.093

如果无法访问您的代码，我不能说这是否是一个完整的修复，但是为了解决您的“没有名为...的成员”编译错误，您可以尝试将“/opt/local/lib”替换为“/opt/local/lib/**”通过双击“头文件搜索路径”字段并在 XCode 的“构建设置”>“搜索路径”>“头文件搜索路径”下选择“非递归”选项。

您也可以在导航到“构建设置”>“Apple LLVM 编译器 4.2 - 语言”>“C++ 标准库”并选择“libstdc++（GNU C++ 标准库）”而不是 XCode 4.5 的默认“libc++（LLVM支持 C++11 的 C++ 标准库）”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T13:44:40.917

我会使用不同的安装命令：

```
sudo port install tbb
sudo port install opencv +debug +eigen +python27 +qt4 +tbb 
```

eigen 和 qt4 是可选的，tbb 是相当必要的，因为当存在时，opencv 大量使用 tbb 进行多线程处理。换句话说，opencv 没有 tbb 会慢很多。

我不会手动指定编译器。我记得那对我不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T13:46:37.217

确保它编译为 c++，将你的 m 文件重命名为 mm

# entity-framework - Linq To Entities：带有 Count() 的“序列不包含任何元素”

> ID：13912070
> 
> 赞同：3
> 
> 时间：2012-12-17T10:11:30.330
> 
> 标签：entity-framework

在我们的应用程序中，我们有一段带有一些 Linq 查询 (EF) 的代码，有时会引发异常。

这仅发生在最终用户身上，到目前为止我们无法重现它。

从日志文件中，我们得到以下异常堆栈跟踪：

> `1 source) at System.Data.Objects.ELinq.ObjectQueryProvider.<GetElementFunction>b__3[TResult](IEnumerable`System.InvalidOperationException：序列在 MT3.uctXGrid.LoadLayout的 System.Data.Objects.ELinq.ObjectQueryProvider.ExecuteSingle[TResult]（IEnumerable `1 query, Expression queryRoot) at System.Data.Objects.ELinq.ObjectQueryProvider.System.Linq.IQueryProvider.Execute[S](Expression expression) at System.Linq.Queryable.Count[TSource](IQueryable`1 源）的System.Linq.Enumerable.Single[TSource]（IEnumerable 1 序列）中不包含任何元素（字符串 strUniqueID、布尔 rethrowException、List`1 visibleColumns）

在该方法`LoadLayout`中，只有 2 个实例`Count()`，它们只是在标准`IQueryable`s 上运行，它们基于一个整数字段询问实体类型并选择所有字段（没有聚合或任何东西）。

前任：

```
from p in cxt.genData where datId = ID 
```

在堆栈跟踪中，似乎`.Single()`正在使用内部，如果没有记录，可能会引发异常。

但是，如果我们只是调用，为什么要使用 single`.Count()`呢？

查询如何

```
(from p in cxt.genData where datId = ID).Count() 
```

抛出“序列不包含元素”异常？

我们在查询方面也遇到了其他奇怪的问题，我开始怀疑我们的 EF 版本是否有任何问题。

我们目前仍在 4.0 上。（VS2010附带的标准版）。

有没有人知道这里会发生什么？

更新：这是我们实际使用的 Linq-to-Entities 查询

```
Dim qryLastLayout = From t In oContext.genGridLayouts Where t.layID = intCurrentLayoutID  
If Not IsNothing(qryLastLayout) AndAlso qryLastLayout.Count <> 0 Then

Dim qryPrintSettings = From p In oContext.genPrintSettings Where p.prtDefault = True  
If Not IsNothing(qryPrintSettings) AndAlso qryPrintSettings.Count <> 0 Then 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:39:32.653

您是否尝试过使用 .Any() 方法？

```
if(cxt.genData.Any(x => x.datId == ID))
{
     // do something here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T13:37:56.133

需要注意的一件事是，Linq to Entities 的语义`Count()`不是 .NET 的语义，而是底层数据源的语义（在某种程度上破坏了整个语言集成方面，但是哦……）。我不认为这会导致像你这样的问题，但你永远不知道。

包含更多详细信息的 MSDN 链接：http: [//msdn.microsoft.com/en-us/library/vstudio/bb738551.aspx#sectionSection5](http://msdn.microsoft.com/en-us/library/vstudio/bb738551.aspx#sectionSection5)

# php - json数组到php

> ID：13912080
> 
> 赞同：0
> 
> 时间：2012-12-17T10:12:22.080
> 
> 标签：php, json

我在 json 中有数组，但我想在 php 中打印它。我得到这个帖子：

```
[{"cartData":{"id":"dragged_567737","left":"255px","top":"71px"}},{"cartData":{"id":"dragged_757836","left":"43px","top":"73px"}}] 
```

但是当我在我的 php 文件中使用 print_r($_POST) 时，它会打印出空数组。有我的js代码：

```
jQuery('#save_project_data').click( function() {
            var array=[];
            var numItems = $('.icart').length;

            $(".icart").each(function(index) {
                var cart_id = $(this).attr("id");
                var cart_left = $(this).css("left");
                var cart_top = $(this).css("top");

                var cartData = {  
                   "id" : cart_id,                                
                   "left" : cart_left,
                   "top" : cart_top
                };
                queryStr = { "cartData" : cartData };
                array.push(queryStr);
            });

            var postData = JSON.stringify(array);
           $.ajax({
                   url  : "modules/cart_projects/saveData.php",
                   type : "POST",
                   dataType: 'json',
                   contentType: 'application/json; charset=utf-8',

                   data : postData,//{ 'data': '{"name":"chris"}' }
                   traditional: true,
                   success: function(){
                        alert("OK");
                    } 
               });
            return false;
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T10:15:08.013

PHP 原生支持使用[`json_decode()`](http://php.net/manual/en/function.json-decode.php);解码 JSON。

```
$data = json_decode($_POST['myJson']);
print_r($data); 
```

PHP`$_POST`数组是从键值对解释的，因此您需要更改 ajax 调用，如下所示，因为您的代码正在发送没有键的 post 数据。

```
data : { myJson : postData },//{ 'data': '{"name":"chris"}' } 
```

如果您像上面那样更改数据结构，您还需要删除您的`application/json; charset=utf-8`内容类型。

从[手册](http://php.net/manual/en/function.json-decode.php)：

> 采用 JSON 编码的字符串并将其转换为 PHP 变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T10:19:36.077

如果您将原始 JSON 字符串发送到 PHP，则不会填充 $_POST（因为它需要 POST 请求提交的标准 urlencoded 字符串进行解码）。您可以通过使用 postData 作为对象来解决此问题：{'json': json}，以便您获得 $_POST['json'] 中的值，或者通过读取原始响应：

```
$json_string = file_get_contents('php://input');
$struct = json_decode($json_string, true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T10:15:06.663

尝试使用 json_decode() 函数。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-17T10:14:57.320

根据[`jQuery.ajax()`](http://api.jquery.com/jQuery.ajax/)文档：

要发送到服务器的数据。如果还不是字符串，则将其转换为查询字符串。**它附加到 GET 请求的 url。**请参阅 processData 选项以防止此自动处理。对象必须是键/值对。如果 value 是一个数组，jQuery 会根据传统设置的值（如下所述）序列化具有相同键的多个值。

为了安全起见，您最好使用该[`jQuery.post()`](http://api.jquery.com/jQuery.post/)方法。

最后，我建议给`data`属性一个`object`. 这样你就可以为你的帖子数据设置一个标识符。

**Javascript**

```
{
    url: 'modules/cart_projects/saveData.php',
    data: {
        mydata: postData
    }
} 
```

**PHP**

```
$_POST['mydata']; 
```

如果您需要解码 JSON：

```
json_decode($_POST['mydata']); 
```

# c++ - 不能存储太长的 int 类型

> ID：13912086
> 
> 赞同：1
> 
> 时间：2012-12-17T10:12:55.690
> 
> 标签：c++

考虑问题：

```
It can be shown that for some powers of two in decimal format like:
2^9 = 512
2^89 = 618,970,019,642,690,137,449,562,112 
```

结果以由 1s 和 2s 组成的字符串结尾。事实上，可以证明，对于每个整数 R，都存在 2 的幂，使得 K > 0 的 2K 在其最后 R 个数字中只有 1 和 2 的字符串。

可以在下表中清楚地显示：

```
R Smallest K 2^K
1 1 2
2 9 512
3 89 ...112
4 89 ...2112 
```

使用这种技术，那么对于 1 <= R <= 10，所有最小 K 值的总和是多少？建议的解决方案：现在这个问题并不难解决。你可以简单地做 int temp = power(2, int) ，然后如果你能得到 temp 的长度，然后将它乘以

```
(100^len)-i or (10^len)-i 
```

// 我会在哪里确定你想要多少最后一位数字。

现在这个**temp = power(2,int) 随着 int 的增加而变得更高，你甚至不能将它存储在 int 类型甚至 long int** .... 那么该怎么办。还有其他基于位串的解决方案吗？我想这可能会使这个问题变得容易。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T10:21:17.397

不，我怀疑是否有任何基于“位串”的解决方案。那将是非常低效的。但是有像[GMP](http://gmplib.org/)这样的 Bignum 库，它的特点是变量类型要么是比 int 类型大得多的固定大小，要么是仅受内存容量限制的任意大小，加上匹配的数学运算集，其工作方式类似于软件 FPU 仿真。

引用后[引用](http://gmplib.org/manual/C_002b_002b-Interface-General.html)一个小的释义。

```
 #include <gmpxx.h>

 int
 main (void)
 {
   mpz_class a, b, c;

   a = 1234;
   b = "-5676739826856836954375492356569366529629568926519085610160816539856926459237598";
   c = a+b;
   cout << "sum is " << c << "\n";
   cout << "absolute value is " << abs(c) << "\n";

   return 0;
 } 
```

由于 C++ 运算符重载，它比 ANSI C 版本更易于使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T10:34:58.753

由于您只对`n`结果的最低有效数字感兴趣，因此您可以尝试设计一种仅计算这些数字的算法。根据[书面乘法的标准算法，](http://en.wikipedia.org/wiki/Multiplication_algorithm#Long_multiplication)您可以看到乘积的`n`最低有效数字完全由`n`被乘数的最低有效数字决定。基于此，应该可以创建一个算法来计算尽可能多的`R^K`数字`long int`。

您可能会遇到的唯一问题是，可能有以匹配序列结尾的数字比 a`long int`可以容纳的更长。在这种情况下，您仍然可以使用自己的算法或库来计算额外的数字。

请注意，这与大数字库所做的基本相同，只是您的方法可能更有效，因为您计算的数字更少，您不太可能需要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T10:18:42.913

试试 GMP，[http](http://gmplib.org/)
://gmplib.org/ 如果它适合内存，它可以存储任意大小的数字。
尽管如此，使用较少的蛮力方法可能会更好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T10:19:59.607

您可以将二进制字符串存储在 std::bitset 或 std::vector [www.cplusplus.com/reference/bitset/bitset/](http://www.cplusplus.com/reference/bitset/bitset/)

我认为 bitset 是你的选择。

对 2 的幂的运算使用大算术虽然不是

# c++ - 从 C/C++ 程序调用 OpenOffice 拼写/语法检查

> ID：13912089
> 
> 赞同：1
> 
> 时间：2012-12-17T10:13:00.687
> 
> 标签：c++, c, spell-checking, openoffice.org

问题如下：我正在编写一个蛮力解密器来破解一些超级机密代码（这是一场竞赛，而不是犯罪），结果证明这是不可能的：树中需要搜索的节点太多。为了克服这个问题，我认为检查中间“解决方案”以查看它们是否产生（部分）句子可能会有所帮助。例如，我可能会得到类似的信息：“jvabaosajbgasgav...”或“lookslikeitsworking....”。第一个显然是胡言乱语，在这种情况下继续破解代码没有任何意义。第二个很容易被肉眼识别为有效的英语句子。

我不打算编写自己的拼写/语法检查器，所以我认为可以从 OpenOffice 或 LibreOffice 等开源项目调用拼写检查器。我查看了 openoffice.org 网站，但我真的不知道下一步该做什么。比如，我怎样才能链接到他们的图书馆？SDK中有这些库吗？我可以使用哪些功能？

我正在编写的程序是纯 C 语言，所以我可能需要编写一个包装器来调用他们的 C++ 成员函数，对吧？

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T10:50:21.167

我相信你会更成功地集成一些考虑到这种集成的东西，比如[Aspell 库](http://aspell.net/)。

# java - Java 运行时环境检测到致命错误：SIGSEGV (0xb) at pc=0x00002b2f7e9b2744, pid=28778, tid=1138739520

> ID：13912090
> 
> 赞同：17
> 
> 时间：2012-12-17T10:13:05.690
> 
> 标签：java, jakarta-ee, garbage-collection, jvm, glassfish-3

执行程序时出现以下错误。

这并不总是发生。该代码包含一些具有大量数据的复杂计算。

有人可以帮助识别错误吗

```
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  SIGSEGV (0xb) at pc=0x00002b2f7e9b2744, pid=28778, tid=1138739520
#
# JRE version: 7.0-b147
# Java VM: Java HotSpot(TM) 64-Bit Server VM (21.0-b17 mixed mode linux-amd64 compressed oops)
# Problematic frame:
# V  [libjvm.so+0x64e744]  PhaseIdealLoop::clone_loop(IdealLoopTree*, Node_List&, int, Node*)+0xe34
#
# Failed to write core dump. Core dumps have been disabled. To enable core dumping, try "ulimit -c unlimited" before starting Java again
#
# If you would like to submit a bug report, please visit:
#   http://bugreport.sun.com/bugreport/crash.jsp
#

---------------  T H R E A D  ---------------

Current thread (0x00002aaab4198000):  JavaThread "C2 CompilerThread0" daemon [_thread_in_native, id=28799, stack(0x0000000043cfc000,0x0000000043dfd000)]

siginfo:si_signo=SIGSEGV: si_errno=0, si_code=1 (SEGV_MAPERR), si_addr=0x0000000000000008

Registers:
RAX=0x0000000000000000, RBX=0x000000000f2793a0, RCX=0x0000000000004000, RDX=0x0000000000000000
RSP=0x0000000043df8050, RBP=0x0000000043df8170, RSI=0x00002aaab727e610, RDI=0x00002aaab6020d70
R8 =0x00002aaab5ff7519, R9 =0x0000000000004000, R10=0x00002aaab72266c0, R11=0x00002aaab5fe9140
R12=0x00002aaab4d3f7c0, R13=0x0000000000000002, R14=0x000000000c5f76d0, R15=0x0000000043df9bc0
RIP=0x00002b2f7e9b2744, EFLAGS=0x0000000000010202, CSGSFS=0x0000000000000033, ERR=0x0000000000000004
  TRAPNO=0x000000000000000e

Top of Stack: (sp=0x0000000043df8050)
0x0000000043df8050:   00002aaab4d41ea0 0000000043df8120
0x0000000043df8060:   0000000043df8120 0000000000000000
0x0000000043df8070:   0000020043df80a0 0000000043df86e0
0x0000000043df8080:   00002aaab6020d70 00002aaab419c020
0x0000000043df8090:   000038d443df9bc0 0000000000000000
0x0000000043df80a0:   0000000000000000 0000000000000000
0x0000000043df80b0:   00002aaab4d40d78 00002aaab6020d70
0x0000000043df80c0:   00002aaab4d41638 0000020ab4801e80
0x0000000043df80d0:   00002aaab5ff6d18 00002aaab5ff4aa8
0x0000000043df80e0:   00002aaab4d40df8 0000000043df9be0
0x0000000043df80f0:   00002aaab5ff6d20 0000000000000010
0x0000000043df8100:   0000000043df9be0 00002aaab4d41678
0x0000000043df8110:   0000002d0000002d 000002010000002c
0x0000000043df8120:   00002aaab419c020 00002aaa00000008
0x0000000043df8130:   00002aaab5fe9140 00002b2f00000003
0x0000000043df8140:   00002aaab4ff9448 0000000043df9bc0
0x0000000043df8150:   00002aaab4d3ffa8 00002aaab4d3ff40
0x0000000043df8160:   00002aaab4d3fe70 00002aaab4ff9580
0x0000000043df8170:   0000000043df8250 00002b2f7e996ea5
0x0000000043df8180:   0000000043df9be0 01000001c018ba10
0x0000000043df8190:   0000000043df86e0 00002aaab6020d70
0x0000000043df81a0:   0000000043df9bc0 00002aaab4ff94f8
0x0000000043df81b0:   00002aaab4d3f6d8 00002aaab5ff70b8
0x0000000043df81c0:   000000000c5fc740 00002aaab4d3f520
0x0000000043df81d0:   7fffffff00000200 00002aaab4ff9448
0x0000000043df81e0:   00002aaab4d3f4e0 00000003b6020d70
0x0000000043df81f0:   00002aaab4d3fe30 0000000043df9be0
0x0000000043df8200:   000000000b77a070 00002aaab4d3fd48
0x0000000043df8210:   00002aaab4d3fa38 00000001b5ff7500
0x0000000043df8220:   0000000043df86e0 00002aaab6020d70
0x0000000043df8230:   00002aaab4ff9580 0000000043df9bc0
0x0000000043df8240:   0000000043df86e0 0000000000000001 

Instructions: (pc=0x00002b2f7e9b2744)
0x00002b2f7e9b2724:   ff ff 66 2e 0f 1f 84 00 00 00 00 00 89 c0 48 8d
0x00002b2f7e9b2734:   34 c5 00 00 00 00 49 03 b7 e0 09 00 00 48 8b 16
0x00002b2f7e9b2744:   48 8b 42 08 48 83 38 00 75 2b 41 8b 4f 28 66 0f
0x00002b2f7e9b2754:   1f 44 00 00 8b 42 28 31 d2 39 c8 73 0e 89 c2 49 

Register to memory mapping:

RAX=0x0000000000000000 is an unknown value
RBX=0x000000000f2793a0 is an unknown value
RCX=0x0000000000004000 is an unknown value
RDX=0x0000000000000000 is an unknown value
RSP=0x0000000043df8050 is pointing into the stack for thread: 0x00002aaab4198000
RBP=0x0000000043df8170 is pointing into the stack for thread: 0x00002aaab4198000
RSI=0x00002aaab727e610 is an unknown value
RDI=0x00002aaab6020d70 is an unknown value
R8 =0x00002aaab5ff7519 is an unknown value
R9 =0x0000000000004000 is an unknown value
R10=0x00002aaab72266c0 is an unknown value
R11=0x00002aaab5fe9140 is an unknown value
R12=0x00002aaab4d3f7c0 is an unknown value
R13=0x0000000000000002 is an unknown value
R14=0x000000000c5f76d0 is an unknown value
R15=0x0000000043df9bc0 is pointing into the stack for thread: 0x00002aaab4198000

Stack: [0x0000000043cfc000,0x0000000043dfd000],  sp=0x0000000043df8050,  free space=1008k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [libjvm.so+0x64e744]  PhaseIdealLoop::clone_loop(IdealLoopTree*, Node_List&, int, Node*)+0xe34
V  [libjvm.so+0x632ea5]  PhaseIdealLoop::do_unroll(IdealLoopTree*, Node_List&, bool)+0x645
V  [libjvm.so+0x6382c9]  IdealLoopTree::iteration_split_impl(PhaseIdealLoop*, Node_List&)+0x4b9
V  [libjvm.so+0x638468]  IdealLoopTree::iteration_split(PhaseIdealLoop*, Node_List&)+0x148
V  [libjvm.so+0x638418]  IdealLoopTree::iteration_split(PhaseIdealLoop*, Node_List&)+0xf8
V  [libjvm.so+0x638418]  IdealLoopTree::iteration_split(PhaseIdealLoop*, Node_List&)+0xf8
V  [libjvm.so+0x638418]  IdealLoopTree::iteration_split(PhaseIdealLoop*, Node_List&)+0xf8
V  [libjvm.so+0x638418]  IdealLoopTree::iteration_split(PhaseIdealLoop*, Node_List&)+0xf8
V  [libjvm.so+0x638418]  IdealLoopTree::iteration_split(PhaseIdealLoop*, Node_List&)+0xf8
V  [libjvm.so+0x638418]  IdealLoopTree::iteration_split(PhaseIdealLoop*, Node_List&)+0xf8
V  [libjvm.so+0x645e3c]  PhaseIdealLoop::build_and_optimize(bool)+0x90c
V  [libjvm.so+0x39c36e]  Compile::Optimize()+0x43e
V  [libjvm.so+0x39d96c]  Compile::Compile(ciEnv*, C2Compiler*, ciMethod*, int, bool, bool)+0xdac
V  [libjvm.so+0x312042]  C2Compiler::compile_method(ciEnv*, ciMethod*, int)+0x142
V  [libjvm.so+0x3a2cad]  CompileBroker::invoke_compiler_on_method(CompileTask*)+0x2ed
V  [libjvm.so+0x3a35dd]  CompileBroker::compiler_thread_loop()+0x43d
V  [libjvm.so+0x80d79a]  JavaThread::run()+0x17a
V  [libjvm.so+0x6f84b0]  java_start(Thread*)+0x100

Current CompileTask:
C2: 768101 3793   !         fmi.common.utils.PortfolioEvaluator::CalculateMaxDrawDown (666 bytes)

---------------  P R O C E S S  ---------------

Java Threads: ( => current thread )
  0x000000000d858800 JavaThread "Keep-Alive-Timer" daemon [_thread_blocked, id=3547, stack(0x0000000055336000,0x0000000055837000)]
  0x000000000c858800 JavaThread "log-rotation-timer" [_thread_blocked, id=29237, stack(0x0000000049a11000,0x0000000049f12000)]
  0x00002aaab9c97800 JavaThread "Thread-54" daemon [_thread_in_native, id=29089, stack(0x000000004bd18000,0x000000004c219000)]
  0x00002aaab8d6b000 JavaThread "Thread-51" daemon [_thread_blocked, id=29052, stack(0x000000004c71a000,0x000000004cc1b000)]
  0x000000000e630000 JavaThread "http-thread-pool-443(5)" daemon [_thread_blocked, id=28901, stack(0x000000004900f000,0x0000000049510000)]
  0x000000000e62f000 JavaThread "http-thread-pool-443(4)" daemon [_thread_in_native, id=28900, stack(0x000000004ea21000,0x000000004ef22000)]
  0x000000000e62e800 JavaThread "http-thread-pool-443(3)" daemon [_thread_in_Java, id=28899, stack(0x0000000049510000,0x0000000049a11000)]
  0x000000000f461000 JavaThread "http-thread-pool-443(2)" daemon [_thread_blocked, id=28898, stack(0x0000000051229000,0x000000005172a000)]
  0x000000000e21b800 JavaThread "http-thread-pool-443(1)" daemon [_thread_in_native, id=28897, stack(0x0000000053f32000,0x0000000054433000)]
  0x00002aaac1de5800 JavaThread "pool-7-thread-1" [_thread_blocked, id=28892, stack(0x0000000054e35000,0x0000000055336000)]
  0x00002aaab98f2000 JavaThread "SCR Component Actor" daemon [_thread_blocked, id=28890, stack(0x000000004f924000,0x000000004fe25000)]
  0x00002aaab9d72800 JavaThread "fileinstall-/var/glassfish/domains/domain1/autodeploy/bundles/" daemon [_thread_blocked, id=28889, stack(0x0000000054433000,0x0000000054934000)]
  0x00002aaab5d66800 JavaThread "RMI RenewClean-[127.0.0.1:8686]" daemon [_thread_blocked, id=28887, stack(0x0000000053a31000,0x0000000053f32000)]
  0x00002aaab9220000 JavaThread "Configuration Updater" daemon [_thread_blocked, id=28886, stack(0x0000000053530000,0x0000000053a31000)]
  0x00002aaab9ed3800 JavaThread "RMI Scheduler(0)" daemon [_thread_blocked, id=28885, stack(0x000000005302f000,0x0000000053530000)]
  0x00002aaab8d74000 JavaThread "http-thread-pool-80(5)" daemon [_thread_blocked, id=28884, stack(0x0000000052b2e000,0x000000005302f000)]
  0x00002aaaba5d9800 JavaThread "http-thread-pool-80(4)" daemon [_thread_blocked, id=28883, stack(0x000000005262d000,0x0000000052b2e000)]
  0x00002aaaba5d8800 JavaThread "http-thread-pool-80(3)" daemon [_thread_blocked, id=28882, stack(0x000000005212c000,0x000000005262d000)]
  0x00002aaab9497000 JavaThread "http-thread-pool-80(2)" daemon [_thread_blocked, id=28881, stack(0x0000000051c2b000,0x000000005212c000)]
  0x00002aaab9496000 JavaThread "http-thread-pool-80(1)" daemon [_thread_blocked, id=28880, stack(0x000000005172a000,0x0000000051c2b000)]
  0x00002aaab8976800 JavaThread "GC Daemon" daemon [_thread_blocked, id=28878, stack(0x0000000050d28000,0x0000000051229000)]
  0x00002aaab8e75000 JavaThread "RMI Reaper" [_thread_blocked, id=28877, stack(0x0000000050827000,0x0000000050d28000)]
  0x000000000ec1b000 JavaThread "RMI TCP Accept-8686" daemon [_thread_in_native, id=28876, stack(0x0000000050326000,0x0000000050827000)]
  0x000000000b4e8800 JavaThread "DestroyJavaVM" [_thread_blocked, id=28782, stack(0x00000000402e5000,0x00000000407e6000)]
  0x000000000ee68800 JavaThread "GlassFish Kernel Main Thread" [_thread_blocked, id=28875, stack(0x000000004fe25000,0x0000000050326000)]
  0x00002aaac1dc8000 JavaThread "AutoDeployer" daemon [_thread_blocked, id=28873, stack(0x000000004f423000,0x000000004f924000)]
  0x00002aaac1104800 JavaThread "DynamicReloader" daemon [_thread_blocked, id=28872, stack(0x000000004ef22000,0x000000004f423000)]
  0x00002aaab6288000 JavaThread "ContainerBackgroundProcessor[StandardEngine[glassfish-web].StandardHost[server].StandardContext[/app.ui.pages]]" daemon [_thread_blocked, id=28869, stack(0x000000004e520000,0x000000004ea21000)]
  0x00002aaab8f1d800 JavaThread "MySQL Statement Cancellation Timer" daemon [_thread_blocked, id=28868, stack(0x000000004e01f000,0x000000004e520000)]
  0x00002aaabb002000 JavaThread "Thread-33" daemon [_thread_blocked, id=28867, stack(0x000000004db1e000,0x000000004e01f000)]
  0x00002aaab6295800 JavaThread "Thread-32" daemon [_thread_blocked, id=28866, stack(0x000000004d61d000,0x000000004db1e000)]
  0x000000000e6ea000 JavaThread "Listener@12172012_012638@56" daemon [_thread_blocked, id=28865, stack(0x000000004d11c000,0x000000004d61d000)]
  0x000000000ee22000 JavaThread "Thread-31" daemon [_thread_blocked, id=28864, stack(0x000000004cc1b000,0x000000004d11c000)]
  0x00002aaab623b000 JavaThread "Java2D Disposer" daemon [_thread_blocked, id=28862, stack(0x000000004c219000,0x000000004c71a000)]
  0x00002aaab5064800 JavaThread "deployment-jar-scanner" daemon [_thread_blocked, id=28848, stack(0x000000004b817000,0x000000004bd18000)]
  0x00002aaab7545800 JavaThread "deployment-jar-scanner" daemon [_thread_blocked, id=28847, stack(0x000000004b316000,0x000000004b817000)]
  0x000000000d00a800 JavaThread "deployment-jar-scanner" daemon [_thread_blocked, id=28846, stack(0x000000004ae15000,0x000000004b316000)]
  0x00002aaab7476800 JavaThread "ContainerBackgroundProcessor[StandardEngine[glassfish-web].StandardHost[server].StandardContext[/hello]]" daemon [_thread_blocked, id=28845, stack(0x000000004a914000,0x000000004ae15000)]
  0x00002aaab8c7a800 JavaThread "ContainerBackgroundProcessor[StandardEngine[glassfish-web]]" daemon [_thread_blocked, id=28824, stack(0x000000004a413000,0x000000004a914000)]
  0x00002aaab899d800 JavaThread "deployment-jar-scanner" daemon [_thread_blocked, id=28823, stack(0x0000000049f12000,0x000000004a413000)]
  0x000000000c57f800 JavaThread "transaction-manager" daemon [_thread_blocked, id=28819, stack(0x0000000048b0e000,0x000000004900f000)]
  0x000000000cfe0800 JavaThread "Grizzly-kernel-thread(1)" daemon [_thread_in_native, id=28818, stack(0x000000004860d000,0x0000000048b0e000)]
  0x00002aaab4343000 JavaThread "Thread-21" [_thread_blocked, id=28817, stack(0x000000004810c000,0x000000004860d000)]
  0x000000000cfdf000 JavaThread "Grizzly-kernel-thread(1)" daemon [_thread_in_native, id=28816, stack(0x0000000047c0b000,0x000000004810c000)]
  0x00002aaab4715800 JavaThread "Thread-18" [_thread_blocked, id=28815, stack(0x000000004770a000,0x0000000047c0b000)]
  0x000000000cfe1800 JavaThread "Grizzly-kernel-thread(1)" daemon [_thread_in_native, id=28814, stack(0x0000000047209000,0x000000004770a000)]
  0x000000000c88b000 JavaThread "Grizzly-kernel-thread(1)" daemon [_thread_in_native, id=28813, stack(0x0000000046d08000,0x0000000047209000)]
  0x00002aaab897e000 JavaThread "Thread-14" [_thread_blocked, id=28812, stack(0x0000000046807000,0x0000000046d08000)]
  0x000000000ce69000 JavaThread "Grizzly-kernel-thread(1)" daemon [_thread_in_native, id=28811, stack(0x0000000046306000,0x0000000046807000)]
  0x00002aaab897d000 JavaThread "Thread-9" [_thread_blocked, id=28810, stack(0x0000000045e05000,0x0000000046306000)]
  0x000000000cb96800 JavaThread "Thread-7" [_thread_blocked, id=28809, stack(0x0000000045904000,0x0000000045e05000)]
  0x00002aaab895f800 JavaThread "Thread-5" [_thread_blocked, id=28808, stack(0x0000000045403000,0x0000000045904000)]
  0x00002aaab8969000 JavaThread "pool-1-thread-1" daemon [_thread_blocked, id=28807, stack(0x0000000044f02000,0x0000000045403000)]
  0x00002aaab8641000 JavaThread "FelixStartLevel" daemon [_thread_blocked, id=28806, stack(0x0000000044500000,0x0000000044a01000)]
  0x000000000beff000 JavaThread "FelixDispatchQueue" daemon [_thread_blocked, id=28805, stack(0x0000000044a01000,0x0000000044f02000)]
  0x00002aaab419f800 JavaThread "Service Thread" daemon [_thread_blocked, id=28801, stack(0x0000000043efe000,0x00000000443ff000)]
  0x00002aaab419d800 JavaThread "C2 CompilerThread1" daemon [_thread_blocked, id=28800, stack(0x0000000043dfd000,0x0000000043efe000)]
=>0x00002aaab4198000 JavaThread "C2 CompilerThread0" daemon [_thread_in_native, id=28799, stack(0x0000000043cfc000,0x0000000043dfd000)]
  0x00002aaab40ee000 JavaThread "MultiThreadedHttpConnectionManager cleanup" daemon [_thread_blocked, id=28796, stack(0x00000000437fb000,0x0000000043cfc000)]
  0x00002aaab4003800 JavaThread "AD Thread Pool-Global1" daemon [_thread_blocked, id=28795, stack(0x00000000432fa000,0x00000000437fb000)]
  0x00002aaab400d800 JavaThread "AD Thread Pool-Global0" daemon [_thread_blocked, id=28794, stack(0x0000000042df9000,0x00000000432fa000)]
  0x000000000b88e000 JavaThread "AD Thread-Metric Reporter0" daemon [_thread_blocked, id=28793, stack(0x00000000428f8000,0x0000000042df9000)]
  0x000000000b857000 JavaThread "AD Thread-Config Poller" daemon [_thread_blocked, id=28792, stack(0x00000000415ec000,0x0000000041aed000)]
  0x000000000b7b3800 JavaThread "Thread-0" daemon [_thread_blocked, id=28791, stack(0x00000000410eb000,0x00000000415ec000)]
  0x000000000b5ef000 JavaThread "Signal Dispatcher" daemon [_thread_blocked, id=28790, stack(0x0000000040bea000,0x00000000410eb000)]
  0x000000000b5a0000 JavaThread "Finalizer" daemon [_thread_blocked, id=28789, stack(0x00000000423f7000,0x00000000428f8000)]
  0x000000000b59e000 JavaThread "Reference Handler" daemon [_thread_blocked, id=28788, stack(0x0000000041ef6000,0x00000000423f7000)]

Other Threads:
  0x000000000b596000 VMThread [stack: 0x0000000040070000,0x0000000040171000] [id=28787]
  0x00002aaab41a4000 WatcherThread [stack: 0x00000000443ff000,0x0000000044500000] [id=28803]

VM state:not at safepoint (normal execution)

VM Mutex/Monitor currently owned by a thread: None

Heap
 PSYoungGen      total 937216K, used 6414K [0x00000007a2400000, 0x00000007e0c00000, 0x0000000800000000)
  eden space 845888K, 0% used [0x00000007a2400000,0x00000007a2a43ad8,0x00000007d5e10000)
  from space 91328K, 0% used [0x00000007db2d0000,0x00000007db2d0000,0x00000007e0c00000)
  to   space 86784K, 0% used [0x00000007d5e10000,0x00000007d5e10000,0x00000007db2d0000)
 PSOldGen        total 912576K, used 467925K [0x0000000718c00000, 0x0000000750730000, 0x00000007a2400000)
  object space 912576K, 51% used [0x0000000718c00000,0x00000007354f55a0,0x0000000750730000)
 PSPermGen       total 94720K, used 94326K [0x00000006e6c00000, 0x00000006ec880000, 0x0000000718c00000)
  object space 94720K, 99% used [0x00000006e6c00000,0x00000006ec81d9b0,0x00000006ec880000)

Code Cache  [0x00002aaaaeb21000, 0x00002aaaaf8c1000, 0x00002aaab1b21000)
 total_blobs=4170 nmethods=3358 adapters=762 free_code_cache=35382Kb largest_free_block=36057856

Memory: 4k page, physical 4043424k(265500k free), swap 4095992k(2992388k free)

vm_info: Java HotSpot(TM) 64-Bit Server VM (21.0-b17) for linux-amd64 JRE (1.7.0-b147), built on Jun 27 2011 01:30:59 by "java_re" with gcc 4.3.0 20080428 (Red Hat 4.3.0-8)

time: Mon Dec 17 01:39:09 2012
elapsed time: 768 seconds 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T11:56:20.010

这可以通过添加 -XX:-UseLoopPredicate [http://java.dzone.com/articles/dont-use-java-7-are-you来解决](http://java.dzone.com/articles/dont-use-java-7-are-you)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T10:24:22.213

这表明 JVM 本身存在错误。

首先，你需要绝对确定你的硬件——尤其是你的内存——是正常的。运行 memcheck 进行查找（最简单的方法可能是在 Ubuntu 安装媒体上启动，然后从启动菜单中选择它）。

修复发现的任何硬件问题。

如果问题仍然存在，请确保您正在运行您正在使用的 Java 发行版的最新版本。如果您运行 OpenJDK，请考虑下载 Oracle 版本，反之亦然。如果您不需要 64 位，请考虑使用 32 位 JVM。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T10:18:55.740

[此链接](http://weblogs.java.net/blog/kohsuke/archive/2009/02/crash_course_on.html)在诊断故障转储时非常有用。但是，如果您不使用本机代码，我建议您升级（甚至降级）您的 JVM 以避免此问题。这通常是解决此类问题的最快方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-13T15:01:47.400

崩溃发生在 jvm JIT 编译器中。您可以尝试关闭编译器以查看它是否有助于诊断问题。使用 -Xint 选项。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-27T10:09:02.507

我提到了这个链接： [https ://askubuntu.com/questions/396525/eclipse-crashing-on-startup](https://askubuntu.com/questions/396525/eclipse-crashing-on-startup)

它说：

要解决此问题，请尝试将这一行（与 -Dorg 略有不同...）：

*org.eclipse.swt.browser.DefaultType=mozilla*

在这个文件的末尾

日食/配置/config.ini

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-08-21T00:26:07.057

我有一个类似的案例，我可以修复从 Oracle SDK 到 OpenSDK 的更改，并验证您的库是否与您的 java 版本兼容

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-04-26T07:39:23.623

你的JVM可能没有问题； 如果你在Java代码中使用了native代码，你应该确认Java函数的参数列表和你的native函数是一致的。

# android - java.lang.NullPointerException on Bundle extras = data.getExtras();

> ID：13912095
> 
> 赞同：4
> 
> 时间：2012-12-17T10:13:27.080
> 
> 标签：android, android-intent, nullpointerexception, bundle, extras

我正在尝试捕获图像并将其保存在画廊中。为此在 onCreate 我的代码

```
 Intent intent = new Intent("android.media.action.IMAGE_CAPTURE");
    File photo = new File(Environment.getExternalStorageDirectory(), "Pic.jpg");
    imageUri = Uri.fromFile(photo);
    intent.putExtra(MediaStore.EXTRA_OUTPUT, imageUri);
    startActivityForResult(intent, TAKE_PICTURE); 
```

和

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    if (resultCode == RESULT_OK && requestCode == TAKE_PICTURE) {
        Log.v("data", "data: " + data);
        Bundle extras = data.getExtras();
        if (extras.containsKey("data")) {
            bitmap = (Bitmap) extras.get("data");
            // ByteArrayOutputStream baos = new ByteArrayOutputStream();
            // bmp.compress(Bitmap.CompressFormat.PNG, 100, baos);
            // byte[] image = baos.toByteArray();
            if (bitmap != null) {
                // BitmapFactory.Options options = new
                // BitmapFactory.Options();
                // options.inSampleSize = 5;
                // Bitmap myImage = BitmapFactory.decodeByteArray(image, 0,
                // image.length, options);
                imageView.setImageBitmap(bitmap);
            }
        } else {
            Toast.makeText(getBaseContext(), "Please capture again", Toast.LENGTH_LONG).show();
        }
        showPopUpForUpload();
    }
} 
```

现在我可以捕捉图像，但之后我得到了错误

```
12-17 15:28:56.090: E/AndroidRuntime(4684): FATAL EXCEPTION: main
12-17 15:28:56.090: E/AndroidRuntime(4684): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1888, result=-1, data=null} to activity {com.example.fashiongirl/com.example.fashiongirl.HomeActivity}: java.lang.NullPointerException
12-17 15:28:56.090: E/AndroidRuntime(4684):     at android.app.ActivityThread.deliverResults(ActivityThread.java:2744)
12-17 15:28:56.090: E/AndroidRuntime(4684):     at android.app.ActivityThread.handleSendResult(ActivityThread.java:2787)
12-17 15:28:56.090: E/AndroidRuntime(4684):     at android.app.ActivityThread.access$2000(ActivityThread.java:122)
12-17 15:28:56.090: E/AndroidRuntime(4684):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1032)
12-17 15:28:56.090: E/AndroidRuntime(4684):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-17 15:28:56.090: E/AndroidRuntime(4684):     at android.os.Looper.loop(Looper.java:132)
12-17 15:28:56.090: E/AndroidRuntime(4684):     at android.app.ActivityThread.main(ActivityThread.java:4025)
12-17 15:28:56.090: E/AndroidRuntime(4684):     at java.lang.reflect.Method.invokeNative(Native Method)
12-17 15:28:56.090: E/AndroidRuntime(4684):     at java.lang.reflect.Method.invoke(Method.java:491)
12-17 15:28:56.090: E/AndroidRuntime(4684):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
12-17 15:28:56.090: E/AndroidRuntime(4684):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
12-17 15:28:56.090: E/AndroidRuntime(4684):     at dalvik.system.NativeStart.main(Native Method)
12-17 15:28:56.090: E/AndroidRuntime(4684): Caused by: java.lang.NullPointerException
12-17 15:28:56.090: E/AndroidRuntime(4684):     at com.example.fashiongirl.HomeActivity.onActivityResult(HomeActivity.java:47)
12-17 15:28:56.090: E/AndroidRuntime(4684):     at android.app.Activity.dispatchActivityResult(Activity.java:4541)
12-17 15:28:56.090: E/AndroidRuntime(4684):     at android.app.ActivityThread.deliverResults(ActivityThread.java:2740)
12-17 15:28:56.090: E/AndroidRuntime(4684):     ... 11 more 
```

空指针异常上线

```
Bundle extras = data.getExtras(); 
```

那么问题是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T10:18:52.400

我认为这是**Android 4.0 + 版本**的问题。

只是尝试删除，

```
File photo = new File(Environment.getExternalStorageDirectory(), "Pic.jpg");
imageUri = Uri.fromFile(photo);
intent.putExtra(MediaStore.EXTRA_OUTPUT, imageUri); 
```

当您调用捕获意图时。现在你的结果包`onActivityResult()`不是`NULL`.

实际上，当您`MediaStore.EXTRA_OUTPUT`向相机意图提供参数时，相机应用程序不会使用捆绑数据进行回调。（我在 Android 4.0 + 中发现了这个问题）

您必须从设置为`MediaStore.EXTRA_OUTPUT`参数的 Uri 获取图像文件。

**更新：**

或者使用下面`pathFromUri()`的方法并传递您设置为相机意图的 Uri 并获取真实文件路径，现在您不必使用`Bundle extras = data.getExtras();`

```
private String pathFromUri(Uri imageUri) {
    String[] filePathColumn = { MediaStore.Images.Media.DATA };
    Cursor cursor = getContentResolver().query(imageUri, filePathColumn,
                null, null, null);
    cursor.moveToFirst();
    int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
    String filePath = cursor.getString(columnIndex);
    return filePath ;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T10:22:24.393

它为我工作：-----以这种方式尝试

```
 @Override
  protected void onActivityResult(int requestCode, int resultCode,
        final Intent intent) {
    super.onActivityResult(requestCode, resultCode, intent);

    switch (requestCode) {
    case 1:
        if (resultCode == RESULT_OK) {

                try {
                            Uri selectedImage = intent.getData();
                            bmpSelectedImage = getThumbnail(selectedImage);
                            set_img_camera.setImageBitmap(bmpSelectedImage);

                        } catch (IOException e) {

                            e.printStackTrace();
                        }

        }

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-27T10:21:59.980

这是我的解决方案：

```
 Bitmap photo=null;
            File file = getTempFile(this);
            try {
                 photo = Media.getBitmap(getContentResolver(), Uri.fromFile(file) );

                } catch (FileNotFoundException e) {
                  e.printStackTrace();
                } catch (IOException e) {
                  e.printStackTrace();
                }

            if (photo == null) // for newest android version +-4.0
            {
                Uri selectedImage = data.getData();
                photo = Media.getBitmap(this.getContentResolver(),
                        selectedImage);
            } 
```

和

```
private File getTempFile(Context context) 
    final File path = new File(Environment.getExternalStorageDirectory(),
            context.getPackageName());
    if (!path.exists()) {
        path.mkdir();
    }
    return new File(path, "image.tmp");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-04T12:52:14.453

只需检查“数据”是否为空。如果它为空，你应该跳过代码，否则会导致你的应用程序崩溃

```
if(data != null){    
        Bundle extras = data.getExtras();
                if (extras.containsKey("data")) {
                    bitmap = (Bitmap) extras.get("data");
                    // ByteArrayOutputStream baos = new ByteArrayOutputStream();
                    // bmp.compress(Bitmap.CompressFormat.PNG, 100, baos);
                    // byte[] image = baos.toByteArray();
                    if (bitmap != null) {
                        // BitmapFactory.Options options = new
                        // BitmapFactory.Options();
                        // options.inSampleSize = 5;
                        // Bitmap myImage = BitmapFactory.decodeByteArray(image, 0,
                        // image.length, options);
                        imageView.setImageBitmap(bitmap);
                    }
                } else {
                    Toast.makeText(getBaseContext(), "Please capture again", Toast.LENGTH_LONG).show();
                }
                showPopUpForUpload();
    } 
```

# objective-c - 如何通过 ios 中更改的地图缩放级别更改 MKCircle 半径

> ID：13912101
> 
> 赞同：3
> 
> 时间：2012-12-17T10:13:44.390
> 
> 标签：objective-c, ios, cocoa, mkmapview

我有一个地图视图应用程序，并使用`MKCircle`.

默认圆被设置为半径，这意味着当改变地图视图时，圆会变大或变小。

我不想要这个。我想保持大小，所以我想我需要在缩放级别改变时改变半径。

我是否需要这样做

```
- (void)drawMapRect:(MKMapRect)mapRect zoomScale:(MKZoomScale)zoomScale inContext:(CGContextRef)context 
```

有谁知道如何做到这一点？

# objective-c - 将方法的 IMP 保存到数据中？

> ID：13912102
> 
> 赞同：0
> 
> 时间：2012-12-17T10:13:45.437
> 
> 标签：objective-c, ios, function, methods

我可以通过以下方式获得方法的实现：

```
IMP imp = [self methodForSelector:@selector(foo)]; 
```

我知道 IMP 基本上是一个函数指针。
那么我可以得到指向的代码吗？意味着用 NSData 或 char* 或其他东西保存它。
然后我可以保存程序并从文件中动态重新加载它。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T10:25:37.207

您需要仔细考虑您想在这里做什么，并告诉我们您的动机。您是正确的，选择器本质上是一个函数指针。您可以复制用于对构成函数的指令进行编码的字节，但这样做对您没有什么好处。

粗心地重新定位一个函数可能不会让它正确执行。例如，假设您的函数中有一个相对分支到达您复制的代码之外。目标地址是根据当前`pc`（程序计数器）的值解析/计算的，如果您只是复制代码，将无法正确解析。

# php - 更改数据库值

> ID：13912104
> 
> 赞同：-5
> 
> 时间：2012-12-17T10:13:53.873
> 
> 标签：php, javascript, html, ajax

我想更改我的数据库中的一些值，按下我页面上的图片，使用 javascript 和 AJAX。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T10:55:41.377

您可以使用 xmlhttprequest 和 javascript ：

```
var xhr = new XMLHttpRequest(); // Create new XHR
var url = 'http://sample.com/change.php'; // The url
var data = 'data=sample&back=come';
xhr.open('POST', url, true); // POST is method you can with `POST|GET`
xhr.send(data); 
```

或者使用 jquery 可以更简单

```
var url = 'http://sample.com/change.php'; // The url
var data = 'data=sample&back=come';
$.post(url,data,function(callback){
  alert(callback);
}); 
```

并确保将其绑定在您的图像上：

```
$("img").click(function(){
    var url = 'http://sample.com/change.php'; // The url
    var data = 'data=sample&back=come';
    $.post(url,data,function(callback){
     alert(callback);
    });
}); 
```

然后是php文件：

```
<?php
$post_data = mysql_real_escape_string($_POST['data']);
$post_back = mysql_real_escape_string($_POST['back']);
$query = mysql_query("UPDATE table SET data = '".$post_data."' WHERE `back` = '".$post_back."'"); // This is a query, change it with yours
if($query){echo'Success';} //Print a success message
?> 
```

完结，祝你好运

# asp.net-mvc - ASP.Net MVC3 和 jQuery UI 选项卡

> ID：13912107
> 
> 赞同：1
> 
> 时间：2012-12-17T10:14:00.600
> 
> 标签：asp.net-mvc, asp.net-mvc-3, jquery-ui-tabs

我在下面创建了一个带有 jQ​​uery UI 选项卡的 HTML 布局所有选项卡信息都与 Employee 相关

**HTML 代码：**

```
<div id="tabs">
    <ul>
        <li><a href="#tabs-1">Details</a></li>
        <li><a href="#tabs-2">Deparment</a></li>
        <li><a href="#tabs-3">Salary Info</a></li>
    </ul>
    <div id="tabs-1">
        <p>Some fiels here</p>
    </div>
    <div id="tabs-2">
                <p>Some fiels here</p>
    </div>
    <div id="tabs-3">
                <p>Some fiels here</p>
    </div>
</div> 
```

我需要的只是我想把它保存在 MVC 页面中。

我可以在一个视图中包含所有选项卡，还是可以使用@Html.Partial？或部分视图结果？对于每个选项卡。

有时用户可能只更新部门信息。在这里，我应该只保存该选项卡信息。

**我希望所有这些选项卡都在第一次加载，而不是使用 ajax 按需加载。**

**谁能建议我如何在 MVC 中组织我的需求？**

***注意：***另外一件事是我想为添加和编辑员工使用相同的内容。在添加员工的情况下，我应该只能查看启用的基本详细信息和禁用模式的其他选项卡。用户保存基本详细信息后，其他选项卡应启用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T10:32:14.217

1.  查看碎片：
    您可以​​执行单个视图，也可以将其拆分为多个部分。在他们呈现必要的 html 之前，这并不重要。
2.  要分别保存来自每个选项卡的信息，请将每个选项卡内容包装在 中`<form />`，这样您将拥有多个表单而不是一个表单。
3.  要在提交时显示下一个选项卡，解决方案将取决于提交过程。如果您有同步 Post(Get)，那么您必须传递传递选项卡参数`Response`并依赖于响应打开 DOM 准备好的下一个选项卡（为此使用 jQuery）。否则，如果您使用 ajax 提交选项卡，则可以在处理程序中切换选项卡。

# replace - 如何删除文本文件每一行的单词后的所有内容？

> ID：13912109
> 
> 赞同：0
> 
> 时间：2012-12-17T10:14:03.390
> 
> 标签：replace, editor

我有一个看起来有点像这样的文本文件

```
356, http://linkgoeshere.com/4445555 title="The Chariot"> <br />
356, http://linkgoeshere.com/4445555 title="fddsfssfd"> <br />
356, http://linkgoeshere.com/4445555 title="T3434534535"> <br /> 
```

我只想将所有内容留给链接并删除之后的所有内容，但之后的每个部分都是唯一的，除了 title= 所以我无法查找和替换。

（顺便说一句，大约 800 行）

有什么办法可以使用编程来做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T10:23:33.147

在`Notepad++`您可以使用正则表达式查找和替换来执行此操作

*   点击菜单`Search --> Replace...`
*   在`Search Mode`选择中`Regular expression`
*   `\stitle=".*$`输入正则表达式`Find what`
*   使`Replace with`框为空
*   点击`Replace all`

在版本中测试`6.2.2`

这也应该适用于支持使用正则表达式查找和替换的其他编辑器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T10:35:40.940

*   **编辑**方式（vim）：

用vim打开你的文件，输入`:%s/ title=.$//g`你会看到结果。

事实上，任何支持正则表达式替换的编辑器都可以。

*   脚本编程：

**sed**

（注意：下面的命令将进行更改。）

```
sed -i 's/ title=.$//' file 
```

**awk**：

棘手的方式，没有正则表达式：

```
awk '{print $1,$2}' file 
```

您会在标准输出上看到输出。你可以将它重定向到一个文件`awk... >newFile`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-17T10:40:32.633

**Excel**
如果您的编辑器不支持正则表达式，请使用 Excel 将文件导入为 csv 文件（数据 -> 来自文本）并告诉 excel 使用空格作为字段分隔符。然后将前两列导出为新的 csv 文件。

# android - android中的MediaPlayer.setDisplay()

> ID：13912111
> 
> 赞同：1
> 
> 时间：2012-12-17T10:14:12.823
> 
> 标签：android

我正在使用 android 中的 MediaPlayer 类创建视频播放器。我在 MediaPlayer.setDisplay() 中设置了一个 SurfaceHolder，它成功显示了视频，但是当此活动再次恢复时，没有显示视频。那么有什么问题呢？？

**该代码是：**

```
public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.main);
        player = new MediaPlayer();
        surface = (SurfaceView)findViewById(R.id.surface);
        surface.setOnClickListener(new OnClickListener() 
        { 
            @Override
            public void onClick(View v) 
            {
                VideoDemo.this.startActivity(new Intent(VideoDemo.this, AnotherActivity.class));//Video not displayed when return from this activity by pressing back button
            }
        });
        holder = surface.getHolder();
        holder.addCallback(this);
        holder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
        try  
        {
            String songName = Environment.getExternalStorageDirectory().toString()+File.separator+"1.mp4";
            player.setDataSource(songName);
            player.prepare();
            player.start();

        }
        catch (Exception e) 
        {
            e.printStackTrace();
        }

    }
    @Override
    public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) 
    { 
        player.setDisplay(holder);      
    }
    @Override
    public void surfaceCreated(SurfaceHolder holder) 
    {
        Log.d(TAG, "surfaceCreated() is called ************ holder.getSurface() = "+holder.getSurface());
    }
    @Override
    public void surfaceDestroyed(SurfaceHolder holder) 
    {
        Log.d(TAG, "surfaceDestroyed() is called ************");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-21T10:37:50.840

我已经再次初始化媒体播放器，现在它工作正常

# mysql - 在父 SELECT 的 SELECT 语句中的引用名称上设置索引

> ID：13912118
> 
> 赞同：0
> 
> 时间：2012-12-17T10:14:34.420
> 
> 标签：mysql

我想在名为的引用上有 FULLTEXT INDEX`data`

```
SELECT `data` FROM (
   SELECT `body` as `data` FROM `table1`
   UNION
   SELECT `text` as `data` FROM `table2`
) as `search` 
```

我们假设两个带有联合的 SQL 语句从`data`选择的位置创建一个虚拟表，如何使`data`行为像全文索引以供稍后`MATCH() AGAINST()`在 top first`SELECT`语句中使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T10:39:00.367

如果您可以创建多个语句，请创建一个临时表，其中包含您需要的所有索引，插入其中然后运行您的查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T10:30:35.980

您可以为其创建视图和全文索引：[请参阅](http://msdn.microsoft.com/en-us/library/ms187317.aspx)

# iphone - 在 iPhone 中使用 StoryBoard 重置视图控制器视图

> ID：13912120
> 
> 赞同：0
> 
> 时间：2012-12-17T10:14:52.553
> 
> 标签：iphone, ios, uistoryboard

我在 StoryBoard 和它的根视图控制器中使用了一个导航控制器没有发生，因为视图已经存储了最后一个实例。
我的问题是：是否可以通过销毁最后一个视图并再次调用动画来从情节提要再次加载视图。
我不想以编程方式再次设置框架，因为对象太多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T10:29:40.773

一种解决方案是在 viewWillAppear 方法中编写动画代码。

# macos - 在 Mac 上重新实现 NSBundle loadNibNamed:owner:options:

> ID：13912121
> 
> 赞同：0
> 
> 时间：2012-12-17T10:14:54.077
> 
> 标签：macos, cocoa

我正在阅读[一篇文章，详细介绍了一种在 Objective-C 中实现自定义视图界面的一部分以及在 Interface Builder 中实现部分自定义视图的技术](http://bartlettpublishing.com/site/bartpub/blog/3/entry/327)，然后能够将自定义视图添加到另一个对象并将其类设置为预先创建的子类。

在 iOS 上，NSBundle 中有一个名为`loadNibNamed:owner:options:`. 但不幸的是，由于某些奇怪的原因，这在 OS X 上不存在。如何在 AppKit 中执行等效操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T02:06:51.707

有`[+NSBundle loadNibNamed:owner:]`，只是没有`options`。

# c# - 标签未通过界面更新

> ID：13912124
> 
> 赞同：-1
> 
> 时间：2012-12-17T10:14:58.693
> 
> 标签：c#, winforms, multithreading, interface

试图通过接口和委托从另一个线程更新我的标签。在调试模式下，它说标签属性设置为消息。但我在表格本身看不到任何东西。

在 .NET 4.0 中工作

我正在使用的一个小表示：

我的界面：

```
public interface IMessageListener
{
    void SetMessage(string message);
} 
```

我实现它的形式：

```
public partial class Form1 : Form, IMessageListener
{
...
    public void SetMessage(string message)
    {
        SetControlPropertyValue(ColoLbl, "Text", message);
    }

    delegate void SetControlValueCallback(Control oControl, string propName, object propValue);
    private void SetControlPropertyValue(Control oControl, string propName, object propValue)
    {
        if (oControl.InvokeRequired)
        {
            SetControlValueCallback d = new SetControlValueCallback(SetControlPropertyValue);
            oControl.Invoke(d, new object[] { oControl, propName, propValue });
        }
        else
        {
            Type t = oControl.GetType();
            PropertyInfo[] props = t.GetProperties();
            foreach (PropertyInfo p in props.Where(p => p.Name.ToUpper() == propName.ToUpper()))
            {
                p.SetValue(oControl, propValue, null);
            }
        }
    }
 } 
```

我尝试通过界面设置消息的类。此类正在从另一个线程运行：

```
public class Controller
{
    IMessageListener iMessageListener = new Form1();
    ...
    public void doWork()
    {
        iMessageListener.SetMessage("Show my message");
    }
 } 
```

代码编译得很好，当单步调试标签的属性确实被设置时，它只是由于某种原因没有显示在表单本身上。

我怀疑要么是我在某处遗漏了一行，要么是`Controller`类处理接口的方式导致了问题。但我无法弄清楚为什么或究竟是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T10:31:30.877

当您在代码中调用时，之前加载的`Text`属性`ColoLbl`不会更改，因为已初始化为**新**的. **它可能只在创建的新实例中发生变化**。`Form1``iMessageListener.SetMessage("Show my message");``iMessageListener` **`Form1();`**

 ****```
IMessageListener iMessageListener = new Form1(); 
```

如果您尝试更改之前初始化的`ColoLbl`值`Form1`，请不要初始化`Form1`. 相反，初始化一个`IMessageListener`指向先前创建的链接`Form1`。

**例子**

```
//myFormSettings.cs
class myFormSettings
{
    public static Form1 myForm1; //We will use this to save the Form we want to apply changes to
} 
```

```
//Form1.cs
private void Form1_Load(object sender, EventArgs e)
{
    myFormSettings.myForm1 = this; //Set myForm1(the form we will control later) to this
    Form2 X = new Form2(); //Initialize a new instance of Form2 as X which we will use to control this form from
    X.Show(); //Show X
} 
```

```
//Form2.cs
IMessageListener iMessageListener = myFormSettings.myForm1;
iMessageListener.SetMessage("Show my message"); 
```

谢谢，
我希望你觉得这有帮助:)****

# css - 两列动态布局

> ID：13912135
> 
> 赞同：0
> 
> 时间：2012-12-17T10:15:16.337
> 
> 标签：css

我有几个包含以下内容的**盒子！**

```
<div class="box">
  <div class="image">
    <img src="anything.png" /> <!-- The width is dynamic -->
  </div>
  <div class="box-text">
    <h2>Some Title</h2>
    <p>Lorem ipsum ...</p>
  </div>
</div> 
```

问题是文本在图像之后向左浮动。我希望它直接向下，因为我在下图中标记了它：

* * *

![例子](../Images/d42d3188103067aa2eed38ebecba2ad2.png)

* * *

这应该是这样的：

![在此处输入图像描述](../Images/daa556db3fd8a0a7d19d3eb579070b01.png)

我不想使用`tables`or `javascript`。我不能对 box-text 使用 margin-left，因为图像的**宽度**是**动态**的。

感谢您的贡献！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T10:27:35.810

尝试使用 display: table 作为你的 box 类， display: table-row 用于 image 和 box-text 类。然后使用 vertical-align: top on image 和 text 对齐内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T10:24:46.960

试试这个CSS：

```
.image { float: left; }
.box-text { float: left; } 
```

此外，您可能希望在`box`div 之后停止浮动元素，所以不要忘记最后进行一些清理：

```
<div style="clear:both"></div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T10:30:13.317

这是一个展示如何实现这种布局的小提琴：http: [//jsfiddle.net/X7j4P/](http://jsfiddle.net/X7j4P/)

```
.box {
    overflow:hidden;
}
.image {
    float:left;
}
.image img {
    width:300px;
}
.box-text {
    width:300px;
    float:left;
}
p {
    margin-bottom:10px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T10:32:52.840

不要使用表格，而是让`<div>`s 像表格的单元格一样，然后使内联内容垂直对齐顶部：

```
​.box{display:table}
.image{display:table-cell;vertical-align:top;}
.box-text{display:table-cell;vertical-align:top;} 
```

[在这里检查](http://jsfiddle.net/WdYjG/1/)

# c++ - 什么是 C++ 中的 Container 类，任何人都可以举一个很好的例子吗？

> ID：13912137
> 
> 赞同：-8
> 
> 时间：2012-12-17T10:15:28.500
> 
> 标签：c++

我想知道 ：

C++中容器类的定义、使用和示例......

知道的请回复...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T10:21:13.953

“容器”是标准中用来指代标准库中的容器的通用术语（一个“概念”）：`vector`, `deque`, `forward_list`(C++11), `list`, `array`(C++11), `map`, `set`, `unordered_map`(C++11 ), `unordered_set`(C++11)。

搜索这些应该会给你大量的文档和示例。

**编辑**

您可以从例如[cppreference开始](http://en.cppreference.com/w/cpp/container)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T10:21:44.217

在 C++ 中，`container`不存在类。它是用于命名*容器*类（包含对象的类）之一的术语：`std::vector`, `std::list`, `std::deque`, `std::set`...

# php - 如何在google api中列出与我共享的文件

> ID：13912138
> 
> 赞同：0
> 
> 时间：2012-12-17T10:15:33.323
> 
> 标签：php, google-drive-api

我正在尝试列出与我共享的文件和文件夹（与 children.list）。我使用这样的查询字符串：

```
 'q'=sharedWithMe 
```

但这只会返回我的驱动器根目录中的文件和文件夹（有人与我共享）。我认为这是因为我将父 'root' 作为 id，但我找不到我必须发送的 id。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T10:44:23.573

我不知道我们是否可以在这种情况下使用，但我使用查询字符串`children.list`解决了我的问题，因为它只列出了与我共享的孩子。无论如何，如果有人知道如何用于相同的目标，我想知道。:)`files.list``'q'='sharedWithMe'``children.list`

# uiimagepickercontroller - mp4格式的IOS UIImagePicker

> ID：13912139
> 
> 赞同：5
> 
> 时间：2012-12-17T10:15:36.083
> 
> 标签：uiimagepickercontroller, video-capture

是否可以保存视频并将其添加到从 UIImagePicker 以 mp4 格式捕获的自定义 ALAsset？或者我必须将它保存在 .mov 中并通过 AVAssetExportSession 进行压缩？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-26T09:35:00.753

是的，您可以使用`AVAssetExportSession`. 在这里您可以指定压缩视频的视频类型、质量和输出 url。

见以下方法：

```
- (void) saveVideoToLocal:(NSURL *)videoURL {

    @try {
        NSArray *documentsDirectory = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *docPath = [documentsDirectory objectAtIndex:0];

        NSString *videoName = [NSString stringWithFormat:@"sampleVideo.mp4"];
        NSString *videoPath = [docPath stringByAppendingPathComponent:videoName];

        NSURL *outputURL = [NSURL fileURLWithPath:videoPath];

        NSLog(@"Loading video");

        [self convertVideoToLowQuailtyWithInputURL:videoURL outputURL:outputURL handler:^(AVAssetExportSession *exportSession) {

             if (exportSession.status == AVAssetExportSessionStatusCompleted) {
                 NSLog(@"Compression is done");
             }
             [self performSelectorOnMainThread:@selector(doneCompressing) withObject:nil waitUntilDone:YES];
         }];
    }
    @catch (NSException *exception) {
        NSLog(@"Exception :%@",exception.description);
        [self performSelectorOnMainThread:@selector(doneCompressing) withObject:nil waitUntilDone:YES];
    }
}

//---------------------------------------------------------------

- (void)convertVideoToLowQuailtyWithInputURL:(NSURL*)inputURL outputURL:(NSURL*)outputURL handler:(void (^)(AVAssetExportSession*))handler {
    [[NSFileManager defaultManager] removeItemAtURL:outputURL error:nil];
    AVURLAsset *asset = [AVURLAsset URLAssetWithURL:inputURL options:nil];
    AVAssetExportSession *exportSession = [[AVAssetExportSession alloc] initWithAsset:asset presetName:AVAssetExportPresetPassthrough];
    exportSession.outputURL = outputURL;
    exportSession.outputFileType = AVFileTypeMPEG4;
    [exportSession exportAsynchronouslyWithCompletionHandler:^(void) {
        handler(exportSession);
    }];
} 
```

在这里，我将压缩视频保存到应用程序的文档目录中。您可以在下面的示例代码中检查此操作的详细信息：

## [示例演示：](http://jmp.sh/06gIqRp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-04T06:21:10.270

```
func imagePickerController(_ picker: UIImagePickerController, didFinishPickingMediaWithInfo info: [String : Any])
    {
        picker.dismiss(animated: true, completion: nil)
        guard let mediaType = info[UIImagePickerControllerMediaType] as? String else
        {
            return
        }

        if mediaType == "public.movie"
        {
            if let  videoURL = info[UIImagePickerControllerMediaURL] as? URL
            {
                var videoData:Data!
                do {
                    videoData   = try Data(contentsOf: videoURL, options: [Data.ReadingOptions.alwaysMapped])
                }
                catch
                {
                    print(error.localizedDescription)
                    return
                }
                if videoData != nil
                {
                    let writePath = URL(fileURLWithPath: NSTemporaryDirectory()).appendingPathComponent("vid1.mp4")
                    print("writePath - \(writePath)")
                    do{
                        try videoData.write(to: writePath)
                    }catch{
                        print("Error - \(error.localizedDescription)")
                    }
                }
            }

        }
} 
```

# php - PHP; 错误 101 (net::ERR_CONNECTION_RESET)：连接已重置

> ID：13912141
> 
> 赞同：0
> 
> 时间：2012-12-17T10:15:43.873
> 
> 标签：php, apache, symfony, openshift

我有 symfony 2 应用程序，它在本地计算机上运行良好。我把它上传到了redhat的openshift云服务器。当我访问以下页面时

```
https://jba-hj.rhcloud.com/web/app.php 
```

它应该重定向到

```
https://jba-hj.rhcloud.com/web/app.php/login 
```

页面，但服务器将端口号 80 添加到 url，即它变为：

```
https://jba-hj.rhcloud.com:80/web/app.php/login 
```

并抛出以下错误：

```
 Error 101 (net::ERR_CONNECTION_RESET): The connection was reset. 
```

如果我删除端口号并重新加载页面，那么登录页面会正确显示。登录后发生同样的错误。（目前，您可以通过实际浏览上述网址来尝试此操作）。

我检查了 openshift 服务器上的 $_SERVER['SERVER_PORT'] 变量，它返回 80；即openshift的Apache服务器端口号是80。

如何解决问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T07:12:38.003

在 app.php 和 app_dev.php 中，我添加了

```
$_SERVER['SERVER_PORT'] = 443; 
```

一开始，就在 require_once 语句之后。

请参阅： [Symfony2 重定向到 https 路由失败（使用错误的端口）](https://stackoverflow.com/questions/10629255/symfony2-redirect-to-https-route-fails-uses-wrong-port)

# javascript - 从 json 对象获取属性键

> ID：13912142
> 
> 赞同：4
> 
> 时间：2012-12-17T10:15:51.103
> 
> 标签：javascript, jquery, json, object, properties

序言：我是意大利人，对不起我的英语不好。

我需要使用 javascript/jquery 从 json 对象中检索属性的名称。

例如，从这个对象开始：

```
{
      "Table": {
          "Name": "Chris",
          "Surname": "McDonald"
       }
} 
```

有没有办法获取字符串“Name”和“Surname”？

就像是：

```
//not working code, just for example
var jsonobj = eval('(' + previouscode + ')');
var prop = jsonobj.Table[0].getPropertyName();
var prop2 = jsonobj.Table[1].getPropertyName();
return prop + '-' + prop2; // this will return 'Name-Surname' 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-17T10:18:42.193

```
var names = [];
for ( var o in jsonobj.Table ) {
  names.push( o ); // the property name
} 
```

在现代浏览器中：

```
var names = Object.keys( jsonobj.Table ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T10:18:57.133

您可以浏览对象的属性：

```
var table = jsonobj.Table;
for (var prop in table) {
  if (table.hasOwnProperty(prop)) {
    alert(prop);
  }
} 
```

测试是必要的`hasOwnProperty`，以避免包含从原型链继承的属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T10:23:02.923

在 jquery 中，您可以像这样获取它：

```
$.ajax({
    url:'path to your json',
    type:'post',
    dataType:'json',
    success:function(data){
      $.each(data.Table, function(i, data){
        console.log(data.name);
      });
    }
}); 
```

# php - MySQL 大于当前日期时间问题

> ID：13912144
> 
> 赞同：0
> 
> 时间：2012-12-17T10:15:59.213
> 
> 标签：php, mysql, phpmyadmin

```
check deal_time field value in phpmyadmin is less than or greater than current datetime stamp.
deal_time value stored in database in format('y/m/d h:m:s') 2012-12-17 11:05:28; 
```

条件->

```
 $WhereBy = $this->db->dbprefix("product").".`Active` = 'Y' and ".$this->db->dbprefix("product"). ".`Deal_Time` <= NOW()"   ; 
```

但它返回错误的结果。请告诉什么问题。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T11:13:44.523

我认为是 h:i:s 而不是 h:m:s 因为你会得到 month val for minutes

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T10:19:18.937

尝试日期(Deal_Time)<= NOW()

# css - 网格系统和响应式布局

> ID：13912149
> 
> 赞同：0
> 
> 时间：2012-12-17T10:16:27.670
> 
> 标签：css, grid, system

每次我开始编写一个新的响应式页面时，我都会提出这个问题，所以我想问你们：“在为页面添加响应性时破坏可读性是否正常？”

我想你会通过一个例子更好地理解：我在 12 列网格系统中有 2 个大列，所以我在 class`.grid-6`和 css 中设置了 2 个 div `.grid-6 {width:50%}`。在平板电脑布局中，图形设计师放置了三列，因此我将这些列的宽度更改为 33%，但现在我有一个带有 grid-6 类的 div（表示宽度为 50%），实际列宽为 33%。

因此，当我开始研究响应能力时，一切都感觉像是“黑客”。我想为平板电脑和手机或其他设备添加不同的类（`<div class="grid-6 tablet-grid-4 phone-grid-3">`），但这感觉不对。

当您收到每个断点具有不同列数的图形设计时，就会出现问题。我的意思是，您不能更改 html 中的列数，amirite？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-07T19:52:35.713

考虑使用[**Cascade 框架**](http://jslegers.github.io/cascadeframework/)。

Cascade 框架中的网格元素是

*   以下 HTML 元素之一：section、main、article、header、footer、aside 或 nav（这些元素用旧 IE 的 HTMLshiv 填充，以备不时之需）。

*   具有“col”类的 div 元素（可以在没有 polyfill 的旧 IE 中使用）。

要为网格元素添加宽度，请添加格式为“width-XofY”的类，其中 Y 可以是 2、3、4、5、6、7、8、9、10、12、16 或 24，并且X 可以是任何低于 X 的值。

更具体地说，这里有一些可以在 Cascade Framework 中使用的有效类的示例：'width-1of2'（宽度：50%）、'width-3of4'（宽度：25%）、'width-2of5'（宽度：40 %)、'width-2of5'（宽度：40%）、'width-2of7'（宽度：28.5714286%）和'width-13of16'（宽度：81.25%）

除了这些类之外，您还可以使用分别适合内容并填充 100% 宽度的任何剩余部分的“width-fit”和“width-fill”类。或者，您可以定义自己的类和 ID，并为这些类添加自定义宽度，以“语义”方式执行操作。

如果您的构建包含响应模块（推荐构建就是这种情况），则所有网格元素的宽度会在移动设备上自动重置为 100%。您可以使用“mobile-width-3of16”、“phone-width-3of7”或“tablet-width-2of4”等类来自定义不同宽度范围的布局以及“desktop-hidden”、“mobile-hidden”类, 'phone-hidden' 或 'tablet-hidden' 隐藏特定屏幕的内容和范围。

`<div class='col width-1of4 tablet-1of3 phone-1of2'> </div>`但是，在某些情况下，这仍然可能导致类似的事情。在这些情况下，语义化是一种更好的方法。更具体地说，执行类似`<div class='col custom_class'> </div>`or的操作`<section class='custom_class'> </section>`，然后在自定义 CSS 中自己设置每个断点的宽度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T10:26:31.897

我有点迷茫，但我相信你所说的移动浏览器正确吗？如果是这样，@media 是您的解决方案。

```
html,body{
    min-height:100%;
}
.grid-6 {
    width:33%;
    min-height:100%;
    margin:0px;
    display:inline-block;
} 
```

上面将创建一个类似于您解释的柱状网格。我认为？大声笑将这些转换为移动浏览器的一列很容易。将@media 视为条件。基本上我写了'if device width <= 480px'，它是相对于 iPhone 4gs 和屏幕下方的。

```
@media only screen and (device-width:480px){
    .grid-6{
        width:100%;
        display:block;
    }
} 
```

未在@media 条件中声明的所有其他样式都继承自上面的类。希望这有帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T10:27:29.530

首先，最好根据其功能而不是其物理外观来命名一个类……例如`navigationContainer`，它比 , 更好`leftContainer`，因为`navigationContainer`它可以存在于页面上的任何位置。

至于适应不同的布局、屏幕尺寸和方向等，您将需要使用`media`属性（或`@media`声明），这将允许您仅将类定义应用于满足某些标准的设备和屏幕。这就是在函数之后命名类的好处。`mainContentGrid`如果你在一个类的功能之后命名一个类（比如适合查看上下文。这消除了您拥有的多类问题并清理了您的代码。

如果您想要更准确的意见，请发布一些代码，我很乐意为您提供我的想法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T01:48:43.033

Flexbox 是您的解决方案，但还不是时候。

如果您不太关心语义，那么这是您使用`tablet-grid-4`. 在其类名中使用大小定义的网格不是语义的。您也可以将其命名为诸如此类`desktop-main desktop-aside tablet-main tablet-aside`。但我在实践中总是达不到自己的要求。平板电脑中的三个偶数列是什么名字？这不是主要的，也不是次要的。它们各占三分之一 :) 当整个容器都是它们的布局时，很难不说 html 中的布局。

问候

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T10:27:45.643

所有浏览器大小的列数应保持一致；只有它们的宽度和填充应该改变。然而，在移动设备中将所有列重置为 100% 宽度是很常见的，否则它们应该只会缩小，而不是完全删除。我建议回到设计师那里或重新调整您的网格，以获得所有响应都遵守的倍数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-24T11:40:41.727

尝试[死简单网格](http://mourner.github.io/dead-simple-grid/)。而不是像硬编码网格布局类

```
<div class="grid-6 tablet-grid-4 phone-grid-3"></div> 
```

你分配一个抽象类，比如

```
<div class="col left"></div>
<div class="col right"></div> 
```

然后将宽度分配给这些类以用于不同的屏幕尺寸

```
.left, .right    { width: 100%;   }

@media only screen and (min-width: 54em) {
  .left, .right    { width: 50%;   }
} 
```

此示例默认针对小屏幕（例如智能手机），具有`left`并`right`填充其容器的整个宽度（可以是另一列，因为支持嵌套！）并在彼此下方显示两个元素。但是，当屏幕足够大时，这两列将彼此相邻显示。

Dead Simple Grid 非常简单（整个 css 代码是 250 字节！）但功能却出奇的强大。

# php - 匹配正则表达式不起作用

> ID：13912152
> 
> 赞同：0
> 
> 时间：2012-12-17T10:16:41.267
> 
> 标签：php, regex

我有一个`$subDay`这样的字符串：

```
Checkin 03:35 OL 270 DRS-ZRH 04:25-05:45 HSC, KRG, LEM, JOA OL 271 ZRH-DRS 06:45-08:15 HSC, KRG, LEM, JOA Checkout 08:45 
```

我想用这个命令添加一个新行（\n）：

```
$subDay = preg_replace("/(Checkin [12][0-9]:[12][0-9])/", "$1\n", $subDay); 
```

我用这个[RegexTester](http://regexpal.com/)对其进行了测试，我的 RegEx 似乎有效，但没有任何反应。

为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T10:18:52.673

字符类`[12]`只匹配 1 或 2。它不匹配 中的 0 `03:35`。试试这个：

```
/(Checkin [012][0-9]:[0-5][0-9])/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T10:22:47.543

```
/(Checkin [012]{1}[0-9]{1}:[0-5]{1}[0-9]{1})/ 
```

可以改进，因为目前它将匹配 29，但如果需要，您可以进一步使用它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T10:07:04.290

最后我使用了这个正则表达式：

```
/(Checkin ([01]{1}[0-9]{1}|[2]{1}[0-3]):[0-5]{1}[0-9]{1})/ 
```

它只匹配两位数的有效时间。

# java - Java applet post 读取 zope 数据库

> ID：13912153
> 
> 赞同：0
> 
> 时间：2012-12-17T10:16:49.700
> 
> 标签：java, python, post, applet, zope

我有一个 plone/zope 应用程序：在这个应用程序中，我放置了一个 Java 小程序来进行某些数据评估。我需要知道的是我是否可以让小程序查询 zope 数据库。

作为尝试，我在 ZMI 中创建了一个脚本，并通过一个 POST 请求在小程序中调用该脚本。它适用于 eclipse 框架，但我不知道这是否适用于生产环境（我认为是的，因为它是一个签名的小程序）。无论如何，POST 请求是在以下代码中完成的：

```
String data = URLEncoder.encode("__ac_name", "UTF-8") + "=" + URLEncoder.encode("admin", "UTF-8");
        data += "&" + URLEncoder.encode("__ac_password", "UTF-8") + "=" + URLEncoder.encode("password", "UTF-8");
        data += "&" + URLEncoder.encode("form.submitted", "UTF-8") + "=" + URLEncoder.encode("1", "UTF-8");

URL url = new URL("http://xx.xx.xx.xx:8081/myPloneWebsite/testQueryScript");
URLConnection conn = url.openConnection();
conn.setDoOutput(true);
OutputStreamWriter wr = new OutputStreamWriter(conn.getOutputStream());
wr.write(data);
wr.flush();

BufferedReader rd = new BufferedReader(new InputStreamReader(conn.getInputStream()));
String line;
while((line = rd.readLine()) != null)
{
    System.out.println(line);
}
wr.close();
rd.close(); 
```

我还想在该脚本中添加一些参数：我知道如何在这个 java 代码中执行（只需要复制用户名-密码结构），但不知道如何在 python 中处理这些参数。参数将是一个 ID：从 ID=xx 的对象中获取所有数据。我创建的脚本如下，它在给定条件的所有对象上循环：

```
catalog = context.portal_catalog
brains = catalog(portal_type='Permesso di costruire', review_state='S9')
for b in brains:
   obj = b.getObject()
   print "%s\t%s" % (b.Title, obj.elenco_progettisti())

return printed 
```

如果有一种方法可以让小程序在 Zope 数据库上读写而不打印和格式化每个属性，那就更好了……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T12:00:26.510

> 如果我可以让小程序查询 zope 数据库

**没有**。不容易。也许根本没有。使用 Java Applet 查询 zope 数据库的一种理论方法是：

*   [通过ZEO](http://svn.zope.org/ZODB/trunk/src/ZEO/protocol.txt?rev=102358&view=markup)向网络公开数据库
*   从 Java 小程序连接到 ZEO

但这种方法可能不值得付出努力。

至于参数，怎么样`query string parameters`？例如：

*   [http://xx.xx.xx.xx:8081/myPloneWebsite/testQueryScript?foo=bar](http://xx.xx.xx.xx:8081/myPloneWebsite/testQueryScript?foo=bar)

如果您将参数名称添加到`parameters`字段，您的 Python 脚本可以处理查询字符串参数，例如：

![在此处输入图像描述](../Images/a5683286304fa416e2deaa791a1e9202.png)

```
aclark@Alexs-MacBook-Pro:~/ > curl http://localhost:8080/test\?foo=bar
This is the Script (Python) "test" in http://localhost:8080
bar 
```

# nhibernate - NHibernate Lazy loading lazy=extra 没有会话或会话已关闭

> ID：13912158
> 
> 赞同：-2
> 
> 时间：2012-12-17T10:17:11.347
> 
> 标签：nhibernate, nhibernate-mapping, lazy-loading, lazy-initialization

我有一个奇怪的行为，我几天都找不到任何解决方案。我遇到的行为是典型`LazyInitializationException`的，`no session or session was closed` 当没有上下文会话并尝试访问延迟加载的属性/集合时，这种行为很常见，但这不是我的情况，因为我有：

*   Session-per-request 会话与 Spring.NET 绑定`OpenSessionInViewModule`
*   会话打开并绑定到上下文（Web 请求）
*   实体集合为“list”（映射列表集合），lazy="extra" 或“set”（映射集合集合）（问题主要是由于lazy=extra..）
*   似乎完成了额外计数的 Count 语句，但访问整个集合会引发异常

在调查了常见问题后：

*   没有会话打开

*   该对象不受任何会话的限制

*   调用`Session.Clear`或`Session.Evict`进行了调用（因此被驱逐实例的任何惰性都将起作用）

*   Spring.NET WebSupportModule 未注册

    我没有发现发生这种情况的明确原因。一个奇怪的行为是，如果我在 中进行分析`NHprof`，我在新会话中看到异常，换句话说，上下文会话正常工作，但是当抛出异常时，该异常被可视化在辅助会话中..但没有代码打开会话，并且打开了单个上下文会话..

任何人都知道还有什么其他原因可能导致这种情况？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T19:14:56.613

不看一些代码就很难诊断，但问题听起来[与此非常相似](http://forum.springframework.net/showthread.php?10182-NHibernate-Spring-NET-lazy-loading-failed-no-session)。在链接的情况下，除了在另一个位置设置会话上下文（类似于您的前两个要点）和 WebSupportModule 未注册（如您的最后一点）之外，还使用了 OpenSessionInView 。

另一方面，我对 Spring.NET 一无所知。

# android - 如何在 Android 中使用纸线制作编辑笔记？

> ID：13912163
> 
> 赞同：3
> 
> 时间：2012-12-17T10:17:30.543
> 
> 标签：android

我想做一个编辑笔记并在其背景中画一条纸线。如下图所示（如您所见，无论是垂直线还是水平线）：

![在此处输入图像描述](../Images/52a54a4adff5b16ca471d47ea649dda1.png)

我不知道如何绘制它，如何重复它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-16T09:56:18.777

这是您问题的答案[https://stackoverflow.com/a/10770670/619673](https://stackoverflow.com/a/10770670/619673)

当然，您可以在 textview 中实现它（链接的主题是关于 edittext）但它是完全相同的操作（我认为 :D ）。要在您的 xml 中使用它，您必须编写`TextView`自定义小部件类的包路径而不是包路径，即`com.example.notepad.linkededit`

![在此处输入图像描述](../Images/60610a76ebfd9fef5666e5a94f4f3581.png)

例子：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <com.example.notepadline.LinedEditText
        android:id="@+id/tv"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:singleLine="false"
        android:text="AAAA AAAA AAA AAAA AAAA AAA AAAA AAAA AAA AAAA AAAA AAA AAAA AAAA AAA AAAA AAAA AAA" />

</RelativeLayout> 
```

其余信息在参考链接中。

# php - 如何在不创建新文件的情况下在 php 中将 PNG 文件转换为 JPEG 文件？

> ID：13912174
> 
> 赞同：-1
> 
> 时间：2012-12-17T10:18:06.830
> 
> 标签：php

我知道我们可以使用`imagecreatefrompng`和`imagejpeg`函数将 PNG 转换为 JPEG。但它会创建一个新文件。

我只需要 file_get_contents() 将文件存储到数据库中。这意味着我需要我的 PNG 文件中的 JPEG 文件内容

例如：-

```
imagejpeg(imagecreatefrompng($_REQUEST['sig_data']), "test.jpeg");
$appSig = addslashes(file_get_contents("test.jpeg")); 
```

上面的例子我需要创建一个“test.jpeg”文件。如果我没有将它作为参数传递给`imagejpeg`函数，它会在屏幕上打印文件。而且我也不能做对象缓冲。`imagejpg`函数只返回状态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T10:20:45.110

诚然有些 hacky，但您可以捕获以下的直接输出`imagejpeg`：

```
ob_start();
imagejpeg($resource);  // no file name
$imageData = ob_get_clean(); 
```

# ios - iOS - 在 MFMailComposeViewController 中加载 NSURL

> ID：13912176
> 
> 赞同：1
> 
> 时间：2012-12-17T10:18:16.730
> 
> 标签：ios, iphone, xcode, ipad, mfmailcomposeviewcontroller

是否可以在正文中加载 URL `MFMailComposeViewController`？如果没有，我可以加载它`URL`（即 HTML）的有效方法是什么，以便我可以将它加载到`mail body`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T10:43:29.363

您可以像这样将 HTML 加载到 MFMailComposeViewController 中：

```
MFMailComposeViewController *composer = [MFMailComposeViewController new];
[composer setSubject:@"HTML test"];
[composer setMessageBody:@"<html><body><h1>Test</h1></body></html>" isHTML:YES]; 
```

但是，您不能将外部托管的网站加载到其中。您必须获取 HTML 文档并对其进行修改，以便资产（图像、脚本等）的链接是绝对的，并包括远程主机（您下载网站的位置）的协议和主机名。然后，您可以将此修改后的源代码设置为作曲家的`messageBody`.

# ruby - Ruby：迭代子数组和计数项目；将计数写回元素

> ID：13912179
> 
> 赞同：-1
> 
> 时间：2012-12-17T10:18:23.157
> 
> 标签：ruby, count, loops, multidimensional-array, arrays

我有一个带有`<pb n="4-DIGIT-NUMBER" ... />`. 这个数字在某些情况下是相同的，所以我想消除歧义，到目前为止，但现在计数有问题（我有正确的方法吗？=> 3））

1）将所有数字读入一个数组，产生一个很长的列表：

```
Dir.chdir("./Tustep/luxneu")
sammel = []
open("lp42tags.txt").each do |x|
  if x =~ /<pb n="(\d\d\d\d)/
  sammel << $1
  end
end 
```

2）找到重复的数字并将它们放入子数组中

```
dupl_groups = sammel.select{|i| sammel.grep(i).size > 1}.group_by{|x| x}.values
p dupl_groups
# (much shorter example)=> [["0119", "0119"], ["0147", "0147"], ["0156", "0156", "0156"]] 
```

3）现在我想我可以以某种方式计算每个子数组的元素并将它们放回（或复制..）。我想要例如 [["0119:1", "0119:2"], [...], ["0156:1", "0156:2", "0156:3"]，也许像这样（但只有得到了几乎无穷无尽的数字计算的热闹循环...... :/)

```
dupl_counted = []
dupl_groups.each do |outer|
  count = 1
  dupl_groups do |inner|
    #puts inner.inspect
    inner_new = inner.to_s.sub(/(.+)/, "\\1:#{count}")
    dupl_counted << inner_new
    count += count
  end
end 
```

严重缺陷..？也许使用“each_with_index”来代替？此外，我需要分组以有意义的块进行计数（切片 3 左右是不可接受的，因为数字重复范围为 2-6）。如果我可以将数组拆分为其子数组，将它们全部作为普通数组产生，那会好吗？

提前致谢！勒内·T。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T10:29:31.797

这应该只是一个嵌套应用程序`map`- 一次到外部组，然后到每个元素：

```
dupl_groups.map do |gp| 
  gp.map.with_index {|el, ix| el + ":#{ix+1}"}
end
# => [["0119:1", "0119:2"], ["0147:1", "0147:2"], ["0156:1", "0156:2", "0156:3"]] 
```

# ios - 应用内购买功能：Iphone

> ID：13912193
> 
> 赞同：1
> 
> 时间：2012-12-17T10:19:10.193
> 
> 标签：ios, app-store, in-app-purchase

我有一个应用内功能，用户可以将现有应用升级到专业版，这将提供额外的功能。我想将第一个基本版本发布到应用商店，此版本将具有将其升级到专业版的选项，并且如果用户尝试访问仅限专业版的功能，则会出现消息。现在我的情况是我没有准备好专业版应用程序但想发布基本版本，那么苹果会因此拒绝我的应用程序吗？我的意思是我没有可用的专业版，但我在基本版应用程序中提供升级（应用内购买）选项。因此，当用户从基本版本中选择升级选项时，只会出现“即将推出专业版”的消息（仅作为示例）。

苹果会拒绝我的应用吗？或者我可以发布基本版本并稍后发布专业版？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T10:36:18.663

这肯定会被苹果拒绝。在向 App Store提交任何应用程序之前，您应该阅读[App Store 审核指南。](https://developer.apple.com/appstore/resources/approval/guidelines.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T10:27:36.953

被拒绝的变化非常非常大。由于您可以选择让人们购买尚不可用的东西。Apple 会认为这是一种误导，并且可能会拒绝您的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T10:27:44.590

是的，如果您不提供在您的应用程序中升级的可能性，您的应用程序很可能会被拒绝。我有一个应用程序出于同样的原因被拒绝。Apple给我的提示是删除“特殊功能”按钮，或者提出“特殊功能”以在应用内购买。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T10:29:57.967

不可以，对于应用内购买，您必须先创建 Pro-Version，然后先上传此 Pro-Version。如果您的专业版会批准，那么您将上传您的基本应用程序以进行批准。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T10:30:57.200

当然会被拒。查看应用商店指南。应该没有按钮/等被禁用或显示某些/某些功能即将推出。你从用户那里得到钱来告诉这个。那很危险。最初只需发布应用程序，无需在应用程序内购买，当您获得良好的专业功能并继续使用时，上传您的应用程序的下一个版本。

# javascript - Anchor 的下载属性在某些页面（Gmail）上不起作用？

> ID：13912198
> 
> 赞同：8
> 
> 时间：2012-12-17T10:19:30.670
> 
> 标签：javascript, html, csv, download, anchor

我想在某些页面中插入这个 HTML 元素：

```
<a download="somedata.csv"
   id="downloadLink"
   href="data:application/csv;charset=utf-8,Col1%2CCol2%2CCol3%0AVal1%2CVal2%2CVal3%0AVal11%2CVal22%2CVal33%0AVal111%2CVal222%2CVal333"
>
    Click Me
</a> 
```

在所有页面中，当我通过插件或在元素检查器中手动更改 dom 时，将此元素包含到页面的 dom 中，效果很好！
但是，如果我在 Gmail 页面中执行相同操作，生成的文件不会命名为 " `somedata.csv`" 并且扩展名会丢失 " `csv`" ！

我在本地文件、上传到本地主机的文件以及许多外部网站页面中都尝试了这个，除了 Gmail 页面之外，它都适用。

**为什么它在 Gmail 页面中不起作用？以及如何解决这个问题？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T10:47:07.060

对于那些感兴趣的人，我使用 Javascript/Ajax 解决了它，这里是解决方案：

这是功能：

```
var downloadDataURI = function($, options) {
    if(!options)
        return;
    $.isPlainObject(options) || (options = {data: options});
    if(!$.browser.webkit) 
        window.location = options.data;
    options.filename || (options.filename = "download." + options.data.split(",")[0].split(";")[0].substring(5).split("/")[1]);
    options.url || (options.url = "http://download-data-uri.appspot.com/");
    $('<form method="post" action="'+options.url+'" style="display:none"><input type="hidden" name="filename" value="'+options.filename+'"/><input type="hidden" name="data" value="'+options.data+'"/></form>').submit().remove();
} 
```

这是如何称呼它的：

```
downloadDataURI($, {filename: "test.csv",data:"data:application/csv;charset=utf-8,Col1%2CCol2%2CCol3%0AVal1%2CVal2%2CVal3%0AVal11%2CVal22%2CVal33%0AVal111%2CVal222%2CVal333"}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-26T05:27:32.033

在带有 JQuery 的 Chrome 中，我尝试了这种方法：

```
var dataUri = "data:application/csv;charset=utf-8,Col1%2CCol2%2CCol3%0AVal1%2CVal2%2CVal3%0AVal11%2CVal22%2CVal33%0AVal111%2CVal222%2CVal333"
var filename = "somedata.csv"

$("<a download='" + filename + "' href='" + dataUri + "'></a>")[0].click(); 
```

我创建了一个临时链接并在其上触发点击事件。但不确定其他浏览器是否有效。

# javascript - 是否可以在javascript中调用子方法？

> ID：13912207
> 
> 赞同：0
> 
> 时间：2012-12-17T10:19:53.143
> 
> 标签：javascript, methods

作为一项实验，我正在尝试围绕以下方法构建以下层次结构`Number`：

```
 Number
                                       |
                                       |
                                      pad()
                                       /\
                                      /  \
                                     /    \
                                    /      \
                                 left()   right() 
```

准确地说，我想要`left()`并且`right()`成为 pad() 的子方法，这样我就可以通过拨打以下电话来填充号码：

```
var i = 100;
i.pad().left(); 
```

这是我正在处理的一个实验性脚本：

```
/* 
    Javascript to pad zero's to a number at the left or right.
*/
Number.prototype.pad = function()
{
    Number.prototype.pad.left = function(l)
    {
        if(typeof l=='undefined') 
            l = 0;
        p = this+'';
        var r = l - p.length; 
        while((r--)>0)
            p = '0'+p;
        return p;
    }
    Number.prototype.pad.right = function(l)
    {
        if(typeof l=='undefined') 
            l = 0;
        p = this+'';
        var r = l - p.length; 
        while((r--)>0)
            p = p+'0';
        return p;
    }
}
i = 646;
padded = i.pad.left(9); /* Possible calling format*/
alert(padded); 
```

这在Javascript中怎么可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T10:41:24.097

已修复的问题：
1) 调用 pad() 而不仅仅是 pad
2) Pad() 返回具有左右成员的对象。
3) 最重要的是，'this' 在新函数中不起作用，因为它们不是数字的一部分。提取函数外的数字。
4) p 无意中被公开（window.p）。在前面放一个var。

[看到它工作](http://jsbin.com/uredov/3/watch)

```
 Number.prototype.pad = function() {

    var number = this.valueOf();
    return {
      left: function(l)
      {
        console.log(this);
          if(typeof l=='undefined') 
              l = 0;
          var p = number + '';
          var r = l - p.length; 
          while((r--) > 0)
              p = '0'+ p;
          return p;
      },
      right: function(l)
      {
          if(typeof l=='undefined') 
              l = 0;
          var p = number + '';
          var r = l - p.length; 
          while((r--)>0)
              p = p+'0';
          return p;
      }
  }
}
i = 646;
padded = i.pad().left(9); /* Possible calling format*/
  alert(padded); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T10:35:35.510

考虑一些更简单的事情。您可以将 left 和 right 作为参数传递给`pad`. 例如：

```
Number.prototype.pad = function( l,r ) {

  l = l || 0; r = r || 0;

  var arr = [ this ], 
      i = 0, j = 0;

  for ( ; i < l; ++i ) arr.unshift(0);
  for ( ; j < r; ++j ) arr.push(0);

  return arr.join('');

};

console.log( (12).pad(2,0) ); //=> 0012
console.log( (12).pad(0,1) ); //=> 120
console.log( (12).pad(3,2) ); //=> 0001200 
```

这是一段更短、更实用、更简洁的代码，也可以：

```
Number.prototype.pad = function( l,r ) { 
  return this.toString()
    .replace( /\d+/, new Array( ++l ).join('0') +'$&'+
      new Array( ++r||0 ).join('0'));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T11:36:27.320

我的版本

```
Number.prototype.lpad = function( num ) {

    var padding = new Array( num + 1 ).join("0"),
    result = padding + this.toString( 10 );
    return result.slice( -num );
}

Number.prototype.rpad = function( num ) {

    var padding = new Array( num + 1 ).join("0"),
    result = this.toString( 10 ) + padding;
    return result.slice( 0, num );
} 
```

# winforms - 如何更改 XtraGrid 列弹出菜单？

> ID：13912209
> 
> 赞同：1
> 
> 时间：2012-12-17T10:19:53.533
> 
> 标签：winforms, contextmenu, xtragrid

我有自己的上下文菜单。我想知道如何禁用 DevExpress XtraGrid 控件的默认列弹出菜单并在用户右键单击指定列时显示我自己的 ContextMenu？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T18:02:28.330

检查我对类似问题的回答：[如何添加到 GRidViewColumnMenu 颜色和字体编辑器](https://stackoverflow.com/questions/14028338/how-to-add-to-the-gridviewcolumnmenu-color-und-font-editors/14859772#14859772)

您需要更改的只是清除默认的 Items 集合，而不是添加新的 DXEditMenuItem，而是添加以下之一：DXMenuItem、DXCheckItem 等，根据需要使用它们。但想法是完全一样的。

# javascript - 使用 Javascript 或 jQuery 的会话超时

> ID：13912210
> 
> 赞同：0
> 
> 时间：2012-12-17T10:19:58.087
> 
> 标签：javascript, jquery-ui, session-timeout

会话完成后如何重定向到登录页面？代码应检查用户是否空闲了一段时间，然后执行任何其他客户端事件。如果发现这种情况，它应该检查会话超时，如果会话完成，则重定向到登录页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T10:30:34.730

检查网页上的不活动状态就像尝试监听大量事件一样。这也意味着如果有用户交互，函数（事件处理程序）将被调用很多次。如果此处理程序/函数将用于某些 ajax 发送/接收内容，那么它最终可能会使您的用户界面性能不佳。

为什么不缩短会话到期时间并在之后自动注销用户？这样，如果用户真正活跃，那么很可能会在该时间范围内请求页面。您还可以设置一个基于计时器的事件，该事件在触发时将简单地向服务器发送虚拟请求以刷新会话，以让服务器知道用户仍处于活动状态但尚未准备好请求另一个页面。这将是用户正在编辑长文本或类似内容的情况。

我希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-17T09:34:56.013

> **5 分钟后会话注销**

```
<sctipt>
    var interval;
     $(document).on('mousemove', function () {
         clearInterval(interval);
         var coutdown = 5 * 60, $timer = $('.timer'); // After 6 minutes session expired  (mouse button click code)
         $timer.text(coutdown);
         interval = setInterval(function () {
             $timer.text(--coutdown);

             if (coutdown === 0) {

                 alert("Session expired User successfully logout.");
                 window.location = "UserLogin.aspx";
             }

         }, 1000);
     }).mousemove();

     var interval;
                 $(document).on('keydown', function () {
         clearInterval(interval);
         var coutdown = 7 * 60, $timer = $('.timer'); // After 6 minutes session expired (keyboard button press code)
         $timer.text(coutdown);
         interval = setInterval(function () {
             $timer.text(--coutdown);

             if (coutdown === 0) {

                 alert("Session expired User successfully logout.");
                 window.location = "UserLogin.aspx";
             }

         }, 1000);
     }).mousemove();
<sctipt> 
```

```
<div class="timer">
     Time of session display on page 
</div> 
```

# matlab - Simulink 停留在“编译：评估模块参数”

> ID：13912212
> 
> 赞同：3
> 
> 时间：2012-12-17T10:20:07.253
> 
> 标签：matlab, simulink

我正在尝试在 Simulink 中运行模型，可在[此处](http://csel.asu.edu/?q=node/33)下载（[直接](http://csel.asu.edu/downloads/Software/TEmatlab.zip)）。

我已经能够在 Linux 机器上运行它，但在 Windows 上它似乎卡在了编译步骤。在屏幕底部，我看到两个绿色条，以及消息“正在编译：评估块参数”。它永远不会超越这一点。

我曾尝试使用该`mex -setup`过程选择编译器，但老实说，我怀疑这甚至不接近我需要做的。

任何意见，将不胜感激。

# json - 发现很难在 delphi 中处理 JSON

> ID：13912220
> 
> 赞同：2
> 
> 时间：2012-12-17T10:21:00.443
> 
> 标签：json, delphi, api, delphi-xe3, world-of-warcraft

我目前正在开发一个应用程序，该应用程序将从 WoW 军械库中获取您的角色数据。示例角色：[我的魔兽角色（链接）](http://eu.battle.net/wow/en/character/moonglade/xaveak/advanced)

我将通过调用暴雪提供的 API 来获得我想要的所有信息，我将在`JSON`. 示例`JSON`：[上述字符的 JSON 响应（链接）](http://eu.battle.net/api/wow/character/moonglade/Xaveak?fields=stats,talents)

起初我尝试从`JSON`字符串操作中获取数据。这意味着，拆分我的字符串，在字符串中搜索关键字以找到位置并将其格式化为单独的数据片段，例如才能和统计数据。

这在开始时效果很好，但是当我想要更多数据时，这变得更加困难，因为我在所有字符串上运行了许多函数，它变得非常模糊，不清楚当时我在做什么。

有没有处理我的好方法`JSON`？我正在考虑获取`JSON`并创建一个空类。在完成工作时，`JSON`它会生成属性并将值存储在其中。但我不知道是否以及如何动态生成属性。

将来我想获得更多数据，但首先我想在考虑之前启动并运行它。

有人对此有任何想法/建议吗？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T16:47:46.230

您的 JSON 似乎相当简短和基本。您似乎不需要特殊的速度或异国情调的功能。 [http://jsonviewer.stack.hu/#http://eu.battle.net/api/wow/character/moonglade/Xaveak?fields=stats,talents](http://jsonviewer.stack.hu/#http://eu.battle.net/api/wow/character/moonglade/Xaveak?fields=stats,talents)

虽然自从 Delphi XE2 以来，您确实将 JSON 解析器作为 DB-Express 套件的一部分，但仍然存在一些问题：
1\. 它被告知会导致速度和可靠性方面的问题。
2\. 它会让你的程序依赖于 DB-Express 包（为什么，如果你没有真正使用它来访问 DB？） 3\. 它将你的未来绑定到 Delphi 的企业版。

所以你最好尝试一些 3rd-party 库。

最快的一个可能是 Synopse JSON 解析器，他们的[mORMot 库](http://synopse.info/fossil/wiki?name=SQLite3%20Framework "关联")的副项目。它通常是很好的代码，非常注重速度和开发人员在他们的论坛上积极帮助。

另一个已知和使用的库是 Henri Gourvest 的 SuperObject。它声称是Delphi[最快的解析器](http://www.progdigy.com/?page_id=6)，虽然由于上述原因可能不再正确，但速度对于大多数任务来说已经足够了。Henri 本人并没有积极支持他的前项目，总是在做一些新的事情，所以[稀缺的文档](https://superobject.googlecode.com/git/readme.html)（也在安装包中复制）将是你正式拥有的全部，另外[还有一个论坛](http://www.progdigy.com/forums/viewforum.php?f=5)，其他用户可能会帮助你。OTOH SuperObject 设计背后的主要思想是统一性，虽然某些任务确实可以更好地记录 - 这主要是由于不确定性“如果这项任务真的可以在没有任何特殊处理的情况下以统一的方式工作”。但通常是这样。
*PS。由于那是 wiki，您可能会尝试为未来的用户增强它；-)*

所以回到文档，你需要

1) 将整个 JSON 加载到库中。您可以通过 http 库创建 TStream 或提供带有数据的字符串缓冲区来做到这一点：即**Parsing a JSON data structure** section of [the manual](https://superobject.googlecode.com/git/readme.html)

2) 读取诸如“名称”和“级别”之类的值 -**如何读取对象的属性值？**那里的部分。

3) 征集像“人才”这样的数组 - 在**浏览数据结构**部分中进行了描述。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-17T10:29:18.283

XE3 具有“内置”JSON 支持（参见[docwiki](http://docwiki.embarcadero.com/RADStudio/XE3/en/JSON)），但我听说（我自己没有使用过）它没有得到很好的优化。所以也许寻找一些第三方选项，比如[SuperObject](http://www.progdigy.com/?page_id=6)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-17T12:39:48.340

[使用我的delphi-oop](https://code.google.com/p/delphi-oop/)库中包含的[TSvSerializer](https://code.google.com/p/delphi-oop/wiki/SvSerializer)可以轻松完成您的任务。您只需要声明您的模型类型并从您的 json 字符串中反序列化它。您的模型（非常简化的不完整和未经测试的版本）应该如下所示：

```
type
  TStats = class
  public
    property health: Integer read fhealth write Fhealth;
    ... 
  end;

  TTalent = class
  public
    property tier: Integer read Ftier write Ftier;
    ...
  end;

  TMainTalent = class
  public
    property selected: Boolean read Fselected write Fselected;
    property talents: TObjectList<TTalent> read Ftalents write Ftalents;
  end;

  TWowCharacter = class
  public
    property lastModified: Int64 read FlastModified write FlastModified;
    property name: string read Fname write Fname;
    ...
    property stats: TStats read Fstats write Fstats;
    property talents: TObjectList<TMainTalent> read Ftalents write Ftalents;
    ...
  end; 
```

然后你只需要这样做：

```
uses
  SvSerializer;

var
  LWowCharacter: TWowCharacter;
begin
  LWowCharacter := TWowCharacter.FromJson(YourJsonString);
... 
```

您可以在 delphi-oop 项目中找到我的联系电子邮件，如果有不清楚的地方可以问我，我会在空闲时间尽力帮助您。

# php - PHP/MYSQL/MVC 如何获取当前登录的用户名

> ID：13912221
> 
> 赞同：0
> 
> 时间：2012-12-17T10:21:07.933
> 
> 标签：php, mysql, model-view-controller

我是 PHP MVC 的新手，并且真的开始理解这个概念。我在文本框中显示当前用户名时遇到问题。

请在下面检查我的代码：

```
<?php
//require_once (Path::controllerClassPath(). "Summarycontroller.php");
require_once (Path::controllerClassPath(). "CalendarController.php");

//$summary = new SummaryController($this->sessionHandler->getUserId());
$calendar = new CalendarController($this->sessionHandler);

$userId = $this->sessionHandler->getUserId();
?>

<div id="fileleaverequestholiday">
<?php 
echo '<form name="fileleaverequestholidayform" id="fileleaverequestholidayform" action="" method="post">';
echo '<fieldset class="fileleavetables"><legend>Request Leave</legend>';
echo '<table id="fileleaverequesttable">';
echo '<tr>';
//echo '<td class="fileleavetd">Name:</td><td class="fileleavetd"><input id="fileleaveemployeename" type="text" name="fileleaveemployeename"/></td>';
echo '<td class="fileleavetd">Name:</td><td class="fileleavetd"><input id="fileleaveemployeename" type="text" name="fileleaveemployeename" value="'.$retval.'" /> </td>'; ?> 
```

我已经注释掉了这段代码：

```
 $userId = $this->sessionHandler->getUsername();

    $dbhost = 'localhost';
    $dbuser = 'root';
    $dbpass = '';

    $conn = mysql_connect($dbhost, $dbuser, $dbpass);
    if(! $conn )
    {
        die('Could not connect: ' . mysql_error());
    }

    $sql = "SELECT employee_name FROM employee WHERE employee_username = $userId" ;

    mysql_select_db('test');
    $retval = mysql_query( $sql, $conn );
    print($retval);
    if(! $retval )
    {
        die('Could not update data: ' . mysql_error());
    } 
```

更新：

```
<div id="fileleaveinsertholiday">
<?php 
if(isset($_POST['fileleaveemployeename'], 
            $_POST['leavetype'], 
            $_POST['filerequestreason'],
            $_POST['filerequeststartdate'])){

if(isset($_POST['filerequestenddate'])){
    if($_POST['filerequestenddate'] > $_POST['filerequeststartdate']){
        $result = $calendar->manageFileHoliday(
                        $_POST['fileleaveemployeename'], 
                        $_POST['leavetype'], 
                        $_POST['filerequestreason'],
                        $_POST['filerequeststartdate'], 
                        '1',
                        $_POST['filerequestenddate']
                     );
        if($result == Status::INSERT_SUCCESS){
            echo '<b>Entry for '.$_POST['fileleaveemployeename'].' from '.$_POST['filerequeststartdate'].' to '.$_POST['filerequestenddate'].' submitted.</b>';         
        }
        else{
            echo '<b>Entry was not submitted. No such name exists in the list.</b>';
        }            
    }
    else{
        echo '<b>Entry was not submitted. Invalid Date Range.</b>';
    }
}
else{
        $result = $calendar->manageFileHoliday(
            $_POST['fileleaveemployeename'], 
            $_POST['leavetype'], 
            $_POST['filerequestreason'],
            $_POST['filerequeststartdate'],
            $_POST['requestduration']
         );
        if($result == Status::INSERT_SUCCESS){
            echo '<b>Entry for '.$_POST['fileleaveemployeename'].' on '.$_POST['filerequeststartdate'].' submitted.</b>';
        }
        else{
            echo '<b>Entry was not submitted. No such name exists in the list.</b>';
        }   
}   
}
?>
</div> 
```

因为当我添加这个时，我的页面没有正确显示。有什么帮助吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:20:15.300

试试下面的代码..

```
mysql_select_db('test', $conn)

$retval = mysql_query( $sql); 
```

代替

```
mysql_select_db('test');

$retval = mysql_query( $sql, $conn ); 
```

# javascript - 使用 JavaScript/jQuery 在 Chrome 中读取 mp3 文件持续时间

> ID：13912231
> 
> 赞同：3
> 
> 时间：2012-12-17T10:21:45.140
> 
> 标签：javascript, jquery, html, html5-audio

我有一个“浏览器应用程序”，用户应该能够将本地 mp3 文件拖放到 Chrome，并且应该看到一些 mp3 信息（无需将文件上传到服务器）......
到目前为止，我可以成功读取和显示 mp3 标签（使用JavaScript-ID3-Reader 库），但我在显示 mp3 的持续时间方面有点吃力。是否可以仅使用 js/jQuery 获取该信息？如果没有，你会建议什么来解决这个简单的问题？

我用来处理将文件拖放到浏览器的代码如下所示：

```
function initialize() {
    var target = document;
    if (target === null) {
        return false;
    }

    target.addEventListener('drop', function(event) {
        event.preventDefault();
        var files = event.dataTransfer.files;
        console.log(files);
        for (var i = 0; i < files.length; i++) {
            processFile(files[i]);
            objectURL = window.URL.createObjectURL(files[i]);
            console.log(objectURL);
        }
    }, true);
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-01-29T21:07:03.007

试试这个

```
var audio = new Audio()
audio.addEventListener("timeupdate", function() {
  console.log(audio.currentTime)
})
audio.addEventListener("canplaythrough", function() {
  console.log(audio.duration)
})

target.on("change", function(e) {
    var file = e.currentTarget.files[0]
    var objectUrl = URL.createObjectURL(file)
    audio.src = objectUrl
    $("#duration").html(audio.duration)
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T11:45:00.613

如果您使用支持音频标签的最新浏览器，您可以在`<audio>`元素中加载 mp3 并通过 DOM 访问持续时间属性。

要将音频文件加载到浏览器，请参见：[window.URL.createObjectURL](https://developer.mozilla.org/en-US/docs/DOM/window.URL.createObjectURL)

# java - Spring mvc：事务注解

> ID：13912232
> 
> 赞同：2
> 
> 时间：2012-12-17T10:21:50.350
> 
> 标签：java, spring, spring-mvc, transactions

我有两张桌子`Employee`，`Address`如图所示：

```
public class Employee {

    private Integer id;
    private String firstName;
    private String lastName;
    private boolean employeeStatus;
    private Address address;

        //getters setters
    }

public class Address {
    private Integer id;
    private String country;
    private String city;
    private String street;
    private Integer emp_id;
    //getters setters
    }

@Repository("employeeDao")
public class EmployeeDaoImpl implements EmployeeDao {

    private JdbcTemplate jdbcTemplate;

     @Autowired
        public void setDataSource(DataSource dataSource) {
            this.jdbcTemplate = new JdbcTemplate(dataSource);
        }

        @Override
         public void insertEmployee(Employee e)
         {
         String sql = "INSERT INTO tbl_employee (dept_id,firstName,lastName,employeeStatus) values(?,?,?,?,?)";
         this.jdbcTemplate.update(sql,new
                 Object[]{e.getDept_id(),e.getFirstName(),e.getLastName(),e.isEmployeeStatus()});

// INSERT ADDRESS????
         }

   // Other Methods
        } 
```

现在我想`Transactional`在插入`employee` 和`address`表属性时实现。我在这里有点困惑。方法上的注释是否`@transactional`完成了所需的工作？到目前为止，我明白了。另外，从我插入`employee`属性的位置插入地址是最佳做法吗？我还在某处读到事务应该从服务层而不是 Dao 实现。在这种情况下如何实现事务性？

**编辑** 由于建议`@transactional`在服务层中使用，服务层变成了：

```
@Service("employeeService")
@Transactional
public class EmployeeServiceImpl implements EmployeeService{

    @Autowired
    EmployeeDao employeeDao;
    @Autowired
    AddressDao addressDao;

    @Override
    public void insertEmployee(Employee e) {
        employeeDao.insertEmployee(e);
        addressDao.insertAddress(e.address);

    }
} 
```

这是执行事务的正确方法吗？也有人可以解释`@Transactional(propagation = Propagation.SUPPORTS, readOnly = true)`而不是简单的 @Transactional 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T10:28:14.147

尽管@Transactional 注释可以完成这项工作，但事务通常是在服务级别上定义的。这样，一个业务调用就在一个事务中，确保一切成功或失败。

[您可以在此处](http://sujitpal.blogspot.be/2007/03/spring-jdbctemplate-and-transactions.html)阅读与 jdbctemplate 结合使用的 @transactional

# python - 提取电话号码的正则表达式

> ID：13912235
> 
> 赞同：1
> 
> 时间：2012-12-17T10:21:58.463
> 
> 标签：python, regex

我是正则表达式的新手，我正在尝试编写电话号码模式，以便识别它们并能够提取它们。我的疑惑可以总结为以下简单的例子：

我首先尝试确定字符串中是否有类似 (+34) 的内容，它应该是可选的：

```
prefixsrch = re.compile(r'(\(?\+34\)?)?') 
```

我以下列方式在以下字符串中进行测试：

```
line0 = "(+34)"
print prefixsrch.findall(line0) 
```

产生结果：

> ['(+34)',''] 我的第一个问题是：为什么它会找到两次出现的模式？我想这与前缀是可选的这一事实有关，但我并不完全理解它。无论如何，现在我的大疑问

如果我们做类似的事情来搜索 9 位数字的模式，我们会得到相同的结果：

```
numsrch = re.compile(r'\d{9}')
line1 = "971756754"
print numsrch.findall(line1) 
```

产生类似的东西：

> ['971756754']

这很好。现在我想要做的是识别一个 9 位数字，前面有或没有，由 (+34)。因此，据我了解，我应该执行以下操作：

```
phonesrch = re.compile(r'(\(?\+34\)?)?\d{9}') 
```

如果我在以下字符串中测试它......

```
line0 = "(+34)971756754"
line1 = "971756754"

print phonesrch.findall(line0)
print phonesrch.findall(line1) 
```

令我惊讶的是，这是我得到的：

['(+34)'] ['']

我期望得到的是 ['(+34)971756754'] 和 ['971756754']。有人对此有见识吗？非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T10:37:36.300

你的捕获组是错误的。在非捕获组中制作国家代码和捕获组中的整个表达式

```
>>> line0 = "(+34)971756754"
>>> line1 = "971756754"
>>> re.findall(r'((?:\(?\+34\)?)?\d{9})',line0)
['(+34)971756754']
>>> re.findall(r'((?:\(?\+34\)?)?\d{9})',line1)
['971756754']

 My first question is: why does it find two occurrences of the pattern? 
```

这是因为，`?`这意味着它匹配 0 或 1 次重复，因此空字符串也是有效匹配

# jmeter - 每个线程组的概率

> ID：13912241
> 
> 赞同：4
> 
> 时间：2012-12-17T10:22:15.143
> 
> 标签：jmeter

如果我的测试计划中有 3 个线程组，如何为每个组设置恒定概率（请求权重）？我是 JMeter 的新手。能否请您在屏幕截图上显示您的设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T22:45:07.653

好吧，只需将每个组的线程数设置为测试的总线程数。如果是 100 VU，g1 设置为 50，g2 设置为 30，g3 设置为 20。

要使其动态化，您可以使用[BeanShell](http://jmeter.apache.org/usermanual/functions.html#__BeanShell)函数，您可以将 Number of Threads 设置为：

```
${__BeanShell(50*${USERS}/100)} 
```

并且将使用包含以下内容的[用户定义变量](http://jmeter.apache.org/usermanual/component_reference.html#User_Defined_Variables)：

```
USERS : ${__P(USERS, 10)} // for 10 users by default, 
```

然后可以将用户作为命令行选项传递：

```
-JUSERS=100 
```

样本：

```
<?xml version="1.0" encoding="UTF-8"?>
<jmeterTestPlan version="1.2" properties="2.4" jmeter="2.9-SNAPSHOT.20121216">
  <hashTree>
    <TestPlan guiclass="TestPlanGui" testclass="TestPlan" testname="Test Plan" enabled="true">
      <stringProp name="TestPlan.comments"></stringProp>
      <boolProp name="TestPlan.functional_mode">false</boolProp>
      <boolProp name="TestPlan.serialize_threadgroups">false</boolProp>
      <elementProp name="TestPlan.user_defined_variables" elementType="Arguments" guiclass="ArgumentsPanel" testclass="Arguments" testname="User Defined Variables" enabled="true">
        <collectionProp name="Arguments.arguments"/>
      </elementProp>
      <stringProp name="TestPlan.user_define_classpath"></stringProp>
    </TestPlan>
    <hashTree>
      <Arguments guiclass="ArgumentsPanel" testclass="Arguments" testname="User Defined Variables" enabled="true">
        <collectionProp name="Arguments.arguments">
          <elementProp name="USERS" elementType="Argument">
            <stringProp name="Argument.name">USERS</stringProp>
            <stringProp name="Argument.value">${__P(USERS, 20)}</stringProp>
            <stringProp name="Argument.metadata">=</stringProp>
            <stringProp name="Argument.desc">20 is default, to change it on command line -JUSERS=30</stringProp>
          </elementProp>
        </collectionProp>
      </Arguments>
      <hashTree/>
      <ThreadGroup guiclass="ThreadGroupGui" testclass="ThreadGroup" testname="Run50Pct" enabled="true">
        <stringProp name="ThreadGroup.on_sample_error">continue</stringProp>
        <elementProp name="ThreadGroup.main_controller" elementType="LoopController" guiclass="LoopControlPanel" testclass="LoopController" testname="Loop Controller" enabled="true">
          <boolProp name="LoopController.continue_forever">false</boolProp>
          <stringProp name="LoopController.loops">1</stringProp>
        </elementProp>
        <stringProp name="ThreadGroup.num_threads">${__BeanShell(50*${USERS}/100)}</stringProp>
        <stringProp name="ThreadGroup.ramp_time">1</stringProp>
        <longProp name="ThreadGroup.start_time">1356191395000</longProp>
        <longProp name="ThreadGroup.end_time">1356191395000</longProp>
        <boolProp name="ThreadGroup.scheduler">false</boolProp>
        <stringProp name="ThreadGroup.duration"></stringProp>
        <stringProp name="ThreadGroup.delay"></stringProp>
      </ThreadGroup>
      <hashTree>
        <DebugSampler guiclass="TestBeanGUI" testclass="DebugSampler" testname="DS1" enabled="true">
          <boolProp name="displayJMeterProperties">false</boolProp>
          <boolProp name="displayJMeterVariables">true</boolProp>
          <boolProp name="displaySystemProperties">false</boolProp>
        </DebugSampler>
        <hashTree/>
      </hashTree>
      <ThreadGroup guiclass="ThreadGroupGui" testclass="ThreadGroup" testname="Run20Pct" enabled="true">
        <stringProp name="ThreadGroup.on_sample_error">continue</stringProp>
        <elementProp name="ThreadGroup.main_controller" elementType="LoopController" guiclass="LoopControlPanel" testclass="LoopController" testname="Loop Controller" enabled="true">
          <boolProp name="LoopController.continue_forever">false</boolProp>
          <stringProp name="LoopController.loops">1</stringProp>
        </elementProp>
        <stringProp name="ThreadGroup.num_threads">${__BeanShell(20*${USERS}/100)}</stringProp>
        <stringProp name="ThreadGroup.ramp_time">1</stringProp>
        <longProp name="ThreadGroup.start_time">1356191395000</longProp>
        <longProp name="ThreadGroup.end_time">1356191395000</longProp>
        <boolProp name="ThreadGroup.scheduler">false</boolProp>
        <stringProp name="ThreadGroup.duration"></stringProp>
        <stringProp name="ThreadGroup.delay"></stringProp>
      </ThreadGroup>
      <hashTree>
        <DebugSampler guiclass="TestBeanGUI" testclass="DebugSampler" testname="DS2" enabled="true">
          <boolProp name="displayJMeterProperties">false</boolProp>
          <boolProp name="displayJMeterVariables">true</boolProp>
          <boolProp name="displaySystemProperties">false</boolProp>
        </DebugSampler>
        <hashTree/>
      </hashTree>
      <ThreadGroup guiclass="ThreadGroupGui" testclass="ThreadGroup" testname="Run30Pct" enabled="true">
        <stringProp name="ThreadGroup.on_sample_error">continue</stringProp>
        <elementProp name="ThreadGroup.main_controller" elementType="LoopController" guiclass="LoopControlPanel" testclass="LoopController" testname="Loop Controller" enabled="true">
          <boolProp name="LoopController.continue_forever">false</boolProp>
          <stringProp name="LoopController.loops">1</stringProp>
        </elementProp>
        <stringProp name="ThreadGroup.num_threads">${__BeanShell(30*${USERS}/100)}</stringProp>
        <stringProp name="ThreadGroup.ramp_time">1</stringProp>
        <longProp name="ThreadGroup.start_time">1356191395000</longProp>
        <longProp name="ThreadGroup.end_time">1356191395000</longProp>
        <boolProp name="ThreadGroup.scheduler">false</boolProp>
        <stringProp name="ThreadGroup.duration"></stringProp>
        <stringProp name="ThreadGroup.delay"></stringProp>
      </ThreadGroup>
      <hashTree>
        <DebugSampler guiclass="TestBeanGUI" testclass="DebugSampler" testname="DS3" enabled="true">
          <boolProp name="displayJMeterProperties">false</boolProp>
          <boolProp name="displayJMeterVariables">true</boolProp>
          <boolProp name="displaySystemProperties">false</boolProp>
        </DebugSampler>
        <hashTree/>
      </hashTree>
      <ResultCollector guiclass="ViewResultsFullVisualizer" testclass="ResultCollector" testname="View Results Tree" enabled="false">
        <boolProp name="ResultCollector.error_logging">false</boolProp>
        <objProp>
          <name>saveConfig</name>
          <value class="SampleSaveConfiguration">
            <time>true</time>
            <latency>true</latency>
            <timestamp>true</timestamp>
            <success>true</success>
            <label>true</label>
            <code>true</code>
            <message>false</message>
            <threadName>true</threadName>
            <dataType>false</dataType>
            <encoding>false</encoding>
            <assertions>false</assertions>
            <subresults>false</subresults>
            <responseData>false</responseData>
            <samplerData>false</samplerData>
            <xml>false</xml>
            <fieldNames>true</fieldNames>
            <responseHeaders>false</responseHeaders>
            <requestHeaders>false</requestHeaders>
            <responseDataOnError>false</responseDataOnError>
            <saveAssertionResultsFailureMessage>false</saveAssertionResultsFailureMessage>
            <assertionsResultsToSave>0</assertionsResultsToSave>
            <bytes>true</bytes>
            <hostname>true</hostname>
            <threadCounts>true</threadCounts>
            <sampleCount>true</sampleCount>
          </value>
        </objProp>
        <stringProp name="filename"></stringProp>
      </ResultCollector>
      <hashTree/>
      <ResultCollector guiclass="StatVisualizer" testclass="ResultCollector" testname="Aggregate Report" enabled="true">
        <boolProp name="ResultCollector.error_logging">false</boolProp>
        <objProp>
          <name>saveConfig</name>
          <value class="SampleSaveConfiguration">
            <time>true</time>
            <latency>true</latency>
            <timestamp>true</timestamp>
            <success>true</success>
            <label>true</label>
            <code>true</code>
            <message>false</message>
            <threadName>true</threadName>
            <dataType>false</dataType>
            <encoding>false</encoding>
            <assertions>false</assertions>
            <subresults>false</subresults>
            <responseData>false</responseData>
            <samplerData>false</samplerData>
            <xml>false</xml>
            <fieldNames>true</fieldNames>
            <responseHeaders>false</responseHeaders>
            <requestHeaders>false</requestHeaders>
            <responseDataOnError>false</responseDataOnError>
            <saveAssertionResultsFailureMessage>false</saveAssertionResultsFailureMessage>
            <assertionsResultsToSave>0</assertionsResultsToSave>
            <bytes>true</bytes>
            <hostname>true</hostname>
            <threadCounts>true</threadCounts>
            <sampleCount>true</sampleCount>
          </value>
        </objProp>
        <stringProp name="filename"></stringProp>
      </ResultCollector>
      <hashTree/>
    </hashTree>
  </hashTree>
</jmeterTestPlan> 
```

# php - 从数组中删除与 PHP 中的特定条件匹配的项目

> ID：13912242
> 
> 赞同：5
> 
> 时间：2012-12-17T10:22:18.200
> 
> 标签：php, arrays, preg-match, unset

我有一系列产品，我需要删除所有参考网络研讨会的产品

我使用的 PHP 版本是 5.2.9

```
$category->products 
```

例子：

```
 [6] => stdClass Object
            (
                [pageName] => another_title_webinar
                [title] => Another Webinar Title
            )

        [7] => stdClass Object
            (
                [pageName] => support_webinar
                [title] => Support Webinar
            )
[8] => stdClass Object
            (
                [pageName] => support
                [title] => Support
            ) 
```

在这种情况下，数字 8 将被留下，但其他两个将被剥夺......

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T10:24:40.240

查看[array_filter()](http://php.net/array-filter)。假设您运行 PHP 5.3+，这可以解决问题：

```
$this->categories = array_filter($this->categories, function ($obj) {
    if (stripos($obj->title, 'webinar') !== false) {
        return false;
    }

    return true;
}); 
```

对于 PHP 5.2：

```
function filterCategories($obj)
{
    if (stripos($obj->title, 'webinar') !== false) {
        return false;
    }

    return true;
}

$this->categories = array_filter($this->categories, 'filterCategories'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T10:25:45.993

你可以试试

```
$category->products = array_filter($category->products, function ($v) {
    return stripos($v->title, "webinar") === false;
}); 
```

[简单的在线演示](http://eval.in/4810)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T10:25:37.723

您可以使用 array_filter 方法。[http://php.net/manual/en/function.array-filter.php](http://php.net/manual/en/function.array-filter.php)

```
function stripWebinar($el) {
  return (substr_count($el->title, 'Webinar')!=0);
}

array_filter($category->products, "stripWebinar") 
```

# c++ - OpenGL多个立方体，旋转，移动

> ID：13912245
> 
> 赞同：1
> 
> 时间：2012-12-17T10:22:25.920
> 
> 标签：c++, opengl

我正在从这个教程中学习： http: [//en.wikibooks.org/wiki/Category](http://en.wikibooks.org/wiki/Category:OpenGL_Programming) :OpenGL_Programming http://www.opengl-tutorial.org/

[我已经修改了http://www.opengl-tutorial.org/](http://www.opengl-tutorial.org/)的第 7 课，以便立方体旋转，现在我想做的是在不同的地方有两个或树立方体并让它们旋转（立方体），但我真的不知道该怎么做。所以我在问并希望得到一些帮助。

旋转由以下代码进行：

```
glm::vec3 axis_y(0, 1, 0);
glm::mat4 anim = glm::rotate(glm::mat4(1.0f), angle, axis_y);
...
glm::mat4 MVP = ProjectionMatrix * ViewMatrix * ModelMatrix * anim; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T10:44:16.863

我没有详细介绍教程，但原则上，您需要为每个立方体创建一个模型矩阵，然后使用`MVP`从立方体的模型矩阵（和全局视图）构造的自己的值渲染每个立方体& 投影矩阵）。

以上可以为您提供三个不同位置、旋转和比例的相同立方体。如果你想要三个不同的对象，你需要分别加载它们，最好是加载到它自己的缓冲区对象中。

**编辑**

我不知道教程使用的库，但编码的原则可能是这样的：

```
for (int idxCube = 0; idxCube < 3; ++idxCube) {
  glm::mat4 offset = glm::translate(10 * idxCube, 0, 0);
  glm::mat4 MVP = ProjectionMatrix * ViewMatrix * ModelMatrix * offset * anim;
  glUniformMatrix4fv(MatrixID, 1, GL_FALSE, &MVP[0][0]);
  glDrawArrays(...);
} 
```

这将在位置 和 处给出 3`(0, 0, 0)`个`(10, 0, 0)`立方体`(20, 0, 0)`。

更一般地说，每个立方体只有一个`ModelMatrix`。

# c++ - 在调试时检查地图的内容

> ID：13912246
> 
> 赞同：9
> 
> 时间：2012-12-17T10:22:31.537
> 
> 标签：c++, debugging, map, unordered-map

对于调试，我需要查看地图（`std::unordered_map`或`std::map`）的内容，Eclipse CDT 调试器没有以可读的形式提供给我，例如`{1: 2, 3:4, ...}`

在调试时检查地图内容的最佳方法是什么？

我必须回到使用打印语句进行调试吗？如果是，那么简洁的宏或函数将如何将任何地图的内容打印为字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T10:42:51.137

GDB 可以用[Python进行](http://sourceware.org/gdb/onlinedocs/gdb/Python.html)[扩展](http://sourceware.org/gdb/onlinedocs/gdb/Extending-GDB.html#Extending-GDB)，并且有一个用于[漂亮打印](http://sourceware.org/gdb/onlinedocs/gdb/Pretty-Printing-API.html)的 API 。

有[许多漂亮的 C++ 打印机可用](https://www.google.com/search?q=gdb+python+pretty+print&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla%3aen-US%3aofficial&client=firefox-a#hl=en&client=firefox-a&hs=O5t&tbo=d&rls=org.mozilla%3aen-US%3Aofficial&sclient=psy-ab&q=gdb+python+pretty+print+c%2B%2B&oq=gdb+python+pretty+print+c%2B%2B&gs_l=serp.3...199791.200254.0.200467.4.4.0.0.0.0.116.314.3j1.4.0.les%3B..0.0...1c.1.-1RvSW2nR_o&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.&bvm=bv.1355325884,d.bGE&fp=33d9d6dbf12ca4df&bpcl=39967673&biw=1918&bih=977)，例如[这台](http://lumiera.org/documentation/technical/howto/DebugGdbPretty.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T10:32:18.723

> 我必须回到使用打印语句进行调试吗？如果是，那么简洁的宏或函数将如何将任何地图的内容打印为字符串？

我不知道你是否这样做 - 我不使用 Eclipse，但打印地图非常容易：

```
template <typename K, typename V>
std::ostream& operator<<(std::ostream& os, const std::map<K, V>& m)
{
    os << "{ ";
    for (typename std::map<K, V>::const_iterator i = m.begin(); i != m.end(); ++i)
    {
        if (i != m.begin()) os << ", ";
        os << i->first << ": " << i->second;
    }
    return os << " }";
} 
```

然后你就可以使用`<< my_map`. 请注意，尽管在大型代码库中，其他人可能会有相同的“聪明”想法，因此您可能希望将您的辅助函数放在您自己的命名空间中，或者给它一个更本地化的名称。诸如周围`"{ "`和分隔符的选择是任意的`" }"`，`", "`可能并不适合所有用户 - 有些人可能想要自动字符串引用/转义等，所以在最好的情况下将它放在全局命名空间中是可疑的，在这种情况下它甚至可能被保留以备将来可能包含在 C++ 标准或其他东西中——毕竟，它有点喜欢将您自己的名字添加到`std::`命名空间中。如果您关心，请检查标准。

# c - 类型转换指针

> ID：13912248
> 
> 赞同：1
> 
> 时间：2012-12-17T10:22:35.387
> 
> 标签：c, typecasting-operator

我有一个**变量**

```
UInt32 PageAddr = 0x80000000; 
```

和一个**函数**

```
UInt8 Blank_Check(const UInt8 *Address) 
```

我在类型转换变量后调用该**函数。**

```
Blank_Check((UInt8 *)&PageAddr); 
```

将传递给空白支票的**值**是多少。我试图分析，但我无法理解它是如何工作的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T10:23:31.370

*短版：删除`&`字符。*

**更长的版本：**

它将是完全相同的指针值。该类型只是为了帮助 C 编译器知道如何索引和取消引用指针。

要澄清值和指针之间的区别，请尝试：

```
UInt32 PageAddr = 0x80000000;
printf("%d,   %p\n", PageAddr, &PageAddr); 
```

通过变量的名称，我猜你真的想做类似的事情：

```
Uint32* PageAddr = 0x80000000;   /* as a pointer */

Blank_Check((UInt8 *)PageAddr);  /* cast pointer to another kind of pointer */ 
```

或者，如果您想将指针表示为整数（几乎适用于所有平台，但不是 100% 可移植的），如下所示：

```
Uint32 PageAddr = 0x80000000;   /* as an integer */

Blank_Check((UInt8 *)PageAddr); /* cast integer to pointer */ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T10:32:43.310

传递的值是`PageAddr`编译器将变量放入内存的地址。这就是传递的**值**。

实际上，C 是一种仅按值传递的语言。传递变量时，传递变量的值。当你传递一个指针时，就像`&PageAddr`的地址`PageAddr`变成了传递的值。

稍后，在被调用的函数中，您可以使用地址值来查看或更改该地址中存储的内容。

这与允许通过引用传递的语言（如 C++ 或 Java）形成对比，其中传递了对值的引用，在这种情况下，您对引用或对引用执行的任何操作实际上都是对原始变量执行的。

# c++ - 导出对象渲染opengl

> ID：13912253
> 
> 赞同：0
> 
> 时间：2012-12-17T10:22:51.817
> 
> 标签：c++, c, opengl, opencv

我有一个格式为 .obj 的 CAD 文件，我想用旋转平移进行渲染，并为我的不同对象获取 2D 位置。

我使用 C/C++ 和 OPENGL。使用库 assimp，我可以加载对象并进行旋转翻译。

但我的问题是：如何使用对象的属性导出这些信息？因为我必须将这些信息与 OPENCV 一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:29:41.923

您可能对[转换反馈](http://www.opengl.org/wiki/Transform_Feedback)感兴趣。或者你只是在没有 OpenGL 的 CPU 上做矩阵数学，因为变换反馈是唯一的方法，当使用 OpenGL 来解决你的问题时实际上是有意义的。

# java - Box2D AndEngine：在 ContactListener 期间创建关节时应用程序挂起？

> ID：13912254
> 
> 赞同：2
> 
> 时间：2012-12-17T10:22:53.333
> 
> 标签：java, android, box2d, andengine, game-engine

我在 AndEngine 中使用**Box2D**（适用于 Android）。

***我的目的是在两个物体相互碰撞时创建一个力关节。***

当我在过程中尝试在 2 个对象（实体）之间创建**鼠标关节****`ContactListner`**时。应用程序将挂起一段时间然后退出，没有任何错误，只是线程结束的通知。

当我*在 ContactListener 之外*调用时，联合创建是**可以**的- 当应用程序在某个物理.UpdateHandler() 中运行时的某个地方。**`mEnvironment.CreateForceJoint(..)`**

 *请帮我解决问题，或找出原因。谢谢你的帮助！

**`This is my code:`**

```
public class MyActivity extends SimpleBaseGameActivity {
    private final String DEBUG_TAG = "MyActivity";
    private GEnvironment mEnvironment;
    private PhysicsWorld mPhysicsWorld;

    private MyFixture FIXTURE_PLANET = GlobalSettings.FIXTURE_PLANET;
    private MyFixture FIXTURE_VACUUM = GlobalSettings.FIXTURE_VACUUM;

    // CODE TO CREATE RESOURCES and ENGINE OPTIONS....

    @Override
    protected Scene onCreateScene() {
        Scene scene = new Scene();
        scene.setBackground(new Background(0.8627f, 0.9020f, 1.0f));

        //CODE: creating physic world
        //.....

        //creating game environment
        mEnvironment = new GEnvironment(mPhysicsWorld, scene, mEngine);

        //CODE: creating objects, register and attach them into scene
        GMediaPlanet sunZone = mEnvironment.CreatePlanet(x1, y1, sunTextureRegion, FIXTURE_PLANET);
        GMediaPlanet earthZone = mEnvironment.CreatePlanet(x2, y2, earthTextureRegion, FIXTURE_PLANET);

        // enable contact listener, detect collision between bodies
        mPhysicsWorld.setContactListener(new PlanetContactHandler());

        return scene;
    }

    // ----------------------------------------------------
    // Handling collision between letter cubes
    // ----------------------------------------------------
    /**
     * Handling the collision of GMediaPlanets
     */
    public class PlanetContactHandler implements ContactListener {
        private final String DEBUG_TAG = "CONTACT";

        // if there's one collision, do not handle others or re-handle it
        private boolean mIsColliding = false;

        @Override
        public void beginContact(Contact contact) {
            if (mIsColliding)
                return;

            //-----------------------------------------------
            //suppose colliding objects to be sunZone and earthZone
            //-----------------------------------------------
            Object aTag = contact.getFixtureA().getBody().getUserData();
            Object bTag = contact.getFixtureB().getBody().getUserData();

            if (aTag != null && bTag != null) {
                GMediaPlanet box = null;
                GMediaPlanet cube = null;

                if (aTag instanceof GMediaPlanet
                        && bTag instanceof GMediaPlanet) {
                    box = (GMediaPlanet) aTag;
                    cube = (GMediaPlanet) bTag;
                }

                if (box != null && cube != null) 
                {
                    //!!!!!!!-----------------------------------------------------
                    //This code will HANG the app when called inside contact listner:
                    MouseJoint mTestJoint = mEnvironment.CreateForceJoint(box, cube);
                    //!!!!!!!-----------------------------------------------------

                    Vector2 target = Vector2Pool.obtain(box.GetLocation());
                    mTestJoint.setTarget(target);
                    Vector2Pool.recycle(target);
                }
            }
            mIsColliding = true;
        }

        @Override
        public void endContact(Contact contact) {
            Log.d(DEBUG_TAG, "end colliding!");
            mIsColliding = false;
        }

        @Override
        public void preSolve(Contact contact, Manifold oldManifold) {

        }

        @Override
        public void postSolve(Contact contact, ContactImpulse impulse) {

        }
    }
}

public class GMediaPlanet 
{
    protected IAreaShape mSprite = null;
    protected Body mBody = null;

    public GMediaPlanet()
    {   }

    public Vector2 GetLocation()
    {
        mBody.getPosition();
    }

}//end

public class GEnvironment 
{
    private PhysicsWorld mWorld;
    private Scene mScene;
    private org.andengine.engine.Engine mEngine;

    public GEnvironment(PhysicsWorld pWorld, Scene pScene, org.andengine.engine.Engine pEngine)
    {
        mWorld = pWorld;
        mScene = pScene;
        mEngine = pEngine;
    }

    /** the constructor is hidden, available within Appearances packet only */
    public GMediaPlanet CreatePlanet(float pX, float pY, ITextureRegion pTextureRegion, MyFixture pFixture) 
    {
        GMediaPlanet entity = new GMediaPlanet();
        entity.mSprite = new Sprite(pX, pY, pTextureRegion, mEngine.getVertexBufferObjectManager());
        entity.mBody = PhysicsFactory.createCircleBody(mWorld, entity.mSprite, BodyType.DynamicBody,
                pFixture.GetDef(), GlobalSettings.PIXEL_2_METER);

        mScene.attachChild(entity.mSprite);

        entity.mSprite.setUserData(entity.mBody);
        entity.mBody.setUserData(entity);

        mWorld.registerPhysicsConnector(new PhysicsConnector(entity.mSprite, entity.mBody, true, true));

        return entity;
    }

    // -----------------------------
    // Creating JOINTS
    // -----------------------------
    /**
     * Creating a force joit based on type of MouseJointDef
     * 
     * @param anchorObj
     *            the static object in the mTestJoint (anchor base)
     * @param movingObj
     *            object to move forward the target
     */
    public MouseJoint CreateForceJoint(GMediaPlanet anchorObj, GMediaPlanet movingObj)
    {
        ChangeFixture(movingObj, GlobalSettings.FIXTURE_VACUUM);

        MouseJointDef jointDef = new MouseJointDef();

        jointDef.dampingRatio = GlobalSettings.MOUSE_JOINT_DAMP;
        jointDef.frequencyHz = GlobalSettings.MOUSE_JOINT_FREQ;
        jointDef.collideConnected = true;

        Vector2 initPoint = Vector2Pool.obtain(movingObj.mBody.getPosition());
        jointDef.bodyA = anchorObj.mBody;
        jointDef.bodyB = movingObj.mBody;
        jointDef.maxForce = (GlobalSettings.MOUSE_JOINT_ACCELERATOR * movingObj.mBody.getMass());

        // very important!!!, the initial target must be position of the sattelite
        jointDef.target.set(initPoint);
        MouseJoint joint = (MouseJoint) mWorld.createJoint(jointDef);
        Vector2Pool.recycle(initPoint);

        // very important!!!, the target of the joint then changed to target anchor object
        Vector2 targetPoint = Vector2Pool.obtain(anchorObj.mBody.getWorldCenter());
        joint.setTarget(targetPoint);
        Vector2Pool.recycle(targetPoint);

        return joint;
    }

    public void ChangeFixture(GMediaPlanet entity, MyFixture pFixture)
    {
        Filter fil = new Filter();
        fil.categoryBits = pFixture.categoryBit;
        fil.maskBits = pFixture.maskBits;
        if(entity.mBody != null)
        {
            entity.mBody.getFixtureList().get(0).setFilterData(fil);            
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T10:50:33.783

你不能在 Box2D 的 Step()-Call 中修改世界，因为世界被锁定了！你应该得到一个例外。您必须记住在 beginContact.. 之后哪些对象正在发生碰撞并执行某些操作，例如在更新函数中。*

# javascript - 试图理解这个 location.href.match JS RegExp 部分

> ID：13912257
> 
> 赞同：3
> 
> 时间：2012-12-17T10:23:06.327
> 
> 标签：javascript, regex

我试图理解这个 javascript 正则表达式。

谁能给我一个关于这个正则表达式部分的解释？

```
location.href.match(/^http:\/\/(www\.)?example.com/i) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T10:27:17.653

让我们把它分成几部分：

`^http:\/\/`= 字符串必须以 . 开头`http://`。反斜杠在那里，因为如果他们不这样做，斜杠将结束正则表达式模式。

`(www\.)?`= 如果存在则匹配`www.`（这就是问号的用途）

`example.com`= 字符串后面必须跟`example.com`

`i`= 不区分大小写

所以这些是可能的匹配：

*   `http://example.com`
*   `http://www.example.com`
*   `http://www.EXAMPLE.COM`
*   `http://www.example.com/some/page/`

不幸的是，正则表达式与 HTTPS 协议不匹配。我们可以使用与`www.`使用问号相同的方法：

`/^http(s)?:\/\/(www\.)?example.com/i`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T10:27:40.847

```
^           - start of line
http:       - http:
\/\/        - //
(www\.)?    - www. 0 or 1 time
example.com - example.com 
```

该`i`标志表示整个表达式不区分大小写，因此`HTTP://WWW.EXAMPLE.COM`也将匹配。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T10:28:32.470

```
/^http:\/\/(www\.)?example.com/i

1) ^ - carret (matches start of line / string)
2) http: - matches the actual 'http:' string
3) \/\/ - matches // (needs escaping with \)
4) (www\.)? - can contain or not the string 'www.' (? = 0 or 1 times)
5) example.com - matches the actual 'example.com' string
6) trailing i - case insensitive 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T10:31:44.403

正则表达式：

```
/^http:\/\/(www\.)?example.com/i 
```

As explained in javascript the regexp is in the forme ([http://www.w3schools.com/js/js_obj_regexp.asp](http://www.w3schools.com/js/js_obj_regexp.asp)) :

```
/pattern/modifiers 
```

**So the pattern** :

```
^http:\/\/(www\.)?example.com 
```

`^` start with

`http:\/\/` 'http://' with the slashes escaped

`(www\.)?` 0 or 1 time 'www.'

`example.com` 'example', any char exept newline, 'com'

if you want 'example.com' only, use `example\.com`

**The modifier :**

`i` case insensitive

# if-statement - if条件下的scheme操作

> ID：13912264
> 
> 赞同：2
> 
> 时间：2012-12-17T10:23:28.057
> 
> 标签：if-statement, functional-programming, scheme, conditional

一般在 Scheme - `syntax: (if test consequent alternate)`.

我尝试在该`consequent`部分中进行一些操作，例如：*如果为 true，则将 sum1 设置为 44 并返回 1*。
在方案代码中 -

```
(if #t ( 
          (set! sum1 44)
          (if #t 1)
          )) 
```

上面的代码行不通并提示——

```
application: not a procedure;
 expected a procedure that can be applied to arguments
  given: #<void>
  arguments...:
   1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T10:42:24.567

在 Scheme 中，括号总是用于应用程序；您不能为分组添加额外的括号。

你的`consequent`这里是：

```
((set! sum1 44) (if #t 1)) 
```

外圆括号使 Scheme 尝试将 的结果`(set! sum1 44)`用作过程，将其应用于 的结果`(if #t 1)`。

您想要的（我认为）是按顺序评估两个表达式，然后返回最后一个表达式的结果。这样做的形式是`begin`，所以它应该是：

```
(begin (set! sum1 44) (if #t 1)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T10:42:31.060

```
(if #t (begin 
          (set! sum1 44)
          (if #t 1))) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-17T14:16:28.163

`if`如果你写了一个没有部分的解释器，一些解释器（例如 Racket）会抱怨`else`。为了处理这个问题，并且为了避免`begin`在结果部分中有多个表达式时显式使用 a ，最好使用[`when`](http://docs.racket-lang.org/reference/when_unless.html?q=when&q=when#%28form._%28%28lib._racket/private/letstx-scheme..rkt%29._when%29%29=)特殊形式（如果可用，因为它是非标准的）：

```
(when #t
  (set! sum1 44)
  (when #t 1)) 
```

一般来说，这是 a`when`及其兄弟的结构`unless`：

```
(when <condition>    ; equivalent to (if <condition> (begin ...))
  <exp1>             ; consequent, no alternative
  <exp2>)

(unless <condition>  ; equivalent to (if (not <condition>) (begin ...))
  <exp1>             ; consequent, no alternative
  <exp2>) 
```

如果 consequent 和 alternative 都有多个表达式，则可以在每个部分中使用`if`with a ：`begin`

```
(if <condition>
    (begin     ; consequent
      <exp1>
      <exp2>)
    (begin     ; alternative
      <exp3>
      <exp4>)) 
```

...但是使用 a 会更实用，它在每个子句中都`cond`隐式使用 a ：`begin`

```
(cond (<condition>
       <exp1>  ; consequent
       <exp2>)
      (else    ; alternative
       <exp3>
       <exp4>)) 
```

# ruby-on-rails-3 - 与 Rails 中的包含相反

> ID：13912268
> 
> 赞同：0
> 
> 时间：2012-12-17T10:23:32.413
> 
> 标签：ruby-on-rails-3, eager-loading

假设我有

```
#post.rb

class Post < ActiveRecord::Base

default_scope includes(:user) 
```

如果我不想在获取帖子时包含用户，我该怎么办？

例如，当我删除帖子时

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T10:26:29.380

您可以使用无范围的范围。方法参考：[http ://apidock.com/rails/ActiveRecord/Scoping/Default/ClassMethods/unscoped](http://apidock.com/rails/ActiveRecord/Scoping/Default/ClassMethods/unscoped)

例如，当尝试删除 Post 对象时：

```
def destroy
  @post = Post.unscoped.find(params[:id])
  # destroy code here
end 
```

这将在您的数据库中搜索而没有任何范围。

# javascript - Javascript拼接方法从两个数组中删除值

> ID：13912270
> 
> 赞同：0
> 
> 时间：2012-12-17T10:23:50.233
> 
> 标签：javascript, splice

Javascript（使用 jQuery）：

```
var paragraphs = [
    ['This is my first paragraph content of the first array', 'This is my second paragraph content of the first array', 'This is my third paragraph content of the first array'],
    ['This is my first paragraph content of the second array', 'This is my second paragraph content of the second array', 'This is my third paragraph content of the second array']
],
text_box_value,
unused_paragraphs = null;

$(document).ready(function(){
    $('input#text_box').keyup(function(){
        text_box_value = $(this).val(); 
    });

    $('input#submit_button').click(function(){
        if(unused_paragraphs === null) {
            unused_paragraphs = paragraphs; 
        }

        for(var i = 0; i < unused_paragraphs.length; i++) {
            if(unused_paragraphs[i].length == 0)
                unused_paragraphs[i] = paragraphs[i];

            while(unused_paragraphs[i].length != 0) {
                var rand = Math.floor(Math.random() * unused_paragraphs[i].length);
                if(unused_paragraphs[i][rand].search(text_box_value) !== -1) {
                    $("#paragraphs_container").append('<p>' + unused_paragraphs[i][rand] + '</p>');
                    break;
                }

                unused_paragraphs[i].splice(rand, 1);
            }   
        }

        console.log(unused_paragraphs);
        console.log(paragraphs);

    });

}); 
```

我的问题是为什么当我`splice`对变量使用方法时，它也会从变量`unused_paragraphs`中删除值`paragraphs`

**稍后编辑** [JSFiddle](http://jsfiddle.net/7F5z2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T10:49:04.987

将对象复制到新对象..

尝试这个..

```
var unused_paragraphs= jQuery.extend(true, {}, paragraphs); 
```

这只是复制对象的一个​​示例.. 看看

[http://jsfiddle.net/5ExKF/3/](http://jsfiddle.net/5ExKF/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T10:28:56.620

javascript 对象/数组通过引用存储。

如果你想要一个副本，那就是一个技巧：

```
if(typeof unused_paragraphs == "undefined") {
        var unused_paragraphs = [];
        for(var i = 0; i<paragraphs.length; i++) {
            unused_paragraphs[i] = paragraphs[i].slice(0);  
        }
} 
```

和

```
unused_paragraphs[i] = paragraphs[i].slice(0); 
```

# git - 如何取消跟踪 NetBeans/Git 中的文件夹？

> ID：13912274
> 
> 赞同：0
> 
> 时间：2012-12-17T10:23:56.597
> 
> 标签：git, netbeans-7

我们的项目文件中有缓存文件夹。我们作为一个团队工作，并使用 NetBeans 7.2 和 Git 作为 CVS。

缓存文件夹里面有一些子文件夹。我们不希望此文件夹及其子文件夹参与推送操作。

我们如何取消跟踪缓存文件夹及其子文件夹？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:03:57.070

只需将您的缓存文件夹添加到您的`.gitignore`. 可以在[此处](https://help.github.com/articles/ignoring-files)找到有关如何执行此操作的详细信息。您可以将您的提交`.gitignore`到您的仓库，因此该文件夹也将在所有其他机器上被忽略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T10:27:19.630

您可以将子目录添加到顶层`.git/info/exclude`或`.gitignore`，但我认为所有用户都需要这样做。

# ravendb - 备份个人 Raven 数据库

> ID：13912278
> 
> 赞同：1
> 
> 时间：2012-12-17T10:24:15.387
> 
> 标签：ravendb

在旧版本的 Raven (r888) 中，我使用以下命令备份了一个单独的数据库

```
"C:\RavenDB\Server\Raven.Backup.exe" --url=http://localhost:8089/databases/Production --dest=C:\temp\raven\production 
```

这会将生产数据库的备份放置到目标目录中。

在最新的不稳定版本上，升级后命令不再执行，返回错误

```
The system cannot find the path specified. 
```

[文档](http://ravendb.net/docs/server/administration/backup-restore?version=2)提到能够备份整个服务器，但没有提到如何将其隔离到单个数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:44:40.617

实际上，我们总是备份单个数据库。要在单个 db 上执行，请使用 url`http://localhost:8089/databases/Production`注意 /databases/Production 那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T11:53:12.710

可能是您的可执行文件路径错误吗？（用备份替换服务器）“C:\RavenDB\Backup\Raven.Backup.exe”

# r - 按一天中的时间子集 xts 对象

> ID：13912282
> 
> 赞同：3
> 
> 时间：2012-12-17T10:24:20.510
> 
> 标签：r, time, time-series, xts

一个简单的问题：我知道如何`xts`从帮助中将时间序列子集化为年、月和日：`x['2000-05/2001']`等等。

但是如何按一天中的几个小时对数据进行子集化？我想在上午 07:00 到下午 06:00 之间获取所有数据。即，我想在工作时间提取数据 - 与一天无关（我稍后会照顾周末）。帮助有一个表单示例：

```
.parseISO8601('T08:30/T15:00') 
```

但这在我的情况下不起作用。有人有线索吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T16:17:49.830

例如，如果您的`xts`对象被调用`x`，那么`y <- x["T09:30/T11:00"]`我可以使用类似的东西来获得早上会议的一部分。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-09-26T01:58:36.757

出于某种原因，使用 xts 时间`x["T09:30/T11:00"]`非常慢，我使用[R 中的方法：基于一天中的时间](https://stackoverflow.com/questions/8554188/r-efficiently-subsetting-dataframe-based-on-time-of-day)和[data.table 时间子集与 xts 时间子集](https://stackoverflow.com/questions/17345951/data-table-time-subset-vs-xts-time-subset)有效地对数据帧进行子集化，以使用类似的语法创建一个更快的函数：

```
cut_time_of_day <- function(x, t_str_begin, t_str_end){

    tstr_to_sec <- function(t_str){
        #"09:00:00" to sec of day
        as.numeric(as.POSIXct(paste("1970-01-01", t_str), "UTC")) %% (24*60*60)
    }

    #POSIX ignores leap second
    #sec_of_day = as.numeric(index(x)) %% (24*60*60)                                #GMT only
    sec_of_day = {lt = as.POSIXlt(index(x)); lt$hour *60*60 + lt$min*60 + lt$sec}   #handle tzone
    sec_begin  = tstr_to_sec(t_str_begin)
    sec_end    = tstr_to_sec(t_str_end)

    return(x[ sec_of_day >= sec_begin & sec_of_day <= sec_end,])
} 
```

测试：

```
n = 100000
dtime <- seq(ISOdate(2001,1,1), by = 60*60, length.out = n)
attributes(dtime)$tzone <- "CET"
x = xts((1:n), order.by = dtime)

y2 <- cut_time_of_day(x,"07:00:00", "09:00:00")
y1 <- x["T07:00:00/T09:00:00"]

identical(y1,y2) 
```

# iphone - 我如何检查数组是否有对象

> ID：13912285
> 
> 赞同：-5
> 
> 时间：2012-12-17T10:24:22.650
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我想检查旧数组是否有对象如果旧数组有对象它应该向我显示按钮如果 oldArray 有零对象按钮应该隐藏下面给出的代码谢谢...

```
-(void)viewWillAppear:(BOOL)animated
{
    GET_DEFAULTS
    NSMutableArray *array = [defaults objectForKey:kShouldResume];

    NSData *dataRepresentingSavedArray = [defaults objectForKey:kShouldResume];
    if (dataRepresentingSavedArray != nil)
    {
        NSArray *oldSavedArray = [NSKeyedUnarchiver unarchiveObjectWithData:dataRepresentingSavedArray];
        if (oldSavedArray != nil)
        {
            array = [[NSMutableArray alloc] initWithArray:oldSavedArray];
            if ([oldSavedArray containsObject])
            {
                btnResumeGame.hidden=NO;
            }
            else
            {
                btnResumeGame.hidden=YES;
            }
        }
        else
        {
            array = [[NSMutableArray alloc] init];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T10:26:53.120

数组具有属性计数。您可以根据需要检查天气计数是否为零或更多.. 喜欢

```
oldSavedArray.count 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T10:26:50.733

使用此代码：

```
 if ( [oldSavedArray count]>0 ){

         btnResumeGame.hidden=NO;
    }
    else{
        btnResumeGame.hidden=YES;
    } 
```

# c++ - c++11 中的 intrusive_ptr

> ID：13912286
> 
> 赞同：37
> 
> 时间：2012-12-17T10:24:23.830
> 
> 标签：c++, c++11, boost, shared-ptr, smart-pointers

C++11 是否有等同于 的东西`boost::intrusive_ptr`？

我的问题是我的 C++ 代码有一个 C 风格的界面。接口的两端都可以使用 C++，但出于兼容性原因，需要公开 C 接口。我不能使用`std::shared_ptr`，因为我必须通过两个（或更多）智能指针来管理对象。我无法找出类似的解决方案`boost::intrusive_ptr`。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-12-17T11:22:13.473

> c++11 是否有与 boost::intrusive_ptr 等价的东西？

不。

`std::make_shared`它确实具有`std::shared_ptr`几乎*（见下面的注释）*与侵入式智能指针一样高效的方法，因为引用计数将存储在与对象本身相邻的内存中，从而提高了引用的局部性和缓存的使用。它还提供了`std::enable_shared_from_this`允许您`std::shared_ptr`在只有一个指向 a 拥有的对象的内置指针时检索 a 的方法`shared_ptr`，但这不允许您使用不同的智能指针类型来管理该对象。

`shared_ptr`期望完全负责管理对象。不同的智能指针类型可能只管理“强”引用计数而不管理“弱”引用计数，这将允许计数不同步并破坏`shared_ptr`.

* * *

注意：使用`make_shared`允许*几乎*`shared_ptr`与侵入式指针一样有效。对象和引用计数信息可以在使用时分配在单个内存块中，但仍然会有两个引用计数（对于“强”和“弱”计数），这不是侵入性指针的情况他们不支持. 此外，对象本身总是必须存储两个指针（一个将由返回的指针和另一个指向包含引用计数并知道所拥有对象的动态类型的“控制块”的指针），因此占用空间比侵入式指针。*`make_shared``weak_ptr``shared_ptr``shared_ptr::get()`*

# jquery-selectors - jQuery：转换为单个标签

> ID：13912291
> 
> 赞同：0
> 
> 时间：2012-12-17T10:24:51.453
> 
> 标签：jquery-selectors

我想将下面的 HTML 转换为单个标签：之前：

```
<div class="Parent1">
    <div class="Child1">
        <a href="#">Child1</a>
      </div>
      <div class="Child2">
        <a href="#">Child2</a>
      </div>    
    </div>
    <div class="Parent2">
      <div class="Child1">
        <a href="#">Child1</a>
      </div>
      <div class="Child2">
        <a href="#">Child2</a>
      </div>
    </div> 
```

后 ：

```
<div class="Parent1">
  <button>Child1</button>
  <button>Child2</button>
</div>
<div class="Parent2">
  <button>Child1</button>
  <button>Child2</button>
</div> 
```

我尝试了包装/展开。但它不起作用。这我想是通用的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T10:36:58.277

试试这个（[演示](http://jsfiddle.net/CuSdX/2/)）：

```
$('div[class^="Parent"]').each(function(index, parent) {
  var html = [];
  $('a', parent).each(function(index, child) {
      html.push('<button>'+$(child).html()+'</button>');
  });
  $(parent).html(html.join(''));
}); 
```

它假定父 div 有一个模式，但这不是一些常见的类名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T10:56:10.033

一种方法：

```
$("a").unwrap().wrap("<button>").parent().text(function () { 
    return $(this).text();
}); 
```

[http://jsfiddle.net/Tomalak/Gct7H/](http://jsfiddle.net/Tomalak/Gct7H/)

另一个具有相同精神的人：

```
$("a").unwrap().replaceWith(function () {
    return $("<button>", {text: $(this).text()});
}); 
```

* * *

PS：实际上，您可能希望选择更具体的内容，而不仅仅是`$("a")`. 也许`$("#container a")`或`$("a.someClass")`，取决于您的标记。

# php - PHP 会话变量随着标头重定向而消失

> ID：13912297
> 
> 赞同：2
> 
> 时间：2012-12-17T10:25:30.953
> 
> 标签：php, session

当我登录用户并使用标头重定向时，我的会话变量为空。

```
/* Login page */
session_register("myusername");
session_register("mypassword");

$_SESSION['myusername'] = $_POST['myusername'];

header("location:page.php");

/* page.php */

<?php echo $_SESSION[myusername]; ?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T10:28:02.657

当你使用 $_SESSION 超全局数组并且你没有开始你的会话时，你不应该使用 session_register 函数。尝试

```
/* Login page */
session_start();

$_SESSION['myusername'] = $_POST['myusername'];

header("location:page.php");

/* page.php */

session_start();

<?php echo $_SESSION[myusername]; ?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T10:28:00.113

尝试`session_start();`在页面的开头使用..

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T10:27:20.793

您忘记 `session_start();`在页面顶部添加

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T10:26:56.713

添加一个

```
session_start() 
```

第一！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-17T10:30:47.070

您是否在脚本页面的开头包含`session_start()`调用？，这是我所知道的 php 会话中最常见的问题。

# mobile - 黑莓应用程序的电池消耗

> ID：13912304
> 
> 赞同：1
> 
> 时间：2012-12-17T10:25:46.897
> 
> 标签：mobile, blackberry, gprs

是否有任何应用程序/方法/进程可用于获取黑莓中单个应用程序的电池消耗？我正在使用 9300。我的应用程序使用 GPRS 并通过互联网发送数据。

到目前为止，我一直在使用一个线程，它告诉我使用我的应用程序的电话和不使用我的应用程序的电话一小时后电池电量之间的差异。

请建议一个更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T19:29:45.700

不幸的是，BlackBery 并不是真正开放、清晰和记录在案的平台。

我从阿姆斯特丹[信息会议中获得的最佳数字](https://plus.google.com/photos/102191796240841888189/albums/5822997679587023729)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T12:47:58.973

没有可靠的方法来判断您的应用使用了多少电量。正如您已经在做的那样，您可以在调用之前和之后检索级别`DeviceInfo.getBatteryLevel`，但测量的差异也包括其他应用程序使用的电池。

# windows - 复制文件，同时保留所有属性

> ID：13912305
> 
> 赞同：0
> 
> 时间：2012-12-17T10:25:57.450
> 
> 标签：windows, filesystems, copy

我正在尝试为运行 Windows XP 的嵌入式 PC 编写还原脚本，其想法是插入还原 USB 闪存驱动器，启动它并将映像从闪存驱动器复制到 PC。到目前为止工作正常。但是，每台嵌入式 PC 都有一个单独的许可证文件，需要保留。我正在尝试将这些文件复制到闪存驱动器，恢复映像并将它们复制回 PC。如果我使用 Windows 资源管理器复制它们，它们就可以了。如果我使用命令行“copy”或“xcopy”复制它们，它们就会中断。当我使用 C# 和 File.Copy 时也会中断，所以我猜有些属性没有被涵盖。任何想法如何在无需登录的情况下复制这些文件（它们通常没有任何类型的显示器或键盘）？

请注意，许可证文件绑定到硬件 ID，我不想盗版任何东西。

# c++ - 如何使用智能指针作为类属性来复制对象？

> ID：13912310
> 
> 赞同：8
> 
> 时间：2012-12-17T10:26:28.567
> 
> 标签：c++, smart-pointers, copy-constructor, assignment-operator

从[boost 库文档](http://www.boost.org/doc/libs/1_52_0/libs/smart_ptr/smart_ptr.htm)中，我读到了这个：

> 从概念上讲，智能指针被视为拥有所指向的对象，因此在不再需要对象时负责将其删除。

我有一个非常简单的问题：我想将 RAII 用于可复制和可分配的类的指针属性。

复制和赋值操作应该很深：每个对象都应该有自己的实际数据副本。此外，RTTI 需要可用于属性（它们的类型也可以在运行时确定）。

我应该搜索 Copyable 智能指针的实现（数据很小，因此我不需要[Copy on Write](http://ootips.org/yonat/4dev/smart-pointers.html)指针），还是将复制操作委托给我的对象的复制构造函数，如[本答案](https://stackoverflow.com/a/8316151/735756)所示？

对于可复制和可分配的类的简单 RAII，我应该选择哪个智能指针？（我认为将复制/赋值操作委托给类复制构造函数和赋值运算符的 unique_ptr 会做出正确的选择，但我不确定）

这是使用原始指针的问题的**伪代码**，它只是问题描述，而不是正在运行的 C++ 代码：

```
// Operation interface
class ModelOperation
{
    public: 
        virtual void operate = (); 
};

// Implementation of an operation called Special 
class SpecialModelOperation
:
    public ModelOperation
{
    private:
        // Private attributes are present here in a real implementation. 

    public: 

        // Implement operation
        void operate () {}; 
};

// All operations conform to ModelOperation interface
// These are possible operation names: 
// class MoreSpecialOperation; 
// class DifferentOperation; 

// Concrete model with different operations
class MyModel 
{
    private: 
        ModelOperation* firstOperation_; 
        ModelOperation* secondOperation_;  

    public:

        MyModel()
            : 
                firstOperation_(0), 
                secondOperation_(0)
        {
            // Forgetting about run-time type definition from input files here.
            firstOperation_  = new MoreSpecialOperation(); 
            secondOperation_ = new DifferentOperation(); 
        }

        void operate()
        {
            firstOperation_->operate(); 
            secondOperation_->operate();
        }

        ~MyModel() 
        {
            delete firstOperation_; 
            firstOperation_ = 0; 

            delete secondOperation_; 
            secondOperation_ = 0; 
        }
};

int main()
{

    MyModel modelOne; 

    // Some internal scope
    {
        // I want modelTwo to have its own set of copied, not referenced 
        // operations, and at the same time I need RAII to for the operations, 
        // deleting them automatically as soon as it goes out of scope. 
        // This saves me from writing destructors for different concrete models.  
        MyModel modelTwo (modelOne); 
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T12:12:02.800

如果您接受对您的类型的某些要求，则无需为所有类型实现虚拟克隆功能即可完成。特殊要求是这些类型具有可访问的复制构造函数，由于可能会意外切片，有些人会认为这是不可取的。不过，正确使用交友可能会减轻其缺点。

如果这是可以接受的，可以通过在提供复制功能的接口下擦除派生类型来解决此问题：

```
template <typename Base>
struct clonable {
    // virtual copy
    // this clone function will be generated via templates
    // no boilerplate is involved
    virtual std::unique_ptr<clonable<Base>> clone() const = 0;

    // expose the actual data
    virtual Base* get() = 0;
    virtual Base const* get() const = 0;

    // virtual destructor
    // note that this also obviates the need for a virtual destructor on Base
    // I would probably still make it virtual, though, just in case
    virtual ~clonable() = default;
}; 
```

该接口由以最派生类型为模板的类实现，因此知道如何通过复制构造函数进行正常复制。

```
template <typename Base, typename Derived>
struct clonable_holder : clonable<Base> {
    // I suppose other constructors could be provided
    // like a forwarding one for emplacing, but I am going for minimal here
    clonable_holder(Derived value)
    : storage(std::move(value)) {}

    // here we know the most derived type, so we can use the copy constructor
    // without risk of slicing
    std::unique_ptr<clonable<Base>> clone() const override {
        return std::unique_ptr<clonable<Base>>(new clonable_holder(storage));
    }

    Base* get() override { return &storage; }
    Base const* get() const override { return &storage; }

private:
    Derived storage;
}; 
```

这将为我们生成虚拟副本功能，而无需额外的样板。现在我们可以在此之上构建一个类似智能指针的类（不完全是智能指针，因为它不提供指针语义，而是提供值语义）。

```
template <typename Base>
struct polymorphic_value {
    // this constructor captures the most derived type and erases it
    // this is a point where slicing may still occur
    // so making it explicit may be desirable
    // we could force constructions through a forwarding factory class for extra safety
    template <typename Derived>
    polymorphic_value(Derived value)
    : handle(new clonable_holder<Base, Derived>(std::move(value))) {
        static_assert(std::is_base_of<Base, Derived>::value,
            "value must be derived from Base");
    }

    // moving is free thanks to unique_ptr
    polymorphic_value(polymorphic_value&&) = default;
    polymorphic_value& operator=(polymorphic_value&&) = default;

    // copying uses our virtual interface
    polymorphic_value(polymorphic_value const& that)
    : handle(that.handle->clone()) {}
    polymorphic_value& operator=(polymorphic_value const& that) {
        handle = that.handle->clone();
        return *this;
    }

    // other useful constructors involve upcasting and so on

    // and then useful stuff for actually using the value
    Base* operator->() { return handle.get(); }
    Base const* operator->() const { return handle.get(); }
    // ...

private:
    std::unique_ptr<clonable<Base>> handle;
}; 
```

这只是一个最小的界面，但可以从这里轻松充实以涵盖更多使用场景。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-01-10T13:56:09.007

[**有点晚了，但对于未来的观众：在我的仅标头库Aurora**](http://www.bromeon.ch/libraries/aurora)及其[SmartPtr 教程](http://bromeon.ch/libraries/aurora/v1.0/tutorial-smartptr.html)中有一个现成的实现。使用 Aurora，通过智能指针实现深度复制是微不足道的。以下代码适用于任何可复制类型`T`：

```
aurora::CopiedPtr<T> first(new T);
aurora::CopiedPtr<T> second = first; // deep copy 
```

如果你的类有指针成员，这使得通常不需要实现三巨头/五巨头。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T10:48:26.097

我从未听说过即用型实现，但您可以自己完成。

首先，您应该编写一些具有虚拟克隆方法的模板包装类，返回存储对象的副本。然后写一些可以复制的类的多态持有者

并且不要忘记检查删除 [http://en.wikibooks.org/wiki/More_C%2B%2B_Idioms/Checked_delete](http://en.wikibooks.org/wiki/More_C%2B%2B_Idioms/Checked_delete)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T10:50:22.747

听起来需要能够制作一个智能指针，每次创建另一个智能指针对象时都会创建一个对象的新副本。（我猜该副本是否“深”取决于对象的构造函数；据我们所知，您存储的对象可能具有许多深层次的所有权，因此“深”取决于对象。我们的主要目的是，当智能指针使用来自另一个对象的引用构造时，您想要创建一个不同对象的东西，而不是仅仅取出一个指向现有对象的指针。）

如果我正确理解了这个问题，那么您将需要一个虚拟克隆方法。没有其他方法可以正确调用派生类的构造函数。

```
struct Clonable {
  virtual ~Clonable() {}
  virtual Clonable* clone() = 0;
};
struct AutoPtrClonable {
  AutoPtrClonable(Clonable* cl=0) : obj(cl) { }
  AutoPtrClonable(const AutoPtrClonable& apc) : obj(apc.obj->clone()) { }
  ~AutoPtrClonable() { delete obj; }
  // operator->, operator*, etc
  Clonable* obj;
}; 
```

要使用示例代码，请将其制作为模板等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T12:01:14.523

你有两个解决方案（实际上你有更多，但这些对我来说最有意义:)）：

首先，您可以使用`std::unique_ptr`. 这是一个很好的解决方案，因为它强制您每个指针都有一个实例。（使用`std::shared_ptr`代替也可以，但如果您不明确添加代码，shared_ptr 的复制和分配将“共享” - 特别是您想要避免的）。

如果您使用`std::unique_ptr`，您的复制构造函数和赋值运算符应该显式地进行深度复制（使用`clone`指针接口中的虚拟方法，或调用`unique_ptr`构造函数中的 new 运算符）。

其次，您可以自己滚动。它没有什么复杂的，我们谈论的是一个小的（10-20 行左右）实用程序类。

就个人而言，如果我必须在一个地方使用这个智能指针类，我会使用 std::unique_ptr。否则（多个指针，相同的行为）我会自己滚动，这样我就不必为许多实例重复深度复制（以保持 DRY 原则）。

# javascript - 为什么我在使用 window.onresize 触发事件时会得到错误的 window.height 值？

> ID：13912313
> 
> 赞同：1
> 
> 时间：2012-12-17T10:26:38.190
> 
> 标签：javascript, jquery, html

```
window.onresize = function () {
  initiate();
};

function initiate() {
  var windowWidth = $(window).width();
  var windowHeight = $(window).height();
  ... 
```

我要做的是在屏幕转动时重画我的画布（移动网络应用程序）。我现在遇到的问题是，如果我转动屏幕，$(window).width(); 给出旧的宽度，还有 $(document).width(); 不起作用。计时器可以解决问题，但必须有更好、更清洁的方法。

有谁知道如何解决这一问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T10:30:10.750

您的函数`initiate()`将调用每个像素窗口的大小调整有什么问题。您需要做的就是添加一些`setTimeout`，例如：

```
var resizeHandler;
window.onresize = function () {
  clearInterval( resizeHandler );
  resizeHandler = setTimeout( initiate, 500 );
}; 
```

我认为没有更清洁的方法，因为您的事件处理程序调用了太多次......

# tomcat - UI 组件的可重用性

> ID：13912314
> 
> 赞同：0
> 
> 时间：2012-12-17T10:26:40.407
> 
> 标签：tomcat, user-interface, reusability

如何在多个 WAR 中打包/共享 UI 组件，而只有一个版本的代码？

示例：-我们开发了一个 searchUser（IU 和控制器）组件。-我们使用webApp1和webApp2 -如果需要对searchUser（IU&Controller）做一些改动，两个地方不需要改动，只需要重新打包webApp1和webApp2即可。

谢谢

更新：感谢 Chad [Howto 使用 Maven War Plugin 在 Wars 之间重用 War 资源](https://stackoverflow.com/questions/14142081/reusing-jsp-and-its-controller-in-more-than-one-war)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:24:49.867

把它塞进自己的罐子里，在每场战争中重新分配，不是吗？

选项：

*   如果您已经使用 maven，请使用它
*   还有其他选项，例如 maven（gradle 等）
*   将 jar 放在中央文件夹中，并在预构建步骤或构建脚本中实现获取

# asp.net-mvc - MVC 4 路由，获取/发布请求处理

> ID：13912315
> 
> 赞同：1
> 
> 时间：2012-12-17T10:26:45.663
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-mvc-routing

我面临以下问题：

我有一个控制器，可以说以下操作：

```
 [HttpGet]
        public ActionResult Index()
        {
            var viewModel = new IndexViewModel();

            return View("Index", viewModel);
        }

        [HttpPost]
        public void ExportToExcell(LeadsViewModel model)
        {
            // Export to excell code goes here
        } 
```

问题如下：

用户使用此 URL 在索引页面上输入：/Controller/Index

然后用户将表单提交到 Action ExportToExcel

数据导出到 Excel（文件下载），没关系。

URL 变为 /Controller/ExportToExcell

然后，当我单击“Enter”时，我将转到 /Controller/ExportToExcell 但使用 GET 并且当然会遇到 Page Not Found，问题是如何在 MVC 中正确处理此问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T10:33:12.137

不要 `void`用作您的帖子操作的返回类型，请使用`ActionResult`

```
[HttpPost]
public ActionResult ExportToExcell(LeadsViewModel model)
{
   // Export to excell code goes here
   return RedirectToAction("Index");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T10:53:35.650

我相信您的问题是您没有返回 FileResult，浏览器会将您重定向到您的帖子路径。现在无法测试它，但我相信以下应该有效。

```
[HttpPost]
public ActionResult ExportToExcell(LeadsViewModel model)
{
   // Generate the Excel file into a MemoryStream for example

   // Return a FileResult with the Excel mime type
   return File(fileStream, "application/vnd.ms-excel", "MyExcelFile.xls");
} 
```

检查[FileResult](http://msdn.microsoft.com/en-us/library/system.web.mvc.fileresult%28v=vs.98%29.aspx)和[Controller.File](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.file%28v=vs.98%29.aspx)以获取更多详细信息。

作为说明，我不完全确定这是否是 Excel 文件的 MIME 类型，但如果您说您已经在下载该文件，那么您可能已经拥有它:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T12:45:21.760

您必须返回 ActionResult 而不是 void。

```
 public ActionResult ExportToExcel(PagingParams args)
    {
        var data = new StudentDataContext().Student.Take(200).ToList();
        return data.GridExportToExcel<Student>("GridExcel.xlsx", ExcelVersion.Excel2007, args.ExportOption);
    } 
```

请查看链接：[导出操作](http://mvc.syncfusion.com/demos/ui/grid/Exporting/GridExport)

# javascript - 从屏幕上滑出几个 div。jQuery

> ID：13912322
> 
> 赞同：0
> 
> 时间：2012-12-17T10:27:12.350
> 
> 标签：javascript, jquery

我正在使用此代码将 div 滑出屏幕：

```
$('.box').one('click', function() {
var $this = $(this);
if (this.id !== 'box4'){
$this.animate({
    left: '-50%'
}, 500, function() {
    $this.css('left', '150%');         
    $this.appendTo('#container');

});

$this.next().animate({
    left: '50%'
}, 500);
}
}); 
```

CSS：

```
.box {
position: absolute;
left: 150%;
margin-left: -25%;
}

#box1 {

left: 50%;
} 
```

html:

```
<div id="container">  
<div id="box1" class="box">Div #1</div>
<div id="box2" class="box">Div #2</div>
<div id="box3" class="box">Div #3</div>
<div id="box4" class="box">Div #4</div>

 </div> 
```

当我单击它时，我希望能够滑动除 div 本身之外的其他东西。

例如，我想要类似的东西：

```
 <div id="container">
 <div id="welcomebox"> Welcome on my site </div>
<div id="box1" class="box">Enter</div>
<div id="box2" class="box">Div #2</div>
<div id="box3" class="box">Div #3</div>
<div id="box4" class="box">Div #4</div>

 </div> 
```

当我点击“Enter”时，不仅是带有 Enter 幻灯片的 div，而且还有“Welcome to my site”。但我不希望用户通过点击“欢迎来到我的网站”来滑动。

关于我如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T10:57:17.553

只需使用 jQuery 选择器选择另一个框。

```
$('#box1').one('click', function() {
    var thisbox = $(this);
    var otherbox = $('#welcomebox');
    // method to animate thisbox
    thisbox.animate({
        // animations
    });
    // method to animate the welcomebox
    otherbox.animate({
        // animations
    });
}); 
```

顺便提一句。您的代码中有错误。你给了两个 Div 相同的 ID。ID 必须是唯一的。

# javascript - 在 MVC 中使用 jQuery 查找选中复选框的 id

> ID：13912332
> 
> 赞同：1
> 
> 时间：2012-12-17T10:27:43.553
> 
> 标签：javascript, jquery, model-view-controller

我有一个字段模型，它代表某个字段（名称，描述，...）

```
class FieldModel : EntityModel
{    
    ...
    public bool ToCopy { get; private set; }
    public string Id {get; private set; }
    ...
} 
```

一个 Index 模型，它有一个 Fields 的集合：

```
class EntityModel
{
    ...
}

class IndexModel
{
    public IEnumerable<EntityModel> Fields { get; private set; }
} 
```

用于复制的控制器，它应该接受要复制的字段的 ID：

```
public void CopyFields(string[] fieldsIds)
{
    ...
} 
```

我需要通过复选框选择某些要复制的字段。所以在我添加的 Field 的 vew

```
@Html.CheckBoxFor(x => x.IsSelectedForCopy) 
```

在索引视图中

```
<button onclick="onCopyClick('@Model');" type="button" class="btn showButton">Copy Fields</button> 
```

现在我需要编写一个脚本来选择所有选中的字段并将它们的 ID 发送到控制器。我对 Javascript/jQuery 的经验为零，所以有人可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T11:27:09.503

这至少应该让你开始；）

你给jQuery一些css选择器，它给你匹配的对象......

```
$("input :checked").each(function() {
    alert($(this).attr("id"));
}); 
```

根据您希望发送它们的方式，您可以将每个 id 附加到表单上的隐藏字段，如下所示：

```
$("input :checked").each(function() {
    var tmp = $("#myHiddenField").val();
    tmp += " " + $(this).attr("id"));
    $("#myHiddenField").val(tmp);
});
$.ajax("TheURLToPostTheDataTo", 
    {data: [
        {idsToSend:$("#myHiddenField").val()}
    ], 
    success:  function() { 
         alert("Done"); 
    }
}); 
```

然后提交，并在服务器端按空间修剪和分割？

# javascript - coffeescript 中的淘汰验证库

> ID：13912333
> 
> 赞同：1
> 
> 时间：2012-12-17T10:27:43.670
> 
> 标签：javascript, knockout.js, coffeescript, knockout-validation

我只是想知道是否有人在将淘汰赛验证插件（[https://github.com/ericmbarnard/Knockout-Validation](https://github.com/ericmbarnard/Knockout-Validation)）转换为咖啡脚本方面有任何运气。

我已经尝试过使用[http://js2coffee.org/](http://js2coffee.org/)之类的工具，但到目前为止，我一直无法获得适用于咖啡的版本。

我问，因为它正在使用的项目都是用咖啡脚本编写的，所以在编写自定义验证规则时，团队希望用咖啡而不是 JavaScript 来编写它们。到目前为止，自定义规则刚刚添加到敲除验证 javascript 文件中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:02:12.560

您可以将库作为 JS 导入并在 CS 中编写自己的规则，例如：

```
ko.validation.rules['validUKPostcode'] = 
  validator: (string) ->
    /[A-Z]{1,2}[0-9R][0-9A-Z]? [0-9][ABD-HJLNP-UW-Z]{2}/i.test(string)
  message: 'Please enter a valid UK postcode'

ko.validation.registerExtenders() 
```

# android - 如何实现谷歌地图新版API v2

> ID：13912336
> 
> 赞同：10
> 
> 时间：2012-12-17T10:27:45.377
> 
> 标签：android, google-maps, android-emulator, maps, google-maps-mobile

大家好，我了解到谷歌地图已弃用其先前版本的 API v1 并推出了新版本的谷歌地图 API v2。我通过跟踪谷歌中的一些链接尝试了一个示例，我很确定通过提供确切的哈希密钥代码并设法获得正确的 api 密钥，我正确地获得了 api 密钥。现在我也设法编写了一些代码，但是当我尝试执行代码时出现错误，请帮我解决这个问题，这是我的代码

我什至尝试了谷歌播放服务提供的示例代码，但我遇到了同样的问题

这是我通过参考谷歌中的一些链接所做的示例

主要活动课

```
package com.example.apv;

import com.google.android.gms.maps.CameraUpdateFactory;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.MapFragment;
import com.google.android.gms.maps.model.BitmapDescriptorFactory;
import com.google.android.gms.maps.model.LatLng;
import com.google.android.gms.maps.model.MarkerOptions;
import android.os.Bundle;
import android.app.Activity;
import android.app.FragmentManager;

public class MainActivity extends Activity 
{
     @Override  
     protected void onCreate(Bundle savedInstanceState) {  
         super.onCreate(savedInstanceState);  
         setContentView(R.layout.main);  

     FragmentManager fragmentManager = getFragmentManager();  
     MapFragment mapFragment = (MapFragment)fragmentManager.findFragmentById(R.id.map);  
     GoogleMap googleMap = mapFragment.getMap();  
     LatLng sfLatLng = new LatLng(37.7750, -122.4183);  
     googleMap.setMapType(GoogleMap.MAP_TYPE_NORMAL);  
     googleMap.addMarker(new MarkerOptions().position(sfLatLng).title("San Francisco")
                .snippet("Population: 776733")
            .icon(BitmapDescriptorFactory.defaultMarker(
     BitmapDescriptorFactory.HUE_AZURE)));
     googleMap.getUiSettings().setCompassEnabled(true);  
     googleMap.getUiSettings().setZoomControlsEnabled(true);  
     googleMap.animateCamera(CameraUpdateFactory.newLatLngZoom(sfLatLng, 10))

        }  
} 
```

主要的.xml

```
 <?xml version="1.0" encoding="utf-8"?>  
                <fragment xmlns:android="http://schemas.android.com/apk/res/android"  
                          android:id="@+id/map"  
                              android:layout_width="match_parent"  
                                  android:layout_height="match_parent"  
                               class="com.google.android.gms.maps.MapFragment"/> 
```

最后是我的清单文件

```
 <?xml version="1.0" encoding="utf-8"?>  
                 <manifest xmlns:android="http://schemas.android.com/apk/res/android"  
                               package="com.example.apv"  
                              android:versionCode="1"  
                               android:versionName="1.0" >  
                  <uses-sdk android:minSdkVersion="8" android:targetSdkVersion="17"/>  

                             <permission  
                     android:name="com.codebybrian.mapsample.permission.MAPS_RECEIVE"  
                                     android:protectionLevel="signature"/>  

                                     <!--Required permissions-->   

            permission oid:name="com.codebybrian.mapsample.permission.MAPS_RECEIVE"/>  

              <!--Used by the API to download map tiles from Google Maps servers: -->  
                 <uses-permission android:name="android.permission.INTERNET"/>  

                   <!--Allows the API to access Google web-based services: -->  
                <uses-permission   
         android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>  

          <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>  

                    <!--Optional permissions-->  
          <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>  
        <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>  

        <!--Version 2 of the Google Maps Android API requires OpenGL ES version 2 -->  
                <uses-feature  
                        android:glEsVersion="0x00020000"    
                          android:required="true"/>  

     application android:label="@string/app_name" android:icon="@drawable/ic_launcher">

                 <activity android:name=".MyMapActivity"  
                         android:label="@string/app_name"   
                             >   
                          <intent-filter>  
                      <action android:name="android.intent.action.MAIN"/>  
                         <category android:name="android.intent.category.LAUNCHER"/>  
                              </intent-filter>  
                             </activity>  

                           <meta-data  
                             android:name="com.google.android.maps.v2.API_KEY"  
                             android:value="AZzaSSsBmhi4dXoKSylGGmjkQ5Jev9UdAJBjk"/>  
                            </application>  

                          </manifest> 
```

我在版本 4.2 和 api 级别 17 的模拟器中运行我的应用程序我收到以下错误

```
12-17 10:06:52.590: E/Trace(826): error opening trace file: No such file or directory (2)  
12-17 10:06:52.590: W/Trace(826): Unexpected value from nativeGetEnabledTags: 0  
12-17 10:06:52.590: W/Trace(826): Unexpected value from nativeGetEnabledTags: 0  
12-17 10:06:52.590: W/Trace(826): Unexpected value from nativeGetEnabledTags: 0  
12-17 10:06:52.680: I/ActivityThread(826): Pub   com.google.android.gms.plus;com.google.android.gms.plus.action:   com.google.android.gms.plus.provider.PlusProvider  
12-17 10:06:52.740: W/Trace(826): Unexpected value from nativeGetEnabledTags: 0   
12-17 10:06:52.740: W/Trace(826): Unexpected value from nativeGetEnabledTags: 0  
12-17 10:06:52.760: W/Trace(826): Unexpected value from nativeGetEnabledTags: 0 
```

后来我才知道这些版本无法在模拟器中执行所以我尝试用两个设备执行它一个是 android 版本 2.3.7 的 Sony xperia u 和 android 版本 4.1.1 的三星 Galaxy 标签，这些是我的输出

```
 12-17 16:24:48.965: I/dalvikvm(9088): Could not find method     com.example.apv.MainActivity.getFragmentManager, referenced from method com.example.apv.MainActivity.onCreate
  12-17 16:24:48.965: W/dalvikvm(9088): VFY: unable to resolve virtual method 3460:   Lcom/example/apv/MainActivity;.getFragmentManager ()Landroid/app/FragmentManager;
   12-17 16:24:48.965: D/dalvikvm(9088): VFY: replacing opcode 0x6e at 0x0009
   12-17 16:24:48.965: D/dalvikvm(9088): VFY: dead code 0x000c-0065 in Lcom/example /apv/MainActivity;.onCreate (Landroid/os/Bundle;)V
        12-17 16:24:49.066: D/AndroidRuntime(9088): Shutting down VM
    12-17 16:24:49.066: W/dalvikvm(9088): threadid=1: thread exiting with uncaught exception (group=0x4001d578)
      12-17 16:24:49.086: E/AndroidRuntime(9088): FATAL EXCEPTION: main
      12-17 16:24:49.086: E/AndroidRuntime(9088): java.lang.RuntimeException: Unable  to start activity ComponentInfo{com.example.apv/com.example.apv.MainActivity}: android.view.InflateException: Binary XML file line #2: Error inflating class fragment
         12-17 16:24:49.086: E/AndroidRuntime(9088):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1659)
              12-17 16:24:49.086: E/AndroidRuntime(9088):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1675)
           12-17 16:24:49.086: E/AndroidRuntime(9088):  at android.app.ActivityThread.access$1500(ActivityThread.java:121)
           12-17 16:24:49.086: E/AndroidRuntime(9088):  at  android.app.ActivityThread$H.handleMessage(ActivityThread.java:943)
           12-17 16:24:49.086: E/AndroidRuntime(9088):  at android.os.Handler.dispatchMessage(Handler.java:99)
           12-17 16:24:49.086: E/AndroidRuntime(9088):  at android.os.Looper.loop(Looper.java:138)
          12-17 16:24:49.086: E/AndroidRuntime(9088):   at android.app.ActivityThread.main(ActivityThread.java:3701)
          12-17 16:24:49.086: E/AndroidRuntime(9088):   at java.lang.reflect.Method.invokeNative(Native Method)
         12-17 16:24:49.086: E/AndroidRuntime(9088):    at java.lang.reflect.Method.invoke(Method.java:507)
            12-17 16:24:49.086: E/AndroidRuntime(9088):     at  com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:878)
           12-17 16:24:49.086: E/AndroidRuntime(9088):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:636)
             12-17 16:24:49.086: E/AndroidRuntime(9088):    at  dalvik.system.NativeStart.main(Native Method)
            12-17 16:24:49.086: E/AndroidRuntime(9088): Caused by: android.view.InflateException: Binary XML file line #2: Error inflating class fragment
             12-17 16:24:49.086: E/AndroidRuntime(9088):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:581)
              12-17 16:24:49.086: E/AndroidRuntime(9088):   at android.view.LayoutInflater.inflate(LayoutInflater.java:386)
              12-17 16:24:49.086: E/AndroidRuntime(9088):   at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
               12-17 16:24:49.086: E/AndroidRuntime(9088):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
                 12-17 16:24:49.086: E/AndroidRuntime(9088):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:207)
               12-17 16:24:49.086: E/AndroidRuntime(9088):  at android.app.Activity.setContentView(Activity.java:1657)
              12-17 16:24:49.086: E/AndroidRuntime(9088):   at com.example.apv.MainActivity.onCreate(MainActivity.java:20)
               12-17 16:24:49.086: E/AndroidRuntime(9088):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
                 12-17 16:24:49.086: E/AndroidRuntime(9088):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1623)
                   12-17 16:24:49.086: E/AndroidRuntime(9088):  ... 11 more
             12-17 16:24:49.086: E/AndroidRuntime(9088): Caused by: java.lang.ClassNotFoundException: android.view.fragment in loader dalvik.system.PathClassLoader[/data/app/com.example.apv-1.apk]
              12-17 16:24:49.086: E/AndroidRuntime(9088):   at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
               12-17 16:24:49.086: E/AndroidRuntime(9088):  at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
                12-17 16:24:49.086: E/AndroidRuntime(9088):     at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
                  12-17 16:24:49.086: E/AndroidRuntime(9088):   at android.view.LayoutInflater.createView(LayoutInflater.java:471)
                  12-17 16:24:49.086: E/AndroidRuntime(9088):   at android.view.LayoutInflater.onCreateView(LayoutInflater.java:549)
                 12-17 16:24:49.086: E/AndroidRuntime(9088):    at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:66)
                12-17 16:24:49.086: E/AndroidRuntime(9088):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:568)
                   12-17 16:24:49.086: E/AndroidRuntime(9088):  ... 19 more 
```

任何人都可以建议我如何完成这项工作，并给我一些谷歌地图新版本 API v2 教程的链接和一些示例链接，请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T20:27:07.797

按照在类似帖子上找到的本指南可能会有所帮助，您需要安装 2 个 .apk 文件。资料来源： http: [//nemanjakovacevic.net/blog/2012/12/how-to-make-android-google-maps-v2-work-in-android-emulator/](http://nemanjakovacevic.net/blog/2012/12/how-to-make-android-google-maps-v2-work-in-android-emulator/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T10:41:14.213

当你在清单中声明它时，一定要命名你的主要活动：

```
Caused by: java.lang.ClassNotFoundException: com.example.apv.MyMapActivity 
```

也许是包命名问题？发布您的整个 MyMapActivity，而不仅仅是 onCreate。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T22:20:03.620

您提供的代码包含错误。您的活动名称是 MainActivity，但在清单文件中，您声明的唯一活动名称为 MyMapActivity。此外，您的清单文件没有打开的应用程序标记。

纠正这两个错误，我运行了你的代码并得到了你提到的异常。我通过添加 google-play-services 库项目解决了这个问题。我想你忘了添加这个或者它没有正确添加。您可以在 google map v2 的开发者文档中找到有关它的详细信息。

要检查这一点，请右键单击您的项目并转到属性。然后从左侧选择Android。在此页面的底部，您会找到库项目表。确保 google-play-services 库项目在列表中并带有绿色标记。如果它不存在，请单击右侧的“添加..”按钮添加它。

有时，eclipse 无法添加不在您项目的同一工作区中的库项目。如果是这种情况，请将 google-play-services 和您的项目保留在同一个工作区中，然后重试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-20T09:09:10.410

看看这个 youtube 教程视频。它适用于初学者，将帮助您**从头开始创建一个简单的 Google Maps V2 应用程序** [youtube 链接](https://www.youtube.com/watch?v=awX5T-EwLPc)。就**在 Eclipse 模拟器上运行 Google Maps V2**而言，请参阅此答案[Running Google Maps v2 on emulator](https://stackoverflow.com/a/13734937/1979347)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-31T02:01:59.817

Project properties -> Android -> Add... 在 Library 下，然后根据以下说明选择您之前添加为库项目的 google-play-services_lib：

[https://developers.google.com/maps/documentation/android/intro](https://developers.google.com/maps/documentation/android/intro)

* * *

## 回答 #6

> 赞同：-5
> 
> 时间：2012-12-17T13:39:40.173

如果你想使用**片段**，那么你的活动，即你`MainActivity`应该扩展**FragmentActivity**

# excel - Excel 2011 (Mac OS X) 中的下拉菜单的“对象不支持此操作”

> ID：13912337
> 
> 赞同：3
> 
> 时间：2012-12-17T10:27:50.980
> 
> 标签：excel, vba, macos, excel-2011

我有一个用 Office 2010 制作的带有一些 VBA 代码的大型 Excel 工作簿。除了下拉菜单外，一切似乎都很好。准确地说，它们以图形方式工作，但是

```
Me.Shapes("Drop Down 1").ControlFormat 
```

抛出“对象不支持此操作”错误（我确信“Drop Down 1”是正确的名称等），准确地说，它被正确引用（例如`shape = Me.Shapes(1)`有效）但它似乎不喜欢`ControlFormat`. 谷歌帮不上什么忙。有什么建议么？

我对 VBA 很陌生，所以可能有一些我不知道的微不足道的调试巫术。

**编辑**：我尝试使用虚拟下拉菜单创建一个新工作簿，并在录制宏时选择值，但它没有给出任何结果（就像菜单不存在一样）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T18:32:12.753

我知道这听起来既令人沮丧又愚蠢，但对于 Excel 2011，将行从

`Me.Shapes("Drop Down 1").ControlFormat`

至

`Worksheets("Sheet1").Shapes("Drop Down 1").ControlFormat`

例如

这适用于 Excel 2010，但不适用于 Excel 2011

```
Sub Sample()
    With Me.Shapes("Drop Down 1").ControlFormat
        .AddItem "Sid"
    End With
End Sub 
```

它会给你你提到的错误。

**截屏**

![在此处输入图像描述](../Images/960e2e517ae01c40e188a352af086b1f.png)

对于 Excel 2011，您必须使用（*完全限定对象*）

```
Sub Sample()
    With Worksheets("Sheet1").Shapes("Drop Down 1").ControlFormat
        .AddItem "Sid"
    End With
End Sub 
```

**截屏**

![在此处输入图像描述](../Images/5a00245e2e3ddd0e9bb4ed5e22dbb4ee.png)

**注意**：将`Sheet1`上面替换为相关的工作表名称。

# php - php：在for循环中打印变量

> ID：13912342
> 
> 赞同：1
> 
> 时间：2012-12-17T10:28:03.943
> 
> 标签：php

我有三个变量，

```
$title_1 $title_2 $title_3 
```

我如何在 for 循环中打印它们？

我试过的：

```
$number = 3;
    for($i=0;$i<$number;$i++){
            echo "$title_($i+1)";
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T10:37:07.860

不要插手这些事情；为这些东西使用一个数组。

```
$titles = array('first title', 'second title', 'third title');

foreach ($titles as $title) {
    echo $title;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-17T10:31:11.483

这应该有效，尚未测试

```
for($i=1;$i<=$number;$i++){
        echo ${"title_$i"};
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-17T10:31:51.547

你可以这样做：

```
for($i = 0; $i < $number; $i++) {
    $var = "title_".$i;
    echo $$var;
} 
```

但我不会。这是非常非常糟糕的设计。使用数组。

# android - 带有图像选择和取消选择的 Horizo ntalListview

> ID：13912344
> 
> 赞同：5
> 
> 时间：2012-12-17T10:28:10.050
> 
> 标签：android, android-widget, android-listview, android-2.2-froyo, horizontalscrollview

我`select/unselect`在 listiview 的图像中遇到问题。就我而言，

```
ByDefault->image color(Yellow)
First click->image color(Orange)
Second click->image color(Yellow) 
```

如果用户点击过那么完美，但是当用户第一次点击第一张图片和第二次点击第二张图片时，两个图片颜色都是橙色（这是问题）。

在我的情况下，一次只有一种图像颜色是橙色（表示已选择）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:57:49.480

1.  If you only support HoneyComb and above, it'll easy. Create a StateListDrawable and set it to list view item's background.

**selector.xml**

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_activated="true" android:drawable="@drawable/item_focus" />
    <item android:drawable="@android:color/transparent" />
</selector> 
```

**listview item's layout**

```
<ImageView
    android:id="@+id/image"
    android:layout_width="100dp"
    android:layout_height="100dp"
    android:padding="5dp" /> 
```

and the last, set your listview choice mode to `SINGLE`

```
list.setChoiceMode(ListView.CHOICE_MODE_SINGLE); 
```

2\. If you manage to support pre HoneyComb, you will have to write your own layout implement checkable. You do this in order to work-out using **checked state**. Let take an example with LinearLayout(you can do the same with others).

```
 package com.example.listviewactivestate;

 import android.content.Context;
 import android.util.AttributeSet;
 import android.view.View;
 import android.widget.Checkable;
 import android.widget.LinearLayout;

 public class CustomLinearLayout extends LinearLayout implements Checkable {

private static final int[] CHECKED_STATE_SET = { android.R.attr.state_checked };

private boolean checked = false;

public CustomLinearLayout (Context context, AttributeSet attrs) {
    super(context, attrs);
}

public CustomLinearLayout (Context context) {
    super(context);
}

@Override
public boolean isChecked() {
    return checked;
}

@Override
public void setChecked(boolean checked) {
    this.checked = checked;

    refreshDrawableState();

    // Propagate to childs
    final int count = getChildCount();
    for (int i = 0; i < count; i++) {
        final View child = getChildAt(i);
        if (child instanceof Checkable) {
            ((Checkable) child).setChecked(checked);
        }
    }
}

@Override
protected int[] onCreateDrawableState(int extraSpace) {
    final int[] drawableState = super.onCreateDrawableState(extraSpace + 1);
    if (isChecked()) {
        mergeDrawableStates(drawableState, CHECKED_STATE_SET);
    }
    return drawableState;
}

@Override
public void toggle() {
    this.checked = !this.checked;
}
 } 
```

Use this custom view in xml

```
 <?xml version="1.0" encoding="utf-8"?>
 <com.example.listviewactivestate.CustomLinearLayout 

 xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:background="@drawable/selector"
>

<ImageView
    android:id="@+id/image"
    android:layout_width="100dp"
    android:layout_height="100dp"
    android:padding="5dp" />

</com.example.listviewactivestate.CustomLinearLayout > 
```

Change `state_activated` to `state_checked`

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
   <item android:state_checked="true" android:drawable="@drawable/item_focus" />
   <item android:drawable="@android:color/transparent" />
</selector> 
```

Also set listview choice mode to `SINGLE`. If it does not work, add `onItemClickEvent` like this

```
list.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
                // TODO Auto-generated method stub
                list.setItemChecked(position, true);//make sure click item is set to checked.

            }
        }); 
```

# objective-c - 如何知道 MKMapView 是否允许使用当前位置？

> ID：13912357
> 
> 赞同：0
> 
> 时间：2012-12-17T10:29:32.360
> 
> 标签：objective-c, location, mkmapview, cllocationmanager, showuserlocation

我在 mapView 上显示用户位置：

`self.mapView.showsUserLocation = YES;`

用户会收到 AlertView 提示，他可以在其中选择是否允许使用当前位置。如果他按下是，一切都好，我不担心。

但如果他按否，我想放大到特定区域。

那么如何知道 MKMapView 是否允许使用当前位置呢？

我找到了创建自己的 CLLocationManager 及其委托以查看它是否返回拒绝错误的解决方案。但这感觉不太对，如果我不需要它，为什么要引入一个新的 CLLocationManger。

难道没有别的办法了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T10:33:26.587

您不需要委托人。只需使用 CLLocationManager 类方法`authorizationStatus`：

```
if ([CLLocationManager authorizationStatus] == kCLAuthorizationStatusAuthorized) {
    // allowed
} else {
    // not allowed
} 
```

可能的值是：

```
typedef enum {
   kCLAuthorizationStatusNotDetermined = 0,
   kCLAuthorizationStatusRestricted,
   kCLAuthorizationStatusDenied,
   kCLAuthorizationStatusAuthorized
} CLAuthorizationStatus; 
```

# javascript - JS-在 onclick() 事件中链接到文档内的锚点

> ID：13912358
> 
> 赞同：1
> 
> 时间：2012-12-17T10:29:35.033
> 
> 标签：javascript, html, css

我对以下代码有疑问，想象其余部分都可以（html、head、body 等）我想要做的是，当您单击其中一个按钮时，该部分中的隐藏文本/图像会显示或隐藏，代码做得很好。问题是当您单击按钮时，我还希望它带您到新出现的部分中的锚点，而我似乎无法做到这一点。

这是HTML上的代码

```
<h2 class="especial">TITLE</h2> 
<p class="normal"><input type=image src="images/img_beta/buttonimage1.png" onclick="show_section1();">Section1</p>
<p class="normal"><input type=image src="images/img_beta/buttonimage2.png" onclick="show_section2();">Section2</p>  
<hr>
<div id="Section1" style="display:none">
<a id="Section1_anchor"><h2 class="especial">Sect1TittleHere</h2></a>
    <p class="interior">Blablah this is the content of section1</p> 

</div>
<div id="Section2" style="display:none"> 
<a id="Section2_anchor"><h2 class="especial">Sect2TittleHere</h2></a>
    <p class="interior">Blablah content of section2</p>
    </div> 
```

而这里是控制onclick事件的JS函数，我每个部分都有一个，但是都是一样的。

```
<script language='javascript'>
//Variables
var sect1_guardian=0, sect2_guardian=0, sect3_guardian=0;       
function show_sect1(){
    if (sect1_guardian == 0) {          document.getElementById("Section1").style.display="block";
        sect1_guardian=1;
        //Close the other sections if opened
        document.getElementById("Section2").style.display="none";
        document.getElementById("Section3").style.display="none";
        //Reset guardians
        sect2_guardian=0;
        sect3_guardian=0;           
    }
    else {
        document.getElementById("Section1").style.display="none";
        sect1_guardian=0;
    }
} 
```

我应该在哪里以及如何将链接添加到锚点？如果我尝试将其添加到按钮标签和 onclick 事件中。我做这样的事情

```
<p class="normal"><a href="#Section1_anchor"><input type=image src="images/img_beta/buttonimage1.png" onclick="show_section1();"></a>Section1</p> 
```

因为 onclick 事件在图像中，我不希望文本被链接。显然我失去了一些东西/做错了什么，可能是一个羞辱性的错误，但我要求建议和更正。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:01:04.667

您可以拥有您提出的 html 并执行以下操作：

```
window.location = document.getElementById("Section1").parentNode.href; 
```

将“Section1”替换为您的特定部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T17:14:59.867

好吧，我找到了一个解决方案，它要容易得多，可能没有人说它，因为我以错误的方式提出问题，但也许这会对某人有所帮助。

我想让按钮将您带到文档中的锚点，对吗？

上面的代码运行良好，您单击按钮并显示隐藏文本，或者将其隐藏。

现在，将以下代码添加到按钮代码中，它也可以做锚点。

```
<p class="normal"><a href="#Section1"><input type=image src="images/img_beta/buttonimage1.png" onclick="show_section1();"></a>Section1</p> 
```

我刚刚添加了一个标签来链接按钮，并使用 HTML id（我已经用于 JS）作为锚点。我希望已经清楚地解释了它，并且它可以帮助某人！

关键是，使用 html id 作为锚点

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T10:33:35.967

如果它完全是您的代码的复制粘贴，则 onclick 处理程序称为“show_section1()”，该函数称为“show_sect1()”。注意 sect != section :) 。

我们是否应该看得更远？

# jquery - Jquery Datatables，初始化后更改行回调

> ID：13912363
> 
> 赞同：3
> 
> 时间：2012-12-17T10:29:51.337
> 
> 标签：jquery, datatables

我需要掌握现有数据表的 fnRowCallback 设置，但我尝试的一切似乎都失败了。

我尝试了什么：

1：

```
var dt = $('#table').dataTable({
            "bRetrieve": true,
            "fnRowCallback" : function (nRow, aData, iDisplayIndex, iDisplayIndexFull)    {
             console.warn("working");
             }
        ); 
```

2：

```
var dt = $('#table').dataTable({"bRetrieve": true});

dt.fnSettings().fnRowCallback = function (nRow, aData, iDisplayIndex, iDisplayIndexFull) {
        console.warn("working");
    } 
```

没有运气，但如果我改变

```
var dt = $('#table').dataTable({"bRetrieve": true});
dt.fnSettings().sAjaxSource = "invalid url"; 
```

我得到一个错误，所以一个似乎工作。此外，如果我在原始数据表初始化中执行 fnRowCallback 它可以工作，但这不是我想要的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T14:35:34.573

我删除了我的旧答案，因为我真的不明白你的帖子（太晚了！）

看来您要么必须使用非官方 API，要么销毁旧表并重新初始化它。

非官方 API 方式（未来版本可能无法使用），经过测试；在数据表 1.9.2 中工作

```
$("#table").dataTable().fnSettings().aoDrawCallback.push( {
    "fn": function (oSettings) {
        if ( oSettings.aiDisplay.length == 0 ) {
            return;
        }

        var nTrs = $('#table tbody tr');
        var iColspan = nTrs[0].getElementsByTagName('td').length;
        var sLastGroup = "";
        for ( var i=0 ; i<nTrs.length ; i++ ) {

            var iDisplayIndex = oSettings._iDisplayStart + i;
            data = oSettings.aoData[ oSettings.aiDisplay[iDisplayIndex] ]._aData;

            // Now you can access things like
            if (data.percentage > 80) {
                // And access the rows like this
                $(nTrs[i]).addClass("highlight-green");
            }

        }
    },
} ); 
```

正确方法：保存旧设置，销毁，重新初始化

```
var oTable = $('#table').dataTable();

var oldoptions = oTable.fnSettings();

var newoptions = $.extend(oldoptions, {
    fnRowCallback: function(nRow, aData, iDisplayIndex, iDisplayIndexFull)    {
     console.warn("working");
    }
})

oTable.fnDestroy();

$('#table').dataTable(newoptions); 
```

参考：[http ://datatables.net/forums/discussion/2737/addchange-callback-after-initialization-or-else-clone-settings-to-re-build-table/p1](http://datatables.net/forums/discussion/2737/addchange-callback-after-initialization-or-else-clone-settings-to-re-build-table/p1)

# c++ - C++ 使类的成员变量成为子类的特化

> ID：13912365
> 
> 赞同：0
> 
> 时间：2012-12-17T10:29:55.323
> 
> 标签：c++

我有4节课，

A类（抽象），

B 类（抽象），（作为成员变量，向量类型（A 类））

C 类，A 类的子类

D类，B类的子类

我可以将 D 类的成员变量重新定义为向量类型（C 类）而不是向量（A 类）。改为数组会更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T10:33:36.403

不，您不允许这样做。由于以下情况，它不起作用：

如果 B 类中的函数将元素添加到属于 A 类（但不是 C 类）的向量，这在基类中是允许的，但对于特定的子类 (C) 则不允许，因为类型已更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T10:33:45.043

> 我可以将 D 类的成员变量重新定义为向量类型（C 类）而不是向量（A 类）。

不，你不能。一旦在基类中声明了数据成员，它就会被所有派生类以完全相同的形式继承。

您可以做的是将基类成员转换为指向 的*指针*，`A`并初始化为指向 的实例`A`或 的实例`C`。

# vb.net - PictureBox 在选项卡按键时抛出“参数无效”ArgumentException

> ID：13912367
> 
> 赞同：4
> 
> 时间：2012-12-17T10:30:04.300
> 
> 标签：vb.net, winforms, bitmap, keypress, modi

我有一个表单，用户可以先扫描到位图。扫描完成并加载位图后，我有 4 个文本框被启用。在每个文本框旁边，我有一个名为“从图像剪切”的按钮。当用户单击按钮时，他们可以在位图中单击并拖动以使用 MODI 获取选定的文本。

除了一个烦人的错误外，这很完美：当我单击“从图像剪切”按钮并拖动一个正方形时，它会将信息很好地发送到文本框。然后，如果我单击下一个文本框，它会非常顺利，但是如果我使用 Tab 键离开该字段，我会得到一个“参数无效”`ArgumentException`并且它没有显示代码中的位置的任何帮助崩溃了。我可以毫无问题地在表单中进行选项卡，但是一旦扫描了位图，当我使用选项卡键时，它会像 10 次中的 9 次一样崩溃。

我尝试使用以下方法覆盖 tab 键（仅用于调试）：

```
Protected Overrides Function ProcessTabKey(ByVal forward As Boolean) As Boolean
    MsgBox("TAB is currently disabled!")
    Return False 'Tried True as well, just in case
End Function 
```

...但它仍然崩溃。

关于出了什么问题的任何建议？因为我不知道从哪里开始调试，所以我不知道要显示什么代码。

**编辑 1**

这是`ArgumentException`抛出的堆栈跟踪：

*   在 System.Drawing.Image.get_Width()
*   在 System.Drawing.Image.get_Size()
*   在 System.Windows.Forms.PictureBox.ImageRectangleFromSizeMode（PictureBoxSizeMode 模式）
*   在 System.Windows.Forms.PictureBox.OnPaint（PaintEventArgs pe）
*   在 System.Windows.Forms.Control.PaintWithErrorHandling（PaintEventArgs e，Int16 层）
*   在 System.Windows.Forms.Control.WmPaint（消息和 m）
*   在 System.Windows.Forms.Control.WndProc（消息和 m）
*   在 System.Windows.Forms.Control.ControlNativeWindow.OnMessage（消息& m）
*   在 System.Windows.Forms.Control.ControlNativeWindow.WndProc（消息和 m）
*   在 System.Windows.Forms.NativeWindow.DebuggableCallback（IntPtr hWnd，Int32 msg，IntPtr wparam，IntPtr lparam）
*   在 System.Windows.Forms.UnsafeNativeMethods.DispatchMessageW（味精和味精）
*   在 System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop（IntPtr dwComponentID，Int32 原因，Int32 pvLoopData）
*   在 System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner（Int32 原因，ApplicationContext 上下文）
*   在 System.Windows.Forms.Application.ThreadContext.RunMessageLoop（Int32 原因，ApplicationContext 上下文）
*   在 Microsoft.VisualBasic.ApplicationServices.WindowsFormsApplicationBase.OnRun()
*   在 Microsoft.VisualBasic.ApplicationServices.WindowsFormsApplicationBase.DoApplicationModel()
*   在 Microsoft.VisualBasic.ApplicationServices.WindowsFormsApplicationBase.Run（字符串 [] 命令行）
*   在 ORC_Testing.My.MyApplication.Main(String[] Args) 在 17d14f5c-a337-4978-8281-53493378c1071.vb:line 81
*   在 System.AppDomain._nExecuteAssembly（RuntimeAssembly 程序集，字符串 [] 参数）
*   在 System.AppDomain.ExecuteAssembly（字符串 assemblyFile，证据 assemblySecurity，String [] args）
*   在 Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
*   在 System.Threading.ThreadHelper.ThreadStart_Context（对象状态）
*   在 System.Threading.ExecutionContext.Run（ExecutionContext executionContext，ContextCallback 回调，对象状态，布尔 ignoreSyncCtx）
*   在 System.Threading.ExecutionContext.Run（ExecutionContext executionContext，ContextCallback 回调，对象状态）
*   在 System.Threading.ThreadHelper.ThreadStart()

**编辑 2**

这是我扫描/加载图像的方式：

```
Dim filename As Collection
filename = TwainHandler.ScanImages("c:\scan\", "tif")
Dim ScannedFile As Image = Image.FromFile(filename(1))
PictureBox1.Image = ScannedFile
PictureBox1.Width = ScannedFile.Width
' etc. 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-17T13:09:31.047

您的问题很可能是，在某些时候，您正在对您的一个对象调用该`Dispose`方法。`Image`当您调用 时`Image.Dispose`，它会从内存中删除底层图像数据，因此该`Image`对象仍然存在，但由于它不再包含实际图像而无效。当您将`PictureBox.Image`属性设置为加载的`Image`对象时，`PictureBox`控件假定该`Image`对象将保持有效，以便以后在控件需要将自身重新绘制到屏幕上时，它可以重用它。例如：

```
Dim myImage As Image = Image.FromFile("file path")
PictureBox1.Image = myImage
PictureBox1.Refresh() ' This works
myImage.Dispose()
PictureBox1.Refresh() ' This throws an exception because it tries to access the disposed Image object 
```

控件会在图片被dispose的`PictureBox`时候自动为你dispose，所以你不用担心自己dispose。唯一应该处理图像的时间是当您不将它们提供给任何其他对象以供以后使用时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-24T06:58:55.603

这是我的解决方案，即使问题很旧，也有人可以使用它。

```
Dim myImage As Image = Image.FromFile("file path")
PictureBox1.Image = myImage.clone // Use clone to give a new copy not a reference of image
PictureBox1.Refresh() // This works
myImage.Dispose()
PictureBox1.Refresh()  // This works also because we've a copy not reference 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-10T11:58:12.280

PictureBox1.Image = myImage.Clone 这样您使用的是图像的副本，因此与原始图像发生什么无关紧要

# zend-framework - 普通查询转Zend格式查询？

> ID：13912371
> 
> 赞同：1
> 
> 时间：2012-12-17T10:30:19.130
> 
> 标签：zend-framework, zend-db-table

手动我构建了一个查询......我面临着在 zend 中构建的困难，

ei 选择里面选择

这是我的查询，

```
SELECT * FROM (
  SELECT t1.eventId,t1.start_date,t1.end_date, COUNT(*) pos FROM events t1
    LEFT JOIN events t2
      ON t2.start_date = t1.start_date AND t2.eventId <= t1.eventId
  GROUP BY
    t1.eventId,t1.start_date
  ) t
WHERE
  pos <= 3; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:42:54.680

```
 $query = $database->select ()
        ->from ('events AS t1', array (
        'eventId',
        'start_date',
        'end_date',
        new Zend_Db_Expr ('COUNT(*) AS pos')
    ))
        ->joinLeft ('events AS t2', 't2.start_date = t1.start_date AND t2.eventId <= t1.eventId', array ())
        ->group ('t1.eventId,t1.start_date');

    $outer_query = $database->select ()
        ->from ($query)
        ->where ('pos <= 3'); 
```

# algorithm - 迭代循环 - 复杂性

> ID：13912372
> 
> 赞同：-3
> 
> 时间：2012-12-17T10:30:19.893
> 
> 标签：algorithm, linked-list, complexity-theory

我编写了一个算法来查找链表中的重复项。
对于每个节点，我从列表的头部迭代到当前节点，如果它是重复的，则将其删除。

我的算法的复杂度是多少？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T10:33:34.967

算法的复杂性是`Θ(n^2)` *最坏的情况*，因为如果没有重复，你会为每个节点迭代线性增加的次数，导致`1 + 2 + .... + n`总读取数为`Θ(n^2)`（来自[算术级数的总和](http://en.wikipedia.org/wiki/Arithmetic_progression#Sum)）

* * *

在*最好的情况下*，复杂性是`Θ(n)`- 如果所有元素都是`Θ(n)`重复的`Θ(n)`

# regex - 正则表达式和换行符中的美元符号

> ID：13912373
> 
> 赞同：22
> 
> 时间：2012-12-17T10:30:26.897
> 
> 标签：regex

我知道美元符号用于匹配字符串末尾的字符，以确保搜索不会在字符串中间停止，而是一直持续到字符串末尾。

但是它如何处理换行符，它是在换行符之前匹配还是考虑到这一点。

我在 Eclipse 正则表达式中检查了它，因为正则表达式匹配的字符串数组 `([A-Za-z ]+)$\n`有效，而不是相反`([A-Za-z ]+\n)$`

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-17T10:46:06.523

请注意`^`和`$`是`zero-width`令牌。因此，它们不匹配任何字符，而是匹配`position`.

*   `^`匹配字符串中第一个字符之前的位置。
*   `$`匹配`newline`字符串中第一个之前的位置。

所以，`String`之前的`$`当然不包括`newline`，这就是`([A-Za-z ]+\n)$`你的正则表达式失败并`([A-Za-z ]+)$\n`成功的原因。

简单来说，你的`$`后面应该跟一个`newline`，而不是其他字符。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-17T10:40:17.970

如果模式以换行符结尾，则`$`通常在该字符之前匹配。至少对于 Perl、PCRE、Java 和 .NET 来说是这样。（**编辑：**正如 Tim Pietzker 在评论中指出的那样，`\r`.NET 不认为换行符）

这是引入的，因为从一行读取的输入以换行符终止（至少在 Perl 中），这样可以方便地忽略它。

用于`\z`表示字符串的**最后**（如果您的正则表达式引擎支持它）。

[资源](http://www.regular-expressions.info/anchors.html#realend)

# c++ - 访问特征矩阵的行向量时复制或引用

> ID：13912383
> 
> 赞同：4
> 
> 时间：2012-12-17T10:31:08.957
> 
> 标签：c++, performance, reference, eigen

我正在使用使用[Eigen](http://eigen.tuxfamily.org/index.php?title=Main_Page)矩阵库的代码。我注意到在整个代码中，有如下访问器：

```
RowVector3f V(size_t vertex_index) const
{
    return mymatrix.row(vertex_index);
} 
```

使用返回 const ref 的访问器不是更好吗？Eigen有可能吗？或者也许只是将指向内部浮点数的指针返回到行开始并将其转换为向量（当然假设匹配行主要布局）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T13:25:44.003

在 Eigen 中，mymatrix.row(vertex_index) 返回一个块（假设 mymatrix 是一个 Matrix3f）。Block 对象本质上是指向原始数据的指针。在您的情况下，此代理被复制到 RowVector3f 中。幸运的是，对于这么小的固定大小的对象，编译器很容易优化掉这个额外的副本。所以我不会打扰。

在更一般的情况下，我会重写 V 方法以返回 MatrixXf::RowXpr（这是 Block<...> 的正确 typedef）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-17T10:35:15.467

我不知道这个库，但我确实使用了该技术，即返回对象，并通过值而不是通过引用返回它们。这是出于安全考虑 - 当您按值返回一部分原始数据时，您无法更改原始数据。

此外，使用对象而不是指向数据的指针使代码更加语法友好和高级。

# r - 拆分单元格中的数据

> ID：13912387
> 
> 赞同：0
> 
> 时间：2012-12-17T10:31:18.817
> 
> 标签：r, dataframe

我有一个看起来像这样的数据集

```
Code   Product
1      A|B
2      A|B|C
3      A|B|C|D|E 
```

`Product`当我使用函数拆分列`colsplit`时，会发生重复。函数的输出`colsplit`如下所示：

```
Code  Product.1   Product.2  Product.3  Product.4  Product.5
1     A           B          A          B          A
2     A           B          C          A          B
3     A           B          C          D          E 
```

发生这种情况是因为其中一个单元格有五个元素。有没有办法避免这种重复？

感谢和问候贾亚拉姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T10:52:30.453

### 更新（2013 年 10 月 21 日）

下面的概念已经融入到`concat.split.*`我的“splitstackshape”包中调用的一系列函数中。这是一个非常简单的解决方案，使用`concat.split.multiple`：

```
library(splitstackshape)
concat.split.multiple(temp, "Product", "|", "long")
#    Code time Product
# 1     1    1       A
# 2     2    1       A
# 3     3    1       A
# 4     1    2       B
# 5     2    2       B
# 6     3    2       B
# 7     1    3    <NA>
# 8     2    3       C
# 9     3    3       C
# 10    1    4    <NA>
# 11    2    4    <NA>
# 12    3    4       D
# 13    1    5    <NA>
# 14    2    5    <NA>
# 15    3    5       E 
```

如果您想要宽格式，请删除该`"long"`参数，但您的评论表明您最终想要一个长格式的输出。

* * *

### 原始答案（2012 年 12 月 17 日）

您可以使用 和 执行此操作，`strsplit`如下`sapply`所示：

```
# Your data
temp <- structure(list(Code = 1:3, Product = c("A|B", "A|B|C", "A|B|C|D|E"
)), .Names = c("Code", "Product"), class = "data.frame", row.names = c(NA, -3L))

temp1 <- strsplit(temp$Product, "\\|") # Split the product cell
temp1 <- data.frame(Code = temp$Code, 
                    t(sapply(temp1, 
                           function(x) { 
                               temp <- matrix(NA, 
                                              nrow = max(sapply(temp1, length)));
                               temp[1:length(x)] <- x; temp})))
temp1
#   Code X1 X2   X3   X4   X5
# 1    1  A  B <NA> <NA> <NA>
# 2    2  A  B    C <NA> <NA>
# 3    3  A  B    C    D    E 
```

* * *

或者...使用`rbind.fill`“plyr”包，在将每一行变成一个列之后`data.frame`：

```
temp1 <- strsplit(temp$Product, "\\|")
library(plyr)
data.frame(Code = temp$Code, 
           rbind.fill(lapply(temp1, function(x) data.frame(t(x)))))
#   Code X1 X2   X3   X4   X5
# 1    1  A  B <NA> <NA> <NA>
# 2    2  A  B    C <NA> <NA>
# 3    3  A  B    C    D    E 
```

* * *

或者...受到@DWin[在这里](https://stackoverflow.com/a/13924245/1270695)的精彩回答的启发，重新阅读第二列`data.frame`本身。

```
newcols <- max(sapply(strsplit(temp$Product, "\\|"), length))
temp2 <- data.frame(Code = temp$Code,
                    read.table(text = as.character(temp$Product), 
                               sep="|", fill=TRUE, 
                               col.names=paste("Product", seq(newcols))))
temp2
#   Code Product.1 Product.2 Product.3 Product.4 Product.5
# 1    1         A         B                              
# 2    2         A         B         C                    
# 3    3         A         B         C         D         E 
```

# jquery - JQuery - 无法连接更改事件

> ID：13912388
> 
> 赞同：0
> 
> 时间：2012-12-17T10:31:22.520
> 
> 标签：jquery

在我的 MVC 应用程序中，我有一个表单，我进行了 2 个异步 AJAX 调用，1 个用于获取新的数据页面，另一个用于显示搜索结果。在这些调用之前表单的初始加载很好。我想给我的行着色，这很有效；

```
$("#tblePagedList").on("change", styleRows);

function styleRows() {
    $("#tblePagedList tr:even").addClass("row1");
    $("#tblePagedList tr:odd").addClass("row2");
} 
```

但是，在我导航到新页面或进行搜索后，这些样式不会应用。我尝试连接更改事件失败了；

IE

```
$("#tblePagedList").on("change", styleRows); 
```

或者

```
$("#tblePagedList").change(styleRows); 
```

我的桌子看起来像；

```
<table id="tblePagedList">
    <thead>
        <tr>
            <th>
                Company
            </th>
            <th>
                Address
            </th>
            <th style="width:100px;">
                Telephone
            </th>
            <th style="width:100px;">
                Contact
            </th>
            <th style="width:100px;">
                Trade
            </th>
            <th></th>
        </tr>
    </thead>
    <tbody id="tblePagedListBody"></tbody>
    @foreach (var item in Model) {
        <tr>
            <td>
                @item.Company
            </td>
            <td>
                @item.AddressLine
            </td>
            <td>
                @item.Telephone
            </td>
            <td>
                @item.Contact
            </td>
            <td>
                @item.TradeName
            </td>
            <td>
                @Html.ActionLink("Details", "DetailsSubcontractor", new { id = item.CompanyId })
            </td>
        </tr>
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T10:38:21.740

[On Change 事件](http://www.w3schools.com/jsref/event_onchange.asp)在输入值更改时触发，而不是在 DOM 更改时触发。如果您需要一个事件，我会注册一个自定义事件，我们称之为更新：

```
`$("#tblePagedList").on("update", handler)` 
```

并在 AJAX 调用成功时手动触发：

```
`$("#tblePagedList").trigger("update")` 
```

但我不确定你是否真的需要事件。也许调用`styleRows`AJAX 回调就足够了？

如果你真的喜欢事件的概念，可以考虑切换到 BackboneJS。您可以将获取的数据存储在集合中，挂钩到集合更新事件并在该事件上呈现表。

顺便说一句，随后的两个`styleRows`调用可能会给出错误的结果，删除旧类：

```
函数样式行（）{
    $("#tblePagedList tr:even").removeClass("row1 row2").addClass("row1");
    $("#tblePagedList tr:odd").removeClass("row1 row2").addClass("row2");
}

```

# php - 将版本添加到生成的 XML 标记

> ID：13912396
> 
> 赞同：0
> 
> 时间：2012-12-17T10:32:02.470
> 
> 标签：php, xml, rss

我试图制作一个 RSS Feed XML，我发现了一个网站，他们在其中举例说明了 XML 的外观：

```
<?xml version="1.0"?>
<rss version="2.0">
<channel>

<title>The Channel Title Goes Here</title>
<description>The explanation of how the items are related goes here</description>
<link>http://www.directoryoflinksgohere</link>

<item>
<title>The Title Goes Here</title>
<description>The description goes here</description>
<link>http://www.linkgoeshere.com</link>
</item>

<item>
<title>Another Title Goes Here</title>
<description>Another description goes here</description>
<link>http://www.anotherlinkgoeshere.com</link>
</item>

</channel>
</rss> 
```

但是，当我检查我当前的 XML 时，我注意到我错过了 xml 和 rss 标记中的版本。

```
<xml>
<rss>
<channel>
<title>#####</title>
<description>
#####
</description>
<path>#####</path> 
```

如何将版本添加到 XML 和 RSS 的开始标记？

**PHP**

```
$newspages = $this->newspages;

$xml = new SimpleXMLElement('<xml/>');

$rss = $xml->addChild('rss');

$channel = $rss->addChild('channel');

$channel->addChild('title', txt('rss.channelname'));
$channel->addChild('description', txt('rss.channeldescription'));
$channel->addChild('path', 'http://'.$_SERVER['HTTP_HOST']);

foreach ($newspages as $newspage) {
    if ($newspage['id'] !== 'news-archive') {
        $item = $channel->addChild('item');
        $item->addChild('title', $newspage['title']);
        $item->addChild('description', $newspage['description']);
        $item->addChild('path', url('###/pageid', array('language'=>$this->language, 'id'=>$newspage['id'])));
    }
}

Header('Content-type: text/xml');

print($xml->asXML()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T11:21:42.477

使用 addAttribute 方法。

```
<?php

$xml = new SimpleXMLElement('<xml/>');
$xml->addAttribute('version', '1.0');

$rss = $xml->addChild('rss');
$rss->addAttribute('version', '2.0'); 
```

# html - 带有大对话框的 PrimeFaces - 如何正确执行此操作？

> ID：13912397
> 
> 赞同：9
> 
> 时间：2012-12-17T10:32:03.763
> 
> 标签：html, css, jsf, dialog, primefaces

如何正确使用**PrimeFaces**大对话框？

HTML 世界中的对话框最初被认为仅用于消息和简单问题，但并非经常用于从**DataTable中****选择**元素。这不是正确的用例吗？

 **DataTable 本身可以在两个方向上都很大。我们可以使用分页器并仅显示 5 行，从而限制了功能。如果用户屏幕允许，为什么不显示 15？我们可以让用户选择显示的行数，是还是不是？

但是如果我们这样做，并且如果用户在小屏幕上选择了 15 行，那么对话框会变得比那个屏幕大，并且这个对话框不能做任何事情，因为关闭按钮不再可用。恕我直言，一个大而讨厌的错误。

但是根据这个论坛讨论[http://forum.primefaces.org/viewtopic.php?f=3&t=19211](http://forum.primefaces.org/viewtopic.php?f=3&t=19211)没有错，甚至给出了解决方案：*根本不要使用对话框！*但是我不相信这样的解决方案，因为我知道浏览器有滚动条，如果内容大于屏幕，滚动条就会显示。因此，至少在理论上，可以以滚动显示的方式将对话框添加到页面。可以添加一些 0px 宽度和 0px 高度 div，使主页适应显示的最大对话框的宽度和高度，以便用户始终可以将对话框拖动到页面顶部并访问底部按钮。

我的问题是：如何通过大对话框修复或解决该问题？如果它们比当前视口大，如何让它们完全显示？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T16:11:33.413

一般的问题是在 PrimeFaces 中缺少任何文档大小适配代码来进行对话。更糟糕的是设置对话框为位置：固定，这使得它们不可滚动。所以我离开了位置：当对话框适合窗口时固定，否则我设置了位置：绝对并调整文档大小，以便适合对话框（启用滚动）：

```
function handleResizeDialog(dialog) {
    var el = $(dialog.jqId);
    var doc = $('body');
    var win = $(window);
    var elPos = '';
    var bodyHeight = '';
    var bodyWidth = '';
    // position:fixed is maybe cool, but it makes the dialog not scrollable on browser level, even if document is big enough
    if (el.height() > win.height()) {
        bodyHeight = el.height() + 'px';
        elPos = 'absolute';
    }   
    if (el.width() > win.width()) {
        bodyWidth = el.width() + 'px';
        elPos = 'absolute';
    }
    el.css('position', elPos);
    doc.css('width', bodyWidth);
    doc.css('height', bodyHeight);
    var pos = el.offset();
    if (pos.top + el.height() > doc.height())
        pos.top = doc.height() - el.height();
    if (pos.left + el.width() > doc.width())
        pos.left = doc.width() - el.width();
    var offsetX = 0;
    var offsetY = 0;
    if (elPos != 'absolute') {
        offsetX = $(window).scrollLeft();
        offsetY = $(window).scrollTop();
    }
    // scroll fix for position fixed
    if (pos.left < offsetX)
        pos.left = offsetX;
    if (pos.top < offsetY)
        pos.top = offsetY;
    el.offset(pos);
} 
```**

# mysql - MYSQL 是否支持 NOSQL

> ID：13912407
> 
> 赞同：-3
> 
> 时间：2012-12-17T10:32:27.790
> 
> 标签：mysql, nosql

我想知道mysql是否支持nosql。我已经浏览了支持 noSQL 的 MySQL Cluster，它非常令人困惑。所以，我想知道我们是否可以将 NoSQL 与 MySQL 集成，如果可能的话，是否有任何教程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T10:41:54.117

> NoSQL 数据库主要不是基于表构建的，并且通常不使用 SQL 进行数据操作。
> 
> NoSQL 不使用 SQL 作为其查询语言。NoSQL 数据库系统与大型互联网公司一起出现，这些公司在处理大量数据时遇到了传统 RDBMS 解决方案无法应对的挑战。

这应该回答你的问题，因为 MySQL 是一个传统的 RDBMS，使用 SQL 进行数据操作并且它基于表。

**tl;博士**：不，它没有。

# android - 在android中单击键盘中的下一个按钮时自动滚动edittext

> ID：13912409
> 
> 赞同：1
> 
> 时间：2012-12-17T10:32:30.597
> 
> 标签：android, android-layout, scrollbar, scrollview

我有一个 10`edittexts`英寸的`scrollview`. 当第一个`edittext`焦点时，它显示如下图。

![在此处输入图像描述](../Images/6a7bf2f0a91c596ee659a83ad141edc4.png)

当点击下一步时，它显示如下。![在此处输入图像描述](../Images/4bccd6c0d61f8f2c2503fd27526fcba4.png)

但我需要`edittext`像下图那样自动滚动 ![在此处输入图像描述](../Images/61d37e5eb7143087ec66523bff869dc0.png)

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T10:56:38.023

将**android:windowSoftInputMode="adjustPan"**添加到**AndroidManifest.xml**中的活动标签。它会自动调整屏幕布局的滚动，不会干扰用户界面。试试看。！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T07:23:59.783

这个对我有用。将所有edittext和按钮放在滚动视图中并编写此代码

```
ScrollView scrollView = (ScrollView)findViewById(R.id.scrollView);
                scrollView.fullScroll(ScrollView.FOCUS_DOWN);
                findViewById(R.id.edittext).requestFocus(); 
```

# python - 在 matplotlib 日期对象的 numpy 数组中查找行

> ID：13912411
> 
> 赞同：1
> 
> 时间：2012-12-17T10:32:39.403
> 
> 标签：python, arrays, numpy

我正在使用 matplotlib.dates 将我的字符串日期转换为日期对象，认为以后操作会更容易。

```
import matplotlib.dates as md    
def ConvertDate(datestr):
    '''
    Convert string date into matplotlib date object
    '''
    datefloat = md.datestr2num(datestr)
    return md.num2date(datefloat) 
```

我试图做的是过滤我的结构化数组以告诉我行的索引号属于某个月份和/或年份

```
import numpy as np
np.where( data['date'] == 2008 ) 
```

我可能可以使用 lambda 函数将每个对象转换为字符串值，就像这样

```
lambda x: x.strftime('%Y') 
```

比较每个项目，但我不知道在哪里将这个 lambda 函数放入 np.where 或者它是否可能。

有任何想法吗？还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:03:36.540

*注意：您不妨使用 datetime 的[`datetime.strptime`](https://stackoverflow.com/a/466376/1240268)功能：*

```
import datetime
import numpy as np
dt1 = datetime.datetime.strptime('1/2/2012', '%d/%m/%Y')
dt2 = datetime.datetime.strptime('1/2/2011', '%d/%m/%Y')

In [5]: dt1
Out[5]: datetime.datetime(2012, 2, 1, 0, 0) 
```

然后，您可以使用[`numpy.non-zero`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.nonzero.html)（将您的数组过滤到那些日期时间的索引，例如，年份是 2012 年）：

```
a = np.array([dt1, dt2])
b = np.array(map(lambda x: x.year, a))

In [8]: b
Out[8]: array([2012, 2011], dtype=bool)

In [9]: np.nonzero(b==2012)
Out[9]: (array([0]),) 
```

*另外，我建议研究具有内置此功能（在 numpy 之上）、更多便利功能（例如）以及高效日期时间存储的[pandas ...](/questions/tagged/pandas "显示标记为“熊猫”的问题")`to_datetime`*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T11:28:39.890

在收到很多错误消息之后，我想我找到了自己问题的答案。

```
[ x for x in range(len(data)) if data['date'][x].year == 2008 ] 
```

我做了一个列表理解来返回与查询匹配的结构化数组的索引。我还加入了@hayden 的建议，使用它`.year`而不是`strftime()`Maybe`numpy.where()`仍然更快，但这符合我现在的需求。

# javascript - 在父级已关闭时重新加载祖父级窗口

> ID：13912415
> 
> 赞同：1
> 
> 时间：2012-12-17T10:32:50.690
> 
> 标签：javascript, jquery, html

我有一个父窗口（＃1），它打开一个弹出子窗口（＃2），然后打开一个弹出子窗口（＃3）。当 (#3) 打开时， (#2) 由 self.close() 关闭。

我的问题是当我关闭时（#3）我如何刷新（#1）？我尝试了 window.opener.opener.reload()，但由于 (#2) 已经关闭，这不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T10:51:20.297

我不认为你能做到这一点。一旦 #2 窗口关闭，您将失去对它的引用，因此您无法引用它的开启器 (#1) 来刷新它。

**但是**，通过 Chrome 控制台中的快速测试判断，将窗口 #1 的引用传递给窗口 #3 文档，然后使用它重新加载它。它可能看起来像这样：

```
// in window #1 - opening window #2
var win2 = window.open('samedomainurl...');

// -----------------
// in window #2 (just opened)
// -----------------
// open window 3
var win3 = window.open('samedomainurl...');
// pass reference to window.opener (which is #1) to newly opened win3 document
win3.document.grandparentWindow = window.opener;

// -----------------
// in window #3 - after closing #2 you still can access #1 using document.grandparentWindow property
// -----------------
// reload original window
document.grandparentWindow.location.reload(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-08-09T05:46:58.557

```
window.parent.opener.location.reload(); 
```

# css - border-bottom 没有出现在所有的 TD 上，只出现在最后一个 TR 的 TD 上

> ID：13912417
> 
> 赞同：0
> 
> 时间：2012-12-17T10:32:53.890
> 
> 标签：css

我在这里有一个表格，我正在尝试对其应用一些 CSS 规则。我有一个 CSS 规则来将边框底部和边框顶部分别设置为红色和绿色。由于某种原因，border-bottom 并未出现在所有 TD 上，而仅出现在最后一个 TR 的 TD 上。任何理由。

```
 table{
        border-collapse:collapse;
    }
    table td{
        border-top:solid 4px green;
        border-bottom:solid 2px red;
    }
<table width="500px">
        <tr>
            <td>Computers</td>
            <td>£900</td>
        </tr>
        <tr>
            <td>Laptops</td>
            <td>£600</td>
        </tr>
        <tr>
            <td>Keyboards</td>
            <td>£20</td>
        </tr>
        <tr>
            <td>Hard Drives</td>
            <td>£80</td>
        </tr>
    </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T10:39:15.443

边界重叠，绿色在红色之上。纠正这个集合`border-collapse: separate;`而不是`border-collapse: collapse;`

# php - 相对于绝对网址转换（使用阿拉伯语）

> ID：13912418
> 
> 赞同：2
> 
> 时间：2012-12-17T10:32:57.290
> 
> 标签：php

我有这些功能包 [http://nadeausoftware.com/articles/2008/05/php_tip_how_parse_and_build_urls](http://nadeausoftware.com/articles/2008/05/php_tip_how_parse_and_build_urls)

如果我们这样做

```
$x =  url_to_absolute('http://al-mashhad.com/News/النيابة-تستمع-لأقوال-خالد-يوسف-في-بلاغه-ضد-أبو-إسم/141274.aspx','../../Media/News/2012/12/16/2012-634912584761067771-106.jpg');

var_dump($x); 
```

它将返回 false 因为这些函数不支持阿拉伯语

特别是这个功能

```
function split_url( $url, $decode=TRUE )
{
    // Character sets from RFC3986.
    $xunressub     = 'a-zA-Z\d\-._~\!$&\'()*+,;=';
    $xpchar        = $xunressub . ':@%';

    // Scheme from RFC3986.
    $xscheme        = '([a-zA-Z][a-zA-Z\d+-.]*)';

    // User info (user + password) from RFC3986.
    $xuserinfo     = '((['  . $xunressub . '%]*)' .
                     '(:([' . $xunressub . ':%]*))?)';

    // IPv4 from RFC3986 (without digit constraints).
    $xipv4         = '(\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})';

    // IPv6 from RFC2732 (without digit and grouping constraints).
    $xipv6         = '(\[([a-fA-F\d.:]+)\])';

    // Host name from RFC1035\.  Technically, must start with a letter.
    // Relax that restriction to better parse URL structure, then
    // leave host name validation to application.
    $xhost_name    = '([a-zA-Z\d-.%]+)';

    // Authority from RFC3986\.  Skip IP future.
    $xhost         = '(' . $xhost_name . '|' . $xipv4 . '|' . $xipv6 . ')';
    $xport         = '(\d*)';
    $xauthority    = '((' . $xuserinfo . '@)?' . $xhost .
                 '?(:' . $xport . ')?)';

    // Path from RFC3986\.  Blend absolute & relative for efficiency.
    $xslash_seg    = '(/[' . $xpchar . ']*)';
    $xpath_authabs = '((//' . $xauthority . ')((/[' . $xpchar . ']*)*))';
    $xpath_rel     = '([' . $xpchar . ']+' . $xslash_seg . '*)';
    $xpath_abs     = '(/(' . $xpath_rel . ')?)';
    $xapath        = '(' . $xpath_authabs . '|' . $xpath_abs .
             '|' . $xpath_rel . ')';

    // Query and fragment from RFC3986.
    $xqueryfrag    = '([' . $xpchar . '/?' . ']*)';

    // URL.
    $xurl          = '^(' . $xscheme . ':)?' .  $xapath . '?' .
                     '(\?' . $xqueryfrag . ')?(#' . $xqueryfrag . ')?$';

    // Split the URL into components.
    if ( !preg_match( '!' . $xurl . '!', $url, $m ) )
        return FALSE;

    if ( !empty($m[2]) )        $parts['scheme']  = strtolower($m[2]);

    if ( !empty($m[7]) ) {
        if ( isset( $m[9] ) )   $parts['user']    = $m[9];
        else            $parts['user']    = '';
    }
    if ( !empty($m[10]) )       $parts['pass']    = $m[11];

    if ( !empty($m[13]) )       $h=$parts['host'] = $m[13];
    else if ( !empty($m[14]) )  $parts['host']    = $m[14];
    else if ( !empty($m[16]) )  $parts['host']    = $m[16];
    else if ( !empty( $m[5] ) ) $parts['host']    = '';
    if ( !empty($m[17]) )       $parts['port']    = $m[18];

    if ( !empty($m[19]) )       $parts['path']    = $m[19];
    else if ( !empty($m[21]) )  $parts['path']    = $m[21];
    else if ( !empty($m[25]) )  $parts['path']    = $m[25];

    if ( !empty($m[27]) )       $parts['query']   = $m[28];
    if ( !empty($m[29]) )       $parts['fragment']= $m[30];

    if ( !$decode )
        return $parts;
    if ( !empty($parts['user']) )
        $parts['user']     = rawurldecode( $parts['user'] );
    if ( !empty($parts['pass']) )
        $parts['pass']     = rawurldecode( $parts['pass'] );
    if ( !empty($parts['path']) )
        $parts['path']     = rawurldecode( $parts['path'] );
    if ( isset($h) )
        $parts['host']     = rawurldecode( $parts['host'] );
    if ( !empty($parts['query']) )
        $parts['query']    = rawurldecode( $parts['query'] );
    if ( !empty($parts['fragment']) )
        $parts['fragment'] = rawurldecode( $parts['fragment'] );
    return $parts;
} 
```

问题是我如何添加正则表达式以使其在 url 中支持阿拉伯语

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T10:35:54.177

您显示的 URL[不是真正有效的 URL](https://stackoverflow.com/questions/2742852/unicode-characters-in-urls)。URL 中只允许使用 ASCII 字符；别的什么，你需要[百分比编码](http://en.wikipedia.org/wiki/Percent-encoding)。为了方便起见，浏览器无论如何都会显示正确的字符。

首先在 URL 上运行`urlencode()`，这会将阿拉伯字符变成`%xx`实体；然后在它上面运行你的函数。

即使您这样做，现代浏览器也会自动显示阿拉伯字符。

# ruby - 我想将我的 rails 应用程序连接到远程数据库

> ID：13912421
> 
> 赞同：-1
> 
> 时间：2012-12-17T10:33:05.230
> 
> 标签：ruby, ruby-on-rails-3

我是 ruby​​ on rail 的新手，我在数据库链接过程中遇到问题，也就是说，我的 rails3.1 应用程序适用于本地数据库，但现在我想连接全局数据库，即连接到客户端数据库。我已经给出了所有详细信息，包括用户名：、密码和主机名。但它给出了“无法连接到数据库”之类的错误。所以请让我退出这个..

```
development:

  adapter: mysql2

  encoding: utf8

  reconnect: false

  database: abc_development

  pool: 5

  username: root

  password: 

  host: mysql.myappdemo.com

test:

  adapter: mysql2

  encoding: utf8

  reconnect: false

  database: abc_test

  pool: 5

  username: root

  password: 

  host: mysql.myappdemo.com

production:

  adapter: mysql2

  encoding: utf8

  reconnect: false

  database: abc_production

  pool: 5

  username: root

  password: 

  host: mysql.myappdemo.com 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:37:02.390

在 database.yml 中指定主机和端口选项

```
development:
  adapter: mysql2
  encoding: utf8
  database: my_db_name
  username: root
  password: my_password
  host: 127.0.0.1
  port: 3306 
```

# sql - 添加期初余额列和期末余额列

> ID：13912422
> 
> 赞同：1
> 
> 时间：2012-12-17T10:33:09.897
> 
> 标签：sql, crystal-reports, report

我有一张这样的桌子：

```
StockNumber|InventoryName|Year|Month|Adj|iss|piss|Tsfr|return|rdj|rpo|xefr
alb001      clinic1       2010  1     4   5    5   5    6      5   4   10
alb001      Clinic1       2010  2    10  2    2    3    3      4   4   4
alb001      Clinic1       2010  4    11  3   5    77    90     78   9   6
alb001      Clinic1       2010  5    10  2    2    3    3      4   4   4 
```

我想添加一个期末余额列，它将是

```
sum(return+rdj+rpo+xefr) - sum(adj+iss+piss+tsfr) 
```

我还想添加期初余额列，这将是上个月的期末余额。

然后，我将计算当前月份的余额：

```
OpeningBalance + sum(return+rdj+rpo+xefr) - sum(adj+iss+piss+tsfr) = ClosingBalance 
```

**注意。**Year 和 Month 列是浮点数，也希望将它们更改为日期格式。

我是 SQL 和水晶报表的新手。我想要一个查询来帮助我完成开发具有期初余额和期末余额列的报表的任务，期初余额是上一个期末余额。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T10:56:29.690

你可以这样做：

```
;WITH WithClosingBalances
AS
(
    SELECT
      [StockNumber], 
      [InventoryName], 
      [Year], 
      [Month], 
      [Adj], 
      [iss],
      [piss], 
      [Tsfr], 
      [return], 
      [rdj], 
      [rpo], 
      [xefr],
      ([return] + rdj + rpo + xefr) -
      (adj+iss+piss+tsfr) ClosingBalance,
      ROW_NUMBER() OVER(PARTITION BY INVENTORYNAME
                        ORDER BY month) rownum
    FROM table1
), WithOpeningBalances
AS
(
    SELECT
      [StockNumber], 
      [InventoryName], 
      [Year], 
      [Month], 
      [Adj], 
      [iss],
      [piss], 
      [Tsfr], 
      [return], 
      [rdj], 
      [rpo], 
      [xefr],
      ClosingBalance,
      ISNULL((SELECT ClosingBalance 
             FROM WithClosingBalances c2
             WHERE c1.rownum - c2.rownum =1
            ), 0) OpeningBalance,
      rownum
    FROM WithClosingBalances c1
) 
SELECT
  [StockNumber], 
  [InventoryName], 
  [Year], 
  [Month], 
  [Adj], 
  [iss],
  [piss], 
  [Tsfr], 
  [return], 
  [rdj], 
  [rpo], 
  [xefr],
  ClosingBalance,
  OpeningBalance,
  OpeningBalance + ClosingBalance AS CurrentMonthBalance
FROM WithOpeningBalances; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/8a0d3/6)

这会给你：

```
| STOCKNUMBER | INVENTORYNAME | YEAR | MONTH | ADJ | ISS | PISS | TSFR | RETURN | RDJ | RPO | XEFR | CLOSINGBALANCE | OPENINGBALANCE | CURRENTMONTHBALANCE |
------------------------------------------------------------------------------------------------------------------------------------------------------------
|      alb001 |       clinic1 | 2010 |     1 |   4 |   5 |    5 |    5 |      6 |   5 |   4 |   10 |              6 |              0 |                   6 |
|      alb001 |       Clinic1 | 2010 |     2 |  10 |   2 |    2 |    3 |      3 |   4 |   4 |    4 |             -2 |              6 |                   4 |
|      alb001 |       Clinic1 | 2010 |     4 |  11 |   3 |    5 |   77 |     90 |  78 |   9 |    6 |             87 |             -2 |                  85 |
|      alb001 |       Clinic1 | 2010 |     5 |  10 |   2 |    2 |    3 |      3 |   4 |   4 |    4 |             -2 |             87 |                  85 | 
```

* * *

## 这个查询是如何工作的？

我从您的问题中了解到，此查询将评估CURRENTMONTHBALANCE `CLOSINGBALANCE`，`OPENINGBALANCE, and`如下所示：

*   **`CLOSINGBALANCE`**=

    ```
     [return] + rdj + rpo + xefr) -
      (adj+iss+piss+tsfr) 
    ```

    每个月。我假设每个月的表中的每条记录。

*   **`OPENINGBALANCE`**: 是`CLOSINGBALANCE`按库存名称分组的上个月。这是使用`ROW_NUMBER() OVER(PARTITION BY InventoryName)`.

*   **`CURRENTMONTHBALANCE`**=`OpeningBalance + ClosingBalance`每条记录。

* * *

**更新：**`JOIN`如果有多个月份的条目，您可以使用而不是相关子查询，如下所示：

```
;WITH WithClosingBalances
AS
(
    SELECT
      [StockNumber], 
      [InventoryName], 
      [Year], 
      [Month], 
      [Adj], 
      [iss],
      [piss], 
      [Tsfr], 
      [return], 
      [rdj], 
      [rpo], 
      [xefr],
      ([return] + rdj + rpo + xefr) -
      (adj+iss+piss+tsfr) ClosingBalance,
      ROW_NUMBER() OVER(PARTITION BY INVENTORYNAME
                        ORDER BY month) rownum
    FROM table1
), WithOpeningBalances
AS
(
    SELECT
      [StockNumber], 
      [InventoryName], 
      [Year], 
      [Month], 
      [Adj], 
      [iss],
      [piss], 
      [Tsfr], 
      [return], 
      [rdj], 
      [rpo], 
      [xefr],
      c1.ClosingBalance,
      ISNULL(c2.ClosingBalance, 0) OpeningBalance
    FROM WithClosingBalances c1
    LEFT JOIN
    (
      SELECT rownum, SUM(ClosingBalance) ClosingBalance
      FROM WithClosingBalances
      GROUP BY rownum
    ) c2 ON c1.rownum - c2.rownum = 1
) 
SELECT
  [StockNumber], 
  [InventoryName], 
  [Year], 
  [Month], 
  [Adj], 
  [iss],
  [piss], 
  [Tsfr], 
  [return], 
  [rdj], 
  [rpo], 
  [xefr],
  ClosingBalance,
  OpeningBalance,
  OpeningBalance + ClosingBalance AS CurrentMonthBalance
FROM WithOpeningBalances; 
```

这将为您提供相同的输出。

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/8a0d3/12)

# asp.net - 如何在 Asp.NET 的恒定执行时间下增加每秒请求数？

> ID：13912424
> 
> 赞同：2
> 
> 时间：2012-12-17T10:33:15.357
> 
> 标签：asp.net, performance, execution-time, requests-per-second

我有一个 Web 应用程序，由于在中等流量下**请求/秒低而受到影响。**平均请求执行时间约为每页 200 毫秒。

为了模拟环境，我用一行代码在 Asp.NET 4.0 Web 应用程序中创建了一个超级简单的测试页面。

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As EventArgs) Handles Me.Load
    System.Threading.Thread.Sleep(200)
End Sub 
```

我将它发布到具有 4 核 cpu、8GB RAM、Win7 Enterprise 64 位、全新安装的服务器。

然后我创建了一个超级简单的控制台应用程序，它将在这个测试页面上增加一些负载。

```
 For i = 1 To 100
        For j = 1 To 100
            Dim client = New System.Net.WebClient

            client.DownloadStringAsync(New Uri(address))
        Next
        Threading.Thread.Sleep(1000)
    Next 
```

我打开了性能监视器并观察了 Requests/sec。无论我试图做什么来增加它，它总是 50。所有硬件使用率（CPU、内存）都非常低，因此必须有足够的空间来增加它。

我在 machine.config 中更改了 processModel，如下所示，但没有成功。

```
<processModel autoConfig="false" maxWorkerThreads="1000" maxIoThreads="1000" minWorkerThreads="500" minIoThreads="500" /> 
```

那么，我需要做些什么来利用我的全部硬件并增加每秒处理的请求数？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-29T23:42:52.663

如果您只在服务器端使用单个线程，您将获得每秒 1000/200 = 5 个请求。但是你得到了 50 个。所以看起来服务器允许你有多个线程，只是不够多。

或者您的客户端应用程序可能没有启动足够的线程来最大化服务器。这里的部分问题是您同时测试两个应用程序。

一种解决方案是使用久经考验的 Web 性能工具。这是一个关于 SO 的问题，它将为您提供一些选择：

[ASP.NET 压力测试](https://stackoverflow.com/questions/299518/asp-net-stress-testing#299784)

一旦您确定问题实际上是您的服务器端应用程序，请告诉我们，我们可以进一步调查。

# android - AutoCompleteTextView 强制显示所有项目或禁用过滤

> ID：13912433
> 
> 赞同：2
> 
> 时间：2012-12-17T10:33:47.237
> 
> 标签：android, autocomplete, filtering

根据我输入的 4 个首字母，我管理一个`AutoCompleteTextView`应该给出在我的数据库中找到的所有城镇 (ville) 的信息。

`Async task`效果很好并获得了正确的数据。

我的问题是`DropDownList`显示不是所有的项目。数据库返回的 20 个中通常只有 1 个、2 个、3 个或 4 个。

所以我想，ACTV 本身应该有一些自动过滤功能！我在这里检查了很多主题，以更新我的代码，但我没有成功.... :-(

我不断收到错误，但不知道到底是什么问题！:-(

*   [AutoCompleteTextView 强制显示所有项目](https://stackoverflow.com/questions/11284368/autocompletetextview-force-to-show-all-items)

*   [AutoCompleteTextView - 禁用过滤](https://stackoverflow.com/questions/8512762/autocompletetextview-disable-filtering)

所以这是我的代码：

```
class MyActivity extends Activity implements AdapterView.OnItemClickListener
{
        static class Ville 
        {
            String id;
            String name;

            @Override
            public String toString() { return this.name; }
        };

        ArrayAdapter<Ville>    villeAdapter;
        String                 villeAdapterFilter;
        VilleUpdateTask        villeAdapterUpdateTask;
        AutoCompleteTextView   villeText;
        Ville                  selectedVille;

        final TextWatcher textChecker = new TextWatcher() {

            public void afterTextChanged(Editable s) {}

            public void beforeTextChanged(CharSequence s, int start, int count, int after) {}

            public void onTextChanged(CharSequence s, int start, int before, int count)
            { 
                  MyActivity.this.setAdapterFilter(s.toString());
            }

        };

        public void onCreate(Bundle bundle)
        {
             super.onCreate(bundle);
             setContentView(R.layout.main);

             this.villeAdapter = new ArrayAdapter<Ville>(this,android.R.layout.simple_dropdown_item_1line, new Ville[0]);
             this.villeText = (AutoCompleteTextView ) findViewById(R.id.villeSelector);
             this.villeText.setAdapter(this.villeAdapter);
             this.villeText.setThreshold(THRESHOLD_DROPDOWN); 
             this.villeText.setOnItemClickListener(this);
             this.villeText.addTextChangedListener(textChecker);
        }

        public void onDestroy() { stopVilleAdapterUpdate(); 

        public void setAdapterFilter(String filter)
        {
             if (filter == null) {
                 // clearing the adapter
                 this.villeAdapterFilter = null;
                 this.villeAdapter.clear();
                 this.villeAdapter.notifyDataSetChanged();
                 Log.d("MyActivity","Clearing ville filter !");
             } else if (filter.length() > THRESHOLD_QUERY) {
                  if (this.villeAdapterFilter == null) {
                      Log.d("MyActivity","Ville Adapter Filter defined to:"+filter);
                      this.villeAdapterFilter = filter;
                      startVilleAdapterUpdate();
                  } else {
                      Log.d("MyActivity","Already filtered with:"+this.villeAdapterFilter);
                  }
             } else {
                  Log.d("MyActivity","Resetting filter (not enough data)");
                  this.villeAdapterFilter = null;
                 this.villeAdapter.clear();
                 this.villeAdapter.notifyDataSetChanged();
             }
        }

        public synchronized void onItemClick(ViewAdapter<?> ad, View v, int position, long id)
        {
             this.selectedVille = this.villeAdapter.getItemAtPosition(position);
             Log.d("MyActivity","Ville selected: "+this.selectedVille);
        }

        public synchronized void startVilleAdapterUpdate()
        {
              stopVilleAdapterUpdate();
              Log.d("MyActivity","Starting Update of Villes with "+this.villeAdapterFilter);
              this.villeAdapterUpdateTask = new VilleUpdateTask();
              this.villeAdapterUpdateTask.execute(this.villeAdapterFilter);
        }

        public synchronized void stopVilleAdapterUpdate()
        {
             if (this.villeAdapterUpdateTask != null) {
                 Log.d("MyActivity","Stopping current update of villes");
                 this.villeAdapterUpdateTask.cancel(true);
                 this.villeAdapterUpdateTask = null;
             }
        }

        public synchronized void onVilleAdapterUpdateResult(Ville[] data)
        {
             this.villeAdapterUpdateTask = null;
             if (data != null) {
                 Log.d("MyActivity","Received "+data.length+" villes from update task");
                 this.villeAdapter.clear();
                 this.villeAdapter.addAll(data);
                 this.villeAdapter.notifyDataSetChanged(); // mise à jour du drop down...
            }
        } 

        class VilleUpdateTask extends AsyncTask<String,Void,Ville[]>
        {
              public Ville[] doInBackground(String ... filters)
              {
                  ArrayList<Ville> values = new ArrayList<Ville>();
                  try  {
                       HttpClient httpclient = new DefaultHttpClient();
                       ....
                       ....
                       for(int i=0;i<json_array.length();i++) {
                           JSONObject json_ligne = json_array.getJSONObject(i);   
                           try {
                               Ville v = new Ville();
                               v.name = json_ligne.getString("NAME_VILLE");
                               v.id = json_ligne.getString("ID_VILLE");
                               values.add(v);
                           } catch (Exception ex) {
                               Log.w("VilleUpdateTask","Invalid value for Ville at index #"+i,ex);
                           }
                       }
                  } catch (Exception ex) {
                       Log.e("VilleUpdateTask","Failed to retrieve list of Ville !",ex);
                  }
                  return values.toArray(new Ville[values.size()]);
             }

             public void onPostExecute(Ville[] data)
             {
                 MyActivity.this.onVilleAdapterUpdateResult(data);
             }
        }

} 
```

编辑 1：是的，对不起，我的 ACTV 是一个基本的**TextView**，这不是滚动问题，因为在更好的情况下，我可以在列表中看到 10 个项目，最后的位置是随机的

编辑 2：您能帮我将现有代码调整为上述 2 个 URL 中的给定解决方案吗？

（1）根据那个解决方案[AutoCompleteTextView - 禁用过滤](https://stackoverflow.com/questions/8512762/autocompletetextview-disable-filtering)

我必须：

*   创建我的类**ClassMyACArrayAdapter**，它与给定的相同，只是它的名称发生了变化

*   更改我的声明

    ArrayAdapter villeAdapter；

至

```
List<ClassMyACArrayAdapter> villeAdapter; 
```

*   但是在 onCreate 中应该用什么替换初始的

    this.villeAdapter = new ArrayAdapter
    (this,android.R.layout.simple_dropdown_item_1line, new Ville[0]);

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-02-06T11:40:05.083

只要你需要它就打电话`autoCompleteTextView.showDropDown()`.....干杯:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T10:56:21.173

你的 AutoCompleteTextView 是 TextView、LinearLayout 还是 ListView？您活动中的代码看起来不错，所以我猜测问题可能出在布局中（也许您没有使用滚动，所以您只能看到第一个值）。

此外，您看到的值始终是返回列表中的第一个值，还是它们位于随机位置？

# sap-ase - 如何检测字符串截断

> ID：13912434
> 
> 赞同：0
> 
> 时间：2012-12-17T10:33:51.147
> 
> 标签：sap-ase, jtds

我使用 jTDS 1.2.6 连接 Adaptive Server Enterprise/15.7.0。当准备好的语句在具有`VARCHAR(16)`列的表中插入行时，字符串会被静默截断。插入成功，没有警告，也没有`DataTruncation`引发异常，而编码的字符串被截断为 16 个八位字节。

我怎样才能检测到字符串截断？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:38:41.897

Adaptive Server 将条目截断为指定的列长度，不会发出警告或错误，除非您设置`string_rtruncation on`. 请参阅参考手册：命令。

MSSQL 总是检测字符串的截断并且选项 STRING_RTRUNCATION 不存在。这是 jTDS SAfeTest.testDataTruncException() 的摘录

```
Statement stmt = con.createStatement();
if (!con.getMetaData().getDatabaseProductName().toLowerCase().startsWith("microsoft")) {
    // By default Sybase will silently truncate strings,
    // set an option to ensure that an exception is thrown.
     stmt.execute("SET STRING_RTRUNCATION ON");
} 
```

# javascript - 需要更改 wordpress 的字体选项

> ID：13912435
> 
> 赞同：1
> 
> 时间：2012-12-17T10:33:52.970
> 
> 标签：javascript, wordpress, fonts, tinymce

我需要更改 wordpress 中 tinymce 编辑器的默认下拉列表选项以包含 11pt

默认值为 8,10,12,14 我需要将 11 放入此列表中，并确保有效。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T10:52:35.977

在你的文件中这样使用

tinyMCE.init({ ... theme_advanced_font_sizes : "10px,12px,14px,16px,24px" });

因此，您可以通过这种方式在运行文件中更改字体大小选项。

# perl - 在包含它的第一个未注释行中编辑模式的第一次出现

> ID：13912437
> 
> 赞同：2
> 
> 时间：2012-12-17T10:33:58.613
> 
> 标签：perl, shell

我正在尝试编辑仅包含模式的第一个未注释行。由于有几个注释和未注释的类似行，我无法仅编辑它的第一次出现

原来的：

```
#/app2/rsync_root:IP1:IP2:IP3:IP4
/app2/rsync_root:IP1:IP2:IP3:IP4
/app2/rsync_root:IP1:IP2:IP3:IP4 
```

编辑后的预期结果：

```
#/app2/rsync_root:IP1:IP2:IP3:IP4
/app2/rsync_root:ipaddr1:ipaddr2:ipaddr3:ipaddr4
/app2/rsync_root:IP1:IP2:IP3:IP4 
```

怎么了：

```
#/app2/rsync_root:IP1:IP2:IP3:IP4
/app2/rsync_root:ipaddr1:ipaddr2:ipaddr3:ipaddr4
/app2/rsync_root:ipaddr1:ipaddr2:ipaddr3:ipaddr4 
```

我可以使用 LHS 中的第一个冒号作为分隔符，因为后面的字段可以是任何内容。

现在我正在使用这个命令：

```
sed -ie '/^#/!s/:.*/:$ipaddr1:$ipaddr2:$ipaddr2:$ipaddr1/' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T10:41:53.087

```
perl -pe'/^#/ or s/:\K.*/.../ .. 0' 
```

或者

```
perl -pe's/^(?!#)[^:]*:\K.*/.../ .. 0' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T12:57:12.067

由于您使用的是非标准 sed （`-i`是非标准的），您可以简单地`q`在现有解决方案中添加一个标志：

```
sed -ie '/^#/!s/:.*/:$ipaddr1:$ipaddr2:$ipaddr2:$ipaddr1/q' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T12:59:03.013

```
repl="ipaddr1:ipaddr2:ipaddr3:ipaddr4"
awk -v r="$repl" 'found==0 && !/^#/ {sub(/:.*/, ":" r); found=1} 1' file > new &&
mv new file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T13:06:13.520

朴素的旧`ed`

```
ed file << END
/^[^#]/s/:.*/:$ipaddr1:$ipaddr2:$ipaddr2:$ipaddr1/
w
q
END 
```

# java - java中的客户端代码是什么

> ID：13912438
> 
> 赞同：6
> 
> 时间：2012-12-17T10:34:00.343
> 
> 标签：java, android, client

我有一个简单的问题。当然，在我在这里问之前，我问了谷歌，但不幸的是我没有得到我想要的答案。

我只想知道简单的问题。**java（android）中的客户端代码是什么？** 当我问谷歌时，它给了我关于客户端/网络服务器的结果。我认为在这种情况下，客户端是在我/您的计算机上运行的程序，而网络是与客户端通信的服务器？

我想知道Java中的客户端代码是什么？就像在这种情况下：（从android开发者网站复制）

*系统可以运行服务有两个原因。如果有人调用 Context.startService() ，那么系统将检索服务（创建它并在需要时调用其 onCreate() 方法），然后**使用客户端提供的参数调用其 onStartCommand(Intent, int, int) 方法。***

在这种情况下，客户端代码是像活动代码..还是？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-17T10:46:00.280

在这种情况下，*客户*端是指*API 的*客户端，它只是给定方法的调用者或给定类的用户。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T10:51:41.513

如果活动 A 调用`onStartCommand(Intent, int, int)`活动 B，则活动 A 是客户端。在这种情况下，它仅表示方法和/或服务的调用者。

在查看 Web 服务时，检索请求的“服务器”称为服务器。调用 Web 服务的“客户端”是客户端。当“服务器”调用另一台服务器时，该服务器调用另一台服务器也可以视为客户端。

客户也可以被视为客户。[维基](http://en.wikipedia.org/wiki/Customer)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T10:43:16.613

客户端代码？

你想要什么样的客户端代码？

基于 Web 的客户端代码？

应用程序客户端代码？

或者只是一个客户代码？

客户 - 为某事请求某事的事物。

某事（任何服务，任何信息，任何内容或任何答案或答案）

# plone - 如何在 Plone 中将图像的标题设为斜体

> ID：13912440
> 
> 赞同：-5
> 
> 时间：2012-12-17T10:34:17.107
> 
> 标签：plone

如何在python中使图像的标题变为斜体

当我在标题字段中输入标题时，我希望自动以斜体形式显示标题

我的代码是：-

```
 atapi.TextField('image_caption_text',
              storage = atapi.AnnotationStorage(),
              widget = atapi.RichWidget(
                        description = '',
                        label = _(u'label_image_caption', 
                            default=u'Image Caption'),
                        rows = 5),
              schemata='General',
    ), 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T10:54:02.207

由于标题稍后呈现为 ​​HTML：使用 CSS 设置图像标题的样式。

# html - 如何在黑莓中实现缓存？

> ID：13912442
> 
> 赞同：0
> 
> 时间：2012-12-17T10:34:22.543
> 
> 标签：html, caching, blackberry, browserfield

真的可以在 Blackberry 中缓存 html 页面吗？

我在 Blackberry 应用程序内的 BrowserField 中显示网页。我想缓存用户查看过的页面，以便下次用户尝试打开同一页面时，它应该从缓存中加载，而不是从互联网加载。

我读到我们可以为此目的使用**RequestListener类；**但我不确定如何实现这一点。

得到了这个 -[如何在 Blackberry BrowserField 中缓存](https://stackoverflow.com/questions/7687200/how-to-cache-in-a-blackberry-browserfield?rq=1)现在尝试这个.....

任何人都可以在这方面提供更多帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-20T14:21:03.510

本页详细介绍了如何在 BrowserField 中实现缓存

[http://supportforums.blackberry.com/t5/Java-Development/How-to-Implement-a-Web-Cache-for-Your-BrowserField2-Application/ta-p/817911](http://supportforums.blackberry.com/t5/Java-Development/How-to-Implement-a-Web-Cache-for-Your-BrowserField2-Application/ta-p/817911)

# android - 使用钛开发 iPhone 应用程序

> ID：13912443
> 
> 赞同：-2
> 
> 时间：2012-12-17T10:34:35.163
> 
> 标签：android, iphone, cordova, titanium-mobile

我想做一个应用程序来在线发送消息，显示消息，并在接收消息时向用户显示通知。它必须适用于所有移动平台，如 ıphone、android.. 我搜索并找到了 Phonegap 和 Titanium，然后我开始使用 Titanium。但我不清楚如何使用钛开发 IOS 应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T10:48:55.067

是的，因为 Iphone 模拟器不能在 Windows 上运行，所以无论你使用什么框架，你都必须使用 MAC 机器来构建 ios 应用程序。钛或电话间隙

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T11:42:53.373

您需要 iOS sdk 来在 iOS 模拟器中运行您的应用程序，还需要它来创建 IPA 以便在设备上安装它。

您不能在 Windows 机器上创建 IPA，您需要在安装了 iOS 的 MAC 机器上创建并运行 iOS 应用程序。（还需要 android sdk 才能在 android 模拟器上运行它）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T11:44:00.327

我的经验表明，您应该使用 Titanium 来解决性能问题。PhoneGap 的目的是允许基于 HTML 的 Web 应用程序作为本机应用程序进行部署和安装。PhoneGap Web 应用程序封装在原生应用程序外壳中，并且可以通过原生应用程序商店为多个平台安装。此外，PhoneGap 努力提供一个通用的原生 API 集，这些 API 集通常对 Web 应用程序不可用，例如基本的摄像头访问、设备联系人和尚未在浏览器中公开的传感器。

Titanium Mobile 的目标是为移动开发提供一个高级的、跨平台的 JavaScript 运行时和 API（今天我们支持 iOS、Android 和浏览器，即将分别推出 BlackBerry 10 和 Windows Phone）。Titanium 实际上与 MacRuby/Hot Cocoa、PHP 或 node.js 的共同点比与 PhoneGap、Adobe AIR、Corona 或 Rhomobile 的共同点要多。

现在实现钛，你必须下载钛工作室，在这里你可以找到最新的api来了解钛是如何工作的

[http://docs.appcelerator.com/titanium/2.1/#!/api/Titanium.API](http://docs.appcelerator.com/titanium/2.1/#!/api/Titanium.API)

# batch-file - 批处理：从文件中读取字符串，写入另一个文件

> ID：13912445
> 
> 赞同：2
> 
> 时间：2012-12-17T10:34:47.677
> 
> 标签：batch-file

我正在尝试创建一个批处理文件，它将读取和替换另一个文件中指定的文本行/字符串。

例子：

我有一个文件位于`\\company.local\netlogon\data.txt`包含以下内容：

```
JohnDoe=157 JoeSmith=104 JoeBloggs=514 
```

我想在等号之后读取那些字符串，所以基本上作为一个登录脚本，我可以搜索包含 的行`%username%`，然后将等号之后的数字读入一个变量，例如`%number%`.

所以如果`JohnDoe`要登录，它会搜索他的名字并阅读`157`。

然后我希望能够在另一个文件中搜索一个字符串并写入一个特定的字符串，所以它会搜索`Extension=`并在它之后写入`157`。

类似的东西`Extension=%number%`会读入文件作为`Extension=157`.

非常感谢任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:09:54.310

不确定您是如何格式化文件的，但是如果您将每个条目都作为新行，这将起作用。

```
set extlist=P:\ath\to\extensionlist.txt
set userdata=P:\ath\to\directory\%username%.txt

for /f "tokens=1,2 delims==" %%a in (%extlist%) do if /I %%a.==%username%. set ext=%%b

ren %userdata% %username%.txt.bak
for /f "tokens=1,2 delims==" %%a in (%userdata%.bak) do if /I %%a.==Extension. (echo Extension^=^%ext%>>%userdata%) else (echo %%a^=^%%b>>%userdata%)
del /Q %userdata%.bak 
```

# java - 建模“特定产品”数据库

> ID：13912448
> 
> 赞同：2
> 
> 时间：2012-12-17T10:34:59.103
> 
> 标签：java, hibernate, jpa, orm, rdbms

一般来说，我是 Hibernate 和 ORM 的新手。

我有一个*Product实体，它包含**描述、价格、条形码*和其他产品通用属性等属性。

现在我想管理其他特定于产品的数据，例如，我可以想象一个*Sunglasses*实体，其中包含有关镜片、尺寸 .... 的信息，以及一个*Watch*实体，其中包含与形状、电池使用时间等相关的其他详细信息。

哪个策略更好？在“非 ORM”世界中，我会拥有：

*   两张表：手表和太阳镜，有重复的字段

*   一个表：具有手表和眼镜的所有属性的“产品”和一个字段“kindOfProduct”

如何在 Hibernate/JPA 上建模？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T10:41:03.367

如何让它更通用并拥有一个产品类别，每个产品都可以有一个“产品功能”列表。

这可以通过多对多关系映射，并允许您根据需要添加尽可能多的不同类型的产品和功能。

每个产品仍然可以具有产品类型字段，以便您知道您正在处理的产品类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T11:09:59.447

您主要有三种继承策略可供选择。您在问题中提到的两个，加上一个混合的，它将公共属性存储到基表中，并将特定属性存储到专用表中。

但是只有这些信息，很难给出建议，因为每个策略可以完成的事情都有规则和限制。我建议首先阅读有关此主题的 Hibernate 文档并自己进行试验：

[http://docs.jboss.org/hibernate/stable/orm/manual/en-US/html_single/#d0e7071](http://docs.jboss.org/hibernate/stable/orm/manual/en-US/html_single/#d0e7071)

# java - 从 BufferedWriter 实例获取文件绝对路径

> ID：13912449
> 
> 赞同：0
> 
> 时间：2012-12-17T10:35:00.860
> 
> 标签：java

有什么办法可以得到绝对路径`BufferedWriter`吗？从[规范](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedWriter.html)来看，这似乎是不可能的，但我只是在问，以防万一有人知道某种技巧......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T10:39:03.113

AFAIK，你可以在 Unix 中得到的最接近的是，

*   使用反射来查找文件描述符。
*   检查`/proc/self/fd/{fid}`以获取文件的 inode，并可能通过设备来确定您正在访问的文件。
*   搜索设备以查找链接到该文件的文件名。

# jquery - 从文本输入字段中删除内容

> ID：13912451
> 
> 赞同：0
> 
> 时间：2012-12-17T10:35:08.987
> 
> 标签：jquery, html, css

这是我开始的代码。问题是，在用户从文本输入中集中注意力后，我想重置文本输入。我的意思是用户输入该字段的内容，我想删除它。

```
$(function(){
        var field = $('#searchField');
        field.focusin(function(){
            console.log('element is focused.'); 
            field.animate({width: '100px'});
        });

        field.focusout(function(){
            console.log('element is not focused.');
            field.animate({width: '50px'});
            field.value = ''; // this is not working.
        });
    }); 
```

html代码：

```
<p><input id="searchField" type="text" width="50px"/></p> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T10:36:27.503

您正在尝试将`value`javascript`DOM`对象的属性与 jQuery 对象一起使用。您需要使用 jQuery **[val()](http://api.jquery.com/val/)**来获取 jQuery 对象的值或将 jQuery 对象转换为 DOM 对象才能使用`value`。

```
field.value = '' 
```

至

```
field.val(''); //using jQuery object 
```

或者

```
field[0].value = ''; //using javascript object 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T10:39:23.133

试试这个...

```
field.val(''); 
```

代替

```
field.value = '' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T11:03:51.300

这很简单 ：

```
$(function(){
    var field = $('#searchField');
    field.focusin(function(){
        console.log('element is focused.'); 
        $(this).animate({width: '100px'});
    });

    field.focusout(function(){
        console.log('element is not focused.');
        $(this).animate({width: '50px'});
        $(this).val(''); // This should work
    });
}); 
```

# python - TypeError：不支持初始化参数错误django celery

> ID：13912453
> 
> 赞同：0
> 
> 时间：2012-12-17T10:35:15.383
> 
> 标签：python, django, celery, django-haystack

我从 django-celery 收到了一个错误，这让我在一天中的大部分时间里完全被难住了。

IM 使用 django-haystack 并有一个 celery 任务，只要作为搜索索引一部分的模型更新，就会运行该任务。我有一个连接到模型 post_save 和 post_delete 信号的自定义 QueuedSearchIndex 类。这适用于一个模型，但不适用于另一个模型，即来自 django.contrib.auth 的用户模型

创建/更新用户模型时，celery 会出现以下错误。

```
Problem installing fixture '/believein/data/www/platform/believein/fixtures/user.json': Traceback (most recent call last):
  File "/believein/data/python-virtualenvs/believein-platform/local/lib/python2.7/site-packages/django/core/management/commands/loaddata.py", line 196, in handle    obj.save(using=using)
  File "/believein/data/python-virtualenvs/believein-platform/local/lib/python2.7/site-packages/django/core/serializers/base.py", line 165, in save    models.Model.save_base(self.object, using=using, raw=True)
  File "/believein/data/python-virtualenvs/believein-platform/local/lib/python2.7/site-packages/django/db/models/base.py", line 565, in save_base
    created=(not record_exists), raw=raw, using=using)
  File "/believein/data/python-virtualenvs/believein-platform/local/lib/python2.7/site-packages/django/dispatch/dispatcher.py", line 172, in send
    response = receiver(signal=self, sender=sender, **named)
  File "/believein/data/www/platform/main/utils/search.py", line 156, in update_object
    update_search_index.delay(self, instance, self.backend)
  File "/believein/data/python-virtualenvs/believein-platform/local/lib/python2.7/site-packages/celery/app/task.py", line 343, in delay
    return self.apply_async(args, kwargs)
  File "/believein/data/python-virtualenvs/believein-platform/local/lib/python2.7/site-packages/celery/app/task.py", line 469, in apply_async
    **options)
  File "/believein/data/python-virtualenvs/believein-platform/local/lib/python2.7/site-packages/celery/app/amqp.py", line 214, in publish_task
    **kwargs)
  File "/believein/data/python-virtualenvs/believein-platform/local/lib/python2.7/site-packages/kombu/messaging.py", line 150, in publish
    compression, headers)
  File "/believein/data/python-virtualenvs/believein-platform/local/lib/python2.7/site-packages/kombu/messaging.py", line 201, in _prepare
    body) = encode(body, serializer=serializer)
  File "/believein/data/python-virtualenvs/believein-platform/local/lib/python2.7/site-packages/kombu/serialization.py", line 153, in encode
    payload = encoder(data)
  File "/believein/data/python-virtualenvs/believein-platform/lib/python2.7/copy_reg.py", line 71, in _reduce_ex
    state = base(self)
TypeError: Initialization arguments are not supported 
```

正如你所看到的，这个例子是在加载夹具时提出的，但在正常编辑模型时是一样的。用户的新实例和已存在的更新实例都是这种情况。我的任务如下所示

```
@task                                                                                                                                                                                                           
def update_search_index(index, instance, backend):                                                                                                                                                              
"""task to update the solr index when a model is updated                                                                                                                                                    

:param index: instance of the ``SearchIndex``                                                                                                                                                               
:param instance: the model that was updated                                                                                                                                                                 
:type instance: ``django.db.models.Model``                                                                                                                                                                  
:param backend: the search back instance                                                                                                                                                                    
:type backend: ``haystack.backends.solr_backend``                                                                                                                                                           

see ``main.utils.search.QueuedSearchIndex`` for more info                                                                                                                                                   

"""                                                                                                                                                                                                         

backend.update(index, [instance]) 
```

searchindex 类如下所示

```
class QueuedSearchIndex(RealTimeSearchIndex):                                                                                                                                                                   

def update_object(self, instance, **kwargs):                                                                                                                                                                
    """Handles updating the index when a model is updated by pushing                                                                                                                                        
    the update through celery                                                                                                                                                                               

    :param instance: the instance of the model that was updated                                                                                                                                             
    :type instance: django.db.models.Model                                                                                                                                                                  

    """                                                                                                                                                                                                     
    if self.should_update(instance, **kwargs):                                                                                                                                                              
        update_search_index.delay(self, instance, self.backend) 
```

值得一提的是，User 模型与 UserProfile 模型具有 One2One 关系，该模型在 User 模型上具有 post_save 信号，以在已经存在一个剂量的情况下创建 UserProfile 实例。

# php - 如何使用我们的刷新页面、单击按钮、更改等显示 mysql 数据

> ID：13912454
> 
> 赞同：-2
> 
> 时间：2012-12-17T10:35:20.210
> 
> 标签：php, ajax, jquery

我想在没有刷新页面、单击按钮、更改等的情况下显示我的 mysql 数据。如果有人从任何地方在 mysql 上提交数据，那么我可以看到他/她提交的数据没有刷新、更改、单击。数据自动来自我。我知道 jquery、ajax、php，但我没有找到解决这个问题的任何方法。如果您有任何想法，请与我分享。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T10:41:52.103

为此，您需要使用 JavaScript 函数 setinterval(function(){}, time in millisecond) 设置计时器。将时间设置为 5000 5 秒或根据需要设置，以便代码每 5 秒运行一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T10:40:47.690

制作一个 PHP 文件

例子.php

```
// connect sql && make query

$dataArray = array();
// After you connected and prepared the query show it
while($fetch = mysql_fetch_array($query) {
    $dataArray[] = $fetch;
}

// Put data in a json object for JS
$dataArray = json_encode($dataArray);

// Echo it
echo $dataArray; 
```

并使用 jQuery 或任何其他 js lib 调用它。

```
$(this).get('example.php'), function(data) {
    alert(data); // You'll see the json object in here <<
    // Then do magic stuff with it.
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T10:43:41.090

所以你知道 jQuery、AJAX 和 PHP，但你不知道如何更改数据？至少尝试有创意...

首先，您需要一个获取数据库数据的 PHP 页面。

```
header('Content-Type: application/json');

require 'config.php';

$json = array(
    'data'  => array()
);

$result = mysql_query('SELECT * FROM `my_table`');

while($row = mysql_fetch_assoc($result)) {
    array_push($json['data'], $row);
}

echo json_encode($json); 
```

您可能会注意到，我喜欢将数据作为 JSON 传输 - 因此使用`header()`and`json_encode()`调用。

如果您转到该页面，您将看到来自数据库的结果。现在您可以使用 jQuery AJAX 调用该文件。如果使用间隔，则可以每 x 秒获取一次新数据。

```
setInterval(fetchData, 10000); // get data every 10 seconds

function fetchData() {
    $.getJSON('myfile.php', function(data, textStatus, xhr) {
        $.each(data.data, function(index, value) {
            // do something with every row

            console.log(value.id, value.content, value.date);
        });
    });
} 
```

瞧！

* * *

我可以就程序员*的*创造力进行大量讨论。这正是我的观点。了解一门语言并不能使您成为一名优秀的开发人员。如果它对您有帮助，请拿一张纸并制作流程图或其他东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T10:57:37.843

您可以使用 Reverse Ajax 或 javascript 函数 setinterval ，如果数据自动出现，最好的选择是使用 Reverse Ajax

# jquery - SCRIPT16389：未指定的错误。jquery.min.js，第 2 行字符 91826

> ID：13912461
> 
> 赞同：14
> 
> 时间：2012-12-17T10:35:45.227
> 
> 标签：jquery, internet-explorer

另一个 Internet Explorer Javascript 错误。我也无法调试，因为 Internet Explorer 的调试工具甚至比 Eclipse 还要慢，这是一项了不起的成就……任何人都可以看到导致 SCRIPT16389：未指定错误的原因。jquery.min.js，第 2 行字符 91826 错误？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-17T10:51:48.190

你说你正在使用这个代码：

```
 $(document).ready(function() 
  { $.ajax({type: "GET", url: "\/slider.php", }).done(
       function( html ) { 
        $("#jui").html(html); 
        if ($("#vpo").html().length == 0) activateSlider();
  }); 
```

从 URL 中删除反斜杠。我不*完全*确定为什么这会导致错误，但 IE 传统上处理 URL 中的反斜杠与其他浏览器不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-13T23:59:03.247

这是一个非常古老的问题，但我想我会提出另一个解决方案。YMMV，但我有一个导致同样问题的旧插件。卸载后，问题解决了。

# iphone - 在 iphone App 中使用 xml Web 服务创建注册和登录表单

> ID：13912463
> 
> 赞同：0
> 
> 时间：2012-12-17T10:35:54.777
> 
> 标签：iphone, ios, xcode

> **可能重复：**
> [如何创建与 xml 网络服务连接的注册表单？](https://stackoverflow.com/questions/13872698/how-can-i-create-a-registeration-form-connected-with-an-xml-webservice)

我必须创建一个与 Web 服务相关的注册和登录表单。如何将注册详细信息发送到 Web 服务？以及如何使用网络服务中的用户名和密码登录？帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T10:40:27.207

对于注册表：

您必须进行简单的 XML 解析，在其中您将执行您的链接并传递用户在注册期间将填写的数据，然后您必须通过 XML 解析将该数据发送到 Web 服务

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T10:42:48.267

[首先在这里](http://davidwalsh.name/web-service-php-mysql-xml-json)学习Web Service的基础知识

本文将使您很好地理解如何在您的 iPhone 应用程序中与 XML Web 服务进行通信，并且这些示例将为在您自己的项目中使用其他 Web 服务提供坚实的基础。

[http://www.allappsdevelopers.com/TopicDetail.aspx?TopicID=97963e2d-37a5-4e48-b434-3fced80d2b55](http://www.allappsdevelopers.com/TopicDetail.aspx?TopicID=97963e2d-37a5-4e48-b434-3fced80d2b55)

例子：

```
-(UITextField*) customTextfield:(NSString*)fieldType textName:(NSString*)str initFrame:(CGRect)frame
{
        UITextField *customField = [[UITextField alloc] initWithFrame:frame];
    customField.delegate = self;
    customField.adjustsFontSizeToFitWidth = NO;
    customField.borderStyle = UITextBorderStyleRoundedRect;
        customField.textColor = [UIColor blackColor];
    customField.clearButtonMode = UITextFieldViewModeWhileEditing;
    customField.clearsOnBeginEditing = NO;
    customField.autocapitalizationType = UITextAutocapitalizationTypeNone;
    customField.autocorrectionType = UITextAutocorrectionTypeNo;
    customField.enablesReturnKeyAutomatically = YES;
    customField.returnKeyType = UIReturnKeyDefault;
    customField.placeholder = NSLocalizedString(str, nil);
    customField.keyboardType = UIKeyboardTypeDefault;
    return customField;
}

 - (void)viewDidLoad
    { 

        txtfname = [self customTextfield:@"" textName:@"" initFrame:CGRectMake(120, 75, 160, 30)];
        [self.view addSubview:txtfname];

        txtlastname = [self customTextfield:@"" textName:@"" initFrame:CGRectMake(120, 115, 160, 30)];
        [self.view addSubview:txtlastname];

        txtemail = [self customTextfield:@"" textName:@"" initFrame:CGRectMake(120, 155, 160, 30)];
        [self.view addSubview:txtemail];

        txtpwd = [self customTextfield:@"" textName:@"" initFrame:CGRectMake(120, 195, 160, 30)];
        txtpwd.secureTextEntry=YES;
        [self.view addSubview:txtpwd];

        txtRePwd= [self customTextfield:@"" textName:@"" initFrame:CGRectMake(120, 235, 160, 30)];
        txtRePwd.secureTextEntry=YES;
        [self.view addSubview:txtRePwd];
    } 
```

**提交表格**

```
-(void) fieldValidate
{
    NSString *emailRegEx =@"[A-Z0-9a-z._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,4}";
    NSPredicate *regExpred =[NSPredicate predicateWithFormat:@"SELF MATCHES %@", emailRegEx];
    BOOL myStringCheck = [regExpred evaluateWithObject:txtemail.text];

    if ([txtfname.text length]==0) {
        [self callAlert:@"Please Enter First Name"];
        [txtfname becomeFirstResponder];
        return;
    }
    else if ([txtlastname.text length]==0) {
        [self callAlert:@"Please Enter Last Name"];
        [txtlastname becomeFirstResponder];
        return;

    }
    else if(!myStringCheck){
        [self callAlert:@"Email address should be in yourname@domainname.com  format"];  
        [txtemail becomeFirstResponder];
        return;
    }
    else if ([txtpwd.text length]==0) {
        [self callAlert:@"Password should have atleast 1 characters"];
        [txtpwd becomeFirstResponder];
        return;
    }
    else if ([txtRePwd.text length]==0) {
        [self callAlert:@"Password should have atleast 1 characters"]; 
       // [txtRePwd becomeFirstResponder];
        return;
    }
    else if (![txtpwd.text isEqualToString:txtRePwd.text])
    {
        [self callAlert:@"Password And Repassword Mismatched"];
        [txtpwd becomeFirstResponder];
        return;
    }

    [txtfname resignFirstResponder];
    [txtlastname resignFirstResponder];
    [txtemail resignFirstResponder];
    [txtpwd resignFirstResponder];
    [txtRePwd resignFirstResponder];

    NSString *Restrqst = [NSString stringWithFormat:@"<user>\n"
                          "<account_attributes><first_name>%@</first_name></account_attributes>\n"
                          "<lastName>%@</lastName>\n"
                          "<email>%@</email>\n"
                          "<password>%@</password>\n"
                          "<password_confirmation>%@</password_confirmation>\n"
                          "</user>\n",txtfname.text,txtlastname.text,txtemail.text,txtpwd.text];  

    NSURL *RestURL = [NSURL URLWithString:@"www.xxxx.com/signup"];

  ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:RestURL];
    [request setDelegate:self];
    request.shouldPresentCredentialsBeforeChallenge = YES ;
    [request addRequestHeader:@"Content-Type" value:@"application/xml"];
    [request appendPostData:[Restrqst dataUsingEncoding:NSUTF8StringEncoding]];
    [request setRequestMethod:@"POST"];

    [request setDidFinishSelector:@selector(requestDone:)];
    [request setDidFailSelector:@selector(requestWentWrong:)];
    [request startAsynchronous];

   } 
```

# mongodb - 获取第 100 行时遇到延迟

> ID：13912470
> 
> 赞同：3
> 
> 时间：2012-12-17T10:36:23.270
> 
> 标签：mongodb, mongodb-ruby

我正在从集合中获取所有行，并在第 100 行遇到延迟。我知道 find 方法会返回游标，而不是所有数据都预先并且在某些时候需要获取更多数据。但是第 100 行是唯一的延迟。

```
Checking images 99
Checking image 100
*pause*
Checking image 101 
```

然后在没有可见延迟的情况下达到 100 000 张图像。

使用红宝石脚本：

```
require 'mongo'

time_start = Time.now

mongo = Mongo::MongoClient.new("localhost", 27017)

db = mongo["pics"]

images = db["images"]
albums = db["albums"]

orphans = []

images.find().each do |row|
    puts "Checking image #{row['_id']}"
end

# puts orphans
time_end = Time.now
puts "Total time taken: #{time_end - time_start}" 
```

[使用的图像集合 (json)](https://education.10gen.com/static/content-10gen-devs/handouts/images.945a77b733bc.json)

`mongoimport --db pics --collection images file_name`

问题是：

*   一些数据是否与初始光标一起出现？
*   为什么第 100 行的唯一延迟？也许我错过了一些东西，但那时我什至没有看到 IO 读取

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T10:48:05.843

MongoDB 游标的默认“批量大小”是 100 个对象。意味着 MongoDB 在获取下一批之前获取 100 个对象……这就是您看到延迟的原因。所有驱动程序都应该在光标对象上提供一个方法“batch_size()”或类似的方法来设置和检索批量大小。

# windows-phone - WIndows Phone 8 上的侧载应用程序限制

> ID：13912471
> 
> 赞同：0
> 
> 时间：2012-12-17T10:36:24.167
> 
> 标签：windows-phone, windows-phone-8

在 Windows Phone 7 中，开发人员解锁设备上的侧载应用程序限制为最多 10 个。

这个限制在 Windows Phone 8 中仍然存在吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T10:47:32.183

[是的，根据 MSDN](http://msdn.microsoft.com/ru-RU/library/windowsphone/develop/ff769512%28v=vs.105%29.aspx)的说法，它仍然仅限于 10 个应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T13:19:57.343

正如 andrewpey 所写，普通帐户的限制仍然是 10 个应用程序。

还值得注意的是，对于学生帐户（通过 Dreamspark），限制为 3 个侧面加载的应用程序。

# javascript - 在 javascript 中保留数据的页面导航

> ID：13912473
> 
> 赞同：-1
> 
> 时间：2012-12-17T10:36:47.073
> 
> 标签：javascript, html, cordova

我们正在使用 jQuery mobile 制作一个具有近 15 个模块的 phonegap 移动企业应用程序（大量信息捕获和显示）。我们基本上希望从 Page1 导航到 page2 到 page3 并具有返回和下一个功能，然后在 page3 提交。现在，当我从 page1 导航到 page2 到 page3 然后返回时，我希望我的所有数据都保存在控件中，如何实现这一点？我不期待将所有的 div（页面）放在一个页面中，纯粹是因为它变得非常拥挤，尽管我们使用的是单页面实现技术。

当我说要维护的数据时，我的意思是，无论在 page1 中填写什么数据，一旦我在说导航 page2 和 page3 后返回到该页面时，就会保留该数据，即接下来填充 Page1 -> 填充 page2 next-> 填充 page3 -> page2（数据保留）返回-> page1（数据保留）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:05:26.383

如果您的意思是保留页面的状态，并且不想将其保留在 DOM 中。我推荐你[Backbone](http://backbonejs.org)。该框架允许您将元素存储在单独的视图对象中。您可以随意从 DOM 中销毁它，然后将其连同所有“数据”一起放入 :) - 任何时候都可以。

jQuery Mobile 和 Backbone 确实有点冲突。它们在导航机制上重叠，JQM 是基于标记的，Backbone 是程序化的。但是你可以很容易地解决这个问题。我更喜欢使用 Backbone 来完成这种工作。以下是禁用 JQM 导航的方法：

```
$(document).bind("mobileinit", function() {
  $.mobile.ajaxEnabled = false;
  $.mobile.linkBindingEnabled = false;
  $.mobile.hashListeningEnabled = false;
  $.mobile.pushStateEnabled = false;
});

$('div[data-role="page"]').live('pagehide', function(event, ui) {
  return $(event.currentTarget).remove();
}); 
```

这是我从[Christophe Coenraets](http://coenraets.org)那里偷来的：P

其余的，如何使用 Backbone 进行页面导航……，你应该阅读[Backbone Documents](http://backbonejs.org)

您可以将 JQM 用作 UI 框架。Backbone 作为 MV* 框架。如果你还不知道如何使用 Backbone，你应该学习它。值得你花时间:)

# python - Django Forms：列表索引必须是整数，而不是 str

> ID：13912479
> 
> 赞同：0
> 
> 时间：2012-12-17T10:37:08.050
> 
> 标签：python, django, django-forms

任何人都可以帮助解释以下错误及其与以下代码相关的含义吗？

我要做的就是保存一个表格。

错误

```
 TypeError at /member/registration/
    list indices must be integers, not str
/Users/user/Documents/workspace/Hera/member/views.py in registration, line 17

nvironment:

Request Method: POST
Request URL: http://127.0.0.1:8000/member/registration/

Django Version: 1.4.2
Python Version: 2.7.2
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.flatpages',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'grappelli.dashboard',
 'grappelli',
 'django.contrib.admin',
 'django.contrib.admindocs',
 'web',
 'member',
 'rest_framework')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Traceback:
File "/Library/Python/2.7/site-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/Users/user/Documents/workspace/Hera/member/views.py" in registration
  17\.             user = User.objects.create_user(username=form.cleaned_data['username'],email=form.cleaned_data['email'], password=form.changed_data['password'])

Exception Type: TypeError at /member/registration/
Exception Value: list indices must be integers, not str 
```

视图.py

```
def registration(request):
    if request.user.is_authenticated():
        return HttpResponseRedirect('/error')
    if request.method == 'POST':
        form = RegistrationForm(request.POST)
        if form.is_valid():
            user = User.objects.create_user(username=form.cleaned_data['username'],email=form.cleaned_data['email'], password=form.changed_data['password'])
            user.save()
            member = User.get_profile()
            member.name = form.cleaned_data['name']
            member.save()
            return HttpResponseRedirect('/profile')
        else:
            return render_to_response('pageRegistration.html', {'form':form},context_instance=RequestContext(request))

    else: 
        form = RegistrationForm 
        context = {'form':form}
        return render_to_response('pageRegistration.html', context, context_instance=RequestContext(request)) 
```

模型.py

```
class Member (models.Model):
    user =  models.OneToOneField(User)
    name = models.CharField(max_length=100)

    def __unicode__(self):
        return self.name

def createUserCallBacks(sender, instance, **kwargs):
    member, new = Member.objects.get_or_create(user=instance)
post_save.connect(createUserCallBacks, User) 
```

表格.py

```
class RegistrationForm(ModelForm):
    username = forms.CharField(label=(u'User Name'))
    email = forms.EmailField(label=(u'Email'))
    password = forms.CharField(label=(u'Password'), widget=forms.PasswordInput(render_value=False))
    passwordConfirm = forms.CharField(label=(u'Confirm Password'), widget=forms.PasswordInput(render_value=False))

    class Meta:
        model = Member
        # Don't show user drop down.
        exclude = ('user',)

    def clean(self):
        cleaned_data = super(RegistrationForm, self).clean()
        try:        
            password = cleaned_data['password']
            passwordConfirm = cleaned_data['passwordConfirm']
            if password != passwordConfirm:
                raise forms.ValidationError("Password does not match, try again.")
            return cleaned_data
        except:
            raise forms.ValidationError("Password does not match, try again.")

        username = cleaned_data['username']
        try: User.objects.get(username=username)
        except User.DoesNotExist:
            return username
        raise forms.ValidationError("Username already taken, try another.") 
```

**更新了定义清洁**

```
 def clean(self):
        try:   
            cleaned_data = super(RegistrationForm, self).clean() 
            password = cleaned_data.get("password")
            passwordConfirm = cleaned_data.get('passwordConfirm')

            if password != passwordConfirm:
                raise forms.ValidationError("Password does not match, try again.")
            return cleaned_data
        except:
            raise forms.ValidationError("Error") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T10:41:07.080

我希望您已经发布了完整的回溯，那么解决您的问题会容易得多。

但是我想这是因为您在 clean 函数中随机返回了一些东西。你曾经有`return cleaned_data`过，但在那之后你有`return username`。你确实需要从这个函数返回cleaned_data，但你应该*在最后*做，否则你永远不会真正到达第二个验证器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T10:45:14.397

在您的**views.py**的第 17 行中，它说：

```
form = RegistrationForm 
```

相反，它应该是

```
form = RegistrationForm() 
```

您的错误的来源可能有所不同，但我只想提一下。

# jquery - 检测父容器的边缘以改变方向

> ID：13912481
> 
> 赞同：2
> 
> 时间：2012-12-17T10:37:08.277
> 
> 标签：jquery, detection, direction

我无法让它正常工作。它可以很好地检测到顶部和左侧，但我无法让它检测到右边缘，从而应用所需的类。

```
if( wps.o.position.autoChangeDirection && $(this).offset().top - wpsSpotBubble.outerHeight() - wps.o.position.spotBubbleDistance - 120 - $(document).scrollTop() < 0 ){
    $(this).addClass('wps-forcebottom');
    spotBubbleDirection = 'bottom'; 
    }
else if( wps.o.position.autoChangeDirection && $(this).offset().left - wpsSpotBubble.outerWidth() - wps.o.position.spotBubbleDistance - 140 - $(document).scrollLeft() < 0 ){
    $(this).addClass('wps-forceright');
    spotBubbleDirection = 'right';
}
else if( wps.o.position.autoChangeDirection && $(this).width() + $(this).offset().left + wpsSpotBubble.outerWidth() - wps.o.position.spotBubbleDistance + 100 > $(document).scrollLeft() + $(window).width() ){
    $(this).addClass('wps-forceleft');
    spotBubbleDirection = 'left';
} 
```

我尝试了很多搜索，但我对 jQuery 的了解还不足以利用我找到的信息。

任何帮助都会得到帮助！//奥斯卡

# directx - 在d3d9中打开抗锯齿？

> ID：13912482
> 
> 赞同：2
> 
> 时间：2012-12-17T10:37:10.827
> 
> 标签：directx, game-engine, direct3d, multisampling

我正在尝试在我的项目中打开抗锯齿功能。先看d3d9界面：

```
HRESULT CreateRenderTarget(
  [in]           UINT Width,
  [in]           UINT Height,
  [in]           D3DFORMAT Format,
  [in]           D3DMULTISAMPLE_TYPE MultiSample,
  [in]           DWORD MultisampleQuality,
  [in]           BOOL Lockable,
  [out, retval]  IDirect3DSurface9 **ppSurface,
  [in]           HANDLE *pSharedHandle
);

typedef enum D3DMULTISAMPLE_TYPE {
  D3DMULTISAMPLE_NONE           = 0,
  D3DMULTISAMPLE_NONMASKABLE    = 1,
  D3DMULTISAMPLE_2_SAMPLES      = 2,
  D3DMULTISAMPLE_3_SAMPLES      = 3,
  D3DMULTISAMPLE_4_SAMPLES      = 4,
  D3DMULTISAMPLE_5_SAMPLES      = 5,
  D3DMULTISAMPLE_6_SAMPLES      = 6,
  D3DMULTISAMPLE_7_SAMPLES      = 7,
  D3DMULTISAMPLE_8_SAMPLES      = 8,
  D3DMULTISAMPLE_9_SAMPLES      = 9,
  D3DMULTISAMPLE_10_SAMPLES     = 10,
  D3DMULTISAMPLE_11_SAMPLES     = 11,
  D3DMULTISAMPLE_12_SAMPLES     = 12,
  D3DMULTISAMPLE_13_SAMPLES     = 13,
  D3DMULTISAMPLE_14_SAMPLES     = 14,
  D3DMULTISAMPLE_15_SAMPLES     = 15,
  D3DMULTISAMPLE_16_SAMPLES     = 16,
  D3DMULTISAMPLE_FORCE_DWORD    = 0xffffffff 
} D3DMULTISAMPLE_TYPE, *LPD3DMULTISAMPLE_TYPE; 
```

我不确定如何给出参数`MultiSample`和`MultisampleQuality`. `non-maskable multisampling`和有什么区别`maskable`？
2x 抗锯齿映射到什么？
4x 抗锯齿映射到什么？
D3DMULTISAMPLE_2_SAMPLES + 2q == D3DMULTISAMPLE_4_SAMPLES + 1q？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T10:00:05.963

`MultisampleQuality`仅当您采用`D3DMULTISAMPLE_NONMASKABLE`multisampletype ( [doc](http://msdn.microsoft.com/en-us/library/windows/desktop/bb172574%28v=vs.85%29.aspx) ) 时才可用。

`D3DMULTISAMPLE_NONMASKABLE`仅启用抗锯齿支持（这就是您要寻找的），质量由`MultisampleQuality`-Parameter 确定，其中 1 => 2xAA 和 2 => 4xAA。

如果您使用其他类型`D3DMULTISAMPLE_NONMASKABLE`，例如“D3DMULTISAMPLE_2_SAMPLES”，您可以在抗锯齿支持的基础上启用额外的书写掩码，您可以通过渲染状态`D3DRS_MULTISAMPLEMASK`( [doc](http://msdn.microsoft.com/en-us/library/windows/desktop/bb172599%28v=vs.85%29.aspx) ) 设置该掩码。这使您能够渲染到多重采样渲染目标的特定样本集。最后对所有样本进行平均并呈现。我认为此设置不适合您的问题。

# c# - 从 aspx jquery 将值传递给 .ashx 以进行上传

> ID：13912483
> 
> 赞同：0
> 
> 时间：2012-12-17T10:37:18.637
> 
> 标签：c#, uploadify

我需要做的：我正在尝试实现 Uploadify 将视频文件上传到服务器。我能够上传文件并使用处理程序将值保存在数据库中。但我需要将文本框值传递给upload.ashx。以下是我用来传递值的代码：

* * *

```
<script type = "text/javascript">
    $(document).ready(function () {
        $("#<%=FileUpload2.ClientID%>").uploadify({
            'uploader': '../scripts/uploadify.swf',
            'script': '../Upload.ashx',
            'cancelImg': '../images/cancel.png',
            'folder': 'UploadFiles',
            **'scriptData': { 'comment': $("#<%=tbVideoName.ClientID%>").val() },**
            'multi': true
        });

        $("#startUploadLink").click(function () {
            $('#<%=FileUpload2.ClientID%>').uploadifyUpload();
            return false;
        });

        $("#clearQueueLink").click(function () {
            $("#<%=FileUpload2.ClientID%>").uploadifyClearQueue();
            return false;
        });

    }); 
```

## 

下面是我如何获得处理程序的价值：

```
school.videoname = context.Request["comment"]; 
```

但是上面的代码没有给我处理程序文本框中的值。谁能检查我在哪里做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T10:40:27.560

当页面准备好时，您似乎在上传 div （或其他）时设置了评论。您真的想在#startUploadLink 单击处理程序中执行此操作。

我相信你可以做这样的事情：

```
$('#<%=FileUpload2.ClientID%>').uploadify('settings','scriptData',{
    'comment': $("#<%=tbVideoName.ClientID%>").val()
}); 
```

# ruby - 是否有推荐的方法来管理应用程序配置和布线？

> ID：13912484
> 
> 赞同：2
> 
> 时间：2012-12-17T10:37:19.430
> 
> 标签：ruby, configuration, sinatra, ioc-container, sequel

我没有使用 Rails，但我使用的是 Sinatra、Sequel 和一些异步消息传递库。我正在寻找一些关于如何接线的建议。

在 Java 世界中，我的自然选择是 Spring。但我知道 Ruby 是不同的，我一直在阅读[这个关于动态语言中 IoC 的问题](https://stackoverflow.com/questions/2273683/why-are-ioc-containers-unnecessary-with-dynamic-languages)以及[Fabio Kung 的这篇好文章](http://fabiokung.com/2010/05/06/ruby-and-dependency-injection-in-a-dynamic-world/)，这很有意义。

我缺少的是解决方案的实际方面。我正在寻找一种优雅的解决方案，以一种可读、简洁的方式管理我的应用程序级连接，并允许我测试并最终以特定于测试的方式重新连接我的应用程序组件。

有没有关于如何管理应用程序配置的参考？或者我应该看看任何特定的项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:52:50.547

以下是我会考虑用于应用程序配置的一些资源：

[https://github.com/markbates/configatron](https://github.com/markbates/configatron)

[http://railscasts.com/episodes/85-yaml-configuration-file](http://railscasts.com/episodes/85-yaml-configuration-file)

[https://github.com/binarylogic/settingslogic](https://github.com/binarylogic/settingslogic)

# css - 使 ASP.NET 站点与 Blackberry 兼容

> ID：13912488
> 
> 赞同：0
> 
> 时间：2012-12-17T10:37:36.987
> 
> 标签：css, blackberry

我有一个 C# / ASP.NET 中的小网站，其中包含几个查找数据的表单。我需要使它与黑莓兼容，以便现场用户可以掌握数据。我并不是要制作一个适当的专用黑莓应用程序，而是要使当前网站对黑莓友好。任何提示或链接将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:14:01.917

我会看看[这些黑莓文档](http://docs.blackberry.com/en/developers/deliverables/11844/Feature_CSS_512751_11.jsp)，这个页面列出了对黑莓设备的 CSS 支持，以及[这个页面](http://www.blackberry.com/knowledgecenterpublic/livelink.exe?func=ll&objId=8563&objAction=browse&sort=name)。

您将需要在 google 上查找响应式设计作为一个术语，以了解如何使您的网站响应不同的浏览器/操作系统。像 Bootstrap 和 Foundation 这样的框架在构建响应式网站方面做了很多繁重的 css/js/html。

# multithreading - 仅对来自多个线程的 sqlite3 进行只读访问

> ID：13912489
> 
> 赞同：6
> 
> 时间：2012-12-17T10:37:36.770
> 
> 标签：multithreading, sqlite, thread-safety, system.data.sqlite

根据[http://www.sqlite.org/threadsafe.html](http://www.sqlite.org/threadsafe.html)，使用 sqlite 时有三种不同的线程模式：*单线程*、*多线程*和*序列化*。当配置为*序列化*和*多线程*模式时，会使用互斥锁（取决于它们使用的模式或多或少），而在*单线程*模式下则根本不使用互斥锁。

假设数据库将仅用于查询（只读访问），是否可以使用*单线程*模式同时仍从不同线程访问它？还是有需要保护的全球资源？

另外，ADO.NET 的默认适配器[System.Data.Sqlite](http://system.data.sqlite.org/index.html/doc/trunk/www/index.wiki)是否可以同样使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T10:45:23.563

SQLite 库有许多内部数据结构，即使是只读数据库文件（缓存、编译语句、结果集等）也会发生变化，因此您*绝不*能从多个线程访问单线程连接。

ADO.NET 不做任何线程安全保证，[System.Data.SQLite 也不做](http://sqlite.phxsoftware.com/forums/t/56.aspx)。

# c++ - 存储数据的结构和外部二进制文件

> ID：13912491
> 
> 赞同：0
> 
> 时间：2012-12-17T10:37:58.313
> 
> 标签：c++

好吧，所以我有一个[任务](http://pastebin.com/qx1haD9x)，我完全被难住了。到目前为止，我的代码如下

```
#include<iostream>
#include<cstdlib>
#include<fstream>
#include<sstream>

using namespace std;

const int SIZE = 12;

struct Division
{
      char divName[SIZE]; // Division name
      double sales[4]; // Quarterly sales stored as an array
};

int main()
{
       void Intro();
       Division CreateCorporateFile();
       Division DisplayCorporateSales();

       Intro();
       CreateCorporateFile();
       DisplayCorporateSales();

       system("PAUSE");
       return 0;
}

void Intro()
{
     cout<<"This program will prompt you to enter in quarterly sales for "
           "four different\ndivisions of a company.\n\n";
}

Division CreateCorporateFile()
{
     Division div;
     int x = 0;
     //for(int x = 0; x < 4; x++)
 do {
          int quarter = 1;
          cout << "Enter the name of the division: ";
          cin >> div.divName;
          for(int i = 0; i < 4; i++)
          {
              cout << "Enter in the sales for quarter "<< quarter <<": ";
               cin >> div.sales[i];
               if(div.sales[i] > 0)
               {
                    quarter++;
               }
               else
               {
                    cout << "Sales are not allowed to be negative.\n";
               }
          }
          x++;
     } while(x < 4);

     return div;
}

Division DisplayCorporateSales()
{
         Division test;

         Division CreateCorporateFile();

         test = CreateCorporateFile();

         for(int i = 0; i < 4; i++)
         {
             cout << "Here are the quarterly sales for " << test.divName
              << ": ";
             for(int i = 0, quarter = 1; i < 4; ++i, ++quarter)
             {
                  cout << "Quarter "<< quarter << " sales: $"<< test.sales[i]
                   <<"\n";
             }
         }

         return test;

} 
```

我遇到的一个问题是它最终提示 8 个分区（应该只执行 4 次），另一个是它最终只显示第 8 个分区的数据。所以有人知道我哪里出错了吗？因为我没有，而且我已经为此工作了几个小时，所以我可能忽略了明显的细节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T10:44:14.180

您只显示最终数据的原因`Division`是`CreateCorporateFile`只返回一个`Division`实例。每个 do-while 循环都会覆盖前一个循环的内容。

对此的一种解决方案是返回一个数组

```
std::vector<Division> CreateCorporateFile()
{
    std::vector<Division> divArray;
    Division div;
    int x = 0;
    do {
        ...
        divArray.push_back(div);
        x++;
    } while(x < 4);

    return divArray;
}

void DisplayCorporateSales()
{
    std::vector<Division> divisions = CreateCorporateFile();
    for (size_t i=0; i<divisions.size(); i++)
    {
        Division div = divisions[i];
        cout << "Here are the quarterly sales for " << div.divName
        << ": ";
        for(int j = 0, quarter = 1; j < 4; ++j, ++quarter)
        {
            cout << "Quarter "<< quarter << " sales: $"<< div.sales[j]
            <<"\n";
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T10:45:42.013

第一个问题是由于您在 main 内部而不是在其之前在全局范围内声明要使用的函数引起的： void Intro(); 部门 CreateCorporateFile(); Division DisplayCorporateSales();

第二个问题是由于您`i`为每个循环使用了两次变量而引起的。您需要使用不同的变量名称（或仅用`quarter`作循环变量）。

# php - 将一个数组拆分为 3 个不同的数组

> ID：13912494
> 
> 赞同：-1
> 
> 时间：2012-12-17T10:38:03.353
> 
> 标签：php, multidimensional-array, associative-array

我有一个 php 数组。我想将此数组拆分为 2 个数组。请看下面的例子： -

```
$arrayIhave = array (
  'id' => '1',
  'name' => 'ripa',
  'roll' => '10',
  'country' => 'india',
  'state' => 'WB',
  'status' => 'active'
); 
```

我需要将其拆分为以下内容：-

```
$array1 = array(
  'id' => '1',
  'status' => 'active'
);

$array2 = array(
  'name' => 'ripa',
  'roll' => '10'
);

$array3 = array(
  'country' => 'india',
  'state' => 'WB'
); 
```

那么，什么是最好和专业的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T10:46:30.547

我不确定你是怎么弄乱数组的，但你可以简单地用`array_chunk`把它们分成两部分

```
 list($array1,$array2,$array3) = array_chunk($arrayIhave, 2,true); 
```

或者只是使用模板来定义你的元素的位置

```
$template = array(
        array("id"=>null,"name"=>null),
        array("name"=>null,"roll"=>null),
        array("country"=>null,"state"=>null)
        );

$arrayIhave = array (
        'id' => '1',
        'name' => 'ripa',
        'roll' => '10',
        'country' => 'india',
        'state' => 'WB',
        'status' => 'active'
);

foreach ( $template as $var ) {
    $var = array_intersect_key($arrayIhave, $var);
    var_dump($var);
} 
```

输出

```
array (size=2)
  'id' => string '1' (length=1)
  'name' => string 'ripa' (length=4)
array (size=2)
  'name' => string 'ripa' (length=4)
  'roll' => string '10' (length=2)
array (size=2)
  'country' => string 'india' (length=5)
  'state' => string 'WB' (length=2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T10:53:08.053

您可以使用函数的组合`array_intersect_key`和`array_flip`（后一个函数翻转数组中的键和值）：

```
$array1 = array_intersect_key($arrayIhave, array_flip(array('id', 'status')));
$array2 = array_intersect_key($arrayIhave, array_flip(array('name', 'roll')));
$array3 = array_intersect_key($arrayIhave, array_flip(array('country', 'state'))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T10:44:40.143

您可以根据原始数组中的数据创建新数组，使用关联键访问元素：

```
$array1 = array(
  'id' => $arrayIhave['id'],
  'status' => $arrayIhave['active']
);

$array2 = array(
  'name' => $arrayIhave['name'],
  'roll' => $arrayIhave['roll']
);

$array3 = array(
  'country' => $arrayIhave['country'],
  'state' => $arrayIhave['state']
); 
```

# postgresql - 在具有依赖关系的 pl/sql 中执行多个 INSERT

> ID：13912497
> 
> 赞同：0
> 
> 时间：2012-12-17T10:38:22.273
> 
> 标签：postgresql, insert, sequence, plpgsql

我使用 postgresql 数据库。我想在一个表中插入一行，然后在另一个表中插入另一行，该表的外键与一次 pl/sql 执行中的第一个表相关。

问题是，当我尝试插入第二个表行时，数据库假定我插入到第一个表中的行不存在，因为它尚未提交。我该怎么办？

例子：

```
REATE OR REPLACE FUNCTION "roomTypeCreate"(character varying, integer)
  RETURNS refcursor AS
$BODY$
DECLARE
curr refcursor;
counter integer;
ids integer[];
current_id integer;
count integer;
BEGIN
    SELECT COUNT(*) INTO counter FROM "RoomType" WHERE LOWER("type"::character varying) = LOWER($1::character varying);

    IF (counter > 0) THEN
        OPEN curr FOR
            SELECT false AS "Status";
        RETURN curr;
    END IF;

    INSERT INTO "RoomType"("type", "creator", "updater") VALUES ($1, $2, $2);
    SELECT currval('"RoomType_id_seq"') INTO current_id;

    SELECT ARRAY(SELECT id FROM "Rate" WHERE id>0) INTO ids;

    count = 1;

    WHILE ids[count] > 0
    LOOP
        INSERT INTO "RoomTypeRate"("type", "rate", "sun", "mon", "tue", "wed", "thu", "fri", "sat", "creator", "updater") VALUES(current_id, ids[count], 99999999, 99999999, 99999999, 99999999, 99999999, 99999999, 99999999, 0, 0);
        count = count + 1;
    END LOOP;

    OPEN curr FOR
        SELECT true AS "Status";
    RETURN curr;
END
$BODY$
LANGUAGE plpgsql VOLATILE
COST 100; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:24:48.130

尝试替换：

```
INSERT INTO "RoomType"("type", "creator", "updater") VALUES ($1, $2, $2);
SELECT currval('"RoomType_id_seq"') INTO current_id; 
```

经过：

```
INSERT INTO "RoomType"("type", "creator", "updater") VALUES ($1, $2, $2) returning id into current_id; 
```

# model - 向 cakephp 中的多个选择列表框添加验证

> ID：13912498
> 
> 赞同：1
> 
> 时间：2012-12-17T10:38:22.893
> 
> 标签：model

您好，我已经创建了在 helper 中创建表单的函数。这是我的函数。

```
function createAlbumForm1($controller, $actionUrl, $dialogTitle, $dialogId, $bandId ) {
      // echo "hello";
     $songlist=$this->requestAction('/Albums/index');
     //$comma_separated = implode(",", $songlist);
      $options = array( $songlist);
      $selected = array('3');
      $albumlist=$this->requestAction('/Albums/view1');
     //print_r($songlist);
        $uploadForm =
        $this->Form->create($controller, array('action' => $actionUrl
                , 'enctype' => 'multipart/form-data'
                , 'type' => '')) .
            '<fieldset>' .
              $this->Form->input('id',array('label' => 'Albums', 'type' => 'select', 'options' =>$albumlist)).
          $this->Form->input('song_id',array('label' => 'Songs to add',  'options' =>$songlist,'multiple'=>'true','style' =>'width:170px;height:150px;')).

          $this->Form->input('band_id', array('type' => 'hidden', 'value' => $bandId)) .

            $this->Form->input('ADD'
                , array('style' => 'width:80px; float: right;'
                , 'type' => 'submit', 'label' => false)) .
            '</fieldset>' .
            $this->Form->end();
            return $uploadForm;

    } 
```

我以这种方式创建了我的模型

```
class Album extends AppModel {

    var $name = 'Album';

    function beforeValidate($options = array())
     {

       if(!empty($this->data['Album']['song_id']))
       {
            $this->data['Album']['song_id'] = join(',', $this->data['Album']['song_id']);
       }

     }
          var $validate = array(
            'song_id' => array(
            'rule' => array('multiple', array('max' => 3)),
            'message' => 'You have to choose at least one category'
        )
    );

} 
```

你能告诉我如何添加验证，就像用户可以从多个选择列表框中一次选择 3 个项目一样。

# php - 这 2 个 XPath 查询之间的区别

> ID：13912499
> 
> 赞同：2
> 
> 时间：2012-12-17T10:38:24.820
> 
> 标签：php, xml, xpath, xpath-2.0

我不明白为什么我们应该使用 text() 而不是只使用“。” 有什么区别？

```
//library/book/author[text() = "An Author"] 
```

对比

```
//span[@class="whateverclass"][. = "An Author"] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T11:48:41.963

你通常不应该使用 text()。使用 ”。” 组装字符串值，忽略注释和处理指令，而 text() 可以根据注释出现的位置将文本分成几部分。仅当您想一次处理一个混合内容时才使用文本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T10:44:50.477

`.`为您提供当前节点和所有子节点的文本

`text()`只给你当前节点的文本

结论：`text()`如果您想检查节点中的文本，请使用，因为`.`您也会检查所有潜在子节点的文本

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T10:54:02.593

`.`是一个包含单个节点的节点集，即当前上下文节点（`span`您的示例中的元素节点）。this 的字符串值是其所有后代文本节点的串联，所以如果你有

```
<span class="whateverclass">Ann <b>A.</b> Author</span> 
```

这将是字符串`"Ann A. Author"`（不带引号）。

`text()`是一个节点集，包含上下文节点的所有直接子文本节点（两个节点`"Ann "`，`" Author"`在上面的示例中）。*如果任何*`=`节点具有给定的字符串值，则一侧是节点集而另一侧是字符串的比较为真，因此上述示例元素将匹配任何模式*`<span>`*

 *```
span[@class='whateverclass'][. = 'Ann A. Author']
span[@class='whateverclass'][text() = 'Ann ']
span[@class='whateverclass'][text() = ' Author'] 
```

但*不*匹配`[text() = 'Ann A. Author']`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T10:51:24.517

最好用一个示例来说明这种差异，其中一个元素具有一个或多个子元素和多个文本元素（一个元素允许多个文本元素散布在子元素之间）：

```
<element>
  text1
  <child>
     child1text1
  <child>
  text2
</element> 
```

假设`element`是当前的：

*   **`.`**将返回`text1 child1text1 text2`（带空格）
*   **`text()[1]`**将返回`text1`
*   **`text()[2]`**将返回`text2`

特别注意的是`text()`在 xslt 1.0 和 xslt 2.0 中的行为会有所不同

*   **`text()`**仅`text1`在 xslt 1.0 中返回
*   **`text()`**`text1 text2`在 xslt 2.0 中返回（带空格）*

# php - PHP 在 mysql_connect 之后删除会话

> ID：13912500
> 
> 赞同：1
> 
> 时间：2012-12-17T10:38:35.097
> 
> 标签：php, session

```
error_reporting(E_ALL);
session_start();
var_dump($_SESSION['user']);
require 'config/database.php';    
var_dump($_SESSION['user']); 
```

我有问题，因为在包含 databse.php 文件后我失去了会话......

数据库.php

```
$user = "xxx";
$password = "xxx";
$database = "xxx";
$server = '98.x.x.126';

mysql_connect($server, $user, $password);
mysql_select_db($database); 
```

PHP 版本：5.2.17，共享服务器。在我的本地服务器 5.3 和 5.4 上运行良好。

更新：我不会完全丢失会话，只是将用户值更改为数据库名称？

更新2：

```
var_dump($_SESSION['user']);
$user = "denes_lucky";
var_dump($_SESSION['user']);
$password = "123456X3M";
var_dump($_SESSION['user']);
$database = "denes_lucky";
var_dump($_SESSION['user']);
$server = '98.130.0.126';
var_dump($_SESSION['user']);

mysql_connect($server, $user, $password);
var_dump($_SESSION['user']);
mysql_select_db($database);
var_dump($_SESSION['user']); 
```

问题出在 $user = "xxx"; 之后

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T10:44:22.680

关闭`register_globals`您的`php.ini`或`.htaccess`

当它们打开时 - 分配`$user = 'foo';`也修改了`$_SESSION['user']`变量的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T10:44:34.100

问题是您正在运行一个过时的 PHP 版本并`register_Globals` 打开了该设置。`register_globals` 是 PHP 中的一个特性，它使会话和请求变量成为全局变量。这意味着 $_SESSION['user'] 和 $user 引用同一个变量。

最好的解决方案是`register_globals`在你的 php.ini 中打开（甚至更新到没有该功能的最新 PHP 版本）

一种解决方法是重命名这些变量之一。

另见： http: [//php.net/register_globals](http://php.net/register_globals)和[http://php.net/security.globals](http://php.net/security.globals)

# oracle - 在生成的文件末尾使用 owa_util 和 oracle apex 和位置行

> ID：13912502
> 
> 赞同：3
> 
> 时间：2012-12-17T10:38:36.780
> 
> 标签：oracle, plsql, oracle-apex

我正在尝试使用 oracle application express 进程生成 xml 文件。它目前有效，只是在生成的文件末尾添加了一行（'Location: f?p=2...'）。

我用

> owa_util.mime_header('text/xml',FALSE); htp.p('Content-Disposition: 附件；文件名=[...]'); owa_util.http_header_close；

加上 htp.p 调用以生成文件。

有人知道在文件末尾不显示位置行的方法吗，因为在合并位置行时无法解析 xml 文件？

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T01:23:52.710

额外的行可能是由页面上的其他东西（例如显示项）、全局页面（例如页面零）或页面模板中生成的。

您可能需要做的是，在生成所有输出后，告诉 Apex 引擎停止任何进一步的处理。

有两种方法可以做到这一点，具体取决于您使用的 Apex 版本：

*   APEX 4.1 之前

    ```
    apex_application.g_unrecoverable_error:= true; 
    ```

*   APEX 4.1 及以上

    ```
    apex_application.stop_apex_engine; 
    ```

来源：[http ://www.talkapex.com/2011/12/apexapplicationstopapexengine.html](http://www.talkapex.com/2011/12/apexapplicationstopapexengine.html)

# python - 使用 lxml.html 提取文本

> ID：13912503
> 
> 赞同：9
> 
> 时间：2012-12-17T10:38:38.190
> 
> 标签：python, lxml

我有一个 HTML 文件：

```
<html>
    <p>somestr
        <sup>1</sup>
       anotherstr
    </p>
</html> 
```

我想将文本提取为：

somestr ¹另一个

但我不知道该怎么做。我编写了一个`to_sup()`将数字字符串转换为上标的函数，所以我得到的最接近的是：

```
for i in doc.xpath('.//p/text()|.//sup/text()'):
    if i.tag == 'sup':
        print to_sup(i),
    else:
        print i, 
```

但是我`ElementStringResult`似乎没有获取标签名称的方法，所以我有点迷茫。任何想法如何解决它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-05-29T08:48:10.180

第一个解决方案（连接没有分隔符的文本 - 另见[python [lxml] - 清除 html 标签](https://stackoverflow.com/questions/2950131/python-lxml-cleaning-out-html-tags)）：

```
 import lxml.html
   document = lxml.html.document_fromstring(html_string)
   # internally does: etree.XPath("string()")(document)
   print document.text_content() 
```

这对我有帮助 - 以我需要的方式连接：

```
 from lxml import etree
   print "\n".join(etree.XPath("//text()")(document)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T10:43:27.617

只是不要调用XPath`text()`中的`sup`节点。

```
for x in doc.xpath("//p/text()|//sup"):
    try:
        print(to_sup(x.text))
    except AttributeError:
        print(x) 
```

# iphone - Exc_Bad_Access 有时仅在显示警报视图时

> ID：13912505
> 
> 赞同：1
> 
> 时间：2012-12-17T10:38:39.247
> 
> 标签：iphone, objective-c, ios, uialertview

我有许多线程通过 performSeleactoreOnMainThread 方法调用以下函数：

```
-(void) showAlert: (NSString *)message{
if ([NSRunLoop currentRunLoop] != [NSRunLoop mainRunLoop]) {
    NSLog(@"<< perform in main thread>>");
    [self performSelectorOnMainThread:@selector(showAlert:) withObject:message waitUntilDone:NO];
}
UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Info" message:message delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
[alert show];
} 
```

因为，无论如何，这个方法只会在主线程上调用，我没有得到 EXC_BAD_ACCESS 崩溃的原因：[alert show]

而这种崩溃只是偶尔发生。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T10:41:47.530

我猜你忘了添加`return;`你的代码，这样你的 if 下面的代码也会被执行，无论它是否在主循环中。

一个简单的解决方法可能是：

```
-(void) showAlert: (NSString *)message{
    if ([NSRunLoop currentRunLoop] != [NSRunLoop mainRunLoop]) {
        NSLog(@"<< perform in main thread>>");
        [self performSelectorOnMainThread:@selector(showAlert:) withObject:message waitUntilDone:NO];
        return;
    }
    UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Info" message:message delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alert show];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T10:41:29.393

问题是由于 if 条件是 true 还是 false，alertview 显示方法将起作用。改变你的方法，如：

```
-(void) showAlert: (NSString *)message
{
 if ([NSRunLoop currentRunLoop] != [NSRunLoop mainRunLoop])
 {
    NSLog(@"<< perform in main thread>>");
    [self performSelectorOnMainThread:@selector(showAlert:) withObject:message waitUntilDone:NO];
 }
 else
 {
   UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Info" message:message delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
  [alert show];
 }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T10:42:49.640

将 a`return`放在 if 块的末尾：

```
-(void) showAlert: (NSString *)message{
if ([NSRunLoop currentRunLoop] != [NSRunLoop mainRunLoop]) {
    NSLog(@"<< perform in main thread>>");
    [self performSelectorOnMainThread:@selector(showAlert:) withObject:message waitUntilDone:NO];
    return;
}
UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Info" message:message delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
[alert show];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T10:58:09.187

替代为什么你不使用这个：

```
 [alert performSelectorOnMainThread:@selector(show) withObject:nil waitUntilDone:YES]; 
```

代替

```
 [alert show]; 
```

# c++ - 是否允许重新分配 vector::shrink_to_fit？

> ID：13912507
> 
> 赞同：11
> 
> 时间：2012-12-17T10:38:54.867
> 
> 标签：c++, c++11, std

此成员函数在标准中没有定义的效果（仅备注），如果不允许重新分配，则其使用将受到限制。但我在标准中找到的唯一似乎适用的段落是 23.2.1/11：

> “除非另有规定（明确地或通过根据其他函数定义函数），调用容器成员函数或将容器作为参数传递给库函数不应使迭代器无效或更改对象的值容器。”

由于重新分配使迭代器无效，这是否意味着 shrink_to_fit 不能正式重新分配？如果是这样，该功能只能对减少容量不会重新分配的实现产生影响，如果有的话......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-17T11:14:58.233

我同意，意图显然是`shrink_to_fit()`可以重新分配，因此应该允许使迭代器无效。

如果实现`realloc()`为分配器提供了类似 - 的功能，保证在缩小块时不会移动内存，则只有可能满足请求，这不会使迭代器无效。但我不相信这是预期的，正如[最近添加到向量中的要求](http://cplusplus.github.com/LWG/lwg-defects.html#2033)所暗示`T`的那样`MoveInsertable`，因为该要求仅在元素移动到新位置时才相关，这将使迭代器无效。

我认为您应该[提交一个问题](http://cplusplus.github.com/LWG/lwg-active.html#submit_issue)以澄清`shrink_to_fit()`可能使迭代器无效的问题。该问题将适用于`basic_string`和。`deque``vector`

# android - 当用户多次按下按钮时，如何避免多次触发 onClick 事件？

> ID：13912510
> 
> 赞同：5
> 
> 时间：2012-12-17T10:39:02.837
> 
> 标签：android, onclick

在`Android`中，如果用户真的很快地多次按下按钮，则该`onClick`事件会被触发多次......这是有道理的。

如果该`onClick`方法启动一个新的，用户可以多次`Activity`打开同一个，每个实例都将堆积在堆栈的顶部。`Activity``Activity`

我通常禁用`onClick`方法内的按钮（与按钮相关联），并在使用 a `Handler`and几秒钟后再次启用它`postDelay`。

我真的不喜欢以这种方式这样做，所以有没有另一种以更干净的方式解决这个问题的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T10:48:15.023

在活动情况下，您还可以为您的 Intent 传递额外的内容：

```
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
```

或者

```
intent.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT); 
```

避免多次启动。

另一种方法是在管理单击以防止多次单击时使用虚拟布尔值。

**更新示例：**

```
boolean processingClick = false;
Button b = new Button();
b.setOnClickListener(new View.OnClickListener() {
    @Override public void onClick(View v) {
        if (!processingClick) {
            processingClick = true;

            //your code here

            processingClick = false;
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T10:45:54.190

清洁方式：

单击按钮后，如果您要调用的东西是`null`，请调用它，否则不要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-03T15:40:09.980

为 Activity 中的所有按钮创建一个方法：

```
public void enableButtons(boolean doit){
    bXXX.setClickable(doit);
    ...
    ...
} 
```

如果使用“实现 OnClickListener”

```
@Override
public void onClick(View view) {
    enableButtons(false);
    switch (view.getId()) {
        case R.id.xxx:
            doWhatYouWant();
            break;
        ...
        ...
    }
} 
```

OnResume 再次激活您的按钮...

```
@Override
protected void onResume() {
    super.onResume();
    enableButtons(true);
} 
```

# php - 是否有避免在 if 语句中重写长操作数的技术？

> ID：13912513
> 
> 赞同：4
> 
> 时间：2012-12-17T10:39:12.323
> 
> 标签：php

我发现自己经常写 if 语句，如下所示：

```
if(isset($this->request->data['Parent']['child'])){
     $new_var['child'] = $this->request->data['Parent']['child'];
} 
```

我的问题是，如果不在`if`语句之前创建一个新的更短的变量，是否有一个神奇的 php 进程可以帮助避免`$this->request->data['Parent']['child']`在 if 语句的主体中重写？我还想为任何后续开发人员保持代码清洁。

我也不是在寻找三元解决方案。与 jquery 使用`this`. （据我所知）php 不允许匿名函数，或者这不是常见的做法，我也不是说我想要在我的类中使用一堆匿名函数。

**更新** 在 php 7 [中添加 双问号 (??) 运算符在 PHP 中是什么意思](https://stackoverflow.com/questions/53610622/what-does-double-question-mark-operator-mean-in-php)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T10:42:25.333

这将非常酷，但不幸的是，没有什么可以做到。
也许某些 IDE 的一些插件可以帮助你做这样的事情。

在这种情况下，我可以建议的是我个人所做的，无需触摸鼠标移动光标和附近的箭头，`$this`然后按住`CTRL`+`SHIFT`和向右箭头，您将一次选择更多内容。（然后只需使用 ctrl+c 和 ctrl+v 复制粘贴）

当然这适用于所有语言，不仅仅是 PHP

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T10:44:17.693

```
var $a = "" ; 
 function __construct(){ 
   if(isset($this->request->data['Parent']['child'])){
         $this->a = "1";
    }
   } 
```

现在使用

```
if(!empty($this->a)){
// ur code
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T11:13:48.737

您可以在同一条件块中创建一个变量，并在后面使用它

```
if($child = $this->request->data['Parent']['child']){
     $new_var['child'] = $child;
} 
```

这里唯一的区别是如果`$this->request->data['Parent']['child']`设置了但有一个 FALSE 值（或一个空字符串，NULL 或 0），测试将不会通过

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T12:06:25.993

尽管有几种方法可以缩短代码，但我建议不要使用这种技术。原因是这些技术中的大多数使代码变得不太清楚，下一个人也无法理解。

我建议使用具有代码完成功能的良好 IDE，这将有助于键入长名称，同时保持代码清晰，以便下一个人查看。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T12:07:20.207

我不完全确定您*真正*在寻找什么，但是您可以使用自定义对象来存储您的数据，当您尝试访问不存在的键时不会生成通知。

```
class Data {
  function __get($key) {
    return null;
  }
} 
```

这有效，因为`__get`仅在密钥不存在时才调用。

# android - 错误 networkonmainthreadexception null

> ID：13912520
> 
> 赞同：-3
> 
> 时间：2012-12-17T10:40:17.050
> 
> 标签：android, networkonmainthread

我有这段代码，但在我的 Android Emulator 4.2 中出现以下错误：`networkonmainthreadexception null`

我是 Android 新手，这是我的第一个应用程序，我有一个网络视图，需要下载 PDF 并保存在 SD 卡中。

*这是我的代码：*

```
browser.setDownloadListener(new DownloadListener()
        {
            public void onDownloadStart(final String url, String userAgent, String contentDisposition, String mimetype, long contentLength)
            {               
                AlertDialog.Builder builder = new AlertDialog.Builder(WebViewdemoActivity.this);
                builder.setTitle("Descarga");
                builder.setMessage("¿Desea guardar el fichero en su tarjeta SD?");
                builder.setCancelable(false).setPositiveButton("Aceptar", new DialogInterface.OnClickListener()
                {
                    public void onClick(DialogInterface dialog, int id)
                    {
                        descargar(url);
                    }

                }).setNegativeButton("Cancelar", new DialogInterface.OnClickListener()
                {
                    public void onClick(DialogInterface dialog, int id)
                    {
                        dialog.cancel();
                    }
                });
                builder.create().show();                

            }

            private void descargar(final String url)
            {
           String resultado ="";

                //se obtiene el fichero con Apache HttpClient, API recomendada por Google
                HttpClient httpClient = new DefaultHttpClient();
                HttpGet httpGet = new HttpGet(url);
                InputStream inputStream = null;
                try
                {
                    HttpResponse httpResponse = httpClient.execute(httpGet);

                    BufferedHttpEntity bufferedHttpEntity = new BufferedHttpEntity(httpResponse.getEntity());

                    inputStream = bufferedHttpEntity.getContent();

                    //se crea el fichero en el que se almacenará
                    String fileName = android.os.Environment.getExternalStorageDirectory().getAbsolutePath() + "/webviewdemo";
                    File directorio = new File(fileName);
                    File file = new File(directorio, url.substring(url.lastIndexOf("/")));
                    //asegura que el directorio exista
                    directorio.mkdirs();                    

                    FileOutputStream fileOutputStream = new FileOutputStream(file);
                    ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();

                    byte[] buffer = new byte[1024];

                    int len = 0;
                    while (inputStream.available() > 0 && (len = inputStream.read(buffer)) != -1)
                    {
                        byteArrayOutputStream.write(buffer, 0, len);
                    }
                    fileOutputStream.write(byteArrayOutputStream.toByteArray());
                    fileOutputStream.flush();
                    resultado = "guardado en : " + file.getAbsolutePath();
                }
                catch (Exception ex)
                {
                    resultado = ex.getClass().getSimpleName() + " " + ex.getMessage();
                }
                finally
                {
                    if (inputStream != null)
                    {
                        try
                        {
                            inputStream.close();
                        }
                        catch (IOException e)
                        {

                        }
                    }
                }

                AlertDialog.Builder builder = new AlertDialog.Builder(WebViewdemoActivity.this);
                builder.setMessage(resultado).setPositiveButton("Aceptar", null).setTitle("Descarga");
                builder.show();

            }

        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T10:43:15.550

您需要将网络连接的一部分移动到单独的线程，最好使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html) ..

前任：

```
 private class DownloadFilesTask extends AsyncTask<URL, Integer, Long> {
 protected Long doInBackground(URL... urls) {
     int count = urls.length;
     long totalSize = 0;
     for (int i = 0; i < count; i++) {
         totalSize += Downloader.downloadFile(urls[i]);
         publishProgress((int) ((i / (float) count) * 100));
         // Escape early if cancel() is called
         if (isCancelled()) break;
     }
     return totalSize;
 }

 protected void onProgressUpdate(Integer... progress) {
     setProgressPercent(progress[0]);
 }

 protected void onPostExecute(Long result) {
     showDialog("Downloaded " + result + " bytes");
 } 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T10:42:51.963

您需要在辅助线程上执行网络操作，要么创建一个新线程，要么使用更合适的方法：AsyncTask。 [http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

这将在另一个线程上执行操作，而不是锁定主/UI 线程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T10:44:34.270

来自官方文档：

> 只有针对 Honeycomb SDK 或更高版本的应用程序才会抛出此 (NetworkOnMainThreadException)。允许以早期 SDK 版本为目标的应用程序在其主事件循环线程上进行网络连接，但非常不鼓励这样做。

链接：http: [//developer.android.com/reference/android/os/NetworkOnMainThreadException.html](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T10:46:18.483

您正在尝试在 Android 4.0 不支持的主线程上连接互联网。您应该在 AysnchTask 中连接到互联网。有关更多详细信息，您可以从以下教程中获得帮助。

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

[http://androidresearch.wordpress.com/2012/03/17/understanding-asynctask-once-and-forever/](http://androidresearch.wordpress.com/2012/03/17/understanding-asynctask-once-and-forever/)

我相信你会从中得到一些东西。试试看。！

# c++ - Boost::serialization - 如何序列化需要数据分配但没有默认构造函数的数据结构？

> ID：13912522
> 
> 赞同：4
> 
> 时间：2012-12-17T10:40:19.870
> 
> 标签：c++, boost

正如在问题标题中一样 - 我需要序列化指向每个其他的复杂数据结构网络，并由可能没有默认构造函数的类表示。这些类通常有一个指针向量或对向量。

我认为简单地分配 sizeof(SomeClass) 的内存，然后用序列化例程填充它是有意义的，但这不知何故会导致与字符串相关的未初始化内存问题 (resize() 失败，可能是未初始化的字符串对象不愿意工作）。示例代码如下所示：

```
friend class boost::serialization::access;

template<class Archive> void save(Archive & ar, const unsigned int version) const
{
        int n;
        ar & vec.size();
        for(int i=0; i<n; i++)
        {
                ar & vec[i];
        }
}

template<class Archive> void load(Archive & ar, const unsigned int version) const
{
        int n;
        ar & n;
        for(int i=0; i<n; i++)
        {
                SomeClass* obj = (SomeClass*)::operator new(sizeof(SomeClass));
                ar & *obj;
                vec.push_back(*obj);
        }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T09:40:16.773

boost::serialization 文档的以下部分对此进行了介绍：

[boost::serialization - 非默认构造函数](http://www.boost.org/doc/libs/1_52_0/libs/serialization/doc/serialization.html#constructors)

基本上你需要编写自己的版本`load_construct_data`和`save_construct_data`

# php - pylibmc 存储的数据无法在 php memcached 中解压

> ID：13912530
> 
> 赞同：1
> 
> 时间：2012-12-17T10:40:55.253
> 
> 标签：php, python, memcached, zlib, libmemcached

我们有一个应用程序，我们使用 python 在 memcached 中存储大量数据。我们在 python 中使用 pylibmc，在 php 端，我们使用 php-memcached 库。作为总结

*   pylibmc v.1.2.3
*   php-memcached v.2.0.1
*   libmemcached v1.0.8。

除了压缩发挥作用外，其他一切都很好。这就是python中数据压缩的方式

```
import pylibmc

mem = pylibmc.Client(['10.90.15.104:11211'], binary=True)
mem.set('foo','this is a rather long string. this is a rather '+
'long string. this is a rather long string. this is a rather' + 
'long string. this is a rather long string', 0, 10) 
```

检查 telnet 我们看到一些乱码值，这意味着它被压缩了。现在在 php.ini 中阅读它。

```
$memd = new Memcached();
$memd->addServer('10.90.15.104', 11211);
echo $memd->get('foo'); 
```

当上面运行时，我们得到相同的乱码值，这意味着它没有被解压缩。pylibmc 使用的是 zlib，因此我也将 php 的压缩类型更改为 zlib。还需要做哪些设置？请帮忙。

为了进一步参考，这里是在 python pylibmc 中设置字符串后 memcached 的输出

```
get foo
VALUE foo 8 40
x+��,V�D��Ē��"����t�⒢̼t=���g\5#
END 
```

这是使用 PHP 的 memcached 客户端存储的字符串的 memcached 输出：

```
get foo
VALUE foo 48 44
�x�+��,V�D��Ē��"����t�⒢̼t=���g\5#
END 
```

如您所见，这其中有些可疑之处。pylibmc 中的压缩大小为 40 字节，使用 php-memcached 压缩的相同数据为 44 字节。另请注意，使用 pylibmc 存储时标志为 8，使用 php-memcached 存储时标志为 48！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T15:41:48.770

我认为您观察到的原因是 memcache 本身没有实现压缩，因此每个库都以自己的方式进行压缩，只需比较用于指示压缩正在使用的标志

由[pylibmc定义](https://github.com/lericson/pylibmc/blob/master/src/_pylibmcmodule.h#L63)

`#define PYLIBMC_FLAG_ZLIB (1 << 3)` （所以这是标志 == 8）

并通过[php-memcached](https://github.com/php-memcached-dev/php-memcached/blob/master/php_memcached.c#L120)

`#define MEMC_VAL_COMPRESSED (1<<4)`

`#define MEMC_VAL_COMPRESSION_ZLIB (1<<5)`

`#define MEMC_VAL_COMPRESSION_FASTLZ (1<<6)`

所以我认为除非您愿意修改其中一个库以使其标志与另一个一致，否则没有出路

**编辑：** 好的，这是一个小补丁，它为 pylibmc 和 php-memcached 同步压缩支持。请参阅我[的 pylibmc 的 github 分支](https://github.com/gluedig/pylibmc)。

**Big fat warring** - 它只适用于字符串，所以如果你想存储对象，你必须自己进行反序列化（JSON）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T08:20:51.660

拉伯，

正如你所说，我做了改变

1.  将 php 压缩方法从 FASTLZ 更改为 ZLIB
2.  在 _pylibmcmodule.h 文件中将 pyLibmc 标志更改为 1 << 5 并重新安装 pylibmc

    ```
    #define PYLIBMC_FLAG_ZLIB (1 << 5) 
    ```

这些是正确的变化吗？还需要做些什么吗？因为它不起作用，所以出现以下错误

```
Warning: Memcached::get(): unknown payload type in uaTestMemcached.php on line 5

bool(false) 
```

# servicestack - ServiceStack 预打包的用户界面元素

> ID：13912533
> 
> 赞同：1
> 
> 时间：2012-12-17T10:41:06.240
> 
> 标签：servicestack

我已经使用 ServiceStack 开发了许多服务，其中一些具有配置它们所需的 UI 要求。我可以很容易地在 DLL 中提供后台 REST 服务，只需将 dll 添加到要扫描的 DLL 列表中，就可以在托管应用程序中注册它们。

但我想知道的是 UI 元素，为服务堆栈用户界面提供这些元素的最佳方式是什么？它们基本上依赖于可用的 _Layout.cshtml，之后它们就独立了。我显然不想弄乱现有网站，或与该网站自己的页面名称或路线发生冲突。

有没有人有过使用 Service Stack 做类似事情的经验。有没有一种巧妙的方法来执行这种与其架构的集成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T15:02:33.810

[查看RazorRockstars](https://github.com/ServiceStack/RazorRockstars/tree/master/src)中不同的Web UI + Razor 项目，基本上，如果您使用的是自托管，则可以将**构建操作**设置为**Content**并将 Copy 选项设置为**Copy if Newer**在这种情况下 VS.NET 将复制Razor Views 到`bin/`输出文件夹，您可以按原样复制和部署该文件夹。

如果它只是一个标准的 ASP.NET 应用程序，那么您只需复制 Razor 文件作为 xcopy 和部署脚本的一部分。

还有一个嵌入式资源选项，您可以在其中将 Razor 视图嵌入到已编译的 ASP.NET dll 中，如[RazorRockstars.Console](https://github.com/ServiceStack/ServiceStack/tree/master/tests/RazorRockstars.Console)测试项目中所示，但它使用外部非开源库功能来启用此功能。

# ruby-on-rails - Rails / RSpec：规范中的邮件渲染导致缺少模板

> ID：13912535
> 
> 赞同：2
> 
> 时间：2012-12-17T10:41:09.077
> 
> 标签：ruby-on-rails, ruby, rspec, actionmailer

使用`rspec-rails`，我应该如何测试邮件模板的正确呈现？我从这个测试开始`spec/views/user_mailer.spec`：

```
describe Mailer do
  it 'sends an message email' do
    render 'send_message'
  end
end 
```

它告诉我：

```
Failure/Error: render 'mailer/send_message.html.erb'
 ActionView::MissingTemplate:
   Missing partial mailer/send_message.html with {:formats=>[:html, :text, :js, :css, :ics, :csv, :png, :jpeg, :gif, :bmp, :tiff, :mpeg, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip], :handlers=>[:erb, :builder, :haml, :coffee], :locale=>[:de]}. 
 Searched in: 
   * ".../app/views"` 
```

但是有我要渲染的模板`app/views/mailer/send_message.html.erb`

我应该如何规范这个？（我想检查 CSS 规则是否导致页脚的颜色正确，如果没有更好的方法，我想用 jQuery-Javascript 提取）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T12:57:31.303

您可能必须使用：

```
render template: 'send_message' 
```

[Rails 指南](http://guides.rubyonrails.org/layouts_and_rendering.html#using-render)提到：

> 由于字符串中嵌入了斜线字符，Rails 知道该视图属于不同的控制器。如果要明确，可以使用 :template 选项

请注意，您的模板名称没有嵌入的斜杠字符。

# c++ - 自动将 C++ 类重构为单独的文件

> ID：13912537
> 
> 赞同：5
> 
> 时间：2012-12-17T10:41:12.113
> 
> 标签：c++, refactoring, automated-refactoring

我继承了一个相当大的项目，有数万行，但以前的开发人员只将它们打包成 6 个文件（OMG！）...

因此，为了便于阅读，我想自动将所有类拆分为它们自己的 cpp/h 文件。

有没有任何工具能够做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T21:56:40.740

为了重构您的 C++ 代码库，您需要一个可以解析 C++、保留头文件、但也遵循 #includes 并处理它们的工具。你必须为每对依赖项构建一个“a-depends-on-b”映射，然后你必须对它们进行聚类。最后，您必须能够根据集群重新生成源代码。

而且您希望在一个完整的代码库上执行此操作，而不仅仅是一个编译单元。

这是一个很难找到的工具：-} 我认为您不会现成的找到它。

我们的 DMS Software Reengineering Toolkit 有很多这样的功能。它是一个通用的程序分析和转换系统，具有完整的 C++ 前端，并具有可控的预处理器，因此它可以根据需要扩展/不扩展#includes。它可以捕获 a-depends-on-b 关系（我们已经在一个包含 2600 万行代码的 C 系统上完成了这项工作），并且它具有经过验证的对预处理器条件进行符号推理的能力；有可能捕获“a-depends-on-b if”。

有了这些信息，您就需要聚类。我认为要做到这一点，您需要某种通用聚类算法和一些用户输入来覆盖它（“我坚持，不要管这个#include 文件，这两个显然不相关的东西会放在一起”）。然后可以使用 DMS 的程序转换部分来机械地拆分代码并将文件包含到分组的、依赖的声明中。

DMS 是一个复杂的工具；毕竟，它必须处理像 C++ 这样令人讨厌的事情。将其配置为完成上述任务并非易事，但我认为它在技术范围内。

但是，这些都不能帮助您解决当前的问题，即获取一个工具来帮助您解决今天的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T20:47:10.680

我很确定没有工具可以自动完成这项任务。这仍然是一个活跃的研究领域。例如，请参阅“ [Towards Automating Class-Splitting Using Betweenness Clustering](http://ieeexplore.ieee.org/xpl/login.jsp?tp=&arnumber=5431726&url=http://ieeexplore.ieee.org/xpls/abs_all.jsp?arnumber=5431726) ”。我知道有几个 Java 工具可以提供一些帮助（[JDeodorant](http://www.jdeodorant.com/)、[ext-c](http://code.google.com/p/ext-c/)），但这些工具并不是全自动的。我不知道任何 C++ 工具。

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2012-12-17T10:48:07.783

你没有说你正在使用什么编辑器或平台，所以不清楚为什么大文件是一个问题。

我的猜测是这是你的解决方案：

*   获得可以处理大文件的更好的编辑器。

一个好的编辑器应该能够通过名称找到一个类，拥有一个类浏览器，它使您能够跳转到任何类、成员、函数或任何其他定义的定义，通过右键单击或键盘查找任何符号的用途快捷方式，通常会使您轻松找到自己的方式，以至于文件的大小无关紧要。

另一方面，也许你有一个好的编辑器，只需要学习如何在其中做这些事情。

# objective-c - iOS UITableView numberOfRowsInSection BAD ACCESS

> ID：13912540
> 
> 赞同：0
> 
> 时间：2012-12-17T10:41:22.727
> 
> 标签：objective-c, ios, cocoa-touch, uitableview

我在内部调用委托的`numberOfRowsInSection`方法，但它给了我一个**错误的访问错误**：`UITableView``heightForRowAtIndexPath`

 **```
- (CGFloat) tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{
    ...
    NSLog(@"number of rows in section: %i", [tableView numberOfRowsInSection:[indexPath section]]);
    ...
} 
```

谁能告诉我这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T10:46:25.703

您正在调用委托方法。

当您调用此方法时，它会调用相关的委托方法，如`cellForRowAtIndexPath`等`heightForRowAtIndexPath`。

它会导致**无限循环**，这就是它崩溃的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T10:45:48.847

这很正常.. 在那一刻，你`UITableView`正在被创造。`UITableView`在构建之前，您不应调用与您的 , 相关的方法。您应该依靠其他机制来获取单元格的高度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T10:51:40.367

您需要在此处返回一个实际值。因此，与其打电话，不如`[tableView numberOfRowsInSection:[indexPath section]]`简单地再次做同样的事情。

为了不重复您的代码，您可以创建一个可以在两个地方调用的辅助方法，即您的`heightForRowAtIndexPath`方法和`numberOfRowsInSection`方法：

```
- (int) myNumberOfRowsMethod{
    // Here you would usually have some underlying model 
    return [self.myContactsOrWhateverArray count];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T10:49:24.050

你在打电话

```
[tableView numberOfRowsInSection:section]; 
```

你应该打电话

```
[self numberOfRowsInSection:section]; 
```**

# email - WSO2 Governance 正在发送电子邮件验证电子邮件，但不适用于订阅

> ID：13912546
> 
> 赞同：0
> 
> 时间：2012-12-17T10:41:41.403
> 
> 标签：email, wso2, wso2carbon, wso2greg

设置 WSO2 治理。设置axis2.xml，以便在设置对集合的电子邮件订阅时，它会发送一封验证电子邮件请求电子邮件。但是订阅永远不会触发...尝试了所有事件，创建子项，更新，创建 LC。

有什么帮助吗？

日志文件中没有任何内容表明它无法发送......或者甚至尝试过。

需要注意的一点是，此订阅是在自定义工件类型的存储集合上/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:04:22.750

[您可以在此处查看](http://docs.wso2.org/wiki/display/Governance452/Adding+a+Subscription)通知文档。如果您需要实例，请使用“无”，否则有每小时、每周等频率。

# php - PHP IF 语句在我的网站上无法正常工作

> ID：13912552
> 
> 赞同：-2
> 
> 时间：2012-12-17T10:41:56.097
> 
> 标签：php, if-statement

在我的结果页面上，我有一个 while 循环，它从 mysql 检索数据并将其显示在表中。该表包括主队和客队，半场得分和全场得分。

然后，我得到了一些代码，将房屋价值和远离全时得分的价值分开：

```
$value = $fulltime;
$apart = explode('-',$value); 
```

然后我得到一个 IF 语句，首先检查 home 值是否大于 away 值，然后检查 home id 是否与用户选择的 winsid 相同。

然后我这样做是为了客场胜利，如果比赛是平局。

```
if($apart[0] > $apart[1]) {
    if($row["home_id"]==$row["winningid"]) {
        $hometeamwin = "Win"; 
    }
} else if($apart[0] < $apart[1]) {
    if($row["away_id"]==$row["winningid"]) {
        $hometeamwin = "Win"; 
    }
} else if($apart[0] == $apart[1]) {
    if(!$row["winningid"]) {
        $hometeamwin = "Win"; 
    }
} else { 
    $hometeamwin = "lose";
}

echo $hometeamwin; 
```

我在 IF 语句中做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T10:54:48.290

问题是你永远不会得到你的第四个选项，因此没有人会输！

我相信它应该是这样的：

```
$hometeamwin = "lose";
if($apart[0] > $apart[1] && $row["home_id"]==$row["winningid"]) {
    $hometeamwin = "Win";
}
else if($apart[0] < $apart[1] && $row["away_id"]==$row["winningid"]) {
    $hometeamwin = "Win"; 
}
else if($apart[0] == $apart[1] && !$row["winningid"]) {
    $hometeamwin = "Win"; 
}
echo $hometeamwin; 
```

您需要检查 [ACTUAL WINNING TEAM] 的 ID 是否与 [CHOSEN TEAM] 的 ID 相同（或不），**同时****如果**条件为真，请检查谁没有获胜。

它不漂亮，但我认为这就是你想要的。

# java - Windows 64 中的 javaw.exe 进程是否会消耗更多内存？

> ID：13912553
> 
> 赞同：5
> 
> 时间：2012-12-17T10:41:58.573
> 
> 标签：java, windows, eclipse, jvm, 64-bit

我从 Windows 7（32 位）切换到 Windows 7（64 位），因为我在 2 GB 中添加了 4 Gb RAM。现在当我跑步时`Eclipse Juno EE`。在 Windows 任务管理器中，我看到该进程`javaw.exe`正在消耗大约 380 Mb 的 RAM，我以前没有看到过，当我使用 32 位操作系统时。我什至没有尝试午餐任何项目。我写了这段代码：

```
public static void main(String[] args) {
    Runtime runtime = Runtime.getRuntime(); 
    System.out.println(runtime.maxMemory());
} 
```

这表明对于我的`JVM is allocated 1 338 507 264 bytes`.

这意味着当我运行项目时，这个过程可能会消耗高达 1.3 Gb 的内存？！

将来我会对此有任何问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T10:44:42.463

64 位版本将使用`-server`JVM，并且它具有更高的默认最大堆大小。Windows 32 位版本默认使用`-client`JVM，默认情况下它使用较少的资源，因为它设计为在较小的机器上运行，因此对于长时间运行的程序来说往往更慢（客户端 JVM 对短期运行的程序有更快的负载像小程序）

如果您设置了最大堆大小，那么如果您使用的是 Java 6 或 Java 7 的最新版本，它们应该使用大致相同的内存量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T10:45:06.507

`Runtime.maxMemory()`：

> 返回Java 虚拟机将尝试使用的**最大内存量。**

这是一个上限。这并不意味着 JVM 预先分配了这么多内存。您的进程的内存使用量将随着您创建对象并保留它们而增长，直至您可以配置的最大堆大小。

> 在 Windows 任务管理器中，我看到进程 javaw.exe 正在消耗 ~380 Mb RAM

内存使用有很多方面：地址空间、虚拟 RAM、物理 RAM 等。根据您在任务管理器中查看的列，您在其中看到的数字可能具有多种不同含义之一。

> 我从 Windows 7（32 位）切换到 Windows 7（64 位）

一般来说，64 位代码确实比等效的 32 位代码需要更多的内存。一方面，指针更宽，因此占用更多空间。这适用于 JVM，就像它适用于任何其他进程一样。然而，JVM 采取了一些措施来减轻影响。一种这样的措施是[CompressedOops](https://wikis.oracle.com/display/HotSpotInternals/CompressedOops)。

# c++ - 迭代器未按预期运行

> ID：13912566
> 
> 赞同：0
> 
> 时间：2012-12-17T10:42:52.307
> 
> 标签：c++, iterator

代码：

```
std::vector<std::string>::iterator first = iter;

if( ++iter != iter_is_pointing_to_this_vector.end())
{
  ... 
```

当“首先”取消引用迭代器时，会发生分段错误。当注释掉取消引用时，程序只是在 if 语句处停止并且不会继续。iter 的递增显然没有达到我的预期：我想确保有问题的向量有或没有更多成员传递“iter”指向的项目。

这种行为的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:18:13.190

好的，评论太长了，所以我会把它作为答案发布，但它可能不完整。

构造诸如`++iter`将推进迭代器。因此，如果您的线路在循环内，另一行在`++iter`其末尾，您将在每个循环中将其推进两次！。`++iter`不会产生指向下一个元素的迭代器，而是将 移动`iter`到它。

据我了解，您会`++iter != iter_is_pointing_to_this_vector.end()`检查下一个元素是否结束。确定当前元素是否是向量中的最后一个。但是你写的代码做了一些不同的事情。

要执行您想要的操作，您需要另一个迭代器，您可以将其设置为当前元素的下一个元素。

```
std::vector<std::string>::iterator = iter = v.begin();
std::vector<std::string>::iterator = iter2 = v.begin();
++iter2;
while( {...} ){
  if(iter2 != v.end() ){...}
  ++iter2; ++iter;
} 
```

当然，您需要确保`v`具有多个元素。`reverse_iterator`如果您的容器提供它，您也可以使用它。

```
typedef iter_t std::vector<std::string>::iterator;
iter_t = iter = v.begin();
std::reverse_iterator<iter_t> = iter2 = v.rbegin();
while( {...} ){
  if(iter != iter2.base() ){...}
  ++iter;
} 
```

注意：`base()`将反向迭代器转换为普通（正向）迭代器，以便可以比较它们。

编辑：您似乎可以使用`reverse_iterator`双向迭代器，这意味着它们也将实现递减操作。因此，由于您实际上并不需要反向迭代，只需要一个相对于 的元素的迭代器`end`，一种更简单的方法是：

```
typedef iter_t std::vector<std::string>::iterator;
iter_t = iter = v.begin();
iter_t = iter2 = v.end();
--iter2;
while( {...} ){
  if(iter != iter2){...}
  ++iter;
} 
```

# java - 获取特定数据的正则表达式

> ID：13912572
> 
> 赞同：3
> 
> 时间：2012-12-17T10:43:24.513
> 
> 标签：java, xml, regex

我有一个可以作为文本框读取的文件，我想只获取之后可用的数据

> **开始="n= 和结束="n=**

```
 <?xml version="1.0" encoding="utf-8"?>
 <!DOCTYPE smil PUBLIC "-//W3C//DTD SMIL 1.0//EN" "SMIL10.dtd">
 <head>
 </head>
     <body>
            <audio start="n=10.815s" end="n=19.914s"/>
 </body>
</xml> 
```

我尝试执行以下操作：

```
 String startTime = readString.replaceAll(".*start=\"n=|\\s.*", "").trim();
   String endTime = readString.replaceAll(".*end=\"n=|\\s.*", "").trim();
   Log.e("Start Time is :" , startTime);
   Log.e("endTime Time is :" , endTime); 
```

它工作正常，只需获取开始时间和结束时间，但它也显示`<?xml`标签。

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T10:45:39.470

我宁愿使用 XML 解析器来阅读它。正则表达式不适合解析 XML/HTML 等。您会在 SO 中找到许多[与 this 相关的](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)参考资料。

对于 Java，DOM 和 SAX 是可能的，但[JDOM](http://www.jdom.org/)可能是一个更容易的起点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T14:32:51.723

请在 Java 中找到下面的解决方案，这适用于任何包含字符串的数据

```
<audio start="n=........" end="n=......." />

import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class Test {
public static void main(String[] args) 
{
String inputData1 = "<?xml version=\"1.0\" encoding=\"utf-8\"?>"+
                        "<!DOCTYPE smil PUBLIC \"-//W3C//DTD SMIL 1.0//EN\" \"SMIL10.dtd\">"
                        + "<head>" 
                        + "</head>" 
                        + "<body>"
                        + "<audio start=\"n=10.815s\" end=\"n=19.914s\"/>"
                        + "<sometag> <audio start=\"n=10.815s\" end=\"n=20.914s\"/> </sometag>"
                        + "</body>"
                        + "</xml>";

    String inputData2 = "some data goes here with or without tags; <audio start=\"n=10.815s\" end=\"n=20.914s\"/>; askjdhfla ";

    Pattern pattern = Pattern.compile("<audio[^>]*start\\s*=\\s*\"n\\s*=\\s*([^\"]*)\"[^>]*end=\"n\\s*=\\s*([^\"]*)\"[^>]*>");
    Matcher matcher = pattern.matcher(inputData1);

    while(matcher.find()){
        System.out.println("start=\"n="+matcher.group(1)+", & end=\"n="+matcher.group(2)+"");
    }

}
}

Output For InputData1:
start="n=10.815s, & end="n=19.914s
start="n=10.815s, & end="n=20.914s

Output For InputData2:
start="n=10.815s, & end="n=20.914s 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T11:09:41.547

它始终是通过解析器而不是正则表达式解析 xml/html 的最佳方式。但是关于你的问题。您可以尝试以下操作：

```
String s = "foo\n <audio start=\"n=10.815s\" end=\"n=19.914s\"/>bar\n";
String re = "(?s).*?(?<=start=\"n=)([^\"]*).*";
String startTime=s.replaceAll(re, "$1"); 
```

上面的例子会给String **10.815s**`startTime`。如果要获取 endTime，请将 re (start) 替换为 (end)

关于正则表达式的简短说明：

```
(?s) is flag dotall, which means, the regex will match new lines as well
(?<=start=\"n=)([^\"]*) this is look behind. 
                        search for text following start="n=
                        and not "(double quote) in this case is 10.815s 
```

希望能帮助到你

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T10:51:31.203

我正在加入以前的答案。但是如果你的文件总是很小，只有几个字符串，你可以使用正则表达式。在这种情况下，试试这个模式：`(\n|\r|.)*end\s*=\s*\"n=(.*)\"(\n|\r|.)*"`

**UPD：**第 2 组将完全满足您的需求。

# javascript - 根据用户单击的提交按钮使布尔属性为 false 或 true？

> ID：13912577
> 
> 赞同：0
> 
> 时间：2012-12-17T10:43:40.810
> 
> 标签：javascript, ruby-on-rails, erb

我在`Post`模型中添加了一个草稿属性：

```
 create_table "posts", :force => true do |t|
    t.text     "content",            :limit => 255
    t.integer  "user_id"
    t.boolean  "draft",                             :default => false
    t.datetime "published_at"
  end 
```

现在它显示为一个复选框：

```
<%= form_for(@post, :html => { :multipart => true }) do |f| %>

<%= f.label :title %>
<%= f.text_field :title %>

<%= f.label :content %>
<%= f.text_area :content, id: "wysihtml5-textarea" %>

<%= f.label :category_id, "Select Category" %>
<%= f.collection_select :category_id, Category.order(:name), :id, :name,
                        { prompt: 'Select Category' } %>

<%= f.label :draft %>
<%= f.check_box :draft %>

<div class="form-actions">
  <%= f.submit "Create post", class: "btn btn-primary" %>
</div>

<% end %> 
```

我想修改表单，以便用户可以单击其中一个`Save as Draft`或`Publish`按钮而不是单击草稿复选框（就像您在 WordPress 中所做的那样）。

我不知道如何使这些按钮影响`draft`属性的值。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:17:36.783

当您单击一个`submit`按钮时，Rails 会自动`"commit"`在哈希中包含一个条目`params`，其中包含所单击按钮的文本。您应该能够在控制器中关闭它。

请注意，上次我尝试时，有一个错误`jquery-ujs`意味着这种策略不适用于声明为`:remote => true`. 然而，那是不久前的事了，我确实提出了一个错误报告，所以它可能后来被修复了。

# c - C 编程：void* - 为什么不是参数多态？

> ID：13912590
> 
> 赞同：4
> 
> 时间：2012-12-17T10:44:45.263
> 
> 标签：c, void-pointers, parametric-polymorphism

为什么说我们可以用 void* 在 C 编程中实现参数多态性是不正确的？

教授提出了这个问题，没有回答。我相信 void* 实际上是被认为是参数多态性的非常低级别的东西，但有更强有力的理由吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T10:50:15.927

可能是因为该机制“过于机械化”，以至于在多态性应该有用的意义上它不再有用。

也因为事后没有简单的方法来扩展多态函数。

在 C++ 中，您可以轻松地做到这一点：

```
Matrix4x4 a, b, c;

a = ...; /* Initialize matrices. */
b = ...;
c = a + b; /* Use overloaded (polymorphic) operator + to add. */ 
```

在 C++ 中，上面使用了类中的`operator+()`定义`Matrix4x4`，并且能够在编译时确定。因此，在添加新数据类型时，会添加描述如何进行添加的相关代码，重新使用现有`+`名称。在 C 中，你不能这样做。

在 C 中，即使你有一个函数

```
void super_add(void *sum, const void *a, const void *b); 
```

`Matrix`如果你只是写了类型，你怎么告诉它？你必须有一些通用的类型描述系统：

```
void super_add(const char *sum_type, void *sum, const char *atype, void *a, const char *btype, const void *b); 
```

您必须为其提供某种形式的注册机制，以便您可以添加新功能：

```
void super_add_register(const char *sum_type, const char *atype, const char *btype, void (*adder)(void *sum, const void *a, const void *b)); 
```

那么您必须实现代码以将类型名称与正确的添加函数相匹配，并且不断地进行。

简而言之，一般来说不值得。但是请注意，有些库可以做很多这样的事情，例如[GObject](http://developer.gnome.org/gobject/stable/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T11:01:55.453

采用参数多态的这个定义：

一种在必要时用具体类型显式或隐式替换类型变量的机制。

`void *`不适合。

C 可以通过宏来实现： [http ://rosettacode.org/wiki/Parametric_polymorphism#C](http://rosettacode.org/wiki/Parametric_polymorphism#C)

# node.js - nodejs无法将换行符发布到redis

> ID：13912594
> 
> 赞同：0
> 
> 时间：2012-12-17T10:45:01.820
> 
> 标签：node.js, redis, newline

我正在使用带有 redis 的 nodeJS 作为数据存储并且遇到了问题。我有一个 redis 频道设置，我的 HTML5 应用程序通过服务器发送事件订阅，但是当我从 nodejs 服务器向频道发布一些包含换行符的文本时，客户端只获取第一行。

我是 nodeJS/redis 的新手，所以很可能我只是在做一些愚蠢的事情。在这里复制所有代码会很困难，但简而言之，我正在做一些事情：

```
// in the nodejs setup & controller
client = redis.createClient();
msg = "This is a test.\n\nAnd this is another.";
client.publish("mychannel", msg);

// on the client side javascript file
source = new EventSource('/main/stream')
source.addEventListener('mychannel', function(e) {
    $('#messages').append(e.data);
}, false); 
```

我在#messages div 中看到的是“这是一个测试”，但从来没有“这是另一个”。我必须给 publish() 一些参数以使其执行换行吗？

在发布到频道之前，我确实尝试过替换换行符......但我宁愿将它们保留在那里以提高可读性；此外，那是针对症状而不是疾病。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:17:01.183

也许值得一试：

```
var nl = '\n'.charCodeAt(0);

msg = "This is a test."+nl+nl+"And this is another."; 
```

如此处所示[http://hermanjunge.com/post/10634913617/redis-nodejs-dump-txt-into-db](http://hermanjunge.com/post/10634913617/redis-nodejs-dump-txt-into-db)

# regex - 在 Scala 中验证电子邮件单行

> ID：13912597
> 
> 赞同：11
> 
> 时间：2012-12-17T10:45:11.230
> 
> 标签：regex, scala

在我的代码中添加简单的电子邮件验证，我创建了以下函数：

```
def isValid(email: String): Boolean = if("""(?=[^\s]+)(?=(\w+)@([\w\.]+))""".r.findFirstIn(email) == None)false else true 
```

这将通过邮件 like`bob@testmymail.com`和失败邮件 like `bobtestmymail.com`，但是带有空格字符的邮件会漏掉， like`bob @testmymail`也会返回 true。

我可能在这里很傻......

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2015-09-07T20:04:01.177

我的函数灵感来自 Play Framework 使用的函数（请参阅[PlayFramework](https://github.com/playframework/playframework/blob/master/framework/src/play/src/main/scala/play/api/data/validation/Validation.scala)）并使用此处介绍的正则表达式：[W3C 推荐](http://www.w3.org/TR/html5/forms.html#valid-e-mail-address)。希望能帮助到你。其他问题中建议的所有测试均已通过。

```
private val emailRegex = """^[a-zA-Z0-9\.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$""".r

def check(e: String): Boolean = e match{
    case null                                           => false
    case e if e.trim.isEmpty                            => false
    case e if emailRegex.findFirstMatchIn(e).isDefined  => true
    case _                                              => false
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-17T14:13:55.977

由于我测试了您的正则表达式并且它正在捕获简单的电子邮件，然后我检查了您的代码并看到您正在使用 findFirstIn。我相信这是你的问题。findFirstIn 将跳过所有空格，直到它匹配字符串中任何位置的某个序列。我相信在您的情况下，最好使用 unapplySeq 并检查它是否返回 Some List

```
def isValid(email: String): Boolean =
   if("""(?=[^\s]+)(?=(\w+)@([\w\.]+))""".r.findFirstIn(email) == None)false else true

def isValid2(email: String): Boolean =
  """(\w+)@([\w\.]+)""".r.unapplySeq(email).isDefined

isValid("test@gmail.com")                        //> res0: Boolean = true

isValid("t es t@gmailcom")                       //> res1: Boolean = true

isValid("b ob @tes tmai l.com")                  //> res2: Boolean = false

isValid2("test@gmail.com")                       //> res3: Boolean = true

isValid2("t es t@gmailcom")                      //> res4: Boolean = false

isValid2("b ob @tes tmai l.com")                 //> res5: Boolean = false

// but those don't work for both:
// I recommend you using a proper regex pattern to match emails
isValid("test@gma.i.l.c.o.m")                    //> res6: Boolean = true

isValid("test@gmailcom")                         //> res7: Boolean = true

isValid2("test@gma.i.l.c.o.m")                   //> res8: Boolean = true

isValid2("test@gmailcom")                        //> res9: Boolean = true 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T13:08:54.823

```
scala> def isValid(email : String): Boolean = if("""^[-a-z0-9!#$%&'*+/=?^_`{|}~]+(\.[-a-z0-9!#$%&'*+/=?^_`{|}~]+)*@([a-z0-9]([-a-z0-9]{0,61}[a-z0-9])?\.)*(aero|arpa|asia|biz|cat|com|coop|edu|gov|info|int|jobs|mil|mobi|museum|name|net|org|pro|tel|travel|[a-z][a-z])$""".r.findFirstIn(email) == None)false else true
v: (email: String)Boolean

scala> isValid("""bob@test.com""")
res0: Boolean = true

scala> isValid("""bob @test.com""")
res1: Boolean = false

scala> isValid("""bobtest.com""")  
res2: Boolean = false 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-04T04:42:37.173

```
scala> val email4 = """([\w\.!#$%&*+/=?^_`{|}~-]+)@([\w]+)([\.]{1}[\w]+)+""".r
email4: scala.util.matching.Regex = ([\w\.!#$%&*+/=?^_`{|}~-]+)@([\w]+)([\.]{1}[\w]+)+

scala> email4.pattern.matcher("arun#eja-729@gmail..gov").matches
res10: Boolean = false

scala> email4.pattern.matcher("arun#eja-729@gmail.com.gov").matches
res11: Boolean = true

scala> email4.pattern.matcher("arun#eja-729@gmail.com.gov.in").matches
res12: Boolean = true

scala> email4.pattern.matcher("arun#eja-729@gmail.com.gov.in.").matches
res13: Boolean = false

scala> email4.pattern.matcher("arun#eja-729@gmail.com.").matches
res14: Boolean = false

scala> email4.pattern.matcher("arun#eja-729@gmail.com").matches
res15: Boolean = true

scala> email4.pattern.matcher("arun#eja-729@gmail..com").matches
res16: Boolean = false

scala> email4.pattern.matcher("arun#eja-729@gmail.ap.com").matches
res17: Boolean = true

scala> email4.pattern.matcher("arun#eja-729@gmail.ap.com.").matches
res18: Boolean = false 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-04T04:47:20.660

下面是电子邮件 id 的正则表达式，最小 10 和最大 30 字符长度。

```
scala> val email4 = """[([\w\.!#$%&*+/=?^_`{|}~-]+)@([\w]+)([\.]{1}[\w]+)+]{10,30}""".r
email4: scala.util.matching.Regex = [([\w\.!#$%&*+/=?^_`{|}~-]+)@([\w]+)([\.]{1}[\w]+)+]{10,30}

scala> email4.pattern.matcher("ar@g.com").matches
res19: Boolean = false

scala> email4.pattern.matcher("ar@gmail.com").matches
res20: Boolean = true

scala> email4.pattern.matcher("ar1234567890@gmail1234567890.com").matches
res21: Boolean = false

scala> email4.pattern.matcher("ar1234567890@gmail123456780.com").matches
res22: Boolean = false

scala> email4.pattern.matcher("ar1234567890@gma.com").matches
res23: Boolean = true

scala> email4.pattern.matcher("ar1234567890@gmghfjdfcga.com").matches
res24: Boolean = true

scala> email4.pattern.matcher("ar1234567890@gmghfjdfcga1.com").matches
res25: Boolean = true

scala> email4.pattern.matcher("ar1234567890@gmghfjdfcga111.com").matches
res26: Boolean = false

scala> email4.pattern.matcher("ar1234567890@gmghfjdfcga11.com").matches
res27: Boolean = true 
```

# scala - 覆盖方法作为Scala中的字段

> ID：13912600
> 
> 赞同：4
> 
> 时间：2012-12-17T10:45:30.790
> 
> 标签：scala

我不明白。为什么Scala支持覆盖方法作为字段：

```
abstract class A {
    def i: Int;
}

class B extends A {
    val i = 123;
}

val obj:A = new B();

println(obj.i) 
```

方法`i`是字段`i`。为什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-17T11:06:44.930

查看这里发生了什么的一种快速方法是编译此代码并用于`javap`检查生成的类。在这里，我们得到以下内容`A`：

```
public abstract class A implements scala.ScalaObject {
  public abstract int i();
  public A();
} 
```

对于`B`（使用`-p`，所以我们可以看到任何私有成员）：

```
public class B extends A implements scala.ScalaObject {
  private final int i;
  public int i();
  public B();
} 
```

所以最后`val`只是作为一个带有 getter 的私有字段——很像你在惯用的 Java 中编写的内容，尽管命名约定不同（并且不是真正的*约定*，因为编译器会为你处理它）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-18T02:32:24.550

Travis 的回答解释了*如何*在实现级别上，一些方法可以被 Scala 中的字段覆盖，但不*解释为什么*。*为什么*问题的答案与两个编程语言设计原则有关：[统一访问原则](http://en.wikipedia.org/wiki/Uniform_access_principle)和里氏[替换原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)。

**统一访问原则**本质上说调用者不必区分通过方法读取属性和通过字段读取属性——这两个调用应该看起来相同，并且不应该背叛它们是否涉及存储或计算。

**Liskov 替换原则**本质上说子类型必须遵守其父类型的所有合同。允许子类型遵守*比*其父类型更强的合同，但*不得*违反其父类型的任何合同。

在 Scala 中，声明`def`不带参数列表的 a 意味着某种约定。也就是说，这意味着访问关联的属性将返回声明类型的值。*由于不能*保证引用透明性，后续访问可能会或可能不会返回相同的值。

显然，a`val`满足相同的合同。但是，a`val`做出了更强有力的保证：每次访问都会产生相同的值。由于这是一个*更强大*`val`的契约，因此子类型使用 a来实现 a完全符合 Liskov 替换原则`def`。同样，禁止子类型使用 a`def`来实现 a `val`。

# jetty - mvn jetty:run 构建失败

> ID：13912602
> 
> 赞同：0
> 
> 时间：2012-12-17T10:45:39.063
> 
> 标签：jetty, maven-3, maven-jetty-plugin

`mvn jetty:run`我有一个项目，我在 Windows 的命令窗口中成功运行了它。**然后我在eclipse**中尝试了**maven** build 。之后，它说发生了构建失败，并且在我的命令窗口中运行后我最终收到了这种消息。**`mvn jetty:run`**

 **```
Maven/NoPluginFoundForPrefixException 
```

这是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T07:57:26.463

在 Eclipse 中的 Maven 构建中，您不需要预先`mvn`添加命令。

尝试使用`jetty:run`而不是`mvn jetty:run`.

**运行方式 > Maven 构建 > 目标：码头：运行**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T13:24:34.177

尝试完全限定的插件名称，例如`org.mortbay.jetty:maven-jetty-plugin:6.1.22:run`**

# php - VC 和 PHP 联动

> ID：13912605
> 
> 赞同：-1
> 
> 时间：2012-12-17T10:45:48.177
> 
> 标签：php, visual-c++

我想在我的代码中链接 VC++ 和 PHP，以便我可以从我的计算机控制和指示远程计算机上的 VC++ 软件。例如：如果我必须使用我的软件检查我家的计算机上的磁盘，方法是通过 php 中的 Web 应用程序构建来指示它

请帮帮我！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T10:51:15.007

有 php 函数[exec](http://php.net/manual/de/function.exec.php)和[shell_exec](http://php.net/manual/de/function.shell-exec.php) 您可以使用它们来执行命令行应用程序并检索输出

# linux - 如何使用免费的 linux 命令行工具将字体嵌入 PDF？

> ID：13912615
> 
> 赞同：15
> 
> 时间：2012-12-17T10:46:22.467
> 
> 标签：linux, pdf, command-line, fonts

我有一组可以在我的机器上正常显示的 PDF。但是，他们使用我机器上安装的非标准字体。由于它们没有嵌入（根据[pdffonts](http://linuxcommand.org/man_pages/pdffonts1.html)），它们不会显示在其他机器上。如何仅使用 linux 命令行工具嵌入此字体。

顺便说一句，在 Windows 下，可以按照[此处](http://www.ehow.com/how_5877348_embed-fonts-pdf-files.html)的说明使用 Adob​​e Acrobat 。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-21T09:32:57.157

试试这个：

```
gs -q -dNOPAUSE -dBATCH -dPDFSETTINGS=/prepress -sDEVICE=pdfwrite -sOutputFile=output.pdf input.pdf 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-21T11:12:54.633

这应该通过仔细阅读这些答案来解决：

*   [**如何修复 PDF 文件并嵌入丢失的字体**](https://stackoverflow.com/a/13131101/359307)
*   [**如何在现有 PDF 中嵌入字体？**](https://stackoverflow.com/a/4234150/359307)

# spring - CrudRepository 的 save 方法返回一个 bean，即使它没有被创建

> ID：13912623
> 
> 赞同：1
> 
> 时间：2012-12-17T10:46:55.413
> 
> 标签：spring, hibernate, jpa, spring-data, spring-data-jpa

我将 Spring (3.11) 数据/存储库与 JPA (2.0)/Hibernate (3.5.6) 一起使用，并且我遇到了与 CrudRepository 的保存方法有关的问题。

我拥有的全球服务如下：

```
@Override
@Transactional(readOnly = false, propagation = Propagation.REQUIRED, rollbackFor = Throwable.class)
public MyBean createMyBean(MyBean myBean) {

    // 1)
    // myBean does not have PK, it will be generated via sequence
    MyBean myBean = myBeanRepository.save(myBean);

    // 2)
    // sends event to queue
    syncEventProducer.sendSyncEvent(....);

    return myBean;
} 
```

我的问题很简单：我故意插入某个不满足表要求的 myBean（通常我将在数据库中创建为非 null 的列设置为 null）然后在内部产生异常（例如 DataIntegrityViolationException）在调用 1) 但 2) 仍然被执行。这是为什么？

MyBeanRepository 是这样的：

```
public interface MyBeanRepository extends CrudRepository<MyBean, Integer> {

} 
```

在代码中挖掘一点我已经看到与我的存储库相关的 SimpleJpaRepository 确实返回了带有新 PK 的我的 bean，即使这不应该发生。

当然，最后整个事务被回滚，但我仍然不明白为什么 myBeanRepository.save(myBean) 会“吞下”异常并返回一个带有新 PK 的新 bean。

谢谢，

哈维

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T16:25:58.003

我认为这是因为当您在方法`Transactional`上有注释时`createMyBean`，事务仅在方法结束时完成。Hibernate session.flush() 仅在事务提交时调用，如果您没有显式调用它。所以插入语句实际上是在 2 之后对 DB 执行的，只有到那时你才会抛出异常。

# windows-phone - 如何获取 Windows 应用商店开发中心数据

> ID：13912624
> 
> 赞同：4
> 
> 时间：2012-12-17T10:47:08.140
> 
> 标签：windows-phone, windows-store-apps, marketplace, windows-dev-center

我想知道是否有办法获取开发人员在 windows phone 商店中发布的应用程序的详细信息。我主要寻找这些细节：应用下载、应用崩溃计数、用户评论、用户评分。

我有一个开发者帐户，想从开发中心为我自己提交的应用程序提取上述详细信息。商店不提供任何 REST API 来执行此操作。有没有简单的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-27T04:50:33.760

虽然这是一个老问题，但同时有一个更好的答案：Sinde 03/2016 开发中心现在提供了一个 REST api 来获取 Windows 存储统计信息。

> 今天，开发中心发布了 Windows 应用商店分析 API，它为你的 Windows 应用商店应用程序提供分析信息，而无需登录开发中心。使用 REST API，您可以检索在 Dev Center 中看到的关于应用和应用内购买获取、评级和评论以及应用运行状况的相同信息。这个新的 API 提供了对报告的快速访问，而无需登录开发中心、选择特定报告然后下载它们。如果您想向营销或财务部门提供快速应用信息，或使用您自己的工具（Excel、Power BI 等）对数据进行高级分析，这将特别有用。

[在https://blogs.windows.com/buildingapps/2016/03/01/windows-store-analytics-api-now-available/#l6dVkg8RyPRMxCjR.99](https://blogs.windows.com/buildingapps/2016/03/01/windows-store-analytics-api-now-available/#l6dVkg8RyPRMxCjR.99)阅读更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-29T18:36:17.183

这是 mu 当前对意大利的评级。可悲的是，这些人几乎不理解我的应用程序，因为我没有实现本地化。但无论如何，我认为这需要您登录您的 live/hotmail 帐户，这取决于您在 Windows Phone 开发中心使用的内容

[https://dev.windowsphone.com/en-us/ApplicationDetails/ReviewsForMarket?productId=ddc89efa-36f2-4ad1-9136-9daededc6835&selectedMarket=MX&translateLanguage=en](https://dev.windowsphone.com/en-us/ApplicationDetails/ReviewsForMarket?productId=ddc89efa-36f2-4ad1-9136-9daededc6835&selectedMarket=MX&translateLanguage=en)

* * *

**更新**
让我们分解一下

*   **productId** - 每个人都知道这是为了什么以及使用什么价值
*   **selectedMarket** - 您可以使用 US、PH、MX、RU（可能）、IT .. 之类的值
*   **translateLanguage** - en（用于英文翻译）

该 URL 以 HTML 数据响应，因此您必须将其解析出来，要么自己制作，要么我建议使用 HAP(HtmlAgilityPack)

您可以通过检查网络会话来获取更多数据。只需在 Chrome 或 IE 中按 F12，在 FF 中不确定（嘻嘻）

玩得开心！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T07:45:57.183

遗憾的是，您最好的选择是手动从开发中心拉下报告电子表格并自己处理所有内容（希望您喜欢 VBScript）。不幸的是，没有受支持的 API 可以直接从开发中心为您自己的帐户获取此数据，更不用说从其他人那里获取此类详细信息。

我知道有一些手机应用程序可以获取应用程序评论等信息，例如[AppTracker](http://www.windowsphone.com/s?appid=ceb1e261-9909-e011-9264-00237de2db9e)，但据我所知，这些应用程序使用页面抓取来获取数据，而不是使用更可靠的数据源。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T10:54:02.983

实际上有一种 API，我不确定您是否可以获得所需的所有详细信息，但有一些，您可能想检查一下

这是 Zune API，它将应用程序和音乐重新组合在这里是文档：http: //zunedata.codeplex.com/wikipage?title=API% [20Documentation](http://zunedata.codeplex.com/wikipage?title=API%20Documentation)

例如获取应用程序评级使用应用程序信息：http: //zunedata.codeplex.com/wikipage?title=Application [%20Information](http://zunedata.codeplex.com/wikipage?title=Application%20Information)

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-12-17T10:50:35.110

从仪表板你会看到你的应用程序，你会看到用户的快速统计和评论。

# c++ - 无论用户输入什么，C++ cin 都为整数返回 0

> ID：13912628
> 
> 赞同：0
> 
> 时间：2012-12-17T10:47:28.420
> 
> 标签：c++

无论 cin 它继续输出 0 的分数。这是为什么？我尝试返回“return 0;” 但还是不行：/

```
#include "stdafx.h"
#include <iostream>

using namespace std;

// Variables
int enemiesKilled;
const int KILLS = 150;
int score = enemiesKilled * KILLS; 

int main()
{
    cout << "How many enemies did you kill?" << endl;
    cin >> enemiesKilled;
    cout << "Your score: " << score << endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T10:48:43.977

您需要在用户输入他们的输入后执行乘法：

```
int main()
{
    cout << "How many enemies did you kill?" << endl;
    cin >> enemiesKilled;
    int score = enemiesKilled * KILLS;
    cout << "Your score: " << score << endl;
    return 0;
} 
```

在线查看：[ideone](http://ideone.com/Uzqw2Q)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T10:48:43.883

用户输入数字`score` *后*，您需要重新计算。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T10:50:03.347

```
cin >> enemiesKilled;
score = enemiesKilled * KILLS; // <-- Put the calculation here!!
cout << "Your score: " << score << endl; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T10:50:06.617

`int enemiesKilled;`程序启动时初始化为 0。

`int score = enemiesKilled * KILLS;`同时计算。因为`enemiesKilled`是0，所以也是0。

如其他答案所述，您需要`score`在运行时进行计算。

# c# - 当我使用滚动条时，表单上的图形会移动

> ID：13912631
> 
> 赞同：0
> 
> 时间：2012-12-17T10:47:33.997
> 
> 标签：c#, forms, scrollbar, point

我是新来的，但我会尽可能清楚地解释我的问题。我在带有垂直和水平滚动条的表单上放置红点，如果我将一个点放置在`(50,590)`并向右滚动，则该点会“跟随”移动。

我仍然无法发布图片，但我可以发布它们的链接，第一张图片是原始位置的点，第二张图片是我滚动到右 [点原始位置](http://i49.tinypic.com/24y4kxt.png)后 的[点，滚动后的点](http://i46.tinypic.com/17vdj6.png)

我希望这些点在滚动时保持其原始位置，实际上我无法理解，而他们还没有这样做。

这是代码

```
Bitmap MyBitmap = new Bitmap(3000,3000);

Graphics MyGraphicObject;

Brush red = new SolidBrush(Color.Red);

private void Form1_Paint(object sender, PaintEventArgs e)
{
     MyGraphicObject = e.Graphics;
     MyGraphicObject.DrawImage(MyBitmap, 0, 0, MyBitmap.Width, MyBitmap.Height);
     MyGraphicObject.Dispose(); 
}

private void Form1_MouseClick(object sender, MouseEventArgs e)
{
     MyGraphicObject = Graphics.FromImage(MyBitmap);
     MyGraphicObject.FillRectangle(red, e.X-2, e.Y-2, 4, 4);
} 
```

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:36:38.227

有一个名为“拖动时显示窗口内容”的内置 Windows 设置，默认情况下在所有现代版本的 Windows 上打开。这样做是让 Windows 在您滚动时自动移动具有滚动条的窗口的内容。并且只为以前不可见的窗口部分生成绘制请求。

这就是使它*看起来*像您的位图在移动的原因。您需要通过强制重新粉刷整个窗口来修复它，而不仅仅是它的一部分。将此代码粘贴到您的表单类中：

```
 protected override void OnScroll(ScrollEventArgs se) {
        base.OnScroll(se);
        this.Invalidate(false);
    } 
```

这将解决您的问题，您的位图现在重新绘制在同一位置。但是，并非没有从 Windows 设置中看到工件，一瞬间您会在滚动位置看到位图。视觉效果类似于看到你的位图在做 pogo。无法解决此问题，双缓冲无法解决此问题，并且您无法合理地关闭该设置。

顺便说一句，请修复代码中的错误，您不应该*处理*图形对象。你没有创造它。当您开始修补双缓冲时，这将在未来引起麻烦。删除该声明。

# iphone - 如何更改文本“应用程序想使用您当前的位置？”

> ID：13912634
> 
> 赞同：6
> 
> 时间：2012-12-17T10:47:35.707
> 
> 标签：iphone, ios, delegates, cllocationmanager, userlocation

我们可以更改此文本吗？

我已经使用`purpose`了`CLLocationManager`类的属性。但是消息没有改变。

```
[locationManager setPurpose:@"Change text message"]; 
```

有任何想法吗？

谢谢，

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-17T10:49:59.580

在您的 info.plist 中添加一个键，例如：`NSLocationUsageDescription`并添加您的字符串作为它的值。

**iOS 8 及更高版本**

[他们引入了除NSLocationUsageDescription](https://developer.apple.com/library/IOs/documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html#//apple_ref/doc/uid/TP40009251-SW27)之外的另外两个键

1.  [NSLocationAlwaysUsageDescription](https://developer.apple.com/library/IOs/documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html#//apple_ref/doc/uid/TP40009251-SW18)
2.  [NSLocationWhenInUseUsageDescription](https://developer.apple.com/library/IOs/documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html#//apple_ref/doc/uid/TP40009251-SW26)

**iOS 6 或更高版本**

> **NSLocationUsageDescription**
> 
> “隐私 - 位置使用说明”
> 
> 指定访问用户位置信息的原因。有关详细信息，请参阅“NSLocationUsageDescription”。
> 
> iOS 6.0 及更高版本

检查此[链接](https://developer.apple.com/library/ios/#documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html)以供参考

**iOS 3.2 到 iOS 5**

> **目的**
> 
> 应用程序提供的字符串，描述使用位置服务的原因。（在 iOS 6.0 中已弃用。）
> 
> `@property(copy, nonatomic)` `NSString *purpose Discussion`
> 
> 如果此属性不为 nil 并且系统需要征得用户同意才能使用位置服务，则显示提供的字符串。您可以使用此字符串来解释您的应用程序使用位置服务的原因。
> 
> **您必须在启动任何位置服务之前设置此属性的值。因为字符串最终会显示给用户，所以您应该始终从本地化的字符串文件中加载它。**
> 
> 可用性
> 
> ```
> Available in iOS 3.2 and later.
> Deprecated in iOS 6.0. 
> ```
> 
> 在 CLLocationManager.h 中声明

# php - 使用 DOMDocument 创建 XMLNode

> ID：13912635
> 
> 赞同：-2
> 
> 时间：2012-12-17T10:47:40.907
> 
> 标签：php, xml, domdocument

我正在尝试使用 PHP 创建 XML 文件。我可以创建普通节点，例如：

```
<node>
    <subnode>Value</subnode>
</node> 
```

但现在我想创建一个节点，其中包含节点名称中的信息，例如：

```
<node information="value">Value</node> 
```

如何使用 PHP 和 DOMDocument 做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T10:52:04.110

```
<?php

$domDocument = new DOMDocument('1.0', "UTF-8");
$domElement = $domDocument->createElement('field','some random data');
$domAttribute = $domDocument->createAttribute('name');

// Value for the created attribute
$domAttribute->value = 'attributevalue';

// Don't forget to append it to the element
$domElement->appendChild($domAttribute);

// Append it to the document itself
$domDocument->appendChild($domElement);

?>

Will output:
<?xml version="1.0" encoding="UTF-8"?>
<field name="attributevalue">some random data</field> 
```

# scala - 在 scala 中的集合上滑动（）

> ID：13912637
> 
> 赞同：0
> 
> 时间：2012-12-17T10:47:43.383
> 
> 标签：scala, scala-collections

> **可能重复：**
> [如果 n 小于大小，xs.sliding(n) 的行为不一致？](https://stackoverflow.com/questions/7958712/inconsistent-behaviour-for-xs-slidingn-if-n-is-less-than-size)

**编辑：我意识到这里描述的行为是滑动的预期行为；我在质疑为什么会这样。**

**[编辑2：这个问题](https://stackoverflow.com/questions/7958712/inconsistent-behaviour-for-xs-slidingn-if-n-is-less-than-size)的重复**

我在 scala 集合上使用了滑动功能，我对以下情况下的行为感到惊讶：

m.sliding(N)

其中 M 是 m.size，并且 M < N。

在这种情况下，您不会返回一个空迭代器，而是返回一个单元素迭代器，其中唯一的元素是输入：

```
scala> List( ).sliding( 2 ).size
res0: Int = 0
scala> List( 1 ).sliding( 2 ).size
res1: Int = 1 
```

例如，这是一个简单的函数，可以从 Pascal 三角形递归计算一行：

```
def row( num : Int ) : List[ Int ] =
{
    num match
    {
        case 0 => List( 1 )
        case x : Int => List( 1 ) ++ row( x - 1 ).sliding( 2 ).map( _.sum ) :+ 1
    }
} 
```

但这并不像预期的那样，因为上面讨论的行为：

```
scala> row( 1 )
res0: List[Int] = List(1, 1, 1) 
```

相反，我们必须包含一个额外的特殊情况：

```
def row2( num : Int ) : List[ Int ] =
{
    num match
    {
        case 0 => List( 1 )
        case 1 => List( 1, 1 )
        case x : Int => List( 1 ) ++ row2( x - 1 ).sliding( 2 ).map( _.sum ) :+ 1
    }
} 
```

这现在按预期工作。

有谁知道为什么滑动会这样？我要求一定长度的子集合对我来说似乎很奇怪，而在此处讨论的情况下，您会得到一个不同长度的集合！

# java - 骆驼：忽略模拟端点中的一些消息

> ID：13912644
> 
> 赞同：2
> 
> 时间：2012-12-17T10:48:15.367
> 
> 标签：java, mocking, apache-camel

我必须对向模拟端点发送 3 条消息的组件进行单元测试，但我只想测试第二条消息并忽略其他消息。我怎样才能做到这一点？我知道，将会有三个消息。我不在乎第一个和第三个...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T10:59:04.133

如[文档](http://camel.apache.org/mock.html)中所述，您可以使用`mock.message(1)`设置断言并对收到的第二条消息执行测试。

# asp.net - 更改内容页面的母版页时如何保留 ViewState？

> ID：13912645
> 
> 赞同：2
> 
> 时间：2012-12-17T10:48:22.087
> 
> 标签：asp.net, delphi-prism, oxygene

我为我的网站创建了两个母版页。一个用于正常使用，另一个用于打印。在我的*普通*母版页上，我有一个设置`Session['P']`为`'1'`. 在*打印*母版页上，我有另一个按钮设置`Session['P']`为`'0'`. 在我的 Global.asax.pas 中，我有以下代码来确定要使用哪个母版页：

```
method Global.page_PreInit(sender: System.Object; e: EventArgs);
begin
  var p: System.Web.UI.Page := System.Web.UI.Page(self.Context.Handler);
  if p <> nil then   
    if Session['P'].ToString = '1' then
      p.MasterPageFile := '~/Print.Master'
    else
      p.MasterPageFile := '~/Site.Master'; 
end; 
```

设置后`Session['P']`，我需要重新加载页面以使其主人更改。我需要保留所有控件的*视图状态*，因此不能使用`Response.Redirect()`. 我尝试使用`Server.Transfer(Request.Url.AbsolutePath, True);`，但它引发了以下异常。我该如何解决它？

> 无法加载视图状态。正在加载视图状态的控制树必须与在先前请求期间用于保存视图状态的控制树匹配。例如，当动态添加控件时，回发期间添加的控件必须与初始请求期间添加的控件的类型和位置相匹配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T10:58:49.653

恐怕没有解决方法 - 您在回发后更改视图状态的控件树。

您只能禁用母版页上控件的视图状态，即与两个母版页冲突的控件。

一般的想法是您禁用有问题的控件上的视图状态，或者您尝试在两个母版页上使用相同的控件，具有相同的 id。

# php - 在 MAMP PRO 上安装和启用 Xdebug

> ID：13912646
> 
> 赞同：4
> 
> 时间：2012-12-17T10:48:23.793
> 
> 标签：php, mamp, xdebug

我正在尝试在我的 MAMP PRO 安装上设置 Xdebug。我尝试使用 xdebug.org/wizard.php 来获得带有自定义安装说明的正确 Xdebug 版本，但我被卡住了。

根据[定制安装说明](http://i49.tinypic.com/33nvt5w.png)中的第 4 步，我应该得到以下输出：

```
Configuring for:
...
Zend Module Api No:      20100525
Zend Extension Api No:   220100525 
```

但我的输出如下：

```
Configuring for:
PHP Api Version:         20090626
Zend Module Api No:      20090626
Zend Extension Api No:   220090626 
```

接下来我尝试xdebug.org/docs/faq#custom-phpize[上的说明](http://i48.tinypic.com/1247v37.png)，因为量身定制的安装说明建议我这样做。

我通过删除 xdebug-2.2.1.tgz 和解压缩的文件夹来撤消第一步，然后再次从步骤 1 开始。我对第 4 步的输入是

```
/Applications/MAMP/bin/php/php5.4.4/bin/phpize 
```

输出如下：

```
grep: /Applications/MAMP/bin/php/php5.4.4/include/php/main/php.h: No such file or directory
grep: /Applications/MAMP/bin/php/php5.4.4/include/php/Zend/zend_modules.h: No such file or directory
grep: /Applications/MAMP/bin/php/php5.4.4/include/php/Zend/zend_extensions.h: No such file or directory
Configuring for:
PHP Api Version:        
Zend Module Api No:     
Zend Extension Api No: 
```

我的猜测是我需要安装 php.h、zend_modules.h 和 zend_extensions.h 但我在网上找不到它们。我如何才能最好地安装 Xdebug？

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-21T06:52:00.370

MAMP 的创建者尚未在 2.1.1 版本中发布通常的开源组件包，因此您必须执行以下操作。php.h、zend_modules.h 和 zend_extensions.h 可以在 PHP 5.4.4 的源代码中找到。以下是源代码页面的链接：http: [//us2.php.net/get/php-5.4.4.tar.gz/from/a/mirror](http://us2.php.net/get/php-5.4.4.tar.gz/from/a/mirror)

您需要提取它，并将文件夹移动到 /Applications/MAMP/bin/php/php5.4.4/include，如果需要，创建包含目录。我相信您还需要`./configure`从 /Applications/MAMP/bin/php/php5.4.4/include/php 中运行以生成 Zend 标头。然后，再次尝试您找到的说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T22:28:49.560

谢谢它对我有用。你必须跑

> 。/配置

和

> 制作

生成缺少的 zend 标头。

# android - 仅使用 Jackson 将超类字段序列化为 JSON

> ID：13912647
> 
> 赞同：4
> 
> 时间：2012-12-17T10:48:24.600
> 
> 标签：android, json, jackson

我正在用杰克逊序列化一个类的实例。仅序列化此实例超类的字段的最佳方法是什么？

目前我必须将 JSONIgnore 注释添加到我的子类中的每个方法，有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T05:17:27.687

假设您可以通过 直接控制序列化过程，您可以通过创建特定于您的超类的[ObjectWriter](http://fasterxml.github.com/jackson-databind/javadoc/2.0.0/com/fasterxml/jackson/databind/ObjectMapper.html#writerWithType%28java.lang.Class%29)`ObjectMapper`轻松完成此操作。这是一些说明这一点的示例代码。

```
public class Account implements Serializable {
    private String accountNumber;
    private String routingNumber;
    private BigDecimal balance;

    // Constructors, setters/getters
}

public class SavingsAccount extends Account {
    private BigDecimal savingsRate;

    // Constructors, setters/getters
}

final ObjectMapper mapper = new ObjectMapper();
final ObjectWriter writer = mapper.writerWithType(Account.class);
final ByteArrayOutputStream baos = new ByteArrayOutputStream(6400);
final SavingsAccount account = new SavingsAccount("0031-3402-2189",
    "0009835011203", BigDecimal.valueOf(53500),
     BigDecimal.valueOf(0.3));

writer.writeValue(baos, account);
final String results = new String(baos.toByteArray());
baos.close();

System.out.println(results); 
```

运行上面的代码说明 Jackson 编写了超类字段，即使运行时实例是子类类型。

```
{"accountNumber":"0031-3402-2189","routingNumber":"0009835011203","balance":53500} 
```

* * *

编辑：

> 谢谢，但就我而言，我尝试为几个类实现这种行为是我序列化的外部类的字段。我可以更一般地定义类型吗？

这种情况更容易处理。只需使用[@JsonSerialize](http://jackson.codehaus.org/1.9.9/javadoc/index.html?org/codehaus/jackson/annotate/JsonIgnore.html)注释外部类中的适当字段。如果将字段声明为超类类型，则将其设置`typing`为静态。这会将这些字段标记给 Jackson，以使用编译时类型而不是运行时类型进行序列化。

另一方面，如果将字段声明为子类类型，则将其设置`using`为超类。

以下示例使用我在上面进一步定义的类：

```
public class BankCustomer implements Serializable {
    @JsonSerialize(typing=Typing.STATIC)
    private Account cdAccount;

    @JsonSerialize(using=Account.class)
    private SavingsAccount savingsAccount;
} 
```

# r - 在 R 中编写一个带有两个变量的 for 循环

> ID：13912652
> 
> 赞同：0
> 
> 时间：2012-12-17T10:48:53.693
> 
> 标签：r

> **可能重复：**
> [迭代向量的笛卡尔积](https://stackoverflow.com/questions/12338092/iterate-over-cartesian-product-of-vectors)

有没有办法在 R 的同一个 for 循环中拥有两个不同的变量 i 和 j？

在 for 循环中，我有两个命令，一个引用从 1 到 80 的变量 i，另一个引用从 1 到 20 的 j。

有没有办法做到这一点？

这就是我想做的：

```
For i in 1:length(matrix$firstrow)

a<-subset(matrix1, matrix[,1]=i)

For j in 1:length(matrix2$secondrow)
b<-matrix2[j,2] 
```

所以我有两个矩阵和变量 i 和 j

# java - 通过 Web 打开邮件客户端 (Java - Spring)

> ID：13912654
> 
> 赞同：1
> 
> 时间：2012-12-17T10:48:54.480
> 
> 标签：java, jsp, email, client

我有一个使用 Java Server Pages 运行 Java 的网页。我让用户确定他想向哪些其他用户发送电子邮件，然后进入我的方法，检查他们的邮件地址。之后，我希望客户端邮件程序使用预先填写的标签（To、CC、BCC）打开。

目前我使用`Desktop.getDesktop().mail()`. 它在我的电脑上的测试服务器上运行良好，但在我们的网络服务器上却不行。它产生一个“空指针异常”（我猜在服务器上找不到邮件客户端）。

如果我只是将 mailto 作为函数的返回地址发送：`return mailto:jack-normal@abc.de?cc=abc@de.fe`，邮件客户端会被打开，但用户也会在网络浏览器中获得一个空白页面！不是我想要的安静。

我发现没有解决方案搜索 stackoverflow 以从 Web 打开 Web 客户端...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:01:41.173

你可以用一些 JavaScript 来做到这一点：

```
<html>
<head>
</head>
<body>
<a href="#" id="mailLink">Mail</a>
<script>
document.getElementById("mailLink").onclick = function() {
    window.location = "mailto:jack-normal@abc.de?cc=abc@de.fe";
}
</script>
</body>
</html> 
```

如果在这个阶段不知道地址，您可以重新加载同一页面并使用一些 jQuery 代码：

```
$(document).ready(function() {
    window.location = "mailto:jack-normal@abc.de?cc=abc@de.fe";
}); 
```

或者只是通过 AJAX 调用加载电子邮件地址：

```
$.ajax({
  url: "mail.data",
  cache: false
}).done(function( data ) {
  window.location = data;
}); 
```

# assembly - “gcc -S”不同于“objdump -D”

> ID：13912655
> 
> 赞同：1
> 
> 时间：2012-12-17T10:48:59.157
> 
> 标签：assembly, objdump

我写了一小段代码并编译它`gcc -S`以查看 ASM 输出：

```
...
movl    %esp, %ebp
.cfi_def_cfa_register 5
subl    $16, %esp
movl    $0, -4(%ebp)
... 
```

现在我希望在 Linux 上调用`objdump -D`(disassemble) 会导致一个等效的结构，但它看起来像：

```
80483b5:   89 e5                   mov    %esp,%ebp
80483b7:   83 ec 10                sub    $0x10,%esp
80483ba:   c7 45 fc 00 00 00 00    movl   $0x0,-0x4(%ebp) 
```

为什么我得到`mov`/`sub`而不是`movl`/ `subl`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T11:09:36.720

输出是等效的。/ `b`/`l`等。附加在指令末尾只是一种告诉读者正在操作的数据大小的方法。底层 x86 架构没有这种内部区分，因为大小可以从操作数中推断出来。大小是 AT&T 语法 'idiom'/sugar ，似乎在整个`gcc`工具链和`objdump`.`binutils`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-02T18:12:47.020

此外，来自的输出未链接，因此在来自已链接的输出时`gcc -S`不是可执行文件。`objdump.exe`

# java - Java 序列化难题

> ID：13912658
> 
> 赞同：0
> 
> 时间：2012-12-17T10:49:13.053
> 
> 标签：java, serialization

我在序列化方面遇到了一些问题

这是我将 mClassifier 对象写入文件的代码：

```
FileOutputStream fileOut = new FileOutputStream("C:\\polarity.model");
ObjectOutputStream objOut = new ObjectOutputStream(fileOut);
mClassifier.compileTo(objOut);
objOut.close(); 
```

它工作正常并将内容写入文件。

但是有一个问题：`myClassifier`object 是 type `DynamicLMClassifier`。`compileTo`然而，上面的方法返回一个 LMClassifier 的实例（超类）

这是我读取对象的代码：

```
FileInputStream in = new FileInputStream("C:\\polarity.model");
ObjectInputStream ois = new ObjectInputStream(in);
mClassifier = (DynamicLMClassifier)(ois.readObject());
ois.close(); 
```

当我读取对象时，我将其键入`DynamicLMClassifier`，它也可以正常工作，但我没有得到我想要的输出。再次读取对象时，不应该将其类型转换为`LMClassifier`而不是`DynamicLMClassifier`. 但是，如果我这样做，编译器会抱怨它应该是 type `DynamicLMClassifier`。

以上可能是问题还是我在其他地方做错了什么。我的意思是没有序列化的代码工作得很好，我得到了想要的输出，我的意思是当对象在内存中时。

编辑：这是完整的代码（只需删除`train()`and`getSentiments()`方法中的序列化部分，它就可以按预期工作），还要注意在（1）中我没有调用序列化`getSentiments()`，我只是在训练，即调用 train () 方法（ 2) 现在我在 (1) 之后有一个序列化模型，并且我没有通过仅在 main 中注释掉适当的代码来调用该`train()`方法：`getSentiment()`

```
public class PolarityBasic{

    File mPolarityDir;
    String[] mCategories;
    DynamicLMClassifier<NGramProcessLM> mClassifier,readClassifier;

    PolarityBasic(String[] args) {
        System.out.println("\nBASIC POLARITY DEMO");
        mPolarityDir = new File("C:\\review_polarity","txt_sentoken");
        System.out.println("\nData Directory=" + mPolarityDir);
        mCategories = mPolarityDir.list();
        int nGram = 8;
        mClassifier 
            = DynamicLMClassifier
            .createNGramProcess(mCategories,nGram);
   }

    void run() throws ClassNotFoundException, IOException {
        train();
   }

    boolean isTrainingFile(File file) {
        return file.getName().charAt(2) != '9';  // test on fold 9
    }

    void train() throws IOException {
        int numTrainingCases = 0;
        int numTrainingChars = 0;
        System.out.println("\nTraining.");
        for (int i = 0; i < mCategories.length; ++i) {
            String category = mCategories[i];
            Classification classification
                = new Classification(category);
            File file = new File(mPolarityDir,mCategories[i]);
            File[] trainFiles = file.listFiles();
            for (int j = 0; j < trainFiles.length; ++j) {
                File trainFile = trainFiles[j];
                if (isTrainingFile(trainFile)) {
                    ++numTrainingCases;
                    String review = Files.readFromFile(trainFile,"ISO-8859-1");
                    numTrainingChars += review.length();
                    Classified<CharSequence> classified
                        = new Classified<CharSequence>(review,classification);
                    mClassifier.handle(classified);

                }
            }
        }
        FileOutputStream fileOut = new FileOutputStream("C:\\review_polarity/polarity.model");
        ObjectOutputStream objOut = new ObjectOutputStream(fileOut);
        mClassifier.compileTo(objOut);
        objOut.close();
        System.out.println("  # Training Cases=" + numTrainingCases);
        System.out.println("  # Training Chars=" + numTrainingChars);
    }

    String getSentiment(String text) {
        try{
            FileInputStream in = new FileInputStream("C:\\review_polarity/polarity.model");
            ObjectInputStream ois = new ObjectInputStream(in);
            mClassifier = (DynamicLMClassifier)(ois.readObject());
            ois.close();
        }
        catch(Exception e){}
        Classification classification = null;
        classification = readClassifier.classify(text);
        System.out.println("classification:  " + classification);
        return (classification.bestCategory());
    }

    public static void main(String[] args) {
        try {
            PolarityBasic pB = new PolarityBasic(args);
            pB.run();
            String text = null;
            text = "It was awesome !";
           System.out.println("The text \"" + text + "\" is "
         + pB.getSentiment(text));
        } catch (Throwable t) {
            System.out.println("Thrown: " + t);
            t.printStackTrace(System.out);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T05:04:21.510

解决了这个问题。这是用于读取对象的代码（而不是问题中给出的代码）：

```
LMClassifier readClassifier;
FileInputStream in = new FileInputStream("C:\\polarity.model");
ObjectInputStream ois = new ObjectInputStream(in);
readClassifier = (LMClassifier)(ois.readObject());
ois.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T11:03:24.347

我不确定你`compileTo`的方法是做什么的，但我假设它使用 Java 序列化 API（例如，`writeObject()`）将对象写入流。

我也不完全确定你的问题是什么。如果`mClassifier`是静态类型`DynamicLMClassifier`，它是它的子类，`LMClassifier`那么很明显你不能`LMClassifier`为它分配一个类型的对象。因此，转换为`LMClassifier`应该产生编译器错误。

如果您只保留实例，`DynamicLMClassifier`那么您可以安全地类型转换为该类。

那么，你没有得到但渴望得到的结果是什么？

# linq - EF iQueryable Linq 不适用于十进制值比较

> ID：13912659
> 
> 赞同：0
> 
> 时间：2012-12-17T10:49:13.897
> 
> 标签：linq, entity-framework, iqueryable

我在 vs2012 中使用 EF 5。我正在使用 DataContext 并使用一些 linq 表达式在 Iqueryable 中进行搜索。我想搜索一个

```
var res= dbContext.Products.OrderBy(s => s.Id).AsQueryable();
if (startPrice > -1 && endPrice > -1 && (startPrice < endPrice))
{
     res = res.Where(s => (s.UnitPrice >= startPrice && s.UnitPrice <= endPrice));
}

var list= res.ToList(); 
```

这里 startPrice、endPrice、UnitPrice 都是十进制类型。我还使用此查询添加了几个条件。一切正常。但是这个比较（对于价格）返回一个空白的 json 数据。我尝试过使用 decimal.Compare() 方法，但没有运气。你能在这方面帮助我吗？我正在学习linq。但没有找到解决办法。如果可能的话给一些建议：在谷歌中搜索这种解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:20:18.793

这里我使用的是 Northwnd 示例数据库

```
 decimal? startPrice = Convert.ToDecimal(400.5100);
     decimal? endPrice = Convert.ToDecimal(500.5100);

    var res = NDC.Orders.OrderBy(s => s.OrderID).AsQueryable();                        
                if (startPrice > -1 && endPrice > -1 && (startPrice < endPrice))
                {
                    res = res.Where(s => (s.Freight >= startPrice && s.Freight <= endPrice));
                }

                var l = res.ToList();

     foreach (Order dcl in l)
                {
                    Response.Write(dcl.Freight.ToString());
                    Response.Write("<br/>");
                }

and result is
458.7800
477.9000
487.3800
411.8800
424.3000
487.5700
400.8100 
```

# c# - 如何使用 C# 在 Sql Server 2008 中存储用户定义的类对象？

> ID：13912661
> 
> 赞同：1
> 
> 时间：2012-12-17T10:49:24.243
> 
> 标签：c#, asp.net, sql-server, database, visual-studio-2010

> **可能重复：**
> [将字节 [] 从 C# 保存到 SQL Server 数据库中](https://stackoverflow.com/questions/4057748/save-byte-into-a-sql-server-database-from-c-sharp)

我有一个名为**LeaveDetails.cs的类**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace LeaveMgmt_14dec
{
    [Serializable]
    public class LeaveDetails
    {
        public string date;
        public string leave_type;
    }
} 
```

然后创建了 LeaveDetails 类的对象列表。

```
List<LeaveDetails> Details = new List<LeaveDetails>(); 
```

现在我将它序列化并存储在数据库中，即Microsoft SQL Server 2008。

```
BinaryFormatter bf = new BinaryFormatter();
            MemoryStream ms = new MemoryStream();
            bf.Serialize(ms, Details);

            //Saving to db
            SqlConnection con = new SqlConnection("Data Source=IND492\\SQLEXPRESS;Initial Catalog=LeaveMgmt;Integrated Security=True");
            {
                SqlCommand cmd = new SqlCommand("insert into LeaveDetailsTable values (@leave_details)", con);
                con.Open();
                byte[] bytes = new byte[ms.Length];
                ms.Write(bytes, 0, bytes.Length);
                cmd.Parameters.AddWithValue("@leave_details", bytes);

                cmd.ExecuteNonQuery();
            } 
```

现在我怀疑在数据库中存储时应该选择哪种数据类型？实际上我使用了表 LeaveDetailsTable(L_ID int , leave_details nvarchar(50))

但是从数据库中检索时显示错误

**System.InvalidCastException：无法将“System.String”类型的对象转换为“System.Byte []”类型。**

从数据库中检索的代码是：

```
SqlConnection con = new SqlConnection("Data Source=IND492\\SQLEXPRESS;Initial Catalog=LeaveMgmt;Integrated Security=True");
            {
                SqlCommand cmd = new SqlCommand("select leave_details from LeaveDetailsTable where L_ID=1", con);
                con.Open();
                byte[] bytes = (byte[])cmd.ExecuteScalar();

                BinaryFormatter bf = new BinaryFormatter();
                MemoryStream ms = new MemoryStream(bytes);
                ms.Position = 0;
                List<LeaveDetails> mc = (List<LeaveDetails>)bf.Deserialize(ms);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T10:53:15.057

好吧，您可以阅读，所以应该很明显，或者？

> System.InvalidCastException：无法将“System.String”类型的对象转换为“System.Byte []”类型。

序列化（标准，不是 XML / XAML）是二进制的。因此，varchar 不起作用。使用 varbinary。Varbinary 作为字节数组返回。

# java - 安卓到电脑蓝牙通讯

> ID：13912664
> 
> 赞同：-1
> 
> 时间：2012-12-17T10:49:42.660
> 
> 标签：java, android, bluetooth, client-server

我需要创建一个可以将 android 设备与 windows PC 配对的 android 应用程序，并且消息可以从 android 传递到 PC。我想使用 Java 创建它。关于如何实现客户端服务器应用程序以允许这种通信的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T10:56:47.633

您是否看过`BluetoothChat`Android Samples 中的示例？这提供了使用蓝牙的两个设备之间的通信。

# jakarta-ee - 无法验证 ProxyTicketValidator

> ID：13912665
> 
> 赞同：0
> 
> 时间：2012-12-17T10:49:47.437
> 
> 标签：jakarta-ee, cas

我目前正在为我的项目设置开发环境，但他们使用 CAS 进行中央身份验证，我对 CAS 非常陌生。我仍然可以看到开发环境的 cas 登录页面，它使用 ldap 服务器进行用户身份验证，但是当我单击登录按钮时，它会引发异常。我附加了为我使用的 ssl 连接配置 Jboss 的链接，但我仍然遇到同样的异常。请帮忙

[Jboss https配置](https://wiki.jasig.org/display/CASUM/HOWTO+Configure+JBoss+for+HTTPS)

```
2012-12-17 15:33:51,575 INFO  [STDOUT] 15:33:51,575 ERROR [CASReceipt] edu.yale.its.tp.cas.client.CASAuthenticationException: Unable to validate ProxyTicketValidator [[edu.yale.its.tp.cas.client.ProxyTicketValidator proxyList=[null] [edu.yale.its.tp.cas.client.ServiceTicketValidator casValidateUrl=[https://IN-HODPDT-0010.glenmark.com/cas/serviceValidate] ticket=[ST-1-KRWufbKdoPaes3pBNKeBJEE30gXjF2lIcTy-20] service=[http%3A%2F%2FIN-HODPDT-0010.glenmark.com%2Ftraveldesk%2Flogin%2Floginaction.do] renew=false]]]
2012-12-17 15:33:51,575 INFO  [STDOUT] 15:33:51,575 ERROR [CASFilter] edu.yale.its.tp.cas.client.CASAuthenticationException: Unable to validate ProxyTicketValidator [[edu.yale.its.tp.cas.client.ProxyTicketValidator proxyList=[null] [edu.yale.its.tp.cas.client.ServiceTicketValidator casValidateUrl=[https://IN-HODPDT-0010.glenmark.com/cas/serviceValidate] ticket=[ST-1-KRWufbKdoPaes3pBNKeBJEE30gXjF2lIcTy-20] service=[http%3A%2F%2FIN-HODPDT-0010.glenmark.com%2Ftraveldesk%2Flogin%2Floginaction.do] renew=false]]]
2012-12-17 15:33:51,575 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[localhost].[/traveldesk].[action]] Servlet.service() for servlet action threw exception
sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T08:45:20.987

看起来你的 CAS 服务器的 SSL 有问题。本指南可能会对您有所帮助：[https](https://wiki.jasig.org/display/CASUM/SSL+Troubleshooting+and+Reference+Guide) ://wiki.jasig.org/display/CASUM/SSL+Troubleshooting+and+Reference+Guide 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-17T10:14:30.087

你应该将你的 server.cer 导入你的客户端 JRE ！

```
keytool -import -trustcacerts -alias tomcat -keystore "%JAVA_HOME%/JRE/LIB/SECURITY/CACERTS" -storepass changeit -file c:\myserver.cer 
```

# java - 获取特定名称标签的值

> ID：13912675
> 
> 赞同：-1
> 
> 时间：2012-12-17T10:50:10.290
> 
> 标签：java, xml, dom, xpath

我有这个xml：

```
<ns0:data>
<ns0:row>
    <ns0:column>
        <ns0:name>F_DOCNUMBER</ns0:name>
        <ns0:value>617271</ns0:value>
    </ns0:column>
    <ns0:column>
        <ns0:name>DOCDATE</ns0:name>
        <ns0:value>15685</ns0:value>
    </ns0:column>
    <ns0:column>
        <ns0:name>DOCTYPE</ns0:name>
        <ns0:value>1,999,152</ns0:value>
    </ns0:column>
    <ns0:column>
        <ns0:name>INSUREDIDNUMBER</ns0:name>
        <ns0:value>310794763</ns0:value>
    </ns0:column>
    <ns0:column>
        <ns0:name>BATCHNAME</ns0:name>
        <ns0:value>L1000024831310001</ns0:value>
    </ns0:column>
</ns0:row>
<ns0:row>
    <ns0:column>
        <ns0:name>F_DOCNUMBER</ns0:name>
        <ns0:value>617284</ns0:value>
    </ns0:column>
    <ns0:column>
        <ns0:name>DOCDATE</ns0:name>
        <ns0:value>15685</ns0:value>
    </ns0:column>
    <ns0:column>
        <ns0:name>DOCTYPE</ns0:name>
        <ns0:value>1,999,403</ns0:value>
    </ns0:column>
    <ns0:column>
        <ns0:name>INSUREDIDNUMBER</ns0:name>
        <ns0:value>310794763</ns0:value>
    </ns0:column>
    <ns0:column>
        <ns0:name>BATCHNAME</ns0:name>
        <ns0:value>L1000024831320002</ns0:value>
    </ns0:column>
</ns0:row>
<ns0:row>
    <ns0:column>
        <ns0:name>F_DOCNUMBER</ns0:name>
        <ns0:value>617283</ns0:value>
    </ns0:column>
    <ns0:column>
        <ns0:name>DOCDATE</ns0:name>
        <ns0:value>15685</ns0:value>
    </ns0:column>
    <ns0:column>
        <ns0:name>DOCTYPE</ns0:name>
        <ns0:value>1,999,235</ns0:value>
    </ns0:column>
    <ns0:column>
        <ns0:name>INSUREDIDNUMBER</ns0:name>
        <ns0:value>310794763</ns0:value>
    </ns0:column>
    <ns0:column>
        <ns0:name>BATCHNAME</ns0:name>
        <ns0:value>L1000024831320001</ns0:value>
    </ns0:column>
</ns0:row>
</ns0:data> 
```

我需要获取名称为“DOCTYPE”的所有值标签。

稍后我需要检查并更改它们的值。

我怎样才能得到这个节点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:14:49.273

您可以使用`LINQ`to`XML`来获取所需的节点

```
XDocument doc = XDocument.Load("YourXmlFilePath");
XNamespace ns = "YourNameSpacegoesHere";

var query = from d in doc.Descendants(ns + "column")
            where d.Element(ns + "name").Value.ToString() == "DOCTYPE"                  
            select d; 
```

现在`query`有所有你需要的节点。

# python - 没有祖先的交易中的Python Google App Engine查询？

> ID：13912679
> 
> 赞同：1
> 
> 时间：2012-12-17T10:50:22.450
> 
> 标签：python, google-app-engine, transactions, implementation

好的，自从我从 SQL 迁移到 noSQL HDR 以来，我遇到了一个小实现问题。

我有一个名为 page 的模型：

```
class Page(db.Model):
    url = db.StringProperty(required=True)
    title = db.StringProperty()
    enable_login = db.BooleanProperty(required=True, default=True)
    owner = db.ReferenceProperty(Person, collection_name = 'pages')
    date_created = db.DateTimeProperty(auto_now_add=True)
    date_edited = db.DateTimeProperty(auto_now=True) 
```

每次用户注册时，都会创建一个带有**唯一**url 的页面，该 url 不用作 key_name，原因有几个，我愿意讨论。

交易内部：

```
unique_url=hashlib.md5(str(person.key())).hexdigest()
page = Page(key_name=unique_url,parent=person, owner=person, title="Home page", name=person.nick_name, url=unique_url) 
```

现在，当用户尝试更新他的页面 url 时，我的问题就出现了。用户只允许更改他的页面 url 一次。用户发布一个新的页面 url，然后服务器检查该 url 是否存在，如果不存在则更新用户页面。

由于我不想要任何重复的网址，因此再次在交易中：

```
def validate_page_properties(self, page):
  if not re.match("\A[A-Za-z]+\Z", page.url) or len(page.url) < 4 or len(page.url) > 20:
    return False
  page = Page.all().filter("url =",page.url).get() 
```

错误：

```
Only ancestor queries are allowed inside transactions. 
```

我怎样才能克服这个实现错误？

我尝试将 url 设置为 key_name，因为它是唯一的（强制执行的），但我仍然需要完整的密钥，因为每个页面的父级都是用户。我可以更改为没有父页面的页面，但这可能会在以后再次对我可能需要的事务造成问题。

有什么建议么？我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:14:52.343

首先，您应该了解[GAE 事务](https://developers.google.com/appengine/docs/python/datastore/transactions)以及[在事务中可以做什么](https://cloud.google.com/appengine/docs/standard/python/datastore/transactions#what_can_be_done_in_a_transaction)。

在您的情况下，您已经将一个人设置为页面的父级，因此您应该只在查询中设置：

```
 page = Page.all().ancestor(person).filter("url =",page.url).get() 
```

**更新：**您不能使用人员范围的事务，同时检查全局唯一的用户生成的字符串。要么你有一个字符串是个人唯一的（=废话），要么范围必须是全局的。您可以通过以下方式实现：

1.  使用全局父级 - 具有单个实体 UniqueUrlParent，它是所有用户提交的 Url 的父级。这将成为一个瓶颈，因为写入限制为每个实体组 5writes/s（您只有一个全局的）。
2.  使用 Urls 作为键 - 但你说你不想这样做。请详细说明为什么不呢？您可以使用某种两种方式的散列来不使这种人类可读。

# php - 根据多个日期显示内容

> ID：13912685
> 
> 赞同：0
> 
> 时间：2012-12-17T10:50:38.800
> 
> 标签：php, date

我正在为一家商店制作一个网站，该商店希望根据日期动态显示下一个营业日。我设法制作了一个这样做的脚本，但只测试一个日期。我想测试 10 个日期而不将它们放入数据库中。这是我的脚本。

```
<?

    $mydate = '2012-12-23';
    $curdate = date('Y-m-d');

    if($curdate == $mydate)
    {
        echo 'Vandaag';
    }
    elseif($curdate > $mydate)
    {
        echo '26 december';
    }
    elseif($curdate < $mydate)
    {
        echo '23 december';
    }
    else
    {
        echo 'Koopzondag niet ingeladen';
    }

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:12:06.810

也许这就是你正在寻找的：

```
<?php

$mydate = '2012-12-23';
echo date('d F', strtotime(getNextSunday($mydate)));

function getNextSunday($date) {
    $timestamp = strtotime($date);
    if (date('w', $timestamp) == 0) {
         $sunday = date('Y-m-d', $timestamp); // today
    }
    else {
        $sunday = date('Y-m-d', strtotime('next Sunday', $timestamp)); // next sunday
    }
    return $sunday;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T11:26:23.673

如果您有一个数组中的开放星期日列表（使用数据库时，整个事情会发生巨大变化，您可以使用数据库的日期功能），您可以这样做：

```
$opensundays = array("2012-12-23", "2012-12-30", "2012-01-06");
$today = date("Y-m-d");
$r = "";

foreach ($opensundays as $idx=>$sunday) {
    if ($today == $sunday) {
        $r = "today is an open Sunday";
        break;
    } elseif ($today > $opensundays[$idx-1] && $today < $sunday) {
        $r = "next open Sunday is at ".$sunday;
        break;
    }
} 
```

请注意，此代码没有边界检查，它只是为了展示一个概念。

# css - Safari（iPhone）浏览器中的 CSS 下拉错误

> ID：13912688
> 
> 赞同：0
> 
> 时间：2012-12-17T10:50:56.833
> 
> 标签：css, drop-down-menu

www.milknhny.co.uk/TestTheme

我刚刚看过这个，看来我的 CSS 下拉菜单在我的 iphone 上不起作用。

我没有在 CSS 中添加任何其他内容，并且对为什么这不起作用感到有些困惑。

请问我可以指出可能导致问题的原因吗？

谢谢克里斯蒂

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-20T19:27:56.547

我也有这个问题。我做了足够的研究以找到解决方案。

它不适用于 iPhone，因为移动 safari 不支持悬停（因为从技术上讲，您不能悬停在触摸屏上）。

解决方案是在标签`onmouseover=""`内添加：`<li>`

我认为这可以解决 HTML 中的任何悬停问题，但我还没有测试过。请参考此链接。这家伙值得所有的功劳。

例子：

```
<ul>
   <li onmouseover=""> </li>
</ul> 
```

[来源网址](http://www.cotsweb.com/blog/css-dropdown-menus-dont-work-on-iphones-ipads-275.html)

# c - 为什么我的 setenv() 调用不起作用？

> ID：13912691
> 
> 赞同：4
> 
> 时间：2012-12-17T10:51:04.393
> 
> 标签：c, bash

我编写了以下 C 代码将 env 变量设置为`\x09`. 但是当我使用时`echo $EGG | hexdump`，我看到它设置为`00`. 仅当第一个半字节为零时才会出现此问题。任何线索有什么问题？

```
char shellcode[] = "\x09";

main() {
    setenv("EGG", shellcode, 1);
    system("/bin/bash");

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T11:10:46.303

问题是字符`0x08, 0x09, 0x0a, 0x0b, 0x0c ...`被认为是空白字符并从变量值中剥离。如果您尝试设置`0x01`，它将在外壳中可见。

PS看起来变量*设置*为`\x09`但没有被shell回显：确实：

```
prev_sh_$ ./so2 
$ export IFS=" \n"
$ echo $EGG | hexdump
0000000 0a09                                   
0000002 
```

`0x0a`( `\n`) 由 shell 添加以在下一行打印值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T11:08:40.140

好吧，您的代码可以正常工作；）

`0x09`是 ASCII 码`tab`键。

所以`EGG`设置为`tab`key。当您打印它时，它实际上会打印`tab`您通常无法在控制台中识别的内容。

# java - 我可以在 JFrame 最大化时设置它的正常大小吗？

> ID：13912692
> 
> 赞同：8
> 
> 时间：2012-12-17T10:51:05.360
> 
> 标签：java, swing

**目标：**

我希望有一个在`Frame.MAXIMIZED_BOTH`状态下可见的框架，但我也希望它具有预定义的正常大小，因此当用户取消最大化它时，框架将调整为我想要的大小。而且我希望框架首先出现最大化，**而不需要视觉调整大小**。我希望框架**保持最大化**，直到用户取消最大化它。

**到目前为止我尝试过的事情：**

**1)**

```
frame.setExtendedState( Frame.MAXIMIZED_BOTH );
frame.setVisible( true );
frame.setSize( 500, 500 ); 
```

*评价：*框架会切换到正常状态（不会保持最大化）=>不好。

**2)**

```
frame.setSize( 500, 500 );
frame.setExtendedState( Frame.MAXIMIZED_BOTH );
frame.setVisible( true ); 
```

*评估：*窗口（或只是它的框架）将以 500x500 的大小出现，然后视觉调整大小（最大）将可见 => 不好。这样做的原因是，如果一个框架不可见，调用`setExtendedState()`将被推迟到该框架可见。

**3)**

```
frame.setSize( 500, 500 );
frame.setVisible( true );
frame.setExtendedState( Frame.MAXIMIZED_BOTH ); 
```

*评估：*就像在尝试#2 中一样，框架会有视觉上的调整大小 => 不好。

**4）** 我尝试将组件侦听器添加到覆盖框架`componentResize()`并在那里更改状态。我还尝试添加一个窗口状态侦听器覆盖`windowStateChange()`。我还尝试添加一个窗口侦听器覆盖`windowOpened()`。

*评估：*所有结果都导致视觉调整大小，就像尝试 #2 => 不好。

那么，如果我希望我的框架具有预定义的正常大小，但我希望它看起来最大化，我该怎么办？

编辑：将整个问题编辑得更清楚，并添加了示例代码（SSCCE）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T11:15:53.273

我不确定你的意思，所以我举了一个例子来说明我认为你想要什么。

基本上创建一个`JFrame`并`setExtendedState(JFrame.MAXIMIZED_BOTH)`在 5000 毫秒后将状态更改为`JFrame.NORMAL`没有闪烁。

```
import java.awt.Dimension;
import java.awt.event.ActionEvent;
import javax.swing.AbstractAction;
import javax.swing.JFrame;
import javax.swing.SwingUtilities;
import javax.swing.Timer;

public class Test {

    public Test() {
        initComponents();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Test();
            }
        });
    }

    private void initComponents() {
        final JFrame frame = new JFrame() {
            @Override
            public Dimension getPreferredSize() {//used for testing purposes so JFrame has a size
                return new Dimension(300, 300);
            }
        };
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        frame.pack();
        frame.setExtendedState(JFrame.MAXIMIZED_BOTH);
        frame.setVisible(true);

        new Timer(5000, new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                frame.setExtendedState(JFrame.NORMAL);
            }
        }).start();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T11:01:58.830

对我来说，以下订单有效

```
setSize(100,100);
setExtendedState(JFrame.MAXIMIZED_BOTH);
setVisible(true); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-15T17:11:34.560

在您的**#2**尝试中，您几乎可以回答。课堂上有`setMaximizedBounds()`方法`JFrame`。在`MAXIMIZED_BOTH`extendedState 集合上的frame 使用它来显示具体大小的frame 而不会闪烁。什么对我有用：

```
frame.setLocation(location);
frame.setSize( 500, 500 );
frame.setMaximizedBounds(calculateMaximizedBounds(frame))
frame.setExtendedState( Frame.MAXIMIZED_BOTH );
frame.setVisible( true ); 
```

`calculateMaximizedBounds()`根据当前帧位置和大小计算帧的最大化边界（感谢，KO！） - 如果 U 有 2 个以上的监视器，这是否重要，特别是如果它们具有不同的尺寸。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-13T04:47:52.127

```
this.addWindowStateListener(new WindowStateListener() {

        @Override
        public void windowStateChanged(WindowEvent e) {
                if (e.getNewState() == Frame.NORMAL) {
                    if (getSize().width == 0 || getSize().height == 0) {
                        setSize(500, 500);
                    }
                }
        }
    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-23T06:38:05.180

下面的代码对我有用。我使用了 Perzers 的 WindowEvent 侦听器的想法，但我检查了窗口状态是否从最大化更改，但没有最小化（因此在恢复程序后，恢复了完整的先前状态）：

```
 setExtendedState(JFrame.MAXIMIZED_BOTH);
    this.addWindowStateListener(new WindowStateListener() {
        @Override
        public void windowStateChanged(WindowEvent e) {
                // In Windows10 state 7 is returned if you minimize, usually ICONIFIED should mean the window is minimized, I used JDK1.6 on W10 (don't ask why)..
                if (e.getNewState() != JFrame.MAXIMIZED_BOTH && e.getNewState() != 7 && e.getNewState() != JFrame.ICONIFIED) {  
                    setSize(768, 500);
                }
        }
    });
    setVisible(true); 
```

我不确定状态 7 实际上是什么。

更新：在 W10 中使用 JDK1.8 - 这里的状态实际上应该是“JFrame.ICONIFIED”。状态 7 实际上是已弃用的“NE_RESIZE_CURSOR”。 [https://docs.oracle.com/javase/7/docs/api/constant-values.html#java.awt.Frame](https://docs.oracle.com/javase/7/docs/api/constant-values.html#java.awt.Frame)

# autosys - Autosys 命令列表和作业调度每半小时

> ID：13912694
> 
> 赞同：2
> 
> 时间：2012-12-17T10:51:09.743
> 
> 标签：autosys

我在哪里可以找到 Autosys JIL 的所有命令列表。什么是官方网站，我可以在其中获得带有示例的 Autosys 命令的完整列表？

例如，我想每周每半小时运行一次 shell 脚本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-03T09:20:41.920

用于**`start_mins`**指定运行作业的特定分钟数。

例如

```
insert_job: my-job-for-specific-mins
job_type: c
command: date
machine: my-host
permission: mx
n_retrys: 0
date_conditions: 1
days_of_week: mo,tu,we,th,fr
start_mins: "05,35"
description: "Test specific mins of hour"
std_out_file: /var/tmp/job-name.out
std_err_file: /var/tmp/job-name.out
alarm_if_fail: 1
timezone: London 
```

指定的作业将在每小时过去的 5 分钟和 35 分钟运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T05:38:28.387

将开始时间指定为 0、30，这意味着每 30 分钟和一周中的每一天，就像您希望作业每天运行一样

```
/* ----------------- template ----------------- */

insert_job: template job_type: c 
box_name: box1
command: ls -l
machine: localhost
owner: lyota01@TANT-A01
permission: gx,ge,wx,we,mx,me
date_conditions: 1
days_of_week: all
start_times: 0,30 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T12:50:11.773

链接到 Autosys jil 和其他命令功能的命令行列表 [http://supportconnectw.ca.com/public/autosys/infodocs/autosys_cheatsheet.asp](http://supportconnectw.ca.com/public/autosys/infodocs/autosys_cheatsheet.asp)

如需安排说明和培训课程，请在 support.ca.com 上向 CA 注册并提供您的站点许可信息。

# php - Facebook PHP SDK：获取网络中的人和朋友的朋友

> ID：13912699
> 
> 赞同：0
> 
> 时间：2012-12-17T10:51:21.047
> 
> 标签：php, facebook, facebook-graph-api

我在这里尝试做两件不同的事情。

1.  第一个是获取与登录用户共享网络的人的 Facebook 用户 ID 列表。鉴于网络是相当公开的，这在某种程度上可能吗？

2.  第二个是获取 Facebook 用户 ID 的列表，这些人与登录用户的一个朋友是朋友，类似于 AirBnB 在[此处](https://www.airbnb.co.uk/s?connected=true&new_search=true)所做的。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T10:55:48.973

不可能用 Facebook 图表做任何这些事情。如果他们允许，您可以访问的只是有关直接用户的信息。再做任何事情的能力将导致信息的滥用和 Facebook 周围的垃圾邮件大量增加。并不是说你会滥用这些信息，但有很多人会这样做。

# java - 在哪里可以找到 Java 语法的机器可消费文档？

> ID：13912703
> 
> 赞同：1
> 
> 时间：2012-12-17T10:51:29.517
> 
> 标签：java, syntax

我想知道是否已经有 Java 语法的机器可消费文档可用？

我知道 JLS 在其中一章中介绍了语法，但这并不是机器可以使用的，因为文字和规则由 pdf 中的不同字体设置表示。

[在Eclipse MoDisco 项目](http://www.eclipse.org/MoDisco/)中存在一个包含 Java-5 语法的机器可消费文档。不过，我也对其他 Java 版本的语法感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T10:58:22.877

[您可能会在此页面上](http://openjdk.java.net/projects/compiler-grammar/)找到有用的信息，尽管我不确定该项目的状态如何。

特别是，它指的是[JLS #18](http://docs.oracle.com/javase/specs/jls/se7/html/jls-18.html)，它“提出了 Java 编程语言的语法”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T10:58:58.147

如果您正在谈论不同解析器的语法文件

[这](http://mindprod.com/javacc/java1.4.jj)是 Java 1.4 的 JavaCC（Java Compiler Compiler）语法文件

[这](http://subversion.assembla.com/svn/GrammarTestGen/branches/Java1.5/Java15.g)是 Java 1.5 的 ANTLR 语法文件

# android - 使用库将 Android 项目从 IDEA 11 迁移到 DEA 12 失败

> ID：13912705
> 
> 赞同：2
> 
> 时间：2012-12-17T10:51:33.730
> 
> 标签：android, import, intellij-idea, libs

我有一个 Android 项目，我一直在使用 IDEA 11 进行工作，没有任何问题。切换到 IDEA 12 从我的 lib 文件夹中的 jar 导入类时，我遇到了一个奇怪的问题。包名称已解析，但类名称未解析。这是同一个项目的截图，左边是 IDEA 11，右边是 IDEA 12。[http://i.stack.imgur.com/e40l0.png](http://i.stack.imgur.com/e40l0.png)

如果我以 * 通配符导入结束导入并构建成功。两个 IDE 都使用相同的项目文件夹和文件，两个 IDE 都显示相同的项目设置，如此屏幕截图所示（左侧 IDEA 11，右侧 IDEA 12）。 [http://i.stack.imgur.com/E1YSi.jpg](http://i.stack.imgur.com/E1YSi.jpg)

有人知道发生了什么吗？我的环境是 OSX Mountain Lion，带有最新的 Android 开发工具包。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:20:16.690

如果编译器工作正常，但 IDEA 突出显示有错误的代码，这通常意味着 IDEA 内部缓存已损坏，应该失效。可以使用`File`| `Invalidate Caches`菜单。

# ios5 - iOS 5：使用 UITextView 中的属性字符串更改前景色

> ID：13912710
> 
> 赞同：1
> 
> 时间：2012-12-17T10:51:55.680
> 
> 标签：ios5, uitextview, core-text, nsattributedstring, catextlayer

此代码在 iOS 6 上运行良好

```
NSMutableAttributedString *attributedString = [[NSMutableAttributedString alloc] initWithString:textView.text];

[attributedString addAttribute:NSForegroundColorAttributeName value:[UIColor redColor] range:[textView.text rangeOfString:self.searchString options:NSCaseInsensitiveSearch range:searchRange]];

[textView setAttributedText:attributedString]; 
```

但是 NSForegroundColorAttributeName 在 iOS 5 中是未定义的，所以我想要在 iOS 5 中工作的与之前的代码等效的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T19:13:22.560

等效的方法是将 kCTForegroundColorAttributeName 与 CGColorRef 一起用于颜色。

在这里查看我的 CoreText 介绍：http: [//www.cocoanetics.com/2011/01/befriending-core-text/](http://www.cocoanetics.com/2011/01/befriending-core-text/)

# macos - 在 mac osx 上的 shell 脚本中设置标准输出缓冲区的大小

> ID：13912712
> 
> 赞同：2
> 
> 时间：2012-12-17T10:51:56.240
> 
> 标签：macos, shell, stdout, instruments

我在 mac 上运行仪器，我想将输出重定向到一个文件。

以下是我正在使用的命令：

```
instruments -t "$AUTOMATION_TEMPLATE" "${APP_UNDER_TEST}" -e UIASCRIPT "AppTests/Automation/iPhone/MemLeaksTest.js" >> ${INSTRUMENTS_LOG_FILE} 
```

现在，当我跟踪 ${INSTRUMENTS_LOG_FILE} 时，我可以看到日志的最后一部分被延迟到模拟器上的应用程序关闭为止。即当仪器退出时，只有日志才被放入日志文件中。

我想强制重定向的缓冲区大小为 0，即立即登录文件。

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:13:43.530

OSX 有[`unbuffer`](http://man.cx/unbuffer)或[`stdbuf`](http://man.cx/stdbuf)吗？

* * *

这是我的 Linux 系统上 /usr/bin/unbuffer 的内容。

```
#!/bin/sh
# -*- tcl -*-
# The next line is executed by /bin/sh, but not tcl \
exec tclsh "$0" ${1+"$@"}

package require Expect

# -*- tcl -*-
# Description: unbuffer stdout of a program
# Author: Don Libes, NIST

if {[string compare [lindex $argv 0] "-p"] == 0} {
    # pipeline
    set stty_init "-echo"
    eval [list spawn -noecho] [lrange $argv 1 end]
    close_on_eof -i $user_spawn_id 0
    interact {
    eof {
        # flush remaining output from child
        expect -timeout 1 -re .+
        return
    }
    }
} else {
    set stty_init "-opost"
    set timeout -1
    eval [list spawn -noecho] $argv
    expect
    exit [lindex [wait] 3]
} 
```

# java - 从 Java 中的属性文件创建具有嵌套字段的地图或对象

> ID：13912715
> 
> 赞同：1
> 
> 时间：2012-12-17T10:52:05.460
> 
> 标签：java, json, properties

我需要使用嵌套字段从属性文件创建 JSON？例如，我们有以下属性文件：

```
student.name="John"
student.exam.math=5
teacher.skills=10 
```

我需要输出以下 JSON 文件：

```
Properties : {
    student : {
        name : "John",
        exam : {
            math : 5
        }
    },
    teacher : {
       skills : 10
    }
} 
```

JSON 代码可以使用 FLEX-JSON 序列化器或 GSON 库生成，这不是问题。主要问题是解析属性并生成具有嵌套属性的 Java Object 或 Map。有没有图书馆允许这样做？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T11:11:15.713

AFAIK，没有知名的图书馆可以做到这一点。但是你可以用一种简单的方式做到这一点：

```
 public String propertiesToJson(Properties p) {
    Map tree = new LinkedHashMap();

    for (String name : p.stringPropertyNames()) {
        String[] parts = name.split("\\.");
        Map nextTree = tree;
        for (int i = 0, partsLength = parts.length; i < partsLength; i++) {
            String part = parts[i];
            Object v = nextTree.get(part);
            if (v == null) {
                if (i < partsLength - 1) {
                    Map newNextTree = new LinkedHashMap();
                    nextTree.put(part, newNextTree);
                    nextTree = newNextTree;
                } else {
                    nextTree.put(part, p.getProperty(name));
                }
            } else {
                if (i < partsLength - 1) {
                    nextTree = (Map) v;
                }
            }
        }
    }

    StringBuilder sb = new StringBuilder();
    sb.append("Properties : {\n");
    recursive(tree, sb, 1);
    sb.append("}");

    return sb.toString();
}

private void recursive(Map tree, StringBuilder sb, int deep) {
    boolean first = true;
    for (Object key : tree.keySet()) {
        if (!first) sb.append(",\n");
        else first = false;
        for (int t = 0; t < deep; t++) sb.append("\t");
        sb.append(key + " : ");
        Object v = tree.get(key);
        if (v instanceof Map) {
            sb.append("{\n");
            recursive((Map) v, sb, deep+1);
            for (int t = 0; t < deep; t++) sb.append("\t");
            sb.append("}");
        } else {
            sb.append(v);
        }
    }
    sb.append("\n");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-17T10:44:44.113

即使这篇文章较旧，一个非常简单的解决方案是使用`Jackson JavaPropsMapper`：

```
flatMessages = ...;
JavaPropsMapper mapper = new JavaPropsMapper();
Map ret = mapper.readPropertiesAs(flatMessages, HashMap.class); 
```

# wpf - 在析构函数中注销消息会出错（{“句柄未初始化。”}）

> ID：13912718
> 
> 赞同：1
> 
> 时间：2012-12-17T10:52:14.387
> 
> 标签：wpf, mvvm, wpf-controls, mvvm-light

有没有人像我一样遇到同样的错误：情况：-我在我的窗口应用程序中使用 MVVMLight v4：-我有一个窗口窗体：例如 mainform-在代码隐藏类（mainform.xaml.cs）中，我有一个构造函数和一个解构函数：

```
public mainform()
{
    Messenger.Default.Register<NotificationMessage>(
        this,
        msg =>
        {
           //// Do something
        }
}

~mainform()
{
    Messenger.Default.Unregister<NotificationMessage>(this);
} 
```

那些代码运行良好，但是当窗体关闭时，会抛出异常： System.InvalidOperationException {"Handle is not initialized."} Stacktrace：

```
 at System.WeakReference.set_Target(Object value)
   at System.Windows.Threading.Dispatcher.FromThread(Thread thread)
   at MS.Win32.HwndSubclass.SubclassWndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam)
   at MS.Win32.UnsafeNativeMethods.IntDestroyWindow(HandleRef hWnd)
   at MS.Win32.HwndWrapper.DestroyWindow(Object args)
   at MS.Win32.HwndWrapper.Dispose(Boolean disposing, Boolean isHwndBeingDestroyed)
   at MS.Win32.HwndWrapper.Finalize() 
```

当我删除解构器时，不会引发异常。＆当抛出异常时，我的视觉工作室也崩溃了->重新启动。

我寻找一些非常相似的问题，但没有明确的答案。对我有什么建议吗？

谢谢大家！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T11:36:53.077

析构函数是邪恶的。

如果你不释放一些非托管资源（这是非常罕见的），你真的不应该在 C# 中使用析构函数。在您的场景中采用的方法是引入或覆盖`Dispose`方法表单`IDisposable`接口并在那里取消注册。请注意，`Dispose`方法不会像析构函数那样自动调用。您需要确定代码中您认为`mainform`不再相关的位置并在那里调用它。如果它是派生类，那么您可以尝试在事件`Window`中删除您的处理程序。`OnClose`

另一方面，如果这确实是一个关闭的主窗口，然后应用程序也关闭了，那何必呢。

*如 Dtex MVVMLight 所述，可能会这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-27T16:36:16.440

如果您查看错误消息并复制错误 [以红色圈出]，您将获得有问题的 Sub 或 Function 以及导致错误的原因。

如果您查看我的消息，它位于 Sub libRP_AcctNo.clsFindAcctNo.Finalize() 中，而违规行是 System.Data.OleDb.OleDbConnection.Close。当我从 Finalize 中删除这些行时，错误神奇地消失了。

# c++ - 如何在 ORACLE DB 的结果集中返回空字符串（使用 sys_refcursor）

> ID：13912719
> 
> 赞同：1
> 
> 时间：2012-12-17T10:52:14.033
> 
> 标签：c++, oracle, occi

遇到问题后：

> ORA-32108: 未指定最大列或参数大小

我研究了一下，发现了这两个问题：[为什么 Oracle 9i 将空字符串视为 NULL？](https://stackoverflow.com/questions/203493/why-does-oracle-9i-treat-an-empty-string-as-null)和[Oracle 不区分空字符串和空字符串？](https://stackoverflow.com/questions/1268177/oracle-not-distinguishing-between-nulls-and-empty-strings).

* * *

这些问题解释了我得到的错误。但这让我想到了下一个问题——如何在 Oracle 的 ResultSet 中将空字符串作为字段值返回？

* * *

到目前为止，我所拥有的是：

*   创建语句
*   将输出参数注册为`oracle::occi::OCCICURSOR`
*   `execute`该声明
*   我调用`GetCursor`使用返回的结果集

由于`execute`上述错误，失败。

那么，如何在结果集中返回这样的字段，其值为空字符串（`''`）？

换句话说，我不知道如何应用[此处](http://ora-32108.ora-code.com/)指定的操作-它是服务器端的吗？或者我应该在我的代码中添加一些东西？或者在存储过程中，返回这个结果集？

* * *

我使用 OCCI（Oracle C++ 调用接口）。我当前的解决方法是返回一个包含单个空格 ( `' '`) 的字符串，但我不喜欢它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T11:42:12.437

如果您想返回一个完全为 NULL 的列，您可以使用[`CAST()`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions023.htm#SQLRF00613)，它将一种数据类型转换为另一种数据类型。

例如，以下将生成一个完全为空的列。

```
select a.*, cast(null as varchar2(1)) as null_column
  from my_table a 
```

但是，数据库现在知道这应该是 VARCHAR2(1) 的列，而如果您使用`null as null_column`，则没有指定最大长度。

# android - android中sqlite和json数组中的值不相等

> ID：13912724
> 
> 赞同：1
> 
> 时间：2012-12-17T10:52:36.913
> 
> 标签：android, json, sqlite

我正在尝试比较 sqlite 表中的值和 web 服务的 id 我到目前为止所做的是

```
 if(data_exist!=bookProduct.length()){
               Log.i("in update","m here");
               Cursor cursors = getRawEvents("select id from bcuk_book");
               try{  
                       for (int i = 0; i < bookProduct.length(); i++) 
                       {
                       JSONObject c = bookProduct.getJSONObject(i);
                       String Bid = c.getString(TAG_ID);
                       ArrayList<String> mapId = new ArrayList<String>();
                       while(cursors.moveToNext())
                       {
                           Log.e("cursors",cursors.getString(0));
                                 Log.i(Bid,Bid);
                                 if(cursors.getString(0)!=c.getString(TAG_ID)){
                                     Log.e("fas",Bid);
                                 }
                                 }
                                mapId.add(TAG_ID);
                                 Log.e(Bid,Bid);
                             }

                     } 
```

我的问题是我在日志中得到相同的值..

```
 if(cursors.getString(0)!=c.getString(TAG_ID)){ 
```

这种情况表示如果它们不相等，则打印日志。但问题是我正在进入该块，即使我从 sqlite 和 TAG_ID 即从 json webservice 获得相同的值。如何解决这个问题。我在哪里做错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:02:27.490

```
 if(!cursors.getString(0).equalsIgnoreCase(c.getString(TAG_ID))) 
```

这是字符串不是返回空值而是在它们之间返回“”

# python - Cython：内联函数不是纯 C

> ID：13912726
> 
> 赞同：9
> 
> 时间：2012-12-17T10:52:41.140
> 
> 标签：python, optimization, inline, cython

我有以下 Cython 的内联函数

```
cpdef inline int c_rate2recs_2(int maxNN,int idx):
  cdef int out=idx%maxNN
  return out 
```

然而，这转化为

```
/* 
 *   return out
 * 
 * cpdef inline int c_rate2recs_2(int maxNN,int idx):             # <<<<<<<<<<<<<<
 *   cdef int out=idx%maxNN
 *   return out
 */

static PyObject *__pyx_pw_6kmc_cy_5c_rate2recs_2(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static CYTHON_INLINE int __pyx_f_6kmc_cy_c_rate2recs_2(int __pyx_v_maxNN, int __pyx_v_idx, CYTHON_UNUSED int __pyx_skip_dispatch) {
  int __pyx_v_out;
  int __pyx_r;
  __Pyx_TraceDeclarations
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("c_rate2recs_2", 0);
  __Pyx_TraceCall("c_rate2recs_2", __pyx_f[0], 984);

/* 
 *   return out
 * 
 * cpdef inline int c_rate2recs_2(int maxNN,int idx):             # <<<<<<<<<<<<<<
 *   cdef int out=idx%maxNN
 *   return out
 */

static PyObject *__pyx_pf_6kmc_cy_4c_rate2recs_2(CYTHON_UNUSED PyObject *__pyx_self, int __pyx_v_maxNN, int __pyx_v_idx) {
  PyObject *__pyx_r = NULL;
  __Pyx_TraceDeclarations
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("c_rate2recs_2", 0);
  __Pyx_TraceCall("c_rate2recs_2", __pyx_f[0], 984);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = PyInt_FromLong(__pyx_f_6kmc_cy_c_rate2recs_2(__pyx_v_maxNN, __pyx_v_idx, 0)); if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 984; __pyx_clineno = __LINE__; goto __pyx_L1_error;}
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("kmc_cy.c_rate2recs_2", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_TraceReturn(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
} 
```

由于我是 cython 业务的新手，我想知道如何摆脱大多数 Python 命令（`cython -a`将此内联标记为与纯 C 相去甚远）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-15T10:59:06.540

> 由于我是 cython 业务的新手，我想知道如何摆脱大多数 python 命令（cython -a 将此内联标记为与纯 C 相去甚远）

诀窍是，如果你可以调用你的函数`nogil`；

```
cpdef inline int c_rate2recs_2(int maxNN,int idx) nogil:
  cdef int out=idx%maxNN
  return out 
```

那么你看到的任何黄色实际上通常都不是 Python 的。例如，它可能是错误情况，也可能只是其他类型的轻度检查。在 a 的情况下`cpdef`，不仅创建了一个纯 C 函数，还创建了一个 Python 别名，用于从 Python 范围内调用。这不会影响速度。

在这种情况下，针对手动内联循环的一些计时显示没有减速，并且删除`inline`对时间也没有任何作用。我想一个更难优化的案例可能会表现出不同的特征，但关键是要**剖析**.

[最后，可以通过使用编译器指令](http://docs.cython.org/src/reference/compilation.html#compiler-directives)来加速和删除一些错误检查。

# ajax - PrimeFaces 按钮导航操作

> ID：13912727
> 
> 赞同：2
> 
> 时间：2012-12-17T10:52:44.060
> 
> 标签：ajax, jsf, primefaces

我在通过按钮导航页面时遇到问题。

我当前的 xhtml 片段是这样的：

```
<p:layoutUnit position="west" size="200" header="Menü" resizable="true" closable="true" collapsible="true">
            <p:column>
                <p:commandButton type="button" value="New Project" icon="ui-icon-document" action="#{createProject.create()}"/>

                <p:commandButton type="button" value="All Projects" icon="ui-icon-folder-open"/>

                <p:commandButton type="button" value="Edit" icon="ui-icon-pencil"/>

                <p:commandButton type="button" value="Delete" icon="ui-icon-closethick"/>

                <p:separator />
                <p:commandButton type="button" title="Yazdır" icon="ui-icon-print"></p:commandButton>
            </p:column>

        </p:layoutUnit> 
```

在这里，当我单击新项目时，它不会导航到相关页面。

我的豆文件：

```
 @ManagedBean
@RequestScoped
public class CreateProject {
    /**
     * Creates a new instance of CreateProject
     */
    public String create() {
        return "newproject.xhtml";
    }
} 
```

单击按钮时如何导航用户？

编辑：这是我的面孔配置

```
 <faces-config
    version="2.0" xmlns="http://java.sun.com/xml/ns/javaee"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
    http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" >
    <managed-bean>
        <managed-bean-name>loginBean</managed-bean-name>
        <managed-bean-class>com.ibb.source.LoginBean</managed-bean-class>
        <managed-bean-scope>request</managed-bean-scope>
    </managed-bean>
    <managed-bean>
        <managed-bean-name>myProjects</managed-bean-name>
        <managed-bean-class>com.ibb.source.MyProjects</managed-bean-class>
        <managed-bean-scope>request</managed-bean-scope>
    </managed-bean>
    <managed-bean>
        <managed-bean-name>myCalendar</managed-bean-name>
        <managed-bean-class>com.ibb.source.MyCalendar</managed-bean-class>
        <managed-bean-scope>request</managed-bean-scope>
    </managed-bean>
    <navigation-rule>
        <from-view-id>/panel.xhtml</from-view-id>
        <navigation-case>
            <from-outcome>create</from-outcome>
            <to-view-id>newproject.xhtml</to-view-id>
        </navigation-case>
  </navigation-rule>
    <managed-bean>
        <managed-bean-name>createProject</managed-bean-name>
        <managed-bean-class>com.ibb.source.CreateProject</managed-bean-class>
        <managed-bean-scope>request</managed-bean-scope>
      </managed-bean>
        <managed-bean>
            <managed-bean-name>inPlaceEditor</managed-bean-name>
            <managed-bean-class>com.ibb.source.InPlaceEditor</managed-bean-class>
            <managed-bean-scope>request</managed-bean-scope>
        </managed-bean>
        <managed-bean>
            <managed-bean-name>projectsList</managed-bean-name>
            <managed-bean-class>com.ibb.source.ProjectsList</managed-bean-class>
            <managed-bean-scope>request</managed-bean-scope>
        </managed-bean>
        <navigation-rule>
           <from-view-id>panel.xhtml</from-view-id>
           <navigation-case>
               <from-outcome>newproject</from-outcome>
               <to-view-id>/newproject.xhtml</to-view-id>
           </navigation-case>
        </navigation-rule>
        <managed-bean>
            <managed-bean-name>allProjects</managed-bean-name>
            <managed-bean-class>com.ibb.source.AllProjects</managed-bean-class>
            <managed-bean-scope>request</managed-bean-scope>
        </managed-bean>
        <managed-bean>
            <managed-bean-name>allProjectsList</managed-bean-name>
            <managed-bean-class>com.ibb.source.AllProjectsList</managed-bean-class>
            <managed-bean-scope>request</managed-bean-scope>
        </managed-bean>
    </faces-config> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T12:23:17.197

这段代码：

```
type="button" 
```

使 commandbutton 成为一个简单的 javascript 触发器。如果你想在服务器上做任何事情，你必须删除 type="button"。此外，您在操作标签上定义的方法必须返回与您所需视图相对应的字符串，并且您不需要使用 xml 来定义导航。祝你今天过得愉快！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T11:37:10.673

默认情况下，`commandButton`PrimeFaces 的组件使用 ajax 发送命令，因此导航不起作用。将`ajax`属性设置为`false`：

```
<p:commandButton ajax="false" value="New Project" icon="ui-icon-document" action="#{createProject.create()}" /> 
```

还要确保您的按钮位于表单元素内。`<h:form> ... </h:form>`在整个`<p:layoutUnit>`标签周围放一个。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T10:57:28.293

添加到 faces-config.xml

```
<navigation-rule>
       <from-view-id>page1.xhtml</from-view-id>
       <navigation-case>
           <from-outcome>page2</from-outcome>
           <to-view-id>/newproject.xhtml</to-view-id>
       </navigation-case>
    </navigation-rule>

@ManagedBean
@RequestScoped
public class CreateProject {
    /**
     * Creates a new instance of CreateProject
     */
    public String create() {
        return "page2";
    }
}

 <p:commandButton type="button" value="New Project" icon="ui-icon-document" action="#{createProject.create}"/> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-09-27T15:31:03.967

我有同样的问题。我通过使用`button`而不是解决了它`commandButton`。请注意，`outcome`使用 代替`action`。

```
 <p:button ajax="false" value="New Project" icon="ui-icon-document" outcome="#{createProject.create}" /> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-17T11:10:33.573

要在按下 a 时执行操作`commandButton`，您需要更改：

```
<p:commandButton type="button" value="New Project" icon="ui-icon-document" action="#{createProject.create()}"/> 
```

到：

```
<p:commandButton type="button" value="New Project" icon="ui-icon-document" action="#{createProject.create}"/> 
```

没有“ `()`”

该方法返回的字符串可以是页面（如您的示例）或导航规则（faces-navigation）

# python - Python Sqlite3 获取 Sqlite 连接路径

> ID：13912731
> 
> 赞同：25
> 
> 时间：2012-12-17T10:52:58.757
> 
> 标签：python, sqlite

给定一个 sqlite3 连接对象，如何检索到 sqlite3 文件的文件路径？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-24T16:22:32.107

我们可以使用 PRAGMA database_list 命令。

```
cur = con.cursor()
cur.execute("PRAGMA database_list")
rows = cur.fetchall()

for row in rows:
    print(row[0], row[1], row[2]) 
```

第三个参数（row[2]）是数据库的文件名。请注意，可能有更多数据库附加到 SQLite 引擎。

```
$ ./list_dbs.py 
0 main /home/user/dbs/test.db
2 movies /home/user/dbs/movies.db 
```

以上是包含 Python 代码的脚本的示例输出。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-12-17T11:03:50.720

[Python 连接对象](http://github.com/python/cpython/blob/master/Modules/_sqlite/connection.c)不存储此信息。

您可以在打开连接之前存储路径：

```
path = '/path/to/database/file.db'
conn = sqlite3.connect(path) 
```

[`database_list`或者您可以使用pragma](https://www.sqlite.org/pragma.html#pragma_database_list)询问数据库本身它有哪些连接：

```
for id_, name, filename in conn.execute('PRAGMA database_list'):
    if name == 'main' and filename is not None:
        path = filename
        break 
```

如果您使用[连接 URI](https://www.sqlite.org/uri.html)（使用`sqlite3.connect()`参数连接`uri=True`），则文件名将不包含 URI 参数或`file://`前缀。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-06-20T15:59:59.887

参考 Martijn Pieters，除了硬编码是必须的，你应该这样做：

```
path = os.path.dirname(os.path.abspath(__file__))
db = os.path.join(path, 'file.db')

conn = sqlite3.connect(db) 
```

# string - 如何检查是否设置了环境变量？

> ID：13912733
> 
> 赞同：2
> 
> 时间：2012-12-17T10:53:04.657
> 
> 标签：string, perl, environment-variables

我在 perl 中有以下代码

```
my %Opt = 
  (
   boards_txt => "$ENV{'ARDUINO_DIR'}/hardware/arduino/boards.txt",
  ); 
```

在此您可以看到 env 变量`ARDUINO_DIR`是附加的。某些用户可能没有设置此变量。如果是这种情况，那么我想硬编码一条路径。

问题：如何检查 env 变量是否已设置？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T13:18:50.730

已经给出了正确的答案，但我想补充一点，您可以使用相当方便的[定义或](http://perldoc.perl.org/perlop.html#Logical-Defined-Or)赋值运算符`//=`：

```
my $dir = $ENV{'ARDUINO_DIR'};  
$dir //= "/other/path"; 
```

或者，正如[RobEarl](https://stackoverflow.com/users/1691146/robearl)在评论中指出的那样：

```
my $dir = $ENV{'ARDUINO_DIR'} // "/other/path"; 
```

这是逻辑等价的

```
my $dir;
if (defined $ENV{'ARDUINO_DIR'}) { 
    $dir = $ENV{'ARDUINO_DIR'};
} else {
    $dir = "/other/path";
} 
```

正如[mob](https://stackoverflow.com/users/168657/mob)指出的那样，defined-or 运算符需要 perl v5.10。对于那些还没有升级到那个版本的人，也可以使用`||`操作符：

```
my $dir = $ENV{'ARDUINO_DIR'} || "/other/path"; 
```

需要注意的是，这将覆盖被解释为假的值，在某些情况下可能被认为是正确的值，例如空字符串或零。但是，在这种情况下，`0`空字符串或空字符串不太可能是有效路径。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T10:56:47.787

您已经在使用`%ENV`哈希。它包含所有环境变量，因此您可以执行以下操作：

```
if (defined $ENV{'ARDUINO_DIR'}) { $prefix = $ENV{'ARDUINO_DIR'} }
else { $prefix = '/path/to/arduino/dir/' }

my $path_to_txt = $prefix . 'boards.txt'; 
```

我建议您`File::Spec`用于处理路径。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T10:56:19.737

您可以使用以下命令检查哈希键是否存在`exists`：

```
perl -le 'print "fnord!" if exists $ENV{"ARDUINO_DIR"}' 
```

# iphone - 在 UItableview 中显示 Plist 数据

> ID：13912735
> 
> 赞同：0
> 
> 时间：2012-12-17T10:53:11.410
> 
> 标签：iphone, ios, uitableview, plist

我有一个带有字典的 plist 和每个字典的字符串数。显示到下面的 url 中。这个项目列表在 plist 中有数千个。

我需要将这些 plist 数据显示到 UItableview

![进入图像](../Images/abd6d2b940e53d584d51ccca613191cb.png) .

这个怎么做？

我的代码：

```
- (void)viewWillAppear:(BOOL)animated
{
    // get paths from root direcory
    NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
                                                                 NSUserDomainMask, YES);
    NSString *documentsDirectory = [documentPaths objectAtIndex:0];
    NSString *documentPlistPath = [documentsDirectory stringByAppendingPathComponent:@"p.plist"];

    NSDictionary *dict = [NSDictionary dictionaryWithContentsOfFile:documentPlistPath];

    valueArray = [dict objectForKey:@"title"];

    self.mySections=[valueArray copy];
    NSLog(@"value array %@",self.mySections);

}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return [self.mySections count];
}

-(NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {

    NSString *key = [[self.mySections objectAtIndex:section]objectForKey:@"pass"];
    return [NSString stringWithFormat:@"%@", key];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [self.mySections count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier];
    }

    // Configure the cell...
    NSUInteger section = [indexPath section];
    NSUInteger row = [indexPath row];

    cell.textLabel.text = [[self.mySections objectAtIndex:row] objectForKey:@"title"];
    cell.detailTextLabel.text=[[self.mySections objectAtIndex:section] objectForKey:[allKeys objectAtIndex:1]];

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T10:58:24.013

你已经跑完了你的阵列。

这可能是因为您已将每个部分的行数硬编码为 5。除非每个部分中确实有 5 行，否则您应该在此处返回一个动态值。

# objective-c - 在没有 CoreTelephony 的情况下获取 iPhone 运营商

> ID：13912737
> 
> 赞同：0
> 
> 时间：2012-12-17T10:53:25.760
> 
> 标签：objective-c, ios, cocoa-touch, core-telephony, carrier

有没有办法在不使用 CoreTelephony 框架的情况下获得手机的运营商？（1.2Mb 对于我的情况来说太大了，无法获得运营商）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:42:03.093

使用 CoreTelephony 框架不应该增加你的文件大小，因为 CoreTelephony 框架是由操作系统提供的，它不会被编译到你的应用程序中。

如果编译[CoreTelephonyDemo](http://developer.apple.com/library/ios/#samplecode/CoreTelephonyDemo/Introduction/Intro.html)，应用程序大小约为 60KB。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T12:11:22.577

如果您的用例只是检索 iPhone 的运营商信息，请使用Apple 提供的[CoreTelephony](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Reference/CoreTelephonyFrameworkReference/_index.html)框架。它不会增加您的应用程序大小。

# javascript - SoundManager 2 之类的库，没有用于手机的闪存？

> ID：13912748
> 
> 赞同：1
> 
> 时间：2012-12-17T10:54:10.723
> 
> 标签：javascript, jquery, html, mobile, soundmanager2

我正在为手机开发 HTML5 游戏。声音有时会起作用，有时会消失。你对像 SoundManager 2 这样的库有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T12:00:52.217

要将 HTML5 与 SoundManager 一起使用，只需添加以下设置：

```
useHTML5Audio: true,
preferFlash: true, 
```

这将始终使用 HTML5 over flash，并且适用于 iOS 产品。

[http://www.ibm.com/developerworks/library/wa-ioshtml5/index.html](http://www.ibm.com/developerworks/library/wa-ioshtml5/index.html)

这应该有助于 ios 产品中的 HTML5。Android 可以有 flash，所以正常的 SoundManager 应该可以在那里工作。

只要您的声音是 mp3，wav 或 acc safari 就应该可以正常播放，所以如果您使用 soundmanager2 的调试版本并在声音不起作用时发布您收到的错误，这将有所帮助，因为它很可能是单独的可以在没有不同音频库的情况下解决的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-09T10:15:18.987

有[http://zohararad.github.io/audio5js/](http://zohararad.github.io/audio5js/)这是一个更简单的 SoundManager 替代方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T10:57:10.847

您可以查看[HTML5 Audio API](http://www.w3.org/TR/webaudio/#APIOverview)。不过我不得不说，目前支持很少，所以一定要检查是否支持 iOS 上的 Safari。

# sql - 使用带有存储过程的 Sql Server OPENROWSET

ID：13912750

赞同：0

时间：2012-12-17T10:54:18.037

标签：sql, sql-server, excel, stored-procedures, openrowset

# matlab - Matlab 2012b 桌面 - 重新激活旧的“复古风格”桌面？

> ID：13912751
> 
> 赞同：3
> 
> 时间：2012-12-17T10:54:33.030
> 
> 标签：matlab

这显然有可能最终引发一场激烈的战争，但无论如何，我试一试......（到目前为止）还没有任何**明确**的答案。

在我的一台机器上，我确实被切换/升级到了 Matlab 2012b。这是一个新的漂亮闪亮的桌面，好的。但我非常习惯旧的蹩脚的，原因有很多。你们有没有人找到一种特定的方法（选项，破解配置文件，等等）来重新获得旧的 Matlab 桌面 - 主要是旧的菜单（文件，编辑，...）和编辑器窗口的按钮（调试的东西，就像执行一个单元格）？

**编辑（1）**：图形窗口的界面还是和以前一样，有菜单等，不管它是否停靠。这很有趣，那里还有一部分旧桌面......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T15:38:22.183

我不确定您想要什么“旧版本”-您可以使用非常稀疏的方式启动 MATLAB

matlab -nojvm -nodesktop

在 Windows 和 Linux 中。-nojvm 命令禁用了很多你可能想要的东西，所以

matlab -nodesktop

可能是最简单的中间立场，除非您的 JVM 适合您。注意：这是一个非常非常稀疏的 UI。我认为他们曾经在 Mathworks 上称其为“Cleve 模式”（http://en.wikipedia.org/wiki/Cleve_Moler）

但是您可能想要一个比这给您的版本更新的版本；你想要什么具体的命令？正如上面其他人所提到的，例如，执行一个单元格不应该通过点击来完成。它现在是一个很棒的键盘快捷键 - “ctrl-enter”；真的没有理由再点击“功能区”或“菜单”了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T16:41:53.040

有很多很好的评论建议替代您最初提出的问题，但对您的问题的直接回答是否定的 - 据我所知，不可能恢复旧桌面。

# jquery - 鼠标悬停在 Google 地图中的自定义叠加层上

> ID：13912754
> 
> 赞同：2
> 
> 时间：2012-12-17T10:54:58.163
> 
> 标签：jquery, events, google-maps-api-3, custom-overlay

是否可以在 Google 地图（API v3）中的自定义叠加层上监听鼠标悬停事件？一个简单的例子：

```
function HWPMarker(map, coords, text) { […] }
HWPMarker.prototype = new google.maps.OverlayView();
HWPMarker.prototype.draw = function() { […] }

HWPMarker.prototype.onAdd = function() {

  $(this.getPanes().overlayLayer).append(this.marker); // this.marker is a div

  // THIS IS WHERE I TRY TO LISTEN TO THE MOUSEOVER EVENT
  google.maps.event.addListener(this, 'mouseover', function(){ alert('mouseover') });

} 
```

难道我做错了什么？还是无法在自定义叠加层上监听鼠标悬停？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T11:13:40.463

[这个答案](https://stackoverflow.com/a/7414594/548460)指出 Maps API v3 不再接受鼠标事件。所以我们要做的就是将 DOM 元素添加到`overlayMouseTarget`并使用 Google Maps DOM 侦听器。这是它的工作原理：

```
HWPMarker.prototype.onAdd = function() {
  this.getPanes().overlayMouseTarget.appendChild(this.marker); // this.marker = my dom el
  google.maps.event.addDomListener(this.marker, 'mouseover', function(){ alert('mouseover') });
} 
```

# css - 如何在 SCSS 中实现 OOCSS 的间距模块？

> ID：13912756
> 
> 赞同：1
> 
> 时间：2012-12-17T10:55:00.050
> 
> 标签：css, sass, mixins

我有一个基于 SCSS 的布局，我想在其中使用[OOCSS 的间距模块](https://github.com/stubbornella/oocss/blob/master/core/spacing/space.css)。

OOCSS 模块是纯 CSS -`ptl`例如，代表`padding-top: large`，其中 large 是定义的值（默认为 20px）。

我想用 SCSS 来增强它。到目前为止，我已经能够用 SCSS 变量替换固定值，所以如果我想（我不想）可以在一个地方更改值：

```
$spacing-small: 5px;
$spacing-medium: 10px;
$spacing-large: 20px;
...
.pts,.pvs,.pas{padding-top:$spacing-small !important} 
```

现在我希望能够使用`ptn`,`pvs`等作为 mixins，所以我可以这样做：

```
.client-name {
  @include spacing-pvs; // this has the same padding properties as pvs
} 
```

我的语法很灵活，但这是我感兴趣的功能。

我能想到的唯一方法是手动定义每个 mixin：

```
@mixin spacing-pvs {
  padding-top: $spacing-small !important;
  padding-bottom: $spacing-small !important;
}
.pvs { @include spacing-pvs; } 
```

但是大约有 56 种样式/混合。像这样单独做每一个都很难编写和维护。

在 SASS/SCSS 中有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T14:00:23.110

最有效的 mixin 是这样的（你需要一个类似的 mixin 来填充，或者添加一个额外的参数来在边距/填充之间切换）：

```
@mixin marginify($t: null, $r: null, $b: null, $l: null) {
    margin-top: $t;
    margin-right: $r;
    margin-bottom: $b;
    margin-left: $l;
}

.test {
    @include marginify($t: 10px, $b: 10px);
    color: green;
} 
```

这会产生：

```
.test {
  margin-top: 10px;
  margin-bottom: 10px;
  color: green;
} 
```

（`null`在 Sass 3.2+ 中可用）在这里发挥了它的魔力：如果一个变量是`null`，那么它不会为它生成一个属性。但是，你必须放弃使用`!important`（大多数人会争辩说你应该只将它作为最后的手段使用）。依赖这个 mixin 会带来一些臃肿，因为速记形式总是在速记 ( `margin: 10px 0`) 上使用，所以你需要负责任地使用它，或者编写一个更强大的 mixin，如果合适的话，它会生成速记。

也就是说，为此目的使用 mixin（添加边距）确实会降低代码的可读性。在我查看整个源代码之前，这些名称毫无意义。关于 vanilla CSS 的可读性有很多话要说。`marginify`mixin 并不是像 a`clearfix`或mixin 那样真正可重用的模式`inline-menu`：编写 mixin 不仅仅是为了节省击键次数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T17:31:41.863

我最终根本没有使用 mixins。相反，我保留了 CSS 规则的原样，并使用了这个文档较少的功能，称为[`@extend`](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#extend). 看哪！：

```
.client-name {
  @extend .pvs; // this has the same padding properties as .pvs
} 
```

# c# - 有没有更好的方法来根据日期过滤邮件？

> ID：13912758
> 
> 赞同：1
> 
> 时间：2012-12-17T10:55:05.277
> 
> 标签：c#, outlook-2010

好吧，我遇到了一个问题。

我正在使用 MS Outlook API 使用 C# 从收到的电子邮件中生成一些基于 excel 的报告。

现在最初当我开始这个时，没关系，因为文件夹中的电子邮件数量少了一点。现在几天后，这个数字已经达到了数千。

```
 Application app = null;
            _NameSpace ns = null;
            MailItem item = null;
            MAPIFolder inboxFolder = null;
            MAPIFolder subFolder = null;

            DateTime MyDateTime;
            MyDateTime = new DateTime();
            MyDateTime = DateTime.ParseExact(dateFilter, "yyyy-MM-dd HH:mm tt", null);

            try
            {
                app = new Application();
                ns = app.GetNamespace("MAPI");
                ns.Logon(null, null, false, false);

                inboxFolder = ns.GetDefaultFolder(Microsoft.Office.Interop.Outlook.OlDefaultFolders.olFolderInbox);
                subFolder = inboxFolder.Folders["Alerts"];

                for (int i = 1; i <= subFolder.Items.Count; i++)
                {
                    item = (Microsoft.Office.Interop.Outlook.MailItem)subFolder.Items[i];

                    string subject = item.Subject;
                    DateTime sent = item.SentOn;

                    if (item.SentOn > MyDateTime && item.SentOn < MyDateTime.AddDays(1))
{//Do some logging
}} 
```

现在上面代码的问题是它从收到的最后一封电子邮件开始搜索。这导致它增加了到达“过滤器”所需的时间。

我需要改进我的代码的建议（如果有的话）。

谢谢你把我读出来。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T13:10:21.950

在循环之前，从通过 Restrict 方法过滤的 subFolder 中获取一组项目。*您可以在您使用的过滤器*字符串中使用您的日期范围（我没有在这里写它，因为我无法测试它并且不想误导您 - 搜索应该提供大量示例）。然后只需循环/迭代结果集合，该集合应该只包含您需要的项目。

```
Microsoft.Office.Interop.Outlook.Items restrictedItems = subFolder.Items.Restrict("*filter*");

for (int i = 1; i <= restrictedItems.Count; i++)... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-11T14:34:07.790

这就是我过滤 Outlook 约会的方式。对于邮件，您需要 .olFolderInbox 而不是 .olFolderCalendar。

[https://docs.microsoft.com/en-us/dotnet/api/microsoft.office.interop.outlook._items.restrict?view=outlook-pia](https://docs.microsoft.com/en-us/dotnet/api/microsoft.office.interop.outlook._items.restrict?view=outlook-pia)

```
 Microsoft.Office.Interop.Outlook.Application oApp = new Microsoft.Office.Interop.Outlook.Application();
        NameSpace mapiNamespace = oApp.GetNamespace("MAPI");
        MAPIFolder calendarFolder = mapiNamespace.GetDefaultFolder(OlDefaultFolders.olFolderCalendar);

        DateTime filterDate = DateTime.Now;
        string filterDateString = filterDate.Day + "/" + filterDate.Month + "/" + filterDate.Year + " 1:00am";
        string filter = "[CreationTime] > '" + string.Format(filterDateString, "ddddd h:nn AMPM") + "'";
        Items outlookCalendarItems = calendarFolder.Items.Restrict(filter);

        foreach (AppointmentItem item in outlookCalendarItems)
        {
           // Here I write to our database
        } 
```

# jquery - slideToggle jquery - 全部关闭

> ID：13912759
> 
> 赞同：0
> 
> 时间：2012-12-17T10:55:05.373
> 
> 标签：jquery

我正在使用 slidetoggle (http://api.jquery.com/slideToggle/) 来扩展/收缩列表中的 div - 我想在打开另一个链接之前关闭所有的 div，所以任何时候只有一个 div 是打开的 -这可能吗？

我目前只是在点击时切换单个 div -

```
 $(this).find(".listContentN").slideToggle(500); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:48:07.023

这很容易，但为什么你不在父选择器上定义它：

```
$(".ELEMENT .listContentN").click(function(){
   $(this).parent().find(".listContentN").slideToggle(500);
   $(this).slideToggle(500);
}); 
```

# jquery - Rails 应 ajax 请求关闭 fancybox

> ID：13912763
> 
> 赞同：1
> 
> 时间：2012-12-17T10:55:25.010
> 
> 标签：jquery, ruby-on-rails, ajax, fancybox

我一直在尝试很多东西，但我无法解决这个问题。首先，我在花式框中有一个部分表单。

这是：*_form.html.erb*

```
 <%= form_tag sessions_path , remote:true , id: "login_form" do %>
 <div class="field">
  <%= label_tag :email %>
  <%= text_field_tag :email, params[:email] %>
 </div>
 <div class="field">
  <%= label_tag :password %>
  <%= password_field_tag :password %>
 </div>
  <div class="actions"><%= submit_tag "Inloggen" %></div>
 <% end %> 
```

我使用 application.js 中的 jQuery 函数在此表单中发布数据

```
jQuery('#login_button').fancybox({
  type: 'ajax'
})

jQuery('#login_form').submit(function() {  
    var data = jQuery(this).serialize();

        $.getJSON('sessions/new.js?callback=?&variable=loginData', { 
        loginData: data 
        }, function(data) {

            if(data == 0){
                alert('Your account is not activated yet');
            }
            if(data == 1){
                alert('Password incorrect');
            }
            // login correct
            if(data == 2){
                 //$.fancybox.close();
                 window.parent.jQuery.fn.fancybox.close();
            } 
        });

    return false;
}); 
```

问题是当我在幻想箱中时我没有得到任何反馈。如果我检查控制台是否有 XHR 请求，它会发送数据并且我会得到适当的响应，但 fancybox 不会关闭并且我没有收到任何警报。

最后但并非最不重要的是我的会话控制器

```
 def create
@user = User.find_by_email(params[:email])

#if there is a user with that e-mail, is it activated?
if @user
  if @user.user_level != '1' 
    @response = 1
  end
end

#check the login information with has_secure_password, user has to be activated
if @user && @user.authenticate(params[:password]) && @user.user_level == '1'
  session[:user_id] = @user.id
  @response = 2
else
  @response = 0
end

respond_to do |format|
  format.json { render :json => @response }
end 
```

如果响应等于 2，我如何关闭花式框？以及我如何向用户展示他们的输入在幻想框内不正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:45:17.213

```
respond_to do |format|
  format.js do
    if @response == 2
      render :js => "$('#fancybox-content').remove();"
    end
  end
end 
```

或者创建 create.js.erb：

```
# controller
respond_to do |format|
  format.js { }
end

# create.js.erb

<% if @response == 2 %>
  $('#fancybox-content').remove();
<% end %> 
```

这是一种基本方法。如果您在创建失败时想要其他行为，请扩展您的代码。

# jquery - jQuery toggleClass 没有按预期工作

> ID：13912764
> 
> 赞同：0
> 
> 时间：2012-12-17T10:55:26.853
> 
> 标签：jquery, toggleclass

以下 toggleClass 不起作用：

```
 $nav_item = $ ('.active_wrapper, .main_nav div.arrow_up_img, .main_nav div.arrow_down_img'),
    $arrow_down = $ ('.main_nav div.arrow_down_img'),
    $arrow_up = $ ('main_nav div.arrow_up_img');

    $('.active_wrapper').click(function(e){
        e.preventDefault();
        $('.main_nav div').not($nav_item).slideToggle('slow', function(){
            $(arrow_down).toggleClass($arrow_up);
        });

    }); 
```

HTML

```
 <nav class="main_nav">
            <div class="active_wrapper"><a href="#">Home</a>
                <div class="arrow_down_img"></div>
            </div>
            <div><a href="about.php">About Us</a></div> 
            <div><a href="flavours.php">Flavours</a></div>
            <div><a href="stockists.php">Stockists</a></div>
            <div><a href="thecollective.php">The collective</a></div>
            <div><a href="shop.php">Shop</a></div>
        </nav> 
```

toggleClass 用于在 2 个箭头之间交换一个向上和一个向下（您可以想象这是一个下拉菜单），但我真的不知道为什么它不起作用..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:00:36.710

正确的代码是 `$arrow_down.toggleClass('arrow_up_img');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T11:04:55.383

```
 nav_item = $ ('.active_wrapper, .main_nav div.arrow_up_img, .main_nav div.arrow_down_img');
   arrow_down = $ ('.main_nav div.arrow_down_img');//missing semi colon
   arrow_up = $('main_nav div.arrow_up_img');//missing semi colon

$('.active_wrapper').click(function(e){
    e.preventDefault();
    $('.main_nav div').not(nav_item).slideToggle('slow', function(){
        arrow_down.toggleClass(arrow_up);//Invalid Object assignment
    });

});​ 
```

[工作演示](http://jsfiddle.net/4QCHF/2/)

# mongodb - 如何从 MongoDB shell 连接到副本集？

> ID：13912765
> 
> 赞同：78
> 
> 时间：2012-12-17T10:55:30.040
> 
> 标签：mongodb, mongo-shell

如果我正在编写一个连接到 mongodb 的应用程序，那么我可以为副本集提供一个种子列表，驱动程序会将我引导到主节点，我可以在其中运行写入命令。

如何为命令行`mongo`shell 指定种子列表以连接到副本集。

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2015-02-23T14:04:48.393

要连接到副本集 Primary，请使用 mongo shell`--host`选项：

```
mongo --host replicaSetName/host1[:porthost1],host2[:porthost1],host3[:porthost3],etc 
```

例如：

```
$ mongo --host rs1/john.local:27019,john.local:27018
MongoDB shell version: v3.4.9
connecting to: mongodb://john.local:27019,john.local:27018/?replicaSet=rs1
2017-10-12T14:13:03.094+0000 I NETWORK  [thread1] Starting new replica set monitor for rs1/john.local:27019,john.local:27018
2017-10-12T14:13:03.096+0000 I NETWORK  [thread1] Successfully connected to john.local:27019 (1 connections now open to john.local:27019 with a 5 second timeout)
2017-10-12T14:13:03.096+0000 I NETWORK  [thread1] Successfully connected to john.local:27018 (1 connections now open to john.local:27018 with a 5 second timeout)
rs1:PRIMARY> db
test
rs1:PRIMARY> 
```

*注意：*从版本 3.4.2 到 3.4.10 存在一个错误 ( [SERVER-28072](https://jira.mongodb.org/browse/SERVER-28072) )，它阻止在使用 --host 或 --port 之后指定 db。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2017-03-08T12:00:07.720

以上答案适用于**Mongo 3.2**。

根据**Mongo 3.4** [文档](https://docs.atlas.mongodb.com/mongo-shell-connection/)，shell 做了一些改动：

**在 3.2 中：**
`mongo --host host1,host2,host3/myRS myDB`
或者，
`mongo --host host1:27017,host2:27017,host3:27017/myRS myDB`

**在 3.4 中：**
`mongo "mongodb://host1,host2,host3/myDB?replicaSet=myRS"`
或者，
`mongo "mongodb://host1:27017,host2:27017,host3:27017/myDB?replicaSet=myRS"`

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2015-09-15T01:31:33.840

您所要做的就是使用 --host 并为其提供副本集中的主机之一，但将副本集的名称作为前缀。

例如：

```
mongo --host my_mongo_server1 
```

将连接到 my_mongo_server1，它可能只是另一个 SECONDARY 节点。

但：

```
mongo --host my_repl_set_name/my_mongo_server1 
```

将始终连接到副本集中的 PRIMARY 节点，即使它不是 my_mongo_server1。

为什么？答案是“副本集监视器”。在上面的示例中，mongo shell 将连接到指定的节点，为副本集启动一个新的副本集监视器，并将使用指定的节点来播种它。从那里，监视器将找出副本集中的所有节点，并将连接切换到 PRIMARY 节点。

希望有帮助。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-12-17T18:57:25.513

You can use the "name/seed1,seed2,..." format:

```
> conn = new Mongo("myReplicaSet/A:27017,B:27017,C:27017")
> db = conn.getDB("test") 
```

This should give you a connection to whichever node is currently primary and handle failover okay. You can specify one or more seeds and it'll find the rest.

Note that (AFAIK) the shell does not allow you to route reads to secondaries with a replica set connection.

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2012-12-17T11:21:47.407

据我所知，mongo 命令行客户端不会接受种子将您转发到主节点，因为您可能经常希望在辅助节点上实际操作而不是被转发。

但是，一旦连接到 RS 中的任何节点，您可以通过`rs.config()`或发现 RS 拓扑`db.isMaster()`。然后，您可以使用此信息重新连接到主节点。根据您的外壳，您可能能够使用`mongo --eval "db.isMaster()['primary']"`自动连接到主服务器。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2014-05-23T11:09:27.280

在shell中，你可以先使用：

```
mongo --nodb 
```

在不连接到 mongo 副本集的情况下打开 mongo 会话

然后，就像克里斯蒂娜说的，那么你应该可以使用

```
conn = new Mongo("myReplicaSet/A:27017,B:27017,C:27017") 
```

连接到副本集。

或者最终放

```
conn = new Mongo("myReplicaSet/A:27017,B:27017,C:27017") 
```

在你的 js 文件和

```
mongo --nodb yourcode.js 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2015-03-17T20:51:43.717

您可以使用`--host`参数指定 replSet 名称和种子列表，然后`mongo`将自动连接到当前的主主机。

例子：
`mongo --host rs0/1.example.com:27017,2.example.com:27017,3.example.com:27017 [dbname]`

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-10-30T14:14:38.280

基于 Chris Heald 的回答，这两个 bash 别名让我可以使用一个命令连接到主服务器（其中 db1.test.test 是副本集的一个成员，acme 是数据库名称，mreppy 是我的帐户等）它将失败当然，如果 db1 已关闭，但它仍然很方便。

```
alias whichprimary='mongo db1.test.test/acme --username mreppy --password testtest --quiet --eval "db.isMaster()['"'primary'"']"' 
alias connectprimary='mongo -u mreppy -p testtest `whichprimary`/acme' 
```

eval 别名中的引用很难，我使用[了如何在单引号字符串中转义单引号？](https://stackoverflow.com/questions/1250079/bash-escaping-single-quotes-inside-of-single-quoted-strings)求助 ：-）

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-02-08T06:55:43.577

我正在使用 v3.4。对 mongodb 的东西也是新的......虽然“man mongo”的帮助信息建议使用“--host replicaSet/host:port,host:port” url，但它对我不起作用。但是，我可以按照[官方文档](https://docs.atlas.mongodb.com/mongo-shell-connection/)连接到我的replicaSet ，如下：

```
$ mongo "mongodb://c1m,c2m,c3m/?replicaSet=rs0"
MongoDB shell version v3.4.1
connecting to: mongodb://c1m,c2m,c3m/?replicaSet=rs0
2017-02-08T14:46:43.818+0800 I NETWORK  [main] Starting new replica set monitor for rs0/c1m:27017,c2m:27017,c3m:27017
MongoDB server version: 3.4.1
Server has startup warnings:
2017-02-08T13:31:14.672+0800 I CONTROL  [initandlisten]
2017-02-08T13:31:14.672+0800 I CONTROL  [initandlisten] ** WARNING: Access control is not enabled for the database.
2017-02-08T13:31:14.672+0800 I CONTROL  [initandlisten] **          Read and write access to data and configuration is unrestricted.
2017-02-08T13:31:14.672+0800 I CONTROL  [initandlisten]
rs0:PRIMARY> 
```

所以我猜我的 mongo 的手册页已经过时了（我使用的是 CentOS 7.3）。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-05-13T11:35:52.527

```
mongodb://< dbuser >:< dbpassword >@example.com:< port >,example2.com:< port >/< dbname >?replicaSet=setname 
```

# asp.net-mvc - 如何在其他控制器的控制器动作中传递控制器名称？

> ID：13912768
> 
> 赞同：2
> 
> 时间：2012-12-17T10:55:43.017
> 
> 标签：asp.net-mvc, controller, controller-action

我有一个 SQL 查询，我想将控制器名称作为 where 子句比较参数之一传递。应用程序中有许多控制器。根据控制器名称，将执行不同的查询结果。那么如何将控制器的名称传递给第三个控制器。

使用这个`@ViewContext.RouteData.Values["controller"]`，我可以获得控制器的名称，但只能在该控制器的视图中。那么如何在另一个控制器动作方法中实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T12:06:26.090

在 ASP MVC 中有几种方法可以将值传递给操作方法。这取决于请求的类型。

**GET 请求示例**

```
// navigation to action
@Html.ActionLink("link","myAction","otherCon", new {controllerNamePar = ViewContext.RouteData.Values["controller"]}

// render result of action into current view
@{Html.RenderAction("myAction","otherCon", new {controllerNamePar = ViewContext.RouteData.Values["controller"]}} 
```

`controllerNamePar`将作为 url 中的查询字符串发送。

**POST 请求示例**

```
@using (Html.BeginForm("MyAction", "OtherCon", FormMethod.Post))
{
    @Html.Hidden("controllerNamePar", ViewContext.RouteData.Values["controller"])
    <input type="submit" value="OK" />
} 
```

`controllerNamePar`将作为 html 表单的一部分发送。

# joomla - 在joomla中动态添加表单域

> ID：13912772
> 
> 赞同：0
> 
> 时间：2012-12-17T10:55:52.543
> 
> 标签：joomla, joomla2.5, joomla-extensions

我想知道是否有可能根据某些选项添加表单字段，

例如：

当用户选择选项数 = 8 并单击保存时，在下一个视图中，用户会看到 8 个文本框，每个文本框都有不同的名称。

我试图不通过`.xml`文件使用表单字段类，但无法使其正常工作。

Any1知道这是否可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-02T11:14:55.017

为了能够动态添加列表项，您必须编写自己的 JFormField 类并安装在组件中。

在您的情况下，您扩展 JFormFieldList 并覆盖 getOptions() 函数。在 .xml 中，您使用新创建的输入类型名称。

这里如何创建和使用新的字段类（从这里开始）：[http ://docs.joomla.org/Creating_a_custom_form_field_type](http://docs.joomla.org/Creating_a_custom_form_field_type)

接下来是如何扩展 JFormFieldList 类的示例：http://docs.joomla.org/J2.5: [How_to_add_custom_filters_to_components](http://docs.joomla.org/J2.5:How_to_add_custom_filters_to_components)

在第二个链接中为简单起见（仅作为示例）

```
public function getOptions()
    {
            // Initialize variables.
            $options = array(0=>"Option 0", 1=>"Option 1");

            return $options;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T11:04:53.513

是的，这是可能的。您可以从表单中获取字段数。假设它是 10( `$count`)。

下一个视图，您可以如下循环并创建文本框。

```
for($i = 1; $i <= $count; $i++)
 echo '<input type="text" name="fields[]" class="class_fields">'; 
```

在后端，您可以获取如下数据。

```
$values = JRequest::getVar( 'fields', 'default_values', 'post', 'array' ); 
```

[阅读更多](http://docs.joomla.org/Retrieving_and_Filtering_GET_and_POST_requests_with_JRequest%3a%3agetVar)

如果您有任何问题，请告诉我

# jquery - jQuery Deferred - 获取链式 ajax 调用的结果

> ID：13912775
> 
> 赞同：4
> 
> 时间：2012-12-17T10:56:18.133
> 
> 标签：jquery, ajax, deferred

以下问题 - 我必须多次调用 ajax 函数，当所有函数完成后，将所有结果放入数组中。我想出了这个：

```
function doAjax(xx){
var xdata = {json: $.toJSON({name: xx}),
            delay: 1};
return $.ajax({
    url:"/echo/json/",
    data:xdata,
    type:"POST"
});

}

var carr = [doAjax('a'),doAjax('b'),doAjax('c'),doAjax('d')]
var result = [];

$.when( carr )
    .done(function(data){
        console.log(data);
        $.each(data, function(ix,val){
            console.log(val.name);
        });
    }); 
```

在这里小提琴：http: [//jsfiddle.net/Fkd9n/](http://jsfiddle.net/Fkd9n/)

一切似乎都工作正常，“console.log(data)”用响应文本写出对象，但“console.log(val.name)”总是“未定义”。那么，一旦完成所有调用，如何将所有结果合并到一个数组中呢？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T11:15:49.783

如果您知道有多少个 Ajax-Call，只需使用 $.when()

```
$.when(doAjax('a'),doAjax('b'),doAjax('c'),doAjax('d'))
.then(function(result_a,result_b,result_c,result_d) {
    console.log("Result from query a: " + result_a);
    console.log("Result from query b: " + result_b);
    console.log("Result from query c: " + result_c);
    console.log("Result from query d: " + result_d);
}); 
```

如果您不知道将有多少个 ajax 调用，您可以自己管理延迟对象。

```
// altered version of doAjax()
function doAjax(number,dObject) {
    var xdata = {json: $.toJSON({name: number}), delay: 1};
    $.ajax({
        url:"/echo/json/",
        data:xdata,
        type:"POST",
        success: function(data) {
            results.push(data);
            dObject.resolve();
        }
    });
}

// array that will contain all deferred objects
var deferreds = [];

// array that will contain all results
var results = [];

// make the ajax calls
for (var i = 0; i < someNumber; i++) {
    var dObject = new $.Deferred();
    deferreds.push(dObject);
    doAjax(i,dObject);
}

// check if all ajax calls have finished
$.when.apply($, deferreds).done(function() {
    console.log(results);
}); 
```

魔术来自函数 apply()，它为函数的参数创建一个数组。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-17T11:08:33.523

您可以使用`pipe`函数来处理结果数据。

```
$.when.apply($, carr).pipe(function(){
    console.log(arguments);
    return $.map(arguments, function(item){return item[0]});
})
    .done(function(data){
        console.log(data);
        $.each(data, function(ix,val){
            console.log(val.name);
        });
    });​ 
```

[http://jsfiddle.net/Fkd9n/6/](http://jsfiddle.net/Fkd9n/6/)

# asp.net - 从文本文件生成 Google 站点地图

> ID：13912779
> 
> 赞同：1
> 
> 时间：2012-12-17T10:56:20.270
> 
> 标签：asp.net, sitemap

我有一个文本文件，其中包含一堆需要生成到 Google 站点地图的 URL。我发现这篇博客文章对我有帮助：[http ://www.isurinder.com/blog/post/2012/07/31/Generate-Google-Sitemap-From-A-List-of-Urls-In- A-文本文件.aspx](http://www.isurinder.com/blog/post/2012/07/31/Generate-Google-Sitemap-From-A-List-of-Urls-In-A-Text-File.aspx)

如何修改代码以更改站点地图信息，例如日期和优先级？

# java - 以新格式格式化我返回的 xml 响应字符串

> ID：13912781
> 
> 赞同：0
> 
> 时间：2012-12-17T10:56:27.847
> 
> 标签：java, xml, xslt

我返回了以下字符串 strFees720

这等于：

```
<?xml version="1.0" encoding="UTF-8"?>
<Response>
    <Fees720>
        <errorNode>
            <errorCode>0</errorCode>
            <errorMsg/>
            <errorSev/>
        </errorNode>
        <forwardScroll>       0093101200001117                0</forwardScroll>
        <backwardScroll>                                        </backwardScroll>
        <Field name="ACCID"><Value>93101200001034</Value></Field>
        <Field name="FPERIOD"><Value>2C</Value></Field>
        <Field name="STDATE"><Value>13 DEC 2012</Value></Field>
        <Field name="ENDATE"><Value>13 DEC 2012</Value></Field>
        <Field name="ADVDATE"><Value>19 DEC 2012</Value></Field>
        <Field name="DBDATE"><Value> F40LA1C   </Value></Field>
        <Field name="SNAME"><Value>N SINGLETON JG</Value></Field>
        <Field name="ACDESC"><Value>OVERDRAFT AAA</Value></Field>
        <Field name="TOTFEES"><Value>0</Value></Field>
        <Field name="DISCOUNT"><Value>0</Value></Field>
        <Field name="NETFEES"><Value>0</Value></Field>
        <Field name="CLRD_BAL"><Value>93101200001034</Value></Field>
        <Field name="ALLOW_RTE"><Value>0</Value></Field>
        <Field name="DISC_RTE"><Value>0</Value></Field>
        <Field name="ALLOW_TOT"><Value>0</Value></Field>
        <Field name="PCODE"><Value>0000000</Value></Field>
        <Field name="DRILLNSC"><Value>0</Value></Field>
        <Field name="DIALOG"><Value>9</Value></Field>
        <Field name="NUMLINES"><Value>1</Value></Field>
        <Field name="TOTLINES"><Value>0</Value></Field>
        <Field name="BPCUST"><Value>P</Value></Field>
        <Field name="NFEE_EXPDTE"><Value></Value></Field>
        <FEEDATA>
            <Field name="FCODE"><Value></Value></Field>
            <Field name="FEEDETS"><Value></Value></Field>
            <Field name="CHRG_TYPE"><Value></Value></Field>
            <Field name="DCODE"><Value></Value></Field>
            <Field name="VOLUME"><Value>0</Value></Field>
            <Field name="RATE"><Value>0</Value></Field>
            <Field name="TOTAL"><Value>0</Value></Field>
            <Field name="DRILL"><Value></Value></Field>
        </FEEDATA>
        <GROSSNETFEES>
            <Field name="FQUARTER"><Value>06 DEC 12    12 DEC 12</Value></Field>
            <Field name="GRSFEE"><Value>611960</Value></Field>
            <Field name="NFEE"><Value>611960</Value></Field>
            <Field name="FEEDISC"><Value>0</Value></Field>
        </GROSSNETFEES>
        <GROSSNETFEES>
            <Field name="FQUARTER"><Value>01 DEC 12    05 DEC 12</Value></Field>
            <Field name="GRSFEE"><Value>64850</Value></Field>
            <Field name="NFEE"><Value>64850</Value></Field>
            <Field name="FEEDISC"><Value>0</Value></Field>
        </GROSSNETFEES>
        <GROSSNETFEES>
            <Field name="FQUARTER"><Value>08 NOV 12    30 NOV 12</Value></Field>
            <Field name="GRSFEE"><Value>15866</Value></Field>
            <Field name="NFEE"><Value>15866</Value></Field>
            <Field name="FEEDISC"><Value>0</Value></Field>
        </GROSSNETFEES>
        <GROSSNETFEES>
            <Field name="FQUARTER"><Value>01 NOV 12    07 NOV 12</Value></Field>
            <Field name="GRSFEE"><Value>636</Value></Field>
            <Field name="NFEE"><Value>616</Value></Field>
            <Field name="FEEDISC"><Value>20</Value></Field>
        </GROSSNETFEES>
        <Field name="TOTGRSFEE"><Value>693312</Value></Field>
        <Field name="TOTNETFEE"><Value>693292</Value></Field>
    </Fees720>
</Response> 
```

我想将此 xml 字符串响应转换为新的 xml 字符串

如下：

```
 <?xml version="1.0" encoding="UTF-8"?>
<Response>
    <Fees720>
        <errorNode>
            <errorCode>0</errorCode>
            <errorMsg/>
            <errorSev/>
        </errorNode>
        <forwardScroll>       0093101200001117                0</forwardScroll>
        <backwardScroll>                                        </backwardScroll>
        <accid>93101200001034</accid>
        <fperiod>2C</fperiod>
        <stdate>13 DEC 2012</stdate>
        <endate>13 DEC 2012</endate>
        <advdate>19 DEC 2012</advdate>
        <dbdate> F40LA1C   </dbdate>
        <sname>N SINGLETON JG</sname>
        <acdesc>OVERDRAFT AAA</acdesc>
        <totfees>0</totfees>
        <discount>0</discount>
        <netfees>0</netfees>
        <clrdbal>93101200001034</clrdbal>
        <allowrte>0</allowrte>
        <discrte>0</discrte>
        <allowtot>0</allowtot>
        <pcode>0000000</pcode>
        <drillnsc>0</drillnsc>
        <dialog>9</dialog>
        <numlines>1</numlines>
        <totlines>0</totlines>
        <bpcust>P</bpcust>
        <nfeeexpdte></nfeeexpdte>
        <feedata>
            <fcode></fcode>
            <feedets></feedets>
            <chrgtype></chrgtype>
            <dcode></dcode>
            <volume>0</volume>
            <rate>0</rate>
            <total>0</total>
            <drill></drill>
        </feedata>
        <grossnetfees>
            <fquarter>06 DEC 12    12 DEC 12</fquarter>
            <grsfee>611960</grsfee>
            <nfee>611960</nfee>
            <feedisc>0</feedisc>
        </grossnetfees>
        <grossnetfees>
            <fquarter>01 DEC 12    05 DEC 12</fquarter>
            <grsfee>64850</grsfee>
            <nfee>64850</nfee>
            <feedisc>0</feedisc>
        </grossnetfees>
        <grossnetfees>
            <fquarter>08 NOV 12    30 NOV 12</fquarter>
            <grsfee>15866</grsfee>
            <nfee>15866</nfee>
            <feedisc>0</feedisc>
        </grossnetfees>
        <grossnetfees>
            <fquarter>01 NOV 12    07 NOV 12</fquarter>
            <grsfee>636</grsfee>
            <nfee>616</nfee>
            <feedisc>20</feedisc>
        </grossnetfees>
        <totgrsfee>693312</totgrsfee>
        <totnetfee>693292</totnetfee>
    </Fees720>
</Response> 
```

我想我需要按照以下方式做一些事情：

```
strFees720Transform = XSLTransformer.transform("mynewxsl.xsl", strFees720); 
```

并将原始 xml 转换为新的 xml。请提供有关最佳方法的任何建议。谢谢

用方法更新

```
 private String getServiceValue(String strXMLResponse, String strNode, String strService) throws ServletException{

    String strNodeValue = null;

    try{
        builder = new SAXBuilder(false);
        Document doc = builder.build(new InputSource(new StringReader(strXMLResponse)));

        Element root = doc.getRootElement();  
        Element rootchild = root.getChild(strService); 
        List rootchildren = rootchild.getChildren();

        for (int i=0;i <= rootchildren.size() -1;i++)  
        {  
            Element el = (Element) rootchildren.get(i);  

            if(el.getName().equalsIgnoreCase(strNode)){
                strNodeValue = el.getText();
            }
        }  

    } catch (Exception err) {
        logger.error(err.getMessage(), err);
        throw new ServletException(err.getMessage());
    }

    return strNodeValue;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:03:07.217

对于“我想对我的 XML 进行一些更改但大部分保持不变”问题的常见建议是：从标识模板开始（将输入逐字复制到输出），然后为您想要的内容添加特定模板改变。身份模板看起来像

```
<xsl:template match="@*|node()">
  <xsl:copy>
    <xsl:apply-templates select="@*|node()" />
  </xsl:copy>
</xsl:template> 
```

现在来处理`<Field>`你想要创建一个新元素的元素，它的名字是从原始的属性派生的`Field`

```
<xsl:template match="Field">
  <xsl:element name="{translate(@name, 'ABCDEFGHIJKLMNOPQRSTUVWXYZ_', 'abcdefghijklmnopqrstuvwxyz')}">
    <xsl:apply-templates select="Value/node()" />
  </xsl:element>
</xsl:template> 
```

这里的`translate`函数会将所有大写字母替换为等效的小写字母，并完全删除所有下划线。

最后，`FEEDATA`你`GROSSNETFEES`只需要两个简单的模板

```
<xsl:template match="FEEDATA">
  <feedata>
    <xsl:apply-templates select="@*|node()"/>
  </feedata>
</xsl:template>
<!-- and likewise for GROSSNETFEES --> 
```

`translate`如果您愿意，可以使用相同的技巧将这两个模板合并为一个。

至于进行转换的实际机制，您需要查看[javax.xml.transform 包](http://docs.oracle.com/javase/6/docs/api/javax/xml/transform/package-summary.html)。看到您已经有将 XML 字符串解析为 JDOM 树并提取感兴趣的元素的代码，我将在其中进行 XSL 转换。在初始化时创建一个`Templates`实例并将引用存储在某处

```
TransformerFactory tf = TransformerFactory.newInstance();
Source xslSource = new StreamSource(new File(....));
templates = tf.newTemplates(xslSource); 
```

现在每次您需要进行转换时，您都可以使用它`templates`

```
try{
    builder = new SAXBuilder(false);
    Document doc = builder.build(new InputSource(new StringReader(strXMLResponse)));

    Element root = doc.getRootElement();  
    Element rootchild = root.getChild(strService); 
    List rootchildren = rootchild.getChildren();

    for (int i=0;i <= rootchildren.size() -1;i++)  
    {  
        Element el = (Element) rootchildren.get(i);  

        if(el.getName().equalsIgnoreCase(strNode)){
            // do the transformation
            Source s = new JDOMSource(el);
            StringWriter resultWriter = new StringWriter();
            Result r = new StreamResult(resultWriter);
            templates.newTransformer().transform(s, r);
            return resultWriter.toString();
        } 
```

# webdriver - 如何单击 Salesforce 应用程序中的继续按钮？

> ID：13912791
> 
> 赞同：0
> 
> 时间：2012-12-17T10:57:00.127
> 
> 标签：webdriver

我无法单击屏幕上的继续按钮。以下是我正在使用的代码 LoginPage2.driver.findElement(By.name("Continue")).click();

两个按钮并排放置继续和取消。我可以使用相同的命令单击“取消”按钮，但不能单击前一个。

以下是 HTML 格式：

<*input value="Continue" class="btn" title="Continue" name="save" type="submit">

<*input value="Cancel" class="btn" title="Cancel" name="cancel" type="submit">

请帮助..

问候， 桑比特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:59:33.313

尝试

```
LoginPage2.driver.findElement(By.name("save")).click(); 
```

或者

```
LoginPage2.driver.findElement(By.xpath("//input[@title='Continue']")).click(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-21T17:51:55.483

查看您的 HTML 元素： `LoginPage2.driver.findElement(By.name("Continue")).click();`

它不起作用，因为`By.name`它是错误的，并且在取消的情况下是正确的。而不是`By.name`你应该使用`By.value("Continue")`它会起作用。

# php - MySQL PHP SELECT 抛出错误？

> ID：13912797
> 
> 赞同：1
> 
> 时间：2012-12-17T10:57:20.313
> 
> 标签：php, mysql, database, select, comments

我正在尝试使用 PHP 和 MySQL 在我的手工制作网站上创建评论部分。我已将评论存储在我的数据库中，但是当我尝试选择它们时，我的网站会抛出此错误，

> mysql_result() [function.mysql-result]：无法跳转到第 16 行 /home/a9210109/public_html/comments.php 中 MySQL 结果索引 9 的第 0 行

到目前为止我的代码如下

```
 <?php
    $comment = $_POST['comment'];
    $mysql_host = "";
    $mysql_database = "";
    $mysql_user = "";
    $mysql_password = "";
    mysql_connect($mysql_host,$mysql_user,$mysql_password);
    @mysql_select_db($mysql_database) or die( "Unable to select database");
    $CreateTable = "CREATE TABLE comments (comment VARCHAR(255), time VARCHAR(255));";
    mysql_query($CreateTable);
    $UseComment = "INSERT INTO comments VALUES ('$comment')";
    mysql_query($UseComment);
    $SelectComments = "SELECT * FROM comments";
    $comments = mysql_query($SelectComments);
    $num=mysql_numrows($comments);
    $variable=mysql_result($comments,$i,"comment");
    mysql_close();
    ?>
    <a href="#" onclick="toggle_visibility('hidden');">Show/Hide Comments</a>
    <?php
    $i=0;
    while ($i < $num) {
    $comment=mysql_result($comments,$i,"comment");
    echo "<div id='hidden' style='display:none'><h3>$comment</h3></div>";
    $i++;
    }
    ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T11:00:21.830

改变

```
 $num=mysql_numrows($comments); 
```

至

```
$num=mysql_num_rows($comments); 
```

正确的语法`mysql_num_rows`不是`mysql_numrows`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T11:01:21.513

$i 未在第一个 php 部分中设置：

```
$variable=mysql_result($comments,$i,"comment"); 
```

修复以上问题！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T11:50:03.087

数据库中没有记录。

$UseComment = "插入评论值 ('$comment')"; 是错的。

将其更改为

$UseComment = "INSERT INTO comments(comment) VALUES ('$comment')";

谢谢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T11:04:12.297

首先，您可以检查[这个问题](https://stackoverflow.com/questions/8342054/mysql-unable-to-jump-to-row-0-on-mysql-result-index)。关于您的代码，您在导致错误的第 16 行之前
没有：`$i`

```
$variable=mysql_result($comments,$i,"comment"); 
```

您应该在发出之前检查是否有任何结果`mysql_result`：

```
$SelectComments = "SELECT * FROM comments";
$comments = mysql_query($SelectComments);
if( $num = mysql_num_rows($comments) ){
    $variable = mysql_result($comments, 0, "comment");
} 
```

我会亲自编写一个 COUNT 查询来获取评论总数：

```
$sql = 'SELECT COUNT(*) total FROM comments';
$comments = mysql_query($sql);
$row = mysql_fetch_assoc($comments);
$totalComments = $row['total']; 
```

在这种情况下，您不需要检查，`mysql_num_rows()`因为 COUNT 查询肯定会返回一个结果“0”或其他任何内容。

# android - Android：如何管理项目中的图像（现有与不存在）

> ID：13912802
> 
> 赞同：0
> 
> 时间：2012-12-17T10:57:53.007
> 
> 标签：android, android-canvas, android-sdcard, android-image

标题似乎模棱两可，但我的目标很容易理解。

*   我在 res/drawable-hdpi 下的项目中有一定数量的图像。

*   在我的应用程序中，我从服务器获取名称列表，并将它们保存在本地数据库中。

*   每个名称对应于图像的名称，末尾带有“.png”。

*   我正在使用画廊，用户可以通过单击相应的图像从数据库中选择其中一个名称。

一切都很好，直到这里。

但是现在，假设将在服务器端添加一个新名称，因此图像不会出现在应用程序中。在这种情况下，我必须更新我的应用程序并将正确的图像放入其中。

为了避免用户在图库中看到“黑色图像”（因为该图像不存在），我想用 android 创建这个图像。

如果图像在项目中不存在，我实际上能够捕捉并创建一个新图像（白色背景，中间有名称）。

现在，问题是如何以及在哪里存储这个新图像。显然，不可能将其存储在 res/drawable 文件夹中。那么，在哪里以及如何存储？

这是我创建新图像的代码部分：

```
if (imageId == 0)
            {
                Bitmap journal_template = BitmapFactory.decodeResource(context.getResources(), R.drawable.journals_template).copy(Bitmap.Config.ARGB_8888, true);
                Canvas myCanvas = new Canvas(journal_template);

                Paint myPaint = new Paint();
                myPaint.setColor(Color.BLACK);
                myPaint.setTextSize(25);

                String journal_name = publicJournalsNameSystem.get(i).toLowerCase(); 

                Paint textPaint = new Paint();
                textPaint.setARGB(200, 254, 0, 0);
                textPaint.setTextAlign(Align.CENTER);

                int xPos = (myCanvas.getWidth() / 2);
                int yPos = (int) ((myCanvas.getHeight() / 2) - ((textPaint.descent() + textPaint.ascent()) / 2)) ;

                myCanvas.drawText("Your text", xPos, yPos, myPaint);

                try {
                       FileOutputStream out = new FileOutputStream("/journals_"+journal_name+".png");
                       journal_template.compress(Bitmap.CompressFormat.PNG, 90, out);
                } catch (Exception e) {
                       e.printStackTrace();
                }

            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T14:22:32.980

为了使用来自网络服务器的图像，您需要首先将图像下载到设备上，然后将其存储。

[这是如何下载图像的一个很好的例子。](http://www.helloandroid.com/tutorials/store-imagesfiles-database)

[开发者网站提供了如何将数据存储到设备的方法。](http://developer.android.com/guide/topics/data/data-storage.html) 您将希望将其存储在内部或（更优选）外部存储到 SD 卡。建议您首先检查 SD 卡是否已安装在设备上并且是否可用。如果 SD 不可用，请在内部存储图像。

You must then keep track of the image's URI after downloading. Temporary images can simply be tracked with the app then deleted upon `onDestroy()`. Permanent image URIs should be stored via either [`SharedPreferences`](http://developer.android.com/guide/topics/data/data-storage.html#pref), [`SQLite database`](http://developer.android.com/guide/topics/data/data-storage.html#db), or [`ContentProvider`](http://developer.android.com/guide/topics/providers/content-providers.html). A `ContentProvider` is preferred as it adds a layer of abstraction for how you want to store the image. It's usually backed by an SQLite database anyway, but other apps don't need to know that. It also allows other applications to easily access the image if you want (say, the Gallery for example). You can prevent access if you choose. `SharedPreferences` is easier to implement if you only have a few images. It's least recommended though.

# regex - 正则表达式匹配字符串替换新字符串（记事本）

> ID：13912803
> 
> 赞同：1
> 
> 时间：2012-12-17T10:57:59.193
> 
> 标签：regex, notepad++, replace

在记事本++中，我需要匹配“狗”（搜索）

```
<tag>old-string/dog.swf">more-old-string</tag> 
```

然后使用反向引用 (\1) 将其包含在另一个字符串中（替换）：

```
new-string_\1>more-new-string 
```

给出结果

```
new-string_dog.swf">more-new-string 
```

我是正则表达式的新手，所以请先通过匹配“dog”来告诉我如何做到这一点，然后在结果中排​​除所有旧字符串。

编辑：我意识到这可能会令人困惑，所以我在这里发布了实际问题：[regex find word in string, replace word in new string (using Notepad++)](https://stackoverflow.com/questions/13915475/regex-find-word-in-string-replace-word-in-new-string-using-notepad)。我希望它更有意义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:41:36.840

我在这里完全不顾一切地试图理解你想要什么，但如果我正确理解了你，你想要：

1.  匹配一个字符串中的某个单词
2.  使用旧字符串中的数据创建一个新字符串，在应该保持不变的旧字符串下

如果是这样，这个正则表达式：`/^(.*?/([^"]+)\.swf)(".*$)/i`用这个替换：`\1\3\r\n<test>\2</test>`应该可以解决问题。我曾经`<test></test>`向您展示您将“新字符串”内容放在哪里。

我希望这有帮助！

# objective-c - 获取两个指定字母之间的所有字母

> ID：13912805
> 
> 赞同：-3
> 
> 时间：2012-12-17T10:58:07.377
> 
> 标签：objective-c, ios, cocoa-touch

对于objective-c，我如何找出两个给定字母之间的字母。例如，对于两个字母 A 和 D，我应该得到 A、B、C、D。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T11:03:19.057

你可以试试这段代码：

```
NSString *start = @"A";
NSString *end = @"D";
unichar startChar = [start characterAtIndex:0];
unichar endChar = [end characterAtIndex:0];
for (unichar c = startChar; c <= endChar; c++)
{
    NSLog(@"%c",c);
} 
```

结果：

```
2012-12-17 19:01:36.259 Test[7492:907] A
2012-12-17 19:01:36.263 Test[7492:907] B
2012-12-17 19:01:36.264 Test[7492:907] C
2012-12-17 19:01:36.265 Test[7492:907] D 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T11:36:02.143

最短的代码是：

```
for (char c = 'a'; c <= 'd'; c++)
    NSLog(@"char = %c", c); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T11:54:15.317

**第一的**

```
unichar StartChar = [@"R" characterAtIndex:0];
unichar EndChar = [@"X" characterAtIndex:0];
for (unichar Result = StartChar; c <= EndChar; c++)
{
    NSLog(@"%c",Result);
} 
```

**第二**

```
NSString *string = @"ABCDEFGHIJKLMNOPQRSTUVWXYZ";

int startIndex = [string rangeOfString:@"A"].location;
NSString *subString = [string substringFromIndex:startIndex];

int EndIndex = [subString rangeOfString:@"H"].location;

NSString*result = [subString substringToIndex:EndIndex+1];
NSLog(@"%@",result); 
```

**第三**

```
NSArray *string = [[UILocalizedIndexedCollation currentCollation] sectionTitles];
int startIndex = [string indexOfObject:@"D"];
int EndIndexIndex = [string indexOfObject:@"I"];

for (int i=startIndex; i<=EndIndexIndex; i++)
{
    NSLog(@"%@",[string objectAtIndex:i]);
} 
```

# java - 在java中将大文件加载到arraylist的最佳方法

> ID：13912808
> 
> 赞同：3
> 
> 时间：2012-12-17T10:58:15.207
> 
> 标签：java

我有一个大小约为 300mb 的文件。我想逐行读取内容，然后将其添加到 ArrayList 中。所以我创建了一个数组列表 a1 的对象，然后使用 BufferedReader 读取文件，之后当我将文件中的行添加到 ArrayList 中时，它在线程“main” java.lang.OutOfMemoryError: Java heap space 中给出了一个错误异常。

请告诉我应该如何解决这个问题。

```
 public static void main(String[] args) {
    // TODO Auto-generated method stub
    try {
      FileReader file = new FileReader(
          "/home/dmdd/Desktop/AsiaData/RawData/AllupperairVcomponent.txt");
      ArrayList a1 = new ArrayList();
      BufferedReader br = new BufferedReader(file);
      String line = "";
      while ((line = br.readLine()) != null) {
        a1.add(line);
      }
    } catch (Exception e) {
      // TODO: handle exception
      e.printStackTrace();
    }
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T11:00:12.377

天真地，通过 Xmx 命令行参数增加堆的大小（有关一些指导，请参阅这个[出色的答案）](https://stackoverflow.com/questions/1651225/how-to-choose-the-jvm-heap-size)

不过，这只会在一定程度上起作用，而是考虑构建数据以最小化内存需求。您是否需要一次将所有内容都保存在内存中？也许您只需要测试一个项目是否在该集合中，考虑使用散列或布隆过滤器（等）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-17T11:02:26.687

只是增加Java的堆大小

java -Xmx250m

如果您从 IDE 运行项目，请在参数中设置 -Xmx250m。

250m 就是 250mb

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T10:59:59.567

如果您*必须*将它放在内存中，您可以尝试通过将`-mx`选项传递给`java`可执行文件来增加堆大小。

如果您真的需要同时在内存中存储所有数据，那么这个问题可能也值得考虑。您可以按顺序处理它，也可以将大部分或全部保存在磁盘上。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T11:00:37.507

通过 -Xmx1024m 将堆空间增加到 1024 mb。

```
java -Xms1024m -Xmx512m HelloWorld 
```

在 32 位系统上最多可以增加 4GB，而在 64 位系统上可以更高。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T11:05:42.500

我部分同意@Murali，这将解决您面临的问题。但建议在处理大文件时使用缓存。如果文件大小在极少数情况下变为 500Mb 怎么办。使用像[Memcached](http://brainfry.in/programming/memcached-java-examples/)这样的缓存 API，这将消除 JVM 中的内存中断。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-17T11:03:01.287

使用 java.nio.file.Files.readAllLines，它返回`List<String>.`如果你得到 OOME 增加堆大小为`java -Xmx1024m`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-17T11:15:10.987

如果可以：批量处理 10000 行左右的文件。

读取 10k 行过程重复直到完成

# iphone - 将大文件（超过 100 mb）从 iPhone 上传到服务器

> ID：13912821
> 
> 赞同：0
> 
> 时间：2012-12-17T10:58:59.077
> 
> 标签：iphone, ios5, ios4, ios6, asihttprequest

我想将大文件从 iPhone 上传到 .net 服务器。我应该使用什么 API？我还需要估计上传时间。

如何完成这个任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:17:01.370

根据您的要求使用`AFNetworking` [https://github.com/AFNetworking/AFNetworking libray](https://github.com/AFNetworking/AFNetworking)

# mysql - MySQL 批量加载程序 - java.lang.ArrayIndexOutOfBoundsException: -1

> ID：13912824
> 
> 赞同：1
> 
> 时间：2012-12-17T10:59:05.607
> 
> 标签：mysql, pentaho, kettle, bulkloader, bulk-load

嗨，我正在使用`MySQL`批量加载器将数据从 Amazon 服务转储到 linux 服务器上的本地表，但是每次执行它时，它都会在 MySQL 批量加载器步骤中失败，说

```
 MySQL Bulk Loader - java.lang.ArrayIndexOutOfBoundsException: -1 
```

错误日志说

```
ERROR 17-12 05:46:49,041 - MySQL Bulk Loader - Error in step, asking everyone to stop because of:
ERROR 17-12 05:46:49,041 - MySQL Bulk Loader - java.lang.ArrayIndexOutOfBoundsException: -1
        at java.util.ArrayList.get(Unknown Source)
        at org.pentaho.di.core.row.RowMeta.getValueMeta(RowMeta.java:166)
        at org.pentaho.di.trans.steps.mysqlbulkloader.MySQLBulkLoader.processRow(MySQLBulkLoader.java:249)
        at org.pentaho.di.trans.step.RunThread.run(RunThread.java:50)
        at java.lang.Thread.run(Unknown Source)

INFO  17-12 05:46:49,041 - MySQL Bulk Loader - Finished processing (I=0, O=0, R=1, W=0, U=0, E=1)
INFO  17-12 05:46:49,041 - id1383 - id1383
INFO  17-12 05:46:49,042 - id1383 - id1383
INFO  17-12 05:46:49,042 - Json Input - Finished processing (I=1, O=0, R=1, W=1, U=0, E=0)
INFO  17-12 05:46:49,047 - Select values - Finished processing (I=0, O=0, R=1, W=1, U=0, E=0)
INFO  17-12 05:46:49,208 - Pan - Finished!
INFO  17-12 05:46:49,208 - Pan - Start=2012/12/17 05:46:25.199, Stop=2012/12/17 05:46:49.208
INFO  17-12 05:46:49,208 - Pan - Processing ended after 24 seconds. 
```

任何人都可以帮助为什么这个数组索引越界错误即将到来，我已经验证了前面的行，有很多行并且它们都没有空值

# c++ - Boost.thread 代码在 Ubuntu 和 Windows 中呈现不同的行为

> ID：13912827
> 
> 赞同：1
> 
> 时间：2012-12-17T10:59:24.880
> 
> 标签：c++, windows-7, boost-thread, point-cloud-library

我有一个简单的程序来测试我是否可以从不同的线程可视化点云并继续在主线程中工作，直到在终端中输入*“q” 。*

在 Ubuntu 10.04 中，代码有效，让我可以将云可视化为在每次迭代中添加新点。但是，在 Windows 7 中这不起作用（我正在使用*QtCreator*编译它）。显示云并在每一轮中计算新点，但这永远不会退出。输入*'q'*时，循环停止，但可视化线程继续运行。停止执行的唯一方法是显式使用*CTRL+C*。

更多的东西：

*   如果我不取消注释*Visualize函数中的**!viewer->wasStopped()*循环之前的*addPointCloud*行，则永远不会显示点云。没关系，稍后在循环中我明确添加它。它必须在循环之前完成（现在该行已被注释以证明该行为）。
***   我还尝试使用*boost::mutex*而不是 *tbb::queuing_mutex*，但同样，程序不会退出。**

 **你知道为什么线程永远不会加入吗？此外，总是欢迎对我的线程使用提出建设性批评，我希望不断改进。

这是代码：

```
#include <boost/thread/thread.hpp>
#include <iostream>
#include <pcl/point_types.h>
#include <pcl/visualization/pcl_visualizer.h>
#include "tbb/queuing_mutex.h"

typedef pcl::PointXYZ PointType;
typedef pcl::PointCloud<PointType> PointCloudType;
typedef tbb::queuing_mutex MutexType;
//typedef boost::mutex MutexType;
MutexType safe_update;

const unsigned int HEIGHT = 100;
const unsigned int WIDTH = 100;
bool has_to_update(true);

void Visualize(PointCloudType::Ptr cloud) {
  pcl::visualization::PCLVisualizer* viewer = new pcl::visualization::PCLVisualizer("Vis in thread",true);
  viewer->setBackgroundColor(1.0,0.0,0.0);
//  viewer->addPointCloud<PointType>(cloud, "sample cloud");
  viewer->addCoordinateSystem(1.0);
  viewer->initCameraParameters();
  viewer->resetCamera();
  while(!viewer->wasStopped()) {
    viewer->spinOnce(100);
    {
//      boost::lock_guard<MutexType> lock(safe_update);
        MutexType::scoped_lock lock(safe_update);
      if(has_to_update) {
        if(!viewer->updatePointCloud<PointType>(cloud, "sample cloud")) {
          viewer->addPointCloud<PointType>(cloud, "sample cloud");
          viewer->setPointCloudRenderingProperties(pcl::visualization::PCL_VISUALIZER_POINT_SIZE, 1, "sample cloud");
          viewer->resetCamera();
        }
        has_to_update = false;
      }
    } // end scoped_lock
  }
  delete viewer;
};

int main(int argc, char** argv) {
  PointCloudType::Ptr c(new PointCloudType);
  c->height=HEIGHT;
  c->width=WIDTH;
  const unsigned int size( c->height*c->width);
  c->points.resize(size);
  for(unsigned int i(0);i<size;++i){
    c->points[i].x = 1024 * rand () / (RAND_MAX + 1.0f);
    c->points[i].y = 1024 * rand () / (RAND_MAX + 1.0f);
    c->points[i].z = 1024 * rand () / (RAND_MAX + 1.0f);
  }
  std::cout << "Filled cloud height: " << c->height << " ** widht = "
            << c->width << " ** size: " << c->points.size()
            << "\n"
  ;
  boost::thread vis_thread( boost::bind( &Visualize, boost::ref(c) ) );
  char exit;
  std::vector<PointType> new_points;
  new_points.resize(10);
  PointType new_point;

  while(exit!='q') {
    for(unsigned int i(0);i<10;++i) {
      new_point.x = 2000 * rand () / (RAND_MAX + 1.0f);
      new_point.y = 2000 * rand () / (RAND_MAX + 1.0f);
      new_point.z = 2000 * rand () / (RAND_MAX + 1.0f);
      std::cout << "New point " << i << " with x = " << new_point.x
                << " ; y = " << new_point.y << " ; z = "
                << new_point.z << "\n"
      ;
      new_points.push_back(new_point);
    }
    {
//      boost::lock_guard<MutexType> lock(safe_update);
      MutexType::scoped_lock lock(safe_update);
      c->insert( c->points.end(), new_points.begin(), new_points.end() );
      has_to_update = true;
    } // end scoped_lock
    std::cout << "Exit?: ";
    std::cin>>exit;
  }
  vis_thread.join();
  return 0;
} 
```

谢谢你的时间！。

**编辑：**由于 Windows 无法识别可执行格式（？），我无法使用调试器，所以我`qDebug()`在函数上添加了一些行（另外，现在我使用的是 volatile 中间 var，*stopped*`Visualize`，而不是直接调用）：`viewer->wasStopped()`

 *```
void Visualize(PointCloudType::Ptr cloud) {
  pcl::visualization::PCLVisualizer* viewer = new pcl::visualization::PCLVisualizer("Vis in thread",true);
  viewer->setBackgroundColor(1.0,0.0,0.0);
  viewer->addPointCloud<PointType>(cloud, "sample cloud");
  viewer->addCoordinateSystem(1.0);
  viewer->initCameraParameters();
  viewer->resetCamera();

  volatile bool stopped( false );
  int iterations( -1 );

  while(!stopped) {
    ++iterations;
    qDebug() << "Before spinOnce - it: << iteration << "\n";
    viewer->spinOnce(100);
    {
//      boost::lock_guard<MutexType> lock(safe_update);
        MutexType::scoped_lock lock(safe_update);
      if(has_to_update) {
        if(!viewer->updatePointCloud<PointType>(cloud, "sample cloud")) {
          viewer->addPointCloud<PointType>(cloud, "sample cloud");
          viewer->setPointCloudRenderingProperties(pcl::visualization::PCL_VISUALIZER_POINT_SIZE, 1, "sample cloud");
          viewer->resetCamera();
        }
        has_to_update = false;
      }
    } // end scoped_lock
    stopped = viewer->wasStopped();
    qDebug() << "Before a new loop - it:" << iteration << "\n";
  }
  delete viewer;
}; 
```

好吧，*在 spinOnce 之前*只显示一次，*迭代=0*。*Before a new loop*行从不**打印**。

另一方面，**主线程不断计算这些点并将其打印到标准输出**，直到输入*“q”*。

可视化线程似乎在`viewer->spinOnce(100)`调用中冻结。如果`spinOnce(100)`我不使用其他可视化方法，则`spin()`没有任何变化。

也许我的代码中存在数据竞赛，但我一直在检查它，我自己找不到竞赛。

**注意：**根据 PCL 库文档，`spinOnce(int time)` *调用交互器并更新屏幕一次*，而`spin()` *调用交互器并运行内部循环*。

**编辑#2：**今天我尝试在 Ubuntu 中再次执行代码，结果导致 PCL 可视化器出现死锁。我添加了一些`volatile`关键字和一个新的循环检查。现在看来一切顺利（至少它按预期工作，没有错误的转弯......）。这是新版本：

*全局变量：*

```
volatile bool has_to_update(true); // as suggested by @daramarak
volatile bool quit(false);         // new while loop control var 
```

*可视化方法：*

```
void Visualize(PointCloudType::Ptr cloud) {
  pcl::visualization::PCLVisualizer* viewer = new pcl::visualization::PCLVisualizer("Vis in thread",true);
  viewer->setBackgroundColor(1.0,0.0,0.0);
  viewer->addPointCloud<PointType>(cloud, "sample cloud");
  viewer->addCoordinateSystem(1.0);
  viewer->initCameraParameters();
  viewer->resetCamera();

  while(!viewer->wasStopped() && !quit ) {
    viewer->spinOnce(100);
    {
      MutexType::scoped_lock lock(safe_update);
      if(has_to_update) {
        if(!viewer->updatePointCloud<PointType>(cloud, "sample cloud")) {
          viewer->addPointCloud<PointType>(cloud, "sample cloud");
          viewer->setPointCloudRenderingProperties(pcl::visualization::PCL_VISUALIZER_POINT_SIZE, 1, "sample cloud");
          viewer->resetCamera();
        }
        has_to_update = false;
      }
    } // end scoped_lock
  }
  delete viewer;
}; 
```

*主功能：*

```
// everything the same until...
std::cin>>exit;
quit = (exit=='q');
// no more changes 
```

但是，我不喜欢新的控制循环 var hack。有没有更好的方法来知道何时退出？现在，我无法意识到任何其他方式......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:26:01.867

我相信该`wasStopped()`函数是一个 const 成员函数，因此不会改变对象的状态，因此这里可能会进行优化（它可能会缓存`wasStopped()`值，因为编译器假设答案不会改变。我建议您尝试使用 function 将查看器包装在另一个对象中`bool wasStopped() volatile`，这可能会阻止此类优化。***

# windows - 如何使用 Delphi 2010 以编程方式确定 Windows 的性能设置

> ID：13912828
> 
> 赞同：2
> 
> 时间：2012-12-17T10:59:28.040
> 
> 标签：windows, delphi, winapi, delphi-2010

以下代码是关闭我的应用程序。

```
procedure TfrmMain.btnClose1Click(Sender: TObject);
var
  i : Integer;
begin
  for i := 255 downto 0 do begin
    frmMain.AlphaBlendValue := i;
    application.ProcessMessages;
  end;

  Close;
end; 
```

将 Windows 性能设置为“让 Windows 选择...”</p>

*   当使用上面的代码关闭我的 Delphi 应用程序时，淡入淡出几乎是瞬间的（最多可能是 ¼ 秒，如果我眨眼我会错过过渡）。

如果我将性能选项设置为“调整以获得最佳性能”</p>

*   退出同一个应用程序时，淡入淡出需要 12 秒以上。
*   使用相同的代码但注释掉 AlphaBlendValue 更改可以消除延迟。

我在 Delphi 2010 和 DelphiXE2 上对此进行了测试，结果是一样的。如果这有什么不同的话，这是在 Windows 7 Ultimate 64bit 上测试的。

至少可以说这种行为让我感到困惑。

*   我认为 forms Alpha 属性由 GPU 处理，因此不会受到旨在最大化 CPU 性能的 Windows 性能设置的影响。

因此，就这一点而言，我不确定这是 Windows 7 错误、Delphi 错误还是只是我缺乏知识。

至于修复...有没有办法判断 Windows 是否在垃圾图形/最大性能模式下运行，以便我可以在我的应用程序中禁用 Alpha 淡入淡出效果？

* * *

为清楚起见进行编辑：虽然我想修复淡入淡出，但我真正想要的是一种确定 Windows 性能设置的方法。

我正在寻找如何确定特定的 Windows 设置 - 当您进入 Windows 性能选项时，有 3 个选项卡。在第一个选项卡“视觉效果”上有 3 个预设选项和第 4 个选项用于“自定义”。至少我试图确定选择的选项是否是“调整以获得最佳性能”，如果我可以更好地确定此选项卡上的设置。

* * *

感谢任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T11:03:20.847

您的代码的根本问题是，无论机器的性能特征如何，您都在强制进行 256 次不同的更新。您不必使用 255 和 0 之间的每一个 alpha 混合值。您可以跳过一些值并仍然具有平滑的淡入淡出。

您需要考虑机器的实际图形性能。由于您无法预测，因此您应该在淡入淡出代码中考虑实时。无论您的机器的性能特点如何，这样做都会为您提供一致的褪色率。

所以，这里有一个简单的例子来演示将淡入淡出率与实时联系起来：

```
procedure TfrmMain.btnClose1Click(Sender: TObject);
var
  Stopwatch: TStopwatch;
  NewAlphaBlendValue: Integer;
begin
  Stopwatch := TStopwatch.StartNew;
  while True do
  begin
    NewAlphaBlendValue := 255-(Stopwatch.ElapsedMilliseconds div 4);
    if NewAlphaBlendValue>0 then
      AlphaBlendValue := NewAlphaBlendValue
    else
      break;
  end;
  Close;
end; 
```

淡入淡出的持续时间为 1 秒。您可以轻松地调整数学以根据您的要求修改持续时间。即使在性能不佳的机器上，此代码也会产生平滑的淡入淡出。

我还要评论说，您不应该`drmMain`在`TfrmMain`方法中使用全局变量。该`TfrmMain`方法已经可以访问该实例。它是`Self`。当然，您可以省略`Self`. 更`ProcessMessages`糟糕的是。这允许对排队的输入消息进行重入处理。你不希望这种情况发生。所以删除对`ProcessMessages`.

* * *

您实际上询问是否检测“*调整以获得最佳性能*”设置。但我认为这是一个错误的问题。首先，您应该修复您的淡入淡出代码，以便淡入淡出持续时间与图形性能无关。

完成此操作后，如果用户要求较低质量的外观设置，您可能仍希望禁用淡入淡出。我认为您不应该寻找您提到的 3 个罐装选项之一。它们很可能是特定于 Windows 版本的。在最小化和最大化设置时，我个人会将行为基于*Animate 窗口。*我的理由是，如果用户不希望最小化和最大化动画，那么大概他们不希望关闭窗口被淡化。

以下是读取该设置的方法：

```
function GetWindowAnimation: Boolean;
var
  AnimationInfo: TAnimationInfo;
begin
  AnimationInfo.cbSize := SizeOf(AnimationInfo);
  if not SystemParametersInfo(SPI_GETANIMATION, AnimationInfo.cbSize,
      @AnimationInfo, 0) then
    RaiseLastOSError;
  Result := AnimationInfo.iMinAnimate<>0;
end; 
```

我认为您可能关心的大多数其他设置也可以使用[`SystemParametersInfo`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms724947.aspx). [您应该能够按照文档](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms724947.aspx)了解如何执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T21:59:45.663

对于迟到的后续行动感到抱歉，但我花了一段时间才弄清楚我的问题及其背后的一些问题的有效答案。

首先，感谢 David Heffernan 对处理淡入淡出循环的更好方法以及 Delphi 诊断单元中有关 TStopWatch 功能的信息的深入了解，非常感谢。

关于能够确定 Windows 的性能设置...

使用以下未优化的淡入淡出循环时

```
procedure TfrmMain.btnFadeNCloseClick(Sender: TObject);
var
  i : Integer;
begin
  for i := 255 downto 0 do 
    frmMain.AlphaBlendValue := i;

  Close;
end; 
```

导致性能问题的实际**Windows 性能选项**设置是“***启用桌面合成***”和“***在 Windows 和按钮上使用视觉样式***”。如果启用了这两个选项，则没有问题，如果未启用任一设置，则循环爬网**（如果表单最大化，我的系统上大约需要 12 秒）。

事实证明，打开或关闭**Aero Glass**会影响这两个相同的设置。因此，能够检测 Aero Glass 是否打开使我能够确定是否在我的应用程序中启用表单效果，例如过渡淡入淡出和其他吸引眼球的效果。另外，现在我还可以在我的错误报告中捕获这些信息。

> **请注意，这似乎是 NVidia 问题/错误，或者至少是在配备 NVidia 显卡的系统上更为严重的问题。在 2 个不同的 NVidia 系统上（如果不是最新的驱动程序的话），我得到了类似的混合形式淡入淡出的结果——如果 Aero Glass 开启，则不到 0.001 秒，如果 Aero Glass 关闭，则大约 12 秒。在带有 Intel 显卡的系统上 - 如果 Aero Glass 开启则少于 0.001 秒，如果 Aero Glass 关闭则大约 3.7 秒。现在允许我的测试样本很小，3 个 NVidia 系统（包括我最初报告问题的客户）和一个非 NVidia 系统，但如果我使用的是像样的 NVidia 显卡，我不会费心关掉 Aero Glass。

下面是检测是否通过 Delphi 启用 Aero Glass 的工作代码： 此功能已在 Windows7 64 位系统上进行了测试，可与 Delphi 2007、2010 和 Xe2（32 和 64 位）一起使用。我在网上找到的所有各种版本的 Delphi 函数都被破坏了 - 以及人们抱怨访问冲突错误的评论。最终揭示修复错误代码的是 Gerry Coll 对[Delphi 中的 AccessViolationException - 不可能（检查它，难以置信...）](https://stackoverflow.com/questions/7198646/accessviolationexception-in-delphi-impossible-check-it-unbelievable)的回应，这是关于尝试修复同一类型函数中的 AV 错误。

```
function  ISAeroEnabled: Boolean;
type
  _DwmIsCompositionEnabledFunc = function(var IsEnabled: Bool): HRESULT; stdcall;
var
  Flag                       : BOOL;
  DllHandle                  : THandle;
  OsVersion                  : TOSVersionInfo;
  DwmIsCompositionEnabledFunc: _DwmIsCompositionEnabledFunc;
begin
  Result:=False;
  ZeroMemory(@OsVersion, SizeOf(OsVersion));
  OsVersion.dwOSVersionInfoSize := SizeOf(TOSVERSIONINFO);

  if ((GetVersionEx(OsVersion)) and (OsVersion.dwPlatformId = VER_PLATFORM_WIN32_NT) and
      (OsVersion.dwMajorVersion = 6) and (OsVersion.dwMinorVersion < 2)) then //Vista&Win7 only (no Win8)
  begin
    DllHandle := LoadLibrary('dwmapi.dll');
    try
      if DllHandle <> 0 then
      begin
        @DwmIsCompositionEnabledFunc := GetProcAddress(DllHandle, 'DwmIsCompositionEnabled');
        if (@DwmIsCompositionEnabledFunc <> nil) then
        begin
          if DwmIsCompositionEnabledFunc(Flag)= S_OK then
           Result:= Flag;
        end;
      end;
    finally
      FreeLibrary(DllHandle);
    end;
  end;
end; 
```

# jsf-2 - JSF2 Viewscope 验证问题

> ID：13912832
> 
> 赞同：0
> 
> 时间：2012-12-17T10:59:42.750
> 
> 标签：jsf-2

尝试根据下拉列表值动态显示页面。所有关联的组件都在正确呈现。当我的 bean 在视图范围内时，验证不会触发，而会话范围内同样可以正常工作。任何人都可以帮我解决问题？

下面是我的 Main.xhtml 代码。此页面包含下拉列表。基于下拉值动态包括页面。

```
<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:c="http://java.sun.com/jsp/jstl/core"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:ui="http://java.sun.com/jsf/facelets">
<ui:composition template="#{templates.standard}">
<ui:define name="contentArea">
<c:choose>
<c:when test="#{testBean.value == '1'}">
<h:panelGroup>
<ui:include src="Page1.xhtml" />
</h:panelGroup>
</c:when>
<c:when test="#{testBean.value == '2'}">
<h:panelGroup>
<ui:include src="Page2.xhtml" />
</h:panelGroup>
</c:when>
</c:choose>
</ui:define>
</ui:composition>
</html>

The below Page1.xhtml will be included dynamically in Main.xhtml 

<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:ui="http://java.sun.com/jsf/facelets">
<h:panelGroup>
<h:inputText value="#{testBean1.date}"
id="date" 
required="true" requiredMessage="Enter Valid date">
<f:validator validatorId="test.TestDateValidator" />        
</h:inputText>  
</h:panelGroup>
<h:panelGroup>
<h:message for="date"/>
</h:panelGroup> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T11:58:15.150

视图范围的 bean 存储在 JSF 视图中。JSF 视图仅在构建后可用。像 JSTL 这样的标记处理程序`<c:xxx>`在视图构建期间运行。因此，它们在 JSF 视图可用之前运行。因此，当您将视图范围 bean 的属性绑定到 JSTL 标记属性时，它不会引用 JSF 视图中的视图范围 bean 实例，而是引用一个新创建的实例，所有属性都设置为默认值。

因此，基本上，您最终会在每个请求的基础上得到两个不同的视图范围 bean 实例。一种在恢复视图期间使用（在每次提交表单时重新创建的一种），另一种在处理表单提交期间使用（实际存储在视图范围中的一种）。

这个鸡蛋问题已被报告为[JSF 问题 1492](http://java.net/jira/browse/JAVASERVERFACES-1492)，并已在即将到来的 JSF 2.2 中修复。

在那之前，最好的办法是创建一个单独的请求范围 bean，并让包含条件依赖于由 注入的请求参数`@ManagedProperty`，或者关闭部分状态保存（但这可能会影响内存/性能）。请注意，它`<ui:include>`也在视图构建期间运行，因此将其包装在具有该`rendered`属性的 JSF 组件中不会有任何帮助，因为它是在视图渲染期间进行评估的。

### 也可以看看：

*   [JSF2 Facelets 中的 JSTL...有意义吗？](https://stackoverflow.com/questions/3342984/jstl-in-jsf2-facelets-makes-sense)
*   [JSF 2.0 中的通信 -`@ViewScoped`在标记处理程序中失败](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html#ViewScopedFailsInTagHandlers)

# css - 显示：表格单元格以两个元素而不是三个元素居中

> ID：13912833
> 
> 赞同：1
> 
> 时间：2012-12-17T10:59:49.443
> 
> 标签：css, vertical-alignment

我有一个使用三个元素垂直居中未知高度的元素的工作示例：

```
<section>
    <div>
        <img src="http://placehold.it/100x100"/>
    </div>
</section>​ 
```

和CSS：

```
section {
  display: table;
  width: 100%;
  height: 100%;
  position: absolute;
  text-align: center;
}

div {
  display: table-cell;
  vertical-align: middle;
} 
```

这里还有一个 JSFiddle 示例：http: [//jsfiddle.net/Y6KS9/](http://jsfiddle.net/Y6KS9/)

但是，如果可能的话，我想避免使用不必要的包装器。例如，让 img 本身显示为表格单元格：

```
div {
  display: table;
  width: 100%;
  height: 100%;
  position: absolute;
  text-align: center;
}

img {
  display: table-cell;
  vertical-align: middle;
}
​ 
```

但是这不起作用 - 请参阅[http://jsfiddle.net/U2c9R/](http://jsfiddle.net/U2c9R/)上的 JSFiddle 示例- img 不在 div 中居中。

是否可以仅使用两个元素在其父级中垂直居中未知大小的图像？

**编辑：**我知道 Flexbox，并打算在 IE9 死后彻底抛弃表格单元黑客。但现在我需要支持旧浏览器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:59:56.070

您可以尝试使用 CSS3 [Flexible Box Model](http://www.w3.org/TR/css3-flexbox/)。

您应该检查浏览器的可用性。正如您通过`-webkit`供应商前缀看到的，我的示例目前仅适用于`-webkit`基于 - 的渲染引擎。但我很确定它适用于大多数现代浏览器。

以下是支持弹性盒模型的浏览器的概述：http: [//caniuse.com/#feat=flexbox](http://caniuse.com/#feat=flexbox)

```
div {
    display: -webkit-box;
    -webkit-box-pack: center;
    -webkit-box-align: center;
    height:100%;
    width:100%;
    position:absolute;
} 
```

**示例**：http: [//jsfiddle.net/U2c9R/4/](http://jsfiddle.net/U2c9R/4/)

## 更新

对于 CSS3 灵活盒模型的跨浏览器支持，您可以使用[Modernizr](http://modernizr.com/)和适当的[Polyfill](https://github.com/doctyper/flexie)，它增加了对`IE 6-9`和`Opera 10.0+`. 唯一的提示是，如果没有 JavaScript，这将无法工作。但也许这是一个选择？

# grails - grails 中的多行：sortableColumn

> ID：13912843
> 
> 赞同：0
> 
> 时间：2012-12-17T11:00:25.943
> 
> 标签：grails

如何在 ag:sortableColumn 标记中进行换行？

我试过了

```
<g:sortableColumn property="film.name" title="Line1\nLine2" /> 
```

和

```
<g:sortableColumn property="film.name" title="Line1<br />Line2" /> 
```

但这没有用。

换行符的正确语法是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T00:33:47.017

一种解决方法是使用 html 新行标记设置一个变量，`<br />`如下所示：

```
<c:set var="filmName">Line1<br />Line2</c:set> 
```

然后将您的变量放在列标题中：

```
<g:sortableColumn property="film.name" title="${filmName}" /> 
```

# php - MySQLdb Python 查询

> ID：13912848
> 
> 赞同：0
> 
> 时间：2012-12-17T11:00:38.623
> 
> 标签：php, python, mysql, mysql-python

我正在尝试将 SQL 查询从 PHP 转换为 Python 的 MySQLdb。

以下是 PHP 代码：

```
$query = "
        select
            `ip_address`.`address`,
            `interface`.`name`,
            `equipment`.`dns_hostname`,`interface`.`vrf_id`
        from
            `equipment` `equipment`
                inner join `tm_se_equipment` `tm_se_equipment`
                on `equipment`.`id` = `tm_se_equipment`.`equipment_id`
                    inner join `interface` `interface`
                    on `interface`.`equipment_id` = `equipment`.`id`
                        inner join `ip_address` `ip_address`
                        on `ip_address`.`if_id` = `interface`.`id`
        where
            (`ip_address`.`address` = '$ip_address') 
    "; 
```

我试图像这样翻译它，但没有成功，我得到的唯一结果是`()`：

```
ip_address = ipaddr.IPAddress(linknet)
linknet = "1.1.1.1"

cursor.execute("""SELECT `ip_address`.`address`, `interface`.`name`, `equipment`.`dns_hostname`, `interface`.`vrf_id` FROM `equipment` `equipment` INNER JOIN `tm_se_equipment` `tm_se_equipment` ON `equipment`.`id` = `tm_se_equipment`.`equipment_id` INNER JOIN `interface` `interface` ON `interface`.`equipment_id` = `equipment`.`id` INNER JOIN `ip_address` `ip_address` ON `ip_address`.`if_id` = `interface`.`id` WHERE `ip_address`.`address` = %s""", (ip_address,)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:32:48.210

尝试这个：

```
cursor.execute("""SELECT `ip_address`.`address`, `interface`.`name`, `equipment`.`dns_hostname`, `interface`.`vrf_id` FROM `equipment` `equipment` INNER JOIN `tm_se_equipment` `tm_se_equipment` ON `equipment`.`id` = `tm_se_equipment`.`equipment_id` INNER JOIN `interface` `interface` ON `interface`.`equipment_id` = `equipment`.`id` INNER JOIN `ip_address` `ip_address` ON `ip_address`.`if_id` = `interface`.`id` WHERE `ip_address`.`address` = '%s'""" % ip_address) 
```

或者，如果您尝试将 ip 地址作为参数来执行函数，则需要使用“？” 代替 ”％”

# android - 错误 android.content.ActivityNotFoundException

> ID：13912850
> 
> 赞同：1
> 
> 时间：2012-12-17T11:00:43.460
> 
> 标签：android, android-intent

我收到错误

`android.content.ActivityNotFoundException`

详细的

`No activity found to handle Intent{com.alpha.beta.SQLVIEW}`

即使在我的清单文件中我有：

```
<activity

android:name=".SQLView"

android:label="@string/title_activity_app" >

<action android:name="com.alpha.beta.SQLVIEW" />

<category android:name="android.intent.category.DEFAULT" />

</activity> 
```

加上我的意图看起来像：

```
Intent mi = new Intent("com.alpha.beta.SQLVIEW");

startActivity(mi); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T11:03:42.630

意图**SQLVIEW**中使用的名称与清单**SQLView**中使用的名称不同。

在意图：

```
Intent mi = new Intent("com.alpha.beta.SQLVIEW"); 
```

在清单中：

```
 android:name=".SQLView" 
```

它们应该是相同的，您也可以这样使用意图..

```
Intent mi = new Intent(this, SQLView.class);

startActivity(mi); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T11:05:09.910

开始新活动：

```
Intent mi = new Intent(Current_Activity.this,SQLView.class);

startActivity(mi); 
```

# javascript - 删除使用 highchart 生成的图表中的元素

> ID：13912856
> 
> 赞同：1
> 
> 时间：2012-12-17T11:00:56.103
> 
> 标签：javascript, highcharts

我正在使用 highchart 开发一个新网站。但是我对它的外观/设置有一点问题。

我想知道是否可以删除图像右侧的图例“东京，纽约，柏林，伦敦”？我想自己添加一个描述，并删除现有的。

![生成的图表](../Images/60faa0895072fb347f20647a3cb10e0f.png)

关于如何删除、修改或隐藏它的任何建议？（但我想保留图表中的线条。）
（它也占用了网站上不必要的空间）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T11:13:49.720

是的，你可以[在这里工作 JSFiddle](http://jsfiddle.net/zaheerahmed/67HQj/)。你必须设置

```
 legend: {
            enabled:false
        }, 
```

在 highcharts 代码中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T11:14:25.887

在提供的基本线示例中，如果您查看源代码并编辑以下 Javascript，您可以编辑/删除线系列标签以及实际数据值。

```
series: [{
    name: '**New Name**',
    data: [7.0, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6]
}, {
    name: 'New York',
    data: [-0.2, 0.8, 5.7, 11.3, 17.0, 22.0, 24.8, 24.1, 20.1, 14.1, 8.6, 2.5]
}, {
    name: 'Berlin',
    data: [-0.9, 0.6, 3.5, 8.4, 13.5, 17.0, 18.6, 17.9, 14.3, 9.0, 3.9, 1.0]
}, {
    name: 'London',
    data: [3.9, 4.2, 5.7, 8.5, 11.9, 15.2, 17.0, 16.6, 14.2, 10.3, 6.6, 4.8]
}] 
```

# php - 每次都创建 facebook 对象？

> ID：13912857
> 
> 赞同：0
> 
> 时间：2012-12-17T11:01:04.003
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

我有一个登录页面，它将根据用户的 facebook 登录详细信息将用户登录到我的 web 应用程序。

然后我创建一个会话来记住他们是谁。

我想知道的是，我应该在我的 web 应用程序的每个页面上创建和/或检查 facebook 凭据，还是应该简单地使用我在开始时创建的会话登录？

例如，一旦他们登录，我想允许他们从我的应用程序将消息发布到他们自己的 Facebook 墙上。我应该在他们通过重新创建 facebook 对象发布之前检查登录凭据，还是应该简单地使用会话中已经存储的登录详细信息并将其发布到他们的 facebook 墙上？

**更新：**

所以基本上，每次我想做一些与 Facebook 相关的事情时，我是否应该使用以下代码作为模板，比如发布到他们的墙上、登录等？

```
<?php

    session_start();

    # The facebook library
    require_once("facebook.php");

    # Create facebook object
        $config = array();
        $config['appId'] = 'appId goes here';
        $config['secret'] = 'secret goes here';
        $config['fileUpload'] = false; // optional

        $facebook = new Facebook($config);  

    # Check if user has active facebook session
    $user_id = $facebook->getUser();

        if ($user_id) {

            try {

                // do something here

            } catch (FacebookApiException $e) {

                error_log($e);
                $user_id = null;

                exit;

            }

        } else {

            $loginUrl = $facebook->getLoginUrl();
            header("Location: ".$loginUrl);
    } 
```

?>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:03:46.090

我会在每个请求中检查用户，以防万一您有可能允许用户自己创建会话的脆弱代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T11:05:17.163

我会检查每个请求的用户。如果你想通过 facebook api 发帖，你需要有一个有效的 facebook access_token。如果您检查每个页面（结合 js SDK），那么用户将再次登录到您的站点，而不是您收到访问令牌错误并不得不要求他们再次登录

# c# - 在 IIS 上运行网站时存储到共享网络驱动器时出错

> ID：13912864
> 
> 赞同：0
> 
> 时间：2012-12-17T11:01:47.477
> 
> 标签：c#, asp.net, network-drive, access-rights

```
System.UnauthorizedAccessException: Access to the path '\\server\c$\DTA\DTA564348.64U20121217161754.dta' is denied. 
```

当我通过在本地 asp.net 网站上运行来存储文件时，它工作正常并存储在共享网络驱动器上

但是，当我通过 IIS 运行它时，出现上述错误

C# 代码

```
 StrPath = FilePhypath.ToString(); 
```

网络配置

```
<location allowOverride="true">
<appSettings>
        <add key="FilephyPath" value="\\server\c$\DTA\"/>
  </appSettings>
    </location> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T11:04:06.343

您的本地 IIS 可能正在使用模拟或具有管理访问权限的用户运行。您是否检查过远程服务器上的 IIS 用户对文件共享具有读写权限？如果不是，请检查您的应用程序池用户 ID 和文件夹权限。

# r - 保存时空的R环境变成大文件

> ID：13912867
> 
> 赞同：19
> 
> 时间：2012-12-17T11:02:17.620
> 
> 标签：r

保存环境时出现我不理解的行为。下面的代码演示了这个问题。我本来希望这两个文件（`far-too-big.RData`和`right-size.RData`）大小相同，而且非常小，因为它们包含的环境是空的。

事实上，`far-too-big.RData`最终的大小与`bigfile.RData`.

我在 WinXP 5.1 SP3 上使用 2.14.1 和 2.15.2 得到了相同的结果。谁能解释为什么会这样？

两者`far-too-big.RData`和`right-size.RData`，当加载到新的 R 会话中时，似乎什么都不包含。即他们返回`character(0)`响应`ls()`。但是，如果我将保存切换为 include `ascii=TRUE`，并在文本编辑器中打开结果，我可以看到其中`far-too-big.RData`包含`bigfile.RData`.

```
a <- matrix(runif(1000000, 0, 1), ncol=1000)
save(a, file="bigfile.RData")
fn <- function() {
    load("bigfile.RData")
    test <- new.env()
    save(test, file="far-too-big.RData")
    test1 <- new.env(parent=globalenv())
    save(test1, file="right-size.RData")
}
fn() 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-17T13:55:50.167

这不是我的专业领域，但我相信环境是这样工作的。

*   任何环境都会继承其父环境中的所有内容。
*   所有函数调用都会创建自己的环境。

在您的情况下，上述结果是：

1.  当您运行`fn()`它时，它会创建自己的本地环境（绿色），默认情况下其父级是`globalenv()`（灰色）。
2.  当您在其父级中创建环境`test`（红色）时，默认为' 的环境（绿色）。因此将包括对象。`fn()``fn()``test``a`
3.  当您创建环境`test1`（蓝色）并明确声明其父级是`globalenv()`它与`fn()`环境分离并且不继承对象时`a`。

因此，在保存时，`test`您还保存了 object 的（有些隐藏的）副本`a`。保存时不会发生这种情况，`test1`因为它不包含对象`a`。

![在此处输入图像描述](../Images/7a4988c0ba7a89d9c22191f62392e083.png)

### 更新

显然，这是一个比我以前认为的更复杂的话题。虽然我现在可能只是引用@joris-mays 的回答，但我想最后尝试一下。

对我来说，最直观的环境可视化是树形结构，见下文，其中每个节点都是一个环境，箭头指向其各自的封闭环境（我想相信它与其父级相同，但必须做框架，超出了我的世界角落）。给定的环境*包含*您通过向下移动树可以到达的所有对象，并且它可以*访问*通过向上移动树可以到达的所有对象。当您保存环境时，您似乎保存了所有对象和环境，这些对象和环境都被它包围并且可以从它访问（除了`globalenv()`）。

然而，带回家的信息正如 Joris 已经说过的那样：将您的对象保存为列表，您无需担心。

![在此处输入图像描述](../Images/d16ecb9d53ec2ec7c05913a49aa8ea94.png)

如果您想了解更多信息，我可以推荐 Norman Matloff 的优秀书籍[《R 编程艺术》](http://nostarch.com/artofr.htm)。它的目标是 R 中的软件开发，而不是主要的数据分析，并假设您有相当多的编程经验。我必须承认我还没有完全消化环境部分，但由于这本书的其余部分写得很好，教学法也很好，我认为这一部分也是。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-18T15:24:37.777

实际上，这与@Backlin 显示的相反：父环境是包含其他环境的环境。因此，在您定义的情况下， 的封闭环境`test`是 的本地环境`fn`， 的封闭环境`test1`是全局环境，如下所示：

![在此处输入图像描述](../Images/68b7f75ce595e160f365b870594a78fb.png)

环境的行为与 R 中的其他对象不同，因为它们在传递给函数或在赋值中使用时不会被复制。环境对象本身内部由指向的**指针**组成：

*   一个框架（这是一个包含值的对列表）
*   封闭环境（如上所述）
*   哈希表（如果环境未哈希，则为列表或 NULL）

环境包含指针这一事实使一切变得不同。环境并不是那么容易处理，它们实际上非常棘手。看看下面的代码：

```
> test <- new.env()
> test$a <- 1
> test2 <- test
> test2$a <- 2
> test$a
[1] 2 
```

`test`因此，您从in复制的唯一内容`test2`是指针。如果您更改 中的值`test2`，您`test`也会更改其中的值。（实际上，您只更改该值一次，但`test`都`test2`指向同一帧）。

当你试图保存一个环境时，R别无选择，只能获取框架、哈希表和封闭环境的值并保存它们。由于封闭环境本身就是一个环境，R 还将保存所有封闭环境，直到它到达全局环境。由于全局环境在内部代码中以特殊方式处理，因此（幸运的是）没有保存在文件中。

注意封闭环境和父框架之间的区别：假设我们定义我们的函数有点不同：

```
a <- matrix(runif(1000000, 0, 1), ncol=1000)
save(a, file="bigfile.RData")
fn <- function() {
    load("bigfile.RData")
    test <- new.env()
    save(test, file="far-too-big.RData")
    test1 <- new.env(parent=globalenv())
    save(test1, file="right-size.RData")
}

fn2 <- function(){
    z <- matrix(runif(1000000,0,1),ncol=1000)
    fn()
}
fn2() 
```

现在我们有以下情况：

![在此处输入图像描述](../Images/b2f85a308ccaa01450a6ff298303a665.png)

有人会认为文件“far-too-big.RData”同时包含矩阵 a 和矩阵 z，但事实并非如此。它只包含矩阵a。这是因为封闭**环境**是`fn`全局环境。的父**框架**是`fn`的环境`fn2`，但创建的环境对象`fn`包含一个指向全局环境的指针。

另一方面，如果我们执行以下操作：

```
fn <- function() {
    load("bigfile.RData")
    test <- new.env()
    test$b <- a
    test2 <- new.env(parent=test)
    save(test2, file="far-too-big.RData")
} 
```

`test2`现在包含在两个环境中（being`test`和 的环境`fun`），并且这两个环境也都保存在文件中。所以你得到这种情况：

![在此处输入图像描述](../Images/9fef276132c6a6325aa0cb6fb17707eb.png)

不管怎样，我个人避免将环境保存为环境，因为可能出错的地方更多。在我看来，将环境保存为列表在 99.9% 的情况下是更好的选择：

```
fn2 <- function(){
    load("bigfile.RData")
    test <- new.env()
    test$x <- "something"
    test$fn <- ls
    testlist <- as.list(test)
    save(testlist, file="right-size.RData")
}
fn2() 
```

如果你需要它是一个环境，你可以在加载时将它转换回来。

```
load("right-size.RData")
test <- as.environment(testlist) 
```

# c++ - 实现多进程日志记录的最佳方式（C++）

> ID：13912869
> 
> 赞同：3
> 
> 时间：2012-12-17T11:02:26.690
> 
> 标签：c++, logging, multiprocessing

我搜索实现多进程日志记录的机制（跨平台解决方案，windows 和 linux）。目前，我只看到一种方法 - 使用带锁定的日志文件。锁定 - 写入，解锁。

但可能有人知道更好的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T11:05:24.450

创建一个记录器应用程序并通过 TCP 套接字向它发送日志条目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T11:06:21.073

好伙伴是生产者/消费者。

每个线程都在一个列表中排队。一个线程使用这个列表并写入一个文件。

# windows - Wicket - Internet Explorer 双重提交

> ID：13912874
> 
> 赞同：1
> 
> 时间：2012-12-17T11:02:41.280
> 
> 标签：windows, internet-explorer-8, internet-explorer-7, wicket

我对 Internet Explorer 7 和 8 有一个大问题。

情况：

我有一个建立医疗处方的表格。当我点击保存按钮时，脚本将 DomainObject 保存在 DB 上，并将名为“已保存”的布尔属性（添加表单的面板）设置为 true，并将名为 PDF 的字节 [] 属性设置为带有字节流的 PDF。

在 Panel 的 RenderHead 上，我读取了这个布尔值，如果为真，我使用以下代码强制触发隐藏按钮：

```
String js = "$('#" + printPDF.getMarkupId() + "').click();";    
response.renderOnDomReadyJavaScript(js); 
```

该按钮执行以下代码：

```
 ResourceStreamRequestHandler handler = new ResourceStreamRequestHandler(new ByteArrayResourceStream(pdf, "application/pdf"));
    handler.setFileName("foo.pdf");             
    RequestCycle.get().scheduleRequestHandlerAfterCurrent(handler); 
```

此代码在 FF 和 Chrome 上完美运行。出现浏览器下载窗口，用户可以将 PDF 保存为高清格式。

不幸的是，Internet Explorer 具有当站点需要下载某些内容时触发的该死的安全行为。该警告需要用户验证。出现一个黄色条，用户被迫点击“下载”。

[截图 http://imageshack.us/a/img198/1438/securityg.jpg](http://imageshack.us/a/img198/1438/securityg.jpg)

当我点击下载文件时，表单再次提交，与我第一次点击保存时的状态完全相同。因此，没有先前在 DB 上的 INSERT 已经提交；会话被重置为以前的状态等......

结果是域对象的数据库上的双重插入。

有什么线索可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-15T19:39:15.733

问题是您以编程方式单击下载链接，而不是将浏览器重定向到 URL 或通过 JS window.open(url) 打开 URL。单击链接看起来像是有时受浏览器限制的不需要的操作。

# grid - 我想根据 ExtJs Grid 中的状态显示记录字段

> ID：13912881
> 
> 赞同：0
> 
> 时间：2012-12-17T11:03:27.653
> 
> 标签：grid, extjs4, datagridtemplatecolumn

我正在使用`ExtJs 4`，并添加了一个网格来显示我的记录。网格还在每一行上显示图像。显示我正在使用的图像`templatecolumn xtype`。每条记录可以有一个或两个图像。它的`{id}_original.{extension} or {id}.{extension}`.

我的问题是，如果只有一张图像，我想在网格上的两个字段中显示它。

这是我的代码：

**网格列定义**

```
 columns: [
                    {
                        text: 'ID',
                        hideable: false,
                        dataIndex: 'id'
                    },
                    {
                        xtype: 'booleancolumn', 
                        text: 'Aktif mi?',
                        dataIndex: 'publishableFlag',
                        trueText: 'Evet',
                        falseText: 'Hayır'
                    },
                    {
                        text: 'Kullanıcı',
                        dataIndex: 'ownerName'
                    },
                    {
                        text: 'Yükseklik',
                        dataIndex: 'fileHeight'
                    },
                    {
                        text: 'Genişlik',
                        dataIndex: 'fileWidth'
                    },
                    {
                        text: 'Ürün',
                        dataIndex: 'productId'
                    },
                    {
                        text: 'Orjinal Fotoğraf',
                        xtype:'templatecolumn',
                        flex: 1,
                        tpl: '<a href="'+path+'{id}_original.{fileExtension}" target="_blank"><img src="'+path+'{id}_original.{fileExtension}" height=100 width=100 /></a>'
                        //checkImageExist(path + '{id}_original.{fileExtension}', this) ? '<a href="'+path+'{id}_original.{fileExtension}" target="_blank"><img src="'+path+'{id}.{fileExtension}" height=100 width=100 /></a>' : 'noldu yaa'
                    },
                    {
                        text: 'Güncellenen Fotoğraf',
                        xtype:'templatecolumn',
                        flex: 1,
                        tpl: '<a href="http://www.kaft.com/static/images/photos/{id}.{fileExtension}" target="_blank"><img src="http://www.kaft.com/static/images/photos/{id}.{fileExtension}" height=100 width=100 /></a>'
                    }
                ] 
```

**这是检查图像是否退出的代码**

```
 function checkImageExist(url, d) 
    {
        console.log(url, d);
        var img = new Image();
        img.src = url;
        return img.height != 0;
    } 
```

我不需要编写其余的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:50:51.317

你应该能够通过两种方式做到这一点。

要么使用普通渲染器：

```
{
    text: 'Orjinal Fotoğraf',     
    flex: 1,
    renderer: function ( aValue, aMetaData, aRecord ) {
        return checkImageExist( path + aRecord.id + '_original.' + aRecord.fileExtension, this) ? '<a href="'+path+' + aRecord.id' +_original.' + aRecord.fileExtension + '" target="_blank"><img src="'+path+ aRecord.id + '.' + aRecord.fileExtension + '" height=100 width=100 /></a>' : 'noldu yaa';
    } 
```

或者使用 Xtemplate，大致如下：

```
this.MyTpl = new Ext.XTemplate (
    '<a href="'+path+'{id}_original.{fileExtension}" target="_blank"><img src="'+path+'{id}_original.{fileExtension}" height=100 width=100 /></a>[this.checkImageExist( values.url, values.d )]'

    {
       disableFormats: true,
       checkImageExist: function ( aUrl, aD )
          {
              console.log( aUrl, aD );
              var img = new Image();
              img.src = aUrl;
              return img.height != 0 ? '<a href="'+path+'{id}_original.{fileExtension}" target="_blank"><img src="'+path+'{id}.{fileExtension}" height=100 width=100 /></a>' : 'noldu yaa'
          }
    }
); 
```

# php - 为什么重定向不起作用？

> ID：13912886
> 
> 赞同：1
> 
> 时间：2012-12-17T11:03:48.317
> 
> 标签：php, redirect

我正在尝试将用户键入的所有 URL 登录到数据库。

在此之后，如果路径存在，我想将用户重定向到路径

否则我想将用户留在根目录中。

**我输入的网址** `http://www.mydomain.com/folder1/index.php`

**输出画面**

```
folder1/index.php
Array ( [0] => folder1 [1] => index.php ) url = to folder 1
folder1/index.php 
```

**根目录 index.php**

```
<?php
        if ($_GET['url']!= "") {
            // url not empty there is query string
            $url = $_GET['url'];
            $url = rtrim($url, '/');

            echo ($url.'<br />');
            $url = explode('/', $url);
            $file = $url[0];
            print_r($url);
        }

        else // url empty it is root directory
            {echo ('<br /> url empty <br />');}

        if ($url[0] == 'folder1'){
            echo ('url = to folder 1<br />');
            $path = $url[0].'/index.php';

            //the path exists do redirect to folder1/index.php
            echo $path ;
                 header( 'Location: http://www.mydomain.com/{$path}' ) ;
        }
?> 
```

**Htaccess**

```
RewriteEngine on
Rewritecond %{HTTP_HOST} !^www\.mydomain\.com
RewriteRule (.*) //www.mydomain.com/$1 [R=301,L]
RewriteRule \.(sql)$ - [F]
RewriteRule \.(txt)$ - [F]
RewriteRule \.(zip)$ - [F]
RewriteRule \.(rar)$ - [F]

<IfModule mod_rewrite.c>
# For security reasons, Option followsymlinks cannot be overridden.
#  Options +FollowSymLinks
   Options +SymLinksIfOwnerMatch
   Options -Indexes
   RewriteEngine On
   RewriteCond %{http_host} ^mydomain.com [NC]
   RewriteRule ^(.*)$ http://www.mydomain.com/$1 [R=301,NC]
   RewriteRule ^([^\.]+)$ index.php?url=$1 [QSA,L,NE]
</IfModule>

RewriteEngine On
RewriteCond %{QUERY_STRING} ^(.*)$
RewriteRule ^(.+)$ index.php?url=$1 [QSA,L,NE] 
```

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T11:07:19.190

我认为它的引号问题用双引号改变

```
 header( "Location: http://www.mydomain.com/{$path}" ) ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T11:06:21.967

删除此行之前并在之后`echo`写入`exit();`

```
header( "Location: http://www.mydomain.com/{$path}" );
exit(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T11:25:38.730

任何 html 输出都不应该在

header('位置：[http](http://www.mydomain.com/) ://www.mydomain.com/ {$path}');

以下 2 行将帮助您避免在标题语句之前使用 htlm。

把 ob_start(); 在您的代码的开头。

将 ob_end_flush() 放在代码的末尾。

谢谢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T11:07:37.700

您不能在任何标题行之前有任何输出，因此您必须删除标题位置语句之前的所有回声：

```
<?php
    if ($_GET['url']!= "") {
        // url not empty there is query string
        $url = $_GET['url'];
        $url = rtrim($url, '/');

        $url = explode('/', $url);
        $file = $url[0];
    }

    else // url empty it is root directory
        {}

    if ($url[0] == 'folder1'){
        $path = $url[0].'/index.php';

        //the path exists do redirect to folder1/index.php
        header( "Location: http://www.mydomain.com/$path" ) ;
    } 
```

当你在字符串中使用变量时，你应该使用双引号而不是单引号。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T11:20:30.977

你应该像这样使用，（即）php变量应该来自引号并连接起来，

```
header( "Location: http://www.mydomain.com/".$path) ; 
```

**在重定向之前删除回声 - 必须**

# objective-c - 从情节提要访问按钮

> ID：13912891
> 
> 赞同：1
> 
> 时间：2012-12-17T11:04:00.580
> 
> 标签：objective-c, ios, xcode, storyboard

愚蠢而简单的问题，但我不得不问。

我在 Storyboard 上拖了一个按钮。如何访问它？用拖动“Ctrl”不提供。如何以编程方式更改 setVisible(Yes/No)？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T11:11:15.890

你需要一个 IBOutlet 到你的 UIButton

在您的视图控制器 h 文件中

```
IBOutlet UIButton *mybutton;

@property (nonatomic, retain) UIButton *mybutton; 
```

在你的 m 文件中

```
@synthesize mybutton; 
```

然后你应该能够做到：

```
[mybutton setAlpha:0]; 
```

# ruby - 在Ruby中的块内嵌套循环

> ID：13912895
> 
> 赞同：0
> 
> 时间：2012-12-17T11:04:17.537
> 
> 标签：ruby

我有一个辅助模块来生成数组哈希数据，类似于：

```
[{:date => d, :total_amount => 31, :first_category => 1, :second_category => 2,...},
 {:date => d+1, :total_amount => 31, :first_category => 1, :second_category => 2,...}] 
```

所以我制作的方法如下：

```
def records_chart_data(category = nil, start = 3.weeks.ago)
  total_by_day = Record.total_grouped_by_day(start)
  category_sum_by_day = Record.sum_of_category_by_day(start)

  (start.to_date..Time.zone.today).map do |date|
    {
      :date  => date,
      :total_amount => total_by_day[date].try(:first).try(:total_amount) || 0,
      Category.find(1).title => category_sum_by_day[0][date].try(:first).try(:total_amount) || 0,
      Category.find(2).title => category_sum_by_day[1][date].try(:first).try(:total_amount) || 0,
      Category.find(3).title => category_sum_by_day[2][date].try(:first).try(:total_amount) || 0,
    }
  end
end 
```

由于类别总是会改变，我尝试在这种方法中使用循环，例如：

```
def records_chart_data(category = nil, start = 3.weeks.ago)
  total_by_day = Record.total_grouped_by_day(start)
  category_sum_by_day = Record.sum_of_category_by_day(start)

  (start.to_date..Time.zone.today).map do |date|
    {
      :date  => date,
      Category.all.each_with_index do |category, index|             
        category.title => category_sum_by_day[index][date].try(:first).try(:total_amount) || 0,
      end
      :total_amount => total_by_day[date].try(:first).try(:total_amount) || 0
    }
  end
end 
```

但是 ruby​​ 警告我一个错误：

```
/Users/tsu/Code/CashNotes/app/helpers/records_helper.rb:10: syntax error, unexpected tASSOC, expecting keyword_end
      category.title => category_sum_by_day[index][d... 
```

为什么它说`expecting keyword_end`，我应该如何解决它？

* * *

`category_sum_by_day`它调用的方法如下所示：

```
def self.sum_of_category_by_day(start)
  records = where(date: start.beginning_of_day..Time.zone.today)
  records = records.group('category_id, date(date)')
  records = records.select('category_id, date, sum(amount) as total_amount')
  records = records.group_by{ |r| r.category_id }
  records.map do |category_id, value|
    value.group_by {|r| r.date.to_date} 
  end
end 
```

或者我应该改变这个方法来为上面的助手生成一个更友好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T11:12:27.573

```
Category.all.each_with_index do |category, index|             
  category.title => category_sum_by_day # ...snip!
end 
```

不幸的是，这段代码不符合 Ruby 的语法。问题是块的主体。`x => y`不是表达式，语法要求块的主体是表达式*。*

如果您想一次通过一个键值对生成哈希，请尝试以下组合`Hash::[]`,`Array#flatten`和 splat 运算符（即一元`*`）：

```
Hash[*5.times.map { |i| [i * 3, - i * i] }.flatten] 
```

结果，我将`records_chart_data`或多或少的最后一个表达式重写如下

```
(start.to_date..Time.zone.today).map do |date|
  categories = Hash[*Category.all.each_with_index do |category, index|
    [ category.title, category_sum_by_day[...] ]
  end .flatten]

  { :date  => date,
    :total_amount => total_by_day[date].try(:first).try(:total_amount) || 0
  }.merge categories
end 
```

如果你认为它不可读，你可以用一种不太复杂的方式来做，即：

```
(start.to_date..Time.zone.today).map do |date|
  hash = {
    :date  => date,
    :total_amount => total_by_day[date].try(:first).try(:total_amount) || 0
  }
  Category.all.each_with_index do |category, index|
    hash[category.title] = category_sum_by_day[...]
  end
  hash
end 
```

另一个想法是使用`Array#reduce`和采用更实用的方法。

```
(start.to_date..Time.zone.today).map do |date|
  Category.all.each_with_index.reduce({
    :date  => date,
    :total_amount => total_by_day[date].try(:first).try(:total_amount) || 0
  }) do |hash, (category, index)|
    hash.merge category.title => category_sum_by_day[...]
  end
  hash
end 
```

# php - php中的内存限制

> ID：13912897
> 
> 赞同：5
> 
> 时间：2012-12-17T11:04:27.413
> 
> 标签：php, curl

我正在发出一个 curl 请求，女巫已经完美地工作了几个星期，现在它返回了这个错误：

> 允许的内存大小为 262144 字节已用尽（尝试分配 76889 字节）

奇怪的部分是我检查了 php.ini 和 phpinfo 并且都告诉我内存限制是

> memory_limit 1028M

我也试过

```
ini_set("memory_limit","400M"); 
```

在文件顶部确保但仍然收到此错误。

这发生在开发和生产服务器中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:48:58.950

> DaveRandom 做到了。suhosin（我什至不知道我们已经安装了它）通过“过度保护”服务器而导致问题。
> 
> [forums.cpanel.net/f5/php-memory-limit-problem-69715.html][1] - TL；DR 它是由 suhosin 引起的。– 戴夫随机
> 
> 谢谢大家！
> 
> [1]：[http ://forums.cpanel.net/f5/php-memory-limit-problem-69715.html](http://forums.cpanel.net/f5/php-memory-limit-problem-69715.html)

UPS，以某种方式修复了该部分的错误，但 webapp 的另一部分正在抛出相同的错误。

我不知道在哪里看。它说 php info 中的内存限制为 1028M，如果我通过 ini_set 更改它，则使用 ini_get 出现新值，现在我已将 suhosin 设置为模拟。这以某种方式解决了第一个问题，但现在又出现了。

# jquery - 如何在滑动过程中保持 div 的边距？

> ID：13912898
> 
> 赞同：1
> 
> 时间：2012-12-17T11:04:30.533
> 
> 标签：jquery, css, sliding

```
<button id="btnHome">HOME</button>
<div id="gall"></div> 
```

CSS

```
#gall{
    margin-top:25px;
    height:70px;
    border:thin solid red;
} 
```

JS

```
$("#btnHome").click(function() {
    $('#gall').slideToggle("slow");
}); 
```

[在这个小提琴](http://jsfiddle.net/Bonaca/68myJ/18/)上，您可以看到`#gall`slidingDown 期间的上边距从`0`to开始`25px`，反之亦然。
我想`#gall`保持它的边距`25px`- 只是滑动保持这个边距值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T11:14:17.383

首先，给`!important`你`margin-top`这样的：

```
#gall{
  margin-top:25px !important;
  height:70px;
  border:thin solid red;
} 
```

其次，jQuery`slideToggle()`可以通过改变高度来隐藏和显示元素，谁知道jquery是否添加了其他css属性，解决方案是让你自己的动画像这样：

```
$("#btnHome").click(function() {
    $('#gall').animate({height:'toggle'},"slow");
}); 
```

祝你好运

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T11:11:52.790

这是 slideToggle 功能的一部分，它为高度和边距设置动画。由于在 javascript 中删除了边距，我们可以使用 !important 覆盖它，所以试试

```
#gall{
    margin-top:25px !important;
    height:70px;
    border:thin solid red;
} 
```

# c# - 使用 c# 将文件写入 URL 位置

> ID：13912899
> 
> 赞同：2
> 
> 时间：2012-12-17T11:04:43.873
> 
> 标签：c#, asp.net, .net

我想将文件写入同一云中的虚拟目录路径。

为了将文件写入本地，我们使用

```
File.WriteAllText('c:\temp\sample.text',string) 
```

同样，我想写入网络系统之类的。

```
File.WriteAllText('\\\10.11.144.29\e$\projects\Map.text',string) 
```

和虚拟目录位置一样。

```
File.WriteAllText('http://10.11.144.29/map/test.svg',string) 
```

是否可以使用 c# 写入 URL 位置？如果可能，可以使用什么类？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T11:08:59.013

```
WebClient client = new WebClient();
//client.Credentials = new NetworkCredential("username", "password");
client.UploadFile("http://10.11.144.29/map/test.svg","test.svg"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T11:17:38.327

```
File.WriteAllText(Server.MapPath(@"c:\temp\sample.text"),string).* 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T11:07:45.007

最后一个选项是不可能的，因为您需要 HTTP PUT 或 POST 才能使用`HttpWebClient`类或类似方法将二进制数据发送到 URL。

但是，您提供的示例 #1 和 #2 应该没问题，只要运行的代码在给定的网络位置具有足够的权限（即写入权限）

# amazon-dynamodb - DynamoDB 二级排序

> ID：13912900
> 
> 赞同：3
> 
> 时间：2012-12-17T11:04:46.523
> 
> 标签：amazon-dynamodb

我正在评估是否可以将 DynamoDB 用于我们的下一个项目，我们正在构建的与博客平台非常相似，这是一个简单的表

```
Blog Post
  ID - primary hash key
  Title
  DateCreated - primary range key
  Votes 
```

我已经阅读足够了解如何列出 - 博客文章列表，分页 - 使用上次获取的索引，获取帖子详细信息 - 获取一行，我将使用 DateCreate 进行排序，这是我的范围键。

我正在为如何对二级索引进行排序而苦苦挣扎。例如，如果我们有一个名为 Votes 的列，你如何做 Most Votes？我的解释是，您只能使用我已经在使用的范围索引进行排序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T14:29:02.130

## 更新

AWS 刚刚宣布了备受期待[的 Amazon DynamoDB 全球二级索引的普遍可用性，这些索引正在解决下面进一步讨论的](http://aws.typepad.com/aws/2013/12/now-available-global-secondary-indexes-for-amazon-dynamodb.html)[本地二级索引](http://aws.amazon.com/about-aws/whats-new/2013/04/18/amazon-dynamodb-announces-local-secondary-indexes/)的限制：

> 您现在可以使用项目主键以外的属性创建索引并执行查找。[...]
> 
> 现在，您在创建表时最多可以创建五个全局二级索引，每个索引都引用一个哈希键或一个哈希键和一个范围键。您还可以创建最多五个本地二级索引，并且可以选择将表的部分或全部属性投影到每个表的索引中。

有关这两种模型之间选择的更多详细信息，请参阅博客文章。

* * *

## 更正

正如 vartec 正确[指出的那样，在宣布](https://stackoverflow.com/questions/13912900/dynamodb-secondary-sort#comment24904643_16085723)[本地二级索引](http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/LSI.html)的那一天，我一直在提前添加这些信息，而没有正确分析手头的问题，实际上这些问题**并不适用**——具有讽刺意味的是，我只是强调了这一点我自己在[稍后对另一个问题的评论中](https://stackoverflow.com/questions/9166306/getting-values-out-of-dynamodb/9166812#comment23643022_9166812)：

> [...] 但是，请注意**本地**是一个关键的限制：本地二级索引是一种数据结构，它为给定的哈希键维护备用范围键 - 虽然这涵盖了许多现实世界的场景，但它不适用于任意非主键字段查询，例如手头的问题。

感谢[vartec](https://stackoverflow.com/users/60711/vartec)发现此错误，并为此处的误导表示歉意。

* * *

## 初始（错误）答案

[Amazon DynamoDB](http://aws.amazon.com/dynamodb/)刚刚宣布[支持本地二级索引](http://aws.amazon.com/about-aws/whats-new/2013/04/18/amazon-dynamodb-announces-local-secondary-indexes/) ~~来解决您的使用案例~~：

> [...] 我们将最新的功能称为本地二级索引 (LSI)。虽然 DynamoDB 已经允许您基于表的主键执行低延迟查询，即使规模非常大，LSI 现在让您能够对表中的其他属性（或列）执行快速查询。这使您能够执行更丰富的查询，同时仍然满足响应式、可扩展应用程序的低延迟需求。

另请参阅介绍性博客文章[Amazon DynamoDB 的本地二级索引以](http://aws.typepad.com/aws/2013/04/local-secondary-indexes-for-amazon-dynamodb.html)获取更详细的说明。

与 AWS 的往常一样，新功能首先发布时带有一个受限的功能集，随着时间的推移将会扩展：

> **现在，必须在创建 DynamoDB 表时定义**本地二级索引。将来，**我们计划为您提供为现有表添加或删除 LSI 的能力**。如果您想立即为现有的 DynamoDB 表配备本地二级索引，您可以使用 Elastic Map Reduce 从现有表中导出数据，然后使用 LSI 将其导入到新表中。*[强调我的]*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T13:02:04.770

看起来这是不可能的，您只能按范围哈希键排序

我将在内存中加载表格并在内存中对其进行排序。

# google-apps-script - 已发布 Web 应用程序的加载时间太慢

> ID：13912903
> 
> 赞同：2
> 
> 时间：2012-12-17T11:04:57.960
> 
> 标签：google-apps-script

脚本的执行时间较慢。虽然在浏览器中这么多很棒。而且，已发布的 Web 应用程序的加载时间非常难以忍受，其中包含垃圾（可能是因为 UI 是使用 UIBuilder 完成的，并且空格是使用 unicode 字符或其他字符）。

这里有两个问题。

1.  为了无缝响应，脚本人员是否希望完整的 javascript 被加载并在浏览器中运行，而我们对此无能为力？

2.  我们应该寻找的任何优化技术。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T17:24:22.840

我发现手动滚动 html 并交付`HtmlService`比`UIService`. 这显然取决于您的情况，具体取决于您对自己的验证器和`onEdit`函数编写脚本的信心。但作为一种可能的优化，这就是我要开始的地方。

# c# - 方法签名中的命名参数

> ID：13912909
> 
> 赞同：3
> 
> 时间：2012-12-17T11:05:22.153
> 
> 标签：c#, .net-4.0, optional-parameters, named-parameters

在 C# 中 - 可选参数 - 为其他未提供的参数创建一个补全。

所以如果我写：

```
void Go(int a, bool isFalse = true) 
```

并打电话`Go(a)`

它实际上为`Go(a, true)`.

命名参数**怎么样？切换顺序是如何**在幕后工作的？

例如 ：

```
 Go(isFalse:true, a:1) //order has been switched. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T11:10:15.880

例如，如果你有这样的东西

```
void Go ( int a , bool isFalse, bool isEmpty) 
```

在您调用后`Go(1,isEmpty : true, isFalse : false)`，它将生成这样的函数调用

```
Go ( 1, false, true) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T11:08:46.530

`Go(a)`将编译为`Go(a, true)`. 这意味着如果在引用库中更改参数的默认值，则需要重新编译调用代码。

根据经验，命名（和默认）参数只是一个编译器技巧。运行时级别的调用规则与之前的版本相同。

因此，调用`Go(isFalse = true, a = 1)`实际上将编译为`Go(1, true)`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T11:20:30.917

当你调用`Go(a)`它时调用`Go(a, true)`not `Go(a, false)`。例如;

```
using System;

namespace Programs
{
    public class Program
    {      
        public static void Main(string[] args)
        {
            Go(5);
        }

        static void Go(int a, bool isFalse = true)
        {
            Console.WriteLine("Int is {0}, Boolean is {1}", a, isFalse);
        }
    }
} 
```

输出是：

> Int 为 5，布尔值为 True

如果在调用时未使用它`isFalse`，则将其设置为。`true`但是，如果您关心订单，则必须使用您在方法中描述的订单。例如;

如果您有类似的方法

`SomeMethod(bool isFalse, bool isFull, bool isStacked)`

当你调用这个方法时

`SomeMethod(true, false, true)`

你的方法就像

`isFalse = true`,`isFull = false`和`isStacked = true`

因为订单。但有时当你的方法有很多参数可以混合顺序时，你可以使用带有的命名参数`C# 4.0`。哪个基于相同的方法，你可以这样；

`SomeMethod(isStacked: true, isFull: false, isFalse = true)`

等于调用

`SomeMethod(true, false, true)`

# asp.net - 只更新新记录 sql

> ID：13912913
> 
> 赞同：-1
> 
> 时间：2012-12-17T11:05:35.120
> 
> 标签：asp.net, sql, sql-server, tsql

表格1 ：

```
ID    Name   Number
1    James    2344 
```

如果我写

`Update Table(Name,Number) set Name = "James", Number = "11111"`

现在 Name = James 保持不变，数字是新的......但是当触发器启动时，它显示所有字段都已更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:06:55.227

```
UPDATE tableName
SET Number = 11111
WHERE Name = 'James' 
```

你应该有一个`WHERE`子句条件，所以只会`James`被更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T11:26:30.280

好像我知道您将首先检查该表是否存在数据以及是否相同。但是如果你做`UPDATE`的一切都是一样的，如果用户名是一样的，`TIM`什么时候`UPDATE`是一样`TIM`的，只运行一个sql来首先检查。

你的更新看起来不对

尝试这样做

```
 UPDATE tablename SET number = 11111, SET name = 'James' WHERE ID = 1 
```

这样它会更新`number`但名称会保留`James`

*   将`UPDATE`仅更新更改的值

编辑：它会在插入之前被选择。

我认为值得改变 - 但可能不值得在插入之前进行选择。

# .net - 使用一些代码登录网站并运行报告

> ID：13912915
> 
> 赞同：1
> 
> 时间：2012-12-17T11:05:45.073
> 
> 标签：.net

我知道这是一个奇怪的问题，但我的目的是完全合法的。我登录了一个网站，我每天都从中获取报告。现在我想自动化报告导出，这样我就不必每天去那里导出 3 次 csv 文件。

我问他们是否有我可以使用的 API，或者他们是否可以安排将报告导出到我的 FTP；但两者的答案是否定的。所以我想知道是否有一种方法可以让我编写一些代码并登录网站，然后每 6 小时获取我想要的内容......

如果我的问题没有意义，请告诉我。如果可能的话，我只是想要一些关于这个的想法。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:11:53.460

完全有可能，在 .net 中，您可以使用 WebClient 或 HttpWebRequest 像浏览器一样发送 HTTP 请求。我不能再具体了，因为我不能说网站有什么样的登录（post 或 htaccess）。但是您可以很容易地找到有关如何操作的示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T11:25:06.543

这取决于网站类型和身份验证：

1) 使用 WebClient 类

```
WebClient wc = new WebClient();
wc.Credentials = new NetworkCredential(username, password);
wc.DownloadFile(url, "c:\\"); 
```

2）如果第一个不起作用，您可以使用webbrowser控件实现它

```
 HtmlElement ele = webBrowser1.Document.GetElementById("email");
 if (ele != null)
    ele.InnerText = "username";

 ele = webBrowser1.Document.GetElementById("pass");
 if (ele != null)
    ele.InnerText = "pass";

 ele = webBrowser1.Document.GetElementById("Login");
 if (ele != null)
    ele.InvokeMember("click"); 
```

3）使用`HttpRequest`和`HttpResponce`...

# gcc - gtksourceview 的 Valac“未定义引用”错误

> ID：13912924
> 
> 赞同：2
> 
> 时间：2012-12-17T11:06:20.283
> 
> 标签：gcc, gtk, mingw, vala, gtksourceview

我目前正在 vala 开展一个项目，但无法编译该项目。文件通过valac，很好，但后来我得到这个错误：

> C:\Users\Andrew\AppData\Local\Temp/ccEYx9mD.o:EditorWindow.vala.c:(.text+0x437): undefined reference to `gtk_source_view_new' C:\Users\Andrew\AppData\Local\Temp/ccEYx9mD.o:EditorWindow.vala.c:(.text+0x48a): undefined reference to`gtk_source_view_set_auto_indent' C:\Users\Andrew\AppData\Local\Temp/ccEYx9mD. o:EditorWindow.vala.c:(.text+0x4a2): 未定义引用`gtk_source_view_set_indent_on_tab' C:\Users\Andrew\AppData\Local\Temp/ccEYx9mD.o:EditorWindow.vala.c:(.text+0x4ba): undefined reference to`gtk_source_view_set_show_line_numbers' C:\Users\Andrew\AppData\Local\Temp/ccEYx9mD.o:EditorWindow.vala.c:(.text+0x4d2):未定义引用`gtk_source_view_set_highlight_current_line' C:\Users\Andrew\AppData\Local\Temp/ccEYx9mD.o:EditorWindow.vala.c:(.text+0x4ea): undefined reference to`gtk_source_view_set_insert_spaces_instead_of_tabs' C:\Users\Andrew\AppData\Local\Temp/ccEYx9mD.o:EditorWindow.vala.c:(.text+0xf74): 未定义引用 `gtk_source_view_get_type'

失败的文件的代码如下：

```
using Gtk;
using Gtk.Stock;
using Gdk;

public class EditorWindow : GLib.Object
{
    public Gtk.SourceView EditorWindow {get;set;}
    public HBox TabHeader {get;set;}
    private Gtk.Image icon {get;set;}
    private Label name {get;set;}
    private Button closeButton {get;set;}
    public unowned Notebook parent {get;set;}

    public EditorWindow(File? file = null, Notebook parent)
    {
        //Interperet file data
        if(file == null)
        {
            this.name = new Label("testPage.cs");
        }
        else
        {
            //get all necessary file data
        }

        this.TabHeader = new HBox(false, 0);
        //this.name = new Label("testPage.cs");
        this.closeButton = new Button();
        this.closeButton.set_relief(ReliefStyle.NONE);
        this.closeButton.set_focus_on_click(false);
        this.closeButton.add(new Gtk.Image.from_stock(Gtk.Stock.CLOSE, IconSize.MENU));
        this.icon = new Gtk.Image.from_stock(Gtk.Stock.FILE, IconSize.MENU);
        this.TabHeader.pack_start(this.icon, false, false, 0);
        this.TabHeader.pack_start(this.name, true, true, 0);
        this.TabHeader.pack_start(this.closeButton, false, false, 0);
        this.EditorWindow = new Gtk.SourceView();
        this.EditorWindow.auto_indent = true;
        this.EditorWindow.indent_on_tab = true;
        this.EditorWindow.show_line_numbers = true;
        this.EditorWindow.highlight_current_line = true;
        this.EditorWindow.insert_spaces_instead_of_tabs = false;
        //parent.append_page(this.EditorWindow, this.TabHeader);

        //Read libraries to register objects and methods

        //Parse all lines and provide labels

    }

    public void ParseLibraries()
    {

    }

    public void ParseLocalFiles()
    {

    }

    public void ParseProjectFiles()
    {

    }
} 
```

该文件在这五行之后失败并显示`collect2: ld returne 1 exit status`.

知道如何解决这个问题吗？任何帮助将不胜感激。

**编辑**

我使用的命令行编译是：`valac Main.vala GUI.vala EditorWindow.vala -o Valarian.exe --enable-checking --pkg gtk+-2.0 --pkg gdk-2.0 --pkg gtksourceview-2.0 --thread`. 我在 Windows 上运行它，所以我使用的是 gtk/gdk/sourceview 2.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T14:45:44.890

链接时，MingW 有点奇怪。它可能需要多次引用同一个库。首先，尝试将顺序更改为 gtksourceview、gtk、gdk。这可能还不够。MingW 的链接器，由于复杂的原因，无法解析循环引用，所以你必须多次指定库。我使用`valac -C`然后调用：

i586-mingw32msvc-gcc -o mybin sources.c`pkg-config --cflags --libs gconf-2.0 gtk+-2.0 glib-2.0 gtk+-2.0 glib-2.0 gtk+-2.0 glib-2.0`

注意库的荒谬重复。如果您使用 MingW 交叉编译器进行构建，您可能还需要设置环境变量`PKG_CONFIG_PATH=$(MING_ROOT)/lib/pkgconfig`并将其传递给`pkg-config`参数`--define-variable=prefix=$(MING_ROOT)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T08:43:42.687

我不想在这里回答我自己的问题，但是由于我们的方向错误，所以这里是：

我遇到的编译器遇到“未定义引用”错误的问题是由 EditorWindow 类顶部的 SourceView 之前手动应用的命名空间“Gtk”引起的。由于 Vala 编译器的性质，它没有抛出错误，因为 SourceView 在 Gtk 命名空间下，但显然 valac 和 gcc 之间出现了问题。一旦我更改`Gtk.SourceView`为`SourceView`，程序就编译了。

# c# - 构建 linq 查询

> ID：13912927
> 
> 赞同：2
> 
> 时间：2012-12-17T11:06:34.420
> 
> 标签：c#, linq, entity-framework-5

我正在努力找出一个我认为是非常常见的情况的 linq 语句。假设下面的结构，我有很多用户，每个用户有很多日记，每个日记有很多小部件。

我想说，让我得到 UserName = 'bob' 和 Password = 'password' 的用户，以及 DisabledByAdmin == true 的用户日记和 DisabledByAdmin == true 的列表小部件只有上一条语句返回的日记。

假设数据是 1 个用户链接到 2 个日记（一个具有 DisabledByAdmin == true），并且这 2 个日记各有 2 个小部件（1 个具有 DisabledByAdmin == true），我想找回我的用户对象我的列表中有 1 个日记对象，每个日记中有 1 个小部件。

所以返回数据将是用户对象，在该日记集合中有一本日记和一个小部件。对于我的生活，我无法弄清楚。

任何人？

非常感谢拉尔夫

```
public class Widget
{
    [Key]
    public int Id { get; set; }
    public string Name { get; set; }
    public string Name { get; set; }
    public bool DisabledByAdmin { get; set; }
    public bool DisabledByUser { get; set; }
}
public class DigtalDiary
{
    [Key]
    public int Id { get; set; }
    public string Name { get; set; }
    public bool DisabledByAdmin { get; set; }
    public bool DisabledByUser { get; set; }
    public virtual List<Widget> Widgets { get; set; }
}
public class User 
{
    [Key]
    public int Id { get; set; }
    public string Password { get; set; }    
    public string UserName { get; set; }
    public virtual List<DigtalDiary> Diaries { get; set; } 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T11:14:48.053

就像是

```
 var users from u in UserList
          where u.UserName = "Bob" and u.Password = "123";

    var lookup = new Dictionary<int, List<DigitalDiary>>();
    foreach(var u in users)
    {
        var digitalDiaries = from dd in u.Diaries
                             where dd.DisabledByAdmin != true; //Or whatever your criteria
        lookup.add(u.Id, digitalDiaries.toList());
    } 
```

这将为您提供与您的条件匹配的 UserId 字典，以及该用户未禁用的 Ditital Diaries 列表等。然后您可以对小部件重复此操作（此外，这只是在此处的窗口中编码出来的，因此可能存在拼写错误）

编辑：你也可以使用

```
 new Dictionary<User, List<DigitalDiary>>(); 
```

如果您一完成就想要完整的用户字段。我只是习惯存放钥匙

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T11:23:40.587

如果我理解了这个问题**并且您正在使用 EntityFramework**

您可能需要使用 Select Projection 来满足您的要求。这个例子是一个 AND，使用 || 适当的或条件

```
var mylist = Context.Set<User>.Where(u=>u.Id==userId && u.Password==password
                              && u.Diaries.DiabledByAdmin == false
                              && u.Diaries.Widgets.DisabledByAdmin == false)
                          .Select(new {u.Id, u.Diaries.Id,u.Diaries.Widgets.Id}); //remove select if user Object desired 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T11:40:37.833

如果我理解正确，假设你有一个name`List`集合，你可以遍历这个列表，只获取你正在寻找的值。然后，如果找到您要查找的值，您可以将具有这些值的负责人添加到.`User``myUserList``User``List``User`

**例子**

```
List<User> myUserList = new List<User>(); //Initialize a new List of Users

//Add users to the list
myUserList.Add(new User() { UserName = "bob", Password = "password" });
myUserList.Add(new User() { UserName = "Joe", Password = "password" });
myUserList.Add(new User() { UserName = "Miranda", Password = "password" });
myUserList.Add(new User() { UserName = "Kevin", Password = "password" });
//

List<User> myGatheredList = new List<User>(); //Initialize a new List of Users of name myGatheredList (not required)
foreach (User _user in myUserList.Where(x => x.UserName == "bob" && x.Password == "password")) //Only get values which match a UserName of value 'bob' and a password of value 'password' as _user for every User
{
    Debug.WriteLine(_user.UserName); //Writes 'bob'.
    foreach (DigtalDiary _diary in _user.Diaries) //Get every DigitalDiary in _user.Diaries as _diary for every DigitalDiary
    {
        if (_diary.DisabledByAdmin /*&& _diary.Widgets.Count == x */ /* More conditions can be inserted here */) //Continue if _diary.DisabledByAdmin is true
        {
            foreach (Widget _widget in _diary.Widgets) //Get every Widget in _diary.Widgets as _widget for every Widget
            {
                if (_widget.DisabledByAdmin) //Continue if _widget.DisabledByAdmin is true
                {
                    if (!myGatheredList.Contains(_user)) //Continue if _user does not exist in myGatheredList
                    {
                        myGatheredList.Add(_user); //Add _user to myGatheredList (not required)
                       //Do something with _user
                    }
                }
            }
        }
    }
} 
```

**注意**：这只会获取至少一个`DigitalDiary`被管理员禁用且一个`Widget`被管理员禁用的用户。

谢谢，
我希望你觉得这有帮助:)

# typescript - Typescript - 加载外部模块并转换为单个 JS 文件

> ID：13912931
> 
> 赞同：1
> 
> 时间：2012-12-17T11:06:57.973
> 
> 标签：typescript

我有一个带有不同外部模块的 TypeScript 项目。例如，我使用以下语句导入模块并且它可以工作

```
import myExternalModule = module("http://mylocalapphost/tsmodules/mod1");
var myObject = new myExternalModule.importedInteface('var1', 'var2'); 
```

当我将带有 tsc 的 .ts 转换为 .js 时，我得到的只是这个：

```
var myExternalModule = require("http://mylocalapphost/tsmodules/mod1"); 
```

但我需要在这个 .js 文件中实现模块，就像一个内部模块。我该怎么做？

* * *

这是两个文件（抱歉命名错误......）：

```
// mod1.ts (at a local server)
export class importedClass {
  private prVar: number = 0;
  constructor(public var1: string, public var2: string){}
  public func1(km: number){
    this.prVar += km;
  }
  public getPrVar(){
    return this.prVar;
  }
}

// main.ts
import myExternalModule = module(" path to mod1 ");
var myObject = new myExternalModule.importedClass('string var1', 'string var2');
myObject.func1(20); 
```

结果，我想要**一个**.js 文件，其中包含**所有**导入的模块/类等，因为该应用程序在服务器上运行（不连接到放置模块的本地服务器），如下所示：

```
var importedClass = (function () {
    function importedClass(var1, var2) {
        this.var1 = var1;
        this.var2 = var2;
        this.prVar = 0;
    }
    importedClass.prototype.func1 = function (km) {
        this.prVar += km;
    };
    importedClass.prototype.getPrVar = function () {
        return this.prVar;
    };
    return importedClass;
})();
var myObject = new importedClass('string var1', 'string var2');
myObject.func1(20); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T11:48:35.977

如果你正在加载一个外部模块，而不是一个你有 TypeScript 代码文件或定义的模块，你最好声明这个`require`函数并像这样加载它：

```
declare var require: any;

var myExternalModule = require("http://mylocalapphost/tsmodules/mod1");
var myObject = new myExternalModule.importedInteface('var1', 'var2'); 
```

这将导致以下 JavaScript：

```
var myExternalModule = require("http://mylocalapphost/tsmodules/mod1");
var myObject = new myExternalModule.importedInteface('var1', 'var2'); 
```

没什么不同 - 但您可以选择在 TypeScript 中为代码添加类型，而不是让它纯粹是动态的！

关于具有单个 JS 文件输出 - 如果您使用的是模块加载，那并不是真正相关的。您的模块加载器处理在运行时获取文件。

# android - TextViews 和其他元素未显示

> ID：13912939
> 
> 赞同：0
> 
> 时间：2012-12-17T11:07:25.583
> 
> 标签：android

我有一个带有视图文本视图、表格和底部按钮的布局。无论表格的高度如何，我都希望按钮始终位于底部，因此我将布局更改为相对，这样我就可以做到这一点。

然而，这将所有文本视图和表格混合成一行。所以我把这些放在我认为可以解决问题的 RelativeLayout 中的 LinearLayout 中。现在的问题是只显示第一个 TextView 和底部的按钮。其他一切都不见了。

这是我用来定义此布局的 xml 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_margin="4dip"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true">

        <TextView
            android:id="@+id/view_meal_name"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="Spaghetti Bolognaise"
            android:textSize="25sp" />

        <TextView
            android:id="@+id/view_meal_type"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="Dinner"
            android:textSize="16sp" />

        <RelativeLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="10dip"
            android:layout_marginTop="10dip" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_toLeftOf="@+id/view_day_calories"
                android:text="@string/calories_label"
                android:textSize="18sp" />

            <TextView
                android:id="@+id/view_day_calories"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentRight="true"
                android:text="@string/calories_today_value"
                android:textSize="18sp" />
        </RelativeLayout>

        <View
            android:layout_width="fill_parent"
            android:layout_height="2dip"
            android:layout_marginBottom="10dip"
            android:background="@color/hr" />

        <ScrollView
            android:id="@+id/scrollView1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <LinearLayout
                android:id="@+id/linearLayout1"
                android:layout_width="match_parent"
                android:layout_height="wrap_content" >

                <TableLayout
                    xmlns:android="http://schemas.android.com/apk/res/android"
                    android:id="@+id/tableLayout1"
                    android:layout_width="wrap_content"
                    android:layout_height="match_parent"
                    android:layout_marginLeft="10dip"
                    android:layout_marginRight="10dip"
                    android:stretchColumns="0,1,2" >

                    <TableRow
                         android:id="@+id/tableRow1"
                         android:layout_width="wrap_content"
                         android:layout_height="wrap_content" >

                        <TextView
                            android:id="@+id/meal_table_ingred_title"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="@string/ingredient"
                            android:textAppearance="?android:attr/textAppearanceMedium" />

                        <TextView
                            android:id="@+id/meal_table_quantity_title"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="@string/quantity"
                            android:textAppearance="?android:attr/textAppearanceMedium" />

                        <TextView
                            android:id="@+id/meal_table_calories_title"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="@string/calories"
                            android:textAppearance="?android:attr/textAppearanceMedium" />
                    </TableRow>
                </TableLayout>
            </LinearLayout>
        </ScrollView>
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:weightSum="1.0" >

        <Button
            android:id="@+id/edit_meal_button"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight="0.5"
            android:text="@string/edit_meal_label" />

        <Button
            android:id="@+id/favourite_meal_button"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight="0.5"
            android:text="@string/favourite_meal_label" />
    </LinearLayout>

</RelativeLayout> 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T11:12:11.713

改变

```
<LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"> 
```

到

```
<LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:orientation="vertical"> 
```

# c++ - 多态性和纯虚函数

> ID：13912945
> 
> 赞同：-4
> 
> 时间：2012-12-17T11:07:53.363
> 
> 标签：c++, polymorphism

所以根据下面的评论，我想确认这段代码是非法的，原因包括：

1.  我们从抽象类 Employee 创建了一个对象 joe
2.  由于没有定义 printCheck()，它使 HourlyEmployee 成为像 Employee 一样的抽象类。因此，我们从一个抽象类中创建了对象 joe。

?

```
class Employee
{
public:
  Employee();
  Employee(const string& theName, const string& theSsn);
  string getName() const;
  string getSsn() const;
  double getNetPay() const;
  void setName(const string& newName);
  void setSsn(const string& newSsn);
  void setNetPay(double newNetPay);
  virtual void printCheck() const = 0;
private:
  string name;
  string ssn;
  double netPay;
};

class HourlyEmployee : public Employee
{
public: 
  HourlyEmployee(); 
  //<Some more legal member function definitions, none of which are 
  //pure virtual functions.> 
private: 
  double wageRate;
  double hours;
};

int main( )
{
  Employee joe; 
  joe = HourlyEmployee();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T11:28:50.077

违法的是：

Employee 是一个抽象基类。这一行：

```
Employee joe; 
```

本身是非法的，它正在创建您的抽象类的实例。

```
joe = HourlyEmployee(); 
```

即使这些类都是完整的，因为它会切片，这也是一个坏主意。joe 是一个对象，而不是一个引用。

如果 HourlyEmployee 仍然是抽象的（不实现 printCheck()），那么您的行当然是非法的，因为您正在创建一个的（临时）实例。

Incidentally if both classes were complete, thus the code compiled, but printCheck() remained virtual (not pure), then

```
joe.printCheck(); 
```

would invoke the Employee version not the HourlyEmployee version because joe is of type Employee and remains so in spite of the assignment. That is why slicing is mostly a bad idea.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T12:13:22.343

HourlyEmployee class needs to implements printCheck() function of the base class. Once you implement this function, HourlyEmployee is a objectable class.

# knockout.js - Kendo-Knockout：更改绑定元素的值时绑定中断

> ID：13912951
> 
> 赞同：0
> 
> 时间：2012-12-17T11:08:28.370
> 
> 标签：knockout.js, kendo-ui

我将使用先前提出的问题的代码进行细微更改，但情况不同：

[Kendo-Knockout：关闭窗口会破坏绑定](https://stackoverflow.com/questions/13884348/kendo-knockout-closing-window-breaks-bindings)

HTML：

```
<button onclick="openPopUp()">OpenPopUp</button>

<div id="productionStates" class="hidden">
    <div data-bind="kendoWindow: { isOpen: isOpen, title:'States', center:true, width: 600, height: 150, modal: true, resizable: false, actions: ['Maximize', 'Close'] }" >
        <fieldset>
            <legend>Change state:</legend>
            <table>
                <tr data-bind="foreach: productionStates">
                    <td><button class="k-button" data-bind="value: ProductionState, text: ProductionState" /></td>
                </tr>
            </table>
        </fieldset>
    </div>

</div> 
```

javascript:

```
 var ProductionStatesList = function() {
    var self = this;

    ProductionStatesList.prototype.productionStates = 
        ko.observableArray([ { ProductionState: ko.observable("Pending") } ]);

        ProductionStatesList.prototype.openPopUp = function () {
            self.isOpen(true);
        };     

        ProductionStatesList.prototype.isOpen = ko.observable(false);

        ProductionStatesList.prototype.close = function () {
            self.isOpen(false);
        }
};
    var elementIsBound = function (elementId) {
                return !!ko.dataFor(document.getElementById(elementId));
            };

    var myProductionStatesList = ko.observable();
    var openPopUp = function(){
        myProductionStatesList(new ProductionStatesList()); 
        if (!elementIsBound("productionStates")){
            ko.applyBindings(myProductionStatesList, document.getElementById("productionStates"));
        }

        myProductionStatesList().openPopUp(); 
    } 
```

`myProductionStatesList` 是一个可观察的。单击按钮弹出窗口打开，我正在实例化`ProductionStatesList`视图模型并将其值分配给`myProductionStatesList`. 第一次单击该按钮时，一切正常。当您关闭弹出窗口并再次单击按钮时，绑定被破坏并且没有任何反应。我希望在每次单击按钮时，ProductionStatesList 的新实例都会像`myProductionStatesList` 可观察的那样反弹。我错过了什么？

jsfiddle：

[http://jsfiddle.net/bZF9k/15/](http://jsfiddle.net/bZF9k/15/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T13:44:35.820

我认为在这种情况下你最好的选择是达到你不需要`ko.applyBindings`多次跟注的地步。

一个不错的选择是创建一个视图模型，该模型具有一个可观察的来保存您的当前`ProductionStatesList`和您的`openPopup`功能。然后，`with`在编辑器周围使用绑定。

视图模型可能看起来像：

```
var viewModel = {
    myProductionStatesList: ko.observable(),
    openPopup: function() {
       var newList = new ProductionStatesList();
       this.myProductionStatesList(newList);
       newList.openPopup();
    }
}; 
```

这是一个示例：http: [//jsfiddle.net/rniemeyer/wBCdK/](http://jsfiddle.net/rniemeyer/wBCdK/)

# ruby-on-rails - 如何通过 capybara 提交带有工厂值的模型表单

> ID：13912953
> 
> 赞同：0
> 
> 时间：2012-12-17T11:08:34.720
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, capybara

我有一个需要以下字段的客户端模型：

`validates :name, :address1, :city, :state, :country, :zipcode,
:contactname, :email, presence: true`

现在我正在编写用于创建新客户端的测试。我使用 FactoryGirl 创建了一个客户端对象，我如何使用工厂值填充表单，而无需手动编写`fill_in "field_id", with: factory.field_value`每个字段，就像我已经在做的那样，如下面的代码所示。

```
describe "with valid information" do
  let(:client) { FactoryGirl.create(:client) }

  before(:each) do
    visit new_client_path
    fill_in "client_name", with: client.name
    fill_in "client_address1", with: client.address1
    fill_in "client_city", with: client.city
    fill_in "client_state", with: client.state
    select client.country, from: "client_country"
    fill_in "client_zipcode", with: client.zipcode
    fill_in "client_contactname", with: client.contactname
    fill_in "client_email", with: client.email
  end

  it "should create a client" do
    expect { click_button "Create Client" }.to change(Client, :count)
  end

  describe "success messages" do
    before { click_button "Create Client" }
    it { should have_content('created') }
  end
end 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:13:36.300

您的代码没有任何问题。我看到的唯一缩短它的方法是迭代一个数组：

```
%w(name address1 city state zipcode contactname email).each do |field|
  fill_in "client_#{field}", with: client.send(field.to_sym)
end 
```

但这仅适用于非常简单的情况，对于一种类型的字段（如您所见，我跳过了`client_country`）。

因此，如何将模型属性映射到表单字段的任务并没有通用的解决方案，因为表单字段可能是不同的类型，映射可能会更复杂。

# c++ - 平面图像的高效传输以在 OpenGL 中进行渲染？

> ID：13912958
> 
> 赞同：2
> 
> 时间：2012-12-17T11:09:03.353
> 
> 标签：c++, opengl, memory-management

传输平面 YUVA 图像以在 OpenGL 中渲染的最有效方法是什么？

目前我正在使用 4 个单独的纹理（Y、U、V、A），我在每个帧中从 4 个单独的 PBO 上传到这些纹理。然而，在少数纹理中传输大量数据似乎要高效得多，例如将 YUV422 传输到单个打包纹理比将相同数据传输到 3 个（Y、U、V）单独纹理快约 50%。

我对此事的一些想法是我是否可以使用 2 个阵列纹理，一个用于 (Y, A)，一个用于 (U, V)，这样会更快吗？

我考虑过的另一种选择是在将数据复制到 PBO 进行传输时从平面转换为打包，尽管这确实有一些 CPU 开销。

有什么建议么？

注意：暗淡（Y）==暗淡（A）&&暗淡（U）==暗淡（V）&&暗淡（Y）！=暗淡（U）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:16:33.500

我想知道你是如何生成纹理的？即动态生成或从文件中加载？如果它们是从文件加载的，我建议将纹理加载为单个 rgba 纹理以加载它并利用片段着色器将其处理为 yuva，然后可以一次性加载数据，并且应该会产生更好的性能结果.

如果有更多关于如何使用纹理的信息，我应该能够给你一个更详细的答案。

编辑：我通常处理 YUVA 的方式是渲染到纹理；*使用 GPU 将 RGBA 转换为 YUVA，然后通过glGetTexImage*将结果发送回 CPU，并将结果数据作为 YUVA 处理（或删除 alpha 并将其用作 YUV）。

关于不同大小的纹理，我不担心，按您认为合适的方式打包数据，并在您认为合适的情况下读出它，您可以让每个通道在您没有任何有效区域的所有区域中具有 0 值例如数据或使用和关闭但令人难忘的值（例如您的生日，并且具有沿 0.17122012（今天的日期）的值），因此您可以轻松地以编程方式忽略它们，或者使通道处理代码仅读取基于通道的特定维度运行时，无关数据很少，或者如果为 0 则更少，并且利用 GPU 处理数据的速度增益抵消了它，并且仍然保留了一个快速系统。

希望对您有所帮助。

# sql - 添加行和更改行名

> ID：13912959
> 
> 赞同：1
> 
> 时间：2012-12-17T11:09:12.747
> 
> 标签：sql, sql-server

我从以下代码中获取了 sql server 数据库中的值，

```
SELECT [Zone Name]
      ,[Zone Count]
      ,[Phase Name]
  FROM [Interface].[dbo].[VwZoneCount]
  where [Zone Name] IN ('EB2GFNMZ','EB2GFSMZ','EB2GFNZ1','EB2GFSZ1','EB21FNZ1','EB21FSMZ','EB2IFSZ1','EB22FNZ1','EB22FSZ1','EB22FSMZ','EB23FNMZ','EB23FNZ1','EB23FNZ2','EB23FNZ3','EB23FSMZ','EB23FSZ1','EB23FSZ2','EB24FNMZ','EB24FNZ1','EB24FSMZ','EB24FSZ1','EB25FNMZ','EB25FNZ1','EB25FSMZ','EB25FSZ1','EB26FNMZ','EB26FNZ1','EB26FSMZ','EB26FSZ1','EB27FNZ1','EB27FSMZ')
GO 
```

上述查询的输出是

```
Zone Name   Zone Count

EB24FNZ1    160
EB24FSMZ    10
EB24FSZ1    87
EB25FNMZ    82
EB25FNZ1    82
EB25FSMZ    12
EB25FSZ1    123
EB26FNMZ    4
EB26FNZ1    92
EB26FSMZ    23
EB26FSZ1    91
EB27FNZ1    1
EB27FSMZ    64
EB2GFNMZ    12
EB2GFNZ1    152
EB2GFSMZ    36
EB2GFSZ1    212 
```

但我需要通过对一些行值求和来输出。我需要将具有“EB2GFN%”的值组合成一个具有不同名称的值，“EB21FN%”..类似地需要组合其他行。任何机构都可以建议我如何做到这一点。

期望的输出：-

```
Zone Name    Zone Count

    EB24F_NORTH_WING    160
    EB24F_SOUTH_WING    10+87
    EB25F_NORTH_WING    82+82
    EB25F_SOUTH_WING    12+123
    EB26F_NORTH_WING    4+92
    EB26F_SOUTH_WING    23+91
    EB27F_NORTH_WING    1
    EB27F_SOUTH_WING    64
    EB2GF_NORTH_WING    12+152
    EB2GF_SOUTH_WING    36+212 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:14:40.300

试试这个，它将为您提供前 6 个共同字母的组的总和：

```
SELECT  LEFT(Zone_Prefix, 5) + CASE WHEN RIGHT(Zone_Prefix, 1) = 'N' THEN '_NORTH_WING' ELSE '_SOUTH_WING' END AS [Zone Name],
        Cnt AS [Zone Count]
FROM
(
    SELECT  LEFT([Zone Name], 6) AS Zone_Prefix
            ,SUM([Zone Count]) Cnt
    FROM    [Interface].[dbo].[VwZoneCount]
    WHERE   [Zone Name] IN ('EB2GFNMZ','EB2GFSMZ','EB2GFNZ1','EB2GFSZ1','EB21FNZ1','EB21FSMZ','EB2IFSZ1','EB22FNZ1','EB22FSZ1','EB22FSMZ','EB23FNMZ','EB23FNZ1','EB23FNZ2','EB23FNZ3','EB23FSMZ','EB23FSZ1','EB23FSZ2','EB24FNMZ','EB24FNZ1','EB24FSMZ','EB24FSZ1','EB25FNMZ','EB25FNZ1','EB25FSMZ','EB25FSZ1','EB26FNMZ','EB26FNZ1','EB26FSMZ','EB26FSZ1','EB27FNZ1','EB27FSMZ')
    GROUP BY 
            LEFT([Zone Name], 6)

) tbl 
```

这是一个**[SQL 小提琴](http://sqlfiddle.com/#!3/b5cbd/13/0)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T11:28:33.137

你可以这样做：

```
;WITH AllZones
AS
(
  SELECT * FROM YourQuery
), WithGroupedZones
AS
(
  SELECT
    ZoneName,
    ZoneCount,
    LEFT(ZoneName, 2) Eb,
    SUBSTRING(ZoneName, 3, 1) EbNumber,
    SUBSTRING(ZoneName, 4, 3) F,
    SUBSTRING(ZoneName, 8, 1) FNumber
  FROM AllZones
) 
SELECT
  ZoneName,
  (SELECT SUM(t2.ZoneCount) 
   FROM WithGroupedZones t2
   WHERE t1.Eb = t2.Eb 
     AND t1.F = t2.F
     AND t1.EBNumber= t2.EBnumber
  ) ZonesCount
FROM WithGroupedZones t1; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/932e8/13)

这会给你：

```
| ZONENAME | ZONESCOUNT |
-------------------------
| EB24FNZ1 |        160 |
| EB24FSMZ |         97 |
| EB24FSZ1 |         97 |
| EB25FNMZ |        164 |
| EB25FNZ1 |        164 |
| EB25FSMZ |        135 |
| EB25FSZ1 |        135 |
| EB26FNMZ |         96 |
| EB26FNZ1 |         96 |
| EB26FSMZ |        114 |
| EB26FSZ1 |        114 |
| EB27FNZ1 |          1 |
| EB27FSMZ |         64 |
| EB2GFNMZ |        164 |
| EB2GFNZ1 |        164 |
| EB2GFSMZ |        248 |
| EB2GFSZ1 |        248 | 
```

**请注意：**这可能与您要查找的结果集不同。但是您可以修改条件，我在查询中使用：

```
 t1.Eb = t2.Eb 
 AND t1.F = t2.F
 AND t1.EBNumber= t2.EBnumber 
```

得到你想要的输出。另请注意，区域的名称分为：

```
| ZONENAME | ZONECOUNT | EB | EBNUMBER |   F | FNUMBER |
--------------------------------------------------------
| EB24FNZ1 |       160 | EB |        2 | 4FN |       1 |
| EB24FSMZ |        10 | EB |        2 | 4FS |       Z |
| EB24FSZ1 |        87 | EB |        2 | 4FS |       1 |
| EB25FNMZ |        82 | EB |        2 | 5FN |       Z |
| EB25FNZ1 |        82 | EB |        2 | 5FN |       1 |
| EB25FSMZ |        12 | EB |        2 | 5FS |       Z |
| EB25FSZ1 |       123 | EB |        2 | 5FS |       1 |
| EB26FNMZ |         4 | EB |        2 | 6FN |       Z |
| EB26FNZ1 |        92 | EB |        2 | 6FN |       1 |
| EB26FSMZ |        23 | EB |        2 | 6FS |       Z |
| EB26FSZ1 |        91 | EB |        2 | 6FS |       1 |
| EB27FNZ1 |         1 | EB |        2 | 7FN |       1 |
| EB27FSMZ |        64 | EB |        2 | 7FS |       Z |
| EB2GFNMZ |        12 | EB |        2 | GFN |       Z |
| EB2GFNZ1 |       152 | EB |        2 | GFN |       1 |
| EB2GFSMZ |        36 | EB |        2 | GFS |       Z |
| EB2GFSZ1 |       212 | EB |        2 | GFS |       1 | 
```

然后你可以比较`ZoneName`使用这些组`EB, EBNUMBER, F, FNUMBER`

# actionscript-3 - 在 AS3 中计算“艺术”（ryb）补色

> ID：13912961
> 
> 赞同：1
> 
> 时间：2012-12-17T11:09:21.523
> 
> 标签：actionscript-3, colors, rgb

我需要计算/生成颜色的补色。我以为我有它的工作，但它是错误的类型。与红色相反，我得到的是青色而不是绿色，那是因为 AS3 使用 rgb 值。我知道我需要使用 RYB 值，但我不知道如何从 RGB 转换为 RYB，计算为 RYB 值的补色，然后将其转换回 RGB。我对AS3了解不多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:19:53.640

You should look in to Hue-Saturation-Brightness. A rotation of 180 degrees on the Hue scale should give the opposite color.

I don't have actual code for you to share but check out the `ColorMatrix` class from Quasimondo: [http://code.google.com/p/quasimondolibs/source/browse/trunk/quasimondolibs/com/quasimondo/geom/ColorMatrix.as](http://code.google.com/p/quasimondolibs/source/browse/trunk/quasimondolibs/com/quasimondo/geom/ColorMatrix.as)

# android - 如何允许在数据库中保存空图像？

> ID：13912962
> 
> 赞同：0
> 
> 时间：2012-12-17T11:09:21.233
> 
> 标签：android

现在终于我设置了我的代码[https://stackoverflow.com/questions/13910206/sqlite-database-works-in-emulator-but-not-in-real-device](https://stackoverflow.com/questions/13910206/sqlite-database-works-in-emulator-but-not-in-real-device)一切都很好但唯一的问题是如果我不上传任何图像并按保存按钮应用程序意外停止我该怎么办？所以允许在没有图像的情况下保存信息吗？我想在数据库中保存没有图像的值，当我按编辑时浏览并上传图像我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:32:52.543

尝试...（类似）

```
 create table MY_TABLE (
        _id integer primary key autoincrement,
        my_image blob, 
        ...
    ) 
```

其中图像列能够将 NULL 作为值。如果您将其定义为，`my_image blob not null`那么您必须给它一个“真实”值（非空）。

# jquery - 改变位置 在 keyup 事件上

> ID：13912969
> 
> 赞同：0
> 
> 时间：2012-12-17T11:09:44.520
> 
> 标签：jquery, html

我有一个清单。我开始知道如何使用 jquery 获取 li 标签的索引。我想要做的是更改 li 标签的索引，即如果我按“c”，则应首先显示具有从“c”开始的文本的 li 标签。然后是其余的人。

可能吗？如果是，如何？

# 编辑1：

这是在 keyup 事件上调用的函数：

```
function displaySearchResult(key){
              var li=$('.listcontainer ul li:contains('+key+')');
              li.parent().prepend();
          } 
```

但我认为只有当我输入整个文本作为键时它才会起作用。

请告诉我哪里出错了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T11:12:53.790

假设您已经选择了所需的列表项并将其存储在变量中`li`：

```
li.parent().prepend(li); 
```

# ios - 从网络获取 SSID 的简单代码

> ID：13912972
> 
> 赞同：2
> 
> 时间：2012-12-17T11:09:57.007
> 
> 标签：ios, networking, network-programming, ssid, captivenetwork

嗨，我正在寻找一个简单的代码来读取 SSID，我发现了很多关于“SystemConfiguration/CaptiveNetwork.h”的信息，但是我该如何使用它，我不明白。对不起，我是一个新的 Objective-C 程序员。你有一个很好的例子或教程来理解它。我尝试了 Apple 的 Reachable，但它们不适用于字典。

感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:50:33.817

```
CFArrayRef myArray = CNCopySupportedInterfaces();
CFDictionaryRef myDict = CNCopyCurrentNetworkInfo(CFArrayGetValueAtIndex(myArray, 0));
NSString *ssid = CFDictionaryGetValue(myDict, @"SSID"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-04T11:34:03.500

谢谢@helming，就在这里，这样它就不会编译成模拟器二进制文件+添加对CFRelease的调用：

```
#if !TARGET_IPHONE_SIMULATOR
    CFArrayRef interfaces = CNCopySupportedInterfaces();
    CFDictionaryRef networkInfo = CNCopyCurrentNetworkInfo(CFArrayGetValueAtIndex(interfaces, 0));
    NSString *ssid = CFDictionaryGetValue(networkInfo, @"SSID");
    CFRelease(interfaces);
    CFRelease(networkInfo);
#endif 
```

# android - 我可以将特定值从 html 页面传递到我的活动吗？

> ID：13912976
> 
> 赞同：2
> 
> 时间：2012-12-17T11:10:09.060
> 
> 标签：android

我有一个查询。我可以将值从我的 html 页面传递到我的活动文件吗？

html 文件位于 assets/www 文件夹和 Activity 文件位于 src/package_name

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T05:27:11.847

您需要使用 JavaScriptInterface。在您的 Web 视图中添加此接口。

1.  制作 JavaScriptInterface 类（在这里你可以为你的类使用任何名称）

    ```
     public class JavaScriptInterface {
         Context mContext;

         /** Instantiate the interface and set the context */
         JavaScriptInterface(Context context) {
             mContext = context;
         }

         /** Get passed value from the web page here */
         public void showMyValue(String passedValue) {
             android.util.Log.i("TAG", "I Got this value:" + passedValue);
         }
     } 
    ```

2.  在您的网络视图中添加此界面，例如

    ```
     WebView webView = (WebView) findViewById(R.id.webview);
     webView.addJavascriptInterface(new JavaScriptInterface(this), "Android"); 
    ```

3.  现在在您的网页中，调用此方法以传递您的值并使用该值执行需要完整的操作

    ```
     <input type="button" value="ClickMe" onClick="passValueToAndroid('Hello Android!')" />
     <script type="text/javascript">
     function passValueToAndroid(yourPassingValue) {
          Android.showMyValue(yourPassingValue);
      }
     </script> 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T11:17:04.233

是的，您可以将任何变量从 html 传递到活动。

您需要创建 JavaScript 接口以在 html 和活动之间进行交互，

有关实现细节，请参阅此链接

[http://developer.android.com/guide/webapps/webview.html](http://developer.android.com/guide/webapps/webview.html)

# ruby-on-rails - 如何在rails的一个文件夹中管理相关控制器？

> ID：13912978
> 
> 赞同：0
> 
> 时间：2012-12-17T11:10:25.180
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

在我的应用程序中，有 3 个与员工相关的控制器。现在它们位于控制器文件夹中。

```
heronhrm/app/controllers
employeename_controller.rb
employeeaddress_controller.rb
employeelist_controller.rb 
```

现在一切正常。现在我想在员工文件夹中列出所有与员工相关的控制器，例如，

```
heronhrm/app/controllers/employees
employeename_controller.rb
employeeaddress_controller.rb
employeelist_controller.rb 
```

现在我应该在我的代码中做些什么改变才能在这种情况下工作，也喜欢首先。例如在我的观点、模型等中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T12:44:57.657

首先，您必须像这样更新您的 routes.rb ：

```
namespace :employees do
  # all your employees routes here
end 
```

然后，就像@andrjas 所说，您必须在控制器名称前加上前缀：

```
class Employees::EmployeenameController < ApplicationController
  # your code here
end 
```

最后将您的视图移动到文件夹 app/views/employees/

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T11:18:52.523

您必须将类名从 Employeename 更改为 Employees::Employeename（我建议将 Employeename 更改为简单的 Name，因为它是重复的），视图也应该位于子目录“employees”中（我是在这里猜测，但这应该是“Rails Way”）。这些模型并没有真正连接到控制器，在这里应该保持不变。

# python - 如何打破 Django Cartridge 购物车页面中的项目名称和大小？

> ID：13912983
> 
> 赞同：0
> 
> 时间：2012-12-17T11:10:48.183
> 
> 标签：python, django, templates, django-templates

当我使用代码在[django 墨盒的](https://github.com/stephenmcd/cartridge/)**cart.html**页面上`{{ item.description }}`打印**项目名称**时，它还会打印项目名称大小。**例如**aviesta 是项目名称，大小是 2。然后它打印**(aviesta Size: 3)**。 ..**我怎样才能将这个名称和尺寸分成两个不同的部分..** 1\. 物品名称 2\. 物品尺寸

 ******* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:43:26.590

我认为它需要更改模型，因为将产品添加到购物车时，名称和选项会保存到描述中：

```
class Cart(models.Model):
    ...
    item.description = unicode(variation) 
```

和

```
class ProductVariation(Priced):
    ...
    def __unicode__(self):
        """
        Display the option names and values for the variation.
        """
        options = []
        for field in self.option_fields():
            if getattr(self, field.name) is not None:
                options.append("%s: %s" % (unicode(field.verbose_name),
                                           getattr(self, field.name)))
        return ("%s %s" % (unicode(self.product), ", ".join(options))).strip() 
```

升级版：

您可以将字段添加到 SelectedProduct 类：

```
options = CharField(_("Options"), max_length=200) 
```

向 ProductVariation 类添加方法：

```
def options_text(self):
    options = []
    for field in self.option_fields():
        if getattr(self, field.name) is not None:
            options.append("%s: %s" % (unicode(field.verbose_name),
                                       getattr(self, field.name)))
    return ", ".join(options).strip() 

def __unicode__(self):
    """
    Display the option names and values for the variation.
    """        
    return ("%s %s" % (unicode(self.product), self.options_text())).strip() 
```

更改 Cart 类中的 add_item 方法：

```
item.description = unicode(variation.product)
item.options = variation.options_text() 
```******

# sql - 访问中的完全联接和求和 2 个查询

> ID：13912984
> 
> 赞同：1
> 
> 时间：2012-12-17T11:10:51.407
> 
> 标签：sql, vb.net, ms-access, ms-access-2003

我对这种复杂的连接和求和函数非常陌生。我有 2 个具有相同字段`(i.e: ProdID, ProdName, NetQty, Unit)` 的表查询。第一个查询包含*OpStock*，第二个查询包含*Purchase*。

我想添加这 2 个表查询以创建一个表，以便我能够查看当前库存。

第一个表的数据如下所示：

```
ProdID ProdName Qty
100 Rose     700
101 Lilly    550
103 Jasmine  600
105 Lavender 400 
```

第二张表的数据如下所示：

```
ProdID ProdName Qty
100 Rose     400
101 Lilly    250
104 Lotus   1000
106 MariGold 400 
```

第三张表的最终数据如下所示：

```
ProdID ProdName Qty
100 Rose     1100
101 Lilly     800
103 Jasmine   600
104 Lotus    1000
105 Lavender  400
106 MariGold  400 
```

我如何使用 sql for access2003 来实现这一点。谢谢。

我很抱歉 Ciaran，这纯粹是用于 vb.net 的访问 这是我的访问查询 1

```
SELECT sp_OpenIandP_Prod.ProdID,
       sp_OpenIandP_Prod.ProdName,
       Sum(([sp_OpenIandP_Prod.SumOfNetQty]-[sp_OpenSales_Prod.SumOfNetQty])) AS NetQty,
       sp_OpenIandP_Prod.UnitSName
FROM sp_OpenIandP_Prod 
     INNER JOIN sp_OpenSales_Prod ON sp_OpenIandP_Prod.ProdID=sp_OpenSales_Prod.ProdID
GROUP BY sp_OpenIandP_Prod.ProdID, 
         sp_OpenIandP_Prod.ProdName, 
         sp_OpenIandP_Prod.UnitSName; 
```

第一个查询结果是这样的：

```
ProdID  ProdName    NetQty  UnitSName
1   Rose            0   Kgs
2   Lilly       7125    Mts
3   Lotus       12374   Nos 
```

第二个查询是：

```
SELECT Products.ProdID, Products.ProdName,
       Sum(OPDDetails.NetQty) AS SumOfNetQty, Units.UnitSName
FROM Units 
     INNER JOIN (Products 
         INNER JOIN (Brands 
             INNER JOIN OPDDetails ON Brands.BrID=OPDDetails.BrandID)
         ON Products.ProdID=Brands.ProdID) 
     ON Units.UnitID=Products.UnitID
WHERE (((OPDDetails.PurID)>0) 
  AND ((OPDDetails.OPDDate)>=[StartDate] And (OPDDetails.OPDDate)<=[EndDate]))
GROUP BY Products.ProdID, Products.ProdName, Units.UnitSName; 
```

结果集是这样的：

```
ProdID  ProdName    SumOfNetQty UnitSName
1   Rose    1800    Kgs
2   Lilly   21000   Mts 
```

我很容易得到上述结果。但要得到这样的结果并不容易：

```
ProdID  ProdName    SumOfNetQty UnitSName
1   Rose    1800    Kgs
2   Lilly   28125   Mts
3       Lotus   12374   Nos 
```

就这样。再次感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:25:33.280

这不是 vb.net 问题，但是您需要使用 UNION

```
Select ProdId, ProdName, Sum(Qty) As QtySum
  From (Select ProdId, ProdName, Qty From TableA
        Union All
        Select ProdId, ProdName, Qty From TableB) DerrivedView
 Group By ProdId, ProdName 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T12:28:21.510

您可以在 2 个查询之间创建一个 UNION，然后按产品分组：

```
SELECT ProdID, ProdName, Sum(NetQty) As NetQty, UnitSName
FROM 
( 

    SELECT sp_OpenIandP_Prod.ProdID,
           sp_OpenIandP_Prod.ProdName,
           Sum(([sp_OpenIandP_Prod.SumOfNetQty]-[sp_OpenSales_Prod.SumOfNetQty])) AS NetQty,
           sp_OpenIandP_Prod.UnitSName
    FROM sp_OpenIandP_Prod 
         INNER JOIN sp_OpenSales_Prod ON sp_OpenIandP_Prod.ProdID=sp_OpenSales_Prod.ProdID
    GROUP BY sp_OpenIandP_Prod.ProdID, 
             sp_OpenIandP_Prod.ProdName, 
             sp_OpenIandP_Prod.UnitSName

    UNION ALL

    SELECT Products.ProdID, Products.ProdName,
           Sum(OPDDetails.NetQty) AS NetQty, Units.UnitSName
    FROM Units 
         INNER JOIN (Products 
             INNER JOIN (Brands 
                 INNER JOIN OPDDetails ON Brands.BrID=OPDDetails.BrandID)
             ON Products.ProdID=Brands.ProdID) 
         ON Units.UnitID=Products.UnitID
    WHERE (((OPDDetails.PurID)>0) 
      AND ((OPDDetails.OPDDate)>=[StartDate] And (OPDDetails.OPDDate)<=[EndDate]))
    GROUP BY Products.ProdID, Products.ProdName, Units.UnitSName

)
GROUP BY ProdID, ProdName, UnitSName 
```

# ruby-on-rails - 如何知道rails中未使用的路线

> ID：13912989
> 
> 赞同：4
> 
> 时间：2012-12-17T11:11:22.973
> 
> 标签：ruby-on-rails, performance

是否有任何方法可以在一段时间内或通过任何其他方式知道 rails 中未使用的路线，例如通过解析源代码并找出哪些路线未被调用或在某些定义的时间段内未被调用的路线。

我想知道这一点，因为在一个巨大的 Rails 应用程序中，当开发人员开始添加“资源：对象”时，它会在运行时创建大量不必要的路由，我不确定这是否会影响性能，但仍然是好奇心。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T11:19:46.043

我发现了一个似乎可以做到这一点的宝石：**[amatsuda/traceroute](https://github.com/amatsuda/traceroute)**。我自己没有尝试过，但从描述来看，它做了正确的事情 - 检查已定义的资源丰富的路线，但未创建相应的操作。

但我承认在分析访问过的链接和未访问过的链接时应该非常小心。如果没有人访问此链接并不意味着将来不会访问它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-17T11:19:50.900

没有内置的 rails 方法可以做到这一点。您可以尝试自己编写某种已访问路径的记录器。

但是尝试一些已经完成的[链接](http://www.google.com/analytics/)。

# json - 使用正则表达式在 shell 脚本中解析 JSON

> ID：13912990
> 
> 赞同：5
> 
> 时间：2012-12-17T11:11:31.883
> 
> 标签：json, shell

我需要使用正则表达式解析 jsonarray。我的json是

```
"keys": [
      {
        "host": "example.com"       
      },
      {
        "host": "example.net"
      }
    ] 
```

我需要获取两个主机值。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-17T11:17:19.477

当您想提取文本时，`grep`您的朋友是：

```
grep -Po '(?<="host": ")[^"]*' myjsonFile 
```

例如：

```
kent$  echo '"keys": [
      {
        "host": "example.com"       
      },
      {
        "host": "example.net"
      }
    ]'|grep -Po '(?<="host": ")[^"]*'

example.com
example.net 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T11:15:42.390

以下正则表达式将使用非贪婪的 kleene 通配符获取您的主机值：

```
/"host":\s"(.*?)"/ 
```

# c++ - 我想在 Windows 8 中控制音量，同时显示音量条

> ID：13912998
> 
> 赞同：-1
> 
> 时间：2012-12-17T11:11:59.327
> 
> 标签：c++, microsoft-metro

在 Windows7 中，我总是使用端点接口来控制系统音量。它运作良好。但在 Windows 8 中，我想同时控制音量以显示 Metro 风格的音量条。另外我想同时控制亮度值以显示 Metro 风格的亮度条。我使用 Visual C++ 2010。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T02:08:06.893

是的，我能够实现我的问题的一些功能。我使用WM_APPCOMMAND，音量进度条可以在Windows 8中显示。例如：

```
::SendMessage(this->GetSafeHwnd(), WM_APPCOMMAND, 0x30292, APPCOMMAND_VOLUME_UP * 0x10000); 
```

但是我无法通过调整来控制亮度条的显示。