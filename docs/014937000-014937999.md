# StackOverflow 问答 14937000-14937999

# zend-framework2 - 如何在 Zend 框架 2 中添加 APC 适配器到缓存类映射

> ID：14937003
> 
> 赞同：1
> 
> 时间：2013-02-18T13:01:06.477
> 
> 标签：zend-framework2, apc, zend-cache, zend-config

我需要使用操作码缓存中的 APC 在 Zend 框架 2 应用程序中缓存我的每个模块的类映射。有没有办法解决这个问题。

application.config.php 中的 AFAIK

> ```
>  'module_map_cache_enabled' => true, 
> ```
> 
> // 用于创建类映射缓存文件名的键。'module_map_cache_key' => '测试',
> 
> // 缓存合并配置的路径。
> 
> ```
>  'cache_dir' => 'path/to/data/cache', 
> ```

通过这样做，Zend 缓存使用文件系统进行缓存，我需要它来使用 APC 操作码缓存，我该如何实现。

我知道在 bootstrap.php 的 zend 框架 1 中使用 APC。

但为此，我在官方网站上找不到任何文档。

提前感谢您回复此帖子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T23:16:08.470

如果您启用了操作码缓存，生成的文件**将**被 APC 操作码缓存缓存。您可以通过查看[apc 统计页面](http://svn.php.net/viewvc/pecl/apc/trunk/apc.php?view=log)来检查这一点。将此文件暂时放在您的服务器上并观察`system cache entries`选项卡。模块映射和配置缓存只支持文件，不支持实现 StorageInterface 的缓存适配器。

# ubuntu - ubuntu 上的 Bugzilla 安装问题

> ID：14937005
> 
> 赞同：1
> 
> 时间：2013-02-18T13:01:22.663
> 
> 标签：ubuntu, bugzilla

我尝试在 Ubuntu 上安装 bugzilla 4.2.4。

经过大量努力修复了所有依赖项，但是当我运行时`./checksetup.pl`，我得到了

```
警告：我们无法检查 Apache 的配置。这有时
当您没有以 root 身份运行 checksetup.pl 时会发生。要查看
我们遇到的问题，运行：/usr/sbin/apache2 -t -D DUMP_MODULES

****************************************************** ************************
* 可选模块 *
****************************************************** ************************
* Bugzilla 不需要某些 Perl 模块，但 *
*安装最新版本，您可以获得额外的访问权限*
* 特征。*
* *
* 下面列出了您尚未安装的可选模块，*
* 使用他们启用的功能的名称。该表下方是*
* 安装每个模块的命令。*
****************************************************** ************************
* 模块名称 * 启用功能 *
****************************************************** ************************
* Apache-SizeLimit * mod_perl *
****************************************************** ************************
安装可选模块的命令：

Apache-SizeLimit: /usr/bin/perl install-module.pl Apache2::SizeLimit

尝试自动安装每个必需和可选模块
使用一个命令，执行：

  /usr/bin/perl install-module.pl --all

```

当我尝试最后一个命令时，我得到

```
检查 CPAN (v1.81) 正常：找到 v1.94
检查 YAML（任何）ok：找到 v0.84
检查 ExtUtils-MakeMaker (v6.31) ok：找到 v6.64
Return::Value 在 /home/user/Downloads/bugzilla-4.2.4/lib/Return/Value.pm 第 13 行已弃用
    要求在 /home/user/Downloads/bugzilla-4.2.4/lib/Email/Send.pm 第 11 行调用 Return/Value.pm
    在 /home/user/Downloads/bugzilla-4.2.4/lib/Return/Value.pm 第 0 行调用的 Email::Send::BEGIN()
    eval {...} 在 /home/user/Downloads/bugzilla-4.2.4/lib/Return/Value.pm 第 0 行调用
    要求在 (eval 76) 第 1 行调用 Email/Send.pm
    eval '需要电子邮件::发送;' 在 /home/user/Downloads/bugzilla-4.2.4/Bugzilla/Install/Requirements.pm 第 668 行调用
    Bugzilla::Install::Requirements::have_vers('HASH(0x200d8c8)', 0) 在 /home/user/Downloads/bugzilla-4.2.4/Bugzilla/Install/Requirements.pm 第 445 行调用
    Bugzilla::Install::Requirements::_check_missing('ARRAY(0x20af3a0)', 0) 在 /home/user/Downloads/bugzilla-4.2.4/Bugzilla/Install/Requirements.pm 第 409 行调用
    Bugzilla::Install::Requirements::check_requirements(0) 在 install-module.pl 第 89 行调用
警告：我们无法检查 Apache 的配置。这有时
当您没有以 root 身份运行 checksetup.pl 时会发生。要查看
我们遇到的问题，运行：/usr/sbin/apache2 -t -D DUMP_MODULES

去阅读'/home/user/.cpan/Metadata'
  数据库于 2013 年 2 月 18 日星期一 05:53:02 GMT 生成
正在安装 Apache2::SizeLimit 0.96 版...
Apache2::SizeLimit 是最新的 (0.97)。

```

当我尝试 url 时，localhost/bugzilla/ 我得到

```
软件错误：

./data/params 文件不存在。您可能需要运行 checksetup.pl。在 Bugzilla/Config.pm 第 337 行。
/var/www/bugzilla/index.cgi 第 34 行的 require 编译失败。
BEGIN 失败——编译在 /var/www/bugzilla/index.cgi 第 34 行中止。
如需帮助，请向网站管理员 (webmaster@localhost) 发送邮件，提供此错误消息以及错误的时间和日期。

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:38:15.250

尝试设置通常包含在 /etc/apache2/envvars 中的变量：

```
export APACHE_RUN_USER=www-data
export APACHE_RUN_GROUP=www-data 
```

然后运行此命令进行测试：

```
/usr/sbin/apache2 -t -D DUMP_MODULES 
```

这应该摆脱你提到的第一个警告。再次运行 checksetup.pl，因为这应该会生成数据/参数。

# android - 如何在非原始类型上使用 Parcelable？

> ID：14937009
> 
> 赞同：2
> 
> 时间：2013-02-18T13:01:36.533
> 
> 标签：android, parcelable

我有一个类 TableMetaAttrs：

```
public class TableMetaAttrs implements Parcelable
{
    private Integer id;
    private String name;
    private String value;
    private Tables table;
... 
```

我如何在*表*字段上实现 Parcelable？类表也实现了 Parcelable。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:04:34.957

你也必须`Tables`上课`implements Parcelable`。

这样，无论何时`TableMetaAttrs`在打包或重建自身时，它都可以调用`putParcelable`和`getParcelable`获取表字段。

**编辑：**

我假设 Tables 是你创建的一个类，所以它的签名必须是

```
public class Tables implements Parcelable{
    // and somewhere in this code tables have to parcel all it's primitives
} 
```

然后，每当 TableMetaAttrs 对它调用的值进行打包时：

```
 parcel.putParcelable(table); 
```

并重建它：

```
 table = parcel.getParcelable(); 
```

# extjs4 - 在日期字段中按下时如何忽略日期选择器

> ID：14937010
> 
> 赞同：2
> 
> 时间：2013-02-18T13:01:39.543
> 
> 标签：extjs4

我在 ExtJS 4 中有一个日期字段，我想向向下箭头键添加一个自定义事件，但日期字段显示了选择器并且失去了对按下键盘上的向下箭头的关注。如何禁用此事件以仅使用我的事件？

谢谢解答！

```
specialkey: function (t, e, opts) {
    console.log(e.getKey());
    var key = e.getKey();
    this.keyEvents(t, key);
} 
```

...

```
keyEvents: function (t, key) {
    switch(key){
        case 38: // up
            break;
        case 40: // down // picker off??????
            break;
        case 37: // left
            break;
        case 39: // right
            break;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T14:33:18.177

最简单的方法是创建日期字段的子类并覆盖向下处理方法：

```
Ext.define('MyDate', {
    extend: 'Ext.form.field.Date',
    alias: 'widget.mydate',
    onDownArrow: Ext.emptyFn
}); 
```

# r - 使用 mclapply 时出现内存分配错误

> ID：14937012
> 
> 赞同：0
> 
> 时间：2013-02-18T13:01:46.597
> 
> 标签：r, parallel-processing

这是我第一次使用 mclapply 在多个进程上运行并行脚本，但问题是我在笔记本电脑上尝试过脚本，它运行良好并且`dataframe`正确填充，但是现在当我在我的 上运行脚本时`office pc`，当打印结束，是时候收集数据了，脚本停止并出现以下错误：

> ```
> Error: cannot allocate vector of size 80 Kb 
> ```

```
 fun <- function(testdf) {
  l=12000
    errordf=data.frame()
    errordf <- mclapply(1:nrow(15000), function(i)
    {
    for (ind in 1:nrow(testdf)) 
       {
        if( i >= l/2 ){
            testdf[ind,]$X =  testdf[ind,]$pos * 2
        } else 
        {
            testdf[ind,]$X = testdf[ind,]$pos/l
        }
    }

    permdf <- testdf
   lapply(1:100, function(j)
    {   permdf$X<- sample(permdf$X,nrow(permdf), replace=FALSE)
            fit=lm(X ~ gx, permdf)   #linear regression calculation
             regerror=sum(residuals(fit)^2)

        data.frame(pc=i,error=regerror )
     })

}, mc.cores=3)
res<-NULL
tmp <- lapply(errordf, function(ii){
    tmp <- lapply(ii, function(ij){    #rbind the data and return the dataframe
        res<<- rbind(res, ij)
    })
})
return (res)
    } 
```

**testdf 示例：**

```
structure(list(ax = c(-0.0242214, 0.19770304, 0.01587302, -0.0374415, 
0.05079826, 0.12209738), gx = c(-0.3913043, -0.0242214, -0.4259067, 
-0.725, -0.0374415, 0.01587302), pos = c(11222, 13564, 16532, 
12543, 12534, 14354)), .Names = c("ax", "gx", "pos"), row.names = c(NA, 
-6L), class = "data.frame") 
```

我确定代码可以正常工作（这就是我没有包含完整代码的原因），因为我在笔记本电脑上尝试了多次，但是当我在办公室电脑上尝试时，出现了这个错误。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T09:47:43.333

现在，您没有在最后一个双嵌套`lapply`循环中按预期使用 apply ，您不妨使用`for`循环而不是使用 lapply 与全局变量组合。此外，你不断成长`res`，这是相当内存和时间密集型的。通常，`lapply`循环不会遇到这个问题，但是您使用全局变量完全否定了这个优势。您似乎有一个想要的双重嵌套列表`rbind`。我肯定不会遍历数据结构，我只会使用类似的东西 `do.call("rbind", data_structure)`来做到这一点，尽管如果没有可重复的例子就很难提供具体的建议。此解决方案不会受到您遇到的不断增长的问题的影响。

# java - 从 Java 中的 ping 结果中解析出时间部分

> ID：14937019
> 
> 赞同：2
> 
> 时间：2013-02-18T13:01:56.363
> 
> 标签：java, ping, bufferedreader, runtime.exec

我设法修改了一个程序来 ping 对等计算机并获取 ping 计数。如何实时解析`time = ?ms`ping 计数结果？

代码：

```
 public static void main(String[] args) {

    String ip = "192.168.1.1 -n 10";
    String pingResult = "";

    String pingCmd = "ping " + ip;

    try{

        Runtime r = Runtime.getRuntime();
        Process p = r.exec(pingCmd);

        BufferedReader in = new BufferedReader(new InputStreamReader(p.getInputStream()));
        String inputLine;
        while ((inputLine = in.readLine()) != null) {
            System.out.println(inputLine);
            pingResult += inputLine;
        }
        in.close();
    } catch(Exception e) {
       System.out.println(e);
    }
} 
```

输出：

```
Reply from 192.168.1.1: bytes=32 time=2ms TTL=64
Reply from 192.168.1.1: bytes=32 time=4ms TTL=64
Reply from 192.168.1.1: bytes=32 time=2ms TTL=64
Reply from 192.168.1.1: bytes=32 time=2ms TTL=64
Reply from 192.168.1.1: bytes=32 time=20ms TTL=64
Reply from 192.168.1.1: bytes=32 time=9ms TTL=64
Reply from 192.168.1.1: bytes=32 time=3ms TTL=64
Reply from 192.168.1.1: bytes=32 time=2ms TTL=64
Reply from 192.168.1.1: bytes=32 time=2ms TTL=64
Reply from 192.168.1.1: bytes=32 time=3ms TTL=64

Ping statistics for 192.168.1.1:
    Packets: Sent = 10, Received = 10, Lost = 0 (0% loss),
Approximate round trip times in milli-seconds:
    Minimum = 2ms, Maximum = 20ms, Average = 4ms 
```

我是否需要声明一个变量并使用 BufferedReader 将“time = ?ms”写入文本文件？

我正在寻求提示，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T13:26:52.893

试试这个：

```
Pattern pattern = Pattern.compile("time=(\\d+)ms");
Matcher m = null;
while ((inputLine = in.readLine()) != null) {
    m = pattern.matcher(inputLine);
    if (m.find()) {
        System.out.println(m.group(1));
    }
} 
```

它从捕获的模式中输出毫秒值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T13:07:22.077

你可以使用`indexOf`：

```
pingResult = pingResult.substring(pingResult.indexOf("time=")); 
```

然后删除`TTL`：

```
pingResult = pingResult.substring(0, pingResult.indexOf("TTL")); 
```

因此，最终代码：

```
Runtime r = Runtime.getRuntime();
Process p = r.exec(pingCmd);

BufferedReader in = new BufferedReader(new InputStreamReader(p.getInputStream()));
String inputLine;
while ((inputLine = in.readLine()) != null) {
    System.out.println(inputLine);
    pingResult += inputLine;
}
in.close();
pingResult = pingResult.substring(pingResult.indexOf("time=")).substring(0, pingResult.indexOf("TTL")); 
```

# objective-c - How to solve the conflict in integrating google plus and youtube in iOS

> ID：14937021
> 
> 赞同：1
> 
> 时间：2013-02-18T13:02:07.577
> 
> 标签：objective-c, ios4, ios6, youtube-api, google-plus

I have got a problem in integrating google plus and youtube in my iOS application.First I have integrated Google plus framework and it worked well.But When I tried to integrate Youtube files with my Xcode project compiler errors came.I think there are some conflicts between libGDataTouchStaticLib.a of Youtube and libGooglePlusUniversal.a of Google Plus.A lot of Errors are coming among them one is below.

```
uplicate symbol _OBJC_IVAR_$_GTMHTTPFetcher.request_ in:
/Users/admin/Library/Developer/Xcode/DerivedData/GoSayIt_v3- bpbdvhqiblfiafeulvjgqcnzeisq/Build/Intermediates/GoSayIt v3.build/Debug-iphonesimulator/GoSayIt v3.build/Objects-normal/i386/GTMHTTPFetcher.o
/Users/admin/Desktop/backup/goSayit_v.1.0.0/GoSayIt v3/libGDataTouchStaticLib.a(GTMHTTPFetcher.o) 
```

If I remove libGDataTouchStaticLib.a Error occurs in Youtube section and If I remove libGooglePlusUniversal.a Error occurs in Google Plus.What Should I do If I need to Integrate both?Please Help me.Thanks In Advance.

# android - 声音计安卓

> ID：14937023
> 
> 赞同：3
> 
> 时间：2013-02-18T13:02:14.127
> 
> 标签：android, audio

我正在尝试在 android 中实现一个以 dB 为单位的声级计，但我还没有找到开始的方法。我已经查看了 androids API 并没有找到任何我认为合适的东西。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T13:39:01.133

这通常是不可能的，因为“dB”的不同含义之间存在混淆，并且您无法在没有校准的情况下测量物理声压级（通常是人们谈论“声级计”时的意思）。设备。查看我之前对类似问题的回答：

*   [可以转换为分贝的形式的音频输出电平](https://stackoverflow.com/questions/14453674/audio-output-level-in-a-form-that-can-be-converted-to-decibel/14455170#14455170)
*   [计算 A 加权（或 B 或 C）声压级分贝 iOS](https://stackoverflow.com/questions/13013895/calculate-a-weighted-or-b-or-c-spl-decibel-ios/13071120#13071120)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T13:15:26.540

尝试使用[AudioRecord](http://developer.android.com/reference/android/media/AudioRecord.html)将音频录制到缓冲区，然后从原始 PCM 数据中测量 dB。

初始化[AudioRecord](http://developer.android.com/reference/android/media/AudioRecord.html)

```
AudioRecord record = new AudioRecord(AudioSource.MIC, SAMPLING_RATE, AudioFormat.CHANNEL_CONFIGURATION_MONO, AudioFormat.ENCODING_PCM_16BIT, bufferSize); 
```

从 MIC 读取样本

```
short[] buff = new short[8000];
record.read(buff, 0, buff.length); 
```

# mysql - MySQL：将业务逻辑存储在表中

> ID：14937024
> 
> 赞同：0
> 
> 时间：2013-02-18T13:02:17.810
> 
> 标签：mysql, sql, database, oracle

我有一个名为 test 的表：

```
create table demo (name varchar(10), mark1 int, mark2 int); 
```

我多次需要每一行的 mark1 和 mark2 的总数。

```
select name, (mark1 + mark2) as total from demo; 
```

我被告知效率不高。我不允许在表中添加新的总计列。

我可以在索引中存储这样的业务逻辑吗？

我创建了一个视图

```
CREATE VIEW view_total AS SELECT name, (mark1 + mark2) as 'total' from demo; 
```

我用以下内容填充了演示表：

```
DELIMITER $$
CREATE PROCEDURE InsertRand(IN NumRows INT)
    BEGIN
        DECLARE i INT;
        SET i = 1;
        START TRANSACTION;
        WHILE i <= NumRows DO
            INSERT INTO demo VALUES (i,i+1,i+2);
            SET i = i + 1;
        END WHILE;
        COMMIT;
    END$$
DELIMITER ;

CALL InsertRand(100000); 
```

的执行时间

```
select * from view_total; 
```

和

```
select * from demo; 
```

相同，10毫秒。所以我没有获得任何见地的好处。我试图在视图上创建索引：

```
create index demo_total_view on view_total (name, total); 
```

失败并出现错误：

```
ERROR 1347 (HY000): 'test.view_total' is not BASE TABLE 
```

关于如何防止总计列的冗余操作的任何指针？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T13:25:53.373

作为一般规则，*永远不要*将退出时可以计算的内容存储在表格中。例如，您想要年龄，您应该存储出生日期。如果您想要两列的总和，则应该存储这两列，仅此而已。

维护数据库中的数据完整性、质量和一致性应该是您最关心的问题。如果第三列（即前两列的总和）有微小的可能不同步，那么就不值得这样做。

因为如果不将计算嵌入到将数据插入表中的所有代码中（将来容易被遗忘并且更新可能会破坏它）或每次插入某些内容时触发触发器（大量额外工作），您就无法维护列不要这样做。

您的情况是视图的完美用例。您需要以相同的方式一致地计算一列。如果您让每个人都按照自己的意愿进行计算，那么会出现与插入计算列相同的问题，您需要保证始终以相同的方式计算。做到这一点的方法是在您的表上有一个以标准方式预先计算列的视图，这对于每个用户都是相同的。

> 计算数百次的总和会比从某个地方读取它要昂贵得多......对吗？

不一定，这完全取决于你自己的情况。如果您的磁盘速度较慢，那么读取数据可能会比计算数据更昂贵。特别是因为这是一个非常简单的计算。

很可能它根本不会产生任何影响，但如果这是一个主要的性能问题，您应该测试这两种情况并确定数据质量的潜在损失和维护表中计算的额外开销是否值得奇怪的纳米其次是从数据库中提取。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T13:47:45.997

> 我被告知效率不高。

通过谁？当然，您应该要求发表声明的人解释它 - 而不是我们？

效率不高怎么办？*唯一*会*显着*影响性能的地方是您可以在 mark1 和/或 mark2 上使用索引 - 它不会用于如下查询：

```
SELECT *
FROM demo
WHERE mark1+mark2 > 200; 
```

但是使用两个值的索引，您可以这样做：

```
SELECT *
FROM demo
WHERE mark1+mark2 > 200
AND (mark1 > (200/2) OR mark2 > (200/2)); 
```

将 2 列加在一起的开销可以忽略不计。您可以通过比较以下经过的时间来自己证明这一点：

```
SELECT SQL_NO_CACHE mark1, mark2, name FROM demo; 
```

和

```
SELECT SQL_NO_CACHE mark1+mark2, name FROM demo; 
```

（关于您的错误 - 如果您在表上创建索引，则视图将自动检测并使用它）。

（MariaDB 支持[虚拟列](http://openlife.cc/blogs/2010/october/what-would-you-use-virtual-columns)，可用于创建类似于 Oracle 的基于函数的索引的行为）。

# java - Java中的随机动作

> ID：14937025
> 
> 赞同：-3
> 
> 时间：2013-02-18T13:02:25.803
> 
> 标签：java, random

我正在用 Java 编写我自己的第一个国际象棋游戏。

我的代码已经适用于两个玩家，从键盘手动播放，我想将它扩展到一个玩家对抗电脑游戏。

我的问题是我从来没有处理过随机动作。在棋盘上移动棋子的方法需要接收 4 个输入：棋子位置的两个整数和棋盘上目的地的两个整数。

选择错误的输入是可以的，因为 movePiece 方法已经检查了整数是否超出棋盘的范围，它们是否真的达到了当前玩家的颜色，坐标中有一个棋子并且它不是空的，等等。

但是我如何随机获得这 4 个整数呢？以及如何使它们尽可能接近“真实”输入（这样我就不会花很多时间取消错误输入的资格）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T13:07:44.767

Java 提供了至少两个选项来生成随机值：

[http://docs.oracle.com/javase/6/docs/api/java/util/Random.html](http://docs.oracle.com/javase/6/docs/api/java/util/Random.html) [http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html ＃随机的（）](http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html#random())

例如，获取以 4 为界的随机 int 值：

```
int x = new Random().nextInt(4);
int y = (int) (Math.random() * 4);

System.out.println(x + " " + y);

>> 2 3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T13:23:38.903

如果您真的想创建一个随机移动的计算机播放器，我认为最好这样做：

1.  随机选择棋盘上现有的棋子之一
2.  计算该棋子可以移动到的所有合法目的地
3.  如果没有合法的目的地，请在之前未选择的部分中选择一个新的部分
4.  随机选择一个计算的合法目的地

然而，让电脑玩家随意移动是相当愚蠢的。计算机玩家需要某种形式的逻辑来比较两个动作中哪一个更好。实现这样的逻辑可能相当复杂，您最好使用评论中建议的国际象棋库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T13:27:03.937

你不需要 4 个整数。你只需要1。

这样做的一种方法：

1.  迭代板上的棋子。
2.  对于每件作品，确定其可用动作并将所有可用动作粘贴在列表中。
3.  从列表中随机选择一个动作（或非随机，如果你觉得如此倾向）。

# r - 使用 stargazer 和 knitr 放置表格

> ID：14937026
> 
> 赞同：6
> 
> 时间：2013-02-18T13:02:35.130
> 
> 标签：r, knitr

我有一个`knitr`包含回归结果表的文档作为输出`stargazer`，如下所示：

```
\documentclass[11pt]{article}
\begin{document}

<<setup, echo = FALSE, results= 'hide', message = FALSE>>=
data(mtcars)
library(stargazer)
@

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam eleifend molestie nisi, id scelerisque orci venenatis imperdiet. Fusce dictum congue faucibus. Phasellus mollis bibendum tellus eu interdum. Nam sollicitudin congue fringilla. Donec rhoncus viverra lorem vel molestie. Ut varius facilisis ante, a pretium arcu feugiat in. Maecenas sagittis accumsan massa. Pellentesque sollicitudin odio non odio elementum vel tristique dui mattis. Pellentesque tempus feugiat magna, a pharetra ipsum posuere ac. Donec fringilla ligula nec tellus egestas dictum. Vestibulum sit amet sem elit. Vestibulum nibh purus, pulvinar nec hendrerit sollicitudin, posuere ac mi. Cras mollis lorem ac mauris pellentesque elementum. In venenatis laoreet ligula.

<<echo=FALSE, results='asis', comment=NA>>=
model1 <- lm(mpg ~ gear, data=mtcars)
stargazer(model1)
@
\end{document} 
```

如何影响该表格在文档中的位置，或者换句话说，如何将位置说明符传递给表格环境`stargazer`生成？我翻阅了[手册](http://cran.r-project.org/web/packages/stargazer/stargazer.pdf)，但空无一物。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-06T01:07:17.383

从 4.0 版（现在可在 CRAN 上获得）开始，您可以使用 table.placement 参数轻松调整表格位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T13:37:50.833

解决此问题的一种方法是使用正则表达式替换放置参数。

如果您检查 stargazer 输出，您会注意到默认值为

```
[4] "\\begin{table}[htb] \\centering " 
```

您可以找到`htb`并用您的论点替换它。这是一种方法

```
x <- stargazer(model1)
gsub("\\[htb\\]", "[h]", x)
 [4] "\\begin{table}[h] \\centering " 
```

# opencv - 如何去除二值图像中未闭合的曲线？

> ID：14937028
> 
> 赞同：6
> 
> 时间：2013-02-18T13:02:40.060
> 
> 标签：opencv

经过一些处理，我有这个二进制图像：

![在此处输入图像描述](../Images/ed77852a01da59c410ee7aef216e28b1.png)

我想删除未闭合的曲线，即左上角和右下角曲线。你能建议我这样做的算法吗？谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-18T14:12:29.977

正如@John Zwinck 提到的，这可以使用 来完成`floodfill`，但我认为您的问题是您想要返回原始的黑色背景，并保留闭合形状的轮廓。虽然您可以使用它`contours`来解决这个问题，但这是一种相当简单的方法，它将从图像中删除所有非闭合和未闭合的线段，即使它们附加到闭合形状，但保留闭合曲线的边缘。

1.  用白色填充图像 - 这可以消除您的问题非闭合线，还可以消除您想要的对象的边界。
2.  腐蚀图像，然后反转它
3.  与原始图像的图像 - 从而恢复边界。

输出：

![在此处输入图像描述](../Images/057aa1666fb620b548101b1de0622138.png)

代码在 python 中，但应该很容易转换为通常的 C++ cv2 用法。

```
import cv2
import numpy as np

im = cv2.imread('I7qZP.png',cv2.CV_LOAD_IMAGE_GRAYSCALE)
im2 = im.copy()
mask = np.zeros((np.array(im.shape)+2), np.uint8)
cv2.floodFill(im, mask, (0,0), (255))
im = cv2.erode(im, np.ones((3,3)))
im = cv2.bitwise_not(im)
im = cv2.bitwise_and(im,im2)
cv2.imshow('show', im)
cv2.imwrite('fin.png',im)
cv2.waitKey() 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-18T13:07:15.173

您正在寻找洪水填充：[http ://en.wikipedia.org/wiki/Flood_fill](http://en.wikipedia.org/wiki/Flood_fill)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T14:07:26.743

我对一个想法进行了一些尝试，尽管从长远来看，这不是最有效的方法。我将图像转换为 300x300 字符的数组，它似乎在这方面效果很好。我对opencv不熟悉。

这个想法是遍历每个像素，看看它是否标记了一行的结尾——如果是，则将该像素设为黑色。重复直到图片没有变化。

我用来将像素标识为行尾的标准是注意该像素循环周围的黑白变化的数量。如果少于 4 个更改，则为一行的结尾。如果线条粗于 1 px，这将不起作用。我可能会想出更好的东西。它似乎适用于提供的图片。

```
do {
   res = 0;
   for (i = 1; i < 299; i++) {
      for (j = 1; j < 299; j++) {
         if (image[i][j] != 0) {
            count = 0;

            if (image[i-1][j-1] != image[i-1][j+0]) count++;
            if (image[i-1][j+0] != image[i-1][j+1]) count++;
            if (image[i-1][j+1] != image[i+0][j+1]) count++;
            if (image[i+0][j+1] != image[i+1][j+1]) count++;
            if (image[i+1][j+1] != image[i+1][j+0]) count++;
            if (image[i+1][j+0] != image[i+1][j-1]) count++;
            if (image[i+1][j-1] != image[i+0][j-1]) count++;
            if (image[i+0][j-1] != image[i-1][j-1]) count++;

            if (count < 4) {
               image[i][j] = 0;
               res = 1;
            }
         }
      }
   }
} while (res); 
```

# c# - 启用对位置的访问 Windows 8 应用程序 (Geolocator)

> ID：14937030
> 
> 赞同：0
> 
> 时间：2013-02-18T13:02:39.917
> 
> 标签：c#, windows-8, microsoft-metro

我正在使用地理定位器。所以我有异步方法 OnPositionChanged() ，一切都应该很好。但我无法访问位置。如果我使用 Windows 8 Sample Geolocation App 一切正常。我有消息表明应用程序使用我授予访问权限的位置并且它可以工作，但在我的应用程序中，此消息未出现，并且地理定位器的状态为禁用。如何以编程方式向我的应用授予位置访问权限？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:32:48.227

与 Windows Phone 类似，使用位置要求您作为开发人员明确声明您的应用程序将需要访问位置 API。这是在应用程序清单中设置的。在解决方案资源管理器中，查找 Package.appmanifest 项并双击它打开 - 清单属性窗口将打开。

单击功能选项卡。检查位置功能（就在它下面）。 ![地理位置](../Images/eabdfab9a0b65ceff3b0aaf36ca748b6.png)

# html - 使用 CSS 为页面内容构建框架

> ID：14937035
> 
> 赞同：-7
> 
> 时间：2013-02-18T13:02:52.640
> 
> 标签：html, css

![在此处输入图像描述](../Images/3c51f36ffde705e7e2989c5e7cc5f572.png)

大家好，我需要用css做这样的框架。我有 8 张图像（4 个顶角和底角以及 4 个将重复的图像）。这个框架应该是可调整大小的，所以我可以使用 javascript 将其调整为屏幕尺寸。

问题是我不知道该怎么做。我试图用谷歌搜索教程，但失败了。

有人可以为我指出一个深入研究的方向吗？所以我有一个开始的地方。一些教程或示例人们如何做到这一点）将不胜感激，谢谢）

附言

我知道如何调整图像大小。我不知道如何组合`div's`来获得像绿色这样的标题。中间有两个角和可调整大小的元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:04:31.553

您可以使用 css3 轻松做到这一点......您应该使用`border-radius`和`box-shadow`css 属性

阅读：[http](http://www.css3.info/preview/rounded-border/) ://www.css3.info/preview/rounded-border/和[http://www.css3.info/preview/box-shadow/](http://www.css3.info/preview/box-shadow/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T13:13:08.713

除了标题背景，您不需要任何其他图像。您可以将 div 用作具有图像背景和 100% 宽度的标题，另一个 div 作为具有背景和边框以及填充/边距的外部“正方形”，然后使用具有白色背景和边框半径的 div（[http://www.w3schools.com /cssref/css3_pr_border-radius.asp](http://www.w3schools.com/cssref/css3_pr_border-radius.asp)）。（您也可以使用 css3 从标题背景进行渐变，但尚未被浏览器很好地采用）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T13:22:28.093

我做了一个简单的[jsFiddle](http://jsfiddle.net/uTHwk/)，我希望它会有所帮助。我只使用`border-radius`了 from css3 选择器。您可以使用渐变来实现标题中的渐变效果。

# java - Run functions inside for loop

> ID：14937041
> 
> 赞同：-4
> 
> 时间：2013-02-18T13:03:19.763
> 
> 标签：java, function, random

I want to run my function many times and get different answers(because it deals with random numbers), and get the minimum from all possible answers. But the function always returns the same value. How can I correct the loop to get different answers each time and find their minimum? Here is my code

```
 int n = 0;
    KargerMinimumCut karger = new KargerMinimumCut();
    ArrayList<Integer> answers = new ArrayList<Integer>();
    for(int i = 0; i < 10; i++) {
        n = karger.minCut(vertices);
        answers.add(n);
    }
    int min = minimum(answers);
    System.out.println("Minimum Number is: " + min); 
```

and the minimum function

```
public static int minimum(ArrayList<Integer> array) {
    int min = array.get(0);
    for(int i = 1; i < array.size(); i++) {
        if(array.get(i) < min)
            min = array.get(i);
    }
    return min;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:07:59.220

编辑：

好的，在看到您的算法后，您需要执行此操作。（顺便说一下，我会使用一个简单的二维整数数组）。

```
int min = Integer.MAX_VALUE;
KargerMinimumCut karger = new KargerMinimumCut();
for(int i = 0; i < 10; i++) {
    int cut = karger.minCut(copyOfVertices(vertices));
    System.err.println(cut);
    min = Math.min(min,cut);
}
System.out.println("Minimum Number is: " + min); 
```

.

```
public ArrayList<ArrayList<Integer>> copyOfVertices(ArrayList<ArrayList<Integer>> vertices) {
  ArrayList<ArrayList<Integer>> copy = new ArrayList<ArrayList<Integer>>();
  int size = vertices.size();
  for (int i=0; i<size; i++) {
    int innerSize = vertices.get(i).size();
    ArrayList<Integer> row = new ArrayList<Integer>();
    for (int j=0; j<innerSize; j++) {
      row.add(new Integer(vertices.get(i).get(j)));
    }
    copy.add(row);
  }
  return copy;
} 
```

# apache - Apache mod_rewrite: remove only a specific folder from the url and remove the extension from all the files inside that folder

> ID：14937042
> 
> 赞同：0
> 
> 时间：2013-02-18T13:03:22.380
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting, friendly-url

I've tried some different solutions I've found on the web on my .htaccess file (placed in the root of my website), but I always end up with an "Internal Server Error"...

I need a generic rule to remove a specific folder from the URL and the extension of all the files contained in it (adding a trailing slash at the end), with a redirection to the rewrited url. So, for example:

the folder I want to work on is called "pages", so the rule should not affect any other folder, and I want that the url

```
http://www.example.com/subfolder/pages/
will be rewrited/redirected to
http://www.example.com/subfolder/ 
```

and

```
http://www.example.com/subfolder/pages/page1.php
will be rewrited/redirected to
http://www.example.com/subfolder/page1/ 
```

and

```
http://www.example.com/subfolder/pages/subpages/page1.php
will be rewrited/redirected to
http://www.example.com/subfolder/subpages/page1/ 
```

and so on...

How can I achieve that?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T15:38:21.910

这在两条规则中会更合乎逻辑：

1.  删除扩展名：/subfolder/pages/(.*).[^.]+ -> /subfolder/pages/$1/
2.  从 URL 中删除页面：/subfolder/pages/(.*) -> /subfolder/$1

没有测试规则，但这应该能让你到达那里。

# javascript - 使用 Javascript 检查特定格式的输入值

> ID：14937044
> 
> 赞同：0
> 
> 时间：2013-02-18T13:03:25.777
> 
> 标签：javascript, regex, input, validation

我有一个允许用户输入日期的输入字段。

我需要此日期采用以下格式：**10Jan13**（大写不重要）

有一个弹出日历，如果使用它将为用户正确格式化日期。

我想`onblur`使用 Javascript 检查输入的值，以确保用户没有错误地粘贴或键入日期。

我目前正在检查这样的纯数字字段：

```
var numbers = /^[0-9]+$/;

if (!BIDInput.value.match(numbers))
{
    checkedInput.value = "";
    alert('Not a number');
} 
```

我正在检查这样的纯字母字段：

```
var letters = /^[a-z]+$/ 

if (!nameInput.value.match(letters))
{
 nameInput.value = "";
     alert('Not a letter');
} 
```

如果可能，我想以类似的方式检查日期格式。但是完成任务的任何事情都会做。谁能指出我如何完成这项工作的正确方向？

我知道客户端验证不会取代服务器端验证。这仅用于用户体验目的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T13:06:24.900

你几乎已经有了你所拥有的。基本上你的格式是一个或两个数字，然后是 12 个可能的字符串之一，然后是两个数字。例如：

```
var shortDateRex = /^\d{1,2}(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\d{2}$/; 
```

分解：

*   `^`字符串的开始。

*   `\d{1,2}`一位或两位数。

*   `(:?...)`非捕获组。或者，如果您愿意，也可以使用捕获组。

*   `Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec`*交替*，允许这十二种选择中的任何一种。当然，如果您愿意，您可以添加更多。如果您有两个以相同方式开始的选项（例如`Jan`和`January`），请将较长的选项放在更早的交替中。

*   `\d{2}`两位数。

* * *

旁注：原则上，我不得不建议不要使用两位数的日期，尤其是考虑到我们目前所处的世纪！

* * *

回应 Amberlamps 的评论，即这不会验证*日期*：一旦您验证了格式，如果您愿意，就可以轻松检查日期本身（例如，排除`30Feb13`）：

```
var validateDateString = (function() {
  var monthNames = "Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec".toLowerCase().split("|");
  var dateValidateRex = /^(\d{1,2})(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)(\d{2})$/i;
  var arbitraryCenturyCutoff = 30;

  function validateDateString(str) {
    var match;
    var day, month, year;
    var dt;

    match = dateValidateRex.exec(str);
    if (!match) {
      return false;
    }
    day   = parseInt(match[1]);
    month = monthNames.indexOf(match[2].toLowerCase()); // You may need a shim on very old browsers for Array#indexOf
    year  = parseInt(match[3], 10);
    year += year > arbitraryCenturyCutoff ? 1900 : 2000;

    dt = new Date(year, month, day);

    if (dt.getDate() !== day ||
      dt.getMonth() !== month ||
      dt.getFullYear() !== year) {
      // The input was invalid; we know because the date object
      // had to adjust something
      return false;
    }
    return true;
  }

  return validateDateString;
})(); 
```

...或类似的规定。

[实例](http://jsbin.com/anibuj/1)| [来源](http://jsbin.com/anibuj/1/edit)

或者，如果（像我一样）你不喜欢看到重复的月份名称列表，你可以使用`RegExp`带有字符串的构造函数，但你必须记住复制你的反斜杠：

```
var monthNamesString = "Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec";
var monthNames = monthNamesString.toLowerCase().split("|");
var dateValidateRex = new RegExp("^(\\d{1,2})(" + monthNamesString + ")(\\d{2})$", "i"); 
```

[实例](http://jsbin.com/anibuj/2)| [来源](http://jsbin.com/anibuj/2/edit)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T13:10:01.330

您将使用以下正则表达式来检查以 2 个数字开头的字符串，后跟 3 个字符，后跟 2 个数字

```
[0-9]{2}[a-zA-Z]{3}[0-9]{2} 
```

# entity-framework - Does ASP .Net MVC have anything similar to Java's [Transient] attribute?

> ID：14937048
> 
> 赞同：4
> 
> 时间：2013-02-18T13:03:46.363
> 
> 标签：entity-framework, transient

As the title says, is there a way in ASP .Net MVC (4) to mark a models property as "Transient" i.e. not persist to database.

I am looking to make a model to which most of the data is stored in an external system, I simply need to store a reference of that record in my system and fetch the data from the external system when needed. Am I able to do this using attributes or do I need to implement some sort of View Model?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T14:15:11.513

由于它是语言名称的一部分，我认为对你来说最好的做法是将它包含在 ViewModel 中，当你首先在控制器中获取数据时填充它，而当你使用它时不做任何事情返回控制器进行保存。

唯一接近您所描述的是实体框架的 NotMapped 属性，它将知道不为该字段创建列或将任何内容保存到数据库中。但这些通常仅用于预先计算的属性（即您想要一种快速的方法来询问您的 3 个字段的总和）。

# java - VM arguments are added (automatically) after server start

> ID：14937053
> 
> 赞同：1
> 
> 时间：2013-02-18T13:04:17.587
> 
> 标签：java, tomcat7, ibm-rad

I'm facing a serious problem with my tomcat server, which I can't resolve by my own, so I'm hoping you guess can help me out.

**Setting**

IBM Rational Application Developer 8.5.1

Tomcat 7.0.32

**Problem**

When I'm deploying a WAR on the tomcat, a bunch of vm arguments is added automatically, which causes a "kickout" of my own vm arguments, because there's so many of the automatically added ones.

The arguments are:

```
"-agentpath:D:\Entwicklung\IBM\IBMShared\plugins\org.eclipse.tptp.platform.jvmti.
runtime_4.7.101.v201210191900\agent_files\win_ia32\JPIBootLoader=JPIAgent:
server=standalone,file=;ProbekitAgent:ext-pk-BCILibraryName=BCIEngProbe,ext-pk-
probescript=D:\Entwicklung\workspaces\RAD\.metadata\.plugins\com.ibm.rational.
llc.ide.core\.coverage\1361184798442-vke-core-persistency-jar-org.eclipse.jst.
server.tomcat.core.launchConfigurationType.probescript" "-Dcoverage.out.file=
D:\Entwicklung\workspaces\RAD\.metadata\.plugins\com.ibm.rational.llc.ide.core
\.coverage\1361184798442-vke-core-persistency-jar-org.eclipse.jst.server.tomcat.
core.launchConfigurationType.coveragedata"  "-Xbootclasspath/a:D:\Entwicklung\
IBM\IBMShared\plugins\com.ibm.rational.llc.engine_1.1.1.v20121205_2240;
D:\Entwicklung\IBM\IBMShared\plugins\org.eclipse.hyades.execution_4.5.
103.v201210051900\hexl.jar;D:\Entwicklung\IBM\IBMShared\plugins\
org.eclipse.hyades.execution_4.5.103.v201210051900\hexr.jar" -Dcatalina.base
="D:\Entwicklung\workspaces\RAD\.metadata\.plugins\org.eclipse.wst.
server.core\tmp0" -Dcatalina.home="D:\Entwicklung\apache-tomcat-7.0.32\
apache-tomcat-7.0.32" -Dwtp.deploy="D:\Entwicklung\workspaces\
RAD\.metadata\.plugins\org.eclipse.wst. server.core\tmp0\wtpwebapps" 
-Djava.endorsed.dirs="D:\Entwicklung\apache-tomcat-7.0.32\apache-tomcat-
7.0.32\endorsed" -Dcoverage.server.mode=true "-Dac.library.path=D:
\Entwicklung\IBM\IBMShared\plugins\org.eclipse.tptp.platform.
ac.win_ia32_4.5.1.v201210051900\agent_controller\bin" 
```

**Things I tried to solve the problem**

*   tomcat new installed
*   RAD new installed (from scratch)
*   tomcat cleaned and redeployed

I hope someone knows what's going on here, I'm just curious what and why is changing the vm arguments... If you need further information, please let me know

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-19T15:31:11.567

我对 RAD 8.5 和 WAS 6.1 有类似的问题，在我的情况下，我必须编辑 server.xml

它位于：[WEBSPHERE_HOME]\AppServer\profiles\config\cells[NodeCellName]Node01Cell\nodes[NodeName]Node01\servers\server1\server.xml

寻找标签：< jvmEntries /> 这个标签有几个属性，比如@debugArgs，@genericJvmArguments 确保你有你需要的参数。

希望对您有所帮助。

# .net - Reproducible crash using Graphics.DrawArc

> ID：14937057
> 
> 赞同：7
> 
> 时间：2013-02-18T13:04:33.540
> 
> 标签：.net, graphics

Our software renders technical drawings. One particular drawing made the application crash every time with an *OutOfMemoryException*. Upon investigation, nothing seemed out of the ordinary; the app didn't request a lot of memory, didn't use a lot of handles. I tried catching the exception and the app finished the drawing without throwing another one. In fact, there was always only the one *OutOfMemoryException*, and it was always the same graphics primitive that caused it.

The following code is the minimum required to cause this particular crash. It seems that the exact combination of image size, pen style and coordinates causes the exception. Rounding the coordinates down to three decimals makes it disappear, as does making the graphics dimensions smaller or using a pen without dashing.

```
using (Bitmap b = new Bitmap(200, 200))
{
  using (Graphics g = Graphics.FromImage(b))
  {
    using (Pen p = new Pen(Color.Black))
    {
      p.DashPattern = new float[]{10.0f, 2.0f};

      RectangleF r = new RectangleF(
        BitConverter.ToSingle(new byte[]{0xD3, 0x56, 0xB3, 0x42}, 0),
        BitConverter.ToSingle(new byte[]{0x87, 0x2D, 0x17, 0x43}, 0),
        BitConverter.ToSingle(new byte[]{0xE2, 0x81, 0xD1, 0x3F}, 0),
        BitConverter.ToSingle(new byte[]{0xE2, 0x81, 0xD1, 0x3F}, 0));
      float st = BitConverter.ToSingle(new byte[]{0x6B, 0xF6, 0x1A, 0x42}, 0);
      float sw = BitConverter.ToSingle(new byte[]{0x6D, 0x33, 0x4F, 0x40}, 0);

      g.DrawArc(p, r, st, sw);
    }
  }
} 
```

In this case it's not complicated to create a workaround, but I was wondering if someone had an explanation for this.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T15:19:12.183

System.Drawing 是 GDI+ 的包装器，GDI+ 是一个比 .NET 发布早很多年的非托管库。它有一个典型的 C api 问题，错误报告相当差。GDI+ 只有 20 个不同的错误代码，对于这么大的代码块来说并不多。它们也是非常不透明的，特别是 Status::GenericError。一个非常常见的错误，对于许多没有共同点的可能错误条件返回。

System.Drawing 几乎无法使这些错误代码更具描述性，因为它们在设计上不是描述性的。Status::OutOfMemory 也符合这种模式。它几乎无能为力，但会生成一个托管异常，这意味着同样的事情。遗憾的是，这也不是一个好的选择，因为 OutOfMemoryException 在 .NET 中非常具体。

这里有很多损失，几乎没有获胜的方法。您只需要从表面上看待 GDI+ 糟糕的错误报告并解决问题。在这种情况下，避免将虚线笔用于非常小的弧线很可能会解决您的问题。无论如何，您都看不到破折号图案。

# titanium - How to store app-wide variables when using CommonJS?

> ID：14937058
> 
> 赞同：1
> 
> 时间：2013-02-18T13:04:33.460
> 
> 标签：titanium, require, cart, commonjs

I am developing apps using Titanium and trying to implement the CommonJS approach. I like the modular setup, but I am wondering how best to deal with things like a shopping cart: temporary, user-created data that needs to last through the lifetime of the app.

I can see three approaches: 1\. Create a special module for such a Cart. It will be created the first time it's require()d, and you can access the cart in its current state from any other module by require()ing it from those modules.

1.  Pass a quasi global Cart object to every module that needs it. This is in breach of the letter and the spirit of CommonJS.

2.  Store the Cart in local memory using Ti.App.Properties. This way, the cart is retained even when the user quits the app.

Any thoughts on what would be best?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:10:01.920

我更喜欢的解决方案是通过以下方式创建一个 CommonJS 模块：

```
function ShoppingCart(options) {
    // do some setup for the shopping cart
}

ShoppingCart.prototype.add(product, qty)
    // add product to cart
}

ShoppingCart.prototype.remove(product, qty)
    // remove product from cart
}

ShoppingCart.prototype.clear()
    // empty cart (and create new, empty one)
}

// etc.

ShoppingCart = new ShoppingCart();

module.exports = ShoppingCart; 
```

如何访问？

```
var Cart = require('path/to/ShoppingCart');
Cart.add();
Cart.remove();
Cart.clear(); 
```

这会创建一种单例，它会在您第一次调用它时创建，并一直保存到应用程序完成（从内存中删除）或者您实现 clear 方法并自行清理它。你也可以使用这个单例来持久化数据，这取决于你要实现哪些部分。这与您的第一个想法相似。

您的第二个想法有几个缺点，因为数据访问未封装到模块中并且数据始终保持不变，因此您需要检测它是否旧并且可以删除。

最后，这取决于您的任务。您是否需要持久存储，您应该将模块与数据库结合起来。您是否仅在运行时需要此信息，模块就足够了。

# android - Watch variable in Eclipse + Sequoyah in android

> ID：14937060
> 
> 赞同：0
> 
> 时间：2013-02-18T13:04:35.597
> 
> 标签：android, eclipse

How to watch variable in C++ (android native code)? I am using Eclipse + Sequoyah plug-in

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:04:06.867

支持本机代码开发的新 ADT 插件。Window->Preferences->Android tree下你看到NDK主题比选择这个和右边的window set Android Native Development Location apply比。

项目右键单击 AndroidTools->AddNativeSupport 然后单击确定。

# php - CodeIgniter doesn't call a method, if validation in constructor fails

> ID：14937064
> 
> 赞同：0
> 
> 时间：2013-02-18T13:05:03.167
> 
> 标签：php, codeigniter

I'm trying to prevent a method from executing if validation in constructor fails. I'm using AJAX and I'm sending the request to a url like `example/search`. I'm currently checking if a variable isn't false but I think there's a better way of doing that, isn't there?

```
class Example extends CI_Controller {

        public $error;
        function __construct() {
            parent::__construct();
                    //validation rules    
            if($this->form_validation->run() == FALSE) {
                $this->error=1;
            }

        }
        function search() {
            if(!$this->error) {
            //code
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:37:27.973

**应用程序/配置/form_validation.php**

```
$config = array(
     'search' => array(
        array('field'=>'', 'label'=>'', 'rules'=>''),
        array('field'=>'', 'label'=>'', 'rules'=>'')
     ),
); 
```

-

**控制器**

```
public function search(){

   //is ajax request?
   if( !$this->input->is_ajax_request() )
   {
      return show_error('Bad Request!'); // bye bye, stop execution
   }

   $this->output->set_status_header('200');

   if( ! $this->form_validation->run('search') )
   {
      echo json_encode(array(
          'error' => 1,
          'errors' => array(
                'field' => form_error('field')
           )
      ));
      return; // bye bye, stop execution
   }

   //all good, continue executing
   //.....
} 
```

**编辑**

```
//For just a constructor 

protected $isValidated = TRUE;

public function __construct(){

    //check for valid ajax request
    //do this in parent class(ajax_controller) ?

    if( !$this->form_validation->run('search') )
    {
       $this->isValidated = FALSE;
       return echo json_encode( array('error' => 1));
    }

    if($isValidated)
    {
         $this->_search( $this->input->post() );
    }
}

protected function _search( $input ){} 
```

-

```
class Ajax_Controller extends CI_Controller{
    public function __construct(){
       if( !$this->input->is_ajax_request() )
       {
          return show_error('Bad Request!');
       }

       $this->output->set_status_header('200');
    }
} 
```

# java - 如何在 HTTPS 支持的 GWT 应用程序中从 HTTP Web 服务获取响应？

> ID：14937072
> 
> 赞同：1
> 
> 时间：2013-02-18T13:05:42.880
> 
> 标签：java, web-services, gwt, https

我必须调用从我的 .运行的`HTTP`Web 服务。`C#``GWT applicaiton``HTTPS`

但是由于 HTTP Web 服务，每次我收到一个错误：`not allowed insecure content`，这会在每个浏览器上加载页面内容产生问题。

有没有什么办法可以用java代码在每个浏览器上更改允许这种不安全的内容？

# c# - XAML gridview中每个组的不同背景颜色不起作用

> ID：14937073
> 
> 赞同：1
> 
> 时间：2013-02-18T13:05:47.570
> 
> 标签：c#, wpf, xaml, windows-8, windows-store-apps

在 Windows 商店应用程序（c# 和 XAML）中，我可以像这样对 gridview 中的所有组应用相同的背景颜色。

```
<GroupStyle.ContainerStyle>
<Style TargetType="GroupItem">
<Setter Property="Background" Value="#28F7E3">
</Setter>
</Style>
</GroupStyle.ContainerStyle> 
```

上面的代码工作正常。我想用“绑定”机制应用同样的东西（因为我想对每个组应用不同的背景颜色）并且我这样编码

```
<GroupStyle.ContainerStyle>
<Style TargetType="GroupItem">
<Setter Property="Background" Value="{Binding GroupColor}"> 
</Setter> 
</Style>
</GroupStyle.ContainerStyle> 
```

但这不适用。在 XAML 世界中，我们可以将绑定应用到 ContainerStyle 元素吗？如何做到这一点？

我在做什么是 1）创建示例窗口存储“GridApp”。它会生成一些文件。我打开了 SampelDataSource 文件。2）创建了一个新属性“GroupColor”并设置了不同的背景颜色值 3）如上所述，绑定到 Gridview Container groupstyle XAML。

更新1：

如果我对 GroupStyle HeaderTemplate 元素做同样的事情，它会按预期应用于 groupelement。这是 GroupHeader 数据模板的代码。

```
<GroupStyle.HeaderTemplate>
<DataTemplate>
<Grid Margin="0">                                      
<Button Background="{Binding Path=GroupColor}" Content="{Binding MyGroupName}"></Button>
</Grid>
</DataTemplate>
</GroupStyle.HeaderTemplate> 
```

但同样的事情不适用于 Style 属性绑定。我没有收到任何错误。它只是没有附加任何我绑定的背景颜色。

# c# - 在 C# 项目上运行声纳显示违规但没有别的

> ID：14937082
> 
> 赞同：1
> 
> 时间：2013-02-18T13:06:22.180
> 
> 标签：c#, .net, sonarqube

我正在尝试使用 Sonar 分析我的应用程序，这是一个 C# 项目。因此我配置了 FxCop、Galileo（带有 OpenCover）和 StyleCop。

看到代码违规工作正常，但不幸的是我看不到任何代码统计信息，如代码行等。我唯一看到的是文件的数量。

在这里可以看到我的声纳仪表板：

![在此处输入图像描述](../Images/8d7a510381e6d0d7c3991f19c94b13aa.png)

如您所见，右侧充满了一些违规行为（由 StyleCop 创建，因为只有“样式错误”，这让我有点困惑，因为我认为我没有犯任何重大错误，例如处理错误的异常之类的像这样）

左边是空的，只有文件的数量是可见的。

有谁知道，为什么我看不到代码行和此页面的其余部分？

根据要求，我将告诉您我的插件版本和声纳属性的内容：

插件版本：

```
FxCop:                          10.0
Gallio:                         3.4.14.0
OpenCover:                      4.0.1107
StyleCop:                       4.7.44.0
Sonar:                          3.4.1
Sonar-runner:                   2.0
C-Sharp-Plugins- Ecosystem:     1.4 ==> Updated to 2.0 (copied / overwrite new files to C:\sonar\extensions\plugins) 
```

sonar-project.properties 的内容（与项目位于同一文件夹中，因此也是 .sln 文件）

```
# optional description
sonar.projectDescription=Some description

# Project identification  
sonar.projectKey=MyVendor:ProjectName
sonar.projectVersion= 1.0
sonar.projectName= ProjectName

# Info required for Sonar  
sources=.
sonar.language=cs

#Core C# Settings  
sonar.dotnet.visualstudio.solution.file=ProjectName.sln 
```

以下是位于 C:\sonar\extensions\plugins 的所有插件的列表：

![在此处输入图像描述](../Images/2bde2ce4e1815b57d31b04a46e4ff23f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T16:49:52.923

您忘记为项目指定源编码。从您的评论来看，您的文件似乎是用 UTF-8 编码的，因此您应该添加以下内容：

> sonar.sourceEncoding=UTF-8

如果这不是 UTF-8，则强制编码为应有的编码。

# ios - UITextView 文本空间在 rezise 期间变小

> ID：14937085
> 
> 赞同：1
> 
> 时间：2013-02-18T13:06:33.607
> 
> 标签：ios, uitextview, frame

我想让用户调整 UITextView 的大小。我在 UITextView 的右下角显示一个按钮，例如当用户移动它时，UITextView 跟随它并调整大小。

这工作正常，但文本空间有一个奇怪的行为。在调整大小的过程中，文本空间似乎越来越小。所以如果我调整了很多，先到大框架再到小框架，文本空间变得比框架小。

```
- (id) init{//My subclass of UITextView
    self = [super init];
    if(self){
        //Resize button
        //Init ResizeButton
        self.resizeButton = [[UIButton alloc]init];

        //Image
        [self.resizeButton setImageForAllState:[UIImage imageNamed:@"Isosceles-right-triangle.png"]];

        //Target
        [self.resizeButton addTarget:self action:@selector(wasDragged:withEvent:) forControlEvents:UIControlEventTouchDragInside];
        [self.resizeButton addTarget:self action:@selector(wasDragged:withEvent:) forControlEvents:UIControlEventTouchDragOutside];

        //Add to view
        [self addSubview:resizeButton];

        //Self
        //text font
        [self setFont:[UIFont fontWithName:@"papyrus" size:17]];

    }
    return self;
}

- (void)wasDragged:(UIButton *)button withEvent:(UIEvent *)event
{

//  NSLog(@"wasDragged");// get the touch
    UITouch *touch = [[event touchesForView:button] anyObject];

    // get delta
    CGPoint previousLocation = [touch previousLocationInView:button];
    CGPoint location = [touch locationInView:button];
    CGFloat delta_x = location.x - previousLocation.x;
    CGFloat delta_y = location.y - previousLocation.y;

    // move button
    button.center = CGPointMake(button.center.x + delta_x,
                                button.center.y + delta_y);

    self.frame = CGRectMake(self.frame.origin.x, self.frame.origin.y, self.frame.size.width+ delta_x, self.frame.size.height+ delta_y);

} 
```

视图也是可拖动的

```
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    // Calculate offset
    CGPoint pt = [[touches anyObject] locationInView:self];
    float dx = pt.x - startLocation.x;
    float dy = pt.y - startLocation.y;
    CGPoint newcenter = CGPointMake(self.center.x + dx, self.center.y + dy);

    // Set new location
    self.center = newcenter;

}

-(void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    // Calculate and store offset, and pop view into front if needed
    CGPoint pt = [[touches anyObject] locationInView:self];
    startLocation = pt;
}

-(void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {

} 
```

* * *

编辑

调整大小之前 ![调整大小之前](../Images/2a85674f61b5d42fc79b89dffcb00ac1.png)

调整大小 ![调整大小](../Images/e9997c6340b97131bedba49460853917.png)

恢复原尺寸 ![恢复原尺寸](../Images/d93b4c4cec35699e5e846ee34a9c97ef.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T09:20:23.327

嗯，我也有这个问题。解决方案是继承 UITextView 并覆盖 setFrame: 方法。在设置你想要的框架之前，为 textView 设置 CGRectZero 框架。它将解决您的问题。代码如下。

```
- (void)setFrame:(CGRect)frame
{
    [super setFrame:CGRectZero];
    [super setFrame:frame];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T13:14:12.497

似乎您可以做以下两件事之一：

第一：关闭控件的“调整到适合”

```
textfield.adjustsFontSizeToFitWidth = NO; 
```

第二：将字体大小硬编码到代码中

```
textfield.font = [UIFont fontWithName:@"desired font name" size:10]; 
```

# sql - 将数据从本地服务器传输到在线服务器

> ID：14937091
> 
> 赞同：0
> 
> 时间：2013-02-18T13:06:44.830
> 
> 标签：sql, sql-server-2008-r2

我在本地 PC 上使用 SQL Server 2008 R2。在我的数据库中，有一张大约有 98000 行的表。现在我想将该数据直接传输到在线服务器数据库。我尝试通过制作该表的脚本，但是当我运行该脚本时，它给了我内存不足的错误。请帮助我..我该怎么做。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:18:29.460

在这种情况下，您可以采用多种策略。这是我头顶上的一些...

*   掌握了一些 .NET 编程吗？ [尝试 SqlBulkCopy 类](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.aspx)
*   将数据导出为可传输格式，例如 CSV 文件，然后使用[BULK INSERT](http://msdn.microsoft.com/en-us/library/ms188365.aspx)插入数据。
*   尝试使用[OPENROWSET](http://msdn.microsoft.com/en-us/library/ms190312.aspx)从本地复制到远程。[堆栈溢出示例](https://stackoverflow.com/questions/10800288/sql-insert-into-from-different-server-and-credentials)
*   如果你充分利用了 SSIS，SSIS 的例子[就在这里](http://blog.sqlauthority.com/2011/05/12/sql-server-import-csv-file-into-database-table-using-ssis/)
*   有点[Heath Robinson](http://en.wikipedia.org/wiki/W._Heath_Robinson)，但为什么不将数据抓取到 CSV 中并使用一些 Excel 技能，自己构建单独的语句。[此处使用 INSERT INTO 和 UNION 的](http://blog.sqlauthority.com/2007/06/08/sql-server-insert-multiple-records-using-one-insert-statement-use-of-union-all/)示例

高温高压

# c# - 我需要嵌入字体以在不同的计算机上使用吗？

> ID：14937094
> 
> 赞同：1
> 
> 时间：2013-02-18T13:06:57.207
> 
> 标签：c#, wpf, fonts

我想知道我是否在我的 PC 上使用带有字体的标签或文本框，但我不能确定每个用户都会拥有它。不同的字体意味着不同的文本大小......我的意思是宽等。很难做像素 - 完美的设计。那么我需要将此字体嵌入到 .exe 文件中还是什么？

或者我必须选择我 100% 确定每个人都有的字体？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T13:12:10.390

[这](https://msdn.microsoft.com/en-us/library/ms753303(v=vs.100).aspx)是有关如何以多种方式将字体嵌入 WPF 应用程序的 MSDN 文章。如果您不能确定您使用的字体在最终用户计算机上是否可用，请使用本文中概述的方法之一。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T13:11:50.477

您需要将字体添加为资源并像这样尝试

创建一个文件夹名称 Fonts 并复制您想要的字体并将 BuildAction 更改为 Resource

像下面这样使用它

```
<Window.Resources>
    <FontFamily x:Key="test" >/Fonts/#Pirulen</FontFamily>
</Window.Resources>

<TextBlock FontSize="25" HorizontalAlignment="Center" 
               FontFamily="{StaticResource test}">data</TextBlock> 
```

查看完整帖子： http: [//learnwpf.com/post/2006/05/14/How-do-I-use-a-custom-font-in-my-WPF-application.aspx](http://learnwpf.com/post/2006/05/14/How-do-I-use-a-custom-font-in-my-WPF-application.aspx)

# java - NumberFormat 异常将字符串解析为字节？

> ID：14937096
> 
> 赞同：0
> 
> 时间：2013-02-18T13:07:15.167
> 
> 标签：java, byte

我正在尝试将以下字符串解析为字节。但它给了我 NumberFormat 异常。有人能告诉我解决方案是什么吗？

```
Byte.parseByte("11111111111111111111111110000001", 2); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T13:09:32.700

超出字节范围，即 -128 到 127。来自[parseByte(String s,int radix)](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Byte.html#parseByte%28java.lang.String,%20int%29) javadoc：

> ```
> public static byte parseByte(String s, int radix)throws NumberFormatException 
> ```
> 
> 将字符串参数解析为第二个参数指定的基数中的有符号字节。字符串中的字符必须都是指定基数的数字（由 Character.digit(char, int) 是否返回非负值决定），但第一个字符可能是 ASCII 减号 '-' ('\u002D ') 表示负值。返回结果字节值。如果发生以下任何一种情况，则会引发 NumberFormatException 类型的异常：
> 
> 1.  第一个参数为空或长度为零的字符串。
> 2.  基数小于 Character.MIN_RADIX 或大于 Character.MAX_RADIX。
> 3.  字符串的任何字符都不是指定基数的数字，除非第一个字符可能是减号“-”（“\u002D”），前提是该字符串的长度大于 1。
> 4.  字符串表示的值不是字节类型的值。
> 
> 返回： 指定基数中的字符串参数表示的字节值 抛出： NumberFormatException - 如果字符串不包含可解析字节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T13:12:02.607

`Byte.parseByte()`将二进制字符串作为符号大小而不是 2 的补码处理，因此一个字节的最长长度是带符号的 7 位。

换句话说，要表示`-127`，您应该使用：

```
Byte.parseByte("-111111", 2); 
```

以下抛出`NumberFormatException`：

```
Byte.parseByte("10000000", 2); 
```

但是，-127 的二进制文字是：

```
byte b = (byte) 0b10000000; 
```

相同的行为适用于其他`parseXXX()`方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T13:10:52.257

来自 javadocs

> 如果发生以下任何一种情况，则会引发 NumberFormatException 类型的异常：
> 
> *   第一个参数为空或长度为零的字符串。
> *   基数小于 Character.MIN_RADIX 或大于 Character.MAX_RADIX。
> *   字符串的任何字符都不是指定基数的数字，除非第一个字符可能是减号“-”（“\u002D”），前提是该字符串的长度大于 1。
> *   字符串表示的值不是字节类型的值。

您的值是超出范围 -128 到 127 的第二种情况

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T13:12:30.473

值太大，无法以*字节*解析 试试这个：

```
new BigInteger("011111111111111111111111110000001", 2).longValue(); 
```

# c# - 使用 DataContractSerializer 序列化接口列表

> ID：14937097
> 
> 赞同：3
> 
> 时间：2013-02-18T13:07:15.100
> 
> 标签：c#, wcf, interface, automapper, dto

我有一个类，其中有一些嵌套类。我将其序列化并使用没有问题的方法将其发送到 wcf 服务。这是课程；

```
public class ComputerDTO
{
    [DataMember]
    public ComputerTypeDTO Type { get; set; }

    [DataMember]
    public string ComputerName { get; set; }

    [DataMember]
    public MonitorDTO Monitor { get; set; }
} 
```

这是方法；

```
public void Check()
{
    Computer c = new Computer();

    ISystemInfoOperations cli = GetServiceClient();

    Mapper.CreateMap<Monitor, MonitorDTO>();
    Mapper.CreateMap<IHardwarePart, IHardwarePartDTO>();

    Mapper.CreateMap<Computer, ComputerDTO>()
            .ForMember(s => s.Hardware, m => m.MapFrom(q => Mapper.Map<List<IHardwarePart>, List<IHardwarePartDTO>>(q.Hardware)));

    Mapper.AssertConfigurationIsValid();

    ComputerDTO dto = Mapper.Map<Computer, ComputerDTO>(c);

    string sendComputerInfo = cli.SendComputerInfo(dto);
} 
```

但我也有一个要发送的接口列表。所以我改变了下面的代码并得到一个错误。

```
public class ComputerDTO
{
    [DataMember]
    public ComputerTypeDTO Type { get; set; }

    [DataMember]
    public string ComputerName { get; set; }

    [DataMember]
    public MonitorDTO Monitor { get; set; }

    [DataMember]
    public List<IHardwarePartDTO> Hardware { get; set; }
}

public interface IHardwarePartDTO
{
    [DataMember]
    string Name { get; set; }

    [DataMember]
    HardwarePartTypeDTO PartType { get; set;  }
} 
```

硬件内部正在填充项目。但是如果我尝试发送它，我会收到这个著名的错误：

> 键入数据合同名称为“_x0030__Culture_x003D_neutral_PublicKeyToken_x003D_null_x003E_”的“代理”：http: [//schemas.datacontract.org/2004/07/Proxy%3CSystemInfo.DTO.IHardwarePartDTO_SystemInfo.DTO_Version=1.0.0](http://schemas.datacontract.org/2004/07/Proxy%3CSystemInfo.DTO.IHardwarePartDTO_SystemInfo.DTO_Version=1.0.0)不是预期的。考虑使用 DataContractResolver 或将任何静态未知的类型添加到已知类型列表中 - 例如，通过使用 KnownTypeAttribute 属性或将它们添加到传递给 DataContractSerializer 的已知类型列表中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T14:02:09.730

DataContractSerializer 需要了解可能返回的具体类型。一个接口不能被序列化，因为它不能被反序列化（如何在没有具体实现的情况下创建一个接口的实例）。

简单的解决方法是添加 KnownTypes 属性，如下所示：

```
[KnownType(typeof(your hardware dto concrete type here))]
public class ComputerDTO
{
    [DataMember]
    public ComputerTypeDTO Type { get; set; }

    [DataMember]
    public string ComputerName { get; set; }

    [DataMember]
    public MonitorDTO Monitor { get; set; }

    [DataMember]
    public List<IHardwarePartDTO> Hardware { get; set; }
} 
```

您可以添加任意数量的已知类型属性。

稍微复杂一点的是 ServiceKnownTypes 属性。这非常相似，但您可以将其添加到您的服务类中。

除此之外，您可以使用数据合同解析器 - 但这非常复杂，需要一段时间来解释。

编辑：2013 年 2 月 18 日 15:11

您可能还需要查看 Automapper，因为它当前将在您的硬件列表中创建代理 - 并且代理无法序列化。您需要告诉 automapper 将它们序列化为什么 - 例如：

```
Mapper.CreateMap<Monitor, MonitorDTO>();
Mapper.CreateMap<Monitor, IHardwarePartDTO>().As<MonitorDTO>();

Mapper.CreateMap<Audio, AudioDTO>();
Mapper.CreateMap<Audio, IHardwarePartDTO>().As<AudioDTO>();

Mapper.CreateMap<CDROMDrive, CDROMDriveDTO>();
Mapper.CreateMap<CDROMDrive, IHardwarePartDTO>().As<CDROMDriveDTO>();
//you need entries like these for everythin that implements IHardwarePartDTO 
```

这样，automapper 就知道它需要创建什么。

# python - Python 多处理模块，Windows，通过创建新进程产生新的控制台窗口

> ID：14937102
> 
> 赞同：5
> 
> 时间：2013-02-18T13:07:33.247
> 
> 标签：python, windows, console, multiprocessing

我对此进行了一些研究，发现了一些类似的问题，但没有一个回答我真正想要的。我了解如何通过`multiprocessing`模块创建和使用流程。但是当我创建一个新进程时，我想生成一个新的控制台窗口，仅用于该进程的使用、打印等，这样子进程就不会共享父进程的控制台窗口。有没有办法用模块做到这一点`multiprocessing`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T14:37:33.423

如果您要生成一个新的控制台窗口，那么您将启动一个新的 Windows 控制台进程以及在其中运行的新 python 进程。

因此，简短（且无益）的答案是`multiprocessing`不会这样做，因为它只会产生 python 进程。

但是，我可以看到两种解决方法；

*   您使用`multiprocessing`并且每个过程都会创建一个`Tkinter`显示您想要的文本的窗口。[这个](https://stackoverflow.com/questions/13318742/python-logging-to-tkinter-text-widget)问题有一个将`logging`输出发送到`Tkinter`窗口的示例。我建议`Tkinter`因为它已经与 python 一起提供，你可以使用`PyQt`等`wxWidgets`。

*   您[`subprocess`](http://docs.python.org/2/library/subprocess.html)用来生成一个完全独立的新 python 进程（或控制台窗口 + 进程）。请注意，您将无法通过`.join()`这种方式轻松地共享或共享线程状态。[这个](https://stackoverflow.com/questions/11712629/opening-a-python-thread-in-a-new-console-window)问题有一个如何创建新的python线程和窗口的例子。

# javascript - JSON：如何解析属性名称

> ID：14937105
> 
> 赞同：2
> 
> 时间：2013-02-18T13:07:40.467
> 
> 标签：javascript, jquery, json, underscore.js

我有很多从类似于下面的 SQL 数据库中获取的 json 数据：

```
var data = [
        {"id": 0, "gender": "male", "name": "joan"},
        {"id": 1, "gender": "female", "name": "pep"},
        {"id": 2, "gender": "female", "name": "maria"},
        {"id": 3, "gender": "female", "name": "meli"},
        {"id": 4, "gender": "female", "name": "jaume"}
            ]; 
```

我怎样才能使用 Javascript（jQuery 或 underscore.js 会更好）？

```
keys = ["id", "gender", "name"]; 
```

（抱歉重复，我找不到完全一样的东西）

**更新：是的，如果您采用数据**数组的第一个元素，这可以被认为是重复的，即： **data[0]**

然后，最短的给定解决方案（使用 underscore.js）是

```
keys = _.keys(data[0]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T13:15:23.340

使用 jquery.each 可以获得 json 对象的键

```
 var keys = [];

    $.each(data[0], function(key, value){
         console.log(key); // id, gender, name
         console.log(value); // 0, male, joan
         keys.push(key);
        }); 
```

控制台.log（键）；// ["id", "gender", "name"]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T13:13:42.797

如果所有对象都具有相同的键，[jquery.map](http://api.jquery.com/jQuery.map/)可能会很有用：

```
keys = $.map(data[0], function(val, key) { return key }) 
```

对于纯 JavaScript 解决方案，请考虑[Object.keys](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/keys)

# asp.net - 使用 asp.net 设置 cookie

> ID：14937113
> 
> 赞同：-1
> 
> 时间：2013-02-18T13:07:53.777
> 
> 标签：asp.net, cookies

我正在尝试使用 asp.net 网页（Webmatrix）设置 cookie，并且我已获得此 c# 代码来读取 cookie 并设置 cookie。我不确定如何应用它来设置 cookie。例如，我希望设置一个名为 islogged 的​​ cookie，并将其值设为 yes。

```
var cookieValue = Request.Cookies["myCookie"].Value; 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:10:52.133

```
Response.Cookies.Add(new HttpCookie("islogged", "true")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T13:09:37.253

在你的情况下：

```
// Set the value in a response
Response.Cookies["islogged"].Value = "true";

// After a post back read the value from the request
Request.Cookies["islogged"].Value; 
```

要了解更多信息，您可以查看[文档](http://msdn.microsoft.com/en-in/library/aa289495(v=vs.71).aspx)。

# jquery - ajax 响应未在单击的超链接的父 div 中呈现

> ID：14937115
> 
> 赞同：0
> 
> 时间：2013-02-18T13:07:57.427
> 
> 标签：jquery, ajax, jquery-selectors

在下面的代码中，我有几个超链接。我希望每当我单击任何超链接时都会发出 ajax 请求，并且响应将通过替换超链接在相应超链接的父 div 中呈现。我在谷歌上搜索并尝试了几种不同的代码，但响应没有在相应超链接的父 div 中呈现。我检查了响应及其正常进行。你可以找到我的一些尝试以评论形式评论。

```
<html>
<head>
<script type="text/javascript" src="js/stdlib/jquery-1-4-2.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    $('[id^=idclick]').click(function(){
    alert("click");
    var tempid=this.id;
    //var divtemp=tempid.closest("div").attr("id").html(result);
    var divtemp=tempid.closest("div");
     $.ajax({
            url: this.href,
            success: function(result) {
                //alert(this.href);
                //alert(divtemp);
                 //$("#iddiv").html(result);
                 //this.parentNode.html(result);
                 //var id = 
                 //var aid=this.id;
                //aid.closest("div").attr("id").html(result);
                divtemp.html(result);
            }
        });
        return false;
    });
});
</script>
<style type="text/css">
testcss {
}
</style>
</head>
<body>
<div id="iddivone"><a id="idclick" href="TestCodeServlet?page=1">click here</a>Old data</div>
<div id="iddivtwo"><a id="idclickone" href="TestCodeServlet?page=1">click here</a>Old data</div>
<br>
<div id="iddivthree"><a id="idclicktwo" href="TestCodeServlet?page=1">click here</a>Old data</div>
<br>
<div id="iddivfour"><a id="idclickthree" href="TestCodeServlet?page=1">click here</a>Old data</div>
</body>
</html> 
```

请指导我解决这个问题。我知道这是一个很小的问题，但我仍然没有得到解决。我确信我犯了一些愚蠢的错误。

请各位朋友指导我！谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:22:20.823

更改此行：

```
var divtemp = tempid.closest("div"); 
```

到：

```
var divtemp = $(this).closest("div"); 
```

`tempid`只是链接的id，没有`closest`方法，你想调用`closest`元素本身（`$(this)`）

# objective-c - 在视网膜设备上调整图像大小

> ID：14937116
> 
> 赞同：5
> 
> 时间：2013-02-18T13:07:57.910
> 
> 标签：objective-c, macos, cocoa, nsimage

我正在为 Mac OS X 开发一个应用程序。我正在尝试将任何应用程序调整`NSImage`为特定大小，例如 200x300。它适用于非视网膜 Mac。但是对于 Retina Mac，它将图像大小调整为 400x600，这只是我们预期的两倍。我的项目需要根据给定大小调整图像大小，无论运行应用程序的设备是视网膜还是非视网膜。我怎样才能达到目标。

我试图测量比例属性，因为视网膜的比例是 2.0，所以我们将图像大小调整为所需的一半。

但是当我们连接到显示器时，一个是视网膜，另一个不是视网膜，它再次产生同样的问题。

这是我用于调整大小的代码：

```
-(void)resizeImage:(NSImage *)sourceImage newSize:(CGSize)newSize
{

    NSString *newImagePath = [[[Utility documentPath] stringByAppendingPathComponent:imagefolder] stringByAppendingPathComponent:@"imageName"];

    [sourceImage setScalesWhenResized:YES];
    [sourceImage setSize:newSize];

    NSImage *newImage = [[NSImage alloc] initWithSize:newSize];

    [newImage lockFocus];

    NSRect frame = NSMakeRect(0, 0, newSize.width, newSize.height);

    [NSGraphicsContext saveGraphicsState];

    NSBezierPath *path = [NSBezierPath bezierPathWithRoundedRect:frame xRadius:0 yRadius:0];
    [path addClip];

    [sourceImage drawInRect:frame fromRect:NSZeroRect operation:NSCompositeSourceOver fraction:1.0];

    [NSGraphicsContext restoreGraphicsState];

    [newImage unlockFocus];

    CGImageRef CGImage = [newImage CGImageForProposedRect:nil context:nil hints:nil];
    NSBitmapImageRep *imgRep = [[[NSBitmapImageRep alloc] initWithCGImage:CGImage] autorelease];

        NSData *data = [imgRep representationUsingType:NSPNGFileType properties: nil];
        [[NSFileManager defaultManager] createFileAtPath:newImagePath contents:data attributes:nil];

    [newImage release];

} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T18:03:35.177

我通过将目标大小除以屏幕比例（screenScale）解决了这个问题。ScreenScale 在普通屏幕上为 1.0，在视网膜屏幕上为 2.0：

```
CGFloat screenScale = [[NSScreen mainScreen] backingScaleFactor];
float targetScaledWidth = sourceImage.size.width*scale/screenScale;
float targetScaledHeight = sourceImage.size.height*scale/screenScale; 
```

# javascript - 使用 nodejs 提供图像

> ID：14937117
> 
> 赞同：0
> 
> 时间：2013-02-18T13:07:58.893
> 
> 标签：javascript, node.js, http, webserver

我有一个图像 pic.jpeg，我必须在浏览器上显示。这是我编写的代码片段。

```
var mimeTypes = {
            '.js' : 'text/javascript',
            '.css' : 'text/css',
            '.gif' : 'image/gif',
            '.jpeg': 'image/jpeg',
            '.html': 'text/html'
        };

    contenttype = mimeTypes[path.extname(req.url)];    
    pathname = "." + req.url;

var stream = fs.createReadStream(pathname);
        stream.on('error', function(error) {
            res.writeHead(500);
            res.end();
            return;
        });
            res.setHeader('Content-Type', contenttype);
            res.writeHead(200);
            stream.on('open', function () {
                // This just pipes the read stream to the response object (which goes to the client)
                util.pump(stream, res, function(error) {
                //Only called when the res is closed or an error occurs
                console.log("Error:");
                res.end();
                return;
                });
            }); 
```

上面的代码在大多数情况下都可以正常工作，并且图像会按原样显示，但有时图像会丢失。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T13:11:27.827

您不应该通过 node.js 提供静态文件。您应该考虑使用 Nginx 或类似的 Web 服务器。

或者，您可以使用`connect`模块来提供静态文件

```
var server = connect()
  .use('/static', connect.static(__dirname + '/static'))
  .use(router)
  .listen(port); 
```

创建一个名为的新目录`static`并将所有文件放入其中，以便您可以通过以下方式访问它们`/static/images/testimage.jpg`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T13:10:18.337

与其实现为自己服务的静态文件，不如使用 Express 之类的库？您可以在此处看到正在使用的：[Express Static nodejs](https://stackoverflow.com/questions/7069360/express-static-nodejs)或在此处查看 API：http: [//expressjs.com/api.html](http://expressjs.com/api.html)（搜索“静态”）。它会少很多代码，而且可靠。

# android - 一旦我开始我的活动，应用程序就会终止

> ID：14937125
> 
> 赞同：0
> 
> 时间：2013-02-18T13:08:35.913
> 
> 标签：android, compiler-errors

我的应用程序在某些设备上运行良好，但是当我在其他一些设备上加载它时，它会打开，但是当我启动一个活动（也需要`screenOrientation="portrait"`）时，它会被终止。任何想法？

```
02-06 11:47:52.390 D/SensorManager(19387): unregisterListener::  Listener= android.view.OrientationEventListener$SensorEventListenerImpl@41fa8a60
02-06 11:47:52.390 D/Sensors (19387): Remain listener = Sending .. normal delay 200ms
02-06 11:47:52.390 I/Sensors (19387): sendDelay --- 200000000
02-06 11:47:52.390 D/SensorManager(19387): JNI - sendDelay
02-06 11:47:52.390 I/SensorManager(19387): Set normal delay = true
02-06 11:47:52.545 D/dalvikvm(19387): GC_CONCURRENT freed 288K, 9% free 13814K/15175K, paused 12ms+2ms, total 29ms
02-06 11:47:52.575 D/SensorManager(19387): registerListener :: handle = 0  name= LSM330DLC 3-axis Accelerometer delay= 200000 Listener= android.view.OrientationEventListener$SensorEventListenerImpl@41e23990
02-06 11:47:52.670 W/IInputConnectionWrapper(19387): getSelectedText on inactive InputConnection
02-06 11:47:52.755 W/IInputConnectionWrapper(19387): setComposingText on inactive InputConnection
02-06 11:47:52.755 W/IInputConnectionWrapper(19387): getExtractedText on inactive Input
Connection
02-06 11:47:52.830 W/IInputConnectionWrapper(19387): finishComposingText on inactive InputConnection
02-06 11:47:52.955 D/dalvikvm(19387): GC_CONCURRENT freed 361K, 9% free 13938K/15175K, paused 2ms+13ms, total 32ms
02-06 11:47:54.450 D/SensorManager(19387): unregisterListener::  Listener= android.view.OrientationEventListener$SensorEventListenerImpl@41e23990
02-06 11:47:54.450 D/Sensors (19387): Remain listener = Sending .. normal delay 200ms
02-06 11:47:54.450 I/Sensors (19387): sendDelay --- 200000000
02-06 11:47:54.450 D/SensorManager(19387): JNI - sendDelay
02-06 11:47:54.450 I/SensorManager(19387): Set normal delay = true
02-06 11:47:54.720 W/IInputConnectionWrapper(19387): showStatusIcon on inactive InputConnection 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:00:45.687

Where your screenOriention information set?

If you set programatically , maybe this give problem. You counld set AndroidManifest file in tags.

# .htaccess - url 重写如何将其他所有内容发送到 index.php 条件

> ID：14937126
> 
> 赞同：0
> 
> 时间：2013-02-18T13:08:36.880
> 
> 标签：.htaccess, url-rewriting, rewrite

那里，

对于任何知道的人来说，这都是一项简单的任务，但我是 Apache 重写的新手，所以请多多包涵。我写了 2 个重写条件，它们起作用了。我需要写第三个 - 以便其他所有内容都转到 index.php 文件。问题是 - 如果我添加第三条规则，尽管前两条规则总是适用。

```
RewriteEngine On 
RewriteRule   ^new/?$   new.php  [NC,L]
RewriteRule   ^thanks(.*)$ thankyou.php [NC,L]
RewriteRule   ^(.*)$ index.php 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:40:37.063

我相信答案在于以下关于与 RewriteRule 指令一起使用的[L 标志的段落：](https://httpd.apache.org/docs/current/rewrite/flags.html#flag_l)

> 如果您在 .htaccess 文件或部分中使用 RewriteRule，那么了解规则的处理方式非常重要。其简化形式是，**一旦处理了规则，重写的请求就会被交回 URL 解析引擎来做它可能做的事情。处理重写的请求时，可能会再次遇到 .htaccess 文件或部分，因此可能会从头开始再次运行规则集。**最常见的情况是，如果其中一个规则导致重定向（内部或外部）导致请求过程重新开始。

我认为发生的情况是，在执行重写之后，以某种方式将控制权交还给 URL 解析引擎并再次运行规则。

您可以通过在最后一条规则中添加一些重写条件来防止这种行为：

```
<IfModule mod_rewrite.c>

RewriteEngine On 

RewriteRule new/?$ new.php [NC,L]
RewriteRule thanks(.*)$ thankyou.php [NC,L]

# Only rewrite to index.php if the current request is not for an existing file or directory
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . index.php [L]

</IfModule> 
```

# android - Android openGl ES 2.0 快速统一改动

> ID：14937127
> 
> 赞同：0
> 
> 时间：2013-02-18T13:08:40.197
> 
> 标签：android, performance, opengl-es-2.0

我有大约 500 个 vec4 需要可用，但每个对象只有约 15 个，然后更改为这 500 个中的 15 个用于绘制下一个对象，依此类推。

起初，我尝试将所有内容一次存储在“统一 vec4 行 [500]”中，这在某些设备上效果很好，但例如在 Galaxy SII 上，这会导致即时崩溃，出现 outOfMemory 异常。比我尝试使用以下方法将每个对象从 CPU 端复制到 GPU 所需的 15 个：

```
GLES20.glUniform4f(GLES20.glGetformLocation(programHandle, "lines["+i/4+"]"), 
      lines[i], lines[i+1], lines[i+2], lines[i+3]); 
```

因为有相当多的对象要绘制，这导致大量的 vec4 被传递给 GPU，并且垃圾收集器每 2 秒被调用一次。

“lines”是一个float[4*lineCount]，也许上传整个float[]的调用会更快，内存效率更高，有人知道怎么做吗？

我相信 UBO 会很好地解决这个问题，但它们不能在 android 上使用，对吗？

有谁知道更好的解决方案？非常感谢！

Galaxy SII 用户就靠你了^_^

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-17T08:13:44.810

这里发生了一些事情：

*   如果您因为 Opengl 而使垃圾收集器运行，则必须重新考虑您的解决方案。它可能会导致您的帧速率不一致。

*   在我看来，您可能会将属性数组与制服混淆。属性数组将是这里的解决方案，因为您希望最小化每帧必须移动到 gpu 的数据量。

*   Galaxy SII 不支持统一缓冲区对象，它只有 OpenGL ES2.0

    *   如果你真的想使用一个大的统一数据集，唯一的方法就是使用纹理。（但在这种情况下真的不推荐。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-17T07:41:16.720

如果您可以使用 OpenGL ES3.0，那么您可以使用[统一缓冲区](https://www.khronos.org/opengl/wiki/Uniform_Buffer_Object)。任何支持 ES3.0 的 Android 设备都应该支持 UBO。

# javascript - Ajax 脚本两次调用 php 脚本

> ID：14937135
> 
> 赞同：0
> 
> 时间：2013-02-18T13:09:06.933
> 
> 标签：javascript, jquery, ajax

我在我的 html 页面上使用 ajax 从 MySql db 加载数据并重新加载并在某些事件上发送电子邮件通知，在 html 页面上选择后 - ajax 调用 script.php 向 db 发出请求并返回结果，它工作得很好；同时我使用显示和隐藏 ajax 加载器图像的函数，直到执行查询，但它调用我的 php 脚本两次，以便每次发送两次电子邮件

```
<script src="//ajax.aspnetcdn.com/ajax/jQuery/jquery-1.9.1.js"></script>

<script>
function showUser(str)
{
    if (str=="")
    {
        document.getElementById("txtHint").innerHTML="";
        return;
    }
    if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    }
    else
    {// code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange=function()
    {
        if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
            document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
        }
    }
    xmlhttp.open("GET","../getuser.php?q="+str,true);
    xmlhttp.send();
}

// ajax loader image

function getuser(str){
    $.ajax({
        url: "http://site.com/getuser.php?q="+str,
        beforeSend: function (XMLHttpRequest)
        {
            $("#loading").show();
        }
    })
    .done(function ( data ) {
        $("#txtHint").html(data);
        $("#loading").hide();
    });
}
$(document).ready(function(){
    $("select[name='users']").change(function () {
        getuser($("option:selected", this).val());
    });
});
</script> 
```

如何改进此代码以仅一次调用 php 脚本？

HTML

```
<form>
    <select name="users" onchange="showUser(this.value)"> 
        <option value="">Select a user:</option>
        <option value="1">User1</option>
        <option value="2">User2</option>
    </select>
</form>
<div style="display:none" id="loading">
    <p><img src="../loader.gif" /></p>
</div>
<br>
<div id="txtHint"><b>User info will be listed here.</b></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:21:49.463

从以下位置删除 onchange 事件：

```
<select name="users" onchange="showUser(this.value)"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T13:20:59.407

你用`showUser`什么？这似乎就足够了；

```
function getuser(str) {
  $.ajax({
    url: "/getuser.php?q=" + str, // No need to include the domain here
    beforeSend: function (jqXHR) {
       $("#loading").show();
    }
  }).done(function(data) {
    $("#txtHint").html(data);
    $("#loading").hide();
  });
}

$(document).ready(function() {
  $("select[name='users']").change(function() {
    getuser($(this).val());
  });
}); 
```

# openscenegraph - OpenScenegraph：纹理映射四边形

> ID：14937143
> 
> 赞同：1
> 
> 时间：2013-02-18T13:09:47.153
> 
> 标签：openscenegraph

我正在尝试使用我从图像加载的纹理对由 createTexturedQuadGeometry 生成的四边形几何对象进行纹理映射。然后我将这个drawable添加到一个节点，将该节点添加到根并渲染层次结构。

下面的代码是我的做法。代码编译并运行，但我只得到一个空白的黑屏而不是指定的图像。有人可以指出什么是错的吗？

```
int main(int argc, char** argv) 
{
   osg::ref_ptr<osg::Group> root = new osg::Group;

    osg::ref_ptr<osg::Texture2D> testTexture = new osg::Texture2D;
    osg::ref_ptr<osg::Image> testImage = osgDB::readImageFile("testImage.png");
    assert(testImage.valid());
    int viewWidth = testImage->s();
    int viewHeight = testImage->t();
    testTexture->setImage(testImage);

    osg::ref_ptr<osg::Geometry> pictureQuad = osg::createTexturedQuadGeometry(osg::Vec3(0.0f,0.0f,0.0f),
                                                                              osg::Vec3(viewWidth,0.0f,0.0f),
                                                                              osg::Vec3(0.0f,0.0f,viewHeight),
                                                                              0.0f,
                                                                              viewWidth,
                                                                              viewHeight,
                                                                              1.0f);

    pictureQuad->getOrCreateStateSet()->setTextureAttributeAndModes(0, testTexture.get());
    pictureQuad->getOrCreateStateSet()->setMode(GL_DEPTH_TEST, osg::StateAttribute::ON);
    osg::ref_ptr<osg::Geode> textureHolder = new osg::Geode();
    textureHolder->addDrawable(pictureQuad);
    root->addChild(textureHolder);

    osgViewer::Viewer viewer;
    viewer.setSceneData(root.get());
    viewer.run();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T13:36:55.693

所以，我碰巧找出了错误。

createTexturedQuadGeometry 需要归一化的纹理坐标。

所以，

```
osg::ref_ptr<osg::Geometry> pictureQuad = osg::createTexturedQuadGeometry(osg::Vec3(0.0f,0.0f,0.0f),
                                                                              osg::Vec3(viewWidth,0.0f,0.0f),
                                                                              osg::Vec3(0.0f,0.0f,viewHeight),
                                                                              0.0f,
                                                                              0.0f,
                                                                              1.0f,
                                                                              1.0f); 
```

解决问题。

# php - PHP - 从时差中排除所有非营业时间/天

> ID：14937144
> 
> 赞同：3
> 
> 时间：2013-02-18T13:09:52.373
> 
> 标签：php, time, timestamp

我有一张表格，显示了自从提出工作以来的时间。

```
// These are unix epoch times...
$raised = 1360947684;
$now = 1361192598;
$difference = 244914; 
```

`$difference`需要排除工作时间以外的任何时间（例如，9-5 和周末）。

我怎么能解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T22:24:06.207

你必须做的事情是数字3。

1.  您取开始日期并计算这一天的休息时间（如果是工作日）
2.  你取你的结束日期并计算这一天的时间，然后
3.  您将中间的天数乘以您的营业时间（只是那些，即营业日）

这样你就完成了[。](http://pastebin.com/TEEjW5Ck)

找到一个附加的小类，它可以做这些事情。请注意，没有错误处理、时区设置、夏令时……

输入：

*   开始日期
*   结束日期

输出：

*   以秒为单位的时间差

可调常数：

*   营业时间
*   非工作日的日子

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-26T07:34:16.533

非常糟糕的主意，但我别无选择，因为我在 php 5.2

```
<?php
date_default_timezone_set('Asia/Seoul');

$start = 1611564957;
$end = 1611670000;
$res = 0;
for($i = $start; $i<$end; $i++){

    $h = date("H", $i);
    if($h >= 9 && $h < 18){
        //echo date("Y-m-d H:i:s", $i) . "<br>";
        $res = $res + 1;
    }
}
echo $res; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-18T13:23:24.653

使用[`DateTime`](http://php.net/manual/en/book.datetime.php).

为此使用 UNIX 时间有点荒谬，您必须从字面上重新制作`DateTime`.
查找[相关格式](http://www.php.net/manual/en/datetime.formats.relative.php)，您可以在其中指定当天的小时，例如

```
$date = new DateTime($raised);
$business_start = new DateTime("09:00"); // 9am today
$business_end = new DateTime("17:00"); // 5pm today 
```

剩下的就交给你了。

哦，而不是开始/结束，您可能可以使用[`DateInterval`](http://www.php.net/manual/en/class.dateinterval.php)( `P8H`" *period 8 hours"* )

直接使用时间戳的问题是您将上下文分配给秒计数器。您必须从要排除的时间开始向后工作，并事先计算出它们的时间戳。您可能想尝试重新设计您何时提出工作的存储。也许为它设置一个到期时间？

# events - 如何在学说中测试 preFlush 事件

> ID：14937149
> 
> 赞同：2
> 
> 时间：2013-02-18T13:10:03.747
> 
> 标签：events, symfony, doctrine-orm, phpunit

我有一个事件 preFlush：

```
/**
 * On flush event
 *
 * @param PreFlushEventArgs $event
 */
public function preFlush(PreFlushEventArgs $event)
{
   $em = $event->getEntityManager();
   $uow = $em->getUnitOfWork();

   foreach ($uow->getScheduledEntityInsertions() as $entity) {
       if ($entity instanceof Answer) {
           // Set last answered
           $question = $entity->getQuestion();
           $question->setChanged(new \DateTime('now'));
           $uow->persist($question);
       }
   }
} 
```

我想检查设置问题。尝试创建模拟 UnitOfWork，方法 - 坚持，但这不起作用，因为答案对象未设置为“UOW：entityInsertions”。

# r - 在多个文件上循环一个函数

> ID：14937151
> 
> 赞同：1
> 
> 时间：2013-02-18T13:10:14.510
> 
> 标签：r

我写了一个简单的函数：

```
myfunction <- function(fileName, stringsAsFactors=TRUE,                 
                   check.names=FALSE,               
                   skip =1,...) {
Data <- read.delim(fileName, skip = skip,                     
                 stringsAsFactors=stringsAsFactors,                      
                 check.names = check.names, ...)                   
cb    <- list()                       
Index <- as.numeric(as.factor(Data[,1]))              
cb    <-  cbind(Data, Index)              
return(cb)
} 
```

此函数获取名为 Data 的文件的第一列，根据该第一列创建一个索引，然后将文件 Data 和创建的索引 cbind。

此函数将应用于名为：的文件`myfile_00.txt`中，`myfile_01.txt`依此类推。对于一个文件，它看起来像：

```
myfunction (fileName = "myfile_00.txt")
myfunction (fileName = "myfile_01.txt")
....... 
```

我有大约 1000 个文件，所以我想，循环可以来自另一篇文章：

```
mytxt  <- dir(pattern=".txt")      
n      <- length(mytxt)      
mylist <- vector("list", n)   
for(i in 1:n) {
    mylist[[i]] <- read.delim(mytxt[i], header = F, skip = 1)
} 
```

然后：

```
d <- lapply(mylist, myfunction) 
```

不幸的是它不起作用......使用`lapply`时发生错误：

```
Error in read.table(file = file, header = header, sep = sep, quote = quote,  : 
'file' must be a character string or connection 
```

因为我是 R 的新手，所以我可能会犯错误，我无法弄清楚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T13:15:40.550

就像@Arun 指出的那样，您尝试运行您的函数两次：一次在文件上，一次在您创建的数据框上......相反，您的代码应该如下所示：

```
files <- list.files(pattern = ".txt")
mylist <- lapply(files, myfunction) 
```

# excel - 是否可以自动填充输入框？

> ID：14937154
> 
> 赞同：0
> 
> 时间：2013-02-18T13:10:33.183
> 
> 标签：excel, global-variables, inputbox, vba

请允许我先解释一下场景...

我们有一个报告电子表格，能够更新几种不同措施的月度数据。

随着时间的推移，添加了越来越多的宏，现在总计超过 20 个。

为了使工作更轻松，我添加了另一个宏，它会打开一个用户表单，

一个一个地调用其他每个宏，并显示一个进度条来指示已经完成了多少任务（宏）。

前 8 个宏在输入框的提示下调用，其中包含正在更新哪个月份的输入框 - 这将始终是所有 8 个中的同一个月份。

所以，我想要做的是添加一个全局输入框作为用户窗体做的第一件事，然后在其他宏中引用这个输入（删除了他们的个人提示）。

老实说，我完全不知道如何做到这一点，但尝试了以下（一起）。

***在工作簿中***

```
Public Monthglobal As Variant 
```

***在用户表单代码的开头***

```
Function GetMonth()
Monthglobal = InputBox("Please enter the 3 letter abbreviation for the Month which your are updating (e.g. Jan, Feb...)", "Month")
If strName = vbNullString Then Exit Function
End Function 
```

***在用户窗体 Sub 的开头，它一一调用宏***

```
GetMonth 
```

***在 8 个宏中的每一个中（包含在模块 1 中）***

```
'Searches for correct column for month and pastes data

Selection.Find(What:=Monthglobal, After:=ActiveCell, LookIn:=xlFormulas, _
LookAt:=xlPart, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
MatchCase:=False, SearchFormat:=False).Activate
ActiveCell.Offset(1, 0).Activate
ActiveCell.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
        :=False, Transpose:=False

'Searches for correct column for month and pastes data 
```

***结果***

*运行时错误“91”：对象变量或未设置块变量*

返回错误并突出显示搜索（用于变量）部分：

```
Selection.Find(What:=Monthglobal, After:=ActiveCell, LookIn:=xlFormulas, _
LookAt:=xlPart, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
MatchCase:=False, SearchFormat:=False).Activate 
```

我希望这足以理解它，如果有人需要查看更多单个宏的代码，请大声疾呼，但我认为错误消息清楚地表明问题出在哪里......对我缺乏的人来说不是什么经验！

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:52:24.557

我会做这样的事情：

```
Public Monthglobal As String

Function GetMonth()
    Monthglobal = InputBox("Please enter the 3 letter abbreviation for the Month which your are updating (e.g. Jan, Feb...)", "Month")
End Function 
```

搜索位 - 最好以编程方式定义要搜索的范围，而不是使用“选择”。3 个字母的月份会是整个单元格内容，还是只是其中的一部分？

```
Dim rngFind as Range, rngFound as Range

Set rngFind = Range("A:A") ' Set this to whatever 'Selection' is currently

'Now set the rngFound variable to be the eventual 'ActiveCell' from your macro above (found cell, offset(1,0))
Set rngFound = rngFind.Find(What:=Monthglobal, After:=ActiveCell, LookIn:=xlValues, LookAt:=xlPart, SearchOrder:=xlByRows, SearchDirection:=xlNext,MatchCase:=False).Offset(1, 0)

'Now paste without activating anything:
rngFind.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks:=False, Transpose:=False 
```

# android - 位图内存泄漏 - Android

> ID：14937158
> 
> 赞同：4
> 
> 时间：2013-02-18T13:10:45.810
> 
> 标签：android, memory-management, memory-leaks, bitmap, out-of-memory

我的应用程序中存在内存泄漏，它多次触发 GC 并导致性能问题。我生成了一个`leak suspect report`using `MAT`. 这是报告：

**问题嫌疑人1：** *“”加载的“android.graphics.Bitmap”的一个实例占用了4,194,368（20.13%）字节。内存在“”加载的“byte[]”的一个实例中累积。*

**问题嫌疑人2：** *“”加载的类“android.content.res.Resources”占用3962504（19.02%）字节。内存在“”加载的“java.lang.Object[]”的一个实例中累积。*

**问题嫌疑人3：** *“”加载的“android.graphics.Bitmap”的一个实例占用了3,145,792（15.10%）字节。内存在“”加载的“byte[]”的一个实例中累积。*

从报告来看，很明显内存泄漏是因为位图。我已经研究了很多，但无法纠正这个泄漏。请帮帮我。我正在使用 `ImageLoader`类来下载和显示位图。要使用这个类，我只需调用该`displayImage()`方法。这是代码：

```
public class ImageLoader {

    private static ImageLoader imageLoader;
    private int maxNoOfConnections = 4;
    FileCache fileCache;
    ExecutorService executorService;
    HttpURLConnection conn;
    InputStream is;
    OutputStream os;
    PhotosLoader photosLoader;
    Handler handler;
    Bitmap bitmap;

    private ImageLoader(Context context) {
        fileCache = new FileCache(context);
        executorService = Executors.newFixedThreadPool(maxNoOfConnections);
        handler = new Handler();
    }

    public static ImageLoader getInstance(Context context) {
        if (imageLoader == null)
            imageLoader = new ImageLoader(context);
        return imageLoader;
    }

    public void displayImage(String url, ProgressBar pBar, ImageView imageView) {
        photosLoader = new PhotosLoader(url, imageView, pBar);
        executorService.submit(photosLoader);
    }

    private Bitmap getBitmap(String url) {
        File f = fileCache.getFile(url);

        bitmap = decodeFile(f);
        if (bitmap != null)
            return bitmap;

        try
        {
            URL imageUrl = new URL(url);
            conn = (HttpURLConnection) imageUrl.openConnection();
            conn.setConnectTimeout(30000);
            conn.setReadTimeout(30000);
            conn.setInstanceFollowRedirects(true);
            is = conn.getInputStream();
            os = new FileOutputStream(f);
            Utils.CopyStream(is, os);
            os.close();
            bitmap = decodeFile(f);
            return bitmap;
        } catch (Exception ex)
        {
            Log.e("inNews", "Image Url Malformed");
            return null;
        }
    }

    private Bitmap decodeFile(File f) {
        try
        {
            BitmapFactory.Options o = new BitmapFactory.Options();
            o.inJustDecodeBounds = true;
            BitmapFactory.decodeStream(new FileInputStream(f), null, o);

            final int REQUIRED_SIZE = 70;
            int width_tmp = o.outWidth, height_tmp = o.outHeight;
            int scale = 1;
            while (true)
            {
                if (width_tmp / 2 < REQUIRED_SIZE || height_tmp / 2 < REQUIRED_SIZE)
                    break;
                width_tmp /= 2;
                height_tmp /= 2;
                scale *= 2;
            }

            BitmapFactory.Options o2 = new BitmapFactory.Options();
            o2.inSampleSize = scale;
            return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
        } catch (FileNotFoundException e)
        {
        }
        return null;
    }

    class PhotosLoader implements Runnable {
        String url;
        ImageView imageView;
        ProgressBar pBar;
        Bitmap bmp;

        public PhotosLoader(String url, ImageView imageView, ProgressBar pBar) {
            this.url = url;
            this.imageView = imageView;
            this.pBar = pBar;
        }

        @Override
        public void run() {
            bmp = getBitmap(url);
            handler.post(new Runnable() {
                @Override
                public void run() {
                    if (bmp != null)
                    {
                        pBar.setVisibility(View.GONE);
                        imageView.setImageBitmap(bmp);
                    } else
                    {
                        pBar.setVisibility(View.GONE);
                        imageView.setImageResource(R.drawable.img_no_image_grid);
                    }
                }
            });
        }
    }

} 
```

请帮我纠正我的代码。谢谢！

**注意：**从那以后我就没有使用`bitmap.recycle()`过，文档说后Honeycomb GC收集位图并且不再需要强制回收它！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T15:27:21.313

我认为问题出在 Singleton 实例...我创建了 LazyList 项目的一个分支，请检查：

[https://github.com/nicolasjafelle/LazyList](https://github.com/nicolasjafelle/LazyList)

我有同样的内存泄漏，但也许我错了，除非你用 System.exit() 终止进程，否则这个单例永远不会被垃圾收集。

这就是为什么最初的 LazyList 项目不使用 Singleton 的原因。我还认为，如果您需要缓存，则所有应用程序都需要快速且相同。

此 ImageLoader 中重要的是 FileCache 和 MemoryCache，当您调用 clearCache 时，收集的位图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T13:57:05.380

内存泄漏问题始终是 Java 的问题。我了解您的代码，代码简单的图像缓存工具。检查 SampleSize 值和执行器服务仅在一个线程上运行。四线程有很大的内存和这个后台线程动作。您的“处理程序”交换为“runOnUIThread”

你应该使用；

活动**活动**= (活动)imageView.getContext();

```
__activity__.runOnUIThread(new Runnable()
{
 if (bmp != null)
                    {
                        pBar.setVisibility(View.GONE);
                        imageView.setImageBitmap(bmp);
                    } else
                    {
                        pBar.setVisibility(View.GONE);
                        imageView.setImageResource(R.drawable.img_no_image_grid);
                    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-10T15:56:55.293

我认为答案很简单，当您不需要内存/出现 OOM 异常时，请继续清除缓存。我为你做的

```
MemoryCache memoryCache = new MemoryCache();

try {
        Bitmap bitmap = null;
        URL imageUrl = new URL(url);
        HttpURLConnection conn = (HttpURLConnection) imageUrl
                .openConnection();
        conn.setConnectTimeout(30000);
        conn.setReadTimeout(30000);
        conn.setInstanceFollowRedirects(true);
        InputStream is = conn.getInputStream();
        OutputStream os = new FileOutputStream(f);
        Utils.CopyStream(is, os);
        os.close();
        conn.disconnect();
        bitmap = decodeFile(f);
        return bitmap;
    } catch (Throwable ex) {
        ex.printStackTrace();
        if (ex instanceof OutOfMemoryError)
            memoryCache.clear();
        return null;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-07T09:33:02.693

当您必须在活动中初始化库时，请始终传递应用程序上下文，而不是活动上下文。

# javascript - 从 asp.net 中的可编辑 div 中获取内部 html

> ID：14937164
> 
> 赞同：2
> 
> 时间：2013-02-18T13:11:03.747
> 
> 标签：javascript, asp.net, html

我对 Web 开发相对较新，对 ASP.NET Web 窗体完全陌生。我有以下用户控制：

CSS：

```
div.textareaDiv {
    -moz-appearance: textfield-multiline;
    -webkit-appearance: textarea;
    border: 1px solid gray;
    font: medium -moz-fixed;
    font: -webkit-small-control;
    height: 200px;
    padding: 2px;
    resize:both;
    width: 400px;
    word-wrap: break-word;
    word-break:normal;
} 
```

脚本 ：

```
function CatchEnterKey(e) {
        if (e.keyCode == 13) {
         e.stopPropagation();
         return false;
     }
     return true;
 } 
```

标记：

```
<div id='HtmlTextField' style="height:200px!important;"   class="textareaDiv"     onkeypress="CatchEnterKey(event);"  contenteditable="true" unselectable="off" runat="server"></div>; 
```

当按下父页面上的“提交”按钮时，会调用以下代码隐藏函数：

```
public string GetHtml()
        {
            Page.ClientScript.RegisterClientScriptBlock(this.GetType(), "gethtml", "alert($('.textareaDiv').html());", true);
                return null;
        } 
```

这个想法是通过脚本执行返回 div 的内部 html，但目前我只想弄清楚，为什么我会收到空​​警报。是不是div的内部html在回发时真的被清空了，我需要想一个不同的解决方案，还是我做错了什么？

提前致谢

罗马

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:24:41.283

请参阅 SO 上的这篇[文章](https://stackoverflow.com/a/666560/231716)。切换您的示例以改用 RegisterStartupScript。问题是 RegisterClientScriptBlock 在元素呈现到屏幕之前注册，因此当您运行该代码时甚至不会呈现元素。RegisterStartupScript 在所有元素之后呈现。

此外，JQuery 还支持延迟运行脚本，直到加载完所有内容。如果您使用以下代码包装代码：

```
$(document).ready(function() { /* alert code here */ }); 
```

或速记：

```
$(function() { /* alert code here */ }); 
```

这会延迟执行，直到文档准备好。那是另一种选择。

# r - 在 `data.table` 中使用动态列名

> ID：14937165
> 
> 赞同：32
> 
> 时间：2013-02-18T13:11:15.107
> 
> 标签：r, data.table

我想计算 data.table 中几列中每一列的平均值，按另一列分组。我的问题类似于关于 SO 的其他两个问题（[一](https://stackoverflow.com/questions/12391950/variably-selecting-assigning-to-fields-in-a-data-table)和[二](https://stackoverflow.com/questions/12603890/pass-column-name-in-data-table-using-variable-in-r)），但我无法将这些问题应用于我的问题。

这是一个例子：

```
library(data.table)
dtb <- fread(input = "condition,var1,var2,var3
      one,100,1000,10000
      one,101,1001,10001
      one,102,1002,10002
      two,103,1003,10003
      two,104,1004,10004
      two,105,1005,10005
      three,106,1006,10006
      three,107,1007,10007
      three,108,1008,10008
      four,109,1009,10009
      four,110,1010,10010")

dtb
#    condition var1 var2  var3
# 1:       one  100 1000 10000
# 2:       one  101 1001 10001
# 3:       one  102 1002 10002
# 4:       two  103 1003 10003
# 5:       two  104 1004 10004
# 6:       two  105 1005 10005
# 7:     three  106 1006 10006
# 8:     three  107 1007 10007
# 9:     three  108 1008 10008
# 10:     four  109 1009 10009
# 11:     four  110 1010 10010 
```

每个单一平均值的计算很容易；例如对于“var1” `dtb[ , mean(var1), by = condition]`：。但是如果有很多变量并且您需要编写所有变量，这很快就会变得很麻烦。因此，`dtb[, list(mean(var1), mean(var2), mean(var3)), by = condition]`是不可取的。我需要列名是动态的，我希望得到这样的结果：

```
 condition  var1   var2    var3
1:       one 101.0 1001.0 10001.0
2:       two 104.0 1004.0 10004.0
3:     three 107.0 1007.0 10007.0
4:      four 109.5 1009.5 10009.5 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-02-18T13:20:36.353

you should use `.SDcols` (especially if you've too many columns and you require a particular operation to be performed only on a subset of the columns (apart from the grouping variable columns).

```
dtb[, lapply(.SD, mean), by=condition, .SDcols=2:4]

#    condition  var1   var2    var3
# 1:       one 101.0 1001.0 10001.0
# 2:       two 104.0 1004.0 10004.0
# 3:     three 107.0 1007.0 10007.0
# 4:      four 109.5 1009.5 10009.5 
```

You could also get all the column names you'd want to take mean of first in a variable and then pass it to `.SDcols` like this:

```
keys <- setdiff(names(dtb), "condition")
# keys = var1, var2, var3
dtb[, lapply(.SD, mean), by=condition, .SDcols=keys] 
```

**Edit:** As Matthew Dowle rightly pointed out, since you require mean to be computed on every other column after grouping by `condition`, you could just do:

```
dtb[, lapply(.SD, mean), by=condition] 
```

**David's edit:** (which got rejected): Read more about `.SD` from [**this post**](https://stackoverflow.com/questions/8508482/what-does-sd-stand-for-in-data-table-in-r). I find this is relevant here. Thanks @David.

**Edit 2:** Suppose you have a `data.table` with 1000 rows and 301 columns (one column for grouping and 300 numeric columns):

```
require(data.table)
set.seed(45)
dt <- data.table(grp = sample(letters[1:15], 1000, replace=T))
m  <- matrix(rnorm(300*1000), ncol=300)
dt <- cbind(dt, m)
setkey(dt, "grp") 
```

and you wanted to find the mean of the columns, say, 251:300 alone,

*   you can compute the mean of all the columns and then subset these columns (which is not very efficient as you'll compute on the whole data).

    ```
    dt.out <- dt[, lapply(.SD, mean), by=grp]
    dim(dt.out) # 15 * 301, not efficient. 
    ```

*   you can filter the `data.table` first to just these columns and then compute the mean (which is again not necessarily the best solution as you have to create an extra subset'd data.table every time you want operations on certain columns.

    ```
    dt.sub <- dt[, c(1, 251:300)]
    setkey(dt.sub, "grp")
    dt.out <- dt.sub[, lapply(.SD, mean), by=grp] 
    ```

*   you can specify each of the columns one by one as you'd normally do (but this is desirable for smaller data.tables)

    ```
    # if you just need one or few columns
    dt.out <- dt[, list(m.v251 = mean(V251)), by = grp] 
    ```

So what's the best solution? The answer is **.SDcols**.

> As the documentation states, for a *data.table x*, **.SDcols** specifies the columns that are included in **.SD**.

This basically implicitly filters the columns that will be passed to .SD instead of creating a subset (as we did before), only it is VERY efficient and FAST!

How can we do this?

*   By specifiying either the column numbers:

    ```
    dt.out <- dt[, lapply(.SD, mean), by=grp, .SDcols = 251:300]
    dim(dt.out) # 15 * 51 (what we expect) 
    ```

*   Or alternatively by specifying the column id:

    ```
    ids <- paste0("V", 251:300) # get column ids
    dt.out <- dt[, lapply(.SD, mean), by=grp, .SDcols = ids]
    dim(dt.out) # 15 * 51 (what we expect) 
    ```

It accepts both column names and numbers as arguments. In both these cases, .SD will be provided only with these columns we've specified.

Hope this helps.

# javascript - javascript警报中的html实体？

> ID：14937169
> 
> 赞同：8
> 
> 时间：2013-02-18T13:11:24.957
> 
> 标签：javascript, html, encoding, entities

我有一个来自 XML 的字符串（我无法编辑），我想通过 javascript 中的警报打印它。

我的字符串示例：

```
This is &agrave; string 
```

我需要打印警报：

```
This is à string 
```

有js html解码吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-18T13:17:58.210

即使没有 jquery，您也可以将字符串放在 dom 元素中并再次读出： [https ://stackoverflow.com/a/3700369/1986499](https://stackoverflow.com/a/3700369/1986499)

根据最近的需求进行编辑，以包含来自另一个 SO 答案的一些代码：

```
var div = document.createElement('div');
div.innerHTML = encoded;
var decoded = div.firstChild.nodeValue; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-18T13:16:44.823

```
var encoded = "This is &agrave; string";
var decoded = $("<div/>").html(encoded).text();
alert(decoded); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-01T17:48:48.900

我只是*有点*晚了，但以防万一其他人通过谷歌找到这个（就像我一样），我想我会改进[Imperative](https://stackoverflow.com/users/1986499/imperative)的[答案](https://stackoverflow.com/a/14937257/2283305)。

```
function showbullet() {
  var tempelement = document.createElement('div');
  tempelement.innerHTML = "&bull;";
  alert("Here, have a bullet!\n" + tempelement.innerHTML);
}
showbullet(); 
```

我已经对此进行了测试并确认它可以在 Chrome/43.0.2357.130 m 中运行；火狐/32.0.1；Internet Explorer/9.0.8112.16421。没有必要胡乱处理 nodeValue 之类的东西；分配完成后，该实体将被其关联的字符替换。（但是请注意，在我测试过的任何浏览器中，这样做**都**`alert(tempelement.innerHTML="&bull;");`不起作用！）

# windows - Node.js：Windows 上的 Foreman + Nodemon 行为

> ID：14937170
> 
> 赞同：6
> 
> 时间：2013-02-18T13:11:25.720
> 
> 标签：windows, node.js, foreman

经过数小时的调试，我终于找出了我的 Web 应用程序在 Windows 上崩溃的原因。NPM 依赖项有时会使用 记录消息，当运行*Foreman* + *Nodemon*组合`console.error`时，这似乎在 OSX 和 Windows 上具有不同的行为。

 **也许对这些工具有更多了解的人可以帮助阐明这一点？这是一个简单的应用程序来说明它：

**应用程序.js**

```
console.log('1');
console.error('2');
console.log('3'); 
```

在 OSX 和 Windows 7 上运行`nodemon --exec node app.js`都很好，并给出了预期的输出：

```
18 Feb 23:56:25 - [nodemon] v0.6.23
18 Feb 23:56:26 - [nodemon] watching: C:\project
18 Feb 23:56:26 - [nodemon] starting `node app.js`
1
2
3
18 Feb 23:56:26 - [nodemon] clean exit - waiting for changes before restart 
```

现在，使用 Foreman 和 Procfile 包装调用，它看起来像这样：

```
# Procfile
app: nodemon --exec node app.js 
```

在 OSX 上：

```
> foreman start

23:59:12 app.1  | started with pid 69229
23:59:12 app.1  | 18 Feb 23:59:12 - [nodemon] v0.7.2
23:59:12 app.1  | 18 Feb 23:59:12 - [nodemon] watching: /project
23:59:12 app.1  | 18 Feb 23:59:12 - [nodemon] starting `node app.js`
23:59:12 app.1  | 1
23:59:12 app.1  | 2
23:59:12 app.1  | 3
23:59:12 app.1  | 18 Feb 23:59:12 - [nodemon] clean exit - waiting for changes before restart 
```

在 Windows 上：

```
> foreman start

23:59:40 app.1  | started with pid 2624
23:59:40 app.1  | 18 Feb 23:59:40 - [nodemon] v0.7.2
23:59:40 app.1  | 18 Feb 23:59:40 - [nodemon] watching: C:\project
23:59:40 app.1  | 18 Feb 23:59:40 - [nodemon] starting `node app.js`
23:59:40 app.1  | 1
23:59:40 app.1  | 18 Feb 23:59:40 - [nodemon] exception in nodemon killing node
23:59:40 app.1  | exited with code 3
23:59:40 system | sending SIGKILL to all processes 
```

该应用程序只是崩溃，没有恢复，然后 Foreman 杀死了 Procfile 中声明的任何其他进程。

任何想法将不胜感激！

*`nodemon`注意：我在 Windows (6.2.3) 上尝试了不同版本，结果相同***

# javascript - jQuery设置没有元素的onclick事件

> ID：14937177
> 
> 赞同：0
> 
> 时间：2013-02-18T13:11:42.597
> 
> 标签：javascript, jquery, html, css

我正在写一张卡片清单。
在我抽卡之前，卡牌列表是这样的：

```
<div id="cards-div">
    <ul id="cards-list">
    </ul>
</div> 
```

我抽一张卡后，卡牌列表是这样的：

```
<div id="cards-div">
    <ul id="cards-list">
        <li>hello</li>
    </ul>
</div> 
```

如何添加**同时接收索引**的 onclick 函数：

```
<div id="cards-div">
    <ul id="cards-list">
        <li onclick="mouseoverCard(index)">hello</li>
    </ul>
</div>

mouseoverCard: function(index) {
    alert(index);
} 
```

请注意，我尝试使用 jquery.click() 声明 mouseover 函数，但它仅在 DOM 存在时才有效。即使 DOM 不存在，我也想声明函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T13:13:16.733

据我了解，父`<ul>`元素是静态的。所以你可以使用[事件委托](http://api.jquery.com/on/#direct-and-delegated-events)：

```
$("#cards-list").on("click", "li", function(e) {
    var i = $(this).index();
    // ...
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T13:16:35.217

委托事件方法仅将事件处理程序附加到一个元素，`#cards-list`，并且事件只需要冒泡一个级别（从 clicked`li`到`ul`）：

```
$("#cards-list").on("click", "li", function(event){
     alert($(this).index());
}); 
```

参考：[**.on()**](http://api.jquery.com/on/)

# java - 使用 BigInteger 参数调用方法时出现问题

> ID：14937180
> 
> 赞同：1
> 
> 时间：2013-02-18T13:11:44.847
> 
> 标签：java, biginteger

我遇到了麻烦，对此我无能为力。我想知道我怎么称呼这个方法？

```
public static BigInteger factorial(BigInteger n) {
    BigInteger result = BigInteger.ONE;

    while (!n.equals(BigInteger.ZERO)) {
        result = result.multiply(n);
        n = n.subtract(BigInteger.ONE);
    }

    return result;
} 
```

对于 var=1，我明白了，我写了以下内容：

```
BigInteger kk = BigInteger.ONE;
System.out.println(factorial(kk)); 
```

但是，例如，我对如何数 61 感到困惑！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T13:13:54.593

尝试：

```
 BigInteger kk = new BigInteger("61");
 System.out.println(factorial(kk)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T13:19:16.697

Java还有一个[静态工厂方法](http://docs.oracle.com/javase/7/docs/api/java/math/BigInteger.html#valueOf%28long%29)：

```
BigInteger kk = BigInteger.valueOf(61L); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-18T13:13:38.213

```
BigInteger kk = new BigInteger("61");
System.out.println(factorial(kk)); 
```

API 是您的朋友：[http ://docs.oracle.com/javase/1.4.2/docs/api/java/math/BigInteger.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/math/BigInteger.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T13:21:48.087

改变

```
BigInteger kk = BigInteger.ONE
System.out.println(factorial(kk)); 
```

至

```
BigInteger kk=new BigInteger("61");
System.out.println(factorial(kk)); 
```

# mysql - 将特定数据从一个 MySQL 表复制到另一个

> ID：14937181
> 
> 赞同：0
> 
> 时间：2013-02-18T13:11:48.160
> 
> 标签：mysql, sql

我有一张桌子，我们称它为旧的，另一张称为新的。

我需要从旧的（ip 列）中选择 IP 并将其插入新的，每行上的电子邮件匹配。

即：两个表中都有一封名为 email@email.com 的电子邮件。new 中的 ip 为空。我需要从旧获取 ip 并将其插入新的电子邮件相同的位置（电子邮件是唯一的）。这应该发生在每一行。

这很近吗？

```
INSERT INTO new (ip)  
SELECT old.ip FROM old  
WHERE new.email = old.email 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T13:14:55.433

是的，它是如此接近。最好使用显式`JOIN`语法：

```
INSERT INTO new (ip)
SELECT old.ip 
FROM old
INNER JOIN new on old.email = new.email; 
```

# android - 当我在 cocos2d android 中触摸它时如何删除精灵？

> ID：14937185
> 
> 赞同：0
> 
> 时间：2013-02-18T13:11:57.997
> 
> 标签：android, cocos2d-android

我试过这个解决方案....

```
public void update(float dt)
{ 
    CGRect targetRect = CGRect.make(target.getPosition().x -(target.getContentSize().width),target.getPosition().y - (target.getContentSize().height),target.getContentSize().width,target.getContentSize().height);
    if (CGRect.containsPoint(targetRect, location))
    {
       spriteMoveFinished(target);
    }
} 
```

但我无法得到结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T07:30:48.577

我已检查您的代码您尚未安排方法更新。我已将更新方法编码移动到触摸方法，因此我们现在不需要更新来安排。下面是更新后的代码，它在我的最后工作正常.. 触摸工作正常

```
import java.util.ArrayList;

import org.cocos2d.actions.instant.CCCallFuncN;
import org.cocos2d.actions.interval.CCMoveTo;
import org.cocos2d.actions.interval.CCSequence;
import org.cocos2d.layers.CCColorLayer;
import org.cocos2d.layers.CCScene;
import org.cocos2d.nodes.CCDirector;
import org.cocos2d.nodes.CCSprite;
import org.cocos2d.types.CGPoint;
import org.cocos2d.types.CGRect;
import org.cocos2d.types.CGSize;
import org.cocos2d.types.ccColor4B;

import android.view.MotionEvent;

public class as extends CCColorLayer{
protected CCSprite target;
protected ArrayList<CCSprite> _targets;
CGPoint location;

public static CCScene scene(){
    CCScene scene = CCScene.node();
    CCColorLayer layer = new as(ccColor4B.ccc4(255, 255, 255, 255));
    scene.addChild(layer);
    return scene;
}
protected as(ccColor4B color){
    super(color);
    this.setIsTouchEnabled(true);
    _targets = new ArrayList<CCSprite>();
    this.schedule("gameLogic", 3.0f);
}       
@Override
public boolean ccTouchesBegan(MotionEvent event) {
     location = CCDirector.sharedDirector().convertToGL(CGPoint.ccp(event.getX(), event.getY()));

     ArrayList<CCSprite> targetsToDelete = new ArrayList<CCSprite>();
     for (CCSprite target : _targets){
         if(CGRect.containsPoint((target.getBoundingBox()), location))
                      targetsToDelete.add(target);
     }
     for (CCSprite target : targetsToDelete){
         _targets.remove(target);
         removeChild(target, true);
     }

     return true;
}

//public void update(float dt){
//
//}

public void gameLogic(float dt)
{
    addTarget();
}

protected void addTarget()
{
    CGSize winSize = CCDirector.sharedDirector().displaySize();
    target = CCSprite.sprite("bee_160.png");
    target.setPosition(CGPoint.ccp(target.getContentSize().width / 2.0f, winSize.height / 2.0f));
    addChild(target);    
    _targets.add(target);

    CCMoveTo actionMove = CCMoveTo.action(3, CGPoint.ccp(winSize.getWidth(), winSize.getHeight()/2.0f));
    CCCallFuncN actionMoveDone = CCCallFuncN.action(this, "spriteMoveFinished");
    CCSequence actions = CCSequence.actions(actionMove, actionMoveDone);

    target.runAction(actions);
}

public void spriteMoveFinished(Object sender)
{
    CCSprite sprite = (CCSprite)sender;
    this.removeChild(sprite, true);
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T12:36:00.817

```
public class as extends CCColorLayer{
protected CCSprite target;
protected ArrayList<CCSprite> _targets;
CGPoint location;

public static CCScene scene(){
    CCScene scene = CCScene.node();
    CCColorLayer layer = new as(ccColor4B.ccc4(255, 255, 255, 255));
    scene.addChild(layer);
    return scene;
}
protected as(ccColor4B color){
    super(color);
    this.setIsTouchEnabled(true);
    _targets = new ArrayList<CCSprite>();
    this.schedule("gameLogic", 3.0f);
            this.schedule("update");
}       
@Override
public boolean ccTouchesBegan(MotionEvent event) {
     location = CCDirector.sharedDirector().convertToGL(CGPoint.ccp(event.getX(), event.getY()));
     return true;
}

public void update(float dt){
    ArrayList<CCSprite> targetsToDelete = new ArrayList<CCSprite>();
    for (CCSprite target : _targets){
        if(CGRect.containsPoint((target.getBoundingBox()), location))
                     targetsToDelete.add(target);
    }
    for (CCSprite target : targetsToDelete){
        _targets.remove(target);
        removeChild(target, true);
    }
}

public void gameLogic(float dt)
{
    addTarget();
}

protected void addTarget()
{
    CGSize winSize = CCDirector.sharedDirector().displaySize();
    target = CCSprite.sprite("RedX.gif");
    target.setPosition(CGPoint.ccp(target.getContentSize().width / 2.0f, winSize.height / 2.0f));
    addChild(target);    
    _targets.add(target);

    CCMoveTo actionMove = CCMoveTo.action(3, CGPoint.ccp(winSize.getWidth(), winSize.getHeight()/2.0f));
    CCCallFuncN actionMoveDone = CCCallFuncN.action(this, "spriteMoveFinished");
    CCSequence actions = CCSequence.actions(actionMove, actionMoveDone);

    target.runAction(actions);
}

public void spriteMoveFinished(Object sender)
{
    CCSprite sprite = (CCSprite)sender;
    this.removeChild(sprite, true);
} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-14T06:53:23.617

单击时使用它来删除图像：

```
//rect1 and rect2 are two rectangles of two different images
CCRect.intersect(rect1,rect2))

//Remove the image when it intersects 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T11:15:12.263

您可以通过调用默认的 cocos 方法来检查精灵的触摸

首先启用触摸（[Cocos2D Touch HELP](https://stackoverflow.com/questions/6473780/cocos2d-touch-help/13816080#13816080)）

```
isTouchEnabled_=true; 
```

之后在 ccToucesBegan 方法中，您可以检查触摸哪个精灵

（getBoundingBox() 返回 CGRect）

```
 @Override
      public boolean ccTouchesBegan(MotionEvent event) {

 CGPoint convertedLocation = CCDirector.sharedDirector()
                    .convertToGL(CGPoint.make(event.getX(), event.getY()));

if(sprite.getBoundingBox().contains(convertedLocation.x,convertedLocation.y))
{
removeChild(sprite, true);
}
} 
```

在您的程序中，您没有指定精灵图像，这里是触摸正常工作的示例图层类

```
public class TestLayer extends CCColorLayer{ 

    protected CCSprite target; protected CGPoint location;

    public static CCScene scene(){
        CCScene scene = CCScene.node();
        CCColorLayer layer = new TestLayer(ccColor4B.ccc4(0, 0, 255, 255));

        scene.addChild(layer);

        return scene;
    }

    protected TestLayer(ccColor4B color){
        super(color);
        this.setIsTouchEnabled(true);

        target=CCSprite.sprite("bee_120.png");

        addChild(target);
        target.setPosition(100, 100);

//      this.schedule("game", 3.0f);

    }       
    @Override
    public boolean ccTouchesBegan(MotionEvent event) {
    location = CCDirector.sharedDirector().convertToGL(CGPoint.ccp(event.getX(), event.getY()));
        if(CGRect.containsPoint(target.getBoundingBox(), location));
            {
                removeChild(target, true);
            }
        return true;
    }
//  public void game(float dt){
//      addTarget();
//  }
//  protected void addTarget(){
//      //some code of add the "target"
//  }
} 
```

在上面的代码中，只使用了一个精灵。要使用多个精灵，您必须像您所做的那样安排方法，但您必须检查您生成的所有精灵的触摸。您可以为此目的使用 ArrayList。

# html - CSS：提交按钮的背景图片

> ID：14937187
> 
> 赞同：4
> 
> 时间：2013-02-18T13:12:04.997
> 
> 标签：html, css, cross-browser

我已经使用自定义背景图像设置了提交按钮的样式。但它在不同的浏览器上显示不同。

几乎所有浏览器都显示正确：

![在此处输入图像描述](../Images/d673e4817ef5b2403aa3f0f9a9e36c9c.png)

但是在 2 上它有额外的高度：

![在此处输入图像描述](../Images/732bd350e621add6e0a643208788eb95.png)

谁能指出我的标记有什么问题？

CSS：

```
input[type="submit"]{
    background: url(http://dl.dropbox.com/u/17055243/icons.png) -99px 0px  no-repeat;
    width:30px;
    height:30px;
    border:none;
    float:left;
    margin:30px 0 0;
    cursor:pointer;
} 
```

HTML：

```
<form>
    <input type="text" class="placeholder" value="Search" />
    <input type="submit" value="" />
</form> 
```

**测试：**

*   IE 8.0**不错**
*   IE 7.0**不错**
*   iPhone**不错**
*   Chrome 24.0**不错**
*   火狐 18.0.2**不错**
*   Safari 5.1 (Mac OS X 10.7.1)**好**
*   Opera 12.14 (Windows 7 32-bit)**好**
*   Safari 5.1.7（Windows 7 32 位）**额外高度**
*   Opera 11.51 (Mac OS X 10.7.1)**额外高度**

[jsfiddle 上的现场演示](http://jsfiddle.net/taran2l/Qucjj/)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T13:22:33.070

在我看来，文本框的高度与提交按钮不同。尝试设置文本框的高度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T14:44:02.843

我在第二个搜索栏中看到，文本是斜体的，看起来略小。我认为搜索栏正在适应文本并使其自身变小，这使得搜索图标显得更大。

您可能需要做的是将其添加到控制占位符的样式表中：

```
{font-style:normal} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-21T01:52:21.363

提交按钮和输入文本字段的边框、边距、填充等具有不同的默认值。首先，您必须将其用于提交按钮和文本字段

```
margin:0;
padding: 0;
border: none;
outline: none; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T13:23:19.060

尝试这个。它会给元素一个固定的高度。

```
input[type="text"]{
    margin:30px 0 0;
    width:226px;
    color:#999999;
    font-size:12px;
    font-style:italic;
    border:1px solid #cccccc;
    border-right:none;
    background-color:#ededed;
    float:left;
    height:28px;
    padding-right: 7px;
    padding-left: 7px;
    line-height: 28px;
} 
```

# javascript - 向函数发送多个逗号分隔值

> ID：14937192
> 
> 赞同：-1
> 
> 时间：2013-02-18T13:12:11.740
> 
> 标签：javascript

我想通过 javascript 向函数发送多个逗号分隔值。该函数仅获取第一个值。请帮我解决这个问题。

```
onclick='add_values(" + items + ");return false;' 
```

项目表示“98,97,96,95..”

```
function add_values(items) {
     try {
       alert(plans); // 98 only
       ...
} 
```

但是该函数只获得第一个值。98.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:20:31.253

该[`String.split()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split)方法可用于从逗号分隔的字符串中获取数组：

```
function add_values(items)
{
    var list = items.split(",");

    console.log( list[0] ); // 98
    console.log( list[1] ); // 97
    console.log( list[2] ); // 96
    console.log( list[3] ); // 95
} 
```

来自[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split)：

> 通过将字符串拆分为子字符串，将 String 对象拆分为字符串数组。

以这种方式将字符串值传递给函数时，您还需要使用引号：

```
onclick='add_values(\'" + items + "\');return false;' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T13:22:54.683

您不应通过 javascript 设置内联事件处理程序属性字符串。该技术已经过时了十多年，现在有[更好的事件注册模型](http://quirksmode.org/js/events_tradmod.html)。

如果你真的必须这样做，它应该是这样的：

```
htmlstr = "<div onclick='add_values(" + JSON.stringify(items) + ");return false;'>…&lt;/div>"; 
```

# android - Android GPS 值进入 Editbox

> ID：14937193
> 
> 赞同：1
> 
> 时间：2013-02-18T13:12:16.853
> 
> 标签：android, gps, splash-screen

**问题：** 我有一个启动画面，它设置为 5 秒。启动“主菜单”

启动画面开始，找到 gps 值，但它显示在 Toast 消息上，但我想将它存储在 Editbox 中。

启动画面有 xml --> **starter.xml**

Gps 值的（ lat 和 lng ）编辑框有 xml --> **gps_values**

**代码：** 这是一个名为 starter 的类：

```
public void onCreate(Bundle paramBundle)
    {
        super.onCreate(paramBundle);
        setContentView(R.layout.starter);

        LocationResult locationResult = new LocationResult(){
            @Override
            public void gotLocation(Location location){

                EditText lat_view = (EditText)findViewById(R.id.lat_Field);
                EditText lng_view = (EditText)findViewById(R.id.lng_Field);

                Double lat_source = location.getLatitude();
                Double lng_source = location.getLongitude();

                lat_view.setText(lat_source.toString());
                lng_view.setText(lng_source.toString());

                Log.d(TAG, "GPS values =" + lat_view + lng_view); 

                Toast.makeText(
                        getApplicationContext(),
                        "Latitude: "+location.getLatitude()+"\n Longitude: "+location.getLongitude() ,
                        Toast.LENGTH_SHORT).show();    
   }
        };
        MyLocation myLocation = new MyLocation();
        myLocation.getLocation(this, locationResult);

       final Starter sPlashScreen = this; 

        mSplashThread =  new Thread(){
@Override
public void run(){
    try {
        synchronized(this){
            wait(5000);

        }
    }
        catch(InterruptedException ex){                    
    }

    finish();

    Intent intent = new Intent();
    intent.setClass(sPlashScreen,DashboardMain.class);
    startActivity(intent);
    finish();                   
}    }; 
```

**就像我说的**

lat_view 和 lng_view 位于名为**gps_values**的 XML 文件中，还有另一个用于启动活动的 xml，名为**starter.xml**。任何人都可以看到我看不到的东西吗？

# php - Postfix 在行尾使用“=”字符发送到 Exchange Server

> ID：14937196
> 
> 赞同：0
> 
> 时间：2013-02-18T13:12:29.353
> 
> 标签：php, email, postfix-mta, exchange-server, quoted-printable

`mail()`我使用通过 postfix MTA的函数在 PHP 中创建了一个自动通知系统。但是，Outlook 的用户，实际上是 Exchange Server 收到的通知在行尾带有相同的“=”字符并且 HTML 被破坏。

Exchange Server 可以识别**html/文本**，但它在“软换行符”或解码引用打印或解析时存在问题？我该如何解决这个问题？

**这是我正在使用的编码和架构：**

```
MIME-Version: 1.0
Content-Type: multipart/alternative;
 boundary="8-10000000000-10000000000:87141"
Message-Id: <20130218130031.E9923D98115@diplo-www>
Date: Mon, 18 Feb 2013 14:00:31 +0100 (CET)

--8-10000000000-10000000000:87141
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable

--8-10000000000-10000000000:87141
Content-Type: text/html; charset=utf-8
Content-Transfer-Encoding: quoted-printable

--8-10000000000-10000000000:87141-- 
```

这是原始的身体：

```
MIME-Version: 1.0
Content-Type: multipart/alternative;
 boundary="8-10000000000-10000000000:87141"

--8-10000000000-10000000000:87141
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable

=0A=0A=0A=0A       NOTIFICATION=0A=0A  =0A    A new post was added  in:=0A=
=09IGCBP11 Europe 123=0A=0A    =0A=09=09Test 4 - exchange server header=0A=
=0A=09=09=0A=09This is test mail. It should be html/text formated via quote=
d-printable encoding.=0A=0A    =0A=09=09Author: Branislav Kurbalija=0A=0A=
=09Reply online=0A=09=0A=0A=09=0A=09=09To change your account properties or=
=0A=09=09password go to preferences=0A=09=0A=09=09www.diplomacy.edu=0A=09=
=0A=0A  =0A=09=09=09=09=09=0A=09This=0A=09is an automatically generated e-m=
ail notification.Please do not=0A=09respond by e-mail as your message will =
not be read.=09=09=09=09=0A  =0A=0A=0A
--8-10000000000-10000000000:87141
Content-Type: text/html; charset=utf-8
Content-Transfer-Encoding: quoted-printable

=0A<CENTER>=0A=0A<div style=3D"font-family: arial, sans-serif; font-size: 1=
4px; width:=0A  600px; border: 1px solid #666666; color: #333333;=0A  text-=
align: left; border-radius: 2px;">=0A       <div style=3D"background-color:=
#008191; color: #ffffff; height: 15px;=0A  padding: 20px; border-bottom: 1p=
x solid #666666; margin-bottom: 5px;">NOTIFICATION</div>=0A=0A  <div style=
=3D"padding: 20px;">=0A    A new post was added  in:<br>=0A=09<A HREF=3D"ht=
tp://wsrv05.diplomacy.edu/textus22/?class=3D1#87">IGCBP11 Europe 123</A><BR=
>=0A=0A    <div style=3D"font-weight: bold; margin: 20px 0px 10px 0px;">=0A=
=09=09Test 4 - exchange server header</div>=0A=0A=09=09<p>=0A=09This is<str=
ong> test mail</strong>. It should be <span style=3D"background-color:yello=
w;">html/text</span> formated via quoted-printable encoding.</p>=0A=0A    <=
div style=3D"color: #525252; margin-top: 10px; text-align: right;">=0A=09=
=09Author: Branislav Kurbalija</div>=0A=0A=09<a href=3D"http://wsrv05.diplo=
macy.edu/textus22/?class=3D1#87">Reply online</a>=0A=09<hr>=0A=0A=09<div st=
yle=3D"font-size: 11px; float: left;">=0A=09=09To change your account prope=
rties or=0A=09=09password go to <A HREF=3D"http://wsrv05.diplomacy.edu/text=
us22/cantina/profile.php?user=3D941&class=3D1">preferences</A></div>=0A=09<=
div style=3D"font-size: 11px; float: right;">=0A=09=09<A HREF=3D"http://www=
.diplomacy.edu/">www.diplomacy.edu</a>=0A=09</div>=0A=0A  </div>=0A=09=09=
=09=09=09=0A=09<div style=3D"font-size: 11px; background-color:#eee; height=
: 24px;=0A=09  padding: 7px; margin-top: 20px; border-top: 1px solid #66666=
6; text-align: center;">This=0A=09is an automatically generated e-mail noti=
fication.<br>Please do not=0A=09respond by e-mail as your message will not =
be read.</div>=09=09=09=09=0A  =0A</div>=0A</CENTER>=0A
--8-10000000000-10000000000:87141-- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:31:32.467

`quoted_printable_encode()`MS Outlook存在问题（请参阅[https://github.com/php/php-src/pull/120](https://github.com/php/php-src/pull/120)）。所以你必须升级你的 php 或自己实现quoted-printable，或者使用 base64 代替。

# java - Java 将 ByteArray 转换为图像

> ID：14937200
> 
> 赞同：1
> 
> 时间：2013-02-18T13:12:35.877
> 
> 标签：java, image, bytearray

我正在读取一个包含字节数组的文件。我下载了 Apache Commons IO 库以使用 FileUtils 的方法 readFileToByteArray

```
File file = new File("/home/username/array.txt");
FileUtils fu = new FileUtils();
byte[] array = FileUtils.readFileToByteArray(file); 
```

我想将字节数组转换为图像。

```
ByteArrayInputStream bis = new ByteArrayInputStream(array);
Iterator<?> readers = ImageIO.getImageReadersByFormatName("gif");

ImageReader reader = (ImageReader) readers.next();
Object source = bis;

ImageInputStream iis = ImageIO.createImageInputStream(source);

reader.setInput(iis, true);
ImageReadParam param = reader.getDefaultReadParam();

Image image = reader.read(0, param); // this line is the problem 
```

当代码转到引用的行时，它会抛出一个异常说

```
javax.imageio.IIOException: Unexpected block type 128! 
```

我不知道这个异常意味着什么，因此，我不知道如何解决它。只需要请求任何可能有用的进一步信息。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:27:20.397

我已经在[这个](http://docs.oracle.com/javase/tutorial/uiswing/examples/components/LayeredPaneDemoProject/src/components/images/dukeWaveRed.gif)文件上尝试了你的代码，它工作正常。

你的格式是`array.txt`什么？`readFileToByteArray()`需要二进制格式，您的图像阅读器会进一步认为它是 GIF 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T13:19:18.783

拥有后`byte[]`，您可以使用[ImageIO](http://docs.oracle.com/javase/1.4.2/docs/api/javax/imageio/ImageIO.html)将其写入 BufferedImage。

```
BufferedImage bufferedImage = ImageIO.read(new ByteArrayInputStream(array));
ImageIO.write(bImageFromConvert, "gif", new File("c:/test.gif")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T13:23:32.040

该代码意味着读者无法破译图像文件中的元数据。确保正在读取正确的文件并且格式正确。或者它可能期待不同的文件类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-26T10:56:30.877

没有 byte[] 我觉得这对多部分文件传输有好处，为此我们需要 apache 通用 jar 文件

```
 final FileOutputStream output = new FileOutputStream("D:\\Dir\\"+ request.getParameter("imageName") + ".jpg");
        IOUtils.copy(request.getPart("file").getInputStream(), output);
        output.close(); 
```

# iphone - 带有 size 属性：iPhone 呈现空白 当呈现如下选择下拉菜单时，iPhone 将其呈现为空白。我怎样才能解决这个问题？ <select size="3"><option value="volvo">沃尔沃</option> <option value="saab">萨博</option> <option value="opel">欧宝</option> <option 5376507="" value="audi</h1>
<blockquote>
        <p>ID：14937203</p>
        <p>赞同：15</p>
        <p>时间：2013-02-18T13:13:04.697</p>
        <p>标签：iphone, html, css, mobile, mobile-safari</p>
        </blockquote>

            <hr/>
            <h2>回答 #1</h2>
            <blockquote>
            <p>赞同：6</p>
            <p>时间：2013-02-22T22:18:18.657</p>
            </blockquote>

<p>看起来没有标准的方法来做到这一点，基于堆栈溢出的其他主题的内容：</p>

<ul>
<li>Safari Mobile 多行 <Select> 又名 GWT 多行列表框 jquery 插件将 <select size="10"> 转换为 Safari 移动设备 (iOS) 上的可用列表 但是第二个主题的作者写了一个插件来模拟这种行为：https ://github.com/redhotsly/safarimobile-multiline-select 回答 #2 赞同：3 时间：2014-07-12T07:34:29.627 我对此的简单修复，使用 Jquery： $(document).ready(function(){ if(navigator.userAgent.match(/(iPhone|iPod|iPad)/i)) { $('#my_select_box').prepend('<option value="" selected="selected" disabled="disabled">..Please select something</option>'); } }); 像这样工作： 等待文件加载 如果用户使用 iPhone、iPod 或 iPad 访问该站点，则执行脚本 在您的选择列表顶部添加一个选定和禁用的选项，并带有文本“..请选择一些东西”。 在所有其他浏览器中什么都不做，效果很好：D 回答 #3 赞同：2 时间：2013-02-18T13:40:51.440 If you need to display one of the options, use the following: HTML selected Attribute Your webpage at firefox: 回答 #4 赞同：1 时间：2014-05-21T22:31:22.930 看来这里的人可能没有完全理解这个问题。问题是 iOS 浏览器不会为不可选择的第一个字段呈现标签，这通常是“请选择...”类型指示符。如果未选中，iOS 将其呈现为空白。这是不可取的，因为用户可以做出选择，但该字段显示为空白。 您也不能以编程方式将其设置为选择以显示“请选择”，因为如果该字段是必需的，则表单验证将不再起作用，因为浏览器认为第一个字段已被选中，即使它被标记为不可选择。 “Bug”是 iOS 浏览器在设置为不可选择时不会显示第一个字段的标签。<a href=" https:="" stackoverflow.com="" questions="" safari-mobile-multi-line-select-aka-gwt-multi-line-listbox"=""></option></select>

# javascript - 在将 rails 3.0.11 升级到 rails 3.1.11 时

> ID：14937205
> 
> 赞同：-1
> 
> 时间：2013-02-18T13:13:12.813
> 
> 标签：javascript, ruby-on-rails

在升级 Rails 版本时，我收到以下错误：ActionController::RoutingError（ActionView::Helpers::AssetTagHelper:Module 的未定义方法 `javascript_expansions'）：

然后是如何在升级过程中启用资产管道

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:30:44.783

[这个 Railscast](http://railscasts.com/episodes/282-upgrading-to-rails-3-1?autoplay=true)应该可以帮助你。

# ruby - 为什么带有本机扩展的 gem 无法在 Ubuntu 上构建？

> ID：14937214
> 
> 赞同：1
> 
> 时间：2013-02-18T13:13:49.007
> 
> 标签：ruby, rubygems, gem, native

我可以毫无问题地在我的 Mac 上运行 bundle install，但是当我在我的 Ubuntu 构建服务器上运行它时，它会失败并显示以下输出：

```
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

/var/lib/jenkins/.rvm/rubies/ruby-1.9.3-p385-dev/bin/ruby extconf.rb 
creating Makefile

make
compiling native.c
native.c: In function ‘birch_edge_initialize’:
native.c:42:8: warning: unused variable ‘direction’ [-Wunused-variable]
native.c:41:8: warning: unused variable ‘directed’ [-Wunused-variable]
native.c:40:8: warning: unused variable ‘node_b’ [-Wunused-variable]
native.c:39:8: warning: unused variable ‘node_a’ [-Wunused-variable]
native.c:58:1: warning: control reaches end of non-void function [-Wreturn-type]
linking shared-object birch/native.so

make install
/usr/bin/install -c -m 0755 native.so /var/lib/jenkins/jobs
/usr/bin/install -c -m 0755 native.so .
/usr/bin/install: 'native.so' and './native.so' are the same file
make: *** [-] Error 1 
```

我正在使用 RVM，ruby 版本 ruby​​-1.9.3-p385-dev。

该问题也不是特定于一个 gem - 删除 birch 会导致带有本机扩展的 bson 出现相同类型的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T22:21:35.303

这似乎是由错误的 RVM 安装引起的。我最初使用 apt 安装了 rvm（坏主意），看起来清除并没有清理所有内容。使用干净的 rvm install 设置一个干净的 ec2 实例修复了它

# javascript - AngularJS 从指令调用控制器

> ID：14937223
> 
> 赞同：2
> 
> 时间：2013-02-18T13:14:20.377
> 
> 标签：javascript, angularjs, controllers

我有一个名为'user'的模型，'user'有一个名为'login'的控制器和一个名为'userMenu'的指令，我想要实现的是userMenu指令使用模块中可用的控制器'login' . 也许我不太了解模块和指令应该如何工作，但我正在执行以下操作：

首先，我这样定义我的控制器：

```
angular.module('user', []).
controller('login', ['$scope', '$http', function($scope, $http){
    $scope.logIn = function(){
        //Do something...
    }
} 
```

然后，在我的指令中......

```
angular.module('user', []).
directive('userMenu', function(){
    return {
    priority: 0,
    templateUrl: 'app/includes/user/menu.html',
    replace: true,
    restrict: 'A',
    controller: 'login',
    }
}); 
```

但我明白了：

```
Error: Argument 'login' is not a function, got undefined 
```

你能指导我在模块中使用指令和控制器吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T13:38:38.917

问题是您在准备指令时正在重新定义`user`指令。我假设您想在同一个模块上注册一个控制器和一个指令。如果是这样，您可以像这样注册您的指令：

```
angular.module('user').directive('userMenu', function(){
    return {
    ...
    }
}); 
```

请注意，调用没有第二个参数 ([])，`angular.module`这意味着您要检索已定义模块的实例而不是定义新模块。

# r - 两个 ggplots 在一个

> ID：14937224
> 
> 赞同：0
> 
> 时间：2013-02-18T13:14:20.783
> 
> 标签：r, ggplot2

我有两个ggplots。我可以以某种方式将它们画在一张照片上吗？一个作为另一个我的代码的背景：

```
ggplot(data = dd, aes(x = x, y = y)) + 
+     geom_point(colour="red", size = 3, aes(alpha=col))
ggplot(data=df, aes(x=x, y=y)) + geom_segment(aes(xend=x+dx, yend=y+dy), arrow = arrow(length = unit(0.3,"cm"))) 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T13:17:31.033

使用 ggplot2，您可以通过`data`为不同的`geom_*`. 就像是 ：

```
library(grid)
df <- data.frame(x=runif(10),y=runif(10),dx=rnorm(10),dy=rnorm(10))
dd <- data.frame(x=runif(15), y=runif(15))
ggplot() +
  geom_point(data=dd, aes(x=x, y=y), col="red") +
  geom_segment(data=df, aes(x=x, y=y, xend=x+dx, yend=y+dy), arrow = arrow(length = unit(0.3,"cm"))) 
```

![在此处输入图像描述](../Images/26bc07b7a173fb61adb38707e58065b5.png)

这是你想要做的吗？

# android - 向通知添加一个操作以再次显示通知，但稍后会显示通知，例如通知的打盹计时器？

> ID：14937225
> 
> 赞同：1
> 
> 时间：2013-02-18T13:14:24.513
> 
> 标签：android, notifications, action, delay

我的应用程序显示通知。我想通过 addAction 向通知添加一个操作，导致通知消失并在一小时后重新出现，但是我不想为此打开一个活动，最好的情况是：用户单击操作，通知消失并且然后在一小时后重新出现，就像通知的打盹计时器一样。

有没有办法在不打开活动的情况下做到这一点？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T13:40:01.073

每个通知动作都来自一个 PendingIntent。当然，您不想启动活动，也不必这样做。

根据您的情况，最好的选择是使用以下方法创建您的 PendingIntent：

```
public static PendingIntent getBroadcast (Context context, int requestCode, Intent intent, int flags) 
```

这样，每当用户点击通知时，它都会在系统上生成一个广播。然后，您必须创建一个[BroadcastReceiver](http://developer.android.com/reference/android/content/BroadcastReceiver.html)来接收此广播并使用[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)安排另一个 PendingIntent 。第二个待处理的意图将是一个不同的广播，每当它被触发时，您的 BroadcastReceiver 都可以接收并显示新的通知。

是否有意义？

***编辑：*

只是为了澄清一个伪示例：

> *   您的应用在 Manifest 中注册了一个 BroadcastReceiver，以接收“com.yourapp.mybroadcast”的广播
> *   通知有一个 com.yourapp.mybroadcast PendingIntent 和额外的 boolean isSchedule = true 和 int time = 60（60 分钟）
> *   用户点击通知并触发此广播并且您的 BroadcastReceiver 接收`onReceive(Context context, Intent intent)`
> *   在你的 onReceive 中你读到 isSchedule=true （这意味着它必须创建一个新的计划和时间 = 60 分钟。所以它使用 AlarmManager 创建一个新的广播 PendingIntent 与 isSchedule = false; 在 60 分钟内触发
> *   AlarmManager 将在 60 分钟内再次调用您的 BroadcastReceiver，但这次 isSchedule = false，因此您的 BroadcastReceiver 知道再次显示通知的时间。

# android - 使用 PhoneGap Build 构建的 Android 应用未显示在平板电脑上的 Google Play 中

> ID：14937228
> 
> 赞同：2
> 
> 时间：2013-02-18T13:14:49.427
> 
> 标签：android, cordova, google-play, phonegap-build, hockeyapp

我使用 PhoneGap Build 构建了一个应用程序，并成功提交到 Google Play。成功意味着它可以通过 Google Play 在我的 Nexus S 和其他运行 Android（Android 2.2 及更高版本）的智能手机上使用。

但是该应用程序在我尝试过的任何安卓平板设备（华硕/谷歌 Nexus 7 和安卓 4.2.1 和三星平板电脑，安卓 4.0.1）上都没有出现在 Google Play 中。

如果我要从 Hockey App 下载 .apk，该应用程序会按预期安装和运行。

我的 PhoneGap Build config.xml 看起来像这样（摘录）：

```
<!-- Multi-Platform -->

<preference name="phonegap-version" value="2.2.0" />
<preference name="target-device" value="universal" />
<preference name="fullscreen" value="false" />
<preference name="orientation" value="default" />

<!-- iOS -->

<preference name="webviewbounce" value="false" />
<preference name="prerendered-icon" value="false" />
<preference name="stay-in-webview" value="false" />
<preference name="ios-statusbarstyle" value="black-opaque" />
<preference name="exit-on-suspend" value="false" />
<preference name="show-splash-screen-spinner" value="true" />
<preference name="auto-hide-splash-screen" value="true" />

<!-- Android -->
<preference name="android-minSdkVersion" value="8" />

<!-- Icons -->
<icon src="icon57.png" width="57" height="57" />
<icon src="icon72.png" gap:platform="ios" width="72" height="72" />
<icon src="icon114.png" width="114" height="114" />

<icon src="icon54.png" gap:platform="android" gap:density="mdpi" />
<icon src="icon72.png" gap:platform="android" gap:density="hdpi" />
<icon src="icon114.png" gap:platform="android" gap:density="xhdpi" />

<!-- Splash Screens iOS -->
<gap:splash src="splash/ios/Default.png" width="320" height="480" />
<gap:splash src="splash/ios/Default_at_2x.png" width="640" height="960" />
<gap:splash src="splash/ios/Default_iphone5.png" width="640" height="1136" />
<gap:splash src="splash/ios/Default-Landscape.png" width="1024" height="768" />
<gap:splash src="splash/ios/Default-Portrait.png" width="768" height="1024" />

<!-- Splash Screens Android -->
<gap:splash src="splash/android/ldpi.png" gap:platform="android" gap:density="ldpi" />
<gap:splash src="splash/android/mdpi.png" gap:platform="android" gap:density="mdpi" />

<gap:splash src="splash/android/hdpi.png" gap:platform="android" gap:density="hdpi" />
<gap:splash src="splash/android/xhdpi.png" gap:platform="android" gap:density="xhdpi" />

<!-- Permissions -->

<preference name="permissions" value="none"/>

<feature name="http://api.phonegap.com/1.0/camera"/>
<feature name="http://api.phonegap.com/1.0/file"/>
<feature name="http://api.phonegap.com/1.0/geolocation"/>
<feature name="http://api.phonegap.com/1.0/media"/>
<feature name="http://api.phonegap.com/1.0/network"/>

<!-- Global Domain Access -->
<access origin="*" /> 
```

从我的角度来看，它似乎与屏幕尺寸/平板电脑格式直接相关。但我不知道为什么谷歌没有在大屏幕设备上列出该应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T11:35:21.213

目前似乎无法通过 PhoneGap Build 运行它，因为 AndroidManifest.xml 的某些选项没有专门的支持。

所以我决定使用 Eclipse 以默认方式构建应用程序（请参阅[http://docs.phonegap.com/en/2.4.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android](http://docs.phonegap.com/en/2.4.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android)）。

通过增加

```
<supports-screens
    android:largeScreens="true"
    android:normalScreens="true"
    android:smallScreens="true"
    android:xlargeScreens="true"
    android:resizeable="true"
    android:anyDensity="true"
    /> 
```

我能够增加支持的设备数量。但我也不得不添加

```
<uses-feature android:name="android.hardware.camera" android:required="false"/>
<uses-feature android:name="android.hardware.camera.autofocus" android:required="false"/> 
```

让我提到的平板电脑得到支持。

现在列出了 2.341，而不是之前支持的 1.836 设备。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T14:16:35.423

如果您登录 Play 商店，您可以转到您的 APK 并查看是否排除了任何设备。您还可以单击版本代码下的“显示详细信息”以查看所有属性。

我的*猜测*可能与“屏幕布局”或支持的 dpi 值有关，这是问题所在，您需要适当地修改清单。

# .htaccess - 如何为 .htaccess 重写规则只指定一个目录？

> ID：14937231
> 
> 赞同：1
> 
> 时间：2013-02-18T13:15:12.847
> 
> 标签：.htaccess, mod-rewrite

我有一个重写规则工作正常，其中格式中的任何页面`site.com/dir/page1.php`都被转换为格式`site.com/page1`。我通过以下方式实现了这一目标：

```
# 1\. turn on the rewriting engine
RewriteEngine On

# 2\. remove the www prefix
RewriteCond %{HTTP_HOST} ^www\.site\.com [NC] 
RewriteRule ^(.*)$ http://site.com/$1 [L,R=301]

# 3\.  send all non-secure pages to secure pages
RewriteCond %{HTTPS} off
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI}

# 4\. if 404 not found error, go to homepage
ErrorDocument 404 /index.php

# 5\. if url received with trailing slash (e.g. http://domain/test/) then go to correct page (e.g. http://domain/pages/test.php)
RewriteRule ^([^.]+)/$ includes/$1.php

# 6\. if url received WITHOUT trailing slash (e.g. http://domain/test) then go to correct page (e.g. http://domain/pages/test.php)
RewriteRule ^([^.]+)$ includes/$1.php 
```

我现在已经建立了一个博客，`site.com/blog/`当我尝试访问该博客时，它正在显示主页（即 404 错误）。

我*认为*错误出现在第 5 部分和第 6 部分，并且我需要以某种方式指定重写规则仅适用于“包含”目录？但我可能是错的，任何帮助表示赞赏，谢谢！

**更新：**

我在这里尝试了忽略“博客”目录的解决方案：

[如何为重写规则配置 .htaccess 文件以消除扩展名、斜杠、www？](https://stackoverflow.com/questions/8525174/how-to-configure-htaccess-file-for-rewrite-rules-to-get-rid-of-extensions-trai?rq=1)

```
#skip wordpress site which starts with blog
RewriteCond %{REQUEST_URI} !^/blog [NC]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([^\.]+)$ $1.php [NC,L] 
```

但不幸的是，这对我不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T13:35:22.307

为防止在 上重写`blog/`，请将以下内容放在您的规则 5,6 （一般重写）之前：

```
# Do not apply the following to the blog
RewriteCond %{REQUEST_URI} !^/blog

# 5\. if url received with trailing slash (e.g. http://domain/test/) then go to correct page (e.g. http://domain/pages/test.php)
# Merged 5 & 6 together by making the trailing slash optional /?
RewriteRule ^([^.]+)/?$ includes/$1.php 
```

另一种可能性是防止重写任何存在的目录：

```
# Do not apply the following to actual existing files and directories
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Merged 5 & 6 together by making the trailing slash optional /?
RewriteRule ^([^.]+)/?$ includes/$1.php 
```

# iphone - 从 0,0,320,45 的 tableview 修复表头？

> ID：14937233
> 
> 赞同：0
> 
> 时间：2013-02-18T13:15:22.347
> 
> 标签：iphone, ios, objective-c, uitableview, ios5

我在 tableview 中像这样添加表头：

```
TableHeaderView *tableHeaderView  = [[TableHeaderView alloc] initWithFrame:CGRectMake(0, 0, 320, 45)];
tableview.tableHeaderView = tableHeaderView; 
```

所以当我滚动到顶部时，我希望表头停止在它被初始化的位置（0,0）。当我向下滚动时，它会从屏幕上消失，就像 instagram 表头一样。看看表头 instagram 它我想要做什么..

初始化应用程序时。

![在此处输入图像描述](../Images/e57a3f327d6eed3e848da64aa3b28129.png)

当滚动到顶部时，表格标题保持在您的初始化位置

![在此处输入图像描述](../Images/63e3a04cb4e4ab108001db885c9cf4f0.png)

向下滚动时，如果表头在您当前的位置，它会离开屏幕 ![在此处输入图像描述](../Images/2712c2e30f0a20ca909bbad933e8732e.png)

![在此处输入图像描述](../Images/beb2c3b7074583db0ba380741c545ffb.png)

请记住，当滚动顶部表头需要根据滚动位置出现时

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:22:10.907

你的提问有点不对。实际上你想滚动 UINavigationBar。试试这个解决方案，它可能对你有用：

[http://horseshoe7.wordpress.com/2012/05/18/uinavigationbar-that-scrolls-away/](http://horseshoe7.wordpress.com/2012/05/18/uinavigationbar-that-scrolls-away/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T16:11:21.807

正如我在屏幕截图中看到的那样——它不是表头（self.tableView.tableHeaderView）——它是节头，不是吗？

# java - 我无法在 Eclipse Juno 中使用调试器

> ID：14937235
> 
> 赞同：2
> 
> 时间：2013-02-18T13:15:25.240
> 
> 标签：java, eclipse

我正在使用 Eclipse Juno。每当我尝试在任何程序上使用调试器时，编辑器窗格中都会出现一个新窗口，标题为红色`URLClassLoader$1.run() line: not available`，其中一条消息显示为`"Source not found"`红色。有什么帮助吗？提前致谢！

这是图片

![在此处输入图像描述](../Images/f870705fc2c1b1b64f8f9f8012400889.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T13:26:20.350

发生这种情况是因为您（意外）在`URLClassLoader`.

检查调试器透视图中的“断点”视图（它位于“变量”视图旁边）。应该有一个断点，它`URLClassLoader$1.run()`至少是`URLClassLoader`. 选择并删除它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T13:31:18.057

我在使用 Eclipse Juno 时也遇到了这个问题，然后我又回到了 Indigo，我强烈建议您回到 Indigo。Juno 有一些错误，它比以前的版本（galileo、indigo、helios 等）消耗更多的内存。用户界面似乎更好，但我更喜欢性能而不是视图。但这只是我给你的建议，因为我遇到了同样的问题，我很高兴使用 Indigo 进行调试 :)

# bundler - 如何开发一个依赖另一个的宝石

> ID：14937238
> 
> 赞同：3
> 
> 时间：2013-02-18T13:15:42.610
> 
> 标签：bundler, gemfile, gemspecs

我有一个 gem A，它依赖于 gem B。这两个 gem 都是我自己的，目前正在私人开发中。我没有计划将这些发布到 ruby​​gems。

我想在我的 rails 应用程序中使用 gem A。

问题是当我尝试为我的 rails 应用程序运行 bundle install 时出现此错误。

> 在任何来源中都找不到 gem 'A (>= 0) ruby​​' 所需的 gem 'B (>= 0) ruby​​'。

在我的 Gemfile 的 Rails 应用程序中，我有

```
gem 'A', :path => "/path/to/A' 
```

在 gem A 的 gemspec 中我有

```
gem.add_dependency 'B' 
```

在 A 的 Gemfile 中，我明确地设置了 B 的位置，如下所示

```
gem 'omusubi', :path => "path/to/B' 
```

当我尝试运行我的 rails 应用程序时，上述配置似乎不起作用。

但是，当我运行每个 gem 的测试套件时，它们都通过了。

我相信问题是当我运行 rails 应用程序并且捆绑程序加载依赖项 A 时，它只查看 A 的 gemspec，完全忽略了 gemfile。这可能是故意的。那么如何让我的代码工作而不必在这个开发阶段发布我的私人 gem。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:20:08.447

一种可能性是使用 :path 选项在应用程序的 Gemfile 中对 B 进行硬依赖。在这种情况下，Bundler 应该正确解决它。

# android - setOnDismissListener 我可以知道我在android中点击了哪个按钮

> ID：14937239
> 
> 赞同：1
> 
> 时间：2013-02-18T13:15:48.260
> 
> 标签：android

```
sbpOfScreen.getDialog().setOnDismissListener(new OnDismissListener() {

                    @Override
                    public void onDismiss(DialogInterface dialog) {
                        // How to know what button I click?
                    }
                }); 
```

我`sbpOfScreen`有`DialogPreference`. 我想知道我点击了什么。我正在使用 setOnDismissListener。我怎么知道我是否单击`"Ok"`或`"Cancel"`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:23:06.627

除了我的评论 -

```
 dialogBuilder.setPositiveButton(activity.getString(R.string.ok),new DialogInterface.OnClickListener() {

                            @Override
                            public void onClick(DialogInterface dialog, int which) {
                                //do okay button stuff
                            }

                        });

    dialogBuilder.setNegativeButton(activity.getString(R.string.cancel),new DialogInterface.OnClickListener() {

                            @Override
                            public void onClick(DialogInterface dialog, int which) {
                                //do cancel button stuff
                            }

                        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T13:20:09.243

不，您应该使用[`DialogInterface`](http://developer.android.com/reference/android/content/DialogInterface.html). 例如，如果您使用[`DialogInterface.OnClickListener`](http://developer.android.com/reference/android/content/DialogInterface.OnClickListener.html)，您将在回调中收到一个参数，告诉您单击了哪个按钮。

# sqlite - 存储我的服务 sqlite db 文件的最佳位置？

> ID：14937243
> 
> 赞同：4
> 
> 时间：2013-02-18T13:16:01.483
> 
> 标签：sqlite, symfony, doctrine-orm

我是 Symfony2 的新手。我正在开发一个实用服务，它需要使用数据库来满足自己的需求。

我希望它的数据与其他服务/捆绑使用的 mysql 全局数据库分开。

存储 db 文件的最佳位置在哪里以及如何指定路径？

示例（错误）代码：

```
class MyCustomService
{
    protected $config;

    public function __construct(array $config)
    {
        $this->config = $config;
        $this->setupDB();
    }    

    private function setupDB()
    {
        $config = new \Doctrine\DBAL\Configuration();
        $connectionParams = array(
            'driver' => 'pdo_sqlite',
            'path' => realpath('.') . '\dbmanager.db'
        );        
       $conn = \Doctrine\DBAL\DriverManager::getConnection($connectionParams, $config); 

       //...
    }
} 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T13:34:44.533

```
It Shouldn't be in web folder :) 
```

*   如果您的数据库可以在清除缓存时删除，那么应用程序/缓存就可以了。

*   如果你想要持久化数据库，那么你可以选择 app/{name of service}/db.sqlite" 或 data/{name of service}/db.sqlite"

*   我宁愿在配置选项中传递数据库的名称

> 另请注意，在 *NIX 下，您的 Web 服务器/cli 的用户必须对数据库文件具有读取和写入权限，并对包含目录具有读取、写入和执行权限

# unit-testing - Symfony2 使用 Doctrine 实体进行单元测试

> ID：14937247
> 
> 赞同：0
> 
> 时间：2013-02-18T13:16:14.073
> 
> 标签：unit-testing, symfony, phpunit

我显然错过了一些非常明显的东西，但这让我发疯：

为了测试我的代码，我需要将我的实体置于已定义的状态。它根本行不通。它完全忽略了我所做的任何更改，例如这个：

```
 $this->test_character->setLocation(null);

    $crawler = $this->client->request('GET', '/en/character/start');
    $this->assertTrue($this->client->getResponse()->isSuccessful(), "start page failed to load");
    $this->assertGreaterThan(0, $crawler->filter('html:contains("Character Placement")')->count(), 'start page content failure'); 
```

调试这个测试表明它失败了，因为 Location 实际上没有设置为 null。添加一个 flush() 不会改变任何东西，所以这不是问题。我最好的猜测是它仅在测试客户端上更改它，而不是在生成页面的后端上更改它，但留下了一个问题：我如何将我的实体置于定义的状态以测试它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T15:13:45.107

你在正确的路线上 - 处理你的测试请求的内核是你的应用程序的一个独立实例。**除非您在发出请求之前将其持久化并将**其刷新到数据库中，否则它将无法访问您可能已加载到 test_character 中的实体。

您是否考虑过使用[Fixtures](http://symfony.com/doc/current/bundles/DoctrineFixturesBundle/index.html)？如果您所做的只是初始化一些准备测试请求/响应的实体，那么这是正确的方法。您永远不需要在功能测试中直接使用实体。

您可能还想查看[Liip 功能测试包](https://github.com/liip/LiipFunctionalTestBundle)以自动设置您的测试数据库和测试装置。

# memory-leaks - Java OutOfMemoryError 使用 Javolution 结构

> ID：14937252
> 
> 赞同：0
> 
> 时间：2013-02-18T13:16:22.173
> 
> 标签：memory-leaks, struct, out-of-memory, javolution

我正在使用 Javolution Struct 来表示 Java 中的 C 结构。

但是，每次我创建一个新项目时，它都会在进程的本机部分分配，并增加内存使用量。

最终，该进程达到 4GB 内存，尽管 Java 堆大小仍然很小。然后该进程被操作系统杀死（我被迫使用 32 位 java）。

这是一个小班演示这个问题：

```
import javolution.io.Struct;

public class StructTest
{
    public static class SimpleStruct extends Struct
    {
        private final Unsigned32 value = new Unsigned32();
    }

    public static void main(String[] args)
    {
        try
        {
            for (int i = 0; i < 10000000 ; i++)
            {
                SimpleStruct st = new SimpleStruct();
                st.value.set(0xFFFF);

                if (i % 10000 == 0)
                {
                    long free = Runtime.getRuntime().freeMemory();
                    long total = Runtime.getRuntime().totalMemory();
                    System.out.printf("%08d: Total Memory=%,12d ; Used Memory=%,12d\n", i, total, total - free);
                }
            }
        }
        catch (Exception e)
        {
            e.printStackTrace();
        }
    }
} 
```

这是此过程的“顶部”。如您所见，内存增长非常迅速：

886 根 20 0 1617m 447m 5536 S 26.8 1.2 0:00.83 java -cp 。结构测试
886 根 20 0 1917m 761m 5536 S 28.2 2.1 0:01.12 java -cp。结构测试 886 根 20 0 2116m
990m 5540 S 359.9 2.7 0:04.80 java -cp。结构测试 886 根 20 0 2120m
1.0g 5580 S 115.3 2.8 0:06.00 java -cp。结构测试 886 根 20 0 2302m
1.2g 5580 S 23.5 3.3 0:06.24 java -cp。结构测试 886 根 20 0 2568m
1.4g 5580 S 180.3 4.1 0:08.08 java -cp。结构测试 886 根 20 0 2817m
1.7g 5580 S 95.5 4.8 0:09.09 java -cp。结构测试 886 根 20 0 3114m
2.0g 5580 S 26.4 5.6 0:09.36 java -cp。结构测试
886 根 20 0 3406m 2.3g 5580 S 30.2 6.4 0:09.67 java -cp。结构测试 886 根 20 0 3699m
2.6g 5580 S 25.5 7.3 0:09.93 java -cp。
结构测试886 根 20 0 3994m **2.9g** 5580 S 27.4 8.1 0:10.21 java -cp。结构测试

我可以尝试重用该结构，而不是重新创建它，但我需要多个线程中的许多项目。

有没有一种简单的方法来指示进程释放我不再需要的结构的内存？

编辑：在 RedHat Linux 上测试（主要是 6.2，但也发生在 5.6 上）。2.6.32-220.el6.x86_64 Red Hat Enterprise Linux Server 版本 6.2 (Santiago) 适用于 Java 1.6.0_03 (1.6.0_03-b05) 和 64 位版本的 1.6.0_30。

谢谢，艾尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:48:33.823

嗨，我刚刚在我的机器上运行了你的代码，没有任何问题。

```
OS: windows 7 
Java: Jrockit 32 bit 
```

Javolution 版本：来自 svn 的最新版本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T22:15:51.070

我不认为这是一个 Javolution Struct 问题。Javolution Struct 只是 java.nio.ByteBuffer 的一个包装器。您也可以使用以下代码：

```
import java.nio.ByteBuffer;

public class ByteBufferTest
{
  public static void main(String[] args)
  {
    try
    {
      for (int i = 0; i < 10000000; i++)
      {
        ByteBuffer bb = ByteBuffer.allocateDirect(4);
        bb.put(new byte[]{(byte) 255, (byte) 255});
        if (i % 10000 == 0)
        {
          long free = Runtime.getRuntime().freeMemory();
          long total = Runtime.getRuntime().totalMemory();
          System.out.printf("%08d: Total Memory=%,12d ; Used Memory=%,12d\n", i, total, total - free);
        }
      }
    }
    catch (Exception e)
    {
      e.printStackTrace();
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T10:33:59.913

根据 yoavain 的帖子，这似乎确实是 DirectByteBuffer 问题。

在阅读了 psot“[如何对直接缓冲区 java 进行垃圾收集](https://stackoverflow.com/questions/1854398/how-to-garbage-collect-a-direct-buffer-java)”之后，似乎普通 GC 无法处理这个问题（“直接缓冲区的内容可能驻留在普通垃圾收集堆之外，因此它们对应用程序的内存占用可能并不明显”）。

一种解决方案是不时主动调用 System.gc()。这似乎清除了内存，但不可靠且麻烦。

一个更好的解决方案似乎是使用缓冲区的清洁器并在我们完成时清理它，基本上将其“释放”为 c 代码。

因此，修改后的测试类将是：

```
import javolution.io.Struct;
import sun.nio.ch.DirectBuffer;

import java.nio.ByteBuffer;

public class StructTest
{
    public static class SimpleStruct extends Struct
    {
        private final Unsigned32 value = new Unsigned32();
    }

    public static void main(String[] args)
    {
        try
        {
            for (int i = 0; i < 10000000 ; i++)
            {
                SimpleStruct st = new SimpleStruct();
                st.value.set(0xFFFF);

                if (i % 10000 == 0)
                {
                    long free = Runtime.getRuntime().freeMemory();
                    long total = Runtime.getRuntime().totalMemory();
                    System.out.printf("%08d: Total Memory=%,12d ; Used Memory=%,12d\n", i, total, total - free);
                }
                ByteBuffer byteBuffer = st.getByteBuffer();
                if (byteBuffer instanceof DirectBuffer)
                {
                    ((DirectBuffer)byteBuffer).cleaner().clean();
                }
            }
        }
        catch (Exception e)
        {
            e.printStackTrace();
        }
    }
} 
```

当我运行这个时，内存似乎保持稳定。

# windows - 安装失败后，设备管理器中的“扫描硬件更改”等效项不起作用

> ID：14937261
> 
> 赞同：0
> 
> 时间：2013-02-18T13:16:52.360
> 
> 标签：windows, driver, installation, inf, device-manager

根据[文档](http://support.microsoft.com/kb/259697/en-us)，C++ 函数`CM_Locate_DevNodeA`和`CM_Reenumerate_DevNode`of`CfgMgr32.dll`应该是在设备管理器中*扫描更改硬件的菜单项的程序等效项。*

有关C# 中的托管代码，请参阅[此问题的第二个答案。](https://stackoverflow.com/questions/2181525/is-there-an-api-call-to-start-a-scan-for-hardware-devices/2186058)

但与文档相反，当设备管理器操作有效时，编程方法并不总是有效。这是我的情况：

1.  用户已插入 USB 设备

2.  未找到驱动程序

3.  我的安装程序将正确的 INF 文件添加到 Windows/inf 目录中

4.  `CM_Reenumerate_DevNode`不会导致安装新驱动程序

5.  设备管理器中的“扫描硬件更改”使用新驱动程序开始安装

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:20:27.440

驱动程序在重新启动后被识别，当使用`SetupCopyOEMInf`（C# example in accepted answer [to this question](https://stackoverflow.com/questions/11659223/install-libusb-driver-using-inf-file-with-c-sharp)）而不是将 inf 文件复制到 C:\windows\inf 目录时。这种方法似乎相当于“右键单击 inf 文件 --> 安装”。

在我的情况下，出现“Windows 无法验证此驱动程序软件的发布者”窗口是因为制造商没有注册它。但这是一个不同的故事。但是，这可能是我的问题的另一个原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-22T18:53:30.670

我在尝试编写 C++ 代码来复制设备管理器的扫描硬件命令时遇到了类似的问题。

我尝试使用[https://support.microsoft.com/en-us/kb/259697](https://support.microsoft.com/en-us/kb/259697)上的代码。

但是，它没有用。我注意到`CM_Reenumerate_DevNode`返回了`CR_ACCESS_DENIED`，它`#define CR_ACCESS_DENIED (0x00000033) // NT ONLY`在`Cfgmrg32.h`.

根据[CM_Reenumerate_DevNode 函数](https://msdn.microsoft.com/en-us/library/windows/hardware/ff539763%28v=vs.85%29.aspx)，该函数的调用者需要`SeLoadDriverPrivilege`。

为了绕过在代码中设置此权限，我以管理员身份运行 .exe，方法是右键单击 .exe 并选择以管理员身份运行。

# xcode - 不能在 xcode 4.6 中使用 webview

> ID：14937268
> 
> 赞同：0
> 
> 时间：2013-02-18T13:17:26.493
> 
> 标签：xcode, ios6

NSString *googleMapsURLString1 = [NSString stringWithFormat:@" [http://maps.google.com/?saddr=%1.6f,%1.6f&output=embed](http://maps.google.com/?saddr=%1.6f,%1.6f&output=embed) " ,floatLati, floatLongi];

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:29:42.517

尝试这个，

```
 NSString *googleMapsURLString1 = [NSString stringWithFormat:@"http://maps.google.com/?saddr=%1.6f,%1.6f&output=embed",floatLati,floatLongi];
    NSURL *url = [NSURL URLWithString:googleMapsURLString1];
NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
 [webView loadRequest:requestObj]; 
```

# javascript - Javascript location.href 到 mailto 触发 GET HTTP，该 HTTP 在 Chrome 中被取消

> ID：14937272
> 
> 赞同：5
> 
> 时间：2013-02-18T13:17:41.193
> 
> 标签：javascript, mailto

我有一个触发以下 javascript 函数的按钮：

```
function sendEmail() {
    var mail = 'mailto:contact@test.com';
    location.href = mail;
}; 
```

在 Chrome 中，此函数会触发对“mailto:contact@test.com”的 HTTP GET，但 HTTP GET 在 Inspect Element Network 选项卡中具有“已取消”状态，并且电子邮件客户端未打开。

在 IE 中，电子邮件客户端也无法打开。

如何让电子邮件客户端打开？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T13:26:11.240

这个对我有用。但是你可以试试这个

```
function sendEmail() {
    var mail = 'mailto:contact@test.com';
    var a = document.createElement('a');
    a.href = mail;
    document.body.appendChild(a); // Add to the DOM
    a.click();
    document.body.removeChild(a); // Remove it back
}; 
```

# php - 使用 SQL 语句在二维数组中进行 Foreach

> ID：14937275
> 
> 赞同：0
> 
> 时间：2013-02-18T13:17:48.227
> 
> 标签：php, sql

我有一个二维数组，如下所示：

```
Array(
[1] =>  Array
      (
        [0] => 15956,3
        [1] => 15984,0.13
        [2] => 15940,1
      )

[2] => Array
    (
        [0] => 15918,0.5
        [1] => 15970,0.5
        [2] => 15902,0.5
        [3] => 15943,0.5
    ) 
```

我将如何集成一个 foreach 循环来遍历数组的每个子元素并生成动态 sql 语句......例如：

```
UPDATE main_stock SET on_hand -= 3 WHERE Rcode = 15918
UPDATE main_stock SET on_hand -= 0.13 WHERE Rcode = 15984 
```

等等...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:21:12.713

您可以将这些值组合为临时表或子查询，然后`UPDATE`像这样连接两个表：

```
UPDATE main_stock m
INNER JOIN
(
   SELECT 15956 AS Rcode, 3 on_hand
   UNION ALL
   ...
) AS t ON m.on_hand = t.on_hand 
SET m.on_hand -= t.on_hand; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T13:21:37.987

```
foreach ($array as $subArr) { // Goes through each array of the main array
    foreach ($subArr as $val) { // Goes through each sub array's values
        $sql = "UPDATE `main_stock` SET `on_hand` = 3 WHERE `Rcode` = " . $val;
    }
} 
```

那是你要找的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T13:30:50.317

`$iar`是输入数组。

```
foreach( $iar as $tar )
    foreach($tar as $line)
    {
        list($id,$value) = split(",",$line);
        mysql_query("UPDATE main_stock SET on_hand -= $value WHERE Rcode = $id");
    } 
```

# joomla - 在模态窗口中显示视图

> ID：14937276
> 
> 赞同：0
> 
> 时间：2013-02-18T13:17:49.470
> 
> 标签：joomla, joomla2.5

大家好，我在 joomla 3 中做一个网站

我想在打开模态窗口时执行一项任务，为此我在模态窗口中显示视图我这样做..

这是要执行的任务的路由器

```
<?php $link = JRoute::_('index.php?option=com_projects&view=proyectos&task=este&id='. $item->id);?>

<div class="span4">
<a href="#.<?php echo $link; ?>" role="button" class="btn" data-toggle="modal">
<img src="<?php echo JURI::root()?>/<?php echo $item->imagenportada; ?>"/></a>
</div> 
```

现在是模态窗口

```
 <div id="<?php echo $link ?>" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            <h3 id="myModalLabel">Modal header</h3>
        </div>
        <div class="modal-body">
            <p>One fine body…&lt;/p>
        </div>
        <div class="modal-footer">
            <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
            <button class="btn btn-primary">Save changes</button>
        </div>
    </div> 
```

但不工作。任何的想法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:07:37.070

查看 Twitter Bootstrap 的 JS 和 CSS 是否已加载 [http://twitter.github.com/bootstrap/javascript.html#modals](http://twitter.github.com/bootstrap/javascript.html#modals)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T10:17:54.693

最后我添加到我的链接

```
 <a href="#modal"  title="<?php $item->id?>" id="<?php echo $item->id; ?>" role="button" class="picture" data-toggle="modal"> 
```

和模态窗口

```
 <div id="modal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            <h3 id="myModalLabel">Modal header</h3>
        </div>
        <div class="modal-body">
            <p>One fine body…&lt;/p>
        </div>
        <div class="modal-footer">
            <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
            <button class="btn btn-primary">Save changes</button>
        </div> 
```

# icons - Modelica - 创建图标

> ID：14937279
> 
> 赞同：4
> 
> 时间：2013-02-18T13:18:00.097
> 
> 标签：icons, modelica

我想为结合了 Modelica 标准库中的两个组件的模型创建一个图标。这两个组件是 Modelica.Blocks.Sources.Sine 和 Modelica.Electrical.Analog.Sources.SignalVoltage。我已经连接了这两个组件，因此代码如下所示：

```
model test
 Modelica.Blocks.Sources.Sine sine1(freqHz = 5, amplitude = 1, offset = 10) annotation(Placement(visible = true, transformation(origin = {-51.0325,-0.884933}, extent = {{-12,-12},{12,12}}, rotation = 0)));
 Modelica.Electrical.Analog.Sources.SignalVoltage signalvoltage1 annotation(Placement(visible = true, transformation(origin = {-4.12979,-1.17994}, extent = {{12,-12},{-12,12}}, rotation = 90)));
equation
 connect(sine1.y,signalvoltage1.v) annotation(Line(points = {{-37.8325,-0.884933},{-12.9794,-0.884933},{-12.9794,-1.17994},{-12.5298,-1.17994}}));
end test; 
```

注释由 OMEdit 自动完成。

现在我想实现以下目标：我想创建一个图标

*   包含 signalvoltage1 的引脚
*   通过双击可以访问 sine1 的属性。

我知道 annotation(Icon(...)) 和 annotation(Placement(...)) 命令，但我不知道如何将 signalvoltage1.p 和 signalvoltage1.n 带到图标层。而且我不知道如何通过双击访问 sine1 的属性，例如，我可以使用 OMEdit 轻松绘制的矩形。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T07:27:27.373

> 现在我想实现以下目标：我想创建一个图标
> 
> 包含 signalvoltage1 的引脚，通过双击可以访问 sine1 的属性。

引脚可以：通常图形编辑器应该让您选择在您从现有连接器根到图表上的空白点时自动创建拟合连接器。然而 OMEdit 并非如此（还没有？）。因此，您需要将相应的连接器从 MSL 拖放到模型的图表视图中。在您的情况下`Modelica.Electrical.Analog.Interfaces.NegativePin`，`Modelica.Electrical.Analog.Interfaces.PositivePin`然后适当地连接它们。连接器类型的组件将（应该）自动出现在图表和图标层上，以便可以“从外部”连接。

至于访问。您在模型级别上创建一个新参数，并让新模型中的组件使用这些参数。最好从上面举个例子来解释：

```
model Test
  parameter Real myfreqHz = 5 "Frequency of the sinewave";
  parameter Real myamplitude = 1 "Amplitude of the sinewave";    
  parameter Real myoffset = 1 "Offset of the sinewave";
  Modelica.Blocks.Sources.Sine sine1(freqHz = myfreqHz, 
                               amplitude = myamplitude, offset = myoffset);
  Modelica.Electrical.Analog.Sources.SignalVoltage signalvoltage1;
equation
...
end Test; 
```

# vb.net - 整数文本框 Visual Basic

> ID：14937280
> 
> 赞同：0
> 
> 时间：2013-02-18T13:17:59.783
> 
> 标签：vb.net, textbox, integer, label

所以我是编码新手，我正在尝试根据文本框中的数字使标签显示结果。文本框中的数字基于用户单击的按钮。如果文本框高于或低于某些数字，我希望标签读取不同的值，我的代码不起作用，请大家帮忙？

```
 Private Sub btn1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btn1.Click, btn2.Click, btn3.Click, btn4.Click, btn5.Click, btn6.Click, btn7.Click, btn8.Click, btn9.Click, btn10.Click, _
    btn11.Click, btn12.Click, btn13.Click, btn14.Click, btn15.Click, btn16.Click, btn17.Click, btn18.Click, btn19.Click, btn20.Click, btn21.Click, btn22.Click, btn23.Click, btn24.Click, btn25.Click, btn26.Click, _
    btn27.Click, btn28.Click, btn29.Click, btn30.Click, btn31.Click, btn32.Click, btn33.Click, btn34.Click, btn35.Click, btn36.Click, btn37.Click, btn38.Click, btn39.Click, btn40.Click, btn41.Click, btn42.Click, _
    btn43.Click, btn44.Click, btn45.Click, btn46.Click, btn47.Click, btn48.Click, btn49.Click, btn50.Click, btn51.Click, btn52.Click, btn53.Click, btn54.Click, btn55.Click, btn56.Click, btn57.Click, btn58.Click, _
    btn59.Click, btn60.Click, btn61.Click, btn62.Click, btn63.Click, btn64.Click, btn65.Click, btn66.Click, btn67.Click, btn68.Click, btn69.Click, btn70.Click, btn71.Click, btn72.Click, btn73.Click, btn74.Click, _
    btn75.Click, btn76.Click, btn77.Click, btn78.Click, btn79.Click, btn80.Click, btn81.Click, btn82.Click, btn83.Click, btn84.Click, btn85.Click, btn86.Click, btn87.Click, btn88.Click, btn89.Click, btn90.Click, _
    btn91.Click, btn92.Click, btn93.Click, btn94.Click, btn95.Click, btn96.Click, btn97.Click, btn98.Click, btn99.Click, btn100.Click, btn101.Click, btn102.Click, btn103.Click, btn104.Click, btn105.Click, btn106.Click, _
    btn107.Click, btn108.Click, btn109.Click, btn110.Click, btn111.Click, btn112.Click, btn113.Click, btn114.Click, btn115.Click, btn116.Click, btn117.Click, btn118.Click, btn119.Click, btn110.Click, btn111.Click, btn112.Click, _
    btn113.Click, btn114.Click, btn115.Click, btn116.Click, btn117.Click, btn118.Click, btn119.Click, btn120.Click, btn121.Click, btn122.Click, btn123.Click, btn124.Click, btn125.Click, btn126.Click, btn127.Click, btn128.Click, _
    btn129.Click, btn130.Click, btn131.Click, btn132.Click, btn133.Click, btn134.Click, btn135.Click, btn136.Click, btn137.Click, btn138.Click, btn139.Click, btn140.Click, btn141.Click, btn142.Click, btn143.Click, btn144.Click, _
    btn145.Click, btn146.Click, btn147.Click, btn148.Click, btn149.Click, btn150.Click, btn151.Click, btn152.Click, btn153.Click, btn154.Click, btn155.Click, btn156.Click, btn157.Click, btn158.Click, btn159.Click, btn160.Click, _
    btn161.Click, btn162.Click, btn163.Click, btn164.Click, btn165.Click, btn166.Click, btn167.Click, btn168.Click, btn169.Click, btn170.Click, btn171.Click, btn172.Click, btn173.Click, btn174.Click, btn175.Click, btn176.Click, _
    btn177.Click, btn178.Click, btn179.Click, btn180.Click, btn181.Click, btn182.Click, btn183.Click, btn184.Click, btn185.Click, btn186.Click, btn187.Click, btn188.Click, btn189.Click, btn190.Click, btn191.Click, btn192.Click, _
    btn193.Click, btn194.Click, btn195.Click, btn196.Click, btn197.Click

    With DirectCast(sender, Button)

        If txtAdd.Text = ("") Then

        End If
        txtAdd.Text = .Text

        If txtAdd.Text >= 151 Then
            lblCharge.Text = ("10")

        ElseIf txtAdd1.Text = ("") Then

        End If
        txtAdd1.Text = .Text

        If txtAdd1.Text < 151 Then

        End If
        lblCharge.Text = ("12.50")

    End With
 End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:47:29.393

如果您询问提取按钮名称上的数字，您可以这样做：

```
sNum = senderBtn.Name.Substring(3) 
```

或者：

```
sNum = senderBtn.Name.Replace("btn","") 
```

甚至使用`Regex`. 有很多方法。并且不要忘记将其转换为`Integer`：

*   `CInt()`
*   `Convert.ToInt32()`
*   `Integer.Parse()`
*   等等

# java - 在Java中，两个双精度数相乘为零？

> ID：14937283
> 
> 赞同：3
> 
> 时间：2013-02-18T13:18:04.747
> 
> 标签：java, double

所以，我在这里遇到了一个非常奇怪的问题。当我将值 user.salary 乘以 1.1 时，由于某种原因它变为 0！原来的 user.salary 变量很好，我确认它是 System.out.println 应该有的。

```
import javax.swing.JOptionPane;

class Employee{
    String firstname;
    String lastname;
    double salary;
    Employee (String firstname, String lastname, double Salary){
        this.firstname = firstname;
        this.lastname = lastname;
        this.salary = salary;
    }

public String getFirstname() {
    return firstname;
}

public void setFirstname(String firstname) {
    this.firstname = firstname;
}

public String getLastname() {
    return lastname;
}

public void setLastname(String lastname) {
    this.lastname = lastname;
}

public double getSalary() {
    return salary;
}

public void setSalary(double salary) {
    this.salary = salary;
}

}

 class NameDialog{
 public static void main( String[] args )
 {

String firstname = JOptionPane.showInputDialog("What is your first name?");
String lastname = JOptionPane.showInputDialog("What is your last name?");
String salarystring = JOptionPane.showInputDialog("What is your salary?");
Double salary = Double.parseDouble(salarystring);
Employee user = new Employee (firstname, lastname, salary);
String message = String.format("Hello, %s %s.", user.firstname, user.lastname);
JOptionPane.showMessageDialog(null, message);
double raise = (user.salary)*1.1;

JOptionPane.showMessageDialog(null, "Congratulations, you have received a raise! Your salary is now "+raise);
  } 
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-18T13:19:19.880

您的构造函数有一个错字：

```
Employee (String firstname, String lastname, double Salary){ 
```

`double salary`应该是小写。因为它是这一行：

```
this.salary = salary; 
```

什么都不做，因为它等同于`this.salary = this.salary`.

一旦您将参数更改为小写的薪水，它就会将您传递给构造函数的值分配给薪水字段。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-18T13:19:38.817

您的构造函数中似乎存在问题：

```
Employee (String firstname, String lastname, double Salary){
    this.firstname = firstname;
    this.lastname = lastname;
    this.salary = salary; //You assign salary to itself, since the 
                          //parameter is Salary (with caps)
} 
```

这种方式`salary`没有设置，并保持默认值`0`。剩下的问题只是数学。将行更改为此

```
 this.salary = Salary 
```

将解决这个问题，我建议你使用Java的命名约定并以小写开头的参数命名，`newSalary`例如。

# visual-studio - Visual Studio：将解决方案资源管理器滚动到当前文件的快捷方式

> ID：14937284
> 
> 赞同：89
> 
> 时间：2013-02-18T13:18:06.837
> 
> 标签：visual-studio

我**不是要求在解决方案资源管理器中****自动**关注当前文件的选项。这个问题已经回答了[这个问题](https://stackoverflow.com/q/12682656/540352)，我关闭了这个选项，因为我讨厌这种行为。

我想要一个快捷方式（或宏，或....）来跳转到我当前在解决方案资源管理器中编辑的文件。

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2015-01-05T00:23:32.150

在 VS 2013 中有一个**内置的键盘快捷键**( `CTRL`+ `\`, `S`)

1.  按`CTRL`+ 反斜杠
2.  释放两个键
3.  按下`S`键

或单击下图中突出显示的按钮。

![与活动文档同步](../Images/0b8b28b7342cb2110859ed1a42fa747d.png)

如果您不喜欢默认组合，还可以选择[自定义键盘快捷键:)](http://msdn.microsoft.com/en-us/library/5zwses53.aspx#bkmk_assign)

* * *

## 回答 #2

> 赞同：79
> 
> 时间：2016-03-21T15:44:52.483

在 Visual Studio 2015、2017 和 2019 中，您可以按`Ctrl`+ `[`，然后按`s`。

这将突出显示解决方案资源管理器中当前正在编辑的文件。

这可以通过以下键盘命令进行配置：*SolutionExplorer.SyncWithActiveDocument*

要重新配置，请导航至工具 -> 选项 -> 环境 -> 键盘

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2013-02-18T13:35:18.137

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-01-10T09:39:37.527

要在解决方案资源管理器中找到您当前正在编辑的文件：

***`Ctrl + W + S`***

我以前使用过`Shift + Alt + L`，但由于某种原因，这不再有效。

其他建议（*`Ctrl+\,S`*和*`Ctrl+[,S`*Ctrl + ` + S）在 VS2015 中对我不起作用。当简单的快捷方式可用时，我不使用 resharper 并且不喜欢使用宏。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-01-28T17:16:06.490

在 Visual Studio 2015 中，使用 ReSharper，我可以按`Shift`+ `Alt`+`L`突出显示解决方案资源管理器中正在编辑的当前文件。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-02-19T15:46:09.467

在 Visual Studio 2010/2012 中，您可以使用此扩展（[链接](http://visualstudiogallery.msdn.microsoft.com/d491911d-97f3-4cf6-87b0-6a2882120acf)）。它在解决方案资源管理器工具栏和代码上下文菜单上添加了同步选项。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-02-18T13:55:32.203

对于 VS2010，我找到了这个宏并为我工作：

```
Imports System
Imports EnvDTE
Imports EnvDTE80
Imports EnvDTE90

Public Module Utilities
    Public Sub TrackProjectItem()
        Dim solution As Solution2 = DTE.Solution
        If Not solution.IsOpen OrElse DTE.ActiveDocument Is Nothing Then Return

        solution.FindProjectItem(DTE.ActiveDocument.FullName).ExpandView()

        Dim FileName As String = DTE.ActiveDocument.FullName

        Dim SolutionExplorerPath As String
        Dim items As EnvDTE.UIHierarchyItems = DTE.ToolWindows.SolutionExplorer.UIHierarchyItems
        Dim item As Object = FindItem(items, FileName, SolutionExplorerPath)

        If item Is Nothing Then
            MsgBox("Couldn't find the item in Solution Explorer.")
            Return
        End If

        DTE.Windows.Item(Constants.vsWindowKindSolutionExplorer).Activate()
        DTE.ActiveWindow.Object.GetItem(SolutionExplorerPath).Select(vsUISelectionType.vsUISelectionTypeSelect)
    End Sub

    Public Function FindItem(ByVal Children As UIHierarchyItems, ByVal FileName As String, ByRef SolutionExplorerPath As String) As Object
        For Each CurrentItem As UIHierarchyItem In Children
            Dim TypeName As String = Microsoft.VisualBasic.Information.TypeName(CurrentItem.Object)
            If TypeName = "ProjectItem" Then
                Dim projectitem As EnvDTE.ProjectItem = CType(CurrentItem.Object, EnvDTE.ProjectItem)
                Dim i As Integer = 1
                While i <= projectitem.FileCount
                    If projectitem.FileNames(i) = FileName Then
                        SolutionExplorerPath = CurrentItem.Name
                        Return CurrentItem
                    End If
                    i = i + 1
                End While
            End If

            Dim ChildItem As UIHierarchyItem = FindItem(CurrentItem.UIHierarchyItems, FileName, SolutionExplorerPath)
            If Not ChildItem Is Nothing Then
                SolutionExplorerPath = CurrentItem.Name + "\" + SolutionExplorerPath
                Return ChildItem
            End If
        Next
    End Function
End Module 
```

原始来源[在这里](http://dvanderboom.wordpress.com/2008/03/21/visual-studio-macro-track-item-in-solution-explorer-on-demand/)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-11-21T14:13:23.957

对于 VS 2017，默认配置是：

> CTRL + [,S

您可以在此处找到完整的快捷方式列表：

[http://visualstudioshortcuts.com/2017/](http://visualstudioshortcuts.com/2017/)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-04-25T03:37:02.153

如果我的问题是正确的，您可以转到工具 -> 选项 -> 项目和解决方案 -> 常规并选中“在解决方案资源管理器中跟踪活动项目”选项。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-05-11T09:33:14.580

在我的键盘上，我不得不按：

**Ctrl** + **`** + **S**

请注意，中间的符号是退格键左侧的键。

使用 Visual Studio 2015。

# bash - 使用连接对日志文件进行排序

> ID：14937285
> 
> 赞同：3
> 
> 时间：2013-02-18T13:18:09.567
> 
> 标签：bash, shell, join, awk

我有一个文件，其中包含按时间戳排序的条目，但其中包含相同时间戳的多个实例，每个实例都有一个单独的主题。我想将具有相同时间戳的所有条目连接到一行。时间戳是第 1 列

输入文件可能会读取

```
Time,Tag,Value  
1,ABC,3  
2,ABC,2.7  
2,DEF,3.4  
3,ABC,2.8  
3,DEF,3.6  
3,GHI,2.99  
3,JKL,3.01  
4,ABC,3.42  
4,DEF,3.62  
4,JKL,3.82 
```

期望的输出就像（选项1）；

```
Time,Tag,Value  
1,ABC,3  
2,ABC,2.7,DEF,3.4  
3,ABC,2.8,DEF,3.6,GHI,2.99,JKL,3.01  
4,ABC,3.42,DEF,3.62,JKL,3.82 
```

更好的是（选项2）；

```
1,ABC,3  
2,ABC|DEF,2.7|3.4  
3,ABC|DEF|GHI|JKL,2.8|3.6|2.99|3.01  
4,ABC|DEF|JKL,3.42|3.62|3.82 
```

我认为我可以通过使用循环编写脚本来获得选项 1。这首先需要我获取“标签”所有值的唯一列表，以确定我需要循环多少次迭代。

但我也假设；

1）即使在 bash 中，这对于长文件也可能很昂贵，并且；
2）很可能有一些更优雅的方式来做到这一点。

纽布问题。所有帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T15:43:41.940

假设您的数据按时间顺序排列，您可以使用这个 awk 解决方案：

*解析.awk*

```
# Use comma as input and output field separators
BEGIN { FS = OFS = "," }

# Print header and skip to next line
NR == 1 { print; next }

# If previous timestamp is the same as current append tag and value
pt == $1 {
  tag = tag "|" $2
  val = val "|" $3
}

# If not the first data line and timestamps are not equal then print
NR != 2 && pt != $1 { print pt, tag, val }

# Save previous timestamp and reset accumulator variables    
pt != $1 {
  pt  = $1
  tag = $2
  val = $3
}

END { print pt, tag, val } 
```

像这样运行它：

```
awk -f parse.awk infile 
```

输出：

```
Time,Tag,Value
1,ABC,3
2,ABC|DEF,2.7|3.4
3,ABC|DEF|GHI|JKL,2.8|3.6|2.99|3.01
4,ABC|DEF|JKL,3.42|3.62|3.82 
```

或作为单行：

```
<infile awk 'BEGIN {FS=OFS=","} NR==1{print;next} pt==$1 {tag=tag"|"$2;val=val"|"$3} NR!=2&&pt!=$1 {print pt,tag,val} pt!=$1 {pt=$1;tag=$2;val=$3} END {print pt,tag,val}' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T13:50:47.923

***新答案：***

我意识到我之前的答案可能难以阅读和理解——尤其是对于初学者。但是，它确实很好地利用了 gawk 的数组排序功能，这对于处理您在问题中谈到的“标签”的唯一值非常有益。然而，在阅读了一些评论之后，我相信我可能误解了你的问题——也许只是轻微的。这是一种不关心“标签”及其值的唯一性的方法。它只是将它们全部连接起来。它也应该是非常可读和可扩展的。像这样运行：

```
awk -f script.awk file 
```

script.awk 的内容：

```
BEGIN {
    FS=OFS=","
}

NR==1 {
    print
    next
}

{
    tag[$1]=(tag[$1] ? tag[$1] "|" : "") $2
    val[$1]=(val[$1] ? val[$1] "|" : "") $3
}

END {
    for (i in tag) {
        print i, tag[i], val[i] | "sort -n"
    }
} 
```

结果：

```
Time,Tag,Value
1,ABC,3
2,ABC|DEF,2.7|3.4
3,ABC|DEF|GHI|JKL,2.8|3.6|2.99|3.01
4,ABC|DEF|JKL,3.42|3.62|3.82 
```

或者，这是单线：

```
awk -F, 'NR==1 { print; next } { tag[$1]=(tag[$1] ? tag[$1] "|" : "") $2; val[$1]=(val[$1] ? val[$1] "|" : "") $3 } END { for (i in tag) print i, tag[i], val[i] | "sort -n" }' OFS=, file 
```

* * *

***以前的答案：***

这是使用`GNU awk`. 像这样运行：

```
awk -f script.awk file 
```

内容`script.awk`：

```
BEGIN {
    FS=OFS=","
}

NR==1 {
    print
    next
}

{
    a[$1][$2]=$3
}

END {

    for (i in a) {
        b[x++] = i
    }

    n = asort(b)

    for (j=1;j<=n;j++) {

        m = asorti(a[b[j]],c)

        for (k=1;k<=m;k++) {

            s = (s ? s "|" : "") c[k]
            r = (r ? r "|" : "") a[b[j]][c[k]]
        }

        print b[j], s, r
        s = r = ""
    }
} 
```

结果：

```
Time,Tag,Value
1,ABC,3
2,ABC|DEF,2.7|3.4
3,ABC|DEF|GHI|JKL,2.8|3.6|2.99|3.01
4,ABC|DEF|JKL,3.42|3.62|3.82 
```

或者，这是单线：

```
awk -F, 'NR==1 { print; next } { a[$1][$2]=$3 } END { for (i in a) b[x++] = i; n = asort(b); for (j=1;j<=n;j++) { m = asorti(a[b[j]],c); for (k=1;k<=m;k++) { s = (s ? s "|" : "") c[k]; r = (r ? r "|" : "") a[b[j]][c[k]] } print b[j], s, r; s = r = "" } }' OFS=, file 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T13:32:13.917

这会起作用：

```
awk -F, '{if($1 in a){ split(a[$1],t,","); a[$1]=t[1]"|"$2","t[2]"|"$3
}else a[$1]=$2","$3;}END{asort(a);for(x in a)print x","a[x]}' file|sort -n 
```

用你的例子：

```
kent$  awk -F, '{if($1 in a){split(a[$1],t,","); a[$1]=t[1]"|"$2","t[2]"|"$3
}else a[$1]=$2","$3;}END{asort(a);for(x in a)print x","a[x]}' file|sort -n                                                                                                  
1,ABC,3
2,ABC|DEF,2.7|3.4
3,ABC|DEF|GHI|JKL,2.8|3.6|2.99|3.01
4,ABC|DEF|JKL,3.42|3.62|3.82 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T14:01:27.300

If this is an operation that you would like to repeat often, I would opt for a utility script written in a more *'complete'* scripting language. You can then call the script within your own bash script or use it in the command line as and when needed.

Here's a Python example:

```
#!/usr/bin/env python
# --- merge_groups.py ----
import fileinput, operator, itertools
lines = (line.strip() for line in fileinput.input())
data = (line.split(",") for line in lines if line)
for key, group in itertools.groupby(data, operator.itemgetter(0)):
  _, label, value =  zip(*group)
  print "%s,%s,%s" % (key, "|".join(label), "|".join(value)) 
```

Note that the script assumes that the entries with the same timestamp are already grouped together.

You can use the script to process existing data files or pipe data directly to it, e.g:

```
[me@home]$ ./merge_groups.py data.txt  # parse existing data file
Time,Tag,Value
1,ABC,3
2,ABC|DEF,2.7|3.4
3,ABC|DEF|GHI|JKL,2.8|3.6|2.99|3.01
4,ABC|DEF|JKL,3.42|3.62|3.82

[me@home]$ cat data.txt | ./merge_groups.py  # post-process command output
Time,Tag,Value
1,ABC,3
2,ABC|DEF,2.7|3.4
3,ABC|DEF|GHI|JKL,2.8|3.6|2.99|3.01
4,ABC|DEF|JKL,3.42|3.62|3.82 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-18T14:21:35.050

嗯，您确实说过*“所有帮助”，*那么这会包括 Ruby 解决方案吗？

```
require 'csv'

puts(CSV.read('f.csv').group_by(&:first).map do |k, v|
  t = v.transpose
  [k, t[1].join('|'), t[2].join('|')].join(',')
end.drop(1)) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-18T21:56:00.633

Perl 没有代表。

```
use strict;
my $skip_header = <>;
my %d;
while(<>) {
    s/\s+$//;
    my ($no, $k, $v )  = split ",";
    push @{$d{int($no)}}, [ $k,  $v ];
}
END {
    foreach my $no (sort { $a <=> $b } keys %d  )  {
        print $no, ",";
        print join("|", map { $_->[0] } @{$d{$no}});
        print ",";
        print join("|", map { $_->[1] } @{$d{$no}});
        print "\n";
    }
} 
```

给出：

```
1,ABC,3
2,ABC|DEF,2.7|3.4
3,ABC|DEF|GHI|JKL,2.8|3.6|2.99|3.01
4,ABC|DEF|JKL,3.42|3.62|3.82 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-19T08:16:53.333

## 简称：`sed`方式

```
sed -ne ':a;$!N;/^\([0-9]\+\),.*\n\1,/s/\n[0-9]*//;ta;P;D'
Time,Tag,Value
1,ABC,3
2,ABC,2.7,DEF,3.4
3,ABC,2.8,DEF,3.6,GHI,2.99,JKL,3.01
4,ABC,3.42,DEF,3.62,JKL,3.82 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-18T22:04:32.893

对于第一个选项，您可以尝试：

```
awk -F, 'p x!=$1{if(p x)print s; p=s=$1} {sub($1,x); s=s $0} END{print s}' file 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-02-19T07:02:25.560

第一：

```
> awk -F, '{a[$1]=a[$1]","$2","$3}END{for(i in a)print i","substr(a[i],2)}' temp | sort
1,ABC,3
2,ABC,2.7,DEF,3.4
3,ABC,2.8,DEF,3.6,GHI,2.99,JKL,3.01
4,ABC,3.42,DEF,3.62,JKL,3.82 
```

第二个：

```
> awk -F, '{a[$1]=a[$1]"|"$2;b[$1]=b[$1]"|"$3}END{for(i in a)print i","substr(a[i],2)","substr(b[i],2)}' temp | sort
1,ABC,3
2,ABC|DEF,2.7|3.4
3,ABC|DEF|GHI|JKL,2.8|3.6|2.99|3.01
4,ABC|DEF|JKL,3.42|3.62|3.82 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-02-18T13:35:39.260

`bash`可能是错误的工具。尝试 Python：

```
import fileinput
import sys

oldTime = None
for line in fileinput.input():
    line = line.strip()
    pos = line.find(',')
    time = line[0:pos]
    if oldTime == time:
        sys.stdout.write(',')
        sys.stdout.write(line[pos+1:])
    else:
        if oldTime is not None:
            sys.stdout.write('\n')
        sys.stdout.write(line)

    oldTime = time

sys.stdout.write('\n') 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-02-18T14:10:34.170

@AaronDigulla 和 @Kent 有一些很好的解决方案，但如果你有/想要使用 bash，这里有一个：

```
for ts in `cat inputfile | cut --delimiter="," --fields=1 | uniq`
do
  p1="";
  p2="";
  for line in `grep "^${ts}," inputfile | cut --delimiter="," --fields=2-`
  do
    f1=`echo ${line} | cut --delimiter="," --fields=1`;
    f2=`echo ${line} | cut --delimiter="," --fields=2`;
    p1=${p1}"|"$f1;
    p2=${p2}"|"$f2;
  done
  echo ${ts}","${p1#?}","${p2#?};
done 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-02-18T14:10:45.523

以防万一您需要更多 awk 解决方案！

```
function read() {
  split($0, buf, ",")
}

function write() {
  for (i = 1; i < length(buf); i++) {
    printf "%s,", buf[i]
  }
  print buf[length(buf)]
}

BEGIN {
  FS = ","
}

NR == 1 {
  print
  next
}

NR == 2 {
  read()
  next
}

{
  if ($1 != time) { # new time                                                                                                                                                                   
    time = $1
    write()
    read()
  } else { # repeated time                                                                                                                                                                       
    for (i = 2; i <= NF; i++) {
      buf[i] = buf[i] "|" $i
    }
  }
}

END {
  write()
} 
```

我不太擅长 awk，所以我不得不强调可读性！

# iphone - 逐渐平滑地停止 UIImageView 动画

> ID：14937287
> 
> 赞同：8
> 
> 时间：2013-02-18T13:18:20.140
> 
> 标签：iphone, ios, objective-c, uiimageview

我有以下简单的 UIImageView 动画：

```
-(void) setupTheAnimation {
  self.imgView.animationImages = imagesArr;
  [self.imgView setAnimationRepeatCount:-1];
  self.imgView.animationDuration =0.9;
  [self.imgView startAnimating];
  [self performSelector:@selector(stopTheAnimation) withObject:nil afterDelay:4.0];
}

-(void) stopTheAnimation {
  [self.imgView stopAnimating];
} 
```

但是当动画停止时我遇到了一个问题我不知道它停止的最后一帧是什么！所以动画的结局一点也不流畅。

所以我需要：

**1）**知道动画结束的最后一帧是什么，所以我将它设置为动画的最后一个图像，这会导致平滑停止。

**2）**逐渐停止这个动画，即改变它停止前的持续时间，先减慢它然后停止它。

[这是示例项目的链接](http://dl.dropbox.com/u/57066689/test/project38.zip)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T12:26:57.630

我知道您的原始实现使用`animationImages`，但我不知道`animationImages` *直接*使用连续可变持续时间的方法。但是，这是一个非常简单的功能，可以自己实现。如果这样做，则可以在数组中的图像之间编写动态持续时间值。

在下面的代码中，我替换为自定义步进函数，并在请求停止**后**`animationImages`动态调整持续时间。请注意，这与指定硬结束时间的原始代码略有不同。此代码指定齿轮旋转何时**开始**减速。

 ****如果你真的有一个硬动画周期，你可以调整调用来`stopTheAnimation`考虑你选择的减速因子（我只是在减速期间将持续时间每步增加 10%，直到步数低于给定的阈值）：

```
// my animation stops when the step duration reaches this value:
#define STOP_THRESHOLD_SECONDS 0.1f
#define NUM_IMAGES 35

@implementation ViewController
{
    NSMutableArray *imagesArr;
    int currentImage;
    BOOL stopRequested;
    NSTimeInterval duration;
}

-(void) setupTheAnimation {

    stopRequested = NO;
    currentImage = 0;
    duration = 0.9f / NUM_IMAGES;
    [self stepThroughImages];

    [self performSelector:@selector(stopTheAnimation) withObject:nil afterDelay:4.0];
}

- (void) stepThroughImages {

    self.imgView.image = [imagesArr objectAtIndex: currentImage];

    if (currentImage == NUM_IMAGES - 1) {
        currentImage = 0;
    } else {
        currentImage++;
    }

    if (stopRequested && duration < STOP_THRESHOLD_SECONDS) {
        // we're slowing down gradually
        duration *= 1.1f;
        dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(duration * NSEC_PER_SEC));
        dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
            [self stepThroughImages];
        });
    } else if (!stopRequested) {
        dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(duration * NSEC_PER_SEC));
        dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
            [self stepThroughImages];
        });
    }
}

-(void) stopTheAnimation {
    stopRequested = YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T17:23:44.310

你的方法有一个问题：每秒的帧数不是恒定的（你减慢了时间）。

***你确定你需要一个帧动画吗？***

如果您的动画可以通过几何（仿射）变换来实现，那么它会更好。

如果您的动画可以通过以下组合完成：

*   翻译
*   回转
*   缩放

那么这是一个仿射变换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T16:19:13.497

我只通过使用块知道这一点，但这是你如何做到的：

```
 [UIImageView animateWithDuration:0.9f delay:0.0f options:UIViewAnimationOptionCurveEaseOut animations:^{

                // animate what you want
                self.imgView.transform = CGAffineTransformMakeScale(1.0f, 1.0f);

            } completion:^(BOOL finished){

                // animation is completed
                self.imgView.image = image;

            }]; 
```

'UIViewAnimationOptionCurveEaseOut' 选项应该会逐渐停止你的动画。您可以尝试使用其他选项来亲自查看效果。****

# spring - mvn mybatis java.io.FileNotFoundException: 类路径资源

> ID：14937289
> 
> 赞同：0
> 
> 时间：2013-02-18T13:18:21.470
> 
> 标签：spring, maven, mybatis

我正在尝试使用 MyBatis 和 Spring 构建我的第一个 mvn 项目。

```
<dependency>
        <groupId>org.mybatis</groupId>
    <artifactId>mybatis</artifactId>
    <version>3.0.5</version>
</dependency>
<dependency>
    <groupId>org.mybatis</groupId>
    <artifactId>mybatis-spring</artifactId>
    <version>1.0.1</version>
</dependency> 
```

以下是项目结构：

```
my-project
|
|_ conf --> spring-conf.xml
|
|_ main 
    |
    |_ java
    |
    |_ resources
           |
           |_ persistence --> mybatis.xml 
```

当我运行一个 junit 到它们与数据库的连接时，它给出了以下内容：

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'databaseManager' defined in file [O:\WORKSPACE\my-project\conf\spring-conf.xml]: 
Cannot resolve reference to bean 'databaseManagerTarget' while setting bean property 'target'; nested exception is org.springframework.beans.factory.BeanCreationException: 
Error creating bean with name 'databaseManagerTarget' defined in file [O:\WORKSPACE\my-project\conf\spring-conf.xml]: Cannot resolve reference to bean 'contentRepositoryDao' 
while setting bean property 'contentRepositoryDao'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'contentRepositoryDao' 
defined in file [O:\WORKSPACE\my-project\conf\spring-conf.xml]: Cannot resolve reference to bean 'sqlSessionFactory' while setting bean property 'sqlSessionFactory'; 
nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sqlSessionFactory' defined in file [O:\WORKSPACE\my-project\conf\spring-conf.xml]:
Invocation of init method failed; nested exception is java.io.FileNotFoundException: class path resource [resources/persistence/mybatis.xml] cannot be opened because it does not exist
at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328)
at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1325)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1086)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
at it.ereadis.contentrepository.DatabaseManagerUnitTest.<init>(DatabaseManagerUnitTest.java:26)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
at java.lang.reflect.Constructor.newInstance(Unknown Source)
at org.junit.runners.BlockJUnit4ClassRunner.createTest(BlockJUnit4ClassRunner.java:187)
at org.junit.runners.BlockJUnit4ClassRunner$1.runReflectiveCall(BlockJUnit4ClassRunner.java:236)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.junit.runners.BlockJUnit4ClassRunner.methodBlock(BlockJUnit4ClassRunner.java:233)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

对 mybatis.xml 的引用在 spring-conf.xml 中定义如下

```
 <!-- SESSION FACTORY -->
<bean id="sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="configLocation" value="classpath:resources/persistence/mybatis.xml" />  
</bean> 
```

任何想法，请帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:27:27.730

似乎您在测试运行期间错过了类路径中的 mybatis.xml。尝试添加到 pom（我不确定确切的路径）：

```
<build>
    <testResources>
        <testResource>
            <directory>resources/persistence/mybatis.xml</directory>
        </testResource>
   </testResources>
</build> 
```

# java - 骆驼读取文件内容

> ID：14937291
> 
> 赞同：6
> 
> 时间：2013-02-18T13:18:32.107
> 
> 标签：java, file, apache-camel

有没有一种方法（api函数）可以在不编写转换器或任何java代码的情况下读取骆驼文件的全部内容（或逐行）？

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-18T13:35:05.727

找到了，打扰各位了：

```
from("file://inputdir/").convertBodyTo(String.class) 
```

# ios - 启动 iOS 应用程序时不显示最后一个屏幕

> ID：14937292
> 
> 赞同：2
> 
> 时间：2013-02-18T13:18:38.007
> 
> 标签：ios, uiapplicationdelegate, suspend, splash-screen, relaunch

我的应用程序有一个功能，启用后，每当应用程序启动时都会显示一个“诱饵”屏幕。然后，用户必须点击“秘密敲门”来关闭诱饵屏幕并查看密码屏幕。

问题是，当应用程序启动时，在显示诱饵屏幕之前的一瞬间，会显示在应用程序暂停之前处于活动状态的屏幕。它只显示了一秒钟，但根据用户之前的操作，它可能会很尴尬。无论如何，这个小“故障”实际上破坏了诱饵屏幕的全部目的。

该应用程序是免费下载的，因此如果您有 iOS 设备，请下载该应用程序并在选项屏幕上激活诱饵功能，看看我在这里想说什么。

最后，对于这个问题......

有没有办法让应用程序在启动时不显示最后一个活动屏幕？我希望诱饵屏幕成为应用程序启动时出现的第一件事……没有先前内容的那一瞬间。

我知道我可以在 plist 文件上将**UIApplicationExitsOnSuspend**设置为 YES 以解决该问题。但这将迫使应用程序退出而不是暂停。我真的很想保持挂起功能正常工作。

希望我说得足够清楚...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:36:07.913

你应该实施

```
- (void)applicationDidEnterBackground:(UIApplication *)application 
```

在此方法中，您将做任何您需要在最后一个活动屏幕上显示诱饵屏幕的操作。

有关这方面的更多信息，请查看[文档](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIApplicationDelegate/applicationDidEnterBackground%3a)

# ios - UIScrollView 上的浮动 UIButton

> ID：14937294
> 
> 赞同：3
> 
> 时间：2013-02-18T13:18:48.350
> 
> 标签：ios, objective-c, cocoa-touch, uiscrollview, uibutton

我想在我的应用程序中实现以下行为：我的`UIScrollView`视图上有一个可自定义的视图，`contentSize`我想`UIButton`在它的左下角放置一个在我滚动视图时留在那里我希望按钮准确地保持在原来的位置，滚动视图的内容同时滚动。

最好的方法是什么？谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-18T14:10:26.970

你使用界面生成器/故事板吗？如果是这样，那么只需添加滚动视图。然后添加按钮，但不要将按钮添加为滚动视图的子视图。只需将其添加为兄弟姐妹。但请确保滚动视图首先出现。层次结构应如下所示：

```
\--View  (The underlaying UIView
    \--scrollView (The UIScrollView)
        \-- anyView (Any subviews of the scroll view come here
    \--button (The UIButton) 
```

通过这样做，按钮独立于滚动视图、其滚动或内容大小。它可以很好地放置在滚动视图上。

编辑：一个快速的（未检查语法等）作为编程解决方案的示例。

```
UIScrollView *myScroller = [[UIScrollView alloc] initWith...];
UIImageView *someImage = [[UIImageView alloc] initWith...]; //Just a sample subivew. 
UILabel *someLabel = [[UILabel alloc] initWith...]; //Another sample.
UIButton *myButton [[UIButton alloc] initWith...]; 

[self.view addSubView:myScroller];
[myScroller addSubView:someImage];
[self.view addSubView:myButton]; //it is important, that myScroller was added first
[myScroller addSubView:someLable]; //the sequence of addding subviews to the content does not matter much. 
```

（您可能希望在滚动视图中有一个内容视图，然后它是所有子视图的容器。但这并不影响我试图解释的内容。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T13:23:54.613

您可以在视图上添加第一个按钮，然后在视图上滚动视图，请在 xib 中检查该按钮不应该在滚动视图中试试这个我认为它对你有用。

# extjs - Extjs rowEditing rownumberer，rownumbers总是0

> ID：14937300
> 
> 赞同：1
> 
> 时间：2013-02-18T13:19:11.450
> 
> 标签：extjs, editing, gridpanel, row-number

我使用带有 rowediting 插件的 extjs 网格面板，并且上面有 rownumberer 列。

通过一个按钮，我在网格顶部添加了一个新行。在编辑模式下，行号是正确的。但是，当我退出编辑模式（完成或取消）时，所有的行号都变为 0。

我找不到类似的问题。添加新行后，我尝试刷新网格，但行号仍然为 0。

你能帮我找出问题所在吗？

![未经编辑](../Images/a7a385380934b02aae718a79831617d7.png)

![带编辑](../Images/878118951f7e70e0715f5e3dfa7ad33f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T07:45:10.047

我再次复制了渲染器功能，现在它运行良好。

```
 {
                xtype: 'rownumberer',
                renderer: function (v, p, record, rowIndex) {
                    if (this.rowspan) {
                        p.cellAttr = 'rowspan="' + this.rowspan + '"';
                    }
                    return rowIndex + 1;
                }
            }, 
```

# c# - 正则表达式，其中 * 匹配除反斜杠和换行符之外的所有字符

> ID：14937304
> 
> 赞同：0
> 
> 时间：2013-02-18T13:19:24.663
> 
> 标签：c#, regex, git, gitignore

这是我要实现的

链接到 gitignore 文档：[gitignore 手册页](http://www.kernel.org/pub/software/scm/git/docs/gitignore.html)

> 否则，git 将模式视为适合 fnmatch(3) 使用的带有 FNM_PATHNAME 标志的 shell glob：模式中的通配符将不匹配路径名中的 /。例如，“Documentation/ *.html”*匹配“Documentation/git.html”，但不匹配“Documentation/ppc/ppc.html”或“tools/perf/Documentation/perf.html”。

我确实在代码中尝试过

```
patternEscapedForStar = patternEscaped.Replace(@"\*", "[^\\]*"); 
```

上一行是改变正则表达式中 * 的行为，以匹配文件或文件夹路径中除“\”之外的所有字符。但是，它似乎与预期的不匹配。由于我使用的是 gitignore 模式，因此在上面提到的替换之前，我确实将 blob 转换为正则表达式。

顺便说一句，我涉足正则表达式，并且在任何方面都不是专家。谢谢你的帮助。

编辑：

这是完整的代码

```
public static bool PatternMatch(string str, string pattern, string type)
{
string patternEscaped = string.Empty;
string patternEscapedForStar = string.Empty;                                              
string patternEscapedForQuestionMark = string.Empty;
bool returnValue = false;

try
{
    patternEscaped = Regex.Escape(pattern);

    patternEscapedForStar = patternEscaped.Replace(@"\*", ".*");
    if (type == "P")
    {
        patternEscapedForStar = patternEscapedForStar.Replace(@".*", "[^\\]*");
    }

    patternEscapedForQuestionMark = patternEscapedForStar.Replace(@"\?", ".");

    returnValue = new Regex(patternEscapedForQuestionMark, RegexOptions.IgnoreCase | RegexOptions.Singleline).IsMatch(str);

 }
 catch (Exception ex)
 {
     Log.LogException(ex);
 }
    return returnValue;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:13:56.930

您面临的问题是因为`"[^\\]*"`. 由于`\`用于描述转义字符，`"\\"`解析为文字字符，这是您将看到`\`的唯一字符。`Regex`

那就是一切都爆炸的地方；由于`\`也是 的一个特殊字符`Regex`，所以我们遇到了问题，那`Regex`真的不知道该怎么处理`@"[^\]*"`。

长话短说：正确答案是

```
patternEscapedForStar = patternEscaped.Replace(@"\*", @"[^\\]*"); 
```

或者

```
patternEscapedForStar = patternEscaped.Replace(@"\*", "[^\\\\]*"); 
```

# php - Kohana：我想使用 Auth 模型使用普通角色用户登录，我怎样才能使用活动记录来实现呢？

> ID：14937305
> 
> 赞同：0
> 
> 时间：2013-02-18T13:19:27.980
> 
> 标签：php, authentication, login, kohana

我正在使用 Kohana 活动记录，并使用它的类添加用户名及其在用户和角色用户表中的角色，如下所述：

在 DB 中手动添加这些值：

```
mysql> select *from users;
+----+-------------+----------+----------+--------+------------+
| id | email       | username | password | logins | last_login |
+----+-------------+----------+----------+--------+------------+
|  1 | abc@abc.com | Tito     | password |    123 |       1234 |
+----+-------------+----------+----------+--------+------------+
1 row in set (0.03 sec)

mysql> select * from roles_users;
+---------+---------+
| user_id | role_id |
+---------+---------+
|       1 |       1 |
+---------+---------+
1 row in set (0.03 sec)

// This table and its data are there from default database
mysql> select * from roles;
+----+-------+------------------------------------------------------+
| id | name  | description                                          |
+----+-------+------------------------------------------------------+
|  1 | login | Login privileges, granted after account confirmation |
|  2 | admin | Administrative user, has access to everything.       |
+----+-------+------------------------------------------------------+
2 rows in set (0.01 sec) 
```

现在，当我使用下面提到的代码登录时，它返回 false。

```
$post =  Auth::instance()->login("Tito", "password"); 
```

你能指导我需要做什么吗？

身份验证、数据库、ORM 模块也未注释。

auth.php 文件上下文来自 application/config/auth.php：

```
return array(

'driver'       => 'file',
'hash_method'  => 'sha256',
'hash_key'     => 'Somebiglonghaskeyofmixedcharacters102345567709',
'lifetime'     => 1209600,
'session_type' => Session::$default,
'session_key'  => 'auth_user',

// Username/password combinations for the Auth File driver
'users' => array(
    // 'admin' => 'b3154acf3a344170077d11bdb5fff31532f679a1919e716a02',
),

); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:24:09.440

您是否手动在表格中添加密码？您在 table 中添加 pass 之前是否使用了 $auth->hash($password) ？当您尝试登录 kohana 登录方法时，请创建一个散列密码。因此，您无法登录（密码！=哈希（密码））

```
protected function _login($user, $password, $remember)
{

     ......

    if (is_string($password))
    {
        // Create a hashed password
        $password = $this->hash($password);
    } 
     ......
} 
```

# android - android片段无法设置可见性relativelayout

> ID：14937306
> 
> 赞同：0
> 
> 时间：2013-02-18T13:19:32.870
> 
> 标签：android, android-layout

我使用片段，并且在活动中我想在触摸编辑文本时显示/隐藏一个相对布局（最后一个：xK1）：

```
<?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:id="@+id/xMLayout"
     android:layout_width="match_parent"
     android:layout_height="match_parent"
     android:background="@drawable/linearborder" >

     <RelativeLayout
         xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/xsubLayout"
        android:keepScreenOn="true" 
        android:orientation="vertical"
        android:layout_below="@+id/RL_boutton"
        android:layout_width="fill_parent" 
        android:layout_height="fill_parent" >
         <EditText
             android:id="@+id/editText_code_d"
             android:layout_width="304dp"
             android:layout_height="wrap_content"
             android:layout_below="@+id/RL_boutton"
             android:layout_centerHorizontal="true"
             android:background="@drawable/plaquehaut"
             android:ems="4"
             android:gravity="center_vertical|center_horizontal"
             android:inputType="number"
             android:maxLength="4"
             android:text="123"
             android:textSize="80sp" 
             android:focusableInTouchMode="true"
             />

         <EditText
             android:id="@+id/editText_code_m"
             android:layout_width="304dp"
             android:layout_height="wrap_content"
             android:layout_alignLeft="@+id/editText_code_d"
             android:layout_below="@+id/editText_code_d"
             android:background="@drawable/plaquebas"
             android:ems="4"
             android:gravity="center_vertical|center_horizontal"
             android:inputType="number"
             android:maxLength="4"
             android:text="1337"
             android:textSize="80sp" 
             />
    </RelativeLayout>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="wrap_content" 
                android:id="@+id/xK1"
        android:layout_height="wrap_content" 
                android:orientation="vertical"
        android:visibility="gone">
        <include android:id="@+id/xKeyBoard" 
                    layout="@layout/keyboard">
                </include>
    </RelativeLayout>
 </RelativeLayout> 
```

这是代码：

```
 public View onCreateView(LayoutInflater inflater, ViewGroup container,Bundle savedInstanceState) 
    {
        View view = inflater.inflate(R.layout.fragment_rsslist_overview,container, false);
                try {
                     mLayout =  (RelativeLayout) view.findViewById(R.id.xK1);
                     mKLayout = (RelativeLayout) view.findViewById(R.id.xKeyBoard);

                } catch (Exception e) {
                    Log.w(getClass().getName(), e.toString());
                }
        mEt = (EditText) view.findViewById(R.id.editText_code_d);
        mEt.setOnClickListener(new View.OnClickListener() 
        {
            @Override
            public void onClick(View v) 
            {
                edittext_onClick(v);
            }
        });     
        mEt1 = (EditText) view.findViewById(R.id.editText_code_m);
        mEt1.setOnClickListener(new View.OnClickListener() 
        {
            @Override
            public void onClick(View v) 
            {
                edittext_onClick(v);
            }
        }); 
        mEt.setOnTouchListener(this);
        return view;
    }

    public boolean onTouch(View v, MotionEvent event) {
            enableKeyboard();
            return true;
    }

    private void enableKeyboard() {
        mLayout.setVisibility(RelativeLayout.VISIBLE);
        mKLayout.setVisibility(RelativeLayout.VISIBLE);

    } 
```

程序在这里运行时活动停止：mLayout.setVisibility(RelativeLayout.VISIBLE);

我该如何解决这个问题？

thx，提前。

日志猫：

```
02-18 12:06:27.364: I/dalvikvm(1044): Wrote stack traces to '/data/anr/traces.txt'
02-18 12:06:28.963: D/AndroidRuntime(1044): Shutting down VM
02-18 12:06:28.963: W/dalvikvm(1044): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
02-18 12:06:29.104: E/AndroidRuntime(1044): FATAL EXCEPTION: main
02-18 12:06:29.104: E/AndroidRuntime(1044): java.lang.NullPointerException
02-18 12:06:29.104: E/AndroidRuntime(1044):     at fr.app.tutorielfragment.MyListFragment.enableKeyboard(MyListFragment.java:363)
02-18 12:06:29.104: E/AndroidRuntime(1044):     at fr.app.tutorielfragment.MyListFragment.onTouch(MyListFragment.java:240)
02-18 12:06:29.104: E/AndroidRuntime(1044):     at android.view.View.dispatchTouchEvent(View.java:5536)
02-18 12:06:29.104: E/AndroidRuntime(1044):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
02-18 12:06:29.104: E/AndroidRuntime(1044):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1684)
02-18 12:06:29.104: E/AndroidRuntime(1044):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
02-18 12:06:29.104: E/AndroidRuntime(1044):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1684)
02-18 12:06:29.104: E/AndroidRuntime(1044):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
02-18 12:06:29.104: E/AndroidRuntime(1044):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1684)
02-18 12:06:29.104: E/AndroidRuntime(1044):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
02-18 12:06:29.104: E/AndroidRuntime(1044):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1684)
02-18 12:06:29.104: E/AndroidRuntime(1044):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
02-18 12:06:29.104: E/AndroidRuntime(1044):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1684)
02-18 12:06:29.104: E/AndroidRuntime(1044):     at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1912)
02-18 12:06:29.104: E/AndroidRuntime(1044):     at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1371)
02-18 12:06:29.104: E/AndroidRuntime(1044):     at android.app.Activity.dispatchTouchEvent(Activity.java:2364)
02-18 12:06:29.104: E/AndroidRuntime(1044):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1860)
02-18 12:06:29.104: E/AndroidRuntime(1044):     at android.view.View.dispatchPointerEvent(View.java:5721)
02-18 12:06:29.104: E/AndroidRuntime(1044):     at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:2890)
02-18 12:06:29.104: E/AndroidRuntime(1044):     at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2466)
02-18 12:06:29.104: E/AndroidRuntime(1044):     at android.view.ViewRootImpl.processInputEvents(ViewRootImpl.java:845)
02-18 12:06:29.104: E/AndroidRuntime(1044):     at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2475)
02-18 12:06:29.104: E/AndroidRuntime(1044):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-18 12:06:29.104: E/AndroidRuntime(1044):     at android.os.Looper.loop(Looper.java:137)
02-18 12:06:29.104: E/AndroidRuntime(1044):     at android.app.ActivityThread.main(ActivityThread.java:4424)
02-18 12:06:29.104: E/AndroidRuntime(1044):     at java.lang.reflect.Method.invokeNative(Native Method)
02-18 12:06:29.104: E/AndroidRuntime(1044):     at java.lang.reflect.Method.invoke(Method.java:511)
02-18 12:06:29.104: E/AndroidRuntime(1044):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
02-18 12:06:29.104: E/AndroidRuntime(1044):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
02-18 12:06:29.104: E/AndroidRuntime(1044):     at dalvik.system.NativeStart.main(Native Method)
02-18 12:06:29.693: I/dalvikvm(1044): threadid=3: reacting to signal 3
02-18 12:06:29.726: I/dalvikvm(1044): Wrote stack traces to '/data/anr/traces.txt'
02-18 12:06:34.654: I/Process(1044): Sending signal. PID: 1044 SIG: 9 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T15:58:45.740

您应该只为顶视图定义以下内容： xmlns:android="http://schemas.android.com/apk/res/android" 我认为这就是为什么您会收到 nullpointerexception 的原因，因为 layoutinflater 找不到正确的视图通过层次结构。

# php - unserialize() 偏移量错误

> ID：14937307
> 
> 赞同：3
> 
> 时间：2013-02-18T13:19:34.420
> 
> 标签：php, serialization, deserialization

**错误：**

```
Notice:  unserialize() [function.unserialize]: Error at offset 0 of 126 bytes in C:\wamp\www\web_service\client.php on line 224 
```

错误的

**代码 1：**

```
$data = array('table'=>'users', 'operation'=>'select', 'uid'=>'yoyo');

$data = serialize($data);
print_r(unserialize($data)); 
```

**代码 2：**

```
$data = array('table'=>'users', 'operation'=>'select', 'uid'=>'yoyo');

$data = base64_encode(serialize($data));
print_r(unserialize(base64_decode($data))); 
```

以上两者都给出了相同的错误。知道为什么吗？

谢谢

看着这些；

[一](http://davidwalsh.name/php-serialize-unserialize-issues)，[二](https://stackoverflow.com/questions/10152904/unserialize-function-unserialize-error-at-offset)，……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T13:40:14.517

```
$data = array('table'=>'users', 'operation'=>'select', 'uid'=>'yoyo');

$data = json_encode($data);

// Use either as array
print_r((array) json_decode($data));

//Or Json
echo $data; 
```

显然 JSON[是更好的](https://stackoverflow.com/questions/804045/preferred-method-to-store-php-arrays-json-encode-vs-serialize)解决方案，所以我改用它。感谢您的贡献。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-08T10:51:06.983

反序列化的这种问题可能与数据库连接编码有关。

如果序列化的字符串以不同的编码保存，反序列化函数的计数器中的字节数将不匹配......

# java - 类类型作为Java中的字段

> ID：14937308
> 
> 赞同：3
> 
> 时间：2013-02-18T13:19:34.823
> 
> 标签：java, class

我的问题可能看起来很奇怪，我不知道是否可能，但确实如此：

我有几个类（UseCases）都实现了一个接口 => `IUseCase`。

```
UseCase1 implementing IUseCase
UseCase2 implementing IUseCase
etc. 
```

我还有另一个类“ `UseCaseContext`”，它应该包含一些关于几个用例的信息。

我的目标是拥有**一个**`UseCaseContext`per实例`UseCase`。为此，我需要 UseCaseContext 中的一个**字段**来告诉我此上下文是否与 UseCase1 或 UseCase2 等相关。

因此，除了将 UseCase 的实例存储在字段中之外，还有另一种方法来确定`UseCase`my是否与哪个`UseCaseContext`相关？

我知道这可能会令人困惑，所以请告诉我您是否需要我另外解释:)

谢谢 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T13:23:34.387

正如评论中已经指出的那样，只需将类引用存储在您的`UseCaseContext`：

```
public class UseCaseContext 
{
  private Class<? extends IUseCase> useCaseClass;
  ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T13:22:39.380

```
IUseCase some_instance = new UseCaseX();
String className = some_instance.getClass().getSimpleName() 
```

这会将 UseCaseX 作为字符串返回。那是你要的吗？

PS 如果您不想要类的字符串名称，您可以使用类对象 (Class clazz = some_instance.getClass()) 来区分一个 UseCase 和另一个。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-18T13:24:41.353

尝试这个：

```
 public class UseCaseContext {

     private Class useCaseClass;

     public UseCaseContext(Class useCaseClass) {
        this.useCaseClass = useCaseClass;
     }
 } 
```

然后你可以简单地调用：`new UseCaseContext(instance.getClass())`。

# java - 使用java显示标签

> ID：14937314
> 
> 赞同：0
> 
> 时间：2013-02-18T13:19:49.350
> 
> 标签：java, jstl, displaytag

如何在java中使用displaytag对列进行排序我的代码如下：

```
<display:column property="bulk" title="User Name" sortable="false"/>
<display:column   title="File Name" >
    <c:url value="../BulkHistoryDetails" var="url">
    <c:param name="ID" value="${row.bulk}"/>
    <c:param name="FileName" value="${row.filename}"/>
    </c:url>
    <a href=${url}>${row.filename}</a> 
   </display:column> 
```

我想对文件名列进行排序，该列的值类似于 PJ00xxxx Data for Usage 32013-02-18_04-50-47.xls，如果单击文件名，它将转到其他 jsp。因为它已经有hiperlink，所以我无法使用sorttabe = true，就像我点击文件名标题一样，它会转到另一个没有排序的jsp。请告知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:06:21.690

您可能应该发布以 . 开头的整个显示标记代码`<display:table name="fileList">`。

听起来您希望列标题在单击时用作排序按钮，并且该列中的数据用作超链接。我不明白为什么这应该是一个问题。当您将 sortabler="true" 属性添加到`"File Name"`列时，它会将列标题变成超链接？真的吗？它链接到什么？

[如果列标题确实以某种方式变成了超链接，那么您可以尝试使用表装饰器](http://www.displaytag.org/1.2/tut_decorators.html)或`href`属性从行列数据创建链接，两者都在此处描述：[显示标签文档](http://www.displaytag.org/1.2/tut_links.html)。我认为这两种方法中的任何一种都会产生比您现在拥有的更清洁的解决方案。

# php - 贝宝捐赠按钮

> ID：14937317
> 
> 赞同：0
> 
> 时间：2013-02-18T13:20:17.743
> 
> 标签：php, web-applications, paypal

如果我在我的网站上使用[贝宝捐赠按钮](https://www.paypal.com/in/cgi-bin/webscr?cmd=_donate-intro-outside)，我的网站会收到贝宝对成功/失败交易的任何响应。

付款完成后，是否可以将用户重定向回我的网站主页？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T23:53:01.300

您可以将贝宝关于新捐款的所有回复从第 1 步发送到您的电子邮件

**请按照以下步骤操作，您将实现目标：**

**1-转到[贝宝捐赠按钮](https://www.paypal.com/in/cgi-bin/webscr?cmd=_donate-intro-outside)**

![在此处输入图像描述](../Images/12d0df1dc040d3de3963ed5074b9b566.png)

**2- 通过填写所需的详细信息完成第 1 步，然后转到第 3 步：**

![在此处输入图像描述](../Images/5098edfa1d54df05279977965b124466.png)

**3-检查完成结帐后将客户带到此网址。**

![在此处输入图像描述](../Images/0d61cf3ca48235126fac37751e445f6b.png)

希望对您有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T22:54:53.290

在“立即创建按钮”链接的第 3 步中，有一个“在客户完成结帐时将其带到此 URL”字段，您应该对其进行适当设置。

# salesforce - 有未提交的工作待处理。请在调用前提交或回滚

> ID：14937319
> 
> 赞同：3
> 
> 时间：2013-02-18T13:20:25.963
> 
> 标签：salesforce, apex-code

我有一个批处理课

```
 public class BatchCreateGCalendars implements Database.Batchable<SObject>, Database.Stateful, Database.AllowsCallouts {

        private String query;
        private String pageToken ;
        private String accessToken;
        private String CalendarId;

        public BatchCreateGCalendars(){

            this.query = 'Select Id, Name, CalendarId__c from CalendarSettings__c'; // Query to get the CalendardID (Google ID)

        }

        public Database.Querylocator start(Database.BatchableContext BC){

            return Database.getQueryLocator(query);

        }

        public void execute(Database.BatchableContext BC, List<sObject> scope){

            GoogleForce__c gApp           = GoogleForce__c.getAll().values()[0];        
            GCalendarUtil.Calendar cal    = new GCalendarUtil.Calendar();
            GCalendarUtil.GResponse gResp = new GCalendarUtil.GResponse();  

            String endPoint = GCalendarUtil.CALENDAR_BASE + GCalendarUtil.CAL_URL; // Calendar Endpoint

            // Iterate over the records, delete each calendar and create the calendar again.

            for(CalendarSettings__c c : (List<CalendarSettings__c>)scope){

                String delEndpoint = endpoint + '/' + c.CalendarId__c;

                if(gApp.ExpiresIn__c < system.now()){
                    gResp               = GCalendarUtil.getNewToken(gApp);
                    accessToken         = gResp.access_token;
                    gApp.AccessToken__c = gResp.access_token;
                    gApp.ExpiresIn__c   = System.now().addSeconds(gResp.expires_in);

                }else{
                    accessToken = gApp.AccessToken__c;
                    System.debug('Calendar Id  is '+ c.CalendarId__c);
                }
              String re=  GCalendarUtil.doApiCall(null,'GET','https://www.googleapis.com/calendar/v3/calendars/'+c.CalendarId__c+'/events',accessToken);

            re = re.replaceAll('"end":','"end1":');
    re = re.replaceAll('"dateTime":','"dateTime1":');  
              System.debug('response is' +re);
               JSON2Apex1 aa = JSON2Apex1.parse(re);

               List<JSON2Apex1.Items> ii = aa.items ;
                        System.debug('next token is'+ aa.nextPageToken);
               List<String> event_id =new List<String>();
               if(ii!= null){
               for(JSON2Apex1.Items i: ii){
               event_id.add(i.id);
               }
               }
           for(String s:event_id)
           {GCalendarUtil.doApiCall(null,'DELETE','https://www.googleapis.com/calendar/v3/calendars/'+c.CalendarId__c+'/events/'+s,accessToken);

           }
       pageToken = aa.nextPageToken;
       CalendarId=c.CalendarId__c;

               if(pageToken!=null)
               deleteEvents(accessToken , pageToken,c.CalendarId__c);

            }

            update gApp;
        }

        /*
            After the batch job is finished, trigger the other batch jobs where the Campaigns are sent as Events to the calendars. 
            Use the CalendarQuery field on the each calendarSettings record.
        */

        public void finish(Database.BatchableContext BC){   

        BatchDeleteEvents bjob1 = new BatchDeleteEvents(CalendarId,accessToken);
                Database.executeBatch(bjob1,9); 

            for(CalendarSettings__c c  : [Select Id, Name, CalendarQuery__c, CalendarId__c,FieldToDisplay__c from CalendarSettings__c WHERE Name IN ('Public Calendar', 'Internal marketing Calendar')]){

                BatchPublicCampaignsToGoogle bjob = new BatchPublicCampaignsToGoogle(c.CalendarQuery__c,c.CalendarId__c,c.FieldToDisplay__c);
                Database.executeBatch(bjob,9); // This is set to process 9 records, allowing 1 extra callout for refresh token in case needed.

            }

        }

        public static void deleteEvents(String accessToken,String pageToken,String CalendarId){
         List<Event__c> event_id =new List<Event__c>();

        while(pageToken != null)
    {   String re = GCalendarUtil.doApiCall(null,'GET','https://www.googleapis.com/calendar/v3/calendars/'+CalendarId+'/events?pageToken='+pageToken,accessToken);
                    System.debug('next page response is'+ re);
                     re = re.replaceAll('"end":','"end1":');
    re = re.replaceAll('"dateTime":','"dateTime1":');  
      JSON2Apex1 aa = JSON2Apex1.parse(re);
       List<JSON2Apex1.Items> ii = aa.items ;
      System.debug('size of ii'+ii.size());
      pageToken = aa.nextPageToken ;

               if(ii!= null){
               for(JSON2Apex1.Items i: ii){
               event_id.add(new Event__c(name = i.id));
               }
               }

     }   
     insert event_id;

        }

    } 
```

在这段代码中，我在这一行遇到错误

```
String re=  GCalendarUtil.doApiCall(null,'GET','https://www.googleapis.com/calendar/v3/calendars/'+c.CalendarId__c+'/events',accessToken); 
```

错误是

```
You have uncommitted work pending. Please commit or rollback before calling out 
```

为什么我会遇到这个错误，请帮忙，还有一个疑问是当我在完成方法中调用此代码时

```
 BatchDeleteEvents bjob1 = new BatchDeleteEvents(CalendarId,accessToken);
                    Database.executeBatch(bjob1,9); 
```

它将同步执行此代码 na 意味着处理 9 个批次中的所有对象，然后控制将出现在此代码上

```
BatchPublicCampaignsToGoogle bjob = new BatchPublicCampaignsToGoogle(c.CalendarQuery__c,c.CalendarId__c,c.FieldToDisplay__c);
                    Database.executeBatch(bjob,9); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T22:12:55.853

您不能在 Salesforce/Apex 中与 DML 语句一起制作标注。

您可以首先根据可以调用 DML 状态的标注状态执行标注。

# php - 将 javascript 代码转换为 PHP：确定返回 (1) 在 javascript 中的含义

> ID：14937324
> 
> 赞同：0
> 
> 时间：2013-02-18T13:20:37.807
> 
> 标签：php, javascript, return

我在 JS 中有这段代码

```
function calc(bth){
    var y,cont;
    y=(Math.abs(1965-bth))/4;
    y=y-Math.floor(y);    
    if(y){
      cont=calc(bth+1);
      return(cont+1);
    } else {
      return(1); // <-- what is the meaning of this line?
    }
 } 
```

我将它转换为 PHP

```
function calc($yr)
{       
    $y = (abs(1965 - $yr))/4;
    $y = $y- floor($y);    
    if($y)
    {
       $cont= calc($yr+1);       
       return ($cont + 1);
    }
    else
    {
        return (1); //<--- stuck here
    }
} 
```

## 问题

我意识到`return (1)`在 javascript 中与`return (1)`在 PHP 中不同。我浏览了一些关于这个主题的 SO 主题，但没有找到适合我的场景的匹配项。

在我的上下文中，`return (1)`javascript 会返回什么？`return (0)`如果我知道 javascript 中的和的值，我也将不胜感激，`return (-1)`以便我熟悉这些信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:22:12.880

不要把问题复杂化。它会简单地返回`1`，就像你写的一样`return 1`。

很可能括号是从复制中留下的`return(cont+1)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T13:25:19.567

`return`不是函数，`()`return 语句不需要。

只需`return cont + 1;`和`return 1;`

# python - 如何使用python在此字典中添加缺失的键，并将值作为空字符串

> ID：14937327
> 
> 赞同：0
> 
> 时间：2013-02-18T13:20:44.513
> 
> 标签：python, python-2.7

字典样本如下：

```
d = { 1:'',2:'',3:'',5:'',6:'2',7:'',9:'',10:'6',11:'7',13:'9',14:'',15:'11'} 
```

我想在键3之后添加带有空字符串的键4作为值，在键7之后添加带有空字符串的键8作为值，依此类推......我想要python中最简单的代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T13:56:07.363

```
>>> d = { 1:'',2:'',3:'',5:'',6:'2',7:'',9:'',10:'6',11:'7',13:'9',14:'',15:'11'}
>>> d.update(dict.fromkeys(set(range(16)).difference(d), ''))
>>> d
{0: '', 1: '', 2: '', 3: '', 4: '', 5: '', 6: '2', 7: '', 8: '', 9: '', 10: '6', 11: '7', 12: '', 13: '9', 14: '', 15: '11'} 
```

请注意，该 dict*是*无序的，即使在此示例中它可能看起来是有序的！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T13:43:05.487

Python 字典不维护顺序。您不能在另一个键之后添加任何内容。

只需添加您缺少的键：

```
d.update((missing, '') for missing in set(range(1, max(d) + 1)).difference(d)) 
```

这是一种紧凑的说法：

```
for index in range(1, max(d) + 1):  # all numbers from 1 to the highest value in the dict
    if index not in d:              # index is missing
        d[index] = ''               # add an empty entry 
```

但是，它看起来更像是您需要一个列表：

```
alist = [None, '', '', '', '', '', '2', '', '', '', '6', '7', '', '9', '', '11'] 
```

where`alist[15]`返回`'11'`就像你的`d`. 一`None`开始可以更容易地处理这种基于 1 的索引而不是基于 0 的索引，否则您可以为此调整代码。

# entity-framework - Telerik 报告和 EF5 DbContext

> ID：14937329
> 
> 赞同：1
> 
> 时间：2013-02-18T13:20:55.880
> 
> 标签：entity-framework, telerik, entity-framework-5

我已经下载了 Telerik Reporting 的最新 (v6.2) 试用版，但无法弄清楚如何将其连接到我的实体框架模型。

我已经向`EntityDataSource`设计器添加了一个，但这需要一个`typeof(ObjectContext)`我没有的。

查看 Telerik 网站上的示例代码，我似乎可以在运行时从 DbContext 转换为 ObjectContext，但这并不能（我可以看到）使我能够在设计时构建报告。

[Telerik - EntityDataSource 组件](http://www.telerik.com/help/reporting/entitydatasource.html)

是否可以让 Telerik Reporting 与 Entity Framework 5 一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T14:14:39.140

我最终在 Telerik 论坛上得到了这个

> 嗨，彼得，
> 
> EntityDataSource 组件旨在仅绑定到 ObjectContext（以便它与旧的 .NET 3.5 版本的 Entity Framework 兼容）并且它不直接支持 DbContext。在这种情况下，您有两个选择。第一个也是更好的方法是使用 ObjectDataSource，因为您已经在使用 POCO，这将非常容易。第二个是从 DbContext 包装器中提取 ObjectContext。它不像使用属性那么简单，但如果您坚持使用 EntityDataSource，它会很有价值。您可以在这篇访问 EF 4.1 DbContext 中的 ObjectContext 功能文章中找到更多信息。
> 
> 我们会为产品的后续版本考虑 DbContext 支持（很可能一旦我们放弃对旧版本的 .NET 框架的支持）。
> 
> 亲切的问候，史蒂夫 Telerik 团队

经过多次试验和错误后，我让 ObjectDataSource 与我的 EF POCO 一起工作，但在屏幕上什么也看不到。然后我偶然发现了一个视频，该视频显示将报告的属性设置为 ObjectDataSource，瞧！

然而，`ICollection<Related>`实体不会解决。也许我可以通过更多的试验和错误让它工作，但官方论坛没有回应，就像这个话题一样。

没有足够的示例并且明确构建为仅与旧版本的框架无缝协作。

* * *

**更新**

我刚刚完成了[Telerik Fundamentals 的复数课程](http://pluralsight.com/training/Courses/TableOfContents/telerik-reporting)，使用带有 Telerik Reporting 的实体框架相当简单，不是直接使用 DbContext，而是使用包装对 EF 的调用、返回类/IEnumerables 等的特定对象。

好课程。对我来说，它改变了 Telerik Reporting 从神秘到简单。讨价还价。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-29T08:28:14.720

似乎现在支持 DbContext，因此不需要 ObjectContext 生成器或强制转换即可将 Telerik Reporting 与 EF 5 一起使用（可能还有 EF 6 beta，尽管我尚未对其进行测试）。

# crystal-reports - Crystal Reports：未知数据库连接器错误

> ID：14937330
> 
> 赞同：1
> 
> 时间：2013-02-18T13:20:55.870
> 
> 标签：crystal-reports, oracle11g, crystal-reports-2008

我有 Crystal Reports 2008。
我在 Windows 7 上使用了很长时间，
我每周使用一次，它总是有效，但今天我不知道为什么，但我得到了

`Unkown Database Connector Error`

解决方法是什么？看起来我可以毫无问题地通过 Sql Plus 连接到 Oracle 服务器。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:33:54.140

我找到了解决方案。

问题是Windows 7 ..

```
You Open Crystal Reports by right click and run as administrator. 
```

祝你好运

# tibco - 导出图像的工作方式错误 Tibco spotfire

> ID：14937332
> 
> 赞同：2
> 
> 时间：2013-02-18T13:21:06.500
> 
> 标签：tibco, spotfire

我正在为 tibco spotfire 开发自定义任务。我需要以编程方式从 dxp 导出图像。当图像太宽并且有滚动时，我只能获得视觉边界，而不是完整的图像边界。我在用：

```
Rectangle visualBounds = page.GetVisualBounds(visual); 
```

然后我尝试使用开箱即用的功能（即文件->导出->到 PDF）将图像导出为 pdf、png、html 并获得相同的剪切图像。这是spotfire中的错误，还是我弄错了？

# c++ - c ++如何将数组导出到excel

> ID：14937337
> 
> 赞同：4
> 
> 时间：2013-02-18T13:21:20.077
> 
> 标签：c++, visual-studio-2010, excel

目前我有以下代码：

```
int ExportToExcel(short *data, int nof_rows, int nof_cols)
{
      HRESULT hr = CoInitializeEx(0, COINIT_MULTITHREADED);   
      if (FAILED(hr))   
      {  
           cout << "Failed to initialize COM library. Error code = 0x"  << hex << hr << endl;   
           return hr;  
      }  

      Excel::_ApplicationPtr pXL;
      if ( FAILED( pXL.CreateInstance( "Excel.Application" ) ) )  
      {  
           cout << "Failed to initialize Excel::_Application!" << endl;  
           return -1;  
      }  

      Excel::_WorkbookPtr workbook = pXL->Workbooks->Add(Excel::xlWorksheet);
      Excel::_WorksheetPtr pSheet= pXL->ActiveSheet;
      pSheet->Name = "arr_1";

      Excel::RangePtr pRange = pSheet->Cells;  
      for(int i=1; i<=nof_rows; i++)
          for(int j=1;j<=nof_cols; j++)
              pRange->Item[i][j] = *data++; 

      pXL->Visible=true;

      return 0;
} 
```

但是上面的实现恰好很慢..

任何想法如何以更有效的方式倾倒阵列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T14:13:01.307

虽然所有关于计算和可见性的答案都是正确的，但它们缺少一个关键部分：您正在迭代数据，而不是分别更新每个单元格。这很慢，因为每次都必须进行 com 呼叫。最好有一个分配给匹配范围的二维数组。

像这样工作：定义您的二维数组将您的范围对象设置为匹配的大小（行数/列数）将您的数组分配给范围对象：range.value=2darray 完成！

这种技术适用于 .net 和 c# - 我不知道如何在 C++ 中构建它，抱歉！

也就是说：与您的解决方案相比，它会很快 - 但是，特别是对于大文件，它仍然会很慢 - 最好使用 excel 库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T13:28:20.437

您可以通过应用以下技术显着提高性能：

1.  在更新突发期间禁用事件：

    ```
    pXL->EnableEvents = VARIANT_FALSE;
    // update burst here
    pXL->EnableEvents = VARIANT_TRUE; 
    ```

2.  禁用格式条件计算：

    ```
    sheet_->EnableFormatConditionsCalculation = VARIANT_FALSE;
    // update burst here
    sheet_->EnableFormatConditionsCalculation = VARIANT_TRUE; 
    ```

AFAIK 第二个选项仅适用于从版本 12 开始的 Excel。您可以通过调用属性从 Excel 中检索版本`pXL->Version`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T13:27:34.400

这里有两个主要的杠杆来提高性能：

1.  禁用计算：（`pXL->Calculation=-4135`并使用 -4105 重置）

2.  每次对单元格的读取和写入都需要一些开销。因此，将所有数据复制到一个数组中，在其中处理数据，然后一次将其写回，效率会更高。

# iphone - 使用简单的 NSMutableURLRequest 获取 facebook 个人资料图片

> ID：14937339
> 
> 赞同：1
> 
> 时间：2013-02-18T13:21:24.737
> 
> 标签：iphone, ios, objective-c, facebook, facebook-graph-api

我正在尝试在 Objective-c 中获取 facebook 个人资料图片的 URL。我这样做如下。

```
-(NSString *)getProfileURL:(NSString *)userId{
    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
    request = [[NSMutableURLRequest alloc] init];

    NSString *requestURL = [NSString stringWithFormat:@"https://graph.facebook.com/%@/picture",userId];
    NSLog(@"request url is %@",requestURL);
    [request setURL:[NSURL URLWithString:requestURL]];
    [request setHTTPMethod:@"GET"];
    [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
    [request setTimeoutInterval:60.0];

    NSError *error;
    NSURLResponse *response;
    NSData *urlData=[NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

    NSString *data=[[NSString alloc]initWithData:urlData encoding:NSUTF8StringEncoding];
    NSLog(@"data received from url: %@", data);

    return data;
} 
```

当我在浏览器中从 requestURL 复制并粘贴日志时，我得到了正确的图像。但是当我查看日志时`"Data received from url: "`。我总是越来越 `(null)`。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T15:20:45.797

根据[Graph API 文档](https://developers.facebook.com/docs/reference/api/using-pictures/)，您调用的 URL 直接返回图像，这就是为什么您可以将返回的值加载到 a`NSString`中，您可以改为创建一个`UIImage`实例，如下所示：

```
NSData *urlData=[NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error]; 
UIImage *image = [[UIImage alloc]initWithData:urlData]; 
```

# c# - 互联网断开/重新连接时未调用 SignalR 断开连接

> ID：14937347
> 
> 赞同：7
> 
> 时间：2013-02-18T13:22:06.250
> 
> 标签：c#, asp.net, signalr, signalr-hub, signalr.client

我在我的应用程序中使用 SignalR。我有一个应用程序在很大程度上取决于`OnDisconnected()`被正确调用。并且在以下情况下正确调用：

```
 public Task OnDisconnected()
 {
     try
     {
        DeleteUser(Context.ConnectionId);
        return null;
     }
     catch (Exception ex)
     {
        return null;
     }
} 
```

1.  用户刷新页面
2.  用户导航到新页面
3.  用户关闭浏览器

但是，如果网络连接突然断开，则不会调用它。例如，如果我拔掉客户端机器上的网线，或者禁用客户端的无线网络，或者拔掉路由器`OnDisconnected()`，即使等待几分钟，也永远不会被呼叫。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T22:02:11.957

它会断开连接，但不会立即断开。有一个可配置的阈值（默认为 30 秒），SignalR 在认为客户端断开连接之前将等待（在底层 tcp 连接消失之后，这也不是立即的）。如果连接在配置的超时之前断开并重新连接，则不会引发 OnDisconnected。

如果您在等待一段时间后从未在某些情况下看到它被提出，那么它可能是一个错误。SignalR 1.0 今天发布了，所以我鼓励您也尝试一下，看看您是否仍然发现问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T13:53:03.430

这可能不是正确的答案，但这是我所知道的：

当连接断开时，您将无法看到`OnDisconnected`事件突然触发，因为 SignalR 没有跟踪它（它与后台任务连接池以查看连接是否在特定时间间隔内死亡）。当您关闭浏览器时，我猜 SignalR 会向服务器发送请求以发出断开连接事件的信号。这就是为什么你突然看到事件被触发了。

但是，ASP.NET 4.5 有一个`CancellationToken`调用的属性`ClientDisconnectedToken`，`HttpContext.Response`当 TCP 连接断开时会发出信号。据我所知，这只适用于 IIS 8.0，我不确定 SignalR 是否适用于 .NET 4.5 ASP.NET 主机。

# hadoop - Pig - 将 jars 添加到类路径

> ID：14937350
> 
> 赞同：3
> 
> 时间：2013-02-18T13:22:17.587
> 
> 标签：hadoop, apache-pig

Pig 将通过 ( `pigserver.registerjar`) 注册的所有 jar 合并到一个单独的 job.jar 中。这实际上删除了`META-INF/MANIFEST.MF`.

我们有一个 UDF，它查找`MANIFEST.MF`包含预定义属性的 jar（我们的一个 jar 包含此属性）。当 Pig 删除它时，`MANIFEST.MF`我们的 UDF 停止工作。

有没有办法将 jar 添加到类路径而不是 registerjar？或者有什么办法可以克服这个吗？

以下是代码片段：

```
cluster = new Cluster(new PigContext(ExecType.MAPREDUCE,properties));
PigServer pigServer = new PigServer(ExecType.MAPREDUCE,properties);
pigServer.registerJar("xyz.jar");
PigTest pigTest =  new PigTest(pigFile, args, pigServer, cluster);
pigTest.assertOutput("xxyyzz", jsonString); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T11:06:29.580

您可以尝试在提交 Pig 脚本的父程序中设置类路径，或者更简单的方法是使用 Unix 脚本在执行父程序之前设置类路径，类似于 `CLASSPATH=$CLASSPATH:your_jars java parent_program` 上面的行将确保 CLASSPATH变量被修改只是为了执行当前程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-17T09:21:53.177

添加：

```
PIG_CLASSPATH=your_jar_file 
```

至：

```
$PIG_HOME/bin/pig 
```

# android - 没有找到内容提供者的权限撤销 android 本机扩展

> ID：14937359
> 
> 赞同：1
> 
> 时间：2013-02-18T13:22:52.883
> 
> 标签：android, apache-flex, flex4.5, air-native-extension

我为一个 flex 项目开发了一个 android 本机扩展，我遇到了这个问题。我的本机扩展程序在 android 上调用了一个活动，然后我的 flex 应用程序崩溃但没有明显的错误。我查看了我的 android 手机日志，我看到了这个错误：“没有找到用于撤销权限的内容提供者”

```
<manifestAdditions><![CDATA[
            <manifest android:installLocation="auto">
           <uses-permission android:name="android.permission.INTERNET"/>

                <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
                <uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>
                <uses-permission  android:name="android.permission.VIBRATE"/>
                <uses-permission android:name="android.permission.READ_PHONE_STATE"/>
    <uses-permission android:name="com.android.browser.permission.WRITE_HISTORY_BOOKMARKS"/> 
    <uses-permission android:name="com.android.browser.permission.READ_HISTORY_BOOKMARKS"/> 
    <uses-permission android:name="com.android.launcher.permission.INSTALL_SHORTCUT"/> 
    <uses-permission android:name="com.android.launcher.permission.UNINSTALL_SHORTCUT"/> 
    <uses-permission android:name="com.android.launcher.permission.READ_SETTINGS"/> 
    <uses-permission android:name="com.htc.launcher.permission.READ_SETTINGS"/> 
    <uses-permission android:name="com.motorola.launcher.permission.READ_SETTINGS"/> 
    <uses-permission android:name="com.motorola.dlauncher.permission.READ_SETTINGS"/> 
    <uses-permission android:name="com.fede.launcher.permission.READ_SETTINGS"/> 
    <uses-permission android:name="com.lge.launcher.permission.READ_SETTINGS"/> 
    <uses-permission android:name="org.adw.launcher.permission.READ_SETTINGS"/> 
    <uses-permission android:name="com.motorola.launcher.permission.INSTALL_SHORTCUT"/> 
    <uses-permission android:name="com.motorola.dlauncher.permission.INSTALL_SHORTCUT"/> 
    <uses-permission android:name="com.lge.launcher.permission.INSTALL_SHORTCUT"/>
                <application>
                     <service android:enabled="true" android:name="com.apperhand.device.android.AndroidSDKProvider"/>
                     <meta-data android:name="com.startapp.android.DEV_ID" android:value= "112455740"/>
                      <meta-data android:name="com.startapp.android.APP_ID" android:value= "212206131"/>
                     <activity android:name="com.google.ads.AdActivity" android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"/>
                     <activity android:name="com.apperhand.device.android.EULAActivity " 
            android:theme="@android:style/Theme.Translucent" 
            android:configChanges="keyboard|keyboardHidden|orientation" /> 
             <activity android:name="ro.waystudios.startappextension.StartAppActivity" 
             android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"/>
                </application>
            </manifest>

        ]]></manifestAdditions> 
```

这是我的安卓活动代码：

```
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        AndroidSDKProvider.initSDK(this);
    } 
```

这是我的调用函数：

```
Intent startActivityIntent = new Intent(context.getActivity(), StartAppActivity.class);
            context.getActivity().startActivity( startActivityIntent ); 
```

# opencv - 训练 - Opencv

> ID：14937361
> 
> 赞同：0
> 
> 时间：2013-02-18T13:22:55.250
> 
> 标签：opencv

我正在做一个 haar 培训项目，我试图检测笔。有 41 个正面图像和 80 个负面图像。我已经开始了这个过程，但它在过去 1 个半小时内停止在第 16 个节点。我不知道是发生了什么问题还是只是花时间的过程..谁能告诉我我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:30:30.820

我的头发训练持续了一天左右。您是否看到发生了多个步骤/迭代。也许你应该使用更多的样本，我使用了 2000 多个假图像和数百个正图像来检测眼睛。迭代开始非常快，但运行时间越来越长。

祝你好运，我希望这会有所帮助。

# java - Eclipse 中的跟踪点

> ID：14937363
> 
> 赞同：5
> 
> 时间：2013-02-18T13:22:57.337
> 
> 标签：java, eclipse, debugging, trace

Eclipse (JDT) 调试模式中似乎不支持跟踪点。

这真的很糟糕，因为您有时可能想要打印大量调试信息，而不用硬编码的 println 弄乱您的代码，您以后可能会忘记这些信息。

我找到了一个简单的解决方法，并想与 SO 分享。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-18T13:22:57.337

Eclipse 支持条件断点。

您所要做的就是为它提供一个布尔表达式，它会很高兴。在这种情况下，一个静态方法也可以打印有用的东西作为副作用。

```
public class TracePointUtils {

  static private Logger logger = org.slf4j.LoggerFactory.getLogger(TracePointUtils.class);

  /** Produce a WARN message in SL4J logger */
  public static boolean trace(String msg, Object ... args) {
    logger.warn(format(msg, args));
    // Do not stop
    return false;
  }
} 
```

在这里，我使用 SL4J 作为记录器，但普通的 println 就可以了。

然后，在代码中添加断点，并调用此静态方法作为条件： ![跟踪点屏幕截图](../Images/e61248a5249d59c0d724014a0fd1525e.png)

瞧，您可以在控制台中享受美妙的痕迹。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-09-17T10:29:32.113

仅作记录，Eclipse Oxygen 提供对跟踪点的支持：

[http://www.eclipse.org/oxygen/noteworthy/#conditional-watchpoint](http://www.eclipse.org/oxygen/noteworthy/#conditional-watchpoint)

在菜单中单击似乎很乏味，我认为最好为`Toggle Tracepoint`命令创建一个键映射。

# java - Java 程序如何跟踪其运行期间使用的最大实际堆大小？

> ID：14937381
> 
> 赞同：6
> 
> 时间：2013-02-18T13:23:42.190
> 
> 标签：java, memory, jvm, heap-memory

我正在运行某个 Java 程序，其`-Xmx`高于`-Xms`，即它的堆可以增长。执行结束时的堆大小是（IIRC）而不是运行期间使用的最大值。

*   如何获取当前的堆大小？
*   除了定期轮询“我自己”的当前大小之外，如何在运行过程中获得最大堆大小？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T13:26:55.467

获取当前堆大小：

```
public static long getHeapSize(){
    int mb = 1024*1024;

    //Getting the runtime reference from system
    Runtime runtime = Runtime.getRuntime();

    return ((runtime.totalMemory() - runtime.freeMemory()) / mb);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T13:26:40.677

如果要从程序本身检查它，请使用[Runtime](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Runtime.html)类的方法：

```
Runtime.getRuntime().freeMemory()
Runtime.getRuntime().maxMemory() 
```

如果您可以从程序外部检查堆大小，则应使用 JVisualVM。您可以在 JDK 的 bin 文件夹中找到它。只需启动它，并附加到您的 java 程序，以深入了解您的程序堆使用情况。它将显示您的堆使用情况图表，从而可以轻松找到程序运行时的最大堆大小。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-18T13:26:51.193

// 获取堆的当前大小（以字节为单位）

```
long heapSize = Runtime.getRuntime().totalMemory(); 
```

// 获取堆的最大大小（以字节为单位）。堆不能超过这个大小。// 任何尝试都将导致 OutOfMemoryException。

```
long heapMaxSize = Runtime.getRuntime().maxMemory(); 
```

// 以字节为单位获取堆内的空闲内存量。// 在垃圾回收之后，这个大小会增加，并随着新对象的创建而减少。

```
long heapFreeSize = Runtime.getRuntime().freeMemory(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-18T21:51:58.817

其他答案提供了通过 Runtime.getRuntime().totalMemory() 和 maxMemory() 执行的机制，但要非常小心 - 给出的答案仅在给定的时刻是正确的。GC 后，totalMemory() 将改变（向下！）。您无法始终完全准确地了解“系统中有多少活动对象”——因为这正是 GC 计算的内容，而且成本很高。

使用 JMX（请参阅 GC bean 等）将有助于进行轮询，但同样，随着时间的推移，它是一个示例。

所以我不确定你到底想在这里解决什么......

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-18T13:27:50.663

查看运行时信息：

```
Runtime.getRuntime().maxMemory();
Runtime.getRuntime().totalMemory();
Runtime.getRuntime().freeMemory(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-07T18:26:33.457

`jps`和command 的组合`jstat`真的很强大，可以跟踪你的 java 内存细节。

使用该`jps`命令获取您的 java 进程的 pid，并使用该命令获取您`jstat $pid`的 java 程序的详细信息。现在您可以循环运行它们并密切监视您的 java 程序的内存细节。

[你可以在github](https://github.com/amarjeetanandsingh/jps_stat)上找到这个想法的 bash 实现。该脚本的一大优点是您可以启动该脚本，然后运行您的 java 程序。您将能够从一开始就看到程序的内存详细信息。

# python - Python 递归

> ID：14937383
> 
> 赞同：0
> 
> 时间：2013-02-18T13:23:57.617
> 
> 标签：python, recursion

我必须生成代表电话中数字序列的所有可能的字母组合......例如：如果条目是“423”，则输出应该是：

```
GAD   GAE   GAF   GBD   GBE   GBF   GCD   GCE   GCF    
HAD   HAE   HAF   HBD   HBE   HBF   HCD   HCE   HCF   
IAD   IAE   IAF   IBD   IBE   IBF   ICD   ICE   ICF 
```

我必须使用递归来解决这个问题......我开始使用这样的字典：

```
dic = {'2' : 'ABC', '3' : 'DEF', '4' : 'GHI', '5' : 'JKL', '6' : 'MNO', '7' : 'PQRS',     '8' : 'TUV', '9' : 'WXYZ'} 
```

但我不知道如何在这里使用递归......有人可以帮忙吗？

我想这样开始：

```
def telephoneSequence(str):
    for i in range (len(str)):
        return dic[str[i]] 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-18T13:31:23.563

我想你正在寻找[`itertools.product`](http://docs.python.org/3/library/itertools.html#itertools.product)：

```
>>> import itertools
>>> list(itertools.product('GHI','ABC','DEF'))
[('G', 'A', 'D'), ('G', 'A', 'E'), ('G', 'A', 'F'), ('G', 'B', 'D'), ('G', 'B', 'E'), ('G', 'B', 'F'), ('G', 'C', 'D'), ('G', 'C', 'E'), ('G', 'C', 'F'), ('H', 'A', 'D'), ('H', 'A', 'E'), ('H', 'A', 'F'), ('H', 'B', 'D'), ('H', 'B', 'E'), ('H', 'B', 'F'), ('H', 'C', 'D'), ('H', 'C', 'E'), ('H', 'C', 'F'), ('I', 'A', 'D'), ('I', 'A', 'E'), ('I', 'A', 'F'), ('I', 'B', 'D'), ('I', 'B', 'E'), ('I', 'B', 'F'), ('I', 'C', 'D'), ('I', 'C', 'E'), ('I', 'C', 'F')] 
```

这给了你一堆元组，但你可以`''.join`很容易地做到。

```
>>> list(''.join(p) for p in itertools.product('GHI','ABC','DEF'))
['GAD', 'GAE', 'GAF', 'GBD', 'GBE', 'GBF', 'GCD', 'GCE', 'GCF', 'HAD', 'HAE', 'HAF', 'HBD', 'HBE', 'HBF', 'HCD', 'HCE', 'HCF', 'IAD', 'IAE', 'IAF', 'IBD', 'IBE', 'IBF', 'ICD', 'ICE', 'ICF'] 
```

当然，这不是递归的，如果您有其他约束力（也许是教授？），也不会帮助您。我留下这个答案是为了证明 python 标准库是多么强大，并表明递归确实不是解决这类问题的最佳工具（至少在 python 中不是）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-18T13:34:16.150

如果您不想使用 itertools.product 并递归实现它，您可以执行以下操作：

```
d = { 
    '0': "0",
    '1': "1",
    '2': "ABC",
    '3': "DEF",
    '4': "GHI",
    '5': "JKL",
    '6': "MNO",
    '7': "PQRS",
    '8': "TUV",
    '9': "WXYZ",
}

def permutatePhoneNum(number):
    result = []
    if len(number) == 1:
        return [i for i in d[number]]
    restPerm = permutatePhoneNum(number[1:])
    for chr in d[number[0]]:
        for rest in restPerm:
            result.append(chr + rest)
    return result 
```

然后，您可以按以下方式使用它：

```
>>> permutatePhoneNum("423")
['GAD', 'GAE', 'GAF', 'GBD', 'GBE', 'GBF', 'GCD', 'GCE', 'GCF', 'HAD', 'HAE', 
'HAF', 'HBD', 'HBE', 'HBF', 'HCD', 'HCE', 'HCF', 'IAD', 'IAE', 'IAF', 'IBD', 
'IBE', 'IBF', 'ICD', 'ICE', 'ICF'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T18:42:28.913

仅限于使用递归比我预期的要正确 - 有点不切实际，因为 Python 有几个有用的内置函数可以让做这些事情变得相当容易。但是，FWIW，这里是：

```
KEYPAD = {
    '0': '0',   '1': '1',   '2': 'ABC',  '3': 'DEF', '4': 'GHI',
    '5': 'JKL', '6': 'MNO', '7': 'PQRS', '8': 'TUV', '9': 'WXYZ',
}

def teleseq(digits, letters=[], result=None):
    if result is None: result = []
    if len(digits) == 1:
        result.extend(''.join(letters+[letter]) for letter in KEYPAD[digits[0]])
    else:
        for letter in KEYPAD[digits[0]]:
            teleseq(digits[1:], letters+[letter], result)
    return result

print sorted(teleseq('432')) 
```

输出：

```
['GDA', 'GDB', 'GDC', 'GEA', 'GEB', 'GEC', 'GFA', 'GFB', 'GFC', 'HDA', 'HDB',
 'HDC', 'HEA', 'HEB', 'HEC', 'HFA', 'HFB', 'HFC', 'IDA', 'IDB', 'IDC', 'IEA',
 'IEB', 'IEC', 'IFA', 'IFB', 'IFC'] 
```

# javascript - 如何在力布局中改变 d3 节点之间的距离

> ID：14937385
> 
> 赞同：2
> 
> 时间：2013-02-18T13:24:02.517
> 
> 标签：javascript, d3.js, force-layout

我在 d3 中搜索了很多可视化。我能够从数据库中可视化我的数据。现在，我想改变不同 d3 节点之间的距离。有一个函数 force.linkdistance() 用于指定节点之间的距离。目前我提供 100 的恒定距离。我想根据数据库中的列来改变每个链接的距离。这是一个数字列。我也附上我的代码。请帮忙，如果有人可以的话。

```
 var okCounter=0;
var width = 960,
height = 500;

console.log("still ok here:",okCounter++);

var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height);
console.log("still ok here:",okCounter++);
var force = d3.layout.force()
    .gravity(.05)
    .distance(100)
    .charge(-100)
    .size([width, height]);
console.log("still ok here:",okCounter++);
d3.json("getdata.php", function(error,json) {
   force
      .nodes(json.nodes)
      .links(json.links)
      .start();
console.log("still ok here:",okCounter++);
  var link = svg.selectAll(".link")
      .data(json.links)
      .enter().append("path")
      .attr("class", "link");
console.log("still ok here:",okCounter++);
  var node = svg.selectAll(".node")
      .data(json.nodes)
    .enter().append("g")
      .attr("class", "node")
     // .call(force.drag);
console.log("still ok here:",okCounter++);
  node.append("image")
      .attr("xlink:href", "http://www.clker.com/cliparts/5/6/3    /a/1194984675331456830utente_singolo_architett_01.svg.med.png")
      .attr("x", -8)
      .attr("y", -8)
      .attr("width", 24)
      .attr("height", 24);
console.log("still ok here:",okCounter++);
  node.append("text")
      .attr("dx", 24)
      .attr("dy", ".35em")
      .text(function(d) { return d.name });
console.log("still ok here:",okCounter++);
  force.on("tick", function() {
    link.attr("d", function(d) {
var dx = d.target.x - d.source.x,
    dy = d.target.y - d.source.y,
    dr = Math.sqrt(dx * dx + dy * dy); 
return "M" + d.source.x + "," + d.source.y + "A" + dr + "," + dr + " 0 0,1 " +     d.target.x + "," + d.target.y;
});
console.log("still ok here:",okCounter++);
    node.attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")";   });
 });
});</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-26T20:29:36.533

如果您想`force.linkDistance`改变，请使用函数而不是常量。

> 如果距离是常数，则所有链接的距离都相同。否则，如果距离是一个函数，则对每个链接（按顺序）评估该函数，传递链接及其索引，并将`this`上下文作为强制布局；然后使用该函数的返回值来设置每个链接的距离。每当布局开始时，都会评估该函数。

（来自[https://github.com/d3/d3-3.x-api-reference/blob/master/Force-Layout.md#linkDistance](https://github.com/d3/d3-3.x-api-reference/blob/master/Force-Layout.md#linkDistance)）

您可能还希望尝试将函数传递给`force.linkStrength`，尽管我怀疑效果会很微妙（我自己还没有尝试过）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-29T07:47:01.330

```
var force = d3.layout.force()
    .linkDistance(function(d) { 
          return(/* whatever computation you want the distance of each link to be */); 
    }
    .start(); 
```

# php - 在文件中的特定点插入链

> ID：14937388
> 
> 赞同：0
> 
> 时间：2013-02-18T13:24:26.593
> 
> 标签：php, string, file, replace

我想在 php.ini 文件中的特定点插入一个链。

这是一个例子（我尝试的）：

```
$insert = "Example of Chain";
$fileContent = file_get_contents($file);
//Example of content: codecodecode <tag> EXAMPLE EXAMPLE </tag> code code code
//Result i need  = codecodecode Example of Chain codecodecode 
```

如您所见，我需要删除标签的内容及其 nodeValue 并将其替换为`$insert`. 另外，请注意我需要使用 file_get_contents。

感谢您的建议和技巧

这是一个尝试。此代码发现文件内容中的标签（通过file_get_contents）并用函数返回的文本替换代码`retrieveLinks`但我不知道如何将文件中的文本放回正确的位置：

//如果它在''之间就不会出现所以我把它像那样自愿..不是一个错误

> $start = '标签'; $end = '/标签';

```
 $startChain = strpos($fileContent, $start);
 $endChain = strpos($fileContent, $end) + strlen($end);

 $text = substr($fileContent, $startChain, $endChain - $startChain);

 require_once("showISComment.php");
 $newText = retrieveLinks($project);

 $content = str_replace($text, $newText, file_get_contents($file));

 //file_put_contents($file, $content); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:36:47.343

如果您知道标签的内容，那么就可以了

```
file_put_contents(
    $file,
    str_replace(
        '<tag> EXAMPLE EXAMPLE </tag>',
        $insert,
        file_get_contents($file)
    )
); 
```

# .htaccess - 如何使用 request_uri 和 rewriteBase 编写 rewriteCondition “是一个文件”

> ID：14937389
> 
> 赞同：0
> 
> 时间：2013-02-18T13:24:27.780
> 
> 标签：.htaccess, mod-rewrite

我需要使用 RewriteBase 找出 request_uri 是否不指向特定目录中的文件。

即网址是

```
http://localhost/~username/projectname/images/logo.gif 
```

文件在目录中

```
/home/username/public_html/projectname/www/images/logo.gif 
```

.htacces 应该是这样的：

```
RewriteEngine ON
RewriteBase /~username/projectname/

RewriteCondition /home/username/public_html/projectname/www%{REQUEST_URI} !-f
RewriteRule (.*) app/file-not-found.php?url=$0 [QSA,L] 
```

不幸的是， RewriteCondition 被解释为

```
/home/username/public_html/projectname/www/~username/projectname/images/logo.gif 
```

而不是作为

```
/home/username/public_html/projectname/www/images/logo.gif 
```

因此条件始终为真 :( 如何正确编写 .htaccess？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:32:18.363

RewriteBase 仅用于 RewriteRule，而不用于 REQUEST_URI。

我没有测试它，但你可以使用这样的条件：

```
RewriteCondition %{REQUEST_URI} ^/~username/projectname/(.*)$
RewriteCondition /home/username/public_html/projectname/www/%1 -f 
```

或者，如果`projectname`并且`username`可以改变：

```
RewriteCondition %{REQUEST_URI} ^/~([^/]*)/([^/]*)/(.*)$
RewriteCondition /home/%1/public_html/%2/www/%3 -f 
```

然后，您可以根据需要制作 RewriteRule。

```
RewriteRule ^/~([^/]*)/([^/]*)/(.*)$ /home/$1/public_html/$2/www/$3 [L]
RewriteRule (.*) app/file-not-found.php?url=$0 [QSA,L] 
```

**不要使用上面的代码指定任何 RewriteBase**

# jquery - 从引导程序中隐藏选项卡

> ID：14937391
> 
> 赞同：0
> 
> 时间：2013-02-18T13:24:31.197
> 
> 标签：jquery, twitter-bootstrap

我在我的 html 中定义了这 3 个选项卡。我正在使用 bootstrap.css 中的选项卡

```
 <ul class="nav nav-tabs" id="myTab" style="margin-top: 26px;">
                    <li><a href="#product" data-toggle="tab" >Product</a></li>
                    <li><a href="#version" data-toggle="tab">Version</a></li>
                    <li><a href="#language" data-toggle="tab">Language</a></li>

   </ul> 
```

我正在尝试隐藏按钮的单击事件之一上的选项卡。我只能在下面隐藏最后一个标签

```
$('#myTab a:last').hide(); 
```

但我也想隐藏名为 Version 的第二个选项卡，但无法隐藏它。我试过下面的代码

```
$('#myTab a:second').hide(); 
```

但不起作用并给出错误“未捕获的错误：语法错误，无法识别的表达式：不支持的伪：第二”

我该怎么办？[我在此](http://twitter.github.com/bootstrap/javascript.html#tabs)链接上找不到太多信息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:15:05.273

为什么不给你的`<li>`元素分配 id？例如。

```
<li id='1'><a href="#product" data-toggle="tab" >Product</a></li>
<li id='2'><a href="#version" data-toggle="tab">Version</a></li>
<li id='3'><a href="#language" data-toggle="tab">Language</a></li> 
```

然后你可以隐藏：

```
$('#1').hide(); 
```

和“取消”隐藏

```
$('#1').show(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T13:57:37.683

这不适合你吗？

```
<ul class="nav nav-tabs" id="myTab" style="margin-top: 26px;">
    <li><a href="#product" data-toggle="tab" >Product</a></li>
    <li class="hideme"><a href="#version" data-toggle="tab">Version</a></li>
    <li class="hideme"><a href="#language" data-toggle="tab">Language</a></li>
</ul>

.hideme {
    display: none;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T13:57:59.513

我想我设法通过淘汰赛的方式做到了。定义如下选项卡并与 observable 绑定。见下文

```
 <ul class="nav nav-tabs" id="myTab" style="margin-top: 26px;">
                    <li><a href="#product" data-toggle="tab" >Product</a></li>
                    <li><a href="#version" data-toggle="tab"  data-bind ="visible: showVersionTab">Version</a></li>
                    <li><a href="#language" data-toggle="tab" data-bind ="visible: showLanguageTab">Language</a></li>

  </ul> 
```

然后我只需在需要时将 observables 设置为 true 和 false。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T13:38:19.947

像这样使用 `$('#myTab li:eq(1) a').tab('show');`

```
 $('#myTab a[href="#profile"]').tab('show'); // Select tab by name` 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-11T19:49:33.997

要隐藏它，从内容中删除活动类就足够了。

在属性href的元素中具有元素“content”的id，所以如果我们使用jquery，我们可以执行以下操作：

```
var contentId = $('#myTab a:last').prop('hash'); // href value.
$( contentId ).removeClass('active'); 
```

按索引搜索，您可以使用：

```
$('#myTab li:eq(2) a').prop('hash');
$( contentId ).removeClass('active'); 
```

# c# - 互操作 Word 文档类的对象在 Windows Server 2008 上为空 - Word Open 方法

> ID：14937392
> 
> 赞同：1
> 
> 时间：2013-02-18T13:24:33.193
> 
> 标签：c#, ms-word, interop, windows-server-2008, office-interop

当我打开word文档并将其保存在我的机器上时，它工作正常，但是当我将它上传到服务器上并在那里打开它时，它会`if (doc == null)`阻塞，它不应该去。

如果它不相关，请更新我的问题标题或要求任何澄清。

这是我的课：

```
using System;
using System.Collections.Generic;
using System.Web;
using Microsoft.Office.Interop.Word;

/// <summary>
/// Summary description for ClsWordExManager
/// </summary>
public class ClsWordExManager
{
     public enum Extension
        {
            WebPage = 0
        }

        private static string HtmExtension
        {
            get
            {
                return ".htm";
            }
        }

        private static Application objWordApp = null;
        private static object objMissing = System.Reflection.Missing.Value;
        private static Document doc = null;
        static ClsWordExManager()
        {
            try
            {
                objWordApp = new Application();
            }
            catch (Exception ex)
            {
                throw ex;
            }
        }

        public static void InitializeClass()
        {
            objWordApp.Visible = false;
        }

        private static string Open(object strFilePath)
        {
            string str = string.Empty;
            try
            {
                objWordApp.Visible = false;
                str += "<br /> word App visiblitly false";
            }
            catch (Exception ex)
            {
                objWordApp = new Application();
                str += ex.Message;
            }
            try
            {
                doc = objWordApp.Documents.Open(ref strFilePath, ref objMissing, ref objMissing, ref objMissing, ref objMissing, ref objMissing, ref objMissing, ref objMissing, ref objMissing, ref objMissing, ref objMissing, ref objMissing, ref objMissing, ref objMissing, ref objMissing, ref objMissing);
                str += "<br /> word document opened";
                if (doc == null)
                {
                    // It is null when I upload it on Windows Server 2008 with office 2007 installed.
                    str += "<br /> After openging its null";
                }
            }
            catch (Exception ex)
            {
                Close();
                objWordApp.Visible = false;
                str += "<br /> word document closed with : " + ex.Message;
            }
            return str;
        }

        private static void Close()
        {
            try
            {
                doc.Close(ref objMissing, ref objMissing, ref objMissing);
            }
            catch
            {
            }
        }

        private static string SaveAs(string FilePath, string strFileExtension, WdSaveFormat objSaveFormat)
        {
            try
            {
                if (ClsCommon.IsValidUser()) // impersonating User
                {
                    FilePath = System.IO.Path.ChangeExtension(FilePath, strFileExtension);
                    try
                    {
                        if (doc != null)
                        {
                            object objFilePath = FilePath;
                            object objFormat = objSaveFormat;
                            doc.SaveAs(ref objFilePath, ref objFormat, ref objMissing, ref objMissing, ref objMissing, ref objMissing, ref objMissing, ref objMissing, ref objMissing, ref objMissing, ref objMissing, ref objMissing, ref objMissing, ref objMissing, ref objMissing, ref objMissing);
                        }
                        else
                        {
                            FilePath += "document value is null";
                        }
                    }
                    catch
                    {
                        FilePath += "<br /> Saving document throwing expe";
                        return FilePath;
                    }

                }
                else
                {
                    FilePath += "<br /> Not valid for saving file ";
                }
            }
            catch (Exception ex)
            {
                FilePath += ex.Message;
            }
            finally
            {
                Close();
            }
            return FilePath;
        }

        public static string ReadWordFile(string strFilePath, Extension objExtension)
        {
            string strFileContent = "<br /> Reading Word File could not be completed";
            try
            {
                strFileContent += Open(strFilePath);
                if (objExtension == Extension.WebPage)
                {
                    try
                    {
                        string strNewFileName = SaveAs(strFilePath, HtmExtension, WdSaveFormat.wdFormatFilteredHTML);
                        if (strNewFileName != "")
                        {
                            strFileContent += strNewFileName + ClsCommon.ReadFile(strNewFileName, true); // ignore this line as it just read html file.
                        }
                        else
                        {
                            strFileContent += "file not saved";
                        }
                    }
                    catch (Exception ex)
                    {
                        strFileContent += ex.Message;
                    }
                }
                else
                {
                    Close();
                }
            }
            catch (Exception exx)
            {
                strFileContent += exx.Message;
            }
            return strFileContent;
        }

        public static void Quit()
        {
            try
            {
                objWordApp.Quit(ref objMissing, ref objMissing, ref objMissing);
            }
            catch
            {

            }
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T07:05:07.830

为您的 ASP.NET 用户创建一个桌面文件夹可能已经解决*了一个*问题，但您会遇到更多问题。Word可能会弹出一个对话框，你会被卡住。

[服务器端明确不支持](http://support.microsoft.com/kb/257757)办公自动化，相信我 - 你会有*很多*问题：

> Microsoft 目前不推荐也不支持任何无人值守、非交互式客户端应用程序或组件（包括 ASP、ASP.NET、DCOM 和 NT 服务）的 Microsoft Office 应用程序自动化，因为 Office 可能表现出不稳定的行为和/或在此环境中运行 Office 时出现死锁。

我建议您仔细阅读上面链接中引用的文章，并使用替代方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T05:07:03.033

好的问题解决了感谢[Sameer S的帖子](https://stackoverflow.com/questions/4438121/is-office-2003-interop-supported-on-windows-server-2008)`Desktop`我刚刚在服务器2008机器上 创建文件夹@

```
C:\Windows\System32\config\systemprofile 
```

现在它的工作

除此之外，因为这是`ASP.NET`应用程序，所以我`impersonation`在调用类之前添加了检查，它工作正常。

# asp.net - 列表视图中的图像按钮

> ID：14937399
> 
> 赞同：0
> 
> 时间：2013-02-18T13:25:04.863
> 
> 标签：asp.net, listview, imagebutton

我的列表视图中有一个 Imagebutton，但是我无法在以下位置输入我的代码 (aspx.cs) `Imagebutton1.Click`：

```
<asp:ListView ID="lvFotos" runat="server" 
            GroupItemCount="6" InsertItemPosition="LastItem" align="center">
            <LayoutTemplate>
                <table border="0">
                    <tr ID="groupPlaceholder" runat="server">
                    </tr>
                </table>
            </LayoutTemplate>
            <GroupTemplate>
                <tr>
                    <td ID="itemPlaceholder" runat="server">
                    </td>
                </tr>
            </GroupTemplate>
            <ItemTemplate>
                <td align="center" height="150px" 
                    style="background-color: #ffffff;color: #ffffff; border:none;" width="142px">

                    <asp:ImageButton ID="ImageButton1" ImageUrl="<%# Container.DataItem  %>" runat="server" Width="142" Height="142" />                       

                 </td>
            </ItemTemplate>
            <InsertItemTemplate>

            </InsertItemTemplate>
        </asp:ListView> 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:07:38.890

您应该使用 listview ItemCommand 事件。

```
<asp:ImageButton ID="ImageButton1" ImageUrl="<%# Container.DataItem  %>" runat="server" Width="142" Height="142" CommandName="Fire_click_event" /> 
```

```
public void ListView1_ItemCommand(object sender, ListViewCommandEventArgs e)
    {
        if(e.CommandName != "Fire_click_event")
        {
             // Do what you want in click event
        }
    } 
```

# wpf - MVVM - 动态创建视图/视图模型的多个实例

> ID：14937402
> 
> 赞同：0
> 
> 时间：2013-02-18T13:25:11.157
> 
> 标签：wpf, mvvm

我需要显示一些图形/图表“缩略图”。单击其中一个将显示“扩展视图”（在单独的面板中），该视图显示更大版本的图表，以及用于查看和操作图表的控件。

会有许多不同的图表，每个图表都以不同的方式绘制我的数据。此外，给定的图表类型可能会出现多次，每次都绘制不同的数据子集。“扩展”视图中的控件也会因一种图表类型而异，因此这里几乎没有共性。

我正在努力弄清楚如何在 MVVM 中对所有这些进行建模，特别是考虑到需要动态创建未知数量的缩略图（在某些情况下还有多个相同类型的实例）。

大声思考，我想我需要一个表示单个缩略图的视图/视图模型（视图包含图表组件，VM 公开要绘制的数据）。我想我还需要一个用于“缩略图列表”UI 的 V/VM，负责创建缩略图并通过集合公开它们以绑定到列表。但是它是如何实例化这些的呢？虚拟机被注入到它的视图中，这表明“缩略图列表”虚拟机必须动态实例化缩略图视图——但虚拟机不应该知道视图吗？！

最后，当我显示“扩展”视图时，（以某种方式）将缩略图中使用的图表组件/视图传递给它是有意义的，以避免再次渲染图表，但是如何？

如果相关/有帮助，我将使用 Castle Windsor 进行依赖注入，以及 Prism 的导航功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:39:19.360

这确实是一个复杂的话题，...

我会为图标列表建议一个虚拟机，而不一定是图标本身。这可以绑定到 的属性`IconListViewModels`。然后你应该考虑一个`ChartViewModelFactory`. 它与您的 DIC 配合使用。

一个重要的讨论是 VM-V 的结合。首先查看或首先查看模型...一种方法也可能是`ViewResolver`根据您的视图模型返回匹配的视图...这可以依赖于某种约定。所以最后的步骤可能是向工厂询问视图模型，找到匹配的视图将它们粘合在一起并将它们绑定到内容呈现器......

我希望这有助于你开始......

# apache - 使用 Apache ProxyPass 连接到 Tomcat Java WebApps 时找不到我的 PHP WebApps

> ID：14937403
> 
> 赞同：0
> 
> 时间：2013-02-18T13:25:11.627
> 
> 标签：apache, ajp, proxypass

我有使用 proxypass mod 到 tomcat 的 apache-http 设置：

```
<VirtualHost *:80>
    ServerAdmin john@doe.com
    ServerName <my domain>.com
    ServerAlias www.<my domain>.com
    ProxyPass / ajp://localhost:8080/<web-app context root>/
    ProxyPassReverse / http://localhost:8080/<web-app context root>/
    ErrorLog logs/<my domain>.com-error_log
    CustomLog logs/<my domain>.com-access_log combined
</VirtualHost> 
```

使用此配置，所有流量都被很好地转发。

但是，我在 apache 上也有一些 php 页面，通过这种配置，我得到了 HTTP-404。

是否可以混合 php 站点并将此设置与 java 托管站点进行设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:49:22.870

您可以使用添加排除项！句法。

```
ProxyPass /phpmyadmin ! 
```

# android - MapFragment 的 onCreateView 中的 StackOverFlowError

> ID：14937404
> 
> 赞同：1
> 
> 时间：2013-02-18T13:25:13.077
> 
> 标签：android, stack-overflow, google-maps-android-api-2

```
02-18 17:17:58.929: E/ACRA(6889): com.App.mobileapp fatal error : null
02-18 17:17:58.929: E/ACRA(6889): java.lang.StackOverflowError
02-18 17:17:58.929: E/ACRA(6889):   at maps.c.n.a(Unknown Source)
02-18 17:17:58.929: E/ACRA(6889):   at maps.c.n.b(Unknown Source)
02-18 17:17:58.929: E/ACRA(6889):   at maps.c.n.a(Unknown Source)
02-18 17:17:58.929: E/ACRA(6889):   at maps.a.ae.d(Unknown Source)
02-18 17:17:58.929: E/ACRA(6889):   at maps.a.bq.a(Unknown Source)
02-18 17:17:58.929: E/ACRA(6889):   at maps.y.al.a(Unknown Source)
02-18 17:17:58.929: E/ACRA(6889):   at maps.y.ae.a(Unknown Source)
02-18 17:17:58.929: E/ACRA(6889):   at maps.y.ae.a(Unknown Source)
02-18 17:17:58.929: E/ACRA(6889):   at maps.y.ae.a(Unknown Source)
02-18 17:17:58.929: E/ACRA(6889):   at maps.y.bu.a(Unknown Source)
02-18 17:17:58.929: E/ACRA(6889):   at maps.y.p.onCreateView(Unknown Source)
02-18 17:17:58.929: E/ACRA(6889):   at com.google.android.gms.maps.internal.IMapFragmentDelegate$Stub.onTransact(IMapFragmentDelegate.java:107)
02-18 17:17:58.929: E/ACRA(6889):   at android.os.Binder.transact(Binder.java:279)
02-18 17:17:58.929: E/ACRA(6889):   at com.google.android.gms.maps.internal.IMapFragmentDelegate$a$a.onCreateView(Unknown Source)
02-18 17:17:58.929: E/ACRA(6889):   at com.google.android.gms.maps.SupportMapFragment$a.onCreateView(Unknown Source)
02-18 17:17:58.929: E/ACRA(6889):   at com.google.android.gms.internal.d$4.a(Unknown Source)
02-18 17:17:58.929: E/ACRA(6889):   at com.google.android.gms.internal.d.a(Unknown Source)
02-18 17:17:58.929: E/ACRA(6889):   at com.google.android.gms.internal.d.onCreateView(Unknown Source)
02-18 17:17:58.929: E/ACRA(6889):   at com.google.android.gms.maps.SupportMapFragment.onCreateView(Unknown Source)
02-18 17:17:58.929: E/ACRA(6889):   at com.App.mobileapp.maps.MapFragment.onCreateView(MapFragment.java:19)
02-18 17:17:58.929: E/ACRA(6889):   at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:846)
02-18 17:17:58.929: E/ACRA(6889):   at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1061)
02-18 17:17:58.929: E/ACRA(6889):   at android.support.v4.app.FragmentManagerImpl.addFragment(FragmentManager.java:1160)
02-18 17:17:58.929: E/ACRA(6889):   at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:272)
02-18 17:17:58.929: E/ACRA(6889):   at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:563)
02-18 17:17:58.929: E/ACRA(6889):   at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
02-18 17:17:58.929: E/ACRA(6889):   at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
02-18 17:17:58.929: E/ACRA(6889):   at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
02-18 17:17:58.929: E/ACRA(6889):   at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
02-18 17:17:58.929: E/ACRA(6889):   at com.actionbarsherlock.internal.ActionBarSherlockCompat.setContentView(ActionBarSherlockCompat.java:853)
02-18 17:17:58.929: E/ACRA(6889):   at com.actionbarsherlock.app.SherlockFragmentActivity.setContentView(SherlockFragmentActivity.java:262)
02-18 17:17:58.929: E/ACRA(6889):   at com.App.mobileapp.maps.SearchViewOnMapActivity.onCreate(mMapActivity.java:67)
02-18 17:17:58.929: E/ACRA(6889):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
02-18 17:17:58.929: E/ACRA(6889):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
02-18 17:17:58.929: E/ACRA(6889):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
02-18 17:17:58.929: E/ACRA(6889):   at android.app.ActivityThread.access$1500(ActivityThread.java:117)
02-18 17:17:58.929: E/ACRA(6889):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
02-18 17:17:58.929: E/ACRA(6889):   at android.os.Handler.dispatchMessage(Handler.java:99)
02-18 17:17:58.929: E/ACRA(6889):   at android.os.Looper.loop(Looper.java:130)
02-18 17:17:58.929: E/ACRA(6889):   at android.app.ActivityThread.main(ActivityThread.java:3687)
02-18 17:17:58.929: E/ACRA(6889):   at java.lang.reflect.Method.invokeNative(Native Method)
02-18 17:17:58.929: E/ACRA(6889):   at java.lang.reflect.Method.invoke(Method.java:507)
02-18 17:17:58.929: E/ACRA(6889):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
02-18 17:17:58.929: E/ACRA(6889):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
02-18 17:17:58.929: E/ACRA(6889):   at dalvik.system.NativeStart.main(Native Method) 
```

**这是堆栈跟踪**

在`setContentView(R.layout.map);`的`mMapActivity`

并且`MapFragment.java:19`是

```
View root = super.onCreateView(inflater, container, savedInstanceState); 
```

**完成 MapFragment.java**

```
public class MapFragment extends SherlockMapFragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View root = super.onCreateView(inflater, container, savedInstanceState);
        return root;
    }
    } 
```

**地图.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<fragment
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/map_searchViewOnMap"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_above="@id/loadButton_searchViewOnMap"
    class="com.App.mobileapp.maps.MapFragment" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:01:17.847

嗯，这看起来不太好。由于您的堆栈跟踪没有显示无限递归的迹象，因此您只是在正常执行中耗尽了堆栈空间。主应用程序线程只有 8KB 的堆栈空间 IIRC。

您将不得不检查堆栈并找出可以删除调用的位置。例如，您上面的代码不需要 override `onCreateView()`，因为您目前没有在那里做任何事情。

您也可以考虑将其发布到[Maps issue tracker](http://code.google.com/p/gmaps-api-issues/issues/list)，因为与您的代码相比，maps 代码似乎更容易导致堆栈消耗过多，因此也许它们可以在未来改善问题。

# git - npm git 协议依赖

> ID：14937405
> 
> 赞同：17
> 
> 时间：2013-02-18T13:25:17.280
> 
> 标签：git, npm

在工作中，我们在 HTTP 代理后面，并且 git 协议（端口 9418）被拒绝。我的项目具有 NPM 依赖项，其中一些依赖项具有使用 git 协议的依赖项，例如：

在我的`package.json`

```
"dependencies": {
    "jsdoc3" : "git+https://github.com/jsdoc3/jsdoc.git"
} 
```

和`package.json`jsdoc3 的：

```
"dependencies": {
    "crypto-browserify": "git://github.com/dominictarr/crypto-browserify.git#95c5d505",
    "github-flavored-markdown": "git://github.com/hegemonic/github-flavored-markdown.git"
} 
```

我怎样才能获得这些依赖关系，如何告诉 NPM 使用`git+https://`协议而不是`git://`协议或能够使用 git 协议？

为了简化我在 Windows 上的操作（在 Linux 上创建 SSH 隧道会更容易），我使用 GIT-Bash。

谢谢

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-10-31T15:05:34.457

您可以使用以下命令告诉 git 使用 https 而不是 git://：

```
git config --global url."https://".insteadOf git:// 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-19T11:03:40.090

最后我找到了一个肮脏的解决方案，但效果很好。我已经修改了 NPM 的代码，用协议替换了`git`协议`http`（感谢开源）

在*npm v1.1.69 上*，在文件`npm/lib/cache.js`中，我在函数中添加了以下几行`addRemoteGit`

```
 // ssh paths that are scp-style urls don't need the ssh://
 if (parsed.pathname.match(/^\/?:/)) {
   u = u.replace(/^ssh:\/\//, "")
 }

 //begin trick
 if(/^git:/.test(u)){
     u = u.replace(/^git/, 'https');
 }
 //end trick

 log.verbose("addRemoteGit", [u, co]) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-06-05T14:29:35.277

npm wiki 中建议了两个 git 命令（参考：[npm 仅默认使用 git:// 和 ssh+git://](https://github.com/npm/npm/wiki/Troubleshooting#npm-only-uses-git-and-sshgit-urls-for-github-repos-breaking-proxies)）。

```
git config --global url."https://github.com/".insteadOf git@github.com:
git config --global url."https://".insteadOf git:// 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T14:11:35.763

可以在您的依赖 URL中指定 `git+https://`或`git+http://`

我从以下 package.json

```
{
  "name": "Sample package",
  "description": "Pacake for a Stackoverflow question",
  "author": "rk <rk@example.sampletld>",
  "dependencies": {
    "crypto-browserify": "git+https://github.com/dominictarr/crypto-browserify.git#95c5d505",
    "github-flavored-markdown": "git+https://github.com/hegemonic/github-flavored-markdown.git"
  },
  "engine": "node 0.4.1"
} 
```

然后我跑了`npm install`，其中`node_modules`包含以下内容

```
C:\Users\myself\node\node_modules>dir
 Volume in drive C is WINDOWS
 Volume Serial Number is 6E7A-96BE

 Directory of C:\Users\myself\node\node_modules

18/02/2013  13:57    <DIR>          .
18/02/2013  13:57    <DIR>          ..
18/02/2013  13:58    <DIR>          .bin
18/02/2013  13:57    <DIR>          crypto-browserify
18/02/2013  13:56    <DIR>          express
18/02/2013  13:57    <DIR>          github-flavored-markdown
18/02/2013  13:56    <DIR>          optimist
               0 File(s)              0 bytes
               7 Dir(s)  31,641,919,488 bytes free

C:\Users\myself\node\node_modules> 
```

我用 git+http 和 git+https 两种协议都试过了，两者都有效，但裸 http 无法工作，产生错误。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-03-23T14:32:56.433

除了@Nowres 建议之外，我还必须执行以下操作才能使其正常工作

```
git config --global url."https://github.com/".insteadOf git@github.com:
git config --global url."https://".insteadOf git:// 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-02-10T10:58:44.563

`npm ci`一直在尝试使用`ssh://`，所以我不得不做以下事情：

```
git config --global url."https://github.com/".insteadOf git@github.com:
git config --global url."https://".insteadOf ssh:// 
```

# c++ - Visual Studio 项目导出 dll 函数列表（签名）

> ID：14937409
> 
> 赞同：0
> 
> 时间：2013-02-18T13:25:33.480
> 
> 标签：c++, visual-studio, dll, dllexport

是否有某种方法/工具可以创建`__declspec (dllexport)`在 Visual Studio 中具有指令的所有函数（带参数）的列表？

我当然可以创建脚本来解析项目中的所有头文件/cpp 文件 - 但是感觉就像创建完整的 C 预处理器来检查`#define`等。在 Visual Studio 中是否有“隐藏”方法来创建包含所有内容的纯文本文件dll中导出函数的完整函数签名？

我应该解析使用 dll 创建的 .lib 文件吗？- 如何？- 请注意，我正在寻找**完整**的函数签名，因此包括参数类型和命名空间等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T13:32:43.967

您可以使用 DependencyWalker 工具，它是以前随 Visual Studio 一起发布的旧工具。您可以从[http://www.dependencywalker.com/](http://www.dependencywalker.com/)下载它。

打开您的 DLL，选择所有函数名称，将其复制并粘贴到您的文本文件中。

# java - 如何在不扩展 Activity 的类中使用 getIntent()？

> ID：14937410
> 
> 赞同：4
> 
> 时间：2013-02-18T13:25:33.683
> 
> 标签：java, android, android-intent

我正在尝试从类“Play”中传递一个字符串，该类通过以下方式扩展 Activity：

```
Bundle data = new Bundle();
Intent i = new Intent(Play.this, Receive.class);
String category;

data.putString("key", category);
i.putExtras(data); 
```

然后，作为非Activity类且不扩展Activity的“Receive”类将从“Play”接收字符串。

但是当我尝试使用此代码接收数据时：

```
Bundle receive = new Bundle();
String passed;

receive = getIntent().getExtras();
passed = receive.getString("key"); 
```

我收到关于“getIntent()”一词的错误，并建议我创建一个方法 getIntent()。

这个问题的可能解决方案是什么？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T13:34:03.233

意图在这里不是必需的。你可以这样做：

Play.class：

```
public String getCategory() {
    return category;
} 
```

在 Receiver.class 中：

```
Play playObject = new Play();
passed = playObject.getCategory(); 
```

或者您可以使用提到的 pK 静态字段，但这并不总是一个好的模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T13:32:34.193

您应该使用 a`public static variable`并使用它来存储数据并从其他类中获取数据。

> 由于没有在 Android 中扩展 Activity 类，意图就无法工作。

在你的情况下，它会像。

`public static category="some category";`

要访问另一个班级，

`String dataFromActivity=NameOFClassWhereCategoryIsDefined.category;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T13:31:37.043

你不能 getIntent(); 从不扩展 Activity 的类中。正如 Sprigg 提到的，您将不得不在类之间使用其他通信方式。

# html - 如何将旧网站页面重定向到具有相同域但新 html 页面名称的新网站？

> ID：14937411
> 
> 赞同：-1
> 
> 时间：2013-02-18T13:25:39.740
> 
> 标签：html, .htaccess, redirect, web

我正在开发一个网站，该网站的所有页面名称都从旧版本更改，但它仍然具有相同的域名。我要做的就是将谷歌搜索上的页面链接重定向到域和/或将页面重定向到名为版本的新页面。

我知道这可以通过 .htaccess 文件来完成。但我不确定我是如何尝试的，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:29:50.380

要告诉 google 页面已更改名称，您应该使用 301 重定向。

这是一个关于如何做这些的很好的文档：[http ://httpd.apache.org/docs/current/mod/mod_alias.html#redirectpermanent](http://httpd.apache.org/docs/current/mod/mod_alias.html#redirectpermanent)

使用 mod_alias 您还可以定义正则表达式模式，例如 /(.*)_old.html 必须转到 /$1_new.html 或类似的东西，通过使用 RedirectMatch。

确保您使用永久重定向，因为谷歌会注意您是使用永久（301）还是临时（302）重定向。

# asp.net - 如何二进制序列化可移植类库中的类？

> ID：14937412
> 
> 赞同：7
> 
> 时间：2013-02-18T13:25:52.747
> 
> 标签：asp.net, session-state, portable-class-library

我在我的 asp.net 应用程序中使用可移植类库，并且在部署到 Azure 时，我的会话状态需要被序列化。此 PCL 中的类没有框架子集中不可用的 SerializableAttribute sinds。我不能将这些类放在 ASP.NET 会话中吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T09:15:42.847

好吧，您可以使用可用于可移植类库的可用的第 3 方序列化程序之一：

*   [protobuf-net](http://code.google.com/p/protobuf-net/) - 二进制
*   [json.net](http://james.newtonking.com/projects/json-net.aspx)

两者都在[NuGet上可用](http://nuget.org)

# jquery - jQuery函数后内联元素不起作用

> ID：14937414
> 
> 赞同：-1
> 
> 时间：2013-02-18T13:26:04.717
> 
> 标签：jquery, html-lists

这是我的代码：

HTML：

```
<div id="top">
  <ul>
    <li>Setting</li>
    <li id="copyright">CopyRight</li>
    <li id="e_copyright">&copy CopyRight Daarkoob Data Processing Co.</li>
  </ul>
</div> 
```

CSS：

```
#top {
    background: #000;
    height: 35px;
    border-top: 1px solid #FFF;
    color: #999;
    text-align: left;
    padding-bottom: 5px;
}

#top ul {
    list-style-type: none;
}

#top ul li {
    display: inline;
    cursor: pointer;
    margin-right: 50px;
}

#top ul li#e_copyright {
    display: none;
} 
```

JS：

```
$(document).ready(function(){
  $("#top ul li#copyright").click(function(){
    $("#top ul li#copyright").hide(function(){
      $("#top ul li#e_copyright").show();
    });
  })
}); 
```

当我点击**CopyRight**时，第三个 li ( e_copyright ) 显示在**Setting**的底部，但我猜它会出现在 Settinf 的内联，因为我将**li 的**显示设置为内联。

单击第二个时如何更改代码以显示第三个？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:29:16.947

另一种方法：这里是`li`在点击版权行后添加一行的代码。它只会使用`one`JQuery 事件发生一次。

```
<div id="top">
  <ul>
    <li>Setting</li>
    <li id="copyright">CopyRight</li>
  </ul>
</div>

$(document).ready(function(){
  $("#top ul li#copyright").one('click',function(){
    $("#top li:last").after('&copy CopyRight Daarkoob Data Processing Co.')
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T13:39:12.100

试试这个：

```
$("#top ul li#copyright").click(function () {
    $(this).hide(function () {
        $(this).next().show().css({
            "display": "inline"
        });
    });
}); 
```

[**演示**](http://jsfiddle.net/D7PDq/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T13:29:10.037

ID 是唯一的，因此 ID 选择器是最具体且非冗余的。也不需要使用父选择器，这只会增加不必要的开销。请参阅下面的更新代码：

```
$(document).ready(function(){
    $("#copyright").click(function(){
        $(this).hide();
        $("#e_copyright").show().css('display','inline');
    });
}); 
```

# java - 从启动画面启动 Activity，我应该使用 run() 还是 runOnUiThread()？

> ID：14937415
> 
> 赞同：1
> 
> 时间：2013-02-18T13:26:05.030
> 
> 标签：java, android, multithreading, splash-screen

我有一个启动画面（徽标活动），可在应用启动前 3 秒显示公司名称。我从一个线程启动 Main Activity，这里是代码：

```
public class Logo extends Activity {

Thread t;
public boolean dead = false;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.logo);

    t = new Thread() {
        public void run() {
            try {
                Intent i = new Intent(Logo.this, Main.class);
                Thread.sleep(3000);
                if (!dead) {
                    startActivity(i);
                }
                finish();
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    };
    t.start();
} 
```

Main Activity 是从工作线程中调用的，这是正确的吗？此代码（使用`runOnUiThread`）有什么不同？

```
...
if (!dead) {
    runOnUiThread(new Runnable() {
        @Override
        public void run() {
           Intent i = new Intent(Logo.this, Main.class);
           startActivity(i);
        }
    });
}
... 
```

我认为在调试模式下这段代码没有区别（相同的线程、相同的操作等）。哪个是对的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T13:35:31.993

开始一个我认为不是 UI 操作的意图。runOnUI 线程在 UI 线程上运行 UI 操作。因此，您可以使用任一线程（runOnUI 或普通）。在这种情况下，正常线程可能会很好。但我建议您改用计时器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T14:46:25.283

老实说，我不喜欢 Thread.sleep。请看看我的解决方案：

```
new Timer().schedule(new TimerTask() {
    @Override
    public void run() {
      // Do your work here like... startActivity...
    }
}, SPLASH_DURATION); // SPLASH_DURATION IS IN MILLISECONDS LIKE 3000 
```

您还可以阻止用户以阻止返回键，如下所示：

```
@Override
public void onBackPressed() {
    // do nothing! disable user interaction!
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T13:45:48.503

您应该在“doInBackground”后台线程中使用 AsyncTask，然后在 UI 线程上运行“PostExecute”而不是让您的线程（该线程不是 UIThread）休眠，而不是开始您的新活动

```
private class mSplashViewer extends AsyncTask<Void,Void,Void>{

 protected void doInBackground(Void params){

   Thread.currentThread().sleep(3000);
   return null;
 }

 protected void onPostExecute(){
  startActivity(...);
 }

} 
```

# php - 如何处理多个构造函数参数或类变量？

> ID：14937416
> 
> 赞同：0
> 
> 时间：2013-02-18T13:26:09.953
> 
> 标签：php, oop, constructor

我如何知道在构造函数中加载什么以及稍后使用 set 方法设置什么？

例如，我有一个问题类，大部分时间会调用以下变量：

```
protected $question;
protected $content;
protected $creator;
protected $date_added;
protected $id;
protected $category; 
```

目前我拥有它，所以只有最基本`$id`的`$question`, 和`$content`被设置在构造函数中，所以我不会开始构建大量的构造函数参数。然而，这意味着当我在其他地方创建一个新的问题对象时，我必须在意味着“设置器代码”在各处重复之后立即设置该对象的其他属性。

我是否应该立即将它们全部传递给构造函数，按照我已经这样做的方式进行，还是有更好的解决方案我错过了？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:38:04.143

流畅的界面是另一种解决方案。

```
class Foo {
  protected $question;
  protected $content;
  protected $creator;
  ...

  public function setQuestion($value) {
    $this->question = $value;
    return $this;
  }

  public function setContent($value) {
    $this->content = $value;
    return $this;
  }

  public function setCreator($value) {
    $this->creator = $value;
    return $this;
  }

  ...
}

$bar = new Foo();
$bar
  ->setQuestion('something')
  ->setContent('something else')
  ->setCreator('someone'); 
```

或者使用继承...

```
class Foo {
  protected $stuff;

  public function __construct($stuff) {
    $this->stuff = $stuff;
  }

  ...
 }

class bar extends Foo {
  protected $moreStuff;

  public function __construct($stuff, $moreStuff) {
    parent::__construct($stuff);
    $this->moreStuff = $moreStuff;
  }

  ...
} 
```

或者使用可选参数...

```
class Foo {
  protected $stuff;
  protected $moreStuff;

  public function __construct($stuff, $moreStuff = null) {
    $this->stuff = $stuff;
    $this->moreStuff = $moreStuff;
  }

  ...
} 
```

无论如何，有很多好的解决方案。请不要将单个数组用作参数或 func_get_args 或_get */* _set/__call 魔术，除非您有充分的理由这样做，并且已经用尽了所有其他选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T13:39:51.340

我会使用我想要设置的值将一个数组传递给构造函数。

```
public function __construct(array $values = null)
{
    if (is_array($values)) {
        $this->setValues($values);
    }
} 
```

然后，您需要一种方法`setValues`来动态设置值。

```
public function setValues(array $values)
{
    $methods = get_class_methods($this);
    foreach ($values as $key => $value) {
        $method = 'set' . ucfirst($key);
        if (in_array($method, $methods)) {
            $this->$method($value);
        }
    }
    return $this;
} 
```

为此，您需要为您的属性设置设置方法，例如`setQuestion($value)`等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T13:28:11.537

根据语言，任何一个类都可以有多个构造函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T13:32:16.193

您可以使用数组作为构造函数或 setter 方法的参数。

举个例子：

```
public function __construct($attributes = array()) {
  $this->setAttributes($attributes);
}  

public function setAttributes($attributes = array()) {
  foreach ($attributes as $key => $value) {
    $this->{$key} = $value;
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-18T13:32:35.177

PHP 不支持传统的构造函数重载（与其他 OO 语言一样）。一种选择是将参数数组传递给构造函数：

```
public function __construct($params)
{

}

// calling it
$arr = array(
    'question' => 'some question',
    'content' => ' some content'
    ...
);
$q = new Question($arr); 
```

使用它，您可以自由传递可变数量的参数，并且不依赖于参数的顺序。同样在构造函数中，您可以设置默认值，因此如果变量不存在，请使用默认值。

# android - 将文件复制到外部SD卡android

> ID：14937419
> 
> 赞同：0
> 
> 时间：2013-02-18T13:26:20.073
> 
> 标签：android, cordova

我无法将文件复制到外部 SD 卡。不显示任何错误，实际上显示成功，但文件不在 sd 卡上。代码如下：

```
window.resolveLocalFileSystemURI(fileURI, step1,fail);

function step1(tmp_file)
{
       file = tmp_file;
       window.resolveLocalFileSystemURI("file:///mnt/extsd", step2,fail); //resolve destinaion
}

function step2(destination)
{
        file.moveTo(destination,"example.jpg",move_success, move_fail);
} 
```

所以最后它调用move_success。

**注意：如果我将路径从 'file:///mnt/extsd' 更改为内部 sdcard 路径 'file:///mnt/sdcard'**

清单中的权限

```
<uses-permission android:name="android.permission.CAMERA" />
        <uses-permission android:name="android.permission.VIBRATE" />
        <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
        <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
        <uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
        <uses-permission android:name="android.permission.READ_PHONE_STATE" />
        <uses-permission android:name="android.permission.INTERNET" />
        <uses-permission android:name="android.permission.RECEIVE_SMS" />
        <uses-permission android:name="android.permission.RECORD_AUDIO" />
        <uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
        <uses-permission android:name="android.permission.READ_CONTACTS" />
        <uses-permission android:name="android.permission.WRITE_CONTACTS" />
        <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
        <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:57:07.127

您应该构建您的路径，而不是将其定义为默认路径，因为并非在所有设备中 sdcard 都称为“sdcard”，例如，我有一个 chinnese 平板电脑，它有 2 个 sdcard 插槽，所以我必须使用路径“sdcard2 “ 你能行的：

```
File sdcard = Environment.getExternalStorageDirectory();
String path = "file://"+sdcard.getAbsolutePath(); 
```

然后你可以使用变量

```
window.resolveLocalFileSystemURI(path, step2,fail); //resolve destinaio 
```

或者，您可以使用此方法复制文件：

```
public void copy(File src, File dst) throws IOException {
    try {
        InputStream in = new FileInputStream(src);
        OutputStream out = new FileOutputStream(dst);

        // Transfer bytes from in to out
        byte[] buf = new byte[1024];
        int len;
        while ((len = in.read(buf)) > 0) {
            out.write(buf, 0, len);
        }
        in.close();
        out.close();
    } catch (IOException io) {
        Toast.makeText(this, "Error: " + io, Toast.LENGTH_LONG).show();
    }
} 
```

您可以快速复制文件，然后将其删除。

或者作为其他选择，您可以使用文件的属性 renameTo()，例如：

```
File sdcard = Environment.getExternalStorageDirectory();
File example= new File(sdcard.getAbsolutePath()+"/example.txt");
File newpath= new File(sdcard.getAbsolutePath()+"/examplefolder/example.txt");
example.renameTo(newpath);//this will move the file to the new path 
```

# javascript - 为什么我的“el”在 Backbone 中不起作用？

> ID：14937423
> 
> 赞同：0
> 
> 时间：2013-02-18T13:26:29.633
> 
> 标签：javascript, jquery, backbone.js, underscore.js

```
define([
    'jquery',
    'underscore',
    'backbone',
    'text!modules/index/templates/container.html'
], function($, _, Backbone, container_temp){
    var indexView = Backbone.View.extend({
        el: $('.main_container'),
        initialize:function(){
            _.bindAll(this, 'render');
        },
        render:function(){
            var $this = this;
            var $el = this.el;
            $.get('/js/index/render', {}, function(data){
                var dat = JSON.parse(data);
                $this.pars = dat;
                var tpl = _.template(container_temp, dat);
                $el.html(tpl);
            });
        }
    });
    return new indexView;
}); 
```

运行此代码应该用 HTML 填充 $el。但是，我的浏览器在`$el.html(tpl);`.

```
Uncaught TypeError: Object #<HTMLDivElement> has no method 'html' 
```

要解决这个问题，我必须这样做：`$($el).html(tpl);`让 jquery 注册。

这似乎很尴尬。在我过去的项目中，我总是以前一种方式进行操作，并且一直有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T13:29:25.793

`this.el`是原始 DOM 元素，但该`html`方法属于 jQuery。

试试`var $el = this.$el;`你的渲染方法：

```
render:function(){
    var $this = this;
    var $el = this.$el;
    $.get('/js/index/render', {}, function(data){
        var dat = JSON.parse(data);
        $this.pars = dat;
        var tpl = _.template(container_temp, dat);
        $el.html(tpl);
    });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T13:29:31.900

如果你看看你的渲染功能：

```
render:function(){
        var $this = this;
        var $el = this.el;
        $.get('/js/index/render', {}, function(data){
            var dat = JSON.parse(data);
            $this.pars = dat;
            var tpl = _.template(container_temp, dat);
            $el.html(tpl);
        });
    } 
```

您显式分配`var $el`，因此以下 $el 等于 this.el，这是原始 dom 元素，没有您通常使用 $el 获得的 jQuery 包装器。

试试这个：`this.$el`没有`var declaration`.

因此，要将 $el 放入 $.get 范围，代码如下所示：

```
render:function(){
    var $this = this;
    var element = this.$el;
    $.get('/js/index/render', {}, function(data){
        var dat = JSON.parse(data);
        $this.pars = dat;
        var tpl = _.template(container_temp, dat);
        element.html(tpl);
    });
} 
```

# string - 如何在字符串中搜索字符串？

> ID：14937425
> 
> 赞同：-7
> 
> 时间：2013-02-18T13:26:37.303
> 
> 标签：string

我可以在字符串中搜索字符串吗？
我存储了一个页面的源代码，现在我必须在代码中搜索各种刺（存储在参数中）。
有我可以使用的命令吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T13:27:51.513

在记事本中打开源代码

按 Ctrl-F

键入要搜索的字符串

# ajax - 使用 ajax 加载内容，页脚和内容短暂上移

> ID：14937430
> 
> 赞同：0
> 
> 时间：2013-02-18T13:26:58.207
> 
> 标签：ajax, position, footer

我正在制作我的新作品集，虽然它还远未完成，但我正在接近完成设计。只有一个问题 atm 我不知道如何解决。如果你去[http://minimalito.be/index.html](http://minimalito.be/index.html)你会去主页，然后当你点击“关于”时，你会注意到页脚非常短暂地跳转到我的页面顶部......

当您从主页转到 about 部分时，不仅页脚会移动，而且整个内容也会短暂向上移动。有人会知道为什么吗？内容是用ajax加载的，所以这可能与它有关，也许我定位一些div错误？我真的没有看到它。

这是我的代码的粗略布局，更详细的代码+示例，当然可以查看网站本身。

谢谢！

```
 <div id="content" class="block">
        <div id="header">
            <nav class="centered">
                <h2><a href="index.html" class="menuLink">minimalito.</a></h2>
                <ul>
                    <li><a href="design.html" id="aboutLink" class="menuLink">about.</a></li>
                    <li><a href="work.html" id="workLink" class="menuLink">work.</a></li>
                    <li><a href="#" id="contactLink">contact.</a></li>
                </ul>       
            </nav>
            <h1 id="contact" class="ninja">minimalito@info.be</h1>

          </div>
            <div id="load">Loading</div>

            <div id="page">

            </div>
            <div id="footer">

          </div>

    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:41:08.897

您`#header`的位置固定，因此它不是文档流的一部分。 有一个顶边距，可以同时向下`#content`推，以便它们位于下方.`#content``#footer``#header#`

现在，当您单击顶部的菜单链接之一时，`fadeOut`会调用其上`#content`的设置`display: none;`。没有任何东西可以将属于文档流的元素向下推，`#footer`一直移动到页面顶部，直到异步加载新内容。

而不是`fadeOut`设置`display`考虑在元素不可见时`none`仅更改和替换内容。`opacity`

# symfony - 具有自定义用户提供者实体的递归角色

> ID：14937436
> 
> 赞同：0
> 
> 时间：2013-02-18T13:27:15.500
> 
> 标签：symfony, doctrine, symfony-2.1, roles

我有一个自定义用户提供者实体，它允许我连接用户。这个自定义用户提供者实体根据这个接口实现 UserInterface 我有一个“getRoles()”函数，它给了我用户的角色。

但我的角色是递归的。例子：一个用户得到了role1，role1继承了role2，所以用户得到了role1和role2。为了实现这种递归性，我创建了一个角色表、一个角色角色表（父/子）、一个用户表，最后是一个用户角色表。

要获得所有用户的角色，我必须使用 Doctrine 查询我的数据库，那么我可以从哪里做到这一点？似乎禁止从实体查询，并且我无法将查询放入实体存储库类中，因为我无法覆盖实体的“getRoles（）”，并且访问存储库表单实体似乎不是一个好主意.

P.-S.：感谢您对我的语法的宽容，这是我的第一条英文信息（我是法国人）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:58:18.700

解决方案是完全使用 Doctrine 的 ORM。

在 User 实体中添加一个集合变量，该变量引用所有使用 ORM 链接到他的 UserRole：

```
@ORM\OneToMany(targetEntity="RoleUser", mappedBy="user")
...
protected $roleUser; 
```

在 RoleUser 实体中添加一个允许将用户与正确的 RoleUser 绑定的 ORM：

```
@ORM\ManyToOne(targetEntity="User", inversedBy="roleUser")
...
protected $user; 
```

现在您可以获得链接到用户的所有用户角色。要获得角色，请在 UserRole 实体和 Role 之间以及 RoleRole 和 Role 之间编写“相同”的 ORM。最后，您可以通过 $rolesUtilisateur 从 User 访问您的角色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T14:40:11.257

Symfony 2.x 中的 DB 中没有角色层次结构。它在 security.yml 中配置，请查看[http://symfony.com/doc/current/book/security.html#hierarchical-roles](http://symfony.com/doc/current/book/security.html#hierarchical-roles)。

如果你不想直接从 Symfony 2 中使用这个特性，你必须自己实现一个 RoleVoter，它可以直接从数据库中获取角色层次结构。

另一种可能性是使用 Doctrine 事件侦听器（[http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/events.html](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/events.html)）从数据库加载层次结构。您可能需要收听 postLoad 事件。

# xml - 在 GWT 中的客户端和服务器之间共享 XML 处理代码

> ID：14937440
> 
> 赞同：0
> 
> 时间：2013-02-18T13:27:22.050
> 
> 标签：xml, gwt

我有一个特定的数据结构，它在 GWT 应用程序中的客户端和服务器部分之间共享。我需要能够在服务器和客户端上序列化/反序列化这个数据结构。

数据结构比较复杂，所以我想避免重复处理逻辑，即我想在客户端和服务器上使用相同的代码来序列化/反序列化这些数据。

如果我使用 XML，是否有任何直接的方法可以在客户端和服务器之间共享 XML 处理逻辑？客户端 XML 类不实现任何标准 Java XML 接口。是否有更通用的接口可以在客户端和服务器上使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T15:24:14.080

我倾向于说答案是否定的。

GWT XML 处理记录在这里 - [https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasics#DevGuideXML](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasics#DevGuideXML)

上述参考描述了如何以最佳方式在 GWT 中使用客户端服务器提供的 XML 数据。您必须记住，如果您尝试将服务器端处理逻辑**共享**给客户端，则性能会太重并且无法很好地扩展（尤其是在复杂数据中）

# java - 使用 JMX 公开一个 java 方法

> ID：14937444
> 
> 赞同：1
> 
> 时间：2013-02-18T13:27:24.540
> 
> 标签：java, jmx

我们可以通过 JMX 或作为 Web 服务公开一个 java 方法。在什么情况下我们使用 JMX 来公开一个 java 函数？jmx 比 webservice 有什么特别的优势吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T18:11:01.413

> jmx 比 webservice 有什么特别的优势吗？

JMX 很容易启用，jconsole 是一个很好的界面。此外，您将完全处理 Java 对象，而不必解释 HTTP 请求和响应。

但是，这实际上取决于您的使用和便利性。如果您已经公开了其他网络服务，那么我会坚持下去。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T22:18:01.120

需要考虑的几件事：

1.  消费者托管在哪里？如果它们通过防火墙到达您的服务器，您最好将您的方法公开为 Web 服务。如果你通过 JMX 公开它，你可能不得不依赖 jolokia 来通过 HTTP(S) 服务请求
2.  如果消费者是用 Java 以外的语言编写的，我更愿意将该方法公开为 Web 服务

# c# - 如何强制第 3 方 dll 在我的解决方案中使用另一个 dll 的较新版本？

> ID：14937453
> 
> 赞同：0
> 
> 时间：2013-02-18T13:27:47.510
> 
> 标签：c#, .net, visual-studio, console-application, versioning

我有一个引用 foo.dll 的控制台应用程序。并且 foo.dll - 以及我的控制台 - 引用了另一个 dll，即 boo.dll。

控制台应用程序引用 --> **boo.dll**和**傻瓜.dll** foo.dll 也引用 --> **boo.dll**但它指定了版本号：'1.2.0'

现在，想象一下我已经用更新的版本替换了 boo.dll。'1.3.0'

现在，由于 foo.dll 通过将版本号指定为 1.2.0 来引用 boo.dll，我的解决方案不再构建。

**如何强制 foo.dll 使用较新版本的 boo.dll**？我可以通过 app.config 实现这一点吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T13:31:07.337

您可以在配置文件中定义[绑定重定向](http://msdn.microsoft.com/en-us/library/eftw1fys.aspx)。这将尝试将所有 boo.dll 引用升级到定义的版本。

# math - vhdl 中整数的算术运算

> ID：14937456
> 
> 赞同：1
> 
> 时间：2013-02-18T13:27:52.410
> 
> 标签：math, integer, vhdl, operations

我正在尝试对一段 vhdl 代码中的整数进行一些数学运算，但是当我尝试编译该工具时，会显示“运算符的 0 定义“+”在此处匹配”。这是我正在尝试做的事情：

```
for i in 0 to arr_size - 1 loop
   for j in 0 to arr_size - 1 loop
      for k in 0 to arr_size - 1 loop
         for l in 0 to arr_size - 1 loop
            for m in 0 to arr_size - 1 loop
               mega_array(i)(j)(k)(l)(m) <= i*(arr_size**4) + j*(arr_size**3) + k*(arr_size**2) + l*(arr_size**1) + m*(arr_size**0);
            end loop;
         end loop;
      end loop;
   end loop;
end loop; 
```

在设置了 mega_array 的行中遇到了问题。请注意，整个块都在一个进程中。

此外：

```
arr_size : integer := 4;
sig_size : integer := 32

type \1-line\ is array (arr_size - 1 downto 0) of unsigned (sig_size - 1 downto 0);
type square is array (arr_size - 1 downto 0) of \1-line\;
type cube is array (arr_size - 1 downto 0) of square;
type hypercube is array (arr_size - 1 downto 0) of cube;
type \5-cube\ is array (arr_size - 1 downto 0) of hypercube;

signal mega_array : \5-cube\; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T13:44:14.950

阅读您的旧帖子时，mega_array 是一个 4 级数组，最低级别是无符号的。在这个问题的代码中，我看到了 5 个级别。所以在第五级你有`bit`。您不能将 a 分配`integer`给 a `std_logic`。

难道这个代码就是你想要的吗？

```
 for i in 0 to arr_size - 1 loop                -- 5-cube
        for j in 0 to arr_size - 1 loop            -- hypercube
            for k in 0 to arr_size - 1 loop        -- cube
                for l in 0 to arr_size - 1 loop    -- square
                   for m in 0 to arr_size - 1 loop -- 1-line
                      mega_array(i)(j)(k)(l) <= to_unsigned(i*(arr_size**4) + j*(arr_size**3) + k*(arr_size**2) + l*(arr_size**1), 32);
                   end loop
                end loop;
            end loop;
        end loop;
    end loop; 
```

`to_unsigned`函数将 转换为，`integer`的`unsigned`类型是什么`1-line`。第二个参数是将整数转换成的向量的大小。它必须与 的大小相同`1-line`。

# jquery - IE7 中 bxslider 的 z-index 菜单问题

> ID：14937471
> 
> 赞同：0
> 
> 时间：2013-02-18T13:28:35.683
> 
> 标签：jquery, css, internet-explorer-7, bxslider

我在 BX 滑块顶部使用下拉菜单，但我根本无法让它在 IE7 中显示在顶部！我到处寻找答案，仅在子项上的相对位置似乎不起作用。请问有人可以帮忙吗？

这是测试页面：[http ://theturning.co.uk/AMBA-NEW/](http://theturning.co.uk/AMBA-NEW/)

Ps - 我已经检查并尝试了关于 IE z-index 错误的其他帖子，但对我没有任何作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:47:28.497

我发现这些问题通常与没有设置 z-index 的父容器有关。尝试将标题元素上的 z-index 设置为 1

```
header {
   z-index: 1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-15T05:24:59.870

我遇到了同样的问题，我修复如下，

考虑如下的下拉导航菜单，

```
<ul id="nav">
    <li>Menu Item 1</li>
    <li>Menu Item 2
        <ul>
            <li>Sub Menu Item 1</li>
            <li>Sub Menu Item 2</li>
            <li>Sub Menu Item 3</li>
        </ul>
    </li>
    <li>Menu Item 3
        <ul>
            <li>Sub Menu Item 1</li>
            <li>Sub Menu Item 2</li>
        </ul>
    </li>
</ul> 
```

为所有子元素和孙元素设置 z-index，如下所示，

```
ul#nav * { z-index:9999 } /* maximum zoom index as your wish */ 
```

# mongodb - 如何使用 MongoDB 将域引用存储为 Grails 中另一个域的动态属性？

> ID：14937472
> 
> 赞同：0
> 
> 时间：2013-02-18T13:28:37.260
> 
> 标签：mongodb, grails, grails-orm

我希望能够将对域对象的引用存储为另一个域的动态属性。不幸的是，当我尝试保存这样的域对象时，我得到：

```
| Error 2013-02-18 14:03:09,352 [localhost-startStop-1] ERROR context.GrailsContextLoader  - Error initializing the application: can't serialize class Employee
Message: can't serialize class Employee 
```

这是代码[机器和员工是域]：

```
def m = new Machine(name: "Machine 01")
def e = Employee.findByName("employee name")
m['operator'] = e
m.save(failOnError: true) 
```

我想知道这是否可能？我认为应该，mongodb 插件上没有列出任何限制[我正在使用 1.1.0GA 和 Grails 2.2.0]。

```
class Machine {
    String name
}

class Employee {
    String name
} 
```

# html - 搜索引擎 - App Engine

> ID：14937475
> 
> 赞同：1
> 
> 时间：2013-02-18T13:28:48.680
> 
> 标签：html, google-app-engine, jsp, seo

我在 AppEngine 中托管了一个新创建的 Web 应用程序（仅 HTML）问题是，我怎样才能让这个页面出现在 Google 搜索引擎上？这像常规方法（robot.txt 等）吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:23:25.607

有两个简单的步骤可以通知 Google 您的新网站

1.  为您的静态页面创建[站点地图。](http://en.wikipedia.org/wiki/Sitemaps)您可以使用一些在线站点地图创建器，例如[http://www.xml-sitemaps.com/](http://www.xml-sitemaps.com/)
2.  [在Google 网站管理员工具](https://www.google.com/webmasters/tools/home?hl=en)中为您的网站创建新帐户，并在那里添加您新创建的站点地图（优化 > 站点地图）。

![谷歌网站管理员工具站点地图](../Images/dbc087799af48d88f3f2c30560523162.png)

您还可以使用[Google 网站管理员工具](https://www.google.com/webmasters/tools/home?hl=en)检查您的网站索引状态（健康 > 索引状态）。

![谷歌网站管理员工具索引状态](../Images/34d4b026d70721015cb22ea3eaf645c9.png)

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T14:43:13.187

如上所述，您可以做的一件事是将您的网站添加到 Google 网站管理员工具 ( [https://www.google.com/webmasters/tools/home](https://www.google.com/webmasters/tools/home) )

如果您的网站上有新闻，您也可以在 [http://support.google.com/news/publisher/bin/topic.py?hl=en&topic=2484652上提交您的内容](http://support.google.com/news/publisher/bin/topic.py?hl=en&topic=2484652)

您也可以将您的网站提交给 Google Analytics：[http ://www.google.com/analytics/](http://www.google.com/analytics/)

要在提交后几天/几周后检查您的网站是否被谷歌抓取，请 `site:yourwebsitename.com`在谷歌搜索栏中输入。

如果您有兴趣将您的网站添加到必应搜索，请尝试以下链接： http: [//www.bing.com/toolbox/submit-site-url](http://www.bing.com/toolbox/submit-site-url)

# join - 用 directshow 或其他方式加入 AVI 块的方法？

> ID：14937478
> 
> 赞同：1
> 
> 时间：2013-02-18T13:28:59.023
> 
> 标签：join, append, directshow, avi, cut

我正在尝试重新加入（一个原始）AVI 文件的较小块。那怎么办？我正在编程 C++ 并且到目前为止一直在使用 directshow 但似乎没有可用的过滤器来实现我想要的。像 AVI Append 过滤器之类的东西会很棒！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T07:36:29.190

没有标准的合并过滤器，您需要自己编写或寻找第三方解决方案。要编写自己的内容，您需要确保两个源上的媒体类型匹配，并更新它们上的时间戳以将各个部分拼接成单个流畅的流。

# c++ - 替换字符串时出现编译错误

> ID：14937479
> 
> 赞同：0
> 
> 时间：2013-02-18T13:29:09.297
> 
> 标签：c++, map, stl

我创建了一个 Url Encoder 类，其工作是对 Url 进行编码或解码。

为了存储特殊字符，我使用了 map `std::map<std::string, std::string> reserved`。

我已经像这样初始化了地图`this->reserved["!"] = ":)";`

为了从给定字符串中读取字符，我正在使用迭代器`for(string::iterator it=input.begin(); it!=input.end(); ++it)`

现在，当我尝试使用替换功能替换特殊字符时`encodeUrl.replace(position, 1, this->reserved[*it]);`

我收到以下错误

> Url.cpp：在成员函数'std::string Url::Url::UrlEncode(std::string)'中：
> Url.cpp:69:54：错误：从'char'到'const char*'的无效转换[ -fpermissive]
> /usr/include/c++/4.6/bits/basic_string.tcc:214:5: 错误：初始化 'std::basic_string<_CharT, _Traits, _Alloc>::basic_string(const _CharT*, const _Alloc& 的参数 1 ) [with _CharT = char, _Traits = std::char_traits, _Alloc = std::allocator]' [-fpermissive]

我不确定代码有什么问题。这是我的功能

```
string Url::UrlEncode(string input){

    short position = 0;
    string encodeUrl = input;

    for(string::iterator it=input.begin(); it!=input.end(); ++it){

        unsigned found = this->reservedChars.find(*it);

        if(found != string::npos){

            encodeUrl.replace(position, 1, this->reserved[*it]);
        }

        position++;

    }

    return encodeUrl;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:36:48.853

`it`是字符的迭代器（它有 type `std::string::iterator`）。因此，`*it`是一个字符。

你正在做`reserved[*it]`，并且由于你给`reserved`( `std::map<std::string, std::string>`) 的类型，下标运算符需要 a `string`，而不是 a `char`。

然后编译器尝试从`char`to的用户定义转换`std::string`，但没有构造函数`string`接受 a `char`。有一个接受 a`char const*`虽然（请参见[此处](http://en.cppreference.com/w/cpp/string/basic_string/basic_string)），但编译器无法将 a 转换`char`为 a `char const*`; 因此，错误。

另请注意，您不应该使用, 而是`unsigned`返回的值。`string::find()``string::size_type`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T13:36:53.520

好吧，您的解决方案中的错误是您试图将单个字符而不是`std::string`c 样式的 0 终止字符串 ( `const char *`) 传递给映射。

`std::string::iterator`一次迭代一个字符，因此您可能需要使用`std::map< char, std::string >`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T14:49:41.293

看起来 *it 的类型和什么不匹配

```
 reservedChars.find() 
```

应该接受。

尝试添加

```
const char* pit = *it; 
```

就在之前

```
unsigned found = this->reservedChars.find(*pit);

    if(found != string::npos){

        encodeUrl.replace(position, 1, this->reserved[*pit]); 
```

# iphone - 在 iOS 6 及更高版本中以编程方式请求访问联系人

> ID：14937481
> 
> 赞同：1
> 
> 时间：2013-02-18T13:29:12.377
> 
> 标签：iphone, contacts

如何在 iOS 6 及更高版本中访问联系人？我认为它需要一些许可。谁能告诉我如何以编程方式请求许可？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T13:39:09.030

```
ABAddressBookRef addressBookRef = ABAddressBookCreateWithOptions(NULL, NULL);
if (ABAddressBookGetAuthorizationStatus() == kABAuthorizationStatusNotDetermined) {
    ABAddressBookRequestAccessWithCompletion(addressBookRef, ^(bool granted, CFErrorRef error) {
        if (granted) {
            NSLog(@"Access granted!");
        } else {
            NSLog(@"Access denied!");
        }
    });
} 
```

**编辑：**
这个答案更详细一点：[https ://stackoverflow.com/a/12648938/322548](https://stackoverflow.com/a/12648938/322548)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T13:33:48.283

一旦您尝试从代码访问地址簿，iOS 将要求用户进行减免。

您无法请求许可，因为 iOS 会为您处理此问题。

您可以使用该方法检查权限状态`ABAddressBookGetAuthorizationStatus`，您需要将其添加[`AddressBook.framework`](http://developer.apple.com/library/ios/#documentation/AddressBook/Reference/AddressBook_iPhoneOS_Framework/_index.html)到您的项目并添加`#import <AddressBook/AddressBook.h>`到您要使用该方法的文件`.h`或文件中。`.m`

```
ABAuthorizationStatus status = ABAddressBookGetAuthorizationStatus();
if(status == kABAuthorizationStatusDenied) {
// User has reject your request to access the address book  
} 
```

# iphone - 如何在 IOS 中创建多色文本编辑器

> ID：14937485
> 
> 赞同：1
> 
> 时间：2013-02-18T13:29:17.730
> 
> 标签：iphone, ios6, uitextfield

我正在 iphone sdk 中创建 TextEditor 应用程序。在我的应用程序中，我喜欢在用户编辑文本时随时更改颜色和字体。为了创建这个，我参考了以下一些库

1.  Ego TextView-允许更改不同的字体但 setcolor 属性不可用
2.  RichTextKit - SetKeyboard、setAutoCorrent 不可用

但没有一个对我有用。有人可以提出一些想法来在 iPhone SDK 中创建多种颜色和多种字体的 TextEditor 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:38:58.763

对于多种字体和多种颜色，您可以选择 CG 甚至 NSAttributedString。

```
NSMutableAttributedString *attributedString = [NSMutableAttributedString attributedStringWithString:@"colorfull text"];
[attributedString setFont:[UIFont systemFontOfSize:15]];
[attributedString setTextColor:[UIColor redColor]];
[attributedString setTextColor:[UIColor greenColor] range:NSMakeRange(3,7)]; 
```

# google-maps - AngularUI - 谷歌地图 - 地图未定义

> ID：14937487
> 
> 赞同：3
> 
> 时间：2013-02-18T13:29:20.973
> 
> 标签：google-maps, angularjs, angular-ui

我正在尝试以这种方式使用 GoogleMaps 指令：

**控制器方法**

```
$scope.myMarkers = [];

$scope.mapOptions = {
    center : new google.maps.LatLng(35.784, -78.670),
    zoom : 15,
    mapTypeId : google.maps.MapTypeId.ROADMAP
};

$scope.addMarker = function($event) {
    $scope.myMarkers.push(new google.maps.Marker({
        map : $scope.myMap,
        position : $event.latLng
    }));
}; 
```

**更新位置.html**

```
<div ng-repeat="marker in myMarkers" ui-map-marker="myMarkers[$index]" ui-event="{'map-click': 'openMarkerInfo(marker)'}"></div>

<div id="map_canvas" ui-map="myMap" class="map" ui-event="{'map-click': 'addMarker($event)'}" ui-options="mapOptions"></div> 
```

地图显示完美，但在执行`addMarker`时我得到一个未定义的方法`$scope.myMap`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T14:22:10.677

我相信您在控制器定义和`ui-map`div 之间的某个位置创建了一个新范围，而正在发生的事情是在该范围而不是在控制器的范围上创建了“myMap”属性。

为避免此类问题，请为`ui-map`指令提供适当的模型。例如：

控制器：

```
$scope.model = { myMap: undefined }; 
```

HTML：

```
<div id="map_canvas" ui-map="model.myMap" class="map" ui-event="{'map-click': 'addMarker($event)'}" ui-options="mapOptions"></div> 
```

这将强制`ui-map`指令将地图内容存储在内部`$scope.model.myMap`，并且由于范围的原型继承，该`$scope.model`对象将在子范围内可用，但始终属于父范围 - 您的控制器的范围。

# javascript - 将十六进制转换为短和长

> ID：14937489
> 
> 赞同：0
> 
> 时间：2013-02-18T13:29:22.317
> 
> 标签：javascript, long-integer, short

如何将值转换`OxFF`为短类型和长类型。有这种用途的标准功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:33:42.743

JavaScript 只知道[浮点数](http://ecma262-5.com/ELS5_HTML.htm#Section_8.5)。

您可以使用`parseInt`将该字符串解析为整数。
它真的将是一个`float`但没有分数。

* * *

要么传递基数`16`，要么让 JavaScript 自动检测它：

```
parseInt("0xFF", 16)
parseInt("0xFF") 
```

[http://jsfiddle.net/bikeshedder/wVRh2/](http://jsfiddle.net/bikeshedder/wVRh2/)

# git - Github 推送错误。无法读取 askpass & 无法读取用户名

> ID：14937496
> 
> 赞同：8
> 
> 时间：2013-02-18T13:29:39.320
> 
> 标签：git, github, aptana

我正在尝试在 Aptana 内推送，但出现以下错误。我已经成功拉，但无法弄清楚为什么我的推不起作用。

```
/home/jeni/apps/Aptana_Studio_3/plugins/com.aptana.git.core_3.0.0.1350339960/os/linux/askpass.    tcl: 3: exec: wish: not found
error: unable to read askpass response from     '/home/jeni/apps/Aptana_Studio_3/plugins/com.aptana.git.core_3.0.0.1350339960/os/linux/askpass.tcl'
fatal: could not read Username for 'https://github.com': No such device or address 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-21T17:52:35.593

我曾经也有过一样的问题。

我正在使用 Ubuntu 12.04，带有 Aptana 插件的 Eclipse。通过 Aptana 的 Git，我遇到了同样的问题。

我通过安装 TK 和 TCL 包解决了这个问题。然后它能够​​读取 askpass.tcl 文件。

```
sudo apt-get install tcl
sudo apt-get install tk 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-10T06:34:59.457

当我使用 Intellij 的 Git 时，向我显示了消息“错误：无法读取来自 '/tmp/git-askpass-0.sh' 的 askpass 响应”，但 git 在终端上运行良好。

我尝试了Seborreia的方法，但没有奏效

有人建议重新启动计算机。

后来我意识到我的 jre/bin 文件夹没有适当的权限。添加 +x 权限解决了这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-06-03T12:49:22.157

我有同样的错误：

```
error: unable to read askpass response from... 
```

我通过运行解决了它：

```
unset SSH_ASKPASS 
```

试图再次拉动，一切正常。

解决方案在这里讨论：[https ://community.atlassian.com/t5/Bitbucket-questions/git-login-issue-from-linux-command-line/qaq-p/716269](https://community.atlassian.com/t5/Bitbucket-questions/git-login-issue-from-linux-command-line/qaq-p/716269)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-03-01T17:24:15.107

发生此错误时`git push`，请从终端尝试，系统将提示您输入用户名和密码以获取您的`git config`凭据，然后会成功执行 git push

# sql-server-2008-r2 - SQL 2008 R2 权限问题

> ID：14937502
> 
> 赞同：0
> 
> 时间：2013-02-18T13:29:50.573
> 
> 标签：sql-server-2008-r2

SQL 2008 R2 以下都是在 SSMS 中执行的

我有一个非常高兴地坐在开发服务器上的 Db，一切都以带有 sql 身份验证帐户的系统管理员身份运行。

此代码已迁移到测试框，其中 dbo 架构上存在减少的权限集，其中用户已被分配读/写并通过 Windows 身份验证在架构上执行。

这就是乐趣开始的地方，当我运行某些存储过程时，它们显示为成功，但程序上的错误记录表明它看不到某些表或者它没有适当的权限这样做。

奇怪的是，尽管所有表当前都位于相同的架构上，但在所有其他表上都没有看到相同的问题。

如果我将权限提升到 Db Owner，那么问题就会完全消失。

以前有没有其他人遇到过这个问题，如果有，你是如何解决的？

# android - Android Sqlite 框架

> ID：14937503
> 
> 赞同：0
> 
> 时间：2013-02-18T13:29:58.370
> 
> 标签：android, database, frameworks, android-sqlite

我正在为 android 寻找一个灵活的 SQLlite 框架。我能够找到ORMlite。

我的问题：还有其他框架吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T14:08:46.033

我总是在 Android 上使用 ORMlite。我认为是最轻量级和最健壮的，但你可以尝试一下 greenDAO，检查一下： [http ://greendao-orm.com/](http://greendao-orm.com/)

你也有对象数据库，比如 neodatis 或 db4o。但我的建议是继续使用 SQLite 和像 ORMLite 这样的良好 ORM 框架。

如果您需要查看 Eclipse 中的数据库结构，您可以安装 Questoid 插件：

[http://www.questoid.com/](http://www.questoid.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-16T13:50:07.900

还有[ActiveAndroid](https://github.com/pardom/ActiveAndroid)。我还没有尝试过，但根据它的文档，它看起来非常简单和干净。

# google-app-engine - 谷歌应用引擎的 ndb：使用 id 或键名？

> ID：14937506
> 
> 赞同：9
> 
> 时间：2013-02-18T13:30:04.010
> 
> 标签：google-app-engine

这是关于 Google App Engine 的 ndb。根据我的观察，如果我在不提供任何键的情况下创建实体，则该实体将`ID`在数据存储查看器中显示的字段中具有一个整数，从 1 开始并且是递增的。但是，如果我通过提供字符串作为其 id 创建实体，则该实体将在`Key Name`字段中包含一个字符串。例如：

模型：

```
class Member(ndb.Model):
  ... 
```

程序：

```
member1 = Member()            # --> ID is 1, Key Name is None
member2 = Member(id='abc')    # --> ID is empty, Key Name is 'abc' 
```

另外，在html文件中，如果我使用

```
<input ... name="id" value={{member1.key.id}} ... /> 
```

作为返回服务器端程序（Python）的参数，以下两条语句均不适用于member1：

```
Member.get_by_id(self.request.get('id'))
member1 = Member.get_by_id(int(self.request.get('id'))) 
```

但是，以下 html 和程序代码：

```
<input ... name="id" value={{member2.key.id}} ... />
member2 = Member.get_by_id(self.request.get('id')) 
```

将为member2工作。

通过提供字符串 id（即 member2）创建的实体似乎没有问题。但同样不适用于member1。我的问题： a) 我的观察是否正确？b）我如何获取 member1 使用`get_by_id()`？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-18T14:40:57.460

a) 大部分是正确的，尽管您应该能够`member1`通过您展示的第二种方法。也无法验证整数 ID 是否始终从 1 开始并且始终是递增的。在这方面，我看到了喜忧参半的结果。

b）`member1 = Member.get_by_id(int(self.request.get('id')))`应该工作

您也可以尝试使用`key.urlsafe()`，这样您就不必担心密钥 id 转换：

`<input ... name="id" value={{member.key.urlsafe()}} ... />`

```
member_key = self.request.get('id')
member = ndb.Key(urlsafe=member_key).get() 
```

# dependencies - 为什么 Maven Shared Assembly Plugin 需要两次相同的依赖项？

> ID：14937511
> 
> 赞同：0
> 
> 时间：2013-02-18T13:30:35.427
> 
> 标签：dependencies, shared, maven-assembly-plugin

我正在使用 maven 程序集插件，而我使用来自另一个 jar 的程序集文件。Maven 说我需要在“maven-asssembly-plugin”部分下的另一个项目的 pom.xml 中添加特定的包（其中包含 assembly.xml），这样它就知道在哪里可以找到 assembly.xml。它看起来像这样：

```
<build>
<plugins>
    <plugin>
        <artifactId>maven-assembly-plugin</artifactId>
        <version>2.4</version>
        <dependencies>
            <dependency>
                <groupId>mygroupid</groupId>
                <artifactId>myartifactid</artifactId>
                <version>0.0.1</version>
            </dependency>
        </dependencies>
        <configuration>
            <descriptorRefs>
                <descriptorRef>assembly</descriptorRef>
            </descriptorRefs>
        </configuration>
    </plugin>
</plugins> 
```

```
<dependencies>
<dependency>
    <groupId>mygroupid</groupId>
    <artifactId>myartifactid</artifactId>
    <version>0.0.1</version>
</dependency> 
```

这绝对可行，但是如您所见，我需要添加相同的依赖项 TWICE，首先是获取 assembly.xml，其次是获取其他文件/类/等。从包中。现在我想知道是否可以只添加一次？（为了更好的维护）

（我知道我可以在标签中配置 groupId/artifactId/version，但我尽量避免这种情况）

或者更好：是否可以从其他 jar 文件访问 assembly.xml 而无需在当前项目的 maven-assemply-plugin 标记中实际添加特定的依赖关系？（以便它只搜索作为依赖项添加的每个 jar 文件）

# php - 如何从格式为 /Date()/ 的 JSON 获取日期（Ymd His）

> ID：14937515
> 
> 赞同：1
> 
> 时间：2013-02-18T13:30:46.480
> 
> 标签：php, json, date

我正在从远程服务器调用一个函数，它以 XML 格式输出我。通过用 PHP 处理它并用 JSON (json_decode) 解码它，我得到以下输出：

`print_r($data);`给..

标准类对象 ( [CreatedDate] => /Date(1360641338000-0600)/ [DateOfBirth] => /Date(1360558800000-0600)/ )

我怎样才能获得`CreatedDate`格式`Y-m-d H:i:s`？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:33:09.310

JSON 没有特定的 Date 数据类型。您正在使用的 API 似乎正在返回一个它希望您`eval`在 JavaScript 中返回的字符串。

您需要处理字符串以删除`Date(`and`)`部分，然后拆分`-`（也可能在 上`+`）并从另一个上减去（或添加）。然后您可以使用标准的[日期和时间函数](http://www.php.net/manual/en/book.datetime.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T14:01:02.997

通过参考 Rikesh 在他的评论中指出的另一个 SO 问题的解决方案来解决它。稍微修改一下以符合我的要求。我回答这个问题只是为了帮助一些沮丧的灵魂在这里找到解决方案。

```
$startDate = $data->CreatedDate;
preg_match( '/([\d]{10})/', $startDate, $matches );

$sd = date( 'Y-m-d H:i:s', $matches[0] );
$startDate = date('Y-m-d H:i:s', strtotime($sd) - 3600 * 6); //adding 6 hours to match server's time 
```

# spring - Spring AOP IllegalArgumentException：无法转换类型的值 [$Proxy12

> ID：14937516
> 
> 赞同：1
> 
> 时间：2013-02-18T13:30:47.743
> 
> 标签：spring, proxy, spring-aop

我正在尝试在现有的 spring 项目中配置一个建议。以下配置适用于单个包，但是当切入点表达式尝试将该建议应用于所有包时，它会给出以下错误。

我的配置：

```
<aop:config>
    <aop:pointcut id="loggingPointcut" expression="execution(* com.abc.businessprocess.operation..*.execute(..))" />
    <aop:advisor id="methodLoggingAdvisor" advice-ref="methodLoggingAdvice" pointcut-ref="loggingPointcut" />
</aop:config> 
```

我也尝试了注释，但它给出了同样的错误。即使在使用它给出相同的错误之后，我也尝试使用 CGLIB。

**错误：**

```
Caused by: org.springframework.beans.TypeMismatchException: Failed to convert property value of type [$Proxy12 implementing com.fmr.ast.common.businessprocess.util.Timeable,com.fmr.ast.common.businessprocess.operation.Operation,com.fmr.commons.taskmanager.core.Task,org.springframework.aop.SpringProxy,org.springframework.aop.framework.Advised] to required type [com.fmr.ips.businessprocess.operation.goalsetup.GetLeveledIRGExpInc] for property 'getRawDetailedLeveledExpInc'; nested exception is java.lang.IllegalArgumentException: Cannot convert value of type [$Proxy12 implementing com.fmr.ast.common.businessprocess.util.Timeable,com.fmr.ast.common.businessprocess.operation.Operation,com.fmr.commons.taskmanager.core.Task,org.springframework.aop.SpringProxy,org.springframework.aop.framework.Advised] to required type [com.fmr.ips.businessprocess.operation.goalsetup.GetLeveledIRGExpInc] for property 'getRawDetailedLeveledExpInc': no matching editors or conversion strategy found
    at org.springframework.beans.BeanWrapperImpl.convertForProperty(BeanWrapperImpl.java:391)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.convertForProperty(AbstractAutowireCapableBeanFactory.java:1289)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1250)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1010)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:472)
    ... 33 more
Caused by: java.lang.IllegalArgumentException: Cannot convert value of type [$Proxy12 implementing com.fmr.ast.common.businessprocess.util.Timeable,com.fmr.ast.common.businessprocess.operation.Operation,com.fmr.commons.taskmanager.core.Task,org.springframework.aop.SpringProxy,org.springframework.aop.framework.Advised] to required type [com.fmr.ips.businessprocess.operation.goalsetup.GetLeveledIRGExpInc] for property 'getRawDetailedLeveledExpInc': no matching editors or conversion strategy found
    at org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:231)
    at org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:138)
    at org.springframework.beans.BeanWrapperImpl.convertForProperty(BeanWrapperImpl.java:386)
    ... 37 more 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T14:07:03.270

查看异常跟踪这是我怀疑的：

`GetLeveledIRGExpInc`是实现三个接口的具体类：`Timeable`, `Operation`, `Task`. 您在上下文中声明了一个这种类型的 bean，由于您的 AOP 配置，它会被代理。这意味着bean的运行时类型将不再`GetLeveledIRGExpInc`是`$Proxy12`（JDK代理），它仍然实现了上述三个接口，但不是具体类的子类型`GetLeveledIRGExpInc`。

在您的上下文中某处还有另一个 bean 需要将这种类型的 bean 注入到名为`getRawDetailedLeveledExpInc`. 当 Spring 尝试将代理 bean 注入该属性时，它会失败，因为该属性的类型与 bean 的运行时类型不兼容。

根本问题是您尝试使用 JDK 代理机制应用非常通用的日志记录方面，该机制只能建议在接口上声明的方法。尝试使用`<aop:config proxy-target-class="true">`，以便也可以建议没有实现接口的类。这将解决上述详细问题，因为生成的 CGLIB 代理`GetLeveledIRGExpInc`实际上是它的子类型。（不要忘记将 cglib 添加到您的依赖项中以使其正常工作。）

# c++ - 如何在 C++ 中创建 3 位 CRC？

> ID：14937518
> 
> 赞同：0
> 
> 时间：2013-02-18T13:31:05.700
> 
> 标签：c++, crc, crc32

我尝试使用 C++进行[CRC 计算。](http://en.wikipedia.org/wiki/Cyclic_redundancy_check#Computation_of_CRC)因为它看起来很基本，所以我想用数组来做。

这是我的代码（低效且无意义）：

```
/*3-bit CRC Calculator in C++*/
#include <iostream>

using namespace std;

int main()
{
    int m[100][100]; //Array to perform calculations... store values..
    int x = 4;
    m[1][0] = 1;
    m[1][1] = 0;
    m[1][2] = 1;
    m[1][3] = 1;

    cout << "Enter the binary sequence (14 digits):\n";

    cin >> m[0][x-4];
    cin >> m[0][x-3];
    cin >> m[0][x-2];
    cin >> m[0][x-1];
    cin >> m[0][x];
    cin >> m[0][x+1];
    cin >> m[0][x+2];
    cin >> m[0][x+3];
    cin >> m[0][x+4];
    cin >> m[0][x+5];
    cin >> m[0][x+6];
    cin >> m[0][x+7];
    cin >> m[0][x+8];
    cin >> m[0][x+9];

    m[0][x+10] = 0; //3-bit crc
    m[0][x+11] = 0;
    m[0][x+12] = 0;

    while (x >= -4){
        m[2][0] = m[0][0] xor m[1][0]; //Subraction from message binary code
        m[2][1] = m[0][1] xor m[1][1];
        m[2][2] = m[0][2] xor m[1][2];
        m[2][3] = m[0][3] xor m[1][3];

        m[0][0] = m[2][1];
        m[0][1] = m[2][2];
        m[0][2] = m[2][3] ;
        x--;
    }
    cout << "CRC Value: " << m[0][0] << m[0][1] << m[0][2];
    cin >> x;
    return 0;
} 
```

现在它返回 110。：/

# android - 水平对齐两个按钮

> ID：14937523
> 
> 赞同：5
> 
> 时间：2013-02-18T13:31:16.570
> 
> 标签：android, android-layout, android-xml, android-button

我有两个按钮，我想将它们水平放置，以便屏幕彼此并排，没有剩余空间，我知道我可以使用线性布局并设置权重，但我想要相对布局，因为我的 XML 中已经有权重因此将两个权重放在一起将是不好的表现。

我试过这样

```
<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/bg_selector" >

    <Button
        android:id="@+id/b_orderMeal_send"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_marginLeft="4dip"
        android:layout_marginRight="4dip"
        android:background="@drawable/button_selector"
        android:clickable="true"
        android:focusable="true"
        android:text="@string/b_send"
        android:textColor="#FFFFFF" />

    <Button
        android:id="@+id/b_orderMeal_cancel"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerHorizontal="true"
        android:layout_marginLeft="4dip"
        android:layout_marginRight="4dip"
        android:background="@drawable/button_selector"
        android:clickable="true"
        android:focusable="true"
        android:text="@string/b_cancel"
        android:textColor="#FFFFFF" />
</RelativeLayout> 
```

但是只出现了取消按钮，那是因为我使用了“填充父项”，请问有什么解决方案？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-18T13:38:37.777

试试这个

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <Button
        android:layout_weight="1"
        android:id="@+id/button1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:text="Button" />
     <Button
           android:layout_weight="1"
        android:id="@+id/button2"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:text="Button" />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-18T13:38:26.753

尝试添加到您的代码

```
<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/bg_selector" >

    <Button
            android:id="@+id/b_orderMeal_send"

           android:layout_toLeftOf="@+id/view"
    ....
    />

     <View 
            android:id="@+id/view"
            android:layout_height="1dp"
            android:layout_width="0dp"
            android:layout_centerHorizontal="true"
            />

     <Button
            android:id="@+id/b_orderMeal_cancel"

            android:layout_toRightOf="@+id/view"
    ...
    />
</RelativeLayout> 
```

# php - 具有功能和开关的php基本计算器，但结果是

> ID：14937524
> 
> 赞同：-1
> 
> 时间：2013-02-18T13:31:17.477
> 
> 标签：php, function, calculator

我目前正在做一些简单的计算器练习，但输出或结果没有显示在这里是我的代码家伙希望你能帮助我：/

```
 <input type="radio" value= "Addition" name="calcu"> Addition .<br />
    <input type="radio" value= "Subtraction" name="calcu"> Subtraction .<br />
    <input type="radio" value= "Multiplication" name="calcu"> Multiplication .<br />
    <input type="radio" value= "Division" name="calcu"> Division .<br />
<?php
$num1 = $_POST['num1'];
$num2 = $_POST['num2'];
$calcu = $_POST['calcu'];

    function calculate($n1,$n2)
    {
        switch('$calcu')
        {
        case "Addition";
            $compute = $n1 + $n2; 
            break;
        case "Subtraction";
            $compute = $n1 - $n2; 
            break;
        case "Multiplication";
            $compute = $n1 * $n2; 
            break;
        case "Division";
            $compute = $n1 / $n2; 
            break;
        }
    }
echo "$calcu <br /> <br /> 1st Number: $num1 <br /> 2nd Number: $num2 <br /><br />";
echo "Answer is:" .calculate($num1,$num2);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T13:40:25.873

这是完整的代码：

```
<?php
$num1 = $_POST['num1'];
$num2 = $_POST['num2'];
$calcu = $_POST['calcu'];

    function calculate($n1,$n2, $calcu) // set $calcu as parameter
    {
        switch($calcu)
        {
        case "Addition": // here you have to use colons not semi-colons
            $compute = $n1 + $n2; 
            break;
        case "Subtraction":
            $compute = $n1 - $n2; 
            break;
        case "Multiplication":
            $compute = $n1 * $n2; 
            break;
        case "Division":
            $compute = $n1 / $n2; 
            break;
        }
        return $compute; // returning variable
    }
echo "$calcu <br /> <br /> 1st Number: $num1 <br /> 2nd Number: $num2 <br /><br />";
echo "Answer is:" .calculate($num1,$num2, $calcu); // you need to pass $calcu as argument of that function
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T13:32:53.887

更改`switch('$calcu')`为`switch($calcu)`。

正如@PeterM 提到的，您正在访问`$calcu`超出范围的变量。您可以将`$calcu`变量传递给 fun`calculate`或直接通过`$_POST`数组访问。

使用`switch($_POST['calcu'])`.

或者

```
function calculate($n1,$n2, $calcu) {
...
} 
```

打电话给乐趣`calculate($n1,$n2, $calcu)`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T13:43:38.497

更改`switch('$calcu')`为`switch($calcu)`。应该是这样的。

但不仅如此。您的变量未定义，因为您试图在提交表单之前解决它们，即它们还不存在。

```
$num1 = $_POST['num1'];
$num2 = $_POST['num2'];
$calcu = $_POST['calcu']; 
```

你在那里解决他们

```
echo "$calcu <br /> <br /> 1st Number: $num1 <br /> 2nd Number: $num2 <br /><br />";
echo "Answer is:" .calculate($num1,$num2); 
```

实现这一点的正确方法是检查表单是否已提交：

```
 <input type="radio" value= "Addition" name="calcu"> Addition .<br />
    <input type="radio" value= "Subtraction" name="calcu"> Subtraction .<br />
    <input type="radio" value= "Multiplication" name="calcu"> Multiplication .<br />
    <input type="radio" value= "Division" name="calcu"> Division .<br />
<?php
if (isset($_POST)){
    $num1 = $_POST['num1'];
    $num2 = $_POST['num2'];
    $calcu = $_POST['calcu'];

        function calculate($n1,$n2)
        {
            switch('$calcu')
            {
            case "Addition";
                $compute = $n1 + $n2; 
                break;
            case "Subtraction";
                $compute = $n1 - $n2; 
                break;
            case "Multiplication";
                $compute = $n1 * $n2; 
                break;
            case "Division";
                $compute = $n1 / $n2; 
                break;
            }
        }
    echo "$calcu <br /> <br /> 1st Number: $num1 <br /> 2nd Number: $num2 <br /><br />";
    echo "Answer is:" .calculate($num1,$num2);

    unset($_POST);
}
?> 
```

# c++ - 在函数之间传递地址值时出现 C++ 分段错误

> ID：14937528
> 
> 赞同：0
> 
> 时间：2013-02-18T13:31:35.217
> 
> 标签：c++, pointers, fault

我正在尝试编写一个简单的 C++ 算法来解决数独问题。我正在尝试在不同函数之间传递地址值，但在运行时出现分段错误。（不用说，我不是很有经验:)）

该代码确实设法将 a[0] 的地址传递给 main 函数，我可以使用 main 中的指针读取值。当我尝试传递地址来解决函数时，它会出现分段错误。

（作为第二个问题，我可以在 main 中正确读取值，使用 cout << *(a+5) 等正确（在 main 中注释掉），但是当我尝试打印使用 for 循环存储的所有 81 个值时，它给出了无意义的值（再次，在代码中注释掉）。该代码适用于 *(a+3) 或 a[3] 之类的文字，但当涉及 int 时则不起作用 for(int i, 不管) cout << *(a+i);)

```
#include <iostream>
using namespace std;

int * get_input();
void solve(int *);

int main()
{
    int * a;
    a = get_input();
    //cout << *a << " " << *(a+1) << " " << *(a+2) << " " << *(a+3) << " " << *(a+4);
    //for (int i = 0 ; i < 81 ; i++) {if (i%9 == 0) cout << "\n"; cout << a[i] << " ";}
    solve(a);
    return(0);
}

int * get_input ()
{
    int a[81];
    getinput:
    for (int i = 0 ; i < 81 ; i++)  {a[i] = 0;}
    for (int i = 0 ; i < 81 ; i++)  {cin >> a[i];}
    print:
    for (int i = 0 ; i < 81 ; i++)
    {
        if (i%27 == 0){cout << "\n";}
        if (i%9 == 0) {cout << "\n";}
        if (i%3 == 0) {cout << "  " << a[i];}
        if (i%3 != 0) {cout << a[i];}
    }
    cout << "\n\nCheck:\n1- Fix\n2- Reset\n3- Confirm\n\n";
    int check = 0;
    cin >> check;
    if (check == 1)
    {   
        int input[3] = {-1, -1, -1};
        while (true)
        {
            cin >> input[0] >> input[1] >> input [2];
            if (input[1] == 0) goto print;
            a[(input[2]-1)+((input[1]-1)*9)] = input[0];
        }
    }
    if (check == 2) goto getinput;
    if (check == 3) return a;
}

void solve(int * a)
{
    bool matrix[9][9][9];
    for (int i = 0 ; i < 81 ; i++) {for (int j = 0 ; j < 9 ; j++) {matrix[(i-i%9)/9][i%9][j] = true;}}
    for (int i = 0 ; i < 81 ; i++)
    {
        if (a[i] == 0) continue;
        else
        {
            for (int j = 0 ; j < 9 ; i++)
            {
                matrix[(i-i%9)/9][j][a[i]] = false;
                matrix[j][i%9][a[i]] = false;
                matrix[((i-i%9)/9)-((i-i%9)/9)%3+j%3][i%9-(i%9)%3+(j-j%3)/3][a[i]] = false;
            }
        }
    }
    for (int i = 0 ; i < 9 ; i++)
    {
        for (int j = 0 ; j < 9 ; j++)
        {
            cout << matrix[i][j][1] << " ";
        }
        cout << "\n";
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T13:33:49.353

`getInput`您正在将地址返回到（数组`a`）中的局部变量。我建议你将数组作为参数传递给这个函数。另一种选择是动态分配数组，然后在程序终止之前释放它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T13:33:19.393

在你的函数中创建`a`数组：`get_input()``static`

```
int a[81]; 
```

应该

```
static int a[81]; 
```

这是有效的，因为该`static`关键字确保分配的内存块（数组`a`）在函数返回后仍将保持分配状态。通常这是“因为我还没有完成它”（例如，你可以计算你的函数被这样调用的次数），但它也可以合法地用于确保函数的返回值在函数结束后仍然存在。

稍微好一点的方法是在`main`级别声明数组，并将指向它的指针传递给`get_input()`and`solve()`函数。这样，您可以在代码中明确表明数组将“在程序的持续时间内存在”——这通常是一种很好的做法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T13:35:07.357

```
int a[81]; 
```

这是一个本地内存分配，当你的函数`get_input`返回时它被释放。

使用指针`int* a`和`malloc`函数来动态分配内存！

malloc 命令可能是这样的（如果我没记错的话）：

```
int *a = (int *) malloc(sizeof(int)*81); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T13:44:53.113

你的问题是你正在返回一个指向本地声明变量的指针。不要这样做。您应该将变量作为参数传递（例如 get_input(int[] arr, int length)` 或在堆上为您的数组分配新内存。最简单的是前者，后者可能会给您带来麻烦必须管理你的内存，否则你会得到内存泄漏。

为什么需要这样做？当您在其中声明 a[] 时，`get_input`它会在堆栈上为该变量分配空间。堆栈是一个长的连续内存块，用于存储函数的参数、局部变量和调用当前函数的程序的地址。当一个函数返回时，所有这些内存都会被回收以供下一个函数调用使用。也就是说，当`solve`被调用时，它开始在堆栈上写入之前使用的内存`get_input`。

您很幸运遇到了分段错误，因为有时程序可能会继续运行，即使它们的数据已完全损坏。

总结：在主函数中声明您的数组并将其传递给`get_input`进行操作。

# javascript - 有什么方法可以从我的 javascript 文件中以编程方式调用和执行 pjax？

> ID：14937530
> 
> 赞同：4
> 
> 时间：2013-02-18T13:31:40.597
> 
> 标签：javascript, jquery, pushstate, pjax

我有一个功能，等待用户单击文本类型的输入，然后等待用户按下向下和向上箭头键。当用户按下向下和向上箭头键时，函数 hoverDown() 被调用，它本质上以编程方式悬停在表格行上。当按下回车键时，window.location 会被调用并加载相应的页面。问题是我在整个应用程序中使用[pjax](https://github.com/defunkt/jquery-pjax)来动态加载内容并推送新 url 而无需刷新页面。当我调用 window.location 函数时，pjax 不再起作用，而是加载了正确的 url 并发生了整页刷新——这正是我试图避免的事情。有没有办法从我的函数中以编程方式调用和执行 pjax？相关代码：

//HTML

```
<div id="main">
<input type="text" class="table-search" id="search" autocomplete="off"   placeholder="Search Clients..." /><table class="table" id="tblData">
<thead><tr><th>Name</th> <th>Title</th></tr></thead>
<tbody id="tblDataBody">
<tr><td><a href="http://lar.loc/cases">Scott</a></td> <td>Client</td></tr>
<tr><td><a href="http://lar.loc/cases">Billy</a></td><td>Client</td></tr>
<tr><td><a href="http://lar.loc/cases">George</a></td><td>Client</td></tr>
<tr><td><a href="http://lar.loc/cases">Sara</a></td><td>Client</td></tr>
<tr><td><a href="http://lar.loc/cases">John</a></td><td>Client</td></tr>
<tr><td><a href="http://lar.loc/cases">Megan</a></td><td>Client</td></tr>
<tr><td><a href="http://lar.loc/cases">Ben</a></td><td>Client</td></tr>
<tr><td><a href="http://lar.loc/cases">Jully</a></td><td>Client</td></tr>
<tr><td><a href="http://lar.loc/cases">Bethany</a></td><td>Client</td></tr>
<tr><td><a href="http://lar.loc/cases">Alen</a></td><td>Client</td></tr>
<tr><td><a href="http://lar.loc/cases">Jane</a></td><td>Client</td></tr>
<tr><td><a href="http://lar.loc/cases">Alice</a></td><td>Client</td></tr></tbody></table>
</div> 
```

//Javascript

```
$(document).ready(function(){
    $("#main").on("keydown", "#search", hoverDown);
});

function hoverDown(e) {
    var $tbl = $('#tblDataBody');
    var $cur = $('.active', $tbl).removeClass('active').first();

    if (e.keyCode === 40) { //down
        if ($cur.length) {
            $cur.next().addClass('active');
        } else {
            $tbl.children().first().addClass('active');
        }
    } else if (e.keyCode == 38) { //up
        if ($cur.length) {
            $cur.prev().addClass('active');
        } else {
            $tbl.children().last().addClass('active');
        }
    } else if (e.keyCode == 13) {
        if ($cur.length) {
            window.location = $cur.find("a").attr("href");
        }
    }
} 
```

//为了完整起见，CSS：

```
.active {
    background-color: yellow;
} 
```

如果您想查看此代码以更好地理解此代码，可以查看[此 jsFiddle。](http://jsfiddle.net/alnitak/JjX6c/)

再一次，我正在尝试使用[pjax](https://github.com/defunkt/jquery-pjax)来加载内容。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T14:18:48.013

我不知道我第一次在文档中是怎么错过的，但是我找到了一种手动调用 pjax 的简单方法。

```
} else if (e.keyCode == 13) { 
        if ($cur.length) {
            // manually invoke pjax after enter has been pressed
            var $url = $cur.find("a").attr("href");
            $.pjax({url: $url, container: '#main'});
        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-15T11:13:41.333

看看 Djax：动态 Pjax

> [https://github.com/beezee/djax](https://github.com/beezee/djax)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T13:55:36.550

在阅读了您链接的文档后，我相信您应该使用该`$.pjax.click`功能而不是将您的 URL 分配给`window.location`：

```
var container = $(this).closest('[data-pjax-container]')
$.pjax.click(event, {container: container}) 
```

# c++ - 长双打的加权概率

> ID：14937532
> 
> 赞同：1
> 
> 时间：2013-02-18T13:31:43.200
> 
> 标签：c++, vector, probability, long-double

我正在使用 C++ 中大约 2000 个元素的数组。

每个元素代表该元素被随机选择的概率。

然后，我将此数组转换为累积数组，目的是使用它来计算掷骰子时选择哪个元素。

示例数组：{1,2,3,4,5}

示例累积数组：{1,3,6,10,15}

当滚动数字 3、4 或 5 时，我希望能够在累积数组中选择 3。

增加的复杂性是我的数组由长双精度数组成。这是几个连续元素的示例：

0.96930161525189592646367317541056252139242133125662803649902343750 0.96941377254127855667142910078837303444743156433105468750000000000 0.96944321382974149711383993199831365927821025252342224121093750000 0.96946143938926617454089618153290075497352518141269683837890625000 0.96950069444055009509463721739663810694764833897352218627929687500 0.96951751803395748961766908990966840065084397792816162109375000000

这可能是用这个数据集做加权概率的一种糟糕的方法，所以我愿意接受任何关于解决这个问题的更好方法的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T10:02:43.730

您可以使用[`partial_sum`](http://en.cppreference.com/w/cpp/algorithm/partial_sum)：

```
unsigned int SIZE = 5;
int array[SIZE] = {1,2,3,4,5};
int partials[SIZE] = {0};

partial_sum(array, array+SIZE, partials);
// partials is now {1,3,6,10,15} 
```

您想要从数组中获得的值可从部分总和中获得：

```
12 == array[2] + array[3] + array[4];

12 == partials[4] - partials[1]; 
```

总计显然是部分和中的最后一个值：

```
15 == partial[4]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T04:45:33.817

您实际上可以使用流选择来执行此操作，而无需计算部分和数组。这是我在 Java 中的代码：

```
public static int selectRandomWeighted(double[] wts, Random rnd) {
    int selected = 0;
    double total = wts[0];

    for( int i = 1; i < wts.length; i++ ) {
        total += wts[i];

        if( rnd.nextDouble() <= (wts[i] / total)) {
            selected = i;
        }
    }

    return selected;        
} 
```

如果您想在总和中保留尽可能多的精度位数，则可以使用[Kahan 求和](http://en.wikipedia.org/wiki/Kahan_summation)进一步改进上述内容。

但是，如果你想重复从这个数组中提取，那么预先计算一个部分和的数组并使用二进制搜索来找到正确的索引会更快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T17:29:02.813

考虑将信息存储为整数分子和分母，以便在最后一步之前不会损失精度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T17:09:24.480

好的，我想我已经解决了这个问题。

我只是做了一个二分搜索，而不是仅仅拥有

```
if (arr[middle] == value) 
```

我在 OR 中添加了

```
if (arr[middle] == value || (arr[middle] < value && arr[middle+1] > value)) 
```

这似乎以我希望的方式处理它。

# asp.net - 使用正文内容的 ASP.Net WebAPI MediaTypeMapping

> ID：14937533
> 
> 赞同：0
> 
> 时间：2013-02-18T13:31:50.850
> 
> 标签：asp.net, asp.net-mvc-4, asp.net-web-api

是否有可能（或明智）建立一个自定义来根据请求正文中的内容`MediaTypeMapping`选择一个？`MediaTypeFormatter`

我正在特别考虑这样一种情况，即我在多部分/表单数据有效负载中有一个非常非描述性的文本/纯文本，我想使用启发式方法来计算其中包含的内容。

我目前正在以`MediaTypeFormatter`查看前几行的自定义方式执行此操作，如果内容以开头，`{`则假定为 JSON，如果`word,word,word`是逗号则表示 CSV。

我在想 a`MediaTypeMapping`会更干净，但我不知道从 Body 内容中尝试匹配是否明智。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T15:08:03.533

目前，您无法真正检查 Webapi 中的内容。您不能多次读取流。

# php - 如何根据其相关ID打印数据？

> ID：14937535
> 
> 赞同：2
> 
> 时间：2013-02-18T13:32:07.877
> 
> 标签：php, cakephp

表

```
 Product        Plan            ProductPlan
 id |name       id |name        id  | product_id | plan_id     
 1    aplha      1   a          1        1          2             
 2    bravo      2   b          2        4          c   
 3    charlie    4   c   
 4    delta 
```

我想针对相关产品打印计划名称，就像那样

查看我想要的

```
 alpha  |  delta   |  
  a          c
  b 
```

但它向我展示了，

```
alpha   |   bravo  |   charlie   |delta 
 a
 b      
 c 
```

这是我的控制器代码

```
 $p_plan = $this->ProductPlan->find('all',array(
                                    'conditions'=>array(
                                                'ProductPlan.product_id'=>'Product.product_id'
                                                )                       
                                        )
                                    );  
    $this->set('p_plan', $p_plan); 
```

这是我的视图代码，

```
 <table>
<thead>
    <tr>
        <?php foreach ($p as $ps){?>
        <th>
                <?php echo __l($ps['Product']['name']);?>

        </th>
        <?php }?>
    </tr>   
</thead>    
    <tbody>
        <?php foreach ($p as $p1){
                    foreach($p1['Plan'] as $plan){
                        debug($plan);
        ?>
        <tr>
            <td>
                <?php echo __l($plan['name']);?>    
            </td>
        </tr>           
        <?php }
                    }?>

        </tbody> 
```

我认为有什么问题？如果有人帮助我，我会非常感谢他。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:01:22.883

显然我无法发表评论，但我会尽力回答。由于您没有在视图中提及 p_plan ，并且您没有显示 $p 是创建的，因此很难说出实际发生的情况。

工作流程： - 获取 3 个表 - 将它们排序为 product_id => plan_id 数组的数组 - 将 product_ids 跟踪到列号 - 将该数组传递给视图 - 在视图中将数组打印为 row = column

控制器：

```
//get just the productplan table
$p_plan = $this->ProductPlan->find('all',array(
    'conditions'=>array(
            'ProductPlan.product_id'=>'Product.product_id'
    ),'recursive' => -1
)); 

//get just the products table
$products = $this->Product->find('list',array(
    'fields' => array('id','name')
));

//get just the plans table
$plans = $this->Plan->find('list',array(
    'fields' => array('id','name')
));

//holder is a table to store counting variables
$holder = array(null);
//final_p_plan will be passed to the view.  Array of arrays sorted as product_id => plan_ids
$final_p_plan = array(null);
//p_plan_ids will be passed to the view.  Stores an array of used product id
$p_plan_ids = array(null);
//max_length is keeping track of how long the longest one is.  will be passed to view.  needed for the loop.
$max_length = 0;

//want to end up with an array we can just loop through and print off
foreach($p_plan as $p)
{
    //if it's empty set row 0 as product name, then row 1 as the active plan name.  else set the next row to the next plan name
    if(empty($holder[[$p['product_id']]]))
    {
        $holder[[$p['product_id']]]['i'] = 2;
        $final_p_plan[$p['product_id']][0] = $products[$p['product_id']];
        $final_p_plan[$p['product_id']][1] = $plans[$p['plan_id']];

        array_push($p_plan_ids,$p['product_id']);
    } else {
        $final_p_plan[$p['product_id']][$holder[[$p['product_id']]]['i']] = $plans[$p['plan_id']];
        $holder[[$p['product_id']]]['i'] = $holder[[$p['product_id']]]['i'] + 1;
        if($holder[[$p['product_id']]]['i'] > $max_length)
        {
            $max_length = $holder[[$p['product_id']]]['i'];
        }
    }
}

$this->set('final_p_plan', $final_p_plan);
$this->set('p_plan_ids', $p_plan_ids);
$this->set('max_length', $max_length); 
```

看法：

```
<table>
    <?php $i = 0; while($i < max_length): ?>
        <?php if($i == 0): ?>
            <thead>
                <tr>
                    <?php foreach($p_plan_ids as $id): ?>
                        <th>
                            <?php echo $final_p_plan[$id][$i]; ?>
                        </th>
                    <?php endforeach; ?>
                </tr>
            </thead>
            <tbody>
        <?php else: ?>
            <tr>
                <?php foreach($p_plan_ids as $id): ?>
                    <th>
                        <?php echo $final_p_plan[$id][$i]; ?>
                    </th>
                <?php endforeach; ?>
            </tr>
        <?php endif; $i++; ?>
    <?php endwhile; ?>
    </tbody>
</table> 
```

# sharepoint-2010 - 隐藏在 iframe 内容后面的 SharePoint 2010 功能区控件

> ID：14937538
> 
> 赞同：0
> 
> 时间：2013-02-18T13:32:09.020
> 
> 标签：sharepoint-2010

我的一个应用程序页面中有一个 iframe，每当我加载该页面时，所有功能区控件（即站点操作菜单和用户菜单）都不起作用。我的意思是当我点击它们时，什么也没有发生。在我意识到它们隐藏在 iframe 后面之后。我尝试在功能区容器上使用 Jquery bgiframe 插件，但这也不起作用。

**更新1：** 这太奇怪了！我只需要像这样结束 iframe 标记，`</iframe>`而不是`/>`现在功能区控件工作！我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:40:57.383

Did you try to place the IFrame in a with a z-index? `<div style="display:block;position:absolute;top:0px;z-index:999;">YOUR FRAME HERE</div>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T13:34:51.327

听起来你需要一个 iframe 垫片：[http ://www.dynamicdrive.com/forums/entry.php?249-A-better-Iframe-Shim](http://www.dynamicdrive.com/forums/entry.php?249-A-better-Iframe-Shim)

# javascript - jPlayer：从 FTP 服务器播放文件

> ID：14937540
> 
> 赞同：0
> 
> 时间：2013-02-18T13:32:08.923
> 
> 标签：javascript, jquery, ftp, jplayer

只是一个简单的问题；我似乎在网上找不到任何东西。

我正在寻找一种方法来使用 jQuery jPlayer 从不同主机上的 FTP 服务器播放音频文件。它在 Chrome 中运行良好，要求用户在 Chrome 弹出窗口中提供登录凭据，然后音频播放没有问题；Firefox 和 Explorer 失败 --- 即使我在另一个选项卡中登录到 FTP 服务器，也没有任何反应。

有人有什么建议吗？

干杯。

# php - 带有 PHP 的 HTML 中的选项字段

> ID：14937541
> 
> 赞同：0
> 
> 时间：2013-02-18T13:32:09.337
> 
> 标签：php, html

我想根据从下拉列表中选择的区域名称来搜索员工列表。我可以将数据库中的区域名称检索到 PHP HTML 的下拉列表中。但是现在我很困惑如何将下拉列表中的选定选项传递给 PHP 中的 SQL 查询。我还想要所选选项的索引号。我的代码如下。

```
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title></title>
</head>
<body>
    <?php
    include 'Connect.php';
    $query = "SELECT varAreaName FROM tbArea" ;
    $result = mysql_query($query);
    echo'<select name="somename">';
    echo'<option value="ANY">--ANY--</option>';
    while($row = mysql_fetch_assoc( $result )) { 
        echo '<option value="'.$row['varAreaName'].'">' . $row['varAreaName'] . '</option>';   
    }
    echo '</select>';                
    ?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:35:52.007

首先，您必须添加一个表单标签并将表单发布到另一个 php 脚本。

您选择的选项将在任一`$_POST`或`$_GET`取决于用于发送表单的方法中可用。

例子：

```
<body>
  <form action="your_second_php_script.php" method="post">
  // your code
  </form>
</body> 
```

并在`your_second_php_script.php`：

```
<?php
  var_dump($_POST);
?> 
```

如果您需要在原始页面中提供结果，您可以使用 ajax 来使其正常工作，但我将从基础开始。

# database - 多列数据库表的数据库编程设计

> ID：14937544
> 
> 赞同：1
> 
> 时间：2013-02-18T13:32:21.467
> 
> 标签：database, oop

*我想就以下设计问题分享并寻求您的帮助：*

我有一个包含 11 列的数据库表

每当我用任何编程语言处理这些条件时，

*我被这个问题困住了：*

“如何创建一个函数来插入一行，而该函数没有 11 个参数？” 我的问题是，这是一个糟糕的设计问题（因为一个函数中有很多参数）

谁能告诉我如何重新设计这个？我必须更改我的数据库方案吗？还是我可以保持原样，只是以不同的方式构建我的应用程序？

**笔记：**

我发现了很多类似的问题，但它们都集中在数据库本身和列数上。

据我所知和阅读，只要它是同一个实体，一个表可以包含许多列。

我更关心函数本身。意思是如果我有一个*名为 DB 的类*和一个名为*insertToTable(Params...)*的函数， 我该怎么做呢？

如果我将一个大对象发送到 DB 类，它不会影响“*低耦合高内聚*”吗？在对象中设置参数，然后将其发送到 DB 类，然后将它们取回以构建这个庞大的查询，这不是很愚蠢吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:39:42.510

您可以考虑创建几个插入方法，这些方法根据默认值、更新的数据等接受不同数量的参数。

如果您经常只更新 2 或 3 列，为什么不编写一个只接受这 3 个参数并保持其他所有参数不变的函数。

是的，您将需要一个接受所有参数的函数，但您可以通过创建一个表示表的类然后只传递一个参数 - 该类的对象来处理它。

# batch-file - 复制带有未知变量的目录？

> ID：14937547
> 
> 赞同：0
> 
> 时间：2013-02-18T13:32:30.233
> 
> 标签：batch-file

我有一个将目录结构复制到其他位置的批处理脚本困境。我们已经为 Dir 的主要名称定义了五位数字，但也有不同的描述，有什么方法可以通配符在我的 copyto 路径中的描述，例如

```
xcopy <path>Template <path>09999_ParentFolder\<new name> \e 
```

“ParentFolder”是一个未知数，可能包含空格，我对“*”没有任何运气。如果可能，我想避免要求用户输入确切的详细信息，我唯一的另一个想法是我是否可以创建用户可以通过编号选择输入的目录的选择列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T09:37:45.590

[将目录文件夹列出到变量](https://stackoverflow.com/questions/14939268/list-a-directory-folder-to-a-variable/14939993#comment20976053_14939993)

我从我的其他帖子中找到了解决方案（请参阅链接），感谢您的帮助。:)

# google-apps-script - 在电子表格中获取某个列的谷歌应用程序脚本功能

> ID：14937550
> 
> 赞同：0
> 
> 时间：2013-02-18T13:32:36.737
> 
> 标签：google-apps-script, google-sheets, google-apps

我可以创建一个谷歌应用程序脚本，从应用程序电子表格中的整个列中获取信息并对其执行操作吗？

我已经搜索了类电子表格链接[https://developers.google.com/apps-script/class_spreadsheet](https://developers.google.com/apps-script/class_spreadsheet) 但我不知道我将实际使用哪种方法，任何人都可以帮我推一下吗？我是 Google Apps 脚本的新手

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:54:23.530

始终使用该`.getRange()`方法来选择您想要的单元格。然后要获取所有值，请调用`.getValues()`. 例子：

```
var vals = sheet.getRange("C2:C").getValues(); 
```

现在`vals`是一个二维数组，可由`vals[rowNum][colNum]`. 如果您只抓取一列，`colNum`则将始终为`0`.

# php - 更改 PHP 备份目录

> ID：14937556
> 
> 赞同：0
> 
> 时间：2013-02-18T13:32:57.683
> 
> 标签：php, mysql, sql

我正在为 PHP 中的数据库备份创建一个脚本。它现在正在工作。我的问题是如何更改备份目录？

**这是代码：**

```
<form action = '' method = 'POST'>
<input type = 'submit' name = "backup" value="Backup">              
</form>

<?php
    $host = 'localhost';
    $user = 'root';
    $pass = ' ';
    $dbname = 'itravel';
    $backup_name = "mybackup.sql";
    if(isset($_POST['backup']))
    {
    $backup = "c:/xampp/mysql/bin/mysqldump --opt -h $host -u $user $dbname > $backup_name";
    system($backup);
    }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T13:35:04.863

目前，您的 sql 备份输出将`mybackup.sql`在该行中设置

> $backup_name = "mybackup.sql";

尝试更改此值以更改备份的输出位置。所以像：

> $backup_name = "~/mydbbackups/mybackup.sql";

（实际上取决于您的主机操作系统）

# c# - 应用范围的可观察集合

> ID：14937563
> 
> 赞同：1
> 
> 时间：2013-02-18T13:33:22.533
> 
> 标签：c#, .net, xaml, windows-8, microsoft-metro

如果我将一个`Observable`Collection 放在一个单独的 .cs （类）文件中并在我的*MainPage.xaml*中使用它，我该如何制作它以便稍后可以从不同的 XAML 页面中访问存储在同一个 Observable Collection 中的所有数据时间？

例如

```
MyClass.cs:
public ObservableCollection<String> oC = new ObservableCollection<String>();

MainPage.xaml.cs:
// add to observable collection

SecondPage.xaml.cs:
// access and use data stored in ObservableCollection 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T13:37:24.783

您可以将集合声明为静态成员。

或者实现单例模式。

当您在 XAML 中绑定到集合时，您需要在视图模型中创建一个访问器。

```
public ObservableCollection<String> Accessor
{
  get
  {
    return MyClass.oC;
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T13:37:50.773

一种简单的方法是将其声明为静态并通过类型而不是实例访问它：

例如

```
class SomeClass 
{
    public static bool SomeBool = false;
}

class SomeOtherClass
{
    public void SomeMethod() 
    {
        Debug.Write(SomeClass.SomeBool); // Ouput = false
    }
} 
```

请记住，这个 observable 将是静态的，因此是单个实例 - 对它的任何修改都将立即对所有访问它的对象可见 - 这意味着如果某些代码正在迭代 observable 而另一个尝试添加/删除它 - 迭代器会抛出异常

如果是这种情况，请考虑替代方案或使用锁定来确保对集合的单线程访问

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-18T13:41:10.373

那么这样的事情怎么样。无处不在的资源...

```
public class CollectionSrc
{
  public ObservableCollection<...> Col 
  { 
    get { return _col ?? (_col = new ObservableCollection<...>()); }
  }
} 
```

在`App.xaml`

```
<ns:CollectionSrc x:Key="ColSrc" /> <!--ns .. the namespace of CollectionSrc-->
```

现在您可以访问`ColSrc`xaml 代码中的任何位置。例如

```
<ListBox ItemsSource={Binding Col, Source={StaticResource ColSrc}} />
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T18:50:42.583

我想你只是想要这个：

```
MyClass.cs:
public static ObservableCollection<String> oC = new ObservableCollection<String>();

MainPage.xaml.cs:
// add to observable collection

SecondPage.xaml.cs:
// access and use data stored in ObservableCollection 
```

一旦它`oC`是静态的，您就可以从任何类/页面一次又一次地引用它。

但是，如果您想绑定到它（因为您无法绑定到 Windows 8 应用程序中的字段或静态属性），您需要让该 XAML 页面在一个简单的属性中引用您的静态属性：

```
SecondPage.xaml.cs:
public static ObservableCollection<String> oC { get { return MyClass.oC; } } 
```

我希望这是有道理的！

# visual-studio - nuget 找不到资源“productupdate/productupdatebar.xaml”

> ID：14937566
> 
> 赞同：3
> 
> 时间：2013-02-18T13:33:32.500
> 
> 标签：visual-studio, asp.net-mvc-4, f#, asp.net-web-api, nuget

我无法让 nuget 在 Visual Studio F# Web API 项目模板上运行。这是 Windows 8 上的普通安装，我刚刚下载了 MVC 4 F# 的在线模板并创建了一个 Web API 项目。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-02-19T13:01:35.883

应用最新的 Visual Studio 更新解决了该问题。

# javascript - jquery移动导航栏

> ID：14937571
> 
> 赞同：0
> 
> 时间：2013-02-18T13:33:46.637
> 
> 标签：javascript, jquery, jquery-mobile

我不知道为什么这不起作用。因为我有这么多页面，不想一遍又一遍地添加相同的页脚，所以我编造了这个确实有效的方法。

```
 $(document).delegate('[data-role="page"]', 'pagecreate', function() {
          $(this).children('[data-role="footer"]').append('<div data-role="navbar">
     <ul><li class="nav-active"><a href="#home">Home</a></li>
         <li class="nav-active"><a href="#service">Service</a></li>
         <li class="nav-active"><a href="#settings">EInstellungen</a></li>
     </ul></div>');
         }); 
```

不幸的是，这不起作用：

```
$('.nav-active').live('click', function() {
   $(this).addClass("ui-btn-active ui-state-persist");
}); 
```

抱歉，我从未使用过 jFiddle：http: [//jsfiddle.net/KjubE/N7eqh/](http://jsfiddle.net/KjubE/N7eqh/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:39:15.327

```
$("yourFooter").trigger('create'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T13:39:26.270

jQuery live 已弃用，您可以使用 on 方法代替。您的其余代码是否正常工作？执行此请求时元素是否在 DOM 中？

请查看 api 文档： [http](http://api.jquery.com/trigger/) ://api.jquery.com/trigger/ 这必须在附加 on 后执行。对我来说，它是这样工作的。你需要小提琴吗？

# java - 如何使用安全约束设置 Faces Servlet 映射

> ID：14937576
> 
> 赞同：0
> 
> 时间：2013-02-18T13:34:03.097
> 
> 标签：java, jsf-2

我正在开发一个 jpa、jsf、jaas 应用程序，现在我遇到了这个问题：

我的 web.xml 中有这个安全约束

```
<security-constraint>
    <web-resource-collection>
        <web-resource-name>Private</web-resource-name>
            <url-pattern>/*</url-pattern>
                <http-method>GET</http-method>
                <http-method>POST</http-method>
    </web-resource-collection>          
</security-constraint>
<login-config>
<auth-method>FORM</auth-method>
    <form-login-config>
        <form-login-page>/login.xhtml</form-login-page>
        <form-error-page>/badLogin.xhtml</form-error-page>
    </form-login-config>
</login-config> 
```

所以每次应用程序启动时，用户都会被引导到登录页面，但是页面会显示，但它没有通过 faces servlet，因此不会渲染 faces 组件。这是我的 Faces Servlet 映射

```
 <servlet>
  <servlet-name>Faces Servlet</servlet-name>
   <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
     <url-pattern>*.jsf</url-pattern>
  </servlet-mapping> 
```

怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T13:37:44.443

只需确保请求 URL 与 faces servlet 的 URL 模式匹配。

使用当前设置，您有 2 个选项：

1.  要么改变

    ```
    <form-login-page>/login.xhtml</form-login-page>
    <form-error-page>/badLogin.xhtml</form-error-page> 
    ```

    经过

    ```
    <form-login-page>/login.jsf</form-login-page>
    <form-error-page>/badLogin.jsf</form-error-page> 
    ```

    以便它匹配 faces servlet 的 URL 模式。

    * * *

2.  或者，改变

    ```
    <url-pattern>*.jsf</url-pattern> 
    ```

    经过

    ```
    <url-pattern>*.xhtml</url-pattern> 
    ```

    这样您就无需摆弄虚拟 URL。

# yii - 使用限制浏览 Yii 关系

> ID：14937579
> 
> 赞同：2
> 
> 时间：2013-02-18T13:34:12.907
> 
> 标签：yii, relational-database, yii-cmodel

我有一个`Community`模型和一个`Content`模型。每个`Content`都有一`community_id`列。我创建了这个简单的关系：

```
$relations['contents'] = array(self::HAS_MANY, 'Content', 'community_id','order'=>'weight DESC, id DESC'); 
```

（注意订单）

在`CommunityController`我要显示的内容中说前 20 个内容（然后在另一个 ajax 操作中获取下一个 20，不用担心）。

我可能可以通过标准来做到这一点，比如：

```
$criteria = new CDbCriteria;
$criteria->compare('community_id',$model->id);
$criteria->limit = 20;
$criteria->order = 'weight DESC, id DESC';
$contents = Content::model()->findAll($criteria); 
```

但是代码对我来说看起来有点矫枉过正（太长了），我觉得我根本没有使用我创建的关系。有没有更简单的方法？还是我在寻找不存在的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:07:15.217

您可以使用[`CActiveRecord::getRelated()`](http://www.yiiframework.com/doc/api/1.1/CActiveRecord#getRelated-detail)并添加新标准作为最后一个参数。您的代码可能看起来像

```
$criteria = new CDbCriteria;
$criteria->limit = 20;
$contents=$model->getRelated('contents',true,$criteria); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T09:48:34.253

您可以将您的关系用作一种方法并在那里通过标准：

```
$contents = $model->contents(array('limit' => 20)); 
```

# c# - 如何编写更新查询来更新 mongodb 中的多个字段？

> ID：14937581
> 
> 赞同：9
> 
> 时间：2013-02-18T13:34:19.837
> 
> 标签：c#, mongodb

如何编写此更新查询以在 c# 中更新 mongo 记录。

```
db.collection.update({ "S_Id" : 110 },{ "Name" : "Name1","Batch" : "43","Date":"9/2/2011",  "Status" : 0 }); 
```

我正在尝试这样

```
IMongoUpdate update = new UpdateDocument();
if (Named != null) { update = Update.Set("Name", "Name1"); }
if (Date != null) { update = Update.Set("Date", "18/02/2013"); }
if (Batch != null) { update = Update.Set("Batch",43); }
coll.Update(query, update); 
```

是我做对了还是我必须以什么方式做，请让我以正确的方式继续。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-18T13:43:38.637

在您的示例中，您可能会覆盖`update`每个选项的值，因此只会将单个更新命令发送到`col1.Update()`.

你会想要使用这个`Update.Combine`方法，有点像这样：（未经测试，有点难看......）

```
 var updateValues = new List<UpdateBuilder>();
    if (Named != null) { updateValues.Add(Update.Set("Name", "Name1")); }
    if (Date != null) { updateValues.Add(Update.Set("Date", "18/02/2013")); }
    if (Batch != null) { updateValues.Add(Update.Set("Batch", 43)); }
    IMongoUpdate update = Update.Combine(updateValues);
    coll.Update(query, update); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-10T10:27:12.017

它现在已修改为：

```
 FilterDefinitionBuilder<BsonDocument> builder = Builders<BsonDocument>.Filter;
    FilterDefinition<BsonDocument> filter;

    filter = builder.Eq("_id",BsonObjectId.Create(objectid)); 
```

// 或要搜索的字段

```
 var update = Builders<BsonDocument>.Update
 .Set("key1", "value1")
 .Set("key2", "value2")
 .CurrentDate("lastModified"); 

  Collection.UpdateOne(filter, update); 
```

# php - 异常类中的php父构造函数

> ID：14937582
> 
> 赞同：2
> 
> 时间：2013-02-18T13:34:23.680
> 
> 标签：php, exception, parent, construct

于是又在看PHP手册，看到一个自定义异常调用父异常构造函数的代码的注释，不明白这样做的目的。

这是代码：

```
class MyException extends Exception
{
        // Redefine the exception so message isn't optional
        public function __construct($message, $code = 0) {
        // some code

        // make sure everything is assigned properly
        parent::__construct($message, $code);
    }

    // custom string representation of object
    public function __toString() {
    return __CLASS__ . ": [{$this->code}]: {$this->message}\n";
    }

    public function customFunction() {
        echo "A custom function for this type of exception\n";
    }
} 
```

我不明白以下逻辑：

```
//make sure everything is assigned properly
parent::__construct($message, $code); 
```

关于为什么这样做的任何逻辑都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T13:40:54.923

Exception class contains own properties such as `$code` and `$message`

They are ihnerited by child classes, example:

```
class Exception {
  protected $code ;
  protected $message ;

  public function __construct($code, $message){
    $this->code = $code ;
    $this->message = $message ;

    //AND some important default actions are performed
    //when class is instantiated.
  }
} 
```

So, after you called `parent::__construct()`

Your child class will have instance variables `$code` and `$message` set properly.

```
$myEx = new MyException("10", "DB Error") ;
//Now you can get the error code, because it was set in its parent constructor:
$code = $myEx->getCode() ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T13:39:04.953

当你重写构造方法时，PHP 不会自动调用父类的构造方法。所以如果仍然需要父的构造函数，你必须手动调用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T13:39:29.760

PHP的基本异常类将消息/代码分配给一些内部属性。我敢肯定这个类的作者可能没有写 _construct *(); 但在这种情况下，他想证明 parent::* _construct(); 如果您覆盖构造函数，则必须调用。

# html - 尝试使用 DOM 和 VBS 通过标签和属性“类”等于（某物）获取元素

> ID：14937593
> 
> 赞同：0
> 
> 时间：2013-02-18T13:34:54.243
> 
> 标签：html, dom, vbscript

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:46:23.593

`Length`与 VBScript 一起工作得很好。也`getAttribute("class")`行不通，但是`element.className`。这是示例代码。

```
<html>
 <head>
  <title>AAA</title>
  <script type="text/vbscript">
    Sub Window_Onload
        Set objElms = Document.getElementsByTagName("a")
        MsgBox "A.Length: " & objElms.Length
        For Each objElm In objElms
            If objElm.className = "ASCE-Url" Then
                'do what you need here...
                objElm.innerHTML = objElm.innerHTML & " - found"
            End If
        Next
    End Sub

  </script>
 </head>
 <body>

   <a class=ASCE-Url href="#">A</a><br>
   <a class=ASCE-Url href="#">B</a><br>
   <a class=ASCE-XYZ href="#">C</a><br>
   <a class=ASCE-Url href="#">D</a><br>
   <a class=ASCE-Url href="#">E</a><br>

 </body>
</html> 
```

# php - 使用学说查询语言从出生日期计算年龄

> ID：14937595
> 
> 赞同：1
> 
> 时间：2013-02-18T13:35:03.503
> 
> 标签：php, doctrine-orm, zend-framework2, dql

我正在使用 Zend Framework 2 并使用 Doctrine Query Language。

我必须在用户列表页面上添加年龄过滤器。在数据库中，我使用日期格式存储了用户的出生日期。请帮助我如何使用 where 条件来应用我的过滤器。

```
$repository = $this->entityManager->getRepository('User\Entity\User');
$query = $repository->createQueryBuilder('u');
$query->where("(DATE_DIFF(CURRENT_DATE(), u.birth_date)/365)=".$search_arr['age']); 
```

此查询不返回任何内容。原因可能是当我在 mysql 中运行它时`DATEDIFF( CURRENT_DATE( ) , u.birth_date ) /365`，它返回浮点数，例如 10.29。我需要将其转换为整数进行比较。Mysql 提供了**FLOOR**功能，但它在 DQL 中不起作用。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-12T05:32:47.890

```
$query->createQueryBuilder('u')->where(':year - substring(u.birthday,1,4) = :age and ((:month = substring(u.birthday,6,2) and :day >= substring(u.birthday,9,2)) or :month > substring(u.birthday,6,2)) or 
        :year - substring(u.birthday,1,4) - 1 = :age and ((:month = substring(u.birthday,6,2) and :day < substring(u.birthday,9,2)) or :month < substring(u.birthday,6,2))')

        ->setParameter('year', (new \DateTime('now'))->format("Y"))
        ->setParameter('month', (new \DateTime('now'))->format("m"))
        ->setParameter('day', (new \DateTime('now'))->format("d"))
        ->setParameter('age', $age); 
```

日期 Ymd 的格式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-27T05:18:04.423

以下公式对我有用：

```
if (today - 31 <= DOB >= today - 30) i am 30\. 
```

这是它在 DQL 中的样子：

```
$age = intval($data['age']);

$startDate = new \DateTime('now');
$startDate->modify('-'.($age+1).' years');

$endDate = new \DateTime('now');
$endDate->modify('-'.$age.' years');
$from = new \DateTime($startDate->format("Y-m-d H:i:s"));
$to   = new \DateTime($endDate->format("Y-m-d H:i:s"));

$qb = $this->getEntityManager()->createQueryBuilder();

$qb->select('p');
$qb->from('MyBundle:Person', 'p');
$qb->andWhere('p.dateOfBirth BETWEEN :from AND :to');
$qb->setParameter('from', $from);
$qb->setParameter('to', $to); 
```

# java-me - 典型的j2me API(LCDUI)和LWUIT可以结合在一起吗

> ID：14937601
> 
> 赞同：1
> 
> 时间：2013-02-18T13:35:12.307
> 
> 标签：java-me, autocomplete, lwuit, lcdui

我怀疑我构建一个**基于 J2ME 位置的应用程序作为我最后一年的项目**，它完全使用 J2ME API 构建，如高级 UI（表单）和低级 UI（画布）。现在我想使用 LWUIT API 对高级 UI 进行一些更改，并对文本字段实现自动完成功能，以根据他/她无法做到的**类型由用户选择所需的地名。**

“到地方自动完成我正在使用**Google Place API - 地方自动完成功能**”

**我已经在 LCDUI 中创建了我的整个设计；由于自动完成功能，现在我无法在 LWUIT 中重新创建我的整个设计**

是否可以将 LCDUI 和 LWUIT 组件结合在一起？即在应用程序中同时使用LWUIT 和Canvas？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T22:34:56.547

LWUIT 组件被绘制到 Canvas 上，LWUIT 绘制整个 Canvas 区域。您不能将 LWUIT 组件与 LCDUI 组件混合使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T03:42:37.593

以某种方式混合 LCDUI 和 LWUIT 是可能的，但它不是直截了当的。我知道可以通过 LWUIT 中的一些包装器访问一些 LCDUI 组件。您可以查看这篇文章：[如何从 LCDUI 表单启动 LWUIT 表单？](https://stackoverflow.com/questions/14893318/how-to-launch-a-lwuit-form-from-a-lcdui-form)

似乎他有一个 LCDUI 项目，并且能够通过初始化 LWUIT 显示从其中启动一个 LWUIT 表单。这可能是要走的路。

# c# - 使用c#以编程方式重置excel工作簿密码

> ID：14937604
> 
> 赞同：0
> 
> 时间：2013-02-18T13:35:28.163
> 
> 标签：c#, excel, passwords, reset

是否可以使用 c# 在 excel 工作簿中重置/重写密码？

我试图做几件事，但它并没有解决我的问题：

1）`workbook.Password = "";`没有帮助

2)`workbook.Protect ("",true,true);`

```
workbook.Unprotect(""); doestn't help 
```

3）我也尝试重新保存`workbook.SaveAs(workbook.FullName,XlNormal,"","",false,null,Excel.XlSaveAsAccessMode.xlNoChange,null,false,null,null,false);`

如果您有任何想法，请提供帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T16:08:15.207

要走的路是

```
workbook.Unprotect(pwd); 
```

但是要让它工作，你需要传递正确的密码，即`string.Empty`是不够的。

请注意，密码保护不仅可以放在工作簿上，甚至可以放在单个工作表上，因此最好在工作表上循环并调用`Unprotect`它们。

如果您不知道密码，[在这里](http://www.mcgimpsey.com/excel/removepwords.html)您可以找到一个可以取消保护您的文件的 Excel 宏。如果你真的需要，将它翻译成 C 应该不会太难。

# c# - 使用 Linq 从 XML 文件中读取属性/值对

> ID：14937606
> 
> 赞同：1
> 
> 时间：2013-02-18T13:35:33.290
> 
> 标签：c#, xml, linq-to-xml, deserialization

我有一个如下所示的 XML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<response uri="/crm/private/xml/Leads/getRecords">
   <Leads>
      <row no="1">
         <FL val="LEADID">2000000022020</FL>
         <FL val="SMOWNERID">2000000018005</FL>
         <FL val="Lead Owner">John</FL>
         <FL val="Company">Zillium</FL>
         <FL val="First Name">Scott</FL>
         <FL val="Last Name">James</FL>
         <FL val="Designation">null</FL>
         <FL val="Email">null</FL>
         <FL val="Phone">null</FL>
         <FL val="Fax">null</FL>
         <FL val="Mobile">null</FL>
         <FL val="Website">null</FL>
         <FL val="Lead Source">null</FL>
         <FL val="Lead Status">null</FL>
         <FL val="No of Employees">0</FL>
         <FL val="Annual Revenue">0.0</FL>
      </row>
      <row no="2">
         <FL val="LEADID">2000000022020</FL>
         <FL val="SMOWNERID">2000000018005</FL>
         <FL val="Lead Owner">John</FL>
         <FL val="Company">Zillium</FL>
         <FL val="First Name">Scott</FL>
         <FL val="Last Name">James</FL>
         <FL val="Designation">null</FL>
         <FL val="Email">null</FL>
         <FL val="Phone">null</FL>
         <FL val="Fax">null</FL>
         <FL val="Mobile">null</FL>
         <FL val="Website">null</FL>
         <FL val="Lead Source">null</FL>
         <FL val="Lead Status">null</FL>
         <FL val="No of Employees">0</FL>
         <FL val="Annual Revenue">0.0</FL>
      </row>
   </Leads>
</response> 
```

我正在尝试读取行元素中的“键/值”对，但我似乎无法掌握如何使用 Linq 进行操作。

我需要将数据“反序列化”为一个简单的 POCO

```
public class Leads
{
    public long LEADID { get; set; }
    public long SMOWNERID { get; set; }
    public string LeadOwner { get; set; }
    public string Company { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string Designation { get; set; }
    public string Email { get; set; }
    public string Phone { get; set; }
    public string Fax { get; set; }
    public string Mobile { get; set; }
    public string Website { get; set; }
    public string LeadSource { get; set; }
    public string LeadStatus { get; set; }
    public int NoOfEmployees { get; set; }
    public decimal AnnualRevenue { get; set; }
} 
```

我的问题是，所有元素都具有相同的名称，因此我需要获取与元素值配对的属性值（val）。

所以我的问题是，有没有一种聪明的方法可以使用 Linq 做到这一点。

否则我的解决方法是编写一个 XLS 并将 XML 转换为更可反序列化的 XML 格式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T13:42:33.910

您可以选择每个值，例如

```
let company = (string)r.Elements()
                       .Single(x => (string)x.Attribute("val") == "Company") 
```

但我相信将所有元素投影到字典中会更快（并且更具可读性）

```
var query = 
     xdoc.Descendants("row")
         .Select(r => r.Elements().ToDictionary(f => (string)f.Attribute("val")))
         .Select(d => new Leads {
             LEADID = (long)d["LEADID"],
             SMOWNERID = (long)d["SMOWNERID"],
             Company = (string)d["Company"]
             // etc
         }); 
```

另请记住，您需要使用`long`前两个属性（根据示例 xml 中的值）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T13:43:44.447

```
var xdoc = XDocument.Parse(xmlstring);
xdoc.Elements("response").Elements("Leads").Elements("row").Select(l => new Leads() 
{
    LEADID = (long)l.Elements("FL").Where(fl => (string)fl.Attribute("val") == "LEADID").FirstOrDefault(),
    SMOWNERID = (long)l.Elements("FL").Where(fl => (string)fl.Attribute("val") == "SMOWNERID").FirstOrDefault(),
    etc..
}); 
```

# javascript - 这个html代码让我抓狂

> ID：14937609
> 
> 赞同：-1
> 
> 时间：2013-02-18T13:35:45.257
> 
> 标签：javascript, html

```
<html>
<head>
<title>DIsplaying triangle /square</title>

<script type="text/javascript">
document.write("<html><body><p style='line-height:100%;>");
var sides=prompt("Enter the number of sides","3/4");
if(sides==4)
{
    var i=0;

    var j=0;
    var z=0;
    while(i<=6)
    {   
        if(i==0||i==6)
        {
            while(j<=6)
            {
                document.write("*");    
                document.write("<span style='visibility:hidden'>*</span>");
                ++j;
            }
            j=0;
            document.write("<br\>");
        }
        else 
        {
            while(z<=6)
            {
                if(z==0||z==6)
                {
                    document.write("*");
                    document.write("<span style='visibility:hidden'>*</span>");
                }
                else
                {
                    document.write("<span style='visibility:hidden'>*</span>");
                    document.write("<span style='visibility:hidden'>*</span>");
                }
                ++z;
            }
            z=0;
            document.write("<br\>");
        }
        ++i;
    }
    document.write("</p></body></html>");
}
else
{
    var i=0;
}
</script>
</head>
</html> 
```

我在提示框中输入时的输出`4`应该是：

```
* * * * * * *
* * * * * * *
* * * * * * *
* * * * * * *
* * * * * * *
* * * * * * *
* * * * * * * 
```

（认为​​它是一个完美的正方形。在这里很难画出来。）

但我得到：

```
** * * * * *
* * * * * * *
* * * * * * *
* * * * * * *
* * * * * * *
* * * * * * *
* * * * * * * 
```

看第一行。它有前 2 个“*”。根据代码，它不应该发生。这部分出了点问题`document.write("*")`。当我尝试使用`alert`我发现的第一次调试时（即当 i=0 时）第一次`document.write("*")`被忽略。但每隔一段时间都会考虑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:43:31.960

Check this out: [http://jsbin.com/efehiv/1/edit](http://jsbin.com/efehiv/1/edit)

This line looks bad to me:

```
document.write("<html><body><p style='line-height:100%;>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T14:05:23.360

Nikhil，你还没有结束你的风格……以单引号开头，以分号结尾。重写为

```
document.write("<html><body><p style=\"line-height:100%;\">"); 
```

如果你觉得段落标签是必要的，那你可以保留它，但不是必须的。不过，它目前正在弄乱您页面的其余部分。

# assembly - MIPS：使用堆栈

> ID：14937610
> 
> 赞同：0
> 
> 时间：2013-02-18T13:35:45.790
> 
> 标签：assembly, stack, mips

我在 MIPS 手册中读到：“请注意，我们使用“添加立即数”指令的“无符号”版本，因为我们正在处理一个地址，它是一个无符号二进制数。我们不想只生成异常因为计算的地址越过了内存空间的中点。”

这到底是什么意思？特别是跨越内存空间的中点。

而且，在下面的代码中，我不明白为什么它会从 8($sp) 跳到 20($sp)。代码稍后从 12($sp) 和 16($sp) 加载，但它何时对这些内存部分进行处理。我在 jal JILL 中认为可能，但没有给出太多解释。

```
addiu $sp, $sp, -24 
sw $t1, 0($sp) 
sw $t2, 4($sp) 
sw $t3, 8($sp) 
sw $ra, 20($sp) 
jal JILL
lw $ra, 20($sp) 
lw $t4, 12($sp) 
lw $t5, 16($sp) 
addiu $sp, $sp, 24 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:04:10.560

假设具有 32 位地址空间的 MIPS32 架构，内存空间的中点将是地址 0x80000000（即 2^31）。在 32 位有符号（A2-compliment）算术中，从 0 到 0x7FFFFFFF 的整数保留给正数，而从 0x80000000 到 0xFFFFFFFF 的整数保留给负数。

当你发出一个有符号的加法时，如果加法的结果“越过”那个中点，你会得到一个溢出异常。但是在您的示例中，您实际上是在处理内存地址，而不是带符号的数字……因此，地址的符号（解释为 32 位数字）是没有意义的，因此您应该使用无符号加法。

关于您的第二个问题，您必须查看 JILL 程序以查看它的作用......该程序肯定会在`12($sp)`和`16($sp)`

# android - 设备上的android开发会损坏设备吗？

> ID：14937614
> 
> 赞同：-4
> 
> 时间：2013-02-18T13:35:52.140
> 
> 标签：android

我想知道使用设备进行密集的android开发是否会损坏设备本身？

我问这个是因为我的最后一部三星手机在开发过程中主板损坏了。

频繁上传和运行开发版应用对手机有什么危害吗？可能发生的异常情况如何？

在任何其他情况下会损坏设备吗？也许它与软件无关？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T13:48:07.173

默认情况下，android 中的每个应用程序都在沙箱中运行。访问外部的系统资源完全取决于您在应用程序清单中明确提供的权限。例外情况通常仅限于应用程序，仅此而已。

上传和运行与从 Play 商店安装和卸载应用程序没有什么不同，因此无需担心。当然，闪存单元有磨损，但它太小了，不值得一提。

仅当您弄乱时钟速度，电压等系统参数时，才有可能在硬件级别损坏设备，我怀疑您会这样做。在软件级别上，您可能会设法破坏一些系统文件，但它肯定需要 root 权限和一定的专业知识。您以前的三星手机可能有缺陷，但如果您担心，您可以随时使用 ADT 捆绑包中提供的模拟器。

简而言之，不，不是。

# doctrine-orm - 在 Doctrine2 中访问连接表字段

> ID：14937620
> 
> 赞同：0
> 
> 时间：2013-02-18T13:36:09.403
> 
> 标签：doctrine-orm, jointable

这是我的（简化的）类别实体：

```
/**
 * @ORM\Entity
 */
class Category
{    
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id = null;

    /**
     * @ORM\ManyToOne(targetEntity="Category", inversedBy="children", fetch="EAGER")
     */
    protected $parent = null;

    /**
     * @ORM\OneToMany(targetEntity="Category", mappedBy="parent", fetch="LAZY")
     * @ORM\JoinTable(name="category_tree",
     *      joinColumns={@ORM\JoinColumn(name="parent_id", referencedColumnName="id")},
     *      inverseJoinColumns={@ORM\JoinColumn(name="child_id", referencedColumnName="id")}
     * )
     */
    protected $children;
} 
```

我可以为每个类别编写一个 DQL 查询，它会给我一个结果：

*   它的标识
*   一个包含其孩子 ID 的数组

当然，在 SQL 中它非常简单，但在 Doctrine 中连接表似乎是透明的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T23:21:26.063

如果你只需要引用，有一个方便的 getReference() 方法，像这样使用：

```
$item = $this->em->getReference('Entity\Item', $id); 
```

或者，您可以将关联实体设置为 EXTRA_LAZY。这完全取决于您到底需要什么，但这是减少开销的两种方法。

# android - 在此代码中需要帮助整数值在将其设置为其他值后返回默认值

> ID：14937624
> 
> 赞同：0
> 
> 时间：2013-02-18T13:36:35.383
> 
> 标签：android, eclipse

我有一个问题，我无法弄清楚以下代码有四个整数，其中一个是“级别”，在我在代码中的某处更改该值并稍后尝试检索它之后，我得到了默认值，所以有什么这段代码有问题还是我错过了什么

```
public class Battery_Info extends Activity {
    int scale = -1;
    int level = -1;
    int voltage = -1;
    int temp = -1;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_battery__info);
    this.setTitle("Battery Information");
    IntentFilter filter=new IntentFilter(Intent.ACTION_BATTERY_CHANGED);
    final NotificationManager ntifymgr=(NotificationManager) getSystemService(NOTIFICATION_SERVICE);
    BroadcastReceiver receive=new BroadcastReceiver() {

        @Override
        public void onReceive(Context context, Intent intent) {
            // TODO Auto-generated method stub
            scale=intent.getIntExtra(BatteryManager.EXTRA_SCALE,-1);
            level=intent.getIntExtra(BatteryManager.EXTRA_LEVEL, -1);
            voltage=intent.getIntExtra(BatteryManager.EXTRA_VOLTAGE, -1);
            temp=intent.getIntExtra(BatteryManager.EXTRA_TEMPERATURE, -1);
            TextView t=(TextView)findViewById(R.id.textView5);
            t.setText(""+scale);
            t=(TextView)findViewById(R.id.textView6);
            t.setText(""+level, BufferType.EDITABLE);
            t=(TextView)findViewById(R.id.textView7);
            t.setText(""+voltage);
            t=(TextView)findViewById(R.id.textView8);
            t.setText(""+temp);
        }
    };
    registerReceiver(receive, filter);
    final int Notif_ID=56734;
    Notification note= new Notification(R.drawable.ic_launcher, "Battery Notification", System.currentTimeMillis());
    note.flags=Notification.FLAG_ONGOING_EVENT;
    PendingIntent intent=PendingIntent.getActivity(this, 0, new Intent(this,Battery_Info.class),PendingIntent.FLAG_CANCEL_CURRENT);
    note.setLatestEventInfo(this, "BatPer", "Battery Level: "+level+"%", intent);
    ntifymgr.notify(Notif_ID, note);
} 
```

当我更改 level 的值时，它会更改并且 textview 会显示，但是当我在通知中使用它时，它会给我默认值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:46:01.290

您在 onCreate 中构建用于通知的字符串，其中 level 具有默认值（“电池电量：”+level+“%”）。后来你改变水平。但是通知字符串已经使用默认值构建。

当级别发生更改时，您应该使用当前级别值创建新的通知消息，并使用新文本更新您的通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T14:21:45.237

我不知道这是否可以解决您的问题，因为我不是通知管理方面的专家，但是如果您使用 Battery_Info 对象来存储系统中唯一的信息，我会将这四个成员设置为静态。

这样做，即使您创建了新的 Battery_Info 对象（出于任何原因），成员也会保留最后一个值并且不会重置为其默认值。

# javascript - 如果 URL 包含字符串，则使用 jQuery 模拟按钮单击

> ID：14937626
> 
> 赞同：0
> 
> 时间：2013-02-18T13:36:43.480
> 
> 标签：javascript, jquery, html

我想知道当我的 url 包含字符串时，是否有办法用 jQuery 模拟按钮单击？

当您访问我的页面时，通过 url 传递了一个锚点，只有我不能将用户直接带到这个锚点，因为它使用滚动路径插件，所以我想模拟一个被点击的导航链接......

这可能吗？

```
if(window.location.href.indexOf('group') > -1) {
    $('nav ul li a.group-btn').click();
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:39:02.243

我不认为您可以在重定向的意义上模拟点击锚点；如果可以的话，我知道它没有得到广泛支持，因为它在 iPad 上是不可能的。但是，您可以`window.location`以类似的方式更改。您还需要记住是否有其他`click`事件绑定到您可能想要手动触发的锚点。

```
if (window.location.href.indexOf('group') > -1) {
    window.location = $('nav ul li a.group-btn').attr('href');
}; 
```

## 哈克选项

***免责声明...除 Chrome 外，未在任何浏览器中进行测试。***

与[nbrookes](https://stackoverflow.com/users/803925/nbrooks)交谈后发现，您*可以*触发和模拟单击事件，但不能通过单击链接，而是通过单击锚点内的图像。这导致事件冒泡，并且实际上触发了点击事件，就好像用户点击了它一样。

**[jsFiddle](http://fiddle.jshell.net/cjafW/14/show/light/)（[代码](http://fiddle.jshell.net/cjafW/14/)）**

```
$(function() {
    // clicking this will trigger the click, but no re-direct
    $('#trigger').click(function() {
       $('#google').click(); 
    });

    // clicking this will actually re-direct... who knew!
    $('#hack').click(function(e) {
        e.preventDefault();
        $('<img />').appendTo($('#google')).click();
    });

    $('a').click(function() {
       $('#click-log').append('<li>#' + $(this).attr('id') + ' clicked</li>'); 
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T14:01:10.437

Click event will not do the navigation as you click on anchor.

See your solution in the [jsFiddle](http://jsfiddle.net/LZnNb/) example.

```
<div id='srcLinks'>
<a href='#group'>Success</a>
<a href='#'>Failure</a>
</div>

<a id='tgtLink' href='http://google.com' target='_blank'>target link</a> 
```

and

```
$(function(){
    $('#srcLinks a').click(function(e){
        e.preventDefault(); // this will prevent default navigation using the href of the link
        if($(this).attr('href').indexOf('group') > -1)
        {
            // If you want to open the link in new tab
            window.open($('#tgtLink').attr('href'));
            // If you want to open the link in same window
            window.location = $('#tgtLink').attr('href');
        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T13:40:34.270

Yes you are correct it is possible to explicitly call click for a button

```
$("#other").click(function() {
   $("#target").click();
}); 
```

refer [http://api.jquery.com/click/](http://api.jquery.com/click/)

[Fiddle](http://jsfiddle.net/j7pSs/)

# wpf - 标题与内容重叠的 WPF 扩展器样式

> ID：14937632
> 
> 赞同：5
> 
> 时间：2013-02-18T13:37:09.087
> 
> 标签：wpf, header, styles, overlap, expander

我想要一个 WPF 扩展器控件，其中标题与主要内容区域重叠。

使用以下 XAML

```
<Expander Header="Details" ExpandDirection="Left">
    <Grid Background="Blue">
        <TextBlock Text="Details content" VerticalAlignment="Center" HorizontalAlignment="Center" Margin="5" Foreground="White"></TextBlock>
    </Grid>
</Expander>
<ScrollViewer Background="Red" HorizontalScrollBarVisibility="Visible" Grid.Column="1">
    <Grid Background="Red">
        <TextBlock Text="Main content"  VerticalAlignment="Center" HorizontalAlignment="Center" Foreground="White" />
    </Grid>
</ScrollViewer> 
```

我最终得到：

![图1](../Images/a396c7e6825f19a50b700dfcac227b68.png) ![在此处输入图像描述](../Images/e1bbb67bdeda5b2ab42427de45b8a5be.png)

我想删除白色区域并在内容区域的左上角放置箭头，与红色背景重叠。maps.bing.com 就是一个类似的例子。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T11:36:47.553

## 更新：

找到了一种适合我的解决方案。也许它可以帮助其他人寻找类似的东西。

```
<UserControl x:Class="Expander_test2.Overlap"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">

    <UserControl.Resources>

        <Style x:Key="ExpanderLeftHeaderStyle"
            TargetType="{x:Type ToggleButton}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ToggleButton}">
                        <Border Padding="{TemplateBinding Padding}">
                            <Grid Background="Transparent"
                                SnapsToDevicePixels="False">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="19"/>
                                    <RowDefinition Height="*"/>
                                </Grid.RowDefinitions>
                                <Path x:Name="arrow"
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center"
                                        Stroke="{TemplateBinding Foreground}"
                                        StrokeThickness="1.5"
                                        SnapsToDevicePixels="false"
                                        Data="M 1,1.5 L 4.5,5 L 8,1.5">
                                    <Path.LayoutTransform>
                                        <RotateTransform Angle="90"/>
                                    </Path.LayoutTransform>
                                </Path>
                                <ContentPresenter Grid.Row="1"
                                                Margin="0,4,0,0"
                                                HorizontalAlignment="Center"
                                                VerticalAlignment="Top"
                                                SnapsToDevicePixels="True"
                                                RecognizesAccessKey="True"/>
                            </Grid>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked"
                                    Value="true">
                                <Setter Property="Data"
                                    Value="M 1,4.5  L 4.5,1  L 8,4.5"
                                    TargetName="arrow"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="{x:Type Expander}"
            TargetType="{x:Type Expander}">
            <Setter Property="Foreground"
                Value="{DynamicResource {x:Static SystemColors.WindowTextBrushKey}}"/>
            <Setter Property="Background"
                Value="Transparent"/>
            <Setter Property="HorizontalContentAlignment"
                Value="Stretch"/>
            <Setter Property="VerticalContentAlignment"
                Value="Stretch"/>
            <Setter Property="BorderBrush"
                Value="Transparent"/>
            <Setter Property="BorderThickness"
                Value="1"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Expander}">
                        <Border BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            Background="{TemplateBinding Background}"
                            CornerRadius="3"
                            SnapsToDevicePixels="true">
                            <DockPanel>
                                <Canvas>
                                    <ToggleButton x:Name="HeaderSite"
                                            Margin="1"
                                            MinWidth="0"
                                            MinHeight="0"
                                            Style="{StaticResource ExpanderLeftHeaderStyle}"
                                            IsChecked="{Binding Path=IsExpanded,Mode=TwoWay,RelativeSource={RelativeSource TemplatedParent}}"
                                            Content="{TemplateBinding Header}"
                                            ContentTemplate="{TemplateBinding HeaderTemplate}"
                                            ContentTemplateSelector="{TemplateBinding HeaderTemplateSelector}"
                                            Foreground="{TemplateBinding Foreground}"
                                            Padding="{TemplateBinding Padding}"
                                            FontFamily="{TemplateBinding FontFamily}"
                                            FontSize="{TemplateBinding FontSize}"
                                            FontStyle="{TemplateBinding FontStyle}"
                                            FontStretch="{TemplateBinding FontStretch}"
                                            FontWeight="{TemplateBinding FontWeight}"
                                            HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}"
                                            VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"/>
                                </Canvas>
                                <ContentPresenter x:Name="ExpandSite"
                                                DockPanel.Dock="Bottom"
                                                Visibility="Collapsed"
                                                Focusable="false"
                                                HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                                VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                                Margin="{TemplateBinding Padding}">

                                </ContentPresenter>
                            </DockPanel>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsExpanded"
                                    Value="true">
                                <Setter Property="Visibility"
                                    Value="Visible"
                                    TargetName="ExpandSite"/>
                                <Setter Property="Canvas.Left"
                                        Value="{Binding ActualWidth, ElementName=ExpandSite}"
                                        TargetName="HeaderSite" />
                            </Trigger>
                            <Trigger Property="ExpandDirection"
                                    Value="Left">
                                <Setter Property="DockPanel.Dock"
                                    Value="Left"
                                    TargetName="ExpandSite"/>
                                <Setter Property="DockPanel.Dock"
                                    Value="Right"
                                    TargetName="HeaderSite"/>
                                <Setter Property="Style"
                                    Value="{StaticResource ExpanderLeftHeaderStyle}"
                                    TargetName="HeaderSite"/>
                            </Trigger>
                            <Trigger Property="IsEnabled"
                                    Value="false">
                                <Setter Property="Foreground"
                                    Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <Expander Canvas.ZIndex="1" Header="Details" ExpandDirection="Left">
            <Grid Background="Blue">
                <TextBlock Text="Details content" VerticalAlignment="Center" HorizontalAlignment="Center" Margin="5" Foreground="White"></TextBlock>
            </Grid>
        </Expander>
        <ScrollViewer Background="Red" HorizontalScrollBarVisibility="Visible" Grid.Column="1">
            <Grid Background="Red">
                <TextBlock Text="Main content"  VerticalAlignment="Center" HorizontalAlignment="Center" Foreground="White" />
            </Grid>
        </ScrollViewer>

    </Grid>

</UserControl> 
```

注意： IsExpanded 触发器中扩展器设置器属性 =“Canvas.Left” 的 ToggleButton Canvas.ZIndex="1" 周围的画布

结果：

![在此处输入图像描述](../Images/8be562028852a07d6fcaccbcd6e9bc71.png)

# asp.net-mvc - 返回 FileResult 不会在 IE9 中选择 MIME 类型

> ID：14937633
> 
> 赞同：1
> 
> 时间：2013-02-18T13:37:09.980
> 
> 标签：asp.net-mvc, internet-explorer-9

我在控制器上有一个返回文件的方法

```
public FileResult DownloadFile(int id)
{
    var file = _repository.GetInidividualFile(id);
    return File(file.FileBinary, file.ContentType, file.FileName);
} 
```

文件对象正确返回值，但 IE9 没有选择内容类型。我拥有的当前文件类型列表是：

'应用程序/pdf'

'应用程序/vnd.openxmlformats-officedocument.spreadsheetml.sheet'

'应用程序/vnd.ms-excel'

所有其他浏览器似乎工作正常，但 IE 似乎只是忽略了扩展。我遇到的问题是，由于该文件是在没有扩展名的情况下下载的，因此会提示用户选择使用哪个应用程序打开文件，但他们不知道。

我在 firefox、chrome、safari 和 opera 中尝试过，一切都很好

这是调试器的视图，显示了返回的值

![调试](../Images/83db0401c19e780321dd1befd8995fa0.png)

这是 fiddler 显示内容类型的输出：

HTTP/1.1 200 正常

服务器：ASP.NET 开发服务器/10.0.0.0

日期：格林威治标准时间 2013 年 2 月 19 日星期二 10:16:41

X-AspNet-版本：4.0.30319

X-AspNetMvc-版本：3.0

内容处置：附件；filename="配置工具"

缓存控制：私有

内容类型：application/vnd.openxmlformats-officedocument.spreadsheetml.sheet

内容长度：491470

连接：关闭

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:49:23.397

经过一番折腾，我终于找到了这是什么。尽管具有内容类型，IE 仍需要文件名的扩展名。所以，

```
return File(file.FileBinary, "application/pdf", "test"); 
```

不会工作，但是

```
return File(file.FileBinary, "application/pdf", "test.pdf"); 
```

做。

# php - 在 PHP 中未检测到表单中的按钮

> ID：14937636
> 
> 赞同：1
> 
> 时间：2013-02-18T13:37:21.460
> 
> 标签：php

我正在使用如下 HTML 表单。

```
<form name="frmUploadFile" id="frmUploadFile" action="file1.php" method="post" enctype="multipart/form-data">
  <input type="file" name="flUpload" id="flUpload"/>
  <input type="button" name="btnButton" id="btnButton" value="Button Form"/>      
</form> 
```

当我提交表单时，PHP Post 方法中未检测到该按钮。但是，当我替换输入 type="submit" 时，会检测到提交并显示其值。

```
if(isset($_REQUEST['btnButton']))
{
  $File = $_FILES['flUpload'];

  print "File Name : ".$File['name'];
  exit(); 
} 
```

我正在通过以下 jquery 提交表单

```
$('#btnButton').click(function(){
  $('#frmUploadFile').submit(); 
}); 
```

以上不起作用。尽管按钮是表单元素，为什么在 php 中未检测到按钮

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T13:42:08.590

只有“成功”的表单控件才会在表单数据中提交。An`<input type="button">`永远不会成功，因为它的存在仅仅是为了将 JavaScript 绑定到它。

如果您将其替换为`type="submit"` **并**使用它来提交表单（而不是用 JavaScript 覆盖它），那么数据将出现。

* * *

更新以回应评论：

> 我正在通过 jquery 提交表单

因此，您要么调用`submit()`表单的方法（这不会使任何按钮成功），要么正在使用 Ajax（在这种情况下，您也可能不会提交文件）。

在任何一种情况下，按钮都不会构成数据的一部分，因此不要使用它来确定表单是否已提交。检查文件是否在数据中，或者用于发出请求的方法是否为*post*。

* * *

顺便说一句，不要使用`<input type="button">`+ JS 提交表单。相反，请遵循[渐进式增强](http://en.wikipedia.org/wiki/Progressive_enhancement)和[不显眼的 JavaScript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)原则。使用常规提交按钮，然后使用 JavaScript 增强它。

* * *

针对编辑的进一步更新：

您的 JavaScript 没有做任何提交按钮不会做的事情。完全使用`type="submit"`和删除 JS。

# magento - 如何覆盖方法 getSelectionQtyTitlePrice

> ID：14937641
> 
> 赞同：0
> 
> 时间：2013-02-18T13:37:28.417
> 
> 标签：magento

我正在尝试覆盖 getSelectionQtyTitlePrice 方法我创建了一个文件 My_Bundle.xml

```
<?xml version="1.0" ?>
<config>
    <modules>
        <My_Bundle>
            <active>true</active>
            <codePool>local</codePool>
        </My_Bundle>
    </modules>
</config> 
```

在 PA -> System->Advanced 模块存在并在 app/code/local/My/Bundle/Block/Catalog/Product/View/Type/Bundle Option.php 中启用

```
class My_Bundle_Block_Catalog_Product_View_Type_Bundle_Option extends Mage_Bundle_Block_Catalog_Product_View_Type_Bundle_Option
{
  public function getSelectionQtyTitlePrice($_selection, $includeContainer = false)
    {
        $price = $this->getProduct()->getPriceModel()->getSelectionPreFinalPrice($this->getProduct(), $_selection);
        $this->setFormatProduct($_selection);
        $priceTitle = $_selection->getSelectionQty()*1 . ' x ' . $this->escapeHtml($_selection->getName());

        $priceTitle .= ' &nbsp; ' . ($includeContainer ? '<span class="price-notice">' : '')
            . '' . $this->formatPriceString($price, $includeContainer)
            . ($includeContainer ? '</span>' : '');

        return  $priceTitle;
    }
} 
```

在 app/code/local/My/Bundle/etc/config.xml

```
<?xml version="1.0"?>
<config>
    <modules>
        <My_Bundle>
            <version>0.0.1</version>
        </My_Bundle>
    </modules>

    <global>
        <blocks>
            <bundle>
                   <rewrite>
                       <catalog_product_view_type_bundle_option>My_Bundle_Block_Catalog_Product_View_Type_Bundle_Option</catalog_product_view_type_bundle_option>
                    </rewrite>
            </bundle>
        </blocks>
     </global>
</config> 
```

但此解决方案不会覆盖 getSelectionQtyTitlePrice 方法。谢谢帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T14:08:16.587

看看@http [://www.magentocommerce.com/boards/viewthread/265060/#t357807](http://www.magentocommerce.com/boards/viewthread/265060/#t357807)

> 由于这个块永远不会被实例化，你应该覆盖它的子类并在它们中应用你的本地更改。

所以：在 config.xml

```
<bundle> 
    <rewrite> 
        <catalog_product_view_type_bundle_option_select>Module_Block_Bundle_Option_Select</catalog_product_view_type_bundle_option_select> 
        <catalog_product_view_type_bundle_option_multi>Module_Block_Bundle_Option_Multi</catalog_product_view_type_bundle_option_multi> 
        <catalog_product_view_type_bundle_option_radio>Module_Block_Bundle_Option_Radio</catalog_product_view_type_bundle_option_radio> 
        <catalog_product_view_type_bundle_option_checkbox>Module_Block_Bundle_Option_Checkbox</catalog_product_view_type_bundle_option_checkbox>
    </rewrite> 
</bundle> 
```

# c# - GC.KeepAlive() 和 System.Timers.Timer

> ID：14937643
> 
> 赞同：2
> 
> 时间：2013-02-18T13:37:37.280
> 
> 标签：c#, garbage-collection

我`System.Timers.Timer`在类级别中删除了对象并在构造函数中创建。在另一种方法中启动了计时器。

在经过的事件处理程序中启用属性设置为假并执行一些代码并再次启用设置为真。

我收到每个间隔的已过事件。问题是经过一段时间后停止。

我怀疑计时器对象是由 GC 在经过的事件处理程序 eventhadler 中的 moment enabled 属性设置为 false 时收集的。

所以我希望我的计时器对象设置为保持活动状态。

`GC.KeepAlive(timer)`我应该在我的项目中声明哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T13:52:20.467

如果计时器在类级别声明，GC 不会自动收集它，因为它不会超出范围。并且设置`Enabled`为`false`不会导致您描述的行为。你的问题在别的地方。

我怀疑您的事件处理程序中存在异常。`System.Timers.Timer`吞下事件处理程序中发生的异常，这意味着如果异常从事件处理程序中逃脱，您将永远不会知道它。

我怀疑你的代码是这样写的：

```
myTimer.Enabled = false;
// do stuff here
myTimer.Enabled = true; 
```

如果在“在这里做事”期间抛出异常，则异常会转义处理程序，计时器永远不会重新启用，并且计时器代码会吞下异常，因此您永远不会知道发生了什么事。

您应该像这样编写事件处理程序：

```
myTimer.Enabled = false;
try
{
    // do stuff here
}
catch (Exception ex)
{
    // handle exceptions
}
finally
{
    myTimer.Enabled = true;
} 
```

您通常只想捕获特定的异常——那些您知道如何处理的异常。像上面这样捕获所有异常通常是不好的做法。

# .net - 跨程序集的本机映像内联方法

> ID：14937647
> 
> 赞同：19
> 
> 时间：2013-02-18T13:37:54.940
> 
> 标签：.net, .net-assembly, ngen

正如[另一个问题中所解释的，如果方法具有](https://stackoverflow.com/q/6109745/631802)[TargetedPachingOptOutAttribute](http://msdn.microsoft.com/en-us/library/system.runtime.targetedpatchingoptoutattribute%28v=vs.100%29.aspx)集，则通常只允许 Ngen 跨程序集内联方法。

但是，通过使用[DependencyAttribute](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.dependencyattribute%28v=vs.100%29.aspx)对[硬绑定](http://msdn.microsoft.com/en-us/library/6t9t5wcf%28v=vs.100%29.aspx)程序集也是如此吗？`LoadHint.Always`

**编辑：**也许我最初的问题的答案是否定的，否则`TargetedPatchingOptOutAttribute`在 mscorlib 中使用它是没有意义的，因为这个程序集总是硬绑定的（它具有[DefaultDependencyAttribute](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.defaultdependencyattribute%28v=vs.100%29.aspx)集）。所以我想重新提出我的问题：在`TargetedPatchingOptOutAttribute`程序集的本机图像中内联方法是唯一的方法吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-20T14:31:14.827

**TLDR 版本：**不要关心`TargetedPatchingOptOutAttribute`，它应该只在 .NET Framework 程序集中使用。自开发程序集的方法内联与 Ngen 和 JIT 相同。

* * *

似乎[另一个问题](https://stackoverflow.com/questions/6109745/targetedpatchingoptout-performance-critical-to-inline-across-ngen-image-bounda)让我做出了一个完全错误的假设。我们**自己的**程序集中的方法**是**跨原生图像边界内联的，即使它们既没有硬绑定也没有`TargetedPatchingOptOutAttribute`集合。此属性仅影响 .NET Framework 程序集。

[Microsoft 博客文章](http://blogs.msdn.com/b/clrcodegeneration/archive/2009/10/21/jit-etw-inlining-event-fail-reasons.aspx)有一个关于以下内容的非常好的部分`TargetedPatchingOptOutAttribute`：

> “有针对性的修补 - 方法缺少 TargetedPatchingOptOutAttribute” - 这与 CLR 4 中的一个新功能有关，其中 NGEN 图像更具版本弹性。简而言之，我们希望能够对 mscorlib.dll 应用补丁或修复，而不必重新编译机器上依赖它的所有其他本机映像。这应该只适用于 .NET 框架类库中的方法，因为它们是唯一可以选择使用此功能的程序集。

这意味着：由于 .NET Framework 程序集现在支持.NET 4.0 中的[目标修补](http://blogs.msdn.com/b/clrcodegeneration/archive/2009/05/03/improvements-to-ngen-in-.net-framework-4.aspx)，因此这些程序集的方法通常无法内联。但是标有 的方法对`TargetedPatchingOptOutAttribute`性能至关重要，因此选择退出目标修补（这意味着如果它们被更改，所有使用该方法的本机映像都需要重新编译）。由于我们自己的程序集不使用有针对性的修补，因此没有理由阻止跨原生图像的方法内联。

为了测试这一点，我创建了一个小示例，该示例显示了在不同程序集中引发的异常的调用堆栈。只有我的 main 方法和引发异常的方法在调用堆栈中。在调用和被调用程序集中放置的其他一些小方法（基本上只是调用下一个方法）不在调用堆栈中。在为程序集创建本机映像后，此行为没有改变（是的，我检查了是否使用了本机映像）。

# javascript - jquery.validation() - 验证有效但不提交

> ID：14937649
> 
> 赞同：0
> 
> 时间：2013-02-18T13:38:03.307
> 
> 标签：javascript, jquery, validation

我遇到了 jQuery.validation 方法起作用的这种奇怪情况 - 验证表单，但由于某种原因，即使满足所有必需条件也会阻止表单提交。

表单 HTML 和 JS：

```
<div id="createcustomer">
<form method="POST" action="http://localhost/actionurl..." id="create-customer-form">
    <div class="input-table">
        <div class="input-row">
            <div class="input-cell-label" >
                Skrót (Kod)
            </div>
            <div class="input-cell">
                <input type="text" id="input-shortname" name="shortname" class="required" maxlength="25" value="" />
            </div>                    
        </div>
        <div class="input-row">
            <div class="input-cell-label" >
                Pełna nazwa
            </div>
            <div class="input-cell">
                <input type="text" id="input-fullname" name="fullname" class="required" maxlength="255" value="" />
            </div>                    
        </div>
        <div class="input-row">
            <div class="input-cell-label" >
                Adres
            </div>
            <div class="input-cell">
                <input type="text" id="input-address" name="address" class="" maxlength="90" value="" />
            </div>                    
        </div>
        <div class="input-row">
            <div class="input-cell-label" >
                Kod pocztowy
            </div>
            <div class="input-cell">
                <input type="text" id="input-postal_code" name="postal_code" class="" maxlength="6" value="" />
            </div>                    
        </div>
        <div class="input-row">
            <div class="input-cell-label" >
                Miasto
            </div>
            <div class="input-cell">
                <input type="text" id="input-city" name="city" class="" maxlength="45" value="" />
            </div>                    
        </div>
        <div class="input-row">
            <div class="input-cell-label" >
                Państwo
            </div>
            <div class="input-cell">
                <input type="text" id="input-country" name="country" class="required" maxlength="45" value="" />
            </div>                    
        </div>
        <div class="input-row">
            <div class="input-cell-label" >
                Telefon
            </div>
            <div class="input-cell">
                <input type="text" id="input-phone" name="phone" class="" maxlength="45" value="" />
            </div>                    
        </div>
        <div class="input-row">
            <div class="input-cell-label" >
                Faks
            </div>
            <div class="input-cell">
                <input type="text" id="input-fax" name="fax" class="" maxlength="45" value="" />
            </div>                    
        </div>
        <div class="input-row">
            <div class="input-cell-label" >
                Email
            </div>
            <div class="input-cell">
                <input type="text" id="input-email" name="email" class="" maxlength="45" value="" />
            </div>                    
        </div>
        <div class="input-row">
            <div class="input-cell-label" >
                Strona www
            </div>
            <div class="input-cell">
                <input type="text" id="input-website" name="website" class="" maxlength="45" value="" />
            </div>                    
        </div>
        <div class="input-row">
            <div class="input-cell" >
            </div>
            <div class="input-cell" >
                <input type="submit" name="submit_create" value="Utwórz" class="submit"/><input type="Reset" value="Wyczyść" />
            </div>
        </div>
    </div>
</form> 
```

```
<script>

$(function(){ 

    $("#create-customer-form").validate();

});

$(document).ready(function(){

}); 
```

没有错误消息，萤火虫中没有错误，什么都没有。JS 工作稳定。我试图简化它并尝试仅使用 1 个输入字段 - 结果相同。表单在没有应用验证方法的情况下工作得很好。

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:45:03.777

不确定它是否适合您，请尝试：

```
$(document).ready(function(){
   $("#create-customer-form").validate({
   submitHandler: function(form) {
   form.submit();
   }
 });
}); 
```

# javascript - Highcharts PhantomJS - 替代方法

> ID：14937651
> 
> 赞同：0
> 
> 时间：2013-02-18T13:38:15.797
> 
> 标签：javascript, highcharts

这与用于服务器端图表生成的 Export Server + PhantomJS 的新功能有关。

下面的 HSE 是指 one2Team 的 Highcharts 服务器端导出框架。

根据我们的初步分析，我们发现对于我们测试的饼图和条形图，将 PhantomJS 作为一个单独的进程调用对于 HSE 来说都比较慢。我们发现 PhantomJS 有一个内置的网络服务器功能 - Mongoose - ariya.ofilabs.com/2012/01/glory-of-the-snow.html 这有助于简化进程通信（并且还避免了 infile 中的 I/O ，outfile 方法）。我们可以用它来执行，发现 PhantomJS 在性能上与 HSE 相同或更好。但尚不确定它可以在生产流量中承受多少负载并做出响应。您是否评估过任何此类选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:15:02.630

用于服务器端生成的 Highcharts 导出服务器，可以在两方面进行改进。

1.  重用 phantomJS 进程，而不是为每次转换启动一个进程。这可以通过将脚本作为网络服务器模块运行来避免。另一种可能性是通过标准输入/标准输出直接写入进程。但据我所知，这还没有完全实施。
2.  避免为导出服务器和 phantomJS 脚本之间的通信创建临时文件。

在进行这些改进时，我在本地运行时有以下测试结果

当前的版本：

*   转换 2000 点 > 5 秒超时
*   12 点图 (llexl) 需要 620ms

通过以上改进：

*   2000 点需要 660 毫秒
*   12 点图 (llexl) 需要 250ms

# javascript - 动态 iframe 高度取决于隐藏/显示

> ID：14937657
> 
> 赞同：3
> 
> 时间：2013-02-18T13:38:34.990
> 
> 标签：javascript, jquery, iframe, dynamic, height

我有一个包含一些隐藏字段的表单，这些隐​​藏字段仅根据是/否单选按钮问题的答案显示。

此表单用于使用 iframe 的多个外部网站，因此位于不同的域中。

如何根据这些隐藏字段是否显示来更改 iframe 的高度。它们显示/隐藏的方式是在单独的 scripts.js 文件中使用 jquery show/hide。例如

```
 $('#show').click(function(){
     $('#additional_fields').show('fast'); 
});

$('#hide').click(function(){
   $('#additional_fields').hide('fast'); 
});

<div id="additional_fields" style="display:none;"> hidden fields here
</div> 
```

包含上述内容的 iframe：

```
<iframe id="idIframe" src="http://websites.com/form.php" scrolling="no" height="1000" width="950" border="0"/> 
```

**更新**

我已经设法使用以下方法让它工作

```
$("#idIframe", top.document).css({ height: 1750 }); 
```

但是，这仅在使用相同域时有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:36:40.180

我相信，唯一的方法是使用`postMessage`（[https://developer.mozilla.org/en-US/docs/DOM/window.postMessage](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage)）将内容的高度发送到父窗口。

问题是父页面需要收听消息，所以这只有在你对它有一些控制的情况下才会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T13:43:29.443

Give an `ID` to your iframe and use the jQuery `height` function:

```
$('#show').click(function(){
      var newHeight = $("#idIframe").height() + 50;
      $("#idIframe").height(newHeight);
      $('#additional_fields').show('fast');   
});

$('#hide').click(function(){
      var newHeight = $("#idIframe").height() - 50;
      $("#idIframe").height(newHeight);
    $('#additional_fields').hide('fast'); 
}); 
```

Demonstrating how to change the height of the iframe:

[http://jsfiddle.net/aZxRn/](http://jsfiddle.net/aZxRn/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T13:46:22.560

```
$('#show').click(function () {
    $('#additional_fields').show('fast');
    $("#idIframe").height($("body").height());
});

$('#hide').click(function () {
    $('#additional_fields').hide('fast');
    $("#idIframe").height(0);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T10:52:39.573

我写了一个例子，在动画内容的同时调整 iframe 的大小。我认为您应该在我的代码中找到您的解决方案：

[http://algorhythm.de/tools/resizeable-iframe/](http://algorhythm.de/tools/resizeable-iframe/)

我的解决方案也仅在您对父级和 iframe 使用相同的域时才有效。这是因为同源政策：[http ://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-18T14:21:08.747

您将需要使用[*context*](http://api.jquery.com/jQuery/#jQuery1)选项来调用框架集。

```
$('#show').click(function () {
    $('#additional_fields').show('fast');
    $("iframe",window.document).height(150);
});

$('#hide').click(function () {
    $('#additional_fields').hide('fast');
    $("iframe",window.document).height(0);
}); 
```

这样做的原因是默认情况下 Jquerys 上下文设置为当前帧的文档，因此您需要手动设置上下文。

# c# - 自动安装程序单击继续等，而 process.waitforexit() 处于活动状态

> ID：14937660
> 
> 赞同：0
> 
> 时间：2013-02-18T13:38:42.677
> 
> 标签：c#

我正在根据功能事件编写自动安装程序，例如：

*   易于编码的自动安装程序，（但在所有程序上都付出了巨大的努力）。

现在我遇到了一个问题，程序运行时如何执行 sendkeys 等`process.waitforexit()`？

```
try
        {
            foreach (string checkedItem in checkedListBox1.CheckedItems)
            {
                if (checkedItem.Contains("."))
                {
                    string str = checkedItem;
                    if (str.Contains("."))
                    {
                        /* haal de rest achter de . eraf om een map ervan te maken. */
                        int index = str.IndexOf('.');
                        string folder = str.Substring(0, index);
                        string pad = Application.StartupPath;
                        try
                        {
                            /* Start de programma. */
                            bool started = false;
                            var process = new Process();
                            process.StartInfo.FileName = pad + "/data/" + folder + "/" + checkedItem;
                            started = process.Start();
                            /* Haal de informatie op van de programma's die opgestart worden. */
                            var processID = process.Id;
                            var processNAAM = process.ProcessName;
                            textBox1.Text += "Gevonden - ID: " + processID + "     NAAM: " + processNAAM + Environment.NewLine;
                            textBox1.Text += DateTime.Now.ToString("HH:mm:ss", System.Globalization.DateTimeFormatInfo.InvariantInfo) + "  -  " + "Installatie Keuze wordt opgestart." + Environment.NewLine;
                            /* Wacht totdat het programma klaar is! */
                                process.WaitForExit();
                            textBox1.Text += DateTime.Now.ToString("HH:mm:ss", System.Globalization.DateTimeFormatInfo.InvariantInfo) + "  -  " + "Installatie Geslaagd!" + Environment.NewLine + Environment.NewLine;
                        } 
```

如果有人能够在这里帮助我，将不胜感激：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:44:48.637

使用`Process.WaitForInputIdle()`以便您知道其他进程已准备好输入，然后根据需要使用 SendKeys`Process.WaitForExit()`如果您确实需要等待它退出，则可以调用。

**编辑**

用下面替换你的行`process.WaitForExit();`并用你需要的密钥更新 %C 可能

```
process.WaitForInputIdle();
SendKeys.SendWait("Your Key Strokes");
process.WaitForExit(); 
```

# android - 更新片段中的 textView

> ID：14937662
> 
> 赞同：0
> 
> 时间：2013-02-18T13:38:50.493
> 
> 标签：android, android-layout, android-fragments, textview

当我尝试在 dialogfragment 之后更新 Textview 的值时，我**得到了正确的值**，但如果之前的值更长，它的**旧视图在背景中仍然可见**（并且丑陋）。

我尝试为当前片段调用**onResume()但没有改进。**

我只是调用一个对话框，当调用监听**器 onFinishEditDialog()**时，我只是设置文本

如果我打开另一个应用程序并且我回来了它是完美的（旧的已经消失了）这怎么可能？

在xml布局中：

```
 <TextView
                    android:id="@+id/txttotalcho"
                    style="@style/importantTextView"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:padding="40dp"
                    android:text="33 cho"
                    android:textSize="64dp" /> 
```

在 MainActivity 中：

```
@Override
    public void onGoToPage(int pageNumber,boolean verso, Pasto p,ArrayList<CiboSelezionato> cibiSelezionati,String extra) {
            FragmentManager fm = getFragmentManager();
            FragmentTransaction ft = fm.beginTransaction();
            Fragment firstDetail = 

(Fragment)fm.findFragmentByTag(SECOND_DETAIL_FRAGMENT_TAG);
                ft.remove(firstDetail);

                ft.commit();
                        FragmentTransaction ft2 = fm.beginTransaction();
        switch (pageNumber){

                        case Constants.P_SCELTA_PASTO:{
                             WizardPasti10 secondDetail = WizardPasti10.getInstance(this);
        ft2.replace(R.id.anchor_layout,secondDetail,SECOND_DETAIL_FRAGMENT_TAG);
                            break;
                        }
                        case Constants.P_TOTAL_CHO:{
                             WizardPastiTotalCho secondDetail = WizardPastiTotalCho.getInstance(this);
     ft2.replace(R.id.anchor_layout,secondDetail,SECOND_DETAIL_FRAGMENT_TAG);

                            break;
                        }
             ft2.commit();
                    View v1,v2;
                    v1=(View)findViewById(R.id.anchor_left);
                    v2=(View)findViewById(R.id.anchor_layout);
                    v1.setVisibility(View.GONE);
                    v2.setVisibility(View.VISIBLE);
                v2.setBackgroundColor(getResources().getColor(R.color.white));
    } 
```

在片段 WizardPastiTotalCho 中：

```
private TextView txtTotalCho;
  @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,Bundle savedInstanceState) {

          View firstView = inflater.inflate(R.layout.wizardpastitotalcho, container, false);
                txtTotalCho = (TextView)firstView.findViewById(R.id.txttotalcho);
            txtTotalCho.setOnClickListener(new OnClickListener(){
                @Override
                public void onClick(View button) {
                    FragmentTransaction ft = getFragmentManager().beginTransaction();
                    DialogFragment newFragment = new TastierinoDialogFragment(WizardPastiTotalCho.this,Constants.CARBOIDRATI,0);
                    newFragment.show(ft, "totalchoDialog");
                }
            });
    }

     @Override
            public void onFinishEditDialog(int dialogType, String inputText) {
     //called when i close the dialogFragment
                txtTotalCho.setText(inputText+" cho");
txtTotalCho.setBackgroundColor(Color.YELLOW);//just to see the difference
                try {
                    totalCho=Float.parseFloat(inputText);
                    tmpPasto.setCarboidrati(totalCho);
                } catch (NumberFormatException e) {
                    e.printStackTrace();    
                }
            } 
```

![重叠标签](../Images/cd5bdd325afd42dec282b5e682637435.png)

# visual-studio-2010 - 如何在缺少引用程序集的 VS2010 建模项目中使构建失败？

> ID：14937666
> 
> 赞同：0
> 
> 时间：2013-02-18T13:39:01.520
> 
> 标签：visual-studio-2010, msbuild

我有一个带有层图的 VS 2010 建模项目。我使用层图来验证一些组件。请注意，由于我有一些构建约束，我正在添加引用到建模项目的程序集，而不是项目引用。只要可以找到引用的程序集，就可以正常工作。如果未找到程序集，则构建通过，但会发出警告，指示未找到引用的程序集。这很有意义。但是，如果您希望在出现层图验证错误时构建会失败，那么通过构建会产生错误的印象，即程序集中的实现是有效的。我的问题是，当找不到引用的程序集时，如何使构建失败。我尝试了 TreatWarningsAsErrors 标签，但没有奏效。我不是 MSBuild 专家，

提前感谢您的回复。

富阿特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T18:31:14.733

您可以将 beforebuild 目标更改为：

```
<Error Condition="!Exists('C:\Reference\Required.dll')" Text="Reference not found" /> 
```

# ios - 多账户订阅的应用内购买

> ID：14937677
> 
> 赞同：2
> 
> 时间：2013-02-18T13:39:12.583
> 
> 标签：ios, ipad, in-app-purchase

我们正在使用云后端和连接到该后端的 iPad 应用程序构建一个解决方案，奇怪的是 Apple 拒绝了该应用程序，因为付款必须从网络完成，他们建议使用 In App-Purchase，我的问题是：Can the admin（在我们的例子中是经理）为其每位员工购买多个订阅，以便在应用程序内的不同设备中使用，这符合 Apple IAP 指南。（我们调查了指南，但我们认为没有列出类似的情况）。

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:47:10.073

应用内购买在*帐户*而非*设备*上处于活动状态。这意味着，如果有人使用特定 Apple ID 购买订阅，使用该 Apple ID 的任何其他设备也可以（必须）访问该订阅。因此，如果您的场景中的所有设备都使用相同的 Apple ID，则经理购买一次，然后其他设备也可以使用“恢复”功能将订阅加载到这些设备上。

如果每台设备都有与之关联的不同 Apple ID，则订阅费用将计入每个人的 Apple ID。

# apache - Apache CXF JMS - SOAP

> ID：14937686
> 
> 赞同：0
> 
> 时间：2013-02-18T13:39:33.177
> 
> 标签：apache, soap, wsdl, jms, cxf

我需要使用相同的 SOAP 请求才能调用方法的相同实现，但该方法由 2 个不同的服务端点公开：

1.  端点 A - 用于通过 SOAP 进行同步访问
2.  端点 B - 用于通过 JMS 进行异步访问

现在看到的是，在 JMS 和 SOAP Web 服务端点上工作的 SOAP 请求消息在结构上是不同的。

我想知道使用 ApacheCXF 是否可以使用相同的 SOAP 请求调用 SOAP 或 JMS 端点？

在我的情况下，我能够调用两个端点，但每个端点使用的请求并不相同

下面是一个 SOAP 消息的示例，该消息适用于异步端点 B，但不适用于同步端点 A .. 请注意，我通过执行 Junit 测试获得了异步消息并截获了 ActiveMQ 队列上的生成消息：

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">

<soap:Body>
    <ns1:create xmlns:ns1="http://service.ws.example/">
        <CustomPartyModel>
            <ns2:customerModel
                xmlns:ns2="http://party.beans.commons.example">
                <ns2:person>
                    <ns2:budgetPlanNumber>131484</ns2:budgetPlanNumber>
                    <ns2:clientSituationCode
                        xmlns:ns3="http://www.w3.org/2001/XMLSchema-instance" ns3:nil="true" />
                    <ns2:employeeReduction>J</ns2:employeeReduction>
                    <ns2:employeeNumber></ns2:employeeNumber>
                    <ns2:packageNumber>5</ns2:packageNumber>
                    <ns2:planIndicator xmlns:ns3="http://www.w3.org/2001/XMLSchema-instance"
                        ns3:nil="true" />
                    <ns2:privateRelationNumber
                        xmlns:ns3="http://www.w3.org/2001/XMLSchema-instance" ns3:nil="true" />
                </ns2:person>
            </ns2:customerModel>

        </CustomPartyModel>
    </ns1:create>
</soap:Body> 
```

这是适用于同步端点但不适用于异步端点的 SOAP 请求。此请求是通过从 WSDL 创建请求获得的：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ser="http://service.ws.example/" xmlns:par="http://party.beans.commons.example">
 <soapenv:Body>
  <ser:CustomPartyModel>
    <par:customerModel>

        <par:person>

           <par:budgetPlanNumber>131484</par:budgetPlanNumber>

           <par:employeeReduction>J</par:employeeReduction>

           <par:employeeNumber></par:employeeNumber>

        <par:packageNumber>5</par:packageNumber>

           <par:professionCodePartner></par:professionCodePartner>

           <par:professionDescriptionPartner></par:professionDescriptionPartner>

        </par:person>
     </par:customerModel>

  </ser:CustomPartyModel> 
```

在这两种情况下，我都使用 Aegis 进行数据绑定，我也尝试过 JAXB，但没有进一步成功。

鉴于它具有相同方法签名的相同方法，您会期望在异步和同步中都可以使用相同的请求，但情况似乎并非如此。

有人遇到过类似的问题，或者可能对此有所了解吗？

请注意，我正在使用以下依赖项：cxf-api-2.2.2.jar、cxf-common-utilities-2.2.2.jar、cxf-rt-databinding-aegis-2.2.2.jar、XmlSchema-1.4.5。 jar、cxf-rt-transsports-jms-2.2.2.jar、spring-jms-2.5.5.jar、acegi-security-1.0.7.jar

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T09:46:22.710

好的，我发现解决方案基本上能够通过 JMS 和同步 SOAP 作为 Document Literal 发送请求，需要在接口上定义以下内容

```
@WebService
@SOAPBinding(style=Style.DOCUMENT, use=Use.LITERAL,parameterStyle=ParameterStyle.BARE)
public interface ExampleAsyncService { 
```

如果没有 Document/Literal/Bare 配置，JMS 将有发送 RPC 包装样式请求的趋势。

# asp.net - RadGrid 页脚中的 Html

> ID：14937689
> 
> 赞同：0
> 
> 时间：2013-02-18T13:39:43.333
> 
> 标签：asp.net, webforms, telerik, radgrid

有人可以告诉我如何将一些 html 放入 RadGrid 页脚吗？我需要将其放入列页脚中，而不是放入整个网格中。

```
<telerik:RadGrid ID="radGrid" ShowFooter="true" runat="server" AutoGenerateColumns="false">             
    <MasterTableView>
        <Columns>
            <telerik:GridBoundColumn DataField="Name" HeaderText="Name">
            </telerik:GridBoundColumn>
            <telerik:GridBoundColumn DataField="Position" HeaderText="Position">
            </telerik:GridBoundColumn>
        </Columns>
    </MasterTableView>
    <FooterStyle BorderWidth="10px" BorderColor="Red" />
</telerik:RadGrid> 
```

“全球”页脚没有`<FooterTemplate>`标签，所以也许有人知道这样做的优雅方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:55:21.950

是的，我不认为这是一种选择。我唯一能想到的，我还没有验证的是：

*   尝试在第一列的单元格上设置列跨度；RadGrid 本质上是一个基于表格的结构，并且在 itemcreated 或 itemdatabound 上，当行类型是页脚时，您可以尝试在该单元格上设置列跨度。
*   您可以尝试隐藏默认页脚，并将您自己的 DIV 与您的其他内容一起放在网格的底部。您应该能够在网格底部放置一个 DIV。

# windows - 适用于 Windows 8 应用商店应用 (WinRT/XAML) 的 PropertyGrid

> ID：14937693
> 
> 赞同：1
> 
> 时间：2013-02-18T13:39:51.557
> 
> 标签：windows, winrt-xaml

我需要一个*PropertyGrid*控件（如在 Windows 窗体或 WPF 中实现）**但**仅适用于*Windows 8 应用商店应用程序*？*您会为WinRT/XAML*推荐任何可用的免费或商业 PropertyGrid 控件吗？谢谢！

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2013-02-18T14:25:06.090

创建 Windows 应用商店应用程序时，您可以使用 HTML5/JavaScript 或 C++、C# 和 VB.NET 和 WPF/XAML 创建它。请参阅[MSDN](http://msdn.microsoft.com/en-us/library/windows/apps/br211386.aspx)以获取更多参考。

# django - 以 10 为基数的 int() 的错误无效文字：''

> ID：14937694
> 
> 赞同：1
> 
> 时间：2013-02-18T13:39:56.063
> 
> 标签：django, django-views

我有以下可选过滤器：

```
cat_id = self.request.GET.get('cat_id', '')
return Product.objects.filter(category__pk=cat_id) 
```

当未传递可选的 cat_id 时，我收到此错误：

```
ValueError at /api/products/
invalid literal for int() with base 10: '' 
```

我的问题是，我该如何做到这一点，以便当 cat_id 没有通过时，过滤器是这样的......

```
return Product.objects.filter() 
```

**或者有人可以告诉我一个更好的方法，如果我有 10 个可选过滤器要包含怎么办？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T13:43:20.473

可能是这样的？

```
filters = {}

cat_id = self.request.GET.get('cat_id', None)

if cat_id:
    filters["category__pk"] = cat_id

return Product.objects.filter(**filters) 
```

编辑：如果我有很多参数要过滤，我会尝试做这样的事情（未经测试）：

```
# with all your possible lookups here
possible_filters = {"cat_id": "category__pk", "colour": "colour__pk", }

# and then go through the provided fields, and toggle the filters accordingly
enabled_filters = { possible_filters[filter]: self.request.GET[filter] for filter
                    in possible_filters
                    if self.request.GET.get(filter, None) }

return Product.objects.filter(**enabled_filters) 
```

# ios - Facebook 和 iOS：在多个应用程序之间共享一个应用程序 ID

> ID：14937697
> 
> 赞同：11
> 
> 时间：2013-02-18T13:40:03.583
> 
> 标签：ios, facebook, facebook-ios-sdk, url-scheme

在遵循 Facebook 的教程后，我在实现此功能时遇到了问题： [https ://developers.facebook.com/docs/howtos/share-appid-across-multiple-apps-ios-sdk/](https://developers.facebook.com/docs/howtos/share-appid-across-multiple-apps-ios-sdk/)

基本上，我在同一个项目下有 2 个目标 - 一个用于免费版本，一个用于高级版本。我为此创建并设置了一个 Facebook 应用程序，并添加了 2 个 url 方案后缀：

![两个 URL 方案就足够了](../Images/fba5773bcdb442be6bcddf4a5c9def86.png)

另外，我在相应的 plist 文件中添加了后缀。例如，高级应用程序定义为：

![info.plist 文件的屏幕截图](../Images/75a7861572f787197f4a5f59797308b2.png)

其中“xxxxx...”只是我的 Facebook 应用 ID。

毕竟，我仍然无法在 iOS 5.0 和 6.0 上登录应用程序（使用原生 FB 对话框或 Safari 中的 SDK 对话框）。这是我通过 Safari 登录时得到的：

![带有消息的警报](../Images/af8aa502c01c40e4f1b1167ddc6386d7.png)

进行登录的代码是：

```
NSArray *permissions = kInitialPermissions;

BOOL result = NO;
FBSession *session = [[FBSession alloc] initWithAppID:@"xxxxxxxxxxx"
                                          permissions:@[]
                                      urlSchemeSuffix:@"premium"
                                   tokenCacheStrategy:nil];

if (allowLoginUI ||
    (session.state == FBSessionStateCreatedTokenLoaded)) {
    [FBSession setActiveSession:session];
}

result = [FBSession openActiveSessionWithReadPermissions:permissions
                                                allowLoginUI:allowLoginUI
                                           completionHandler:completion];
return result; 
```

任何想法将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-16T16:00:12.937

除了将 fbxxxxxxxxxxpremium URL Scheme 添加到 plist 文件中的 URL Types 数组（您似乎正在这样做）之外，还添加一个新的键/值：

```
key = FacebookUrlSchemeSuffix
value = premium 
```

所以在 plist 文件本身：

```
<key>FacebookUrlSchemeSuffix</key>
<string>premium</string> 
```

这为我修好了。Facebook 文档提到了这一点，但没有明确 IMO。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T03:47:14.097

您的问题是 iOS 无法识别自定义 URL 方案。以下是一些可能的原因：

1.  我看到您已将`CFBundleURLSchemes`plist 中的密钥正确设置为一系列受支持的方案。您还需要设置`CFBundleURLName`为*com.myApp.MyURLScheme 之*类的内容。你做过吗？

2.  在调用 will 并确实完成启动方法后，iOS 将调用您的应用程序委托的`- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation`方法。您还必须实现此方法并且它必须返回`YES`。你？

3.  确保您的 URL 格式正确。 `fbxxxxxxpremium://foo=bar`不会工作，但`fbxxxxxxpremium://?foo=bar`会（这`?`是强制性的）。

请注意，如果您的目标是 iOS 4.1 或更早版本，则委托方法会略有不同。

有关详细信息和示例代码，请参阅iOS SDK 文档[中高级应用技巧的](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/AdvancedAppTricks/AdvancedAppTricks.html)**与其他应用通信**部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T21:43:24.380

我认为问题出在您打电话时：

```
result = [FBSession openActiveSessionWithReadPermissions:permissions
                                            allowLoginUI:allowLoginUI
                                       completionHandler:completion]; 
```

正在打开的会话没有 url 方案后缀。

所以你应该打电话

```
[session openWithBehavior:FBSessionLoginBehaviorUseSystemAccountIfPresent 
        completionHandler:completion]; 
```

# c# - WQL Like 语句和语法

> ID：14937699
> 
> 赞同：2
> 
> 时间：2013-02-18T13:40:10.727
> 
> 标签：c#, wmi, wql

我已经看到了至少另外两个关于 WMI 的问题，但没有人回答我的问题，所以在这里；

我正在我的代码中试验`WMI`接口。基本上这就是我现在所拥有的并且它有效。但在我看来，我可以更有效地编写它：

`public bool GetUsbStateById(string id) { bool returnValue = false;`

 ````
 try
  {
    ObjectQuery query = new ObjectQuery();
    query.QueryString = string.Format("Select * From Win32_PnPDevice");
    ManagementObjectSearcher mySearcher = new ManagementObjectSearcher(query);

    List<ManagementObject> results = (from ManagementObject mo in mySearcher.Get().AsParallel()
                                      where mo["SystemElement"].ToString().ToUpper().Contains(id.ToUpper())
                                      select mo).ToList();

    if (results.Count > 0)
      returnValue = true;
  }
  catch (Exception ex)
  {
    // TODO: implement logging
  }

  return returnValue;
} 
````  `所以这里发生的是我`ManagementObjects`从`ManagementObjectSearcher`. 这工作正常，并且还返回我期望它工作的确切结果。

但这对我来说似乎是多余的。因为，首先我得到整个列表，然后过滤它。但是因为它用于`WQL`填充列表，我假设我可以实现这样的东西：

`query.QueryString = string.Format("Select * From Win32_PnPDevice where SystemElement Like '%{0}%'",id);`

这不断抛出一个`exception`查询不正确。

所以我尝试了这个：

`query.QueryString = string.Format("Select SystemElement From Win32_PnPDevice);`

这也有效，所以接下来我尝试`Win32_PnPDevice.SystemElement`了，但这也没有用。

我在互联网上查看的任何示例都显示了类似的内容

`Select * From Win32_Service Where Name Like "%SQL%"`

但是 c# 无法解析`%SQL%`那里的语句周围的双引号，使用`\`转义字符也不会产生任何结果。

为了测试我的代码和下面发布的代码，我使用了Microsoft的[WMI Code Creator](http://www.microsoft.com/en-us/download/details.aspx?id=8572)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T14:20:47.603

如果您想在其中运行[类似](http://msdn.microsoft.com/en-us/library/windows/desktop/aa392263%28v=vs.85%29.aspx)查询，`WMI`则可以使用以下示例：

```
using System;
using System.Management;
using System.Windows.Forms;

namespace WMISample
{
    public class MyWMIQuery
    {
        public static void Main()
        {
            try
            {
              string strSearchText="win";
              string strSearchQuery=string.Format("SELECT * FROM Win32_Service where Name like '%{0}%'",strSearchText);
              ManagementObjectSearcher searcher = new ManagementObjectSearcher("root\\CIMV2",strSearchQuery  );

            foreach (ManagementObject queryObj in searcher.Get())
            {
                Console.WriteLine("-----------------------------------");
                Console.WriteLine("Win32_Service instance");
                Console.WriteLine("-----------------------------------");
                Console.WriteLine("Name: {0}", queryObj["Name"]);
            }
            }
            catch (ManagementException e)
            {
                MessageBox.Show("An error occurred while querying for WMI data: " + e.Message);
            }
        }
    }
} 
```

**但是**您不能像[讨论](http://social.technet.microsoft.com/Forums/nl-BE/winserverpowershell/thread/24981775-e105-42a8-8313-b0b86972f6c3)`like`的那样应用查询`Win32_PNPDevice``

# c# - 关于将 html 数据重复添加到 Web 浏览器控件的问题

> ID：14937705
> 
> 赞同：1
> 
> 时间：2013-02-18T13:40:18.933
> 
> 标签：c#, webbrowser-control

这样我尝试将 html 数据添加到 Web 浏览器控件。

```
private void Adddata()
{
webBrowser1.DocumentText =
"<html><body>Please enter your name:<br/>" +
"<input type='text' name='userName'/><br/>" +
"<a href='http://www.microsoft.com'>continue</a>" +
"</body></html>";
} 
```

这可行，但是当我`Adddata()`重复调用例程时，只会添加第一次数据，但从下一次开始不会添加任何数据。我只想重复添加数据。有什么出路吗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:42:09.573

改变

```
webBrowser1.DocumentText = //blah 
```

至

```
webBrowser1.DocumentText += //blah 
```

嗯，不是真的。对 html 这样做不是最好的主意。我会做的是

```
//in class def
bool firstTime;
//in method
bool firstTimeLcl = firstTime
firstTime = false;
if (firstTimeLcl)
{
//write header
} 
else
{
String.Replace(/*closing tags*/, "");
}
//write everything within body
//write closing tags 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T13:45:12.113

你可以使用这个：

```
webBrowser1.DocumentText += 
```

但是现在当你不能用许多 body 和 html 标签添加这段代码时。始终使用一个 html 和 body 标签构建新字符串。只需在里面附加html代码。

# c# - 使用 AesCryptoServiceProvider 获取不正确的解密值

> ID：14937707
> 
> 赞同：3
> 
> 时间：2013-02-18T13:40:31.117
> 
> 标签：c#, .net, encryption, cryptography

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T16:19:29.150

使用密码原语很容易犯实现错误，人们总是这样做，如果可以的话，最好使用[高级库](http://jbtule.github.com/keyczar-dotnet/)。

我有一个[片段](https://stackoverflow.com/a/10366194/637783)，我试图保持审查和更新，它非常接近你正在做的事情。它还对密文进行身份验证，如果有对手可以将选择的密文发送到您的解密实现，我会建议这样做，有很多与修改密文相关的旁道攻击。

但是，您遇到的问题与填充没有任何关系，如果您的密文与您的密钥和 iv 不匹配，并且您没有验证您的 iv 和密文，您通常会收到填充错误（如果这是冒泡客户端，则称为[填充 oracle](http://en.wikipedia.org/wiki/Padding_oracle_attack)）。您需要将主要语句更改为：

```
 string valid128BitString = "AAECAwQFBgcICQoLDA0ODw==";
    string inputValue = "Test";
    string keyValue = valid128BitString;

    byte[] byteValForString = Encoding.UTF8.GetBytes(inputValue);
    EncryptResult result = Aes128Utility.EncryptData(byteValForString, keyValue);
    EncryptResult encyptedValue = new EncryptResult();
    encyptedValue.IV = result.IV; //<--Very Important
    encyptedValue.EncryptedMsg = result.EncryptedMsg;

    string finalResult =Encoding.UTF8.GetString(Aes128Utility.DecryptData(encyptedValue, keyValue)); 
```

因此，您使用与加密相同的 IV 进行解密。

# java - 如何在 play 2.1 Java 中为 WS.post() 设置参数

> ID：14937710
> 
> 赞同：10
> 
> 时间：2013-02-18T13:40:46.093
> 
> 标签：java, playframework-2.1

我正在尝试使用 play.api.libs.ws.WS 发布帖子，但我不知道如何设置参数，我的代码：

```
Promise<Response> promise = WS.url(Play.application().configuration()
                .getString("sms.service.url")).post(); 
```

**.post**需要 (T body, play.api.http.Writeable wrt, play.api.http.ContentTypeOf ct) 但我不明白我应该如何在那里传递参数。该文档仅说明：

```
Promise<WS.Response> result = WS.url("http://localhost:9001").post("content"); 
```

我如何设置内容，例如。**param1=foo**和**param2=bar**？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-18T13:53:46.300

尝试像这样构造请求：

```
WS.url("http://localhost:9001")
    .setQueryParameter("param1", "foo")
    .setQueryParameter("param2", "bar")
    .post("content"); 
```

该方法`url(java.lang.String url)`返回一个`WS.WSRequestHolder`引用，该引用可用于使用对 的链式调用来修改原始请求[`setQueryParameter`](http://www.playframework.com/documentation/api/2.1.0/java/play/libs/WS.WSRequestHolder.html#setQueryParameter%28java.lang.String,%20java.lang.String%29)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-18T14:02:31.627

嗯，我想我真的应该开始看进口了！

我不小心使用了 import play.api.libs.ws.WS 而不是 import play.libs.WS；使用**play.libs.WS**时，所有方法如 post(String string) 和 setContentType(String string) 都会显示出来。我是这样做的：

```
import play.Play;
import play.libs.F;
import play.libs.WS;

public static Result wsAction() {
    return async(
        play.libs.WS.url(Play.application().configuration()
            .getString("sms.service.url"))
            .setContentType("application/x-www-form-urlencoded; charset=utf-8")                       
            .post("param1=foo&param2=bar").map(
                new F.Function<WS.Response, Result>() {
                    public Result apply(WS.Response response) {
                       return ok(response.toString());
                    }
                }
            )
        );
    } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-04-12T20:26:37.693

接受的答案是错误的，或者至少是误导性的。编码

```
WS.url("http://localhost:9001")
    .setQueryParameter("param1", "foo")
    .setQueryParameter("param2", "bar")
    .post("content"); 
```

会将字符串发布`content`到`http://localhost:9001/?param1=foo&param2=bar`，这几乎肯定不是 OP 想要的。更有可能起作用的是

```
WS.url("http://localhost:9001")
   .post(Map("param1" -> Seq("foo"),
             "param2" -> Seq("bar"))) 
```

它将**表单** `param1=foo&param2=bar`发布到 URL `http://localhost:9001`，这通常是服务器想要的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-02-09T10:47:05.197

```
WS.url(url)
.setContentType("application/x-www-form-urlencoded")
.post("param1=foo&param2=bar"); 
```

此方法使用 HTTP POST 方法发送其表单请求。从 Play 的官方文档看，你应该已经知道 GET 方法了。

方式是使用post方式提交请求，见于play的官方文档，get方式的你应该已经知道了。</p>

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-02-01T06:15:50.820

您需要传入可以转换为序列化 JSON 的内容。这对我有用：

```
WS.url("https://www.someurl.com")
  .post(JsObject(Seq("theString" -> JsString(someString)))) 
```

该序列采用任意数量的 JsValue，也可以是嵌套的 JsObject。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-29T14:51:45.900

对我来说最好的方式

```
WS.url("http://localhost:9001")
.post(Json.toJson(ImmutableMap.of("param1", "foo", "param2", "bar"))); 
```

来自[http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/ImmutableMap.html的地图](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/ImmutableMap.html)

[http://code.google.com/p/guava-libraries/wiki/ImmutableCollectionsExplained](http://code.google.com/p/guava-libraries/wiki/ImmutableCollectionsExplained)

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2013-03-18T19:37:43.027

在 play 2.1 中做阻塞请求的正确方法是

```
WSRequestHolder wsreqHolder = WS.url("<SOME URL WHICH TAKES PARAMETER>");
wsreqHolder.setQueryParameter("id", "100");
F.Promise<WS.Response> promiseOfResult = wsreqHolder.get();

WS.Response response = promiseOfResult.get(); //block here

String jsonData =  response.getBody();
return ok("Client:"+jsonData); 
```

我试过了。有用

# mysql - 复制 MySQL 数据并使用条件创建新记录

> ID：14937712
> 
> 赞同：1
> 
> 时间：2013-02-18T13:40:53.880
> 
> 标签：mysql, sql, sql-insert

最初我必须从旧表中获取 ip 并将其放入电子邮件在两者中匹配的新表中。

```
INSERT INTO new (ip)
SELECT old.ip 
FROM old
INNER JOIN new on old.email = new.email; 
```

我现在需要更改此查询以执行以下操作：

从旧表中获取 ip
匹配新表中该行的电子邮件 从新表中
获取 user_id
使用 user_id 和 ip 在组合表中创建记录

查询至今：

这很近吗？似乎不对：/

```
comb_uid = SELECT old.ip FROM old  
WHERE new.email = old.email

comb_ip = SELECT new.user_id FROM new  

INSERT INTO combined (user_id, ip)
VALUES comb_uid, comb_ip 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:43:05.627

你离得够近了。只需更改`new`为`combined`.

```
INSERT INTO combined (ip, user_ID)
SELECT  old.ip, new.user_ID
FROM    old
        INNER JOIN new 
            on old.email = new.email; 
```

**更新 1**

```
INSERT INTO combined (ip, user_ID, status)
SELECT  old.ip, new.user_ID, 'approved'
FROM    old
        INNER JOIN new 
            on old.email = new.email; 
```

# xpath - xpath：计算前面的元素

> ID：14937715
> 
> 赞同：0
> 
> 时间：2013-02-18T13:41:04.950
> 
> 标签：xpath

我有一个看起来像这样的 xml 结构：

```
<document>
    <body>
        <section>
            <title>something</title>
            <subtitle>Something again</subtitle>
            <section>
                <p xml:id="1234">Some text</p>
                <figure id="2121"></figure>
                <section>
                    <p xml:id="somethingagain">Some text</p>
                    <figure id="939393"></figure>
                    <p xml:id="countelement"></p>
                </section>
            </section>
        </section>
        <section>
            <title>something2</title>
            <subtitle>Something again2</subtitle>
            <section>
                <p xml:id="12345678">Some text2</p>
                <figure id="939394"></figure>
                <p xml:id="countelement2"></p>
            </section>
        </section>
    </body>
</document> 
```

如何`<p xml:id="countelement"></p>`使用 XPath 计算元素之前的数字元素？

**编辑：** 我只想计算父部分中的图形元素，在下一部分中它应该再次从 0 开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:16:05.577

假设您使用的是**XPath 2.0 兼容引擎**，请找到 count 元素并`fn:count()`使用所有前面的图形元素作为输入来调用它们中的每一个。

这将返回同一级别上每个“countelement”之前的数字数量（我想这就是你真正想要的）：

```
//p[@xml:id="countelement"]/count(preceding-sibling::figure) 
```

这将返回每个“countelement”之前的数字数量和上面的级别：

```
//p[@xml:id="countelement"]/count(preceding-sibling::figure | parent::*/preceding-sibling::figure) 
```

这将返回每个“countelement”之前的所有先前数字的数量和上面的级别：

```
//p[@xml:id="countelement"]/count(preceding::figure) 
```

* * *

如果您绑定到**XPath 1.0**，您将无法获得多个结果。如果`@id`真的是一个 id（因此是唯一的），您将能够使用此查询：

```
count(//p[@xml:id="countelement"]/preceding::figure) 
```

* * *

*如果存在不是`<p/>`元素的“countelements”，则替换`p`为`*`.*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T13:48:38.000

`count(id("countelement")/preceding-sibling::figure)`

请注意，`xml:id`两个不同元素的属性值不能相同，例如“countelement”。如果您希望两个不同的元素具有具有相同值“countelement”的同名属性，则它必须是某个其他属性，例如不是 DTD 属性类型 ID 的“kind”。在那种情况下，`id("countelement")`你会使用`*[@kind="countelement"]`.

# .net - WCF 代理代码中的“复制”类

> ID：14937718
> 
> 赞同：0
> 
> 时间：2013-02-18T13:41:10.637
> 
> 标签：.net, wcf, architecture

我们正在使用 WCF 和 Visual Studio 2008 构建一个大型的分布式应用程序。我们在 WCF 方面没有太多经验，因此我们正在投入一些时间来设计客户端和服务器之间的 WCF 通信原型。我们观察到，我们的服务器子系统中的 WCF 服务作为参数或返回类型引用的任何类都被 Visual Studio 通过生成的代码“复制”到客户端代理中。令我惊讶的是，在执行此操作时，Visual Studio 会更改类的命名空间。例如，假设我有以下代码：

```
namespace MyLibrary
{
    class MyClass
    {
        //...
    }
} 
```

想象一下，我将它编译成`MyLibrary.dll`，我的 WCF 服务对此有参考。我的一些 WCF 服务`MyLibrary.MyClass`用作返回类型。当我查看生成的客户端代理代码时，我发现`MyClass`它是自动可用的（这很酷），但它不再在`MyLibrary`命名空间中，而是在 Visual Studio 生成的命名空间中。

我们计划拥有一个复杂的域对象模型，其中包含分布在多个程序集中的数百个类，我担心这将如何在 Visual Studio 所做的代码生成中“移植”。另外，我担心我们设计的所有良好的命名空间层次结构可能会丢失。我们最初的愿景是为这个领域对象模型创建类库，并在服务器和客户端上部署它。但由于 WCF 魔法似乎为必要的类生成代码，我想如果我们在客户端部署我们自己的库会发生冲突。

那么我有两个具体问题：

*   有没有办法让 Visual Studio 在生成客户端代理代码时使用原始命名空间方案而不是它自己的？如果没有，这会影响我们“复制”库在客户端上的可用性吗？
*   我可以在客户端上部署原始库吗？我想不会，但这会导致什么样的冲突？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:54:20.797

添加服务引用时，您可以单击“高级”按钮，在那里您可以选中“在引用的程序集中重用类型”框。您还需要确保您拥有包含客户端项目中引用的原始类型的程序集。

您当然可以在客户端上部署原始库。

WCF 这样做的原因 - 这个概念是服务可以由没有原始二进制文件，甚至不支持 .net（例如 Java）的客户端使用 - 因此服务边界发布客户端需要的所有内容为了调用它，并处理它的响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T14:12:03.920

根据我最近在一个非常大且旧的项目中实现 WCF 的经验，我会避免使用 Visual Studio 模板功能，例如瘟疫（对于大型项目），它只会让您头疼并在未来出现幻觉问题。

[http://www.codeproject.com/Articles/114139/WCF-The-Right-Way-A-Quick-Reference-Guide](http://www.codeproject.com/Articles/114139/WCF-The-Right-Way-A-Quick-Reference-Guide)

看看那篇文章。它回答了您当前的问题，并且可能会避免很多未来的头痛。

除了上述之外，如果您的传输层有良好的实现和隔离，您绝对可以重用组件，这是不使用 VS 模板的一个重要原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T18:18:24.093

你最初的设想是完全可能的。避免 Visual Studio 生成客户端的一种方法是创建一个与服务器共享库服务接口的通用客户端，以及绑定的实现（尽管后者不是必需的，它可以使用相同的服务器 / app.config 中的客户端绑定配置，但如果最终设置相似，则很方便）。

一些客户端 C# 示例代码来了解这个想法：

```
 // simplified extract from a generic service client lib, 
        // needs error mgmt channel disposal etc but the concept is there

        // BindingFactory is our common implementation with server, 
        // bindingType is an enumeration, this could be built from 
        // configuration though or however you want
        var binding = BindingFactory.CreateBinding(bindingType);

        var endpointAddress = new EndpointAddress(serviceAddress,
                     EndpointIdentity.CreateSpnIdentity(string.Empty))
        var channelFactory = new ChannelFactory<IMyLibrary>(
            binding, endpointAddress);

        var channel = channelFactory.CreateChannel();

        // IMyLibrary is the interface implemented 
        // by the service found on serviceAdress
        var result = ((IMyLibrary)channel).MyServiceFunction(); 
```

# php - PHP sdk 到 facebook 页面发布，未捕获的 OAuthException: (#200)

> ID：14937721
> 
> 赞同：2
> 
> 时间：2013-02-18T13:41:31.490
> 
> 标签：php, facebook, facebook-graph-api

我不断得到：

“未捕获的 OAuthException：（＃200）用户尚未授权应用程序执行此操作”

```
require_once("resources/facebook_sdk/facebook.php");

    $app_id       = 'appid';
    $app_secret   = 'appsecret';

    $facebook = new Facebook(array(
        'appId' => $app_id,
        'secret' => $app_secret,
        'cookie' => true
    ));

    $user = $facebook->getUser();
    if($user)
    {

        $access_token=  $facebook->getAccessToken();

    }

    else {

        $loginUrl = $facebook->getLoginUrl(array(
            'canvas' => 1,
            'fbconnect' => 0,
            'scope' => 'offline_access,read_stream,user_photos,user_videos,publish_stream,manage_pages'
        ));
        echo ("<script> top.location.href='".$loginUrl."'</script>");
    }

    $req =  array(
        'access_token' => $access_token,
        'name' => 'My wall post',
        'message' => 'tralalala',
        'caption' => "www.mysite.com",
        'link' => 'http://www.mysite.com',
        'description' => 'Wall post',
        'picture' => 'http://farm6.static.flickr.com/1111/some-pic.jpg',
        'actions' => array(array('name' => 'My Site',
            'link' => 'http://www.mysite.com'))
    );

    print_r($req);
    $res = $facebook->api('/pageid/feed' ,'post',$req);
    if ($res) echo "succes";
    else echo "fail";
    print_r($res); 
```

任何想法我做错了什么，发布流许可被授予？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:52:39.100

考虑到您拥有在 Facebook 上上传服务器的所有权利，考虑到此答案。查看下面的一些链接以获取更多信息，

[Facebook API OAuthException: (#200)](https://stackoverflow.com/questions/4158164/facebook-api-oauthexception-200)

[Facebook Open Graph API 返回：(#200) 需要扩展权限：publish_actions](https://stackoverflow.com/questions/10473797/facebook-open-graph-api-returns-200-requires-extended-permission-publish-ac)

[Uncaught OAuthException: (#200)，当试图在墙上发帖时](https://stackoverflow.com/questions/6726359/uncaught-oauthexception-200-when-trying-to-post-on-wall)

[多用户事件邀请图 api 失败权限错误：200 OAuthException](https://developers.facebook.com/bugs/312375168858626?browse=search_5017eadead76b7a22667493)

您已授予您在范围内定义的所有权限，

```
'scope'=>'offline_access,read_stream,user_photos,user_videos,publish_stream,manage_pages'; 
```

可以帮助你。

# jasper-reports - 传参后查询

> ID：14937722
> 
> 赞同：-1
> 
> 时间：2013-02-18T13:41:32.533
> 
> 标签：jasper-reports

我想知道如何从*Java*代码重新定义*JasperReports*报告子数据集查询

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:56:23.520

在 IReport 查询窗口中给出所有参数的默认值，然后尝试再次运行查询。

日期的默认格式：

```
 new  Date(111,3,1)           for -2011-Apr-01 
```

今天的日期：-

```
new  java.util.Date()        for Today's date 
```*

# android - 持久化包含 ForeignCollection 的类时的 Android ormlite SQLException

> ID：14937723
> 
> 赞同：0
> 
> 时间：2013-02-18T13:41:34.153
> 
> 标签：android, orm, ormlite, foreign-collection

我想使用 ormlite 来持久化仅包含 ForeignCollection 的对象。该类如下所示：

```
@DatabaseTable(tableName="person")
public class Person {

    @DatabaseField(generatedId = true)
    private long id;

    @ForeignCollectionField
    private ForeignCollection<Pet> pets;

    public ForeignCollection<Pet> getPets() {
        return pets;
    }

    public long getId() {
        return id;
    }
} 
```

Pet 类如下所示：

```
@DatabaseTable(tableName="pet")
public class Pet {

    public static final String PERSON_ID_FIELD_NAME = "person_id";

    @DatabaseField(generatedId = true)
    private long id;

    @DatabaseField
    private String name;

    @DatabaseField(foreign=true, foreignAutoRefresh=true, columnName = PERSON_ID_FIELD_NAME)
    private Person person;

[getters and setters snipped..] 
```

我坚持这样的课程：

```
Person person = new Person();
getHelper().getPersonDao().create(person); 
```

这与以下崩溃：

```
java.sql.SQLException: Unable to run insert stmt on object com.eniro.core.android.orm.Person@b4c33b78: INSERT INTO `person` () VALUES ()
        at com.j256.ormlite.misc.SqlExceptionUtil.create(SqlExceptionUtil.java:22)
        at com.j256.ormlite.stmt.mapped.MappedCreate.insert(MappedCreate.java:124)
        at com.j256.ormlite.stmt.StatementExecutor.create(StatementExecutor.java:394)
        at com.j256.ormlite.dao.BaseDaoImpl.create(BaseDaoImpl.java:308)
        at com.eniro.core.android.orm.DummyOrmTest.testPersistPerson(DummyOrmTest.java:27)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:511)
        at junit.framework.TestCase.runTest(TestCase.java:154)
        at junit.framework.TestCase.runBare(TestCase.java:127)
        at junit.framework.TestResult$1.protect(TestResult.java:106)
        at junit.framework.TestResult.runProtected(TestResult.java:124)
        at junit.framework.TestResult.run(TestResult.java:109)
        at junit.framework.TestCase.run(TestCase.java:118)
        at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:169)
        at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:154)
        at android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:545)
        at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1551)
Caused by: java.sql.SQLException: inserting to database failed: INSERT INTO `person` () VALUES ()
at com.j256.ormlite.misc.SqlExceptionUtil.create(SqlExceptionUtil.java:22)
at com.j256.ormlite.android.AndroidDatabaseConnection.insert(AndroidDatabaseConnection.java:152)
at com.j256.ormlite.stmt.mapped.MappedCreate.insert(MappedCreate.java:89)
... 15 more
Caused by: android.database.sqlite.SQLiteException: near ")": syntax error: , while compiling: INSERT INTO `person` () VALUES ()
at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:68)
at android.database.sqlite.SQLiteProgram.compileSql(SQLiteProgram.java:143)
at android.database.sqlite.SQLiteProgram.compileAndbindAllArgs(SQLiteProgram.java:361)
at android.database.sqlite.SQLiteStatement.acquireAndLock(SQLiteStatement.java:260)
at android.database.sqlite.SQLiteStatement.executeInsert(SQLiteStatement.java:112)
at com.j256.ormlite.android.AndroidDatabaseConnection.insert(AndroidDatabaseConnection.java:140)
... 16 more 
```

如果我向 Person 添加另一个字段，例如“名称”，它会起作用。但我只想有一个只包含一个集合的类。那可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T18:06:46.783

> 如果我向 Person 添加另一个字段，例如“名称”，它会起作用。但我只想有一个只包含一个集合的类。那可能吗？

不幸的是，答案是否定的。该`Pet`集合不是`Person`表中的字段，因此您基本上是在尝试不插入任何字段，`Person`因为唯一的字段是自动生成的 id。

因此，不幸的是，我现在只添加一个标记字段并记录它，因为 ORMLite 的限制是必要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T17:11:58.143

然后设置集合，一切都会好起来的。如果您不设置集合，它将保持为空。我认为您遇到的错误与[此处](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#insert%28java.lang.String,%20java.lang.String,%20android.content.ContentValues%29)详细描述的空列黑客问题有关。

**编辑**实际上，即使提供一个集合，您仍然会有空值，如果`NullColumnHack`在 ORMLite 中设置 no，则插入可能会失败。

# javascript - env.js 的 Highcharts 边界框问题

> ID：14937724
> 
> 赞同：0
> 
> 时间：2013-02-18T13:41:34.967
> 
> 标签：javascript, highcharts, phantomjs

在关于使用导出服务器和 PhantomJS 的服务器端的 Highcharts 的新专题文章中，提到了与 Env.js（与 Rhino 一起使用）中的边界框相关的问题。您能否发布一个由于 SVG 问题的边界框而导致图表呈现不正确的示例？有没有可能发生的特定模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:38:45.863

我在 X 轴标签的自动定位方面遇到了问题。旋转文本的定位将是一个很好的起点。举个例子，什么不起作用 - 这是我找到的用于模拟 getBBox() 功能的函数：

```
 ep = Element.prototype;

 ep.getBBox = function() {
 var w = 10;
 if (ep.tagName == "TEXT" && ep.firstChild) {
   var s = ep.firstChild.innerHTML;
   w = s.length * 5;
 }

 return {
   x : ep.offsetLeft ? ep.offsetLeft : 0,
   y : ep.offsetTop ? ep.offsetTop : 0,
   width : w,
   height : 16
 };
}; 
```

如您所见，它非常简单——仅接近 Textlength 并返回默认宽度和高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T09:42:28.647

Highcharts 计算例如 labeltext 的边界框。这是为了防止标签文本的冲突/重叠。您可以自己在 env.js 中测试此功能的细分，方法是结合使用小宽度图表和非常长的系列名称。我猜你必须想出自己的测试场景，看看 env.js 是否符合你的需求。

# facebook - Facebook : 使用 Graph api 获取在线好友列表

> ID：14937727
> 
> 赞同：3
> 
> 时间：2013-02-18T13:41:44.423
> 
> 标签：facebook, facebook-graph-api, facebook-fql

我想在没有 Facebook SDK 的情况下在线获取用户列表。我的 fql 查询如下

```
 $fql = "SELECT uid, name, pic_square, online_presence
            FROM user
            WHERE online_presence IN ('active', 'idle')
            AND uid IN (
                SELECT uid2 FROM friend WHERE uid1 = $user
            )"; 
```

我的图表 URl 是

```
https://graph.facebook.com/fql?q=SELECT uid, name, pic_square, online_presence FROM user WHERE online_presence IN ('active', 'idle') AND uid IN (SELECT uid2 FROM friend WHERE uid1 = 1234)&access_token=xxxxxxtokenxxxxx&method=GET 
```

但在 URL 上方返回空数据。

```
{
   "data": [

   ]
} 
```

注意：我的令牌有 friends_online_presence 权限。我有 40 个在线用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:41:50.797

您需要`user_online_presence`或`friends_online_presence`权限才能查看`online_presence`。（见[http://developers.facebook.com/docs/reference/fql/user](http://developers.facebook.com/docs/reference/fql/user)）

如果没有这些权限，您将收到`online_presence`as `null`，并且这部分不会过滤任何内容`WHERE`：`online_presence IN ('active', 'idle')`

如果您从查询中删除此限制，您将看到好友列表及其状态（如果您没有此权限，则为空）

# php - 如何重新索引数组？

> ID：14937728
> 
> 赞同：2
> 
> 时间：2013-02-18T13:41:47.997
> 
> 标签：php, arrays

**如何重新安排：**

```
Array (
     [0] => tomato
     [2] => apple
     [3] => melon
     [4] => Cherry
     [7] => banana 
) 
```

**至：**

```
Array (
     [0] => tomato
     [1] => apple
     [2] => melon
     [3] => Cherry
     [4] => banana 
) 
```

?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-18T13:43:41.453

只需尝试[`array_values`](http://php.net/array_values)：

```
$newArray = array_values($oldArray); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T13:43:02.990

这个怎么样？

```
$new_array = array();
foreach($original_array as $val) { 
 $new_array[] = $val;
} 
```

`$new_array`将有正确的索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T13:46:01.053

尝试这个：

```
$a =  array(0 => 'tomato', 2 => 'apple', 3 => 'melon', 4 => 'Cherry', 7 => 'banana');
print_r($a);
$a = array_values($a);
print_r($a); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T13:43:34.130

```
$arr2 = array();
foreach($arr1 as $a) {
  $arr2[] = $a;
} 
```

将值放入一个新的新数组中？

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-18T13:50:13.953

只是不要为重新索引而烦恼。
用于`foreach`迭代它

# jquery - 如何从段落标签中获取数字？

> ID：14937729
> 
> 赞同：2
> 
> 时间：2013-02-18T13:41:49.267
> 
> 标签：jquery

我的段落标签中有一些值。我正在尝试从段落标签中获取值。但我无法获得价值。例如，

HTML 代码：

```
<p id="value">1234567890</p> 
```

我试图得到这个值。这有可能从段落标签中获取值吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T13:42:29.073

作为一个字符串：

```
 var str = $('#value').text() 
```

作为一个数字：

```
 var nb = parseInt($('#value').text().trim(), 10); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T13:42:53.877

你想做

```
var value = $('#value').html(); 
```

这应该给你你正在寻找的价值。[html()](http://api.jquery.com/html/)函数返回选择器中的所有 html 代码。在你的情况下，它只是文本。

如果您希望将其作为数字而不是字符串，只需将其包装在 parseInt()

```
var integer_value = parseInt($('#value').html()); 
```

# angularjs - Rubymine 中的 Angular 语法高亮

> ID：14937732
> 
> 赞同：1
> 
> 时间：2013-02-18T13:42:08.433
> 
> 标签：angularjs, rubymine

我只是在学习 RailsCast AngularJS 教程。喜欢 Angular 但是 RubyMine 不想正确突出显示代码：

```
@RaffleCtrl =  ($scope)->
  $scope.entries = [
    {name: "Foo"}
    {name: "Bar"}
    {name: "Who"}
  ]

  $scope.addEntry = ->
    $scope.entries.push($scope.newEntry)
    $scope.newEntry = {}

  $scope.drawWinner = ->
    entry = $scope.entries[Math.floor(Math.random()*$scope.entries.length)] 
```

这里最大的问题是它`$scope.addEntry`没有作为一个函数突出显示，它只是纯白色文本——当我开始将它构建到一个更大的文件中时，这将很难。

还有一些事情，比如`$scope.entries.push($scope.newEntry)`我希望`.push`被突出显示，但事实并非如此。

我安装了 AngularJS 插件和 RailsCasts 代码样式。

我究竟做错了什么？

# ios5 - 即使在 SYNC ipad/iPhone 与 iTunes 之后，ALAssetURL 也是唯一的

> ID：14937736
> 
> 赞同：1
> 
> 时间：2013-02-18T13:42:15.310
> 
> 标签：ios5, ios6, alassetslibrary

该文档将其描述为“持久”（[http://developer.apple.com/library/ios/documentation/AssetsLibrary/Reference/ALAssetRepresentation_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009728-CH1-SW16](http://developer.apple.com/library/ios/documentation/AssetsLibrary/Reference/ALAssetRepresentation_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009728-CH1-SW16) ) 但这是否意味着在单个同步中持续存在，在添加新照片之前持续存在，在旧照片被删除之前持续存在，还是什么？如果我建立一个数据库，使用它们的 ALAssetRepresentation url 将相机胶卷/照片库中的照片元素与我的应用程序中的数据相关联，即使照片被移动或重命名，这些关联是否会永远有效？

如果资产 url 在同步后不是唯一的，那么替代解决方案是什么，因为即使在同步后我也需要唯一地识别资产。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:11:16.850

根据我的经验，URL 在同步之间是持久的（从 iOS 5 开始）。但一旦设备从 iTunes 备份或 iCloud 恢复，资产将获得新的 URL。这也发生在从 iOS 5 升级到 iOS 6 之后。另一种方法是为每张照片生成一个自己的 ID/校验和：例如，获取文件名、录制日期和文件大小并从中生成一个 MD5 或 SHA1 哈希。

# c# - 使用 SerialPort 的 DataReceived 事件

> ID：14937741
> 
> 赞同：1
> 
> 时间：2013-02-18T13:42:35.387
> 
> 标签：c#, com, serial-port

我试图在我的 PC 上的 COM 端口上读取设备的输出。我为此编写了一个 C# 程序。使用 PuTTY，我可以看到我期望从我的设备获得的输出。问题是我的函数`SerialPort.ReadExisting();`中的`DataReceived`函数给了我一个完全不同的字符串。使用 COM 端口读取数据的正确方法是什么`SerialPort`？

此外，我从中获得`SerialPort.ReadExisting();`的字符串是我发送到设备的字符串的片段。

下面是初始化`SerialPort`.

```
 SerialPort port;

    void port_DataReceived(object sender, SerialDataReceivedEventArgs e)
    {
        string data = port.ReadExisting();
    }

    void init_serialport(object sender, EventArgs e)
    {
        if (port != null)
        {
            port.Close();
        }

        port = new SerialPort( /* ... */ );
        port.BaudRate = 9600;
        port.Parity = Parity.None;
        port.DataBits = 8;
        port.StopBits = StopBits.One;
        port.Handshake = Handshake.RequestToSend;

        port.DataReceived += new SerialDataReceivedEventHandler(port_DataReceived);

        try
        {
            port.Open();
        }
        catch (Exception ex)
        {
             // ...
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T09:54:34.970

> 我从 SerialPort.ReadExisting() 得到的字符串；是我发送到设备的字符串片段。

我会看看 SerialPort.ReceivedBytesThreshold。

“在 DataReceived 事件发生之前获取或设置内部输入缓冲区中的字节数。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T13:54:13.717

我将首先查看端口对象的 Read 方法，查看原始字节并验证它们是否符合您的期望，然后将问题缩小到转换为字符串的编码。

此处提供了更多信息[。](https://stackoverflow.com/questions/2714533/how-to-apply-encoding-when-reading-from-a-serial-port)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T12:49:20.443

您收到了片段，因为 SerialPort.Existing() 执行和完成的时间比您的发送设备发送整个字符串所需的时间更短。

您需要连续重复调用，或者直到您收到字符串结尾字符（如果字符串有一个字符）。

# database - MySQL vs PostgreSQL 空间应用

> ID：14937742
> 
> 赞同：1
> 
> 时间：2013-02-18T13:42:37.880
> 
> 标签：database, spatial

我需要帮助选择用于空间应用程序的 DBMS（考虑几何数据，而不是地理）。

关于你，MySQL 和 PostgreSQL 哪个更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:48:11.870

这取决于您真正想要做什么，MySQL 使用它拥有的所有 UI 工具都对用户友好，现在您可以使用 mysql 工作台非常快速地建模和创建数据库。在性能方面，MySQL 很好，但我认为 Postegres 的许可证更好，即使它没有很多工具，它也提供了所需的功能。

你可以看看这个： http: [//www.wikivs.com/wiki/MySQL_vs_PostgreSQL](http://www.wikivs.com/wiki/MySQL_vs_PostgreSQL)

我也向你推荐这个视频：

[http://www.youtube.com/watch?v=1PoFIohBSM4](http://www.youtube.com/watch?v=1PoFIohBSM4)

最好的问候我的朋友。

# google-app-engine - gae-boilerplate 现有 blob 未显示

> ID：14937743
> 
> 赞同：2
> 
> 时间：2013-02-18T13:42:40.790
> 
> 标签：google-app-engine, redirect, python-2.7, routes

错误不显示具有以下 url 的图像

```
http://127.0.0.1:8080/serve/CrObzPCoJfjG4ESUUb0hjw== 
```

图像确实存在于 blobstore 中可以在管理员中检查 我的路由 [Dope on redirect routes](http://webapp-improved.appspot.com/api/webapp2_extras/routes.html#webapp2_extras.routes.RedirectRoute)

```
RedirectRoute('/serve/[a-zA-Z0-9-_]', handlers.ServeHandler, name='ServeHandler'), 
```

我的代码：

```
from google.appengine.ext import blobstore
from google.appengine.ext.webapp import blobstore_handlers

import urllib

class ServeHandler(blobstore_handlers.BlobstoreDownloadHandler):
  def get(self, resource):
    logging.info("SERVE " + str(resource))
    resource = str(urllib.unquote(resource))
    blob_info = blobstore.BlobInfo.get(resource)
    self.send_blob(blob_info)

class FetchHandler(blobstore_handlers.BlobstoreUploadHandler):
  def post(self):
    upload_files = self.get_uploads('file')  # 'file' is file upload field in the form
blob_info = upload_files[0]
logging.info("FOUND blob info" + str(blob_info))
self.redirect('/serve/%s' % blob_info.key())

class ImageHandler(BaseHandler):
    @user_required
    def get(self, **kwargs):
        user_session = self.user
        user_session_object = self.auth.store.get_session(self.request)
        upload_url = blobstore.create_upload_url('/fetch/')    

        user_info = models.User.get_by_id(long( self.user_id ))
        user_info_object = self.auth.store.user_model.get_by_auth_token(
            user_session['user_id'], user_session['token'])

        try:
            params = {
                "upload_url": upload_url,
                "user_session" : user_session,
                "user_session_object" : user_session_object,
                "user_info" : user_info,
                "user_info_object" : user_info_object,
                "userinfo_logout-url" : self.auth_config['logout_url'],
                }
            return self.render_template('image.html', **params)
        except (AttributeError, KeyError), e:
            return "Secure zone error:" + " %s." % e 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T21:34:06.250

我认为您的问题可能出在这一行：

```
 self.redirect('/serve/%s' % blob_info.key()) 
```

根据以下最近的更改，假设您确实将 appengine 更新到了最新版本：

```
The Blobstore service now returns the created filename instead of the blobKey when using Cloud Storage [link][1] 
```

查看[最近的发行说明](http://code.google.com/p/googleappengine/wiki/SdkReleaseNotes)以及随之而来的更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T07:13:27.683

将您的代码（形成您问题的早期版本）与我正在工作的一些代码进行比较，我怀疑您可能不希望`/upload/`路径上的尾随 / （即`/upload`改用。

不过，我不熟悉`RedirectRoute`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T15:51:26.957

我认为您提供给他们的 URL`create_upload_url`是错误的，因为您将其定义为`/upload/`.

最后添加正斜杠，它应该可以工作：

```
upload_url = blobstore.create_upload_url('/upload/') 
```

# mysql - CakePhp mysql 原始查询错误

> ID：14937749
> 
> 赞同：0
> 
> 时间：2013-02-18T13:43:02.357
> 
> 标签：mysql, cakephp, cakephp-2.1

我是 cakephp 的新手。我正在尝试搜索 mysql 表。我想使用嵌套查询。

```
 class TableController extends AppController{  
 .
 .
 public function show(){
    $this->set('discouns', $this->DiscounsController->query("SELECT * FROM discoun as Discoun WHERE gcil_id = 1"));//(SELECT id FROM gcils WHERE genre = 'Shoes' AND company_name = 'Adidas')"));
} 
```

} 错误：

```
 Error: Call to a member function query() on a non-object 
```

我也试过

```
public function show(){
    $this->DiscounsController->query("SELECT * FROM count as Count WHERE ctr_id = (SELECT id FROM ctrs WHERE genre = 'Shoes' AND company_name = 'Adidas')");
} 
```

错误：

```
 Error: Call to a member function query() on a non-object 
```

文件：C:\xampp\htdocs\cakephppro\myapp\Controller\CountsController.php

请帮忙。过去几个小时我一直在尝试这个。：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:21:13.860

如评论中所述，您的代码存在一些问题。

首先，您尝试在*Controller*`query()`上调用该方法，而您应该在**Model**上执行它，因为它是处理数据库查询的模型，而控制器应该简单地用于调用这些方法以获取数据并将它们传递给风景。

 ***第二件事是您正在执行一个非常简单的原始 SQL 查询，而不是使用[CakePHP 内置的函数](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html)<- 请务必完整阅读此页面。

现在对于您的问题，只要您正确设置了[模型关系](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html)并遵循正确的命名约定，这应该是您从该控制器运行 SQL 查询的代码：

```
public function show(){
    $this->set('discouns', $this->Discouns->find('all', array(
        'conditions' => array(
            'gcil_id' => 1,
            'genre' => 'shoes',
            'company_name' => 'Adidas'
        )
    ));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T14:23:55.540

`query()`不是控制器，而是模型方法。这就是错误（*Call to a member function on a non-object*）试图告诉你的。

所以正确的调用是：

`$this->Discount->query()`

但是你在 a 中调用它`TableController`，所以除非`Table`并且`Discount`有[某种类型的关系](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html)，否则你将无法调用`query()`。

如果`Table`确实定义了关系，您将能够调用：

`$this->Table->Discount->query()`

请注意，这`query()`仅在[标准方法](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html)（`find`、`save`、`delete`等）不太实用的情况下执行复杂的 SQL 查询时使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T14:30:32.290

```
$this->Counts->find('all',array(
  'conditions' => array(
    'ctrs.genre' => 'Shoes',
    'ctrs.company_name' => 'Adidas'
  ), 'recursive' => 1
)); 
```

以上是名为 counts 和 ctrs 的表。

这是假设您已将模型设置为在 counts 表和 ctrs 表之间建立某种关系。在您的代码中很难准确地说出您的表是什么。

CakePHP 书应该有你需要的所有答案。在常规 PHP 上运行 CakePHP 的原因之一是 FIND 语句。正确设置模型后，使用 find 语句应该非常容易。

[http://book.cakephp.org/2.0/en/models.html](http://book.cakephp.org/2.0/en/models.html)***

# javascript - 骨干 Jaydata Odata

> ID：14937755
> 
> 赞同：0
> 
> 时间：2013-02-18T13:43:10.897
> 
> 标签：javascript, backbone.js, odata, jaydata

我有一个将与移动[骨干应用程序一起使用的](http://backbonejs.org/)[OData(v3)](http://www.odata.org/)端点。

我正在尝试集成[Jaydata](http://jaydata.org/)以避免构建 OData 查询。

我仍在发展我的 Backbone 技能，我不确定如何将 Jaydata 与我的模型/收藏集集成。

我的第一个假设是我需要重写该`sync`方法，但我不确定这是要走的路。

任何建议或示例都会很棒。

如果你有 Jaydata 的替代品来解决我的问题，那也很好。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T12:28:15.927

就像 JayData 的 Backbone 适配器准备好之前的临时解决方案 ;-)。有关将 Backbone 连接到 OData v2 提供程序 (SharePoint) 的示例，请查看[https://github.com/lstak/Backbone.SharePoint/blob/master/backbone-sharepoint.odata.js](https://github.com/lstak/Backbone.SharePoint/blob/master/backbone-sharepoint.odata.js)。这向您展示了如何利用 Backbone 的`sync`方法来完成 CRUD 操作。当然没有花哨的 OData 功能支持。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T14:35:24.850

我们确实计划在不久的将来支持骨干网。我认为您可以在几周内发布预发布版本，也许更快。干杯加博

# vb.net - 在 vb.net 中使用 tableadapter 更新旧数据并添加新数据

> ID：14937764
> 
> 赞同：2
> 
> 时间：2013-02-18T13:43:33.053
> 
> 标签：vb.net, insert-update

我的代码应该更新旧记录，同时如果找到新记录，它也应该将其插入数据库中......我正在使用 table adpater 来执行此方法。

这是代码：

```
Private Sub Button3_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button3.Click

    Dim pta As New PHDSTableAdapters.productdatabaseTableAdapter
    pta.Updateproduct(TextBox1.Text, ComboBox1.Text, TextBox2.Text, TextBox3.Text, TextBox4.Text, TextBox5.Text)
    pta.Fill(myds.productdatabase)
    Dim lta As New PHDSTableAdapters.lotnoTableAdapter
    Dim lt = lta.GetDataBylotno(TextBox5.Text)
    Dim l As phaccess.PHDS.lotnoRow = lt.Rows(0)
    Dim i As Integer
    For i = 0 To DGV.Rows.Count - 1

        For Each l In myds.lotno
            Dim lot As String = DGV.Rows(i).Cells(1).Value
            Dim del As Date = DGV.Rows(i).Cells(2).Value
            Dim exp As Date = DGV.Rows(i).Cells(3).Value
            Dim quantity As Integer = DGV.Rows(i).Cells(4).Value
            Dim sup = DGV.Rows(i).Cells(5).Value
            Dim disc = DGV.Rows(i).Cells(6).Value

            If l.productid = TextBox5.Text Then
                Dim lotnumber As String = l.lotnumber
                If l.lotnumber <> lot Then
                'the error occurs in the insert statement as it would create duplicates 'of the index...the index of the table is the lot number 
                    lta.Insert(TextBox5.Text, lot, del, exp, quantity, sup, disc) 
                Else
                    lta.Updateedit(del, exp, quantity, sup, disc, lot)
                    lta.Fill(myds.lotno)
                End If
            End If
            If lot = "" Then
                closeform()
                lta.Fill(myds.lotno)
                Button3.Enabled = False
                Button1.Visible = True
                Button3.Visible = False
                Button1.Enabled = False
                Exit Sub
            End If

        Next
    Next
End Sub 
```

如果您需要其他任何东西来帮助我解决这个问题，请询问。谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-06T06:13:07.980

您可以使用“DataTable”更新表中的 DataGridView

用于显示数据：

```
Dim sql As String = "SELECT * FROM table_name"
    sCommand = New SqlCommand(sql, conn)
    sAdapter = New SqlDataAdapter(sCommand)
    sBuilder = New SqlCommandBuilder(sAdapter)
    sDs = New DataSet()
    sAdapter.Fill(sDs, "table_name")
    sTable = sDs.Tables("table_name")
    DataGridView1.DataSource = sTable 
```

更新：

```
sAdapter.Update(sTable) 
```

我希望这有帮助

# jquery - 将输入元素的值设置为变量的值

> ID：14937767
> 
> 赞同：-2
> 
> 时间：2013-02-18T13:43:36.047
> 
> 标签：jquery, click, field, hidden

我有这个 jQuery 脚本来填充我的隐藏字段：

```
$("#button").click(function() {
    $("#myHiddenField").val(4);
    $("#form").submit(); 
}); 
```

我想用一个变量替换硬编码的“4”：

我试过这个：

```
$("#button").click(function(i) { 
    $("#myHiddenField").val(i); 
    $("#form").submit(); 
}); 
```

但它不起作用，我不知道如何传递参数`i`。这部分代码有什么问题？

我有 4 个不同的按钮。我不想为每个按钮创建 4 个功能点击。在这种情况下`i`，是隐藏字段的值，用于标识已单击的按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:45:36.010

如果要设置`i`为该值，则：

```
var i
$("#button").click(function() { 
        i=$("#myHiddenField").val(); 
        $("#form").submit(); 
}); 
```

[`val()`](http://api.jquery.com/val/)默认返回元素的值。

如果要将值设置为`i`，则需要先设置`i`：

```
var i=4
$("#button").click(function() { 
        $("#myHiddenField").val(i); 
        $("#form").submit(); 
}); 
```

* * *

在您当前的代码中，`i`发送到`Event`单击生成的那个。我不认为你想那样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T13:45:59.027

`click`事件处理程序的参数是[jQuery 事件对象](http://api.jquery.com/category/events/event-object/)，而不是自定义变量。你想做的很简单：

```
var someVariable = 4;
$("#button").click(function() { 
    $("#myHiddenField").val( someVariable ); 
    $("#form").submit();
}); 
```

`someVariable`当您绑定单击处理程序或在全局范围内（或在处理程序本身内，取决于值的来源）时，请确保在父范围内定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T13:47:05.613

`i`在你的情况下是`event`......所以它不能把值放在隐藏字段中......定义一个变量 i 在 click 或一个全局变量......试试这个

```
$("#button").click(function() { 
    var i="somevalue"; //value u want
    $("#myHiddenField").val(i); 
    $("#form").submit(); 
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T13:48:16.273

您可以使用属性来存储临时值并在以后访问它：

```
// set value
$("#button").attr("temp", 4);
...
$("#button").click(function() { 
        $("#myHiddenField").val($(this).attr("temp")); 
        $("#form").submit(); 
}); 
```

您也可以使用全局变量，但不建议这样做。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-18T13:49:54.613

这取决于你想从哪里获得价值。传入匿名函数的是事件对象，而不是普通变量。试试这个：

```
$("#button").click(function(event) {

    var x = getValueFromSomewhere();

    $("#myHiddenField").val(x);
    $("#form").submit(); 
}); 
```

或这个：

```
var y = getValueFromSomewhere();

$("#button").click(function(event) {

    // The anonymous function can access variables from the outer scope.
    $("#myHiddenField").val(y);
    $("#form").submit(); 
}); 
```

# iis - 带有 JAX-RS 后端的 Angular 前端

> ID：14937771
> 
> 赞同：2
> 
> 时间：2013-02-18T13:43:41.757
> 
> 标签：iis, glassfish, angularjs, jax-rs, cors

我有一个 RESTful Java 后端，我使用 Jersey（一个 JAX-RS 实现）制作。这个后端在 8084 端口的 glassfish 服务器上运行。我还制作了一些 HTML5/JS/AJAX 页面来显示数据，所以我知道我的 REST 实现正在运行。

我正在尝试使用 Angular.js 框架为此应用程序开发 HTML5 / JS 前端，但我遇到了一些麻烦。我已经设法开发了一些小的 webapps，我在 Microsoft 的 IIS 端口 80 上运行它们。

不幸的是，这两个应用程序之间的通信似乎存在问题。由于我是 Angular 新手，我不确定我是否在前端代码中犯了错误，或者我是否遇到了 CORS 问题。我已经尝试使用 CORS 过滤器在 Tomcat 7 上运行后端，但这并没有解决任何问题。

我的角度代码如下所示：

**服务.js**

```
var serviceModule = angular.module('ServiceModule', ['ngResource']);
serviceModule.factory('NodeService', function($resource) {
var NodeService = $resource('http://localhost:port/HtmlJerseyJava/service/node/get/3',{},
    {
        'get' : { method: 'GET',params:{port:':8084'}}
    }
)
return NodeService; 
```

});

**控制器.js**

```
function NodeDetailCtrl($scope, NodeService){
    var node3 = NodeService.get();
    $scope.data = JSON.stringify(node3) ;
} 
```

我现在对 ID 3 进行了硬编码，因为我还需要弄清楚如何将输入字段的值从视图传递到控制器，然后再传递给服务。最终，服务 url 中的 3 将被一个变量 :nodeId 替换

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T16:41:02.630

试试下面的简化代码：

app.js（出于测试目的，我建议您将函数放在一个 js 文件中）

```
var serviceModule = angular.module('ServiceModule', ['ngResource']);
serviceModule.factory('Node', function($resource) {
return $resource('http://localhost:port/HtmlJerseyJava/service/node/get/3',{port:':8084'},
    {
        get {method:'GET'}
    });
});

serviceModule.controller('NodeDetailCtrl', function($scope, Node){
    $scope.data = Node.get();
} 
```

现在您的客户端从 REST 调用中获得什么 JSON 数据会很有趣。

问候马克

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T07:48:57.610

我找到了解决方案。有几个步骤可以解决这个问题：

1.  将 CORS 过滤器添加到 Glassfish 上的 Jersey servlet。
2.  将 Angular 版本升级到 1.1.x（目前仍不稳定）
3.  在您的资源中设置自定义标头。
4.  享受工作应用程序。

非常感谢 Marcbaur 在这里帮助我。

# jasper-reports - Jasper 报告参数表

> ID：14937775
> 
> 赞同：1
> 
> 时间：2013-02-18T13:43:47.297
> 
> 标签：jasper-reports, jasperserver

我对*JasperReport Server*很陌生。我已经成功使用*JasperReport Sever 4.7*（社区版）并从 Java 应用程序中调用 jasper 报告（使用 jasperviewer）。

我的问题是： 1\. 创建我自己的参数表单，当用户单击链接到碧玉报告的按钮时会弹出该表单。

1.  用户能够输入所需的参数（最好从列表中选择），然后当用户在此页面上按 enter 或 ok 时，它会将值相应地传递给 jasper 报告。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T07:05:30.870

首先，当您创建报告并保存在**Jasper 存储库**中时-

1.  只需右键单击报告文件夹（包含 Main.jrxml 的文件夹）并单击`Properties`。出现一个对话框。

2.  转到`Other`选项卡。标签旁边`Controls Layout`会有一个下拉框。选择`Pop-up Screen`那个。你的工作完成了。

第二，你绝对可以有一个选择列表。有两种方法可以为列表生成值 - 使用查询或手动输入。步骤是：

1.  在存储库的报告文件夹中，在 main.jrxml 文件下将有一个`Input Controls`文件夹。右键单击它并单击`Create a local input control`。将出现一个对话框。

2.  在`General`选项卡上给出输入控件的 ID 和名称（ID 必须与您各自的参数名称匹配）。

3.  转到`Input Control Details`选项卡。根据您的要求选择类型为“单选查询”或“单选值列表”。输入查询或值，您的工作就完成了。

# c# - DistinctBy 当要区分的属性是列表时

> ID：14937776
> 
> 赞同：0
> 
> 时间：2013-02-18T13:43:48.577
> 
> 标签：c#, linq, distinct

“每个人”都知道来自[MoreLinq](http://code.google.com/p/morelinq/)的有用 DistintBy 扩展，我需要使用它通过多个属性（没问题）来区分列表 os 对象，并且当其中一个属性是列表时，这是我的自定义类：

```
public class WrappedNotification
{
    public int ResponsibleAreaSourceId { get; set; }
    public int ResponsibleAreaDestinationId { get; set; }
    public List<String> EmailAddresses { get; set; }
    public string GroupName { get; set; }
} 
```

在测试文件中创建一些对象并尝试区分这些项目

```
List<WrappedNotification> notifications = new List<WrappedNotification>();
notifications.Add(new WrappedNotification(1, 1, new List<string>() { "email" }, EvaluationStatus.Approved, "group"));
notifications.Add(new WrappedNotification(0, 1, new List<string>() { "email" }, EvaluationStatus.Approved, "group"));
notifications.Add(new WrappedNotification(0, 1, new List<string>() { "email" }, EvaluationStatus.Approved, "group"));
notifications.Add(new WrappedNotification(0, 1, new List<string>() { "email" }, EvaluationStatus.Approved, "group"));
notifications.Add(new WrappedNotification(0, 1, new List<string>() { "email" }, EvaluationStatus.Approved, "group")); 
```

请注意，只有第一项不同，所以如果我使用以下代码，我可以区分这些项目，结果列表将有 2 个项目，并且没问题。

```
 notifications = notifications.DistinctBy(m => new
 {
     m.ResponsibleAreaSourceId,
     m.ResponsibleAreaDestinationId,
     //m.EmailAddresses,
     m.EvalStatus
 }).ToList(); 
```

如果我评论该行 (//m.EmailAddresses) 它不起作用并返回 5 个项目。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:53:09.327

`DistinctBy`对您指定的每个“键”使用默认的相等比较器。默认的相等比较器`List<T>`仅比较列表本身的引用。它不检查两个列表的内容是否相同。

在你的情况下`DistinctBy`是错误的选择。您需要使用`Enumerable.Distinct`并提供`IEqualityComparer`用于[`SequenceEquals`](http://msdn.microsoft.com/en-us/library/bb348567.aspx)电子邮件地址的自定义。

# javascript - console.trace 或堆栈跟踪来确定 javascript 中错误的来源？

> ID：14937777
> 
> 赞同：1
> 
> 时间：2013-02-18T13:43:49.180
> 
> 标签：javascript, jquery, stack-trace

我使用了一些复杂的 javascript (jQuery) 创建了一个编辑器，用户可以在其中拖放和调整不同`div`的 s。问题是，有时，似乎没有原因，包含文本的 div 突然“冻结”或“卡在”包含的 div 上并且不能被拖动，尽管仍然维护一个包含 的类列表，`ui-draggable`在我提到之后：

```
$this.draggable( "option", "disabled", false ); 
```

所以从技术上讲，没有理由停止拖动。我使用 Ctrl+Shift+K 来使用 firebug 的 Web 控制台，但是当我拖动东西时，它不会在控制台上触发任何东西，而且我*不能*拖动一个特定的东西这一事实也没有显示任何东西。我尝试过分析，但这些东西只是说明在某个脚本中花费了多少时间。我怎么可能弄清楚*为什么*一个元素的拖动被关闭并且不能再次打开？我不能设置断点，因为我不知道代码中哪里出了问题。这似乎是任意的。有没有办法简单地实时查看堆栈上发生的事情？

## 编辑

在 Firebug 中，我们可以看到一个对象的完整属性列表，比下面这个小屏幕截图中的要多得多。有谁知道我应该关注哪些对象属性，这与我的问题有关？我真的迷失了如何诊断问题。

![Firebug 对象详细信息](../Images/cbe23a77490b1b21f21243dc94742387.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:18:38.607

@Allendar - 太多的绑定确实是问题。我跟进了这个问题：[我是否在这个 jQuery 代码中一遍又一遍地绑定事件？](https://stackoverflow.com/questions/14958515/am-i-binding-events-over-and-over-again-in-this-jquery-code/14958685#14958685)[在Visual Event](http://www.sprymedia.co.uk/article/Visual+Event+2)的帮助下，我摆脱了我一遍又一遍地做的绑定，然后它工作得很好。

# bash - 重定向输入，用空格分隔

> ID：14937778
> 
> 赞同：1
> 
> 时间：2013-02-18T13:43:54.120
> 
> 标签：bash, shell

嗨，我有一个关于向我编写的这个简单的 bash 脚本提供输入的问题。它所做的只是在我的编译操作中添加一组标志，以节省我每次都必须自己编写它们。我可以使用`echo myprogram.c -o myprogram -llibrary | ./Compile`. 但是我找不到以我期望的方式运行它的方法，`./Compile < myprogram.c -o myprogram -llibrary` 我尝试了一些引号和括号的组合无济于事，谁能告诉我如何提供与 echo 产生的相同的输入使用重定向输入命令。

```
#!/bin/bash
# File name Compile
#Shortcut to compile with all the required flags, name defaulting to
#first input ending in .c
echo "Enter inputs: "
read inputs
gcc -Wall -W -pedantic -std=c89 -g -O $inputs
exit 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T13:49:50.297

您可以使用[进程替换](http://en.wikipedia.org/wiki/Process_substitution%5d)：

```
./Compile < <( echo myprogram.c -o myprogram -llibrary ) 
```

上面的行产生与原始命令相同的结果：

```
echo myprogram.c -o myprogram -llibrary | ./Compile 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T13:57:15.537

只需将您的外壳更改为：

```
#!/bin/bash
gcc -Wall -W -pedantic -std=c89 -g -O "$@" 
```

然后你只能写（不需要重定向）：

```
./Compile myprogram.c -o myprogram -llibrary 
```

顺便说一句，不要明确写`exit 0`在这个 shell 的末尾。成功时是多余`gcc`的，gcc失败时是错误的（退出代码1会被覆盖）。

# xml - 如何在 Magento 中输出销售的 XML 文件？

> ID：14937782
> 
> 赞同：1
> 
> 时间：2013-02-18T13:44:06.493
> 
> 标签：xml, magento

我正在尝试将两个系统联系在一起，并且需要在销售完成后创建订单的 XML 文件。它需要包括基本的客户详细信息（姓名、地址）、订单详细信息（订购的产品、使用的折扣代码）和交易详细信息（付款参考）。

创建此 XML 文件的最佳方法是什么？我需要创建什么以及在哪里创建？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:44:14.787

您可以创建一个观察者来`sales_order_place_after`生成并保存您的 xml 文件

```
<events>
    <sales_order_place_after>
        <observers>
            <feed_sales_order_observer>
                <type>singleton</type>
                <class>feed/order_observer</class>
                <method>export_new_order</method>
            </feed_sales_order_observer>
        </observers>
    </sales_order_place_after>
</events> 
```

请参阅[使用事件/观察者自定义 Magento](http://www.magentocommerce.com/wiki/5_-_modules_and_development/0_-_module_development_in_magento/customizing_magento_using_event-observer_method)

# android - 更改日历日期的颜色android

> ID：14937783
> 
> 赞同：2
> 
> 时间：2013-02-18T13:44:06.077
> 
> 标签：android, calendar, calendarview

我正在尝试为我的日历视图中选择的日期着色。我努力了

```
String todayDate = (mDay + "/" + mMonth + "/" + mYear);

Toast.makeText(this, "TODAYS DATE" + todayDate, LENGTH_SHORT).show();

Cursor cursor = myDatabase.rawQuery("select * from " + Calms.DATABASE_FLARE_TABLE, null);

//calendarView.setDateTextAppearance(Integer.parseInt("@+color/orange"));

for(int count=1; count<=cursor.getCount(); count++)
{
    cursor.moveToNext();
    String savedDate = cursor.getString(2);

    //calendarView.setDateTextAppearance(getResources().getColor(R.color.orange));
    //calendarView.setDateTextAppearance(R.color.color);

    Toast.makeText(this, "DATE IN DB: "+ savedDate, LENGTH_SHORT).show();
    Toast.makeText(this, "next", LENGTH_SHORT).show();

    if (savedDate.equals(todayDate))
    {
        Toast.makeText(this, "IN IF!!", LENGTH_SHORT).show();
        //calendarView.setDateTextAppearance(Integer.parseInt("@color/orange"));

        calendarView.setDateTextAppearance(getResources().getColor(R.color.orange));
    } 
```

我也尝试过 context.getRes .....

似乎没有任何效果。日期的颜色永远不会改变。

有人能帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-18T14:11:37.073

```
setTextColor(Color.GREEN); 
```

这就是我用来改变颜色的东西。适用于按钮，希望它也适用于您。

# mercurial - Mercurial：自动标记构建

> ID：14937799
> 
> 赞同：3
> 
> 时间：2013-02-18T13:44:55.783
> 
> 标签：mercurial, continuous-integration, tagging

在一个反复无常的设置中，我想根据持续集成脚本自动标记某些构建。例如，一个标签，例如`branchName-buildId`每当部署一个分支的构建时，或者`latest-stable`每当一个构建通过所有集成测试时。

但是，我担心简单调用的直接方法`hg tag`会导致问题：

*   一些标签可能是重复的 - 即`latest-stable`。我真的不在乎在这种情况下哪个构建被标记，但我不想要任何冲突，因为脚本无法解决这些问题。
*   标签导致提交。然而，这意味着这些提交需要被推送，并且它们需要在面对人类和其他脚本的并发推送时保持稳健。特别是，自动推送会产生额外的正面，这是不好的。但是当检测到额外的头（在推送时）时，本地标签提交已经发生，即使新的头可能很容易合并，有时标签也会导致冲突。

我怎样才能自动让 CI 服务器健壮地标记构建？在这里，更重要的是最终结果是一致的（即它不会弄乱 CI 服务器或 repo），并且在面对重复或冲突时可靠地应用标签并不重要（无论如何这应该是不太可能的） ）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:14:28.647

我认为你的谨慎是对的。机器人并不总是最好的公民，而且经常会做一些愚蠢的事情。

你最终会做什么取决于你看到标签的用途。例如，如果您只看到 CI 系统使用它们，那么我建议将它们保留在本地。完全没有拉/推/合并问题。

> 一些标签可能是重复的 - 即最新稳定。我真的不在乎在这种情况下哪个构建被标记，但我不想要任何冲突，因为脚本无法解决这些问题。

如果已经定义了一个标签，并且您`hg tag`再次调用，除非您强制它，否则它将失败，但是这样做是添加一个更新的、稍后定义的相同标签，并且最新的一个获胜。一方面这很好，因为合并很简单，但是在你这样做的时候考虑一​​下情况：

```
hg update -r latest-stable
hg update -r latest-stable
hg update -r latest-stable
hg update -r latest-stable 
```

每次您更新到该版本时，您都会在制作标签之前获得一个版本（正常），并且该版本`latest-stable`将指向之前的`latest-stable`. 结果是，这一系列命令将使您穿越时空。

因此，我会说最好`stable-2013-02-18`在两个提交中使用唯一标签（即 ）或标签；一个删除旧标签，一个添加新标签。

```
hg update -r latest-stable # You're now at the commit that removed the tag.
hg update -r latest-stable # This one will error because tag doesn't exist 
```

> 标签导致提交。然而，这意味着这些提交需要被推送，并且它们需要在面对人类和其他脚本的并发推送时保持稳健。特别是，自动推送会产生额外的正面，这是不好的。但是当检测到额外的头（在推送时）时，本地标签提交已经发生，即使新的头可能很容易合并，有时标签也会导致冲突。

CI 机器人应该`tag; pull; merge (if necessary); push`. 如果合并失败，不要推送，发出警报。如果推送失败（即在合并时有更多变更集），请再次拉取并合并。我只是确保您的脚本非常明确地说明了它正在合并的修订。这个过程应该让你没有多余的头脑。

我相信 Mercurial 对`.hgtags`合并文件的处理方式不同，因为它知道内容，因此冲突应该非常罕见。此外，标签提交通常很容易合并，因为所有更改都是`.hgtags`，因此来自 CI 头部的合并永远不会冲突。它可能的唯一原因是因为其他人使用与 CI 服务器相同的标签名称，如果他们这样做，那么他们需要在键盘上倒蜂蜜，这样他们才能造成更多的伤害。

我可以看到导致问题的情况是，如果您在多个具有相同标签名称的磁头上进行 CI 标记。例如，开发和发布分支都在其上运行 CI，都分配了`tests-clean`标签，但分配给不同的修订版，然后稍后合并。解决方案是，不要那样做。

希望其中一些是有帮助的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T17:18:55.067

如果您关心构建历史，请考虑为构建过程创建一个命名分支。在 Mercurial 中，来自所有分支的所有标签在整个存储库中都是可见的。

如果你不关心历史[书签](http://www.selenic.com/mercurial/hg.1.html#bookmarks)应该做的伎俩。构建过程可以`latest-stable`在测试运行后设置书签，然后执行[`hg push --bookmark latest-stable`](http://www.selenic.com/mercurial/hg.1.html#push)以将该书签推送到服务器。

无论哪种方式，您都必须注意不要对已经测试过的子版本进行测试。Mercurial[`revsets`](http://www.selenic.com/mercurial/hg.1.html#revsets)是非常强大的查询语言，应该会有所帮助。

# jquery - jQuery插件初始化上的document.ready（）？

> ID：14937802
> 
> 赞同：1
> 
> 时间：2013-02-18T13:45:02.037
> 
> 标签：jquery, jquery-plugins

我正在编写一个插件，它将创建一些 DIV 并在插件初始化时将样式应用于它们。在下面的示例代码中，我正在做一些事情，比如应用于`.disableSelection()`某些元素。

最初我将这些东西放在一个`document.ready`包装器中，但后来读到这不是理想的解决方案，因为有人可以在加载文档后很好地调用插件。我的理解是`document.ready`在加载文档时触发一次，仅此而已。

如果是这种情况，我可以使用什么来代替`document.ready`在插件初始化时应用样式等？

```
$.examplepluginname = {
 id: 'examplepluginname'
,version: '1.0'
,copyright: 'Copyright (c) 2013 Example Name'
,uri: 'http://www.example.com/'
,licensed: {
    MIT: 'http://www.opensource.org/licenses/mit-license.php'
    ,GPL: 'http://www.gnu.org/licenses/gpl.html'
}
/*,plugin: function(prepare,sort){
    aPluginPrepare.push(prepare);   // function(settings){doStuff();}
    aPluginSort.push(sort);         // function(valuesAreNumeric,sA,sB,iReturn){doStuff();return iReturn;}
}*/
,defaults: { // default settings
    searchDefaultText: 'Search & hit ENTER to add to list' //Text to show when user is not entering a search term
}
};

(function($) {
//Attach this new method to jQuery
$.fn.extend({ 
    //pass the options variable to the function
    examplepluginname: function(options) {

        var userSettings =  $.extend($.examplepluginname.defaults, options)
            //Switcher for when the user presses enter before search results come back
            ,selectOnlyResult = false
            //Arrow key navigation setting
            ,displayBoxIndex = -1
        ;

        /*
            RUN INITIALIZATION SETTINGS
        */
        $("#availableItems").disableSelection();
        displayAvailableItems();
        //Set the display styles    
        $('#tagSearch').css({
            'width': '100%',
            'border-radius': '5px',
            'outline': '0 none',
            'padding': '2px 3px',
            'font-style': 'italic'
        });

        return this.each(function() {
});
        }
    });
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:49:39.210

> 我的理解是 document.ready 在加载文档时触发一次，仅此而已。

不，这不是问题。如果你`ready`在事件发生后调用，它只会直接调用回调函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T13:50:57.407

> 如果是这种情况，我可以使用什么来代替 document.ready 在插件初始化时应用样式等？

如果您的插件需要一次性初始化（而不是每次*使用*都需要初始化）并且您无法重构以摆脱该要求，那么您最好的选择是在插件中设置一个标志来指示您是否已完成初始化. 当用户触发您的插件（每次使用调用）时，检查标志，必要时进行一次性初始化并更新标志。然后执行每次使用初始化（无论您是否只进行了一次性初始化）。

# java - 更快的 CPU 不会提高性能，而增加线程数会提高性能。业界最好的共享内存计算机？

> ID：14937805
> 
> 赞同：1
> 
> 时间：2013-02-18T13:45:13.637
> 
> 标签：java, multithreading, performance

我目前有一个从多线程中受益匪浅的程序。它启动**n 个**线程，每个线程执行 100M 次迭代。它们都使用共享内存，但根本没有同步。它近似于一些方程解，当前的基准是：

```
1 thread:  precision 1 time: 150s
4 threads: precision 4 time: 150s

16 threads: precision 16 time: 150s
32 threads: precision 32 time: 210s
64 threads: precision 64 time: 420s 
```

（精度越高越好）

我使用具有 2 x Intel Xeon E5-2670 的 Amazon EC2“集群计算 8 个超大型实例”据我了解，它有 16 个真正的内核，因此程序的线性改进高达 16 个内核。它还具有 2 倍的“超线程”，我的程序从中有所收获。使线程数超过 32 显然没有任何改进。

这些基准证明对 RAM 的访问不是“瓶颈”。

我还在 Intel Xeon E5645 上运行了这个程序，它有 12 个真正的内核。结果是：

```
1 thread: precision 1 time: 150s
4 threads: precision 4 time 150s
12 threads: precision 12 time 150s
24 threads: precision 24 time 220s 
```

`precision/(time*thread#)`[类似于亚马逊计算机，这对我来说不清楚，因为根据 cpu MHz (~1600 vs ~2600) 和http://www.cpubenchmark.net/cpu_list.php，Xeon](http://www.cpubenchmark.net/cpu_list.php) E5-2670 中的每个内核都快了 ~1.5 “Passmark CPU Mark”数字调整为

1.  为什么使用更快的处理器并不能提高单线程性能，而增加线程数却可以？
2.  是否可以在使用共享 RAM 的同时租用多个 CPU 比 2 x Intel Xeon E5-2670 更强大的服务器，这样我就可以在不进行任何更改的情况下运行我的程序并获得更好的结果？

更新：

Xeon5645 上的 13 个线程需要 196 秒。

算法随机探索具有 3500 个节点的树。树的高度为 7。每个节点包含 250 个双精度数，它们也是随机访问的。很可能几乎没有数据被缓存。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T16:52:47.177

您列出的两个 Intel CPU 的规格：

```
E5-2670 - 2.6ghz minimum [8 active cores]  (3.3ghz turbo on a single core)
E5645   - 2.4ghz minimum [6 active cores]  (2.8ghz turbo on a single core) 
```

所以这里至少有一个重要的问题要问自己：

**为什么您的应用程序作为单核不更快？** 在E5-2670 上从 1 核扩展到 8 核的速度下降比切换到 E5645 的速度下降要大得多***。***即使您的应用程序的线程间锁为零，您也不应该注意到从 1 到 16 个线程的线性进展——所有当前一代的 CPU 随着更多线程添加到其工作负载中而降低时钟速率。

至少在基本意义上，答案可能不是 RAM，而是“L1/L2 缓存”。对于应用程序性能而言，L1/L2 缓存比 RAM 吞吐量更重要。现代 Intel CPU 的设计理念是 L1/L2 缓存命中率可能会很好（如果不是很好）。如果 L1/L2 缓存被一种在没有频繁重用模式的情况下翻阅兆字节内存的算法变得无用，那么 CPU 将基本上成为 RAM***延迟***的瓶颈。

**RAM 延迟不是 RAM 吞吐量**

虽然 ram 的吞吐量可能足以随着时间的推移跟上所有线程，但延迟却不是。从 RAM 读取的延迟为 80-120 个周期，具体取决于 CPU 时钟倍频器。相比之下，从 L1 读取的延迟为 3 个周期，从 L2 为 11-12 个周期。因此，如果您的算法的某些部分总是导致从**RAM**获取，那么该部分将总是需要很长时间才能执行，并且在不同的 CPU 上大约需要相同的时间，因为 ram 延迟将大致相同。Xeon 上的 100 个周期足够长，即使是针对 RAM 的单个停顿也可能成为算法中的主要热点（考虑到这些芯片平均每个周期执行 3 条指令）。

我不知道这是否是您的应用程序的实际瓶颈，因为我不知道它在每次迭代中处理多少数据，或者它使用什么访问 ram 模式。但这是在许多线程配置和不同 Xeon CPU 上拥有恒定时间算法的唯一解释之一。

（编辑：这些 Xeon 芯片上还有一个共享的 L3 缓存，但它的作用非常有限。L3 访问的延迟是 50-60 个周期——比 RAM 好，但不是很多。而且达到 L3 的机会非常渺茫如果 L1/L2 都已经失效了。如前所述，这些芯片在设计时考虑到了高 L1/L2 命中率：L3 缓存安排的构建方式是为了弥补 L1/L2 的偶尔未命中，而不是很好地将数据作为主缓存本身）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T13:52:30.173

两个提示：
1）将线程数设置为 num cores + 1。2
）cpu 速度影响不大，它也是一级和二级 cpu 缓存的速度和大小。还有记忆。（我的 Quadcore 名义上比我的双核笔记本电脑快 20%，但实际上使用单线程高 cpu 应用程序。它快 400 - 800%。（由于更快的内存、cpu 设计、缓存等）

服务器处理能力通常低于私人 PC，因为它们的设计更注重稳健性和 24 小时正常运行时间。

# modx - Modx：在一个模板中显示所有页面

> ID：14937807
> 
> 赞同：1
> 
> 时间：2013-02-18T13:45:24.643
> 
> 标签：modx, modx-revolution, modx-templates

我想找到一种方法来调用`[[*content]]`一个模板中的每一页。我的意思是一些仍然是动态的，以便我可以添加或删除页面，它会出现在菜单中而无需修改任何内容。

[http://fr.wix.com/website-template/view/html/tokyo-design](http://fr.wix.com/website-template/view/html/tokyo-design)

我想在 modx 中使用这种导航。也许 getresource 是答案，但我需要显示如下内容：

```
<div>[[*contentpage1]]</div>
<div>[[*contentpage2]</div>
<div>[[*contentpage3]]</div>
... 
```

有人可以帮我解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T14:07:12.363

听起来你在正确的轨道上，使用 GetResources 应该能够为你做到这一点：

"

```
[[!getResources:default=``? &parents=`0` &includeContent=`1` &tpl=`contentoutput`]] 
```

"

然后创建一个名为“contentoutput”的新块，其中包含您要输出的代码，例如

"

```
<div>
[[+content]]
</div> 
```

"

# algorithm - 如何比较同一算法的两种实现？（通过检查他们的汇编代码）

> ID：14937815
> 
> 赞同：0
> 
> 时间：2013-02-18T13:45:59.173
> 
> 标签：algorithm, optimization, assembly, x86, arm

假设我在汇编中有两个相同算法的实现。我想通过检查两个片段代码来知道哪个更快。

我认为可能会考虑的参数是：操作码数、分支数、功能帧数。

我的问题是：

> 1.  我可以假设每个操作码执行都是一个周期吗？
> 2.  破坏管道的分支的开销是多少？
> 3.  调用函数的效果和开销是什么？
> 4.  ARM 和 x86 的分析有区别吗？

这个问题是理论上的，因为我有两个实现；一条长 130 条指令，一条长 184 条指令。

而且我想知道说 130 条指令长片段比 184 条指令长的实现更快是否绝对正确？

# “更好 == 更快”

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-18T13:51:25.637

不想轻率，答案是

> 1.  不
> 2.  这取决于您的硬件
> 3.  这取决于您的硬件
> 4.  是的

你真的需要在你的目标硬件上测试东西，或者有一个完全理解你的硬件的模拟器，以便以你想要的方式回答你的问题......

对于问题的最后一部分，您需要定义“更好”……更好。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-18T14:56:31.400

由于您询问了[Cortex A9](https://stackoverflow.com/questions/14674392/how-many-instructions-does-linux-kernel-need-in-order-to-handle-an-interrupt-on)，因此[数据表在](http://infocenter.arm.com/help/topic/com.arm.doc.ddi0388i/DDI0388I_cortex_a9_r4p1_trm.pdf)**附录 B**中有指令周期计数。这些计数通常假设内存总线足够快以保持 CPU 忙碌。实际上，这种情况很少见。许多视频/音频算法将在访问内存的方式上大获全胜。

## 每个操作一个周期

当然，如果您想要精确计数，则不能假设这一点。但是，如果您正在决定选择哪种算法，您可以通过查看**内部**循环中的指令来了解最佳算法。在这里，您`cache`应该允许代码按照数据表中的指令计数执行。如果计数接近，那么您可能需要查看每条指令。加载/存储更昂贵，通常是倍数等。一些算法，尤其是加密算法，通过使用不能很好地映射到`C`. 例如，`clz`, `ror`，使用进位进行多字算术等。

## 分支开销

查看**附录 B**或任何包含处理器周期计数的数据表。对于 ARM926，大约需要 3 个周期。编译器只连续生成两个条件操作码以避免分支，否则，它会分支。如果算法很大，分支可能会破坏缓存。一个**硬性**的答案取决于您的 CPU、缓存和内存。根据 Cortex A9 数据表 (B.5)，固定分支只有一个周期开销。

## 函数开销

这与**分支开销**非常相似。但是，编译器也会产生影响。^([Jim 指出](https://stackoverflow.com/users/56778/jim-mischel)) 它是否缓存对齐功能。编译器是否执行**叶函数**优化等。在现代`gcc`版本中，如果所有函数都是静态的，编译器通常会在有利的时候内联。如果算法特别大，则寄存器溢出可能是有利的。但是，对于您的 130/184 指令示例，这似乎不太可能。编译器**选项**显然会影响开销。您可以使用`objdump -S`检查序言/尾声，然后确定硬件的周期数。

## ARM 与 x86

当然，周期计数存在技术差异。`CISC`x86 还具有*可变*指令大小。这使分析变得复杂。在 ARM 上稍微容易一些。

通常情况下，您希望将事物归位，然后使用分析器实际运行它们。这些估计可以帮助指导算法的开发。硬件的循环/内存调整等。像`instruction emulation`, `page`or `alignment faults`, etc 这样的东西可能占主导地位，使所有的周期计数分析变得毫无意义。如果算法在 中`user space`，per-emption，可能会从运行到运行否定缓存获胜。有可能一种算法在负载较小的系统中工作得更好，而另一种算法在负载较高的情况下工作得更好。

## 关于*周期*计数的说明

有关获取周期计数的一些复杂情况，请参阅[后处理 objdump](https://stackoverflow.com/questions/14942436/post-process-objdump-disassemble-with-arm-cycle-counts)。基本上，典型的 CPU 是几个阶段（一条管道），不同的条件会导致*停顿*。随着 CPU 变得更加复杂，管道通常会变得更长，这意味着有更多的条件或阶段可能会停止。但是，*周期计数*估计有助于指导算法的开发和评估它们。*内存时序*或*分支预测*等事情可能同样重要，具体取决于算法。即，*周期盘点*并非完全无用，但它们也不完整。剖析应确认*实际*算法时间。如果它们发生分歧，指令重新排序、预取和其他技术可能会使它们更接近。*周期计数*和主动分析不同的事实本身就很有帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-19T05:45:23.820

说 130 指令代码比 184 指令代码快，这绝对不是真的。在这两个平台上，很容易让 1000 条指令运行得比 100 条快，反之亦然。

> 1 我可以假设每个操作码执行都是一个周期吗？

首先查看广告的 mips/mhz，尽管它是一个营销数字，它可以大致了解可能的情况。如果数量大于一，则每个时钟可能有多条指令。

> 2 破坏管道的分支的开销是多少？

在任何一个系统上，从绝对没有影响到非常戏剧性的影响。一个时钟到数百个是潜在的惩罚。

> 3 调用函数的效果和开销是什么？

很大程度上取决于函数，以及调用函数的函数。根据调用约定，您可能必须将寄存器保存到堆栈中，或者重新排列寄存器的内容以准备要调用的函数的参数。如果按值传递结构，则可能需要在堆栈上制作结构的副本，传递的结构越大，副本就越大。一旦在函数中，可能需要准备堆栈帧等。涉及的因素很多。这个问答也是独立于平台的。

> 4 ARM和x86的分析有区别吗？

是的，不是的，两个系统都使用了流水线、分支预测等所有现代技巧来保持 mips/mhz。ARM 将提供比 x86 更好的每 mhz mips，x86 是可变指令长度可能会为每个单元缓存提供更多指令。你怎么分析缓存，和内存和外围系统在系统端的分析大体相同。根据您分析的方面，指令和核心的比较相似和不同。手臂不是微编码的，x86 可能是这样的，所以你真的看不到真正有多少寄存器，诸如此类。同时 x86 可以更好地了解带有 arm 的内存系统，因为它们通常不是片上系统。根据您购买的 ARM 芯片，您可能会失去很多芯片边界的可见性，例如，可能看不到所有内存和外围总线。（例如，x86 正在通过将 pcie 现在放在芯片上来改变这一点）对于皮质中的某些东西 - 你提到的一类你将具有类似的芯片可见性边缘，因为那些将使用更大/更便宜的基于 DRAM 的片外内存而不是微控制器比如芯片资源。

底线你的最后一个问题：

“而且我想知道，说 130 条指令长片段比 184 条指令长的实现快，这是否绝对正确？”

说 130 指令片段比 184 指令片段快是绝对不正确的。它可能更快，也可能更慢，并且可能大致相同。有了更多的信息，我们可能会做出一个很好的陈述，或者它可能仍然是不确定的。很容易选择 100 条执行速度快于 1000 条指令的指令，同样容易选择 1000 条执行速度快于 100 条指令的指令（即使我不添加分支和循环，只是线性执行）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-20T03:03:02.373

您的问题几乎完全没有意义：**这可能取决于您的输入。**

大多数 CPU 都有类似于分支预测错误的惩罚（例如，传统的 ARM 在任何采用的分支上丢弃指令获取/解码，IIRC）。ARM 和 x86 还允许条件执行，这*比*分支更快。如果其中任何一个依赖于输入数据，那么不同的输入将遵循不同的代码路径。

也许一个版本大量使用条件执行，当条件为假时这是一种浪费。也许另一个是使用一些分析信息编译的，这些信息对特定情况不执行任何分支（除了最后的返回）。编译器可以采用相同的源并产生“优化”输出的原因有很多，这对于一个输入来说更快，而对于另一个输入来说更慢。

*许多*优化都有这个特性——例如，将循环的开始对齐到 16 个字节对某些处理器有帮助，但当循环只执行一次时则不然。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-18T19:45:53.107

[Cortex™ -A 系列程序员指南中的](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.den0013c/index.html)一些教科书回答了这个问题，`chapter 17`.

> > 尽管可以在您正在使用的处理器的技术参考手册 (TRM) 中找到周期时序信息，但很难计算出即使是一段微不足道的代码也需要多少个周期才能执行。指令在流水线中的移动取决于周围指令的进程，并且会受到内存系统活动的显着影响。缓存中未命中的未决加载或指令提取会使代码停顿数十个周期。标准数据处理指令（逻辑和算术）只需要一到两个周期来执行，但这并不能给出完整的画面。相反，我们必须使用分析工具或处理器内置的系统性能监视器来提取有关性能的有用信息。

另请阅读以下`17.4 Cortex-A9 micro-architecture optimizations`内容非常非常回答您的问题。

# groovy - 更改 XML 标记名称

> ID：14937816
> 
> 赞同：6
> 
> 时间：2013-02-18T13:46:00.630
> 
> 标签：groovy, xmlslurper

我想转换一个我用`XmlSlurper`. （相同的）XML 标记名称应替换为`id`属性值；应删除所有其他属性。从这段代码开始：

```
def xml = """<tag id="root">
            |  <tag id="foo" other="blah" more="meh">
            |    <tag id="bar" other="huh"/>
            |  </tag>
            |</tag>""".stripMargin()

def root = new XmlSlurper().parseText(xml)

// Some magic here.

println groovy.xml.XmlUtil.serialize(root) 
```

我想得到以下信息：

```
<root>
  <foo>
    <bar/>
  </foo>
</root> 
```

（我在 XML 上编写测试断言，并希望简化它们的结构。）我已经阅读[了使用 XmlSlurper 更新 XML 并四处](http://groovy.codehaus.org/Updating+XML+with+XmlSlurper)搜索，但没有发现在保留其子节点的同时与节点交换`replaceNode()`或交换节点的方法。`replaceBody()`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T15:24:35.553

在问题中的代码中添加“魔术”给出：

```
def xml = """<tag id="root">
            |  <tag id="foo" other="blah" more="meh">
            |    <tag id="bar" other="huh"/>
            |  </tag>
            |</tag>""".stripMargin()

def root = new XmlSlurper().parseText(xml)

root.breadthFirst().each { n ->
  n.replaceNode { 
    "${n.@id}"( n.children() )
  }
}

println groovy.xml.XmlUtil.serialize(root) 
```

哪个打印：

```
<?xml version="1.0" encoding="UTF-8"?><root>
  <foo>
    <bar/>
  </foo>
</root> 
```

HOWEVER, this will drop any content in the nodes. To maintain content, we would probably need to use recursion and XmlParser to generate a new doc from the existing one... I'll have a think

### More general solution

I think this is more generalised:

```
import groovy.xml.*

def xml = """<tag id="root">
            |  <tag id="foo" other="blah" more="meh">
            |    <tag id="bar" other="huh">
            |      something
            |    </tag>
            |    <tag id="bar" other="huh">
            |      something else
            |    </tag>
            |    <noid>woo</noid>
            |  </tag>
            |</tag>""".stripMargin()

def root = new XmlParser().parseText( xml )

def munge( builder, node ) {
  if( node instanceof Node && node.children() ) {
    builder."${node.@id ?: node.name()}" {
      node.children().each {
        munge( builder, it )
      }
    }
  }
  else {
    if( node instanceof Node ) {
      "${node.@id ?: node.name()}"()
    }
    else {
      builder.mkp.yield node
    }
  }
}

def w = new StringWriter()
def builder = new MarkupBuilder( w )
munge( builder, root )

println XmlUtil.serialize( w.toString() ) 
```

And prints:

```
<?xml version="1.0" encoding="UTF-8"?><root>
  <foo>
    <bar>something</bar>
    <bar>something else</bar>
    <noid>woo</noid>
  </foo>
</root> 
```

Now passes through nodes with no (or empty) `id` attributes

# asp.net-mvc - Umbraco 中的子应用程序

> ID：14937820
> 
> 赞同：0
> 
> 时间：2013-02-18T13:46:01.427
> 
> 标签：asp.net-mvc, umbraco

目前我有一个使用 Umbraco 4.9 构建的网站。

在 Umbraco 基础架构下运行子应用程序（最好是纯 MVC 4）有哪些选择？

这个想法是拥有一个具有自定义数据库和自定义逻辑的自定义应用程序。唯一的集成点是：

*   普通用户群（认证）
*   从自定义应用程序访问 Umbraco 的词典
*   共享同一个会话，也就是说，如果用户在自定义应用程序中浏览页面，他的会话不应该为网站过期
*   在同一域下拥有自定义应用程序（*www.mysite.com*为网站，*www.mysite.com* / app 为应用程序）

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:30:19.820

我对 v4.0.9 不太熟悉，但我想它与 4.7 有点相似。如果是这种情况，您应该可以将子应用程序放在现有 umrbaco 实例的文件夹结构中。在 IIS 中，您需要将子文件夹转换为应用程序。在 umbraco 实例的 web.config 中，您需要在`umbracoReservedPaths`应用设置中添加子应用的路径。

我不确定 session 会在这里如何。我相信 asp.net 成员应该可以正常工作。通过在您的 mvc 项目中添加对 Umbraco dll 的引用，您应该能够正常访问 Umbraco 字典。

# spring - 如何在 spring 安全上下文配置 xml 文件中使用 application.properties 中的布尔参数？

> ID：14937823
> 
> 赞同：2
> 
> 时间：2013-02-18T13:46:09.857
> 
> 标签：spring, web-applications, spring-mvc, spring-security, application-server

我正在尝试在我的文件中使用`boolean`我的参数。我不知道为什么我可以使用非布尔参数，但我得到一个布尔错误。`application.properties``spring-security configuration xml`

如何使用布尔参数？

这是我的application.properties：

```
JDBC_CONNECTION_STRING=jdbc:mysql://localhost:3306/schema?user=username&password=password
protocol=http
USE_SECURE=false 
```

我的 spring-security.xml 是：

```
< remember-me user-service-ref="internalUserDetails" data-source-ref="dataSource" key="this-is-my-key02203452416fw" use-secure-cookie="${USE_SECURE}" /> 
```

...但我收到此错误：cvc-datatype-valid.1.2.1: '${USE_SECURE}' is not a valid value for 'boolean'

我也尝试过设置`USE_SECURE=False`，但我再次遇到同样的错误。如何在 spring 安全配置 xml 文件中使用布尔参数？

这是我的 web.xml：

```
<web-app xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    version="3.0" >

    <display-name> Name-MyApp</display-name> 

    <welcome-file-list>
        <welcome-file>index.html</welcome-file>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>

    <!-- Servlets -->
    <servlet>
        <servlet-name>MyApp</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <!-- Servlets Mappings -->
    <servlet-mapping>
        <servlet-name>MyApp</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
                /WEB-INF/servlet-context.xml,
            /WEB-INF/spring-security.xml
        </param-value>
    </context-param>

    <!-- Filters -->
    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>httpMethodFilter</filter-name>
        <servlet-name>MyApp</servlet-name>
    </filter-mapping>    

    <filter> 
        <filter-name>httpMethodFilter</filter-name>
        <filter-class>org.springframework.web.filter.HiddenHttpMethodFilter</filter-class>
    </filter> 

    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
</web-app> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T14:38:11.223

看起来，正在传递键 '${USE_SECURE}' 的值。当我想启动布尔值时遇到了类似的问题

```
<bean id="flag" class="java.lang.Boolean">
    <constructor-arg value="${FLAG}"/>
</bean> 
```

它适用于“属性”，所以我以其他方式解决了我的案例。不知道是不是spring bug？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T19:40:52.917

安全命名空间的 xsd 模式定义只允许`use-secure-cookie`属性中的布尔值。如果您没有指定允许的文字之一（“true”或“false”），您的 xml 将不会通过模式验证，甚至不会被解析。

因此，如果您使用安全命名空间配置，您将无法使用外部属性来设置此值。为了证明我的观点，下面是相关的代码片段`RememberMeBeanDefinitionParser.parse()`：

```
String useSecureCookie = element.getAttribute("use-secure-cookie");
if (StringUtils.hasText(useSecureCookie)) {
    services.getPropertyValues().addPropertyValue(
                    "useSecureCookie", Boolean.valueOf(useSecureCookie));
} 
```

如您所见，该属性立即转换为布尔值，因此没有任何机制可以进一步处理该值。

我不完全确定，但很可能这可以通过简单地放松 xsd 以允许任何字符串值来解决，并将该值传递给 bean 定义（`services`上面）而不将其转换为布尔值。`PropertyPlaceholderConfigurer`如果它恰好是一个属性占位符，那么 a可以稍后解析给定的值。

如果您想尝试一下，请随时在[Spring Security 问题跟踪器](https://jira.springsource.org/browse/SEC)中打开一张票。

# android - 从 RemoteViews 调用 stopFlipping 和 startFlipping

> ID：14937830
> 
> 赞同：3
> 
> 时间：2013-02-18T13:46:36.543
> 
> 标签：android, android-widget

有没有办法`stopFlipping`从`AppWidgetProvider`使用`RemoteViews`的对象调用函数。

正如我在`RemoteViews`ie`setInt , setString`等中看到的一个函数，但它们都有第三个参数，需要填充一些值。

至于调用没有参数函数的地方，`stopFlipping`或者`startFlipping`没有任何方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:55:25.647

`startFlipping()`并且`stopFlipping()`绝对不能通过 访问`RemoteViews`，因为这些方法`@android.view.RemotableViewMethod`在源代码中没有注释。

您可以尝试的一种解决方法是使用`setInt()`修改`flipInterval`，将其设置为您通常使用的正常值，并将其`startFlipping()`设置为您通常使用的非常长的时间（例如，一年）`stopFlipping()`。

# authentication - 仅为特定 URL 模式配置 Tomcat 以进行客户端身份验证

> ID：14937833
> 
> 赞同：3
> 
> 时间：2013-02-18T13:46:44.873
> 
> 标签：authentication, tomcat, ssl, client

我有一个应用程序，其中有几个 war 文件都部署在同一个 tomcat 服务器上。我只需要针对一个战争上下文强制客户端身份验证，并且只针对特定 URL。

我在网上阅读了很多类似的问题，但我得出的结论与我需要的解决方案不符：

1.  定义 2 个具有不同端口的连接器（一个启用了 clientAuth，一个不启用）并使用相关端口访问特定 URL ==> 此解决方案不好，因为如果黑客尝试使用另一个端口访问此 URL，他可以成功
2.  在 web.xml 中定义传输保证（例如[在 Tomcat 中为每个服务启用双向 SSL](https://stackoverflow.com/questions/13246961/enabling-mutual-ssl-per-service-in-tomcat)）==> 这也不好，因为我不想在某些领域定义用户，我只想让服务器请求客户端证书并验证它是可信且有效的。

有没有办法在不定义用户的情况下使用选项 2？或者也许是第三种选择？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T10:45:26.747

如果您想接受来自受信任 CA 的任何证书，只需放入`clientAuth="want"`并`Connector`编写一个过滤器来检查是否发送了证书。将该过滤器仅分配给所需的 Web 应用程序。在过滤器中，使用以下命令获取证书：

```
request.getAttribute("javax.servlet.request.X509Certificate"); 
```

并检查它的 CA。

但请记住，来自该 CA 的**任何**证书都将允许访问。如果这是一个公共 CA，任何人都可以购买一个并访问您的应用程序。您应该始终检查 DN，在 Tomcat 中，您可以通过定义用户或在过滤器中手动执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T17:20:51.677

您不能在纯 Tomcat 中执行此操作。最好的解决方案是在它前面放置一个 Apache HTTP，它会终止 SSL 连接，并且您可以在其中将 SSL 配置为您的心脏内容，直到单个目录的级别。

# r - R 一年中的第 53 周？

> ID：14937837
> 
> 赞同：14
> 
> 时间：2013-02-18T13:47:09.930
> 
> 标签：r, date, dayofweek

我有星期日期数据，格式为两位数的星期数`yyyy-ww`。`ww`数据跨度`2007-01`为`2010-30`。周计数约定是 ISO 8601，正如您[在 Wikipedia 的“周数”文章](http://en.wikipedia.org/wiki/Week_number#Week_numbering)中所见，一年中偶尔会达到 53 周。例如，该系统 2009 年有 53 周，请参阅[此 ISO 8601 日历](http://www.timeanddate.com/calendar/custom.html?year=2009&month=1&months=12&country=1&typ=2&df=1)中的周数。（参见其他年份；根据维基百科的文章，第 53 周相当罕见。）

基本上我想读取周日期，将其转换为`Date`对象并将其保存到`data.frame`. 作为测试，我通过 将`Date`对象重新转换为`yyyy-ww`格式`format([Date-object], format = "%Y-%W"`，这在`2009-53`. 那一周不能被解释为日期`R`。这很奇怪，因为*没有*第 53 周（在 ISO 8601 标准中）的其他年份转换得很好，例如`2007-53`，而其他也没有第 53 周（在 ISO 8601 标准中）的年份也失败了，例如`2008-53`

以下最小示例演示了该问题。

最小的例子：

```
dates <- c("2009-50", "2009-51", "2009-52", "2009-53", "2010-01", "2010-02")
as.Date(x = paste(dates, 1), format = "%Y-%W %w")
# [1] "2009-12-14" "2009-12-21" "2009-12-28" NA           "2010-01-04"
# [6] "2010-01-11"

other.dates <- c("2007-53", "2008-53", "2009-53", "2010-53")
as.Date(x = paste(other.dates, 1), format = "%Y-%W %w")
# [1] "2007-12-31" NA           NA           NA 
```

问题是，我如何`R`才能接受 ISO 8601 格式的周数？

注意：这个问题总结了我几个小时以来一直在努力解决的一个问题。我已经搜索并找到了各种有用的帖子，例如[this](https://stackoverflow.com/questions/9380435/how-to-parse-year-week-number-in-r)，但没有一个能解决问题。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-18T13:47:09.930

该包`ISOweek`管理 ISO 8601 风格的周编号，`Date`在`R`. 查看[`ISOweek`](http://cran.r-project.org/web/packages/ISOweek/ISOweek.pdf)更多。继续上面的示例日期，我们首先需要稍微修改格式。它们必须是形式`yyyy-Www-w`而不是`yyyy-ww`，即`2009-W53-1`。最后一位数字标识一周中的哪一天用于标识一周，在本例中为星期一。周数必须是两位数。

```
library(ISOweek)

dates <- c("2009-50", "2009-51", "2009-52", "2009-53", "2010-01", "2010-02")
other.dates <- c("2007-53", "2008-53", "2009-53", "2010-53")

dates <- sub("(\\d{4}-)(\\d{2})", "\\1W\\2-1", dates)
other.dates <- sub("(\\d{4}-)(\\d{2})", "\\1W\\2-1", other.dates)

## Check:
dates
# [1] "2009-W50-1" "2009-W51-1" "2009-W52-1" "2009-W53-1" "2010-W01-1"
# [6] "2010-W02-1"

(iso.date <- ISOweek2date(dates))             # deal correctly
# [1] "2009-12-07" "2009-12-14" "2009-12-21" "2009-12-28" "2010-01-04"
# [6] "2010-01-11"
(iso.other.date <- ISOweek2date(other.dates)) # also deals with this
# [1] "2007-12-31" "2008-12-29" "2009-12-28" "2011-01-03"

## Check that back-conversion works:
all(date2ISOweek(iso.date) == dates)
# [1] TRUE

## This does not work for the others, since the 53rd week of
## e.g. 2008 is back-converted to the first week of 2009, in
## line with the ISO 6801 standard.
date2ISOweek(iso.other.date) == other.dates
# [1] FALSE FALSE  TRUE FALSE 
```

# excel - 将特定工作表复制到新工作簿

> ID：14937840
> 
> 赞同：0
> 
> 时间：2013-02-18T13:47:22.533
> 
> 标签：excel, vba

如何编写一个宏来从工作簿 1 复制工作表 2 并创建一个新工作簿并将该工作表粘贴到新工作簿中如果我单击我在工作表 1 底部添加的按钮，工作簿 1。

**编辑** 此代码复制活动工作表（这不是我想要的工作表）并通过提示另存为来完美地完成其余工作，这很酷，但是我需要复制工作表 2 而不是活动工作表。

```
Sub GetQuote()

   Dim activeWB As String
   Dim thisSheet As String

   activeWB = ActiveWorkbook.Name
   thisSheet = Workbooks(activeWB).ActiveSheet.Name
   Workbooks.Add
   Workbooks(activeWB).Sheets(thisSheet).Copy _
   Before:=ActiveWorkbook.Sheets(1)
   Application.Dialogs(xlDialogSaveAs).Show
   ActiveWorkbook.Close

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:20:40.600

这应该做的工作：

```
Sub GetQuote()
    ThisWorkbook.Sheets("Sheet2").Copy
    Application.Dialogs(xlDialogSaveAs).Show
End Sub 
```

# iphone - 键盘没有第二次辞职？

> ID：14937841
> 
> 赞同：0
> 
> 时间：2013-02-18T13:47:24.920
> 
> 标签：iphone, ios, objective-c, xcode, ios6

键盘不辞职第二次在同一`textfield`。我用过`UITextFieldDelegate`。例如：我输入了一些东西，`Name` `textField`然后我退出了键盘。`MobileNo`我在字段中单击输入了一些内容。这次键盘没有辞职。

```
-(BOOL)textFieldShouldReturn:(UITextField *)textField
{
    [textField resignFirstResponder];
    return YES;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:54:46.650

做`delegate`你的`MobileNo`

```
MobileNo.delegate=self; 
```

或者，如果您使用的是 xib，则`Outlet`连接`delegate`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-18T13:52:38.617

尝试这个，

```
- (void)viewDidLoad
{
 UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(dismissKeyboard)];
tapGesture.cancelsTouchesInView = NO;
[self.view addGestureRecognizer:tapGesture];
}
-(void)dismissKeyboard
{
 [self.view endEditing:YES];
} 
```

# facebook - 尝试使用 Facebook 图表重新查询 postID 时出现问题

> ID：14937842
> 
> 赞同：1
> 
> 时间：2013-02-18T13:47:26.787
> 
> 标签：facebook, api, facebook-graph-api, facebook-like

请原谅我是 Facebook 图表概念的新手。我已经阅读了文档，对我想要尝试做的事情有点迷失。我已经能够根据诸如“航行”之类的关键字查询帖子，如下所示：

> [http://graph.facebook.com/search?q=sailing&type=post](http://graph.facebook.com/search?q=sailing&type=post)

我看到它返回了一个结果集，其中包含 25 个最新帖子以及提供的关键字。当我尝试获取帖子 ID 并直接查询时，我的问题就出现了。我想要做的是能够获取帖子 ID 并在 24 小时后查询它，以查看它是否收到任何评论，并查看它自发布以来获得了多少喜欢。

我可以使用 userID_postID 并进行如下查询：

> [http://www.facebook.com/userID/posts/postID](http://www.facebook.com/userID/posts/postID)

我可以看到带有赞的帖子，但是当我在图表中尝试此操作时：

> [http://graph.facebook.com/userID/posts/postID](http://graph.facebook.com/userID/posts/postID)

我收到以下错误消息：

```
{
      "error": 
       {
          "message": "Unknown path components: / postID",
          "type": "OAuthException",
          "code": 2500
       }
} 
```

我看到人们评论说，如果你想访问一个帖子，你需要获得一个 access_token。我不确定为什么您需要 access_token 才能访问您最初获得的帖子而没有。这似乎没有意义。在尝试对不同的帖子执行此操作时，我注意到的一件事是，这似乎与访问个人的帖子而不是粉丝页面有关。而像粉丝页面这样的公共页面似乎会返回结果。

我也尝试过这样的查询：

> [http://graph.facebook.com/userID_postID/likes](http://graph.facebook.com/userID_postID/likes)

这会返回公共页面（例如粉丝页面）的点赞数，但不会返回单个页面的任何内容。谁能帮我指出正确的方向，或者给我一些解释，说明处理这个问题的正确方法是什么？向用户请求 access_token 是我不想做的事情，这主要是为了我们正在尝试创建的允许我们基于关键字进行调查的服务。任何帮助将不胜感激，谢谢。

# c# - 如何修复excel文件？

> ID：14937844
> 
> 赞同：3
> 
> 时间：2013-02-18T13:47:28.757
> 
> 标签：c#, excel

我有一个包含 4 个工作表的 excel 文件。外部系统每天发送 excel 文件，我的程序读取然后将数据存储到 db。我有 3 个文件可能已损坏，当我的程序尝试读取它给出错误“外部表不是预期格式”的文件时。当我尝试在 office 界面中打开文件时，它返回我 Excel 在 file.xlsx 中找到了不可读的内容你想恢复这个工作簿的内容吗？ETC...

当我用office excel修复文件并再次保存后启动程序时，它可以工作。但我需要在程序开始读取之前修复这些文件。有没有办法像office一样修复excel文件？

我正在使用 Microsoft.ACE.OLEDB.12.0；

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-18T15:11:09.610

您可以使用**Excel 互操作**来打开文件并像 Excel 一样进行修复。但是你不能在没有 MS Office 的机器上使用你的程序。您可以尝试第三方库，例如：

*   [http://closedxml.codeplex.com/](http://closedxml.codeplex.com/)
*   [http://code.google.com/p/excellibrary/](http://code.google.com/p/excellibrary/)
*   [http://simpleooxml.codeplex.com/](http://simpleooxml.codeplex.com/)

Excel 互操作的代码如下：

```
Missing missing = Missing.Value;
Application excel = new Application();
Workbook workbook = excel.Workbooks.Open(sourceFilePath,
    missing, missing, missing, missing, missing,
    missing, missing, missing, missing, missing,
    missing, missing, missing, XlCorruptLoad.xlRepairFile);
workbook.SaveAs(savedFile, XlFileFormat.xlWorkbookDefault,
    missing, missing, missing, missing,
    XlSaveAsAccessMode.xlExclusive, missing,
    missing, missing, missing, missing);
workbook.Close(true, missing, missing); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T14:06:44.680

由于您的文件来自外部来源，作为安全预防措施，它可能会被阻止。解决方案可能是像这样以编程方式解除对 Excel 文件的阻止：

```
public class FileUnblocker {
    [DllImport("kernel32", CharSet = CharSet.Unicode, SetLastError = true)]
    [return: MarshalAs(UnmanagedType.Bool)]
    private static extern bool DeleteFile(string name);

    public bool Unblock(string fileName) {
        return DeleteFile(fileName + ":Zone.Identifier");
    }
} 
```

取自这个答案： [Unblock File from within .net 4 c#](https://stackoverflow.com/questions/6374673/unblock-file-from-within-net-4-c-sharp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-12-17T22:08:41.950

我在使用 Microsoft.Office.Interop.Excel 库时遇到了类似的问题。Serkan 的回答是完全正确的，它为我指明了正确的方向，但并没有解决我的问题。在浏览了一些 Microsoft 博客后，我找到[了这个解决方案](https://social.msdn.microsoft.com/Forums/en-US/e8d3be32-37ae-479a-94c6-ac12488b1bea/opening-corrupted-xls-file-from-c?forum=csharplanguage)。Open() 方法可以为最后一个参数使用 3 个不同的常量。

*   xlNormalLoad
*   xl修复文件
*   xlExtractData

对我来说，第三个有效。我必须打开几种不同类型的 excel 文件，其中一些会引发此错误，而另一些则不会，因此我将所有内容都包装在 try/catch 中以处理引发 COMException 的情况。您可能遇到了不同的异常，但值得尝试我上面提到的每个常量，看看是否能解决问题。

```
 ExcelApp.Workbook excelBook;
        ExcelApp._Worksheet excelSheet;
        ExcelApp.Range excelRange;

        try
        {
            excelBook = excelApp.Workbooks.Open(path);
            excelSheet = excelBook.Sheets[1];
            excelRange = excelSheet.UsedRange;
        }
        catch(COMException)
        {
            excelBook = excelApp.Workbooks.Open(path, CorruptLoad: 
                       ExcelApp.XlCorruptLoad.xlExtractData);
            excelSheet = excelBook.Sheets[1];
            excelRange = excelSheet.UsedRange;
        } 
```

# iphone - 如何获取文档目录中目录的 URL 路径？

> ID：14937846
> 
> 赞同：4
> 
> 时间：2013-02-18T13:47:30.037
> 
> 标签：iphone, directory, nsfilemanager

如何获取文档目录中特定目录的 url 路径。

喜欢`Document/Art/`

我的代码

```
- (NSURL *)localRoot {
if (_localRoot != nil) {
    return _localRoot;
}

NSArray * paths = [[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask];

_localRoot = [paths objectAtIndex:0];
return _localRoot;
} 
```

上面的代码是 `Documents`目录的 url 路径，但我需要`Art`文档目录路径。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-18T14:03:49.093

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

NSString *documentsDirectory = [paths objectAtIndex:0];

NSString *yourArtPath = [documentsDirectory stringByAppendingPathComponent:@"/Art"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T13:51:16.523

用这个

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

NSString *documentsDirectory = [paths objectAtIndex:0];

NSString *appFile_a = [documentsDirectory stringByAppendingPathComponent:@"/Art"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T13:49:17.953

**应用程序.启动路径；**

用于查找启动应用程序的路径，如果这就是您的意思的话。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T14:43:42.593

基于上面的答案，这里是一个简单的方法，它返回给定目录的路径：

```
+ (NSString *) pathFor : (NSString *) directoryName{
    return [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject] stringByAppendingPathComponent:directoryName];
} 
```

您需要在其中实现它`ClassName.m`并调用：

```
NSString *pathForDirectory = [ClassName pathFor:dirName]; //@"Art" in your case 
```

# ruby - 拆分和合并多维数组 ruby

> ID：14937856
> 
> 赞同：0
> 
> 时间：2013-02-18T13:48:13.217
> 
> 标签：ruby, multidimensional-array, merge, split

我有一个这样的多维数组：

```
original_array[0] = Array(20 elements) # Titles
original_array[1] = Array(20 elements) # Values 
```

我已将此数组拆分为 10 列：

```
@splited_array = Array.new
@original_array.each do |elem|
  @tmp = Array.new
  elem.each_slice(10) do |row|
    @tmp << row
  end
  @splited_array << @tmp
end

# Result:
# splited_array[0][0] => labels 1 to 9
# splited_array[0][1] => labels 10 to 19
# splited_array[1][0] => values 1 to 9
# splited_array[1][1] => values 10 to 19 
```

现在我将合并到这个结果：

```
# splited_array[0][0] => labels 1 to 9
# splited_array[0][1] => values 1 to 9
# splited_array[1][0] => labels 10 to 19
# splited_array[1][1] => values 10 to 19 
```

最好的方法是什么？任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:47:54.030

这是一个更实用的方法

```
original = []
original[0] = %W(aa bb cc dd ee ff gg hh ii jj kk ll mm nn oo pp qq rr ss tt)
original[1] = %W(01 02 03 04 05 06 07 08 09 10 11 12 13 14 15 16 17 18 19 20)

result = original.map {|arr| arr.each_slice(10).to_a}.transpose 
```

```
=> [[[“aa”，“bb”，“cc”，“dd”，“ee”，“ff”，“gg”，“hh”，“ii”，“jj”]，
     [“01”、“02”、“03”、“04”、“05”、“06”、“07”、“08”、“09”、“10”]]、
    [[“kk”、“ll”、“mm”、“nn”、“oo”、“pp”、“qq”、“rr”、“ss”、“tt”]、
     [“11”、“12”、“13”、“14”、“15”、“16”、“17”、“18”、“19”、“20”]]]

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T14:19:02.737

就像是：

```
a1 = (1..10).to_a
a2 = ("A".."J").to_a

out = []
current = []
a1.zip(a2) do |a, b|
  current << a
  current << b

  if current.length >= 10
    out << current
    current = []
  end
end

out << current unless current.empty? 
```

请注意，有时这些漂亮的函数式编程范例会导致尴尬的解决方案。如果某些“必须”编程的内容更长但更清晰，那就去吧。

# doctrine-orm - 如何在学说2中创建数据库

> ID：14937857
> 
> 赞同：7
> 
> 时间：2013-02-18T13:48:14.677
> 
> 标签：doctrine-orm, zend-framework2

我想用学说 2 和 zend 框架 2 创建一个数据库。

我尝试使用命令行但它不起作用，因为首先我需要连接到数据库。

这是我可以使用的命令行：![在此处输入图像描述](../Images/e1da339e67765114239b530e27096730.png)

当我使用命令“php dictionary dbal:run-sql CREATE DATABASE TOTO”时，我收到一个错误，告诉我我选择的数据库（但我不想选择任何数据库）是未知的。

![在此处输入图像描述](../Images/e8e90fbdbb020531ae5e061176e1dae0.png)

你知道我怎么能解决这个问题吗？

如果我没有义务使用 phpmyadmin 并自己创建它，我真的很感激。我更喜欢使用原则来确保我的代码与其他类型的数据库（例如 Mysql/Postegre）兼容

谢谢你=D

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T14:10:24.563

我找到了解决方案。

您只需在配置文件中指定 dbname 等于 null。

```
<?php
return array (
  'doctrine' => array (
'connection' => 
array (
  'orm_default' => 
  array (
    'driverClass' => 'Doctrine\\DBAL\\Driver\\PDOMySql\\Driver',
    'params' => 
    array (
      'host' => 'localhost',
      'port' => '3306',
      'user' => 'root',
      'password' => '',
      'dbname' => null,
      'charset' => 'UTF8',
    ),
  ),
  'orm_poems' => 
  array (
    'driverClass' => 'Doctrine\\DBAL\\Driver\\PDOMySql\\Driver',
    'params' => 
    array (
      'host' => 'localhost',
      'port' => '3306',
      'user' => 'root',
      'password' => 'mot de passe',
      'dbname' => 'poemsV3',
      'charset' => 'UTF8',
    ),
  ),
),
  ),
); 
```

祝大家有个美好的一天=D

# c++ - 带有外部错误的模板特化

> ID：14937858
> 
> 赞同：1
> 
> 时间：2013-02-18T13:48:14.900
> 
> 标签：c++, templates

当我尝试专门化我的一个模板函数时，Visual Studio 向我抛出了一个外部错误，其中包括一个未专门化的函数的错误。

三个错误：

```
1>------ Build started: Project: Project3, Configuration: Debug Win32 ------
1>main.obj : error LNK2001: unresolved external symbol "public: virtual void __thiscall linearList<class FriendToken>::reverse(void)" (?reverse@?$linearList@VFriendToken@@@@UAEXXZ)
1>main.obj : error LNK2001: unresolved external symbol "public: virtual void __thiscall linearList<class FriendToken>::print(void)" (?print@?$linearList@VFriendToken@@@@UAEXXZ)
1>main.obj : error LNK2001: unresolved external symbol "public: virtual void __thiscall linearList<class FriendToken>::insertionSort(void)" (?insertionSort@?$linearList@VFriendToken@@@@UAEXXZ) 
```

这是代码的相关部分：

```
template<class T>
class arrayList : public linearList<T> 
{
public:
    //other methods
    void reverse();
    void print();
    void insertionSort();
};

template<class T>
void arrayList<T>::reverse()
{
            //method body
}
template<>
void arrayList<FriendToken>::insertionSort()
{
            //method body
}
template<>
void arrayList<FriendToken>::print()
{
            //method body
}
template<class T>
void arrayList<T>::insertionSort(){}
template<class T>
void arrayList<T>::print(){} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T14:34:10.283

您的示例显示了**arrayList**成员函数的特化，我假设它们应该在**linearList**中覆盖它们的虚拟等价物。链接器说它无法在您的示例中未包含 的类**linearList中找到虚拟成员。**

```
virtual void __thiscall linearList<class FriendToken>::reverse(void) 
```

如果我像这样添加 linearList 的定义，则链接器是安静的（在 MSVC2010 上，我还添加了一个空的 FriendToken 类来使事情正常工作）。

```
template<typename T>
class linearList
{
public:
    virtual void reverse() = 0;    //pure virtual
    virtual void print() = 0;
    virtual void insertionSort() = 0;
}; 
```

如果这不是您的问题，请发布 linearList 的代码，我会更新我的答案，因为这肯定是您问题的根源。

如果需要参考这里是我如何使用函数 reverse 进行测试：

```
arrayList<FriendToken> a;
static_cast<linearList<FriendToken>&>(a).reverse(); 
```

# ios - 带有自定义导航栏按钮的 PopOverController 中的图像选择器

> ID：14937860
> 
> 赞同：1
> 
> 时间：2013-02-18T13:48:32.597
> 
> 标签：ios, objective-c, ipad, uiimagepickercontroller, uipopovercontroller

我正在开发 iPad 应用程序。我想在图像选择器打开时从库图片中打开。图像选择器应该能够让用户选择多个文件。我真的被这个困住了。

![在此处输入图像描述](../Images/5930101a579e1341ae80ae003a5e7372.png)

![在此处输入图像描述](../Images/fc3546f312d8dc74dd3560c7a476e877.png)

我做了这样的。但导航栏不好，没有多项选择。

# compact-framework - 如何“捕获”未处理的异常

> ID：14937863
> 
> 赞同：1
> 
> 时间：2013-02-18T13:48:37.043
> 
> 标签：compact-framework, windows-ce, .net-cf-3.5

我们开发了一个 .NET 3.5 CF 应用程序，并且由于一些 lib 代码中抛出的未处理异常，我们遇到了一些应用程序崩溃。

应用程序终止并显示标准应用程序弹出异常消息框。

有没有办法捕获所有未处理的异常？或者至少，从消息框中捕获文本。我们的大多数客户只是重新启动设备，因此我们无法查看异常消息框。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T15:56:42.807

您是否添加了`UnhandledException`事件处理程序？

```
[MTAThread]
static void Main(string[] args)
{
    AppDomain.CurrentDomain.UnhandledException += OnUnhandledException;

    // start your app logic, etc
    ...
}

static void OnUnhandledException(object sender, UnhandledExceptionEventArgs e)
{
    var exception = (Exception)e.ExceptionObject;

    // do something with the info here - log to a file or whatever
    MessageBox.Show(exception.Message);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T14:53:17.533

我做的事情类似于[ctacke](https://stackoverflow.com/users/13154/ctacke)所做的事情。

```
private static Form1 objForm;

[MTAThread]
static void Main(string[] args)
{
  objForm = new Form1();
  try
  {
    Application.Run(objForm);
  } catch (Exception err) {
    // do something with the info here - log to a file or whatever
    MessageBox.Show(err.Message);
    if ((objForm != null) && !objForm.IsDisposed)
    {
      // do some clean-up of your code
      // (i.e. enable MS_SIPBUTTON) before application exits.
    }
  }
} 
```

也许他可以评论我的技术是好是坏。

# ajax - jScrollPane 不适用于 ajax

> ID：14937866
> 
> 赞同：0
> 
> 时间：2013-02-18T13:48:41.913
> 
> 标签：ajax, jquery, jscrollpane, jquery-jscrollpane

我试图在 ajax 加载时加载 jscrollpane，该函数似乎加载但它工作得不是很好，它的行为就像 jscrollpane div 中没有内容但它有！我不知道我做错了什么

```
$('#feedbackNoticia #noticia2').click(function(){
                $.post('teste2.php', function(data){
                    $('#noticiasBox .descricao').fadeOut(200);
                    $('#noticiasBox .noticiaAberta').delay(200).fadeIn(200).html(data);
                    $('.ajax .pNoticias').jScrollPane();
                });
            }); 
```

当 ajax 文件加载“teste2.php”时，它会显示 jscrollpane 的 html 结构，正如您在检查器中看到的那样，但它不起作用，我不知道为什么。

您可以在此处查看示例，单击菜单 Notícias 然后向下滚动并单击最后一项 [http://www.estudiocaju.com.br/homolog/dicavalcanti/](http://www.estudiocaju.com.br/homolog/dicavalcanti/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T13:35:16.767

问题是我`.delay(100)`在fadeIn 之后遇到了一个问题，它以某种方式影响了jScrollPane 的加载。

# mysql - MySQL-选择第二个选择结果的收集位置

> ID：14937872
> 
> 赞同：3
> 
> 时间：2013-02-18T13:49:04.613
> 
> 标签：mysql, sql, database, select

我有这个查询。第二部分是获取正确的值，但最终输出数据仍然包括列等于选择值的行。

```
SELECT * 
FROM roomfacilities 
WHERE room <> '(SELECT room_assigned 
                FROM allocation 
                WHERE booking_id = 01010106)'; 
```

我试图让它工作，说 SELECT all from `roomfacilities`WHERE room 'does not equal' 来自选择的结果。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T13:50:13.670

使用`NOT IN`谓词：

```
SELECT *
FROM roomfacilities 
WHERE room NOT IN(SELECT room_assigned 
                  FROM allocation 
                  WHERE booking_id = 01010106); 
```

**或者** `LEFT JOIN`：

```
SELECT f.*
FROM roomfacilities f
LEFT JOIN allocation a  ON f.room       = a.room_assigned 
                       AND a.booking_id = 01010106
WHERE a.room_assigned IS NULL; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T13:50:51.313

当 from table 的值为 时，您可以通过使用从table中`LEFT JOIN`获取所有记录。`roomfacilities``room_assigned``allocation``NULL`

```
SELECT  a.* 
FROM    roomfacilities a
        LEFT JOIN allocation b
            ON a.room = b.room_assigned AND
               b.booking_id = 01010106
WHERE   b.room_assigned IS NULL 
```

# java - 我将如何在 Java 中使用多维 Arraylist 或 HashMap 实现以下数据结构

> ID：14937873
> 
> 赞同：2
> 
> 时间：2013-02-18T13:49:04.613
> 
> 标签：java, arraylist, hashmap, multidimensional-array

```
{
  "TC_01": {
    "step": "TS01",
    "keyword": "navigate",
    "object": “search_fare"
  }
  "TC_02": {
    "step": "TS02",
    "keyword": "Verify text",
    "object": “text_header_Traveler"
  }
} 
```

如何在 Java 中使用多维 Arraylist 或 HashMap 实现以下数据结构？请提供您的建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T13:54:09.450

为

```
{ "step": "TS01", "keyword": "navigate", "object": “search_fare" } 
```

说`YourClass`

```
class YourClass{
  String step,keyword,object;  //type string is just example
...
} 
```

那么你需要一张地图`Map<String, YourClass>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T13:53:22.767

```
Map<String, TCObject> = new HashMap<String, TCObject>; 
```

其中，TCObject 是一个包含字段的类：

```
private String step;
private String keyword;
... etc ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T14:05:36.000

如果您查看您的代码，您会发现一种叫做“代码气味”（重复代码）的东西。您拥有自己的三个参数结构，这些参数不断重复：步骤、关键字和对象。只是看到我建议把它放在一个类中，以便拥有：

```
public class YourClass{

    private String keyword;
    private String step;
    private String object;

   //It´s your choice whether to have setters or have everything in through constructor

   public String getKeyword(){
       return this.keyword;
   }

   .... //continue with getters for step and object
} 
```

现在您可以拥有 hashMap 的常规结构，以便拥有 Map 这意味着它们用于查看您的地图的关键将是一个字符串“TC_01”、“TC_02”，当您返回 YourClass 时，您所要做的就是调用。 getKeyword() ... 以获取您的其余信息。

例子：

```
YourClass yourClassVariable = new YourClass();
yourClassVariable.setStep("TS01");
yourClassVariable.setKeyword("navigate");
yourClassVariable.setObject("search_fare");

Map<String,YourClass> mp=new HashMap<String, YourClass>();

// adding or setting elements in Map by put method key and value pair
mp.put("TC_01", yourClassVariable); 
```

:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-03T13:12:48.303

希望这会有所帮助...

```

公开课 TC{

    私有字符串关键字；
    私有字符串步骤；
    私有字符串对象；
  //二传手
  //吸气剂
}

TC tc=新的 TC()

tc.setStep("TS01")

tc.setKeyword("导航");

tc.setObject("search_fare");

Map map=new HashMap();

map.put("TC_01",tc);

```

# php - getmxrr() 的奇怪行为

> ID：14937876
> 
> 赞同：0
> 
> 时间：2013-02-18T13:49:10.137
> 
> 标签：php

我无法理解跟随[getmxrr()行为的原因](http://www.php.net/manual/en/function.getmxrr.php)

```
var_dump(getmxrr ( "www.yahoo.com" , &$mxhosts));  // output: boolean true  
var_dump($mxhosts);                                // output: array empty

var_dump(getmxrr ( "www.google.com" , &$mxhosts));  // output: boolean false  
var_dump($mxhosts);                                 // output: null 
```

我参考了许多网站，提到`www.`必须删除才能获得 mx 记录。但我的目标不是拥有 mx 记录，而是了解这种奇怪行为的原因。
我期待来自 SO 社区的一些帮助。
感谢你在期待。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:57:47.950

很简单 - www 没有 MX 记录。常见情况下的子域。只有当你想要一个`whatever@www.domain.tld`地址时，这才有意义。由于您尝试过的主机名没有 MX 记录 - 没有什么可以返回

# android - 如何通过单击android中的刷新按钮来使用新值更新饼图

> ID：14937877
> 
> 赞同：0
> 
> 时间：2013-02-18T13:49:10.640
> 
> 标签：android, achartengine, pie-chart

单击刷新按钮时如何使用新值更新饼图。

这意味着我想删除旧的饼图并通过单击同一活动中的按钮来创建新的饼图。这里我使用图表引擎来显示饼图。

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T15:13:56.970

您必须从数据集中删除旧数据并添加新值。完成此操作后，只需调用`mChartView.repaint()`以进行视觉刷新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T14:02:12.900

在按钮单击时调用此代码。

```
Intent intent = getIntent();
finish();
//here you get new data for the pie chart.
startActivity(intent); 
```

**如果您使用上述代码，基本上您必须重新启动活动。**

现在，如果您可以在线程中获取数据，请尝试考虑，`AsyncTask`并在方法中获取新数据`doInBackground`。并在调用`onPostExecute`刷新 UI 部分后显示一个新对象，即`View`在您的情况下。

# redirect - 如何告诉nginx将网站的所有页面重定向到root？

> ID：14937879
> 
> 赞同：4
> 
> 时间：2013-02-18T13:49:18.503
> 
> 标签：redirect, configuration, nginx

我正在关闭一个网站，我需要 nginx 将所有用户重定向到根目录，而不仅仅是在所有网站 url 上显示相同的页面。

现在我有这个：

```
server {
  listen 80;
  root /var/www/mysite;
  rewrite ^.*$ /index.html last;
} 
```

但是，这不会重定向，而是`index.html`在任何地方显示内容。如何进行重定向，以便`mysite.com/somepage`重定向到`mysite.com`哪个页面，然后显示 index.html 页面？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-18T15:13:47.033

以下应该做你想要的：

```
server {
  listen 80;

  root /var/www/mysite;
  location = / { try_files /index.html = 404;}

  location / { rewrite ^ / permanent; }
} 
```

# javascript - 为什么 Math.pow(1, NaN) 在 JavaScript 中等于 NaN？

> ID：14937880
> 
> 赞同：5
> 
> 时间：2013-02-18T13:49:22.120
> 
> 标签：javascript

在[**IEEE 754-2008**](http://en.wikipedia.org/wiki/IEEE_754)部分[*“9.2.1 特殊值”*](http://ieeexplore.ieee.org/stamp/stamp.jsp?tp=&arnumber=4610935)中提到

> `pow(+1, y)`适用`1`于任何`y`（甚至是安静的`NaN`）

对于不阅读整个文档 Wikipedia 提供了[*快捷方式*](http://en.wikipedia.org/wiki/NaN#Function_definition)：

> IEEE 754 标准的 2008 版本表示`pow(1, qNaN)`并且 `pow(qNaN, 0)`都应该返回`1`，因为它们返回`1`使用的任何其他内容而不是 quiet `NaN`。

`Math.pow(1, NaN)`那么为什么`NaN`在 JavaScript 中呢？不符合标准吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T13:53:05.403

这是因为[ECMAscript 规范](http://es5.github.com/#x15.8.2.13)似乎是这么说的。

> ### pow (x, y)
> 
> 返回`x`对乘方结果的依赖于实现的近似值`y`。
> 
> *   如果`y`是`NaN`，结果是`NaN`。
> *   ...其他限制...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T15:27:32.137

根据[Wikipedia 文章](http://en.wikipedia.org/wiki/IEEE_754_revision#Clause_9%3a_Recommended_operations)，该`pow`定义于 2008 年添加到 IEEE 754。它也是可选的。

另一方面，如果第二个参数至少是从 1997 年开始，则 ECMAScript`pow`已被定义为返回，[该年标准](http://www.ecma-international.org/publications/files/ECMA-ST-ARCH/ECMA-262,%201st%20edition,%20June%201997.pdf)的第 15.8.2.13 节。`NaN``NaN`

似乎 ECMA 委员会选择保持与十多年的 JavaScript 的兼容性，而不是遵守 IEEE 的特殊新建议。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T13:54:58.723

这是因为 NaN 是“非数字”，某种数学上的未定义。在数学 1 中，未定义的幂也是未定义的。

# c# - 如何从接口中的arraylist中读取值？

> ID：14937883
> 
> 赞同：0
> 
> 时间：2013-02-18T13:49:32.383
> 
> 标签：c#, c#-4.0

我的界面是

```
public interface IDisplayListQueue
{
    void BindQueueData();
    System.Collections.ArrayList QueueDataSource { get; set; }
} 
```

在页面加载中添加值到列表

```
IDisplayListQueue dataEntryQueue;
dataEntryQueue.QueueDataSource.Add(new { QueueID = queue.QueueID, LinkText = queueName, Uid = sentinel }); 
```

页面加载后，我想查找值，例如 dataEntryQueue 中的 QueueID。

所以，我正在尝试编写这样的代码

```
dataEntryQueue.QueueDataSource.Contains("122"); 
```

我无法找到上面的 ID，即使它是 exits.QueueDataSource 值在对象中并且在 QueueDataSource 之后我无法获得 QueueID 属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:52:16.760

您不能直接创建接口的实例。您必须创建一个实现 IDisplayListQueue 的对象，然后访问该对象。

请参阅[MSDN](http://msdn.microsoft.com/en-US/library/vstudio/ms173156.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T13:54:06.223

您需要创建自己的包含字段的类`QueueID, LinkText, Uid`，并使用`List<OwnClass>`数组列表的 insted

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T14:53:14.387

您正在创建一个具有`QueueID`属性的新匿名类型，并且您希望该`Contains`方法根据该 ID 查找对象，对吗？但`Contains`无法知道“122”应该匹配到`QueueID`. 它可以比较列表中不同对象的唯一方法是通过它们的引用，它们的内存位置，这不是你所追求的。

所以，你可以做什么？您可能希望使用 LINQ 方法`Any`，而不是使用 Contains，从而提供一种显式检查 QueueID 属性的方法：

```
if (dataEntryQueue.QueueDataSource
                  .Any(queueThingie => queueThingie.QueueID = "122"))
{
    // found it!
} 
```

但是，这行不通。为什么？因为`ArrayList`store `object`s，它不知道你`queueThingie`有一个`QueueID`属性。

所以，你可以做什么？避免将闪亮的新匿名类型与旧的和笨重的 ArrayList 混合。使用您想要的三个属性创建一个简单的`QueueThingie`类，然后您可以使用 LINQ`Any`找到您想要的。事实上，如果你`QueueThingie`实现了`IEqualityComparer`接口，甚至可以使用`ArrayList.Contains`.

# javascript - jquery自动完成填充一个javascript数组？

> ID：14937884
> 
> 赞同：2
> 
> 时间：2013-02-18T13:49:39.127
> 
> 标签：javascript, jquery, asp.net

我想在表单上的文本框中添加自动完成功能。我在这里找到了一个很好的 SO 线程：[https](https://stackoverflow.com/a/5973017/168703) ://stackoverflow.com/a/5973017/168703 这正是我所需要的，因为它也只在有人输入`@`符号时才显示自动完成。

大意是这样的：

```
$("#ucAddActionItemIssueActions_txtActionItem")
// don't navigate away from the field on tab when selecting an item
.bind("keydown", function(event) {
    if (event.keyCode === $.ui.keyCode.TAB && $(this).data("autocomplete").menu.active) {
        event.preventDefault();
    }
}).autocomplete({
    minLength: 0,
    source: function(request, response) {       
        var term = request.term,
            results = [];
        if (term.indexOf("@") >= 0) {
            term = extractLast(request.term);
            if (term.length > 0) {
                results = $.ui.autocomplete.filter(
                availableTags, term);
            } else {
                results = ['Start typing...'];
            }
        }
        response(results);
    },
    focus: function() {
        // prevent value inserted on focus
        return false;
    },
    select: function(event, ui) {
        var terms = split(this.value);
        // remove the current input
        terms.pop();
        // add the selected item
        terms.push(ui.item.value);
        var email = GetEmail(ui.item.value);
        email = email + ";";
        emails.push(email);
        $("#ucAddActionItemIssueActions_hdnEmails").val(emails.join(""));
        // add placeholder to get the comma-and-space at the end
        terms.push("");
        this.value = terms.join("");
        return false;
    }
}); 
```

请密切注意该`source`部分，因为它迫使我声明如下内容：

```
var availableTags = [
                            "jdoe",
                            "tsmith",
                            "mrighty",
                            "tstevens",
                            "ktripp",
                            "tram",

                        ]; 
```

那是我的自动完成建议将在 js 文件中......但这是我唯一不想要的部分。我必须从数据库中加载数据。不幸的是，我正在处理一个古老的 .net 框架 prolly pre 2.0 应用程序。它的 vb.net 没有 linq 或列表或所有好东西。很好，我想..我可能会创建一个`.asmx`文件，将字符串添加到数组列表中，将其转换回字符串数组并在 .asmx 文件中返回。有这种效果（这只是一个测试，还没有从数据库中提取数据）：

```
Imports System.Web.Services
Imports System.Collections

<System.Web.Services.WebService(Namespace := "http://tempuri.org/myapp.com/GetLogins")> _
Public Class GetLogins
    Inherits System.Web.Services.WebService

#Region " Web Services Designer Generated Code "

    Public Sub New()
        MyBase.New()

        'This call is required by the Web Services Designer.
        InitializeComponent()

        'Add your own initialization code after the InitializeComponent() call

    End Sub

    'Required by the Web Services Designer
    Private components As System.ComponentModel.IContainer

    'NOTE: The following procedure is required by the Web Services Designer
    'It can be modified using the Web Services Designer.  
    'Do not modify it using the code editor.
    <System.Diagnostics.DebuggerStepThrough()> Private Sub InitializeComponent()
        components = New System.ComponentModel.Container()
    End Sub

    Protected Overloads Overrides Sub Dispose(ByVal disposing As Boolean)
        'CODEGEN: This procedure is required by the Web Services Designer
        'Do not modify it using the code editor.
        If disposing Then
            If Not (components Is Nothing) Then
                components.Dispose()
            End If
        End If
        MyBase.Dispose(disposing)
    End Sub

#End Region

    ' WEB SERVICE EXAMPLE
    ' The HelloWorld() example service returns the string Hello World.
    ' To build, uncomment the following lines then save and build the project.
    ' To test this web service, ensure that the .asmx file is the start page
    ' and press F5.
    '

    'Public Function HelloWorld() As String
    '   Return "Hello World"
    'End Function
    <WebMethod()> _
    Public Function GetLogins() As String()
        Dim myList As ArrayList
        myList.Add("jstevens")
        myList.Add("jdoe")

        Dim arr() As String = CType(myList.ToArray(Type.GetType("System.String")), String())
        Return arr
    End Function
End Class 
```

如前所述，这只是一个测试，所以我只是在字符串数组中添加两个项目并返回它。现在我很不确定如何更改我的 jquery 代码来合并它......我想我会添加这样的东西：

```
$.ajax({
            url: "GetLogins.asmx/GetLogins",
            data: "{ 'resName': '" + request.term + "' }",
            datatype: "json",
            type= "POST",
            contentType: "application/json; charset=utf-8"
            }) 
```

但我不知道如何将其合并到原始 jquery 中，因为我的 jquery 技能是 zilch ... 任何人都可以帮助我理解这一点并将其放在一起，以便它可以实际工作。一旦我得到测试工作，我就可以修改它以从数据库中提取数据。我在正确的道路上吗？

## 编辑

这就是我所拥有的

```
$("#ucAddActionItemIssueActions_txtActionItem")
// don't navigate away from the field on tab when selecting an item
.bind("keydown", function(event) {
    if (event.keyCode === $.ui.keyCode.TAB && $(this).data("autocomplete").menu.active) {
        event.preventDefault();
    }
}).autocomplete({
    minLength: 0,
   source: function (request, response) {
        //get client value
        var c = $("#ucAddActionItemIssueActions_ddlClientAssignTo").val();
        var params= '{"ClientID":"' + c + '"}';
        $.ajax({
            url: "GetLogins.asmx/GetLogins",
            data: params,
            dataType: "json",
            type: "POST",
            contentType: "application/json; charset=utf-8",
            dataFilter: function (data) { return data; },
            success: function (data) {
                response($.map(data.d, function (item) {
                    return {
                        value: item.name
                    }
                }))
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                alert(textStatus);
            }
        });},
    focus: function() {
        // prevent value inserted on focus
        return false;
    },
    select: function(event, ui) {
        var terms = split(this.value);
        // remove the current input
        terms.pop();
        // add the selected item
        terms.push(ui.item.value);
        var email = GetEmail(ui.item.value);
        email = email + ";";
        emails.push(email);
        $("#ucAddActionItemIssueActions_hdnEmails").val(emails.join(""));
        // add placeholder to get the comma-and-space at the end
        terms.push("");
        this.value = terms.join("");
        return false;
    }
}); 
```

但我的应用程序抛出内部服务器错误 500。但有以下异常：

> System.InvalidOperationException：请求格式无效：application/json；字符集=UTF-8。在 System.Web.Services.Protocols.HttpServerProtocol.ReadParameters() 在 System.Web.Services.Protocols.WebServiceHandler.Invoke() 在 System.Web.Services.Protocols.WebServiceHandler.CoreProcessRequest()

这是我的网络服务：

```
Imports System.Web.Services
Imports System.Collections
<System.Web.Services.WebService(Namespace := "http://tempuri.org/quikfix.jakah.com/GetLogins")> _
Public Class GetLogins
    Inherits System.Web.Services.WebService

    <WebMethod()> _
    Public Function GetLogins(ByVal ClientID As Integer) As String()
        Dim myList As New ArrayList
        myList.Add("jstevens")
        myList.Add("jdoe")
        myList.Add("smartin")

        Dim arr() As String = CType(myList.ToArray(Type.GetType("System.String")), String())
        Return arr
    End Function
End Class 
```

这又是一个旧的 1.1 .net 应用程序，我是否需要 web 配置文件中的某些内容来表示这个 .asmx 文件？Web 方法中的参数与 ajax 调用的参数相匹配，那么可能导致这种情况的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:13:16.033

我认为这里的问题是 Web 服务需要 XML 或文本。JSON 不起作用。

您可以尝试将您的内容类型（在您的 ajax 调用中）更改为文本并从 GetLogins 方法返回一个字符串而不是字符串数组。这样，您可以使用 JSON 转换器将字符串数组序列化为 JSON 字符串并返回。

# wcf - 保护内部 WCF 服务

> ID：14937895
> 
> 赞同：0
> 
> 时间：2013-02-18T13:50:29.540
> 
> 标签：wcf, wcf-security

我需要找出保护我正在编写的 WCF Web 服务的最佳方法。该服务将在内部托管，并将针对 Active Directory 和第三方数据库执行检查。

该服务将由不同服务器上的面向公众的网页（注册页面）调用，其他任何人都无法访问它（由于防火墙规则）。该网页将不需要凭据来访问它。

该服务将获取用户名和另一个字段，并检查他们是否是现有的 AD 用户。如果是，它将检查他们在第三方数据库中是否有个人（非工作）电子邮件地址。如果没有，它会要求他们指定一个。

网站 <-> 服务 <-> AD/数据库。

如果这些防火墙规则到位，我是否需要着手保护服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:47:01.773

本指南很好地结合了一些值得研究的内容，涵盖了包括您在内的所有情况。

[http://wcfsecurityguide.codeplex.com/releases/view/15892](http://wcfsecurityguide.codeplex.com/releases/view/15892)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T14:14:44.987

这些 codeplex 应用场景可能会帮助您配置您想要实现的目标：

[Internet – 使用传输安全性的 Web 到远程 WCF（受信任的子系统）](http://wcfsecurity.codeplex.com/wikipage?title=Internet%20%E2%80%93%20Web%20to%20Remote%20WCF%20Using%20Transport%20Security%20%28Trusted%20Subsystem%29&referringTitle=Application%20Scenarios)

[Intranet – 使用传输安全性的 Web 到远程 WCF（受信任的子系统，HTTP）](http://wcfsecurity.codeplex.com/wikipage?title=Intranet%20%E2%80%93%20Web%20to%20Remote%20WCF%20Using%20Transport%20Security%20%28Trusted%20Subsystem,%20HTTP%29&referringTitle=Application%20Scenarios)

# java - 如何让音乐播放器活动继续运行？

> ID：14937899
> 
> 赞同：0
> 
> 时间：2013-02-18T13:50:42.280
> 
> 标签：java, android, android-activity, android-mediaplayer, android-music-player

我的应用中有一个音乐播放器活动。

问题是，如果用户切换到我的应用程序中的其他 Activity，音乐会继续播放，但如果稍后他返回到音乐播放器 Activity，除了音乐本身之外，一切都会重置（歌曲的标题、持续时间......）。

有没有办法让活动继续运行？（不是通过使用服务）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:02:30.647

看看这里它可能对你有帮助。

[如何在 onPause 和 onResume 上静音和取消静音](https://stackoverflow.com/questions/14899395/how-to-mute-and-unmute-it-on-the-onpause-and-onresume)

使用`onPause()`and `onResume()`。

# c++ - 每当我按下一个键 c++ 时，如何在 1 个对象上应用照明颜色

> ID：14937902
> 
> 赞同：0
> 
> 时间：2013-02-18T13:50:49.037
> 
> 标签：c++, opengl, glut

我需要绘制一个球体和立方体，同时
每当我按下'r'时，立方体会改变它的颜色，然后当'R'时球体会改变它的颜色。与“g”和“b”相同

r 是红色，g 是绿色，b 是蓝色。

问题是我不知道要使用哪组代码。目前在 C++ 的基础/初学者程序中

```
#include <conio.h>
#include <stdio.h>
#include <glut.h>

float CubeX = 0.0, CubeY = 0.0;
float Angle = 0.0l;
bool LightSwitch1 = false;
bool LightSwitch2 = false;
bool LightSwitch3 = false;
float Green[4] = {0.0, 1.0, 0.0, 1.0}; //R, G, B, A
float Blue[4] = {0.0, 0.0, 1.0, 1.0}; //R, G, B, A
float Red[4] = {1.0, 0.0, 0.0, 1.0}; //R, G, B, A
float White[4] = {1.0, 1.0, 1.0, 1.0}; //R, G, B, A
float Yellow[4] = {1.0, 1.0, 0.5, 1.0}; //R, G, B, A
float red = 1.0;
float blue = 1.0;
float green = 1.0;

void GameScene()
{
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT); //lighswitch statement
if (!LightSwitch1)
{
    glDisable(GL_LIGHTING);
    glDisable(GL_LIGHT0);
}
else if (!LightSwitch2)
{
    glEnable(GL_LIGHTING);
    glEnable(GL_LIGHT0);
    glMaterialfv(GL_FRONT_AND_BACK, GL_DIFFUSE, Green);

}
else if (!LightSwitch3)
{
    glEnable(GL_LIGHTING);
    glEnable(GL_LIGHT0);
}
else 
{
    glEnable(GL_LIGHTING);
    glEnable(GL_LIGHT0);
}

glPushMatrix();
glTranslatef(CubeX, CubeY, 0.0);
glRotatef(Angle, 0.0, 1.0, 0.0);
glColor3f(red, green, blue);
glPushAttrib(GL_LIGHTING_BIT | GL_CURRENT_BIT);  //lighting = on | color
glMaterialfv(GL_FRONT_AND_BACK, GL_DIFFUSE, Red);
glutSolidCube(2.0);
glPopAttrib();
glPopMatrix();

//glPushMatrix();
//glColor3f(0.0, 0.0, 1.0);
//glTranslatef(2.0, 2.5, 0.0);
//glRotatef(Angle, 0.0, 1.0, 0.0);
//glPushAttrib(GL_LIGHTING_BIT | GL_CURRENT_BIT);  //lighting = on | color
//  glMaterialfv(GL_FRONT_AND_BACK, GL_DIFFUSE, Red);
//glutSolidSphere(1.0, 10.0, 5.0);
//glPopAttrib();
//Angle++;
//glPopMatrix();

glEnd();

glutSwapBuffers();
}
void Keys(unsigned char key, int x, int y)
{   
switch(key)
{
    case 'w':
        CubeY+= 0.15;
        break;
    case 'a':
        CubeX-= 0.15;
        break;
    case 's':
        CubeY-= 0.15;
        break;
    case 'd':
        CubeX += 0.15;
        break;
    case 'r':
        LightSwitch1 = !LightSwitch1; //light switch controls
        break;
    case 'g':
        LightSwitch2 = !LightSwitch2; 
        break;
    case 'b':
        LightSwitch3 = !LightSwitch3; 
        break;
    }
}

void SpecialKeys(int key, int x, int y)
{
    switch(key)
    {
    case GLUT_KEY_UP:
        CubeY += 0.15;
        break;
    case GLUT_KEY_DOWN:
        CubeY -= 0.15;
        break;
    case GLUT_KEY_LEFT:
        CubeX -= 0.15;
        break;
    case GLUT_KEY_RIGHT:
        CubeX += 0.15 ;
        break;
    }
}
void ResizeWindow(int w, int h)
{
    float ratio = 1.0*w/h;
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glViewport(0, 0, w, h);
    gluPerspective(45.0, ratio, 1, 1000);
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity(); 

    gluLookAt(0.0, 10.0, 15.0, 
              0.0, 0.0, 0.0, 
              0.0, 1.0, 0.0); 
}
void main(int argc, char **argv)
{
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_DEPTH | GLUT_DOUBLE | GLUT_RGBA);

    glutInitWindowPosition(0,0);
    glutInitWindowSize(1200, 700);
    glutCreateWindow("Hey, its a moving cube!");
    glutReshapeFunc(ResizeWindow);
    glutDisplayFunc(GameScene);
    glutIdleFunc(GameScene);

    glutKeyboardFunc(Keys);
    glutSpecialFunc(SpecialKeys);

    glEnable(GL_DEPTH_TEST);
    glEnable(GL_LIGHTING);
    glEnable(GL_LIGHT0);

    glutMainLoop(); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:03:03.993

当你不应该时，你将你的条件链接到显示函数中。

你正在写的是 if `LightSwitch1`is `false`then do something, *else* if `LightSwitch2`is `false`do something, *else* ... 所以你只检查`LightSwitch2`if `LightSwitch1`is `true`。

您应该有三个单独`if`的语句，每个语句都有一个`else`：

```
if (!LightSwitch1 && !LightSwitch2 && !LightSwitch3)
{
    glDisable(GL_LIGHTING);
    glDisable(GL_LIGHT0);
}
else
{
    glEnable(GL_LIGHTING);
    glEnable(GL_LIGHT0);

    if (LightSwitch1)
        glMaterialfv(GL_FRONT_AND_BACK, GL_DIFFUSE, Red);

    if (!LightSwitch2)
        glMaterialfv(GL_FRONT_AND_BACK, GL_DIFFUSE, Gree);

    if (!LightSwitch3)
        glMaterialfv(GL_FRONT_AND_BACK, GL_DIFFUSE, Blue);
} 
```

# documentum - 根据文件夹名称从 Documentum 检索文档

> ID：14937906
> 
> 赞同：1
> 
> 时间：2013-02-18T13:50:59.580
> 
> 标签：documentum

我正在构建一个系统，将来自不同数据存储的实体集成到一个统一的界面上。最终目标是构建一个能够根据唯一键查询位于多个数据存储中的对象的系统。我们的数据存储之一是 Documentum，我们在其中将所有文档按其唯一名称（键）保存在文件夹中。对于特定实体，多个数据存储具有相同的唯一名称。这里唯一的显示停止器是获取与某个实体的唯一名称相关联的文档列表，并从文档中检索文档。我正在寻找一种方法（查询或过程）来完成这项任务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T08:19:39.407

您可以使用`folder`DQL 查询中的谓词检索文件夹下的所有文档：

```
select * from dm_document where folder('/mycabinet/myfolders/uniquefolder', DESCEND); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:54:48.087

实现此目的的另一种方法是添加具有自定义属性的新 Documentum 类型来存储您的唯一密钥。然后您可以直接查询该属性。如果您想尝试这条路线，您应该创建一个继承自`dm_document`.

然后，您的查询可能是这样的：

```
select * from my_new_type where my_custom_attribute = <unique_key> 
```

如果文件夹可以帮助您组织和导航数据，那么它可能是一个很好的解决方案，但它们也会带来一些独特的性能挑战。如果您的数据集非常大并且您不需要浏览文件夹结构，我会建议您反对它们。

# c#-4.0 - 我的 MVC 网站的某些路径的 IIS 基本身份验证

> ID：14937907
> 
> 赞同：0
> 
> 时间：2013-02-18T13:51:01.700
> 
> 标签：c#-4.0, iis, asp.net-mvc-4, iis-7.5

我想用[basic auth](http://en.wikipedia.org/wiki/Basic_access_authentication)保护我的 ASP.NET MVC4 (C#) 网站的一个页面。

我可以用 IIS 7.5 来做吗？我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:59:38.677

Here is a blog post that shows you [how to incorporate basic authentication into an MVC 4 application](http://kevin-junghans.blogspot.com/2013/02/mixing-forms-authentication-basic.html). This will work with IIS 7.5.

# php - 家谱树mysql

> ID：14937909
> 
> 赞同：3
> 
> 时间：2013-02-18T13:51:12.267
> 
> 标签：php, mysql, tree, hierarchical-data

我正在尝试使用 php 和 mysql 创建一个结构来存储和读取狗的谱系。

我在stackoverflow上发现了这种结构，而且看起来效率很高：[Inbreeding-immune database structure](https://stackoverflow.com/questions/11372248/inbreeding-immune-database-structure)

```
TABLE people (id, name, father_id, mother_id );
TABLE relatives ( person_id, ancestor_id ); 
```

这里有一个工作示例：[http ://sqlfiddle.com/#!2/0bd39/10](http://sqlfiddle.com/#!2/0bd39/10)

是否可以简单地检索以 id 开头的有序树或子树（例如 4 或 5 代）？

**编辑**

我正在尝试从使用第一个表中获取数据...但是使用 4-5 代生成的查询非常繁重。我担心数据库中有大量信息，获取家谱可能会非常缓慢且无法使用。

```
SELECT 
    t1.name AS lev1, t2.name as f, ff1.name as ff1, fm1.name as fm1, t3.name as m, 
    mf1.name as mf1, mm1.name as mm1, .......
FROM people AS t1
LEFT JOIN people AS t2  ON t2.id = t1.father_id
 LEFT JOIN people AS ff1 ON ff1.id = t2.father_id
 LEFT JOIN people AS fm1 ON fm1.id = t2.mother_id
   ...
LEFT JOIN people AS t3  ON t3.id = t1.mother_id
 LEFT JOIN people AS mf1 ON mf1.id = t3.father_id
 LEFT JOIN people AS mm1 ON mm1.id = t3.mother_id
    ...
WHERE t1.id = 6; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T14:39:27.420

这种可能更适合[图形](http://en.wikipedia.org/wiki/Graph_database)样式的数据存储。类似于 facebook 如何保持关系的层次结构。

如果您已确定并决心使用 MySQL，您可能会通过使用递归搜索来摆脱您的模式。由于您的树可以具有可变深度，因此您可以在给定位置开始自连接并沿着递归的分支“走”，直到您找不到任何后代。返回该分支并开始下一个分支。遍历寻找父母的类似过程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T14:34:56.050

我对鱼的血统有这个问题。我发现将邻接列表（就像您发布的那样）转储到像[GraphViz](http://www.graphviz.org/)这样的专用树构建器是最好的解决方案。

# java - 如何在 Windows XP 中更改 JDK 安装目录？

> ID：14937910
> 
> 赞同：0
> 
> 时间：2013-02-18T13:51:14.450
> 
> 标签：java

每次我开始`jdk-6u39-windows-i586.exe`我都会收到这个错误：

> 此帐户没有足够的权限来安装 Java(TM)。请登录具有管理权限的帐户。

这会在向导出现之前立即发生。

我认为这是因为 exe 文件试图安装到`C:\Program Files`，但安装任何东西`C:\Program Files`都仅限于管理员。所以我正在尝试安装到`C:\opt`. 但是 JDK 没有为我提供更改安装路径的选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:54:44.843

从命令提示符运行，`jdk-6u39-windows-i586.exe /s /INSTALLDIRPUBJRE=C:\opt\`

引用自：[http ://docs.oracle.com/javase/7/docs/webnotes/install/windows/jdk-installation-windows.html#Run](http://docs.oracle.com/javase/7/docs/webnotes/install/windows/jdk-installation-windows.html#Run)

# php - Twitter bootstrap如何在初始化时隐藏错误消息？

> ID：14937911
> 
> 赞同：0
> 
> 时间：2013-02-18T13:51:14.327
> 
> 标签：php, twitter-bootstrap

我有简单的警报消息，只有在出现错误时才会显示。但是我不知道如何在初始化时隐藏消息。如果我手动隐藏消息，那么即使出现错误，错误消息也会保持隐藏。

```
<div class="alert alert-error">
                <button class="close" data-dismiss="alert" type="button">×</button>
                <?php echo $error?>
            </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:09:51.820

试试这个

```
<?php if(isset($error)): ?><div class="alert">
  <button type="button" class="close" data-dismiss="alert">&times;</button>
  <?php echo $error; ?>
</div>
<?php endif; ?> 
```

确保正确包含 bootstrap.js 和 jquery.js

# php - 如何在复选框的每个选择上插入访问相同参考 ID 的多个选择

> ID：14937913
> 
> 赞同：2
> 
> 时间：2013-02-18T13:51:17.453
> 
> 标签：php, mysql, pdo, prepared-statement

当同时在两个表中插入值时，我有名为 user 和 category 的表。但是在类别表中，我使用 6 个不同选择的复选框插入不同的类别，这些复选框正在访问购买一个名称。但问题是我插入的选项我希望每个选项都能从用户表中获得相同的引用 Id，这样我就可以轻松地跟踪该用户的选择。现在，当我插入它时，它会为每个选项提供一个不同的参考 ID，并且它只在第一个选项上使用原始 ID 请帮助我解决这个问题。下面是代码，但我删除了一些代码，以便我们只关注这个问题。

```
 <?php

?>

<div class="form">

    <h1>Client informatinon <?php  echo $_SESSION['username']."   ";?></h1>
    <form action ="form.php" method = "post" id="postform">
<table><tr><td>

<tr><td>
<input type="checkbox" name="category_name[]" id="inlineCheckbox1" value="Architecture"> Architecture
</td></td><td>
<input type="checkbox" name="category_name[]" id="inlineCheckbox2" value="townplanning">Town Planning 
</td></tr><tr><td>
<input type="checkbox" name="category_name[]" id="inlineCheckbox3" value="civilengineering">Civil Engineering 
                                </td><td>
<input type="checkbox" name="category_name[]" id="inlineCheckbox3" value="buildingandrenovation"> Building & Renovation
                                 </td></tr><tr><td>
                                 <input type="checkbox" name="category_name []" id="inlineCheckbox3" value="other"> Other 
        </td><td>                   
<input type="checkbox" name="category_name[]" id="inlineCheckbox3" value="interiorgaphicdesign"> Interior graphic design 

                                </td></tr>

    </form>
    </table>
</div>

<?php

if(isset($_POST['category_name'])){
foreach($_POST['category_name'] as  $value){

?>
<?php
try{
$query="INSERT INTO tish_user(username,Password,Previllage,date_created)
VALUES(:username,:Password,:Previllage,:date_created)";
$insert = $con->prepare($query);
$insert->execute(array(
':username'=>$username,
':Password'=>(md5($Password)),
':Previllage'=>$Previllage,
':date_created'=>$date_created));
#end of first table
################################################
#You select the first Id and put it in a variable then 
$id_last = ("SELECT LAST_INSERT_ID()");
$result =$con->prepare($id_last);
$result->execute();
$last_id = $result->fetchColumn();
############################## Last Id query Ends here
#insert into  clientinfo table 
$clientinfor="INSERT INTO tish_clientinfo
(title, firstname, lastname, nickname, idnumber, client_code, 
 company, country, city, province, address, cell, 
tel, webaddress, satifiedstatus, email, job_approval, cash_with_vat, 
cash_paid, date_registered,user_id)
VALUES(:title,:firstname,:lastname,:nickname,:idnumber,:client_code,
:company,:country,:city,:province,:address,
:cell,:tel,:webaddress,:satifiedstatus, :email, :job_approval,
:cash_with_vat,:cash_paid, :date_registered,$last_id)";
$clientinfor_insert = $con->prepare($clientinfor);
$clientinfor_insert->execute(array(
':title'=>$title,
':firstname'=>$firstname,
':lastname'=>$lastname,
':nickname'=>$nickname,
':idnumber'=>$idnumber,
':client_code'=>$client_code,
':company'=>$company,
':country'=>$country,
':city'=>$city,
':province'=>$province,
':address'=>$address,
':cell'=>$cell,
':tel'=>$tel,
':webaddress'=>$webaddress,
':satifiedstatus'=>$satifiedstatus,
':email'=>$email,
':job_approval'=>$job_approval,
':cash_with_vat'=>$cash_with_vat,
':cash_paid'=>$cash_paid,
':date_registered'=>$date_registered
));
#end of clien infor 
################################################
$security="INSERT INTO tish_security(ip_address,user_id)
VALUES(:ip_address,$last_id)";
$security_insert = $con->prepare($security);
$security_insert->execute(array(
':ip_address'=>$ip_address));
##########################end of security 
############ images 
$images ="INSERT INTO tish_images(user_id,image_name,date_registered)
VALUES($last_id,:image_name,:date_registered)";
$images_insert = $con->prepare($images);
$images_insert->execute(array(
':image_name'=>$rename,
':date_registered'=>$date_created));
##############################category 
$catigory="INSERT INTO tish_catigory(user_id,category_name)
VALUES($last_id,:category_name)";
$catigory_insert = $con->prepare($catigory);
$catigory_insert->execute(array(
':category_name'=>$value));
############# property table##########################################################
/*$property ="INSERT INTO tish_propertyinfo(user_id,date_registered)
VALUES($last_id,:date_registered)";
$property_insert = $con->prepare($images);
$property_insert->execute(array(':date_registered'=>$date_created));
*/}catch(PDOException $e){
echo $e->getMessage();
}
#3 fo the 
}
}
var_dump($value);

?>

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:55:38.083

我认为挑战就在这里，对吧？cos，可以只插入一只猫吗？

```
$catigory="INSERT INTO tish_catigory(user_id,category_name)
    VALUES($last_id,:category_name)"; 
```

好吧，也许这不是一个真正的答案，但假设您尝试插入多只猫但具有相同的 last_id；

```
$cats = $vals = array();
foreach ((array) $_POST['category_name'] as $cat) {
    if ('' !== ($cat = trim($cat))) {
        $cats[] = $cat;
        $vals[] = "({$last_id}, ?)";
    }
}

if (!empty($cats)) {
    $sql = 'INSERT INTO tish_catigory (user_id, category_name) VALUES'. join(',', $vals);
    print($sql); // INSERT INTO tish_catigory (user_id, category_name) VALUES(111, ?),(111, ?)

    $sth = $con->prepare($sql);
    foreach ($cats as $i => $cat) {
        $sth->bindValue($i+1, $cat, PDO::PARAM_STR);
    }
    $sth->execute();
    ...
} 
```

在此处查看更多详细信息：http: [//php.net/manual/en/pdostatement.bindvalue.php](http://php.net/manual/en/pdostatement.bindvalue.php)

# java - 在詹金斯中创建构建作业时如何调用项目

> ID：14937921
> 
> 赞同：0
> 
> 时间：2013-02-18T13:51:44.917
> 
> 标签：java, jenkins, continuous-integration

从过去的 1 小时开始，这个问题就在我耳边嗡嗡作响。在詹金斯中创建构建作业时如何调用项目。通过使用 Freestylebuild，我创建了一个构建作业。我给出构建名称、描述、添加 Maven、添加颠覆路径并保存。主要问题是我找不到这个构建和我的项目之间的链接。更简单地询问如何为我的 java 项目创建构建作业。在创建构建时，我应该在构建中的哪里指定我的项目？

请。任何适当的答案将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:49:20.770

您需要添加`build step`，也许`Invoke maven`正如您在问题中提到的那样。在配置字段中填写适当的参数，然后触发构建。

我对[maven](http://maven.apache.org/)不是很熟悉，但是如果您使用的是[ant](http://ant.apache.org/)，则创建一个新`build step` `Invoke ant`的然后指定 ant 目标。这将构建由 ant 脚本指定的项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T06:54:34.180

当您创建工作时，您会看到此部分吗？

![在此处输入图像描述](../Images/ab5e909f8ea7e8e81c12ab55f48f6e2b.png)

只需单击`Add build step`并选择 cmd/shell/maven - 您的项目用于构建的 whataver 脚本。

# asp.net-mvc - 来自 HttpRequestMessage 内容的文件名

> ID：14937926
> 
> 赞同：4
> 
> 时间：2013-02-18T13:52:15.123
> 
> 标签：asp.net-mvc, rest, post, file-upload, asp.net-web-api

我实现了一个 POST Rest 服务来将文件上传到我的服务器。我现在遇到的问题是我想按类型限制上传的文件。例如，我只想允许上传 .pdf 文件。

我试图做的是

```
 Task<Stream> task = this.Request.Content.ReadAsStreamAsync();
            task.Wait();
            FileStream requestStream = (FileStream)task.Result; 
```

但不幸的是，不可能将 Stream 转换为 FileStream 并通过 requestStream.Name 访问类型。

有没有一种简单的方法（除了将流写入磁盘并检查类型）来获取文件类型？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-18T15:18:45.400

如果您将文件上传到 Web API 并且想要访问文件数据 ( `Content-Disposition`)，您应该将文件上传为 MIME 多部分 ( `multipart/form-data`)。

[在这里](http://www.strathweb.com/2012/08/a-guide-to-asynchronous-file-uploads-in-asp-net-web-api-rtm/)，我展示了一些关于如何从 HTML 表单、Javascript 和 .NET 上传的示例。

然后你可以做这样的事情，这个例子只检查 pdf/doc 文件：

```
public async Task<HttpResponseMessage> Post()
    {
        if (!Request.Content.IsMimeMultipartContent())
        {
            throw new HttpResponseException(Request.CreateResponse(HttpStatusCode.NotAcceptable,
                                                                   "This request is not properly formatted - not multipart."));
        }

        var provider = new RestrictiveMultipartMemoryStreamProvider();

        //READ CONTENTS OF REQUEST TO MEMORY WITHOUT FLUSHING TO DISK
        await Request.Content.ReadAsMultipartAsync(provider);

        foreach (HttpContent ctnt in provider.Contents)
        {
            //now read individual part into STREAM
            var stream = await ctnt.ReadAsStreamAsync();

            if (stream.Length != 0)
            {
                using (var ms = new MemoryStream())
                {
                    //do something with the file memorystream
                }
            }
        }
        return Request.CreateResponse(HttpStatusCode.OK);
    }
}

public class RestrictiveMultipartMemoryStreamProvider : MultipartMemoryStreamProvider
{
    public override Stream GetStream(HttpContent parent, HttpContentHeaders headers)
    {
        var extensions = new[] {"pdf", "doc"};
        var filename = headers.ContentDisposition.FileName.Replace("\"", string.Empty);

        if (filename.IndexOf('.') < 0)
            return Stream.Null;

        var extension = filename.Split('.').Last();

        return extensions.Any(i => i.Equals(extension, StringComparison.InvariantCultureIgnoreCase))
                   ? base.GetStream(parent, headers)
                   : Stream.Null;

    }
} 
```

# javascript - 使用循环在 javascript 中构建多维对象

> ID：14937927
> 
> 赞同：0
> 
> 时间：2013-02-18T13:52:15.607
> 
> 标签：javascript, jquery, object, loops

所以我有一个 html 布局，其中有**块**（没有固定数量的块，因为它们可以动态创建）。

在这些**块**中有**盒子**（同样，它们可以动态创建）**盒子**包含 *html 元素 *s 并且还具有不同的*数据属性*

所以我需要创建一个看起来像这样的对象

```
 block1 = {
       box1 : {
          id : box1.data('id'),
          content : box1.html()
       },
       box2 : {
          id : box2.data('id'),
          content : box2.html()
       } 
     },
     block2 = {
       box3 : {
          id : box3.data('id'),
          content : box3.html()
       }           
     } 
```

请不要写语法不正确，我知道。我只是试图以某种方式说明我想要什么。

所以我的问题是我如何在 jQuery 的帮助下做到这一点？

谢谢先进

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T13:59:14.977

[`.each` *^(您可以选择所有块和框并使用[docs])*](http://api.jquery.com/each/)遍历它们中的每一个：

```
var blocks = {};

$('.block').each(function(index) {
    var boxes = {};
    $(this).find('.box').each(function(index) {
        boxes['box' + index] = {
            id: $(this).data('id');
            content: $(this).html();
        };
    });
    blocks['block' + index] = boxes;
}); 
```

不过，您可能不需要对象的对象，也许数组数组就足够了，或者会更好，这取决于您打算如何处理数据。

要了解有关对象如何工作的更多信息，请查看[MDN - 使用对象](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T14:00:03.943

这是一个想法：

1- 使用一些 CSS 选择器遍历所有块。

2- 创建一个通用 JS 对象并将一个名为“boxes”的集合属性设置为一个数组

3- 对于每一个，再次使用一些 CSS 选择器遍历其中的所有框。

4-为每个盒子创建一个通用的JS对象并根据需要设置属性。

**代码版本** 我认为这样的东西会起作用（未经测试）：

```
var blocks = new Array();
$(".blocks").each(function(b) {
  var my_block = {boxes: new Array()};
  var $block = $(b);
  $(".box", $block).each(function(box) {
     var $box = $(box);
     my_block.boxes.push({id: $box.attr("id"), content: $box.html()});
  });
  blocks.push(my_block);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T13:59:19.717

你应该看看 Knockout.js，构建一个像你这样的应用程序非常舒服。

详细：使用对象。为自己构建一个数组，包含具有块名称和所有子节点的对象。

```
<div id="lanesContainer" data-bind="foreach: blocks">
    <div id="" class="dropLane laneDefault ui-widget-header ui-dialog ui-widget ui-corner-all ui-front ui-resizable">
      <div class="ui-dialog-titlebar ui-helper-clearfix" data-bind="drop: {value: $data.dropTask}">
        <p class="laneheader" data-bind="text: $data.title">Lane</p>                  
      </div>

      <ul data-bind="foreach: box">
        <li class="ui-dialog-content laneItem" data-bind="drag: {value: $data}">
            <div class="ui-widget-header laneItemHeader" data-bind="text: $data.Title"></div>
            <div class="ui-widget-content laneItemBody" data-bind="text: $data.Description"></div>
            <div class="ui-widget-content laneItemFooter">
                <div class="ui-corner-all ui-state-default notification-important">
                    <span class="ui-icon ui-icon-notice" title="sometitle" data-bind="css: {'notification-important-hide': !$root.isElementImportant($data) }"></span>
                </div>
            </div>
        </li>
      </ul>
    </div>
</div> 
```

这有用吗？

以下是如何获取具有嵌套子数组的对象：

```
function laneObject(title) {
    var obj = new Object();
    obj.title = title; //Identifier for Lane
    obj.childs = []; //Elements of Lane to display
    return obj;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T14:01:45.143

我不完全确定您的问题是什么，但是如果您想动态创建块和框，我建议您首先使用数组。

```
//All dynamically created blocks
blocks = [];

//Create blocks
for(var i = 1; i < 3; i++) {
    var block = {
        //All dynamically generated bloxes
        boxes = [];
    };

    //Create boxes
    for(var j = 1; j < 4; j++) {
        block.box[j] = {
          id : j,
          content : '<span>html for box' + j + '</span>'
       }
    }

    blocks[i] = block;
} 
```

# jquery - 我的 jQuery DataTable 复选框不起作用，我做错了吗？

> ID：14937931
> 
> 赞同：1
> 
> 时间：2013-02-18T13:52:18.563
> 
> 标签：jquery, jquery-datatables

我正在尝试实现复选框以作为表单提交，但我意识到它不会以这种方式工作。实现这一点的正确方法是什么？我在这里阅读了一些示例，但无法理解。

```
<form method="post" name="search_form" action="<?php echo $linksearch; ?>">
<table cellpadding="0" cellspacing="0" border="0" class="display" id="search_table">
<thead>
<tr>
<th>Process1</th>
<th>Process2</th>
<th>Process3</th>
<th>Process4</th>
<th></th>
</tr>
</thead>
<tbody>
<?php
$sql = "select * from activity_temp";
$result=tep_db_query($sql);
$sc=0;
while($row = mysql_fetch_array($result)){
   echo "<tr>";
   echo "<td>".$row['p1']."</td>";
   echo "<td>".$row['p2']."</td>";
   echo "<td>".$row['p3']."</td>";
   echo "<td>".$row['p4']."</td>";
   echo "<td class=\"center\"><input type=\"checkbox\" name=\"search_cb[".$row['temp_id']."]\" value=\"on\"></td>";
   echo "</tr>";
$sc++;
}
?>
</tbody>
<tfoot>
<tr><td colspan="5" align="right">
<input id="search_form_submit" type="submit" name="submit" value="Search" class="submit" />
</td></tr>
</tfoot>
</table>
</form> 
```

我这样做吗？

```
$('#search_table').dataTable({
    "aoColumnDefs": [{
       "bSortable": false, "aTargets": [4]
    }],
   "aoColumns": [
    { "mDataProp": "checkBox" }],
           "aaData": [{
        "checkBox": "<input type="checkbox" name="search_cb" value="on" />"
    }]         
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T04:52:25.620

```
$('#form').submit( function() {
    var sData = $('input', oTable.fnGetNodes()).serialize();
    alert( "The following data would have been submitted to the server: \n\n"+sData );
    return false;
} ); 
```

来源：[http ://datatables.net/examples/api/form.html](http://datatables.net/examples/api/form.html)

# ios - 如何创建指向 build.phonegap 应用程序的 HTML 链接？

> ID：14937935
> 
> 赞同：1
> 
> 时间：2013-02-18T13:52:32.323
> 
> 标签：ios, cordova, url-scheme, phonegap-build

我最近通过 phonegap 遇到了几个关于 iOS 开发的问题，而且不同寻常的是，这里的人们无法讨论这些问题，甚至我们在一起（这是我第一次看到）对这些话题没有一个评论或答案...

请参阅**[https://stackoverflow.com/questions/14707936/make-a-page-that-redirects-back-to-ios-phonegap-app](https://stackoverflow.com/questions/14707936/make-a-page-that-redirects-back-to-ios-phonegap-app)**和**[iOS 浏览器数据 -> Phonegap 应用程序/会话的缓存和 Cookie？](https://stackoverflow.com/questions/14705707/ios-broswer-data-cache-cookie-for-phonegap-app-session)**...

但是，我找到了解决这些问题的“解决方案”，但它绝不是对仍然悬而未决的问题的答案……只是以完全不同的方式进行。

然而，尽管失去了 phonegap 中的网络视图，但为了绕过**[https://stackoverflow.com/questions/14707936/make-a-page-that-redirects-back-to-ios-phonegap-app](https://stackoverflow.com/questions/14707936/make-a-page-that-redirects-back-to-ios-phonegap-app)**我现在有了一些悬而未决的问题...

**我需要能够从网络系统导航回我的应用程序！！！**

但是，我不知道如何。我已经阅读了有关创建 URL Schema 的信息，但我不确定这是否可以通过 build.phonegap 实现……而且看起来很复杂。有没有人知道**iOS Safari**做两件事之一的方法

**任何一个**

> 打开正在后台运行的应用程序

或者

> 关闭当前浏览器选项卡并在后台导航回应用程序。

***关闭标签的想法会很好，但不是必需的***

期待大家对这个的想法和意见...

亨利

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:55:54.823

您可以为自己制作的任何应用程序创建一个 url 方案。

[看这里的教程](http://iosdevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html)

它并不像人们想象的那么复杂，而且所需的 Objective-c 代码也很少。

完成此操作后，您可以使用自己的 url 方案通过超链接从 safari 启动 phonegap 应用程序。这不会关闭选项卡（如果您愿意，您可以使用 javascript 执行此操作）但确实将 safari 置于后台，并打开您的 phonegap 应用程序。（是否已经在后台运行）

甚至可以使用您的 url 方案将数据传递给应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:44:57.453

目前无法在 2.2 及更早版本中使用 PhoneGap Build。可能会在较新版本的 Cordova/Phonegap 中发布一个功能

# apache - Apache Commons Pool LIFO 与 FIFO

> ID：14937939
> 
> 赞同：1
> 
> 时间：2013-02-18T13:52:45.600
> 
> 标签：apache, pool

我想知道在使用 Apache Commons Pool 实现池时，LIFO 堆栈与 FIFO 队列的优势是什么。将默认设置为 FIFO 会不会更“安全”以避免超时连接（在开始时打开但直到高峰时间才使用）并且可能避免在空闲时进行测试？

我会很感激任何意见。非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-26T06:14:36.630

LIFO（默认）的一些优点可以是

1.  如果打开，空闲对象驱逐器将更有效地工作
2.  工作可能集中在较少数量的实例上，重用最近使用的资源。

这些是否是好处取决于池对象是什么、负载分布是什么、将工​​作负载集中在少数实例上的重要性以及重用最近使用的资源的好处。

您是正确的，使用 LIFO 会导致某些实例在池中闲置更长的时间。如果保持池精简和集中负载不是优势，则超时是一个问题，并且负载分布使得 FIFO 访问可以保持实例新鲜，那么这种配置是有意义的。这就是配置选项存在的原因。

# java - Wrapper 的 parseXXX() 对有符号二进制的误解

> ID：14937948
> 
> 赞同：4
> 
> 时间：2013-02-18T13:53:18.767
> 
> 标签：java, parsing, binary, api-design

让我们以`Byte.parseByte()`包装器之一为例`parseXXX()`。

来自[`parseByte(String s, int radix)'s JavaDoc`](http://docs.oracle.com/javase/7/docs/api/java/lang/Byte.html#parseByte%28java.lang.String,%20int%29)：

> 将字符串参数解析为第二个参数指定的基数中的有符号字节。

但如果`radix = 2`. 换句话说，的二进制文字`-127`是`10000000`：

```
byte b = (byte) 0b10000000; 
```

所以以下应该是正确的：

```
byte b = Byte.parseByte("10000000", 2); 
```

但不幸的是，它会抛出`NumberFormatException`，而我必须这样做：

```
byte b = Byte.parseByte("-111111", 2); 
```

where`parseByte()`将二进制字符串解析为符号大小（符号和大小），它应该解析为有符号二进制（2 的补码，即 MSB 是符号位）。

我错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T13:54:28.853

> 我错了吗？

是的。Javadoc 没有提到 2 的补码。实际上，它明确说明了它如何识别负值（即`-`前缀，因此有效地“人类可读”的符号大小）。

换个方式想一想。如果`parseByte`将 radix-2 解释为 2 的补码，您希望它对 radix-10（或者实际上，任何其他基数）做什么？为了一致性，它必须是 10 的补码，我可以向你保证，这会很不方便！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-29T10:49:48.017

这是因为对于 parseByte，“10000000”是一个正值 (128)，它不适合 -128 到 128 的字节值范围。但是我们可以使用 BigInteger 解析二进制补码表示：

```
byte b = new BigInteger("10000000", 2).byteValue() 
```

这给出了预期的-128结果

# json - 查找包含日期的数组的 d3.extent 以在 D3 中创建 xScale

> ID：14937953
> 
> 赞同：0
> 
> 时间：2013-02-18T13:53:46.723
> 
> 标签：json, d3.js

我正在尝试使用 json 文件创建一个类似于[http://bl.ocks.org/mbostock/1667367的焦点画笔。](http://bl.ocks.org/mbostock/1667367)我无法正确读取日期并为图表创建 xScale。

假设这些是我的 Json 文件中的一些日期，提取到一个数组中。

```
//some dates
        dates = ["Fri Jul 27 22:32:59 2012","Fri Jul 27 22:33:59 2012","Fri Jul 27 22:34:59 2012","Fri Jul 27 22:35:59 2012","Fri Jul 27 22:36:59 2012"];

        //declare new date variable
        var dates2 =[];

        var format = d3.time.format("%a %b %d %H:%M:%S %Y");
        dates.forEach(function(d){
             dates2.push(format.parse(d));
        });
        console.log(d3.extent(dates_extents));

                    dates_extents = d3.extent(dates2);

        x.domain(d3.extent(dates_extents);
        x2.domain(x.domain); 
```

虽然 dates_extents 打印在控制台中，但我收到此错误：

```
TypeError: n.map is not a function [Break On This Error] ...t,n)},n.copy=function(){return ae(t)},n}function oe(t){return t.innerRadius}func... d3.v3.min.js (line 1) 
```

任何想法可能是问题的根源以及我如何解决它？

谢谢！

# ms-access - 从 DoCmd.OpenReport 将参数传递给 Access 2010 报告

> ID：14937954
> 
> 赞同：0
> 
> 时间：2013-02-18T13:53:48.147
> 
> 标签：ms-access

我有一个表单，它有 2 个文本框和 1 个按钮。文本框是日期从和日期到。单击该按钮时，会运行一些 VBA 代码，该代码会循环查询结果 (qryInvoicesBetweenDates)，获取发票 ID 并生成发票的打印预览。问题是，我无法弄清楚如何在循环中将当前 ID 传递给报告。我只需要给 DoCmd.OpenReport 他 invoice_number 变量。

VBA代码：

```
Dim qdf As QueryDef
Set qdf = CurrentDb.QueryDefs("qryInvoicesBetweenDates")
Dim rs As DAO.Recordset

qdf.Parameters(0) = tbFrom.Value
qdf.Parameters(1) = tbTo.Value

Set rs = qdf.OpenRecordset()
Do Until rs.EOF = True
        ' Set the invoice number to the current row
        'invoice_number = rs.N
    invoice_number = rs.Fields(0).Value

    ' Preview the invoice
    Dim stDocName As String
    stDocName = "InvoiceForWork"
    DoCmd.OpenReport stDocName, acPreview
Loop 
```

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T13:57:17.950

您可以将 where 语句与[OpenReport](http://msdn.microsoft.com/en-us/library/office/bb238032%28v=office.12%29.aspx)一起使用：

```
DoCmd.OpenReport stDocName, acPreview,,"ID=" & Rs!invoice_number 
```

其中 ID 是报告中对应于 的字段的名称`Rs!invoice_number`。上面的示例适用于数字数据类型，文本数据类型需要引号。

# c# - 自定义控件列表的 WinForms UI 设计建议？

> ID：14937955
> 
> 赞同：0
> 
> 时间：2013-02-18T13:53:55.930
> 
> 标签：c#, .net, winforms, listview

我们需要一个用于 C# .Net WinForms 应用程序上的交易应用程序的“仪表板”视图。

目前，该应用程序会弹出附加表格，其中包含用户定义了自动交易规则的每个符号（MSFT、GOOG、EUR/USD）的价格图表。但有些用户希望同时交易数十或数百个符号。该应用程序会处理这种性能方面的问题，但这会在桌面上创建太多单独的图表。

因此，需要一个包含每个符号的信息和控件列表的表单。

请提供有关选择为此使用哪些控件的建议。

好的，这里有一些要求：

1.  该列表需要可滚动。
2.  在每一行：a) 一个按钮，用于最大化/最小化该交易品种的图表。b) 暂停或恢复交易品种以及显示当前状态的按钮。c) 几列信息，如交易品种、净值、仓位。
3.  未来版本：可按信息列排序的行。
4.  未来版本：让每一行“可解释”，可能带有加号/减号，以显示其他详细信息，如活动订单列表或迷你“内联”图表，而不是单独的弹出窗口。
5.  一行或多行将是具有类似列的“投资组合”行，以显示其嵌套代码和投资组合的组合权益。
6.  我们需要尽快实现这一点，这样就排除了设计自定义控件（至少在这个版本中）——所以我们只想使用 .Net 标准控件。
7.  我们希望避免第三方解决方案，除非它是开源的。

最棘手的设计问题：

如何表示策略和投资组合之间的关系。这些关系可以通过嵌套的投资组合变得复杂，并且可以将单个投资组合实例分配给多个父投资组合。笔记。用户无法在运行时更改这些关系……但以视觉方式表示这一点会很好。可以将它集成到这个控件中吗——比如树视图？问题是单个投资组合或符号可以嵌套在多个其他投资组合中。所以这对于树视图似乎没有意义。

另一个想法是为每个投资组合弹出单独的列表视图——呸。

最好的办法是在同一个仪表板上直观地表示关系。也许不是在第一个版本中，但也许是一个自定义绘图控件，它实际上显示每个投资组合的一列，垂直线显示符号或包含刻度线的投资组合？我们想要一个简单而优雅的解决方案。

计划是在满足最低需求的情况下启动一些东西，但也要对如何在下一个版本中获得投资组合关系和其他功能而无需重写整个事情进行一些深思熟虑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T10:45:39.283

如果您更了解winform，那么我认为您可以尝试使用一些选项卡控件、嵌套选项卡控件、可调整大小的面板等来为您的仪表板使用后台工作线程控制。

# c# - 按字符串数组过滤列表

> ID：14937956
> 
> 赞同：2
> 
> 时间：2013-02-18T13:53:58.193
> 
> 标签：c#, winforms

我有一个 WinForms 应用程序，我想在其中使用文本框来接受搜索查询（例如男士黑色 T 恤），然后根据此搜索查询过滤对象列表。

对象列表是订单对象。每个订单对象都有几个属性，例如性别、大小、颜色等。

如果我通过空格字符拆分搜索查询来获得一个字符串数组，那么针对列表中每个订单对象中的每个属性搜索此字符串数组中的每个项目并返回匹配所有字符串的最佳方法是什么字符串数组？

例如，如果我搜索“kids black medium”，我只想返回 kids AND black AND medium 的订单，所以我不想要黑色订单或只是 kids order 等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T14:12:19.323

给定以下`Order`课程：

```
class Order
{
    public string Size {get; set;}
    public string Gender {get; set;}
    public string Colour {get; set;}
    public string Type {get; set;}

    // List of "searchable" properties
    public IEnumerable<string> GetTags()
    {
        return new []{Size, Gender, Colour, Type};
    }
} 
```

一个简单的方法可能如下所示：

```
var list = new []
{
    new Order {Size = "large", Gender = "women", Colour = "red", Type = "tshirt"},
    new Order {Size = "large", Gender = "men", Colour = "black", Type = "tshirt"},
    new Order {Size = "medium", Gender = "kids", Colour = "black", Type = "tshirt"},
    new Order {Size = "medium", Gender = "kids", Colour = "black", Type = "shorts"},
    new Order {Size = "medium", Gender = "men", Colour = "black", Type = "tshirt"}
};

var searchString = "kids black medium";
var searchValues = searchString.Split(new []{" "}, StringSplitOptions.RemoveEmptyEntries).Select(s => s.Trim()).ToArray();

var result = from order in list 
             let tags = order.GetTags()
             where searchValues.All(s => tags.Any(t => t == s))
             select order; 
```

`result`现在包含

![在此处输入图像描述](../Images/3ad22a8aa130c39c4748bc593912469c.png)

您也可以使用`Intersect`or a`HashSet`来比较搜索值/标签，但没有更多的需求信息`All`/`Any`恕我直言，这是一个足够好的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T14:12:00.070

尝试以下操作：

```
class Item
{
    public bool Gender { get; set; }
    public int Color { get; set; }
    public string Type { get; set; }

    public string[] GetKeyWords()
    {
        // Return properties as array of key words.
        // You can cache the result for future use.
        return default(string[]);
    }
} 
```

现在，如果您有项目列表和字符串（关键字）数组，则可以编写以下查询：

```
var matches = from item in items
              let itemKeyWords = item.GetKeyWords()
              where keyWords.All(k => itemKeyWords.Any(c => c == k))
              select item; 
```

# c# - 提交时获得确认答案

> ID：14937957
> 
> 赞同：0
> 
> 时间：2013-02-18T13:53:59.833
> 
> 标签：c#, confirm

在我的 C# 代码中，我使用以下代码向用户显示了一个确认框：

```
string confirmMsg = "All the cause data will be permanently removed. Are you sure you want    to continue";
ClientScript.RegisterStartupScript(Page.GetType(), "TWCL Issue Mgmt System", "confirm('" + confirmMsg + "');", true); 
```

我正在尝试将答案（是或否）转换为布尔值或其他变量，以便我可以根据给出的答案执行其他代码。所以我想要这样的东西：

```
bool x = ClientScript.RegisterStartupScript(Page.GetType(), "TWCL Issue Mgmt System", "confirm('" + confirmMsg + "');", true);
if(x)
{
 /*Exceute the rest of the code here*/
}
else
{
  /*do postback*/
} 
```

关于如何从确认框中获得是/否答案的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:09:18.333

您正在注册的启动脚本将在显示网页时运行，在用户有机会与之交互之前。此时的确认提示可能会令人困惑。

更常见的是使用`OnClientClick`正在执行回发的按钮的属性：

```
<asp:Button ...
   OnClientClick="return confirm('Are you sure?');" 
/> 
```

这样只有在用户尝试发帖时才会显示确认提示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T13:56:19.783

在表单上创建一个隐藏字段。用一些javascript在隐藏字段中写下问题的答案。读取后面代码中隐藏字段的值。

# c# - 带有 ASP.NET Web API 的 N-Teir 架构

> ID：14937966
> 
> 赞同：7
> 
> 时间：2013-02-18T13:54:34.200
> 
> 标签：c#, asp.net-web-api, n-tier-architecture

我只是想围绕这个概念。我编写了几个不同的 Web API，但它们总是被网站使用并通过 JSON 进行交互。我有一个关于当 Windows 服务使用 Web API 时如何构建实现的问题。

在这种情况下，已经有一个现有的数据库，所以我想使用实体框架的数据库优先方法。

我为模型创建了一个类库项目，并使用 Entity Framework 查看现有数据库并生成所有必需的类。

然后我创建一个 Web API 项目并将我的类库与所有模型添加到其中。到目前为止，我很好。

我的问题是，当我构建将与 Web API 交互的 Windows 服务时，如何从我的类库模型项目中访问这些类？我知道我可以将该项目添加到我的 Windows 服务中，但这似乎不是正确的方法，因为这几乎会绕过 Web API。

我想我的问题是，如果我想从我的 windows 服务创建一个 Employee 对象并将其传递给我的 Web API（以便它可以将其插入数据库），windows 服务如何在不将类库添加到Windows 服务项目？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-18T14:06:02.060

在 n 层解决方案中，您不会跨物理边界传递域对象，但您实现*的数据传输对象*(DTO) 只会保存消费者/调用者所需的信息。

通常，您将创建一个*共享库*，该库将包含整个*数据传输对象*，并且服务器和客户端都将引用它。

之后，就是使用 JSON 序列化器来序列化和/或反序列化您的*数据传输对象*。

域对象将始终映射到*数据传输对象*，因为它们比完整对象轻。给自己一个问题：如果消费者只需要某人的*姓名*和*第二个名字*，为什么您需要通过网络发送更多数据？

此外，避免客户端应用程序和服务中的服务器依赖性也很重要。

一些有用的提示：

*   了解什么是 DTO：[http](http://en.wikipedia.org/wiki/Data_transfer_object) ://en.wikipedia.org/wiki/Data_transfer_object和[http://martinfowler.com/eaaCatalog/dataTransferObject.html](http://martinfowler.com/eaaCatalog/dataTransferObject.html)

*   检查 AutoMapper 以及如何节省时间以将域对象映射到*数据传输对象*：[http ://automapper.org/](http://automapper.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T14:00:25.857

通常，您创建用于 Web API 的 exra 模型类。这些模型类通常只包含实体数据的一个子集。此外，这种区别允许您创建真正的 RESTful API。
在您的 Web API 控制器类中，会发生模型和实体之间的映射。
Windows 服务仅使用模型类引用项目，而不使用实体类引用项目。

# c++ - 强制 WSARecv 重叠

> ID：14937967
> 
> 赞同：0
> 
> 时间：2013-02-18T13:54:37.270
> 
> 标签：c++, winapi, overlap, winsock2, io-completion-ports

我正在尝试实现一个使用 IOCompletionPort 从其客户端读取的服务器。[我有一些与这个例子](http://www.codeproject.com/Articles/13382/A-simple-application-using-I-O-Completion-Ports-an)非常相似的东西。

如果我理解正确，这应该是我的设计：

1.  【主线程】创建监听socket，绑定监听
2.  [主线程] 创建一个事件并使用 WSAEventSelect 将其附加到套接字接受信号
3.  [Accept Thread] 等待事件并接受客户端
4.  [Accept Thread] 当客户端连接时，使用 CreateIOCompletionPort 与它一起使用 IOCompletion 队列
5.  [Accept Thread] accept 线程调用第一个 WSARecv 并带有重叠参数
6.  【Worker Threads】使用队列在WSARecv上实现leader-follower模式

在阅读了 WSARecv ( [Here)](http://msdn.microsoft.com/en-us/library/windows/desktop/ms741688%28v=vs.85%29.aspx)之后，我发现如果数据准备好，WSARecv 可能会立即返回数据。这似乎有点奇怪，因为这意味着如果客户端发送速度足够快，工作人员可以在 WSARecv 上循环而不返回 IO 队列——这可能导致客户端饥饿......

在此我的问题是：

1.  有没有办法“强制” WSARecv 不立即返回？我的意思是，100% 的时间返回 IO_PENDING？
2.  如果不是 - 什么是正确的设计，针对可扩展性进行了优化？

这就是我使用 WSARecv 的方式：

```
flags = 0;
receiveResult = WSARecv(clientSocket, &(olStruct->Buffer), 1, &bytesReceived, &flags, (OVERLAPPED*)olStruct, NULL); 
```

olStruct 是 OVERLAPPED 结构的扩展。

~~EDIT: I ended up reposting what I got from WSARecv using PostQueuedCompletionStatus. I'd love to hear other solutions though~~ See Answer

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-15T04:14:15.567

如果您已将句柄与完成端口相关联，`WSARecv()`则立即返回成功在语义上等同于`WSARecv()`返回挂起，**除非**您有：

*   成功时设置完成端口绕过，如[SetFileCompletionNotificationModes](https://msdn.microsoft.com/en-us/library/windows/desktop/aa365538(v=vs.85).aspx)中所述，或
*   您正在提供一个设置了位的有效 HANDLE，如hEvent 成员的[GetQueuedCompletionStatus中所述](https://msdn.microsoft.com/en-us/library/windows/desktop/aa364986(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T16:16:29.550

似乎当 WSARecv 立即完成时，它会将缓冲区和帖子返回到 IOCompletionPort 队列。

所以目前的设计仍然有效。

# c# - 解析 xml 谷歌日历事件

> ID：14937971
> 
> 赞同：0
> 
> 时间：2013-02-18T13:54:44.213
> 
> 标签：c#, xml, windows-phone, google-calendar-api

我正在尝试从此网址解析谷歌日历事件：[http](http://www.google.com/calendar/feeds/amchamlva%40gmail.com/public/full) ://www.google.com/calendar/feeds/amchamlva%40gmail.com/public/full ，这是我的代码：

```
 static IEnumerable<Event> getEntryQuery(XDocument xdoc)
    {
        return from entry in xdoc.Root.Elements().Where(i => i.Name.LocalName == "entry")
               select new Event
               {
                   EventId = entry.Elements().First(i => i.Name.LocalName == "id").Value,
                   Published = DateTime.Parse(entry.Elements().First(i => i.Name.LocalName == "published").Value),
                   Title = entry.Elements().First(i => i.Name.LocalName == "title").Value,
                   Content = entry.Elements().First(i => i.Name.LocalName == "content").Value,
                   Where = entry.Elements().First(i => i.Name.LocalName == "gd:where").FirstAttribute.Value,
                   Link = entry.Elements().First(i => i.Name.LocalName == "link").Attribute("href").Value,

               };
    }

using (StreamReader httpwebStreamReader = new StreamReader(e.Result))
            {
                var results = httpwebStreamReader.ReadToEnd();

                XDocument doc = XDocument.Parse(results);

                System.Diagnostics.Debug.WriteLine(doc);

                var myFeed = getEntryQuery(doc);
                foreach (var feed in myFeed)
                {
                    System.Diagnostics.Debug.WriteLine(feed.Content);

                }

            } 
```

它几乎可以正常工作，除了这个：

```
Where = entry.Elements().First(i => i.Name.LocalName == "gd:where").FirstAttribute.Value, 
```

我得到一个异常可能是因为它的值是空的，实际上我需要获取 valueString 属性值（例如在这种情况下为“某处”）

```
<gd:where valueString='Somewhere'/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T13:59:35.970

The *local* name of `<gd:where>` is just `where` - the `gd` part is the namespace alias.

Rather than using all of these `First` calls checking the local name, it would be *much* cleaner if you'd just use the right fully qualified name. For example:

```
XNamespace gd = "http://schemas.google.com/g/2005";
XNamespace atom = "http://www.w3.org/2005/Atom";

return from entry in xdoc.Root.Elements(gd + "entry")
       select new Event
       {
           EventId = (string) entry.Element(atom + "id"),
           Published = (DateTime) entry.Element(atom + "published"),
           Title = (string) entry.Element(atom + "title"),
           Content = (string) entry.Element(atom + "content"),
           Where = (string) entry.Element(gd + "where")
           Link = (string) entry.Element(atom + "link")
       }; 
```

(That's making educated guesses on the namespace based on some [documentation](https://developers.google.com/google-apps/calendar/v2/developers_guide_protocol). You should check this against your actual feed though.)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T13:57:40.610

'gd' 看起来像一个命名空间，看看如何在 LINQ to XML 中使用 xml 命名空间：

[http://msdn.microsoft.com/en-us/library/bb387093.aspx](http://msdn.microsoft.com/en-us/library/bb387093.aspx)

[http://msdn.microsoft.com/en-us/library/bb669152.aspx](http://msdn.microsoft.com/en-us/library/bb669152.aspx)

也许尝试一些类似的东西

```
XNamespace gdns = "some namespace here";
entry.Elements(gdns + "where") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-18T14:11:26.107

感谢您的帮助，它适用于这个简单的代码：

```
 //Where = entry.Elements().First(i => i.Name.LocalName == "where").Value,
   Where = entry.Elements().First(i => i.Name.LocalName == "where").Attribute("valueString").Value, 
```

稍后我将尝试实施您的建议以获得更好的代码实现；）

# c# - 将 DataTable 导出为 CSV 时出现逗号问题

> ID：14937984
> 
> 赞同：3
> 
> 时间：2013-02-18T13:55:27.893
> 
> 标签：c#, .net, wpf, csv, export-to-csv

我采用了一些将 DataTable 转换为 CSV 文件的代码。它似乎运作良好，除非在实际数据中使用逗号。在这种情况下有没有办法显示逗号？这就是我所做的：

```
StringBuilder sb = new StringBuilder();

IEnumerable<string> columnNames = dtResults.Columns
                                           .Cast<DataColumn>()
                                           .Select(column => column.ColumnName);
sb.AppendLine(string.Join(",", columnNames));

foreach (DataRow row in dtResults.Rows)
{
    IEnumerable<string> fields = row.ItemArray.Select(field => field.ToString());
    sb.AppendLine(string.Join(",", fields));
}

File.WriteAllText(saveFileDialog.FileName, sb.ToString()); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T14:00:22.847

如果字段包含逗号，则应将其放在双（或单）引号中。

您可以使用[FileHelpers 库](http://filehelpers.sourceforge.net/)来创建您的 CSV 文件，它应该负责正确转义。

如果您不想使用该库，重要的是：如果您有逗号，则必须将您的字段放在引号内，例如

```
ID, NAME
1, "Doe, John"
2, 'Doe, Jane' 
```

如果您的字段包含引号，则应使用附加引号对其进行转义：

```
3, "Anakin ""Darth Vader"", Skywalker"
4, 'O''Connor, Sinead' 
```

一个可能的解决方案：

```
static string CsvEscape(this string value) {
    if (value.Contains(",")) {
        return "\"" + value.Replace("\"", "\"\"") + "\"";
    }
    return value;
} 
```

然后在您的代码中：

```
IEnumerable<string> fields = row.ItemArray.Select(field => field.ToString().CsvEscape()); 
```

PS：根据[维基百科](http://en.wikipedia.org/wiki/Comma-separated_values)没有真正的 csv 规范，但[RFC 4180](https://www.rfc-editor.org/rfc/rfc4180)描述了一种经常使用的格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T14:32:57.890

我发布了以下修改后的代码，这将对您有所帮助。

```
StringBuilder sb = new StringBuilder();

            string[] val =  { "ramesh","suresh, Ganesh" };
            IEnumerable<string> columnNames = val;

            IList<string> objFinal = new List<string>();
            foreach (string v in columnNames)
            {
                string temp = v;
                if (temp.Contains(","))
                    temp = "\"" + v + "\"";

                objFinal.Add(temp);
            }
            sb.AppendLine(string.Join(",", objFinal.AsEnumerable<string>()));

            } 
```

CSV 支持双码之间的数据中的逗号。

您可以在以下单行代码的帮助下一次性附加双代码和逗号

```
IEnumerable<string> columnNames = dtResults.Columns
                                           .Cast<DataColumn>()
                                           .Select(column => column.ColumnName);

var res = columnNames.Aggregate((current, next) => "\"" + current + "\"" + ", " + "\"" + next + "\"");

File.WriteAllText(saveFileDialog.FileName, res.ToString()); 
```

# html - 缩放更改时“li”项目上的垂直线

> ID：14937990
> 
> 赞同：0
> 
> 时间：2013-02-18T13:56:05.383
> 
> 标签：html, css, google-chrome

我正在 Chrome 上进行测试。我的按钮在没有缩放的情况下看起来不错。

![无缩放](../Images/3c57522fac25a013cd3b269795f0d502.png)

```
<li class="active" id="site_content">
      <a href="#" id="site_content_link">Edit Content</a>
</li> 
```

这是我放大/缩小时的样子

![带变焦](../Images/4164e24832a5135c6bb3768e7afd5b0c.png)

这是CSS：

```
.sub_nav ul li.active, .sub_nav ul li:hover {
background: url("/assets/sub_nav_right.png") no-repeat scroll right 0;
padding: 0 11px 0 0;

.sub_nav ul li {
display: block;
float: left;
line-height: 16px;
margin: 0 0 0 28px;
}

.sub_nav ul li.active a, .sub_nav ul li:hover a {
background: url("/assets/sub_nav_left.png") no-repeat;
color: #FFFFFF;
display: block;
padding: 5px 0 5px 11px;
text-shadow: none;
}

.sub_nav ul li a {
font-family: arial;
font-weight: bold;
line-height: 16px;
} 
```

我在这里创建了一个 jsfiddle：http: [//jsfiddle.net/BdGA4/](http://jsfiddle.net/BdGA4/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:21:59.040

最好的解决方案是将 sub_nav_left.png 图像“切片”为 1px 宽的背景图像，并启用水平 (repeat-x) 设置。这将在所有情况下填充空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T15:26:38.347

我增加了右侧精灵的大小。而不是 11px 的宽度，它现在是 16px 的宽度。两个精灵现在重叠，因此您不会看到浏览器舍入像素导致的缩放错误。

```
Fixed fiddle 
```

[http://jsfiddle.net/BdGA4/2/](http://jsfiddle.net/BdGA4/2/)

# c - 使用 linux 编程在 C 中通过引用传递

> ID：14937993
> 
> 赞同：1
> 
> 时间：2013-02-18T13:56:07.367
> 
> 标签：c, linux, ubuntu

此代码在 C 中是否合法？我收到 & 符号错误。我正在使用适用于 Ubuntu 的 Eclipse C/C++ IDE 来简化此过程。

```
void is_done(int &flag , char* ptr)
{
    int i=0;
    for(i=0;i<3;i++)
    {
        if(*ptr[i][0]==*ptr[i][1]==*ptr[i][2]||*ptr[0][i]==*ptr[1][i]==*ptr[2][i])
        {
            flag=1;
            return;
        }
    }
    if(*ptr[0][0]==*ptr[1][1]==*ptr[2][2]||*ptr[0][2]==*ptr[1][1]==*ptr[2][0])
    {
        flag=1;
        return;
    }
} 
```

GCC 给我一个错误：

```
expected ‘;’, ‘,’ or ‘)’ before ‘&amp;’ token
ipttt.c /OS line 7  C/C++ Problem 
```

我真的不明白这个错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T13:57:39.767

C 没有引用。您的代码是 C++。在 C 中，您必须使用指针：

```
void is_done(int *flag , char* ptr)
{
    ...
    *flag = 1;
    ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T13:57:51.260

C 中没有“按引用传递”：那是 C++。C 中唯一可用的选项是通过指针传递

```
void is_done(int *flag , char* ptr)
{
    ...
    *flag=1;
    ...
} 
```

您还需要`&&`使用这些链`==`：它们可以编译，但它们不会执行您希望它们执行的操作：

```
// DOES NOT WORK !!!
if(*ptr[0][0]==*ptr[1][1]==*ptr[2][2]||*ptr[0][2]==*ptr[1][1]==*ptr[2][0]) 
```

你需要这个：

```
if((*ptr[0][0]==*ptr[1][1] && *ptr[0][0]==*ptr[2][2]) || (*ptr[0][2]==*ptr[1][1] && *ptr[0][2]==*ptr[2][0])) {
    ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T13:59:21.217

`&`在声明中使用字符的引用是 C++ 的事情。要将“对象”作为 C 中的引用传递，您必须使用指针：

```
void is_done(int *flag , char* ptr)
{
    ...

    *flag = 1;

    ...
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T14:01:49.997

你想要的是像这样传递一个指向 int 的指针：

```
void is_done(int *flag , char* ptr)
{
            // Then you must deference the variable to set the value
    *flag = 1; // or whatever value you want 
```

然后你会用这样的标志调用你的函数：

```
int main()
{
   int flag = 0;
   char * ptr = NULL;
   ...
   is_done(&flag, ptr);  // Note that's not "reference" here, that's the address of
                         // your local flag variable 
```

当然，您可以只使用指针，但由于您试图“通过引用传递”，我假设您一开始并没有在代码中使用指针。

# android - 在 XML 中缩放和裁剪图像

> ID：14937999
> 
> 赞同：4
> 
> 时间：2013-02-18T13:56:28.220
> 
> 标签：android, android-layout, android-imageview

我正在尝试同时缩放和裁剪图像并从左到右屏幕边缘显示它。我收到的图像比用户屏幕宽一点，我可以像这样缩放它（XML）：

```
<ImageView
        android:id="@+id/category_image_top"
        android:layout_width="match_parent"
        android:layout_height="170dp"
        android:maxHeight="170dp"
        android:scaleType="centerCrop"
        android:adjustViewBounds="true" 
        android:focusable="false"
        /> 
```

但这就是我得到的： ![我得到了什么](../Images/ce233d21363fab46a3cb881fd89cdcef.png)

我想像这样将图像对齐到右上角： ![我想要的是](../Images/b65a53c10f45939a19999f47db8111bf.png)

这可能吗？我已经尝试了所有 scaleTypes 但注意到作品，图像要么缩放以适应 X 和 Y（fitXY，fitStart）或图像裁剪但居中（centerCrop）。我需要类似 android:scaleType="cropStart"

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-28T07:01:21.227

```
<ImageView
        android:id="@+id/category_image_top"
        android:layout_width="match_parent"
        android:layout_height="170dp"
        android:maxHeight="170dp"
        android:scaleType="centerCrop"
        android:paddingLeft="half of your screen width"
        android:paddingBottom="half of your screen height"
        android:adjustViewBounds="true" 
        android:focusable="false"
/> 
```

您可以设置填充以向左或向右移动图像，也可以设置上下填充以上下移动

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T09:38:43.530

由于我没有找到通过 xml（视图）处理这种情况的方法，我转向（如 @serenskye 建议的那样）编写代码。这是我的代码，希望对您有所帮助（ps：我已经稍微改变了我的逻辑，我想按宽度调整图像，所以我将它缩放到预定义的 imageWidght，然后将其裁剪为 imageHeight）

```
//bm is received image (type = Bitmap)
Bitmap scaledImage = null;
float scaleFactor = (float) bm.getWidth() / (float) imageWidth;

//if scale factor is 1 then there is no need to scale (it will stay the same)
if (scaleFactor != 1) {
    //calculate new height (with ration preserved) and scale image
    int scaleHeight = (int) (bm.getHeight() / scaleFactor);                     
    scaledImage = Bitmap.createScaledBitmap(bm, imageWidth, scaleHeight, false);
}
else {
    scaledImage = bm;
}

Bitmap cropedImage = null;
//if cropped height is bigger then image height then there is no need to crop
if (scaledImage.getHeight() > imageHeight)
    cropedImage = Bitmap.createBitmap(scaledImage, 0, 0, imageWidth, imageHeight);
else
    cropedImage = scaledImage;

iv.setImageBitmap(cropedImage); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-08T11:36:03.570

添加

```
android:layout_gravity="center" 
```