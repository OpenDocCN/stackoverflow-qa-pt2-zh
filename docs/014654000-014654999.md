# StackOverflow 问答 14654000-14654999

# php - 解析 JSON Ajax 响应

> ID：14654004
> 
> 赞同：0
> 
> 时间：2013-02-01T19:56:22.583
> 
> 标签：php, javascript, jquery, ajax, json

我在解析 JSON 响应时遇到了麻烦。我已经这样做了很多次，但这不起作用，原因我无法辨别。这是我正在做的事情：

在任何人提出建议之前 - 由于我正在处理的项目的一些要求，我必须使用服务器端的谷歌地理编码网络服务，我不能在客户端做这一切。

我将 PHP 用于服务器端部分。我正在使用 AJAX（通过 jQuery）将位置发送到服务器，获取响应并将其返回编码为 JSON。这是服务器端代码：

```
<?php
if(!empty($_POST['theLocation']))
{
    $loc = urlencode($_POST['theLocation']);

    $response = file_get_contents("http://maps.googleapis.com/maps/api/geocode/json?address=$loc,+CA&sensor=false");
    echo  json_encode($response);
}
?> 
```

这是客户端调用，其中 theLocation 是位置名称：

```
 var postdata = "theLocation=" + encodeURIComponent(theLocation);
$.ajax( {
    type : "POST",
    url : "GeoEncode.php",
    data :postdata ,
    dataType : "JSON",
    success : function(data) {
        data = $.parseJSON(data);

        lat = data.results[0].geometry.location.lat;
        lng = data.results[0].geometry.location.lng;

    },
    error: function (request, status, error) {
        log("Error: getLatLong Status - " + status + " ErrorText - " + error);
    }
}); 
```

当我尝试访问时，`data.results[0]`我得到了错误`Uncaught TypeError: Cannot read property '0' of undefined`。这显然意味着没有结果属性。但是，如果我这样做，`console.log(data)`这就是我得到的：

```
{
    "results": [
        {
            "address_components": [
                {
                    "long_name": "Halifax",
                    "short_name": "Halifax",
                    "types": [
                        "locality",
                        "political"
                    ]
                },
                {
                    "long_name": "Halifax",
                    "short_name": "Halifax",
                    "types": [
                        "administrative_area_level_3",
                        "political"
                    ]
                },
                {
                    "long_name": "Halifax Regional Municipality",
                    "short_name": "Halifax Regional Municipality",
                    "types": [
                        "administrative_area_level_2",
                        "political"
                    ]
                },
                {
                    "long_name": "Nova Scotia",
                    "short_name": "NS",
                    "types": [
                        "administrative_area_level_1",
                        "political"
                    ]
                },
                {
                    "long_name": "Canada",
                    "short_name": "CA",
                    "types": [
                        "country",
                        "political"
                    ]
                }
            ],
            "formatted_address": "Halifax, NS, Canada",
            "geometry": {
                "bounds": {
                    "northeast": {
                        "lat": 44.7035312,
                        "lng": -63.55963089999999
                    },
                    "southwest": {
                        "lat": 44.5949302,
                        "lng": -63.68627009999999
                    }
                },
                "location": {
                    "lat": 44.6488625,
                    "lng": -63.5753196
                },
                "location_type": "APPROXIMATE",
                "viewport": {
                    "northeast": {
                        "lat": 44.7035312,
                        "lng": -63.55963089999999
                    },
                    "southwest": {
                        "lat": 44.5949302,
                        "lng": -63.68627009999999
                    }
                }
            },
            "types": [
                "locality",
                "political"
            ]
        }
    ],
    "status": "OK"
} 
```

这是有效的 JSON，显然有一个 results 属性。我不知道为什么我会遇到这个问题，我一定是遗漏了一些东西，但是通过我的调试我还没有找到什么。如果有人可以提供任何建议，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-01T19:59:19.477

你正在设置`dataType: 'json'`. 这意味着 jQuery 将为您解析结果为 JSON。

丢失`data = $.parseJSON(data);`线路，然后它应该工作。

此外，正如@SLaks 指出的那样：在您的 PHP 中，*已经*`$response`是JSON 格式。没必要。只是。*`json_encode``echo $response`*

# python - 如何使用 mock 的 @patch 模拟在单独的 Python 模块中定义的函数

> ID：14654009
> 
> 赞同：9
> 
> 时间：2013-02-01T19:56:38.643
> 
> 标签：python, mocking

我正在尝试使用 mock 和 @patch 装饰器为 Python 应用程序构建测试。

给定以下目录结构：

```
 |-- mypackage
  |   |-- mymodule
  |   |   |-- __init__.py
  |   |   \-- somefile.py
  |   \-- myothermodule
  |       |-- tests
  |       |   |-- __init__.py
  |       |   \-- test_func_to_test.py
  |       \-- __init__.py
  \-- __init__.py 
```

文件内容在哪里：

* * *

```
#mypackage/mymodule/somefile.py

def some_function():
    return 'A' 
```

* * *

```
#mypackage/myothermodule/__init__.py

from mypackage.mymodule.somefile import some_function

def func_to_test():
    return some_function() 
```

* * *

```
#mypackage/myothermodule/tests/test_func_to_test.py

from unittest import TestCase
from mock import patch

class TestFunc_to_test(TestCase):
    def test_func_to_test(self):
        from mypackage.myothermodule import func_to_test
        self.assertEqual('A', func_to_test())

    @patch('mypackage.mymodule.somefile.some_function')
    def test_func_to_test_mocked(self, some_mock_function):
        from mypackage.myothermodule import func_to_test
        some_mock_function.return_value = 'B'
        self.assertEqual('B', func_to_test()) 
```

* * *

我遇到的问题是，虽然第一个测试通过（test_func_to_test），但第二个测试（test_func_to_test_mocked）没有（由于 AssertionError）。

我已经能够使用相同的方法从“内置”模块（例如 requests.get）模拟函数，但是当我尝试从我的一个函数修补一个函数时，我似乎无法让 @patch 工作模块...

任何帮助，将不胜感激 ：）

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-01T20:00:44.233

`mypackage.myothermodule`已导入，因此该名称`some_function`已绑定在该模块中。您需要在调用它的模块中模拟该名称的使用：

```
@patch('mypackage.myothermodule.some_function') 
```

您也可以重新加载`mypackage.myothermodule`：

```
import mypackage.myothermodule
reload(mypackage.myothermodule) 
```

# ruby-on-rails - Squeel 和 rails... 动态 where 子句

> ID：14654010
> 
> 赞同：3
> 
> 时间：2013-02-01T19:56:42.350
> 
> 标签：ruby-on-rails, ruby-on-rails-3, squeel

在 Rails 应用程序中使用 Squeel，我有一个条件哈希：

```
{'trans' => 'manual'} 
```

我最终计划移动到一个数组中......所以我也可以有一个操作员分配。

```
[[field,operator,value][field,operator,value]] 
```

我想使用一个模型方法，现在我省略了运算符，我只是在尝试 == 让它工作......但是，我下面的内容不起作用。

```
def self.with_conditions(conditions)
    joins{car}.where do
      conditions.map {|key,value| (key==value) }.inject(:&)
    end
end 
```

我也试过这个：

```
def self.with_conditions(conditions)
  joins{car}.where do
    query = nil

    conditions.each do |key, value|
      q = (key == value)

      if query
        query &= q
      else
        query = q
      end
    end

    query     
  end
end 
```

那么，我如何让它与 == 一起使用，然后我最终如何让它与动态运算符一起使用呢？谢谢

在控制台中，我的 SQL 在我的任何条件下都不会读取...例如：

在控制台中：

```
> Timeslip.with_conditions({'car.year'=>'1991'})

SELECT "timeslips".* FROM "timeslips" INNER JOIN "cars" ON "cars"."id" = "timeslips"."car_id" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T20:21:14.310

您需要以编程方式构建 Squeel 查询。例如：

```
def self.with_conditions(conditions)
  conditions.map do |col, str|
    Squeel::Nodes::Predicate.new(Squeel::Nodes::Stub.new(col), :matches, str) # (email.matches "user@example.com")
  end.inject do |t, expr|
    t & expr # joins each expression from the .map above with & - to be converted to AND in the sql
  end.tap do |block|
    return where{(block)} # pass the constructed expression to Squeel
  end
end 
```

在我的`User::User`模型上，我可以运行

```
User::User.with_conditions({email: "user@example.com", first_name: "Deefour"}).to_sql 
```

我会得到

```
SELECT "user_users".* FROM "user_users"  WHERE (("user_users"."email" LIKE 'user@example.com' AND "user_users"."first_name" LIKE 'Deefour')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-03T12:12:32.717

我不知道这是否有帮助，但我是使用这个辅助方法这样做的：

```
 def query_for_matches(key, value)
    stub = Squeel::Nodes::Stub.new(key)
    Squeel::Nodes::Predicate.new(stub, :matches, "%#{value}%")
  end 
```

您有来自某个请求的参数散列：

```
 dynamic_params = {'username' => 'some_name', 'email' => 'email@example.com'} 
```

`where`然后我在循环中将它与 's 链一起使用：

```
 query = SomeModel #could be User, etc
  dynamic_params.each_pair {|key,value| query = query.where(query_for_matches(key, value)) } 
```

然后，您可以传递`query`到您的视图或其他任何内容。我只在轨道上工作了几个星期，所以我不确定这是否是*最佳做法*，但它确实有效。

# jquery - 链接/按钮禁用，直到单击另一个按钮

> ID：14654013
> 
> 赞同：0
> 
> 时间：2013-02-01T19:56:48.327
> 
> 标签：jquery

我正在寻找一种方法来禁用左侧的所有菜单项。

在他们的每个 div 上，都有一个执行按钮和下一步按钮。在单击执行按钮之前，需要禁用下一个按钮。

除了启用下一个按钮之外，还需要启用菜单中的下一个项目并且可以单击。

单击下一步也将转到左侧菜单上的下一项。

**Javascript：**

```
// nav
$(".nav-content").hide();
$("ul.nav li:first").addClass("active").show();
$(".nav-content:first").show();

// onclick event
$("ul.nav li").click(function() {
    $("ul.nav li").removeClass("active");
    $(this).addClass("active");
    $(".nav-content").hide();

    var activenav = $(this).find("a").attr("href");
        $(activenav).show();
        return false;
}); 
```

**HTML**

```
<div id="wrap">

    <ul class="nav">
        <li><a href="#step1"><span>1</span> ONE</a></li>
        <li><a href="#step2"><span>2</span> TWO</a></li>
        <li><a href="#step3"><span>3</span> THREE</a></li>
    </ul>

    <div class="nav-container"> 

    <div id="step1" class="nav-content"> 
        <p>ONE</p>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>

        <button class="execute" onclick="">Execute</button>
        <button class="next" onclick="">Next</button>

    </div> <!-- /step1 -->

    <div id="step2" class="nav-content"> 
        <p>TWO</p>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>

        <button class="execute" onclick="">Execute</button>
        <button class="next"  onclick="">Next</button>

    </div> <!-- /step2 -->

    <div id="step3" class="nav-content"> 
        <p>THREE</p>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>

        <button class="execute" onclick="">Execute</button>
        <button class="next"  onclick="">Next</button>

    </div> <!-- /step3 --> 
```

**CSS**

```
#wrap {
    width: 100%;
}
#wrap ul.nav {
    list-style: none;
    padding: 0;
    margin: 0;
    width: 250px;
    float: left;
}
#wrap ul.nav li {
    min-height: 60px;
    background-color: #2b6ed6;
    border-bottom: 1px solid #92b4ea;
}
#wrap ul.nav li span {
    position: relative;
    vertical-align: middle;
    margin-right: 5px;
    font-size: 40px;
}
#wrap ul.nav li a {
    color: #fff;
    display: block;
    padding: 20px 10px;
    text-decoration: none;
    line-height: 20px;
    position: relative;
    top: 0px;
    font-size: 99%;
}
#wrap .enabled {
}
#wrap .disabled {
}
#wrap ul.nav li a:focus {
    outline: none;
}
/*#wrap ul.nav li.active, */
 #wrap ul.nav li.active a {
    color: #000;
}
#wrap ul.nav li.active a:after {
    left: 100%;
    border: solid transparent;
    content:" ";
    height: 0;
    width: 0;
    position: absolute;
    pointer-events: none;
}
#wrap ul.nav li.active a:after {
    border-color: rgba(136, 183, 213, 0);
    border-left-color: #2b6ed6;
    border-width: 30px;
    top: 50%;
    margin-top: -30px;
}
#wrap .nav-container {
    float: left;
    margin: 0;
    padding: 0;
    width: 60%;
    border-right: 1px solid #ccc;
    border-bottom:1px solid #ccc;
}
#wrap .nav-content {
    margin: 0;
    padding: 0;
}
#wrap .nav-content p {
    padding: 0 0 0 35px;
} 
```

我也把它放在[http://jsfiddle.net/XVLaX/1/](http://jsfiddle.net/XVLaX/1/)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T03:31:46.913

根据我对这个问题的理解，这需要一些东西来完成这项工作。

为了使以下 JS 代码正常工作，对现有 HTML 进行了一些先决条件更改，我将 ID 添加到列表项中。

```
<ul class="nav">
    <li id="nav-step1"><a href="#step1"><span>1</span> ONE</a></li>
    <li id="nav-step2"><a href="#step2"><span>2</span> TWO</a></li>
    <li id="nav-step3"><a href="#step3"><span>3</span> THREE</a></li>
    <li id="nav-step4"><a href="#step4"><span>4</span> FOUR </a></li>
    <li id="nav-step5"><a href="#step5"><span>5</span> FIVE</a></li>
    <li id="nav-step6"><a href="#step6"><span>6</span> SIX</a></li>
    <li id="nav-step7"><a href="#step7"><span>7</span> SEVEN</a></li>
    <li id="nav-step8"><a href="#step8"><span>8</span> EIGHT</a></li>
</ul> 
```

还有一些添加到你的 CSS 的前置条件，我添加了一个禁用类来在视觉上区分状态。

```
#csp-wrap ul.nav li.disabled a,
#csp-wrap ul.nav li.active a {
    cursor: default;
}

#csp-wrap .disabled {
    filter: alpha(opacity=50);
    opacity: .5;
} 
```

首先，您需要设置一个初始状态，其中除第一个之外的所有列表项都被禁用，并且所有下一个按钮都被禁用

```
// get all list items
var listItems = $("ul.nav li");

// disable all list items
listItems.addClass('disabled');

// enable the first list item
listItems.first().removeClass('disabled');

// disable all next buttons
$('.next').prop('disabled', true); 
```

为启用关联的下一步按钮的执行按钮设置单击处理程序。

```
// execute click handler
$('.execute').click(function(event) {
   // Get the associated next button
    $(this).siblings('.next').prop('disabled', false);
}); 
```

为下一个按钮创建一个单击处理程序以处理进入下一步。

```
// next click handler
$('.next').click(function(event) {
    // get the associated nav item
    var navId = '#nav-' + $(this).parents('.nav-content').attr('id');
    // enable the next list item
    $(navId).next().removeClass('disabled');
    // trigger click on the next list item to step to it
    $(navId).next().trigger('click');
}); 
```

最后，修改 onclick 事件以不考虑活动或任何禁用的列表项。

```
// onclick event
$("ul.nav").on({
    click: function () {
        $("ul.nav li").removeClass("active");
        $(this).addClass("active");
        $(".nav-content").hide();

        var activenav = $(this).find("a").attr("href");
        $(activenav).show();
        return false;
    }
}, 'li:not(.disabled,.active)'); 
```

您可以在这里的分叉小提琴中尝试一下：http: [//jsfiddle.net/UZwqx/3/](http://jsfiddle.net/UZwqx/3/)

# ruby - Ruby TinyTds 挂在 Result.each 行

> ID：14654020
> 
> 赞同：3
> 
> 时间：2013-02-01T19:57:04.947
> 
> 标签：ruby, sql-server, tiny-tds

我有以下代码：

```
def self.GetValuesFromDB(dataServer,database,sqlString)
    mprids = Array.new
    dbResult = Helper.CallDB(dataServer,database,sqlString)

    client = TinyTds::Client.new(:dataserver => dataServer, :database => database, :timeout => 900)

    dbResult = client.execute(sqlString)

    dbResults.each do |result| # hangs on this line for some SP calls
        mprids.push(result[0])
    end

    client.close
    return mprids
  end 
```

它有时会挂在这条线上：

dbResults.each 执行 |result| # 在这条线上挂起一些 SP 调用

取决于我打电话给哪个 SP。这很奇怪，因为我调用的 SP 都返回相同的数据类型列，所以

有任何想法吗？

# objective-c - 如何在 Iphone 4 和 Iphone 5 中显示不同的 UIImage？

> ID：14654025
> 
> 赞同：0
> 
> 时间：2013-02-01T19:57:35.017
> 
> 标签：objective-c, ios4

如何在 Iphone 4 和 Iphone 5 中显示不同的 UIImage？

我想在 iphone 3,4 和 iphone 5 上显示不同尺寸的图像。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T20:10:43.667

UIKit 支持`@2x`设备修饰符的规范，以便通过该`imageNamed`方法选择启用视网膜的图像版本。

这将允许管理同一图像的非视网膜版本和视网膜版本。不幸的是，没有自动处理 iPhone5 版本的图像的规定（Default.png 除外）。你必须自己做。

或者，您可以使用[此类别](https://gist.github.com/3782351)来`-568h@2x`为您的 iPhone5 特定图像使用设备扩展：

```
+ (UIImage*)imageNamedForDevice:(NSString*)name {

if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
{
if (([UIScreen mainScreen].bounds.size.height * [UIScreen mainScreen].scale) >= 1136.0f)
{
  //Check if is there a path extension or not
  if (name.pathExtension.length) {
    name = [name stringByReplacingOccurrencesOfString: [NSString stringWithFormat:@".%@", name.pathExtension]
                                           withString: [NSString stringWithFormat:@"-568h@2x.%@", name.pathExtension ] ];

  } else {
    name = [name stringByAppendingString:@"-568h@2x"];
  }

  //load the image e.g from disk or cache
  UIImage *image = [UIImage imageNamed: name ]; 
  if (image) {
    //strange Bug in iOS, the image name have a "@2x" but the scale isn't 2.0f
    return [UIImage imageWithCGImage: image.CGImage scale:2.0f orientation:image.imageOrientation];
  }

 }
}

return [UIImage imageNamed: name ];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T06:55:08.063

这是一种横向的方式，但也非常快：

```
int screenHeight = self.view.bounds.size.height;
if (screenHeight<500) {
    //Show the UIImage for iPhone 4.
}
else {
    //Show the UIImage for iPhone 5.
} 
```

# python - pySerial 发送 ASCII 数据但接收设备没有响应

> ID：14654031
> 
> 赞同：0
> 
> 时间：2013-02-01T19:57:43.753
> 
> 标签：python, pyserial

我一直在尝试让 pySerial 向设备（体重秤和质量流量控制器）发送命令，它们都使用 ASCII 格式，并且都不响应发送的命令。但是，我可以使用终端轻松控制两者。我创建了一个虚拟 comport 以查看从 pySerial 发送到我的设备的内容，但它发送了正确的数据。（T\r\n 发送为 T 13 10，与终端发送的相同）所以我不知所措。似乎 pySerial 向我的设备发送了正确的数据，但无论出于何种原因都没有被正确接受，奇怪的是我可以使用 pySerial 轻松地从设备中读取数据。只是写作部分失败了，有什么建议可以解决这个问题吗？

代码是 myserialport.write('T\r\n')

我曾尝试使用flush（）和flushOutput（），但也没有成功，我也尝试在一个循环中连续发送命令，但它没有工作。这不是硬件问题，因为我可以使用终端程序控制设备，并且仅不适用于 pySerial ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T20:41:31.307

```
for i in data:
    PID.write(i)
    time.sleep(1) 
```

您在终端中键入比串行端口写入慢，并且需要时间来读取每个字符。与 PC 相比，规模（或其他）通常非常慢。

# code-metrics - 检测应用程序更改的影响

> ID：14654036
> 
> 赞同：3
> 
> 时间：2013-02-01T19:58:01.080
> 
> 标签：code-metrics

我有一项任务，其中包括创建一种方法来检测应用程序更改的影响。谁能帮我一些指示？我不知道从哪里开始，需要有人让我走上正轨。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T09:53:05.027

对于 .NET 平台，您可以使用工具[NDepend](http://www.ndepend.com/)来检测 .NET 应用程序中更改的影响（免责声明：我是该工具的主要开发人员）。

NDepend 提供了编写 C# LINQ 查询来查询您的代码库的工具，还可以查询您的代码库的 2 个不同版本之间的差异。提供了大约[200 个默认 LINQ 查询](http://www.ndepend.com/DefaultRules/webframe.html)（代码规则），您可以轻松编写自己的查询。

例如下面的默认代码规则，列出了两个版本之间变得更复杂的方法：

```
// <Name>Avoid making complex methods even more complex (Source CC)</Name>
// To visualize changes in code, right-click a matched method and select:
//  - Compare older and newer versions of source file
//  - Compare older and newer versions disassembled with Reflector

warnif count > 0 
from m in JustMyCode.Methods where
 !m.IsAbstract &&
  m.IsPresentInBothBuilds() &&
  m.CodeWasChanged()

let oldCC = m.OlderVersion().CyclomaticComplexity
where oldCC > 6 && m.CyclomaticComplexity > oldCC 

select new { m,
    oldCC ,
    newCC = m.CyclomaticComplexity ,
    oldLoc = m.OlderVersion().NbLinesOfCode,
    newLoc = m.NbLinesOfCode,
} 
```

结果可以在 Visual Studio 或 HTML+js 报告中实时显示：

![使用 NDepend 区分复杂度](../Images/4ba32d89e4b3a1c3044bbaa023bfa653.png)

在规则组**代码质量回归**和**代码差异摘要**中，许多其他默认代码规则将帮助您列出差异/更改在代码质量、代码结构和代码可维护性方面的影响。[14 天的全功能试用版可供下载](http://www.ndepend.com/NDependDownload.aspx)。

# css - div在体内居中

> ID：14654038
> 
> 赞同：3
> 
> 时间：2013-02-01T19:58:12.283
> 
> 标签：css

我有这个html：

```
<body>

<div id="maindiv" class="rounded">
something written
</div>

</body> 
```

用这个CSS：

```
body {
background-image: url('stjohnhusimages/green gradient.png');
background-repeat: no-repeat;
width:1024px;
height:1375px;
background-size: cover;
text-align:center;
}

#maindiv {
width:900px;
height:1275px;
margin-left: auto;
margin-right: auto;
margin-top: 40px;
background-color:#404853;
} 
```

但主 div 仍然向左对齐。想知道我做错了什么。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T20:03:21.090

如果您对身体施加约束，则 div 只会在其中居中。

宽度/高度应该在 div 上设置，而不是在 body 上。

```
body {
background-image: url('stjohnhusimages/green gradient.png');
background-repeat: no-repeat;
background-size: cover;
text-align:center;
} 
```

[演示](http://jsfiddle.net/tqT6W/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T20:08:55.557

没有必要对 body 有一个固定的宽度大小，如果 body 是固定宽度的，内部 div 将不会居中，并且取决于它的大小。

对于 div 居中应该删除 body 的固定宽度

```
body {
background-image: url('stjohnhusimages/green gradient.png');
background-repeat: no-repeat;
background-size: cover;
text-align:center;
} 
```

# sqlite - SQlite3 查询：查找不属于值列表的行。优化

> ID：14654040
> 
> 赞同：2
> 
> 时间：2013-02-01T19:58:23.487
> 
> 标签：sqlite

我刚刚读了一个问题，正是我正在寻找的： [SO original question](https://stackoverflow.com/questions/3203534/query-find-rows-that-do-not-belong-to-a-list-of-values)

> 让我们考虑一下我有一个表“Tab”，其中有一列“Col”
> 
> 表'Tab'有这个数据 -
> 
> ```
> Col
> 1
> 2
> 3
> 4
> 5 
> ```
> 
> 如果我有一组值（2,3,6,7）。我可以通过使用查询来查询表和列表中存在的值
> 
> ```
> Select Col from Tab where col IN (2,3,6,7) 
> ```
> 
> 但是，如果我想返回列表中不存在于表中的值，即在这种情况下仅返回 (6,7)。我应该使用什么查询？

我找到了几种涉及创建临时表的解决方案，但在那里找到的最好的解决方案（至少更短，我想也更快）适用于 SQL Server，并且在我看来不适用于 SQLite3，因为我需要。

> SQL Server 2008 方法
> 
> ```
> SELECT N FROM (VALUES(2),(3),(6),(7)) AS D (N)
> EXCEPT
> Select Col from Tab 
> ```

SQLite 3有什么替代方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T23:13:28.513

在 SQLite 中，您可以`SELECT`不使用`FROM`子句来仅返回一条固定记录。要获取多条记录，请将它们与`UNION ALL`（比`UNION`不检查重复项稍快）：

```
SELECT 2 AS Col UNION ALL
SELECT 3        UNION ALL
SELECT 6        UNION ALL
SELECT 7                 
EXCEPT
SELECT Col FROM Tab 
```

# ruby-on-rails-3 - 使用数据网格了解 Rails 3 路线

> ID：14654049
> 
> 赞同：0
> 
> 时间：2013-02-01T19:58:54.933
> 
> 标签：ruby-on-rails-3, datagrid

我想更深入地了解 Rails 3 路由 - 以解决我遇到的问题。我正在尝试使用数据网格 gem。我有这个：

```
class UsersController < ApplicationController
  def index
    @admin_console = AdminConsole.new(params[:admin_console])
    ... 
```

然后在用户的 index.html.erb 中：

```
<%= form_for @admin_console, :html => {:method => :get} do |f| -%>
  <% @admin_console.filters.each do |filter| -%>
       ... 
```

我得到一个错误，“admin_consoles_path”是一个未定义的方法。

在路线中，我只有这个：

```
resources :users 
```

我没有 AdminConsoleController；我只有一个模型。如果需要，我想了解为什么我需要在路由中使用 AdminConsole。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T20:13:06.920

form_for 助手正在寻找 admin_consoles_path，因为您使用的是助手的缩短版本。

[尤其](http://guides.rubyonrails.org/form_helpers.html)是第 2.3 节，解释了使用 form_for 时实际发生的情况

```
## Creating a new article
# long-style:
form_for(@article, :url => articles_path)
# same thing, short-style (record identification gets used):
form_for(@article) 
```

我相信您需要一个控制器操作来创建 AdminConsole，但如果您在上面的示例中指定 url，它不一定需要它自己的控制器（尽管它可能不是最佳实践）。

# r - 一个核心上的所有作业都因 R 多核而失败

> ID：14654051
> 
> 赞同：4
> 
> 时间：2013-02-01T19:58:58.870
> 
> 标签：r, multicore, mclapply

我在一长串列表中使用 R 多核。我在列表上调用`mclapply`，它使用了我机器上的 12 个内核。

当我的列表有大约 1000 个元素时，它运行良好。当我的列表长于约 2000 个元素时（我不确定这种行为会在多长时间内生效），那么提交给核心 5 的所有作业都会失败。

[（我通过向该网站](http://oeis.org/search?q=5%2C17%2C29%2C41%2C53%2C65%2C77%2C89%2C101%2C113%2C125&language=english&go=Search)提交列表元素 ID 发现了这一点。）

我在几个节点上试过这个，但我总是收到以下警告：

```
Warning message:
In mclapply(h.list, train_and_predict, learn.bias = F, ntree = ntree,  :
  scheduled core 5 encountered error in user code, all values of the job will be affected 
```

**问：为什么只有一个核心会失败？**

任何帮助将不胜感激。

PK

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-13T09:20:31.700

我认为当至少一个数据激活代码中的错误时，就会发生这种情况。`multicore`无法恢复，并且该核心上的所有数据都已损坏。`mclapply`将数据均匀地分配到所有节点上，如果在一个节点上甚至一个数据失败。

我建议以下解决方案：从`M`数据`N`项开始；如果失败，则逐渐减少`M`，直到它起作用；那么`M+1`基准是错误的。仅使用 -th 数据串行运行您的代码（即不使用`mclapply`），`M+1`看看它在哪里失败。那么这就是错误。

# entity-framework - 如何禁用代码优先迁移

> ID：14654055
> 
> 赞同：89
> 
> 时间：2013-02-01T19:59:19.890
> 
> 标签：entity-framework, migration, code-first

我在 EF5 中有一个代码优先的实体模型。但我想手动管理数据库更改——我不希望 EF 修改我现有的数据库及其所有数据。但是当我在 EF 映射和数据库中进行并行更改时，EF 拒绝正常运行，告诉我需要先使用代码迁移。我该如何关闭它？

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2015-04-01T15:26:00.493

将 Database.SetInitializer 设置为 null。

```
public class DatabaseContext: DbContext
{
    //the base accepts the name of the connection string provided in the web.config as a parameter
    public DatabaseContext()
        : base("DatabaseContext")
    {
        //disable initializer
        Database.SetInitializer<DatabaseContext>(null);
    } 
```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2016-11-11T08:06:16.563

所以我找到的最完整的答案是：

1.  删除`Migrations`项目中的文件夹。
2.  `Database.SetInitializer<DatabaseContext>(null);`在 DatabaseContext 初始化程序中设置。
3.  删除`__MigrationHistory`数据库中的表。对于 EF6+，该表位于下面，`Tables`但对于早期版本，它位于`System Tables`.
4.  构建并运行。
5.  利润。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2013-02-01T20:02:10.703

如果您想完全关闭迁移：

[https://stackoverflow.com/a/9709407/141172](https://stackoverflow.com/a/9709407/141172)

但是，我发现启用代码优先迁移会更好，但使用`-Script`选项让 EF 为我创建一个数据库更改脚本，我可以手动将其应用于每个数据库（开发、QA、生产）：

```
Update-Database -Script -ProjectName MyProject -StartupProjectName MyProject 
```

这样 EF 将为我创建更改脚本，并且我仍然可以完全控制正在应用的更改。我像任何其他源代码一样对更改脚本进行版本控制。

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2013-08-08T09:13:55.220

如果您已经使用过 Migrations，那么仅更改 Initializer 将无济于事。您需要转到 Management Studio，打开您的数据库表，转到`System Tables`文件夹并删除`__MigrationHistory`位于那里的表（对于 EF6 及更高版本，它位于直接下方`Tables`）。这将永久禁用迁移。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-09-10T02:59:54.290

我刚刚解决了这个“问题”

1.  从数据库中删除表“_MigrationHistory”。
2.  从项目中删除“迁移”文件夹。
3.  更新 EDMX 文件。
4.  清理项目并重建它。

我的环境配置如下

```
1\. Visual Studio 2017 15.8.2
2\. ASP NET MVC project
3\. .NET Framework 4.6.1
4\. Entity Framework 6.2.0 
```

# c# - 使用Linq根据属性分组对象列表？

> ID：14654056
> 
> 赞同：27
> 
> 时间：2013-02-01T19:59:22.203
> 
> 标签：c#, .net, list, linq, group-by

我有一个对象：

```
public class SiteInfo
        {
            public string Title { get; set; }
            public string URL { get; set; }
            public string Type { get; set; }     
        } 
```

我用来创建一个列表： var sites = new List();

```
 foreach (SPWeb site in web.GetSubwebsForCurrentUser())
        {
            string sitetype = getConfigurationKey(site, "siteType");
            //If sites have a site type then add to list
            if (sitetype != "*ERROR*" && sitetype != "*KEYNOTFOUND*")
            {
                SiteInfo s = new SiteInfo();
                s.Title = site.Title;
                s.URL = site.Url;
                s.Type = sitetype;

                sites.Add(s);
            }
        }
        //sort list by type
        sites.Sort((x, y) => string.Compare(x.Type, y.Type));

        // serialize and send..    
        JavaScriptSerializer serializer = new JavaScriptSerializer();
        StringBuilder sbJsonResults = new StringBuilder();
        serializer.Serialize(sites, sbJsonResults);
etc..... 
```

但是，我想做的是在序列化站点之前按类型对站点进行分组。这是否可以使用 LINQ 或其他方法。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-02-01T20:01:51.163

听起来你想要这样的东西：

```
// No need to sort sites first
var grouped = sites.OrderBy(x => x.Type)
                   .GroupBy(x => x.Type); 
```

然后只需序列化`grouped`. 但是，我不太清楚`IGrouping`JSON 中的 an 会是什么样子......并且每种情况下都会出现该类型。你*可能*想要这样的东西：

```
var grouped = sites.OrderBy(x => x.Type)
                   .GroupBy(x => x.Type)
                   .Select(g => new { Type = g.Key,
                                      Sites = g.Select(site => new {
                                                           site.Title,
                                                           site.URL
                                                       } }); 
```

我*认为*这会给你一个更好的 JSON 结构。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-01T20:08:11.500

这

```
var sites = new List<SiteInfo>()
{
    new SiteInfo(){Title="1",Type="a",URL="http://aaaa"},
    new SiteInfo(){Title="2",Type="b",URL="http://bbbb"},
    new SiteInfo(){Title="3",Type="a",URL="http://aaaa"},
    new SiteInfo(){Title="4",Type="b",URL="http://bbb"},
};

var json = new JavaScriptSerializer().Serialize(sites.GroupBy(s => s.Type)); 
```

会产生

```
[
    [{"Title":"1","URL":"http://aaaa","Type":"a"},{"Title":"3","URL":"http://aaaa","Type":"a"}],
    [{"Title":"2","URL":"http://bbbb","Type":"b"},{"Title":"4","URL":"http://bbb","Type":"b"}]
] 
```

**或者**

```
var json = new JavaScriptSerializer().Serialize(sites.GroupBy(s => s.Type)
                                                      .ToDictionary(x=>x.Key,x=>x)); 
```

会产生

```
{
    "a":[{"Title":"1","URL":"http://aaaa","Type":"a"},{"Title":"3","URL":"http://aaaa","Type":"a"}],
    "b":[{"Title":"2","URL":"http://bbbb","Type":"b"},{"Title":"4","URL":"http://bbb","Type":"b"}]
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-01T20:13:32.037

这是一个简单的控制台应用程序，可以满足您的需求：

```
static void Main(string[] args)
{
    List<SiteInfo> sites = new List<SiteInfo>()
    {
        new SiteInfo() { Title = "Site A", Type = "Whatever 2" },
        new SiteInfo() { Title = "Site B", Type = "Whatever 1" },
        new SiteInfo() { Title = "Site C", Type = "Whatever 1" },
        new SiteInfo() { Title = "Site D", Type = "Whatever 3" },
        new SiteInfo() { Title = "Site E", Type = "Whatever 3" }
    };

    var sitesGroupedByType =
        sites.GroupBy(s => s.Type).Select(g => new { Type = g.Key,
                                    Sites = g.Select(site => new
                                    {
                                          site.Title,
                                          site.URL
                                    })});

    foreach (var siteTypeGroup in sitesGroupedByType.OrderBy(g => g.Type))
    {
        foreach(var site in siteTypeGroup.Sites)
        {
            Console.WriteLine(string.Format("Type => {0}, Title => {1}",
                              siteTypeGroup.Type, site.Title));
        }
    }

    Console.ReadKey();
} 
```

输出：

```
Type => Whatever 1, Title => Site B
Type => Whatever 1, Title => Site C
Type => Whatever 2, Title => Site A
Type => Whatever 3, Title => Site D
Type => Whatever 3, Title => Site E 
```

# c# - 使用带有存储过程的 C# 从 sql 数据库中检索数据

> ID：14654064
> 
> 赞同：7
> 
> 时间：2013-02-01T19:59:53.837
> 
> 标签：c#, asp.net, sql-server, stored-procedures

每当我尝试从我的数据库中检索数据时，我总是得到空值。我正在使用的代码如下：

```
protected void Button2_Click(object sender, EventArgs e)
 {
    SqlConnection myConnection = new SqlConnection(GetConnectionString());
    SqlCommand cmd = new SqlCommand("spSelectCustomer", myConnection);
    cmd.CommandType = CommandType.StoredProcedure;
    myConnection.Open();

    SqlParameter custId = cmd.Parameters.Add("@CustomerId", SqlDbType.Int);
    custId.Direction = ParameterDirection.Input;
    custId.Value = 10;

    SqlDataReader dr = cmd.ExecuteReader(CommandBehavior.CloseConnection);

    Label1.Text = dr["FirstName"].ToString();
    Label2.Text = dr["LastName"].ToString();
    Label3.Text = dr[3].ToString();
    Label4.Text = dr["Email"].ToString();
}
private static string GetConnectionString()
{
    return ConfigurationManager.ConnectionStrings["Lab3ConnectionString"].ConnectionString;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T20:03:29.577

您需要先调用`Read`才能访问数据，您的代码应该是

```
While (dr.Read())
{

    Label1.Text = dr["FirstName"].ToString();
    Label2.Text = dr["LastName"].ToString();
    Label3.Text = dr[3].ToString();
    Label4.Text = dr["Email"].ToString();
}

//close DataReader
dr.Close(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T20:01:51.410

在从 DataReader 读取列值之前，您必须从数据读取器调用[Read()方法。](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.read.aspx)

```
if (dr.Read())
{
    Label1.Text = dr["FirstName"].ToString();
    Label2.Text = dr["LastName"].ToString();
    Label3.Text = dr[3].ToString();
    Label4.Text = dr["Email"].ToString();
} 
```

你也可以试试：

```
SqlDataReader dr = cmd.ExecuteReader(CommandBehavior.SingleRow); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T20:06:33.830

你错过了`Read()`你的读者的电话。我还建议您将`IDisposable`对象包装在`using`如下语句中。

从`SqlDataReader`.

```
protected void Button2_Click(object sender, EventArgs e)
{
    using (SqlConnection myConnection = new SqlConnection(GetConnectionString()))
    {
        using (SqlCommand cmd = new SqlCommand("spSelectCustomer", myConnection))
        {
            cmd.CommandType = CommandType.StoredProcedure;
            myConnection.Open();

            SqlParameter custId = cmd.Parameters.AddWithValue("@CustomerId", 10);

            using (SqlDataReader dr = cmd.ExecuteReader())
            {
                if (dr.Read())
                {
                    Label1.Text = dr["FirstName"].ToString();
                    Label2.Text = dr["LastName"].ToString();
                    Label3.Text = dr[3].ToString();
                    Label4.Text = dr["Email"].ToString();
                }
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T20:04:55.310

```
SqlDataReader myReader = myCommand.ExecuteReader(CommandBehavior.CloseConnection);
while(myReader.Read()) 
{
Console.WriteLine(myReader.GetString(0));
}
myReader.Close();
//Implicitly closes the connection because CommandBehavior.CloseConnection was specified. 
```

文档：[SqlCommand.ExecuteReader 方法](https://docs.microsoft.com/en-us/dotnet/api/system.data.sqlclient.sqlcommand.executereader?redirectedfrom=MSDN&view=dotnet-plat-ext-3.1#overloads)

# objective-c - 在 Mac OS 上读取 unicode 字符串

> ID：14654065
> 
> 赞同：0
> 
> 时间：2013-02-01T20:00:01.537
> 
> 标签：objective-c, macos, unicode, types

我维护的一个古老代码最初是这样的：

```
NSUInteger readUnicode(NSMutableString *string, signed char const * buf, signed long int offset, size_t bufsize)
{   
    NSUInteger initLength = [string length];
    signed char const * start = buf + offset;
    NSLog (@"--------> start: %S", start);

    [string appendFormat:@"%S", start];
    return [string length] - initLength;
} 
```

XCode 抛出警告“格式指定类型 'const unsigned short *' 但参数的类型为 'const signed char *' 并建议将 appendFormat:@"%S" 更改为 appendFormat:@"%s"

当我确实将 %S 更改为 %s 时，无论输入如何，我都开始在返回字符串中只得到一个字符。

因此，我将代码更改为：

```
NSUInteger readUnicode(NSMutableString *string, signed char const * buf, signed long int offset, size_t bufsize)
{
    NSUInteger initLength = [string length];

    const unsigned short * start = (const unsigned short * )buf + offset;
    NSLog (@"--------> start: %S", start);

    [string appendFormat:@"%S", start];
    return [string length] - initLength;
} 
```

......现在我似乎得到了所有的角色并且没有警告。这是处理警告的方法吗？或者也许我可以/应该做点别的事情？（除了改变输入buf的类型）

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T20:06:17.693

> 这是处理警告的方法吗？

也许不完全是。如果您使用宽字符串，为什么不声明您的函数这样做呢？

```
NSUInteger readUnicode(NSMutableString *string, unichar const *buf, signed long int offset, size_t bufsize)
                                                ^^^^^^^
                                       Note the use of "unichar"! 
```

然后你就不需要丑陋的演员表，你不会收到警告，你的程序也不会调用未定义的行为。

# python - 覆盖美味派中的获取逻辑

> ID：14654071
> 
> 赞同：0
> 
> 时间：2013-02-01T20:00:23.307
> 
> 标签：python, tastypie

基本上，我想记录特定对象的每次调用，假设我有一个 objectA 和 objectB，每当请求 objectA 时，我想增加数据库中 objectA 的计数器。我正在考虑覆盖 API 来`GET`请求`tastypie`这种特定类型的模型，但我不知道我应该更改哪个位置，或者是否有任何其他更可取的方法来执行此操作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T14:25:26.763

放置它的最佳位置可能`obj_get`是调用以检索对象的资源方法。在内部，您应该检查对象是否由原始方法检索并进行增量。从tastepie.exceptions 导入NotFound

```
def obj_get(self, bundle, **kwargs):
    try:
        obj = super(self, ResourceClass).obj_get(bundle, **kwargs)
        obj.counter_field += 1
        obj.save()
        return obj
    except NotFound:
        raise 
```

上面的代码没有经过测试（请在检查后用一个工作示例更新它），但它显示了必须做什么。

# sed - 使用 sed 跨多行延迟查找和替换

> ID：14654080
> 
> 赞同：4
> 
> 时间：2013-02-01T20:01:03.227
> 
> 标签：sed

我正在尝试使用`sed`从文件中删除 html 代码块。要删除的块在文件中出现多次，并且跨越多行。另请注意，该块中包含不同的内容，但具有清晰的开始和结束描述。

我已经尝试了多种方法来使其正常工作，并且遇到了让懒惰工作`sed`和跨行匹配的问题。

这是我正在尝试做的一个例子：

```
good stuff a
good stuff same line START
bad stuff 1.0
bad stuff 1.1
END
good stuff b
good stuff b
good stuff same line START bad stuff 2.0
bad stuff 2.0
END
good stuff c 
```

变成：

```
good stuff a
good stuff same line
good stuff b
good stuff b
good stuff same line
good stuff c 
```

以下是我迄今为止尝试过的一些方法。

`sed -n '1h;1!H;${;g;s/START.*END//mg;p;}' < test > test2` 跨界工作。

`sed -n 's/START[^END]*END//g' < test > test2`仅否定 E 或 N 或 D。

`sed -n 's/START.*?END//g' < test > test2`不会偷懒。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T20:22:26.090

sed 不适合处理多行输入。请改用 awk。
您想匹配一行的正则表达式，如果它是“坏”块的开头，则关闭打印。这是您的文件的示例：

```
$ awk '
BEGIN    { pr = 1; }
/^START/  { pr = 0; }
          { if (pr) print; }
/^END/    { pr = 1; }
' < yourfile
good stuff a
good stuff b
good stuff b
good stuff c 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T20:11:54.783

怎么样：

```
$ sed '/START/,/END/d' file.txt
good stuff a
good stuff b
good stuff b
good stuff c 
```

阅读更多关于`ranges` [这里](http://www.grymoire.com/Unix/Sed.html#uh-29)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T21:40:09.913

一个人`sed`可能很难做到这一点。两个`sed`s 让它变得微不足道：

`sed 's/START/\nSTART\n/g' | sed '/START/,/END/d'`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T23:06:46.960

这可能对您有用（GNU sed）：

```
sed '/START/!b;:a;/END/bb;$!{N;ba};:b;s/START.*END//' file 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-02T14:46:30.320

sed 是用于在单行上进行简单替换的出色工具，对于其他任何内容，请使用 awk：

```
$ awk 'sub(/START.*|.*END/,""){f=!f;if(NF)print;next} !f' file
good stuff a
good stuff same line
good stuff b
good stuff b
good stuff same line
good stuff c 
```

# javascript - 流星：如何在 CSS 选择器中使用多个类

> ID：14654081
> 
> 赞同：0
> 
> 时间：2013-02-01T20:01:01.970
> 
> 标签：javascript, css-selectors, meteor

这在流星中效果很好。

```
Template.xxx.events = {
'click .btn-plus': function(event) {}
} 
```

但在此示例中，该事件从未被触发。

```
Template.xxx.events = {
'click .btn.btn-success.btn-mini.btn-plus.pull-right': function(event) {}
} 
```

为什么不能使用多个类作为选择器？我需要识别 .btn-plus 类上的按钮。

问候， CID

编辑：

**我的临时解决方案：**

*HTML 文件：*

```
<div class="btn-plus">
  <button class="btn btn-primary btn-mini pull-right">Caption</button>
</div> 
```

*JS 文件：*

```
Template.xxx.events = {
  'click .btn-plus': function(event) {}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T20:06:41.057

我只是快速浏览了一下文档。我认为这会奏效...

```
Template.xxx.events = {
    'click .btn .btn-success .btn-mini .btn-plus .pull-right': function(event) {}
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-06T21:23:12.757

[http://docs.meteor.com/#eventmaps](http://docs.meteor.com/#eventmaps)

```
Template.xxx.events({
   'click .btn, click .btn-success, click .btn-mini, click .btn-plus, click .pull-right': function(event) {
      console.log("clicked a button");
   }
} 
```

这里有另一个页面解决了这个问题：[Meteor JS: How to do I create event handler for multiple selectors?](https://stackoverflow.com/questions/21520798/meteor-js-how-to-do-i-create-event-handler-for-multiple-selectors)

# c - 通过结构数组进行交互

> ID：14654083
> 
> 赞同：0
> 
> 时间：2013-02-01T20:01:19.280
> 
> 标签：c, arrays, struct

我有一个非常具体的问题要解决。我有一组包含产品信息的结构。每个结构都有以下信息。

供应类型 产品名称 批发价格 批发零售价格 零售产品数量

我的结构数组是完整的，这很好。现在，假设有几种供应类型，例如：

肉类 乳制品 水果等...

我将如何遍历结构数组并根据供应类型打印出值信息。我需要一个通用的解决方案。因为当然，可能有很多产品类型。

在这一点上，任何事情都会有所帮助。我对如何做到这一点感到困惑，如果有人能帮助我，我将不胜感激。我只是没有看到如何做到这一点，或者我错过了一些东西。

> **编辑** 好了，我稍微改变了我的策略，我几乎完成并且一切正常，只有一个小故障我找不到。这可能是我忽略的相当容易的事情。这是我更新的代码。如果文件中的供应类型已经在ptr中，只需更新数值，如果没有记录并将其添加到ptr。在我的文件中，我有这个：

肉沙朗 3.55 15 7.30 8 肉鸡肉 2.51 9 5.44 5 肉培根 3.30 23 4.38 10 水果苹果 .50 40 1.11 20 水果香蕉 .39 25 .85 16 牛奶 1.00 25 2.25 15 牛奶 1150 25 2.25

它对肉类类别的总计正确，但之后的任何内容都没有！我一直认为这与我检查 supType 是否已经存在的循环有关。

这是我的完整代码。

```
void calculateDisplay(pointerDynam, sizeA);
void cleanUp();

typedef struct
{
    char supType[15];
    char prodName[15];
    double wholePrice;
    int quantWhole;
    double retPrice;
    int retProdQuantity;
} PRODUCT;

FILE *fr;
int main()
{
    char supplyName[15];
    char productName[15];
    double wholeP = 0;
    int  quantityWhole = 0;
    double retailPrice = 0;
    int retailProductQuant = 0;

    //keep track of supply types.

    PRODUCT *ptr;

    ptr = malloc(sizeof(PRODUCT));

    PRODUCT *temp;

    //int num =0;
    int i = 1;
    int num = 0;
    int a;
    int countTrack = 0;
    bool alreadySupply = true;
    int needsChanged = 0;

    fr = fopen("ttt.txt", "r");

    while(fscanf(fr, "%s %s %lf %d %lf %d", supplyName, productName, &wholeP, &quantityWhole, &retailPrice, &retailProductQuant)==6)
    {
        if(num != 0)
        {
            for(a=0; a < num; a++)
            {
                if(strcmp(ptr[a].supType, supplyName) == 0)
                {
                    needsChanged = a;
                }
                else
                {
                    alreadySupply = false;
                }
            }
        }

        if(num == 0 || alreadySupply == false)
        {
            PRODUCT record;
            strcpy(record.supType, supplyName);
            strcpy(record.prodName, productName);
            record.wholePrice = wholeP;
            record.quantWhole = quantityWhole;
            record.retPrice = retailPrice;
            record.retProdQuantity = retailProductQuant;

            ptr[num] = record;
            countTrack++;
            num++;
            i++;
            temp = realloc(ptr, i*sizeof(PRODUCT));
            ptr = temp;
        }
        else
        {
            ptr[needsChanged].quantWhole += quantityWhole;
            ptr[needsChanged].retPrice += retailPrice;
            ptr[needsChanged].retProdQuantity += retailProductQuant;
            ptr[needsChanged].wholePrice += wholeP;
        }
    }

    calculateDisplay(ptr, num);
    cleanUp();

    return 0;
}

void calculateDisplay(PRODUCT *pointerDynam, int sizeA)
{
    int j;
    double totownerCost = 0;
    double totcustCost = 0;
    double totprofit = 0;

    double supownerCost = 0;
    double supcustCost = 0;
    double suprofit = 0;

    for(j=0; j<sizeA; j++)
    {
        supownerCost = pointerDynam[j].wholePrice;
        supcustCost = pointerDynam[j].retPrice;
        suprofit = pointerDynam[j].retPrice - pointerDynam[j].wholePrice;

        printf("Supply Type: %s\n Wholesale Price: %.2f\n Retail Price: %.2f\n Profit: %.2f\n\n\n",
                 pointerDynam[j].supType, supownerCost, supcustCost, suprofit);
        totownerCost += pointerDynam[j].wholePrice;
        totcustCost += pointerDynam[j].retPrice;
        totprofit += pointerDynam[j].retPrice - pointerDynam[j].wholePrice;
    }

    printf("Wholesale Cost is: %.2f\n Retail is: %.2f\n Profit made was: %.2f\n\n", totownerCost, totcustCost, totprofit);
}

void cleanUp()
{
    fclose(fr);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T20:03:22.473

创建一个接受产品类型的函数，循环遍历数组，并且仅在当前项目产品类型与传递给它的匹配时打印。

```
 void printProductInfo(char* productType, PRODUCT* products)
  {
        for (int i = 0; i < productsLength; i++)
        {
              if (strcmp(productType, products[i]->supType)
                  // call print method
        }
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T21:08:24.120

您可以将供应类型作为第三个参数传递给您的`calculateDisplay`函数：

```
 void calculateDisplay(PRODUCT *pointerDynam, int sizeA, const char *supplyType)
 {
    ...
    double typeCost = 0;
    double typeCust = 0;
    double typeProfit = 0;
    ...
    if(strcmp(pointerDynam[j].supType, supplyType)==0)
        {
            typeCost += pointerDynam[j].wholePrice;
            typeCust +=  pointerDynam[j].retPrice;
            typeProfit += pointerDynam[j].retPrice - pointerDynam[j].wholePrice;
        }
        ...

   printf("%s wholesale: %.2f\n %s retail %.2f\n %s profit: %.2f\n\n\n", 
      supplyType, typeCost, supplyType, meatCust, supplyType, typeProfit); 
```

显然，如果您想一次分解多种类型，则必须重新考虑这一点，但对于单个类型，它应该工作得很好。

注意：虽然对于家庭作业来说这没什么大不了的，但您*真的*不想在真实的生产软件中使用浮点类型进行货币计算；舍入误差最终会累加。您将需要使用整数类型，并且只针对您需要跟踪的最小单位进行缩放（例如，存储 125 美分而不是 1.25 美元，或 1259 十分之一美分而不是 125.9 美分等）。这确实限制了您可以表示的值的范围（对于带符号的 32 位整数类型，如果以美分存储，大约为 +/- 2140 万美元，如果以十分之一美分存储，则为 214 万美元等），但它具有优点是所有算术都是精确的。如果您需要存储更大的值，则需要查看一些任意精度的库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T20:17:47.953

如果供应类型的数量是有限的，您可以执行以下操作。假设您有三种供应类型。

```
const int NUM_SUPPLY_TYPES = 3; 
```

定义一个包含供应类型信息的结构

```
struct SupplyTypeInfo
{
    double ownerCost;
    double custCost;
    double profitMargin;
}; 
```

现在您可以定义从整数到信息和字符串表示的映射：

```
SupplyTypeInfo supplyTypeInfo[NUM_SUPPLY_TYPES];
char *supplyTypeName[] = { "Meat", "Fruit", "Dairy" } 
```

然后在你的循环中你可以做

```
for (int stNum = 0; stNum < NUM_SUPPLY_TYPES; ++stNum)
{
    if(strcmp(pointerDynam[j].supType, supplyTypeName[stNum])==0)
    {
        supplyTypeInfo[stNum].ownerCost += pointerDynam[j].wholePrice;
        supplyTypeInfo[stNum].custCost +=  pointerDynam[j].retPrice;
        supplyTypeInfo[stNum].profitMargin += pointerDynam[j].retPrice - pointerDynam[j].wholePrice;
    }
} 
```

如果事先不知道供应类型的数量，则需要像哈希表这样的动态数据结构。

# django - 如何以编程方式使用 django_social_auth 创建用户？

> ID：14654084
> 
> 赞同：4
> 
> 时间：2013-02-01T20:01:44.233
> 
> 标签：django, facebook, django-socialauth

我正在为 django 应用程序编写一些测试脚本，该应用程序依赖 django_social_auth 来管理用户身份验证和登录（仅限 Facebook 登录）。

我想绕过 django_social_auth 的登录部分 - 我已经有一些测试用户，并且我通过其他测试更早地获得了他们的身份验证令牌。

从技术上讲，我不应该再次登录我的测试用户 - 现有的有效令牌应该足以进行此测试。

如何绕过用户登录过程对 django_social_auth 系统进行机器处理以使用我现有的身份验证令牌副本？

（我应该补充一点，在他们的身份验证和我运行此测试的时间点之间，一些用户的数据可能已从我的数据库中删除）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T16:00:55.507

我最近做了类似的定制。您必须覆盖默认值`SOCIAL_AUTH_PIPELINE`。我建议您编写一些处理程序并在管道中替换相同的处理程序。有关更多详细信息，您可以参考[http://django-social-auth.readthedocs.org/en/latest/pipeline.html](http://django-social-auth.readthedocs.org/en/latest/pipeline.html)

我的增强管道：

```
SOCIAL_AUTH_PIPELINE = (
                'social_auth.backends.pipeline.social.social_auth_user',
                # Removed by default since it can be a dangerouse behavior that
                # could lead to accounts take over.
                #'social_auth.backends.pipeline.associate.associate_by_email',
                'social_auth.backends.pipeline.user.get_username',
                #'social_auth.backends.pipeline.user.create_user',
                'myproject.custom.create_user',
                'social_auth.backends.pipeline.social.associate_user',
                #'social_auth.backends.pipeline.social.load_extra_data',
                'myproject.custom.load_extra_data',
                'social_auth.backends.pipeline.user.update_user_details',
           ) 
```

# mbunit - 如果在 FixtureTeardown 中引发异常，我能否在 MBUnit 中测试失败？

> ID：14654085
> 
> 赞同：1
> 
> 时间：2013-02-01T20:01:47.900
> 
> 标签：mbunit

如果测试进入本机代码并在关闭时引发访问冲突 - MBUnit 注意到这一点但仍然通过了测试（所有单独的测试都通过了 - 但在关闭时出现了崩溃）

**所以我看到了一个失败：**

[失败] Fixture Inventory/Inventory Tear Down System.AccessViolationException: 试图读取或写入受保护的内存。这通常表明其他内存已损坏。

**但测试仍然显示通过：**

3 次运行，3 次通过，0 次失败，0 次不确定，0 次跳过

**如果在 FixtureTearDown 中捕获到异常，有没有办法使测试失败？**

# iphone - 如何在 Interface Builder 中旋转 UIImageView？

> ID：14654096
> 
> 赞同：6
> 
> 时间：2013-02-01T20:02:27.647
> 
> 标签：iphone, xcode, uiimageview, rotation, interface-builder

是否可以从 XCode 在 Interface Builder 中旋转 UIImageView？就像我可以在 Photoshop 中那样，我可以缩放和旋转图像。

我知道这可以通过代码实现，但是有没有办法在界面构建器中做到这一点？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2017-03-25T09:11:25.630

是的，您可以在界面生成器中执行此操作，而无需任何具有`layer.transform.rotation.z`运行时属性的附加代码。请注意，此值以弧度为单位。

[![回转](../Images/c8a62f6aa94be2976ee9a8cee180d1f8.png)](https://i.stack.imgur.com/iSUGQ.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-09-03T15:00:09.637

是的，你可以，但使用一个小技巧。

在你的代码中声明一个像这样的新 UIView 类别

```
@interface UIView (IBRotateView)

@property (nonatomic, assign) CGFloat rotation;

@end

@implementation UIView (IBRotateView)
@dynamic rotation;

- (void)setRotation:(CGFloat)deg
{
    CGFloat rad = M_PI * deg / 180.0;

    CGAffineTransform rot = CGAffineTransformMakeRotation(rad);

    [self setTransform:rot];
}

@end 
```

现在，您可以像这样在您喜欢的任何 UIView 上直接在界面构建器上使用运行时参数“旋转”。

[![在此处输入图像描述](../Images/f865ad563a5512d2b61e22092dd6aa55.png)](https://i.stack.imgur.com/wAjg7.png)

显然，界面生成器不会在其内部渲染中旋转视图，因为它只会影响运行时渲染。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-01T20:49:02.463

您不能在当前版本的 Xcode 中执行此操作。[您可以通过https://feedbackassistant.apple.com/](https://feedbackassistant.apple.com/)向 Apple 提交功能请求

但是，如果您想这样做，则需要编写一些代码

```
#define RADIANS(degrees) ((degrees * M_PI) / 180.0)

theView.transform = CGAffineTransformRotate(theView.transform, radians) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-01T20:30:27.677

不，这在界面构建器中是不可能的，但代码非常简单：

```
#define RADIANS(degrees) ((degrees * M_PI) / 180.0)

CGAffineTransform rotateTransform = CGAffineTransformRotate(CGAffineTransformIdentity,
     RADIANS(120.0));

imageView.transform = rotateTransform; 
```

# android - 访问库项目中定义的资源

> ID：14654098
> 
> 赞同：0
> 
> 时间：2013-02-01T20:02:41.237
> 
> 标签：android, eclipse, resources

我有一个由一个应用程序和几个库项目组成的大型项目。库项目定义了资源，例如布局、字符串值，这些资源从库项目中引用，如下所示：

设置内容视图（R.layout.main）；

然而，在最近更新 ADT 之后，这不再有效。由于所有资源 ID 都“合并”到应用程序的 R.java 中（不再驻留在库中），因此“R”需要解析为应用程序。

我可以通过引用执行包来访问资源，但这似乎违反直觉，因为它一直按原样工作。

我错过了什么吗？解决这些问题时，是否有一个设置指定编译器“使用应用程序级别资源而不是库”？

更新：[本文](https://stackoverflow.com/questions/10398416/using-activities-from-library-projects)描述了我的问题，在我的情况下，所有资源 ID 都在 1 个常见的 R.java 中组合在一起，而不是单独的类文件，因此它们可以像我上面描述的那样被调用。

我正在使用 ADT 21.0.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:12:15.553

经过几次清理和重建后，我注意到 2 个支持库具有相同的命名空间。尽管这应该是合法的，但我更改了其中一个，重新构建并正确构建了资源。

# ios - 重新排列 UITableView 部分、行和部分之间的行

> ID：14654099
> 
> 赞同：5
> 
> 时间：2013-02-01T20:02:41.417
> 
> 标签：ios, objective-c, uitableview

我正在尝试完成以下 3 个要求：

1.  显示`UITableView`具有部分内容的 a。
2.  能够在部分之间重新排列表格的行。
3.  能够重新排列部分，类似于重新排列行的工作方式。

（另外，我不能使用 a `UICollectionView`）

我目前可以毫无问题地做前两个。我已经进行了一段时间的 iOS 开发，但是对于如何实际重新排列这些部分并使其看起来就像你移动一行时一样，我感到很困惑。

我试图在 a 中创建一个嵌套表`UITableViewCell`，并假装第一个单元格是“标题”，但这仅适用于移动部分并破坏了在部分之间重新排列行的能力（诚然，我可能会犯这个错误） .

我意识到这是一个复杂的问题，但任何帮助将不胜感激——即使答案是“无法完成”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T20:13:34.327

我认为你必须在这里创建一些自定义的东西，你将无法找到一些现成的部分重新排序功能。我不知道这是否会有所帮助，但这里有一个 github 项目的链接（[https://github.com/shusta/ReorderingTableViewController](https://github.com/shusta/ReorderingTableViewController)），它试图模仿 iOS 在编辑模式下使用手势和自定义动画和视图提供的“行重新排序”功能. 也许你可以通过它并尝试为部分创建类似的东西。希望这可以帮助

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T20:13:56.737

我认为实现完全自由的行和部分重新排序的唯一方法是构建一个完全自定义的 UIView 子类，它看起来像一个 UITableView （或者不是，如果你愿意的话），并努力使用手势识别器进行重新定位。它不会很快，但完全有可能。

除了创建这个相当复杂的表的问题之外，也许还有另一种方法可以解决您当前的问题，一种不那么麻烦的方法。

# c# - 使用来自单独库的更新

> ID：14654104
> 
> 赞同：0
> 
> 时间：2013-02-01T20:03:10.257
> 
> 标签：c#, wpf, mvvm

只是想知道是否有人对此事有任何建议-

我有一个作为类库开发的服务器（在它自己的 Visual Studio 项目中），只要触发某些规则，它就会下载、解析和发送谷歌云消息通知。我还有一个单独的项目作为前端，使用 WPF 和 MVVM 完成。

此刻，每当触发通知时，我在服务器类库中有一个事件，并且在前端我将一个事件处理程序连接到它，因此每当发送通知时，它都会“发送”到前端并且显示...但是处理此类事情的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T20:10:59.843

在我的一个项目中，我遇到了类似的情况，我必须将事件发送到应用程序的其他部分。为了尽可能保持 MVVM 模式的纯粹性，我最终使用了 MVVM Foundation 的 MVVM Messenger/Mediator。

中介解释：

[http://marlongrech.wordpress.com/2009/04/16/mediator-v2-for-mvvm-wpf-and-silverlight-applications/](http://marlongrech.wordpress.com/2009/04/16/mediator-v2-for-mvvm-wpf-and-silverlight-applications/)

MVVM 基础链接：

[http://mvvmfoundation.codeplex.com/](http://mvvmfoundation.codeplex.com/)

您也可以使用中介将对象从一个视图模型发送到另一个视图模型。我在我的列表框选择会改变的情况下使用它。我会将新选择的项目发送到另一个视图模型以进行进一步处理。

我不包括任何示例，因为链接有它们。如果您想让我向您展示我的实现示例，请在评论中告诉我，我会看看我能做什么。

# css - 右对齐文本？

> ID：14654106
> 
> 赞同：3
> 
> 时间：2013-02-01T20:03:19.167
> 
> 标签：css, typography

我正在尝试提出一个示例，以尝试不同的对齐方式作为演示。左、中、右、对齐和左对齐文本很容易，如我的演示中所示：

![一个](../Images/b1fe0654491c5e09422c9e6aa10435a1.png)

你可以在 JSBin 上[看到](http://jsbin.com/avuzuf/1/edit)这个例子。如何在不弄乱标点符号的情况下获得正确对齐的文本？（注意中间右对齐文本最后一行左侧的句点。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T21:31:34.107

这应该在 IE 中工作（仅）：

```
text-align: justify;
text-align-last: right; 
```

看起来没有一个很好的跨浏览器解决方案，但这可能会有所帮助：

[对齐 div 的最后一行？](https://stackoverflow.com/questions/4771304/justify-the-last-line-of-a-div)

# asp.net - 验证控制 - 将重点放在特定的锚点上

> ID：14654107
> 
> 赞同：1
> 
> 时间：2013-02-01T20:03:20.573
> 
> 标签：asp.net

我使用 ASP.NET 验证控件来验证表单上的字段，并且我需要将焦点设置在页面中的特定锚点上，但即使`SetFocusOnError`设置为**True** ，它也会一直移动到页面顶部。我尝试添加 a `CustomValidator`，`ClientValidationFunction`但它在验证之前运行，因此返回页面顶部。

我也试过这个：

[将焦点设置为验证摘要？](https://stackoverflow.com/questions/3473874/set-focus-to-validation-summary)

但是第一个链接不再可用，第二个链接不起作用（**这就是为什么答案应该是自包含的！**）。

以下是我的代码示例：

```
 <asp:ValidationSummary ID="ValidationSummary1" ClientIDMode="Static"
    runat="server" HeaderText="[custom message in my native language]"
    ValidationGroup="Valida" CssClass="msg_erro" />

    <asp:RequiredFieldValidator ID="vldNome" runat="server"
    ControlToValidate="txtNome" ValidationGroup="Valida" Display="Dynamic"
    ErrorMessage="blah blah blah" SetFocusOnError="True" Text="*" />

    //a bunch o others validatiors...

    <asp:ImageButton runat="Server"
    ImageUrl="~/img/anuncie/btn-cadastrar.png" ID="btnEnviar"
    ValidationGroup="Valida" CssClass="btn-cadastrar" /> 
```

正如我所说，我需要将焦点放在特定的锚点上，但是将焦点设置在`ValidationSummary`或任何字段上也会很好，因为我的字段从页面顶部开始。

谢谢。

**更新**

不同浏览器中的不同行为：

*   IE - 单击提交时焦点正确设置在字段上（取决于 IE 版本）
*   FF - 第一次点击提交会移动到页面顶部，第二次以及之后，它将焦点设置在字段上。
*   铬 - 从不工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:47:28.070

刚刚切换到[jQuery Validation 插件](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)。

# mysql - 如何加快复杂的 MYSQL 查询？

> ID：14654112
> 
> 赞同：1
> 
> 时间：2013-02-01T20:04:10.947
> 
> 标签：mysql, sql, coldfusion

我在从 ColdFusion 网站调用的 Cold Fusion 组件中有以下 MYSQL 查询。我有一个自定义方法，它基本上为以下字段构建了一个布尔查询：“PlaceName,Country,Adm1,adm2,adm3,locality”。

```
<!--- SEARCH PLACES 2--->
<cffunction name="searchPlaces_full" access="public" returntype="query">
    <cfargument name="q" type="string" required="yes">

    <CF_BOOLSEARCH searchterm="#arguments.q#" field="PlaceName,Country,Adm1,adm2,adm3,locality " booloperator="and">
    <cfquery name="GetPlaces" datasource="#application.settings.dsn#">
    SELECT 
        places.CatID,
        places.PlaceName,
        places.PlaceID,
        places.Address1,
        places.PostalCode,
        places.Locality,
        places.Address2,
        places.ImageThumb,
        places.Adm1,
        places.Country,
        places.Adm2,
        places.Adm3,
        places.contributorid,
        places.lng,
        places.lat,
        places.verified,
        places.verified_by,
        places.verified_date
    FROM places INNER JOIN places_cats ON places.PlaceID = places_cats.PlaceID
    WHERE  
    <cfif len(trim(arguments.q))>
    (#PreserveSingleQuotes(boolsearch)#)
    <cfelse>
    1=0
    </cfif>
    AND places_cats.CATID IN (#arguments.categories#)
    GROUP BY 
        places.CatID,
        places.PlaceName,
        places.PlaceID,
        places.Address1,
        places.PostalCode,
        places.Locality,
        places.Address2,
        places.ImageThumb,
        places.Adm1,
        places.Country,
        places.Adm2,
        places.Adm3,
        places.contributorid,
        places.lng,
        places.lat,
        places.verified,
        places.verified_by,
        places.verified_date
        ORDER BY PlaceName
        </cfquery>

    <cfreturn getPlaces>
</cffunction> 
```

数据库中有 624227 条记录。如果我搜索 Chappaqua，实际运行的 SQL 如下：

```
 SELECT 
        places.CatID,
        places.PlaceName,
        places.PlaceID,
        places.Address1,
        places.PostalCode,
        places.Locality,
        places.Address2,
        places.ImageThumb,
        places.Adm1,
        places.Country,
        places.Adm2,
        places.Adm3,
        places.contributorid,
        places.lng,
        places.lat,
        places.verified,
        places.verified_by,
        places.verified_date
    FROM places INNER JOIN places_cats ON places.PlaceID = places_cats.PlaceID
    WHERE  

    (((PlaceName LIKE '%chappaqua%') OR (Country LIKE '%chappaqua%') OR (Adm1 LIKE '%chappaqua%') OR (adm2 LIKE '%chappaqua%') OR (adm3 LIKE '%chappaqua%') OR (locality  LIKE '%chappaqua%')))

    AND places_cats.CATID IN (1,21,15,32,16,26,29,27,28,25,75,89,38,5,36,88,87,31,33,24,35,37,90,39,40,34,30,9,8,7,11,20,19,96,97,95,13,17,14,12,3,2,4,84,85,86)
    GROUP BY 
        places.CatID,
        places.PlaceName,
        places.PlaceID,
        places.Address1,
        places.PostalCode,
        places.Locality,
        places.Address2,
        places.ImageThumb,
        places.Adm1,
        places.Country,
        places.Adm2,
        places.Adm3,
        places.contributorid,
        places.lng,
        places.lat,
        places.verified,
        places.verified_by,
        places.verified_date
        ORDER BY PlaceName 
```

我知道这是丑陋而复杂的。运行大约需要 1836 毫秒。有没有更好的方法来编写查询或代码，以便在一秒钟内加速返回的数据？

下面是对 SQL 的解释： ![SQL 解释](../Images/620dea7dd8506801497e347ce7778f22.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T20:32:07.240

问题是引擎正在对表进行全表扫描，然后对`group by`.

由于 s，全表扫描似乎是必要`like`的：

```
(((PlaceName LIKE '%chappaqua%') OR (Country LIKE '%chappaqua%') OR (Adm1 LIKE '%chappaqua%') OR (adm2 LIKE '%chappaqua%') OR (adm3 LIKE '%chappaqua%') OR (locality  LIKE '%chappaqua%'))) 
```

问题是不能使用 PlaceName 上的索引，因为初始字符不固定。

所以 。. . 你能去掉`group by`吗？您至少可以将其替换为`distinct`，尽管我认为这不会影响查询计划。你有索引`place_cats(placeId, catId)`吗？这至少会阻止查询读取类别表，因此它可以只进行索引查找。

你能把搜索限制在字段开头的单词吗？

我能想到的唯一其他选择是切换到在 MySQL 中使用全文索引。

# java - 调色板的连续颜色

> ID：14654114
> 
> 赞同：0
> 
> 时间：2013-02-01T20:04:17.923
> 
> 标签：java, c++

通常我用红色、绿色、蓝色创建颜色。但是我希望用户只需使用滚轮来选择颜色，因此不能让用户指定三个颜色通道。

我有一个可以增加到 256 * 256 * 256 的变量。

但是，如果我使用 bitshift 来获取颜色通道，我的颜色会突然“跳跃”。

如何以我有整数的连续调色板的方式获取颜色通道？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T20:16:32.077

我想不出一种直观的方法来做到这一点，因为你有几个不同的自由度可以玩。如果您只想要一个基色而不是任意的 RGB 值，我会使用 HSV 并滚动浏览色调值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T20:59:43.413

你有一个立方体，你想线性且连续地走过它。

幸运的是，倒像不需要连续！

如果您看这里：http: [//xkcd.com/195/](http://xkcd.com/195/)，您会看到一种线性且连续地在二维空间中行走的方法。将此步行更改为 3 维步行从根本上来说并不棘手。

我们有 8 个位置的 2x2 立方体，编码为 000 到 111：

```
000 001
010 011

100 101
110 111 
```

这些是立方体顶部和底部切片的坐标。

我们按以下顺序进行：

```
 1 -> 2
         |
         V
/-- 4 <- 3
|
|   6 -> 7
|   ^    |
|   |    V
\-> 5    8 
```

这导致我们在“远角”退出立方体。

现在，要将立方体的大小在每个维度上增加两倍，只需使用相同的算法取上述 8 个角中的每一个。

8 层深，我们正在以连续的方式行走一个 256 x 256 x 256 的立方体。

现在，我在实践中，这可能是个坏主意——但尝试起来可能会很有趣。:)

按顺序排列位置的位值有一个相对简单的模式：

```
000
001
011
010
110
100
101
111 
```

即，0102101 是坐标中改变的位。

或者另一种看待它的方式是，我们在维度上行走的方式是格雷码模式。

# c# - 检查当前显示的是哪个图像？WPF

> ID：14654115
> 
> 赞同：1
> 
> 时间：2013-02-01T20:04:22.970
> 
> 标签：c#, wpf, code-behind

我有一个标签，每次按 Enter 时都会触发此功能

```
private void WordInput_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.Key == Key.Enter)
        {
            WordInput.Text = String.Empty;
            Smiley.Source = new BitmapImage(new Uri(@"FailSmile2.png", UriKind.Relative));
        }
    } 
```

将图片更改为上面的图片（FailSmile2.png） 但是现在，我想检查一下，如果显示的是 FailSmile2，那么我想改为使用相同功能的另一张图片。我应该使用几个 IF 来检查源吗？在那种情况下，怎么办？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T20:17:51.403

可以将其存储为您班级的私有字段：

```
private string CurrentImagePath;

private void WordInput_KeyDown(object sender, KeyEventArgs e)
{
    if (e.Key == Key.Enter)
    {
        WordInput.Text = String.Empty;

        if (CurrentImagePath == null)
            CurrentImagePath = @"FailSmile2.png";
        else if (CurrentImagePath == @"FailSmile2.png")
            CurrentImagePath = @"SomeOtherImage.png";

        Smiley.Source = new BitmapImage(new Uri(CurrentImagePath, UriKind.Relative));
    }
} 
```

不确定您*到底*想做什么。如果您计划循环浏览多个图像，最好将它们存储在 a 中`List<Uri>`并一次循环浏览它们。本质上，您会想以*某种方式*存储控件的当前状态（可能作为私有字段）并基于该状态进行更改或可能连接不同的事件。

# javascript - 在 div 悬停时显示截断的文本

> ID：14654116
> 
> 赞同：-1
> 
> 时间：2013-02-01T20:04:24.957
> 
> 标签：javascript, jquery, css

这是一个基本问题。我有一个 div，里面有一些文字。当该文本很长时，它会被截断，因为我已将溢出设置为隐藏。当您将鼠标悬停在该 div 上时，我想显示完整的文本。我知道对于图像我可以设置 alt 标签，但我该如何为 div 设置

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T20:12:01.157

您可以将溢出设置为在悬停时可见，以便文本可见。

CSS：

```
#your_div_id:hover{
    overflow: visible;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T20:15:11.683

使用 jQuery 你可以这样做：

HTML

```
<div> Heeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeey</div> 
```

CSS

```
div{
  width: 30px;
  overflow: hidden;
} 
```

JS

```
$('div').mouseover(function(){
  $(this).css("overflow", "visible");
});

$('div').mouseout(function(){
    $(this).css("overflow", "hidden");
}); 
```

[小提琴](http://jsfiddle.net/yvHtE/)

# python-2.7 - 如何从一个脚本调用.txt文件中提到的一堆python可执行文件

> ID：14654118
> 
> 赞同：0
> 
> 时间：2013-02-01T20:04:27.963
> 
> 标签：python-2.7

我正在编写一个 python 脚本，例如 startTesting.py，它位于“C:\python\Trigger”文件夹下。该文件夹有一个 list.txt 文件，其中保存了可执行 python 文件的列表（在另一个文件夹下）。我在我的 startTesting.py 脚本中指向这个 list.txt 文件，以便 list.txt 中提到的所有测试文件都将被执行。

测试文件保存在另一个文件夹“C:\python\Executable”下

我的 python 代码没有访问 Executable 文件夹下的 python 脚本。

List.txt 看起来像：

```
../Executable/testscript1.py

../Executable/testscript2.py 
```

我的 startTesting.py 看起来像：

```
>>> import os

>>> test_case_list = "List.txt"

>>> os.system('python %s' %test_case_list) 
```

但是当试图执行该文件时，我得到了这个错误：

```
File "List.txt", line 1

../Testware/testscript.py
^ 
```

欢迎任何解决这个问题的猜测！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T20:13:58.493

如果要运行文件中包含的脚本，请阅读文件：

```
with open('List.txt', 'r') as handle:
    for line in handle:
        execfile(line.strip()) 
```

你现在正在做的是 running `List.txt`，这不会很好地工作。

# javascript - HTTP 请求条件

> ID：14654121
> 
> 赞同：1
> 
> 时间：2013-02-01T20:04:33.430
> 
> 标签：javascript, web-services, servlets

是否可以在页面刷新时对 HTTP 请求设置条件。我有一个每 60 秒刷新一次的网页。如果 HTTP 响应不是“202”；第 10.2.3 节：接受然后不刷新。

我们希望让我们的用户在刷新时永远不会看到 404 页面。如果可能的话，最好有一个客户端解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T20:27:48.200

尝试向页面发出 HEAD 请求。这将测试您想要的内容是否可用，而无需检索 GET 将要获取的所有信息。在 HEAD 请求成功后，进行实际的页面刷新。

# asp.net-mvc - ASP.NET MVC - Html.Action - 传递 DateTime 数据导致错误

> ID：14654122
> 
> 赞同：0
> 
> 时间：2013-02-01T20:04:34.397
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我有这个：

```
@Html.Action("CheckForModifyPost", "Forums", new { postAuthor = item.Author.UserName, dateCreated = item.DateCreated}) 
```

我得到以下错误：

> 传入字典的模型项为空，但此字典需要“System.Int32”类型的非空模型项。

两者`item.Author.UserName`和`item.DateCreated`都不为空，我所知道的是这与`item.DateCreated`. 我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T10:24:41.017

```
suppose your controller is as follow

ForumController.cs
[httpGet]
public void CheckForModifyPost(string postAuthor, DateTime dateCreated )
{
  YOUR CODE GOES HERE
}

@Html.Action("CheckForModifyPost", "Forums", new { postAuthor = item.Author.UserName, dateCreated = item.DateCreated})

so in @html.Action pass the value with same name as in your action method like if in action method "postAuthor" as argument than in @html.Action pass the value of that argument with same name as in action method means use "postAuthor" in your @html.Action,
if their is only one character different than error occure 
```

# macos - VIM FTP 保存后自动上传？

> ID：14654130
> 
> 赞同：3
> 
> 时间：2013-02-01T20:04:56.743
> 
> 标签：macos, vim, ftp, sftp, macvim

mac VIM 中是否有插件或其他东西来完成这项工作？这是我非常希望 VIM 拥有的 Sublime 的一项功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T21:40:20.740

您也许可以在[vim.org](http://www.vim.org/scripts/script_search_results.php?keywords=ftp&script_type=&order_by=rating&direction=descending&search=search)找到合适的插件。另请参阅[此答案](http://stackoverflow.com/a/17474775/498656)以获取可能的线索。

无论如何，我认为这样的功能属于您的 FTP 客户端，而不属于您的*文本编辑器*。

你很幸运，一些最古老的 Mac OS X FTP 客户端具有某种“自动同步”功能：

*   [Interarchy](http://nolobe.com/interarchy/)（自动上传）
*   [美味的 FTP](http://www.yummysoftware.com/)（FTP 观察者）

[Macfusion](http://macfusionapp.org/)、[Transmit](http://panic.com/transmit/) Disks 和 Interarchy 的“Net Disks”是一种替代方案，可让您像安装本地磁盘一样安装 FTP 服务器。

抛开所有哲学问题不谈，你知道你可以直接从 Vim 浏览 FTP 服务器而不添加任何东西吗？见`:h netrw`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-11T12:26:35.177

为此，我编写了一个插件。可以在这里找到：[https ://github.com/hesselbom/vim-hsftp](https://github.com/hesselbom/vim-hsftp)

它允许您通过 sftp 下载或上传当前文件。

它处于早期阶段，但它已经为我的目的工作了，如果你愿意，你可以自由地分叉或贡献！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-04T16:23:42.923

您可能正在寻找 vim-sftp-sync 插件：

[https://github.com/eshion/vim-sftp-sync](https://github.com/eshion/vim-sftp-sync)

# shell - 为什么以不同的方式运行脚本时需要权限？

> ID：14654135
> 
> 赞同：2
> 
> 时间：2013-02-01T20:05:12.617
> 
> 标签：shell, terminal

我有一个 python 脚本，当我在终端中运行时：

```
py filename.py 
```

这很好用。但有了这种风格：

```
./filename.py 
```

我收到权限被拒绝错误。知道为什么吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T20:07:31.420

我的猜测是 python 本身具有 -x （可执行）权限，但 filename.py 没有

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T20:09:15.753

您的文件需要标记为可执行文件。您可以通过以下方式查看其当前权限[`ls(1)`](http://linuxcommand.org/man_pages/ls1.html)并更改其权限[`chmod(1)`](http://linuxcommand.org/man_pages/chmod1.html)：

```
ls -l filename.py
chmod a+x filename.py 
```

您还需要确保脚本的第一行具有正确的[hashbang](https://en.wikipedia.org/wiki/Shebang_%28Unix%29)：

```
#!/usr/bin/py
# the rest of your script... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T20:07:37.547

当你这样做时`./filename.py`，它会执行脚本。

当你这样做时`py filename.py`，`py`程序会读入你的`filename.py`并运行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T20:08:35.243

在 posix 兼容系统中，您拥有三种类型的权限：读、写和执行。您根本没有执行脚本的权限。为了添加权限，您必须调用以下内容：

`chmod +x filename.py`

您必须记住，`./filename.py`即使您将添加执行权限（如果您`#!/usr/bin/py`一开始没有），它也不会执行您的 Python 脚本。Python 脚本需要在解释器中执行 - 而不是作为独立应用程序。

# sql - SQL While 循环不正确

> ID：14654136
> 
> 赞同：0
> 
> 时间：2013-02-01T20:05:18.917
> 
> 标签：sql, if-statement, while-loop, create-table

尝试使用 while 循环将日期数据类型输入到表中。我的循环中断不起作用，输入值显示为 NULL。

帮助将不胜感激

```
DECLARE @StartDate DATE
DECLARE @countIndex INT
DECLARE @yearDate DATE
DECLARE @todaysDate DATE
SET @StartDate = GETDATE()
SET @yearDate = DATEADD(YEAR, 1,@StartDate)

CREATE TABLE DateLookup
    (
    DateID INT IDENTITY (1,1),
    DateDescription Date
    )

 WHILE (DATEDIFF(DD,@StartDate, @yearDate)) <= 366   
 BEGIN

    SET @countIndex = @countIndex +1

    INSERT INTO DateLookup (DateDescription)
    VALUES (DATEADD (DD,@countIndex,@todaysDate))--DAY(GETDATE()))

    IF (@countIndex < 366)
        Break

END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T20:07:45.770

你需要`DECLARE @todaysDate DATE = getdate()`并且`DECLARE @countIndex INT = 0`

另外，你可能是说`IF (@countIndex > 365) BREAK`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T20:10:03.637

你永远不会将@countIndex 设置为 0；它是 NULL，这意味着当您向其添加 1 时它始终为 NULL。@todaysDate 也有同样的问题。

如果您想完全避免 WHILE 循环，您可以将一些东西拼凑在一起，如下所示：

```
; WITH    seed
          AS ( SELECT   ROW_NUMBER() OVER ( ORDER BY name ) AS n
               FROM     sys.columns
             )
    SELECT TOP 366
            DATEADD(Day, n - 1, GETDATE())
    FROM    seed 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T20:14:04.310

如果您需要做的就是在 DateLookup 表中插入接下来的 365 天，为什么不使用这样的东西（假设您的意思是 SQL Server，取决于您的 RDBMS）：

```
INSERT INTO DateLookup  (DateDescription)
SELECT DATEADD(DD,Number,GETDATE())
FROM master..spt_values 
WHERE Number BETWEEN 1 AND 365 AND Type = 'P' 
```

这是[SQL 小提琴](http://sqlfiddle.com/#!3/2cd2f/1)。

祝你好运。

# c# - 使用 JSON 将模型集合发布到 webapi

> ID：14654146
> 
> 赞同：0
> 
> 时间：2013-02-01T20:06:30.660
> 
> 标签：c#, json, asp.net-mvc-4, asp.net-web-api

这是我的情况。我构建了一个旨在填充报告的 Web 服务。它接收可变数量的“发现”，然后生成包含所有发现的报告。

有没有办法使用 JSON 一次发布多个结果并将其绑定到 List 对象？

编辑：

所以更具体地说，一个发现看起来像：

{标题：“标题”，描述：“描述”，评级：“高”}

我希望能够让我的函数看起来像这样：

```
[HttpPost]
public string Post(IList<Finding> findings){
    //code...
}

public class Finding{
  public string title {get; set;}
  //...
} 
```

所以本质上我想将这些 JSON 发现的数组绑定到 IList

更新：我希望能够让它自动绑定。我目前可以通过发布 JSON 字符串（使用 JSON.stringify）来解决

这是我的有效代码：

```
[HttpPost]
public string Post([FromBody]object jsonString){
IList<Finding> findingList = JsonConvert.DeserializeObject<IList<Finding>>(jsonString.toString());
//...
} 
```

关于如何让它自动绑定而不是转换的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T20:12:54.297

是的，但是您的问题太笼统，无法深入回答。使用`HttpRequest`该类，您可以指定您正在发布帖子并将有效负载设置为 JSON blob。该 blob 可以是对象列表。在服务器端，您可以读取该数据并将其序列化。我建议使用 JSON.NET 来执行此操作。你可以用一种非常静态的方式来做，比如你的列表是一个类型的对象列表`A`或者`B, C, or D`继承自`A`. 如果您在代码中创建这些对象定义，JSON.NET 可以获取原始 json（这些对象的数组）并将其转换为您在代码中定义的对象数组。

json.NET 文档： http: [//james.newtonking.com/projects/json-net.aspx](http://james.newtonking.com/projects/json-net.aspx) HttpRequest 文档：http: [//msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx) 一个抽象HttpRequest 层： [http ://restsharp.org/](http://restsharp.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T15:43:34.803

如果你坚持你的解决方案：

```
[HttpPost]
public string Post([FromBody]object jsonString){
IList<Finding> findingList = JsonConvert.DeserializeObject<IList<Finding>>     (jsonString.toString());
//...
} 
```

我认为你可以：

```
[HttpPost]
public string Post(string jsonString){
IList<Finding> findingList = JsonConvert.DeserializeObject<IList<Finding>>     (jsonString);
//...
} 
```

...在您的 ajax 调用中：

```
 $.ajax({
    ...
    data: JSON.Stringify(data),
    ...
    }); 
```

或者，

您可以尝试类似（它来自我的代码）：

```
 var LoginFormSubmitHandler = function (e) {
    var $form = $(this);
    // We check if jQuery.validator exists on the form
    if (!$form.valid || $form.valid()) {

        $.post($form.attr('action'), $form.serializeArray())
        ... 
```

...你能显示 $form.serializeArray() 的值吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-11T10:15:37.487

这完美地工作。没有丑陋的 JSON 反序列化。

```
[ResponseType(typeof(Customer))]
public async Task<IHttpActionResult> PostCustomer(IEnumerable<Customer> customers)
{
    if (!ModelState.IsValid)
    {
        return BadRequest(ModelState);
    }
    db.Customers.AddRange(customers);
    await db.SaveChangesAsync();
    return StatusCode(HttpStatusCode.Created);
} 
```

并调用：

```
...api/Customers 
```

POST 表单正文为：

网址：.../api/

```
[
  {
    "SampleProperty": "SampleValue1"
    ...
    ...
  },
  {
    "SampleProperty": "SampleValue2"
  }
] 
```

# java - magento xmlrpc 会话立即过期

> ID：14654151
> 
> 赞同：4
> 
> 时间：2013-02-01T20:06:48.633
> 
> 标签：java, api, magento, session, xml-rpc

第一; 这个问题类似于另一个尚未解决的问题：[call to magento soap api expires immediate](https://stackoverflow.com/questions/9925645/call-to-magento-soap-api-expires-immediately)

我正在研究基于 XMLRPC 的客户端-服务器模块。基于 Magento 的服务器有几个 API 方法暴露给基于 Java 的客户端。我在客户端中使用标准的 Java XMLRPC Jars。

我有一个检索会话的“登录”调用。然后我将它传递给不同的调用。我检查了这是否返回（看起来像）一个有效的会话。

```
Object result1 = client.execute("login", ob1);
session = (String) result1; 
```

但是，我使用此会话进行的下一个呼叫失败了：

```
org.apache.xmlrpc.XmlRpcException: Session expired. Try to relogin. 
```

**我已验证的内容：**

*   将 Magento 中的会话超时设置为高值
    *   这不起作用
*   验证服务器时间设置是否正常
    *   它是。
*   验证 API 用户在 Magento 中是否“活跃”
    *   是的。
*   检查`api_session`表中的会话哈希
    *   见下文。

**api_session 表**

*   这没有我当前的会话哈希。
*   它也只有 11 个条目；我至少登录了大约 50 次。
*   会话日志时间与`select CURRENT_TIME`
    *   更新：这无关紧要（MySQL 以 GMT 记录）

这是我看到的：

```
mysql> select * from api_session limit 50;
+---------+---------------------+----------------------------------+
| user_id | logdate             | sessid                           |
+---------+---------------------+----------------------------------+
|       5 | 2013-02-01 16:01:49 | 9099b50
|       5 | 2013-02-01 16:02:10 | 7312c1a
|       5 | 2013-02-01 16:05:43 | a6ce30c
+---------+---------------------+----------------------------------+
11 rows in set (0.00 sec)

mysql> select CURRENT_TIME;
+--------------+
| CURRENT_TIME |
+--------------+
| 14:58:03     |
+--------------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T20:58:02.697

嗯....这可能是由于我自己对安全性的需要。

在上述失败中，我的登录方法从这篇文章中得到了提示：[Irretrievably destroying data in Java](https://stackoverflow.com/questions/120380/irretrievably-destroying-data-in-java)

就像那篇文章建议的那样，我将一个 char 数组传递给 login 方法。这最终导致将空凭据传递给该`login`方法。

给不熟悉的人的流程是

*   被调用的登录方法在`Mage/Api/Model/Server/Handler/Abstract.php`
*   这将调用 login 方法`Mage/Api/Model/Session.php`
*   我将输入转储到日志中，它们是空的。

我回到使用直接将字符串传递给该方法的常规、非安全方法。那行得通！

编辑：当然，这有一个缺点，我回到使用字符串而不是 char[] 数组。如果我弄清楚如何做到这一点，将更新答案。

# php - 从字符串中去除隐藏字符

> ID：14654153
> 
> 赞同：7
> 
> 时间：2013-02-01T20:07:04.667
> 
> 标签：php, utf-8, character-encoding

这应该很简单，但我无法弄清楚。

有问题的网站是 UTF-8 编码的。

一位客户在我们的网站上填写表格时遇到问题。这是他们输入的示例数据。

斯派塞-史密斯迷路了

它看起来像一个常规字符串，但是当您将该字符串复制到 notepad++ 之类的应用程序中时，您会看到一个“？” 出现在单词“SMITHS”（“SMITH?S”）中。

该脚本会清理该字段并执行删除以下字符的额外步骤： `"\r\n", "\n", "\r", "\t", "\0", "\x0B"`.

不过，它并没有捕捉到这个隐藏的角色。

有人知道这里发生了什么吗？

编辑：我正在使用 php。这是我用来清理字段的函数：

```
function strip_hidden_chars($str)
{
    $chars = array("\r\n", "\n", "\r", "\t", "\0", "\x0B");

    $str = str_replace($chars," ",$str);

    return preg_replace('/\s+/',' ',$str);
} 
```

编辑 2：@thaJeztah 引导我找到答案。我正在测试的字符串是客户从她使用的任何应用程序复制并粘贴它后我们的支持票证的输出。实际输入是

> 斯派塞-史密斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T20:30:43.970

你可以试试看这里；删除控制字符？

[从 php 字符串中删除控制字符](https://stackoverflow.com/questions/1497885/remove-control-characters-from-php-string)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-25T16:11:23.813

这也可以

```
$chars = array("\r\n", '\\n', '\\r', "\n", "\r", "\t", "\0", "\x0B");
str_replace($chars,"<br>",$data); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-08T06:50:08.260

我曾经在从不同来源导入许多 csv 文件时遇到类似问题，其中很多条目都不是 UTF-8 字符。这是我所做的，它最终适用于到目前为止的所有文件，旁边有解释评论：

```
$row[$id] = str_replace(chr(130), ',', $row[$id]);    // baseline single quote
$row[$id] = str_replace(chr(131), 'NLG', $row[$id]);  // florin
$row[$id] = str_replace(chr(132), '"', $row[$id]);    // baseline double quote
$row[$id] = str_replace(chr(133), '...', $row[$id]);  // ellipsis
$row[$id] = str_replace(chr(134), '**', $row[$id]);   // dagger (a second footnote)
$row[$id] = str_replace(chr(135), '***', $row[$id]);  // double dagger (a third footnote)
$row[$id] = str_replace(chr(136), '^', $row[$id]);    // circumflex accent
$row[$id] = str_replace(chr(137), 'o/oo', $row[$id]); // permile
$row[$id] = str_replace(chr(138), 'Sh', $row[$id]);   // S Hacek
$row[$id] = str_replace(chr(139), '<', $row[$id]);    // left single guillemet
$row[$id] = str_replace(chr(140), 'OE', $row[$id]);   // OE ligature
$row[$id] = str_replace(chr(145), "'", $row[$id]);    // left single quote
$row[$id] = str_replace(chr(146), "'", $row[$id]);    // right single quote
$row[$id] = str_replace(chr(147), '"', $row[$id]);    // left double quote
$row[$id] = str_replace(chr(148), '"', $row[$id]);    // right double quote
$row[$id] = str_replace(chr(149), '-', $row[$id]);    // bullet
$row[$id] = str_replace(chr(150), '-', $row[$id]);    // endash
$row[$id] = str_replace(chr(151), '--', $row[$id]);   // emdash
$row[$id] = str_replace(chr(152), '~', $row[$id]);    // tilde accent
$row[$id] = str_replace(chr(153), '(TM)', $row[$id]); // trademark ligature
$row[$id] = str_replace(chr(154), 'sh', $row[$id]);   // s Hacek
$row[$id] = str_replace(chr(155), '>', $row[$id]);    // right single guillemet
$row[$id] = str_replace(chr(156), 'oe', $row[$id]);   // oe ligature
$row[$id] = str_replace(chr(159), 'Y', $row[$id]);    // Y Dieresis
//force convert to ISO-8859-1 then convert back to UTF-8 to remove the rest of unknown hidden characters
$row[$id] = iconv("UTF-8","ISO-8859-1//IGNORE",$row[$id]);
$row[$id] = iconv("ISO-8859-1","UTF-8",$row[$id]); 
```

# mysql - 查找几个月前的平均工资 - MySQL

> ID：14654155
> 
> 赞同：1
> 
> 时间：2013-02-01T20:07:06.670
> 
> 标签：mysql, date, average

我想找到 8 个月前开始工作的员工的平均工资。

我尝试编写代码，但不知何故它显示为 NULL..

```
SELECT AVG(salary) FROM Staff  
WHERE salary = DATE_SUB(sWDate, INTERVAL 8 MONTH); 
```

一切都在这张桌子内。

谁能帮帮我？我不确定我做错了什么。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T20:10:33.510

为什么`salary = DATE_SUB(sWDate, INTERVAL 8 MONTH)`？

**8 个月内：**

```
SELECT AVG(salary) FROM Staff  
WHERE sWDate <= NOW() AND sWDate >= DATE_SUB(Now(), INTERVAL 8 MONTH); 
```

*   [`Date_Sub`](https://meta.stackexchange.com/questions/5234/how-does-accepting-an-answer-work)

其他：

```
SELECT AVG(salary) FROM Staff  
WHERE sWDate <= NOW() AND sWDate >= DATE_ADD(Now(), INTERVAL -8 MONTH); 
```

*   [`DATE_ADD`](http://www.w3schools.com/sql/func_date_add.asp)

PS：最好`Now()`根据您拥有的日期格式进行格式化`sWDate`以获得精确的结果。否则你可以使用`Year/Month`.

例如：

```
SELECT AVG(salary) FROM Staff  
WHERE Date_Format(sWDate,'%Y-%m') <= Date_Format(NOW(),'%Y-%m') 
AND Date_Format(sWDate,'%Y-%m') >= Date_Format(DATE_ADD(Now(), INTERVAL -8 MONTH), '%Y-%m'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T20:10:25.913

我认为您应该检查`Date`字段而不是日期的薪水

```
SELECT AVG(salary) FROM Staff  
WHERE [DateField] = DATE_SUB(NOW(), INTERVAL 8 MONTH); 
```

# django - 如何向 Django 管理员添加自定义功能？

> ID：14654158
> 
> 赞同：2
> 
> 时间：2013-02-01T20:07:15.137
> 
> 标签：django, django-admin

如何在 Django 项目的 admin.py 中使用此代码？ [http://djangosnippets.org/snippets/2834/](http://djangosnippets.org/snippets/2834/)

我不知道如何将此功能添加到我的 admin.ModelAdmin 类

```
from django.core.exceptions import PermissionDenied
from django.http import HttpResponse
from pyExcelerator import *
from StringIO import StringIO

def export_as_xls(modeladmin, request, queryset):
    """
    Generic xls export admin action.
    """
    if not request.user.is_staff:
        raise PermissionDenied
    opts = modeladmin.model._meta

    wb = Workbook()
    ws0 = wb.add_sheet('0')
    col = 0
    field_names = []
    # write header row
    for field in opts.fields:
        ws0.write(0, col, field.name)
        field_names.append(field.name)
        col = col + 1

    row = 1
    # Write data rows
    for obj in queryset:
        col = 0
        for field in field_names:
            val = unicode(getattr(obj, field)).strip()
            ws0.write(row, col, val)
            col = col + 1
        row = row + 1   

    f = StringIO()
    wb.save(f)
    f.seek(0)
    response = HttpResponse(f.read(), mimetype='application/ms-excel')
    response['Content-Disposition'] = 'attachment; filename=%s.xls' % unicode(opts).replace('.', '_')
    return response

export_as_xls.short_description = "Export selected objects to XLS" 
```

我尝试了不同的解决方案，但未能

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T20:12:14.833

让我们说名为的片段`actions.py`，然后在`admin.py`做：

```
from myproject.actions import export_as_xls

class MyAdmin(admin.ModelAdmin):
    actions = [export_as_xls] 
```

片段中也提到了您必须如何使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-12T04:55:10.163

## 在站点范围内添加它

```
from django.contrib import admin

admin.site.add_action(export_as_xls) 
```

# html - 如何在 Ruby on Rails 中使用 object.build 或 build_object 使用隐藏字段？

> ID：14654160
> 
> 赞同：0
> 
> 时间：2013-02-01T20:07:17.430
> 
> 标签：html, ruby-on-rails, ruby-on-rails-3, forms, model

我有一个嵌套的用户注册表单。我想为 3 个模型插入数据。`User`,`Store`和`Preference`. 关系是 a`User` `has_many :stores`和`has_one :preference`。

**我遇到**的问题是隐藏字段没有出现在我的视图中。**我没有正确使用`@user.restaurants.build`吗？`@user.build_preference`**

 **这是我的模型：

```
class User < ActiveRecord::Base
  attr_accessible :email, :full_name, :password, :password_confirmation
  has_secure_password

  validates_uniqueness_of :email
  validates_presence_of :full_name

  has_many :stores, :dependent => :destroy
  has_one :preference, :dependent => :destroy

  accepts_nested_attributes_for :stores
  accepts_nested_attributes_for :preference
end

class Store < ActiveRecord::Base
  attr_accessible  :name, :tagline, :address, :city, :postal, :state, :phone, :hours, :user_id

  belongs_to :user
end

class Preference < ActiveRecord::Base
  attr_accessible :background_fill, :background_position, :body_color, :body_font, :body_size, :heading_color, :heading_font, :heading_size, :layout, :link_color, :logo_color, :logo_size, :logo_font

  belongs_to :user
end 
```

我的用户控制器：

```
class UsersController < ApplicationController

def new
  @user = User.new
  @user.stores.build
  @user.build_preference
end 
```

我的观点：

```
<%= form_for @user do |f| %>
  <% if @user.errors.any? %>
  <div class="error_messages">
    <h2>There was an error!</h2>
    <ul>
      <% @user.errors.full_message.each do |message| %>
        <li><%= message %></li>
      <% end %>
    </ul>
  </div>
  <% end %>
  <%= f.label :full_name %>
  <%= f.text_field :full_name, :class => "target", :placeholder => "Your full name", :maxlength => "55", :autofocus => "autofocus" %>
  <%= f.label :email %>
  <%= f.email_field :email, :class => "target", :placeholder => "example@gmail.com", :maxlength => "55" %>
  <%= f.label :password %>
  <%= f.password_field :password, :class => "target", :placeholder => "Enter a password", :maxlength => "55" %>
  <%= f.label :password_confirmation, "Confirmation" %>
  <%= f.password_field :password_confirmation, :class => "target", :placeholder => "Enter your password again", :maxlength => "55" %>
  <% f.fields_for :stores do |builder| %>
    <%= builder.hidden_field :name, value: params[:name] %>
    <%= builder.hidden_field :tagline, value: params[:tagline] %>
    <%= builder.hidden_field :address, value: params[:address] %>
    <%= builder.hidden_field :city, value: params[:city] %>
    <%= builder.hidden_field :state, value: params[:state] %>
    <%= builder.hidden_field :postal, value: params[:postal] %>
    <%= builder.hidden_field :phone, value: params[:phone] %>
    <%= builder.hidden_field :hours, value: params[:hours] %>
  <% end %>
  <% f.fields_for :preference do |builder| %>
    <%= builder.hidden_field :layout, value: params[:layout] %>
    <%= builder.hidden_field :background_fill, value: params[:background_fill] %>
    <%= builder.hidden_field :background_position, value: params[:background_position] %>
  <% end %>
  <%= f.submit "Create an Account for Free", :class => "button cta" %>
<% end %> 
```

另外，如果有任何帮助，我正在尝试遵循 Railscast 上的本教程：[http ://railscasts.com/episodes/196-nested-model-form-part-1](http://railscasts.com/episodes/196-nested-model-form-part-1)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T20:21:09.713

我对 Rails 相当陌生，但我认为 build 应该在 create 操作中。

@user.stores.build(params[:user][:stores])

我猜是因为我没有尝试构建这样的视图我通常在步骤中创建用户创建用户然后通过构建创建关联

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T20:34:46.630

```
<% f.fields_for :preference do |builder| %> 
```

这需要

```
<%= f.fields_for :preference do |builder| %> 
```

您对 的其他调用也是如此`f.fields_for`。

资料来源：**[API](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-fields_for)****

# python - 将原型发布到 GAE 数据存储

> ID：14654166
> 
> 赞同：0
> 
> 时间：2013-02-01T20:07:40.380
> 
> 标签：python, google-app-engine, google-cloud-datastore, protocol-buffers

Python/开发新手在这里。

我的计算机正在收集数据，然后将其存储在谷歌协议缓冲区（protos）中。我想将这些原型发布到我的谷歌应用引擎帐户的数据存储中，以便我的应用可以在必要时访问这些数据。

我试图使用 httplib2 来发布数据，但仅仅插入 URL 是行不通的。是否需要在应用程序中创建某种特殊的处理程序来接收原型并存储它？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T20:22:57.243

您需要让您的 app.yml 将请求定向到适当的处理程序。[在 Python 2.7 指南中的 App Engine 入门指南](https://developers.google.com/appengine/docs/python/gettingstartedpython27/helloworld)中提供了如何执行此操作的示例。我假设您已经完成了这项工作，并且（来自同一个文档）将处理程序的路由和 python 类添加到 webapp2.WSGIApplication 构造函数中。

要将打包的协议缓冲区存储在您的应用引擎应用程序中，您应该能够：

```
data = dict(form_protobuf_field = packed_proto_buff_string)
resp, content = h.request("http://[app-name].appspot.com/route", "POST", urlencode(data)) 
```

...或者您是否想通过将其每个组成部分寻址到表单中的不同字段来解压缩 proto buff 并将其发布？

# javascript - CSV 导入脚本在 Google 电子表格中不起作用

> ID：14654168
> 
> 赞同：1
> 
> 时间：2013-02-01T20:07:41.970
> 
> 标签：javascript, google-apps-script

我创建了以下脚本。但它不起作用，我不知道为什么我跟着谷歌上的教程，但脚本一直超时。任何有关如何解决此问题的帮助都会非常有用。

```
function onOpen() {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var csvMenuEntries = [{name: "Update HIPAA", functionName: "importHIPAA"}, 
                        {name: "Update Harassment", functionName: "importHarassment"} ];
  ss.addMenu("Update Scores", csvMenuEntries);
}
function importHIPAA() {
  var fileName = "59156.csv";

 var files = DocsList.getFiles();
  var csvFile = "";

  for (var i = 0; i < files.length; i++) {
    if (files[i].getName() == fileName) {
      csvFile = files[i].getContentAsString();
      break;
    }
  }
  var csvData = CSVToArray(csvFile, ",");
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var sheet = ss.getSheetByName("HIPAA");
  for (var i = 0; i < csvData.length; i++) {
    sheet.getRange(i+1, 1, 1, csvData[i].length).setValues(new Array(csvData[i]));
  }
}
function importHarassment() {
  var fileName = "105921.csv";

 var files = DocsList.getFiles();
  var csvFile = "";

  for (var i = 0; i < files.length; i++) {
    if (files[i].getName() == fileName) {
      csvFile = files[i].getContentAsString();
      break;
    }
  }
  var csvData = CSVToArray(csvFile, ",");
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var sheet = ss.getSheetByName("Harassment");
  for (var i = 0; i < csvData.length; i++) {
    sheet.getRange(i+1, 1, 1, csvData[i].length).setValues(new Array(csvData[i]));
  }
}
// http://www.bennadel.com/blog/1504-Ask-Ben-Parsing-CSV-Strings-With-Javascript-Exec-Regular-Expression-Command.htm
// This will parse a delimited string into an array of
// arrays. The default delimiter is the comma, but this
// can be overriden in the second argument.

function CSVToArray( strData, strDelimiter ){
  // Check to see if the delimiter is defined. If not,
  // then default to comma.
  strDelimiter = (strDelimiter || ",");

  // Create a regular expression to parse the CSV values.
  var objPattern = new RegExp(
    (
      // Delimiters.
      "(\\" + strDelimiter + "|\\r?\\n|\\r|^)" +

      // Quoted fields.
      "(?:\"([^\"]*(?:\"\"[^\"]*)*)\"|" +

      // Standard fields.
      "([^\"\\" + strDelimiter + "\\r\\n]*))"
    ),
    "gi"
  );

  // Create an array to hold our data. Give the array
  // a default empty first row.
  var arrData = [[]];

  // Create an array to hold our individual pattern
  // matching groups.
  var arrMatches = null;

  // Keep looping over the regular expression matches
  // until we can no longer find a match.
  while (arrMatches = objPattern.exec( strData )){

    // Get the delimiter that was found.
    var strMatchedDelimiter = arrMatches[ 1 ];

    // Check to see if the given delimiter has a length
    // (is not the start of string) and if it matches
    // field delimiter. If id does not, then we know
    // that this delimiter is a row delimiter.
    if (
      strMatchedDelimiter.length &&
      (strMatchedDelimiter != strDelimiter)
    ){

      // Since we have reached a new row of data,
      // add an empty row to our data array.
      arrData.push( [] );

    }

    // Now that we have our delimiter out of the way,
    // let's check to see which kind of value we
    // captured (quoted or unquoted).
    if (arrMatches[ 2 ]){

      // We found a quoted value. When we capture
      // this value, unescape any double quotes.
      var strMatchedValue = arrMatches[ 2 ].replace(
        new RegExp( "\"\"", "g" ),
        "\""
      );

    } else {

      // We found a non-quoted value.
      var strMatchedValue = arrMatches[ 3 ];

    }

    // Now that we have our value string, let's add
    // it to the data array.
    arrData[ arrData.length - 1 ].push( strMatchedValue );
  }

  // Return the parsed data.
  return( arrData );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-23T18:19:55.050

您可能不再有问题了，但以防万一更改 var files = DocsList.getFiles(); 对于 var 文件 = DocsList.getAllFiles();

应该可以正常工作，我做了测试

埃尔梅德斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T20:43:46.540

试试你的脚本没有这个错字：

```
 while (arrMatches = objPattern.exec( strData )){ 
```

应该 `while (arrMatches == objPattern.exec( strData )){`

条件中的平等是双重的 =

# web-services - Windows 上 node.js 中的 JSON 请求无法提取数据

> ID：14654170
> 
> 赞同：0
> 
> 时间：2013-02-01T20:07:48.957
> 
> 标签：web-services, node.js, flickr

我编写了一个 node.js 页面来从 flick API 中获取一些数据，然后将其插入到数据库中。

该代码在 linux 上完美运行——但是当我将它移到运行最新版本 node.js 的 Windows 机器上时，似乎数据解析不正确。

```
var options = {
  host: 'api.flickr.com',
  port: 80,
  path: '/services/rest/?method=flickr.photos.search&api_key=aa96a1b927fbf005374eb19d811ed529&tags=cars&format=json&nojsoncallback=1&page='+page
};          

http.get(options, function(res){        
    var data = '';
    res.on('data', function (chunk){        
        data += chunk;
    });
    res.on('end',function(){ 
        var obj = JSON.parse(data);
        console.dir(obj.photos.photo); // empty array on Windows, fine on linux!
    })
}); 
```

我还通过在 Web 浏览器中针对相同数据发出测试请求来验证数据——该`photos.photo`元素肯定应该被填充。

发生这种情况是否有原因，例如我在 Windows 上缺少库或插件？或者记忆会影响这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T23:02:02.797

正如 JohnnyHK 在评论中指出的那样，附加到 API url 的随机页面正在请求超出 API 范围的页面。API 不会返回错误（例如 404 或不存在页面），而是返回一个空的照片数组。

# c# - 设置中继器中的项目 ID

> ID：14654174
> 
> 赞同：8
> 
> 时间：2013-02-01T20:08:11.493
> 
> 标签：c#, asp.net, repeater

在我的 aspx 中，我有一个中继器，其中包含三个文本框：

```
<asp:Repeater ID="myRepeater" runat="server">
    <ItemTemplate>
        <asp:TextBox ID="myTextBox" runat="server"
    <ItemTemplate/>
</asp:Repeater> 
```

在我的代码隐藏中，我将转发器数据绑定到一个数组`int data = new int[3];`

所以我的页面显示了三个文本框，每个文本框的 ID 都是 myTextBox 的 3 次。有没有办法将这些 ID 设置为：

*   我的文本框1
*   我的文本框2
*   我的文本框3

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-01T20:21:35.723

> 所以我的页面显示了三个文本框，每个文本框的 ID 都是 myTextBox 的 3 次。

你确定吗？听起来您在谈论渲染的输出。查看源码，你会发现：

```
<input name="myRepeater$ctl00$myTextBox" type="text" id="myRepeater_myTextBox_0" />
<input name="myRepeater$ctl01$myTextBox" type="text" id="myRepeater_myTextBox_1" />
<input name="myRepeater$ctl02$myTextBox" type="text" id="myRepeater_myTextBox_2" /> 
```

从后面的代码中，您可以通过`ClientID`属性访问这个生成的 id。您还可以通过搜索转发器的`Items`属性来访问各个控件：

```
TextBox textBox2 = myRepeater.Items[1].FindControl("myTextBox"); 
```

**编辑：**您*可以*显式设置`ClientID`控件。您必须在数据绑定时将其设置[`ClientIDMode`为`Static`](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientidmode.aspx)并更改 ID：

```
protected void Page_Load(object sender, EventArgs e)
{
    myRepeater.ItemDataBound += new RepeaterItemEventHandler(myRepeater_ItemDataBound);
    myRepeater.DataSource = new int[3];
    myRepeater.DataBind();
}

void myRepeater_ItemDataBound(object sender, RepeaterItemEventArgs e)
{
    var textbox = e.Item.FindControl("myTextBox");
    textbox.ClientIDMode = ClientIDMode.Static;
    textbox.ID = "myTextBox" + (e.Item.ItemIndex + 1);
} 
```

给出这个 HTML：

```
<input name="myRepeater$ctl01$myTextBox1" type="text" id="myTextBox1" />
<input name="myRepeater$ctl02$myTextBox2" type="text" id="myTextBox2" />
<input name="myRepeater$ctl02$myTextBox3" type="text" id="myTextBox3" /> 
```

# .htaccess - 基于其他站点的 cookie 的重定向？

> ID：14654178
> 
> 赞同：1
> 
> 时间：2013-02-01T20:08:27.687
> 
> 标签：.htaccess, redirect, cookies, referrer

我正在寻找可以添加到我的 .htaccess 的东西，它将重定向任何具有另一个网站设置的 cookie 的传入流量。

例如，如果我有一个名为 DogsPaws.com 的网站并且有人访问 DogsNose.com（它设置了一个 cookie），我想将我从 DogsNose.com 收到的传入流量重定向到特定的欢迎页面。

如果我在 DogsNose.com 页面上有一个链接，我可以根据推荐人规则进行重定向，但如果该人访问 DogsNose.com 然后关闭浏览器并在第二天返回并直接输入 DogsPaws.com 会发生什么他们的浏览器，我仍然希望我的重定向规则适用。我知道 cookie 会过期，人们偶尔会清除它们，但在大多数情况下，如果 cookie 存在，我想重定向。有什么明确的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T20:36:07.440

您无法从其他网站读取 cookie。客户不发送它们。

.htaccess 没有任何解决方案，如果 DogsNose.com 不属于您，则根本没有任何解决方案。

# php - 根据验证，在显示表单时使用表中的存储值或提交的表单数据

> ID：14654179
> 
> 赞同：1
> 
> 时间：2013-02-01T20:08:31.007
> 
> 标签：php, laravel

我是 Laravel 的新手，一直在尝试找出处理简单任务的最佳方法。我有一个视图，它有一个用于添加或编辑事件的表单（对于这个例子）。当表单将用于添加事件时，所有输入字段都是空白的。当它用于编辑事件时，输入由 MySQL 中的列填充。

我遇到的棘手问题是找出告诉视图我想在验证失败时使用旧表单输入或在我们第一次打开表单进行编辑时使用 MySQL 数据的**最佳**方法.

这是我目前在控制器中的内容，它很长，我相信有更好的方法，只是不确定它会是什么。

本质上，我将每个表单值分配给一个多维数组，然后将该数组返回给视图。每个数组值都是有条件的 - 如果有旧的输入值，请使用它。否则，使用表中的值。

```
public static function action_edit_event($id, $slug) {
    $eventDetails = Calendar::find($id);
    $event['id'] = $id;
    $event['slug'] = $slug;
    $event['title'] = (Input::old('admin_events-form-title')) ?
    Input::old('admin_events-form-title') : $eventDetails->title;
    $event['type'] = (Input::old('admin_events-form-type')) ?
    Input::old('admin_events-form-type') : $eventDetails->calendartype_id;
    $event['date_start'] = (Input::old('admin_events-form-date-start')) ?
    Input::old('admin_events-form-date-start') : $eventDetails->start_date;
    $event['allDay'] = (Input::old('admin_events-form-all-day')) ?
    Input::old('admin_events-form-all-day') : $eventDetails->day;
    $event['time-start_hour'] = (Input::old('admin_events-form-time-start_hour')) ?
    Input::old('admin_events-form-time-start_hour') : (($eventDetails->start_time != null) ?
                                    date("H", strtotime($eventDetails->start_time)) : '');
    $event['time-start_minute'] = (Input::old('admin_events-form-time-start_minute')) ?
    Input::old('admin_events-form-time-start_minute') : (($eventDetails->start_time != null) ?
                                    date("i", strtotime($eventDetails->start_time)) : '');
    $event['date_end'] = (Input::old('admin_events-form-date-end')) ?
    Input::old('admin_events-form-date-end') : $eventDetails->end_date;
    $event['time-end_hour'] = (Input::old('admin_events-form-time-end_hour')) ?
    Input::old('admin_events-form-time-end_hour') : (($eventDetails->end_time != null) ?
                                    date("H", strtotime($eventDetails->end_time)) : '');
    $event['time-end_minute'] = (Input::old('admin_events-form-time-end_minute')) ?
    Input::old('admin_events-form-time-end_minute') : (($eventDetails->end_time != null) ?
                                    date("i", strtotime($eventDetails->end_time)) : '');
    $event['description'] = (Input::old('admin_events-form-description')) ?
    Input::old('admin_events-form-description') : $eventDetails->description;
    return View::make('admin.event-post')->with('event', $event);
} 
```

和视图中的表格..

```
{{ Form::open('admin/events/event', 'POST', array('id' => 'admin_events-form')) }}
    <fieldset>
        <legend>Event Details</legend>
        <p>
            {{ Form::label('admin_events-form-title', 'Event Title:')}}
            {{ Form::text('admin_events-form-title', isset($event) ? $event['title'] : '') }}
            {{ $errors->first('title', '<span class="ui-state-error">:message</span>') }}
        </p>
        <p>
            {{ Form::label('admin_events-form-type', 'Event Type:') }}
            {{ Form::select('admin_events-form-type', $select_event_types, isset($event) ? $event['type'] : '') }}
        </p>
        <p>
            {{ Form::label('admin_events-form-date-start', 'Start Date:') }}
            {{ Form::text('admin_events-form-date-start', isset($event) ? $event['date_start'] : '', array('id' => 'date_start')) }}
            {{ Form::checkbox('admin_events-form-all-day', '1', (isset($event) && $event['allDay'] == 1) ? true : false, array('id' => 'allDay')) }}
            {{ $errors->first('start_date', '<span class="ui-state-error">:message</span>') }}
        </p>
        <p>
            {{ Form::label('admin_events-form-time-start_hour', 'Start Time:') }}
            {{ Form::select('admin_events-form-time-start_hour', $select_hours, (isset($event) && $event['time-start_hour'] != null) ? $event['time-start_hour'] : '', array('id' => 'start-time_hour')) }} :
            {{ Form::select('admin_events-form-time-start_minute', $select_minutes, (isset($event) && $event['time-start_minute'] != null) ? $event['time-start_minute'] : '', array('id' => 'start-time_minute')) }}
            {{ $errors->first('start-time-hour', '<span class="ui-state-error">:message</span>') }}
            {{ $errors->first('start-time-minute', '<span class="ui-state-error">:message</span>') }}
        </p>
        <p>
            {{ Form::label('admin_events-form-date-end', 'End Date:') }}
            {{ Form::text('admin_events-form-date-end', isset($event) ? $event['date_end'] : '', array('id' => 'date_end')) }}
            <a href="#" id="admin_events-clear-date-end" class="button" title="Clear End Date">X</a>
            <span class="ui-state-highlight">(if different from start date)</span>
        </p>
        <p>
            {{ Form::label('admin_events-form-time-end_hour', 'End Time:') }}
            {{ Form::select('admin_events-form-time-end_hour', $select_hours, (isset($event) && $event['time-end_hour'] != null) ? $event['time-end_hour'] : '', array('id' => 'end-time_hour')) }} :
            {{ Form::select('admin_events-form-time-end_minute', $select_minutes, (isset($event) && $event['time-end_minute'] != null) ? $event['time-end_minute'] : '', array('id' => 'end-time_minute')) }}
            {{ $errors->first('end-time-hour', '<span class="ui-state-error">:message</span>') }}
            {{ $errors->first('end-time-minute', '<span class="ui-state-error">:message</span>') }}
        </p>
        <p>
            {{ Form::label('admin_events-form-description', 'Event Description:') }}
            {{ Form::textarea('admin_events-form-description', isset($event) ? $event['description'] : '', array('rows' => '5')) }}
        </p>
        <p class="center">
            {{ $errors->first('description', '<span class="ui-state-error">:message</span>') }}
        </p>
    </fieldset>
    {{ Form::hidden('mode', isset($event) ? 'edit' : 'add') }}
    @if (isset($event))
    {{ Form::hidden('slug', $event['slug']) }}
    {{ Form::hidden('id', $event['id']) }}
    @endif
{{ Form::close() }} 
```

任何建议将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T21:26:37.913

我假设您用于实际验证和存储事件的代码在控制器中的另一种方法中（即 action_save_event）？

如果验证失败，我会简单地将视图与来自该方法的输入数据一起返回。

例如：

```
public function action_edit_event($id, $slug)
{
  $eventDetails = Calendar::find($id);
  $event['id'] = $id;
  $event['slug'] = $slug;
  return View::make('admin.event-post')->with('event', $event);
}

public function action_store_event($id, $slug)
{
  // Validate the input data
  // If valid store to the database
  // Else, assemble $event from the old input data
  $event['id'] = $id;
  $event['slug'] = $slug;
  $event['title'] = Input::old('admin_events-form-title');
  $event['type'] = Input::old('admin_events-form-type');
  // ...
  // Return the view with $event
  return View::make('admin.event-post')->with('event', $event);
} 
```

# php - 当会话以php结束时如何做某事

> ID：14654188
> 
> 赞同：2
> 
> 时间：2013-02-01T20:09:05.507
> 
> 标签：php, session

我有一个学校项目的问题。当某人的会话结束时，我如何执行操作。例如，我想删除一个说用户在会话结束时已登录的文件。如果他关闭浏览器或者他有一段时间没有做任何请求？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T20:14:02.667

没有办法直接跟踪这一点。但是，您可以使用数据库并将用户上次加载页面时存储在其中，然后在所有 X 分钟内运行一个 cron 作业，以检查哪些用户在最后 Y 分钟内没有做任何事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T20:21:28.927

您可以通过编写自定义会话处理程序来做到这一点。

在此站点上，您会找到正确的解释：

[http://phpmaster.com/writing-custom-session-handlers/](http://phpmaster.com/writing-custom-session-handlers/)

但是，请注意，“垃圾收集”（按照您的意愿清理文件）不会在会话关闭后直接发生！

PHP 使用一个设置“session.gc_probability”，表示一旦每 XXX 个请求，PHP 将寻找旧的/关闭的会话并开始进行垃圾收集

[http://www.php.net/manual/en/session.configuration.php#ini.session.gc-probability](http://www.php.net/manual/en/session.configuration.php#ini.session.gc-probability)

# google-apps-script - 遇到错误：找不到方法（类）getRange（（类），数字，数字，数字）

> ID：14654195
> 
> 赞同：0
> 
> 时间：2013-02-01T20:09:58.973
> 
> 标签：google-apps-script

在运行作为 Web 应用程序发布的 UI 应用程序之前，有没有人遇到过这个错误？：

```
Error encountered: Cannot find method (class)getRange((class),number,number,number). 
```

我在谷歌上搜索了这个短语并得出了零搜索结果。

Web 应用程序从 加载正常`doGet()`，并且在小型服务器处理程序运行后出现错误。事情是处理程序运行良好（处理程序函数末尾的我的“处理...”标签关闭可见性）并且我正在调用的电子表格更新没有问题。我检查了我的代码，我所有的 getRanges 都正确格式化为`sheet.getRange(row,col,num,num)`.

GAS 昨天表现得很奇怪，昨天他们更新了 Ctrl-F 查找功能时似乎出现了一个奇怪的错误，但通过简单刷新该页面即可解决此问题。我在今天的新错误后刷新了，但在运行处理程序后它仍然出现。还有其他人遇到这个或有解决方案吗？

* * *

好吧，我已将代码复制粘贴到另一个脚本中，并复制了我正在调用的电子表格，但我仍然收到错误消息。这是根据谷歌错误触发器的“违规”代码：

```
function addNewCo(e) {
  var app=UiApp.getActiveApplication();
  var newCoName=e.parameter.newCoName;
  coSheet.appendRow([newCoName]);
  coSheet.sort(1,true);
  var coSheetValues=coSheet.getRange(2,1,coSheet.getLastRow()-1,coSheet.getLastColumn()).getValues();
  app.getElementById('coNameLB').clear().addItem(newCoName).addItem('').addItem('Select Company ---');
  for (i=0;i<coSheetValues.length;i++){ app.getElementById('coNameLB').addItem(coSheetValues[i][coSheetColNamesArray.indexOf('Company Name')]); }
  app.getElementById('popupPanel').setVisible(false);
  app.getElementById('GoBtn').setStyleAttribute('background','#2a9c3b').setEnabled(true);
  app.getElementById('processingLbl').setVisible(false);
  return app;
} 
```

正如我上面所说，处理程序完成了它的功能，那么为什么会出现这个错误呢？

* * *

这真是太疯狂了。在追加和排序之后，我删除了对工作表的任何引用，换句话说，我完全取出了处理函数中的 getRange，但错误仍然不断弹出！

```
function addNewCo(e) {
  var app=UiApp.getActiveApplication();
  var newCoName=e.parameter.newCoName;
  coSheet.appendRow([newCoName]);
  coSheet.sort(1,true);
  app.getElementById('coNameLB').clear().addItem(newCoName).addItem('').addItem('Select Company ---');
  app.getElementById('popupPanel').setVisible(false);
  app.getElementById('GoBtn').setStyleAttribute('background','#2a9c3b').setEnabled(true);
  app.getElementById('processingLbl').setVisible(false);
  return app;
} 
```

我什至没有调用getRange，那么错误怎么会弹出呢？

* * *

逆天。现在我从处理程序中删除了对电子表格的任何提及，但我仍然得到错误。谷歌什么鬼？！？该`doGet()`函数加载正常，错误仅使用处理程序出现 - 即使没有提及电子表格 - 世界上有什么？！？：

```
function addNewCo(e) {
  var app=UiApp.getActiveApplication();
  var newCoName=e.parameter.newCoName;
  app.getElementById('coNameLB').clear().addItem(newCoName).addItem('').addItem('Select Company ---');
  app.getElementById('popupPanel').setVisible(false);
  app.getElementById('GoBtn').setStyleAttribute('background','#2a9c3b').setEnabled(true);
  app.getElementById('processingLbl').setVisible(false);
  return app;
} 
```

* * *

我已将处理程序函数剥离为仅关闭弹出窗口，但仍然出现错误。

```
function addNewCo(e) {
  var app=UiApp.getActiveApplication();
  app.getElementById('popupPanel').setVisible(false);
  return app;
} 
```

谷歌的任何人都愿意提供帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T22:25:38.397

修复。我有一个文本框作为字段数组的一部分，它可以让其他焦点处理程序出现在不应该出现的地方。谷歌，如果您在某处列出了您的隐秘错误及其含义，并且行号出现在错误消息对话框弹出窗口中，指示问题出在哪里，那么我们不必搜索数百行代码。谷歌搜索来自谷歌应用程序脚本的错误消息没有返回结果是荒谬的。浪费了2个小时。

# java - 数据源 vs 简单连接数据库

> ID：14654196
> 
> 赞同：1
> 
> 时间：2013-02-01T20:10:02.683
> 
> 标签：java, .net, database, connection, datasource

最好的方法是什么？，我需要连接许多远程数据库来解决来自 Restful Web 服务的许多请求。我在想两个解决方案：

1.  每个远程数据库一个数据源，与每个数据源的连接将类似于单例模式。

2.  每个远程数据库一个简单的连接，只是一个连接每个数据库的单例模式。

第一种方法的一个例子是这样的（通过 msdn）：

```
import java.sql.*;
import com.microsoft.sqlserver.jdbc.*;

public class connectDS {

public static void main(String[] args) {

  // Declare the JDBC objects.
  Connection con = null;
  CallableStatement cstmt = null;
  ResultSet rs = null;

  try {
     // Establish the connection. 
     SQLServerDataSource ds = new SQLServerDataSource();
     ds.setUser("UserName");
     ds.setPassword("*****");
     ds.setServerName("localhost");
     ds.setPortNumber(1433); 
     ds.setDatabaseName("AdventureWorks");
     con = ds.getConnection();

     // Execute a stored procedure that returns some data.
     cstmt = con.prepareCall("{call dbo.uspGetEmployeeManagers(?)}");
     cstmt.setInt(1, 50);
     rs = cstmt.executeQuery();

     // Iterate through the data in the result set and display it.
     while (rs.next()) {
        System.out.println("EMPLOYEE: " + rs.getString("LastName") + 
           ", " + rs.getString("FirstName"));
        System.out.println("MANAGER: " + rs.getString("ManagerLastName") + 
           ", " + rs.getString("ManagerFirstName"));
        System.out.println();
     }
  }

  // Handle any errors that may have occurred.
  catch (Exception e) {
     e.printStackTrace();
  }
  finally {
     if (rs != null) try { rs.close(); } catch(Exception e) {}
     if (cstmt != null) try { cstmt.close(); } catch(Exception e) {}
     if (con != null) try { con.close(); } catch(Exception e) {}
     System.exit(1);
  }
 }
} 
```

对于第二种方法，单例示例可能是：

```
public java.sql.Connection conn;
private static Statement statement;

public static MysqlConnect db;

private MysqlConnect() {
    String url= "jdbc:mysql://localhost:3306/";
    String dbName = "Banco";
    String driver = "com.mysql.jdbc.Driver";
    String userName = "root";
    String password = "123456";
    try {
        Class.forName(driver).newInstance();
        this.conn = (java.sql.Connection)DriverManager.getConnection(url+dbName,userName,password);
        System.out.println("Connected to DataBase: " + dbName);
    }
    catch (ClassNotFoundException | InstantiationException | IllegalAccessException | SQLException sqle) {
        System.out.println("Error Inesperado en MysqlConnect" + sqle.toString());
    }
}

/**
 *Method for connect to a database
 * @return MysqlConnect Database connection object
 */
public static synchronized MysqlConnect getDbCon() {
    if ( db == null ) {
        try {
            db = new MysqlConnect();
            statement = db.conn.createStatement();
        } catch (SQLException ex) {
            Logger.getLogger(MysqlConnect.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
    System.out.println("Connection to DB: OK");
    return db;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T20:13:40.647

这取决于您的数据库和查询之间的关系。如果您有大量查询访问单个数据库，例如用户数据库，那么您将需要多个连接到它，否则您的线程最终会阻塞该资源。

最灵活的方法是为每个远程数据库设置一个连接池，并配置每个连接池，以便考虑到它们在任何单个 REST 事务期间被查询的可能性，它们有适当数量的可用连接。

一个好的起点可能是查看 Tomcat 数据源池。请注意，无论您是否使用 Tomcat 作为网络服务器，都可以使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T20:16:25.357

A`Connection`不能被多个线程同时使用，而 a`DataSource`可以。

# r - 在 j 环境中使用函数进行列选择

> ID：14654198
> 
> 赞同：9
> 
> 时间：2013-02-01T20:10:13.460
> 
> 标签：r, data.table

考虑 a 中的以下列选择`data.table`：

```
library(data.table) # using 1.8.7 from r-forge
dt <- data.table(a = 1:5, b = i <- rnorm(5), c = pnorm(i))
dt[, list(a,b)]  #ok 
```

为了在具有许多可变列的某些计算中简化我的代码，我想`list(a,b)`用一个函数替换。这是第一次尝试：

```
.ab <- function()  quote(list(a, b))
dt[, eval(.ab())] #ok - same as above 
```

理想情况下，我想摆脱`eval()`调用`[.data.table`并将其限制在 while 的定义中，`.ab`同时避免将数据表传递`dt`给函数`.ab`。

```
.eab <- function()  eval(quote(list(a, b)))
dt[, .eab()] 
# Error in eval(expr, envir, enclos) : object 'b' not found 
```

发生了什么？如何解决这个问题？

我怀疑困扰我的是 R 的词法作用域以及正确评估`list(a,b)`依赖于它在数据表的*J*环境中的事实`dt`。唉，我不知道如何获取对正确环境的引用并将`envir`其`enclos`用作`dt`.

```
# .eab <- function()  eval(quote(list(a, b)), envir = ?, enclos = ?) 
```

**编辑**

这种方法*几乎*有效：

```
.eab <- function(e)  eval(quote(list(a, b)), envir = e)
dt[, .eab(dt)] 
```

有两个缺点：（1）不返回列名，（2）`dt`必须显式传递（我宁愿避免）。我也宁愿避免硬编码`dt`作为选择环境。这些考虑导致了提出上述问题的另一种方式：是否有一种`dt`从内部获取环境的程序化方式`.eab`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T22:12:29.280

目的是创建一个表达式而不是一个函数。

```
DT[, list(a,b), by=...]  # ok

.ab = quote(list(a, b))    # simpler here, no need for function()

DT[, eval(.ab), by=...]  # same 
```

这种方法是在 data.table 中快速分组的原因之一：`j`在静态环境中对所有组进行评估，因此可以避免每个函数调用的（小）开销。

但是如果`.ab`真的因为某种原因需要成为一个函数，那么我们当然可以进一步考虑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T02:59:34.027

警告，如果内部机制发生变化，这可能不可靠、缓慢和/或可能会中断`[.data.table`，但如果由于某种原因无法绕过它，这里的函数似乎可以满足您的要求。`by`如果您开始使用其他选项（例如in ），我也可以想象它不起作用`[.data.table`。

```
.eab <- function() {
  foo <- quote(list(a,b))
  ans <- eval(foo, envir = parent.frame(3)$x)
  names(ans) <- vapply(as.list(foo)[-1], deparse, character(1))
  ans
}

identical(dt[, .eab()], dt[, list(a,b)])
# TRUE 
```

同样，这是颠覆/减少大量存在的充分理由的代码。

# jquery - 将选择下拉列表转换为打印列表

> ID：14654219
> 
> 赞同：0
> 
> 时间：2013-02-01T20:11:05.550
> 
> 标签：jquery

> **可能重复：**
> [如何使用 jquery 将 <select> 下拉列表转换为无序列表？](https://stackoverflow.com/questions/7336437/how-to-convert-select-dropdown-into-an-unordered-list-using-jquery)

我想将所有选择下拉列表转换为用于打印的 ul 列表。

```
<select>
 <option>Item 1</option>
 <option>Item 2</option>
 <option>Item 3</option>
</select> 
```

进入：

```
<ul>
 <li>Item 1</li>
 <li>Item 2</li>
 <li>Item 3</li>
</ul> 
```

为什么这只显示？：

```
<ul></ul> 
```

jQuery：

```
$('select').parent().append('<ul></ul>');
$('select option').each(function(){
  $('<ul>').append('<li>'+$(this).text()+'</li>');
});

$('select').remove(); 
```

编辑：删除选择 ID。我想逐步完成每个选择，而不仅仅是一个特定的选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T20:12:33.340

您`ul`在循环的每一步都创建了一个新元素。改用这个：

```
var $select = $('#oberservationType'),
    $list = $('<ul />');

$select.find('option').each(function(){
    $list.append('<li>' + $(this).text() + '</li>');
});

$select.after( $list ).remove(); 
```

这是小提琴：http: [//jsfiddle.net/YDbgv/](http://jsfiddle.net/YDbgv/)

* * *

要`select`对页面上的每个人执行此操作，请使用以下命令：

```
$('select').each(function () {
    var $this = $(this),
        $list = $('<ul />');

    $this.find('option').each(function(){
        $list.append('<li>' + $(this).text() + '</li>');
    });

    $this.after( $list ).remove();
}); 
```

这是小提琴：http: [//jsfiddle.net/YDbgv/2/](http://jsfiddle.net/YDbgv/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T20:21:10.443

这应该做。请试一试。

```
$(function()
{
    var items = $('#oberservationType option'), str = '<ul>';
    for (var i = 0, len = items.length; i < len; i++)
    {
        str = str + '<li>'+items[i].innerHTML+'</li>';
    }
    str = str + '</ul>';
    console.log(str);
    $('<div/>').html(str).appendTo('body');
    $('#oberservationType').remove();

}); 
```

# asp.net - 有一个无效的 SelectedValue，因为它不存在于项目列表中。你如何调试？

> ID：14654220
> 
> 赞同：11
> 
> 时间：2013-02-01T20:11:09.543
> 
> 标签：asp.net, data-binding

我在将 asp.net 绑定到下拉列表时遇到问题，我不知道如何调试。我在堆栈上查看了有关此问题的其他问题，但没有任何帮助。据我所知，它应该选择的“名称”在列表中。

```
<asp:DropDownList ID="dd1" runat="server" DataSourceID="ADataSource" DataTextField="Name" 
                                                    DataValueField="Name" SelectedValue='<%# Bind("Name") %>'   Width="255" 
                                                    AppendDataBoundItems="true" TabIndex="3"  Font-Size="small"  EnableViewState="true"    >
                                             <asp:ListItem Text="Select"  Value="" />
                                           </asp:DropDownList> 
```

以下是错误

> System.ArgumentOutOfRangeException 未被用户代码处理 Message='dd1' 有一个无效的 SelectedValue，因为它不存在于项目列表中。参数名称：值 Source=System.Web ParamName=value StackTrace：在 System.Web.UI.WebControls.ListControl.PerformDataBinding(IEnumerable dataSource) 在 System.Web.UI.WebControls.ListControl.OnDataBinding(EventArgs e) 在 System.Web .UI.WebControls.ListControl.PerformSelect() 在 System.Web.UI.WebControls.BaseDataBoundControl.DataBind() 在 System.Web.UI.Control.DataBindChildren() 在 System.Web.UI.Control.DataBind(Boolean raiseOnDataBinding)在 System.Web.UI.Control.DataBind() 在 System.Web.UI.Control.DataBindChildren() 在 System.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-01T20:21:55.767

传递给 SelectedValue 属性的来自 的值`<%# Bind("Name") %>`与其集合中的项目不匹配。最可能的原因：

*   DropDownList 没有项目，因为评估发生在列表绑定之前
*   该列表已绑定，但缺少此特定值
*   返回的值可能为 null

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-10T10:43:56.657

我意识到这是一个旧线程，但谷歌将此作为解决此问题的第一个选项 - 使用相当通用的搜索词。

无论如何，我遇到的问题以及解决方法如下。就像 Brian Mains 所说的那样，问题将会出现，原因如下：

> *   DropDownList 没有项目，因为评估发生在列表绑定之前
> *   该列表已绑定，但缺少此特定值
> *   返回的值可能为 null

我遇到的问题，即使不是很清楚，因为我在使用相同方法的其他一些 DropDowns 上没有收到错误，是在加载页面时，我试图使用此代码-behind 向 DropDownList 添加一个项目：

```
drpNationality.Text = GlobalScript.CountDatabaseRecords("SELECT [nationality_desc] FROM [tbl_people] INNER JOIN [tbl_lkup_nationality] AS nationality ON [nationality] = [nationality_id] WHERE [person_id] ='" + Session["ID"] + "'"); 
```

这是 DropDown HTML（其中包含由数据源填充的项目）：

```
<label>Nationality:</label>
<asp:DropDownList ID="drpNationality" runat="server" DataSourceID="Nationality_Datasource" DataTextField="nationality_desc" DataValueField="nationality_id">
</asp:DropDownList> 
```

现在，我遇到的问题是在加载时数据没有绑定到控件，当我试图在代码中添加项目时。因为我试图在启动时为用户从数据库中预先选择一个值（它确实存在于列表中），所以如果该项目基本上在那里出现了两次，我不会太在意。

**所以我的解决方法如下。**

我将后面的代码更改为以下代码，以便在执行加载事件代码时将该项目添加到 DropDownList 中，然后选择：

```
var = GlobalScript.CountDatabaseRecords("SELECT [nationality] FROM [tbl_people] INNER JOIN [tbl_lkup_nationality] AS nationality ON [nationality] = [nationality_id] WHERE [person_id] ='" + Session["ID"] + "'");
drpNationality.Items.Add(var);
drpNationality.Text = var; 
```

但是为了在页面完全加载后保留在代码隐藏中选择的项目并且不被数据源覆盖，您必须将 HTML 更改为以下内容：

```
<label>Nationality:</label>
<asp:DropDownList ID="drpNationality" runat="server" DataSourceID="Nationality_Datasource" DataTextField="nationality_desc" DataValueField="nationality_id" AppendDataBoundItems="True">
</asp:DropDownList> 
```

现在，当页面加载时，*应该*在下拉列表中预先选择数据库中的值，并且还应该添加所有 DataSource 项。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-09-10T15:13:55.417

DataBind 很臭。我尝试了所有提到的建议，但都没有奏效。最终设置`SelectedValue`为空，清除所有项目（`myDDL.Items.Clear()`），然后遍历我的列表并手动添加新的 ListItems - `myDDL.Items.Add(new ListItem(myListEntry.Text,myListEntry.Value))`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-13T19:32:22.667

我有同样的问题。这是发生了什么。我最初将该值设置为不在我的下拉列表中的值。如果您最初拥有的值不在您想要在下拉列表中显示的值中，那么它将不起作用。例如，如果您最初在数据中包含 Fred，则需要在该下拉列表中包含 Fred。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-07-01T08:37:00.147

如果在分配数据源之前为下拉控件`Text`属性分配了任何值，则会出现此错误。

例子：

```
StatusDropDown.Text = "some value";
StatusDropDown.DataSource = statusDatatable; 
```

在执行第二行时，您将收到该错误。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-03T15:14:08.173

在我的情况下，清除下拉列表的方法最初设置为`ddlname.text = string.empty`.

我将其重置为`ddlname.items.clear()`，这解决了错误。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-03-16T02:16:01.893

我遇到了类似的问题 - 基本问题是我的 RadioButtonList 引用的基础 SQL 数据库字段的格式。我将 DB 字段从 NCHAR 转换为 VARCHAR ...我认为 NCHAR 向字段添加了额外的内容，这在 RadiolButton 的评估中引发了错误。您可能必须将作为 NCHAR 放入的数据删除并加载到 VARCHAR。这对我有用..希望它对你有用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-17T17:17:04.400

在使用不在数据绑定列表中的值对其进行数据绑定之前，请检查您是否正在设置下拉列表的值。

In my case this occurred like I set the value of dropdown with `"ABC"` and the list I was binding with dropdown has got only values `{"1", "2", "3" ,"4"}`

# wpf - .net 4 wpf 功能区中的 Windows 8 本机外观

> ID：14654222
> 
> 赞同：4
> 
> 时间：2013-02-01T20:11:27.610
> 
> 标签：wpf, .net-4.0, windows-8, ribbon

我正在开发一个使用 wpf 功能区的应用程序。

最重要的要求之一是.net 4 支持（因为 Windows XP）。

这是问题所在。.net 4 的功能区没有 Windows 8 样式。我检查了 .net 4.5，那里一切都很好（包括很酷的 win 8 窗口框架）。

是否有启用 win 8 风格但仍支持 .net 4 的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-13T19:49:19.857

请原谅我很久以前就废弃了 .NET 4.0 和 XP :)

[第三方供应商，例如 Devcomponents，可能有您正在寻找的东西。](https://www.devcomponents.com/dotnetbar-wpf/)

但[我敢肯定你已经知道 MapApps 了？](https://github.com/MahApps/MahApps.Metro) 它适用于 C# 5.0 和 async-await 模式。您可以做的是使用 4.0 的 async-await 桥（如果存在）。我为 .NET 3.5 做了同样的事情。但可悲的是，您可能需要做一些手动工作才能将其移植回 4.0 和 C#5？

希望它有所帮助，并希望您至少可以使用 C# 5.0。

干杯，

斯蒂安

# jekyll - 缩短本地 jekyll 服务器的页面生成时间

> ID：14654223
> 
> 赞同：11
> 
> 时间：2013-02-01T20:11:44.443
> 
> 标签：jekyll

运行时`jekyll --server`，将重建整个站点。在足够大的网站上，这需要非常长的时间。即使使用`--auto`应该阻止整个站点重新生成的标志，完成的时间也相当长（对我来说 10 多秒，据报道在几分钟内）。这在编辑和预览单个页面时很不方便。我希望缩短那个时间。

有没有办法确定为什么 Jekyll 需要和重建页面一样长的时间？

或者，是否有关于编辑工作流的建议，允许使用 Jekyll 进行更短的反馈循环？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T16:06:33.270

我无法解决构建完整站点所需的时间，但我想出了一种方法来显着加快起草文档和更改布局的速度。所有这些都假设您在本地机器上工作以进行编辑，然后部署到生产服务器。如果您有不同的流程，您的里程可能会有所不同。

核心思想是使用多个 jekyll 源目录，每个目录都指向同一个输出位置。就我而言，我使用三个。一个用于起草和编辑帖子（称为“_drafts”），一个用于布局、设计和功能更改（称为“_dev”），最后一个包含整个站点的内容（称为“_main”）。

顶级目录结构如下所示：

```
./_drafts
./_dev
./_main
./html 
```

每个 jekyll 源的 _config.yml 文件设置如下，将 jekyll 生成的输出指向“html”目录：

```
destination: ../html 
```

“_drafts”和“_dev”目录包含使它们模仿“_main”站点的设计和功能所需的最少文件数。我在这两个目录中完成所有工作，jekyll 运行在任何正在处理的目录中。我的本地 Web 服务器设置为将本地域（例如`http://jekyll-test/`）指向“html”目录，因此我可以在进行更改时看到发生了什么。

完成编辑后，我将新更新的文件从“_dev”或“_drafts”复制到“_main”中的相应位置。文件准备好后，我会在“_main”中运行最后一次 jekyll。使用这种方法，您只需等待较长的站点生成时间，然后再将站点部署到生产环境。我已经使用这种方法一段时间了，发现它有很大的不同。

还有一些其他方法可以优化工作流程：

*   使用符号链接来帮助保持“_drafts”和“_main”的设计和功能同步。

    如果你在 Mac 或 linux 机器上，设置符号链接指向和`./_drafts/_config.yml`指向（类似的功能可能存在于 Windows 上，但我不能说）。出于某种原因，jekyll 不适用于某些符号链接的目录。例如，在我的安装中，我有一个不能用作符号链接的根级“css”目录。我必须在所有位置都有它的实际副本。`./main/_config.yml``./_drafts/_layouts``./main/_layouts`

*   创建部署脚本。

    当我准备好部署时，我不会直接运行 jekyll。我编写了一个小脚本，在“_main”目录中调用 jekyll，将输出同步到我的生产服务器，然后在完成时通知我。这不仅节省了在 jekyll 上等待的时间，还减少了部署站点所需的步骤。

*   构建额外的脚本和工具。

    从“_dev”和“_drafts”目录复制文件没什么大不了的，但它是添加一些自动化的主要地方。例如，我有一个命令行脚本，它将“_config.yml”文件以及“_layouts”和“css”目录从“_dev”复制到“_drafts”和“_main”（根据需要）。

    案卷上的另一个工具是本地网络应用程序，它将帖子从“_drafts”移动到“_main”。任何使文件移动更容易并减少创建和发布的摩擦的东西都是好的。

*   使用 LiveReload

    在本地运行，`jekyll --auto`非常适合在处理文件时自动生成更改。与之自然搭配的是名为[LiveReload](http://livereload.com)的应用程序。它监视您的本地“html”目录并在内容更改时触发浏览器的自动重新加载。这样做的目的是您可以将浏览器窗口保留在文本编辑器旁边，并在保存文件时自动查看更改。时不时会有点片状，但用了之后，你不知道没有它你是怎么活的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-03T12:15:07.573

这是[Jekyll 在 Github 上的问题跟踪器](https://github.com/mojombo/jekyll/issues)中经常出现的主题。不幸的是，这不是目标之一。例如：

*   [做出`jekyll --auto`具体的](https://github.com/mojombo/jekyll/issues/706)
*   [生成一个包含大约 60K 帖子的网站，永远占用](https://github.com/mojombo/jekyll/issues/560)

只需搜索“编译”和“时间”这两个词，您就能找到更多。它比看起来要难一些，因为存在链接断开的可能性。

此外，如果您使用的是 LSI，请使用最新版本，因为有一个与之相关的修复程序可以使其更快。

我对你的唯一建议是看看你是否真的需要所有这些帖子（我知道，我知道），因为这可能是你现在从问题跟踪器中得到的唯一答案——我们都想解决的问题，但是没有人想开始。

PS：请在问题跟踪器上发布您的问题——抱怨的人越多，解决问题的可能性就越大。

# php - SQL 将值从文件中插入到表中

> ID：14654224
> 
> 赞同：-6
> 
> 时间：2013-02-01T20:11:44.877
> 
> 标签：php, mysql, sql, pdo

我想从文件中将一些值插入到我的表中。我执行以下操作

```
$stmt=$db->prepare(INSERT INTO Info VALUES (NOW(), LOAD DATA INFILE "insert.txt"));
$stmt->execute(); 
```

我收到以下错误消息： Parse Error syntax error unexpected T_STRING on line 6...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T20:13:34.003

```
 $db->prepare("LOAD DATA INFILE 'insert.txt'    
   INTO TABLE `Info`
  FIELDS TERMINATED BY ',' 
  ENCLOSED BY '\"' 
  LINES TERMINATED BY '\n' 
  IGNORE 1 LINES 
  (`your`, `colums`)
  SET `your_time` = NOW()")
  ->execute(); 
```

使用忽略行，设置表名，并使用 SET 插入 NOW()

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T20:16:26.763

您的 PHP 和 MySQL 语法都有问题。首先，您的 SQL 语句需要用引号括起来。其次，for 的语法[`LOAD DATA INFILE`](http://dev.mysql.com/doc/refman/5.0/en/load-data.html)不正确。试试这个：

```
$stmt=$db->prepare("LOAD DATA INFILE 'insert.txt' into table `Info`");
$stmt->execute(); 
```

有关更多选项，请参阅[MySQL 文档。`LOAD DATA INFILE`](http://dev.mysql.com/doc/refman/5.0/en/load-data.html)例如，您可能需要指定字段和行分隔符。如果您需要将一列设置为`now()`函数的值，您可以为此发出单独的`update`查询。

# actionscript-3 - 试图弄清楚如何使用 flex 在 android 上切换地理定位

> ID：14654225
> 
> 赞同：0
> 
> 时间：2013-02-01T20:11:54.163
> 
> 标签：actionscript-3, apache-flex, flash-builder

我试图将拨动开关设置为禁用并停止地理定位程序......

当 geo 设置为新的 Geolocation 时出现空对象错误 - 我在这里错过了什么？

```
 private function gogeo():void
        {
            if (Geolocation.isSupported)
            {
                var geo:Geolocation = new Geolocation();
                geo.setRequestedUpdateInterval(2000);
                geo.addEventListener(GeolocationEvent.UPDATE, geolocationUpdateHandler);
            }
            else
            {
                trace("No geolocation support.");
            }   
        }

        private function geolocationUpdateHandler(event:GeolocationEvent):void
        {
            trace("lat:" + event.latitude.toString() + " - ");
            trace("long:" + event.longitude.toString() + "° - ");
            trace("Accuracy:" + event.horizontalAccuracy.toString() + " m");

        }
        protected function toggleswitch1_changeHandler(event:Event):void
        {

            if (toggleswitch1.selected == false) {
            trace("The function should STOP"); 

            geo.removeEventListener(GeolocationEvent.UPDATE, geolocationUpdateHandler);
            geo = null;

        } else {
            trace("The function should RESTART");

            geo = new Geolocation();
            geo.addEventListener(GeolocationEvent.UPDATE, geolocationUpdateHandler);
        }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T20:41:09.137

在函数之外定义地理：

```
private var geo:GeoLocation;

private function gogeo():void
{
    if (Geolocation.isSupported)
    {
        geo = new Geolocation();
        geo.setRequestedUpdateInterval(2000);
        geo.addEventListener(GeolocationEvent.UPDATE, geolocationUpdateHandler);
    }
    else
    {
        trace("No geolocation support.");
    }   
} 
```

变量仅在其“范围”内可用 - 例如：如果您在函数内定义变量，则只能在该函数内使用

编辑：

要将地理定义为全局：

在您的应用程序的顶层（即在主 mxml 文件中），添加一个公共声明：

```
public var geo:GeoLocation; 
```

然后使用以下命令从您应用中的任何位置访问它：

```
(FlexGlobals.topLevelApplication as MyAppClass).geo 
```

而不仅仅是“地理”；其中 MyAppClass 是您的应用程序的名称（即：您的主 mxml 类的名称）

# git - 长期保存 git stash 修订版

> ID：14654229
> 
> 赞同：4
> 
> 时间：2013-02-01T20:12:04.967
> 
> 标签：git, version-control, patch, git-stash

我如何

“保存”一个 git stash 并将其长期存储，以便我将来可以访问它（也许将其保存在某个补丁文件中），即使在存储本身被清除之后也是如此。IE。如何将某个存储保存到文件中，以便我可以清除当前的存储，并且如果我执行 git stash list 则不会显示任何内容，但是如果我想，将来我仍然可以访问保存的存储修订

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T21:01:32.133

你要求一个文件，但我会使用 git 来保存更改集——比文件更容易跟踪。

创建一个新分支

```
git checkout -b saved_stash 
```

弹出存储，添加并提交

```
git stash pop
git add .
git commit -m 'save stash for later' 
```

当您想再次使用它时，签出分支，重置提交并再次添加到存储

```
git checkout saved_stash
git reset --soft HEAD~1
git stash 
```

此时，您应该拥有与您最初保存的相同的存储状态。

（在运行时输入，命令可能会稍微关闭——我希望只是稍微）

# c++ - c++中的线程序列化是什么意思？

> ID：14654230
> 
> 赞同：15
> 
> 时间：2013-02-01T20:12:05.643
> 
> 标签：c++, c, multithreading, pthreads

我知道序列化对象以及如何将它们保存到磁盘，但是线程序列化实际上意味着什么？有人可以帮我解决这个问题并指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-01T20:34:49.843

您是对的，这是 的两种不同含义`serialization`。您熟悉[数据序列化](http://en.wikipedia.org/wiki/Serialization)，即将数据结构转换为某种规范表示的字节流。在多线程中，术语序列化意味着[线程或进程同步的](http://en.wikipedia.org/wiki/Synchronization_%28computer_science%29#Thread_or_process_synchronization)[互斥](http://en.wikipedia.org/wiki/Mutex)，这意味着一次只能有一个线程对数据结构进行操作。C++11 使用`std::mutex`

```
#include <mutex>
std::mutex file_io_mutex;

{
    std::lock_guard<std::mutex> guard(file_io_mutex);
    std::out << "Only one thread at a time will execute this line." << std::endl;
} 
```

这是[资源获取即初始化 (RAII)](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)的示例，其中资源被同时获取和初始化，并在超出范围时释放（执行到达大括号）。这是一个常见的习惯用法，它确保即使代码在到达块末尾之前抛出异常，也会释放互斥锁。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-01T20:19:50.713

Serialize实际上是指以连续的形式发布，如一个接一个。所以线程序列化意味着确保某组事件不是同时发生在一个序列中

因此，具有序列化线程访问的堆意味着对堆的调用将按照它们进行的顺序发生，并且实际上不会同时发生。这可能是通过全局锁来完成的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T20:21:10.597

在不知道您被告知的具体上下文的情况下，我猜它是指开发使用消息队列来**模拟多线程系统的单线程应用程序。**

这让我回到了过去玩[CircleMUD](http://www.circlemud.org/)衍生产品的日子。整个游戏是在一个线程中实现的，但它必须同时处理 50-100 名*玩家*。我很惊讶他们是如何做到这一点的。

# c# - 使用 Socket.SendFile() 传输 *.exe 文件时遇到问题

> ID：14654236
> 
> 赞同：0
> 
> 时间：2013-02-01T20:12:29.873
> 
> 标签：c#, .net, sockets, sendfile

在 Win7 x64 上的 Visual Studio 2012 Ult 中使用 .NET 4.5 中的 C#。

我正在尝试使服务器通过该`System.Net.Sockets.Socket.SendFile(string filename)`方法传输文件，并让客户端接收它。客户端将接收到的字节附加到它创建的文件的末尾，以在其一侧重建发送的文件。这一切都有效 - 至少对于基本的文本文件。

当我尝试发送 *.exe 文件时，收到的 *.exe 不起作用。在 Notepad++ 中打开源 *.exe 和客户端副本，文件似乎是正确的，只是一些看起来很奇怪的字符不正确。我的问题是我该如何解决这个问题？

由于服务器代码实际上只是使用`Socket.SendFile(string filename)`没有其他相关选项来发送文件，因此我假设客户端是问题所在。

在客户端：

```
private void ListenAndReport(Socket socket)
{
    EndPoint remoteEndPoint = socket.RemoteEndPoint;
    ReceiveObject obj = new ReceiveObject(socket);
    socket.BeginReceive(obj.buffer, 0, packetSize, SocketFlags.None, new AsyncCallback(ReceiveFromListen), obj);
}
private void ReceiveFromListen(IAsyncResult ar)
{
    ReceiveObject obj = (ReceiveObject)ar.AsyncState;  //ReceiveObject just holds a byte[packetSize] buffer and a Socket

    string received = Encoding.UTF8.GetString(obj.buffer);
    WriteToFile(received);

    obj.socket.EndReceive(ar); //!!! necessary?  Doesn't seem to make a difference.
    ListenAndReport(obj.socket);
}
private void WriteToFile(string text)
{
    fileStream.Write(text);
    fileStream.Flush();
} 
```

我的猜测是编码`string received = Encoding.UTF8.GetString(obj.buffer);`不正确，但我已经尝试了所有的 Encoding.something 选项，但它们都没有正确传输文件。

或者，也许文件编写`System.IO.TextWriter fileStream = File.AppendText(string filename);`器是问题所在？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T20:17:38.510

这就是问题：

```
string received = Encoding.UTF8.GetString(obj.buffer); 
```

你为什么做这个？这*不是文本*。您应该将*字节数组*写入文件，而不是字符串。

此外，您应该使用 的*返回值*来`EndReceive`了解您读取了多少数据：

```
int bytesRead = obj.socket.EndReceive(ar);
fileStream.Write(obj.buffer, 0, bytesRead); 
```

（`fileStream`应该是一个实际的*流*，而不是一个`TextWriter`。）

这也适用于文本文件 - 如果您将文本视为二进制文件，您最终会在另一端获得相同的内容，您仍然可以将其作为文本阅读。如果您将二进制数据视为文本，您最终会得到一堆损坏的数据......

# hibernate - junit 和 hibernate - 正确的设置和拆卸以及中间的几个测试

> ID：14654247
> 
> 赞同：0
> 
> 时间：2013-02-01T20:13:09.043
> 
> 标签：hibernate, junit4

我正在尝试为持久性类正确设置junit测试，即使我得到“绿色条”，我也担心几件事。当我在调试器中运行测试文件时，我可以看到 testList() 所有对象都按预期加载，如果任何一个有孩子，它们也会被加载。

```
For testList(), after I do...
instance.update(sg);
List <SettingsGroup> sl = instance.list(); 
```

...我在调试器（最后的屏幕截图）中看到未加载子级。

更新元素并将其取回以验证更新是否发生的正确方法是什么？现在我正在做类似的事情

```
instance.update(sg);
List <SettingsGroup> sl = instance.list(); 
```

...但我不确定。

当我尝试 testDelete() 时，元素列表的大小与删除之前相同，这让我感到奇怪。

当试图研究休眠测试时，我遇到了很多简单的例子，但我还没有得到如何正确设置、拆除和任何会话/事务管理。

我与这个类对应的表有 5 个“硬编码”行，所以我很确定“读取”调用。

测试班

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration( locations = {"applicationContext.xml"})
@Transactional
public class SettingGroupDaoTest extends AbstractJUnit4SpringContextTests {

    public SettingGroupDaoTest(){}
    SettingGroupDao instance;

    @BeforeClass
    public static void setUpClass() throws Exception {}

    @AfterClass
    public static void tearDownClass() throws Exception {}

    @Before
    public void setUp()   {
        Configuration c  = HibernateConfiguration.getHibernateConfiguration()
                .configuration(SettingsGroup.class);

        SessionFactory sessionFactory = c.buildSessionFactory();
        instance = new SettingGroupDao();
        instance.setSessionFactory( sessionFactory );
    }

    @Test
    public void testList() throws Exception {
        SettingsGroup sq = instance.get(1);
        SettingsGroup s1 = sq.getChildren().get(0);
        System.out.println( "children index 2 name: " + s1.getName() );
        System.out.println( "2nd element of children: " + sq.getChildren().get(1).getName() );
    }

    @Test
    public void testUpdate() throws Exception{
        SettingsGroup sg = instance.get(1);
        sg.setName("Updated Name of Setting Group");
        instance.update(sg);
        List <SettingsGroup> sl = instance.list();
        Hibernate.initialize( instance.list() );
        System.out.println( "UPDATED Settings Group Name: " + sg.getName() );
    }

    @Test
    public void testDelete() throws Exception{
        instance.delete( 0 );
        int s = instance.list().size();
        System.out.println( "Size after delete: " + s );
    }
} 
```

为以上测试配置：

```
public class HibernateConfiguration {
    private HibernateConfiguration(){}
    public Configuration configuration( java.lang.Class clazz ) {
        Configuration c = new Configuration();
        c.setProperty(Environment.DRIVER, "org.postgresql.Driver");
        c.setProperty(Environment.URL, "jdbc:postgresql://localhost/###");
        c.setProperty(Environment.USER, "postgres");
        c.setProperty(Environment.PASS, "####");
        c.setProperty(Environment.DIALECT, "org.hibernate.dialect.PostgreSQLDialect");
        c.setProperty(Environment.AUTOCOMMIT, "true"); //"true");
        c.addClass( clazz );
        return c;
    }
    public static HibernateConfiguration getHibernateConfiguration(){
        return new HibernateConfiguration();
    }
} 
```

域类：

```
@Entity
@SequenceGenerator(name = "settings_group_id_seq", sequenceName = "settings_group_id_seq")
@Cache(usage= CacheConcurrencyStrategy.NONSTRICT_READ_WRITE)
@Table(name="settings_group")
public class SettingsGroup implements Serializable, DomainObject {

    private int id;
    private String name;
    private String code;

    private List<SettingsGroup> children = new LinkedList<SettingsGroup>();

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO, generator = "settings_group_id_seq")
    @Column(name = "id", insertable = false)
    public int getId() {return id;}

    public void setId(int id) {this.id = id;}

    @Column(name = "name")
    public String getName() {return name;}

    public void setName(String name) {this.name = name;}

    @Column( name = "code")
    public String getCode() {return code; }

    public void setCode(String code) {this.code = code;}

    @OneToMany( fetch = FetchType.EAGER)
    @JoinColumn( name = "parent_id")
    @OrderColumn
    public List<SettingsGroup> getChildren() {return children;}

    public void setChildren(List<SettingsGroup> children) {this.children = children;}
} 
```

![在此处输入图像描述](../Images/7b068ce7484b10a545ab12afbd23a3c7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T20:24:42.547

一些想法......你正在做的实际上是一个集成测试，因为它需要一个数据库。其次，不是肯定的，但是您是否必须先提交更新才能成功查询更新的行？

# java - 使用 BitmapFactory [OutOfMemoryException] 加载多个图像

> ID：14654249
> 
> 赞同：1
> 
> 时间：2013-02-01T20:13:12.357
> 
> 标签：java, android

我正在尝试使用 BitmapFactory 将 30 个图像加载到位图数组中，但无论我做什么，我都会不断收到 OutOfMemoryException .. 我尝试调整它的大小并缩小比例.. 人们通常做 4-8 我试过 12,16， 20，没用。。

我有一个循环，它加载一串 URL 并每次打开一个新的 httpurlconnection，下载图像，并尝试将其保存为位图。每张图像大约 300kb。

我读过其他人只有一两张图片有这个问题，所以我不确定我想要做什么甚至是可能的。我知道 jpeg 和 png 是压缩格式，文件大小更大手机，因为它是一个未压缩的位图，但必须有一种方法可以有效地将一堆图片保存在一个数组中......因为我以前见过它。

我尝试了 bitmap.recycle()，加载大约需要 20 秒，但没有内存错误，然后当我尝试从位图中查看图像时，它给了我“无法查看回收图像”？

不确定是否有其他人尝试加载许多图片（30-100）并将其保存在位图数组中，或者是否有可能，但无论哪种方式，请告诉我！

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-23T15:51:15.213

我解决了这个问题，并认为我应该帮助有同样问题的人。

我最终使用了 nostra13 的“通用图像加载器” - [https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)

为了避免 OOM 错误，我从我的 API 中加载了两组单独的图像，一组为全尺寸，另一组为缩略图尺寸（100x100 ish）。然后，我为 gridview 加载所有缩略图大小的图像，并且仅在用户单击缩略图时加载完整大小的 INDIVDUAL 图像。通过这样做，我避免了所有 OOM 错误。我还回收了在网格视图中显示下一个之前使用的位图。

希望这会有所帮助:)

# ios - 随机文本（Objective-c）

> ID：14654251
> 
> 赞同：0
> 
> 时间：2013-02-01T20:13:19.233
> 
> 标签：ios, objective-c

我有一个显示随机问题的视图控制器。在这堂课中，我有一个按钮；当您单击此按钮时，它会转到另一个视图并显示正确答案。

我可以显示我的随机问题，但如何在另一个视图中设置我的正确答案？（基于我的问题）

我的随机问题代码是：

```
{
  NSString *one = @"Question 1?";
  NSString *two = @"Question 2?";
  NSString *three = @"Question 3?";
  NSString *four = @"Question 4?";
  NSString *five = @"Question 5?";
  NSString *six = @"Question 6?";

  NSArray *answerComments = [[NSArray alloc] initWithObjects:one, two, three, four, five, six, nil];
  int rand = arc4random()%6;

  NSString *answer = [answerComments objectAtIndex:rand];

  [question setText:(answer)];
  [question setFrame:CGRectMake(50, 295, 200, 80)];
  question.adjustsFontSizeToFitWidth = NO;
  question.numberOfLines = 0;
}

- (IBAction)answer:(id)sender {
  AnswerViewController *b = [[AnswerViewController alloc] init];
  [self.navigationController pushViewController:b animated:YES];
} 
```

在我的下一个视图中，显示了我的正确答案`UILabel *correctAnswer`

```
NSString *one = @"answer 1";
NSString *two = @"answer 2";
NSString *three = @"answer 3";
NSString *four = @"answer 4";
NSString *five = @"answer 5";
NSString *six = @"answer 6"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T20:21:29.513

我认为您的问题是您将模型内容放入控制器中。

你应该做的是有一个选择问题和答案的模型对象。问题控制器将获取问题并将其推送到视图。答案控制器将获取答案并将其推送到视图。

根据您站在单例上的位置，模型将是一个模型，或者您将实例化一个合适的模型并可能将相关的 QuestionAnswer 对象向前推。

# spring - 我可以在一个视图中多次访问同一个控制器而不更改视图吗？

> ID：14654257
> 
> 赞同：1
> 
> 时间：2013-02-01T20:13:43.407
> 
> 标签：spring, model-view-controller, spring-mvc

我正在使用 Spring MVC。我有一个基于从控制器调用的查询动态填充 2 个下拉列表的视图。我想根据第一个下拉选择动态运行查询以更改第二个下拉列表，这意味着再次访问控制器（我认为）。我可以从同一个视图多次访问控制器而不更改视图吗？例如，假设第一个下拉列表是美国各州的列表，第二个是所有美国城市的列表，如果我从第一个列表中选择 NC，我希望将第二个列表更改为仅包含 NC 城市.

这是第一个下拉列表的示例：

```
<select name = "states" onChange = "populateCityList(this.options[this.selectedIndex].value)">
            <option value ="*">All States</option>
            <c:forEach items="${states}" var ="state">
                <option value ="${state}">${state}</option> 
```

很简单，但我真的不知道从那里去哪里。我现在让它在当前视图中调用一个 Javascript 函数，但我不知道这是否正确，或者甚至在该函数中做什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T03:50:40.487

嗨@user2033734，您可以执行以下操作：

`JQuery`代码

```
$(document).ready(function() {
 $("#id1").change(function () {
    position = $(this).attr("name");
    val = $(this).val()
    if((position == 'id1') && (val == 0)) {
        $("#id2").html('<option value="0" selected="selected">Select...</option>')
    } else {
        $("#id2").html('<option selected="selected" value="0">Loading...</option>')
        var id = $("#id1").find(':selected').val()
        $("#id2").load('controllerMethod?yourVariable=' + id, function(response, status, xhr) {
            if(status == "error") {
                alert("No can getting Data. \nPlease, Try to late");
            }
        })
    }
 })
}) 
```

和JSP里面

```
<table style="width: 100%;">
<tr>    
    <td width="40%"><form:label path="">Data 1: </form:label></td>
    <td width="60%">
        <form:select path="" cssClass="" id="id1">
            <form:option value="" label="Select..." />
            <form:options items="${yourList1FromController}" itemValue="id1" itemLabel="nameLabel1" />
        </form:select>
    </td>
</tr>
<tr>
    <td width="40%"><form:label path="">Data 2: </form:label></td>
    <td width="60%">
        <form:select path="" cssClass="" id="id2">
            <form:option value="" label="Select..." />
            <form:options items="${yourList2FromController}" itemValue="id2" itemLabel="nameLabel2" />
        </form:select>
    </td>
</tr>
</table> 
```

**我希望能帮助你:)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T22:57:08.573

神奇的词是 AJAX。

您的 JavaScript 函数需要向控制器发出 AJAX 请求，理想情况下，控制器应该返回一个 JSON 数据结构，其中包含第二个下拉菜单的值。然后，您的 JS 函数应该有一个回调，该回调从您的控制器中捕获 JSON，并通过操作 DOM 填充下拉 HTML。JQuery 是要走的路。网上有很多例子，随便搜一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T23:24:54.363

One solution would be to move some of the data gathering out into a service, so your main controller could use the service to gather the data before sending to the view.

# mysql - MYSQL SELECT AVG() 中满足某些条件的行

> ID：14654260
> 
> 赞同：1
> 
> 时间：2013-02-01T20:13:48.127
> 
> 标签：mysql, excel, average

在我的数据库中有数十万行。我正在尝试计算股票或外汇的 RSI。

的公式`RSI(14)`是：

```
100 - (100 / 1 + RS ) 
```

> RS 是平均收益/平均损失。

该公式回顾过去的 14 行（包括当前行），并对有增益（或向上移动）的行的值进行平均，并将该平均值除以有损失的行的平均值。

我在 MySQL 中遇到的问题是让它选择前 14 行的平均增益和平均损失。这在 Excel 中很容易做到。在 Excel 中，我创建了一个分析是否有增益或损失的列，然后我使用`AVERAGEIF(Range,Criteria,Average_Range)`. 完全没有问题。但是 Excel 无法处理我必须分析的大量行。

我想过这样的事情：

```
SELECT *, 
       id, 
       (SELECT 10000 * Avg(close - open) 
        FROM   `2011` 
        WHERE  id <= 25 
               AND id >= ( 25 - 13 ) 
               AND ( close - open ) >= 0) / (SELECT 10000 * Avg(open - close) 
                                             FROM   `2011` 
                                             WHERE  id <= 25 
                                                    AND id >= ( 25 - 13 ) 
                                                    AND ( open - close ) > 0) 
FROM   `2011` 
LIMIT  50 
```

限制 50 只是为了保持可控。但这并没有达到我想要的效果。它的数学部分恰到好处，但它对每一行重复相同的数字。

因此，当它位于第 25 行时，它会查看第 12 到 25 行。然后对于第 26 行，它会查看第 13 到 26 行，依此类推，这将是每一行的新数字。相反，上面的 SELECT 语句在最后一列中重复相同的数字，这对于每一行应该是不同的，因为它的范围与其他所有内容不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T21:06:22.057

以下是表达查询的更简单方法：

```
select t.*,
        100 - (100 / (1 + avg(case when close - open > 0 then close - open end)/avg(case when open - close > 0 then open - close end))
              ) as RS14
 from `2011` t join
      `2011` t2
      on t2.id between t.id - 14 and t
group by t.id 
```

我不能发誓它会更快，但它可能会。您还应该有一个关于 id 的索引。

如果你真的需要这样的功能，你能切换数据库吗？SQL Server 2012、Oracle 和 Postgres 都提供适用于此类查询的累积求和功能。

我一直在思考这个问题，你可以高效地进行查询。也许更痛苦的方法是使用显式连接：

```
select
from `2011` t0 join
     `2011` t1
     on t0.id = t1.id + 1 join
     `2011` t2
     on t0.id = t1.id + 2 join
     . . .
     2011` t13
     on t0.id = t13.id + 13 
```

您需要使用来自不同表的 14 个变量来计算出所需的表达式。但是，这将有效地使用 id 上的索引并且应该很快（运行可能比写入快）。

另一种方法从观察开始，您可以很容易地获得每 14 个值：

```
select ((t.id-1) div 14)*14,
       100 - (100 / (1 + avg(case when close - open > 0 then close - open end)/avg(case when open - close > 0 then open - close end))           
from `2011` t
group by ((t.id-1) div 14) 
```

表达方式可能并不完全正确。这个想法是使用聚合将 14 行分组在一起。

现在，我们可以通过以下方式获取中间行：

```
select (((t.id-1 + offset) div 14))*14+offset,
       100 - (100 / (1 + avg(case when close - open > 0 then close - open end)/avg(case when open - close > 0 then open - close end))           
from `2011` t cross join
     (select 0 as offset union all select 1 union all . . .
      select 13
     ) offsets
group by (((t.id-1 + offset) div 14))*14+offset 
```

这样做是`cross join`为了获得中间的行。

最后两个中的任何一个都应该表现得很好。我会选择`group by`解决方案，因为它更容易编写、维护和修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T20:25:04.427

问题是 MySQL 不会自动执行电子表格所做的事情，即根据`id`外部查询调整子查询。

您需要一个相关的子查询，如下所示：

```
SELECT A.*, A.id,
        (SELECT 10000 * AVG(B.close - B.open)
         FROM `2011` B
         WHERE B.id <= A.id
               AND B.id >= ( A.id - 13 )
               AND (B.close - B.open) >= 0 / (SELECT 10000 * AVG(C.open - C.close)
                                              FROM `2011` C
                                              WHERE C.id <= A.id
                                                    AND C.id >= (A.id - 13)
                                                    AND (C.open - C.close) > 0)
 FROM `2011` A
 LIMIT 50 
```

# chef-infra - 如何确保每次运行 chef-solo 时都不会运行 chef 脚本块

> ID：14654265
> 
> 赞同：2
> 
> 时间：2013-02-01T20:13:58.827
> 
> 标签：chef-infra

对厨师来说是全新的......我们曾经从 ppa repo 安装 elasticsearch，但现在我想从头开始构建它（repo 不再更新），每次我更改属性/default.rb 中的版本号时

现在我有一个 bash 块，它只是拉下 gz 文件，解压缩并将其链接到正确的位置，但我不知道如何制作它，这样它就不会在我每次运行 chef-solo 时运行。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T22:53:43.410

我创建了一个带有版本的文本文件。逻辑很简单。

*   如果文件不存在：解压。
*   如果文件存在并且版本（用 选中`IO.read(filename)`）不同：解压缩。
*   如果文件存在且版本相同：什么也不做。

默认情况下，创建文件的资源具有`action :nothing`并通过 unzip 通知。这样，如果版本相同，不仅解压缩不会运行，而且版本文件也将保持不变。

伪代码来说明逻辑：

```
unzip "resource_name" do
  not_if { ::File.exists?( filename ) and node[:version]==IO.read( filename ).strip }
  notifies :create, "file[#{filename}]"
end

file filename do
  action :nothing
  content node[:version]
end 
```

# jquery - 在下拉框中选择数据时如何获得自动完成搜索

> ID：14654269
> 
> 赞同：0
> 
> 时间：2013-02-01T20:14:05.503
> 
> 标签：jquery, codeigniter, jquery-autocomplete

代码如下

```
<select name ="dept" id="dept">
   <option value="1">Software</option>
   <option value="2">Marketing</option>
</select>

<input name="section_name" id="section_name" type="text">
<input name="emp_id" id="emp_id" type="text"> 
```

Jquery代码如下

```
$(document).ready(function() {
$('#section_name').keydown(function(){
    $(this).autocomplete({
        source: "<?php echo base_url(); ?>index.php/search_con/section_name",
        minLength: 0,
        autoFocus: true,
        select: function(event, ui)
        {
        }
    });
  });   
$('#emp_id').keydown(function(){
    $(this).autocomplete({
        source: "<?php echo base_url(); ?>index.php/search_con/emp_id",
        minLength: 0,
        autoFocus: true,
        select: function(event, ui)
        {
        }
    });
  });

}); 
```

基本上我希望当我选择部门下拉列表时，它会在部分名称中自动完成，当在自动完成部分名称中搜索部分名称并选择然后这里将出现 emp_id 自动完成，我将搜索 Emp ID。

其他方式我可以说，它将是部门名称下的部门名称和部门名称下的emp_id。

我怎样才能成功解决，请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T20:48:42.630

根据需要制作两个隐藏字段或两个变量，但我会用变量来做

当用户选择某个部门时，您应该告诉服务器在该部门中进行搜索，因此您需要修改您的 BE 代码，以便实现此目的

```
var current_department = ""; 

var current_lang = ""; 

//this will be called when ever the select changed 

$('#dept').change(function(){
current_department =  $(this).find(":selected").text();
}); 
```

在部门自动完成中，您需要在此处发送变量，它将发送您可以设置的部门名称，`val()`而不是由`text()`您决定

现在自动完成现在应该这样

```
$('#section_name').keydown(function(){
    $(this).autocomplete({
        source: "<?php echo base_url(); ?>index.php/search_con/section_name/"+current_department,
        minLength: 0,
        autoFocus: true,
        select: function(event, ui)
        {
               //here you need to tell the next autocomplete what lang you selected e.g. PHP 
              current_lang = ui.item.value; //or .text it's up to you 
        }
    });
  }); 
```

所以下一个自动完成应该是这样的

```
$('#emp_id').keydown(function(){
    $(this).autocomplete({
        source: "<?php echo base_url(); ?>index.php/search_con/emp_id/"+current_lang,
        minLength: 0,
        autoFocus: true,
        select: function(event, ui)
        {
        }
    });
  });

}); 
```

请记住修改您的服务器端代码，我希望这可以帮助您:)

# django - 乔布斯开错了芹菜

> ID：14654274
> 
> 赞同：2
> 
> 时间：2013-02-01T20:14:51.660
> 
> 标签：django, rabbitmq, celery, django-celery

我使用 django celery 和 rabbitmq 作为我的代理（guest rabbit 用户在本地机器上具有完全访问权限）。我有一堆项目都在他们自己的 virtualenv 中，但最近需要在其中 2 个上使用 celery。我有一个 rabbitmq 实例正在运行

```
(project1_env)python manage.py celery worker
 normal celery stuff....
[Configuration]
   broker:      amqp://guest@localhost:5672//
   app:         default:0x101bd2250 (djcelery.loaders.DjangoLoader)

[Queues]
   push_queue:  exchange:push_queue(direct) binding:push_queue 
```

在我的另一个项目中

```
(project2_env)python manage.py celery worker
 normal celery stuff....
[Configuration]
   broker:      amqp://guest@localhost:5672//
   app:         default:0x101dbf450 (djcelery.loaders.DjangoLoader)

[Queues]
   job_queue:   exchange:job_queue(direct) binding:job_queue 
```

当我在 project1 代码中运行任务时，它会在 push_queue 中很好地触发 project1 celery。问题是当我在 project2 中工作时，即使 celery 没有在 project1 上运行，任何任务都试图在 project1 celery 中触发。

如果我启动 project1_env 并启动 celery，我会得到

```
Received unregistered task of type 'update-jobs'. 
```

如果我`list_queues`在兔子中运行，它会显示所有队列

```
...
push_queue  0
job_queue   0
... 
```

我的环境设置 和`CELERYD_CHDIR`都是`CELERY_CONFIG_MODULE`空白的。

我尝试过的一些事情：

*   清除芹菜
*   rabbitmq 上的 force_reset
*   本答案中概述的 rabbitmq 虚拟主机： [Multi Celery projects with same RabbitMQ broker backend process](https://stackoverflow.com/questions/12209652/multi-celery-projects-with-same-rabbitmq-broker-backend-process)
*   移动 django celery 设置并将 CELERY_CONFIG_MODULE 设置为正确的设置
*   将两个项目中的 CELERYD_CHDIR 设置为正确的目录

这些都没有阻止试图在 project1 celery 中工作的 project2 任务。

我在 Mac 上，如果这有所作为或有帮助的话。

**更新**

设置不同的虚拟主机使其一切正常。我只是把它配置错了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T20:29:41.603

If you're going to be using the same RabbitMQ instance for both Celery instances, you'll want to use virtual hosts. This is what we use and it works. You mention that you've tried it, but your broker URLs are both `amqp://guest@localhost:5672//`, with no virtual host specified. If both Celery instances are connected to the same host and virtual host, they will produce to and consume from the same set of queues.

# android - JavaCV Android 的 UnsatisfiedLinkError

> ID：14654275
> 
> 赞同：1
> 
> 时间：2013-02-01T20:14:53.230
> 
> 标签：android, eclipse, javacv

我正在尝试让 JavaCV 为 android 工作，以便使用 FFMPEG 库。我正在按照我在下面复制的 JavaCV[网站](http://code.google.com/p/javacv/ "JavaCV 网站")上的 android 设置说明进行操作：

> Eclipse（Android 2.2 或更高版本）：按照此页面上的说明进行操作：http: [//developer.android.com/training/basics/firstapp/](http://developer.android.com/training/basics/firstapp/) 转到文件 > 新建 > 文件夹，选择您的项目作为父文件夹，键入“libs/ armeabi”作为文件夹名称，然后单击完成。将 javacpp.jar 和 javacv.jar 复制到新创建的“libs”文件夹中。将 javacv-android-arm.jar、opencv-2.4.3-android-arm.zip 和 ffmpeg-1.0-android-arm.zip 中的所有 *.so 文件直接提取到新创建的“libs/armeabi”文件夹中，不创建任何新的子目录。导航到项目 > 属性 > Java 构建路径 > 库，然后单击“添加 JAR...”。从新创建的“libs”文件夹中选择 javacpp.jar 和 javacv.jar。

我正在尝试在我的代码中使用 FFmpegFrameGrabber 类。当我运行时，我从 logcat 收到此错误：

> 02-01 14:40:35.550: W/dalvikvm(11583): 异常 Ljava/lang/UnsatisfiedLinkError; 初始化 Lcom/googlecode/javacv/cpp/avutil 时抛出；
> 
> 02-01 14:40:35.550: W/dalvikvm(11583): 异常 Ljava/lang/ExceptionInInitializerError; 初始化 Lcom/googlecode/javacv/cpp/avcodec 时抛出；
> 
> 02-01 14:40:35.550: D/AndroidRuntime(11583): 关闭 VM
> 
> 02-01 14:40:35.550: W/dalvikvm(11583): threadid=1: 线程以未捕获的异常退出 (group=0x40015560)

这让我相信我的 android 应用程序找不到我放在 libs/armeabi 文件夹中的 avutil.so 和 avcodec.so。但是，当我解压缩生成的 APK eclipse 时，两个 so 文件都存在。

关于这个问题的原因有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-25T04:00:37.963

对于遇到此问题的任何人，我都设置了一个[Gist](https://gist.github.com/vxhviet/cd39621ae768be07dca30e399c36c034)，提供有关如何在 Android Studio 2.1.1 上设置 JavaCV 1.1 的分步说明。

本教程将使用 JavaCV 1.1，版本 1.2 目前有[SIGSEGV 问题](https://github.com/bytedeco/javacv/issues/412)。JavaCV 1.1 附带 FFmpeg 2.8.1。

1.  [在此处](http://search.maven.org/remotecontent?filepath=org/bytedeco/javacv/1.1/javacv-1.1-bin.zip)获取预编译二进制文件。
2.  解压并复制这些文件：
    *   *javacpp.jar*（**必不可少**）。
    *   *javacv.jar*（**必不可少**）。
    *   *ffmpeg.jar*（**如果您使用 FFmpeg 则必不可少**）。
    *   *ffmpeg-android-arm.jar*（用于 arm CPU）。
    *   *ffmpeg-android-x86.jar*（x86 CPU 可选）。进入`libs`您的项目文件夹（`app/libs`在我的情况下）。
3.  单击`app`-> `F4`-> `Dependencies`-> `+`-> `File dependencies`-> 选择所有以前的*.jar*。
4.  由于[这个问题](https://github.com/bytedeco/javacv/issues/245)，我们暂时需要设置`targetSdkVersion 22`应用程序的`build.gradle`.
5.  可能需要在 中设置`packagingOptions`这些`build.gradle`：

android { compileSdkVersion 23 buildToolsVersion "23.0.3"

```
defaultConfig {
    applicationId "com.example.test"
    minSdkVersion 16
    targetSdkVersion 22
    versionCode 1
    versionName "1.0"
}

packagingOptions {
    exclude 'META-INF/LICENSE.txt'
    exclude 'META-INF/NOTICE.txt'
    exclude 'META-INF/maven/org.bytedeco.javacpp-presets/ffmpeg/pom.properties'
    exclude 'META-INF/maven/org.bytedeco.javacpp-presets/ffmpeg/pom.xml'

    //might need these if you use openCV
    //exclude 'META-INF/maven/org.bytedeco.javacpp-presets/opencv/pom.properties'
    //exclude 'META-INF/maven/org.bytedeco.javacpp-presets/opencv/pom.xml'
} 
```

}

# asp.net - 是否可以通过 Microsoft Ajax Minifier 拒绝缩小 css 文件中的一行（或区域）？

> ID：14654276
> 
> 赞同：4
> 
> 时间：2013-02-01T20:14:53.940
> 
> 标签：asp.net, firefox, css, microsoft-ajax-minifier, cassette

我开始在我们的项目中使用[Cassette](http://getcassette.net)库。该库默认使用 Microsoft Ajax Minifier。我仅在 Firefox 浏览器中遇到破坏某些页面上的 html 布局的问题。我发现这个问题与 CSS3 函数 calc() 有关。在此函数中，+ 和 - 运算符必须始终被空格[包围。](https://developer.mozilla.org/en-US/docs/CSS/calc)我可以在这个缩小区域之外的某个地方重新定义这个属性，但我不想这样做。我想在文件中修复它。是否可以？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T08:00:52.317

我发现`-moz-`对函数使用前缀`calc`使其在缩小器之后保持不变。例子：

```
.some_class {
  width: calc(24.3% - 30px);
  width: -webkit-calc(24.3% - 30px);
  width: -moz-calc(24.3% - 30px);
} 
```

变成：

```
.some_class{width:calc(24.3%- 30px);width:-webkit-calc(24.3% - 30px);width:-moz-calc(24.3% - 30px)} 
```

# c++ - 如何通过 OpenSSL 的 C++（或 VC++）帮助创建 DomainKey-Signature 和 DKIM-Signature，这可能吗？

> ID：14654277
> 
> 赞同：0
> 
> 时间：2013-02-01T20:15:03.243
> 
> 标签：c++, email, visual-c++, openssl, email-validation

我有一个公钥/私钥对，我将我的公钥提交到服务器 DNS TXT 记录（在 SPF 记录中），我有一个私钥文件。我想为电子邮件创建 DKIM-Signature 和 DomainKey-Signature，所以我想通过私钥加密文本消息以将其发送到电子邮件服务器。我想使用 SHA-256 作为加密哈希和 RSA 作为公钥加密方案。我想使用 OpenSSL 和 C++ 来制作 DKIM 签名和 DomainKey-Signature 的电子邮件..

这是我在服务器 TXT 记录中的公钥：

```
 -----BEGIN PUBLIC KEY-----
    MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCnHVS+q65lvG2xocltTYgPGt9F
    aysGZTrcOwHedo8tX1dyPrcx2I8x/cvB9nmfdAkt65aGFAlBZrofbPCr2Mq4wDdv
    IZ31KSuyMQI4T68ylWNT89GewQF6AOkpY1E2bW+oDXc+MpbtpYXY1rUJAS/Abt5v
    Xi7gwKN9FSJ3mm9bjQIDAQAB
    -----END PUBLIC KEY----- 
```

这是我的女贞钥匙：

```
 -----BEGIN RSA PRIVATE KEY-----
    MIICXQIBAAKBgQCnHVS+q65lvG2xocltTYgPGt9FaysGZTrcOwHedo8tX1dyPrcx
    2I8x/cvB9nmfdAkt65aGFAlBZrofbPCr2Mq4wDdvIZ31KSuyMQI4T68ylWNT89Ge
    wQF6AOkpY1E2bW+oDXc+MpbtpYXY1rUJAS/Abt5vXi7gwKN9FSJ3mm9bjQIDAQAB
    AoGACXuxnmxRpjZOJ0FeE9TNfsXwm5jcRS2jbHHwxjYGI/YAGVyTusFmRtj3Iheh
    iTnld3SiAxPJ/qscrsHY2nef8Up60V7RF8bs+sbICnHbdz8ZoKxN9dEFCwJkIl55
    dv0GHjox6UgWUUkUAiHCM2EgG5eOOQ8PsuXY8LpPWLvfuyUCQQDbkFG9y/Q/3lmb
    CdYfBpsP3qvma+fdgCw9lRXTowhu0rKen/CC3rFkHMeHfSW9GHuR8QbPYdVA6d9H
    Y7KxYa7LAkEAwtjTEo/zAVexH/+YgiqL6w89BHlTAmwIEkXpqtAnE86kDDCekYdE
    fRIdGK1zHDOUddMAhwoJQjJzy/NJreQ8BwJBAMoJ6U3vKZjD8Ex8Jq5yE6nsyt3D
    mZ73XL5mO6l9sjrYY0kX/+dNKIro+KoyfNGef8bxtcSLUALlsnIsybf0HTUCQQCR
    DD4cvGJHJpOp4WkTxT6Bjsd6lCKyU9+yUq8/RFNC0HqYxHzWkx7uCFT2sPBXFyK2
    j4v9+v+ncs13DzZTJ+tzAkBI6UWHtsn839nrAT32M8PEPF/TuDmqebMhFOaTl4an
    W0Jr8w8iGk2gvQS2cXEPNh4XT9AgcTKDQkhui4RgxK4F
    -----END RSA PRIVATE KEY----- 
```

我尝试了 OpenSSL 的一些代码帮助，但我无法为电子邮件创建 DKIM-Signature 和 DomainKey-Signature ..

这是代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <openssl/bio.h>
#include <openssl/pkcs7.h>
#include <openssl/pkcs12.h>
#include <openssl/x509.h>

/ * Arguments: to be signed email, PKCS#12 certificate with private key
 */
int main(int argc, char** argv) {

    if (argc < 3) exit(1);
    OpenSSL_add_all_algorithms();

    BIO *data = BIO_new_file(argv[1], "rb");
    if (!data) exit(1);

    BIO *p12file = BIO_new_file(argv[2], "rb");
    if (!p12file) exit(1);
    PKCS12 *p12 = d2i_PKCS12_bio(p12file, NULL);
    if (!p12) exit(1);

    X509 *signcert;
    EVP_PKEY *pkey;
    STACK_OF(X509) *ca;
    int ret = PKCS12_parse(p12, "", &pkey, &signcert, &ca);
    if (!ret) exit(1);

    PKCS7 *p7 = PKCS7_sign(signcert, pkey, ca, data, 0);
    if (!p7) exit(1);

    BIO *out = BIO_new_file("email.eml", "wb");
    if (!out) exit(1);

    ret = SMIME_write_PKCS7(out, p7, data, 0);
    if (!ret) exit(1);

    BIO_free(data);
    BIO_free(p12file);
    PKCS12_free(p12);
    PKCS7_free(p7);

    return (EXIT_SUCCESS);
} 
```

任何人都可以帮助我如何使用我的 Privet 密钥和文本来创建这个“DKIM-Signature and DomainKey-Signature”????

```
This is not working : BIO *p12file = BIO_new_file(argv[2], "rb"); 
```

我没有“PKCS#12 证书”，所以我将如何只使用我的 Privet 密钥和电子邮件的短信来创建“DKIM-Signature 和 DomainKey-Signature”？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-17T06:01:20.123

您的私钥和公钥采用 PEM 格式。您可以使用 OpenSSL 将其转换为 PKCS#12。

```
openssl pkcs12 -export -out certificate.pfx -inkey privateKey.key -in certificate.crt -certfile CACert.crt 
```

话虽如此，这对您没有帮助。您提供的源代码用于使用 S/MIME 对电子邮件进行签名。这使用由官方证书颁发机构签名的个人证书，而不是使用自签名证书。这也提供了加密电子邮件的能力，前提是收件人的密钥链中有您的公钥。

您正在寻找的是 DKIM 和 DomainKeys。这分别使用 SHA256 和 SHA1 进行签名和散列。它在计算上比 S/MIME 便宜，但需要在计算哈希之前对标头和正文进行规范化（Google it）。

我建议你看看 Github 上的 PHPMailer projet。虽然这是 PHP 源代码，但它应该很容易适应在 C 中工作。它只涵盖了 DKIM 实现，但 DKIM 取代了 DomainKeys，所以我不会费心实现 DomainKeys。

# copy - 复制所有页面 - MediaWiki

> ID：14654280
> 
> 赞同：2
> 
> 时间：2013-02-01T20:15:23.207
> 
> 标签：copy, mediawiki, wiki

关于如何轻松地从 MediaWiki 站点复制所有页面并将它们复制到我自己的站点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T20:21:55.447

创建一个循环遍历页面的脚本（[http://en.wikipedia.org/w/api.php?action=query&list=allpages](http://en.wikipedia.org/w/api.php?action=query&list=allpages)），获取内容（[http://en.wikipedia.org/w/api. php?action=query&prop=revisions&titles=Main%20Page&rvprop=content ）并使用](http://en.wikipedia.org/w/api.php?action=query&prop=revisions&titles=Main%20Page&rvprop=content)[mediawiki API](http://en.wikipedia.org/w/api.php)将其插入另一个 MW 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T17:32:45.707

你应该：

1.  备份数据库
2.  备份 MediaWiki 文件
3.  重新创建数据库、用户和权限
4.  导入数据库备份
5.  导入 MediaWiki 文件
6.  检查配置文件

所有信息都可以在这里找到：[Manual:Moving a wiki](https://www.mediawiki.org/wiki/Manual%3aMoving_a_wiki)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-16T12:01:04.887

有点晚了，但是：维基媒体提供转储：

[http://en.wikipedia.org/wiki/Wikipedia:Database_download](http://en.wikipedia.org/wiki/Wikipedia:Database_download)

# jquery - $.get 用于延迟对象数组中的每一项

> ID：14654282
> 
> 赞同：0
> 
> 时间：2013-02-01T20:15:39.827
> 
> 标签：jquery, jquery-deferred, jquery-get

我有一个对象数组，我试图对其进行迭代并为列表构建标记。我正在使用一个数组来存储延迟的请求，并在所有请求完成后使用 $.when 将连接的标记注入到 DOM 中。

这是代码：

```
function populateItemList(items) {
  var output = '',
    item = null,
    template = null,
    defers = [];

  for (var i = 0, j = items.length; i < j; i++) {
    item = items[i];

    defers.push(function() {
      $.get('/item/' + item.id + '/template')
      .done(function(source) {
        template = Handlebars.compile(source);
        output += template(item);

        console.log(item.id + ': done');
      })
    });
  }

  $.when.apply(window, defers).done(function() {
    $('.itemListContainer').html(output);
    $('.itemList a').click(onItemLinkClick);

    console.log('when: ' + output);
  });
} 
```

但是，我没有任何成功。我遇到了两个问题之一：

1.  如果我*确实*将延迟项目包装在一个函数中（如上面的代码中所示），则不会执行请求，但 $.when*会执行*。但是由于请求没有被执行，所以输出是空的。
2.  如果我*不*将延迟项目包装在函数中，则请求会被执行（正确的次数，但记录到控制台的 item.id 始终是最后一个项目的 id），而 $.when*不会*被执行。

我知道这与[这个问题](https://stackoverflow.com/questions/8002316/dealing-with-arrays-of-deferred-objects)非常相似，我正在使用该代码作为我的基础，但我仍然遇到这些问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T20:28:55.017

当您将代码包装在这样的函数中时，代码永远不会被执行。您推入数组的是对函数的引用，而不是 AJAX 调用的结果。

当您不将代码包装在一个函数中时，它确实会被执行，但是当您`item`在回调中使用局部变量时，您将使用该变量在响应到达时所具有的值，而不是在请求时寄了，送了。`populateItemList`由于请求是异步的，并且由于 Javascript 是单线程的，因此在您从函数返回之前不会调用回调，因此`item`变量将始终是最后一项。

您应该将代码包装在一个函数中，这样您就可`item`以为每次迭代创建一个变量，但您也应该立即执行该函数，并将返回值推送到数组中：

```
for (var i = 0, j = items.length; i < j; i++) {

  var result = (function(item) {
    return $.get('/item/' + item.id + '/template')
    .done(function(source) {
      template = Handlebars.compile(source);
      output += template(item);
      console.log(item.id + ': done');
    });
  }(items[i]));

  defers.push(result);
} 
```

# html - 个人资料的div定位

> ID：14654283
> 
> 赞同：-2
> 
> 时间：2013-02-01T20:15:40.153
> 
> 标签：html, css

我想创建一个简历页面，左侧有一张图片，图片右侧有姓名、标题、电子邮件和电话，在图片和右侧的文字之后，还有一些关于此人的信息。这是我正在使用的代码，但它不起作用。我的图像和右侧的文本显示在我希望它们显示的位置，但是我的信息 div 显示在我的姓名、标题等部分旁边。

```
<div>
<div style="float:left"><img src="Images/fowler.jpg" alt="Fowler" /></div>

<div style="float:left">

<div>Name</div>
<div>Title</div>
<div>Email</div>
<div>Phone</div>

</div>

</div>

<div>Info about person</div> 
```

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T20:25:49.577

正如有人已经说过的那样，您可能需要考虑使用 css。我个人非常喜欢为此创建表格：这应该是一个好的开始：

```
<table>
<tr>
  <td rowspan="5">
    <img src="Images/fowler.jpg" alt="Fowler" />
  </td>
</tr>
<tr>
  <td>Name</td>
</tr>
<tr>
  <td>Title</td>
</tr>
<tr>
  <td>Email</td>
</tr>
<tr>
  <td>Phone</td>
</tr>
<tr>
  <td colspan="2">Info about person</td>
</tr>
</table> 
```

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T20:19:55.727

如果我明白你想要什么，以下可能会起作用

```
<div>
<div style="float:left"><img src="Images/fowler.jpg" alt="Fowler" /></div>

<div style="float:left">

<div>Name</div>
<div>Title</div>
<div>Email</div>
<div>Phone</div>

</div>

</div>

<div style="float:left">Info about person</div> 
```

顺便说一句，考虑在 ext 文件中声明你的 CSS ;)

# ios - 使用裁剪到 VideoPreviewLayer 的 AVFoundation 录制视频

> ID：14654286
> 
> 赞同：1
> 
> 时间：2013-02-01T20:16:01.667
> 
> 标签：ios, objective-c

我正在使用 AVFoundation 框架并根据捕获视频实现并在我的视图上设置一个 previewLayer，显示输出大小为 640 x 480。我希望将视频裁剪到这一帧（这样用户就可以得到他们想要的在 UI 中作为输出查看），但我无法找到应该发生这种更改的点。

我想在捕获之前/期间而不是在用户拍摄视频之后裁剪视频，因为用户将在“向导”中拍摄多个视频，并且我试图限制步骤之间的时间。

这甚至可能吗？

这是捕获会话的设置代码：

```
AVCaptureSession *newCaptureSession = [[AVCaptureSession alloc] init];
newCaptureSession.sessionPreset = AVCaptureSessionPresetiFrame1280x720;

// Add inputs and output to the capture session
if ([newCaptureSession canAddInput:newVideoInput]) {
    [newCaptureSession addInput:newVideoInput];
}
if ([newCaptureSession canAddInput:newAudioInput]) {
    [newCaptureSession addInput:newAudioInput];
}
if ([newCaptureSession canAddOutput:newStillImageOutput]) {
    [newCaptureSession addOutput:newStillImageOutput];
}

[self setStillImageOutput:newStillImageOutput];
[self setVideoInput:newVideoInput];
[self setAudioInput:newAudioInput];
[self setSession:newCaptureSession];

// Set up the movie file output
NSURL *outputFileURL = [self tempFileURL];
AVCamRecorder *newRecorder = [[AVCamRecorder alloc] initWithSession:[self session] outputFileURL:outputFileURL];
[newRecorder setDelegate:self];

// Send an error to the delegate if video recording is unavailable
if (![newRecorder recordsVideo] && [newRecorder recordsAudio]) {
    NSString *localizedDescription = NSLocalizedString(@"Video recording unavailable", @"Video recording unavailable description");
    NSString *localizedFailureReason = NSLocalizedString(@"Movies recorded on this device will only contain audio. They will be accessible through iTunes file sharing.", @"Video recording unavailable failure reason");
    NSDictionary *errorDict = [NSDictionary dictionaryWithObjectsAndKeys:
                               localizedDescription, NSLocalizedDescriptionKey, 
                               localizedFailureReason, NSLocalizedFailureReasonErrorKey, 
                               nil];
    NSError *noVideoError = [NSError errorWithDomain:@"AVCam" code:0 userInfo:errorDict];
    if ([[self delegate] respondsToSelector:@selector(captureManager:didFailWithError:)]) {
        [[self delegate] captureManager:self didFailWithError:noVideoError];
    }
}

[self setRecorder:newRecorder]; 
```

录像启动方法：

```
-(void)startRecordingWithOrientation:(AVCaptureVideoOrientation)videoOrientation;
{
    AVCaptureConnection *videoConnection = [AVCamUtilities     connectionWithMediaType:AVMediaTypeVideo fromConnections:[[self movieFileOutput] connections]];

if ([videoConnection isVideoOrientationSupported])
    [videoConnection setVideoOrientation:videoOrientation];

[[self movieFileOutput] startRecordingToOutputFileURL:[self outputFileURL] recordingDelegate:self];
} 
```

# perl - 使用 Perl 抓取网站

> ID：14654288
> 
> 赞同：8
> 
> 时间：2013-02-01T20:16:05.523
> 
> 标签：perl, web-scraping

我有兴趣编写一个转到以下链接并提取数字 1975 的 perl 脚本：[https ://familysearch.org/search/collection/results#count=20&query=%2Bevent_place_level_1%3ACalifornia%20%2Bevent_place_level_2%3A%22San %20迭戈%22%20%2Bbirth_year%3A1923-1923~%20%2Bgender%3AM%20%2Brace%3AWhite&collection_id=2000219](https://familysearch.org/search/collection/results#count=20&query=%2Bevent_place_level_1%3ACalifornia%20%2Bevent_place_level_2%3A%22San%20Diego%22%20%2Bbirth_year%3A1923-1923~%20%2Bgender%3AM%20%2Brace%3AWhite&collection_id=2000219)

该网站是 1923 年出生的白人男性的数量，他们于 1940 年居住在加利福尼亚州圣地亚哥县。我试图在循环结构中做到这一点，以概括多个县和出生年份。

在文件 locations.txt 中，我放置了县列表，例如圣地亚哥县。

当前代码运行，但不是#1975，而是显示未知。数字 1975 应该在 $val\n 中。

我将非常感谢任何帮助！

```
#!/usr/bin/perl

use strict;

use LWP::Simple;

open(L, "locations26.txt");

my $url = 'https://familysearch.org/search/collection/results#count=20&query=%2Bevent_place_level_1%3A%22California%22%20%2Bevent_place_level_2%3A%22%LOCATION%%22%20%2Bbirth_year%3A%YEAR%-%YEAR%~%20%2Bgender%3AM%20%2Brace%3AWhite&collection_id=2000219';

open(O, ">out26.txt");
 my $oldh = select(O);
 $| = 1;
 select($oldh);
 while (my $location = <L>) {
     chomp($location);
     $location =~ s/ /+/g;
      foreach my $year (1923..1923) {
                 my $u = $url;
                 $u =~ s/%LOCATION%/$location/;
                 $u =~ s/%YEAR%/$year/;
                 #print "$u\n";
                 my $content = get($u);
                 my $val = 'unknown';
                 if ($content =~ / of .strong.([0-9,]+)..strong. /) {
                         $val = $1;
                 }
                 $val =~ s/,//g;
                 $location =~ s/\+/ /g;
                 print "'$location',$year,$val\n";
                 print O "'$location',$year,$val\n";
         }
     } 
```

更新：API 不是一个可行的解决方案。我一直在与网站开发人员联系。API 不适用于网页的该部分。因此，任何与 JSON 有关的解决方案都将不适用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T21:02:38.663

您的数据似乎是由 Javascript 生成的，因此 LWP 无法帮助您。也就是说，您感兴趣的网站似乎有一个开发者 API：[https ://familysearch.org/developers/](https://familysearch.org/developers/)

我建议使用[Mojo::URL](https://metacpan.org/module/Mojo::URL)来构造您的查询，并使用[Mojo::DOM](https://metacpan.org/module/Mojo::DOM)或[Mojo::JSON](https://metacpan.org/module/Mojo::JSON)来分别解析 XML 或 JSON 结果。当然其他模块也可以，但是这些工具集成得非常好，可以让你快速上手。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-04T08:20:58.150

您可以使用 WWW::Mechanize::Firefox 来处理任何可以被 Firefox 加载的站点。

[http://metacpan.org/pod/WWW::Mechanize::Firefox::Examples](http://metacpan.org/pod/WWW::Mechanize::Firefox::Examples)

您必须安装 Mozrepl 插件，您将能够通过此模块处理网页内容。基本上，您将“远程控制”浏览器。

这是一个例子（也许工作）

```
use strict;
use warnings;
use WWW::Mechanize::Firefox;

my $mech = WWW::Mechanize::Firefox->new(
    activate => 1, # bring the tab to the foreground
);
$mech->get('https://familysearch.org/search/collection/results#count=20&query=%2Bevent_place_level_1%3ACalifornia%20%2Bevent_place_level_2%3A%22San%20Diego%22%20%2Bbirth_year%3A1923-1923~%20%2Bgender%3AM%20%2Brace%3AWhite&collection_id=2000219',':content_file' => 'main.html');

my $retries = 10;
while ($retries-- and ! $mech->is_visible( xpath => '//*[@class="form-submit"]' )) {
      print "Sleep until we find the thing\n";
      sleep 2;
};
die "Timeout" if 0 > $retries;
#fill out the search form
my @forms = $mech->forms();
#<input id="census_bp" name="birth_place" type="text" tabindex="0"/>    
#A selector prefixed with '#' must match the id attribute of the input. A selector prefixed with '.' matches the class attribute. A selector prefixed with '^' or with no prefix matches the name attribute.
$mech->field( birth_place => 'value_for_birth_place' );
# Click on the submit
$mech->click({xpath => '//*[@class="form-submit"]'}); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-07T03:40:56.067

如果您使用浏览器的开发工具，您可以清楚地看到您链接到的页面用于获取您要查找的数据的 JSON 请求。

这个程序应该做你想做的。我添加了一堆注释以提高可读性和解释性，并进行了一些其他更改。

```
use warnings;
use strict;
use LWP::UserAgent;
use JSON;
use CGI qw/escape/;

# Create an LWP User-Agent object for sending HTTP requests.
my $ua = LWP::UserAgent->new;

# Open data files
open(L, 'locations26.txt') or die "Can't open locations: $!";
open(O, '>', 'out26.txt') or die "Can't open output file: $!";

# Enable autoflush on the output file handle
my $oldh = select(O);
$| = 1;
select($oldh);

while (my $location = <L>) {
    # This regular expression is like chomp, but removes both Windows and
    # *nix line-endings, regardless of the system the script is running on.
    $location =~ s/[\r\n]//g;
    foreach my $year (1923..1923) {
        # If you need to add quotes around the location, use "\"$location\"".
        my %args = (LOCATION => $location, YEAR => $year);

        my $url = 'https://familysearch.org/proxy?uri=https%3A%2F%2Ffamilysearch.org%2Fsearch%2Frecords%3Fcount%3D20%26query%3D%252Bevent_place_level_1%253ACalifornia%2520%252Bevent_place_level_2%253A^LOCATION^%2520%252Bbirth_year%253A^YEAR^-^YEAR^~%2520%252Bgender%253AM%2520%252Brace%253AWhite%26collection_id%3D2000219';
        # Note that values need to be doubly-escaped because of the
        # weird way their website is set up (the "/proxy" URL we're
        # requesting is subsequently loading some *other* URL which
        # is provided to "/proxy" as a URL-encoded URL).
        #
        # This regular expression replaces any ^WHATEVER^ in the URL
        # with the double-URL-encoded value of WHATEVER in %args.
        # The /e flag causes the replacement to be evaluated as Perl
        # code. This way I can look data up in a hash and do URL-encoding
        # as part of the regular expression without an extra step.
        $url =~ s/\^([A-Z]+)\^/escape(escape($args{$1}))/ge;
        #print "$url\n";

        # Create an HTTP request object for this URL.
        my $request = HTTP::Request->new(GET => $url);
        # This HTTP header is required. The server outputs garbage if
        # it's not present.
        $request->push_header('Content-Type' => 'application/json');
        # Send the request and check for an error from the server.
        my $response = $ua->request($request);
        die "Error ".$response->code if !$response->is_success;
        # The response should be JSON.
        my $obj = from_json($response->content);
        my $str = "$args{LOCATION},$args{YEAR},$obj->{totalHits}\n";
        print O $str;
        print $str;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T12:01:50.227

这似乎可以满足您的需求。它不是等待沙漏消失，而是等待 - 更明显的是我认为 - 等待您感兴趣的文本节点的出现。

```
use 5.010;
use warnings;

use WWW::Mechanize::Firefox;

STDOUT->autoflush;

my $url = 'https://familysearch.org/search/collection/results#count=20&query=%2Bevent_place_level_1%3ACalifornia%20%2Bevent_place_level_2%3A%22San%20Diego%22%20%2Bbirth_year%3A1923-1923~%20%2Bgender%3AM%20%2Brace%3AWhite&collection_id=2000219';

my $mech = WWW::Mechanize::Firefox->new(tab => qr/FamilySearch\.org/, create => 1, activate => 1);
$mech->autoclose_tab(0);

$mech->get('about:blank');
$mech->get($url);

my $text;
while () {
  sleep 1;
  $text = $mech->xpath('//p[@class="num-search-results"]/text()', maybe => 1);
  last if defined $text;
}

my $results = $text->{nodeValue};
say $results;
if ($results =~ /([\d,]+)\s+results/) {
  (my $n = $1) =~ tr/,//d;
  say $n;
} 
```

**输出**

```
1-20 of 1,975 results
1975 
```

* * *

**更新**

此次更新特别感谢 @nandhp，他启发我研究以 JSON 格式生成数据的底层数据服务器。

与其通过多余的代码发出请求，不如`https://familysearch.org/proxy`直接访问服务器`https://familysearch.org/search/records`，重新编码 JSON 并将所需数据从结果结构中转储出来。这具有速度（请求大约每秒一次 - 比来自基本网站的等效请求快十倍）和稳定性（正如您所注意到的，该站点非常不稳定 - 相比之下我有从未见过使用此方法的错误）。

```
use strict;
use warnings;

use LWP::UserAgent;
use URI;
use JSON;

use autodie;

STDOUT->autoflush;

open my $fh, '<', 'locations26.txt';
my @locations = <$fh>;
chomp @locations;

open my $outfh, '>', 'out26.txt';

my $ua = LWP::UserAgent->new;

for my $county (@locations[36, 0..2]) {
  for my $year (1923 .. 1926) {
    my $total = familysearch_info($county, $year);
    print STDOUT "$county,$year,$total\n";
    print $outfh "$county,$year,$total\n";
  }
  print "\n";
}

sub familysearch_info {

  my ($county, $year) = @_;

  my $query = join ' ', (
    '+event_place_level_1:California',
    sprintf('+event_place_level_2:"%s"', $county),
    sprintf('+birth_year:%1$d-%1$d~', $year),
    '+gender:M',
    '+race:White',
  );

  my $url = URI->new('https://familysearch.org/search/records');
  $url->query_form(
    collection_id => 2000219,
    count => 20,
    query => $query);

  my $resp = $ua->get($url, 'Content-Type'=> 'application/json');
  my $data = decode_json($resp->decoded_content);

  return $data->{totalHits};
} 
```

**输出**

```
San Diego,1923,1975
San Diego,1924,2004
San Diego,1925,1871
San Diego,1926,1908

Alameda,1923,3577
Alameda,1924,3617
Alameda,1925,3567
Alameda,1926,3464

Alpine,1923,1
Alpine,1924,2
Alpine,1925,0
Alpine,1926,1

Amador,1923,222
Amador,1924,248
Amador,1925,134
Amador,1926,67 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-09T16:02:49.467

没有这个简单的脚本`firefox`呢？我对该站点进行了一些调查以了解它是如何工作的，并且我看到了一些`JSON`带有 的请求`firebug` `firefox` `addon`，因此我知道[要查询哪个 URL](https://familysearch.org/proxy?uri=https://familysearch.org/search/records?count=20&query=%252Bevent_place_level_1%253ACalifornia%2520%252Bevent_place_level_2%253A%2522San%2520Diego%2522%2520%252Bbirth_year%253A1923-1923~%2520%252Bgender%253AM%2520%252Brace%253AWhite&collection_id=2000219)以获取相关内容。这是代码：

```
use strict; use warnings;
use JSON::XS;
use LWP::UserAgent;
use HTTP::Request;

my $ua = LWP::UserAgent->new();

open my $fh, '<', 'locations2.txt' or die $!;
open my $fh2, '>>', 'out2.txt' or die $!;

# iterate over locations from locations2.txt file
while (my $place = <$fh>) {
    # remove line ending
    chomp $place;
    # iterate over years
    foreach my $year (1923..1925) {
        # building URL with the variables
        my $url = "https://familysearch.org/proxy?uri=https%3A%2F%2Ffamilysearch.org%2Fsearch%2Frecords%3Fcount%3D20%26query%3D%252Bevent_place_level_1%253ACalifornia%2520%252Bevent_place_level_2%253A%2522$place%2522%2520%252Bbirth_year%253A$year-$year~%2520%252Bgender%253AM%2520%252Brace%253AWhite%26collection_id%3D2000219";
        my $request = HTTP::Request->new(GET => $url);
        # faking referer (where we comes from)
        $request->header('Referer', 'https://familysearch.org/search/collection/results');
        # setting expected format header for response as JSON
        $request->header('content_type', 'application/json');

        my $response = $ua->request($request);

        if ($response->code == 200) {
            # this line convert a JSON to Perl HASH
            my $hash = decode_json $response->content;
            my $val = $hash->{totalHits};
            print $fh2 "year $year, place $place : $val\n";
        }
        else {
           die $response->status_line;
        }
    }
}

END{ close $fh; close $fh2; } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-07T01:50:38.000

我不知道如何从上述解决方案中发布修改后的代码。

此代码（尚未）正确编译。但是，我已经进行了一些重要的更新，以明确朝着这个方向前进。

我非常感谢有关此更新代码的帮助。我不知道如何发布此代码和此后续操作，以便安抚运行此视线的领主。

它卡在睡眠线上。任何有关如何通过它的建议将不胜感激！

```
use strict;
use warnings;
use WWW::Mechanize::Firefox;

my $mech = WWW::Mechanize::Firefox->new(
activate => 1, # bring the tab to the foreground
);
$mech->get('https://familysearch.org/search/collection/results#count=20&query=%2Bevent_place_level_1%3ACalifornia%20%2Bevent_place_level_2%3A%22San%20Diego%22%20%2Bbirth_year%3A1923-1923~%20%2Bgender%3AM%20%2Brace%3AWhite&collection_id=2000219',':content_file' => 'main.html', synchronize => 0);

 my $retries = 10;
while ($retries-- and $mech->is_visible( xpath => '//*[@id="hourglass"]' )) {
 print "Sleep until we find the thing\n";
  sleep 2;
 };
 die "Timeout while waiting for application" if 0 > $retries;

# Now the hourglass is not visible anymore

#fill out the search form
my @forms = $mech->forms();
#<input id="census_bp" name="birth_place" type="text" tabindex="0"/>    
#A selector prefixed with '#' must match the id attribute of the input. A selector     prefixed with '.' matches the class attribute. A selector prefixed with '^' or with no     prefix matches the name attribute.
$mech->field( birth_place => 'value_for_birth_place' );
# Click on the submit
$mech->click({xpath => '//*[@class="form-submit"]'}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-07T08:56:43.713

您应该在访问字段之前设置当前表单：

“给定一个字段的名称，将其值设置为指定的值。这适用于当前表单（由“form_name（）”或“form_number（）”方法设置或默认为页面上的第一个表单）。 "

```
$mech->form_name( 'census-search' );
$mech->field( birth_place => 'value_for_birth_place' ); 
```

抱歉，我无法尝试此代码，感谢您提出新问题。

# java - jnlp 文件提示 mac 下载 JRE，但它已经安装 (Java 1.6.0_37) Mac OSX 10.7.5

> ID：14654289
> 
> 赞同：3
> 
> 时间：2013-02-01T20:16:10.920
> 
> 标签：java, macos, jnlp, java-web-start

我什至真的不知道在这里发布什么，除了计算机上的终端说：

```
java version "1.6.0_37"
Java(TM) SE Runtime Environment (build 1.6.0_37-b06-434-11M3909)
Java HotSpot(TM) 64-Bit Server VM (build 20.12-b01-434, mixed mode) 
```

但是由于某种原因，当我运行 JNLP 文件时，会弹出一个提示，说要打开这个 Web 启动应用程序，我需要下载 Java 运行时环境。我已经这样做了。它最初安装了 Java 7，经过一些研究，我发现这个 jnlp 文件不会在安装 Java 7 的情况下打开。所以我回去删除了 Java 7，现在这种情况正在发生。

如果我打开 Java Preferences 窗口，我可以看到确实安装了 Java SE 6。我只是不知道该怎么做。

## 编辑：

终端说

```
No Java runtime present, requesting install. Unable to locate a Java Runtime to invoke. 
```

当我放入

```
javaws /(path).jnlp 
```

我也跑了 janela，得到了这份报告：

JaNeLA 报告 - 版本 11.05.17

```
Report for file:/Users/administrator/Desktop/Final%20Cut%20Server.jnlp

Content type application/xml does not equal expected type of application/x-java-jnlp-file
cvc-complex-type.2.4.a: Invalid content was found starting with element 'icon'. One of '{title}' is expected.
cvc-complex-type.2.4.a: Invalid content was found starting with element 'icon'. One of '{title}' is expected.
cvc-complex-type.2.4.a: Invalid content was found starting with element 'j2se'. One of '{jar, nativelib, extension, property, package}' is expected.
cvc-complex-type.2.4.a: Invalid content was found starting with element 'j2se'. One of '{jar, nativelib, extension, property, package}' is expected.
XML encoding not known, but declared as utf-8
Codebase + href 'http://10.13.144.50/~fcsvr/webstart/macJnlp.php' is not equal to actual location of 'file:/Users/administrator/Desktop/Final%20Cut%20Server.jnlp'.
Desktop icons were subject to bug nnnn in earlier J2SE versions
Optimize this application for off-line use by adding the <offline-allowed /> flag.
The HREF of '/~fcsvr/webstart/FinalCutServer.jar' could be optimized to '~fcsvr/webstart/FinalCutServer.jar'.
Downloads can be optimized by specifying a resource size for '/~fcsvr/webstart/FinalCutServer.jar'.
The resource download at /~fcsvr/webstart/FinalCutServer.jar can be optimized by removing the (default) value of download='eager'.
The resource download at /~fcsvr/webstart/FinalCutServer.jar can be optimized by removing the (default) value of main='false'.
It might be possible to optimize the start-up of the app. by  specifying download='lazy' for the /~fcsvr/webstart/FinalCutServer.jar resource.
Lazy downloads might not work as expected for /~fcsvr/webstart/FinalCutServer.jar unless the download 'part' is specified. 
The HREF of '/~fcsvr/webstart/FinalCutServer_MacOSX.jar' could be optimized to '~fcsvr/webstart/FinalCutServer_MacOSX.jar'.
Downloads can be optimized by specifying a resource size for '/~fcsvr/webstart/FinalCutServer_MacOSX.jar'.
The resource download at /~fcsvr/webstart/FinalCutServer_MacOSX.jar can be optimized by removing the (default) value of download='eager'.
It might be possible to optimize the start-up of the app. by  specifying download='lazy' for the /~fcsvr/webstart/FinalCutServer_MacOSX.jar resource.
Lazy downloads might not work as expected for /~fcsvr/webstart/FinalCutServer_MacOSX.jar unless the download 'part' is specified. 
The HREF of '/~fcsvr/webstart/FinalCutServer_MacOSX.jar' could be optimized to '~fcsvr/webstart/FinalCutServer_MacOSX.jar'.
Downloads can be optimized by specifying a resource size for '/~fcsvr/webstart/FinalCutServer_MacOSX.jar'.
The resource download at /~fcsvr/webstart/FinalCutServer_MacOSX.jar can be optimized by removing the (default) value of download='eager'.
It might be possible to optimize the start-up of the app. by  specifying download='lazy' for the /~fcsvr/webstart/FinalCutServer_MacOSX.jar resource.
Lazy downloads might not work as expected for /~fcsvr/webstart/FinalCutServer_MacOSX.jar unless the download 'part' is specified. 
Resource type icns of resource ~fcsvr/webstart/FinalCutServer.icns is not one of the allowable types of gif, jpg, jpeg.
Downloads can be optimized by specifying a resource size for '~fcsvr/webstart/FinalCutServer.icns'.
Icon loading & use can be optimized by specifying the width and height for ~fcsvr/webstart/FinalCutServer.icns
Resource type icns of resource ~fcsvr/webstart/FinalCutServer.icns is not one of the allowable types of gif, jpg, jpeg.
Downloads can be optimized by specifying a resource size for '~fcsvr/webstart/FinalCutServer.icns'.
Icon loading & use can be optimized by specifying the width and height for ~fcsvr/webstart/FinalCutServer.icns
Resource type png of resource ~fcsvr/webstart/FinalCutServer.png is not one of the allowable types of gif, jpg, jpeg.
Downloads can be optimized by specifying a resource size for '~fcsvr/webstart/FinalCutServer.png'.
Icon loading & use can be optimized by specifying the width and height for ~fcsvr/webstart/FinalCutServer.png
The HREF of '/FinalCutServer' could be optimized to 'FinalCutServer'.
Note that a java/j2se version of 'n.n*' will limit the app. to that  specific Java runtime, and no later.  It is often better to specify  version as 'n.n+'.
Note that a java/j2se version of 'n.n*' will limit the app. to that  specific Java runtime, and no later.  It is often better to specify  version as 'n.n+'. 
```

对不起，我知道很多，但我什至不知道什么是重要的，什么不是。希望这可以帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T06:15:17.777

[正如这里](http://developers.slashdot.org/story/13/02/03/1431227)所讨论的，Apple 禁用了这个版本和早期版本的 Java，等待安全更新。版本 1.6.0_39 现在通过软件更新存在，如此[处](http://support.apple.com/kb/HT1222)和[此处](http://support.apple.com/kb/HT5575)所述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-28T19:49:12.543

如果您安装了 Oracle Java 7，则可以`jnlp`使用以下命令运行文件：

```
'/Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/bin/javaws' file.jnlp 
```

如果您愿意，您还可以将`/usr/bin/javaws`文件替换为`/Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/bin/javaws`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-09T14:46:04.183

我有同样的问题，这个解决方案在这里工作得很好：

[http://support.apple.com/kb/HT5559](http://support.apple.com/kb/HT5559)

# ios - 标签栏控制器中的两个拆分视图控制器导致崩溃

> ID：14654292
> 
> 赞同：0
> 
> 时间：2013-02-01T20:16:30.677
> 
> 标签：ios, objective-c, ipad, uisplitviewcontroller

我的应用程序需要两个单独的拆分视图控制器。首先，我创建了第一个工作正常的拆分视图控制器，现在添加了第二个拆分视图控制器，但第二个拆分视图控制器导致崩溃。

![在此处输入图像描述](../Images/fee31fdb1d4ae6d507885d82b93efe0e.png)

在第一次分裂的主人：

```
@property (nonatomic,strong) WODTutorialDetailsView *wods;
- (void)viewDidLoad
{
    [super viewDidLoad];
    //init detail instance
    self.wods=  (WODTutorialDetailsView *)[[self.splitViewController.viewControllers lastObject] topViewController];
    [self populateTableview];
    self.navigationItem.title = @"WODs";
} 
```

在第二次分裂的主人：

```
@property (nonatomic,strong) LogDetailViewController *wods;
- (void)viewDidLoad
{
    [super viewDidLoad];
    //init detail instance
    self.wods=  (LogDetailViewController *)[[self.splitViewController.viewControllers lastObject] topViewController];
    [self populateTableview];
    self.navigationItem.title = @"WODs";
} 
```

我得到的错误是：

```
-[LogDetailViewController topViewController]: unrecognized selector sent to instance 0x229c4f40
2013-02-01 15:12:10.625 WOD Log[2473:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[LogDetailViewController topViewController]: 
```

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T03:57:53.703

我从来没有听说过一个很好的理由，但苹果确实说 UISplitViewController 应该是最顶层的 UI 控制器。虽然这个项目有点老了，但它的描述还是很清楚的：

> 可与基于导航的项目一起使用的自定义 UISplitView。

看看： [https ://github.com/palaniraja/cUISplitViewController](https://github.com/palaniraja/cUISplitViewController)

# c# - 如何以最大输出大小压缩多个文件，同时将文件对保持在一起

> ID：14654296
> 
> 赞同：1
> 
> 时间：2013-02-01T20:17:15.490
> 
> 标签：c#, batch-file, zip, cmd, 7zip

我如何将文件压缩成不超过一定大小的单独 zip 文件，同时将文件对保存在一起？

我想使用带有命令提示符、批处理文件或一些 C# 代码的 CLI 来执行此操作。我不在乎是否使用 DotNetZip、7Zip 或 WinZip。

一个示例场景是我有一个大目录 C:\LargeDirectory，25 GB。该目录包含成对出现的文件。例如 File1.pdf 和 File1.ind。这些对需要在每个 zip 文件中保持在一起。每个输出 zip 文件都需要保持在下面，比如说 2 GB。

编辑：它们将在每个输出 zip 中多对。如果其中一对会导致输出 zip 超过 2GB，那么它们将被拆分为另一个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T14:28:30.560

这是一些根据问题中的要求完成工作的 C# 代码。它将文件目录压缩成单独的 zip 文件，总大小不超过一定大小，同时将文件对保存在一起。在这种情况下，这是在代码中明确阐明的两种文件类型，但可以通过更多定制使其更通用。

```
`private void CreateZip(string largeDir, string splitIntoDir, double maxFolderSize)
{
    int fileNumber = 1;
    List<String> files = new List<String>(Directory.GetFiles(largeDir, "*.pdf"));
    StringBuilder outputZip = new StringBuilder(splitIntoDir + Path.DirectorySeparatorChar + Path.GetFileName(largeDir) + "_" + fileNumber + @".zip");
    double currentOutputSize = 0;
    List<String> toAdd = new List<String>();
    foreach (String file in files)
    {
        if(File.Exists(file) && File.Exists(file.Replace(".pdf", ".idf")))
            currentOutputSize += new FileInfo(file).Length + new FileInfo(file.Replace(".pdf", ".idf")).Length;

```
 if (currentOutputSize &lt;= maxFolderSize)
    {
        toAdd.AddRange(new String[]{file, file.Replace(".pdf", ".idf")});

    }
    else
    {
        using (ZipFile zip = new ZipFile(outputZip.ToString()))
        {
            foreach(String aFile in toAdd)
                zip.AddFile(aFile, "");
            zip.Save();
        }
        toAdd.Clear();
        fileNumber += 1;
        outputZip.Clear();
        outputZip.Append(splitIntoDir + Path.DirectorySeparatorChar + Path.GetFileName(largeDir) + "_" + fileNumber + @".zip");
        currentOutputSize = new FileInfo(file).Length + new FileInfo(file.Replace(".pdf", ".idf")).Length;
        toAdd.Add(file);
    }
} 
```

}` 
```

`**更新：**提高了算法的速度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-15T12:11:28.620

我已经重写了 dkroy 的算法，因为我认为它进行了过多的强制转换并且过于频繁地查询磁盘。

现在，它一次性加载所有文件信息，让磁盘保持安静，直到我们需要写入 zip 文件。我还优化了比较，它是在内存上完成的，使用引用而不是每次迭代都创建新对象，还将一些变量更改为标准 .NET 类型并删除 StringBuilder，您可以检查代码：

```
private void CreateZip(string largeDir, string splitIntoDir, double maxFolderSize)
        {
            int fileNumber = 1;

            // We get all the PDFs and idf files at once
            FileInfo[] files = new DirectoryInfo(largeDir).GetFiles("*.pdf");
            FileInfo[] filesPair = new DirectoryInfo(largeDir).GetFiles("*.idf");

            List<FileInfo> toAdd = new List<FileInfo>();

            // We match on memory the filenames without extension and create an Anonymous object
            // which will contain both files

            var pairs = files.Join(filesPair, f => Path.GetFileNameWithoutExtension(f.FullName),
                idx => Path.GetFileNameWithoutExtension(idx.FullName), (f, idx) => new {Pdf = f, Index = idx});

            long currentOutputSize = 0;
            string outputZip = string.Format("{0}{1}{2}_{3}.zip", splitIntoDir, Path.DirectorySeparatorChar, Path.GetFileName(largeDir), fileNumber);

            // iterate the pairs that matched the collection
            foreach (var pair in pairs)
            {
                // Sum the current pair of files
                currentOutputSize += pair.Pdf.Length + pair.Index.Length;

                if (currentOutputSize < maxFolderSize) 
                {
                    toAdd.Add(pair.Pdf);
                    toAdd.Add(pair.Index);
                }
                else
                {
                    using (ZipFile zip = new ZipFile(outputZip))
                    { 
                        toAdd.ForEach(f=> zip.AddFile(f.FullName, string.Empty));
                        zip.Save();
                    }

                    // We start a new zip
                    toAdd.Clear();
                    fileNumber++;
                    currentOutputSize += pair.Pdf.Length + pair.Index.Length;
                    foutputZip = string.Format("{0}{1}{2}_{3}.zip", splitIntoDir, Path.DirectorySeparatorChar, Path.GetFileName(largeDir), fileNumber);

                    // We add the current iteration's files
                    toAdd.Add(pair.Pdf);
                    toAdd.Add(pair.Index);
                }
            }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T10:17:59.417

我相信您希望将档案分成几个相等的部分。这可以通过使用 7-zip 和批处理来完成。

要将档案分割成相等的大小：

```
@echo off
@set "ZipPath=%ProgramFiles%\7-Zip\7z.exe"
@IF NOT EXIST "%ZipPath%" set "ZipPath=%ProgramFiles(x86)%\7-Zip\7z.exe"

"%ZipPath%" a -mx9 -mmt4 -m0=lzma:d27:fb128 -v2g "C:\foo.7z" "C:\LargeDirectory"

PAUSE 
```

这会将存档分成两个 2GB。要提取存档：

```
@echo off

@set "ZipPath=%ProgramFiles%\7-Zip\7z.exe"
@IF NOT EXIST "%ZipPath%" set "ZipPath=%ProgramFiles(x86)%\7-Zip\7z.exe"

"%ZipPath%" x "-oC:\LargeDirectory" "C:\foo.7z.001"

PAUSE 
```

您还可以参考[7-zip 命令行](http://www.dotnetperls.com/7-zip-examples)以获取更多信息。希望能帮助到你。`

# objective-c - 从 TableView 移动到第二个 TableView 并返回到选项卡（TabBar）

> ID：14654297
> 
> 赞同：0
> 
> 时间：2013-02-01T20:17:18.360
> 
> 标签：objective-c, storyboard, tableview, viewcontroller

我的 StoryBoard (SecondViewController) 中有一个带有 TableView 的 ViewController，当我点击一行时，我想在 StoryBoard 中使用 TableView (ListPlacesViewController) 移动到第二个 ViewController，然后当我点击第二个 TableView 中的一行时，我想要返回到特定选项卡 (TabBar)。

有什么想法我该怎么做吗？

# git - 将单个文件从克隆仓库推送到分叉仓库

> ID：14654300
> 
> 赞同：3
> 
> 时间：2013-02-01T20:17:27.870
> 
> 标签：git, github, push, repository

好的，所以我在本地机器上有一个克隆的 github 存储库，在我的 github 帐户中有另一个分叉的 github 存储库。我想将一个文件从我克隆的本地仓库推送到我的分叉仓库。我需要将它推送到同一位置（例如，我的本地存储库中的文件位于 /folder1/folder2 中，我必须将其推送到 /folder1/folder2 中的分叉存储库中）。现在有没有人可以做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T20:53:43.143

您可以克隆您的分叉，并作为[Justin ᚅᚔᚈᚄᚒᚔ](https://stackoverflow.com/users/265575/justin) [评论](https://stackoverflow.com/questions/14654300/pushing-a-single-file-from-cloned-repo-to-forked-repo/14654829#comment20477882_14654300)、添加、提交和推送。

如果您尝试从当前本地克隆推送，其主要远程地址（“来源”）指的是第一个 GitHub 存储库，而不是您的分叉。

但是你可以从同一个 repo 中做到这一点，通过将你的 fork 的地址添加到你当前的本地克隆中：

```
git remote add fork https://github.com/user/myFork 
```

，然后推到那里：

```
git push fork master. 
```

![在此处输入图像描述](../Images/6dcd6b2d6bc6b19cad6dc32b2dc3a15b.png)

另请参阅“ [github 中的 origin 和 upstream 有什么区别](https://stackoverflow.com/questions/9257533/what-is-the-difference-between-origin-and-upstream-in-github/9257901#9257901)”。

# windows-phone-7 - Windows Phone 7 中的 OpenCV

> ID：14654305
> 
> 赞同：0
> 
> 时间：2013-02-01T20:17:37.397
> 
> 标签：windows-phone-7, opencv

我想在 Windows Phone 中使用 opencv，但不确定是否有任何支持。任何链接/示例代码将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T13:48:52.990

你不能。WP7 只支持托管代码，OpenCV 是原生库。

您有 3 个选项：

1.  而是以 WP8 为目标。

2.  一些公司（例如 Tango、Spotify）以某种方式说服微软允许为 WP7 平台开发本地代码。

3.  寻找 OpenCV 的替代品，例如 AForge.NET。

# jquery - 在 Jquery 中多次使用函数

> ID：14654307
> 
> 赞同：-1
> 
> 时间：2013-02-01T20:17:42.033
> 
> 标签：jquery

我使用以下代码将日期选择小部件添加到我的页面。

```
 <script type='text/javascript' src='http://code.jquery.com/jquery-1.8.2.js'></script>
    <script type='text/javascript' src="http://twitter.github.com/bootstrap/assets/js/bootstrap.min.js"></script>
        <script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>
        <script type="text/javascript">
        $(function datewidget() {
        $( "#datepicker" ).datepicker({
            dateFormat : 'dd/mm/yy',
            changeMonth : true,
            changeYear : true,
            yearRange: '-100y:c+nn',
            maxDate: '-1d'
        });
    $('#datepicker').live("change", function() {
        datewidget();
        });
    }); 
```

然后将此功能应用于我的 html 中的输入字段，如下所示，

```
<div class="span12">
                <form method="post" name="bdayInputFormMain" action="/bdayremind_maininput/" class="form-inline">
                {% csrf_token %}
                        <input name="name" type="text" class="input-medium" placeholder="Name">
                        <input name="dob" type="text" class="input-small" placeholder="Date of Birth" id="datepicker">
                        <input name="anni" type="text" class="input-small" placeholder="Anniversy" id="datepicker">
                        <input name="name" type="text" class="input-xlarge" placeholder="Address">
                        <button type="submit" class="btn">Update</button>
                </form> 
```

但是问题是日期选择小部件仅在我单击“出生日期”字段时打开。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T20:32:54.340

而是使用了一个类来解决问题....

# ios - Monotouch UITableViewCell DetailView

> ID：14654308
> 
> 赞同：0
> 
> 时间：2013-02-01T20:17:41.800
> 
> 标签：ios, uitableview, xamarin.ios

如何在右侧使用所选选项实现 UITableViewCell。

最后应该是这样的：

![在此处输入图像描述](../Images/a523c28cb07f59510d120e3a2cf2f41c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T21:29:06.007

[MonoTouch.Dialog](https://github.com/migueldeicaza/MonoTouch.Dialog)使用 RadioElement 控件构建了对此的支持。

您还可以查看 Apple 关于构建[UITableViewCells](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/TableViewCells/TableViewCells.html#//apple_ref/doc/uid/TP40007451-CH7)的文档。

# iphone - 页面更改时iOS UIPageViewController索引不增加

> ID：14654313
> 
> 赞同：0
> 
> 时间：2013-02-01T20:18:11.107
> 
> 标签：iphone, ios, ipad, uipageviewcontroller

我正在尝试实现 UIPageViewController 及其工作，但索引始终为 cero。我实施：

```
-(UIViewController*)pageViewController:(UIPageViewController *)pageViewController viewControllerAfterViewController:(UIViewController *)viewController
{

    NSUInteger index=[self indexOfViewController:(contentViewController*)viewController];
     NSLog(@" index %d", index);
    if (index==NSNotFound) {
        return nil;
    }
    index++;
    return [self viewControllerAtIndex:index];

} 
```

但视图控制器的索引从未更新。为什么有任何指示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T06:35:31.967

上：

```
-(contentViewController *)viewControllerAtIndex:(NSUInteger)index 
```

我正在返回值为cero 的索引。我修复了一切正常

# javascript - 用于提取文本字段的正则表达式

> ID：14654314
> 
> 赞同：-2
> 
> 时间：2013-02-01T20:18:10.710
> 
> 标签：javascript, regex

从这个 html 中提取文本“28 N John Young Pkwy”的正则表达式是什么。

```
28 N John Young Pkwy<br />              
<span class="locality">Kissimmee</span>,                    
<span class="region">FL</span>                  
<span class="postal-code">34741</span> 
```

地址每次都会有所不同，因此我正在寻找与
标签前的通用文本匹配的内容。数据格式始终相同。我正在使用 JavaScript。我也在研究如何将它输入到构造函数中。它应该是这样的：

```
var re = new RegExp("^.*?(?=<br />)");
var m = re.exec(textabove); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T20:23:24.920

`/^[^<]*/`应该可以正常工作（您可以在 regexpal.com 上进行验证——删除斜杠）

编辑：这仅`<`在您正在提取的数据中没有数据时才有效，但它比使用积极前瞻和/或惰性的其他答案更有效。

编辑2：在这里，有一个[jsfiddle](http://jsfiddle.net/dnx2B/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T20:20:55.090

这在 javascript（1.5 或更高版本）中并不难做到：

```
<div id='address'>
    28 N John Young Pkwy<br />              
    <span class="locality">Kissimmee</span>,                    
    <span class="region">FL</span>                  
    <span class="postal-code">34741</span>
</div> 
```

```
var re = new RegExp(".*?(?=<br>)");
var m = re.exec($('#address').html());
alert(m[0]); 
```

请参阅此处的示例代码：http: [//jsfiddle.net/dnx2B/](http://jsfiddle.net/dnx2B/)

不过，老实说，没有正则表达式会容易得多：

```
alert($('#address')[0].firstChild.data); // returns exactly the same thing. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T20:25:53.867

如果您只是在寻找 之前的文本`<br>`，那么这样的事情应该可以工作：

```
^(.*?)<br 
```

# c++ - 转换平台::数组 到字符串

> ID：14654317
> 
> 赞同：3
> 
> 时间：2013-02-01T20:18:20.623
> 
> 标签：c++, string, windows-runtime, c++-cx

A 从库中读取资源并返回的 C++ 中的函数`Platform::Array<byte>^`

如何将其转换为 a`Platform::String`或 an`std::string`

```
BasicReaderWriter^ m_basicReaderWriter = ref new BasicReaderWriter()
Platform::Array<byte>^ data = m_basicReaderWriter ("file.txt") 
```

我需要一个`Platform::String`来自`data`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T00:40:24.570

如果您`Platform::Array<byte>^ data`包含一个 ASCII 字符串（正如您在对问题的评论中阐明的那样），您可以将其转换为`std::string`使用适当的`std::string`构造函数重载（请注意，它`Platform::Array`提供了类似 STL 的`begin()`方法`end()`）：

```
// Using std::string's range constructor
std::string s( data->begin(), data->end() );

// Using std::string's buffer pointer + length constructor
std::string s( data->begin(), data->Length ); 
```

与`std::string`,`Platform::String`包含**Unicode UTF-16** ( `wchar_t`) 字符串不同，因此您需要将包含 ANSI 字符串的原始字节数组转换为 Unicode 字符串。您可以使用[ATL 转换帮助](http://msdn.microsoft.com/en-us/library/87zae4a3%28v=vs.80%29.aspx)程序类`CA2W`（包装对 Win32 API 的调用`MultiByteToWideChar()`）执行此转换。然后您可以使用`Platform::String`构造函数获取原始 UTF-16 字符指针：

```
Platform::String^ str = ref new String( CA2W( data->begin() ) ); 
```

**注意：** 我目前没有可用的 VS2012，所以我没有用 C++/CX 编译器测试过这段代码。如果您遇到一些参数匹配错误，您可能需要考虑从返回`reinterpret_cast<const char*>`的指针转换为指针（类似 for ），例如`byte *``data->begin()``char *``data->end()`

```
std::string s( reinterpret_cast<const char*>(data->begin()), data->Length ); 
```

# javascript - 流程图的决策框，其中包含正确包装的一些文本

> ID：14654322
> 
> 赞同：0
> 
> 时间：2013-02-01T20:19:27.790
> 
> 标签：javascript, html, css

我正在尝试为流程图生成标准决策框，但它需要执行以下操作：

1.  表现得像一个标准的 HTML 按钮，我可以在其中设置标题/值并且是“可点击的”。
2.  能够根据文本输入的长度缩放决策框大小。
3.  因此，可以说通常为矩形的文本框非常适合外部决策框。问题是文本框四个边上的空间都被浪费了。我想不出一种更好的方式来更好地利用那个空间并让我的决策框更小。

我曾尝试使用带有文本框覆盖的背景决策形状图像以及修补两个三角形以制作决策框形状，然后在其顶部覆盖一个文本框，但它们似乎都是非常复杂的方法来获得这个简单决策框。

添加了下面的代码示例......它可能不正确，因为我还没有让它在决策框顶部显示文本框......但即使这样有效，我关于文本换行的空间使用问题里面的决策框还没有解决。

与 Javascript 相比，我更喜欢 HTML/CSS，但如果有解释，我不会介意它们中的任何一个。

这是我正在使用的两个三角形的 CSS，虽然它还没有完成。

====== CSS ===

```
.triangles{
width: 160;
height:150;
z-index:1;
}

.decisiontext{
position:relative
left:0px;
top:-50px;
z-index:2;
}

#left-triangle {
width: 30;
height: 0px;
float:left;
border-right: 79px solid orange;
border-top: 50px solid transparent;
border-bottom: 50px solid transparent;

-webkit-transform: rotate(0.05deg);
-moz-transform: scale(1.1);
-o-transform: rotate(0.05deg); /* Didn't check Opera yet */
transform: rotate(0.05deg);
}
#right-triangle {
 width: 40;
 height: 0;
 float:left;
 border-left: 79px solid red;
 border-top: 50px solid transparent;
 border-bottom: 50px solid transparent;

-webkit-transform: rotate(0.05deg);
-moz-transform: scale(1.1);
-o-transform: rotate(0.05deg); 
transform: rotate(0.05deg);
} 
```

====== 这里是html===============

```
 <div class="decisionbox">

      <div id="left-triangle"; class="triangles">
      <!-- end .left-triangle -->
      </div>        
      <div id="right-triangle"; class="triangles">
      <!-- end .right-triangle --></div>   

      <div class="decisiontext">

      <button type="button" style=" max-width:100px; white-space:normal; font-    size:10px">I am using the regular button here but needs something that uses space inside         the decision box better.</button>  

      <!-- end .decisiontext -->
      </div>

  <!-- end .decisionbox -->
  </div> 
```

================================

# c# - 在命令处截断 +CDS 响应

> ID：14654324
> 
> 赞同：-1
> 
> 时间：2013-02-01T20:19:34.030
> 
> 标签：c#, at-command

我在从频道返回 +CDS 时遇到了麻烦。我正在使用具有 64 个通道的调制解调器，我需要获取此值。以上任何行中缺少的信息

```
+CDS: 6,248,"21988
+CDS: 6,249,"6299224415
+CDS: 6,39,"11974579414",129,"13/01/31,16:40:30-12","13/02/01,16:40:30-12",70
+CDS: 6,211,"2199678119",129,"13/01/31,16:40:31-12","13/02/01,16:40:31-12",70
+CDS: 6,51,"6
+CDS: 6,105,"11974579414",129,"13/01/31,16:40:32-12","13/02/01,16:40:32-12",70
+CDS: 6,40,"11973375726",129,"13/01/31,
+CDS: 6,106,"2199378635",129,"13/01/31,16:
+CDS: 6,251,"1297228284",129,"13/01/31,16:40:38-12","13/02/01,16:40:38-12",70
+CDS: 6,53,"2499482633",129,"13/
+CDS: 6,243,"2198922817",129,"13/01/31,16:40:45-12","13/02/01
+CDS: 6,253,"2198070285",129,"13/01/31,16:40:48-12","13/02/01,16:40:48-12",70
+CDS: 6,43,"2197371789",129,"13/01/31,16:40:51-12","13/02/01,16
+CDS: 6,170,"11975327641",129,"13/02/01,11:47:58-12","13/02/01,16:41:37-12",0
+CDS: 6,158,"1982067777",129,"13/02/01,17:36:31-08","13/02/01,17:36:34-08",0
+CDS: 6,46,"1992200437",129,"13/02/01,17:36:32-08","13/02/0
+CDS: 6,154,"4891019678",129,"13/01/31,17:52:44-08","13/01/31,17:52:45-08",70
+CDS: 6,254,"6296236810",129,"13/01/31,16:41:58-12","13/02/01,16:41:59-12", 
```

我开始：

```
public PortaCOM(string porta)
    : base(porta, 115200, Parity.None, 8, StopBits.One)
{
    this.StatusPort = StatusPorta.Ready;
    this.DiscardNull = true;
    this.Handshake = Handshake.RequestToSend;
    //this.RtsEnable = true;
    //this.DtrEnable = true;
    //this.ReadTimeout = 12000;
    //this.ReadTimeout = 12000;
} 
```

我使用以下方法获得价值：

```
static void p_DataReceived(object sender, SerialDataReceivedEventArgs e)
{
    var p = (PortaCOM)sender;
    try
    {

        int dataLength = p.BytesToRead;
        byte[] dados = new byte[dataLength];
        int nbrDataRead = p.Read(dados, 0, dataLength);
        if (nbrDataRead == 0)
            return;

        var retorno = Encoding.ASCII.GetString(dados);
        Console.WriteLine(retorno);
    }
    catch (Exception err) { Console.WriteLine(err.Message); }
} 
```

请，任何帮助我！

里卡多·贝克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T12:18:28.697

我在 p_DataReceived 内部进行了更改

```
 static void p_DataReceived(object sender, SerialDataReceivedEventArgs e)
    {
        var p = (PortaCOM)sender;
        try
        {

           **var b = new List<byte>(); 
            while (p.BytesToRead > 0) 
                b.Add((byte)p.ReadByte()); 
            if (b.IsEmpty()) 
                return;**

            var retorno = Encoding.ASCII.GetString(b.ToArray());

            Console.WriteLine(retorno);
        }
        catch (Exception err) { Console.WriteLine(err.Message); }
    } 
```

# java - VM 无法为对象堆保留足够的空间

> ID：14654328
> 
> 赞同：1
> 
> 时间：2013-02-01T20:20:02.923
> 
> 标签：java, jenkins, jvm-arguments, slave

我刚刚在 Windows 机器上升级到 Jenkins 1.500。我还有一个 8GB RAM 的 windows slave。我已经与这个从站建立了远程连接，并从 Jenkins 网络界面（使用 JNLP 启动按钮）启动了它。

它在 Jenkins 上显示得很好，我已经为它分配了一些工作。其中一项作业使用以下 vm args 调用 java 应用程序：

```
-XX:MaxPermSize=512m -Xmx1024m 
```

但作业失败并出现此错误：

```
Error occurred during initialization of VM Could not reserve enough space for object heap Could not create the Java virtual machine. 
```

如果我在从属设备上本地运行作业，它工作正常。任何想法为什么在通过詹金斯触发时构建在 Windows 从站上失败？

在升级之前，该作业在从属服务器上运行良好。

从机正在运行：java 版本“1.6.0_34” Java(TM) SE Runtime Environment (build 1.6.0_34-b04) Java HotSpot(TM) 64-Bit Server VM (build 20.9-b04，混合模式)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-01-31T09:12:07.063

解决方案是：在您的 maven 安装中修改 mvn 文件并添加以下内容：

导出 MAVEN_OPTS=-Xmx1024m

# opengl - 在openGL中将立方体转换到球体表面

> ID：14654329
> 
> 赞同：1
> 
> 时间：2013-02-01T20:20:09.140
> 
> 标签：opengl, geometry, rendering, transformation

我目前正在开发一个游戏，它渲染一个带纹理的球体（代表地球）和代表玩家模型的立方体（稍后将实现）。

当用户单击球体上的一个点时，立方体会从原点 (0,0,0)（也是球体的中心）平移到球体表面上的点。

问题是我希望立方体旋转以使其底部平放在球体表面上（而不是仅仅平移立方体）。

为了达到这种效果，最好的方法是计算每个轴的旋转矩阵？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T20:22:28.040

这与您为制作“lookat”矩阵所执行的计算相同。

在这种形式中，您可以使用球体上的归一化点作为一个轴（通常用作“Z”轴），然后将另外两个作为垂直向量。通常要做到这一点，你选择一些任意的“向上”轴，它不需要与你的第一个轴平行，然后使用两个叉积。首先你穿过'Z'和'Up'来制作'X'轴，然后你穿过'X'和'Z'轴来制作'Y'轴。

X、Y 和 Z 轴（标准化）形成一个旋转矩阵，它将立方体定向到球体的表面法线。然后将其转换为表面点。

GL 的基本思想是这样的：

```
float x_axis[3];
float y_axis[3];
float z_axis[3]; // This is the point on sphere, normalised

x_axis = cross(z_axis, up);
normalise(x_axis);
y_axis = cross(z_axis, x_axis);

DrawSphere();

float mat[16] = {
    x_axis[0],x_axis[1],x_axis[2],0,
    y_axis[0],y_axis[1],y_axis[2],0,
    z_axis[0],z_axis[1],z_axis[2],0,
    (sphereRad + cubeSize) * z_axis[0], (sphereRad + cubeSize) * z_axis[1], (sphereRad + cubeSize) * z_axis[2], 1 };

glMultMatrixf(mat);

DrawCube(); 
```

其中`z_axis[]`是球体上的归一化点，`x_axis[]`是该向量与任意“向上”向量`y_axis[]`的归一化叉积，并且是其他两个轴的归一化叉积。`sphereRad`并且`cubeSize`是球体和立方体的大小 - 我假设这两个形状都以它们的局部坐标原点为中心。

# c# - Roslyn 是跨平台的吗？

> ID：14654334
> 
> 赞同：56
> 
> 时间：2013-02-01T20:20:38.683
> 
> 标签：c#, mono, roslyn

我已经关注[Roslyn](https://en.wikipedia.org/wiki/.NET_Compiler_Platform)有一段时间了，我对此感到好奇和兴奋。我注意到的一件事是他们提到编译器是用托管代码重写的。这就提出了一个问题，即 Roslyn 是否能够在非 .NET 虚拟机上运行，​​例如[Mono](http://en.wikipedia.org/wiki/Mono_%28software%29)。

我*真的*很想在我的视频游戏中嵌入使用 Roslyn 的 C# 脚本，并在我的应用程序中使用它们的许多其他功能，但我想知道使用 Roslyn 是否会破坏它在 Mono 上运行的能力。

有人试过在 Mono 上运行 Roslyn 吗？是否可以？为什么或者为什么不？

澄清一下，我对托管程序集是否可以在 Mono 上运行以及它是否可以生成 mono 可以运行的程序集感兴趣。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2014-04-18T11:30:05.317

尽管这是 Eric 最想不到的事情，但 Roslyn 已[作为真正的开源](https://roslyn.codeplex.com/)(Apache 2.0)发布[，实际上现在是跨平台的。](http://tirania.org/blog/archive/2014/Apr-09.html)

Xamarin 的 Miguel de Icaza[在 BUILD 上展示了它在 Mono 上运行。](http://channel9.msdn.com/Events/Build/2014/KEY02)

当 Roslyn 发布时，它将成为 Mono 的一部分。他们已经[在 Mono Git repo 维护了一个分支](https://github.com/mono/roslyn)。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-02-03T12:07:03.063

正如@Govert 在评论中已经提到的那样，如果您想嵌入 C# 脚本功能，您应该简单地使用 Mono 等效库/工具：Mono-Csharp。（特别是因为，即使 Roslyn**可以**在 Mono 上运行，它的许可证也可能规定您不允许这样做。）

Mono 世界中的这个工具比 Roslyn BTW 早得多，并且是开源的。在这里，您甚至有一位 Microsoft 员工在博客上发布了它并将其上传到 Nuget：

[http://blog.davidebbo.com/2012/02/quick-fun-with-monos-csharp-compiler-as.html](http://blog.davidebbo.com/2012/02/quick-fun-with-monos-csharp-compiler-as.html)

我希望你的游戏会踢屁股！

# c# - 如何使用带有附件的 SOAP 在 ASMX Web 服务中创建和返回 CSV，而不是 XML？

> ID：14654335
> 
> 赞同：1
> 
> 时间：2013-02-01T20:20:52.023
> 
> 标签：c#, xml, web-services, csv, asmx

假设我有这样的课程：

```
class Person
{
    public string name;
    public string address;
    public string city;
    public string state;
    public string zip;
} 
```

我正在数据库上执行数据下降：

```
Select Name, Address, City, State, Zip
FROM Persons_Tbl 
```

我通过 SqlDataReader 将数据存储在 Person 类中。

通常，Web 服务将返回数据，并且将采用 XML 格式。但是，我想将其返回为 CSV，而不是 XML。我意识到 Web 服务返回 XML 或 JSON。但是有一种叫做 SOAP with Attachments 的东西。附件可以是 CSV，如果可以，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T20:52:03.173

[带附件的 SOAP](http://en.wikipedia.org/wiki/SOAP_with_Attachments) (SwA) 从未标准化：

> SwA 是 W3C 注释。它作为提案提交，但没有被 W3C 采纳。相反，MTOM 是用于处理 SOAP 消息中的二进制数据的 W3C 建议。

无论如何，传统的 ASMX Web 服务技术既不支持 SwA 也不支持 MTOM。是否有某些原因您不能使用 WCF？它确实支持 MTOM。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T20:32:21.110

您是在寻找 Web 服务调用来发送文件，还是只关心输出是 CSV？

如果您只需要 CSV 格式的输出，您可以将 CSV 作为字符串发送，然后将其保存到使用 Web 服务的应用程序中的文件中：

```
string csvFile = webService.GetCSV()
File.WriteAllText(filePath, csvFile ); 
```

请注意，它仍会返回 XML，但您的数据（字符串）将采用 CSV 格式。您必须创建一些辅助方法来获取您的对象并将其转换为 CSV 格式。

还有一些其他的实现基于您计划如何使用该 Web 服务。

# php - 大型 PHP 上传的内存限制

> ID：14654337
> 
> 赞同：2
> 
> 时间：2013-02-01T20:20:56.470
> 
> 标签：php, apache, upload, nginx

我有一个应用程序。这使您可以通过 ajax 一次上传多个文件。它适用于大文件，但是一旦达到 2gb+，我就会遇到如下错误：

```
[Fri Feb 01 11:22:56 2013] [error] [client x.x.x.x] PHP Fatal error:  Out of memory (allocated 2331770880) (tried to allocate 1165449891 bytes) in Unknown on line 0, referer: ... 
```

在我的 php.ini 中，我有这些配置：

```
post_max_size = 53687091200M
upload_max_filesize = 53687091200M
max_input_time = -1
memory_limit = -1
max_execution_time -1
max_file_uploads = 20 
```

据我所知，这应该足以处理 3GB 的上传。但几乎每次尝试，我都会遇到这些错误。我已经与支持我的 VPS 进行了交谈，他们说一切看起来都很好，应该能够处理它。

我有一个 nginx 反向代理设置，它有点帮助，但还不够。我错过了什么吗？

有没有办法用 PHP 减轻 HTTP 的负担？我测试了 Java 应用程序，它们的表现非常出色，但（不幸的是）我需要保持 UI 完好无损。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T15:48:23.660

如果您要上传非常大的文件，您可能希望在将它们传递给 PHP 之前“代理”它们。我的经验是，长期存在的 PHP 线程可能会意外崩溃，而且 PHP 有时会在分配大量内存时遇到问题。

看一下[nginx 的上传进度模块](http://wiki.nginx.org/HttpUploadProgressModule)，它会在将文件传递到上游服务器（在本例中为 PHP）之前将文件缓冲到磁盘，并提供一种监控和报告进度的机制。

如果您仍然遇到问题，您可以使用[上传模块](http://wiki.nginx.org/HttpUploadModule)将 PHP 完全排除在外（就管理上传而言） ；只需将文件直接转储到磁盘上您需要它的位置并通知 PHP 它的下落。

# jquery - 从右上角增长div？

> ID：14654348
> 
> 赞同：4
> 
> 时间：2013-02-01T20:21:34.533
> 
> 标签：jquery, html, css

我有一个需要交互的元素网格。单击其中一个 div 时，它会增长到更大的大小。对于大多数从右下角“增长”的元素来说，div 是可以接受的：

```
$(.my-div).animate({ width: "379px", height: "204px" }); 
```

但是，在某些情况下，右下角的“增长”不适用于应用程序的其余部分。

例如，我可能需要从右上角开始增长。有任何想法吗？我喜欢动画到新宽度/高度的简单性，但我不确定它是否可以实现除了从右下角拖动之外的效果。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T20:39:28.007

有几种方法可以做到这一点，或者像你提到的那样使用 jQuery animate，或者使用 CSS 过渡。他们看起来像

```
.child.clicked {
  height: 100px;
  width: 300px;
  transition: width 2s, height 2s;
-moz-transition: width 2s, height 2s;
-webkit-transition: width 2s, height 2s; 
-o-transition: width 2s, height 2s; 
} 
```

或者

```
 $('.child2').click(function() {
  $(this).animate({
    width: ['300px', 'swing'],
    height: ['100px', 'swing']
      }, { duration: "slow", easing: "easein" });
  }); 
```

这是一个[玩弄 http://jsbin.com/uxicil/1/edit的例子](http://jsbin.com/uxicil/1/edit)

有许多缓动属性和东西需要调整，直到你得到你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T22:17:11.243

我为客户端实现了一个详细的功能，可以轻松放入您想要的任何内容..

[http://jsfiddle.net/gschutz/393Cb/1/](http://jsfiddle.net/gschutz/393Cb/1/)

```
function increase(event){
    $this = $(event.target);
    if( $(".bigger").length > 0 )
        decrease($(".bigger"));
    $fixed_corner = $this.attr("rel").split(":");
    if( !$this.hasClass("bigger") ){
        $new = $this.clone();
        $new.insertAfter($this);
        $new.css("position", "absolute").addClass("bigger");
        var offset = $this.position(), w = $this.outerWidth(true), h = $this.outerHeight(true);
        if( $fixed_corner[0] == "top" )
            $new.css("top", offset.top);
        else
            $new.css("bottom", offset.top-h);
        if( $fixed_corner[1] == "left" )
            $new.css("left", offset.left);
        else
            $new.css("right", offset.left-w);
        $new.animate({width: "+=50", height: "+=30", backgroundColor: "#eee"});
        console.log($fixed_corner);
    } else {
        decrease($this);
    }
}
function decrease($this){
    $this.animate({width: "-=50", height: "-=30", backgroundColor: "#aaa"}, 300, function(){$(this).remove();});    
} 
```

您可以添加其他方法来调整对象的大小。
请注意 div 的大小。

# maven - Maven：在 pom.xml 中设置 settings.xml 位置？

> ID：14654350
> 
> 赞同：5
> 
> 时间：2013-02-01T20:21:38.343
> 
> 标签：maven, maven-2, settings, pom.xml

是否可以在`settings.xml`文件中设置文件的位置`pom.xml`。

我知道你可以通过命令行输入来做到这一点`mvn -s location/of/settings.xml`，但我想知道我是否可以在其中设置它，`pom.xml`这样我就不必继续通过命令行输入了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T20:41:47.610

不，从安全的角度来看，这可能是一个可怕的想法。它允许 pom 的创建者绕过你所有的 settings.xml 设置。如果你这样做，`mvn -s location/of/settings.xml`你至少会知道它发生了。但是如果你只是随机构建一个项目，谁知道这个项目的创建者有多恶意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T16:01:44.403

可以帮助你得到你想要的东西是`profiles`：

> Maven 中的配置文件是一组替代的配置值，它们设置或覆盖默认值。使用配置文件，您可以为不同的环境自定义构建。配置文件在 pom.xml 中配置并被赋予一个标识符。然后，您可以使用命令行标志运行 Maven，该标志告诉 Maven 在特定配置文件中执行目标。以下 pom.xml 使用生产配置文件覆盖编译器插件的默认设置。

来源：[http ://maven.apache.org/pom.html#Profiles](http://maven.apache.org/pom.html#Profiles)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T20:41:36.647

不，但是您可以将 settings.xml 文件中所需的内容设置到 pom.xml 中，它将覆盖 settings.xml 中的内容

# javascript - 在 dojo 的组合框中为每个选项添加 .on 事件

> ID：14654351
> 
> 赞同：0
> 
> 时间：2013-02-01T20:21:38.837
> 
> 标签：javascript, dojo

有没有办法为每个动态创建的选项添加一个 id，或者我在哪里使用动态创建的选项中的 onClick 事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T21:13:09.270

`OPTION`代码没有点击事件。您需要挂钩到`onchange`父`SELECT`标签。

# vb.net - 删除处理程序不起作用

> ID：14654356
> 
> 赞同：1
> 
> 时间：2013-02-01T20:22:01.520
> 
> 标签：vb.net, handler

我想用 TextChange 事件更改文本框的文本，但 TextChanged evernt 不断触发。

我尝试 RemoveHandler 但它对我不起作用。但是，当我在 _TextChanged Sub 之外使用它时，它可以工作。

```
Private Sub txtLegalNameLast_TextChanged(ByVal sender As Object, ByVal e As System.EventArgs) Handles txtLegalNameLast.TextChanged
    RemoveHandler txtLegalNameLast.TextChanged, AddressOf txtLegalNameLast_TextChanged
    txtLegalNameLast.Text = "Mr. " + txtLegalNameLast.Text 
    AddHandler txtLegalNameLast.TextChanged, AddressOf txtLegalNameLast_TextChanged    

End Sub 
```

编辑：以上对我有用。我应该测试过它。但是这个非常相似的代码没有。我正在对 Sub 之外的 Functions 中的文本框进行更改。这对我不起作用。

```
Private Sub txtLegalNameLast_TextChanged(ByVal sender As Object, ByVal e As System.EventArgs) Handles txtLegalNameLast.TextChanged

        RemoveHandler txtLegalNameLast.TextChanged, AddressOf txtLegalNameLast_TextChanged

        txtLegalNameLast.Text = gsCapitalizeTextbox(txtLegalNameLast.Text) 'StrConv(txtLegalNameLast.Text, VbStrConv.ProperCase)
        txtLegalNameLast.Text = gsValidateName(txtLegalNameLast.Text)

        AddHandler txtLegalNameLast.TextChanged, AddressOf txtLegalNameLast_TextChanged

End Sub 
```

# android - 具有多个父项的 Activity 的 Android 向上导航

> ID：14654357
> 
> 赞同：39
> 
> 时间：2013-02-01T20:22:09.727
> 
> 标签：android, android-actionbar

我在使用此导航树在应用程序上实现**向上导航时遇到问题：**

![应用导航树](../Images/3f151efb8fd340faccabd28bfa1397a8.png)

后退按钮的标准实现很好。

当尝试实现向上按钮时，问题就开始了。

我的期望：

*   当用户在**Detail 5 Activity**上并按下向上按钮时，应用程序会转到**List 3 Activity**
*   当用户在**Detail 7 Activity**上并按下向上按钮时，应用程序将返回**Home Activity**

因此，在不同的方面，我希望在后堆栈上有这种行为：

![应用程序后台清除](../Images/48e2b1d5ee1503c9681446e094eb5dd0.png)

Android 文档（[实现祖先导航](http://developer.android.com/training/implementing-navigation/ancestral.html)）建议使用以下代码来处理**导航**：

```
Intent parentActivityIntent = new Intent(this, MyParentActivity.class);
parentActivityIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(parentActivityIntent);
finish(); 
```

但是由于**Detail Activity**的父 Activity在不同的导航路径上有所不同，我不知道它到底是哪一个。所以我不能在意图中调用它。

有没有办法知道 Android 后台堆栈中真正的父活动？

如果没有，有没有办法在这个应用程序中实现正确**的向上导航**？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-01T22:52:55.253

I will stick with my comment on Paul's answer:

The idea is to have a Stack of the last `Parent` Activities traversed. Example:

```
public static Stack<Class<?>> parents = new Stack<Class<?>>(); 
```

Now in all your parent activities (the activities that are considered parents -e.g. in your case: List and Home), you add this to their `onCreate`:

```
protected void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     parents.push(getClass()); 
     //or better yet parents.push(getIntent()); as @jpardogo pointed
     //of course change the other codes to make use of the Intent saved.

     //... rest of your code
} 
```

When you want to return to the `Parent` activity, you can use the following (according to your code):

```
Intent parentActivityIntent = new Intent(this, parents.pop());
parentActivityIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(parentActivityIntent);
finish(); 
```

I hope am right (:

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T20:38:18.570

这是一个棘手的问题，在我看来，这确实表明了应对 Android 的“向上按钮”用户体验决策的困难。因此，您的问题没有明确的答案。

我有两个可能的解决方案给你。

**1.模仿后退按钮的行为。**

您可以考虑在意图中添加一个额外的内容，以便从其不同的父项之一启动*Detail 。*这个额外的信息会通知那些活动他们在`android.R.id.home`按下时需要启动哪些活动。

这实际上意味着您的应用程序“回到”它的共同祖先，而不是简单地重新启动*Home*。

另一种实现方式可能是简单地执行`onBackPressed()`而不是使用 启动*Home*，`Intent.FLAG_ACTIVITY_CLEAR_TOP`但请记住，关联的动画将不同于正常的“向上”动作。

**2.跳过中间活动，回家。**

一些应用程序将“向上按钮”视为“主页按钮”。您可能要考虑让它*始终*使用`Intent.FLAG_ACTIVITY_CLEAR_TOP`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-17T15:49:42.373

这肯定是一篇旧文章，但是当我研究 SharedPreferences 时，我认为有可能将此信息堆叠在 sharedPreferences 数据中，并在每次访问 2 个父母之前修改其值。然后通过阅读它，您应该能够直接了解您的父母，而无需为此建立一个完整的班级。

# php - CodeIgniter 检查是否登录

> ID：14654358
> 
> 赞同：1
> 
> 时间：2013-02-01T20:22:13.320
> 
> 标签：php, codeigniter

我想执行一个简单的检查用户是否登录（基于会话）并将他重定向到某个地方以防他没有登录。这个检查需要在我所有的控制器中完成。我把这张支票放在哪里？我知道我可以把它放在我所有的控制器中，但那是重复代码。我知道我可以在它的构造函数中创建一个带有 check 的基本控制器，让我所有的其他控制器从它继承，以便它们继承 check 。任何其他优雅的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T20:24:41.027

我会像你说的那样使用构造函数中的检查来创建一个扩展 CI_Controller 的控制器，然后让你的各种其他经过身份验证的控制器扩展那个控制器。

# templates - AdSense 与 OpenCart

> ID：14654363
> 
> 赞同：0
> 
> 时间：2013-02-01T20:22:45.497
> 
> 标签：templates, opencart, ads, adsense

在通过 stackoverflow 和 AdSense 论坛搜索数小时后，我无法找到任何东西来帮助我在我的 opencart 模板中实现我的 google adsense 代码。

最初我将代码放在欢迎模块中，希望它会显示在每个页面的顶部，但这根本不起作用。

我发现了一个名为 KINZA 的扩展程序，它是免费的，但一旦安装，它只会在我的网站上输出 javacript 代码，而不是实际的广告。

我的问题是这样的：我想将我的一个广告放在页面顶部，也许在侧边栏上放一个作为薄摩天大楼尺寸的广告。如何做到这一点？我将在我的 opencart 模板中的哪个位置实现代码？我不想花钱扩展来让它工作。我宁愿只潜入代码并将其粘贴到需要的位置。\任何帮助都非常感谢。

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T09:06:01.053

前端的每一页都包含 6 个文件

目录/视图/主题/your_theme/template/common/header.tpl、footer.tpl、column_left.tpl、column_right.tpl、content_top.tpl、content_bottom.tpl

你可以把你的代码放在其中任何一个中，它应该可以正常工作

您可以为 adsense 制作一个模块，以便您可以从管理员控制其布局和位置....这里是在 opencart 论坛[http://forum.opencart.com/viewtopic.php 制作/复制模块的指南？ t=6696](http://forum.opencart.com/viewtopic.php?t=6696)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-01-16T17:11:19.893

Opencart 3 以后不支持 google adsence 你不能显示广告只是去 wordpress 或任何其他

# c# - 使 NHibernate“翻译”值为 System.Guid.Empty 的 C# POCO Guid 属性保存为数据库唯一标识符字段的 NULL？

> ID：14654364
> 
> 赞同：2
> 
> 时间：2013-02-01T20:22:49.173
> 
> 标签：c#, nhibernate, session, guid, hbmxml

我们的办公室团队正在工作和使用 .NET Framework 4 和 NHibernate 3.3.1 的 ASP.NET 项目

我有一个名为 AllResourcesInfo 的 POCO 域类（它最终映射到数据库中的 Resource 表，该表内部连接到其他一些表，但为了简单起见，假设 AllResourcesInfo 映射到 Resource 表）。

我还有一个名为 Department 的 POCO 域类（最终映射到数据库中的 Department 表）

AllResourcesInfo 可能与部门具有多对一关系。

如果 AllResourcesInfo 的实例属于某个部门，则 AllResourcesInfo.DepartmentDatabaseID 具有有效的 DepartmentDatabaseID，它位于 Department 实体中。

但是，如果 AllResourcesInfo 的实例不属于某个部门，则 AllResourcesInfo.DepartmentDatabaseID 在数据库中具有 NULL 值。数据库。

当我使用 NHibernate 从 AllResourcesInfo 表中检索（基本上 NHibernate 对数据库进行读取）值时，NHibernate 将使用 00000000-0000-0000-0000-000000000000 值填充 AllResourcesInfo.DepartmentDatabaseID 的 C# POCO 属性（即 System.Guid .Empty value ) 如果 AllResourcesInfo 不属于某个部门

但是，当我使用 NHibernate Session 保存不属于任何部门的 AllResourcesInfo 的全新 C# POCO 实例时，我使用 00000000-0000-0000-0000-000000000000 值填充 AllResourcesInfo.DepartmentDatabaseID 的 POCO 属性（即系统.Guid.Empty value ) 但是数据库显然会抛出错误，因为数据库的 Department 表中显然不存在 Guid 值 00000000-0000-0000-0000-000000000000。

总而言之，当我们希望 NHibernate Session Save 将 uniqueidentifier 字段值保留为空时，NHibernate Session Save 无法在数据库中保存（或保留）值为 NULL 的 uniqueidentifier 字段。

有人可以告诉我我们如何确保 NHibernate“翻译”值为 System.Guid.Empty 的 C# POCO Guid 属性被保存（或保留）为 NULL 用于数据库 uniqueidentifier 字段值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T20:27:45.637

Guid 不能为空。您可以将您的类型更改为`Nullable<Guid>`或`Guid?`简称，以允许空值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T22:34:39.947

您需要实现 NHibernate 的 IUserType。

它应该是这样的：

```
using NHibernate.SqlTypes;
using NHibernate.UserTypes;

[Serializable] //to allow NH configuration serialization
public class GuidTypeConverter : IUserType
{
    SqlType[] sqlTypes;

    public GuidTypeConverter()
    {
        sqlTypes = new[] { SqlTypeFactory.GetSqlType(DbType.Guid, 0, 0) };
    }

    public SqlType[] SqlTypes
    {
        get { return sqlTypes; }
    }

    public Type ReturnedType
    {
        get { return typeof(Guid); }
    }

    public object NullSafeGet(IDataReader rs, string[] names, object owner)
    {
        if (rs[names[0]] == DBNull.Value)
        {
            return Guid.Empty;
        }

        return (Guid) rs[names[0]];
    }

    public void NullSafeSet(IDbCommand cmd, object value, int index)
    {
        var param = (IDataParameter) cmd.Parameters[index];
        param.DbType = sqlTypes[0].DbType;
        var guid = (Guid) value;

        if (guid != Guid.Empty)
        {
            param.Value = guid;    
        }
        else
        {
            param.Value = DBNull.Value;
        }
    }

    public bool IsMutable
    {
        //guid is struct so it's not mutable
        get { return false; }
    }

    public object DeepCopy(object value)
    {
        return value;
    }

    public object Replace(object original, object target, object owner)
    {
        return original;
    }

    public object Assemble(object cached, object owner)
    {
        return cached;
    }

    public object Disassemble(object value)
    {
        return value;
    }

    public new bool Equals(object x, object y)
    {
        return x != null && x.Equals(y); 
    }

    public int GetHashCode(object x)
    {
        return x.GetHashCode();
    }
} 
```

（请注意，我尚未对其进行测试，这里有演员表 - 可能需要进行一些调整）

在映射中，您指定：

```
<property name="GuidProperty" column="guidColumn"   type="GuidTypeConverterNamespace.GuidTypeConverter, GuidTypeConverterAssemblyName" /> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T21:28:23.270

您要做的是在数据库中的 Guid（不可为空的 Guid）和 GUID 之间创建映射。这就是 NHibernate 中 IUserType 接口的目的。您需要一个自定义 GuidUserType 类来进行翻译，然后在映射定义（hbxml、fluent 等）中引用它。有关完整说明，请参阅[http://blog.miraclespain.com/archive/2008/Mar-18.html](http://blog.miraclespain.com/archive/2008/Mar-18.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T22:36:02.553

在 Department 对象的主键映射中，应该有一个名为 unsaved-value 的属性。将其设置为 Guid.Empty 的值，一切都会好起来的。

下面是一个使用原始 hbm 映射的示例：

```
<id name="DepartmentId" type="Guid" unsaved-value="00000000-0000-0000-0000-000000000000">
    <generator class="guid" />
</id> 
```

# sql - 在代码中引用自然和/或代理键值的最佳实践

> ID：14654365
> 
> 赞同：0
> 
> 时间：2013-02-01T20:22:51.920
> 
> 标签：sql, sql-server, tsql

我正在修改一些在记录更新时管理状态更改的存储过程。

例如，如果我有这两个表

```
Request(RequestID, StatusID)
Status(StatusID, StatusName) 
```

我正在尝试确定处理调用代码状态的最佳方法。

我使用`StatusID`or`StatusName`吗？

不能保证`StatusID`在环境（DEV、PRE、PROD 等）之间匹配。

此外，`StatusName`可以更改，我不想更改代码，因为我需要更改`StatusName`.

我可以创建一个第二个独特的列，它有点类似于`StatusID`.

我会确保此列在区域之间匹配，但这似乎也不那么干净，而且有点重复。

任何人都可以提出一种更清洁、更简单的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T20:42:15.207

将代码与数据匹配的困难只能通过第二列部分解决。当有人添加一个项目时，这是什么意思？如果他们重新使用已知常量，如果您不要求此列是唯一的，这意味着什么？

通常我们会有用户可修改的查找表，但它们必须与许多其他标志相关联，这些标志指示如何解释状态 - “IsTreatedAsExpired”、“IsTreatedAsActive”或其他保存被视为特定状态的表事物。

我认为您确实需要首先弄清楚您希望此表允许的范围。因为如果您有大量代码引用，最好使用与所有安装中的代码同步的自然密钥。处理此问题的一种可能性是对不可移动代码使用负数（身份插入以添加新的不可移动代码），然后让您的序列仅添加正数。但是同样，这并没有解决您的程序如何处理或使用用户输入的扩展的语义。

同样，如果不在这里整理出全部范围，就很难说。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T22:50:57.410

从您提供的信息来看，`StatusID`在不同的数据库中可能有不同的值，大概是因为您的密钥是自动生成的，而不是您指定的。如果是这样，那么显然`StatusID`无论如何都不可能在您的代码中始终如一地使用（没有标准化值）。因此，问题变成“在我的代码中硬编码值是否可以接受/实用/可取`StatusName`？”

显而易见的答案是肯定的，有什么替代方案？如果您有某种表示“就绪”的状态并且您想在代码中引用它，那么您必须在代码中添加*一些*明确标识状态的内容。

如果您添加某种类型的第二个键（如 Carlos 建议的那样），您仍然会遇到相同的基本问题，即更改自然键值正在更改状态的标识，因此会更改代码的含义。如果您更改“真正的”自然键 ( `READY`) 而不更改第二个键 ( `RDY`)，那么您的代码将变得更加混乱且难以维护。

如果您执行更复杂的操作，例如将“常量”或“配置参数”提取到配置文件或表中，或者甚至编写自定义预处理器以在部署时将键值插入脚本中，那么您会增加很多复杂性而收效甚微（除非你有其他充分的理由这样做）。我已经看到使用这种方法，这是一个巨大的、无法维护的混乱。

在实践中，`StatusName`最有可能发生变化是因为 a) 有人认为另一个名称会“更准确”或“看起来更好”，或者 b) 您发现它不能正确地代表您的要求。如果您被迫花时间在 a) 上，那么只需更改前端或报告中的显示名称，而无需理会数据库和代码。如果 b) 出现，那么根据定义，您当前的数据模型和代码是不准确的，无论如何都必须修改和可能修改。而当 b) 确实发生时，它通常会导致添加新代码，而不是更改现有代码（例如，因为有人定义了一个没有现有代码的新流程步骤）。

如果你愿意改变你的开发和部署实践，还有其他方法来看待这个问题，正如其他人所建议的那样。你能让你的`StatusID`价值观在任何地方都一样吗？从技术上讲这是可能的，那么组织上不这样做的原因是什么？您能否`StatusName`通过变更管理和代码审查来降低变更的可能性和影响？您能否改进您的需求流程以更有效地捕获某些信息？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T21:10:46.257

根据经验，当您有 id、值表（状态、结果、区域等）时，我通常会添加第三个字段，它是记录的助记符值，并且始终使用它，既不使用名称也不使用 id。现在助记符值就像一个业务键（嗯，它是一个业务键），因为它是一个业务值，不依赖于数据库（对于 id）或它的显示方式（描述），例如对于您的状态表，您可能有

```
StatusID,StatusName,StatusMnemo
1       ,COMPLETED ,COM
2       ,REJETED   ,REJ 
```

等等。

在您的查询中，您始终通过 statusId 加入，但您添加了一个子句以通过 StatusMnemo 加入状态表。这是一个独立于环境并保持不变的值。

同样在插入中，您总是使用 statusid。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T20:42:41.360

编写一个用户定义的函数，该函数接受状态名称并在您引用状态 ID 时给出状态

```
select * from resources where statusid = dbo.getStatusId("COMPLETED"); 
```

这将确保解析状态 ID 始终发生在您定义的函数中

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T21:32:44.633

如果您有需要特殊处理的 statusID 值，那么它们在不同环境中应该是相同的。
为什么要在 Prod 中引入一个需要特殊处理但尚未通过 Pre 和 Dev 的 statusID？

我经常做的是从 100 开始 iden 并将其用于不需要特殊处理的通用状态。

然后DEV拥有100以下的空间，使用IDENTITY INSERT ON进行特殊处理。

如果从 DEV 部署到 PRE 插入任何低于 100 的记录。

# count - 进行更新查询以计算发生次数

> ID：14654366
> 
> 赞同：0
> 
> 时间：2013-02-01T20:22:51.410
> 
> 标签：count, find-occurrences

我有一个关于 UPDATE 查询的 SQL 的简单问题。我在这里发现了一些非常接近我想知道的东西： [MySQL：计算不同值的出现次数](https://stackoverflow.com/questions/1346345/mysql-count-occurrences-of-distinct-values)

但是..这不是更新查询。这是我想要做的例子：

在一个表中（我们称表为“数据”），我想进行 UPDATE 查询。表格如下所示：

```
Id color  count
1  blue   0
2  blue   0
3  red    0
4  red    0
5  blue   0
6 white   0 
```

现在，[id] 是此示例的自动增量键，[color] 是 TEXT 字段。[count] 是一个数字

我想要的是更新计数，以便它告诉 [color] 发生了多少个实例。UPDATE 查询运行后，表将如下所示：

```
Id  color count
1   blue  3
2   blue  3
3   red   2
4   red   2
5   blue  3
6   white 1 
```

看起来很简单，但我搞砸了 DCOUNT 和 COUNT 命令，我可能错过了一些非常简单的东西，但仍然......没有乐趣。我看到的所有帮助都只处理 SELECT 查询，但我肯定需要这个查询来更新 [count] 字段。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T21:04:40.357

你应该试试 ：

```
UPDATE data JOIN
( 
  SELECT color, count(1) AS color_cnt
  FROM data
  GROUP BY color
) AS sub ON data.color = sub.color
SET cnt = sub.color_cnt 
```

# objective-c - XCode - 验证构建项目

> ID：14654372
> 
> 赞同：1
> 
> 时间：2013-02-01T20:23:16.877
> 
> 标签：objective-c, xcode, build-settings

在我的 XCode 项目中，我有 4 种不同的构建配置：生产、开发、暂存和暂存 2。

在我的构建设置中，我注意到`Validate Built Product`所有配置都设置为否。如果我将它们切换为是，那么每次我尝试构建时都会收到警告：

```
Application failed codesign verification.  The signature was invalid, contains disallowed entitlements, or it was not signed with an iPhone Distribution Certificate. (-19011) 
```

不过，我仍然可以在手机上构建并创建档案。

至少对于生产来说，我想转向`Validate Built Project`是，但我不想每次都看到那个错误。

我怎样才能让 codesign 开心？

**注意**：我最近升级到 XCode 4.6，重新安装了命令行工具，并在 XCode 提示我这样做时更新了我的项目设置。我确认我一直将生产设置为是，这告诉我此升级导致此错误。

此外，我已经非常彻底地阅读[了这个支持文档](https://developer.apple.com/library/ios/#technotes/tn2250/_index.html#//apple_ref/doc/uid/DTS40009933-CH1-TNTAG32)，遵循了所有步骤，并且似乎一切都正确。

# mysql - MySQL从现有表创建新表

> ID：14654373
> 
> 赞同：1
> 
> 时间：2013-02-01T20:23:18.903
> 
> 标签：mysql

我有一个 MySQL 表`Table_A`，其中列出了数字范围及其对应的值：

```
beg_number
end_number
value 
```

并且需要一个脚本来创建一个`Table_B`包含两个字段的新表，该字段是所有数字及其对应值的详尽列表：

数值

```
求终值

 1 6 11
 7 9 13
 11 14 6
 15 19 3
```

到

```
数值
 1 11
 2 11
 3 11
 4 11
 5 11
 6 11
 7 13
 8 13
 9 13
 11 6
 12 6
 13 6
 14 6
 15 3
 16 3
 17 3
 18 3
```

这只能通过 MySQL 脚本来完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T21:29:07.133

试试这个 Store 过程：

```
CREATE PROCEDURE dorepeat()
BEGIN
  DECLARE xbeg INT;
  DECLARE xend INT;
  DECLARE xvalue INT;
  DECLARE done TINYINT DEFAULT 0;
  DECLARE cur1 CURSOR FOR SELECT beg, end, value FROM TableA;
  DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1;

  OPEN cur1;
  read_loop: LOOP
    FETCH FROM cur1 INTO xbeg, xend, xvalue;
    IF done THEN LEAVE read_loop; END IF;
    SET @x = xbeg;    

    REPEAT INSERT INTO TableB VALUES (@x, xvalue); SET @x = @x + 1; UNTIL @x > xend END REPEAT;
  END LOOP;
  CLOSE cur1;
END 
```

[在这里](http://sqlfiddle.com/#!2/bb97e/1)你可以找到我的 sqlfiddle；

# c++ - 为什么在头文件中定义类时没有多重定义错误？

> ID：14654377
> 
> 赞同：16
> 
> 时间：2013-02-01T20:23:27.710
> 
> 标签：c++, linker, header-files, one-definition-rule

我不确定我是否正确地提出了这个问题，但让我解释一下。

首先，我阅读了这篇解释声明和定义之间区别的文章： [http ://www.cprogramming.com/declare_vs_define.html](http://www.cprogramming.com/declare_vs_define.html)

其次，我从之前的研究中知道，在头文件中定义变量和函数是不好的做法，因为在链接阶段，您可能有多个同名定义，这会引发错误。

但是，为什么上课不会发生这种情况？根据另一个SO答案（ [定义和声明之间有什么区别？](https://stackoverflow.com/questions/1410563/what-is-the-difference-between-a-definition-and-a-declaration)），以下将是一个类定义：

```
 class MyClass {
        private:
        public:
    }; 
```

如果上面的定义在头文件中。然后，据推测，您可以拥有多个 #include 该标头的 .cpp 文件。这意味着该类在多个 .o 文件中编译后多次定义，但似乎不会造成太多问题......

另一方面，如果它是在头文件中定义的函数，它显然会导致问题......据我了解......也许？

那么类定义有什么特别之处呢？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-01T20:27:24.230

**单一定义规则**（3.2，[basic.def.odr]）以不同的方式应用于类和函数：

> 1 - 任何翻译单元不得包含任何变量、函数、类类型、枚举类型或模板的多个定义。
> 
> [...]
> 
> 4 - 每个程序都应包含该程序中 odr 使用的每个非内联函数或变量的准确定义 [...]

因此，虽然（非内联）函数在整个程序中最多可以定义一次（如果它们被调用或以其他方式使用，则只能定义一次），类可以定义与翻译单元（源文件）一样多次，但每个翻译单元不超过一次。

这样做的*原因*是，由于类是类型，因此它们的定义对于能够在翻译单元之间共享数据是必要的。最初，类（`struct`C 中的 s）没有任何需要链接器支持的数据；C++ 引入了虚成员函数和虚继承，这需要链接器支持*vtable*，但这通常通过将 vtable 附加到成员函数（的定义）来解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T20:27:30.020

类定义只是该类对象的一种蓝图。`struct`自C时代以来一直如此。这样的代码中实际上不存在任何类或结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T20:34:10.393

您的类定义定义了类，但没有定义该类的*对象*。在多个文件中定义类（或结构）是可以的，因为您只是定义了一个*类型*，而不是该类型的变量。如果您只有定义，则编译器不会发出任何代码。
编译器实际上仅在您声明此类型的对象（即变量）后才会发出代码：

```
class MyClass myvar; 
```

或者：

```
class MyOtherClass { 
    public: ...
    private: ...
} myvar;         // note the variable name, it instantiates a MyOtherClass 
```

这就是你不想在标题中做的事情，因为它会导致*myvar*的多个实例被实例化。

# java - 在同一行打印列名

> ID：14654378
> 
> 赞同：1
> 
> 时间：2013-02-01T20:23:36.917
> 
> 标签：java

我想打印列名，下面是我的代码

```
 for ( int k=1 ; k< columnCount+1;k++){
      System.out.println(columnNames[k] + "   ");
 } 
```

如何将值打印为列？

我想

```
value 1   value 2  value 3 
```

不是

```
value1
value2
value3 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-01T20:24:12.063

最简单的方法是使用

```
System.out.print(columnNames[k] + "   "); 
```

`ln`in`println`表示您要在打印行的末尾添加新的行标记。

* * *

同样正如[Reimeus](https://stackoverflow.com/users/871026/reimeus)在[他的评论](https://stackoverflow.com/questions/14654378/printing-column-names-on-the-same-line/14654382#comment20477973_14654378)中指出的那样，您可以使用制表符`"\t"`而不是固定数量的空格。

* * *

但是恕我直言，因为您使用它来打印列，您应该使用`System.out.format`（或`System.out.printf`）打印固定数量的字符，例如

```
System.out.format("[%-10s]", "name");// output [name      ]
System.out.format("[%10s]", "name");//  output [      name] 
```

[Formatter 类文档](http://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html#syntax)中的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T20:27:21.967

`System.out.println`添加一个新行。看`ln`后缀。你必须使用`System.out.print`.

# php - 如何将函数作为可选变量传递给 PHP 中的 call_user_func

> ID：14654379
> 
> 赞同：1
> 
> 时间：2013-02-01T20:23:37.783
> 
> 标签：php, php-5.2

所以我想使用`call_user_func`将数据传递给函数的可选参数。

这是代码示例，可选参数表示在另一个文件中声明`$data`的函数调用。`data`我只是希望通过使用`call_user_func`它将使用函数名称设置参数并在 createtable 函数中调用它来调用它，但似乎不起作用。

我从 PHP 手册中获得了示例，但`createTable`包含许多参数。如何`call_user_func`仅将字符串分配给默认设置`data`的可选参数？`$data``NULL`

```
function createTable($database, $table, $patch,$data = NULL)
{

    echo "INFO: Adding '$table'in database '$database'.\n";
    $sql = "SHOW TABLES FROM $database WHERE Tables_in_$database='$table';";
    $result = mysql_query($sql);
    $result_count = mysql_num_rows($result);

    if ( $result_count != 1 ) {
          echo "ERROR: Can not find table '$table' in database '$database'.\n";
          $result = mysql_query($patch);
          if ( false === $result ) {
                echo "ERROR: Adding Table '$table' in database '$database' ... Failed\n";
                return false;
            }
          else {
          echo "INFO: Adding Table '$table'in database '$database' ... Success\n";
             // using the optional parameter here 
              $data();
          return true;
               }

    } else {

        if ( $result_count == 1 ) {
            echo "ERROR: Table '$table'already in database '$database'.\n";
            return false;
        }

    }
}

// Now I'm passing value to the optional parameter $ data that is NULL as default.

call_user_func('createTable', "data"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T20:37:21.033

即使`call_user_func`您必须传递所有参数。

无论如何，`call_user_func`它是在函数名称不一定事先知道的情况下使用的。例如，您可能有多个函数和一个变量，而该变量包含要调用的函数的名称。

我个人认为它`eval`与可变变量相当：一个可怕的想法。毕竟，如果你有`$foo = "function_name";`那么你可以打电话`$foo()`，它会打电话`function_name`。

无论如何，回到正题，只需将其作为普通函数调用并为其提供所需的参数即可。`null`如果必须通过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T20:59:02.790

看来您只想传递最后一个参数，而不用担心第一个三个参数。我认为`call_user_func`这里根本不是正确的工具。

为什么不创建一个调用你的函数的函数呢？

```
function call_createTable($data){
    $database = '...';
    $table = '...';
    $patch = '...';

    return createTable($database, $table, $patch, $data);
} 
```

然后只需像这样简单地调用它：`call_createTable("data");`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T20:40:06.103

你必须像这样传递价值

```
call_user_func('createTable', $database, $table, $patch,$data); 
```

或者这个来自班级的电话

```
call_user_func(array(&$objectName->{$anotherObject},$functionName), $arg1, $arg2, $arg2); 
```

或者你可以使用它可以获得 arg 作为数组

```
call_user_func_array("createTable", array("one", "two")); 
```

或者 this for call from class 可以将 arg 作为数组

```
call_user_func_array(array($foo, "bar"), array("three", "four")); 
```

或者这也可以帮助你它不需要传递所有参数

```
 function __named($method, array $args = array()) 
{ 

$reflection = new ReflectionFunction( $method); 

$pass = array(); 
foreach($reflection->getParameters() as $param) 
{ 
  /* @var $param ReflectionParameter */ 
  if(isset($args[$param->getName()])) 
  { 
    $pass[] = $args[$param->getName()]; 
  } 
  else 
  { 
    try{
       $pass[] = $param->getDefaultValue();
    }catch(Exception $e){
       $pass[] = NULL; 
    }
  } 
} 

  return $reflection->invokeArgs( $pass); 
 } 
```

我希望它有效

样本：

```
__named('createTable', array('data' => 'value')); 
```

它是在课堂上使用的

```
public function __named($method, array $args = array()) 
{ 

   $reflection = new ReflectionMethod($this, $method); 

   $pass = array(); 
   foreach($reflection->getParameters() as $param) 
   { 
      /* @var $param ReflectionParameter */ 
      if(isset($args[$param->getName()])) 
      { 
         $pass[] = $args[$param->getName()]; 
      } 
      else 
      { 
     try{
           $pass[] = $param->getDefaultValue();
         }catch(Exception $e){
            $pass[] = NULL; 
         }
      } 
   } 

   return $reflection->invokeArgs($this,$pass); 
} 
```

如果你没有设置任何值 __named Put Null 而不是 Unset Value

# c# - 数据库中的 pages_xxx 表

> ID：14654380
> 
> 赞同：-1
> 
> 时间：2013-02-01T20:23:41.580
> 
> 标签：c#, asp.net, asp.net-mvc

在新创建的 MVC4 项目的数据库表中，我不知道如何插入默认内置表的数据，例如`webpages_OAuthMembership` `webpages_Roles`和`webpages_UsersInRoles`。当我注册一个新帐户时，只有上面没有提到的另外两个表在使用；我想知道是否必须在 pages_OAuthMembership 中手动编辑其余 3 个表，我不明白 Provider 的含义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T21:04:25.963

您也可以查看这篇文章 [http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5- web-forms-and-asp-net-mvc-4-templates.aspx](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx)

# events - 与传统 FRP 框架相比，Netwire 中的事件处理

> ID：14654385
> 
> 赞同：9
> 
> 时间：2013-02-01T20:24:16.220
> 
> 标签：events, haskell, frp, reactive-banana

大多数 Haskell FRP 框架（如 AFRP、Yampa 和 Reactive-banana）在连续时变函数和离散函数之间有所区别。通常他们称它们为行为和事件。

一个例外是 Netwire，它使用抑制幺半群来模拟事件。这种方法的优缺点是什么？

特别是，我对 FRP 在机器人控制中的应用很感兴趣。例如，这篇论文[http://haskell.cs.yale.edu/?post_type=publication&p=182](http://haskell.cs.yale.edu/?post_type=publication&p=182)展示了一种使用事件在 FRP 中对任务和 HSM 抽象进行编码的方法。这可以直接翻译成Netwire吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-01T22:10:12.130

事件作为潜在抑制信号的优点是它允许您非常简洁地编码最复杂的反应公式。想象一个开关，按下时显示“是”，否则显示“否”：

```
"yes" . switchPressed <|> "no" 
```

这个想法是，`switchPressed`如果相应的事件发生，则其作用类似于身份线，否则就禁止。这就是`<|>`进来的地方。如果第一根电线被抑制，它会尝试第二根。这是一个由两个按钮（左和右）控制的假设机器人手臂：

```
robotArm = integral_ 0 . direction
direction =
    ((-1) . leftPressed  <|> 0) +
    (1    . rightPressed <|> 0) 
```

虽然机器人手臂是假设的，但此代码不是。这确实是您在 Netwire 中编写此内容的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T05:37:43.740

经过一些试验，我已经实现了我需要的行为。基本上，您编写了一个自定义抑制剂类型，它可以捕获您需要的事件概念。就我而言，它是

```
data Inhibitor = Done | Timeout | Interrupt deriving Show 
```

完成意味着正常完成，其余构造函数发出某种错误信号。

之后，您编写所需的任何自定义组合器。就我而言，我需要一种方法来停止计算并进一步发出错误信号：

```
timeout deadline w | deadline <= 0 = inhibit Timeout
                   | otherwise = mkGen $ \dt a -> do
                       res <- stepWire w dt a
                       case res of
                         (Right o, w') -> return (Right o, timeout (deadline - dt) w')
                         (Left e, _)  -> return (Left e, inhibit e) 
```

这是 switchBy 的一种变体，它允许您更改一次电线。注意，它传递了一条新线的禁止信号：

```
switchOn new w0 =
    mkGen $ \dt x' ->
        let select w' = do
                (mx, w) <- stepWire w' dt x'
                case mx of
                  Left ex -> stepWire (new ex) dt x'
                  Right x -> return (Right x, switchOn new w)
        in select w0 
```

这是 (-->) 的变体，它抓住了中断任务链的想法。

```
infixr 1 ~>

w1 ~> w2 = switchOn ( \e -> case e of
                         Done -> w2
                         _ -> inhibit e
                    ) w1 
```

# jquery - JQuery - 如果存在某些其他元素，则将某些元素类更改为特定类

> ID：14654387
> 
> 赞同：2
> 
> 时间：2013-02-01T20:24:17.780
> 
> 标签：jquery, layout, parent-child, parent

嗨，我正在尝试编写一个博客主题，该主题将具有标签等，所以我希望某些类主要是父 div 在用某些东西标记时进行更改（下面的示例）。

类是跨度（使用引导程序）

html

```
<div id="a" class="span6">
</div>

<div id="b" class="span6">

<a class="taglink">[tag]</a>

</div> 
```

我想要的是将 div a 和 b 的类更改为 span12，并且*只有*它们，而没有其他父/相邻/子等 div。

这样当我用某些标签标记帖子时，我希望它的一些布局属性发生变化（通过它的 css 类）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T20:37:43.093

为标签创建一个侦听器，以便它将调用以下

```
$('#a,#b').addClass('span12').removeClass('span6'); 
```

我希望这个能帮上忙

如果您想要听众其他任何东西，请显示更多代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T20:29:06.827

为 a.taglink 的内容更改时创建一个事件侦听器，然后使用以下命令：

```
$('#a.span6,#b.span6').removeClass('span6').addClass('span12'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T20:42:44.053

这将选择您想要的*确切元素并交换类：*

```
$(".taglink").click(function(){
  $(this).parent("#b").removeClass('span6').addClass('span12').prev("#a").removeClass('span6').addClass('span12');
}); 
```

演示：http: [//jsfiddle.net/rniestroj/aKK3c/](http://jsfiddle.net/rniestroj/aKK3c/)

# javascript - 从 javascript 获取当前页面的 http 状态

> ID：14654390
> 
> 赞同：67
> 
> 时间：2013-02-01T20:24:35.277
> 
> 标签：javascript, http

有什么方法可以从 javascript 获取当前网页的 http 状态？

花了一些时间在网上搜索，但一点运气都没有......似乎不可能，但想与 Stack Overflow 核对可能有一些奇特的解决方法。

（从服务器提供它作为响应正文的一部分是不可接受的，该状态应该只能通过 http 标头获得）

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-02-01T20:46:05.197

这是不可能的，对不起。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2018-05-08T13:40:32.497

它并不漂亮，但您可以使用：

```
t = jQuery.get(location.href)
    .success(function () { console.log(t.status) })
    .error(function()    { console.log(t.status) }); 
```

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2014-12-31T09:08:18.507

你只能检查页面加载的状态 try:var x = document.readyState; x 的结果可能是： 五个值之一：

```
uninitialized - Has not started loading yet
loading - Is loading
loaded - Has been loaded
interactive - Has loaded enough and the user can interact with it
complete - Fully loaded 
```

# ruby-on-rails - 反向has_one/belongs_to？

> ID：14654400
> 
> 赞同：0
> 
> 时间：2013-02-01T20:25:22.517
> 
> 标签：ruby-on-rails

我正在构建一个具有跨页和页面的页面布局应用程序。每个跨页包含两页（左页和右页）。

数据库如下所示：

```
create_table :spreads do |t|
  ...
  t.references :left_page
  t.references :right_page
  ...
end

create_table :pages do |t|
  # No foreign keys
end 
```

从语义上讲，两个页面属于一个跨页，因此按如下方式设置模型是有意义的：

```
class Spread < ActiveRecord::Base
  has_one :left_page, :class_name => 'Page'
  has_one :right_page, :class_name => 'Page'
end

class Page < ActiveRecord::Base
  belongs_to :spread
end 
```

但是，由于外键存在于 spreads 表中，Rails 似乎要求相反：

```
class Spread < ActiveRecord::Base
  belongs_to :left_page, :class_name => 'Page'
  belongs_to :right_page, :class_name => 'Page'
end

class Page < ActiveRecord::Base
  has_one :spread
end 
```

每当我在 Rails 中遇到这样的事情时，我都会认为我以错误的方式处理问题。是这种情况还是我只是生活在阅读不太清楚的代码中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T20:43:24.180

**简短的回答：**

这取决于您的业务规则。

**更长的答案：**

这是一个架构设计问题，而不是真正的 Rails 问题......

由于您已经决定外键必须在`spreads`表中，这意味着您有充分的理由这样做（对吗？）。`belongs_to`只反映了这种结构。

当然，您可以将这些 FKS 放在`pages`桌子上。功能上，它（或多或少）没有改变......现在。但是当你实现回调时它会如何工作呢？操作您的对象有多容易？

*这是一个架构决定，只有您可以决定。*

Now, IMHO, it seems that your design is right. This structure holds more information in itself that would the other solution : your `spread` object will *always* have 0-1 left page and 0-1 right page; not only the fact that a spread has *at most* 2 pages is reflected in this structure, but each FK also reflects a *quality* of the association (*left* or *right* page). So i would stick with this solution, even if it "reads weird".

# github - 无法将文件添加到 github

> ID：14654401
> 
> 赞同：0
> 
> 时间：2013-02-01T20:25:23.443
> 
> 标签：github

我想在 github 中添加一个文件，如下所示：

```
git init
touch test.txt
git add test.tst
git cmmit -m'testtest'
git push origin master 
```

那么它会引发这个异常：

```
error: The requested URL returned error: 403 while accessing https://github.com/yacheng1127/YWProject.git/info/refs

fatal: HTTP request failed 
```

然后我验证公钥已附加到我的 github 帐户：

```
$ ssh -T git@github.com
Hi yacheng1127! You've successfully authenticated, but GitHub does not provide shell access.

$ ssh-add -l
2048 1a:a1:33:26:21:68:7e:9c:26:19:fb:74:a4:d1:6b:bd yacheng1127@gmail.com (RSA) 
```

然后我检查我的远程网址：

```
$ git remote -vorigin   
origin      https://github.com/yacheng1127/YWProject.git (fetch)
origin  https://github.com/yacheng1127/YWProject.git (push) 
```

我不知道问题出在哪里。有人可以帮助我吗？谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T20:30:42.703

当您为遥控器使用“git://”url 时使用 ssh 密钥，您可以更改它（[https://help.github.com/articles/changeing-a-remote-s-url](https://help.github.com/articles/changing-a-remote-s-url)）。

但是“https://”也应该可以工作（读/写），但它不能使用你的 ssh 密钥或 ssh 代理，你应该给 git 你的 github 登录名和密码：

[https://help.github.com/articles/set-up-git#password-caching](https://help.github.com/articles/set-up-git#password-caching)

# javascript - Telerik 网格 null

> ID：14654406
> 
> 赞同：0
> 
> 时间：2013-02-01T20:25:38.097
> 
> 标签：javascript, asp.net, telerik, telerik-grid, radgrid

我正在尝试在调整大小时使用 Telerik Grid 的重绘方法。在下面的代码中，变量 grid 始终为空，因此我不能调用 repaint 方法。

我是在页面加载之前调用网格吗？任何人都可以建议如何让这个工作？

```
<telerik:RadCodeBlock runat="server" ID="MainScriptBlock">
        <script type="text/javascript">
            window.$ = $telerik.$;

            jQuery.event.add(window, "load", resize);
            jQuery.event.add(window, "resize", resize);

            function resize() {                  
                 var grid = $find("<%= RadGrid1.ClientID %>");
                var h = $(window).height();             
                $(".resizeGrid").css({ 'height': (h - 60) });
                grid.repaint();
            }                       
        </script>
    </telerik:RadCodeBlock> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T20:35:07.553

您需要使用 repaintGrid 函数。我在[文档](http://www.telerik.com/help/aspnet-ajax/grid-repaint.html)中找到了这个。

```
function repaintGrid(sender, args) {
    var grid = $find("<%=RadGrid1.ClientID %>");
    grid.repaint();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-15T09:00:04.557

在 Telerik MVC 扩展中，我使用：

```
$(".t-grid-content:first", Grid).css("height", NewHeight + "px"); 
```

希望能帮助到你

# excel - 将 Excel 图表发布到 Lotus Notes 电子邮件中

> ID：14654413
> 
> 赞同：1
> 
> 时间：2013-02-01T20:26:21.447
> 
> 标签：excel, vba, email, charts, lotus-notes

好的，刚刚进入 VBA，我已经收到了一个 doosie。我正在尝试从 Excel 中的工作表中获取一个图表，并将其放入 Lotus Notes。我已经尝试将其附加为richText格式（从注释掉的区域可以看出）和JPEG（我最近的尝试。电子邮件发送正常。正文按预期进行。我只是不能将图表放入电子邮件正文。我真的需要一些帮助。这是我所拥有的：

```
 Sub SendEmail()
  ' setting up various objects
    Dim Maildb As Object
    Dim UserName As String
    Dim MailDbName As String
    Dim MailDoc As Object
    Dim Session As Object
    Dim recipient As String
    Dim ccRecipient As String
    Dim bccRecipient As String
    Dim subject As String
    Dim bodytext As String
    Dim User As String
   ' Dim attachMe As Object
   ' Dim Attachment1 As String
   ' Dim EmbedObj1 As Object
   ' Dim Chart1 As Object
    Dim Fname As String

    User = Application.UserName

     ' setting up all sending recipients
    recipient = "Someoneelse@somewhere.com"
     'ccRecipient =Someoneelse@Somewhereelse.com
     'bccRecipient = ""
    subject = "Week-To-Date GM%"
    bodytext = "" & vbLf & _
               "" & vbLf & _
               "Here is a breakdown of your total GM% for this week.  The graph gives you the GM% by day, with a display at the bottom" & vbLf & _
               " that gives you your WTD Margin Percentage.  We will continue to develop this report for you to provide you with better information."

     ' creating a notes session
    Set Session = CreateObject("Notes.NotesSession")
    UserName = Session.UserName
    MailDbName = Left$(UserName, 1) & Right$(UserName, (Len(UserName) - InStr(1, UserName, " "))) & ".nsf"
    Set Maildb = Session.GETDATABASE("", MailDbName)

    If Maildb.IsOpen <> True Then
        On Error Resume Next
        Maildb.OPENMAIL
    End If

    Set MailDoc = Maildb.CreateDocument
    MailDoc.Form = "Memo"

    Fname = Environ$("temp") & "\GM%.jpeg"

    Sheets("Chart").Shapes("Chart 2").Chart.ChartArea.Export Filename:=Fname, FilterName:="JPEG"

     ' loading the lotus notes e-mail with the inputed data
    With MailDoc
        .SendTo = recipient
         '.copyto = ccRecipient
         '.blindcopyto = bccRecipient
        .subject = subject
        .Attachment.Add Fname
        .Body = bodytext
    End With

     ' saving message (Change to True if you want to save it)
    MailDoc.SaveMessageOnSend = False

'        Attachment1 = Worksheets("Chart").Shapes("Chart 2").ChartArea
'    If Attachment1 <> "" Then
'        Set attachMe = MailDoc.CREATERICHTEXTITEM("Attachment1")
'        Set EmbedObj1 = attachMe.EmbedObject(1454, "", Attachment1, "Attachment")
'        MailDoc.CREATERICHTEXTITEM ("Attachment")
'    End If

     ' send e-mail
    MailDoc.PostedDate = Now()
     ' if error in attachment or name of recipients

    MailDoc.Send 0, recipient

    Set Maildb = Nothing
    Set MailDoc = Nothing
    Set attachMe = Nothing
    Set Session = Nothing
    Set EmbedObj1 = Nothing

     'Unload Me
    Exit Sub
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T21:02:12.597

这应该在 MailDoc.Send 之前工作

```
Dim rtitem As Object
Dim object As Object

Set rtitem = MailDoc.CreateRichTextItem("Attachment1")
Set object = rtitem.EmbedObject ( 1454, "", Fname) 
```

# android - NotificationManager 仅在设备上崩溃

> ID：14654414
> 
> 赞同：4
> 
> 时间：2013-02-01T20:26:22.063
> 
> 标签：android

我有一个我无法解释的问题。我有一个包含按钮的主要活动。单击此按钮时，它会启动一个新活动，该活动会从 Internet 下载 xml 文件。下载时有一个通知，指示下载进度。

这在我的 AVD（API 级别 17）中完美运行。但是，当我尝试在我的设备（API 级别 10 的 GT-I1900，android 版本 2.3.3）中做同样的事情时，它会崩溃。

我认为问题存在于`notificationBuilder`我使用的那个。

```
Context context = getApplicationContext();
notificationManager = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
notificationBuilder = new NotificationCompat.Builder(this);
notificationBuilder.setContentTitle("Download Progress").setContentText("Downloading").setSmallIcon(android.R.drawable.stat_sys_download); 
```

**...**

```
notificationManager.notify(0, notificationBuilder.build()); 
```

对于下载，我使用了经过测试并且工作正常的 DownloadFilesTask（扩展 AsyncTask）类。

这是异常日志：

```
 at android.app.NotificationManager.notify(NotificationManager.java:91) 
```

所以我的问题是：如果我的设备的 API 级别确实存在问题，任何人都可以解释如何将通知生成器用于较低的 API。

这是完整的日志：

```
02-01 23:06:28.862: E/AndroidRuntime(16860): FATAL EXCEPTION: AsyncTask #1
02-01 23:06:28.862: E/AndroidRuntime(16860): java.lang.RuntimeException: An error occured while executing doInBackground()
02-01 23:06:28.862: E/AndroidRuntime(16860):    at android.os.AsyncTask$3.done(AsyncTask.java:200)
02-01 23:06:28.862: E/AndroidRuntime(16860):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
02-01 23:06:28.862: E/AndroidRuntime(16860):    at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
02-01 23:06:28.862: E/AndroidRuntime(16860):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
02-01 23:06:28.862: E/AndroidRuntime(16860):    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
02-01 23:06:28.862: E/AndroidRuntime(16860):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
02-01 23:06:28.862: E/AndroidRuntime(16860):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
02-01 23:06:28.862: E/AndroidRuntime(16860):    at java.lang.Thread.run(Thread.java:1019)
02-01 23:06:28.862: E/AndroidRuntime(16860): Caused by: java.lang.IllegalArgumentException: contentIntent required: pkg=com.bakoproductions.easybet id=0 notification=Notification(vibrate=null,sound=null,defaults=0x0,flags=0x0)
02-01 23:06:28.862: E/AndroidRuntime(16860):    at android.os.Parcel.readException(Parcel.java:1326)
02-01 23:06:28.862: E/AndroidRuntime(16860):    at android.os.Parcel.readException(Parcel.java:1276)
02-01 23:06:28.862: E/AndroidRuntime(16860):    at android.app.INotificationManager$Stub$Proxy.enqueueNotificationWithTag(INotificationManager.java:322)
02-01 23:06:28.862: E/AndroidRuntime(16860):    at android.app.NotificationManager.notify(NotificationManager.java:111)
02-01 23:06:28.862: E/AndroidRuntime(16860):    at android.app.NotificationManager.notify(NotificationManager.java:91)
02-01 23:06:28.862: E/AndroidRuntime(16860):    at com.bakoproductions.easybet.XMLParser.downloadXML(XMLParser.java:83)
02-01 23:06:28.862: E/AndroidRuntime(16860):    at com.bakoproductions.easybet.DownloadFilesTask.doInBackground(DownloadFilesTask.java:24)
02-01 23:06:28.862: E/AndroidRuntime(16860):    at com.bakoproductions.easybet.DownloadFilesTask.doInBackground(DownloadFilesTask.java:1)
02-01 23:06:28.862: E/AndroidRuntime(16860):    at android.os.AsyncTask$2.call(AsyncTask.java:185)
02-01 23:06:28.862: E/AndroidRuntime(16860):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
02-01 23:06:28.862: E/AndroidRuntime(16860):    ... 4 more 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T21:19:19.833

在较旧的 android 版本中，您`Notification` **必须**有一个内容 Intent，以便当用户单击您的通知时，会发生*一些*事情。这意味着您必须：

制作一个`Intent`对象，指向某处，例如您的`MainActivity`. 确保添加`Intent.FLAG_ACTIVITY_NEW_TASK`标志。

```
Intent intent = new Intent (this, MainActivity.class);
intent.addFlags (Intent.FLAG_ACTIVITY_NEW_TASK); 
```

将其转换为 PendingIntent

```
PendingIntent pend = PendingIntent.getActivity(this, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT); 
```

最后，在构建器中，调用

```
notificationBuilder.setContentIntent (pend); 
```

# php - 使用 PHP 读取 DBF 文件 - 它会损坏文件或数据库吗？

> ID：14654416
> 
> 赞同：0
> 
> 时间：2013-02-01T20:26:32.377
> 
> 标签：php, dbf

一个软件将所有数据保存在 DBF 文件中，我正在使用 PHP 读取它。该软件始终访问和使用这些文件。那么，如果我同时使用 php 读取这些数据和文件，它是否会损坏这些文件或数据库或导致软件顺利使用这些文件的任何错误或中断？

我什至不会修改它们。我只会读它们。

# python - Python 使用 lxml 遍历部分

> ID：14654417
> 
> 赞同：1
> 
> 时间：2013-02-01T20:26:32.867
> 
> 标签：python, parsing, iteration, lxml

我有一个网页，我目前正在使用 BeautifulSoup 进行解析，但速度很慢，所以我决定尝试 lxml，因为我阅读它的速度非常快。

无论如何，我正在努力让我的代码遍历我想要的部分，不知道如何使用 lxml，而且我找不到明确的文档。

无论如何，这是我的代码：

```
import urllib, urllib2
from lxml import etree

def wgetUrl(target):
    try:
        req = urllib2.Request(target)
        req.add_header('User-Agent', 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3 Gecko/2008092417 Firefox/3.0.3')
        response = urllib2.urlopen(req)
        outtxt = response.read()
        response.close()
    except:
        return ''
    return outtxt

newUrl = 'http://www.tv3.ie/3player'

data = wgetUrl(newUrl)
parser = etree.HTMLParser()
tree   = etree.fromstring(data, parser)

for elem in tree.iter("div"):
    print elem.tag, elem.attrib, elem.text 
```

这将返回所有 DIV，但我如何指定只遍历 dev id='slider1'？

```
div {'style': 'position: relative;', 'id': 'slider1'} None 
```

这不起作用：

```
for elem in tree.iter("slider1"): 
```

我知道这可能是一个愚蠢的问题，但我无法弄清楚..

谢谢！

***** 编辑*** *****

 **在您添加此代码的帮助下，我现在有以下输出：

```
for elem in tree.xpath("//div[@id='slider1']//div[@id='gridshow']"):
    print elem[0].tag, elem[0].attrib, elem[0].text
    print elem[1].tag, elem[1].attrib, elem[1].text
    print elem[2].tag, elem[2].attrib, elem[2].text
    print elem[3].tag, elem[3].attrib, elem[3].text
    print elem[4].tag, elem[4].attrib, elem[4].text 
```

输出：

```
a {'href': '/3player/show/392/57922/1/Tallafornia', 'title': '3player | Tallafornia, 11/01/2013\. The Tallafornia crew are back, living in a beachside villa in Santa Ponsa, Majorca. As the crew settle in, the egos grow bigger than ever and cause tension'} None
h3 {} None
span {'id': 'gridcaption'} The Tallafornia crew are back, living in a beachside vill...
span {'id': 'griddate'} 11/01/2013
span {'id': 'gridduration'} 00:27:52 
```

这一切都很棒，但我错过了上面 a 标签的一部分。解析器会不会正确处理代码？

我没有得到以下信息：

```
<img alt="3player | Tallafornia, 11/01/2013\. The Tallafornia crew are back, living in a beachside villa in Santa Ponsa, Majorca. As the crew settle in, the egos grow bigger than ever and cause tension" src='http://content.tv3.ie/content/videos/0378/tallaforniaep2_fri11jan2013_3player_1_57922_180x102.jpg' class='shadow smallroundcorner'></img> 
```

任何想法为什么它不拉这个？

再次感谢，非常有用的帖子..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T20:31:24.150

您可以使用 XPath 表达式，如下所示：

```
for elem in tree.xpath("//div[@id='slider1']"): 
```

例子：

```
>>> import urllib2
>>> import lxml.etree
>>> url = 'http://www.tv3.ie/3player'
>>> data = urllib2.urlopen(url)
>>> parser = lxml.etree.HTMLParser()
>>> tree = lxml.etree.parse(data,parser)
>>> elem = tree.xpath("//div[@id='slider1']")
>>> elem[0].attrib
{'style': 'position: relative;', 'id': 'slider1'} 
```

* * *

您需要更好地分析您正在处理的页面的内容（一个很好的方法是使用带有 Firebug 插件的 Firefox）。

`<img>`您尝试获取的标签实际上是标签的子标签`<a>`：

```
>>> for elem in tree.xpath("//div[@id='slider1']//div[@id='gridshow']"):
...    for elem_a in elem.xpath("./a"):
...       for elem_img in elem_a.xpath("./img"):
...          print '<A> HREF=%s'%(elem_a.attrib['href'])
...          print '<IMG> ALT="%s"'%(elem_img.attrib['alt'])
<A> HREF=/3player/show/392/58784/1/Tallafornia
<IMG> ALT="3player | Tallafornia, 01/02/2013\. A fresh romance blossoms in the Tallafornia house. Marc challenges Cormac to a 'bench off' in the gym"
<A> HREF=/3player/show/46/58765/1/Coronation-Street
<IMG> ALT="3player | Coronation Street, 01/02/2013\. Tyrone bumps into Kirsty in the street and tries to take Ruby from her pram"
../.. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T13:57:51.673

这就是我为自己工作的方式，我不确定这是否是最好的方法，所以欢迎评论：

```
import urllib2, re
from lxml import etree
from datetime import datetime

def wgetUrl(target):
    try:
        req = urllib2.Request(target)
        req.add_header('User-Agent', 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3 Gecko/2008092417 Firefox/3.0.3')
        response = urllib2.urlopen(req)
        outtxt = response.read()
        response.close()
    except:
        return ''
    return outtxt

start = datetime.now()

newUrl = 'http://www.tv3.ie/3player' # homepage

data = wgetUrl(newUrl)
parser = etree.HTMLParser()
tree   = etree.fromstring(data, parser)

for elem in tree.xpath("//div[@id='slider1']//div[@id='gridshow'] | //div[@id='slider1']//div[@id='gridshow']//img[@class='shadow smallroundcorner']"):
    if elem.tag == 'img':
        img = elem.attrib.get('src')
        print 'img: ', img

    if elem.tag == 'div':
        show = elem[0].attrib.get('href')
        print 'show: ', show
        titleData = elem[0].attrib.get('title')

        match=re.search("3player\s+\|\s+(.+),\s+(\d\d/\d\d/\d\d\d\d)\.\s*(.*)", titleData) 
        title=match.group(1)
        print 'title: ', title

        description = match.group(3)
        print 'description: ', description

        date = elem[3].text
        duration = elem[4].text
        print 'date: ', date
        print 'duration: ', duration

end = datetime.now()
print 'time took was ', (end-start) 
```

时间安排非常好，虽然不是我对 BeautifulSoup 的期望的大差异..**

# javascript - ASP.NET MVC 中的 Javascript 确认表单

> ID：14654419
> 
> 赞同：-3
> 
> 时间：2013-02-01T20:26:35.907
> 
> 标签：javascript, asp.net-mvc, jquery

我的代码有什么问题？这是确认对话框。如果用户单击是，他/她必须导航到工作控制器的索引视图。如果用户单击否，他/她必须导航到产品控制器的索引视图。但是导航不起作用！

```
 <input type="button"  onclick="if (confirm('Format the hard disk?'))
$.ajax({
    url: '/Work/Index/24',
    data: { ID: myJSVariable },
    type: 'get',
    traditional: true
});
else {
$.ajax({
    url: '/Product/Index/24',
    traditional: true
})
}" /> 
```

问题是什么？还有其他建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T20:36:25.143

如果要导航，则需要使用`window.location = "/Work/Index/24"`

如果你想用来`$.ajax`做一个异步调用，你需要添加一个成功函数。

```
$.ajax({
    ...
    success : funcion(result){
        alert('ajax completed successfully');
    }
}); 
```

# java - 如何映射一个非持久的用户定义类，以便 Hibernate 使用 SQLQuery 的实例加载 bean

> ID：14654420
> 
> 赞同：0
> 
> 时间：2013-02-01T20:26:37.250
> 
> 标签：java, hibernate, jakarta-ee

我是hibernate的新手，很难让它在直接表映射场景之外的任何东西上工作。基本上，我有一个用户定义的 Java 类，称为：BookInvoice。此类是非持久性（不是 db 表），并使用先前定义和注释的 db 表中的列。每次我尝试将其标记为 @Entity 时，它都会告诉我我不能，因为它不是现有的数据库表。我如何映射它，以免我得到

未知实体：com.acentia.training.project15.model.BookInvoice

我遇到的错误消息。

我的 sql 查询很好，我可以从数据库中获取信息；但是，它们作为 Object 类返回，我不允许将它们转换为我想要的 BookInvoice 类以便将其发送回调用方法。请在下面找到我迄今为止的工作片段。. .

请注意，我所有符合现有数据库表查询的常规类都可以正常工作，只是那些我遇到问题的非持久类。

PurchaseOrderInvoiceDAO：

```
 List<BookInvoice> bInvoiceList = null;
        final String bookInvoiceQuery =
                "SELECT Books.ID, PO_Details.QUANTITY, Books.ISBN, Books.TITLE, Books.AUTHOR, Author.Name, Books.PUBLISHED, Books.COVER, Books.SERIES, Books.SERIES_NO,\n" +
                        "          Books.SUBJECT_ID,Books.PRICE\n" +
                        "        FROM Purchase_Order, PO_Details, Books, Author\n" +
                        "        WHERE Purchase_Order.ID=?\n" +
                        "        AND Purchase_Order.ID=PO_Details.PO_ID\n" +
                        "        AND PO_Details.Book_ID=Books.ID\n" +
                        "        AND Books.AUTHOR=Author.ID";

        Query bookInvoicQ = getSession().createSQLQuery(bookInfoQuery).addEntity(BookInvoice.class);
        bookInvoicQ.setInteger(0, id);
        bList = (List<Books>) bookInvoicQ.list(); 
```

BookInvoice类：

```
 public class BookInvoice {

            Integer id = null;
            Integer quantity = null;
            String isbn = null;
            String title = null;
            Integer authorId = null;
            Date publishedDate = null;
            String cover = null;
            String series = null;
            Integer seriesNo = null;
            Integer subjectId = null;
            Double price = null;

            public BookInvoice(final Integer id, final Integer quantity, final String isbn, final String title,
                   final Integer authorId, final Date publishedDate, final String cover,
                   final String series, final Integer seriesNo, final Integer subjectId, final Double price) {
                   this.id = id;
                   this.quantity = quantity;
                   this.isbn = isbn;
                   this.title = title;
                   this.authorId = authorId;
                   this.publishedDate = publishedDate;
                   this.cover = cover;
                   this.series = series;
                   this.seriesNo = seriesNo;
                   this.subjectId = subjectId;
                   this.price = price;
           }

           public BookInvoice(){}

           public Integer getId() {
               return id;
           }

           etc. . . . 
```

堆栈跟踪片段：

```
 Struts Problem Report

           Struts has detected an unhandled exception:

           Messages:    
           Unknown entity: com.acentia.training.project15.model.BookInvoice
           File:    org/hibernate/impl/SessionFactoryImpl.java
           Line number:     693
           Stacktraces 
```

org.hibernate.MappingException：未知实体：
com.acentia.training.project15.model.BookInvoice
org.hibernate.impl.SessionFactoryImpl.getEntityPersister(SessionFactoryImpl.java:693)

org.hibernate.loader.custom.sql.SQLQueryReturnProcessor.getSQLLoadable(SQLQueryReturnProcessor.java:335) org.hibernate.loader.custom.sql.SQLQueryReturnProcessor.processRootReturn(SQLQueryReturnProcessor.java:376) org.hibernate.loader.custom.sql。 SQLQueryReturnProcessor.processReturn(SQLQueryReturnProcessor.java:355) org.hibernate.loader.custom.sql.SQLQueryReturnProcessor.process(SQLQueryReturnProcessor.java:171) org.hibernate.loader.custom.sql.SQLCustomQuery.(SQLCustomQuery.java:87) org .hibernate.engine.query.NativeSQLQueryPlan.(NativeSQLQueryPlan.java:67) org.hibernate.engine.query.QueryPlanCache.getNativeSQLQueryPlan(QueryPlanCache.java:166) org.hibernate.impl.AbstractSessionImpl.getNativeSQLQueryPlan(AbstractSessionImpl.java:160) org.hibernate.impl.AbstractSessionImpl.list(AbstractSessionImpl.java:165) 组织。hibernate.impl.SQLQueryImpl.list(SQLQueryImpl.java:157) com.acentia.training.project15.bo.PurchaseOrderInvoiceBO$PurchaseOrderInvoiceDAO.getById(PurchaseOrderInvoiceBO.java:196)

...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T20:59:24.613

好的！终于崩溃了，和我的主管谈了这件事。他解释说，我在这方面做了很多额外的工作。

基本上，如果我正确设置了类/数据库映射，那么他们将从直接对应于数据库表的类的映射中`@Entity`获得所有正确的信息（即等）。`@OneToMany`基本上，Hibernate 将下降到尽可能多的级别（PO_Details ->Payments->Books 等），它们会为我提供我需要的所有其他信息，并且我不需要创建自己的自定义类。

# java - 如何让 IntelliJ 为非基于 ruby 的项目加载我的 .rvmrc？

> ID：14654422
> 
> 赞同：4
> 
> 时间：2013-02-01T20:26:47.563
> 
> 标签：java, grails, intellij-idea, rvm, rvmrc

我有一个 Grails 项目，它依赖于安装的几个 ruby​​ gem。我们所有的开发人员都安装了 RVM，因此我们的项目目录中有一个 .rvmrc 文件来切换到适当的 ruby​​ 和 gemset。

即使项目需要将 SDK 设置为 JDK，有没有办法让 IntelliJ 自动读取 .rvmrc？

注意：我查看了 IntelliJ ruby​​ 插件，但没有找到让它加载 .rvmrc 但不是唯一的 SDK 的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T21:21:32.493

这是不可能的，请[与用例一起提交详细的请求](http://youtrack.jetbrains.net/issues/RUBY)。

# rstudio - 如何在 Rstudio 中使用制表符补全

> ID：14654423
> 
> 赞同：0
> 
> 时间：2013-02-01T20:26:52.530
> 
> 标签：rstudio, tab-completion

我已经使用 Rstudio 几个星期了，并且选项卡完成对我来说工作不一致。例如：

```
my_variable = 10
my_va 
```

这些是我的 R 脚本中仅有的两行。当我按 Tab 使用完成时，文本栏旁边会出现一条小消息，上面写着“（不匹配）”，当我相信它应该在上面的行中找到名为“my_variable”的匹配变量时。

有谁知道如何在 Rstudio 中使用制表符完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T02:47:39.847

RStudio 查看工作区和加载的包以尝试完成制表符。如果您还没有运行第一行，那么 RStudio 将无法识别您要完成“my_variable”。

如果你运行你的第一行，那么 RStudio 将能够告诉你有一个名为 my_variable 的变量，并将提供完成它。

[您可以在RStudio 文档](http://www.rstudio.com/ide/docs/using/console#completion)中阅读更多内容。

# java - 如何在 Eclipse 中复制一个大的肥皂请求以进行单元测试

> ID：14654424
> 
> 赞同：0
> 
> 时间：2013-02-01T20:26:58.087
> 
> 标签：java, eclipse, junit

我正在编写一些输入是`Soap`请求的单元测试。我的请求长度至少为 80 行，当我将其复制到 Eclipse 中进行单元测试时，它不会附加`+ "`到每个新行中。（我以前工作过`IDEA`，用它来很好地格式化它，我只需要注意转义双引号）。有没有更好的方法来做到这一点，而不是手动附加 + 然后将每一行括在双引号中。

我认为`File I/O`对于单元测试来说使用太多了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T20:54:08.930

当您将代码粘贴到 Eclipse 中的字符串中时，您可以自动插入特殊字符，请参阅`Window Preferences->Java->Editor->Typing->Escape text when pasting into a string literal`

粘贴

```
foo
bar
baz 
```

进入

```
String s = ""; 
```

给

```
String s = "foo\n" + 
        "bar\n" + 
        "baz"; 
```

# internet-explorer - 检测 HiDPI Windows Phone 8 设备

> ID：14654425
> 
> 赞同：10
> 
> 时间：2013-02-01T20:26:58.983
> 
> 标签：internet-explorer, windows-phone-8, high-resolution

如何检测运行 Windows Phone 8 的 HiDPI 设备？

我正在测试的手机是诺基亚 Lumia 920，它有一个 4.5 英寸的 1280 × 768 屏幕（即 > 300 dpi）。IE 支持`min-resolution`CSS 但不支持`min-device-pixel-ratio`. 使用此[设备像素密度测试](http://bjango.com/articles/min-device-pixel-ratio/)，Lumia 报告**96 dpi**。这远低于实际的屏幕分辨率，将被视为普通的非 HiDPI 设备。

由于 IE（尚）不支持`window.devicePixelRatio`JavaScript，我无法找到一种方法来准确检测 Lumia 是否能够显示 HiDPI 图像。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-02T04:16:04.130

查看[http://timkadlec.com/2013/01/windows-phone-8-and-device-width/](http://timkadlec.com/2013/01/windows-phone-8-and-device-width/)

理论上（我没有手机可以对此进行测试），如果您将以下所有内容添加到您的页面，您应该被授予为 Windows Phone 8 和 Windows 8 设备获取有效 DPR 的能力。

HTML 元视口（当前/旧版非 W3C 实现）

```
<meta name="viewport" content="width=device-width" /> 
```

CSS @viewport（当前/未来的 W3C 草案实现）：

```
@-webkit-viewport{width:device-width}
@-moz-viewport{width:device-width}
@-ms-viewport{width:device-width}
@-o-viewport{width:device-width}
@viewport{width:device-width} 
```

用于禁用 Windows Phone 8 中元视口的古怪 @viewport 覆盖的 Javascript：

```
if (navigator.userAgent.match(/IEMobile\/10\.0/)) {
    var msViewportStyle = document.createElement("style");
    msViewportStyle.appendChild(
        document.createTextNode(
            "@-ms-viewport{width:auto!important}"
        )
    );
    document.getElementsByTagName("head")[0].
        appendChild(msViewportStyle);
} 
```

然后`screen.width/document.documentElement.clientWidth`应该是[正确实现 screen.width](http://www.quirksmode.org/mobile/tableViewport.html#t00)`window.devicePixelRatio`的所有移动浏览器的有效近似值

# javascript - .text 功能不起作用

> ID：14654426
> 
> 赞同：2
> 
> 时间：2013-02-01T20:27:00.457
> 
> 标签：javascript, select, option, innerhtml, innertext

我似乎无法更改下拉列表的第一个选项元素的文本。我试过了：

```
var e_option = document.getElementsByTagName("option");
e_option[0].text = "Selectionnaire"; 
```

和

```
var e_option = document.getElementsByTagName("option");
e_option[0].innerHTML = "Selectionnaire"; 
```

和

```
var e_option = document.getElementsByTagName("option");
e_option[0].innerText = "Selectionnaire"; 
```

但是，似乎没有任何改变选项的文本。

最奇怪的是：

```
 var e_option = document.getElementsByTagName("option");
    e_option[0].style.color = "red"; 
```

确实将选项更改为具有红色字体，并且

```
 var e_option = document.getElementsByTagName("option");
    alert(e_option[0].text); 
```

是否警告/弹出选项的当前文本。

这是 HTML：

```
 ...
    <td id="control">
        <SPAN CLASS="rsfieldcontrol"><INPUT TYPE=TEXT CLASS="rsfieldcontrol" MAXLENGTH=20 SIZE=38 TABINDEX="70" NAME="CONTACTVERIFY1businessPostalCode" VALUE=""></SPAN>
    </td>
    <td>&nbsp;

    </td>
    <td>
        <SPAN CLASS="rsfieldlabel">Pays :</SPAN>
    </td>
    <td id="control">    
        <SPAN CLASS="rsfieldcontrol">
             <SELECT  CLASS="rsfieldcontrol"  TABINDEX="110" NAME="CONTACTVERIFY1businessCountry">
              <OPTION LABEL=" - Select an option - " VALUE=" - Select an option - "> - Select an option - </OPTION>
              <OPTION LABEL="Afghanistan" VALUE="Afghanistan">Afghanistan</OPTION><OPTION LABEL="Albania" VALUE="Albania">Albania</OPTION>
              //I cut out the other 200 odd countries here
              <OPTION LABEL="Zimbabwe" VALUE="Zimbabwe">Zimbabwe</OPTION></SELECT></SPAN> 
    </td>
</tr>
<tr>
    <td width="30px">&nbsp;

    </td>
    <td style="font-weight:bold;">
        <SPAN CLASS="rsfieldlabelrequired">* Courriel :</SPAN>
    </td>
      ... 
```

请注意，所有的 select、option 和 span 标签都是由 LexisNexis InterAction 生成的，我无法更改代码。这就是我使用 javascript 将第一个选项从英语更改为法语的原因。

任何帮助，将不胜感激！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T21:51:47.387

哎呀！

正在显示选项标签的标签属性值，而不是选项开始和结束标签之间的文本。因此我只需要写：

```
var e_option = document.getElementsByTagName("option");
e_option[0].setAttribute("label", "");
e_option[0].text = " - Selectionner - "; 
```

甚至

```
var e_option = document.getElementsByTagName("option");
e_option[0].setAttribute("label", " - Selectionner - "); 
```

感谢您的意见和帮助！

# c++ - 为什么我的程序在 HTTP/1.1 中读取额外的字节

> ID：14654436
> 
> 赞同：1
> 
> 时间：2013-02-01T20:28:04.433
> 
> 标签：c++, http, sockets

我正在尝试使用套接字并尝试构建一个非常简单的 webbot。

这是我的代码：

```
#include <sys/types.h>
#include <sys/socket.h>
#include <arpa/inet.h>
#include <netdb.h>
#include <errno.h>
#include <cstring>
#include <iostream>
#include <string>

#define HTTP_PORT "80"

#define HOST "www.taringa.net"
#define PORT HTTP_PORT

#define IN_BUFFSIZE 1024
#define OUT_BUFFSIZE 1024

#define REQUEST "GET /Taringa/posts HTTP/1.0\r\nHost: www.taringa.net\r\nUser-Agent: foo\r\n\r\n"

using namespace std;

int main(int argc, char **argv) {

  struct addrinfo hints, *res;
  struct sockaddr_in servAddress;
  int sockfd;

  char addrstr[100];
  char buff_msg_out[OUT_BUFFSIZE], buff_msg_in[IN_BUFFSIZE];

  memset(&hints, 0, sizeof(hints));
  hints.ai_family = AF_UNSPEC;
  hints.ai_socktype = SOCK_STREAM;
  if ( getaddrinfo(HOST, HTTP_PORT, &hints, &res) != 0) {
     cerr << "Error en getaddrinfo" << endl;
     return -1;
  }

  // Crear socket
  if ( ( sockfd = socket(res->ai_family, res->ai_socktype, res->ai_protocol) ) < 0 )
  {
   cerr << "Error en socket()" << endl;
   return -1;
  }

  // Iniciar conexion
  if ( connect(sockfd, res->ai_addr, res->ai_addrlen) == -1 )
  {
   cerr << "Error en connect()" << endl;
   cerr << "Error: " << strerror(errno) << endl;
   return -1;
  }

  cout << "Conectado con éxito" << endl;

  // Enviar datos
  strncpy(buff_msg_out, REQUEST, strlen(REQUEST));

  if ( send(sockfd, buff_msg_out, strlen(buff_msg_out), 0) <= 0 )
  {
   cerr << "Error en write()" << endl;
   return -1;
  }

  cout << "Mensaje enviado:" << endl << buff_msg_out << endl << endl;

  int bytes_recv = 0;

  while ( ( bytes_recv = recv(sockfd, buff_msg_in, IN_BUFFSIZE-1, 0)) > 0 )
  {
    buff_msg_in[bytes_recv] = '\0';
    cout << buff_msg_in << endl;        
  }

  freeaddrinfo(res);
  close(sockfd);

  return 0;
} 
```

这是请求具有 HTTP/1.0 时的输出

```
HTTP/1.1 200 OK
Server: n0
Date: Fri, 01 Feb 2013 19:57:26 GMT
Content-Type: text/html; charset=utf8
Connection: close
Set-Cookie: trngssn=06359673; path=/
Set-Cookie: trngssn=deleted; expires=Thu, 01-Jan-1970 00:00:01 GMT; path=/; domain=.taringa.net
Set-Cookie: taringa_user_id=deleted; expires=Thu, 01-Jan-1970 00:00:01 GMT; path=/; domain=.taringa.net
Set-Cookie: lastNick=deleted; expires=Thu, 01-Jan-1970 00:00:01 GMT; path=/; domain=.taringa.net
Set-Cookie: fbs=deleted; expires=Thu, 01-Jan-1970 00:00:01 GMT; path=/; domain=.taringa.net
Set-Cookie: tws=deleted; expires=Thu, 01-Jan-1970 00:00:01 GMT; path=/; domain=.taringa.net
Set-Cookie: iB-friendfind=deleted; expires=Thu, 01-Jan-1970 00:00:01 GMT; path=/; domain=.taringa.net

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="es" xml:lang="es" >
        <head profile="http://purl.org/NET/erdf/profile" prefix="og: http://ogp.me/ns
# fb: http://ogp.me/ns/fb# article: http://ogp.me/ns/article#">
            <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta http-equiv=”X-Frame-Options” content=”Deny” />

                <link rel="alternate" type="application/atom+xml" title="Últimos Posts de Taringa" href="/rss/Taringa/posts/" />
                <link rel="alternate" type="application/atom+xml" title="Últimos Temas de Taringa" href="/rss/Taringa/tem
as/" />

                <title>Posts de Taringa!  - Taringa!</title> 
```

...

```
 </body>
</html> 
```

但是当我指定 HTTP/1.1 时，回复是

```
HTTP/1.1 200 OK
Server: n0
Date: Fri, 01 Feb 2013 20:03:54 GMT
Content-Type: text/html; charset=utf8
Transfer-Encoding: chunked
Connection: keep-alive
Set-Cookie: trngssn=81047255; path=/
Set-Cookie: trngssn=deleted; expires=Thu, 01-Jan-1970 00:00:01 GMT; path=/; domain=.taringa.net
Set-Cookie: taringa_user_id=deleted; expires=Thu, 01-Jan-1970 00:00:01 GMT; path=/; domain=.taringa.net
Set-Cookie: lastNick=deleted; expires=Thu, 01-Jan-1970 00:00:01 GMT; path=/; domain=.taringa.net
Set-Cookie: fbs=deleted; expires=Thu, 01-Jan-1970 00:00:01 GMT; path=/; domain=.taringa.net
Set-Cookie: tws=deleted; expires=Thu, 01-Jan-1970 00:00:01 GMT; path=/; domain=.taringa.net
Set-Cookie: iB-friendfind=deleted; expires=Thu, 01-Jan-1970 00:00:01 GMT; path=/; domain=.taringa.net

d0f
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="es" xml:lang="es" >
        <head profile="http://purl.org/NET/erdf
/profile" prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# article: http://ogp.me/ns/article#">
            <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta http-equiv=”X-Frame-Options” content=”Deny” />

                <link rel="alternate" type="application/atom+xml" title="Últimos Posts de Taringa" href="/rss/Taringa/posts/" />
                <link rel="alternate" type="application/atom+xml" title="Últimos Te
mas de Taringa" href="/rss/Taringa/temas/" />

                <title>Posts de Taringa!  - Taringa!</title> 
```

...

**这就是问题所在**

```
 </body>
</html>

0 
```

并在关闭通信之前等待几秒钟。

我刚刚尝试使用 stackoverflow.com/about，它工作正常。网页后服务器发给我的以下文字除外

```
</html>HTTP/1.0 400 Bad request
Cache-Control: no-cache
Connection: close
Content-Type: text/html

<html><body><h1>400 Bad request</h1>
Your browser sent an invalid request.
</body></html> 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T20:32:20.423

服务器正在使用[分块编码](http://en.wikipedia.org/wiki/Chunked_transfer_encoding)。d0f 是以八位字节表示的“块”的长度，以十六进制表示。0 是下一个块的长度（即没有）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T20:30:57.463

> 服务器：n0
> 日期：2013 年 2 月 1 日星期五 20:03:54 GMT
> 内容类型：text/html；charset=utf8
> **传输编码：分块**
> 连接：保持活动

如果您不支持，请不要说您支持 HTTP 1.1。

> 所有 HTTP/1.1 应用程序必须能够接收和解码“分块”传输编码，并且必须忽略他们不理解的块扩展扩展。-- [HTTP 1.1](http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.6.1)

# android - PhoneGap Google Cloud Messaging Android 问题

> ID：14654439
> 
> 赞同：0
> 
> 时间：2013-02-01T20:28:11.343
> 
> 标签：android, cordova, google-cloud-messaging, threadpoolexecutor

```
02-01 14:16:32.054: E/AndroidRuntime(17134): FATAL EXCEPTION: pool-2-thread-2
02-01 14:16:32.054: E/AndroidRuntime(17134): java.lang.NullPointerException
02-01 14:16:32.054: E/AndroidRuntime(17134):    at org.apache.cordova.NativeToJsMessageQueue.addPluginResult(NativeToJsMessageQueue.java:233)
02-01 14:16:32.054: E/AndroidRuntime(17134):    at org.apache.cordova.CordovaWebView.sendPluginResult(CordovaWebView.java:548)
02-01 14:16:32.054: E/AndroidRuntime(17134):    at org.apache.cordova.api.Plugin.sendPluginResult(Plugin.java:110)
02-01 14:16:32.054: E/AndroidRuntime(17134):    at org.apache.cordova.api.Plugin$1.run(Plugin.java:82)
02-01 14:16:32.054: E/AndroidRuntime(17134):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
02-01 14:16:32.054: E/AndroidRuntime(17134):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
02-01 14:16:32.054: E/AndroidRuntime(17134):    at java.lang.Thread.run(Thread.java:856) 
```

我不断收到这个错误。这发生在应用程序首次打开并将设备注册到 Google Cloud Messaging 之后。一切似乎都正常，但是我暂停了应用程序，然后一旦它恢复，它会出于某种原因调用取消注册功能，然后立即崩溃，但随后继续使用 Google Cloud Messaging 重新注册设备，以便我重新进入应用程序如果它没有强制关闭，它应该处于正确的状态。然后，如果我在此之后暂停并恢复应用程序，它就不再强制关闭。

有没有其他人对此有任何经验或对造成这种情况的任何想法？

[我使用https://github.com/marknutter/GCM-Cordova](https://github.com/marknutter/GCM-Cordova)实现了 GCM PhoneGap 插件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T16:46:19.830

我不确定为什么您的应用程序恢复时您的代码会调用取消注册。

但是当发生这种情况时，我可以修复 NullPointerException：

我调试了 GCM 插件代码，发现 GCMPlugin.java 文件在第 75 行出错。

注销的 if/else 语句没有提供 PluginResult！所以我添加了以下额外的行并且 NullPointerException 消失了：

```
else if (UNREGISTER.equals(action)) {
  GCMRegistrar.unregister(this.ctx.getContext());
  Log.v(ME + ":" + UNREGISTER, "GCMRegistrar.unregister called ");

  result = new PluginResult(Status.OK); //added line

} 
```

# c# - c# powershell 调用多个命令时出现 Exchange 2010 复制问题

> ID：14654442
> 
> 赞同：1
> 
> 时间：2013-02-01T20:28:24.373
> 
> 标签：c#, powershell, exchange-server-2010

我在 HA Exchange 环境中顺序调用多个 powershell 命令时遇到问题（在单个开发主机上一切正常）。只要它只是关于交换命令，我就通过管道传输多个命令（执行在同一个节点上）来使用解决方法，一切都很好。我的代码：

```
string casUri = "cas1.srv.net/Powershell?serializationLevel=Full";
string credentialUserName = "User";
string credentialUserPassword = "secret";
string newOU = "thenewou";
string baseOU = "OU=root,DC=srv,DC=net";         
        System.Security.SecureString passwd = new System.Security.SecureString();
        foreach (char c in credentialUserPassword) {
            passwd.AppendChar(c);
        }
        PSCredential credential = new PSCredential(credentialUserName, passwd);

        WSManConnectionInfo connectionInfo = new WSManConnectionInfo(
                new Uri(casUri),
                "http://schemas.microsoft.com/powershell/Microsoft.Exchange",
                credential);

        connectionInfo.AuthenticationMechanism = AuthenticationMechanism.Default;
        runspacePool = RunspaceFactory.CreateRunspacePool(1, 5, connectionInfo);
        runspacePool.Open();

        powershell = PowerShell.Create();
        Command command;
            command = new PSCommand();
            command.AddCommand("New-ADOrganizationalUnit");
            command.AddParameter("Path", baseOU);
            command.AddParameter("Name", newOu);
            command.AddParameter("DisplayName", "My new OU");
            powershell.Commands = command;
        powershell.Invoke();

        // ... another AD commands: Set-ADForest, New-AcceptedDomain (work fine)
        // v--- trouble
            command = new PSCommand();
            command.AddCommand("New-GlobalAddressList");
            command.AddParameter("Name", "GAL.Name");
            command.AddParameter("RecipientContainer", newOu + "," baseOU);
            powershell.Commands = command;
        powershell.Invoke(); 
```

单主机环境不存在问题。在这样的 HA 上，另一个命令在不同的主机上运行：

```
 [myApp]---[CAS load balancer]---[CAS-1..CAS-N]---[EX-1..EX-N] 
```

这会导致异常：

```
 Active Directory operation failed on DC2.srv.net. This error is not retriable.          
 Additional information: The name reference is invalid.
 This may be caused by replication latency between Active Directory domain controllers.
 Active directory response: 000020B5: AtrErr: DSID-03152804, #1:
            0: 000020B5: DSID-03152804, problem 1005 (CONSTRAINT_ATT_TYPE), data 0, Att 9b7f0292 (msExchSearchBase) 
```

我不知道如何为几个命令强制使用单个远程 shell 的持久连接。你有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-26T08:23:35.053

你试过这个吗？

```
command.AddParameter("DomainController", "Your Domain Contorller FQDN"); 
```

# sql - 同时将列转换为行和行转换为列。(SSMS)

> ID：14654443
> 
> 赞同：0
> 
> 时间：2013-02-01T20:28:25.540
> 
> 标签：sql, sql-server, pivot

我有下表...我们称它为 Table1

```
 TERM           PERIOD  Average     StandardDeviation   Minimum
+ 1 Period      2012Q3  0.00417     0.00722             0
+ 120 Periods   2012Q3  0.02951     0.0014              0.028615
+ 20 Periods    2012Q3  0.009898    0.0037              0.007612
+ 40 Periods    2012Q3  0.018255    0.00262             0.016565
+ 1 Period      2012Q4  0.005       0.007               0
+ 120 Periods   2012Q4  0.026       0.001               0.03
+ 20 Periods    2012Q4  0.007       0.003               0.0042
+ 40 Periods    2012Q4  0.018       0.002               0.0165 
```

有没有办法对此进行编码，所以我可以有一个看起来像这样的表：

```
TERM           PATHS              2012Q3    2012Q4
+ 1 Period     Average            0.00417   0.005
+ 1 Period     StandardDeviation  0.00722   0.007
+ 1 Period     Minimum            0         0 
```

...每个 TERM 以此类推（+ 120 个周期，+ 40 个周期等）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T20:33:47.473

要产生此结果，您需要同时使用[`UNPIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)和[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)函数。`UNPIVOT`获取列，`Average`并将`StandardDeviation`它们`Minimum`转换为多行。获得行后，您可以将 应用于`PIVOT`值`Period`。您的代码将与此类似：

```
select term, paths,[2012Q3], [2012Q4]
from
(
  select term, period, paths, value
  from
  (
    select term, period, Average, StandardDeviation, Minimum
    from table1
  ) s
  unpivot
  (
    value
    for paths in (Average, StandardDeviation, Minimum)
  ) unpiv
) src
pivot
(
  max(value)
  for period in ([2012Q3], [2012Q4])
) piv 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/878e3/4)。

这也可以使用 a来取消透视数据和使用带有要透视的表达式`UNION ALL`的聚合函数来完成：`CASE`

```
select term,
  paths,
  max(case when period = '2012Q3' then value end) [2012Q3],
  max(case when period = '2012Q4' then value end) [2012Q4]
from
(
  select term, period, 'Average' Paths, average value
  from Table1
  union all
  select term, period, 'StandardDeviation' Paths, StandardDeviation
  from Table1
  union all
  select term, period, 'Minimum' Paths, Minimum
  from Table1
) src
group by term,  paths 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/6c634/5)。

`period`如果您有已知数量的值，则上述版本效果很好。如果您不这样做，那么您将需要使用动态 sql 来生成结果：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT DISTINCT ',' + QUOTENAME(PERIOD) 
                    from Table1
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query 
    = 'select term, paths, '+@cols+'
       from
       (
         select term, period, paths, value
         from
         (
           select term, period, Average, StandardDeviation, Minimum
           from table1
         ) s
         unpivot
         (
           value
           for paths in (Average, StandardDeviation, Minimum)
         ) unpiv
       ) p
       pivot
       (
          max(value)
          for period in('+@cols+')
       ) piv'

execute(@query) 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/6c634/7)。

所有版本都产生相同的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T20:37:38.667

我将其视为聚合和连接。. .

```
select term, paths,
       MIN(case when period = '2012Q3'
                then (case when which = 'Average' then t.average
                           when which = 'StandardDeviation' then t.StandardDeviation
                           when which = 'Minimum' then t.Minimum
                      end)
            end) as "2012Q3",
       MIN(case when period = '2012Q4' 
                then (case when which = 'Average' then t.average
                           when which = 'StandardDeviation' then t.StandardDeviation
                           when which = 'Minimum' then t.Minimum
                      end)
            end) as "2012Q4"
from Table1 t cross join
     (select 'Average' as paths union all
      select 'StandardDeviation' union all
      select 'Minimum'
     ) const
group by term, paths 
```

# asp.net - 如何将自定义属性设置为 asp.net 文字并在后面的代码中读取它？

> ID：14654444
> 
> 赞同：3
> 
> 时间：2013-02-01T20:28:32.600
> 
> 标签：asp.net

如何将自定义属性设置为 asp.net 文字并在后面的代码中读取它？没有属性集合。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T20:30:38.867

A`Literal`不是 HTML 元素，它实际上是一个文字（抱歉）。它的内容成为响应中的逐字输出，因此没有要提取的属性。

ASP.NET 控件上的属性是控件类的属性，因此您可以尝试继承`Literal`并定义您自己的属性。

仅仅因为有些可能映射到 HTML 属性纯粹是偶然的，因为它们通常只在呈现页面时与服务器相关，所以控件决定了实际发生的输出以及属性如何映射到属性。

如果你想要一个通用的 HTML 元素，你可以尝试`HtmlGenericControl`它应该提供基本的 HTML 属性供你使用。

# c# - 什么是 C# 中用于发出唯一计数器值的简单、线程安全的分配模式？

> ID：14654445
> 
> 赞同：1
> 
> 时间：2013-02-01T20:28:36.127
> 
> 标签：c#, thread-safety

我不是 C# 中的多线程专家；我想确保*防止*在测试中很难触发的竞争条件，同时也几乎不可能调试。要求（我的应用程序是在可能的多线程 HTTP 服务器中使用的实用程序类，不使用 IIS 或 ASP.NET）是类的每个实例都具有该实例的唯一标识符。

我宁愿*不*使用重量级 GUID 来避免这个问题，因为它们的序列化长度，就像在 HTML 表示中一样。

我的问题是：在下面`Unique`的类中设置值的简单模式是否`Widget`适合此要求？有没有更好、更安全的模式，希望不会让实施变得繁琐？

```
public abstract class Widget : Node
{
    private static int UniqueCount = 0;
    private static object _lock = new object();
    protected int Unique { private set; get; }

    protected Widget() : base()
    {
        // There could be a subtle race condition if this is not thread-safe
        // if it is used with a multi-threaded web server
        lock (_lock)
        {
            UniqueCount += 1;
            Unique = UniqueCount;
        }
    }  

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T20:31:04.933

从[这个答案](https://stackoverflow.com/a/9011987/598637)：

如果您希望以`DoneCounter = DoneCounter + 1`保证不受竞争条件约束的方式实现该属性，则无法在该属性的实现中完成。该操作不是原子的，它实际上是三个不同的步骤：

1.  检索 的值`DoneCounter`。
2.  添加 1
3.  将结果存储在`DoneCounter`.

您必须防止在任何这些步骤之间发生上下文切换的可能性。锁定在 getter 或 setter 内无济于事，因为锁定范围完全存在于其中一个步骤（1 或 2）中。如果您想确保所有三个步骤同时发生而不会被中断，那么您的同步必须涵盖所有三个步骤。这意味着它必须发生在包含所有这三个的上下文中。这可能最终会成为不属于包含该`DoneCounter`属性的任何类的代码。

使用您的对象的人有责任注意线程安全。一般来说，任何具有读/写字段或属性的类都不能以这种方式成为“线程安全的”。但是，如果您可以更改类的接口以便不需要设置器，则可以使其更加线程安全。例如，如果您知道 DoneCounter 只会递增和递减，那么您可以像这样重新实现它：

```
private int _doneCounter;
public int DoneCounter { get { return _doneCounter; } }
public void IncrementDoneCounter() { Interlocked.Increment(ref _doneCounter); }
public void DecrementDoneCounter() { Interlocked.Decrement(ref _doneCounter); } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T20:37:52.877

如前所述，`+=`（和相关的）操作不是线程安全的。当进行简单的数字增量时，只需使用[`Interlocked.Increment`](http://msdn.microsoft.com/en-us/library/dd78zt0c.aspx); 它将返回旧值并且是完全线程安全的：

```
public abstract class Widget : Node
{
    private static int UniqueCount = 0;
    protected int Unique { private set; get; }

    protected Widget() : base()
    {
        Unique = Interlocked.Increment(ref UniqueCount);
    }  
} 
```

# ruby-on-rails - 如何翻译 Rails 引擎的模型和属性名称？

> ID：14654447
> 
> 赞同：4
> 
> 时间：2013-02-01T20:28:45.513
> 
> 标签：ruby-on-rails, model, attributes, internationalization, rails-engines

翻译 Rails 项目的模型和属性名称的常用方法是：

```
MyModel.model_name.human

MyModel.human_attribute_name :myattribute 
```

或者，当您使用 MyModel 表单时：

```
form.label :myattribute 
```

语言环境文件`config/locales/en.yml`如下所示：

```
en:
  activerecord:
    models:
      mymodel:
        one: TranslatedMyModel
        other: TranslatedMyModels
  attributes:
    mymodel:
      myattribute: translated attribute 
```

这适用于常规 Rails 项目。当相同的模型成为名为 的引擎的一部分时，相同的模型将`MyEngine`被放入`config/locales/en.yml`引擎并以 my_engine 为前缀：

```
en:
  my_engine:
      activerecord:
        models:
          mymodel:
            one: TranslatedMyModel
            other: TranslatedMyModels
      attributes:
        mymodel:
          myattribute: translated attribute 
```

my_engine 前缀适用于各种翻译，**除非**尝试通过上述方法获取模型或属性名称。

我已经建立了一个新的 Rails 项目和带有 Rails 3.2.11 的引擎来测试它，但没有成功。

有谁知道如何使这项工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-02T17:00:47.390

我在 github 上的 Rails 问题部分获得了帮助。这是答案：

```
en:
  activerecord:
    models:
      'my_engine/mymodel':
        one: TranslatedMyModel
        other: TranslatedMyModels
    attributes:
      'my_engine/mymodel':
        myattribute: translated attribute 
```

# backbone.js - Marionette.js：区域应该替换而不是插入吗？

> ID：14654450
> 
> 赞同：2
> 
> 时间：2013-02-01T20:28:52.193
> 
> 标签：backbone.js, marionette

marionette.js 的默认行为是将模板附加到由区域选择器指定的元素中。但是，我通常最终不得不创建一个特殊的区域类型并重写 appendHtml 函数来进行替换。

这并不太难，但为什么要附加默认值？

我通常会创建一个带有空 div 的布局模板来指定该区域的位置。然后，当我显示它时，我用子模板替换那个 div。

我想我想知道我是否缺少使附加更直观的模板设计模式。

谢谢您的帮助。

更新：

所以我通常会对我想要呈现到页面中的东西有一些看法，并且想要将 n 元素添加到我想要它的页面上。我会做看起来像这样的javascript：

```
ReplaceRegion = Marionette.Region.extend({
    open: function(view){
        this.$el.replaceWith(view.el);
    }
});

App = new Backbone.Marionette.Application();
App.addRegions({
  myRegion: {
    selector: "#someRegion",
    regionType: ReplaceRegion
  }
};

var view = new CoolWidgetView(); 

App.myRegion.show(view); 
```

然后在我的 html 中的某个地方，我会在我希望我的模板显示的地方添加一个空的 div。

```
<div id="mywidget"></div> 
```

现在，如果它是唯一的子元素，我可以使用一个仅作为父元素的选择器，但是当我插入的视图有兄弟元素时，这会变得更加棘手。

此外，我并不是真的要求更改默认设置，就像我想知道是否有更好的方法可以在布局中插入您想要的项目。我对这些东西的布局和设计还比较陌生，所以任何东西都有帮助！

感谢 Derick 编写了出色的软件！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-29T03:57:39.463

Marionette 区域同时提供了 a`show`和 a`close`方法。您是否尝试在显示新区域之前关闭该区域？

[Marionette.Region 文档](https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.region.md#basic-use)

# c# - 根据用户输入比较c#中的数组

> ID：14654455
> 
> 赞同：0
> 
> 时间：2013-02-01T20:29:06.290
> 
> 标签：c#

试图比较 2 个数组但没有让它工作

```
 Console.WriteLine("Entering elements for ths 1st array: ");
        int[] arr1 = new int[3];
        for (int i = 0; i < arr1.Length; i++)
        {
            arr1[i] = Convert.ToInt32(Console.ReadLine());
        }
        Console.WriteLine("Entering the elements for the 2nd array: ");
        int[] arr2 = new int[3];
        for (int i = 0; i < arr2.Length; i++)
        {
            arr2[i] = Convert.ToInt32(Console.ReadLine());
        }
        bool result = Array.Equals(arr1,arr2);
        if (result)
        {
            Console.WriteLine("Equal");
        }
        else
        {
            Console.WriteLine("Not equal");
        }
    } 
```

我不断得到一个不等于

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T20:35:41.637

这不起作用，因为 Array.Equals() 运行`Object.Equals`方法 - 它只比较引用。`Enumerable.SequenceEqual()`例如，改为使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T20:33:14.897

我认为您正在比较两个 obect 容器是否相等 - 请参阅这篇文章...[比较两个数组是否相等的最快方法是什么？](https://stackoverflow.com/questions/4153120/whats-the-fastest-way-to-compare-two-arrays-for-equality)您需要比较内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T20:32:20.607

您不是在比较存储在数组中的值，而是在比较整数数组的两个不同实例。（参考文献）。
当然它们是不同的。

如果您只想检查两个数组是否包含相同的值，您可以使用 SequenceEquals LinQ 运算符，如果您希望获得两个数组之间的差异，请使用 except

```
if(arr1.SequenceEquals(arr2))
     Console.WriteLine("Equals");
else
     Console.WriteLine("Not equal");

....

int[] diff =  arr1.Except(arr2).ToArray();
if(diff.Length == 0) 
     Console.WriteLine("Equals");
else
     Console.WriteLine("Not equal"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T20:32:44.060

那永远行不通。这是数组的两个不同实例。Equals 继承自 Object。

# php - PHP如何删除最后一个分隔符？

> ID：14654458
> 
> 赞同：0
> 
> 时间：2013-02-01T20:29:18.760
> 
> 标签：php, separator

我尝试了很多变化，但我找不到解决方案。以前的输出是这样的：

1.  一个字
2.  b字
3.  c字等

我已经更改了部分代码，现在输出是：

一个字| 词 b | c字|

如何删除最后一个分隔符？

代码是：

```
<div id="right">

        <div id="synonyms">
        <?

        $separator = '<span class="pipe">|</span>';

        $sql = mysql_query("SELECT DISTINCT word, id_word FROM words WHERE word LIKE '$word' ORDER BY word ASC LIMIT 100");
        echo mysql_error();

        while ($row=mysql_fetch_row($sql))
            {
                $word_synonym = $row[0];        
                $id_word_synonym = $row[1];                 

                        $sql2 = mysql_query("SELECT DISTINCT synonym, id_synonym FROM synonyms WHERE id_word = '$id_word_synonym' ORDER BY synonym ASC");
                        echo mysql_error();
                        $num_results =mysql_num_rows($sql2);

                        while ($row=mysql_fetch_row($sql2))
                            {
                            $synonym = $row[0];
                            $id_synonym = $row[1];

                            $synonym2 = str_replace(" ", "+", $synonym);

                            echo "".$separator."<a href=".$site_url."/?word=".$synonym2.">".$synonym."</a>  ";

                            }

            }
        ?>
        </div> 
```

我尝试添加`$separator = substr($separator, -1, 0);`和许多其他建议，但没有结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T20:32:25.837

在做这样的事情时，我的偏好是构建一个字符串数组，然后[`implode`](http://php.net/implode)在输出最终字符串时使用。这特别有用，因为这样我就可以做其他事情，比如合并组、过滤它们等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T20:53:12.667

这是之前发布并删除的，但我认为值得将其作为可选方法包括在内。虽然我更喜欢 Kolink 的方法，但我也使用过这个方法：

使用迭代器 ($i) 来标识第一个（或最后一个）项目。

```
$i=0;
while ($row = mysql_fetch_row($sql2)) {
  $i++;
  $synonym = $row[0];
  $id_synonym = $row[1];
  $synonym2 = str_replace(" ", "+", $synonym);
  echo ($i>1?$separator:"").'<a href="$site_url/?word=$synonym2">$synonym</a>';
} 
```

不是这个答案的一部分，但这是 Kolink（可以说是更好的）方法的一个例子：

```
$links=array();

while ($row = mysql_fetch_row($sql2)) {
  $synonym = $row[0];
  $id_synonym = $row[1];
  $synonym2 = str_replace(" ", "+", $synonym);
  $links[]='<a href="$site_url/?word=$synonym2">$synonym</a>';
}

if (!empty($links)) {
  echo implode($separator,$links);
} 
```

# ruby-on-rails - 如何将日志级别符号转换为常量？

> ID：14654459
> 
> 赞同：2
> 
> 时间：2013-02-01T20:29:23.037
> 
> 标签：ruby-on-rails, logging

我正在创建一个新的记录器，并希望将日志级别配置为等于 Rails 配置值。

```
@logger = Logger.new(STDOUT)
@logger.level = Rails.configuration.log_level 
```

我收到一个错误，因为 level 需要整数并且 log_level 是一个符号 (:info)。如何将 :info 转换为 Logger 可以理解的内容 (Logger::INFO)？

我尝试使用：

```
@logger.level = "Logger::#{Rails.configuration.log_level.to_s.upcase}".constantize 
```

但是 constantize 不能识别符号：

```
NameError: uninitialized constant Logger::INFO 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T20:36:13.150

刚找到：

```
Logger.const_get(Rails.configuration.log_level.to_s.upcase) 
```

# cordova - 通过 Phonegap FileTransfer.upload 方法将捕获的图像上传到 Domino 服务器

> ID：14654462
> 
> 赞同：0
> 
> 时间：2013-02-01T20:29:32.227
> 
> 标签：cordova, xpages, xpages-ssjs

我正在使用Phonegap 1\. 拍摄照片，2\. 显示照片，3\. 上传照片。#1 和 #2 正在工作。

对于#3，我正在尝试使用 FileTransfer.upload 方法将捕获的照片发布到 Domino 文档（作为富文本中的附件？）。Phonegap API 文档解释了使用 PHP 执行此操作的方法（向 upload.php 页面发送请求），但我正在尝试使用 XPages/SSJS/Java 解决方案来完成此操作。想知道有没有人做过类似的事情？Phonegap 示例发布在下面。感谢您的任何建议。

```
var options = new FileUploadOptions();
options.fileKey="file";
options.fileName=fileURI.substr(fileURI.lastIndexOf('/')+1);
options.mimeType="text/plain";

var params = new Object();
params.value1 = "test";
params.value2 = "param";

options.params = params;

var ft = new FileTransfer();
ft.upload(fileURI, "http://some.server.com/upload.php", win, fail, options); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T22:12:40.860

在您接收的 XPage 中，您应该将发布的数据作为输入流获取，如下所示：

```
facesContext.getExternalContext().getRequest().getInputStream() 
```

然后您可以将其保存到这样的文档中：

[附件的临时文件夹](https://stackoverflow.com/questions/14233667/temporary-folder-for-attachments)

# facebook - 使用 Graph API 中的“好友”隐私获取 fb 好友的点赞

> ID：14654466
> 
> 赞同：0
> 
> 时间：2013-02-01T20:29:55.513
> 
> 标签：facebook, facebook-graph-api

早些时候，为了让我的 Facebook 朋友“点赞”，我使用了这样的请求来绘制 API：

```
https://graph.facebook.com/<friend_id>?fields=likes.fields(created_time,id,name,category)&access_token=?

https://graph.facebook.com/<friend_id>/likes?fields=created_time,id,name,category&access_token=? 
```

现在大约两个星期，如果我的朋友“喜欢”不是“公开”（例如“朋友”、“只有我”等），我将无法做到这一点。并且这些请求仅返回具有“公共”隐私的“喜欢”。

你能给出任何建议如何解决这个问题吗？也许我应该为我的应用程序设置一些特殊选项？

# java - 执行 java if/else 语句的逻辑错误

> ID：14654468
> 
> 赞同：0
> 
> 时间：2013-02-01T20:30:08.097
> 
> 标签：java

当代码执行它时：

A. 不允许您输入员工 ID 的字符串，B. 完全绕过 If/Else 语句。

代码是：

```
 double salary = 0.0;
String employeeID;

System.out.println("\nWhich Employee would you like to see Gross Earning's of? (A, B, C, or ALL)?");
employeeID = input.nextLine();

//if else commnnad to chose which employee details required

if (employeeID == "A")
    {
    if (employeeA.getHours() > 40)
        {
        salary = (employeeA.getRate()*40) + employeeA.getOverTimeRate() * (employeeA.getHours() - 40);
        }
    else
        {
        salary = employeeA.getRate()*40;
        }
    }
    System.out.printf("You have chosen Employee: %s\nHours Worked: %.2f\nNormal Rate: %.2f\nOver Time Rate: %.2f\nGross Salary: %.2f\n", employeeID, employeeA.getHours(), employeeA.getRate(), employeeA.getOverTimeRate(), salary); 
```

执行时看起来像这样：

您希望查看哪位员工的总收入？（A、B、C 或全部）？您选择了员工： 工作时间： 1.00 正常率： 1.00 加班率： 1.00 总工资： 0.00

我认为我对 IF/Else 语句做错了，因为它似乎根本没有执行此代码。

谢谢夏兰

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T20:31:18.490

代替

```
if (employeeID == "A") 
```

经过

```
if ("A".equals(employeeID)) 
```

要比较字符串，请始终使用`equals(.)`. `==`比较参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T00:34:03.367

知道了。emoloyeeID = input.nextLine(); 正在分配 nextDouble 方法留下的返回字符。

放一个'input.nextLine(); " 在 nextDoubke 方法似乎解决了它之后。

Ta 用于反馈

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T20:31:38.150

您应该替换`=`为`equals`. 您不能通过`=`符号比较字符串

# ruby-on-rails - 从 Rails 3.1 升级到 3.2 错误

> ID：14654476
> 
> 赞同：0
> 
> 时间：2013-02-01T20:30:33.873
> 
> 标签：ruby-on-rails

我正在将 Rails 应用程序从 3.1 升级到 3.2 它使用 gem 'twitter-bootstrap-rails' 和 gem 'less'。

我在尝试启动瘦服务器时遇到错误。

现在我收到了这个错误。即使我的应用程序中有该文件，它也会显示“没有这样的文件”：

```
LoadError in Home#index

Showing    /Users/burtondav/sites/requestsys/app/views/layouts/application.html.erb where line #20 raised:

no such file to load -- less
  (in   /Users/burtondav/sites/requestsys/app/assets/stylesheets/bootstrap_and_overrides.css.less)
Extracted source (around line #20):

17:       }
18:   </style>
19: 
20:   <%= stylesheet_link_tag "application", :media => "all" %>
21: 
22:   <!-- Le fav and touch icons -->
23:   <link href="/favicon.ico" rel="shortcut icon"> 
```

少宝石有什么问题吗？

谢谢！！

更新

我重新安装了 gem 'twitter-bootstrap-rails'。现在我收到此错误：

```
Cannot call method 'charAt' of undefined
(in     /Users/burtondav/sites/requestsys/app/assets/stylesheets/bootstrap_and_overrides.css.less) 
```

我找到了关于 less.js 的答案->

[https://github.com/cloudhead/less.js/issues/906](https://github.com/cloudhead/less.js/issues/906)

但是，我正在使用 gem 'less-rails'

这可能是一个在 less.js 而不是 less-rails gem 中修复的已知问题吗？

更新 2

我找到了这个

“在 sprite.less 中，我更改了背景图像：url("@{iconSpritePath}"); 和背景图像：url("@{iconWhiteSpritePath}");

添加 " " 和 { } 消除了错误.."

但是，那不是铁轨。

我的路径是：

```
// Set the correct sprite paths
@iconSpritePath: asset-path("twitter/bootstrap/glyphicons-halflings.png");
@iconWhiteSpritePath: asset-path("twitter/bootstrap/glyphicons-halflings-white.png"); 
```

更新 3

我找到了另一个答案 - 升级到 Ruby 1.9.3 。我正在使用红宝石 1.9.2p290

但是，我很紧张这样做。我应该紧张吗？我的应用还能在 Heroku 上运行吗？

我要提出一个新问题 - 这个问题的标题现在不正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T20:44:23.570

我隐约记得遇到过这样的问题。也许尝试 less-rails 而不是 less。我有以下内容：

```
gem 'twitter-bootstrap-rails'
gem 'less-rails' 
```

还要确保你有（或其他一些 javascript 解释器）。

```
 gem 'therubyracer', '0.10.2', :platforms => :ruby 
```

在您的 Gemfile 中取消注释。看起来你几乎无法编译你的资产

# time - DB2 中的时间格式

> ID：14654481
> 
> 赞同：0
> 
> 时间：2013-02-01T20:30:42.737
> 
> 标签：time, db2

```
SELECT CHAR(TIME(timestamp), USA)
FROM Orders
WITH UR 
```

此查询将输出为 10:30 PM

是否可以将其显示为晚上 10 点（只有上午/下午的时间）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-28T06:54:13.893

假设这不是一个重复的问题（在我看来是这样），请尝试使用：

```
SUBSTR(CHAR(TIME(timestamp), USA),1,2) CONCAT SUBSTR(CHAR(TIME(timestamp), USA),6) 
```

如果您正在运行的 DB2 版本还没有完全支持`TIMESTAMP_FORMAT()`or `VARCHAR_FORMAT()`，那么您可以创建一个执行上述操作的函数。当本机功能可用时，以后可以替换该功能。

# ruby-on-rails - 如何手动使用 exception_notifier gem 发送电子邮件？

> ID：14654485
> 
> 赞同：0
> 
> 时间：2013-02-01T20:31:02.607
> 
> 标签：ruby-on-rails, exception-notification

我正在尝试以下代码：

```
ExceptionNotifier::Notifier.exception_notification(env, exception).deliver 
```

但此消息不断出现：

```
A sender (Return-Path, Sender or From) required to send a message 
```

知道为什么会发生这种情况以及如何解决它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T20:42:08.473

您可能没有在初始化程序中配置 gem。在通知我异常的控制器操作中，我有以下内容

```
ExceptionNotifier::Notifier.exception_notification(
  request.env, 
  env["action_dispatch.exception"]
).deliver 
```

我有以下内容`config/initializers/exception_notifier.rb`

```
if Rails.env.production?
  MyApp::Application.config.middleware.use ExceptionNotifier,
    email_prefix:         "[#{App.domain.pretty}] ",
    sender_address:       App.email.noreply,
    exception_recipients: App.email.exceptions,
    ignore_exceptions:    ExceptionNotifier.default_ignore_exceptions,
    normalize_subject:    true
end 
```

`MyApp`，并且`App.____`应该全部替换为您自己的值。

# iphone - 如何检测 GPS 坐标是否落在 MKMapView 上的某个区域？

> ID：14654491
> 
> 赞同：1
> 
> 时间：2013-02-01T20:31:25.203
> 
> 标签：iphone, ios, objective-c, mkmapview, mapkit

在我的应用程序中，我有一个圆周长的坐标数组（CLLocationCoordinate2D）。现在我从某个地方得到一个坐标，我需要检查新坐标是否落在圆圈内。如果确实如此，我只想在该坐标上显示一个图钉，基本上它应该落在该区域之下。我应该如何检查这个？

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T20:36:10.947

您没有说您的坐标数组是否只是纬度和经度、`CLLocationCoordinate2D`结构或`CLLocation`对象，但是如果您创建了一个`CLLocation`对象（如果您还没有对象），那么您可以调用[`distanceFromLocation`](https://developer.apple.com/library/ios/documentation/CoreLocation/Reference/CLLocation_Class/CLLocation/CLLocation.html#//apple_ref/doc/uid/TP40007126-CH3-SW18)以查看它离它有多远另一个位置。我假设，除了周长的坐标数组之外，您还有中心的坐标？

如果你有`CLLocationCoordinate2D`，你可以这样做：

```
CLLocation *location = [[CLLocation alloc] initWithLatitude:coordinate.latitude
                                                  longitude:coordinate.longitude];

CLLocation *centerLocation = [[CLLocation alloc] initWithLatitude:centerCoordinate.latitude
                                                        longitude:centerCoordinate.longitude];

CLLocationDistance distance = [location distanceFromLocation:centerLocation]; 
```

离线与您聊天，听起来地图上的坐标数组是用户手势的结果（这解释了为什么您没有坐标圆的中心）。

`CGPoint`鉴于这种情况，我建议使用 Quartz 方法测试视图中的 a 是否包含在 closed 中，而不是使用映射方法来尝试确定区域是否包含坐标，`UIBezierPath`我们将从用户的手势构造。

因此：

*   `UIBezierPath`当用户在屏幕上拖动手指时构建一个；

*   完成后，将生成的路径与相关坐标进行比较。例如，地图视图正在显示用户位置，您可以查看地图的`userLocation`属性，`CLLocationCoordinate2D`使用地图视图的`convertCoordinate:toPointToView`方法将其坐标从 a 转换为视图中的视图坐标）。

*   有了`CGPoint`用户当前位置的地图视图内，我们现在可以使用`UIBezierPath`实例方法`containsPoint`来测试该点是否在贝塞尔路径内。

因此，这可能看起来像：

```
- (void)turnOnGestureForView:(MKMapView *)mapView
{
    mapView.scrollEnabled = NO;

    UIPanGestureRecognizer *gesture = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(handleGesture:)];
    [mapView addGestureRecognizer:gesture];
}

- (void)turnOffGesture:(UIGestureRecognizer *)gesture map:(MKMapView *)mapView
{
    [mapView removeGestureRecognizer:gesture];
    mapView.scrollEnabled = YES;
}

- (void)handleGesture:(UIPanGestureRecognizer *)gesture
{
    static UIBezierPath *path;
    static CAShapeLayer *shapeLayer;

    CGPoint location = [gesture locationInView:gesture.view];

    if (gesture.state == UIGestureRecognizerStateBegan)
    {
        if (!shapeLayer)
        {
            shapeLayer = [[CAShapeLayer alloc] init];
            shapeLayer.fillColor = [[UIColor clearColor] CGColor];
            shapeLayer.strokeColor = [[UIColor redColor] CGColor];
            shapeLayer.lineWidth = 3.0;
            [self.mapView.layer addSublayer:shapeLayer];
        }
        path = [UIBezierPath bezierPath];
        [path moveToPoint:location];
    }
    else if (gesture.state == UIGestureRecognizerStateChanged)
    {
        [path addLineToPoint:location];
        shapeLayer.path = [path CGPath];
    }
    else if (gesture.state == UIGestureRecognizerStateEnded)
    {
        MKMapView *mapView = (MKMapView *)gesture.view;

        [path addLineToPoint:location];
        [path closePath];
        CGPoint currentLocation = [mapView convertCoordinate:mapView.userLocation.coordinate
                                                    toPointToView:gesture.view];
        if ([path containsPoint:currentLocation])
            NSLog(@"%s path contains %@", __FUNCTION__, NSStringFromCGPoint(currentLocation));
        else
            NSLog(@"%s path does not contain %@", __FUNCTION__, NSStringFromCGPoint(currentLocation));

        [shapeLayer removeFromSuperlayer];
        shapeLayer = nil;

        // if you want to turn off the gesture and turn scrolling back on, you can do that now

        [self turnOffGesture:gesture map:mapView];
    }
} 
```

# matlab - Matlab，配置TF的输出（Transfer Functions）

> ID：14654492
> 
> 赞同：0
> 
> 时间：2013-02-01T20:31:33.640
> 
> 标签：matlab, output, transfer-function

在 matlab 中使用该`tf`函数时，我没有得到我需要的输出。

例如：

```
tf( 1 , [1 1 1]) 
```

产生：

```
ans =

       1
 -----------
  s^2 + s + 1 
```

连续时间传递函数。

我想要的是这样的：

```
 ans = 
    1/(s^2 + s + 1). 
```

我不想要漂亮的格式。我想直接访问传输功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T21:03:35.860

修改`printsys.m`控制工具箱中的文件。删除`disp([' ','-'*ones(1,len)])`行以删除行并使用单个`disp`命令打印提名者和支配者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T20:37:23.077

```
f = tf( 1 , [1 1 1]) 
```

将在 f 中返回一个 TF 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T22:20:54.137

I ran into the same problem and could not find a satisfactory solution, so I wrote my own.

It's very simple feel free to use it anyway you wish.

The following function should be placed in tf2string.m

```
% name: tf2string.m
% author: vittorio alfieri

% example:
% W1_out=tf2string(W1)
% 
% W1_out =
% (s + 37.0)/(1.646*s)

function output_string = tf2string(input_tf)

syms s

sym_num=poly2sym(input_tf.num{:},s);
sym_num=vpa(sym_num, 4);
char_num=char(sym_num);

sym_den=poly2sym(input_tf.den{:},s);
sym_den=vpa(sym_den, 4);
char_den=char(sym_den);

output_string = ['(', char_num, ')/(', char_den, ')'];
s=tf('s'); 
```

-Vittorio

# html - 最小高度为 90%？

> ID：14654496
> 
> 赞同：1
> 
> 时间：2013-02-01T20:31:46.283
> 
> 标签：html, css

我有一个内容 div。我希望它至少占屏幕的 90%。

我目前有：

```
 min-height: 400px;
    height: auto !important;
    height: 400px; 
```

在我的#content div 的css 中。

更改为 90% 无效。

有没有办法做到这一点？

从本质上讲，它总是会在屏幕上运行 90%，除非有什么东西使它大于 90%。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T20:33:40.953

你`height:auto !important`正在杀死它。去掉它。另外，我建议使用这种方法：

```
height:90%;
min-height:400px; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T20:38:54.747

你需要设置 html 和 body 来填充 100% 的高度，看看这个小提琴：http: [//jsfiddle.net/promatik/KhCb6/](http://jsfiddle.net/promatik/KhCb6/)

```
html, body {
    height: 100%;
}

#myDiv {
    min-height: 10px;
    height: 90%;
    background-color: #CCC;
    margin: 1px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T20:42:41.730

取决于您将如何拥有内容，您可以通过让溢出的内容具有相同的背景来伪造它。例如：

```
#mainDiv {
min-height: 10px;
height: 90%;
background-color: #ddd;
}

#mainDiv p {
background-color: #ddd;
} 
```

这样，您溢出的内容将“看起来像是在扩展” div。不理想，但这可以获得您想要实现的目标。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-06T05:44:05.827

您需要设置 Div 的 min-height 即 min-height:90%;

```
#mainDiv {
min-height: 90%;
background-color: #ddd;
} 
```

# xml - 使用 .NET，VS 2010 创建 RESTful Web 服务的最简单方法

> ID：14654504
> 
> 赞同：0
> 
> 时间：2013-02-01T20:32:21.950
> 
> 标签：xml, visual-studio-2010, web-services, rest, hl7

这个问题比标题所暗示的要具体一些。我尝试了几种方法，希望将请求 XML 反序列化为一个对象，但没有任何问题。请继续阅读，请为我提出一些想法供我研究。

问题：

我收到一个 HL7 格式的 POST 卡住了。这大约是一个 55k 的帖子，其中包含大约 200 字节的有用信息。我只需要提取那几个字节。通常，这将只有大约 30 个字节，具体取决于发送给我的跟踪号码的数量。不，我对改变这一点没有任何发言权。

这个 HL7 数据是标准的 XML 格式，除了很多 Attributes 用来承载数据，而不是 Elements。同样，我似乎被发件人以这种方式卡住了。（我的偏好和 Web 服务经验是标准的 MS Soap/WSDL 设置。）

我已经使用 XSD.exe 创建了一个包含反序列化数据的类（来自将发送给我的一些示例 XML。），但是，XSD 似乎将所有属性转换为元素。当我查看生成的 WCF 服务页面时，我看不到与我收到的内容相似的 xml。这种差异似乎阻止了 HL7 请求的反序列化？请参阅以下缩写示例：
缩写入站请求示例（因为处理 55k 样本让我很头疼），只是前几行：

```
<?xml version="1.0" encoding="utf-8"?>
<QUQI_IN300102XXX xmlns="urn:hl7-org:v3" ITSVersion="XML_1.0">
  <realmCode code="XXX" />
  <id extension="XX011111" />
  <creationTime value="20121220133424-0500" />
  <responseModeCode code="IMMEDIATE" />
  <versionCode code="V3-2010-12" />
  <interactionId extension="QUQI_IN300102XXX" />
  <processingCode code="P" />
  <processingModeCode code="T" />
  <acceptAckCode code="NE" />
  <receiver typeCode="RCV">
    <realmCode code="XXX" />
    <device>
      <realmCode code="XXX" />
      <id extension="XXXIB" assigningAuthorityName="Service" />
    </device>
  </receiver>
  <sender typeCode="SND">
    <realmCode code="XXX" />
    <device>
      <realmCode code="XXX" />
      <id assigningAuthorityName="CCC" />
    </device>
  </sender>
  <controlActEvent>
    <realmCode code="XXX" />
    <id extension="Tracking" assigningAuthorityName="TRANSTYPE" />
    <code code="Order" />
    <statusCode />
    <queryByParameter>
      <realmCode code="XXX" />
      <queryId extension="NJ011111A-20121220133343" />
      <parameterList>
        <realmCode code="XXX" />
        <accessionNum>
          <value extension="NJ011111A" />
        </accessionNum>
        <batchNumber>
          <value extension="120927001" assigningAuthorityName="ZZ1" />
          <value extension="120927002" assigningAuthorityName="ZZ1" />
        </batchNumber> 
```

“batchNumber”是我需要从入站请求中获取的主要数据。
如果我查看“WCF 项目”服务帮助页面（如果我没记错的话，是使用 WCF REST 项目类型 nuget 包创建的），我得到：

```
<QUQI_IN300102QD>
  <realmCode>
<realmCode>
  <code>String content</code>
</realmCode>
<realmCode>
  <code>String content</code>
</realmCode>
  </realmCode>
  <id>
<id>
  <extension>String content</extension>
  <assigningAuthorityName>String content</assigningAuthorityName>
</id>
<id>
  <extension>String content</extension>
  <assigningAuthorityName>String content</assigningAuthorityName>
</id>
  </id>
  <creationTime>
    <QUQI_IN300102QDCreationTime>
  <value>String content</value>
   </QUQI_IN300102QDCreationTime>
  <QUQI_IN300102QDCreationTime>
    <value>String content</value>
   </QUQI_IN300102QDCreationTime>
  </creationTime> 
```

现在，我输入 XSD.exe 的 XML 看起来不像服务页面发出的那样，并且无论出于何种原因，当我传入 post 请求时，它不会反序列化。

我希望这些信息足以描述我的问题。

对于解决方案，我的最佳选择是什么？
创建一个 MVC 项目并接受一个 XMLDoc 作为 post 数据类型，并进行 XML 操作以获得我需要的东西？还是其他选择？
仅供参考，返回数据必须在某个时候插入到 XML 中，但我还没有做到这一点。

仅供参考，我创建 Web 服务的经验仅限于 VS。你知道，文件、新项目、Web 服务。然后将代理添加到消费项目中的 WSDL 页面并使用该事物。当然，第三个项目只包含供其他两个项目引用的类对象，以及一些数据访问项目。

使用 Fiddler 编写我的请求，并且我打开了 WCF 跟踪。
我从跟踪中得到的是：

无法使用 XmlSerializer 反序列化具有根名称“Binary”和根命名空间“”的 XML 正文（用于操作“methodTrackQLSBatch”和合同（“ShipmentTracking”，“ [http://tempuri.org/](http://tempuri.org/) ”））。确保将 XML 对应的类型添加到服务的已知类型集合中。

它确实知道类型。如果我改变一切以使用一段非常简单的 XML，它会完美地反序列化。

提前感谢您的任何想法。

我想简单地说，我怎样才能接受这个大的 HL7 请求，从中提取数据，将结果插入其中，然后返回呢？（我大概能算出“退货”的部分，呵呵。虽然你永远不知道。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T20:49:50.163

听起来在这种情况下反序列化 XML 不会有太大的收获。如果您只对少量数据感兴趣，最后只想修改 XML 并将其返回，则只需使用[Linq to XML 读取和操作 XML](http://msdn.microsoft.com/en-us/library/bb387098.aspx)。（例如`XDocument`,`XElement`等）

# c# - 在 Web 应用程序中创建人体模型

> ID：14654509
> 
> 赞同：-4
> 
> 时间：2013-02-01T20:32:45.187
> 
> 标签：c#, asp.net, .net, expression-blend, silverlight-5.0

我期待创建一个允许用户生成 3D 人体模型的 Web 应用程序。当用户给出特定的测量值时，应生成相应的模型。

我打算在 .net 平台上执行此操作。我有几个问题。

1.  有哪些可能的工具和语言
2.  .net (visual studio 2012) 是否有任何库可以在应用程序运行时创建人体模型

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T20:35:33.757

原谅我，但听起来你低估了这个项目的难度。

我会认真地给你一些答案：

如果您在 Silverlight 中展示 3D 模型，您可能会想要[查看这篇文章](http://msdn.microsoft.com/en-us/magazine/hh547098.aspx)。

生成逼真的人体模型并非易事。我以前从未听说过有人在飞行中这样做，所以你还有很长的路要走。

# java - 循环内定义的 Java 变量似乎在循环外无法识别？

> ID：14654513
> 
> 赞同：3
> 
> 时间：2013-02-01T20:33:01.890
> 
> 标签：java, variables, loops

我有一段代码让我感到困惑。我在 if/else 语句中定义了一个整数数组，因为数组的长度取决于该方法的 2 个输入的长度。我的问题是在 if/else 语句之外，变量定义似乎丢失了。

```
import java.util.Arrays;

public class test {

  public String AddArrays(int [] arg1, int [] arg2) {
    int L1 = arg1.length;
    int L2 = arg2.length;
    if (L1 > L2) {
        int[] output = new int[L2];
        for (int i = 0; i < L2; i++) {
            output[i] = arg1[i] + arg2[i];
        }
    } else {
        int[] output = new int[L1];
        for (int i = 0; i < L2; i++) {
            output[i] = arg1[i] + arg1[i];
        }
    }
    String result = Arrays.toString(output);
    return result;
    }
} 
```

我得到的错误是关于`String result = Arrays.toString(output);`Eclipse 告诉我`output`无法解析为变量的语句。

...顺便说一句，是的，我知道这不是添加两个整数数组的方法——我从更复杂的代码中减少了这个以演示问题！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T20:33:54.813

定义`output`before`if`语句。像这样：

```
int[] output;
int L1 = arg1.length;
int L2 = arg2.length;
if (L1 > L2) {
    output = new int[L2];
    for (int i = 0; i < L2; i++) {
        output[i] = arg1[i] + arg2[i];
    }
} else {
    output = new int[L1];
    for (int i = 0; i < L2; i++) {
        output[i] = arg1[i] + arg1[i];
    }
}
String result = Arrays.toString(output);
return result;
} 
```

当您`output`在`if`语句中声明时，它仅具有该块范围。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T20:34:49.840

变量的范围始终是下一个封闭的`{` `}`.

原因从它的声明开始（而不是在`{`）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T20:40:29.077

好吧，您已经有了解决方案，但我想指出，您可以减少您的方法，以避免重复代码，您目前正在这样做。

您可以`conditional operators`根据`L1 > L2`. 而不是迭代直到`L1`or `L2`，您应该迭代直到 array 的长度`output`。

因此，您可以尝试使用以下代码：-

```
public String addArrays(int [] arg1, int [] arg2) {
    int L1 = arg1.length;
    int L2 = arg2.length;

    int[] output = L1 > L2 ? new int[L2]: new int[L1];

    for (int i = 0; i < output.length; i++) {
        output[i] = arg1[i] + arg2[i];
    }

    return Arrays.toString(output);
} 
```

请遵循 Java 命名约定。方法名称应以小写字母开头。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T20:38:40.780

您在每个 if/else 语句中将输出变量声明为局部变量。要解决此问题，请先在外部声明它，然后对其进行调整并返回结果。这使它保持在括号之间的范围内`{ }`。

```
public String AddArrays(int [] arg1, int [] arg2) {
    int L1 = arg1.length;
    int L2 = arg2.length;
    int[] output;
    if (L1 > L2) {
        output = new int[L2];
        for (int i = 0; i < L2; i++) {
            output[i] = arg1[i] + arg2[i];
        }
    } else {
        output = new int[L1];
        for (int i = 0; i < L2; i++) {
            output[i] = arg1[i] + arg1[i];
        }
    }
    String result = Arrays.toString(output);
    return result;
} 
```

# excel - 如何在 Excel 的每个工作表中隐藏零行

> ID：14654514
> 
> 赞同：0
> 
> 时间：2013-02-01T20:33:04.033
> 
> 标签：excel, for-loop, foreach, show-hide, vba

我想隐藏 B 列和 C 列中值为零的行。我的代码有效，但仅在活动工作表上有效。我希望它遍历工作簿中的所有工作表。任何帮助表示赞赏

```
Private Sub CommandButton1_Click()
Dim M As Long, LastRow As Long
Dim ws As worksheet

For Each ws In ActiveWorkbook.Worksheets
LastRow = ws.Range("E65536").End(xlUp).Row
For M = LastRow To 7 Step -1
If Range("B" & M).Value = 0 And Range("C" & M).Value = 0 Then
Range("B" & M).EntireRow.Hidden = True
End If
Next M
Next ws
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T20:39:24.090

激活工作表。问题是 Range 正在处理当前的活动工作表。如果你使用 ws. infromt 范围或激活工作表，如下所示。

```
For Each ws In ActiveWorkbook.Worksheets 
```

添加

```
ws.Activate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T20:39:28.957

我发现这个关于这个主题，我希望它有帮助：[ExtendOffice](http://www.extendoffice.com/documents/excel/546-excel-hide-rows-with-zero-value.html)

```
Sub Hide_rows()
Dim LastRow As Long
Dim Rng As Range
LastRow = Range("A65536").End(xlUp).Row '
Set Rng = Range("A1:A" & LastRow) '
Application.ScreenUpdating = False
For Each cell In Rng
If cell.Value = "0" Then
cell.EntireRow.Hidden = True
End If
Next cell
Application.ScreenUpdating = True
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T20:39:31.090

您需要将 Range 指定为工作表的成员，如下所示：

```
Private Sub CommandButton1_Click()
   Dim M As Long, LastRow As Long
   Dim ws As worksheet

   For Each ws In ActiveWorkbook.Worksheets
       LastRow = ws.Range("E65536").End(xlUp).Row
       For M = LastRow To 7 Step -1
           ' Notice how 'ws' has been added before range
           If ws.Range("B" & M).Value = 0 And ws.Range("C" & M).Value = 0 Then
               ws.Range("B" & M).EntireRow.Hidden = True
           End If
       Next M
   Next ws
 End Sub 
```

# html - 投影以扩展元素的整个宽度

> ID：14654516
> 
> 赞同：2
> 
> 时间：2013-02-01T20:33:05.463
> 
> 标签：html, css

如何获得投影以扩展元素的整个宽度。这就是我现在所拥有的，但我没有在元素上水平传播。
正如您在图像的右侧和左侧看到的那样，阴影是嵌入的，我需要它跨越整个宽度。

```
box-shadow: 0 8px 6px -6px black; 
```

![在此处输入图像描述](../Images/fa158a346dbbabbfbdc773bb9fc0f615.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T20:36:04.617

你的负传播半径是造成这种情况的原因。将 -6px 更改为某个正值：

```
box-shadow: 0 8px 6px 6px black; 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/t3evU/)**

根据[MDN](https://developer.mozilla.org/en-US/docs/CSS/box-shadow)：

> 正值会导致阴影扩大并变大，负值会导致阴影缩小。如果未指定，它将为 0（阴影将与元素大小相同）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T21:14:40.743

不要使用 -6px 有它在 0px，也不要忘记其他浏览器。

```
-webkit-box-shadow: 0 8px 6px 0 #000000;
-moz-box-shadow: 0 8px 6px 0 #000000;
box-shadow: 0 8px 6px 0 #000000; 
```

# php - mysql php表更新

> ID：14654518
> 
> 赞同：0
> 
> 时间：2013-02-01T20:33:19.737
> 
> 标签：php, mysql, forms

我有一个从 MySQL 连接填充的表单。from 名称如下所示：

```
<td><input type="text" name="Time1[]" value="<?php echo htmlentities($row_newNext['Time1'], ENT_COMPAT, 'utf-8'); ?>" size="32" /></td>

<td><input type="text" name="Time1Out[]" value="<?php echo htmlentities($row_newNext['Time1Out'], ENT_COMPAT, 'utf-8'); ?>" size="32" /></td> 
```

我将输入数组传递到另一个页面，但现在我需要以某种方式组合数组以便使用 MySQl 插入它们。我只是无法获得正确的结构。array_combine 不能正常工作，合并也不能。请问有什么帮助吗？

每个数组看起来像这样：

```
//first array

Array(
     [0]=>apple
     [1]=>tree
     [2]=>rock
     )

//second array

Array(
     [0]=>foo
     [1]=>banana
     [2]=>orange
     ) 
```

我希望数组根据键组合成新的数组。所以新数组将是：

```
Array(
     [0]=>apple
     [1]=>foo
     )

Array(
     [0]=>tree
     [1]=>banana
     )

Array(
     [0]=>rock
     [1]=>orange
     ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T20:45:21.040

您可以序列化`$row_newNext['Time1']`和 $row_newNext['Time1Out'] 在以表单形式发送它之前，`unserialise()`它在您收到您的帖子数据的页面上或`implode()`带有某种定界符的页面上`explode()`，稍后再发送。

[内爆（）](http://php.net/manual/en/function.implode.php)

[爆炸（）](http://php.net/manual/en/function.explode.php)

[连载（）](http://php.net/manual/en/function.serialize.php)

[反序列化（）](http://php.net/manual/en/function.unserialize.php)

# jquery - 试图从特定用户那里获取推特帖子

> ID：14654520
> 
> 赞同：0
> 
> 时间：2013-02-01T20:33:26.560
> 
> 标签：jquery, json, api, twitter

我正在使用以下代码从特定用户那里获取 twitter 数据并将其输出到 div，但是它不起作用。什么都没有输出，我真的不确定我是否做对了，我从别人那里得到了这个分叉的这个片段。我不确定是否需要通过 twitter 进行身份验证以及如何进行？

[http://jsfiddle.net/elijahmanor/Nstnx/22/](http://jsfiddle.net/elijahmanor/Nstnx/22/)

JS

```
$(function(){    

    var twitterUsername = 'anderskitson'
    var url = "http://twitter.com/status/user_timeline/" + 
        twitterUsername + 
        ".json?count=5&callback=?";
    $.getJSON( url, function( data ) {
        var twitterList = $( "<ul />" );
        $.each( data, function( index, item ) {
            $( "<li />", { "text" : item.text } )
                .appendTo( twitterList );
        });
        $( "#output" ).fadeOut( "fast", function(){
            $( this ).empty()
                .append( twitterList )
                .fadeIn( "slow" );            
        });

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T20:40:46.907

您使用的是旧形式的 URL。该表格已被弃用。您还需要添加`callback=something`到 URL，以便它使用 JSONP 并解决跨源问题。此外，将您的 jQuery 更新到最新版本。小提琴使用的是旧版本。

试试这个代码：

```
$( "#getTweets" ).bind( "click", function() {
    var twitterUsername = $( "#twitterUsername" ).val();
    var url = "https://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=true&count=2&callback=jsonp&screen_name=" + 
        twitterUsername;
    $.getJSON( url, function( data ) {
        var twitterList = $( "<ul />" );
        $.each( data, function( index, item ) {
            $( "<li />", { "text" : item.text } )
                .appendTo( twitterList );
        });
        $( "#output" ).fadeOut( "fast", function(){
            $( this ).empty()
                .append( twitterList )
                .fadeIn( "slow" );            
        });
    });
}); 
```

# sqlalchemy - 使用 SQLAlchemy 取消腌制字段

> ID：14654521
> 
> 赞同：0
> 
> 时间：2013-02-01T20:33:27.713
> 
> 标签：sqlalchemy

我需要 SQLAlchemy 来检查数据库表列中是否出现 python-pickled 字符串（例如`S'foo'\np0\n.`），解开它们（在本例中将 yield `foo`），然后将它们写回。我该如何（有效地）做到这一点？（我可以以某种方式滥用 SQLAlchemy 的`PickleType`吗？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T18:45:49.493

好的，找到了一种使用方法`sqlalchemy.sql.expression.func.substr`：

```
from sqlalchemy.sql.expression import func

table.update().where(
    and_(table.c.column.startswith("S'"),
         table.c.column.endswith("'\np0\n."))
    ).values({table.c.column:
              func.substr(table.c.column,
                          3,
                          func.char_length(table.c.column)-8)
             }).execute() 
```

# c# - aspx 页面是否有相当于“部分类”的内容？

> ID：14654526
> 
> 赞同：4
> 
> 时间：2013-02-01T20:33:48.253
> 
> 标签：c#, asp.net, include

我有一个非常非常长的页面，为了使 html 更易于阅读，我想将页面拆分为几个子页面。

为了管理页面上的控件，我已经将代码隐藏页面拆分为多个文件。

我想对我的 aspx 做同样的事情。我将如何调用这些子页面以及如何启动它们？（例如，没有*<%@ Page [...]...>*）。

到目前为止，我尝试`<!-- #Include virtual="~/path/page.aspx" -->`了一个空的 aspx 页面（只有 aspx 中的“测试”。没有后面的代码）。

它有效，但随后，VS2010 给我抛出了一堆错误（*字符文字中的字符太多。*）

## 编辑

我宁愿避免使用用户控件：

我已经使用了很多。在这种情况下，不需要可重用性。这些控件也主要只包含其他用户控件。而且我不想与我所有其他页面（更短）的布局有太多不同。大多数页面上有 3-4 个控件，但这个有 50 个。我只想将它拆分为多个 html 页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T19:26:20.417

我已经接近答案了。似乎VS2010在*html*上抛出的错误在构建项目后消失了。尽管如此，我还是为我的子页面保留了代码隐藏文件，尽管 VS 对所有文件感到困惑。

这是我最终拆分页面的方式：

父 aspx 文件：

```
<!-- #Include virtual="~/Page/subPage.aspx" --> 
```

父 aspx.cs 文件：

```
public partial class myPage 
```

子页面aspx文件：

> 纯 html（没有 @Page、@Imports 等）、用户控件...

```
<div style="margin:20px 0px;">
    <asp:Panel runat="server" ID="table" />
</div>

<CUSTOMCTRL runat="server" /> 
```

子页面 aspx.cs 文件：

> 公共部分类 myPage

子页面 aspx.designers.cs 文件：

> 公共部分类 myPage

唯一的问题是子页面设计者：您需要手动管理它们。

# c# - xml中的额外右括号

> ID：14654527
> 
> 赞同：5
> 
> 时间：2013-02-01T20:33:51.653
> 
> 标签：c#, xml, xmlserializer

我正在使用此示例将一些变量保存到 xml 文件中：

[如何将当前类设置为返回类型结果](https://stackoverflow.com/questions/14639554/how-do-i-set-the-current-class-to-the-return-types-results)

这是我的设置文件代码：

```
using System;
using System.IO;
using System.Xml.Serialization;

namespace ssscc.Settings
{
  public class AppSettings
  {
    public string ReceiptLine1 { set; get; }
    public string ReceiptLine2 { set; get; }
    public string ReceiptLine3 { set; get; }
    public string ReceiptLine4 { set; get; }
    public string ReceiptLine5 { set; get; }
    public string ReceiptLine6 { set; get; }
    public bool ReceiptLine1Enabled { set; get; }
    public bool ReceiptLine2Enabled { set; get; }
    public bool ReceiptLine3Enabled { set; get; }
    public bool ReceiptLine4Enabled { set; get; }
    public bool ReceiptLine5Enabled { set; get; }
    public bool ReceiptLine6Enabled { set; get; }

    public string GatewayUserName { set; get; }
    public string GatewayPassword { set; get; }
    public string GatewayId { set; get; }

    private static string GetSettingsFile()
    {
      var exePath = System.Windows.Forms.Application.StartupPath;
      var sharedDirectory = Path.Combine(exePath, "shared");
      var settingsDirectory = Path.Combine(sharedDirectory, "settings");
      var settingsFile = Path.Combine(settingsDirectory, "ssscc.xml");

      if (!Directory.Exists(sharedDirectory))
      {
        Directory.CreateDirectory(sharedDirectory);
      }

      if (!Directory.Exists(settingsDirectory))
      {
        Directory.CreateDirectory(settingsDirectory);
      }

      return settingsFile;
    }

    internal void SaveSettings()
    {
      var serializer = new XmlSerializer(typeof(AppSettings));
      using (var stream = File.OpenWrite(GetSettingsFile()))
        serializer.Serialize((Stream)stream, this);
    }

    internal static AppSettings GetInstance()
    {
      try
      {

      if (!File.Exists(GetSettingsFile()))
        return null;

      var serializer = new XmlSerializer(typeof(AppSettings));
      using (var stream = File.OpenRead(GetSettingsFile()))
      {
        return (AppSettings)serializer.Deserialize(stream);
      }

      }
      catch (Exception ex)
      {
        Console.WriteLine(ex.Message);
        throw;
      }
    }

  }
} 
```

当我保存数据时，初始保存正常，并在文件末尾显示：

```
<?xml version="1.0"?>
<AppSettings xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <ReceiptLine1 />
  <ReceiptLine2 />
  <ReceiptLine3 />
  <ReceiptLine4 />
  <ReceiptLine5 />
  <ReceiptLine6 />
  <ReceiptLine1Enabled>false</ReceiptLine1Enabled>
  <ReceiptLine2Enabled>true</ReceiptLine2Enabled>
  <ReceiptLine3Enabled>false</ReceiptLine3Enabled>
  <ReceiptLine4Enabled>false</ReceiptLine4Enabled>
  <ReceiptLine5Enabled>false</ReceiptLine5Enabled>
  <ReceiptLine6Enabled>false</ReceiptLine6Enabled>
  <GatewayUserName>asdfasdf</GatewayUserName>
  <GatewayPassword>asdf</GatewayPassword>
  <GatewayId>sdf</GatewayId>
</AppSettings> 
```

当我更新文件并再次保存时，我得到了这样的结果：

```
<?xml version="1.0"?>
<AppSettings xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <ReceiptLine1 />
  <ReceiptLine2 />
  <ReceiptLine3 />
  <ReceiptLine4 />
  <ReceiptLine5 />
  <ReceiptLine6 />
  <ReceiptLine1Enabled>false</ReceiptLine1Enabled>
  <ReceiptLine2Enabled>true</ReceiptLine2Enabled>
  <ReceiptLine3Enabled>false</ReceiptLine3Enabled>
  <ReceiptLine4Enabled>false</ReceiptLine4Enabled>
  <ReceiptLine5Enabled>false</ReceiptLine5Enabled>
  <ReceiptLine6Enabled>false</ReceiptLine6Enabled>
  <GatewayUserName>asdfasdf</GatewayUserName>
  <GatewayPassword>asdf</GatewayPassword>
  <GatewayId>sdf</GatewayId>
</AppSettings>> 
```

它`>>`在最后看到两个。

任何人都明白为什么它`>>`在我的 xml 文件末尾保存两个？

我的代码错误如下：

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-01T20:36:05.790

这是因为您正在使用[`File.OpenWrite`](http://msdn.microsoft.com/en-us/library/system.io.file.openwrite.aspx)：

> 对于现有文件，它不会将新文本附加到现有文本。相反，它会用新字符覆盖现有字符。如果您用较短的字符串（例如“Second run”）覆盖较长的字符串（例如“This is a test of the OpenWrite method”），则文件将包含字符串的混合（“OpenWrite 方法的Second runtest ”）。

虽然从您的示例中不清楚，但我怀疑新内容比旧内容短一个字节，因此您会看到原始文件中的右尖括号。

我怀疑你应该[`File.Create`](http://msdn.microsoft.com/en-us/library/system.io.file.create.aspx)改用。

# java - 需要关于使用 jdo+datanucleus 持久化引用（嵌入）对象的确认

> ID：14654528
> 
> 赞同：0
> 
> 时间：2013-02-01T20:33:53.597
> 
> 标签：java, jdo, datanucleus

嗨，我正在坚持一个带有接口集合（列表）的类。

我在链接 [http://www.datanucleus.org/products/accessplatform_2_1/jdo/orm/embedded.html#Collection](http://www.datanucleus.org/products/accessplatform_2_1/jdo/orm/embedded.html#Collection)上看到了这个 ，它说“嵌入式元素不能继承（将来可能允许）”

那么，如何持久化这些对象呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-12T09:38:22.783

几个小时前我遇到了同样的问题，希望它可以帮助其他人从 jdo/datanucleus 开始。

如[当前文档](http://www.datanucleus.org/products/datanucleus/jdo/orm/interfaces.html)中所述，保持接口集合的唯一方法是通过[单向连接表](http://www.datanucleus.org/products/datanucleus/jdo/orm/one_to_many_list.html#join_uni)。无法直接嵌入实现接口的对象。

```
@PersistenceCapable
public class SomeClass {
    @Join
    @Extension(vendorName="datanucleus", key="implementation-classes", value="ImplementingClass")
    private List<SomeInterface> myList;

    // this list would be embedded
    private List<SomeOtherClass> myOtherList;
    // ...
}

@PersistenceCapable
public interface SomeInterface {
    // ...
}

@PersistenceCapable
public class ImplementingClass implements SomeInterface {
    // ...
}

@PersistenceCapable(embeddedOnly="true")
public class SomeOtherClass {
    // ...
} 
```

# multithreading - 线程通常应该在什么时候屈服？

> ID：14654532
> 
> 赞同：6
> 
> 时间：2013-02-01T20:34:09.233
> 
> 标签：multithreading, language-agnostic

在大多数语言/框架中，存在一种线程将控制权交给其他线程的方法。但是，我真的想不出从线程中产生是给定问题的正确解决方案的时候。一般来说，什么时候应该使用`Thread.yield()`,`sleep(0)`等？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T20:38:25.257

一个用例可能是测试并发程序，尝试找到揭示同步模式中缺陷的交错。例如在 Java 中：

> 增加交错次数并因此更有效地探索程序的状态空间的一个有用技巧是在访问共享状态的**操作`Thread.yield`期间鼓励更多的上下文切换**。（这种技术的有效性是特定于平台的，因为 JVM 可以自由地将 THRead.yield 视为无操作 [JLS 17.9]；使用短暂但非零的睡眠会更慢但更可靠。） — [JCIP](http://jcip.net/)

从 Java 的角度来看，还有趣的是它们的语义没有定义：

> **`Thread.yield`(and )的语义`Thread.sleep(0)`未定义 [JLS 17.9]；JVM 可以自由地将它们实现为无操作或将它们视为调度提示。**特别是，它们不需要在 Unix 系统上具有 sleep(0) 的语义，将当前线程放在该优先级的运行队列的末尾，让给具有相同优先级的其他线程，尽管一些 JVM 以这种方式实现 yield。— [JCIP](http://jcip.net/)

当然，这使得它们相当不可靠。这是非常特定于 Java 的，但是，总的来说，我相信以下是正确的：

*两者都是可*用于影响**调度顺序**的低级机制。如果这是用来实现某个功能，那么这个功能是基于 OS 调度程序的概率，这似乎是一个相当糟糕的主意。这应该由更高级别的同步结构来管理。

出于测试目的或强制程序进入某种状态，它似乎是一个方便的工具。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T20:40:28.427

让您的操作系统调度程序为您决定？

所以永远不要屈服，永远不要 sleep(0)，直到你匹配到 sleep(0) 绝对必要的情况并在此处记录。

上下文切换也很昂贵，所以我认为很多人不想要更多的上下文切换。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-01T20:44:42.163

> 一般来说，什么时候应该使用 Thread.yield()、sleep(0) 等？

这取决于我们正在谈论的VM是线程模型。对我来说，答案*很少（如果有的话*） 。

传统上，一些线程模型是非抢占式的，而另一些则（或曾经）不成熟，因此需要`Thread.yield()`.

我觉得这`Thread.yield()`就像`register`在 C 中使用一样。我们过去常常依靠它来提高程序的性能，因为在许多情况下，程序员在这方面比编译器要好。但是现代编译器*要*聪明得多，而且现在程序员可以通过使用`register`and来提高程序性能的情况越来越少`Thread.yield()`。

# android - Admob 无法销毁活动

> ID：14654533
> 
> 赞同：3
> 
> 时间：2013-02-01T20:34:09.437
> 
> 标签：android, admob, andengine

虽然我没有在任何更令人沮丧的设备上看到这一点，但我有这个堆栈跟踪来自市场中的用户，

```
java.lang.RuntimeException: Unable to destroy activity
sbsoftware.jewelgobbler/com.google.ads.AdActivity}: java.lang.NullPointerException
at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:2676)
at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:2694)
at android.app.ActivityThread.access$2100(ActivityThread.java:117)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:968)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3691)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:912)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:670)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NullPointerException
at android.webkit.WebView.loadUrl(WebView.java:2341)
at android.webkit.WebView.loadUrl(WebView.java:2357)
at a.a(Unknown Source)
at a.a(Unknown Source)
at a.b(Unknown Source) 
```

该应用程序是由AndEngine GLES1 驱动的游戏。它利用 XML 方法来配置 adview，例如，在我的主布局中，

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >
<org.anddev.andengine.opengl.view.RenderSurfaceView
android:id="@+id/xmllayoutRenderSurfaceView"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:layout_centerInParent="true"
android:gravity="center" />
<com.google.ads.AdView
android:id="@+id/adView"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_alignBottom="@id/xmllayoutRenderSurfaceView"
android:layout_centerInParent="true"
ads:adSize="BANNER"
ads:adUnitId="<MyCode>"
ads:loadAdOnCreate="true" />
</RelativeLayout> 
```

这是清单 Admob 活动，

```
<activity
android:name="com.google.ads.AdActivity"
android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize| 
smallestScreenSize"
android:theme="@android:style/Theme.NoTitleBar.Fullscreen" />
</application> 
```

Main Activity 中的实现，JewelGobblerActivity，它扩展了 LayoutGameActivity，

```
public static AdView adView;
public static InterstitialAd interstitial;

@Override
public void onLoadResources() { 
    adView = (AdView) findViewById(R.id.adView);
    interstitial = new InterstitialAd(this, "<MyCode>");
    AdRequest adRequest = new AdRequest();
    interstitial.loadAd(adRequest);

    //other stuff       
    SceneManager.init(this, mCamera);
    LoadCurrentDetails();

} 
...
@Override
protected int getLayoutID() {
    // TODO Auto-generated method stub
    return R.layout.main;
}

@Override
protected int getRenderSurfaceViewID() {
    // TODO Auto-generated method stub
    return R.id.xmllayoutRenderSurfaceView;
} 
```

这就是关于 Admob 的全部内容，除了我的 SceneManager 中的两个广告展示例程，

```
public static void ShowInterstitialAd()
{
    JewelGobblerActivity.handler.post(new Runnable() {
    @Override
    public void run() {

    if (JewelGobblerActivity.interstitial != null)
    {

        if (JewelGobblerActivity.interstitial.isReady())
        {
            JewelGobblerActivity.interstitial.show();
            JewelGobblerActivity.interstitial.loadAd(new AdRequest()); //request a new ad
        }
    }

    }
});

}

public static void SetAdVisibility(final boolean Visible)
{
    JewelGobblerActivity.handler.post(new Runnable() {
    @Override
    public void run() {

        if (JewelGobblerActivity.adView != null)
        {
            if (Visible) JewelGobblerActivity.adView.setVisibility(View.VISIBLE);
            else JewelGobblerActivity.adView.setVisibility(View.INVISIBLE);
        }

    }
    });

} 
```

我正在使用 Admob 6.2.1。它在我必须使用的每台设备上都可以正常工作，包括 SG 1 和 3、华为和爱可视……从横幅和插页式广告显示来看，一切正常。有没有其他人遇到过这个问题，或者设法解决了这个问题？任何帮助将不胜感激！

干杯

史蒂文

# java - 如何在尊重引号的情况下将字符串分解为参数？

> ID：14654540
> 
> 赞同：1
> 
> 时间：2013-02-01T20:34:57.550
> 
> 标签：java, string, split

> **可能重复：**
> [当没有被单引号或双引号包围时，使用空格分割字符串的正则表达式](https://stackoverflow.com/questions/366202/regex-for-splitting-a-string-using-space-when-not-surrounded-by-single-or-double)

我怎样才能打破这样的字符串：

```
String args = "\"file one.txt\" filetwo.txt some other \"things here\""; 
```

在尊重引号的同时进入其参数/参数？

所以在上面的例子中，参数将被分解为：

```
args[0] = file one.txt
args[1] = filetwo.txt
args[2] = some
args[3] = other
args[4] = things here 
```

我了解如何使用 split(" ")，但我想组合引号中的术语。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T22:32:18.383

假设您不必使用正则表达式并且您的输入不包含嵌套引号，您可以在**一次迭代**中通过字符串字符实现此目的：

```
String data = "\"file one.txt\" filetwo.txt some other \"things here\"";

List<String> tokens = new ArrayList<String>();
StringBuilder sb = new StringBuilder();

boolean insideQuote = false;

for (char c : data.toCharArray()) {

    if (c == '"')
        insideQuote = !insideQuote;

    if (c == ' ' && !insideQuote) {//when space is not inside quote split..
        tokens.add(sb.toString()); //token is ready, lets add it to list
        sb.delete(0, sb.length()); //and reset StringBuilder`s content
    } else 
        sb.append(c);//else add character to token
}
//lets not forget about last token that doesn't have space after it
tokens.add(sb.toString());

String[] array=tokens.toArray(new String[0]);
System.out.println(Arrays.toString(array)); 
```

输出：

```
["file one.txt", filetwo.txt, some, other, "things here"] 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-01T21:12:20.167

如果您在引入依赖项时没有问题，您可以使用Apache 的[Commons cli](http://commons.apache.org/cli/)。它将简化命令行解析并使其对用户更有用。

# entity-framework - EF 4.1 DBContext - 应用过滤器加载相关实体

> ID：14654544
> 
> 赞同：0
> 
> 时间：2013-02-01T20:35:25.280
> 
> 标签：entity-framework, entity-framework-4, dbcontext

我正在使用`EF 4.1 DBContext API`，我正在尝试加载一个名为的父实体`User`，然后`Project`使用`.Where(x => x.IsEnabled)`过滤器显式加载相关实体：

**我在“显式加载相关实体时应用过滤器**”下找到[了](http://blogs.msdn.com/b/adonet/archive/2011/01/31/using-dbcontext-in-ef-feature-ctp5-part-6-loading-related-entities.aspx)一种建议的方法。但我无法弄清楚为什么没有被填充。使用 SQL Profiler，我已经验证我正在查询并返回数据。但它没有被加载到我的用户对象中。**`user.Projects``Projects`**

 **有什么想法吗？

这是我的代码：

```
 public User GetUser(string userName)
    {
        try
        {
            using (var context = new Entities())
            {
                var user = context.Users.FirstOrDefault(x => string.Compare(x.UserName, userName, true) == 0);

                context.Entry(user).Collection(x => x.Projects).Query().Where(x => x.IsEnabled).Load();

                //TODO: I expect user.Projects.Count() > 0.
            }
        }
        catch (Exception ex)
        {
            LogWrapper.DumpException(ex);
        }

        return null;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:34:56.137

最近遇到这个问题，我就是这样做的。希望你觉得它有用。

```
var query = context.User.Where(x => x.UserName == userName)
            .Include(x => x.Projects.All(p => p.IsEnabled == true))

var data = query.ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T20:38:41.713

```
 User.projects = context.projects.select(x => x.user).where(x => x.isenabled); 
```**

# image-processing - OpenCV - 检测形状集合中的形状（例如一群人中的人）

> ID：14654547
> 
> 赞同：2
> 
> 时间：2013-02-01T20:35:37.307
> 
> 标签：image-processing, opencv, image-segmentation, emgucv

我正在从视频中提取 blob，并使用 blob 的纵横比将其分类为人类或车辆。效果很好，因为车辆和人类的纵横比差异很大。

然而，当一群人——比如手牵手的母子，或者一群走得很近的人经过并且斑点检测是一个单一的斑点时，这种逻辑就失效了。

我想知道分割图像的最佳方法是什么。理想情况下，我还想计算组中的人。

以下是一些想法：

*   canny-> contour-> 使用 Hu Moments 形状匹配尝试各种大小的轮廓？问题是我不知道这个群体中可能有多少人
*   canny->contour> 使用人体轮廓模板进行模板匹配。考虑到它的一般尺度不变性，这可能会起作用。

关于我应该如何处理这个问题的任何其他想法？感谢所有建议和意见/

# arrays - 在matlab中围绕某个点x，y围绕数组循环旋转任意长度的向量

> ID：14654548
> 
> 赞同：0
> 
> 时间：2013-02-01T20:35:39.373
> 
> 标签：arrays, matlab

我有一个数组：

```
 1 1 1 0 0 
 1 2 2 0 0
 1 2 3 0 0
 0 0 0 0 0
 0 0 0 0 0 
```

我想成功

```
 1 1 1 1 1 
 1 2 2 2 1
 1 2 3 2 1
 1 2 2 2 1
 1 1 1 1 1 
```

这就像将 1/4 块馅饼旋转 270 度以填充馅饼的其余部分以形成一个完整的圆圈。基本上在各个方向上镜像整个角落。如果可能的话，我不想使用任何内置的 matlab 功能——如果可能的话，只是一些矢量技巧。谢谢。

编辑：

这嵌入在任意大小的零矩阵中。我希望它在上面的例子中都能工作，并说这个例子：

```
 0 0 0 0 0 0 0 0 0 0 0 0 0 0
 0 0 1 1 1 0 0 0 0 0 0 0 0 0 
 0 0 1 2 2 0 0 0 0 0 0 0 0 0 
 0 0 1 2 3 0 0 0 0 0 0 0 0 0 
 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
```

理想情况下，我希望有一个向量说 [1,2,3.. N]，它可以围绕以网格中某个点 xc,yc 为中心的数组 (N) 中的最大值循环旋转。或者，如果这是不可能的，取一个基本数组 [1 1 1, 1 2 2, 1 2 3] 并旋转它，使 3 在中心，然后像上面的第二个矩阵一样填充一个圆圈。

编辑：

我发现 rot90(M,k) 旋转矩阵 M k 次，但这会产生：

Mrot = M + rot90(M,1) + rot90(M,2) + rot90(M,3)

```
Mrot =
 1  1  2  1  1
 1  2  4  2  1
 2  4  12 4  2
 1  2  4  2  1
 1  1  2  1  1 
```

这会将其堆叠在不正确的 x,y 方向上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T20:43:08.403

假设您要复制的角关于对角线对称（如您的示例中所示），那么您可以在一个索引步骤中执行此操作。给定一个`M`包含样本 5×5 矩阵的矩阵，以下是如何执行此操作：

```
>> index = [1 2 3 2 1];
>> M = M(index, index)

M =

     1     1     1     1     1
     1     2     2     2     1
     1     2     3     2     1
     1     2     2     2     1
     1     1     1     1     1 
```

# ios - iOS - 如何将触摸转发到底层 uiview

> ID：14654557
> 
> 赞同：1
> 
> 时间：2013-02-01T20:36:24.847
> 
> 标签：ios, uiview, touch, touch-event

我有 3 个相同大小的 UIViews 堆叠在一起。最上面是透明的，仅用于检测触摸。检测到的触摸类型将决定我想要接收触摸事件的其他两个底层视图中的哪一个。一旦最顶层的视图完成了触摸，我需要将触摸事件转发到正确的底层视图。我怎样才能做到这一点？

编辑 - 我正在添加我的触摸检测代码。这是在 MainViewController 中，它的视图包含所有 3 个子视图。

```
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{

    for (UITouch *touch in touches)
    {
        if (touch.view == self.touchOverlay) {
            CGPoint touchLocation = [touch locationInView:touch.view];

            //do a bunch of math to determine which view should get the touches.
            if (viewAshouldGetTouches) //forward to viewA
            if (viewBshouldGetTouches) //forward to viewB

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T20:52:51.153

制作两个子视图`setUserInteractionEnabled:NO`并处理父视图中的所有触摸。然后，根据触摸类型，向正确的视图发送编程触摸事件。那么你不需要在顶部有清晰的视野。基本上，您将从下往上协调触摸事件，而不是顶部->底部->中间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T20:42:13.153

您必须通过为您的顶视图创建一个 UIView 子类并覆盖以下方法来做到这一点：

```
- (BOOL)pointInside:(CGPoint)point withEvent:(UIEvent *)event {
    // UIView will be "transparent" for touch events if we return NO
    return (point.y < MIDDLE_Y1 || point.y > MIDDLE_Y2);
} 
```

# facebook - 必须使用应用程序 access_token 调用 Facebook Open Graph 错误

> ID：14654562
> 
> 赞同：0
> 
> 时间：2013-02-01T20:36:35.943
> 
> 标签：facebook, facebook-graph-api

当我包含我的应用程序访问令牌时，它会抱怨：

```
an active access token must be used to query information about the current user. 
```

我不明白我怎么能同时包含两者？我需要同时提供两者还是我做错了什么？

我已经尝试了以下所有方法，但没有任何乐趣：

```
FB.api('/me/MY_NAMESPACE:MY_ACTION?access_token=USER_ACCESS_TOKEN', 'post', { object: 'http://example.com/', access_token: 'MY_APP_TOKEN'})
FB.api('/me/MY_NAMESPACE:MY_ACTION?access_token=MY_APP_TOKEN', 'post', { object: 'http://example.com/', access_token: 'USER_ACCESS_TOKEN'})
FB.api('/me/MY_NAMESPACE:MY_ACTION?access_token=USER_ACCESS_TOKEN', 'post', { object:'http://example.com?access_token=MY_APP_TOKEN'})
FB.api('/me/MY_NAMESPACE:MY_ACTION?access_token=MY_APP_TOKEN', 'post', { object: 'http://example.com?access_token=USER_ACCESS_TOKEN'}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T01:58:14.790

结果我打开了一个设置，使应用程序需要一个应用程序令牌。一旦我关闭它，事情就开始按照文档中的描述工作。之后我回去找我错误设置的设置的确切名称，但我找不到它了（耸肩）。最终起作用的 api 调用如下所示：

FB.api('/me/MY_NAMESPACE:MY_ACTION', 'post', { object: ' [http://example.com](http://example.com) '})

任何地方都没有明确包含访问令牌！

# c++ - obj-c 请求后将块 NSString 返回到 c++

> ID：14654563
> 
> 赞同：0
> 
> 时间：2013-02-01T20:36:42.233
> 
> 标签：c++, objective-c, cocoa, httprequest, objective-c-blocks

我正在尝试将这些数据正确地返回到 C++，但是有一些随机崩溃。我想访问 C++ 中的数据。有时会，有时不会。我找不到有关如何返回此数据的明确示例。这是我的代码：

```
- (NSString*) sendRequestToServer : (CLLocationCoordinate2D) location {
  NSLog(@"getting geo from server %@ %@ ", [NSString stringWithFormat:@"%f", location.latitude],[NSString stringWithFormat:@"%f", location.longitude]);
  __block long returnBytesSend = 0;
  __block long returnBytesTotal = 0;
  __block NSString* tempData = @"" ;
  __block BOOL foundNow = false;
  self.data = nil;

  for (NXOAuth2Account *account in [[NXOAuth2AccountStore sharedStore] accounts]) {

    NSMutableDictionary *params = [NSMutableDictionary dictionary];

    [params setObject: [NSString stringWithFormat:@"%f", location.latitude]  forKey:   @"latitude"];
    [params setObject:  [NSString stringWithFormat:@"%f", location.longitude] forKey:@"longitude" ];
    [params setObject: @"10" forKey:   @"radius" ];
    [params setObject: @"5" forKey: @"limit"];

    NXOAuth2Client *client =     [account oauthClient];
    NXOAuth2AccessToken *tokenData = [client accessToken];

    NSString * clientAccessToken = [tokenData accessToken];
    NSString * clientRefreshToken = [tokenData refreshToken];

    if (clientAccessToken && clientRefreshToken ){

        [NXOAuth2Request performMethod:@"GET"
                            onResource:[NSURL URLWithString:@"http://www.server.com/list"]
                       usingParameters: params
                           withAccount:account
                   sendProgressHandler:^(unsigned long long bytesSend, unsigned long long bytesTotal) {
                       returnBytesSend =  bytesSend ;
                       returnBytesTotal = bytesTotal;
                   }
                       responseHandler:^(NSURLResponse *response, NSData *responseData2, NSError *error){
                                  NSLog(@"FOUND DATA");
                            NSRange range = [[[NSString alloc] initWithData:responseData2 encoding:NSUTF8StringEncoding] rangeOfString :  @"facebook_id"];
                           if(range.location != NSNotFound) {
                                tempData = [[[NSString alloc] initWithData:responseData2 encoding:NSUTF8StringEncoding]retain];
                               //NSLog(@"%@",  tempData);
                               self.data = [[tempData copy] autorelease];
                               foundData = true;

                           }
                       }];
    }
}

  return tempData;

} 
```

我试图以这种方式访问​​数据：

```
 @interface oAuthView : UIWebView
@property (nonatomic, strong) __block  NSString* data;
@property (nonatomic) __block BOOL foundData; 
```

在 c++ 中是这样的：

```
 oAuthView *getWebView;
    getWebView =[[oAuthView alloc] initWithFrame:CGRectMake(10,40,300,400)];
    if ([getWebView foundData]  )  
    string dataS = string([[artPartView data] UTF8String])); 
```

# fusioncharts - 从 FusionCharts 事件中获取向下钻取 URL

> ID：14654565
> 
> 赞同：0
> 
> 时间：2013-02-01T20:37:02.243
> 
> 标签：fusioncharts

我正在使用 FusionCharts（特别是柱形图）。图表是从输出图表 xml 的休息端点创建的。端点还将 xml-urls 编码到图表中以进行向下钻取。我想捕获这些 url 以更改周围表单的内容（使其显示为生成该图表的所选参数）。

我遇到的问题是`BeforeLinkedItemOpen`and`LinkedItemOpened`事件不包含图表从中提取其 xml 的 url。该`LinkedChartInvoked`事件确实包含此信息 - 它仅称为导航第一级向下钻取。

我有五个级别的向下钻取，所以这行不通。任何人都知道获取我正在寻找的信息的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T17:20:50.230

我从来没有找到答案。看来 FusionCharts 根本没有报告此信息，我无法做我想做的事情。

# java - 哪里需要同步？

> ID：14654570
> 
> 赞同：1
> 
> 时间：2013-02-01T20:37:27.090
> 
> 标签：java, concurrency

```
public class sample1
{
    private static Map m = new HashMap();
    //....
    //.....
    //
    public void fun(String str1, String str2, sample2 s )
    {
        String str = str1 + str2 + s.getName();
        String value = m.get(str);
    }
}

public class sample2
{
    private String name;
            // ......
            // ........
            pubic String getName()
             {
                  return name;
             }
} 
```

在这里，我的问题是变量（函数 fun 的参数）如 str1、str2 和 s（sample2 对象）究竟存储在堆还是堆栈中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T20:41:15.743

You will never have any synchronization failure with str1 and str2, because those variables are strings, and the string class is immutable in Java.

# scheme - 来自方案中双单引号符号的字符串数据

> ID：14654572
> 
> 赞同：1
> 
> 时间：2013-02-01T20:37:31.457
> 
> 标签：scheme, racket

我在这里阅读了一些答案并用谷歌搜索，但没有运气。

我有这个：

```
''a 
```

在方案中（确切地说是 Chez 方案），我想把它变成一个字符串（这是我的 to-string lambda 的一个例子）。

现在，询问它是否是一个符号（使用符号谓词）会产生一个肯定的答案，所以我知道什么时候该操作，但在那之后我不能做任何事情，因为没有办法获得内引号本身。

所以基本上我找不到将“a”变成“a”的方法。

希望这很简单，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T20:49:01.640

这个表达式：

```
''a 
```

等同于这个符号定义（顺便说一下，为什么双引号？单引号就足够了）：

```
(quote (quote a)) 
```

要将其转换为字符串，只需执行以下操作：

```
(symbol->string (cadr ''a))
=> "a" 
```

# jquery - 如果为空Jquery如何替换值

> ID：14654574
> 
> 赞同：1
> 
> 时间：2013-02-01T20:37:40.990
> 
> 标签：jquery, magento

我有一个关于 jquery 在从下拉列表中选择时更改值的问题。

这个 jquery 基于 magento Simple Configurable Product 扩展。

这是来源：

```
$childProducts[$productId]["productDate"] = $product->getAttributeText('preorderdate'); 
```

返回 `var spConfig = new Product.Config({"productDate":"","productDate":"November 2013"})`

Jquery 在选择时更改 div 文本。

```
Product.Config.prototype.updateProductDate = function(productId) {
    var productDate = this.config.productDate;
    if (productId && this.config.childProducts[productId].productDate) {
        productDate = this.config.childProducts[productId].productDate;
    }
// if(productDate.lenght === 0)
    if(productDate === ''){
    $$('p.availability.in-stock span').each(function(el) {
        el.innerHTML = 'Is in stock';
    })
    $$('p.availability.in-stock span').each(function(el) {
        el.innerHTML = productDate;
    });
}; 
```

问题是在选择没有值的选项时仍然显示空白值并且没有返回`el.innerHTML = 'Is in stock';`。

哪里错了？

任何帮助表示赞赏。

我自己找到了解决方案，括号不在你的位置。

```
 Product.Config.prototype.updateProductDate = function(productId) {
        var productDate = this.config.productDate;
        if (productId && this.config.childProducts[productId].productDate) {
            productDate = this.config.childProducts[productId].productDate;
        }
        $$('p.availability.in-stock span').each(function(el) {
        el.innerHTML = productDate;
        });
    if(productDate === ''){
     $$('p.availability.in-stock span').each(function(el) {
            el.innerHTML = 'This is in stock';
        });
}
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T20:47:00.097

撇开问题不谈，如果条件关闭，您{在哪里？

```
 Product.Config.prototype.updateProductDate = function(productId) {
        var productDate = this.config.productDate;
        if (productId && this.config.childProducts[productId].productDate) {
            productDate = this.config.childProducts[productId].productDate;
        }
    // if(productDate.lenght === 0)
        if(productDate === ''){    //WHERE DOES THIS BRCKET CLOSED ??
        $$('p.availability.in-stock span').each(function(el) {
            el.innerHTML = 'Is in stock';
        })
        $$('p.availability.in-stock span').each(function(el) {
            el.innerHTML = productDate;
        });
    }; 
```

# objective-c - IOS中是否有任何等效的Java泛型？

> ID：14654576
> 
> 赞同：2
> 
> 时间：2013-02-01T20:37:43.393
> 
> 标签：objective-c, generics

在 Java 中，您可以使用泛型来强制使用某个类的对象。

示例：ArrayList 强制 ArrayList 在其中包含 TestObject 的实例。这提供了一个严格的对象列表。

我知道您也可以使用 Vector 类在 Actionscript 中执行此操作。

在 Objective-C 中有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T20:38:47.807

不，没有等价物。唯一甚至远程关闭的是创建您自己的集合，它在运行时强制执行您选择的类，但 Java 泛型是编译时的东西，在 obj-c 中没有等效项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-06T14:28:17.193

从 iOS 9 开始有泛型。

我找不到对文档的引用，但这篇文章包含关于该主题的几句话：http:
[//iosdevtips.co/post/121053658888/wwdc-ios-9-swift-2-notes](http://iosdevtips.co/post/121053658888/wwdc-ios-9-swift-2-notes)

**更新：**
还有一个新的相关功能，称为**KindOf Types**。
您可以在文章末尾阅读此内容：
[https ://medium.com/the-traveled-ios-developers-guide/objective-c-in-2015-3cb7dab3690c](https://medium.com/the-traveled-ios-developers-guide/objective-c-in-2015-3cb7dab3690c)

# bash - 差异重定向到位桶（又名 /dev/null）与关闭文件描述符

> ID：14654577
> 
> 赞同：2
> 
> 时间：2013-02-01T20:37:47.700
> 
> 标签：bash, shell, unix, scripting, ksh

以下两个命令有什么区别吗？

```
ls -l some_non_existing_file 2>/dev/null 
```

和

```
ls -l some_non_existing_file 2>&- 
```

两者似乎都有效，但到目前为止我只看到第一个被实际使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T20:44:36.857

在第二种情况下，程序尝试将数据输出到 stderr 将失败`EBADF`。该程序是否关心是一个单独的问题。

# php - Goutte，网站怎么能看到我是机器人？

> ID：14654579
> 
> 赞同：0
> 
> 时间：2013-02-01T20:37:56.277
> 
> 标签：php, symfony, web-crawler, goutte

不管我使用的是 Firefox 还是 GoogleBot，该网站仍将我视为机器人。

我正在尝试使用 Goutte 创建一个爬虫。该网站有一个针对爬虫的阻止系统，但我不知道如何避免它。这是我当前的代码：

```
require_once 'includes/goutte.phar';
use Goutte\Client;
$client = new Client();
$client->setHeader('User-Agent', "Googlebot");
$crawler = $client->request('GET', 'http://www.example.com');
echo $crawler->filter('')->text(); 
```

如您所见，我已经更改了用户代理，并且我已经通过爬取记录用户代理的本地文件测试了它是否正确更改。

该网站仍然以某种方式将我识别为机器人。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T22:01:05.163

您是否尝试过使用 firefox 浏览器或仅使用其用户代理字符串？如果您还没有使用 firefox 浏览器，请执行此操作并使用诸如 firebug 插件（“网络”面板）或 Tamperdata 插件或 Wireshark 之类的东西来捕获导致成功响应的请求的详细信息。

如果您无法使用 firefox 获得成功响应，则不太可能仅阻止机器人。

如果您可以复制导致成功响应的请求。

您可能还会说出“网站仍然将我视为机器人”的意思——您得到的究竟是什么反应？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-28T11:02:24.467

用wireshark 嗅探它并检查HTTP 标头。

# ruby-on-rails - 在 Ruby 中读取大文件的最快方法是什么？

> ID：14654583
> 
> 赞同：7
> 
> 时间：2013-02-01T20:38:20.437
> 
> 标签：ruby-on-rails, ruby, performance, file, io

我已经看到了这个问题的答案，但我不知道哪个答案的执行速度最快。这些是我见过的答案-哪个最好？

1.  使用 each 或 each_line 一次读取一行
2.  使用gets一次读取一行
3.  使用 readlines 将其全部保存到行数组中，然后使用每个行
4.  使用 grep（不确定如何使用 grep...）
5.  使用 sed（不确定 sed 到底该怎么做...）
6.  还有什么？

另外，最好只使用另一种语言还是 Ruby 就可以了？

编辑：

更多细节：每一行都包含类似“id1 attr1_1 attr2_1 id2 attr1_2 attr2_2 ... idn attr1_n attr2_n”（n 很大），我需要将它们插入数据库。对于该示例行，我需要在数据库中插入 n 行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T22:11:52.053

对于前三个选项，Ruby 可能会使用相同或非常相似的低级代码（用 C 编写）来从磁盘进行实际读取，因此它们应该执行类似的操作。鉴于此，您应该选择最方便的；这样做的能力是使像 Ruby 这样的语言如此有用的原因！您将从磁盘读取*大量*数据，因此我建议`each_line`您在读取时使用和处理每一行。

除非您有充分的理由，否则我不建议您将 , 或任何其他此类外部实用程序带入图片*，*因为`grep`它们会使您的代码的可移植性降低，并使您面临可能难以诊断的故障。`sed`

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T21:21:04.290

如果您使用的是 Ruby，则无需担心性能。该语言非常适合逐行读取文件的迭代方法，并且工作得非常好。只要您按照设计的方式使用语言，您就可以让口译员担心性能。任务完成。

如果需要一种特定的 readLargeFileFast 方法，那应该是因为它确实以某种方式阻碍了程序。现在，您编写一个 C 程序来执行此操作，并将`popen`其作为 ruby​​ 代码中的一个单独进程。您可以调用它`read_large.c`并（也许）使用命令行参数来告诉它如何表现。

这支持了脚本语言用于快速开发而不是快速运行的想法。因此，开发人员可以通过在 Ruby 之类的程序中快速“原型化”程序来提高生产力，并且只有在以后重写组件才能保证一些低级代码。然而，通常，一旦它在脚本中工作，就根本不需要做任何其他事情。

[Ruby Docs](http://www.ruby-doc.org/core-1.9.3/IO.html#method-c-popen)描述了启动一个单独的进程并将其视为一个文件。这很容易！一个好的开始是 The Art of Linux Programming 关于[程序模块化](http://www.faqs.org/docs/artu/ch01s06.html#id2877684)的介绍性段落。本书还提供了一个使用 linux 标准流编辑器（称为[sed](http://unixhelp.ed.ac.uk/CGI/man-cgi?sed) ）的绝佳示例，您现在可以从 Ruby 中使用它。

如果您需要解析或编辑大量文本，那么围绕 sed 的功能编写了许多解释器或编辑器。此外，如果您不了解 C，编写一些超级高效的东西可能会为您节省很多精力。Bruce Barnett[的 SED 简介很好。](http://www.grymoire.com/Unix/Sed.html)*

# python - 处理返回的 JSON 数据中的 Unicode 字符串

> ID：14654585
> 
> 赞同：0
> 
> 时间：2013-02-01T20:38:26.363
> 
> 标签：python, json, unicode

我正在尝试从获取的 JSON 中打印数据，但是数据具有 unicode 解码的数据。如何对其进行编码（参见示例）以正确显示。我对 python 很陌生，无法让它工作，我在命令行终端上使用 Windows 7、python 2.7。谢谢！

示例：结果>>标题：

'R\u00f6yksopp - 49 Percent' 必须将其打印为 'Röyksopp - 49 Percent'

```
"title": "R\u00f6yksopp - 49 Percent", 
```

JSON：

```
"results": [{
        "style": ["House", "Electro", "Synth-pop"],
        "thumb": "http://api.discogs.com/image/R-90-530519-1236701656.jpeg",
        "format": ["CD", "Maxi-Single"],
        "country": "Europe",
        "barcode": ["5 028589 023420", "BEL/BIEM", "LC 3098"],
        "uri": "/R%C3%B6yksopp-49-Percent/master/30161",
        "label": ["Virgin", "Labels", "Wall Of Sound"],
        "catno": "0946 3378752 0",
        "year": "2005",
        "genre": ["Electronic"],
        "title": "R\u00f6yksopp - 49 Percent",
        "resource_url": "http://api.discogs.com/masters/30161",
        "type": "master",
        "id": 30161
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T23:13:15.627

环境：Windows 7，默认代码页 = 850，Python 2.7.3

使用您输入的精简版：

```
>>> import json
>>> js = """{
...         "style": ["House", "Electro", "Synth-pop"],
...         "title": "R\u00f6yksopp - 49 Percent",
...         "id": 30161
...     }"""
>>>
>>> j = json.loads(js)
>>> j
{u'style': [u'House', u'Electro', u'Synth-pop'], u'id': 30161, u'title': u'R\xf6yksopp - 49 Percent'}
>>> j['title']
u'R\xf6yksopp - 49 Percent'
>>> print j['title']
Röyksopp - 49 Percent
>>> 
```

# java - 在 GUI 地图 Java 上平移

> ID：14654586
> 
> 赞同：0
> 
> 时间：2013-02-01T20:38:36.387
> 
> 标签：java, swing, animation, awt, jscrollpane

这是我的第一篇文章，如果需要任何其他信息，请告诉我。我正在用 Java GUI 制作游戏，但有两个希望快速的问题。我目前可以使用以下代码在屏幕上绘制地图并在地图周围平移：私有类 MoveMap 实现 MouseMotionListener{

```
 @Override
    public void mouseDragged(MouseEvent e) {

    }

    @Override
    public void mouseMoved(MouseEvent e) {

        if(e.getX() > swidth-30){
            if(xmod+(columns*30) > swidth){
                xmod-=30;
                repaint();
            }
        }
        else if(e.getX() < 30){
            if(xmod < 0){
                xmod+=30;
                repaint();
            }
        }
        else if(e.getY() > sheight-30){
            if(ymod+(rows*30) > sheight){
                ymod-=30;
                repaint();
            }
        }
        else if(e.getY() < 30){
            if(ymod < 0){
                ymod+=30;
                repaint();
            }
        }
        else{

        }

    }

} 
```

唯一的问题是鼠标必须在屏幕边缘不断移动才能不断平移。我的问题是是否有办法让鼠标位于屏幕边缘并在更新图形时不断平移？我的第二个问题是这是否也适用于移动的角色？我想也许一个线程是一个可能的解决方案，但不熟悉使用它们。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T20:44:10.700

我可以想到两种方法来实现这一点。

你可以...

启动`javax.swing.Timer`将根据需要更新 x/y 位置并在鼠标进入屏幕边缘的给定距离时重新绘制屏幕。当鼠标移出时，您显然会停止计时器；）

你可以...

使用背景`Thread`监控鼠标位置，当它进入“触发”区域时，将更新 x/y 值并触发重绘，确保重新同步对 EDT 的调用；）

# javascript - 如何在不突出显示/选择文本的情况下单击其中包含文本的 div

> ID：14654591
> 
> 赞同：2
> 
> 时间：2013-02-01T20:38:45.233
> 
> 标签：javascript, jquery, css

> **可能重复：**
> [在 javascript 中单击其包含的 div 时防止突出显示文本的最佳方法是什么？](https://stackoverflow.com/questions/139157/what-is-the-best-way-to-prevent-highlighting-of-text-when-clicking-on-its-contai)

我正在用文本按钮（div）构建我自己的简单`+`计数器`-`。我有它在另一个 div 上执行 .focus() 的位置，`.countDisplay`它应该将焦点*从*计数按钮上移开。最好的例子： http: [//jsbin.com/uxewej/2/edit](http://jsbin.com/uxewej/2/edit)如果你`+`连续点击按钮几次，它有时看起来像这样：

![在此处输入图像描述](../Images/7aa29c2911d2005e836981faadfc7635.png)

如果用户连续单击任一按钮，是否有办法防止文本被选择/突出显示？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T20:42:02.977

您可以使用 CSS 来解决问题：http: [//jsbin.com/uxewej/8/](http://jsbin.com/uxewej/8/)

```
html{
  -webkit-user-select:none;
  -khtml-user-select:none;
  -moz-user-select:none;
  -ms-user-select:none;
  user-select:none;
} 
```

`html`如果您需要让用户选择某些内容，请不要使用CSS 选择器。

**更新**

通过 FF、Chrome 和 IE9 测试

补充 CSS 声明的通用解决方案

```
function toggleEnableSelectStart(enable) {
    document.onmousedown = function (e) { return enable; };
    document.onselectstart = function (e) { return enable; };
}

jQuery(document).ready(function () {
    //Disable default text selection behavior
    toggleEnableSelectStart(false);

    //Let inputs text selection possible
    jQuery("input[type=text]").focusin(function () { toggleEnableSelectStart(true); });
    jQuery("input[type=text]").mouseover(function () { toggleEnableSelectStart(true); });
    jQuery("input[type=text]").focusout(function () { toggleEnableSelectStart(false); });
    jQuery("input[type=text]").mouseout(function () { toggleEnableSelectStart(false); });
}); 
```

对不起作者，我不记得我有一天在哪里找到的，但它很聪明！

**更新 2**

为避免仅在您的按钮上单击选择行为，请删除 CSS 技巧并使用

[http://jsbin.com/uxewej/11/edit](http://jsbin.com/uxewej/11/edit)

```
function toggleEnableSelectStart(enable) {
    document.onmousedown = function (e) { return enable; };
    document.onselectstart = function (e) { return enable; };
}

jQuery(document).ready(function () {
//Disable default text selection behavior
toggleEnableSelectStart(false);

//Let inputs text selection possible
jQuery(".countButton").focusin(function () { toggleEnableSelectStart(false); });
jQuery(".countButton").mouseover(function () { toggleEnableSelectStart(false); });
jQuery(".countButton").focusout(function () { toggleEnableSelectStart(true); });
jQuery(".countButton").mouseout(function () { toggleEnableSelectStart(true); });
}); 
```

**更新 3**

如果您想禁用对选定元素的选择，请点击[此链接](https://stackoverflow.com/questions/2700000/how-to-disable-text-selection-using-jquery)

```
(function($){
    $.fn.disableSelection = function() {
        return this
                 .attr('unselectable', 'on')
                 .css('user-select', 'none')
                 .on('selectstart', false);
    };
})(jQuery); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T20:43:21.073

我个人会使用按钮标签而不是跨度，它在语义上更有意义，并且在这种情况下也能更好地工作。当然可以解决您的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T20:44:23.800

您只需要禁用文本选择。jQuery可以做到这一点，而且应该是跨浏览器的：

```
$(".countButton").attr("unselectable", "on")
.on("selectstart", false)
.css("user-select", "none"); 
```

# android - Android 中的 Listview 在某些行的顶部和底部添加了额外的空间

> ID：14654593
> 
> 赞同：3
> 
> 时间：2013-02-01T20:38:53.460
> 
> 标签：android, android-layout

我的应用程序的一个屏幕显示了一个包含 6 列的列表视图，第六个是包含用户创建的图片或草图的 imageView。这是 listView 行的代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:paddingTop="2dp"
    android:paddingBottom="2dp" >

    <TextView android:id="@+id/surveyColumn1"
        android:textSize="13sp"
        android:layout_width="0dip"
        android:layout_weight="0.105"
        android:layout_height="wrap_content"/>

    <TextView android:id="@+id/surveyColumn2"
        android:textSize="13sp"
        android:layout_width="0dip"
        android:layout_weight="0.137"
        android:layout_height="wrap_content"/>

    <TextView android:id="@+id/surveyColumn3"
        android:textSize="12sp"
        android:layout_width="0dip"
        android:layout_weight="0.25"
        android:layout_height="wrap_content"/>

    <TextView android:id="@+id/surveyColumn4"
       android:textSize="13sp"
        android:layout_width="0dip"
        android:layout_weight="0.153"
        android:layout_height="wrap_content"/>

    <TextView android:id="@+id/surveyColumn5"
        android:textSize="13sp"
        android:layout_width="0dip"
        android:layout_weight="0.153"
        android:layout_height="wrap_content"/>

    <ImageView android:id="@+id/surveyColumn6"
        android:layout_width="0dip"
        android:layout_weight="0.202"
        android:layout_height="wrap_content"
        android:paddingTop="0dp"
        android:paddingBottom="0dp"
        android:scaleType="centerInside"
        android:layout_gravity="center"
        android:contentDescription="@string/pictureHeader"/>

</LinearLayout> 
```

这种设置效果很好，除了一种情况：显示的图像是相机拍摄的垂直方向的照片。在这种情况下，列表视图会在行内图像的上方和下方抛出一堆空白区域。在活动中，我使用 custumViewBinder 使用从这里获得的代码将图像显示为位图：http: [//developer.android.com/training/displaying-bitmaps/load-bitmap.html](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

我发现摆脱空间的唯一方法是为 imageView 设置一个静态高度，我不想这样做，因为有些行没有图像。任何能弄清楚发生了什么的人都是我的英雄。

编辑：这是我调用以将图像显示为位图的类：

```
public class customBitmap {

    public customBitmap(String pathName, int width, int height, ImageView view) {
        final BitmapFactory.Options options = new BitmapFactory.Options();
        options.inJustDecodeBounds = true;
        BitmapFactory.decodeFile(pathName, options);

        options.inSampleSize = calculateInSampleSize(options, width, height);

        options.inJustDecodeBounds = false;
        Bitmap bitmap = BitmapFactory.decodeFile(pathName, options);

        //Check if bitmap was created; if so, display it in the imageView
        if(bitmap == null)
            Log.w("UI Thread", "Null bitmap at moto.sitesurvey.customBitmap:35");
        else
            view.setImageBitmap(bitmap);
    }

    public int calculateInSampleSize(BitmapFactory.Options options, int reqWidth, int reqHeight){
        final int height = options.outHeight;
        final int width = options.outWidth;
        int inSampleSize = 1;

        if(height > reqHeight || width > reqWidth) {
            if(width > height)
                inSampleSize = Math.round((float)height / (float)reqHeight);
            else
                inSampleSize = Math.round((float)width / (float)reqWidth);
        }

        return inSampleSize;
    }

} 
```

在活动中，我为宽度和高度传递了 200 和 150 的值。我的问题似乎是，当我几个月前最初编写此代码时，我只将它设计为适用于横向图片，现在它也需要适用于纵向图片。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T18:41:52.303

[根据我在 r/androiddev 上的帖子](http://www.reddit.com/r/androiddev/comments/17vna8/i_posted_a_question_in_stackoverflow_that_hasnt/)中 stoney80 的建议，我添加了该行

```
android:adjustViewBounds="true" 
```

到 imageVew，这让它完全符合我的期望。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T20:04:39.803

您是否在将图像放入视图之前调整它们的大小？如果是这样，请检查图像的最佳尺寸，并尝试将垂直相机拍摄的位图调整为该尺寸。

如果这对您没有帮助，我可以查看您的图像视图和位图代码？

# highcharts - Highstock 标记点不会显示在具有分组数据的线系列上

> ID：14654596
> 
> 赞同：0
> 
> 时间：2013-02-01T20:39:07.540
> 
> 标签：highcharts, highstock

使用`highstock v1.2.2`我正在尝试在大约 8000 个点的线系列上设置一些红色标记点。

但是，标记点仅在未对数据进行分组时显示。

当我增加导航器的大小并对数据进行分组时，不再显示标记点。

我搜索了`highstock api`并没有发现任何有用的东西。我发现的只是这个问题：[修复了从 non 切换后点标记消失的问题](https://github.com/highslide-software/highcharts.com/commit/7d562fa841d033153ca5e901a6660c379aa6318c)，大约一年前修复了。

我也尝试增加`turboThreshold`属性，但没有运气。那么，当对点进行分组时，如何在大型数据集上显示标记点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T06:26:57.113

你说你设置了“几个”标记点。在这种情况下，当这些单独的点与其他点组合时，标记将消失，因为全局选项是禁用标记。

作为替代方案，您应该考虑为要强调的点使用标志。或者为了使它们看起来像常规点标记，您甚至可以在线系列顶部使用散布系列。

# php - 使用正则表达式将通配符数据转换为多维数组

> ID：14654598
> 
> 赞同：1
> 
> 时间：2013-02-01T20:39:19.440
> 
> 标签：php, html, regex

所以我正在获取一个 html 文件的内容，并且我想将 html 元素中的特定信息提取到一个多维数组中。问题是我对正则表达式没有太多经验。

列表中有许多艺术家，这就是每个艺术家的格式。

```
<li class="artist"><a href="*I NEED THIS PATH*">*AND THIS TEXT*</a></li> 
```

这是我到目前为止所拥有的：

```
$contents = file_get_contents('somefile.txt'); 
$artists = preg_split('/^<li class="artist"><a href="(.*)">(.*)<\/a><\/li>$/', $contents);
$artistInfo = array();

foreach( $artists as $artist ) :

    preg_match('/href="(.*)">/', $element, $matchPath); // link paths
    preg_match('/">(.*)<\/a><\/li>/', $element, $matchName); // artist names

    array_push( $artistInfo, array( $matchName, $matchPath ) ); // put info into array

endforeach;

print_r($artistInfo); 
```

preg_split 没有像我希望的那样工作，所以它把其他所有东西都扔掉了，但我也不知道我的 preg_match 表达式是否正确。请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T20:45:11.047

不要为此使用正则表达式。[`DOMDocument`](http://php.net/manual/en/class.domdocument.php)是你的朋友：

```
$artistInfo = array();
$dom = new DOMDocument;
$dom->loadHTML( file_get_contents('somefile.txt') );

$xPath = new DOMXpath($dom);

foreach ( $xPath->query('//li[@class="artist"]/a') as $anchor ) {
    $artistInfo[] = array(
        $anchor->textContent,
        $anchor->getAttribute('href')
    );
} 
```

在这里查看它的实际操作：[http ://codepad.viper-7.com/NziHBo](http://codepad.viper-7.com/NziHBo)

# git - Git：部署到具有不同 Web 根目录名称的环境

> ID：14654600
> 
> 赞同：1
> 
> 时间：2013-02-01T20:39:27.223
> 
> 标签：git, deployment, development-environment, expressionengine, production-environment

我在多个环境中使用 Git 设置了 ExpressionEngine 站点：本地、开发和生产。

我有几个位于 web 根目录之上的目录，因此 web 根目录本身位于 git repo 中，如下所示：

*   .git
*   系统
*   第三者
*   模板
*   public_html（网络根目录）
    *   资产
        *   css
        *   js
        *   图像
    *   主题
    *   索引.php

现在，我的开发和生产环境拥有 2 个独立的托管服务提供商，并且它们的 Web 根目录彼此具有不同的名称。例如，开发被命名为`public_html`，但生产被命名为`content`。

当 Web 根目录具有不同的名称时，如何部署到这两个环境？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T00:19:22.903

在服务器上使用符号链接将 Web 根目录指向适当的目录是一项历史悠久的技术。假设你给你的 Git Repo 取了一个明显的名字：clientsite.com，所以在那个文件夹中你有：

*   .git
*   系统
*   第三者
*   模板
*   web_root
    *   资产
        *   css
        *   js
        *   图像
    *   主题
    *   索引.php
    *   管理员.php

该文件夹将上传到您的登台/生产服务器。然后，在登台服务器上，您将创建一个指向名为 public_html 的 web_root 的符号链接：

`ln -s clientsite.com/web_root public_html`

然后在生产服务器上，您将创建一个名为 content 的指向 web_root 的符号链接：

`ln -s clientsite.com/web_root content`

* * *

现在，它的精彩之处在于，如果您非常聪明并且正在使用 MSM，您可以创建 config.php 和 index.php 文件，允许您在该 EE 安装中为您的所有域使用 web_root 并创建指向它的符号链接对于每个站点。例如：

```
ln -s clientsite.com/web_root siteone_html

ln -s clientsite.com/web_root sitetwo_html 
```

然后在 index.php 中，查看 HTTP_HOST 服务器配置以设置 site_name：

```
switch ( $_SERVER['HTTP_HOST'] ) {

    case 'siteone.com' :
    case 'dev.siteone.com' :
        $assign_to_config['site_name']  = 'siteone';
    break;
    case 'sitetwo.com' :
    case 'dev.sitetwo.com' :
        $assign_to_config['site_name']  = 'site two';
    break;
} 
```

最后，您的 config.php 可以做一些非常相似的事情：

```
$config['site_index']   = "";
$config['site_url']     = "http://".$_SERVER['HTTP_HOST'];
$config['server_path']  = $_SERVER['DOCUMENT_ROOT'];
$config['cp_url']       = $config['site_url']."/".$config['system_folder'].'/index.php';

....stuff here...

switch ( $_SERVER['HTTP_HOST'] ) {

    // production
    case 'siteone.com' :
        $config['cookie_domain'] = ".siteone.com";
        $db['expressionengine']['hostname'] = "111.222.111.22";
        $db['expressionengine']['username'] = "siteone";
        $db['expressionengine']['password'] = "passone";
        $db['expressionengine']['database'] = "database_live";
        $db['expressionengine']['db_debug'] = FALSE; 
    break;

    // staging
    case 'dev.siteone.com' :
        $config['cookie_domain'] = "dev.siteone.com";
        $db['expressionengine']['hostname'] = "333.444.555.22";
        $db['expressionengine']['username'] = "siteone";
        $db['expressionengine']['password'] = "passone";
        $db['expressionengine']['database'] = "database_dev";
        $db['expressionengine']['db_debug'] = FALSE; 
    break;
} 
```

通过这种方式，您可以拥有全局配置选项，然后也可以拥有特定于站点的选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T21:20:14.607

研究使用符号链接来创建虚假的 webroots

我有以下设置：

**生产**

*   public_site（实际的 git 仓库）
    *   公共（网络根）
    *   系统（ee系统）
    *   模板
*   public_html（指向上述公用文件夹的符号链接）

**分期**

*   登台站点
    *   公共（网络根）
    *   系统（ee系统）
    *   模板
*   staging_html（指向上述公用文件夹的符号链接）

然后，您将服务器设置为将适当的主机指向适当的 _html 目录。

# sql - 创建视图时出错

> ID：14654611
> 
> 赞同：0
> 
> 时间：2013-02-01T20:40:01.793
> 
> 标签：sql, view

我有表`t1(name,phone,adress)`并想创建视图`vw_1`。我正在寻找类似的基本逻辑：-

```
create view vw_1 (col1,col2)
as
if(t1.name is null)then 
select adress,phone from t1
else
select name,phone from t1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T20:41:57.983

使用[coalesce](http://msdn.microsoft.com/en-gb/library/ms190349.aspx)函数（doc 用于 SQL Server，但它是一个经典的 ANSI 运算符，并且适用于我所知道的所有 DBMS）。

```
create view vw_1 (col1,col2)
    as
    select coalesce(name, adress), phone 
    from t1 
```

如果您的意思是“NULL OR EMPTY”，那么

```
CREATE VIEW vw_1(col1, col2)
  AS
  SELECT CASE WHEN COALESCE(name, '') = '' THEN adress else name END,
  phone
  FROM t1 
```

见[sqlFiddle](http://sqlfiddle.com/#!2/50adb/2)

# javascript - jquery val - 无法在 div 上按预期工作

> ID：14654623
> 
> 赞同：-3
> 
> 时间：2013-02-01T20:40:39.170
> 
> 标签：javascript, jquery, html

我有这个代码：

```
 function discuss(thema){
     $('#prep').val(thema + '<div>answer button</div>');
    } 
```

HTML：

```
<div id="quatschen"> 
<div id="prep"> </div>
</div> 
```

它没有设置 的值`prep`，如果我单击`discuss()`功能，则不会发生任何事情。

`discuss`在这里调用：

```
<input type="text" name="thema" id="thema" />
<a href="javascript:discuss($('#thema').val())"> discuss me </a> 
```

如果我更改`val()`为`append()`，它正在工作。为什么`val`不在这里工作？

感谢帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T20:41:14.857

使用`.html()`..`.val`仅用于输入字段。

```
$('#prep').html(thema + '<div>answer button</div>'); 
```

# r - 如何计算组合数？

> ID：14654624
> 
> 赞同：7
> 
> 时间：2013-02-01T20:40:45.883
> 
> 标签：r, combinations

> **可能重复：**
> [如何计算 R 中的组合和排列？](https://stackoverflow.com/questions/7906332/how-to-calculate-combination-and-permutation-in-r)

当我尝试使用`Combinat`包和`combn`命令计算 R 中的组合时，它给了我所有可能的组合。但我只想返回组合的数量，即我想在 10C2 的情况下得到 45。我应该怎么办？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-02-01T21:40:22.993

使用基本功能`choose`：

```
choose(10,2)
#[1] 45 
```

# javafx-2 - 使用 Weld 引导 Javafx 2.0

> ID：14654627
> 
> 赞同：0
> 
> 时间：2013-02-01T20:40:52.017
> 
> 标签：javafx-2, weld

我正在尝试使用 Weld-SE 引导一个小型 javafx 应用程序。`@Inject`如果我删除注释`Menubar`并手动实例化它，我就能够运行应用程序。但是在我添加@Inject 的那一刻，应用程序抛出异常。下面列出的是注入点和生产者方法。这就是我所做的所有配置，我错过了什么吗？

注入点

```
@Inject MenuBar menuBar 
```

具有生产者方法的类

```
public class ComponentProducer {

    @Produces
    public MenuBar createMenuBar(){
        return new MenuBar();
    }

} 
```

例外

```
 491 [JavaFX Application Thread] INFO org.jboss.weld.Bootstrap - WELD-000101 Transactional services not available. Injection of @Inject UserTransaction not available.    Transactional observers will be invoked synchronously.
    8868 [JavaFX Application Thread] WARN org.jboss.interceptor.model.InterceptionTypeRegistry - Class 'javax.ejb.PostActivate' not found, interception based on it is not enabled
    8868 [JavaFX Application Thread] WARN org.jboss.interceptor.model.InterceptionTypeRegistry - Class 'javax.ejb.PrePassivate' not found, interception based on it is not enabled
    Exception in Application start method
    Exception in thread "main" java.lang.RuntimeException: Exception in Application start method
at com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherImpl.java:399)
at com.sun.javafx.application.LauncherImpl.access$000(LauncherImpl.java:47)
at com.sun.javafx.application.LauncherImpl$1.run(LauncherImpl.java:115)
at java.lang.Thread.run(Thread.java:722)

    Caused by: java.lang.NullPointerException
at net.sourceforge.squirrel_sql.client.MainScene.<init>(MainScene.java:26)
at net.sourceforge.squirrel_sql.client.FXApplication.startup(FXApplication.java:176)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.jboss.weld.util.reflection.SecureReflections$13.work(SecureReflections.java:304)
at org.jboss.weld.util.reflection.SecureReflectionAccess.run(SecureReflectionAccess.java:54)
at org.jboss.weld.util.reflection.SecureReflectionAccess.runAsInvocation(SecureReflectionAccess.java:163)
at org.jboss.weld.util.reflection.SecureReflections.invoke(SecureReflections.java:298)
at org.jboss.weld.introspector.jlr.WeldMethodImpl.invokeOnInstance(WeldMethodImpl.java:200)
at org.jboss.weld.introspector.ForwardingWeldMethod.invokeOnInstance(ForwardingWeldMethod.java:59)
at org.jboss.weld.injection.MethodInjectionPoint.invokeOnInstanceWithSpecialValue(MethodInjectionPoint.java:194)
at org.jboss.weld.event.ObserverMethodImpl.sendEvent(ObserverMethodImpl.java:241)
at org.jboss.weld.event.ObserverMethodImpl.notify(ObserverMethodImpl.java:216)
at org.jboss.weld.manager.BeanManagerImpl.notifyObservers(BeanManagerImpl.java:654)
at org.jboss.weld.manager.BeanManagerImpl.fireEvent(BeanManagerImpl.java:647)
at org.jboss.weld.manager.BeanManagerImpl.fireEvent(BeanManagerImpl.java:641)
at org.jboss.weld.event.EventImpl.fire(EventImpl.java:93)
at net.sourceforge.squirrel_sql.client.Main.start(Main.java:180)
at com.sun.javafx.application.LauncherImpl$5.run(LauncherImpl.java:315)
at com.sun.javafx.application.PlatformImpl$4.run(PlatformImpl.java:174)
at com.sun.javafx.application.PlatformImpl$3.run(PlatformImpl.java:141)
at com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method)
at com.sun.glass.ui.gtk.GtkApplication$2$1.run(GtkApplication.java:79)
... 1 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T01:01:30.367

是因为您试图在构造函数或初始化程序块中使用 menuBar 吗？

如果是这样，请尝试使用 Initializable 并在初始化中使用它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T21:02:04.077

ShaggyInjun，您指的是[Initializable](http://docs.oracle.com/javafx/2/api/javafx/fxml/Initializable.html)接口，它表明您正在尝试与[FXMLLoader](http://docs.oracle.com/javafx/2/api/javafx/fxml/FXMLLoader.html#FXMLLoader%28%29)集成。以下所有信息均假设您使用 FXML 进行接口定义，并且仅讨论将值注入 FXML 控制器的问题。

`FXMLLoader`具有控制器工厂的概念，您应该使用它来将控制器实例化与您的依赖注入系统集成。[在 Oracle 的Mastering FXML Tutorial](http://docs.oracle.com/javafx/2/fxml_get_started/whats_new.htm#BGGEABGA)中有一个关于控制器工厂的简短讨论。Andy[在他的博客中为 Guice 演示了这样一个工厂的定义，并且](http://andrewtill.blogspot.com/2012/07/creating-javafx-controllers-using-guice.html)[在 github 上](https://github.com/cathive/fx-guice#readme)有一个Guice 在 FXML 中的全面集成。

* * *

对于 Weld，您将需要实现类似的控制器工厂回调机制来实现 Weld 提供的依赖注入功能。您在评论中链接的 Matthieu Brouillard 的文章[FXML & JavaFX—Fueled by CDI & JBoss Weld](http://java.dzone.com/articles/fxml-javafx-powered-cdi-jboss)似乎提供了初始化 Weld 和将 Weld 接口到 FXMLLoader 控制器工厂机制所需的所有信息。具体来说，以下代码是 Andy Till 基于 FXML 的注入机制的 Weld 等效代码：

```
public class FXMLLoaderProducer {
  @Inject Instance<Object> instance;
  @Produces public FXMLLoader createLoader() {
    FXMLLoader loader = new FXMLLoader();
    loader.setControllerFactory(new Callback<Class<?>, Object>() {
      @Override public Object call(Class<?> param) {
        return instance.select(param).get();
      }
    });
    return loader;
  }
} 
```

即使使用了 FXMLoader 控制器工厂，我相信是 FXMLLoader 正在实例化控制器。因此，在这些情况下，您不应该使用注释，`@PostConstruct`因为它们仅在依赖注入系统维护对象的生命周期时才适用——如果 FXMLLoader 创建控制器则情况并非如此。

[还有另一种选择，即使用setController](http://docs.oracle.com/javafx/2/api/javafx/fxml/FXMLLoader.html#setController%28java.lang.Object%29)显式设置 FXMLLoader 使用的控制器。这将允许您让您的依赖注入系统使用它希望的任何方式实例化（并注入）控制器，然后您可以随后将实例化的控制器传递给您的 FXMLLoader。在这种情况下，像这样的注释`@PostConstruct`应该可以工作，因为依赖注入系统现在正在维护对象的生命周期（并且`@PostConstruct`将在创建控制器之后和将控制器传递给 FXMLLoader 之前由依赖注入系统调用）。

* * *

我将在此处发布基于 Andy 的 Guice 解决方案，因为它是一个小而简单的示例，说明如何在 Guice 中完成类似的注入（以防他的博客离线）：

```
class GuiceControllerFactory implements Callback<Class<?>, Object> {
  private final Injector injector;
  public GuiceControllerFactory(Injector anInjector) {
    injector = anInjector;
  }     
  @Override public Object call(Class<?> aClass) {
    return injector.getInstance(aClass);
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T20:13:06.117

EJB 文档指出，使用 @PostConstruct 注释的方法将在注入完成后调用，这是预期变量注入的方法。

[@PostConstruct](http://docs.oracle.com/javaee/5/api/javax/annotation/PostConstruct.html)

`The PostConstruct annotation is used on a method that needs to be executed after dependency injection is done to perform any initialization.`

然而，期望变量在内部初始化`initialize`似乎确实有效。

根据 Initializable 文档，initialize 是`Called to initialize a controller after its root element has been completely processed.` [Initializable](http://docs.oracle.com/javafx/2/api/javafx/fxml/Initializable.html)

**初始化和@PostConstruct 的调用顺序**

我认为可以安全地理解初始化的调用与对象构造没有任何关系。相反，initialize 在当前节点图的根已被完全处理时调用，因此可以处理诸如事件处理程序等之类的`document.onload`东西`jQuery(document).ready()`。如果您要在对象图准备好之前尝试附加事件处理程序，则很有可能会看到空指针，因为该节点不是对象图，因此无法附加事件处理程序。

因此，在将对象加载到场景图之前，您将实例化一个对象（直接或通过注入）。因此 @PostConstruct 在初始化之前被调用。但是，如果您直接实例化对象，那么调用注解 @PostConstruct 的方法的责任就落在了您身上，否则不会发生后期处理。

结论：可以肯定的是，initialize 总是在使用 @PostConstruct 注释的方法之后调用。

**编辑**

@Jewelsea 指出了一些我没有在上面列出的假设。所以就在这里，上面对我有用的情况。

*   将 FXML 文件用于视图。
*   在 fxml 文件中指定的控制器名称。

# php - PHPUnit：未测试方法的通知

> ID：14654629
> 
> 赞同：0
> 
> 时间：2013-02-01T20:40:59.903
> 
> 标签：php, unit-testing, reflection, phpunit

PHPUnit 是否具有反映目标对象的功能（或外部方式），并且在它没有测试的方法上失败或 markTestIncomplete()'ish？

To be clear; this would be in a situation where a test suite exists. A developer adds a new method, but neglects to write a test for it. Currently, it does not affect the unit testing process what-so-ever. I am looking for a way to change this.

Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:24:58.320

PHPUnit 可以将代码覆盖率数据记录到带有序列化数据的文件中，您可以稍后对其进行分析。通过这种方式，您可以找到未经测试的方法：

```
 $ phpunit --coverage-php coveragedata.ser . 
```

当类/方法未经测试或代码覆盖率低于阈值时，PHPUnit 3.7 本身无法失败。

# html - HTML 5 初学者。如何实现这种布局？

> ID：14654636
> 
> 赞同：1
> 
> 时间：2013-02-01T20:41:37.257
> 
> 标签：html, web

我是 html/html5 新手，但不是编程新手，我正在尝试编写我的个人网站。我已经阅读了许多关于基础知识的资源和教程，但我正在寻找一些关于如何开始实现我想要的布局的技巧。

在我的布局（[此处](http://i49.tinypic.com/2u94kzs.jpg)）中，我希望将页面的左半部分作为一个固定的导航面板，其中的图像突出显示当前页面，然后使用每个选项，右侧刷新到一个新的独立滚动页面，并且突出显示图像动画在导航面板中找到新选项。

我应该如何开始实现这样的目标？我只需要朝着正确的方向推动元素/脚本的类型/我需要实现的任何东西。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T20:49:50.227

您将菜单放置在设置为的元素中`position: fixed;`

固定位置将确保菜单不会在页面上移动，无论是否滚动其余部分。

然后使用javascript，您可以在窗口上添加一个“滚动”事件侦听器（或者只是您想要观看滚动的div）。当它触发时，检查 scrollY 属性以查看它在什么范围内，并可能突出显示菜单中的某些项目。

希望这会引导您走上正确的道路。这是一个广泛的问题，所以这里有一个广泛的答案！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T20:59:04.427

这是一个简单的示例，可帮助您入门：

[jsFiddle](http://jsfiddle.net/kQGzR/)

当您滚动时，您会注意到右侧的文本滑出屏幕，但绿色框保持在同一位置。这是通过一点 CSS 完成的。

左侧导航 div 的样式为`position: fixed;`. 这使导航 div 始终保持在一个位置。

相比之下，右侧的内容 div`position: absolute;`使用了`left: 25%`set 样式。导航 div 和内容 div 的宽度以百分比设置。这允许内容占用相同的相对屏幕空间，无论窗口更大或更小。您的内容将适应您的观众分辨率。

使用`<iframe>`遗嘱是更改右侧内容 div 中内容的一种可能解决方案。另一种是使用`ajax`，但它变得更加高级，因为您现在必须了解客户端和服务器脚本才能从中获得全部好处。

[iFrame](http://www.w3schools.com/tags/tag_iframe.asp)

[阿贾克斯](http://www.w3schools.com/ajax/default.ASP)

如果您的信息是静态的并且不会经常更改，您可以考虑使用附加到内容 div 的多个模板制作一个单页 Web 应用程序。

[jQuery](http://jquery.com/)

[jQuery 模板插件](http://jtemplates.tpython.com/)

jQuery 也非常适合学习 JavaScript，并且让构建动态客户端应用程序变得轻而易举。

他们也有`ajax`支持：

[jQuery 阿贾克斯](http://api.jquery.com/jQuery.ajax/)

希望这可以帮助。

祝你好运，编码快乐！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T23:52:08.897

我[赞同@Jeromy French](https://stackoverflow.com/users/1430996/jeromy-french)的建议——我认为[Bootstrap](http://twitter.github.com/bootstrap/)、[Foundation](http://foundation.zurb.com)和其他响应式框架对它们有很大的帮助。

这是使用 Bootstrap 的示例：http: [//jsfiddle.net/panchroma/2dF6s/](http://jsfiddle.net/panchroma/2dF6s/)

除了 HTML5 之外，您还可以获得适用于从智能手机到宽桌面的所有内容的布局。这不是获得移动友好网站的唯一方法，但它是几个不错的选择之一。

我认为，随着智能手机和平板电脑的发展，你对响应式网站和移动网站了解得越多，你的未来就会越好。

我认为所有响应式框架都使用基于网格的系统，下面是 Bootstrap 的 HTML 外观：

```
<div class="container">
<div class="row-fluid" align="center">
    <div class="span12">
        <h1>Header</h1>
    </div><!-- close span12 -->
</div> <!-- close row -->

<div class="row">

<div class="span3" id="side-nav" data-spy="affix" data-offset-top="200">

<h5>Option 1</h5>
<h5>Option 2</h5>
<h5>Option 3</h5>
<h5>Option 4</h5>
</div> <!-- end span3 -->

<div class="span9">
<p>Main Content Here </p>
 </div> <!-- end span9 -->
</div><!-- end row -->
</div><!-- end containter --> 
```

祝你好运！

# iphone - reloadData 只刷新一行

> ID：14654637
> 
> 赞同：0
> 
> 时间：2013-02-01T20:41:41.500
> 
> 标签：iphone, ios, objective-c, xcode, ipad

我有一个 4 行的分组表视图。我对如何在两个视图之间做事进行了相当大的改革，现在 reloadData 表现得很奇怪。它只会刷新一行中的数据。（最后一个），其他都没有。

我在 viewDidAppear 方法（我调用 reloadData）中检查了我的值，并且我的所有值都已更新。

编码..

```
 - (void)viewDidAppear:(BOOL)animated
{
   [super viewWillAppear:animated];
   // reload the table data
   [self.tableView reloadData];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{     
   // Set up the cell...
  static NSString *CellWithIdentifier = @"Cell";
  UITableViewCell *cell = (UITableViewCell *)[tableView dequeueReusableCellWithIdentifier:CellWithIdentifier];
if (cell == nil)
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellWithIdentifier];
    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    cell.textLabel.text = [_tableGroup.options objectAtIndex:rowcount];
    cell.tag = rowcount;
    rowcount++;

    //label for currently selected/saved setting
    _currentSetting = [[BaseLabel alloc] initWithFrame:CGRectMake(160, 8, 115, 25)];
    [_currentSetting setFont:[UIFont systemFontOfSize:14]];
    _currentSetting.backgroundColor = [UIColor clearColor];
    _currentSetting.textColor = [UIColor blueColor];
    _currentSetting.textAlignment = NSTextAlignmentRight;
}

if (cell.tag == 0) {
    _currentSetting.text = [NSString stringWithFormat:@"%@ mi",[settings.val1 stringValue]];

}
else if(cell.tag == 1)
{
    _currentSetting.text = [NSString stringWithFormat:@"%@ items",[settings.val2 stringValue]];

}
else if(cell.tag == 2) 
{
    _currentSetting.text = [NSString stringWithFormat:@"%@ items",[settings.val3 stringValue]];

}

[cell.contentView addSubview:_currentSetting];

return cell;
} 
```

我已经完成了 NSLog，一切都被调用，因为它应该在 reloadData 上，但单元格没有改变它们的标签。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T20:59:14.647

**问题 1：** cellForRowAtIndexPath 需要返回一个单元格，要么通过获取现有单元格，要么通过创建一个并添加子视图（仅在创建单元格时）。当我们有一个现有的单元格时，我们可以假设它添加了子视图，所以我们只是去寻找它。所以它会像这样工作......

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {     

    static NSString *CellWithIdentifier = @"Cell";
    BaseLabel *_currentSetting;

    UITableViewCell *cell = (UITableViewCell *)[tableView dequeueReusableCellWithIdentifier:CellWithIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellWithIdentifier];
        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

        // new cell, so add a label
        _currentSetting = [[BaseLabel alloc] initWithFrame:CGRectMake(160, 8, 115, 25)];
        [_currentSetting setFont:[UIFont systemFontOfSize:14]];
        _currentSetting.backgroundColor = [UIColor clearColor];
        _currentSetting.textColor = [UIColor blueColor];
        _currentSetting.textAlignment = NSTextAlignmentRight;
        _currentSetting.tag = 128;
        [cell.contentView addSubview:_currentSetting];
    } else {
        // existing cell so find the label
        _currentSetting = (BaseLabel *)[cell viewWithTag:128];
    } 
```

**问题2：** 现在我们已经准备好了一个单元格和一个标签子视图的句柄，应该如何配置它？唯一明智的方法是根据 indexPath 查看我们的模型。

如果不了解模型，这就是我无能为力的地方，但一般的想法是这样的：

```
 // say my model is an array of N arrays, one for each section, I would do this
    NSArray *sectionModel = [self.mainModel objectAtIndex:indexPath.section];
    id *modelElement = [sectionModel objectAtIndex:indexPath.row];

    // now configure the cell based on modelElement
    _currentSetting.text = [modelElement someStringAttributeOfMyModel];
    return cell;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T20:47:34.790

我在这里看到的主要问题是：

```
cell.tag = rowcount;
rowcount++; 
```

cell.tag 不能出现在**if (cell == nil)**里面，你应该把它拿出来。相反，您根本不应该检查 cell.tag 来设置 currentSettingText，而应该使用 indexPath.row

同样在每个 viewDidAppear 中，当您重新加载表格时，都会调用 cellForRowAtIndexPath，这会增加 rowCount 并因此每次增加 cell.tag，您在哪里重置它？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T20:49:46.617

我可以忽略非常奇怪的`viewWillAppear`调用，`viewDidAppear`但有趣的是您根本没有`indexPath`在方法中使用参数。由于此参数是检查您正在生成的单元格的唯一方法，因此您几乎可以获得任何结果，并且单元格可以随机排序。A`reloadData`将再次洗牌。

随着`rowcount`唯一的增加，很快你的`cell.tag ==`比较都不会评估为真。

顺便说一句，代码正在向已经存在的单元格添加子视图——这意味着在几次重新加载或滚动之后，您的单元格将有很多标签。为什么要将添加到单元格的最后一个标签保存到实例变量中，将其更改为文本，然后将其移动到另一个单元格……这是一个谜。

**你的代码没有任何意义！**

# java - 当 TrustManagerFactory 不是 TrustManagerFactory (Java)

> ID：14654639
> 
> 赞同：27
> 
> 时间：2013-02-01T20:41:46.210
> 
> 标签：java, security, ssl, junit, pkix

我正在尝试向现有的 App-Server (TomCat) 产品添加一些额外的 JUnit 测试。我遇到了（现有和已部署的）自定义 TrustManager 的问题。这件事在生产中运行良好，但在 JUnit 期间，出现异常。

定制的 TrustManager 仅从路径加载密钥库，并隐式信任我们自己的公共证书。出于某种原因，在 JUnits 中使用 this 会导致以下行出现异常：

```
TrustManagerFactory tmFactory = TrustManagerFactory.getInstance("PKIX"); 
```

例外：

```
java.security.NoSuchAlgorithmException:  class configured for TrustManagerFactory: com.sun.net.ssl.internal.ssl.TrustManagerFactoryImpl$PKIXFactory not a TrustManagerFactory 
```

无论使用何种 Provider/Algorithm 组合（“SunX509”、.getDefaultAlgorithm() 等），都会发生此异常。

任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2014-05-29T15:38:10.027

好吧，看起来 PowerMock 搞砸了 SSL 问题，因此，您加载了错误的工厂。解决方案是在测试类上使用注释：

```
@PowerMockIgnore("javax.net.ssl.*") 
```

这取自[https://groups.google.com/forum/#!topic/powermock/v4nreP2AnOQ](https://groups.google.com/forum/#!topic/powermock/v4nreP2AnOQ)

# java - 使用 ASM4 在运行时读取类文件的操作码

> ID：14654646
> 
> 赞同：0
> 
> 时间：2013-02-01T20:42:09.033
> 
> 标签：java, java-bytecode-asm, opcodes

有没有人有任何文件，可以向我展示 ASM 框架的端到端实现以显示类文件的操作码？或者有没有人帮我打招呼，世界！ASM 框架实现的程序示例？我想在 ASM 框架的帮助下显示任何类文件的操作码，就像我们使用 JAVAP 命令一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T21:37:24.920

是的，Oracle 有一个专门用于此的网页。该网页可以在[这里找到](http://docs.oracle.com/javase/specs/jvms/se5.0/html/ClassFile.doc.html)

# vb.net - 在 vb 2010 中使用数据行在两个日期之间搜索

> ID：14654650
> 
> 赞同：1
> 
> 时间：2013-02-01T20:42:27.873
> 
> 标签：vb.net, date, data-binding

我正在尝试`bound source`使用数据行在 VB 2010 中的（SQL 表）中的两个日期之间进行搜索。由于数据行函数不支持“之间”，因此我使用了`<`and `>`。
因此，我运行此代码，当实际条目数为 8 时，输出为 900+ 个条目。在第二次点击我的按钮而不进行任何更改后，出现了正确的条目数。

```
Private Sub cmdSearch_Click(sender As System.Object, e As System.EventArgs) _ 
                                                    Handles cmdSearch.Click

    Dim Expression As String
    Dim OrderStr As String = "Area"
    Dim DateStr As String
    Dim StartDate As String
    Dim EndDate As String
    Dim Shift As String = ""
    Dim Area As String = ""
    Dim Product As String

    If (DtpStartDate.Value = Nothing Or DtpEndDate.Value = Nothing) Then
        MsgBox("Please input a start and end date.")
        Exit Sub
    End If

    If (radShiftAllSearch.Checked <> True _ 
            And radShiftOneSearch.Checked <> True 
            And radShiftTwoSearch.Checked <> True _ 
            And radShiftThreeSearch.Checked <> True) Then
        MsgBox("Please select a shift to search for.")
        Exit Sub
    End If

    Select Case True
        Case radShiftOneSearch.Checked
            Shift = " AND [Shift] = '1'"
        Case radShiftTwoSearch.Checked
            Shift = " AND [Shift] = '2'"
        Case radShiftThreeSearch.Checked
            Shift = " AND [Shift] = '3'"
        Case radShiftAllSearch.Checked
            Shift = " AND ([Shift] = '1' OR [Shift] = '2' OR [Shift] = '3')"
    End Select

    **StartDate = DtpStartDate.Value.Subtract(oneday)
    EndDate = DtpEndDate.Value.Add(oneday)
    'StartDate = Format(DtpStartDate.Value.Subtract(oneday), "M/dd/yyyy")
    'EndDate = Format(DtpEndDate.Value.Add(oneday), "M/dd/yyyy")
    DateStr = "[Dates] > '" & StartDate & "' AND [Dates] < '" & EndDate & "'"**

    If (txtProductSearch.Text = "") Then
        Product = ""
    Else
        Product = "AND [Product] LIKE '" & txtProductSearch.Text & "'"
    End If

    For h As Integer = 0 To CheckedListBox1.CheckedItems.Count - 1
        Dim XDRV As DataRowView = CType(CheckedListBox1.CheckedItems(h), DataRowView)
        Dim XDR As DataRow = XDRV.Row
        Dim XDisplayMember As String = XDR(CheckedListBox1.DisplayMember).ToString()
        If (Area = "") Then
            Area = Area & " AND ([Area] LIKE '" & XDisplayMember & "'"
        Else
            Area = Area & " OR [Area] LIKE '" & XDisplayMember & "'"
        End If
    Next

    If (Area <> "") Then
        Area = Area & ")"
    End If

    Expression = DateStr & Product & Shift & Area
    TextBox4.Text = Expression

    Dim SearchRows() As DataRow = _ 
    ProductionDataSet.Tables("Production_Daily").Select(Expression, OrderStr)
    'foundcount = SearchRows.Count - 1

    DataGridView1.DataSource = SearchRows
    DataGridView1.Show()

End Sub 
```

谢谢

# python - Eclipse 在 python 中停止自动完成

> ID：14654651
> 
> 赞同：0
> 
> 时间：2013-02-01T20:42:29.183
> 
> 标签：python, eclipse

我安装了eclipse并使用了几次，关闭并重新启动它，一切似乎都正常工作。今天早上，当我开始使用它时，它已经停止自动完成并停止初始化 self 关键字。今天早上我还必须重新安装 pydev 包。请问有什么想法吗？？

我在这里先向您的帮助表示感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T20:50:46.907

可能类似于此[“eclipse 代码完成问题”](http://linkapps.com/programming/19-python/41-pydev-with-eclipse-and-aptana-code-completion-freezes.html)。需要提供更多信息...例如正在使用的操作系统，eclipse版本，eclipse上安装了哪些软件包？出现任何错误对话框？

# c++ - Main 返回后的分段错误 11

> ID：14654661
> 
> 赞同：3
> 
> 时间：2013-02-01T20:42:48.623
> 
> 标签：c++

我有一个包含多个课程的很长的程序，所以除非您需要，否则我不会发布它。但是在主要回报之后，我得到了一个分段错误。

使用 GDB 我可以看到这个错误：

```
program received signal EXC_BAD_ACCESS, Could not access memory.
Reason: KERN_INVALID_ADDRESS at address: 0x0000002300103be8
0x00000001000035cc in std::_Rb_tree<std::string, std::string, std::_Identity, std::less,     std::allocator >::_S_right (__x=0x2300103bd0) at stl_tree.h:512
512       { return static_cast<_Link_type>(__x->_M_right); } 
```

我对 C++ 很陌生，所以这对我来说就像是胡言乱语。任何人都可以破译它吗？看起来我的一个 STL 容器可能会导致问题？关于如何解决它的任何建议？

**编辑代码：**

好的，所以我已将其隔离到 if 块中的某个地方`main`，这是我写的最后一件事，当我将其注释掉时，程序运行良好。

```
else if(line.substr(0, 3) == "Rec") // Recieve 
  {       
      istringstream ss(line);
      string s; // output string
      string upc;
      string name;
      int amount;
      int count = 0;
      while(ss >> s) // go through the words in the line
      {
          count++;
          if(count == 2)
            upc = s;
          else if (count == 3)
          {
            istringstream isa(line.substr(20, 2));
            isa >> amount; //Parse the amount
          }
          else if (count == 4)
            name = s;
      }

      warehouses.find(name)->second.receive_food(upc, amount); //add the food to the warehouse

  } 
```

为了澄清`line`我们正在查看的是这种格式：

```
Receive: 0984523912 7 Tacoma 
```

`warehouses`是一张地图：`map<string, a4::warehouse> warehouses; //all the warehouses.`

**这里是仓库收货方式**

```
void warehouse::receive_food(std::string upc, int amount)
{
    items.find(upc)->second.receive(amount);

    todays_transactions = todays_transactions + amount;
} 
```

`items`在哪里`std::map<std::string, food> items;`

**最后是食物接收方法**

```
void food::receive(int amount)
{
    crates.push_back(crate(life, amount));
} 
```

`crates`在哪里`std::list<crate> crates;`

而一个`crate`是

```
 class crate
{
    public:
        crate(int, int);
        ~crate();
        int life;
        int quantity;
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T20:51:14.530

看起来像内存损坏。`_Rb_tree`表明该错误与`std::map`通常实现为[红黑树](http://en.wikipedia.org/wiki/Red%E2%80%93black_tree)有关。不看代码很难说更多。我建议使用[Valgrind](http://valgrind.org/)来调试问题。

查看您在更新中发布的代码后，我认为问题在于您没有检查是否`warehouses.find(name)`返回有效的迭代器。`map::end()`如果找不到密钥，它可以返回。

添加支票：

```
 map<string, a4::warehouse>::iterator it = warehouses.find(name);
  if (it != warehouses.end())
    it->second.receive_food(upc, amount);
  else ; // handle the case of a missing key 
```

以及对其他调用的类似检查`map::find`。

# c++ - 线程更新类对象

> ID：14654663
> 
> 赞同：1
> 
> 时间：2013-02-01T20:43:04.540
> 
> 标签：c++, multithreading, visual-studio-2010, visual-c++

如何从线程返回类对象或如何保持其状态？

```
struct DataStructure
{
    MapSmoother *m1;
    std::vector<Vertex*> v1;
    std::vector<Vertex *>::iterator vit;

    DataStructure() {
        m1 = NULL;
        v1;
        vit;
    }
};

DWORD WINAPI thread_fun(void* p)
{
        DataStructure *input = (DataStructure*)p;
        for( ; (input->vit) != (input->v1).end(); ){
            Vertex *v = *input->vit++;
                (*(input->m1)).relax(v);
        }
        return 0;
}
main()
{
//Reading srcMesh
//All the vertices in srcMesh will be encoded with color
MapSmoother msmoother(srcMesh,dstMesh); //initial dstMesh will be created with no edge weights 
DataStructure* input = new DataStructure; //struct datatype which holds msmoother object and vector "verList". I am passing this one to thread as a function argument
for(int color = 1; color <= 7 ; color++)
{
        srcMesh.reportVertex(color,verList); //all the vertices in srcMesh with the same color index will be stored in verList datastructure(vector)

        std::vector<Vertex *>::iterator vit = verList.begin();
        input->vit = vit;

for(int i = 0; i < 100; i++)
                HANDLE hThread[i] = createThread(0,0,&thread_fun,&input,0,NULL);
        WaitForMultipleObjects(100,hThread,TRUE,INFINITE);
        for(int i = 0; i < 100; i++)
               CloseHandle(hThread[i]);
}
msmoother.computeEnergy();     // compute harmonic energy based on edge weights
} 
```

在 thread_fun 中，我在 msmoother 对象上调用一个方法，以便使用边缘权重以及 dstMesh 更新 msmoother 对象。dstMesh 与线程功能完美更新。为了在 msmoother 对象上执行 computeEnergy，对象应该返回到主线程或者它的状态应该被持久化。但它将能量返回为“0”。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T20:53:26.067

内存在线程之间共享，因此它们对共享数据所做的所有修改最终都会变得可见，而无需任何额外的努力（*返回*或*持久*化某些东西）。

显然，您的问题是，在尝试使用它们应该准备好的数据之前，您没有*等待线程完成。*由于您已经有一个线程句柄数组，`WaitForMultipleObjects`因此应该是等待所有线程完成（通知`bWaitAll`参数）的便捷方式。请注意，[WaitForMultipleObjects](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687025%28v=vs.85%29.aspx)一次不能等待超过 64 个对象，因此如果您有 100 个线程，则需要两次调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T20:53:38.207

如果 computeEnergy() 要求所有线程都已完成，您可以将每个线程的句柄传递给支持等待线程完成的[WaitForMultipleObject 。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687025%28v=vs.85%29.aspx)在每个线程中，您可以添加或修改`msmoother`对象中的值（通过指向 的指针传递`thread_fun`）。

该`msmoother`对象将一直存在，直到线程全部返回，因此将指针传递给它是可以接受的。

# r - 按第二列中的值复制列值

> ID：14654665
> 
> 赞同：1
> 
> 时间：2013-02-01T20:43:09.067
> 
> 标签：r

我有一个看起来像这样的数据框：

```
a<-c('a', 'b', 'c', 'd', 'e')

b<-c(1, 2, 3, 2, 3)

df<-data.frame(a, b)

      a b
    1 a 1
    2 b 2
    3 c 3
    4 d 2
    5 e 3 
```

我想通过 b 列中的数字复制 a 列中的值，以便获得如下所示的 vector/data.frame：

```
c<-c('a', 'b', 'b', 'c', 'c', 'c', 'd', 'd', 'e', 'e', 'e')

       c
    1  a
    2  b
    3  b
    4  c
    5  c
    6  c
    7  d
    8  d
    9  e
    10 e
    11 e 
```

感谢您的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T20:49:25.567

看`?rep`，如：

```
> with(df, rep(a, times = b))
 [1] a b b c c c d d e e e
Levels: a b c d e 
```

因素位很烦人，因为它是 R`b`在`df`. 要么做

```
> df <- data.frame(a, b, stringsAsFactors = FALSE)
> with(df, rep(a, times = b))
 [1] "a" "b" "b" "c" "c" "c" "d" "d" "e" "e" "e" 
```

然后是上面的答案，或者只是将结果强制转换为字符向量：

```
> with(df, as.character(rep(a, times = b)))
 [1] "a" "b" "b" "c" "c" "c" "d" "d" "e" "e" "e" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T08:46:27.020

如果你想扩展你的整个`data.frame`，你可以使用这样的东西：

```
df <- data.frame(a = c('a', 'b', 'c', 'd', 'e'),
                 b = c(1, 2, 3, 2, 3))
df[rep(rownames(df), df$b), ]
#     a b
# 1   a 1
# 2   b 2
# 2.1 b 2
# 3   c 3
# 3.1 c 3
# 3.2 c 3
# 4   d 2
# 4.1 d 2
# 5   e 3
# 5.1 e 3
# 5.2 e 3 
```

# objective-c - UITableView if(cell == null) 错误

> ID：14654666
> 
> 赞同：0
> 
> 时间：2013-02-01T20:43:08.933
> 
> 标签：objective-c

我的代码有这个问题，我正在尝试将文本字段添加到我的单元格中。它奏效了！但是当我后来再次尝试时，它没有。我用 NSLog 进行了一些调试，得出的结论是 cell 不是 = nil，因此我的代码没有运行。

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    NSLog(@"Called1");
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cell"];
        cell.accessoryType = UITableViewCellAccessoryNone;

        NSLog(@"Called?");
        UITextField *playerTextField = [[UITextField alloc] initWithFrame:CGRectMake(110, 10, 185, 30)];
        playerTextField.adjustsFontSizeToFitWidth = YES;
        playerTextField.textColor = [UIColor blackColor];
        if([indexPath row] == 0) {
            playerTextField.placeholder = @"yoyo1";
            playerTextField.keyboardType = UIKeyboardTypeDefault;
            playerTextField.returnKeyType = UIReturnKeyNext;
        } else {
            playerTextField.placeholder = @"yoyo2";
            playerTextField.keyboardType = UIKeyboardTypeDefault;
            playerTextField.returnKeyType = UIReturnKeyDone;
            playerTextField.secureTextEntry = YES;
        }

        playerTextField.backgroundColor = [UIColor whiteColor];
        playerTextField.autocorrectionType = UITextAutocorrectionTypeNo;
        playerTextField.autocapitalizationType = UITextAutocapitalizationTypeNone;
        playerTextField.textAlignment = UITextAlignmentLeft;
        playerTextField.tag = 0;

        playerTextField.clearButtonMode = UITextFieldViewModeNever;
        [playerTextField setEnabled: YES];

        [cell.contentView addSubview:playerTextField];

    }

    return cell;
} 
```

代码`NSLog(@"Called?")`不会被调用，但`NSLog(@"Called1")`会。为什么？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T21:05:13.887

只是一点点改变：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    NSLog(@"Called1");
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cell"];
    }
    cell.accessoryType = UITableViewCellAccessoryNone;

    NSLog(@"Called?");
    //And then the rest of your cell configuration code... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T20:55:51.263

将代码更新为此，初始化表格单元格的方式不正确。

[tableView dequeueReusableCellWithIdentifier:@"Cell"]; 如果此行返回非零，您的代码将无法正确初始化表格单元格。逻辑是在分配合适的表格单元格后，通过出列或重新使用来获得一个新的表格单元格，以同样的方式装饰它。

```
 -(UITableViewCell *)reuseTableViewCellWithIdentifier:(NSString *)identifier withIndexPath:(NSIndexPath *)indexPath{
        UITableViewCell * cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:identifier];

    return cell;
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
        NSLog(@"Called1");
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];
        if (cell == nil) {
             cell = [self reuseTableViewCellWithIdentifier:@"Cell" withIndexPath:indexPath];
        }
        cell.accessoryType = UITableViewCellAccessoryNone;

        NSLog(@"Called?");
        UITextField *playerTextField = [[UITextField alloc] initWithFrame:CGRectMake(110, 10, 185, 30)];
        playerTextField.adjustsFontSizeToFitWidth = YES;
        playerTextField.textColor = [UIColor blackColor];
        if([indexPath row] == 0) {
            playerTextField.placeholder = @"yoyo1";
            playerTextField.keyboardType = UIKeyboardTypeDefault;
            playerTextField.returnKeyType = UIReturnKeyNext;
        } else {
            playerTextField.placeholder = @"yoyo2";
            playerTextField.keyboardType = UIKeyboardTypeDefault;
            playerTextField.returnKeyType = UIReturnKeyDone;
            playerTextField.secureTextEntry = YES;
        }

        playerTextField.backgroundColor = [UIColor whiteColor];
        playerTextField.autocorrectionType = UITextAutocorrectionTypeNo;
        playerTextField.autocapitalizationType = UITextAutocapitalizationTypeNone;
        playerTextField.textAlignment = UITextAlignmentLeft;
        playerTextField.tag = 0;

        playerTextField.clearButtonMode = UITextFieldViewModeNever;
        [playerTextField setEnabled: YES];

        [cell.contentView addSubview:playerTextField];

return cell;
} 
```

# java - 我可以将 JMeter 用于非 Web 应用程序性能计量吗？

> ID：14654667
> 
> 赞同：2
> 
> 时间：2013-02-01T20:43:09.233
> 
> 标签：java, hudson, performance-testing

所以，我有一个用 Java 编写的科学应用程序，我需要开始性能测试。我们已经启动并运行了 CI，所以这应该是我可以转变为 CI 工作并开始获取我们绩效的时间历史的东西。但是，我无法识别可以帮助我生成指标的库。JMeter 看起来很有趣并且与 Hudson 配合得很好，但文档侧重于 Web 应用程序测试。我没有那个。我有一个科学模拟，我们的目标是跟踪内存使用情况、cpu 负载等。我可以使用 JMeter 还是它真的专注于网络应用市场？对于模拟性能测试还有其他建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T20:48:42.650

是的。在这里查看 jmeter perfmon 插件：[http ://code.google.com/p/jmeter-plugins/wiki/PerfMon](http://code.google.com/p/jmeter-plugins/wiki/PerfMon)

# c# - 在运行时设置实体框架连接字符串会引发“不支持关键字”

> ID：14654670
> 
> 赞同：1
> 
> 时间：2013-02-01T20:43:18.840
> 
> 标签：c#, entity-framework

我试图在运行时在我的实体框架中设置我的连接字符串。为了做到这一点，我有以下代码：

```
string connectionString = "tcp:[serverName],[port];initial catalog=[databaseName];user id=[userName];password=[pwd];MultipleActiveResultSets=True;App=EntityFramework";
using (MyEntities entities = new MyEntities(connectionString))
{
  MyEntity entity = new MyEntity();
  // Set entity properties here

  entities.MyEntities.Add(entity);
  entities.SaveChanges();
} 
```

当我到达说 的那一行时，`entities.MyEntities.Add(entity)`会引发异常。该异常具有以下信息：

```
Type: ArgumentException
Message: Keyword not supported: 'tcp:[serverName],[port];initial catalog'. 
```

为什么我写的代码不起作用？对于我的生活，我无法弄清楚。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T21:19:42.273

您缺少“服务器”：

`string connectionString = "Server=tcp:[serverName],[port];initial catalog=[databaseName];user id=[userName];password=[pwd];MultipleActiveResultSets=True;App=EntityFramework";`

（假设您只是将 [serverName]、[port]、[databaseName] 替换为问题中的代码以隐藏敏感细节。显然 [serverName] 不是有效的主机名。）

我不能 100% 确定“服务器”和“初始目录”可以一起工作，因此您可能需要“数据源”而不是“服务器”，或者需要“数据库”而不是“初始目录”。

# windows - 是否可以使用 AutoHotKey 运行 PSLoggedOn 并编辑流中的输出并返回结果？

> ID：14654672
> 
> 赞同：0
> 
> 时间：2013-02-01T20:43:23.803
> 
> 标签：windows, autohotkey, sysinternals

我正在使用 AutoHotKey 构建一个使用 Sysinternals 工具 PSLoggedOn 的简单 GUI 工具。首先，如果我使用 `run psloggedon.exe -l -x \\computername`我根本没有得到任何输出。

所以我尝试`run %ComSpec% /C psloggedon.exe -l -x 1> %Temp%\psloggedon.txt`了，这给了我每个登录用户的域\用户名格式的输出。

就像我的第一个示例一样，我宁愿只运行 psloggedon 并获取输出，而不是首先打开命令提示符；这有可能吗？

无论哪种方式，我都想获取输出并避免将其写入文件，而是编辑输出流的输出以删除“域\”部分，然后只返回用户名。没有任何第三方软件如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-21T09:03:47.737

[This](https://serverfault.com/a/203890) answer to another question on Serverfault 显示了一种通过阅读 StdoutRead 来做到这一点的方法。我也在寻找一种避免使用文件的方法，但我认为它实际上是最简单的选择。

从 user60738 复制的代码

```
#include <Constants.au3>
Dim $line, $line2, $file, $icount, $reg, $reg2, $reg3
$file = FileOpen("pclist.txt", 0)
While 1
    $line = FileReadLine($file)
    If @error Then ExitLoop
    $reg3 = ""
    $reg2 = ""
    $reg = ""
    If Ping($line, 200) Then
        $reg = @ComSpec & ' /C "' & @ScriptDir & "\pstools\psloggedon.exe -l -x \\" & $line & '"'
        $reg = Run($reg, "", @SW_HIDE, $STDOUT_CHILD + $STDERR_CHILD)
        While 1
            $reg2 = StdoutRead($reg)
            If @error Then ExitLoop
            If $reg2 Then
                $reg3 &= $reg2
            EndIf
        WEnd
        If StringInStr($reg3, "Error") Then
            $reg = "Error"
        ElseIf StringInStr($reg3,"No one is logged") Then
                $reg = "No one is logged on locally."
        Else
                $reg = StringTrimLeft($reg3, StringInStr($reg3, Chr(13), "", 3))
                $reg = StringTrimLeft($reg, StringInStr($reg, "\"))
                $reg = StringTrimRight($reg, StringLen($reg) - StringInStr($reg, Chr(13)))
                $reg = StringStripWS($reg, 8)
        EndIf
        $icount += 1
        $line2 &= $icount & @TAB & $line & @TAB & $reg & @CRLF
    EndIf
    TrayTip("Psloggedon", $icount & " " & $line & " User: " & $reg, 10)
WEnd
FileClose($file)
ConsoleWrite($line2)
FileDelete("C:\output.txt")
FileWrite("C:\output.txt", $line2)
ShellExecute("C:\output.txt") 
```

# ios - iOS 中的 NSFaultingOrderedSet

> ID：14654675
> 
> 赞同：1
> 
> 时间：2013-02-01T20:43:30.813
> 
> 标签：ios, objective-c, ios5, core-data

我在 iOS 中使用 CoreData 对象。

一个产品有子产品

```
 @property (nonatomic, retain) NSOrderedSet *subProducts; 
```

出于某种原因，对于其中一种产品，我没有获得 NSOrderedSet，而是获得了 _NSFaultingMutableSet。我不能在该对象上使用 objectAtIndex 方法，但我可以使用 for 对其进行迭代。

_NSFaultingMutableSet 类是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T21:05:29.690

An`_NSFaultingMutableSet`是 的私有 CoreData 子类`NSMutableSet`。您确定您的 .xcdatamodel 将关系声明为有序吗？仅仅因为您的代码将属性声明为`NSOrderedSet`并不意味着它一定是；这完全由数据模型控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T20:56:15.303

`NSFaultingOrderedSet`不是官方 API。您可以尝试确保您有正确的课程，如下所示：

```
NSOrderedSet *subProducts = (NSOrderedSet *)product.subProducts;
Product *firstSubProduct = [subProducts objectAtIndex:0]; 
```

# single-sign-on - 如何开发单点登录框架

> ID：14654679
> 
> 赞同：1
> 
> 时间：2013-02-01T20:43:43.910
> 
> 标签：single-sign-on

我在一家禁止使用开源的公司工作，由于某些原因，我无法从市场上购买单点登录解决方案。是否有一些教程可以解释开发单点登录解决方案所涉及的内容？这可以在 Java 或 Dot Net 中完成，只要它能够与 LDAP 通信。任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T10:20:27.680

在维基百科页面[单点登录实现列表上，](http://en.wikipedia.org/wiki/List_of_single_sign-on_implementations "单点登录实现列表")您可以找到 SSO 实现列表，其中有一列指示许可证。其中一些是开源的，您应该开始比较它们以找到最适合您的业务需求的。

我不能建议您从头开始重写 SSO，这将花费您比选择现有的免费和开源实现更多的时间，并且如果您没有合适的专家，您的自制实现会受到安全问题的影响工作的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T20:57:03.930

我会选择[SAML](http://saml.xml.org/wiki/saml-wiki-knowledgebase)。它是用于 sso 解决方案的开放标准。事实上，我在一家公司工作，我们围绕这个建立了自己的 SSO。对于 LDAP 集成，您可以自己构建一些东西，或者检查 Microsoft 的 Active Directory Federation Server，我认为它与 SAML 兼容

# caching - 如何禁用整个站点的http缓存？

> ID：14654682
> 
> 赞同：0
> 
> 时间：2013-02-01T20:43:48.740
> 
> 标签：caching, symfony, maintenance, http-caching, maintenance-mode

我需要能够将站点置于“维护模式”。所以我在 app.php 中使用了一个像这样的廉价黑客（原来的 app.php 被移到了 app.php.bak）：

```
<?php

$key = 123;

if(isset($_GET['skip_maintenance_key']) && $_GET['skip_maintenance_key'] == $key) {
    setcookie('skip_maintenance_key', $key);
}

if(isset($_COOKIE['skip_maintenance_key']) && $_COOKIE['skip_maintenance_key'] == $key) {
    include 'app.php.bak';
    // placeholder
} else {
    //header('Cache-Control: public, maxage=30');
    header('Status: 503 Service Unavailable');
    include 'html/error/503.html';
} 
```

问题是，只要我点击一个使用 http 缓存的页面，该页面就会被 Cloudflare 或我自己的代理等中介缓存，并开始提供给所有人。

所以我想做的是在维护期间以某种方式全局禁用http缓存，也许在中添加一行代码`// placeholder`？

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T22:31:13.060

我读到 Fabien 说（在被拒绝的拉取请求中）这应该由 Web 服务器处理。所以我改变了我的维护脚本来修改服务器配置而不是框架。

问题是服务器无法删除缓存头。但后来我发现[NginxHttpHeadersMoreModule](http://wiki.nginx.org/NginxHttpHeadersMoreModule)工作得很好，所以问题解决了。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-01T20:56:37.800

如果您有权访问 httpd.conf，您可以添加：

```
Header set Cache-Control no-cache
Header set Expires 0 
```

如果没有，请查看本[教程](http://tutorialpedia.org/tutorials/Apache+enable+file+caching+with+htaccess.html)

# php - 如何在 php 中获取完整的引荐来源网址

> ID：14654686
> 
> 赞同：5
> 
> 时间：2013-02-01T20:44:22.100
> 
> 标签：php, http-referer

我想在 PHP 中获取完整的引用 URL。例如，如果我从 google 搜索来到 mywebsite，**`$_SERVER['REFERER']`**只给我 www.google.com，但我想要像 www.google.com/search?q=KEYWORD 这样的东西

谷歌分析为许多搜索引擎提供了这一点。我需要获取“ **/search?q=KEYWORD** ”查询字符串。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T20:50:32.527

把它放在你的脚本中，看看它的内容；

```
<pre>
<?php
var_dump($_SERVER);
?>
</pre> 
```

这样您就可以找出哪些键包含“什么”

# ios - 未知原因的 contentOffset 更改

> ID：14654690
> 
> 赞同：1
> 
> 时间：2013-02-01T20:44:39.263
> 
> 标签：ios, uiviewcontroller, uiscrollview, uitabbarcontroller

在我的应用程序中，标签页中有一个 UITabBarController 和 UIViewControllers。一些视图控制器包含用于分页的 UIScrollView。我正在更改有关 ViewController 上的业务逻辑的 contentOffset。

奇怪的是，在更改 contentOffset（例如当前值 (660,0)）并按下另一个选项卡按钮后，另一个视图控制器正常打开。但是，如果按上一个标签栏，我会看到白屏。当我深入研究细节时，我看到 contentOffset 变成了奇怪的点（1000,0）。

我不明白为什么，也找不到解决方法。此外，在 viewDidAppear 或 viewDidLoad 方法中更改偏移量也没有任何意义。

# python - django-tables2：除了我们用于表格的对象之外，如何将其他对象实例传递给模板

> ID：14654691
> 
> 赞同：0
> 
> 时间：2013-02-01T20:44:41.337
> 
> 标签：python, django, django-tables2

我使用 django-tables2 创建了一个表，除了我想将其他实例或变量添加到 url 模板之外，一切正常。

这是我的看法：

```
def SpecificPLayer(request, playerslug):

    player = Player_Bios.objects.get(player_id=playerslug)
    table= StatTable(BatStat.objects.filter(player_id=playerslug).values('season','team_id'))
    RequestConfig(request, paginate=False).configure(table)

    return render(request, 'singleplayer.html', {'table': table}) 
```

如果我想将以下内容传递给模板怎么办：

```
today = date.today() 
```

我的常识告诉我这样做：

```
 return render(request, 'singleplayer.html','today':taday {'table': table}) #does not work 
```

在我的 singleplayer.html 上，我有以下内容：

```
 {{ today }} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T20:50:16.560

答案是：

```
 return render(request, 'singleplayer.html', {'table': table, 'today':taday}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T20:51:14.460

您需要在字典内的视图中拥有所有要使用的变量。

# c# - 我可以将字符串转换为 C# 中的资源位置吗？

> ID：14654693
> 
> 赞同：2
> 
> 时间：2013-02-01T20:44:46.553
> 
> 标签：c#, string, resources

好的，这里的初学者刚刚开始学习编程，尝试用 C# 做点什么。本质上，我有一个字符串..

```
string resourcename = "example" 
```

方便的是，我还有一个名为 example.jpg 的资源。现在我正在尝试将我的背景图像设置为 example.jpg，使用字符串“resourcename”而不是实际的文件名。通常我会这样做：

```
this.BackgroundImage = namespace.Properties.Resources.example; 
```

所以现在我想做类似的事情

```
this.BackgroundImage = namespace.Properties.Resources.resourcename; 
```

显然，它无法识别，因为它是一个字符串，所以有什么办法可以将字符串合并到资源位置中？

谢谢！: D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T21:17:27.187

结合前两个答案的想法，您可能会尝试这样的事情：

```
BackgroundImage = (Image)Properties.Resources.ResourceManager.GetObject(resourcename)); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-01T20:53:04.583

```
string resourcename = "example"
this.BackgroundImage = Image.FromFile(@"C:\Users\m\Documents\...\" + resourcename + ".jpg" ) ; 
```

# foursquare - Foursquare API：用户访问的场所排序

> ID：14654696
> 
> 赞同：0
> 
> 时间：2013-02-01T20:45:00.087
> 
> 标签：foursquare

对于 Foursquare api

[用户访问的场地](https://developer.foursquare.com/docs/users/venuehistory) [https://api.foursquare.com/v2/users/USER_ID/venuehistory](https://api.foursquare.com/v2/users/USER_ID/venuehistory)

我想知道我们是否可以改变回归的场地类型？它似乎按 alpha 排序。按最近签到排序会很有帮助。或者除了 benHere 字段添加 last_checkin_id: 或者只是 date 就可以了。

是否有我缺少的排序查询字符串参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T22:49:51.410

场地历史端点仅返回用户去过的所有场地。如果您希望按最近签到对场所进行排序，请考虑改用[user/checkins](https://developer.foursquare.com/docs/users/checkins)端点。

# selenium - 使用 Selenium 在站点中搜索跟踪脚本

> ID：14654697
> 
> 赞同：1
> 
> 时间：2013-02-01T20:45:02.660
> 
> 标签：selenium

我刚刚开始玩硒，所以这可能是一个菜鸟问题。我的一位同事必须检查我们网站的大约 100 个页面，以查看其上是否插入了跟踪脚本。她必须每月这样做一次，因此我决定研究硒。

目前，她去页面查看源并搜索这个（和其他脚本跟踪功能）

```
<script type="text/javascript" src="https://ssltracking.esearchvision.com/esi/trackingtest.js"></script> 
```

有些页面包含需要填写和提交的表格。我弄清楚如何使用 selenium IDE 轻松设置 dom 元素的值。

我不确定该怎么做是告诉 selenium 在源代码中搜索这个脚本。如果需要，我可以在我们的服务器上安装 selenium webdriver。我之前没有使用 Java、C# 或 Python 编程，但我确实安装了 node.js 和 php。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-20T21:11:11.900

在 python 中，使用 selenium 元素定位器而不是字符串匹配：

```
from selenium import selenium
import selenium.webdriver.support.ui as ui
wait = ui.WebDriverWait(driver,10)
driver = webdriver.Firefox() ## or whatever browser you prefer
driver.get("yourpage.com")
## wait for page to load
wait.until(lambda driver: driver.find_elements_by_tag_name('script') )
scripts = driver.find_elements_by_tag_name('script')

for script in scripts:
    if( script.get_attribute('src') == \
        'https://ssltracking.esearchvision.com/esi/trackingtest.js' and \
        script.get_attribute('type') == 'text/javascript' ):
        ## do whatever 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T20:58:42.197

在 Java 中：

```
String trackingScript = "<script type="text/javascript" src="https://ssltracking.esearchvision.com/esi/trackingtest.js"></script>"

String html = driver.getPageSource();
if (html.indexOf(trackingScript) != -1) {
    // the script is in the page source
}
else {
    // the script is not in the page source
} 
```

# c# - 等待 HttpClient 和 do-while 循环

> ID：14654704
> 
> 赞同：1
> 
> 时间：2013-02-01T20:45:22.557
> 
> 标签：c#, loops, post, async-await, do-while

我有一种将一些数据发布到服务器的方法。服务器可能会返回 aswer 表示我需要更改 URL 并将数据发送到其他服务器。我使用`HttpClient`4.5 框架中的类。我使用任一 do-while 循环来重复请求，直到我不需要重定向。但有一个问题。

问题是为什么如果我`HttpClient`在循环外创建实例，第二次`await`没有发生并且我的程序退出循环，但是如果我`HttpClient`一次又一次地在循环内创建实例 - 一切都好吗？我可以`HttpClient`在异步方法中的 do-while 循环中为多个 POST 请求重用一个吗？

我的工作代码示例：

```
public async Task<bool> GameLogin()
{
    JToken r;
    do
    {
        var clientHandler = new HttpClientHandler
        {
            CookieContainer = this.myCContainer,
            AutomaticDecompression = DecompressionMethods.GZip | DecompressionMethods.Deflate,
        };
        var client = new HttpClient(clientHandler);
        client.DefaultRequestHeaders.Add("client-ver", Versoin);
        client.DefaultRequestHeaders.Add("method", "SignIn");
        client.DefaultRequestHeaders.Add("authKey", AppParams["auth_key"].ToString());

        var content = new StringContent(this.SendStr);

        var answer = await client.PostAsync(this.CurrentUrl, content);
        var rawString = await answer.Content.ReadAsStringAsync();
        DinamicData = JObject.Parse(rawString);
        r = DinamicData["r"];
        if (r == null) continue;
        this.CurrentUrl = string.Format("http://{0}/main.ashx", r);
    } while (r != null);

    return DinamicData.Type != JTokenType.Null;
} 
```

我没有工作的代码示例：

```
public async Task<bool> GameLogin()
{
    var clientHandler = new HttpClientHandler
    {
        CookieContainer = this.myCContainer,
        AutomaticDecompression = DecompressionMethods.GZip | DecompressionMethods.Deflate,
    };
    var client = new HttpClient(clientHandler);
    client.DefaultRequestHeaders.Add("client-ver", Versoin);
    client.DefaultRequestHeaders.Add("method", "SignIn");
    client.DefaultRequestHeaders.Add("authKey", AppParams["auth_key"].ToString());

    var content = new StringContent(this.SendStr);

    JToken r;
    do
    {
        var answer = await client.PostAsync(this.CurrentUrl, content);
        var rawString = await answer.Content.ReadAsStringAsync();
        DinamicData = JObject.Parse(rawString);
        r = DinamicData["r"];
        if (r == null) continue;
        this.CurrentUrl = string.Format("http://{0}/main.ashx", r);
    } while (r != null);

    return DinamicData.Type != JTokenType.Null;
} 
```

我的第二个代码没有`await`在第二个循环中等待。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T21:03:34.473

好的，现在我们有了例外...

我怀疑问题不在于重用`HttpClient`- 它正在重用：

```
var content = new StringContent(this.SendStr); 
```

我怀疑这`content`可能是由`HttpClient`第*一次*调用处理的，这使得第二次调用失败。

只需将该行移到循环内（它在工作代码的循环内），我希望一切都会好起来的。

# html - 当 div 在其他 div 下时，nth-child 不工作

> ID：14654706
> 
> 赞同：0
> 
> 时间：2013-02-01T20:45:51.863
> 
> 标签：html, css, css-selectors

我有一系列向左浮动的 div，然后在这些也向左浮动的 div 下有不同名称的 div。`nth-child`代码不适用于将这些 div 放置在其他浮动左 div 下方。但是当它们高于它们时，第 n 个孩子工作正常。我试过了：

`#div:first-child and #div:nth-child(1)`

同样，这仅在 div 高于其他 div 时有效，并且在 div 低于其他 div 时不起作用。

这里有两个 jfiddles 演示 nth-child 何时工作，以及何时不工作。

您将看到一系列白色 div，然后是两个红色 div。我正在使用 nth-child 为两个红色 div 提供 100px 的左侧边距。

当 nth-child 不起作用时（在其他 div**下方**的div）：

[http://jsfiddle.net/hsQQn/](http://jsfiddle.net/hsQQn/)

当 nth-child 工作时（div**高于**其他 div）：

[http://jsfiddle.net/hsQQn/1/](http://jsfiddle.net/hsQQn/1/)

我想让这个工作，以便当 div 低于其他 div 时 nth-child 工作。在这一点上，我不知道为什么它不工作......任何帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T20:51:22.527

在**不**工作的小提琴中，`<div>`使用的是容器包装器`id`中的最后两个s。`<div>`所以他们既不是`first-child`也不`nth-child(2)`属于`wrapper`。它们更有可能`nth-child(17)`是`nth-child(18)`它们的父包装元素。

您还有无效的 HTML。每个 id 都应该是唯一的。您应该改用 CSS 类：

```
div.myclass {} 
```

可以像这样多次使用：

```
<div class="myclass"></div> 
```

另一方面，ID：

```
#myid {} 
```

可以使用一次：

```
<div id="myid"></div> 
```

当然，您可以使用 id 引用元素的子元素，例如：

```
#myid > a {} 
```

为了这：

```
<div id="myid"><a></a></div> 
```

但是仍然只有一个元素使用`id`“ *myid* ”。

# vb.net - 用逗号分割字符串并打印结果

> ID：14654707
> 
> 赞同：4
> 
> 时间：2013-02-01T20:45:56.533
> 
> 标签：vb.net, string, split

我正在使用以下代码拆分字符串并检索它们：

```
Private Sub Button1_Click(sender As Object, e As EventArgs) 
      Handles Button1.Click
    Dim s As String = "a,bc,def,ghij,klmno"
    Dim parts As String() = s.Split(New Char() {","c})
    Dim part As String

    For Each part In parts
        MsgBox(part(0))
    Next

End Sub 
```

但消息框仅显示每个 splitted 中的第一个字符`string (a,b,d,g,k)`。

我只想显示第一个单词，我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T20:48:55.757

您的问题尚不清楚，但是如果您只想要字符串数组中的**第一个单词**，则无需遍历它

```
 Dim firstWord = parts(0)
 Console.WriteLine(firstWord) ' Should print `a` from your text sample

 ' or simply
 Console.WriteLine(parts(0)) 

 ' and the second word is     
 Console.WriteLine(parts(1))  ' prints `bc` 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T20:46:30.723

您已经拥有每个部分 - 只需显示它：

```
For Each part In parts
  MsgBox(part)
Next 
```

`part(0)`将返回字符集合中作为字符串的第一项。

如果您想要返回的字符串数组中的特定索引（如您的[评论](https://stackoverflow.com/questions/14654707/splitting-a-string-on-comma-and-printing-the-results/14654714#comment20479230_14654714)所建议的那样），只需直接访问它：

```
Dim parts As String() = s.Split(New Char() {","c})
Dim firstPart As String = parts(0)
Dim thirdPart As String = parts(2) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T20:47:42.357

你需要显示`part`不`part(0)`

```
For Each part In parts

     MsgBox(part)
    Next 
```

# jquery - jQuery：选择一个合适的单选按钮

> ID：14654711
> 
> 赞同：0
> 
> 时间：2013-02-01T20:46:15.697
> 
> 标签：jquery, radio-button

这是html代码：

```
<div id="id1">
<input type="radio" name="sex" value="Male">Male</input>
<input type="radio" name="sex" value="Female">Female</input>
<input type="radio" name="sex" value="Unknown">Unknown</input>
</div>
<div id="id2">
<input type="radio" name="sex" value="Male">Male</input>
<input type="radio" name="sex" value="Female">Female</input>
<input type="radio" name="sex" value="Unknown">Unknown</input>
</div> 
```

`id1`如何为两者和`id2`使用 jQuery随时选择相同的单选按钮？

示例：一旦您从 id1 中选择女性，则会自动选择来自 id2 的女性。

示例：一旦您从 id2 中选择了男性，则会自动从 id1 中选择男性。

我需要它使用 jQuery。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T21:07:47.997

您可以使用此代码，但是您需要更改第二个 div 中输入元素的名称，否则它们将属于同一组。

```
$('#id1 input,#id2 input').click(function () {
    $('#id1 input').eq($(this).index()).prop('checked', true);
    $('#id2 input').eq($(this).index()).prop('checked', true);
}); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/DcKKK/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T22:06:21.950

您必须更改名称，因为具有相同名称的单选按钮将被视为组内...以下对我有用

[http://jsfiddle.net/hcBUR/1/](http://jsfiddle.net/hcBUR/1/)

```
<div id="id1">
<input type="radio" name="sex1" value="Male">Male</input>
<input type="radio" name="sex1" value="Female">Female</input>
<input type="radio" name="sex1" value="Unknown">Unknown</input>
</div>
<div id="id2">
<input type="radio" name="sex2" value="Male">Male</input>
<input type="radio" name="sex2" value="Female">Female</input>
<input type="radio" name="sex2" value="Unknown">Unknown</input>
</div>

$("div").find("*").each(function (index, elem)
                         {
                             $(elem).click( function () {

                                 $("[value='" + $(this).val() + "']").each(function (index, rd)
                                                                           {
                                                                                $(this).attr('checked', true);
                                                                           });

                             });
                         }
                         ); 
```

# android - 像这个屏幕截图一样具有 3 个颜色层的列表分隔线？

> ID：14654715
> 
> 赞同：0
> 
> 时间：2013-02-01T20:46:32.627
> 
> 标签：android

我正在尝试创建一个具有蚀刻外观的列表分隔线，如随附的屏幕截图。经过仔细检查，我看到分隔线由 3 层颜色组成，2A2A2A、3A3A3A 和 404040。有没有人知道如何实现这一点。我试图用图层列表来做，但它没有颜色或背景字段

```
<item android:color ?? > 
```

快速帮助表示赞赏。

![蚀刻隔板](../Images/a97fd0a79a9cacbbbb149bbfbf70726b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T20:50:19.680

只需使用高度为 3 像素且具有垂直渐变的形状。

这是一个**未经测试的示例**

```
<shape android:shape="rectangle">
     <size android:height="3dp"/>
     <gradient 
          android:angle="90" 
          android:startColor="#2A2A2A" 
          android:centerColor="#3A3A3A" 
          android:endColor="#404040" />
</shape> 
```

# android - 连接多个设备时如何使用 ADB Shell？因“错误：多个设备和模拟器”而失败

> ID：14654718
> 
> 赞同：627
> 
> 时间：2013-02-01T20:46:47.567
> 
> 标签：android, shell, cmd, adb, android-debug

```
$ adb --help 
```

* * *

```
-s SERIAL  use device with given serial (overrides $ANDROID_SERIAL) 
```

* * *

```
$ adb devices
List of devices attached 
emulator-5554   device
7f1c864e    device 
```

* * *

```
$ adb shell -s 7f1c864e
error: more than one device and emulator 
```

* * *

## 回答 #1

> 赞同：1092
> 
> 时间：2013-02-01T21:04:25.133

使用`-s`命令前的选项指定设备，例如：

```
adb -s 7f1c864e shell 
```

另请参阅[http://developer.android.com/tools/help/adb.html#directingcommands](http://developer.android.com/tools/help/adb.html#directingcommands)

* * *

## 回答 #2

> 赞同：326
> 
> 时间：2013-11-23T13:40:52.280

**`adb -d shell`**（或`adb -e shell`）。

如果您懒得输入完整 ID，此命令将在大多数情况下为您提供帮助。

来自[http://developer.android.com/tools/help/adb.html#commandsummary](http://developer.android.com/tools/help/adb.html#commandsummary)：

> `-d`- 将 adb 命令定向到唯一连接的 USB**设备**。连接多个 USB 设备时返回错误。
> 
> `-e`- 将 adb 命令定向到唯一正在运行的**模拟器**。运行多个模拟器时返回错误。

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2014-02-28T08:39:58.777

另一种选择是将环境变量 ANDROID_SERIAL 设置为相关序列，假设您使用的是 Windows：

```
set ANDROID_SERIAL=7f1c864e
echo %ANDROID_SERIAL%
"7f1c864e" 
```

然后你可以`adb.exe shell`毫无问题地使用。

* * *

## 回答 #4

> 赞同：39
> 
> 时间：2014-12-31T01:37:36.390

我在看到“多台设备”错误后发现了这个问题，显示 2 部离线手机：

```
C:\Program Files (x86)\Android\android-sdk\android-tools>adb devices
List of devices attached
SH436WM01785    offline
SH436WM01785    offline
SH436WM01785    sideload 
```

如果您只连接了一台设备，请运行以下命令以摆脱离线连接：

```
adb kill-server
adb devices 
```

* * *

## 回答 #5

> 赞同：29
> 
> 时间：2019-04-10T19:56:14.040

***要在您的一个模拟器上安装 apk：***

首先获取设备列表：

```
-> adb devices
List of devices attached
25sdfsfb3801745eg        device
emulator-0954   device 
```

`-s`然后使用以下标志在您的模拟器上安装 apk ：

```
-> adb -s "25sdfsfb3801745eg" install "C:\Users\joel.joel\Downloads\release.apk"
Performing Streamed Install
Success 
```

Ps.：这里的顺序很重要，所以`-s <id>`必须在`install`命令之前，否则将不起作用。

希望这对某人有帮助！

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2019-06-27T10:28:36.563

在任何特定设备上运行 shell 的最佳方法是使用：

```
adb -s << emulator UDID >> shell

For Example:
adb -s emulator-5554 shell 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2016-06-03T19:54:17.233

当连接了多个设备时，这个[gist](https://gist.github.com/dtmilano/4537110)将为您显示菜单完成大部分工作：

```
$ adb $(android-select-device) shell
1) 02783201431feeee device 3) emulator-5554
2) 3832380FA5F30000 device 4) emulator-5556
Select the device to use, <Q> to quit: 
```

为避免键入，您可以创建一个包含设备选择的别名，如此[处](http://dtmilano.blogspot.ca/2012/03/selecting-adb-device.html)所述。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2018-09-07T07:28:59.360

用户`@janot`已经在上面提到了这一点，但这花了我一些时间来筛选最佳解决方案。

有两个广泛的用例：

1）连接了2个硬件，第一个是模拟器，另一个是设备。
**解决方案**：`adb -e shell....whatever-command`用于模拟器和`adb -d shell....whatever-command`设备。

2）通过USB/ADB-WiFi连接了n个设备（所有模拟器或手机/平板电脑）：

**解决方案**：步骤1）运行`adb devices`这将为您提供当前连接的设备列表（通过USB或ADBoverWiFI）
步骤2）现在`adb -s <device-id/IP-address> shell....whatever-command` 无论如何运行你有很多设备。

**清除连接在 wifi ADB 上的设备上的应用程序数据的示例**
，我将执行：
`adb -s 172.16.34.89:5555 shell pm clear com.package-id`

要清除连接在我的 USB 连接设备上的应用程序数据，我将执行：
`adb -s 5210d21be2a5643d shell pm clear com.package-id`

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2018-03-14T19:19:06.450

对于 Windows，这是一个快速的 1 行示例，说明如何在多个设备上安装文件。

```
FOR /F "skip=1"  %x IN ('adb devices') DO start adb -s %x install -r myandroidapp.apk 
```

如果您打算将其包含在批处理文件中，请将 %x 替换为 %%x，如下所示

```
FOR /F "skip=1"  %%x IN ('adb devices') DO start adb -s %%x install -r myandroidapp.apk 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2015-04-03T11:11:58.533

[在所有连接的设备上运行 adb 命令](https://stackoverflow.com/questions/17882474/running-adb-commands-on-all-connected-devices)

创建一个 bash (adb+)

```
adb devices | while read line
do
if [ ! "$line" = "" ] && [ `echo $line | awk '{print $2}'` = "device" ]
then
    device=`echo $line | awk '{print $1}'`
    echo "$device $@ ..."
    adb -s $device $@
fi 
```

完成使用它

adb+ //+ 命令

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-03-30T04:33:37.690

创建一个 Bash (tools.sh) 以从设备（或模拟器）中选择一个串行：

```
clear;
echo "====================================================================================================";
echo " ADB DEVICES";
echo "====================================================================================================";
echo "";

adb_devices=( $(adb devices | grep -v devices | grep device | cut -f 1)#$(adb devices | grep -v devices | grep device | cut -f 2) );

if [ $((${#adb_devices[@]})) -eq "1" ] && [ "${adb_devices[0]}" == "#" ]
then
    echo "No device found";
    echo ""; 
    echo "====================================================================================================";
    device=""
    // Call Main Menu function fxMenu;
else
    read -p "$(
        f=0
        for dev in "${adb_devices[@]}"; do
            nm="$(echo ${dev} | cut -f1 -d#)";
            tp="$(echo ${dev} | cut -f2 -d#)";
            echo " $((++f)). ${nm} [${tp}]";
        done

        echo "";
        echo " 0\. Quit"
        echo "";

        echo "====================================================================================================";
        echo "";
        echo ' Please select a device: '
    )" selection

    error="You think it's over just because I am dead. It's not over. The games have just begun.";
    // Call Validation Numbers fxValidationNumberMenu ${#adb_devices[@]} ${selection} "${error}" 
    case "${selection}" in
        0)
            // Call Main Menu function fxMenu;
        *)  
            device="$(echo ${adb_devices[$((selection-1))]} | cut -f1 -d#)";
            // Call Main Menu function fxMenu;
    esac
fi 
```

然后在另一个选项中可以使用`adb -s`（全局选项 -s 使用具有覆盖 $ANDROID_SERIAL 的给定序列号的设备）：

```
adb -s ${device} <command> 
```

我在 MacOS 终端上测试了这段代码，但我认为它可以在 Git Bash 终端的窗口上使用。

还要记住在`.bash_profile`文件中配置环境变量和 Android SDK 路径：

```
export ANDROID_HOME="/usr/local/opt/android-sdk/"
export PATH="$ANDROID_HOME/platform-tools:$PATH"
export PATH="$ANDROID_HOME/tools:$PATH" 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-10-02T23:38:57.540

这是我为自己制作的一个 shell 脚本：

```
#! /bin/sh

for device in `adb devices | awk '{print $1}'`; do
  if [ ! "$device" = "" ] && [ ! "$device" = "List" ]
  then
    echo " "
    echo "adb -s $device $@"
    echo "------------------------------------------------------"
    adb -s $device $@
  fi
done 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2022-02-28T22:50:53.327

为方便起见，可以创建运行配置，其中设置`ANDROID_SERIAL`：

[![截屏](../Images/3dd64527b816f37db87348560926c60c.png)](https://i.stack.imgur.com/syUOE.png)

`adb_wifi.bat`可能看起来相似的地方（仅位置参数`%1%`并且`"$1"`可能不同）：

```
adb tcpip 5555
adb connect %1%:5555
echo "disconnect the USB cable now" 
```

进步是，这`adb`将接手当前的`ANDROID_SERIAL`.
在 shell 脚本中也`ANDROID_SERIAL=xyz adb shell`应该工作。

这种说法不一定是错的：

```
-s SERIAL  use device with given serial (overrides $ANDROID_SERIAL) 
```

但是也可以`ANDROID_SERIAL`在运行`adb`命令之前更改权限。

# java - 为什么我需要输入两次我的选择？

> ID：14654719
> 
> 赞同：-1
> 
> 时间：2013-02-01T20:46:54.650
> 
> 标签：java, input, selection

谁能帮我理解为什么程序要求我在继续之前输入我的选择两次？

```
public static void main(String[] args) {
    String quit = "quit";
    String input =  "input";
    String print = "print";

    @SuppressWarnings("resource")
    Scanner scan = new Scanner(System.in);
    System.out.println("please enter a command : \n      1) Quit \n      2) Input \n      3) Print \n");

    String initialSelection = scan.next();
    boolean stringInput = scan.hasNext();
    boolean intInput = scan.hasNextInt();
    boolean boolinput = scan.hasNextBoolean();

    if(initialSelection.equalsIgnoreCase(quit)) {
        System.out.println("The program has quit.");
        System.exit(0);
    }else if(initialSelection.equalsIgnoreCase(print)){
        [constructor]

        do {
            System.out.println("\nplease enter a command : \n      1) Quit \n      2) Input \n      3) Print \n");
            initialSelection = scan.nextLine();

                if (initialSelection.equalsIgnoreCase(print)) {
                        new BonusArrayList();
                } else if(initialSelection.equalsIgnoreCase(quit)) {
                            System.out.println("The program has quit.");
                            System.exit(0);
                }
        } while (initialSelection.equalsIgnoreCase(print));

    }else if(initialSelection.equalsIgnoreCase(input)){
        System.out.println("\n Please enter some kind of value (ex: 123, hello, True)");
    }
} 
```

我相信它来自嵌套的 do-while 语句，但我似乎无法解决这个问题。任何提示将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T20:53:17.027

这是因为你要么需要

```
String initialSelection = scan.next(); 
```

或者

```
 boolean stringInput = scan.hasNext();
        boolean intInput = scan.hasNextInt();
        boolean boolinput = scan.hasNextBoolean(); 
```

如果两者都有，则需要输入两次

# ruby-on-rails - 对哈希数组中的值求和的更好方法

> ID：14654720
> 
> 赞同：18
> 
> 时间：2013-02-01T20:46:58.270
> 
> 标签：ruby-on-rails, ruby

我需要对数组哈希中的值求和，我在[这里找到了一种方法](https://stackoverflow.com/questions/3728014/sum-the-value-of-array-in-hash)

但它确实似乎在 Ruby 中应该有一种更优雅的方式。

这是有效的；

```
sales = [{"sale_price"=>210000, "deed_type"=>"Warranty Deed"}, {"sale_price"=>268300, "deed_type"=>"Warranty Deed Joint"}]

total_sales = sales.inject(0) {|sum, hash| sum + hash["sale_price"]} 
```

总计行不是很可读。如果这样的事情有效，那就太好了；

```
total_sales = sales.sum("sale_price") 
```

这只是一厢情愿还是我忽略了更好的解决方案？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-02-01T20:54:15.320

我喜欢像这样使用 map/reduce 隐喻：

```
total_sales = sales.map {|s| s['sale_price']}.reduce(0, :+) 
```

reduce 方法是 inject 方法的同义词，我发现 inject 这个名字与 memo 组件有些混淆。它具有我上面使用的另一种形式来获取初始值和对用于组合/归约过程的方法调用的引用。

我认为映射值然后将它们减少为聚合的整体模式是众所周知的并且是自记录的。

编辑：使用符号 :+ 而不是 proc 引用 &:+

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T21:15:55.140

你可以让它工作：

```
sales = [{"sale_price"=>210000, "deed_type"=>"Warranty Deed"}, {"sale_price"=>268300, "deed_type"=>"Warranty Deed Joint"}]

def sales.sum(by)
  inject(0){|sum, h| sum + h[by]}
end

p sales.sum("sale_price") #=> 478300 
```

请注意，此`sum`方法（sum_by 可能是一个更好的名称）未在 Array 上定义，而仅在特定的 sales 数组上定义。

# sitecore - 如何使用 Sitecore DMS 报告/过滤器接受用户输入？

> ID：14654722
> 
> 赞同：2
> 
> 时间：2013-02-01T20:47:05.820
> 
> 标签：sitecore, sitecore6, sitecore-dms

借助 Sitecore OMS，可以创建使用 Sitecore 规则引擎接受用户输入的自定义报告过滤器。这对于按 ItemId、URL、IP 地址等进行过滤非常有用。[下面是 OMS 的自定义过滤器示例](http://ivanbuzyka.blogspot.com/2010/10/create-custom-like-filter-for-analytics.html)。

**如何使用 Sitecore DMS 接受用户输入？**似乎旧的过滤器方法已被废弃以代替“[预定义过滤器](http://webcmd.wordpress.com/2012/07/19/adding-site-filters-to-dms-reports-with-sitecore-6-5/)”，这些过滤器是注入 SQL 语句的 WHERE 子句的硬编码值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T23:19:18.733

您知道 Sitecore 中的每个项目都有“分析”选项卡，其中有一个“报告”选项，用户可以在其中查看特定于该项目的报告？我意识到这些确实是“罐装”报告，但创建新报告或调整现有报告以提供您想要看到的内容并不难。如果报告不够具体，您始终可以创建自己的报告，然后只需将它们放入此处的项目报告文件夹：/sitecore/system/Settings/Analytics/Reports/Item Reports/。此外，请记住，所有 SQL 查询都位于以下项目中：/sitecore/system/Settings/Analytics/Reports SQL 查询，添加参数（例如日期参数）并不难。

我知道它有一些学习曲线，但是创建自己的能够获取一些用户输入的查询和报告并不是不可能的。如果您有特定的事情或需要进一步的帮助，请告诉我。我花了很多时间做自定义报告，我很乐意回答任何问题。

# android - 将视图从 Android 3.0+ 转换为 2.3

> ID：14654723
> 
> 赞同：0
> 
> 时间：2013-02-01T20:47:06.647
> 
> 标签：android, user-interface

在 android 3.0+ 中，我有以下代码：

```
aView.animate().translationX(diffX); 
```

其中 aView 是一个视图，而 diffX 是一些像素数，用于转换视图的位置。有谁知道在 android 2.3 中执行此操作的代码是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T21:00:26.413

它是在 Android 3.0 中引入的，在旧版本中不可用，但您可以使用它： http: [//nineoldandroids.com/](http://nineoldandroids.com/) 这是 Jake Wharton 的一个库，“包括对平台上的动画旋转、平移、alpha 和缩放的支持在蜂窝之前”。

# php - PHP：为什么不能将类中的静态变量用作变量函数？

> ID：14654725
> 
> 赞同：3
> 
> 时间：2013-02-01T20:47:11.990
> 
> 标签：php, function, variables, static

我不熟悉在类中使用静态方法和属性。我想要做的是运行一个[变量函数](http://php.net/manual/en/functions.variable-functions.php)，但不能使用：

```
self::$static_var() 
```

PHP 抛出一个通知：

```
Undefined variable: static_var 
```

我必须首先分配给一个局部变量，如下所示：

```
$local_var = self::$static_var; 
```

那我可以做

```
$local_var(); 
```

这是一些示例代码。~~我不明白为什么**测试 1**不起作用。我必须进行**测试 2**才能获得所需的功能。~~ ***问题：***为什么**测试 1**不起作用？

### 测试 1 - 不起作用

```
X::do_stuff('whatever');

class X {
    public static $static_var = 'print_r';

    public static function do_stuff($passed_var) {
        self::$static_var($passed_var);
    }
} 
```

### 测试 2 - 有效

```
X::do_stuff('whatever');

class X {
    public static $static_var = 'print_r';

    public static function do_stuff($passed_var) {
        $local_var = self::$static_var;
        $local_var($passed_var);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T20:53:09.273

使用[`call-user-func`](http://php.net/manual/en/function.call-user-func.php)：

```
call_user_func(self::$static_var, $passed_var); 
```

关于您编辑的问题：

我试图在 PHP 文档中找到解释。这可能是因为`$static_var`在处理函数调用时尚未评估。但您问题的最佳答案可能是：因为它就是这样。一个很好的例子是：`$classname::metdhod();`在 PHP 5.3 之前无效。现在它是。真的没有理由。你应该问PHP的家伙。

# php - CodeIgniter 保护视图

> ID：14654732
> 
> 赞同：0
> 
> 时间：2013-02-01T20:47:40.107
> 
> 标签：php, codeigniter

我有一个控制器，它检查某个用户是否可以访问某个视图，如果可以，则加载该视图。我是否需要担心该视图是否安全？我的意思是，用户查看该视图的唯一方法是通过控制器，或者是否有办法通过玩 url 来查看它，例如：mysite/somedir/forbiddenview.php

我想其他资源也是如此 - 可以公开查看的内容（当然除了控制器......）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T11:41:22.030

这几乎来自指南本身[here](http://ellislab.com/codeigniter/user-guide/overview/appflow.html)

在控制器中检查正确的访问级别是一个好习惯，如果你有中间控制器，最好检查一下**My_Controller**

另一方面，由于 index.html 文件，直接访问视图文件夹几乎是不可能的

```
<html>
<head>
    <title>403 Forbidden</title>
</head>
<body>

<p>Directory access is forbidden.</p>

</body>
</html> 
```

并且您应该在您的网站资源 ei 上传、CSS、Javascript、图像等中使用相同的**index.html文件。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T20:55:21.613

通常，codeigniter 中的所有内容都会被路由，并且从公开的 index.php 文件开始。默认情况下，应用程序目录中的内容不能通过 URL 直接访问，只要您的控制器中有良好的安全措施，它们就是安全的。

# python - 将一行的单词放在一个数组/列表中，可以使用 Python 的索引来引用

> ID：14654734
> 
> 赞同：-3
> 
> 时间：2013-02-01T20:47:50.127
> 
> 标签：python

> **可能重复：**
> [在 Python 中将字符串拆分为列表](https://stackoverflow.com/questions/743806/split-string-into-a-list-in-python)

我有一个文本文件，2011 2012 332 1972 ...

我需要使用一些索引访问这一行的单词（存储在文本文件中），可以是一个数组，比如 a[] 应该包含一行的内容，其中 a[] 的每个元素都应该是一个单词。现在，当我运行一个 for 循环时，我可以使用一些索引访问 a[] 的单词。像一个[0]，一个[1]。请建议一些方法...

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-01T20:52:34.523

使用这样的代码：

```
fh = open("foo")
line = fh.readline()
words = line.split() 
```

# php - 将 cron 配置为每 15 分钟运行一次 URL

> ID：14654735
> 
> 赞同：0
> 
> 时间：2013-02-01T20:47:51.520
> 
> 标签：php, cron, centos, crontab, centos6

我想设置一个 cron 作业以每 15 分钟访问一个 URL。我有一个带有 centos 6 的 VPS，可以访问 SSH。这是我到目前为止没有运气的尝试：

1.  在 ssh 中，输入“crontab -e”
2.  `* /15 * * * * wget (URL HERE)`
3.  点击“ESC”并输入“:wq”保存工作并退出

我确定我写这个的方式有问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T20:50:48.030

范围和步长之间不应有空格。

```
*/15 
```

# node.js - Nodemailer：ECONNREFUSED

> ID：14654736
> 
> 赞同：14
> 
> 时间：2013-02-01T20:47:59.550
> 
> 标签：node.js, nodemailer

我不知道我错过了什么，我使用 Nodemailer 示例：

```
var nodemailer = require("nodemailer");

// create reusable transport method (opens pool of SMTP connections)
var smtpTransport = nodemailer.createTransport("SMTP",{
    service: "Gmail",
    auth: {
        user: "gmail.user@gmail.com",
        pass: "userpass"
    }
});

// setup e-mail data with unicode symbols
var mailOptions = {
    from: "Fred Foo ✔ <foo@blurdybloop.com>", // sender address
    to: "bar@blurdybloop.com, baz@blurdybloop.com", // list of receivers
    subject: "Hello ✔", // Subject line
    text: "Hello world ✔", // plaintext body
    html: "<b>Hello world ✔&lt;/b>" // html body
}

// send mail with defined transport object
smtpTransport.sendMail(mailOptions, function(error, response){
    if(error){
        console.log(error);
    }else{
        console.log("Message sent: " + response.message);
    }

    // if you don't want to use this transport object anymore, uncomment following line
    //smtpTransport.close(); // shut down the connection pool, no more messages
}); 
```

我刚刚更改了用户并将身份验证传递给我的 gmail 帐户信息（也尝试了他们的值），并将“收件人”电子邮件地址更改为我的电子邮件地址。我得到：

```
{ [Error: connect ECONNREFUSED]
  code: 'ECONNREFUSED',
  errno: 'ECONNREFUSED',
  syscall: 'connect' } 
```

我错过了什么？我在文档中没有看到任何内容表明我需要做更多的事情，那么为什么它不起作用呢？先感谢您。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T15:52:06.550

这是一个防火墙问题。结果证明代码没有问题，我只是不明白错误消息的含义。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-05-23T11:12:36.957

以下步骤：

1.  登录 gmail 帐户。

2.  在设置选项卡中启用 pop3

3.  在以下位置[启用不太安全的应用：为 gmail 帐户启用不太安全的应用](https://myaccount.google.com/lesssecureapps)

4.  显示解锁验证码在：[显示解锁验证码](https://accounts.google.com/b/0/DisplayUnlockCaptcha)

5.  定义的电子邮件选项和发送

    ```
    var mailOptions = {
        host: 'smtp.gmail.com',
        port: 465,
        secure: true, // use SSL
        auth: {
            user: 'gmail_account@gmail.com',
            pass: 'password'
        }
    }    

    mailer = nodemailer.createTransport(mailOptions);

    mailer.sendMail({
    ....
    }, function(err, response) {
            if (err) {
                 console.log(err);
            }
            console.log(response);
    }); 
    ```

希望此块代码对您有所帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-07-24T12:27:21.207

我还使用 gmail 帐户发送电子邮件，您可能需要谷歌提供的应用程序特定密码才能让 nodemailer 正常工作。

[https://support.google.com/mail/answer/1173270?hl=en](https://support.google.com/mail/answer/1173270?hl=en)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-06T03:19:17.753

ECONNREFUSED 表明这是某种连接或防火墙问题。

您能否使用同一台机器上的任何其他应用程序（例如使用 openssl）连接到 smtp.gmail.com 端口 465？

```
openssl s_client -connect smtp.gmail.com:465 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-08-09T15:02:15.580

如果您使用新的 nodemailer 版本

```
nodemailer.createTransport({
    host,
    port,
    secure:,
    auth:{
        user,
        pass
    }
}) 
```

更多见[https://github.com/andris9/nodemailer-wellknown](https://github.com/andris9/nodemailer-wellknown)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-06-21T15:27:51.223

就我而言，我只需要禁用我的防病毒软件 Avast。

要在 avast 上加入白名单，请执行以下操作：

**这些步骤可能会因您的 Avast 版本而异，包括此处使用的 IP**

1) 打开 Avast，转到：菜单 -> 设置。（它位于右上角）

2) 转到常规选项卡 -> 例外 -> 添加例外

[![在此处输入图像描述](../Images/6fc6fadd3b4f794ad4b615518eea734d.png)](https://i.stack.imgur.com/OvvJL.png)

3) 获取您的 gmail 的 IP，我认为它会出现错误。 [![在此处输入图像描述](../Images/3c81679388cb2ca7152d7389be3a3e0d.png)](https://i.stack.imgur.com/7TcBU.png)

4）现在将IP粘贴到您的异常上 [![在此处输入图像描述](../Images/6191f179bbd02548e9ee245d6c8f0d6c.png)](https://i.stack.imgur.com/LpGZX.png)

希望能帮助到你。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-10-08T20:43:18.297

实际的问题修复是您需要放置**SERVICE**。如果您使用环境变量会更好

```
 var transporter = nodemailer.createTransport({
                service: process.env.EMAIL_SERVICE,
                auth: {
                    user:process.env.EMAIL_USER,
                    pass:process.env.EMAIL_PASSWORD
                }
            }) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-11-18T06:57:24.127

# 防火墙问题

要阻止防火墙以发送电子邮件，您需要允许端口或禁用所有端口。

允许特定端口：

```
$ sudo ufw allow 587 
```

禁用防火墙

```
$ sudo ufw disable

$ sudo ufw reset 
```

# java - 使用java nio在zip中行走文件树时出现nosuchfileexception

> ID：14654737
> 
> 赞同：2
> 
> 时间：2013-02-01T20:48:13.763
> 
> 标签：java, zip, nio, virtualfilesystem

我在使用 java nio 遍历 zip 文件的 VFS（虚拟文件系统）的文件树时遇到异常，这是我的代码：

```
public static void list(String zipFilePath) throws IOException{
    FileSystem fs = FileSystems.newFileSystem(Paths.get(zipFilePath), null);
    Path startPath = fs.getPath("/");

    Files.walkFileTree(startPath, new SimpleFileVisitor<Path>() {
        @Override
        public FileVisitResult preVisitDirectory(Path dir, BasicFileAttributes attrs) throws IOException {
            System.out.println("Dir : " + dir);
            return FileVisitResult.CONTINUE;
        }

        @Override
        public FileVisitResult visitFile(Path file, BasicFileAttributes attrs) throws IOException {
            System.out.println("\t->File : " + file);
            return FileVisitResult.CONTINUE;
        }
    });
} 
```

异常表示文件不存在，但我已经解压缩存档（zip），并且文件在那里......知道为什么吗？

这是一个例外：

```
java.nio.file.NoSuchFileException: /Dir1/Dir2/Dir3/Dir4/ExcelFile.xlsm
at com.sun.nio.zipfs.ZipPath.getAttributes(ZipPath.java:657)
at com.sun.nio.zipfs.ZipFileSystemProvider.readAttributes(ZipFileSystemProvider.java:285)
at java.nio.file.Files.readAttributes(Files.java:1669)
at java.nio.file.FileTreeWalker.walk(FileTreeWalker.java:105)
at java.nio.file.FileTreeWalker.walk(FileTreeWalker.java:199)
at java.nio.file.FileTreeWalker.walk(FileTreeWalker.java:69)
at java.nio.file.Files.walkFileTree(Files.java:2585)
at java.nio.file.Files.walkFileTree(Files.java:2618) 
```

*顺便说一句：*代码确实有效，但它与某些文件崩溃

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-29T13:37:20.363

当您使用 a`ZipFileSystem`时，它会管理存储路径（请记住，zip 中没有文件夹，只有文件，并且每个文件都由其完整路径名标识，直到选择要压缩的目录级别，因此它不是 zip 中的“myTextFile.txt”，其命名为“/Folder 1/Folder 2/myTextFile.txt”）；使用`Path` **总是** 使用“标准”文件分隔符（*nix OS）返回名称，但如果您的 zip 存档是使用 windows 文件分隔符存储的，它只会失败，如果您使用相同的方法创建文件，则不会发生这种情况你将使用打开，我的意思是，如果你使用`ZipOutputStream`和`ZipEntry`压缩你的文件，然后`ZipFileSystem`解压缩它，如果你不注意文件分隔符，它会失败。

现在，您可能会说，在您的情况下，为什么它仅在 zip 中的某些文件时失败，那么，当我使用导致此问题的软件时，我正在使用压缩文件`ZipOutputStream` `ZipEntry`，并且`Path`，我“手动”浏览文件树，直到我找到一个文件，并添加一个我正在使用的 zip 条目`Path`，然后将`String`要保存的文件的名称添加到名称中，并通过连接它来添加分隔符 ( `+"/"+`)。

你可能会说“好吧，我明白你在说什么，但是，为什么当你使用第三方软件解压缩存档时它会工作？”，这很简单，因为它们替换了所有文件分隔符在每个文件名中查找以确保它们始终使用相同的文件分隔符，无论是“/”还是“\”...

**经验教训：**不要混合东西！！！使用一种方法来压缩和解压缩您的档案，或者确保所有信息都存储在相同的“名称”下，确保您每次都使用完全相同的文件分隔符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-28T01:53:01.493

我知道这是一个旧帖子，但这恰好发生在我身上。我所有的 zipfile 都是由第三方创建的，即 Microsoft Word。我什至无法捕获异常以找出 zip 中的哪个输入文件导致 NoSuchFileException，因为 Java 编译器说：

NoSuchFileException 无法解析为类型

# php - 在模板中包含 Assetic 的组合输出

> ID：14654739
> 
> 赞同：0
> 
> 时间：2013-02-01T20:48:22.660
> 
> 标签：php, symfony, twig, assetic

我正在使用 Symfony2 编写一个应用程序，我有一种情况，我想组合所有 CSS 和 Javascript 资源并将它们包含在我的 Twig 模板中，这样最后只有一个文件通过 HTTP 返回要求。

```
 {% block stylesheets %}
        {% stylesheets output='web/css/combined.css' combine=true 
            '@stylesheet1.css'
            '@stylesheet2.css'
            '@stylesheet3.css'
            '@stylesheet4.css'
        %}
        {% endstylesheets %}

        // PSEUDO

        include 'combined.css'

        // END PSEUDO
    {% endblock %} 
```

因此，我希望直接访问输出，而不是使用 Assetic 仅组合文件然后引用它们。所有的 CSS 都在一个`<style>`标签中，所有的 JS 都在一个`<script>`标签中。

有没有办法在不扩展现有库的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T15:29:01.367

为什么要直接访问组合资产？

事实上，assetic 就是这样做的：在**开发**环境中`<style>`，每个样式表都有一个标签，而在**生产**环境中，它们都组合在一个 .css 文件中，因此使用一个`<style>`. 当然，javascript 文件也会发生同样的情况。

要使后者工作（在**prod**环境中），您需要手动转储它们：

```
php app/console assetic:dump --env=prod 
```

查看 dev/prod 中的源 HTML weh。我从未使用过该`combine`选项，也[没有关于它的官方 Symfony 2 文档](http://symfony.com/doc/current/cookbook/assetic/asset_management.html)。

# canvas - 如何渲染一个 inserted by MathJax onto a

> ID：14654748
> 
> 赞同：3
> 
> 时间：2013-02-01T20:49:09.330
> 
> 标签：canvas, svg, mathjax

我正在尝试将 MathJax 集成到我的网络应用程序中。我想使用 MathJax 将方程渲染到 <canvas>

我已经能够诱使 MathJax 向 DOM 添加一个 < svg > 元素。但我不知道如何从 <svg> 到 canvas.ctx.drawImage()

我阅读了一些关于 XMLSerializing the < svg > 的帖子。但是当我（本地）执行以下操作时

```
svg = $('svg').eq(0)
asStr = new XMLSerializer().serializeToString(svg) ; 
```

我从 Firefox 收到“安全错误”。

插入的 < svg > MathJax 的初始部分粘贴在下面

```
<svg><defs id="MathJax_SVG_glyphs"><path id="MJMAIN-24" stroke-width="10" d="M162 187Q162 164 146 149T109 
```

所以我想知道你是否可以帮助我了解是否

1.  < svg > 元素看起来不错，或者其中是否存在使 XMLSerialization 不可行的东西？
2.  我怎样才能从上面开始到 ctx.drawImage()

谢谢阿比纳夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T21:40:47.180

不能为 XMLSerializer 提供 jQuery 对象。我想你想要

asStr = new XMLSerializer().serializeToString(svg[0]) ;

所以你没有传递一些 jQuery 的东西。

# c - 在各种机器上优化 C 库的构建/编译任务的最佳方法

> ID：14654750
> 
> 赞同：1
> 
> 时间：2013-02-01T20:49:12.277
> 
> 标签：c, build, compilation, build-process, build-automation

我们需要在`C`具有不同编译器选项（如编译器标志、32 位或 64 位、静态或动态、字节序等）的各种环境（如 suse x86、suse itanium、solaris、HPUX、IBM AIX）上构建一个库。目前我们正在大约 200 台构建机器上构建它。我们有一个高效的生成文件，但我们仍然需要登录到各种机器并执行`FTP`获取代码，然后执行`make`然后再次传输库。然后我们需要将所有 200 个平台库保存在一台发布机器中。

我们的意图是减少手动登录不同机器以触发构建的工作，最好的方法是什么？

通过在一台 linux 机器上编写脚本来自动执行此操作的一种方法，该`expect`脚本将登录所有 200 台机器，触发构建并取回库并将其保持在原位。

与为 200 个构建编写预期脚本相比，是否有其他方法可以减少工作量？例如，我们需要构建大约 50 个`Vxworks`平台，因为我们只有在一台 Windows 机器上拥有 tornado 包（交叉编译器），它将支持所有 50 个平台。为此，我们编写了一键式自动化脚本（不需要登录到 50 台机器的小脚本）。

同样，如果交叉编译器可用于所有 *nix 机器（suse、solaris、hpux、ibm aix 等）编译器，我们可以将所有这些安装在一台机器上（linux 或 windows）。然后我们可以编写一个脚本来自动化一台机器上的所有 200 个构建，而无需编写用于远程登录或 ftp 的脚本。

或者有没有其他简单的方法来处理多个 *nix 平台中的构建？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T23:33:42.920

[詹金斯](https://wiki.jenkins-ci.org/display/JENKINS/Distributed+builds)对你来说有可能吗？它在 Java 项目 (C/C++/C#) 之外变得越来越流行。据我了解，詹金斯会很合适。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T02:03:22.447

看看 GNU [AutoTools](http://www.dwheeler.com/autotools/)。每个人都知道如何使用他们的输出（典型的`./configure; make; make install`舞蹈），对目标没有奇怪的要求，拥有广泛的机器来处理操作系统的变幻莫测。不过，它的学习曲线相当陡峭。

# c++ - 如何使用 C++ 在 Windows 中添加虚拟文件夹

> ID：14654751
> 
> 赞同：3
> 
> 时间：2013-02-01T20:49:13.370
> 
> 标签：c++, c, mfc, cloud, windows-shell

我不确定我是否使用了正确的术语。比如说，微软的 SkyDrive 应用程序在本地计算机上创建了一个虚拟的“Skydrive”文件夹。我很想知道如何用 C++/MFC 添加这样的虚拟文件夹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T21:13:58.343

那不是一个[虚拟文件夹](http://msdn.microsoft.com/en-us/library/windows/desktop/cc144096%28v=vs.85%29.aspx)。它是由 PathMakeSystemFolder 创建的系统文件夹，因此系统知道您在 desktop.ini 中进行了一些自定义。Skydrive 只是自定义了文件夹的图标。

参考：[如何使用 Desktop.ini 自定义文件夹 (Windows)](http://msdn.microsoft.com/en-us/library/windows/desktop/cc144102%28v=vs.85%29.aspx)

# c++ - 为什么我应该在抛出异常指针时使用按引用捕获

> ID：14654752
> 
> 赞同：3
> 
> 时间：2013-02-01T20:49:15.617
> 
> 标签：c++, visual-c++, exception, mfc

当通过引用捕获异常时，我得到的唯一优势是避免生成异常对象的副本？基本上两者的区别

```
try
{
    CString a_csSQL = _T("SELECT * FROM Library");
    CDatabase aDB;
    aDB.OpenEx(g_csConnectionStringWdDSN,CDatabase::noOdbcDialog));
    aDB.ExecuteSQL(a_csSQL);
}
catch(CDBException *& ex)
{
    ex->Delete();
} 
```

和

```
try
{
    CString a_csSQL = _T("SELECT * FROM Library");
    CDatabase aDB;
    aDB.OpenEx(g_csConnectionStringWdDSN,CDatabase::noOdbcDialog))
    aDB.ExecuteSQL(a_csSQL);
}
catch(CDBException * ex)
{
    ex->Delete();
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T20:56:46.583

您发布的两个代码之间的区别在于，第一个通过引用捕获指向异常的指针，第二个通过值捕获*指向**异常*的指针。在这两种情况下都不会复制异常，因为您正在处理指针。

一般来说，异常应该按值抛出，并通过引用捕获。C++ 标准库的设计考虑了这种期望。但是，较旧的库（例如 MFC）像您在此处所做的那样通过*指针*引发异常，并且预计会被指针捕获。

*按值捕获指针*和按引用捕获指针之间没有有效的区别，除非您按引用捕获，它为您提供删除异常、分配具有相同指针的新异常并重新抛出相同异常的（完全无用的）选项 -指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T20:57:25.117

如果异常是由指针引发的，则可以避免使用引用。

如果异常是按值抛出的，则确实需要引用。

# javascript - 如何在 Javascript 中将其转换为整数？

> ID：14654753
> 
> 赞同：0
> 
> 时间：2013-02-01T20:49:19.817
> 
> 标签：javascript

我昨天问了一个类似的问题。如果我有例如 0-9999，我怎么能把它变成 09999，基本上删除 - 并在 javascript 中使它成为一个整数？

变量 = 0-9999

把它变成 9999 整数

或 var = 2-9999 ，把它变成 29999

谢谢一堆

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T20:51:48.060

这应该可以解决问题：

```
num = num.replace(/[^0-9]+/g, '') * 1; 
```

它将去除所有非数字字符并将变量转换为整数。这是为您提供的[jsFiddle 演示](http://jsfiddle.net/ynu9z/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T20:51:57.827

最明显和最基本的解决方案是：

```
var s = "1-2345";
var t = s.replace("-","");
var i = parseInt(t,10); 
```

但这会做出很多假设并忽略任何错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T20:53:04.983

尝试这个：

```
var i = '0-9999';
var int = Number(i.replace('-', ''));
window.alert(int); 
```

请注意，在 Firefox 中，`parseInt()`除非您传入基数（这似乎是一个错误），否则无法使用前导零：

```
var int = parseInt(i.replace('-', ''), 10); 
```

[提琴手](http://jsfiddle.net/XUUxH/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T21:10:25.883

请记住

```
var x = 2-9999 
```

是相同的

```
var x = -9997 
```

因为破折号被视为减法符号，除非您使用引号（单引号或双引号，没关系）。

因此，假设您正确引用了文本，您可以使用以下函数始终提取文本任何给定位置的字符（使用从零开始的索引）。

```
function extractChar(myString,locationOfChar){
    var y = myString.substring(0,locationOfChar-1)
    var z = myString.substring(locationOfChar+1)
    var s = y.concat(z)
    var i = parseInt(s,10)
    return i 
} 
```

所以

```
var i = extractChar("2-9999",1) 
```

将与

```
var i = 29999 
```

# asp.net - ASP.NET MVC - 在 fer 分钟不活动后擦除会话数据

> ID：14654754
> 
> 赞同：1
> 
> 时间：2013-02-01T20:49:23.673
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

在我的 Web 应用程序中，我经常可以看到，当我几分钟没有做任何事情时，然后我回来并刷新页面 - 我仍在登录，但我的会话数据全部消失了！

在`login()`操作中，我设置了一些`Session[]`页面正常工作所必需的对象。我不知道为什么要这样做，但我需要它在清除用户会话数据时注销用户。

我已阅读有关设置`<sessionState mode="InProc" timeout="20"/>`但每次刷新页面时都会刷新此超时吗？或者它会在我登录后 20 分钟后用完？如果我让这个计时器比我保持用户在线的时间更大怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T21:01:13.237

回发到服务器将使会话保持更长时间。这是一个滑动到期。有两种方法可以从客户端处理，客户端不知道这个 20 分钟超时：

*   使用客户端 javascript 创建一个计时器，该计时器在 20 分钟时重定向到注销页面
*   每当回发发生时，检查会话是否过期（可以通过多种方式完成，例如检查 Session.IsNewSession，查看您的对象是否丢失等），然后在处理请求之前重定向到注销处理程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T21:12:16.103

我假设您正在使用表单身份验证。那是对的吗？如果是这样，您需要让表单身份验证票证的超时时间与会话超时时间相匹配。

用户通过一个比最初看起来更复杂的过程保持登录状态。cookie 存储在用户的浏览器中，称为 Forms Authentication Ticket。如果用户在会话超时限制之后保持空闲状态，服务器将丢弃会话。但在下一个请求中，Forms Authentication Ticket 将被传回 Web 服务器。服务器验证票证，如果票证仍然有效，则用户重新登录。

如您所见，用户的会话没有恢复。如果您想要这种行为，则必须自己检测这种情况并恢复会话。

解决方案是将 Forms Authentication Ticket 的超时设置为与 Session 超时相同。您可以在 Web.config 文件中完成此操作，[如下所述](http://weblogs.asp.net/scottgu/archive/2005/11/08/430011.aspx)：

```
<system.web>
    <authentication mode="Forms">
          <forms timeout="20"/>
    </authentication>
</system.web> 
```

超时值以分钟为单位。一旦 Forms Authentication Ticket 超时，用户将被注销。这与会话的超时无关，但如果它们相同，它们将在大致相同的时间到期。如果您想完全安全，请将 Forms Authentication Ticket 超时设置为比会话超时短一点。用户将在会话超时之前注销。当他们再次登录时，他们将获得一个新会话。旧会话最终将自行超时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T21:01:53.690

尝试检查：

> **问：在 Proc 模式下，为什么我偶尔会丢失所有会话？**
> 
> 答：请参阅本文“了解会话状态模式”部分中的“稳健性”部分。
> 
> **鲁棒性**
> 
> InProc - 如果工作进程 (aspnet_wp.exe) 回收，或者应用程序域重新启动，会话状态将丢失。这是因为会话状态存储在应用程序域的内存空间中。重启可能是由于修改了某些配置文件如 web.config 和 machine.config，或 \bin 目录的任何更改（如使用 VS 重新编译应用程序后的新 DLL），详情请参阅 KB324772 . 在 v1 中，还有一个错误会导致工作进程重新启动。它已在 SP2 和 v1.1 中修复。请参阅 KB321792。

来源 - [http://forums.asp.net/t/7504.aspx/1](http://forums.asp.net/t/7504.aspx/1)

# php - 将数据移动到其他数据库的最简单方法

> ID：14654757
> 
> 赞同：0
> 
> 时间：2013-02-01T20:49:28.050
> 
> 标签：php, python, sql, database, migration

我的博客有两个版本：第一个是用 PHP 编写并使用 MySQL，但第二个是新版本，是用 Python 编写并使用 Postgres。

我的目标是将数据从一个移动到另一个。表名和架构更改。

我的想法是为旧站点制作 ORM 模型，并使用循环，使用 ORM 获取数据并将其放入新数据库中，因为我的新站点也有 ORM 模型。

它看起来像：

```
old_articles = OldArticle.objects.all()
for old_article in old_articles:
    new_article = NewArticle()
    new_article.title = old_article.name
    new_article.content = old_article.body
    new_article.save() 
```

ORM 可以轻松抽象出数据库之间的差异，在我看来，这实际上可以工作！或者没有，有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T00:09:05.480

如果这种迁移只进行一次，我不会采用 ORM 方式。可以从 MySQL 导出符合标准的 SQL 转储，并且可以轻松地将转储导入 PostgreSQL。数据在 PostgreSQL 中后，运行迁移查询以更改方案或使用临时“导入”表并将数据复制到新方案/布局中的表中。

测试所有迁移查询并编写一个场景，其中包含要执行的所有步骤、要运行的查询以及运行顺序。还包括需要执行的手动步骤。

一旦您确定迁移方案正确并经过全面测试，请将您的旧博客置于“维护模式”（抱歉，我们处于离线状态，我们很快就会回来）并真正做到这一点！

最重要的是：测试你的场景，验证结果，慢慢来，你不应该着急做这些事情！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T20:52:03.500

有很多图书馆可以做这种事情。我会坚持一些已经实施并经过良好测试的东西。这是一个指向 postgres wiki 的链接，其中列出了用于执行此操作的工具列表。

[http://wiki.postgresql.org/wiki/Converting_from_other_Databases_to_PostgreSQL](http://wiki.postgresql.org/wiki/Converting_from_other_Databases_to_PostgreSQL)

# android - 即使使用正确的 api 密钥，Android 自动完成的 Google Places API 请求也会被拒绝

> ID：14654758
> 
> 赞同：21
> 
> 时间：2013-02-01T20:49:27.487
> 
> 标签：android, google-places-api

我正在尝试使用本教程中描述的 Google Places API 创建一个自动完成字段，该字段应在用户类型时获取城市： [https ://developers.google.com/places/training/autocomplete-android](https://developers.google.com/places/training/autocomplete-android)

您可能以前和我一样多次发现这个问题，但没有一个答案对我有帮助。以下是你应该知道的事情：

网址是 [https://maps.googleapis.com/maps/api/place/autocomplete/json?sensor=false&key=myKey&components=country:ro&input=whatTheUserTypes](https://maps.googleapis.com/maps/api/place/autocomplete/json?sensor=false&key=myKey&components=country:ro&input=whatTheUserTypes)

请不要回复说您用自己的 API 密钥替换了它并且它可以工作 - 那里的 API 密钥必须是 Android 特定的，并且不能在浏览器中工作。

我是否使用从我签署应用程序的密钥库中获得的 SHA1 指纹来制作 Android API 密钥。我从控制台打开了 Maps and Places API。未超过配额。

所有这些，它仍然给我 REQUEST_DENIED

我没有提到的是我激活了 O2Auth - 这会改变什么吗？不应该是把API key放到app里那么简单吗？

谢谢！

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2013-12-27T07:40:20.730

虽然已经回答了这个问题，但我认为社区可以做得更好。

我为此烦恼不已，这对我来说没有意义..我正在制作一个iOS / Android应用程序，所以我制作了一个iOS / Android密钥...... **错了。**

使用 Google 的 Places API，甚至不会考虑您的捆绑标识符。

你真正想做的是：（我正在使用新的用户界面）

**1\. 登录[https://cloud.google.com/console#/project](https://cloud.google.com/console#/project)**

选择您的项目名称，然后进入**API's & Auth > APIs**

确保您已打开 Places API。这是唯一需要打开 Places-API 才能工作的东西。 ![在此处输入图像描述](../Images/91614087d6fc5dba5e853bef73c21242.png)

**2.进入凭证**

单击公共 API 访问下的创建新密钥 ![在此处输入图像描述](../Images/4767e4f4f6355217eddd7ea8f9633760.png)

**3\. 选择浏览器密钥** ![在此处输入图像描述](../Images/604c1813532b168270424ef0047a7d84.png)

**4.点击创建，没有别的**

将 HTTP 引用框留空。

![在此处输入图像描述](../Images/1b78d83e7364d6a06c179378609cfdbd.png)

**5.使用这里生成的密钥**

此密钥将允许来自任何设备的任何用户通过您的开发人员登录访问 API。您可以在这里尝试一下：（请务必将**YOUR_KEY_HERE**替换为您生成的密钥）

```
https://maps.googleapis.com/maps/api/place/autocomplete/json?input=Food%20Sh&sensor=false&radius=500&location=0,0&key=YOUR_KEY_HERE 
```

**6.享受**

现在您可以在您的 Android/iOS 设备中使用上面的 URL。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-02-07T05:51:19.260

Google Places API 当前不支持从 Google API 控制台生成的 Android 或 iOS 密钥。当前仅支持服务器和浏览器键。

如果您想请求此支持，请提交[Places API - 功能请求](https://code.google.com/p/gmaps-api-issues/issues/detail?id=4896)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-08-02T01:42:57.050

[https://developers.google.com/places/training/autocomplete-android](https://developers.google.com/places/training/autocomplete-android)

> 存储您的 API 密钥
> 
> 尽管上面的代码演示了如何在 Android 应用程序和 Places Autocomplete 服务之间直接通信，但您不应将 Places API 密钥存储在您的应用程序中。
> 
> 因此，您应该构建一个 Web 应用程序来存储您的 API 密钥并代理 Places API 服务。为了保护您的 Android 应用程序和代理 Web 服务之间的通信，您应该要求对您的代理 Web 服务进行用户身份验证。您的 Android 应用可以安全地存储用户凭据并将其传递给您的 Web 服务，或者用户可以通过 Android WebView 登录到您的 Web 应用。
> 
> 对于后一种方法，您的 Web 应用程序应创建用户身份验证令牌并将其返回给您的 Android 应用程序，然后您的 Android 应用程序应随后将此令牌传递给您的代理 Web 服务。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-05-10T09:52:43.867

转到谷歌云平台控制台>**凭据**单击编辑，选择您的**YOUR_API_KEY** >**应用程序限制**>选择**无**选项>**保存**就是它。

如果您从**应用程序限制中选择****android 应用程序**选项，则谷歌会拒绝该地点 API，但会出现异常**REQUEST_DENIED**。

 ***** * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-31T08:42:06.640

在 Google 开发控制台中，您应该能够找到“Places API”和“Places API for Android”

![开发控制台搜索](../Images/e96aacab6d8d27e278ad8bef75d5d467.png)

确保使用“Places API for Android”

由于某种原因，“Places API for Android”隐藏在 API 列表中，但可以使用搜索访问。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-17T18:03:22.537

我还是新手，所以我无法发表评论，但为了阐明 Moe 的答案，我通过以下步骤解决了一些关于 URL 查询（用于方向，使用 Volley）的类似 Google Maps API 问题：

1.  获取 Android API 密钥（在我的例子中包括 Google Maps Directions API）。
2.  获取“服务器”API 密钥（这似乎是通过使用“HTTP 引用者”的密钥限制来创建的 - 实际上，它只是用于通过 HTTP 发出 URL 查询）。
3.  将 Android API 密钥作为`meta-data`标签存储在`application`标签中`AndroidManifest.xml`，`android:name="com.google.android.maps.v2.API_KEY"`并`android:value`作为您的密钥。这用于与 Maps API 的直接交互（减去 URL 查询）。
4.  每次发出 URL 查询时使用服务器 API 密钥。

我不确定这是否也适用于 Places API 的 URL 查询，是否只需要服务器 API 密钥，或者是否有更好的解决方案，但这对我有用。

我想它只适用于第一个键 - 不限于 Android。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-24T23:00:43.503

我有同样的问题，我通过离开来解决它

> 接受来自这些 HTTP 引荐来源网址（网站）的请求（可选）

在浏览器键中为空

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-09-09T02:19:31.173

在 Google Cloud Console 中输入 Places 并激活它。像往常一样创建一个 API 密钥并将其插入到您的 Android Studio 应用程序中。就是这样。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-02-04T18:06:03.437

我有同样的问题。对我来说，关键是启用项目计费。我仍在使用“Android 应用程序”限制。设置付款方式后，Places Api 开始工作。

> 在使用 Places SDK for Android 之前，请执行以下操作：
> 
> *   按照获取 API 密钥指南获取、添加和限制 API 密钥。
> *   为您的每个项目启用计费。
> *   为您的每个项目启用 Places API。

[在那里](https://developers.google.com/places/android-sdk/start)看到它。

请务必查看 Google Places API 的计费计划，因为它不是免费的！****

# mysql - 从运行在同一台服务器上的多个数据库中获取记录？

> ID：14654762
> 
> 赞同：2
> 
> 时间：2013-02-01T20:49:54.350
> 
> 标签：mysql, database

我正在将应用程序升级为基于 ERP 的解决方案，组织需要更多功能来轻松管理他们的任务，但我面临的问题是它包含 20 组不同的数据库。让我更具体一点。

大约有 20 个数据库命名为`b_d1, b_d2,b_d3 and so on till b_d20.` 每个数据库有 2 个表，其中包含所有用户相关信息，例如（d1_g_members 和 d1_s_members）

所以你可以说对于 b_d1 数据库有 2 个表`d1_g_members and d1_s_members`，以这种方式类似，所有 20 个数据库都有这些表。

现在来到我的问题，我想对所有这些数据库表执行查询，其中包含 where 子句含义：

例子：

假设在我的每张表中都有一个字段`DATE OF JOINING`，我想根据他们加入这 20 个 dbs 的日期列出所有成员。我该怎么做？

我希望我能澄清我的观点到目前为止.. ??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T21:02:27.430

尝试将此作为示例，仅连接两个数据库和相应的表。然后根据上面提到的评论创建视图。`JOIN`根据要拉出的数据调整s：

```
SELECT t1.col1, t2.col2 FROM db1.tb1 t1 
JOIN db2.tb2 t2 
ON t1.col1=t2.col1 
WHERE t2.col1 IS NOT NULL
AND t1.DATE_OF_JOINING ? -- your condition for date
; 
```

# php - 如果 .htaccess 中没有模式匹配，如何重定向到主页

> ID：14654764
> 
> 赞同：1
> 
> 时间：2013-02-01T20:50:02.903
> 
> 标签：php, apache, .htaccess, mod-rewrite, redirect

朋友们，我是 .htaccess 和 Rewrite Rule 的新手，对这些规则非常困惑。我正在尝试为 index.php 页面执行以下这些行。当我在 url 中写入一个或两个或三个或四个查询参数时，它就可以了。这些模式匹配中的任何一个我都会收集查询并在 php.ini 中继续进行。但是当查询参数超过四个参数时（比如有人故意尝试提供错误的 url），我想将页面重定向到主页。我在互联网上的任何地方都没有找到任何解决方案。任何人都可以帮助我，如何做到这一点。**我非常想要一个解决方案来完成这个项目并且非常迫切需要。**我读了很多文章，但不明白如何处理这个问题。我在 Win 7 上使用 XAMPP 执行这些所有任务。我使用的模式是，

RewriteRule ^([a-zA-Z0-9_]+)/?$ index.php?levelone=$1 [NC]

重写规则 ^([a-zA-Z0-9_]+)/([a-zA-Z0-9_]+)/?$ index.php?levelone=$1&leveltwo=$2 [NC]

重写规则 ^([a-zA-Z0-9_]+)/([a-zA-Z0-9_]+)/([a-zA-Z0-9_]+)/?$ index.php?levelone=$1 &leveltwo=$2&levelthree=$3 [NC]

重写规则 ^([a-zA-Z0-9_]+)/([a-zA-Z0-9_]+)/([a-zA-Z0-9_]+)/([a-zA-Z0-9_ ]+)/?$ index.php?llevelone=$1&leveltwo=$2&levelthree=$3&levelfour=$4 [NC]

* * *

**URL 示例：（** 比如说 localhost/myproject/index.php 是我的主页）

本地主机/myproject/levelone/

本地主机/我的项目/levelone/leveltwo/

本地主机/myproject/levelone/leveltwo/levelthree/

本地主机/我的项目/levelone/leveltwo/levelthree/levelfour

**当我使用这四个 Url 时就可以了，但是如果我使用**

localhost/myproject/index.php/levelone/leveltwo/levelthree/levelfour/levelfive/levelsix/

然后我的 index.php 页面返回一些没有样式和布局的 html，我在 .htaccess 中尝试了多种类型的 RewriteCond 和命令，但都是徒劳的。

我希望**查询字符串参数必须在 1 到 4 的范围内，如果它超出范围说五个参数，那么页面必须**再次重定向到主页（/index.php），否则匹配模式。如果有人知道是否有办法将所有这四种长模式组合在一条短线中以匹配四种中的任何一种，这将对我有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-12-02T17:54:54.773

仅当不存在已存在的文件或目录时，此重写规则才会生效。

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule . /path/to/index.php [L,QSA] 
```

-f 标志将仅在文件不存在时才开始重写，而 -d 标志将确保在目录存在时不会开始重写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T21:30:17.873

我建议避免重定向到主页。在 index.php 中，如果没有设置任何级别变量，则默认显示主页内容。

这是一条规则（也许可以进一步简化）：

```
RewriteRule ^(?:([a-zA-Z0-9_]+)\/)?(?:([a-zA-Z0-9_]+)\/)?(?:([a-zA-Z0-9_]+)\/)?(?:([a-zA-Z0-9_]+)\/)?$ index.php?level1=$1&level2=$2&level3=$3&level4=$4 [L] 
```

和 PHP：

```
$levels=array();

foreach (range(1,4) as $i) {
  if (isset($_GET['level'.$i])) {$levels[$i]=$_GET['level'.$i];}
}

if (!empty($levels)) {
  // show level content
} else {
  // show home page
} 
```

# ack - ack 尝试将文件关联到 javascript 时出现错误

> ID：14654765
> 
> 赞同：0
> 
> 时间：2013-02-01T20:50:04.453
> 
> 标签：ack

在我的 ~/.ackrc 我有这一行：

```
--type-add=javascript=.pkg 
```

现在，当我尝试运行时`ack foo`，出现错误：

```
$ ack foo
ack: --type-add: Type "javascript" does not exist, creating with ".pkg" ... 
```

这是什么意思？以及我该如何解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T20:57:25.773

`--type-add`表示“将 .pkg 添加到已知 javascript 扩展列表”。这里的“添加”是指扩展名，而不是类型。您收到警告是因为没有名为“javascript”的类型。

如果您想创建一个名为“javascript”的新文件类型，请使用`--type-set=javascript=.pkg`.

如果要将 .pkg 添加到现有`js`类型识别的扩展名列表中，请使用`--type-add=js=.pkg`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T21:00:22.430

您的问题是 --type-add 用于扩展*现有*类型；为了创建一个新类型，你必须使用 --type-set，像这样：

```
--type-set=javascript=.pkg 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T20:58:07.227

它需要是“js”而不是“javascript”，难怪我在他们的文档中找不到它：

```
--type-add=js=.pkg 
```

# android - 创建片段：构造函数与 newInstance()

> ID：14654766
> 
> 赞同：58
> 
> 时间：2013-02-01T20:50:06.997
> 
> 标签：android, constructor, android-fragments, default-constructor

我最近厌倦了`String`在`Bundles`创建我的`Fragments`. 所以我决定为我的构造函数制作`Fragments`我想要设置的参数，并`Bundles`使用正确的`String`键将这些变量放入其中，因此无需其他键`Fragments`并`Activities`需要知道这些键。

```
public ImageRotatorFragment() {
    super();
    Log.v(TAG, "ImageRotatorFragment()");
}

public ImageRotatorFragment(int imageResourceId) {
    Log.v(TAG, "ImageRotatorFragment(int imageResourceId)");

    // Get arguments passed in, if any
    Bundle args = getArguments();
    if (args == null) {
        args = new Bundle();
    }
    // Add parameters to the argument bundle
    args.putInt(KEY_ARG_IMAGE_RES_ID, imageResourceId);
    setArguments(args);
} 
```

然后我像往常一样拿出这些论点。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Log.v(TAG, "onCreate");

    // Set incoming parameters
    Bundle args = getArguments();
    if (args != null) {
        mImageResourceId = args.getInt(KEY_ARG_IMAGE_RES_ID, StaticData.getImageIds()[0]);
    }
    else {
        // Default image resource to the first image
        mImageResourceId = StaticData.getImageIds()[0];
    }
} 
```

然而，Lint 对此提出了质疑，说不要让`Fragment`带有其他参数的构造函数的子类，`@SuppressLint("ValidFragment")`甚至要求我使用它来运行应用程序。问题是，这段代码工作得很好。我可以使用`ImageRotatorFragment(int imageResourceId)`或老式的方法`ImageRotatorFragment()`并`setArguments()`手动调用它。当 Android 需要重新创建 Fragment（方向更改或内存不足）时，它会调用`ImageRotatorFragment()`构造函数，然后将相同的参数`Bundle`与我的值一起传递，这些值设置正确。

所以我一直在寻找“建议”的方法，并看到很多使用参数`newInstance()`创建的例子`Fragments`，这似乎和我的构造函数一样。所以我自己做了一个测试，它和以前一样完美无瑕，除了 Lint 抱怨它。

```
public static ImageRotatorFragment newInstance(int imageResourceId) {
    Log.v(TAG, "newInstance(int imageResourceId)");

    ImageRotatorFragment imageRotatorFragment = new ImageRotatorFragment();

    // Get arguments passed in, if any
    Bundle args = imageRotatorFragment.getArguments();
    if (args == null) {
        args = new Bundle();
    }
    // Add parameters to the argument bundle
    args.putInt(KEY_ARG_IMAGE_RES_ID, imageResourceId);
    imageRotatorFragment.setArguments(args);

    return imageRotatorFragment;
} 
```

我个人发现使用构造函数比知道使用`newInstance()`和传递参数更常见的做法。我相信您可以在活动中使用相同的构造函数技术，并且 Lint 不会抱怨它。**所以基本上我的问题是，为什么谷歌不希望你使用带参数的构造函数 for `Fragments`？**

我唯一的猜测是，您不要尝试在不使用 的情况下设置实例变量`Bundle`，重新创建时不会设置该变量`Fragment`。通过使用`static newInstance()`方法，编译器不会让您访问实例变量。

```
public ImageRotatorFragment(int imageResourceId) {
    Log.v(TAG, "ImageRotatorFragment(int imageResourceId)");

    mImageResourceId = imageResourceId;
} 
```

我仍然觉得这不足以成为禁止在构造函数中使用参数的充分理由。其他人对此有见解吗？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-02-01T21:03:17.430

> 我个人发现使用构造函数比知道使用 newInstance() 和传递参数要普遍得多。

[工厂方法模式](http://en.wikipedia.org/wiki/Factory_method_pattern)在现代软件开发中相当频繁地使用。

> 所以基本上我的问题是，为什么谷歌不希望你使用带有参数的构造函数来处理片段？

你是在自问自答：

> 我唯一的猜测是，您不要尝试在不使用 Bundle 的情况下设置实例变量，在重新创建 Fragment 时不会设置该实例变量。

正确的。

> 我仍然觉得这不足以成为禁止在构造函数中使用参数的充分理由。

欢迎您发表意见。欢迎您在每个构造函数或每个工作空间的方式上禁用此 Lint 检查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-08T11:38:20.450

Android 仅使用默认构造函数重新创建它杀死的片段，因此我们在其他构造函数中所做的任何初始化都将丢失。因此数据将丢失。

# windows - 在 VB.net 中以编程方式访问隐藏共享

> ID：14654769
> 
> 赞同：4
> 
> 时间：2013-02-01T20:50:16.753
> 
> 标签：windows, vb.net

我有一个简单的方法将文件夹移动到新目录

```
 Dim firstshare As String = "\\myshare\users\" & frmDeparture.txtUsername.Text
        Dim destination As String = "\\secondshare\userarchives$\" & frmDeparture.txtUsername.Text

        Try
            If Directory.Exists(firstshare) Then
                Directory.Move(firstshare, destination)
                MsgBox("Folder moved from \\firstshare\users")
            End If
        Catch ex As Exception
            MsgBox("Error finding folder")
        End Try 
```

如果我将“destination”设置为“\path\whatever”之类的路径，这可以正常工作，但如果它是隐藏路径（带有 $），则它不起作用。为了以编程方式访问隐藏的共享，我需要做些什么特别的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T13:43:33.637

您很可能试图将目录从一个卷/分区移动到另一个，并且您收到此错误：

> 源路径和目标路径必须具有相同的根。移动不适用于卷

[在这里](http://www.jdsweblog.com/2010/10/directorymove-doesnt-move-files-across.html)找到了为什么这是不可能的解释。您可以跨不同卷移动目录的唯一方法是在目标卷中创建一个新目录并从源复制文件。然后，您可以根据需要删除原始文件。

# bash - 不添加目录或文件时 grep 会做什么

> ID：14654775
> 
> 赞同：3
> 
> 时间：2013-02-01T20:50:38.383
> 
> 标签：bash, grep

我最近一直在使用 egrep 命令（只是出于对 grep 的偏好），我注意到一种我不完全理解的行为。当我在我的主目录中运行以下命令时： `egrep -r "main" *` 它会执行我期望的操作并返回所有包含“main”的行和相应的文件。

虽然如果我输入： `egrep -r "main"` 并且忘记把星星放在最后，它似乎只是永远挂着。我希望有人能够阐明为什么会这样以及它在做什么？

谢谢 ：）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T20:52:56.987

它正在等待`stdin`来自手册页的输入，因为您没有指定文件名`grep`：

```
NAME
   grep, egrep, fgrep - print lines matching a pattern

SYNOPSIS
   grep [options] PATTERN [FILE...]
   grep [options] [-e PATTERN | -f FILE] [FILE...]

DESCRIPTION
   Grep searches the named input FILEs (or standard input if no files
   are named, or the file name - is given) for lines containing a
   match to the given PATTERN.  By default, grep prints the matching lines. 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T20:55:18.180

grep（或 egrep）需要知道要搜索的文件。通过包含`*`，您是在告诉它搜索当前目录中的所有文件。

如果您不包含`*`，它不知道在哪里查找，因此它会等待您的输入，并会提示您输入进行搜索（输入，然后按 ctrl+d 终止标准输入模式）。

这种行为并不是 grep 独有的。任何需要输入的命令都希望输入来自文件或标准输入 (stdin)。

标准输入数据可以来自管道，也可以在输入命令后在提示符下手动输入（当您认为它已挂起时，您会看到）。正如我所提到的，按 Ctrl+D 将使您退出该输入模式。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-01T20:52:12.743

您没有提供路径，因此 grep 等待`stdin`数据。

路径示例：

`egrep -r "pattern" .`<- 在当前目录和子目录中搜索

`cat file | egrep "pattern"`<- 从管道中搜索数据

# django - 如何在ajax成功时更改按钮标签的文本

> ID：14654779
> 
> 赞同：0
> 
> 时间：2013-02-01T20:50:50.200
> 
> 标签：django, jquery

其实我知道该怎么做。但这里有些不同。索引页面中有很多帖子。以及位于`<li>`标签中的每个帖子。我对每个帖子都有投票系统。

```
<ul>

  <li class="class_li" data-id="this_posts_id">
   <a href="#" class="btn">Vote Up</a> <button class="btn dropdown-toggle" 
   data-toggle="dropdown">
     <span class="vote"> CURRENT VOTE </span>
      <span class="caret"></span> </button>
      </li>

      <li class="class_li" data-id="this_posts_id">
            <!-- another <li> for other posts with same tags and class names -->
      </li>
       <li class="class_li" data-id="this_posts_id">
            <!-- another <li> for other posts with same tags and class names -->
      </li>
</ul> 
```

我的jQuery代码：

```
$('a.btn').click( function(){
        var post_id = $(this).closest('li').data('id');
        var vote = 1;
        var ajaxOpt = {
            type: 'post',
            url: '/content/vote/',
            data: {
                'vote': vote,
                'post_id': post_id,
                },
            success: function(data){
                $(this).find('.vote').text(data.vote_new); // this does not work!

                },
            error: function(){
                console.log('error :[');
                }
        };
        $.ajax(ajaxOpt);

    }) 
```

我试过`closest()` `parent()`了`find()`。都一样。一旦我让它工作。但是那个时候所有帖子的投票值都发生了变化。不仅在`<li>`标签的边界之一。

我被困住了。一切看起来都是真的。但有些不对劲。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-11T23:05:52.327

问题在于回调中的`$(this)`使用`success`。它**不是**按钮，这是您的代码所期望的。因此，您需要更改代码捕获`success`回调之外的引用。

所以下面是修改后的代码：

*   `$this`为按钮 ( )创建一个局部变量
*   使用`sibling()`并`find()`获得正确的投票元素

    ```
    $('a.btn').click( function(){

        //This will be the button - maybe call it $button if that's clearer
        var $this = $(this);

        var post_id = $(this).closest('li').data('id');
        var vote = 1;
        var ajaxOpt = {
            type: 'post',
            url: '/content/vote/',
            data: {
                'vote': vote,
                'post_id': post_id,
                },
            success: function(data){

                //This now works! :)
                $this.siblings('button').find('.vote').text(data.vote_new); 

                },
            error: function(){
                console.log('error :[');
                }
        };
        $.ajax(ajaxOpt);

    }); 
    ```

这是一个**[JSFiddle](http://jsfiddle.net/q8NMR/3/)**使用您的场景显示该概念。

# python - 在 OSX Mountain Lion 上为谷歌应用引擎安装 PIL，

> ID：14654781
> 
> 赞同：1
> 
> 时间：2013-02-01T20:51:00.887
> 
> 标签：python, installation, python-imaging-library, osx-mountain-lion

我知道关于 SO 以及网络上的论坛和博客帖子有很多问题，但我一直遇到同样的问题。我正在尝试安装 PIL 以将其用于应用程序引擎映像 api。在[api 概述](https://developers.google.com/appengine/docs/python/images/installingPIL#mac)中，谷歌建议从[pythonmac.org](http://pythonmac.org/packages/py25-fat/index.html)安装它。

当我尝试安装那里提供的 dmg 时，它告诉我它需要将 python 2.5 安装为系统 python。针对这个错误进行了一些谷歌搜索，向我指出了这个 SO 问题：[如何在 Mac OSX 10.5.8 上为 Google App Engine 安装 PIL？](https://stackoverflow.com/questions/4868185/how-to-install-pil-on-mac-osx-10-5-8-for-google-app-engine). 在第一个答案中，我做了第 1 步，我安装了 macports。然后，第 2 步告诉我运行`sudo port install python25`.

这给了我以下错误：

```
Error: org.macports.activate for port expat returned: Image error: /opt/local/bin/xmlwf already exists and does not belong to a registered port.  Unable to activate port expat. Use 'port -f activate expat' to force the activation.
Error: Failed to install expat
Please see the log file for port expat for details:
/opt/local/var/macports/logs/_opt_local_var_macports_sources_rsync.macports.org_release_tarballs_ports_textproc_expat/expat/main.log
Error: The following dependencies were not installed: gettext expat libiconv ncurses libedit openssl zlib python_select sqlite3
To report a bug, follow the instructions in the guide:
    http://guide.macports.org/#project.tickets
Error: Processing of port python25 failed 
```

有关 macports 的完整输出，请参阅[此 pastebin](http://pastebin.com/EPMxZFQ0)

当那没有成功时，更多的谷歌搜索将我带到了[这篇博文](http://www.janeriksolem.net/2012/09/installing-pil-on-os-x-mountain-lion.html)。正如它所建议的那样，我安装了 libjpeg。它建议的以下步骤是：

> 2.  [从http://effbot.org/downloads/Imaging-1.1.7.ta](http://effbot.org/downloads/Imaging-1.1.7.tar.gz) ​​r.gz 下载 PIL 。（如果已安装，请先删除 PIL。）
>     
>     
> 3.  在解压后的文件夹中： python setup.py build --force sudo python setup.py install

但是当我尝试运行 python setup.py build --force 时，我得到了这个错误：

```
_imaging.c:3017: warning: initialization from incompatible pointer type
_imaging.c:3077: warning: initialization from incompatible pointer type
lipo: can't figure out the architecture type of: /var/folders/q_/wgr019b53rx9b2lr3y7867bm0000gn/T//ccJY6hPI.out
error: command 'gcc-4.2' failed with exit status 1 
```

对于完整的输出，检查[这个 pastebin](http://pastebin.com/KyGQchBu)。

还有一些其他的东西我已经尝试过了，我会编辑它们，但我想尽快发布。提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T22:38:42.743

一种方法是[Pillow](http://pypi.python.org/pypi/Pillow/)。克隆人完全厌倦了这些类型的头痛并分叉了 PIL。

Pillow 是 PIL 的替代品，构建和安装*并不是一场噩梦。*

# c# - 将 WPF 控件及其模板移至新父级

> ID：14654783
> 
> 赞同：1
> 
> 时间：2013-02-01T20:51:10.043
> 
> 标签：c#, wpf, wpf-controls, datatemplate

让我们直接跳进去，让代码解释一下：

```
 FrameworkElement par = list;
        while((par = par.Parent as FrameworkElement) != null) {
            grid.Resources.MergedDictionaries.Add(par.Resources);
        }
        grid.DataContext = list.DataContext;
        if(rootparent is ContentControl) {
            (rootparent as ContentControl).Content = null;
        } else if(rootparent is Decorator) {
            (rootparent as Decorator).Child = null;
        } else if(rootparent is Panel) {
            rootindex = (rootparent as Panel).Children.IndexOf(list);
            (rootparent as Panel).Children.RemoveAt(rootindex);
        }
        grid.Children.Add(list); 
```

因此，基本上，模板化控件被移出其原始窗口并进入背景中的实例化网格。它的数据上下文成功传输（我看到它在断开连接时变为空，当它加入网格时又回到原始对象），但模板没有。我不明白为什么，因为在顶部我将所有资源字典一直复制到顶级父级并将它们合并到新网格中。

所以我在让它重新应用模板时遗漏了一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:20:16.690

需要将资源复制到新容器中，而不仅仅是引用。

```
FrameworkElement par = list;
while((par = par.Parent as FrameworkElement) != null) {
    DictionaryEntry[] resources = new DictionaryEntry[par.Resources.Count];
    par.Resources.CopyTo(resources, 0);
    var res = new ResourceDictionary();
    foreach(DictionaryEntry ent in resources)
        res.Add(ent.Key, ent.Value);
    grid.Resources.MergedDictionaries.Add(res);
} 
```

# python - Facebook 图形 API python facepy

> ID：14654784
> 
> 赞同：0
> 
> 时间：2013-02-01T20:51:11.027
> 
> 标签：python, facebook-comments

我正在使用 facepy 检索 fb 评论和帖子（这是目标）。我已经给出了一个有效的访问令牌（从[http://developers.facebook.com/tools/explorer/?method=GET&path=me](http://developers.facebook.com/tools/explorer/?method=GET&path=me)生成）

产生的错误是：

NameError: 名称 'AAAACEdEose0cBAHshwZCGJ6dHPb0x68c.......D' 未定义。和/或 facepy.exceptions.OAuthError：[190] 验证访问令牌时出错：会话已在 unix 时间 1359752400 过期。

我相信我已经生成了正确的访问令牌（具有正确的权限）我想我会先测试 facepy 库以检索照片。他们是从公共粉丝页面检索评论、相应用户 ID 和时间戳的更快方法吗（我猜我的大多数目标页面都有“公共信息”）

有人可以帮我吗？

`from facepy import GraphAPI`

`graph = GraphAPI(AAACEdEose0cBAHshwZCGJ6dHPb0x68c.......D)`

`graph.get('me/posts')`

```
graph.post(
    path = 'me/photos',
    source = open('parrot.jpg') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T22:30:12.363

从未尝试过使用 FB，但某些解决方案可与其他 API 一起使用。

**验证访问令牌时出错：会话已在 Unix 时间 1359752400 过期。**

全部说。然而，当我将它连接到某个数据库以存储从 API 检索到的一些信息时，通常会发生这种情况。我相信你已经设置了正确的密钥和密码，所以不用担心。确保其他连接仍处于打开状态。

其次，当我几周没有访问 API 时再次发生这种情况，因此请确保登录一次或两次。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-10-27T14:55:31.663

您的 API 需要用引号引起来......还可以通过以下方式生成扩展令牌

# jquery - 无法在 wordpress 中附加带有 jquery masonry 的项目

> ID：14654787
> 
> 赞同：0
> 
> 时间：2013-02-01T20:51:19.280
> 
> 标签：jquery, wordpress, pagination, append, jquery-masonry

我知道这里有很多关于砌体的问题，但我似乎无法找到可能是明显解决方法的答案。我试图让附加方法工作： http: [//masonry.desandro.com/demos/adding-items.html](http://masonry.desandro.com/demos/adding-items.html)，但是那些附加和前置按钮来自哪里？该代码似乎没有提到如何将这些按钮与脚本连接起来。我想添加一个加载更多按钮来附加下一组 wordpress 帖子，只是似乎无法在任何地方找到解决方案。如果有人能指出我正确的方向，将不胜感激。这是我的代码：

```
jQuery(document).ready(function($){

var $container = $('#linky');
var $boxes = $('<div class="boxy"/><div class="boxy"/><div class="boxy"/>');

$container.append( $boxes ).masonry( 'appended', $boxes );
$container.imagesLoaded( function(){
  $container.masonry({
    itemSelector : '.boxy',
    isFitWidth: true,
    singleMode: true,
    isAnimated: false,   

     }); 
   });
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T21:01:02.860

查看该演示页面的源代码。如果您查看最底部，则单击这些按钮时会运行一段代码。它们是触发函数调用的原因。

```
<script>
  $(function(){

    var $container = $('#container');

    $container.masonry({
      itemSelector: '.box',
      columnWidth: 100,
      isAnimated: !Modernizr.csstransitions
    });

    $('#prepend').click(function(){
      var $boxes = $( boxMaker.makeBoxes() );
      $container.prepend( $boxes ).masonry( 'reload' );
    });

    $('#append').click(function(){
      var $boxes = $( boxMaker.makeBoxes() );
      $container.append( $boxes ).masonry( 'appended', $boxes );
    });

  });
</script> 
```

表示`$('#prepend').click(...`，单击 ID 为“prepend”的元素时，运行以下函数。如果您查看它们在页面上的按钮，它们是简单的按钮，其 ID 与本部分中的功能相匹配（ID 前置和附加。）

```
<button id="prepend">Prepend new items</button>
<button id="append">Append new items</button> 
```

# kendo-ui - 是否可以使 Kendo UI DataViz 以一半而不是全圆显示径向量规

> ID：14654790
> 
> 赞同：1
> 
> 时间：2013-02-01T20:51:21.630
> 
> 标签：kendo-ui, kendo-dataviz

我正在尝试使用 Kendo UI 创建一个径向仪表。我在演示中注意到，它将径向量规呈现为一个完整的圆圈。是否可以让仪表只呈现上半部分？

我查看了[http://docs.kendoui.c​​om/api/dataviz/radialgauge](http://docs.kendoui.com/api/dataviz/radialgauge)上的文档。看起来它们允许我们配置刻度的角度，但我找不到实际量规本身的角度。

关于如何解决这个问题的任何想法？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T21:05:18.237

原来径向框架只是一个背景图形。

只需将 CSS 更改为目标图像文件即可自定义径向仪表的图形。

```
#gauge-container {
    background: transparent url("../../content/dataviz/gauge/gauge-container.png") no-repeat 50% 50%;
    width: 404px;
    height: 404px;
    text-align: center;
    margin: 0 0 30px 50px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T07:22:27.507

是的，您可以设置`startAngle :0`并且`endAngle :180`整个圆圈是背景图像。

# jquery - 如何滚动到页面末尾的最后一个容器

> ID：14654792
> 
> 赞同：0
> 
> 时间：2013-02-01T20:51:22.353
> 
> 标签：jquery, scroll, vertical-alignment, scrollto

我有一个与其内容一致的固定定位导航。单击最后一个导航项时，内容无法对齐，因为没有更多可用的滚动空间。有没有一种优雅的方式让最后一个导航项与内容对齐？

我想到的选项：

*   在空间底部添加额外的空间（简单，但这看起来不太好）
*   使用将 div 转换为可滚动区域的插件，以便导航本身可以滚动（不确定这是否可行。这似乎也是一种非常混乱的方式）

这是我现有代码的[小提琴](http://jsfiddle.net/3MPHE/)

CSS：

```
.section {
    background-color: #cccccc;
    margin:20px;
}
#nav {
    position:fixed;
    top:0px;
    right:20px;
    float: right;
    margin:20px;
}
#section-1 {
    height: 300px
}
#section-2 {
    height: 200px
}
#section-3 {
    height: 500px
}
#section-4 {
    height: 300px
}
#section-5 {
    height: 200px
}
#section-6 {
    height: 200px
} 
```

我的代码：

```
<ul id="nav">
    <li class="current"><a href="#section-1">Section 1</a>

    </li>
    <li><a href="#section-2">Section 2</a>

    </li>
    <li><a href="#section-3">Section 3</a>

    </li>
    <li><a href="#section-4">Section 4</a>

    </li>
    <li><a href="#section-5">Section 5</a>

    </li>
    <li><a href="#section-6">Section 6</a>

    </li>
</ul>
<div class="section" id="section-1">section1</div>
<div class="section" id="section-2">section2</div>
<div class="section" id="section-3">section3</div>
<div class="section" id="section-4">section4</div>
<div class="section" id="section-5">section5</div>
<div class="section" id="section-6">section6</div> 
```

根据 Albertos 脚本，我创建了以下脚本：

```
// height of the last section
var last_section_height = parseInt($( "#section-6" ).css('height'), 10);

// height of the viewport - hight of the last section + extra height of margins
var height = $(window).height() - last_section_height + 180;
    $('#section-6').css('height', height+'px'); 
```

这将始终返回所需的高度以使导航与内容对齐

[小提琴](http://jsfiddle.net/3MPHE/1/)

但是，如果屏幕很大并且最后一部分很短，则会有很多额外的空白。还有其他避免空白的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T21:02:54.577

您可以使用一段 jQuery，如下面的示例，为最后一个元素添加高度。或者，您可以将高度添加到身体本身。

```
$(document).ready(function() {
    var height = $(document).height()+300;
    $('#section-6').css('height', height+'px');
}); 
```

希望这可以帮助！

# android - Spinner 在以后的 API 13+ 上导致 BadTokenException

> ID：14654794
> 
> 赞同：0
> 
> 时间：2013-02-01T20:51:37.953
> 
> 标签：android, android-layout, android-widget, android-xml

我在 onClickListener 中有一个带有 Spinner 的应用程序。该代码适用于早期的 API，例如 API 8、9 和 10。它与 API 13、14、15、16 和 17 一起使用。错误消息是：

```
02-01 20:33:03.298: E/AndroidRuntime(812): FATAL EXCEPTION: main
02-01 20:33:03.298: E/AndroidRuntime(812): android.view.WindowManager$BadTokenException: Unable to add window -- token android.view.ViewRootImpl$W@40cf4bc0 is not valid; is your activity running? 
```

是什么导致应用程序爆炸？代码如下：

```
package com.example.spinerr;

import android.os.Bundle;
import android.app.Activity;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.View;
import android.view.ViewGroup.LayoutParams;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.PopupWindow;
import android.widget.Spinner;
import android.widget.Toast;

public class MainActivity extends Activity {
private Button settingsB;
private Spinner mainS, settingsS;
private String[] mainItems = { "Main 1", "Main 2", "Main 3", "Main 4" };
private String[] settingsItems = { "Entry 1", "Entry 2", "Entry 3" };

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    settingsB = (Button) findViewById(R.id.Settings);
    settingsB.setOnClickListener(onSettings);

    mainS = (Spinner) findViewById(R.id.mainSpinner);
    @SuppressWarnings({ "rawtypes", "unchecked" })
    ArrayAdapter adapterM = new ArrayAdapter(this,
            android.R.layout.simple_spinner_item, mainItems);
    mainS.setAdapter(adapterM);
    mainS.setPrompt("Pick item:");
    mainS.setSelection(2);
    mainS.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
        @SuppressWarnings("rawtypes")
        public void onItemSelected(AdapterView adapter4, View v, int i,
                long lng) {
            popUp("in mainS onItemSelected");
        }

        public void onNothingSelected(
            @SuppressWarnings("rawtypes") AdapterView arg0) {
        }
    });
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

private View.OnClickListener onSettings = new View.OnClickListener() {
    @SuppressWarnings("rawtypes")
    public void onClick(View v) {
        popUp("in onSettings");

        LayoutInflater layoutInflater = (LayoutInflater) getBaseContext()
                .getSystemService(LAYOUT_INFLATER_SERVICE);
        View popupView = layoutInflater.inflate(R.layout.pusettings, null);
        final PopupWindow popupWindow = new PopupWindow(popupView,                  LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);

        settingsS = (Spinner) popupView.findViewById(R.id.settingsSpinner);
        @SuppressWarnings("unchecked")
        ArrayAdapter<CharSequence> tAdapter = new ArrayAdapter(
        getBaseContext(), android.R.layout.simple_spinner_item,
                settingsItems);

        settingsS.setAdapter(tAdapter);
        settingsS.setPrompt("Pick an entry:");
        settingsS.setSelection(0);
        settingsS.setOnItemSelectedListener(new 
                              AdapterView.OnItemSelectedListener() {
        public void onItemSelected(AdapterView adapter1,
            View v, int i, long lng) {
               popUp("In settings onItemSelected.");
        }

        public void onNothingSelected(AdapterView arg0) {
            }
        });
        popupWindow.showAsDropDown(settingsB, 1, 1);
    }
};

private void popUp(String s) {
    Toast.makeText(this, s, Toast.LENGTH_LONG).show();
} 
```

}

activity_main.XML 如下：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<LinearLayout 
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:orientation="horizontal"
android:background="@color/Lime"
>
    <Button android:id="@+id/Settings"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/settings"
        android:typeface="serif"
        android:textSize="14sp"
        android:textStyle="bold"
        android:width="80dp"
        android:height="36dp"
    /> 
    <Spinner
        android:id="@+id/mainSpinner"
        android:prompt="@string/pick"
        android:text="@string/press"
        android:minWidth="80dp"
        android:layout_width="wrap_content"
              android:layout_height="wrap_content"
                  />  
 </LinearLayout>
</RelativeLayout> 
```

pusettings.xml 如下：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@color/Gold"
android:orientation="vertical" >

<LinearLayout
    android:layout_width="180dp"
    android:layout_height="wrap_content"
    android:layout_margin="5dp"
    android:background="@color/Citrus"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="50dp"
        android:text="@string/settings" />

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <TextView
            android:layout_width="10dp"
            android:layout_height="fill_parent" />

        <Spinner
            android:id="@+id/settingsSpinner"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />
    </LinearLayout>

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="10dp" />
</LinearLayout>

</LinearLayout> 
```

感谢您提供的任何帮助！

添加--完整的堆栈跟踪：

```
02-02 00:27:28.459: E/AndroidRuntime(624): FATAL EXCEPTION: main
02-02 00:27:28.459: E/AndroidRuntime(624): android.view.WindowManager$BadTokenException: Unable to add window -- token android.view.ViewRootImpl$W@41087988 is not valid; is your activity running?
02-02 00:27:28.459: E/AndroidRuntime(624):  at android.view.ViewRootImpl.setView(ViewRootImpl.java:515)
02-02 00:27:28.459: E/AndroidRuntime(624):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:279)
02-02 00:27:28.459: E/AndroidRuntime(624):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:193)
02-02 00:27:28.459: E/AndroidRuntime(624):  at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:118)
02-02 00:27:28.459: E/AndroidRuntime(624):  at android.view.Window$LocalWindowManager.addView(Window.java:537)
02-02 00:27:28.459: E/AndroidRuntime(624):  at android.widget.PopupWindow.invokePopup(PopupWindow.java:988)
02-02 00:27:28.459: E/AndroidRuntime(624):  at android.widget.PopupWindow.showAsDropDown(PopupWindow.java:897)
02-02 00:27:28.459: E/AndroidRuntime(624):  at android.widget.ListPopupWindow.show(ListPopupWindow.java:595)
02-02 00:27:28.459: E/AndroidRuntime(624):  at android.widget.Spinner$DropdownPopup.show(Spinner.java:739)
02-02 00:27:28.459: E/AndroidRuntime(624):  at android.widget.Spinner.performClick(Spinner.java:435)
02-02 00:27:28.459: E/AndroidRuntime(624):  at android.view.View$PerformClick.run(View.java:13983)
02-02 00:27:28.459: E/AndroidRuntime(624):  at android.os.Handler.handleCallback(Handler.java:605)
02-02 00:27:28.459: E/AndroidRuntime(624):  at android.os.Handler.dispatchMessage(Handler.java:92)
02-02 00:27:28.459: E/AndroidRuntime(624):  at android.os.Looper.loop(Looper.java:137)
02-02 00:27:28.459: E/AndroidRuntime(624):  at android.app.ActivityThread.main(ActivityThread.java:4340)
02-02 00:27:28.459: E/AndroidRuntime(624):  at java.lang.reflect.Method.invokeNative(Native Method)
02-02 00:27:28.459: E/AndroidRuntime(624):  at java.lang.reflect.Method.invoke(Method.java:511)
02-02 00:27:28.459: E/AndroidRuntime(624):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
02-02 00:27:28.459: E/AndroidRuntime(624):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
02-02 00:27:28.459: E/AndroidRuntime(624):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T23:35:28.490

当布局首次呈现时（当然，当您更改选择时），微调器 onItemSelected 侦听器会被触发，这在活动生命周期中可能为时过早，以至于 toast 消息无法拥有良好的上下文。用 try-catch 包裹你的 toast，看看它是否捕获了异常，或者是否在其他地方抛出了异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-10T19:11:15.043

BadTokenException 在更高的 API 版本中消失了。不再有问题。

# python - 使用VB、Delphi为Python脚本创建GUI

> ID：14654800
> 
> 赞同：0
> 
> 时间：2013-02-01T20:52:02.870
> 
> 标签：python, visual-studio, vba, user-interface

我有一些使用 win32api 的 python 脚本，我想创建一些 GUI。我认为，带有 VB 的 VisualStudio 对此有好处，但也许 StackOverflow 上的某个人已经这样做了？我更喜欢做最终应用（最终用户没有库或 python 等）

有什么建议...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T21:22:45.833

有一些 Python 的 GUI 设计器：IN UBUNTU: 1st Glade: 这是一个教程 [http://www.micahcarrick.com/gtk-glade-tutorial-part-1.html](http://www.micahcarrick.com/gtk-glade-tutorial-part-1.html)

2 快速

```
install : 
    sudo apt-get install quickly
    quickly create ubuntu-application hello-world    
    cd hello-world/
     here is tutorial : https://wiki.ubuntu.com/Quickly 
```

在 Windows 中：PyQt：完整教程：[http ://talk.maemo.org/showthread.php?t=43663](http://talk.maemo.org/showthread.php?t=43663)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T20:55:22.810

[Python for Delphi](http://code.google.com/p/python4delphi/)将允许您在 Delphi 应用程序中嵌入 Python 解释器。不知道它是如何保持最新的。

# javascript - 附加元素后CSS过渡不起作用

> ID：14654803
> 
> 赞同：6
> 
> 时间：2013-02-01T20:52:06.870
> 
> 标签：javascript, jquery, css

我遇到了 CSS 转换的问题，在尝试其他方法之前，我想了解问题所在。

一个容器中有 3 个框和一个“下一步”按钮。目标是让下一个框顶出现在顶部，并在按下“下一步”按钮时淡入。该框通过将其附加到容器来定位在顶部，因此它被添加为最后一个元素，因此在顶部可见，并且应该通过 css 过渡淡入。

问题是附加框后css转换似乎不起作用。如果在未附加的框元素上进行测试，则 css 转换效果很好。

[Fiddle here](http://jsfiddle.net/z435s/13/)，代码如下：

HTML：

```
<div class="container">
    <div class="box red"></div>
    <div class="box blue"></div>
    <div class="box green"></div>
</div>

<div id="next">Next</div> 
```

JS：

```
var container = $(".container");

// Save the current list order
var list = container.children(".box");
// The current index
var current = 0;

// Put the first on top
container.append(list[0]);

function next() {
    // Figure out what is the index of the next box
    if (current + 1 < list.length) current++;
    else current = 0;

    // Save it in a variable
    var target = $(list[current]);

    // Put it on top
    container.append(target);

    // Hide it and then fade it in
    target.css("opacity", 0).css("transition", "opacity 1000ms ease-out").css("opacity", 1);

    // The fading in is not working
}

$("#next").click(next); 
```

**更新**：

这个问题的一个基本解决方案是在将不透明度设置为 0 之后和设置过渡 css 之前在目标上调用 offset()：

```
target.css("opacity", 0);
target.offset();
target.css("transition", "opacity 1000ms ease-out").css("opacity", 1); 
```

[**上述小提琴的**更新版本在这里****](http://jsfiddle.net/z435s/14/)

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T21:12:02.920

“list”变量是一个 jQuery 对象，但作为“目标”从其中拉出的元素**不是**jQuery 对象——它们是 DOM 节点。因此，您对“.css()”的调用失败（在我的错误控制台中报告）。

一旦你解决了这个问题，接下来就是浏览器如何处理一系列 CSS 更新的问题。我不清楚我到底看到了什么（来自 Linux 上的 Firefox 18），但我*认为*基本问题是因为在更改之间没有进行布局重排，最终效果是样式被“折叠”，因此没有净变化。

在[这个小提琴更新中，](http://jsfiddle.net/fUNw2/1/)我采用了不同的方法。我将过渡规则放在“box”类中，然后添加了一个“prefade”类：

```
.prefade {
  transition-duration: 0;
  opacity: 0;
} 
```

然后，我没有弄乱元素样式，而是在追加之前添加“prefade”，然后通过询问元素的偏移量来触发布局更新。然后我可以删除“prefade”类，盒子淡入。

```
target.addClass('prefade');
// Put it on top
container.append(target);

var p = target.offset();

target.removeClass('prefade'); 
```

我不知道这是否是做事的“正确”方式。*编辑*——为了让它在 Chrome 中工作，“转换”属性需要用`-webkit-`前缀重复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T21:15:48.210

当您可以使用 jQuery 淡入淡出并让您的代码在不支持 CSS 转换的浏览器上工作时，是否有任何特殊的理由使用 CSS 转换？

```
var $container = $(".container");

function next() {
    var $next = $container.children().first();
    $next.hide().appendTo($container).fadeIn();
}

$("#next").click(next); 
```

请注意，您可以通过从容器中取出第一个元素并将其移到后面来避免您维护的许多状态 - DOM 为您维护您的状态！

见[http://jsfiddle.net/alnitak/w6y3B/](http://jsfiddle.net/alnitak/w6y3B/)**

# android - 无法从 Android 的线程中加载图像

> ID：14654804
> 
> 赞同：0
> 
> 时间：2013-02-01T20:52:08.810
> 
> 标签：android, multithreading, image

我正在尝试使用以下代码从服务器加载远程图像：

```
imageViewClient = (ImageView) findViewById(R.id.imageViewClient);
try 
{
    URL thumb_u = new URL(c.getImage());
    Drawable thumb_d = Drawable.createFromStream(thumb_u.openStream(), "src");
    imageViewClient.setImageDrawable(thumb_d);                      

}
catch (Exception e) 
{

} 
```

图像显示正常，但是当我将代码放入新线程时，图像未加载。

代码是：

```
new Thread() 
{
    @Override
    public void run()
    {
            //** Set imageview url
            try {
                URL thumb_u = new URL(c.getImage());
                Drawable thumb_d = Drawable.createFromStream(
                    thumb_u.openStream(), "src");

                imageViewClient.setImageDrawable(thumb_d);                      

            }
            catch (Exception e) {

            }

    }
}.start(); 
```

图片加载不出来，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T20:56:50.457

您不能以这种方式更改线程内的 UI。您应该使用`asyncTask`或 方法`runOnUiThread`来正确更改用户界面。或者更好，`handler`比如这篇[文章](https://stackoverflow.com/a/2958541/2015318)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T20:55:36.090

您将需要使用[Activity.runOnUiThread](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)从后台线程更改为：

```
 @Override
  public void run() {
     //** Set imageview url
     try {
        URL thumb_u = new URL(c.getImage());
         Drawable thumb_d = Drawable.createFromStream(
                              thumb_u.openStream(), "src");                      

        Your_current_Activity.this.runOnUiThread(new Runnable() {
        public void run() {
         // Chnage imageView bg here
        imageViewClient.setImageDrawable(thumb_d); 
        }
    });
       }
     catch (Exception e) {

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T20:59:12.463

作为尝试像这样手动处理线程的替代方法（在这种情况下，您会遇到无法从另一个线程更新 UI 的问题），请查看[这篇文章](http://android-developers.blogspot.com/2009/05/painless-threading.html)`AsyncTask`并考虑使用类似的东西这个基础设施的适当位置，实际上有一个用于您的用例的示例：

```
public void onClick(View v) {
  new DownloadImageTask().execute("http://example.com/image.png");
}

private class DownloadImageTask extends AsyncTask {
     protected Bitmap doInBackground(String... urls) {
         return loadImageFromNetwork(urls[0]);
     }

     protected void onPostExecute(Bitmap result) {
         mImageView.setImageBitmap(result);
     }
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T23:03:19.960

这是一个简单的 AsyncTask，用于从 Web 下载和缓存图像：

```
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.InputStream;

import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.AsyncTask;
import android.os.Environment;
import android.util.Log;
import android.widget.ImageView;

/**
 * Downloads an image from a URL and saves it to disk, to be referenced if the
 * same URL is requested again
 */
public class DownloadImageTask extends AsyncTask<String, Void, Bitmap> {

    private static final String LOG = DownloadImageTask.class.getSimpleName();

    ImageView mImageView;

    public static final String IMAGE_CACHE_DIRECTORY = YourApplication
            .getContext().getExternalFilesDir(Environment.DIRECTORY_PICTURES)
            .getAbsolutePath();

    public DownloadImageTask(ImageView bmImage) {
        this.mImageView = bmImage;

        // TODO set to default "loading" drawable
        mImageView.setImageBitmap(null);
    }

    @Override
    protected Bitmap doInBackground(String... urls) {

        String url = urls[0];

        Log.v(LOG, "url: " + url);

        String filename = url.substring(url.lastIndexOf("/") + 1, url.length());

        Log.v(LOG, "filename: " + filename);

        Bitmap bmp = getBitmapFromDisk(filename);

        if (bmp == null) {
            try {
                InputStream in = new java.net.URL(url).openStream();
                bmp = BitmapFactory.decodeStream(in);
                writeBitmapToDisk(filename, bmp);
            } catch (Exception e) {
                Log.e("Error", e.getMessage());
                e.printStackTrace();
            }
        }

        return bmp;
    }

    @Override
    protected void onPostExecute(Bitmap result) {
        mImageView.setImageBitmap(result);
    }

    public boolean writeBitmapToDisk(String imageid, Bitmap bmp) {
        boolean saved = false;

        File path = new File(IMAGE_CACHE_DIRECTORY);
        path.mkdirs();
        File imageFile = new File(path, imageid);
        FileOutputStream imageOS = null;
        try {
            imageOS = new FileOutputStream(imageFile);
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        }
        saved = bmp.compress(Bitmap.CompressFormat.JPEG, 95, imageOS);
        return saved;
    }

    public Bitmap getBitmapFromDisk(String imageid) {
        Bitmap bmp = BitmapFactory.decodeFile(IMAGE_CACHE_DIRECTORY + "/"
                + imageid);
        return bmp;
    }

} 
```

这是这样实现的：

```
new DownloadImageTask(mImageView).execute("https://www.google.com/images/srpr/logo3w.png"); 
```

# php - Node.js 在与 apache 相同的端口上，代理传递不起作用

> ID：14654808
> 
> 赞同：1
> 
> 时间：2013-02-01T20:52:40.057
> 
> 标签：php, apache, node.js, virtualhost

所以这是我的虚拟主机

名称虚拟主机 *:8080

```
<VirtualHost mysite.org:8080>
     ServerAdmin panda@gmail.com
     ServerName localhost
     ServerAlias www.mysite.org

     ProxyRequests off

     <Proxy *>
          Order deny,allow
          Allow from all
     </Proxy>

     <Location />
           ProxyPass http://mysite.org:8081/
           ProxyPassReverse http://mysite.org:8081/
     </Location>
     DocumentRoot /Users/panda/Dropbox/www/_playground/node
    ErrorLog "logs/dummy-host2.example.com-error_log"
    CustomLog "logs/dummy-host2.example.com-access_log" common
</VirtualHost> 
```

现在从我的 apache 应用程序中，如果我尝试链接这样的脚本文件：`<script src="/socket.io/socket.io.js"></script>`不起作用我需要做：`<script src="http://mysite.org:8081/socket.io/socket.io.js"></script>`

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T01:42:03.770

尝试使用 xhr-polling 作为传输，websocket 不太可能通过 apache 代理工作

```
socketio.set("transports", ["xhr-polling"]); 
```

# spring - 在 JPA 中实现分页的正确方法是什么？

> ID：14654809
> 
> 赞同：2
> 
> 时间：2013-02-01T20:52:42.353
> 
> 标签：spring, hibernate, jpa, paging, entitymanager

我查看了[这个](https://stackoverflow.com/questions/10144487/jpa-paging-with-numbers-and-next-previous)问题的一些细节，但我在实现分页时仍然遇到问题。我认为这可能与我的实体经理的设置方式有关。

我正在使用 Spring 来配置应用程序；这是相关的弹簧配置（不得不删除一些细节）：

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:util="http://www.springframework.org/schema/util"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.1.xsd">

    <import resource="classpath:core-infrastructure-context.xml" />

    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory" />
    </bean>

    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="persistenceUnitName" value="persistenceUnit" />
        <property name="jpaVendorAdapter">
            <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter" />
        </property>
        <property name="packagesToScan" value="domain" />
        <property name="jpaProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.Oracle10gDialect</prop>
                <prop key="hibernate.cache.use_second_level_cache">true</prop>
                <prop key="hibernate.cache.provider_class"> org.hibernate.cache.EhCacheProvider</prop>
                <prop key="hibernate.max_fetch_depth">3</prop>
                <prop key="hibernate.jdbc.fetch_size">100</prop>
                <prop key="hibernate.jbc.batch_size">1000</prop>
                <prop key="hibernate.show_sql">true</prop>
                <prop key="hibernate.use_sql_comments">false</prop>
            </props>
        </property>
    </bean>

    <bean class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor" />

    <bean id="databaseMarshaller" >
        <property name="pageSize" value="100"/>
    </bean>

    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
        <property name="driverClassName" value="${jdbc.driver}" />
        <property name="url" value="${jdbc.url}" />
        <property name="username" value="${jdbc.user}" />
        <property name="password" value="${jdbc.password}" />
        <property name="validationQuery" value=""/>
        <property name="testWhileIdle" value="false"/>
    </bean>

</beans>

<?xml version="1.0" encoding="UTF-8"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence
        http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd"
    version="1.0">

    <persistence-unit name="persistenceUnit">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
    </persistence-unit>

</persistence> 
```

这是试图完成分页的被调用方法：

```
public void execute(){

    createBaseDir(); //creates a directory on the filesystem

    File domainDir = createDomainDir(); //creates a subfolder of the directory created above

    Long numRows = countRows(); //implementation provided below

    //Here is where I'm trying to page
    //em is an EntityManager injected by Spring using @PersistenceContext
    CriteriaBuilder cb = em.getCriteriaBuilder();

    //IEntity is a custom interface that all managed entities inherit from.
    //clazz is the FQCN of the managed entity I am querying for
    CriteriaQuery<IEntity<?>> cq = cb.createQuery(clazz);
    Root<IEntity<?>> c = cq.from(clazz);
    cq.select(c);
    cq.orderBy(cb.asc(c.get("id")));
    TypedQuery<IEntity<?>> entityQuery = em.createQuery(cq);

    //pageSize = 100, injected from Spring
    for(int row = 0; (row + pageSize) < numRows || numRows-row > 0; row+=pageSize){

        entityQuery = em.createQuery(cq);
        entityQuery.setFirstResult(row);
        int maxResults = (row+pageSize > numRows)?numRows.intValue():row+pageSize;
        entityQuery.setMaxResults(maxResults);

        //This call grows by pageSize every iteration instead of returning only #pageSize records
        List<IEntity<?>> entities = entityQuery.getResultList(); 

        marshallToFile(entities, domainDir);//Uses jaxb to marshall domain objects to file

    }
}

private Long countRows(){
    CriteriaBuilder builder = em.getCriteriaBuilder();
    CriteriaQuery<Long> countQuery = builder.createQuery(Long.class);
    //clazz is the FQCN of the managed entity I am querying for
    countQuery.select(builder.count(countQuery.from(clazz)));
    Long count = em.createQuery(countQuery).getSingleResult();
    return count;
} 
```

问题在于，在 for 循环的每次迭代中，对`entityQuery.getResultList();`结果列表的调用都会增加 100 行，而不是返回仅包含 100 行的列表。我使用调试器逐步完成，`setFirstResult`并且`setMaxResults`工作正常（第一次迭代它们是 0、100；然后是 100,200；然后是 200,300；等等），但是返回的列表的大小每次都会增长。

有人看到我的问题是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T21:01:39.897

嗬！发现我的逻辑缺陷......：/

> 我使用调试器逐步完成，`setFirstResult`并且`setMaxResults`工作正常（第一次迭代它们是 0、100；然后是 100,200；然后是 200,300；等等......）。

那是不正确的……应该是 0,100；然后是 100,100；然后是 200,100；ETC...

无论如何，不​​得不将这一行： `int maxResults = (row+pageSize > numRows)?numRows.intValue():row+pageSize;` 改为： `int maxResults = (row+pageSize > numRows)?numRows.intValue():pageSize;`

现在它可以工作了。我想我会把它作为一个例子留给其他人如何让分页工作。

# xml - 将 XML 中的 XPath 扁平化为 Perl 哈希

> ID：14654814
> 
> 赞同：1
> 
> 时间：2013-02-01T20:53:03.983
> 
> 标签：xml, perl, recursion

给定一个 XPATH，例如 '//element_name' 我想提取结果结构，比如：-

```
<element_name>
   <tag1>value1</tag1>
   <nested>
     <tag2>value2</tag2>
   </nested>
</element_name> 
```

...然后将其展平为哈希：-

```
{ 'tag1' => 'value1',
  'tag2' => 'value2'
} 
```

所以，基本上我会尽可能深入到树中，当我不能再深入时，我会写入哈希。

元素值将始终是唯一的。如果由于某种原因他们不是，我不介意他们覆盖哈希。

这显然需要一些递归。但我的问题是哪个 perl XML 解析器最适合实现这一目标？任何关于代码结构的指针也值得赞赏。最终结果将是一条 SQL 语句，因此标签的唯一性。我无法直接导入 XML，因为某些标签需要进一步处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T21:17:02.813

听起来您知道如何找到 element_name 元素，所以我将从那里着手。

* * *

您想要元素的名称和文本内容

1.  是*element_name*元素的后代，并且
2.  没有子元素。

您可以使用以下 XPath 来查找这些节点：

```
descendant::*[count(*)=0] 
```

选择：

```
.//*[count(*)=0] 
```

使用 XML::LibXML，整个缺失的部分看起来像：

```
for my $tag_node ($element_node->findnodes('descendant::*[count(*)=0]')) {
    my $name = $tag_node->nodeName();
    my $text = $tag_node->textContent();
    $hash{$name} = $text;
} 
```

# android - 创建 listView 后更改 listView 中的位图图像

> ID：14654824
> 
> 赞同：0
> 
> 时间：2013-02-01T20:53:32.863
> 
> 标签：android, android-listview

我有一个基于 URL 获取 favicon 的 AsyncTask。我正在创建一个 listView，它有一个 favicon 和一个 URL。目前，即使我有 AsyncTask，我的 UI 也会等待 asyncTask 完成，然后再显示下一个活动。

我希望我的活动以存储在可绘制对象中的默认图像开始，并且 AsyncTask 将在获得每个 favicon 后替换图像。

任何想法如何做到这一点？

我的异步任务：

```
private class DownloadImageTask extends AsyncTask<URL, Void, Bitmap> {
    final AccountListModel model = new AccountListModel(daoSession);

protected Bitmap doInBackground(URL... urls) {
    URL urldisplay = urls[0];
    Bitmap mIcon11 = null;
    try {
        mIcon11 = model.getBitmapFromURL(urldisplay);
        //try to get image
    } catch (Exception e) {
        Log.e("Error", e.getMessage());
        e.printStackTrace();
    }
    return mIcon11;
}

protected void onPostExecute(Bitmap result) {
    faviconBitmap=result;
}} 
```

我目前创建列表视图的方式

```
for (Site site : model.getSites()) {
    try {
    String url = site.getDomain()
    faviconBitmap= new DownloadImageTask().execute(new URL("http", "www."+ url.trim(),"/favicon.ico")).get();
    if (faviconBitmap != null) {
       Bitmap scaled = Bitmap.createScaledBitmap(faviconBitmap,32, 32, true);
       accountsAndUsersList.add(newAccountListScreen(scaled,site.getName());

                    }
                }

    else {
            Bitmap icon = BitmapFactory.decodeResource(getResources(),R.drawable.favicon);
        Bitmap scaled = Bitmap.createScaledBitmap(icon, 32, 32, true);
        accountsAndUsersList.add(new AccountListScreen(scaled,site.getName());
                    }           
                }
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
         sitesToSortArray = new AccountListScreen[accountsAndUsersList
                .size()];
        accountsAndUsersList.toArray(sitesToSortArray);
        AccountListAdapter adapter = new AccountListAdapter(this,
                R.layout.account_list_row, sitesToSortArray);
        listViewAccountList = (ListView) findViewById(R.id.activityAccountList);
        listViewAccountList.setAdapter(adapter); 
```

如果您也想看看我的适配器，请告诉我。谢谢！

# scheduled-tasks - Sitecore 清理代理和数据库清理

> ID：14654826
> 
> 赞同：6
> 
> 时间：2013-02-01T20:53:36.370
> 
> 标签：scheduled-tasks, sitecore

在 Sitecore 控制面板中，有一个执行数据库清理的命令。这是否会清理主数据库和 Web 数据库中的 History、PublishQueue 和 EventQueue 表？

上述表格的 web.config 中也有清理任务。如果它们仅在 CMS 服务器上启用，它们是否会在主数据库和 Web 数据库中执行清理？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-03T05:25:28.193

我假设您指的是“控制面板/数据库”屏幕上的“清理数据库”选项。

*   该命令提示您选择要清理的数据库（web、master、core）。
*   我使用 DotPeek 查看了 Sitecore.Data.DataProviders.Sql.SqlDataProvider 类中 CleanupDatabase 方法的实现，它执行以下任务：

    1.  删除具有父项但父项不在项树中的项。
    2.  删除无效的语言数据。
    3.  删除不存在的项目的字段。
    4.  删除孤立的项目。
    5.  删除未使用的 blob 记录。
    6.  从步骤 4 中删除的孤立项中删除字段。
    7.  重建 Descendants 表（存储父/子关系）。
    8.  清除所有缓存。
*   我已确认此任务不会清除 History 或 PublishQueue 表。我的 EventQueue 表是空的，所以我无法对此进行测试。

*   Web.config 清理任务遍历所有 <databases<>databases> 节点，因此即使从 CMS 环境它们也应该作用于 Web 数据库。这可以通过在此作业运行之前和之后检查其中一个表来快速证明。

注意：此分析基于反映 Sitecore 6.6.0 版本 121203。

# tridion - 增加修改属性有什么作用？

> ID：14654830
> 
> 赞同：8
> 
> 时间：2013-02-01T20:53:44.217
> 
> 标签：tridion

我们`%TRIDION_HOME%\web\WebUI\WebRoot\Configuration\System.config`可以增加修改属性的值来指示内容管理器强制下载项目。

该设置在[PowerTools 讨论](https://groups.google.com/forum/#!topic/tridion-powertools/3J4NYhnkaGI)中以及在 SDL Live Content 上的 Content Manager Explorer 主题中提及。

`<server version="6.1.0.55920" modification="7">`

更新 CME 的替代方法包括清除浏览器缓存（在 Chrome 中为 CTRL+Shift+Delete）或为每个用户设置缓存设置。

## 问题

我应该将它用于任何 CM 端更改，例如 GUI 扩展、模式更改或模板链接模式吗？还是仅适用于 Content Manager Explorer 的某些部分？

**换句话说，在架构和模板更改之后，让用户获得最新版本的组件、架构下拉列表和模板选择的最佳方式是什么？**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-03T02:21:21.543

`modification`和属性的值`version`成为 Tridion UI 生成/合并的每个 CSS 和 JavaScript 文件以及许多静态（图像）文件的 URL 的一部分。所以 URL 看起来像这样`edit_v.6.1.0.55920.7.aspx?mode=css`。由于浏览器将此视为新 URL，因此它还无法将文件保存在其缓存中。因此，它总是必须从服务器下载文件，而不是使用本地缓存中的（可能是过时的）文件。

这是一种将一些版本信息注入 URL 的技术，称为“URL 指纹识别”。谷歌通常将文件的哈希值嵌入到 URL 中，确保指纹识别发生，而不需要开发人员手动增加版本号。但无论使用哪种指纹识别方式，该技术都是一种非常有效的方式，可以确保所有浏览器都下载最新版本的代码。

如果您正在开发 GUI 扩展，通常可以通过清除浏览器缓存甚至完全禁用它（对于 Tridion 域）来获得相同的效果。但是，一旦将扩展部署到非开发服务器，更改`modification`属性是确保所有用户都获得最新的 JavaScript/CSS 更改而无需每个人都必须手动清除缓存的最确定方法。

Tridion 中的 URL 指纹识别仅影响 CSS、JavaScript 和图像文件。实际的 CMS 数据（例如模式和组件）是使用 XMLHttpRequests 加载的，因此**不受**该`modification`属性的影响。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-02T08:12:15.090

我所知道的，

```
<server version="6.1.0.55920" modification="7"> 
```

这仅清除`JS`和`CSS`相关的缓存。当用户访问 CM 时，CM 会加载所有文件，包括最新副本。

> **我应该将它用于任何 CM 端更改，例如 GUI 扩展、模式更改或模板链接模式吗？还是仅适用于 Content Manager Explorer 的某些部分？**

对于这条线，答案是**No**。因为当用户对模式进行任何更改时，更改应该在所有发布上刷新。目前这在浏览器上没有发生。

希望这可能会在即将到来的版本中得到修复。

> **换句话说，在架构和模板更改之后，让用户获得最新版本的组件、架构下拉列表和模板选择的最佳方式是什么？**

目前，用户应该强制刷新以获取所有出版物的更新信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T21:33:12.110

SDL Tridion CMS 界面缓存 CMS 项目，以便提供更快的浏览和加载其自己的界面。这确实意味着有时：

*   自定义 GUI 扩展可能不会显示文件的最新版本
*   最近创建或修改的 CMS 项目可能不会显示，或显示最新版本。

这就是为什么有时在组件字段中未显示新关键字，或者在尝试添加组件页面时未显示新组件模板的原因。

增加节点中的修改号将导致所有 CMS 项目向 CMS 用户显示最新版本。您将看到是否使用此值来引用 CMS GUI 使用的 CSS 和 JS 文件。

作为开发人员，我还关闭了我的 Firefox 缓存（我更喜欢 firefox 的 firebug 扩展，它非常适合使用 GUI 扩展），因为这意味着你不需要去更改这个值，简单的浏览器刷新似乎总是可以的诀窍。此处解释了关闭缓存：[https ://superuser.com/questions/23134/how-to-turn-off-the-firefox-cache](https://superuser.com/questions/23134/how-to-turn-off-the-firefox-cache)

# c - 初始化时结构内存分配中的指针（c99）

> ID：14654831
> 
> 赞同：4
> 
> 时间：2013-02-01T20:53:44.817
> 
> 标签：c, pointers, c99

假设我们有一个类型：

```
typedef struct __BUFF_T__
{
    u_int8_t *buf;
    u_int32_t size;
}buff_t; 
```

在c99中下一步分配内存是否正确？

```
buff_t a = {.size = 20,.buf = calloc(a.size,1)}; 
```

编译器显示警告

> 变量“数据”在其自己的初始化中使用时未初始化

内存可用且全部可用，但还有其他一些非警告选项可以做同样的事情吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T21:16:41.113

从 6.7.9p23 开始：

> 初始化列表表达式的求值相对于彼此是不确定的 [...] (152) 特别是，求值顺序不必与子对象初始化的顺序相同。

所以不能保证`a.size`在初始化点`calloc(a.size, 1)`被评估为`a.buf`.

在这种情况下，合适的初始化程序将是创建函数：

```
inline buff_t create_buff(u_int32_t size) {
  return (buff_t) {.size = size, .buf = calloc(size, 1)};
}
buff_t a = create_buff(20); 
```

这不能用于静态或文件范围的对象；在这种情况下，需要一个宏（或者，例如，可以在宏中使用的 gcc 语句表达式）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T20:56:12.657

直到分配*之后*，该结构才完全初始化`a`，因为您不知道表达式的计算*顺序。*

如果您需要使用结构字段来初始化同一结构中的另一个字段，则必须分步进行。

# regex - 正则表达式匹配“Warm Regards”类型的电子邮件签名

> ID：14654832
> 
> 赞同：0
> 
> 时间：2013-02-01T20:53:49.463
> 
> 标签：regex

我是一个绝对的正则表达式菜鸟，并且一直在努力尝试编写一个正则表达式来从如下所示的字符串中删除电子邮件签名：

```
Hi There, this is an email.

Warm Regards,

Joe Bloggs 
```

到目前为止，我已经尝试了以下变化：

```
/^[\w |][R|r]egards,/ 
```

正则表达式应该：

1.  看看行的开头（我的目标是`^`,
2.  涵盖变体，例如“Warm Regards”、“Kind Regards”、“Best Regards”和普通的“Regards”（我希望通过`[\w |]`匹配任何单词或空白以及`[R|r]`覆盖 Regards/regards 来完成），
3.  可以使用“热情的问候”或“温暖的问候”等混合大小写，并且
4.  `[word] Regards`仅接收或仅接收行`regards`，这样我们就不会抓取其中某处带有“问候”一词的电子邮件正文。

这似乎很简单，但我无法确定它，而且我似乎错误地扩大了我的正则表达式，以至于任何包含“问候”的行都会被拾取。如果这很重要，我会在 Node.js 中结合`string.search`函数执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T21:03:46.773

这似乎符合您的所有要求：

```
^(\w*\s)?[r|R]egards,? 
```

必须从新行开始，然后可以有任何单词，后跟空格，单词“arees”，或者只是“arees”，逗号也是可选的。

如果您还想清除问候行之后的所有内容，您可以添加`\s*.*`

```
^(\w*\s)?[r|R]egards,?\s*.* 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T21:04:59.307

如果您试图从`Warm Regards`线上删除所有内容，则应该这样做

`^[^<]*?(?=(.*)[R|r]egards)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T21:05:08.743

试试下面的正则表达式

```
^\w* ?regards,? 
```

指定了不区分大小写和全局标志。

您可以在此处查看正则表达式说明及其匹配内容：[http ://regex101.com/r/vR3zG5](http://regex101.com/r/vR3zG5)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T21:21:55.207

匹配#1-#4 中定义的签名的正则表达式如下：

```
/^(\w+ +)?regards,? *$/im 
```

这个怎么运作：

*   开头的“^”表示换行
*   “（\w++）？” 表示仅包含一个单词后跟至少一个空格的可选段
*   “问候”只是一个简单的匹配
*   “，？” 末尾的可选逗号
*   “ *” - 该行可能包含尾随空格（在 ^ 之后放置相同的匹配项可能很有用）
*   "$" - 行尾
*   /.../i - 表示表达式不区分大小写
*   /.../m - 表示 ^ 和 $ 在换行符处匹配

# asp.net-mvc - 为什么每个新的asp.net mvc 4项目模板都基于WebApi Controller

> ID：14654833
> 
> 赞同：1
> 
> 时间：2013-02-01T20:53:52.177
> 
> 标签：asp.net-mvc, asp.net-web-api

当我创建一个新的 ASP.NET MVC 4.0 项目时，例如单页应用程序或移动设备等......它们都有从 ApiController 继承的控制器类。

我不需要向其他人公开 Web 服务。如果登录，我只想运行一个带有私有 Web 应用程序的公共网站。我不想要 ApiController，但我想要一个单页应用程序。

他们为什么这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T20:59:44.183

WebApi 并不一定意味着您正在为其他人创建 Web 服务。相反，当您开发单页应用程序时，您将使用 WebApi 控制器来处理通过 ajax 获取/发布数据。

没有什么可以阻止您使用常规控制器，但 WebApi 非常适合 SPA。请参阅使用此技术的任何在线教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T21:10:53.270

听起来您想使用**Internet 应用程序**项目模板创建一个 Mvc4 Web 应用程序。此模板使用表单身份验证并创建从`System.Web.Mvc.Controller`. 如果您使用的是 Visual Studio 2012，则安装此模板（连同其他一些模板，包括 Api Web 模板）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T21:12:13.793

右键单击您的控制器文件夹 -> 添加 -> 控制器，然后从模板下拉列表中选择一个 MVC 控制器。您不必使用 API 控制器。

如果您想到 SPA 是什么，它本质上是一个 HTML 页面，它使用 JavaScript 从 WebAPI 或其他一些 Web 服务获取数据。正如 Bort 所说，Web API 调用非常适合 SPA。

就个人而言，对于单页应用程序，在他们在 Update 1 中添加 SPA 模板之前，我只需创建一个静态 .html 页面并对我的 WebAPI 控制器进行 RESTful 调用。

# vb.net - Winforms：从 DateTimePicker 中删除“今天”

> ID：14654834
> 
> 赞同：1
> 
> 时间：2013-02-01T20:53:52.147
> 
> 标签：vb.net, winforms, visual-studio-2012, custom-controls

我正在尝试删除显示在 datetimepicker 控件底部的 Today 链接。我发现了一个与代码类似的问题，但这似乎不起作用 - 我的转换是否存在问题，或者这种方法不再有效（Visual Studio 2012）？

```
Class MyDateTimePicker
Inherits DateTimePicker
Protected Overrides Sub OnHandleCreated(e As EventArgs)
    Dim style As Integer = CInt(SendMessage(Me.Handle, DTM_GETMCSTYLE, IntPtr.Zero, IntPtr.Zero))
    style = style Or MCS_NOTODAY Or MCS_NOTODAYCIRCLE
    SendMessage(Me.Handle, DTM_SETMCSTYLE, IntPtr.Zero, CType(0, IntPtr))
    MyBase.OnHandleCreated(e)
End Sub

Private Const DTM_FIRST As Integer = &H1000
Private Const DTM_SETMCSTYLE As Integer = DTM_FIRST + 11
Private Const DTM_GETMCSTYLE As Integer = DTM_FIRST + 12
Private Const MCS_NOTODAYCIRCLE As Integer = &H8
Private Const MCS_NOTODAY As Integer = &H10

<DllImport("user32.dll")> _
Private Shared Function SendMessage(hWnd As IntPtr, msg As Integer, wp As IntPtr, lp As IntPtr) As IntPtr
End Function
End Class 
```

来源：[如何从 DateTimePicker 控件（Windows 窗体控件）中删除“今天”按钮](https://stackoverflow.com/questions/10918138/how-can-i-remove-the-today-button-from-datetimepicker-control-of-windows-form)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T21:09:45.687

您没有发送样式：

改变这个：

```
SendMessage(Me.Handle, DTM_SETMCSTYLE, IntPtr.Zero, CType(0, IntPtr)) 
```

对此：

```
SendMessage(Me.Handle, DTM_SETMCSTYLE, IntPtr.Zero, CType(style, IntPtr)) 
```

# php - 正则表达式 document.write 模式

> ID：14654840
> 
> 赞同：1
> 
> 时间：2013-02-01T20:54:14.687
> 
> 标签：php, regex

我试图在以下单引号之间获取一个字符串`document.write('mystring')`我尝试了以下模式`\'[A-Za-z0-9]+\'`，但我想要没有单引号的字符串。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T20:58:25.787

```
preg_match("/'([a-z0-9]+)'/i", $str, $matches);
//string contents are now in `$matches[1]` 
```

您可能还想使用`\w`甚至其他东西来进行捕获，除非您绝对确定要获取的字符串是纯字母数字的。这也假设只使用撇号而不是引号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T20:55:37.367

捕获特定组中的单词：

```
\'([A-Za-z0-9]+)\' 
```

# javascript - Heroku 上的 Ruby on Rails 未呈现 JS 模板

> ID：14654853
> 
> 赞同：1
> 
> 时间：2013-02-01T20:55:27.257
> 
> 标签：javascript, ruby-on-rails, heroku, render

我将我的应用程序部署到 Heroku 上的临时应用程序。它在本地工作 100% 正常。

[http://exposehair-staging.herokuapp.com](http://exposehair-staging.herokuapp.com)

我有两个渲染 JS 的控制器。当我提交一个远程表单时，它会调用预期的操作并在其中执行代码......除了它没有呈现 JS 模板。正在对操作中的数据库进行更改，但这就是应用程序停止的地方。这发生在渲染 JS 的两个控制器上。请记住，该应用程序在本地开发模式下可以正常工作。

我想知道问题是否在于我的应用程序配置与 Heroku 一起使用？

这是我的 Heroku 应用程序日志：

```
2013-02-01T20:17:17+00:00 app[web.1]: Started GET "/" for 68.230.151.152 at 2013-02-01 20:17:17 +0000
2013-02-01T20:17:17+00:00 app[web.1]:   Rendered blurbs/_show.html.slim (2.3ms)
2013-02-01T20:17:12+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:10)
2013-02-01T20:17:12+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:10)
2013-02-01T20:17:08+00:00 heroku[web.1]: Starting process with command `bundle exec thin start -R config.ru -e staging -p 23436`
2013-02-01T20:17:15+00:00 app[web.1]: >> Thin web server (v1.5.0 codename Knife)
2013-02-01T20:17:15+00:00 app[web.1]: >> Maximum connections set to 1024
2013-02-01T20:17:15+00:00 app[web.1]: >> Listening on 0.0.0.0:23436, CTRL+C to stop
2013-02-01T20:17:17+00:00 app[web.1]: Completed 200 OK in 232ms (Views: 114.2ms | ActiveRecord: 63.0ms)
2013-02-01T20:17:17+00:00 app[web.1]: Processing by PagesController#index as HTML
2013-02-01T20:17:17+00:00 app[web.1]:   Rendered business_hours/_index.html.slim (24.9ms)
2013-02-01T20:17:17+00:00 app[web.1]:   Rendered pages/index.html.slim within layouts/application (78.4ms)
2013-02-01T20:17:18+00:00 heroku[router]: at=info method=GET path=/assets/foundation/orbit/left-arrow-5a8ccc07cfa3eae4292d7c705fc7b0a2.png host=exposehair-staging.herokuapp.com fwd=68.230.151.152 dyno=web.1 queue=0 wait=5ms connect=18ms service=32ms status=200 bytes=522
2013-02-01T20:17:18+00:00 heroku[router]: at=info method=GET path=/assets/foundation/orbit/right-arrow-6fca0c667c001b2352c44c9fb1e55528.png host=exposehair-staging.herokuapp.com fwd=68.230.151.152 dyno=web.1 queue=0 wait=2ms connect=7ms service=7ms status=200 bytes=3242
2013-02-01T20:31:22+00:00 heroku[router]: at=info method=GET path=/assets/application-6cd756f9981b294d6c6bd575ae87f94b.css host=exposehair-staging.herokuapp.com fwd=68.230.151.152 dyno=web.1 queue=0 wait=0ms connect=59ms service=15ms status=304 bytes=0
2013-02-01T20:31:22+00:00 heroku[router]: at=info method=GET path=/assets/orbit_05-c6ea9ca2a7468ee90a6c8bfc87eb607e.jpg host=exposehair-staging.herokuapp.com fwd=68.230.151.152 dyno=web.1 queue=0 wait=0ms connect=0ms service=1ms status=304 bytes=0
2013-02-01T20:31:22+00:00 heroku[router]: at=info method=GET path=/assets/orbit_03-42632d5ec29efd0b5e4c8cae7336e47c.jpg host=exposehair-staging.herokuapp.com fwd=68.230.151.152 dyno=web.1 queue=0 wait=0ms connect=0ms service=1ms status=304 bytes=0
2013-02-01T20:31:22+00:00 heroku[router]: at=info method=GET path=/assets/orbit_02-64cae3654d21289ce3fe325715c395ed.jpg host=exposehair-staging.herokuapp.com fwd=68.230.151.152 dyno=web.1 queue=0 wait=0ms connect=2ms service=3ms status=304 bytes=0
2013-02-01T20:31:29+00:00 heroku[router]: at=info method=POST path=/blurbs/1 host=exposehair-staging.herokuapp.com fwd=68.230.151.152 dyno=web.1 queue=0 wait=0ms connect=7ms service=167ms status=500 bytes=643
2013-02-01T20:31:22+00:00 heroku[router]: at=info method=GET path=/assets/application-ca9f839e91c53f606b8c9344a4a1243e.js host=exposehair-staging.herokuapp.com fwd=68.230.151.152 dyno=web.1 queue=0 wait=0ms connect=0ms service=1ms status=304 bytes=0
2013-02-01T20:31:22+00:00 heroku[router]: at=info method=GET path=/ host=exposehair-staging.herokuapp.com fwd=68.230.151.152 dyno=web.1 queue=0 wait=8ms connect=16ms service=148ms status=200 bytes=30683 
```

还有我的gemfile

```
source 'https://rubygems.org'
ruby '1.9.3'

# Gems required by all environments
gem 'jquery-rails'
gem 'rails', '3.2.9'

gem 'acts-as-taggable-on'                     # https://github.com/mbleigh/acts-as-taggable-on
gem 'carrierwave'                             # https://github.com/jnicklas/carrierwave
gem 'combined_time_select', '~> 1.0.0'        # https://github.com/excid3/combined_time_select
gem 'fog', '~> 1.3.1'                         # https://github.com/fog/fog
gem 'font_awesome', '~> 3.0'                                # https://github.com/balexand/font_awesome
gem 'foundation_rails_helper',                  # https://github.com/sgruhier/foundation_rails_helper
  :git => 'git://github.com/sgruhier/foundation_rails_helper.git',
  :branch => 'master'
gem 'mini_magick'                             # https://github.com/probablycorey/mini_magick
gem 'rack-canonical-host'                     # https://github.com/tylerhunt/rack-canonical-host
gem 'redcarpet'                               # https://github.com/vmg/redcarpet
gem 'roboto'                                  # https://github.com/LaunchWare/roboto
gem 'slim-rails'                              # https://github.com/leogalmeida/slim-rails
gem 'sorcery'                                 # https://github.com/NoamB/sorcery
gem 'stamp'                                   # https://github.com/jeremyw/stamp
gem 'validates_email_format_of'               # https://github.com/alexdunae/validates_email_format_of

# Gems requred only for development
group :development, :test do
  gem 'better_errors'                         # https://github.com/charliesome/better_errors
  gem 'binding_of_caller'                     # optional dependancy of better_errors
  gem 'sqlite3'
end

# Gems required for heroku
group :staging, :production do
  gem 'foreman'
  gem 'pg'
  gem 'thin'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'coffee-rails', '~> 3.2.1'
  gem 'sass-rails',   '~> 3.2.3'
  gem 'uglifier', '>= 1.0.3'

  gem 'compass-rails'                                         # https://github.com/Compass/compass-rails
  gem 'zurb-foundation'                                   # http://foundation.zurb.com/docs/
end 
```

我的 application.rb 文件中也有以下设置：

```
config.assets.initialize_on_precompile = false 
```

更新：这是要求的一些相关代码。Heroku 上没有呈现任何 js 模板，但它们完全可以在本地工作。这就是我最初省略它的原因。

一个例子：

控制器/blurbs.rb

```
class BlurbsController < ApplicationController
  before_filter :require_login

  # PUT /blurbs/1
  def update
    @blurb = Blurb.find(params[:id])

    respond_to do |format|
      if @blurb.update_attributes(params[:blurb])
        format.js { }
      else
        format.js { render 'reload' }
      end
    end
  end
end 
```

意见/模糊/reload.js

```
# Reload form
$("#editBlurb<%= @blurb.id %> form").html("<%= escape_javascript(render :partial => 'form', :locals => {:blurb => @blurb}) %>") 
```

意见/模糊/_form.html.slim

```
= form_for blurb, remote: true do |f|
  .field
    = f.text_area :content, :label => blurb.name.titleize
  .actions = f.submit 'Save' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T00:46:55.303

我把日志级别转为调试

```
# staging.rb
config.log_level = :debug 
```

并注意到以下内容：

```
Started PUT "/blurbs/1" for 68.230.151.152 at 2013-02-11 00:26:26 +0000
2013-02-11T00:26:26+00:00 app[web.1]: Processing by BlurbsController#update as JS
2013-02-11T00:26:26+00:00 app[web.1]:   Parameters: {"utf8"=>"✓", "authenticity_token"=>"rXyxUFU5qhjR4YieynLVAnr5ADnaUXn+No4Qruw5CFo=", "blurb"=>{"content"=>"# About us\r\n\r\nTell **your story** here."}, "commit"=>"Save", "id"=>"1"}
2013-02-11T00:26:26+00:00 app[web.1]: Completed 500 Internal Server Error in 318ms
2013-02-11T00:26:26+00:00 app[web.1]: 
2013-02-11T00:26:26+00:00 app[web.1]: ActionView::MissingTemplate (Missing template blurbs/update, application/update with {:locale=>[:en], :formats=>[:js, :html], :handlers=>[:erb, :builder, :slim]}. Searched in:
2013-02-11T00:26:26+00:00 app[web.1]:   * "/app/app/views"
2013-02-11T00:26:26+00:00 app[web.1]:   * "/app/vendor/bundle/ruby/1.9.1/gems/roboto-0.1.0/app/views"
2013-02-11T00:26:26+00:00 app[web.1]: ): 
```

Heroku 上的 Rails 只在寻找 js、html、erb、builder 或 slim。不是咖啡脚本。然后我记得咖啡脚本在我的 gemfile 的资产组中。它在 heroku 上进行了预处理，但是 gem 不能与应用程序一起运行。所以我将 gem 移到资产组之外，我的应用现在可以在 Heroku 上完美运行！

由于@Dominic 的回答将我带到了那里，如果您想索取我为解决我的问题而提供的 10 美元，请通过您的贝宝与我联系。对此，我真的非常感激。谢谢你。

[https://stackoverflow.com/users/1704688/keil-miller](https://stackoverflow.com/users/1704688/keil-miller)

# sql - 使用来自 GROUP 或 RANK 的 WHERE 的 SQL 语句

> ID：14654855
> 
> 赞同：2
> 
> 时间：2013-02-01T20:55:29.050
> 
> 标签：sql, group-by, where, ranking

我有大约*35,000 行*的销售快照。让我们调用这些列：

```
Sales Rep | Account ID | Total Contract Value | Date 
```

我需要对所有内容进行分组`Sales Rep`，然后从那里根据**2013 年 1 月 (Date) 的 >= $10,000**`Sales Rep`的**位置选择****前 35 个帐户`Total Contract Value``Total Contract Value`**。

例如，假设 John Doe 从 1 月份开始在此表中有 294 个帐户，我只想查看他的前 35 个帐户 >= $10,000 ，Jane Doe 也是如此，等等。查询的资源效率非常重要尽可能使用。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T21:00:35.653

答案已经在您的标题中，由`SalesRep`和`AccountID`和 Rank by划分`Total Contact Value`。

解决方案将`SQL Server`如下所示：

```
DECLARE @minimumValue decimal(20,2) = 10000
DECLARE @numberOfAccounts int = 35
DECLARE @from datetime = '1/1/2013'
DECLARE @till datetime = DATEADD(MONTH, 1, @from)

SELECT 
  [sub].[Sales Rep],
  [sub].[Rank],
  [sub].[Account ID],
  [sub].[Total Contract Value]
FROM
(
  SELECT
    [Sales Rep],
    [Account ID],
    [Total Contract Value],
    DENSE_RANK() OVER (PARTITION BY [Sales Rep] ORDER BY [Total Contract Value] DESC) AS [Rank]
  FROM [Sales]
  WHERE
    [Total Contract Value] >= @minimumValue
    AND [Date] > @from
    AND [Date] < @till
) AS [sub]
WHERE [sub].[Rank] <= @numberOfAccounts
ORDER BY 
  [Sales Rep] ASC,
  [Rank] ASC 
```

这是一个（简单的）[Sql Fiddle](http://www.sqlfiddle.com/#!3/106e4/3)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T21:16:36.310

为此，您想使用一个名为的函数`row_number()`：

```
select ss.*
from (select ss.*, row_number() over (partition by salesrep order by ContractValue desc) as seqnum
      from snapshot ss
      where TotalContractValue >= 10000 and date between '2013-01-01' and '2013-01-31'
     ) ss
where seqnum <= 35 
```

您没有指定您正在使用的数据库。在没有 的数据库中`row_number()`，有一些效率较低的替代方法。

# javascript - 具有多个选择结果的 Javascript 复选框数组

> ID：14654871
> 
> 赞同：1
> 
> 时间：2013-02-01T20:56:19.037
> 
> 标签：javascript, arrays, select, checkbox

我有一个我的同事构建的 javascript 数组代码。我已对其进行了修复，因此根据您选择的复选框，它将转到指定页面（zero.html.zeroone.html 等）。我现在想要完成的是，当您选择多个复选框时，它将根据所选复选框转到另一个页面。

这是我们的代码：

```
<script language="javascript">
<!-- Activate Cloaking Device -->

// Set in dataBase() function - used as array index.
var recnum="";
// Used to initialize arrays.
function initArray()
    {
this.length = initArray.arguments.length;
for (var i = 0; i < this.length; i++)
    { this[i] = initArray.arguments[i]; }
}
// Creating the arrays
var rcrd = new initArray();
var address = new initArray();
address[0] = "zero.html";
address[1] = "one.html";
address[2] = "two.html";
address[0,1] = "zeroone.html";
address[0,2] = "zerotwo.html";
address[1,2] = "onetwo.html";
address[0,1,2] = "zeroonetwo.html";

// Called by onClick for each checkbox button - determines & displays url in full window
function dataBase(leapto)
{
for (var i = 0; i < 4; i++)
    {
    if (leapto.buttons[i].checked)
        { recnum = leapto.buttons[i].value; }
    }
if ( (rcrd[recnum] !=null) && (rcrd[recnum] != "") )
    { document.leapto.display.value = rcrd[recnum]+"\r\n\r\n"+address[recnum]; }
}
// Called by Search Now button - Loads preselected page.

function leapTo()
{
if ( (address[recnum] !=null) && (address[recnum] != "") && (recnum != "") )
window.location= address[recnum];
else 
    alert("\nYou must make a selection first.");
}
// Deactivate Cloaking
</script>
</head>
<body>
<form name="leapto">
<input type="checkbox" name="buttons" value="0" onclick="dataBase(this.form)" /> Zero<br />
<input type="checkbox" name="buttons" value="1" onclick="dataBase(this.form)" /> One<br />
<input type="checkbox" name="buttons" value="2" onclick="dataBase(this.form)" /> Two<br />
<input type="button" class="classname" width="400" height="50" border="0" value="Search Now" onclick="leapTo()" /></form>
<script>
function myFunction(){var x;if (name!=null)  {document.getElementById("demo").innerHTML=x;}}
</script>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T21:05:45.897

我正在考虑如何使它更简单。

**HTML**

```
<div id="our-checkboxes">
     <input type="checkbox" value="zero"/>
     <input type="checkbox" value="one"/>
     <input type="checkbox" value="two"/>
     <input type="button" value="Click me to go to page" id="btn-to-click" />
</div> 
```

好的，这就是 HTML，现在我将使用 jQuery 库编写 Javascript

**JavaScript**

```
$(document).ready(function(){
    $('#btn-to-click').click(function(){
       var _page = "";
       if($('#our-checkboxes input[type="checkbox"]:checked').length == 0)
       {
           alert('you need to select at least one!');
           return false;
       }
       $('#our-checkboxes input[type="checkbox"]:checked').each(function(){
          _page += $(this).val();
       });
       _page += ".html";
       alert('this is your page');
    });
}); 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T21:24:26.490

我认为您可以使用 JQuery 以这种方式编写它：

```
var address = [["1","one.html"],["2","two.html"],["1-2","otherpage.php"]];

var toRespondToEventAfterTheSelection = function(){
  var selection = '';
  $("#parentOfInputs input:checked").each(function(i,e){
    if (selection != '') selection += "-";
    selection += $(e).val();
  });
  if (selection != ''){
    var page = '';
    for (dir in address) {
      if (address[dir][0] == selection){
        page = address[dir][1];
        break;
      }
    }
    if (page != '') document.location = page;
  }
}); 
```

另一种替代解决方案是，在获得带有选择的字符串后，您可以在服务器中创建一个文件来响应该字符串，将用户发送到显示错误的相应页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T22:40:41.377

感谢大家的帮助，在浏览了这里的项目之后，我有一个非常了解 jquery 的朋友，并得到了你们两个人的想法。

这是我的代码： [http ://cdpn.io/zLuDC](http://cdpn.io/zLuDC)

# asp.net - 带有 DropDownList 数据的 ASP.NET MVC 4 ViewModel

> ID：14654873
> 
> 赞同：9
> 
> 时间：2013-02-01T20:56:23.353
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4, html-select

我`@html.EditorFor`用来在编辑模式下渲染我的模型，并且没有渲染下拉列表。

这是我的视图模型：

```
 public class RiskAutoViewModel
     {
       public RiskAutoViewModel()
       {
         VehicleMakeList = new SelectList(new List<VehicleMake>() { new VehicleMake() { Id = 1, Name = "Renault" }, new VehicleMake() { Id = 2, Name = "Peugeot" } });
       }

    public int NoClaimsDegree { get; set; }

    public int VehicleValue { get; set; }

    public int EngineCapacity { get; set; }

    public int VehicleMake { get; set; }

    public SelectList VehicleMakeList { get; set; }
  } 
```

`VehicleMake`呈现为*文本框*，`VehicleMakeList`根本不呈现。我想要的是呈现一个包含列表的下拉列表`VehicleMake`并将其值设置为`VehicleMake`.

保存模型时，VehicleMake 应设置为列表中所选项目的值。

我怎样才能做到这一点 ？

**编辑**

由于我无法在下面的评论框中输入任何代码，我将在这里写一个跟进。

我最终创建了一个 EditorTemplate，例如：

```
<div class="editor-label">
    @Html.LabelFor(model => model.VehicleMakeList)
</div>
<div class="editor-field">
    @Html.DropDownListFor(model => model.VehicleMake, Model.VehicleMakeList)
    @Html.ValidationMessageFor(model => model.VehicleMake)
</div> 
```

现在我的 ViewModel 看起来像这样：

```
[Required]
[ScaffoldColumn(false)]
public int VehicleMake { get; set; }

[Display(Name = "Marque", Prompt = "Marque", Description = "Renseigne la marque du véhicule")]
public SelectList VehicleMakeList { get; set; } 
```

现在这将我引向另一个问题（也许我应该在不同的线程中），但实际上我在该视图中有两个下拉菜单。第二个下拉列表中的项目基本上是动态的，它们取决于第一个下拉列表中选择的项目。使用 AJAX 很容易做到这一点，但使用 MVC 我迷路了。人们通常如何做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-01T21:12:31.293

不幸的是，模板编辑器中没有内置对下拉列表的支持。您可以编写自己的编辑器模板，也可以`@Html.DropDownListFor()`在视图中使用 html 辅助方法。

如果您愿意， Darin Dimitrov 对[这个问题](https://stackoverflow.com/questions/11498215/asp-net-mvc-built-in-support-for-dropdownlist-editor-template)的回答可以引导您完成为下拉列表构建编辑器模板的过程。

让这个工作的最快方法是在你看来这样做：

```
@Html.EditorFor(model => model.NoClaimsDegree)
@Html.EditorFor( model => model.VehicleValue )
@Html.EditorFor( model => model.EngineCapacity )
@Html.DropDownListFor( model => model.VehicleMake, Model.VehicleMakeList, "Select a make" ) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-01T21:17:55.637

我认为下拉列表的模型应该是：

```
public List<System.Web.Mvc.SelectListItem> VehicleMakeList {get; set;} 
```

并初始化为：

```
VehicleMakeList = new List<System.Web.Mvc.SelectListItem>() 
{ 
   new SelectListItem { Value = "1", Text = "Renault" }, 
   new SelectListItem { Value = "2", Text = "Peugeot" } 
}; 
```

或使用数据源：

```
 VehicleMakeList = db.VehicleMakers /*EF, LINQ2SQL, ADO.NET or any supported external source*/
       .Select(v=> new SelectListItem { Text = v.Name, Value = v.Id})
       .ToList(); 
```

看法：

```
@Html.DropDownListFor(model => model.VehicleMake, Model.VehicleMakeList) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-20T11:54:23.827

绑定下拉列表在 MVC 中非常棘手，您可以在控制器中执行此操作获取所有城市列表将其放入 viewBag

创造

```
 ViewBag.CityId = new SelectList(db.Cities, "ID", "Name"); 
```

user.CityID 如果您在编辑中，以便在编辑时选择城市

```
 ViewBag.CityId = new SelectList(db.Cities, "ID", "Name", user.CityID); 
```

在您的视图中，只需执行此操作

```
 @Html.DropDownList("CityId", "Select") 
```

这是我所知道的最简单的方法......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-24T09:57:49.720

绑定下拉列表很容易。代码如下

```
public ActionResult BindWithModel()
{
    List<SelectListItem> items = new List<SelectListItem>();

    items.Add(new SelectListItem 
                { Text = "Select Category", Value = "0", 
                        Selected = true });
    items.Add(new SelectListItem
                { Text = "Beverages", Value = "1" });
    items.Add(new SelectListItem
                { Text = "Condiments", Value = "2" });
    items.Add(new SelectListItem
                { Text = "Confections", Value = "3" });
    items.Add(new SelectListItem
                { Text = "Dairy Products", Value = "4" });
    items.Add(new SelectListItem
                { Text = "Grains/Cereals", Value = "5" });
    items.Add(new SelectListItem
                { Text = "Meat/Poultry", Value = "6" });
    items.Add(new SelectListItem
                { Text = "Produce", Value = "7" });
    items.Add(new SelectListItem
                { Text = "Seafood", Value = "8" });

    var model = new CategoryModel()
    {
        lstCategory = items,
        selected = 1
    };

    return View(model);
} 
```

## 代码在视图

```
@model BindMvcDropdownList.Models.CategoryModel

<h1>Bind MVC DropDownList with Model</h1>

@Html.DropDownListFor(x => x.selected, Model.lstCategory) 
```

代码取自这里[http://dotnetmentors.com/mvc/how-to-bind-dropdownlist-in-asp-net-mvc-application.aspx](http://dotnetmentors.com/mvc/how-to-bind-dropdownlist-in-asp-net-mvc-application.aspx)

# .htaccess - 强制 RewriteRule 使用先前 RewriteRule 的结果

> ID：14654875
> 
> 赞同：0
> 
> 时间：2013-02-01T20:56:29.893
> 
> 标签：.htaccess, zend-framework, mod-rewrite

我正在寻找一种方法来强制 .htaccess 文件中的 RewriteRule 使用以前的 RewriteRule 的结果。

我有以下规则：

```
RewriteRule ^this-controller/this-action.*$ /that-controller/that-action 
```

这可以正常工作，但是我使用的是 Zend 框架，它需要额外的规则来将所有请求路由到 index.php 进行处理。

```
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteCond %{REQUEST_URI} !server-status
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

结果是以下错误：

```
'Invalid controller specified (this-controller)' 
```

它似乎正在使用原始 url ( `this-controller/this-action`) 将请求重定向到 index.php。我怎样才能让它将重写 url ( `/that-controller/that-action`) 传递给 index.php 呢？

# php - PHP范围使用两位而不是一位

> ID：14654880
> 
> 赞同：-1
> 
> 时间：2013-02-01T20:56:42.220
> 
> 标签：php

我有以下代码使用 php 范围创建从 0-99 的数字的选择元素。我尝试将 00 添加到这样的范围中，但没有成功： range(00, 99) 但它仍然只列出一个数字，例如 2 而不是 02。我该如何更改？

```
<select name="Vehic" id="Vehic" >
  <option value="">Truck</option>
  <?php 
        foreach (range(0, 99) as $trucknum) { ?>
  <option value="<?php echo($trucknum); ?>"><?php echo($trucknum); ?></option>
  <?php } ?>
</select> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T20:58:36.830

关于输出。

```
<? printf('%02d', $trucknum); ?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T20:58:45.947

使用[str_pad()](http://de3.php.net/manual/en/function.str-pad.php)：

```
echo str_pad($trucknum, 2, '0',  STR_PAD_LEFT); 
```

在您的代码中：

```
<select name="Vehic" id="Vehic" >
  <option value="">Truck</option>
  <?php 
        foreach (range(0, 99) as $trucknum) { ?>
          <?php
            $trucknumStr = str_pad($trucknum, 2, '0',  STR_PAD_LEFT);
          ?>
          <option value="<?php echo($trucknum); ?>"><?php echo($trucknumStr); ?></option>
  <?php } ?>
</select> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T20:58:51.627

$trucknum 是一个数值，您必须格式化输出以在需要时添加前导零。见[http://php.net/manual/en/function.printf.php](http://php.net/manual/en/function.printf.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-19T06:20:48.850

这行得通`<?php echo sprintf('%02d', $i); ?>`

# python - 我可以通过 exec() 的名称空间传递参数集吗？

> ID：14654886
> 
> 赞同：0
> 
> 时间：2013-02-01T20:57:04.510
> 
> 标签：python, exec

我正在尝试创建一个参数扫描模式，使用 python 的 exec() 函数并通过命名空间传递一个特定的参数集。我的应用程序是一个带有一堆参数的 scipy.integrate.odeint() 模型，但是我尝试创建一个[SSCCE](http://sscce.org/)测试用一个简单的参数报告功能代替了它。同样，我没有包含完整的参数和范围，因为这些示例很明显。

```
def rptParam():
    print 'rptParam: v=%e b0=%e drme=%e de=%e TGrate=%f IPer=%d' % (v,b0,drme,de,TGrate,IPer)

def tstIterExec(argList, argRange, seed):

    seedTup = tuple([seed[k] for k in argList])
    print 'tstIterExec: seed', seedTup
    seed['rptParam'] = rptParam
    tstCode = compile("rptParam()", '<string>','exec')

    for param,v in seed.items():
        if param not in argList:
            print 'tstIterExec: skipping param', param
            continue

        print 'tstIterExec: varying', param
        ai = argList.index(param)
        spos = argRange[ai].index(v)
        #  higher values of param
        for vi in range(spos+1,len(argRange[ai])): 
            currContext = seed.copy()
            currContext[param] = argRange[ai][vi]               # perturb just this value of seed
            seedTup = tuple([currContext[k] for k in argList])  # a hashable version of the seed
            print 'tstIterExec: perturb', param, seedTup
            exec tstCode in globals(), currContext

tstArgList = ['v','b0']
tstArgRange = [v_Range, b0_Range]

TstSeed = {'v':3e-2, 'b0':2e-11, 'drme':5e-2, 'de':0.8 ,'TGrate': 0.2, 'IPer':10}
tstIterExec(tstArgList, tstArgRange, TstSeed) 
```

运行此代码会产生以下输出：

```
tstIterExec: seed (0.03, 2e-11)
tstIterExec: skipping param drme
tstIterExec: skipping param TGrate
tstIterExec: skipping param de
tstIterExec: varying b0
tstIterExec: perturb b0 (0.03, 4e-11)
rptParam: v=3.200000e-02 b0=2.000000e-11 drme=5.000000e-02 de=8.500000e-01 TGrate=0.200000 IPer=10
tstIterExec: perturb b0 (0.03, 8e-11)
rptParam: v=3.200000e-02 b0=2.000000e-11 drme=5.000000e-02 de=8.500000e-01 TGrate=0.200000 IPer=10
tstIterExec: perturb b0 (0.03, 1e-10)
rptParam: v=3.200000e-02 b0=2.000000e-11 drme=5.000000e-02 de=8.500000e-01 TGrate=0.200000 IPer=10
tstIterExec: perturb b0 (0.03, 1e-09)
rptParam: v=3.200000e-02 b0=2.000000e-11 drme=5.000000e-02 de=8.500000e-01 TGrate=0.200000 IPer=10
tstIterExec: varying v
tstIterExec: perturb v (0.032, 2e-11)
rptParam: v=3.200000e-02 b0=2.000000e-11 drme=5.000000e-02 de=8.500000e-01 TGrate=0.200000 IPer=10
tstIterExec: perturb v (0.048, 2e-11)
rptParam: v=3.200000e-02 b0=2.000000e-11 drme=5.000000e-02 de=8.500000e-01 TGrate=0.200000 IPer=10
tstIterExec: perturb v (0.064, 2e-11)
rptParam: v=3.200000e-02 b0=2.000000e-11 drme=5.000000e-02 de=8.500000e-01 TGrate=0.200000 IPer=10
tstIterExec: skipping param rptParam
tstIterExec: skipping param IPer 
```

显然， currContext 在 tstIterExec() 中发生了变化，但 rptParam() 坚持使用全局绑定？我还尝试将 currContext 作为第一个全局命名空间发送；相同的行为。

我一定是误解了 python 的命名空间/闭包概念？exec() 甚至是用于此目的的适当技术吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T22:30:56.437

传递给语句的`globals`and只影响由;执行的直接代码对象。它们不会影响代码对象调用的任何函数。所看到的全局变量仍然是模块全局变量，因此它正在打印模块中的 etc. 值。`locals``exec``exec``rptParam``v`

据我所知，最好的选择就是接受参数作为参数：

```
def rptParam(v, ...):
    ...

...

            print 'tstIterExec: perturb', param, seedTup
            rptParam(**currContext) 
```

# java - Ant Contrib If 用于可选 JAR META-INF

> ID：14654888
> 
> 赞同：4
> 
> 时间：2013-02-01T20:57:13.773
> 
> 标签：java, ant, jar, ant-contrib, meta-inf

我有一个场景，我试图`build.xml`在多个项目中重用同一个文件。在每种情况下，最终目标都是`dist`JAR 将所有内容都完成。唯一的区别是一些项目有一个`src/main/java/META-INF/*`目录，而另一些则没有（只有一个`src/main/java/*`目录）。

如果构建看到可用的目录，我想使用 Ant-Contrib`<if/>`任务来选择性地定义一个目录。所以是这样的：`META-INF/``src/main/java/META-INF/*`

```
<jar jarfile="myapp.jar">
    <if>
        <available file="src/main/java/META-INF" />
        <then>
            <!--
                Copy everything from src/main/java/META-INF into
                the JAR's META-INF directory.

                But how?!?
            -->
            <echo message="I'm trying to copy META-INF!" />
        </then>
    </if>
</jar> 
```

但我在这里对两件事感到窒息：

1.  当我运行这个目标时，我得到一个构建异常，指出我不能`<if/>`在`<jar/>`任务中嵌套一个；和
2.  我不确定如何配置任务以在类路径的根目录`<jar/>`创建目录，并将所有内容复制到其中。`META-INF``src/main/java/META-INF`

有什么想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T13:20:00.627

你让它变得比必要的更难。只需使用以下任务，如果 META-INF 文件夹存在，它将包含在 jar 中，如果不存在则忽略：

```
<target name="dist">
    <jar destfile="test.jar">
        <fileset dir="classes"/> <-- or whatever directory you want to put in the jar -->
        <metainf dir="src/main/java/META-INF" erroronmissingdir="false"/>
    </jar>
</target> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T13:14:33.373

该消息是正确的，因为`<if>`它本身就是一项任务，您不能在任务中嵌套其他`<jar>`任务。但是，您可以使用该`<if>`任务定义一个带有 ID 的合适文件集，然后使用 refid 将其包含在 JAR 中：

```
<if>
    <available file="src/main/java/META-INF" />
    <then>
        <fileset id="src.metainf" dir="src/main/java/META-INF" />
    </then>
    <else>
        <fileset id="src.metainf" dir="." excludes="**/*" />
    </else>
</if>

<jar destfile="myapp.jar">
    <metainf refid="src.metainf" />
</jar> 
```

正如[JB Nizet 指出的那样，](https://stackoverflow.com/a/14687650/592139)您实际上并不需要这个来回答这个特定的问题，但对于其他情况，这是一个有用的技巧。`<path>`我发现在定义元素而不是文件集时它更有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T19:02:09.037

听起来您想利用更加模块化的构建配置。有两个目标怎么样：

```
<target name="jar">
    <!-- Normal JAR tasks like you currently have (sans the metainf stuff). -->
</target>

<target name="jar-with-metainf">
    <jar destfile="test.jar">
        <fileset dir="classes"/>
        <metainf dir="src/main/java/META-INF"/>
    </jar>
</target> 
```

然后，当您想要构建包含您`META-INF/`的项目时，您只需运行`jar-with-metainf`.

# php - 存储列表：在文件中还是在 MySQL 中？

> ID：14654897
> 
> 赞同：0
> 
> 时间：2013-02-01T20:57:40.420
> 
> 标签：php, mysql, data-storage

这通常是存储以下类型列表的更好方法：

```
array(
   'category'=>array(
      'key'=>'value',
      'key'=>'value'
    ),
   'category'=>array(
      'key'=>'value',
      'key'=>'value'
    )
); 
```

存储这些列表的更有效方法是`lists.php`MySQL 中的文件还是序列化条目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T21:00:53.847

那么取决于你的mysql表结构：

*   如果您的表是**标准化**的，那么序列化数据并存储它会破坏标准化。

但除此之外，为什么不创建两个表，一个存储类别，另一个存储引用该类别的键值对。

```
CREATE TABLE Categories (
   CID INT,
   ***
   PRIMARY KEY (CID)
)ENGINE=InnoDB;

CREATE TABLE KeyValues (
   Category INT,
   Key varchar(100),
   Value varchar(100,
   FOREIGN KEY Category REFERENCES Categories(CID)
)ENGINE=InnoDB; 
```

并且您可以根据您的结构进一步规范化键值表。我没有故意选择主键，因为这取决于您是否正在规范您的表。添加自动增量主键也可以。

这更容易和更快地选择数据。当您对数据进行序列化时，如果您需要进行某种计算，您首先需要在 PHP 端抓取，取消序列化并进行计算，您可以通过一个查询来执行相同的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T20:59:54.910

我建议你使用mysql，更易于维护，并且可以轻松挑选出你需要的行，而无需将整个数组加载到内存中。您也可以尝试使用像 mongoDB 这样的 nosql 数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T21:15:53.070

除非需要，否则不要使用数据库，它会增加不必要的开销、复杂性并引入新的故障点。在这种情况下，我会将列表编码为 PHP 源数组。它将更快并且更容易实现 - 您可以在几秒钟内启动此代码。我认为在这种情况下使用数据库没有任何优势。存储 600 个元素的数组所需的开销可以忽略不计。如果您后来发现数组变得太大而无法合理，或者需要经常更改，您可以将它移到数据库中。不要过度设计它。

# java - 如何创建特殊类型的数组列表？

> ID：14654898
> 
> 赞同：-2
> 
> 时间：2013-02-01T20:57:39.280
> 
> 标签：java, arraylist

我自己设计并编写了一个名为 FrequencyData 的类：

```
public class FrequencyData {
    char letter;
    int frequency;

    public FrequencyData(char in_pointer, int in_frequency) {
        frequency = in_frequency;
        letter = in_pointer;
    }

    public char getLetter() {
        return letter;
    }

    public int getFrequency() {
        return frequency;
    }
} 
```

我知道如何创建我的类的实例：

```
FrequencyData info = new FrequencyData('c', 5); 
```

如何创建一个数组列表并将此实例添加到其中，稍后再添加其他实例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T21:06:56.513

假设您正在谈论使用 java 中的 FrequencyData 类型的成员模板化 ArrayList 类，

```
FrequencyData info = new FrequencyData('c', 5);
ArrayList<FrequencyData> list = new ArrayList<FrequencyData>();
list.add(info); 
```

阅读：[http ://en.wikipedia.org/wiki/Generics_in_Java](http://en.wikipedia.org/wiki/Generics_in_Java)

# android - 自定义适配器不断显示错误数据

> ID：14654899
> 
> 赞同：0
> 
> 时间：2013-02-01T20:57:47.813
> 
> 标签：android

我已经实现了一个自定义的 ArrayAdapter，它似乎一切正常，但是每当我向适配器添加一个新项目并滚动列表时，文本视图中的文本似乎会发生变化，除了第一个 TextView。

我也使用了 ViewHolder 模式，但它仍然无法正常工作：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View view = convertView;
    ViewHolder holder;
    if (view == null) {

        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        view = inflater.inflate(R.layout.subject_row, null);

        holder = new ViewHolder();
        holder.subjectName = (TextView) view.findViewById(R.id.subject_name);
        holder.task1 = (TextView) view.findViewById(R.id.tasks1);
        holder.task2 = (TextView) view.findViewById(R.id.tasks2);
        holder.task3 = (TextView) view.findViewById(R.id.tasks3);
        holder.time = (TextView) view.findViewById(R.id.time);
        view.setTag(holder);
    } else {
        holder = (ViewHolder) view.getTag();
    }

    Subject subject = getItem(position);
    ArrayList<Task> tasks = subject.getTasks();
    int numTask = tasks.size();

    holder.subjectName.setText(subject.getSubjectName());
    holder.time.setText(subject.getHours() + " hrs " + subject.getMins() + " mins");

    switch (numTask) {
    case 0: {
        holder.task1.setVisibility(View.GONE);
        holder.task2.setVisibility(View.GONE);
        holder.task3.setVisibility(View.GONE);
        break;
    }
    case 1: {
        holder.task1.setText(tasks.get(0).getDescription());
        holder.task2.setVisibility(View.GONE);
        holder.task3.setVisibility(View.GONE);
        break;
    }
    case 2: {
        holder.task1.setText(tasks.get(0).getDescription());
        holder.task2.setText(tasks.get(1).getDescription());
        holder.task3.setVisibility(View.GONE);
        break;
    }
    case 3: {
        holder.task1.setText(tasks.get(0).getDescription());
        holder.task2.setText(tasks.get(1).getDescription());
        holder.task3.setText(tasks.get(2).getDescription());
        break;
    }
    }

    return view;
} 
```

第一个带有主题名称的文本视图似乎没有改变，但是其他 3 个文本视图 () 中的数据也显示了其他行的数据。

如果数据为空白，但如果删除了 switch 语句并仍然得到相同的结果，则可能与隐藏其视图有关。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T21:26:03.780

您没有使隐藏的视图再次可见，例如：

```
case 1: {
    holder.task1.setVisibility(View.VISIBLE); // Add these!
    holder.task1.setText(tasks.get(0).getDescription());
    holder.task2.setVisibility(View.GONE);
    holder.task3.setVisibility(View.GONE);
    break;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T21:32:07.187

下面的帖子对添加动态内容和保留状态有明确的解释。希望能帮助到你。

[http://sgandroiddev.blogspot.com/2013/02/custom-listview.html](http://sgandroiddev.blogspot.com/2013/02/custom-listview.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T21:07:51.713

我认为您必须将持有人“写回”到视图中。

```
view.setTag(holder); 
```

但我不明白你为什么使用持有人类。我想，你不需要这个！只需使用

```
TextView subjectName = view.findViewById(R.id.subjectName);
subjectName.setText(...); 
```

# actionscript - 在方法中引用变量

> ID：14654900
> 
> 赞同：0
> 
> 时间：2013-02-01T20:57:53.430
> 
> 标签：actionscript, global-variables

这看起来很长，但这是一个非常简单的问题。使用以下代码：

```
public class Map extends MovieClip
{

    var dragdrops:Array;
    var numOfMatches:uint = 0;
    var speed:Number = 25;

    public function Map()
    {
        // constructor code
        var dragdrops = [one_mc,two_mc,three_mc,four_mc,five_mc,six_mc];

        var currentObject:DragDrop;

        for (var i:uint = 0; i < dragdrops.length; i++)
        {
            currentObject = dragdrops[i];
            currentObject.target = getChildByName(currentObject.name + "_target");
        }

    }

    public function match():void
    {
        numOfMatches++;
        if(numOfMatches == dragdrops.length)
        {
            win.addEventListener(Event.ENTER_FRAME, winGame);
        }
    } 
```

我收到这个错误

> TypeError：错误 #1009：无法访问空对象引用的属性或方法。在 Map/match()[G:_flash\edu\drag_drop\Map.as:34] 在 DragDrop/drop()[G:_flash\edu\drag_drop\DragDrop.as:41]

我认为这是因为我正在引用当前为空值的全局数组“dragdrops”。

但是，通过将 dragdrops.length 值传递给另一个全局变量，下面的代码可以完美运行。

```
public class Map extends MovieClip
{

    var dragdrops:Array;
    var dragdropslength:Number = 0;
    var numOfMatches:uint = 0;
    var speed:Number = 25;

    public function Map()
    {
        // constructor code
        var dragdrops = [one_mc,two_mc,three_mc,four_mc,five_mc,six_mc];

        var currentObject:DragDrop;

        for (var i:uint = 0; i < dragdrops.length; i++)
        {
            currentObject = dragdrops[i];
            currentObject.target = getChildByName(currentObject.name + "_target");
        }

        dragdropslength = dragdrops.length

    }

    public function match():void
    {
        numOfMatches++;
        if(numOfMatches == dragdropslength)
        {
            win.addEventListener(Event.ENTER_FRAME, winGame);
        }
    } 
```

虽然这很好用，但我想知道是否有更优雅的解决方案可以在没有额外变量的情况下从 Map() 构造函数中引用拖放值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T21:01:55.680

您可以直接在构造函数中分配给“dragdrops”，从而初始化实例变量。只需在 Map 构造函数的第一行中删除前面的“var”。

# caching - 在 Maven/JSP/RequireJS Webapp 中对资产进行指纹识别？

> ID：14654901
> 
> 赞同：5
> 
> 时间：2013-02-01T20:57:57.500
> 
> 标签：caching, maven, requirejs, assets, fingerprinting

我有一个简单的 Maven webapp，它使用单个 JSP 和 RequireJS 来提供单页 Javascript-heavy 应用程序。我一直在寻找可以在构建过程中用来对资产进行指纹识别的东西（.js、.css 等），但没有找到任何可以解决这个问题的东西。

我希望在内容更改时更改资产文件名，以便我可以告诉浏览器将它们缓存很长时间，但仍会在它们更改时下载最新的。我还需要对这些资产的任何引用，以便在它们更改时进行更新。无论我使用什么，都必须与 RequireJS 一起使用。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T20:32:04.947

我最近通过使用 RequireJS 的`urlArgs`配置选项解决了这个问题。我怀疑实际上重命名文件以包含时间戳是否可行，这会使构建和 RequireJS 配置复杂化很多，并且很可能需要 hack 来进行开发或生产。所以，按逻辑顺序：

1.  在 pom.xml 中：

    ```
    <properties>
        (...)
        <build.version>${maven.build.timestamp}</build.version>
    </properties> 
    ```

2.  在主 JSP 文件中：

    ```
    <script type="text/javascript">
        var require = {
            (...)
            urlArgs: 'v=${build.version}',
        };
    </script>

    <link rel="stylesheet" type="text/css" href="style.css?v=${build.version}"></link>    
    <script data-main="app" src="libs/require.js?v=${build.version}"></script> 
    ```

    ***在 require.js 导入之前**定义`require`对象以使 urlArgs 工作很重要*

***   pom.xml，再次：

    ```
    <resources>
      (...)
      <resource>
        <targetPath>${project.build.directory}/filteredWebapp</targetPath>
        <directory>src/main/webapp</directory>
        <filtering>true</filtering>
      </resource>
    </resources> 
    ```

    *   r.js 的 buildconfig（顺便说一句。我正在使用 [requirejs-maven-plugin](https://stackoverflow.com/a/11553919/1240557)来桥接 Maven 和 r.js）：

    ```
    ({
        appDir: '${project.build.directory}/filteredWebapp',
        dir: '${project.build.directory}/${project.build.finalName}',
        (...)
    }) 
    ```

    我必须将过滤 src/main/webapp 的结果存储在一个新文件夹（即`filteredWebapp`）中，以确保 r.js 的输入已经包含构建时间戳而不是占位符。我最初的 r.js buildconfig 版本是直接从 src/main/webapp 读取源文件；工作正常，但绕过了 maven 过滤（即 r.js 编译的输出仍然包含`${build.timestamp}`占位符）** 

 **注意：配置开发版本以使用这种机制可能很棘手（如果可能的话，我还没有尝试过）。不过，对我来说，“v=${build.timestamp}”参数的存在和缓存破坏的缺乏在实践中并不是问题。

在此过程中还有许多其他障碍和陷阱，但我假设您设法解决了这些问题，因为您只是专门要求指纹识别。希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-31T06:54:49.190

实际上，我强烈反对将查询参数用作“缓存杀手”，因为这可能会导致所谓的缓存中毒。例如：假设您有一个 cdn 或一个前端缓存服务器和多个应用程序服务器。您上传文件的新版本并更改查询参数。但是新文件仍然没有。交付给所有应用服务器。缓存服务器然后转到仍然包含旧版本的服务器之一（因为它看到查询参数已更改），获取并缓存它。所以现在缓存服务器有一个旧文件，一个新的缓存杀手认为它是最新的，不再尝试从服务器获取它。**

# css - Twitter Bootstrap：轮播：在定义高度视口中垂直居中图像

> ID：14654902
> 
> 赞同：9
> 
> 时间：2013-02-01T20:58:00.657
> 
> 标签：css, image, twitter-bootstrap, carousel

我正在尝试找到一种将图像垂直居中在我的视口内的旋转木马的方法。目前图像工作正常，它正在将图像大小调整为宽度上的视口大小。但我想使用图像的中心并裁剪照片的顶部和底部。

这是HTML：

```
<div class="carousel slide hero">
   <div class="carousel-inner">
       <div class="active item">
            <img src="img/hero/1.jpg" />
       </div>
       <div class="item">
           <img src="img/hero/2.jpg" />
       </div>
       <div class="item">
           <img src="img/hero/3.jpg" />
       </div>
    </div>
    <a class="carousel-control left" href=".hero" data-slide="prev">&lsaquo;</a>
    <a class="carousel-control right" href=".hero" data-slide="next">&rsaquo;</a>
</div><!-- hero --> 
```

和一小部分CSS：

```
.carousel-inner {
    height: 320px;
    overflow: hidden;
} 
```

任何帮助是极大的赞赏。我想要它，这样如果他们上传任何尺寸的照片，它就可以被认为是可用的。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2015-02-26T23:38:15.047

我通过指定 .item 高度并使其中的图像绝对定位来解决了这个问题：

```
.item {
height: 300px;
}

.item img {
max-height: 100%;  
max-width: 100%; 
position: absolute;  
top: 0;  
bottom: 0;  
left: 0;  
right: 0;  
margin: auto;
} 
```

这将使旋转木马高度为 300 像素，图像垂直和水平居中。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-03-19T12:31:52.733

如果您不知道图像的高度，可以使用下一个样式

```
#product-detail .carousel-inner{
    高度：500px；
}

#product-detail .carousel-inner>.active{
    位置：相对；
    最高：50%；
    变换：translateY（-50%）；
}
#product-detail .carousel-inner>.next,
#product-detail .carousel-inner>.prev{
    最高：50%；
    变换：translateY（-50%）；
}

```

在这里，`#product-detail`用作覆盖引导样式的包装器。
另外，别忘了加温`transform`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-19T09:06:52.447

这可能对你有帮助

试试这个插件

[https://github.com/tutorialdrive/Bootstrap-Vertical-Thumbnail-Carousel](https://github.com/tutorialdrive/Bootstrap-Vertical-Thumbnail-Carousel)

看看这里。

[Twitter Bootstrap 垂直缩略图轮播](https://stackoverflow.com/questions/18416892/how-to-create-carousel-in-bootstrap-with-vertical-thumbnail/18416893#18416893)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T08:13:55.133

使用以下内容，这会将图像定位在轮播视口的中心并将高度设置为 320px

```
.carousel-inner>.item>img {
    margin: 0 auto;
    height: 320px;
} 
```

希望这对您有所帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-10T01:10:52.193

我在 YorickH 的回答中添加了一点点

```
.carousel-inner>.item>img {
margin: 0 auto;
height: 600px;
width: 100%;
} 
```

这可以确保 tje 图像拉伸到屏幕（或您的容器）的末端，并稍微增加高度，因此图像看起来不会那么拉伸和挤压。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-19T09:01:32.413

我也想在轮播中居中图像

grigson 的回答在 Firefox 上效果很好，但在 Chrome 上不起作用。所以经过一番挣扎后，我想出了这个解决方案：

将图像作为*div.item*的背景，因为这样您可以轻松地定位它们而不会干扰布局：

```
.carousel-inner .item {
    width: 100%; /* Your width */
    height: 500px; /* Your height */
    background-repeat: no-repeat;
    background-position: center;
    background-size: cover; /* This also makes sure it fills the whole div */
}

/* add the images to divs */
div.item:nth-of-type(1) {
    background-image: url("../img/carousel-photos/1.jpg");
}

div.item:nth-of-type(2) {
    background-image: url("../img/carousel-photos/2.jpg");
}

div.item:nth-of-type(3) {
    background-image: url("../img/carousel-photos/3.jpg");
}

div.item:nth-of-type(4) {
    background-image: url("../img/carousel-photos/4.jpg");
} 
```

这可能不是最好的方法，但它对我来说非常有效。

# c++ - vtable的编译时检测

> ID：14654906
> 
> 赞同：2
> 
> 时间：2013-02-01T20:58:13.717
> 
> 标签：c++

有没有办法在编译时检测一个类是否有 vtable？我试图确保一个类与 64 字节边界对齐并且长度为 64 字节。添加 vtable 会将类大小增加到 128 字节。

```
class __attribute__((aligned(64))) C
{
private:
    int64_t iValue;
    char iPadding[64 - sizeof(int64_t)];
}; 
```

这可以。然而

```
class __attribute__((aligned(64))) C
{
public:
    virtual ~C() {}

private:
    int64_t iValue;
    char iPadding[64 - sizeof(int64_t)];
}; 
```

搞砸了。

答：`aligned`也是垫，不只是控制位置。`__declspec(align())`似乎也这样做！

编辑：仍然迷惑。在检查可被 64 整除的检查的构造函数中`C`进行检查后，如果不是，则出现异常，我得到了异常。最初我虽然它可能与堆栈上的实例有关，但是在将它们更改为基于堆之后，对齐检查仍然失败。我将回到一个调用并就地执行的工厂函数（这可能是最终会做的）`this``throw``C``posix_memalign``new``std::aligned_storage`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T20:58:58.233

是的你可以; 使用[`std::is_polymorphic`](http://en.cppreference.com/w/cpp/types/is_polymorphic).

但是，如果您要对齐某些东西，请使用[`std::aligned_storage`](http://en.cppreference.com/w/cpp/types/aligned_storage)with placement `new`：

```
std::aligned_storage<sizeof(C), 64> as;
C* c = new (&as) C;

// use c...

c->~C(); // call destructor ourselves 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T21:03:55.133

与其手动添加填充字节，为什么不使用`__attribute__((aligned(64)))`并让编译器为您对齐它，无论是否存在 vtable ？然后您将始终获得 64 字节对齐而无需其他工作，并且它消除了对知道 vtable 大小的依赖。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T21:37:42.403

停止尝试手动添加填充字节。只需定义要与对齐属性对齐的变量，如下所示：

```
class C
{
public:
    virtual ~C() {}

//private:
    __attribute__((aligned(64))) int64_t iValue;
};

void printAddr(C* a, int i)
{
    printf("&a[%d] = %p   &a[%d].iValue = %p\n", i, &a[i], i, &a[i].iValue);
}

int main()
{
    C a[8];
    printf("\nsizof(C) is: %d\n\n", sizeof(C));
    for (int i=0; i<sizeof(a)/sizeof(a[0]); ++i)
        printAddr(a, i);

    printf("\n");
} 
```

如果你的类有一个 vtable，那当然会扩大类的大小，但编译器会为你插入必要的填充，并根据需要调整包含类的对齐要求，以确保具有最严格 (最大）对齐将正确对齐。顺便说一句，vtable 不存储在对象中，只是一个 vtable 指针。因此，如果您使用的是 32 位系统，则 vtable 指针仅占用 4 个字节。您看到的 sizeof(C)=128 的其余部分是编译器添加的填充，以确保类型对象数组`C`对齐，但它正在使您关心的变量不对齐：假设您实际上需要`iValue`在 64 字节边界上对齐，它不再在这样的边界上对齐。

* * *

`iValue`或....答案更简单：

停止添加您自己的填充字节！只需这样做：

```
class __attribute__((aligned(64))) C
{
public:
    virtual ~C() {}

//private:
    int64_t iValue;
};

void printAddr(C* a, int i)
{
    printf("&a[%d] = %p   &a[%d].iValue = %p\n", i, &a[i], i, &a[i].iValue);
}

int main()
{
    C a[8];
    printf("\nsizof(C) is: %d\n\n", sizeof(C));
    for (int i=0; i<sizeof(a)/sizeof(a[0]); ++i)
        printAddr(a, i);

    printf("\n");
} 
```

请注意，如果您这样做，则`iValue`成员不再在 64 字节边界上对齐，但它们都与邻居的`iValue`.

# geb - GEB测试...驱动回调问题

> ID：14654908
> 
> 赞同：0
> 
> 时间：2013-02-01T20:58:32.120
> 
> 标签：geb

我有：

```
•   java version "1.6.0_37"

•   Java(TM) SE Runtime Environment (build 1.6.0_37-b06-434-10M3909)

•   Java HotSpot(TM) 64-Bit Server VM (build 20.12-b01-434, mixed mode)

•   Grails 2.2.0

•   Groovy 2.0

•   GEB core 0.7.2 
```

和所有需要的罐子。我正在尝试运行一个简单的 GEB 程序：

我在模块依赖项中有所有 groovy jar，我正在附加 buildconfig 和 gebconfig 以及一个新程序及其错误。我知道这个新错误是调用驱动程序的问题，但我需要帮助来找出整个问题并解决它。谢谢

**BUILDCONFIG.GROOVY**

```
grails.servlet.version = "2.5" //Change depending on target container compliance(2.5 or 3.0)

grails.project.class.dir = "target/classes"

grails.project.test.class.dir = "target/test-classes"

grails.project.test.reports.dir = "target/test-reports"

grails.project.target.level = 1.6

grails.project.source.level = 1.6

grails.project.war.file = "target/${appName}.war"

grails.project.dependency.resolution = {

    inherits("global") {}

    log "warn"

    checksums true // Whether to verify checksums on resolve

    def gebVersion = "0.7.2"

    def seleniumVersion = "2.25.0"

    repositories {

    inherits true

    }

    dependencies {

    test("org.seleniumhq.selenium:selenium-htmlunit-driver:$seleniumVersion") {

        exclude "xml-apis"

    }

    test("org.seleniumhq.selenium:selenium-chrome-driver:$seleniumVersion")

    test("org.seleniumhq.selenium:selenium-firefox-driver:$seleniumVersion")

//        test 'org.seleniumhq.selenium:selenium-firefox-driver:latest.release'

//        test 'org.seleniumhq.selenium:selenium-chrome-driver:latest.release'

//

//        test('org.seleniumhq.selenium:selenium-htmlunit-driver:latest.release') {

//            exclude 'xml-apis'

//        }

  test "org.codehaus.geb:geb-junit4:$gebVersion"

    }

    plugins {

    test ":geb:0.9.0-RC-1"

    }
}

// Use a local copy of a platform plugin instead of the installed plugin

grails.plugin.location.platform = "../../plugins/platform" 
```

**GEBCONFIG.GROOVY**

```
/*
    This is the Geb configuration file.

    See: http://www.gebish.org/manual/current/configuration.html
*/

import groovy.transform.Field

//import org.openqa.selenium.htmlunit.HtmlUnitDriver

import org.openqa.selenium.firefox.FirefoxDriver

import org.openqa.selenium.chrome.ChromeDriver

// Use htmlunit as the default

// See: http://code.google.com/p/selenium/wiki/HtmlUnitDriver

//driver = {

 //def driver = new HtmlUnitDriver()

  // driver.javascriptEnabled = true

   // driver

//}

driver= {

    new FirefoxDriver()

}

waiting {

    timeout = 5

}

environments {

    // run as “grails -Dgeb.env=chrome SampleTests-app”
    // See: http://code.google.com/p/selenium/wiki/ChromeDriver

   chrome {

    driver = { new ChromeDriver() }

    }

    // run as “grails -Dgeb.env=firefox SampleTests-app”
    // See: http://code.google.com/p/selenium/wiki/FirefoxDriver

    firefox {

       driver = { new FirefoxDriver() }

    }

} 
```

**测试**

```
package com.test.platform.test

import geb.junit4.GebReportingTest

import geb.Browser

import org.codehaus.groovy.grails.plugins.springsecurity.SpringSecurityUtils

class AuthTests extends GebReportingTest {

    void testLoginLogout() {

    Browser.drive {

        //goto login page & assert location

        go("http://localhost:8080/test")

        assert (getTitle() == "Welcome to test")

    }

    }

} 
```

**错误**

```
Failure:  testLoginLogout(com.test.platform.test.AuthTests)
|  geb.driver.DriverCreationException: failed to create driver from callback 'GebConfig$_run_closure3_closure5_closure7@c471242'
    at geb.driver.CallbackDriverFactory.getDriver(CallbackDriverFactory.groovy:35)
    at geb.driver.CachingDriverFactory$_getDriver_closure3.doCall(CachingDriverFactory.groovy:80)
    at geb.driver.CachingDriverFactory$SimpleCache.get(CachingDriverFactory.groovy:30)
    at geb.driver.CachingDriverFactory.getDriver(CachingDriverFactory.groovy:79)
    at geb.Configuration.createDriver(Configuration.groovy:306)
    at geb.Configuration.getDriver(Configuration.groovy:295)
    at geb.Browser.getDriver(Browser.groovy:101)
    at geb.Browser.clearCookies(Browser.groovy:407)
    at geb.Browser.clearCookiesQuietly(Browser.groovy:415)
    at geb.junit4.GebTest.resetBrowser(GebTest.groovy:46)
Caused by: java.lang.NoSuchMethodError: org.openqa.selenium.logging.LocalLogs.getNullLogger()Lorg/openqa/selenium/logging/LocalLogs;
    at org.openqa.selenium.firefox.FirefoxDriver$LazyCommandExecutor.<init>(FirefoxDriver.java:325)
    at org.openqa.selenium.firefox.FirefoxDriver$LazyCommandExecutor.<init>(FirefoxDriver.java:321)
    at org.openqa.selenium.firefox.FirefoxDriver.<init>(FirefoxDriver.java:188)
    at org.openqa.selenium.firefox.FirefoxDriver.<init>(FirefoxDriver.java:183)
    at org.openqa.selenium.firefox.FirefoxDriver.<init>(FirefoxDriver.java:179)
    at org.openqa.selenium.firefox.FirefoxDriver.<init>(FirefoxDriver.java:92)
    at GebConfig$_run_closure3_closure5_closure7.doCall(GebConfig.groovy:39)
    at geb.driver.CallbackDriverFactory.getDriver(CallbackDriverFactory.groovy:29)
    ... 9 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T12:41:08.640

为什么要使用 geb 插件 0.9.0-RC-1 和 geb-junit4 0.7.2？您应该为它们使用相同的版本。

此外，您不需要在测试中使用 Browser.drive 块，因为您的测试中有一个隐式浏览器可用，它也由基类管理。查看[Geb docs 中的 Spock 示例](http://www.gebish.org/manual/0.9.0-RC-1/testing.html#spock_junit__testng)，它具有与 JUnit 基类完全相同的可用变量。

因此，您的测试可能看起来像：

```
package com.test.platform.test

import geb.junit4.GebReportingTest
import geb.Browser

class AuthTests extends GebReportingTest {

    void testLoginLogout() {
        go("http://localhost:8080/test")

        assert(getTitle() == "Welcome to test")
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T15:30:39.703

可以试试这个 FF 驱动程序

```
{   
    FirefoxBinary firefoxBinary = new FirefoxBinary()
    firefoxBinary.setEnvironmentProperty("DISPLAY",":77")
    firefoxBinary.setTimeout(20000l)
    FirefoxProfile profile = new FirefoxProfile()

    driver = {  
        new FirefoxDriver(firefoxBinary, profile)
    }
} 
```

在我的项目中它的工作。关于其他brousers，我无能为力。

# c# - 使用 Treeview 作为具有复杂分组要求的组合的下拉模板

> ID：14654910
> 
> 赞同：1
> 
> 时间：2013-02-01T20:58:37.843
> 
> 标签：c#, wpf, xaml

以下面的数据为例...

```
Id      Name                Type        Sector
12345   GOOG                Eqty        Internet
12346   MSFT                Eqty        Internet
12347   MOBL                Eqty        Oil
12348   XOM                 Eqty        Oil
12349   Wheat               Comdty          
12310   Corn                Comdty          
12311   Nas 100 eMini       Futures             
12312   S&P 500 eMini       Futures 
```

使用上述数据，我想构建一个带有自动过滤功能的下拉组合选择器，它将以如下所示的格式显示树视图。本质上，我想按“类型”分组，然后按“扇区”分组，然后显示名称。但是，如果缺少 Sector，则 Name 应仅分组在 Type 下。

```
+Equities(Eqty)
    +Internet
        Goog
        Msft
    +Oil
        MOBL
        XOM
+Commodities(Comdty)
    Wheat
    Corn
+Futures
    Nas 100 eMini
    S&P 500 eMini 
```

我已经尝试了多种方法来通过 XAML/模板优雅地做到这一点，但运气不佳。这里复杂的部分是第二组是有条件的。任何关于我如何能够解决这个问题的想法将不胜感激

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-05T10:33:59.933

如果您打算使用现已失效的名为 SilverLight 的技术并在其中使用 XAML？模板查看[此链接以获取递归模板](https://stackoverflow.com/questions/3299915/are-recursive-datatemplates-possible)

要使用 linq 执行此操作，您需要的是递归调用...请参阅[此处给出的答案以获得一个很好的示例](https://stackoverflow.com/questions/9409021/id-parentid-list-to-hierarchical-list)。

# jquery - HTML5 样板和 jQuery

> ID：14654918
> 
> 赞同：4
> 
> 时间：2013-02-01T20:58:55.020
> 
> 标签：jquery, html

[我想知道为什么来自http://html5boilerplate.com/](http://html5boilerplate.com/)的样板文件在 web 内容之后声明 jQuery？这有充分的理由吗？

这是代码片段...

> ```
>  <!-- Add your site or application content here -->
>     <p>Hello world! This is HTML5 Boilerplate.</p>
>     <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
>     <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.9.0.min.js"><\/script>')</script>
>     <script src="js/plugins.js"></script>
>     <script src="js/main.js"></script> 
> ```

PS`window.jQuery ||`部分是做什么的？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-01T21:00:44.250

它检查 CDN 副本是否正确加载。如果没有，它会加载一个本地副本。

* * *

当 jQuery 在页面上运行时，它会创建一个全局`jQuery`变量。这也可以作为全局对象的属性访问：`window.jQuery`. 如果 jQuery 没有运行，`window.jQuery`将是`undefined`.

这`||`是以下内容的简写版本：

```
if ( window.jQuery == undefined ) {
    document.write('<script src="js/vendor/jquery-1.9.0.min.js"><\/script>');
} 
```

这样，如果 Google 的 CDN 出现故障（或浏览器无法访问`ajax.googleapis.com`），您的网站不会中断。相反，将从您的域提供相同的 jQuery 副本。

* * *

它位于底部的原因是因为[雅虎的性能指南](http://developer.yahoo.com/performance/rules.html#js_bottom)建议这样做：

> 脚本引起的问题是它们会阻止并行下载。HTTP/1.1 规范建议浏览器每个主机名并行下载不超过两个组件。如果您从多个主机名提供图像，则可以同时进行两次以上的下载。但是，在下载脚本时，浏览器不会启动任何其他下载，即使在不同的主机名上也是如此。
> 
> [...]
> 
> 如果可以推迟脚本，也可以**将其移至页面底部。这将使您的网页加载速度更快**。

有关这方面的更多信息，请参阅 Steve Souders[关于此主题的优秀文章](http://developer.yahoo.com/blogs/ydn/posts/2007/07/high_performanc_5/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T21:01:31.540

[将 Javascript 放在 HTML 文件中的什么位置？](https://stackoverflow.com/questions/196702/where-to-place-javascript-in-a-html-file)涵盖了为什么最好将 javascript 放在页面底部。基本上，因为它使您的页面加载速度更快。

`window.jQuery ||`正在检查以确保您从 CDN 下载了 jQuery。如果没有（假设 CDN 已关闭），它将使用您的本地文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T21:01:51.193

最好在内容后面加上 JavaScript，这样 JavaScript 就不会阻塞页面加载。

[有关更多信息，请参阅 Steve Sounder 的博客文章。](http://developer.yahoo.com/blogs/ydn/posts/2007/07/high_performanc_5/)

`window.jQuery ||`如果 CDN 副本不可用，该部分会从本地托管的副本加载 jQuery。

基本上，脚本标签是从 Google 的服务器加载 jQuery，这些服务器速度非常快，并且位于世界各地。另外，由于许多站点从 Google 的服务器加载 jQuery，许多人将其缓存在他们的浏览器中。无论哪种方式，人们都会很快得到它。

问题是，如果 Google 的服务器出现故障，它将无法加载 jQuery。为了保护我们免受从 Google 加载 jQuery 后在线上不太可能发生的情况，我们有一个 JavaScript 表达式。它是一个条件表达式`A OR B`。在这种情况下，表达式的左侧是 jQuery 变量，如果它是从 Google 成功加载的，这将是 jQuery 全局对象，它是 JavaScript 中的“真实”值，它将评估为 true。因为在 OR 表达式中，如果一侧为真，则无需评估 B 侧 JavaScript 将永远不会执行这行代码的其余部分。这称为[短路评估](http://en.wikipedia.org/wiki/Short-circuit_evaluation)。

如果 jQuery 无法从 Google CDN 加载，则全局 jQuery 变量将未定义。这是一个“假”值，因此 JavaScript 将执行 OR 表达式的右侧。在这种情况下，右侧在页面上写入一个新的脚本标签。新的脚本标签从一个相关域加载 jQuery，这意味着托管该站点的同一台服务器。它可能不如从谷歌加载它快，但至少我们知道它会起作用。

# php - MySQL显示配置文件持续时间格式？

> ID：14654922
> 
> 赞同：9
> 
> 时间：2013-02-01T20:59:04.387
> 
> 标签：php, mysql

我正在使用该`SHOW PROFILES;`命令`set profiling=1;`来分析我的查询，当我获得配置文件时，我会得到一堆持续时间和查询，一切都很好。但我想弄清楚持续时间的格式。我得到了很多

```
0.00006300
0.00022700
0.00007000 
```

小数字，这是毫秒吗？秒？纳秒？十亿分之一秒？一些随机的其他值？

我找不到任何关于它是什么的文档。它看起来像几秒钟，但我想知道 100%

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T21:05:09.690

你猜对了，它是在几秒钟内。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-06-09T06:10:05.580

它在mysql文档中提到.. SECONDS

供参考： [https ://dev.mysql.com/doc/refman/8.0/en/information-schema-profiling-table.html](https://dev.mysql.com/doc/refman/8.0/en/information-schema-profiling-table.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T17:09:47.753

在几秒钟内发出命令。你的结果等于微秒：63、227、70

# c# - 无法将类型“字符串”隐式转换为“System.Collections.Generic.List” '

> ID：14654923
> 
> 赞同：10
> 
> 时间：2013-02-01T20:59:10.107
> 
> 标签：c#, string, list

这个问题可能已经被回答了数百次，但这里有。

我有这段代码：

```
private void PopulateStringDropdownList(List<ObjectInfo> listObject,
                                        object selectedType = null)
{
    List<string> listString = listObject.OrderBy(x => x.m_Type).ToString();
    for (int i = 0; i < listString .Count; i++)
    {
        for (int j = i + 1; j < listString .Count; j++)
        { 
            if (String.Equals(listString [i], listString [j]))
            {
                listString.RemoveAt(j);
            }
        }
    }
    ViewBag.property1 = new SelectList(listString );
} 
```

所以基本上我试图用来自我传入参数的列表中包含的每个对象的属性的字符串填充下拉列表。

但是由于您在那里看到的错误，代码无法编译，我还没有完全理解为什么。有什么帮助吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-01T21:01:59.780

这是有问题的行：

```
List<string> listString = listObject.OrderBy(x => x.m_Type).ToString(); 
```

`ToString`返回一个字符串，并且您正在尝试分配给一个`List<string>`变量。

你需要做这样的事情：

```
List<string> listString = listObject.OrderBy(x => x.m_Type)
                                    .Select(x => x.ToString())
                                    .ToList(); 
```

此语句会将您的`listObject`enumerable 排序为您想要的顺序，然后将值转换为字符串，最后将 enumerable 转换为 a `List<string>`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-01T21:02:02.727

看看这段代码：

```
List<string> listString = listObject.OrderBy(x => x.m_Type).ToString(); 
```

右边的表达式调用-`ToString()`的结果，`OrderBy`它本身没有用，并且会产生一个`string`.

然后，您尝试将该`string`表达式分配给 type 的新变量`List<string>`。那是行不通的。

我*怀疑*你只是想要`ToList`而不是`ToString`：

```
List<string> listString = listObject.OrderBy(x => x.m_Type).ToList(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T21:12:39.030

您可以将所有代码简化为：

```
List<string> listString = listObject.OrderBy(x => x.m_Type)
                                    .Select(x => x.ToString())
                                    .Distinct()  // Remove duplicated entries
                                    .ToList();
ViewBag.property1 = new SelectList(listString); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-01T21:22:06.443

仍然需要进行一些更正。这是完整的代码：

```
private void PopulateStringDropdownList(List<ObjectInfo> listObjects, object selectedType = null)

        {
            List<string> listString = listObjects.OrderBy(x => x.m_Type)
                                             .Select(x => x.m_Type.ToString())
                                             //.Distinct()
                                             .ToList();
            ViewBag.cardType = new SelectList(listString );
        } 
```

这样找到的正确值是类型的字符串，而不是对象的类型。

感谢大家的帮助！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-01T21:02:01.790

我想你想要`ToList`而不是`ToString`.

此外，如果您想要做的只是删除重复项，您可以简单地使用 LINQ 并执行以下操作：

```
List<string> listString = listObject.OrderBy(x => x.m_Type).
    Select(x => x.ToString()).Distinct().ToList(); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-05-10T06:32:40.573

将列表转换`int`为列表`string`：

```
List<string> listString =  listObject.OrderBy(x => x.m_Type).
Select(x =>x.ToString()).ToList(); 
```

# php - 为什么 max_allowed_pa cket 没有效果？

> ID：14654924
> 
> 赞同：1
> 
> 时间：2013-02-01T20:59:11.963
> 
> 标签：php, mysql

我正在尝试将大量数据放入数据库。

我观察到当数据远大于 1Mb 时，我得到一个 500 - Mysql has gone away 错误。

当数据接近 1Mb 标记时，我收到一条错误消息，指出已达到最大数据包大小。

当数据小于等于1Mb时，每次都查询成功。

我在 my.ini 中查看了 max_allowed_pa​​cket（我在 Windows 机器上运行），并将其设置为 16M，甚至将其增加得更高。我已经确保我也重新启动了 mysql。

但同样的行为正在发生。我想念的地方还有其他设置吗？供您参考，我使用 PHP 来运行查询。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T21:10:12.287

您可以将 max_allowed_pa​​cket 设置为全局变量。您可以动态设置此变量，而无需重新启动 MYSQL 服务。

您可以将其增加到 1 GB。我建议将其设置为您希望插入的最大数据字符串的至少 2 倍。这将为您提供一些扩展空间，因为当然下周您将不得不处理比您预期更大的文件。

在此处查看从 PHP 代码动态设置 max_allowed_pa​​cket 的示例：http: [//www.devplace.nl/blog/storing-large-values-in-mysql-fields-with-php](http://www.devplace.nl/blog/storing-large-values-in-mysql-fields-with-php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T21:12:04.807

我有类似的问题，并通过增加php.ini 上的**upload_max_filesize**和**memory_limit来解决它**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T13:45:24.067

原来我需要在两个地方改变它。我在 phpMyAdmin 上发现，在允许的最大数据包的设置和变量下确实仍然是 1M，尽管我在配置中更改了它。

有了这些新信息，我能够集中搜索并引导我

SET @@global.max_allowed_pa​​cket=n

这向我展示了如何更改全局设置！

问题是，我认为如果服务器重置，它会回到原来的状态，我需要做一些设置文件。我现在不需要的更多并发症。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T13:48:53.607

`fopen`一个文件句柄，然后绑定`resource`到参数。

# search - 谷歌自定义搜索没有结果

> ID：14654930
> 
> 赞同：2
> 
> 时间：2013-02-01T20:59:20.550
> 
> 标签：search, tabs, spry

我为我的网站进行了 Google 自定义搜索，但似乎无法正常工作。每次我尝试使用它时，它都会给我“没有结果”。我尝试了谷歌网站上的论坛，但没有人回应。因此，如果你们中的任何人知道为什么它不起作用，那就太好了！

这是代码：

```
 <div class="searchbox" id="searchbox"><script>
  (function() {
    var cx = '014409856576262012500:d5cgsozp8m0';
    var gcse = document.createElement('script'); gcse.type = 'text/javascript';     gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//www.google.com/cse/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(gcse,     s);
  })();
</script>
<gcse:search></gcse:search>
</div> 
```

我的网站主要由 Spry 选项卡式面板组成，但我认为搜索框应该可以使用它。

这是网站： [http ://emilymagnuson.com/trustbank/index.html](http://emilymagnuson.com/trustbank/index.html)

谢谢！

# vbscript - 使用脚本解压缩共享驱动器上的文件

> ID：14654935
> 
> 赞同：0
> 
> 时间：2013-02-01T20:59:30.760
> 
> 标签：vbscript, vb6

我想从网络共享驱动器上的 zip 文件中提取文件。然而，潜艇抛出了一个异常——`VBScript runtime error: Object required: 'objTarget'`

我这样称呼子：

`Extract "\\driveName\Folder\Path\Here" & file, "\\driveName\Folder\Path\Here\Unzipped"`

这很奇怪，因为要设置的代码可以`objSource`正常工作，但是当代码尝试设置时`objTarget`，它会出错。此外，当我指定本地驱动器时，它可以正常工作。我认为我必须进行一些修改才能使其正常运行（如果可能的话）。下面是子：

```
Sub Extract(ByVal myZipFile, ByVal myTargetDir)

    Dim intOptions, objShell, objSource, objTarget

    ' Create the required Shell objects
    Set objShell = CreateObject("Shell.Application")

    ' Create a reference to the files and folders in the ZIP file
    Set objSource = objShell.NameSpace(myZipFile).Items()

    ' Create a reference to the target folder
    Set objTarget = objShell.NameSpace(myTargetDir)

    intOptions = 4

    ' Unzip the files
    objTarget.CopyHere objSource, intOptions

    ' Release the objects
    Set objSource = Nothing
    Set objTarget = Nothing
    Set objShell  = Nothing
End Sub 
```

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T22:50:41.863

尝试引用网络路径。所以你的命令是：

```
Extract "\\driveName\Folder\Path\Here\" & file, """\\driveName\Folder\Path\Here\Unzipped""" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T15:56:58.070

Other possible reason for that error:

```
If objTarget Is Nothing Then
    WScript.Echo "Target path not exist"
Else
    objTarget.CopyHere objSource, intOptions
End If 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T21:59:23.893

如果一切都失败了，您可以手动打开文件并删除 zip 标头。显然，zip 标头是几个字符和一个以 null 结尾的字符串，如果这些被删除，文件就会解压缩。 [http://tek-tips.com/viewthread.cfm?qid=1302498](http://tek-tips.com/viewthread.cfm?qid=1302498)有更多信息，大约在线程的一半。

# ios - JQuery Ajax 和移动 SAafari 身份验证

> ID：14654938
> 
> 赞同：1
> 
> 时间：2013-02-01T20:59:44.267
> 
> 标签：ios

所以我试图获得一个需要身份验证的 JSON 请求，这在桌面上工作，但在 iOS 上，每次我访问它时我都会得到一个用户名/密码对话框，我怎样才能在 iOS 上超越它？似乎用户名/密码设置未使用或执行不佳

这是我当前的代码：

```
jQuery(document).ready(function() {
        $.ajax({
            url: 'http://api.someservice.json',
            type: 'GET',
            dataType: 'jsonp',
            data: {
              username: 'user',
              password: 'pass'
            },
            username: "user",
            password: "pass",
            success: function(content) { 
                //proceed(content);
                proceed(content[0]); 
            }});
    }) 
```

有人可以纠正这个问题，以免每次都被要求进行身份验证吗？提前谢谢

# python - InnoSetup 搞砸了 Python 脚本？

> ID：14654947
> 
> 赞同：0
> 
> 时间：2013-02-01T21:00:27.017
> 
> 标签：python, inno-setup

我有一个读取 excel 电子表格的 Python 脚本。仅当电子表格与脚本位于同一文件夹中时才会这样做。

现在，当我使用 py2exe 将脚本转换为`.exe`然后将我`.xls`的文件复制到`dist`它创建的文件夹以及`.exe`文件所在的位置时，它运行良好。但是，当我使用 InnoSetup 制作安装程序，然后将文件复制到主可执行文件所在的程序文件夹时，即使和位于同一文件夹中`.xls`，程序也找不到我的文件。`.xls``.exe``.xls`

可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T21:42:11.143

您的问题与 Inno Setup 没有真正的关系。

我的猜测是：

*   您正在安装程序中为您的 exe 程序创建快捷方式图标，
*   您的程序并没有真正打开位于 exe 目录中的 excel 文件，而是在应用程序的[*工作目录*](https://stackoverflow.com/questions/1810743/how-to-set-the-current-working-directory-in-python)中。
*   Icon 条目指定了错误的`WorkingDir`参数。

要*修复*您的安装程序，请更改您的 [icon] 条目，指定正确的`WorkingDir`或将其留空，根据[文档](http://jrsoftware.org/ishelp/topic_iconssection.htm)，安装程序将尝试使用`Filename`参数的路径，例如：

```
[Icons]
Name: "{group}\My Program"; Filename: "{app}\MYPROG.EXE"; WorkingDir: "{app}" 
```

# java - Java 错误：无法解析为变量

> ID：14654950
> 
> 赞同：-3
> 
> 时间：2013-02-01T21:00:34.327
> 
> 标签：java, minecraft, bukkit

我正在尝试使用 Java，bukkit 创建一个 minecraft 插件。

```
@EventHandler
public void onItemDrop(PlayerDropItemEvent e) {
    /*
     * Dropping items
     */
    Item item = e.getItemDrop();
    item.setMetadata("NODROP", new FixedMetadataValue(plugin, e.getPlayer()));
    if (!e.getPlayer().hasPermission("nodrop.drop")) {
        e.getItemDrop().remove();
        e.getPlayer().sendMessage(colorizeText(ChatColor.RED + getConfig().getString("drop-message")));
    }
} 
```

我得到的错误是'plugin' on

```
 item.setMetadata("NODROP", new FixedMetadataValue(plugin, e.getPlayer())); 
```

这是：

插件无法解析为变量

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T21:04:50.547

所以需要在方法体中写出这样的一行代码：

```
Plugin plugin = new Plugin(); 
```

或者您可以声明`plugin`为实例变量：

```
public class Foo  
{
    private Plugin plugin;  //initialize later  
    ...
    public void onItemDrop(PlayerDropItemEvent e) {  
     ...
   }  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T21:21:25.507

我不认为@Woot4Moo 的回答是正确的。很坦率地说; 当您运行插件时，它会抛出错误。

可以通过以下两种方式之一修复上述错误：

**将插件更改为此**
如果您的 EventListener 在主插件类（扩展的那个`JavaPlugin`）中，那么您可以简单地将`plugin`部分更改为`this`.
`item.setMetadata("NODROP", new FixedMetadataValue(this, e.getPlayer()));`

**获取插件的实例**
如果您的 EventListener 在插件的另一部分中，那么当您声明侦听器时将其更改为`getServer().getPluginManager().registerEvents(this, new SomeEventListener(this)`并创建一个构造函数，该构造函数接收发送的插件实例并存储它。

```
public SomeEventListener(JavaPlugin instance) {
    this.plugin = instance;
} 
```

然后您可以简单地将 item.setMetadata 保持原样。

# silverlight - 在 WP7 中将宽度设置为自动时无法获取控件的宽度

> ID：14654952
> 
> 赞同：0
> 
> 时间：2013-02-01T21:00:42.643
> 
> 标签：silverlight, windows-phone-7

当我尝试在宽度为自动时获取按钮或堆栈面板的宽度时，有两种情况：

*   当我使用时，`ActualWidth`我总是得到零
*   当我使用时，`Width`我总是得到 NaN

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T10:57:49.203

`Width`如果您在 XAML 中将其设置为 Auto，则始终为 NaN。 `ActualWidth`因布局状态而异。

在布局更新期间，元素的实际宽度可能会更新多次，并且会重复引发 LayoutUpdated 事件。

但是，如果您处理`SizeChanged`元素的事件，这应该在布局更新完成时触发，那么`ActualWidth`元素的事件应该是准确的。

# visual-studio-2010 - Visual Studio 向后步进导航

> ID：14654954
> 
> 赞同：2
> 
> 时间：2013-02-01T21:00:45.403
> 
> 标签：visual-studio-2010, keyboard-shortcuts

当您使用导致光标跳转到同一文档的不同部分或一起切换文档的命令时，有没有办法向后导航？

一个例子：按 F12 会导致光标跳转到选择定义，我正在寻找的组合键将返回到定义的特定引用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T21:02:58.120

这取决于您的键盘方案，但我的`CTRL`+`-`将我带回到上一个编辑点。

要查找分配给此功能的当前键，请转到菜单`Tools - Options` 然后搜索`Environment - Keyboard`并查找`View.NavigateBackward`命令

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-03T21:42:03.277

请注意`View.PopBrowseContext`指挥。它总是让你回到你按下 F12 的地方。所以它是相反的`Jump to definition`。它不考虑您在按下 F12 后所做的任何移动或编辑。它只是让你回来。

可惜在 VS2015 中他们决定去掉这个命令。

# javascript - 将 WCF REST 服务添加到使用 HTML5、Javascript、CSS 开发的移动应用程序

> ID：14654955
> 
> 赞同：0
> 
> 时间：2013-02-01T21:00:50.227
> 
> 标签：javascript, wcf, rest, mobile

我已经实现了一个带有 SOAP/REST 端点的 WCF 服务，它现在作为云服务发布到 Windows Azure。此云服务将数据库和存储链接在一起，其他现有客户端可以访问它们。我现在正在尝试使用 Javascript/HTML5 实现一个网络移动应用程序。

问题：是否可以将 REST 服务引用添加到此 Web 移动应用程序（因为我们需要使用服务中的一些操作，就像其他客户端一样）？据我所知，它将被视为客户并正确使用我的服务，对吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T12:38:38.763

我认为只要您的手机正确实现 HTTP 动词（GET POST PUT DELETE）就可以了，这是 REST 等开放标准提供的好处之一。

# mysql - 如何提高这个 MySQL 查询的效率？

> ID：14654960
> 
> 赞同：1
> 
> 时间：2013-02-01T21:01:10.807
> 
> 标签：mysql

以下查询在 0.12 秒内执行

```
SET @num :=0, @current_shop_id := NULL, @current_product_id := NULL;

SELECT * FROM (

SELECT fav1.user_id, @num := IF(@current_shop_id=shops.shop_id, IF(@current_product_id=products.product_id,@num,@num+1),0) AS row_number, @current_shop_id := shops.shop_id AS shop_dummy, @current_product_id := products.product_id AS product_dummy

    FROM favorites fav1 INNER JOIN
    products ON
    fav1.product_id=products.product_id AND 
    fav1.current=1 AND
    fav1.closeted=1 AND 
    fav1.user_id=30  INNER JOIN
    shops ON
    shops.shop_id = products.shop_id 

    GROUP BY fav1.product_id
    ORDER BY shops.shop ASC

    ) AS rowed_results WHERE rowed_results.row_number>=0 AND rowed_results.row_number<(0+5) 
```

第二个查询在 0.00 秒内执行

```
SELECT fav5.product_id AS product_id, SUM(CASE 
WHEN fav5.current = 1 AND fav5.closeted = 1 THEN 1
WHEN fav5.current = 1 AND fav5.closeted = 0 THEN -1
ELSE 0
END) AS favorites_count
FROM favorites fav5
GROUP BY fav5.product_id 
```

但是，将它们按如下方式组合会导致执行时间超过 11 秒的查询

```
SET @num :=0, @current_shop_id := NULL, @current_product_id := NULL;

SELECT * FROM (

SELECT fav1.user_id, @num := IF(@current_shop_id=shops.shop_id, IF(@current_product_id=products.product_id,@num,@num+1),0) AS row_number, @current_shop_id := shops.shop_id AS shop_dummy, @current_product_id := products.product_id AS product_dummy

    FROM

    #limit results to products favorited by the user whose closet is being shown
    favorites fav1 INNER JOIN

    products ON
    fav1.product_id=products.product_id AND 
    fav1.current=1 AND
    fav1.closeted=1 AND 
    fav1.user_id=30  INNER JOIN

    shops ON
    shops.shop_id = products.shop_id 

    LEFT JOIN

    # this LEFT JOIN associates favorites_count table (adds up the scores for all the products in the favorites table)
    (
    SELECT fav5.product_id AS product_id, SUM(CASE 
    WHEN fav5.current = 1 AND fav5.closeted = 1 THEN 1
    WHEN fav5.current = 1 AND fav5.closeted = 0 THEN -1
    ELSE 0
    END) AS favorites_count
    FROM favorites fav5
    GROUP BY fav5.product_id 

    ) AS fav6 ON products.product_id=fav6.product_id

    GROUP BY fav1.product_id
    ORDER BY shops.shop ASC

    ) AS rowed_results WHERE rowed_results.row_number>=0 AND rowed_results.row_number<(0+5) 
```

我怎样才能加快速度？

第一个查询的 EXPLAIN EXTENDED 是

```
+----+-------------+------------+--------+------------------------------------------------+---------+---------+------------------------------+------+----------+----------------------------------------------+
| id | select_type | table      | type   | possible_keys                                  | key     | key_len | ref                          | rows | filtered | Extra                                        |
+----+-------------+------------+--------+------------------------------------------------+---------+---------+------------------------------+------+----------+----------------------------------------------+
|  1 | PRIMARY     | <derived2> | ALL    | NULL                                           | NULL    | NULL    | NULL                         | 8846 |   100.00 | Using where                                  |
|  2 | DERIVED     | fav1       | ref    | user_id,user_id_2,product_id,closeted          | user_id | 4       |                              | 9624 |   100.00 | Using where; Using temporary; Using filesort |
|  2 | DERIVED     | products   | eq_ref | PRIMARY,shop_id,shop_id_2,product_id,shop_id_3 | PRIMARY | 4       | my_database.fav1.product_id  |    1 |   100.00 |                                              |
|  2 | DERIVED     | shops      | eq_ref | PRIMARY                                        | PRIMARY | 4       | my_database.products.shop_id |    1 |   100.00 |                                              |
+----+-------------+------------+--------+------------------------------------------------+---------+---------+------------------------------+------+----------+----------------------------------------------+
4 rows in set, 1 warning (0.12 sec) 
```

第一个查询的 SHOW WARNINGS 是

```
+-------+------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Note  | 1003 | select `rowed_results`.`user_id` AS `user_id`,`rowed_results`.`row_number` AS `row_number`,`rowed_results`.`shop_dummy` AS `shop_dummy`,`rowed_results`.`product_dummy` AS `product_dummy` from (select `my_database`.`fav1`.`user_id` AS `user_id`,(@num:=if(((@current_shop_id) = `my_database`.`shops`.`shop_id`),if(((@current_product_id) = `my_database`.`products`.`product_id`),(@num),((@num) + 1)),0)) AS `row_number`,(@current_shop_id:=`my_database`.`shops`.`shop_id`) AS `shop_dummy`,(@current_product_id:=`my_database`.`products`.`product_id`) AS `product_dummy` from `my_database`.`favorites` `fav1` join `my_database`.`products` join `my_database`.`shops` where ((`my_database`.`fav1`.`user_id` = 30) and (`my_database`.`products`.`product_id` = `my_database`.`fav1`.`product_id`) and (`my_database`.`shops`.`shop_id` = `my_database`.`products`.`shop_id`) and (`my_database`.`fav1`.`current` = 1) and (`my_database`.`fav1`.`closeted` = 1)) group by `my_database`.`fav1`.`product_id` order by `my_database`.`shops`.`shop`) `rowed_results` where ((`rowed_results`.`row_number` >= 0) and (`rowed_results`.`row_number` < 5)) |
+-------+------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec) 
```

第二个查询的 EXPLAIN EXTENDED 是

```
+----+-------------+-------+------+---------------+------+---------+------+-------+----------+---------------------------------+
| id | select_type | table | type | possible_keys | key  | key_len | ref  | rows  | filtered | Extra                           |
+----+-------------+-------+------+---------------+------+---------+------+-------+----------+---------------------------------+
|  1 | SIMPLE      | fav5  | ALL  | NULL          | NULL | NULL    | NULL | 16377 |   100.00 | Using temporary; Using filesort |
+----+-------------+-------+------+---------------+------+---------+------+-------+----------+---------------------------------+
1 row in set, 1 warning (0.00 sec) 
```

第二个查询的 SHOW WARNINGS 是

```
+-------+------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Level | Code | Message                                                                                                                                                                                                                                                                                                                                                                            |
+-------+------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Note  | 1003 | select `my_database`.`fav5`.`product_id` AS `product_id`,sum((case when ((`my_database`.`fav5`.`current` = 1) and (`my_database`.`fav5`.`closeted` = 1)) then 1 when ((`my_database`.`fav5`.`current` = 1) and (`my_database`.`fav5`.`closeted` = 0)) then -(1) else 0 end)) AS `favorites_count` from `my_database`.`favorites` `fav5` group by `my_database`.`fav5`.`product_id` |
+-------+------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec) 
```

最终查询的 EXPLAIN EXTENDED 是

```
+----+-------------+------------+--------+------------------------------------------------+-----------+---------+------------------------------+-------+----------+----------------------------------------------+
| id | select_type | table      | type   | possible_keys                                  | key       | key_len | ref                          | rows  | filtered | Extra                                        |
+----+-------------+------------+--------+------------------------------------------------+-----------+---------+------------------------------+-------+----------+----------------------------------------------+
|  1 | PRIMARY     | <derived2> | ALL    | NULL                                           | NULL      | NULL    | NULL                         |  8846 |   100.00 | Using where                                  |
|  2 | DERIVED     | fav1       | ref    | user_id,user_id_2,product_id,closeted          | user_id_2 | 4       |                              |  9624 |   100.00 | Using where; Using temporary; Using filesort |
|  2 | DERIVED     | products   | eq_ref | PRIMARY,shop_id,shop_id_2,product_id,shop_id_3 | PRIMARY   | 4       | my_database.fav1.product_id  |     1 |   100.00 |                                              |
|  2 | DERIVED     | shops      | eq_ref | PRIMARY                                        | PRIMARY   | 4       | my_database.products.shop_id |     1 |   100.00 |                                              |
|  2 | DERIVED     | <derived3> | ALL    | NULL                                           | NULL      | NULL    | NULL                         | 15764 |   100.00 |                                              |
|  3 | DERIVED     | fav5       | ALL    | NULL                                           | NULL      | NULL    | NULL                         | 16377 |   100.00 | Using temporary; Using filesort              |
+----+-------------+------------+--------+------------------------------------------------+-----------+---------+------------------------------+-------+----------+----------------------------------------------+
6 rows in set, 1 warning (11.50 sec) 
```

最终查询的 SHOW WARNINGS 是

```
+-------+------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Note  | 1003 | select `rowed_results`.`user_id` AS `user_id`,`rowed_results`.`row_number` AS `row_number`,`rowed_results`.`shop_dummy` AS `shop_dummy`,`rowed_results`.`product_dummy` AS `product_dummy` from (select `my_database`.`fav1`.`user_id` AS `user_id`,(@num:=if(((@current_shop_id) = `my_database`.`shops`.`shop_id`),if(((@current_product_id) = `my_database`.`products`.`product_id`),(@num),((@num) + 1)),0)) AS `row_number`,(@current_shop_id:=`my_database`.`shops`.`shop_id`) AS `shop_dummy`,(@current_product_id:=`my_database`.`products`.`product_id`) AS `product_dummy` from `my_database`.`favorites` `fav1` join `my_database`.`products` join `my_database`.`shops` left join (select `my_database`.`fav5`.`product_id` AS `product_id`,sum((case when ((`my_database`.`fav5`.`current` = 1) and (`my_database`.`fav5`.`closeted` = 1)) then 1 when ((`my_database`.`fav5`.`current` = 1) and (`my_database`.`fav5`.`closeted` = 0)) then -(1) else 0 end)) AS `favorites_count` from `my_database`.`favorites` `fav5` group by `my_database`.`fav5`.`product_id`) `fav6` on(((`my_database`.`products`.`product_id` = `my_database`.`fav1`.`product_id`) and (`fav6`.`product_id` = `my_database`.`fav1`.`product_id`))) where ((`my_database`.`fav1`.`user_id` = 30) and (`my_database`.`products`.`product_id` = `my_database`.`fav1`.`product_id`) and (`my_database`.`shops`.`shop_id` = `my_database`.`products`.`shop_id`) and (`my_database`.`fav1`.`current` = 1) and (`my_database`.`fav1`.`closeted` = 1)) group by `my_database`.`fav1`.`product_id` order by `my_database`.`shops`.`shop`) `rowed_results` where ((`rowed_results`.`row_number` >= 0) and (`rowed_results`.`row_number` < 5)) |
+-------+------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T21:36:11.277

使用子查询会创建一个没有任何索引的临时表。加入子查询时，您总是在进行全表扫描。

在没有完全查看您的 SQL 的情况下，使用主键创建一个临时表可能会起作用。

```
CREATE TEMPORARY TABLE fav6 (product_id INT, favorites_count INT, PRIMARY KEY (product_id));

INSERT INTO fav6
    SELECT fav5.product_id AS product_id, SUM(CASE 
        WHEN fav5.current = 1 AND fav5.closeted = 1 THEN 1
        WHEN fav5.current = 1 AND fav5.closeted = 0 THEN -1
        ELSE 0
        END) AS favorites_count
    FROM favorites fav5
    GROUP BY fav5.product_id;

SET @num :=0, @current_shop_id := NULL, @current_product_id := NULL;

SELECT * FROM (

SELECT fav1.user_id, @num := IF(@current_shop_id=shops.shop_id, IF(@current_product_id=products.product_id,@num,@num+1),0) AS row_number, @current_shop_id := shops.shop_id AS shop_dummy, @current_product_id := products.product_id AS product_dummy

    FROM

    #limit results to products favorited by the user whose closet is being shown
    favorites fav1 INNER JOIN

    products ON
    fav1.product_id=products.product_id AND 
    fav1.current=1 AND
    fav1.closeted=1 AND 
    fav1.user_id=30  INNER JOIN

    shops ON
    shops.shop_id = products.shop_id 

    LEFT JOIN

    fav6 ON products.product_id=fav6.product_id

    GROUP BY fav1.product_id
    ORDER BY shops.shop ASC

    ) AS rowed_results WHERE rowed_results.row_number>=0 AND rowed_results.row_number<(0+5) 
```

# c# - PredicateBuilder 和多级嵌套实体集

> ID：14654962
> 
> 赞同：4
> 
> 时间：2013-02-01T21:01:14.153
> 
> 标签：c#, asp.net, linq, entity-framework, predicatebuilder

我试图围绕动态嵌套谓词表达式。情况不太好。

基本上我需要能够在一组固定的属性上创建动态查询，但在动态（并且可能无限）数量的（嵌套）级别上。

以家谱为例，我应该能够编写查询来获得以下任何一个结果：

*   找到所有有孩子的父母
*   查找所有有名字以“k”开头的孩子的父母
*   查找所有有孩子的父母，他们的孩子出生于 2013 年 1 月 1 日之后，孩子的名字叫“约翰”
*   等等

我可以手写一些类似的东西，效果很好。

```
var pred = PredicateBuilder.True<db.Entity>();
pred = pred.And(n => 
    n.Children.Where(
        m => m.Children.Where(
            o => o.Name.Contains("John")
        ).Any()
    ).Any()
); 
```

问题是如何在任意数量的嵌套级别上使用混合属性和运算符动态创建上述代码？

# symfony - 在自定义 Twig 扩展中使用 Twig

> ID：14654963
> 
> 赞同：1
> 
> 时间：2013-02-01T21:01:18.243
> 
> 标签：symfony, twig

在 Symfony2 项目中，我创建了一个实现 Twig_ExtensionInterface 的服务，因此我可以将其用作 Twig 过滤器，例如`{{ stuff|my_filter }}`

在这项服务中，我需要使用 twig 环境，因此我可以使用 twig 模板，因此我将其注入到服务中：

在 services.yml 中：

```
services:
    meta.twig.my_extension:
        class: Acme\GeneralBundle\Twig\MyExtension
        tags:
            - { name: twig.extension }
        arguments:
            twig: "@twig" 
```

所以服务本身看起来像：

```
<?php

namespace Acme\GeneralBundle\Twig;

class MyExtension extends \Twig_Extension
{

    public function __construct($twig)
    {
        $this->twig = $twig;
    }

    public function getFilters()
    {
        return array(
            'my_filter' => new \Twig_Filter_Method($this, 'myFunction'),
        );
    }

    public function myFunction($text)
    {
       return $this->twig->render($someTemplate,$someArguments);
    }
} 
```

我可以在这样的控制器中使用它：

```
$myService = $this->container->get('Acme.twig.my_extension');
$text = $myService->myFunction($someValue); 
```

但是，当然，这样做时我会收到一个 CircularReference 错误：

```
Circular reference detected for service "Acme.twig.my_extension", 
path: "Acme.twig.my_extension -> twig". 
```

那么，在自定义 Twig Filter 中使用 twig->render() 函数的最佳方法是什么？

非常感谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T19:57:23.390

`Twig_ExtensionInterface`定义`initRuntime()`接受 twig 环境作为参数的方法。在初始化扩展时，twig 会调用此方法。

您已经扩展了这个`Twig_Extension`类，它[已经提供了这个方法的一个空实现](https://github.com/fabpot/Twig/blob/master/lib/Twig/Extension.php#L13)。您所要做的就是覆盖它并存储对 twig 环境的引用以供将来使用。

```
<?php

namespace Acme\GeneralBundle\Twig;

class MyExtension extends \Twig_Extension
{
    private $environment = null;

    public function initRuntime(\Twig_Environment $environment)
    {
        $this->environment = $environment;
    }

    public function getFilters()
    {
        return array(
            'my_filter' => new \Twig_Filter_Method($this, 'myFunction'),
        );
    }

    public function myFunction($text)
    {
       return $this->environment->render($someTemplate,$someArguments);
    }
} 
```

文档：[创建扩展](http://twig.sensiolabs.org/doc/advanced.html#creating-an-extension).

# php - 将 MySQL 中的值与 PHP 中的 int 进行比较不起作用

> ID：14654964
> 
> 赞同：0
> 
> 时间：2013-02-01T21:01:18.603
> 
> 标签：php, mysql

我正在尝试为学校项目从头开始制作自己的网站。它进展顺利，而且我已经走了很远，但是在将变量与 PHP 脚本中的数字进行比较时遇到了一个问题。

（我跳过了很多不相关的代码，例如 SQL 连接等）

```
$SQL = "INSERT INTO members (points) VALUES ('800')"; 
```

这很好用，并且该数字作为“int(64)”插入到我的 SQL 数据库中

然后我将变量放入 PHP 脚本中的会话中

```
$_SESSION['points'] = $points[0]; 
```

然后我把它归结为另一个 PHP 脚本

```
$SQL = mysql_query("SELECT points FROM members WHERE username = $uname");
$points = mysql_fetch_row($SQL); 
```

仍然很好，当我检查 $points[0] 时它仍然是 800

但我无法在这样的陈述中比较它

```
if ($Points[0] >= 400)
{echo "took it";
}
else {echo "didnt take it";
} 
```

知道可能出了什么问题吗？它更大，但变量受到威胁，就好像它较低或为空一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T21:16:00.603

我在这里猜测一下，但我认为您打算`$_SESSION['points']`在说*“然后我把它放到另一个 PHP 脚本”*时进行比较。

`$_SESSION['points']`如果要更改值，则需要更新。

此外，变量区分大小写。所以在你的`if`陈述中，你应该使用小写`$points`。您可以`mysql`通过执行检查返回的内容`var_dump($points)`。

# sql - 按子字符串对 sql 结果进行分组

> ID：14654965
> 
> 赞同：3
> 
> 时间：2013-02-01T21:01:22.707
> 
> 标签：sql, sql-server-2005

我有一个包含一些记录的表，其中一列代表每条记录的组：

```
id  | group
1     abc_xxx
2     abc_yyy
3     def_ooo
4     def_ppp
5     ghi_jjj
6     ghi_kkk 
```

当我进行查询并按组列对行进行分组时，我得到

```
abc_xxx
abc_yyy
def_ooo
def_ppp
ghi_jjj
ghi_kkk 
```

然而，这不是我需要的正确输出，我需要得到类似的东西：

```
abc
def
ghi 
```

因为它代表了group列下记录的真实分类。所以我在 SQL Server 2005 中寻找一种方法，我可以用它来获得它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-01T21:06:06.470

使用[SUBSTRING](http://msdn.microsoft.com/en-us/library/ms187748.aspx)或[LEFT](http://msdn.microsoft.com/en-us/library/ms177601.aspx)（更简单但非标准）：

```
SELECT
    SUBSTRING([group], 1, 3) AS [group]
FROM table
GROUP BY 
    SUBSTRING([group], 1, 3) 
```

或者，

```
SELECT
    LEFT([group], 3) AS [group]
FROM table
GROUP BY 
    LEFT([group], 3) 
```

分组时通常是聚合一些东西，所以我猜你正在寻找类似的东西：

```
SELECT
    SUBSTRING([group], 1, 3) AS [group],
    COUNT(*) AS [count]
FROM table
GROUP BY 
    SUBSTRING([group], 1, 3) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T21:05:58.767

为什么不在选择中使用 SUBSTRING()？参考 MSDN [SUBSTRING() 语法](http://msdn.microsoft.com/en-us/library/ms187748.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T21:08:49.277

```
SELECT
  t.id,
  t.groupcode
FROM
  (SELECT id, group, left(group,charindex('_',group)-1) as groupcode FROM table) t
GROUP BY
  groupcode 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T21:10:16.727

如何`left`提取组`prefix`：

```
SELECT LEFT([group], 3) AS grp
FROM table
GROUP BY LEFT([group], 3); 
```

注意：请尽量避免在列名中使用保留关键字：例如`group`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T21:08:14.213

也许是这样的？

```
SELECT DISTINCT SUBSTRING(col, 1, CHARINDEX('_', col) -1)
FROM kittens 
```

# git - git log 在哪里获取 Rails 应用程序中的作者姓名

> ID：14654966
> 
> 赞同：0
> 
> 时间：2013-02-01T21:01:29.010
> 
> 标签：git

我在我正在开发的 Rails 应用程序上使用 git，我很想从哪里`git log`检索作者姓名和电子邮件。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T21:03:36.697

当您设置 git 时，它会询问您的姓名和电子邮件地址。

您输入的值存储在您所做的每个提交中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T21:19:11.253

在 中找到它`~/.gitconfig`。感谢@madhead

# android - 动画不适用于围绕 y 方向旋转的 textview

> ID：14654969
> 
> 赞同：-1
> 
> 时间：2013-02-01T21:01:39.477
> 
> 标签：android, animation

我有一个更大的视图，里面有一个 textview 和一个 imageview。当我围绕 y 轴为较大的视图设置动画时，图像视图从 0 度旋转到 180 度（这是我想要的），但文本视图在 1 度处消失，然后以 180 度重新出现。我还注意到，如果我将视图停止在 20 度，则文本根本不会出现，就好像 android 无法以零和 180 度以外的旋转显示文本视图。我相信我正确地遵循了这些示例。我确实看到了一些使用相机的示例，我是否应该在旋转之前先拍摄大视图的照片？我最重要的问题是 android 动画可以在 0、180 和 -180 以外的 y 旋转时显示文本视图吗？Y 在屏幕的平面上。这是我的代码：

```
 FlashQView flashQView = flasQ.getView();
    AnimatorSet animatorSet = (AnimatorSet)AnimatorInflater.loadAnimator(this, R.animator.exit);
    animatorSet.setTarget(flashQView);
    animatorSet.start(); 
```

这是我的 exit.xml 动画器文件：

```
 <set xmlns:android="http://schemas.android.com/apk/res/android">
    <objectAnimator
    android:valueFrom="0"
    android:valueTo="180"
    android:propertyName="rotationY"
    android:duration="2000" />
    </set> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T18:45:15.673

所以我想出了一个解决方案，但仍然想知道 android 动画是否可以在 0、-180 或 180 以外的角度显示 TextView。我用包含 textview 和 imageview 的框架布局替换了我的 textview。在我制作动画之前，我将 imageview 设置为

```
 textView.buildDrawingCache();
    imageView.setImageBitmap(questionTextView.getDrawingCache()); 
```

imageView 看起来就像 textView 并且结束并隐藏了 textView。然后我制作动画（围绕 Y 轴旋转），图像视图显示为以 0 到 180 之间的角度旋转。这是框架布局

```
 <FrameLayout
     android:layout_width="match_parent"
     android:layout_height="wrap_content">    
     <TextView android:id="@+id/ans_text_view"
      android:layout_width="match_parent" 
      android:layout_height="wrap_content"
      android:textAppearance="?android:attr/textAppearanceMedium"
     /> 
     <ImageView
      android:id="@+id/ans_text_view_image"
      android:layout_width="match_parent" 
      android:layout_height="wrap_content"
      android:adjustViewBounds="true"  
     /> 
```

我不必使用相机，这是一个子问题。这就是我得到绘图缓存的想法的地方 第一个答案[从 imageview 和 textview 创建图像？](https://stackoverflow.com/questions/10333596/create-image-from-imageview-and-textview)

# javascript - 在 JS 中使用 Promise 链的正确方法

> ID：14654987
> 
> 赞同：2
> 
> 时间：2013-02-01T21:02:19.153
> 
> 标签：javascript, node.js, promise, deferred, fs

任务如下。[我需要使用fs2](https://npmjs.org/package/fs2)库中的 rmdir 删除文件夹及其内容。它返回[延迟的](https://npmjs.org/package/deferred)承诺对象。完成后，我需要再次创建文件夹。并且函数也应该返回承诺以进行进一步的链接。

我现在的代码是这样的：

```
function clearOutputDir() {
    var def = deferred();
    var def2 = deferred();

    if (fs.existsSync(outputFolder)) {
        def.resolve(fs2.rmdir(outputFolder, {recursive: true, force: true}));
    } else {
        def.resolve();
    }

    def2.resolve(def.promise.then(function () {
        return deferred.promisify(fs.mkdir)(outputFolder);
    }));

    return def2.promise;
} 
```

看起来它有效，但它很难看。如果没有 def 和 def2 可以更简单吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T13:23:45.953

首先，不需要自己创建未解决的承诺，使用 fs2 函数返回的承诺并“然后”处理它们会更干净，在这种情况下，Plynx 解决方案是一个很好的提示

其次，由于事物的异步性质（以及文件系统内部功能的工作方式），您不应该使用*fs.exists*功能，它通常已被弃用，最好不要使用它，而是做您想做的事直接，并依赖最终的错误代码。请参阅：[https](https://groups.google.com/forum/?fromgroups=#!topic/nodejs/gRRuly79oRc) ://groups.google.com/forum/?fromgroups=#!topic/nodejs/gRRuly79oRc它更清楚地说明了这一点。

获得解决方案：您也可以使用 fs2 中的 mkdir 而不是承诺*fs.mkdir*，因为除非提供自定义选项，否则它的工作方式与*fs.mkdir*完全一样（回退到） ，并且执行您想要的操作，返回承诺。

```
function clearOutputDir(outputFolder) {
    return fs2.rmdir(outputFolder, { recursive: true, force: true }).then(null, function (e) {
         // Ignore "No such dir" error, otherwise propagate further
         if (e.code === 'ENOENT') return null;
         throw e;
     }).then(fs2.mkdir.bind(fs2, outputFolder));
} 
```

*仅当fs2.rmdir*成功或 dir 不存在时才会运行*fs2.mkdir 。*我已经使用*bind*将它与*outputFolder*一起传递，它与以下效果相同：

```
function clearOutuputDir(outputFolder) {
    ...
    }).then(function () { return fs2.mkdir(outputFolder); });
} 
```

如果您决定使用*promisify*，最好重用 promisified 版本，并且不要在每个函数调用上创建它：

```
var mkdir = deferred.promisify(fs.mkdir);
function clearOutputDir(outputFolder) {
    ...
   }).then(function () { return mkdir(outputFolder); });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-29T19:59:29.660

考虑为此目的使用[final-fs库。](https://github.com/finalclass/final-fs)看看它的链接示例 - 它非常干净。

它使用[when](https://github.com/cujojs/when)库进行异步调用，因此几乎不可能陷入回调地狱。链接非常简单——它通过在 resolve 函数中返回一个 Promise 来完成。

代码如下所示：

```
var ffs = require('final-fs');

/**
 * @param {string} outputDir
 * @returns {Promise}
 */
function clearOutputDir(outputDir) {
    return ffs.exists(outputDir)
        .then(function (exists) {
            if (exists) {
                return ffs.rmdirRecursive(outputDir);
            }
        })
        .then(function () {
            return ffs.mkdir(outputDir);
        });
} 
```

# python - Python-XMPP - 迭代 IQ 节项目

> ID：14654996
> 
> 赞同：0
> 
> 时间：2013-02-01T21:02:55.450
> 
> 标签：python, python-2.7, xmpp

我正在使用 python-xmpp 连接到 gtalk。我正在收到回复，我可以向特定用户/电子邮件发送和接收消息。我正在寻找一种迭代`IQ`项目的方法，以便我可以获得每个项目的`jid`and`name`属性。IQ 节的形式为：

```
<iq to="example@gmail.com/test" id="3" type="result">
<query xmlns="jabber:iq:roster">
<item jid="test2@example.com" subscription="both" name="ABCD"/>
<item jid="test2@example.com" subscription="both" name="EFGH"/>
.
.
</query>
</iq> 
```

我还想在接收`<presence>`节时更新用户。我猜我应该使用回调，就像我现在正在处理的消息接收一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T08:46:18.033

我意识到可以将节点解析为任何 xml。这就是解决我的问题的方法：

```
query_node=iq_node.getQueryChildren()
for node in query_node:
    print node.getAttr("name") 
```

`iq_node`是`xmpp.protocol.Iq`对象，每个`node`都是`xmpp.simplexml.Node`对象

# c# - 如何修复错误“每个套接字地址（协议/网络地址/端口）通常只允许使用一次”？

> ID：14654998
> 
> 赞同：42
> 
> 时间：2013-02-01T21:03:00.907
> 
> 标签：c#, exception, networking, tcplistener

我已经做了很多谷歌搜索，但对我的问题没有太多运气。我是网络编程的新手并正在尝试学习，我试图设置一个简单的服务器和客户端进行通信（遵循位于此处的在线教程-> [http://tech.pro/tutorial/704/csharp-tutorial-简单线程 TCP 服务器](http://tech.pro/tutorial/704/csharp-tutorial-simple-threaded-tcp-server)）

我遇到的问题是，在尝试启动服务器上的 TcpListener 时，我不断收到异常“每个套接字地址（协议/网络地址/端口）通常只允许使用一次”。

我尝试禁用我的防火墙，更改要使用的端口，移动变量但无济于事（客户端工作正常，但它显然找不到服务器，因为我无法启动它）。

我见过描述使用 Socket.Poll() 的解决方案，但由于我只使用 TcpListener 对象，我不知道如何使用 Poll 函数。

我的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net.Sockets;
using System.Net;
using System.Threading;
using System.Text;

namespace ServerTutorial {
class Server {
    private readonly Thread m_listenThread;

    public Server() {
        m_listenThread = new Thread(new ThreadStart(ListenForClients));
        m_listenThread.Start();
    }

    public void ListenForClients() {
        var listener = new TcpListener(IPAddress.Any, 3000);
        listener.Start();

        while (true) {
            //Blocks until a client has connected to the server
            TcpClient client = listener.AcceptTcpClient();

            //Send a message to the client
            var encoder = new ASCIIEncoding();
            NetworkStream clientStream = client.GetStream();
            byte[] buffer = encoder.GetBytes("Hello Client!");
            clientStream.Write(buffer, 0, buffer.Length);
            clientStream.Flush();

            //Create a thread to handle communication with the connected client
            var clientThread = new Thread(new ParameterizedThreadStart(HandleClient));
            clientThread.Start(client);
        }
    }

    private void HandleClient(object clientObj) { //Param thread start can only accept object types, hence the cast
        var client = (TcpClient) clientObj;
        NetworkStream clientStream = client.GetStream();

        var message = new byte[4096];

        while (true) {
            int bytesRead = 0;

            try {
                //Block until a client sends a message
                bytesRead = clientStream.Read(message, 0, 4096);
            } catch {
                //A socket error has occurred
                System.Diagnostics.Debug.WriteLine("A socket error has occured");
                break;
            }

            if (bytesRead == 0) {
                //The client has disconnected from the server
                System.Diagnostics.Debug.WriteLine("A client has disconnected from the server");
                client.Close();
                break;
            }

            //Message has been received
            var encoder = new ASCIIEncoding();
            System.Diagnostics.Debug.WriteLine(encoder.GetString(message, 0, bytesRead));
        }
    }
}
} 
```

在我的主要方法中：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ServerTutorial {
class Program {
    static void Main(string[] args) {
        var server = new Server();
        server.ListenForClients();
    }
}
} 
```

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-02-01T21:06:38.140

`ListenForClients`被调用两次（在两个不同的线程上） - 一次来自构造函数，一次来自显式方法调用 in `Main`。当两个实例`TcpListener`尝试在同一个端口上侦听时，您会收到该错误。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-01-07T12:42:09.467

您正在调试两次或更多次。因此应用程序可能一次运行更多。那么只会出现这个问题。您应该使用任务管理器关闭所有调试应用程序，然后再次调试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-16T03:25:24.277

我在 windows server 2012 STD 64 bit 上遇到了类似的问题，在使用所有可用的 windows 更新更新 windows 后我的问题得到解决。