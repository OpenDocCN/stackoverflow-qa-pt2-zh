# StackOverflow 问答 15463000-15463999

# javascript - 如何等到网页加载了javascript？

> ID：15463003
> 
> 赞同：4
> 
> 时间：2013-03-17T16:11:53.740
> 
> 标签：javascript, html

我想用 javascript 在 html 中的两个页面之间进行切换，但是当我用 更改时`window.location`，这句话之后的代码会继续执行。

因此，例如，当我这样做时，`getElementById()`对它的调用无法识别元素，因为页面仍在加载。

```
function myFun(){

    // ...

    window.location = 'page.html';

    // ... wait until page.html is loaded

} 
```

我怎样才能等到页面加载以避免这个问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-17T16:13:07.333

当你这样做

```
window.location = 'page.html'; 
```

您将浏览器中包含代码的页面替换为`myFun`新页面。该指令后面的代码无法执行。

如果您想执行它，并且仅在该更改页面之后（但我不明白这一点），那么您可能会这样做

```
document.onload = function(){ window.location = 'page.html'; }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T16:14:53.367

您可以使用 jQuery [document.ready或者您可以像](http://api.jquery.com/ready/)[这样](https://github.com/jquery/jquery/blob/master/src/core.js)创建自定义绑定。如果你使用 jQuery。

```
 $(document).ready(function() {
        window.location = 'page.html';
    }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-17T16:15:19.917

做完之后不能在自己的页面中执行代码`window.location = 'page.html';`。您的页面将被新页面替换，当前页面中的代码将不再存在。

加载到当前窗口后执行某些代码的唯一方法`page.html`如下：

1.  将其加载到 iframe 或其他窗口中，并监视 iframe 或窗口何时完成加载。这样，您当前的代码就会保留下来，不会被替换。
2.  `page.html`当它完成加载并从那里触发您想要的操作时，有一些代码可以监控。

# python - 如何将 GET 请求从我的烧瓶应用程序发送到另一个站点？

> ID：15463004
> 
> 赞同：60
> 
> 时间：2013-03-17T16:11:57.527
> 
> 标签：python, ajax, flask

最初，我尝试将 ajax 请求从客户端发布到第三方 url，但似乎浏览器存在安全问题。我想过向服务器端发送一个ajax，从那里向第三方发送一个GET请求，获取响应并将其发送回客户端。我怎么能用烧瓶做到这一点？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-03-17T16:24:15.710

安装`requests`模块（比 using 好得多`urllib2`），然后定义一个发出必要请求的路由 - 例如：

```
import requests
from flask import Flask
app = Flask(__name__)

@app.route('/some-url')
def get_data():
    return requests.get('http://example.com').content 
```

但是，根据您的设置，最好将您的网络服务器配置为反向代理到某个 URL 下的目标站点。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-17T16:30:56.607

Flask 本身没有这种能力，但是编写一个请求处理程序是一件简单的事情，该处理程序使用 HTTP 客户端库向另一台服务器发出请求，然后返回该响应。

```
# third-party HTTP client library
import requests

# assume that "app" below is your flask app, and that
# "Response" is imported from flask.

@app.route("/proxy-example")
def proxy_example():
    r = requests.get("http://example.com/other-endpoint")
    return Response(
        r.text
        status=r.status_code,
        content_type=r.headers['content-type'],
    ) 
```

但是，这不会达到与客户端请求所期望的完全相同的结果。由于您的服务器无法“看到”客户端浏览器为目标站点存储的任何 cookie，因此您的代理请求将实际上是匿名的，因此，根据目标站点，可能会失败或给您与请求不同的响应浏览器中的那个资源。

[如果您与第三方 URL 有关系（也就是说，如果您控制它或能够与这样做的人合作）他们可以使用CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)在浏览器中授予跨域请求的访问权限（仅在现代浏览器）或[JSON-P](http://en.wikipedia.org/wiki/JSONP)（一种早于 CORS 的旧解决方法）。

第三方提供商还可以让您在端点访问所需的数据，该端点旨在接受来自其他服务器的请求，并为您提供验证应用程序的机制。最流行的协议是[OAuth](http://en.wikipedia.org/wiki/OAuth)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-02-11T04:49:28.630

正如其他答案所述，使用 Python 的 requests 模块将是从编码角度解决此问题的最佳方法。但是，正如提到的评论（以及我提出这个问题的原因），这可能会导致请求被拒绝的错误。这个错误很可能是由 SELinux 引起的。

要检查这是否是问题，首先确保使用以下命令启用 SELinux：

```
sestatus 
```

如果“当前模式”为“强制”，则启用 SELinux。

接下来使用以下命令获取直接应用于 apache 的当前 bool 值：

```
getsebool -a | grep httpd 
```

查找设置“httpd_can_network_connect”，这确定是否允许 apache 向网络发出 TCP 请求。如果它打开，则将允许所有 apache TCP 请求。要打开它，请以 root 身份运行以下命令：

```
setsebool -P httpd_can_network_connect 1 
```

如果您只需要数据库访问（我之前遇到过这个问题，这就是我在这里怀疑 SELinux 的原因），那么最好只打开“httpd_cna_network_connect”。

此策略的目的是，如果黑客要劫持您的 apache 服务器，他们将无法通过服务器进入您的内部网络的其余部分。

作为评论，这可能会更好，但我没有足够的代表..

资料来源： [https ://tag1consulting.com/blog/stop-disabling-selinux](https://tag1consulting.com/blog/stop-disabling-selinux) [https://wiki.centos.org/TipsAndTricks/SelinuxBooleans](https://wiki.centos.org/TipsAndTricks/SelinuxBooleans)

# php - 使用查询字符串从 PHP 标头重定向中删除 %20

> ID：15463007
> 
> 赞同：2
> 
> 时间：2013-03-17T16:13:03.620
> 
> 标签：php, redirect, header

我有一个表格，我正在尝试提交到数据库。成功提交后，我希望页面重定向到包含提交数据的页面。我正在使用如下查询字符串执行此操作：

```
header("location:palette.php?colID=$title"); 
```

生成的 URL 如下：**palette.php?colID=Funky%20Colours**

PHP标头重定向是否可以重定向到如下查询：

```
palette.php?colID=Funky-Colours 
```

生成一个 URL，如：**palette.php?colID=Funky-Colours**

如果是这样，有人可以提供一个例子

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T16:17:10.620

您可以通过简单地执行以下操作来做到这一点：

```
header('Location: palette.php?colID='.urlencode(str_replace(' ','-',$title))); 
```

但在你的`palette.php`，`$_GET['colID']`会收到`Funky-Colours`而不是`Funky Colours`。因此，您需要再次使用[str_replace()](http://php.net/str_replace)将破折号转换为空格。

那么，另一个问题是，您打算如何处理那些带有破折号的列 ID？例如，`$title`提交的是`Something-With-Dashes`，您的脚本会将这些破折号变成空格。但是要回答您的问题，**是的，可以使用[str_replace()](http://php.net/str_replace)来做到这一点。**

# java - 未经检查的演员：地图输出正在触发未经检查的演员警告

> ID：15463009
> 
> 赞同：0
> 
> 时间：2013-03-17T16:13:16.180
> 
> 标签：java, casting, warnings

我有以下代码行：

```
List<String> variandIds=(List<String>)parameters.get(AnalysisConstants.VARIANT_LOOKUPS_ID_LIST); 
```

它会发出以下警告：`Unchecked cast 'java.lang.Object' to 'java.util.List<java.lang.String>'`

`parameters`这是一张地图。

我需要摆脱警告，所以我想找出一种方法来检查现在可以使用的列表的值，`@SuppressWarnings("unchecked")`但我不想解决问题而不是忽略它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T16:19:12.663

参数变量声明不使用泛型或将键声明为 Object 类型。

如果参数变量是您可以控制的，您应该更改声明以使用泛型。

如果它不在你的控制之下，你除了抑制警告之外别无他法。

编辑 ：

`private List<VariantLookup> updateSelectedVariants(Map parameters)`

那么应该是

`private List<VariantLookup> updateSelectedVariants(Map<KEY_TYPE,List<String>> parameters)`

# java - Nan来自数学方程

> ID：15463010
> 
> 赞同：0
> 
> 时间：2013-03-17T16:13:16.447
> 
> 标签：java, double, nan

嗨，我在一段 java 代码中有以下等式：

```
double z = 0.002378 * (Math.pow((1 - (Math.pow(6.875, -6) * y)), 4.2561)); 
```

当我将 y 设置为非常大的值时，即`200000`我得到`Nan`（不是数字）它在稍低的值下工作正常，`130000`

谁能告诉我这是为什么？

此外，我尝试从原始 BASIC 程序中移植上述代码：

```
.002378*(1-(6.875*10^-6*ALT))^4.2561 
```

我可能做错了吗？BASIC 代码中的操作顺序不是很明确

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T16:23:20.330

正如[Javadoc for`Math.pow`](http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html#pow%28double,%20double%29)解释的那样：

> 如果第一个参数是有限的并且小于零 [... 并且] 第二个参数是有限的而不是整数，那么结果是 NaN。

因此，只要你`y`足够好，那`1 - (Math.pow(6.875, -6) * y`是负数，你就会得到 NaN。

（当您考虑基础数学时，这是有道理的。非整数幂的负数不是实数，并且`double`无法表示复数。）

* * *

**编辑更新的问题：**

您的 Basic 代码有`6.875*10^-6`（意思是 6.875 × 10 ^(-6)），但是您的 Java 代码有`Math.pow(6.875, -6)`（意思是 6.875 ^(-6)），这是一个更大的值，所以您的 Java 代码会触发这个问题，因为`y`. 这可能就是您现在看到此问题的原因。要匹配基本代码，您应该更改`Math.pow(6.875, -6)`为`6.875e-6`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T16:24:15.867

将负数提高到非整数幂会导致复数数学中的虚数，Java 算术中的 NaN。如果你真的需要做那个计算，你需要一个复数包。但是，您的方程式更有可能存在错误，或者您试图在其有效范围之外使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T16:26:08.343

具有实数幂的负数可能会得到 NAN

# eclipse - eclipse上的servlet在服务器上运行时问我“你想保存这个文件还是在网上找到一个程序来打开它”

> ID：15463014
> 
> 赞同：0
> 
> 时间：2013-03-17T16:13:29.983
> 
> 标签：eclipse, servlets, tomcat6

**当我尝试使用“在服务器上运行”来运行 Servlet 时，eclipse 会问我“你想保存这个文件还是在线找到一个程序来打开它**

截图 [https://lh4.googleusercontent.com/-EkJrxfmKEVE/UUXq9D2my-I/AAAAAAAAAbU/NZlNSnP3lTA/s1366/servlet.jpg](https://lh4.googleusercontent.com/-EkJrxfmKEVE/UUXq9D2my-I/AAAAAAAAAbU/NZlNSnP3lTA/s1366/servlet.jpg)

代码没有问题。请帮助我，我无法弄清楚......另一个人也面临同样的问题...... [http://www.eclipse.org/forums/index.php/m/669271/](http://www.eclipse.org/forums/index.php/m/669271/)

仍然有问题没有解决...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T16:21:42.947

您的

```
res.setContentType("test/html"); 
```

将会

```
res.setContentType("text/html"); 
```

请注意，“测试”已更改为“文本”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T16:17:29.730

您拼错了您的内容类型。
由于浏览器不知道如何显示`test/html`，它提供了保存它。

# javascript - 可拖动ID

> ID：15463017
> 
> 赞同：0
> 
> 时间：2013-03-17T16:13:56.860
> 
> 标签：javascript, jquery, html, draggable

我想得到我正在移动的 div 的 id。我尝试了不同的方法，没有任何效果。那么为什么这不起作用呢？

```
$('#content').children().draggable({
drag: function (event, ui) {
    var id = $(this).attr("id");
    $('#textarea').val(id);
} 
```

[http://jsfiddle.net/pX2T4/](http://jsfiddle.net/pX2T4/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T16:18:14.100

这不起作用，因为您没有找到 的 id *，*`$('#content')`而是没有设置 id 的子 div的 id。因此，给孩子一个 ID，它会找到那个。

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T16:18:30.327

这是因为 $(this) 指的是标有类的内部 div

见[http://jsfiddle.net/pX2T4/](http://jsfiddle.net/pX2T4/)

```
<div id="content">
    <div class="content" id="foo">
        <textarea name="" id="textarea" cols="30" rows="10"></textarea>
    </div>
</div>

$('#content').children().draggable({
    drag: function (event, ui) {
        var id = $(this).attr("id");
        console.log(id);
        console.log($(this));
        $('#textarea').val(id);
    }
}); 
```

输出“富”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T16:22:11.730

而是`$(this)`使用`$("#content")` 试试这个：

[http://jsfiddle.net/pX2T4/4/](http://jsfiddle.net/pX2T4/4/)*

# java - 如何使用 Play-Morphia 在哈希映射对象上使用 find() 或 filter()？

> ID：15463022
> 
> 赞同：0
> 
> 时间：2013-03-17T16:14:15.193
> 
> 标签：java, mongodb, playframework, morphia

我正在使用 Play 框架和 Play-Morphia 在 Java 中使用 MongoDb。我得到了一个定义如下的实体消息：

```
@Entity
public class Message{
    public String senderId;
    public Date date;
    public String initiatorId;
    @Embedded public MessageBasicInfo basicInfo;
} 
```

MessageBasicInfo 定义如下：

```
public class MessageBasicInfo implements IModel{
    public HashMap<String, Boolean> recipients;
} 
```

现在，我只想从 Mongo 中检索其在收件人哈希图中的值为 true 的消息。例如，我知道如何在列表中执行此操作，但不知道如何使用 hashmap 对象执行此操作。我会很感激任何建议。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T19:26:05.500

HashMap 很难查询。我建议你重新组织你`MessageBasicInfo`的

```
public class MessageBasicInfo implements IModel {
   public String key;
   public Boolean value;
} 
```

然后您可以通过以下方式查询所有`true`值消息：

```
Message.q("basicInfo.value", true).asList(); 
```

# c# - Assert.AreEqual 失败，但它不应该

> ID：15463023
> 
> 赞同：17
> 
> 时间：2013-03-17T16:14:22.433
> 
> 标签：c#, visual-studio-2012, mstest, assert

我有一个非常奇怪的行为，我无法解释。

我有以下课程：

```
public class Project
{
    public virtual int Id { get; set; }

    public virtual string Name { get; set; }
} 
```

还有一个返回`Project`对象的方法：

```
public Project GetByName(string Name)
{
    using (ISession session = NHibernateHelper.OpenSession())
    {
        Project project = session.CreateCriteria(typeof(Project))
                                 .Add(Restrictions.Eq("Name", Name))
                                 .UniqueResult<Project>();

        return project;
    }
} 
```

我添加了一个单元测试来测试该`GetByName`方法：

```
[TestMethod]
public void TestGetByName()
{
    IProjectsRepository projectRepository = new ProjectsRepository();

    var expected = new Project { Id = 1000, Name = "Project1" };
    var actual = projectRepository.GetByName(expected.Name);

    Assert.AreEqual<Project>(expected, actual);
} 
```

但是，当我运行单元测试时，将两个对象的类型与以下错误进行比较时失败：

> Assert.AreEqual 失败。预期：<MyProject.NHibernate.Project>。实际：<MyProject.NHibernate.Project>。

为什么断言失败？

* * *

[Assert.AreEqual](http://msdn.microsoft.com/en-us/library/ms243413.aspx)不是仅对对象的属性进行断言吗？

根据文档：

> **Assert.AreEqual 方法（对象，对象）**
> 
> 验证两个指定对象是否相等。如果对象不相等，则断言失败。
> 
> **Assert.AreSame 方法**
> 
> 验证指定的对象变量是否引用相同的对象。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-17T16:21:17.197

您需要重写 equals 方法来测试是否相等。默认情况下，它将使用引用比较，并且由于您的预期对象和实际对象位于内存中的不同位置，因此它将失败。这是您应该尝试的：

```
public class Project
{
    public virtual int Id { get; set; }

    public virtual string Name { get; set; }

    public override bool Equals(Object obj) 
    {
        if (obj is Project)
        {
            var that = obj as Project;
            return this.Id == that.Id && this.Name == that.Name;
        }

        return false; 
    }
} 
```

您还可以查看MSDN 上[覆盖等于的指南。](http://msdn.microsoft.com/en-us/library/ms173147.aspx)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-17T16:25:32.607

确保你的`Project`类覆盖了 equals 方法。目前您正在比较对象引用，并且由于您有 2 个不同的对象，`Project`您`Assert.AreEqual()`将失败。

```
public class Project
{
    public virtual int Id { get; set; }

    public virtual string Name { get; set; }

    public override bool Equals(object o)
    {
        var result = false;
        var project = o as Project;
        if (project != null)
        {
            result = Id == project.Id;
            result &= Name.Equals(project.Name);
            return result;
        }
        return false;
    }
} 
```

使用 equals 方法，您可以使用`Assert.AreEqual`

```
[TestMethod]
public void TestGetByName()
{
    IProjectsRepository projectRepository = new ProjectsRepository();

    var expected = new Project { Id = 1000, Name = "Project1" };
    var actual = projectRepository.GetByName(expected.Name);

    Assert.AreEqual<Project>(expected, actual);
} 
```

PS：如果您要覆盖 Equals，[建议](http://msdn.microsoft.com/en-us/library/ms173147%28v=vs.80%29.aspx)您也覆盖 Hashcode。

```
 public override int GetHashCode()
    {
        var hashcode = Id.GetHashCode();
        hashCode ^= Name.GetHashCode();
        return hashCode;
    } 
```

## AreSame vs AreEqual

`Assert.AreSame`即使您覆盖该`Equals`方法，仍然会失败。该方法实际上检查引用是否指向同一个实例。在你的情况下，他们不会。

`Assert.AreEqual`将简单地检查对象是否相等，这将通过调用来完成`expected.Equals(actual)`。`override bool Equals()`一旦您实现了该方法，这将导致 true 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T16:16:40.043

您正在比较两个拥有相同数据的不同对象。您应该在 Project 类中重载 Equals 方法，并在那里通过 id 实现比较。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-30T07:31:30.310

一个简单的替代方案是：

```
Assert.IsTrue(string1 == string2, "Error"); 
```

# bash - 附加多个参数并在单个命令中使用它们

> ID：15463026
> 
> 赞同：1
> 
> 时间：2013-03-17T16:14:35.377
> 
> 标签：bash, loops, wine

所以我打算在这里做的是创建一个脚本的一部分，它可以用 µtorrent（通过 wine）打开一个或多个 torrent。

Wine 路径需要像这样附加到参数中（循环显然不起作用）：

```
for i in "$@"; do
  open="Z:/$(pwd)/$i"
done

wine utorrent "$open" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T17:30:20.653

我会使用一个数组：

```
args=()
pwd=$(pwd)
for i; do
    args+=("z:/$pwd/$i")
done
wine utorrent "${args[@]}" 
```

在 bash`for`循环中，如果您省略该`in ...`子句，则默认情况下它会迭代`"$@"`。

# java - Java中的线程“AWT-EventQueue-0”帮助中的异常

> ID：15463027
> 
> 赞同：2
> 
> 时间：2013-03-17T16:14:35.550
> 
> 标签：java

我不断收到这些错误，我不知道为什么。我知道这与按钮有关，但我不知道如何修复它们。

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at java.awt.Container.addImpl(Container.java:1090)
    at java.awt.Container.add(Container.java:410)
    at LightsChasingSolver.<init>(LightsChasingSolver.java:45)
    at LightsChasingUI$2.actionPerformed(LightsChasingUI.java:153) 
```

这是我的代码

```
final JFrame frame2 = new JFrame("Lights Chasing Solver");
GridLayout gridLay = new GridLayout(2,1);
GridLayout grid = new GridLayout(5,5);
JPanel mainPanel = new JPanel(grid);        
JPanel legendPanel = new JPanel();

final JButton[][] sht = new JButton[5][5];

for(i=0;i<5;i++){
    for(j=0;j<5; j++) mainPanel.add(sht[i][j]);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T16:17:17.750

按钮数组中的每个元素都是空的。您不能将空组件添加到容器中。

```
for(int i = 0; i < 5; i++) {
    for(int j = 0; j < 5; j++) {
        sht[i][j] = new JButton("Hello"); // add this line
        mainPanel.add(sht[i][j]);
    }
 } 
```

# jsf-2 - 图像上未选择任何内容时，Primefaces 裁剪器错误

> ID：15463028
> 
> 赞同：4
> 
> 时间：2013-03-17T16:14:39.580
> 
> 标签：jsf-2, primefaces

当我尝试使用 primefaces 裁剪器裁剪图像时出现以下错误，但图像上没有选择任何内容（选择不存在）：

2013 年 3 月 17 日下午 5:10:46 com.sun.faces.lifecycle.ProcessValidationsPhase 执行警告：负宽度或零宽度

```
java.awt.image.RasterFormatException: negative or zero width
        at java.awt.image.Raster.<init>(Raster.java:1108)
        at java.awt.image.WritableRaster.<init>(WritableRaster.java:129)
        at sun.awt.image.SunWritableRaster.<init>(SunWritableRaster.java:129)
        at sun.awt.image.ByteComponentRaster.<init>(ByteComponentRaster.java:154)
        at sun.awt.image.ByteInterleavedRaster.<init>(ByteInterleavedRaster.java:191)
        at sun.awt.image.ByteInterleavedRaster.createWritableChild(ByteInterleavedRaster.java:1261)
        at java.awt.image.BufferedImage.getSubimage(BufferedImage.java:1173)
        at org.primefaces.component.imagecropper.ImageCropperRenderer.getConvertedValue(ImageCropperRenderer.java:146)
        at javax.faces.component.UIInput.getConvertedValue(UIInput.java:1030)
        at javax.faces.component.UIInput.validate(UIInput.java:960)
        at javax.faces.component.UIInput.executeValidate(UIInput.java:1233)
        at javax.faces.component.UIInput.processValidators(UIInput.java:698)
        at com.sun.faces.context.PartialViewContextImpl$PhaseAwareVisitCallback.visit(PartialViewContextImpl.java:510)
        at com.sun.faces.component.visit.PartialVisitContext.invokeVisitCallback(PartialVisitContext.java:183)
        at javax.faces.component.UIComponent.visitTree(UIComponent.java:1612)
        at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
        at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
        at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
        at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
        at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
        at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
        at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
        at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
        at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
        at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
        at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
        at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
        at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
        at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
        at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
        at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
        at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
        at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
        at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
        at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
        at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
        at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
        at javax.faces.component.UIForm.visitTree(UIForm.java:362)
        at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
        at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
        at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
        at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
        at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
        at com.sun.faces.context.PartialViewContextImpl.processComponents(PartialViewContextImpl.java:378)
        at com.sun.faces.context.PartialViewContextImpl.processPartial(PartialViewContextImpl.java:253)
        at javax.faces.context.PartialViewContextWrapper.processPartial(PartialViewContextWrapper.java:183)
        at javax.faces.context.PartialViewContextWrapper.processPartial(PartialViewContextWrapper.java:183)
        at javax.faces.context.PartialViewContextWrapper.processPartial(PartialViewContextWrapper.java:183)
        at javax.faces.component.UIViewRoot.processValidators(UIViewRoot.java:1171)
        at com.sun.faces.lifecycle.ProcessValidationsPhase.execute(ProcessValidationsPhase.java:76)
        at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
        at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
        at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.omnifaces.filter.FacesExceptionFilter.doFilter(FacesExceptionFilter.java:56)
        at org.omnifaces.filter.HttpFilter.doFilter(HttpFilter.java:75)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.omnifaces.filter.GzipResponseFilter.doFilter(GzipResponseFilter.java:148)
        at org.omnifaces.filter.HttpFilter.doFilter(HttpFilter.java:75)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.omnifaces.filter.CharacterEncodingFilter.doFilter(CharacterEncodingFilter.java:115)
        at org.omnifaces.filter.HttpFilter.doFilter(HttpFilter.java:75)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
        at org.apache.coyote.ajp.AjpProcessor.process(AjpProcessor.java:200)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
        at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
        at java.lang.Thread.run(Thread.java:722)

Mar 17, 2013 5:10:46 PM com.sun.faces.renderkit.html_basic.OutcomeTargetRenderer getNavigationCase
WARNING: JSF1090: Navigation case not resolved for component j_idt74. 
```

我真的不知道如何解决这个问题，因为在裁剪过程中似乎没有发生错误..

你能帮我解决这个问题吗？我真的不知道该怎么办。

我正在使用 Primefaces 3.5 和 Myfaces 2.1.17。

非常感谢。

更新：作物豆：

```
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.OutputStream;
import java.io.Serializable;

import javax.faces.application.FacesMessage;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ManagedProperty;
import javax.faces.bean.ViewScoped;
import javax.faces.context.FacesContext;
import javax.imageio.stream.FileImageOutputStream;
import javax.servlet.ServletContext;

import org.apache.commons.io.FilenameUtils;
import org.apache.commons.io.IOUtils;
import org.apache.log4j.Logger;
import org.primefaces.model.CroppedImage;

import com.meinanliegen.backingbean.User;
import com.meinanliegen.handlers.filters.Configurations;

@ManagedBean
@ViewScoped
public class ImageCropperBean implements Serializable {
  private static final long serialVersionUID = -7835902358418363820L;
  private static final Logger LOGGER = Logger.getLogger(ImageCropperBean.class);
  private CroppedImage croppedImage;
  private String photoCropped;
  // This only contains the relative path to the temp image : /temp/croppedImage
  private String relativeImagePhotoCropped;
  private String originalUploadedPhotoFileName;
  @ManagedProperty(value = "#{user}")
  private User user;

  public CroppedImage getCroppedImage() {
    return croppedImage;
  }

  public void setCroppedImage(CroppedImage croppedImage) {
    this.croppedImage = croppedImage;
  }

  public String getPhotoCropped() {
    return photoCropped;
  }

  public void setPhotoCropped(String photoCropped) {
    this.photoCropped = photoCropped;
  }

  public String getRelativeImagePhotoCropped() {
    return relativeImagePhotoCropped;
  }

  public void setRelativeImagePhotoCropped(String relativeImagePhotoCropped) {
    this.relativeImagePhotoCropped = relativeImagePhotoCropped;
  }

  public User getUser() {
    return user;
  }

  public void setUser(User user) {
    this.user = user;
  }

  public String crop() {
    if (croppedImage == null) {
      LOGGER.error("The cropped image is null");
    }
    else {
      manageTheCrop();
    }
    return null;
    }

  private void manageTheCrop() {
    FacesContext facesContext = FacesContext.getCurrentInstance();
    ServletContext servletContext = (ServletContext) facesContext.getExternalContext().getContext();

    String originalFilePhotoName = croppedImage.getOriginalFilename();
    String tempLocationForCroppedFile = servletContext.getRealPath(Configurations.UPLOAD_TEMP_FILE_PATH);

    String prefix = FilenameUtils.getBaseName(originalFilePhotoName);
    String suffix = FilenameUtils.getExtension(originalFilePhotoName);

    // First time we need to save the original photo name
    if (originalUploadedPhotoFileName == null) {
      originalUploadedPhotoFileName = prefix + "." + suffix;
    }

    try {
      // We will keep the same name for cropped photo, until the user decides
      File photoCroppedFile = File.createTempFile(prefix, "." + suffix, new File(tempLocationForCroppedFile));
      photoCropped = photoCroppedFile.getPath();
      cropImageAddContentTo(photoCropped);

      String prefixCroppedPhoto = FilenameUtils.getBaseName(photoCropped);
      String suffixCroppedPhoto = FilenameUtils.getExtension(photoCropped);
      String photoCroppedFileName = prefixCroppedPhoto + "." + suffixCroppedPhoto;
      relativeImagePhotoCropped = Configurations.UPLOAD_TEMP_FILE_PATH + photoCroppedFileName;
    }
    catch (IOException ex) {
      LOGGER.error(ex);
      BeanUtils.addMessage(FacesMessage.SEVERITY_ERROR, "Bitte versuchen Sie es noch einmal.",
      "Fehler beim Zuschneiden Ihres Fotos");
    }
      }

public void saveCroppedImageAsPrimaryUserImage() {
if (photoCropped != null) {
  String profilePhotoChosenFilePrefix = String.format("%s_%s_%s", user.getFirstName(), user.getLastName(),
      originalUploadedPhotoFileName);
  try {
    // We will save the last cropped image as profile
    File finalPhotoLocation = new File(Configurations.UPLOAD_FILE_PATH, profilePhotoChosenFilePrefix);

    OutputStream output = null;
    output = new FileOutputStream(finalPhotoLocation);
    IOUtils.copy(new FileInputStream(photoCropped), output);
    user.setTempProfilePictureSrc(relativeImagePhotoCropped);
    user.setProfilePictureSrc("../uploads/" + finalPhotoLocation.getName());
  }
  catch (IOException ex) {
    LOGGER.error(ex);
    BeanUtils.addMessage(FacesMessage.SEVERITY_ERROR, "Bitte versuchen Sie es noch         einmal.", "Fehlermeldung");
      }
    }
  }

  public void cropImageAddContentTo(String croppedImagePath) {
    try {
      cropImage(croppedImagePath);
    }
    catch (IOException ex) {
      LOGGER.error(ex);
      BeanUtils.addMessage(FacesMessage.SEVERITY_ERROR, "Fehlermeldung",
          "Es ist eiin Fehler aufgetreten. Bitte versuchen Sie es noch einmal.");
    }
  }

  public void cropImage(String imageFileName) throws IOException {
    FileImageOutputStream imageFileOutput = null;
    imageFileOutput = new FileImageOutputStream(new File(imageFileName));
    imageFileOutput.write(croppedImage.getBytes(), 0, croppedImage.getBytes().length);
    imageFileOutput.close();
  }
} 
```

和 JSF 部分：

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://java.sun.com/jsf/core"
xmlns:h="http://java.sun.com/jsf/html" xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:p="http://primefaces.org/ui">

<p:row>
    <p:column style="height:120px; width 120px;">
        <p:panelGrid columns="2">
            <p:row>
                <p:column>
                    <div class="photo">
                        <p:graphicImage id="standardUploadedImage" value="#{user.tempProfilePictureSrc}" />
                    </div>
                </p:column>
            </p:row>
            <p:row>
                <h:panelGroup id="adjustImage">
                    <p:column style="width:150px">
                        <p:panelGrid>
                            <p:row>
                                <p:column>
                                    <h:outputText value="Bild innerhalb des Rahmens positionieren"
                                        rendered="#{uploadPhotoHandler.userImageUploaded == true}" />
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column>
                                    <p:commandButton value="Bild anpassen" oncomplete="cropWidget.show()"
                                        update=":growl cropDialog" immediate="true"
                                        rendered="#{uploadPhotoHandler.userImageUploaded == true}"
                                        styleClass="css3button" />
                                </p:column>
                            </p:row>
                        </p:panelGrid>
                    </p:column>
                </h:panelGroup>
            </p:row>
        </p:panelGrid>
    </p:column>
</p:row>

<p:row>
    <p:column>
        <p:fileUpload fileUploadListener="#{uploadPhotoHandler.handleFileUpload}" mode="advanced"
            label="Portraitfoto hochladen" sizeLimit="5242880" allowTypes="/(\.|\/)(gif|jpe?g|png)$/"
            invalidSizeMessage="Datei darf maximal 5 MB groß sein"
            invalidFileMessage="Bitte prüfen Sie das Format. Es können nur jpg, gif, png Dateien verwendet werden."
            update=":growl standardUploadedImage uploadedImage imageCropper adjustImage" auto="true"
            required="false" />
    </p:column>
</p:row>

<p:row>
    <p:column>
        <p:confirmDialog id="cropDialog" header="Bild anpassen" severity="alert" showEffect="fade" closeOnEscape="true"
            closable="true" hideEffect="fade" widgetVar="cropWidget">
            <p:panelGrid>
                <p:row>
                    <p:column colspan="2">
                        <p:panelGrid columns="3" style="height:50px">
                            <p:row>
                                <p:column>
                                    <p:commandButton id="cancel" value="Löschen" onclick="cropWidget.hide()"
                                        type="button"
                                        update=":growl imageCropper uploadedImage standardUploadedImage"
                                        immediate="true" styleClass="css3button" />
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column>
                                    <h:panelGrid id="cropBtnPanel">
                                        <p:commandButton id="crop" value="Zuschneiden"
                                            action="#{imageCropperBean.crop}"
                                            update=":growl imageCropper uploadedImage standardUploadedImage cropFinished crop cropBtnPanel ApplyBtnPanel"
                                            process="crop imageCropper" styleClass="css3button"
                                            rendered="#{imageCropperBean.showCrop}" />
                                    </h:panelGrid>
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column>
                                    <h:panelGrid id="ApplyBtnPanel">
                                        <p:commandButton id="cropFinished" value="Übernehmen"
                                            actionListener="#{imageCropperBean.saveCroppedImageAsPrimaryUserImage}"
                                            oncomplete="cropWidget.hide()"
                                            update=":growl imageCropper uploadedImage standardUploadedImage crop cropFinished cropBtnPanel ApplyBtnPanel"
                                            process="cropFinished imageCropper" styleClass="css3button"
                                            rendered="#{imageCropperBean.showApply}" />
                                    </h:panelGrid>
                                </p:column>
                            </p:row>
                        </p:panelGrid>
                    </p:column>
                </p:row>

                <p:row>
                    <p:column headerText="Original">
                        <div class="photoToBeCropped">
                            <p:imageCropper id="imageCropper" 
                                            value="#{imageCropperBean.croppedImage}"
                                            image="#{user.tempProfilePictureSrc}" 
                                            initialCoords="225,75,300,125"
                                            aspectRatio="1.0" 
                                            rendered="#{uploadPhotoHandler.userImageUploaded == true}"
                                            minSize="170" 
                                            required="true" />
                        </div>
                    </p:column>
                    <p:column headerText="Cropped">
                        <div class="photoToBeCropped">
                            <p:graphicImage id="uploadedImage" value="#{imageCropperBean.relativeImagePhotoCropped}" />
                        </div>
                    </p:column>
                </p:row>
            </p:panelGrid>
        </p:confirmDialog>
    </p:column>
</p:row> 
```

值得一提的是，整个裁剪模块都嵌入在一个向导 primefaces 步骤中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T19:12:52.380

我可以在自己的[陈列柜](http://www.primefaces.org/showcase/ui/imageCropper.jsf)上重现它。当我取消选择图像并单击*Crop*时，我会在 ajax 响应中看到未处理的异常：

![在此处输入图像描述](../Images/3550835cd1039820bcb757267df93293.png)

*（如果他们安装了一个像样的[ajax 异常处理程序](http://showcase.omnifaces.org/exceptionhandlers/FullAjaxExceptionHandler)会很好，这样最终用户可以立即看到）*

好吧，这确实是他们自己代码中的一个错误。这是 4 天前已被报告为[问题 5349](https://code.google.com/p/primefaces/issues/detail?id=5349)，目前未安排。

如果你真的等不及他们修复它，那么你最好是覆盖渲染器以跳过工作`getConvertedValue()`：

```
public class MyImageCropperRenderer extends ImageCropperRenderer {

    @Override
    public Object getConvertedValue(FacesContext context, UIComponent component, Object submittedValue) throws ConverterException {
        if (submittedValue == null || ((String) submittedValue).endsWith("_0_0")) {
            return null;
        }

        return super.getConvertedValue(context, component, submittedValue);
    }

} 
```

提交的值是在没有选择任何内容时`x_y_w_h`的格式。在这种情况下，上述自定义渲染器将立即返回，而不是继续执行会引发异常的转换作业。`_w_h``_0_0``null`

要运行此渲染器，请按如下方式注册它，`faces-config.xml`其中`<renderer-class>`是自定义渲染器的 FQN：

```
<render-kit>
    <renderer>
        <component-family>org.primefaces.component</component-family>
        <renderer-type>org.primefaces.component.ImageCropperRenderer</renderer-type>
        <renderer-class>com.example.MyImageCropperRenderer</renderer-class>
    </renderer>
</render-kit> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-12T13:58:38.460

我使用了为 BalusC 发布的解决方案。但偶尔我会得到“_2_0”或类似的值。在这些情况下，错误会再次发生。然后我这样解决：

```
@Override
public Object getConvertedValue(FacesContext context, UIComponent component, Object submittedValue) throws ConverterException {
    if (submittedValue != null ){
        String[] submittedValueArray = ((String) submittedValue).split("_");
        if (!"0".equals(submittedValueArray[2]) && !"0".equals(submittedValueArray[3])) {
            return super.getConvertedValue(context, component, submittedValue);
        }           
    }
    return null;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-30T05:53:19.487

我在更改裁剪区域之前按下按钮时得到 java.lang.NumberFormatException: For input string: "NaN"。

```
<h:form id="editUserPhotoForm" > 
    <p:messages showDetail="true" autoUpdate="false" closable="true" />
        <h:panelGrid columns="2" rendered="#{not empty adminView.editUser}">
            <p:imageCropper value="#{adminView.croppedImage}"  image="#{adminView.userImagePath}" initialCoords="0,0,200,260" aspectRatio="0.77" minSize="200,260"/>
            <p:graphicImage value="#{adminView.imageUser}" width="200" cache="false" />
        </h:panelGrid>
        <p:commandButton value="crop" action="#{adminView.crop}" ignoreAutoUpdate="true" process="@form" update="@form" icon="ui-icon-scissors"/>
</h:form> 
```

我使用了@BalusC 发布的解决方案，但添加了条件：

```
if (submittedValue == null || ((String) submittedValue).endsWith("_0_0") || ((String)submittedValue).contains("NaN")) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-26T03:30:53.500

```
catch (RasterFormatException e) {
 FacesMessage message = new FacesMessage(FacesMessage.SEVERITY_ERROR, "This crop size is not supported", null);
 throw new ErrorImageSizeException(message); } 
```

使用构造函数创建扩展 ConverterException 的 ErrorImageSizeException

```
public ErrorImageSizeException(FacesMessage mensagem) {
    super(mensagem);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-09T20:41:10.787

按照@BalusC 发布的解决方案，我已经实现了自己的解决方案，并且在没有选择时保存了整个图片：

```
@Override
public Object getConvertedValue(FacesContext context, UIComponent component, Object submittedValue) throws ConverterException {

    if (submittedValue != null ){
        String[] submittedValueArray = ((String) submittedValue).split("_");
        if (!"0".equals(submittedValueArray[2]) && !"0".equals(submittedValueArray[3])) {
            return super.getConvertedValue(context, component, submittedValue);
        }           
    }

    try {
        return super.getConvertedValue(context, component, buildDefaultSubmittedValue(context, component));
    } catch (IOException e) {
        throw new ConverterException("Error cropping the whole image");
    }
}

private String buildDefaultSubmittedValue(FacesContext context, UIComponent component) throws IOException {
    ImageCropper cropper = (ImageCropper) component;

    //remove query string
    String imagePath = cropper.getImage();
    int queryStringIndex = imagePath.indexOf("?");
    if(queryStringIndex != -1 ) {
        imagePath = imagePath.substring(0, queryStringIndex);
    }

    BufferedImage outputImage = getSourceImage(context, imagePath);
    return "0_0_" + outputImage.getWidth() + "_" + outputImage.getHeight();
}

private BufferedImage getSourceImage(FacesContext context, String imagePath) throws IOException {
    BufferedImage outputImage = null;
    boolean isExternal = imagePath.startsWith("http");

    if(isExternal) {
        URL url = new URL(imagePath);

        outputImage =  ImageIO.read(url);
    }
    else {
        ExternalContext externalContext = context.getExternalContext();

        outputImage = ImageIO.read(new File(externalContext.getRealPath("") + imagePath));
    }

    return outputImage;
} 
```

# actionscript-3 - AS 3 知道字符串中是否只有某些字符

> ID：15463029
> 
> 赞同：1
> 
> 时间：2013-03-17T16:14:42.833
> 
> 标签：actionscript-3, flash

使用 AS3 是否有一种简单的方法可以理解字符串是否仅由 2 个字符组成？例如二进制数。如果我正在检查的字符串仅由 0 和 1 组成，我能理解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T16:30:14.363

像下面这样的东西应该可以解决问题：

```
private function isBinary(str:String):Boolean 
{
    var binary:Boolean = true;

    for (var i:int = 0; i < str.length; i++) 
    {
        if (str.charAt(i) != "0" && str.charAt(i) != "1")
        {
            binary = false;
            break;
        }
    }
    return binary;
} 
```

# c# - C# 随机（长）

> ID：15463033
> 
> 赞同：6
> 
> 时间：2013-03-17T16:14:52.323
> 
> 标签：c#, random, int, long-integer, seed

我正在尝试根据 C# 中的种子生成一个数字。唯一的问题是种子太大而不能成为 int32。有没有办法可以使用长种子？

是的，种子必须很长。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T16:55:12.473

[这是我从 Java Specification](http://docs.oracle.com/javase/6/docs/api/java/util/Random.html#next%28int%29)`Java.Util.Random`移植的 C# 版本。

最好的办法是编写一个 Java 程序来生成大量数字并检查此 C# 版本是否生成相同的数字。

```
public sealed class JavaRng
{
    public JavaRng(long seed)
    {
        _seed = (seed ^ LARGE_PRIME) & ((1L << 48) - 1);
    }

    public int NextInt(int n)
    {
        if (n <= 0)
            throw new ArgumentOutOfRangeException("n", n, "n must be positive");

        if ((n & -n) == n)  // i.e., n is a power of 2
            return (int)((n * (long)next(31)) >> 31);

        int bits, val;

        do
        {
            bits = next(31);
            val = bits % n;
        } while (bits - val + (n-1) < 0);
        return val;
    }

    private int next(int bits)
    {
        _seed = (_seed*LARGE_PRIME + SMALL_PRIME) & ((1L << 48) - 1);
        return (int) (((uint)_seed) >> (48 - bits));
    }

    private long _seed;

    private const long LARGE_PRIME = 0x5DEECE66DL;
    private const long SMALL_PRIME = 0xBL;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-04T15:45:10.280

我会去找@Dyppl在这里提供的答案：[远程随机数，是这样吗？](https://stackoverflow.com/questions/6651554/random-number-in-long-range-is-this-the-way)

将此函数放在需要生成随机数的代码可以访问的位置：

```
long LongRandom(long min, long max, Random rand) 
{
    byte[] buf = new byte[8];
    rand.NextBytes(buf);
    long longRand = BitConverter.ToInt64(buf, 0);
    return (Math.Abs(longRand % (max - min)) + min);
} 
```

然后像这样调用函数：

```
long r = LongRandom(100000000000000000, 100000000000000050, new Random()); 
```

# c - OpenMP 并行 for 循环显示几乎没有性能提升

> ID：15463046
> 
> 赞同：5
> 
> 时间：2013-03-17T16:15:46.190
> 
> 标签：c, ubuntu, concurrency, parallel-processing, openmp

我正在学习如何在 C 中使用 OpenMP，作为 HelloWorld 练习，我正在编写一个程序来计算素数。然后我将其并行化如下：

```
int numprimes = 0;
#pragma omp parallel for reduction (+:numprimes)
for (i = 1; i <= n; i++)
{
    if (is_prime(i) == true)
        numprimes ++;
} 
```

`gcc -g -Wall -fopenmp -o primes primes.c -lm`我使用（`-lm`对于`math.h`我正在使用的函数）编译此代码。然后我在一个上运行这段代码`Intel® Core™2 Duo CPU E8400 @ 3.00GHz × 2`，正如预期的那样，性能比串行程序要好。

但是，当我尝试在功能更强大的机器上运行它时，问题就来了。（我也尝试手动设置要使用的线程数`num_threads`，但这并没有改变任何东西。）计算所有素数`10 000 000`给我以下时间（使用`time`）：

8核机：

```
real    0m8.230s
user    0m50.425s
sys     0m0.004s 
```

双核机：

```
real    0m10.846s
user    0m17.233s
sys     0m0.004s 
```

这种模式继续计数更多的素数，具有更多内核的机器显示出轻微的性能提升，但没有我预期的那么多可用内核。（我希望多 4 倍的内核意味着几乎少 4 倍的运行时间？）

计数质数高达`50 000 000`：

8核机：

```
real    1m29.056s
user    8m11.695s
sys     0m0.017s 
```

双核机：

```
real    1m51.119s
user    2m50.519s
sys     0m0.060s 
```

如果有人能为我澄清这一点，将不胜感激。

**编辑**

这是我的主要检查功能。

```
static int is_prime(int n)
{
  /* handle special cases */
  if      (n == 0) return 0;
  else if (n == 1) return 0;
  else if (n == 2) return 1;

  int i;
  for(i=2;i<=(int)(sqrt((double) n));i++)
    if (n%i==0) return 0;

  return 1;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T16:30:16.733

这种表现之所以发生，是因为：

1.  `is_prime(i)`更高的需要更长的时间`i`，并且
2.  默认情况下，您的 OpenMP 实现对`parallel for`没有该`schedule`子句的构造使用静态调度，即将 for 循环切成大小相等的连续块。

换句话说，编号最高的线程正在执行所有最困难的操作。

使用该子句显式选择更合适的调度类型`schedule`可以让您在线程之间公平地分配工作。

这个版本会更好的分工：

```
int numprimes = 0;
#pragma omp parallel for schedule(dynamic, 1) reduction(+:numprimes) 
for (i = 1; i <= n; i++)
{
    if (is_prime(i) == true)
        numprimes ++;
} 
```

有关调度语法的信息可通过[MSDN](http://msdn.microsoft.com/en-us/library/x5aw0hdf(v=vs.80).aspx)和[Wikipedia](http://en.wikipedia.org/wiki/OpenMP#Scheduling_clauses)获得。

`schedule(dynamic, 1)`[正如高性能标记](https://stackoverflow.com/users/44309/high-performance-mark)在他的回答中指出的那样，可能不是最佳的。[此OpenMP 白皮书](http://software.intel.com/en-us/articles/granularity-and-parallel-performance)中对调度粒度进行了更深入的讨论。

还要感谢[Jens Gustedt](https://stackoverflow.com/users/366377/jens-gustedt)和[Mahmoud Fayez](https://stackoverflow.com/users/1223297/mahmoud-fayez)对这个答案的贡献。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T17:39:00.127

正如@naroom 所建议的那样，程序的扩展性明显不佳的原因是每次调用`is_prime`函数的运行时间的可变性。运行时间不会简单地随着 的值而增加`i`。您的代码显示，一旦`i`找到第一个因素，测试就会终止，因此最长的运行时间将是具有很少（和较大）因素的数字，包括素数本身。

正如您已经被告知的那样，并行化的默认计划将一次将主循环的迭代分配给可用线程。对于要测试的整数和要使用的 8 个内核的情况，第一个线程将获取要测试`5*10^7`的整数，第二个线程将获取，依此类推。这将导致线程之间的负载严重不平衡，因为当然，素数不是均匀分布的。`1..6250000``6250001..12500000`

与其使用默认调度，不如尝试动态调度。以下语句告诉运行时一次将主循环`m`迭代的迭代分配给计算中的线程：

```
#pragma omp parallel for schedule(dynamic,m) 
```

一旦一个线程完成了它的`m`迭代，它将被赋予`m`更多的工作。你的诀窍是找到`sweet spot`for `m`。太小，您的计算将被运行时在分配迭代时所做的工作所支配，太大，您的计算将恢复到您已经看到的不平衡负载。

不过请放心，通过完成所有这些工作，您将学到一些有关并行计算的成本和收益的有用课程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T17:27:03.107

我认为您的代码需要使用动态，因此每个线程都可以消耗不同数量的迭代，因为您的迭代具有不同的工作负载，因此当前代码是平衡的，这对您的情况无济于事，请尝试一下：

```
int numprimes = 0;
#pragma omp parallel for reduction (+:numprimes) schedule(dynamic,1)
for (i = 1; i <= n; i++){
    if (is_prime(i) == true)
    ++numprimes;
} 
```

# javascript - 有问题的 if 语句

> ID：15463048
> 
> 赞同：-2
> 
> 时间：2013-03-17T16:15:50.387
> 
> 标签：javascript, jquery, css

我有一个填充了 div“消息”元素的元素，如果有超过 20 个元素，我想将它们淡入 slice(20).animate 并在 animate 的已完成函数中执行其余代码，但以防万一'不超过 20 个元素我想立即执行剩余的代码，jquery 中的逻辑如何？

抱歉，我对 jquery 不太熟悉。

编辑：这是我的代码：

```
if ($(".info #future>center>div").length<20) {/*Skip straight to bunch of other code*/}
$(".info #future>center>div").slice(20).animate({opacity:0}, 500, function()
{
//Bunch of other code here 
```

现在，如果我只使用切片 20，而当中心元素中的 div 少于 20 个时，其他代码将永远不会被执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T16:58:01.130

您不能跳到其他地方定义的函数表达式。您必须将其设为独立函数（分配给两个地方都可用的变量），然后调用它或将其作为回调传递：

```
function done() {
    //Bunch of other code here
}
var divs = $(".info #future>center>div");
if (divs.length < 20)
    done();
else
    divs.slice(20).animate({opacity:0}, 500, done); 
```

# objective-c - 在 Objective-C 中调用另一个类的方法

> ID：15463049
> 
> 赞同：-3
> 
> 时间：2013-03-17T16:15:55.440
> 
> 标签：objective-c, macos, class, methods, call

我试图掌握Objective-C，过去曾用Java和C编程。

我有一个类 Unzip，其中包含以下方法：

`- (void)unzipFile:(NSString*)fileName`

我正在尝试从 AppDelegate 类调用此方法，以响应按钮单击，使用以下代码创建 Unzip 的实例并使用字符串值调用 unzipFile 方法，但没有任何反应。

```
- (IBAction)unzipIt:(id)sender {
    NSLog(@"Unzip clicked");
    NSString *zipString = [_testField stringValue];

    NSLog(@"Calling unzip with the string %@", zipString);
    Unzip *unzip;
    [unzip unzipFile:(zipString)]; 
} 
```

实际的按钮单击有效，因为出现了两个初始 NSLog，但没有进一步发生。该方法很好，因为我已经在其他地方进行了测试，所以至少应该发生**一些**事情。谁能告诉我哪里出错了？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T16:22:38.907

你没有分配`Unzip`：

```
Unzip *unzip = [[Unzip alloc] init];
[unzip unzipFile:zipString]; 
```

它不起作用但没有爆炸的原因是在 Objective C 中，向`nil`.

[关于 Objective C 的更多概念](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/WorkingwithObjects/WorkingwithObjects.html)，尤其是在**使用 Nil**部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T16:20:54.893

你必须初始化你的`unzip`变量

```
Unzip *unzip = [[Unzip alloc] init]; 
```

还有一个捷径：

```
Unzip *unzip = [Unzip new]; 
```

这是等效的速记。

# jquery - jQuery：无法在动态加载的内容上提交表单 - .click 不起作用

> ID：15463050
> 
> 赞同：-1
> 
> 时间：2013-03-17T16:16:01.383
> 
> 标签：jquery

我有一个评论页面，在每条评论下方都有一个使用 Jquery 发布子评论的表单：

```
 <div class="commentcontainer" id="commentload0-<?php echo $kid;?>-3">
-----------------comments go here------------------
</div>

    <div class="commentupdate2" id="commentbox0-28-3" style="display:none">
     <div class="stcommenttext3">
<form action="" method="post" name="0-28-3"><input name="wh" id="wh" value="1" type="hidden">
<textarea name="comment" id="ctextarea0-28-3" onkeyup="textar1(this)" class="tarea2 expta"></textarea>
<input value="Save" id="0-28-3" class="subcoment_a button" style="vertical-align:top" type="submit"></form>
     </div></div>

<div class="comment_ui2" id="view0-<?php echo $kid;?>-3">
<a href="#" class="subcomments" vid="0-<?php echo $kid;?>-3" id="0-<?php echo $kid;?>-3">Load more comments</a></div>

$(".subcoment_a").click(function(){
var element = $(this);
var ID = element.attr("id");
var comment = $("#ctextarea"+ID).val();
var dataString = 'comment='+ comment + '&msg_id=' + ID;
if(comment=='') {
alert("Incomplete form");
} else {
$.ajax({
type: "POST",
url: "/save-comment.php",
data: dataString,
cache: false,
success: function(html){
$("#commentload"+ID).append(html);
$("#ctextarea"+ID).val('');
$("#ctextarea"+ID).focus();
}
 });
}
return false;
}); 
```

到目前为止一切正常。

但随后我点击“加载更多评论”并动态加载下一条评论_forms（再次使用Jquery）。如果我在动态加载的表单中输入文本，我无法使用 Jquery 提交表单。该页面不会调用脚本，而是会自行刷新。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T16:17:02.120

用于：[_](http://api.jquery.com/on/)

```
$(document.body).on('click', ".subcoment_a", function(){ 
```

`".subcoment_a"`因此，即使在您进行绑定时不存在click 事件，也会将其委托给元素。

# wordpress - 为自定义 php 文件创建 URL

> ID：15463055
> 
> 赞同：0
> 
> 时间：2013-03-17T16:16:35.287
> 
> 标签：wordpress

我在尝试弄清楚如何在管理区域为我的插件创建自定义 URL 时遇到了一些麻烦。我已经知道如何使用 add_menu 功能，但我需要为插件创建一个不会在菜单中列出的子页面。我不知道如何为这个页面定义一个 URL。

基本上，如果他们查看“admin.php?page=my_page”然后使用我制作的函数，我只需要这样做，它只是在页面的 .php 文件中包含一个内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T16:26:39.717

你可以只使用 ?page=my_page

如果您想向网址添加更多内容，请使用

?page=my_page&page-id

您将能够在管理区域中访问此目录，无需为整个 url 使用额外的 bloginfo 之类的东西

希望对你有帮助

# python - 要附加到的 Null numpy 数组

> ID：15463057
> 
> 赞同：4
> 
> 时间：2013-03-17T16:16:40.217
> 
> 标签：python, numpy

我正在编写功能选择代码。基本上从 featureselection 函数获取输出并将其连接到 numpy 数组数据

```
data=np.zeros([1,4114]) # put feature length here
for i in range(1,N):
    filename=splitpath+str(i)+'.tiff'
    feature=featureselection(filename)
    data=np.vstack((data, feature))

data=data[1:,:] # remove the first zeros row 
```

但是，这不是一个健壮的实现，因为我需要事先知道特征长度（4114）。

是否有任何空 numpy 数组矩阵，例如在 Python 列表中我们有 []？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T18:44:16.330

在循环中附加到 numpy 数组效率低下，在某些情况下可能无法避免，但这似乎不是其中之一。如果您知道最终将得到的数组的大小，最好只按数组分配，如下所示：

```
data = np.zeros([N, 4114])
for i in range(1, N):
    filename = splitpath+str(i)+'.tiff'
    feature = featureselection(filename)
    data[i] = feature 
```

有时您不知道最终数组的大小。有几种方法可以处理这种情况，但最简单的可能是使用临时列表，例如：

```
data = []
for i in range(1,N):
    filename = splitpath+str(i)+'.tiff'
    feature = featureselection(filename)
    data.append(feature)

data = np.array(data) 
```

为了完整起见，您也可以这样做`data = np.zeros([0, 4114])`，但我建议不要这样做，并建议上述方法之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T17:16:18.430

如果您不想在创建第一个数组之前假设大小，可以使用延迟初始化。

```
data = None
for i in range(1,N):
    filename=splitpath+str(i)+'.tiff'
    feature=featureselection(filename)
    if data is None:
        data = np.zeros(( 0, feature.size ))
    data = np.vstack((data, feature))

if data is None:
    print 'no features'
else:
    print data.shape 
```

# codeigniter - CodeIgniter CRON 作业

> ID：15463058
> 
> 赞同：4
> 
> 时间：2013-03-17T16:16:41.733
> 
> 标签：codeigniter, cron

我正在尝试设置**CRON作业以在****CodeIgniter**安装上进行一些数据库更改，并且主机出现问题使其停止工作。主机的 CRON 设置只允许您执行 PHP 文件而不是调用 URL。

我试过的：

`Curl, wget, file_get_contents, fopen, http_get`来自静态 PHP 文件 - 主机不允许

`/path/to/php /path/to/index.php`控制器方法 - 使用命令行界面

在与主人无果而终的谈话之后，我没有想法了。有谁知道我如何在没有上述内容的情况下从静态 PHP 文件调用控制器方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:13:09.727

首先，我假设您使用的是 CI 版本 2>（以前不提供 CLI 支持）。

其次，假设您尝试在 cron 下触发的页面是[http://www.mysite.com/index.php/cronjobs/thejob](http://www.mysite.com/index.php/cronjobs/thejob)

正确的命令是：

```
/usr/bin/php /var/www/rootCIfolder/index.php cronjobs thejob 
```

替换`/usr/bin/php`为 php 可执行文件`/var/www/rootCIfolder`的位置和 CI 文件夹的位置。

您需要使用命令行支持编译 php。您可以通过以下方式验证这一点：

```
# php -v
PHP 5.3.3 (cli) (built: Jul  3 2012 16:53:21) 
```

# javascript - jquery 比较数组 $.getJSON

> ID：15463062
> 
> 赞同：0
> 
> 时间：2013-03-17T16:16:56.313
> 
> 标签：javascript, jquery

我正在尝试比较 2 个数组。一个取自 DOM，由**.split(" ")**生成，另一个我想通过**$.get**调用来检索。

**如果我手动测试字典**数组，一切正常。例子：

```
 // var dictionary = ["in", "the"]; // <- this one works
  var dictionary = $.getJSON('job/dictionary/en');
  $(this).keyup(function() {
      var words = $(this)
                    .text()
                    .split(" "),
          words_final = [],
          i = 0;
        jQuery.grep(words, function(word) {
            if (jQuery.inArray(word, dictionary) == -1) words_final.push(word);
            i++;
        });
    }); 
```

此 URL 的响应是*Content-Type: application/json*和响应正文：

```
[
   "in",
   "the"
] 
```

显然......然后我尝试在 chrome 开发工具中运行**$.getJSON('job/dictionary/en')**，我得到一个带有 responseText: *"["in","the"]"的对象*

我也尝试过**$.get()**，结果相同。

任何帮助都非常感谢。

# c++ - 部分纯旧数据

> ID：15463065
> 
> 赞同：1
> 
> 时间：2013-03-17T16:17:13.730
> 
> 标签：c++

很多问题都是关于 POD 的；但是所有问题都涉及完整的对象副本。我可以在类的普通旧数据部分应用相同的概念吗？例子：

```
struct Parent1
{
    int x;
    float y;
};

struct Parent2
{
    int k;
    float l;
};

struct NotPod : public Parent1, public Parent2
{
    char z;
    short w;
};

NotPod a, b;

void func()
{
    a.z = '4';
    a.w = 345;
    memcpy((char*)&b.z, (char*)&a.z, (char*)(&a.w)-(&a.z) + sizeof(a.w));
} 
```

我在问旧的 c++（不是 C++11）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T09:45:35.627

正如我从您的示例代码中了解到的那样，您的问题与 POD 无关。您需要的是保证您的最派生类的成员是聚合并且它们具有连续的内存布局。

见 9.2.12 (ISO 14882:2003)

> 分配没有中间访问说明符的（非联合）类的非静态数据成员，以便后面的成员在类对象中具有更高的地址。由访问说明符分隔的非静态数据成员的分配顺序未指定 (11.1)。

简单地说，不要在你的聚合序列之间放置`public`//访问说明符`protected`，`private`你会得到这样的保证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T23:37:58.457

因此，您只想复制结构中 Parent 部分的成员。如果是，为什么不在 func3() 中实现呢？

```
void func2()
{
    a.z = '7';
    a.w = 444;
    a.x = 4;
    a.y = 2.1;
    memcpy(&b, &a, sizeof(NotPod)); // copies all the members
}

void func3()
{  
    a.z = '7';
    a.w = 444;
    a.x = 4;
    a.y = 2.1;
    memcpy(&b, &a, sizeof(Parent)); // copies only the members of the Parent
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T08:42:37.833

正如您自己所说，它不是 C++03 中的 POD。其中一部分是（Parent1 和 Parent2），但您希望将其余部分视为 POD。好吧，把剩下的变成 POD。通过定义本地结构

```
struct NotPod : public Parent1, public Parent2
{
    struct InternalPod
    {
       char z;
       short w;
    };
    InternalPod i; 
}; 
```

或通过从第三个结构继承：

```
struct InternalPod
{
   char z;
   short w;
};

struct NotPod : public Parent1, public Parent2, public InternalPod
{
}; 
```

# django - Gunicorn 工作者超时

> ID：15463067
> 
> 赞同：12
> 
> 时间：2013-03-17T16:17:27.887
> 
> 标签：django, nginx, timeout, gunicorn

我有一个 Django 应用程序在 Nginx 后面的 Gunicorn 中运行。一切正常，除了一件奇怪的事情：我有一个“下载”视图和一个 RESTful json API。调用下载视图时，我使用 urllib2 访问 json API 以获取信息。并且当我尝试对 json api 执行此 http get 请求时，请求超时并出现错误 HTTP 错误 504：网关超时。

当我使用 ./manage.py runserver 运行代码时，一切正常。对 json api 的 http get 请求也只需要几毫秒，因此没有遇到超时的危险。

这里是伪代码的情况：

**myproject/views.py：（**可访问： http: [//myproject.com/download](http://myproject.com/download)）

```
1   def download(request, *args, **kwargs):
2       import urllib2
3       opener = urllib2.build_opener()
4       opener.open('http://myproject.com/api/get_project_stats') 
```

`opener.open()`在 Gunicorn 中运行时，第 4 行中的调用会超时，而使用`./manage.py runserver`everytihng 运行时工作正常（并且 api 调用只需要几毫秒。

有没有人有同样的问题？更重要的是：你是如何解决的？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-06-08T16:02:27.583

我在使用 Gunicorn、nGinx、Django 和[Requests时遇到了同样的问题](http://docs.python-requests.org/en/latest/)

每次我这样做：

```
response = requests.get('http://my.url.com/here') 
```

工人会超时

我通过从同步（同步）工作人员切换到异步（事件小）工作人员解决了这个问题。

如果您正在启动命令行添加：

```
-k 'eventlet' 
```

如果您使用的是配置文件，请添加：

```
worker_class = "eventlet" 
```

# apache - apache日志文件的条件格式

> ID：15463074
> 
> 赞同：1
> 
> 时间：2013-03-17T16:18:27.933
> 
> 标签：apache, logging, formatting

是否可以在 apache 中以日志条目的实际格式调用条件格式？

例如，我当前的访问日志格式如下所示：

```
0.0.0.0 - - %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\" %T %V %A 
```

我最后有“％A”的原因是查看他们是否通过 ipv6 或 ipv4 地址访问该站点（不记录用户 ip）。我的问题是，是否可以这样做，而不是编写所使用接口的实际 ip，而只是编写“v4”或“v6”？

我知道这可以作为后期处理完成，但我想知道是否可以“即时”这么说。

当前使用 Apache/2.2.16

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T16:31:51.203

> 我的问题是，是否可以这样做，而不是编写所使用接口的实际 ip，而只是编写“v4”或“v6”？

好吧，那里没有复杂的“if-else”构造。

但是您可以尝试预先设置一个环境变量 - 然后通过`%{VARNAME}e`.

```
SetEnvIf Server_Addr 127\.0\.0\.1 IP_VERSION=v4
SetEnvIf Server_Addr /*whatevertheipv6addresslookslikeasregexp*/ IP_VERSION=v6 
```

并在您的日志格式规范`%{IP_VERSION}e`中记录该变量的内容。

（未经测试，只是从文档中推断出来的。不保证。）

# intellij-idea - IntelliJ IDEA 12：如何运行 pip install 在虚拟环境中安装库？

> ID：15463080
> 
> 赞同：14
> 
> 时间：2013-03-17T16:18:55.003
> 
> 标签：intellij-idea, flask, pycharm

我正在使用`IntelliJ IDEA 12 Ultimate Edition`和创建烧瓶项目。

我使用 IDEA 创建了 virtualenv 并使用它，但我的代码依赖于我前进的其他库。例如 Flask-Restless。

我在 IntelliJ IDEA 中的代码看起来像

![在此处输入图像描述](../Images/2eb625eec1278da8dd9d4a0b196b53b2.png)

有没有办法使用 IntelliJ IDEA 12 安装 Flak-Restless？

或者

我需要在命令行上激活我的 virtualenv 并自己安装吗？

IDEA可以提供给我吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-11-19T06:22:53.553

在 IntelliJ IDEA 中使用**工具**| **管理 Python 包**对话框为项目中使用的 Python SDK 或 virtualenv 安装/卸载包。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-18T09:09:35.307

`pip` `requirements.txt`在您的存储库根目录中使用。我会`PyCharm`自动提示我安装缺少的要求，或者如果安装的版本不等于`requirements.txt`.

您可以从以下位置安装软件包`requirements.txt`：

```
your_python_root_pip install -r requirements.txt 
```

您可以获得已安装的带有版本的软件包：

```
your_python_root_pip freeze -r requirements.txt 
```

有关详细信息，请参阅 pip 帮助。参见`requirements.txt`示例：

```
flask==0.9
flask-testing==0.4
blinker==1.2
uwsgi==1.4.5
nose
coverage
pep8 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-25T12:54:28.390

`PyCharm 2017.1`您可以通过**Tools** / **Python Integrated Tools** / **Package requirements file**安装所有项目包。获取`requirements.txt`文件的完整路径，PyCharm 将要求您安装所有依赖项。

# ios - 从 MKMapView 找出您所在的区域类型

> ID：15463095
> 
> 赞同：5
> 
> 时间：2013-03-17T16:20:28.900
> 
> 标签：ios, mkmapview, mapkit

有什么方法可以从 MKMapView 确定您所在的区域类型？即，如果地图的中心在海洋中，我们可以告诉用户：地图的中心在海洋之上，或者如果地图的中心在绿色区域之上：地图的中心在公园之上......

我能想到的唯一方法是创建可见屏幕的屏幕截图并使用以下方法分析每个位的颜色：[iOS - 检测像素的颜色？](https://stackoverflow.com/questions/4616778/ios-detect-the-color-of-a-pixel)

但是，我很想知道是否有任何人都可以想到的更简单的方法！

编辑

为了更清楚我在寻找什么，我基本上是在寻找一种将地图的一部分变成游戏的自上而下级别的方法，不同的区域由地图的区域决定......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T16:29:21.170

A`CLPlacemark`有几个属性：当地标在水中时`inlandWater`，它会告诉您。`ocean`我认为您可以从地理编码器中获得地标。

它还可以`areasOfInterest`为您提供公园和地标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T16:23:24.323

没有万无一失的方法，但`CLGeocoder`可以将坐标地理编码为地址，这会给你如下内容：

0/0 = ....，海洋 51/10 = ...，德国 -90/10 = ....，美国

等等

# c# - 在 C# 中制作简单的控制台菜单

> ID：15463099
> 
> 赞同：3
> 
> 时间：2013-03-17T16:20:46.457
> 
> 标签：c#

我想在 C# 中制作一个简单的菜单，例如：应该从控制台打印出这样的内容：

```
FirstOption 
SecondOption
Exit 
```

到目前为止，这是我的代码（命名和封装存在问题，但这只是快速原型，花了大约 30 分钟）：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace ConsoleApplication2
{
    class Program
    {
        static void Main(string[] args)
        {
            Menu StartGame = new Menu("Start Game");
            Menu EndGame = new Menu("End Game");
            Console.WriteLine(StartGame);
            Console.WriteLine(End Game);
            EndGame.isChecked = false;
        }
    }

    class Menu
    {
        private string Content;
        public bool isChecked = true;

        public Menu(string Content)
        {
            this.Content = Content;
        }
        public void CheckCondition()
        {
            if (isChecked)
            {
                Console.BackgroundColor = ConsoleColor.White;
                Console.ForegroundColor = ConsoleColor.Black;
            }
            else
            {
                Console.ResetColor();
            }
        }
        public override string ToString()
        {
            this.CheckCondition();
            return this.Content;
        }
    }
} 
```

这个想法是当一个按钮被点击时，菜单项被突出显示。当一个人来到最后一个菜单项时，他不能再按`DownArrow`一次，第一个项目和`UpArrow`.

我完全坚持这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T16:55:59.713

我不完全确定..可能这可以帮助您入门。

```
while (true)
        {
            var ch = Console.ReadKey(false).Key;
            switch (ch)
            {
                case ConsoleKey.UpArrow:
                    HighlightStartGame();
                    break;

                case ConsoleKey.DownArrow:
                    HighlightEndGame();
                    break;
            }
        }
static void HighlightStartGame()
    {
        Console.Clear();
        Console.ResetColor();
        StartGame.isChecked = true;
        Console.WriteLine(StartGame);
        EndGame.isChecked = false;
        Console.WriteLine(EndGame);

    }

    static void HighlightEndGame()
    {
        Console.Clear();
        Console.ResetColor();
        StartGame.isChecked = false;
        Console.WriteLine(StartGame);
        EndGame.isChecked = true;
        Console.WriteLine(EndGame);

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T17:02:55.277

问题是控制台无法处理任何鼠标事件。你想如何点击菜单？你必须用钥匙做所有事情。您拥有的选项是定义击键（如“FirstEntry”的 Ctrl-F 或 Alt-F）以激活菜单条目，或使用箭头键实现导航，允许您在字段（按钮或菜单字段）中移动和文本字段）。这不是内置的，因此您必须在代码中完成所有操作。您必须使用控制台的`SetCursorPosition`和`ReadKey`方法来实现这一点。我记得很久以前在 VT100 终端上做过这个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T16:42:31.017

不，你不能这样做，因为 Win32 控制台不支持这些方法。但是，您可以使用 GDI 在控制台窗口上绘图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-28T11:58:46.150

我[为 C# 编写了一个控制台菜单库](https://github.com/nerai/CMenu)。它没有鼠标支持，但它可能仍然是您的起点？

> CMenu 是一个轻量级、低俗的框架，用于在 .Net 中构建控制台菜单。您无需手动提示用户输入并解析它，而是以简短、结构化和全面的方式定义命令，并让 CMenu 处理其余部分。
> 
> CMenu 旨在降低开销 - 简单的东西应该易于实现。如果您不使用某个功能，则无需了解有关它的任何信息。
> 
> 同时支持复杂场景。大菜单可以很容易地分成几个类。后台自配置。您不必担心较大菜单中涉及的所有烦人的细节，它会起作用。
> 
> 最重要的是，它使用起来非常简单快捷。命令可以缩写，智能解析器甚至可以实现部分匹配。集成了帮助命令。

# c++ - C++11 - pimpl-idiom 和 unique_ptr 的可能困境？

> ID：15463107
> 
> 赞同：1
> 
> 时间：2013-03-17T16:21:29.257
> 
> 标签：c++, visual-studio, c++11, linker, unique-ptr

当我试图利用 pimpl-idiom 和智能指针来实现我自己的围绕特定于平台的 GUI 组件的包装器时，我遇到了一个我无法解决的问题。问题可能出在 pimpl-idiom 和 *unique_ptr* 上，因为我不知道还有什么问题。所有错误似乎都是链接错误。使用代码时出现各种未定义的参考错误（下面的链接）： [http ://www.cplusplus.com/forum/general/96020/](http://www.cplusplus.com/forum/general/96020/)

以下是错误列表：

```
> obj\debug_windows\helixirrwidgets\src\helixirrwidgets\Window-windows.o||In
> function `Window':|
> E:\new2\projects\programming\test2\test2\..\..\helixirrwidgets\src\helixirrwidgets\Window.hpp|15|undefined
> reference to
> `HelixirrWidgets::PointerSmartSafe<HelixirrWidgets::Window::Helper,
> std::default_delete<HelixirrWidgets::Window::Helper>
> >::PointerSmartSafe(HelixirrWidgets::Window::Helper*)'| E:\new2\projects\programming\test2\test2\..\..\helixirrwidgets\src\helixirrwidgets\Window.hpp|15|undefined
> reference to
> `HelixirrWidgets::PointerSmartSafe<HelixirrWidgets::Window::Helper,
> std::default_delete<HelixirrWidgets::Window::Helper>
> >::PointerSmartSafe(HelixirrWidgets::PointerSmartSafe<HelixirrWidgets::Window::Helper,
> std::default_delete<HelixirrWidgets::Window::Helper> > const&)'|
> obj\debug_windows\helixirrwidgets\src\helixirrwidgets\Window-windows.o||In
> function `Window':|
> E:\new2\projects\programming\helixirrwidgets\src\helixirrwidgets\Window-windows.cpp|88|undefined
> reference to
> `HelixirrWidgets::PointerSmartSafe<HelixirrWidgets::Window::Helper,
> std::default_delete<HelixirrWidgets::Window::Helper>
> >::PointerSmartSafe(HelixirrWidgets::Window::Helper*)'| E:\new2\projects\programming\helixirrwidgets\src\helixirrwidgets\Window-windows.cpp|91|undefined
> reference to
> `HelixirrWidgets::PointerSmartSafe<HelixirrWidgets::Window::Helper,
> std::default_delete<HelixirrWidgets::Window::Helper>
> >::PointerSmartSafe(HelixirrWidgets::Window::Helper*)'| obj\debug_windows\helixirrwidgets\src\helixirrwidgets\Window-windows.o||In
> function `ZN15HelixirrWidgets6Window12save_changesEv':|
> E:\new2\projects\programming\helixirrwidgets\src\helixirrwidgets\Window-windows.cpp|98|undefined
> reference to
> `HelixirrWidgets::PointerSmartSafe<HelixirrWidgets::Window::Helper,
> std::default_delete<HelixirrWidgets::Window::Helper> >::operator->()
> const'|
> E:\new2\projects\programming\helixirrwidgets\src\helixirrwidgets\Window-windows.cpp|100|undefined
> reference to
> `HelixirrWidgets::PointerSmartSafe<HelixirrWidgets::Window::Helper,
> std::default_delete<HelixirrWidgets::Window::Helper> >::operator->()
> const'|
> E:\new2\projects\programming\helixirrwidgets\src\helixirrwidgets\Window-windows.cpp|101|undefined
> reference to
> `HelixirrWidgets::PointerSmartSafe<HelixirrWidgets::Window::Helper,
> std::default_delete<HelixirrWidgets::Window::Helper> >::operator->()
> const'|
> E:\new2\projects\programming\helixirrwidgets\src\helixirrwidgets\Window-windows.cpp|106|undefined
> reference to
> `HelixirrWidgets::PointerSmartSafe<HelixirrWidgets::Window::Helper,
> std::default_delete<HelixirrWidgets::Window::Helper> >::operator->()
> const'|
> E:\new2\projects\programming\helixirrwidgets\src\helixirrwidgets\Window-windows.cpp|107|undefined
> reference to
> `HelixirrWidgets::PointerSmartSafe<HelixirrWidgets::Window::Helper,
> std::default_delete<HelixirrWidgets::Window::Helper> >::operator->()
> const'|
> E:\new2\projects\programming\helixirrwidgets\src\helixirrwidgets\Window-windows.cpp|109|undefined
> reference to `GetStockObject@4'|
> E:\new2\projects\programming\helixirrwidgets\src\helixirrwidgets\Window-windows.cpp|111|undefined
> reference to
> `HelixirrWidgets::PointerSmartSafe<HelixirrWidgets::Window::Helper,
> std::default_delete<HelixirrWidgets::Window::Helper> >::operator->()
> const'|
> E:\new2\projects\programming\helixirrwidgets\src\helixirrwidgets\Window-windows.cpp|112|undefined
> reference to
> `HelixirrWidgets::PointerSmartSafe<HelixirrWidgets::Window::Helper,
> std::default_delete<HelixirrWidgets::Window::Helper> >::operator->()
> const'|
> E:\new2\projects\programming\helixirrwidgets\src\helixirrwidgets\Window-windows.cpp|114|undefined
> reference to
> `HelixirrWidgets::PointerSmartSafe<HelixirrWidgets::Window::Helper,
> std::default_delete<HelixirrWidgets::Window::Helper> >::operator->()
> const'|
> E:\new2\projects\programming\helixirrwidgets\src\helixirrwidgets\Window-windows.cpp|118|undefined
> reference to
> `HelixirrWidgets::PointerSmartSafe<HelixirrWidgets::Window::Helper,
> std::default_delete<HelixirrWidgets::Window::Helper> >::operator->()
> const'|
> E:\new2\projects\programming\helixirrwidgets\src\helixirrwidgets\Window-windows.cpp|119|undefined
> reference to
> `HelixirrWidgets::PointerSmartSafe<HelixirrWidgets::Window::Helper,
> std::default_delete<HelixirrWidgets::Window::Helper> >::operator->()
> const'|
> obj\debug_windows\helixirrwidgets\src\helixirrwidgets\Window-windows.o:E:\new2\projects\programming\helixirrwidgets\src\helixirrwidgets\Window-windows.cpp|120|more
> undefined references to
> `HelixirrWidgets::PointerSmartSafe<HelixirrWidgets::Window::Helper,
> std::default_delete<HelixirrWidgets::Window::Helper> >::operator->()
> const' follow| ||=== Build finished: 16 errors, 0 warnings ===| 
```

我该如何克服这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T16:28:40.230

该问题与 PIMPL 习语无关，也与您使用`std::unique_ptr<>`.

相反，您的代码似乎没有文件，`#include`该文件包含类模板`PointerSmartSafe.inl`的所有成员函数的定义。`PointerSmartSafe<>`

因此，当遇到对它们的调用时，编译器将无法隐式实例化这些函数，并且这些函数不会在`PointerSmartSafe.inl`任何一个中实例化（仅定义）。

因此，链接器会抱怨找不到这些符号。如果您需要更多详细信息，您可能会发现[StackOverflow 上的这个问答](https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file)非常有用。

* * *

要解决此问题，请添加：

```
#include "PointerSmartSafe.hpp" 
```

开头的指令`PointerSmartSafe.inl`，并让当前文件头`#include`的所有翻译单元代替。`PointerSmartSafe.hpp``#include``PointerSmartSafe.inl`

或者，如果你想让这更简单，只需移动`PointerSmartSafe.inl`末尾的内容`PointerSmartSafe.hpp`，此时你甚至可以删除`PointerSmartSafe.inl`文件。

# image - 立体图像校正和视差：哪些算法？

> ID：15463112
> 
> 赞同：0
> 
> 时间：2013-03-17T16:22:18.217
> 
> 标签：image, algorithm, stereo-3d, disparity-mapping

我试图弄清楚目前允许使用的两种最有效的算法是什么，从使用传统相机创建的一对 L/R 立体图像（因此受到一些核线未对准的影响）开始，生成一对调整后的图像通过查看它们的差异来加上它们的深度信息。

实际上我发现了很多关于这两种方法的论文，比如：

*   “计算立体视觉的校正同形异义词”（张 - 似乎是最好的校正之一）
*   “三步图像校正”（蒙纳斯）
*   “矫正与差异”（Navab 的幻灯片）
*   “基于区域的快速立体匹配算法”（Di Stefano - 似乎有点不准确）
*   “Computing Visual Correspondence with Occlusions via Graph Cuts”（Kolmogorov - 这个产生了一个非常好的视差图，还有遮挡信息，但它有效吗？）
*   “关于图像不连续性的密集视差图估计”（Alvarez - 第一次审查太长了）

任何人都可以给我一些建议以适应这个广泛的主题吗？

我应该首先处理什么样的算法/方法，考虑到我将处理一个非常简单的输入：一对左右图像，没有其他信息，没有更多信息（有些论文是基于额外的、预先采取的、校准的信息）？

说到工作实现，到目前为止我看到的唯一有趣的结果属于这个软件，但仅用于自动校正，而不是差异：[http ://stereo.jpn.org/eng/stphmkr/index.html](http://stereo.jpn.org/eng/stphmkr/index.html)

我尝试了“自动调整”功能，似乎真的很有效。可惜没有源代码...

# jquery - jQuery响应设置div的宽度

> ID：15463114
> 
> 赞同：0
> 
> 时间：2013-03-17T16:22:20.490
> 
> 标签：jquery, css-float, responsive-design, viewport

我为代码创建了一个 jsFiddle：http: [//jsfiddle.net/kinthof/QpjnV/3/](http://jsfiddle.net/kinthof/QpjnV/3/)

代码如下：

HTML：

```
<div class="image-container">
    <img src="http://skafte.dk/img/oel/carlsberg-pilsner-33cl-51x192.jpg" class="" title="Carlsberg Pilsner 33cl" alt="Carlsberg Pilsner 33cl" />
    <img src="http://skafte.dk/img/sodavand/faxe-kondi-25cl-54x192.jpg" class="" title="Faxe Kondi 25cl" alt="Faxe Kondi 25cl" />
    <img src="http://skafte.dk/img/sodavand/coca-cola-25cl-50x192.jpg" class="" title="Coca Cola 25cl" alt="Coca Cola 25cl" />
    <img src="http://skafte.dk/img/sodavand/frem-aeblemost-25cl-56x191.jpg" class="" title="Frem Æblemost 25cl" alt="Frem Æblemost 25cl" />
    <img src="http://skafte.dk/img/diverse/cocio-40cl-58x192.jpg" class="" title="Cocio 40cl" alt="Cocio 40cl" />
    <img src="http://skafte.dk/img/kildevand/aquador-50cl-54x191.jpg" class="" title="Aquador Kildevand 50cl" alt="Aquador Kildevand 50cl" />
</div> 
```

CSS：

```
.image-container {
    margin: 0 auto;
    clear: both;
}
.image-container img {
    display: block;
    margin: 0 auto;
    float: left;
} 
```

jQuery：

```
/* Finding the images width and setting the container to the sum of the widths. */
$('.image-container').each(function () {
    var width = 0;
    $(this).find('img').each(function () {
        width += $(this).width();
    })
    $(this).width(width + 'px');
});

/* Setting width to 100% if the width is larger than the viewport */
$('.image-container').each(function () {
    var vpWidth = document.documentElement.clientWidth;
    var imageContainerWidth = $(this).width();
    var numberOfElements = 0;

    if (imageContainerWidth > vpWidth) {
        $(".image-container").width('100%');
    }
}); 
```

我想将浮动图像居中。这是在第一部分完成的，我找到图像宽度并将容器设置为宽度的总和，然后我以 CSS 为中心。

接下来的目的是，如果视口小于 .image-container 的宽度，则 .image-containers 宽度设置为 100%。

但这仅在页面重新加载/更新时发生。

我的问题是：如何“实时”完成，所以当我最小化窗口时宽度会发生变化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T16:29:10.527

如果您已经知道图像的尺寸（我在文件名中看到它们），那么只需相应地预先设置容器宽度并使用 CSS 居中会更有效。假设由于某种原因这是不可能的，请确保等到图像加载后（不仅仅是文档准备好），测量它们的宽度。

鉴于上述情况，您可以处理窗口的`resize`事件：

```
function centerImages() {
    // center the images
}

//once the images have finished loading:
$(window).resize(centerImages);
centerImages(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T11:40:30.567

解决方案

```
$('.image-container').each(function(){
    var containerWidth=0;
    $(this).find('img').each(function(){containerWidth+=$(this).width();})
    $(this).width(containerWidth+'px');

    $(this).find('img').each(function () { 
        $(this).attr('style','');      
        $(this).width(Math.floor(($(this).width() / containerWidth) * 100) + '%');       
    });
});
$(window).resize(function(){
    $('.image-container').each(function () {
        var containerWidth = $('.image-container').width();
        var resizeWidth = containerWidth;
        var resizeWhen = '350';
        var documentWidth = $(window).width();

        if (resizeWhen > documentWidth){
            $(this).width(100+'%');
        } else {
            $(this).width(resizeWidth);
        }
    });
}); 
```

# android - 使用 FragmentPagerAdapter 时不调用 Fragment onResume()

> ID：15463116
> 
> 赞同：5
> 
> 时间：2013-03-17T16:22:29.333
> 
> 标签：android, android-viewpager, fragment, onresume

我需要我的片段在它们是活动片段时始终调用某个函数，所以我把它放在 onResume() 中，但它没有被调用。

片段 A

```
@Override
public  void onResume(){
    super.onResume();
    Log.d("clear state", " "+clear);
    if(clear == true)
    {
        restart();
        clear = false;
        calculate();
    }
} 
```

我使用带有 ViewPager 的 FragmentPagerAdapter 来切换片段

```
public class ScoutingFragSingle extends FragmentPagerAdapter{

@Override
public Fragment getItem(int index) {
    Bundle data = new Bundle();
    switch(index){
    case 0:
        TeamsFragment teamsFragment = new TeamsFragment();
        data.putInt("current_page", index+1);
        teamsFragment.setArguments(data);
        return teamsFragment;
    case 1:

        data.putInt("current_page", index+1);
        data.putInt("matchId", matchNum);
        aFragment.setArguments(data);
        return aFragment; 
```

那么如何让片段调用它们的 onResume() 呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-29T16:34:30.403

我前段时间也有同样的问题。

创建一个新接口并由您的两个`Fragment`s 实现它：

```
public interface OnPageSelectedListener {
    void onPageSelected();
} 
```

在父活动中实现`android.support.v4.view.ViewPager.OnPageChangeListener`和调用`Fragment`这样的方法：

```
@Override
public void onPageSelected(int i) {
    OnPageSelectedListener fragment = (OnPageSelectedListener ((PlaceListPagerAdapter)pager.getAdapter()).getFragment(i);
    fragment.onPageSelected();
} 
```

PS：新接口的名称和方法有点混乱，请注意或更改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-03-02T14:37:16.440

覆盖[Fragment.setUserVisibleHint](http://developer.android.com/reference/android/support/v4/app/Fragment.html#setUserVisibleHint%28boolean%29)。`setUserVisibleHint`什么时候`true`调用你使用的相同逻辑`onResume`。

You can see when `FragmentPagerAdapter` calls `setUserVisibleHint` in [instantiateItem](http://grepcode.com/file/repo1.maven.org/maven2/com.google.android/support-v4/r7/android/support/v4/app/FragmentPagerAdapter.java#102) and [setPrimaryItem](http://grepcode.com/file/repo1.maven.org/maven2/com.google.android/support-v4/r7/android/support/v4/app/FragmentPagerAdapter.java#128). Applicable to *android* since 4.2.1 and *support-v4*.

# core-data - Core Data 为列返回 null

> ID：15463118
> 
> 赞同：0
> 
> 时间：2013-03-17T16:22:36.900
> 
> 标签：core-data

Core Data 为列名返回 null。

这是我在视图控制器中的代码

```
for (TaskyEntity *task in [mycoredata searchAllData]) {
    NSLog(@"title: %@",task.title);
    NSLog(@"i:%i ",i);
    i++;
} 
```

它的输出：

```
2013-03-17 19:31:08.462 tasky[2623:c07] title: (null)
2013-03-17 19:31:08.463 tasky[2623:c07] i:1
2013-03-17 19:31:08.464 tasky[2623:c07] title: (null)
2013-03-17 19:31:08.464 tasky[2623:c07] i:2
2013-03-17 19:31:08.465 tasky[2623:c07] title: (null)
2013-03-17 19:31:08.466 tasky[2623:c07] i:3 
```

任务实体类：

```
-(NSArray *)searchAllData {
    NSFetchRequest *request = [[NSFetchRequest alloc]init];
    [request setEntity:entitydescription];
    NSError * error=nil;
    NSArray *matchData = [context executeFetchRequest:request error:&error];

    return matchData;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T21:29:43.063

由于循环运行了 3 次，因此 fetch 必须返回三个对象。根据您的代码，该`title`属性**为**空，这就是您得到该结果的原因。目前尚不清楚您在哪里（或是否）尝试设置此属性，但您的结果表明它未设置。

# java - Smack 聊天创建两个线程

> ID：15463121
> 
> 赞同：2
> 
> 时间：2013-03-17T16:22:40.570
> 
> 标签：java, smack

我无法在 Java 的 Smack 消息传递库中建立正确的聊天。如果聊天是在本地开始的，它工作得很好，但是如果聊天是从另一个客户端开始的，那么会创建两个不同的聊天线程，而不仅仅是需要的一个。我发送消息的代码如下：

```
public void sendMessage(String input) throws XMPPException 
    {
        Chat chat = connection.getChatManager().getThreadChat("test@server");
        if(chat != null)
        {
            System.out.println("Chat exists!");
            chat.addMessageListener(messageListener);
        }
        else
        {
            System.out.println("Create new chat");
            chat = connection.getChatManager().createChat("test@server", "test@server", messageListener);
        System.out.println(chat.getThreadID());
        }
        chat.sendMessage(input);
    } 
```

下面我有处理传入消息的侦听器类。它最初是在程序初始化时设置的，以便在登录后直接接收消息并建立聊天。它也由您在上面看到`messageListener`的函数中的变量调用。`sendMessage`

```
class MyMessageListener implements MessageListener {
        @Override
        public void processMessage(Chat chat, Message message) {
            String from = message.getFrom();
            String body = message.getBody();
            System.out.println(chat.getThreadID());
            System.out.println(String.format("Received message '%1$s' from %2$s", body, from));    
        }
    } 
```

我对 Smack 库非常陌生，发现可用的文档和示例有点模糊。任何人都知道我如何检查是否在另一个客户端上创建了聊天并以某种方式获取此聊天的线程 ID 或通过知道发送消息的用户的名称从 ChatManager 中找到聊天对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T13:58:47.527

您需要注册一个**ChatManagerListener**来监听传入的聊天，如文档中的[传入聊天](http://www.igniterealtime.org/builds/smack/docs/latest/documentation/messaging.html)部分所述。以这种方式创建的聊天中的侦听器将接收传入的消息，假设它们使用相同的线程 ID 进行响应（并非所有客户端都使用线程 ID）。

顺便说一句，您正在按线程查找现有聊天，但这不是传入聊天的线程 ID。您显示的代码片段将仅与您自己创建的聊天匹配，因此每次发送消息时都设置消息侦听器没有意义，您不妨只持有对它的引用一次是创造。

您必须从传入的聊天中检索线程 id 才能正常工作，并且假设传入的聊天实际上有一个聊天 id。

# javascript - Javascript中的重叠声音

> ID：15463125
> 
> 赞同：0
> 
> 时间：2013-03-17T16:23:03.853
> 
> 标签：javascript

我一直在互联网上寻找一整天的时间来回答我的问题，如果我可以将一个声音重叠在同一个声音上......

我正在制造一架喷气式飞机，当它发射子弹时，我的声音会播放（这就像 3 秒长的轨道，非常长），我的下一个声音是在整个轨道完成后......有没有办法重叠相同的轨道超过以前的？

我的代码真的很简单 `var sound = new Audio(); sound.src = audio/audio.mp3` ，在我的喷气式飞机开火的地方我有一个简单的`sound.play();`声明......我希望可以在 Javascript 中重叠相同的声音......谢谢

（我是 Javascript 的初学者 :) ）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T16:26:09.043

我不知道API是否允许您在同一进程中使用两次声音输出...但是您可以尝试，使用[Timing事件](http://www.w3schools.com/js/js_timing.asp)来延迟播放。

# c++ - 更好地理解 LRU 算法

> ID：15463128
> 
> 赞同：2
> 
> 时间：2013-03-17T16:23:04.810
> 
> 标签：c++, linux, lru

我需要在 3D 渲染器中实现 LRU 算法以进行纹理缓存。我在 Linux 上用 C++ 编写代码。

*   在我的例子中，我将使用纹理缓存来存储图像数据的“图块”（16x16 像素块）。现在想象一下，我在缓存中进行查找，得到一个命中（图块在缓存中）。如何将该条目的“缓存”内容返回给函数调用者？我解释。我想当我在缓存中加载一个图块时，我分配内存来存储 16x16 像素，然后加载该图块的图像数据。现在有两种解决方案将缓存条目的内容传递给函数调用者：
    1）作为指向切片数据的指针（快速，内存高效），

    ```
    TileData *tileData = cache->lookup(tileId); // 不安全？
    ```

    2）或者我需要在函数调用者分配的内存空间内从缓存中重新复制切片数据（复制可能很慢）。

    ```
    无效缓存::lookup(int tileId, float *&tileData)
    {
       // 在缓存中查找切片，如果不在缓存中，则从磁盘加载到缓存，...
       ...
       // 现在复制平铺数据，安全但不是很慢吗？
       memcpy((char*)tileData, tileDataFromCache, sizeof(float) * 3 * 16 * 16);
    }
    浮动 *tileData = 新浮动[3 * 16 * 16]; // 需要为该图块分配内存
    // 从缓存中获取瓦片数据，需要一个副本
    缓存->查找（tileId，tileData）；

    ```

    我会选择 1)，但问题是，如果在查找之后将切片从缓存中删除，并且该函数尝试使用返回指针访问数据，会发生什么情况？我看到的唯一解决方案是使用一种引用计数（auto_ptr）的形式，其中数据实际上仅在不再使用时才被删除？

*   应用程序可能会访问超过 1 个纹理。我似乎找不到一种方法来创建每个纹理和纹理的每个图块都是唯一的密钥。例如，我可能在缓存中有来自 file1 的 tile 1 和来自 file2 的 tile1，因此在 tildId=1 上进行搜索是不够的......但我似乎无法找到一种方法来创建该文件的密钥名称和 tileID。我可以构建一个包含文件名和 tileID (FILENAME_TILEID) 的字符串，但用作键的字符串不会比整数慢得多吗？

*   最后我有一个关于时间戳的问题。许多论文建议使用时间戳来对缓存中的条目进行排序。使用时间戳有什么好的功能？时间（）函数，时钟（）？有没有比使用时间戳更好的方法？

抱歉，我意识到这是一条很长的消息，但是 LRU 的实现似乎并不像听起来那么简单。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T17:45:26.297

回答您的问题：

1）返回一个 shared_ptr （或逻辑上等效的东西）。然后，所有“何时删除此对象是安全的”问题几乎都消失了。

2）我首先使用一个字符串作为键，看看它是否真的太慢了​​。如果字符串不是太长（例如您的文件名不是太长），那么您可能会发现它比您预期的要快。如果您确实发现字符串键不够高效，您可以尝试为字符串计算哈希码并将图块 ID 添加到其中......这可能在实践中有效，尽管总是有可能哈希冲突。但是你可以在启动时运行一个碰撞检查例程，它会生成所有可能的文件名+tileID组合，并在映射到相同的键值时提醒你，这样至少你会在测试期间立即知道何时有问题并且可以做一些事情（例如通过调整你的文件名和/或你的哈希码算法）。

3）我不建议使用时间戳，它是不必要且脆弱的。相反，尝试这样的事情（伪代码）：

```
typedef shared_ptr<TileData *> TileDataPtr;   // automatic memory management!

linked_list<TileDataPtr> linkedList;
hash_map<data_key_t, TileDataPtr> hashMap;

// This is the method the calling code would call to get its tile data for a given key
TileDataPtr GetData(data_key_t theKey)
{
   if (hashMap.contains_key(theKey))
   {
      // The desired data is already in the cache, great!  Just move it to the head
      // of the LRU list (to reflect its popularity) and then return it.
      TileDataPtr ret = hashMap.get(theKey);
      linkedList.remove(ret);     // move this item to the head
      linkedList.push_front(ret); // of the linked list -- this is O(1)/fast
      return ret;
   }
   else
   {
      // Oops, the requested object was not in our cache, load it from disk or whatever
      TileDataPtr ret = LoadDataFromDisk(theKey);
      linkedList.push_front(ret);
      hashMap.put(theKey, ret);

      // Don't let our cache get too large -- delete
      // the least-recently-used item if necessary
      if (linkedList.size() > MAX_LRU_CACHE_SIZE)
      {
         TileDataPtr dropMe = linkedList.tail();
         hashMap.remove(dropMe->GetKey());
         linkedList.remove(dropMe);
      }
      return ret;
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T17:48:00.787

按照与您的问题相同的顺序：

*   从性能的角度来看，复制纹理日期似乎并不合理。引用计数听起来要好得多，只要您实际上可以安全地对其进行编码。一旦渲染器不使用数据内存*或*在缓存中存储引用，数据内存就会被释放。

*   我假设您将使用某种[哈希表](http://en.wikipedia.org/wiki/Hash_table)来查找您所描述的内容。您的问题的常见解决方案有两个部分：

    *   使用组合多个值的合适散列函数，例如纹理文件名和图块 ID。本质上，您创建了一个*复合键*，它被视为一个实体。散列函数可以是所有基本组件的散列的异或运算，或者更复杂的东西。

        出于性能原因，选择合适的哈希函数至关重要 - 如果所述函数不够随机，您将遇到很[多哈希冲突](http://en.wikipedia.org/wiki/Hash_table#Collision_resolution)。

    *   使用合适的复合相等检查来处理哈希冲突的情况。

    这样，您可以在单个哈希表查找中查找所有感兴趣属性的*组合。*

*   为此使用时间戳是*行不通*的-期间。大多数关于缓存的资料通常在描述有问题的算法时考虑到网络资源缓存（例如 HTTP 缓存）。这在这里行不通，原因有以下三个：

    1.  使用自然时间仅在您打算实施将其考虑在内的缓存策略时才有意义，例如在 10 分钟后删除缓存条目。除非您正在做一些*非常*奇怪的事情，否则这样的事情在 3D 渲染器中是没有意义的。

    2.  即使您使用高精度计时器，时间戳的实际分辨率也相对较低。大多数计时器源的精度约为 1 毫秒，这对于处理器来说是一个*很长的时间*——在那个时候，您的渲染器将处理多个纹理条目。

    3.  你知道定时器调用有多昂贵吗？像这样滥用它们甚至可能使您的系统性能比根本没有任何缓存*更糟糕......*

    这个问题的通常解决方案是根本不使用计时器。LRU算法只需要知道两件事：

    1.  允许的最大条目数。

    2.  现有条目的顺序是它们的最后一次访问。

    第 (1) 项来自系统配置，通常取决于可用存储空间。第(2)项一般暗示使用组合链表/散列表数据结构，其中散列表部分提供快速访问，链表保留访问顺序。每次访问一个条目时，它都会被放在列表的末尾，而旧条目会从它的开头删除。

    使用组合数据结构，而不是两个单独的数据结构，可以从哈希表中删除条目，而无需进行查找操作。这提高了整体性能，但不是绝对必要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T18:18:29.720

正如承诺的那样，我正在发布我的代码。如果我犯了错误或者我是否可以进一步改进，请告诉我。我现在将研究使其在多线程环境中工作。再次感谢 Jeremy 和 Thkala 的帮助（抱歉代码不适合注释块）。

```
#include <cstdlib>
#include <cstdio>
#include <memory>
#include <list>
#include <unordered_map> 

#include <cstdint>
#include <iostream>

typedef uint32_t data_key_t;

class TileData
{
public:
    TileData(const data_key_t &key) : theKey(key) {}
    data_key_t theKey;
    ~TileData() { std::cerr << "delete " << theKey << std::endl; }
};

typedef std::shared_ptr<TileData> TileDataPtr;   // automatic memory management!

TileDataPtr loadDataFromDisk(const data_key_t &theKey)
{
    return std::shared_ptr<TileData>(new TileData(theKey));
}

class CacheLRU
{
public:
    // the linked list keeps track of the order in which the data was accessed
    std::list<TileDataPtr> linkedList;
    // the hash map (unordered_map is part of c++0x while hash_map isn't?) gives quick access to the data 
    std::unordered_map<data_key_t, TileDataPtr> hashMap; 
    CacheLRU() : cacheHit(0), cacheMiss(0) {}
    TileDataPtr getData(data_key_t theKey)
    {
        std::unordered_map<data_key_t, TileDataPtr>::const_iterator iter = hashMap.find(theKey);
        if (iter != hashMap.end()) {
            TileDataPtr ret = iter->second;
            linkedList.remove(ret);
            linkedList.push_front(ret);
            ++cacheHit;
            return ret;
        }
        else {
            ++cacheMiss;
            TileDataPtr ret = loadDataFromDisk(theKey);
            linkedList.push_front(ret);
            hashMap.insert(std::make_pair<data_key_t, TileDataPtr>(theKey, ret));
            if (linkedList.size() > MAX_LRU_CACHE_SIZE) {
                const TileDataPtr dropMe = linkedList.back();
                hashMap.erase(dropMe->theKey);
                linkedList.remove(dropMe);
            }
            return ret;
        }
    }
    static const uint32_t MAX_LRU_CACHE_SIZE = 8;
    uint32_t cacheMiss, cacheHit;
};

int main(int argc, char **argv)
{
    CacheLRU cache;
    for (uint32_t i = 0; i < 238; ++i) {
        int key = random() % 32;
        TileDataPtr tileDataPtr = cache.getData(key);
    }
    std::cerr << "Cache hit: " << cache.cacheHit << ", cache miss: " << cache.cacheMiss << std::endl;
    return 0;
} 
```

# jquery - jQuery mobile 居中按钮图标

> ID：15463135
> 
> 赞同：4
> 
> 时间：2013-03-17T16:23:35.143
> 
> 标签：jquery, mobile, icons, centering, code-cleanup

![在此处输入图像描述](../Images/dea3aee0917fd682073a9f26c75bc09e.png)

注意到上面的导航栏图像，它已应用在页脚中，固定在页面底部，我需要以下帮助：

*   格式化每个按钮上方的图标，使其整齐地居中（理想情况下使用 CSS，但因此允许使用 jQuery / jQuery Mobile）
*   **清理我的代码**。我很确定在 HTML 和 CSS 中都有更简短的版本来做我正在做的事情，只要它不神秘，我将不胜感激清理下面粘贴的代码的任何帮助。

图标为 24x24，以下是用于 HTML 的代码：

```
<div data-role="footer" data-position="fixed" data-tap-toggle="false">
<div id="navigation" data-role="controlgroup" data-type="horizontal" class="center">
  <a href="#" data-role="button" data-iconpos="top" id="home" data-icon="custom">Home</a>
    <a href="#" data-role="button" data-iconpos="top" id="powerSource" data-icon="custom">Power Sources</a>
    <a href="#" data-role="button" data-iconpos="top" id="storage" data-icon="custom">Storage</a>
    <a href="#" data-role="button" data-iconpos="top" id="tripAnalysis" data-icon="custom">Trip Analysis</a>
    <a href="#" data-role="button" data-iconpos="top" id="tripManager" data-icon="custom">Trip Manager</a>
    <a href="#" data-role="button" data-iconpos="top" id="warning" data-icon="custom">Warnings & Alarms</a>
    <a href="#" data-role="button" data-iconpos="top" id="powerSys" data-icon="custom">Power Systems</a>
    <a href="#" data-role="button" data-iconpos="top" id="settings" data-icon="custom">Settings</a>
</div>
</div> <!-- / footer --> 
```

以下是我应用的 CSS（从这里和那里收集并编辑了一些内容）：

```
.ui-icon-custom {
    width:30px !important;
    height:25px !important;
    margin-left:-15px !important;
}
.center {
    text-align: center;
}
#home .ui-icon {
    background-image: url(/images/icons/home.png);
    background-repeat: no-repeat;
}
#powerSource .ui-icon {
    background-image: url(/images/icons/powerSource.png);
    background-repeat: no-repeat;
}
#storage .ui-icon {
    background-image: url(/images/icons/storage.png);
    background-repeat: no-repeat;
}
#tripAnalysis .ui-icon {
    background-image: url(/images/icons/tripAnalysis.png);
    background-repeat: no-repeat;
}
#tripManager .ui-icon {
    background-image: url(/images/icons/tripManager.png);
    background-repeat: no-repeat;
}
#warning .ui-icon {
    background-image: url(/images/icons/warning.png);
    background-repeat: no-repeat;
}
#powerSys .ui-icon {
    background-image: url(/images/icons/powerSys.png);
    background-repeat: no-repeat;
}
#settings .ui-icon {
    background-image: url(/images/icons/settings.png);
    background-repeat: no-repeat;
} 
```

# puppet - 傀儡代理大规模部署

> ID：15463137
> 
> 赞同：3
> 
> 时间：2013-03-17T16:23:47.943
> 
> 标签：puppet

是否有一种内置方法可以以无人值守的自动化方式在数百个节点上大规模部署 Puppet 代理？（提供用户/通行证/证书。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-14T11:59:42.637

没有内置的方法可以这样做。但是，您始终可以使用 kickstart/pre-seed 将 puppet 代理部署为操作系统配置的一部分，并将其交给 puppet 来管理您的主机。

或者作为替代方案，您可以编写自定义 shell 脚本在数百台机器上部署 puppet 代理，我个人使用这种方法来管理 puppet。供参考的是[脚本](https://raw.githubusercontent.com/cloudwicklabs/scripts/master/puppet_install.sh)。

此外，您可能对[项目 razor](http://puppetlabs.com/solutions/next-generation-provisioning)感兴趣，它会自动部署 puppet 作为裸机配置的一部分并将其交给 puppet 进行配置管理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T01:00:48.193

基本上，您唯一需要做的就是在这些机器上安装 Puppet Agent。我假设您不会为数百个节点手动安装软件包，对吧？

安装代理后，它将自动找到 Puppet Master（如果 puppet.yourdomain.com 指向该主机），将证书请求发送到您需要对其进行签名的 Master。您还可以使用 Puppet 的[自动签名功能](http://docs.puppetlabs.com/guides/configuring.html#autosignconf)。

此外，Puppet Enterprise 和[The Foreman](http://theforeman.org/manuals/1.1/index.html#4.4Provisioning)是基于 Puppet 的，它们带有额外的配置功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-15T21:57:52.310

我建议您使用并行 SSH。有很多口味，我更喜欢clush，见[https://github.com/cea-hpc/clustershell/wiki/clush](https://github.com/cea-hpc/clustershell/wiki/clush)

您需要使用组创建 /etc/clustershell/groups 文件，例如：

```
all: node[1-2000] 
```

然后，您可以使用以下方式轻松地将 puppet 安装在所有节点上：

```
clush -bw @all yum -y install puppet 
```

# android - 是否仍然建议使用 AsyncTask 在后台加载 listView 项目？

> ID：15463146
> 
> 赞同：6
> 
> 时间：2013-03-17T16:24:38.033
> 
> 标签：android, android-listview, android-asynctask, android-loader

## 背景

我听说有一些在后台加载数据的新解决方案比 AsyncTask 更推荐（如[loaders](http://developer.android.com/reference/android/content/Loader.html)）。

## 问题

AsyncTask 非常好用且易于使用。但是，它有一些限制：

1.  类本身必须修改，因为它受到待处理任务数量（大约 256 个左右）的限制。当然，在 listView 的适配器中，如果不需要任务，我总是会取消它（例如，当我需要更新用于不同项目的视图时）。

2.  当重新创建活动/片段时，我还必须全部取消它们（或以不同的方式处理）。

3.  由于 1&2，我需要管理它们并参考它们

4.  AsyncTask 使用任务队列，有时我需要使用堆栈来代替，因此我必须创建自己的 AsyncTask 类来代替使用堆栈。

## 问题

AsyncTask 有替代方案吗？

我知道这在之前的一些帖子中被问过（比如[这里](https://stackoverflow.com/questions/10422697/android-loaders-the-way-to-go)），但我在想是否有一种新的通用方法可以在后台加载数据来取代 asyncTask。

关于加载器，我认为他们的想法是它们用于数据库和 contentProviders，但它们也可以用于加载（例如）来自 Internet 的数据（如图像文件）吗？

还有一个由 google 制作的很好的示例（[这里](http://developer.android.com/training/displaying-bitmaps/index.html)称为“bitmapFun”），根据我所看到的使用 AsyncTask （甚至扩展它，可能是因为我提到的相同原因）。但也许我也错过了一些东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T16:37:10.587

是的。

加载器是托管的 AsyncTasks。如果您不使用 Loader，您可能会缺少它们所需的管理。

AsyncTasks（和加载器）是一种非常糟糕的方式来获取设备外的东西。要从远程服务器获取数据，请查看使用 IntentService。请参阅：[https ://www.youtube.com/watch?v=xHXn3Kg2IQE](https://www.youtube.com/watch?v=xHXn3Kg2IQE)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T16:51:57.240

也许您应该考虑检查您的方法，您需要根据视图执行多次更新并取消先前视图中的所有待处理任务，这给人的印象是您正在为需要创建的每个视图单独执行数据加载.

在带有列表适配器的列表视图中，通常的方法是加载一部分数据（作为 ValueObject 的列表或作为来自多个数据库行的游标）按需要或在一个目标中分页，而不是逐项加载。因此，如果您希望更新下一页，您基本上只执行一个操作，使用 AsyncTask 或 Loaders 将新项目获取到模型，然后使其可供 UI 显示它们。这样，您将应用 MVC，并且您不会有几个待处理的任务需要取消和控制，并且您的结构将更加稳固且更易于管理。

关于替代方案，如果您正在处理数据库，最直接的方法是使用 CursorLoader，即[加载程序](https://developer.android.com/reference/android/content/Loader.html)而不是[AsyncTask](https://developer.android.com/reference/android/os/AsyncTask.html)，但如果您正在处理来自网络或文件系统的数据，您有点自由从各种可用的其他选项中进行选择。[AsyncTask](https://developer.android.com/reference/android/os/AsyncTask.html)使用起来要简单得多，主要推荐用于简单的事情或一次性查询。但是您也可以将 Loaders 用于此类任务，请参阅[AsyncTaskLoader](https://developer.android.com/reference/android/content/AsyncTaskLoader.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T16:40:34.503

AsyncTask 被设计为围绕 Thread 和 Handler 的辅助类，并不构成通用线程框架。AsyncTasks 最好用于短时间的操作（最多几秒钟）。如果您需要保持线程长时间运行，强烈建议您使用 java.util.concurrent 包提供的各种 API，例如Executor、ThreadPoolExecutor 和 FutureTask。有关更多信息，请参阅[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)。

asynctask 的替代方案是 robospice。[https://github.com/octo-online/robospice](https://github.com/octo-online/robospice)。

您可以在此处开始使用 robopice。[https://github.com/octo-online/robospice/wiki/Starter-Guide](https://github.com/octo-online/robospice/wiki/Starter-Guide)。

[https://play.google.com/store/apps/details?id=com.octo.android.robospice.motivations&feature=search_result](https://play.google.com/store/apps/details?id=com.octo.android.robospice.motivations&feature=search_result)上的 robospice 示例。

robospice 的一些特性。

```
1.executes asynchronously (in a background AndroidService) network requests (ex: REST requests using Spring Android).

2.is strongly typed ! You make your requests using POJOs and you get POJOs as request results.

3.enforce no constraints neither on POJOs used for requests nor on Activity classes you use in your projects.

4.caches results (in Json with both Jackson and Gson, or Xml, or flat text files, or binary files, even using ORM Lite).

5.notifies your activities (or any other context) of the result of the network request if and only if they are still alive

6.no memory leak at all, like Android Loaders, unlike Android AsyncTasks notifies your activities on their UI Thread.

7.uses a simple but robust exception handling model. 
```

# javascript - Extjs 4.1 - 如何创建没有窗口或容器的标签面板？

> ID：15463149
> 
> 赞同：1
> 
> 时间：2013-03-17T16:24:55.857
> 
> 标签：javascript, extjs, extjs4

我想创建选项卡面板，以便在单击按钮时打开。我可以像这样在窗口内创建它：

```
var window = new Ext.Window({
            id: 'item1',
            closable: true,
            floating: true,
            collapsible: true,
            width: 900,
            height: 600,
            autoScroll: true,
        items  : mytabpanel

}).show(); 
```

但我想知道没有窗户我怎么能做到？似乎 show() 不适用于标签面板。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T17:46:38.693

我不完全确定您要实现什么，假设您创建选项卡面板的代码是正确的，那么我不明白您的代码为什么不起作用。

如果您不想在窗口中呈现选项卡面板，则始终可以使用 renderTo 属性将其呈现为实际的 DOM 元素。例如

```
Ext.create('Ext.tab.Panel', {
            width: 400,
            height: 400,
            renderTo: document.getElementById('component'),
            items: [{
                title: 'Foo'
            }, {
                title: 'Bar',
                tabConfig: {
                    title: 'Custom Title',
                    tooltip: 'A button tooltip'
                }
            }]
        }); 
```

其中“组件”是 HTML 页面中容器元素（例如 DIV）的 id。如果您在按钮的 onclick 事件中调用它，希望它可以满足您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T19:00:46.453

如果你想让一个组件浮动，你应该使用[浮动 mixin](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.util.Floating)

# symfony - FOSUserBundle 多种用户类型

> ID：15463150
> 
> 赞同：8
> 
> 时间：2013-03-17T16:24:57.823
> 
> 标签：symfony, fosuserbundle

我正在构建一个应用程序，其中我有（至少）两种不同的用户类型，比如说买家和卖家。每种用户类型都应该有自己的逻辑（注册表单/流程、个人资料、权限……），但我想对每个用户使用 FOSUserBundle，以便在某些方面进行共同管理。

我实际上被注册表阻止了；碰巧我不能在 FOSUserBundle 中声明不同的形式，经过一番研究，这似乎是不可能的。我发现的一些答案建议使用我自己的注册表单，但随后

1.  如何将其与 FOSUserBundle 链接？

2.  我应该在控制器/表单中填充自己的用户表吗？这样不同的用户会从 FOSUserBundle 扩展用户，然后我应该自己管理不同的表单而不从 FOSUserBundle 扩展这些表单？

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T02:08:15.607

PUGXMultiUserBundle[是](https://github.com/PUGX/PUGXMultiUserBundle)您正在寻找的。它扩展[了 FOSUserBundle](https://github.com/FriendsOfSymfony/FOSUserBundle)并允许您拥有不同的注册表单等...

# gtk - 学习Gtkmm，无法显示锚定在textview中的按钮

> ID：15463153
> 
> 赞同：1
> 
> 时间：2013-03-17T16:25:14.073
> 
> 标签：gtk, textview, anchor, gtkmm

我正在学习 gtkmm，我在 gnome.org 中找到了一个 textview 示例：

[https://developer.gnome.org/gtkmm-tutorial/2.22/sec-textview-examples.html.en](https://developer.gnome.org/gtkmm-tutorial/2.22/sec-textview-examples.html.en)

我更改了 fill_buffers() 代码以将按钮添加到 textview 中：

```
void ExampleWindow::fill_buffers()
{
    m_refTextBuffer1 = Gtk::TextBuffer::create();
    m_refTextBuffer1->set_text("This is the text from TextBuffer #1.");

    //learn
    Gtk::TextIter iter = m_refTextBuffer1->get_iter_at_offset(5);
    refAnchor = m_refTextBuffer1->create_child_anchor(iter);

    m_Button_Text.signal_clicked().connect(sigc::mem_fun(*this,
                &ExampleWindow::on_button_quit) );
    m_TextView.add_child_at_anchor(m_Button_Text, refAnchor);
    //m_Button_Text.show();

    m_refTextBuffer2 = Gtk::TextBuffer::create();
    m_refTextBuffer2->set_text(
            "This is some alternative text, from TextBuffer #2.");

} 
```

构造函数是：

```
ExampleWindow::ExampleWindow()
    : m_Button_Quit(Gtk::Stock::QUIT),
    m_Button_Buffer1("Use buffer 1"),
    m_Button_Buffer2("Use buffer 2"),
    m_Button_Text("Text Button")

{
    set_title("Gtk::TextView example");
    set_border_width(5);
    set_default_size(400, 200);

    fill_buffers();

    m_ButtonBox.pack_start(m_Button_Buffer1, Gtk::PACK_SHRINK);
    m_ButtonBox.pack_start(m_Button_Buffer2, Gtk::PACK_SHRINK);
    m_ButtonBox.pack_start(m_Button_Quit, Gtk::PACK_SHRINK);
    m_ButtonBox.set_border_width(5);
    m_ButtonBox.set_spacing(5);
    m_ButtonBox.set_layout(Gtk::BUTTONBOX_END);

    //Connect signals:
    m_Button_Quit.signal_clicked().connect(sigc::mem_fun(*this,
                &ExampleWindow::on_button_quit) );
    m_Button_Buffer1.signal_clicked().connect(sigc::mem_fun(*this,
                &ExampleWindow::on_button_buffer1) );
    m_Button_Buffer2.signal_clicked().connect(sigc::mem_fun(*this,
                &ExampleWindow::on_button_buffer2) );

    //Add the TreeView, inside a ScrolledWindow, with the button underneath:
    m_ScrolledWindow.add(m_TextView);

    //Only show the scrollbars when they are necessary:
    m_ScrolledWindow.set_policy(Gtk::POLICY_AUTOMATIC, Gtk::POLICY_AUTOMATIC);

    m_VBox.pack_start(m_ScrolledWindow);

    //Add buttons:
    m_VBox.pack_start(m_ButtonBox, Gtk::PACK_SHRINK);

    add(m_VBox);

    on_button_buffer1();

    show_all_children();
} 
```

这样我就可以获得一个锚定在文本视图中的按钮。但是代码不起作用，按钮只是在矩形内显示为十字形，单击时没有响应。

我还发现了这些网站：

[http://ruby-gnome2.sourceforge.jp/hiki.cgi?tut-gtk2-txtw-icw](http://ruby-gnome2.sourceforge.jp/hiki.cgi?tut-gtk2-txtw-icw)

[http://www.matrix44.net/blog/?p=1033](http://www.matrix44.net/blog/?p=1033)

我比较了我的和上述网站之间的代码。我仍然无法弄清楚为什么我的代码不起作用......

非常感谢提前。我被这个问题困扰了一天...

++++++++++++++++++++++

其他代码可能有用：

```
void ExampleWindow::on_button_quit()
{
    hide();
}

void ExampleWindow::on_button_buffer1()
{
    m_TextView.set_buffer(m_refTextBuffer1);
}

void ExampleWindow::on_button_buffer2()
{
    m_TextView.set_buffer(m_refTextBuffer2);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-04T05:14:33.237

按钮必须像这样创建：

```
Gtk::Button* m_pbutton = Gtk::manage(new Gtk::Button("Text")); 
```

然后您可以将其添加到锚点：

```
m_TextView.add_child_at_anchor(*m_pbutton, refAnchor); 
```

回答这个以防万一其他人需要帮助。

# android - 操作栏 inflateException

> ID：15463155
> 
> 赞同：0
> 
> 时间：2013-03-17T16:25:22.887
> 
> 标签：android, android-actionbar

我无法在我的应用程序中创建操作栏。它在启动时崩溃。我已经测试了来自互联网的几个代码示例。我在 Eclipse 中创建了一个全新的项目，其唯一目的是添加一个操作栏。但我不能。

这是我的代码

* * *

```
package com.example.testmenu;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuInflater;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) 
    {
        MenuInflater inflater = getMenuInflater();    
        inflater.inflate(R.menu.activity_main, menu);    
        return true;
    }
} 
```

* * *

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">    
    <item android:id="@+id/menu_save"          
        android:icon="@drawable/icon_one"          
        android:title="@string/menu_one"          
        android:showAsAction="ifRoom|withText" />
</menu> 
```

* * *

java.lang.RuntimeException：无法启动活动 ComponentInfo{com.example.testmenu/com.example.testmenu.MainActivity}：android.view.InflateException：二进制 XML 文件第 2 行：膨胀类菜单时出错

* * *

```
<uses-sdk
android:minSdkVersion="8"
android:targetSdkVersion="17" /> 
```

* * *

没有菜单标签，应用程序运行正常。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:49:33.693

你`Menu`应该来自 actionbarsherlock 包。试试这样：

```
public boolean onCreateOptionsMenu(com.actionbarsherlock.view.Menu menu) {
    //... 
```

或者您可以添加`import`：

```
import com.actionbarsherlock.view.Menu; 
```

# c - 信号后recvfrom不返回-1

> ID：15463156
> 
> 赞同：4
> 
> 时间：2013-03-17T16:25:30.233
> 
> 标签：c, sockets, icmp, raw-sockets

我正在使用原始套接字编写一个 ping 程序，但即使正在处理 SIGALRM，recvfrom 也没有返回带有 EINTR 的 -1。这个 SIGALRM 是由我的警报（1）产生的。我希望 recvfrom 返回，以便我可以决定数据包确实已经丢失了。

```
#include "libsock"
#include <netinet/ip.h>
#include <netinet/ip_icmp.h>

double total=0, max=0, min=10000000;
int totalpackets=0, packetslost=0;
int recieved=0;

void handler2()
{
  printf("host unreachable\n");
}

unsigned short 
csum (unsigned short *buf, int nwords)
{
  unsigned long sum;
  for (sum = 0; nwords > 0; nwords--)
    sum += *buf++;
  sum = (sum >> 16) + (sum & 0xffff);
  sum += (sum >> 16);
  return ~sum;
}

void 
handler()
{
  printf("\n");
  printf("--------------PINGING STATISTICS----------------\n");
  printf("AVG:%f MAX:%f MIN:%f TOTAL PACKETS:%d PACKETS LOST:%d SUCCESS PERCENTAGE:%f\n\n",total/(totalpackets-packetslost),max,min,totalpackets,packetslost,((double)(totalpackets-packetslost)/(double)totalpackets)*100);
  exit(0);
}

int 
main (int argc, char *argv[])
{
  if (argc != 2)
  {
    printf ("need destination for tracert\n");
    exit (0);
  }
  int sfd = socket (AF_INET, SOCK_RAW, IPPROTO_ICMP);
  char buf[4096] = { 0 };

  int one = 1;
  const int *val = &one;
  if (setsockopt (sfd, IPPROTO_IP, IP_HDRINCL, val, sizeof (one)) < 0)
    printf ("Cannot set HDRINCL!\n");

  struct sockaddr_in addr;
  struct ip* ip_hdr=(struct ip*)buf;
  addr.sin_port = htons (7);
  addr.sin_family = AF_INET;
  inet_pton (AF_INET, argv[1], &(addr.sin_addr));

  ip_hdr->ip_hl = 5;
  ip_hdr->ip_v = 4;
  ip_hdr->ip_tos = 0;
  ip_hdr->ip_len = 20 + 8 + 64;
  ip_hdr->ip_id =0;
  ip_hdr->ip_off = 64;
  ip_hdr->ip_ttl = 64;
  ip_hdr->ip_p = IPPROTO_ICMP;
  inet_pton (AF_INET, "172.30.104.59", &(ip_hdr->ip_src));
  inet_pton (AF_INET, argv[1], &(ip_hdr->ip_dst));
  ip_hdr->ip_sum = csum ((unsigned short *) buf, 4);

  struct icmphdr *icmphd = (struct icmphdr *) (buf+20);
  icmphd->type = ICMP_ECHO;
  icmphd->code = 0;
  icmphd->checksum = 0;
  icmphd->un.echo.id = 0;
  icmphd->un.echo.sequence =1;

  memset(buf+28,'a',64);
  icmphd->checksum = csum ((unsigned short *) (buf+20), 36);
  signal(SIGINT,handler);
  struct timeval tv1,tv2;  

  printf("Pinging %s with 64 bytes of data.\n\n",argv[1]);

  while(1)
  {
    recieved=0;     
    totalpackets++;
    sendto (sfd, buf,20+ 8+64, 0, SA & addr, sizeof addr);
    char buff[4096] = { 0 };
    struct sockaddr_in addr2;
    socklen_t len = sizeof (struct sockaddr_in);
    signal(SIGALRM,handler2);
    gettimeofday(&tv1,NULL);
    alarm(1);
    int x=recvfrom (sfd, buff, 20+8+64, 0, SA & addr2, &len);
    gettimeofday(&tv2,NULL);
    double   d=(double)(tv2.tv_sec-tv1.tv_sec)*1000+((double)(tv2.tv_usec-tv1.tv_usec))/1000;

    if(x>0) {
      struct icmphdr *icmphd2 = (struct icmphdr *) (buff + 20);
      printf ("Reached destination:%s\tTime elapsed:%f ms\n\n",
          inet_ntoa (addr2.sin_addr),d);
      total+=d;
      if(d>max)
        max=d;
      if(d<min)
        min=d;
    } else {
      printf("Packet lost\n");   
      packetslost++;
    }

    sleep(1);
  }
  return 0;
} 
```

libsock 包含头文件和 SA=(struct sockaddr*)

SIGALRM 是否与其他信号不同，我没有设置 SA_RESTART..

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T16:54:23.913

`signal`的确切行为取决于系统。来自[`man 2 signal`](http://man7.org/linux/man-pages/man2/signal.2.html)：

> BSD 语义等价于`sigaction(2)`使用以下标志调用：
> 
> ```
> sa.sa_flags = SA_RESTART; 
> ```
> 
> Linux上的情况如下：
> 
> ...
> 
> 默认情况下，在 glibc 2 及更高版本中，`signal()`包装函数不会调用内核系统调用。 **相反，它使用提供 BSD 语义的标志调用 sigaction(2)。**

（强调我的）

因此，默认情况下，在 Linux 和 BSD 系统上，`signal`将设置`SA_RESTART`，这将自动重新启动您的系统调用，使其永远不会报告`EINTR`.

您需要使用`sigaction`来精确控制标志：

```
struct sigaction sact = {
    .sa_handler = handle_sigalrm,
    .sa_flags = 0,
};
sigaction(SIGALRM, &sact, NULL); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T16:42:05.947

使用“普通”的行为在`signal`很大程度上取决于操作系统。假设 POSIX 一致性，您应该`sigaction`改用。请参阅[sigaction 和 signal 有什么区别？](https://stackoverflow.com/questions/231912/what-is-the-difference-between-sigaction-and-signal)更多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T16:46:25.177

你不应该使用`signal`，因为它是不可移植的。相反，使用`sigaction`.

使用选项`SA_RESTART`，在信号被捕获后，阻塞调用将被静默恢复。没有`SA_RESTART`，阻塞调用停止，返回 -1 并设置`errno`为`EINTR`。

这是一个函数`mysignal`，您可以使用它来替换您的`signal`呼叫，并将其`options`设置为 0：

```
int mysignal (int sig, void (*func)(int), int options) {
  int r; 
  struct sigaction act; 

  act.sa_handler = func; 
  act.sa_flags = options; 
  sigemptyset (&act.sa_mask); 

  r = sigaction (sig, &act, NULL); 
  if (r < 0) perror (__func__); 
  return r;
} 
```

# ruby-on-rails - 什么是实施数据动态报告系统的“Rails 方式”

> ID：15463157
> 
> 赞同：4
> 
> 时间：2013-03-17T16:25:31.047
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2, reporting

### 介绍

我正在做一个系统，其中我有一个非常简单的布局，仅包含事务（带有基本 CRUD）。每笔交易都有日期、类型、借方金额（减）和贷方金额（加）。想想网上银行对账单，差不多就是这样。

我遇到的问题是让我的控制器保持瘦身并担心可能过度查询数据库。

### 一个简单的报告示例

*   所选期间的总借方，例如`SUM(debit) as total_debit`
*   所选期间的总学分，例如`SUM(credit) as total_credit`
*   总的总数，例如`total_credit - total_debit`

*   报告必须允许动态日期范围，例如`where(date BETWEEN 'x' and 'y')`

*   日期范围永远不会超过一年，一次最多只能说 1000 个事务/行

所以在我创建的控制器中：

```
def report
  @d = Transaction.select("SUM(debit) as total_debit").where("date BETWEEN 'x' AND 'y'")
  @c = Transaction.select("SUM(credit) as total_credit").where("date BETWEEN 'x' AND 'y'")
  @t = @c.credit_total - @d.debit_total
end 
```

### 附加问题信息

我的实际报告有接近 6 或 7 个数据库查询（例如，根据类型 == 1 或类型 == 2 等提取总贷方/借方）并且有更多计算，例如总计某些贷方/借方类型，然后添加和从其他总数中删除这些总数。

我正在尽最大努力坚持“瘦模型，胖控制器”，但我的控制器需要传递给视图的变量数量存在问题。在您创建要传递给视图的变量之前，Rails 似乎非常简单。除了将变量创建线放入控制器并通过将一些查询点点滴滴放入模型中使其“更瘦”之外，我看不出您还能如何做到这一点。

在模型中创建变量然后让控制器将这些变量传递给视图的地方我是否遗漏了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T18:14:35.403

在 Activerecord 中编写查询的更惯用的方式可能是：

```
class Transaction < ActiveRecord::Base
  def self.within(start_date, end_date)
    where(:date => start_date..end_date)
  end

  def self.total_credit
    sum(:credit)
  end

  def self.total_debit
    sum(:debit)
  end
end 
```

这意味着在您的控制器中发出 3 个查询，如果您创建数据库索引并将事务数量和时间范围限制在合理的范围内，这应该不是什么大问题：

```
@transactions = Transaction.within(start_date, end_date)
@total = @transaction.total_credit - @transaction.total_debit 
```

最后，您还可以使用 Ruby 的[Enumerable#reduce](http://www.ruby-doc.org/core-1.9.3/Enumerable.html#method-i-reduce)方法通过直接遍历从数据库检索到的事务列表来计算您的总数。

```
@total = @transactions.reduce(0) { |memo, t|  memo + (t.credit - t.debit) } 
```

对于非常小的数据集，这可能会提高性能，因为您只会访问数据库一次。但是，我认为第一种方法更可取，当数据库中的记录数开始增加时，它肯定会提供更好的性能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T16:42:14.173

> 我正在为 x 和 y 输入 params[:year_start]/params[:year_end]，这样做安全吗？

您永远不应该`params[:anything]`直接嵌入到查询字符串中。而是使用这种形式：

```
where("date BETWEEN ? AND ?", params[:year_start], params[:year_end]) 
```

> 我的实际报告可能有接近 5 次数据库调用，然后对这些变量进行 6 或 7 次计算，我是否应该只查询一次日期范围，然后对数组/哈希等进行所有工作？

这有点主观，但我会给你我的意见。通常，扩展应用程序层比扩展数据库层更容易。您目前是否遇到数据库性能问题？如果是这样，请考虑将逻辑移至 Ruby 并将更多资源添加到您的应用程序服务器。如果没有，也许现在担心这个还为时过早。

> 我真的没有看到如何将大部分工作/计算放入模型中，我了解范围，但是您如何将日期范围放入范围并仍然使用 GET 参数？

你见过[has_scope](https://github.com/plataformatec/has_scope)吗？这是一个很棒的 gem，可让您在模型中定义范围并让它们自动应用于控制器操作。我通常将其用于过滤/搜索，但似乎您可能有一个很好的用例。

> 如果您可以举例说明通过广泛的数据库调用创建数组，然后对该数组进行各种计算，然后将这些变量传递给模板，那就太棒了。

这不适合 Stack Overflow，而且与您在标准 Rails 应用程序中所做的工作相差无几。我会阅读 Rails 指南和一本 Ruby 书，这并不难理解。

# css - 调整页面大小时将 div 块保持在页面中心

> ID：15463159
> 
> 赞同：1
> 
> 时间：2013-03-17T16:25:32.730
> 
> 标签：css, resize

我想拥有它，所以当我的页面调整大小时，“块”会自动相互排列，这样它们就可以完美地适应页面，但是当它们下拉“主”div时，它们也会调整大小，所以没有剩余右侧的空间，所以它仍然看起来不错？

非常感谢你的帮忙！

## HTML

```
<html>
    <head>
        <!-- css -->
        <link rel="stylesheet" type="text/css" href="main.css">
        <title></title>
    </head>
    <body>
        <div class="main">
                <div class="box"></div>
                <div class="box"></div>
                <div class="box"></div>
                <div class="box"></div>
                <div class="box"></div>
                <div class="box"></div>
                <div class="box"></div>
                <div class="box"></div>
        </div>
    </body>
    </html> 
```

## CSS

```
body
{
    background-color: #000;
}

.main
{
    width: 90%;
    height: 1000px;
    background-color: #fff;
    margin-right: auto;
    margin-left: auto;
    margin-top: 75px;
    margin-bottom: 75px;
}

.box
{
    width: 200px;
    height: 300px;
    background-color: #000; 
    position: relative;
    left: 10px;
    float: left;
    margin-right: 5px;
    margin-left: 5px;
    margin-top: 10px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T17:01:31.483

无法使用内部浮动或`display: inline-block`.

但是有很多 media-queries 的解决方法`@media all and (max-width: xxx)`。

见[http://jsfiddle.net/QvAwa/1/](http://jsfiddle.net/QvAwa/1/)

如果要覆盖更高的屏幕宽度，则必须扩展媒体查询的数量。

这适用于 IE9+、FF3.5+、Chrome4+

# windows-phone-8 - 什么是 Windows Phone 运行时？

> ID：15463161
> 
> 赞同：2
> 
> 时间：2013-03-17T16:25:57.097
> 
> 标签：windows-phone-8

我一直将“运行时”理解为应用程序运行的时间点。但是，观看 Microsoft Academy 的视频时，他们提到了“Windows Phone 运行时和 API”。

它被称为 Windows Phone 运行时是因为您的应用程序与 Windows Phone 操作系统交互 - 它显然正在运行，因此是“运行时”？还是我错过了重点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T18:02:20.733

Windows Phone 运行时是一个 API，类似于用于 Windows Phone 的 .NET。看看 MSDN：

[http://msdn.microsoft.com/library/windowsphone/develop/ff626516(v=vs.105).aspx](http://msdn.microsoft.com/library/windowsphone/develop/ff626516(v=vs.105).aspx)

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207212(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207212(v=vs.105).aspx)

# c# - 在同一个解决方案/项目中混合 .NET 3.5 和 4/4.5 程序集

> ID：15463163
> 
> 赞同：2
> 
> 时间：2013-03-17T16:25:58.110
> 
> 标签：c#, .net, compiler-construction, clr

我有一个解决方案，大多数项目都是在 .net 4.5 中编译的（我使用异步和任务）。
有几个项目需要在 .net 3.5 中编译，因为它们使用仅支持 .net 3.5 的 SDK。
如果我的“Common”项目是在 4.5 中编译的，并且我有一个需要它的目标框架为 3.5 的项目，是否可以添加对 Common 的引用？（例如，我的记录器接口在 Common，我通过 DI 得到它）。

谢谢。

输出：

```
could not be resolved because it was built against the ".NETFramework,Version=v4.5" framework. This is a higher version than the currently targeted framework ".NETFramework,Version=v3.5". 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T16:28:40.887

正如编译器告诉你的那样，这是不可能的。您可以尝试将您的“通用”库分成两部分，一个为 4.5 构建，另一个为 3.5 框架构建。

# javascript - 用等效的 Javascript 替换 jQuery 代码

> ID：15463169
> 
> 赞同：2
> 
> 时间：2013-03-17T16:26:52.307
> 
> 标签：javascript, jquery

我知道一点**jQuery**，即使它仍然是 javascript，我不知道如何将以下代码转换为纯 Javascript：

```
$('#breadcrumbs .category[href="http://asksomeone.co.za/category/products"]')
    .attr('href','http://myurl.com/803-2'); 
```

我该怎么做？

我这样做的原因是因为我使用的是 Wordpress 主题......每当我包含**jQuery**库时，它会破坏我网站上的很多东西，当我不包含 jquery 库时，没有 jquery 代码运行......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T16:34:27.007

如果您愿意放弃对 Internet Explorer 7 的支持，您可以这样做

```
var i, elems = document.querySelectorAll('#breadcrumbs .category[href="http://asksomeone.co.za/category/products"]');

for (i = 0; i < elems.length; i++) {
   elems[i].href = 'http://myurl.com/803-2';
} 
```

否则，恐怕你最好使用图书馆。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T16:42:27.280

正如其他人所提到的，您可能只想尝试解决库冲突。

要回答您的问题，这里有一种可能性：

```
var elements = document
    .getElementById('breadcrumbs')
    .getElementsByClassName('category'); //Not supported below IE9 :-(

for (var i = 0; i < elements.length; i++) {
    if (elements[i].href == "http://asksomeone.co.za/category/products") {
        elements[i].setAttribute('href', "http://myurl.com/803-2");
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T16:31:09.057

jQuery 的选择器基于 sizzle：[http](http://sizzlejs.com/) ://sizzlejs.com/也许你可以包含那个库？如果没有，你的问题的第一部分是相当困难的。

第二部分很简单：

```
myElement.setAttribute('href','http://myurl.com/803-2'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-17T16:38:01.440

$ 只是 jQuery 的别名。你可以只使用：

```
jQuery('#breadcrumbs .category[href="http://asksomeone.co.za/category/products"]').attr('href','http://myurl.com/803-2'); 
```

或者将代码包装在通过 jQuery 传递的自执行函数中，例如：

```
(function($){
     $('#breadcrumbs .category[href="http://asksomeone.co.za/category/products"]').attr('href','http://myurl.com/803-2');
})(jQuery); 
```

如果你真的想走纯js路线，那就看看：

```
document.getElementById() 
```

和

```
element.setAttribute() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-17T17:05:54.847

If you don't like to include jQuery library for url change. We need following functions

```
function getByClassName( className , selector ) {
    selector = selector || document;

    if( selector.getElementsByClassName ) {
        return selector.getElementsByClassName( className );
    }

    var els = [];

    var childs = selector.getElementsByTagName( '*' );

    for( var i = 0, j = childs.length; i < j; i++ ) {
        if( childs[i].className.indexOf( className ) > -1 ) {
            els.push( childs[i] );
        }
    }
    return els;
};

function changeUrl( els ,  url , newUrl  ){

    for( var i = 0; i < els.length ; i++ ){

        if ( els[i].href == url ) {
                els[i].href = newUrl ;
        }
    }

} 
```

and call the function

```
changeUrl ( 
  getByClassName( 'category' , document.getElementById('breadcrumbs')  ) , 
  "http://asksomeone.co.za/category/products" , 
  "http://myurl.com/803-2"
); 
```

or If you are using jQuery library .. use this

```
(function( JQ ){

    JQ('#breadcrumbs .category[href="'
        + 'http://asksomeone.co.za/category/products"]')
       .attr('href',"http://myurl.com/803-2");

})( jQuery ); 
```

# vhdl - 测试用 VHDL 编写的 8 位 LFSR 时出错

> ID：15463174
> 
> 赞同：1
> 
> 时间：2013-03-17T16:27:34.020
> 
> 标签：vhdl

我是第一次使用所以请多多包涵。

我们必须为分配进行的简单游戏的一部分涉及以 8 位 LFSR 的形式编写伪随机数生成器。我正在使用 Xilinx ISE、我的笔记和此处提供的示例代码编写代码：

[http://www.oocities.org/siliconvalley/screen/2257/vhdl/lfsr/lfsr.html](http://www.oocities.org/siliconvalley/screen/2257/vhdl/lfsr/lfsr.html)

现在代码确实合成了，但给了我关于敏感度列表的警告。然而，当我运行测试台时，我得到了 pseudo_rand 的所有 U 值。我意识到这个随机数生成器将是内部的，因此不应该有输出，但是当我使用 pseudo_rand 作为信号编写代码时（该变体当前已被注释掉），它不会出现在模拟中。

下面是 LFSR 的代码，后面是相应测试台的代码：

```
library IEEE;
use IEEE.STD_LOGIC_1164.ALL;

entity LFSR_3_16_2013 is
port(       clk:            in  std_logic;
            rst:            in  std_logic;
            pseu_rand:  out std_logic_vector(7 downto 0));
end LFSR_3_16_2013;

architecture Behavioral of LFSR_3_16_2013 is
--signal        clk:            std_logic;
--signal        rst:            std_logic;
signal          seed:           std_logic_vector(7 downto 0):= "10000000";
signal          biffer:         std_logic_vector(7 downto 0); 
--signal        pseu_rand:      std_logic_vector(7 downto 0);

begin

lfsr : PROCESS(clk,rst)
begin
    if(rst='0') then
    --pseu_rand <= seed;

    biffer      <= seed;
    pseu_rand   <= biffer; 

    elsif (clk'event and  clk='1') then 
    --pseu_rand(0)              <= pseu_rand(7) xor pseu_rand(6);                      
    --pseu_rand(7 downto 1)     <= pseu_rand(6 downto 0); 

    biffer(0)                   <= biffer(7) xor biffer(6);                      
    biffer(7 downto 1)          <= biffer(6 downto 0); 
    pseu_rand                   <= biffer;

    end if;

    end process lfsr;
end Behavioral; 
```

现在是测试台：

```
LIBRARY ieee;
USE ieee.std_logic_1164.ALL;

ENTITY LFSR_tb_3_16_2013 IS
END LFSR_tb_3_16_2013;

ARCHITECTURE behavior OF LFSR_tb_3_16_2013 IS 

    -- Component Declaration for the Unit Under Test (UUT)

    COMPONENT LFSR_3_16_2013
    PORT(
         clk       : IN  std_logic;
         rst       : IN  std_logic;
         pseu_rand : OUT  std_logic_vector(7 downto 0)
        );
    END COMPONENT;

   --Inputs
   signal clk : std_logic := '0';
   signal rst : std_logic := '0';

    --Outputs
   signal pseu_rand : std_logic_vector(7 downto 0);

   -- Clock period definitions
   constant clk_period : time := 10 ns;

BEGIN

    -- Instantiate the Unit Under Test (UUT)
    uut: LFSR_3_16_2013 PORT MAP (
          clk => clk,
          rst => rst,
          pseu_rand => pseu_rand
        );

   -- Clock process definitions
   clk_process :process
   begin
        clk <= '0';
    wait for clk_period/2;
    clk <= '1';
    wait for clk_period/2;
   end process;

   -- Stimulus process
   stim_proc: process
   begin        
      -- hold reset state for 100 ns.
      wait for 100 ns;  

      wait for clk_period*10;

      -- insert stimulus here 
      rst <= '1';

      wait;
   end process;

END; 
```

任何帮助将不胜感激，我很难过。

谢谢，尤西夫·努里扎德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T18:52:59.640

敏感度列表告诉进程它必须“唤醒”哪些操作。这意味着，您的进程只会对*clk*或*rst*信号的活动做出反应。因此 pseu_rand 在第一个时钟沿出现之前都是“U”。这实际上不是可合成代码的问题。但是，如果您想更改它，请将*种子*和*分叉*添加到您的敏感度列表中。

```
lfsr : PROCESS(clk,rst,seed,biffer) 
```

顺便提一句。如果您使用（注释掉的）信号解决方案，您可以直接使用*种子*定义 pseu_rand而不是超过*biffer* ...因此它从一开始就在您的模拟中定义！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-12T20:26:25.300

我认为发生的事情是当您取消注释与 pseu_rand 相关的代码时，您在重置期间分配了两次值。

```
pseu_rand <= seed; 
```

和

```
pseu_rand <= biffer; 
```

在流程语句的评估期间，最后一个分配将覆盖并发信号的先前分配。结果，“pseu_rand”将在第一次重置后得到“U”，因为“biffer”在开始时没有定义。

要解决此问题，只需删除 pseu_rand 的第二个分配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-12T21:25:10.433

您当前的敏感度列表问题是由于种子异步加载到 biffer 和 biffer 到 pseu_rand。你可能不想要这些。

您将 Seed 用作常量，因此将其设为一个。这修复了第一个异步加载：
常量种子：std_logic_vector(7 downto 0):= "10000000";

要修复第二个，在此过程中删除两个分配：pseu_rand <= biffer;

现在在进程之外，添加赋值：pseu_rand <= biffer;

全部做完。

吉姆

# javascript - Require.js 需要上下文

> ID：15463175
> 
> 赞同：0
> 
> 时间：2013-03-17T16:27:34.053
> 
> 标签：javascript, scope, requirejs, require

假设我在 require 语句中时需要**测试变量。**如果存在，为了访问我需要的变量，哪种方法是最好的？有没有办法改变上下文？

```
 somefunction: function(id) {
        var test ="xxx";
        require(['models/Model', 'views/View'], function(ArticleModel, ArticleView) {
            var collection = new Collection();
// I need to access the TEST variable HERE
        });
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T17:15:08.373

在您包含的示例中，您将能够使用“test”变量，因为它是在包含对 require() 调用的范围内定义的。

这是另一个 StackOverflow 答案，它更详细地解释了这[一点——JavaScript 闭包如何工作？](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)

# javascript - 根据条件插入文本、属性和路径

> ID：15463177
> 
> 赞同：0
> 
> 时间：2013-03-17T16:27:50.050
> 
> 标签：javascript, jquery, attributes, replace, conditional

我想使用数组中的值来填充网页。这些值应该替换跨度之间的文本（这已经有效），但同时数组中的一些值应该用作属性和文件路径的一部分。最后，只有在值与条件匹配时才应替换某些内容。

**以各种方式插入数组数据——如何实现？**

这是 HTML 部分：

```
<p><b><span class="weather">weather here</span></b> and 
<span class="temperature">temperature here</span>.</p>
<p><i><span class="color">color here</span></i>.</p>
Here follows is an image loaded according to the data
<img src="fixed_path#weather"></img>. And this should 
have the proper <span color="#color">hue</span>.
<span class="warning"></span> 
```

这是 jQuery Javascript 部分（jsfiddle 链接如下）：

```
var arr = {
    "weather": "cloudy",
    "color": "#880000",
    "temperature": "hot"
};

$.each(arr, function (key, value) {
    $('.'+key).replaceWith(value);
    // how to replace src path?
    // how to replace text attribute?
    // make the following conditional
    // if($.inArray("temperature.hot", arr) > !=1) {
        $('.warning').replaceWith('Warning!');
    // }
}); 
```

[jsFiddle 链接](http://jsfiddle.net/gzuDQ/34/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T08:42:43.220

好的，我已经弄清楚了。我了解到我正在处理的并不是真正的关联数组（它们不像 Javascript 中的字符串那样存在），而是对象和属性。因此可以使用“objectname.property”来选择它们。

这是解决方案（jsFiddle可以在下面找到）：

CSS：

```
.colortext {
    color: #00ff00;
} 
```

HTML：

```
<p><b><span class="weather">weather here</span></b> and 
<span class="temperature">temperature here</span>.</p>
<p><i><span class="color">color here</span></i>.</p>
Here follows is an image loaded according to the data
<img src="" class="imagepath"></img>. And this should 
have the proper <span class="colortext">hue</span>.
<span class="warning">No extreme weather.</span> 
```

Javascript（jQuery）：

```
var arr = {
    "weather": "cloudy",
    "color": "#880000",
    "temperature": "normal",
    "imgagepath": "/path/to/image/"
};

$.each(arr, function (key, value) {
    $('.'+key).replaceWith(value);
    $('.imagepath').attr('src', arr.imagepath);
    $('.colortext').css('color', arr.color);
    if (arr.temperature == 'hot') {
        $('.warning').replaceWith('Heat warning!');
   }
        if (arr.temperature == 'cold') {
        $('.warning').replaceWith("It's freezing.");
   }
}); 
```

[jsFiddle](http://jsfiddle.net/jstweaker/uSSQb/)

# xcode - 如何修复 PCH 错误？

> ID：15463179
> 
> 赞同：134
> 
> 时间：2013-03-17T16:28:01.113
> 
> 标签：xcode, clang, precompiled-headers

当我尝试在 中构建我的应用程序时`Xcode`，我收到以下错误消息：

> 从不同于编译器 ((clang-425.0.27)) 的分支 ((clang-425.0.24)) 构建的 PCH 文件

以前没有发生过，但这是更新 Xcode 后的第一次构建。

其他应用程序可以工作，但不是这个特定的应用程序。

如果我关闭`"Precompile Prefix Header"`设置，它可以工作。

如何修复此错误并仍然保持该设置？

* * *

## 回答 #1

> 赞同：249
> 
> 时间：2013-03-17T16:31:16.787

这通常是一个缓存问题。通常可以通过按住*Option*键并选择**Product > Clean Build Folder...来解决。**

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2015-05-06T19:52:40.970

删除`DerivedData`项目的文件夹。查看 Xcode 首选项 -> 位置以查看保存位置。

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2013-03-19T20:54:17.343

似乎**Product > Clean Build Folder...**（按下 Option 键）适用于大多数人。请参阅@gaige 选择的答案。

如果您与大多数人（包括我自己）不同，这仍然会给您带来麻烦，XCode 可能会将您共享的预编译头文件留在其他地方。对我来说，它们位于与此类似的文件夹中：

```
/var/folders/<some random two characters>/<some random string>/C/com.apple.Xcode.502/SharedPrecompiledHeaders 
```

我刚刚删除了整个 SharedPrecompiledHeaders 文件夹，这为我解决了问题。不过，我不会在这里碰太多其他东西……

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2015-12-09T20:48:19.500

转到 Xcode Preferences->Locations（如 wcochran 的回答中所述）并简单地重命名您的 DerivedData 文件夹。我只是将我的从“DerivedData”更改为“DerivedData2”，这迫使系统停止引用旧位置。当其他答案都不起作用时，这为我解决了这个问题。见图片：

[![在此处输入图像描述](../Images/241518ac31001d8f75f9b1f5fcb83d75.png)](https://i.stack.imgur.com/SD3bs.png)

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2015-06-22T01:18:57.300

其他选项都不适合我，这是修复它的方法：

我删除了缓存文件夹`/Users/(Yourname)/Library/Developer/Xcode/DerivedData/ModuleCache/`（重命名也可以）。

如果您的错误看起来像这样，请尝试删除错误中提到的文件夹：

`PCH was compiled with module cache path '/Users/User/Library/Developer/Xcode/DerivedData/ModuleCache/75YIWZVTEAO8', but the path is currently '/Users/Stan/Library/Developer/Xcode/DerivedData/ModuleCache/75YIWZVTEAO8`

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2018-01-04T22:38:18.897

在您的 ios 项目目录中，转到*构建*和删除*ModuleCache*文件夹。再次运行`react-native run-ios`，它应该按预期工作。概括 -`rm -rf ios/build/ModuleCache`

* * *

## 回答 #7

> 赞同：13
> 
> 时间：2015-05-15T18:42:46.030

从 Finder 中的项目位置删除`Build`和文件夹对我有用。`DerivedData`

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2016-12-11T05:07:23.347

我在尝试使用 Swift Package Manager 构建项目时遇到了这个错误。

解决办法就是删除`.build`目录。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2013-05-14T15:39:37.060

升级 Xcode 后，我在多个项目中得到了这个。清洁构建文件夹和清洁没有效果 - @sedes 回答和 @josema.vitaminew 的评论对我有用。但这可能会很棘手，除非你有点狡猾，所以这里有一个一步一步的捷径：

1.  转到失败的构建日志
2.  使用 cmd-f "SharedPrecompiledHeaders" 找到它（它将在一个巨大的可怕复杂命令行的中间）
3.  拖动选择文本“SharedPrecompiledHeaders”和之前但不是之后的所有字符，直到您到达该路径位的开头（仍在大文本块的中间），例如：“/var/folders/03 /n71d4r551jv40j5nb8r9fjy80000gn/C/com.apple.Xcode.501/SharedPrecompiledHeaders
4.  打开查找器
5.  菜单：前往 -> 前往文件夹...
6.  复制/粘贴选定的路径
7.  在“SharedPrecompiledHeaders”中删除所有子文件夹（这是安全的：它只是缓存的数据）

...现在您的所有项目都将“固定”，但必须在第一次零缓存的情况下重新构建自己（因此 NEXT 构建只会比正常慢）。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2013-04-24T09:02:00.933

特别是如果您从命令行构建或者您有构建脚本，那么清理 xcode 目标是不够的。您已删除此文件夹。

预编译的头文件位置可以在

```
Target -> build settings => "Build locations" -> Precompiled headers cached path 
```

删除此文件夹，

```
#rm -fr SharedPrecompiledHeaders 
```

![在此处输入图像描述](../Images/a4351ab68bd4b1c80a21bdee4a918bc0.png)

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2014-10-14T18:25:55.233

就我而言，我以这种方式摆脱了**SharedPrecompiledHeaders**下的所有文件，一切都开始正常工作：

```
sudo find /var/folders/ -type d -name "SharedPrecompiledHeaders" | xargs -n 1 -I dir sudo find dir -name \* -type f -delete 
```

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2017-08-06T15:01:17.877

对我来说，当我将项目复制到另一个位置时，总会发生这种情况。我会这样做以将其推入回购或其他东西。

我必须删除旧位置和新位置中的 Build 文件夹 (rm -rf Build/) 才能使其正常工作。这是有道理的，因为 Build 文件夹将包含与新位置无关的数据。

在这种情况下，清理派生数据或删除 sharedPrecompiledHeaders 文件夹并没有真正做到这一点。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2013-03-22T07:04:50.577

如果不通过清洗解决。这是一个构建缓存问题 - 按住 Option 键并导航到 Product > Clean Build Folder。这解决了我的问题。

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2016-08-20T05:32:55.793

在我的情况下，Xcode 在我的项目主包中创建 DerivedData 文件夹（/Users/Path_to_your_project_source_code/YourProjectName/DerivedData）

我刚刚从我的源代码包中删除了这个文件夹，现在它可以工作了。

要检查转到 Xcode Preferences->Locations 并查看 DerivedData 是否选择为“Relative”。见下图 [![在此处输入图像描述](../Images/77d8831a55e5d0f9ae2242b2185ec893.png)](https://i.stack.imgur.com/v4iII.png)

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2013-03-20T05:49:29.987

你应该按住“shift + command + C”，然后你会构建成功

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2013-03-23T19:01:30.983

您可以尝试清理产品或构建文件夹：

`SHIFT`+ `COMMAND`+`K`

`OPTION`+ `SHIFT`+ `COMMAND`+`K`

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2013-04-01T15:23:02.430

清理和/或删除派生数据对我不起作用。起作用的是触摸/保存 .pch 文件（添加一个字符，然后删除它）以强制重建它。这成功了。

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2013-04-19T06:16:06.410

如果进行干净的构建对您不起作用，请在其中查找 PCH 文件`/var/folders/../SharedPrecompiledHeaders`并删除对我有用的 PCH 文件。

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2016-06-22T08:40:56.387

**更新**

这对我来说非常有效：

*   关闭您的项目或工作区。
*   在 Finder 中：⇧shift+⌘cmd+G
*   粘贴：~/Library/Developer/Xcode/DerivedData/
*   删除 ModuleCache 文件夹并清空垃圾箱。
*   打开你的项目。
*   清理：⇧shift+⌘cmd+K
*   构建：⌘cmd+B

xCode 7.3.1
参考[这里](https://ungacy.atlassian.net/wiki/display/IOS/PCH+was+compiled+with+module+cache)

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2018-12-13T19:24:48.227

如果您正在通过 进行命令行构建`xcodebuild`，请查看是否`-derivedDataPath BUILD_DIR`使用了该选项。如果是这样，您的 ModuleCache.noindex 目录将位于 BUILD_DIR 而不是正常的 Xcode 位置。删除 ModuleCache.noindex 目录，一切就绪。

我遇到这种情况是因为我正在构建一个 React Native 应用程序，而 iOS 客户端通常是通​​过 React Native 工具集从命令行构建的。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2015-12-10T08:33:51.600

我已经尝试清理项目并清理两者都不起作用的构建文件夹。

之后，我完全退出 xCode，在其标准位置删除派生数据文件夹：~/Library/Developer/Xcode/DerivedData，再次启动 xCode 并构建项目。

这似乎为我解决了这个问题。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2019-06-21T14:42:26.550

我刚刚删除`DerivedData`并为我工作。

# python - HDFStore select_as_multiple 生成器

> ID：15463183
> 
> 赞同：1
> 
> 时间：2013-03-17T16:28:31.350
> 
> 标签：python, pandas, generator, hdf5

**问题：**如何创建一个生成器，允许对 pandas HDFStore 对象中的多个列进行迭代？

我正在尝试为 pandas HDFStore 对象创建一个包装类。我试图实现的功能之一是能够通过给定的块大小迭代 HDFStore 中的列组。许多机器学习算法可以运行`on-line`并且不需要一次所有的数据。

我的第一次尝试是创建一个生成器函数并将开始和停止参数传递给 HDFStore 的 select 方法：

```
def iterate(self, key, chunksize=50000):
    node = self.store.get_node(key)
    nrows = node.table.nrows
    current = 0
    while current < nrows:
        yield self.store.select(key, start=current, stop=current+chunksize)
        current += chunksize 
```

这很好用，我可以遍历存储中的*单个*存储列。请注意，为了进行测试，我将每一列都存储在自己的表中。

我的下一步是使用`HDFStore.select_as_multiple`. 虽然不在文档字符串中，但`select_as_multiple`似乎也接受了 start 和 stop 参数：

```
>>> store.select_as_multiple(keys='MachineID', start=0, stop=50000)

<class 'pandas.core.frame.DataFrame'>
Int64Index: 50000 entries, 0 to 49999
Data columns:
MachineID    50000  non-null values
dtypes: int64(1) 
```

按照要求，只返回了 50,000 行。但是，当我传递超过 1 个键/列时，该方法会拉回所有行：

```
>>> store.select_as_multiple(keys=['MachineID','YearMade'], start=0, stop=50000)

<class 'pandas.core.frame.DataFrame'>
Int64Index: 401125 entries, 0 to 1124
Data columns:
MachineID    401125  non-null values
YearMade     401125  non-null values
dtypes: int64(2) 
```

是否可以使用`select_as_multiple`拉回指定范围的行而不是所有行？

**版本信息：**

```
>>> pd.__version__
'0.10.1'

>>> tables.__version__
'2.4.0' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T18:55:44.103

它不起作用，因为没有将开始/停止传递给底层选择。很容易修复。

还意味着添加迭代器支持，将窃取您的功能:)

完成 [https://github.com/pydata/pandas/issues/3078](https://github.com/pydata/pandas/issues/3078)

有文档，但本质上是：

```
for df in store.select('df',chunksize=10000):
    print df 
```

# c# - 实体框架 - DbMigrator 不执行迁移类

> ID：15463188
> 
> 赞同：2
> 
> 时间：2013-03-17T16:28:43.903
> 
> 标签：c#, asp.net, .net, entity-framework, entity-framework-5

我在使用 DbMigrator 执行迁移时遇到问题，不知何故迁移类没有执行，当然也没有反映在数据库中。

我要实现的是将我的迁移分组到版本。基本上我有一个 Version 基类，其中所有版本都派生自。

例如，我有一个对应于版本 1.0.0.0 的类 Version1000。

版本类有一个名为 ExecuteMigrations 的方法，它负责执行与其对应的版本相关的迁移。

这是版本类的示例（1.0.0.0 的版本 1000），请参阅使用 DbMigrator 的 ExecuteMigrations 方法，它还使用派生自 DbMigrationsConfiguration 的 VersionConfiguration 类，它在那里我设置命名空间、目录、ContextType.. ETC..

```
public class Version1000 : Version
{
    public override string VersionNumber
    {
        get { return "1.0.0.0"; }
    } 

    public static Version Version
    {
        get
        {
            return new Version1000();
        }
    }

    public override void ExecuteMigrations()
    {
        var configuration = new VersionConfiguration();
        configuration.TargetDatabase = new DbConnectionInfo(MyCustomContext.CONTEXT_CONNECTION_STRING_NAME);
        var migrator = new DbMigrator(configuration);
        migrator.Update();
    }
} 
```

版本配置类

```
class VersionConfiguration : DbMigrationsConfiguration<MyCustomContext>
{
    public VersionConfiguration()
    {
        AutomaticMigrationsEnabled = false;
        MigrationsNamespace = "Some.Namespace._1000";
        MigrationsDirectory = "Migration\\1000";
        ContextType = typeof(MyCustomContext);
    }

    protected override void Seed(MyCustomContext context)
    {
        base.Seed(context);
    }
} 
```

在我的应用程序的应用程序启动时，我所做的是检查我的数据库的当前版本，然后应用未应用于当前数据库的版本。这是通过调用版本类的 ExecuteMigrations 方法来完成的。

问题是我没有得到任何异常，只是当调用 DbMigrator.Update 方法时更改不会反映到数据库中，并且在 DbMigrationsConfiguration 中设置的文件夹/命名空间中的迁移类从未执行过。

应用程序类型：ASP.NET MVC 4 .NET 框架：4.5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T14:53:15.160

您的迁移还应实现 IVersionMetadata 并且必须提供 Id、Source 和 Target 属性。它们应该具有类似于以下的值：

```
Id = string.Format("{0}_{1}", SomeSequenceNumber.ToString().PadLeft(15, '0'), "Name")
Source = null
Target = "H4sIAAAAAAAEAL1Y23LbNhB970z/gYOn9iGCJEdJ66GSsWW78bSyO6aT1wxErmRMcGEJ0BX7a33oJ/UXuryKF11o2e6bCKx2z1lwD47079//uB/XUjiPEBmu1ZSMBkPigPJ1wNVqSmK7fPMT+fjh++/cy0CunS9l3Ekah99UZkoerA1PKTX+A0hmBpL7kTZ6aQe+lpQFmo6Hw5/paEQBUxDM5TjuXawsl5A94ONMKx9CGzMx1wEIU6zjjpdldW6YBBMyH6Zknpzzv4hzJjjD4h6IJXHCt6efDXg20mrlhcxyJu6TEHB/yYSBAupp+LYv2uE4RUuZUtpiOq2OYksqHsjkEhnbBJlaxhVEGaUpORdMfUsXYW3r4dUXPLBF6CdurI4S4uQbKcGc/6DYudN/Yiven14bLzEW5JTYKN6Qf98L/GhMR8OMvOSrKONuiEPrTGiLSpdliq2JOsf2bhe2d8djazbtV0i2lGnEYNTvkQ4hsskdLAuY8zLhdbAVJz2cojhFRNAjg0sxrrlSZtyGqDhsG+FYEmfO1r+BWtmHKRlPJsS54msIypXijf+sOE4xlNVvYiHYQkC1fxhhC0+d3k44k9H4f4KTCUWJ5Jwrlk5GDQl+3I7k+aXxMYh9W4jhnm6cvE4zygFM626UkuZSWUoq3aGp7pyFIQKtaWyx4ni5wM7eeE9XO5nnoL7ZJ3pVJZQEtoLWbvqOBXDFI2MvmGULlvZiFshOWB/RLEu1tPP1JaghgiWK9HOOJK89SAkO8rhBNemmVPLBftVs1dsc4RV2VYKyWYOh6sUhFe7kyy5eJli0T5NmWsRSHSefu0vUZaZe4UnqupdDLhwN9PnSs9K2RaGev73Xq5BLW4fafsto5zVr3TDtWdh3h7dDquqVnrR0wy1m+LBh6wx1HkIcbMsjD9KBrg+F94eYCY58NwFzpvgSjL3X3wDNZzqFLQN4hDmjxgSih0PralIvm5aN2l6nlrdhSoKFxjskvwC+fq0m6XUl66Uc3WQXtsmLOrpOmac6ui7Opzq6QxmOcnTqkUX+A4u6nq5rCg4COGjYtlbLLNvzqzX8GNZZZJbsB8nWP75E+u2eayuhkyP49LNUXclzaf2XrHsBhq8285P+rlXgp0e+SVrGXKulLkmietTBlCHtFoNlAYrQWWT5kvkWt30wJnOdX5iIMeRSLiC4VrexDWN7ZgzIhUjqVF26v37mG5uY3dswm8uXoIAwOVKAW3UecxFUuK/yU6I9UqR6/AvgejZK6Lox3SqpMt1o1TNR0b4LCEEFeN/cgwwFJjO3ymOPsBvb4R42O+ZecIaTL02RY/P99I8Vmv6z8uE/KRLfnIsRAAA="; 
```

也许对 Target 参数有一些说明：它包含整个模型的压缩版本。他们希望消除在 EF 中提供 Target 的必要性，但是，即使 EF6 alpha3 仍然需要这样做。上面给出的字符串是一个空模型的压缩格式，我只是把它作为一个常数，它就像一个魅力......

另外：在我的项目中，我的 ID 格式错误，它没有做任何事情。需要尽快在 EF 源代码中找到更多相关信息，但是，现在这可能对您的情况有所帮助！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-17T17:00:49.740

嗯，你的代码看起来很奇怪。实体类或对它们的引用在哪里？1.0.0.0 版本中包含哪些实体/数据库对象？

正如代码优先所说，您必须描述您的实体：

```
using System;
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;
using System.ComponentModel.DataAnnotations.Schema;

namespace StartReg.Data {        
    public class UserSession {
        [Key]
        [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
        public int UserSessionId { get; set; }

        [Required]
        [MaxLength(100)]
        public string UserId { get; set; }

        [ForeignKey("UserId")]
        public virtual User User { get; set; }

        [Required]
        public DateTimeOffset LogonTime { get; set; }

        [Required]
        [MaxLength(40)]
        public string LogonIPAddress { get; set; }

        [Required]
        [MaxLength()]
        public string LogonUserAgent { get; set; }
    }    
} 
```

将其添加到 DbContext：

```
namespace StartReg.Data {
    using System;
    using System.Collections.Generic;
    using System.Data.Entity;
    using System.Data.Entity.Infrastructure;
    using System.Linq;

    public partial class StartRegDb : DbContext {
        public StartRegDb()
            : base("DefaultConnection") {
        }

        public DbSet<Distance> Distances { get; set; }
    }
} 
```

然后当您在包管理器控制台中执行（您是否安装了 NuGet？）命令时`Enable-Migrations`，`Add-Miration Version1000`您将收到迁移配置

```
namespace StartReg.Migrations {
    using System;
    using System.Data.Entity;
    using System.Data.Entity.Migrations;
    using System.Linq;
    using StartReg.Data;

    internal sealed class Configuration : DbMigrationsConfiguration<StartReg.Data.StartRegDb> {
        public Configuration() {
            AutomaticMigrationsEnabled = false;
        }

        protected override void Seed(StartReg.Data.StartRegDb context) {
            //  This method will be called after migrating to the latest version.
        }
    }
} 
```

和 Version1000 迁移类：

命名空间 StartReg.Migrations { 使用系统；使用 System.Data.Entity.Migrations；

```
public partial class Initial : DbMigration {
    public override void Up() {

        CreateTable(
            "dbo.Distances",
            c => new {
                DistanceId = c.Guid(nullable: false),
                MeetingId = c.Int(nullable: false),
                Key = c.String(nullable: false, maxLength: 20),
                Name = c.String(nullable: false, maxLength: 100),
                Ordering = c.Short(nullable: false),
                AllowMale = c.Boolean(nullable: false),
                AllowFemale = c.Boolean(nullable: false),
            })
            .PrimaryKey(t => t.DistanceId)
            .ForeignKey("dbo.Meetings", t => t.MeetingId, cascadeDelete: true)
            .Index(t => t.MeetingId)
            .Index(t => new { MeetingId = t.MeetingId, Ordering = t.Ordering });
    }

    public override void Down() {
        DropTable("dbo.Distances");
    }
} 
```

}

之后，您需要在使用数据库进行任何实际工作之前放置某个位置（例如 Application_Start）：

```
Database.SetInitializer(new MigrateDatabaseToLatestVersion<StartRegDb, StartReg.Migrations.Configuration>()); 
```

当应用程序启动时 - 表距离会自动在数据库中创建。

# java - WebView 和 Nexus Chrome 浏览器的工作方式与我在 PC 上的 Chrome 浏览器不同

> ID：15463189
> 
> 赞同：0
> 
> 时间：2013-03-17T16:28:49.427
> 
> 标签：java, android, url, webview

当我尝试加载此 URL [http://www.shazam.com/music/web/track?id=45759675](http://www.shazam.com/music/web/track?id=45759675) 我的活动加载此其他[http://www.shazam.com](http://www.shazam.com)

这是我的安卓代码：

```
public class SingleMenuItemActivity extends Activity {

    public void onCreate(Bundle savedInstanceState) {

        WebView mWebView;

        super.onCreate(savedInstanceState);
    setContentView(R.layout.single_list_item);
    final ProgressDialog pd = ProgressDialog.show(this, "", getResources()
            .getString(R.string.loading), true);
    mWebView = (WebView) findViewById(R.id.webview);
    mWebView.getSettings().setBuiltInZoomControls(true);
    mWebView.setWebViewClient(new WebViewClient() {
        @Override
        public void onPageFinished(WebView view, String url) {
            if (pd.isShowing() && pd != null) {
                pd.dismiss();
            }
        }
    });
    mWebView.getSettings().setLoadWithOverviewMode(true);
    mWebView.getSettings().setUseWideViewPort(true);
    String weblink = getIntent().getStringExtra("link");

    mWebView.loadUrl(" http://www.shazam.com/music/web/track?id=45759675 ");
}

  } 
```

我的智能手机上的浏览器也会发生相同的行为，但当我从 PC 连接到此 URL 时不会。所有浏览器都是 G Chrome。 **问题：**

1.  为什么会发生
2.  如何避免它并连接到正确的 URL

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T16:42:49.877

看起来 Shazam.com 不允许移动浏览器浏览音乐部分。除非您更改用户代理，否则您无能为力。他们显然有自己的理由禁止移动浏览。如果您希望在您的应用程序中包含 shazam 内容，您应该先与他们联系。

# python - 选择滞后的阈值

> ID：15463191
> 
> 赞同：2
> 
> 时间：2013-03-17T16:29:08.827
> 
> 标签：python, opencv, image-processing, computer-vision

我正在尝试在 的 canny 函数中为滞后阶段选择最佳参数`OpenCV`。我在stackoverflow中发现了一些类似的问题，但它们并没有解决我的问题。到目前为止，我发现有两种主要方法：

1.  计算平均值和标准差并将阈值设置为：lowT = mean - std, highT = mean+std
2.  计算中位数并将阈值设置为：0.6*median, 1.33*median

但是，这些阈值中的任何一个都最适合我的数据。手动，我发现 lowT=100, highT=150 是最好的值。数据（灰度图像）具有以下属性：

中位数=202.0，平均值=206.6283375，标准差=35.7482520742

有谁知道问题出在哪里？或知道我在哪里可以找到有关此的更多信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-07T06:01:03.423

mean、std 等图像统计数据不足以回答这个问题，canny 可能不是最好的方法；这一切都取决于图像的特征。要了解这些特征和方法，您可以谷歌搜索图像分割/边缘检测方法的调查。而这类问题往往涉及一些预处理和后处理步骤。

# jquery - 如何使用 jquery 在锚标记中触发 onclick 事件处理程序

> ID：15463193
> 
> 赞同：0
> 
> 时间：2013-03-17T16:29:18.560
> 
> 标签：jquery, click, awesomium

我有一个带有 onlick 属性的锚标记，其中包含一些 javascript 代码。我需要使用 jquery 或 javascript 来执行这个 javascript。我试图在锚标记元素上调用 click 事件，但没有任何反应。在网站上手动单击锚标记可以正常工作，但我无法通过 jquery 使其工作。

/曼斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T16:31:31.110

如果没有示例代码，我看不出这样的事情不起作用的任何原因：

```
$('#some-link').click(); 
```

一个可能不安全的替代方案是......

```
var oc = $('#some-link').attr('onclick');
eval(oc); 
```

# c# - Windows 8 Metro 应用程序将现有图像转换为字节 []

> ID：15463195
> 
> 赞同：0
> 
> 时间：2013-03-17T16:29:34.760
> 
> 标签：c#

我正在尝试将现有图像（在我的应用程序的按钮内）保存到 byte[]，然后将其保存到 SQLite 数据库。我知道如何使用`FileOpenPicker`加载和转换为`IRandomAccessStream`，我知道如何保存到数据库，但我不知道如何在 Metro 应用程序/Windows UI 中将现有图像转换为字节数组。

我进行了很多搜索，但主要是使用 FileOpenPicker 或使用似乎不适用于 Metro 应用程序的内存流的示例。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T16:34:55.733

您可以使用`Datareader`as

```
 var file = await new FileOpenPicker().PickSingleFileAsync();
    var fStream = await file.OpenAsync(FileAccessMode.Read);

    var reader = new DataReader(fStream.GetInputStreamAt(0));
    var bytes = new byte[fStream.Size];
    await reader.LoadAsync((uint)fStream.Size);
    reader.ReadBytes(bytes); 
```

最后，您可以保存`bytes`到数据库。

此处的另一个示例[将 StorageFile 读取到 C# 中的字节数组](http://amoore.katalyststudios.com/content/reading-storagefile-byte-array-c)

**添加编辑**

WinRT 你需要使用[http://writeablebitmapex.codeplex.com/](http://writeablebitmapex.codeplex.com/)

[WinRT 将图像加载到字节数组中](https://stackoverflow.com/questions/10181046/winrt-loading-an-image-into-a-byte-array)

引用..

> 基本上，您需要将图像加载到 WriteableBitmap 中，然后通过调用 PixelBuffer.AsStream() 访问其像素缓冲区。

# javascript - 如何在 Express 中设置自定义图标？

> ID：15463199
> 
> 赞同：148
> 
> 时间：2013-03-17T16:29:58.920
> 
> 标签：javascript, node.js, express, favicon

我最近开始在 Node.js 中工作，在 app.js 文件中有这一行：

```
app.use(express.favicon()); 
```

现在，如何设置我自己的自定义 favicon.ico？

* * *

## 回答 #1

> 赞同：262
> 
> 时间：2013-03-17T16:32:27.620

## 在快递 4

安装[favicon 中间件](https://github.com/expressjs/serve-favicon)，然后执行：

```
var favicon = require('serve-favicon');

app.use(favicon(__dirname + '/public/images/favicon.ico')); 
```

或者更好，使用`path`模块：

```
app.use(favicon(path.join(__dirname,'public','images','favicon.ico'))); 
```

（请注意，此解决方案也适用于 express 3 应用程序）

## 在快递 3

根据 API，[`.favicon`](http://www.senchalabs.org/connect/favicon.html)接受一个位置参数：

```
app.use(express.favicon("public/images/favicon.ico")); 
```

大多数时候，你可能想要这个（正如 vsync 建议的那样）：

```
app.use(express.favicon(__dirname + '/public/images/favicon.ico')); 
```

或者更好的是，使用该`path`模块（如 Druska 建议的那样）：

```
app.use(express.favicon(path.join(__dirname, 'public','images','favicon.ico'))); 
```

## 为什么*favicon*比*静态更好*

根据[包装说明](https://expressjs.com/en/resources/middleware/serve-favicon.html)：

1.  此模块将图标缓存在内存中，以通过跳过磁盘访问来提高性能。
2.  这个模块提供了一个`ETag`基于图标的内容，而不是文件系统的属性。
3.  该模块将与最兼容的`Content-Type`.

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2015-07-16T16:16:57.093

不需要额外的中间件。只需使用：

```
app.use('/favicon.ico', express.static('images/favicon.ico')); 
```

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2017-04-07T05:58:05.460

不需要自定义中间件？！快递：

```
 //you probably have something like this already    
app.use("/public", express.static('public')); 
```

然后将您的 favicon 公开并在您的 html 头部添加以下行：

```
<link rel="icon" href="/public/favicon.ico"> 
```

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2015-10-11T07:01:47.813

笑脸图标以防止错误：

```
 //const fs = require('fs'); 
 //const favicon = fs.readFileSync(__dirname+'/public/favicon.ico'); // read file
 const favicon = new Buffer.from('AAABAAEAEBAQAAAAAAAoAQAAFgAAACgAAAAQAAAAIAAAAAEABAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAA/4QAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEREQAAAAAAEAAAEAAAAAEAAAABAAAAEAAAAAAQAAAQAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD//wAA//8AAP//AAD8HwAA++8AAPf3AADv+wAA7/sAAP//AAD//wAA+98AAP//AAD//wAA//8AAP//AAD//wAA', 'base64'); 
 app.get("/favicon.ico", function(req, res) {
  res.statusCode = 200;
  res.setHeader('Content-Length', favicon.length);
  res.setHeader('Content-Type', 'image/x-icon');
  res.setHeader("Cache-Control", "public, max-age=2592000");                // expiers after a month
  res.setHeader("Expires", new Date(Date.now() + 2592000000).toUTCString());
  res.end(favicon);
 }); 
```

**更改上面代码中的图标**

可以在这里制作一个图标：http: [//www.favicon.cc/](http://www.favicon.cc/)或在这里： http: [//favicon-generator.org](http://favicon-generator.org)

将其转换为 base64 可能在这里：[http ://base64converter.com/](http://base64converter.com/)

然后替换图标 base 64 值

**一般信息 如何创建个性化的收藏图标**

图标是使用 Photoshop 或 inkscape 制作的，可能是 inkscape，然后是 photoshop 以进行鲜艳度和色彩校正（在图像->调整菜单中）。

快速图标转到[http://www.clker.com/](http://www.clker.com/)并选择一些矢量剪贴画，然后下载为 svg。然后将其带到inkscape（[https://inkscape.org/](https://inkscape.org/)）并更改颜色或删除部分，也许从另一个矢量剪贴画图像中添加一些东西，然后导出选择要导出的部分并单击文件>导出，选择像16x16这样的大小图标或 32x32。进一步编辑 128x128 或 256x256。ico 包内部可以有多种图标大小。它可以与 16x16 像素的 favicon 一起为网站链接提供高质量的图标。

然后也许可以增强 Photoshop 中的图像。像振动，斜面效果，圆形面具，任何东西。

然后将此图像上传到生成网站图标的网站之一。还有一些用于编辑图标的 Windows 程序，例如[https://sourceforge.net/projects/variicons/](https://sourceforge.net/projects/variicons/)。

将网站图标添加到网站。只需将 favicon.ico 作为文件放在域的根文件夹中即可。例如在包含静态文件的公用文件夹中的 node.js 中。它不必像上面的代码那样特殊，只是一个简单的文件。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-08-05T22:25:37.380

```
app.use(express.favicon(__dirname + '/public/images/favicon.ico')); 
```

我让它在本地工作，`__dirname +`但无法在我部署的服务器上工作。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-05-27T16:06:39.467

如果您使用 Express > 4.0，则可以使用[serve-favicon](https://github.com/expressjs/serve-favicon)

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2018-03-16T14:26:35.347

如果您设置了静态路径，那么只需`<link rel="icon" href="/images/favicon.ico" type="image/x-icon">`在您的视图中使用。不需要其他任何东西。请确保您的图像文件夹位于公共文件夹中。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-07-25T03:57:28.883

如果您想要一个不涉及外部文件且不使用的解决方案`express.static`（例如，超轻的单文件网络服务器和站点），您可以使用`serve-favicon`并将您的文件编码`favicon.ico`为 Base64。像这样：

```
const favicon = require('serve-favicon');
const imgBuffer = new Buffer.from('IMAGE_AS_BASE64_STRING_GOES_HERE', 'base64');
// assuming app is already defined
app.use(favicon(imgBuffer)); 
```

替换`IMAGE_AS_BASE64_STRING_GOES_HERE`为将 favicon 文件编码为 Base64 的结果。有很多网站可以在线进行，请搜索。

请注意，您可能需要重新启动服务器和/或浏览器才能看到它在运行`localhost`，并且硬刷新/清除浏览器缓存才能看到它在网络上运行。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-03-10T14:13:56.433

在 app.js 中：

```
app.use(express.static(path.join(__dirname, 'public'))); 
```

假设图标位于“/public/images/favicon.ico”中，在 html 的头部添加下一个链接：

```
<link rel='icon' href='/images/favicon.ico' class='js-favicon'> 
```

这在使用以下命令自动生成的项目中运行良好：

```
express my-project 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-06-02T18:27:28.613

安装`express-favicon`中间件：

```
npm install express-favicon --save 
```

像这样使用它：

```
const favicon = require('express-favicon');
app.use(favicon(__dirname + 'favicon.ico')); 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-07-19T15:22:52.677

您必须安装中间件才能为网站图标提供服务。

我刚才试过这个：

```
app.use(express.favicon(path.join(__dirname, 'public','images','favicon.ico'))); 
```

并收到此错误消息：

> 错误：大多数中间件（如 favicon）不再与 Express 捆绑在一起，必须单独安装。请参阅 [https://github.com/senchalabs/connect#middleware](https://github.com/senchalabs/connect#middleware)。

我认为我们可以认为这是确定的。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-03-17T20:00:44.643

下面列出的代码有效：

```
var favicon = require('serve-favicon');

app.use(favicon(__dirname + '/public/images/favicon.ico')); 
```

只需确保刷新浏览器或清除缓存即可。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-07-30T08:20:26.570

第 0 步：将以下代码添加到 app.js 或 index.js

`app.use("/favicon.ico", express.static('public/favicon.ico'));`

第 1 步：从此处下载图标[https://icons8.com/](https://icons8.com/)或创建您自己的
第 2 步：转到[https://www.favicongenerator.com/](https://www.favicongenerator.com/)
第 3 步: 上传下载的 icon.png 文件 > 设置 16px > 创建 favicon > 下载
步骤 4: 进入下载文件夹, 你会找到 [.ico 文件], 将其重命名为 favicon.ico
步骤 5: 将 favicon.ico 复制到公共目录您创建了
第 6 步：将以下代码添加到您的 .pug 文件中的 head 标签下，在 title 标签下

```
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico"> 
```

第 7 步：保存 > 重新启动服务器 > 关闭浏览器 > 重新打开浏览器 > 出现 favicon

注意：您可以使用 favicon 以外
            的名称，但请确保在代码和公共文件夹中更改名称。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-11-07T16:34:58.667

如果您使用 Express.static 来提供文件夹，只需将 favicon.ico 文件放在该文件夹的根目录中，当浏览器请求它时就会提供该文件。无需在`link`您的 html 中添加标签或在应用程序代码中添加特殊的中间件路由。

如果您使用反向代理，您可能需要为文件指定媒体/mime 类型（[这是 IIS 中的方法](https://docs.microsoft.com/en-us/iis/configuration/system.webserver/staticcontent/mimemap)），但如果您直接导航到您的应用程序，它“正常工作”。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-11-14T07:29:03.897

如果以上都不起作用，你可以试试这个！
**确保您的 favicon.ico 文件位于*public/icons*或相应更改。**
如果未导入**路径，**

```
const path = require('path') ; 
```

然后 ，

```
app.get("/favicon.ico", (req, res) => {
  return res.sendFile(path.join(__dirname + "/public/icons/favicon.ico"));
}); 
```

# android - AsyncTask 中的错误

> ID：15463200
> 
> 赞同：0
> 
> 时间：2013-03-17T16:30:00.053
> 
> 标签：android, error-handling, android-asynctask

嗨，我是 Android 编程新手，建议使用 AsyncTask 进行网络连接。在将它们添加到 doInBackground 之前，我在工作的区域收到错误：

> （前无法解决）- 在 catch 部分

和 onPostExecute：

> 标记 ")" 的语法错误，；预期-for（字符串结果）
> 
> （Toast 类型中的方法 makeText(Context, CharSequence, int) 不适用于参数 (LongOperation, String, int)）- 对于 Toast.makeText

这些错误与我放置代码的位置有关吗？我真的很欢迎任何适合我的代码的答案。

```
package com.example.clearlight;

import android.os.AsyncTask;
import android.os.Bundle;
import android.app.Activity;
import android.widget.TextView;
import android.widget.Toast;

import java.net.URL;

import org.apache.http.client.ResponseHandler;

import org.apache.http.client.methods.HttpGet;

import org.apache.http.impl.client.BasicResponseHandler;
import org.apache.http.impl.client.DefaultHttpClient;

import android.os.StrictMode;
import android.util.Log;

public class MainActivity extends Activity {

    TextView txt;

    @Override
      public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
        StrictMode.setThreadPolicy(policy);

        setContentView(R.layout.relative);

        class LongOperation extends AsyncTask<String, Void, String> { 

            @Override
            protected String doInBackground(String... params) {
            // TODO Auto-generated method stub

            URL url = null;

            DefaultHttpClient httpclient = null;

            try {

            String registrationUrl = "http://10.0.2.2/SensorInfo/GetLightData?sensor=light";
            url = new URL(registrationUrl);

            HttpGet getRequest = new HttpGet(registrationUrl);
            ResponseHandler<String> handler = new BasicResponseHandler();
            httpclient = new DefaultHttpClient();
            // request data from server
            String result = httpclient.execute(getRequest, handler);
            Log.d("MyApp", "Data from server is "+ result);}

            catch (Exception ex) {Log.e("error",ex.toString());
            ex.printStackTrace();

            }

            @Override
            protected void onPostExecute(String result) 
            {               
              TextView text1 = (TextView) findViewById(R.id.text);

            //Sets the new text to TextView (runtime click event)//*******
            text1.setText("Light Data= " + result);

            Toast.makeText(this, "Light Data:" + result, Toast.LENGTH_SHORT).show(); //MESSAGE BOX
            //txtMessage.setText(String.valueOf(msg1) + "  " + String.valueOf(msg2));  
            }

        } 
        }

      }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T16:30:53.770

消除

```
return null; 
```

在开始`doInBackground`方法并关闭此方法时插入右大括号并删除代码的最后一个大括号。

```
@Override
protected String doInBackground(String... params) {
    URL url = null;
    DefaultHttpClient httpclient = null;
    try {
        String registrationUrl = "http://10.0.2.2/SensorInfo/GetLightData?sensor=light";
        url = new URL(registrationUrl);

        HttpGet getRequest = new HttpGet(registrationUrl);
        ResponseHandler<String> handler = new BasicResponseHandler();
        httpclient = new DefaultHttpClient();
        // request data from server
        String result = httpclient.execute(getRequest, handler);
        Log.d("MyApp", "Data from server is "+ result);
    }
    catch (Exception ex) {Log.e("error",ex.toString());
        ex.printStackTrace();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T16:33:44.693

这些只是语法错误，与`AsyncTask`.

格式化您的代码 (Ctrl-Shift-F) 将使解决此问题变得更加容易！

**您在方法之后**缺少一个大括号**`doInBackground`，需要`return null`从头到尾移动。**

 **```
 @Override
    protected String doInBackground(String... params) {
        URL url = null;

        DefaultHttpClient httpclient = null;

        try {

            String registrationUrl = "http://10.0.2.2/SensorInfo/GetLightData?sensor=light";
            url = new URL(registrationUrl);

            HttpGet getRequest = new HttpGet(registrationUrl);
            ResponseHandler<String> handler = new BasicResponseHandler();
            httpclient = new DefaultHttpClient();
            // request data from server
            String result = httpclient.execute(getRequest, handler);
            Log.d("MyApp", "Data from server is " + result);
        } catch (Exception ex) {
            Log.e("error", ex.toString());
            ex.printStackTrace();

        }

       return null;
    } // THIS HERE

    @Override
    protected void onPostExecute(String result) {
        TextView text1 = (TextView) findViewById(R.id.text);

        //Sets the new text to TextView (runtime click event)//*******
        text1.setText("Light Data= " + result);

        Toast.makeText(this, "Light Data:" + result, Toast.LENGTH_SHORT).show(); //MESSAGE BOX
        //txtMessage.setText(String.valueOf(msg1) + "  " + String.valueOf(msg2));
    } 
```

* * *

我检查了你的代码，我认为下面的代码可能有效（虽然我只是在 StackOverflow 上做了这个，但它可能会给你更多的线索，你哪里出错了：

```
 @Override
        protected String doInBackground(String... params) {
            String result = "Failed";
            try {
                String registrationUrl = "http://10.0.2.2/SensorInfo/GetLightData?sensor=light";
                // request data from server
                URL url = new URL(registrationUrl);
                HttpGet getRequest = new HttpGet(registrationUrl);
                DefaultHttpClient httpclient = new DefaultHttpClient();

                HttpResponse response = httpclient.execute(getRequest);
                result = convertStreamToString(response.getEntity().getContent());
                Log.d("MyApp", "Data from server is " + result);
            } catch (Exception ex) {
                Log.e("MyApp", "Failed to load light data", ex);
            }

           return result;
        } // THIS HERE

        @Override
        protected void onPostExecute(String result) {
            TextView text1 = (TextView) findViewById(R.id.text);
            text1.setText("Light Data= " + result);

            Toast.makeText(MainActivity.this, "Light Data:" + result, Toast.LENGTH_SHORT).show();
        }

     public String convertStreamToString(InputStream inputStream) throws IOException {
        if (inputStream != null) {
            Writer writer = new StringWriter();

            char[] buffer = new char[1024];
            try {
                Reader reader = new BufferedReader(new InputStreamReader(inputStream, "UTF-8"),1024);
                int n;
                while ((n = reader.read(buffer)) != -1) {
                    writer.write(buffer, 0, n);
                }
            } finally {
                inputStream.close();
            }
            return writer.toString();
        } else {
            return "";
        }
    } 
```**

# android - 如何在模拟器上测试没有互联网连接程序？

> ID：15463209
> 
> 赞同：0
> 
> 时间：2013-03-17T16:30:45.663
> 
> 标签：android, android-manifest

如果一个android程序有一个只有在没有互联网访问时才会执行的循环，你如何在模拟器上测试它？

删除互联网访问许可表清单可能是一种方法。我敢肯定，其他人以前也遇到过这种情况。有替代方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T16:33:30.603

按下`F8`可切换网络连接。

我在我的模拟器中使用了这个。

请参阅此链接[Android 模拟器](http://developer.android.com/tools/help/emulator.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T16:35:00.540

您必须按 F8 来检查模拟器上的连接。您可以打开/关闭 ariplane 模式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-04-15T21:26:31.737

只需打开飞行模式或关闭正在运行模拟器的电脑上的 wifi。模拟器不会与调试断开连接，也没有互联网连接。

# html - 将屏幕分为 1 顶行和 2 列。两列应该是浏览器的 100% 高度

> ID：15463214
> 
> 赞同：1
> 
> 时间：2013-03-17T16:30:59.863
> 
> 标签：html, css

这是我的问题的小提琴链接：http: [//jsfiddle.net/YZrae/2/](http://jsfiddle.net/YZrae/2/)

请注意左侧如何出现一个额外的滚动条。我需要删除这个额外的滚动条但无法弄清楚我做错了什么......

我需要左列和右列来保留它们的滚动条，但删除正在出现的其余部分。

这是我在小提琴中使用的代码：

HTML：

```
<div class="top_wrap"></div>
<div class="content_wrap">
  <div class="col_right_wrap"></div>
  <div class="col_left_wrap"></div>
  <div class="clear"></div>
</div> 
```

CSS：

```
html,body {
padding:0;
margin:0;
height:100%;
min-height:100%;
}
.top_wrap{
background-color:red;
height:50px;
}
.content_wrap{
background-color:blue;
height:100%;
position:relative;
}
.col_right_wrap{
float:right;
height:100%;
background-color:green;
width:50%;
overflow-y: scroll;
}
.col_left_wrap{
float:left;
width:49%;
height:100%;
background-color:yellow;
overflow-y: scroll;
}
div.clear { clear: both; height: 1px; overflow: hidden; font-size:0pt; margin-top: -1px; } 
```

有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T23:03:20.207

如果你对一些 jQuery 没意见，这个就可以了。

**这是一个[jsFiddle](http://jsfiddle.net/YZrae/10/)。**

代码 jQuery 代码将 .content-wrap 的大小调整为（窗口高度 - .top_wrap 高度）。这是jQuery代码：

```
<script>
functionHeight = function () {
    var varBrowserHeight = $(window).height();
    var varTopWrapHeight = $(".top_wrap").height();

    $(".content_wrap").css('height', (varBrowserHeight - varTopWrapHeight));
};

$(document).ready(function () {
    functionHeight();
});

$(window).resize(function (event) {
    functionHeight();
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T16:43:57.700

这是因为列的高度是 100%，在它上面你添加了一行 50px 的行，所以它会导致滚动。您可以尝试通过将 height:5% 分配给顶行并将 95% 分配给下面的两列来尝试删除额外的滚动。否则溢出-y：隐藏；但如果您打算插入，那会隐藏溢出的内容。

# sql - SQL 查询“不在”

> ID：15463222
> 
> 赞同：0
> 
> 时间：2013-03-17T16:31:39.100
> 
> 标签：sql

我需要创建 SQL 查询：

列出所有不住在**伊利诺伊州 (IL)**、**纽约州 (NY)**或**加利福尼亚州 (CA)**的客户。按邮政编码以升序对它们进行排序。在结果表中，显示客户姓名、州和邮政编码。

我的查询是

```
SELECT CUSTOMER_NAME, STATE, POSTAL_CODE
FROM CUSTOMER_T
WHERE STATE NOT IN ('CA', 'FL', 'NJ')
GROUP BY POSTAL_CODE 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T16:33:08.830

试试这个：

```
SELECT CUSTOMER_NAME, STATE, POSTAL_CODE 
FROM CUSTOMER_T 
WHERE STATE NOT IN ('CA', 'FL', 'NJ') 
Order BY POSTAL_CODE Asc 
```

您不需要按此处分组。将 Group By 替换为 Order By。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T16:37:48.270

我认为你做错了

```
SELECT CUSTOMER_NAME, STATE, POSTAL_CODE 
FROM CUSTOMER_T 
WHERE STATE NOT IN ('CA', 'IL', 'NY') 
                           ^     ^
Order BY POSTAL_CODE Asc
^ 
```

# ios - 如何获取uiview对象参数

> ID：15463223
> 
> 赞同：-1
> 
> 时间：2013-03-17T16:31:43.200
> 
> 标签：ios, objective-c, uiview, uiimageview

`UIview`我有一个和`UIImageView`对象数组。如果我在控制台中打印这些对象，我将以这种方式获得输出

`UIImageView: 0x9ac9830; frame = (327 155; 30 30); opaque = NO; userInteractionEnabled = NO; tag = 1560; layer = CALayer: 0x9ac98b0`

现在我想获取参数到这个`UIImageView`：`0x9ac9830`。如果有人知道，请让我知道提前谢谢的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T16:53:00.900

例如，您有 UIView *view1。

如果您想查看 UIView 的属性并将其打印出来，您应该：

```
NSLog(@"View has this property:%@", view1. 
```

当你停在那个点时，Xcode 本身会弹出不同的属性供你选择。

希望这可以帮助...

# jquery - jQuery 打破了我的 wordpress 网站

> ID：15463224
> 
> 赞同：0
> 
> 时间：2013-03-17T16:31:44.653
> 
> 标签：jquery, wordpress

再会

我在 header.php 文件中包含 jquery，如下所示：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" ></script> 
```

但是这样做时，它会破坏我的主页滑块，它会破坏我的谷歌地图终极插件和其他一些东西。当我排除它时，我的页面上没有运行自定义 jquery...只有滑块工作，必须使用 jquery...

因此，如果 jquery 已经在我的网站上运行（因为我在主题中有 jquery 缓动等），为什么我在标签中添加到我的文件中的自定义 jquery 代码不起作用？但是，当我像上面所说的那样包含 jquery 时，我的自定义代码会运行，但它会破坏其他插件......

这是为什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T16:33:08.957

[jQuery 1.9.1](http://blog.jquery.com/2013/01/15/jquery-1-9-final-jquery-2-0-beta-migrate-final-released/)弃用了很多函数。尝试使用[jQuery Migrate 1.1.1](http://blog.jquery.com/2013/02/16/jquery-migrate-1-1-1-released/)或降级到 1.8.3

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T16:40:15.147

您的自定义 jQuery 代码没有与 WordPress 包含的现有 jQuery 一起运行的原因可能是因为 WordPress 的 jQuery 设置为[noconflict](http://api.jquery.com/jQuery.noConflict/)。noconflict 方法放弃了 jQuery 中使用的“$”快捷方式。这意味着依赖它的代码，例如

```
$("p").hide(); 
```

...不会工作，因为 $ 不会代表 jQuery 对象。尝试像这样包装您的自定义代码，这是获取 $ 对象的标准方法（示例取自[此页面](http://www.ericmmartin.com/5-tips-for-using-jquery-with-wordpress/)）：

```
jQuery(function ($) {
/* You can safely use $ in this code block to reference jQuery */
    $("p").hide();
}); 
```

这样做是因为几个不同的 JavaScript 库`$`用作“快捷方式”变量（例如[MooTools](http://mootools.net)），并且第三方 WordPress 插件和主题通常包含其他 JavaScript 库。`$`当 WordPress 将多个库加载到单个页面中时，放弃并让您准确指定您真正要使用的对象是一种确保冲突最少的方法。

所以，我想说确保 WordPress 的标准版本的 jQuery 可用于您的主题（可能[`wp_enqueue_script`](http://codex.wordpress.org/Function_Reference/wp_enqueue_script)在您的 functions.php 中使用），如此处的[提示一](http://www.ericmmartin.com/5-tips-for-using-jquery-with-wordpress/)所示：

```
function my_init() {
    if (!is_admin()) {
        wp_enqueue_script('jquery');
    }
}
add_action('init', 'my_init'); 
```

...然后通过添加上面的“map-jQuery-back-to-$”包装方法在您自己的函数中使用它对于全面兼容是最好的。大多数当前需要 jQuery 的 WordPress 主题和插件都将被编写为将 jQuery 的发布版本与 WordPress 一起使用，您可能也应该这样做。

# xml - 如何在 XHTML 文档中嵌入 XML 文档？

> ID：15463227
> 
> 赞同：3
> 
> 时间：2013-03-17T16:32:00.410
> 
> 标签：xml, xhtml, embed

例如，我如何嵌入

```
<?xml version="1.0" encoding="utf-8"?>
<root>
    <node><![CDATA[Text]]></node>
</root> 
```

在我的 XHTML 中？

我知道我可以把它放在 CDATA 部分......

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<title>My title</title>
</head>
<body>
<p>I am a XHTML paragraph!</p>
<div>
    <![CDATA[
    <?xml version="1.0" encoding="utf-8"?>
    <root>
        <node>Text</node>
    </root>
    ]]>
</div>
</body>
</html> 
```

...但是我必须删除 XML 文件的 CDATA 部分，并且 XML 被解析为文本而不是 XML。

然后，我得到这个...

![在此处输入图像描述](../Images/c003c3932b0902078562f91e642981a6.png)

...但我想要这样的东西：

![在此处输入图像描述](../Images/5e013d4a5655e55081f7068b7dd472a9.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-02T03:51:52.103

请注意，CDATA 只是一种转义字符的方法，而不是一种嵌入方法。现在回答你的问题：

据我所知，嵌入 XML 文件的唯一方法是使用对象标签或 iframe：

```
<!-- Keep in mind that iframe is invalid in XHTML 1.0 and 1.1.-->
<iframe src="data:application/xml,&lt;root&gt;&lt;node&gt;Text&lt;/node&gt;&lt;/root&gt;"/>
<!-- When using `data:mime/type,[data]' the type attribute is overriden -->
<object data="data:application/xml,&lt;root&gt;&lt;node&gt;Text&lt;/node&gt;&lt;/root&gt;"/> 
```

这里的问题是，一些浏览器只会将 XML 的内容显示为内联文本，而其他浏览器会显示 XML 查看器窗口，这可能是您想要的。

这是一张图表：

```
   布局引擎（浏览器） | <对象> | <iframe>
 -------------------------------------------------- --------
  壁虎 (火狐) | 内嵌文字 | XML 查看器
  Webkit (Safari / 新 Opera) | 内嵌文字 | 内嵌文本
  闪烁（铬/铬）| 内嵌文字 | 内嵌文本
  Presto（旧歌剧） | XML 查看器 | XML 查看器
  三叉戟 (IE5-IE8) | 内嵌文字 | XML 查看器

```

由于 presto 正在被替换，因此您只剩下 iframe+firefox 作为您唯一可行的组合。

如果有人可以使用 IE 进行测试，请将您的结果编辑到表格中。

# php - 我可以用javascript循环php SELECT名称吗

> ID：15463228
> 
> 赞同：1
> 
> 时间：2013-03-17T16:32:04.823
> 
> 标签：php, javascript, select

我正在循环 php 以选择名称..

```
$a = 1;
while ($row2 = mysql_fetch_assoc($res2))
echo "<tr><td>".$row2['subject_name']."</td>
<td align='center'><select  name='ST".$a."'> 
```

所以它迭代`ST1`，`ST2`....

现在我想在 javascript 中访问这些选择的值。我可以使用循环重写以下代码吗？

```
T[1] = frm.ST1.value;
T[2] = frm.ST2.value;
....
T[12] = frm.ST12.value; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T16:39:56.483

未经测试，但应该可以工作：

```
for (var i = 1; i<=12; i++){
    T[i] = frm['ST'+i].value;
} 
```

这段代码基本上使用了在 javascript 中你经常可以`object.member`作为`object[member]`. 我的直觉告诉我这总是正确的，但我有点不确定。

**更新：** [quirksmode.org 文章“作为关联数组的对象”](http://www.quirksmode.org/js/associative.html)说它总是正确的，所以你可以在上面下注。

# ios - 使视图变暗，就像禁用一样

> ID：15463230
> 
> 赞同：3
> 
> 时间：2013-03-17T16:32:20.397
> 
> 标签：ios, uiview, uibutton

您如何使视图变暗，就好像它被禁用/突出显示一样，最好不使用任何其他视图？

通过视图，我的意思是 a `UIView`，及其所有子级。我想达到与 disabled/highlighted 相同的效果`UIButton`。

不要假设视图是完全不透明的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T16:05:54.767

我目前正在玩的东西：

1.  创建一个不透明度的黑色层 ( `_highlightLayer`)。这类似于“带有 alpha 的黑色视图”方法。
2.  `_highlightLayer`使用原始视图的非透明图像遮罩。
3.  添加`_highlightLayer`到视图的图层。

只有视图的不透明像素会变暗。

编码：

```
- (void)highlight
{
    // Black layer with opacity
    _highlightLayer = [CALayer layer];
    _highlightLayer.frame = CGRectMake(0, 0, self.layer.bounds.size.width, self.layer.bounds.size.height);
    _highlightLayer.backgroundColor = [UIColor blackColor].CGColor;
    _highlightLayer.opacity = 0.5;

    // Create an image from the view        
    UIGraphicsBeginImageContextWithOptions(self.bounds.size, NO, 0.0);
    [self.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *maskImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    // Create a mask layer for the black layer 
    CALayer *maskLayer = [CALayer layer];
    maskLayer.contents = (__bridge id) maskImage.CGImage;
    maskLayer.frame = _highlightLayer.frame;

    _highlightLayer.mask = maskLayer;
    [self.layer addSublayer:_highlightLayer];
} 
```

进而：

```
- (void)unhighlight
{
    [_highlightLayer removeFromSuperlayer];
    _highlightLayer = nil;
} 
```

当然，这应该只用于小视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T17:01:28.630

例子：

你有一个 UIButton *button1 和 UIView *view1

您可以通过以下方式禁用按钮和视图：

```
[view1 setHidden:YES];
[button1 setEnabled:NO]; 
```

可以通过以下方式启用按钮和视图：

```
[view1 setHidden:NO];
[button1 setEnabled:YES]; 
```

希望这可以帮助..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T19:24:29.587

虽然这种方法无法满足您不使用额外视图的偏好，但简单地添加一个 alpha 为 0.6 左右的黑色视图似乎可以达到效果，另外还有一个好处是您可以使用这个新视图来拦截 UIEvents 以便所有子视图有效地被集体禁用。

您甚至可以在图形上获得精美的效果，而不仅仅是为覆盖视图使用黑色背景，您可以使用径向渐变填充其背景，以实现当弹出视图禁用其后面的视图时在 iOS 中发生的那种聚光灯效果。 .

# javascript - 值不会推送到数组

> ID：15463238
> 
> 赞同：0
> 
> 时间：2013-03-17T16:33:09.907
> 
> 标签：javascript, jquery

在下面的代码中，我用这个从 JSON 中为一个变量赋值，然后用这个（用于测试） `var tag = data[j]['text'];`输出它，它可以工作。`console.log(tag);`

我尝试将值推送到数组中，`tags.push(tag);`但它不起作用！

为什么这些值不会进入数组？我只是想将的内容`tag`放入一个数组中......

```
function GetAvailableTags() {
            var url = '/TextCodes/TextCodes?key=';
            var tagGroups = [];
            $('.ui-autocomplete-input').each(function () {
                var key = $(this).attr('id');
                var tags = [];
                //console.log(key);
                $.getJSON(url + key, function (data) {
                    for (var j = 0, len = data.length; j < len; j++) {
                        var tag = data[j]['text'];
                        console.log(tag);
                        tags.push(tag);
                    }
                });
                console.log(tags.length);
                for (var k = 0, len = tags.length; k < len; k++) {
                    console.log(tags[k]);
                }
            });
        } 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T16:44:23.267

因为`$.getJSON`是一个异步函数。这意味着你的代码

```
console.log(tags.length);
for (var k = 0, len = tags.length; k < len; k++) {
    console.log(tags[k]);
} 
```

将在`$.getJSON`回调函数之前执行：

```
function () {
    var key = $(this).attr('id');
    var tags = [];
    //console.log(key);
    $.getJSON(url + key, function (data) {
        for (var j = 0, len = data.length; j < len; j++) {
            var tag = data[j]['text'];
            console.log(tag);
            tags.push(tag);
        }
    } 
```

这就是为什么在查看上面的代码时您的变量似乎为空的原因，但是如何`console.log(tag);`在回调函数中打印数据。

**更新**

下面是一个使用 $.ajax 方法而不是 $.getJSON 来指定必须使用参数同步检索数据的示例`asynch : false`

通过这种方式，服务器调用响应（成功回调）是继续该过程所必需的。这种非标准方式的缺点是您的网页可能会在等待服务器响应时被冻结。这不是最好的优雅方式，但有时它很有用。

```
function GetAvailableTags() {
    var url = '/TextCodes/TextCodes?key=';
    var tagGroups = [];
    $('.ui-autocomplete-input').each(function () {
        var key = $(this).attr('id');
        var tags = [];
        //console.log(key);
        $.ajax({
            url: url + key,
            type: 'POST',
            asynch: false,//specify to stop JS execution waiting the server response
            success: function (data) {
                for (var j = 0, len = data.length; j < len; j++) {
                    var tag = data[j]['text'];
                    console.log(tag);
                    tags.push(tag);
                }
            },
            error : function(jqXHR, textStatus, errorThrown) {
                alert('an error occurred!');
            }
        });
        console.log(tags.length);
        for (var k = 0, len = tags.length; k < len; k++) {
            console.log(tags[k]);
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T22:23:02.803

我的解决方案有点冗长而愚蠢，但它确实有效。现在，我可以像访问数组一样访问变量了`textCodes['taxes']`。sdespont 的`async`笔记也有帮助。

```
 var textCodes = GenerateTextCodes();
    console.log(textCodes);

    function GenerateTextCodes() {
        var arr = [];
        $('.ui-autocomplete-input').each(function () {
            var id = $(this).attr('id');
            arr[id] = GetAvailableTags(id);
        });
        //console.log(arr['taxes']);
        return arr;
    }

    // get all autocomplete element IDs and put them into an array
    function GetAvailableTags(key) {
        var url = '/TextCodes/TextCodes?key=';
        var tags = [];
        $.ajax({
            url: url + key,
            type: 'GET',
            async: false,
            success: function (data) {
                //console.log(data[0].text);
                //console.log(data.length);
                for (var i = 0; i < data.length; i++) {
                    //console.log(data[i].text);
                    tags.push(data[i].text);
                }
            },
            error: function (jqXHR, textStatus, errorThrown) {
                alert('an error occurred!');
            }
        });
        //console.log(tags);
        return tags;
    } 
```

# javascript - 编码 HTML 和 Javascript

> ID：15463239
> 
> 赞同：0
> 
> 时间：2013-03-17T16:33:11.017
> 
> 标签：javascript, html, encoding, ip

我正在建立一个网站，我的 ip 需要在服务器的 javascript 中。

但我想隐藏这一点。我已经为此使用了 ioncube，但是当您在 google chrome 中按 f12 示例时，您仍然可以看到源代码和 ip。如何使用编码隐藏它。例如当我的 ip 是。123.123.123.123，当您检查它的来源时，例如：H4w5EK4ksfdk#%sfsldfs。

谁能帮我 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T16:40:57.923

如果考虑到最后的结论，这是无法实现的。JavaScript 始终以源代码形式从服务器传输到客户端（浏览器），因此任何 IP 地址或域名都是可见的。

您可以使用某种混淆（谷歌表示“Javascript 混淆”），但这会创建一个阈值，但对于任何足够顽固的攻击者来说，这将是一个容易克服的阈值。

你不能解决的问题是：如果你希望浏览器能够提取和理解地址，那么人类也可以通过 JS 调试器来提取和理解它。此外，任何开发人员工具，例如 Chrome“开发工具”或 Firebug，都会显示对该地址的任何访问权限。

# android - Stock Android 壁纸选择器源代码

> ID：15463243
> 
> 赞同：1
> 
> 时间：2013-03-17T16:33:32.903
> 
> 标签：android

android repo 中的壁纸选择器源代码在哪里。任何人都可以提供路径吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-17T16:41:19.207

AOSP 启动器 ( )的位置（路径）`Launcher2`是`packages/apps/Launcher2/``src/com/android/launcher2/`

所以完整路径是：`packages/apps/Launcher2/src/com/android/launcher2/`.

这些文件是**WallpaperChooser.java**和**WallpaperChooserDialogFragment.java**。

**编辑：**
您需要以下资源（来自`res`）文件夹：

`/res/drawable`：

*   wallpaper_gallery_background.xml
*   壁纸库项目.xml

`/res/drawable/drawable-hdpi`（和`-mdpi`，`-xhdpi`）：

*   grid_focused.9.png
*   grid_pressed.9.png
*   grid_selected.9.png

`/res/drawable/`

*   任何壁纸都进入这里。

`/res/drawable-sw720dp-nodpi`

*   高分辨率（720p）壁纸进入这里。

`/res/layout/`

*   壁纸选择器.xml
*   wallpaper_chooser_base.xml
*   墙纸项目.xml

`/res/layout-sw720dp`

*   墙纸项目.xml
*   **如果你想要 720p 壁纸，请使用**wallpapers.xml

 ****尺寸.xml**

*   `<!-- dimensions for the wallpaper picker wallpaper thumbnail width -->`
*   `<dimen name="wallpaper_chooser_grid_width">196dp</dimen>`
*   `<dimen name="wallpaper_chooser_grid_height">140dp</dimen>`

**样式.xml**

*   `<style name="Theme" parent="android:Theme.Holo.Wallpaper.NoTitleBar">`
*   `<item name="android:windowActionModeOverlay">true</item>`
*   `<style>`

`/res/values`

*   extra_wallpapers.xml
*   壁纸.xml

**样式.xml**

*   `<style name="Theme.WallpaperPicker" parent="@android:style/Theme.Holo.NoActionBar"/>`

**字符串.xml**

*   `<!-- Title of dialog that appears after user selects Wallpaper from menu -->`
*   `<string name="chooser_wallpaper">Choose wallpaper from</string>`
*   `<!-- Button label on Wallpaper Gallery screen; user selects this button to set a specific wallpaper -->`
*   `<string name="wallpaper_instructions">Set wallpaper</string>`

`/res/xml`

*   wallpaper_picker_preview.xml

**AndroidManifest.xml**

```
 <uses-permission android:name="android.permission.SET_WALLPAPER" />
    <uses-permission android:name="android.permission.SET_WALLPAPER_HINTS" />
    <activity
        android:name="com.android.launcher2.WallpaperChooser"
        android:theme="@style/Theme.WallpaperPicker"
        android:label="@string/pick_wallpaper"
        android:icon="@mipmap/ic_launcher_wallpaper"
        android:finishOnCloseSystemDialogs="true"
        android:process=":wallpaper_chooser">
        <intent-filter>
            <action android:name="android.intent.action.SET_WALLPAPER" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
        <meta-data android:name="android.wallpaper.preview"
            android:resource="@xml/wallpaper_picker_preview" />
    </activity> 
```**

# c# - 使用序列化 (?) 将复杂的 xml 文件转换为 C# 对象

> ID：15463244
> 
> 赞同：0
> 
> 时间：2013-03-17T16:33:37.043
> 
> 标签：c#, xml, serialization

假设我有这个 XML 文件：

```
 <functionList>
<function name="a" id="11" >
  <InputParameters>
   <Value>
    <Range>
      <DiscreteRange>
        <DiscreteValue value="0" description="Stream 1" />
        <DiscreteValue value="1" description="Stream 2" />
      </DiscreteRange>
    </Range>
   </Value>
  </InputParameters>
  <ReturnValues>
    <Status type="BYTE"  description="0 successful, error otherwise">
      <Range>
        <SequenceRange min="0x00" max="0xFF"/>
      </Range>
    </Status>
    <Value type="UWORD32"  description="Stream select setting">
      <Range>
        <DiscreteRange>
          <DiscreteValue value="0" description="Stream 1" />
          <DiscreteValue value="1" description="Stream 2" />
        </DiscreteRange>
      </Range>
    </Value>
  </ReturnValues>
</functions>

<function name="b" id="12" >
  <InputParameters>
   <Value>
    <Range>
      <SequenceRange min="0x00" max="0xFF"/>
    </Range>
   </Value>
  </InputParameters>
  <ReturnValues>
    <Status type="BYTE"  description="0 successful, error otherwise">
      <Range>
        <SequenceRange min="0x00" max="0xFF"/>
      </Range>
    </Status>
    <Value type="UWORD32"  description="Stream select setting">
      <Range>
        <DiscreteRange>
          <DiscreteValue value="0" description="Stream 1" />
          <DiscreteValue value="1" description="Stream 2" />
        </DiscreteRange>
      </Range>
    </Value>
  </ReturnValues>
</functions>

<function name="c"  id="13"  >
  <InputParameters></InputParameters>
  <ReturnValues>
    <Status type="BYTE"  description="0 successful, error otherwise">
      <Range>
        <SequenceRange min="0x00" max="0xFF"/>
      </Range>
    </Status>
  </ReturnValues>
</function> 
```

一般来说，我的 XML 结构看起来像这样：

```
 <functionList  >
<function  name=""  id="">
  <InputParameters>
    <!--Optional -->
    <Value type="" description="">
      <Range>

        <!--OR-->
        <DiscreteRange>
          <DiscreteValue value="" description="" />
          <DiscreteValue value="" description="" />
          <!--...-->
        </DiscreteRange>

        <!--OR-->
        <SequenceRange min="" max=""/>

        <!--OR-->
        <StringRange characters=""/>

        <!--OR-->
        <CharRange/>
      </Range>
    </Value>
    <!-- <Value type="" description="">...-->
         <!-- </Value>-->

    <!-- <Value type="" description="">...-->
    <!-- </Value>-->

    <!-- <Value type="" description="">...-->
    <!-- </Value>-->
         <!--...-->

  </InputParameters>

  <ReturnValues>
    <Status type=""  description="">
      <Range>

        <!--OR-->
        <DiscreteRange>
          <DiscreteValue value="" description="" />
          <DiscreteValue value="" description="" />
          <!--...-->
        </DiscreteRange>

        <!--OR-->
        <SequenceRange min="" max=""/>

        <!--OR-->
        <StringRange characters=""/>

        <!--OR-->
        <CharRange/>
      </Range>
    </Status >

    <!--Optional -->
    <Value type="" description="">
      <Range>

        <!--OR-->
        <DiscreteRange>
          <DiscreteValue value="" description="" />
          <DiscreteValue value="" description="" />
          <!--...-->
        </DiscreteRange>

        <!--OR-->
        <SequenceRange min="" max=""/>

        <!--OR-->
        <StringRange characters=""/>

        <!--OR-->
        <CharRange/>
      </Range>
    </Value>
    <!-- <Value type="" description="">...-->
    <!-- </Value>-->

    <!-- <Value type="" description="">...-->
    <!-- </Value>-->

    <!-- <Value type="" description="">...-->
    <!-- </Value>-->
    <!--...-->

  </ReturnValues>
</function>

<!--function...--> 
```

据我了解，使用内置的 C# 反序列化不起作用，因为文件***没有固定的结构***。

有谁知道我如何基于此结构创建层次结构 C# 对象（反序列化）？

如果可能的话，我很乐意看到一个例子，或者一个如何构建这样一个东西的教程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T00:31:18.337

由于您没有方案定义文件，您可以自己编写代码。XmlDocument 在这里工作得很好。

它不是一个工作示例。但你会得到线索。

```
public class Document
{
    public static Document Create(Stream input)
    {
        var doc = new XmlDocument();
        doc.Load(input);
        return new Document(doc);
    }

    public class Function
    {
        public string Name { get; set; }

        public string Id { get; set; }

        public Function(XmlNode node)
        {
            Name = node.Attributes["name"].ToString();
            Id = node.Attributes["id"].ToString();
        }

        // Return values

        // Parameters
    }

    public List<Function> Functions { get; set; }

    public Document(XmlDocument doc)
    {
        Functions = new List<Function>();
        var list = doc.GetElementsByTagName("functionlist");
        XmlNode root = list[0];

        XmlNodeList children = root.ChildNodes;

        foreach (var child in children)
        {
            Functions.Add(new Function(child));
        }
    }
} 
```

它基本上是在 XmlNodeLists 中遍历 XmlNode，获取这些节点的 Attributes 和 InnerValues。

# sql - 关系代数：括号问题

> ID：15463245
> 
> 赞同：0
> 
> 时间：2013-03-17T16:33:39.850
> 
> 标签：sql, database, relational-algebra

我已经完成了有关关系代数的作业。

![RA问题](../Images/b7b666002b704f8ed72ca0ddb968ac25.png)

我无法确定两个关系实例之间的不同之处，因为括号放在第二种情况下。我会说两者都返回相同的结果，但我认为情况并非如此。

如果有人可以提供一个很好的解释！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T16:40:08.223

看起来第二个变体是一个错误。外投影寻找`sname`但仅通过`sid`。

# css - 锚标记内的垂直对齐文本

> ID：15463247
> 
> 赞同：3
> 
> 时间：2013-03-17T16:33:44.437
> 
> 标签：css, vertical-alignment, alignment

一切正常，文本位于锚点中间。整个 ul 标记在页面中间，但这只是问题。当文本稍长一点时，它会中断并且我的锚标记上升，我不确定是什么问题。检查现场和 mojgolub(.)com

![在此处输入图像描述](../Images/2701ee45f22cfa88cbc3675694d1f6ec.png)

**HTML**

```
<div id="speeddial-wrapper">
  <nav>
    <ul>
      <li> <a href="#"  class="speeddial" id="s1">POPIS GOLUBOVA</a> </li>
      <li> <a href="#"  class="speeddial" id="s2">POPIS GOLUBOVA MALO VECI TEKST NEGO UOBICAJENO</a></li>
      <li> <a href="#" class="speeddial" id="s3">POPIS GOLUBOVA></a></li>
      <li> <a href="#" class="speeddial" id="s4">POPIS GOLUBOVA</a> </li>
      <div style="clear:both; margin-top:25px;"></div>
      <li> <a href="#"  class="speeddial" id="s1">POPIS GOLUBOVA</a> </li>
      <li> <a href="#"  class="speeddial" id="s2">POPIS GOLUBOVA MALO VECI TEKST NEGO UOBICAJENO</a></li>
      <li> <a href="#" class="speeddial" id="s3">POPIS GOLUBOVA></a></li>
      <li> <a href="#" class="speeddial" id="s4">POPIS GOLUBOVA</a> </li>
    </ul>
  </nav>
</div> 
```

**CSS**

```
#speeddial-wrapper
{
    width:90%;
    margin:0 auto;
    margin-top:30px;
    text-align:center;
}

#speeddial-wrapper nav ul
{
    list-style-type:none;
    margin:0;
    padding:0;
}

#speeddial-wrapper nav ul li
{   display:inline-table;
}

.speeddial
{
    font-family:speeddialfont;
    color:#FFFFFF;
    text-align:center;
    text-decoration:none;

    height:200px;
    width:200px;
    border:7px solid #AEAEAE;
    background-color:#49A655;
    border-radius:5px;

    display:table-cell;
    vertical-align:middle;

    margin-right:30px;
    margin-bottom:30px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T16:45:12.427

更改`display`

```
#speeddial-wrapper nav ul li
{  
    display:inline-table;
} 
```

至

```
#speeddial-wrapper nav ul li
{   
    display:inline-block;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T16:43:50.933

添加此规则

```
#speeddial-wrapper nav ul li { vertical-align: middle; } 
```

# git - 如何恢复失败的 git-stash 应用？

> ID：15463249
> 
> 赞同：3
> 
> 时间：2013-03-17T16:33:45.680
> 
> 标签：git

注意：我相信这个问题中的用例与[如何反向应用存储？](https://stackoverflow.com/questions/1020132)和[中止`git stash apply`](https://stackoverflow.com/questions/9242844)。

我只是做了一个`git stash apply`，令我惊讶的是，并没有完全通过（即检测到冲突）。

回到我跑步*前*`git stash apply`的状态最干净的方法是什么？

（我希望有一个`--ff-only`选项`git stash [apply|pop]`，例如`git pull`，等等）

# java - JAVA中的数据结构实现连接

> ID：15463251
> 
> 赞同：2
> 
> 时间：2013-03-17T16:34:18.963
> 
> 标签：java, join, data-structures

嗨，我正在尝试在 Java 中实现一个简单的连接算法...

我有三个关系，即 M(ABX) N(ACY) 和 O(BCZ)。这些关系目前在一个逗号分隔的文件中，并且所有整数（示例文件 M 将具有像 1,5,6;2,7.9;.. 这样的值）想知道在 Java 中使用什么数据结构来实现连接 MxNxO 的最佳数据结构即 M 和 N 将在属性 A 上连接，生成一个模式（ABCXY），然后在属性 B 和 C 上与 O 连接，生成 ABXCYZ 的最终结果，该结果将具有所有连接结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T16:41:04.573

[也许像hsqldb](http://hsqldb.org/)这样的嵌入式数据库是正确的选择。它灵活、高效且易于使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T17:48:37.330

没有专门的数据结构可供您轻松使用。
您必须表示从 CSV 文件中提取的表`List<List>>`，然后您必须遍历列表并比较表示列名的正确属性以创建中间列表等等，直到您加入所有关系。
即你需要自己实现这个逻辑。
恕我直言，最好的方法是遵循@Ernest Friedman-Hill 的回答。
您不仅可以更快地获得此功能，而且不会出错，因为您无需测试连接算法是否在任何数据集上都能正常工作。嵌入式数据库将为您执行此操作。

# matlab - 在 Matlab 中将颜色带添加到螺旋形状图中

> ID：15463253
> 
> 赞同：1
> 
> 时间：2013-03-17T16:34:25.710
> 
> 标签：matlab, colors, scatter-plot

**我有以下代码在Matlab**上创建和绘制螺旋线。我想控制颜色并自己添加三到四种颜色，而不是 matlab 进行着色。我怎样才能自己设置颜色并控制颜色？这是我的代码：

```
N = 1000;
r = linspace(0,1,N);
t = (3*pi/2)*(1+2*r);
x(1,:) = t.*cos(t);
x(2,:) = t.*sin(t);
x(3,:) = zeros(1,N);
ms = 50;
%cm = colormap;
%cm(64,:);

figure;
scatter3(x(1,:), x(2,:), x(3,:), ms, t, 'filled'); 
```

请问有什么帮助吗？

@jucestain，着色工作，谢谢。我还有一个问题。如果像这样在上面的代码中添加噪音，结果会变得有趣，如图所示

```
 N = 1000;
    r = linspace(0,1,N);
    t = (3*pi/2)*(1+2*r);
    x(1,:) = t.*cos(t);
    x(2,:) = t.*sin(t);
    x(3,:) = zeros(1,N);
    % Set colors:
    t(1:250) = 1;
    t(251:500) = 2;
    t(501:750) = 3;
    t(751:1000) = 4;
    ms = 50;
    figure;
    scatter3(x(1,:), x(2,:), x(3,:), ms, t, 'filled');

    %add noise
    x(1,:) = x(1,:) + 5*randn(1,N);
    x(2,:) = x(2,:) + 5*randn(1,N);
    x(3,:) = x(3,:) + 5*randn(1,N);
    figure;
    scatter3(x(1,:), x(2,:), x(3,:), ms, t, 'filled'); 
```

这个情节的结果很笨拙，我不知道为什么？我是在正确地添加噪音还是什么？剧情对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T17:40:16.647

您拥有的 t 向量控制颜色。您可以通过更改 t 中的值来控制它。这是一个例子：

```
N = 1000;
r = linspace(0,1,N);
t = (3*pi/2)*(1+2*r);
x(1,:) = t.*cos(t);
x(2,:) = t.*sin(t);
x(3,:) = zeros(1,N);
% Set colors:
t(1:250) = 1;
t(251:500) = 2;
t(501:750) = 3;
t(751:1000) = 4;
ms = 50;
figure;
scatter3(x(1,:), x(2,:), x(3,:), ms, t, 'filled'); 
```

输出：

![在此处输入图像描述](../Images/48784204db24228c2b9591a85315538d.png)

以上取决于您使用的是哪种颜色图。如果您发现它更简单，您也可以使用它：

```
N = 1000;
r = linspace(0,1,N);
t = (3*pi/2)*(1+2*r);
x(1,:) = t.*cos(t);
x(2,:) = t.*sin(t);
x(3,:) = zeros(1,N);
% Set colors:
ms = 50;
figure;
scatter3(x(1,1:250), x(2,1:250), x(3,1:250), ms, 'r', 'filled'); % red
hold on;
scatter3(x(1,251:500), x(2,251:500), x(3,251:500), ms, 'g', 'filled'); % green
scatter3(x(1,501:750), x(2,501:750), x(3,501:750), ms, 'b', 'filled'); % blue
scatter3(x(1,751:1000), x(2,751:1000), x(3,751:1000), ms, 'y', 'filled'); % yellow
hold off; 
```

输出：

![在此处输入图像描述](../Images/e3dfc274ef2168f4a824b7d2d1a51768.png)

WRT 噪音：你添加的太多了。rand 的范围为 0 到 1，因此您添加的噪声范围为 0 到 5，这与数据中的值相当。如果你这样做：

```
N = 1000;
r = linspace(0,1,N);
t = (3*pi/2)*(1+2*r);
x(1,:) = t.*cos(t);
x(2,:) = t.*sin(t);
x(3,:) = zeros(1,N);
% Set colors:
t(1:250) = 1;
t(251:500) = 2;
t(501:750) = 3;
t(751:1000) = 4;
ms = 50;
figure;
scatter3(x(1,:), x(2,:), x(3,:), ms, t, 'filled');

%add noise
x(1,:) = x(1,:) + .5*randn(1,N);
x(2,:) = x(2,:) + .5*randn(1,N);
x(3,:) = x(3,:) + .5*randn(1,N);
figure;
scatter3(x(1,:), x(2,:), x(3,:), ms, t, 'filled'); 
```

您获得：

![在此处输入图像描述](../Images/8edd126df3c9cd6d3a12f1e924128d65.png)

这是相当合理的。

# java - 尝试在 jpa 表上创建新条目时出错

> ID：15463255
> 
> 赞同：0
> 
> 时间：2013-03-17T16:34:38.080
> 
> 标签：java, jpa, eclipselink, entitymanager

我使用以下代码向 JPA 插入数据，当我尝试提交时出现错误，该对象包含完整数据，所以我不明白我在这里遗漏了什么，知道吗？

```
 entityManager.getTransaction().begin();
    entityManager.persist(object);
    entityManager.getTransaction().commit(); 
```

带有所有 getter 和 setter 的实体看起来像这样

```
@Entity
public class LeaveRequest {

@Id
@GeneratedValue(strategy = GenerationType.TABLE)
private int id;
private String type;
private String from;
private String to;
private String length;
private String state;

public int getId() {

    return id;
} 
```

**错误是：**

```
Internal Exception: java.sql.SQLSyntaxErrorException: Syntax error: Encountered "FROM" at line 1, column 31.
Error Code: 20000
Call: INSERT INTO LEAVEREQUEST (ID, FROM, LENGTH, STATE, TO, TYPE) VALUES (?, ?, ?, ?, ?, ?)
    bind => [6 parameters bound]
Query: InsertObjectQuery(LeaveRequest [id=1, type=VACATION, from=2012-12-27, to=2012-12-27, length=1 day, state=Rejected]) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T16:38:37.060

`FROM`是一个 sql 保留关键字。

只需更改变量名或使用@Column 注解更改表列的列名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T16:42:56.423

哇酷。您有一个名为“from”的属性，它与 SQL 保留字冲突。我会说这是您的 jpa 提供程序中的一个错误，但谁知道呢，也许这种行为是符合 jpa 的。作为一种解决方法，您可以重命名数据库中的列并将 @column 注释添加到 from 属性，名称 =“newcolumnname”

# javascript - 评论正则表达式

> ID：15463257
> 
> 赞同：20
> 
> 时间：2013-03-17T16:34:55.630
> 
> 标签：javascript, regex, comments

我正在尝试在 JavaScript 中评论正则表达式。

似乎有很多关于如何使用正则表达式从代码中*删除*注释的资源，但实际上并没有如何在 JavaScript 中*注释*正则表达式以便它们更容易理解。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-17T16:39:06.720

不幸的是，JavaScript 没有像其他语言那样为正则表达式文字提供详细模式。不过，您可能会觉得[这很有趣](http://xregexp.com/)。

代替任何外部库，您最好的选择就是使用普通字符串并注释：

```
var r = new RegExp(
    '('      + //start capture
    '[0-9]+' + // match digit
    ')'        //end capture
); 
r.test('9'); //true 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-12-25T19:18:24.440

虽然 Javascript 本身不支持多行和带注释的正则表达式，但构造完成相同事情的东西很容易——使用一个函数，该函数接受一个（多行，带注释的）字符串并从该字符串返回一个正则表达式，没有评论和换行符。

下面的代码片段模仿了其他风格`x`（“ [extended](https://www.regular-expressions.info/freespacing.html) ”）标志的行为，它忽略了模式中的所有空白字符以及注释，用 表示`#`：

```
function makeExtendedRegExp(inputPatternStr, flags) {
  // Remove everything between the first unescaped `#` and the end of a line
  // and then remove all unescaped whitespace
  const cleanedPatternStr = inputPatternStr
    .replace(/(^|[^\\])#.*/g, '$1')
    .replace(/(^|[^\\])\s+/g, '$1');
  return new RegExp(cleanedPatternStr, flags);
}

// The following switches the first word with the second word:
const input = 'foo bar baz';
const pattern = makeExtendedRegExp(String.raw`
  ^       # match the beginning of the line
  (\w+)   # 1st capture group: match one or more word characters
  \s      # match a whitespace character
  (\w+)   # 2nd capture group: match one or more word characters
`);
console.log(input.replace(pattern, '$2 $1'));
```

通常，要在 Javascript 字符串中表示反斜杠，必须对每个文字反斜杠进行双重转义，例如`str = 'abc\\def'`. 但是正则表达式经常使用很多反斜杠，而双重转义会使模式的可读性大大降低，因此在编写带有很多反斜杠的 Javascript 字符串时，最好使用`String.raw`模板文字，它允许单个类型的反斜杠实际表示文字反斜杠，没有额外的转义。

就像使用标准`x`修饰符一样，要匹配`#`字符串中的实际值，只需先将其转义，例如

```
foo\#bar     # comments go here 
```

```
// this function is exactly the same as the one in the first snippet

function makeExtendedRegExp(inputPatternStr, flags) {
  // Remove everything between the first unescaped `#` and the end of a line
  // and then remove all unescaped whitespace
  const cleanedPatternStr = inputPatternStr
    .replace(/(^|[^\\])#.*/g, '$1')
    .replace(/(^|[^\\])\s+/g, '$1');
  return new RegExp(cleanedPatternStr, flags);
}

// The following switches the first word with the second word:
const input = 'foo#bar baz';
const pattern = makeExtendedRegExp(String.raw`
  ^       # match the beginning of the line
  (\w+)   # 1st capture group: match one or more word characters
  \#      # match a hash character
  (\w+)   # 2nd capture group: match one or more word characters
`);
console.log(input.replace(pattern, '$2 $1'));
```

请注意，要匹配文字空格字符（而不仅仅是*任何*空白字符），`x`在任何环境（包括上述环境）中使用标志时，您必须先转义空格`\`，例如：

```
^(\S+)\ (\S+)   # capture the first two words 
```

如果您想经常匹配空格字符，这可能会有点乏味并使模式更难阅读，类似于双转义反斜杠不是非常理想的。允许未转义的空格字符的一种可能（非标准）修改是仅去除一行开头和结尾的空格，以及`#`注释前的空格：

```
function makeExtendedRegExp(inputPatternStr, flags) {
  // Remove the first unescaped `#`, any preceeding unescaped spaces, and everything that follows
  // and then remove leading and trailing whitespace on each line, including linebreaks
  const cleanedPatternStr = inputPatternStr
    .replace(/(^|[^\\]) *#.*/g, '$1')
    .replace(/^\s+|\s+$|\n/gm, '');
  console.log(cleanedPatternStr);
  return new RegExp(cleanedPatternStr, flags);
}

// The following switches the first word with the second word:
const input = 'foo bar baz';
const pattern = makeExtendedRegExp(String.raw`
  ^             # match the beginning of the line
  (\w+) (\w+)   # capture the first two words
`);
console.log(input.replace(pattern, '$2 $1'));
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-17T16:43:12.507

在其他几种语言（尤其是 Perl）中，有特殊`x`标志。设置后，正则表达式会忽略其中的任何空格和注释。遗憾的是，javascript 正则表达式不支持该`x`标志。

缺乏语法，利用可读性的唯一方法是约定。我的是在棘手的正则表达式之前添加一个注释，包含它，就好像你有 x 标志一样。例子：

```
/*
  \+?     #optional + sign
  (\d*)   #the integeric part
  (       #begin decimal portion
     \.
     \d+  #decimal part
  )
 */
var re = /\+?(\d*)(\.\d+)/; 
```

[对于更复杂的示例，您可以在此处](https://github.com/Zirak/SO-ChatBot/blob/b5e38026fb3acd79b40a69a7e097dd3ca96e0b5c/source/plugins/substitution.js#L2)和[此处](https://github.com/Zirak/SO-ChatBot/blob/b5e38026fb3acd79b40a69a7e097dd3ca96e0b5c/source/listeners.js#L71)查看我使用该技术所做的工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-11-11T16:24:08.897

在 2021 年，我们可以使用应用了[String.raw()的](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/raw)[模板文字](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals)来做到这一点。

```
VerboseRegExp `
    (
        foo*                  // zero or more foos
        (?: bar | baz )       // bar or baz
        quux?                 // maybe a quux
    )
    \s \t \r \n \[ \] \/ \`   // invisible whitespace is ignored ...
    [ ]                       // ... unless you put it in a character class
`
`gimy`                        // flags go here

// returns the RegExp /(foo*(?:bar|baz)quux?)\s\t\r\n\[\]\/\`[ ]/gimy 
```

的实施`VerboseRegExp`：

```
const VerboseRegExp = (function init_once () {
    const cleanupregexp = /(?<!\\)[\[\]]|\s+|\/\/[^\r\n]*(?:\r?\n|$)/g
    return function first_parameter (pattern) {
        return function second_parameter (flags) {
            flags = flags.raw[0].trim()
            let in_characterclass = false
            const compressed = pattern.raw[0].replace(
                cleanupregexp,
                function on_each_match (match) {
                    switch (match) {
                        case '[': in_characterclass = true; return match
                        case ']': in_characterclass = false; return match
                        default: return in_characterclass ? match : ''
                    }
                }
            )
            return flags ? new RegExp(compressed, flags) : new RegExp(compressed)
        }
    }
})() 
```

请参阅[JavaScript 中的详细正则表达式](https://keleshev.com/verbose-regular-expressions-in-javascript)了解其`.raw[0]`作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-17T16:38:01.570

我建议您在正则表达式的行上方添加一个常规注释以进行解释。

你会有更多的自由。

# javascript - 使用 jQuery 删除 javascript 代码

> ID：15463260
> 
> 赞同：1
> 
> 时间：2013-03-17T16:35:13.513
> 
> 标签：javascript, jquery

我用了

```
<div id="myJSDiv"><script>...</script></div>
$("#myJSDiv").html(''); 
```

和

```
<script id="myJSDiv">...</script>
$("#myJSDiv").remove(); 
```

但没有删除任何内容。

JS脚本是

```
<script id="count_down">
        var ss = 150;
        function countdown() {
            ss = ss-1;
            if (ss<0) {
                window.location="google.com";
            }else {
                document.getElementById("countdown").innerHTML=ss;
                window.setTimeout("countdown()", 1000);
            }
        }
        </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T16:36:05.993

加载脚本后，删除它来自的脚本标记不会对该脚本定义或创建的函数或变量执行任何操作。

加载后无法删除这样的代码块。全局函数可以在加载后重新定义，但这就是你所能做的。也许，如果您描述了您要解决的整体问题，我们可以提出更好的方法。

* * *

现在您已将实际问题添加到您的问题中，要停止倒数计时器，您可以执行以下操作：

```
 <script id="count_down">
    var ss = 150;
    var countdownTimer;
    function countdown() {
        ss = ss-1;
        if (ss<0) {
            window.location="google.com";
        }else {
            document.getElementById("countdown").innerHTML=ss;
            countdownTimer = window.setTimeout(countdown, 1000);
        }
    }

    function stopCountdown() {
        clearTimeout(countdownTimer);
    }
    </script> 
```

`stopCountdown()`当您想停止倒数计时器时，只需调用该函数。

# php - 找出字符串是否包含字符串，如果包含则将其拆分

> ID：15463263
> 
> 赞同：0
> 
> 时间：2013-03-17T16:35:35.937
> 
> 标签：php, string

我想弄清楚一个字符串是否包含超过 1 次`http://`

像这样：

```
http://uploading.com/files/c8e99378/image-slider-skins.zip/http://www.filesonic.com/file/3524497744/image-slider-skins.zip 
```

我知道如何确定它是否存在，但是如何在第二个开头拆分字符串`http`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T16:37:58.993

```
$parts = explode('http://', $str);
$secondPart = 'http://'.$parts[2];

echo $secondPart; 
```

文档中的更多信息[`explode`](http://php.net/explode)

* * *

或其他一些方法（更简单且更快）：

```
$firstPart = substr($str, 0, strpos($str, 'http://', 8)); 
```

* * *

或者你也可以使用我不推荐的正则表达式，因为它对于这个简单的任务来说太重了：

```
if (preg_match('/(http:\/\/.*)(?=http:\/\/)/', $str, $matches)) {
    echo $matches[1];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T16:39:50.570

使用[爆炸](http://php.net/explode)

```
$parts = explode('http://', $string); 
```

您还可以直接将部分结果提取到变量中：

```
list($part1, $part2) = explode('http://', $string); 
```

# delphi - 通过单独的线程使用 Indy 发送电子邮件

> ID：15463264
> 
> 赞同：0
> 
> 时间：2013-03-17T16:35:48.163
> 
> 标签：delphi, delphi-7, indy10

我之前问过关于通过 GMail 使用 Indy 发送带有附件的电子邮件的问题，我很高兴地说基本代码可以正常工作。但是，我注意到发送附件需要几分钟，并且在那段时间内，程序会冻结（即使我在程序中添加了 TIdAntiFreeze 组件）。我认为让电子邮件由单独的线程发送是个好主意，从而使程序能够响应。

我一直无法在网上找到显示如何从线程发送电子邮件的代码，因此我不得不编写自己的代码，但只能部分工作。

我从发送电子邮件的表单中删除了 SMTP 组件；相反，我将电子邮件组件的数据保存到磁盘（使用 TIdMessage.SaveToFile 方法），然后创建一个非模态对话框，该对话框创建一个线程来实例化所需的组件并发送电子邮件。我想为 SMTP 和 IdMessage 组件创建事件处理程序，但不知道如何在运行时执行此操作 - 线程代码无法访问任何表单方法。

虽然我正在展示我的代码，但我更希望看到一些可以正常工作的东西。

```
unit Manage77c;

interface

uses
 Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
 Dialogs, SizeGrip, ManageForms, ExtCtrls, StdCtrls, IdBaseComponent,
 IdComponent, IdTCPConnection, IdTCPClient, IdExplicitTLSClientServerBase,
 IdMessageClient, IdSMTPBase, IdSMTP, IdIOHandler, IdIOHandlerSocket, IdSSL,
 IdIOHandlerStack, IdMessage, IdSSLOpenSSL;

type
 TSendAMail = class(TForm)
 mem: TMemo;
 procedure FormClose(Sender: TObject; var Action: TCloseAction);
private
public
 constructor create (const s: string);
end;

implementation

{$R *.dfm}

var
 ahost, apassword, ausername, curstatus, fn: string;
 caller: thandle;

function DoEmail (p: pointer): longint; stdcall;
var
 ssl: TIdSSLIOHandlerSocketOpenSSL;
 email: TIdMessage;

begin
 caller:= THandle (p);
 email:= TIdMessage.create;
 with email do
  begin
   loadfromfile (fn);
   // OnInitializeISO:= ??
  end;

 deletefile (fn); 
 ssl:= TIdSSLIOHandlerSocketOpenSSL.create;
 ssl.SSLOptions.SSLVersions:= [sslvTLSv1];

 with TIdSMTP.create do  
  try
   //OnStatus:= ??
   iohandler:= ssl;
   host:= ahost;
   password:= apassword;
   username:= ausername;
   port:= 587;
   useTLS:= utUseExplicitTLS;
   Connect;
   try
    Send (email);
   except
    on E:Exception do;
   end;
  finally
   Disconnect;
   free
  end;
 ssl.free;
 email.free;
 result:= 0
end;

constructor TSendAMail.Create (const s: string);
var
 empty: boolean;
 thrid: dword;

begin
 inherited create (nil);
 fn:= s;
 repeat
  with dm.qGetSMTP do  // this part gets the SMTP definitions from the database
   begin
    open;
    aHost:= fieldbyname ('smtphost').asstring;
    ausername:= fieldbyname ('smtpuser').asstring;
    apassword:= fieldbyname ('smtppass').asstring;
    close
   end;

  empty:= (ahost = '') or (ausername = '') or (apassword = '');
  if empty then
   with TGetSMTP.create (nil) do   // manage77a
    try
     execute
    finally
     free
    end;
 until not empty;
 CreateThread (nil, 0, @DoEmail, pointer (self.handle), 0, thrid);
 close
end;

procedure TSendAMail.FormClose(Sender: TObject; var Action: TCloseAction);
begin
 action:= caFree
end;

end. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T00:29:28.180

使用`TThread`类而不是`CreateThread()`函数，然后您可以使用类的方法作为事件处理程序，例如：

```
unit Manage77c;

interface

procedure SendAMail (const AFileName: string);

implementation

uses
 SysUtils, Classes, IdBaseComponent, IdComponent, IdTCPConnection, IdTCPClient,
 IdExplicitTLSClientServerBase, IdMessageClient, IdSMTPBase, IdSMTP, IdIOHandler,
 IdIOHandlerSocket, IdSSL, IdIOHandlerStack, IdMessage, IdSSLOpenSSL;

type
  TEmailThread = class(TThread)
  private
    FFileName: string;
    FHost: string;
    FPassword: string;
    FUsername: string;
    ...
    procedure DoInitializeISO(var VHeaderEncoding: Char; var VCharSet: string);
    procedure DoStatus(ASender: TObject; const AStatus: TIdStatus; const AStatusText: string);
    ...
  protected
    procedure Execute; override;
  public
    constructor Create(const AFileName, AHost, APassword, AUsername: string); reintroduce;
  end;

constructor TEmailThread.Create(const AFileName, AHost, APassword, AUsername: string);
begin
  inherited Create(False);
  FreeOnTerminate := True;
  FFileName := AFileName;
  FHost := AHost;
  FPassword := APassword;
  FUsername := AUsername;
  ...
end;

procedure TEmailThread.Execute;
var
  smtp: TIdSMTP;
  ssl: TIdSSLIOHandlerSocketOpenSSL;
  email: TIdMessage;
begin
  email := TIdMessage.Create(nil);
  try
    email.LoadFromFile(FFileName);
    email.OnInitializeISO := DoInitializeISO;

    DeleteFile (FFileName); 

    smtp := TIdSMTP.Create(nil);
    try
      ssl := TIdSSLIOHandlerSocketOpenSSL.Create(smtp);
      ssl.SSLOptions.SSLVersions := [sslvTLSv1];

      smtp.OnStatus := DoStatus;
      smtp.IOHandler := ssl;
      smtp.Host := FHost;
      smtp.Password := FPassword;
      smtp.Username := FUsername;
      smtp.UseTLS := utUseExplicitTLS;
      smtp.Port := 587;

      smtp.Connect;
      try
        smtp.Send(email);
      finally
        smtp.Disconnect;
      end;
    finally
      smtp.Free;
    end;
  finally
    email.Free;
  end;
end;

procedure TEmailThread.InitializeISO(var VHeaderEncoding: Char; var VCharSet: string);
begin
  ...
end;

procedure TEmailThread.DoStatus(ASender: TObject; const AStatus: TIdStatus; const AStatusText: string);
begin
  ...
end;

procedure SendAMail (const AFileName: string);
var
  host, user, pass: string;
begin
  repeat
    // this part gets the SMTP definitions from the database
    dm.qGetSMTP.Open;
    try
      host := dm.qGetSMTP.FieldByName('smtphost').AsString;
      username := dm.qGetSMTP.FieldByName('smtpuser').AsString;
      password := dm.qGetSMTP.FieldByName('smtppass').AsString;
    finally
      dm.qGetSMTP.Close;
    end;

    if (host <> '') and (user <> '') and (pass <> '') then
      Break;

    with TGetSMTP.Create(nil) do   // manage77a
    try
      Execute;
    finally
      Free;
    end;
  until False;

  TEmailThread.Create(AFileName, host, pass, user);
end;

end. 
```

# php - mysql 从 users 表中连续加入 2 个 user_ids

> ID：15463265
> 
> 赞同：1
> 
> 时间：2013-03-17T16:35:58.873
> 
> 标签：php, mysql, codeigniter, activerecord, join

有2张桌子：

```
orders:
id   requester_id   supplyer_id  status
1    423            1           reserved
2    500            1           supplied
3    222            2           reserved
...

users
id    username  register_date
1     admin     2012-01-01
2     smith     2013-01-01
...
423   John      2012-10-11
500   Doe       2012-12-11
222   name      2012-10-13 
... 
```

我想加入这两个表并得到这个结果

```
id  requester_username   supplier_username  status
1   John                 admin              reserved
2   Doe                  admin              supplied
3   name                 smith              reserved 
```

我实际上可以使用活动记录加入这些表，例如：

```
$this->db->select('orders.*,users.username')
   ->from('orders')
   ->join('users','users.id = orders.requester_id')
   ->get()->result(); 
```

但我不知道如何同时获得`supplier username`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T16:46:53.420

尝试添加第二个 JOIN：

```
$this->db->select('orders.*,requesters.username,suppliers.username')
   ->from('orders')
   ->join('users AS requesters', 'requesters.id = orders.requester_id')
   ->join('users AS suppliers',  'suppliers.id  = orders.supplier_id')
   ->get()->result(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T16:47:34.250

在 MySql 你的查询应该像 -

```
Select a.id, b.username, c.username, a.status
from orders a, users b, users c
where
a.requester_id = b.id 
And
a.supplyer_id = c.id 
```

谢谢

# oracle - 简单的 Oracle UPDATE 语句性能异常糟糕

> ID：15463266
> 
> 赞同：3
> 
> 时间：2013-03-17T16:36:02.177
> 
> 标签：oracle, performance

每个月我都会在我的 oracle 数据库上做一个简单的更新语句。但是，从星期一开始需要很长时间。该表每月增长 5%。现在存储了 800 万条记录。

该声明：

```
update /*+ parallel(destination_tab, 4) */ destination_tab dest    
   set (full_name, state) =   
       (select /*+ parallel(source_tab, 4) */ dest.name, src.state   
        from source_tab src   
        where src.city = dest.city); 
```

实际上有 20 个字段要更新，不仅是两个……但这样看起来更容易描述问题。

解释计划：

```
-----------------------------------------------------------------------------------------------------                               
| Id  | Operation                    | Name                 | Rows  | Bytes | Cost (%CPU)| Time     |                                   
-----------------------------------------------------------------------------------------------------                               
|   0 | update statement             |                      |  8517K|  3167M|   579M (50)|999:59:59 |                                   
|   1 |  update                      | destination_tab      |       |       |            |          |
|   2 |   PX COORDINATOR             |                      |       |       |            |          |
|   3 |    PX SEND QC (RANDOM)       | :TQ10000             |  8517K|  3167M|  6198   (1)| 00:01:27 |
|   4 |     px block iterator        |                      |  8517K|  3167M|  6198   (1)| 00:01:27 |
|   5 |      table access full       | DESTINATION_TAB      |  8517K|  3167M|  6198   (1)| 00:01:27 |
|   6 |   table access by index rowid| SOURCE_TAB           |     1 |    56 |     1   (0)| 00:00:01 |
|*  7 |    index unique scan         | CITY_PK              |     1 |       |     1   (0)| 00:00:01 |
----------------------------------------------------------------------------------------------------- 
```

谁能给我描述一下，这怎么可能？计划看起来很糟糕！非常非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T22:05:42.597

试试下面的。

```
merge
 into destination_tab d
using source_tab      s
   on (d.city = d.city)
when matched then
   update 
      set d.state = s.state
    where decode(d.state, s.state, 1, 0) = 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T16:51:08.783

你没有说多久太长了。您正在加入一个 800 万行的表。不确定 source_tab 中有多少行。

我注意到执行计划表明对destination_tab 进行全表扫描。destination_tab 表上的城市列是否已编入索引？如果没有，请尝试添加索引。如果是，Oracle 可能会忽略它，因为它知道无论如何它都需要返回每个值，并且 destination_tab 是驱动表。

无论您如何优化它，随着表的增长，这总是会降低性能，因为您通过从连接到另一个表的同一个表中获取值来更新每一行。也就是说，您总是在执行 N 次操作，其中 N 是destination_tab 中的行数。

高级问题/建议：

1.  您是否需要每次都更新每一行？是否只有某些行可能更改了值？如果是这样，您能否以某种方式预测您需要更新哪些行并将您的更新限制在其中。
2.  为什么会有提示？如果性能发生变化，我会尝试删除提示。为您找到最佳计划是优化人员的工作。通过使用提示，您是在告诉优化器如何完成它的工作。你最好是对的。
3.  您正在将 destination_tab 上的 full_name 列更新为同一行的 name 列。但是您通过连接到表来获取名称列。将其从您的选择中删除并使用如下所示的内容可能会更快。这是一个猜测。可能没关系。

    ```
    update destination_tab dest    
     set full_name = name,
       state = 
       (select src.state   
        from source_tab src   
        where src.city = dest.city); 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T18:32:12.963

如果这是一个数据仓库，我不会进行更新，尤其是不会更新大表中的每一行。我可能会创建一个结合来自各种基表的片段的[物化视图](http://docs.oracle.com/cd/B28359_01/server.111/b28326/repmview.htm)，并在需要时进行完全刷新（非原子：截断+插入追加）。

编辑：至于为什么当前的更新方法比平时花费更长的时间，我的*猜测*是，在以前的运行中，Oracle 在缓冲区缓存中发现了更新所需的大量块，而最近 Oracle 不得不从磁盘中提取很多内容到先缓冲。您可以查看一致的获取和数据库块获取（逻辑 io）与物理 io（磁盘）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T21:53:08.733

我理解关于数据仓库的意义等的评论。但是，我必须以这种方式进行此更新。更新是 ETL 工作流程的一部分。我必须每个月复制“目标”表的完整 800 万条记录。在这一步之后，我必须进行更新，这会产生问题。

我不明白这个问题，每天的表现是如此糟糕。通常，更新运行 45 分钟。现在，它运行大约 4 个小时。但为什么？没有必要进行排序，因此“在磁盘上排序而不是在主存储器上排序”的著名原因是不可能的。我的情况有什么问题？

正常更新（我是怎么做的）和合并更新之间的性能会有所不同吗？

# android - 使用带有 Holo 主题的 Sherlock 显示 AlertDialog？

> ID：15463274
> 
> 赞同：2
> 
> 时间：2013-03-17T16:36:40.773
> 
> 标签：android, actionbarsherlock

在 Android 2.3.4 上使用 Sherlock：我想展示一个`AlertDialog`包含：

1)A 标题
2)A 内容
3)2 按钮
我正在使用以下**类**：

```
public class MyAlertDialog extends SherlockDialogFragment{

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
          // Use the Builder class for convenient dialog construction

        AlertDialog.Builder builder = new AlertDialog.Builder(getSherlockActivity());
        builder.setMessage("Title")
               .setPositiveButton("Fire!", new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {
                       // FIRE ZE MISSILES!
                   }
               })
               .setNegativeButton("cancel", new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {
                       // User cancelled the dialog
                   }
               });
        // Create the AlertDialog object and return it
        return builder.create();
    }

} 
```

在我的**活动**中，我正在打电话：

```
MyAlertDialog m = new MyAlertDialog();
m.show(getSupportFragmentManager(), "hey"); 
```

它正在显示 AlertDialog 但使用旧主题（请记住我使用的是 Android 2.3.4）

如果您愿意，这是我的整个主要活动课程：

```
public class MainActivity extends SherlockFragmentActivity{

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        ActionBar ab;
        ab = getSupportActionBar();
        ab.setTitle("Testing Sherlock"); 

    }
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // TODO Auto-generated method stub
        getSupportMenuInflater().inflate(R.menu.main, menu);

        return super.onCreateOptionsMenu(menu);
    }
    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        // TODO Auto-generated method stub
        switch(item.getItemId())
        {
        case R.id.action_one:
            MyAlertDialog m = new MyAlertDialog();
            m.show(getSupportFragmentManager(), "hey");
            break;
        }
        return super.onOptionsItemSelected(item);
    }
} 
```

我为我的应用设置的样式是：

```
<resources>
<style name="AppBaseTheme" parent="@style/Theme.Sherlock.Light">
</resources> 
```

PS：我有`ActionBar`显示，除了主题之外一切正常`AlertDialog`。
我希望它看起来像这样：

![在此处输入图像描述](../Images/4d570906968910cc14f202e7a3998340.png)

而不是这样的：

![在此处输入图像描述](../Images/95412510ec4a7683091eed3b1c522dad.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T08:52:08.680

创建样式：

```
<resources>
    <style name="MyFragment">
        <item name="android:windowFrame">@null</item>
        <item name="android:windowBackground">@android:color/transparent</item>
        <item name="android:windowIsFloating">true</item>
        <item name="android:windowContentOverlay">@null</item>
        <item name="android:windowTitleStyle">@null</item>
        <item name="android:colorBackground">#ffffff</item>
        <item name="android:windowAnimationStyle">@android:style/Animation.Dialog</item>
        <item name="android:windowSoftInputMode">stateUnspecified|adjustPan</item>
        <item name="android:backgroundDimEnabled">true</item>
        <item name="android:textColor">#FF0000</item>
    </style>
</resources> 
```

在您的 SherlockFragmentActivity 中：

```
public class MyDialogFragment extends SherlockDialogFragment {
    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity(), R.style.MyFragment);
        // Get the layout inflater
        LayoutInflater inflater = getActivity().getLayoutInflater();
        final View view = inflater.inflate(R.layout.custom_layout, null);
        ....
    }
} 
```

**R.style.MyFragment**是样式。

**R.style.custom_layout**是 AlertDialog 的自定义布局。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-12T12:59:09.593

这个库看起来很适合全息风格的 android 对话框 [https://github.com/inmite/android-styled-dialogs](https://github.com/inmite/android-styled-dialogs)

![android风格的对话框](../Images/5cd241f3e323de4526df524bf0dfad78.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T17:06:33.440

I have already done this, I don't remember the exact steps I took, but the general approach is:

Copy the XML alert_dialog_holo (I think that is the name) from:
android sdk folder\platforms\android-version using holo\data\res\layout
to your project.

I think you have to make some changes in order to make it work correctly (I don't know anymore what I have done exactly, but I believe to remember you must remove the "android:" prefix from some style definitions, then they will be recognized by ABS.

Maybe you also need styles generated from this [tool](http://android-holo-colors.com/), but I don't know if they are implied to make it work.

Also take a look at this [question](https://stackoverflow.com/questions/2795300/how-to-implement-a-custom-alertdialog-view) the corresponding answers will lead you the way how to inflate your own XML in your Dialog

# node.js - 在 node.js 中将数据存储在数组中

> ID：15463277
> 
> 赞同：0
> 
> 时间：2013-03-17T16:36:57.860
> 
> 标签：node.js, socket.io

我正在试验 node.js 构建一个聊天服务器应用程序，所以我试图在数组中维护客户端连接，为每个在数组中插入客户端对象的新连接增加索引。我不喜欢这个解决方案，因为我认为它太轻了，我在每次断开连接时都在数组中放置了孔，并且发现需要很长时间在数组中进行迭代以找到某个连接。处理多个连接的“节点”方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T16:43:48.487

作为记录，我在这里的理解是，您正在尝试跟踪客户以了解向谁广播？我认为这是基于您之前提出的我看到的问题。

我相信这类似于 socket.io 在内部处理房间的方式。自从我真正研究它以来已经有一段时间了，但我相信这就是它的完成方式。话虽如此，我过去所做的是每次聊天都使用房间。类似于连接成员的用户名/用户 ID 的东西。这样，当您在连接上获取数据时，您可以轻松地将其广播回同一个房间，这会将其发送到房间中的所有连接，但接收它的那个连接除外。非常适合聊天应用程序。Socket.io 将处理跟踪哪些连接在哪个房间中。

# c# - C# SQL 连接

> ID：15463290
> 
> 赞同：0
> 
> 时间：2013-03-17T16:38:32.267
> 
> 标签：c#, sql-server

我想使用 GUI 创建简单的应用程序，我可以在其中输入必须使用此字符串更新的**SQL Server名称和 ID：**

```
update docs SET locked=0 WHERE ID=(id entered in GUI) 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-17T16:40:41.490

您可以编写一个 C# 函数来执行更新：

```
public int Update(int id)
{
    string connectionString = "... put the connection string to your db here ...";
    using (var conn = new SqlConnection(connectionString))
    using (var cmd = conn.CreateCommand())
    {
        conn.Open();
        cmd.CommandText = "UPDATE docs SET locked = 0 WHERE ID = @id";
        cmd.Parameters.AddWithValue("@id", id);
        return cmd.ExecuteNonQuery();
    }
} 
```

然后你可以通过传递一些你从 UI 获得的动态值来调用这个函数：

```
int id;
if (int.TryParse(someTextBox.Text, out id))
{
    int affectedRows = Update(id);
    if (affectedRows == 0)
    {
        MessageBox.Show("No rows were updated because the database doesn't contain a matching record");
    }
}
else
{
    MessageBox.Show("You have entered an invalid ID");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T16:51:54.303

.Net 框架使用 ADO.Net 进行 SQL 连接。ADO.Net 中的一个简单查询可以这样执行：

```
SqlConnection conn = new SqlConnection("Data Source=(local);Initial Catalog=Yourdatabase;Integrated Security=SSPI");
int res = 0;
try
{
conn.Open();
SqlCommand cmd = new SqlCommand("update docs SET locked=0 WHERE ID= @id");
cmd.Parameters.AddWithValue("@id", txtid.text);
res = cmd.ExecuteNonQuery();
}catch(Exception err){ 
MessageBox.Show(err.getMessage());
}finally{
conn.Close();
} 
```

1.  将连接字符串更改为您自己的连接字符串。

2.  如果您使用的是 SQL Express，请将（本地）更改为 localhost\SQLEXPRESS。

3.  将“txtid.text”更改为可以为您获取 ID 的任何语句。

4.  您还可以检查 res 以找出受影响的行数。

# php - 从 Elastic Beanstalk 安装 PHP 模块

> ID：15463293
> 
> 赞同：4
> 
> 时间：2013-03-17T16:38:44.370
> 
> 标签：php, mongodb, amazon-elastic-beanstalk

我正在尝试配置我的 AWS Elastic Beanstalk 以使用 mongo，我需要做的就是安装 PHP 的 mongo 驱动程序并更新 php.ini 文件

为此，通常我会通过 ssh 进入 EC2 并运行：

```
sudo pecl install mongo 
```

但这需要使用自定义 AMI，这不是最好的方法。

最好使用配置文件将所需的软件安装到标准 AMI 上。

为此，我做了以下工作： 创建目录 .ebextensions 创建文件 mongo.config

在里面我放了以下内容：

```
packages: 
pecl: install mongo 
```

但是在部署时，我收到以下错误：

```
"option_settings" in one of the configuration files failed validation. More details to follow. 
```

和

```
'null' values are not allowed in templates 
```

所以我想知道这个配置文件需要如何布局才能安装 mongo 扩展？

我在这里阅读了信息：http: [//docs.aws.amazon.com/elasticbeanstalk/latest/dg/customize-containers-ec2.html](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/customize-containers-ec2.html)

但我不太了解如何执行此特定任务

帮助将不胜感激，谢谢！:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-21T08:31:03.057

`pecl`不是 Amazon Linux 上的有效包管理器，因此不能在配置`packages`键下使用`.ebextensions`。

要安装 PECL 包，只需在键下添加一个命令即可`commands`。为避免 Beanstalk 在后续部署中尝试安装扩展两次，请在`test`键中添加一个 PHP 控制台命令，以检查扩展是否已安装：

```
commands:
  install_mongo_driver:
    command: pecl install mongo
    test: "php -r \"exit(extension_loaded('mongo') ? 1 : 0);\"" 
```

如果`test`结果是`true`, ie `exit(0)`，则`command`执行 - 否则不执行。请注意，退出代码`0`在 shell 上下文中表示“无错误”。

另请参阅[http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/customize-containers-ec2.html#customize-containers-format-commands](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/customize-containers-ec2.html#customize-containers-format-commands)上的描述。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T08:57:00.237

我已经想通了，并认为我会分享我的发现。感谢 Hudku ( [http://blog.hudku.com/2013/02/innocuous-looking-evil-devil.html#elastic-beanstalk.config](http://blog.hudku.com/2013/02/innocuous-looking-evil-devil.html#elastic-beanstalk.config) ) 的优秀文章：

1) 创建 myapp.config 2) 在其中输入以下内容

```
packages:
    yum:
        dos2unix: []

container_commands:
    01-command:
        command:        rm -rf /myapp/ebextensions

    02-command:
        command:        mkdir -p /myapp/ebextensions

    03-command:
        command:        cp -R .ebextensions/* /myapp/ebextensions/

    04-command:
        command:        dos2unix -k /myapp/ebextensions/mongo.sh

    05-command:
        command:        chmod 700 /myapp/ebextensions/mongo.sh

    06-command:
        command:        bash /myapp/ebextensions/mongo.sh 
```

然后创建 mongo.sh 文件并在其中放入如下内容：

```
#!/bin/bash

if [ ! -f /mongostatus.txt ];
then
    pecl install mongo
    echo "mongo extension installed" > /mongostatus.txt
    apachectl restart
fi 
```

这将安装 mongo php 扩展并重新启动 apache，以便安装生效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T15:14:44.253

由于上面的答案，我刚刚完成了同样的事情，并且发现对于那些感兴趣的人来说，它可以用更少的行和更少的文件来完成......

```
# ~/project/.ebextensions/project.config
# Logger messages can be viewed in /var/log/messages

files:
    "/tmp/test.sh":
        content: |
            # This file will be created and can then
            # be executed by a command call below.
            logger TEST FILE CALLED

commands:
    01-command:
        command: logger CALLING TEST FILE; sh /tmp/test.sh; 
```

# ruby-on-rails - /stylesheets/products.css.scss 中的 CSS 代码未执行

> ID：15463295
> 
> 赞同：0
> 
> 时间：2013-03-17T16:38:52.937
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个产品脚手架，并且我在 /stylesheets/products.css.scss 文件中放置了一些自定义 css 代码，现在当我运行服务器并查看渲染的 html 文件 (/products/index.html.erb) 时，**我不是看到 css 被渲染**

我究竟做错了什么 ？application.css 有

```
 /*
 *= require_tree .
 *= require_self
 */ 
```

# javascript - 如何在phonegap中以li格式显示json内容

> ID：15463296
> 
> 赞同：2
> 
> 时间：2013-03-17T16:39:04.670
> 
> 标签：javascript, jquery, json, cordova

我可以得到以下格式的json

```
[{"data":{"id":"1","user_name":"StudentA","book":"123","role":"Student"}},
{"data":{"id":"3","user_name":"StudentB","book":"456","role":"Student"}}] 
```

我如何使用数据呈现如下图，其中第一行是用户名，第二行是书

![我如何使用数据呈现如下图，其中第一行是用户名，第二行是书](../Images/6e6ec7b7ecdc1b1caddfb90311759e41.png)

```
<button type="button" id="test">Test 123</button>

 <ul id="studentList" data-role="listview" data-filter="true"></ul> 
```

```
var serviceURL = "http://mydomain.com/";
var students;

    $("#test").click(function()
    {   
        getStudentList();
    });
function getStudentList() {
    $.getJSON(serviceURL + 'getStudents.php', function(data) {
        $('#studentList li').remove();
        students = data.user_name;
        $.each(students, function(index, student) {
            $('#studentList').append('<li>' +
                    '<h4>' + student.user_name + ' ' + student.password + '</h4>' +
                    '<p>' + student.user_name + '</p>' +
                    '</li>');
        });
        $('#studentList').listview('refresh');
    });
} 
```

请问上面的代码是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T16:53:50.743

您将响应命名为`data`..因为您的响应在数组中，所以`[]`您必须先循环`data`..再次获取它的对象，即数据..

```
[{"data":{"id":"1","user_name":"StudentA","book":"123","role":"Student"}},
//-^^^^---here 
```

并在循环中获取相应的名称和密码对象...您可以通过`.`操作员获取..所以在循环中，`student.data.user_name`为您提供用户名，`student.data.book`为您提供书籍和类似的其他人...

试试这个...

```
$.getJSON(serviceURL + 'getStudents.php', function(data) {
    $('#studentList li').remove();
  //students = data.user_name;
    $.each(data, function(index, student) {
        $('#studentList').append('<li>' +
                '<h4>' + student.data.user_name +'</h4>' +  //here get username
                '<p>' + student.data.book + '</p>' +   //here get book
                '</li>');
    });
    $('#studentList').listview('refresh');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T16:57:20.260

我是根据您的输入完成的，您只需将其包含到您的代码中即可。我不知道您所说的“第二行是书”是什么意思，因为您的 json 输入中没有包含书 + 您正在尝试访问输入中也不存在的“student.data.password”。简单版 jsFiddle [http://jsfiddle.net/2KMd9/](http://jsfiddle.net/2KMd9/)

```
var json =[{"data":{"id":"1","user_name":"StudentA","book":"123","role":"Student"}},
    {"data":{"id":"3","user_name":"StudentB","book":"456","role":"Student"}}];

    var students = json;
    $.each(students, function(index, student) {
        $('#studentList').append('<li>' +
                '<h4>' + student.data.user_name + '</h4>' +
                '<p>' + student.data.role + '</p>' +
                '</li>');
    }); 
```

因此，对于您的需求：

```
function getStudentList() {
    $.getJSON(serviceURL + 'getStudents.php', function(data) {
        $('#studentList li').remove();

        $.each(data, function(index, student) {
                $('#studentList').append('<li>' +
                '<h4>' + student.data.user_name + '</h4>' +
                '<p>' + student.data.role + '</p>' +
                '</li>');
        });
        $('#studentList').listview('refresh');
    });
} 
```

# windows-phone-7 - 尝试使用 XNA 播放音效

> ID：15463299
> 
> 赞同：0
> 
> 时间：2013-03-17T16:39:37.070
> 
> 标签：windows-phone-7

我正在为 windows phone 编写我的第一个应用程序，它将是一个音板，使用 XNa 的音效对象。

该项目是一个 Windows 手机 Silverlight 和 Xna 应用程序 c#

我从书中得到了一些示例代码，101 phone 7 应用程序。在声音中加载的 linbe 给了我一个“找不到类型 StreamResourceInfo 命名空间”

StreamResourceInfo info = Application.GetResourceStream(new Uri("Audio/cowbell.wav", UriKind.Relative));

编码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using Microsoft.Phone.Controls;
using Microsoft.Xna.Framework.Audio;

namespace SlXnaApp4
{
public partial class MainPage : PhoneApplicationPage
{
    SoundEffect cowbell;

    // Constructor
    public MainPage()
    {
        // Load sound file

        StreamResourceInfo info = Application.GetResourceStream(new Uri("Audio/cowbell.wav", UriKind.Relative));

        // create xna sound
        cowbell = SoundEffect.FromStream(info);

        // Sub to per frame call back
        CompositionTarget.Rendering += CompositionTarget_Rendering;

        // requred for xna sound effects to work
        Microsoft.Xna.Framework.FrameworkDispatcher.Update();

        // testb sound
        cowbell.Play();

        InitializeComponent();
    }

    void CompositionTarget_Rendering(object sender, EventArgs e)
    {
        Microsoft.Xna.Framework.FrameworkDispatcher.Update();
    }

    // Simple button Click event handler to take us to the second page
    private void Button_Click(object sender, RoutedEventArgs e)
    {
        NavigationService.Navigate(new Uri("/GamePage.xaml", UriKind.Relative));
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {

    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T00:29:21.657

[为System.Windows.Resources](http://msdn.microsoft.com/en-us/library/system.windows.resources.streamresourceinfo%28v=vs.95%29.aspx)添加 using 指令：

```
using System.Windows.Resources; 
```

# php - 为什么我看不到我在第一个脚本中设置的请求变量？

> ID：15463301
> 
> 赞同：2
> 
> 时间：2013-03-17T16:39:41.180
> 
> 标签：php, request, superglobals

当我尝试从我在第一个脚本中设置`status`的`$_REQUEST[]`数组中检索变量时（然后进行重定向），我只看到一个警告`Undefined index: status`。这是为什么 ？

```
<?php
        $_REQUEST['status'] = "success";
        $rd_header = "location: action_script.php";
        header($rd_header);
?> 
```

* * *

*动作脚本.php*

```
<?php
echo "Unpacking the request variable : {$_REQUEST['status']}"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T16:41:41.293

您正在寻找的是[会话](http://www.php.net/manual/en/book.session.php)：

```
<?php
    session_start();
    $_SESSION['status'] = "success";
    $rd_header = "location: action_script.php";
    header($rd_header);
?>

<?php
    session_start();
    echo "Unpacking the request variable : {$_SESSION['status']}"; 
```

请注意在`session_start()`两页顶部添加的。正如您将在我发布的链接中看到的那样，这是必需的，并且必须在您希望使用会话的所有页面上。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-17T16:46:45.737

这是因为您的`header()`语句将用户重定向到一个全新的 URL。任何`$_GET`或`$_POST`参数都不再存在，因为我们不再在同一页面上。

你有几个选择。

1-首先，您可以使用`$_SESSION`跨页面重定向来持久化数据。

```
session_start();
$_SESSIONJ['data'] = $data; 
// this variable is now held in the session and can be accessed as long as there is a valid session. 
```

2- 重定向时将一些获取参数附加到您的 URL -

```
$rd_header = "location: action_script.php?param1=foo&param2=bar";
header($rd_header);
// now you'll have the parameter `param1` and `param2` once the user has been redirected. 
```

对于第二种方法，[此文档可能很有用](http://us.php.net/manual/en/function.http-build-query.php)。它是一种从名为 的数组创建查询字符串的方法`http_build_query()`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-17T16:46:43.870

您正在寻找的可能是发送一个 GET 参数：

```
$rd_header = "Location: action_script.php?status=success";
header($rd_header); 
```

可以通过以下方式检索`action_script.php`：

```
$_GET['status']; 
```

在这种情况下，您实际上并不需要会话或 cookie，但您必须考虑用户可以轻松编辑 GET 帖子这一事实。

# clojure - Compojure：嵌套路由问题

> ID：15463302
> 
> 赞同：1
> 
> 时间：2013-03-17T16:39:47.070
> 
> 标签：clojure, compojure

我正在尝试在我的应用程序中设置路由，以便：

*   /:locale/ -> Home，带有区域绑定
*   /:locale/search -> 搜索，使用语言环境绑定

到目前为止，我的路由代码是：

```
(defn controller-routes [locale]
  (home/c-routes locale)
  (search/c-routes locale)))

(defroutes app-routes
  (route/resources "/")
  (context "/:locale" [locale]
    (controller-routes locale))
  no-locale-route
  (route/not-found "Not Found")) 
```

搜索/c-路线：

```
(defn c-routes [locale]
 (GET "/search" [] (index locale))) 
```

家/ c路线：

```
(defn c-routes [locale]
   (GET "/" [] (index locale))) 
```

我不明白为什么这不能正常工作，但目前“/uk/search/”匹配正确，但“/uk/”给出了 404 页面。

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T16:57:00.553

`controller-routes`是一个正常的函数，它现在返回最后一条路线，即搜索，因此只有搜索有效。您需要的是`controller-routes`使用`defroutes`和更改 c-routes 来制作路线：

搜索/c-路线：

```
(def c-routes (GET "/search" [locale] (index locale))) 
```

家/ c路线：

```
(def c-routes (GET "/" [locale] (index locale))) 
```

您使用上述路线的地方：

```
(defroutes controller-routes
  home/c-routes
  search/c-routes)

(defroutes app-routes
  (route/resources "/")
  (context "/:locale" [locale]
    controller-routes)
  no-locale-route
  (route/not-found "Not Found")) 
```

# android - 将平板电脑布局缩放到手机

> ID：15463307
> 
> 赞同：-1
> 
> 时间：2013-03-17T16:40:13.113
> 
> 标签：android, layout, layout-inflater

我有一个设计用于 10 英寸平板电脑的 (RelativeLayout) 布局 xml。我现在希望当应用程序在手机上运行时显示相同的布局。而不是只显示部分，我希望它被缩放，这样结构是一样的，只是一切都小了一点。

我已经：

*   在网上搜索 - 没有结果
*   阅读 LayoutInflaters - 但不知道我可以在哪里设置比例
*   尝试使用反射“覆盖”默认窗口的密度 - 没有结果

请注意，我知道这是不好的做法，但这只是一个个人项目，我很想知道这是否可能。

非常感谢任何帮助！

编辑：我想要的是真正缩放整个屏幕。我不是原始布局的作者，因为它是我想在手机上使用的平板电脑的开源项目。这里是源码：[https](https://github.com/amigold/Gui2Go) ://github.com/amigold/Gui2Go 我说的布局是main.xml。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T16:49:49.113

我的名声太低，无法要求您提供示例布局，而且我的建议没有使用完全相同的布局。但是，您可以创建具有相同 id 标签和 filename.xml 的布局，其中 10 英寸平板电脑版本位于 res/layout-sw600dp 文件夹中，手机版本位于 res/layout 中。/layout-sw600dp 中的布局将自动用于较大的屏幕，而 /layout 中的布局将用于较小的屏幕。您根本不必更改 setContentView() 调用。

见：http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

# c++ - 使用 Makefile 构建 cuda 和 boost 库

> ID：15463315
> 
> 赞同：0
> 
> 时间：2013-03-17T16:40:57.260
> 
> 标签：c++, boost, cuda, makefile, nvcc

我有一个`makefile`：

```
projectx: component1.obj \         
nvcc -O3 -arch=sm_20 -lcuda -o projectx component2.obj

component1.obj : component1.cu component1.h 
    nvcc -O3 -arch=sm_20 -c component1.cu
component2.obj : component2.cu cm.h component2.h
nvcc -O3 -arch=sm_20 -c component2.cu 
```

`component1.cu`包含`#include <boost/lambda/lambda.hpp>` ，当我尝试用`nmake`它构建它时告诉我“无法打开包含文件：'boost/lambda/lambda.hpp'”

我应该在这里做什么？如何判断`nvcc`从何处获取此包含文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T17:27:09.050

使用`-I`旗帜。例如`-I/opt/cuda-toolkit/include`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:58:48.037

通过将`boost`“包含”文件放入解决`C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\`

# c++ - 一种在 C++ 中交换两个引用的方法

> ID：15463321
> 
> 赞同：5
> 
> 时间：2013-03-17T16:41:33.110
> 
> 标签：c++, pointers, reference

这实际上是交换两个参考的坏主意。引用不应该是可重置的，因此它不应该是可能的。我知道的就这么多。

我想要做的是交换两个引用，以一种交换两个指针的方式：**交换地址**但**不交换数据**。认为：

```
int a = 0, b = 1;
int *pA = &a, *pB = &b;
std::swap(pA, pB); 
```

现在 *pA 为 1 且 *pB 为 0，但 a 仍为 0 且 b 仍为 1。但是，这对于引用是不可能的：

```
int a = 0, b = 1;
int &rA = a, &rB = b;
std::swap(pA, pB); 
```

现在交换了引用，但也交换了原始值。我唯一能想到的是：

```
template <class _Ty>
struct resetable_ref {
    _Ty &ref;

    inline resetable_ref(resetable_ref &r)
        :ref(r.ref)
    {}

    inline resetable_ref(_Ty &_ref)
        :ref(_ref)
    {}

    inline resetable_ref &operator =(resetable_ref &r)
    {
        if(sizeof(resetable_ref) == sizeof(void*)) // compile-time constant (true)
            *reinterpret_cast<void**>(this) = *reinterpret_cast<void**>(&r);
        else
            memcpy(this, &r, sizeof(resetable_ref)); // optimized away as dead code
        return *this;
    }

    inline operator _Ty &()
    {
        return ref;
    }
};

int a = 0, b = 1;
resetable_ref<int> rrA(a), rrB(b);
std::swap(rrA, rrB); 
```

现在 a 仍然是 0 而 b 仍然是 1，并且 rrA 和 rrB 内部的引用被交换了。遗憾的是，如果没有相当丑陋的运算符 =()，它就无法工作。至少它在 MSVC 中对我有用，不确定 g++ 是否会接受它（但我想它应该）。

整个引用交换应该用于一个对象，该对象是通过对内部另一个对象的引用构造的，我想在它们上创建一个 swap() 函数。我想避免使用指针，因为引用的非空值特性很好。它也将是一个更好的设计（resetable_ref 本身除外）。

有没有人对如何去做有更好的想法？谁能想到一些可能遇到的兼容性/未定义的行为问题？

我写了大部分代码没有编译，如果你发现一些错别字，请多多包涵。

**编辑**：在我看来，很多人都忽略了问题的重点。我知道如何使用指针，甚至知道如何将指针包装在一个漂亮的模板中。这个问题被标记为“ *hack* ”，这是预期的。不要告诉我诸如“不要这样做，使用指针”之类的东西，因为那不是我所要求的。如果您不喜欢该主题，请不要回答，但不要仅仅因为您会使用指针而对问题投反对票。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T17:20:59.557

可变引用是......不再是指针，您需要像引用一样隐式取消引用。

```
template<class T>
class mutable_ref
{
public:
    mutable_ref(T& t) :p(&t)
    {}

    operator T&() { return *p; }
    operator const T&() const { return *p; }

    void swap(mutable_ref& s)
    { std::swap(p,s.p); }

private:
    T* p;
};

// just in case you also want to specialize std::swap for mutable_ref.
// not necessary, since the generic std::swap<T> use twice =, that is available.
namespace std
{
    template<class T>
    void swap(mutable_ref<T>& a, mutable_ref<T>& b)
    { a.swap(b); }
} 
```

请注意，缺少默认 ctor，初始化 ctor 获取引用，这使得此类不可为空。

唯一的问题是，要访问最终的 T 成员，成为“。” 运算符，不可覆盖，为此您需要其他东西。

简单的事情是使用 * 和 -> 作为...

```
T* operator->() const { return p; }
T& operator*() const { return *p; } 
```

在`mutable_ref`声明中定义-

# jquery - 如何防止在页面和动态 url 中加载所有 flexigrid 表

> ID：15463329
> 
> 赞同：0
> 
> 时间：2013-03-17T16:42:26.250
> 
> 标签：jquery, jquery-ui, jquery-plugins, flexigrid

我有一个带有手风琴（jquery ui）的网页，这个手风琴的每个折叠都有一个 flexigrid 表。当我加载网页时，所有的 flexigrid 表都被加载，即使我只是在手风琴的折叠中显示其中一个。

我一次只需要加载一个flexigrid，而且，每个折叠都必须有一个具有不同url的flexigrid表，我该如何实现？无论如何动态更改flexigrid表的url（我的意思是执行时间）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T16:52:38.690

在您的页面上放置代码以初始化默认扩展手风琴项的第一个网格。使用`beforeActivate`手风琴事件触发该面板的 flexigrid 的初始化。

```
$( ".selector" ).accordion({
  beforeActivate: function( event, ui ) {}
}); 
```

使用此事件根据要打开的面板获取一些变量，该面板将确定您将使用哪个 url。根据需要添加其他保护措施（表格是否已加载，在表格加载完成之前不要展开面板等）。

# jboss - Jboss5.01GA RMI EJB3.0

> ID：15463337
> 
> 赞同：0
> 
> 时间：2013-03-17T16:43:03.513
> 
> 标签：jboss, rmi, remoting

我有一个安装了 Jboss5.0.1GA 服务器的云实例。服务器实例包含一个公共 IP 和一个自然 IP 地址。我已经使用带有 ip(natted) 地址的 -b 运行 Jboss 服务器，并且 web url 工作正常。现在我正在创建 Java 外部客户端来访问部署在 Jboss 服务器中的 EJB3 bean，在那里我得到了异常并尝试使用 google 解决方案，这对我的情况没有帮助。找到下面的代码，它告诉我在外部客户端中使用什么来访问 EJB3。

```
 properties = new Properties();
            properties.load(stream);
            // Set the context
            Hashtable ht = new Hashtable();
            ht.put(Context.INITIAL_CONTEXT_FACTORY,
                    "org.jnp.interfaces.NamingContextFactory");
            ht.put(Context.PROVIDER_URL,"public ip address");
            ht.put(Context.URL_PKG_PREFIXES,
                    "org.jboss.naming:org.jnp.interfaces");
            // Find and create a reference to the bean using JNDI
            context = new InitialContext(ht); 
```

在执行它时 localhost 它工作正常。连接远程时抛出异常。“javax.naming.CommunicationException [根异常是 java.rmi.ConnectException：连接拒绝主机：”。任何人都可以帮助我。

`这是我的连接器文件（ejb3-connectors-jboss-beans.xml）。

EJB3 连接器

-->

```
JBoss Remoting Connector  

Note: Bean Name "org.jboss.ejb3.RemotingConnector" is used
as a lookup value; alter only after checking java references
to this key. 
```

-->

```
<property name="invokerLocator">

  <value-factory bean="ServiceBindingManager"
    method="getStringBinding">
    <parameter>
      jboss.remoting:type=Connector,name=DefaultEjb3Connector,handler=ejb3
    </parameter>
    <parameter>
      <null />
    </parameter>
    <parameter>socket://${jboss.bind.address}:${port}</parameter>
    <parameter>
      <null />
    </parameter>
    <parameter>3873</parameter>
  </value-factory>

</property>
<property name="serverConfiguration">
  <inject bean="ServerConfiguration" />
</property> 
```

AOP org.jboss.aspects.remoting.AOPRemotingInvocationHandler

`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T16:49:27.200

从远程服务器实例远程登录到您尝试在 jboss 上连接的 ip 和端口。如果这不起作用，那么您必须首先解决网络问题。（让我知道，这样我就可以指导您如何操作）

还要检查您的 EJB3 绑定设置并检查网络。开箱即用的配置看起来像这样..

```
 <mbean code="org.jboss.remoting.transport.Connector"
          xmbean-dd="org/jboss/remoting/transport/Connector.xml"
          name="jboss.remoting:type=Connector,name=DefaultEjb3Connector,handler=ejb3">
      <depends>jboss.aop:service=AspectDeployer</depends>
      <attribute name="InvokerLocator">socket://0.0.0.0:3873</attribute>
      <attribute name="Configuration">
         <handlers>
            <handler subsystem="AOP">org.jboss.aspects.remoting.AOPRemotingInvocationHandler</handler>
         </handlers>
      </attribute>
   </mbean> 
```

谢谢！

@leo。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T08:18:19.757

就我而言，以下两件事对我有用。 `1\. Running Jboss server using run.bat -b **public ip(not nat ip)** -Djboss.bind.address=0.0.0.0 2\. Enabling my **local** machine hosts file to point remote ip to hostname ie remoteip remotehostname`. 希望它对其他人也有帮助。

# android - 在 android 中读取 Firefox 历史记录（不是默认的 android 浏览器）

> ID：15463338
> 
> 赞同：-2
> 
> 时间：2013-03-17T16:43:06.757
> 
> 标签：android, firefox

我是 Android 新手，我找不到任何线索来以编程方式在 Android 上阅读 Firefox 历史记录（不是默认浏览器）。有没有办法获取 Firefox 历史记录。如果是，请告诉我任何链接或线索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T16:44:33.810

可以获取android默认浏览器的历史记录。我试过这个并尝试与其他人一起尝试。

我认为除了默认浏览器之外，不可能获得其他浏览器的历史记录。

# java - JList java调整大小

> ID：15463339
> 
> 赞同：5
> 
> 时间：2013-03-17T16:43:09.397
> 
> 标签：java, swing, jlist

我有一个 JList 的问题。当我选择一个项目时，它会自行调整大小。如何将 JList 设置为固定大小？

这是我选择任何内容之前的屏幕截图

![之前的截图](../Images/f8e532142d14ced61ce919ca84032d46.png)

这是之后

![之后的截图](../Images/ac3e0f9a00af88a4da4897c25e94c4b5.png)

这是我的代码：

```
public class AgendaView extends JFrame {

    private JLabel firstNameLabel, lastNameLabel, adressLabel, phoneNumberLabel, extraInfoLabel;
    private Button editButton, addButton, deleteButton, showButton;
    private JPanel labels, gui, buttons;
    private DefaultListModel model;
    private JList list;
    private JMenuBar menuBar;
    private JMenu menu;
    private JMenuItem newItem, saveItem, saveAsItem, exitItem, openItem;
    private Agenda agenda;
    private JScrollPane scrollPane;

    public AgendaView() {

        super("***Agenda View***");

        menuBar = new JMenuBar();
        menu = new JMenu("Menu");
        menu.add(new JSeparator());
        newItem = new JMenuItem("New");
        saveItem = new JMenuItem("Save");
        saveItem.setEnabled(false);
        saveAsItem = new JMenuItem("Save as..");
        saveAsItem.setEnabled(false);
        exitItem = new JMenuItem("Exit");
        openItem = new JMenuItem("Open");
        saveItem.add(new JSeparator());
        exitItem.add(new JSeparator());
        menu.add(newItem);
        menu.add(openItem);
        menu.add(saveItem);
        menu.add(saveAsItem);
        menu.add(exitItem);

        gui = new JPanel(new BorderLayout(2, 2));
        gui.setBorder(new TitledBorder("Owner"));

        labels = new JPanel(new GridLayout(0, 1, 1, 1));
        labels.setBorder(new TitledBorder("Contact "));

        buttons = new JPanel(new GridLayout(1, 0, 1, 1));

        editButton = new Button("Edit");
        addButton = new Button("Add");
        deleteButton = new Button("Delete");
        showButton = new Button("Show");

        editButton.setEnabled(false);
        addButton.setEnabled(false);
        deleteButton.setEnabled(false);
        showButton.setEnabled(false);

        buttons.add(showButton);
        buttons.add(editButton);
        buttons.add(addButton);
        buttons.add(deleteButton);

        firstNameLabel = new JLabel("First name: ");
        lastNameLabel = new JLabel("Last name: ");
        adressLabel = new JLabel("Adress: ");
        phoneNumberLabel = new JLabel("Phone number: ");
        extraInfoLabel = new JLabel("Extra info: ");

        labels.add(firstNameLabel);
        labels.add(lastNameLabel);
        labels.add(adressLabel);
        labels.add(phoneNumberLabel);
        labels.add(extraInfoLabel);

        model = new DefaultListModel();
        list = new JList(model);
        list.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
        list.setVisibleRowCount(-1);
        list.addListSelectionListener(
                new ListSelectionListener() {
                    @Override
                    public void valueChanged(ListSelectionEvent lse) {
                        String name = list.getSelectedValue().toString();
                        String[] split = name.split(" ");
                        Contact contact = agenda.searchContactbyName(split[0], split[1]);
                        firstNameLabel.setText("First name:   " + contact.getFirstName());
                        lastNameLabel.setText("Last name:   " + contact.getLastName());
                        adressLabel.setText("Adress:   " + contact.getAdress());
                        phoneNumberLabel.setText("Phone number:   " + contact.getPhoneNumber());
                        if (contact.getType().compareTo("Acquaintance") == 0) {
                            extraInfoLabel.setText("Occupation:   " + contact.getExtraInfo());
                        } else if (contact.getType().compareTo("Colleague") == 0) {
                            extraInfoLabel.setText("Email:   " + contact.getExtraInfo());
                        } else if (contact.getType().compareTo("Friend") == 0) {
                            extraInfoLabel.setText("Birthdate:   " + contact.getExtraInfo());
                        } else {
                            extraInfoLabel.setVisible(false);
                        }
                    }
                });

        scrollPane = new JScrollPane(list);

        gui.add(labels, BorderLayout.CENTER);
        gui.add(scrollPane, BorderLayout.WEST);
        gui.add(buttons, BorderLayout.SOUTH);
        add(gui);
        menuBar.add(menu);
        setJMenuBar(menuBar);

Here is where I display the GUI: 

    public class JavaLab3_pb1Java {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) throws FileNotFoundException, IOException {
        Agenda agenda = new Agenda();

        AgendaView agendaView = new AgendaView();
        agendaView.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        agendaView.setSize(500, 300);
        agendaView.pack();
        agendaView.setVisible(true);

    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T17:00:35.713

您需要`pack()`在添加所有组件之后调用 JFrame，然后再调用`setVisible(true)`它。这将告诉 GUI 的布局管理器管理他们的布局，并将 GUI 调整为组件和布局指定的首选大小。

**编辑**
永远不要调用`setSize(...)`任何东西。最好覆盖`getPreferredSize()`. 例如，我的[sscce](http://sscce.org)：

```
import java.awt.*;
import javax.swing.*;
import javax.swing.border.*;
import javax.swing.event.*;

public class AgendaView extends JFrame {

   private static final int PREF_W = 500;
   private static final int PREF_H = 300;
   private JLabel firstNameLabel, lastNameLabel, adressLabel, phoneNumberLabel,
         extraInfoLabel;
   private JButton editButton, addButton, deleteButton, showButton;
   private JPanel labels, gui, buttons;
   private DefaultListModel<String> model;
   private JList<String> list;
   private JScrollPane scrollPane;

   public AgendaView() {

      super("***Agenda View***");

      gui = new JPanel(new BorderLayout(2, 2));
      gui.setBorder(new TitledBorder("Owner"));

      labels = new JPanel(new GridLayout(0, 1, 1, 1));
      labels.setBorder(new TitledBorder("Contact "));

      buttons = new JPanel(new GridLayout(1, 0, 1, 1));

      editButton = new JButton("Edit");
      addButton = new JButton("Add");
      deleteButton = new JButton("Delete");
      showButton = new JButton("Show");

      editButton.setEnabled(false);
      addButton.setEnabled(false);
      deleteButton.setEnabled(false);
      showButton.setEnabled(false);

      buttons.add(showButton);
      buttons.add(editButton);
      buttons.add(addButton);
      buttons.add(deleteButton);

      firstNameLabel = new JLabel("First name:                                         ");
      lastNameLabel = new JLabel("Last name: ");
      adressLabel = new JLabel("Adress: ");
      phoneNumberLabel = new JLabel("Phone number: ");
      extraInfoLabel = new JLabel("Extra info: ");

      labels.add(firstNameLabel);
      labels.add(lastNameLabel);
      labels.add(adressLabel);
      labels.add(phoneNumberLabel);
      labels.add(extraInfoLabel);

      model = new DefaultListModel<String>();
      list = new JList<String>(model);
      String[] eles = { "Ciprian Aftode", "Andrei Batinas", "Bogdan Fichitiu",
            "Valentin Pascau" };
      for (String ele : eles) {
         model.addElement(ele);
      }
      list.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
      // list.setVisibleRowCount(-1);
      list.addListSelectionListener(new ListSelectionListener() {
         @Override
         public void valueChanged(ListSelectionEvent lse) {
            firstNameLabel.setText("First name:   first name");
            lastNameLabel.setText("Last name:   last name");
            adressLabel.setText("Address:   Address");
            phoneNumberLabel.setText("Phone number: PhoneNumber");
            extraInfoLabel.setText("Occupation: ExtraInfo");
         }
      });

      int ebGap = 8;
      list.setBorder(BorderFactory.createEmptyBorder(ebGap, ebGap, ebGap, ebGap));

      scrollPane = new JScrollPane(list);

      gui.add(labels, BorderLayout.CENTER);
      gui.add(scrollPane, BorderLayout.WEST);
      gui.add(buttons, BorderLayout.SOUTH);
      add(gui);
   }

   @Override
   public Dimension getPreferredSize() {
      return new Dimension(PREF_W, PREF_H);
   }

   private static void createAndShowGui() {
      AgendaView frame = new AgendaView();

      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }

} 
```

# mysql - 按主键和索引排序

> ID：15463344
> 
> 赞同：2
> 
> 时间：2013-03-17T16:43:41.360
> 
> 标签：mysql, indexing

对于许多 SQL 查询，“order by id desc”是获取最新行的必需组件。一般查询将类似于

```
select * from table X where some_condition order by id desc 
```

一般来说，“order by id”是否会大大降低查询速度？

具体来说，对于像这样的查询：

```
select * from table X where some_col = some_value order by id desc 
```

我们真的需要添加索引 (some_col, id) 来加快查询速度吗？

在所有情况下，都假定 ID 是自动递增的。

* * *

我的困惑来自以下关于 order-by 优化的指南：

[http://dev.mysql.com/doc/refman/5.0/en/order-by-optimization.html](http://dev.mysql.com/doc/refman/5.0/en/order-by-optimization.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T16:52:28.733

```
select * from table X where some_col = some_value order by id desc 
```

在这样的查询中，您肯定需要 some_col 上的索引。根据我的说法，（some_col）的索引应该足够好于（some_col，id）。

[MySQL 合并索引](http://dev.mysql.com/doc/refman/5.0/en/index-merge-optimization.html)应该可以帮助您使用 id 上的索引进行排序。

此外，当您在 some_col 上搜索时，永远不会使用 (id,some_Col) 索引，而 (some_col, id) 将是。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-23T12:52:00.280

(some_col) 上的索引就足够了，因为 MySql 将主键添加为 innodb 表中索引的一部分。因此，您将隐含地将 (some_col, id) 作为索引。您可以查看这篇文章以获取更多信息： [MySQL 可以使用二级索引中的主键值吗？](http://www.psce.com/blog/2012/05/17/can-mysql-use-primary-key-values-from-a-secondary-index/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T16:51:23.547

要获得第一行，您还可以使用以下命令：

```
SELECT *
FROM tableX
WHERE id = (SELECT MIN(id)
            FROM tableX
            WHERE some conditions) 
```

这是最后一个：

```
SELECT *
FROM tableX
WHERE id = (SELECT MAX(id)
            FROM tableX
            WHERE some conditions) 
```

但当然是的，一个 index on`id`和一个 index on`some_col`对加快查询非常有用。

# javascript - Dropzone.js php后端

> ID：15463349
> 
> 赞同：0
> 
> 时间：2013-03-17T16:44:03.997
> 
> 标签：javascript, ajax

我目前正在尝试一个新的 ajax-drag'n'drop-uploader，它仍然每天都在更新。它被称为[Dropzone.js](http://www.dropzonejs.com/)。现在，我想连同图像一起发送一个参数。这可以通过

```
myDropzone.on("sending", function(file, xhr, formData) {
    formData.append("album", albumvalue);       
}); 
```

根据文档。但我的问题是我不知道如何获取文件参数。有没有人对这个插件有广泛的了解，或者其他 ajax 拖放如何在后端工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T18:17:04.703

好的，在查看了我回显的 php 上传脚本的响应后`$_FILES`，我发现上传的文件被调用`$_FILES['file']`，因此您可以使用与简单文件输入时相同的上传脚本。

# - 易于

> ID：15463351
> 
> 赞同：0
> 
> 时间：2013-03-17T16:44:15.853
> 
> 标签：

一般的 APT-GET 支持是题外话。可以在 https://superuser.com 上询问支持问题。apt-get 是一个命令行工具，用于与基于 Debian 的 Linux 发行版的高级打包工具 (APT) 一起使用，并用于执行安装或升级包等操作。

# ruby-on-rails - ActiveModel::Serializers Gem - 版本化 API 命名空间问题

> ID：15463356
> 
> 赞同：2
> 
> 时间：2013-03-17T16:44:41.023
> 
> 标签：ruby-on-rails, ruby, active-model-serializers

我是 Rails 和模块/命名空间的新手

我的控制器的命名空间如下：

```
module Api
  module V1
   class PostsController < ApiController 
```

ActiveModel::Serializers 在我的 app 文件夹中放置了一个“Serializers”文件夹，我在其中创建了包含以下代码的 post_serializer.rb：

```
class PostSerializer < ActiveModel::Serializer
  attributes :id, :body, :category, 
end 
```

当我尝试访问 JSON 响应时，我得到：

```
NameError at /api/v1/posts
uninitialized constant Api::V1::PostsController::PostSerializer 
```

这里有什么问题，将我的序列化程序与我的 API 版本一起命名空间的最佳方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-17T18:16:25.490

请注意，命名空间应与文件夹结构匹配：

```
# should be in app/controllers/api/v1/posts_controller.rb
module Api
  module V1
   class PostsController < ApiController

# should be in app/serializers/post_serializer.rb
class PostSerializer < ActiveModel::Serializer 
```

不带前缀使用时`PostSerializer`，假定当前命名空间。如果您引用全局命名空间使用`::PostSerializer`

# android - 阻止服务重启

> ID：15463357
> 
> 赞同：0
> 
> 时间：2013-03-17T16:44:41.767
> 
> 标签：android, restart, intentservice

我有一个 IntentService，它是从带有*startService(service)*的 BroadcastReceiver 启动的。当我在 BroadcastReceiver 中获得新信息时，新信息会通过带有*startService(service)*的意图再次推送到 IntentService，但随后服务会重新启动。我可以防止这种情况吗？我想将新信息推送到 IntentService 而不重述它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:37:12.173

意图服务旨在以意图开始，执行其工作并完成。从这个角度来看，它们更像是一个异步任务。这就是您的意图服务正在重新启动的原因。

`onHandleIntent`应该做一些工作并完成。你可以做一些技巧来阻止它，但这会违背意图服务的本质。

你应该做的是拥有一个经典的服务。如果您遇到 ANR 错误，您应该在线程内执行所有时间密集型操作，或者在服务本身托管的异步任务中执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T21:22:50.050

我假设您需要共享一些状态来处理服务中的后续意图。我看到两个解决方案：

1.  使用 IntentService 并在 onHandleIntent 中保存和恢复此状态。
2.  使用已启动的服务，并将此状态保存为服务类中的一个字段。为了防止 ANR，在 UI 线程之外处理 Intent，就像[IntentService 一样](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.2_r1/android/app/IntentService.java)。要保持服务运行，只需从[handleMessage中删除](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.2_r1/android/app/IntentService.java#64)[stopSelf](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.2_r1/android/app/IntentService.java#66)调用。

如果您可以为每个已处理的 Intent 恢复和保存状态，则第一个解决方案更安全，因为您的 Service 可能会在内存不足的情况下被操作系统杀死。

# javascript - 如何创建源源不断的子弹？

> ID：15463359
> 
> 赞同：1
> 
> 时间：2013-03-17T16:44:47.010
> 
> 标签：javascript, html, web

我最近开始使用 Codecademy 学习 javascript。为了扩展我的知识并且只是为了好玩，我遵循了 Gyrostorm 的 HTML5 游戏教程：[http](http://www.youtube.com/playlist?list=PL290A4D2398C97186/) ://www.youtube.com/playlist?list=PL290A4D2398C97186/ 。

现在我完成了制作我的游戏版本的教程，但我希望这样当你按住空格键时，子弹会以一定的速度发射。目前，您必须按住空格键才能开火。我有一个 Jet.shoot 函数和一个 Jet.checkShoot 函数，但是在多次尝试 setIntervals 和 setTimeouts 之后，没有任何效果！请帮忙！

```
Jet.prototype.checkShooting = function() {
    if(this.isSpacebar && !this.isShooting) {
        this.isShooting = true;
        this.bullets[this.currentBullet].fire(this.noseX, this.noseY)
        this.currentBullet++;
        if(this.currentBullet >= this.bullets.length) {
            this.currentBullet = 0;
        }
    } else if(!this.isSpacebar) {
        this.isShooting = false;
    }
};

Jet.prototype.shoot = function() {
    this.isShooting = true;
    this.bullets[this.currentBullet].fire(this.noseX, this.noseY);
    this.currentBullet++;
    if(this.currentBullet >= this.bullets.length) {
        this.currentBullet = 0;
    }
} 
```

这是我到目前为止的实时版本：[https ://googledrive.com/host/0B2Xb6VzofFX-OGxEcnV3OUNTdFU/index.html](https://googledrive.com/host/0B2Xb6VzofFX-OGxEcnV3OUNTdFU/index.html)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T18:06:08.273

如果你想有一个给定的射速，你需要处理好时间。所以最好的事情是有一个游戏时间，但无论如何你需要实现这样的解决方案（我在这个例子中使用了真实世界的时间（Date.now（）））：

```
if(this.isSpacebar && Date.now()>this.shootPossibleTime) {
    this.shootPossibleTime =Date.now()+this.reloadTimeForThisWeapon;
    this.bullets[this.currentBullet].fire(this.noseX, this.noseY)
    this.currentBullet++;
    if(this.currentBullet >= this.bullets.length) {
        this.currentBullet = 0;
    }
} 
```

# d3.js - Access-Control-Allow-Origin 不允许 Origin null。

> ID：15463364
> 
> 赞同：5
> 
> 时间：2013-03-17T16:45:32.397
> 
> 标签：d3.js

当我运行以下代码时：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>D3 Demo: GeoJSON</title>
        <script type="text/javascript" src="http://localhost/webserver/d3/d3.js"></script>
        <style type="text/css">
            /* No style rules here yet */       
        </style>
    </head>
    <body>
        <script type="text/javascript">

            //Width and height
            var w = 500;
            var h = 300;

            //Define default path generator
            var path = d3.geo.path();

            //Create SVG element
            var svg = d3.select("body")
                        .append("svg")
                        .attr("width", w)
                        .attr("height", h);

            //Load in GeoJSON data
            d3.json("http://localhost/webserver/us-states.json", function(json) {

                //Bind data and create one path per GeoJSON feature
                svg.selectAll("path")
                   .data(json.features)
                   .enter()
                   .append("path")
                   .attr("d", path);

            });

        </script>
    </body>
</html> 
```

我收到以下错误：

```
XMLHttpRequest cannot load http://localhost/webserver/us-states.json. Origin null is not allowed by Access-Control-Allow-Origin. 
```

这里出了什么问题，我该如何解决？我正在关注 Scott Murray 的书，到目前为止，在我开始使用 json 之前，我在访问我的网络服务器上的文件时没有遇到任何问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2017-03-21T22:12:19.060

出于安全原因，浏览器会阻止来自不同主机（来源）的 Ajax HTTP 请求 (XHR)。

该函数向您的[http://localhost/](http://localhost/)`d3.json("...")`发出 Ajax 请求……您可能正在从不同的主机提供 HTML。

**您是否在浏览器中将 .html 作为文件打开？**那被认为是不同的主机。你有一些选择：

*   从您提供 json 文件的同一 Web 服务器提供您的 HTML 文件
*   将您的 .json 转换为 .js `var mygeodata = {your json here}`，在文件中添加类似内容并添加`<script type="text/javascript" src="http://localhost/webserver/us-states.js"></script>`HTML `<head>`，同时删除该`d3.json("...")`部分。之后，您将拥有一个包含数据的全局变量`mygeodata`
*   配置您的 Web 服务器以允许 CORS。

如果您正在学习/原型（从外观上看），我会采用第二种方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-13T15:03:42.253

派对很晚了，但是对于任何仍然有问题的人来说，使用 NPM 从包含您要服务器的所有文件的目录中设置一个[http-server实例真的很容易。](https://www.npmjs.com/package/http-server)

您只需安装`http-server`global `npm i http-server -g`，然后`http-server`从您的根目录运行。

服务器运行后，转到浏览器并输入以 . 为前缀的相对路径`localhost:[port][/path/to/file]`。当您在 repo/目录中第一次运行 http-server 时，将从命令行打印端口，并且相对路径以您运行 http-server 的目录开始。这将正确地为最终用户提供文件，而不仅仅是复制并粘贴到文本本地的链接。

# javascript - html mustache js中的模板

> ID：15463365
> 
> 赞同：0
> 
> 时间：2013-03-17T16:45:33.503
> 
> 标签：javascript, jquery, templates, mustache

我`mustache`用来渲染部分**html**。为此，我正在使用这个 javascript：

```
 var template = $("#div_name").html();
   ..
   ..
   $("#container").append(Mustace.render(template,some_object)); 
```

由于`<div id="div_name"></div>`仍然保留在 html 中，我只使用它来获取我想知道的模板：将模板化的`div`html 保留在内部是否方便，`html`或者更好，`load`例如通过部分内容`ajax`？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T16:48:09.787

您还可以将模板保留在脚本元素中，如下所示：

```
 <script type="application/mustache" id="div_name">
       //Mustache template code here
   </script> 
```

并使用`$("#div_name").html()`. 它不会显示在页面上，并且由于无效的`type`.

# css - 删除 div 标签之间的空格

> ID：15463367
> 
> 赞同：0
> 
> 时间：2013-03-17T16:45:41.840
> 
> 标签：css, html, xhtml-1.0-strict

我现在在这里阅读了无数线程，到目前为止我一直没有运气。我正在尝试删除此页面上 div 之间的空间。

名为“postarea”和“rightsidebar”的div应该在“postadvert”之间具有相同的距离，因为“postadvert”在它和菜单之间的顶部。任何人都可以帮忙吗？

![在此处输入图像描述](../Images/49b4f23fca24d4b26a966333ec4cc7f6.png)

[这是jsfiddle](http://jsfiddle.net/steveyk/ePySF/)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="styles.css" rel="stylesheet" type="text/css" />

<title>DTR html</title>

</head>

<body>

<div class="pageWrapper">

    <div class="header">

    <a href="images/banner_gundam_space.jpg"><img src="images/banner_gundam_space.jpg" width="600" height="150" alt="Banner" class="banner"/></a>

    <div id="rssline">
      <a href="localhost/dubtopian-review/register/"><img src="images/register.gif" width="70" height="40" alt="Register" class="rssline"/></a>

      <a href="#"><img src="images/commentsrss.gif" width="160" height="40" alt="CommentsRSS" class="rssline"/></a>

      <a href="#"><img src="images/entriesrss.gif" width="137" height="40" alt="EntriesRSS" class="rssline"/></a>
      </div>

    <div id="topadvert">
      <a href="#"><img src="images/adunit_234x60.gif" width="234" height="60" alt="Advert" /></a>
      </div>
    <div id="welcome"><img src="images/welcome.jpg" width="250" height="60" alt="Welcome to Dubtopia" /></div>

<div id="menu">
<ul>
            <li><a href="localhost/dubtopian-review/">Home</a></li>
            <li><a href="localhost/dubtopian-review/anime-reviews/">Anime Reviews</a></li>
            <li><a href="localhost/dubtopian-review/activity/">Activity</a></li>
            <li><a href="localhost/dubtopian-review/forums/">Forums</a></li>
            <li><a href="localhost/dubtopian-review/group-forums/">Group Forums</a></li>
            <li><a href="localhost/dubtopian-review/groups/">Groups</a></li>
            <li><a href="localhost/dubtopian-review/members/">Members</a></li>
</ul>
    </div>

    </div><!-- End header -->

<div id="contentWrapper">

    <div id="postadvert"><img src="images/advert_example_728x90.png" width="729" height="90" alt="Advert" /></div>

    <div id="rightsidebar">

        <div class="rightcontainer">

            <div id="searchBox"><input type="text" name="search" size="25" /><input type="submit" value="Search" /></div>

            <div class="sidebaradvert"><img src="images/advert_example_300x250.png" width="300" height="250" alt="Advert" /></div>

            <div class="sidebarTitle1"><img src="images/recentseries.jpg" width="200" height="40" alt="Recent Series" /></div>
                <ol>
                    <li><a class="widgetlink" href="#">Fullmetal Alchemist Brotherhood</a></li>
                    <li><a class="widgetlink" href="#">Aquarion Age</a></li>
                    <li><a class="widgetlink" href="#">Gurren Lagann</a></li>
                    <li><a class="widgetlink" href="#">Black Lagoon</a></li>
                    <li><a class="widgetlink" href="#">Chrome Shelled Regios</a></li>
                    <li><a class="widgetlink" href="#">Ergo Proxy</a></li>
                    <li><a class="widgetlink" href="#">Ghost Hunt</a></li>
                    <li><a class="widgetlink" href="#">Kurau Phantom Memory</a></li>
                    <li><a class="widgetlink" href="#">When They Cry</a></li>
                </ol>

        </div> <!-- END top series -->

    </div><!-- End rightsidebar -->

    <div id="postarea">
    <div class="post">
        <div class="postdate">5th Feb</div>
        <img src="images/anime_images/fullmetal_alchemist_brotherhood.jpg" width="225" height="329" alt="Fullmetal Alchemist Brotherhood" />
        <p class="postcontent"><h2><a class="postlink" href="#">Fullmetal Alchemist Brotherhood</a></h2><br />In this world there exist alchemists, people who study and perform the art of alchemical transmutation—to manipulate objects and transform one object into another. They are bounded by the basic law of alchemy: in order to gain something you have to sacrifice something of the same value. The main character is the famous alchemist Edward Elric—also known as the Fullmetal Alchemist—who almost lost his little brother, Alphonse, in an alchemical accident. Edward managed to attach his brother's soul to a large suit of armor. While he did manage to save his brother's life, he paid the terrible price of his limbs. To get back what they've lost, the brothers embark on a journey to find the Philosopher's Stone that is said to amplify the powers of an alchemist enormously. Fullmetal Alchemist: Brotherhood is a re-telling of the story from the manga point of view.</p>
        <a class="postcomments" href="#">comments</a>
    </div><!-- End post -->

</div><!-- End postarea -->

<div id="footer">

    &copy; 2013 Dubtopian Review. "Dubtopian" - A fan of English dubbed anime.

</div><!-- End footer -->

</div><!-- End contentWrapper -->

</div><!-- End pageWrapper -->

</body>
</html> 
```

这是CSS

```
 /* Typograhpy */

@charset "utf-8";
@font-face {
 font-family: Roboto;
 src: url('./webfonts/Roboto/Roboto-Black.eot'); /* EOT file for IE */
}
@font-face {
 font-family: Roboto;
 src: url('Roboto-Black.ttf') /* TTF file for CSS3 browsers */
}

/* Eric Meyer's Reset CSS v2.0 - http://cssreset.com */
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{border:0;font-size:100%;font:inherit;vertical-align:baseline;margin:0;padding:0}article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:none}table{border-collapse:collapse;border-spacing:0}

body {
    background-image: url(images/bg.png);
    background-repeat: no-repeat;
    background-color: #666666;
    margin-top: 50px;
}

.pageWrapper {
    font-family: 'Roboto', sans-serif;
    color: #FFFFFF;
    width: 1040px;
    background-color: #42413c;
    margin-left: auto;
    margin-right: auto;
    font-size: 14px;
    line-height: 1.4;
    overflow: hidden;
}

h2 {
    font-size:16px;
    color:#E15122;
}

a {
    color:#FFF;
}

a:hover {
    color:#CCC;
}

/* Start of header */

.header {
    height: 211px;
    width: 1040px;
}

.banner {
    border:0px;
    position:relative;
}

.rssline {
    position: relative;
    bottom: 151px;
    left: 628px;
}

#rssline img {
    border:0px;
    border-bottom: solid 1px transparent;
}
#rssline img:hover {
    border-color: white;
}

#topadvert {
    border: 0px;
    position: relative;
    bottom: 140px;
    left: 703px;
}

#welcome {
    position: relative;
    bottom: 113px;
}

#menu {
    position: relative;
    bottom: 177px;
    right: 10px;
}

.header #menu {
    float: right;
    height: 60px;
    display: inline;
}
.header #menu ul {
    font-family: 'Roboto', sans-serif;
    color: #FFFFFF;
    font-size:14px;
    list-style-type:none;
    margin:0;
    padding:0;
    padding-top:18px;
    padding-bottom:6px;
}
.header #menu li {
    display:inline;
}
.header #menu li a:link,a:visited {
    font-size: 18px;
    background-color:#2c2c2c;
    text-align:center;
    padding:15px;
    text-decoration:none;
}
.header #menu li a:hover,a:active {
    background-color:#191919;
}

/* END header */

/* START slider area */

#slider {
    margin-right:10px;
    margin-left:10px;
    width: 1020px;
    height: 250px;
    background-color: #2c2c2c;
}

/* END slider area */

/* START posts and sidebar */

#contentWrapper {
    width: 1040px;
    height: 100%;
}

#postadvert {
    width: 1000px;
    background-color: #2C2C2C;
    margin-top: 10px;
    height: 100%;
    margin-bottom: 10px;
    margin-right: 10px;
    margin-left: 10px;
    padding: 10px;
}

#postadvert img{
    position: relative;
    left: 140px;
}

/* START sidebar */

#searchBox {
    width:350px;
    height:40px;
    background-color: #1f1f1f;
}

.rightcontainer #searchBox input {
    position:relative;
    left:50px;
    top:6px;
}

#rightsidebar {
    width: 350px;
    background-color: #2C2C2C;
    float: right;
    margin-top: 10px;
    height: 100%;
    margin-bottom: 10px;
    margin-right: 10px;
    padding: 10px;
}

#rightsidebar .rightcontainer .sidebarTitle1 img{
    position:relative;
    left:74px;
}

.number, .widgetlink {
    display:inline;
    margin-top:1px;
}

.rightcontainer ol {
    position:relative;
    background-color: #1f1f1f;
    padding: 10px;
    list-style-type: decimal;
    margin:0px;
}

.rightcontainer ol li {
    position:relative;
    left:20px;
    margin-top: 1px;
}

.commentdate {
    background-color: #E15122;
    width:50px;
    padding-right: 5px;
    padding-left: 5px;
}

.sidebaradvert {
    margin-top: 10px;
    background-color:#1f1f1f;
    padding:10px 10px 10px 10px;
}

.sidebaradvert img {
    position:relative;
    left: 15px;
}

/* END sidebar */

/* START post area */

#postarea {
    Float:left;
    width: 620px;
    background-color: #2C2C2C;
    margin-top: 10px;
    height: 100%;
    margin-bottom: 10px;
    margin-right: 10px;
    margin-left: 10px;
    padding: 10px;
}

.post {
    background-color: #1f1f1f;
    padding: 5px;
    text-align: justify;
    clear: both;
}

.postdate {
    position:absolute;
    background-color: #E15122;
    width:50px;
    padding-right: 5px;
    padding-left: 5px;
    margin-top: 10px;
    margin-left: 10px;
}

#postarea img {
    float:left;
    padding: 5px;
}

#postarea h2, #postarea p {
    padding: 5px;   
}

#postarea h2 a {
    text-decoration:none;
    color:#E15122;
}

#postarea .post .postcomments {
    position:relative;
    left:500px;
    padding: 10px;
}

/* END post area */

/* START footer */

#footer {
    float: left;
    width: 1010px;
    background-color: #2C2C2C;
    padding: 5px;
    text-align: center;
    margin-top: 10px;
    height: 100%;
    margin-bottom: 10px;
    margin-right: 10px;
    margin-left: 10px;
}

/* END footer */ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T17:05:42.130

Float the other elements too, besides postarea and rightsidebar.

Something like this: [http://jsfiddle.net/ePySF/5/](http://jsfiddle.net/ePySF/5/)

```
.header #postadvert #contentwrapper {
    float: left;
} 
```

# sql - 如何使这个查询更快？

> ID：15463368
> 
> 赞同：0
> 
> 时间：2013-03-17T16:45:42.877
> 
> 标签：sql, performance, sqlite, unityscript

我的数据库看起来像这样：

```
id | Column1 | Column2 
```

必须知道的事实：id 不是主要的唯一 id（但可能是）。id 最高可达 200 万+。列值用 TINYINT 填充

```
var query : String = "SELECT Column1 FROM Table1 WHERE Column1 <> 0";   
dbcmd = dbcon.CreateCommand();
dbcmd.CommandText = query; 
reader = dbcmd.ExecuteReader();
var result : int = 0;
while(reader.Read()) { 
    result++;
}
return result; 
```

但是对于基本搜索，它最多需要 5 秒，有没有办法让它更快？

编辑：像往常一样，感谢贡献者和速度！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-17T16:47:54.013

是的，您正在阅读您的结果并一一处理它们。您似乎需要做的只是计数，您可以获得：

```
"SELECT COUNT(*) FROM Table1 WHERE Column1 <> 0"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T16:47:47.403

这看起来不像 javascript 代码，但您可以尝试计算记录而不是执行查询，然后循环遍历客户端上的整个结果集并增加一个变量：

```
var query : String = "SELECT Count(Column1) FROM Table1 WHERE Column1 <> 0"; 
```

这将比您的代码快得多，因为计数操作将由数据库服务器直接完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T16:48:10.737

是的，索引 Column1 上的表，即 where 子句中使用的行。

# coffeescript - 在 While 循环语法中传递匿名变量

> ID：15463378
> 
> 赞同：0
> 
> 时间：2013-03-17T16:46:49.143
> 
> 标签：coffeescript, while-loop

我刚开始使用 Coffeescript 并运行“CoffeeScript 编程”中介绍的示例。

在 while 循环部分，我很好奇为什么必须按如下所述声明对 times 函数的调用。

```
times = (number_of_times, callback) ->
    index = 0
    while index++ < number_of_times
        callback(index)
    return null

times 5, (index) ->
    console.log index 
```

我在阅读代码时有点挣扎，当我尝试过时：

```
times (5, (index)) ->
   console.log index 
```

它返回一个错误。你能提供一些帮助理解这段代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T17:52:04.510

标准函数定义的结构如下：

```
name = (arg, ...) ->
    body 
```

`times`所以关于你的定义没什么好说的。因此，让我们看看您的电话`times`：

```
times 5, (index) ->
    console.log index 
```

这部分：

```
(index) ->
    console.log index 
```

只是另一个函数定义，但这个是匿名的。我们可以使用命名函数重写您的调用以帮助澄清事情：

```
f = (index) -> console.log index
times 5, f 
```

我们可以填写可选的括号来真正拼写出来：

```
f = (index) -> console.log(index)
times(5, f) 
```

一旦所有的东西都被分解了，你应该看到`5`and `(index)`in：

```
times 5, (index) ->
   console.log index 
```

彼此无关，因此将它们分组在括号中：

```
times (5, (index)) ->
   console.log index 
```

没有意义。如果您想在该`times`调用中添加括号以阐明结构（这在回调函数较长时非常有用），您需要知道两件事：

1.  函数名称和参数周围的左括号之间没有空格。如果有空格，CoffeeScript 会认为您正在使用括号对参数列表*中的内容进行分组。*
2.  括号需要包围整个参数列表，其中包括回调函数的主体。

给它，你会写：

```
times(5, (index) ->
   console.log index
) 
```

也许：

```
times(5, (index) -> console.log(index)) 
```

With`console.log`是一个非本地函数，您甚至可以：

```
times(5, console.log) 
```

但这会给你[`TypeError`一些浏览器](https://stackoverflow.com/a/9612657/479863)，所以不要走那么远。

# python - pickle - 在文件中放置超过 1 个对象？

> ID：15463387
> 
> 赞同：27
> 
> 时间：2013-03-17T16:47:55.153
> 
> 标签：python, file, pickle

我有一个方法可以将一些腌制对象（实际上是元组）转储到一个文件中。

我不想将它们放在一个列表中，我真的想多次转储到同一个文件中。我的问题是，如何再次加载对象？第一个和第二个对象只有一行长，所以这适用于 readlines。但所有其他的都更长。自然，如果我尝试

```
myob = cpickle.load(g1.readlines()[2]) 
```

其中 g1 是文件，我收到 EOF 错误，因为我的腌制对象超过一行。有没有办法只得到我腌制的物体？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-03-17T16:55:44.737

如果您将文件句柄直接传递给pickle，您可以获得您想要的结果。

```
import pickle

# write a file
f = open("example", "w")
pickle.dump(["hello", "world"], f)
pickle.dump([2, 3], f)
f.close()

f = open("example", "r")
value1 = pickle.load(f)
value2 = pickle.load(f)
f.close() 
```

`pickle.dump`将追加到文件的末尾，因此您可以多次调用它来写入多个值。

`pickle.load`将只从文件中读取足够的内容以获取第一个值，使文件句柄保持打开状态并指向文件中下一个对象的开头。然后第二次调用将读取第二个对象，并将文件指针留在文件末尾。`EOFError`如您所料，第三次调用将失败。

尽管我在示例中使用了普通的 old `pickle`，但这种技术与`cPickle`.

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2014-04-14T09:14:33.257

我认为最好的方法是在存储之前将数据打包到单个对象中，并在加载后解包。这是一个使用元组作为容器（`you can use dict also`）的示例：

```
a = [1,2]
b = [3,4]

with open("tmp.pickle", "wb") as f:
    pickle.dump((a,b), f)

with open("tmp.pickle", "rb") as f:
    a,b = pickle.load(f) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-17T16:54:20.833

不要尝试将它们作为文件的行读回，只是`pickle.load()`你想要的对象数。有关执行此操作的示例，请参阅我对[如何在 Python 中保存对象](https://stackoverflow.com/questions/4529815/how-to-save-an-object-in-python)的问题的回答。

# vb.net - 分别对待这两组

> ID：15463388
> 
> 赞同：0
> 
> 时间：2013-03-17T16:47:56.207
> 
> 标签：vb.net, visual-studio-2010, radio-button

编程新手的困境......在我的程序中。

我正在计算并显示一个人需要多少卡路里来维持当前体重。我有一`2`组`2` `radioButtons`：一组是针对性别的，男性或女性，另一组是针对他们的活动率，活跃或不活跃。

使用两组不同的`radioButtons`，应该可以选择一组，但是一次只能选择一个单选按钮，我如何告诉程序分别处理两组单选按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T16:50:49.223

单选按钮成组工作。用一个容器和你的东西把它们分开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T16:51:01.173

您应该使用 GroupBoxes 将一组单选按钮放在一个组框内，另一组放在另一个组框内

通过这种方式，每组单选按钮都与另一组隔离并按预期工作

以下代码只是手动构建表单的示例，与设计器一起工作将在 InitializeComponent 方法中为您创建与此代码等效的代码。请注意这两个单选按钮集是不同容器（组框）的子项

```
' A generic form
Dim f as Form = new Form()
f.Size = new Size(300, 500)

' Create a Group box
Dim b1 as GroupBox = new GroupBox()
b1.Text = "Gender"
b1.Location = new Point(0,0)

' Create two radiobutton for Gender
Dim r1 as RadioButton = new RadioButton()
r1.Text = "Male"
r1.Location = new Point(5,15)
Dim r2 As RadioButton = new RadioButton()
r2.Text = "Female"
r2.Location = new Point(5, 40)

' Add the two radiobuttons to the GroupBox control collection
b1.Controls.AddRange(new Control() {r1, r2})

' Repeat for the second set of radiobuttons
Dim b2 as GroupBox = new GroupBox()
b2.Text = "Activity Rate"
b2.Location = new Point(0,100)
Dim r3 As RadioButton = new RadioButton()
r3.Text = "Active"
r3.Location = new Point(5,15)
Dim r4 as RadioButton = new RadioButton()
r4.Text = "Inactive"
r4.Location = new Point(5,40)
b2.Controls.AddRange(new Control() {r3, r4})

' Finally add the GroupBoxes to the Form ControlsCollection
f.Controls.AddRange(new Control() {b1, b2})

f.ShowDialog() 
```

# android - 注册监听器问题

> ID：15463392
> 
> 赞同：2
> 
> 时间：2013-03-17T16:48:23.613
> 
> 标签：android, networking, gps, location, timertask

我一直在为演示应用程序开发定位服务。我正在为网络和 GPS 设置一个监听器（我知道这可以用一个来完成，但我有非常基本的 java 并且发现这更容易使用）。无论如何，我想注册 GPS 更新并启动计时器，如果我得到修复我想重新启动计时器并继续收听。但是，如果计时器关闭，我想注册网络更新。

到目前为止的问题是当计时器过去时，我尝试使用 mLLocationM.request 在我的 timerTask 的 run() 中注册网络更新 .... 我得到一个异常。

我认为这是一个线程问题，并且正在寻找解决它的最基本方法，以避免陷入处理程序中。

```
class GpsTimer extends TimerTask{

    @Override
    public void run() {

        Log.d(TAG, "running");

        mLocationM.requestLocationUpdates
            (LocationManager.NETWORK_PROVIDER, 2 * 60 * 1000, 0, mNetworkListener);

    }

} 
```

我认为这就是导致问题的原因

```
03-17 16:33:38.528: E/AndroidRuntime(29913): FATAL EXCEPTION: Thread-1364
03-17 16:33:38.528: E/AndroidRuntime(29913): java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
03-17 16:33:38.528: E/AndroidRuntime(29913):    at android.os.Handler.<init>(Handler.java:121)
03-17 16:33:38.528: E/AndroidRuntime(29913):    at android.location.LocationManager$ListenerTransport$1.<init>(LocationManager.java:183)
03-17 16:33:38.528: E/AndroidRuntime(29913):    at android.location.LocationManager$ListenerTransport.<init>(LocationManager.java:183)
03-17 16:33:38.528: E/AndroidRuntime(29913):    at android.location.LocationManager._requestLocationUpdates(LocationManager.java:661)
03-17 16:33:38.528: E/AndroidRuntime(29913):    at android.location.LocationManager.requestLocationUpdates(LocationManager.java:486)
03-17 16:33:38.528: E/AndroidRuntime(29913):    at com.sblyit.finder.LocationService$GpsTimer$1.run(LocationService.java:150)
03-17 16:33:38.528: E/AndroidRuntime(29913):    at java.lang.Thread.run(Thread.java:856) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T16:57:25.687

你应该使用

```
class GpsTimer extends TimerTask {

    @Override
    public void run() {

        Looper.prepare();
        Log.d("", "running");

        mLocationM.requestLocationUpdates(LocationManager.NETWORK_PROVIDER,
                2 * 60 * 1000, 0, mNetworkListener);

        Looper.loop();

    }

} 
```

为什么不应该使用`handler`

```
Handler h = new Handler();

Runnable run = new Runnable() {

    @Override
    public void run() {
        Log.d("", "running");

        mLocationM.requestLocationUpdates(LocationManager.NETWORK_PROVIDER,
                2 * 60 * 1000, 0, mNetworkListener);

        h.postDelayed(this, 5000); // 5 seconds
    }
};

@Override
protected void onDestroy() {
    h.removeCallbacks(run);
}; 
```

它作为`TimerTask`

```
 h.post(run); 
```

# php - 在表格中显示购物车

> ID：15463393
> 
> 赞同：1
> 
> 时间：2013-03-17T16:48:28.177
> 
> 标签：php, mysql

认为我这样做完全错误，但我试图在添加到购物车到表格中时显示项目的值。我的代码如下所示：

```
<?php
function minicart() {
    foreach($_SESSION as $name => $value) {
        if ($value > 0) {
            if (substr($name, 0, 5)=='cart_') {
                $id = substr($name, 5, (strlen($name) -5));
                $get = mysql_query('SELECT id, name, price FROM products WHERE id='.mysql_real_escape_string((int)$id));
                while ($get_row = mysql_fetch_assoc($get)) {
                    $sub = $get_row['price']*$value;
                    '<table border = "1">'
                    '<tr>'
                    '<td>'<echo $get_row['name'].' x '.$value.' @ &pound;'.number_format($get_row['price'], 2).' = &pound;'.number_format($sub, 2).' <a href="minicart.php?remove='.$id.'">[-]</a> <a href="minicart.php?add='.$id.'">[+]</a> <a href="minicart.php?delete='.$id.'">[Delete]</a><br />''</tr>';
                    '</tr>'
                    '</table>'
                }
            }
            $total += $sub;
        }
    }
    if ($total==0) {
        echo "Your cart is empty";
    }
    else {
        echo '<br />Total: &pound;'.number_format($total, 2);

    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T16:55:23.070

我试图将您的表格重新编写为正确的格式：

```
echo '<table border = "1">';
while ($get_row = mysql_fetch_assoc($get)) {
    $sub = $get_row['price']*$value;
    echo '
    <tr>
    <td>'.
    $get_row['name'].' x '.$value.' @ &pound;'.number_format($get_row['price'], 2).' = &pound;'.number_format($sub, 2).'
    <a href="minicart.php?remove='.$id.'">[-]</a> 
    <a href="minicart.php?add='.$id.'">[+]</a> 
    <a href="minicart.php?delete='.$id.'">[Delete]</a><br />
    </td>
    </tr>
    ';
}
echo '</table>'; 
```

请参阅[PHP 字符串](http://php.net/manual/en/language.types.string.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T16:57:00.867

我认为您想用以下内容替换 if 语句。

这将为您提供 1 个表，每个项目都有一行，这可能是您正在寻找的。

```
 if (substr($name, 0, 5)=='cart_') {
            $id = substr($name, 5, (strlen($name) -5));
            $get = mysql_query('SELECT id, name, price FROM products WHERE  id='.mysql_real_escape_string((int)$id));
            echo '<table border = "1">';
            echo '<tr>';
            while ($get_row = mysql_fetch_assoc($get)) {
                $sub = $get_row['price']*$value;                    
                echo '<td>';
                echo $get_row['name'].' x '.$value.' @ &pound';
                echo number_format($get_row['price'], 2).' = &pound';
                echo number_format($sub, 2);
                echo '<a href="minicart.php?remove='.$id.'">[-]</a> ';
                echo '<a href="minicart.php?add='.$id.'">[+]</a> ';
                echo '<a href="minicart.php?delete='.$id.'">[Delete]</a><br />';
            }
            echo'</tr>';
            echo'</table>';
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T17:13:31.753

试试这个：

```
function minicart()
{
    $items = 0;
    $tbl = array();
    foreach($_SESSION as $name => $value)
    {
        if ($value > 0) {
            if (substr($name, 0, 5)=='cart_')
            {
                $id = substr($name, 5, (strlen($name) -5));
                $get = mysql_query('SELECT id, name, price FROM products WHERE id='.mysql_real_escape_string((int)$id));
                $tbl[] = '<table border="1"><thead><tr>'
                  . '<th>Item</th>'
                  . '<th>Quantity</th>'
                  . '<th>Unit Price</th>'
                  . '<th>SubTotal</th>'
                  . '<th>Action</th>'
                  . '</tr></thead><tbody>'
                ;
                while ($get_row = mysql_fetch_assoc($get)) {
                    $items++;
                    $sub = $get_row['price'] * $value;
                    $tbl[] = '<tr>'
                      . '<td>' . $get_row['name'] . '</td>'
                      . '<td>' . $value . '</td>'
                      . '<td>&pound;' . number_format( $get_row['price'], 2 ) . '</td>'
                      . '<td>$pound;' . number_format( $sub, 2) . '</td>'
                      . '<td>'
                      . ' <a href="minicart.php?remove=' . $id . '">[-]</a> '
                      . ' <a href="minicart.php?add=' . $id . '">[+]</a> '
                      . ' <a href="minicart.php?delete=' . $id . '">[Delete]</a>'
                      . '</td>'
                      . '</tr>'
                    ;
                }
                $tbl[] = '</tbody>';
            }
            $total += $sub;
        }
    }
    if ($items==0)
    {
        echo "Your cart is empty";
    }
    else
    {
        $tbl[] = '<tfoot><tr>'
               . '<td colspan="3" style="text-align:right; font-weight:bold">Total:</td>'
               . '<td>&pound;' . number_format($total, 2) . '</td></tr></tfoot></table>';
        echo implode( "\n", $tbl );

    }
} 
```

我更改了逻辑，如果项目计数为零，它会显示“空购物车”消息，允许零成本项目。

# java - 计算平衡因子

> ID：15463397
> 
> 赞同：1
> 
> 时间：2013-03-17T16:48:59.877
> 
> 标签：java, binary-tree, avl-tree

我有一个任务，要实现一个打印出二叉树 t 的所有内部节点的平衡因子的方法。

我试过这样做，但我需要三种方法。我认为应该有一个，我只能打印出根的平衡因子，我认为这应该适用于树 t 的每个节点？

```
public int maxHeight(BinaryTree t) {    
    if(t == null) {
        return 0;
    }

    int height1 = maxHeight(t.getLeft()) + 1;

    int height2 = maxHeight(t.getRight()) + 1;

    if(height1 > height2) {
        return height1;
    }
    else {
        return height2;
    }
}

public int minHeight(BinaryTree v) {
    if(v == null) {
        return 0;
    }

    int height1 = minHeight(v.getLeft()) + 1;

    int height2 = minHeight(v.getRight()) + 1;

    if(height1 < height2) {
        return height1;
    }
    else {
        return height2;
    }
}

public int balanceFactor(int max, int min) {
    return max - min;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T08:05:38.430

它应该很简单：

```
public int printBalanceFactor(BinaryTree t)
{
    if (t == null)
        return 0;

    if (t.left == null && t.right == null)
        return 1;

    int heightL = printBalanceFactor(t.left);
    int heightR = printBalanceFactor(t.right);

    System.out.println("Balance factor of " + t + " is " + (heightL - heightR));

    return heightL + heightR + 1;
} 
```

# mongodb - 在 MongoDB 中对单个文档进行版本控制有哪些不同的方法？

> ID：15463402
> 
> 赞同：0
> 
> 时间：2013-03-17T16:49:15.290
> 
> 标签：mongodb

如果我向域对象添加属性，这将影响到 MongoDB 文档。例如，向我的用户添加一个新的“facebookId”属性，将向我的 MongoDB 文档添加一个新的 facebookId 字段。

跟踪文档版本的不同方法是什么？

我正在考虑在我的所有文档中添加一个“_version”字段。还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T18:25:25.400

如果您指的是文档架构版本，则有几个选项：

1.  您可以将`version`字段添加到所有文档或仅比原始架构更新的文档（仅在原始架构发生更改时添加）。鉴于 BSON 文档中的每个字节都很重要，我会保持简短，例如`_v : 1`. 根据使用平台（如 Node.JS、C#、Java 等），拥有一个版本可能不会使反序列化变得简单。
2.  `2`使用通过检测某些数据字段（例如，只有版本具有）来自动检测版本的系统`facebookId`。对于简单的情况，这可以通过基于字段的存在更改对象行为在模型类中轻松处理。这是我以前做过的，它在许多场景中都很好用。
3.  更新集合中的所有文档以反映新模式。这可以在短暂的系统停机时间内一次性完成（取决于文档的数量）。
4.  根据需要，更新文档（读取文档时，如果它与当前架构不匹配，则重写它）。我已经在非 MongoDB 系统中使用了它......它可以很好地工作（但它也应该在 MongoDB 中很好地工作）。

如果新字段可以为空/非必需，它会使事情变得更容易（尤其是 #2 和 #4）。

# matlab - 如何用for循环matlab调用顺序变量？

> ID：15463411
> 
> 赞同：-2
> 
> 时间：2013-03-17T16:49:50.487
> 
> 标签：matlab

我有一堆变量叫做`length_act_i`where

```
i=1:6 
```

我想作为 for 循环的一部分依次调用每个，但这不起作用：

```
for i=1:6
    I={['length_act_',num2str(i)]};
    subplot(3,2,i)
    [f x]=hist(I,1:2:5);
    bar(x,f./trapz(x,f),'barwidth',0.5,'r');
end 
```

最有效的方法是什么？

问候，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T16:57:52.713

[`eval`](http://www.mathworks.com/help/matlab/ref/eval.html)在循环内使用：

```
eval(['I = length_act_', num2str(i)]); 
```

**专业提示：**
该`eval`命令通常速度慢且效率低，请改用数组。在您的情况下，您的每个“length_act_i”变量似乎都是一个向量，因此您应该使用一个单元格数组。例如，调用它`length_act`并将其设置为：

```
length_act = {length_act_1, length_act_2, length_act_3, ...}; 
```

然后使用以下命令访问数组中的每个单元格：

```
for i = 1:length(length_act)
    I = length_act{i};

    ...
end 
```

此外，[建议不要使用“i”和“j”作为变量的名称。](https://stackoverflow.com/questions/14790740/using-i-and-j-as-variables-in-matlab)

# python - 可在 Python 模块 Sympy 中以矩阵形式使用的微分运算符

> ID：15463412
> 
> 赞同：4
> 
> 时间：2013-03-17T16:50:00.657
> 
> 标签：python, matrix, sympy, differentiation, automatic-differentiation

我们需要两个微分算子矩阵，`[B]`例如`[C]`：

```
B = sympy.Matrix([[ D(x), D(y) ],
                  [ D(y), D(x) ]])

C = sympy.Matrix([[ D(x), D(y) ]])

ans = B * sympy.Matrix([[x*y**2],
                        [x**2*y]])
print ans
[x**2 + y**2]
[      4*x*y]

ans2 = ans * C
print ans2
[2*x, 2*y]
[4*y, 4*x] 
```

这也可以应用于计算矢量场的旋度，例如：

```
culr  = sympy.Matrix([[ D(x), D(y), D(z) ]])
field = sympy.Matrix([[ x**2*y, x*y*z, -x**2*y**2 ]]) 
```

为了使用 Sympy 解决这个问题，必须创建以下 Python 类：

```
import sympy

class D( sympy.Derivative ):
    def __init__( self, var ):
        super( D, self ).__init__()
        self.var = var

    def __mul__(self, other):
        return sympy.diff( other, self.var ) 
```

当微分算子矩阵在左边相乘时，这个类单独解决。`diff`仅当要区分的功能已知时才执行此处。

当微分运算符的矩阵在右侧相乘时，要解决此问题，必须按以下方式更改`__mul__`核心类中的方法：`Expr`

```
class Expr(Basic, EvalfMixin):
    # ...
    def __mul__(self, other):
        import sympy
        if other.__class__.__name__ == 'D':
            return sympy.diff( self, other.var )
        else:
            return Mul(self, other)
    #... 
```

它工作得很好，但是 Sympy 中应该有更好的本地解决方案来处理这个问题。有人知道它可能是什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-26T12:57:54.797

此解决方案应用其他答案和[此处](https://groups.google.com/forum/?fromgroups=#!searchin/sympy/matrix$20differential/sympy/XGfbqRX5kOk/_CivsAH39BsJ)的提示。`D`运算符可以定义如下：

*   仅在从左侧相乘时才考虑，因此`D(t)*2*t**3 = 6*t**2`但`2*t**3*D(t)`什么也不做
*   使用的所有表达式和符号`D`必须有`is_commutative = False`
*   在给定表达式的上下文中使用`evaluateExpr()`
    *   它从右到左沿着表达式找到`D`运算符并将`mydiff()`* 应用于相应的右侧部分

*:[`mydiff`用于代替`diff`允许`D`创建更高的顺序，例如`mydiff(D(t), t) = D(t,t)`]

`diff`里面的内容仅供参考，因为在当前的解决方案中，`__mul__()`实际上是在做区分工作。创建了一个 python mudule 并保存为.`D``evaluateExpr()``d.py`

```
import sympy
from sympy.core.decorators import call_highest_priority
from sympy import Expr, Matrix, Mul, Add, diff
from sympy.core.numbers import Zero

class D(Expr):
    _op_priority = 11.
    is_commutative = False
    def __init__(self, *variables, **assumptions):
        super(D, self).__init__()
        self.evaluate = False
        self.variables = variables

    def __repr__(self):
        return 'D%s' % str(self.variables)

    def __str__(self):
        return self.__repr__()

    @call_highest_priority('__mul__')
    def __rmul__(self, other):
        return Mul(other, self)

    @call_highest_priority('__rmul__')
    def __mul__(self, other):
        if isinstance(other, D):
            variables = self.variables + other.variables
            return D(*variables)
        if isinstance(other, Matrix):
            other_copy = other.copy()
            for i, elem in enumerate(other):
                other_copy[i] = self * elem
            return other_copy

        if self.evaluate:
            return diff(other, *self.variables)
        else:
            return Mul(self, other)

    def __pow__(self, other):
        variables = self.variables
        for i in range(other-1):
            variables += self.variables
        return D(*variables)

def mydiff(expr, *variables):
    if isinstance(expr, D):
        expr.variables += variables
        return D(*expr.variables)
    if isinstance(expr, Matrix):
        expr_copy = expr.copy()
        for i, elem in enumerate(expr):
            expr_copy[i] = diff(elem, *variables)
        return expr_copy
    return diff(expr, *variables)

def evaluateMul(expr):
    end = 0
    if expr.args:
        if isinstance(expr.args[-1], D):
            if len(expr.args[:-1])==1:
                cte = expr.args[0]
                return Zero()
            end = -1
    for i in range(len(expr.args)-1+end, -1, -1):
        arg = expr.args[i]
        if isinstance(arg, Add):
            arg = evaluateAdd(arg)
        if isinstance(arg, Mul):
            arg = evaluateMul(arg)
        if isinstance(arg, D):
            left = Mul(*expr.args[:i])
            right = Mul(*expr.args[i+1:])
            right = mydiff(right, *arg.variables)
            ans = left * right
            return evaluateMul(ans)
    return expr

def evaluateAdd(expr):
    newargs = []
    for arg in expr.args:
        if isinstance(arg, Mul):
            arg = evaluateMul(arg)
        if isinstance(arg, Add):
            arg = evaluateAdd(arg)
        if isinstance(arg, D):
            arg = Zero()
        newargs.append(arg)
    return Add(*newargs)

#courtesy: https://stackoverflow.com/a/48291478/1429450
def disableNonCommutivity(expr):
    replacements = {s: sympy.Dummy(s.name) for s in expr.free_symbols}
    return expr.xreplace(replacements)

def evaluateExpr(expr):
    if isinstance(expr, Matrix):
        for i, elem in enumerate(expr):
            elem = elem.expand()
            expr[i] = evaluateExpr(elem)
        return disableNonCommutivity(expr)
    expr = expr.expand()
    if isinstance(expr, Mul):
        expr = evaluateMul(expr)
    elif isinstance(expr, Add):
        expr = evaluateAdd(expr)
    elif isinstance(expr, D):
        expr = Zero()
    return disableNonCommutivity(expr) 
```

示例 1：矢量场的卷曲。请注意，定义变量很重要，`commutative=False`因为它们的顺序`Mul().args`会影响结果，请参阅[this other question](https://stackoverflow.com/questions/16240084/avoid-sorting-args-in-python-module-sympy)。

```
from d import D, evaluateExpr
from sympy import Matrix
sympy.var('x', commutative=False)
sympy.var('y', commutative=False)
sympy.var('z', commutative=False)
curl  = Matrix( [[ D(x), D(y), D(z) ]] )
field = Matrix( [[ x**2*y, x*y*z, -x**2*y**2 ]] )       
evaluateExpr( curl.cross( field ) )
# [-x*y - 2*x**2*y, 2*x*y**2, -x**2 + y*z] 
```

示例 2：结构分析中使用的典型 Ritz 近似。

```
from d import D, evaluateExpr
from sympy import sin, cos, Matrix
sin.is_commutative = False
cos.is_commutative = False
g1 = []
g2 = []
g3 = []
sympy.var('x', commutative=False)
sympy.var('t', commutative=False)
sympy.var('r', commutative=False)
sympy.var('A', commutative=False)
m=5
n=5
for j in xrange(1,n+1):
    for i in xrange(1,m+1):
        g1 += [sin(i*x)*sin(j*t),                 0,                 0]
        g2 += [                0, cos(i*x)*sin(j*t),                 0]
        g3 += [                0,                 0, sin(i*x)*cos(j*t)]
g = Matrix( [g1, g2, g3] )

B = Matrix(\
    [[     D(x),        0,        0],
     [    1/r*A,        0,        0],
     [ 1/r*D(t),        0,        0],
     [        0,     D(x),        0],
     [        0,    1/r*A, 1/r*D(t)],
     [        0, 1/r*D(t), D(x)-1/x],
     [        0,        0,        1],
     [        0,        1,        0]])

ans = evaluateExpr(B*g) 
```

`print_to_file()`已经创建了一个函数来快速检查大表达式。

```
import sympy
import subprocess
def print_to_file( guy, append=False ):
    flag = 'w'
    if append: flag = 'a'
    outfile = open(r'print.txt', flag)
    outfile.write('\n')
    outfile.write( sympy.pretty(guy, wrap_line=False) )
    outfile.write('\n')
    outfile.close()
    subprocess.Popen( [r'notepad.exe', r'print.txt'] )

print_to_file( B*g )
print_to_file( ans, append=True ) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T19:39:43.147

SymPy 的核心中不存在微分**运算符**，即使它们存在“乘以运算符”而不是“运算符的应用”也是 SymPy 不支持的符号滥用。

[1] 另一个问题是 SymPy 表达式只能从 的子类构建`sympy.Basic`，因此`class D`当您输入 时很可能会引发错误`sympy_expr+D(z)`。`(expression*D(z)) * (another_expr)`这就是失败的原因。`(expression*D(z))`无法建造。

此外，如果参数 of`D`不是单个`Symbol`，则不清楚您对该运算符的期望。

最后，`diff(f(x), x)`(where `f`is a symbolic unknown function) 返回一个未计算的表达式，正如您所观察到的，因为当`f`未知时，没有其他东西可以合理地返回。稍后，当您替换`expr.subs(f(x), sin(x))`导数时，将评估（最坏的情况下您可能需要调用`expr.doit()`）。

[2] 您的问题没有优雅**而**简短的解决方案。我建议解决您的问题的一种方法是覆盖 : 的`__mul__`方法，`Expr`而不是仅仅将表达式树相乘，它会检查左表达式树是否包含的实例`D`并将应用它们。显然，如果您想添加新对象，这不会扩展。这是 sympy 设计中长期存在的已知问题。

编辑： [1] 只是为了允许创建包含`D`. [2] 对于包含更多内容的表达式是必要的，而只有一个`D`才能起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T17:03:35.263

如果你想让正确的乘法起作用，你需要从 just 子类化`object`。这将导致`x*D`回退到`D.__rmul__`. 不过，我无法想象这是高优先级，因为运算符永远不会从右侧应用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T17:15:26.377

目前还不可能制作一个始终自动工作的运算符。要真正完全工作，您需要[http://code.google.com/p/sympy/issues/detail?id=1941](http://code.google.com/p/sympy/issues/detail?id=1941)。另请参阅[https://github.com/sympy/sympy/wiki/Canonicalization](https://github.com/sympy/sympy/wiki/Canonicalization)（随意编辑该页面）。

但是，您可以使用该 stackoverflow 问题中的想法创建一个大部分时间都可以工作的类，并且对于它无法处理的情况，编写一个简单的函数，该函数通过表达式并将运算符应用到没有的地方申请了。

顺便说一句，将微分运算符视为“乘法”需要考虑的一件事是它是非关联的。即`(D*f)*g`= `g*Df`，而`D*(f*g)`= `g*Df + f*Dg`。所以当你做一些事情时你需要小心，它不会“吃掉”一个表达的一部分，而不是整个事情。例如，`D*2*x`会`0`因此而放弃。SymPy 到处都假设乘法是关联的，因此它可能在某些时候错误地执行此操作。

如果这成为一个问题，我建议转储自动应用程序，并只使用一个通过并应用它的函数（正如我上面提到的，无论如何你都需要它）。

# iphone - 使用 UISearchDisplayController 时出现数组越界错误

> ID：15463413
> 
> 赞同：0
> 
> 时间：2013-03-17T16:50:10.890
> 
> 标签：iphone, objective-c, xcode, uisearchdisplaycontroller

我在 UITableView 上有一个 UISearchDisplayController。UITableView 从服务器获取 JSON 数据，将其分解，然后对象类获取该数据并创建对象。它将对象添加到可变数组中，然后用作表的数据源。

还有另一个 Mutable 数组用作“过滤”对象。

它是这样声明的：

```
self.filteredItems = [NSMutableArray arrayWithCapacity:[self.items count]]; 
```

当我尝试搜索表格时，我收到此错误：

> 由于未捕获的异常“NSRangeException”而终止应用程序，原因：“ *** -[__NSArrayM objectAtIndex:]: index 2 beyond bounds [0 .. 1]”

这是我用来进行过滤的代码，我在浏览了一堆教程后发现，我不能使用 NSPredicate，因为它似乎返回函数返回一个 NSArray，我有一个 NSMutableArray，我不能更改，因为我没有静态声明对象。

```
- (void)filterContentForSearchText:(NSString*)searchText scope:(NSString*)scope
{    
    /*
     Update the filtered array based on the search text and scope.
    */

    [self.filteredItems removeAllObjects];

    for (Update *update in items)
    {        
        if ([scope isEqualToString:@"Serial Number"]) {
            NSComparisonResult result = [[update Serial_Number] compare:searchText options:NSCaseInsensitiveSearch range:NSMakeRange(0, [searchText length])];
            if (result == NSOrderedSame){
                [filteredItems addObject:update];
            }
        } else if ([scope isEqualToString:@"Ticket Number"]) {
            NSComparisonResult result = [[update Ticket_Number] compare:searchText options:NSCaseInsensitiveSearch range:NSMakeRange(0, [searchText length])];
            if (result == NSOrderedSame){
                [filteredItems addObject:update];
            }
        } else if ([scope isEqualToString:@"Customer"]) {
            NSComparisonResult result = [[update Customer] compare:searchText options:NSCaseInsensitiveSearch range:NSMakeRange(0, [searchText length])];
            if (result == NSOrderedSame){
                [filteredItems addObject:update];
            }
        }
    }
} 
```

不太确定我做错了什么，我以前从未尝试过实现此控件。

我实际上跑了断点，我可以看到对象被添加到过滤后的数组中，但突然它崩溃了。

如果您需要代码的任何其他部分来帮助我，请告诉我。

谢谢！

编辑：

这是委托方法：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    // Return the number of rows in the section.
    if (updatesTableView == self.searchDisplayController.searchResultsTableView) {
        return [self.filteredItems count];
    } else  {
        return [self.items count];
    }
}

// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }

    Update *update = nil;

    if (tableView == self.searchDisplayController.searchResultsTableView) {
        update = [filteredItems objectAtIndex:indexPath.row];
    } else {
        // Configure the cell...
        update = [items objectAtIndex:indexPath.row];
    }

    [[cell textLabel] setText:[update Serial_Number]];
    [[cell detailTextLabel] setText:[NSString stringWithFormat:@"Customer: %@", [update Customer]]];

    cell.textLabel.adjustsFontSizeToFitWidth = YES;
    cell.detailTextLabel.adjustsFontSizeToFitWidth = YES;
    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    return cell;    
} 
```

普通表和它们的详细视图一样显示得很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T17:17:05.163

在你的委托方法中，你有'numberOfRows'：

```
if (updatesTableView == self.searchDisplayController.searchResultsTableView) { 
```

然后在“cellForRowAtIndexPath”中：

```
if (tableView == self.searchDisplayController.searchResultsTableView) { 
```

您正在比较不同的表以确定行数，然后从哪个数组中获取数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T05:59:53.883

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    // Return the number of rows in the section.
    if (tableView == self.searchDisplayController.searchResultsTableView) {
        return [self.filteredItems count];
    } else  {
        return [self.items count];
    }
} 
```

# c++ - 将 YUV 写入文件会导致帧重复

> ID：15463415
> 
> 赞同：1
> 
> 时间：2013-03-17T16:50:48.227
> 
> 标签：c++, opengl, video-encoding, yuv

我正在将 YUV (YV12) 帧写入 YUV 文件。我正好保存了 101 帧。但是当我播放输出 YUV 文件时，我有 2 倍以上的帧，而每一秒帧总是空的。

这是我的代码：

```
 size_t lenght=_viewWidth * _viewHeight * 3;
    BYTE *bytes=(BYTE*)malloc(lenght);
    ///////////////  read pixels from tex  /////////////////////
    glBindTexture(GL_TEXTURE_2D,tex);
    glGetTexImage(GL_TEXTURE_2D,0,GL_RGB,GL_UNSIGNED_BYTE,bytes);
    glBindTexture(GL_TEXTURE_2D,0);

        BYTE *uvOut= new uint8_t[_viewWidth * _viewHeight *3];

            if(cfg.seqStart <= cfg.seqEnd)
    {
    hOutFile = fopen( outFileName.c_str(), cfg.appendMode ? "ab" : "wb" );
    assert(hOutFile!=0);

       RGBtoYUV420PSameSize(bytes,uvOut,3,0,_viewWidth,_viewHeight);

     fwrite(uvOut,_viewWidth* 3, _viewHeight, hOutFile); // Write V line

    fclose(hOutFile);
        cfg.seqStart++;
    }else{

        printf("done");

    }

    delete uvOut;
    free(bytes); 
```

我运行这个块 101 次。我仔细检查了它。另一个帧来自哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T21:02:21.400

对opengl一无所知，但YV12格式的帧大小是

```
width * height * 1.5 
```

即，色度部分在水平和垂直方向上按因子 2 进行二次采样。上面我看到`3`了很多，把那个值改成`1.5`。

如果您对 YUV 格式转换工具感兴趣，请查看[我](https://github.com/figgis/yuv-tools)在 python 中编写的。[这里](https://github.com/figgis/yuv-viewer)还有一个基于[SDL](http://www.libsdl.org/) 的查看器。那里有很多灵感:-)

# c# - 了解获取和设置访问器

> ID：15463416
> 
> 赞同：5
> 
> 时间：2013-03-17T16:50:49.173
> 
> 标签：c#, asp.net

我是新手，我正在尝试学习 C# 的基础知识。这听起来可能很微不足道，可能很愚蠢，但这是一个疑问。在浏览应用程序的一个源代码时，我在一个类中看到了一段代码

```
private string fname;
public string FirstName
{
    get
    {
       return fname
    }
    set
    {
       fname = value;
    }
} 
```

谁能告诉我是什么意思。我知道当我们声明一个类时，我们`fname`使用别名访问`FirstName`。如果是出于某种安全目的，那又如何呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T16:52:49.807

这段代码也等价于：

```
public string FirstName { get; set; } 
```

这样做是定义一个[`property`](http://msdn.microsoft.com/en-us/library/x9fsa0sw%28v=vs.80%29.aspx). 在 C# 中，属性为 private 提供封装[`fields`](http://msdn.microsoft.com/en-us/library/ms173118.aspx)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T16:55:14.750

您可以在属性上编写自定义逻辑。Fe，一些验证：

```
public string FirstName
{
    get
    {
       return fname;
    }
    set
    {
       if (value.Count(s => Char.IsDigit(s)) > 0)
       {
           throw new Exception("Only letters allowed");
       }
       fname = value;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-17T16:54:29.340

fname 是一个字段，具有私有可见性，但 FirstName 是一个公共属性，因此它将在类外部可见，并且可以在 get 和 set 方法中包含逻辑

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T16:53:54.157

它被称为属性（[MSDN 文章](http://msdn.microsoft.com/en-us/library/x9fsa0sw.aspx)）。使用它们的原因是封装访问某些类字段，以便将来能够在需要时轻松更改类行为。

这也相当于所谓的自动属性，因为此时的属性不添加任何逻辑：

```
public string FirstName { get; set; } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-17T16:56:38.733

get 和 set 方法称为访问器（getters）和修改器（setters），这些方法用于访问和改变对象的属性，而不允许从类外部访问。看到变量 fname 的访问修饰符是私有的，这意味着它只能被类内的任何方法访问。

并注意 get 和 set 方法通常应该被赋予 public 访问修饰符，这使得该方法可以从任何外部类访问。

# python - Pygame二段跳

> ID：15463422
> 
> 赞同：1
> 
> 时间：2013-03-17T16:51:14.750
> 
> 标签：python, pygame

我几乎放弃了，所以我需要帮助。我正在尝试制作一个具有双跳的简单平台游戏......我一直在兜圈子试图找到有效的东西到目前为止我最好的想法是比较滴答数，但每次我得到一些想法时，我以某种方式设法搞砸了这一切，我不知道如何......有没有简单的方法？

请忽略任何不必要的变量这只是一个例子

```
Clock=pygame.time.Clock()

t=0
a=0
b=0
f=0
m=0

while True:
    Clock.tick(180)
    for event in pygame.event.get():
        if event.type == QUIT:       
            pygame.quit()
            sys.exit()
        if event.type == KEYDOWN:
            if event.key==K_SPACE and b==0:
                movey=-1
                a=1
                t=pygame.time.get_ticks()
            if event.key==K_SPACE and b==1:
                f=pygame.time.get_ticks()
                if f<=t+238:
                    a=1
                else:
                    pass
        if event.type == KEYUP:
            if event.key==K_SPACE and b==0 and a==1:
                a=0
                b=1
            if event.key==K_SPACE and b==1 and a==1:
                m=1
                b=3
                s=y
    if m==1:
        y+=movey
        if y==s-32:
            m==0

    elif y<=312 and movey==-1:
        movey=+1
    elif y==344 and movey==+1:
        movey=0
        a=0
        b=0
    else:
        y+=movey 
```

现在这是我正在尝试的一个....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T17:56:37.797

```
g = -1  # gravity
floor = 0  # where frog stands

class Frog():  # say you have a frog
    def __init__(self):
        self.y = 0  # distance from ground
        self.y_speed = 0  # speed
        self.jumping = 0  # jumping status

    def jump(self):
        if self.jumping == 0:
            self.y_speed = 9  # a big jump
            self.jumping = 1  # change jumping status
        # I want the small jump available only when falling
        elif self.jumping == 1 and self.y_speed <= 0:
            self.y_speed = 5  # a small one
            self.jumping = 2  # change jumping status

    def update(self):  # this is called by mainloop
        self.y_speed += g  # change the acceleration
        self.y = max(self.y + self.y_speed, floor)  # don't want fall off
        if self.y == 0:  # on the ground again!
            self.jumping = 0  # reset jump
            self.y_speed = 0  # reset speed 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T17:56:35.857

两个例子：

*   单跳[http://pastebin.com/ZLuPBg7k](http://pastebin.com/ZLuPBg7k)
*   双跳[http://pastebin.com/uwK5wPM1](http://pastebin.com/uwK5wPM1)

您可以强制在两次跳跃之间设置最短时间，但为了简化示例，我将其省略了。询问您是否还有其他问题。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-10-14T22:34:27.507

使用计数器不是更容易吗？只需在你的播放器中设置一个计数器变量 = 0，然后定义你的跳跃并设置计数器 += 1。然后说如果计数器 < 2 那么你可以跳跃。不 ？

# sqlite - 使用 ER 模型进行数据库设计（转换多值属性）

> ID：15463424
> 
> 赞同：0
> 
> 时间：2013-03-17T16:51:28.360
> 
> 标签：sqlite, database-design, entity-relationship, normalization

我已将 ER 图转换为第三个规范化表，但我不相信我做得对。

图片中给出了 ER 图和第三个规范化表（由我制作）。

如果这个设计没有问题，请给我建议！

![在此处输入图像描述](../Images/95673dcba20f64144a8951d4fb04f6f0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T17:23:04.873

看起来不错，

对于外键，不需要添加 post fix "_fk"，因为它缩短了列名，如果你不使用 inno

# javascript - 编辑图表后更新 HighChart 上的系列数组

> ID：15463425
> 
> 赞同：0
> 
> 时间：2013-03-17T16:51:33.807
> 
> 标签：javascript, jquery, ajax, csv, highcharts

一般来说，我是 JavaScript 和 Web 开发的新手。我有一个 areaspline highchart，作为项目的一部分，我必须能够通过在 y 轴上向上或向下移动曲线上的点来编辑图表。我已经根据保存在服务器上的 csv 文件中的数据创建了图表。我的想法是我可以编辑曲线上的点，然后更新 csv 文件，稍后我可以使用它来创建单独的图形。

我按照这个例子来实现点拖动：http: [//jsfiddle.net/highcharts/AyUbx/](http://jsfiddle.net/highcharts/AyUbx/)正在工作。

我遇到的问题是在我编辑图表后更新 csv 文件。我一直在寻找问题的解决方案，但我似乎无法弄清楚。这是 jsfiddle 示例中的函数，其值我需要回发到服务器并写入 csv 文件：

```
 drop: function() {
    $('#drop').html(
    'In <b>' + this.series.name + '</b>, <b>' +
    this.category + '</b> was set to <b>' + 
    Highcharts.numberFormat(this.y, 2) + '</b>'
    );
    }` 
```

如何使用新值 (this.y) 更新服务器上的 csv 文件？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T17:05:45.690

If you want to post data to your server you can use the jquery post method :

```
drop: function() {
    $('#drop').html(
    'In <b>' + this.series.name + '</b>, <b>' +
    this.category + '</b> was set to <b>' + 
    Highcharts.numberFormat(this.y, 2) + '</b>'
    );
    $.post("updateFile.php", { ypos: this.y , xpos: this.x} );  // like this
}` 
```

**UPDATE:**

After, you just have to update your file in the updateFile.php page. You can access your data with PHP like this `$_POST['ypos']` or `$_POST['xpos']`

For example if you want to write the new positions in an CSV file :

```
<?php
// 1 : open the file
$myfile = fopen('myfile.csv', 'a+');

// 2 : write at the end of the file
fputs($myfile, $_POST['ypos'] . "; " . $_POST['xpos'] . "\n");

// 3 : when we have done, we close the file
fclose($myfile);
?> 
```

# android - Android：属性在父标签的清单中缺少 Android 命名空间前缀

> ID：15463427
> 
> 赞同：0
> 
> 时间：2013-03-17T16:51:50.467
> 
> 标签：android

在我的清单中，我使用了这个：

```
<activity
            android:name=".Overlay"
            parent="@android:style/Theme.Dialog"
            android:label="@string/label"
            android:theme="@style/Theme.Overlay" >
..
</activity> 
```

每次我更改 xml 时，我都会收到此错误“属性缺少 Android 命名空间前缀”在项目-> 清理之后它会工作，直到我再次更改 xml。android:parent 不存在，那么这里有什么问题以及如何解决呢？

谢谢塔塔

* * *

## 回答 #1

> 赞同：-5
> 
> 时间：2013-06-05T19:59:14.197

我已经修好了。是我的错

# php - 在数据库中搜索值时出现 PHP 错误

> ID：15463428
> 
> 赞同：0
> 
> 时间：2013-03-17T16:51:52.107
> 
> 标签：php, database, search

我的代码引发了意外警告。除搜索部分外，代码一切正常。

当我搜索我的数据时，我从未搜索过我收到此消息

```
 Warning: mysql_num_rows() expects parameter 1 to be resource 
```

这是我的html：

```
<html>
    <head>
        <title>
            Employee Details 
        </title>
    </head>
    <body>
        <?php

        $page='index.php';
            mysql_connect('localhost','root','') or die (mysql_error());
            mysql_select_db('employee') or die (mysql_error());

            /* {DELETE AN ENTRY FROM THE LIST AND DATABASE -START*/
            if(isset($_GET['delete']))
            {
                mysql_query('DELETE FROM details where empid='.mysql_real_escape_string((int)$_GET['delete']));
            }
            /* DELETE AN ENTRY FROM THE LIST AND DATABASE -END}*/

            /*Form displayed after clicking on EDIT - START*/
            if(isset($_GET['edit']))
            {
                $query=mysql_query('SELECT empid, fname, lname, address, phone, email, designation FROM details where empid='.mysql_real_escape_string((int)$_GET['edit']));

                $get_row=mysql_fetch_assoc($query);
                $empid      =   $get_row['empid'];
                $fname      =   $get_row['fname'];
                $lname      =   $get_row['lname'];
                $address    =   $get_row['address'];
                $phone      =   $get_row['phone'];
                $email      =   $get_row['email'];
                $designation=   $get_row['designation'];

                echo '<p><form method="post" action="">
                        <table border=1 align="center" cellspacing=.3>
                        <caption>Edit details for '.$fname.' '.$lname.'</caption>
                        <tr><td>Employee ID:</td><td><input type="text" name="empid" value='.$empid.' readonly="readonly" size=25></td></tr>
                        <tr><td>FirstName:</td><td><input type="text" name="fname" value='.$fname.' size=25></td></tr>
                        <tr><td>Last Name:</td><td><input type="text" name="lname" value='.$lname.' size=25></td></tr>
                        <tr><td>Postal Address:</td><td><textarea name="address" rows=4 size=25>'.$address.'</textarea></td></tr>
                        <tr><td>Phone number:</td><td><input type="text" name="phone" value='.$phone.' size=25></td></tr>
                        <tr><td>E-mail address</td><td><input type="text" name="email" value='.$email.' size=25></td></tr>
                        <tr><td>Designation</td><td><textarea name="designation" rows=4 size=25>'.$designation.'</textarea></td></tr>
                        <tr><td><input type="submit" value="Save to database" name="submit"></td><td><a href="index.php">Cancel all changes</a></td></tr>
                        </table>
                        </form></p>';
            }
            /* FORM to add a new value start*/
            if(isset($_GET['add']))
                {
                    echo '<p><form method="post" action="">
                            <table border=1 align="center" cellspacing=.3>
                            <caption>Add details of a new Employee</caption>
                            <tr><td>FirstName:</td><td><input type="text" name="fname" size=25></td></tr>
                            <tr><td>Last Name:</td><td><input type="text" name="lname"  size=25></td></tr>
                            <tr><td>Postal Address:</td><td><textarea name="address" rows=4 size=25></textarea></td></tr>
                            <tr><td>Phone number:</td><td><input type="text" name="phone"  size=25></td></tr>
                            <tr><td>E-mail address</td><td><input type="text" name="email"  size=25></td></tr>
                            <tr><td>Designation</td><td><textarea name="designation" rows=4 size=25></textarea></td></tr>
                            <tr><td><input type="submit" value="Add to database" name="add"></td><td><a href="index.php">Cancel all changes</a></td></tr>
                            </table>
                            </form></p>';
            }
            /*FORM to add a new value end*/

            /*Form displayed after clicking on EDIT - END*/

            if(empty($_POST) === false)
            {
                if(isset($_POST['submit']) && $_POST['submit']='Save to database')
                    {
                        $err = 'No';
                        $empid      =   $_POST['empid'];
                        $fname      =   $_POST['fname'];
                        $lname      =   $_POST['lname'];
                        $address    =   $_POST['address'];
                        $phone      =   $_POST['phone'];
                        $email      =   $_POST['email'];
                        $designation=   $_POST['designation'];  

                        if(empty($empid)=== true || empty($fname)=== true || empty($lname)=== true || empty($address)=== true || empty($phone)=== true || empty($email)=== true || empty($designation)=== true)
                            {
                                echo '<p align="center">* All fields are mandatory</p>';
                                $err='Yes';
                            }

                                else 
                                    {
                                        if (ctype_alpha($fname) === false || ctype_alpha($lname) === false)
                                            {
                                                echo '<p align="center">* Please enter a valid name.</p>';
                                                $err='Yes';
                                            }
                                        if(!is_numeric($phone))
                                            {
                                                echo '<p align="center">* Please enter a valid phone number.</p>';
                                                $err='Yes';
                                            }
                                        if(filter_var($email,FILTER_VALIDATE_EMAIL) === false)
                                            {   
                                                echo '<p align="center">* Please enter a valid E-mail address</p>';
                                                $err='Yes';
                                            }
                                        if ($err==='No')
                                                {
                                                    mysql_query('UPDATE details set fname="'.mysql_real_escape_string($fname).'", lname="'.mysql_real_escape_string($lname).'", address="'.mysql_real_escape_string($address).'", phone="'.mysql_real_escape_string($phone).'", email="'.mysql_real_escape_string($email).'", designation="'.mysql_real_escape_string($designation).'" where empid='.mysql_real_escape_string((int)$empid));
                                                    header('Location:'.$page);
                                                }
                                    }

                    }

                    if(isset($_POST['add']) && $_POST['submit']='Add to database')
                    {
                        $err = 'No';

                        $fname      =   $_POST['fname'];
                        $lname      =   $_POST['lname'];
                        $address    =   $_POST['address'];
                        $phone      =   $_POST['phone'];
                        $email      =   $_POST['email'];
                        $designation=   $_POST['designation'];  

                        if(empty($fname)=== true || empty($lname)=== true || empty($address)=== true || empty($phone)=== true || empty($email)=== true || empty($designation)=== true)
                            {
                                echo '<p align="center">* All fields are mandatory</p>';
                                $err='Yes';
                            }

                                else 
                                    {
                                        if (ctype_alpha($fname) === false || ctype_alpha($lname) === false)
                                            {
                                                echo '<p align="center">* Please enter a valid name.</p>';
                                                $err='Yes';
                                            }
                                        if(!is_numeric($phone))
                                            {
                                                echo '<p align="center">* Please enter a valid phone number.</p>';
                                                $err='Yes';
                                            }
                                        if(filter_var($email,FILTER_VALIDATE_EMAIL) === false)
                                            {   
                                                echo '<p align="center">* Please enter a valid E-mail address</p>';
                                                $err='Yes';
                                            }
                                        if ($err==='No')
                                                {
                                                    mysql_query("INSERT INTO details (fname, lname, address, phone, email, designation) VALUES('$fname','$lname','$address','$phone','$email','$designation')");
                                                    header('Location:'.$page);
                                                }
                                    }

                    }

                if(isset($_POST['search']) && $_POST['search']='search')
                    {
                        $name   =   $_POST['name'];
                        $query = mysql_query('SELECT empid, fname, lname, address, phone, email, designation FROM details where lname='.$name."'");
                        echo $name;
                        if(mysql_num_rows($query) == 0)
                        {
                            echo 'There are no records in the database matching your search';
                        }
                            else
                            {   

                                echo '<table border=1 cellpadding=10 cellspacing=.5 bgcolor="33CCCC">
                                    <caption>Search Results for '.$name.'.</caption>
                                    <tr><th>Employee ID</th><th>First Name</th><th>Last Name</th><th>Phone</th><th>Postal Address</th><th>E-Mail</th><th>Designation</th><th>Edit</th><th>Delete</th></tr>';

                                while($get_row = mysql_fetch_assoc($query))
                                    {
                                        echo '<tr><td>'.$get_row['empid'].'</td><td>'.$get_row['fname'].'</td><td>'.$get_row['lname'].'</td><td>'.$get_row['phone'].'</td><td>'.$get_row['address'].'</td><td>'.$get_row['email'].'</td><td>'.$get_row['designation'].'</td><td><a href="index.php?edit='.$get_row['empid'].'">Modify Details</a></td><td><a href="index.php?delete='.$get_row['empid'].'">Delete entry</a></td></tr>';
                                    }
                                echo '</table>';

                            }                   
                    }

            }

            echo '<p align="right"><a href="index.php?add">Add a new value</a></p>';
            /* TO DISPLAY DATA STORED IN THE DATABASE -START */

            echo '<form action="" method="post">    
                        <p align="right"><input type="text" name="name" size=25>
                        <input type="submit" name="search" value="search"></p>
                    </form>';

            $query=mysql_query('SELECT empid, fname, lname, address, phone, email, designation FROM details');
            if(mysql_num_rows($query) == 0)
            {
                echo 'There are no records in the database';
            }
                else
                {   

                    echo '<table border=1 cellpadding=10 cellspacing=.5 bgcolor="33CCCC">
                        <tr><th>Employee ID</th><th>First Name</th><th>Last Name</th><th>Phone</th><th>Postal Address</th><th>E-Mail</th><th>Designation</th><th>Edit</th><th>Delete</th></tr>';

                    while($get_row = mysql_fetch_assoc($query))
                        {
                            echo '<tr><td>'.$get_row['empid'].'</td><td>'.$get_row['fname'].'</td><td>'.$get_row['lname'].'</td><td>'.$get_row['phone'].'</td><td>'.$get_row['address'].'</td><td>'.$get_row['email'].'</td><td>'.$get_row['designation'].'</td><td><a href="index.php?edit='.$get_row['empid'].'">Modify Details</a></td><td><a href="index.php?delete='.$get_row['empid'].'">Delete entry</a></td></tr>';
                        }
                    echo '</table>';

                }   

            /* TO DISPLAY DATA STORED IN THE DATABASE -END */

        ?>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T16:56:18.903

改变

```
$query = mysql_query('SELECT empid, fname, lname, address, phone, email, designation FROM details where lname='.$name."'"); 
```

至

```
$query = mysql_query("SELECT empid, fname, lname, address, phone, email, designation FROM details where lname='".$name."'"); 
```

（您忘记了字符串的开头 '）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T16:56:57.803

只需替换此行 `mysql_query('SELECT empid, fname, lname, address, phone, email, designation FROM details where empid='.mysql_real_escape_string((int)$_GET['edit']));`

对此

`mysql_query("SELECT empid, fname, lname, address, phone, email, designation FROM details where empid='.mysql_real_escape_string((int)$_GET['edit'])") or die(mysql_error());`

你会发现问题所在。很可能，您正在引用一个不存在的行。另外，正如其他回复所说，您`'`在查询结束时忘记了，

# javascript - 创建自定义对象时出现 JavaScript 错误

> ID：15463432
> 
> 赞同：-1
> 
> 时间：2013-03-17T16:52:04.900
> 
> 标签：javascript, javascript-objects

我发现当我调用 record.create() 时，有时它会成功，有时它会抛出一个错误，指出不存在这样的方法，即使记录对象的属性设置得当。

我是否错误地使用了创建方法？**可能是我遗漏了一些关于 JavaScript 自定义对象语法的东西。**

```
<script language="javascript" type="text/javascript">

    var record = {
        RecordID : null,
        CustomerID : null,
        CompanyID : null,

        create : function() {
            var obj = new Object();

            obj.RecordID = "";
            obj.CustomerID = "";
           return obj;
        }
    };

   function pageLoad(sender, eventArgs) {
 {
 //*******SUCCEEDS********
 record = record.create()
 }

       function RadGrid1_RowSelected(sender, args) {

        currentRowIndex = args.get_gridDataItem().get_element().rowIndex;

        var dataItem = args.get_gridDataItem().get_dataItem();
        recordId = dataItem["Record_ID"];
        if (tableView.get_selectedItems().length == 1) {
            record = record.create();
            record.RecordID = dataItem["Record_ID"];
            record.CustomerID = dataItem["Customer_ID"];
            setValues();

        }
        else if (tableView.get_selectedItems().length > 1) {
            record= record.create();//****FAILS ALWAYS even when record object has non-null properties*******
        }

        if ($.inArray(recordId, recordIds) == -1) {
            recordIds.push(recordId);
        }
    }

</script> 
```

**更新：**这对我有用。 我没有在“记录”全局对象上*使用 create 方法，而是使用了一种简单的方法。*每次我想在记录对象上调用 create() 方法时，只需调用自定义方法“resetRecord”。这样我就没有错误，我的逻辑也很完美。

```
 function resetRecord() {
        record.RecordID = "";
        record.CustomerID = "";
        record.CompanyID = "";      
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T16:53:42.150

第一次调用后它将不起作用，因为您正在覆盖`record`对象。这将破坏任何`create()`方法，因为返回的对象没有此方法/属性。

对于您更新，变量具有函数级范围。您正在`record`使用`RadGrid1_RowSelected`.

我不完全确定你在做什么，但这会让你克服你的第一个问题。

```
function RadGrid1_RowSelected(sender, args) {
        var newRecord;

        currentRowIndex = args.get_gridDataItem().get_element().rowIndex;

        var dataItem = args.get_gridDataItem().get_dataItem();
        recordId = dataItem["Record_ID"];
        if (tableView.get_selectedItems().length == 1) {
            record = record.create();
            record.RecordID = dataItem["Record_ID"];
            record.CustomerID = dataItem["Customer_ID"];
            setValues();

        }
        else if (tableView.get_selectedItems().length > 1) {
            newRecord= record.create();//****FAILS ALWAYS even when record object has non-null properties*******
        }

        if ($.inArray(recordId, recordIds) == -1) {
            recordIds.push(recordId);
        }
    } 
```

# php - 如何在 Wordpress 中对齐文本？

> ID：15463435
> 
> 赞同：-3
> 
> 时间：2013-03-17T16:52:20.680
> 
> 标签：php, html, css, wordpress

看看[我的网站](http://tourbazaar.co.in/kashmir-tour-package/)。

我想对齐文本。例如：

```
Day 4              Visit Gulmarg. Around 2 hours drive. Enjoy the majestic view while on
way. Visit the magnificient snow covered hills. Skating can also be done. You can also
take ride in the Rope ways (Gondola) to reach    upper Gulmarg where you can enjoy more
snow clad mountains. Get back to Srinagar and night stay in the hotel. 
```

应该：

```
Day 4              Visit Gulmarg. Around 2 hours drive. Enjoy the majestic view while on
                   way. Visit the magnificient snow covered hills. Skating can also be
                   done. You can also take ride in the Rope ways (Gondola) to reach
                   upper Gulmarg where you can enjoy more snow clad mountains. Get back to
                   Srinagar and night stay in the hotel. 
```

有人对如何做到这一点有任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T17:07:42.443

By having a look at the code from your site it seems that you have manually given spaces through wordpress wysiwyg editor. Try removing those extra spaces and give a margin or padding through css.

# uml - UML 用例模型：Actor 泛化

> ID：15463438
> 
> 赞同：4
> 
> 时间：2013-03-17T16:52:33.830
> 
> 标签：uml, use-case, user-stories

我开始学习 UML 并且有一个关于 Actor Generalization 的问题：

想象一下，我正在为 College 的某种应用程序编写用例图。我已经确定有两个演员；学生和老师。

现在，为了简短起见，假设要求相当简单（对我的问题并不重要）：

*   学生可以搜索课程
*   学生可以注册课程
*   学生可以提交论文
*   学生可以支付他的课程费用
*   老师可以给论文评分
*   学生可以就他的一堂课联系老师（电子邮件类型的消息，但都在系统内管理）
*   老师可以联系所有学生参加他的一堂课（同样由系统处理）。

一切都很好。

我卡住的地方是：

*   学生有用户名和密码，必须登录才能使用系统
*   教师有用户名和密码，必须登录才能使用系统
*   学生可以通过在线门户重置他的密码
*   老师可以通过在线门户重置他的密码

所以我的问题是......如何最好地处理系统的常见用例？

一方面，我可以看到学生和教师都是特殊类型的用户，并且用户参与者与常见用例相关联（因此用户有用户名和密码并且必须登录，用户可以通过在线门户网站等）。

另一方面，让教师和学生拥有相同的超级演员（正确的术语？）似乎有点奇怪，因为他们似乎是系统的两个非常不同的用户。因此，我是否不应该与两个参与者（学生和教师）保持联系，并简单地将学生与常见用例和教师与常见用例联系起来？

我已经尝试了这两种方法。正如我所提到的，由于教师和学生非常不同，用户泛化方法感觉不太好，但是对于不同的参与者有几个相同的用例似乎有点未优化（或多余的，或者只是在纸上看起来很有趣！）。

对此有正确或错误的答案，还是仅取决于偏好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T22:06:42.687

演员泛化最重要的用途之一是“*分解出共同的演员行为*”。

做到这一点的最好方法是使 User 角色抽象。这样，您就不必担心它的细节以及教师和学生的差异如此之大。“*明智地使用抽象角色简化了您的图表并提高了可读性*”。

所以我说**要进行概括，但要让父演员抽象**。虽然不这样做根本没有错，正如你所说：没有错也没有对。

引用来自[UML 2 和统一过程](http://www.amazon.ca/UML-Unified-Process-Practical-Object-Oriented/dp/0321321278)- 第 5.2 节 - 角色泛化。

# php - 如何在php中从数组末尾截断一些元素

> ID：15463440
> 
> 赞同：-1
> 
> 时间：2013-03-17T16:52:44.803
> 
> 标签：php, arrays

我有一个数组，但我无法预测数组中可能有多少个元素。而且我只想保留数组的前五个元素并截断其余元素。是否有任何内置 PHP 函数来执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T16:54:18.790

[http://php.net/manual/en/function.array-slice.php](http://php.net/manual/en/function.array-slice.php)

```
$truncated_array = array_slice ( $full_array , 0, 5 ) 
```

# mysql - 为什么 last_insert_id() 会在插入失败时返回一个值？

> ID：15463441
> 
> 赞同：1
> 
> 时间：2013-03-17T16:52:49.577
> 
> 标签：mysql, codeigniter-2

使用 codeigniter 和具有唯一键约束的表，如下所示：

```
UNIQUE KEY `user_identity_unique` (`site_id`,`user_id`,`event_id`) 
```

然后使用以下方法将数据插入该表：

```
$this->db->insert( 'events', $data );
return $this->db->insert_id(); 
```

当插入由于键约束而失败时，`$this->db->insert_id()`即使没有插入任何内容，它仍然返回一个值。我很肯定 mySQL 由于调用的结果而返回错误`$this->db->_error_message()`...

```
Duplicate entry '267-83880-07' for key 'user_identity_unique' 
```

这似乎是不正确的行为——任何熟悉这个的人都可以解释一下吗？为什么 last_insert_id 仍然会返回一个值？（在这种情况下，一个完全不相关的行的 id）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T16:59:29.490

它返回通过此连接进行的最后一次成功插入的 id。

# ruby - Ruby 哈希 - 填充对象时如何使用哈希值？

> ID：15463445
> 
> 赞同：0
> 
> 时间：2013-03-17T16:52:59.203
> 
> 标签：ruby, hash, ruby-1.9

对于一包扑克牌：

创建包时如何使用西装哈希（如下）？

我有：

```
class PackOfCards

  SUITS={H: 'Hearts', S:'Spades', D:'Diamonds', C:'Clubs'}
  CARDS=['A','2','3','4','5','6','7','8','9','10','J','Q','K']

  attr_accessor :pack_name, :cards

  def initialize(pack_name)

    @pack_name= pack_name
    @cards = []
    (0..3).each do |suit|
      (0..12).each do |number|
        @cards << PlayingCard.new(self, (SUITS[suit].value), CARDS[number])
      end 
    end 
  end 
end

class PlayingCard

  attr_accessor :pack, :card_number, :card_suit

  def initialize(pack, suit, number)
    @card_suit = suit
    @card_number = number
  end 

end 
```

但我得到：

```
pack_of_cards.rb:16:in `block (2 levels) in initialize': 
undefined method `value' for 
{:H=>"Hearts", :S=>"Spades", :D=>"Diamonds", :C=>"Clubs"}:Hash (NoMethodError) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T17:01:30.303

~~你`SUITS`的表达无效。~~也许你想这样做：

```
SUITS = %w[Hearts Spades Diamonds Clubs] 
```

目前尚不清楚您在做什么，但也许您应该这样做：

```
@cards =
SUITS.flat_map{|suit| CARDS.map{|number| PlayingCard.new(self, suit, number)}} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T17:04:32.240

这是一个更正的版本，请查看评论：

```
class PackOfCards
  SUITS={H: 'Hearts', S:'Spades', D:'Diamonds', C:'Clubs'} # Use curly braces to define a hash, [] braces will define an array containing one hash
  CARDS=['A','2','3','4','5','6','7','8','9','10','J','Q','K']
  attr_accessor :pack_name, :cards

  def initialize(pack_name)
    @pack_name= pack_name
    @cards = []
    SUITS.each_key do |suit| # each_key is better since it gives you the key of the hash
      (0..12).each do |number|
        puts PackOfCards::SUITS[suit]
        @cards << PlayingCard.new(self, (PackOfCards::SUITS[suit]), PackOfCards::CARDS[number]) # Call the hash with the right key to get the Suit
      end
    end
  end
end

class PlayingCard 
  attr_accessor :pack, :card_number, :card_suit

  def initialize(pack, suit, number)
    @card_suit = suit
    @card_number = number
  end

end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T17:01:41.810

您的`Suit`定义和查找看起来无效。

像这样的东西怎么样（假设输出是一副带有所有花色和数字的卡片） -

```
class PackOfCards

  SUITS = ['Hearts', 'Spades', 'Diamonds', 'Clubs']
  CARDS=['A','2','3','4','5','6','7','8','9','10','J','Q','K']

  attr_accessor :pack_name, :cards

  def initialize(pack_name)

    @pack_name= pack_name
    @cards = []
    (0..3).each do |suit|
      (0..12).each do |number|
        @cards << PlayingCard.new(self, (SUITS[suit]), CARDS[number])
      end 
    end 
  end 
end

class PlayingCard

  attr_accessor :pack, :card_number, :card_suit

  def initialize(pack, suit, number)
    @card_suit = suit
    @card_number = number
  end 

end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T17:03:15.273

您实际上已将哈希放入数组中。要访问键值对，您必须首先访问数组元素，如下所示：

```
SUITS.first[:H] 
```

# c# - 命名空间与类声明

> ID：15463449
> 
> 赞同：5
> 
> 时间：2013-03-17T16:53:35.583
> 
> 标签：c#, class, namespaces

我是 C# 的新手，我似乎找不到任何关于此的信息，所以我会在这里问它。

命名空间中的类是否必须被声明？

```
using System;
public class myprogram
{
    void main()
    {
        // The console class does not have to be declared?
        Console.WriteLine("Hello World");
    }
} 
```

如果我不使用命名空间，那么我必须声明一个类

```
class mathstuff
{
    private int numberone = 2;
    private int numbertwo = 3;
    public int addhere()
    {
        return numberone + numbertwo;
    }

using System;
public class myprogram
{
    void main()
    {
        // the class here needs to be declared.
        mathstuff mymath = new mathstuff();
        Console.WriteLine(mymath.addhere());
    }
} 
```

我是否正确理解这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-17T16:57:29.727

命名空间只是一种明确类在哪个上下文中存在的方法。想想你自己的名字，Ralph。这个世界上有很多拉尔夫，但其中之一就是你。消除歧义的另一种方法是添加您的姓氏。所以如果我们有 2 个拉尔夫，我们就有更大的机会谈论你。

同样适用于类。如果定义类`AClass`并且需要定义另一个类`AClass`，则无法区分两者。命名空间就是那个“姓氏”。一种不得不类的方式，但仍然能够区分两个不同的类，具有相同的名称。

要回答您的问题，这与“不必申报”无关。编写代码只会更容易。

例如：

```
using System;

public class myprogram
{
    void main()
    {
        // the class here needs to be declared.
        Console.WriteLine("blah");
    }
} 
```

因为`using System;`您不必声明`Console`. 只有一个`Console`可用，它位于`System`命名空间中。如果您不声明您的`using System;`命名空间，那么您需要解释在哪里`Console`可以找到。像这样。

```
System.Console.WriteLine("blah"); 
```

来自 MSDN：

> > namespace 关键字用于声明范围。此命名空间范围允许您组织代码并为您提供一种创建全局唯一类型的方法。

有关更多信息，请查看[MSDN 的命名空间](http://msdn.microsoft.com/en-us/library/z2kcy19k%28v=vs.80%29.aspx)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-17T16:56:26.983

我认为您的意思是“您可以声明一个没有命名空间的类吗？”。是的，你可以，它被称为`global`命名空间。

```
class BaseClass
{
}

class SubClass : global::BaseClass
{
} 
```

但是，这是**非常**糟糕的做法，您*永远*不应该在生产应用程序中这样做。

# c++ - OpenCV 无法编译

> ID：15463455
> 
> 赞同：0
> 
> 时间：2013-03-17T16:54:11.807
> 
> 标签：c++, visual-studio-2010, visual-c++, opencv, compiler-errors

我是新手 OpenCV 用户。我只是想了解一些关于它的知识，但我不知道从哪里开始。

不幸的是，我可以找到很多关于 openCV 的教程，但它们对我不起作用（有时是因为他们使用的旧版本）。

所以在真正开始之前，我想看看环境是否运行良好，以避免将来浪费时间。这是我发现的一个例子：

```
#include <opencv\cv.h>
#include <opencv\highgui.h>

using namespace cv;

int main()
{
    //create an image to store the video screen grab
    Mat image;

    //setup the video capture method using the default camera
    VideoCapture cap;
    cap.open(0);

    //create the window that will show the video feed
    namedWindow("VideoCaptureTutorial", 1);

    //create a loop to update the image with video camera image capture
    while(1)
    {
        //grad a frame from the video camers
        cap>>image;

        //show the image on the screen
        imshow("VideoCaptureTutorial", image);

        //create a 33ms delay
        waitKey(33);
    }

    return 0;
} 
```

我尝试编译（Visual Studio 2010）但我得到类似 150-250 的错误。我是 Visual Studio 的新手，我不能很好地理解“他”和他“不喜欢什么”。我正在学习如何在 IDE 中移动，但这很难。

错误是指 imgproc.hpp miniflann.hpp photo.hpp tracking.hpp 并报告许多未定义的标识符和语法错误。

我有一些编程经验（C 与 Arduino、Java、Assembly），但我发现 openCV 文档非常混乱和困惑。我是自学成才的，所以任何关于如何开始的帮助都将不胜感激，我的目标是在我的 2WD 机器人中实现计算机视觉（如果可能的话是立体的）。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T18:15:35.437

不可能告诉您如何使您的程序正常工作，因为您几乎没有提供任何有助于理解问题原因的信息。但是在阅读了这些行之后：

> *我可以找到很多关于 openCV 的教程，但它们对我不起作用（有时是因为他们使用的旧版本）*
> 
> *我是 Visual Studio 的新手，我不能很好地理解“他”和他“不喜欢什么”。我正在学习如何在 IDE 中移动，但这很难。*

我建议您查看这些材料（由*科罗拉多矿业学院计算机视觉的**William Hoff 教授*创建）：[在 Microsoft Visual C++ 中创建您的第一个程序和在 Microsoft Visual C++](http://inside.mines.edu/~whoff/courses/EGGN512/lectures/FirstProgramInVisualC++.pdf)中[使用 OpenCV](http://inside.mines.edu/~whoff/courses/EGGN512/lectures/OpenCVInVisualC++.pdf)

 *另请注意，OpenCV 的二进制形式特定于 Visual Studio 的具体版本。因此，例如，如果您有*...\OpenCV\build\x86\* ***vc10***，这意味着它应该与 Visual Studio ***2010***一起使用。我最近在 Visual Studio 2012 中使用 OpenCV，我必须自己编译它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-11T22:35:26.380

假设您已在 PC 上正确安装 OpenCV 并按您应该设置的 IDE，您需要在代码中包含更多库...尝试将其添加到代码顶部（我有 OpenCV 版本 3.1 和此代码为我工作......而且我也是新手！）

```
#include <iostream>
#include "opencv2/highgui/highgui.hpp"
#include "opencv2/imgproc/imgproc.hpp" 
```*

# c# - 是否有任何与单声道兼容的 3D 点的 .NET 结构或类？

> ID：15463459
> 
> 赞同：3
> 
> 时间：2013-03-17T16:54:23.990
> 
> 标签：c#, .net, vb.net, mono

我正在编写一个跨平台的应用程序。
namespace 已经有一个结构`System::Windows::Media::Media3D::Point3D`。
问题是单声道不支持`System::Windows`作为项目的一部分。

所以我认为可能有为此目的的结构或类。
不管是不是内置的。
如果扩展是轻量级和便携的，我也可以将扩展作为我的项目的一部分。
唯一重要的是要跨平台。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T17:07:21.807

您可以使用`Vector3`或`Vector4`。它们都分别存储浮点数 (X, Y, Z) 和 (W, X, Y, Z)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T17:02:31.833

Unity3D 是一个基于 Mono 的跨平台 3D 游戏环境，这意味着您可以在 C# 中编写所需的位。

[统一](http://docs.unity3d.com/Documentation/ScriptReference/MonoCompatibility.html)的单声道兼容性

> 您可以在为 Unity 编写的脚本中使用 .NET 类库。取决于您在项目设置中选择的 .NET 兼容性级别。
> 
> Unity 支持或多或少的完整类库。此页面包含可用于每个 .NET 兼容级别设置的类和方法的列表

# r - 按角度旋转图形

> ID：15463462
> 
> 赞同：4
> 
> 时间：2013-03-17T16:54:52.967
> 
> 标签：r, graph, matrix, rotation

我有多个矩阵，其中填充了组成图形的 2D 空间中多个点的 x 和 y 坐标。矩阵看起来像这样

> x1 x2 x3 x4 ...
> y1 y2 y3 y4 ...

一个可能的图表看起来像这样

![在此处输入图像描述](../Images/797b4fba0267c81791f366839f4879ac.png)

**我想要做**的是围绕点 A 旋转图形，使点 A 和 B 之间的线平行于 X 轴。

**我的想法是**将线 AB 视为直角三角形的假设，计算 α（点 A 处的角度）并使用旋转矩阵通过它旋转该图的矩阵。

到目前为止我所做的是以下

```
#df is the subset of my data that describes the graph we're handling right now,
#df has 2 or more rows

beginx=df[1,]$xcord          #get the x coordinate of point A
beginy=df[1,]$ycord          #get the y coordinate of point A
endx=df[nrow(df)-1,]$xcord   #get the x coordinate of point B
endy=df[nrow(df)-1,]$ycord   #get the y coordinate of point B
xnow=df$xcord
ynow=df$ycord
xdif=abs(beginx-endx)
ydif=abs(beginy-endy)

 if((xdif != 0) & (ydif!=0)){
     direct=sqrt(abs((xdif^2)-(ydif^2))) #calculate the length of the hypothenuse
     sinang=abs(beginy-endy)/direct      
     angle=1/sin(sinang)
     if(beginy>endy){
     angle=angle
 }else{
     angle=360-angle
 }
rotmat=rot(angle)    # use the function rot(angle) to get the rotation matrix for
                         # the calculated angle
A = matrix(c(xnow,ynow),nrow=2,byrow = TRUE)  # matrix containing the graph coords
admat=rotmat%*%A                          #multiply the matrix with the rotation matrix
} 
```

**这种方法失败了，因为**它不够灵活，无法始终计算所需的角度，结果是图形旋转了错误的角度和/或错误的方向。

提前感谢您的阅读，希望你们中的一些人可以为此带来一些新的想法

编辑：可以在此处找到重现此的数据

[X 坐标](https://dl.dropbox.com/u/13950025/data/graphx.csv)

[Y 坐标](https://dl.dropbox.com/u/13950025/data/graphy.csv)

不知道如何提供您要求的数据，如果您指定您喜欢的方式，我很乐意以另一种方式提供

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-17T18:20:35.350

像这样？

```
#read in X and Y as vectors
M <- cbind(X,Y)
#plot data
plot(M[,1],M[,2],xlim=c(0,1200),ylim=c(0,1200))
#calculate rotation angle
alpha <- -atan((M[1,2]-tail(M,1)[,2])/(M[1,1]-tail(M,1)[,1]))
#rotation matrix
rotm <- matrix(c(cos(alpha),sin(alpha),-sin(alpha),cos(alpha)),ncol=2)
#shift, rotate, shift back
M2 <- t(rotm %*% (
  t(M)-c(M[1,1],M[1,2])
  )+c(M[1,1],M[1,2]))
#plot
plot(M2[,1],M2[,2],xlim=c(0,1200),ylim=c(0,1200)) 
```

![在此处输入图像描述](../Images/21f7f0840c316b1ae1e277830aa2237c.png)

# 编辑：

我将分解转换以使其更易于理解。但是，它只是基本的线性代数。

```
plot(M,xlim=c(-300,1200),ylim=c(-300,1200))
#shift points, so that turning point is (0,0)
M2.1 <- t(t(M)-c(M[1,1],M[1,2]))
points(M2.1,col="blue")
#rotate
M2.2 <- t(rotm %*% (t(M2.1)))
points(M2.2,col="green")
#shift back
M2.3 <- t(t(M2.2)+c(M[1,1],M[1,2]))
points(M2.3,col="red") 
```

![在此处输入图像描述](../Images/0d4903d59d4e3561876e289fe2bd1b38.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T18:34:50.050

看起来您的数据不是数据框，而是更好地用作矩阵（通过`as.matrix`）。

这个答案与 Roland 的答案非常相似，但将事情分解为更多步骤，并且当角度是 的倍数时有一些特殊情况处理`pi/2`。

```
#sample data
set.seed(1) #for consistency of random-generated data
d <- matrix(c(sort(runif(50)),sort(runif(50))),ncol=2)

#rotation about point A
rotA <- function(d) {
d.offset <- apply(d,2,function(z) z - z[1]) #offset data
  endpoint <- d.offset[nrow(d.offset),] #gets difference
  rot <- function(angle) matrix(
    c(cos(angle),-sin(angle),sin(angle),cos(angle)),nrow=2) #CCW rotation matrix
  if(endpoint[2] == 0) {
    return(d) #if y-diff is 0, then no action required
  } else if (endpoint[1] == 0) { 
    rad <- pi/2 #if x-diff is 0, then rotate by a right angle
  } else {rad <- atan(endpoint[2]/endpoint[1])}
  d.offset.rotate <- d.offset %*% rot(-rad) #rotation
  d.rotate <- sapply(1:2,function(z) d.offset.rotate[,z] + d[1,z]) #undo offset
  d.rotate
}

#results and plotting to check visually
d.rotate <- rotA(d)
plot(d.rotate)
abline(h=d[1,2]) 
```

# backbone.js - 骨干模型与下划线和 ASP.NET MVC Web API 控制器不兼容？

> ID：15463463
> 
> 赞同：0
> 
> 时间：2013-03-17T16:54:53.737
> 
> 标签：backbone.js, asp.net-mvc-4, asp.net-web-api, underscore.js

当使用backbone.js 和web api 控制器时，这是一个两阶段的问题。

我有一个简单的 web api 控制器，它返回一个 JSON 字符串，在提琴手中，结果如下所示：

```
{
    "$type": "MvcApplication.Models.Article, MvcApplication",
    "Id": "1",
    "Heading":"The heading"
} 
```

我使用以下代码从我的 web api 获取用户

```
var user = new Usermodel({ id: "1" });

user.fetch({
    success: function (u) {
        console.log(u.toJSON());
    }
}); 
```

现在我的主干用户对象看起来像这样

```
{
    id: "1",
    {
        "$type": "MvcApplication.Models.Article, MvcApplication",
        "Id": "1",
        "Heading": "The heading"
    }
} 
```

当我尝试将此骨干模型对象绑定到我的视图模板时，看起来像这样

```
<form>
    <input type="text" value="<%=Heading%>" />
    <input type="submit" value="Save" />
</form> 
```

我明白了，*标题*是**未定义**的，但是当我使用 id 时它绑定得很好？似乎下划线不喜欢主干模型对象，只想要一个普通的 JSON 对象，就像我从我的 web api 获得的对象一样？

第二个问题是，当我将带有`user.save({ Heading: "my new heading });`有效负载的模型保存到我的 web api*时*，**主干模型**是完全错误的，因为我的 api 期望将这样的用户对象发送到服务器：

```
{
    "$type": "MvcApplication.Models.Article, MvcApplication",
    "Id": "1",
    "Heading":"The heading"
} 
```

而**不是**包裹在里面的真实物体的主干模型。是否有可能解决这样下划线可以处理骨干模型并告诉骨干只发送我的端点期望的有效负载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:22:19.060

您可以按照以下步骤解决问题：

除了使用 fiddler 来检查您的响应之外，请查看 Chrome 开发者工具的网络选项卡上的响应。如果响应看起来不像这样，那么您的 web api 没有返回有效的 json 响应，问题很可能在您的 web api 中。您需要获取/提供有关您的 Web api 的更多信息来解决问题。验证响应是否如下所示：

![在此处输入图像描述](../Images/60d0d8ccd5a1a3dae76479589d97dd33.png)

验证来自web api的响应正确后，查看我修改的以下jsfiddle：

[http://jsfiddle.net/J83aU/23/](http://jsfiddle.net/J83aU/23/)

参考我提供的示例修复您的客户端代码。

正确实例化 Backbone 对象。

从服务器收到响应后，在正确的步骤调用 view.render 函数。

在创建依赖于“view.el”属性的视图之前，请确保实际呈现主要内容 div。

使用字符串而不是 jQuery 对象正确声明“view.el”属性。

使用开发 Backbone 和下划线来启用调试，这是学习使用 Backbone 等开源框架时的一个重要概念。

使用 jsfiddle 的 echo/json api 模拟有效的 ajax json 响应，完全按照步骤 1 中的描述。

您提交的以下json示例甚至不是有效的json，如果您使用有效的json示例更新您的问题，解决问题会更容易。Backbone 不太可能创建此非 json 结构，更有可能是您在此处错误地提交了它。

```
{
    id: "1",
    {
        "$type": "MvcApplication.Models.Article, MvcApplication",
        "Id": "1",
        "Heading": "The heading"
    }
} 
```

最后，尝试为调用 model.save() 时出现的问题提供 http 标头的屏幕截图或其他内容。

阅读 model.save() 的 Backbone 文档，并确保您按照提供的示例执行所有操作。

您可以通过使用 ajax 选项将属性强制转换为 POST 参数来解决 Backbone 的时髦保存功能：

```
$.fn.serializeObject = function(){
    var o = {};
    var a = this.serializeArray();
    $.each(a, function() {
        if (o[this.name] !== undefined) {
            if (!o[this.name].push) {
                o[this.name] = [o[this.name]];
            }
            o[this.name].push(this.value || '');
        } else {
            o[this.name] = this.value || '';
        }
    });
    return o;
};

var saveView = Backbone.View.extend({
    events:{
        'click #saveSubmitButton':'submit'
    },
    submit:function (event) {

        event.preventDefault();
        var view = this, 
            attributes = $('#saveForm').serializeObject();

        this.model.save(attributes, {
            data:attributes,
            processData:true,
            success:function (model) {
                //....
            }
        });
    },
    render:function () {
        //.......
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T17:08:17.590

The attributes property of your model should be unaltered. Send those to your template call:

```
var MyModel = Backbone.Model.extend();
var newModel = new MyModel({
    "$type": "MvcApplication.Models.Article, MvcApplication",
    "Heading":"The heading"
});
var html = _.template(templateVar, newModel.attributes); 
```

In your templateVar, which is your templated markup, you should be able to reference $type and Heading directly.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T18:44:43.260

如果您通过 Firebug 之类的调试器查看 jsFiddle，您会发现构建模型 URL 的方式不可行，因为正斜杠已被编码。您可以尝试将您的模型声明修改为：

```
var Usermodel = Backbone.Model.extend({
    url: function () {
        return '/api/page/articles/' + this.get('id');
    }    
});

var user = new Usermodel({
    id: '85'
}); 
```

看看你是否仍然得到相同的 JSON。基本上，如果您没有 Backbone.sync 覆盖，则您正在使用内置检索，因为它不应该产生无效的 JSON。

# android - 关闭网络输入类型 = 文本的 android 单词建议

> ID：15463468
> 
> 赞同：1
> 
> 时间：2013-03-17T16:55:19.510
> 
> 标签：android, html

我有一个带有 type=text 输入控件的 .html 文件，供用户进行不构成字典单词的随机输入。它不在表单内。它不是密码字段。

```
<input id="myblah" type="text" placeholder="hello" name="s" size="20" 
maxlength="36"  autocorrect="off" autocapitalize="off" autocomplete="off" 
spellcheck="false"/> 
```

在 Android 手机上，当我浏览到 .html 文件并在此输入控件中输入文本时，键盘软件会提出建议，有时还会将输入“更正”为单词。这是我想关闭的行为-根据我的阅读，上述属性应该将其关闭，所以我有点茫然。

（三星 Galaxy S3 上最新版本的 android，使用 dolphin 浏览器和 swiftkey-x 键盘）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T20:06:28.533

没有自动大写这样的东西（根据我对 html 的了解），但你也许可以试试这个。`<input id="myblah" type="text" placeholder="hello" name="s" size="20" maxlength="36" spellcheck="false" autocomplete="off" />`

我不太确定这是否适用于 android，因为我没有 Android 智能手机，但这适用于我的浏览器。

# bitcoin - 将帐户 - 钱包 - 和比特币地址从一台服务器移动到另一台服务器

> ID：15463478
> 
> 赞同：-1
> 
> 时间：2013-03-17T16:56:33.550
> 
> 标签：bitcoin

我在 mt 第一个比特币服务器上有几个帐户，并且想添加第二个来组织帐户并平衡它们。

我有一个名为 MyTestUser 的现有帐户，它包含 3 个比特币地址，其中一个包含比特币。

我该怎么做才能将此帐户从 server1 移动到 server2？

是否有一种算法使用 json-rpc 将帐户作为对象读取，并使用另一个命令将帐户写入其他地方。

据我了解，没有办法删除帐户，还是有？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T17:21:19.410

您需要做的就是将您不再需要的钱包中的所有比特币转移到您想要保留的钱包中。之后，只需忽略您不需要的钱包。[转账没有成本，忽略钱包或地址也不会产生任何后果。]

# python - 使用 XLRD 和 Python 读取 excel 文件时出错

> ID：15463481
> 
> 赞同：-2
> 
> 时间：2013-03-17T16:56:50.607
> 
> 标签：python, xlrd

我使用 XLRD 每 30 秒读取一次 excel 文件。但是我不断收到来自 XLRD 的错误消息...

```
 File "C:\Users\Administrator\Desktop\New Folder\final_30sec.py", line 22, in odds
  book = open_workbook('excel.xls')
  File "C:\Python27\lib\site-packages\xlrd-0.9.0-py2.7.egg\xlrd\__init__.py", line 443, in open_workbook
  ragged_rows=ragged_rows,
  File "C:\Python27\lib\site-packages\xlrd-0.9.0-py2.7.egg\xlrd\book.py", line 90, in open_workbook_xls 
  ragged_rows=ragged_rows,
  File "C:\Python27\lib\site-packages\xlrd-0.9.0-py2.7.egg\xlrd\book.py", line 619, in biff2_8_load 
  cd = compdoc.CompDoc(self.filestr, logfile=self.logfile)
  File "C:\Python27\lib\site-packages\xlrd-0.9.0-py2.7.egg\xlrd\compdoc.py", line 234, in __init__
  _build_family_tree(dirlist, 0, dirlist[0].root_DID) # and stand well back ..
  File "C:\Python27\lib\site-packages\xlrd-0.9.0-py2.7.egg\xlrd\compdoc.py", line 71,  in _build_family_tree
  _build_family_tree(dirlist, parent_DID,    dirlist[child_DID].right_DID)
  File "C:\Python27\lib\site-packages\xlrd-0.9.0-py2.7.egg\xlrd\compdoc.py", line 68, in _build_family_tree 
```

有人会碰巧知道导致此错误的原因以及如何避免它...吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T09:14:04.283

如果您的问题没有错误，则猜测出了什么问题。但由于这种情况发生在 中`open_workbook()`，我建议您首先通过在 Excel（或 OpenOffice）中打开来检查您使用的文件是否正确。

如果它在 Excel 中打开，则制作一个`.xls`您的应用程序可以从头开始使用的最小文件。如果`open_workbook()`呼叫也失败，您应该考虑发布文件以及有关如何制作此类文件的详细信息，包括您使用的软件的版本、操作系统和版本。

如果它在 Excel 中不起作用，则不太可能与 xlrd 中的问题有关。

# javascript - 为什么javascript切换代码不起作用？

> ID：15463485
> 
> 赞同：1
> 
> 时间：2013-03-17T16:57:01.863
> 
> 标签：javascript, prototypejs

我已将**原型**库添加到我的站点，然后添加以下代码。但是当我单击跨度时，ul 内容并未隐藏。链接href仍然有效。

```
Event.observe(window, 'load', function() {
    Event.observe('.block-category li.parent span', 'click', function(e){
        $('.block-category li.parent ul').toggle();
        e.preventDefault();

    });
}); 
```

html:

```
 <div class="block block-category">
    <li class="level-top  parent">
    <a href="example.com/...."><span>text one</span></a>
    <ul> //the 1 ul
    <li><a><span>....</span></a></li>
    <li><a><span>....</span></a></li>
    <li><a><span>....</span></a></li>
    <li><a><span>....</span></a></li>
    </ul>
    </li>

    <li class="level-top"><a href="..."><span>....</span></a></li>

  <li class="level-top  parent">
    <a href="example.com/...."><span>text two</span></a>
    <ul> //the 2 ul
    <li><a><span>....</span></a></li>

    </ul>
    </li>
  <li class="level-top  parent">
    <a href="example.com/...."><span>text three</span></a>
    <ul>
    <li><a><span>....</span></a></li>
    <li><a><span>....</span></a></li>
    </ul>
    </li>
    </div> 
```

谢谢你。

**ps**：当点击**文字**一时，1 ul 切换。当单击 **文本 2* * 2 ul 切换时，...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T17:43:21.517

您正在使用 CSS 选择器作为原型`$()`和`Event.observe()`函数的参数。这些函数都不接受选择器。他们都希望使用元素 ID。

您可以使用`$$()`而不是`$()`给它一个选择器。请注意，这将返回一个扩展元素数组，而不仅仅是一个元素。

[http://api.prototypejs.org/dom/Event/observe/](http://api.prototypejs.org/dom/Event/observe/)
[http://api.prototypejs.org/dom/dollar/](http://api.prototypejs.org/dom/dollar/)
[http://api.prototypejs.org/dom/dollar-dollar/](http://api.prototypejs.org/dom/dollar-dollar/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T17:54:57.763

您应该尝试`$$`选择多个元素，然后为每个元素调用观察：

```
Event.observe(window, 'load', function() {
    $$('.block-category li.parent > a span').each(function (element) {
        element.observe('click', function (e) {
            e.element().up().next('ul').toggle();
            e.preventDefault();
        });
    });
}); 
```

# batch-file - 将 ZIP 文件的内容批量重命名为 ZIP 文件名

> ID：15463489
> 
> 赞同：1
> 
> 时间：2013-03-17T16:57:32.690
> 
> 标签：batch-file, zip, rename

我的问题非常类似于：

[批量重命名基于zip文件的提取文件](https://stackoverflow.com/questions/11634784/rename-extracted-file-based-on-zip-file-in-batch)

我有 470 个 .zip 文件，每个文件包含两个文件（.mp3 和 .cdg）——它们是卡拉 OK 文件。

ZIP 文件被清晰命名（Abba - Money Money Money.zip），但是 ZIP 文件的内容需要重命名（例如 FIK001ABBA_02_- *ABBA* -_MONEY_MONEY_MONEY.mp3）。

所以，我希望批处理文件执行以下操作：

*   提取文件
*   将 zip 文件的内容重命名为 zip 文件名。
*   例如：
*   FIK001ABBA_02_- *ABBA* -_MONEY_MONEY_MONEY.mp3
*   FIK001ABBA_02_- *ABBA* -_MONEY_MONEY_MONEY.cdg
*   重命名为
*   阿爸-钱钱钱.mp3
*   阿爸-钱钱Money.cdg
*   然后将文件重新添加到 zip 文件中

我查看了上面类似的帖子，但是，它谈到解压缩 *.7z 我的文件是 *.Zip。请解释 ：-）

这是代码：

```
md textfiles
for %%f in (*.zip) do (
winzip -v "%%f"
move *.txt textfiles\%%~nf.txt
)
xcopy textfiles\*.txt originalfolder
rd textfiles /s /q 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T02:55:21.420

```
@ECHO OFF
SETLOCAL 
(SET workdir=.\textfiles)
IF EXIST "%workdir%\." ECHO Choose a directory name that doesn't exist&GOTO :EOF 
FOR %%f IN (*.zip) DO CALL :process %%f
GOTO :eof

::
::  
::
:process
MD "%workdir%"
wzunzip %1 "%workdir%" >nul
PUSHD "%workdir%"
FOR /f "tokens=1*delims=-" %%i IN ('dir /b /a-d') DO CALL :procren %%i %%j
POPD
:: Not sure whether you want to ADD (as you say) 
:: or REPLACE (seems more logical)
:: 
DEL %1
wzzip -m %1 "%workdir%\*.*" >nul
IF EXIST "%workdir%\." RD "%workdir%" /S /Q
GOTO :eof

:procren %%i %%j
SET filename=%1-%2
SET newname=%2
SET newname=%newname:_= %
SET newname=%newname:-= -%
REN %filename% "%newname%"
GOTO :eof 
```

只是一些注意事项：

*   我不确定您是要添加还是替换 .ZIP 文件的内容。代码将替换。如果您真的想添加，请删除该`DEL %1`行。
*   `WINZIP`并且`7ZIP`是不同但相似的产品
*   我使用的是相对较旧的版本`WINZIP`，它有一对可用的命令行实用程序 (`WZZIP`和`WZUNZIP`)，旨在批量使用
*   `WZZIP`我的版本（v3.2，build 8668）似乎有一个错误，如果将目录移动到 zip中，则`-m`(move) 选项会将`delete`目录。`"dirname\*.*`我会追查这个 - 但这就是为什么工作目录的 RD 被门控并与 MD 一起放置在`:process`例程中，而不是在主例程中。

# jira - 在 JIRA 中归档旧问题

> ID：15463490
> 
> 赞同：0
> 
> 时间：2013-03-17T16:57:46.217
> 
> 标签：jira, archive

是否可以归档早于特定日期的问题。问题可能属于任何项目，状态必须关闭。

我将归档定义为从活动实例中完全删除它并以某种格式存储它们，以便在需要时可以引用它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T06:42:04.007

查看 Atlasian 的[Archiving a Project](https://confluence.atlassian.com/display/JIRA/Archiving+a+Project)，特别是检查：

*   [离线归档项目](https://confluence.atlassian.com/display/JIRA/Archiving+a+Project#ArchivingaProject-Archivingaprojectoffline)- 创建全局 XML 备份并删除项目。
*   [访问存档的离线项目](https://confluence.atlassian.com/display/JIRA/Archiving+a+Project#ArchivingaProject-Accessinganarchivedofflineproject)- 将项目恢复到 Jira 测试实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-13T22:58:07.453

我为我的需要制作了一个工具，它基本上允许将 Jira 项目转换为 html 网站以进行归档 - 也许它对你有用：[https ://gitlab.com/kaszaq/jiratomkdocs/](https://gitlab.com/kaszaq/jiratomkdocs/)

# twos-complement - 如何用 2 的补码中的分数表示负数？

> ID：15463491
> 
> 赞同：22
> 
> 时间：2013-03-17T16:57:48.543
> 
> 标签：twos-complement

所以我想代表数字`-12.5`。所以 12.5 等于：

```
001100.100 
```

如果我不计算分数，那么很简单，`-12`就是：

```
110100 
```

但什么是-12.5？是`110100.100`吗？我如何计算这个负分数？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-20T16:11:12.593

对于十进制数系统，每个数字位置（或列）表示（从右到左读取一个数字）：个位（即 10^0）、十位（即 10^1）、百位（即 10^2）等。

对于无符号二进制数，基数为 2，因此每个位置变为（同样，从右到左读取）：1（即 2^0）、2（即 2^1）、4（即 2^2）等。

**例如**

```
2^2 (4), 2^1 (2), 2^0 (1). 
```

在有符号二进制补码中，最高有效位 (MSB) 变为负数。因此它代表数字符号：“1”表示负数，“0”表示正数。

对于三位数字，行将包含以下值：

```
-4, 2, 1
 0  0  1 => 1
 1  0  0 => -4
 1  0  1 => -4 + 1 = -3 
```

定点（分数）系统保持的位值不变。列值遵循与以前相同的模式，以 (2) 为底，幂为负数：

```
2^2 (4), 2^1 (2), 2^0 (1) . 2^-1 (0.5), 2^-2 (0.25), 2^-3 (0.125) 
```

-1 永远是`111.000`
-0.5 加上 0.5：`111.100`

在你的情况下`110100.10`等于 -32+16+4+0.5 = -11.5。你所做的是创建 -12 然后加上 0.5 而不是减去 0.5。

你真正想要的是-32+16+2+1+0.5 = -12.5 =`110011.1`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-17T17:17:59.630

您可以一次又一次地将数字加倍，直到它为负整数或达到定义的限制，然后相应地设置小数点。

-25 是 11100111，所以 -12.5 是 1110011.1

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-09-12T09:13:06.437

所以;你想用 2 的补码表示 -12.5

> 12.5：->> 01100.1
> 
> (01100.1) 的 2 补码：->>10011.1

通过检查 2 的补码表示的加权代码属性来验证 ans（MSB 权重为 -ve）。我们将得到 -16+3+.5=-12.5

# performance - 以恒定速度更新对象的位置，无论方向如何

> ID：15463495
> 
> 赞同：1
> 
> 时间：2013-03-17T16:58:02.113
> 
> 标签：performance, algorithm, line, pong

我认为这个问题有点但很愚蠢，但我找不到答案。

我在做经典的乒乓球比赛。我希望球在任何角度都以相同的速度移动。但是使用我当前的算法（将 x 加一并计算 y）如果 y=ax+b 中的 a 很高，则每个像素之间存在很大的差距。我应该使用什么步骤？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T17:04:44.380

你设置一个默认值`speed`。然后你可以使用`x+=speed*cos(theta)`and `y+=speed*sin(theta)`。

当被击中时，你应该改变`theta`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T17:06:14.250

所以我们有这样的事情：

```
 newPoint
  |\
  | \
y |  \ r
  |  θ\
  |-----
     x  oldPoint 
```

您基本上想要的是在与 r 而不是 x 相关的距离上迈出一步。

从初等三角：
`cos θ = x/r`
和`sin θ = y/r`

所以`newX = oldX + r * cos θ`
和`newY = oldY + r * sin θ`

您可以使用`r`' 值（这基本上是移动速度）。

`θ`将是球的方向。

# python - 使用 python 正则表达式查找特定字符

> ID：15463497
> 
> 赞同：1
> 
> 时间：2013-03-17T16:58:08.137
> 
> 标签：python, regex

我有一个看起来像这样的字符串列表：

```
H PL->01 Tx=000/006 Ph=00/000  DGDD DDDR YDyD GRDD YGR  Dets=     003,003,003,003,003,003,003,003,003,003,003,003,  ports= 255,255,255,255,255,255,255,255,' 
```

我希望能够提取匹配的内容`DGDD DDDR YDyD GRDD YGR`（这会改变，但总是有字母`D,G,R,Y,y`并且它的长度可能会改变）并将它放在一个没有空格的列表中，如下所示：

```
 ['D', 'G', 'D', 'D', 'D', 'D', 'D', 'R', 'Y', 'D', 'y', 'D', 'G', 'R', 'D', 'D', 'Y', 'G', 'R'] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T17:04:30.013

如果标准是`DGRYy`至少具有三个字符的组，那么您可以使用正则表达式来实现该效果，然后在...之后将其“展平”到列表中，例如：

```
import re
from itertools import chain
print list(chain.from_iterable(re.findall('[DGRYy]{3,}', data)))
# ['D', 'G', 'D', 'D', 'D', 'D', 'D', 'R', 'Y', 'D', 'y', 'D', 'G', 'R', 'D', 'D', 'Y', 'G', 'R'] 
```

如果它总是在两个项目之间，那么可以使用内置的字符串函数来提取它，例如：

```
print [ch for ch in data[data.index('Ph'):].partition('Dets=')[0].split(' ', 1)[1] if ch != ' '] 
```

# php - 简单的“大于”表单验证

> ID：15463502
> 
> 赞同：1
> 
> 时间：2013-03-17T16:58:28.977
> 
> 标签：php, validation

我正在尝试验证我的注册表单，但其中一项验证不起作用。如果名字超过 20 个字符，我想回显一条错误消息。我正在使用代码

```
} else if($_POST["mem_first_name"] >20) {
        $errors[] = 'Sorry but your First name is limited to 20 Characters each';
} 
```

但是，如果输入超过 20 个字符，则不会显示错误。但是，如果我使用相同的代码但将其更改为小于这样

```
} else if($_POST["mem_first_name"] <20) {
        $errors[] = 'Sorry but your First name is limited to 20 Characters each';
} 
```

然后它工作，有一个简单的修复？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T17:00:07.183

```
if(strlen($_POST["mem_first_name"]) > 20) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T17:00:41.253

使用[strlen()](http://php.net/manual/en/function.strlen.php)函数

```
} else if(strlen($_POST["mem_first_name"]) >20) {
        $errors[] = 'Sorry but your First name is limited to 20 Characters each';
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T16:59:48.393

使用[strlen()](http://php.net/manual/en/function.strlen.php) 函数来计算字符串怎么样？它是计算IMO字符数的稳定且适当的方法

```
} else if(strlen($_POST["mem_first_name"]) >20) {
        $errors[] = 'Sorry but your First name is limited to 20 Characters each';
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-17T17:16:01.087

您必须使用[`strlen()`](http://www.php.net/manual/en/function.strlen.php)函数进行字符串长度检查。另外，请注意，如果您需要多字节编码支持，您应该切换到使用[`mb_strlen()`](http://www.php.net/manual/en/function.mb-strlen.php).

```
var_dump(strlen('bär'));            // int(4) - byte length
var_dump(mb_strlen('bär', 'utf8')); // int(3) - character length 
```

# perl - Perl，在 XML::Smart 保存后警告不起作用

> ID：15463503
> 
> 赞同：5
> 
> 时间：2013-03-17T16:58:35.157
> 
> 标签：perl, stderr

我意识到使用 XML::Smart 保存后出现警告问题。

```
#!/usr/bin/perl

use strict;
use warnings;

use XML::Smart;

my $XML = XML::Smart->new() ;

print STDOUT "Before save: Print to STDOUT works\n";
print STDERR "Before save: Print to STDERR works\n";
warn "Before save: Warn works\n";

$XML->save('newfile.xml') ;

print STDOUT "After save: Print to STDOUT works\n";
print STDERR "After save: Print to STDERR works\n";
warn "After save: Warn does not work\n"; 
```

测试在 OSX 10.8.2 perl 版本 5.12.4 xml-smart 版本 1.77 中完成

这可能与 XML::Smart 的内部工作密切相关，但有没有办法恢复警告的打印（重置 STDERR）。

[编辑 19/3/2013]：在 HP-UX 构造函数中也存在问题。ikegami 下面提供的解决方法可用于新建和保存以克服该问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-17T17:43:42.253

正如 TLP 指出的那样，问题与 XML::Smart 对`$SIG{__WARN__}`.

以下是该错误的解决方法：

```
{
    local $SIG{__WARN__} = $SIG{__WARN__};
    local $SIG{__DIE__}  = $SIG{__DIE__};
    $XML->save('newfile.xml') ;
} 
```

正如 Borodin 解释的那样，此解决方法将 XML::Smart 修改的 %SIG 的两个元素本地化，以便将损坏限制在封闭块中。这些值在块结束时自动恢复，在调用`$XML->save`.

# asp.net-mvc-3 - “/”应用程序中的服务器错误。该系统找不到指定的文件

> ID：15463504
> 
> 赞同：-1
> 
> 时间：2013-03-17T16:58:37.760
> 
> 标签：asp.net-mvc-3, deploying

我是 MVC3 的新手。我使用 MS 教程创建了一个 Web 应用程序。我成功地将应用程序部署到第三方服务器。

我为部署数据库（业务和 ASP 成员数据库）所采取的步骤。对于这两个数据库，我进行了备份并将其还原到托管服务器。

业务数据库运行良好，但是，ASP 会员资格不是，并给出了主题问题错误。

我正在使用 VS 2012。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T19:04:13.833

确保您也复制了所有存储过程，会员数据库还包含一些存储过程，我 99% 确定您在备份时错过了它们。

在某些表中也有一些数据，例如 in`aspnet_Applications`或 in`aspnet_SchemaVersions`您是否使用数据进行了备份？

这是 aspnet_Applications 表的样子

![在此处输入图像描述](../Images/208f8dcb2ed7c0e8838dc2d701979f78.png)

这是 aspnet_SchemaVersions 的样子

![在此处输入图像描述](../Images/bbb5baa267f55472cdaf187aeb977922.png)

# javascript - 如何在每个按键上做某事，而不仅仅是事件的第一个

> ID：15463510
> 
> 赞同：1
> 
> 时间：2013-03-17T16:59:25.917
> 
> 标签：javascript, jquery, forms, validation

我有一个我认为必须是一个非常简单的 jQuery 问题。

当用户在我正在处理的站点上创建帐户时，他们创建的帐户名称会附加到站点地址，这是他们将来用来访问其帐户的地址。

例如[http://useraccount.thewebsite.com](http://useraccount.thewebsite.com)

当用户在注册表单上的“创建帐户名”字段中键入帐户名时，我想创建一个工具提示来解释这是什么并向他们展示地址的样子。

到目前为止，这是我的代码：

```
$('input.account-name').keypress(function(){
  $("span.account-name-illustration").replaceWith($(this).val());
}); 
```

'input.account-name' 是输入字段。

'span.account-name-illustration' 是这样的：

```
<p>Your account address will be https://<span class="account-name-illustration">something</span>.thewebsite.com.</p> 
```

这适用于第一次按键，但之后没有。

所以我经过一番折腾，我发现了这个：

[http://docs.jquery.com/Events/keypress](http://docs.jquery.com/Events/keypress)

这在某种程度上有效。除了它只是不断地添加每个按键，忽略删除后输入中的实际内容或将光标放在现有字符之间等。

所以现在我想知道，我真的想记录每个按键……还是有办法在每次按键后获取输入的值？

非常感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T17:01:35.837

由于您只是用`span`文本替换了，因此`span.account-name-illustration`选择器在后续调用中将找不到任何内容。

`span`您可以通过使用`text`而不是保留来解决此问题`replaceWith`：

```
$("span.account-name-illustration").text($(this).val()); 
```

# mysql - MySQL - 我可以在 SELECT 中使用变量代替列名吗

> ID：15463511
> 
> 赞同：0
> 
> 时间：2013-03-17T16:59:29.213
> 
> 标签：mysql

我有以下代码片段来实现多语言网站。想法是，根据用户的语言，我需要将单词“Man”翻译成“Hombre”

我的问题：在这里使用 $user_language 而不是硬编码的列名“Spanish”是否有效。

代码：//$user_language（在这种情况下为西班牙语）在登录网站后从他的个人资料中传递

```
 SELECT $user_language 
  FROM TranslationTable 
  WHERE English=Man 
```

翻译表：

```
 English     Spanish   French
  Man          Hombre    homme 
```

谢谢西南

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T17:16:52.707

我不相信您可以使用这样的变量，但您可以使用动态 SQL 构建查询。

但是，如果您有机会更改表结构，那可能是您更好的选择。我建议将其分解为下表：

```
Language (store your languages such as English, Spanish, etc):
LanguageId and LanguageName

LanguageTranslation (language translation lookup table):
LanguageId, TokenId, and Translation

Token (store your tokens - versus querying directly on the english translation):
TokenId and TokenName 
```

然后你可以像这样轻松地查询它：

```
SELECT Translation
FROM LanguageTranslation LT
   JOIN Language L ON LT.LanguageId = L.LanguageId
   JOIN Token T ON LT.TokenId = T.TokenId
WHERE L.LanguageName = 'Spanish'
    AND T.TokenName = 'Man' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T17:25:25.893

我不认为这应该是一个问题。我在列选择过程中使用了变量（根据所选语言的数据库字段前缀），它对我有用。

试试看，如果不行，把你的变量放在大括号{}里，你应该没问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T17:29:23.700

你可以（毕竟它只是一个字符串），但你需要警惕注入 - 确保你在替换之前过滤了变量（`filter_var`效果很好： http: [//php.net/manual/en/function.过滤器-var.php](http://php.net/manual/en/function.filter-var.php)）。

# php - 选择Mysql根据id获取Image url

> ID：15463513
> 
> 赞同：1
> 
> 时间：2013-03-17T16:59:30.100
> 
> 标签：php, mysql, image

我只是在创建一个 mysql 查询以从数据库中获取图像名，但我无法以正确的方式进行选择。我想根据我网站上的成员 ID 获取图像名称。我确实尝试了很多次，但我失败了很多次。如果有人可以帮助我.. 非常感谢你。

如果我做这个mysql查询：

```
$GetBannerImageSql = $database->database_query("SELECT banner FROM banner_images WHERE banner_id='".$owner->user_info['user_id']."'");

$smarty->assign('bannerexists', $bannerexists);
$smarty->assign('GetBannerImage', $GetBannerImage); 
```

我得到：

```
resource(200) of type (mysql result) 
```

如果我尝试这个查询：

```
$GetBannerImageSql = $database->database_query("SELECT banner FROM banner_images WHERE banner_id='".$owner->user_info['user_id']."'");
$GetBannerImage = $database->database_fetch_assoc($GetBannerImageSql);
var_dump($GetBannerImage);

$smarty->assign('bannerexists', $bannerexists);
$smarty->assign('GetBannerImage', $GetBannerImage); 
```

然后我明白了：

```
array(1) { ["banner"]=> string(19) "banner-animated.gif" } 
```

第二个很好，但它只有图像名，但我没有看到 id。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T17:04:11.770

回声这个...->

```
 $GetBannerImage['banner'] 
```

它将返回...“banner-animated.gif”

然后根据需要在模板中使用它。

谢谢！

@leo。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T17:04:29.293

```
CREATE TABLE IF NOT EXISTS `PicturePath` (
  `ID` int(255) NOT NULL AUTO_INCREMENT,
  `Path` varchar(255) NOT NULL,
  PRIMARY KEY (`ID`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=0;

    --
INSERT INTO `PicturePath` (`ID`, `Path`) VALUES
(1, 'img/picture.png');
//End DB
// Start script

    $PictureID = $_GET['ID']; // example, user is navigating to http://www.mysite.com/Picture.php?ID=1

    $Get_Picture = $Conn->prepare("SELECT PicturePath FROM pictures WHERE ID=?");
    $Get_Picture->bind_param('i', $PictureID);
    $Get_Picture->execute();
    $Get_Picture->bind_result($Path);
    $Get_Picture->close();
    echo "<img src='$Path'></img>"; 
```

我给出的示例是在 MYSQLI 中，请根据您的要求进行调整

# python - 为基类的所有子类创建一个可散列的 id

> ID：15463515
> 
> 赞同：2
> 
> 时间：2013-03-17T16:59:34.500
> 
> 标签：python, oop, inheritance

出于缓存/持久性的原因，我希望为基类的任意大的子类树（它本身永远不会创建）获取唯一的可哈希地址。这是目前的情况：

```
OBJECT_CACHE = dict()

class Base(object):
    def __new__(cls, *args, **kwargs):
        # calculate class_addr here?
        obj = OBJECT_CACHE.get(class_addr)
        if obj is None:
            obj = super(Base, cls).__new__(cls, *args, **kwargs)
            OBJECT_CACHE[class_addr] = obj
        return obj 
```

但我不确定获得这样一个 id 的最佳方法是什么。我的概念是它看起来像下面这样：

```
Base:          # no id
    F          # id = 'f'
    A:         # id = 'a'
        E      # id = 'a.e'
        B:     # id = 'a.b'
            C  # id = 'a.b.c'
            D  # id = 'a.b.d' 
```

我想过尝试一些带有属性的东西，`super()`但理想情况下，子类只包含一行，比如`my_id = 'e'`. 提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T17:21:14.013

您正在寻找的是[cls.mro()](https://stackoverflow.com/a/2010732/190597)：

```
OBJECT_CACHE = dict()
class Base(object):
    def __new__(cls, *args, **kwargs):
        class_addr = cls.name()
        obj = OBJECT_CACHE.get(class_addr)
        if obj is None:
            obj = super(Base, cls).__new__(cls, *args, **kwargs)
            OBJECT_CACHE[class_addr] = obj
        return obj
    @classmethod
    def name(cls):
        names = [k.__name__.lower() for k in cls.mro() 
                if k != Base and issubclass(k, Base)]
        return '.'.join(names[::-1])

class F(Base): pass
class A(Base): pass
class E(A): pass
class B(A): pass
class C(B): pass
f = F()
a = A()
e = E()
b = B()
c = C()
print(OBJECT_CACHE.keys()) 
```

产量

```
['a', 'a.e', 'a.b.c', 'a.b', 'f'] 
```

# python - 在单元测试的上下文中，python 关键字“is”是否与函数 id() 相同？

> ID：15463516
> 
> 赞同：1
> 
> 时间：2013-03-17T16:59:37.483
> 
> 标签：python, unit-testing, keyword

我曾尝试阅读文档，但无法得到明确的答案。

是

```
id(a) == id(b) 
```

一样

```
a is b 
```

同样是

```
import unittest
unittest.TestCase.assertNotEqual(id(a), id(b)) 
```

因此与

```
import unittest
unittest.TestCase.assertIsNot(a, b) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T17:06:27.520

**是的**

CPython 中的“id”为您提供所引用对象的内存地址。地址唯一标识同一python进程中的一个对象。

因此，意义

```
id(a) == id(b) 
```

是*“实例a和b的内存地址是否相同？”* 这相当于 *“a 和 b 是否引用同一个对象？”* ：

```
a is b 
```

从“id”的文档字符串：

> id（对象）-> 整数
> 
> 返回对象的标识。这保证在同时存在的对象中是唯一的。（提示：这是对象的内存地址。）

# ios - 如何获取组，SVGElement 属于哪个组？

> ID：15463517
> 
> 赞同：0
> 
> 时间：2013-03-17T16:59:38.760
> 
> 标签：ios, objective-c, svg, calayer, svgkit

现在我这样做：

```
NodeList* elementsUsingTagG = [third_floor.DOMDocument getElementsByTagName:@"g"];
auds = [elementsUsingTagG.internalArray objectAtIndex:1];
SVGElement *elem = (SVGElement*)[third_floor.DOMDocument getElementById:hitLayer.name];
if ([auds.childNodes.internalArray containsObject:elem])
{
    [self deselectTappedLayer];
    lastTappedLayer = hitLayer;

    if (lastTappedLayer != nil)
    {
        lastTappedLayer.opacity = 1.0f;
        NSLog(@"Clicked on auditory %@, highlight it!", hitLayer.name);
    }
} 
```

我可以获得 SVGElement/CALayer/Node 的一些属性，它标识了这个元素所属的组吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T19:19:56.697

我猜是这样的。我还没有测试代码，但我希望它可以帮助你。

迭代版本：

```
- (Element *)findFirstParentElementFromNode:(Node *)node
                                withTagName:(NSString *)tagName {
    for (node = node.parentNode; node != nil; node = node.parentNode) {
        if (![node isKindOfClass:[Element class]]) {
            continue;
        }

        Element *element = (Element *)node;
        if([element.tagName isEqualToString:tagName]) {
            return element;
        }
    }

    return nil;
} 
```

递归版本：

```
- (Element *)findFirstParentElementFromNode:(Node *)node
                                withTagName:(NSString *)tagName {
    if (node.parentNode == nil) {
        return nil;
    }

    if ([node.parentNode isKindOfClass:[Element class]]) {
        Element *element = (Element *)node.parentNode;
        if([element.tagName isEqualToString:tagName]) {
            return element;
        }
    }

    return [self findFirstParentElementFrom:node.parentNode
                                withTagName:tagName];
} 
```

并在您的情况下使用其中一个：

```
Element *groupElement = [self findFirstParentElementFromNode:elem
                                                 withTagName:@"g"]; 
```

# logic - 证明约小于

> ID：15463523
> 
> 赞同：1
> 
> 时间：2013-03-17T17:00:01.523
> 
> 标签：logic, coq

我试图`less_than`在 Coq 中证明一些定理。我正在使用这个归纳定义：

```
Inductive less_than : nat->nat->Prop :=
   | lt1 : forall a, less_than O (S a)
   | lt2 : forall a b, less_than a b -> less_than a (S b)
   | lt3 : forall a b, less_than a b -> less_than (S a) (S b). 
```

我总是最终需要显示 lt3 的倒数，

```
Lemma inv_lt3, forall a b, less_than (S a) (S b) -> less_than a b.
Proof.
   ??? 
```

我被困住了，如果有人对如何进行有一些提示，我将不胜感激。

（我的归纳定义有问题`less_than`吗？）

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T02:15:57.647

首先，您的定义`less_than`有点不幸，因为第二个构造函数是多余的。您应该考虑切换到更简单的：

```
Inductive less_than : nat -> nat -> Prop :=
| ltO : forall a, less_than O (S a)
| ltS : forall a b, less_than a b -> less_than (S a) (S b)
. 
```

然后反转将匹配 coq 的反转，使您的证明变得微不足道：

```
Lemma inv_ltS: forall a b, less_than (S a) (S b) -> less_than a b.
Proof. now inversion 1\. Qed. 
```

第二个子句是多余的，因为对于每对`(a, b)`st。你想要一个证明`less_than a b`，你可以随时申请`lt3` `a`次再申请`lt1`。您`lt2`实际上是其他两个构造函数的结果：

```
Ltac inv H := inversion H; subst; clear H; try tauto.

(* there is probably an easier way to do that? *)
Lemma lt2 : forall a b, less_than a b -> less_than a (S b).
Proof.
  intros a b. revert a. induction b; intros.
  inv H.
  inv H.
  apply ltO.
  apply ltS. now apply IHb.
Qed. 
```

* * *

现在，如果您真的希望保留您的特定定义，您可以尝试以下证明：

```
Lemma inv_lt: forall a b, less_than (S a) (S b) -> less_than a b.
Proof.
  induction b; intros.
  inv H. inv H2.
  inv H. apply lt2\. now apply IHb.
Qed. 
```

# ios - 更新视图问题

> ID：15463525
> 
> 赞同：1
> 
> 时间：2013-03-17T17:00:04.500
> 
> 标签：ios, nsnotificationcenter

我认为我在应用程序开始时加载 ViewControllers 时遇到问题。我有两个由 TabBarController 控制的 ViewController。在 ViewA 上，我有一个按钮，当单击该按钮时，它会使用通知调用 ViewB 中的方法来更新 ViewB 上的标签。但是标签不会改变，直到我点击 ViewB 至少一次显示在屏幕上。我想知道当我单击按钮时是否有办法更新标签，而不必事先单击 ViewB。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T19:33:57.233

一方面，在实际加载视图之前，IBOutlet 属性设置为 nil。因此，如果您尝试在实际加载视图之前设置 IBOutlet 标签的文本，您只会向 nil 发送消息。

在初始化 ViewControllerB 以从 nib 加载视图后，您可以尝试在 ViewControllerB 上调用 loadView，尽管 Apple 文档说您不应该直接调用此方法。您也可以在 ViewControllerB 中创建一个属性，在其中设置更新的标签属性，并使用此属性在 viewControllerB 的 viewWillAppear 中设置 IBOutlet。

我会推荐一些不同的东西；保存您希望将 viewB 中的标签设置在 ViewControllerb 可访问的位置，然后在 ViewControllerB 的 viewWillAppear 中设置标签。例如，您可以将其保存在 NSUserDefaults 中：

```
NSString *viewBLabelText = @"ViewB Label Text";
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setObject:viewBLabelText forKey:@"ViewBLabelText"];
[defaults synchronize]; 
```

然后在 ViewControllerB 的 viewWillAppear 中：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
self.labelProperty.text = [defaults objectForKey:@"ViewBLabelText"]; 
```

# apache - .htaccess 强制整个站点 https 除了某些路径

> ID：15463555
> 
> 赞同：0
> 
> 时间：2013-03-17T17:03:09.740
> 
> 标签：apache, .htaccess, https, url-rewriting

我已经设法通过 .htaccess 使用以下规则在 https 中切换我的所有网站：

```
RewriteCond %{HTTPS} off [NC]
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301,QSA]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ /app.php [QSA,L] 
```

现在我遇到了一个问题，因为一些 3rd 方服务使用 POST url，例如：

```
http://sub.mydomain.com/agreg/sms/service 
```

被拒绝，因为它们被重定向并且现在 GET。

我想在每个带有`^/agreg/`方案的 url 上禁用这个“强制 https”的东西。我试过了

```
RewriteCond %{HTTPS} off [NC]
RewriteCond %{REQUEST_URI} !^/agreg
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301,QSA] 
```

但现在有重定向到[http://sub.mydomain.com/app.php](http://sub.mydomain.com/app.php)

我在这里错过了什么？

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T22:39:30.887

问题：

> 我想用 ^/agreg/ 方案在每个 url 上禁用这个“强制 https”的东西。我试过了

```
RewriteCond %{HTTPS} off [NC]
RewriteCond %{REQUEST_URI} !^/agreg
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301,QSA] 
```

> **但现在有重定向到** `http://sub.mydomain.com/app.php`

* * *

嗯，根据规则，这是一个有效的结果。

有第二条规则将所有内容重定向到`app.php`. 这个：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ /app.php [QSA,L] 
```

例如，虽然传入的 URL`http://sub.mydomain.com/agreg/sms/serviceSo`被排除在第一条规则之外，但它在第二条规则中被重写。

解决方案：

假设预期的行为是从 BOTH 规则中排除包含字符串的任何 URL `agreg`，它应该是这样的：

```
RewriteCond %{HTTPS} off [NC]
RewriteCond %{REQUEST_URI} !/agreg        [NC]
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301,QSA]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !/agreg        [NC]
RewriteRule ^(.*)$ /app.php [QSA,L] 
```

重写条件仅对下一条规则有效。有必要在最后一个规则块中添加相同的 NOT 条件。

# javascript - js 类 - 第一个 ajax 对象，无法得到结果

> ID：15463560
> 
> 赞同：1
> 
> 时间：2013-03-17T17:03:48.283
> 
> 标签：javascript, ajax, class

这是我在 js 中的第一堂课，我需要帮助才能获得正确的结果

```
function ajaxObject (url, data, type) {
this.url = url;
this.data = 'data='+JSON.stringify(data) || null;
this.type = type ? type : 'json';
this.result = null;
var self = this;

this.create = function () {
    //se il browser ? firefox
    if (window.XMLHttpRequest) {
        //istanzio un nuovo oggetto XMLHttpRequest
        this.oHttp = new XMLHttpRequest();
        if (this.oHttp.overrideMimeType) {
            this.oHttp.overrideMimeType('text/xml');
        }
    //se il browser ? IE    
    } else if (window.ActiveXObject) {
        try {
            this.oHttp = new ActiveXObject("Msxml2.XMLHTTP");
        } catch (e) {
            try {
                this.oHttp = new ActiveXObject("Microsoft.XMLHTTP");
            } catch (e) {
            }
        }
    }
};

this.process = function () {
    if (this.oHttp) {
        this.oHttp.open("POST", this.url, true);
        this.oHttp.onreadystatechange = this.manage;

        if (this.oHttp.overrideMimeType) {
            this.oHttp.overrideMimeType("application/json");
        }
        this.oHttp.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
        this.oHttp.setRequestHeader("Content-length", this.data.length);
        this.oHttp.send(this.data);
    }
};

this.manage = function () {
    // alert(self.oHttp.readyState + ' - ' + self.oHttp.responseText);
    if (this.readyState === 4 && this.status === 200) {
        // here this.responseText is correctly populated
        self.result = this.responseText;
        } else {
        self.requestFailed('message', this);
        return;
    }
};

this.getResult = function () {
    switch (this.type) {
        case 'text':
            return this.result;
            break;
        case 'json':
            return $.parseJSON(this.result);
            break;
    }
};

this.requestFailed = function (id, request) {
    if (document.getElementById) {
        sys.clearContent(id);
        document.getElementById(id).innerHTML = 'The XMLHttpRequest failed, STATUS: ' + request.status;
    }
}; 
```

}

我尝试以这种方式获得结果：

```
var ao = new ajaxObject('output.php', {mutator: "orders", get: "orders"});
ao.create();
ao.process();
var r = ao.getResult();
alert(r); 
```

但我无法得到我期望的结果..所有服务器端都可以正常工作，但我的结果变量总是“null”..我想我想念一些东西，如果有人可以帮助我:)

# installation - PANDAS installation issues

> ID：15463564
> 
> 赞同：0
> 
> 时间：2013-03-17T17:03:57.957
> 
> 标签：installation, pandas

Please bear with me as I'm a beginner python user and I have seen the other posts on this topic, but am still encountering the same problems.

I'm trying to install pandas on my mac (currently running python 2.7.3) but keep getting this error message both in the notebook and IDLE:

```
 Traceback (most recent call last):
   File "<pyshell#0>", line 1, in <module>
   import pandas
   ImportError: No module named pandas 
```

I installed pandas and the relevant dependencies using MacPorts. I've seen that having two versions of python could be causing this, but after checking, I'm only running one version.

Could anyone help me out on this? Its a bit frustrating...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T01:44:16.273

我感觉熊猫不在正确的目录/文件夹中。你机器上的 pandas 文件夹在哪里？在我的 Windows 机器上，它位于 Python27\Lib\site-packages 文件夹中。Mac 上可能有类似的文件夹。将 pandas 文件夹复制并拖到那里，然后重新启动 Python 看看会发生什么。

# java - 我可以通过检查主 Activity 的 onPause() 中的 isFinish() 来确定 Android 应用程序已完成运行吗？

> ID：15463566
> 
> 赞同：5
> 
> 时间：2013-03-17T17:04:22.473
> 
> 标签：java, android, android-activity

我的应用程序运行完毕后，我必须清除一些应用程序数据。据我所知，`onDestroy()`可能不会被调用。所以我决定检查根活动是否进入，看看这个活动和我的应用程序的其他活动是否正在完成`isFinishing() == true`。`onPause()`但我怀疑这项活动是否：

```
 <activity
        android:name="com.test.AuthorizationActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

将是一个根活动？一般来说，这是正确的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T22:13:13.777

我认为您需要重新考虑您的设计，因为似乎`isFinishing`只有在`finish`活动上被调用时才是正确的，并且不考虑活动因内存不足而被破坏的情况。

[从文档](http://developer.android.com/reference/android/app/Activity.html#onDestroy%28%29)：

> 这可能是因为 Activity 正在完成（有人在其上调用了 finish()，或者因为系统正在临时销毁该 Activity 实例以节省空间。**您可以使用 isFinishing() 方法区分这两种情况。**

对于您的建议，您可以将应用程序的状态数据存储在`static`变量中，当您的应用程序进程结束时（当最后一个活动/服务完成时），这些变量将被清除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T21:53:16.067

你在哪里读到`onDestroy`可能不叫的？`onDestroy`根据[Android 文档](http://developer.android.com/reference/android/app/Activity.html#onDestroy%28%29 "安卓文档")，在应用程序完成时调用。

您是否有可能将进入背景与被摧毁混为一谈？

应用程序有不同的生命周期：整个生命周期、可见生命周期和前台生命周期。为这些状态更改调用不同的回调，如此[处](http://developer.android.com/guide/components/activities.html#Lifecycle)所述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-30T06:23:03.357

onDestroy() 在活动被销毁时被调用。因此，如果我们想检查天气应用程序是否关闭，那么我们必须实现可以通知我们应用程序状态的通用服务。

# sql - 用柠檬“部分解析”

> ID：15463571
> 
> 赞同：2
> 
> 时间：2013-03-17T17:04:42.053
> 
> 标签：sql, parsing, lemon

我有一个使用[柠檬解析器生成器](http://www.hwaci.com/sw/lemon/lemon.html)构建的[SQL 语法](http://www.sqlite.org/lang.html)。解析命令的正常入口点是语句（如），因此该语句是我在语法中的非终结符。到目前为止一切正常。`SELECT ...``%start`

现在我想做一个“部分解析”，例如只解析一个表达式或一个`WHERE`子句。基本上这意味着我希望`%start`非终端在运行时改变。我在文档中找不到任何内容。这可能在柠檬中吗？

如果不是，我正在考虑做一些事情，比如让解析在我的自定义起点失败。这感觉就像一个黑客，有没有更清洁的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T20:54:47.997

一个标准的 LALR 解析器生成器（如 LEMON）不会（实际上不能）让你做你想做的事。

为了使这个工作，您必须创建一个愿意接受您感兴趣的任何非终结符的开始状态（例如，SELECT_clause、WHERE_clause）。你可以通过有效地改变语法来做到这一点：

```
 GOAL = TOP ;
   RULEn = ... ;
   SG = .... ; 
```

其中 SG 是次要目标（例如，您的 WHERE 子句）

```
 GOAL = TOP | SG ;
   RULEn = ... ;
   SG = ... ; 
```

这样做的坏消息是通常违反了 LALR 状态生成可接受的条件（例如，前瞻集不再区分归约），现在您的解析器生成器不再工作。

使用 GLR 解析器生成器更容易做到这一点，它可以处理任何上下文无关的语法。（事实上​​，对于我们的 DMS 软件再工程工具包的非终结符定义的模式，我们确实这样做了。事实上，我们有点过分，将*每个*非终结符都放在目标生产中。虽然这听起来很疯狂，但它让我们能够识别语言中的*任何*格式良好的（非终结）短语）。

# sql - Duplicating, Identity, relationship

> ID：15463573
> 
> 赞同：0
> 
> 时间：2013-03-17T17:04:51.767
> 
> 标签：sql

high guyz i have this simple problem but for a newbie like me its really hard this is my problem.

I need to create two tables with relation ship but it says that only one identity can use for each table or is there other way that i can copy all the data from other table with foreign key without typing the same data? your help will be appriciated thank you! :)

```
create table Students
(Student_no int Unique identity(4100490,1)
,Last_name nvarchar(30)
,First_name nvarchar(40)
,Birthday Date)

create table Schedule
(Schedule_ID int primary key identity(650500,1)
,Section nvarchar(10) Unique
,Subject_code nvarchar(10) foreign key references Subjects(Subject_code)
,Days nvarchar(10)
,Time time
,Room nvarchar(10))

create table Enlistment
(Enlistment_ID nvarchar(10)primary key 
,Student_No int foreign key references students(Student_no) identity(4100490,1)
,Schedule_ID int foreign key references Schedule(Schedule_ID) identity(650500,1)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T17:30:24.800

尝试这个：

```
create table Students
(Student_no integer PRIMARY KEY
,Last_name nvarchar(30)
,First_name nvarchar(40)
,Birthday Date)

create table Schedule
(Schedule_ID integer primary key
,Section nvarchar(10) Unique
,Subject_code nvarchar(10) foreign key references Subjects(Subject_code)
,Days nvarchar(10)
,Time time
,Room nvarchar(10))

create table Enlistment
(Enlistment_ID integer primary key -- this was nvarchar in your code.
    -- Use NVARCHAR in primary keys only if you absolutely need it.
    -- If you are storing only numbers in it, you won't need NVARCHAR.
    -- use INTEGER instead.
,Student_No int foreign key references students(Student_no) identity(4100490,1)
,Schedule_ID int foreign key references Schedule(Schedule_ID) identity(650500,1)) 
```

# maven - maven 2.2.1 release prepare custom tag format

> ID：15463577
> 
> 赞同：0
> 
> 时间：2013-03-17T17:05:21.620
> 
> 标签：maven, release

Configuration Management team at my workplace mandates 4 digit version numbers for artefacts - say, 1.2.3.4 - for released artefact and 1.2.3.5-SNAPSHOT for development pom

In addition to this, our version control system (clearcase) has pre-label trigger which enforces a certain naming convention for label/tag.

So, if the pom version is 1.2.3.4-SNAPSHOT and artifactId is, for instance, shopcart then, as per the tag naming requirement, tag name should be:

XXX_1.2.3_SHOPCART_DROP4_SRC

where XXX is project code - constant string value.

As you see, in order to achieve this format, I need to make following customisations to tag name format:

*   artifactId - convert to uppercase
*   first 3 digits of 4 digit version number to be extracted
*   last digit of 4 digit version number to be extracted
*   concatenate everything as per the format.

I thought I would use gmaven plugin to get this done and populate a custom property to be used in tag or tagNameFormat configuration property of maven release plugin (v2.3.2) - but that doesn't work at all.

maven release plugin supports only 3 properties (artifactId, version, groupId) and doesn't support any other property.

gmaven plugin works as expected and sets a final user property in the tag name format I need - I verified it using the ant run maven plugin to echo the property.

Problem is with maven release plugin - it doesn't understand any user property...

Can anyone help how can I achieve this?

**EDIT:**

Interactive run is not a possibility - need to configure this to run for about 15 projects on jenkins ...

Many thanks, Tapasvi

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:03:48.467

您应该仔细阅读 maven-release-plugin 的文档，因为有一个可用于此类目的的参数。tagNameFormat[可](http://maven.apache.org/maven-release/maven-release-plugin/prepare-mojo.html#tagNameFormat)用于更改将要创建的标签的格式（哦，抱歉。您已经阅读过）。[该版本可以通过buildhelper-maven-plugin](http://mojo.codehaus.org/build-helper-maven-plugin/parse-version-mojo.html)提取到属性中。此外，buildhelper-maven-plugin 可用于制作工件 id 的大写：

通过对值应用正则表达式替换来设置属性

regex-property 目标可用于在应用正则表达式替换后将属性设置为一个值。例如，执行以下插件配置来设置 clearcase.artifact 属性。

```
<project>
  ...
  <build>
    <plugins>
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>build-helper-maven-plugin</artifactId>
        <version>1.7</version>
        <executions>
          <execution>
            <id>regex-property</id>
            <goals>
              <goal>regex-property</goal>
            </goals>
            <configuration>
              <name>clearcase.artifactid</name>
              <value>$\{project.artifactId}</value>
              <regex>(.*)</regex>
              <replacement>???</replacement>
              <failIfNoMatch>false</failIfNoMatch>
            </configuration>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build>
  ...
</project> 
```

但是你需要小心设置属性，因为 release:perform fork 一个 Maven 进程。您可能需要使用 -Darguments 选项来设置适当的参数。

# netbeans - Netbeans 7.3 JSP parser bug

> ID：15463578
> 
> 赞同：0
> 
> 时间：2013-03-17T17:05:32.600
> 
> 标签：netbeans

I just upgraded my netbeans to 7.3 and I found a strange bug. In the project tree there is a JSP parsing error but no error message in the editor window. Is anybody knows how can I get the JSP parser output. (e.g. logging)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:02:07.807

我在缓存目录中找到了解析器的输出：cache/.../my_file.jsp.err

# php - PHP AJAX 后返回空数据

> ID：15463583
> 
> 赞同：2
> 
> 时间：2013-03-17T17:06:10.843
> 
> 标签：php, javascript, jquery, ajax

使用以下脚本后，我没有收到任何数据警报

```
$(document).ready(function() {
    $('.autosuggest').keyup(function() {
        var search_term = $(this) .attr('value');
        $.post('search.php', {search_term:search_term}, function(data) {
            alert(data);
        });

    });
}); 
```

并使用以下 PHP 代码

```
<?php
include('system/includes/db_connect.php');
if (isset($_POST['search_term']) == true && empty($_POST['search_term']) == false) {

    $search_term = mysql_real_escape_string($_POST['search_term']);
    $query = mysql_query("SELECT username FROM promoties WHERE username LIKE '$search_term%'");
    while (($row = mysql_fetch_assoc($query)) !== false) {
        echo '<li>', $row['username'], '</li>';
    }
}
?> 
```

如果我将“测试”放在警报中，它就可以正常工作，但如果我提醒数据，它会给出一个空的警报框。

我还自己测试了PHP代码，它运行良好..

怎么了？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T17:13:16.790

如果你`.autosugest`是一个输入（我认为它是）......你需要通过

替换这个

```
var search_term = $(this) .attr('value'); 
```

经过

```
var search_term = $(this) .val(); 
```

`attr()`这里不需要

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T17:20:16.773

```
Use simple falsy value check.

if(isset($_POST['search_term']) && !empty($_POST['search_term'])) {
         // code here
} 
```

或者在 for 循环之前写一些回声。这将测试您的查询是否正在执行。

# php - jQuery没有传入函数

> ID：15463584
> 
> 赞同：3
> 
> 时间：2013-03-17T17:06:13.300
> 
> 标签：php, javascript, jquery, html, plupload

我正在尝试实现一个 jQuery 函数来在网站上上传文件。该脚本使用“plupload”。

不幸的是，在后台运行了另一个 jQuery 函数。

```
<script type="text/javascript">
    jQuery(function ($) {
        $.supersized({
            // Functionality
            slide_interval: ss_interval, // Length between transitions
            transition: 1, // 0-None, 1-Fade, 2-Slide Top, 3-Slide Right, 4-Slide Bottom, 5-Slide Left, 6-Carousel Right, 7-Carousel Left or ss_transitionType
            transition_speed: ss_transitionSpeed, // Speed of transition
            // Slides   
            slides: [ // Slideshow Images
            {
                image: 'images/gallery/1.jpg',
                title: 'Upload and share your music with other...',
                title2: 'Music'
            }, {
                image: 'images/gallery/2.jpg',
                title: 'Share your work online and access your documents from anywhere. ',
                title2: 'Documents'
            }, {
                image: 'images/gallery/3.jpg',
                title: 'Show off your favorite photos and videos to the world.',
                title2: 'Photography'
            }, {
                image: 'images/gallery/4.jpg',
                title: 'Let the world watch your videos, or share them privately.',
                title2: 'Video'
            }, {
                image: 'images/gallery/8.jpg',
                title: 'Free file storage service. Share files with your friends.',
                title2: 'Upload and Share'
            }]
        });
        $("#uploader").plupload({
            // General settings
            runtimes: 'flash,html5,browserplus,silverlight,gears,html4',
            url: 'upload.php',
            max_file_size: '1000mb',
            max_file_count: 20, // user can add no more then 20 files at a time
            chunk_size: '1mb',
            unique_names: true,
            multiple_queues: true,
            // Resize images on clientside if we can
            resize: {
                width: 320,
                height: 240,
                quality: 90
            },
            // Rename files by clicking on their titles
            rename: true,
            // Sort files
            sortable: true,
            // Specify what files to browse for
            filters: [{
                title: "Image files",
                extensions: "jpg,gif,png"
            }, {
                title: "Zip files",
                extensions: "zip,avi"
            }],
            // Flash settings
            flash_swf_url: 'js/upload/plupload.flash.swf',
            // Silverlight settings
            silverlight_xap_url: 'js/upload/plupload.silverlight.xap'
        });
        // Client side form validation
        $('form').submit(function (e) {
            var uploader = $('#uploader').plupload('getUploader');
            // Files in queue upload them first
            if (uploader.files.length > 0) {
                // When all files are uploaded submit form
                uploader.bind('StateChanged', function () {
                    if (uploader.files.length === (uploader.total.uploaded + uploader.total.failed)) {
                        $('form')[0].submit();
                    }
                });
                uploader.start();
            } else alert('You must at least upload one file.');
            return false;
        });
    });
</script> 
```

问题是：没有任何效果，页面什么也没有返回。但如果我删除这部分（见下文）上传的功能有效：

```
$.supersized({
    // ...
}); 
```

请问有人可以帮我吗？我在控制台中收到以下错误：

> Uncaught TypeError: Object [object Object] has no method 'pajinate' jScript.js:134
> 
> 未捕获的类型错误：对象函数 (a,b){return new d.fn.init(a,b,g)} 没有方法“超大” jquery.min.js:16

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T17:24:40.020

viewing the plugins ..there are two main files related to this plugin `js/supersized.3.2.6.min.js` and `theme/supersized.shutter.min.js`... looks like you are missing one of these files . load it in the `<head>` after jquery.js and it should work..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T18:01:18.483

I have discover where my problem are, thanks to all of you !

The problem was that I had 2 version of jquery loader. I have delete the older version and it works !

Thanks all

# asp.net-mvc - ASP MVC - 随机会话超时

> ID：15463587
> 
> 赞同：0
> 
> 时间：2013-03-17T17:06:15.453
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我有这个：

```
<membership defaultProvider="DefaultMembershipProvider" userIsOnlineTimeWindow="15"> 
```

还有这个：

```
<sessionState mode="InProc" customProvider="DefaultSessionProvider" cookieless="UseCookies" regenerateExpiredSessionId="true" timeout="15"> 
```

我的会话随机超时，我可以一页一页地查看然后退出，这可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T17:08:22.863

您应该区分 ASP.NET Session：

```
<sessionState mode="InProc" customProvider="DefaultSessionProvider" cookieless="UseCookies" regenerateExpiredSessionId="true" timeout="15"> 
```

和表单认证：

```
<authentication mode="Forms">
    <forms loginUrl="~/account/login" timeout="2800" />
</authentication> 
```

默认情况下，ASP.NET 会话存储在 Web 服务器的内存中。这样做的问题是，您的应用程序可能随时被 Web 服务器回收或关闭，并且会话将丢失。例如，如果您的服务器达到某些 CPU 或内存阈值并且几乎无法控制，则可能会发生这种情况。如果您想以可靠的方式将某些内容存储到 ASP.NET 会话中，则应确保您使用的是进程外状态（例如`StateServer`或`SqlServer`）。这是一篇关于[`various session state modes`](http://msdn.microsoft.com/en-us/library/h6bb9cz9%28v=vs.80%29.aspx).

另一方面，表单身份验证用于使用 cookie 跟踪经过身份验证的用户。它们不会保留在服务器上，也不会受到与 ASP.NET 会话相同的限制。如果您决定在应用程序中使用 ASP.NET 会话，则应确保其超时与表单身份验证 cookie 的超时相同，并且您使用的是进程外持久状态。

# jquery - 将淘汰后可观察数组作为对象属性 asp.net mvc

> ID：15463589
> 
> 赞同：0
> 
> 时间：2013-03-17T17:06:25.780
> 
> 标签：jquery, asp.net, ajax, asp.net-mvc, knockout.js

我正在尝试将 ko.observable 数组作为对象的一部分发布，所有数据都可以到达服务器，但数组不为空但计数为零。

**这是在客户端**

```
 function submitAsync() {
    var viewModel = constructModel();

    setTimeout(function () {
        $.ajax({
            url: '/Article/Index',
            type: 'POST',
            data: JSON.stringify({ viewModel: viewModel }),
            contentType: 'application/json; charset=utf-8',
        })
    },2000);
    console.log(viewModel);
}

function constructModel(){
    var articleViewModel = {};
    articleViewModel.Authors = ko.toJSON(appViewModel.authors);

    articleViewModel.ArticleData = {};
    articleViewModel.ArticleData.Title = $("#ArticleData_Title").text();
    articleViewModel.ArticleData.CorespondingAuthor = $("#ArticleData_CorespondingAuthor").text();
    articleViewModel.ArticleData.Keywords = $("#ArticleData_Keywords").text();

    articleViewModel.ArticleContent = {};
    articleViewModel.ArticleContent.Abstract = $("#ArticleContent_Abstract").text();
    articleViewModel.ArticleContent.FullText = ArticleContent();

    return articleViewModel;
} 
```

**我的视图模型**

```
public class ArticleViewModel
{
    public ArticleData ArticleData { get; set; }
    public ArticleContent ArticleContent { get; set; }
    public ICollection<Author> Authors { get; set; }
} 
```

**我的控制器操作**viewModel.Authors 不为空，但计数为 0

```
[HttpPost]
        public ActionResult Index(ArticleViewModel viewModel)
        {
            if (ModelState.IsValid)
            {
                mergeViewModelToCurrentArticle(viewModel);
                _documentPath = GenerateDocument(_currentArticle);
                return RedirectToAction("Success");
            }
            return View();
        } 
```

**javascript输出的ko数组**

```
Authors: "[{"id":1,"firstName":"User first name","lastName":"user last name","email":"user@gmail.com","phone":"xxxxx","address":"Dunarii Nr.3","fullName":"user full name"}]" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T17:38:49.940

只需更换

```
articleViewModel.Authors = ko.toJSON(appViewModel.authors); 
```

和：

```
articleViewModel.Authors = appViewModel.authors; 
```

您对 Authors 数组进行双重 JSON 编码，这是不必要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T02:02:52.480

感谢达林，我设法弄清楚显然解决方案是更换

```
articleViewModel.Authors = ko.toJSON(appViewModel.authors); 
```

和

```
articleViewModel.Authors = $.parseJSON(ko.toJSON(appViewModel.authors)) 
```

# c# - Error Using the generic type 'System.Collections.Generic.List' requires '1' type arguments

> ID：15463591
> 
> 赞同：0
> 
> 时间：2013-03-17T17:06:30.980
> 
> 标签：c#

I hvae created a code in C# but I had this error :

> Error 1 Using the generic type 'System.Collections.Generic.List' requires '1' type arguments C:\Users\Abdelhakim\Desktop\Wind Applic C#\Exercice4\Exercice4\Form1.cs 9 34 Exercice4

and this is the code I wrote :

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Collections.Generic.List;
namespace Exercice4
{
    public partial class Form1 : Form
    {
        List<string> ls = new List<string>();
        string p;

        public Form1()
        {

            InitializeComponent();
        }
        private void label2_Click(object sender, EventArgs e)
        {
        }
        private void r1_CheckedChanged(object sender, EventArgs e)
        {
            p = "+";
            l3.Text = (Convert.ToDouble(t1.Text) + Convert.ToDouble(t2.Text)).ToString();
        }
        private void r2_CheckedChanged(object sender, EventArgs e)
        {
            p = "-";
            l3.Text = (Convert.ToDouble(t1.Text) - Convert.ToDouble(t2.Text)).ToString();
        }
        private void r3_CheckedChanged(object sender, EventArgs e)
        {
            p = "*";
            l3.Text = (Convert.ToDouble(t1.Text) * Convert.ToDouble(t2.Text)).ToString();
        }
        private void r4_CheckedChanged(object sender, EventArgs e)
        {
            p = "/";
            if (Convert.ToDouble(t2.Text) == 0)
                l3.Text = "Erreur";
            else
                l3.Text = (Convert.ToDouble(t1.Text) / Convert.ToDouble(t2.Text)).ToString();
        }
        private void button1_Click(object sender, EventArgs e)
        {
            int i;
            for (i = 0; i < ls.Count; i++)
                ls.Items.Add(ls[i]);
        }
        private void button2_Click(object sender, EventArgs e)
        {
            ls.Add(t1.Text + p + t2.Text + " =" + l3.Text);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T17:09:58.447

该[`using`指令](http://msdn.microsoft.com/en-us/library/sf0df423%28v=vs.110%29.aspx)只能与命名空间一起使用，而不是单个类型。

更改此行

```
using System.Collections.Generic.List; 
```

至

```
using System.Collections.Generic; 
```

* * *

要解决您的下一个问题，您需要更改此行：

```
ls.Items.Add(ls[i]); 
```

至

```
ls.Add(ls[i]); 
```

这应该允许您的代码编译，但是，这将导致无限循环，因为您不断地将相同的项目永远添加回您的列表中。您需要重新考虑您要在该`button1_Click`方法中执行的操作。

# process - How to find out application name by PID (process id)

> ID：15463593
> 
> 赞同：9
> 
> 时间：2013-03-17T17:06:31.277
> 
> 标签：process, pid, visualsvn-server, netstat

I'm trying to install VisualSVN server and have message "Specified TCP port is occupied by another service". How I can find what service or app is using the 443 port? "netstat -aon" shows me only

```
UDP    0.0.0.0:443            *:*        4252 
```

The OS is Windows. And yes, I had VisualSvn Server installed on this computer before. Then I removed it (I do not see any SVN service running) and would like to reinstall.

Also I'd like to know what Authentication mode should I choose. Considering I want to have repository on external drive.

Thank you in advance, Alex.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T11:27:02.293

*   `netstat -anbv`在较旧的 Windows 版本上使用。[您可以在http://technet.microsoft.com/library/ff961504](http://technet.microsoft.com/library/ff961504)找到`netstat`工具参考。

![网络统计输出](../Images/f715d77bd750b605ef14d2112f786cf3.png)

*   在最新的 Windows 版本上，[`Get-NetTCPConnection`](https://technet.microsoft.com/en-us/library/hh826153.aspx)使用 PowerShell 5 运行 PowerShell cmdlet。

    例如，运行此命令以获取正在侦听计算机上端口 443 的进程的名称：

    ```
    PS C:\> Get-Process -Id (Get-NetTCPConnection -LocalPort 443).OwningProcess

    Handles  NPM(K)    PM(K)      WS(K)     CPU(s)     Id  SI ProcessName
    -------  ------    -----      -----     ------     --  -- -----------
    143      15     3448      11024              4572   0 VisualSVNServer 
    ```

# java - 静态类初始化器 - 是否存在需要同步的情况？

> ID：15463595
> 
> 赞同：2
> 
> 时间：2013-03-17T17:06:42.413
> 
> 标签：java, static, synchronization, initialization

我有一种情况，我想初始化一些静态的“常量”（即初始化后不修改）数据结构。我在“静态{}”代码块中执行此操作。是否保证此代码块永远不会被执行两次？在某些特殊情况下我需要同步吗？

更新：答案部分在[Are Java static initializers thread safe？](https://stackoverflow.com/questions/878577/are-java-static-initializers-thread-safe)

问题仍然存在：如何多次执行静态初始化程序？这有关系吗？我猜它对于不同的静态“实例”运行不止一次，即。在不同的 webapp 上下文中并附加到不同的类加载器，这样它们就不会“看到”彼此。正确的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T17:15:43.697

JVM 保证所有类静态初始化块只被调用一次（当类第一次加载时）。由于它只会被调用一次，因此不需要任何同步代码，因为这与**Only Once**规则相矛盾。

在[这里](http://www.developer.com/java/other/article.php/2238491/The-Essence-of-OOP-using-Java-Static-Initializer-Blocks.htm)查看更多关于类加载和静态类初始化器的信息。

从该页面引用：

> 编译器实际上做的是在内部生成一个单独的类初始化例程，该例程将所有静态变量初始化器和所有静态初始化器代码块按照它们在类声明中出现的顺序组合在一起。当类第一次加载时，这个单一的初始化过程会自动运行一次，只有一次。 ^([  ——大卫弗拉纳根])

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T17:07:42.627

> 我想初始化一些静态的“常量”（即初始化后不修改）数据结构

将该变量设为最终变量。

像

```
public static final CONSTANT = 10; 
```

或者

您可以将该代码放在静态块中。它在类加载时执行一次。

# css - Bootstrap left/right aligned background image repeat-pattern with 100% page height

> ID：15463596
> 
> 赞同：1
> 
> 时间：2013-03-17T17:06:43.967
> 
> 标签：css, twitter-bootstrap, templating

So i'm building a bootstrap template and the problem I've encountered is trying to add a background image aligned to left side of site and a duplicate on the right side, it's like a small 40px width repeat-height type of pattern.

It is written like this and I know that is stupid but I've tried combinations of things and inside the bootstrap container, outside, etc.

```
#background-right {
height: 100%;
position: absolute;
right: 0;
top: 0;
}

.containerbackgroundright {
background-image: url("../images/subtle_stripes.png");
height: auto;
max-width: 50px;
min-width: 0;
position: relative;
right: -15%;
} 
```

ignore the stupid way I wrote that out. It is currently right after the `<body>` and before the `<container>`. What happens is the height of the repeat background only reaches about 75% of the page most times depending on how far the container stretches with the content of that page. It isn't the full 100% of the page.

If I change the `position:` to `fixed` it actually works but produces unwanted results because I don't want it fixed. It's width adjusts beautifully with bootstrap but the height doesn't extend as far as I want it, it just stops and then you have whitespace below it.

My guess is if I made an image out of the repeat pattern with like a 1600px height or something and gave a min-height/max-height this might solve but I'd prefer not to. Is there something I'm missing or can try?

So again, just want a sidebar aligned to left of page and another to right of page that can adjust fluidly so that it dissapears or hides behind the container of bootstrap (which is working) but I need it to be a full 100% height of page no matter how much the page stretches.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T17:11:57.900

你需要给

```
background-repeat:repeat-x; 
```

和

```
background-repeat:repeat-y; 
```

在 css 中创建重复模式。

# ruby-on-rails - SQLite3::ConstraintException：约束失败：在 Rails 中插入 INTO 连接模型

> ID：15463598
> 
> 赞同：1
> 
> 时间：2013-03-17T17:07:08.723
> 
> 标签：ruby-on-rails, sqlite, activerecord

在我的模型中，项目拥有并属于许多用户，因此他们有一个连接表 projects_users。当我插入线

```
@project.members += User.find params[:member_ids].split(',') 
```

进入项目控制器的创建操作，我无法保存@project。当我尝试时，我收到以下错误：

```
SQLite3::ConstraintException: constraint failed: INSERT INTO "projects_users" ("project_id", "user_id") VALUES (5, 14600) 
```

但是，就在保存之前，@project 是有效的，@project.members 返回正确的成员。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T17:29:13.037

听起来您可能对 DB 列有一个唯一约束，该约束不允许重复`project_id`和`user_id`对 in `projects_users`，但 Rails 不知道，因此验证通过，但实际保存失败。

如果是这种情况，您可以`has_many` `through`为连接表使用关系和模型并验证唯一性。我怀疑你已经在做其中的一部分了。这样的事情可能会有所帮助：

```
class Project < ActiveRecord::Base
  has_many :members
  has_many :users, through: :project_membership
end

class User < ActiveRecord::Base
  has_many :projects, through: :project_membership
end

class ProjectMembership < ActiveRecord::Base
  self.table_name = "projects_users"
  belongs_to :project
  belongs_to :user
  validates :project_id, uniqueness: { scope: :user_id }
end 
```

`projects_users`如果一切顺利，您可能想要重命名您的表格，`project_memberships`如上例所示；那么你可以放弃`self.table_name`.

# c++ - 多线程写入文件 C++

> ID：15463606
> 
> 赞同：1
> 
> 时间：2013-03-17T17:08:09.000
> 
> 标签：c++, multithreading, openmp

我有一个带有整数数据的大缓冲区（一个大整数数组），我想将它写入一个文件。

但是我正在使用 openMP，我的整个应用程序现在是多线程的。所以我想知道，在缓冲区满后，我有没有办法使用 openMP 并让多个线程写入同一个文件，从而对缓冲区进行多次只读访问？

如果使用 openMP 是不可能的，是否可以通过其他方式做到这一点？我该怎么做？

您知道有哪些图书馆可以这样做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T17:25:35.453

写入文件的多个线程将使进程比现在更慢，因为这将强制执行许多`seek`操作（考虑到默认磁性 HDD，这是最慢的操作）。

考虑仅使用一个线程将数据写入磁盘，但使用多个线程直接访问内存数组进行读取。一旦不再分配该阵列，则应在磁盘上执行访问，由于寻道时间再次导致速度大大降低。为了减少减速，您必须实施一些缓冲方案或仅使用一个线程。

根据您的读数是如何执行的以及您的算法是如何实现的，还有其他一些事情需要考虑，但我相信这些是一些一般性的思路。

# asp.net-mvc - 如何仅更新视图模型中已更改的原始（DB）对象的属性？

> ID：15463612
> 
> 赞同：0
> 
> 时间：2013-03-17T17:08:50.680
> 
> 标签：asp.net-mvc, asp.net-mvc-4, viewmodel, asp.net-mvc-viewmodel

例如，我在我的和类上有一个`DateCreated`属性。然而，在我的编辑视图中，我没有输入或任何类型的存储。当我使用 2013/03/17 编辑产品时，发回的产品始终是“0001/01/01”。除非我在编辑视图中为每个未使用的字段添加隐藏输入，否则我将永远丢失此信息。`Product``ProductDetailModel``DateCreated``DateCreateded``DateCreated``ProductDetailModel`

有什么方法可以告诉哪些属性`ProductDetailModel`实际上是签名值，或者只是默认值，因为它们不存在表单元素？

我是否必须编写自己的模型绑定器，在视图模型中维护更新字段的列表，以便我只能在保存之前将这些值分配回原始对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T18:05:28.893

[`AutoMapper`](http://automapper.org/)有一个非常好的功能，可以让你做到这一点。您的视图模型应该只包含视图使用的属性，然后只需加载产品以从您的数据存储中更新，并使用 AutoMapper 完成仅更新属于视图模型的属性的工作：

```
[HttpPost]
public ActionResult Edit(EditProductViewModel viewModel)
{
    Product productToUpdate = repo.GetProduct(viewModel.Id);
    Mapper.Map<EditProductViewModel, Product>(viewModel, productToUpdate);
    // at this stage the product domain model will have only its properties updated
    // that were present in the view model (a.k.a in the view)
    repo.Update(productToUpdate);

    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T17:10:31.703

从存储库中加载您的产品，然后覆盖视图模型中表示的字段，然后保存更改。

请注意，ViewModel 应该只包含视图所需的数据；它可能与您的数据模型有一些重叠，但不会相同。这就是为什么您使用 ViewModel 而不仅仅是传递您的数据模型的原因。

# xml - Mandatory and Optional Attributes in Schematron

> ID：15463617
> 
> 赞同：0
> 
> 时间：2013-03-17T17:09:22.660
> 
> 标签：xml, xpath, schematron

I need to specify a rule in Schematron where I say that every element `<xpto>` must have attributes `x` and `y` and all the other attributes it eventually has must be `z` or `w`.

So let's say I have the following element:

```
<xpto a="abc"> 
```

This is a wrong element because, not only does it does it not have the attributes `x` and `y`, it also has attribute `a` which is not one of the valid ones `(x,y,z,w)`.

A valid element would be:

```
<xpto x="abc" y="cba"> 
```

or

```
<xpto x="abc" y="cba" w="dsa"> 
```

I know how to specify mandatory attributes with the @attribute command, I just don't know how to specify that all attributes' name must be in some set, like `('x','y','z','w')` in the example given...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T21:33:21.013

```
<sch:pattern>
   <sch:rule context="xpto">
      <sch:assert test="every $attr in @* satisfies $attr/name()=('x','y','z','w')">Error message</sch:assert>
   </sch:rule>
</sch:pattern> 
```

# css - 关于 base 64 编码及其浏览器支持的问题

> ID：15463620
> 
> 赞同：1
> 
> 时间：2013-03-17T17:09:35.817
> 
> 标签：css, html, cross-browser, base64

`<img />`关于在 an 的 src 中使用 base 64 编码或作为 CSS 中背景的值，我有几个问题？

浏览器对它的支持是什么样的？还是浏览器支持取决于它实际的文件类型？

其次，小（文件大小/不复杂）文件的base 64编码有什么好处？

最后，有什么缺点吗？我听说不要将它用于复杂或更大的文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T17:34:27.200

我已经使用 Base64 URI 有一段时间了——似乎所有相关的浏览器都理解该协议：[http ://en.wikipedia.org/wiki/Data_URI_scheme#Web_browser_support](http://en.wikipedia.org/wiki/Data_URI_scheme#Web_browser_support)

最大的警告之一是，当图像采用 Base64 编码时，您可能（取决于上下文；请参阅下面的@Jeff Power 注释）丢失图像缓存，因此不建议将其用于主要针对的较大文件和/或应用程序移动设备。

# c - Executing a function at specific intervals

> ID：15463621
> 
> 赞同：4
> 
> 时间：2013-03-17T17:09:36.630
> 
> 标签：c, timer, pthreads

The task is to execute a function (say `Processfunction()`) every x (say x=10) seconds.

With below code, I'm able to call `Processfunction()` every x seconds.

**Question:** How to handle the case where the function takes more than 10 seconds to finish execution?

One way would be to have a flag to indicate the end of `Processfunction()` execution and check for it before calling `Processfunction()`. Is there a better way to do this ?

* * *

```
#include <pthread.h>
#include <unistd.h> // for sleep() and usleep()

void *timerthread(void *timer_parms) {  

  struct itimerspec new_value;
  int max_exp, fd;
  struct timespec now;
  uint64_t exp;
  ssize_t s;

  struct timer_params *p =(struct timer_params*)timer_parms;

  printf("starttimer Start\n");
  /* Create a CLOCK_REALTIME absolute timer with initial
     expiration and interval as specified in command line */
  if (clock_gettime(CLOCK_REALTIME, &now) == -1)
    handle_error("clock_gettime");

  new_value.it_value.tv_sec = now.tv_sec;
  new_value.it_value.tv_nsec = now.tv_nsec + p->tv_nsec;
  new_value.it_interval.tv_sec = p->tv_sec;
  new_value.it_interval.tv_nsec = p->tv_nsec;
  //max_exp = 5; //No of times

  fd = timerfd_create( CLOCK_REALTIME , 0);
  if (fd == -1)
    handle_error("timerfd_create");

  if (timerfd_settime(fd, TFD_TIMER_ABSTIME, &new_value, NULL) == -1)
    handle_error("timerfd_settime");

  printf("timer started\n");

  while(1) // keep checking
  {
    s = read(fd, &exp, sizeof(uint64_t));
    if (s != sizeof(uint64_t))
      handle_error("read");
    Processfunction(); // Say after X seconds call this function
  }
  return NULL;
}

int main() {

  struct timer_params timer_params_obj;
  int res;void *thread_result;
  timer_params_obj.tv_sec = 10; 
  //timer_params_obj.tv_nsec = 10000000  ; //10ms
  timer_params_obj.tv_nsec = 0  ; 

  pthread_t pt;
  pthread_create(&pt, NULL, timerthread, &timer_params_obj);
  // thread is running and will call Processfunction() every 10 sec
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T20:25:13.777

为什么你需要一个计时器呢？

您可以根据经过时间与所需间隔持续时间的关系测量执行时间并进入睡眠状态。

例子：

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <unistd.h>

int main() {
    srand(1);
    for (;;) {
        double interval = 10; /* seconds */

        /* start time */
        time_t start = time(NULL);

        /* do something */
        int duration = rand() % 13;
        printf("%2d seconds of work started at %s", duration, ctime(&start));
        sleep(duration);

        /* end time */
        time_t end = time(NULL);

        /* compute remaining time to sleep and sleep */
        double elapsed = difftime(end, start);
        int seconds_to_sleep = (int)(interval - elapsed);
        if (seconds_to_sleep > 0) { /* don't sleep if we're already late */
            sleep(seconds_to_sleep);
        }
    }
    return 0;
} 
```

输出：

```
$ gcc test.c && ./a.out
 0 seconds of work started at Sun Mar 17 21:20:28 2013
 9 seconds of work started at Sun Mar 17 21:20:38 2013
11 seconds of work started at Sun Mar 17 21:20:48 2013
 4 seconds of work started at Sun Mar 17 21:20:59 2013
 1 seconds of work started at Sun Mar 17 21:21:09 2013
^C 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-06T21:15:26.917

我有一个几乎相同的用例，除了我需要它是跨平台的 C++11 并且需要同时执行其他任务而不是睡觉。这是我的代码，以防它对某人有用：

```
// TimeT.h - Calls the passed function if the minimum time interval has elapsed
#ifndef TIME_T_H_
#define TIME_T_H_

#include <chrono>

/// Tracks the time since execution() was called, and only
/// Calls the passed function if the minimum time interval has elapsed
/// @see https://stackoverflow.com/questions/2808398/easily-measure-elapsed-time for the code I based this on
template<typename TimeT = std::chrono::milliseconds>
struct periodic
{
    periodic(TimeT duration = TimeT(1))
        : start(std::chrono::system_clock::now())
        , period_duration(duration)
        , previous_duration(TimeT::zero())
    {};

    template<typename F, typename ...Args>
    TimeT execution(F func, Args&&... args)
    {
        auto duration = std::chrono::duration_cast<TimeT>
                            (std::chrono::system_clock::now() - start);
        if (duration > previous_duration + period_duration)
        {
            std::forward<decltype(func)>(func)(std::forward<Args>(args)...);
            previous_duration = duration;
        }
        return duration;
    }

    std::chrono::time_point<std::chrono::system_clock> start;
    // The minimum duration to wait before the function can be called again
    TimeT period_duration;
    // The duration between startup and the last time the function was called
    TimeT previous_duration;
};

#endif // TIME_T_H_ 
```

这是一个使用它的例子：

```
#include "TimeT.h"    

#include <iostream>
#include <thread>

int main(int argc, char* argv[])
{
     periodic<> callIfMinPeriodPassed(std::chrono::milliseconds(1));
     std::size_t num_periods;

     while(true)
     {
          callIfMinPeriodPassed.execution( [&num_periods]()
          {
                  std::cout << ++num_periods << "timesteps have passed\n"
          });
          // do other stuff here, this example will work
          // but spins at 100% CPU without the sleep
          std::this_thread::sleep_for(std::chrono::milliseconds(1));
     }
} 
```

这个实现是基于[这个关于测量经过时间的stackoverflow问题](https://stackoverflow.com/questions/2808398/easily-measure-elapsed-time)的修改。

# curl - Using curl to get dns/connect/send/wait/receive times of url

> ID：15463622
> 
> 赞同：0
> 
> 时间：2013-03-17T17:09:46.690
> 
> 标签：curl

I need help picking the right curl functions to calculate these things:

```
DNS The web browser is looking up DNS information
Connect The web browser is connecting to the server
Send    The web browser is sending data to the server
Wait    The web browser is waiting for data from the server
Receive The web browser is receiving data from the server 
```

For example if i have this url `http://g2.delfi.lt/scms/?g=delfi-fp.css&1362823940` , i would want to get these values:

```
DNS - 443ms
Connect - 589ms
Send - 1ms
Wait - 152ms
Receive - 1ms 
```

Can i do this using curl?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-20T03:54:10.657

curl 可以轻松获取 dns,connect time.wait=TOTAL？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-12T15:37:45.387

使用 curl 命令行工具或 libcurl 您将需要一些后处理。

curl 暴露了以下时间：

```
curl_easy_perform()
     |
     |--NAMELOOKUP
     |--|--CONNECT
     |--|--|--APPCONNECT
     |--|--|--|--PRETRANSFER
     |--|--|--|--|--STARTTRANSFER
     |--|--|--|--|--|--TOTAL
     |--|--|--|--|--|--REDIRECT 
```

*以编程*方式，您可以使用：

```
CURLcode curl_easy_getinfo(CURL *curl, CURLINFO info, ... ); 
```

检索它们。详情[在这里](http://curl.haxx.se/libcurl/c/curl_easy_getinfo.html)

使用*curl cli 工具，您可以使用***--write-out**选项打印所有上述值然后您需要做一些非常简单的数学运算来获得所需的时间增量。

# c# - 在 SelectedIndexChanged 事件中取消编辑模式。

> ID：15463625
> 
> 赞同：0
> 
> 时间：2013-03-17T17:10:01.380
> 
> 标签：c#, asp.net, gridview

我有一个带有编辑和选择按钮的网格视图。

我想要做的是，如果我的行处于编辑模式，并且单击了另一行的选择，我想在另一行上结束编辑模式并选择新行。

默认行为是选择新行并使编辑行仍处于编辑模式。

我知道必须在这里解决：

```
protected void gvRecordList_SelectedIndexChanged(object sender, EventArgs e)
{
} 
```

但是连续退出编辑模式的语法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T17:50:05.040

你可以做这样的事情。

```
protected void gvRecordList_RowEditing(object sender, System.Web.UI.WebControls.GridViewEditEventArgs e)
{
    gvRecordList.EditIndex = e.NewEditIndex;
    gvRecordList.DataSource = yourDataSource;
    gvRecordList.DataBind();
}

protected void gvRecordList_SelectedIndexChanged(object sender, EventArgs e)
{
    gvRecordList.EditIndex = -1; // this is waht you need to do to reset your GridView from Edit Mode
    gvRecordList.DataSource = yourDataSource;
    gvRecordList.DataBind();
} 
```

# php - 需要另一个所需文件中已经需要的文件

> ID：15463626
> 
> 赞同：0
> 
> 时间：2013-03-17T17:10:02.183
> 
> 标签：php, require, require-once

我有 2 个 PHP 文件。

`Connection.php`: 包含一个返回连接的静态函数`$con`。

`User.php`：操作用户的数据（数据库），这也需要`Connection.php`在其脚本中，以便它可以连接到数据库。

但是，这会返回一个错误：

> 警告：require_once(./Connection.php)：无法打开流：第 2 行的 C:\xampp\htdocs\Classes\User.php 中没有这样的文件或目录
> 
> 致命错误：require_once()：在第 2 行的 C:\xampp\htdocs\Classes\User.php 中打开所需的 './Connection.php' (include_path='.;C:\xampp\php\PEAR') 失败

**更新**

这是目录：

```
/htdocs/Register.php <--I need to require both files here
/htdocs/Classes/User.php
/htdocs/Classes/Connection.php 
```

什么时候`User.php`需要`Connection.php`：

`require_once './Connection.php';`

当我需要两个文件时`Register.php`：

```
require_once './Classes/Connection.php'; //No error when required Alone
require_once './Classes/User.php'; //No Error when required Alone 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T17:29:50.023

```
require_once './Classes/Connection.php'; //No error when required Alone
require_once './Classes/User.php'; //No Error when required Alone 
```

以上似乎是正确的，如果你在同时需要两个文件时遇到错误，如果是因为你有另一个你需要的文件`User.php`所以，检查一下，这两个文件根本不需要任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T17:17:11.740

*您必须在 htdocs 中创建文件夹*

确保您的文件在当前文件夹中。

```
require_once("Classes/Connection.php");
require_once("Classes/User.php");

// call static function from Connection.php

$con = new Connection();
$con->connection(return values); 
```

# php - 从单例中使用 phalcon 的 DI？

> ID：15463629
> 
> 赞同：3
> 
> 时间：2013-03-17T17:10:22.887
> 
> 标签：php, phalcon

让我们想象一下，我们正在开发非常简单的单例 Auth 类来处理 DB 和会话（我们不想要任何其他分解，如 auth 适配器等）。

我怎样才能使这个单例类中的 DI 可用？当然，最好的方法是将 DI 实例传递给构造函数，但如果我想从单例中获取它呢？我应该使用静态设置方法`Auth::setDi($di)`还是有更好的做法？或者也许我们应该避免单例，因为我们总是有 DI 存储？

对不起我的英语，我希望我的问题很清楚。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-18T00:01:26.990

您可以访问静态实例化的最新 DI：

```
<?php

$di = Phalcon\DI::getDefault(); 
```

[http://docs.phalconphp.com/en/latest/reference/di.html#accessing-the-di-in-a-static-way](http://docs.phalconphp.com/en/latest/reference/di.html#accessing-the-di-in-a-static-way)

# java - Java字符串解析和求和

> ID：15463632
> 
> 赞同：0
> 
> 时间：2013-03-17T17:10:34.963
> 
> 标签：java, string, parsing

我正在寻找解析输入`String`，并且当我这样做时，我想检查每个单词的出现次数，同时删除所有非字母字符。

例如：

```
String str = "test man `xy KA XY test!.. KA kA TeST man poqw``e TES`T"
String s = line.replaceAll("[^\\p{L}\\p{N}\\ ]", "");
String[] werd = alphaLine.split(" ");

for(int i=0; i<werd.size(); i++) {
     if(werd[i].toLowerCase().equals("test")) {
         testcounter++;
     elseif(werd[i].toLowerCase().equals("ka")) {
         kacounter++;
     etc.. 
```

我将检查很长`String`的s，并将检查许多目标`String`s（在这个例子中），`ka`并`test`试图看看我是否可以一次执行这段代码，因为现在看来 for `.replaceAll()`, `.split()`, 然后for 循环我正在经历所有的`String`s 3 次，当它可以完成一次时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T17:39:15.433

不确定我是否在同一页面上，但听起来您在问如何在搜索单词时减少查找次数。如果您有大量搜索词，这可能不是最好的方法，但应该为较小的列表提供每个词的出现次数。

```
Map<String, Integer> occurrences = new HashMap<String, Integer>();
List<String> words = new ArrayList<String>();
words.add("foo");
words.add("bar");

//build regex - note: if this is done within an outer loop, then you should consider using StringBuilder instead
//The \b in regex is a word boundary
String regex = "\\b(";
for(int i = 0; i < words.size(); i++) {
    //add word to regex
    regex += (0 == i ? "" : "|") + words.get(i);

    //initial occurrences
    occurrences.add(words.get(i), 0);
}
regex += ")\\b";
Pattern patt = Pattern.compile(regex);
Matcher matcher = patt.matcher(search_string);

//check for matches
while (matcher.find()) {
    String key = matcher.group();
    int numOccurs = occurrences.get(key) + 1;
    occurrences.put(key, numOccurs);
} 
```

编辑：这是假设您在此之前处理非字母要求

# javascript - 使用 node.js 0.10 的 UDP 套接字上的 ENOTFOUND 错误

> ID：15463634
> 
> 赞同：4
> 
> 时间：2013-03-17T17:10:46.213
> 
> 标签：javascript, node.js

我尝试使用 UDP 运行节点 0.10 的一些 js，但出现错误。API 更改谈到了新的全异步 dgram 系统，但我无法运行该示例。

当我尝试：

```
var s = dgram.createSocket('udp4');

s.bind(1234, function() {
    s.addMembership('224.0.0.114');
}); 
```

我明白了：

```
events.js:72
    throw er; // Unhandled 'error' event

Error: getaddrinfo ENOTFOUND
    at errnoException (dns.js:37:11)
    at Object.onanswer [as oncomplete] (dns.js:124:16) 
```

我对节点 0.8 没有任何问题。我在 Windows 8 x64 上。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T18:04:38.153

你可以这样试试：

```
s.bind(1234,'0.0.0.0', function() {
  s.addMembership('224.0.0.114');
}); 
```

它是否给出了一些错误

# java - 守护线程 Java

> ID：15463635
> 
> 赞同：8
> 
> 时间：2013-03-17T17:10:55.560
> 
> 标签：java, concurrency

我是并发和线程的新手——并且在工作中开发我的应用程序时一直在使用它们。本质上，我的 RMI 应用程序（服务器端组件）中有许多线程轮询文件中的更改（这些文件每隔几秒钟更新一次）。

在开发盒上进行测试时，我一直在从命令行运行服务器，然后在完成后手动关闭它，然后冲洗并全天重复。

正如它所发生的那样 - 我认为当我关闭命令行并继续处理时我的线程可能不会停止。这会导致一些非常糟糕的副作用——尽管我不是 100% 确定这是否可能，所以希望有人能证实这可能是这种情况。

如果我让一个线程成为守护进程——这是否意味着当我关闭命令行时——这些线程会自动停止？我需要一些很好地终止应用程序的方法，但是因为服务器最终将由 autosys 运行，所以我不确定关闭时让所有线程完成的最佳方法是什么

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T17:32:17.217

下面的代码演示了创建一个带有虚拟运行任务的线程池，然后启动该任务，当应用程序终止时，一个关闭挂钩运行，它取消所有正在运行的任务并干净地关闭线程池。

您不必像我一样使用 Callable，您可以使用 Runnables 和 threadPool.execute 方法并简单地终止线程池，这有点不那么优雅。

```
 final ExecutorService threadPool = Executors.newCachedThreadPool();
    final List<Future<Void>> runningTasks = new ArrayList<>();
    Future<Void> task = threadPool.submit(new Callable<Void>() {

        @Override
        public Void call() throws Exception {
            int count = 0;
            while(true) {
                System.out.println(++count);
                Thread.sleep(1000);
            }
        }
    });
    runningTasks.add(task);

    Runtime.getRuntime().addShutdownHook(new Thread() {
        @Override
        public void run() {
            for(Future<Void> runningTask : runningTasks) {
                runningTask.cancel(true);
            }
            threadPool.shutdownNow();
        }
    }); 
```

关闭挂钩适用于独立应用程序。在 Java EE 容器中，您可以对 javax.servlet.ServletContextListener 执行相同的操作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T17:32:29.793

线程在 Java 虚拟机中运行。如果停止 JVM，线程将不再运行。您可以看到退出 JVM 就像拔掉计算机的插头：什么都不能再运行了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T17:40:29.953

RMI 运行时创建您无法停止的线程。关闭服务的唯一方法是使用 System.exit()。

我在一个单独的线程中执行此操作。之后：new ShutThread().start()，关闭的线程等待 2 秒，让任何延迟消息有机会完成旅程，然后发出 System.exit()。

# opengl-es - 多次生成 OpenGL 纹理 ID

> ID：15463636
> 
> 赞同：0
> 
> 时间：2013-03-17T17:10:57.697
> 
> 标签：opengl-es, android-ndk, textures

我在 C 中有纹理加载例程，它调用我的游戏的 Java 部分来完成这项工作。它可以加载 .png 和 .jpg 文件并从中创建纹理。它将生成的 textureID（使用 glGenTextures 生成）返回给 C。在我开始使用frontbuffer之前它工作得很好。

由于前缓冲区的纹理是空的，我直接在 C 中创建它。当我第一次运行游戏时它工作正常 - 为前缓冲区生成的纹理 ID 与所有其他纹理 ID 不同。但是当我按下 HOME 键，然后再次跳回到游戏中，我重新加载所有纹理并再次重新创建前端缓冲区（从上下文丢失中恢复）为前端缓冲区生成的纹理 ID 与为纹理生成的纹理 ID 之一冲突 - 就像如果有两条标识线。使用帧缓冲区的屏幕已损坏 - 显示 ID 等于新分配的帧缓冲区 ID 的纹理。

这一切都只发生在真实设备上（在我的例子中是三星 Galaxy 平板电脑），而不是在模拟器中。

C 加载例程：

```
void Texture::construct(AssetLoader* aLoader, s32 aIdx)
{
    const c8* fileName = aLoader->getFileName();

    // load texture
    SBC::System::Application* app = &Game::getGame().getApplication();

    JNIEnv *env;

    bool shouldDetach = false;
    JavaVM* vm = gJavaVM;
    jint rc = vm->GetEnv((void **)&env, JNI_VERSION_1_6);
    if (rc != JNI_OK)
    {
        shouldDetach = true;
        vm->AttachCurrentThread(&env, NULL);
    }
    jclass& activityClass = gJavaActivityClass;

    jmethodID mid = env->GetStaticMethodID(activityClass, "loadTexture", "(Ljava/lang/String;I)I");
    jstring mystr = env->NewStringUTF(fileName);
    jint ret = env->CallStaticIntMethod(activityClass, mid, mystr, aIdx);
    env->DeleteLocalRef(mystr);

    // store information on ID, width and height of texture
    mTextureID = ret;

    LOGE("textureID = %i", mTextureID);

    mid = env->GetStaticMethodID(activityClass, "getTextureWidth", "()I");
    mWidth = env->CallStaticIntMethod(activityClass, mid);
    mid = env->GetStaticMethodID(activityClass, "getTextureHeight", "()I");
    mHeight = env->CallStaticIntMethod(activityClass, mid);

    if (shouldDetach)
        vm->DetachCurrentThread();

    LOGI("texture ID %i, width %i, height %i", mTextureID, mWidth, mHeight);
} 
```

Java 方法

```
//-----------------------------------------------------
/* fname = asset file name
 * id >= 0 ... position in compound file
 * id < 0 ... single file (no compound)
 */
public static int loadTexture(String fname, int id)
{
    // clear last texture parameters
    txtID = width = height = -1;

    Log.d("Helper", "Loading texture from asset file " + fname + " with id " + id);

    final BitmapFactory.Options options = new BitmapFactory.Options();
    options.inScaled = false;       // No pre-scaling
    AssetManager am = SBCEngine.getSBCEngine().getAssets();
    Bitmap bitmap = null;

    try
    {
        InputStream stream = am.open(fname);

        // loading from compound file?
        if (id >= 0)
        {
            DataInputStream input = new DataInputStream(stream);

            // skip header
            input.skip(3);
            // skip to entry offset
            input.skip(id * 4);
            // read entry beginning
            int dataStart = input.readInt();
            // read data length
            int dataLen = input.readInt() - dataStart;
            // skip to start of subfile
            // offsets are without header (3) bytes
            // we already skipped id * 4 bytes
            // we already have read 2 offset by 4 bytes = 8 in total
            input.skip(dataStart - (id * 4) - 8);

            // get data from correct position
            byte[] data = new byte[dataLen];
            input.read(data);

            bitmap = BitmapFactory.decodeByteArray(data, 0, data.length, options);
        }
        else    // no compound
        {
            Log.d("Helper", "Loading from stream");
            bitmap = BitmapFactory.decodeStream(stream, null, options);
        }

        // test returned bitmap for success
        if (bitmap == null)
        {
            Log.e("Helper", "Failed to load texture " + fname + " with id " + id);
        }

        // check whether the loaded bitmap has width and height equal to power of 2
        int w = bitmap.getWidth();
        int h = bitmap.getHeight();
        if (getNearestPOT(w) != w || getNearestPOT(h) != h)
        {
            Log.w("Helper", "Texture " + fname + " with id " + id +
                        " has not either width or height power of 2");

            // new dimensions
            w = getNearestPOT(w);
            h = getNearestPOT(h);

            // get actual bitmap config
            Bitmap.Config bitmapConfig = bitmap.getConfig();
            // check for null
            if (bitmapConfig == null)
            {
                bitmapConfig = Bitmap.Config.ARGB_8888;
                Log.w("Helper", "Unknown bitmap config. Setting to ARGB_8888");
            }
            // redraw bitmap into POT bitmap
            Bitmap newBitmap = Bitmap.createBitmap(w, h, bitmapConfig);
            Canvas canvas = new Canvas(newBitmap);
            canvas.drawBitmap(bitmap, 0.0f, 0.0f, null);
            bitmap.recycle();
            canvas = null;
            bitmap = newBitmap;

            Log.w("Helper", "Texture " + fname + " rebuilded into texture with POT");
        }

        // generate textureID
        int[] textures = new int[1];
        GLES20.glGenTextures(1, textures, 0);
        int textureID = textures[0];

        // create texture
        GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, textureID);
        GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MIN_FILTER, GLES20.GL_LINEAR);
        GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MAG_FILTER, GLES20.GL_LINEAR);
        GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_WRAP_S, GLES20.GL_CLAMP_TO_EDGE);
        GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_WRAP_T, GLES20.GL_CLAMP_TO_EDGE);
        GLUtils.texImage2D(GLES20.GL_TEXTURE_2D, 0, bitmap, 0);

        // destroy bitmap
        bitmap.recycle();

        txtID = textureID;
        width = w;
        height = h;

        Log.d("Helper", "Loaded texture ID:" + textureID + ", width:" + w + ", height:" + h);
        return textureID;
    }
    catch (IOException e)
    {
        Log.e("Helper", "Failed to load texture " + fname + " with id " + id);
        return 0;
    }
}

    //------------------------------------------------------------------------
public static int getTextureWidth()
{
    return width;
}

    //------------------------------------------------------------------------
public static int getTextureHeight()
{
    return height;
}

    //------------------------------------------------------------------------
private static int getNearestPOT(int val)
{
    int newDim = 1;
    while(val > newDim) newDim *= 2;
    return newDim;
} 
```

最后是为前端缓冲区创建纹理的 C 例程

```
// create empty texture
void Texture::construct(u32 aTextureWidth, u32 aTextureHeight)
{
    // get power of 2 dimensions
    mWidth = getNearestPOT(aTextureWidth);
    mHeight = getNearestPOT(aTextureHeight);

    glGenTextures(1, &mTextureID);
    glBindTexture(GL_TEXTURE_2D, mTextureID);
    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, mWidth, mHeight, 0, GL_RGB, GL_UNSIGNED_SHORT_5_6_5, null);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);

    LOGE("textureID = %i", mTextureID);
} 
```

有人遇到过同样的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T18:17:11.440

我终于找到了解决方案。当上下文丢失发生时，所有纹理都会被删除。但是我在用以前的 ID 重新创建之前自己删除了它们。这导致了过程中的混乱，因为一些新生成的 ID 在更新下一个对象时立即被删除。

# android - android微调器下拉列表

> ID：15463637
> 
> 赞同：3
> 
> 时间：2013-03-17T17:11:02.087
> 
> 标签：android, android-layout, android-activity, android-actionbar, actionbarsherlock

我想制作如下下拉列表，

![在此处输入图像描述](../Images/5497f08a6046e5fcddc6b00b4749e3ae.png)

我正在尝试使用 sherlockactivity 和 spinner。但我不知道怎么做。

这是我的简单代码，但是……这不是我想要的

爪哇

```
final Spinner spinnerSelectmenu = (Spinner)findViewById(R.id.actionbar_filemenu_selectmenu);
    String[] items = {"", "menu1", "menu2"};
    ArrayAdapter<String> spinnerMenuList = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, items);
    spinnerMenuList.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinnerSelectmenu.setAdapter(spinnerMenuList); 
```

xml

```
<Spinner 
    android:id="@+id/actionbar_filemenu_selectmenu"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:layout_alignParentRight="true"
    /> 
```

![在此处输入图像描述](../Images/a32b86934b44fa0042a9a1804fe12fba.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T18:19:49.080

`android:spinnerMode="dropdown"`似乎是正确的事情，但是 AFAIK 只能从 API 11 开始使用。
其他消息来源说您需要使用 Holo 主题才能使您的代码显示为下拉菜单。见[https://stackoverflow.com/a/13560603/1666456](https://stackoverflow.com/a/13560603/1666456)

# symfony - Symfony2 PUGXMultiUserBundle：注册不起作用

> ID：15463643
> 
> 赞同：2
> 
> 时间：2013-03-17T17:11:34.223
> 
> 标签：symfony

我正在尝试在我的应用程序中使用 PUGXMultiUserBundle ；我按照文档中的说明进行操作，但是当我进入注册页面时，出现错误：

> 无法设置类鉴别器，因为实体列表中不存在类“Myapp\UserBundle\Entity\SellerUser”

我认为一切都配置得很好，但我看不到错误在哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T22:58:25.283

我终于很快找到了我的问题；在文档中，写到您应该将与捆绑包相关的配置放入捆绑包的config.yml（即MyApp\MyBundle\Resources\config\config.yml）

我将它放入应用程序 config.yml 并且它可以工作；不知道这是否是一个已知问题，但对我来说它解决了问题

编辑：只需从应用程序 config.yml 导入我的包的 config.yml 即可使其工作，一切都很好并且现在可以理解

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-08T17:59:18.930

@JérémyDutheil

这不是解决这个问题的办法。类似于将 PUGXMultiUserBundle 配置代码放在 app/config.yml 或相关的 bundles 配置文件中，然后将其导入 app/config.yml。

您忘记在配置文件中配置 PUGXMultiUserBundle。您必须定义您的用户实体，如下所示：

```
pugx_multi_user:
  users:
    user_one:
        entity: 
          class: Acme\UserBundle\Entity\UserOne

    user_two:
        entity: 
          class: Acme\UserBundle\Entity\UserTwo 
```

这是您发布的问题的适当解决方案。

# node.js - 在jade中使用js循环

> ID：15463645
> 
> 赞同：0
> 
> 时间：2013-03-17T17:11:46.427
> 
> 标签：node.js, express, pug

我无法在玉中显示一组图像，它们是从 javascript 传递的，但我只是得到一个只有标题的空白框。这是翡翠给我带来麻烦的部分。

```
h2 Connections
     ul
      script(type='text/javascript')
       - for (i = 0; i < 5; i++)
        li
         - for (j = (i*5); j < j+1; j++)
          - for (k = j; k < (j+5); k++)
           img(src='#{connections[k]}', width='50', height='50')
     ul 
```

我遇到的最新问题是 k in`img(src='#{connections[k]}', width='50', height='50')`未定义！我试过移动它，但如下所述，我意识到`[k]`需要在该`#{}`部分中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T19:46:53.287

如果你想遍历你拥有的每张图片，你需要使用这样的东西：

```
img(src='#{connections[k]}', width='50', height='50') 
```

您内部的所有内容都`#{}`将作为 JavaScript 执行。你可以做任何操作，使用任何模块，只要将它们定义为本地。

在 Express.js 中，如果您想在 Jade 模板中使用（例如）Moment.js：

```
app.locals.moment = moment; 
```

# java - Java 排序数据结构

> ID：15463646
> 
> 赞同：1
> 
> 时间：2013-03-17T17:11:55.300
> 
> 标签：java, sorting, data-structures

我正在从一个文本文件中获取一个具有多个数据字段（3 个字符串字段，两个 int 字段）的对象，计算某个数值，然后我需要在阅读时将它们一个接一个地放入数据结构中他们从文件中。在解析/计算/存储结束时，我需要按该计算值对结构进行排序，以便我可以不断检索/弹出最高值。

我在考虑 PriorityQueue，但是有没有更好的结构呢？

编辑：什么会更快？拥有一个在整个程序流程期间保持自身排序的结构，或者只是将它们放在一个列表中并在最后排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T17:20:02.717

正如你所建议的，我会使用 PriorityQueue。它使用堆作为数据结构，可以随时对元素进行排序。完成后，您基本上拥有一个有序列表，因此您可以有效地按顺序读取元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T17:16:10.417

如果您正在寻找自然排序，您可以选择`TreeSet`. 其中元素使用其[自然顺序](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)或在集合创建时提供的[Comparator进行排序。](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T17:27:55.923

如果我理解正确，您会读取并计算值，将其放入队列中，然后才需要对队列进行排序？因为如果您只对队列进行一次排序（在从文件中读取所有数据之后），那么您可能想要使用`LinkedList`实现 Queue.

*   (i) 读取您的数据并创建对象（它们应该实现`CompareTo`）
*   (ii) 将所有对象放入您的`LinkedList` with`linkedList.add(myObject)`
*   (iii) 对链表进行排序 `Collections.sort(linkedList)`
*   (iv) peek 或 pop 第一个元素

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T17:20:29.613

如果您将数值计算并存储为元素对象内的变量，则 PriorityQueue 更合适。在这种情况下，您可能需要指定适当的 Comparator 对于同步访问，请使用 PriorityBlockingQueue

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-17T17:17:03.593

如果每个都是一个对象，您是否可以不只是创建一个方法 compateTo 比较您的两个对象以确定哪个应该是第一个，并使用它来对您的对象进行排序（可能存储在数组或列表中？）。

我认为您可能应该研究一下：[比较](http://www.javapractices.com/topic/TopicAction.do?Id=10)

# c# - 我需要数据传输证书吗？

> ID：15463648
> 
> 赞同：1
> 
> 时间：2013-03-17T17:12:02.707
> 
> 标签：c#, wcf, wcf-binding, wcf-security

我想保护我的 WCF 客户端和服务之间的数据传输。我以为我必须使用 ssl 证书。

[BasicHttpBinding 和 WsHttpBinding 的区别](http://www.codeproject.com/Articles/36396/Difference-between-BasicHttpBinding-and-WsHttpBind)

但是 - 在这篇文章中，用户解释了 basichttpbinding 和 wshttpbinding 之间的区别。正如他所展示的那样，Wshttpbinding 在不使用证书的情况下对数据进行了加密。

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T17:20:07.670

不，你不会错过任何东西。

Ssl 在传输级别提供安全性。这意味着它在 http 上使用 https，但消息是普通的旧 xml。

WsBinding 能够提供消息级别的安全性。消息甚至通过 http（不是 https！）传递，但客户端和服务器交换一系列 xml，最终交换密钥，然后对话的最后一条消息是实际消息，但使用先前构成的密钥加密。

在这两种情况下，一般原则是相同的，但证券只是在不同的层面构成。

# jquery - 无法检索 jquery 当前选项卡索引

> ID：15463658
> 
> 赞同：1
> 
> 时间：2013-03-17T17:12:49.663
> 
> 标签：jquery, jquery-ui, tabs

每次我单击按钮时，我都希望获得所选选项卡的索引，而不是我得到 null

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>jQuery UI Tabs Example 1</title>
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
<script src='http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js'></script>
<script src='http://ajax.googleapis.com/ajax/libs/jqueryui/1/jquery-ui.min.js'></script>
<script>
$(function() {

    $("#tabs").tabs();

    $("#button").click(function() {
        var current_index = $("#tabs").tabs("option","selected");
        alert("The index of the current tab is " + current_index);
    });
});
</script>
</head>
<body>
<button id="button">Click me</button>

<div id="tabs">
    <ul>
        <li><a href="/buildFirstTab">First Tab</a></li>
        <li><a href="/buildSecondTab">Second Tab</a></li>
        <li><a href="/buildThirdTab">Third Tab</a></li>
    </ul>    
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T17:26:41.620

```
<script src='http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.js'></script> 
```

只需将 j Query Ui Lib 链接替换为新链接即可。

更新代码

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>jQuery UI Tabs Example 1</title>
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
<script src='http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js'></script>
<script src='http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.js'></script>

<script>
$(function() {

    $("#tabs").tabs();

    $("#button").click(function() {
        var current_index = $("#tabs").tabs("option","selected");
        alert("The index of the current tab is " + current_index);
    });
});
</script>
</head>
<body>
<button id="button">Click me</button>

<div id="tabs">
    <ul>
        <li><a href="/buildFirstTab">First Tab</a></li>
        <li><a href="/buildSecondTab">Second Tab</a></li>
        <li><a href="/buildThirdTab">Third Tab</a></li>
    </ul>    
</div>

</body>
</html> 
```

# sas - SAS - 从宏变量创建变量

> ID：15463663
> 
> 赞同：3
> 
> 时间：2013-03-17T17:13:22.983
> 
> 标签：sas, sas-macro

我有一个 SAS 数据集，它有 20 个字符变量，所有这些都是名称（例如 Adam、Bob、Cathy 等）

我想要一个动态代码来创建名为 Adam_ref、Bob_ref 等的变量。即使存在具有不同名称的不同数据集（即不想手动定义每个变量），它也可以工作。

到目前为止，我的方法是使用 proc 内容来获取所有变量名称，然后使用宏来创建宏变量 Adam_ref、Bob_ref 等。

如何从这里在数据集中创建实际变量？我需要不同的方法吗？

```
proc contents data=work.names 
               out=contents noprint;
run;

proc sort data = contents; by varnum; run;

data contents1;
  set contents;
  Name_Ref = compress(Name||"_Ref");
  call symput (NAME, NAME_Ref); 
  %put _user_;
run; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T17:40:30.957

如果您想创建一个空数据集，其中的变量名称类似于宏变量中的某些值，您可以执行以下操作。

将值保存到以某种模式命名的宏变量中，例如`v1`，`v2`...

```
proc sql;
select compress(Name||"_Ref") into :v1-:v20 from contents;
quit; 
```

如果你不知道有多少个值，你必须先计算它们，我假设它们只有 20 个。

然后，如果您的所有变量都是长度为 100 的字符变量，您将创建一个如下所示的数据集：

```
%macro create_dataset;
data want;
length %do i=1 %to 20; &&v&i $100 %end;
;
stop;
run;
%mend;

%create_dataset; run; 
```

如果您在宏变量中有值，这就是您可以做到的方式，通常可能有更好的方法来做到这一点。

如果您不想创建空数据集而只想更改变量名称，则可以这样做：

```
proc sql;
select name into :v1-:v20 from contents;
quit;

%macro rename_dataset;
data new_names;
set have(rename=(%do i=1 %to 20; &&v&i = &&v&i.._ref %end;));
run;
%mend;

%rename_dataset; run; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T02:17:37.943

您可以将 PROC TRANSPOSE 与 ID 语句一起使用。

此步骤创建一个示例数据集：

```
data names;
    harry="sally";
    dick="gordon";
    joe="schmoe";
run; 
```

此步骤本质上是您上述步骤的副本，它会生成列名数据集。我将在整个过程中重用数据集名称引用。

```
proc contents data=names out=namerefs noprint;
run; 
```

此步骤将“_Refs”添加到之前定义的名称并删除其他所有内容。变量“name”来自 PROC CONTENTS 输出的数据集的列属性。

```
data namerefs;
    set namerefs (keep=name);
    name=compress(name||"_Ref");
run; 
```

此步骤会生成一个包含所需列的空数据集。通过查看列属性再次获得变量“*名称”。*如果您尝试查看数据集，您可能会在 GUI 中收到无害的警告，但您可以根据需要使用它，并且可以确认它具有所需的输出。

```
proc transpose out=namerefs(drop=_name_) data=namerefs;
  id name;
run; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-06T16:42:19.367

这是另一种需要较少编码的方法。它不需要运行 proc 内容，不需要知道变量的数量，也不需要创建宏函数。它也可以扩展来做一些额外的事情。

第 1 步是使用内置的字典视图来获取所需的变量名称。合适的视图是 dictionary.columns，它的别名是 sashelp.vcolumn。字典 libref 只能在 proc sql 中使用，而 sashelp 别名可以在任何地方使用。我倾向于使用 sashelp 别名，因为我使用 DMS 在 Windows 中工作，并且始终可以交互地查看 sashelp 库。

```
proc sql;
  select compress(Name||"_Ref") into :name_list
                                separated by ' '
    from sashelp.vcolumn
   where libname = 'WORK' 
     and memname = 'NAMES';
quit; 
```

这将生成一个带有所需名称的空格分隔宏。

第 2 步要构建空数据集，则此代码将起作用：

```
Data New ;
  length &name_list ;
run ; 
```

您可以使用稍微复杂一点的 select 语句来避免假设长度或创建具有新变量名称的填充数据集。

例如

```
 select compress(Name)||"_Ref $")||compress(put(length,best.)) 
                 into :name_list
                 separated by ' ' 
```

将生成一个宏变量，该变量保留每个变量的先前长度。这将在不更改上述步骤 2 的情况下工作。

To create populated data set for use with rename dataset option, replace the select statement as follows:

```
 select compress(Name)||"= "||compress(_Ref") 
                   into :name_list
                   separated by ' ' 
```

Then replace the Step 2 code with the following:

```
Data New ;
  set names (rename = ( &name_list)) ;
run ; 
```

# javascript - 部分之间的视差导航

> ID：15463665
> 
> 赞同：0
> 
> 时间：2013-03-17T17:13:40.950
> 
> 标签：javascript, jquery, scroll

[点击这里查看现场演示。](http://inmyownview.com/pagan/)

我想用漂亮的动画在各个部分之间导航。视差设计中的每个“页面”都被划分为`<section>`'s. 我的部分代码如下所示。

```
<div id="sliding">
        1
        2
        3
        4
        5
        </div>
    <section data-type="background" data-speed="20" style="background: url('http://media.vogue.com/files/2012/08/15/img-4vogue120erdemjpg_133133774497.jpg') 50% 0 repeat fixed; min-h-margin: 0 auto; height: 1000px;">
        bla bla
    </section>
    <section data-type="background" data-speed="10" style="background: url('http://media.vogue.com/files/2013/01/15/storm-troupers-02_191346273703.jpg') 50% 0 repeat fixed; min-h-margin: 0 auto; height: 1000px;">
        bla bla bla
    </section> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T18:21:12.730

为这些部分提供唯一的 ID，将您的分页点转换为具有与这些 ID 匹配的目标的超链接，并使用 localScroll 为您提供漂亮的动画。

阅读更多并下载： http: [//flesler.blogspot.com/2007/10/jquerylocalscroll-10.html](http://flesler.blogspot.com/2007/10/jquerylocalscroll-10.html)

你会在你的 html 中做这样的事情：

```
<!-- snip -->

<head>
    <!-- this loads the scripts in the correct order -->
    <script type="text/javascript" src="js/jQuery.min.js">
    <script type="text/javascript" src="js/scrollTo.min.js">
    <script type="text/javascript" src="js/localScroll.min.js">
</head>

<!-- snip -->

<div id="sliding">
    <a href="#section1">1</a>
    <a href="#section2">2</a>
    <a href="#section3">3</a>
    <a href="#section4">4</a>
    <a href="#section5">5</a>
</div>
<section id="section1" ... etc. 
```

然后在你的 JavaScript 中：

```
$('a').localScroll(); 
```

而已！当您单击其中一个部分链接时，您将看到平滑的滚动动画（没有 localScroll，它将直接跳转到该部分）。

# php - SQL JOIN - 需要返回一个产品 ID，但它的所有变体（例如尺寸、颜色）

> ID：15463666
> 
> 赞同：2
> 
> 时间：2013-03-17T17:13:47.313
> 
> 标签：php, sql

我有几个要加入的表格，以从库存表格中显示我的产品详细信息。因此，由于多种颜色和尺寸，一个产品 ID 在库存表中可能有多个条目。

表格1：`tblStock`

```
stockID
productID
sizeID
colourID
qty 
```

表 2：`tblColour`

```
 colourID 
   colourName
   colourHEX 
```

表3：`tblSize`

```
 sizeID
   sizeName 
```

我的查询：

```
 SELECT p.productID, c.colourName, c.colourHEX, sz.sizeName, s.qty
    FROM tblProducts p
    INNER JOIN tblStock s ON p.productID = s.productID
    INNER JOIN tblColour c ON s.colourID = c.colourID
    INNER JOIN tblSize sz ON s.sizeID = sz.sizeID
    WHERE p.productID = '$id' 
```

正在返回：

```
 productID   colourName   colourHEX   sizeName       qty
   4           Burgundy     #621b40     Small          10
   4           Burgundy     #621b40     Medium         15
   4           Burgundy     #621b40     Large          20
   4           Pink         #ba0046     Large          20 
```

有什么方法可以让我只返回一次产品 ID 但保留它的所有变体？

如果没有，我将如何将此产品回显到页面，因为我不希望它出现 4 次。只需出现一次，并提供各种可用选项的详细信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T17:31:42.850

您可以使用[group_concat](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)功能

```
SELECT p.productID, group_concat(distinct c.colourName), group_concat(distinct c.colourHEX), group_concat(distinct sz.sizeName), sum(s.qty)
FROM tblProducts p
INNER JOIN tblStock s ON p.productID = s.productID
INNER JOIN tblColour c ON s.colourID = c.colourID
INNER JOIN tblSize sz ON s.sizeID = sz.sizeID
WHERE p.productID = '$id'
group by p.productID ;// group by required only if you product id clause is removed 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T17:24:28.737

我不习惯 PHP，但你的问题很简单。

您所需要的只是在这样的循环中的一个单独的变量：

```
sql="SELECT p.productID, c.colourName, c.colourHEX, sz.sizeName, s.qty"
sql=sql+"FROM tblProducts p"
sql=sql+"INNER JOIN tblStock s ON p.productID = s.productID"
sql=sql+"INNER JOIN tblColour c ON s.colourID = c.colourID"
sql=sql+"INNER JOIN tblSize sz ON s.sizeID = sz.sizeID"
sql=sql+"WHERE p.productID = '$id'"

Set rs = RecordSetForStoringSQLQueryResult -- Replace with appropriate code in PHP
rs.Open (connectionName, sql)

$prevProductID = Null; -- Or some other number
while not rs.EndOfFile
    $currentId = rs("productID")
    if ($currentId != $lastId) {
         -- New ID found, display it.
         echo($currentId); 
         $prevProductID = $currentId
    } else { 
         -- Code for logic when the current product ID is same as previous product ID
         -- You will not assign anything to $prevProductID in this section.
    }
    rs.MoveToNextRecord
end while 
```

请考虑我不是 PHP 人，但我在经典 ASP 中做过类似的事情。上面的代码仅用于说明目的，不能直接使用。您将需要根据您的计划对其进行调整。

# c++ - RGB 到 HSI 和 HSI 到 RGB 转换

> ID：15463668
> 
> 赞同：3
> 
> 时间：2013-03-17T17:14:17.853
> 
> 标签：c++, opencv

我试图隐蔽`RGB`并`HSI`恢复它。（该任务需要从头开始。）

在`RGB`转换`HSI`中，饱和度和强度输出很好。但我似乎没有在色调的制定中得到问题。示例输出：

```
Red = 255, Green = 255, Blue =  255
Hue  = -2147483648, Saturation = 0, Intensity = 255

Red = 252, Green = 255, Blue =  255
Hue  = 3, Saturation = 0.00787402, Intensity = 254 
```

我用[这个计算器](http://www.had2know.com/technology/hsi-rgb-color-converter-equations.html)来检查我的输出。

请让我知道出了什么问题。谢谢。

```
#include <iostream>
#include <cv.h>
#include <highgui.h>
#include "rgb.h"
#include <cmath>
#include <algorithm> 
#include <fstream>
using namespace std;

int main()
{
  char infname[256];
  ofstream outputFile, outputFile2;
  outputFile.open("RGB_HSI.txt");
  outputFile2.open("HSI_RGB.txt");

  cout << "Enter input image  : ";
  cin >> infname;
  IplImage *img = cvLoadImage(infname, 1);
  RgbImage pic(img);
  int H = img->height;
  int W = img->width;

 for (int j=0;j<H;j++) 
 for (int i=0;i<W;i++) {

     double temp = 0;
     double R =(double) pic[j][i].r;
     double G =(double) pic[j][i].g; 
     double B =(double) pic[j][i].b;
     double intensity = 0;
     double hue = 0;
     double saturation = 0;
     int resultHue = 0;
     double resultSaturation = 0;
     int resultIntensity = 0;

   intensity = (R + G + B) / 3;

   if ((R + G + B) == 765) {
      saturation = 0;
      hue = 0;
        }

  double minimum = min(R, min(G, B));

  if (intensity > 0) {
   saturation = 1 - minimum / intensity;
   }

  else if (intensity == 0) {
   saturation = 0;
   }            

  temp = (R - (G/2) - (B/2)) / (sqrt((R*R) + (G*G) + (B*B) - (R*G) - (R*B) - (G*B)));
  if (G >= B) {
    hue = acos(temp); 
    outputFile<<"1\. temp = "<<temp<<", H = "<<hue<<endl;
   }

  else if (B > G) {     
    hue = 360 - acos(temp);
    outputFile<<"2\. temp = "<<temp<<", H = "<<hue<<endl;
   }

  resultHue = (int) hue;
  resultSaturation = saturation;
  resultIntensity = (int) intensity; 

//outputFile2<<"image = "<<pic[j][i]<<endl;
outputFile<<"Red = "<<R<<", Green = "<<G<<", Blue =  "<<B<<endl;
outputFile<<"Hue  = "<<resultHue<<", Saturation = "<<resultSaturation<<", Intensity = "<<resultIntensity<<endl;

//converting HSI to RGB

int backR = 0, backG = 0, backB = 0;

if (resultHue == 0){
   backR = (int) (resultIntensity + (2 * resultIntensity * resultSaturation));
   backG = (int) (resultIntensity - (resultIntensity * resultSaturation));
   backB = (int) (resultIntensity - (resultIntensity * resultSaturation));
  }

else if ((0 < resultHue) && (resultHue < 120)) {
   backR = (int) (resultIntensity + (resultIntensity * resultSaturation) * cos(resultHue) / cos(60-resultHue));
   backG = (int) (resultIntensity + (resultIntensity * resultSaturation) * (1 - cos(resultHue) / cos(60-resultHue)));
   backB = (int) (resultIntensity - (resultIntensity * resultSaturation));
  }

else if ( resultHue == 120 ){
   backR = (int) (resultIntensity - (resultIntensity * resultSaturation));
   backG = (int) (resultIntensity + (2 * resultIntensity * resultSaturation));
   backB = (int) (resultIntensity - (resultIntensity * resultSaturation));
  }

else if ((120 < resultHue) && (resultHue < 240)) {
   backR = (int) (resultIntensity - (resultIntensity * resultSaturation));
   backG = (int) (resultIntensity + (resultIntensity * resultSaturation) * cos(resultHue-120) / cos(180-resultHue));
   backB = (int) (resultIntensity + (resultIntensity * resultSaturation) * (1 - cos(resultHue-120) / cos(180-resultHue)));
  }

else if (resultHue == 240) {
   backR = (int) (resultIntensity - (resultIntensity * resultSaturation));
   backG = (int) (resultIntensity - (resultIntensity * resultSaturation));
   backB = (int) (resultIntensity + (2 * resultIntensity * resultSaturation));
  }

else if ((240 < resultHue) && (resultHue < 360)) {
   backR = (int) (resultIntensity + (resultIntensity * resultSaturation) * (1 - cos(resultHue-240) / cos(300-resultHue)));
   backG = (int) (resultIntensity - (resultIntensity * resultSaturation));
   backB = (int) (resultIntensity + (resultIntensity * resultSaturation) * cos(resultHue-240) / cos(300-resultHue));
  }

//outputpic[j][i] = (int) (R + G + B); 
//outputFile2<<"output = "<<outputpic[j][i]<<endl;
outputFile2<<"Hue  = "<<resultHue<<", Saturation = "<<resultSaturation<<", Intensity = "<<resultIntensity<<endl;
outputFile2<<"Red = "<<backR<<", Green = "<<backG<<", Blue =  "<<backB<<endl;
}

outputFile.close();
cout << "\nRGB_HSI values printed as text file: RGB_HSI.text\n";
outputFile2.close();
cout << "\nHSI_RGB values printed as text file: HSI_RGB.text\n";

   return 0;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T17:25:19.797

问题出在这一行：

```
temp = (R - (G/2) - (B/2)) / (sqrt((R*R) + (G*G) + (B*B) - (R*G) - (R*B) - (G*B))); 
```

当 时`R = G = B`，你有一个除以零：

```
R² - G² - B² - RG - RB - GB = R² + R² + R² - R² - R² - R² = 0 
```

*我真的很惊讶它没有崩溃......*

在这种情况下，只需将 0 分配给色调。从您的链接：

> 为方便起见，中性色（白色、灰色和黑色）设置为 0°。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T17:25:34.923

`R = G = B`从其他人的回答来看，当您计算时似乎存在除以零的问题，`temp`而且从我可以告诉您的情况来看，您正在使用`degree`s 和三角函数，但他们期望`radian`s 即：

```
#include <cmath>
#include <iostream>

int main()
{
   double pi = atan(1)*4 ;
   std::cout << cos(180) << std::endl ;
   std::cout << cos(360) << std::endl ;
   std::cout << cos(pi) << std::endl ;
   std::cout << cos(2*pi) << std::endl ;   
} 
```

# c++ - Windows 8 上的 DLL 加载计数

> ID：15463670
> 
> 赞同：4
> 
> 时间：2013-03-17T17:14:37.630
> 
> 标签：c++, winapi

有谁知道 LDR_MODULE.LoadCount 在 Windows 8 上的位置？

下面的代码总是为引用计数打印 6：S 我用 RemoteDLLTool 检查，基地址和所有其他信息都是正确的。但是，LoadCount 是错误的，因为它始终为 6。我读到如果它是 6，则意味着 DLL 是动态加载的，如果是 -1，它是静态的。

还有一种方法可以只迭代链表而不必不断地 ReadProcessMemory？

我需要以某种方式计算引用计数。基本上，Windows 7 上的以下代码将告诉我加载 DLL 的次数。也就是对 DLL 的引用计数。

```
#include <winternl.h>

typedef struct _LDR_MODULE
{
    LIST_ENTRY              InLoadOrderModuleList;
    LIST_ENTRY              InMemoryOrderModuleList;
    LIST_ENTRY              InInitializationOrderModuleList;
    PVOID                   BaseAddress;
    PVOID                   EntryPoint;
    ULONG                   SizeOfImage;
    UNICODE_STRING          FullDllName;
    UNICODE_STRING          BaseDllName;
    ULONG                   Flags;
    SHORT                   LoadCount;
    SHORT                   TlsIndex;
    LIST_ENTRY              HashTableEntry;
    ULONG                   TimeDateStamp;
} LDR_MODULE, *PLDR_MODULE;

int GetModuleLoadCount()
{
    DWORD dwBytesRead = 0;
    PROCESS_BASIC_INFORMATION PBI = {0};
    HANDLE ProcessHandle = GetCurrentProcess();

    if (NT_SUCCESS(NtQueryInformationProcess(ProcessHandle, ProcessBasicInformation, &PBI, sizeof(PBI), &dwBytesRead)))
    {
        PEB_LDR_DATA LdrData;
        LDR_MODULE LdrModule;
        PPEB_LDR_DATA pLdrData = nullptr;
        PLDR_MODULE pLdrModule = nullptr;

        char* LdrDataOffset = reinterpret_cast<char*>(PBI.PebBaseAddress) + offsetof(PEB, Ldr);
        ReadProcessMemory(ProcessHandle, LdrDataOffset, &pLdrData, sizeof(pLdrData), &dwBytesRead);
        ReadProcessMemory(ProcessHandle, pLdrData, &LdrData, sizeof(LdrData), &dwBytesRead);

        LIST_ENTRY* Head = LdrData.InMemoryOrderModuleList.Flink;
        LIST_ENTRY* Next = Head;

        do
        {
            LDR_DATA_TABLE_ENTRY LdrEntry;
            LDR_DATA_TABLE_ENTRY* Base = CONTAINING_RECORD(Head, LDR_DATA_TABLE_ENTRY, InMemoryOrderLinks);

            if (ReadProcessMemory(ProcessHandle, Base, &LdrEntry, sizeof(LdrEntry), &dwBytesRead))
            {
                char* pLdrModuleOffset = reinterpret_cast<char*>(Head) - sizeof(LIST_ENTRY);
                ReadProcessMemory(ProcessHandle, pLdrModuleOffset, &pLdrModule, sizeof(pLdrModule), &dwBytesRead);
                ReadProcessMemory(ProcessHandle, pLdrModule, &LdrModule, sizeof(LdrModule), &dwBytesRead);

                if (LdrEntry.DllBase)
                {
                    std::cout<<"BaseAddress:     "<< LdrModule.BaseAddress<<std::endl;
                    std::cout<<"Reference Count: "<< LdrModule.LoadCount<<std::endl;
                }

                Head = LdrEntry.InMemoryOrderLinks.Flink;
            }
        }
        while (Head != Next);
    }
    CloseHandle(ProcessHandle);
    return 0;
} 
```

有关如何在 Windows 8 上执行相同操作的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-11-24T17:42:22.203

在 Windows 8.1 上测试。不保证这将适用于较新的窗口（例如 10，但是 - 根据文档应该可以工作）

```
#include <winternl.h>                   //PROCESS_BASIC_INFORMATION

// warning C4996: 'GetVersionExW': was declared deprecated
#pragma warning (disable : 4996)
bool IsWindows8OrGreater()
{
    OSVERSIONINFO ovi = { 0 };
    ovi.dwOSVersionInfoSize = sizeof( OSVERSIONINFO );

    GetVersionEx(&ovi);

    if( (ovi.dwMajorVersion == 6 && ovi.dwMinorVersion >= 2) || ovi.dwMajorVersion > 6 )
        return true;

    return false;
} //IsWindows8OrGreater
#pragma warning (default : 4996)

bool ReadMem( void* addr, void* buf, int size )
{
    BOOL b = ReadProcessMemory( GetCurrentProcess(), addr, buf, size, nullptr );
    return b != FALSE;
}

#ifdef _WIN64
    #define BITNESS 1
#else
    #define BITNESS 0
#endif

typedef NTSTATUS (NTAPI *pfuncNtQueryInformationProcess)(HANDLE,PROCESSINFOCLASS,PVOID,ULONG,PULONG);

//
//  Queries for .dll module load count, returns 0 if fails.
//
int GetModuleLoadCount( HMODULE hDll )
{
    // Not supported by earlier versions of windows.
    if( !IsWindows8OrGreater() )
        return 0;

    PROCESS_BASIC_INFORMATION pbi = { 0 };

    HMODULE hNtDll = LoadLibraryA("ntdll.dll");
    if( !hNtDll )
        return 0;

    pfuncNtQueryInformationProcess pNtQueryInformationProcess = (pfuncNtQueryInformationProcess)GetProcAddress( hNtDll, "NtQueryInformationProcess");
    bool b = pNtQueryInformationProcess != nullptr;
    if( b ) b = NT_SUCCESS(pNtQueryInformationProcess( GetCurrentProcess(), ProcessBasicInformation, &pbi, sizeof( pbi ), nullptr ));
    FreeLibrary(hNtDll);

    if( !b )
        return 0;

    char* LdrDataOffset = (char*)(pbi.PebBaseAddress) + offsetof(PEB,Ldr);
    char* addr;
    PEB_LDR_DATA LdrData;

    if( !ReadMem( LdrDataOffset, &addr, sizeof( void* ) ) || !ReadMem( addr, &LdrData, sizeof( LdrData ) ) ) 
        return 0;

    LIST_ENTRY* head = LdrData.InMemoryOrderModuleList.Flink;
    LIST_ENTRY* next = head;

    do {
        LDR_DATA_TABLE_ENTRY LdrEntry;
        LDR_DATA_TABLE_ENTRY* pLdrEntry = CONTAINING_RECORD( head, LDR_DATA_TABLE_ENTRY, InMemoryOrderLinks );

        if( !ReadMem( pLdrEntry , &LdrEntry, sizeof(LdrEntry) ) )
            return 0;

        if( LdrEntry.DllBase == (void*)hDll )
        {
            //  
            //  http://www.geoffchappell.com/studies/windows/win32/ntdll/structs/ldr_data_table_entry.htm
            //
            int offDdagNode = (0x14 - BITNESS) * sizeof(void*);   // See offset on LDR_DDAG_NODE *DdagNode;

            ULONG count = 0;
            char* addrDdagNode = ((char*)pLdrEntry) + offDdagNode;

            //
            //  http://www.geoffchappell.com/studies/windows/win32/ntdll/structs/ldr_ddag_node.htm
            //  See offset on ULONG LoadCount;
            //
            if( !ReadMem(addrDdagNode, &addr, sizeof(void*) ) || !ReadMem( addr + 3 * sizeof(void*), &count, sizeof(count) ) )
                return 0;

            return (int)count;
        } //if

        head = LdrEntry.InMemoryOrderLinks.Flink;
    }while( head != next );

    return 0;
} //GetModuleLoadCount 
```

注入 .dll 的用法：

```
// Someone reserved us, let's force us to shutdown.
while( GetModuleLoadCount( dll ) > 1 )
    FreeLibrary(dll);

FreeLibraryAndExitThread(dll, 0); 
```

**（更新 3.12.2016）**但是请注意 - 建议在主线程中使用此功能。主要问题是当您迭代 dll 时 - dll 也可以被释放，之后“while-loop”会无限挂起。

如果侧线程正在释放 dll，这种令人惊讶的 dll 删除也可能发生在主线程中，但这种情况很少发生。

# c# - C# 中有类似代码同义词的东西吗？

> ID：15463672
> 
> 赞同：4
> 
> 时间：2013-03-17T17:14:51.073
> 
> 标签：c#

例如我有一些代码：

```
if (myArray[i, j, k] == someValue)
  myArray[i, j, k] = someOtherValue;
else
  throw new Exception(string.Format("value {0} is wrong!", myArray[i, j, k])); 
```

而且好像有点危险。我想要一些“代码同义词”，比如：

```
var xx => myArray[i, j, k];
if (xx == someValue)
  xx = someOtherValue;
else
  throw new Exception(string.Format("value {0} is wrong!", xx)); 
```

where`xx`不是 的值`myArray[i, j, k]`，而是该代码的同义词，并且`=>`是该构造的某种声明语法。

我想拥有这个功能，以确保多次`myArray[i, j, k]`使用将是完全相同的代码，而不会有进入`myArray[j, i, k]`某个地方的风险。

可能是 C# 可以做类似的事情，而没有丑陋的语法？我的意思是安全代码，而不是不安全的内存指针。或者也许我的观点有问题？

* * *

对于我的想法可能不正确的定义，我深表歉意。我想使用这个技巧（“代码同义词”或类似的东西）作为语言的常规功能（？或编译器等），不仅仅是在这种情况下。专门的类或函数在特定情况下是好的，但通常它们会导致代码量的显着增加，我想避免这种情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T18:07:51.830

可以为此使用一些功能吗？例如：

在您的代码中：

```
UpdateElement(ref myArray[i, j, k], someValue, someOtherValue); 
```

和功能：

```
void UpdateElement(ref int element, int compareWith, int value)
{
     if (element == compareWith)
         element = value;
     else
         throw new Exception(string.Format("Value {0} is wrong!", element));
} 
```

UPD：方法从“TryUpdateElement”重命名为“UpdateElement”，因为 Try.. 方法通常不会引发异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T17:36:58.073

您可以实现自己的矩阵类型来存储实际索引

```
public class Matrix<T>
{
    private T[, ,] _array;

    public Matrix(int sizeX, int sizeY, int sizeZ)
    {
        _array = new T[sizeX, sizeY, sizeZ];
    }

    public T this[int i, int j, int k]
    {
        get { return _array[i, j, k]; }
        set { _array[i, j, k] = value; }
    }

    public int CurrentI { get; set; }
    public int CurrentJ { get; set; }
    public int CurrentK { get; set; }

    public void SetCurrentCell(int i, int j, int k)
    {
        CurrentI = i;
        CurrentJ = j;
        CurrentK = k;
    }

    public T Current
    {
        get { return _array[CurrentI, CurrentJ, CurrentK]; }
        set { _array[CurrentI, CurrentJ, CurrentK] = value; }
    }

    public static implicit operator T(Matrix<T> matrix)
    {
        return matrix.Current;
    }

    // The assignment operator (=) cannot be overloaded. But we can overload |
    // instead, allowing us to write: m |= value in order to perform an assignment.
    public static Matrix<T> operator |(Matrix<T> m, T value)
    {
        m.Current = value;
        return m;
    }
} 
```

你可以像这样使用它：

```
var m = new Matrix<int>(3, 3, 3);
m[0, 2, 1] = 77;
m.SetCurrentCell(0, 2, 1);
m.Current = 88;
int value = m; // Using the implicit operator and the current indexes
m |= 20; // Using |= as assignment operator 
```

* * *

泛型方法的缺点是实现数字运算变得更加困难（诸如 +、-、*、/ 之类的数学运算未在泛型类型上定义）。但是您可以在实现数值计算的派生类中解析泛型类型

```
public class DoubleMatrix : Matrix<double> {
    public static DoubleMatrix operator +(DoubleMatrix a, DoubleMatrix b)
    {
        //TODO: Implement + operator
        return m;
    }

    //TODO: Implement other operators
} 
```

* * *

C# 7.0 引入了 ref locals 允许您这样做

```
ref int xx = ref myArray[i, j, k];
if (xx == someValue)
    xx = someOtherValue;
else
    throw new Exception(string.Format("value {0} is wrong!", xx)); 
```

请注意，您不仅获得同义词，而且获得引用，这意味着数组索引仅被评估一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T17:17:58.283

您可以为此使用匿名代表。

```
var get_xx = delegate(){ return myArray[i, j, k];};
var set_xx = delegate(int v){ myArray[i, j, k] = v;};

if (get_xx() == someValue)
  set_xx(someOtherValue);
else
  throw new Exception(string.Format("value {0} is wrong!", get_xx())); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T17:19:48.267

最后一句话要求做出明显的回应。看来您想使用代码生成器之类的东西。

像 C 预处理器这样的东西似乎符合要求：

```
#define xx myArray[i, j, k] 
```

好吧，这确实不是……通常的“观点”，但好消息是，您可以在 C# 项目中简单地使用 CPP 预处理器。

想法：

*   使其成为预构建步骤。
*   从 .cs.cpp 文件生成 .cs

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-17T17:50:00.477

您可以为自己编写一个函数，允许您执行以下操作：

```
UpdateMatrixValueIf(myArray, i, j, k, (v) => v == someValue, someOtherValue); 
```

并像这样实现它：

```
public void UpdateMatrixValueIf<T>(T[,,] array, int i, int j, int k, Func<T, bool> check, T newValue)
{
    if (check(array[i, j, k]))
        array[i, j, k] = newValue;
    else
        throw new Exception(string.Format("Value {0} is wrong!", array[i, j, k]));
} 
```

当然，如果你不止一次地这样做，那么做这样的事情才真正有意义。否则答案是否定的，你不能以更好或更安全的方式来做。您可以使用一些疯狂的反射方法，但我认为这在这里不合适。只要确保这样的代码部分经过单元测试，您就不会遇到索引问题。

# java - JOGL Confusion - 纹理是如何工作的？

> ID：15463674
> 
> 赞同：1
> 
> 时间：2013-03-17T17:14:53.263
> 
> 标签：java, opengl, textures, jogl

OpenGL 对我来说非常混乱，而且我不习惯很多图形术语等，这在许多教程中非常猖獗。我了解如何绘制三角形、圆形、四边形、多边形等，但现在我正在尝试了解纹理的工作原理。

有人能指出我理解纹理的正确方向吗？

因为我只能让 JOGL 在 Netbeans 中工作，所以我尝试将一个名为“Tiki Mask”的图像放入构建路径。当我运行它时，它没有抛出异常，所以我假设它找到了图像文件？

```
gl.glGenTextures(1, glu, 0);
    gl.glBindTexture(gl.GL_TEXTURE_2D, glu[1]);

    try {

        Texture tex = TextureIO.newTexture(new File("tikimask.jpg"), true);
         gl.glBegin(GL.GL_POLYGON);
    gl.glNormal3f(0,0,1);
        gl.glTexCoord2d(-tex.getWidth(), -tex.getHeight());
        gl.glVertex2d(-25, -25);
        gl.glTexCoord2d(-tex.getWidth(), tex.getHeight());
        gl.glVertex2d(1.0f,0);
        gl.glTexCoord2d(tex.getWidth(), tex.getHeight());
        gl.glVertex2d(.05f, .05f);
        gl.glTexCoord2d(tex.getWidth(), -tex.getHeight());
        gl.glVertex2d(0, .05f);
    gl.glEnd();
    gl.glFlush();

    } catch (IOException ex) {
        Logger.getLogger(SimpleJOGLwee.class.getName()).log(Level.SEVERE, null, ex);
    } catch (GLException ex) {
        Logger.getLogger(SimpleJOGLwee.class.getName()).log(Level.SEVERE, null, ex);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T17:47:05.947

您的问题是您从未绑定过加载的纹理。尝试添加这些行：

```
tex.enable();
tex.bind(); 
```

加载纹理后。

另外，我建议在你的初始化函数中加载你的纹理，而不是你的绘图函数，然后在你的绘图函数中简单地启用和绑定它们。

# c# - 如何在 Visual Studios 2012 C# Windows Phone 中更改 Windows 窗体元素的位置

> ID：15463676
> 
> 赞同：0
> 
> 时间：2013-03-17T17:15:02.807
> 
> 标签：c#, windows-phone-8

所以在我的 中`designer.xaml`，我有多个 Ellipses 用作自定义按钮。

我想在调用事件时更改椭圆的位置。据我所知，我知道 2012 年之前有一个 Location 属性，您可以从 cs 代码中更改它，但我在 2012 年没有看到它，唯一可见的替代品是`Margin.Top`,`Margin.Left`等。

属性，显然是返回值，不能从代码中更改。那么我该如何更改位置呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T17:23:50.593

您可以在后面的代码中更改椭圆 `Margin.Top`和`Margin.Left`（位置），如下例所示：

```
ellipse.Margin = new Thickness(left, top, 0, 0); 
```

# java - 从 System.in 获取并使用所需项目的编号

> ID：15463678
> 
> 赞同：0
> 
> 时间：2013-03-17T17:15:11.430
> 
> 标签：java

我有一些课程，例如`UniversityDepartment`&`PolytechnicDepartment`这两个课程扩展了`AcademicDepartment`课程。问题要我这样做。可以有`AcademicDepartment`研究生课程和研究生课程。部门将是 2 `University`& `Polytechnic`。一个部门是理工学院还是大学，取决于研究生课程中实验室的数量。因此，如果我们在预科或研究生课程中，我认为用户必须从键盘输入它，如果我们在预科，我们还必须被问到如果我们在理工学院或大学，我们有多少个实验室。那么我将如何做到这一点？我会给你一个我的代码示例：

```
import java.io.*;

public class  AcademicDepartment {
    private String names;
    private String labs;
    private int teachers;
    private int graduates;
    // private boolean studies;

    public void infostudies() throws IOException{
        System.out.println("Enter the department you want."
            + "Press 1 for pre-graduate program  or 2 for after-graduate program" );  
        String studies = "";  
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));  
        studies = br.readLine(); 

        if (studies == 1){
            System.out.println("You are in pre-graduate program");
            System.out.println("Enter the number of labs");
            String labs = ""; 
            BufferedReader br1 = new BufferedReader(new InputStreamReader(System.in));
            labs = br1.readLine();

            if (labs > 5){
                System.out.println("The department is polytechnic");
            }
        }        

        if (labs < 5 ){
            System.out.println("The department is University");
        }
        else
        {
            System.out.println("Wrong number try again");
        }
    }    

    public AcademicDepartment(String names,String labs,int teachers,int graduates){
        names = new String(names);
        this.labs = labs;
        this.teachers = teachers;
        this.graduates = graduates;
    }

    public void printdepartmentinfo(){
        System.out.println("The names are:" + names);
        System.out.println("The labs are:" + labs);
        System.out.println("The GRADUATES are:" + graduates);
        System.out.println("The teachers are:" + teachers);   
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T17:56:48.200

关于代码有一些不幸的事情。

一个问题是您正在比较字符串变量`studies`和`labs`整数文字。这是编译器不允许的。通常，要么将字符串变量（使用`String.equals`）与字符串文字进行比较，要么尝试`Integer.parseInt`在与整数进行比较之前使用解释字符串变量。

另一个问题是方法`infostudies`的一些局部变量与类的字段具有相同的名称`AcademicDepartment`。这是允许的，但这是不必要的混乱。

例如，您将处理 variable `studies`，但我将向您展示我对 variable 的含义`labs`。

不要这样做：

```
public class AcademicDepartment {
    ...
    public void infostudies() throws IOException {
        ...
        if (studies == 1) {
            ...
            String labs = "";
            ...
            if (labs > 5){ // Compare String with int? Won't compile!
                ...
            }
            ...
        }
        if (labs < 5) { // Can't see the "labs" defined above!
            ...
        }
        ...
    }
} 
```

做这个：

```
public class AcademicDepartment {
    ...
    public void infostudies() throws IOException {
        ...
        if (studies == 1) {
            ...
            String labs = "";
            ...
            try {
                   int labCount = Integer.parseInt(labs);
                   if (labCount > 5) {
                       System.out.println("The department is polytechnic");
                   } else {
                       System.out.println("The department is University");
                   }
            } catch (NumberFormatException formatErr) {
                System.out.println("Sorry, couldn't understand your number of labs.");
            }
            ...
        }
        ...
    }
} 
```

# asp.net - 创建动态数量的 GridView

> ID：15463681
> 
> 赞同：2
> 
> 时间：2013-03-17T17:15:23.487
> 
> 标签：asp.net, gridview

我需要一堆 GridView 来显示在我的页面上。**我有一个名为dataList**的部分对象列表列表，并且**dataList**中的每个列表都应绑定到其中一个 GridView。

我有这个

```
List<List<Section>> dataList;
foreach (List<Section> sectionList in dataList)
{
    GridView gv = new GridView();
    gv.DataSource = sectionList
    gv.DataBind();
} 
```

和我的标记：

```
 <asp:GridView runat="server" ID="gv" AutoGenerateColumns="true"/> 
```

但是当我加载页面时，我什么也看不到。如何显示我创建的所有 GridView？我已经成功地将每个 GridView 绑定到 dataList 列表的 foreach 循环吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T17:23:39.093

删除您的 Gridview 标记并使用 PlaceHolder 控件添加动态 Gridview，试试这个：

```
<asp:PlaceHolder ID="PlaceHolder1" runat="server"/> 
```

在 C# 中

```
int i = 1;
foreach (List<Section> sectionList in dataList)
{
    GridView gv = new GridView();
    //generate dynamic id        
    gv.Id = "gv" + i; i++;
    gv.AutoGenerateColumns="true";
    gv.DataSource = sectionList
    gv.DataBind();
    PlaceHolder1.Controls.Add(gv);
} 
```

# windows-phone-7 - 如何从已包含在该单选按钮模板中的按钮的单击事件中识别单选按钮

> ID：15463683
> 
> 赞同：0
> 
> 时间：2013-03-17T17:15:30.203
> 
> 标签：windows-phone-7, event-handling, radio-button, controltemplate

这适用于 Windows Phone 7 应用程序，这是我正在使用的模板代码：

```
<Style x:Key="RadioButtonStyle1" BasedOn="{StaticResource PhoneRadioButtonCheckBoxBase}" TargetType="RadioButton">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="RadioButton">
                    <Grid Background="Transparent">
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal"/>
                                <VisualState x:Name="MouseOver"/>
                                <VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Visibility" Storyboard.TargetName="EnabledCheckBackground">
                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <Visibility>Collapsed</Visibility>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Visibility" Storyboard.TargetName="PressedDarkCheckBackground">
                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <Visibility>Visible</Visibility>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Visibility" Storyboard.TargetName="PressedLightCheckBackground">
                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <Visibility>Visible</Visibility>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Fill" Storyboard.TargetName="CheckMark">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneRadioCheckBoxCheckBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Visibility" Storyboard.TargetName="EnabledCheckBackground">
                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <Visibility>Collapsed</Visibility>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Visibility" Storyboard.TargetName="DisabledDarkCheckBackground">
                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <Visibility>Visible</Visibility>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Visibility" Storyboard.TargetName="DisabledLightCheckBackground">
                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <Visibility>Visible</Visibility>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Fill" Storyboard.TargetName="CheckMark">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneRadioCheckBoxCheckDisabledBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ContentContainer">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneDisabledBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="CheckStates">
                                <VisualState x:Name="Checked">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Visibility" Storyboard.TargetName="CheckMark">
                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <Visibility>Visible</Visibility>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Unchecked"/>
                                <VisualState x:Name="Indeterminate"/>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <Grid Margin="{StaticResource PhoneTouchTargetLargeOverhang}">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="32"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Ellipse x:Name="EnabledCheckBackground" Fill="{TemplateBinding Background}" HorizontalAlignment="Left" Height="32" IsHitTestVisible="False" VerticalAlignment="Center" Width="32"/>
                            <Canvas HorizontalAlignment="Left" Height="32" IsHitTestVisible="False" Opacity="{StaticResource PhoneDarkThemeOpacity}" VerticalAlignment="Center" Width="32">
                                <Ellipse x:Name="PressedDarkCheckBackground" Fill="{StaticResource PhoneRadioCheckBoxPressedBrush}" Height="32" Visibility="Collapsed" Width="32"/>
                                <Ellipse x:Name="DisabledDarkCheckBackground" Fill="{StaticResource PhoneRadioCheckBoxDisabledBrush}" Height="32" Visibility="Collapsed" Width="32"/>
                            </Canvas>
                            <Canvas HorizontalAlignment="Left" Height="32" IsHitTestVisible="False" Opacity="{StaticResource PhoneLightThemeOpacity}" VerticalAlignment="Center" Width="32">
                                <Ellipse x:Name="PressedLightCheckBackground" Fill="{StaticResource PhoneRadioCheckBoxPressedBrush}" Height="32" Stroke="{StaticResource PhoneForegroundBrush}" StrokeThickness="{StaticResource PhoneStrokeThickness}" Visibility="Collapsed" Width="32"/>
                                <Ellipse x:Name="DisabledLightCheckBackground" Fill="{StaticResource PhoneRadioCheckBoxDisabledBrush}" Height="32" Stroke="{StaticResource PhoneDisabledBrush}" StrokeThickness="{StaticResource PhoneStrokeThickness}" Visibility="Collapsed" Width="32"/>
                            </Canvas>
                            <Ellipse x:Name="CheckMark" Fill="{StaticResource PhoneRadioCheckBoxCheckBrush}" HorizontalAlignment="Center" Height="16" IsHitTestVisible="False" Visibility="Collapsed" VerticalAlignment="Center" Width="16"/>
                            <ContentControl x:Name="ContentContainer" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" Grid.Column="1" Foreground="{TemplateBinding Foreground}" FontSize="{TemplateBinding FontSize}" FontFamily="{TemplateBinding FontFamily}" HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="12,0,146,-2" Padding="{TemplateBinding Padding}" VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"/>
                        </Grid>
                        <Button Content="Play" Margin="0,0,2,-1" HorizontalAlignment="Right" Width="159" Click="PlayButton_Click"/>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

我想创建一个每个按钮都将使用的单击事件，但在该事件处理程序中，我需要能够识别包含被单击按钮的单选按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:37:26.950

可能有“更好”的方法来实现你想要做的事情，但你可以将`sender`传递给点击事件处理程序的 , 转换为 a`FrameworkElement`然后你可以访问它然后你可以`DataContext`适当地转换它以获得你想要的任何信息要求关于有问题的项目。

# java - 如何导入我下载的这些 Java 类？

> ID：15463688
> 
> 赞同：3
> 
> 时间：2013-03-17T17:15:54.393
> 
> 标签：java, class, import, jlayer

我是编程的初学者，我需要知道如何将我从 Internet 获得的类导入到我的文本文件中。我下载`JLayer`用于编写 MP3 播放器，但打字`import javazoom.jl.player.Player;`不起作用，不像`import javax.swing.JOptionPane;`.

我在一些论坛上读到我应该将`JLayer`库移动到某个地方以便 import 语句可以工作，但具体在哪里？我的`JLayer`图书馆目前在我的`Downloads`文件夹中。我应该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T17:16:43.530

将包含这些类的 JAR 放在您的 CLASSPATH 中。您应该知道如何对 javac.exe 和 java.exe 使用 -classpath 参数。阅读工具文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T17:21:00.240

如果您使用的是 Eclipse 或类似的 IDE，请选择您的项目，然后执行以下操作：

```
File -> Properties -> Java Build Path -> Libraries (tab) -> Add External Jars 
```

使用查找器选择您的`.jar`文件，然后 Eclipse 将为您完成其余的工作。

**注意**：Eclipse 只会引用`.jar`当前位置的文件，不会将其复制`.jar`到您当前的项目中。

* * *

如果您不使用 IDE，duffymo 的答案将为您工作。

# parsing - RTP H.264 数据包解包器

> ID：15463692
> 
> 赞同：2
> 
> 时间：2013-03-17T17:16:11.183
> 
> 标签：parsing, h.264, packet, rtp, rfc

通常对于视频，RTP 数据包的标记位指示 RTP 的最后一个数据包。那么，这样可以保证每个数据包接收 1 帧还是可以接收多个？

在解包之外的情况下，我必须制作一个解析器来分离 H.264 帧？

如果我每个 RTP 数据包可以获得超过一帧，是否有可能获得下一帧的一部分？还是 RTP 数据包中的所有帧（即使完成了多个帧）？

最好的祝福，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T20:07:18.313

[RFC 6184“H.264 视频的 RTP 有效负载格式”](https://www.rfc-editor.org/rfc/rfc6184)对提出的问题提供了答案。它可以是两种方式：每个数据包 2+ 个 NAL 单元，以及 1 个 NAL 单元在 2+ 个数据包上分段。

请参阅下面的报价：

> 5.7.1。单次聚合包 (STAP)
> 
> 每当聚合所有共享相同 NALU 时间的**NAL 单元**时，都应该使用单次聚合数据包 (STAP) 。

和

> 5.8\. 碎片单元 (FU)
> 
> 这种有效载荷类型允许**将一个 NAL 单元分成几个 RTP 数据包**。在应用层这样做而不是依赖较低层的分片（例如，通过 IP）具有以下优点：

# android - 更改文本大小后适合文本视图的内容

> ID：15463695
> 
> 赞同：3
> 
> 时间：2013-03-17T17:16:20.203
> 
> 标签：android

我有文本视图：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:layout_width="match_parent"
          android:layout_height="match_parent"
          android:background="@drawable/item_table_light_grey"
          android:gravity="center"
          android:orientation="vertical" >

    <TextView
            android:id="@android:id/text1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="#000000"
            />
</LinearLayout> 
```

当我使用代码更改文本大小时

```
TextView textView = (TextView) view.findViewById(android.R.id.text1);
textView.setTextSize(adapter.getTextSize()); 
```

尽管文本大小已成功更改，但 textView 的宽度和高度未更改。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-04-02T20:47:29.423

一旦显示，Android 不会使用“wrap_content”刷新视图布局。

所以如果你添加一个子视图，或者动态地修改内容，你就完蛋了。

为了解决这个问题，我编写了一个静态类，它重新计算大小并强制使用“wrap_content”更新视图的布局。代码和使用说明可在此处获得：

[https://github.com/ea167/android-layout-wrap-content-updater](https://github.com/ea167/android-layout-wrap-content-updater)

另一种解决方案是给layout_width和layout_height设置固定值，在TextView上添加gravity="center"，去掉wrap_content

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-14T07:40:35.063

对于现在和将来可能需要这个的任何人，我做了一个技巧来解决这个问题。如果您的 TextVew 在 LinearLayout 内，例如。，`orientation="vertical"`然后把这些：

```
android:layout_height="wrap_content"
android:layout_weight="1" 
```

当文本更改时，您的 TextView 将更新其高度。我不知道里面发生了什么，但这对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-09T17:50:12.080

此问题的另一个解决方案是以编程方式删除 TextView，然后再次添加它。

```
linearLayout.removeView(textView)
linearLayout.addView(textView) 
```

我知道这听起来很愚蠢，但它确实有效。在我的情况下，调用无效无效，只有这个有效。

根据您的实现，您需要处理其父级中的视图索​​引

# .net - 处理空/空字符串

> ID：15463697
> 
> 赞同：0
> 
> 时间：2013-03-17T17:16:31.160
> 
> 标签：.net, null, string

在 .NET 4 出来之前，我们一直在做这样的事情来检查 null / 空字符串：

```
String s;
if ((s + "").Trim().Length == 0)
{
    //do something
} 
```

虽然上述方法对我们来说效果很好，但我知道在 .NET 4 中，我们有一种`IsNullOrWhiteSpace`方法可以做类似的事情。

我的问题是，哪个更好？我们应该改用内置函数吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T17:21:15.407

在 .NET 4 上，我肯定会使用内置方法。毕竟，它*准确地说*明了你想要做什么。

如果您在 .NET 4 之前遇到困难，为什么不使用：

```
if (s == null || s.Trim() == "") 
```

或者

```
if (s == null || s.Trim().Length == 0) 
```

? 两者都说明了您想要实现的目标。

我绝对*不会*在这里使用字符串连接。抛开性能不谈，您对字符串连接不感兴趣。每当你发现你的代码做的事情实际上不是你想要实现的一部分时，你应该为了可读性而尝试改进它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T17:21:02.500

我个人使用`IsNullOrWhiteSpace`，主要是因为使用它可以使代码更清晰易读并且可以处理更多案例（`WhiteSpace`部分）。这取决于您的偏好，因为这两种方法的作用几乎相同。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T01:51:42.233

为什么不编写一个辅助方法来实现`IsNullOrWhiteSpace`.NET 4 之前的功能？就像

```
public static boolean IsNullOrWhiteSpace(string input)
{
    return string.IsNullOrEmpty(input) || input.Trim() == string.Empty;
} 
```

不要像乔恩所说的那样在这里使用连接。检查空/空不是一个好习惯。

# android - 拍摄许多照片，显示并保存在 android 中

> ID：15463698
> 
> 赞同：0
> 
> 时间：2013-03-17T17:16:36.023
> 
> 标签：android, camera, save

我正在为 android 开发一个新的应用程序，询问用户他想捕获多少图像，显示全部然后保存。

拍摄的照片数量正常，但是当我进入显示器的布局时，只显示一张照片，我尝试“切换”而不是全部写入，但似乎没有任何效果。

有没有特定的代码可以做到这一点？！

# java - 使用 png 纹理时使用 opengl（通过 lwjgl）的混合问题

> ID：15463700
> 
> 赞同：0
> 
> 时间：2013-03-17T17:16:38.237
> 
> 标签：java, opengl, lwjgl, alphablending

在 OpenGL 中使用混合时，我有一个（希望是）小问题。目前我使用 LWJGL 和 Slick-Util 来加载纹理。纹理本身是一个 2048x2048 png 图形，我在其中存储大小为 128x128 的图块，因此每行/列有 16 个精灵。由于 glTexCoord2f() 使用标准化坐标，我编写了一个小函数来缩放整个图像以仅显示我想要的精灵。它看起来像这样：

```
private Rectangle4d getTexCoord(int x, int y) {
    double row = 0, col = 0;
    if(x > 0)
        row = x/16d;
    if(y > 0)
        col = y/16d;

    return new Rectangle4d(row, col, 1d/16d, 1d/16d);
} 
```

（Rectangle4d 只是一种将 x、y、宽度和高度存储为双坐标的类型）

现在的问题是，一旦我使用了这些坐标，精灵就可以正确显示，透明度也可以正常工作，只是其他一切都变得明显变暗（我猜它变得透明更正确，但是因为 ClearColor 是黑色的）。然而，精灵本身是正确绘制的。我已经尝试将所有 glColor3d(..) 更改为 glColor4d(..) 并将 alpha 设置为 1d，但这并没有改变任何东西。精灵是当前唯一的图像，其他一切都只是彩色的四边形。

这是我初始化 OpenGL 的方法：

```
 glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrtho(0, WIDTH, HEIGHT, 0, 1, -1);
    glMatrixMode(GL_MODELVIEW);
glEnable(GL_TEXTURE_2D);
    glEnable(GL_BLEND);
    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA); 
```

这是我加载精灵的方式（使用 slick-util）：

```
texture = TextureLoader.getTexture("PNG", ResourceLoader.getResourceAsStream("res/sprites.png")); 
```

最后我像这样渲染它（使用顶部提到的辅助函数 getTexCoord() ）：

```
 texture.bind();
    glColor4d(1, 1, 1, 1);
    glBegin(GL_QUADS);
    {
        Rectangle4d texCoord = getTexCoord(0, 0);
        glTexCoord2f((float)texCoord.getX(), (float)texCoord.getY());
        glVertex2i((Game.WIDTH-PLAYERSIZE)/2, (Game.HEIGHT-PLAYERSIZE)/2);

        glTexCoord2f((float)texCoord.getX()+(float)texCoord.getWidth(), (float)texCoord.getY());
        glVertex2i((Game.WIDTH+PLAYERSIZE)/2, (Game.HEIGHT-PLAYERSIZE)/2);

        glTexCoord2f((float)texCoord.getX()+(float)texCoord.getWidth(), (float)texCoord.getY()+(float)texCoord.getHeight());
        glVertex2i((Game.WIDTH+PLAYERSIZE)/2, (Game.HEIGHT+PLAYERSIZE)/2);

        glTexCoord2f((float)texCoord.getX(), (float)texCoord.getY()+(float)texCoord.getHeight());
        glVertex2i((Game.WIDTH-PLAYERSIZE)/2, (Game.HEIGHT+PLAYERSIZE)/2);
    }
    glEnd(); 
```

结果是这样的（精灵被正确绘制，只是其他一切都更暗/透明）： ![将纹理分配给四边形后的外观](../Images/de52363a63f4f5d34ed1501d614d3fa9.png) 没有纹理（只是一个灰色四边形），它看起来像这样（现在一切都正确绘制，除了我没有精灵）： ![在没有为四边形分配纹理的情况下看起来如何](../Images/99d724e23fd542abbb31260d2d27c7f4.png)

感谢所有费心阅读本文的人！

* * *

**编辑**：

一些附加信息，来自我试图找到问题的尝试：这是我将 ClearColor 设置为白色时的外观（使用 glClearColor(1, 1, 1, 1) ）： ![将 ClearColor 设置为白色](../Images/937d787cbc55336ced335f81434b273b.png)

我尝试的另一件事是在我绘制播放器之前启用混合，并在我完成绘制后再次禁用它： ![仅在绘制播放器时使用混合时会发生这种情况（blackclear）](../Images/bd1bca882222cb0aba069baa09eeabda.png)

现在稍微好一点了，但还是明显变暗了。在这种情况下，它似乎真的“更暗”而不是“更透明”，因为当我使用白色作为清晰的颜色时它是相同的（同时仍然只在需要时启用混合并在之后立即禁用它），如下所示： ![仅在绘制播放器时使用混合时会发生这种情况（whiteclear）](../Images/b2a277aecb6103e451e945e379d1480a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:07:05.540

我阅读了一些相关问题并最终找到了解决方案（[链接](https://stackoverflow.com/questions/13545852/blended-textures-show-up-fine-but-ordinary-coloured-shapes-do-not?rq=1)）。显然，当我想渲染无纹理对象（在这种情况下为彩色四边形）时，我不能/不应该一直启用 GL_TEXTURE_2D ！

所以现在，我只在渲染精灵之前启用它，然后在绘制精灵后再次禁用它。它现在完美运行！:)

# ios - IOS App将不再通过Testflight安装，我该怎么办

> ID：15463709
> 
> 赞同：0
> 
> 时间：2013-03-17T17:17:27.440
> 
> 标签：ios, testflight, ios-provisioning

我开始使用 Adob​​e AIR SDK 构建一个 IOS 应用程序并为 iPad 打包。我使用 TestFlightApp 来向用户发送构建，并且效果很好。

在遇到 AIR SDK 的一些问题后，我使用本机 Objective-c / xcode 重新编码了应用程序。我能够使用相同的配置文件感觉通过 xcode 构建和测试到我的 iPad，我保持应用程序的域完全相同。

我能够构建和 IPA 并将其作为新构建上传到 TestFlight，但用户收到错误消息，说他们不允许在他们的设备上安装。我让他们删除了旧应用程序，并尝试让他们通过 iTunes 删除并替换配置文件。仍然得到同样的错误。

想要一些关于我应该做些什么来安装这些构建并再次工作的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T18:05:53.247

您可能使用用户不属于的个人资料签署了该应用程序。检查您的签名过程并确保您使用正确的配置文件进行签名，并且用户注册的设备是该配置文件的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T11:23:36.233

确保您授予用户权限 登录到 TestFlightApp 帐户
选择要编辑的应用程序
选择要编辑的构建
单击左侧面板中的权限菜单
现在选择（选中/取消选中）您要允许安装的设备
最后单击按钮“更新”或“更新并通知”

# ios - 如何使用 NSUserDefaults 动态分配空间？

> ID：15463710
> 
> 赞同：0
> 
> 时间：2013-03-17T17:17:36.473
> 
> 标签：ios, nsarray, nsuserdefaults

我之前使用过 NSUserDefaults 来为我的应用程序的设置部分存储一些变量。

但是现在我正在制作一个食谱应用程序，用户可以在其中输入自己的食谱并保存它们。每个菜谱都有一个标题、描述、日期等。所以我想我需要一个数组来保存每个菜谱。但是我将如何动态添加每个新食谱？

我的意思是我将开始将配方保存在阵列的下一个位置？如果用户删除一个配方并且数组中有一个空闲位置会发生什么？

我的逻辑在保存数据方面是正确的吗？你会怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T17:24:06.320

`NSUserDefaults`不是你要找的。从技术上讲，它可以满足您的需求，但您最好创建一个自定义类，该类具有所有配方特征的属性，并使该类符合`<NSCoding>`协议，以便您可以将其转换为数据并编写它到一个文件。

我知道如果您以前从未这样做过，这听起来可能很复杂，但这真的不算太糟糕。

[这是一个实现的示例`<NSCoding>`。](http://soff.es/archiving-objective-c-objects-with-nscoding)忽略它显示您将数据保存到的结尾部分`NSUserDefaults`。

要保存您的数据，而不是使用 NSUserDefaults，[请查看此问题](https://stackoverflow.com/questions/7497912/problem-writing-nsdata-in-my-device)。对于一个小任务来说，它可能看起来有很多代码，但这个概念非常简单。

编辑：

要将您的对象转换为数据，假设您已经`<NSCoding>`在自定义类中实现：

```
YourClass* someObject;

// do whatever you do to fill the object with data

NSData* data = [NSKeyedArchiver archivedDataWithRootObject:someObject];

/*
 Now we create the path to the documents directory for your app
 */

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, 
    NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];

/*
 Here we append a unique filename for this object, in this case, 'Some_Recipe'
 */

NSString* filePath = [documentsDirectory stringByAppendingString:@"Some_Recipe"];

/*
 Finally, let's write the data to our file
 */

[data writeToFile:filePath atomically:YES];

/*
 We're done!
 */ 
```

# asp.net-mvc - 为什么我不能将普通视图与 ApiController 一起使用？

> ID：15463711
> 
> 赞同：2
> 
> 时间：2013-03-17T17:17:44.193
> 
> 标签：asp.net-mvc, visual-studio, asp.net-web-api

为什么我不能直接从创建视图`ApiController`？

两者都`Controller`只是`ApiController`接收和提供数据，为什么我不能`ApiController`输出和接收为视图格式化的数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T17:20:09.087

嗯，[`actually it can`](http://weblogs.asp.net/fredriknormen/archive/2012/07/17/asp-net-web-api-and-using-razor-the-next-step.aspx)。您可以使用[`RazorViewEngine`](http://razorengine.codeplex.com/)构建自定义媒体类型格式化程序，它将模型传递给 Razor 视图。

不幸的是，微软在使 Web Api 控制器不得不从与标准 MVC 控制器不同的基类派生方面做得非常糟糕。希望在未来的版本中，他们会修复这个设计。

作为替代方案，您可以看看[`ServcieStack`](http://www.servicestack.net/)它为您提供了一个非常好的接口来构建 RESTful API，它可以呈现任何类型的资源，包括来自单个服务的 HTML 视图。

# solr - 在 Solr SynonymFilterFactory 中使用 expand=true？

> ID：15463713
> 
> 赞同：5
> 
> 时间：2013-03-17T17:17:55.343
> 
> 标签：solr

Solr 文档解释了 SynonymFilterFactory 中 expand=true 的作用如下：

```
a synonym will be expanded to all equivalent synonyms. 
If it is false, all equivalent synonyms will be reduced to the first in the list. 
```

我想知道这到底是什么意思？如果有人可以详细说明它的作用，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T11:50:32.057

来自 Solr Wiki 上的 Solr [SynonymFilterFactory](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.SynonymFilterFactory)文档：

```
 # If expand==true, "ipod, i-pod, i pod" is equivalent to the explicit mapping:
 ipod, i-pod, i pod => ipod, i-pod, i pod

 # If expand==false, "ipod, i-pod, i pod" is equivalent to the explicit mapping:
 ipod, i-pod, i pod => ipod 
```

由于 Solr SynonymFilterFactory 现在已弃用，因此现在使用 SynonymGraphFilterFactory 类。这个答案仍然适用于 SynonymGraphFilterFactory。

# android - 如何为服务添加计时器？

> ID：15463718
> 
> 赞同：0
> 
> 时间：2013-03-17T17:18:20.420
> 
> 标签：android, android-service

我尝试将计时器添加到 OnCreate 方法、Onstart 甚至 AsyncTask，但程序会崩溃。不太清楚为什么！这是我的代码的一部分，在这种情况下，我添加到 OnStart。

```
@Override
    public void onCreate() {
        Toast.makeText(this, "My Service Created", Toast.LENGTH_LONG).show();
        Log.d(TAG, "onCreate");

    }
    private void startTimer()
    {           

        if (found != "Yes Found")
         {

            TimerTask updateProfile = new CustomTimerTask(MyService.this);
            timer.scheduleAtFixedRate(updateProfile, 0, 60*1000);

         }

    }
    @Override
    public void onDestroy() {
        Toast.makeText(this, "My Service Stopped", Toast.LENGTH_LONG).show();
        Log.d(TAG, "onDestroy");
        //spool.release();

    }

    @Override
    public void onStart(Intent intent, int startid) {

        Toast.makeText(this, "My Service Started", Toast.LENGTH_LONG).show();
        Log.d(TAG, "onStart");

        startTimer();

    } 
```

**定时器代码**

```
public class CustomTimerTask extends TimerTask {

            private Context context;
            private Handler mHandler = new Handler();

            // Write Custom Constructor to pass Context
            public CustomTimerTask(Context con) {
                this.context = con;

            }

            @Override
            public void run() {
                // TODO Auto-generated method stub

                  //some code here

            }

            } 
```

**错误信息**

```
03-17 13:16:35.661: E/AndroidRuntime(7634): FATAL EXCEPTION: main
03-17 13:16:35.661: E/AndroidRuntime(7634): java.lang.RuntimeException: Unable to start service com.example.saber.MyService@415c0510 with Intent { cmp=xxxx }: java.lang.NullPointerException
03-17 13:16:35.661: E/AndroidRuntime(7634):     at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:2387)
03-17 13:16:35.661: E/AndroidRuntime(7634):     at android.app.ActivityThread.access$1900(ActivityThread.java:127)
03-17 13:16:35.661: E/AndroidRuntime(7634):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1221)
03-17 13:16:35.661: E/AndroidRuntime(7634):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-17 13:16:35.661: E/AndroidRuntime(7634):     at android.os.Looper.loop(Looper.java:137)
03-17 13:16:35.661: E/AndroidRuntime(7634):     at android.app.ActivityThread.main(ActivityThread.java:4511)
03-17 13:16:35.661: E/AndroidRuntime(7634):     at java.lang.reflect.Method.invokeNative(Native Method)
03-17 13:16:35.661: E/AndroidRuntime(7634):     at java.lang.reflect.Method.invoke(Method.java:511)
03-17 13:16:35.661: E/AndroidRuntime(7634):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:976)
03-17 13:16:35.661: E/AndroidRuntime(7634):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:743)
03-17 13:16:35.661: E/AndroidRuntime(7634):     at dalvik.system.NativeStart.main(Native Method)
03-17 13:16:35.661: E/AndroidRuntime(7634): Caused by: java.lang.NullPointerException
03-17 13:16:35.661: E/AndroidRuntime(7634):     at com.example.saber.MyService.startTimer(MyService.java:67)
03-17 13:16:35.661: E/AndroidRuntime(7634):     at com.example.saber.MyService.onStart(MyService.java:86)
03-17 13:16:35.661: E/AndroidRuntime(7634):     at android.app.Service.onStartCommand(Service.java:438)
03-17 13:16:35.661: E/AndroidRuntime(7634):     at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:2370)
03-17 13:16:35.661: E/AndroidRuntime(7634):     ... 10 more 
```

**我到底应该在哪里添加计时器？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T18:13:02.440

你需要了解什么是a `NullPointerException`。这意味着您正在尝试调用某个对象的方法，即`null`.

您列出的堆栈跟踪显示您`NullPointerException`位于 的第 67 行`MyService.java`，在 的`startTimer()`方法中`MyService`。

当您计算代码中的行数时，我怀疑您会发现第 67 行`MyService.java`是这一行：

```
timer.scheduleAtFixedRate(updateProfile, 0, 60*1000); 
```

如果那确实是导致您的异常的行，则意味着您得到了`NullPointerException`因为`timer`is `null`。由于您没有显示任何初始化`timer`数据成员的代码，这当然是可能的。

如果第 67 行不是我上面引用的行，那么您将需要确定第 67 行可能是什么`null`- 请注意，它将是您在该行中调用方法的对象。

此外，正如其他人所指出的，您需要学习如何在 Java 中比较对象。`!=`是比较对象*身份*，而不是对象*相等性*。

# iphone - iPhone App - 在屏幕上显示缓冲区中的像素数据

> ID：15463719
> 
> 赞同：-1
> 
> 时间：2013-03-17T17:18:37.157
> 
> 标签：iphone, quartz-2d, pixels, rgba

我有一个用 C 语言编写的视频解码器应用程序的源代码，我现在将其移植到 iphone 上。

我的问题如下：

我需要在屏幕上显示的缓冲区中的帧的 RGBA 像素数据。我的缓冲区是无符号字符类型。（我无法将其更改为任何其他数据类型，因为源代码太大且不是我编写的。）

我在网上找到的大多数链接都说如何在屏幕上“绘制和显示像素”或如何“显示数组中的像素”，但没有一个说如何“显示缓冲区中的像素数据” .

我打算使用石英 2D。我需要做的只是在屏幕上显示缓冲区内容。没有修改！虽然我的问题听起来很简单，但我找不到任何 API 可以做同样的事情。我找不到任何足够有用的适当链接或文档。

请帮忙！提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T17:43:16.350

您可以使用数据结构从原始像素数据`CGContext`创建一个。`CGImage`我很快写了一个基本的例子：

```
- (CGImageRef)drawBufferWidth:(size_t)width height:(size_t)height pixels:(void *)pixels
{
    unsigned char (*buf)[width][4] = pixels;

    static CGColorSpaceRef csp = NULL;
    if (!csp) {
        csp = CGColorSpaceCreateDeviceRGB();
    }

    CGContextRef ctx = CGBitmapContextCreate(
        buf,
        width,
        height,
        8, // 8 bits per pixel component
        width * 4, // 4 bytes per row
        csp,
        kCGImageAlphaPremultipliedLast
    );

    CGImageRef img = CGBitmapContextCreateImage(ctx);
    CGContextRelease(ctx);
    return img;
} 
```

您可以像这样调用此方法（我使用了视图控制器）：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    const size_t width = 320;
    const size_t height = 460;

    unsigned char (*buf)[width][4] = malloc(sizeof(*buf) * height);

    // fill up `buf` here
    for (int x = 0; x < width; x++) {
        for (int y = 0; y < height; y++) {
            buf[y][x][0] = x * 255 / width;
            buf[y][x][1] = y * 255 / height;
            buf[y][x][2] =   0;
            buf[y][x][3] = 255;
        }
    }

    CGImageRef img = [self drawBufferWidth:320 height:460 pixels:buf];
    self.imageView.image = [UIImage imageWithCGImage:img];
    CGImageRelease(img);
} 
```

# c++ - 为 std::reference_wrapper 赋值

> ID：15463721
> 
> 赞同：12
> 
> 时间：2013-03-17T17:18:55.630
> 
> 标签：c++, c++11

我们如何为被包裹的项目赋值`std::reference_wrapper`？

```
int a[] = {0, 1, 2, 3, 4};

std::vector <std::reference_wrapper<int>> v(a, a+5);

v[0] = 1234;  // Error, can not assign value ! 
```

根据错误，直接赋值被删除：

> 错误：使用已删除的函数 'std::reference_wrapper<_Tp>::reference_wrapper(_Tp&&) [with _Tp = int]'

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-17T17:21:54.980

使用`get()`成员函数：

```
v[0].get() = 1111; // ok 
```

[这](http://en.cppreference.com/w/cpp/utility/functional/reference_wrapper)是 的所有成员函数的列表`std::reference_wrapper`。因为*有*一个`operator=`：

```
reference_wrapper& operator=( const reference_wrapper<T>& other ); 
```

int 文字被转换为引用包装器，该包装器失败，并且是您看到的错误消息。

或者，您可以显式调用转换运算符 ( `static_cast<int&>(v[0]) = 1111;`)，但最好使用`get()`如上所示的方法。

# c++ - c++ 中运算符 new 的语法对我来说很陌生

> ID：15463723
> 
> 赞同：0
> 
> 时间：2013-03-17T17:19:17.603
> 
> 标签：c++, templates, new-operator

我是 C++ 新手，下面有一段我无法理解的代码

```
from_net_fifos = new my_fifo_t <net_cmd_t> ** [NUM_PRIORITIES]; 
```

具体来说，我不明白 ** 在这里是什么意思。

我从代码中得到了这么多。

`my_fifo_t`是一个模板，`net_cmd_t`是一个类型，它是一个结构，

创建的fifo的数量=优先级的数量，即每个具有不同优先级的消息都有自己的fifo队列。所以基本上我们正在创建net_cmd_t 类型的fifo，即fifo 中的每个元素都是这种结构类型。创建的 fifos 的数量等于变量`NUM_PRIORITIES`。

** 在这里做什么？如果我错了，有人可以纠正我并解释这行代码的确切语法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T17:22:26.077

星号`*`用于表示指针，语句将`NUM_PRIORITES`指针分配给指向 的指针`my_fifo_t`。您可以将其视为指向`my_fifo_t`.

# java - 如何在java中检查多个数组元素是否匹配来自同一方法的给定值

> ID：15463726
> 
> 赞同：-2
> 
> 时间：2013-03-17T17:19:24.783
> 
> 标签：java, arrays, equals

如果我有一个存储人名地址电话等的数组，然后我想搜索以查看一个人是否存在，我会检查数组值是否等于给定值，但是，我不确定如何检查多个数组此语句中的值

```
if (((Person) object.getFullName().equals(this.information[0] .....))) 
```

如果 [1] 和 [2] 都持有人的全名，我将如何确保 this.information[1] 相等？

我在下面包含了代码，问题出在代码的最后几行。

谢谢你的帮助！！！！

```
public class Person
{
    private String [] information = new String [7];

    public Person()
    {
        for (int i = 0; i < information.length; i++)
        {
            information [i] = null; 
        }
    }

    //construct a person object storing values in array
    public Person (String lName, String fName, String st, String city, String state, String zip, String phone)
    {
        information [0] = lName;
        information [1] = fName; 
        information [2] = st;
        information [3] = city;
        information [4] = state; 
        information [5] = zip;
        information [6] = phone; 

    }

    public void setFullName(String lastname, String firstname) 
    {
        if (lastname != null && firstname != null)
        {
            this.information[0] = lastname;
            this.information[1] = firstname;
        }
    }

    //set entire address together 
    public void setCompleteAddress(String street, String city, String state, String zip)
    {
        if (street != null && city != null && state != null && zip != null)
        {
            this.information[2] = street;
            this.information[3] = city;
            this.information[4] = state; 
            this.information[5] = zip;
        }
    }

    //set phone number 
        public void setPhoneNumber(String phone)
        {
            if (phone != null)
            {
                this.information[6] = phone;
            }
        }

        //get lastname 
        public String 

        //get full name 
        public String getFullname()
        {
            return this.information[0] + "  " + this.information[1];
        }

        //get full address
        public String getFullAddress()
        {
            return this.information[2] + " " +  this.information[3] + " "  + this.information[4] + " " + this.information[5];
        }

        //to string method 
        public String toString()
        {
            String temp = "Person: ";
            for (int i = 0; i < information.length; i++)
            {
                temp = temp + information[i];
            }
            return temp;
        }

        //searches if person exists 
        public boolean equals (Object object)
        {
            if (!(object instanceof Person || object == null)){
                return false 
            }
            if (((Person) object.getFullName().equals(this.information[0] .....)))
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T17:26:27.497

更清洁的方法是

*   一个 Person Javabean，具有用于各个字段的 getter 和 setter
*   比较这些字段的 equals 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T17:26:55.603

您可以使用以下`toString()`方式`Person`检查相等性的方法：

```
public boolean equals (Object object)
    {
        if (!(object instanceof Person || object == null)){
            return false 
        }
        Person per = (Person)object;
        if ((this.toString()).equals(per.toString()))
        {
           return true;
        }
        return false;
    } 
```

# pandas - 从 DataFrame 中选择多键横截面

> ID：15463729
> 
> 赞同：26
> 
> 时间：2013-03-17T17:19:33.427
> 
> 标签：pandas

我有一个带有 (time,ticker) Multiindex 和bid/ask/etc 数据列的DataFrame“df”：

```
                          tod 最后出价 询价量
    时间记录器                  
    2013-02-01 间谍 1600 149.70 150.14 150.17 1300
                SLV 1600 30.44 30.38 30.43 3892
                GLD 1600 161.20 161.19 161.21 3860

```

我想使用多个键选择第二级（级别 = 1）横截面。现在，我可以用一键完成，即

```
    df.xs('SPY', level=1)

```

这给了我一个间谍的时间序列。选择多键横截面的最佳方法是什么，即 SPY 和 GLD 的组合横截面，例如：

```
    df.xs(['SPY', 'GLD'], level=1)

```

?

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2016-03-27T03:31:31.347

使用更新版本的 Pandas 有更好的方法来执行此操作（请参阅版本更改日志中的[使用切片器进行多索引](https://pandas.pydata.org/pandas-docs/stable/whatsnew/v0.14.0.html#multi-indexing-using-slicers)`0.14`）：

```
regression_df.loc[(slice(None), ['SPY', 'GLD']), :] 
```

这可以通过使用变得更具可读性[`pd.IndexSlice`](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.IndexSlice.html)：

```
df.loc[pd.IndexSlice[:, ['SPY', 'GLD']], :] 
```

有了约定`idx = pd.IndexSlice`，这就变成了

```
df.loc[idx[:, ['SPY', 'GLD']], :] 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-17T22:47:35.157

除了使用之外，我找不到更直接的方法`select`：

```
>>> df

       last   tod
A SPY     1  1600
  SLV     2  1600
  GLD     3  1600

>>> df.select(lambda x: x[1] in ['SPY','GLD'])

       last   tod
A SPY     1  1600
  GLD     3  1600 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-02-25T20:05:24.967

对于它的价值，我做了以下事情：

```
foo = pd.DataFrame(np.random.rand(12,3), 
                   index=pd.MultiIndex.from_product([['A','B','C','D'],['Green','Red','Blue']], 
                                                    names=['Letter','Color']),
                   columns=['X','Y','Z']).sort_index()

foo.reset_index()\
   .loc[foo.reset_index().Color.isin({'Green','Red'})]\
   .set_index(foo.index.names) 
```

此方法类似于 select，但避免使用 lambda 迭代所有行。

但是，我将其与 Panel 方法进行了比较，看起来 Panel 解决方案更快（index/loc 为 2.91 ms，to_panel/to_frame 为 1.48 ms：

```
foo.to_panel()[:,:,['Green','Red']].to_frame() 
```

时间：

```
In [56]:
%%timeit
foo.reset_index().loc[foo.reset_index().Color.isin({'Green','Red'})].set_index(foo.index.names)
100 loops, best of 3: 2.91 ms per loop

In [57]:
%%timeit
foo2 = foo.reset_index()
foo2.loc[foo2.Color.eq('Green') | foo2.Color.eq('Red')].set_index(foo.index.names)
100 loops, best of 3: 2.85 ms per loop

In [58]:
%%timeit
foo2 = foo.reset_index()
foo2.loc[foo2.Color.ne('Blue')].set_index(foo.index.names)
100 loops, best of 3: 2.37 ms per loop

In [54]:
%%timeit
foo.to_panel()[:,:,['Green','Red']].to_frame()
1000 loops, best of 3: 1.18 ms per loop 
```

**更新**

在（再次）重新审视这个话题后，我观察到以下几点：

```
In [100]:
%%timeit
foo2 = pd.DataFrame({k: foo.loc[k] for k in foo.index if k[1] in ['Green','Red']}).transpose()
foo2.index.names = foo.index.names
foo2.columns.names = foo2.columns.names
100 loops, best of 3: 1.97 ms per loop

In [101]:
%%timeit
foo2 = pd.DataFrame.from_dict({k: foo.loc[k] for k in foo.index if k[1] in ['Green','Red']}, orient='index')
foo2.index.names = foo.index.names
foo2.columns.names = foo2.columns.names
100 loops, best of 3: 1.82 ms per loop 
```

如果您不关心保留级别的原始顺序和命名，您可以使用：

```
%%timeit
pd.concat({key: foo.xs(key, axis=0, level=1) for key in ['Green','Red']}, axis=0)
1000 loops, best of 3: 1.31 ms per loop 
```

如果您只是在第一级选择：

```
%%timeit
pd.concat({key: foo.loc[key] for key in ['A','B']}, axis=0, names=foo.index.names)
1000 loops, best of 3: 1.12 ms per loop 
```

相对：

```
%%timeit
foo.to_panel()[:,['A','B'],:].to_frame()
1000 loops, best of 3: 1.16 ms per loop 
```

**另一个更新**

如果您对示例的索引进行排序，`foo`则上述许多情况都会有所改善（时间已更新以反映预排序的索引）。但是，在对索引进行排序时，可以使用 user674155 描述的解决方案：

```
%%timeit
foo.loc[(slice(None), ['Blue','Red']),:]
1000 loops, best of 3: 582 µs per loop 
```

在我看来，这是最有效和最直观的（用户不需要了解面板以及它们是如何从框架创建的）。

注意：即使索引尚未排序，动态排序索引的`foo`性能与`to_panel`选项相当。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T14:08:05.203

转换为面板，然后索引是直接的

```
In [20]: df = pd.DataFrame(dict(time = pd.Timestamp('20130102'), 
                                A = np.random.rand(3), 
                 ticker=['SPY','SLV','GLD'])).set_index(['time','ticker'])

In [21]: df
Out[21]: 
                          A
time       ticker          
2013-01-02 SPY     0.347209
           SLV     0.034832
           GLD     0.280951

In [22]: p = df.to_panel()

In [23]: p
Out[23]: 
<class 'pandas.core.panel.Panel'>
Dimensions: 1 (items) x 1 (major_axis) x 3 (minor_axis)
Items axis: A to A
Major_axis axis: 2013-01-02 00:00:00 to 2013-01-02 00:00:00
Minor_axis axis: GLD to SPY

In [24]: p.ix[:,:,['SPY','GLD']]
Out[24]: 
<class 'pandas.core.panel.Panel'>
Dimensions: 1 (items) x 1 (major_axis) x 2 (minor_axis)
Items axis: A to A
Major_axis axis: 2013-01-02 00:00:00 to 2013-01-02 00:00:00
Minor_axis axis: SPY to GLD 
```

# pascal - 从文本文件读取到 FreePascal 中的列表

> ID：15463738
> 
> 赞同：0
> 
> 时间：2013-03-17T17:20:35.293
> 
> 标签：pascal, freepascal

我有一个文本文件，包括：

```
John###198cm###90kg###19age
Tom###120cm###34kg###8age 
```

我想将它们从文件中读取到 FreePascal 中的两个列表中。

我尝试使用 LoadFromFile 函数，它应该将一行放入列表，但它对我不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T08:49:09.840

这是您问题的一个变体[`Reading from file FreePascal`](https://stackoverflow.com/q/15447535/576719)。

这是一个`ReplaceStr()`用于将`###`字符转换为 CR LF 对的示例。当分配给新列表的 text 属性时，它将被拆分为项目。

```
Uses
  StrUtils;

procedure HandleText;
var
  i : Integer;
  sSourceList : TStringList;
  sExpandedList : TStringList;
begin
  sSourceList := TStringList.Create;
  sExpandedList := TStringList.Create;
  try
    sSourceList.LoadFromFile('MySource.txt');
    for i := 0 to sSourceList.Count-1 do begin      
      sExpandedList.Text := ReplaceStr(sSourceList[i],'###',#13#10);
      // Do something with your lists 
      // sExpandedList[0] = 'John' etc ...
    end;
  finally
    sSourceList.Free;
    sExpandedList.Free;
  end;
end; 
```

# primefaces - primefaces 选项卡菜单仅显示为链接

> ID：15463739
> 
> 赞同：1
> 
> 时间：2013-03-17T17:20:37.207
> 
> 标签：primefaces

我想创建一个包含某些实体的数据表的 xhtml 页面，以便在实体之间导航，尽管我可以使用 TabMenu。但在实施之后，tabMenu menuItems 仅显示为简单链接，而不是[primefaces 示例](http://www.primefaces.org/showcase/ui/tabMenu.jsf)： ![越野车标签菜单](../Images/feaed35ab0e45b4eb8a5f6c0838560a8.png)

我的代码：

```
<html xmlns="http://www.w3.org/1999/xhtml"  
xmlns:h="http://java.sun.com/jsf/html"  
xmlns:f="http://java.sun.com/jsf/core"  
xmlns:p="http://primefaces.org/ui">  
<h:body>
<h:form>    
    <p:tabMenu activeIndex="0">  
       <p:menuitem value="Customers" url="customerTableView.xhtml" icon="ui-icon-document"/>
       <p:menuitem value="Orders" url="orderTableView.xhtml" icon="ui-icon-document"/>  Vie
    </p:tabMenu>    
</h:form>    
</h:body> 
```

找不到它没有正确呈现的原因，我也尝试了不同的浏览器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T18:02:02.320

我根本没有注意到缺少“头”标签。添加它们解决了这个问题。

# quickbooks - 收据不平衡

> ID：15463740
> 
> 赞同：0
> 
> 时间：2013-03-17T17:20:42.070
> 
> 标签：quickbooks

我正在尝试使用 SDK 将销售收据添加到 QuickBooks POS。我收到此错误：

收据不平衡。

这是我的 XML：

[http://pastebin.com/MweDDRqU](http://pastebin.com/MweDDRqU)

我的含税订单总额为 21.25。这是我的物品：

2双鞋，每双$10

6.25% MA 销售税仅添加到鞋子

运费 5 美元

折扣价值 5 美元

总计 21.25 美元。

我不确定为什么系统说我减价 9.37 美元。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T02:22:00.590

我不知道它从哪里得到 9.37 美元，但您的收据确实不平衡。

总金额为 21.25 美元，但您表示您只收到了 20.00 美元的付款。

```
<TenderCheckAdd>
    <CheckNumber>3</CheckNumber>
    <TenderAmount>20.0000000000</TenderAmount>
</TenderCheckAdd> 
```

这类似于收银台的人告诉你你的总金额是 21.25 美元，然后你递给他们一张 20 美元的钞票然后走出门。

你还欠他们 1.25 美元。

# css - 为什么这个 div 不增长 div 容器？

> ID：15463747
> 
> 赞同：0
> 
> 时间：2013-03-17T17:21:06.070
> 
> 标签：css, positioning, html, 960.gs

盒子

```
section.box-products { 
```

拥有所有

```
section.box-products ul li.item { 
```

其中的元素，但即使`<li>`计数增加 box-products div 的高度也不会增加。

为什么？

代码：

```
 <section class="box-products">

            <div class="large-12 columns">
                <h2>
                    Noteworthy
                </h2>
            </div>

            <div class="large-12 columns">

                <ul class="large-block-grid-8">

                    <li class="item">
                        <img src="assets/images/item/1.jpg">
                        <a href="#" class="name">
                            Sofa Bercelli
                        </a>
                        <p>12.95</p>
                    </li>

                    <li class="item">
                        <img src="assets/images/item/2.jpg">
                        <a href="#" class="name">
                            Sofa Bercelli
                        </a>
                        <p>12.95</p>
                    </li>

                    <li class="item">
                        <img src="assets/images/item/3.jpg">
                        <a href="#" class="name">
                            Sofa Bercelli
                        </a>
                        <p>12.95</p>
                    </li>

                    <li class="item">
                        <img src="assets/images/item/4.jpg">
                        <a href="#" class="name">
                            Sofa Bercelli
                        </a>
                        <p>12.95</p>
                    </li>

                    <li class="item">
                        <img src="assets/images/item/5.jpg">
                        <a href="#" class="name">
                            Sofa Bercelli
                        </a>
                        <p>12.95</p>
                    </li>

                    <li class="item">
                        <img src="assets/images/item/6.jpg">
                        <a href="#" class="name">
                            Sofa Bercelli
                        </a>
                        <p>12.95</p>
                    </li>

                    <li class="item">
                        <img src="assets/images/item/7.jpg">
                        <a href="#" class="name">
                            Sofa Bercelli
                        </a>
                        <p>12.95</p>
                    </li>

                    <li class="item">
                        <img src="assets/images/item/8.jpg">
                        <a href="#" class="name">
                            Sofa Bercelli
                        </a>
                        <p>12.95</p>
                    </li>

                    <li class="item">
                        <img src="assets/images/item/9.jpg">
                        <a href="#" class="name">
                            Sofa Bercelli
                        </a>
                        <p>12.95</p>
                    </li>

                    <li class="item">
                        <img src="assets/images/item/10.jpg">
                        <a href="#" class="name">
                            Sofa Bercelli
                        </a>
                        <p>12.95</p>
                    </li>

                    <li class="item">
                        <img src="assets/images/item/11.jpg">
                        <a href="#" class="name">
                            Sofa Bercelli
                        </a>
                        <p>12.95</p>
                    </li>

                    <li class="item">
                        <img src="assets/images/item/12.jpg">
                        <a href="#" class="name">
                            Sofa Bercelli
                        </a>
                        <p>12.95</p>
                    </li>

                    <li class="item">
                        <img src="assets/images/item/13.jpg">
                        <a href="#" class="name">
                            Sofa Bercelli
                        </a>
                        <p>12.95</p>
                    </li>

                    <li class="item">
                        <img src="assets/images/item/14.jpg">
                        <a href="#" class="name">
                            Sofa Bercelli
                        </a>
                        <p>12.95</p>
                    </li>

                    <li class="item">
                        <img src="assets/images/item/15.jpg">
                        <a href="#" class="name">
                            Sofa Bercelli
                        </a>
                        <p>12.95</p>
                    </li>

                    <li class="item">
                        <img src="assets/images/item/16.jpg">
                        <a href="#" class="name">
                            Sofa Bercelli
                        </a>
                        <p>12.95</p>
                    </li>

                    <li class="item">
                        <img src="assets/images/item/17.jpg">
                        <a href="#" class="name">
                            Sofa Bercelli
                        </a>
                        <p>12.95</p>
                    </li>

                    <li class="item">
                        <img src="assets/images/item/18.jpg">
                        <a href="#" class="name">
                            Sofa Bercelli
                        </a>
                        <p>12.95</p>
                    </li>

                    <li class="item">
                        <img src="assets/images/item/19.jpg">
                        <a href="#" class="name">
                            Sofa Bercelli
                        </a>
                        <p>12.95</p>
                    </li>

                    <li class="item">
                        <img src="assets/images/item/20.jpg">
                        <a href="#" class="name">
                            Sofa Bercelli
                        </a>
                        <p>12.95</p>
                    </li>

                </ul>

            </div> 
```

和 CSS：

section.box-产品{

```
margin-top: 24px;
padding-bottom: 20px;

/*border: 1px solid red;*/

min-height: 220px;

background-color: #fff;

border-bottom: solid 3px #8A8780; 
```

}

section.box-产品 h2 {

```
font-size: 1.3em;
font-weight: 400; 
```

}

section.box-products ul li.item {

```
width: 120px;
height: 140px;

margin-top: 12px;
margin-bottom: 12px;

/*border: 1px solid red;*/ 
```

}

更新：

添加溢出：隐藏；解决了这个问题！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T17:23:21.840

的孩子`<section class="box-products">`是浮动的，因此被父母忽略（当涉及高度时）。让父母识别浮动孩子的一种简单方法是这样的：

```
.box-products { overflow: hidden; } 
```

# android - WindowManager.LayoutParams 为什么会有 setTitle 方法？

> ID：15463751
> 
> 赞同：5
> 
> 时间：2013-03-17T17:21:19.203
> 
> 标签：android, layoutparams, android-windowmanager

所以昨天我在编程，突然在课堂上碰到了`setTitle`方法`WindowManager.LayoutParams`，为什么像这样的这个类会有`setTitle`方法呢？用于什么地方？该文档没有说明该功能。

我的猜测是它可以用于调试或类似的东西，但除此之外我没有任何线索。

为什么它会被声明为最终方法？因为它还没有准备好让我们覆盖它？

就是想...

**注意：下面的两个答案都是“正确”的，并提供了很好的信息，但只能接受一个。**

[获取标题](http://developer.android.com/reference/android/view/WindowManager.LayoutParams.html#getTitle%28%29)

[设置标题](http://developer.android.com/reference/android/view/WindowManager.LayoutParams.html#setTitle%28java.lang.CharSequence%29 "设置标题")

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T18:06:20.153

[浏览WindowManager](http://www.java2s.com/Open-Source/Android/android-core/platform-frameworks-base/android/view/WindowManager.java.htm)的源代码，似乎除了调试和包裹编写方法外，该标题实际上并未在任何地方使用。

此外，搜索谷歌`+"windowmanager.layoutparams" +".setTitle()" site:grepcode.com`似乎不会返回任何结果，其中[setTitle()](http://developer.android.com/reference/android/view/WindowManager.LayoutParams.html#setTitle%28java.lang.CharSequence%29)和[getTitle()](http://developer.android.com/reference/android/view/WindowManager.LayoutParams.html#getTitle%28%29)方法`WindowManager.LayoutParams`实际用于生产代码。

我想说的是，Android 工程师觉得可能在未来的某个时间点，他们可能需要一个 title 属性，并将其作为存根放入。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-17T18:07:58.780

好吧，这个布局参数值似乎在任何地方都没有任何用途。

它现在似乎是一个占位符。

我只找到了使用它的两个案例： [SoftInputWindow](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.1_r2/android/inputmethodservice/SoftInputWindow.java) 和 [StatusBar Service](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3.1_r1/com/android/systemui/statusbar/StatusBarService.java)

而且视觉上两者都没有效果（至少在我的设备和模拟器上）

# delphi - 在 TabSheet 上循环所有组件

> ID：15463753
> 
> 赞同：4
> 
> 时间：2013-03-17T17:21:26.240
> 
> 标签：delphi, count, components, ttabsheet

我有以下代码应该循环我的标签页上给定标签上的所有组件。我已经尝试了许多在网上找到的相同代码的变体，但我根本无法让它工作。首先，我检查它是否是正确的选项卡 - 有效。然后我检查看看有多少组件 - 这不起作用。尽管我现在有 2 个面板总共有 9 个复选框，但它说 0 组件。

```
procedure TfrmHsUsers.pagUsersClick(Sender: TObject);
var
  i: integer;
  Fieldname: string;
begin
  if pagUsers.Properties.ActivePage.Name = 'tabProgram' then
    begin
ShowMessage(IntToStr(pagUsers.Properties.ActivePage.ComponentCount));
      for i := 0 to pagUsers.Properties.ActivePage.ComponentCount - 1 do
        if (pagUsers.Properties.ActivePage.Components[i]) is TcxDbCheckBox then
          begin
            Fieldname := TcxDbCheckBox(pagUsers.Properties.ActivePage.Components[i]).DataBinding.DataField;
            TcxDbCheckBox(pagUsers.Properties.ActivePage.Components[i]).Enabled := Settings.License.IsEnabled(Fieldname);
          end;
    end;
end; 
```

关于我的代码中可能有什么问题的任何提示？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-17T17:25:55.273

问题是您正在循环访问该`Components`属性。这列出了选项卡表*拥有*的组件。对于在表单设计器中创建的组件，表单是所有者。所以预计`pagUsers.Properties.ActivePage.ComponentCount`为零，因为表单上唯一拥有任何东西的东西就是表单本身。

您需要做的是使用`ControlCount`和`Controls[]`迭代标签表的子项。只需将所有使用替换为`ComponentCount`，`ControlCount`同样替换`Components[]`为`Controls[]`。

请注意，`ControlCount`and`Controls[]`属性只给出直接子级。由于您有面板，因此您很可能将面板作为选项卡的子级，而将复选框作为面板的子级。所以你需要遍历面板的孩子。

我[在这里的回答](https://stackoverflow.com/questions/14892793/search-for-a-label-by-its-caption#14894296)显示了一种方法。如果您使用我在那里提供的代码，那么您对复选框的迭代确实可以非常简单地编写：

```
TabSheet := pagUsers.Properties.ActivePage;
for CheckBox in TControls.Enumerator<TcxDbCheckBox>(TabSheet) do
  .... 
```

# javascript - 事件发射器同步node.js客户端

> ID：15463755
> 
> 赞同：1
> 
> 时间：2013-03-17T17:21:32.387
> 
> 标签：javascript, node.js

```
function findById(id) {
    var fullName = "";
    client.emit("findById", id, function(result){
        fullName = result.fullName;
    });
} 
```

我想从函数 findById 中找到全名

当我调用函数 findById result = ""

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T05:14:03.893

要使其同步，您必须使用循环锁定函数。**我不建议这样做**。

```
function findById(id) {
   var fullname, waiting = true;

   client.emit("findById", id, function(result){
       fullname = result.fullName;
       waiting  = false;
   });

   while (waiting);
   return fullname;
} 
```

最好接受该方法本质上是异步的事实，并将结果传递给回调：

```
function findById(id, callback) {
   client.emit("findById", id, function(result){
       callback(result.fullName);
   });
} 
```

用法将是：

```
findById(id, function(fullName) { /* ... */ }); 
```

如果嵌套回调在您的应用程序中成为一个令人头疼的问题，那么有一些流控制库，如[async](https://github.com/caolan/async)（在 Node 和浏览器中运行），可以让事情变得更清晰、更具可读性。

# ios - iOS 5+ 中的 Objective-C 单例模式

> ID：15463761
> 
> 赞同：12
> 
> 时间：2013-03-17T17:22:27.423
> 
> 标签：ios, objective-c, singleton, initialization, private-members

我已经阅读了很多关于如何在 Objective-C 中实现单例的线程和博客文章，其中一些可能有点被弃用（2010 年或更早），似乎人们对这个问题有不同的看法。 .. Apple 是否有关于实现单例的文档？我找不到它。如果是这样，有人可以告诉我在哪里吗？

我需要一个具有一些公共和私有变量的类的单例。目前，这是我对此类的实现：

```
@interface MySingleton ()
   @property (strong, nonatomic) NSString *state;
@end

@implementation MySingleton

@synthesize state = _state;
@synthesize count = _count;

static MySingleton *sharedObject = nil;

+ (MySingleton *)sharedInstance
{
   static dispatch_once_t _singletonPredicate;

   dispatch_once(&_singletonPredicate, ^{
      sharedObject = [[super allocWithZone:nil] init];
   });

   return sharedObject;
}

+ (id)allocWithZone:(NSZone *)zone 
{
   return [self sharedInstance];
} 
```

这应该是推荐的方式吗？我应该如何初始化实例变量，公共的和私有的？

关于单例，我想澄清的另一个问题是：这会产生内存泄漏吗？iOS 中真的推荐使用单例吗？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-17T17:43:06.383

以上是正确的，以及@miho 关于在 sharedInstance 方法中包含静态对象的评论。但是没有理由覆盖`+allocWithZone:`. ObjC 中的单例通常是“共享的”，而不是强制的。您可以自由创建“单例”的其他实例。如果创建其他实例是非法的，那么你应该让`init`perform an`NSAssert`而不是在`+allocWithZone:`. 如果你的单例是可变的（大多数都是），你绝对不应该用`+allocWithZone:`这种方式覆盖。

> 关于单例，我想澄清的另一个问题是：这会产生内存泄漏吗？

不，这个对象永远不会被释放，但它总是可以访问的。那不是泄漏。

> iOS 中真的推荐使用单例吗？

是的，这是一种非常常见的模式，在 Cocoa 框架中都使用过。也就是说，还有各种其他模式最近开始在开发人员中变得有些流行。依赖注入引起了一些兴趣，尽管我在实践中并不经常看到它。减少对单例的依赖可以提高可测试性，我最近一直在尝试如何在我的代码中消除其中的一些并取得了一些成功。但他们在 Cocoa 有着悠久而自豪的历史，我不认为他们是个问题。

编辑：您的代码中有一个实际错误。你应该打电话`[[self alloc] init]`，而不是`[[super alloc] init]`。没有理由打电话`+allocWithZone:`，只需使用`+alloc`. （`...WithZone:`方法有用的时代早已过去。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T17:28:42.097

在 Xcode 中，在“搜索文档”下输入[Creating a Singleton Instance](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CocoaFundamentals/CocoaObjects/CocoaObjects.html#//apple_ref/doc/uid/TP40002974-CH4-SW32)。有很多结果（但上面的链接，在页面底部，有示例代码）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T17:36:07.623

是的，这是推荐的方式。我使用它的方式只有一个小区别：我`sharedObject`在方法中定义 as 静态变量`+ (MySingleton *)sharedInstance`，因为它不应该从其他任何地方访问该变量，而不是从 getter 方法。

不，您不会造成内存泄漏。当您的应用程序终止时，您的应用程序使用的所有保留内存都将被释放，并且没有其他情况应该释放静态共享实例。在 ARC 之前的区域中，覆盖该`release`方法以防止意外释放对象是很常见的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T19:01:50.103

对单例使用 gcd 的一些警告：

```
dispatch_once(&_singletonPredicate, ^{
      sharedObject = [[super allocWithZone:nil] init];
   }); 
```

如果 init 方法由于某种原因直接或间接地处理了单例对象，就会出现死锁。出于这个原因，我认为编写单例的更合适的方法是通过

```
+ (void) initialize 
```

方法

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-17T22:12:23.980

我仍在使用来自[CocoaWithLove](http://www.cocoawithlove.com/2008/11/singletons-appdelegates-and-top-level.html)的单例标题- 可能有点过时但仍然像魅力一样工作。[它与此处](http://cocoadev.com/wiki/SingletonDesignPattern)描述的参考 Apple 文档的功能基本相同，我认为至少 Apple 的文档（[本页底部](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaFundamentals/CocoaObjects/CocoaObjects.html%23//apple_ref/doc/uid/TP40002974-CH4-SW31)）仍然有效。有些人认为它会无限期地保持有效，因为它是 Apple 建议的官方解决方案。

# sql - 命名参数查询的行为不如预期：

> ID：15463767
> 
> 赞同：1
> 
> 时间：2013-03-17T17:22:56.963
> 
> 标签：sql, sql-server, ms-access

我正在使用 MS Access 2010。我正在尝试创建参数化查询。我让它像这样完美地工作：

```
WHERE PerformedBy.artists LIKE ? + '*'; 
```

然后我试图给参数一个这样的名字：

```
WHERE PerformedBy.artists LIKE %test% + '*'; 
```

这就是 MSDN 建议的方式。但是 Access 向我抛出了一个语法错误。

有什么建议么？谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T17:37:44.153

不要用`%`字符包围参数名称。如果要包含名称，请使用方括号。

```
WHERE PerformedBy.artists LIKE [test] + '*';
WHERE PerformedBy.artists LIKE [test] & '*'; 
```

这两个使用不同的连接运算符。第二个将返回所有提供 Null 作为 值的行`[test]`。当`[test]`为 Null 时，第一个将不返回任何行。

# php - 如何将我的 javascript 变量传递给下拉列表中的选项值？

> ID：15463769
> 
> 赞同：0
> 
> 时间：2013-03-17T17:23:08.977
> 
> 标签：php, javascript, html, google-maps

我有一个数据库，其中包含用户在纬度和长纬度的“家”位置，我只需要知道如何将这些值传递给下拉列表，以便以下代码工作：

代码在这里： http: [//pastebin.com/sVf214Qs](http://pastebin.com/sVf214Qs)

抱歉，我无法在此处正确格式化代码。如果你能得到这个工作，请提前感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T17:26:16.497

为什么你不能

```
<option value="<?php echo $lat . ', ' . $long; ?>">Home</option> 
```

就像您稍后在页面中所做的那样？

```
<input type="text" value="<?php echo $lat; ?>" id="lat" name="lat" />
<input type="text" value="<?php echo $long; ?>" id="long" name="long" /> 
```

# c# - WiX Bootstrapper - 从 CustomAction 安装 MSI

> ID：15463770
> 
> 赞同：1
> 
> 时间：2013-03-17T17:23:11.533
> 
> 标签：c#, .net, wix, custom-action, bootstrapper

我用 WiX 创建了一个引导程序。它包含一个带有两个 MSI 包的链。当它运行时，它正在调用一个显示视图的 .NET-CustomAction（如此示例：[http](http://bryanpjohnston.com/2012/09/28/custom-wix-managed-bootstrapper-application) ://bryanpjohnston.com/2012/09/28/custom-wix-managed-bootstrapper-application ），其中用户可以选择一些设置。

现在，当用户在此视图中选择特殊设置时，我只需要安装第一个 msi。我现在正在寻找一种方法来做到这一点。最简单的方法是，我可以从我的 .NET 类（ViewModel）运行 MSI 安装。但是如何访问 MSI-Bootstrapper 中包含的 MSI-Package 并运行它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T21:38:59.063

当 Burn 计划您的 MSI 程序包时，它会回调您可以覆盖的每个程序包的“请求状态”。看到这个附加到`PlanPackageBegin`事件。该事件提供了`PlanPackageBeginEventArgs`. 在这些事件中，您将看到 args 字段，该`State`字段将告诉您默认情况下 Burn 会对该包执行什么操作。您可以将该`State`字段设置为任何`RequestState`您想要的。

例如，如果包裹不存在，而您则将`Plan()`是。您的自定义 BA 代码可以将其更改为您想要的任何内容。因此，您的 UI 可能会说：“我知道您认为您应该安装该软件包，但该用户未选中安装 FooWidget 的框，因此请制作该软件包。”`LaunchAction.Install``State``RequestState.Present``RequestState``RequestState.Absent`

日志文件将向您显示计划的结果，并且在调试时非常有用。

# c# - 物业表现

> ID：15463772
> 
> 赞同：-2
> 
> 时间：2013-03-17T17:23:29.797
> 
> 标签：c#, properties

如果我这样做，我需要知道是否存在一些性能问题/考虑：

```
public Hastable Properties=...
public double ItemNumber
{
  get { return (double)Properties["ItemNumber"]; }
  set
{
  ItemNumber = value;
  Properties["ItemNumber"] = value;
}
}

Public string Property2....

Public ... Property 3.... 
```

而不是直接访问该属性：

```
public string ItemNumber { get; set; }
public string prop2 { get; set; }
public string 3...{ get; set; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T17:27:28.580

这取决于您的性能要求...访问 a`Hashtable`并转换结果显然比仅访问字段要慢（自动属性隐式创建字段），但取决于您要执行的操作，它可能会或可能不会显着差异。在这两种情况下都很复杂`O(1)`，但访问哈希表显然需要更多的周期......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T17:27:09.663

好吧，与直接属性访问相比，它肯定会更慢，因为 get 和 set 操作需要执行更多的代码。但是由于您使用的是哈希表，因此访问速度应该非常快。由于您使用的是弱类型集合，因此您还会因为强制转换而获得额外的开销。装箱和拆箱之类的事情是有代价的。问题是所有这些是否会显着影响您的应用程序的性能。这真的取决于你的要求。我建议您执行一些负载测试，看看这是否会成为瓶颈。

# java - 无法配置新的 GAE Maven 插件后端

> ID：15463773
> 
> 赞同：0
> 
> 时间：2013-03-17T17:23:34.030
> 
> 标签：java, google-app-engine, maven

我已迁移我的 Eclipse GAE 项目以使用 Maven GAE 插件。我现在已经知道 devserver 运行正常（即 mvn appengine:devserver）。

但是，当我尝试尝试 mvn appengine:backends_configure 时，出现以下异常：[https ://gist.github.com/sanity/5182601](https://gist.github.com/sanity/5182601)

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T18:40:26.193

把你的 backends.yaml 放到 src/main/webapp/WEB-INF 之后试试。

# python - 如何将音高轨道从旋律提取算法转换为类似嗡嗡声的音频信号

> ID：15463774
> 
> 赞同：19
> 
> 时间：2013-03-17T17:23:35.923
> 
> 标签：python, matlab, signal-processing, pitch-tracking, audio-analysis

作为一个有趣的家庭研究项目的一部分，我试图找到一种方法来减少/将歌曲转换为类似嗡嗡声的音频信号（我们人类在听歌曲时感知到的基本旋律）。在我进一步描述我对这个问题的尝试之前，我想提一下，尽管我在分析图像和视频方面有很多经验，但我对音频分析是完全陌生的。

谷歌搜索了一下，我发现了一堆旋律提取算法。给定一首歌曲的复音音频信号（例如：.wav 文件），它们会输出一个音高音轨 --- 在每个时间点，他们估计主要音高（来自歌手的声音或某些旋律生成乐器）并跟踪主要音高随着时间的推移。

我读了几篇论文，他们似乎计算了歌曲的短时间傅立叶变换，然后对频谱图进行了一些分析，以获取和跟踪主导音高。旋律提取只是我正在尝试开发的系统中的一个组件，所以我不介意使用任何可用的算法，只要它在我的音频文件上做得不错并且代码可用。由于我是新手，我很高兴听到任何关于哪些算法已知运行良好以及在哪里可以找到它的代码的建议。

我发现了两种算法：

1.  [Yaapt 音高跟踪](http://www.ws.binghamton.edu/zahorian/yaapt.htm)
2.  [旋律](http://mtg.upf.edu/technologies/melodia)

我选择了 Melodia，因为不同音乐流派的结果看起来相当令人印象深刻。请检查[此以查看其结果](http://www.justinsalamon.com/melody-extraction.html#demo)。你听到的每首音乐的嗡嗡声本质上是我感兴趣的。

“这是任何任意歌曲的嗡嗡声的产生，我希望你在这个问题上提供帮助”。

该算法（可作为 vamp 插件使用）输出音高轨道 --- [time_stamp, pitch/frequency] --- Nx2 矩阵，其中第一列是时间戳（以秒为单位），第二列是主要音高在相应的时间戳上检测到。下面显示的是从算法中获得的音高轨道的可视化效果，该算法以紫色覆盖了歌曲的时域信号（上图）及其频谱图/短时傅立叶。音高/频率的负值表示算法对非浊音/非旋律片段的主要音高估计。所以所有音高估计> = 0对应于旋律，其余的对我来说并不重要。

![带有歌曲波形和频谱图的音轨叠加](../Images/b21bff355873762b24b9dc2a478e9fad.png)

现在我想将这个音高音轨转换回像嗡嗡声一样的音频信号——就像作者在他们的网站上一样。

下面是我为此编写的一个 MATLAB 函数：

```
function [melSignal] = melody2audio(melody, varargin)
% melSignal = melody2audio(melody, Fs, synthtype)
% melSignal = melody2audio(melody, Fs)
% melSignal = melody2audio(melody)
%
% Convert melody/pitch-track to a time-domain signal
%
% Inputs:
%
%     melody - [time-stamp, dominant-frequency] 
%           an Nx2 matrix with time-stamp in the 
%           first column and the detected dominant 
%           frequency at corresponding time-stamp
%           in the second column. 
% 
%     synthtype - string to choose synthesis method
%      passed to synth function in synth.m
%      current choices are: 'fm', 'sine' or 'saw'
%      default='fm'
% 
%     Fs - sampling frequency in Hz 
%       default = 44.1e3
%
%   Output:
%   
%     melSignal -- time-domain representation of the 
%                  melody. When you play this, you 
%                  are supposed to hear a humming
%                  of the input melody/pitch-track
% 

    p = inputParser;
    p.addRequired('melody', @isnumeric);
    p.addParamValue('Fs', 44100, @(x) isnumeric(x) && isscalar(x));
    p.addParamValue('synthtype', 'fm', @(x) ismember(x, {'fm', 'sine', 'saw'}));
    p.addParamValue('amp', 60/127,  @(x) isnumeric(x) && isscalar(x));
    p.parse(melody, varargin{:});

    parameters = p.Results;

    % get parameter values
    Fs = parameters.Fs;
    synthtype = parameters.synthtype;
    amp = parameters.amp;

    % generate melody
    numTimePoints = size(melody,1);
    endtime = melody(end,1);
    melSignal = zeros(1, ceil(endtime*Fs));

    h = waitbar(0, 'Generating Melody Audio' );

    for i = 1:numTimePoints

        % frequency
        freq = max(0, melody(i,2));

        % duration
        if i > 1
            n1 = floor(melody(i-1,1)*Fs)+1;
            dur = melody(i,1) - melody(i-1,1);
        else
            n1 = 1;
            dur = melody(i,1);            
        end

        % synthesize/generate signal of given freq
        sig = synth(freq, dur, amp, Fs, synthtype);

        N = length(sig);

        % augment note to whole signal
        melSignal(n1:n1+N-1) = melSignal(n1:n1+N-1) + reshape(sig,1,[]);

        % update status
        waitbar(i/size(melody,1));

    end

    close(h);

end 
```

该代码背后的基本逻辑如下：在每个时间戳处，我合成一个短寿命波（例如正弦波），其频率等于在该时间戳处检测到的主要音高/频率，持续时间等于它与输入旋律矩阵中的下一个时间戳的差距。我只是想知道我这样做是否正确。

然后我把从这个函数中得到的音频信号和原曲一起播放（左声道的旋律和右声道的原曲）。尽管生成的音频信号似乎很好地分割了旋律生成源（语音/主奏乐器）——它在语音所在的地方是活跃的，而在其他地方为零——信号本身远不是嗡嗡声（我得到类似的东西哔哔哔哔哔哔哔哔哔哔哔哔哔哔哔）作者在他们的网站上展示的。具体来说，下图是底部输入歌曲的时域信号和使用我的函数生成的旋律的时域信号的可视化。

![在此处输入图像描述](../Images/f6063ae5b2707409f57717dcb888ed89.png)

一个主要问题是——尽管我得到了每个时间戳生成的波频率以及持续时间，但我不知道如何设置波的幅度。现在，我将幅度设置为平坦/恒定值，我怀疑这就是问题所在。

有人对此有什么建议吗？我欢迎使用任何程序语言（最好是 MATLAB、python、C++）提出建议，但我想我的问题更笼统——如何在每个时间戳处生成波形？

我脑海中的一些想法/修复：

1.  通过从原始歌曲的时域信号中获取幅度的平均/最大估计值来设置幅度。
2.  完全改变我的方法——计算歌曲音频信号的频谱图/短时傅立叶变换。除了我的音高轨道（或靠近我的音高轨道）中的频率之外，几乎/零输出或柔和地切断所有其他频率。然后计算逆短时傅里叶变换得到时域信号。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T04:42:48.077

如果我理解正确，您似乎已经对音高有了准确的表示，但您的问题是您生成的内容“听起来不够好”。

从你的第二种方法开始：过滤掉任何东西，但音高不会带来任何好处。通过删除与您的本地音高估计相对应的几个频率箱以外的所有内容，您将失去输入信号的纹理，这使它听起来不错。事实上，如果你把它发挥到极致，除了与音高相对应的一个样本之外，去掉所有的东西并取一个 ifft，你会得到一个正弦曲线，这就是你目前正在做的事情。如果您无论如何都想这样做，我建议您通过对您的时间信号应用一个滤波器来执行所有这些操作，而不是进出频域，这更加昂贵和麻烦。滤波器将在您想要保留的频率附近有一个小的截止，这也将允许声音具有更好的质感。

但是，如果您已经有了满意的音高和持续时间估计，但您想改进声音渲染，我建议您只替换您的正弦波 - 无论您如何，它总是听起来像愚蠢的哔哔声按摩它们 - 为音阶中的每个频率使用一些实际的嗡嗡声（或小提琴或长笛或任何你喜欢的东西）样本。如果记忆是一个问题，或者如果你所代表的歌曲不属于一个很好的音阶（例如考虑中东歌曲），而不是为音阶的每个音符都有一个嗡嗡声样本，你只能有一个嗡嗡声样本几个频率。然后，您可以通过对这些嗡嗡声样本之一进行采样率转换来导出任何频率的嗡嗡声。有几个样本可供选择以进行样本转换，您可以选择与您需要产生的频率具有“最佳”比率的样本，因为采样转换的复杂性取决于该比率。显然，与仅从一组样本中挑选相比，添加采样率转换将需要更多的工作和计算要求。

使用一组真实样本将对渲染的质量产生很大影响。它还可以让您对您演奏的每个新音符进行逼真的攻击。

那么是的，就像你建议的那样，你可能还想通过跟随输入信号的瞬时幅度来播放幅度，以产生更细微的歌曲渲染。

最后，我还会使用您所拥有的持续时间估计值，以便您从一种声音到另一种声音的过渡更平滑。根据您对我非常喜欢的音频文件的演奏（哔哔哔哔哔哔哔哔哔哔哔哔）和您显示的图表猜测，看起来您在歌曲的渲染中插入了许多中断。您可以通过延长持续时间估计以消除任何短于 0.1 秒的静默来避免这种情况。这样，您可以保留原始歌曲的真正静音，但避免切断歌曲的每个音符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T16:35:33.870

虽然我无权访问您的 synth() 函数，但根据它需要的参数，我会说您的问题是因为您没有处理阶段。

也就是说 - 将波形片段连接在一起是不够的，您必须确保它们具有连续相位。否则，每次连接两个波形片段时，都会在波形中创建不连续性。如果是这种情况，我的猜测是您一直在听到相同的频率，并且它听起来更像是锯齿而不是正弦 - 我是对的吗？

解决方案是将片段 n 的开始阶段设置为片段 n-1 的结束阶段。这是一个示例，说明如何连接具有不同频率的两个波形而不会产生相位不连续性：

```
fs = 44100; % sampling frequency

% synthesize a cosine waveform with frequency f1 and starting additional phase p1
p1 = 0;
dur1 = 1;
t1 = 0:1/fs:dur1; 

x1(1:length(t1)) = 0.5*cos(2*pi*f1*t1 + p1);

% Compute the phase at the end of the waveform
p2 = mod(2*pi*f1*dur1 + p1,2*pi);

dur2 = 1;
t2 = 0:1/fs:dur2; 
x2(1:length(t2)) = 0.5*cos(2*pi*f2*t2 + p2); % use p2 so that the phase is continuous!

x3 = [x1 x2]; % this should give you a waveform without any discontinuities 
```

请注意，虽然这为您提供了连续波形，但频率转换是瞬时的。如果您希望频率从 time_n 逐渐变为 time_n+1，那么您将不得不使用更复杂的东西，例如 McAulay-Quatieri 插值。但无论如何，如果你的片段足够短，这听起来应该足够好。

关于其他评论，如果我理解正确，您的目标只是能够听到频率序列，而不是让它听起来像原始来源。在这种情况下，幅度并不那么重要，您可以将其保持不变。

如果你想让它听起来像原始来源，那是一个完全不同的故事，可能超出了本次讨论的范围。

希望这能回答你的问题！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T15:33:48.257

你至少有2个问题。

首先，正如您所推测的，您的分析已经丢弃了原始频谱旋律部分的所有幅度信息。您将需要一种算法来捕获该信息（而不仅仅是复音输入的整个信号的幅度，或者任何自然音乐声音的 FFT 音高箱的幅度）。这是一个重要的问题，介于旋律音高提取和盲源分离之间。

其次，声音具有音色，包括泛音和包络，即使在恒定频率下也是如此。你的合成方法只是创建一个单一的正弦波，而哼唱可能会产生一堆更有趣的泛音，包括很多比音高更高的频率。对于稍微更自然的声音，您可以尝试分析自己哼唱单个音高的频谱，并尝试在合成每个频率时间戳时重新创建所有这几十个泛音正弦波，而不是一个，每个都具有适当的相对幅度在你的分析中。您还可以查看自己哼唱一个简短音符的幅度包络，并使用该包络来调制合成器的幅度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-07T19:09:20.647

使用 libfmp.c8 声化值

```
import IPython.display as ipd
import libfmp.b
import libfmp.c8
data = vamp.collect(audio, samplerate, "mtg-melodia:melodia", parameters=params)
hop, melody = data['vector']
timestamps=np.arange(0,len(melody)) * float(hop)
melody_pos = melody[:]
melody_pos[melody<=0] = 0   #get rid off - vals
d = {'time': ts, 'frequency':pd.Series(melody_pos) }
df=pd.DataFrame(d)
traj = df.values
x_traj_mono = libfmp.c8.sonify_trajectory_with_sinusoid(traj, len(audio), sr, smooth_len=50, amplitude=0.8)
ipd.display(ipd.Audio(x_traj_mono+y, rate=sr))``` 
```

# python - Python 条件（IF、ELSE）缩进异常

> ID：15463778
> 
> 赞同：-1
> 
> 时间：2013-03-17T17:23:49.440
> 
> 标签：python, scrapy, indentation, conditional-statements, craigslist

我正在开发我的第一个 Python 项目，并且正在使用 Scrapy.org 框架。我正在尝试使用 IF 语句来确定价格是否为空，因此它不会存储在我的 CSV 文件中。

出于某种原因，我收到了缩进异常。

**IndentationError：需要一个缩进块**

IF 语句位于此代码段的末尾。

感谢大家花时间帮助我！

代码：

```
from scrapy.spider import BaseSpider
from scrapy.selector import HtmlXPathSelector
from craigslist_sample.items import CraigslistSampleItem

class MySpider(BaseSpider):
name = "craig"
allowed_domains = ["craigslist.org"]
start_urls = [
'http://longisland.craigslist.org/search/sss?sort=date&query=raptor+660&srchType=T',
'http://newyork.craigslist.org/search/sss?zoomToPosting=&query=raptor+660&srchType=T&minAsk=&maxAsk=&sort=date',
'http://hudsonvalley.craigslist.org/search/sss?zoomToPosting=&query=raptor+660&srchType=T&minAsk=&maxAsk=&sort=date',
'http://newjersey.craigslist.org/search/sss?zoomToPosting=&query=raptor+660&srchType=T&minAsk=&maxAsk=&sort=date',
'http://hartford.craigslist.org/search/sss?zoomToPosting=&query=raptor+660&srchType=T&minAsk=&maxAsk=&sort=date'
]

def parse(self, response):
    hxs = HtmlXPathSelector(response)
    titles = hxs.select("//p")
    items = []
    for titles in titles:
        item = CraigslistSampleItem()
        #item["date"] = titles.select('span[@class="itemdate"]/text()').extract()
        item ["title"] = titles.select("a/text()").extract()
        item ["link"] = titles.select("a/@href").extract()
        item ["price"] = titles.select('span[@class="itempnr"]/span[@class="itempp"]/text()').extract()
        if not items ["price"]:
            #do nothing
        else:
            items.append(item)
    return items 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T17:26:17.363

这是问题所在：

```
 if not items ["price"]:
        #do nothing
    else:
        items.append(item) 
```

...您不能只在需要缩进​​语句的地方发表评论。Python 有一个关键字正是针对这种情况的—— `pass`：

```
 if not items ["price"]:
        #do nothing
        pass
    else:
        items.append(item) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T17:26:45.427

`if`, `else`,`for`等后面**必须**跟一个代码块`def`。评论不算数。这就是该[声明](http://docs.python.org/3/tutorial/controlflow.html#pass-statements)的用途：**[`pass`](http://docs.python.org/3/tutorial/controlflow.html#pass-statements)**

 **```
if not item["price"]:
    pass
else:
    items.append(item) 
```

也就是说，为什么不直接反转条件呢？

```
if item["price"]:
    items.append(item) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-17T17:26:22.700

如果 if 什么都不做而你只使用 else 你可能想使用它的否定。如果您只是测试，则需要在`pass`其中添加一个：

```
if True:
  pass  # just a comment here does not work
else:
  dostuff() 
```**

# mysql - mySQL 按数字排序查询，不按整数排序

> ID：15463780
> 
> 赞同：1
> 
> 时间：2013-03-17T17:23:59.050
> 
> 标签：mysql, sql

我在这里使用 mysql 工作台构建了一个查询：

```
USE wcms;
SELECT PLA_FNAME, PLA_LNAME, PLA_GS FROM player ORDER BY PLA_GS DESC; 
```

然后显示以下结果：

![在此处输入图像描述](../Images/8dc4d00f3922ec3012f1144947677c41.png)

正如您所看到的，它将球员进球数列排序为 9，而不是 20。按整数排序该列的最佳方法是什么，所以 20 位于列表的顶部？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-17T17:26:01.547

试试这个订单声明

```
ORDER BY PLA_GS + 0 desc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T17:27:19.847

演员表是合适的解决方案，这可能适用于懒惰的人：

```
ORDER BY PLA_GS+0 DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T01:38:50.730

感谢大家的帮助。问题是该列是错误的数据类型，如先前在评论中所述。这是通过将 column 设置为 int 来解决的：

```
ALTER TABLE PLAYER MODIFY COLUMN PLAY_GS INT(3); 
```

然后运行查询：

```
SELECT PLA_FNAME, PLA_LNAME, PLA_GS FROM player ORDER BY PLA_GS DESC; 
```

给我正确排序的结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T17:47:01.723

尝试这个：

```
ORDER BY Cast(PLA_GS as int) DESC 
```

询问：

```
USE wcms;
SELECT PLA_FNAME, PLA_LNAME, PLA_GS FROM player ORDER BY Cast(PLA_GS as int) DESC; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-17T17:49:51.133

当使用文本数据类型存储数字时，会发生这种“排序错误”(1)。命令

```
DESCRIBE player; 
```

除其他信息外，还显示了用于每列的数据类型，并且可能会显示一些文本数据类型，例如`varchar`在这种情况下。

如果您有权更改表结构，请改用数字数据类型，例如`int`. 这将解决您的排序问题。

此外，您将节省一些硬盘空间并加快查询速度。`int`s 所需的内存远少于以 ascii 格式保存数字（使用 eg. 时会发生这种情况`varchar`），并且比较整数比比较（可能很长）文本元素要快得多。

如果您无权更改表结构，请使用其他答案中已提供的转换技巧。

(1) 实际上不是错误。只是按字符排序。

# php - 如何使用 PDO 锁定 sqlite 数据库中的条目？

> ID：15463787
> 
> 赞同：1
> 
> 时间：2013-03-17T17:24:28.473
> 
> 标签：php, sql, sqlite, pdo, locking

例如，如果我有这个算法：

1.  连接到数据库
2.  尝试从数据库中选择一些数据
3.  如果数据不存在
    1.  从某处获取数据
    2.  将数据插入数据库
4.  关闭数据库连接
5.  对数据做一些事情
6.  我们完成了

然后，如果 php 脚本启动并且数据库没有数据，则可能在生成数据时（步骤 3.1），另一个用户再次启动脚本。然后，我认为这样的想法更好：

1.  连接到数据库
2.  尝试从数据库中选择一些数据（如果条目被锁定，脚本会等待直到它被解锁）
3.  如果数据不存在
    1.  锁定数据库条目
    2.  从某处获取数据
    3.  将数据插入数据库
    4.  解锁数据库条目
4.  关闭数据库连接
5.  对数据做一些事情
6.  我们完成了

我该怎么做那个*锁*？（我是SQL新手，也许有更合适的名字）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T20:29:03.900

在同一个[事务](http://www.sqlite.org/lang_transaction.html)中进行读取和可能的写入，那么数据库将确保两个用户不会相互干扰。

（阅读[ACID 属性](http://en.wikipedia.org/wiki/ACID)。）

# java - 表示二维数组的唯一“代码”

> ID：15463790
> 
> 赞同：0
> 
> 时间：2013-03-17T17:24:43.717
> 
> 标签：java

我制作了一个随机生成迷宫的游戏，迷宫存储在二维数组中。数组中的每个整数表示单元格的墙数。

它基于此处的 java 示例：[http ://rosettacode.org/wiki/Maze](http://rosettacode.org/wiki/Maze)

为了让人们共享一个独特的迷宫，我试图找到一种方法将数组转换为可由一个用户生成的字符串或整数，复制然后粘贴到另一个游戏中，然后该游戏将加载相同的迷宫。

用户可以选择最大为 25x25 的迷宫大小，因此只需打印每个值 (2|16|4|20...) 就会非常长。

如果无法将其转换为“代码”，是否有其他方法可以在不使用文件的情况下完成？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T17:34:21.523

存储随机数生成器的种子。种子完全决定了随机数生成器的输出。

假设您正在使用`java.util.Random`生成随机数，而不是使用默认构造函数`new Random()`使用

```
long seed = System.currentTimeMillis();
// store the seed somewhere
// so you can generate the same sequence of random numbers again
Random rng = new Random(seed); 
```

要制作一个可以提供给用户进行共享的简短“代码”，您可以将数字转换为十六进制或基数 36：

```
String code = Long.toString(seed, 36); // codes like heeho82h 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-17T17:37:00.490

如果您为该数组随机创建值，则只需要生成这些值的 PRNG 的状态来重新生成它们。这同时也是所有伪随机数生成器的最大弱点和优势。

由于大多数 PRNG 不允许检索和设置状态，或者具有相当大的状态（Mersenne Twister 内部有几千字节的状态），因此您可能希望使用种子。当然，你必须创建一个新的 PRNG（或重置一个现有的）来生成关卡。

为了使数字易于阅读，您应该将其呈现在某个数字基数中。以 10 为底很明显它是一个数字，并且最容易生成和解析。以 16 为基数（十六进制）和以 64 为基数产生更短、更晦涩的“代码”。无论实际值如何，将其填充为固定长度可能是一个好主意。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T18:03:31.673

您可以使用`Serialization`概念来保存状态，`2-D array`然后使用反序列化将其取回。这是保存`2-D array`状态然后读回的简单演示。我希望它会对你有所帮助：

```
import java.io.*;
class ArraySerialization 
{
    ByteArrayOutputStream baos;
    ByteArrayInputStream bins;
    public void saveState(Object obj)throws Exception
    {
        baos = new ByteArrayOutputStream();
        ObjectOutputStream oos = new ObjectOutputStream(baos);
        oos.writeObject(obj);
        oos.close();
    }
    public int[][] readState()throws Exception
    {
        bins = new ByteArrayInputStream(baos.toByteArray());
        ObjectInputStream oins = new ObjectInputStream(bins);
        Object obj = oins.readObject();
        oins.close();
        return (int[][])obj;
    }
    public static void main(String[] args) throws Exception
    {
        int arr[][]= {
                        {1,2,3},
                        {4,5,7}
                    };
        ArraySerialization ars = new ArraySerialization();
        System.out.println("Saving state...");
        ars.saveState(arr);
        System.out.println("State saved..");
        System.out.println("Retrieving state..");
        int j[][] = ars.readState();
        System.out.println("State retrieved..And the retrieved array is:");
        for (int i =0 ; i < j.length ; i++ )
        {
            for (int k = 0 ; k < j[i].length ; k++)
            {
                System.out.print(j[i][k]+"\t");
            }
            System.out.print("\n");
        }

    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T18:24:32.503

虽然它使用随机生成器，但它实际上是一个确定性过程。您可以通过知道随机种子来重复它。正如 Joni 所说，只需分享随机种子。无论如何，如果您想共享数据：NxN 网格具有 NxN 内壁，并且考虑到存储墙的存在/不存在需要 1 位，您将需要 NxN 位来存储迷宫。通过这种方式，您可以在 1kb 中存储一个 90x90 的迷宫。

# php - JSON数组不会解码？

> ID：15463791
> 
> 赞同：0
> 
> 时间：2013-03-17T17:24:47.643
> 
> 标签：php, json

JSON 显然看起来像这样。

```
 {\"amount\":10,\"conversion_id\":\"5145fd4e04af9\",\"extra_params\":
    {\"ip\":\"99.237.185.67\",\"user_agent\":\"Mozilla/5.0 (Windows NT 6.1; WOW64) 
    AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.97 
    Safari/537.11\"},\"job_title\":\"Answer a few questions about a website (Canada - 
    Sunday task #1) (Canada Only)\",\"adjusted_amount\":8.0} 
```

但是 json_decode 在 php 中不起作用。帮助？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T17:27:44.697

那不是有效的 JSON。在 JSON 键中，必须用 引用`"`，因此您的 JSON 内容将是

```
{
    "payload": {
        "conversion_id": "32402345984532934511",
        "amount": 50,
        "adjusted_amount": 25,
        "job_title": "The title of the last job they completed (and 2 other jobs)"
    },
    "signature": "1221299611f823b8c30a347373b449ad"
} 
```

另见[http://json.org](http://json.org)

# php - 在函数中对字符串进行排序是我的逻辑错误还是？

> ID：15463793
> 
> 赞同：1
> 
> 时间：2013-03-17T17:24:53.780
> 
> 标签：php, string

我需要对一些字符串进行排序并将它们与链接匹配，这就是我所做的：

```
$name_link = $dom->find('div[class=link] strong'); 
```

返回包含字符串的数组 [0]-[5]，例如 NowDownload.eu

```
$code_link = $dom->find('div[class=link] code'); 
```

返回与 0-5 中的名称匹配的链接，如链接 [0] 属于名称 [0]

我不知道它们返回的顺序，NowDownload.Eu，可能是 $code_link[4] 或 $code_link [3]，但名称数组会按顺序匹配它。

现在，我需要 $code_link[4] // 可以说它的 NowDownload.Eu 每次都变成 $link1

所以我这样做

```
$i = 0;

while (!empty($code_link[$i]))

   SortLinks($name_link, $code_link, $i);  // pass all links and names to function, and counter
   $i++;
}

function SortLinks($name_link, $code_link, &$i) { // counter is passed by reference since it has to increase after the function

   $string = $name_link[$i]->plaintext; // name_link is saved as string
   $string = serialize($string); // They are returned in a odd format, not searcheble unless i serialize

   if (strpos($string, 'NowDownload.eu')) { // if string contains NowDownload.eu

       $link1 = $code_link[$i]->plaintext; 
       $link1 = html_entity_decode($link1); 
       return $link1; // return link1
   }

   elseif (strpos($string, 'Fileswap')) {

       $link2 = $code_link[$i]->plaintext; 
       $link2 = html_entity_decode($link2);
       return $link2;
   }

   elseif (strpos($string, 'Mirrorcreator')) {

       $link3 = $code_link[$i]->plaintext;
       $link3 = html_entity_decode($link3);
       return $link3;
   }

   elseif (strpos($string, 'Uploaded')) {

       $link4 = $code_link[$i]->plaintext;
       $link4 = html_entity_decode($link4);
       return $link4;
   }

   elseif (strpos($string, 'Ziddu')) {

       $link5 = $code_link[$i]->plaintext;
       $link5 = html_entity_decode($link5);
       return $link5;
   }

   elseif (strpos($string, 'ZippyShare')) {

       $link6 = $code_link[$i]->plaintext;
       $link6 = html_entity_decode($link6);
       return $link6;
   }
}

echo $link1 . '<br>';
echo $link2 . '<br>';
echo $link3 . '<br>';
echo $link4 . '<br>';
echo $link5 . '<br>';
echo $link6 . '<br>';
die(); 
```

我知道他们找到了链接，我之前已经测试过，但我想让它成为一个函数，但它搞砸了，是我的逻辑有问题还是我传递变量/数组的方式有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T17:51:31.360

我不知道您为什么将`$i`其作为参考传递，因为您只是将它用于阅读它。您可以返回一个包含命名链接的数组并像这样使用它：

```
$all_links = SortLinks($name_link,$code_link);
echo $all_links['link1'].'<br/>';
echo $all_links['link2'].'<br/>'; 
```

您必须将循环放在函数内部，而不是外部。

# git - 如何使用 git 将本地存储库复制到远程服务器？

> ID：15463795
> 
> 赞同：16
> 
> 时间：2013-03-17T17:25:04.420
> 
> 标签：git

我正在尝试使用 git 在远程服务器中部署我的本地代码。

所以这是我在**本地**文件夹 mywebsite/ 中所做的：

```
git init
git add .
git commit -m "Initial commit" 
```

然后，在我的**网络服务器上**：

```
mkdir ~/public_html/myrepo.git
cd myrepo.git
git init --bare 
```

然后，在我的**本地**文件夹 mywebsite/ 上：

```
git remote add remote_mywebsite ssh://user@domain.com:port/~/public_html/myrepo.git
git push remote_mywebsite master 
```

这给出了这个结果：

```
Counting objects: 89, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (74/74), done.
Writing objects: 100% (89/89), 61.94 KiB, done.
Total 89 (delta 2), reused 0 (delta 0)
To ssh://user@domain.com:8943/~/public_html/myrepo.git
 * [new branch]      master -> master

git pull remote_mywebsite 
```

但是当我登录到我的网络服务器时，在 myrepo.git 中，我仍然拥有这些文件和文件夹

```
./
../
branches/
config
description
HEAD
hooks/
info/
objects/
refs/ 
```

而且我没有检索本地 mywebsite 文件夹中的文件和文件夹。

如何在远程 myrepo.git 文件夹中检索我的代码？我做错什么了吗 ？

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-17T17:40:59.453

您已经创建了一个没有工作目录的远程存储库（这是该`--bare`选项的目的）。您接下来需要做的是将该远程存储库克隆到您的网站目录中。我使用相同的方法；我有一个 ~/git 目录，其中包含一个或多个裸 git 存储库，然后为一个或多个网站克隆。您的步骤可能是：

```
# locate your bare repository in a 'git' directory
remote$ mkdir ~/git; mkdir ~/git/mywebsite.git; cd ~/git/mywebsite.git; git init --bare

# set this up as your remote
local$ git remote add origin ssh:.../git/mywebsite.git
local$ git push origin ...

# on the remote, clone into your working website
remote$ cd ~/public_html
remote$ git clone ~/git/mywebsite.git mywebsite 
```

使用这种方法，您可以在本地开发，尽可能频繁地推送到远程，然后，当您准备好时，`git pull`在远程上实际更新网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-22T07:53:42.643

这将回答你的问题

[http://www.saintsjd.com/2011/01/what-is-a-bare-git-repository/](http://www.saintsjd.com/2011/01/what-is-a-bare-git-repository/)

在裸存储库中，您不需要有源代码。

# vb.net - Excel 进程未关闭

> ID：15463798
> 
> 赞同：0
> 
> 时间：2013-03-17T17:25:21.890
> 
> 标签：vb.net, excel-2010

我的班级中有这个子程序，它只是打开 excel 来查看是否存在范围。我遇到的问题是该过程没有关闭。我一直在谷歌上搜索我的尾巴，我找不到解决方案。请看一下我的代码，看看我是否缺少一些简单的愚蠢。谢谢。

```
Private Function NamedRangeExists(ByVal ProductFileName As String, ByVal RangeName As String) As Boolean
    Dim ExcelApp As Excel.Application
    'Create an Excel Object
    ExcelApp = CType(CreateObject("Excel.Application"), Excel.Application)
    Dim TheRange As Microsoft.Office.Interop.Excel.Name
    Dim TheRangeName As String = ""
    Dim ObjWorkbook As Excel.Workbooks = ExcelApp.Workbooks

    'Open the Product
    Dim TheProduct As Excel.Workbook = ObjWorkbook.Open(ProductFileName)

    For Each TheRange In TheProduct.Names 'ExcelApp.ActiveWorkbook.Names
        TheRangeName = CStr(TheRange.Name)
        If (InStr(TheRangeName, RangeName) <> 0) Then
            TheProduct.Save()
            TheProduct.Close()
            ExcelApp.Quit()
            ExcelApp = Nothing
            Marshal.ReleaseComObject(ExcelApp)
            Return True
        End If
    Next
    TheProduct.Close()
    ObjWorkbook.Close()
    ExcelApp.Quit()

    Marshal.ReleaseComObject(ObjWorkbook)
    Marshal.ReleaseComObject(TheProduct)
    Marshal.ReleaseComObject(ExcelApp)
    TheProduct = Nothing
    ObjWorkbook = Nothing
    ExcelApp = Nothing
    GC.Collect()
    GC.WaitForPendingFinalizers()
    GC.Collect()

    Return False
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-15T16:22:19.647

对于任何未来的观众，这是我使用的一般方法：

```
 Dim xlApp As New Excel.Application
    Dim xlWB As Excel.Workbook = xlApp.Workbooks.Add
    Dim xlWS As Excel.Worksheet = xlWB.Worksheets(1)

    'do stuff

    GC.Collect()
    GC.WaitForPendingFinalizers()
    GC.Collect()
    GC.WaitForPendingFinalizers()

    FinalReleaseComObject(xlWS)
    xlWB.Close(False)
    FinalReleaseComObject(xlWB)
    xlApp.Quit()
    FinalReleaseComObject(xlApp) 
```

你需要`Imports System.Runtime.InteropServices.Marshal`.

任何其他声明的 Excel 对象（例如`TheRange`在 OP 的情况下）都需要`Nothing`在垃圾收集之前设置为。

此处显示的命令序列很重要。可以在[这里](http://www.xtremevbtalk.com/showthread.php?t=160433)找到详细的解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T17:28:37.807

这将完成这项工作！[文档](http://www.google.com/url?sa=t&rct=j&q=finalreleasecomobject&source=web&cd=1&cad=rja&ved=0CDIQFjAA&url=http%3A%2F%2Fmsdn.microsoft.com%2Fen-us%2Flibrary%2Fsystem.runtime.interopservices.marshal.finalreleasecomobject.aspx&ei=mf1FUazwK8LIyAHU_YHIAw&usg=AFQjCNHqqrsPpl1xZSkHfpUSZm4yFPS6_w&bvm=bv.43828540,d.aWc)

```
Marshal.FinalReleaseComObject(obj) 
```

# ruby - 错误版本的 Ruby/GSL 在线文档？

> ID：15463803
> 
> 赞同：0
> 
> 时间：2013-03-17T17:25:37.103
> 
> 标签：ruby, version, gsl

在我的 Debian（通过 *deb）上成功安装 Ruby/GSL 库后，使用 Ruby 1.9.3，我在运行大多数 GSL 方法时遇到了麻烦。具体来说，[这个网页](http://ruby-gsl.sourceforge.net/samples.html)显示了几个代码示例，但是（[在 Arrays 中](http://ruby-gsl.sourceforge.net/array.html)），从第一行开始，`require "GSL"`已经过时了，现在已经过时`require "gsl"`了。其余方法也不起作用。

对于我的问题的另一个示例，请[考虑对 Ruby/GSL 的另一个在线参考](http://codeforpeople.com/lib/ruby/rb-gsl-win/rb-gsl-1.7.0/html/math.html)。

```
GSL::VERSION
#=> 1.15
GSL::pow_2( 4 )
#=> 16 
```

但是当[我翻页](http://codeforpeople.com/lib/ruby/rb-gsl-win/rb-gsl-1.7.0/html/complex.html)时，

```
GSL::Complex.new( 0.9, 1.1 )
#=> ArgumentError: wrong number of arguments(2 for 0) 
```

对我来说最简单的解释是 Ruby/GSL 有不止一个版本挂在网上，而我找到的文档是旧版本的。比如有这个废弃的版本（[https://github.com/codahale/ruby-gsl](https://github.com/codahale/ruby-gsl)），那么版本历史可能有点复杂？哪个是权威版本，在哪里可以找到最新的文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T00:59:08.730

以下方法适用于 Complex 模块：

```
> c = GSL::Complex[0.9, 1.1]
=> GSL::Complex
[ 9.000e-01 1.100e+00 ]

> c.real
=> 0.9
> c.imag
=> 1.1

> c.pow 2
=> GSL::Complex
[ -4.000e-01 1.980e+00 ] 
```

# codeigniter - 代码点火器如何在配置文件夹中添加常量

> ID：15463814
> 
> 赞同：-1
> 
> 时间：2013-03-17T17:26:34.523
> 
> 标签：codeigniter

就是这样，代码点火器文件夹路径是

```
application->config
system
x -> y -> z 
```

我想为文件夹 x,y,z 创建一个常量。

如何在代码点火器中执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T17:40:31.763

您可以在 constant.php 中创建常量 .. 这就是 codeigniter 有这个文件的原因.. 看看里面..

应用程序/config/constants.php....

设置它

```
define('FOLDERPATH', 'yourpath'); 
```

得到如果

```
echo FOLDERPATH 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T17:40:52.793

**在 CodeIgniter 中添加自定义配置变量和值**

为了保持整洁，我在我的配置文件夹中创建了第二个配置文件，称为`config_aux.php`（aux 是辅助的缩写）。

在我的 autoload.php 文件中，我添加：`$autoload['config'] = array('config_aux');`

在我的`config_aux.php`文件中，我添加了以下内容：

```
$config['user_status'] = array(
                              '1' => 'Active',
                              '0' => 'Inactive'
                              ); 
```

对于常量：

```
define('FORMAT_MYSQL_DATE','%Y-%m-%d'); 
```

我的常量是全局的，但这并不困扰我。

在您的情况下，您需要一个常量来表示您的文件夹路径“x/y/z”

# haskell - 如何对树数据结构进行建模，并限制每种节点的出现位置？

> ID：15463817
> 
> 赞同：2
> 
> 时间：2013-03-17T17:26:54.947
> 
> 标签：haskell, functional-programming, gadt, data-modeling

在 Haskell 中，为递归树创建数据类型很简单，就像我们在 XML 文档中所拥有的那样：

```
data XML = 
    Text String       -- Text of text node
  | Elem String [XML] -- Tagname; Child nodes 
```

及其相关的折叠：

```
-- Simple fold (Child trees don't see the surrounding context.)
foldt :: (String -> a) -> (String -> [a] -> a) -> XML -> a
foldt fT fE (Text text) = fT text
foldt fT fE (Elem tagname ts) = fE tagname (map (foldt fT fE) ts)

-- Threaded fold for streaming applications.
-- See http://okmij.org/ftp/papers/XML-parsing.ps.gz
foldts :: (a -> String -> a) -> (a -> String -> a) ->  (a -> a -> String -> a) -> a -> XML -> a
foldts fT fE_begin fE_end = go
  where
    go seed (Text text) = fT seed text
    go seed (Elem tag children) = 
        let seed' = fE_begin seed tag in
        let seed'' = foldl go seed' children in
        fE_end seed seed'' tag 
```

我现在的问题是我不知道如何为我的树数据类型添加一些额外的限制以对 HTML 进行建模。在 HTML 中，每个元素节点只能出现在正确的[上下文中](http://www.whatwg.org/specs/web-apps/current-work/multipage/elements.html#kinds-of-content)，并且每个元素对应于其子元素的不同上下文。例如：

*   [像img](http://www.whatwg.org/specs/web-apps/current-work/multipage/embedded-content-1.html#the-img-element)这样的void 元素有一个空的上下文模型，并且不允许有任何子元素。
*   具有 Text 内容模型的元素，例如[title](http://www.whatwg.org/specs/web-apps/current-work/multipage/semantics.html#the-title-element)，只能将文本节点作为子节点（不允许嵌套标签）
*   [div](http://www.whatwg.org/specs/web-apps/current-work/multipage/grouping-content.html#the-div-element)元素不能出现在 Phrasing 上下文中，因此不允许作为[span](http://www.whatwg.org/specs/web-apps/current-work/multipage/text-level-semantics.html#the-span-element)元素的后代。

**所以我的问题是：**

1.  在 Haskell98 中我需要做什么来模拟这些限制？（我问这个是因为我猜 Haskell98 模型应该更好地翻译成其他编程语言）

    我想我们可能必须为不同的上下文创建许多不同的数据类型，但我不知道如何以有原则和清晰的方式做到这一点。我怎样才能在不迷路的情况下做到这一点，折叠功能最终会是什么样子？

2.  如果允许我们使用现代 GHC 功能（例如 GADT），模型会是什么样子？

    我有一种预感 GADT 可能有助于将限制推入类型检查器，保持折叠功能简单，但我对它们没有太多经验......

我不需要 100% 有效的解决方案，因为这显然超出了 Stack Overflow 讨论的范围。我只需要能够更好地掌握 GADT 之类的东西，并且能够自己完成剩下的工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-17T17:47:46.243

这不需要 GADT（至少现在还不需要）。你只需要教编译器更多关于你的树类型的信息。

```
data HTML
    = HTML HTMLHeader HTMLBody

data HTMLHeader
    = Header String

data HTMLBody
    = Body [HTMLContent]

data HTMLContent
    = Text HTMLText
    | Title HTMLText
    | Img  String
    | Elem String [HTML]

data HTMLText
    = Literal String
    | Bold String
    | Italic String
    | TextElems [HTMLText] 
```

现在你得到一些不变量：

```
-- Must have header and body. titles can't contain images.

x = HTML
        (Header "TEST") $ Body [
             Title (Literal "Title")
            ,Text (Bold "Content")
        ] 
```

派生此树的原则方法是从特定的 HTML 语法中获取它 - 例如 XML EBNF 也许 - [http://www.w3.org/TR/2006/REC-xml11-20060816/#sec-well-formed](http://www.w3.org/TR/2006/REC-xml11-20060816/#sec-well-formed) .

使用 GADT 可以更有效地对某些内容进行编码，并且您可以在数据类型上编写可以强制执行更强不变量的函数。

随着您开始使越来越多的属性可静态验证，编码不变量可能会变得更加复杂。那时 GADT、类型系列和其他扩展可以开始提供帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T17:54:18.080

这是由[OCsigen项目完成的，这是一个在](http://ocsigen.org/)[OCaml](http://en.wikipedia.org/wiki/OCaml)中实现的 Web 框架 ，旨在提供强类型保证。

[您可以在此文档页面](http://ocsigen.org/tyxml/api/Html5_sigs.T)上查看他们的 Html5 界面。参见例如[img 智能构造函数](http://ocsigen.org/tyxml/api/Html5_sigs.T#VALimg)的类型 （这是一口！）：

```
val img : 
  src:Xml.uri ->
  alt:Html5_types.text ->
  ([< `Accesskey
    | `Class
    | `Contenteditable
    | `Contextmenu
    | `Dir
    | `Draggable
    | `Height
    | `Hidden
    | `Id
    | `Ismap
    | `OnAbort
    | `OnBlur
    | `OnCanPlay
    | `OnCanPlayThrough
    | `OnChange
    | `OnClick
    | `OnContextMenu
    | `OnDblClick
    | `OnDrag
    | `OnDragEnd
    | `OnDragEnter
    | `OnDragLeave
    | `OnDragOver
    | `OnDragStart
    | `OnDrop
    | `OnDurationChange
    | `OnEmptied
    | `OnEnded
    | `OnError
    | `OnFocus
    | `OnFormChange
    | `OnFormInput
    | `OnInput
    | `OnInvalid
    | `OnKeyDown
    | `OnKeyPress
    | `OnKeyUp
    | `OnLoad
    | `OnLoadStart
    | `OnLoadedData
    | `OnLoadedMetaData
    | `OnMouseDown
    | `OnMouseMove
    | `OnMouseOut
    | `OnMouseOver
    | `OnMouseUp
    | `OnMouseWheel
    | `OnPause
    | `OnPlay
    | `OnPlaying
    | `OnProgress
    | `OnRateChange
    | `OnReadyStateChange
    | `OnScroll
    | `OnSeeked
    | `OnSeeking
    | `OnSelect
    | `OnShow
    | `OnStalled
    | `OnSubmit
    | `OnSuspend
    | `OnTimeUpdate
    | `OnVolumeChange
    | `OnWaiting
    | `Spellcheck
    | `Style_Attr
    | `Tabindex
    | `Title
    | `User_data
    | `Width
    | `XML_lang
    | `XMLns ],
   [> `Img ])
  nullary 
```

（在 OCaml 的标准语法中，一个`t`具有三个类型参数 的类型`a`，`b`并且`c`写成`(a,b,c) t`而不是`t a b c`）。

`<img>`可能没有孩子的事实是通过使用这里的“nullary”类型来编码的。其余的静态信息编码了可以在该节点上使用的属性类型。

奇怪的``Foo | `Bar | `Baz`东西是所谓的“多态变体”（例如在[本文](http://www.math.nagoya-u.ac.jp/~garrigue/papers/fose2000.html)中介绍），一种使用行多态性的可扩展结构和类型，或多或少是 OCaml 独有的（虽然它们对任何编程语言都有用，作为可扩展记录概括了 OCaml 和 Haskell 的通常名义记录）。这里主要用作类型级列表的一种形式。

除此之外，这是一种相对经典的幻象类型使用，由于 HTML 规范中有大量案例，只会导致极端尺寸。幻像类型是 GADT 的前身，用于在 ML 世界中强制执行额外的类型抽象。在 Haskell98 中，您可能会尝试使用类型类而不是直接类型抽象来编码相同类型的类型级信息。

# css - 使用自定义页面时，wordpress 页脚移动到主要内容的顶部

> ID：15463828
> 
> 赞同：0
> 
> 时间：2013-03-17T17:27:43.970
> 
> 标签：css, wordpress, footer, main

我刚刚开始使用 CMS 的 wordpress 并且我已经建立了一个测试网站 - 但是在我添加自定义页面模板的页面上，页脚移动到主要内容区域的最顶部。我已经尝试在网上搜索并使用了教程中提到的一些修复方法：两者；等等..并没有解决这个问题。任何解决此问题的帮助将不胜感激。

静态主页工作正常： [http ://creative-media.info/wp/](http://creative-media.info/wp/)

但是在下面的以下自定义页面上 - 您将能够看到页脚错误。 [http://creative-media.info/wp/gallery-lightbox/](http://creative-media.info/wp/gallery-lightbox/)

亲切的问候

保罗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T17:47:04.070

问题似乎是`<div id="whiteboxfaz"> </div>`

删除那个id`position: absolute;`

# grails - Grails request.withFormat 和动态脚手架视图不起作用

> ID：15463830
> 
> 赞同：3
> 
> 时间：2013-03-17T17:27:45.287
> 
> 标签：grails

我有一个配置为动态构建所有视图的 Grails 应用程序。在我的控制器中，我想处理多种请求和响应内容类型——尤其是 html 和 json：

```
request.withFormat {
    html { 
        // do something 
    }
    json { 
        // do something else 
    }
} 
```

查看 2.2.x 文档，我看到有 request.withFormat 可用于对请求 CONTENT_TYPE 做出反应。对于来自我的自定义客户端应用程序的 JSON 请求，这可以正常工作，但是在为来自动态脚手架视图的请求提供服务时，我的 request.withFormat 中定义的任何方法都不会匹配和执行。

为了使动态脚手架视图正确设置请求内容类型，我需要做些什么特别的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-21T18:41:09.543

启用以下内容：在 config.groovy

```
grails.mime.use.accept.header = true 
```

见底部： http: [//grails.org/doc/latest/ref/Controllers/withFormat.html](http://grails.org/doc/latest/ref/Controllers/withFormat.html)

# c - 构建 C 代码 - 我错过了什么吗？

> ID：15463831
> 
> 赞同：-1
> 
> 时间：2013-03-17T17:27:52.883
> 
> 标签：c

我不断收到一堆错误：

1.  参数 1 中的类型错误
2.  重新声明之前声明的“getStudentData”
3.  “（不完整）结构 studnet”的未知字段“fname”。

任何反馈都将得到重视。谢谢

```
#include <stdio.h>
#include <stdlib.h>

struct student{
    char fname[21];
    char lname[21];
    float gpa;
} str;

int getStudentData(struct studnet *current_ptr); // struct function format 

int main(void){
    struct student str;
    getStudentData(str);

    printf("Last Name: %s\n First Name: %s\n GPA: %.2f\n", str.fname, str.lname, str.gpa);
    return 0;
}

int getStudentData(struct studnet *current_ptr){

    FILE *studentFile; // declaring a pointer file variable

    studentFile = fopen("StudnetData.txt", "r"); // format for fopen; file-variable = fopen(file_name, mode);

    if ( studentFile == NULL){ 
        printf("Error: Unable to open StudnetData.txt file\n"); //test for error
    }
    else {
        fscan(studentFile, "%20s %20s has a GPA of %f\n"
                , current_ptr->fname, current_ptr->lname, current_ptr->gpa);
        // fscanf(file, format, &parameter-1, ...) 

        fclose(studentFile); // The function fclose will close the file. 
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T17:33:04.283

```
int getStudentData(struct studnet *current_ptr)
                          ^^^^^^^ 
```

你的意思是`struct student`代替`struct studnet`. 你不想要一个钉网，是吗？

```
getStudentData(str); 
```

另外，这应该是

```
getStudentData(&str); 
```

因为您正在修改传入的结构，为此，您需要一个指向它的指针（您已在函数原型中正确声明）。

此外，您还有另一个错字：

```
fscan(studentFile, "%20s %20s has a GPA of %f\n" 
```

函数的名称是`fscanf()`，不是`fscan()`。

我能发现的最后一个错误：

```
fscanf(..., current_ptr->fname, current_ptr->lname, current_ptr->gpa)
                                                    ^^^^^^^^^^^^^^^^ 
```

您不要将指针传递给`gpa`成员，它必须是`&current_ptr->gpa`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T17:34:43.783

我的编译器推出以下输出：

```
blah.c:10:27: warning: declaration of 'struct studnet' will not be visible outside of this function [-Wvisibility]
int getStudentData(struct studnet *current_ptr); // struct function format 
                          ^
blah.c:14:20: error: passing 'struct student' to parameter of incompatible type 'struct studnet *'
    getStudentData(str);
                   ^~~
blah.c:10:36: note: passing argument to parameter 'current_ptr' here
int getStudentData(struct studnet *current_ptr); // struct function format 
                                   ^
blah.c:20:27: warning: declaration of 'struct studnet' will not be visible outside of this function [-Wvisibility]
int getStudentData(struct studnet *current_ptr){
                          ^
blah.c:20:5: error: conflicting types for 'getStudentData'
int getStudentData(struct studnet *current_ptr){
    ^
blah.c:10:5: note: previous declaration is here
int getStudentData(struct studnet *current_ptr); // struct function format 
    ^
blah.c:30:9: warning: implicit declaration of function 'fscan' is invalid in C99 [-Wimplicit-function-declaration]
        fscan(studentFile, "%20s %20s has a GPA of %f\n"
        ^
blah.c:31:30: error: incomplete definition of type 'struct studnet'
                , current_ptr->fname, current_ptr->lname, current_ptr->gpa);
                  ~~~~~~~~~~~^
blah.c:20:27: note: forward declaration of 'struct studnet'
int getStudentData(struct studnet *current_ptr){ 
```

## 让我们分解这些警告和错误：

许多警告是因为您拼写错误`student`为`studnet`. 例如，这个：

```
blah.c:31:30: error: incomplete definition of type 'struct studnet'
                , current_ptr->fname, current_ptr->lname, current_ptr->gpa);
                  ~~~~~~~~~~~^ 
```

我们还应该按值传递指针而不是 stuct。将一行更改为`getStudentData(&str);`将有助于以下错误：

```
blah.c:14:20: error: passing 'struct student' to parameter of incompatible type 'struct studnet *'
    getStudentData(str);
                   ^~~ 
```

最后，我想你想要`fscanf`而不是`fscan`，这将解决这个错误：

```
blah.c:30:9: warning: implicit declaration of function 'fscan' is invalid in C99 [-Wimplicit-function-declaration]
        fscan(studentFile, "%20s %20s has a GPA of %f\n"
        ^ 
```

没有针对以下错误的警告（但是，由于 fscanf 错误），但是如果我修复了上述错误，我会收到另一个需要修复的警告。这可以通过传递`&current_ptr->gpa`而不是`current_ptr->gpa`.

```
blah.c:31:59: warning: format specifies type 'float *' but the argument has type 'double' [-Wformat]
                , current_ptr->fname, current_ptr->lname, current_ptr->gpa);
                                                          ^~~~~~~~~~~~~~~~ 
```

# css - 根据 div CSS 的宽度和高度缩放背景图像

> ID：15463833
> 
> 赞同：0
> 
> 时间：2013-03-17T17:27:56.087
> 
> 标签：css

有没有办法根据 div 的宽度和高度来缩放背景图像？仅使用 CSS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T17:31:34.243

我`background-size: cover`用于我的全尺寸 bg 图像。如果你不喜欢这样的结果，你可以在 div 中设置一个图像并给出以下任一选项：

容器全宽，保持纵横比：

```
width    : 100%;
height   : auto;
position : absolute;
z-index  : 0; /* something lower than content */ 
```

容器全高，保持纵横比：

```
width    : auto;
height   : 100%;
position : absolute;
z-index  : 0; /* something lower than content */ 
```

容器的全宽和全高，会翘曲和拉伸：

```
width    : 100%;
height   : 100%;
position : absolute;
z-index  : 0; /* something lower than content */ 
```

# vb.net - 通过链接从 Web 浏览器启动可执行文件

> ID：15463835
> 
> 赞同：2
> 
> 时间：2013-03-17T17:28:02.387
> 
> 标签：vb.net, cross-browser, protocols

我见过大量的游戏，以及没有使用“game://15.64.15.64:25876”之类的链接打开他们的应用程序。

我希望能够从我的网站为安装它的用户启动我的游戏的 .exe，并让它在任何浏览器上运行；同时我希望能够传递一个参数（只有 1 个）。

需要添加/修改哪些注册表值才能适用于**所有浏览器？**如果在所有浏览器中设置它都有额外的步骤，你能解释一下这些步骤吗？我发现的其他问题并没有太大帮助或仅在 IE 中有效。我至少需要 Firefox、Chrome 和 IE。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T18:08:08.067

这里问了一个类似的问题： [如何让网站执行链接？](https://stackoverflow.com/questions/11329757/how-do-i-make-the-website-execute-links)

您最终会在注册表中得到这样的结构：

```
HKEY_CLASSES_ROOT
   game
      (Default) = "URL:Game Protocol"
      URL Protocol = ""
      DefaultIcon
         (Default) = "game.exe,1"
      shell
         open
            command
               (Default) = "C:\Games\YourGame\game.exe" "%1" 
```

有关详细信息，请参阅 MSDN 上的这篇文章： [将应用程序注册到 URI 方案](http://msdn.microsoft.com/en-us/library/aa767914.aspx)

正如 OP 所提到的，上述方法仅适用于 IE。以下是关于如何使其在其他浏览器中工作的一些想法：

*   Chrome：[是否可以使用 Google Chrome 打开自定义 URL 方案？](https://stackoverflow.com/questions/2330545/is-it-possible-to-open-custom-url-scheme-with-google-chrome)
*   Firefox：[编写 Firefox 协议处理程序](http://mike.kaply.com/2011/01/18/writing-a-firefox-protocol-handler/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:28:21.697

我能想到的一种方法是从浏览器（gamesession.gme 或您的扩展程序）下载文件并将您的游戏设置为该扩展程序的默认应用程序。

# opencv - 使用外部计数器或最佳替代方案进行分析

> ID：15463836
> 
> 赞同：1
> 
> 时间：2013-03-17T17:28:04.197
> 
> 标签：opencv, profiling, external, counter

我是非程序员，试图评估在（opencv-）函数中花费的时间。我们有一个带有计数器的 AD 转换器，该计数器能够以 1 MHz = 1 µs 的分辨率对外部信号（例如来自函数发生器）进行计数。可以使用函数 cbIn32(..., unsigned long *pointertovalue) 查询实际的计数器状态。

所以我的想法是在调用感兴趣的函数之前和之后查询计数器状态，然后计算差异。但是，当我在没有函数调用的情况下计算差异时出现了疑问，这揭示了 rel. 高波动（80 到 400 µs 左右的值）。我想知道，如果计算调用 cbIn32() 的平均时间（大约 180 µs）并从假定的函数花费的时间中减去这个时间是一个有效的解决方案。

所以我的前两个问题：

1.  这种方法通常可行还是无用？
2.  波动从何而来？

或者，我们尝试使用 getTickCount()，它似乎提供了合理的值。但检查论坛显示它的分辨率较低，约为 10 毫秒，这不能令人满意（100 微秒的分辨率将受到赞赏）。但是，我们得到的值在亚毫秒范围内。这让我想到了下一个问题：

1.  当分辨率约为 10 毫秒时，使用 getTickCount() 评估函数的时间如何在微秒范围内？
2.  我应该相信获得的值吗？

我也用 gprof 尝试过，但它给了我“没有时间积累”，尽管我确信在包含 opencv 相关调用的函数中花费的时间至少是几毫秒。我什至尝试使用 ENABLE_PROFILING=ON 重建 opencv，但结果相同。我在某处读到您需要构建静态 opencv 库以启用分析，但我不确定这是否会改善这种情况。所以这里的问题是：

1.  我该怎么做才能让 gprof 也“看到”opencv 函数？

下一个替代方案是 WINAPI 的 QueryPerformanceCounter() 函数。我不知道如何使用它，但如果你推荐它，我会努力解决。对该方法的问题：

1.  多核会不会有问题？
2.  如果是，是否有一种“简单”的方法来处理这个问题？

我也用verysleepy尝试了它，但它以某种方式提前退出（与其他.exe一起工作正常）。

新手友好的答案将非常非常感谢。我的目标是找到精度最高的最简单方法。我正在使用 MinGW 开发 Win7 64 位、Eclipse。

谢谢你的帮助...

# java - 动态跳过日志消息

> ID：15463837
> 
> 赞同：0
> 
> 时间：2013-03-17T17:28:34.070
> 
> 标签：java, slf4j, logback

我有两个要跟踪的公共方法。其中一种方法反复调用另一种方法。我想做的是只跟踪从外部调用的方法。

这是一个简单的类来演示我的意思：

```
public class LoggingExample {
    private static final Logger logger = LoggerFactory.getLogger(LoggingExample.class);
    public static final String USER_ROOT = "/home/waisbrot";

    /** could be called by fileExistsRobust *or* from outside */
    public static boolean fileExists(String filename) {
        logger.trace("Checking for file {}", filename);
        File f = new File(filename);
        return f.exists();
    }

    /** always gets called from outside */
    public static boolean fileExistsRobust(String filename) {
        logger.trace("Checking for any varient of {}", filename);
        if (fileExists(filename))
            return true;
        for (String prefix : prefixes) { // this list is 100 items long
            if (fileExists(prefix + filename));
                return true;
        }
        return false;
    }
} 
```

在我的代码的其他地方，我可能会调用`fileExists`，在这种情况下，我希望打印它的日志消息（假设我正在跟踪它）。但是，如果我打电话`fileExistsRobost`比我想要*那个*日志消息，但不是`fileExists`.

我想跟踪这两种方法，但是当我调用第二种方法时，我被埋没在输出中。我希望可以配置 Logback 以了解我想要的内容，但我在文档中没有看到任何有用的信息。我可以在输入时翻转一个标志`fileExistsRobust`，然后在 中对其进行测试`fileExists`，但是使用多个线程（因为这些是静态方法）会变得很难看，而且它似乎开始用大量的日志记录基础设施污染类。我可以使用 MDC 来存储信息，但这似乎是对 MDC 的滥用。

以前有人遇到过这种情况吗？你是怎么处理的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T17:42:44.510

我假设您能够更改代码。那么在我看来，最简单的方法是通过引入另一个`internalFileExists(String filename)`或重载 fileExists(String filename) 来避免这个问题：

```
public static boolean fileExists(String filename, boolean doLog) {
   if (doLog) logger.trace("Checking for file {}", filename);
   File f = new File(filename);
   return f.exists(); 
} 
```

并让 fileExistsRobust 使用 doLog = false 的重载版本，而单参数版本重定向到 fileExists(filename, true)。

这并没有真正解决问题，而是缓解了问题。

# node.js - 使用 restify (node.js) 提供静态文件

> ID：15463841
> 
> 赞同：24
> 
> 时间：2013-03-17T17:29:09.863
> 
> 标签：node.js, http, restify

我有以下代码：

应用程序.js

```
[...]

server.get(/\/docs\/public\/?.*/, restify.serveStatic({
  directory: './public'
}));

server.listen(1337, function() {
  console.log('%s listening at %s', server.name, server.url);
}); 
```

我有以下文件结构

```
app.js
public/
  index.html 
```

所以我尝试浏览：

```
http://localhost:1337/docs/public/index.html 
```

我得到

```
{
  code: "ResourceNotFound",
  message: "/docs/public/index.html"
} 
```

我尝试了几种变体，但它们似乎都不起作用。

我敢肯定这应该是很明显的我想念的东西

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-17T17:53:50.510

`restify`将使用该`directory`选项作为*整个路由路径*的前缀。在您的情况下，它将寻找`./public/docs/public/index.html`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-11-22T09:59:11.107

1.  该`directory`选项是整个路径的前缀。
2.  相对路径在更高版本的 Restify 中无法正常工作（我测试了 2.6.0-3、2.8.2-3 - 它们都产生 NotAuthorized 错误）

现在解决方案变为：

```
server.get(/\/docs\/public\/?.*/, restify.serveStatic({
    directory: __dirname
})); 
```

然后你的静态文件将需要在`./docs/public`.
（`__dirname`是一个全局变量，包含您正在运行的脚本的绝对路径）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-09-30T22:04:12.983

根据@NdeeJim 的回答，任何想知道如何提供所有静态资源的人：

```
server.get(/\/?.*/, restify.plugins.serveStatic({
            directory: __dirname,
            default: 'index.html',
            match: /^((?!app.js).)*$/   // we should deny access to the application source
     })); 
```

# css - 代码右侧的 sass 注释

> ID：15463845
> 
> 赞同：0
> 
> 时间：2013-03-17T17:29:40.960
> 
> 标签：css, ruby-on-rails, sass

我想有以下结构：

```
sass: rule //coment 
```

但是带有 // 的注释似乎只在新行上被接受。

有没有办法在规则所在的同一行评论 sass 规则？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T17:31:07.920

写评论的另一种方式是这样的：

```
/* comment text here */ 
```

请注意，除非您使用压缩选项，否则此类注释将保留在您生成的 css 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-15T20:05:44.150

是的你可以。但仅在新行上，或在属性：值对之后。也许是一个不起眼的错误，但如果在选择器之后添加它们可能会在编译时中断。这可能会在较新版本的 SASS 中得到修复，因此如果您在编译注释时遇到问题，请检查如下所述的位置（或更新您的版本）。

IE

```
// This works
.myclass
    width: 30px //comment

// This breaks for some on compile
.myclass //comment
    width: 30px

// This style is sass only and won't be compiled/output in the final css file
/* this style will be seen in final css file as a normal css comment */ 
```

# android - android设备显示imageview质量非常低

> ID：15463846
> 
> 赞同：0
> 
> 时间：2013-03-17T17:29:46.337
> 
> 标签：android, image-quality

我`ImageView`用来显示 .png 图像。在模拟器上它的质量很差，但在索尼 Xperia P 和 Galaxy S III 手机上它看起来很完美。所以我认为它唯一的模拟器故障。

然后我在其他设备 HTC Desire Z 上尝试了我的应用程序，我再次看到质量很差。这可能是什么原因，因为分辨率差异不是那么大。那可能是操作系统故障吗？On Desire 它的 v2.2 在 Sony 和 Samsung 它的 v4.0+ 上。很迷茫。

```
 <RelativeLayout android:layout_width="match_parent"
            android:layout_weight="1"  
            android:layout_height="wrap_content">

<ImageView
    android:id="@+id/imgD"

    android:layout_width="wrap_content"
    android:layout_height="wrap_content"

    android:scaleType="fitStart"
    android:src="@drawable/imgD" /> 
```

使用缩小图像大小

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T21:08:45.053

如果您在具有 16 位颜色显示的设备上使用 PNG-24（24 位）图像，您将获得一种称为 PNG 条带的效果。您应该检查图像的颜色深度以及显示效果的显示器的颜色深度，以验证这是否是您的问题的原因。也许为您的应用程序使用具有较低颜色深度的 PNG 可以解决问题（如果您可以解决颜色深度的损失）。

有关更多信息，请查看以下链接：

色带：

[http://commons.wikimedia.org/wiki/File:Colour_banding_example01.png](http://commons.wikimedia.org/wiki/File:Colour_banding_example01.png)

[http://en.wikipedia.org/wiki/Color_banding](http://en.wikipedia.org/wiki/Color_banding)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T22:05:13.487

答案是因为操作系统版本不同。在 Android 2.3+ 版本上一切看起来都不错

# android - 如何在android中垂直对齐标签

> ID：15463848
> 
> 赞同：1
> 
> 时间：2013-03-17T17:30:02.727
> 
> 标签：android, tabwidget, android-tabs

我在 android 中使用 tabwidget 使其垂直对齐，但找不到有效的方法来完成它

这是我想要实现的目标

![在此处输入图像描述](../Images/628bf67877da39c6b5487ea8a35c2e0a.png)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-17T17:39:24.340

您可以放置​​一列看起来像选项卡的按钮，并在侧面更改 ListView 的内容

# c - 为什么这个结构的这个成员没有打印出来（C 编程）

> ID：15463849
> 
> 赞同：1
> 
> 时间：2013-03-17T17:30:03.573
> 
> 标签：c, list, struct, linked-list, structure

在下面的代码中，由 'root' 指向的 'netAddr' 打印 put 但不是由 'pointer. 在此先感谢，仅作为最后的手段。'netAddr' 的值会打印出来，但 'pointer' 指向的任何东西都不会。

```
struct RouteInfo
{
unsigned long netAddr;
unsigned long gateAddr;
unsigned long maskAddr;
char ifName[IF_NAMESIZE];
int metric;
int ttl;
    struct RouteInfo *next;
};

   struct RouteInfo *root; /* This will be the unchanging first node */

    /* This will point to each node as it traverses the list */
    struct RouteInfo *pointer;

    //allocating space for the root
    root = malloc(sizeof(struct RouteInfo));
    root->next = 0;
    root->netAddr = 19216811;

    //Point to 1st Item
    pointer = root;

    /* Creates a node at the end of the list */
    pointer->next = malloc( sizeof(struct RouteInfo) );
    pointer = pointer->next;
    pointer->maskAddr = 25525500;

    pointer->next = malloc( sizeof(struct RouteInfo) );
    pointer = pointer->next;
    pointer->gateAddr = 19216810;

    pointer->next = malloc( sizeof(struct RouteInfo) );
    pointer = pointer->next;
    strcpy(pointer->ifName, "eth1");

    pointer->next = malloc( sizeof(struct RouteInfo) );
    pointer = pointer->next;
    pointer->metric = 16;

    pointer->next = malloc( sizeof(struct RouteInfo) );
    pointer = pointer->next;
    pointer->ttl = 30;

    //marking the last as NULL
    pointer->next = 0;

    //Pointer points to root again
    pointer = root;
        printf("%lu%lu \t",root->netAddr, pointer->maskAddr); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T17:31:56.783

你永远不会初始化`root->maskAddr`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T17:42:09.113

实际上你没有分配给`root->maskAddr = ;`

后：

```
root = malloc(sizeof(struct RouteInfo));
root->next = 0;
root->netAddr = 19216811; 
```

添加：

```
root->maskAddr = 25525555; 
```

及其工作：

```
:~$ ./a.out 
19216811 25525555 
```

在这里您可以找到您的工作代码：[**键盘**](http://codepad.org/ZPMy9hck)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T17:39:16.367

正如 NPE 所说，您从不重视`root->maskAddr`. 所以也许你的意思是这个？

```
printf("%lu%lu \t",root->netAddr, pointer->next->maskAddr); 
```

# ember.js - Ember 如何处理这个控制器 .property()

> ID：15463850
> 
> 赞同：0
> 
> 时间：2013-03-17T17:30:08.087
> 
> 标签：ember.js

我`Document`在网站的侧边栏区域显示标题列表。为了实现这一点，我`documents`在`App.SidebarController`

```
Document = require '../models/document'

SidebarController = Ember.Controller.extend
  documents: (->
    Document.find()
  ).property()

module.exports = SidebarController 
```

这很好用，当我`Document`在我的应用程序中创建一个新的时，这个侧边栏属性会自动更新，我不知道为什么。无论我在`.property()`函数中添加什么，它都有效。例如

```
.property('Document')
.property('App.Document') 
```

有人可以解释这是如何工作的吗？`property()`该函数要观察的正确事情是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T18:08:55.697

所以你基本上是说这是有效的，但你想知道为什么。

**这是我的猜测：**当你的控制器被渲染时，你的计算属性第一次被计算并返回一个数组的实例。当您创建一个新文档时，**我认为这个相同的数组已更新（= 添加了文档）。**因此，尽管您没有在 property() 上指定依赖键，但它确实有效。这是因为正确的阵列已经到位。正如我所说的只是一个猜测，但这似乎是一个可以理解的解释。

**正确的做法是什么？** 恕我直言，不应直接在计算属性中使用此类数据访问方法。相反，您应该在 Route 中调用此数据访问方法，然后将其分配给控制器。这样可以确保 find() 方法在需要时被执行。

# r - 对 R 术语感到困惑：属性、参数和参数

> ID：15463851
> 
> 赞同：4
> 
> 时间：2013-03-17T17:30:13.933
> 
> 标签：r, function, parameters, attributes, arguments

一劳永逸地，我想正确使用 R 术语。然而，我正在阅读的书籍都没有太大帮助，在我看来，作者有时会随意选择名字。所以，我的问题是什么时候使用“属性”、“参数”和“参数”这些名称？

从我目前阅读和理解的内容来看，参数是函数可以作为输入的内容。例如，如果我有一个计算两个值之和的函数，则`sum(value1, value2)`'value1' 和 'value2' 是函数的参数。

如果我们正在调用一个函数，我们将调用传递给函数参数的值。对于 sum-function 示例，“23”和“48”将是函数参数：

```
sum(23,48). 
```

所以基本上我们在定义一个函数的时候叫它参数，在我们调用函数的时候我们叫它参数（所以参数是传递给函数的参数）

但是“属性”呢？据我了解，属性相当于方法中的参数（方法是类对象的函数）？

例如，如果我有类似的东西：

```
heatmap(myData, Colv=NA, Rowv=NA) 
```

... ，'myData' 会是参数还是属性？那么`Colv=NA`和`Rowv=NA`呢？heatmap() 不是一个函数，因此括号中的所有内容都应该称为参数吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-17T18:27:57.147

假设我们有：

```
f <- function(x) x + 1
comment(f) <- "my function"
f(3) 
```

**论据** 我们区分*形式论据*和*实际论据*。以上`x`是 的正式*论点*`f`。的形式参数的名称由下`f`式给出：

```
> names(formals(f))
[1] "x" 
```

函数的*实际参数*因一次调用而异，在上面的示例中只有一个实际参数`3`。

该函数`args`可用于显示函数的整个函数签名，包括形式参数和默认参数，如果您正在调试函数，您可以输入`match.call()`以列出替换实际参数的函数签名。

**属性**R 对象的*属性*`attributes(f)`如下所示：

```
> attributes(f)
$srcref
function(x) x + 1

$comment
[1] "my function" 
```

有一个例外，即对象的*类*也被视为属性，但不是由上述给出，而是由以下给出`class`：

```
> class(f)
[1] "function" 
```

**参数** 有时函数参数被称为*参数*，或者有时一个是指那些固定为参数的参数，但这往往与数学和统计学有关，而不是 R。

在统计模型中，模型通常是数据和*模型参数*的函数，通常通过似然来实现。例如，这里：

```
> lm(demand ~ Time, BOD)

Call:
lm(formula = demand ~ Time, data = BOD)

Coefficients:
(Intercept)         Time  
      8.521        1.721 
```

截距和时间的线性回归系数（即 8.521 和 1.721）通常被称为模型参数。

正如 Dwin 已经[指出](https://stackoverflow.com/questions/15463851/confused-about-r-terminology-attributes-parameters-and-arguments/15464247#15464247)的那样，影响 R 中图形的各种值也称为参数，可以通过以下方式显示：

```
> par() 
```

而其他R图形系统中对应的概念也常被称为参数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-17T18:04:24.723

我想通俗地使用术语“属性”可能是指数据对象的几个特征，但在 R 中有一个非常具体的含义。属性是由函数返回的值：`attributes`或`attr`. 这些对于将类和名称存储为属性的语言至关重要。`attributes<-`还有另外两个分配功能：`attr<-`允许分配附加属性以支持特定类别的目标。

```
?attributes
?attr 
```

有一个`par`功能可以设置控制基本图形行为的图形“参数”。因此，这将是 R 特定于 R 的参数使用，可能与使用“参数”略有不同，后者通常应用于函数的形式参数。

```
?par 
```

这是一个`args`应用于函数名称或匿名函数的函数，它将返回其参数（作为“闭包”，就像用户在函数定义期间键入一样在控制台上打印）以及它们的默认值。该函数`formals`将以列表的形式返回相同的“参数”信息。

```
?args
?formals 
```

我意识到我在与 R 技能非常出色的 Matthew 进行含蓄的争论。与他相反，我认为这在 R 的上下文`attributes` 中`arguments`具有更具体的含义，并且细心的作者将努力使它们的含义分开。如果上下文显然是关于应用函数的讨论，我不会有任何问题来理解使用`parameter`作为参数同义词的人，因为这是数学中的典型用语。我同意你最后一句话的结论。这些是“论据”，最重要的是不是属性。heatmap 返回的对象的属性是：

```
 > attributes(hv)  #from first example in ?heatmap
 #$names
 # [1] "rowInd" "colInd" "Rowv"   "Colv" 
```

但是只有一些参数成为属性，然后才在函数执行期间被分配给返回值之后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T15:12:03.767

我不确定 R 与 Python 有多么相似，但我认为大多数术语在不同语言之间应该是一致的。根据我在过去几天阅读和学习的内容，**参数**基本上是定义函数**时**作为其输入的参数：

```
my_function <- function (param1, param2){
...
} 
```

如果您使用某些输入值（作为参数传递给函数）调用函数，则称为参数**：**

```
my_function(arg1, arg2) 
```

属于类的函数称为**方法**。**属性**可以是与类对象（或所谓的**实例**）关联的值或方法

因此，我们是否调用某个参数或属性的问题取决于我们调用的是什么：函数或方法。但是如果我们调用函数，我会说 now**参数**是一个合适的术语`heatmap`，例如：

```
heatmap(my_data) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-12T02:42:01.817

**Attribute** : 对象的属性，例如 Person 有**String fName, lName;**

**参数**：出现在函数/方法定义中，例如 public void setName( **fName** , **lName** )

**参数**：调用/调用方法/函数时为方法/函数的参数传递的值，例如 myPerson.setName(" **Michael** ", " **Jackson"** )

# css - 按下选择器

> ID：15463854
> 
> 赞同：63
> 
> 时间：2013-03-17T17:30:25.853
> 
> 标签：css

我想创建一个`button`在按下时改变其样式的。这是我的 CSS 代码：

```
button {
    font-size: 18px;
    border: 2px solid gray;
    border-radius: 100px;
    width: 100px;
    height: 100px;
}

button:active {
    font-size: 18px;
    border: 2px solid red;
    border-radius: 100px;
    width: 100px;
    height: 100px;
}
```

```
<button>Button</button>
```

只有当我单击并按住它时它才会更改。我想让它在按下后改变样式。例如，正常状态为白色，被点击的状态为绿色，点击后为红色。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-03-17T17:43:56.923

如果您使用`<a>`标签而不是按钮，则可以执行此操作。我知道这并不完全符合您的要求，但如果您找不到解决方案，它可能会给您一些其他选择：

从这里的另一个答案的演示中借用我制作了这个：

```
a {
  display: block;
  font-size: 18px;
  border: 2px solid gray;
  border-radius: 100px;
  width: 100px;
  height: 100px;
  text-align: center;
  line-height: 100px;
}

a:active {
  font-size: 18px;
  border: 2px solid green;
  border-radius: 100px;
  width: 100px;
  height: 100px;
}

a:target {
  font-size: 18px;
  border: 2px solid red;
  border-radius: 100px;
  width: 100px;
  height: 100px;
}
```

```
<a id="btn" href="#btn">Demo</a>
```

注意使用`:target`; 这将是通过哈希定位元素时应用的样式。这也意味着您的 HTML 必须是这样的：`<a id="btn" href="#btn">Demo</a>`以自身为目标的链接。和演示[http://jsfiddle.net/rlemon/Awdq5/4/](http://jsfiddle.net/rlemon/Awdq5/4/)

感谢@BenjaminGruenbaum，这里有一个*更好*的演示：http: [//jsfiddle.net/agzVt/](http://jsfiddle.net/agzVt/)

[另外，作为脚注：这应该使用 JavaScript 并从元素中应用/删除 CSS 类来完成。这将不那么令人费解。]

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-03-17T17:32:22.413

`:focus`只要用户不点击其他地方，您就可以使用which 将保持样式。

```
button:active {
    border: 2px solid green;
}

button:focus {
    border: 2px solid red;
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-09-24T15:52:04.427

我们应该包含一点 JS 吗？因为 CSS 基本上不是为这项工作而创建的。CSS 只是为 HTML 添加样式的样式表，但它的伪类可以做一些基本 CSS 做不到的事情。例如`button:active`active 是伪的。

**参考：**

[http://css-tricks.com/pseudo-class-selectors/](http://css-tricks.com/pseudo-class-selectors/)你可以在这里了解更多关于伪的信息！

**你的代码：**

您拥有的基本但有用的代码。并且`:active`只有在触发点击事件后才会发生。

```
button {
font-size: 18px;
border: 2px solid gray;
border-radius: 100px;
width: 100px;
height: 100px;
}

button:active {
font-size: 18px;
border: 2px solid red;
border-radius: 100px;
width: 100px;
height: 100px;
} 
```

这就是 CSS 会做的，rlemon 建议的很好，但正如他所建议的那样，这将需要`a`标记。

**如何使用 CSS：**

你也可以用`:focus`。 `:focus`一旦点击就可以工作，并且会一直保持到你点击其他地方，这是 CSS，你试图使用 CSS，所以`:focus`用来改变按钮。

**JS 会做什么：**

JavaScript 的 jQuery 库将帮助我们编写这段代码。这是示例：

```
$('button').click(function () {
  $(this).css('border', '1px solid red');
} 
```

这将确保即使点击退出，按钮也会保持红色。要更改焦点类型（将红色更改为其他颜色），您可以使用以下命令：

```
$('button').click(function () {
  $(this).css('border', '1px solid red');
  // find any other button with a specific id, and change it back to white like
  $('button#red').css('border', '1px solid white');
} 
```

这样，您将创建一个导航菜单。当您单击它们时，它将自动更改选项卡的颜色。:)

希望你能得到答案。祝你好运！干杯。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-19T00:46:36.900

如果按钮打开一个新页面，您可以使用 php 执行此操作。

例如，如果按钮链接到名为 pagename.php 的页面，网址为：www.website.com/pagename.php，只要您停留在该页面上，该按钮就会保持红色。

我用'/'分解了网址，得到了类似的东西：

url[0] = pagename.php

```
<? $url = explode('/', substr($_SERVER['REQUEST_URI'], strpos('/',$_SERVER['REQUEST_URI'] )+1,strlen($_SERVER['REQUEST_URI']))); ?>

<html>
<head>
  <style>
    .btn{
     background:white;
     }
    .btn:hover,
    .btn-on{
     background:red;
     }
  </style>
</head>
<body>
   <a href="/pagename.php" class="btn <? if (url[0]='pagename.php') {echo 'btn-on';} ?>">Click Me</a>
</body>
</html> 
```

注意：我没有尝试此代码。它可能需要调整。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-06T04:24:37.080

也许`:active`结束`:focus`会有`:hover`帮助！尝试

```
button {
background:lime;
}

button:hover {
background:green;
}

button:focus {
background:gray;
}

button:active {
background:red;
} 
```

**然后**：

```
<button onkeydown="alerted_of_key_pressed()" id="button" title="Test button" href="#button">Demo</button> 
```

**然后**：

```
<!--JAVASCRIPT-->
<script>
function alerted_of_key_pressed() { alert("You pressed a key when hovering over this button.") }
</script> 
```

```
对不起最后一个。:) 我只是向您展示了一个*很酷*的功能！
等等……我只是强调了一个代码块吗？这*太*酷了！！！
```

# events - Ember.js 和 Isotope.js - 在渲染所有子视图后执行 Javascript

> ID：15463858
> 
> 赞同：0
> 
> 时间：2013-03-17T17:31:21.963
> 
> 标签：events, ember.js, views, rendering

我使用 Ember.js (1.0\. RC) 并希望将 Isotope.js 的功能应用于我位于“容器”中的一些视图。

所以我的路由基本上从服务器加载包含所需数据的模型，设置控制器的内容并将其绑定到模型的数据，效果很好。

接下来，我为我的 IndexRoute 声明了一个模板，它遍历所有加载的项目，如下所示：

```
{{each item in this itemViewClass="App.ItemView"}} 
```

这些项目是应该使用 isotope.js 过滤的图像。ItemView 暂时只是指一个简单的模板。

执行链如下：路由 -> 获取模型数据 -> 设置控制器 -> 创建 IndexView -> 将所有 ItemViews 堆积在一个 DIV 容器中。

现在我需要检查是否所有的 ItemViews 都已加载并且渲染是否最终完成以应用 isotope.js 的过滤功能，但我不知道该怎么做。

IndexView`didInsertElement`事件在它被渲染并且在 ItemViews 添加到 DOM 之前立即触发。

如果我不通过模型获取数据而是将其硬编码到变量中，我已经尝试设置一个`ContainerView`可以与之结合使用的方法。`Ember.run.scheduleOnce("afterRender"...)``content`

这个`CollectionView`练习也对我不利。

任何想法如何解决这种痛苦？我真的很感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T18:01:58.093

我不确定 isotope.js 究竟是如何工作的。考虑到它只是一个 jquery 插件，你可以像这样调用 isotope，即使它是 a`ContainerView`或`CollectionView`.

```
didInsertElement: function() {
   Ember.run.next(this, function(){
     this.$().isotope({}) // or watever code u want to write
   });
} 
```

这可以确保 ember.run 中的代码在渲染完成后运行。

# java - Java 服务器和 Arduino 客户端之间的安全通信：需要一个建议

> ID：15463859
> 
> 赞同：0
> 
> 时间：2013-03-17T17:31:24.230
> 
> 标签：java, c, encryption, arduino, vpn

有一个 Java 服务器和许多 Arduino 设备，它们通过 TCP 连接进行连接。我们可以使用的板：[Arduino Uno](http://goo.gl/iyIxK)或[Arduino Mega 2560](http://goo.gl/BOM3K)

每个 Arduino 设备实际上都是报告器（例如，它从水表获取数据并将数据传输到服务器）或某些设备的某种远程控制。

目前，此连接不安全。我需要使其安全，即实施VPN。

我在这个知识领域是全新的，我正在尝试找出我应该使用的方式。

我真的希望我能找到一些协议的现有实现，并将其构建到这个系统中。

但是哪个协议？

我已经发现我不能使用 IPSec，因为 TCP/IP 堆栈是在这些 Arduino 设备中硬件实现的，所以我们不能修改它。

因此，我需要使用一些比 TCP 更高的协议，并且需要用 C（用于客户端设备）和 Java（用于服务器）实现。

我正在尝试找到 SSL、PPTP、L2TP 或其他我仍然不知道的实现。

如果有人在这方面有经验，我会很高兴看到你的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T19:17:07.583

对您的后续问题的回复太长了...

VPN 通常会在基础设施（例如大学计算机系统）中创建“隧道”。也就是说，VPN 集中器“位于大学网络的外围”，当您连接到**它时**，您在防火墙后面的系统中创建了一个“通道”——防火墙内的任何协议、任何 IP 地址都可以访问。关键是，任何观察从您的计算机到集中器（也称为“VPN 网关”）的流量的人只能看到您与集中器通信 - 他们不知道您正在与防火墙内的哪些 IP 地址进行通信，使用什么协议，或者什么数据。相比之下，如果您不需要隐藏所有这些内容，则只需加密数据本身即可；一个简单的加密算法很容易实现，特别是如果您不需要担心人们会窃取您的设备并获取代码。加密的复杂程度取决于您的应用程序 - 在速度、内存使用和安全性之间进行权衡。

古格。le “Arduino 加密库” 用于一些示例；选择一个密钥，然后加密你的数据，就`POST`这样......

让我们知道你是怎么做的！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T04:34:26.787

我非常同意**@Floris**。添加一些想法：

*   HTTPs 呢？如果您的通信是单向的（Arduino -> PC），那么它应该足以满足您的需求。这个问题在[这篇](https://stackoverflow.com/questions/11138017/https-alternative-on-arduino)文章中进行了讨论，并参考了[这个](http://arduino.cc/forum/index.php/topic,13134.0.html)讨论。Arduino 上的 HHTP 并不容易，但它可能已经完成。

*   显然，XXTEA 是另一种选择，关于这个主题也有几个 stackoverflow 问题。

*   如果你走 -build-it-yourself 路线，请查看有关 electronics.SE 的[这篇文章](https://electronics.stackexchange.com/questions/355/encryption-library-for-arduino)：显然有 AVR 的[密码库](http://www.das-labor.org/wiki/AVR-Crypto-Lib/en)，以及在 electronics.SE 文章中要考虑的有用攻击列表：你是否只担心中间人攻击？如果有人撕开您的设备打开读取密钥怎么办，这是一个问题吗？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-08-17T20:25:17.817

[**这里**](http://www.forward.com.au/pfod/secureChallengeResponse/index.html)描述了用于 Arduino/AVR 设备的 [CHAP] (en.wikipedia.org/wiki/Challenge-Handshake_Authentication_Protocol) 的实现。

这里描述[**了**](http://www.forward.com.au/pfod/secureChallengeResponse/HMAC_SHA256security.html)用于 Arduino/AVR 的 [HMAC] (en.wikipedia.org/wiki/Hash-based_message_authentication_code) 和 [SHA256] (en.wikipedia.org/wiki/SHA-2) 的类似实现。

[ **Cryptosuite** ] (github.com/wgoulet/Cryptosuite) 是 Arduino 的 HMAC-SHA-256 实现。

Finally, [**here**] (github.com/arpitchauhan/cryptographic-protocols-arduino-and-PC) are demonstrated some cryptographic procolos for Arduino, including key exchange using RSA.

So it is definitely possible to secure communication between Arduino and a server.

# meteor - 将反应范围限制在 Meteor 中的子文档

> ID：15463860
> 
> 赞同：0
> 
> 时间：2013-03-17T17:31:29.740
> 
> 标签：meteor

我有一个mongo文档结构如下：

```
Gallery
--- Sub-Gallery
------ Image
------ Image
------ Image
--- Sub-Gallery
------ Image
------ Image
.
.
.
Gallery
.
.
. 
```

我想在屏幕上表现它。天真的实现是：

```
<name template="gallery">
{{#with get_specific_gallery_helper))
    {{#each sub_gallery}}
    This is a gallery {{name_sub_gallery}}
        {{#each image}}
            Something {{name_image}}
        {{/each}} 
    {{/each}}
{{/with}} 
```

这种植入的问题在于，每次单个图像数据更改时，整个`Gallery`模板都会重新渲染。

**有更好的方法吗？**

**是否可以在每个步骤中限制范围？**

我想保持数据库结构不变（不规范化）。

* * *

为什么我认为这是一个问题？首先，它根本没有意义。更实用的是，我有特定的事件处理程序，每当呈现画廊/子画廊/图像时都会调用它们（例如，在加载时淡入图像）。一直渲染所有内容使得处理这些操作变得更加困难。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T22:01:26.757

考虑[反应隔离](http://docs.meteor.com/#isolate)：

```
<template name="gallery">
    {{#each sub_gallery}}
        {{#isolate}}
            This is a gallery {{name_sub_gallery}}
            {{#each image}}
                {{#isolate}}
                Something {{name_image}}
                {{/isolate}}
            {{/each}}
         {{/isolate}}        
    {{/each}}
</template> 
```

这会将隔离块中的变化本地化到它们自己的星球上，因此它们周围的一切都保持不变且未受影响，并且仍然保持反应性

但是，您可能必须使用您的文档结构对其进行测试，因为如果您使用数组而不是带有键的关联数组存储子项，则每个文档索引可能会在您更新它时发生变化

# sql - 实体框架中缺少交叉表？

> ID：15463863
> 
> 赞同：0
> 
> 时间：2013-03-17T17:31:38.270
> 
> 标签：sql, sql-server, asp.net-mvc, entity-framework

我有 3 个表：帖子、标签和 PostTags。PostTags 表是 Posts 和 Tags 之间的交叉表，用于解释绑定到帖子的标签（此关系在 MS SQL 数据库中设置）。

问题是 PostTags 在**Update Model From Database**的 Add 选项卡中不可见？添加帖子和标签表时没有添加它？但是，如果我切换到刷新选项卡，我会看到 PostTags 表吗？

Model Browser > MainModel > Entity Types 中也没有 PostTag 表？

我可以看到直接从代码中的 Posts 创建了对 Tag 表的引用，但是在尝试此操作时： Posts.Tags.Add 它需要一个 Tags 实体而不是 PostTags 实体？如果我无论如何运行它，它会抱怨标签中的列不能设置为空。我不想在 Tags 表中添加任何内容，只在 PostTags 表中添加任何内容？

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T17:44:27.737

这是正常功能。

如果您有一个表（PostTags）是两个其他表之间的链接，那么它将在模型中显示为帖子和标签之间的多对多关系。

如果要查看连接表，请在 PostTags 表中添加一个额外字段。

如果您打开模型并查看 xml 源代码，您可以看到它是如何工作的。

**编辑**

如果你有这样的一行：

```
myPost.AddTag(myTag); 
```

这将帖子和标签连接起来。当您调用 SaveChanges 时，EF 将在 PostTags 表中添加一个条目。

# c++ - nodejs c++ 模块未定义符号

> ID：15463866
> 
> 赞同：4
> 
> 时间：2013-03-17T17:31:44.193
> 
> 标签：c++, node.js, libusb

我正在尝试为 USB 设备的 Node Js 编写 C++ 模块。它是一个 accesio USB-IIRO-16 I/O 板 (accesio.com/MANUALS/USB-IIRO-16.PDF)。我在 Ubuntu 12.04 LTS 上安装了 linux 驱动程序和 libusb。我的示例应用程序（用 C++ 编写）在 I/O 板上运行良好，并且能够在 C++ 中正常通信。我是编写 nodejs 模块的新手，而且从大学开始也没有编写过 C++。我的模块编译也很好。我正在使用他们在示例应用程序中使用的 accesio 提供的 USBDeviceManager 类。

我用它作为模块的基础： [https ://github.com/kkaefer/node-cpp-modules/tree/master/06_objects](https://github.com/kkaefer/node-cpp-modules/tree/master/06_objects)

我用示例应用程序中使用的 accesio 提供的 USBDeviceManager 替换了 hpp 文件，并添加了 ObjectWrap

```
class USBDeviceManager : public node::ObjectWrap {...} 
```

其余部分与 USBDeviceManager 以及示例模块代码相同。一切编译正常，但是，当我运行 node run.js 时，我收到：

```
module.js:485
process.dlopen(filename, module.exports);
      ^
Error: /home/parallels/Documents/node-accesio/build/Release/accesio.node: undefined symbol:    _ZTVN6AIOUSB16USBDeviceManagerE
at Object.Module._extensions..node (module.js:485:11)
at Module.load (module.js:356:32)
at Function.Module._load (module.js:312:12)
at Module.require (module.js:362:17)
at require (module.js:378:17)
at Object.<anonymous> (/home/parallels/Documents/node-accesio/run.js:1:77)
at Module._compile (module.js:449:26)
at Object.Module._extensions..js (module.js:467:10)
at Module.load (module.js:356:32)
at Function.Module._load (module.js:312:12) 
```

我已经尝试了很多移动代码和一些在线文档，但现在不知道该怎么做。cpp 和 js 文件现在仍然与示例模块应用程序相同（[https://github.com/kkaefer/node-cpp-modules/tree/master/06_objects](https://github.com/kkaefer/node-cpp-modules/tree/master/06_objects)）。唯一不同的是将 USBDeviceManager 添加到 hpp 文件和 AIOUSB 命名空间。

基本上我想做的是能够读/写类似于此处的示例应用程序的 I/O 板：http: [//accesio.com/files/packages/AIOUSB-Latest.tar.gz](http://accesio.com/files/packages/AIOUSB-Latest.tar.gz)

# php - 按钮上传问题

> ID：15463870
> 
> 赞同：0
> 
> 时间：2013-03-17T17:32:13.567
> 
> 标签：php, button, upload

我一直在努力让这个单按钮上传工作一段时间，我尝试了几种方法来提交上传，我的这个似乎可以工作到 php 的点，但是 php 中的某些东西似乎不喜欢提交，没有js，这可以作为常规选择文件并上传，但是一旦我添加了js（似乎可以工作），php就不起作用了。

我完全困惑为什么会这样！

任何建议表示感谢！

上传表格

```
<form name="form" method="POST" enctype="multipart/form-data"  action="updateProfilePic_script.php">    
                                    <div class="update_header_pic"> 

 <input type = 'button' value = 'Choose image' 
                                   onclick ="javascript:document.getElementById('Photo').click();">
                                  <input id='Photo' type='file' style='visibility: hidden;' name='Photo' onchange='submit();'/>

                                    </div>
                                </form> 
```

php

```
<?
    session_start();

    $user = $_SESSION['username'];
                        $hostname = "localhost"; 
                        $db_user = "xxxusername"; 
                        $db_password = "xxxpassword"; 
                        $database = "xxxdatabase"; 
                        $db_table = "user_profile_pic"; // image table

                        # THIS CODE IS USED TO CONNECT TO THE MYSQL DATABASE
                        $db = mysql_connect($hostname, $db_user, $db_password);
                        mysql_select_db($database,$db);
                        $uploadDir = 'usermedia/users/images/profileimages/'. $user .'/';//Image Upload Folder
                        if (!is_dir($uploadDir) && !mkdir($uploadDir)){
                          die("Error creating folder $uploadDir");
                        }

                        if(isset($_POST['submit'])) {

                        $date = date("Y-m-d H:i:s");

                        $unique = substr(number_format(time() * rand(),0,'',''),0,10);
                        $fileName = $unique .'-'.$_FILES['Photo']['name'];
                        $tmpName = $_FILES['Photo']['tmp_name'];
                        $fileSize = $_FILES['Photo']['size'];
                        $fileType = $_FILES['Photo']['type'];
                        $filePath = $uploadDir . $fileName;
                        $result = move_uploaded_file($tmpName, $filePath);
                        if (!$result) {
                        echo "Error uploading file";
                        exit;
                        }
                        if(!get_magic_quotes_gpc())
                        {
                        $fileName = addslashes($fileName);
                        $filePath = addslashes($filePath);
                        }
                        $query = "INSERT INTO $db_table ( Image , username , datetime , filesize , filetype ) VALUES ('$filePath' , '$user' , '$date' , '$fileSize' , '$fileType' )";
                        mysql_query($query) or die('Error, query failed');

                        header('Location: edit_myProfile.php');

                        }

                        ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T17:40:56.560

在您的 HTML 表单`[input type=submit]`中，您的 PHP 代码中没有您这样做的原因：

```
if(isset($_POST['submit'])) {
//...
//..
} 
```

您可以简单地将其更改为：

```
if(isset($_FILES['Photo'])) {
 //the your uploading procedure
} 
```

# php - 使用 PHP 打开 Microsoft Word

> ID：15463878
> 
> 赞同：0
> 
> 时间：2013-03-17T17:32:47.377
> 
> 标签：php, ms-word

我使用下面的代码在 PhP 中为 Microsoft word 设置了一个名为“Text1”的表单字段，但是在该行出现错误，如下图所示，这是什么问题`$word->Documents->Open('C:/Doc1.doc');`？ `Cannot pass parameter 1 by reference`

```
<?php
com_load_typelib('Word.Application');
$word = new COM("word.application");
$word->Documents->Open('C:/Doc1.doc');
$word->Visible = 1;
$word->ActiveDocument->FormFields("Text1")->Result = "something";
$word->ActiveDocument->Close(false);
$word->Quit();
unset($word);
?> 
```

![在此处输入图像描述](../Images/961582aba1a6c53821e88a4ca725f5ea.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T17:59:47.520

$word->Documents->Open 被声明为需要通过引用传递的参数，并且不能用字符串文字调用。

你需要 ：

```
$docName='C:/Doc1.doc';
$word->Documents->Open($docName); 
```

# c - C中嵌套结构的用途是什么

> ID：15463880
> 
> 赞同：-4
> 
> 时间：2013-03-17T17:32:54.457
> 
> 标签：c

我是菜鸟程序员。我不知道为什么我们需要去嵌套一个结构。你能详细解释一下吗。请。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T17:36:27.117

例如，某些哈希表中的某些桶（将字符串名称与整数值相关联）可能是

```
 struct bucket_st {
    unsigned len;
    struct {
       char* name;
       int val;
    } ent[];
 }; 
```

我在结构中使用了一个灵活的[数组成员](https://stackoverflow.com/a/2732989/841108) ，它需要是一个嵌套的.`ent``bucket_st``struct`

此外，如果您正在编写 2D 应用程序，您可能有很多

```
 struct point_st { int x, int y; }; 
```

您将通过两个极值点定义一条线段：

```
 struct linesegment_st {
    struct point_st p0, p1;
 }; 
```

那么，如果`li`是这样的一条线，你想谈谈`li.p0.x`等等......

在 POSIX 或 Linux API 中，[setitimer(2)](http://man7.org/linux/man-pages/man2/setitimer.2.html)系统调用处理`struct itimerval`包含其他`struct`....

我真的很惊讶您询问了嵌套结构。你真的没有找他们很多。

# mysql - Oracle ADF Glassfish MySQL - 数据源错误

> ID：15463881
> 
> 赞同：1
> 
> 时间：2013-03-17T17:32:57.560
> 
> 标签：mysql, glassfish-3, oracle-adf

[我已经按照此处](https://blogs.oracle.com/shay/entry/deploying_oracle_adf_applications_to)的说明在我的 glassfish 服务器上设置了 ADF 基本库。我能够从 jDeveloper 成功地将应用程序部署到 glassfish 服务器，并且应用程序运行良好，直到涉及数据库操作，并且它抛出以下错误 No
**object bound to name java:comp/env/jdbc/myDataSource**
应用程序在 IntegratedWeblogicServer 上运行良好，所以我猜我没有在我的 glassfish 中正确设置 mysql 数据源。我已经设置了如图所示[的](http://mariosgaee.blogspot.in/2010/07/configure-mysql-connection-pool-in.html)连接，连接名称是“myDataSource”（与 jDeveloper 的数据库连接名称中提供的相同）。帮助！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T20:21:11.810

您需要在应用程序模块配置选项卡中设置数据源的名称，以匹配您在 GlassFish 实例中定义的数据源的名称。

# javascript - 参数不工作的骨干路由器

> ID：15463885
> 
> 赞同：0
> 
> 时间：2013-03-17T17:33:50.213
> 
> 标签：javascript, backbone.js

我正在尝试使用带参数的主干路由，由于某种原因，我似乎无法使下面的代码工作：

```
var App = new Backbone.Marionette.Application();

App.Router = Backbone.Router.extend({
    routes: {
        "export": "export",
        "show": "show/:id", // This just won't work
        "providers": "providers"
    },

    export: function() {
        var exportView = new App.ExportView();
        exportView.render();
        $("#main").html(exportView.el);
    },

    show: function(id) {
        console.log('from here'); // This is not even firing
        var show = this.collection.get(id);
        showView.render();
        $("#main").html(showView.el);
    },

    providers: function() {
        var contentProvidersView = new App.ProvidersView();
        providersView.render();
        $("#main").html(providersView.el);
    }
});

App.addInitializer(function() {
    var router = new App.Router();
}); 
```

当我尝试访问它时没有任何反应：（`#show/2`其中 2 是显示 ID）

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T17:35:37.013

反过来说：

```
routes: {
  "show/:id": "show",
} 
```

# c# - Dynamics Crm：获取状态码/状态码映射的元数据

> ID：15463886
> 
> 赞同：13
> 
> 时间：2013-03-17T17:33:50.633
> 
> 标签：c#, metadata, dynamics-crm-2011

在 Dynamics CRM 2011 中，在事件实体上，“状态原因”选项集（又名状态代码）与“状态”选项集（又名状态代码）相关

例如看这个截图

![CRM 字段选项的屏幕截图](../Images/f41febeb50cf512757b75b3eee8ba76a.png)

当我使用 API 检索状态原因选项集时，如下所示：

```
 RetrieveAttributeRequest attributeRequest = new RetrieveAttributeRequest
        {
            EntityLogicalName = "incident",
            LogicalName = "statuscode",
            RetrieveAsIfPublished = true
        };
        RetrieveAttributeResponse attributeResponse = (RetrieveAttributeResponse)serv.Execute(attributeRequest);
        AttributeMetadata attrMetadata = (AttributeMetadata)attributeResponse.AttributeMetadata;
        StatusAttributeMetadata statusMetadata = (StatusAttributeMetadata)attrMetadata;
        var dict = new Dictionary<int?, string>();
        foreach (OptionMetadata optionMeta in statusMetadata.OptionSet.Options)
        {
            dict.Add(optionMeta.Value, optionMeta.Label.UserLocalizedLabel.Label);
        } 
```

它的工作原理是我得到了“状态原因”（状态代码）选项的整个列表。但是，我没有得到关于哪些“状态原因”（状态代码）选项与哪些“状态”（状态代码）选项相关的任何信息。

我如何获得这些信息？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-18T10:11:46.377

您已经完成了一切尝试在 foreach 中插入此代码：

```
 int stateOptionValue = (int)((StatusOptionMetadata)optionMeta).State; 
```

请参见[StatusAttributeMetaData.OptionSet.Options](http://msdn.microsoft.com/en-us/library/microsoft.xrm.sdk.metadata.optionmetadata.aspx)层次结构可以返回一个称为[StatusOptionMetadata](http://msdn.microsoft.com/en-us/library/microsoft.xrm.sdk.metadata.statusoptionmetadata_members.aspx)的类型，如果您使用 StatusOptionMetadata 的 State 属性，它将返回此状态码所属的状态码。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-04-08T18:02:03.947

以下是如何通过查询数据库来获取它

```
SELECT distinct e.LogicalName as entity,
      smState.Value AS stateCode,
      smstate.AttributeValue,
      smStatus.Value AS [statuscode/statusreason],
      smStatus.AttributeValue
FROM StatusMap sm
     JOIN Entity e ON sm.ObjectTypeCode = e.ObjectTypeCode
     JOIN StringMap smState ON smState.AttributeValue = sm.State
                           AND smState.ObjectTypeCode = e.ObjectTypeCode
                           AND smState.AttributeName = 'StateCode'
     JOIN StringMap smStatus ON smStatus.AttributeValue = sm.Status
                            AND smStatus.ObjectTypeCode = e.ObjectTypeCode
                            AND smStatus.AttributeName = 'StatusCode'
WHERE  e.LogicalName in ('lead')
ORDER BY e.LogicalName,
      smState.AttributeValue,
      smStatus.AttributeValue; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-08T18:57:59.767

这是将为给定实体输出状态/状态映射的工作代码（您只需要提供 orgServiceProxy）：

```
 var dictState = new Dictionary<int, OptionMetadata>();
    var dictStatus = new Dictionary<int, List<OptionMetadata>>();

    string entityName = "lead";
    int count=0;
    using (var orgServiceProxy = GetOrgServiceProxy(orgServiceUriOnLine))
    {
        RetrieveAttributeResponse attributeResponse = GetAttributeData(orgServiceProxy, entityName, "statecode");
        AttributeMetadata attrMetadata = (AttributeMetadata)attributeResponse.AttributeMetadata;
        StateAttributeMetadata stateMetadata = (StateAttributeMetadata)attrMetadata;
        foreach (OptionMetadata optionMeta in stateMetadata.OptionSet.Options)
        {
            dictState.Add(optionMeta.Value.Value,optionMeta);
            dictStatus.Add(optionMeta.Value.Value,new List<OptionMetadata>());
        }

        attributeResponse = GetAttributeData(orgServiceProxy, entityName, "statuscode");
        attrMetadata = (AttributeMetadata)attributeResponse.AttributeMetadata;
        StatusAttributeMetadata statusMetadata = (StatusAttributeMetadata)attrMetadata;

        foreach (OptionMetadata optionMeta in statusMetadata.OptionSet.Options)
        {
            int stateOptionValue = ((StatusOptionMetadata)optionMeta).State.Value;
            var statusList = dictStatus[stateOptionValue];
            statusList.Add(optionMeta);
            count++;
        }
    }
    Console.WriteLine($"Number of mappings: {count}");
    foreach (var stateKvp in dictState.OrderBy(x=> x.Key))
    {
        Console.WriteLine($"State: {stateKvp.Value.Value}: {stateKvp.Value.Label.UserLocalizedLabel.Label}");
        var statusList = dictStatus[stateKvp.Key];
        Console.WriteLine($"\tStatuses");
        foreach (var status in statusList.OrderBy(s => s.Value))
        {
            Console.WriteLine($"\t\t{stateKvp.Value.Value}: {status.Label.UserLocalizedLabel.Label}");
        }
    } 
```

# iphone - iOS UIActivity View Controller Opera Mini Button？

> ID：15463888
> 
> 赞同：2
> 
> 时间：2013-03-17T17:33:58.327
> 
> 标签：iphone, ios, web, opera, uiactivityviewcontroller

有谁知道是否有一项服务可以添加从 iOS UIactivity 视图控制器在 opera mini 应用程序中打开 URL 的选项。我有 safari 和 chrome 按钮，但我只是想获得主要的 iOS 网络浏览器

现在我只是想打开`http://www.google.com`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T17:55:29.067

据我了解，Opera Mini 的 URL 方案是`ohttp://`，所以您可以从 GitHub 下载[TUSafariActivity](https://github.com/davbeck/TUSafariActivity)，更改活动的图像，并在 Activity 的 NSURL 中使用`ohttp://www.google.com/`而不是`http://www.google.com/`在 Opera Mini 中而不是 Safari 中打开 Google 的主页。

Opera Mini 的 url 方案包括：

1.  `ohttp://`
2.  `ohttps://`
3.  `oftp://`

# c++ - 存储大型相似对象的更好方法

> ID：15463890
> 
> 赞同：1
> 
> 时间：2013-03-17T17:34:06.063
> 
> 标签：c++, class, vector

所以我有一个“大”类`A`，另一个类`B`将包含至少 100 个对象的向量`A`。`B`将类中的所有对象存储为a 似乎不是一个好主意，`vector<A>`因为可以重用很多信息。

我正在考虑在类中有一个模板，`B`它包含所有相似的属性，`A`然后创建一个`vector<A*>`。但这使他们都一样...

那么有没有一种方法可以存储类的相似变量，以便只需要多次存储少数差异？

## 最小的工作示例

```
#include <iostream>

// suppose an int is big:
struct A { // create struct which holds 3 ints
    A() : a(0),b(0),c(0) {} //ctor

    void print() { // print all variables
        cout << a << ", " << b << ", " << c << endl;
    }
    int a,b,c;
};

class B { // create object that holds a vector of A
public:
    B(int vectorSize) {
        vector_A.resize(vectorSize);
        vector_ptr_A.resize(vectorSize);
    }

    void initValues() {
        ///////////////////////////////////////
        // METHOD 1
        vector_A.resize(vectorSize); // resize 
        for (int i=0; i<vector_A.size(); ++i) {
            vector_A[i].a = rand() % 100; // randomize A::a
            vector_A[i].b = 5;            // only B wants A::b to be 5
            vector_A[i].c = 10;           // only B wants A::c to be 10
        }
        ///////////////////////////////////////

        ///////////////////////////////////////
        // METHOD 2
        A_template.b = 5;  // only B wants A::b to be 5
        A_template.c = 10; // only B wants A::c to be 10
        vector_ptr_A.resize(vectorSize,&A_template); // point to template
        for (int i=0; i<vector_ptr_A.size(); ++i) {
            vector_A[i].a = rand() % 100; // randomize A::a
        }
        ///////////////////////////////////////
    }

    void print1() { // prints vector_A[i]
        for (int i = 0; i < vector_A.size(); ++i) {
            vector_A[i].print();
        }
    }
        void print2() { // prints vector_ptr_A[i]
        for (int i=0; i < vector_ptr_A.size(); ++i) {
            vector_ptr_A[i]->print();
        }
    }

    // method 1
    vector<A> vector_A; // a big, big vector

    // method 2
    A A_template;
    vector<A*> vector_ptr_A; // all the same
};

int main() {
    srand( time(NULL) );
    B b(10);
    b.initValues();

    cout << "METHOD 1\n";
    b.print1();             // as desired, but inefficient
    cout << "\nMETHOD 2\n";
    b.print2();             // all the same output
} 
```

* * *

## 编辑

一些澄清，因为最小的工作示例有点令人困惑。我现在也对其进行了调整以使其更加清晰。

类的成员`A`是由`B`用户设置的。例如，用户将为`A::a`向量的每个元素（由随机数表示）定义，而其他 2 个（`A::b`和`A::c`）由 定义`B`。类`A`不仅是由 使用的类`B`，还由用户或任何其他类使用。

**所以基本上我要求一种方法，所以我不必为向量的每个元素设置`A::b`和，而只需要一次。对于我应该设置的每个元素都是不同的。`A::c``A::a`**

为了说明我想要这个的原因：类`A`在我的程序中是一个`Sprite`类，并且`B`必须能够将精灵打印为图块并命名为`TileMap`. 因此，向量中`TileMap`的很多`Sprite`s 都可以在窗口上绘制，但是对于所有这些图块（纹理图块大小、绘图图块大小、纹理文件等），很多信息都是完全相同的，而我没有想要为每个图块设置所有这些变量。我想创建某种模板，可用于`Sprite`向量中的每一个。这种方式不仅更容易，占用空间更少，而且更安全：我知道所有这些值将完全相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T18:07:09.513

需要进行一些澄清，但我会理解你的问题。

```
struct Common_A_Members
{
  int x;
  double y;
};

struct Uncommon_A_Members
{
  unsigned int this_member_changes;
};

struct A : public Common_A_Members, public Uncommon_A_Members
{
  A(const Common_A_Members& c, const Uncommon_A_Members& d)
  : Common_A_Members(c), Uncommon_A_Members(d)
  { ; }
};

struct B
{
  Common_A_Members a_common;
  std::vector<Uncommon_A_Members> a_uncommon;
}; 
```

在上面的例子中，概念类被分成两部分，一部分包含不改变的值（Common_A_Members）和改变的值（Uncommon_A_Members）。这允许`B`拥有一个*常量*数据成员和一个数据向量`changing`。概念类有一个构造函数，`A`它结合了常量数据和变化的数据。

其中的两个成员`B`是一组。对于那些具有不同常量值的概念类，需要复制或重复该集合。

该理论是从变化的数据中分解出恒定的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T18:24:06.873

如果变量 b,c 对于 A 的所有实例总是相同的 - 使它们在 A 中是静态的。

如果变量 b,c 对于存储在 B 的一个实例中的 A 的一组实例相同，请考虑将 b,c 放在 B 中。

如果变量 b,c 仅对于某些 A 集合相同，请考虑将 b,c 分解为它自己的“配置”类 C，并将指向 C 的智能指针存储在 A 中。这假设 b,c 足够大或共享在足够多的情况下，额外的管理是值得的。

顺便说一句，你确定你的 print2() 函数应该使用 vector_ptr_A[0] 而不是 vector_ptr_A[i]？（如果可以的话，我会在评论中问这个......）

编辑：第三个选项的参考版本：

```
class A_Config // stores common parts of A
{
public:
  A_Config(int a, int b) : m_a(a), m_b(b) {}
private:
  int m_a;
  int m_b;
};

class A // store parts changing for each instance and a reference to the common parts
{
public:
  A(int changing, A_Config& shared) : m_changing(changing), m_shared(shared) {}
private:
  int m_changing;
  A_Config& m_shared;
};

class B
{
public:
  B(int a, int b) : conf(a,b) {} // the common parts of A initialized 
                                 // only once when B is created

  void add_A(int changing) // add the changing parts when A is added
  {
    v.push_back( A(changing, conf) );
  }

private:
  A_Config conf;
  vector<A> v;
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T17:37:20.970

只是另一种方式：

```
std::vector <std::reference_wrapper<A>> vector_ref_A; 
```

例子：

```
A a, b, c;

std::vector < std::reference_wrapper < A >> vector_ref_A = {a, b, c};

for (int i = 0; i < vector_ref_A.size(); ++i) {
    vector_ref_A[i].get().randomize();
}

for (int i = 0; i < vector_ref_A.size(); ++i) {
    vector_ref_A[i].get().print();
} 
```

# php - 基于代码的文件下载

> ID：15463897
> 
> 赞同：0
> 
> 时间：2013-03-17T17:34:55.157
> 
> 标签：php, web, download

是否有任何好的开放、预制库或其他系统用于基于分发给用户的唯一代码下载文件？

这里的想法是生成一组代码，让每个用户使用他的代码下载文件。最好对下载次数和/或时间限制有可定制的限制。

如果没有，我们将不胜感激有关如何实现这一点的好主意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T18:05:22.133

为了生成这些代码，您可以使用生成随机字符串的函数或简单地使用 PHP 的本机 rand() 函数。然后，您在数据库中创建一个表，其中包含您生成的代码以及与之关联的文件的位置。

download.php 文件应该这样调用：download.php?hash=generated_code

看起来像这样：

```
<?php
// Retrieve filename and file location on the disk from the db
header('Content-disposition: attachment; filename='.$sql_response['filename']);
readfile($sql_response['filelocationondisk']);
?> 
```

您还可以使用 cookie 限制下载限制或计算数据库中 IP 下载的数量。

# ios - 初始用户位置触发后无法触发 viewForAnnotation

> ID：15463901
> 
> 赞同：1
> 
> 时间：2013-03-17T17:35:16.887
> 
> 标签：ios, objective-c, ios6, ios6-maps

我有这个代码：

```
// MapViewController.h
#import <Foundation/Foundation.h>
#import "MyCLController.h"
#import <MapKit/MapKit.h>

@class ShowsContainerController;

@interface MapViewController : UIViewController <MyCLControllerDelegate,MKMapViewDelegate> {
    MyCLController *locationController;
    MKMapView *mapView;
}

- (void)locationUpdate:(CLLocation *)location;
- (void)locationError:(NSError *)error;

@property (nonatomic, retain) IBOutlet MKMapView *mapView;
@property (assign) BOOL updateMap;
@property (strong) ShowsContainerController *parent;

@end

// MapViewController.m
#import "MapViewController.h"
#import "ShowsContainerController.h"

#define METERS_PER_MILE 1609.344

@implementation MapViewController

@synthesize parent, mapView;

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.updateMap = YES;
    locationController = [[MyCLController alloc] init];
    locationController.delegate = self;
    [locationController.locationManager startUpdatingLocation];
    mapView.delegate = self;
}

- (void)locationUpdate:(CLLocation *)location {

    if( self.updateMap ){
        MKCoordinateRegion viewRegion = MKCoordinateRegionMakeWithDistance(location.coordinate, 0.5*METERS_PER_MILE, 0.5*METERS_PER_MILE);

        [mapView setRegion:viewRegion animated:YES];

        self.parent = (ShowsContainerController *)self.parentViewController;

        [self.parent setLocation:location];

        self.updateMap = NO;
    }
}

- (void)locationError:(NSError *)error {
    NSLog([error localizedDescription]);
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];

    self.parent.mapReady = YES;

    if( self.parent.locationSet ){
        [self.parent callApi];
    }
}

#pragma mark MKMapViewDelegate

- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation
{
    NSLog(@"delegating user location");
    // if it's the user location, just return nil.
    if ([annotation isKindOfClass:[MKUserLocation class]])
        return nil;

    NSLog(@"delegating pins");
    static NSString* ShowAnnotationIdentifier = @"showAnnotationIdentifier";

    MKPinAnnotationView* pinView = (MKPinAnnotationView *)
    [mapView dequeueReusableAnnotationViewWithIdentifier:ShowAnnotationIdentifier];

    if (!pinView)
    {
        // if an existing pin view was not available, create one
        MKPinAnnotationView* customPinView = [[MKPinAnnotationView alloc]
                                              initWithAnnotation:annotation reuseIdentifier:ShowAnnotationIdentifier];
        customPinView.enabled = YES;
        customPinView.pinColor = MKPinAnnotationColorRed;
        customPinView.animatesDrop = YES;
        customPinView.canShowCallout = YES;

        return customPinView;
    }
    else
    {
        pinView.annotation = annotation;
    }
    return pinView;
}

#pragma mark -

@end 
```

这是添加我的别针的代码；在发出 api 调用之前它不会被触发，这是在`viewDidAppear`触发之后：

```
- (void)placeAnnotations:(NSArray *)shows
{

    NSEnumerator *e = [shows objectEnumerator];
    id show;
    NSMutableArray *annotations = [[NSMutableArray alloc] init];

    while (show = [e nextObject]) {
        double lat = [[[[[show objectForKey:@"venue"] objectForKey:@"location"] objectForKey:@"geo:point"] objectForKey:@"geo:lat"] doubleValue];
        double lng = [[[[[show objectForKey:@"venue"] objectForKey:@"location"] objectForKey:@"geo:point"] objectForKey:@"geo:long"] doubleValue];

        ShowAnnotation *annotation = [[ShowAnnotation alloc]
                                      initWithCoordinate:CLLocationCoordinate2DMake(lat, lng)
                                      withMap:self.mapController.mapView
                                      withTitle:[show objectForKey:@"title"]
                                      withSubtitle:[[show objectForKey:@"venue"] objectForKey:@"name" ]];
        [annotations addObject:annotation];
    }

    NSLog(@"adding annotations");
    [self.mapController.mapView addAnnotations:annotations];

} 
```

日志显示“委派用户位置”，但从不显示“委派引脚”。它甚至不会触发`viewForAnnotation`用户位置的一个初始时间。

委托似乎正在工作，否则我将无法捕获此选择器，但为什么它只针对用户位置触发而不触发后续注释添加？

# mysql - mysql - 显示所有表中存在的值

> ID：15463902
> 
> 赞同：1
> 
> 时间：2013-03-17T17:35:18.973
> 
> 标签：mysql

我在这里进行了快速搜索，但无法找到我正在寻找的答案。这是我想做的：

我正在创建一个简单的事件注册跟踪系统。

我有一个名为注册的数据库，在该数据库中我创建了**10 个**名为 table1、table2 ..... table10 的表。所有这些表只有**一列：user_id**

我还有一个名为**userinfo**的表，该表有 2 个名为`user_id`and的列`username`。

我需要创建一个查询来检查所有表中是否**存在任何 user_id**。如果是这样，它将从 userinfo 表中显示该用户的名称。

我正在考虑使用 count 函数来获取每个 user_id 的总数，如果我得到 11 个计数，它会告诉我**user_id**存在于每个表中。

但我不确定这是否正确。任何想法将不胜感激。我不擅长查询，所以如果有人也可以发布一个例子。提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T17:42:09.410

您可以简单地对`user_id`字段上的所有表进行内部联接，并且仅当联接查询中存在结果时才显示 userinfo 表中的用户名：

```
SELECT username FROM userinfo it WHERE EXISTS (

SELECT user_id FROM table1 t1 
INNER JOIN Table2 USING(user_id)
INNER JOIN Table3 USING(user_id)
INNER JOIN Table4 USING(user_id)
INNER JOIN Table5 USING(user_id)
INNER JOIN Table6 USING(user_id)
INNER JOIN Table7 USING(user_id)
INNER JOIN Table8 USING(user_id)
INNER JOIN Table9 USING(user_id)
INNER JOIN Table10 USING(user_id)
WHERE t1.user_id = it.user_id
); 
```

# php - Laravel：表单验证字符串长度错误消息导致异常

> ID：15463903
> 
> 赞同：6
> 
> 时间：2013-03-17T17:35:22.327
> 
> 标签：php, validation, laravel, laravel-3

尝试实现 Laravel 基于长度的验证时

```
'password' => array(
    'required',
    'alpha_dash',
    'Min:7'
) 
```

并在我的视图中输出错误消息

```
{{
    $errors->first(
        'password',
        '<span class="error">:message</span>'
    )
}} 
```

我明白了

```
Unhandled Exception
Message:
Array to string conversion
Location:
_avalog\laravel\messages.php on line 188
Stack Trace:
#0 _avalog\laravel\laravel.php(42): Laravel\Error::native(8, 'Array to string...', '_avalog...', 188)
#1 [internal function]: Laravel\{closure}(8, 'Array to string...', '_avalog...', 188, Array)
#2 _avalog\laravel\messages.php(188): str_replace(':message', Array, 'get('password', 'get() 
```

调试，看来是真的。如果我`print_r( $validation );`

```
Laravel\Validator Object (
    [attributes] => Array (
        [username] => fred
        [email] =>
        [password] => asd
        [csrf_token] => DWg3CUfqtMZkIRfyZXNEqygvWUHsGS9SQMue2V4S
    )
    [errors] => Laravel\Messages Object (
        [messages] => Array (
            [email] => Array (
                [0] => The email field is required.
            )
            [password] => Array ( 
                [0] => Array (
                    [numeric] => The password must be at least 7.
                    [file] => The password must be at least 7 kilobytes.
                    [string] => The password must be at least 7 characters.
                )
            )
    )
    [format] => :message
) 
```

您可以看到，messages 实际上包含一个密码数组，该数组似乎取决于输入类型，即使我在规则中指定它是 alphadash

```
[password] => Array (
    [0] => Array (
        [numeric] => The password must be at least 7.
        [file] => The password must be at least 7 kilobytes.
        [string] => The password must be at least 7 characters.
    )
) 
```

而其余的，不要

```
[email] => Array (
    [0] => The email format is invalid.
) 
```

* * *

在`messages.php`Laravel 框架中，它无法处理这种基于数组的消息传递，所以我假设我在它到达那里之前做错了什么，但我不知道是什么。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-18T00:48:15.517

您的规则输入错误。它必须像

```
'password' => 'required|alpha_dash|min:7' 
```

查看 Laravel 验证[文档](http://laravel.com/docs/validation)以获取更多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-28T16:01:50.570

**'password.min' => "密码不能少于6个字符。",**

```
$custom_validation_messages = array(
  'password.min' => "Password can not be less than 6 characters.",
  'password.required' => "Password is required"
);

   $validator = Validator::make($data, [
                //'email'          => ['required','unique:users,email','email','max:255'],
   'email'          => ['required','email','max:255'],
   'password'       => 'required|min:6|confirmed'

 ],$custom_validation_messages); 
```

# android - DialogFragment 参数和空指针异常

> ID：15463904
> 
> 赞同：5
> 
> 时间：2013-03-17T17:35:23.597
> 
> 标签：android, nullpointerexception, android-dialogfragment

我的类应该将一个参数传递给 DialogFragment，但我的应用程序在（对话框类的）onCreate 方法中因 NullPointerException 而崩溃。对话框片段类部分代码：

```
public class ConfirmDialog extends DialogFragment {

public ConfirmDialog() {}

 ConfirmDialog newInstance(String f) {
    ConfirmDialog d = new ConfirmDialog();

    Bundle args = new Bundle();
    args.putString("FILE_NAME", f);
    d.setArguments(args);

    return d;
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    file = getArguments().getString("FILE_NAME");
} 
```

我在这一行有空指针：

```
file = getArguments().getString("FILE_NAME"); 
```

我不知道为什么。我还粘贴了代码调用对话框

```
private void showConfirmDialog(String file) {
    FragmentManager fm = getSupportFragmentManager();
    ConfirmDialog dialog = new ConfirmDialog();
    Log.i("SHOWFILEACTIVITY", file);
    dialog.newInstance(file);
    dialog.show(fm, "fragment_confirm_dialog");
} 
```

这里的“文件”字符串不为空，我已经检查过了

```
Log.i("SHOWFILEACTIVITY", file); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-17T17:41:39.357

您正在`ConfirmDialog`通过构造函数创建 a ，然后调用`newInstance()`，这将创建另一个 (proper) `ConfirmDialog`。但是，您随后会丢弃该正确的实例。

要解决这个问题：

你的`newInstance()`方法应该是静态的：

```
public static ConfirmDialog newInstance(String f) {
    ConfirmDialog d = new ConfirmDialog();

    Bundle args = new Bundle();
    args.putString("FILE_NAME", f);
    d.setArguments(args);

    return d;
} 
```

并且`showConfirmDialog()`应该进行更改，以便`newInstance()`正确使用该方法。

```
private void showConfirmDialog(String file) {
    FragmentManager fm = getSupportFragmentManager();
    Log.i("SHOWFILEACTIVITY", file);

    ConfirmDialog dialog = ConfirmDialog.newInstance(file);
    dialog.show(fm, "fragment_confirm_dialog");
} 
```

# spotify - 使用 HTML5 在 Spotify 应用程序中嵌入播放列表

> ID：15463906
> 
> 赞同：1
> 
> 时间：2013-03-17T17:35:36.540
> 
> 标签：spotify, playlist

如果已经问过这个问题，我很抱歉，但是如何让播放列表显示在 Spotify 应用程序的 index.html 中？我已经看遍了，我找不到一个明确的方法来做到这一点。我查阅了 api-tutorial 应用程序并尝试查看 API Docs。我只是想念它吗？我尝试过，但这也不起作用。

此外，除此之外，有没有办法只将应用程序用户库中的单个曲目拖到一个框中以实时添加到显示的播放列表中？或者至少将数据拖入框中，并将数据填充到我个人资料中的某种类型的播放列表中？还是其他？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T18:11:51.053

编辑：我的错误。[查看 Spotify Apps API](https://developer.spotify.com/technologies/apps/docs/f19ff300f8.html)的文档，`Player`该类具有`track`提供当前播放曲目的属性。上面的 URL 显示了如何使用观察者接口在它发生变化时得到通知。

# python - 从 sql 表中读取预期结果

> ID：15463908
> 
> 赞同：1
> 
> 时间：2013-03-17T17:35:39.617
> 
> 标签：python, python-unittest

我一直在从我知道的任何来源进行调查..我仍然不明白..尽管我理解它是如何工作的，但我一定做错了什么。

我正在使用 Pyunit 创建一个测试，我从表中读取数据，然后我需要比较结果。

例如 ：

```
create table test_table (a int, b char(30)
insert into test_table values (1, "good day today")
insert into test_table values (2, "bad day today")
insert into test_table values (3,"snow day today")

select * from test_table 
```

现在在python代码方面：

```
cursor.execute("select * from test_table")
expected = "(1,'good day today'), (2, 'bad day today'), (3,'show day today')"
res=fetch.all(cursor)

assert.equal(res,expected) 
```

所以这只是我工作代码的一个例子，但基本上这就是我卡住的地方。

如何从 SQL 表中测试验证我的预期结果？

# c# - 参数超出范围 - 洗牌

> ID：15463912
> 
> 赞同：3
> 
> 时间：2013-03-17T17:36:31.300
> 
> 标签：c#, game-engine, shuffle

我试图通过从一个牌组中随机取出牌并将它们放入另一个牌中来洗牌，以避免在将它们添加到新列表后将它们从原始列表中删除，这似乎导致参数超出范围错误，尽管我努力减少随机数的范围。请问有什么建议吗？

```
List<Card> shuffledDeck = new List<Card> ();

    for (int i = 0; i <= 51; ++i) 
    {
        int c = myDeck.Count + 1;
        int n = rNumber.Next (1, c);
        shuffledDeck.Add(myDeck[n]);
        myDeck.Remove(myDeck[n]);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T17:42:50.153

```
 List<Card> shuffledDeck = new List<Card> ();

   while (myDeck.Count > 0)
   {
      int c = myDeck.Count;

      int n = rNumber.Next (0, c);
      var value = myDeck[n];
      shuffledDeck.Add(value);
      myDeck.Remove(value);

   } 
```

您需要确保您的索引不超过实际数组对象的数量。

# android - 在一个 XML 文件中添加线性和相对布局的 ScrollView

> ID：15463913
> 
> 赞同：0
> 
> 时间：2013-03-17T17:36:35.890
> 
> 标签：android, android-layout

我正在尝试将相对布局的内容设置为 Scrollview，因为它不适合屏幕。我的 XML 文件包含线性和相对布局，其中线性作为父布局，相对作为子布局。

虽然我已经浏览过关于这个主题的大多数问题，但我能找到的只是如何分别在线性或相对布局中插入 Scrollview，但不是当两种布局都在一个文件中时。

我的 XML 文件

```
<?xml version="1.0" encoding="UTF-8"?>

<!-- 
   Being of Linear Layout
 -->

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/week1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/week1"
        android:textColor="#FFFFFF"
        android:textSize="25sp"
        android:paddingTop="50dp"
        android:background="#00141c" />
<!--
Begin Relative Layout
-->

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:scrollHorizontally="true">

    <ImageView
        android:id="@+id/treadmillimage"
        android:layout_width="115dp"
        android:layout_height="93dp"
        android:paddingTop="10dp"
        android:src="@drawable/treadmill" />

    <EditText
        android:id="@+id/durOnTreadmill"
        android:layout_width="129dp"
        android:layout_height="wrap_content"
        android:ems="10"
        android:inputType="number"
        android:layout_marginLeft="180dp" 
        android:layout_centerVertical="true"/>

<!--
End Relative Layout
-->
    </RelativeLayout>

    <TextView
        android:id="@+id/treadmilltext"
        android:layout_width="91dp"
        android:layout_height="wrap_content"
        android:layout_marginLeft="15dp"
        android:text="@string/treadmill"
        android:textColor="#FFFFFF"
        android:textSize="20sp" />

<!--
Begin Relative Layout
-->

    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:scrollHorizontally="true">

    <ImageView
        android:id="@+id/stepperimage"
        android:layout_width="115dp"
        android:layout_height="93dp"
        android:paddingTop="10dp"
        android:src="@drawable/stepper" />

    <EditText
        android:id="@+id/durOnStepper"
        android:layout_width="129dp"
        android:layout_height="wrap_content"
        android:ems="10"
        android:inputType="number"
        android:layout_marginLeft="180dp" 
        android:layout_centerVertical="true"/>

<!--
End Relative Layout
-->
    </RelativeLayout>

    <TextView
        android:id="@+id/steppertext"
        android:layout_width="91dp"
        android:layout_height="wrap_content"
        android:layout_marginLeft="15dp"
        android:text="@string/stepper"
        android:textColor="#FFFFFF"
        android:textSize="20sp" />

<!--
Begin Relative Layout
-->
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:scrollHorizontally="true">

    <ImageView
        android:id="@+id/stationaryrowing"
        android:layout_width="115dp"
        android:layout_height="93dp"
        android:paddingTop="10dp"
        android:src="@drawable/stationaryrowing" />

    <EditText
        android:id="@+id/durOnStationaryRowing"
        android:layout_width="129dp"
        android:layout_height="wrap_content"
        android:ems="10"
        android:inputType="number"
        android:layout_marginLeft="180dp" 
        android:layout_centerVertical="true"/>

<!--
End Relative Layout
-->
    </RelativeLayout>

    <TextView
        android:id="@+id/stationaryrowingtext"
        android:layout_width="91dp"
        android:layout_height="wrap_content"
        android:layout_marginLeft="15dp"
        android:text="@string/stationaryrowing"
        android:textColor="#FFFFFF"
        android:textSize="20sp" />

<!--
Begin Relative Layout
-->
     <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:scrollHorizontally="true">

    <ImageView
        android:id="@+id/exercisebikeimage"
        android:layout_width="115dp"
        android:layout_height="93dp"
        android:paddingTop="10dp"
        android:src="@drawable/excerisebike" />

    <EditText
        android:id="@+id/durOnexcerisebike"
        android:layout_width="129dp"
        android:layout_height="wrap_content"
        android:ems="10"
        android:inputType="number"
        android:layout_marginLeft="180dp" 
        android:layout_centerVertical="true"/>

 <!--
End Relative Layout
-->
    </RelativeLayout>

     <TextView
        android:id="@+id/excerisebiketext"
        android:layout_width="91dp"
        android:layout_height="wrap_content"
        android:layout_marginLeft="15dp"
        android:text="@string/exercisebike"
        android:textColor="#FFFFFF"
        android:textSize="20sp" />

 <!--
Begin Relative Layout
-->
       <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:scrollHorizontally="true">

    <ImageView
        android:id="@+id/ellipticaltrainerimage"
        android:layout_width="115dp"
        android:layout_height="93dp"
        android:paddingTop="10dp"
        android:src="@drawable/ellipticaltrainer" />

    <EditText
        android:id="@+id/durOnellipticaltrainer"
        android:layout_width="129dp"
        android:layout_height="wrap_content"
        android:ems="10"
        android:inputType="number"
        android:layout_marginLeft="180dp" 
        android:layout_centerVertical="true"/>

<!--
End Relative Layout
-->
    </RelativeLayout>

        <TextView
        android:id="@+id/ellipticaltrainertext"
        android:layout_width="91dp"
        android:layout_height="wrap_content"
        android:layout_marginLeft="15dp"
        android:text="@string/ellipticaltrainer"
        android:textColor="#FFFFFF"
        android:textSize="20sp" />

<!--
End Linear Layout
-->
</LinearLayout> 
```

**第1周TextView**下面的所有内容都需要在Scrollview中

在此先感谢，将非常感谢所有答案:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T18:31:26.950

如果您不希望最顶部`TextView`成为滚动区域的一部分，那么您必须将`RelativeLayout`s 嵌套到另一个布局中，因为 a`ScrollView`只能有一个直接子级。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <TextView ... />

    <ScrollView ... >
        <!-- only one direct child for scrollview: -->
        <LinearLayout ... >

            <RelativeLayout ... />
            <TextView ... />
            <RelativeLayout ... />
            <TextView ... />
            <RelativeLayout ... />
            <TextView ... />
            <RelativeLayout ... />
            <TextView ... />
            <!-- etc -->

        </LinearLayout>

    </ScrollView>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T17:42:52.430

只需将 scorolleview 作为 RelativeLayout 的父级，如下所示：

```
<ScrollView 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">

<RelativeLayout 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:scrollHorizontally="true">

    <ImageView
        android:id="@+id/treadmillimage"
        android:layout_width="115dp"
        android:layout_height="93dp"
        android:paddingTop="10dp"
        android:src="@drawable/treadmill" />

.....
.....
</RelativeLayout>
</ScrollView> 
```

# java - Android Handler 定义语法

> ID：15463914
> 
> 赞同：0
> 
> 时间：2013-03-17T17:36:40.567
> 
> 标签：java, android, syntax

我最近从一本关于 Android 服务的书中找到了这段代码：

```
static Handler UIupdater = new Handler() {
   @Override
   public void handleMessage(Message msg) {
      byte[] buffer = (byte[]) msg.obj;
      //---convert the entire byte array to string---
      String strReceived = new String(buffer);
      //---display the text received on the TextView---
      txtView1.setText(strReceived);
      Log.d(“Threading”, “running”);
   }
}; 
```

我想我理解目的，-他们只是想覆盖 Handler 类的方法而不定义它的子类-，但我不确定我是否理解语法。实际上，我以前从未在 java 中遇到过这种语法。有人可以指出这里涉及的java机制吗？一开始我以为它是匿名内部类，但静态处理程序 UIupdater 部分让我怀疑......

感谢您的帮助（对不起菜鸟问题）！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T17:41:44.897

你是对的，这是一个[匿名](http://docs.oracle.com/javase/tutorial/java/javaOO/anonymousclasses.html) [内部类](http://docs.oracle.com/javase/tutorial/java/javaOO/innerclasses.html)，它的实例被分配给[静态字段](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html) `UIupdater`。

# java - Java用嵌套循环打印数字三角形

> ID：15463925
> 
> 赞同：-2
> 
> 时间：2013-03-17T17:37:32.003
> 
> 标签：java, for-loop, nested-loops

我正在尝试使用 Java 中的嵌套循环打印以下内容：

1 2 3 4 5 6
   1 2 3 4 5
      1 2 3 4
         1 2 3
            1 2
               1

但它的结果如下：

1 2 3 4 5 6
   2 3 4 5 6
      3 4 5 6
         4 5 6
            5 6
               6

这是我的代码：

```
for (int i = 1; i <= 6; i++) {
    for (int j = 1; j < i; j++) 
    {
        System.out.print("  ");
    }
    for (int j = i; j <= 6; j++) 
    {
    System.out.print(j + " ");
    }
    System.out.println();
} 
```

任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-19T06:47:31.960

```
int n = 7;

for (int i = 1; i <= n; i++) {

    for (int j = 1; j < i; j++) {
        System.out.println(" ");
    } 
    for (int j = i; j <= 6; j++) {              
       System.out.println(j +" ");
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-24T10:11:45.023

这给出了相同的输出......请检查

```
public static void main(String[] args)
    { int c=0;

        for(int i=6;i>0;i--)
        {
            for(int k=0;k<c;k++)
              {
                  System.out.print("  ");
              }
              for (int j=1;j<=i;j++)
              {
               System.out.print(j +" ");
              }
              c++;
              System.out.println(" ");

        }  
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-26T14:40:15.490

```
for (int i = 2; i <= 7; i++) {
    for (int j = 2; j < i; j++) {
        System.out.print("  ");
    }
    for (int j = i; j <= 7; j++) {
        System.out.print(j-1 + " ");
    }
    System.out.println();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T17:40:38.760

在内部第二个循环中设置此条件。

```
for (int j = 1; j <= 7 - i ; j++) 
```

**编辑 ：**

完整的代码是

```
for (int i = 1; i <= 6; i++) {
    for (int j = 1; j < i; j++) 
    {
        System.out.print("  ");
    }
    for (int j = 1; j <= 7 - i ; j++) 
    {
        System.out.print(j + " ");
    }
    System.out.println();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-17T17:40:52.797

你的程序应该是 -

```
for (int i = 1; i <= 6; i++) {
    for (int j = 1; j < i; j++) 
    {
        System.out.print("  ");
    }
    for (int j = 1; j <= (6-i+1); j++) 
    {
    System.out.print(j + " ");
    }
    System.out.println();
} 
```

谢谢

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-17T17:40:54.207

尝试这个 ：

```
for (int i = 1; i <= 7; i++) {
for (int j = 1; j < i; j++) 
{
    System.out.print("  ");
}
for (int j = 1; j <= 7-i; j++) 
{
System.out.print(j + " ");
}
System.out.println(); 
```

}

# jquery - 流星按键不起作用

> ID：15463933
> 
> 赞同：4
> 
> 时间：2013-03-17T17:38:02.640
> 
> 标签：jquery, meteor, keydown

我正在使用流星更新数据库中的文档。但是 keydown 似乎不起作用。这是代码。

```
Template.leaderboard.events({
    'keydown button.inc': function(evt) {
        if (evt.which === 39) {
            Players.update(Session.get("character"), {$inc: {score: 20}});
        }

        Players.update(Session.get("character"), {$inc: {score: 20}});
        //Players.update(Session.get("character"), {$set: {name: 'images/characters/ninja.png'}});
    },
    'keydown': function(evt) {
        if (evt.which === 37) {
            Players.update(Session.get("character"), {$inc: {score: -20}});
            //Players.update(Session.get("character"), {$set: {name: 'images/characters/ninjaleft.png'}});
        }
        Players.update(Session.get("character"), {$inc: {score: -20}});
    }
}); 
```

为什么我的按键不起作用？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-17T23:29:06.247

我已经成功地将键盘事件附加到文本区域和输入，如下所示：

```
Template.inputArea.events({
  'keydown textarea' : function(e){
     console.log(e.which);
  }
}); 
```

我不太熟悉将键盘事件附加到其他 DOM 元素。我知道对于`window`事件，我不得不使用 jQuery 来附加 keydown 输入。

```
Template.foo.rendered = function(){
  $(window).on('keydown', function(e){
    console.log(e.which);
  });
};

// and on newer versions 

Template.foo.onRendered( function() {
    $(window).on('keydown', function(e){
        console.log(e.which);
    });
}); 
```

也许你可以尝试类似的东西......

# python - 下载计数器：cgi FieldStorage 重置按下的按钮值

> ID：15463935
> 
> 赞同：0
> 
> 时间：2013-03-17T17:38:33.063
> 
> 标签：python, html, cgi

我正在为我的网站集成一个下载计数器。我的目标是每次单击“下载”按钮并下载文件时触发计数器。下载按钮在这里：

```
<form action="download.py" method="post">
<input type="submit" value="Download" name="DL" onClick="download_file()"/>
</form> 
```

单击时，会下载一个文件，但是，我也想触发下载计数器：

```
import cgi
form = cgi.FieldStorage()
def count():
    c.execute("INSERT INTO dl VALUES ('%d', '%s', '%s', '%s')" % (index, dt, ip, client))
    conn.commit()
    conn.close()

if "DL" in form:
    count()
    form.list = [] 
```

从理论上讲，这似乎可行，但是，如果重新加载页面，cgi.FieldStorage 不会重置，并且每次重新加载都会触发数据库进行新的下载，但这并没有发生。

如何完全重置或删除 FieldStorage 存储的值？或者有没有更好的解决方案你可以建议。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T16:21:07.403

我将为谷歌人留下一个解决方案。我通过检查下载文件的人的最后一个 IP 地址来对问题进行排序。如果 IP 与再次下载的人相同（重复下载或页面刷新），则不会触发计数器。它的代码如下：

获取当前IP：

```
ip = (getenv("HTTP_CLIENT_IP") or
getenv("HTTP_X_FORWARDED_FOR") or
getenv("REMOTE_ADDR") or
"UNKNOWN") 
```

获取下载文件的最后一个 IP：

```
last_ip_raw = c.execute('SELECT ip FROM dl ORDER BY id DESC LIMIT 1')
last_ip_tup = c.fetchone()
last_ip = str("%s" % last_ip_tup) 
```

检查是否已经下载：

```
def count():
        if last_ip != ip:
                c.execute("INSERT INTO dl VALUES ('%d', '%s', '%s', '%s')" % (index, dt, ip, client))
                conn.commit()
                conn.close() 
```

我知道它并不完美，但它可以完成工作。欢迎任何更好的建议。

# c++ - 用 C++ 编写方法/函数的四种相同方法？

> ID：15463936
> 
> 赞同：0
> 
> 时间：2013-03-17T17:38:33.123
> 
> 标签：c++, oop, class, function, methods

今天在学校我们学习了用 C++ 编写方法/函数的四种方法，但我不确定我是否理解每种方法的概念以及它们之间的区别。他们都做同样的事情吗？第一个代码是类声明，第二个代码是类外的实现：

一个）

```
1) Vector Addition(Vector a);

2) Vector Vector::Addition(Vector a)
{
    Vector temp = *this;
    temp.x+=a.x;
    temp.y+=a.y;
    return temp;
} 
```

b)

```
1)Vector ConcreteInstanceAddition(Vector a, Vector b);

2) Vector Vector::ConcreteInstanceAddition(Vector a, Vector b)
{
    Vector temp=*this;
    temp.x=a.x+b.x;
    temp.y=a.y+b.y;
    return temp;
} 
```

C）

```
1) friend Vector NonConcreteInstanceAddition(Vector a, Vector b);

2) Vector NonConcreteInstanceAddition(Vector a, Vector b)
{
    Vector temp(0,0);
    temp.x=a.x+b.x;
    temp.y=a.y+b.y;
    return temp;
} 
```

d)

```
1) static Vector NonConcreteInstanceAdditionStatic(Vector a, Vector b);

2) Vector Vector::NonConcreteInstanceAdditionStatic(Vector a, Vector b)
{
    Vector temp(0,0);
    temp.x=a.x+b.x;
    temp.y=a.y+b.y;
    return temp;
} 
```

这是主要功能中的实现：

```
Vector a(0,0),b(0,0),c(0,0);

c=a.Addition(b);
//or
c.ConcreteInstanceAddition(a,b);
//or
c=NonConcreteInstanceAddition(a,b);
//or
c=Vector::NonConcreteInstanceAdditionStatic(a,b); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T17:49:07.823

您忘记了更多：（
独立式，按参数返回）

```
void Addition (const Vector& a, const Vector& b, Vector & result)
{
   result.x = a.x + b.x;
   result.y = a.y + b.y;
   return;
} 
```

在`main`函数中：

```
Addition(a, b, c); 
```

`const`通过使用和通过引用传递也有变化。

答案：
a) 成员函数；可以使用没有 . 的类变量`this->`。
修改“宿主”实例的成员变量。

b) 成员函数；不修改实例变量。

c) 具有访问类中方法和变量的权限的独立功能。

d) 静态成员函数。可以在没有对象实例的情况下访问，但不能访问任何类变量。（类变量需要一个实例。）

`operator+=()`编辑 1：您还可以通过实施和添加另外两个`operator+()`。

编辑2：静态成员函数的使用

```
c = Vector::NonConcreteInstanceAdditionStatic(a,b); 
```

静态成员函数类似于使用独立函数，不同之处在于它位于类内部并且必须使用范围解析运算符`::`, 才能访问。

# c# - TryParse 方法

> ID：15463940
> 
> 赞同：-1
> 
> 时间：2013-03-17T17:38:55.590
> 
> 标签：c#, visual-studio-2012, tryparse

我对下面的代码有疑问。我正在尝试使用一种`int.TryParse`方法来检查用户的输入（如果用户在 TextBox 上放置“abc”，它应该显示一个错误，告诉用户，这是错误的输入，并且他们应该输入一个整数。）。我想知道为什么我的代码不想工作。这是我所拥有的：

```
private void CalcStayChargesButton_Click(object sender, EventArgs e)
{
     // Get the user input.
     NumberOfDays = int.Parse(DaysInHospitalChargesTextBox.Text);
     if (int.TryParse(DaysInHospitalChargesTextBox.Text, out NumberOfDays))
     {
         MessageBox.Show("Please enter a whole number.");
     }
} 
```

在代码视图中没有错误，但是当我运行应用程序对其进行测试时，它会回到第 4 行并突出显示它，但我无法弄清楚。请记住，NumberOfDays 整数已经设置在表单开头的下方，以便我可以在整个应用程序中普遍使用它。有人能给我一些关于如何使它工作的提示吗？我可能忽略了一些东西。谢谢一堆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T17:41:25.730

```
if (int.TryParse(DaysInHospitalChargesTextBox.Text, out NumberOfDays))
        {
            MessageBox.Show("Please enter a whole number.");
        } 
```

如果解析成功，则执行此操作，然后显示此消息，您应该改为执行此操作

```
if (!int.TryParse(DaysInHospitalChargesTextBox.Text, out NumberOfDays))
        {
            MessageBox.Show("Please enter a whole number.");
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T17:54:28.027

int.TryParse(Something, out value) 尝试解析“Something”的值并将值设置为 out（如果可以的话）。如果可以，则 int.TryParse 返回 true（如果不可以，则返回 false。）

因此，对于您的示例，您应该做的是：

```
private void CalcStayChargesButton_Click(object sender, EventArgs e)
{
     int NumberOfDays; //Create the variable
     //try to parse DaysInHosputalChargesTextBox.Text
     if (!(int.TryParse(DaysInHospitalChargesTextBox.Text, out NumberOfDays))) 
     {
         // "!" means the parsing was not ok. So the user should reenter the number     
         MessageBox.Show("Please enter a whole number.");
     }
     else
     {
         //some code to do if the parsing was successful. 
     }
} 
```

有关详细信息，请参阅[msdn 文档](http://msdn.microsoft.com/en-us/library/f02979c7.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T17:40:51.153

`int.TryParse`当无法解析时返回 false，因此您必须`!`输入您的条件：

```
private void CalcStayChargesButton_Click(object sender, EventArgs e)
{
    // Get the user input.
    if (!int.TryParse(DaysInHospitalChargesTextBox.Text, out NumberOfDays))
    {
        MessageBox.Show("Please enter a whole number.");
    }
} 
```

为什么使用`int.Parse`然后`int.TryParse`？使用其中之一，而不是两者。

您还必须有一个名为的变量，该变量`NumberOfDays`必须是`int`类型。如果类中没有这样的变量，则在`if`语句之前添加一个：

```
int NumberOfDays;
if(!int.TryParse(...)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T17:40:58.097

我认为这就是你想要的：

```
private void CalcStayChargesButton_Click(object sender, EventArgs e)
{
    // Get the user input.
    int NumberOfDays;
    if (!int.TryParse(DaysInHospitalChargesTextBox.Text, out NumberOfDays))
    {
        MessageBox.Show("Please enter a whole number.");
    }
} 
```

如果它不是可解析的数字，您对 int.Parse 的第一次调用将引发异常——这就是 TryParse 的用途，如果它无法解析数字，它只会返回 false。此外，当消息是有效数字时，您的逻辑会显示消息，因此`!`如果无法解析数字，您需要在其中使语句解析为 true。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-17T18:00:04.713

看看[int.TryParse](http://msdn.microsoft.com/en-us/library/f02979c7.aspx)是如何使用的

```
private void CalcStayChargesButton_Click(object sender, EventArgs e)
{
    int NumberOfDays;
    if (!int.TryParse(DaysInHospitalChargesTextBox.Text, out NumberOfDays))
    {
        MessageBox.Show("Please enter a whole number.");
    }
} 
```

# jsp - 无法从 CQ5.5 中的 JSP 访问捆绑上下文

> ID：15463948
> 
> 赞同：0
> 
> 时间：2013-03-17T17:39:47.073
> 
> 标签：jsp, osgi, aem, osgi-bundle

我创建了一个 OGI 包，名为：

```
com.sdl.ws.integration.profserv.webservice.connector.server.external.beans 
```

我可以在下面看到捆绑包：

```
 http://localhost:4502/system/console/bundles 
```

以下是我的 JSP 代码，我正在尝试使用它来访问 bundlecontext

```
 <%@ page import="org.osgi.framework.BundleContext"%>  
 <%@ page import="org.osgi.framework.FrameworkUtil"%>
 <%@ page import="com.sample.osgi.components.FormattingServiceImpl.*"%>  
 <%@ page import="org.osgi.service.cm.ConfigurationAdmin"%>
 <%@ page import="org.osgi.service.cm.Configuration"%>   
  <%@ page import="org.osgi.service.packageadmin.PackageAdmin"%>   

 <%
    BundleContext bundleContext =      FrameworkUtil.getBundle(FormattingServiceImpl).getBundleContext();  

  %> 
```

我收到以下错误：FormattingServiceImpl 无法解决

我尝试使用多种方法来导入 jar，但没有任何效果，

这是我的捆绑包的配置结构：

![在此处输入图像描述](../Images/7186873e81bff111605a8cd7ab0db2b3.png)

我被困在如何从 JSP 访问捆绑上下文的问题上，有人有任何建议/更正吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T10:04:05.043

您可能只是缺少 .class 来引用您的 FormattingServiceImpl 类 - 以下对我来说适用于裸 Apache Sling 实例，使用 Sling 的 Resource 接口而不是 FormattingServiceImpl 但具有相同的模式：

```
 <%@ page import="org.osgi.framework.BundleContext"%>  
  <%@ page import="org.osgi.framework.FrameworkUtil"%>
  <%@ page import="org.apache.sling.api.resource.Resource"%>  

  <%
    BundleContext bc = FrameworkUtil.getBundle(Resource.class).getBundleContext();
  %>

  <%= bc %> 
```

话虽如此，在 JSP 脚本中获取 BundleContext 的 IMO 很少有有效用例，我首先会质疑是否需要这样做。

此外，您的代码似乎表明 FormattingServiceImpl 是一个实现类，并且由定义它的包导出，这通常也是一个坏主意。一般来说，bundle 应该只导出包含它们提供的服务*接口的包。*

# php - 购物车 + 结帐问题

> ID：15463950
> 
> 赞同：1
> 
> 时间：2013-03-17T17:39:57.883
> 
> 标签：php, arrays, multidimensional-array, integration, shopping-cart

所以，这很长，在此先抱歉，希望你能尽力帮助我，

它是这样的：

我制作了一个自定义购物车，并且我将集成一个结帐（klarna），我遇到的问题是我尝试使用 json 将物品发送到结帐：

```
 $sendInfo = base64_encode(json_encode($_SESSION['cart_array']));
 echo '<input type="hidden" name="info" id="info" value="'.$sendInfo.'"/>';

 And to pick it up i use another one:
 $info = (array) json_decode(base64_decode($_POST['info'])); var_dump($info); 
```

这使：

```
array (size=2)
 0 => 
object(stdClass)[1]
  public 'item_id' => string '7' (length=1)
  public 'quantity' => int 1
1 => 
object(stdClass)[2]
  public 'item_id' => string '3' (length=1)
  public 'quantity' => int 1

 So to build it further and to get the products out from the database:

 $cartOutput ="";
 $cartTotal ="";
 $cartTOTAL ="";
 $shipping ="";
 $include ="";

 if (!isset($_SESSION["cart_array"]) || count($_SESSION["cart_array"]) < 1) {
   $cartOutput = "<h2 align='center'>Din kundvagn är tom</h2>";
   } else {

//Starta for each loop
$i = 0; 
   foreach ($_SESSION["cart_array"] as $each_item) { 
    $item_id = $each_item['item_id'];
    $sql = mysql_query("SELECT * FROM tblproducts WHERE idProducts='$item_id' LIMIT 1");
    while($row = mysql_fetch_array($sql)){
        $product_name = $row["strName"];
        $price = $row["dbPrice"];
        $details = $row["strDescription"];
        $artnummer = $row["strArtnummer"];

    } 
```

并将其放置在数组中以进行集成：

```
 $cart = array(
  array(
    'reference' => $artnummer,
    'name' => $product_name,
    'quantity' => $each_item['quantity'],
    'unit_price' => $price,
    'discount_rate' => 0,
    'tax_rate' => $tax,
   ),
   array(
    'type' => 'shipping_fee',
    'reference' => $artnummer,
    'name' => 'Shipping Fee',
    'quantity' => 1,
    'unit_price' => $shipping,
    'tax_rate' => $tax,
)
   );

 foreach($cart as $fieldarray){
   $body .= $fieldarray['reference'].' - '. $fieldarray['name'].' - '. $fieldarray['quantity'].' - '. $fieldarray['unit_price']; 
 } 
```

我得到了数组：

```
 //$cart var_dump
 array (size=2)
 0 => 
array (size=6)
  'reference' => string '40719013' (length=8)
  'name' => string 'Socka 2 par/fp WS Cotton' (length=24)
  'quantity' => int 1
  'unit_price' => int 4800
  'discount_rate' => int 0
  'tax_rate' => int 2500
 1 => 
array (size=6)
  'type' => string 'shipping_fee' (length=12)
  'reference' => string '40719013' (length=8)
  'name' => string 'Shipping Fee' (length=12)
  'quantity' => int 1
  'unit_price' => int 14500
  'tax_rate' => int 2500

 // $body var_dump
  string '40719013 - Socka 2 par/fp WS Cotton - 1 - 480040719013 - Shipping Fee - 1 - 14500' (length=81) 
```

到目前为止，它运行良好，没有发现任何问题，如果我在购物车中添加数量然后走到结账处，它也能正常工作，但正如有些人可能从第一个 var_dump 中注意到的那样，我在购物车中有两件物品（2不同的items_id）！所以它只显示购物车中的 1 件商品（最后添加了一件），所以总和是错误的，并且所有商品都没有在结帐中列出。

所以有人知道我做错了什么吗？

预先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T21:24:35.987

每次设置 $cart-Array 时，都会覆盖任何以前的条目：

```
$cart = array(...) 
```

您可能希望将每个条目添加到购物车数组

```
$cart[] = array(...) 
```

# polymorphism - 松散的自然变换只是没有自然性的自然变换吗？

> ID：15463951
> 
> 赞同：2
> 
> 时间：2013-03-17T17:40:03.923
> 
> 标签：polymorphism, category-theory, parametric-polymorphism

免费在[Theorems 的第 4 页！](http://homepages.inf.ed.ac.uk/wadler/papers/free/free.ps), Philip Wadler 说，参数性可以用松散的自然变换来表示。他是否指的是函数式编程语言中的参数多态函数是自然转换而没有证明其自然性的事实？由于我还没有找到宽松自然变换的适当定义，所以这是我目前的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:42:00.347

他不是。他指的是在[n-lab](http://ncatlab.org/nlab/show/lax+natural+transformation)中描述的松弛自然变换的概念，并在[此 MathOverflow 问题](https://mathoverflow.net/questions/84734/how-do-various-notions-of-natural-transformation-relate-to-various-notions-of-hom)中进行了讨论。

他指的是参数多态函数可以被视为**Functors**的事实。正是它们的参数化被视为一种*松散的自然变换*。基本上，这是从参数多态函数的任何特化到任何其他函数的统一方式。松懈的原因是事情不会在鼻子上通勤（即应用+运输与运输+应用不完全相同），但它们取决于给定的2个单元格。

# android - Android Instrumentation 测试 AsyncTask

> ID：15463952
> 
> 赞同：1
> 
> 时间：2013-03-17T17:40:09.640
> 
> 标签：android, instrumentation

我是 Android 仪器测试的新手。有人可以告诉我如何启动异步任务并等待计算结果吗？我的许多网络调用都依赖于 AsynTasks，我需要知道如何测试它？对于我们有一个 getInstrumentation().waitForMonitor 的活动，我们可以为 AsyncTasks 做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T18:17:25.337

该类`AsyncTask`有一个阻塞[`get()`](http://developer.android.com/reference/android/os/AsyncTask.html#get%28%29)方法，它基本上会在任务返回之前等待任务完成。这是 call 的同步版本`execute()`，这意味着您可以将其视为在主线程上执行的后台工作 - 因此它会阻塞直到完成。

```
public final Result get () 
```

> 如有必要，等待计算完成，然后检索其结果。

# bash - 端口 80 上的 BASH Web 服务器，无需一直以 root 身份运行

> ID：15463953
> 
> 赞同：1
> 
> 时间：2013-03-17T17:40:12.230
> 
> 标签：bash, sudo, netcat, httpserver

我正在构建一个非常小的 http 服务器来从浏览器控制基于树莓派的设备，并以此为起点： http: [//paulbuchheit.blogspot.com/2007/04/webserver-in-bash.html](http://paulbuchheit.blogspot.com/2007/04/webserver-in-bash.html)

它的核心是：

```
#!/bin/bash

RESPONSE=/tmp/webresp
[ -p $RESPONSE ] || mkfifo $RESPONSE

while true ; do
    ( cat $RESPONSE ) | nc -l -p 8080 | (
    REQUEST=`while read L && [ " " "<" "$L" ] ; do echo "$L" ; done`
    REQ="`echo \"$REQUEST\" | head -n 1`"

    echo "[ `date '+%Y-%m-%d %H:%M:%S'` ] $REQ" >>/var/log/http-access.log

    if [[ $REQ =~ ^GET\ /a[\ \/\#?] ]]; then
        # ...
        RESP="<p>You are at A</p><p><a href='/'>Home</a></p>"
    elif [[ $REQ =~ ^GET\ /b[\ \/\#?] ]]; then
        # ...
        RESP="<p>You are at B</p><p><a href='/'>Home</a></p>"
    elif [[ $REQ =~ ^GET\ /c[\ \/\#?] ]]; then
        # ...
        RESP="<p>You are at C</p><p><a href='/'>Home</a></p>"
    else 
        read -r -d '' RESP <<'HTMLDOC'
        <h3>Home</h3>
        <p><a href='/a'>A</a></p>
        <p><a href='/b'>B</a></p>
        <p><a href='/c'>C</a></p>
HTMLDOC

    fi

    cat >$RESPONSE <<EOF
HTTP/1.0 200 OK
Cache-Control: private
Content-Type: text/html
Server: bash/2.0
Connection: Close
Content-Length: ${#RESP}

$RESP
EOF
    )
done 
```

它工作得很好，除非我想在端口 80 上运行服务器，我必须 sudo 它。我认为一直以提升的权限运行服务器可能是一个坏主意。开始监听端口 80 后如何取消 sudo？看起来好像 nc 命令在每个请求上都重新运行。

是的，我知道我可以运行一个“真正的”轻量级 Web 服务器，但我想尽可能减少内存占用，而且我认为 bash 已经在运行。另外，我想将安装限制为添加一些 .sh 文件并使用文件运行`~/.config/autostart/autorun.desktop`一个

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T19:46:43.317

1024 以下的所有端口都是为超级用户保留的（请参阅[此处](http://www.freebsd.org/doc/en/books/developers-handbook/sockets-essential-functions.html)）。只要您在另一个尚未使用的端口上运行服务器，就可以了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T17:58:57.263

## 问题

您不能按照您的想法放弃 Bash 脚本中的权限。但是，您的脚本实际上并不需要 root 权限；只有*netcat*需要它们才能绑定到特权端口。

## 解决方案

以非特权用户身份运行您的脚本，并替换`nc -l -p 8080`为`sudo nc -l -p 80`. 这会将 root 权限限制为 netcat 进程，而不是将它们提供给您的整个脚本。

# php - PHP调整字体大小打印到网络热敏打印机

> ID：15463961
> 
> 赞同：1
> 
> 时间：2013-03-17T17:40:30.860
> 
> 标签：php, printing, epson, thermal-printer

我有以下代码，它就像从 PHP 打印到我的 epson 热敏打印机的魅力一样。当客户在网站上结账时，我们使用它在办公室打印客户订单。我想改变字体大小，让它看起来像一个更真实的食谱。

这是我使用的代码示例：

```
$texttoprint = "RECIPT TEXT \n NEXT LINE \n MORE STUFF";
$texttoprint = stripslashes($texttoprint);

$fp = fsockopen("192.168.192.168", 9100, $errno, $errstr, 10);
if (!$fp) {
echo "$errstr ($errno)<br />\n";
} else {
fwrite($fp, "\033\100");
$out = $texttoprint . "\r\n";
fwrite($fp, $out);
fwrite($fp, "\012\012\012\012\012\012\012\012\012\033\151\010\004\001");
fclose($fp);
} 
```

如果您能告诉我如何更改特定行的字体大小，那就太棒了。谢谢

从我读到的 012/012 是 ESC/p 代码，这里是手册的链接 - [http://files.support.epson.com/pdf/general/escp2ref.pdf](http://files.support.epson.com/pdf/general/escp2ref.pdf)

但我不明白如何应用这个：

ESC E - 选择粗体字 - C110

回答：

只是对于可能需要知道这里的用户是你需要的，我在 python 库中找到了答案（[http://code.google.com/p/python-escpos/downloads/list](http://code.google.com/p/python-escpos/downloads/list)）

这是如何执行 ESC 代码的列表（在 python 库中找到）[http://sheepy121.webhost4life.com/ESC.txt](http://sheepy121.webhost4life.com/ESC.txt)

这是所有 ESC 代码的文档[http://files.support.epson.com/pdf/general/escp2ref.pdf](http://files.support.epson.com/pdf/general/escp2ref.pdf)

这是使用[PHP 打印到本地热敏打印机的代码，没有 networkname 就无法工作](https://stackoverflow.com/questions/10268479/php-printing-to-local-thermal-printer-does-not-work-without-networkname)。

快乐印刷

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T18:25:06.803

这更多的是您理解手册的任务。不知道你之前是怎么做的。

在手册的 C3 页上，您可以获得命令概述。*ESC E*是选择粗体字体的命令（详见 C110 页）。您想更改字体大小，因此需要*ESC P*、*ESC M*或*ESC g*。

**ESC**代表转义字符，ASCII 表中的十进制索引 27 或十六进制 1B 或八进制 33。放置`"\033P"`在您的字符串中进行尝试，因为这是您在 PHP[字符串手册](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.double)中包含带有八进制代码的特殊字符的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-11T14:38:26.663

使用 php 打印选项。您也可以更改字体大小和字体系列..

这里是示例 php 代码...

```
header('Content-Type: text/plain; charset=UTF-8');

$printer = "\\\\BALA\\EPSON TM-T88IV Receipt"; 

$handle = printer_open($printer);
printer_start_doc($handle,"Testpage");
printer_start_page($handle);
$font = printer_create_font("Arial", 20, 10, 700, false, false, false, 0);
$pen = printer_create_pen(PRINTER_PEN_DOT, 1, "000000");
printer_select_pen($handle, $pen);
printer_select_font($handle, $font);
printer_draw_text($handle, "welcome", 10, 10);

printer_delete_font($font);
printer_delete_pen($pen);
printer_end_page($handle);
printer_end_doc($handle);
printer_close($handle); 
```

# python - 祖先查询解析错误

> ID：15463964
> 
> 赞同：3
> 
> 时间：2013-03-17T17:40:37.617
> 
> 标签：python, google-app-engine, python-2.7, google-cloud-datastore

我试图让我的[祖先查询](https://developers.google.com/appengine/docs/python/datastore/structuring_for_strong_consistency)工作，但我不断收到此错误：

> BadQueryError：解析错误：标识符是符号 ANCESTOR 处的保留关键字

在这一行：

```
TweepleKey(twitter_handle)) 
```

我正在关注[使用数据存储](https://developers.google.com/appengine/docs/python/gettingstartedpython27/usingdatastore)教程（有效），但是当我尝试将祖先查询的概念应用于我的代码（见下文）时，它不断产生上述错误。我哪里做错了？

```
import cgi
import urllib
import webapp2
import cgi

from google.appengine.ext import db

# defines a data model for a geotweet
# GeoTweet model has 1 property: twitter_handle
class GeoTweet(db.Model):
    twitter_handle = db.StringProperty()
    date = db.DateTimeProperty(auto_now_add=True)

def TweepleKey(twitter_handle=None):
    # Constructs a Datastore key for a TweepleStore entity with twitter_handle
    return db.Key.from_path('TweepleStore', twitter_handle or 'default_handle')

class MainPage(webapp2.RequestHandler):
    def get(self):      
        self.response.out.write("""<html><body>""")
        twitter_handle = self.request.get('twitter_handle')

        tweeple = db.GqlQuery("SELECT * " 
                              "FROM GeoTweet " 
                              "WHERE ANCESTOR = :1 " 
                              "ORDER BY date DESC LIMIT 10",
                              TweepleKey(twitter_handle))
        for t in tweeple:
            if t.twitter_handle:
                self.out.write('<b>Found %s. Saved on %s.</b>' % (t.twitter_handle, t.date))
            else:
                self.out.write('<b>%s was not found!' % twitter_handle)

        self.response.out.write("""<form action="/search" method="post">
                    <div><textarea name="twitter_handle" rows="1" cols="20">@example</textarea>
                    <div><input type="submit" value="Find"></div>
                </form>         
            </body>     
        </html>""")

class TweepleStore(webapp2.RequestHandler):
    def post(self):
        twitter_name = self.request.get('twitter_handle')
        geotweet = GeoTweet(parent=TweepleKey(twitter_name))
        geotweet.twitter_handle = twitter_name
        geotweet.put()
        self.redirect('/?' + urllib.urlencode({'twitter_name': twitter_name}))

app = webapp2.WSGIApplication([('/', MainPage),
                            ('/search', TweepleStore)], debug=True) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T18:00:51.650

[GQL 参考](https://developers.google.com/appengine/docs/python/datastore/gqlreference)说使用`WHERE ANCESTOR IS`.

# twitter-bootstrap - 使元素足够长以适合引导程序中的父 div 框

> ID：15463974
> 
> 赞同：0
> 
> 时间：2013-03-17T17:41:04.297
> 
> 标签：twitter-bootstrap

我正在尝试布局一个简单的表单，但我不确定这样做是否正确。我的第一个问题是：如果我有以下 html

```
<div class="row">
    <div class="span6">
        text text
    </div>

  <div class="span6">
       text text
   </div>
</div> 
```

有没有办法制作适用于 span* 类的更小的 margin-left 规则？我的意思是，这里的第二个 div 将比第一个 div 多 30px，但是如果我想让它只有 10px，该怎么做呢？

第二个问题：如果我有以下html

```
 <div class="row">
        <div class="span6">
            <label>text2</label> 
             <select>
                  <option>5</option>
          </select>
        </div>
</div> 
```

只要父 div 很宽，如何使选择按钮占用宽度空间？我尝试将 width:100% 添加到选择中，它工作正常，但是当添加填充时，选择比父项更宽？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T22:07:53.990

如果您给选择 100% 然后添加填充然后宽度变为 100% + 填充。

您可以将宽度设为 94% 并添加 3% 的填充，因此总和为 100%。

```
select {
    width: 94%;
    padding: 3%;
} 
```

如果您为选择元素添加边框，这也将包含在宽度计算中，因此您必须相应地调整您的值。

您也可以考虑使用 CSS3 框大小调整，但我不能 100% 确定它是否适用于选择：

[http://css-tricks.com/box-sizing/](http://css-tricks.com/box-sizing/)

# android - 隐藏状态栏而不使用 FLAG_FULLSCREEN

> ID：15463975
> 
> 赞同：2
> 
> 时间：2013-03-17T17:41:11.143
> 
> 标签：android, actionbarsherlock

我想在我的应用程序中隐藏状态栏并保持虚拟键盘为 ScrollViews 调整大小的能力。

这个：

```
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                            WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

不起作用，因为它破坏了所有 ScrollViews 阻止`adjustResize`调整视图的大小，从而允许用户在键盘可见时滚动，所以这不是一个可以接受的答案。

我有：

```
<item name="android:windowNoTitle">true</item> 
```

在我的基本主题中，我尝试将该设置直接放入我的活动的清单条目中，但它没有做任何事情。

我在我的应用程序中使用 ActionBarSherlock，因此我可以为我的用户提供统一的 UI，它要求我使用三个基本主题之一：

> 为了使自定义操作栏实现正常运行，您的应用程序必须使用 Theme.Sherlock、Theme.Sherlock.Light 或 Theme.Sherlock.Light.DarkActionBar，或者您的自定义主题必须使用上述其中之一作为其父级。

所以，我以这种方式配置了我的主题：

```
<style name="LightNoTitleBar" parent="Theme.Sherlock.Light.DarkActionBar">
    <item name="android:windowNoTitle">true</item>
</style> 
```

我已经`android:theme="@style/LightNoTitleBar"`在我的清单条目中找到了这个活动。

那么，鉴于上述限制，我该如何隐藏状态栏？

# c++ - 将代码从 C 转换为 C++：typedef void 和

> ID：15463977
> 
> 赞同：0
> 
> 时间：2013-03-17T17:41:17.757
> 
> 标签：c++, c, typedef, void

我正在尝试将 C 文件转换为 C++ 文件，但我一直遇到以下 typedef 定义的问题。下面我展示了 Ah、A.cpp 和我的主类的代码和我的类结构。当我尝试编译时，出现以下错误：

```
 main.cpp|44|error: no matching function for call to ‘A::Signal(int, <unresolved overloaded function type>)’|
 main.cpp|44|note: candidate is:|
 A.h|115|note: void (* A::Signal(int, void (*)(int)))(int)|
 A.h|115|note:   no known conversion for argument 2 from ‘&lt;unresolved overloaded function type>’ to ‘void (*)(int)’| 
```

//啊

```
class A
{
  public:
  void sigquit_handler (int sig);
  typedef void handler_t(int);
  handler_t *Signal(int signum, handler_t *handler);
} 
```

//A.cpp

```
/*
 * Signal - wrapper for the sigaction function
 */
 A::handler_t* A::Signal(int signum, A::handler_t *handler) {

   struct sigaction action, old_action;
   action.sa_handler = handler;
   sigemptyset(&action.sa_mask); /* block sigs of type being handled */
   action.sa_flags = SA_RESTART; /* restart syscalls if possible */
   if (sigaction(signum, &action, &old_action) < 0) {
       unix_error("Signal error");
   }

   return (old_action.sa_handler);
 }

/*
 * sigquit_handler - The driver program can gracefully terminate the
 *    child shell by sending it a SIGQUIT signal.
 */
 void A::sigquit_handler(int sig) {
     if (verbose)
        printf("siquit_handler: terminating after SIGQUIT signal\n");
     exit(1);
     } 
```

//main.cpp

```
int main(int argc, char **argv) {

A a;
a.Signal(SIGQUIT, a.sigquit_handler);  /* so parent can cleanly terminate child*/
} 
```

有人可以向我解释为什么会这样吗？我认为问题在于 sigquit_handler(void) 的返回类型和 Signal (int, handler_t*) 的输入参数，但我不明白为什么。

* * *

按照建议进行编辑：

//啊

```
class A
{
  public:
  void sigquit_handler (int sig);
  typedef void (*handler_t)(int);
  handler_t Signal(int,handler_t);
} 
```

//A.cpp

```
/*
 * Signal - wrapper for the sigaction function
 */
 handler_t A::Signal(int signum, handler_t handler){

   struct sigaction action, old_action;
   action.sa_handler = handler;
   sigemptyset(&action.sa_mask); /* block sigs of type being handled */
   action.sa_flags = SA_RESTART; /* restart syscalls if possible */
   if (sigaction(signum, &action, &old_action) < 0) {
       unix_error("Signal error");
   }

   return (old_action.sa_handler);
 }

/*
 * sigquit_handler - The driver program can gracefully terminate the
 *    child shell by sending it a SIGQUIT signal.
 */
 void A::sigquit_handler(int) {
     if (verbose)
        printf("siquit_handler: terminating after SIGQUIT signal\n");
     exit(1);
     } 
```

//main.cpp

```
int main(int argc, char **argv) {

A a;
a.Signal(SIGQUIT, &sigquit_handler);  /* so parent can cleanly terminate child*/
} 
```

错误：

```
 main.cpp|44|error: ‘sigquit_handler’ was not declared in this scope| 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T17:44:56.560

我假设这个（错误的）行：

```
typedef void handler_t(int); 
```

您想将 typedef 设为指向函数的指针。为此，您必须添加一些括号和星号：

```
typedef void (*handler_t)(int); 
```

但是你真正需要的是一个指向成员函数的指针的 typedef，它是这样完成的：

```
typedef return_type (class_type::* func_t)(arg); 
```

然后（见代码注释）：

```
// Second parameter is wrong: you need to use
//     A::handler_t
// instead of:
//     A::handler_t*
//
//      error here                        error here
//          v                                   v
A::handler_t* A::Signal(int signum, A::handler_t* handler)
{
    struct sigaction action, old_action; // 'struct' not needed in C++
    // these 2 variables are not initialized
    // (except if they have a default constructor).

    // ...

    return (old_action.sa_handler); // parenthesis not needed. old_action was not changed in this function
} 
```

最后，这里是如何将指针传递给成员：

```
A a;
a.Signal(SIGQUIT, &A::sigquit_handler); 
```

现在，另一个问题：`sigaction::sa_handler`不是指向成员的指针*。*因此，您需要`sigquit_handler`离开课堂`A`，并更改功能`Signal`：

```
// A.h
class A
{
    public:
        typedef void (*handler_t)(int);
        handler_t Signal(int,handler_t);
};
void sigquit_handler(int);

// A.cpp
void sigquit_handler(int)
{
    // ...
}

A::handler_t A::Signal(int,handler_t)
{
    // ...
}

// main.cpp
int main()
{
    A a;
    a.Signal(SIGQUIT, &sigquit_handler);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T17:46:05.720

您在这里有几个问题，一个是您使用指向函数的指针，但将其传递给成员函数。这两个不一样。我建议你看看[`std::function`](http://en.cppreference.com/w/cpp/utility/functional/function)and [`std::bind`](http://en.cppreference.com/w/cpp/utility/functional/bind)。

# database - django 从数据库存储过程中获取默认值

> ID：15463978
> 
> 赞同：2
> 
> 时间：2013-03-17T17:41:20.887
> 
> 标签：database, django, postgresql

有什么方法可以设置 django 模型的自动字段 id 以从数据库过程中选择其值。例如：

```
class Service(models.Model):

id = models.CharField(max_length=50, primary_key=True, default=database_procedure)
name = models.CharField(max_length=50)
icon = models.CharField(max_length=150, default='iconset-info.png')
description = models.TextField() 
```

和数据库过程是这样的：

```
CREATE FUNCTION database_procedure() RETURNS trigger AS $database_procedure$
    BEGIN
       [...]
    END;
$database_procedure$ LANGUAGE plpgsql; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T17:45:24.753

您可以在默认值表达式中使用任何函数，包括您自己的函数——只要它返回合适的**数据类型**。[该手册规定](http://www.postgresql.org/docs/current/interactive/sql-createtable.html)：

> `DEFAULT` **default_expr**
> 
> 该`DEFAULT`子句为其列定义所在的列分配默认数据值。该值是任何无变量的表达式（不允许对当前表中的其他列进行子查询和交叉引用）。默认表达式**的数据类型必须与列的数据类型匹配**。

大胆强调我的。
但是您显示的功能是触发功能（`RETURNS trigger`），**不能**用于此功能。

如果您的函数返回`varchar`或任何其他可以强制转换为列类型的类型，您可以使用它。应该只是`default=myfunc()`在 Django 中。它`DEFAULT myfunc()`在`CREATE TABLE`SQL 中。包括括号，在我的示例中为没有参数的函数为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T17:50:26.397

为什么不随心所欲地使用？

[默认](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.Field.default)值可能是可调用对象。因此，在一个函数中你可以转向数据库并做一些事情。

[信号](https://docs.djangoproject.com/en/1.4/topics/signals/)也可能对您有所帮助。

# vb.net - 在另一个页面上获取 ListBox 的选定项

> ID：15463984
> 
> 赞同：0
> 
> 时间：2013-03-17T17:41:37.293
> 
> 标签：vb.net, listbox, windows-phone-8

我做了一个有两页的申请。当用户单击第一页列表框中的项目时，第二页应该显示有关单击项目的详细信息。

从第二页访问第一页列表框中的选定项目时遇到问题。我怎样才能得到这个工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T17:46:25.173

你不能这样做，因为导航后第一页不再存在。您必须首先传递该值：

[如何在 XAML 页面之间传递值（参数）？](https://stackoverflow.com/questions/12444816/how-to-pass-values-parameters-between-xaml-pages)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T19:18:12.493

最简单的方法 - 通过导航参数传递数据，就像 GET HTTP 方法一样，Nokia 有一个如何做到这一点的例子[。](http://www.developer.nokia.com/Community/Wiki/Passing_parameters_while_navigating_between_pages_on_Windows_Phone)

第二种方式 - 将值存储在 IsolatedStorage 中，例如在 IsolatedStorageSettings 中，这里是关于它的[Microsoft 主题。](https://www.google.ru/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CDMQFjAA&url=http://msdn.microsoft.com/en-us/library/gg680266%28v=pandp.11%29.aspx&ei=nhZGUdTIKcvo4QT44YGYAg&usg=AFQjCNF_PzsvQNKk27Ex2GhJfwGjxJejKg&sig2=ABWJFsf4FUOZb0MtEF9XOw&bvm=bv.43828540,d.bGE&cad=rjt)

# php - 如何从方法内部获取变量

> ID：15463985
> 
> 赞同：1
> 
> 时间：2013-03-17T17:41:38.727
> 
> 标签：php, class, variables, global-variables, scope

如果我有一个文件`class.php`：

```
class Greeting {
   function Hello {
      $variable = 'Hello World!';
   }
} 
```

然后是一个主文件`index.php`：

```
include('class.php');
$page = new Greeting();
$page->Hello(); 
```

如何访问`$variable`inside of的内容`index.php`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T17:45:44.080

您现在无法访问它。您需要将其设为如下属性：

```
class Greeting {
   public $variable = 'Hello World!';
   function Hello {
      return $this->variable;
   }
} 
```

然后你可以像这样访问它：

```
$page = new Greeting();
echo $page->variable;
// or
echo $page->Hello(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T17:51:54.433

为了不忽略所有可能性，您还可以执行以下操作：

```
class Greeting {
   function Hello() {
      global $variable;
      $variable = 'Hello World!';
   }
}

$page = new Greeting();
$page->Hello();

echo $variable; 
```

但不要这样做！这没有道理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T17:45:37.357

相反，`$variable`在类本身中公开，然后在 Hello() 函数中设置它。

```
class Greeting {
   public $variable = '';

   function Hello {
      $this->variable = 'Hello World!';
   }
} 
```

然后您可以通过执行以下操作来检索它：

```
include('class.php');
$page = new Greeting();
$page->Hello();
echo $page->variable; 
```

另一种选择是让 Hello() 返回 $ 变量，然后您可以从那里检索它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T18:04:42.717

```
 class Greeting {
 public $variable = 'Hello World!';
 function Hello (){
    echo $this->variable;
 }
}
$page = new Greeting();
$page->Hello(); 
```

# r - R闪亮的嵌套uiOutput错误：输入=> uiOutput => uiOutput =>输出

> ID：15463988
> 
> 赞同：3
> 
> 时间：2013-03-17T17:41:47.350
> 
> 标签：r, shiny

我在设计嵌套输入/输出应用程序时遇到问题。（我也尝试将这个问题发布到[shiny-discuss](https://groups.google.com/forum/#!forum/shiny-discuss)。但是，当我发布时它会被自动删除。为什么？）

我的应用程序可以简化为以下步骤：

1.  通过 textarea 输入数据集。即：输入$textarea.in

2.  加载数据集并显示导入数据集的名称列表。用户可以通过 selectInput 选择数据。即：uiOutput（“选择数据”）

3.  计算所选数据的范围，然后显示一个滑块输入。即：uiOutput（“范围”）

4.  最后，计算滑块输入选择的值的平方。即：逐字文本输出（“range.out”）

那是：

```
input => uiOutput => uiOutput => output
          (work!)     (work!)    (error!) 
```

更改导入的数据集后，错误将在步骤 4 发生。更具体地说，初始输入格式为：

```
Data.A 1 2 3 4 5
Data.B 6 7 8 9 10 11 
```

另一种输入格式是：

```
Data.C 1 3 5 7
Data.D 2 4 6 8 
```

第 2 步和第 3 步会自动更改，但第 4 步不会。如何解决？

最好的

请注意，在线应用程序和代码如下：

[http://glimmer.rstudio.com/tchsieh/myapp/](http://glimmer.rstudio.com/tchsieh/myapp/)

```
#=========================
#ui.R
#=========================
library(shiny)
shinyUI(pageWithSidebar(  
  headerPanel("Title"),
  sidebarPanel(
    p("Text Area:"),
    tags$textarea(id="textarea.in", rows=3, "Data.A 1 2 3 4 5 \nData.B 6 7 8 9 10 11"),
    uiOutput("choosedata"),
    uiOutput("range")
  ),

  mainPanel(    
    h2("Test"),

    h3("Raw Data (step1: work!)"),
    verbatimTextOutput("textarea.out"),

    h3("Range of the selected data (step2: work!)"),
    verbatimTextOutput("summary"),

    h3("Squared of the selected value (step3:error when change Text area)"),
    verbatimTextOutput("range.out")

  )
))

#=========================
#server.R
#=========================
library(shiny)
shinyServer(function(input, output) {
  loadPaste <- reactive({
    text <- input$textarea.in
    temp <- lapply(readLines(textConnection(text)), function(x) scan(text = x, what='char'))
    out <- list()
    out.name <- 0
    for(i in seq_along(temp)){
      out.name[i] <- temp[[i]][1]
      out[[i]] <- as.numeric(temp[[i]][-1])
    }
    names(out) <- t(data.frame(out.name))
    out
  })

  output$textarea.out <- renderPrint({
    loadPaste()
  })

  output$choosedata <- renderUI({
    dataname <- names(loadPaste())  
    dataList <- list()
    for(i in seq_along(dataname)){
      dataList[[i]] <- dataname[i]
    }
    selectInput("dataset", "Select dataset:", choices  = dataList, selected = dataList[1])
  })

  output$summary <- renderPrint({
    out <- loadPaste()
    id <- which(names(out) == input$dataset)
    mydata <- out[[id]]
    range(mydata)

  })

  output$range <- renderUI({
    out <- loadPaste()
    id <- which(names(out) == input$dataset)
    mydata <- out[[id]]
    sliderInput("range.in", "Selecte a value in the range of data", min=min(mydata), value=mean(mydata), max=max(mydata), step=diff(range(mydata))/10)
  })

  output$range.out <- renderPrint({
    (input$range.in)^2
  })

}) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T23:58:52.290

这是 Shiny 中的一个错误，已在[此提交](https://github.com/rstudio/shiny/commit/9a1d3783eebf22a6206e24ecca71ae1c803744b5)中修复。感谢您的报告！

（您多次尝试在闪亮的讨论中发帖都被 Google Groups 归类为垃圾邮件。我已清除垃圾邮件并回复了您最近的帖子，并将您标记为安全发件人，因此希望这种情况不会再次发生。抱歉不便！）

# java - 从 java 运行时，mysqldump 返回代码 6，但相同的命令在命令行中运行良好

> ID：15463990
> 
> 赞同：3
> 
> 时间：2013-03-17T17:42:04.553
> 
> 标签：java, mysql, process, mysqldump, runtime.exec

当我通过 Runtime.getRuntime 从 Java 运行相同的命令时，我得到返回码 6。相同的命令在命令行中运行良好：

```
process = Runtime.getRuntime().exec(mysqldumpCommand);
int processComplete = process.waitFor(); 
```

对于这 2 个命令，当从 java 运行并且没有转储时，我得到返回码 6。从命令行工作正常（我在本地环境中没有密码。）

```
mysqldump --user=root --password= --host=localhost dbname > c:\temp\dumpfile.sql
mysqldump --user=root --password="" --host=localhost dbname > c:\temp\dumpfile.sql 
```

当故意输入错误密码时，我在 java 中得到返回码 2，并且在命令行中出现连接错误：

```
mysqldump --user=root --password= --host=localhost dbname > c:\temp\dumpfile.sql 
```

[我在这里](https://stackoverflow.com/questions/3846022/where-i-can-find-a-list-of-mysqldump-exit-codes)找到的返回码：

```
Taken from client/mysqldump.c in MySQL 5.1.59:

#define EX_USAGE 1
#define EX_MYSQLERR 2
#define EX_CONSCHECK 3
#define EX_EOM 4
#define EX_EOF 5 /* ferror for output file was got */
#define EX_ILLEGAL_TABLE 6 
```

在 java 中运行相同的命令并且从命令行正常工作时，我为什么会得到（错误）返回码 6？

稍后编辑：我从 Windows 尝试。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T17:49:30.363

[`Runtime.exec`不是 shell](http://www.javaworld.com/jw-12-2000/jw-1229-traps.html)，因此使用 > 和 < 的重定向将不起作用。当前，该命令正在传递`>`给`mysqldump`，它将其解释为您要导出的表的名称。（因此返回代码 6，“非法表”。）

有两种解决方案：

1.  运行一个外壳。使用此命令而不是您拥有的命令：

    ```
    cmd.exe /c "mysqldump --user=root --password= --host=localhost dbname > c:\temp\dumpfile.sql" 
    ```

2.  自己将命令的输出写入文件，使用`Process.getInputStream()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-10T15:47:36.673

mysqldump 现在支持`--result-file=`

所以它看起来像这样。

```
mysqldump --user=root --password= --host=localhost dbname --result-file=c:\temp\dumpfile.sql 
```

# opennlp - 如何为非英语语言训练 OpenNLP？

> ID：15463996
> 
> 赞同：1
> 
> 时间：2013-03-17T17:42:31.590
> 
> 标签：opennlp, named-entity-recognition

是否可以使用 OpenNLP API 为不同于英语的语言训练 OpenNLP，例如用西里尔字母编写的斯拉夫语言？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T17:37:39.820

就在这里。OpenNLP 文档提供了有关如何使用和训练每个模块的说明。

具体命名实体识别请看[这里](http://opennlp.apache.org/documentation/manual/opennlp.html#tools.namefind.training)。