# StackOverflow 问答 13374000-13374999

# java - 从对象列表的 getter 创建值列表

> ID：13374000
> 
> 赞同：5
> 
> 时间：2012-11-14T06:24:35.003
> 
> 标签：java, list

好的，假设我有一个非常简单的课程，例如

```
public class Baby {
   private String Name = "alf";
   public String getName() {
      return Name;
   }
} 
```

现在我想知道什么。给定一个婴儿列表，在 Java 中是否有任何更漂亮/更酷/更短的方法来创建婴儿姓名的数组/数组列表，而不是简单地循环遍历所有婴儿并将他们的名字添加到新列表中？相当于：

```
ArrayList<Baby> babies = new ArrayList<Baby>();
/* some code adding a bunch of babies to the arraylist */

ArrayList<String> names = new ArrayList<String>();
for (Baby b : babies) {
  names.add(b.getName());
} 
```

...但*更酷。*明白我的意思了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T06:37:45.787

你可以使用[番石榴的](https://code.google.com/p/guava-libraries/) [`Lists.transform`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Lists.html#transform%28java.util.List,%20com.google.common.base.Function%29)：

```
Function<Baby, String> getBabyNameFunction = new Function<Baby, String>() {
    @Override
    public String apply(Baby baby) {
        return baby.getName();
    }
};

List<String> babyNames = Lists.transform(babies, getBabyNameFunction); 
```

此处的关键区别在于延迟执行转换的原始列表`babyNames`的*视图。*从文档中：

> 该函数被延迟应用，在需要时调用。这对于返回的列表是视图是必要的，但这意味着该函数将多次应用于批量操作，如 `List.contains(java.lang.Object)`和`List.hashCode()`。为了使其表现良好，功能应该是快速的。当返回的列表不需要是视图时，为避免延迟评估，请将返回的列表复制到您选择的新列表中。

显然，实现的语法`Function`相当冗长——在 lambdas 之前，这对你来说都是 Java。我通常将常用函数保留为常量，以避免在调用站点出现混乱和重新实例化：

```
public class Baby {

    ...

    public static class Functions {

        private static final Function<Baby, String> GET_NAME =
                new Function<Baby, String>() {
                    @Override
                    public String apply(Baby baby) {
                        return baby.getName();
                    }
                };

        private Functions() { }

        public static Function<Baby, String> getName() {
            return GET_NAME;
        }
    }
} 
```

是的，它甚至更多的代码，但它被隐藏起来并且更易于维护。然后在呼叫站点：

```
List<String> babyNames = Lists.transform(babies, Baby.Functions.getName()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T17:32:15.073

使用[GS Collections](https://github.com/goldmansachs)，您有几种方法可以做到这一点。您可以使用称为 FastList 的 ArrayList 的插入式替换。

```
MutableList<Baby> babies = FastList.newList();
/* some code adding a bunch of babies to the fastlist */

MutableList<String> names = babies.collect(new Function<Baby, String>() {
    public String valueOf(Baby baby) {
        return baby.getName();
    }
}); 
```

或者，您可以将 ArrayList 与 ListIterate 实用程序类一起使用。

```
ArrayList<Baby> babies = new ArrayList<Baby>();
/* some code adding a bunch of babies to the arraylist */

List<String> names = ListIterate.collect(babies, new Function<Baby, String>() {
    public String valueOf(Baby baby) {
        return baby.getName();
    }
}); 
```

如果您不关心结果顺序，但希望允许重复，您可以使用 Bag 代替。

```
MutableList<Baby> babies = FastList.newList();
/* some code adding a bunch of babies to the fastlist */

MutableBag<String> names = babies.collect(new Function<Baby, String>() {
    public String valueOf(Baby baby) {
        return baby.getName();
    }
}, HashBag.<String>newBag());

int numberOfBabiesNamedXYZ = names.occurrencesOf("XYZ"); 
```

如果你一遍又一遍地使用这个函数，你可能想把它作为一个常量放在 Baby 类上。

注意：我是 GS Collections 的开发人员。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T06:36:14.770

嗯...简单地说，不。

假设你正在寻找类似的东西

```
ArrayList<String> names = babies.getName(); 
```

Java 中没有这样的东西。

但是，您可以创建一个新课程来为您完成：

```
public class BabyNameifier {

    public BabyNameifier(){}

    public ArrayList<String> Nameify(ArrayList<Baby> babies) {
        ArrayList<String> names = new ArrayList<String>();
        for (Baby b : babies) {
            names.add(b.getName());
        }
        return names;
    }
} 
```

这样，您以后可以说：

```
ArrayList<Baby> babies = new ArrayList<Baby>();
/* some code adding a bunch of babies to the arraylist */

BabyNameifier babyNameifier = new BabyNameifier();
ArrayList<String> names = babyNameifier.Nameify(babies); 
```

这将创造出最酷的方式来系统地检索世界上已知的婴儿名字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T06:47:00.627

你想要*更酷*的方式吗？如果您了解 Spring 框架，那么您很幸运！

在 applicationContext.xml 中，编写如下内容：

```
<beans xmlns="http://www.springframework.org/schema/beans"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="http://www.springframework.org/schema/beans
 http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">

<bean id="babyList" class="com.babies.BabyList">

    <property name="babyLists">
        <list>
            <bean class="com.babies.Baby">
                <property name="name" value="alice" />
            </bean>
            <bean class="com.babies.Baby">
                <property name="name" value="bob" />
            </bean>
            <bean class="com.babies.Baby">
                <property name="name" value="trudy" />
            </bean>
        </list>
    </property>
</bean>

 </beans> 
```

这是普通Java中的代码

```
package com.babies;

 import org.springframework.context.ApplicationContext;
 import org.springframework.context.support.ClassPathXmlApplicationContext;

  public class Main  {
      public static void main( String[] args ) {
          ApplicationContext context = new ClassPathXmlApplicationContext("applicationContext.xml");

          BabyList babyList = (BabyList)context.getBean("babyList");
          System.out.println(babyList);

    }
  } 
```

现在，只要您想从列表中添加/删除任何名称，您就可以在 applicationContext.xml 中编辑列表。无需对所有内容进行硬编码。

您可以从此链接参考有关 Spring 框架集合的更多信息：[http ://www.mkyong.com/spring/spring-collections-list-set-map-and-properties-example/](http://www.mkyong.com/spring/spring-collections-list-set-map-and-properties-example/)

或者，如果您只是想了解更多关于 Spring 的信息，这里是一个很好的起点： [http ://www.mkyong.com/tutorials/spring-tutorials/](http://www.mkyong.com/tutorials/spring-tutorials/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-27T20:06:31.173

在 2014 年 3 月发布 Java 8 之后，引入 Stream API和操作的*更酷*的方式是这样的：`.map``.collect`

```
ArrayList<Baby> babies = new ArrayList<Baby>();
/* some code adding a bunch of babies to the arraylist */

List<String> names = babies
    .stream() // Stream<Baby>
    .map(Baby::getName) // Stream<String>; use reference to the getter method
    .collect(Collectors.toList()); // build resulting list of names 
```

# c# - DropShadowEffect 到 XAML 中的特定元素

> ID：13374010
> 
> 赞同：2
> 
> 时间：2012-11-14T06:25:37.057
> 
> 标签：c#, wpf, xaml, effect

我有一个由其他 UI 控件组成的**边框**，例如画布、按钮、组合框等。我只希望边框上有一个**DropShadowEffect**，但所有子控件最终都继承了**DropShadowEffect**。

例如，以下代码在 TextBox、Button、ComboBox 上生成**DropShadowEffect 。**如何仅将**DropShadowEffect**应用于边框？

```
<Border>
   <Border.Effect>
      <DropShadowEffect ...>
   </Border.Effect>
   <Canvas>
      <TextBox>...</TextBox>
      <Button>...</Button>
      <ComboBox>...<ComboBox>
   </Canvas>
</Border> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T08:14:51.343

当 a`DropShadowEffect`应用于 a`layout container`时，例如 DockPanel 或 Canvas，效果将应用于元素或视觉对象的视觉树，包括其所有子元素。

[但是下面的文章显示了一个解决方法来](http://diptimayapatra.wordpress.com/2010/04/05/bitmap-effects-in-wpf-part-ii/)实现这个目标。

假设您有有效的边界。只要有`another border with same position but without the effect`，就可以解决问题-

```
<Border Margin="10">
   <Border.Effect>
      <DropShadowEffect ...>
   </Border.Effect>
</Border>
<Border Margin="10">
   <Canvas>
      <TextBox>...</TextBox>
      <Button>...</Button>
      <ComboBox>...<ComboBox>
   </Canvas>
</Border> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T07:51:53.483

有点棘手，我是这样做的。

```
 <ControlTemplate x:Key="ShadowBorderShadowTemplate">
        <!-- Start shadow effect to fragment -->
        <Grid x:Name="Transform">
            <Border BorderThickness="1"
                BorderBrush="Gray"
                Background="{x:Null}"
                Margin="1">
                <Border.Effect>
                    <DropShadowEffect BlurRadius="6"
              Direction="270"
              ShadowDepth="2" />
                </Border.Effect>
            </Border>

            <Border BorderThickness="0"
                    Margin="1,2,1,1"
                    BorderBrush="{x:Null}"
                    Background="White" />
        </Grid>
        <!-- End shadow effect to fragment -->
    </ControlTemplate>

    <ControlTemplate x:Key="ContentControlTemplateWithShadow" 
               TargetType="{x:Type ContentControl}">
        <Grid>
            <!-- Shadow around the left nav -->
            <ContentControl Template="{DynamicResource ShadowBorderShadowTemplate}" />
            <ContentPresenter />
        </Grid>
    </ControlTemplate> 
```

并使用类似的资源

```
 <ContentControl Template="{StaticResource ContentControlTemplateWithShadow}">
        <Border>
            <Canvas>
                <TextBox Text="ABCD" Canvas.Left="115" Canvas.Top="134" />
                <Button Canvas.Left="115" Canvas.Top="91">Test</Button>
                <ComboBox Canvas.Left="115" Canvas.Top="54" />
            </Canvas>
        </Border>
    </ContentControl> 
```

希望能帮助到你..

# ipad - 我们如何像一本书一样为 ipad 视图设置动画

> ID：13374016
> 
> 赞同：1
> 
> 时间：2012-11-14T06:26:24.357
> 
> 标签：ipad, animation

我想像一本书一样为 ipad 中的视图设置动画，视图应该像一页一样从右到左翻转，反之亦然。谁能为此提供任何教程或示例。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T07:09:31.490

您想使用[UIPageViewController](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPageViewControllerClassReferenceClassRef/UIPageViewControllerClassReference.html)
参见例如本[教程](http://www.techotopia.com/index.php/An_Example_iOS_5_iPhone_UIPageViewController_Application)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T07:00:06.233

```
 CATransition *animation = [CATransition animation];
        [animation setDelegate:self];
        [animation setDuration:1.0f];
        animation.startProgress = 0.2;
        animation.endProgress   = 1;
        [animation setTimingFunction:UIViewAnimationCurveEaseInOut];
        [animation setType:@"pageCurl"];

        [animation setSubtype:kCATransitionFromLeft];

        [animation setFillMode: kCAFillModeBackwards];
[self.view.layer addAnimation:animation forKey:@"animation"]; 
```

翻转你做的另一种方式：

```
 [animation setType:@"pageUnCurl"]; 
```

希望这有帮助，祝你好运 ：）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T10:43:47.873

检查链接

[UIPageViewController](http://www.ioslearner.com/implementing-uipageviewcontroller-programatically-without-storyboarding/)

# c# - 发布 C# 控制台应用程序

> ID：13374017
> 
> 赞同：18
> 
> 时间：2012-11-14T06:26:26.197
> 
> 标签：c#, console-application, setup-deployment

我使用 VS2010 开发了一个 C# 控制台应用程序。现在我想把它变成一个setup.exe。是否可以将此 setup.exe 作为独立文件来运行我的程序？这意味着我如何在获取 setup.exe 时实现，当我单击该文件时，它将运行我的控制台，甚至无需打开 VS，也不需要工作站上的项目文件夹。我已经尝试过无数次自己做，但直到现在都失败了。请给点建议。

谢谢，10e5x

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-14T06:31:13.580

你可以发布它。转到您的解决方案资源管理器。右键单击它。发布应用程序。完成发布向导后，您可以在发布文件夹中获取设置文件。或者您可以直接从 Bin 文件夹中复制 exe 文件并将其粘贴到您想要的任何位置。希望这会有所帮助。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-14T09:22:43.317

按照步骤

1）首先构建代码 2）然后转到您的项目文件夹 3）打开 Debug/Bin 4）在 Bin 中，您可以看到 exe 文件。您可以在任何工作站上复制该文件并运行您的控制台应用程序。

请记住确认您的程序是在哪个 .NET 版本中编译的。如果假设您在 .NET 版本 3.5 中编译程序并在 .NET 版本 2 中运行程序。不起作用

谢谢

# visual-studio - 通过 IIS 的 MS Azure 模拟器

> ID：13374021
> 
> 赞同：1
> 
> 时间：2012-11-14T06:27:02.647
> 
> 标签：visual-studio, iis-7, azure-web-roles

每次运行应用程序时，我都面临启动 MS Azure 模拟器的问题。可能是我遵循的过程不正确。就像：1）编辑代码 2）通过在 Visual Studio 中按 F5 来运行项目（Azure 项目是启动项目） 3）VS 启动 Ms Azure Emulator 4）最后应用程序在本地主机（在 VS 内置 Web 服务器中）运行有一些像 127.0.0.1:82 这样的网址

开销是每次我进行更改时，我都会执行上述 4 个步骤。这会浪费大量的开发时间。

我的问题：有什么方法可以直接使用 IIS 运行，例如 1）编辑代码 2）在浏览器中构建并启动应用程序 3）附加到进程 w3wp 以进行调试。

我是一个新的天蓝色项目。您的帮助将不胜感激。

我的 ServiceDefinition.csdef：

```
<?xml version="1.0" encoding="utf-8"?>
<ServiceDefinition name="ABC" xmlns="http://schemas.microsoft.com/ServiceHosting/2008/10/ServiceDefinition">
  <WebRole name="ABCWebRole">
    <Sites>
      <!--<Site name="External" physicalDirectory="..\External">
        <Bindings>
          <Binding name="Http" endpointName="HttpIn" />
        </Bindings>
      </Site>-->
      <Site name="ABCWebRole" physicalDirectory="..\ABCWebRole">
        <Bindings>
          <Binding name="Http" endpointName="HttpIn" />
          <!--<Binding name="HttpsIn" endpointName="HttpsIn" hostHeader="app.ABC.com" />-->
        </Bindings>
      </Site>
    </Sites>
    <ConfigurationSettings>
      <Setting name="StorageConnectionString" />
      <Setting name="SmtpServer" />
      <Setting name="SmtpPort" />
      <Setting name="SmtpUsername" />
      <Setting name="SmtpPassword" />
      <Setting name="myDSUserName" />
      <Setting name="myDSPassword" />
      <Setting name="myDSIntegratorKey" />
      <Setting name="APIUrl" />
      <Setting name="AccountManagementUrl" />
      <Setting name="myDSEmail" />
      <Setting name="myDSAccountId" />
      <Setting name="DSmemberPassword" />
      <Setting name="QueueNamespace" />
      <Setting name="QueueIssuer" />
      <Setting name="QueueIssuerKey" />
      <Setting name="ShowingFeedbackQueueName" />
      <Setting name="ServiceReportQueueName" />
    </ConfigurationSettings>
    <LocalResources>
      <LocalStorage name="ABCLocal" cleanOnRoleRecycle="true" sizeInMB="1024" />
      <LocalStorage name="DiagnosticStore" cleanOnRoleRecycle="true" sizeInMB="7000" />
      <LocalStorage name="CustomLogging" cleanOnRoleRecycle="true" sizeInMB="1024" />
    </LocalResources>
    <Certificates>
      <Certificate name="app.ABC.com" storeLocation="LocalMachine" storeName="My" />
    </Certificates>
    <Endpoints>
      <InputEndpoint name="HttpsIn" protocol="https" port="443" certificate="app.ABC.com" />
      <InputEndpoint name="HttpIn" protocol="http" port="80" />
    </Endpoints>
    <Imports>
      <Import moduleName="Diagnostics" />
    </Imports>
  </WebRole>
  <WorkerRole name="ABCWorkerRole" vmsize="ExtraSmall">
    <!--Remove diagnostics permissions fix...  Remember to remove the associated files<Startup>
      <Task commandLine="FixDiag.cmd" executionContext="elevated" taskType="background" />
    </Startup>
    -->
    <Imports>
      <Import moduleName="Diagnostics" />
    </Imports>
    <ConfigurationSettings>
      <Setting name="StorageConnectionString" />
      <Setting name="SmtpServer" />
      <Setting name="SmtpPort" />
      <Setting name="SmtpUsername" />
      <Setting name="SmtpPassword" />
      <Setting name="QueueNamespace" />
      <Setting name="QueueIssuer" />
      <Setting name="QueueIssuerKey" />
      <Setting name="ShowingFeedbackQueueName" />
      <Setting name="ServiceReportQueueName" />
    </ConfigurationSettings>
    <LocalResources>
      <LocalStorage name="DiagnosticStore" cleanOnRoleRecycle="true" sizeInMB="7000" />
      <LocalStorage name="CustomLogging" cleanOnRoleRecycle="true" sizeInMB="1024" />
    </LocalResources>
  </WorkerRole>
</ServiceDefinition> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T00:50:34.170

我通常将我的服务配置为能够在 Azure 或 IIS 中运行。一开始设置它需要一点时间，然后是你选择从 Visual Studio 运行哪个项目的问题，所以当你将 .ccproj 设置为启动项目时，当你按下 F5 时它会在 azure 中运行。否则，当您将 .csproj 设置为启动项目时，您可以根据您配置 Web 应用程序的方式在 cassini、IIS Express 或本地 IIS 中运行它。您需要进行的一次性更改是将连接到 Azure 诊断侦听器的逻辑从 web.config 移动到 Global.asax->Application_Start() 或 WebRole.cs->Onstart() 方法，您可以在其中检查是否服务通过 RoleEnvironment 对象在 Azure 环境内部或外部运行，代码如下

```
if (RoleEnvironment.IsAvailable)
{
      Trace.Listeners.Add(new DiagnosticMonitorTraceListener 
                          {
                             Name = "AzureDiagnostics",
                             Filter = new EventTypeFilter(SourceLevels.All) 
                          });
}
else
{
...hook it to a listener that writes logs to an xml file or something
} 
```

请记住，在 azure 环境之外运行时，您将失去 Azure 特定功能，例如通过 RoleEnvironment 对象读取 .cscfg 值的能力（但仍可从两者访问 web.config）。而且您还必须通过不同类型的配置手动运行辅助角色（不太直接）

# android - Android：带有密码屏幕的 onshake

> ID：13374026
> 
> 赞同：2
> 
> 时间：2012-11-14T06:27:29.723
> 
> 标签：android, android-sensors, layout-inflater

我正在实现一个传感器事件监听器。

每当摇晃设备时，我都想提供一个密码屏幕。

我需要一些关于如何实施它的建议。我正在做的是我在 onShake 方法中膨胀密码布局我可以这样做吗？

**密码布局应该看起来像我们在设备中使用的一般密码锁..（给出 4 位数字）**

任何建议将不胜感激。

下面是我的 ShakeListener 活动

```
public   class ShakeListenerTestActivity extends Activity 
{
  private ShakeListener mShaker;
  private EditText password;

  @Override
  public void onCreate(Bundle savedInstanceState)
  {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);              

    mShaker = new ShakeListener(this);
    mShaker.setOnShakeListener(new ShakeListener.OnShakeListener () {
      public void onShake()
      {

   Toast.makeText(ShakeListenerTestActivity.this, password.getText(),
            Toast.LENGTH_SHORT).show();

      }

    });

  }

  public void onResume()
  {
    mShaker.resume();
    super.onResume();
  }

  @Override
  public void onPause()
  {
    mShaker.pause();
    super.onPause();  
  } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T06:39:05.487

是的，从逻辑上讲，您应该能够在 OnShake 方法中扩展布局，或者您甚至可以启动包含密码视图的活动。在 onShake 方法中，只需启动一个包含密码视图的新活动，然后根据用户的输入，您可以决定下一步该做什么！

编辑：

[如何用android检测抖动事件？](https://stackoverflow.com/questions/5271448/how-to-detect-shake-event-with-android)

看看那个&你会发现如何检测震动所以在检测到震动后你只需要开始一个新的活动:)

如果您需要更多帮助，请告诉我

编辑2：

一些代码片段我认为它会如何工作：

```
public class ShakeActivity extends Activity implements SensorListener

sensorMgr = (SensorManager) getSystemService(SENSOR_SERVICE);

sensorMgr.registerListener(this,
SensorManager.SENSOR_ACCELEROMETER,
SensorManager.SENSOR_DELAY_UI);

public void onSensorChanged(int sensor, float[] values) {
if (sensor == SensorManager.SENSOR_ACCELEROMETER) {
long curTime = System.currentTimeMillis();
// only allow one update every 100ms.
if ((curTime - lastUpdate) > 100) {
long diffTime = (curTime - lastUpdate);
lastUpdate = curTime;

x = values[SensorManager.DATA_X];
y = values[SensorManager.DATA_Y];
z = values[SensorManager.DATA_Z];

float speed = Math.abs(x+y+z – last_x – last_y – last_z) / diffTime * 10000;

if (speed > SHAKE_THRESHOLD) {
Log.d(”sensor”, “shake detected w/ speed: ” + speed);
Toast.makeText(this, “shake detected w/ speed: ” + speed, Toast.LENGTH_SHORT).show();
Intent i = new Intent(this, newActivity.class);
startActivity(i);
}
last_x = x;
last_y = y;
last_z = z;
  }
 }
} 
```

那应该可以解决您的问题！还要在 Manifest 中注册第二个活动。希望这可以帮助！

几乎上面的整个代码都来自[这里](http://web.archive.org/web/20100324212856/http://www.codeshogun.com/blog/2009/04/17/how-to-detect-shake-motion-in-android-part-i/)，所以感谢原始海报！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-06T10:49:07.170

这是在 android 中错误输入的抖动密码视图的完整代码，如在 iOS 中

```
Animation shake = AnimationUtils.loadAnimation(this, R.anim.shake);
 findViewById(R.id.pwd).startAnimation(shake); 
```

这是来自动画文件夹的shake.xml

```
<translate xmlns:android="http://schemas.android.com/apk/res/android"
android:duration="500"
android:fromXDelta="0"
android:interpolator="@anim/cycle_7"
android:toXDelta="10" /> 
```

有关更多信息，请参阅下面的链接 [https://github.com/MShoaibAkram/AnimateViewOnWrongPassword](https://github.com/MShoaibAkram/AnimateViewOnWrongPassword)

# python - 如何在 Django 中执行搜索操作？

> ID：13374028
> 
> 赞同：-1
> 
> 时间：2012-11-14T06:27:40.483
> 
> 标签：python, django, django-views

我发现很难对 Django 中的 html 按钮事件执行搜索操作。我的项目有一个移动数据库，我正在尝试搜索移动设备。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T06:37:16.623

假设您有一个 id="resume" 的按钮，那么您可以使用以下示例代码调用特定的 Django 视图：

```
$("#resume").bind("click",function() {
    $.post("/resume/",
    {
        name: "Resume" //Any example parameter that is to be passed to the view function.
    },
    function(data,textStatus)
    {
    //Callback function on success
    });
}); 
```

以及views.py中的示例视图函数：

```
@csrf_exempt
def resume(request):
    //Do your search operation.
    return HttpResponse(status=200) 
```

上面的代码还需要在您的 HTML 代码中使用 jQuery 库。

# ruby-on-rails - Rails：在哪里放置自定义类注入？

> ID：13374030
> 
> 赞同：0
> 
> 时间：2012-11-14T06:27:51.077
> 
> 标签：ruby-on-rails, ruby-on-rails-3, project-organization

我像这样为我的应用程序编写了一些辅助方法

```
module Magick
  class Draw
    def qrcode(qrcode, left_corner, top_corner, right_corner, bottom_corner)
      size = qrcode.modules.length
      width = right_corner - left_corner
      height = bottom_corner - top_corner
      wset = width.to_f / size
      hset = height.to_f / size
............... 
```

在哪里放置这样的代码在 rails ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T06:53:26.937

加载这些补丁的一种常见且简单的方法是在您的 ./config/initializers 目录中创建一个文件（即：rmagick.rb）并将您的代码放入该文件中。

此目录中的所有文件都在环境启动时加载并执行。

您还可以在 lib/ 目录中使用您的代码创建一个新文件（即：rmagick_draw.rb）并在 ./config/application.rb 中添加这一行：

```
config.autoload_paths += %W(#{config.root}/lib) 
```

然后在需要的任何地方都需要该文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T08:51:13.040

您可以将此类文件放入***app\classes***目录中。默认情况下，此目录中的所有类在 Rails3 中都可用。

# apache-flex - flex 4.6中折线图x轴上不同范围的不同颜色

> ID：13374031
> 
> 赞同：0
> 
> 时间：2012-11-14T06:28:02.987
> 
> 标签：apache-flex, flex4.5

对于不同的班级，我有 NSCC 计数，现在我必须制作折线图，显示这个 NSCC 计数在 1-10 是低风险范围内，10-20 是中等风险，20-50 是高风险，50 以上是可怕的。如何在 x 轴上绘制具有此范围的数据？以及如何为不同的范围宽度着色。请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T07:20:38.517

一种可能的解决方案是使用具有不同颜色的多线系列

我想你有这样的数据

```
|NSCC| |count|
  A      10
  B      12
  C      54
  D      25 
```

你可以转换成矩阵

```
 |NSCC| |count| |LOW| |MODERATE| |HIGH|
   A      10     10      null     null 
   B      12     12      null     null 
   C      54    null     null      54    
   D      25    null     25       null 
```

并在图表上[创建多线系列，您可能会发现系列之间存在拆分，为了克服这个问题，您可以添加虚拟边界点](http://blog.flexexamples.com/2007/11/13/changing-default-line-colors-in-a-flex-linechart-control/)

还有其他选择，例如

*   使用不同颜色的自定义背景
*   使用自定义 itemrenderr

希望有帮助

# php - 将 MYSQL 结果拆分为每个切片包含 n 个大小

> ID：13374032
> 
> 赞同：1
> 
> 时间：2012-11-14T06:28:15.463
> 
> 标签：php, mysql, arrays

这个问题与 SoulieBaby 的问题基本类似：[Split MYSQL results into 4 arrays](https://stackoverflow.com/questions/1237011/split-mysql-results-into-4-arrays)，只是我想将结果拆分为包含特定长度。

说，我想要一个长度为 9 的数组的结果被拆分，并且拆分后的数组包含 5 个长度。所以第一个数组有 5 个，第二个数组有 4 个。

这可能吗？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T06:56:43.183

引用的问题希望始终有 4 个块，因此解决方案是创建 size 块`ceil(count($array) / 5)`。

这种情况更容易，（最大）大小是恒定的，但块的数量会有所不同。

因此答案很简单：

```
array_chunk($array, 5); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T18:25:55.100

尝试：

```
DELIMITER $$
CREATE PROCEDURE split (in data varchar(500),in cad char(1))
BEGIN
    declare pos int default 0;
    declare numero int default 0;
    declare van int default 0;
    declare a varchar(500) default '';
    drop TEMPORARY table IF EXISTS tmp_split;
    create TEMPORARY table tmp_split(dato varchar(500)) ENGINE=MEMORY; 

    set pos=LOCATE(cad,data);
    while pos<>0 do
        set numero=numero+1;
        set pos=LOCATE(cad,data,pos+1);
    end while;
    set a=SUBSTRING_INDEX(data,cad,1);
    while numero>van do        
        set data=SUBSTRING(data,LENGTH(a)+2);
        insert into tmp_split values (a);
        set a=SUBSTRING_INDEX(data,cad,1);
        set van=van+1;
    end while;
    insert into tmp_split values (a);
    select * from tmp_split;
END 
```

* * *

`call split('1,2,5,52,64,365,9714,253,6697,8,9,2,62',',');`

# asp.net - 动态网格视图不可见/不显示

> ID：13374034
> 
> 赞同：0
> 
> 时间：2012-11-14T06:28:36.050
> 
> 标签：asp.net, gridview

我设置了一个动态网格视图，我想以另一种形式使用它，所以我将它创建为

```
 public GridView gv = new GridView() 
```

我已将`Page_Load`gv 的属性设置为

```
 gv.AutoGenerateColumns = true;
 gv.Visible = true; 
```

然后我有另一个网格 MyGridView，它是静态的，里面有数据。因此，当我尝试将所有静态 gridview 数据复制到动态 gridview 数据时

```
gv.DataSource = MyGridView.DataSource;
gv.DataBind(); 
```

我无法查看 Grid gv，为什么会这样？有人告诉我添加

```
 'Controls.Add(gv) in Page_Load 
```

当我添加其显示的编译时错误时，该 gv 应采用`runat=server`. 如何将动态网格视图放入表单中`runat=server`？

所以我的要求是 gv 应该是可见的，我该如何实现呢？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T06:35:17.840

您需要为此试用面板使用某种支架

在 aspx 页面上创建

```
<asp:Panel id="panel1" runat="server"></asp:Panel> 
```

在你的后台

做

```
panel1.Controls.Add(gv) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T06:33:40.060

然后将带有 runat="server" 的 div 放入您的页面：

```
YourDivID.Controls.Add(gv) 
```

# razor - MVC 4 (razor) - 控制器返回部分视图但整个页面正在更新

> ID：13374035
> 
> 赞同：0
> 
> 时间：2012-11-14T06:28:43.937
> 
> 标签：razor, asp.net-mvc-4

我是 MVC 4 和 Razor 引擎的新手——所以这可能是一个愚蠢的问题。

我想要实现的是我有一个带有下拉列表和按钮的页面。单击按钮调用控制器传递选定的值。控制器应该返回一个局部视图，并且应该只更新页面的底部。

但是，我发现整个页面仅被部分视图 html 替换。IE。我得到了我的结果列表显示，但我失去了我的项目下拉列表和提交按钮。我尝试包含对 jquery 和不显眼的脚本的引用（我认为在 MVC 4 中不需要），但这根本不会改变页面（即下拉列表和按钮留在那里并且没有结果显示）。

我的部分观点：

```
@using (Ajax.BeginForm("GetProjectStories", "MyController", new AjaxOptions{ UpdateTargetId = "projectUserStories"}))
{

    <fieldset>
        <legend>Select Project</legend>
        <div>
            @Html.DropDownList("ProjectReference", (IEnumerable<SelectListItem>)Model.ProjectList)
        </div>
        <p>
        <input name="GetStoriesButton" type="submit" value="Get Stories" />
        </p>
    </fieldset>
}

@if (Model != null && Model.UserStories != null)
{
    <div id="projectUserStories">
        @{Html.RenderPartial("_UserStoryList", Model);}
    </div>

} 
```

我的控制器：

```
public ActionResult GetProjectStories(ProjectViewModel model)
        {

           var stories =  MyService.GetProjectUserStories(model.ProjectReference).Results;   
           model.UserStories = stories;
            return PartialView("_UserStoryList", model);
        } 
```

我的部分视图内容只包含一个 html 表和对模型的引用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T05:46:33.497

因此，我尝试包含该不显眼的脚本，并解决了如果该对象为空但它仍然无法正常工作时我没有渲染该 div 的事实。

所以我改用jquery。

```
 <script src="@Url.Content("~/Scripts/jquery-1.7.1.min.js")" type="text/javascript"></script>

    <script type="text/javascript">
            $(function () {
                $('form').submit(function () {
                    var url = "@Url.Action("GetProjectStories", "MyController")";
                    var data = { selectedProject: $('#ProjectReference').val() };

                    $("#projectUserStories").load(url, data, function() {
                    });
                    return false;
                });
            });

     </script>

        @using (Html.BeginForm())
        {
            <fieldset>
                <legend>Select Project</legend>
                <div>
                    @Html.DropDownList("ProjectReference", (IEnumerable<SelectListItem>) Model.ProjectList)
                </div>
                <p>
                    <input name="GetStoriesButton" type="submit" value="Get Stories" />
                </p>
            </fieldset>

            <div id="projectUserStories">
                @{ Html.RenderPartial("_UserStoryList", Model); }
            </div>
         } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T06:42:33.343

您打算如何更新`projectUserStories`，如果无法呈现代码块，请尝试以下操作：

```
<div id="projectUserStories">
@if (Model != null && Model.UserStories != null)
{
   Html.RenderPartial("_UserStoryList", Model);
}
</div> 
```

还要检查 Microsoft Ajax 帮助程序所需的所有 js 文件，例如：

```
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script> 
```

还请看：

1.  [将 Ajax.BeginForm 与 A​​SP.NET MVC 3 Razor 一起使用](https://stackoverflow.com/questions/5410055/using-ajax-beginform-with-asp-net-mvc-3-razor)
2.  [MVC 3 - Ajax.BeginForm 做一个完整的回帖](https://stackoverflow.com/questions/5061063/mvc-3-ajax-beginform-does-a-full-post-back)

# google-chrome - 在 chrome 中处理单个内 容脚本

> ID：13374038
> 
> 赞同：0
> 
> 时间：2012-11-14T06:28:49.780
> 
> 标签：google-chrome, google-chrome-extension, google-chrome-app

如果您有一个将多个内容脚本注入单个页面的扩展程序，是否可以解决页面上的特定内容脚本而不是广播到所有内容脚本？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T07:59:54.103

如果我理解正确，您可以在您的中执行您的内容脚本，`background.js`而不是在您的中定义它`manifest.json`：

```
if (condition) {
  chrome.tabs.executeScript(null, { file: 'contentscript1.js' });
} else {
  chrome.tabs.executeScript(null, { file: 'contentscript2.js' });
} 
```

# jsf - 为构面指定父组件以在对话框组件中呈现标题

> ID：13374040
> 
> 赞同：0
> 
> 时间：2012-11-14T06:29:03.023
> 
> 标签：jsf, primefaces

如何指定父组件`f:facet`以将其分配为组件的子`p:dialog`组件？我一直在尝试这个，但没有呈现标题。

```
<p:dialog id="pageDialog">
    <p:outputPanel>
        <p:outputPanel>
            <f:facet name="header" parent="pageDialog" >
                Followed Topics
            </f:facet>
        </p:outputPanel>
    </p:outputPanel>
</p:dialog> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T11:38:38.943

这是不可能的。这`<f:facet>`是[特定](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/f/facet.html)于最近父组件的规范。

您可能希望扩展`<p:outputPanel>`到可以完成这项工作的自定义组件。您可以通过 from`UIComponent`继承的[`getFacets()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html#getFacets%28%29)方法获取、添加和删除构面。在活动期间做以下工作`preRenderView`：

```
UIComponent headerFacet = getFacets().remove("header");

if (headerFacet != null) {
    UIComponent dialog = getItSomehowPerhapsBasedOnAnAttribute();
    dialog.getFacets().put("header", headerFacet);
} 
```

# highcharts - 反转图表的下半部分 HighCharts

> ID：13374043
> 
> 赞同：0
> 
> 时间：2012-11-14T06:29:10.833
> 
> 标签：highcharts

我为 yAxis 写了“反转”：`reversed: true`

y轴[倒置](http://regexinfo.ru/charts/chart_good_scale1.php)

但图表的下部没有反转：[ScreenShot](http://regexinfo.ru/charts/not_reversed.JPG)

请告诉我如何反转图表的下部？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T06:58:46.180

您可以明确指定设置**[`navigator.yAxis`](http://api.highcharts.com/highstock#navigator.yAxis)**，

```
navigator: {
    yAxis: {
        reversed: true
    }
} 
```

**[反向导航器y轴太| Highchart & Highstock @ jsFiddle](http://jsfiddle.net/jugal/sUDFE/)**

我强烈建议您[阅读 highstock 的 api 参考](http://api.highcharts.com/highstock)及其[演示站点](http://www.highcharts.com/stock/demo/)，它们有一些很棒的文档和实时运行的示例代码，您应该能够从这些解决大多数简单的用例

# javascript - JQuery Ajax 仅适用于同步 Ajax 调用，对异步 Ajax 调用无响应

> ID：13374047
> 
> 赞同：0
> 
> 时间：2012-11-14T06:29:41.897
> 
> 标签：javascript, jquery, cordova

我将应用程序的 phonegap 从 0.9.3 更新到 2.2.0，并将 jQuery 从 1.4.4 更新到 1.6.4。我在一些设备上测试了这些应用程序。

*   对于 Android 2.3 - 应用程序运行良好（能够使用用户名和密码进行 ajax 调用）。
*   对于 Android 3.2 - Ajax 调用保持加载并等待来自服务器的响应。
*   对于 Android 4.0 - Ajax 调用保持加载并等待来自服务器的响应。
*   对于 Android 4.1.2 - Ajax 调用保持加载并等待来自服务器的响应。

该应用程序当前正在使用异步调用，并且无法接收来自服务器的响应。我使用同步调用测试了应用程序，一切正常（能够发送和接收响应表单服务器）。我想使用异步调用的原因是我不想锁定屏幕。

有人对这个问题有任何想法吗？

下面是我的代码。

```
$.ajax({
                type: "GET",
                username: uname,
                password: pword,
                cache: false,
                data: null,
                url: baseURL+'weeks',
                dataType: "xml",
                contentType: "application/xml;charset=utf-8",
                crossDomain: false,
                error: loginErrorHandler,
                success: weeksParse,

            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T06:34:40.840

尝试从成功函数中删除“，”：

```
 $.ajax({
            type: "GET",
            username: uname,
            password: pword,
            cache: false,
            data: null,
            url: baseURL+'weeks',
            dataType: "xml",
            contentType: "application/xml;charset=utf-8",
            crossDomain: false,
            error: loginErrorHandler,
            success: weeksParse  // <----------- remove the last comma ','

        }); 
```

看看这是否适合你。

# android - Android - 几秒钟后在运行时更改图像视图源

> ID：13374053
> 
> 赞同：7
> 
> 时间：2012-11-14T06:30:30.540
> 
> 标签：android

以下代码用于我的应用程序中的启动画面。我需要做的是，当活动加载时，图像应显示为默认值，然后几秒钟后，图像应在同一活动中更改为另一个。我有另一个图像，如第一个不同颜色的图像。我想在几秒钟后更改该图像的屏幕。

我在我的代码中这样做了。

```
package com.ruchira.busguru;

import android.media.MediaPlayer;
import android.os.AsyncTask;
import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.graphics.Color;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ImageView;
import android.widget.RelativeLayout;

public class SplashScreen extends Activity {

    ImageView imgBus;
    MediaPlayer introSound, bellSound;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.splash_screen);
        imgBus = (ImageView) findViewById(R.id.imgBus);
        imgBus.setImageResource(R.drawable.blackbus);
        introSound = MediaPlayer.create(SplashScreen.this, R.raw.enginestart);
        introSound.start();

                Thread timer = new Thread(){
            public void run(){
                try{
                    sleep(3000);
                } catch (InterruptedException e) {              
                    e.printStackTrace();
                }finally{
                   imgBus.setImageResource(R.drawable.bluekbus);    
                }
            }
        };
        timer.start();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.splash_screen, menu);
        return true;
    }

    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();
        introSound.stop();
        finish();
    }

    @Override
    protected void onStop() {
        // TODO Auto-generated method stub
        super.onStop();
        introSound.stop();
        finish();
    }
} 
```

但问题是程序通过在线程中执行而停止说......

“android.view.ViewRoot$CalledFromWrongThreadException：只有创建视图层次结构的原始线程才能触摸它的视图。”

我怎样才能实现这个目标？有人请帮我解决这个问题。我是android开发的新手..

谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-14T06:45:44.123

您应该使用 ImageView 的 Handler 和 Runnable。处理程序是特定于 Android 的调度程序，它们可以在 UI 线程上运行。尝试这个：

```
ImageView imgBus;
MediaPlayer introSound, bellSound;
Runnable swapImage = new Runnable() {
    @Override
    public void run() {
        imgBus.setImageResource(R.drawable.bluekbus);
    }
}; 
```

内部`onCreate()`调用：

```
imgBus = (ImageView) findViewById(R.id.imgBus);
imgBus.setImageResource(R.drawable.blackbus);
imgBus.postDelayed(swapImage, 3000);  // Add me! 
```

了解启动画面是不受欢迎的，因为您应该专注于尽快启动应用程序（同时在后台加载较慢的元素）。然而，有时不可避免地会有轻微的延迟。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T07:34:25.347

最后把这个写在里面

```
runOnUiThread(new Runnable() {
        public void run() {
                     SplashScreen.class.img.setImageResource(R.drawable.bluekbus);

                }
            }); 
```

您应该始终从 UI 线程本身更新您的 UI...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T07:34:55.643

试试下面的，

我们不能从工作线程访问和更新 UI，只能从 UIThread 访问 UI。如果我们需要它使用后台线程进行更新，那么我们可以使用 Handler 来执行此操作，如下面的代码所示。

```
 this.imgBus = (ImageView) findViewById(R.id.splashImageView);
    imgBus.setImageResource(R.drawable.your_first_image);
    this.handler = new Handler();
    introSound = MediaPlayer.create(SplashTestForSO.this, R.raw.enginestart);
    introSound.start();

            Thread timer = new Thread(){
        public void run(){
            try{

               sleep(2000);
                YourActivity.this.handler.post(runnable);  
              sleep(1000);
            } catch (InterruptedException e) {              
                e.printStackTrace();
            }finally{

            }
        }
    };

    timer.start();

    this.runnable = new Runnable() {
        public void run() {
            //call the activity method that updates the UI
            YourActivity.this.imgBus.setImageResource(R.drawable.your_scond_image_view);

        }
    }; 
```

# java - 如何用mybatis运行任意sql？

> ID：13374054
> 
> 赞同：13
> 
> 时间：2012-11-14T06:30:33.323
> 
> 标签：java, database, mybatis

我有一个使用 mybatis 进行对象持久化的应用程序。但是我有可能需要运行任意 sql（来自用户）。我可以用mybatis做吗？

**更新：**

我选择使用 dbutils (JDBC) 来运行用户定义的 sql，但是我需要一个 DataSource 的实例来创建 QueryRunner。有什么办法可以从 mybatis 获取数据源？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-16T18:28:42.303

我使用这个实用类：

```
import java.util.List;
import org.apache.ibatis.annotations.SelectProvider;

public interface SqlMapper {
    static class PureSqlProvider {
        public String sql(String sql) {
            return sql;
        }

        public String count(String from) {
            return "SELECT count(*) FROM " + from;
        }
    }

    @SelectProvider(type = PureSqlProvider.class, method = "sql")
    public List<?> select(String sql);

    @SelectProvider(type = PureSqlProvider.class, method = "count")
    public Integer count(String from);

    @SelectProvider(type = PureSqlProvider.class, method = "sql")
    public Integer execute(String query);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-10-11T02:30:33.430

您的问题类似于[How to exequte query directly from java code using mybatis?](https://stackoverflow.com/questions/16152485/how-to-exequte-query-directly-from-java-code-using-mybatis)

我已经给出了这个问题的答案。但我希望这个解决方案能帮助你。

Mybatis 已经有这个功能了，但是你必须使用适配器，如下所示。

1.  创建一个适配器类；

    ```
     public class SQLAdapter {  
     String sql;  

     public SQLAdapter(String sql) {  
         this.sql = sql;  
     }  

     public String getSql() {  
         return sql;  
     }  

     public void setSql(String sql) {  
         this.sql = sql;  
     }   } 
    ```

2.  创建类 SQLAdapter 的 typeAlias

> `<typeAlias alias="sqladapter" type="com.zj.xxx.xxx.SQLAdapter" />`

3.  在需要直接执行 sql 的每个对象 xml 中放置选择标记。

    ```
     <select id="findRecords" parameterType="SQLAdapter" resultMap="xxxxxResultMap">  
         ${sql}  
     </select> 
    ```

4.  像这样调用这个选择方法

> ```
> String _sql = "select * from table where... order by... limit...";
> xxxxx.findRecords(new SQLAdapter(_sql)); 
> ```

5.  事情都已经做好了。你不能再在 xml 文件中编写复杂的 sql 语言。祝你好运。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-04-19T09:43:26.073

根据提供的答案，它们都很好。但是它们都需要使用一个`Adapter`类。

使用*Mybatis 版本 3*，我成功地使用了 a`HashMap<String, String>`来保存和传递*SQL*。

请参阅下面的代码。

在`Mapper`课堂上

```
final String sql = "${sql}";

@Select(sql)
void execute(HashMap<String, String> m); 
```

调用方法时：

```
String sql = "SELECT * FROM record limit 1";
HashMap<String, String> map = new HashMap<String, String>();
map.put("sql", sql);
mapper.execute(map); 
```

`HashMap`提供了一种无需在代码中定义 Class 属性或字段的方法，您可以使用 Map 重新定义它。

谢谢。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-12-18T10:24:00.853

可重用的 SQL 片段可用于动态创建查询的选择部分。在您的映射器中，将查询作为普通参数传递：

`@Param("sql")String sql`

在您的查询中，只需使用***${sql}***而不是***#{sql}***访问参数。参数 sql 中的值可以是完全有效的 sql 查询或 sql 查询的片段。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-06-23T18:23:26.143

为了测试我使用

```
import org.apache.ibatis.jdbc.ScriptRunner;
import java.io.Reader;
import java.io.StringReader;

public class test {
        private static final String conf = "mybatis.conf.xml";

        private SqlSessionFactoryBuilder builder;
        private SqlSessionFactory sessionFactory;
        Reader reader;
        private SqlSession session;
        private ScriptRunner runner;

    @Before
    public void before() {
        builder = new SqlSessionFactoryBuilder();

        try {
            reader = Resources.getResourceAsReader(conf);
        } catch (IOException e) {
            e.printStackTrace();
        }

        sessionFactory = builder.build(reader);

        session = sessionFactory.openSession();
        runner = new ScriptRunner(session.getConnection());
        runner.setAutoCommit(true);
        runner.setStopOnError(true);
    }

    @Test   
    public void testSelectChapelStatus() {  
        Reader populate = new StringReader("insert into person values (7553,0,'201002496','Wish','Jill','Rain',1,0,NULL,'xxx@LCU.EDU');\r\n"
                + "");
         runner.runScript(populate);
    } 
```

# .net - FindWindowEx 没有 windowTitle

> ID：13374055
> 
> 赞同：1
> 
> 时间：2012-11-14T06:30:54.957
> 
> 标签：.net, vb.net, winforms, pinvoke

如何在没有 windowTitle 的情况下 FindWindowEx？

我的代码：

```
H = FindWindowEx(Hwnd, 0, "TextB", "windowTitle") 
```

windowTitle 每秒钟都会更改一次，我如何在没有 windowTitle 的情况下获得句柄？

其他选项：

通过类名获取标题

```
H = FindWindowEx(Hwnd, 0, "TextB", GetTitleByClassname(Hwnd,"TextB")) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T07:04:34.317

*   用于`EnumWindows`枚举所有顶级窗口。
*   调用`GetWindowThreadProcessId`每个顶级窗口以检查该窗口是否属于目标进程。
*   当您找到所需的顶级窗口时，调用`EnumChildWindows`枚举其所有子窗口。

如果您知道层次结构或窗口类名称，那么您应该能够识别哪个子窗口是您的目标窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T06:52:38.600

如果您只有一个“TextB”类的子窗口，则将 NULL 传递给最后一个参数。

```
H = FindWindowEx(Hwnd, NULL, "TextB", NULL); 
```

# java - 匹配网络扩展的正则表达式

> ID：13374056
> 
> 赞同：0
> 
> 时间：2012-11-14T06:30:59.693
> 
> 标签：java, regex

我想检查一个 url 是否是图像、java 脚本、pdf 等

字符串 url = "www.something.com/script/sample.js?xyz=xyz;

下面的正则表达式工作正常，但只有 xyz=zyz

> ".*(mov|jpg|gif|pdf|js)$"

当我在最后删除 $ 以消除 .js 的正则表达式要求时，它会给出错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T06:35:38.653

使用正则表达式如下：

```
 .*\\.(mov|jpg|gif|pdf|js)\\? 
```

这与`dot(.)`您的扩展名匹配，并由`?`

第一个`dot(.)`匹配任何字符，而第二个则在扩展列表之前以match for为`dot(.)`前缀。`\\``dot(.)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T06:34:44.580

`.*(mov|jpg|gif|pdf|js).*$`允许您在文件扩展名之后有任何可选文本。捕获组捕获文件扩展名。[你可以在这里](http://rubular.com/r/hLAs0Vazyo)看到这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T06:41:28.927

为什么不使用 java.net.URL 来解析 url 字符串，它可以避免很多不匹配的问题：

```
try {
  URL url = new URL(urlString);
  String filename = url.getFile();
  // now test if the filename ends with your desired extensions.
} catch (Exception e) {
  // This case the url cannot be parsed.
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T06:55:06.987

我不是这个的忠实粉丝，但请尝试：

```
.*\\.(mov|jpg|gif|pdf|js).*$ 
```

问题是它会接受像“our.movi​​ng.day”这样的东西

并发布您的代码。给猫剥皮的方法总是不止一种，也许你的代码有问题，而不是正则表达式。

另外，尝试正则表达式测试器......那里有很多。我非常喜欢：

[http://rubular.com/](http://rubular.com/)和[http://gskinner.com/RegExr/](http://gskinner.com/RegExr/)（但它们主要用于 php/ruby）

# codeigniter - 我如何在 codeigniter 中制作自己的 $this->load->view

> ID：13374068
> 
> 赞同：-1
> 
> 时间：2012-11-14T06:31:52.707
> 
> 标签：codeigniter, view

加载视图的 CI 的默认值是：

```
$this->load->view('path'); 
```

但是如果我想做类似的事情怎么办

```
$this->load->adminView('path') 
```

然后我可以在 adminView 中为路径添加前缀，然后是路径

我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T08:22:25.490

在`application/core/`制作一个新的控制器：

```
<?php

if(!defined('BASEPATH'))
    exit('No direct script access allowed');

class Admin_Controller extends CI_Controller
{

    function __construct()
    {
        parent::__construct();
    }

    function load_admin_view($path, $data = '', $return = false)
    {
        return $this->load->view("admin_dir/" . $path, $data, $return);
    }

}

?> 
```

然后让你当前的控制器扩展这个控制器：

```
class Page extends Admin_Controller 
```

代替

```
class Page extends CI_Controller 
```

然后你可以使用：

```
$this->load_admin_view("path"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T07:41:52.927

转到 ../System/Core/Loader.php，第 417 行 -> 210 (CI 2.10)

```
public function view($view, $vars = array(), $return = FALSE)
{
    return $this->_ci_load(array('_ci_view' => $view, '_ci_vars' => $this->_ci_object_to_array($vars), '_ci_return' => $return));
} 
```

根据需要更改函数名称（可能还有其他代码），小心！

# c# - 有条件地启用/禁用儿童的自动格式化

> ID：13374076
> 
> 赞同：2
> 
> 时间：2012-11-14T06:32:37.540
> 
> 标签：c#, xml, linq, linq-to-xml, xelement

我正在编写一个接受 XML 文件的工具，通过添加元素对其进行编辑，然后保存它。棘手的一点是 XML 文件需要保持人类可读，在这种情况下，这并不意味着完美的格式。

输入 XElement 包含许多参数，例如：

```
<Parameter key="lorem"> <Vector> <Value>2</Value><Value>3</Value> </Vector>     </Parameter>
<Parameter key="lorem"> <Vector> <Value>2</Value><Value>3</Value> </Vector> </Parameter>
<Parameter key="lorem"> <Vector> <Value>2</Value><Value>3</Value> </Vector> </Parameter>
<Parameter key="lorem"> <Vector> <Value>2</Value><Value>3</Value> </Vector>    </Parameter>
<Parameter key="lorem">
    <Parameter key="ipsum">
        <Parameter key="dolor">
            <Vector> <Value>3</Value> <Value>4</Value> </Vector>
        </Parameter>
    </Parameter>
</Parameter 
```

我希望所有名称为“Vector”和“Value”的 XElement 都禁用缩进，但所有名称为“Parameter”的 XElement 都保持缩进。

由于不允许我的代码弄乱任何现有格式，我不得不在源文档上使用 LoadOptions.PreserveWhitespace。但是，这会强制我添加到文档中的所有 XElement 取消任何格式。有没有一种方法可以强制特定的 XElement 应用格式，即使整个文档都没有这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T07:21:30.137

[这](https://stackoverflow.com/a/5940637/4227)看起来像是您想要的答案。

> 解决这个问题的关键是编写一个遍历 XML 树的递归函数，将各种元素和属性写入专门创建的 XmlWriter 对象。有一个写入缩进 XML 的“外部”XmlWriter 对象，以及一个写入非缩进 XML 的“内部”XmlWriter 对象。
> 
> 递归函数最初使用“外部”XmlWriter，编写缩进的 XML，直到它看到 TextBlock 元素。当它遇到 TextBlock 元素时，它会创建“内部”XmlWriter 对象，并将 TextBlock 元素的子元素写入它。它还将空白写入“内部”XmlWriter。
> 
> 当“内部”XmlWriter 对象完成对 TextBlock 元素的写入时，写入器写入的文本将使用 WriteRaw 方法写入“外部”XmlWriter。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T06:59:05.457

您可能必须从 XmlWriter 继承来对序列化规则进行编码，然后使用此自定义 XmlWriter 保存 XDocument。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T07:13:14.157

一个令人不快但可能是“替代方案中最不邪恶的”是在创建元素时自己添加所需的空白。这样，当您保存时，您只需保留*所有*空格，就可以了。这确实意味着要自己弄清楚如何进行缩进（计算出你在树下有多远并添加正确的数字空格），但这不应该*太*痛苦。

# css - 在屏幕中心居中弹出 div

> ID：13374077
> 
> 赞同：2
> 
> 时间：2012-11-14T06:32:39.427
> 
> 标签：css, html, popup

所以我有这个：

```
<div class="addedcartbg"><div class="addedcart"> Successfully added to cart. </div></div> 
```

我希望它在单击图像时弹出在屏幕中间。该图像当前正在打开“#”，因此它只是转到页面顶部。

我的问题是，当我将 addedcartbg 设置为 position:fixed 时，它会完全从页面中消失。我还需要知道如何在屏幕中间垂直居中，我知道我可以将左右边距设置为 auto 以使其水平居中，但这不适用于顶部和底部。

这是我当前的 div 的 CSS 代码：

```
.addedcartbg .addedcart {
background-color: #999;
height: 40px;
width: 300px;
margin-right: auto;
margin-left: auto;
padding-top: 15px;

}
.addedcartbg {
background-color: rgba(153,153,153,0.3);
height: 80px;
width: 320px;
padding-top: 40px;
padding-right: 30px;
padding-left: 30px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T06:36:05.737

我假设这是你的灯箱类而不是像这样修改它，这应该为你工作

[**演示**](http://jsfiddle.net/MPReu/)

```
.addedcartbg {
   background-color: rgba(153,153,153,0.3);
   height: 80px;
   width: 320px;
   padding-top: 40px;
   padding-right: 30px;
   padding-left: 30px;
   position: absolute;
   top: 50%;
   left: 50%;
   margin-top: -50px; /*half of total height + half of top padding*/
   margin-left: -175px; /*half of total width + half of left padding*/
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T06:47:21.000

有顶部和底部以及位置。您可能还想为 body 添加样式。

```
body {
    text-align:center;
/*the rest of your style*/
}

.addedcartbg {
    position: relative;
    top:200;
    margin-right: auto;
    margin-left: auto;
/*the rest of your style*/
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T07:20:02.347

您还应该添加一个 z-index

```
.addedcartbg {
  z-index:9999; // include this to avoid overlay of other divs.
} 
```

# jquery - 使用 Jquery 在两个不同页面之间传递值

> ID：13374079
> 
> 赞同：0
> 
> 时间：2012-11-14T06:32:52.670
> 
> 标签：jquery

谁能告诉我如何在 JQuery 中做到这一点？

我有两个名为 default1.aspx 和 default2.aspx 的 .aspx 页面。default1.aspx 有一个名为 textbox1 的文本框，而 default2.aspx 有一个名为 textbox2 的文本框。default1.aspx 使用 window.showmodaldialog() 打开 default2.aspx。问题是当我更改 textbox2 的文本时，textbox1 的文本也被更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T06:36:04.543

使用 cookie 的一种可能方法

在这里检查

[使用 jQuery 创建、读取和擦除 cookie](https://stackoverflow.com/questions/1599287/create-read-and-erase-cookies-with-jquery)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T06:42:12.903

如果您要使用 html5 webstorage，另一种方法是这样做

第一页

```
localStorage.value="value"; 
```

第二页

```
var value=localStorage.value; 
```

[http://www.w3schools.com/html/html5_webstorage.asp](http://www.w3schools.com/html/html5_webstorage.asp)

# jsp - jsp上传文件时如何获取文件路径？

> ID：13374082
> 
> 赞同：0
> 
> 时间：2012-11-14T06:33:25.910
> 
> 标签：jsp

在这里，我面临一个问题，例如当我在我的 jsp 中上传文件时，我无法读取完整的文件路径。我只得到文件名。下面是我的代码

```
 <td align="left">File Path  :
  <input type="file" id="biometricFile_Path" name="biometricFile_Path" /> 
  <span id="uploadsId" class="errorText" >&nbsp; 
```

像这样读取文件路径..

```
String fileName=request.getParameter("biometricFile_Path"); 
```

假设我正在上传路径为“C:\Users\apanigrahi\Desktop\test.xls”的文件，但在通过请求对象获取值时我只得到了 test.xls。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T07:15:34.080

据我所知，基于安全限制，您无法在服务器端获取完整路径名。但是某些版本的 IE 提供了完整的路径。

# c# - 我可以使用 c# Web 服务在 Visual Studio 2005 中上传超过 4GB 的视频文件吗

> ID：13374084
> 
> 赞同：0
> 
> 时间：2012-11-14T06:33:38.280
> 
> 标签：c#, asp.net, .net, web-services, video

我如何在 Visual Studio 2005 下使用 C# 编写的 Web 服务在 Web 服务器中上传超过 4GB 的大尺寸视频文件，而无需使用 silverlight 概念和框架 4.0。我需要在 2008 年内提供此服务，因为我的服务器配置为 2008。我无法使用 Visual Studio 2012 中的 Silverlight。

欢迎任何有关实施此概念的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T07:12:11.307

查看[这篇文章](https://stackoverflow.com/questions/4022434/how-to-set-the-maxallowedcontentlength-to-500mb-while-running-on-iis7)了解当前的 IIS 大小限制，查看[这篇文章](http://forums.asp.net/t/1766127.aspx/1)了解额外的超时设置，[这篇文章](http://www.webdavsystem.com/server/documentation/large_files_iis_asp_net)了解如何使用自定义客户端应用程序执行您想要的操作，我认为它不能直接在浏览器中工作。以下是IIS 限制和最流行的浏览器的[摘要。](http://www.motobit.com/help/ScptUtl/pa33.htm)

* * *

基于上述情况，我认为您可以做的最安全的事情是对最终用户施加限制；每个文件 500 兆听起来是合理的。

* * *

在类似的说明中，显然 Apache 在 2005 年已经消除了这种限制......

# java - 模拟父类以测试包装类

> ID：13374087
> 
> 赞同：2
> 
> 时间：2012-11-14T06:33:44.870
> 
> 标签：java, unit-testing, mocking

我有一个类扩展了我不拥有的另一个类。我的类用于计算对父类的许多调用中的一些度量。有没有一种方法可以在单元测试中模拟父类（同时保留我孩子的逻辑），以确保对我孩子的调用总是“通过”到被包装的父类？

在代码中

```
Class SlowClass {
    public Object doFoo(Object obj) {
        //...
    }
    public Object doBar(Object obj) {
        //...
    }

    // Many more methods I don't care about.

}

Class SlowClassWrapper extends SlowClass {
    public Object doFoo(Object obj) {
        //...
        Object toReturn = super.doFoo(obj)
        //...
        return toReturn;
    }
    public Object doBar(Object obj) {
        //...
        Object toReturn = super.doFoo(obj)
        //...
        return toReturn;
    }
} 
```

我想以某种方式模拟出来，`SlowClass.doFoo`以便在`SlowClassWrapper.doFoo`不实际拨打电话的情况下拨打其父母电话。然后我想确认它`obj`通过了原样，并且`SlowClass.doFoo`回复原样返回。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T06:47:44.367

一般来说，这不是模拟框架在 Java 中可以愉快地做的事情。您可能需要考虑重组代码以使用组合而不是继承。然后，您可以将 SlowClass 实例注入到包装器的构造函数中，从而通过常规模拟实现轻松的可测试性。

对于它的价值，Mockito 和 PowerMock 都不能模拟超级方法：请参阅[这个答案](https://stackoverflow.com/questions/3467801/mockito-how-to-mock-only-the-call-of-a-method-of-the-superclass)和[这个讨论](https://groups.google.com/forum/?fromgroups=#!topic/powermock/ZgiR8y_P9R4)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T06:54:37.183

我会做这样的事情：

```
public class SlowClassWrapper {
    /** wrapped parent */
    public final SlowClass parent;

    public SlowClassWrapper() {
        this(new SlowClass());

    @VisibleForTesting
    protected SlowClassWrapper(SlowClass parent) {
        this.parent = parent;
    }

    public Object doFoo(Object obj) {
        //...
        Object toReturn = parent.doFoo(obj)
        //...
        return toReturn;
    }

    public Object doBar(Object obj) {
        //...
        Object toReturn = parent.doFoo(obj)
        //...
        return toReturn;
    }
} 
```

使用[Mockito](https://code.google.com/p/mockito/)和 JUnit

```
@RunWith(MockitoJUnitRunner.class)
public class SlowClassWrapperTest {
     /** parent mock */
     @Mock
     private SlowClass parentMock;

     /** instance under tests */
     private SlowClassWrapper instance;

     @Before
     public void setUp() {
         this.instance = new SlowClassWrapper(this.parentMock);
     }

     @Test
     public void testDoFoo() {
         final Object obj1 = new Object();
         final Object obj2 = new Object();
         Mockito.doReturn(obj2).when(this.parentMock).doFoo(Matchers.any());
         assertEquals(obj2, this.instance.doFoo(obj1));
         Mockito.verify(this.parentMock).doFoo(obj1);
         Mockito.verifyNoMoreInteractions(this.parentMock);
     }

     @Test
     public void testDoBar() {
         final Object obj1 = new Object();
         final Object obj2 = new Object();
         Mockito.doReturn(obj2).when(this.parentMock).doBar(Matchers.any());
         assertEquals(obj2, this.instance.doBar(obj1);
         Mockito.verify(this.parentMock).doBar(obj1);
         Mockito.verifyNoMoreInteractions(this.parentMock);
     }
} 
```

（未测试）

# google-search-api - Java中的谷歌搜索

> ID：13374088
> 
> 赞同：0
> 
> 时间：2012-11-14T06:33:46.020
> 
> 标签：google-search-api

这是我在 StackExchange 上找到的一些代码：

```
public static void main(String[] args) throws Exception {

String key="YOUR KEY";
String qry="Android";
URL url = new URL(
        "https://www.googleapis.com/customsearch/v1?key="+key+ "&cx=013036536707430787589:_pqjad5hr1a&q="+ qry + "&alt=json");
HttpURLConnection conn = (HttpURLConnection) url.openConnection();
conn.setRequestMethod("GET");
conn.setRequestProperty("Accept", "application/json");
BufferedReader br = new BufferedReader(new InputStreamReader(
        (conn.getInputStream())));

String output;
System.out.println("Output from Server .... \n");
while ((output = br.readLine()) != null) {

    if(output.contains("\"link\": \"")){                
        String link=output.substring(output.indexOf("\"link\": \"")+("\"link\": \"").length(), output.indexOf("\","));
        System.out.println(link);       //Will print the google search links
    }     
}
conn.disconnect();                              
} 
```

我的问题是：如何使用 filetype:pdf 限制搜索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T06:40:07.400

使用`:<file-extension in the query>`搜索项。

例如获取[https://www.googleapis.com/customsearch/v1](https://www.googleapis.com/customsearch/v1)？键=插入您的密钥&cx=013036536707430787589:_pqjad5hr1a&q= `flowers:pdf`&alt=json

有关适用的其他参数，请访问 [https://developers.google.com/custom-search/v1/using_rest](https://developers.google.com/custom-search/v1/using_rest)

# php - 用于删除服务器地址的邮件功能 - PHP

> ID：13374089
> 
> 赞同：0
> 
> 时间：2012-11-14T06:33:50.613
> 
> 标签：php, email, email-formats

我需要知道如何删除电子邮件中的服务器地址。

例如：`someone@example.com`通过服务器地址。我只想删除 via 部分。

```
mail($to,$subject1,$replymessage, $headers ,"-f abc@example.com") 
```

不适合我

# ios - 如何使用 iOS 的 API 将新地点/位置添加到 Facebook 地点

> ID：13374091
> 
> 赞同：2
> 
> 时间：2012-11-14T06:34:00.270
> 
> 标签：ios, facebook-graph-api

我们正在为大自然爱好者开发 iPhone 应用程序。如果 Facebook 位置中不存在新位置或位置，我们希望添加功能来报告新位置或位置。

有什么方法可以使用 facebook API 添加地点吗？

谢谢，阿迪尔

# objective-c - 有一种方法可以使用 Ipad 在任何蓝牙打印机设备上打印

> ID：13374092
> 
> 赞同：0
> 
> 时间：2012-11-14T06:34:03.400
> 
> 标签：objective-c, ios, ios5, bluetooth, ios6

我需要使用 IOS 应用程序在便携式蓝牙打印机设备中打印一个简单的数据结构。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T09:25:17.540

on ios printing to an arbitary printer isnt possible for apps. you need to use the UIPrintInteractionController AFAIK

see [http://developer.apple.com/library/ios/#documentation/2ddrawing/conceptual/drawingprintingios/Printing/Printing.html](http://developer.apple.com/library/ios/#documentation/2ddrawing/conceptual/drawingprintingios/Printing/Printing.html)

# iphone - 多按钮的相同子视图，多视图

> ID：13374094
> 
> 赞同：-3
> 
> 时间：2012-11-14T06:34:39.523
> 
> 标签：iphone, ios, uibutton

在我的应用程序中，我有 4 个 UI 按钮。单击显示子视图视图的每个按钮都包含学习和播放选项。单击时，想要显示不同的视图取决于 uibutton 选择。这是我的代码。请帮我在点击选项上执行不同的视图。

```
-(IBAction)animals
{
  //UIAlertView *alert4=[[UIAlertView alloc]initWithTitle:@"" message:@"" delegate:self cancelButtonTitle:nil otherButtonTitles:@"LEARN",@"PLAY",@"CANCEL",nil];
//alert4.tag = 4;  
//[alert4 show];///when it was in uialert view

CGPoint point = [tap locationInView:self.birdsbut];
pv = [PopoverView showPopoverAtPoint:point inView:movingview withContentView:alertvu delegate:self];
}
-(IBAction)birds
{

CGPoint point = [tap locationInView:self.birdsbut];
pv = [PopoverView showPopoverAtPoint:point inView:movingview withContentView:alertvu delegate:self];
}
-(IBAction)direct
{ 
 CGPoint point = [tap locationInView:self.birdsbut];
pv = [PopoverView showPopoverAtPoint:point inView:movingview withContentView:alertvu delegate:self];
}
-(IBAction)fruit
{
 CGPoint point = [tap locationInView:self.birdsbut];
pv = [PopoverView showPopoverAtPoint:point inView:movingview withContentView:alertvu delegate:self];
} 
```

我应该添加什么，以在同一次单击中执行多视图选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T06:58:12.860

为所有按钮设置标签（唯一），然后将它们绑定到 touchUpInside 中的同一事件（IBAction）。在以下情况下，将它们全部绑定到事件动物：

```
 -(IBAction) animals: (id) sender;

    ===================================

    -(IBAction) animals: (id) sender {
      NSLog(@"User clicked %@", sender);
      // Do something here with the variable 'sender'
      if(sender.tag==1)
         {
           enter code here
         }
          else if (sender.tag==2)
           {
             enter code here
           }
    } 
```

# php - 如何将复选框详细信息传递到 PHP 中的下一页？

> ID：13374098
> 
> 赞同：0
> 
> 时间：2012-11-14T06:34:48.753
> 
> 标签：php, forms

我有一个根据数据库详细信息创建的动态表，它有四列从数据库中获取信息以显示在表上。问题是，我在该表的最左侧有一个**复选框**列，我需要以这样一种方式设计页面，即一旦单击复选框，我应该将特定的行信息定向到下一页。同时也可能有多个复选框被点击。

任何人都可以在这个 PHP 或至少方法/算法上帮助我，因为我可以继续这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T06:58:18.960

```
<script type='text/javascript'>
$(document).ready(function (){
    window.onload=function(){
        updateTextArea();
    }
    function updateTextArea() {
        var allVals = [];
        $('#c_b :checked').each(function() {
            allVals.push($(this).val());  
        });
        $.ajax({
            type:'GET',
            url:'Ads-Search.php?search='+allVals,
            success: function(html) 
            {
                $('#1').html(html);
            }
        });
    }
</script>
<body>
<div id='c_b'>
</div>

<div id='1'>
</div>
</body> 
```

一旦你点击复选框，控制将使用ajax传递给另一个文件，你将在那里执行你的操作

# java - 如何修复 Java 中的 r=g 编译问题？

> ID：13374101
> 
> 赞同：0
> 
> 时间：2012-11-14T06:35:13.010
> 
> 标签：java

对于以下泛型类，r=g 行存在编译错误：类型不匹配：无法从 GenericTest1<Integer> 转换为 GenericTest1<Number> 如何修复？

```
public class GenericTest1<T> {
    private T t;

    public GenericTest1(T t) {
        this.t = t;
    }

    public void set(T t) {
        this.t = t;
    }

    public T get() {
        return t;
    }

    public static void main(String[] args) {
        GenericTest1<Integer> g = new GenericTest1<>(6);
        GenericTest1<Number> r = g; <==here
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T06:43:13.783

这里的误解是它`GenericTest1<Number>`是`GenericTest1<Integer>`. 它不是，所以你必须单独施放每个成员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T06:43:47.357

在使用泛型编程时，这是一个常见的误解。这里两种具体类型`GenericTest1<Integer>`并`GenericTest1<Number>`没有关系。唯一的共同点是两者都是`Object`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T06:45:37.790

两个类 GenericTest<Number> 和 GenericTest<Integer> 不兼容分配。你甚至不能施放它们。但是，如果您不介意复制对象，则可以执行以下操作：

向您的类添加一个复制构造函数：

```
public GenericTest1(GenericTest1<? extends T> other) {
    this.t = other.t;
} 
```

然后复制对象：

```
public static void main(String[] args) {
    GenericTest1<Integer> g = new GenericTest1<>(6);
    GenericTest1<Number> r = new GenericTest1<Number>(g);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T07:28:04.117

First of all, I would limit acceptable types in your class and introduce method that compares the field with `Number` or with other `GenericNumber` and define your generic class like

```
public class GenericNumber<T extends Number> {
    private T number;
    public T getNumber() {
        return number;
    }
    public void setNumber(T number) {
        this.number = number;
    }
    public void setNumber(T number) {
        this.number = number;
    }
    //constructors
    public int compareTo(Number n) throws Exception {
        if((number == null) || (n == null))
            throw new Exception("Can't compare null values");
        else if(number.doubleValue() > n.doubleValue)
            return 1;
        else if(number.doubleValue() == n.doubleValue)
            return 0;
        else
            return 1;
    }
    public int compareTo(GenericNumber n) throws Exception {
        if(n == null)
            throw new Exception("Can't compare null values");
        return compateTo(n.getNumber());
    }
} 
```

With this approach testing for equality of instances will transform into the following condition, with your objects: `(r.compareTo(g) == 0)`.

If you don't want to use the java-flavoured comparing class method of this type you can, of course, typecast the fields and compare with `=` operator.

For the behaviour you expect it is not right to make such an assignment because `GenericNumber<Integer>` is not a subtype of `GenericNumber<Number>`, as our intuition implies, though Integer is subtype of Number. To understand that suppose that in your case you would like to call a set method on an instance of `GenericNumber<Number>`:

```
GenericNumber<Integer> i = new GenericNumber<Integer>();
Integer ii = 3;
i.setNumber(ii);
GenericNumber<Number> n = i;//suppose it will be consumed by compiler
//in this case it will be tempting to forget about i and use n instead, like in the following lines
Folat f = 2.5f;
n.setNumber(f);
//would be valid because method signature will be 
//public void Number setNumber(Number number)
//but what actually happens is that you will try to call method of class
//GenericNumber<Integer> with signature public void Integer setNumber(Integer number) 
```

As you see, the last line will cause an error, so you need to use generics with caution.

By the way, tutorial section on generics of then-Sun, now-Oracle site is worth visiting, namely: [http://docs.oracle.com/javase/tutorial/java/generics/index.html](http://docs.oracle.com/javase/tutorial/java/generics/index.html) and/or [http://docs.oracle.com/javase/tutorial/extra/generics/index.html](http://docs.oracle.com/javase/tutorial/extra/generics/index.html).

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T07:02:51.443

`GenericTest1<Integer>`并且`GenericTest1<Number>`不兼容，您不能在它们之间进行转换！但是，如果您不想公开 Integer，则可以使用绑定：

```
GenericTest1<? extends Number> r = g; 
```

`r`是`GenericTest1<Integer>`真实的，但声明只允许访问 Number。由于不特定的类型 T，您不能调用`set()`（好的，与 null 一起使用），但您可以使用`get()`：

```
g.set(Integer.valueOf(1)); // OK
r.set(Integer.valueOf(1)); // compile ERROR
if (r.get().intValue() == 1) { //OK
    ...  
} 
```

# php - 更改网站语言时，我需要更改图像文件名的功能

> ID：13374107
> 
> 赞同：0
> 
> 时间：2012-11-14T06:36:03.227
> 
> 标签：php, image, filenames

我使用代码：

```
<img src="images/english.png"/> 
```

我的网站使用英语和越南语两种语言，我希望将语言更改为越南语时，图像文件名将更改为 vietnamese.png 示例：

```
<img src="images/vietnamese.png"/> 
```

已经有 2 个图像文件到图像文件夹中，我需要 PHP 脚本来更改它时更改语言

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T07:38:02.310

为语言设置 Cookie 值

当用户选择语言时

```
<?php
$value = 'en';
setcookie("lan", $value);
setcookie("lan", $value, time()+3600); 
?> 
```

用于生成图像

```
<?php
if($_COOKIE['lan']=='en'){
echo "<img src='blablaba1.png'></img>";
}
else{
echo "<img src='blablaba2.png'></img>";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T06:41:22.137

创建一个 if else 语句。例如，当您选择英语时，显示图像 A，否则显示图像 B。当您选择一种语言时，您很可能会更改一个值。因此，使用该值创建一个 if else 语句，该语句必须与您的图像相对应。

如果你问我，这真的很容易。我在下面举了一个例子

```
if($LanguageVar == 1)
    { 
        Echo "<img src='blablaba1.png'></img>";
    }
    else
    {
        Echo "<img src='blablaba2.png'></img>";
    } 
```

或者那个大方向的东西

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T06:43:30.273

您可能需要提供更多信息，例如，您的站点如何确定使用哪种语言？

假设您可以在 PHP 中创建一个布尔值（我们称之为 langV），如果语言是越南语则为 true，如果是英语则为 false，那么您要做的就是：

替换您的 img 标签：

```
<img src="e_image" alt=""/> 
```

像这样：

```
<img src="<?php echo langV?:'v_image''e_image' ?>" alt=""/> 
```

当然，将 v_image 和 e_image 替换为单独图像文件的路径。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T06:53:40.733

您的网站如何知道正在使用哪种语言？

您可以使用部分 URL。例如，如果您有

```
http://www.mysite.com/viet/
http://www.mysite.com/en/ 
```

将您的图像命名为“viet.png”和“en.png”

```
$lang = end(explode('/',$_SERVER['REQUEST_URI'))

<img src="$lang.png" /> 
```

这实际上取决于网站如何确定使用哪种语言

# java - 如何将此 JSP 转换为 MVC 方法？

> ID：13374114
> 
> 赞同：0
> 
> 时间：2012-11-14T06:36:22.147
> 
> 标签：java, model-view-controller, jsp

我写了下面的JSP。现在我想把它变成一个MVC模式，你能帮我怎么做吗？

```
<%@page import="java.util.Date"%>  
<%@include file="DBCon.jsp" %>  
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"  
    pageEncoding="ISO-8859-1"%>  

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">  
<html>  
<head>  
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">  
<title>Insert title here</title>  
<script language="javascript">  
    function UnBloc1(test){  
        var temp3id= 'temp3' + test;  
        var temp4id= 'temp4' + test;  
      //alert(temp3id);  

      document.getElementById(temp3id).style.display='block';  
      document.getElementById(temp4id).style.display='block';  
    }  

    function invoke(but1)  
    {  
        //var x=document.getElementById("temp3"+but).value;  
        //alert(x);  
         document.abc.action="Up_Query_DB.jsp?val1="+but1;  
         document.abc.submit();  
    }  
    function invoke1(but)  
            {      
         document.abc.action="Users_2.jsp?val="+but;  
         document.abc.submit();  

         //var t=document.getElementById("ab")+z;  
         //alert(t);  
            }  
</script>  
</head>  
<body>  
<form name="abc" method="post" action=""><table>  
<%  
try  
               {  
    String s=(String)session.getAttribute("muusername");  
    int i=0;  
    int temp=0, temp1=0,temp2=0, temp3=0, temp4=0;  
    ps=con.prepareStatement("Select DBID,Query_Raised,TR from Scope2 where TR!='null' AND (Query_Answered is null OR Count1 is null) And Specialist='"+s+"'");  
    rs=ps.executeQuery();  
    out.println("<b>QueryRaised</b>");  
       while(rs.next())  

        {  

           i++;  
           %>  

                      <tr>  
                      <td><input type="text" value="<%=i%>" name="id1" id="id1"></td>  
                      <td><center><input type="text" value="<%=rs.getString("DBID")%>" readonly id="abc<%=i%>" name="abc<%=i%>" size="100"></center></td>  
                      <td><input type="Submit" value="Resume" name="temp1<%=i%>" id="temp1<%=i%>" onclick="invoke1(<%=i%>)"></td>  
                      <td><input type="button" value="Update Answer"  name="temp2<%=i%>" id="temp2<%=i%>" onClick="UnBloc1(<%=i%>)"></td>  
                      <td><input type="text" name="temp3<%=i%>" id="temp3<%=i%>" style="display: none"/></td>   
                      <td><input type="Submit" value="Submit Answer" name="temp4<%=i%>" id="temp4<%=i%>" style="display: none" onClick="invoke(<%=i%>)"/>                      </td>  
                      </tr>  

    <% }  

}  
catch(Exception e)  
           {  

out.println(e);  

}  
%>    
  </table>    
 </form>   

</body>  
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T07:16:14.880

假设您访问数据库并获取包含少量属性（使用 setter 和 getter 方法）的对象列表，其中包括`dbid`属性。该对象将是您的模型。让我们称之为`myBean`。

您将执行查询的 Java 类将是 Controller 类。让我们称之为`myController`。因此，控制器应该： 1\. 获取您需要的对象列表。2.在表示信息之前做任何应该做的事情（在你的情况下，我什么都不说）和3.通过你的bean列表将信息传递给JSP，在请求中设置信息，以便显示信息。

现在，您的 JSP 应该如下所示：

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"  
    pageEncoding="ISO-8859-1"%>  

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">  
<html>  
<head>  
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">  
    <title>Insert title here</title>

    <script language="javascript">

       ...

    </script>  
</head>  

<body>

<form name="abc" method="post" action="">

    <table>

        <c:forEach var="myItem" items="${listDbid}" varStatus="i">

            <tr>  
                <td><input type="text" value="${i.count}" name="id1" id="id1"></td>  
                <td><center><input type="text" value="${myItem.getDbid}" readonly id="abc${i.count}" name="abc${i.count}" size="100"></center></td>  
                <td><input type="Submit" value="Resume" name="temp1${i.count}" id="temp1${i.count}" onclick="invoke1(${i.count})"></td>  
                <td><input type="button" value="Update Answer"  name="temp2${i.count}" id="temp2${i.count}" onClick="UnBloc1(${i.count})"></td>  
                <td><input type="text" name="temp3${i.count}" id="temp3${i.count}" style="display: none"/></td>   
                <td><input type="Submit" value="Submit Answer" name="temp4${i.count}" id="temp4${i.count}" style="display: none" onClick="invoke(${i.count})"/>                      </td>  
            </tr>    

        </c:forEach>        

  </table>    
 </form>      

</body>  
</html> 
```

因此，基本上，您需要从 JSP 中删除所有不是“视图”的代码，将其带到“控制器”并使用“模型”将信息从“控制器”发送到“视图”。

还

*   您应该避免在 JSP 中使用脚本 (<% %>)，最好使用 JSTL 和其他类似工具。如果您这样做，您的 JSP 可能没有“控制器”代码。
*   我建议您使用 MVC 框架，例如 Spring MVC 或 Struts 等。
*   如果您在代码中创建另一层仅用于数据库访问，那也很好。该数据库层将由控制器使用，因此控制器。您可以重用代码，使控制器独立于数据库并使它们更清晰。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T07:03:08.097

我也是 MVC 新手，但我可以给你一些建议。做一个豆子。Bean 是带有 getter 和 setter 的 Java 类。在你的情况下，豆子是

```
 public class Scope2
 {
   String dbID;
  //all other attributes of the table.Beans should be reusable so usually there is only one bean for one corresponding table

   public String getDBID()
  {
    return dbID;
   }
   public void setDBID(String dbId)
   {
     this.dbId=dbId;
   }

  //Other getters and setters for all other attributes
} 
```

现在创建一个执行数据库查询的类。并将 bean Scope2 从该类返回给 jsp。在您的 jsp 中，您只需将值打印为 out.println(bean.getDBID());

# parsing - “表达式”的非左递归 PEG 文法

> ID：13374121
> 
> 赞同：10
> 
> 时间：2012-11-14T06:37:25.010
> 
> 标签：parsing, compiler-construction, programming-languages, lexer

它要么是一个简单的标识符（比如`cow`），要么是被方括号（）包围的`(...)`东西，要么是看起来像方法调用（`...(...)`）的东西，要么是看起来像成员访问（`thing.member`）的东西：

```
def expr = identifier | 
           "(" ~> expr <~ ")" | 
           expr ~ ("(" ~> expr <~ ")") | 
           expr ~ "." ~ identifier 
```

它以 Scala Parser Combinator 语法给出，但应该很容易理解。它类似于表达式最终在许多编程语言中的样子（因此得名`expr`）。但是，就目前而言，它是左递归的，并导致我漂亮的 PEG 解析器爆炸。

我没有成功地分解左递归，同时仍然保持对`(cow.head).moo(dog.run(fast))`. 我该如何重构这个，或者我需要转向一些可以容忍左递归语法的解析器生成器？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-14T06:48:39.933

诀窍是有多个规则，其中每个规则的第一个元素是下一个规则，而不是对同一规则的递归调用，并且规则的其余部分是可选的和重复的。例如，以下内容适用于您的示例：

```
def expr              = method_call
def method_call       = member_access ~ ( "(" ~> expr <~ ")" ).*
def member_access     = atomic_expression ~ ( "." ~> identifier).*
def atomic_expression = identifier |
                        "(" ~> expr  <~ ")" 
```

# ssis - SSIS 自定义目标组件 - 我在哪里创建 ExternalMetaData 列

> ID：13374123
> 
> 赞同：1
> 
> 时间：2012-11-14T06:37:34.273
> 
> 标签：ssis, components, external

我创建了一个自定义 SSIS 目标组件来写入 MQ。我正在更改代码，因为我正在使用测试 SSIS 包来确认它是否有效。

我已经完成了将消息映射到输入列的所有工作。都好。但是我在 ProvideComponentProperties 中创建 ExternalMetadataColumnCollection。当我开始一个新的测试包时，我才意识到这是错误的调用它的地方。现在，当我尝试将新组件添加到包中时，出现错误

```
Error at Data Flow Task [SSIS.Pipeline]: The property is read-only.

Error at Data Flow Task [IBM MQ Destination Jo [6]]:   System.Runtime.InteropServices.COMException (0xC0204013): Exception from HRESULT: 0xC0204013
   at Microsoft.SqlServer.Dts.Pipeline.Wrapper.IDTSExternalMetadataColumn100.set_ID(Int32 pID)
   at   IBMWebsphereMQ.DestinationAdapters.IbmMQDestinationAdapter.CreateInputAndMetaDataColumns (IDTSInput100 input)
   at 
```

IBMWebsphereMQ.DestinationAdapters.IbmMQDestinationAdapter.ProvideComponentProperties() 在 Microsoft.SqlServer.Dts.Pipeline.ManagedComponentHost.HostProvideComponentProperties（IDTSManagedComponentWrapper100 包装器）

显然，ProvideComponentProperties 不是创建 ExternalMetaData 列的正确位置。我应该在哪里调用它？

下面是组件的代码

```
using System;
using System.Collections;
using System.Runtime.InteropServices;
using System.Transactions;
using MyProject.IBMWebsphereMQ.ConnectionManagers;
using MyProject.IBMWebsphereMQ.Framework;
using MyProject.IBMWebsphereMQ.Interfaces;
using Microsoft.SqlServer.Dts.Pipeline;
using Microsoft.SqlServer.Dts.Pipeline.Wrapper;
using Microsoft.SqlServer.Dts.Runtime;
using MyProject.IBMWebsphereMQ.MQ;
using Microsoft.SqlServer.Dts.Runtime.Wrapper;

    namespace MyProject.IBMWebsphereMQ.DestinationAdapters
    {
    [DtsPipelineComponent(ComponentType = ComponentType.SourceAdapter,
     DisplayName = "IBM MQ Destination Jo",
     Description = "Writes messages to the defined queue",
     IconResource = "Dts.Pipeline.SSISSourceAdapter.source.ico",
     CurrentVersion = 1
     )]

    public class IbmMQDestinationAdapter : PipelineComponent, IEnlistmentNotification
    {
    private const string QueuePropertyName = "Queue";
    private const string BatchWriteSize = "BatchWriteSize";
    private const string ConnectionName = "IBM MQ connection";

    private const string MessageInputName = "Message";
    private const string ColumnName = "Message";
    private const string InputDescription = "Input for IbmMQDestinationAdapter";

    private IManagedConnection connection;
    private IQueue queue;
    private ArrayList columnInfos = new ArrayList();
    private bool reRaise = true;
    private  IDTSInput100 messageInput;

    #region ColumnInfo
    private struct ColumnInfo
    {
        public int BufferColumnIndex;
        public string ColumnName;
    }
    #endregion

    private string QueueName
    {
        get { return GetProperty<string>(QueuePropertyName); }
    }

    private int BatchSize
    {
        get { return GetProperty<int>(BatchWriteSize); }
    }

    public override void ProvideComponentProperties()
    {
         TraceLogging.WriteTrace(this, "Executing ProvideComponentProperties");

        //base.ProvideComponentProperties();

        ////Clear out base implementation
        //ComponentMetaData.RuntimeConnectionCollection.RemoveAll();
        //ComponentMetaData.InputCollection.RemoveAll();
        //ComponentMetaData.OutputCollection.RemoveAll();

        //Provide the inital components.
        RemoveAllInputsOutputsAndCustomProperties();
        ComponentMetaData.RuntimeConnectionCollection.RemoveAll();
        ComponentMetaData.UsesDispositions = true;

        SetComponentAttribute();

         messageInput = ComponentMetaData.InputCollection.New();
        messageInput.Name = MessageInputName;
        messageInput.Description = InputDescription;
        messageInput.HasSideEffects = true;
        messageInput.ExternalMetadataColumnCollection.IsUsed = true;

        TraceLogging.WriteTrace(this, "Creating InputColCollection");
        IDTSInputColumn100 inCol = messageInput.InputColumnCollection.New();
        TraceLogging.WriteTrace(this, "Setting incol.Name {0}" , ColumnName);
        inCol.Name = ColumnName;

        CreateInputAndMetaDataColumns(messageInput);

        DtsExtensions.CreateCustomProperty(ComponentMetaData.CustomPropertyCollection.New(), QueuePropertyName, "The name of the queue to connect to", true, "QueueName");
        //DtsExtensions.CreateCustomProperty(ComponentMetaData.CustomPropertyCollection.New(), BatchWriteSize, "Maximum number of messages to dequeue(0=all)", true, 5000);

        //Reserve space for the connection manager
        IDTSRuntimeConnection100 connectionSite = ComponentMetaData.RuntimeConnectionCollection.New();
        connectionSite.Name = ConnectionName;
    }

    public override DTSValidationStatus Validate()
    {
        bool pbCancel = false;

        if (ComponentMetaData.OutputCollection.Count != 0)
        {
        ComponentMetaData.FireError(0, ComponentMetaData.Name, "Unexpected Output found. Destination components do not support outputs",
            "", 0, out pbCancel);
        return DTSValidationStatus.VS_ISCORRUPT;

        }

        if (ComponentMetaData.AreInputColumnsValid == false)
        {
        ComponentMetaData.InputCollection["ComponentInput"].InputColumnCollection.RemoveAll();
        return DTSValidationStatus.VS_NEEDSNEWMETADATA;
        }
        ////What about if we have input columns but we have no ExternalMetaData
        ////columns? Maybe somebody removed them through code.
        //IDTSInput100 input = ComponentMetaData.InputCollection[MessageInputName];
        //if (DoesEachInputColumnHaveAMetaDataColumnAndDoDatatypesMatch(input.ID) ==false)
        //{
        //    ComponentMetaData.FireError(0, "Validate", "input columns and metadata columns are out of sync. Making call to ReinitializeMetaData", "", 0, out pbCancel);
        //    return DTSValidationStatus.VS_NEEDSNEWMETADATA;
        //}

        return base.Validate();
    }

    private bool DoesEachInputColumnHaveAMetaDataColumnAndDoDatatypesMatch(int inputID)
    {
        IDTSInput100 input = ComponentMetaData.InputCollection.GetObjectByID(inputID);
        IDTSExternalMetadataColumn100 mdc;
        bool rtnVal = true;
        foreach (IDTSInputColumn100 col in input.InputColumnCollection)
        {
        if (col.ExternalMetadataColumnID == 0)
        {
            rtnVal = false;
        }
        else
        {
            mdc =
            input.ExternalMetadataColumnCollection[col.ExternalMetadataColumnID];
            if (mdc.DataType != col.DataType || mdc.Length != col.Length ||
            mdc.Precision != col.Precision || mdc.Scale != col.Scale || mdc.CodePage !=
            col.CodePage)
            {
            rtnVal = false;
            }
        }
        }
        return rtnVal;
    }

    public override void OnInputPathAttached(int inputID)
    {
        IDTSInput100 input = ComponentMetaData.InputCollection.GetObjectByID(inputID);
        IDTSVirtualInput100 vInput = input.GetVirtualInput();
        foreach (IDTSVirtualInputColumn100 vCol in vInput.VirtualInputColumnCollection)
        {
        this.SetUsageType(inputID, vInput, vCol.LineageID, DTSUsageType.UT_READONLY);
        }
    }

    public override void PreExecute()
    {
        TraceLogging.WriteTrace(this, "PreExecute");

        IDTSInput100 input = ComponentMetaData.InputCollection[MessageInputName];

       // CreateInputAndMetaDataColumns(input );

        TraceLogging.WriteTrace(this, "PreExecute after getting Inputcollection");
        ComponentMetaData.FireInformation(0, "PreExecute about to loop", "Start loop of columns", null, 0, ref reRaise);
        TraceLogging.WriteTrace(this, "PreExecute Loop");
        foreach (IDTSInputColumn100 inCol in input.InputColumnCollection)
        {
        ColumnInfo ci = new ColumnInfo();
        ci.BufferColumnIndex = BufferManager.FindColumnByLineageID(input.Buffer, inCol.LineageID);
        ci.ColumnName = inCol.Name;
        TraceLogging.WriteTrace(this, " PreExecute columnInfo Name: {0}", inCol.Name);
        columnInfos.Add(ci);
        }

    }

    public override void ReinitializeMetaData()
    {
        IDTSInput100 _profinput = ComponentMetaData.InputCollection[MessageInputName];
        if (_profinput.ExternalMetadataColumnCollection.Count > 0)
        {
        _profinput.ExternalMetadataColumnCollection.RemoveAll();
        }
        if (_profinput.InputColumnCollection.Count > 0)
        {
        _profinput.InputColumnCollection.RemoveAll();
        }
        CreateMetaDataColumns(_profinput);
    }

    private void CreateMetaDataColumns(IDTSInput100 input)
    {
        TraceLogging.WriteTrace(this, "CreateMetaDataColumns");

        IDTSExternalMetadataColumnCollection100 extCols = input.ExternalMetadataColumnCollection;
        TraceLogging.WriteTrace(this, "Got extCols");

        //IDTSInputColumn100 inCol = messageInput.InputColumnCollection.New();
        //inCol.Name = ColumnName;

        foreach (IDTSInputColumn100 inCol in input.InputColumnCollection)
        {
        TraceLogging.WriteTrace(this, "For Each ColumnName = {0}", inCol.Name);
        if (inCol.Name == ColumnName)
        {
            TraceLogging.WriteTrace(this, "Create new ExtCol");
            IDTSExternalMetadataColumn100 extCol = extCols.New();
            TraceLogging.WriteTrace(this, "Set them to input col");
            extCol.Name = inCol.Name;
            extCol.ID = inCol.ID;
            extCol.DataType = inCol.DataType;
            extCol.Length = inCol.Length;
            extCol.Precision = inCol.Precision;
            extCol.Scale = inCol.Scale;
            extCol.CodePage = inCol.CodePage;
        }

        }
    }

    public override void AcquireConnections(object transaction)
    {
        if (transaction != null && connection.Configuration.AcknowledgementMode == Acknowledgement.Session)
        {
        ComponentMetaData.FireInformation(0, "AcquireConnections()", "Enlist in transaction", null, 0,
                          ref reRaise);
        //If the connection mode is session and there is a valid transaction then enlist.
        IntPtr pUnk = Marshal.GetIUnknownForObject(transaction);
        var dtcTrans = (IDtcTransaction)Marshal.GetTypedObjectForIUnknown(pUnk, typeof(IDtcTransaction));
        Transaction managedTrans = TransactionInterop.GetTransactionFromDtcTransaction(dtcTrans);
        managedTrans.EnlistVolatile(this, EnlistmentOptions.EnlistDuringPrepareRequired);
        }

        IDTSRuntimeConnection100 conn = ComponentMetaData.RuntimeConnectionCollection[0];
        connection = (IManagedConnection)conn.ConnectionManager.AcquireConnection(transaction);
        if (connection is IbmMQConnection)
        {
        ComponentMetaData.FireInformation(0, "AcquireConnections()", "Connecting", null, 0, ref reRaise);

        //Connect if not connected
        if (!connection.IsConnected())
            connection.Connect();
        if (connection.IsConnected())
        {
            ComponentMetaData.FireInformation(0, "AcquireConnections()", "Connected.", null, 0, ref reRaise);
            ComponentMetaData.FireInformation(0, "AcquireConnections()", "Connecting to queue", null, 0, ref reRaise);
            queue = new IbmMQQueue(connection) { QueueName = QueueName };
            queue.Open();
        }
        }
    }

    public override void ReleaseConnections()
    {
        if (queue != null)
        queue.Close();

        base.ReleaseConnections();
    }

    //public void CreateExternalMetaDataColumn(IDTSInput100 input, int inputColumnID)
    //{
    //    IDTSInputColumn100 oColumn = input.InputColumnCollection.GetObjectByID(inputColumnID);
    //    IDTSExternalMetadataColumn100 eColumn = input.ExternalMetadataColumnCollection.New();

    //    eColumn.DataType = oColumn.DataType;
    //    eColumn.Precision = oColumn.Precision;
    //    eColumn.Scale = oColumn.Scale;
    //    eColumn.Length = oColumn.Length;
    //    eColumn.CodePage = oColumn.CodePage;

    //    oColumn.ExternalMetadataColumnID = eColumn.ID;
    //}

    public override void ProcessInput(int inputID, PipelineBuffer buffer)
    {
        ComponentMetaData.FireInformation(0, "ProcessInput Jo", "Beginning Process Input", null, 0, ref reRaise);

        if (!buffer.EndOfRowset)
        {

        while (buffer.NextRow())
        {
            ComponentMetaData.FireInformation(0, "ProcessInput()", "Beginning loop of columnns", null, 0,
                              ref reRaise);

            TraceLogging.WriteTrace(this, "Process Input columninfos,count = {0}", columnInfos.Count);
            var message = new Message();
            for (int i = 0; i < columnInfos.Count; i++)
            {

                ColumnInfo ci = (ColumnInfo) columnInfos[i];
                object o = buffer[ci.BufferColumnIndex];
                if (o == null)
                {
                TraceLogging.WriteTrace(this, "o is null");

                TraceLogging.WriteTrace(this, "ColumnName: {0} ", ci.ColumnName);
                }
                else
                {
                TraceLogging.WriteTrace(this, "testing trace {0}: ", "Jo");
                TraceLogging.WriteTrace(this, "ColumnName: {0}", ci.ColumnName);
                TraceLogging.WriteTrace(this, "Column Value: {0}", buffer[ci.BufferColumnIndex].ToString());
                if (ci.ColumnName == ColumnName)
                {
                    TraceLogging.WriteTrace(this, "Setting MessageContents");
                    message.Contents = buffer[ci.BufferColumnIndex].ToString();
                }
                else
                {
                    TraceLogging.WriteTrace(this, "Setting MessageId");
                    message.MessageId = buffer[ci.BufferColumnIndex].ToString();
                }

                }

            }
            queue.Write(message);

            //string messageContents = buffer.GetString(m_BlobColumnIndex);
            //TraceLogging.WriteTrace(this, "Message contents", messageContents);

            //var message = new Message("1", messageContents);
            //ComponentMetaData.FireInformation(0, "ProcessInput()", "Beginning queue write set contents", null, 0,
            //                                  ref reRaise);
            //queue.Write(message);
            ComponentMetaData.FireInformation(0, "ProcessInput()", "after queue write", null, 0, ref reRaise);
            connection.Commit();

        }
        }
    }

    private void SetComponentAttribute()
    {
        var componentAttribute =
        (DtsPipelineComponentAttribute)
        Attribute.GetCustomAttribute(GetType(), typeof(DtsPipelineComponentAttribute), false);
        int currentVersion = componentAttribute.CurrentVersion;

        ComponentMetaData.Version = currentVersion;
        ComponentMetaData.ContactInfo = ContactInfo;
    }

    private T GetProperty<T>(string propertyName)
    {
        foreach (IDTSCustomProperty100 possibleProperty in ComponentMetaData.CustomPropertyCollection)
        {
        if (possibleProperty.Name == propertyName)
        {
            return (T)possibleProperty.Value;
        }
        }
        return default(T);
    }

    #region IEnlistmentNotification Members

    public void Commit(Enlistment enlistment)
    {
        ComponentMetaData.FireInformation(0, "Commit(Enlistment enlistment)", "Beginning commit", null, 0, ref reRaise);
        connection.Commit();
        ComponentMetaData.FireProgress("Committed", 100, 0, 0, "IbmMQSourceAdapter", ref reRaise);
        enlistment.Done();
    }

    public void InDoubt(Enlistment enlistment)
    {

    }

    public void Prepare(PreparingEnlistment preparingEnlistment)
    {
        if (connection != null)
        {
        preparingEnlistment.Prepared();
        //  TraceLogging.WriteTrace(this, "Transaction Preparing");
        }
    }

    public void Rollback(Enlistment enlistment)
    {
        connection.Rollback();
        //  TraceLogging.WriteTrace(this, "Rollback Executed");
        ComponentMetaData.FireWarning(0, "Rollback(Enlistment enlistment)", "Rolling back transaction", null, 0);
        enlistment.Done();
    }

    #endregion
    }
    } 
```

# android - 为什么要在 MainActivity.java 的 onCreate() 中声明按钮？

> ID：13374125
> 
> 赞同：0
> 
> 时间：2012-11-14T06:37:59.043
> 
> 标签：android, android-button

我是编写 Android 应用程序的菜鸟。
以下 2 个关于声明按钮的示例均来自 Android 开发者网站。（所以它们都应该是正确的并且可以工作。）

示例 1：来自[http://developer.android.com/training/basics/firstapp/building-ui.html](http://developer.android.com/training/basics/firstapp/building-ui.html)

```
<Button
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:text="@string/button_send"
android:onClick="sendMessage" /> 
```

示例 2：来自[http://developer.android.com/guide/topics/ui/declaring-layout.html#attributes](http://developer.android.com/guide/topics/ui/declaring-layout.html#attributes)

```
<--! (In xml file) Define a view/widget in the layout file and assign it a unique ID: -->
<Button android:id="@+id/my_button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/my_button_text"/>

//(In java file) Then create an instance of the view object and capture it from the layout (typically in the onCreate() method):
Button myButton = (Button) findViewById(R.id.my_button); 
```

1）那么我什么时候想为我的按钮分配“Android：id”？

2) 如果我在 xml 文件中为我的按钮分配了 "Android:id" 但我没有在 "MainActivity.java" 的 "onCreate()" 中声明按钮，会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:04:09.977

Android:id 只是您的元素的标识符，在您的情况下是 Button。如果你没有在 onCreate 方法中使用它，它不会做任何事情。当您为 Button 创建任何侦听器时，Id 将很有用。即，告诉您单击它时要做什么。

你会使用这样的东西。

```
 Button button = (Button) findViewById(R.id.button1);

        button.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                // TODO Auto-generated method stub
            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T05:36:14.117

让我们快速回顾一些事情。

android:id 正是它听起来的样子，它是用于指定某些视图的标识。例如，假设您在一个布局上有两个按钮，并且您希望这些按钮执行某些操作，或者您可能只想更改按钮的文本。您需要在 Activity onCreate 方法中初始化按钮，以便通过代码对它们进行处理。id 用于区分视图。在我们的两个按钮示例中，您可以为一个按钮提供 buttonOne 的 id 和另一个 buttonTwo。这样，当您在代码中引用它们时，Android 就知道您在谈论哪个按钮。如果您在 XML 中为按钮分配 id 并且不在代码中引用它，那么按钮将什么也不做。如果您需要更多关于初始化视图的信息，而不是查看我网站上的这篇文章。我'

[http://www.androidianlabs.com/android-basics-lesson-one.html](http://www.androidianlabs.com/android-basics-lesson-one.html)

# java - 等待clojure中的按键

> ID：13374126
> 
> 赞同：4
> 
> 时间：2012-11-14T06:38:00.223
> 
> 标签：java, input, clojure, lisp, seesaw

我用跷跷板创建了一个java框架

```
(def f (frame :title "my app")) 
```

我想抓住用户按键。

我试图在这里和那里收集代码并以此结束

```
(ns myapp.core
  (:use seesaw.core)
  (:use seesaw.font)
  (:import [java.awt.event ActionListener KeyListener KeyEvent])
)

(defn input-listener []
(proxy [ActionListener KeyListener] []
  (actionPerformed [e])
  (keyPressed [e] (alert e "You pressed a key!"))
  (keyReleased [e])
  (keyTyped [e])))

(doto f
  (.addKeyListener (input-listener))) 
```

但它根本不起作用。我是 clojure 的新手，因为我绝对不知道任何 JAVA （也不想真正投入其中），所以我有点迷路了。有没有一种简单的方法来捕获整个应用程序中键盘快捷键的用户输入？

请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T05:41:32.423

如果您只想将特定按键映射到框架中的不同功能，[seesaw.keymap/map-key](https://github.com/daveray/seesaw/blob/develop/src/seesaw/keymap.clj)可能是您想要的：

```
; When 'e' is pressed in frame f, call this function
(map-key f "e" (fn [_] (... do something )) 
```

（这一切都建立在@Bill 引用的键绑定内容之上）

查看文档以`map-key`获取更多信息。正如其他答案所暗示的那样，Swing 中的键盘处理甚至比 Swing 的其余部分更糟糕，所以要准备好承受一些痛苦:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T14:51:00.980

跷跷板很棒，但要找到如何做你想做的事情仍然有点棘手，特别是如果（像我一样）你不是 Swing 专家。通常不需要闯入 Java API，尤其是对于这么简单的事情。这对我有用：

```
(ns so.core
  (:use seesaw.core))

(let [f (frame :title "my app")
      handler (fn [e] (alert "pressed key!"))]
  (listen f :key-pressed handler)
  (show! f)) 
```

不幸的是[，这个不错的跷跷板教程](https://gist.github.com/1441520)没有按键示例——最好添加。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-14T15:35:12.777

如果你想在一个 Swing 应用程序中全局拦截键，你需要一个`KeyEventDispatcher`，你可以通过`KeyboardFocusManager`. 如果您想根据特定组件的键添加操作（更高级别 - 更好），您可能需要 KeyBindings [http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)

在你学习跷跷板之前，你想了解一点摇摆。Java Trail 是一个很好的起点。[http://docs.oracle.com/javase/tutorial/uiswing/index.html](http://docs.oracle.com/javase/tutorial/uiswing/index.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T09:45:37.287

你在你的警报呼叫中得到了一个并不真正属于那里的 e。没有它应该可以工作。在不学习 Java 的情况下尝试使用 Clojure 祝你好运，我认为从长远来看它不会奏效，但如果它确实会很好。

# c# - ASP.NET 生命周期在数据加载方面的最佳实践？

> ID：13374129
> 
> 赞同：0
> 
> 时间：2012-11-14T06:38:10.187
> 
> 标签：c#, asp.net, lifecycle

我有一个关于使用 ASP.NET 和 C# 加载数据的最佳实践的问题

作为概述，我们有一个网页，它使用支持的 Web 服务来获取相当大的 XML 文件。然后将该文件转换为客户端 JavaScript 以用于加载 ListView。

```
protected string clientSideJavaScripts;

protected void Page_Init(object sender, EventArgs e)
{
    // code goes here to submit a request and receive an XML Response from the web service
    // code goes here to set clientSideJavaScripts = translated Java Script from the XML Document
    // other code goes here
} 
```

ASP 文件具有以下内容：

```
<head>
    <title></title>
    <script type="text/javascript>
       <%=clientSideJavaScripts%>
    </scrpit>
</head>

... 
```

然而，表单上还有几个按钮会导致回发。这些与上面的 javascript 没有直接关系。

一切正常，但是我相信（由于我对 ASP.NET 生命周期的了解有限），该 Web 服务在每次回发时都会被调用。因此，每当有人点击网页上的几个 asp:buttons 时，无论按钮的性质如何，它都会执行加载该文件的开销，因为回发将在从 Init 到过去的生命周期阶段循环回发事件处理。

显而易见的事情是不要在回发时调用 web 服务。IE：

```
protected string clientSideJavaScripts;

protected void Page_Init(object sender, EventArgs e)
{
    if (!Page.IsPostBack) 
    {
       // code goes here to submit a request and receive an XML Response from the web service
       // code goes here to set clientSideJavaScripts = translated Java Script from the XML Document
    }
    // other code goes here
} 
```

然而，其结果是服务器端字符串“clientSideJavaScripts”不再被实例化，因此客户端在第一次回发后不再获得所需的 javascript。

我确信在这种情况下我缺少一种明显（并且可能是常见的）方法来处理 javascript 的持久性，但是我不知道它，因此我正在寻求任何人的建议。确保 Web 服务只被调用一次的最佳实践是什么？

我也在使用 AJAX 和 JQuery Mobile，如果这有什么不同的话

任何建议将不胜感激。非常感谢

# php - $_data 与 $this->_data - PHP

> ID：13374137
> 
> 赞同：1
> 
> 时间：2012-11-14T06:39:12.363
> 
> 标签：php, class, this

我试图找出两者之间的区别`$_data vs $this->_data`

```
class ProductModel
{

    var $_data = null; <--- defined here

    function test() 
    {
       $this->_data = <--- but it's accessed using $this
    }

} 
```

我知道在 PHP`var`中用于定义类属性，但为什么要使用`$this`. 不应该是这样`$this->$_data`吗？这里使用的是什么 OOP 概念？它是特定于 PHP 的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T06:44:01.117

PHP 以及其他几种流行的编程语言，如 Java（重要的是要注意 PHP 的面向对象选择至少部分受到 Java 的启发）在上下文中将当前对象实例称为`this`. 您可以将`this`, (或`$this in PHP`) 视为“当前对象实例”。

在类方法里面，`$this`指的是当前的对象实例。

一个非常小的例子，使用上面的内容：

```
$_data = 'some other thing';
public function test() {
   $_data = 'something';
   echo $_data;
   echo $this->_data;
} 
```

以上将输出`somethingsome other thing`. 类成员与对象实例一起存储，但局部变量仅在当前范围内定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T06:44:14.893

不，不应该。由于 PHP 可以动态评估成员名称，因此该行

```
$this->$_data 
```

引用一个类成员，其名称在局部`$data`变量中指定。考虑一下：

```
class ProductModel
{

    var $_data = null; <--- defined here

    function test() 
    {
       $member = '_data';
       $this->$member = <--- here you access $this->_data, not $this->member
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T06:46:58.963

`var $_data`定义一个类变量，`$this->_data`访问它。

如果你这样做`$this->$foo`意味着别的东西，就像`$$foo`: 如果你设置`$foo = 'bar'`，这两个表达式分别被评估为`$this->bar`和`$bar`

# c# - 扩展方法、T 函数和 T 列表

> ID：13374138
> 
> 赞同：6
> 
> 时间：2012-11-14T06:39:17.797
> 
> 标签：c#, generics, lambda, extension-methods

我想编写一个可以在将值插入列表之前完成一些检查的函数。例如：

```
class Person {
    public string Name { get; set; }
    public int Value { get; set; }
    public Guid Id { get; set; }
}
-------
var persons = new List<Person>();
// add a new person if John doesn't exist
persons.AddIf(s => !s.Name.Equals("John"), new Person { ... });
----
public static void AddIf(this List<T> lst, Func<T, bool> check, T data)
{
     // how can I use the Func 'check' to check if exist an object with the
     // information that the client wrote and, if not exists, insert the new value
     // into the list???
     if ( check )
} 
```

如何使用 Func 'check' 来检查是否存在具有客户编写的信息的对象，如果不存在，则将新值插入列表中？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-14T06:42:43.697

您需要使您的方法通用。

```
public static void AddIf<T>(this List<T> lst, Func<T, bool> check, T data)
{
    if (!lst.All(check))
        return;

    lst.Add(data);
} 
```

和你想要的用法（所有项目都应该满足谓词）：

```
persons.AddIf(s => !s.Name.Equals("John"), new Person { ... }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T10:02:21.427

快速组合/更改上述答案，并附上一些评论：（我的代表太低，无法简单地评论*脸红*）

因此，根据问题示例中的某些细节：

> 如何使用 Func 'check' 来检查是否存在具有客户编写的信息的对象，如果不存在，则将新值插入列表中？

1）在添加到列表（而不是打开“检查”）之前，我肯定会考虑创建/使用专门用于检查重复项（如前所述，一种常见操作）的通用扩展，所以可能是这样的：

```
public static void AddIfDistinct<T>(this List<T> lst, T data, Func<T, bool> dupeCheck)
{
    if (lst.Any(dupeCheck))
        return;

    lst.Add(data);
} 
```

2）根据要求，在我看来，“任何”在语义上比“全部”更清晰 - 我们正在检查“任何”重复项，而不是检查“所有”当前项目是否“不”重复.. . 这可能听起来微不足道，但我认为可以肯定地说它更明显。这显然意味着你传入的 lambda 看起来像这样（这里的语义变化意味着你真的必须让扩展方法命名好）

```
s => s.Name.Equals("John") 
```

3）最后的评论，如果合适的话，你也可以覆盖你的类上的一些东西，比如“CompareTo”等，并创建一个真正通用的“AddToListIfUnique”等

此外，在您的示例中使用 Expression< Func<...>> 根本没有帮助（正如有人建议的那样），因为您无论如何都在使用 List （只有在使用 IQueryable 等时才值得）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T13:24:05.723

对于您自己的语义，您已经有了一个可以依赖的答案。但对我来说，方法命名越是想起来就越模糊。`AddIf`表示如果有则添加或全部添加？在你的情况下，这就是全部。所以你应该更好地命名它。`AddIfAll`或者其他的东西。

如果某些东西不存在，则添加到列表中是一个常见的要求，我建议您为了您的目的而更加充实（我相信），这使得从调用方更容易。

或许

```
public static bool AddIfNotContains<S, T>(this ICollection<S> lstObject, 
                                          Func<S, T> selector, T valueToMatch,
                                          S objectToAdd)
{
    if (lstObject.Contains(selector, valueToMatch))
        return false;

    lstObject.Add(objectToAdd);
    return true;
} 
```

`Contains`我更喜欢在我的程序中使用的一个小重载：

```
public static bool Contains<S, T>(this IEnumerable<S> lstObject, 
                                  Func<S, T> comparer, T valueToMatch)
{
    return lstObject.Any(s => comparer(s).Equals(valueToMatch));
} 
```

`Equals`这避免了每次从我们这边编写操作符的麻烦。

您可以致电：

```
persons.AddIfNotContains(s => s.Name, "John", new Person { ... }); 
```

我认为这使语法更简单。

## 笔记：

我希望你知道这里的问题。你可以写得很好

```
persons.AddIfNotContains(s => s.Name, "John", new Person { Name = "Serena", .. }); 
```

**即使已经存在同名的人，`Serena`**因为您在这里检查`John`. 如果这对你来说没问题，那就太好了。**如果我正确理解您的问题，更好的实现是**：

```
public static bool AddIfTrulyNotContains<S, T>(this ICollection<S> lstObject, 
                                               Func<S, T> selector, S objectToAdd)
{
    if (lstObject.Contains(selector, selector(objectToAdd)))
        return false;

    lstObject.Add(objectToAdd);
    return true;
} 
```

现在您可以轻松调用：

```
persons.AddIfTrulyNotContains(s => s.Name, new Person { Name = "John", .. }); 
```

`John`如果列表中没有，这只是检查并添加`John`。此外，我已经将返回类型设置`bool`为表示添加。

# asp.net-mvc - ASP.NET Web API - 如何为路由“product/id”和“product?someOtherId=10”创建不同的操作方法

> ID：13374143
> 
> 赞同：0
> 
> 时间：2012-11-14T06:39:58.347
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-web-api, model-binding

使用 Web API，我需要将以下两个 Restful 路由重定向到两个不同的操作方法：

**/products/2** -> 获取产品 id 2 的信息

**/products?someOptionalId=456** -> 获取所有产品的信息。如果提供，请使用 someOptionalId 作为过滤器。

不幸的是，使用标准路由和模型绑定方案，因为两个 URL 都指向同一个**产品控制器**并且有**一个 id 作为参数**，我要么遇到编译时问题，创建两个具有相同 int 参数的 Get 方法，要么运行时问题MVC 无法选择特定的操作方法

**编译时错误**

```
public IQueryable<Product> Get(int someOptionalIdQs)
{

}

public Product Get(int id)
{

} 
```

**运行时错误（注意 hack 为 someOptionalIdQs 使用字符串，然后转换为 int）**

```
public IQueryable<Product> Get(string someOptionalIdQs)
{

}

public Product Get(int id)
{

} 
```

考虑到我希望尽可能保持路由干净，请在理想情况下建议修复，而无需进行任何路由配置更改。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T08:49:29.800

由于您的 Method 有一个可选的 Id 参数，因此您可以简单地将一个可为空的 int 用于集合的 Get。

下面的代码将支持以下网址：

*   http:// 服务器 /api/products
*   http:// 服务器 /api/products?someOptionalIdQs=3
*   http:// 服务器 /api/products/2

**代码示例**

```
public class Product
{
    public string Name { get; set; }
}

public class ProductsController : ApiController
{
    public IQueryable<Product> Get([FromUri] int? someOptionalIdQs = null)
    {
        if(someOptionalIdQs.HasValue)
        {
            //apply the filter
        }
        return new List<Product>().AsQueryable();
    }

    public Product Get(int id)
    {
        return new Product();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T06:56:42.617

使用您的第一种方法，但尝试重命名您的一个 Get 方法。请注意，如果操作名称没有“Get”前缀，请确保使用 [HttpGet] 属性。

```
 // [HttpGet]
    public IQueryable<Product> Get2(int someOptionalIdQs)
    {
    }

    public Product Get(int id)
    {
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T08:55:49.657

您可以做什么可能会查看是否`this.HttpContext.Request.QueryString.AllKeys.Contains("someOptionalIdQs")`根据选项 ID Qs 进行处理，否则您的正常工作流程将起作用。

But this would be a cryptic implementation an ideally you should create a new URL all together for a different work flow for the app.

# php - WordPress插件激活错误：激活期间出现意外输出

> ID：13374144
> 
> 赞同：2
> 
> 时间：2012-11-14T06:39:59.333
> 
> 标签：php, wordpress

该插件在激活期间生成了 880 个字符的意外输出。如果您注意到“标头已发送”消息、联合提要问题或其他问题，请尝试停用或删除此插件。

安装插件时出现此错误，请任何人都可以帮助这里是代码

```
<?php
/*
Plugin Name: Post Bottom Content Generator
Plugin URI: NULL
Description: This will add a image with url at the end of the post content.
Version:  1.0
Author: All Marketing Solutions
Author URI: 
*/
//table creation in the wordpress database
global $AMS_post_plugin_db_version;
$AMS_post_plugin_db_version = "1.0";
function create_AMS_table () 
{
   global $wpdb;
   $table_name = $wpdb->prefix . "AMS_post_plugin";
    $sql = "CREATE TABLE $table_name (
      AMS_post_plugin_id mediumint(9) NOT NULL AUTO_INCREMENT,
      AMS_post_plugin_time datetime DEFAULT '0000-00-00 00:00:00' NOT NULL,
      AMS_post_plugin_name VARCHAR(55) NOT NULL,
      AMS_post_plugin_url VARCHAR(55) NOT NULL,
      AMS_post_plugin_path VARCHAR(200) NOT NULL,
      UNIQUE KEY id (id)
    );";
    require_once(ABSPATH . 'wp-admin/includes/upgrade.php');
    dbDelta($sql);
    add_option("AMS_post_plugin_db_version", $AMS_post_plugin_db_version);
}
function insert_AMS_table() 
{
   global $wpdb;
   $name = "talha";
   $url = "talha";
   $path="talha";
   $rows_affected = $wpdb->insert( $table_name, array( 'AMS_post_plugin_time' => current_time('mysql'), 'AMS_post_plugin_name' => $name, 'AMS_post_plugin_url' => $url, 'AMS_post_plugin_path' => $path ) );
}
///these will activate these functions when plugin install
register_activation_hook(__FILE__,'create_AMS_table');
register_activation_hook(__FILE__,'insert_AMS_table');
?> 
```

# silverlight - 当其 Gris 具有白色背景时，无法显示 MediaElement

> ID：13374148
> 
> 赞同：1
> 
> 时间：2012-11-14T06:40:27.393
> 
> 标签：silverlight, windows-phone-7, background-color, mediaelement

我在VS2010（Windows Phone APP）中写了一个简单的代码：

```
<Grid x:Name="LayoutRoot" Background="White">      
            <MediaElement x:Name="ttt" Source="/Video/2.wmv"/>
</Grid> 
```

当背景设置为“白色”时，无法显示任何内容。但是当背景为“透明”时，我可以看到视频。我尝试使用 Canvas.ZIndex() 来设置 Z 值。但它不起作用。

谁能帮我解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T11:26:41.007

我不确定，但看起来 MediaElement 以某种方式使用父级。这是很好的调查空间。此外，小的谷歌搜索显示其他类似的错误 - [Windows Phone 7: Silverlight MediaElement has a transparent background in emulator](http://connect.microsoft.com/VisualStudio/feedback/details/615386/windows-phone-7-silverlight-mediaelement-has-a-transparent-background-in-emulator)。

关于你的情况。尝试再添加一个容器。类似下一个：

```
<Grid x:Name="LayoutRoot" Background="White">      
      <Grid x:Name="MediaLayout" Background="Transparent"> 
            <MediaElement x:Name="ttt" Source="/Video/2.wmv"/>
       </Grid>
</Grid> 
```

# asp.net - 在 Asp.Net 中通过绑定多个网格视图查看状态与服务器负载

> ID：13374149
> 
> 赞同：0
> 
> 时间：2012-11-14T06:40:30.937
> 
> 标签：asp.net, .net, viewstate

有 3 个网格视图。（一个用搜索功能过滤，另外两个只是数据绑定）

查看所有三个的禁用状态以减少服务器资源。

问题：在第一个网格上执行过滤后，剩下的两个正在丢失其绑定数据。

以下哪些是最佳选择？

1.  为每个页面加载手动绑定剩余的两个网格。
2.  只需为其余两个网格独立启用视图状态。
3.  除 1 和 2 之外的任何其他建议。

# php - 通过 Heroku 为 Facebook 应用程序设置本地环境时出错

> ID：13374152
> 
> 赞同：0
> 
> 时间：2012-11-14T06:40:34.713
> 
> 标签：php, facebook, facebook-graph-api, heroku, facebook-apps

我已经完成了通过 Heroku 在 PHP 中本地开发 Facebook 应用程序所需的所有设置。

但毕竟我得到了这样的错误： ![Facebook SDK 未找到错误](../Images/8de48ae8045081466bc1899c7357b711.png)

我知道错误是因为在 sdk 文件夹中找不到 facebook.php 文件。但问题是如何得到那个。因为我没有从 Heroku 收到任何东西。那么如何得到那个呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T07:50:57.883

当您在 Heroku 服务器上开发时，Heroku 会异步加载 sdk。对于本地开发，您需要`git clone`sdk。您可以在此位置找到 sdk：[https ://github.com/facebook/facebook-php-sdk](https://github.com/facebook/facebook-php-sdk)

将 sdk 克隆到您的应用程序文件夹中，它应该可以正常工作。

# javascript - 如何使工具提示与 ajax 一起使用

> ID：13374153
> 
> 赞同：0
> 
> 时间：2012-11-14T06:40:35.600
> 
> 标签：javascript, ajax, jquery

Q1）我正在使用来自 twitter bootstrap 的工具提示。我只是注意到，当使用 ajax 添加内容时它不起作用。经过大量谷歌搜索后，该解决方案似乎在 ajax 请求后触发了工具提示。但就我而言，这是不可能的，因为我依赖于框架的内置 ajax API。还有其他解决方法吗？

```
$('.tootip').tooltip({placement:'left'}); 
```

Q2) 在 jQuery on() 文档中，用法被提及为

```
$(document).on(event, selector, function(){ //do stuff here }) 
```

所以这是我必须做的吗？

```
$(document).on('ready', '.tootip', tooltip({placement:'left'})); 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T06:46:05.837

A1）您为 ajax 调用提供的选项/参数之一是回调函数，当 ajax 调用完成并成功时触发。这个成功回调应该初始化工具提示。
例如，如果您使用 jQuery：

```
$.ajax({
    url: 'your url'
    success: function(result) {
        // do your sruff here. Result holds the return data of the ajax call
    }
}); 
```

A2) 查看第三个参数：`function(){ //do stuff here }`. 你必须提供一个功能。相反，您提供的是调用函数的结果`tooltip({placement:'left'})`，在这种情况下返回一个对象而不是函数。你应该做：

```
$(document).on('ready', '.tootip', function() {
    $('.tootip').tooltip({placement:'left'}); 
}); 
```

**关于您的评论的更新：**
在函数内部，无论是成功回调还是事件函数，您都可以做任何您喜欢的事情，包括调用多个函数：

```
$(document).on('ready', '.tootip', function() {
    // Do many operations as much as you like here
    func1();
    func2();
});

$.ajax({
    url: 'your url'
    success: function(result) {
        // Do many operations as much as you like here
        func1();
        func2();
    }
}); 
```

希望这可以帮助！

# qt - 网络协议实现，如 QNAM，延迟处理请求

> ID：13374156
> 
> 赞同：1
> 
> 时间：2012-11-14T06:41:09.773
> 
> 标签：qt, qt4

我需要实现通过 tcp 工作的网络协议，该协议基本上可以通过以下方式工作：有推送的请求和读取的答案（只有一方可以发起请求）。我确实想以 QNetworkAccessManager 之类的方式实现它：当发送“requestst”时，QNAM 返回一个回复指针，一旦请求得到处理 - 有一个信号，结果可以从“reply”对象中使用。我确实想要在没有多线程的情况下实现它。

接下来的主要问题是：

如果套接字未连接，我有 3 个选项：1）返回错误（返回空指针以回复对象就像返回错误）2）从“sendRequest”内部发出“完成”（这是最邪恶的方法）3）返回“回复" 来自“sendRequest”，然后发出请求失败的信号。（最想要的）

我真的很喜欢 3-rd 选项，但我现在看到的唯一方法是使用带有 1 ms 单次调用的计时器 - 这基本上看起来像是实现此类事情的错误路径，我怎样才能延迟执行插槽（通过传递一些参数，例如饼干请求）？如果有一种方法可以延迟发送请求（例如将请求推送到队列，使用“回复”对象从调用返回，然后通过网络发送实际请求），那就太好了。所有这些看起来都像是在处理事件——但我不确定如何最好地处理这个主题。实施此类协议的最佳实践是什么？有什么建议吗？

# c++ - 另一个基本的 VBO 设置

> ID：13374157
> 
> 赞同：3
> 
> 时间：2012-11-14T06:41:13.653
> 
> 标签：c++, opengl, glut, vbo, glew

我正在尝试使用带有 GLUT 和 Glew 的 VBO 渲染立方体。我检查了我的进步，我正在交换我的缓冲区，我在 GLUT 初始化后初始化 VBO，我（据我所知）使用正确的数据类型。我的代码大致遵循[本教程](http://sdickinson.com/wordpress/?p=122)。

我的代码的相关部分：

```
//main.cpp
#include <iostream>
#include "include.h"
#include "terrain.h"
#include <math.h>

#define NULL 0

float angle = 0.0f;
float lx = 0.0f, lz = -1.0f;
float x = 0.0f, z = 5.0f;

GLuint vboID;
GLuint indexVBOID;

void render() {
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    glLoadIdentity();
    gluLookAt(x, 1.0f, z, x + lx, 1.0f, z+lz, 0.0f, 1.0f, 0.0f);

    glPushMatrix();

    glBindBuffer(GL_ARRAY_BUFFER, vboID);
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, indexVBOID);

    glEnableClientState(GL_TEXTURE_COORD_ARRAY);
    glEnableClientState(GL_COLOR_ARRAY);
    glEnableClientState(GL_NORMAL_ARRAY);
    glEnableClientState(GL_VERTEX_ARRAY);

    glTexCoordPointer(2, GL_FLOAT, sizeof(Vertex), BUFFER_OFFSET(3*sizeof(GLfloat)));
    glNormalPointer(GL_FLOAT, sizeof(Vertex), BUFFER_OFFSET(5*sizeof(GLfloat)));
    glColorPointer(4, GL_FLOAT, sizeof(Vertex), BUFFER_OFFSET(8*sizeof(GLfloat)));
    glVertexPointer(3, GL_FLOAT, sizeof(Vertex), BUFFER_OFFSET(0));

    glDrawElements(GL_TRIANGLES, 36, GL_UNSIGNED_BYTE, BUFFER_OFFSET(0));

    glDisableClientState(GL_TEXTURE_COORD_ARRAY);
    glDisableClientState(GL_COLOR_ARRAY);
    glDisableClientState(GL_NORMAL_ARRAY);
    glDisableClientState(GL_VERTEX_ARRAY);

    glPopMatrix();      

    glutSwapBuffers();

    //std::cout << glGetError();
}

void resize(int w, int h) {
    if(h == 0)
        h = 1;

    float ratio = 1.0*w/h;
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glViewport(0, 0, w, h);
    gluPerspective(45, ratio, 1, 1000);
    glMatrixMode(GL_MODELVIEW);
}

void processKeys(unsigned char key, int x, int y) {

}

void specialKeys(int key, int x, int y) {
        float fraction = 0.1f;

    switch(key) {
    case GLUT_KEY_LEFT:
        angle -= 0.01f;
        lx = sin(angle);
        lz = -cos(angle);
        break;

    case GLUT_KEY_RIGHT:
        angle += 0.01f;
        lx = sin(angle);
        lz = -cos(angle);
        break;

    case GLUT_KEY_UP:
        x += lx * fraction;
        z += lz * fraction;
        break;

    case GLUT_KEY_DOWN:
        x -= lx * fraction;
        z -= lz * fraction;
        break;
    }
}

void initVBO() {
    glGenBuffers(1, &vboID);
    glBindBuffer(GL_ARRAY_BUFFER, vboID);

    glBufferData(GL_ARRAY_BUFFER, sizeof(Vertex)*24, NULL, GL_STATIC_DRAW);
    glBufferSubData(GL_ARRAY_BUFFER, 0, sizeof(Vertex)*24, &cube[0]);

    glTexCoordPointer(2, GL_FLOAT, sizeof(Vertex), BUFFER_OFFSET(3*sizeof(GLfloat)));
    glNormalPointer(GL_FLOAT, sizeof(Vertex), BUFFER_OFFSET(5*sizeof(GLfloat)));
    glColorPointer(4, GL_FLOAT, sizeof(Vertex), BUFFER_OFFSET(8*sizeof(GLfloat)));
    glVertexPointer(3, GL_FLOAT, sizeof(Vertex), BUFFER_OFFSET(0));

    glGenBuffers(1, &indexVBOID);
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, indexVBOID);
    glBufferData(GL_ELEMENT_ARRAY_BUFFER, 36*sizeof(GLubyte), &cubeIndex[0], GL_STATIC_DRAW);
}

int main(int argc, char** argv) {
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_DEPTH | GLUT_DOUBLE | GLUT_RGBA);
    glutInitWindowPosition(0, 0);
    glutInitWindowSize(1000, 600);
    glutCreateWindow("FC");

    //glew initialization
    glewInit();
    glClearColor(0.0f, 0.0f, 0.0f, 1.0f);
    glEnable(GL_DEPTH_TEST);
    glShadeModel(GL_FLAT);

    initializeCube();
    initVBO();

    glutDisplayFunc(render);
    glutReshapeFunc(resize);
    glutIdleFunc(render);

    glutKeyboardFunc(processKeys);
    glutSpecialFunc(specialKeys);

    glDisable(GL_TEXTURE_2D);

    glutMainLoop();

    return 1;
} 
```

Terrain.cpp 只是初始化立方体的数据：

```
//terrain.h
#ifndef _TERRAIN_
#define _TERRAIN_

#include "include.h"

#define BUFFER_OFFSET(i) ((char *)NULL + (i))

// Location/Normals
#define X_POS 0
#define Y_POS 1
#define Z_POS 2
// Texture Coordinates
#define U_POS 0
#define V_POS 1
// colors
#define R_POS 0
#define G_POS 1
#define B_POS 2
#define A_POS 3

const GLfloat cubeSize = 1.0f;

typedef struct Vertex {
    GLfloat location[3];
    GLfloat tex[2];
    GLfloat normal[3];
    GLfloat color[4];
    GLubyte padding[16];
} Vertex;

static Vertex cube[24];
static GLubyte cubeIndex[36];

void pushVertex(Vertex* toPush, GLfloat x, GLfloat y, GLfloat z);

void pushNormal(Vertex* toPush, GLfloat x, GLfloat y, GLfloat z);

void pushTexCoord(Vertex* toPush, GLfloat u, GLfloat v);

void pushTriangleIndices(GLubyte index[], int triangleNum, GLubyte a, GLubyte b, GLubyte c);

void initializeCube();

#endif 
```

最后：

```
#ifndef __INCLUDE__
#define __INCLUDE__

#include <GL/glew.h>
#include <GL/glut.h>

#endif 
```

如果有人想看terrain.cpp，我会发布它。

据我所知，根本没有渲染。如果我尝试以立即模式渲染，它工作得很好。而且，如果有任何帮助，我尝试逐字复制教程的代码（为 Glew 添加几行，因为作者最初是在没有 Glew 的情况下编写的），结果是白屏，即使在将屏幕清除为黑色之后也是如此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T23:56:45.810

根本没有渲染是一个常见问题。不幸的是，我不知道你的程序到底出了什么问题，但这里有一个我经常发现有用的调试策略。尝试在立即模式下渲染单个三角形，而不是使用 VBO。如果您不熟悉该术语，立即模式的意思是`glVertex3f`.

如果您可以使三角形以立即模式出现，那么您的问题很可能与 VBO 有关。如果不能，那么您可以将矩阵中的潜在问题或您配置 OpenGL 上下文的方式归零。

顺便说一句，我建议从固定功能管道（`glVertexPointer`等）切换到 GLSL 着色器。一开始看起来很吓人，但它非常灵活。而一旦你深入其中，你会发现它其实比极其挑剔和不透明的固定函数管道更直观。

# mvvm - this.VerifyPropertyName(propertyName); 在 OnPropertyChanged() 中总是返回 null

> ID：13374158
> 
> 赞同：0
> 
> 时间：2012-11-14T06:41:16.170
> 
> 标签：mvvm

我有一个 xaml 代码，如下所示： 在 MouseLeftButtonDown 上，我将其重定向到颜色 GenerateGlowEffect 必须更改的 viewModel。这没有反映。对于 this.PropertyChanged XAML，它始终返回 null：

```
<UserControl
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
        xmlns:ed="http://schemas.microsoft.com/expression/2010/drawing"

xmlns:telerikDocking="clr-namespace:Telerik.Windows.Controls;assembly=Telerik.Windows.Controls.Docking"
xmlns:Telerik_Windows_Controls="clr-namespace:Telerik.Windows.Controls;assembly=Telerik.Windows.Controls"
xmlns:System="clr-namespace:System;assembly=mscorlib" x:Class="TabItemContents.MapDetail"

mc:Ignorable="d"  Width="Auto" Height="430.333">

<Grid x:Name="LayoutRoot" Background="{StaticResource TabControlActiveAreaColor}" Height="430.333" VerticalAlignment="Top" HorizontalAlignment="Left">        
<Grid.RowDefinitions>
<RowDefinition Height="192.833"/>
<RowDefinition/>
</Grid.RowDefinitions>
<Grid.ColumnDefinitions>
<ColumnDefinition/>
</Grid.ColumnDefinitions>
    <Rectangle IsHitTestVisible="True"    x:Name="Rectangle_Generate"  Margin="25.334,70.167,0,65.333"  Cursor="{DynamicResource HandCursor}"  RadiusX="10" RadiusY="10" HorizontalAlignment="Left" Width="88.5" StrokeThickness="1.5" d:LayoutOverrides="HorizontalAlignment" MouseLeftButtonDown="Rectangle_Generate_MouseLeftButtonDown" >        
            <Rectangle.Fill>
                <SolidColorBrush Color="{DynamicResource RectangleColor}"/>
            </Rectangle.Fill>
            <Rectangle.Effect >
                <DropShadowEffect RenderingBias="Quality" BlurRadius="{DynamicResource BlurRadius}" ShadowDepth="0"  Color="{Binding GenerateGlowEffect}"   />      
            </Rectangle.Effect>
        </Rectangle>

</Grid> 
```

代码隐藏：

```
public partial class MapDetail : UserControl
{
    ViewModel ViewModelObject;
    public MapDetail()
    {
        InitializeComponent();
        ViewModelObject= new ViewModelObject((IUnityContainer)Application.Current.Properties["UnityContainer"]);
    }

    private void Rectangle_Generate_MouseLeftButtonDown(object sender, System.Windows.Input.MouseButtonEventArgs e)
    {
        ViewModelObject.SetColor();
    }

} 
```

视图模型：

```
public class ViewModel : ViewModelBase
{

    private IUnityContainer _unityContainer;
    private ILogger _logger;
    private Model model;
private string _generateGlowEffect; 

    public ViewModel(IUnityContainer unityContainer)
    {

        _unityContainer = unityContainer;

        try
        {
    model = new Model(unityContainer);

        }
        catch (Exception ex)
        {
            throw ex;
        }

    }
public void SetColor()
{
GenerateGlowEffect = "White";
}
public string GenerateGlowEffect
{
get { return _generateGlowEffect; }
set {
_generateGlowEffect = value;
OnPropertyChanged("GenerateGlowEffect");
}
}

}
}
public string GenerateGlowEffect
    {
        get { return _generateGlowEffect; }
        set {
            _generateGlowEffect = value;
            OnPropertyChanged("GenerateGlowEffect");
        }
    } 
```

视图模型库：

```
public class ViewModelBase : INotifyPropertyChanged, IDisposable
{
    #region Constructor

    protected ViewModelBase()
    {
    }

    #endregion // Constructor

    #region DisplayName

    /// <summary>
    /// Returns the user-friendly name of this object.
    /// Child classes can set this property to a new value,
    /// or override it to determine the value on-demand.
    /// </summary>
    public virtual string DisplayName { get; protected set; }

    #endregion // DisplayName

    #region Debugging Aides

    /// <summary>
    /// Warns the developer if this object does not have
    /// a public property with the specified name. This 
    /// method does not exist in a Release build.
    /// </summary>
    [Conditional("DEBUG")]
    [DebuggerStepThrough]
    public void VerifyPropertyName(string propertyName)
    {
        // Verify that the property name matches a real,  
        // public, instance property on this object.
        if (TypeDescriptor.GetProperties(this)[propertyName] == null)
        {
            string msg = "Invalid property name: " + propertyName;

            if (this.ThrowOnInvalidPropertyName)
                throw new Exception(msg);
            else
                Debug.Fail(msg);
        }
    }

    /// <summary>
    /// Returns whether an exception is thrown, or if a Debug.Fail() is used
    /// when an invalid property name is passed to the VerifyPropertyName method.
    /// The default value is false, but subclasses used by unit tests might 
    /// override this property's getter to return true.
    /// </summary>
    protected virtual bool ThrowOnInvalidPropertyName { get; private set; }

    #endregion // Debugging Aides

    #region INotifyPropertyChanged Members

    /// <summary>
    /// Raised when a property on this object has a new value.
    /// </summary>
    public event PropertyChangedEventHandler PropertyChanged;

    /// <summary>
    /// Raises this object's PropertyChanged event.
    /// </summary>
    /// <param name="propertyName">The property that has a new value.</param>
    protected virtual void OnPropertyChanged(string propertyName)
    {
        this.VerifyPropertyName(propertyName);

        PropertyChangedEventHandler handler = this.PropertyChanged;
        if (handler != null)
        {
            var e = new PropertyChangedEventArgs(propertyName);
            handler(this, e);
        }
    }

    #endregion // INotifyPropertyChanged Members

    #region IDisposable Members

    /// <summary>
    /// Invoked when this object is being removed from the application
    /// and will be subject to garbage collection.
    /// </summary>
    public void Dispose()
    {
        this.OnDispose();
    }

    /// <summary>
    /// Child classes can override this method to perform 
    /// clean-up logic, such as removing event handlers.
    /// </summary>
    protected virtual void OnDispose()
    {
    }

    #endregion // IDisposable Members

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T07:50:15.683

如果`this.PropertyChanged`是`null`，则表示您的 XAML 未绑定到该属性。您需要设置，`DataContext`否则 WPF 引擎不知道要绑定什么。

```
public MapDetail()
{
    InitializeComponent();
    this.ViewModelObject= new VViewModelObject((IUnityContainer)Application.Current.Properties["UnityContainer"]);
    this.DataContext = this.ViewModelObject;
} 
```

# javascript - 单击以使用 jquery 滚动顶部一些像素

> ID：13374160
> 
> 赞同：0
> 
> 时间：2012-11-14T06:41:18.783
> 
> 标签：javascript, jquery, html, css

我尝试在同一页面中加载特定位置。但问题是，标题固定在顶部位置，当我单击链接时，标题位于标题后面。所以我无法显示一些内容。请访问这个[**小提琴**](http://jsfiddle.net/mnuWN/11/)。你可以理解我想表达的意思。我不喜欢添加`padding`and `margin`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T07:17:16.253

您可能想要更改您的`HTML`. `id`每页只能有一个。

在给定的小提琴中，你有一个重复的`<div id="one">`

现在，要让滚动工作，您可以执行以下操作：

```
$(document).ready(function(){
    $("a").click(function(e) {
        e.preventDefault();
        var hash = $(this).attr("href");
        //console.log($(hash).position().top);
        $('html, body').animate({ scrollTop: $(hash).position().top - 50 }, 200);

    });
}); 
```

这里`$(hash).position().top`获取`div`页面上的位置，然后从中减去 50（固定 div 的高度）。

这是一个[小提琴](http://jsfiddle.net/mnuWN/21/) ​</p>

# php - 我需要使用 javascript 而不是 PHP 代码来重定向到其他页面

> ID：13374163
> 
> 赞同：-2
> 
> 时间：2012-11-14T06:41:36.213
> 
> 标签：php, javascript

假设我有如下代码：

```
<?php 
    include ('include/connectdb.php');
    if(isset($_POST['tbn_submit'])){
        $username = $_POST['text_username'];
        $password = $_POST['text_password'];
        $query = "SELECT * FROM tblusers WHERE `user_username`='".$username."' AND user_password='".$password."'";
        $res = mysql_query($query) or die (mysql_error());
        if($res){
            if(mysql_num_rows($res)){
                $user = mysql_fetch_assoc($res);
                if($user['user_possition'] == "Admin"){
                    echo '<script type="text/javascript">window.location = "view_form.php"</script>';
                }
                else if($user['user_possition'] == "User"){
                    header("location:view_edit_uid.php?uid=".$user['user_id']);
                    //in this point I need to use javascript instead of php code but I do not know how to write it
                }                                       
                else if($user['user_possition'] == "R1"){
                    echo '<script type="text/javascript">window.location = "view_form_res1.php"</script>';
                }
                else if($user['user_possition'] == "R2"){
                    echo '<script type="text/javascript">window.location = "view_form_res2.php"</script>';
                }                               
            } 
            else {
                echo '<tr><td colspan="2"><center><b style="color:red;">Invalide username or password, please check again!</b></center></td></tr>';             
            }
        } 
    }
?> 
```

**问题**

我需要`$user['user_id']`在 javascript 中使用

```
`echo '<script type="text/javascript">window.location = "view_edit_uid.php?uid=".$user['user_id']</script>';` 
```

但它不起作用，因为它不知道`$user['user_id']`javascript，那么我该如何解决这个问题？

请任何人帮助我，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T06:44:07.733

您必须像任何 PHP 变量一样回显它。

```
<script type="text/javascript">
  window.location = "view_edit_uid.php?uid=<?php echo $user['user_id']; ?>";
</script> 
```

或者使用 PHP 专门重定向...您必须在发送任何其他标头之前执行此操作。

```
header( 'Location: view_edit_uid.php?uid=' . $user['user_id'] ) ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T06:53:51.327

```
echo '<script type="text/javascript">window.location = "view_edit_uid.php?uid='.$user['user_id'].'";</script>'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T06:48:43.147

```
echo '<script type="text/javascript">window.location = "view_edit_uid.php?uid='.$user['user_id'].'"</script>'; 
```

你遗漏了一些“和”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T06:50:29.353

是的，您可以使用`window.location`

```
else if($user['user_possition'] == "User"){
    //header("location:view_edit_uid.php?uid=".$user['user_id']);
    echo '<script type="text/javascript">window.location = "view_edit_uid.php?uid='.$user['user_id'].'"</script>';
} 
```

# javascript - Twitter Bootstrap Radio Toggle - 适用于除 IE9 以外的所有浏览器

> ID：13374165
> 
> 赞同：1
> 
> 时间：2012-11-14T06:41:50.550
> 
> 标签：javascript, twitter-bootstrap, radio-button, internet-explorer-9

为 twitter bootstrap 以及本示例中的 html 和 js 处理一些单选按钮效果很好：

```
<div class="btn-group" data-toggle="buttons-radio" >
  <button type="button" class="btn" data-toggle="button">
    Public
    <input type="radio" name="is_private" value="0" />
  </button>
  <button type="button" class="btn" data-toggle="button">
    Private
    <input type="radio" name="is_private" value="1" />
  </button>
</div>​

$('div.btn-group button').click(function(){
    alert($(this).children('input[name="is_private"]').val());
})​ 
```

[http://jsfiddle.net/XYEjs/31/](http://jsfiddle.net/XYEjs/31/)

问题是我不能让这个例子（或者我的代码，就此而言）在 IE9 中工作。它不返回值，而是返回“未定义”。

此示例似乎在所有其他浏览器（或至少我尝试过的所有浏览器...Chrome、Safari、Firefox）中都能正常工作（意味着它返回在 html 中分配的值）......甚至在 IE8 和 IE10 中也能正常工作。

它只是在 IE9 中不起作用。想法？

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-04T15:17:31.837

也许这有点晚了，但我刚刚遇到了同样的问题。问题是 IE9 显然不喜欢按钮内的输入。我刚刚用 s 替换了按钮，它可以工作。花了一整天的时间在那个愚蠢的事情上。

```
<a href="#" class="btn btn-default" data-toggle="buttons">
    Public
    <input type="radio" name="is_private" value="0" />
</a> 
```

# python - 在小部件中存储自定义信息，gobject-introspect

> ID：13374170
> 
> 赞同：1
> 
> 时间：2012-11-14T06:42:07.827
> 
> 标签：python, gtk, gobject-introspection

有没有办法用小部件存储自定义信息？

例如，假设我有一个包含 20 个网址的列表。

我创建了 20 个按钮，每个 url 一个。

我想这样做，所以当我单击一个按钮时，会打开一个 url。但是我需要一种方法来知道哪个按钮链接到哪个 url，所以当按钮被点击时，我可以将 url 传递给事件处理函数来打开它。

我想到的另一个解决方案是创建一个扩展 Gtk.Button 类的自定义类，就像这样

```
class MyButton(Gtk.Button)
    def __init__(self, url):
        Gtk.Button.__init__(self)
        self.url = url
        ... 
```

然后我可以简单地做 button = MyButton(url)

但这似乎有点矫枉过正。所以我想知道我是否可以在小部件本身上存储自定义信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T07:30:01.180

最简单的解决方案是将 URL 添加为传递给`clicked`信号处理程序的附加数据：

```
# handle_click will receive additional url arg along with the button
button.connect('clicked', handle_click, url) 
```

在 PyGTK 中，您还可以通过分配给小部件来向小部件添加任何属性，即使没有子类化：

```
# handle_click will be called with button and can access button.url
button.url = url
button.connect('clicked', handle_click) 
```

# java - Java（正则表达式？）在数字/字母组合之间拆分字符串

> ID：13374171
> 
> 赞同：7
> 
> 时间：2012-11-14T06:42:10.357
> 
> 标签：java, regex, string, split, explode

我一直在浏览 Google 结果的页面和页面，但没有发现任何可以帮助我的东西。

我想要做的是拆分一个字符串，如`Bananas22Apples496Pears3`，并将其分解为某种可读格式。由于`String.split()`无法做到这一点，我想知道是否有人可以将我指向一个可以完成此操作的正则表达式片段。

扩展一点：上面的字符串将被拆分为（`String[]`为简单起见）：

```
{"Bananas:22", "Apples:496", "Pears:3"} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T07:01:21.627

试试这个

```
String s = "Bananas22Apples496Pears3";

String[] res = s.replaceAll("(?<=\\p{L})(?=\\d)", ":").split("(?<=\\d)(?=\\p{L})");
    for (String t : res) {
        System.out.println(t);
    } 
```

第一步是用“：”替换空字符串，左侧是带有后[向断言](http://www.regular-expressions.info/lookaround.html) `(?<=\\p{L})`的字母，右侧是带有[前瞻断言](http://www.regular-expressions.info/lookaround.html) `(?=\\d)`的数字。

然后拆分结果，左边是数字，右边是字母。

`\\p{L}`是一个[Unicode 属性](http://www.regular-expressions.info/unicode.html#prop)，它匹配每种语言中的每个字母。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T06:50:50.333

你需要`Replace`然后`split`字符串。你不能单独使用拆分

**1>** `Replace All`具有以下正则表达式的字符串

```
(\\w+?)(\\d+) 
```

并将其替换为

```
$1:$2 
```

**2>**现在`Split`用这个正则表达式

```
(?<=\\d)(?=[a-zA-Z]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T07:07:37.703

这应该做你想要的：

```
import java.util.regex.*;

String d = "Bananas22Apples496Pears3"

Pattern p = Pattern.compile("[A-Za-z]+|[0-9]+");

Matcher m = p.matcher(d);

while (m.find()) {
      System.out.println(m.group());
}

// Bananas
// 22
// Apples
// 496
// Pears
// 3 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T06:51:11.503

替换`\d+`为`:$0`，然后在 处拆分`(?=[a-zA-Z]+:\d+)`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T07:29:31.390

```
String myText = "Bananas22Apples496Pears3";
System.out.println(myText.replaceAll("([A-Za-z]+)([0-9]+)", "$1:$2,")); 
```

# google-chrome-extension - 我可以在我的网站上托管 google chrome 扩展程序吗

> ID：13374173
> 
> 赞同：0
> 
> 时间：2012-11-14T06:42:26.407
> 
> 标签：google-chrome-extension, browser-extension

我为我的网站创建了一个 Google chrome 扩展程序。当我在浏览器上运行我的网页时，我需要自动安装此扩展程序。我想将打包的扩展程序放在我自己的站点中。是否可以在我自己的站点中托管我的扩展程序。请告诉我如何在运行页面时自动安装该扩展程序，以及如何在我自己的服务器中托管。

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T06:55:18.797

您应该使用[内联安装](https://developers.google.com/chrome/web-store/docs/inline_installation)让用户轻松安装您的应用程序。

您可以创建一个简单的弹出窗口，使用以下代码重定向到该站点

```
<div id="p2r_addon_inst" class="myclass">
    <div id="chrome_info" style="display: block; top: 0px;">
        <div id="addon_install_icon"></div>
        <span id="addon_install_message">Chrome extension is available for this site <a href="your link">More info...</a> </span>
        <div id="addon_install_buttonblock">
            <div id="addon_install_remove"></div>
            <button id="addon_install_extinstallbutton">Install</button>
            <button id="addon_install_dontaskagain">Don't ask again</button>
        </div>
    </div>
</div> 
```

而CSS是

```
.myclass{
position: absolute;
left: 0;
top: 0;
width: 100%;
overflow: visible;
z-index: 999;
} 
```

# asp.net - 在 GridView 中使用 HyperLinkField 将日期值从一页传递到另一页

> ID：13374175
> 
> 赞同：2
> 
> 时间：2012-11-14T06:42:40.207
> 
> 标签：asp.net, hyperlink

我在将日期值从`GridView`生成的页面传递`HyperLinkField`到另一个页面时遇到问题。通过一些搜索，我相信我使用了正确的语法来生成链接，但是每当我尝试将 a 绑定`date`到`DataNavigateUrlFields`属性时，它都不会创建超链接。我使用的方法在传递其他字段时确实有效。

这是我正在使用的代码。

```
<asp:HyperLinkField 
     DataNavigateUrlFields="DATE_REF,STUDENT_ID,ASSIGN_ID"
     DataNavigateUrlFormatString="Edit.aspx?DATE_REF={0}&STUDENT_ID={1}&ASSIGN_ID={2}"
     HeaderText="Edit" 
     Text="&lt;img src='/Images/edit.png' alt='Update' border='0'/&gt;" /> 
```

我怎么能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T06:55:59.667

尝试使用日期格式字符串`{0:d}`，

```
 DataNavigateUrlFormatString="Edit.aspx?DATE_REF={0:d}&STUDENT_ID={1}&ASSIGN_ID={2}" 
```

[来源](http://go4answers.webhost4life.com/Example/datanavigateurlformatstring-date-105982.aspx)

# iphone - 我在哪里可以下载 StoreKit.framework

> ID：13374180
> 
> 赞同：2
> 
> 时间：2012-11-14T06:43:10.167
> 
> 标签：iphone, ios, cordova

我正在尝试在应用购买插件中实现 ios phonegap。

我需要将 storekit.Framework 添加到 xcode 项目但找不到。

我用谷歌搜索了 storekit.Framework 但我发现的所有信息都是如何使用它以及 storekit 关于什么

但不是它在哪里。谁能告诉我应该去哪里下载 storekitFramework？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T06:50:16.523

它是 iOS 中可用的标准框架。要使用它，只需

*   选择您的项目
*   选择你的目标
*   选择构建阶段
*   在将二进制文件与库链接中，单击 +
*   搜索 StoreKit 并添加

在您的课程中导入框架。

![截屏](../Images/c35021e9d135110d250134f60b543f18.png) ![截图2](../Images/ddd45a3242b7432cdbdbeb991f36ed7c.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T06:48:04.677

StoreKit.Framework 已经包含在所有 iOS SDK 3.0 以上的版本中，因此无需下载。

要将其添加到您的项目中，只需单击 Xcode 左侧面板（靠近顶部）上的项目名称，然后再次单击您的项目名称，在现在第二个到左手面板的“目标”部分下。现在单击窗口顶部附近的“Build Phases”，然后展开“Link Binary With Libraries”。

现在只需点击左下角的“+”，找到 StoreKit.Framework，然后单击添加。应该这样做！

# mysql - 用于从多个产品表中获取产品的 mysql 存储过程

> ID：13374184
> 
> 赞同：-2
> 
> 时间：2012-11-14T06:43:32.390
> 
> 标签：mysql, stored-procedures

我有多个产品表（彼此不相关）。所有产品表都有一些前缀，如

```
computer_products
kitchen_products
..... so on 
```

我所有的前缀都在一个单独的表中。我必须从所有表中获取产品。

我知道我可以使用存储过程，但我是 mysql 查询和存储过程的新手。我正在努力学习，但这是紧急的事情。

为它制作存储过程有什么帮助吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T07:39:12.623

您需要这样的查询-

```
SELECT col1, col2 FROM computer_products
UNION
SELECT col1, col2 FROM kitchen_products 
```

您可以使用此查询生成它 -

```
SELECT
  GROUP_CONCAT(CONCAT('SELECT col1, col2 FROM ', table_name) SEPARATOR ' UNION ')
  INTO @sql
FROM
  information_schema.tables
WHERE
  table_schema = '<database name>' -- spcecify <database name>
  AND table_name LIKE '%_products'; 
```

此查询将构建 SELECT 查询并将其传递给`@sql`变量。

然后使用[准备好的语句](http://dev.mysql.com/doc/refman/5.1/en/sql-syntax-prepared-statements.html)执行它。

# java - java：如何创建访问所有接口对象的类

> ID：13374189
> 
> 赞同：0
> 
> 时间：2012-11-14T06:44:01.140
> 
> 标签：java, class, methods, interface

我正在使用 Java，我有这个层次结构

```
class Seq

class For extends Seq

interface SeqIt

Class ForIt implements SeqIt 
```

并`ForIt`有一个构造函数： `public ForIt( For x ) //takes For objects`

到目前为止，一切正常。现在我想创建一个名为的新类`FU`，它可以访问`ForIt`我创建的任何对象。并且这个`FU`类必须有一个带有这个签名的方法`public static int sum1(For MyFor)` 例如，如果 ForIt 对象里面有一个名为 myArr 的数组。此方法 sum1 应该返回 MyFor 对象内的数组 myArr 的所有元素的总和

我怎样才能创建这个类`FU`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T07:26:55.060

我能想到的两种方法是：

*   每次创建`ForIt`类时，将其添加到`FU`类中 - 完成后，调用 sum 方法
*   让`ForIt`类构造函数调用类的静态方法，`FU`让它知道`ForIt`创建了一个新方法

我个人会使用选项 1，因为它避免了使用起来很痛苦的静态变量。选项 2 适用于简单的用例。

```
//not thread safe
class FU {
    private final List<ForIt> list = new ArrayList<> ();
    private int sum = 0;

    void add(ForIt fi) {
        list.add(fi);
        sum += fi.getValue();
    }

    int sum() {
        return sum;
    }
} 
```

选项 1 相当简单（创建一个`FU`对象，每次创建`ForIt`实例时，将其添加到`FU`对象中）。
选项 2：

```
class ForIt {
    private static final FU fu = new FU();

    ForIt() {
        fu.add(this);
    }

    static int sum() {
        return fu.sum();
    } 
}

public static void main(String... args) {
    new ForIt();
    new ForIt();
    System.out.println(ForIt.sum());
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-14T06:59:02.657

根据您的描述，您可以将 ForIt 作为 FU 类中的实例变量，如下所示：

```
public class FU {
    public ForIt forit; // Now you have access to ForIt object

    public static int sum1(For MyFor) {
         // Iterate array in ForIt instance
         FU fu = new FU();
         for (int something: fu.forit.myArr){
                ...........
         }
         ........
    }

} 
```

# cruisecontrol.net - DotCover 2.1 与 CCNet 的 NCover

> ID：13374195
> 
> 赞同：0
> 
> 时间：2012-11-14T06:44:54.063
> 
> 标签：cruisecontrol.net, ncover, dotcover

我正在尝试确定要与 CruiseControl.NET 持续集成服务器一起使用的代码覆盖率工具。哪个是更好的工具：DotCover 2.1 还是 NCover 4.0？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T18:37:29.460

我认为这些工具提供的指标是您应该考虑的地方，如果这只是针对 CruiseControl.NET 而不是在 Visual Studio 中使用，因为总的来说它们在其他领域都做得很好。如果不是这种情况，您可能想编辑您的问题以阐明您的要求，因为例如 dotCover 具有更好的 ReSharper 集成。

在指标主题上，dotCover 仅提供语句级覆盖，而 NCover 提供序列点、分支和方法覆盖，以及循环复杂性、变更风险反模式 (CRAP) 和其他几个指标。

如果您有一个庞大而复杂的代码库，那么额外的指标可能会很有用，但如果您只是想大致了解涵盖的内容和未涵盖的内容，那么语句覆盖范围仍然会给您。如果您有复杂的代码，分支覆盖将更有用，因为它可以更容易地找到具有最多未覆盖分支的代码区域，这些区域通常是更复杂的代码。

NCover 博客有一篇关于所有这些指标之间差异的好[文章。](http://blog.ncover.com/understanding-branch-coverage/)

# opengl - 带偏移的变换反馈

> ID：13374196
> 
> 赞同：1
> 
> 时间：2012-11-14T06:45:03.570
> 
> 标签：opengl, glsl

我有一个转换反馈设置，它工作正常。它有 1000 个顶点的输入并反馈相同数量的顶点。

[http://prideout.net/blog/?p=67](http://prideout.net/blog/?p=67)是我们实现的参考。现在作为优化的一部分，我需要使用偏移量来限制反馈顶点数。意味着我应该能够渲染最后 500 个顶点并将其反馈到反馈缓冲区中的位置 500 - 1000。我们考虑过设置多个 VBO，但我们认为这可能会影响性能，因为我们需要不断更改绑定缓冲区。请建议完成此操作的最佳方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T07:06:50.237

通过具有多个缓冲区对象设置。性能命中与否，这就是它的完成方式。

# php - 将 CSS、js 和图像添加到 CodeIgniter 项目

> ID：13374198
> 
> 赞同：0
> 
> 时间：2012-11-14T06:45:23.093
> 
> 标签：php, codeigniter

我最近使用 CodeIgniter 开始了一个新项目。这是一个包含多个 CSS、js 和图像文件的大型项目。所以我需要知道CodeIgniter是否有能力自动读取所有的CSS和js文件并包含在页面中？我很难手动添加所有这些文件。如果有可能，那怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T08:08:09.283

用这样的函数制作一个助手：

```
function include_javascript()
{
    $dir = "JS_DIR";
    if($handle = opendir($dir))
    {
        while(false !== ($entry = readdir($handle)))
        {
            if($entry != "." && $entry != "..")
            {
                $extension = explode(".", $entry);

                if(end($extension) == "JS" || end($extension) == "js")
                {
                    // Include file
                    echo '<script type="text/javascript" src="'.site_url($dir."/".$entry).'"></script>';
                }
            }
        }
        closedir($handle);
    }
} 
```

那么在你看来：

```
<?php include_javascript(); ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T07:26:41.920

是的，你可以在 codeIgniter 中做到这一点。您需要做的是在 codeIgniter（CSS 文件夹、JS 文件夹和图像文件夹）中的应用程序文件夹之外创建新文件夹。您只需将所有这些文件保存在相应的文件夹中。之后，您只需在视图中创建 inc 文件夹，您只需在其中编写一个包含所有 JS、CSS 文件的新视图文件。像一个头文件。在每个视图文件中包含该头文件。在那里，您可以通过一个包含获得所有页面中的所有 css 属性。对于图像，您需要手动完成，因为您将在不同的地方使用不同的图像。我希望这对你有用。

# python - 如何在python中查找代码的统计信息和执行时间

> ID：13374201
> 
> 赞同：4
> 
> 时间：2012-11-14T06:45:41.313
> 
> 标签：python, statistics, execution-time

我正在研究 python 并遇到了一些查找代码的统计信息和执行时间的概念

假设我有以下代码

```
from time import gmtime, strftime
import timeit

def calculation():
     a = 2
     b = 3
     res = a + b
     return  res

if 'name' == 'main' :
    exec_time = timeit.timeit(calculation)
    print exec_time 
```

**结果：**

```
0.2561519145965576 
```

所以从上面的代码中我可以找到代码的执行时间，但是如何在 python 中找到代码的统计信息呢？

最后我的意图是以下几点

1.  如何在python中找到代码的统计信息
2.  如何在python中找到整个代码的执行时间
3.  代码统计实际上是什么意思？

**编辑代码：**

例如我在文件中有上面的代码`test.py`

现在我用下面的命令运行了上面的文件

```
python -m cProfile test.py 
```

**结果 ：**

```
sh-4.2$ python -m cProfile test.py
         4 function calls in 0.001 seconds

   Ordered by: standard name

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1    0.001    0.001    0.001    0.001 test.py:1(<module>)
        1    0.000    0.000    0.000    0.000 timeit.py:105(Timer)
        1    0.001    0.001    0.001    0.001 timeit.py:53(<module>)
        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects} 
```

因此，当我运行上述代码时，我需要这样的东西，我正在尝试在文件中编写打印统计信息的功能，而不是使用终端`test.py`命令运行文件。`python -m cProfile test.py`

至少我想`calculation()`在文件运行时找到函数的统计信息和执行时间，因为实际上函数计算具有执行某些操作的大功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T08:30:56.630

看来您要问的是如何使用 timeit 模块的编程接口。这是记录[在这里](http://docs.python.org/2/library/timeit.html#python-interface)。您将需要一个样本集来计算统计信息，例如最小值、最大值、平均值等，这意味着通过 timeit 模块中包含的 Timeit 类的重复方法运行多次计算。

例如：

```
timer = timeit.Timer(calculation)
results = timer.timeit(10000) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T09:42:11.373

我想你是在问如何`cProfile`在代码中使用。事实证明这很容易。 `cProfile.Profile`有两个未记录的方法，`enable`和`disable`，可用于启动和停止分析器。这意味着您可以轻松创建上下文管理器或装饰器。以下配方在一个对象中实现了这两个，并包括一种使用`pstat`模块处理和打印输出的方法。

```
import cProfile, pstats, functools

class profile:

    def __init__(self, filename=None):
        """
        If defined, output is written to *filename*, otherwise it
        is processed using *pstats* and printed to STDOUT.
        """
        self._filename = filename
        self._prof = cProfile.Profile()

    def __enter__(self):
        self._prof.enable()

    def __exit__(self, exc_type, exc_value, traceback):
        self._prof.disable()
        if self._filename is not None:
            self._prof.dump_stats(self._filename)
        else:
            stats = pstats.Stats(self._prof)
            self.print_stats(stats)

    def print_stats(self, stats):
        """
        This method processes the stats and prints them.
        """
        stats.strip_dirs().sort_stats('cumulative').print_stats(20)

    def __call__(self, func):
        self._func = func
        @functools.wraps(func)
        def wrapper(*args, **kwargs):
            with self:
                return func(*args, **kwargs)
        return wrapper 
```

所以用法是：

```
@profile()
def calculation():
    a = 2
    b = 3
    res = a + b
    return  res

calculation() 
```

或者

```
with profile('output_file.pstat'):
    calculation() 
```

您可以根据需要进行更改`print_stats`以显示所需的输出。

# visual-studio-2008 - SGEN 失败：试图在 VS2008 中加载格式不正确的程序集

> ID：13374203
> 
> 赞同：14
> 
> 时间：2012-11-14T06:45:45.827
> 
> 标签：visual-studio-2008, format, mixed-mode, web-reference, sgen

我能够找到几个类似的问题被问和回答，但没有一个答案或确切的条件适用于我的情况。

1.  我有一个为 x64 构建的 .NET 3.5 项目。
2.  我还有一个 x64 混合模式参考（也针对 .NET 3.5）。
3.  在 Visual Studio 2008 中，我创建了一个 Web 引用，它使 SGEN 在发布构建期间执行以创建帮助程序 DLL。

如果我不引用`mixed-mode DLL`，这可以正常工作。如果我确实引用了混合模式 DLL，则会收到此错误（xxx 只是一个占位符）：

> SGEN：错误：尝试加载格式不正确的程序集：C:\code\xxx\trunk\xxx\common\xxx\build\winx64\lib\xxx.dll。

这是发出的命令：

> C:\Program Files\Microsoft SDKs\Windows\v6.0A\bin\sgen.exe /assembly:C:\code\xxx\trunk\xxx\xxx\obj\x64\Release\xxx.dll /proxytypes /reference: ..\common\xxx\build\winx64\lib\xxx.dll /reference:C:\Windows\Microsoft.NET\Framework\v2.0.50727\System.configuration.dll /reference:C:\Windows\Microsoft.NET \Framework\v2.0.50727\System.Configuration.Install.dll /reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\v3.5\System.Core.dll" /reference:C:\ Windows\Microsoft.NET\Framework\v2.0.50727\System.Data.dll /reference:C:\Windows\Microsoft.NET\Framework\v2.0.50727\System.dll /reference:C:\Windows\Microsoft.NET\ Framework\v2.0.50727\System.EnterpriseServices.dll /reference:C:\Windows\assembly\GAC_MSIL\System.Management.Automation\1.0.0.0__31bf3856ad364e35\System.Management.Automation.dll /reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\v3.0\System.Runtime.Serialization.dll" /reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\v3.0\ System.ServiceModel.dll" /reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\v3.5\System.Web.Extensions.dll" /reference:C:\Windows\Microsoft.NET\ Framework\v2.0.50727\System.Web.Services.dll /reference:C:\Windows\Microsoft.NET\Framework\v2.0.50727\System.Xml.dll/reference:C:\Windows\Microsoft.NET\Framework\v2.0.50727\System.Web.Services.dll /reference:C:\Windows\Microsoft.NET\Framework\v2.0.50727\System.Xml.dll/reference:C:\Windows\Microsoft.NET\Framework\v2.0.50727\System.Web.Services.dll /reference:C:\Windows\Microsoft.NET\Framework\v2.0.50727\System.Xml.dll

有任何想法吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-28T02:26:11.443

您是否尝试过按照[此 msdn 帖子](http://social.msdn.microsoft.com/Forums/br/tfsbuild/thread/7a7f0690-309e-48ef-acfe-661739dc330d)中的建议更改`Generate serialization assembly`为？就我而言，那是票。`Off`

只需转到您的项目属性，它就在构建下。

![项目属性 - 构建](../Images/5d38030084edc31aefc8d969eada1c7b.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-18T14:48:19.410

[安装MSBuild 工具集](http://www.microsoft.com/en-us/download/details.aspx?id=40760)（适用于 Visual Studio 2013）后，此错误也会在构建机器上弹出。问题是默认情况下只有 32 位版本的 sgen.exe 可用。

安装包含 64 位版本 sgen.exe的最新[Windows SDK后问题消失：](http://msdn.microsoft.com/en-us/windows/desktop/bg162891.aspx)

[http://msdn.microsoft.com/en-us/windows/desktop/bg162891.aspx](http://msdn.microsoft.com/en-us/windows/desktop/bg162891.aspx)

在一台代理（机器）上，我还需要安装旧版本：

[http://msdn.microsoft.com/en-us/windows/desktop/hh852363.aspx](http://msdn.microsoft.com/en-us/windows/desktop/hh852363.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-12T12:38:50.160

在关闭序列化程序集的同时，将解决问题，它只是一种解决方法 - 最后你会以较慢的启动时间为它付出代价。问题是您必须从 x64 SDK 调用 sgen.exe（如果您的目标是 x64）。如果您使用的是 msbuild，请设置正确的 sgen 路径，如下所示：

```
<MSBuild Projects="$(MSBuildProjectLocation)" Targets="Build"
    Properties="....
    SGenToolPath=C:\Program Files\Microsoft SDKs\Windows\v6.1\Bin\x64;" 
/> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-06-04T15:11:36.533

[这是Ondrej](https://stackoverflow.com/users/2440262/ondrej-svejdar) [答案](https://stackoverflow.com/a/20543829/73986)的替代方案。

我们只是在项目文件（csproj）中对我们的 Release 配置进行了修改，并将 SDK 路径设置为 x64 版本：

```
 <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' ">
    ...
    ...
    ...
    <GenerateSerializationAssemblies>On</GenerateSerializationAssemblies>
    <SDK40ToolsPath>C:\Program Files (x86)\Microsoft SDKs\Windows\v8.1A\bin\NETFX 4.5.1 Tools\x64</SDK40ToolsPath>
  </PropertyGroup> 
```

# python-2.7 - 我已经安装了scrapy，但是当我执行“scrapy startproject tutorial”时出错

> ID：13374205
> 
> 赞同：1
> 
> 时间：2012-11-14T06:46:06.977
> 
> 标签：python-2.7, scrapy

我有以下输出，是什么原因？

```
    bater:test001 apple$ scrapy startproject 教程
    回溯（最近一次通话最后）：
      文件“/usr/local/bin/scrapy”，第 4 行，在
        导入 pkg_resources
      文件“/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/pkg_resources.py”，第 2603 行，在
      文件“/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/pkg_resources.py”，第 666 行，在要求中
      解析中的文件“/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/pkg_resources.py”，第 565 行
    pkg_resources.DistributionNotFound: Scrapy==0.16.1

```

# php - 同一行上的 CSS/DIV 文本相反对齐

> ID：13374207
> 
> 赞同：0
> 
> 时间：2012-11-14T06:46:18.730
> 
> 标签：php, css

我不完全确定我是如何设法做到这一点的。

[http://pretty-senshi.com](http://pretty-senshi.com)

如果你看一下，左边的项目和右边的项目，无论什么原因，右边的项目都伸出来了，所以我认为我做错了什么。或者也许我的编码/css被抬高了，无论如何我并不完全确定编码，我只知道它在某种程度上“有效”。见下文。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><br />
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US"><br />
<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<title>Pretty Senshi - Sailor Moon  </title>
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<link rel="stylesheet" 
href="http://pretty-senshi.com/log/wp-content/themes/BLANK-Theme/style.css"      
type="text/css" />
<link rel="pingback" href="http://pretty-senshi.com/log/xmlrpc.php" />

</head>

<body class="home blog logged-in admin-bar">
<body>

<div id="container">

<div id="rightHalf"></div>
<div style="text-align: center;"><caption>
<img src="http://pretty-senshi.com/images/design.png"  alt="text" id="picture">
</caption></div>

<div id="wrapper"><div id="leftcolumn">
<div class="headernav">Navigation</div>
<a href="about.php">About Us<br></a>
<a href="gallery.php">Gallery<br></a>
<a href="links.php">Links In/Out</a><br>
</div>

<div id="content">
<div class="post-1 post type-post status-publish 
format-standard hentry category-uncategorized" id="post-1"></div>
<div class="header">Welcome</div>
<div class="entry">
<p>The site isn&#8217;t ready yet. This site is not ONLY dedicated to 
Sailor Moon but to all anime.</p>

<div id="commentbar">
<div class="left">left stuff</div> 
<div class="right">right stuff</div></div>

</div>

<div id="footer"></div>

</body>

</html> 
```

这是它的CSS：

```
/*   
Theme Name: Pretty Senshi
Theme URI: http://pretty-senshi.com
Description: 
Author: Megan Riffey
Author URI: http://hateyourway.org
Version: 1
*/

body {background: url(http://pretty-senshi.com/images/sideone.png);
   background-repeat:repeat-x;background-color: #fcefd8;
   margin-top:0px;line-height: 20px;font-size: 10.5pt; 
   font-family: Tahoma;color:#998574;}

div#container {
    width:100%;z-index: -1;}

   .header {font-weight: bold;
    font-size: 14px;
    color: #D4556A;
    FONT-FAMILY: verdana;
    text-align: justify;
    letter-spacing: 0px;
    line-height: 25px;
    background:  url(http://pretty-senshi.com/images/header.png) left no-repeat;
    padding-right:3px;
    padding-left: 10px;
    padding-bottom: 3px;
    padding-top: 3px;
    text-align:center;}

.headernav {font-weight: bold;
    font-size: 13px;
    color: #D4556A;
    FONT-FAMILY: verdana;
    text-align: justify;
    letter-spacing: 0px;
    line-height: 25px;
    background:  url(http://pretty-senshi.com/images/header.png) left no-repeat;
    padding-right:20px;
    padding-left: 3px;
    padding-bottom: 3px;
    padding-top: 3px;
    text-align:right;}

.header:first-letter {color:#b970be;}

.headernav:first-letter {color:#b970be;}

div#picture {z-index: -1;width:780px;margin: 0 auto;text-align:center;}

#rightHalf {
   background: url(http://pretty-senshi.com/images/sidetwo.png);
   background-repeat:repeat-x;
   width: 50%;
   position: absolute;
   right: 0px;
   height: 100%;
   z-index: -1;}

p {padding: 10px;z-index: 1;}

#wrapper {position:relative;
    margin:0 auto;
    width: 650px;
    height:100%;}

#content {
    float: right;
    text-align:justify;margin-top:-80px;
    width: 440px;z-index: 999;height:100%;}

#leftcolumn {position:absolute;
    text-align:justify;
    width: 200px;margin-top:-80px;
    float: left;z-index: 999;height:100%;}

#commentbar {width:100%;padding:10px;}

.left {float:left; width:50%;} 

.right {float:right; width:50%;text-align:right;}

A:link, A:visited, A:active {
    color:#175f8b;
    text-decoration:none;
    text-transform:uppercase;
    font-size: 9pt;
    font-weight:bold;}

A:hover{
    color:#d76b92;
    text-decoration:none; 
    text-transform:uppercase;
    cursor:default; 
    border-bottom: 1px solid #7d8f9a;
    font-weight:bold;}

#date
    {font:10pt "Century Gothic", sans-serif;
    border-top:2px solid #d4aabc;
    margin-top:10px;
    color:#7ea558;
    text-align:right;
    font-weight:bold;
    text-transform:uppercase;}

div.comment a {
    width:100px
    float:left;
    height:22px;
    background-color:#72a2c6;
    text-align:center;
    display:block;
    letter-spacing:0px;
    text-shadow:none;
    text-transform:uppercase;
    margin-top:-16px;
    padding:3px;
    opacity:.8;
    filter:alpha(opacity=80);
    filter:"alpha(opacity=80)";} 
```

我可以添加或更改什么以使其与正文对齐？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T06:49:52.647

这是因为您正在使用`padding: 10px;`in `#commentbar`，只需将其删除即可。其次，您刚刚看到您也在 CSS 中使用了这个`padding: 10px;`，`p`所以如果您也将其删除，那么两者将完全一致

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T06:52:14.760

填充导致您的对齐错误...删除此 CSS 声明中的填充，它将对齐

```
#commentbar {
  width: 100%;
  /*padding: 10px;*/
} 
```

# ios - 获取对 iOS 中顶级视图控制器的引用

> ID：13374209
> 
> 赞同：1
> 
> 时间：2012-11-14T06:46:45.983
> 
> 标签：ios

如何在我的应用程序中获取对顶部可见视图控制器的引用。我看到了一些使用 navigationcontroller.[top|visible]viewcontroller 的解决方案。但我不在我的应用程序中使用导航控制器。

这似乎是一个很常见的用例，我发现很难访问 top|visible 视图控制器很奇怪

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-03T13:02:45.753

这也应该遵循您的模态视图和导航控制器（如果有）：

```
- (UIViewController *)deepestPresentedViewControllerOf:(UIViewController *)viewController
{
    if (viewController.presentedViewController) {
        return [self deepestPresentedViewControllerOf:viewController.presentedViewController];
    } else {
        return viewController;
    }
}

- (UIViewController *)topViewController
{
    UIViewController *rootViewController = [[[UIApplication sharedApplication] keyWindow] rootViewController];
    UIViewController *deepestPresentedViewController = [self deepestPresentedViewControllerOf:rootViewController];
    if ([deepestPresentedViewController isKindOfClass:[UINavigationController class]]) {
        return ((UINavigationController *)deepestPresentedViewController).topViewController;
    } else {
        return deepestPresentedViewController;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T08:21:44.947

您可能应该在这里使用委托模式（为子视图控制器提供对其可以调用的对象的引用）。如果您编辑帖子以解释*为什么*您认为需要对顶视图控制器的引用，我们可以为您提供有关如何在您的情况下使用委托模式的建议。

但现在我只会给你绳子，你需要吊死自己：

```
UIViewController *topVC = [UIApplication sharedApplication].keyWindow.rootViewController; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-27T03:06:59.443

```
-(UIViewController *) getTopMostController
{
    UIWindow *topWindow = [UIApplication sharedApplication].keyWindow;
    if (topWindow.windowLevel != UIWindowLevelNormal)
    {
        topWindow = [self returnWindowWithWindowLevelNormal];
    }

    UIViewController *topController = topWindow.rootViewController;
    if(topController == nil)
    {
        topWindow = [UIApplication sharedApplication].delegate.window;
        if (topWindow.windowLevel != UIWindowLevelNormal)
        {
            topWindow = [self returnWindowWithWindowLevelNormal];
        }
        topController = topWindow.rootViewController;
    }

    while(topController.presentedViewController)
    {
        topController = topController.presentedViewController;
    }

    if([topController isKindOfClass:[UINavigationController class]])
    {
        UINavigationController *nav = (UINavigationController*)topController;
        topController = [nav.viewControllers lastObject];

        while(topController.presentedViewController)
        {
            topController = topController.presentedViewController;
        }
    }

    return topController;
}

-(UIWindow *) returnWindowWithWindowLevelNormal
{
    NSArray *windows = [UIApplication sharedApplication].windows;
    for(UIWindow *topWindow in windows)
    {
        if (topWindow.windowLevel == UIWindowLevelNormal)
            return topWindow;
    }
    return [UIApplication sharedApplication].keyWindow;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-25T09:23:37.333

```
-(UIViewController *)getCurrentViewController
{
    UIViewController *result = nil;
    UIWindow * window = [[UIApplication sharedApplication] keyWindow];
    if (window.windowLevel != UIWindowLevelNormal)
    {
        NSArray *windows = [[UIApplication sharedApplication] windows];
        for(UIWindow * tmpWin in windows)
        {
            if (tmpWin.windowLevel == UIWindowLevelNormal)
            {
                window = tmpWin;
                break;
            }
        }
    }
    UIView *frontView = [[window subviews] objectAtIndex:0];
    id nextResponder = [frontView nextResponder];

    if ([nextResponder isKindOfClass:[UIViewController class]])
        result = nextResponder;
    else
        result = window.rootViewController;
    return result;
} 
```

# jsf-2 - ViewMapListener JSF 未被调用

> ID：13374211
> 
> 赞同：4
> 
> 时间：2012-11-14T06:46:52.577
> 
> 标签：jsf-2, java-ee-6, cdi, myfaces, codi

我正在尝试将 JSF`@ViewScoped`注释移植到 CDI。原因是更多的教育而不是基于需要。我选择这个特定的范围主要是因为缺少一个可能希望在 CDI 中实现的自定义范围的更好的具体示例。

也就是说，我的出发点是将[JSF 注释](http://www.verborgh.be/articles/2010/01/06/porting-the-viewscoped-jsf-annotation-to-cdi/)[移植`@ViewScoped`](http://www.verborgh.be/articles/2010/01/06/porting-the-viewscoped-jsf-annotation-to-cdi/)到 CDI 。但是，这个实现并没有考虑到[API](http://docs.oracle.com/javaee/6/api/javax/enterprise/context/spi/Context.html)中提到的[Context](http://docs.oracle.com/javaee/6/api/javax/enterprise/context/spi/Context.html)的一个看似非常重要的责任（即销毁） ：

> 上下文对象负责通过调用 Contextual 的操作来创建和销毁上下文实例。特别是，上下文对象负责通过将实例传递给 Contextual.destroy(Object, CreationalContext) 来销毁它创建的任何上下文实例。get() 不得随后返回已销毁的实例。上下文对象必须将相同的 CreationalContext 实例传递给 Contextual.destroy()，就像它在创建实例时传递给 Contextual.create() 一样。

我决定通过拥有我的`Context`对象来添加此功能：

1.  跟踪`Contextual`它为哪个 s 创建了哪些对象`UIViewRoot`；
2.  实现[ViewMapListener](http://docs.oracle.com/javaee/6/api/javax/faces/event/ViewMapListener.html)`UIViewRoot`接口并通过调用将自己注册为每个监听器`UIViewRoot.subscribeToViewEvent(PreDestroyViewMapEvent.class, this)`；
3.  在调用 时销毁任何已创建`Contextual`的 s`ViewMapListener.processEvent(SystemEvent event)`并从中注销自身`UIViewRoot`。

这是我的`Context`实现：

```
package com.example;

import java.lang.annotation.Annotation;
import java.util.HashMap;
import java.util.HashSet;
import java.util.Map;
import java.util.Set;
import java.util.logging.Level;
import javax.enterprise.context.spi.Context;
import javax.enterprise.context.spi.Contextual;
import javax.enterprise.context.spi.CreationalContext;
import javax.enterprise.inject.spi.Bean;
import javax.faces.component.UIViewRoot;
import javax.faces.context.FacesContext;
import javax.faces.event.AbortProcessingException;
import javax.faces.event.PreDestroyViewMapEvent;
import javax.faces.event.SystemEvent;
import javax.faces.event.ViewMapListener;

public class ViewContext implements Context, ViewMapListener {

    private Map<UIViewRoot, Set<Disposable>> state;

    public ViewContext() {
        this.state = new HashMap<UIViewRoot, Set<Disposable>>();
    }

    // mimics a multimap put()
    private void put(UIViewRoot key, Disposable value) {
        if (this.state.containsKey(key)) {
            this.state.get(key).add(value);
        } else {
            HashSet<Disposable> valueSet = new HashSet<Disposable>(1);
            valueSet.add(value);
            this.state.put(key, valueSet);
        }
    }

    @Override
    public Class<? extends Annotation> getScope() {
        return ViewScoped.class;
    }

    @Override
    public <T> T get(final Contextual<T> contextual,
            final CreationalContext<T> creationalContext) {
        if (contextual instanceof Bean) {
            Bean bean = (Bean) contextual;
            String name = bean.getName();
            FacesContext ctx = FacesContext.getCurrentInstance();
            UIViewRoot viewRoot = ctx.getViewRoot();
            Map<String, Object> viewMap = viewRoot.getViewMap();
            if (viewMap.containsKey(name)) {
                return (T) viewMap.get(name);
            } else {
                final T instance = contextual.create(creationalContext);
                viewMap.put(name, instance);
                // register for events
                viewRoot.subscribeToViewEvent(
                        PreDestroyViewMapEvent.class, this);
                // allows us to properly couple the right contaxtual, instance, and creational context
                this.put(viewRoot, new Disposable() {

                    @Override
                    public void dispose() {
                        contextual.destroy(instance, creationalContext);
                    }

                });
                return instance;
            }
        } else {
            return null;
        }
    }

    @Override
    public <T> T get(Contextual<T> contextual) {
        if (contextual instanceof Bean) {
            Bean bean = (Bean) contextual;
            String name = bean.getName();
            FacesContext ctx = FacesContext.getCurrentInstance();
            UIViewRoot viewRoot = ctx.getViewRoot();
            Map<String, Object> viewMap = viewRoot.getViewMap();
            if (viewMap.containsKey(name)) {
                return (T) viewMap.get(name);
            } else {
                return null;
            }
        } else {
            return null;
        }
    }

    // this scope is only active when a FacesContext with a UIViewRoot exists
    @Override
    public boolean isActive() {
        FacesContext ctx = FacesContext.getCurrentInstance();
        if (ctx == null) {
            return false;
        } else {
            UIViewRoot viewRoot = ctx.getViewRoot();
            return viewRoot != null;
        }
    }

    // dispose all of the beans associated with the UIViewRoot that fired this event
    @Override
    public void processEvent(SystemEvent event)
            throws AbortProcessingException {
        if (event instanceof PreDestroyViewMapEvent) {
            UIViewRoot viewRoot = (UIViewRoot) event.getSource();
            if (this.state.containsKey(viewRoot)) {
                Set<Disposable> valueSet = this.state.remove(viewRoot);
                for (Disposable disposable : valueSet) {
                    disposable.dispose();
                }
                viewRoot.unsubscribeFromViewEvent(
                        PreDestroyViewMapEvent.class, this);
            }
        }
    }

    @Override
    public boolean isListenerForSource(Object source) {
        return source instanceof UIViewRoot;
    }

} 
```

这是`Disposable`界面：

```
package com.example;

public interface Disposable {

    public void dispose();

} 
```

这是范围注释：

```
package com.example;

import java.lang.annotation.ElementType;
import java.lang.annotation.Inherited;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;
import javax.enterprise.context.NormalScope;

@Inherited
@NormalScope
@Retention(RetentionPolicy.RUNTIME)
@Target({ElementType.TYPE, ElementType.METHOD,
    ElementType.FIELD, ElementType.PARAMETER})
public @interface ViewScoped {

} 
```

这是 CDI 扩展声明：

```
package com.example;

import javax.enterprise.event.Observes;
import javax.enterprise.inject.spi.AfterBeanDiscovery;
import javax.enterprise.inject.spi.Extension;

public class CustomContextsExtension implements Extension {

    public void afterBeanDiscovery(@Observes AfterBeanDiscovery event) {
        event.addContext(new ViewContext());
    }

} 
```

我在`javax.enterprise.inject.spi.Extension`contains 下添加了文件，以便在 CDI`META-INF/services`中`com.example.CustomContextsExtension`正确注册上述内容。

我现在可以制作像这样的 bean（注意自定义`@ViewScoped`实现的使用。）：

```
package com.example;

import com.concensus.athena.framework.cdi.extension.ViewScoped;
import java.io.Serializable;
import javax.inject.Named;

@Named
@ViewScoped
public class User implements Serializable {
    ...
} 
```

The beans are created properly and properly injected into JSF pages (i.e. the same instance is returned per view, new ones are created only when the view is created, the same instances are injected over multiple requests to the same view). How do I know? Imagine the above code littered with debugging code which I purposefully stripped out for clarity and since this is already a huge post.

The problem is that my `ViewContext.isListenerForSource(Object source)` and `ViewContext.processEvent(SystemEvent event)` are never called. I was expecting that at least upon session expiration those events would be called, since the view map is stored in the session map (correct?). I set the session timeout to 1 minute, waited, saw the timeout happen, but my listener was still not called.

I also tried adding the following to my `faces-config.xml` (mostly out of the lack of ideas):

```
<system-event-listener>
    <system-event-listener-class>com.example.ViewContext</system-event-listener-class>
    <system-event-class>javax.faces.event.PreDestroyViewMapEvent</system-event-class>
    <source-class>javax.faces.component.UIViewRoot</source-class>
</system-event-listener> 
```

Finally, my environment is `JBoss AS 7.1.1` with `Mojarra 2.1.7`.

Any clues would be greatly appreciated.

**EDIT: Further Investigation.**

[`PreDestroyViewMapEvent`](http://docs.oracle.com/javaee/6/api/javax/faces/event/PreDestroyViewMapEvent.html) doesn't seem to be fired at all while [`PostConstructViewMapEvent`](http://docs.oracle.com/javaee/6/api/javax/faces/event/PostConstructViewMapEvent.html) is fired as expected - every time a new view map is created, specifically during [`UIViewRoot.getViewMap(true)`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIViewRoot.html#getViewMap%28boolean%29). The documentation states that `PreDestroyViewMapEvent` should be fired every time `clear()` is called on the view map. That leaves to wonder - is `clear()` required to be called at all? If so, when?

The only place in the documentation that I was able to find such a requirement is in [`FacesContext.setViewRoot()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/FacesContext.html#setViewRoot%28javax.faces.component.UIViewRoot%29):

> If the current UIViewRoot is non-null, and calling equals() on the argument root, passing the current UIViewRoot returns false, the clear method must be called on the Map returned from UIViewRoot#getViewMap.

Does this ever happen in the normal JSF lifecycle, i.e. without programmatically calling `UIViewRoot.setViewMap()`? I can't seem to find any indication.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T23:00:29.050

This is related to an issue with the JSF spec that is being fixed in the JSF2.2 spec, see [here](http://java.net/jira/browse/JAVASERVERFACES_SPEC_PUBLIC-905). Also, I created an issue with Apache DeltaSpike so they may try to fix it, see [here](https://issues.apache.org/jira/browse/DELTASPIKE-293). If it's fixed in DeltaSpike, then it may end up being merged into CODI and / or Seam as well.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-25T13:57:52.913

The view map is stored in a LRU map, because you never know which view will be post back. Unfortunately, the PreDestroyViewMapEvent is not called before removing from this map.

A workaround is to reference your object from within a WeakReference. You can use ReferenceQueue or check the reference when to call your destruction code.

# android - 更新 Android Sherlock 选项卡的内容

> ID：13374215
> 
> 赞同：4
> 
> 时间：2012-11-14T06:47:13.607
> 
> 标签：android, mobile, android-fragments, actionbarsherlock

我正在使用 Sherlock 选项卡来实现选项卡。一切正常，但我还想做一件事，下面是场景：

假设在特定选项卡上加载了一个片段。在该片段中，当单击按钮时，我将不得不加载另一个片段，但我希望标签保留。

如何实现此功能？什么方法可以在这里提供帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:08:46.167

我有同样的问题。我使用 Handler 和 Messenger 在选项卡之间发送数据并更新 UI，从而解决了我的问题。

# java - 从 Web 应用程序中的不同类加载器加载库

> ID：13374217
> 
> 赞同：3
> 
> 时间：2012-11-14T06:47:25.307
> 
> 标签：java, tomcat, web-applications, classloader, axis

当一个 Web 应用程序被加载时，`Tomcat`它是由一个特定的类加载器加载的，对吧？
我假设`WEB-INF\lib`此 Web 应用程序使用的所有库（在 下）都由同一个类加载器加载？
在这种情况下，有没有办法在不同的类加载器下加载库而没有任何问题？
我想这样做的原因是因为`Axis`使用了一些绑定到类加载器的配置属性，并且希望使用不同的属性进行请求，从而使用不同的类加载器。
这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T06:55:10.373

如果您想在运行时以编程方式加载类，您可以使用 URLClassLoader，但要真正做到正确可能会非常棘手。你会做这样的事情：

```
URL[] urls = new URL[] {
    /* URL to your axis jar */,
    /* other URLs you need */
};
URLClassLoader classLoader = new URLClassLoader(urls, getClass().getClassLoader());
Class<...> axisClass = classLoader.findClass(/* fully qualified name */); 
```

然后你应该能够创建这个类的一个新实例并使用它。

**编辑：**这是一个更具体的示例，尽管没有使用 Axis，因为设置起来太困难了。我创建了一个包含以下类的 JAR 文件：

```
public class Hello {
    public Hello(String config) {

    }

    public String getMessage() {
        return "Hello World";
    }
} 
```

我已将此 jar 文件复制到我的测试项目的源文件夹中，因此我可以使用`UrlClassloaderTest.class.getResource("hello.jar")`. 在 web 应用程序中，您可能应该将其放入 WebContent/WEB-INF（或类似的东西）并使用该方法`javax.servlet.ServletContext.getRealPath("WEB-INF/hello.jar")`找到它。然后我可以使用 URLClassLoader 和反射访问 Hello 类：

```
public class UrlClassloaderTest {
    public static void main(String[] args) throws Exception {
        URL jarUrl = UrlClassloaderTest.class.getResource("hello.jar");
        URLClassLoader cl = new URLClassLoader(new URL[] { jarUrl }, UrlClassloaderTest.class.getClassLoader());

        Class helloClass = cl.loadClass("test.Hello");
        Constructor constructor = helloClass.getConstructor(String.class);
        Object helloObject = constructor.newInstance("some configuration");
        Method messageMethod = helloClass.getMethod("getMessage");
        String message = (String) messageMethod.invoke(helloObject);

        System.out.println(message);
    }
} 
```

请注意，我不能在这里使用 Hello 作为类型，因为它不在应用程序的类路径上，因此类的类加载器不知道它`UrlClassLoaderTest`！

# java - 如何通过 HibernateTemplate 更新数据库中的特定字段

> ID：13374223
> 
> 赞同：2
> 
> 时间：2012-11-14T06:48:12.793
> 
> 标签：java, sql, hibernate, exception, sql-update

我想`Persons`使用 HibernateTemplate 更新数据库表中的特定字段。我正在尝试这样做，但这不起作用。

```
public void  updateDate(int Id,Date receivedDate) {
      Id = 10;
      receivedDate = 2012-11-12;
      String queryString = "update Persons set recievedDate=? where Id=? ";
      getHibernateTemplate().update(queryString, new Object[] { Id, receivedDate });
} 
```

运行此查询时出现异常“UnkownEntity”。我可以使用 HibernateTemplate 来更新特定字段吗？是否有其他替代方法可以进行特定字段更新？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T18:25:41.573

`update`方法 in`getHibernateTemplate`不允许执行 hql 查询。它只允许休眠实体对象。

见链接[hibernate模板更新方法](http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/orm/hibernate3/HibernateTemplate.html#update%28java.lang.String,%20java.lang.Object%29)

在您的情况下，Hibernate 尝试将其解析`update Persons set recievedDate=? where Id=?`为一个实体。

**解决方案：**

```
Query q = s.createQuery("update Persons set recievedDate=:recievedDate where Id=:Id");
q.setString("recievedDate", "some date");
q.setString("Id", "54");
q.executeUpdate(); 
```

希望它清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T07:24:01.727

您必须在会话工厂配置中列出您的类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T07:41:04.910

我假设您在 HQL 中名为 Person 的实体必须使用 java 类名，而不是 db 表名

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2015-08-20T06:40:47.057

如果使用 HibernateTemplate，这是我的解决方案。

```
// EntityName is the table to be updated

EntityName entity =  hibernateTemplate.find("from EntityName where id=?" , id);

//set the value which has to be updated

entity.setValue(yourNewValue);

hibernateTemplate.SaveOrUpdate(entity);  

// above updated the existing Entity table without duplicates 
```

# javascript - 返回当前位置 x 英里半径内的地点列表

> ID：13374225
> 
> 赞同：1
> 
> 时间：2012-11-14T06:48:35.753
> 
> 标签：javascript, ruby-on-rails, ruby, google-maps

我有一个包含 lat/lng 信息的地点数据库，我想创建一个 json 提要，该提要返回用户当前 lat/lng 半径 x 英里内的地点列表。做这样的事情的最好方法是什么？

我的 javascript 可能会使用当前的 lat/lng 进行 ajax 调用，后端将处理返回的位置。然后我将使用 js 渲染这些地方。（LMK 如果您认为这是处理此问题的最佳方式，如果是，后端逻辑如何工作？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T09:27:51.657

查看[地理编码器](http://www.rubygeocoder.com/)gem。它支持 ActiveRecord 和几个数据库引擎，包括 PostgreSQL。

如果您有一个`Venue`模型，您可以向它添加地理编码并执行以下操作：

```
nearby_places = Venue.near([lat, long], distance) 
```

[该项目的GitHub](https://github.com/alexreisner/geocoder)上还有一个关于高级查询的示例，全文引用如下。

* * *

查询对象时（如果您使用 ActiveRecord），您还可以使用 within_bounding_box 范围在正方形而不是半径（圆）内查看：

```
distance = 20
center_point = [40.71, 100.23]
box = Geocoder::Calculations.bounding_box(center_point, distance)
Venue.within_bounding_box(box) 
```

这也可以显着提高查询性能，尤其是与纬度/经度列上的索引结合使用时。但是请注意，返回的结果不包括距离和方位属性。如果您想提高性能并访问距离和方位信息，请使用这两个范围：

```
Venue.near(center_point, distance).within_bounding_box(box) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T11:14:48.510

嗯，postgres 有一个名为 postgis 的地理空间扩展，值得研究。我实际上对 sphinx 有更好的体验，它可以使用任何 db 表（mysql、mongo、sqlite，甚至 csv 或 xml）作为源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T09:44:13.850

你可以这样做：

1) 从您的 javascript 块进行 ajax 调用：

```
$.ajax({
  url: '<%= url_for :action => :find_places  %>', 
  data: {
    lat: $('#lat_field').val(),
    ing: $('#ing_field').val()
  },
  dataType: 'json',
  success: function( data ) {
    response( $.map( data, function( places ) {
      // do something with places
      // like places.name and so on
      // this function will be called for each item in json array
    }));
  }   
}); 
```

2）在你的控制器中捕捉这个动作

```
def find_places
  @places_array = Array.new
  @places_array[0] = {:name => ' ...', :others => '...'}
  respond_with @places_array.to_json
end 
```

3) 不要忘记`respond_to :json`在控制器的开头和`get 'find_places'`routes.rb 中添加。

实际上，在 find_places.js.erb 文件中处理您的计算结果将更加“Ruby”风格，该文件可以访问您的控制器实例变量。在这种情况下，您根本不需要使用 json。

# android - 在 Android 中使用 Gingerbread 风格的菜单

> ID：13374229
> 
> 赞同：2
> 
> 时间：2012-11-14T06:48:51.167
> 
> 标签：android, menu, android-2.3-gingerbread

更新：现在画我自己的菜单。谢谢大家。

我已经搜索了这个主题，但我发现的几乎都是关于更改目标内部版本号。

我想知道是否有其他方法可以在较新版本的 Android 上使用老式菜单，如 Gingerbread 中的。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T06:56:22.083

我认为您可以尝试将默认主题放入其中。这也会更改按钮样式，因此可能会产生负面影响。我也不确定它是否会改变菜单样式，但绝对值得一试。

将以下内容添加到您的 XML

`<application android:theme="@android:style/Theme">`

这应该删除全息主题，如果没有，您可以使用其他一些主题，直到找到一个有效的主题。这可能会有所帮助 - [http://developer.android.com/guide/topics/ui/themes.html](http://developer.android.com/guide/topics/ui/themes.html)

如果这不起作用，您可以尝试覆盖菜单按钮以拉出自定义菜单。这是一些覆盖菜单按钮的代码 -

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if ( keyCode == KeyEvent.KEYCODE_MENU ) {
        //put code to call up your custom menu here
        return true;
    }
    return super.onKeyDown(keyCode, event);
} 
```

# html - 这个符号怎么做 »

> ID：13374233
> 
> 赞同：-1
> 
> 时间：2012-11-14T06:49:17.233
> 
> 标签：html, html-entities

这个符号是怎么做的？» 我有它的正对面版本。我不能做左边的。它不是大于或小于板上的箭头键。

我也试过`&lsaquo;&lsaquo;`

![在此处输入图像描述](../Images/40b0156b63da84f5d40a6ae17fe9c35b.png)

»

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T06:52:23.093

« 是“左双角引号”

您应该能够使用以下方式表示它：

```
&laquo; 
```

这使得指向正确的版本：

```
&raquo; 
```

（或者，您可以在许多需要其权限的地方复制并粘贴）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T06:52:24.340

为什么不直接使用 « »?

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T06:53:31.997

这是`&raquo;`» html 实体

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T07:09:31.617

»

它的 HTML 名称是`&raquo;`

它的 HTML 编号。是`&#187;`

它的ASCII十六进制代码：BB

其 ASCII 十进制值：187

最后它的描述是

> 直角双引号

[**参考**](http://www.ascii.cl/htmlcodes.htm)

# ruby - 如何使用 Ruby 在 GUI 中封装 Watir 浏览器实例？

> ID：13374234
> 
> 赞同：2
> 
> 时间：2012-11-14T06:49:19.603
> 
> 标签：ruby, user-interface, testing, watir, watir-webdriver

基本上，我正在使用 Watir 为多个站点编写测试应用程序。但是，也有最终用户（可以假定他们是不熟悉命令行、使用 Windows 的典型用户）。现在，我想给他们一些看的东西，比如说，视觉上发生了什么（应客户的要求，*叹息*）。

我将制作一个 GUI，显示用于测试网站的表单数据（表单、用户名、名称等的随机信息）以及正在发生的事情。我想要一个预览窗口，例如 C#.NET 中的 WebBrowser 类。

是否有一种简洁的方法可以在 Ruby 中使用 Watir（或 Watir-WebDriver）在 GUI（wxRuby、Shoes 等）中限制/封装（idk 使用其他短语）浏览器实例？

（注意：这是在 Windows 机器上运行的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T01:42:59.613

这是一项艰巨的任务。Watir 本身只是从命令行运行，因此您需要查看是否有一种方法可以使用您正在使用的操作系统中的命令行窗口来执行您想要的操作。但是随后 watir 调用了浏览器的一个实例（使用 Watir-webdriver 可以是大量不同的浏览器），每个都是他们自己的野兽，以自己的方式与操作系统和 UI 做出反应，我没有知道您可能会以您描述的方式“包装” IE、Chrome 或 Firefox。

从这个角度来看，是否有办法包装虚拟机的接口可能更容易？（也许有一些方法可以用 virtualbox 或 vmware 做到这一点？）

如果你问我，这似乎是一个非常古怪的要求，我很难看到你被要求做的事情的商业价值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T16:12:34.353

如果您使用的是 watir-classic，您可以使用以下命令隐藏 IE 窗口：

```
ie = Watir::Browser.new
ie.visible = false 
```

如果您的要求是隐藏浏览器窗口并仅显示日志/状态消息的控制台窗口，这可能会有所帮助。

如果您使用的是 Watir WebDriver/Selenium，我不确定是否有类似的方法可用。在快速搜索中，我什么也没看到。

IWebBrowser2“可见”属性可能有用 - 如果它还不支持它，不确定将它修补到 Watir WebDriver 会有多难：

[http://msdn.microsoft.com/en-us/library/aa752082(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/aa752082(v=vs.85).aspx)

# java - Google Directions API 和 Using maps.google.com 给出不同的响应

> ID：13374236
> 
> 赞同：0
> 
> 时间：2012-11-14T06:49:25.860
> 
> 标签：java, web-services, google-maps

在这里 - > [https://maps.google.com/](https://maps.google.com/) 我查询了参数 A : antim chauraha, Indore, Madhya Pradesh, India B : India Collection, Indore, Madhya Pradesh, India

并使用 web 服务获取 XML，来自 Direction API 的相同响应

[http://maps.googleapis.com/maps/api/directions/xml?origin=ANTIM%20CHAURAHA,Indore,Madhya%20Pradesh,India&destination=INDIA%20COLLECTION,PALSIKAR,Indore,Madhya%20Pradesh,India&sensor=false](http://maps.googleapis.com/maps/api/directions/xml?origin=ANTIM%20CHAURAHA,Indore,Madhya%20Pradesh,India&destination=INDIA%20COLLECTION,PALSIKAR,Indore,Madhya%20Pradesh,India&sensor=false)

这些反应根本不匹配。你看到距离，方向或任何东西。

难道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T07:03:58.547

[谷歌地图](http://maps.google.com)使用附加信息来定位您的“查询字符串”。路线 API 使用邮政地址（大部分情况下）。

这些看起来都不是一个特别好的“地址” A：antim chauraha，印多尔，印度中央邦 B：印度收藏，印多尔，印度中央邦

[通过 Google Maps API v3 geocoder 运行它们](http://www.geocodezip.com/v3_example_geo2.asp?addr1=antim%20chauraha,%20Indore,%20Madhya%20Pradesh,%20India&addr2=India%20Collection,%20Indore,%20Madhya%20Pradesh,%20India&geocode=1&geocode=2)，它们都解析到同一个地方（印度中央邦印多尔）

如果您需要像这样解析“地点”，请使用 Places API 获取坐标，然后使用路线服务获取坐标之间的路线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T08:56:07.927

基本上名字和地址是有区别的。谷歌数据库可以有相同位置的其他符号。您可以在这里阅读我的答案：http: [//www.stackoverflow.com/questions/12788664/google-maps-api-geocode-returns-different-co-ordinates-then-google-maps/12790012#12790012](http://www.stackoverflow.com/questions/12788664/google-maps-api-geocode-returns-different-co-ordinates-then-google-maps/12790012#12790012)。在谷歌响应中，名称是您要查找的内容，地标对象中是谷歌数据库中的地址和位置列表。您需要遍历地标对象以找到最相似的位置。

# node.js - 如何在 express.js 中限制上传文件的大小

> ID：13374238
> 
> 赞同：15
> 
> 时间：2012-11-14T06:49:32.710
> 
> 标签：node.js, upload, express

我收到这个错误说

```
error:request entity too large 
```

上传约 30MB 的视频时，

这是设置代码

```
app.use(express.bodyParser({
    uploadDir:'./Temp',
    maxFieldsSize:'2 * 1024 * 1024 * 1024 ',
})); 
```

我不确定如何设置 maxFieldsSize 属性，需要一些帮助！！！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-14T07:06:44.983

Express 使用连接中间件，可以通过以下方式指定文件上传大小

```
app.use(express.limit('4M')); 
```

[连接限制中间件](http://www.senchalabs.org/connect/limit.html)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-08-20T01:34:28.653

```
// Comment sart   
// app.use(express.bodyParser({
//    uploadDir:'./Temp',
//    maxFieldsSize:'2 * 1024 * 1024 * 1024 ',
// }));  

// Add this code for maximun 150mb 
app.use(bodyParser.json({limit: '150mb'}));
app.use(bodyParser.urlencoded({     // to support URL-encoded bodies
limit: '150mb',
extended: true
})); 

// I did it Okay. Goood luck 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-02-16T01:49:17.040

2020 Express 使用 body-parser urlencoded 函数来控制限制。 [http://expressjs.com/en/4x/api.html#express.urlencoded](http://expressjs.com/en/4x/api.html#express.urlencoded)

这些是 node_modules>body-parser>lib>types>urlencoded.js [https://www.npmjs.com/package/body-parser中的默认设置](https://www.npmjs.com/package/body-parser)

```
 var extended = opts.extended !== false
  var inflate = opts.inflate !== false
  var limit = typeof opts.limit !== 'number'
    ? bytes.parse(opts.limit || '100kb')
    : opts.limit
  var type = opts.type || 'application/x-www-form-urlencoded'
  var verify = opts.verify || false 
```

您可以在此处看到限制的默认设置为 100kb。所以为了提高你可以使用

```
app.use(express.urlencoded({ extended: false, limit: '2gb' })); 
```

这是通过 NPM 包字节可用的文件类型选项（由 bodyparser 使用） [https://www.npmjs.com/package/bytes](https://www.npmjs.com/package/bytes)

```
"b" for bytes
"kb" for kilobytes
"mb" for megabytes
"gb" for gigabytes
"tb" for terabytes
"pb" for petabytes 
```

我敢肯定这是矫枉过正，但我​​希望这有助于下一个人。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-04-30T12:46:33.903

```
app.use(express.limit('4mb')); 
```

但是您必须确保在下面添加此行，

```
app.use(express.bodyParser()); 
```

或者

```
app.use(express.json());
app.use(express.urlencoded()); 
```

取决于您使用的版本。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-02-13T00:01:04.737

我正在使用 Express 4。我尝试了许多 app.use() 语句，包括[此线程](https://stackoverflow.com/questions/19917401/error-request-entity-too-large)中列出的未弃用的语句，但它们都不起作用。

相反，我只需要在 index.js 中添加一行来更改 Formidable 模块中的 maxFileSize 选项：

```
// create an incoming form object
var form = new formidable.IncomingForm();

// ADD THIS LINE to increase file size limit to 10 GB; default is 200 MB
form.maxFileSize = 10 * 1024 * 1024 * 1024; 
```

资料来源：来自[这里](http://shiya.io/simple-file-upload-with-express-js-and-formidable-in-node-js/)的评论。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-03-04T11:29:57.873

```
var upload = multer({ storage : storage2, limits: { fileSize: 1024 * 1024 * 50 } }); 
```

在nodejs中使用multer增加文件上传大小的正确格式

# java - 在 Java 中接收 UDP 数据

> ID：13374239
> 
> 赞同：3
> 
> 时间：2012-11-14T06:49:32.897
> 
> 标签：java, sockets, networking, udp

我正在尝试接收 PlayCap 向 Java 中的网络地址 192.168.103.255 端口 3000 广播的 UDP 数据，但我在设置时遇到了麻烦。这是我所拥有的：

```
DatagramSocket socket = new DatagramSocket();
InetSocketAddress address = new InetSocketAddress("192.168.103.255", 3000);
socket.bind(address); 
```

我从绑定调用中得到“java.net.SocketException：已经绑定”。我对网络非常缺乏经验，所以我可能在这里做错了什么。任何帮助表示赞赏。

这是堆栈跟踪：

```
java.net.SocketException: already bound
    at java.net.DatagramSocket.bind(Unknown Source)
    at runner.main(runner.java:16) 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2015-03-09T07:52:37.923

我不想恢复旧线程，但我认为这个问题的答案不正确。当我使用类似的代码创建 DatagramSocket 时，我遇到了同样的问题。

```
DatagramSocket socket = new DatagramSocket();
socket.setReuseAddress(true);
socket.bind(new InetSocketAddress(InetAddress.getByName("localhost"), 5566)); 
```

这会导致 SocketException

```
Exception in thread "main" java.net.SocketException: already bound
at java.net.DatagramSocket.bind(DatagramSocket.java:376)
at testapplication.TestApplication.main(TestApplication.java:25) 
```

Java 结果：1

不是因为有另一个进程占用同一个端口，而是当我使用默认构造函数时，我创建了一个已经**绑定**的数据报套接字。

```
new DatagramSocket() 
```

根据[javadoc](http://download.java.net/jdk7/archive/b123/docs/api/java/net/DatagramSocket.html#DatagramSocket())：

> DatagramSocket() 构造一个数据报套接字并将**其绑定**到本地主机上的任何可用端口。

所以异常的原因是你试图绑定一个已经绑定的套接字。要使其工作，您需要使用以下构造函数创建一个未绑定套接字

```
DatagramSocket socket = new DatagramSocket(null);
InetSocketAddress address = new InetSocketAddress("192.168.103.255", 3000);
socket.bind(address); 
```

希望这可以帮助...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T07:14:49.453

很可能**您的应用程序运行了两次**。或者您可能会执行两次相同的代码。即使是同一个应用程序在绑定两次时也可能会失败。

对于初学者来说发生了很多事情，他们没有关闭他们之前的尝试（我也发生过），然后他们的端口已经在使用中。确保添加适当的异常处理，例如通过弹出消息“端口已在使用中”。

请注意，对于*侦听*，您通常只会绑定一个**端口**，没有明确的地址（您可能需要为此使用“0.0.0.0”）。然后您可以同时接收广播和单播。

我用于收听广播的代码很简单：

```
DatagramSocket s = new DatagramSocket();
s.bind(new InetSocketAddress(port)) 
```

请注意，我没有绑定到特定地址，而只是绑定到端口。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T07:01:35.853

执行
**netstat -a -o -n**
并从中您可以发现该端口是否已经绑定（即使从这里您也可以获取所有绑定的端口）。如果是，请尝试任何其他端口:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T06:54:30.103

检查端口 3000 它可能已被另一个应用程序使用。尝试使用不同的端口。

# c++ - 为什么 LD_PRELOAD 不适用于已加载的共享库之一？

> ID：13374240
> 
> 赞同：5
> 
> 时间：2012-11-14T06:49:42.537
> 
> 标签：c++, linux, apache2, shared-libraries, coredump

我在 RedHat Linux 5.0 上有一个内部共享库，它提供`free`以下功能`malloc`：

```
>nm ./libmem_consumption.so | grep -P -e "\bfree\b|\bmalloc\b"
0000000000006540 T free
00000000000088a0 T malloc 
```

这个共享库负责提供有关进程内存消耗的信息。不幸的是，这个共享库在与 Apache 一起使用时出现了问题`httpd`。当 Apache httpd 与这个库一起运行时，我得到一个核心转储`libc::free`和一条指针无效的消息。问题似乎出在 http.so 中，这是一个由 libphp5.so 加载的共享库，由`httpd`.

实际上，当我不加载时，`http.so`一切正常并且没有核心转储。（加载或不加载`http.so`由配置文件中的指令管理：extension=http.so）当我加载`http.so`httpd 进程 coredumps。

`httpd`以这种方式启动：

```
LD_PRELOAD=./libmem_consumption.so ./bin/httpd -f config 
```

和退出时的核心转储。

当我设置 LD_BIND_NOW=1 并`http.so`加载时，我看到（在 gdb 下）http.so`free@plt`指向`libc::free`并在其他加载的库中（例如`libphp5.so`）`free@plt`指向`libmem_consumption.so::free`. 这怎么可能？

顺便说一句，当我导出 LD_DEBUG=all 并将输出保存到文件时，我看到 libphp5.so 的这些行（也已加载）：

```
 25788: symbol=free;  lookup in file=/apache2/bin/httpd [0]
 25788: symbol=free;  lookup in file=/apache2/ps/lib/libmem_consumption.so [0]
 25788: binding file /apache2/modules/libphp5.so [0] to /apache2/ps/lib/libmem_consumption.so [0]: normal symbol `free' [GLIBC_2.2.5] 
```

和 http.so 完全不同：

```
 25825: symbol=free;  lookup in file=/apache2/ext/http.so [0]
 25825: symbol=free;  lookup in file=/apache2/ps/lib/libz.so.1 [0]
 25825: symbol=free;  lookup in file=/apache2/ps/lib/libcurl.so.4 [0]
 25825: symbol=free;  lookup in file=/lib64/libc.so.6 [0]
 25825: binding file /apache2/ext/http.so [0] to /lib64/libc.so.6 [0]: normal symbol `free' 
```

似乎`LD_PRELOAD=./libmem_consumption.so`不用于`http.so`何时`free`查找。为什么 LD_PRELOAD 被忽略？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T06:49:42.537

似乎 http.so 加载了 RTLD_DEEPBIND 标志，这就是为什么 LD_PRELOAD 对于共享库之一被忽略的原因。

这是来自[http://linux.die.net/man/3/dlopen](http://linux.die.net/man/3/dlopen)：

> RTLD_DEEPBIND（自 glibc 2.3.4 起）将此库中符号的查找范围置于全局范围之前。这意味着自包含库将优先使用其自己的符号，而不是已加载的库中包含的同名全局符号。POSIX.1-2001 中未指定此标志。

我写了一个测试共享库：

```
 #include <dlfcn.h>
  #include <unistd.h>
  #include <stdio.h>
  #include <stdlib.h>
  #include <string.h>

  static void initialize_my_dlopen(void) __attribute__((constructor));

  void* (*real_dlopen)(const char *, int flag);
  static int unset_RTLD_DEEPBIND=0;
  static int _initialized = 0;

  static void initialize_my_dlopen(void)
  {
    if (_initialized)
        return;
    real_dlopen  = (void *(*)(const char *,int))dlsym(RTLD_NEXT, "dlopen");
    unset_RTLD_DEEPBIND = atoi(getenv("UNSET_RTLD_DEEPBIND") ? getenv("UNSET_RTLD_DEEPBIND") : "0");
    printf("unset_RTLD_DEEPBIND: %d\n", unset_RTLD_DEEPBIND);
    _initialized = 1;
  }

  extern "C" {

    void *dlopen(const char *filename, int flag)
    {
      int new_flag = unset_RTLD_DEEPBIND == 0 ? flag : flag & (~RTLD_DEEPBIND);
      return (*real_dlopen)(filename, new_flag);
    }
  } 
```

并建造它：

```
 gcc -shared -fPIC -g -m64 my_dlopen.cpp -o libmy_dlopen.so -ldl 
```

当我将 UNSET_RTLD_DEEPBIND 设置为 0 并运行`httpd`程序 coredumps 时。

```
export UNSET_RTLD_DEEPBIND=0
LD_PRELOAD=./libmy_dlopen.so:./ps/lib/libmem_consumption.so ./bin/httpd -f config 
```

当我将 UNSET_RTLD_DEEPBIND 设置为 1 并运行时，`httpd`一切正常。

```
export UNSET_RTLD_DEEPBIND=1
LD_PRELOAD=./libmy_dlopen.so:./ps/lib/libmem_consumption.so ./bin/httpd -f config 
```

这是 LD_DEBUG=all 对于 UNSET_RTLD_DEEPBIND 到 1 的输出：

```
 10678: symbol=free;  lookup in file=/apache2/bin/httpd [0]
 10678: symbol=free;  lookup in file=/apache2/libmy_dlopen.so [0]
 10678: symbol=free;  lookup in file=/apache2/ps/lib/libmem_consumption.so [0]
 10678: binding file /apache2/ext/http.so [0] to /apache2/ps/lib/libmem_consumption.so [0]: normal symbol `free' 
```

# python - Django 存储 - 无法加载 Amazon 的 S3 绑定错误

> ID：13374247
> 
> 赞同：16
> 
> 时间：2012-11-14T06:50:16.670
> 
> 标签：python, django, amazon-web-services, amazon-s3, python-django-storages

嘿，所以试图将我的用户上传的图像连接到我的 S3 存储桶，以便图像存储在那里。使用 django 存储（做了一些研究，似乎是每个人都建议的，但对想法持开放态度）

这是我所做的：

安装的 django 存储

```
pip install django-storages 
```

将其添加到我的 INSTALLED_APPS

```
#settings.py
INSTALLED_APPS = (
...
'storages',
) 
```

并将此代码也添加到 settings.py

```
#settings.py
DEFAULT_FILE_STORAGE = 'storages.backends.s3.S3Storage'
AWS_ACCESS_KEY_ID = '#################'
AWS_SECRET_ACCESS_KEY = '#######################'
AWS_STORAGE_BUCKET_NAME = 'mybucketname' 
```

然后我打开外壳并运行它来检查

```
from django.core.files.storage import default_storage
print default_storage.connection
...
ImproperlyConfigured: Could not load amazon's S3 bindings.
See http://developer.amazonwebservices.com/connect/entry.jspa?externalID=134 
```

该链接导致 404 错误。一直在关注[文档](http://django-storages.readthedocs.org/en/latest/backends/amazon-S3.html)并尝试了所有 3 种设置 DEFAULT_FILE_STORAGE 的方法，但它们都不起作用。见下文。

```
DEFAULT_FILE_STORAGE = 'libs.storages.backends.S3Storage.S3Storage'
ImproperlyConfigured: Error importing storage module libs.storages.backends.S3Storage

DEFAULT_FILE_STORAGE = 'storages.backends.s3boto.S3BotoStorage'
ImproperlyConfigured: Could not load Boto's S3 bindings. 
```

如何正确设置？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-14T15:32:07.057

你有安装 python-boto 吗？
`pip install boto` 或者 `pip install boto3`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-07-30T15:00:59.083

考虑使用 boto3 而不是旧的 bo​​to：

**要求.txt：**

```
pip install django-storages
pip install boto3 
```

**设置.py：**

```
DEFAULT_FILE_STORAGE = 'storages.backends.s3boto3.S3Boto3Storage' 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-06-23T19:43:07.607

最近在**TravisCI**上使用**Django**存储库遇到了这个问题

运行`python manage.py compress`失败并出现以下错误：

> 无法加载 Boto 的 S3 绑定。

碰巧是 boto 尝试导入`google-compute-engine`未安装的模块的问题。

解决问题的一种方法是安装 GCE 引擎

`pip install google-compute-engine`

**编辑：**

经过调查，这个特殊问题似乎是由于 Travis 在 GCE 上，而 GCE 有一个默认`/etc/boto.cfg`文件，这会提示 boto 寻找 GCE 引擎。

在不安装更多依赖项的情况下在 Travis 上解决此问题的另一种方法是`BOTO_CONFIG`通过设置变量将默认配置设置为指向无处

`BOTO_CONFIG=/tmp`

在你的`travis.yml`

请参阅此问题 [https://github.com/boto/boto/issues/3741](https://github.com/boto/boto/issues/3741)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-31T15:35:15.520

在回答您上面的评论时，听起来您使用了错误的设置，请检查以下内容：

```
DEFAULT_FILE_STORAGE = 'storages.backends.s3.S3Storage' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-13T10:01:57.717

对于您正在尝试的**第一个设置**，即：

```
DEFAULT_FILE_STORAGE = 'libs.storages.backends.S3Storage.S3Storage' 
```

这意味着如果**存储代码存在于你的**python 路径中的“libs.storages”目录中，那么应该像上面那样访问它。

**但是**，如果您**使用 setup.py 或 pip 或 easy_install 安装了 django-storages**，则有以下**2 个选项**：

A.**基于 Amazone S3Python 的库**：

> ```
> DEFAULT_FILE_STORAGE = 'storages.backends.s3.S3Storage' 
> ```

*   python和S3之间的一个简单接口

B.**基于 Python Boto 的库**：

> ```
> DEFAULT_FILE_STORAGE = 'storages.backends.s3boto.S3BotoStorage' 
> ```

*   基于**python boto**，支持连接池等高级特性。

*   但是您需要**安装 python boto**才能使用它，例如`pip install boto`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-03T18:41:53.140

错误消息中的链接[http://developer.amazonwebservices.com/connect/entry.jspa?externalID=134](http://developer.amazonwebservices.com/connect/entry.jspa?externalID=134)现在似乎可以使用（2014 年 6 月）。如果您按照它并下载，解压缩 .zip 文件并放入`S3.py`您的 Python 路径（即 in `site-packages`），那么一切正常。

# extjs - 如何让“Ext.Ajax.request”中的变量成为全局变量？

> ID：13374249
> 
> 赞同：1
> 
> 时间：2012-11-14T06:50:17.760
> 
> 标签：extjs

```
Ext.Ajax.request({
            url: 'a/b/c',
        success: function(response)
                {
                   var result = Ext.decode(response.responseText);
             if((result.a)==1)                            
              {
                 var value = result.a;
             }

                }
     }); 
```

如果我想让“价值”成为我的目标变量。我能怎么做 ？（PS：对不起，我的英文不好）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T08:38:12.370

的答案`taox`是正确的，但我会解释为什么它不起作用。

确保在发出请求后访问变量。请注意，请求是异步的。

```
var value;
Ext.Ajax.request({
    url: 'a/b/c',
    success: function(response){
          var result = Ext.decode(response.responseText);
          if((result.a)==1){
             value = result.a;
          }
    },
    callback: function(opt, succes, response){
        console.log(value); //value is now set
    }
});
console.log(value); //value isn't set 
```

编辑：

在 Javascript 中创建一个全局变量：

```
<script type="text/javascript">
  var myValue = 'A1rPun'; //define variable
  function getValue()
  {
      console.log(myValue) //outputs "A1rPun"
      console.log(window.myValue) //outputs "A1rPun" (window is the topmost parent AKA global scope)
  }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T07:12:14.780

我认为您可以将*value*声明为全局变量，然后在您的成功函数中将 result.a 分配给它。

```
 var value;
  Ext.Ajax.request({
    url: 'a/b/c',
    success: function(response)
    {
          var result = Ext.decode(response.responseText);
          if((result.a)==1)                            
          {
             value = result.a;
          }

    }
  }); 
```

# jquery - 从 iframe 引用父级以将功能应用于 iframe

> ID：13374252
> 
> 赞同：1
> 
> 时间：2012-11-14T06:50:29.213
> 
> 标签：jquery, iframe, parent

我环顾四周，发现这个脚本从 iframe 引用父级：

```
$(parent.document.body) 
```

但是我该如何纠正一个脚本，如果父母的身体有一个特定的类，在我的 iframe 中创建一个链接到某个目的地？

我的 iframe 与父级服务器位于同一台服务器上。一旦定义了父 body.class，我就使用这个脚本：

```
$("#some-link").attr('href','entrant-list.html'); 
```

为了清楚起见 - 我的脚本存在于 iframe 中，在父文档中查找类，然后根据它在父文档中找到的类在 iframe 中的元素上设置一个 url。

只需要最终代码的帮助。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T07:02:04.037

在您的 iframe 中，有一个执行以下操作的 onready 脚本：

```
$(function(){
    var pBody = $(parent.document).find("body")
    if(pBody.hasClass("foo")){
        $("#some-link").attr("href", "bar.com");
    } else if(pBody.hasClass("foo2")){
        $("#some-link").attr("href", "bar2.com");
    }
} 
```

# ember.js - 在 ember-data 中发送“becameClean”后记录保持在“loaded.saved”状态

> ID：13374265
> 
> 赞同：1
> 
> 时间：2012-11-14T06:51:37.630
> 
> 标签：ember.js, ember-data

我正在尝试手动将脏记录发送到清洁状态（与[如何使用 ember-data 手动将对象状态设置为清洁（保存）有关](https://stackoverflow.com/questions/13342250/how-to-manually-set-an-object-state-to-clean-saved-using-ember-data)）。

我偶然发现了由于不希望使用 ember-data 或错误而可能发生的事情。

基本上，我所做的是

1.  找到有问题的记录，
2.  `.set()`记录在案的财产，以及
3.  手动将记录发送到“becameClean”状态。这样做是为了避免在调用`App.store.commit();`上述问题中提到的原因时提交记录。

在开始之前，我在 ember-data 部分添加了`enter: function() { console.log(this); console.log(this.get('path')); }`一行`DS.State = ...`，以便查看记录经历了哪些状态。

我正在运行 GitHub 的最新版本。这是我的方法：

**步骤 1)**致电`App.Fruit.find('banana');`：

*   `console.log(this);`结果是：

    `<DS.State:ember1077> { initialState="saved", isLoaded=true, saved=<DS.State:ember1078>, more...}`

*   `console.log(this.get('path'));`结果是：

    1.  'rootState.empty'
    2.  'rootState.loading'
    3.  'rootState.loaded'
    4.  'rootState.loaded.saved'

**步骤 2)**致电`App.Fruit.find('banana').set('description', 'Yellow fruit!');`：

*   `console.log(this);`结果是：

    `<(subclass of DS.State):ember1084> { dirtyType="updated", childStates=[3], eventTransitions={...}, more...}`

*   `console.log(this.get('path'));`结果是：

    1.  'rootState.loaded.updated'

**步骤 3)**致电`App.store.get('defaultTransaction.buckets');`：

*   导致记录出现在“更新”存储桶中

**步骤 4)**致电`App.Fruit.find('banana').get('stateManager').send('becameClean');`：

*   `console.log(this);`结果是：

    `<DS.State:ember1078> { childStates=[0], eventTransitions={...}, states={...}, more...}`

*   `console.log(this.get('path'));`结果是：

    1.  'rootState.loaded.saved'

**步骤 5)**致电`App.store.get('defaultTransaction.buckets');`：

*   导致记录出现在“干净”存储桶中

**中场休息：**好的，到目前为止，一切都很好。看来我已成功将记录发送到干净状态。但是，会发生这种情况：

**步骤 6)**致电`App.Fruit.find('banana').set('description', 'Even more yellow fruit!');`：

*   `console.log(this);`结果是：

    （没有）

*   `console.log(this.get('path'));`结果是：

    （没有）

**步骤 7)**致电`App.store.get('defaultTransaction.buckets');`：

*   导致记录出现在“干净”存储桶中

问题是，在我将“becameClean”状态发送到记录后，无论我之后是否更改记录，它都保持在“loaded.saved”状态。

当第 2 步导致使用 a`DS.State`创建新的子类对象时`dirtyType="updated"`，为什么第 6 步也不会导致这种情况？

我的问题是：这是一个错误还是因为我不希望使用而不起作用`.send('becameClean')`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T22:53:23.160

### 简短的回答

这是因为手动触发记录的状态管理器上的任何事件，正如您所说的，“不可取”。这样一来，您就错过了记录完成的所有其他簿记。

从服务器注入这些新值的唯一安全方法是使用`store.load()`. （如果您真的想知道原因，请参阅下面的所有血腥细节。）这将确保进行正确的簿记。

不幸的是，这意味着您需要确保在侧载后安全地隐藏并重新应用任何未提交的更改（因为侧载将替换记录中的所有属性）。

### 长答案

在这种情况下，手动将记录标记为干净会在内部破坏几件事：**(1)**记录的*脏因素*列表保持不变，以及**(2)**记录的原始属性副本保持不变。

**(1)**脏因素是自上次提交以来发生变化的那些属性——属性和关联。记录使用此列表来决定记录是否需要转换为脏状态。当您设置一个属性（例如描述）时，它会检查其脏因子列表以查看该属性是否已被修改。如果没有，并且如果记录当前被认为是“干净的”，它会将记录转换为脏状态。

在您的示例中，您修改了描述，然后手动将记录标记为干净。然而，记录仍然认为它的描述是脏的，所以当你第二次去改变它时，它从来没有费心去转换到脏状态——它认为它已经在那里了。

**(2)**从技术上讲，您可以使用`record.removeDirtyFactors()`刷新脏因子*并将*记录转换为干净状态，但即使您这样做了，记录的原始属性副本仍然是错误的。当它实际上是“B”时，它会认为服务器有“A”。如果您随后尝试在客户端将其更改回“A”并提交，则该记录不会做任何事情——它会认为它已经与服务器重新同步。

# python - 如何在 PyScripter 中运行 Py.test

> ID：13374267
> 
> 赞同：3
> 
> 时间：2012-11-14T06:52:01.633
> 
> 标签：python, pytest, pyscripter

我是 py.test 的新手，请告诉我如何在 PyScripter Editor 中运行 py.test。我已经尝试过以下方式，但它不起作用。

导入pytest

def func(x): 返回 x + 1

def test_answer(): 断言 func(3) == 5

pytest.main()

在运行上述脚本时，我收到一条错误消息

```
Traceback (most recent call last):
  File "<module1>", line 10, in <module>
  File "C:\Python27\lib\site-packages\pytest-2.3.2-py2.7.egg\_pytest\core.py", line 474, in main
    exitstatus = config.hook.pytest_cmdline_main(config=config)
  File "C:\Python27\lib\site-packages\pytest-2.3.2-py2.7.egg\_pytest\core.py", line 422, in __call__
    return self._docall(methods, kwargs)
  File "C:\Python27\lib\site-packages\pytest-2.3.2-py2.7.egg\_pytest\core.py", line 433, in _docall
    res = mc.execute()
  File "C:\Python27\lib\site-packages\pytest-2.3.2-py2.7.egg\_pytest\core.py", line 351, in execute
    res = method(**kwargs)
  File "C:\Python27\lib\site-packages\pytest-2.3.2-py2.7.egg\_pytest\main.py", line 107, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "C:\Python27\lib\site-packages\pytest-2.3.2-py2.7.egg\_pytest\main.py", line 92, in wrap_session
    config.pluginmanager.notify_exception(excinfo, config.option)
  File "C:\Python27\lib\site-packages\pytest-2.3.2-py2.7.egg\_pytest\core.py", line 285, in notify_exception
    res = self.hook.pytest_internalerror(excrepr=excrepr)
  File "C:\Python27\lib\site-packages\pytest-2.3.2-py2.7.egg\_pytest\core.py", line 422, in __call__
    return self._docall(methods, kwargs)
  File "C:\Python27\lib\site-packages\pytest-2.3.2-py2.7.egg\_pytest\core.py", line 433, in _docall
    res = mc.execute()
  File "C:\Python27\lib\site-packages\pytest-2.3.2-py2.7.egg\_pytest\core.py", line 351, in execute
    res = method(**kwargs)
  File "C:\Python27\lib\site-packages\pytest-2.3.2-py2.7.egg\_pytest\terminal.py", line 152, in pytest_internalerror
    self.write_line("INTERNALERROR> " + line)
  File "C:\Python27\lib\site-packages\pytest-2.3.2-py2.7.egg\_pytest\terminal.py", line 140, in write_line
    self._tw.line(line, **markup)
  File "C:\Python27\lib\site-packages\py-1.4.11-py2.7.egg\py\_io\terminalwriter.py", line 181, in line
    self.write(s, **kw)
  File "C:\Python27\lib\site-packages\py-1.4.11-py2.7.egg\py\_io\terminalwriter.py", line 225, in write
    self._file.write(msg)
  File "C:\Python27\lib\site-packages\py-1.4.11-py2.7.egg\py\_io\terminalwriter.py", line 241, in write
    self._writemethod(data)
TypeError: 'AsyncStream' object is not callable 
```

请帮帮我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T08:54:02.443

该脚本似乎是错误的，据我所知，如果您希望 pytest 应该由 python 解释器运行，可以使用 pytest.main。您需要在目录下进行测试。例如，您的 pytest 文件名为 test_sample，其中包含以下内容 ===================================pytests/test_sample ================================

```
 import pytest
    def func(x): return x + 1
    def test_answer(): assert func(3) == 5 
```

==================================================== ================================ 然后你可以在运行你的test_sample的python文件中有以下代码

```
 pytest.main(args=['-s', os.path.abspath('pytests')]) 
```

这应该可以解决您的问题

如果你不想让 python 运行你的 pytests，你可以通过 tools-->configure tools 配置 pyscripter runner 以由 pytests 运行，然后添加 pytests 命令行参数。然后，您可以从工具中运行 pytest。默认情况下 pyscripter 使用 python 解释器作为运行器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T08:39:20.020

您可以在 pydev 中使用 pytest：
[http ://pypi.python.org/pypi/pytest-pydev/0.1](http://pypi.python.org/pypi/pytest-pydev/0.1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T14:40:02.477

```
import pytest,os
os.chdir("C:\Users\Public\Documents\Development\Python\<test_pytest.py>") #your file location
pytest.main(['-s', 'test_pytest.py']) 
```

保存文件。在 Pyscripter 上转到***Run-->Python Engine--> Internal*** Run the test ，它应该可以工作。Somtime pyscripter 不接受更改，您可能需要重新初始化 python 引擎 (Ctrl+F2)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T08:49:13.987

似乎 PyScripter 设置了一些 pytest 无法识别的 sys.stdout 流。我只是试图从 pytest 方面改进处理。您可以尝试使用它：

```
pip install -i http://pypi.testrun.org -U pytest 
```

特别是还应该安装包含 TerminalWriting 代码的“py”库。如果这不起作用，请使用您正在使用的确切环境/PyScripter 版本[归档一个文件。](http://bitbucket.org/hpk42/pytest/issues/new)还有“import py ; print py.version”的**值**。

HTH，霍尔格

# javascript - Javascript For 和数组的问题

> ID：13374269
> 
> 赞同：2
> 
> 时间：2012-11-14T06:52:14.200
> 
> 标签：javascript, ajax

我试图通过 Javascript 动态隐藏页面上的特定照片，方法是选择它们的 data-id 属性并隐藏照片。这是通过 Ajax 从 TXT 文件中获取 ID，将它们拆分为数组，然后使用 jQuery 隐藏具有该 ID 的 img 来实现的。请注意，此函数每 3 秒通过一次 setInterval ...

```
 function getBlockedIDs() {
            var stringData = $.ajax({
                    url: "http://s61892.gridserver.com/zone/twitter2/blocked.txt",
                    async: false
            }).responseText;
            var blockedArray = new Array();
            blockedArray = stringData.split(",");
            var length = stringData.length
            for (var i = 0; i < length; i++) {
                    $('img.tweetphoto[data-id="' + stringData[i] + '"]').hide();
            }
    } 
```

我的问题是，它不起作用！控制台不会抛出任何错误。我的代码有什么问题？这背后的想法是在不重新加载页面的情况下阻止特定（不适当的）照片。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T06:56:21.413

您确定要在 for 循环中使用 stringData 而不是阻塞数组吗？如果是这样，也将分配更改为长度。

我的版本看起来像：

```
 function getBlockedIDs() {
        var blockedArray = $.ajax({
                url: "http://s61892.gridserver.com/zone/twitter2/blocked.txt",
                async: false
        }).responseText.split (/\s*,\s*/);
        for (var i = blockedArray.length; i--;) {
                $('img.tweetphoto[data-id="' + blockedArray[i] + '"]').hide();
        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T07:09:18.823

我会做类似的事情：

```
function getBlockedIDs() {
    $.get("http://s61892.gridserver.com/zone/twitter2/blocked.txt", function(stringData) {
        var blockedArray = stringData.split(/\s*,\s*/);
        for (var i = 0; i < blockedArray.length; i++) {
            $('img.tweetphoto[data-id="' + blockedArray[i] + '"]').hide();
        }
    });
} 
```

# c# - 动态数据显示 - WPF - 需要将文本添加到画布 - C#

> ID：13374270
> 
> 赞同：9
> 
> 时间：2012-11-14T06:52:16.227
> 
> 标签：c#, wpf, xaml, dynamic-data-display

我正在使用动态数据显示 WPF 图表。我需要在图表上绘制的曲线上的每个点旁边显示一个标签。

确切的功能如下：

1.  每条曲线都有一个保存其数据的对象和一个包含颜色、标记形状等的描述。它还告诉我标签对于该特定曲线是否必须可见。

2.  还有一个选项使用复选框来隐藏/显示绘图上所有曲线上所有点的标签。

3.  还有第三个选项，用户可以左键单击标记并查看其旁边的标签。

现在，我之前通过为每个点添加标签以及 ElementMarkerPointGraph 并设置标签的可见性来实现它。我知道这种方法会对性能产生巨大影响。

我现在正在寻找一个解决方案，我可以在我提供的位置将文本直接呈现到画布上。我还需要从画布中删除文本的帮助。

有没有办法将文本本地添加到画布？最有效的方法是什么？

编辑：当绘图仪缩放时，我需要移动文本。我已经知道绘图仪何时缩放，我需要能够将文本移动到适当的位置。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-14T07:26:59.587

我不确定这是否会为您提供缩放目的，但下面的代码可用于在画布内添加文本..我在谷歌搜索时从网站上得到它。

```
private void Text(double x, double y, string text, Color color) 
{
    TextBlock textBlock = new TextBlock();
    textBlock.Text = text;
    textBlock.Foreground = new SolidColorBrush(color);
    Canvas.SetLeft(textBlock, x);
    Canvas.SetTop(textBlock, y);
    canvasObj.Children.Add(textBlock);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-27T06:17:26.870

好的。我的具体实现不能放在这里。但我可以提供一些关于如何做到这一点的想法。

因此，创建一个从 Canvas 派生的简单用户控件。

```
class CustomCanvas : Canvas
{
    protected override void OnRender(DrawingContext dc)
    {
        FormattedText someFormattedText = new FormattedText(someText, System.Globalization.CultureInfo.CurrentCulture, FlowDirection.LeftToRight,
                someTypeFace, someFontSize, someColor);
        dc.DrawText(someFormattedText, new Point(15, 15));
    }
} 
```

如果您不希望它进一步子类化/覆盖，您可以密封该类。

就是这样。您可以查看绘图上下文中可用的其他方法来做一些其他的事情。:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T08:43:13.830

我自己想通了。我将重写 OnRender 方法来处理这个问题。我可以使用绘图上下文绘制文本。

# c# - 如何在 c#.net 中的形状文件上绘制多边形？

> ID：13374271
> 
> 赞同：2
> 
> 时间：2012-11-14T06:52:21.847
> 
> 标签：c#, gis

我有一些形状文件（shp、shx、dbf），我想使用 c#.net 将它们加载到一个分区中，目前我正在使用用于 web 的简单 Gis，我想为用户添加能够绘制的能力地图上的多边形，以便定义一个封闭区域，我想要这个多边形坐标，以便我可以定义某些地方是否在多边形中。任何想法什么是 .net 的最佳插件或任何东西，是否可以在 Easy GIS 中完成？我会很感激你的帮助。谢谢

PS：我要提一下，我需要在网页上完成，所以桌面软件没用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T05:34:04.187

经过几天的搜索，我发现以下链接非常有用：wiki.openstreetmap.org/wiki/OpenLayers_Local_Tiles_Example OpenLayers 是一个免费的 javascript 库，可为您提供许多功能，例如绘制多边形等...

# actionscript-3 - 为什么flash中的动态文本在IE6中没有对齐

> ID：13374275
> 
> 赞同：0
> 
> 时间：2012-11-14T06:52:35.497
> 
> 标签：actionscript-3, flash, internet-explorer, dynamic, text

```
<object class="numimg" width="425px" height="400px" data="numbers.swf"  type="application/x-shockwave-flash">
<param name="movie" value="numbers.swf">
<param name="quality" value="high">                     
<param name="wmode" value="transparent">
</object> 
```

所以我正在做一个带有随机数生成器的网站，该生成器是使用 as3 在 Flash 中制作的，它在其他浏览器中看起来很棒，但是当我在 ie6 中打开时，动态文本失去了对齐。

有人对此有解决方案吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T06:56:01.507

IE6 已经死了。继续前进……[加入倒计时](http://www.ie6countdown.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T07:03:36.957

IE6 没有理由改变 Flash 中的任何内容。

尝试嵌入动态文本框中使用的字体。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-14T07:05:07.650

我解决了我自己的问题。我只需要将文本从经典文本更改为 TLF 文本，它在 IE6 中更兼容

# dll - 如何将 DotNetOpenAuth 程序集引用拉入 ASP.NET MVC4 解决方案的单元测试项目？

> ID：13374277
> 
> 赞同：1
> 
> 时间：2012-11-14T06:52:39.457
> 
> 标签：dll, asp.net-mvc-4, nuget, dotnetopenauth, .net-assembly

**Tl; dr版本：** 我遇到了异常：*System.IO.FileLoadException：无法加载文件或程序集'DotNetOpenAuth.AspNet，版本4.0 **.0.0** ...*

有点沮丧的是 msft 在新的 MVC4 项目模板中使用了如此多的静态类和方法进行身份验证。想要将所有成员资格/身份验证功能包装到一个实现接口的类中，以便我可以模拟单元测试。

经过几个晚上的挣扎，我决定从头开始，所以我删除了所有 DotNetOpenAuth* 程序集引用和 nuget package.config 引用。我同样删除了对 Micrsoft.Aspnet.WebPages.OAuth.dll 的所有引用。

**重新安装包：**我针对解决方案中需要 dll 引用的三个项目 运行*install-package dotnetopenauth.aspnet 。*

解决方案不会构建，因为我的包装器有一个包装方法：Microsoft.AspNet.WebPages.OAuth(.dll).OAuthWebSecurity.RegisteredClientData 因此我需要对此组件的引用，所以我运行*install-package microsoft.aspnet.webpages .oauth*针对相同的三个项目。

解决方案构建，但是当我运行引用 Microsoft.AspNet.WebPages.OAuth(.dll).OAuthWebSecurity.RegisteredClientData 的单元测试时，我得到一个运行时异常： *System.IO.FileLoadException ：无法加载文件或程序集 'DotNetOpenAuth.AspNet，版本4\. **0** .0.0 ...*

所有三个项目中对该程序集的引用都引用了 4\. **1** .0.0，我的 web.config 中的 DotNetOpenAuth.AspNet assemblyIdentity 也是如此。

我正在使用 resharper 来运行测试，并且测试是 nunit 风格的。

最后，这是我在 fuslogvw 中看到的内容的粘贴。显然有些东西正在寻找 4\. **0** .0.0 但我不知道该怎么做（我有几次删除了这个转储中引用的临时数据文件夹）：

****** *** ******装配活页夹日志条目（11/13/2012 @ 10:04:54 PM）******* *** ** *** ** *** ** **********

 *****操作失败。绑定结果：hr = 0x80131040。没有可用的描述。

从以下位置加载的程序集管理器：C:\Windows\Microsoft.NET\Framework64\v4.0.30319\clr.dll 在可执行文件 C:\Program Files (x86)\JetBrains\ReSharper\v7.0\Bin\JetBrains.ReSharper.TaskRunner 下运行.CLR4.MSIL.exe --- 详细的错误日志如下。

=== 预绑定状态信息 === LOG: User = i7\dave LOG: DisplayName = DotNetOpenAuth.AspNet, Version=4.0.0.0, Culture=neutral, PublicKeyToken=2780ccd10d57b246 (完全指定) LOG: Appbase = file: ///C:/SVN/trunk/SoAndSo45/SoAndSo.Com.Tests.Unit/bin/Debug LOG: Initial PrivatePath = NULL LOG: Dynamic Base = NULL LOG: Cache Base = C:\Users\dave\AppData\Local \Temp\kpsvgxtp.io4 日志：AppName = SoAndSo.Com.Tests.Unit

# 调用程序集：SoAndSo.Com.Tests.Unit，Version=1.0.0.0，Culture=neutral，PublicKeyToken=null。

LOG：此绑定在默认加载上下文中开始。LOG：未找到应用程序配置文件。LOG：使用主机配置文件：LOG：使用来自 C:\Windows\Microsoft.NET\Framework64\v4.0.30319\config\machine.config 的机器配置文件。日志：后策略参考：DotNetOpenAuth.AspNet，版本=4.0.0.0，文化=中性，PublicKeyToken=2780ccd10d57b246 日志：GAC 查找不成功。日志：正在尝试下载新的 URL 文件：///C:/SVN/trunk/SoAndSo45/SoAndSo.Com.Tests.Unit/bin/Debug/DotNetOpenAuth.AspNet.DLL。LOG：程序集下载成功。尝试设置文件：C:\SVN\trunk\SoAndSo45\SoAndSo.Com.Tests.Unit\bin\Debug\DotNetOpenAuth.AspNet.dll LOG：进入下载缓存设置阶段。日志：程序集名称为：DotNetOpenAuth.AspNet，版本=4.1.0.0，文化=中性，PublicKeyToken=2780ccd10d57b246 警告：比较程序集名称导致不匹配： 次要版本 ERR：程序集引用与找到的程序集定义不匹配。ERR：设置失败，hr = 0x80131040。ERR：无法完成程序集的设置（hr = 0x80131040）。探测终止。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T14:21:24.510

我认为你应该能够将这些作为 NuGet 包安装到你的单元测试项目中，如果你将这些绑定重定向包含到你的测试项目的 app.config 文件中，它们就可以工作：

```
 <dependentAssembly>
    <assemblyIdentity name="DotNetOpenAuth.AspNet" publicKeyToken="2780ccd10d57b246" culture="neutral" />
    <bindingRedirect oldVersion="0.0.0.0-4.1.0.0" newVersion="4.1.0.0" />
  </dependentAssembly>
  <dependentAssembly>
    <assemblyIdentity name="DotNetOpenAuth.Core" publicKeyToken="2780ccd10d57b246" culture="neutral" />
    <bindingRedirect oldVersion="0.0.0.0-4.1.0.0" newVersion="4.1.0.0" />
  </dependentAssembly> 
```

如果您有一个新的 MVC 项目并在其上运行 NuGet 的`Update-Package`命令，则会自动创建这些项目。如果您没有运行它，并将 NuGet 包新安装到您的单元测试项目中，那么您的单元测试项目将引用比您的 Web 项目更新的程序集。我认为这会导致您看到的加载失败。您只需确保您的所有程序集在您的解决方案中都具有通用版本，或者确保所需的绑定重定向到位。事实上，我认为无论如何都需要绑定重定向，因为 DotNetOpenAuth 程序集的更新时间比`Microsoft.AspNet.WebPages.OAuth`包的更新时间要晚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T21:07:08.247

从 Msft 的 ASP.NET 团队的 PM 那里得到了一些很好的帮助，他建议我复制/重用 MVC4 项目模板中包含的 DLL 集合，我已经这样做了，它目前正在为我工​​作。

我将 DLL 直接复制到 NuGet 权限之外的“非托管”文件夹中，这样它们就不会无意中得到更新，除非我真的想要它们。

另外值得注意的是，我不得不清除 web.config 中的一些引用和组件转发到 4.1.0.0，因为 MVC4 项目模板包含所有 DotNetOpenAuth 内容的 4.0.*。*****

# ruby-on-rails - 多模型单索引方法 - 通过轮胎进行弹性搜索

> ID：13374281
> 
> 赞同：1
> 
> 时间：2012-11-14T06:53:08.113
> 
> 标签：ruby-on-rails, elasticsearch, tire

在我的多租户应用程序（基于每个帐户的用户数的帐户）中，当用户文档发生更改时，我将如何更新特定帐户的索引。

通过 Tire gem 使用 Elasticsearch。

[Rails 2.3 应用程序 - 应用更改以根据loe/tire 的提交](https://github.com/loe/tire/commit/53d851098c86ba210a6b9d4168e65693941ce51b)启用对 Rails 2.3 的支持

**账户模式：**

```
 include Tire::Model::Search

  Tire.index('account_1') do
    create(
      :mappings => {
        :user => {
          :properties => {
            :name => { :type => :string, :boost => 10 },
            :company_name => { :type => :string, :boost => 5 }
          }
        },
        :comments => {
          :properties => {
            :description => { :type => :string, :boost => 5 }
          }
        }
      }
    )
  end 
```

正如您在上面看到的，这里有两个模型用户和评论。使用多个模型解决单个索引是否正确？

在这种情况下，当单独更改用户文档或评论文档时如何更新索引？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T07:00:34.390

通常，当您为模型编制索引时，最好将自身属性与其关联一起编制索引。因此，在这种情况下，如果您想要索引用户及其评论，您应该在用户模型中拥有索引并索引其关联引用的评论，以便轮胎回调应用于用户模型以重新索引用户对象（如果模型中有任何属性）被改变。这仅适用于您拥有索引的模型。

如果你想索引关联，你需要有钩子，在保存/销毁用户/评论模型之后索引帐户对象。或者您也可以使用 :touch => true 选项在用户/评论更改时触摸帐户模型。

示例：如果您想要索引用户和评论，

```
 include Tire::Model::Search
  include Tire::Model::Callbacks

     mapping do
        indexes :id,                  :type => 'integer', :index    => :not_analyzed
        indexes :about_me,            :type => 'string',  :index    => :snowball
        indexes :name,                :type => 'string',  :index    => :whitespace

        indexes :comments do
          indexes :content,                  :type => 'string', :analyzer => 'snowball'
        end
    end 
```

所以这里的索引是在用户模型上，而 user.comments 是一个关联。希望这个例子能解释

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T11:41:24.433

[轮胎老板Karmi](https://stackoverflow.com/users/95696/karmi)发布的问题的答案如下：

假设我们有一个 Account 类并且我们处理文章实体。

在这种情况下，我们的 Account 类将具有以下内容：

```
class Account
  #...

  # Set index name based on account ID
  #
  def articles
      Article.index_name "articles-#{self.id}"
      Article
  end
end 
```

因此，每当我们需要访问特定帐户的文章时，无论是搜索还是索引，我们都可以简单地执行以下操作：

```
@account = Account.find( remember_token_or_something_like_that )

# Instead of `Article.search(...)`:
@account.articles.search { query { string 'something interesting' } }

# Instead of `Article.create(...)`:
@account.articles.create id: 'abc123', title: 'Another interesting article!', ... 
```

在某些情况下，为每个用户/帐户设置一个单独的索引是完美的——但在您拥有数万或数十万个索引（或更多）的情况下绝对不是很好。在这种情况下，拥有索引别名并正确设置过滤器和路由会表现得更好。我们将不基于租户身份，而是基于时间对数据进行切片。

让我们看看第二种情况，从一个高度简化的 curl **[http://localhost:9200/_aliases?pretty](http://localhost:9200/_aliases?pretty)**输出开始：

```
{
  "articles_2012-07-02" : {
    "aliases" : {
      "articles_plan_pro" : {
      }
    }
  },
  "articles_2012-07-09" : {
    "aliases" : {
      "articles_current" : {
      },
      "articles_shared" : {
      },
      "articles_plan_basic" : {
      },
      "articles_plan_pro" : {
      }
    }
  },
  "articles_2012-07-16" : {
    "aliases" : {
    }
  }
} 
```

您可以看到我们有三个索引，每周一个。您可以看到有两个相似的别名：articles_plan_pro 和articles_plan_basic - 显然，订阅“pro”的帐户可以搜索两周前的内容，但订阅“basic”的帐户只能搜索本周。

另请注意，articles_current 别名指向，嗯，本周（我在 2012 年 7 月 12 日星期四写这篇文章）。下周的索引就在那里，等待中——到时候，后台作业（cron、Resque worker、自定义脚本……）将更新别名。在轮胎集成测试套件的“滑动窗口”场景中有一个漂亮的别名示例。

我们现在不看articles_shared 别名，让我们看看我们可以用这个设置玩什么花样：

```
class Account
  # ...

  # Set index name based on account subscription
  #
  def articles
    if plan_code = self.subscription && self.subscription.plan_code
      Article.index_name "articles_plan_#{plan_code}"
    else
      Article.index_name "articles_shared"
    end
    return Article
  end
end 
```

同样，我们为 Article 类设置了一个 index_name，它保存了我们的文档。当当前账号有有效订阅时，我们从订阅中取出plan_code，直接在相关索引中搜索该账号：“basic”或“pro”。

如果该帐户没有订阅——他可能是“访问者”类型——我们将搜索定向到articles_shared 别名。使用界面和以前一样简单，例如。在 ArticlesController 中：

```
@account  = Account.find( remember_token_or_something_like_that )
@articles = @account.articles.search { query { ... } }
# ... 
```

在这种情况下，我们没有使用 Article 类作为索引的网关；我们有一个单独的索引组件，一个 Sinatra 应用程序，作为 elasticsearch Bulk API 的轻代理，提供 HTTP 身份验证、文档验证（强制执行规则，例如所需的属性或作为 UTC 传递的日期），并使用裸 Tire::Index#import和 Tire::Index#store API。

这些 API 与 article_currentindex 别名对话，该别名通过所述后台进程定期更新到当前周。通过这种方式，我们解耦了在应用程序的单独组件中设置索引名称的所有逻辑，因此我们不需要访问索引代理中的 Article 或 Account 类（它运行在单独的服务器上），或任何应用程序的组成部分。无论哪个组件正在索引，都针对articles_current 别名进行索引；无论哪个组件正在搜索，搜索对特定组件有意义的任何别名或索引。

# c# - 枚举当前 Visual Studio 项目中的所有文件

> ID：13374282
> 
> 赞同：2
> 
> 时间：2012-11-14T06:53:23.557
> 
> 标签：c#, visual-studio-2012, visual-studio-extensions

我正在尝试编写一个简单的 Visual Studio 2012 扩展。我已经生成了扩展模板，并且可以从工具菜单中弹出一个对话框。

我想枚举当前打开的项目中的所有文件，然后根据一些规则过滤它们。我正在寻找的是返回 IEnumerable 的代码片段。FileHandle 应该有以下接口或类似的东西。

```
interface IFileHandle {
        // Return the string 
        string Path;
        // Open the file in the editor
        void OpenEditorFor();
} 
```

仅供参考，我正在尝试为视觉工作室构建一个模糊文件查找器。当前文件搜索不太合适，因为您必须完全匹配。我可以编写索引器和模糊搜索器，但 Visual Studio 扩展编写的接口目前有点神秘。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-14T08:09:04.890

这似乎是一个简单的答案。在 Visual Studio 扩展的上下文中，将返回所有文件。

```
public IEnumerable<ProjectItem> Recurse(ProjectItems i)
{
    if (i!=null)
    {
        foreach (ProjectItem j in i)
        {
            foreach (ProjectItem k in Recurse(j))
            {
                yield return k;
            }
        }

    }
}
public IEnumerable<ProjectItem> Recurse(ProjectItem i)
{
    yield return i;
    foreach (ProjectItem j in Recurse(i.ProjectItems ))
    {
        yield return j;
    }
}

public IEnumerable<ProjectItem> SolutionFiles()
{
    Solution2 soln = (Solution2)_applicationObject.Solution;
    foreach (Project project in soln.Projects)
    {
        foreach (ProjectItem item in Recurse(project.ProjectItems))
        {
            yield return item;
        }
    }
} 
```

然后你可以用它做一些巧妙的技巧，比如在我的 CommandT 克隆的核心实现搜索功能。

```
private static string Pattern(string src)
{
    return ".*" + String.Join(".*", src.ToCharArray());
}

private static bool RMatch(string src, string dest)
{
    try
    {
        return Regex.Match(dest, Pattern(src), RegexOptions.IgnoreCase).Success;
    }
    catch (Exception e)
    {
        return false;
    }
}

private static List<string> RSearch(
string word,
IEnumerable<string> wordList,
double fuzzyness)
{
    // Tests have prove that the !LINQ-variant is about 3 times
    // faster!
    List<string> foundWords =
        (
            from s in wordList
            where RMatch(word, s) == true
            orderby s.Length ascending 
            select s
        ).ToList();

    return foundWords;
} 
```

像这样使用

```
var list = RSearch("bnd", SolutionFiles().Select(x=>x.Name)) 
```

# android - 如何使用 ToggleButton 更改所有声音的音高？

> ID：13374285
> 
> 赞同：2
> 
> 时间：2012-11-14T06:53:27.687
> 
> 标签：android, touch, togglebutton, soundpool

我有一个扩展按钮的类：

```
package dubpad.brendan;

import android.content.Context;
import android.media.AudioManager;
import android.media.SoundPool;
import android.util.AttributeSet;

import android.view.MotionEvent;
import android.widget.Button;

public class TestButton extends Button {.

   SoundPool soundPool = new SoundPool(1, AudioManager.STREAM_MUSIC, 0);
   int soundID = soundPool.load(getContext(), R.raw.bass, 0);
   Sound sound = new Sound(soundPool, soundID);
   int streamid;

public TestButton(final Context context, final AttributeSet attrs) {
    super(context, attrs);
    // TODO Auto-generated constructor stub
}

@Override
public boolean onTouchEvent(final MotionEvent event) {
if (event.getAction() == MotionEvent.ACTION_DOWN||event.getAction()==MotionEvent.ACTION_POINTER_DOWN||event.getAction()==MotionEvent.ACTION_POINTER_1_DOWN||event.getAction()==MotionEvent.ACTION_POINTER_2_DOWN||event.getAction()==MotionEvent.ACTION_POINTER_3_DOWN) {
            streamid = sound.play(1);           
   }

if (event.getAction()==MotionEvent.ACTION_UP||event.getAction()==MotionEvent.ACTION_POINTER_UP||event.getAction()==MotionEvent.ACTION_POINTER_1_UP||event.getAction()==MotionEvent.ACTION_POINTER_2_UP||event.getAction()==MotionEvent.ACTION_POINTER_3_UP){
sound.stop(streamid);
     }  
    return super.onTouchEvent(event);
}

 } 
```

我想实现一个 ToggleButton 并检查它是否被选中，如果是我想增加音高，如果不是我想减小音高。在 ACTION_DOWN 上声明 ToggleButton 对象并检查它不起作用。我有许多其他扩展按钮的类，我如何捕捉 streamID 并改变音高？

# oop - 在组合中返回成员函数的数据结构是不好的做法吗？

> ID：13374287
> 
> 赞同：4
> 
> 时间：2012-11-14T06:53:32.513
> 
> 标签：oop, composition

例如，您有一个 A 类和 B 类。A 类使用与许多 B 类对象交互的组合类型关系。A 类将这些 B 类对象引用存储在 Arralist 中

```
Class A
{
    ArrayList<B> beeObjects;
} 
```

如果您想实现与数组列表中的对象交互的功能，那么返回数组列表数据结构是不好的做法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T06:56:55.750

**一点也不。**您可以很好地返回您的`ArrayList`beeObjects 并使用它。实际上，在面向对象编程中，只要您有真实的使用场景，您就可以按照常规做法进行操作。

# c - 对 strtok 切断的位置有问题

> ID：13374295
> 
> 赞同：0
> 
> 时间：2012-11-14T06:54:51.487
> 
> 标签：c, strtok

基本上对于我的代码，我有变量/密钥对。当在代码中遇到一个变量时，一个函数（包含下面的部分行），它被替换为它的键。例如，如果用户输入字符串“Hello ABC World”并且变量声明为 ABC = “Great Big”，则输入字符串将更改为“Hellow Great Big World”。我通过 strtok'ing 变量之前和变量之后的字符串部分来完成此操作，然后连接 newfirst（变量之前的部分）+ 变量键 + newsecond（变量之后的部分）。在大多数情况下，这很好用，除非变量位于字符串“Hello World ABC”的末尾。因此留下我认为是单个字符'\ n'，并抛出错误，因为它无法标记剩下的内容。

```
 // Place the part of the string before the variable prescence in newfirst
            strcpy(newfirst, strtok(nonVariable[i], myVariables[a].variable));

            // Place the part of the string after the variable prescence in newsecond
            for(c = 0; c < strlen(newsecond); c++)
            {
                if(newsecond[c] == ' ')
                    hasSpaces = 1;
            }
            if(hasSpaces = 0)
            {
                strcpy(newsecond, strtok(NULL, "\n"));
            }
            else
            {
                strcpy(newsecond, strtok(NULL, " "));
                strcpy(newsecond, strtok(NULL, "\n"));
            }

            // substitute all key values in for their corresponding variables
            strcat(newfirst, " ");
            strcat(newfirst, myVariables[a].key);
            strcat(newfirst, " ");
            strcat(newfirst, newsecond); 
            strcpy(nonVariable[i], newfirst); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T07:23:42.987

您可以将带有多个字符的分隔符字符串提供给`strtok()`：

```
ptr = strtok(NULL, " \n\t"); 
```

见[man strtok](http://linux.die.net/man/3/strtok)

# asp.net - 向表中插入数据添加已插入的数据

> ID：13374298
> 
> 赞同：-1
> 
> 时间：2012-11-14T06:55:09.063
> 
> 标签：asp.net

我有 3 张桌子`tblpermission`, `tblgroup`, `tblassigngrouppermission`. 然后我有一个设计，有两个组合框用于选择组和权限。选择后，我将其添加到列表视图中。然后我保存它，到时候它会去桌子`tblassigngrouppermission`。

该表具有`assign id`（默认增量）、`groupid`、等列`permission id`。所有都正确添加到表中。如果我选择相同的组来分配权限，则保存之后。然后我选择已分配的权限并单击保存将其添加到表中。但我不需要将已分配的权限添加到表中。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T07:18:04.453

当您将数据保存回时，`tblassigngrouppermission`您必须检查表中是否`group_id`存在`permission_id`。

如果它们存在，则必须更新`tblassigngrouppermission`，否则必须插入`tblassigngrouppermission`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T08:33:48.297

如果您使用的是存储过程，您可以这样做

```
IF NOT EXISTS(Select permissionId From tblassigngrouppermission 
              Where groupId=@GroupID AND permissionId=@permissionId)
Begin

   INSERT INTO tblassigngrouppermission(groupId,permissionId) Values(@groupId, @PermissionID)
End 
```

您也可以从您的代码中检查

==> 编写一个函数来测试权限是否已经存在

```
bool GroupPermissionExists(int groupId, int permissionId)
{
   //Select Where GroupId=groupId AND PermissionID=permissionId
}

if(!GroupPermissionExists(10, 123))
{
    AddPermissionToGroup(10, 123);
} 
```

# android - 3d 轮播列表，如 android 中的 TSF Shell

> ID：13374302
> 
> 赞同：1
> 
> 时间：2012-11-14T06:55:20.777
> 
> 标签：android, android-layout, carousel

我想实现一个像这里显示的那样的 3d 轮播列表...

我应该去画布还是 OpenGL 还是有其他方法可以这样做......

提前致谢！

[TSF 外壳库小部件](http://i.stack.imgur.com/Avupm.jpg)

# c++ - 使用 fprintf 打印字符串

> ID：13374304
> 
> 赞同：3
> 
> 时间：2012-11-14T06:55:57.757
> 
> 标签：c++, stl, stdio

我在打印用于调试目的的字符串时遇到问题。

我像这样创建字符串：

```
//checker is int 
std::stringstream buttonx; 
buttonx << "Button" << checker << "_x"; 
```

现在我尝试将其打印到我的`error.txt`文件中

* * *

```
FILE * p;
p = fopen ("error.txt","w");
fprintf(p, "%s" , buttonx.str());
fclose(p); 
```

输出是：

`,æ0`

每次都不一样。我不确定发生了什么希望有人能解释这个错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T06:57:48.353

`fopen`是纯 C 语言，无法处理 std::string。您需要输入 a `char*`，您可以通过调用`.c_str()`字符串来访问它，如下所示：

```
fprintf(p, "%s", buttonx.str().c_str()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T06:58:14.217

函数 fprintf 需要一个以空字符结尾的字符串（一个 C 字符串）；你需要 c_str() 而不是你的：

```
 buttonx.c_str() 
```

# javascript - 在 Selenium IDE 中使用下拉项选择

> ID：13374314
> 
> 赞同：1
> 
> 时间：2012-11-14T06:56:27.710
> 
> 标签：javascript, drop-down-menu, selenium

我在下拉项目选择中遇到问题。请帮我。我在我的用户中创建了一个函数`exensions.js`

```
Selenium.prototype.doDropdown= function(locator){
selenium.select("//*[@id='BirthMonth']/div[1]","label=May");
selenium.doType(locator, "//*[@id='BirthMonth']/div[1]");} 
```

其中，`//*[@id='BirthMonth']/div[1]`是下拉文本字段 xpath 的 xpath。在 selenium 中使用命令下拉但在所需的文本字段中，我在下拉文本字段中没有收到 May。

请帮助我，我将不胜感激。如果还有其他代码将运行，请告诉我代码以及 Selenium 命令、值和目标。提前致谢。

# c# - C# 使用结构

> ID：13374321
> 
> 赞同：1
> 
> 时间：2012-11-14T06:57:20.490
> 
> 标签：c#, arrays, struct, monodevelop

我正在使用 Mono Develop For Android，并希望在使用结构数组方面得到一些帮助。

这是我的代码：

```
public struct overlayItem
{
    string stringTestString;
    float floatLongitude;
    float floatLatitude;
} 
```

当使用这个结构时：

```
overlayItem[1] items;
items[0].stringTestString = "test";
items[0].floatLongitude = 174.813213f;
items[0].floatLatitude = -41.228162f;

items[1].stringTestString = "test1";
items[1].floatLongitude = 170.813213f;
items[1].floatLatitude = -45.228162f; 
```

我在该行收到以下错误：

```
overlayItem[1] items; 
```

> 意外的符号“项目”

我可以请一些帮助来正确创建上述结构的数组，然后用数据填充它。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T06:59:24.193

定义你的结构，如：

```
overlayItem[] items = new overlayItem[2]; 
```

您还需要将结构中的字段定义为公共字段，以便能够在结构之外访问它们

```
public struct overlayItem
{
    public string stringTestString;
    public float floatLongitude;
    public float floatLatitude;
} 
```

*（您可以使用[Pascal 大小写](http://msdn.microsoft.com/en-us/library/vstudio/ms229043%28v=vs.100%29.aspx)作为结构名称）*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T07:00:19.493

为两个元素声明结构数组的正确方法是

```
overlayItem[] items = new overlayItem[2]; 
```

如果您不知道确切的项目数量，您也可以使用列表。

```
List<overlayItem> items = new List<overlayItem>();

items.Add( new overlayItem {
               stringTestString = "test";
               floatLongitude = 174.813213f;
               floatLatitude = -41.228162f; 
           }
); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T07:00:55.820

您需要像这样创建结构数组：

```
overlayItem[] items = new overlayItem[2]; 
```

记得用 [2] 声明它，因为它将有 2 个元素，而不是 1 个！索引数组可能从零开始，但定义数组大小不会。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T07:01:06.347

您的示例代码显示您需要两个项目，因此您需要声明长度为 2 的结构数组。这可以通过以下方式完成：

```
overlayItem[] items = new overlayItem[2]; 
```

# hibernate - 两个线程更新同一个对象时可能出现休眠异常？

> ID：13374322
> 
> 赞同：2
> 
> 时间：2012-11-14T06:57:22.137
> 
> 标签：hibernate, hibernate-mapping

当两个线程更新同一个对象时，有人可以帮助我解决可能的休眠异常吗？

例如：名称为“a”、年龄“30”且地址为“test”的员工 thread1 尝试将“a”更新为“b”，thread2 尝试将“a”更新为“c”

提前致谢， 凯瑟尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T07:52:30.643

如果你的对象是一个 Hibernate 实体，那么两个线程首先不应该引用同一个对象。

每个线程都有自己的 Hibernate 会话，每个会话都有自己的实体副本。如果您`@Version`的实体中有一个带有注释的字段，对于乐观锁定，其中一个线程将获得 OptimisticLockException。否则，一切都会好起来的，最后一个提交的线程将获胜。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T05:57:59.287

感谢大家的回答，以下是观察分析后的评论

1.  我们还可以在查询中使用 where 子句进行条件更新，并使用 executeUpdate() 方法。例如：Hibernate - Query - executeUpdate() 方法更新并返回更新的实体数。因此，如果 executeUpdate() 返回“零”，则表示该行已被另一个线程更新。（没有例外）

2.  使用@Version。（乐观锁异常）

3.  使用行级数据库锁。（数据库例外）

4.  使用同步。（Java 同步异常）

# xcode - 如何制作可调整大小的裁剪矩形以在 Xcode 中裁剪图像？

> ID：13374323
> 
> 赞同：2
> 
> 时间：2012-11-14T06:57:36.013
> 
> 标签：xcode, resize, crop

我们正在尝试制作一个绘图应用程序，因为我们需要代码来处理图像（裁剪、调整大小、旋转、合并等工作）问题是我们是新手（在 iOS 中不到五个月）所以我们需要一些东西教程的行以及使我们能够构建应用程序。请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T19:53:00.283

对于裁剪，您可以按照我的库中的源代码进行操作。它将向您展示如何制作手绘裁剪工具并在核心图形中应用裁剪方法。

[https://github.com/nicholjs/BFCropInterface](https://github.com/nicholjs/BFCropInterface)

# javascript - 是否可以使用 jquery 压缩/解压缩我的 html 代码？

> ID：13374324
> 
> 赞同：-1
> 
> 时间：2012-11-14T06:57:42.833
> 
> 标签：javascript, jquery, html

我已经在网上搜索了有关“压缩 html javascript”之类的所有内容，但没有找到可以回答我的问题的内容，但我不明白出了什么问题。问题：如果你`<span>blah<span>blah</span>blah<span>blah</span></span>`的 html 页面中有类似的东西，为什么不尝试压缩它呢？例如，

```
<!DOCTYPE html>
<html>
<head>
<title></title>
<meta charset="utf-8">
<style>
.click {color: blue; cursor: pointer;}
.encoded {display:none;}
</style>
<script src="jquery.js"></script>
<script>
$(document).ready(function () {
$.fn.encode = function () {
//encoding code
};
$.fn.decode = function () {
//decoding code
};
$('.click').click(function () {
var decoded = $(this).next('.encoded').text().decode();
$(this).next('.encoded').removeClass('encoded').addClass('decoded').html(decoded);
});
});
</script>
</head>
<body>
<div class="click">click</div>
<div class="encoded">AbCxYz*_()+=…
<!-- decoded html: <span>blah<span>blah</span>blah<span>blah</span></span>-->
</div>
</body>
</html> 
```

是否有任何功能可用于这些编码/解码部分？当然，base64 不是解决方案，因为必须首先压缩 html **，**然后**必须**将 base64 之类的东西应用于结果......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T07:21:37.097

几乎所有浏览器和 Web 服务器都支持 gzip 压缩，比 javascript 传输更有效。事实上，对于许多网络服务器，您可以将网页上传为`.html.gz`（对于大多数浏览器）和`.html`（对于不支持压缩的客户端；主要是机器人，没有真实用户），并且网络浏览器将在支持时自动提供压缩版本。

请注意，与 javascript 相比，尤其是更多的客户端支持 HTTP（不限于 HTML - 也适用于 CSS）压缩。

# jquery - 使用 jquery 进行自定义验证

> ID：13374329
> 
> 赞同：0
> 
> 时间：2012-11-14T06:58:04.250
> 
> 标签：jquery

我有两个输入字段。一个有名字，另一个是验证名字。我想在其中添加一些验证。如果我的第一个输入包含“robert”，那么用户只能在下一个字段中输入“robert”。但这并没有给我想要的结果

```
<head>
<script type="text/javascript">
$(function(){
var jn= [];
$('#first').keypress(function(e){
var d= e.charCode || e.keyCode;
jn.push(d)})

var jm=[];      
$('#second').keypress(function(e){
var f= e.charCode || e.keyCode;
jm.push(f)
for(i=0;i<jn.length;i++){
for(z=0;z<jm.length;z++)
{
if(jn[i]==jm[z]){
alert('hiii')}}}})
})
</script>
</head>
<body>
name
<input type="text" id="first" />
verify name
<input type="text" id="second" />
    </body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T07:22:01.820

我相信你想多了。您的解决方案也不适合编辑（由于必须跟踪键码数组）。尝试这样的事情

[http://jsfiddle.net/qccQZ/3/](http://jsfiddle.net/qccQZ/3/)

```
$("#field2").keypress(function(e){
    var f1 = $("#field1").val();
    var len = $(this).val().length;
    var str = String.fromCharCode(e.charCode)
    if(f1.charAt(len) != str) return false;
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T07:22:57.027

```
$('#second').blur(function(){
if($('#first').val() != '' && ($('#first').val() == $('#second').val()))
alert('valid');
else
alert('invalid');
}); 
```

测试：http: [//jsfiddle.net/Dzb8c/](http://jsfiddle.net/Dzb8c/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T07:29:08.983

我认为你应该使用这个 for 循环

```
for(i=0;i<jm.length;i++){
     if(jn[i]!=jm[i])
       {
         alert('hiii');
       }
  } 
```

# sql - 可序列化和可重复读取隔离级别有什么区别？

> ID：13374335
> 
> 赞同：48
> 
> 时间：2012-11-14T06:58:35.903
> 
> 标签：sql, database

可序列化和可重复读取隔离级别有什么区别？谁能举个简单的例子。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-11-14T07:30:47.820

概括：

在可重复读取隔离级别中，可以将新行插入数据集中。

在 Serializable 隔离级别中，所有行在事务期间都被锁定，不允许插入、更新或删除。

请参阅这些示例和说明。

^(*原始链接已损坏 — Wayback Machine 链接来自同一天和同一时间。*)

**隔离级别——可序列化**

[http://beyondrelational.com/modules/2/blogs/28/posts/10467/sql-server-transaction-isolation-level-serializable.aspx](http://beyondrelational.com/modules/2/blogs/28/posts/10467/sql-server-transaction-isolation-level-serializable.aspx)

Wayback Machine [SQL Server 事务级别可序列化](https://web.archive.org/web/20150907175058/http://beyondrelational.com/modules/2/blogs/28/posts/10467/sql-server-transaction-isolation-level-serializable.aspx)

**隔离级别——可重复读取**

[http://beyondrelational.com/modules/2/blogs/28/posts/10466/sql-server-transaction-isolation-level-repeatable-read.aspx](http://beyondrelational.com/modules/2/blogs/28/posts/10466/sql-server-transaction-isolation-level-repeatable-read.aspx)

Wayback Machine [SQL Server 事务级别可重复读取](https://web.archive.org/web/20150907184829/http://beyondrelational.com/modules/2/blogs/28/posts/10466/sql-server-transaction-isolation-level-repeatable-read.aspx)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-07-03T11:22:02.840

**可重复读取**仅防止不可重复读取（因此您可以在同一事务中读取相同的数据，而不必担心有人更改它——即使很少需要这样做）。

**可序列化**可防止不可重复读取和幻像行（因此您甚至无法插入数据）。这意味着您可以读取和写入（SELECT，UPDATE）不包含在可序列化事务中的行，但您不能在 TABLE 级别删除或插入行。

可重复读取和可序列化都非常严格，并不总是需要它们！

# android - 简单的自定义控件 - 强制关闭

> ID：13374336
> 
> 赞同：2
> 
> 时间：2012-11-14T06:58:43.583
> 
> 标签：android, subclass, forceclose

我使用 eclipse 创建了一个 android 项目。默认的系统生成代码如下所示

```
 package com.rmycustomclass.bengler;

    import android.app.Activity;
    import android.os.Bundle;

    public class RMyCustomClassActivity extends Activity {
        /** Called when the activity is first created. */
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
        }
    } 
```

我想尝试一个简单的自定义控件，所以我将代码更改如下。当我在网上搜索以创建一个简单的自定义控件时，会提到“通过子类化视图来创建类”。所以通过修改代码尝试如下。但它没有运行并且总是强制关闭。

```
package com.rmycustomclass.bengler;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Paint;
import android.util.AttributeSet;
import android.view.View;

public class RMyCustomClassActivity extends View {

    private Paint myPaint;

    public RMyCustomClassActivity(Context cxt, AttributeSet attribute){

        super(cxt,attribute);
        init();

    }

    public RMyCustomClassActivity(Context context, AttributeSet attrs, int defStyle)
    {
        super(context, attrs, defStyle);
        init();
    }

    public void init(){

        myPaint = new Paint();
        myPaint.setTextSize(12);
        myPaint.setColor(0xFF668800);
        myPaint.setStyle(Paint.Style.FILL);

    }

    @Override
    protected void onDraw(Canvas canvas) {
        canvas.drawText("TEEEST", 100, 100, myPaint);
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        this.setMeasuredDimension(150,200);     
    }

} 
```

下面是我的xml文件

```
<?xml version="1.0" encoding="utf-8"?>
    <LinearLayout 
        android:layout_width="fill_parent" 
        xmlns:android="http://schemas.android.com/apk/res/android" 
        android:layout_height="fill_parent" android:orientation="vertical">

        <TextView 
        android:id="@+id/textView1" 
        android:text="Enter text"
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content">
        </TextView>

        <TableLayout 
            android:layout_width="match_parent" 
            android:layout_height="wrap_content" 
            android:id="@+id/tableLayout1">
            <Button 
                android:id="@+id/button2"
                android:layout_width="wrap_content"
                 android:layout_height="wrap_content"
                 android:text="Button"
                 android:layout_weight="1">
            </Button>
            <Button android:layout_width="wrap_content"  android:id="@+id/button1" android:layout_height="40dip" android:text="My button" android:layout_weight="1"></Button>
            <test.control 
              android:id="@+id/control" 
              android:layout_height="match_parent"> </test.control>
        </TableLayout>
    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T07:04:05.170

当您在 Eclipse 中创建项目时，它将您的活动（在您的情况下为 RMyCustomClassActivity）链接为 Android 清单中的启动器...但是由于您已将活动更改为查看 android 运行时无法找到要启动的活动...查看您的清单文件，你会发现你的班级作为启动器活动

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T07:02:01.820

添加 android:layout_width="match_parent"

```
<test.control 
          android:id="@+id/control" 
          android:layout_height="match_parent"
          android:layout_width="match_parent"
> 
```

# javascript - 在 DOMReady 触发之前与 DOM 交互

> ID：13374337
> 
> 赞同：0
> 
> 时间：2012-11-14T06:58:44.730
> 
> 标签：javascript, crossrider

我想在元素可用时立即与 DOM 交互。我可以用 setInterval 做到这一点，但它不适用于 Crossrider，因为可以与 DOM 交互的 js 只有在 DOM 准备好后才会加载。有什么办法可以解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T20:29:36.483

目前的 API 目前还没有正式支持这个功能。

但是，欢迎您尝试我们的新 appAPI.dom 方法，该方法可在 Chrome 和 Firefox 中使用，但在正式发布之前尚未记录。新方法非常不言自明，因此我在此处列出了它们并进行了简要说明：

*   `appAPI.dom.onDocumentStart.addJS(String jsCode, [Array siteList])`
    此方法在文档开始加载时添加指定的 jsCode。可以选择指定字符串/正则表达式的数组（有关示例，请参见[http://docs.crossrider.com/#!/api/appAPI-method-isMatchPages](http://docs.crossrider.com/#!/api/appAPI-method-isMatchPages)），指定要将代码添加到的 URL。
*   `appAPI.dom.onDocumentStart.addCSS(String cssRules, [Array siteList])`
    此方法在文档开始加载时添加指定的 cssRules。可以选择指定字符串/正则表达式的数组（有关示例，请参见[http://docs.crossrider.com/#!/api/appAPI-method-isMatchPages](http://docs.crossrider.com/#!/api/appAPI-method-isMatchPages)），指定要将 CSS 添加到哪些 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T19:23:16.347

您可能想要检查 appAPI.dom.onDocumentStart 对象，因为即使在 appAPI.ready() 之后调用它似乎也没有定义。这是我得到的错误：

```
Uncaught TypeError: Cannot call method 'addCSS' of undefined 
```

谢谢！保持良好的工作！

# performance - MongoDB 将文档预加载到 RAM 中以获得更好的性能

> ID：13374342
> 
> 赞同：6
> 
> 时间：2012-11-14T06:59:09.933
> 
> 标签：performance, mongodb, memory, document, preload

我希望 MongoDB 将查询结果保存在 RAM 中更长的时间（如果内存可用，则说 30 分钟）。是否可以？或者有什么方法可以确保在后续查询之前将数据预加载到 RAM 中。

事实上，我想知道 MongoDB 的简单查询结果性能。我有一个 10GB RAM 的专用服务器，我的 db.stats() 如下；

```
db.stats();
{
    "db": "test",
    "collections":16,
    "objects":625690,
    "avgObjSize":68.90,
    "dataSize":43061996,
    "storageSize":1121402888,
    "numExtents":74,
    "indexes":25,
    "indexSize":28207200,
    "fileSize":469762048,
    "nsSizeMB":16,
    "ok":1
} 
```

现在，当我从 Web 服务查询单个文档（[如此处所述）时，它会在 1.3 秒内加载。](https://stackoverflow.com/questions/13372309/how-to-query-update-sub-document-in-mongodb-using-c-sharp-driver)相同查询的后续调用会在 400 毫秒内给出响应，然后几秒钟后，它再次开始需要 1.3 秒。看起来 MongoDB 已经从内存中丢失了先前查询的文档，因为没有其他查询要求映射到 RAM 的数据。

请对此进行解释，并让我知道如何使后续查询更快地响应。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T09:25:53.683

您在初始查询中观察到的性能问题可能是以下问题之一（按可能性的粗略顺序）：

1) 您的应用程序/Web 服务在第一次请求时需要初始化一些开销（即分配内存、设置连接池、解析 DNS，...）。

2）您请求的索引或数据尚未在内存中，因此需要加载。

3)[查询优化器](http://www.mongodb.org/display/DOCS/Query+Optimizer)在第一个请求上运行可能需要更长的时间，因为它正在比较您的查询模式的计划执行。

通过 shell 测试查询会非常有帮助`mongo`，并隔离开销是否与 MongoDB 或您的 Web 服务有关（而不是像您所做的那样对两者进行计时）。

以下是与 MongoDB 相关的一些注意事项。

### 缓存

MongoDB 没有内存中文档的“缓存”时间。它使用内存映射文件进行磁盘 I/O，内存中的文档基于您的活动查询（您最近加载的文档/索引）以及可用内存。操作系统的虚拟内存管理器负责[缓存](http://www.mongodb.org/display/DOCS/Caching)，通常会遵循最近最少使用 (LRU) 算法来决定哪些页面要换出内存。

### 内存使用情况

预期的行为是，随着时间的推移，MongoDB 将增长到使用所有可用内存来存储您的活动工作数据集。

查看您提供的`db.stats()`数字（并假设这是您*唯一*的数据库），看起来您的数据库大小当前约为 1Gb，因此您应该能够将所有内容保留在 10Gb 总 RAM 内，除非：

*   还有其他进程争夺内存
*   您已重新启动`mongod`服务器并且尚未请求这些文档/索引

在 MongoDB 2.2 中，有一个新[`touch`](http://docs.mongodb.org/manual/reference/command/touch/)命令可用于在服务器重新启动后将索引或文档加载到内存中。这应该只在初始启动时用于“预热”服务器，否则您可能会无助地迫使实际的“活动”数据超出内存。

例如，在 linux 系统上，您可以使用该`top`命令并且应该看到：

*   virtual bytes/VSIZE 将倾向于是整个数据库的大小
*   如果服务器没有运行其他进程，则驻留字节/RSIZE 将是机器的总内存（这包括文件系统缓存内容）
*   `mongod`不应使用交换（因为文件是内存映射的）

您可以使用该[`mongostat`](http://docs.mongodb.org/manual/reference/mongostat/)工具快速查看您的`mongod`活动......或者更有用的是，使用[MMS](https://mms.10gen.com/help/install.html)之类的服务来监控一段时间内的指标。

### 查询优化器

MongoDB[查询优化器](http://www.mongodb.org/display/DOCS/Query+Optimizer)每约 1,000 次写入操作比较查询模式的计划执行情况，然后缓存“获胜”查询计划，直到下次优化器运行……或者您明确调用[`explain()`](http://www.mongodb.org/display/DOCS/Explain)该查询。

这应该是一个简单的测试：在`mongo`shell中运行您的查询`.explain()`并查看 ms 计时，以及扫描的索引条目和文档的数量。explain() 的时间不是查询运行的实际时间，因为它包括比较计划的成本。典型的执行速度会快得多..您可以在`mongod`日志中查找慢查询。

默认情况下，MongoDB 将记录所有慢于 100 毫秒的查询，因此这为寻找要优化的查询提供了一个很好的起点。[`--slowms`](http://docs.mongodb.org/manual/reference/mongod/#cmdoption-mongod--slowms)您可以使用配置选项或使用[`Database Profiler`](http://www.mongodb.org/display/DOCS/Database+Profiler)命令调整慢速 ms 值。

### 进一步阅读 MongoDB 文档：

*   [缓存](http://www.mongodb.org/display/DOCS/Caching)
*   [检查服务器内存使用情况](http://www.mongodb.org/display/DOCS/Checking+Server+Memory+Usage)
*   [数据库探查器](http://www.mongodb.org/display/DOCS/Database+Profiler)
*   [解释](http://www.mongodb.org/display/DOCS/Explain)
*   [监控和诊断](http://www.mongodb.org/display/DOCS/Monitoring+and+Diagnostics)

# php - 将 PHP 数组转换为 Javascript 数组

> ID：13374345
> 
> 赞同：-1
> 
> 时间：2012-11-14T06:59:21.717
> 
> 标签：php, javascript

> **可能重复：**
> [将 PHP 数组转换为 javascript 的最佳方法](https://stackoverflow.com/questions/1387149/best-method-for-converting-a-php-array-to-javascript)

我正在尝试这样的事情：

```
<script>
  var product_name = new array();
  <?php
    foreach($products as $key=>$value) {
      echo "product_name[] = $key";
    }
  ?>
</script> 
```

但我无法将 PHP 数组转换为 Javascript 数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T07:07:21.183

```
<script>
var product_name = new Array();
<?php
    $i = 0;
    foreach($products as $key=>$value)
    {
      echo 'product_name['.$i.'] = '.$key.';';
      $i++;
    }
?>
</script> 
```

更好的方法是使用 json_encode()。

# ios - 我如何设置 NSZombieEnabled、SAutoreleaseFreedObjectCheckEnabled、MallocStackLoggingNoCompact、这些值虽然代码

> ID：13374348
> 
> 赞同：1
> 
> 时间：2012-11-14T06:59:36.453
> 
> 标签：ios, nszombieenabled

如何`NSZombieEnabled,SAutoreleaseFreedObjectCheckEnabled,MallocStackLoggingNoCompact`
通过代码设置这些值。我不想通过 Xcode 编辑方案设置这些值。知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T07:23:06.733

在 iOS 上，这将更难，因为您需要在运行之前执行代码`__CFInitialize`，并且您无法控制图像的加载方式（至少，如果您计划在商店中发布您的应用程序，则无法控制）。

对不起，我之前的回答是针对 OSX 的，我（错误地）认为它在 iOS 上是一样的，但经过一番思考，这不是因为你没有动态库。

# xcode - iOS：AudioComponent.h 中的解析问题

> ID：13374350
> 
> 赞同：1
> 
> 时间：2012-11-14T06:59:42.183
> 
> 标签：xcode, ios6

在 XCode 4.5.2、iOS6 中使用 AVAudioPlayer 时出现“解析问题”。有人遇到过这个问题吗？

# c++ - 为 OS X 10.6 编译？

> ID：13374355
> 
> 赞同：2
> 
> 时间：2012-11-14T07:00:20.890
> 
> 标签：c++, macos, compilation

通常，对于我的 OS X 版本，我一直在运行 10.6 的旧 Mac Book Pro 上编译我的应用程序。这保证了我支持这个版本的 OS X。

但是由于各种原因，MBP 不再是一个长期的选择，所以我一直在运行 10.8 的更新设备上进行编译。但是，当我这样做时，即使设置了 -mmacosx-version-min=10.6 标志，我的应用程序也无法在 10.6 上运行。设置标志时发生的错误是 libSystem.B.dynlib 中的“未找到符号：_wcsdup”

我查了这个错误，我能找到的唯一建议是直接链接到 10.6 SDK。但是，当我尝试将 10.6 SDK 从我的 MPB 复制到新机器时（因为 10.8 上未安装 10.6 SDK），它无法编译并出现类似“错误：bits/c++config.h: No such file or directory ” 我认为这是因为我“安装” SDK 的方式，尽管其他人在这方面取得了成功。

有没有人有办法解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:33:36.443

我可以使用此过程重新安装较旧的 SDK 和编译器：[我们如何恢复 ppc/ppc64 以及对 Xcode 4 的完整 10.4/10.5 SDK 支持？](https://stackoverflow.com/questions/5333490/how-can-we-restore-ppc-ppc64-as-well-as-full-10-4-10-5-sdk-support-to-xcode-4/11003002#11003002)

您需要在脚本中更改 xcode 安装的路径。

此外，您可能无法在以 10.6 为目标时使用 -std=c++11 ，因为您通常还需要 -stdlib=libc++ ，它仅在以 10.7 或更高版本为目标时可用。

Apple 自 10.7 起仅分发 libc++ 二进制文件。您可以构建自己的 libc++ 并将其与您的应用程序一起部署到 10.6 机器上。但是当目标低于 10.7 时，Apple 对编译器进行了硬编码以禁止 -stdlib=libc++。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T07:06:16.397

在 VMWare 或 VirtualBox 等 VM 中运行 10.6。

# android - Android Flip Animation 从周围生长和淡入，从周围收缩和淡出？

> ID：13374356
> 
> 赞同：4
> 
> 时间：2012-11-14T07:00:31.920
> 
> 标签：android, android-animation, flip

我想制作一个翻转动画，其中一个图像将从周围增长，然后缩小到一个点。生长时会淡入，收缩时会淡出。我已经尝试了许多 xml 代码，但正是这种代码对我来说仍然不可用。

例如，这是我尝试过的一个示例。它从周围生长，但没有消失。

```
<scale
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:interpolator="@android:anim/linear_interpolator"
  android:fromXScale="1.4"
  android:toXScale="0.0"
  android:fromYScale="1.4"
  android:toYScale="0.0"
  android:pivotX="50%"
  android:pivotY="50%"
  android:fillAfter="false"
  android:duration="1000"
/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T07:41:18.123

您可以为此使用 2 个动画集。

动画集 1 将用于放大和淡入。

动画集1结束后，启动动画集2

动画集 2 将用于收缩和淡出。

# magento - 如何从我的仪表板中删除我的订单

> ID：13374359
> 
> 赞同：2
> 
> 时间：2012-11-14T07:00:34.257
> 
> 标签：magento

我是magento的新手

有谁知道在哪里删除`My Orders`客户帐户仪表板上导航中的链接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T07:16:59.227

明白了 盖兹

这是非常棘手和困难的

只想评论下面的代码

在**sales.xml中**

```
<customer_account>
        <!-- Mage_Sales -->
        <reference name="customer_account_navigation">
            <action method="addLink" translate="label" module="sales"><name>orders</name><path>sales/order/history/</path><label>My Orders</label></action>
        </reference>

    </customer_account> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T11:07:13.223

我认为这是一个具体的链接，但如果你想删除任何指向客户仪表板的链接，你可以制作一个小模块来向块 Mage_Customer_Block_Account_Navigation 添加新操作

这里的解决方案：

您的扩展中的自定义块：

```
class CA_Removecustomerlinks_Block_Account_Navigation extends Mage_Customer_Block_Account_Navigation
{
    /**
     * Removes link by name
     *
     * @param string $name
     * @return Mage_Page_Block_Template_Links
     * @author @davidselo
     * @company @compraAmiga
     */
    public function removeLinkByName($name)
    {
        foreach ($this->_links as $k => $v) {
            if ($v->getName() == $name) {
                unset($this->_links[$k]);
            }
        }

        return $this;
    }

} 
```

模块的配置

# 配置文件

```
<?xml version="1.0" encoding="UTF-8"?>
<config>
    <modules>
        <CA_Removecustomerlinks>
            <version>0.1.0</version>
        </CA_Removecustomerlinks>
    </modules>
    <global>
        <blocks>
            <customer>              
                   <rewrite>
                        <account_navigation>CA_Removecustomerlinks_Block_Account_Navigation</account_navigation>
                    </rewrite>
            </customer>
        </blocks>
    </global>
</config> 
```

现在您可以在 local.xml 中随意删除

```
<customer_account>
        <reference name="customer_account_navigation">
                <action method="removeLinkByName"><name>recurring_profiles</name></action>
                <action method="removeLinkByName"><name>billing_agreements</name></action>
                <action method="removeLinkByName"><name>downloadable_products</name></action>
        </reference>   
    </customer_account> 
```

# css - 旋转到横向或在更大的显示器上使用时保持站点宽度

> ID：13374362
> 
> 赞同：0
> 
> 时间：2012-11-14T07:00:52.307
> 
> 标签：css, scaling, viewport

我有一个移动网站，它在纵向模式下在手机和小型平板电脑上运行良好。

[http://taviationmuseum.appspot.com/](http://taviationmuseum.appspot.com/)

该站点在横向模式下运行良好，但由于图像的性质，缩放看起来不理想。

相反，我想大致保持站点纵向的宽度，并在任一站点上用空格将内容“居中”。

这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T07:46:31.570

`front-spread.jpg`首先，您现在可以通过最大分辨率重新切片您的图像，`640*905`所以现在如果我们在更大的屏幕上查看它，它会延迟像素。因此，如果您以最大值重新切片并`media-queries`根据各种屏幕尺寸进行设置，它将根据您的要求自动调整..

# java - 为什么 Clojure 不遵循 Java 代码中最常见的缩进样式？

> ID：13374366
> 
> 赞同：3
> 
> 时间：2012-11-14T07:01:11.790
> 
> 标签：java, clojure

我在 Clojure 中查看 java 代码。我发现压痕对我来说很奇怪。

我已经习惯了[http://www.oracle.com/technetwork/java/javase/documentation/codeconventions-136091.html#262](http://www.oracle.com/technetwork/java/javase/documentation/codeconventions-136091.html#262)的缩进风格。而且大多数 IDE 都以这种方式配置了自动格式化。为什么 Clojure 不遵循这种风格？

更新：

我的意思是在 java 中实现的 Clojure 部分，例如[https://github.com/clojure/clojure/blob/master/src/jvm/clojure/lang/ARef.java](https://github.com/clojure/clojure/blob/master/src/jvm/clojure/lang/ARef.java)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-14T07:22:31.153

您所指的代码使用了[Whitesmiths 风格](http://en.wikipedia.org/wiki/Indent_style#Whitesmiths_style)的大括号缩进。

这是个人喜好的问题。它没有什么问题，除了它不是很常见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T07:12:12.187

为什么要遵循 Java 缩进风格？Clojure 遵循 Lisp。

# c# - 值未反映在进度条上

> ID：13374367
> 
> 赞同：0
> 
> 时间：2012-11-14T07:01:17.597
> 
> 标签：c#

朋友们，这是我的代码（如下）。我无法弄清楚为什么值的变化没有反映在进度条上。

```
 void Code()
    {
        string key;
        for (int i = 0; i < 26; i++)
            for (int j = 0; j < 10; j++)
                for (int k = 0; k < 26; k++)
                    for (int l = 0; l < 10; l++)
                        for (int m = 0; m < 26; m++)
                        {
                            key = (char)(65 + i) + " " + j.ToString() + " " + (char)(65 + k) + " " + l.ToString() + " " + (char)(65 + m);
                            File.AppendAllText("D:\\Codes.txt", key + Environment.NewLine);
                            val = (i + 1) * (j + 1) * (k + 1) * (l + 1) * (m + 1);
                            MyProgressBar.Value = val;
                            MyProgressBar.Text = (val * 100 / 1757600).ToString() + "%";
                            if (val == 1757600)                                                                    
                                MessageBox.Show("Code generation completed");
                        }
    } 
```

进度条的值和文本属性与加载时相同。请帮我解决这个问题。提前感谢您的宝贵意见。. .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T07:02:58.190

您的代码阻塞了 UI 线程，这就是它不更新的原因。您需要使用某种类型的后台线程来触发通知 UI 线程进行更新的事件。谷歌“后台处理c#”了解一些细节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T08:36:46.923

如果您为每个值更改更新它，它仍然会阻止 UI。而这个 File.AppendAllText 是你的代码中最慢的部分。如果我将它注释掉，它会在几秒钟内运行到最后。你想尝试将所有代码保存到一个数组中，然后将它们全部打印在一度？我想这会快一点。

```
 string[] key = new string[1757600];

            private void backgroundWorker3_DoWork(object sender, DoWorkEventArgs e)
            {
                int val = 0;
                for (int i = 0; i < 26; i++)
                {
                    for (int j = 0; j < 10; j++)
                    {
                        for (int k = 0; k < 26; k++)
                        {
                            for (int l = 0; l < 10; l++)
                            {
                                for (int m = 0; m < 26; m++)
                                {
                                    key[val] = (char) (65 + i) + " " + j.ToString() + " " + (char) (65 + k) + " " + l.ToString() + " " +
                                          (char) (65 + m);
                                    //File.AppendAllText("D:\\Codes.txt", key + Environment.NewLine);
                                    //val = (i + 1)*(j + 1)*(k + 1)*(l + 1)*(m + 1);
                                    val++;
                                }
                            }
                    backgroundWorker3.ReportProgress(val);
                        }
                    }
                }
            }

            private void backgroundWorker3_ProgressChanged(object sender, ProgressChangedEventArgs e)
            {
                MyProgressBar.Value = e.ProgressPercentage;
                MyProgressBar.Text = e.ProgressPercentage.ToString() + "%";
                //if (e.ProgressPercentage == 1757600)
            }

            private void backgroundWorker3_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
            {
                File.WriteAllLines("D:\\Codes.txt", key);
                MessageBox.Show("Code generation completed");
            } 
```

这段代码只需要几秒钟；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T07:05:31.910

ProgressBar 的取值范围为 0 到 100

```
MyProgressBar.Value = (val * 100 / 1757600); 
```

# c# - 如何在单击 asp.net 中的链接按钮时选择中间选项卡

> ID：13374371
> 
> 赞同：1
> 
> 时间：2012-11-14T07:01:26.603
> 
> 标签：c#, asp.net

我正在一个应用程序中工作，其中有一个链接按钮收件箱，当用户单击它时，“default.aspx”页面打开并选择了第一个选项卡，但我要求在收件箱单击的情况下必须选择中间选项卡并显示打开。当用户不点击收件箱“default.aspx”的页面必须选择第一个选项卡。点击事件代码是

```
protected void btnInbox_Click(object sender, EventArgs e)
{
    Response.Redirect("default.aspx");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T07:22:19.917

我认为最好使用 jquery Ui 选项卡来满足您的要求，而不是为其编写服务器脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T07:44:29.737

在您的 aspx 页面的正文标记的开头尝试此操作

```
$('#nameOftabs').tabs({ selected: index }); 
```

其中 index 将是您希望选择的默认选项卡。

希望这可以帮助

# ios - 源图像和 UIImage 大小不同

> ID：13374378
> 
> 赞同：0
> 
> 时间：2012-11-14T07:02:09.200
> 
> 标签：ios, uiimageview, uiimage, png

所以我正在使用 UIImageView 为一组图像制作动画。它有效，但事情正在奇怪地调整大小。我在扩展的 UIImageView 类中初始化所有内容，如下所示：

```
tImage = [UIImage imageNamed:[NSString stringWithFormat:@"%@.png",tName]];
self = [self initWithImage: tImage];

NSMutableArray *frameArray = [[NSMutableArray alloc] initWithCapacity:0];
UIImage *tFrame;

    for(int i = 1; i < prp.frames + 1; i++) {
        tFrame = [UIImage imageNamed:[NSString stringWithFormat:@"%@%d.png", tName, i]];
        [frameArray addObject:tFrame];
    }

CGRect cropRect = CGRectMake(0.0, 0.0, tFrame.size.width, tFrame.size.height);
self.bounds = cropRect;
[self setContentMode:UIViewContentModeScaleAspectFit];
self.clipsToBounds = YES;

[self setAnimationImages:frameArray];
[self setAnimationDuration:prp.frameDur];
[self startAnimating]; 
```

我从自定义属性结构中传递的值在哪里`prp.frames`和是。`prp.frameDur`

我遇到的问题是图像的大小在每个阶段都不同。我的源图像都是 59x47。tImage (UIImage) 设置为 46x26（检查 size.width 和 size.height 属性）。tFrame (UIImage) 设置为 53x35（检查相同的属性）。有谁知道为什么会发生这种情况？为什么它不初始化为原始图像大小（59x47），为什么基于它们的两个 UIImage 对象会彼此不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T00:21:59.953

我自己想通了。我已通过替换将与 tImage 一起使用的源图像从 46x26 大小更改为 59x47（两者之间的图像名称相同）。它仍在使用 46x26 图像，在缓存中或我猜的东西中。我通过清理和重建项目来修复它。一切都很好。所以这可以关闭或其他。

# memcached - 与 memcached 相比，membase 的用例是什么？

> ID：13374383
> 
> 赞同：3
> 
> 时间：2012-11-14T07:02:35.750
> 
> 标签：memcached, couchbase, membase

来自[维基百科](http://en.wikipedia.org/wiki/Memcached)，

*对于熟悉 memcached 的人，Couchbase Server 提供在线客户端协议兼容性，但旨在添加磁盘持久性（具有分层存储管理）、数据复制、实时集群重新配置、重新平衡和数据分区的多租户。*

在这种情况下，memcached 的用例是什么（例如：缺乏磁盘持久性对 memcached 有什么好处）以及 membase 的用例是什么（例如：当 memcache 可以与磁盘持久性一起工作时，哪些特定情况需要这样做特征）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T05:46:01.703

Memcached 是一个非常简单的产品，作为内存缓存系统的基础。如果您使用 memcached，那么您还需要某种持久性数据库。例如，如果您使用 mysql 并且想要更好的性能，您可以将 memcached 放在它前面以加快速度。

Couchbase 是一个产品，它在 memcached 层下包含一个持久层。这意味着 Couchbase 是您的数据库，您不需要 mysql 之类的东西。最重要的是，您可以获得无模式的数据层、轻松的可扩展性和始终在线支持的数据复制。

在即将发布的 Couchbase 2.0 中，您还将获得查询支持和跨数据中心复制。

# xslt - 如何在 XSLT 中重置页码

> ID：13374395
> 
> 赞同：1
> 
> 时间：2012-11-14T07:04:44.390
> 
> 标签：xslt, xslt-1.0

我有以下 XSLT 结构：

```
<fo:layout-master-set>
    <fo:simple-page-master master-name="simpleA4" >                    
      <fo:region-body/>
      <fo:region-after extent="0.4cm"/>          
    </fo:simple-page-master>             
</fo:layout-master-set>

 <fo:page-sequence master-reference="simpleA4" >

    <fo:static-content flow-name="xsl-region-after">
      <fo:block font-size="5pt">
        Page <fo:page-number  />
      </fo:block>
    </fo:static-content>

    <fo:flow  flow-name="xsl-region-body">   
        <fo:block font-size="8pt">
            <!-Loop goes here->
        </fo:block>
    </fo:flow>

</fo:page-sequence> 
```

`<fo:page-number />`关于在体内循环，我需要从 1 重新开始。是否可以重置页码或任何替代想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T16:01:09.080

我觉得可以，试试这个

```
<fo:page-sequence master-reference="simpleA4" initial-page-number="1" force-page-count="no-force"> 
```

并将`fo:page-sequence`in you 循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T12:16:57.633

我不确定您是否可以直接通过 xslt 重置 fo:page-number，因为页码是由 FOP 分配的。当页面包含动态内容且页面中包含未知行时，很难找出页码。你有没有`<fo:page-number-citation/>`为此尝试过。

我建议你如果你确定每一行都有固定的行，你可以手动生成行号，而不是使用`<fo:page-number/>`. 删除`fo:static-content`用于生成页码的节点并手动计算页码并将其添加到每个页面的末尾。

让我们假设您的页面有 80 行，在正文中

```
for each 1 to totalRows
  add page header
  when rowCount%80=0
    add pageNumber 
```

# algorithm - 有人可以用 PV 形式解释生产者和消费者吗？

> ID：13374397
> 
> 赞同：3
> 
> 时间：2012-11-14T07:05:08.663
> 
> 标签：algorithm, semaphore, producer-consumer

[维基百科有一个每个人都使用的示例代码](http://en.wikipedia.org/wiki/Semaphore_%28programming%29#Example%3a_Producer.2Fconsumer_problem)。

老实说，我不明白P，V的事情。

它首先说

> 如果队列为空，消费者必须等待生产者生产一些东西。

但后来它说

> 例子。单个消费者进入其临界区。由于 fullCount 为 0，因此消费者阻塞。

我认为阻塞意味着等待？我的作业要求我了解这种二进制信号量的使用，然后为不同类型的生产者-消费者问题实施解决方案。但是我不知道何时增加（在 P 和 V 中设置哪个共享变量）或减少。所以希望有懂行的可以给我解释一下？如果可以的话，把我当成非cs学生吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T07:52:26.083

想象一下几个人搬进一所房子。

他们有一辆装满箱子的卡车，需要卸到房子里。

于是他们决定分工。

*   Paul Producer 说他会从卡车上取下箱子，然后在人行道上排成一排。

*   Charlie Consumer 说他会把箱子从人行道上拿走，然后带回家。

它运行良好一段时间。但随后彼得出现了，他主动提出帮助保罗弟兄。突然，人行道上堆满了箱子，查理还没来得及捡起它们。他对此感到沮丧，并打电话给康拉德和卡尔兄弟。但是康拉德伤了他的胳膊，卡尔一直在玩他的手机，所以现在：

*   有时生产者（保罗、彼得）的速度仍然超过消费者，人行道上挤满了人，人们不得不拿着盒子站在周围

*   有时消费者（查理、康拉德、卡尔）的速度超过了生产者，他们站在人行道上而不是在家里拆包

所以每个人都制定了一个规则：去之前检查人行道！

不幸的是，它没有帮助。保罗和彼得在卡车的两端清空，两人都看到一条几乎满员的人行道，但显然有足够的空间再放一个箱子。所以他们俩都捡起一个盒子，走过去，然后互相撞在一起（比赛条件！）。

最后昆西队列出现了。他制定了三个新规则：

1.  保罗/彼得：你们俩都必须和我核实，以确保在你下车之前有一个空位：

2.  康拉德/卡尔/查理：你必须先和我核实一下，确保在你取货之前有一个盒子：

3.  最后，因为只有我一个人，如果不止一个人在搞乱线路，我无法跟踪这一点。所以即使我在第 1 步或第 2 步给了你绿灯，你仍然需要检查确保没有其他人在线。

所以彼得/保罗的最终规则变成：

```
waitFor(spaceOnSideWalk)
waitFor(permissionToUseSideWalk))
dropBoxOnSidewalk(box)
nowSomeoneElseCanUse(permissionToUseSideWalk))
nowSomeoneElseCanUse(boxesOnSideWalk) 
```

（和查理/卡尔/康拉德互补）

如果你想到

```
waitFor == decrement == P
nowSomeoneElseCanUse == increment == V 
```

然后，您将在维基百科页面上获得准确的算法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T07:24:23.550

如果 fullCount 信号量为 0 并且消费者执行 P(fullCount)，它将阻塞（等待）直到生产者通过执行 V(fullCount) 增加信号量。

消费者和生产者都使用 P(useQueue) 来确保他们拥有更改队列的专有权利。完成更改后，他们将执行 V(useQueue) 再次释放队列。

如果这不能回答您的问题，我认为您需要更好地说明您的问题。

# xml - 通过xslt1中的xml元素对重复节点进行xsl分组

> ID：13374401
> 
> 赞同：1
> 
> 时间：2012-11-14T07:06:08.197
> 
> 标签：xml, xslt, xml-parsing, xslt-1.0, xsl-grouping

我有一个复杂的 xml 结构，如下所示：

```
 <Items>
      <Item>
          <ItemTexts>
            <ItemText>
              <ItemTextsType>type1</ItemTextsType>
              <ItemTextsTypeDesc>description11</ItemTextsTypeDesc>
              <ItemTextsLine>1</ItemTextsLine>
            </ItemText>
            <ItemText>
              <ItemTextsType>type1</ItemTextsType>
              <ItemTextsTypeDesc>description12</ItemTextsTypeDesc>
              <ItemTextsLine>2</ItemTextsLine>
            </ItemText>
            <ItemText>
              <ItemTextsType>type2</ItemTextsType>
              <ItemTextsTypeDesc>description21</ItemTextsTypeDesc>
              <ItemTextsLine>3</ItemTextsLine>
            </ItemText>
            <ItemText>
              <ItemTextsType>type2</ItemTextsType>
              <ItemTextsTypeDesc>description22</ItemTextsTypeDesc>
              <ItemTextsLine>4</ItemTextsLine>
            </ItemText>
          </ItemTexts>
         </Item>
    <Item>
          <ItemTexts>
            <ItemText>
              <ItemTextsType>type1</ItemTextsType>
              <ItemTextsTypeDesc>description11</ItemTextsTypeDesc>
              <ItemTextsLine>1</ItemTextsLine>
            </ItemText>
            <ItemText>
              <ItemTextsType>type1</ItemTextsType>
              <ItemTextsTypeDesc>description12</ItemTextsTypeDesc>
              <ItemTextsLine>2</ItemTextsLine>
            </ItemText>
            <ItemText>
              <ItemTextsType>type2</ItemTextsType>
              <ItemTextsTypeDesc>description21</ItemTextsTypeDesc>
              <ItemTextsLine>3</ItemTextsLine>
            </ItemText>
            <ItemText>
              <ItemTextsType>type2</ItemTextsType>
              <ItemTextsTypeDesc>description22</ItemTextsTypeDesc>
              <ItemTextsLine>4</ItemTextsLine>
            </ItemText>
          </ItemTexts>
         </Item>
<Item>
          <ItemTexts>
            <ItemText>
              <ItemTextsType>type1</ItemTextsType>
              <ItemTextsTypeDesc>description11</ItemTextsTypeDesc>
              <ItemTextsLine>1</ItemTextsLine>
            </ItemText>
            <ItemText>
              <ItemTextsType>type1</ItemTextsType>
              <ItemTextsTypeDesc>description12</ItemTextsTypeDesc>
              <ItemTextsLine>2</ItemTextsLine>
            </ItemText>
            <ItemText>
              <ItemTextsType>type2</ItemTextsType>
              <ItemTextsTypeDesc>description21</ItemTextsTypeDesc>
              <ItemTextsLine>3</ItemTextsLine>
            </ItemText>
            <ItemText>
              <ItemTextsType>type2</ItemTextsType>
              <ItemTextsTypeDesc>description22</ItemTextsTypeDesc>
              <ItemTextsLine>4</ItemTextsLine>
            </ItemText>
          </ItemTexts>
         </Item>
    <Item>
          <ItemTexts>
            <ItemText>
              <ItemTextsType>type3</ItemTextsType>
              <ItemTextsTypeDesc>description31</ItemTextsTypeDesc>
              <ItemTextsLine>1</ItemTextsLine>
            </ItemText>
            <ItemText>
              <ItemTextsType>type3</ItemTextsType>
              <ItemTextsTypeDesc>description32</ItemTextsTypeDesc>
              <ItemTextsLine>2</ItemTextsLine>
            </ItemText>
            <ItemText>
              <ItemTextsType>type2</ItemTextsType>
              <ItemTextsTypeDesc>description21</ItemTextsTypeDesc>
              <ItemTextsLine>3</ItemTextsLine>
            </ItemText>
            <ItemText>
              <ItemTextsType>type2</ItemTextsType>
              <ItemTextsTypeDesc>description22</ItemTextsTypeDesc>
              <ItemTextsLine>4</ItemTextsLine>
            </ItemText>
          </ItemTexts>
         </Item>
    </Items> 
```

我在每个项目上使用 xsl 运行，例如：

```
<xsl:for-each select="Items/Item"> 
```

我需要一个如何单独分组`<ItemText>`的示例， 因此结果将如下所示：`<ItemTextsType>``<Item>`

首先`<Item>`在这个例子中：

> **类型1**
> 
> ```
> description11
> 
> description12 
> ```
> 
> **类型2**
> 
> 描述21
> 
> 描述22

对于`Item`本例中的第二个：

> **类型3**
> 
> ```
> description31
> 
> description32 
> ```
> 
> **类型2**
> 
> 描述21
> 
> 描述22

当然，我会将结果安排在如下表格中：

```
<table width="100%" border="1" style="display: block;">
        <tbody>
            <tr>
                <td id="SelectedRowLinkageContents">
                    <table width="100%" dir="ltr">
                        <tbody>
                            <tr style="background-color: #507CD1; text-align: center">
                                <td colspan="3" style="font: bold; color: white">
                                    Item1
                                </td>
                            </tr>
                            <tr>
                                <td style="height: 35px; font: bold; color: #507CD1;">
                                    type1
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    desription11
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    desription12
                                </td>
                            </tr>
                            <tr>
                                <td style="height: 35px; font: bold; color: #507CD1;">
                                    type2
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    desription21
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    desription22
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    desription23
                                </td>
                            </tr>
                        </tbody>
                    </table>

                    <table width="100%" dir="ltr">
                        <tbody>
                            <tr style="background-color: #507CD1; text-align: center">
                                <td colspan="3" style="font: bold; color: white">
                                    Item2
                                </td>
                            </tr>
                            <tr>
                                <td style="height: 35px; font: bold; color: #507CD1;">
                                    type1
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    desription11
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    desription12
                                </td>
                            </tr>
                            <tr>
                                <td style="height: 35px; font: bold; color: #507CD1;">
                                    type2
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    desription21
                                </td>
                            </tr>

                            <tr>
                                <td>
                                    desription23
                                </td>
                            </tr>
                        </tbody>
                    </table>

                    <table width="100%" dir="ltr">
                        <tbody>
                            <tr style="background-color: #507CD1; text-align: center">
                                <td colspan="3" style="font: bold; color: white">
                                    Item3
                                </td>
                            </tr>
                            <tr>
                                <td style="height: 35px; font: bold; color: #507CD1;">
                                    type1
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    desription11
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    desription12
                                </td>
                            </tr>
                            <tr>
                                <td style="height: 35px; font: bold; color: #507CD1;">
                                    type2
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    desription21
                                </td>
                            </tr>

                            <tr>
                                <td>
                                    desription23
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </td>
            </tr>
        </tbody>
    </table> 
```

关键是每个都有单独的分组`<Item>`到它自己的`<table>`里面，`<table>`里面有分组依据`<ItemTextsType>`

我尝试过类似的东西

```
<xsl:key name="item-texts-type" match="ItemText" use="ItemTextsType" />

<xsl:for-each select="ItemTexts/ItemText[count(. | key('item-texts-type', ItemTextsType)[1]) = 1]">

                        <xsl:sort select="ItemTextsType" />
                        <tr>
                          <td style ="height:35px;font: bold; color:#507CD1;">
                            <xsl:value-of select="ItemTextsType" />
                          </td>
                        </tr>

                        <xsl:for-each select="key('item-texts-type', ItemTextsType)">
                          <tr>
                            <td>
                               <xsl:value-of select="ItemTextsTypeDesc" />
                            </td>
                          </tr>
                        </xsl:for-each>

                      </xsl:for-each> 
```

但它只适用于**非**重复节点（如果只有一个`<Item>`它会正常工作）。 **我无法更改 xml 因为它来自 customer 。**

请帮助我，我需要它尽快。

谢谢 ！！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T08:27:28.900

由于一些差异，仍然很难说出所需的解决方案是什么 - 例如，您的输入 XML 有 4 个`<Item>`元素，但您所需的输出只考虑了其中的 3 个。此外，所需输出中的一些描述与其在输入 XML 文档中的预期位置不匹配。

也就是说，如果我们专注于您所说的所需解决方案：

> “关键是每个都有单独的分组`<Item>`到它自己的`<table>`里面，`<table>`里面有分组 `<ItemTextsType>`”

...那么这应该会让你朝着正确的方向前进。

**当这个 XSLT：**

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
version="1.0">
  <xsl:output omit-xml-declaration="yes" indent="yes" />
  <xsl:strip-space elements="*" />

  <xsl:key
    name="kItemTextByType"
    match="ItemText"
    use="concat(generate-id(ancestor::Item[1]), '+', ItemTextsType)" />

  <xsl:template match="node()|@*">
    <xsl:copy>
      <xsl:apply-templates select="node()|@*" />
    </xsl:copy>
  </xsl:template>

  <xsl:template match="/*">
    <table width="100%" border="1" style="display: block;">
      <tbody>
        <tr>
          <td id="SelectedRowLinkageContents">
            <xsl:apply-templates />
          </td>
        </tr>
      </tbody>
    </table>
  </xsl:template>

  <xsl:template match="Item">
    <table width="100%" dir="ltr">
      <tbody>
        <tr style="background-color: #507CD1; text-align: center">
          <td colspan="3" style="font: bold; color: white">
            <xsl:value-of select="concat('Item', position())" />
          </td>
        </tr>
        <xsl:apply-templates 
          select="ItemTexts/ItemText[
            generate-id() = 
            generate-id(
              key(
                'kItemTextByType', 
                 concat(generate-id(current()), '+', ItemTextsType)
              )[1]
            )
          ]">
          <xsl:sort select="ItemTextsType" />
        </xsl:apply-templates>
      </tbody>
    </table>
  </xsl:template>

  <xsl:template match="ItemText">
    <tr>
      <td style="height: 35px; font: bold; color: #507CD1;">
        <xsl:value-of select="ItemTextsType" />
      </td>
    </tr>
    <xsl:for-each
      select="key(
        'kItemTextByType', 
        concat(
          generate-id(ancestor::Item[1]),
          '+',
          ItemTextsType
        )
      )"
    >
      <xsl:sort select="ItemTextsTypeDesc" />
      <tr>
        <td>
          <xsl:value-of select="ItemTextsTypeDesc" />
        </td>
      </tr>
    </xsl:for-each>
  </xsl:template>

</xsl:stylesheet> 
```

**...应用于提供的输入 XML：**

```
<?xml version="1.0" encoding="UTF-8"?>
<Items>
  <Item>
    <ItemTexts>
      <ItemText>
        <ItemTextsType>type1</ItemTextsType>
        <ItemTextsTypeDesc>description11</ItemTextsTypeDesc>
        <ItemTextsLine>1</ItemTextsLine>
      </ItemText>
      <ItemText>
        <ItemTextsType>type1</ItemTextsType>
        <ItemTextsTypeDesc>description12</ItemTextsTypeDesc>
        <ItemTextsLine>2</ItemTextsLine>
      </ItemText>
      <ItemText>
        <ItemTextsType>type2</ItemTextsType>
        <ItemTextsTypeDesc>description21</ItemTextsTypeDesc>
        <ItemTextsLine>3</ItemTextsLine>
      </ItemText>
      <ItemText>
        <ItemTextsType>type2</ItemTextsType>
        <ItemTextsTypeDesc>description22</ItemTextsTypeDesc>
        <ItemTextsLine>4</ItemTextsLine>
      </ItemText>
    </ItemTexts>
  </Item>
  <Item>
    <ItemTexts>
      <ItemText>
        <ItemTextsType>type1</ItemTextsType>
        <ItemTextsTypeDesc>description11</ItemTextsTypeDesc>
        <ItemTextsLine>1</ItemTextsLine>
      </ItemText>
      <ItemText>
        <ItemTextsType>type1</ItemTextsType>
        <ItemTextsTypeDesc>description12</ItemTextsTypeDesc>
        <ItemTextsLine>2</ItemTextsLine>
      </ItemText>
      <ItemText>
        <ItemTextsType>type2</ItemTextsType>
        <ItemTextsTypeDesc>description21</ItemTextsTypeDesc>
        <ItemTextsLine>3</ItemTextsLine>
      </ItemText>
      <ItemText>
        <ItemTextsType>type2</ItemTextsType>
        <ItemTextsTypeDesc>description22</ItemTextsTypeDesc>
        <ItemTextsLine>4</ItemTextsLine>
      </ItemText>
    </ItemTexts>
  </Item>
  <Item>
    <ItemTexts>
      <ItemText>
        <ItemTextsType>type1</ItemTextsType>
        <ItemTextsTypeDesc>description11</ItemTextsTypeDesc>
        <ItemTextsLine>1</ItemTextsLine>
      </ItemText>
      <ItemText>
        <ItemTextsType>type1</ItemTextsType>
        <ItemTextsTypeDesc>description12</ItemTextsTypeDesc>
        <ItemTextsLine>2</ItemTextsLine>
      </ItemText>
      <ItemText>
        <ItemTextsType>type2</ItemTextsType>
        <ItemTextsTypeDesc>description21</ItemTextsTypeDesc>
        <ItemTextsLine>3</ItemTextsLine>
      </ItemText>
      <ItemText>
        <ItemTextsType>type2</ItemTextsType>
        <ItemTextsTypeDesc>description22</ItemTextsTypeDesc>
        <ItemTextsLine>4</ItemTextsLine>
      </ItemText>
    </ItemTexts>
  </Item>
  <Item>
    <ItemTexts>
      <ItemText>
        <ItemTextsType>type3</ItemTextsType>
        <ItemTextsTypeDesc>description31</ItemTextsTypeDesc>
        <ItemTextsLine>1</ItemTextsLine>
      </ItemText>
      <ItemText>
        <ItemTextsType>type3</ItemTextsType>
        <ItemTextsTypeDesc>description32</ItemTextsTypeDesc>
        <ItemTextsLine>2</ItemTextsLine>
      </ItemText>
      <ItemText>
        <ItemTextsType>type2</ItemTextsType>
        <ItemTextsTypeDesc>description21</ItemTextsTypeDesc>
        <ItemTextsLine>3</ItemTextsLine>
      </ItemText>
      <ItemText>
        <ItemTextsType>type2</ItemTextsType>
        <ItemTextsTypeDesc>description22</ItemTextsTypeDesc>
        <ItemTextsLine>4</ItemTextsLine>
      </ItemText>
    </ItemTexts>
  </Item>
</Items> 
```

**...想要的结果是（我认为）产生：**

```
<table width="100%" border="1" style="display: block;">
  <tbody>
    <tr>
      <td id="SelectedRowLinkageContents">
        <table width="100%" dir="ltr">
          <tbody>
            <tr style="background-color: #507CD1; text-align: center">
              <td colspan="3" style="font: bold; color: white">Item1</td>
            </tr>
            <tr>
              <td style="height: 35px; font: bold; color: #507CD1;">type1</td>
            </tr>
            <tr>
              <td>description11</td>
            </tr>
            <tr>
              <td>description12</td>
            </tr>
            <tr>
              <td style="height: 35px; font: bold; color: #507CD1;">type2</td>
            </tr>
            <tr>
              <td>description21</td>
            </tr>
            <tr>
              <td>description22</td>
            </tr>
          </tbody>
        </table>
        <table width="100%" dir="ltr">
          <tbody>
            <tr style="background-color: #507CD1; text-align: center">
              <td colspan="3" style="font: bold; color: white">Item2</td>
            </tr>
            <tr>
              <td style="height: 35px; font: bold; color: #507CD1;">type1</td>
            </tr>
            <tr>
              <td>description11</td>
            </tr>
            <tr>
              <td>description12</td>
            </tr>
            <tr>
              <td style="height: 35px; font: bold; color: #507CD1;">type2</td>
            </tr>
            <tr>
              <td>description21</td>
            </tr>
            <tr>
              <td>description22</td>
            </tr>
          </tbody>
        </table>
        <table width="100%" dir="ltr">
          <tbody>
            <tr style="background-color: #507CD1; text-align: center">
              <td colspan="3" style="font: bold; color: white">Item3</td>
            </tr>
            <tr>
              <td style="height: 35px; font: bold; color: #507CD1;">type1</td>
            </tr>
            <tr>
              <td>description11</td>
            </tr>
            <tr>
              <td>description12</td>
            </tr>
            <tr>
              <td style="height: 35px; font: bold; color: #507CD1;">type2</td>
            </tr>
            <tr>
              <td>description21</td>
            </tr>
            <tr>
              <td>description22</td>
            </tr>
          </tbody>
        </table>
        <table width="100%" dir="ltr">
          <tbody>
            <tr style="background-color: #507CD1; text-align: center">
              <td colspan="3" style="font: bold; color: white">Item4</td>
            </tr>
            <tr>
              <td style="height: 35px; font: bold; color: #507CD1;">type2</td>
            </tr>
            <tr>
              <td>description21</td>
            </tr>
            <tr>
              <td>description22</td>
            </tr>
            <tr>
              <td style="height: 35px; font: bold; color: #507CD1;">
              type3</td>
            </tr>
            <tr>
              <td>description31</td>
            </tr>
            <tr>
              <td>description32</td>
            </tr>
          </tbody>
        </table>
      </td>
    </tr>
  </tbody>
</table> 
```

**...在 HTML 页面中呈现时，如下所示：**

![HTML 表格](../Images/aecbb3d833979856cd0bd2928d20d6d8.png)

# jsf-2 - 如何使用整个页面的自定义验证器类？

> ID：13374416
> 
> 赞同：1
> 
> 时间：2012-11-14T07:08:12.850
> 
> 标签：jsf-2

我的表单中有 3 个文本框（用`id`s 表示 - A、B、C）。我已经在我的表单中关联`f:validator validatorId="abc"`到我的一个输入文本框（比如`id`- 'A'）。

现在的问题是，我可以获取用户在我的验证器类中为文本框 B 和 C 输入的任何值吗？

另外，有什么方法可以在提交期间在我的验证器类中一次性对整个页面执行验证，而不是分别关联`f:validator`到每个组件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T12:03:16.537

对于您的第二个问题**：**我对此一无所知。[Ask BalusC ;)]
对于您的第一个问题**：**
是的，您可以获得文本框 B 和 C 的值。为此，您必须将这些值作为**文本属性传递框 A**。请参见以下示例。**文本框 A 中**引入了两个属性，其他文本框的值已分配为这些属性的值。

```
<h:form>
  <h:inputText id="txtA">
    <f:validator validatorId="textValidator"/>
    <f:attribute name="attrib_textB" value="#{myBean.textB}"/>
    <f:attribute name="attrib_textC" value="#{myBean.textC}"/>
  </h:inputText>

  <h:inputText value="#{myBean.textB}">
    <a4j:support event="onchange"/>
  </h:inputText>

  <h:inputText value="#{myBean.textC}">
    <a4j:support event="onchange"/>
  </h:inputText>

  <a4j:commandButton value="Save"/>
</h:form> 
```

现在在您的验证器类中，您可以像这样访问这些变量。

```
public void validate(FacesContext arg0, UIComponent arg1, Object arg2) throws ValidatorException {
    String textA = (String) arg2;//value of text box A
    String textB = (String) arg1.getAttributes().get("attrib_textB");//value of text box B
    String textC = (String) arg1.getAttributes().get("attrib_textC");//value of text box C
} 
```

就这样。请注意，我的“ **MyBean ”类具有用于***textA*和*textB*字符串字段的 getter 和 setter 方法。

# sql-server - 从同一 ID 号获取 DATEDIFF 结果的平均值

> ID：13374418
> 
> 赞同：1
> 
> 时间：2012-11-14T07:08:20.123
> 
> 标签：sql-server

这是我目前的桌子。

![在此处输入图像描述](../Images/5ded0447f3ec57707b7122dadf0189cb.png)

员工将有多个订单日期和发货日期。我想得到的是每个员工 Diff 总和的平均值。

一直在努力实现这一目标。

这是我到目前为止所做的。

```
USE Northwind 

SELECT 
    e.EmployeeID, 
    e.LastName, 
    o.OrderDate, 
    o.ShippedDate, 
    DATEDIFF(DAY, o.OrderDate, o.ShippedDate) as Diff 
FROM 
    Employees as e 
    JOIN Orders as o ON e.EmployeeID = o.EmployeeID 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T07:13:56.230

```
SELECT 
    e.EmployeeID, 
    AVG(CAST(DATEDIFF(DAY, o.OrderDate, o.ShippedDate) as float)) as AvgDiff 
FROM 
    Employees as e 
    JOIN Orders as o ON e.EmployeeID = o.EmployeeID
Group By e.EmployeeID 
```

如果您想要的不仅仅是`EmployeeId`结果集中的 ，请像这样重新加入：

```
select 
    e.EmployeeId
    e.LastName, 
    a.AvgDiff
From
    Employees as e 
Join     (SELECT 
              e.EmployeeID, 
              AVG(CAST(DATEDIFF(DAY, o.OrderDate, o.ShippedDate) as float)) as AvgDiff 
          FROM 
              Employees as e 
              JOIN Orders as o ON e.EmployeeID = o.EmployeeID
          Group By e.EmployeeID) a ON a.EmployeeId = e.EmployeeId 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T07:13:33.197

```
SELECT 
    e.EmployeeID, 
    e.LastName, 
    AVG(1.0 * DATEDIFF(DAY, o.OrderDate, o.ShippedDate)) as AVGDiff 
FROM 
    Employees as e 
    JOIN Orders as o ON e.EmployeeID = o.EmployeeID
Group by  e.EmployeeID, e.LastName
Order by  e.EmployeeID, e.LastName 
```

# javascript - 使用 javascript 在 tinymce 编辑器中更改文本框文本

> ID：13374421
> 
> 赞同：3
> 
> 时间：2012-11-14T07:09:05.750
> 
> 标签：javascript, jquery, tinymce, wysiwyg, rte

我在 tinymce 编辑器中有一个文本框。我想使用 javascript 更改文本框文本。谁能告诉我这怎么可能？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T09:34:21.677

这并不难。首先，您需要获取编辑器的主体。然后你可以尝试找到你的textarea。正如 bios 所建议的那样，为您的 textarea 提供一个 id 会很有帮助。这是必要的代码

```
var editor = tinymce.get('your_editor_id');
$(editor.getBody()).find('textarea#your_textarea_id').innerHTML = 'my_new_text'; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-14T07:17:46.223

使用 tinymce setContent 方法，希望对您有所帮助..

```
// Sets the HTML contents of the activeEditor editor
tinyMCE.activeEditor.setContent('<span>some</span> html');

// Sets the raw contents of the activeEditor editor
tinyMCE.activeEditor.setContent('<span>some</span> html', {format : 'raw'});

// Sets the content of a specific editor (my_editor in this example)
tinyMCE.get('my_editor').setContent(data);

// Sets the bbcode contents of the activeEditor editor if the bbcode plugin was added
tinyMCE.activeEditor.setContent('[b]some[/b] html', {format : 'bbcode'}); 
```

请查看 tinymce 文档[http://www.tinymce.com/wiki.php/API3:method.tinymce.Editor.setContent](http://www.tinymce.com/wiki.php/API3:method.tinymce.Editor.setContent)

# python - urllib 和烧瓶的 503 错误

> ID：13374423
> 
> 赞同：0
> 
> 时间：2012-11-14T07:09:20.073
> 
> 标签：python, json, heroku, urllib2

当我在调试模式下运行这个 Heroku 应用程序时，它运行良好，但是当我推送更改并访问页面时，页面拒绝加载并且我收到 503 错误。我不知道出了什么问题（看看调试如何说一切都很好:(）[使用python 2.7]

固定的。见评论

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T08:25:54.003

没关系，我修好了。我所做的只是引用了我计算机上的本地 json 文件而不是 url。

# apache - 如何在zend服务器中重新启动apache

> ID：13374424
> 
> 赞同：2
> 
> 时间：2012-11-14T07:09:27.017
> 
> 标签：apache, zend-framework, zend-server

我的 Windows 计算机上安装了 Zend Server CE。我在 httpd cofig 文件中做了一些更改。现在我想重新启动apache。我还没有找到任何重启 apache 的选项。只有一个选项“重新启动 PHP”。

任何人都可以告诉我从哪里可以在 Zend Server CE 中重新启动 apache？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-08-16T08:43:38.690

首先你需要检查“Zend server”的安装位置。

比如说。

如果你安装了 zend 服务器 @ /usr/local/zend/

使用以下命令重新启动 Zend 服务器。

```
/usr/local/zend/bin/zendctl.sh restart 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-14T09:44:30.263

你说你用的是windows？

Zend Server with Apache 安装了一个小应用程序，它位于您的托盘中，名为**“ *Apache Monitor* ”**，您可以使用此应用程序重新启动 apache。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T07:12:08.787

试试这个：

```
net stop Apache2.2-Zend && net start Apache2.2-Zend 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-17T07:43:47.073

如果您使用的是 Windows，则 apache 应该显示为服务。

使用 Windows 搜索功能查找服务窗口。

选择阿帕奇。停止并启动服务，您的所有配置文件等都应该已更新。

# c++ - ovly_debug_event 在 chrome 中做了什么？

> ID：13374429
> 
> 赞同：6
> 
> 时间：2012-11-14T07:10:09.603
> 
> 标签：c++, c, google-chrome, stack-trace, chromium

我正在查看 chrome 的线程堆栈时，我注意到很多线程都有类似于此的跟踪：

```
0, wow64cpu.dll!TurboDispatchJumpAddressEnd+0x6c0
1, wow64cpu.dll!TurboDispatchJumpAddressEnd+0x4a8
2, wow64.dll!Wow64SystemServiceEx+0x1ce
3, wow64.dll!Wow64LdrpInitialize+0x429
4, ntdll.dll!RtlIsDosDeviceName_U+0x24c87
5, ntdll.dll!LdrInitializeThunk+0xe
6, ntdll.dll!ZwWaitForSingleObject+0x15
7, kernel32.dll!WaitForSingleObjectEx+0x43
8, kernel32.dll!WaitForSingleObject+0x12
9, chrome.dll!ovly_debug_event+0x16574
10, chrome.dll!ovly_debug_event+0x14904
11, chrome.dll!ovly_debug_event+0x14826
12, chrome.dll!ovly_debug_event+0x16d19
13, chrome.dll!ovly_debug_event+0x1bea1b
14, chrome.dll!ovly_debug_event+0xe8ff4
15, chrome.dll!ovly_debug_event+0x16b50
16, chrome.dll!ovly_debug_event+0x16ab2
17, kernel32.dll!BaseThreadInitThunk+0x12
18, ntdll.dll!RtlInitializeExceptionChain+0x63
19, ntdll.dll!RtlInitializeExceptionChain+0x36 
```

铬源具有以下代码，`sel_ldr.c`其中似乎声明`ovly_debug_event`为几乎为空的函数：

```
void _ovly_debug_event (void) {
#ifdef __GNUC__
  /*
   * The asm volatile is here as instructed by the GCC docs.
   * It's not enough to declare a function noinline.
   * GCC will still look inside the function to see if it's worth calling.
   */
  __asm__ volatile ("");
#elif NACL_WINDOWS
  /*
   * Visual Studio inlines empty functions even with noinline attribute,
   * so we need a compile memory barrier to make this function not to be
   * inlined. Also, it guarantees that nacl_global_xlate_base initialization
   * is not reordered. This is important for gdb since it sets breakpoint on
   * this function and reads nacl_global_xlate_base value.
   */
  _ReadWriteBarrier();
#endif
}

static void StopForDebuggerInit (uintptr_t mem_start) {
  /* Put xlate_base in a place where gdb can find it.  */
  nacl_global_xlate_base = mem_start;

  NaClSandboxMemoryStartForValgrind(mem_start);

  _ovly_debug_event();
} 
```

这就提出了一个问题：为什么 chrome 似乎在一个仅用于调试而在 chromium 中几乎是空的函数上花费了这么多时间？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-30T14:02:12.713

请注意此函数中的大量偏移，例如 0x16574。看来您没有 chrome.dll 的私有符号，因此调试器正在寻找最接近（嗯，最接近的先前）公开导出的符号。

换句话说，您不在 _ovly_debug_event 中。您位于可执行文件中的一个函数中，但该函数并未公开导出。

要尝试解决此问题，如果您想查看实际发生的情况，可以将 [http://chromium-browser-symsrv.commondatastorage.googleapis.com](http://chromium-browser-symsrv.commondatastorage.googleapis.com)添加 到您的符号路径。在windbg中，命令是

.sympath+ SRV*C:\tmp* [http://chromium-browser-symsrv.commondatastorage.googleapis.com](http://chromium-browser-symsrv.commondatastorage.googleapis.com)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-24T13:54:04.663

此外，该函数实际上是 GDB 的辅助函数，用于帮助调试覆盖。请参阅[https://sourceware.org/gdb/onlinedocs/gdb/Automatic-Overlay-Debugging.html](https://sourceware.org/gdb/onlinedocs/gdb/Automatic-Overlay-Debugging.html)。

# ruby - 在路径上构建工具

> ID：13374431
> 
> 赞同：0
> 
> 时间：2012-11-14T07:10:26.623
> 
> 标签：ruby

我不是程序员，所以对我温柔一点。

我已经安装了 Ruby，现在正在尝试安装 gems。在 Windows 7 机器上，我收到以下错误：

![在此处输入图像描述](../Images/e0d1d425823431cad1b5c73f6c1b08ae.png)

所以我去[http://rubyinstaller.org/downloads/](http://rubyinstaller.org/downloads/)下载，我相信是根据我所了解的安装工具：[https://github.com/oneclick/rubyinstaller/wiki/Development-Kit](https://github.com/oneclick/rubyinstaller/wiki/Development-Kit)但仍然得到同样的错误。这告诉我我需要改变路径。我知道这里的路径以及如何更改它，但我不知道需要添加哪个目录路径。所以两个问题：

1.  我在路径上放什么？
2.  我做的事有道理吗？

# asp.net-mvc - 发布到服务器时，MVC ActionLinks 呈现为空

> ID：13374432
> 
> 赞同：2
> 
> 时间：2012-11-14T07:11:03.470
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4

当我将 MVC4 应用程序发布到我的 Web 服务器时，我遇到了一个奇怪的问题。

一切正常，我确实更改了路由配置中的一些设置。

问题是当我在 localhost 上运行网站时，我的所有链接都呈现得非常好。

`@Html.ActionLink("Market Summary","Market","Home")` 将呈现为 url。

然而，当我将我的项目上传到我的服务器（winhost）时，每当我将鼠标悬停在我的链接上时，它只会指向我的域名。它在我项目的任何页面上执行此操作...

我不知道为什么会发生这种情况，因为它在 localhost 上运行良好。

这是我的路由配置。

```
 using System;
   using System.Collections.Generic;
   using System.Linq;
   using System.Web;
   using System.Web.Http;
   using System.Web.Mvc;
   using System.Web.Routing;

   namespace ReportGenerator.Web
   {
public class RouteConfig
{
    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );

        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}/{param2}/{param3}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional , param2 = UrlParameter.Optional, param3 = UrlParameter.Optional }

         );

    }
  }
 } 
```

更新：链接实际上呈现为空白。 `<a href="">`

更新 2：如果我从控制器中删除 param2 和 param2，一切都会按预期工作......这到底是什么！？

更新 3：问题已解决，确实是非常奇怪的问题。看我的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T08:19:53.180

这是 ASP.NET MVC 的一个已知问题。

我四处寻找，发现如果您使用`Html.ActionLink`服务器通常会尝试填写任何缺少的参数的属性，这由于某种原因导致 url 呈现为空白。

我不确定这是什么原因，我相信其他人可以提供更多的见解。

基本上，除非每个 URL 都包含参数，否则默认路由中不能有多个 ID。

所以我所做的是创建了一条 SECOND 路线并制作了如下所示的链接：

```
 @Html.RouteLink(Model.MembershipCount.ToString(), "detailed", new { action="YourActionName", id = "blah", param2 = "foo", param3 = "foo2" }, null) 
   //detailed is where you put whatever you named your route. 
```

我的路由类现在看起来像这样

```
 public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );

        routes.MapRoute(
        name: "Default",
        url: "{controller}/{action}/{id}",
        defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional}

        );

        routes.MapRoute(
            name: "Detailed",
            url: "{controller}/{action}/{id}/{param2}/{param3}",
            defaults: new { controller = "Home", action = "home", id = UrlParameter.Optional, param2 = UrlParameter.Optional, param3 = UrlParameter.Optional }

         );             

    }
} 
```

这工作得很好，但我仍然完全不知道为什么我的开发服务器上没有出现这个问题。也许微软已经修补了这种疯狂，而我的主机只是没有更新他们的框架。

我希望这可以节省一些人的挫败感。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T07:16:30.757

我在 ASP .NET MVC 3 应用程序中遇到了类似的问题，并通过添加解决了

`<modules runAllManagedModulesForAllRequests="true" />`

进入`<system.webServer>`web.config 文件的部分。该应用程序在开发机器上运行良好，但在服务器上运行良好。

# iphone - 当用户离线时，如何在 webview 中禁用 Skype 通话按钮？

> ID：13374439
> 
> 赞同：6
> 
> 时间：2012-11-14T07:11:44.823
> 
> 标签：iphone, html, objective-c, uiwebview, skype

我通过使用 html 在我的 iPhone 应用程序中使用 Skype 集成。当我加载页面时，它将显示用户是在线还是离线。当我按下在线按钮时，我的应用程序将关闭，Skype 将打开。但是，当我按下离线按钮时，它会发生与上面相同的事情。我使用以下代码在 webview 中设计 Skype 按钮以显示用户的 Skype 在线状态和 Skype 呼叫。

```
<a href="skype:arafa_futbal?call">
<img src="http://mystatus.skype.com/smallclassic/arafa_futbal" style="border: none;"
width="114" height="20" alt="My status" />
</a> 
```

我的问题是当用户离线时如何禁用 webview？

即，如果我按下离线按钮，它不应该做任何事情..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:14:02.210

您可以控制 HTML 吗？如果是这样，请用于`http://mystatus.skype.com/arafa_futbal.xml`决定是否创建 Skype 链接。

一个警告：我不知道我是否一直未选中“允许我的在线状态显示在网络上”，或者这是否是默认设置，但它对我不起作用，除非我在“隐私设置。

如果您无法控制 HTML，那么我不知道如何使用 UIWebView。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T13:57:58.767

这将解决你的问题。在nsurlconnection中调用url [http://mystatus.skype.com/arafa_futbal.xml](http://mystatus.skype.com/arafa_futbal.xml)获取xml数据并解析得到用户skype状态

```
NSURL *url = [NSURL URLWithString:@"http://mystatus.skype.com/arafa_futbal.xml"stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSMutableURLRequest *req = [NSMutableURLRequest requestWithURL:url];
[req addValue:@"text/xml; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
[req addValue:0 forHTTPHeaderField:@"Content-Length"];
[req setHTTPMethod:@"GET"];
conn = [[NSURLConnection alloc] initWithRequest:req delegate:self];
if (conn) {
webData = [[NSMutableData data] retain];
}

-(void) connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response{
  [webData setLength:0];
}
-(void) connection:(NSURLConnection *)connection didReceiveData:(NSData *)data{
  [webData appendData:data];
}

-(void) connectionDidFinishLoading:(NSURLConnection *) connection {
xmlParser = [[NSXMLParser alloc] initWithData:webData];
[xmlParser setDelegate:self];
[xmlParser setShouldResolveExternalEntities:YES];
 [xmlParser parse];
}
-(void) parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
}

-(void) parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
   if ([string isEqualToString:@"Offline"]) 
   {
     webview.userinteractionEnabled = NO;
   }
   if ([string isEqualToString:@"Online"]) 
   {
     webview.userinteractionEnabled = YES;
   }
 } 
```

# backbone.js - 子视图内的主干渲染子视图

> ID：13374442
> 
> 赞同：1
> 
> 时间：2012-11-14T07:12:05.283
> 
> 标签：backbone.js

我有一个渲染子视图的人员视图。渲染人物视图和人物视图，但不渲染子视图。调试显示它进入子视图但未呈现。

人民观：

```
    渲染：函数（）{
        $("#page").html(compiledTemplate);
        _.each(personViewPointers, function (item) {
            $(".people-collection").append(item.render().el)
        });
        返回这个
    }

```

personview 渲染子视图。渲染正常，但不渲染子视图。

```
    渲染：函数（）{
        变量数据 = {
            模型：this.model，
            _:_
        };
        this.$el.html(compiledTemplate(data))
        this.addAllSubViews()
        var self = 这个
        _.each（子视图，功能（项目）{
            self.$el.append(item.render().el)
        });
        返回这个
    }

```

不渲染的子视图。

```
    渲染：函数（）{
        this.$el.html(compiledTemplate)
        返回这个
    }

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T08:02:31.893

**小费**

您正在使用`$("#page")`并且`$(".people-collection")`将 personview 直接耦合到 DOM。

我建议使用`this.$el`and`this.$(".people-collection")`代替：

```
render:function () {
    this.$el.html(compiledTemplate);
    _.each(personViewPointers, function (item) {
        this.$(".people-collection").append(item.render().el)
    }, this);
    return this
} 
```

并在构造函数中传递#page 元素：

```
var pv = new PersonView({el: '#page'}); 
```

但是一旦你用过`new PersonView({el: '#page'})`，你就不能真正将“#page”用于其他任何事情，视图已经将事件等绑定到元素。因此，最好将其添加为元素：

```
var pv = new PersonView();
$('#page').empty();
$('#page').append(pv.render().this); 
```

这允许`pv.remove()`使用另一个视图删除和替换元素。

# java - 当 asynctask 运行 HTTPGET 时暂停方法

> ID：13374447
> 
> 赞同：0
> 
> 时间：2012-11-14T07:12:15.980
> 
> 标签：java, android, eclipse

我有一个`run()`方法，在其中我正在执行一个正在执行 HTTPGET 的 Asynctask。如何`run()`等待 Asynctask 获得结果然后继续？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T07:59:10.953

```
//like this
    asyncRequest(URL, parameters, "POST",new RequestListener() {
                @Override
                public void onComplete(String response) { 
                    /*@todo get results and then continue */
                }

                @Override
                public void onIOException(IOException ex) {
                }

                @Override
                public void onFileNotFoundException(FileNotFoundException ex) {
                }

                @Override
                public void onMalformedURLException(MalformedURLException ex) {
                }
            }); 

public static void asyncRequest(final String requestUrl,final Bundle parameters,final String httpMethod,final RequestListener requestListener) {
        new Thread() {
            public void run() {
                try {
                    String resp = MyUtil.openUrl(requestUrl, httpMethod, parameters);
                    requestListener.onComplete(resp);
                } catch (FileNotFoundException ex) {
                    requestListener.onFileNotFoundException(ex);
                            } catch (MalformedURLException ex) {
                                requestListener.onMalformedURLException(ex);
                            } catch (IOException ex) {
                                requestListener.onIOException(ex);
                            }
            }
        }.start();
}

public static interface RequestListener {
    public void onComplete(String response);

    public void onIOException(IOException ex);

    public void onFileNotFoundException(FileNotFoundException ex);

    public void onMalformedURLException(MalformedURLException ex);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-14T12:41:41.073

在AsyncTask的onPostExecute方法中执行run函数

```
 private class LongOperation extends AsyncTask<String, Integer, String> {

      @Override
      protected String doInBackground(String... params) {
            //do long asynctask activity here
      }      

      @Override
      protected void onPostExecute(String result) {
           run(); //executes the run method you want here after asysnctask is completed
      }

      @Override
      protected void onPreExecute() {
      }

      @Override
      protected void onProgressUpdate(Void... values) {
      }
} 
```

# mobile - WinRT 和桌面应用程序包？

> ID：13374448
> 
> 赞同：2
> 
> 时间：2012-11-14T07:12:26.913
> 
> 标签：mobile, windows-8, windows-runtime

我想创建一个与 WinRT 安装捆绑在一起的桌面应用程序，并在应用程序商店中出售它。

我怎样才能做到这一点？这个想法是，当您安装桌面应用程序并且您使用的是 Windows 8 时，它还将安装该应用程序的 Metro 版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T08:11:47.287

您可以在 Windows 商店中销售桌面应用程序，但它不会驻留在 Microsoft 服务器上。他们将认证您的应用程序并在商店中列出该应用程序，但用户将被重定向到您的站点进行下载。

此外，您将无法将 WinRT 和桌面应用程序打包在一起。

[在商店中列出您的桌面应用程序](http://blogs.msdn.com/b/windowsstore/archive/2012/06/08/listing-your-desktop-app-in-the-store.aspx)

![在此处输入图像描述](../Images/1c12166db5f5d4034e409e6ee26bd259.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T08:31:08.237

LOB Windows 应用商店应用程序可以旁加载 - 这可能是绕过 Windows 应用商店的唯一方法。请注意，在执行此操作之前，您可能需要查看一些准则和限制，例如这里：

[Windows 8 旁加载要求（来自 TechNet）](http://blogs.technet.com/b/scd-odtsp/archive/2012/09/27/windows-8-sideloading-requirements.aspx)

所以理论上（因为我还没有尝试过）你应该能够同时侧载一个非 Windows 商店应用程序和一个 Windows 商店应用程序 - 但是将它们打包在一起以用于 Windows 商店是不可能的。据我所知，您不能拥有安装非 Windows 商店应用程序的 Windows 商店应用程序，因为这些应用程序不应该像那样访问系统。

# c# - 同时声明和分配多个字符串变量

> ID：13374454
> 
> 赞同：86
> 
> 时间：2012-11-14T07:13:16.757
> 
> 标签：c#, variable-declaration, variable-initialization

我声明了一些空字符串，因此以后不会抛出错误。

我读过这是正确的方法：

```
string Camnr = Klantnr = Ordernr = Bonnr = Volgnr = Omschrijving = Startdatum = Bonprioriteit = Matsoort = Dikte = Draaibaarheid = Draaiomschrijving = Orderleverdatum = Regeltaakkode = Gebruiksvoorkeur = Regelcamprog = Regeltijd = Orderrelease = ""; 
```

但这不起作用。我得到这个错误：`Klantnr does not exist in the current context`。

我做错什么了？

* * *

## 回答 #1

> 赞同：166
> 
> 时间：2012-11-14T07:16:21.610

你可以这样做：

```
string Camnr, Klantnr, Ordernr, Bonnr, Volgnr;// and so on.
Camnr = Klantnr = Ordernr = Bonnr = Volgnr = string.Empty; 
```

首先，您必须**定义变量，然后才能使用**它们。

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2012-11-14T07:15:38.057

你可以这样做：

```
string Camnr = "", Klantnr = "", ... // or String.Empty 
```

或者你可以先声明它们，然后在下一行使用你的方式。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-10-10T14:23:00.397

我称之为连接声明的一个例子：

```
string Camnr = "",
        Klantnr = "",
        Ordernr = "",
        Bonnr = "",
        Volgnr = "",
        Omschrijving = "",
        Startdatum = "",
        Bonprioriteit = "",
        Matsoort = "",
        Dikte = "",
        Draaibaarheid = "",
        Draaiomschrijving = "",
        Orderleverdatum = "",
        Regeltaakkode = "",
        Gebruiksvoorkeur = "",
        Regelcamprog = "",
        Regeltijd = "",
        Orderrelease = ""; 
```

只是我的 2 美分，希望它对某个地方的人有所帮助。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-11-14T07:16:53.890

尝试：

```
 string Camnr, Klantnr, Ordernr, Bonnr, Volgnr, Omschrijving;
 Camnr = Klantnr = Ordernr = Bonnr = Volgnr = Omschrijving = string.Empty; 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-11-14T07:19:51.523

尝试

```
string     Camnr , Klantnr , Ordernr , Bonnr , Volgnr , Omschrijving , Startdatum ,    Bonprioriteit , Matsoort , Dikte , Draaibaarheid , Draaiomschrijving , Orderleverdatum , Regeltaakkode , Gebruiksvoorkeur , Regelcamprog , Regeltijd , Orderrelease ; 
```

进而

```
Camnr = Klantnr = Ordernr = Bonnr = Volgnr = Omschrijving = Startdatum = Bonprioriteit = Matsoort = Dikte = Draaibaarheid = Draaiomschrijving = Orderleverdatum = Regeltaakkode = Gebruiksvoorkeur = Regelcamprog = Regeltijd = Orderrelease = ""; 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-11-14T07:22:00.843

```
string Camnr , Klantnr , Ordernr , Bonnr , Volgnr , Omschrijving , Startdatum , Bonprioriteit , Matsoort , Dikte , Draaibaarheid , Draaiomschrijving , Orderleverdatum , Regeltaakkode , Gebruiksvoorkeur , Regelcamprog , Regeltijd , Orderrelease;
Camnr = Klantnr = Ordernr = Bonnr = Volgnr = Omschrijving = Startdatum = Bonprioriteit = Matsoort = Dikte = Draaibaarheid = Draaiomschrijving = Orderleverdatum = Regeltaakkode = Gebruiksvoorkeur = Regelcamprog = Regeltijd = Orderrelease = string.Empty; 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2018-07-12T21:31:23.003

提醒一下：**不允许在多个声明中使用****隐式类型。`var`**可能会出现以下编译错误。

```
var Foo = 0, Bar = 0; 
```

> 隐式类型变量不能有多个声明符

相似地，

```
var Foo, Bar; 
```

> 隐式类型变量必须初始化

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2021-05-13T09:57:09.290

现在可以通过以下方式声明和初始化多个变量：

```
var (anInt, aFloat, aBoolean, aChar, aString, anArray, aRecordType, anObjectType) = 
    (1, 2.14, true, 'a', "C# is awesome!", new[] { "Asia", "Europe" } , new Country { Name = "India"}, new City { Name = "Kolkata"} ); 
Console.WriteLine(anInt);
Console.WriteLine(aFloat);
Console.WriteLine(aBoolean);
Console.WriteLine(aChar);
Console.WriteLine(aString);
Array.ForEach(anArray, Console.WriteLine);
Console.WriteLine(aRecordType.Name);
Console.WriteLine(anObjectType.Name); 
```

以下是所需自定义类型的定义：

```
internal record Country { internal string Name {get; set;}}
internal class City { internal string Name {get; set;}} 
```

这已经在 .NET 5/C# 9 上进行了测试。

[![以下是 Linqpad 中的输出：](../Images/86ecdb9e407e280f8454dc182588ccd4.png)](https://i.stack.imgur.com/dY7Br.png)

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2020-01-31T11:31:56.673

`string a = "", b = a , c = a, d = a, e = a, f =a;`

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2020-02-04T03:05:11.987

^(所有信息都在现有答案中，但我个人希望得到一个简洁的摘要，所以这里尝试一下；为简洁起见，这些命令使用`int`变量，但它们类似地适用于任何类型，包括`string`.)

声明**多个变量*和***：

*   要么：用***单独的值*****初始化它们***：*

 *```
int i = 0, j = 1; // declare and initialize each, single-type only.
// Note: `var` is NOT supported as of C# 8.0, but see below.

// ===
// C#  7.0+ / .NET Framework 4.7+ using syntactic sugar based on *value tuples*:

// Infer the types from the RHS tuple elements.
var (i, s) = (0, "hi");

// Explicitly type the individual variables.
(int i, string s) = (0, "hi"); 
```

*   或：用***相同的值*****初始化它们***：*

 *```
int i, j;    // *declare* first (`var` is NOT supported)
i = j = 42;  // then *initialize* 

// Single-statement alternative that is perhaps visually less obvious:
// Initialize the first variable with the desired value, then use 
// the first variable to initialize the remaining ones.
int i = 42, j = i, k = i; 
```

* * *

**什么*不起作用*：**

*   **除非您使用值元组语法，否则不能`var`**在上述语句中使用，因为`var`仅适用于 (a) 具有初始化值的声明（可以从中推断出类型）和 (b)，从 C# 8.0 开始, 如果该声明是语句中*唯一*的声明（否则你会得到编译错误`error CS0819: Implicitly-typed variables cannot have multiple declarators`）。

*   **仅在多声明语句中的最后一个变量之后放置初始化值仅初始化*最后*一个*变量***：

    ~~`int i, j = 1;`~~ `// initializes *only* j`

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-11-17T16:55:56.593

相当老的问题，但万一有人回去。
这不像上面的其他答案那样紧凑，但使用 Visual Studio 多行选择快捷方式 [Alt+ Shift + ↑] （或其他方向）相当易读且更易于键入

```
string Camnr = string.Empty;
string Klantnr = string.Empty; 
```

在新行中键入所有变量名称。多选在他们前面一个类型“字符串”。在它们后面多选并输入“= string.Empty;”。**

# android - 排序数组列表 使用具有不同标准的 Comparator

> ID：13374457
> 
> 赞同：3
> 
> 时间：2012-11-14T07:13:56.773
> 
> 标签：android, arraylist, sorting, comparator

我有一个 ArrayList，我在其中存储诸如**CustomerName、Type、Distance、State 之类的值，并使用这个 ArrayList 来显示 ListView。** 我创建了一个 comaprator，我在其中根据客户的类型对客户进行排序，如下所示。

```
Type1 - Gold
Type2 - Silver
Type3 - Other 
```

我已成功完成排序，但我还必须添加一件事，我将用下面的示例进行解释。

**解释 ：-**

在我的应用程序中，我们有**高级用户作为 Gold & Silver 类型**。其他类型的用户是非高级用户。当用户从我的应用程序进行一些搜索时，我有网络服务来获取数据。它基于**州、城市和 Readius（即 25 英里/50 英里等距离）**。

例如，您搜索**New Jersy(State/Province)、Mahwah(City) & Radius 为 25miles**，因此它将根据这些条件为您提供可用结果列表。现在发生的情况是，在此搜索中，还包括了一些外状态结果，因为它们满足**Radius Criteria**。就像我搜索这个一样，我也会得到**New York(State/Province)**的结果。问题出现在这里是因为在纽约州我有一些黄金类型的用户，因此纽约州的 CustomerName 转到 NewJersy Silver 类型用户的顶部。

**Web 服务调用的结果 =**

```
CustomerName - ABCD
Type - Silver
State - New Jersy
Distance - 1mile

CustomerName - DEF
Type - Gold
State - New York
Distance - 20mile

CustomerName - XYZ
Type - Gold
State - New York
Distance - 22mile

CustomerName - PQR
Type - Other
State - New Jersy
Distance - 5mile 
```

**使用 My Comparator Rsult 排序后 =**

```
CustomerName - DEF
Type - Gold
State - New York
Distance - 20mile

CustomerName - XYZ
Type - Gold
State - New York
Distance - 22mile

CustomerName - ABCD
Type - Silver
State - New Jersy
Distance - 1mile

CustomerName - PQR
Type - Other
State - New Jersy
Distance - 5mile 
```

**我实际上想要什么作为结果=**

```
CustomerName - ABCD
Type - Silver
State - New Jersy
Distance - 1mile

CustomerName - DEF
Type - Gold
State - New York
Distance - 20mile

CustomerName - XYZ
Type - Gold
State - New York
Distance - 22mile

CustomerName - PQR
Type - Other
State - New Jersy
Distance - 5mile 
```

**我的标准是 -> 我想在用户搜索的列表顶部显示高级用户列表（即，如果您搜索新泽西州而不是在顶部显示该州/省的所有高级用户），而不是 OUT STATE（即如果纽约州数据来自给定半径）高级用户和其他（无论它是哪个州数据）类型的用户的底部其余部分。**

比较器 -

```
public class VendorTypeComparator implements Comparator<HashMap<String, String>>{
    List<String> preDefinedOrder;

    public VendorTypeComparator(String[] order) {
        // TODO Auto-generated constructor stub
        // order is {"Gold", "Silver", "Other"}
        this.preDefinedOrder = Arrays.asList(order);
    }

    @Override
    public int compare(HashMap<String, String> o1, HashMap<String, String> o2) {
        // TODO Auto-generated method stub
        return preDefinedOrder.indexOf(o1.get("VendorType").toString()) - preDefinedOrder.indexOf(o2.get("VendorType").toString());
    }
} 
```

请提供您的建议以解决此问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T08:08:23.127

一个可能的技巧是建立一个基于排名函数的度量。它将允许您**仅使用比较器，而无需任何 split/merge**。

设计一个函数，将单个搜索结果映射到一个数字。

*   比如说，给目标州的任何金币 1000 万，给那里的任何银币 900 万，给其他州的金币 8 或任何你的逻辑。ABCD将获得10M排名；DEF 和 XYZ - 各 9M。

*   然后减去距离。ABCD 将获得 10M-1；DEF 9M-20 和 XYZ - 9M-22。等等。

*   这会将您的结果分成可比较的组，并在这些组中建立更精细的顺序。

让您的比较器比较对 o1 和 o2 的调用结果。如果为零，则按字典顺序比较其他内容，例如名称。就是这样。

# duplicate-removal - 重复消息检测在 HornetQ 核心网桥中无法正常工作

> ID：13374459
> 
> 赞同：1
> 
> 时间：2012-11-14T07:13:58.463
> 
> 标签：duplicate-removal, hornetq, bridge

我有两个源服务器 server#0 和 server#1，以及一个目标服务器 server#2。每个源服务器都有一个核心网桥连接到服务器#2。（所有服务器都是独立的，2.2.14）

1.  server#0 有一个队列 q#0 (source)
2.  server#1 有一个队列 q#1 (source)
3.  server#2 有一个队列 q#2 (target)

考虑这种情况：

1.  客户端向 q#0 发送消息
2.  q#2 成功接收所有消息（通过网桥）
3.  客户端向 q#1 发送消息
4.  server#2 说：检测到重复消息（对于每条消息）并且没有从 q#1 添加到 q#2

**服务器#2 收到消息表单 q#1 时的消息：**

```
[Old I/O server worker (parentId: 2184190, [id: 0x002153fe, localhost/127.0.0.1:6445])] 
14-Nov 13:38:27,300 WARNING [PostOfficeImpl]  Duplicate message detected through the bridge - message will not be routed. 
Message information: ServerMessage[messageID=25769805298,priority=4, bodySize=302,expiration=0, durable=true, address=jms.queue.target, properties=TypedProperties[{_HQ_BRIDGE_DUP=[B@1ff447b}]]@32041289 
```

请注意，当客户端开始向 q#1 而不是 q#0 发送消息，然后向 q#0 发送消息时，再次出现此问题！（对于 q#1 消息）

它是一个错误吗？我该怎么办？

**服务器#0（hornetq 配置）：**

```
<queues>
    <queue name="jms.queue.source">
        <address>jms.queue.source</address>
    </queue>
</queues>

<bridges>
    <bridge name="bridge-to-server2">
        <queue-name>jms.queue.source</queue-name>
        <forwarding-address>jms.queue.target</forwarding-address>
        <reconnect-attempts>-1</reconnect-attempts>
        <static-connectors>
            <connector-ref>remote-connector</connector-ref>
        </static-connectors>
   </bridge>
</bridges>

<!-- connector to server#2 -->
<connector name="remote-connector">
    <factory-class>org.hornetq.core.remoting.impl.netty.NettyConnectorFactory
    </factory-class>
    <param key="host" value="localhost" />
    <param key="port" value="6445" />
</connector> 
```

**服务器#1（hornetq 配置）：**

```
<queues>
    <queue name="jms.queue.source">
        <address>jms.queue.source</address>
    </queue>
</queues>

<bridges>
    <bridge name="bridge-to-server2">
         <queue-name>jms.queue.source</queue-name>
         <forwarding-address>jms.queue.target</forwarding-address>
         <reconnect-attempts>-1</reconnect-attempts>
         <static-connectors>
             <connector-ref>remote-connector</connector-ref>
         </static-connectors>
    </bridge>
</bridges>

<!-- connector to server#2 -->
<connector name="remote-connector">
    <factory-class>org.hornetq.core.remoting.impl.netty.NettyConnectorFactory
    </factory-class>
    <param key="host" value="localhost" />
    <param key="port" value="6445" />
</connector> 
```

**服务器#2（hornetq 配置）：**

```
<connectors>
    <connector name="netty-connector">
         <factory-class>org.hornetq.core.remoting.impl.netty.NettyConnectorFactory
         </factory-class>
         <param key="host" value="localhost" />
         <param key="port" value="6445" />
    </connector>
</connectors>

<acceptors>
     <acceptor name="netty-acceptor">
          <factory-class>org.hornetq.core.remoting.impl.netty.NettyAcceptorFactory
          </factory-class>
          <param key="host" value="localhost" />
          <param key="port" value="6445" />
     </acceptor>
</acceptors> 
```

**服务器#2 (hornetq-jms):**

```
<queue name="target">
    <entry name="/queue/target" />
</queue> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T14:14:52.497

这是一个错误，已经修复：

[https://issues.jboss.org/browse/HORNETQ-1072](https://issues.jboss.org/browse/HORNETQ-1072)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T09:50:33.263

你应该检查参数

使用重复检测

在您的 HornetQ-configuration.xml 文件中。

默认值为 true，因此请尝试将其设置为 false。

如果你可以查看新的 HornetQ 书

[www.amazon.com/dp/1849518408/?tag=packtpubli-20](https://rads.stackoverflow.com/amzn/click/com/1849518408)

# java - 试图获取音频文件的 audioInputStream

> ID：13374469
> 
> 赞同：0
> 
> 时间：2012-11-14T07:14:46.350
> 
> 标签：java, javasound

//我正在尝试使用 java 连接一个 mp3 文件列表。但是当我运行代码时，出现以下错误：

```
 //javax.sound.sampled.UnsupportedAudioFileException: could not get audio input stream from input file
            at javax.sound.sampled.AudioSystem.getAudioInputStream(AudioSystem.java:1170)
            at soundConcat.main(soundConcat.java:42) 
```

//这是代码

```
 String[]   strFilename = {"a","b","c","d","e","f"};
                        for (int i = 0; i < 6; i++)
                {
                        File    soundFile = new File("./sounds/"+strFilename[i]+".mp3");
                        AudioInputStream    audioInputStream = null;
                        try
                    {
                //getting an error on the next line
            audioInputStream = AudioSystem.getAudioInputStream(soundFile);
                    }
                    catch (Exception e)
                    {               
                        e.printStackTrace();        
                    }
       //some more operations here
    }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T07:49:14.317

我不知道这是如何工作的，但只是将 jl.jar & mp3spi.jar 和 tritonus_share.jar 复制到我的类路径中并且它只是工作。抱歉没有解释，即使我不知道这是如何工作的，但如果有人可以解释它，我将不胜感激。但是这次出现了一个新问题，生成的输出文件是wav格式的，即使使用操作系统中的普通播放器也无法播放。

# java - HttpPost 到 REST WCF 服务 - 尝试发送 DataTable 时获取空表

> ID：13374472
> 
> 赞同：0
> 
> 时间：2012-11-14T07:14:52.457
> 
> 标签：java, wcf, rest, httpclient

我需要在 REST WCF 服务中测试一个 .Net 方法，该方法需要传入一个 DataTable 并返回一个 DataTable：

```
DataTable TryPostDataTable(DataTable dataTable); 
```

在我的 Java 测试代码中，我使用 HtttClient 向该服务发送 Post 请求。它有标题：

```
"Content-Type", "text/xml; charset=utf-8" 
```

与身体：

```
 <TryPostDataTable xmlns="http://tempuri.org/">
    <dataTable>
      <Person>
        <name>A Name</name>
        <age>An Age</age>
      </Person>
    </dataTable>
  </TryPostDataTable> 
```

但是当服务收到请求时，dataTable 变量总是变成一个空的 DataTable 实例，没有行和列

如果我将数据表的类型更改为字符串，并将帖子正文更改为：

```
 <TryPostDataTable xmlns="http://tempuri.org/">
    <datatable>
      TestString
    </datatable>
  </TryPostDataTable> 
```

然后它会正确解析请求。

我不知道如何通过 HttpPost 传递 DataTable 对象。Rest服务中从XML到DataTable的解析过程有什么问题？还是我的帖子不正确？

任何帮助将不胜感激。

//编辑1：

我尝试使用此代码生成 xml 内容：

```
DataTable dtEmployee = new DataTable("Person");                             
        dtEmployee.Columns.Add("Name", typeof(string));        
        dtEmployee.Columns.Add("Age", typeof(string));             
        dtEmployee.Rows.Add("A Name", "An Age");                        
        dtEmployee.WriteXml(@"C:\Working\Employee.xml", XmlWriteMode.WriteSchema); 
```

这将产生：

```
 <xs:schema id="NewDataSet" xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata">
<xs:element name="NewDataSet" msdata:IsDataSet="true" msdata:MainDataTable="Person" msdata:UseCurrentLocale="true">
  <xs:complexType>
    <xs:choice minOccurs="0" maxOccurs="unbounded">
      <xs:element name="Person">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="Name" type="xs:string" minOccurs="0" />
            <xs:element name="Age" type="xs:string" minOccurs="0" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
    </xs:choice>
  </xs:complexType>
</xs:element> 
```

```
<Person>
    <Name>A Name</Name>
    <Age>An Age</Age>
  </Person> 
```

然后我使用 httpPost 将此 xml 发送到 TryPostDataTable 方法。

服务现在成功解析模式并生成一个“Person”表，其中 2 列“Name”-“Age”分配给变量 dataTable。但是没有行 - 里面没有数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:10:50.113

我在服务器上有我的 REST 方法，如下所示：

```
[OperationContract]
[WebInvoke]
public DataTable GetMyDataTable(DataTable dt)
        {
            DataTable returnTable  = new DataTable("ServerTable");
            returnTable.Columns.Add(new DataColumn() { ColumnName = "FirstName", DataType = typeof(String)});
            returnTable.Columns.Add(new DataColumn() { ColumnName = "LastName", DataType = typeof(String) });

            if (dt.Columns.Count == 2 && dt.Rows.Count > 0)
            {
                return returnTable;
            }
            else
            {
                returnTable.Columns.Add(new DataColumn() { ColumnName = "MiddleName", DataType = typeof(String) });
                return returnTable;
            }
        } 
```

调用 Web 服务时的原始请求应如下所示：

```
POST http://localhost/SampleService/Service1.svc/GetMyDataTable HTTP/1.1
Content-Type: application/xml
Content-Length: 1022
Host: rajeshwin7

<DataTable xmlns="http://schemas.datacontract.org/2004/07/System.Data"><xs:schema id="NewDataSet" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns="" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata"><xs:element name="NewDataSet" msdata:IsDataSet="true" msdata:MainDataTable="SampleTable" msdata:UseCurrentLocale="true"><xs:complexType><xs:choice minOccurs="0" maxOccurs="unbounded"><xs:element name="SampleTable"><xs:complexType><xs:sequence><xs:element name="FirstName" type="xs:string" minOccurs="0"/><xs:element name="LastName" type="xs:string" minOccurs="0"/></xs:sequence></xs:complexType></xs:element></xs:choice></xs:complexType></xs:element></xs:schema><diffgr:diffgram xmlns:diffgr="urn:schemas-microsoft-com:xml-diffgram-v1" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata"><DocumentElement xmlns=""><SampleTable diffgr:id="SampleTable1" msdata:rowOrder="0" diffgr:hasChanges="inserted"><FirstName>MyFirst</FirstName><LastName>MyLast</LastName></SampleTable></DocumentElement></diffgr:diffgram></DataTable> 
```

我从服务器返回的响应如下：

```
HTTP/1.1 200 OK
Cache-Control: private
Content-Length: 804
Content-Type: application/xml; charset=utf-8
Date: Wed, 14 Nov 2012 17:07:37 GMT

<DataTable xmlns="http://schemas.datacontract.org/2004/07/System.Data"><xs:schema id="NewDataSet" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns="" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata"><xs:element name="NewDataSet" msdata:IsDataSet="true" msdata:MainDataTable="ServerTable" msdata:UseCurrentLocale="true"><xs:complexType><xs:choice minOccurs="0" maxOccurs="unbounded"><xs:element name="ServerTable"><xs:complexType><xs:sequence><xs:element name="FirstName" type="xs:string" minOccurs="0"/><xs:element name="LastName" type="xs:string" minOccurs="0"/></xs:sequence></xs:complexType></xs:element></xs:choice></xs:complexType></xs:element></xs:schema><diffgr:diffgram xmlns:diffgr="urn:schemas-microsoft-com:xml-diffgram-v1" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata"/></DataTable> 
```

我确实发布了 Fiddler 捕获的原始请求和响应。只需监视您的请求的外观，这应该可以帮助您毫无问题地访问 REST 服务。此外，数据表应该有一个名称，否则它将无法序列化和反序列化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-17T08:24:23.833

最好像这样将整个表格转换为列表，我使用的是：-

```
public List<user> fulldata()
        {

            string ConnectString = "server=localhost;database=test_local;integrated security=SSPI";
            string QueryString = "select * from tbl_register";

            SqlConnection myConnection = new SqlConnection(ConnectString);
            SqlDataAdapter da = new SqlDataAdapter(QueryString, myConnection);
            DataSet ds = new DataSet();
            da.Fill(ds, "Register Table");

            List<user> ls = new List<user>();
            foreach (DataRow row in ds.Tables[0].Rows)
            {
                user res = new user();
                res.name = row["name"].ToString();
                res.company = row["cname"].ToString();
                res.address = row["address"].ToString();
                ls.Add(res);
            }
            return ls;
        }

        public class user
        {
            public string name { get; set; }
            public string company { get; set; }
            public string address { get; set; }
        } 
```

# grails - 如何在 GSP 中进行循环？

> ID：13374476
> 
> 赞同：13
> 
> 时间：2012-11-14T07:15:06.187
> 
> 标签：grails, gsp

我有 GSP 文件，我将在其中从控制器获取一个值，例如`${paramsValue?.ruleCount}`3 并且基于该值我必须创建表行。

有没有办法在 gsp 中做到这一点

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-14T09:53:15.090

关于什么

```
<g:each in="${(1..paramsValue?.ruleCount).toList()}" var="count" >
   ...
</g:each> 
```

?

但是，如果您准备一个包含要在控制器中显示的内容的列表会更好...

更新：

刚刚试了一下：

```
<% def count=5 %>
<g:each in="${(1..count).toList()}" var="c" >
  ${c}
</g:each> 
```

作品。

```
<% def count=5 %>
<g:each in="${1..count}" var="c" >
  ${c}
</g:each> 
```

也有效，甚至更短。

更新2：

您似乎想使用 URL 参数作为计数。此代码将在这种情况下工作：

```
<g:each in="${params.count?1..(params.count as Integer):[]}" var="c" >
  ${c}
</g:each> 
```

它将检查是否有计数参数。如果没有，它将返回一个空列表进行迭代。如果设置了 count，它将把它转换为 Integer，创建一个 Range 并将其隐式转换为一个列表以进行迭代。

# c# - 从 for 循环到数组的结果？

> ID：13374478
> 
> 赞同：2
> 
> 时间：2012-11-14T07:15:10.463
> 
> 标签：c#

我是 C# 的新手，所以我的问题对你来说可能很愚蠢。无论如何-我正在尝试将 for 循环产生的所有结果放入单个数组中。这是可能的，如果是的话 - 怎么做？

例子：

```
for(i=0; i<5; i++){ 
     int[] array = 5 << i 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T07:21:22.897

在循环之前创建所需大小的数组：

```
int[] result = new int[5];
for (int i = 0; i < 5 ; i++) {
  result[i] = 5 << i;
} 
```

如果您事先不知道大小，可以使用列表代替：

```
List<int> result = new List<int>();
for (int i = 0; i < 5 ; i++) {
  result.Add(5 << i);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T07:17:25.733

```
int[] YourArray = new int[5];
for(i=0; i<5; i++)
{
   YourArray[i] = somevalue;
} 
```

阅读[文档](http://msdn.microsoft.com/en-us/library/aa288453%28v=vs.71%29.aspx)以获取更多示例

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T07:21:54.037

不确定您是想要数组中的数字 0 到 4，还是数组中移位 5 的结果：

```
int[] values = new int[5];
for (int i = 0; i < 5; i++)
{
  values[i] = i;
} 
```

或者

```
int[] values = new int[5];
for (int i = 0; i < 5; i++)
{
  values[i] = 5 << i;
} 
```

# vb.net - 如何在 vb.net 中将联系人添加到 lync 2010 api

> ID：13374479
> 
> 赞同：0
> 
> 时间：2012-11-14T07:15:15.113
> 
> 标签：vb.net, lync, lync-2010

我正在尝试开发一个应用程序来帮助我将我的联系人导入到 lync 2010。

我正在使用 Lync 2010 SDK 在 VB.NET 中执行此程序。

我能够让所有用户从 lync 客户端访问我的应用程序，但我真的很难找到一个解决方案来解决如何使用我的应用程序向我的 lync 客户端添加联系人。这可能吗？如果是这样，任何人都可以帮助我吗？:)

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:46:53.757

这将是一个很好的起点：[演练：在组中添加和删除联系人 (Lync 2010 SDK)](http://msdn.microsoft.com/en-us/library/lync/hh345240%28v=office.14%29.aspx)

# asp.net-mvc-3 - 鉴于 asp.net mvc 从模型中调用 JsonResult 属性

> ID：13374481
> 
> 赞同：0
> 
> 时间：2012-11-14T07:15:19.353
> 
> 标签：asp.net-mvc-3

我有一堂课：

```
public class ShoppingCartVM
{
   public JsonResult CartRelatedItems { get; set; }
} 
```

还有一个回归的模型

```
return new JsonResult
{
   Data = listItem,
   JsonRequestBehavior = JsonRequestBehavior.AllowGet, 
}; 
```

在控制器中，我将值分配给对象`ShoppingCartVM`的`ShoppingCartVM`属性。

```
 public ActionResult Index()
  {
     var _relatedItem = qm.GetRelatedItemCart((
                                  HttpContext.User.Identity.IsAuthenticated ?
                                  qm.GetCustomer(HttpContext.User.Identity.Name).PriceLevel.Value : 0
                               ));
     ShoppingCartVM scvm = new ShoppingCartVM()
     {
         CartRelatedItems = _relatedItem
     }
     return View(scvm);
  } 
```

谁能告诉我，如何`CartRelatedItems`在我的 asp.net mvc 项目的视图中循环属性以通过 ajax 显示。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T07:30:14.550

You can use Partial or RenderPartial for ajax calls using Razor. For example

```
@Html.Partial("mypartialview") 
```

or

```
<% Html.RenderPartial("mypartialview"); %> 
```

Following link could help for detailed on Partial or RenderPartial.

[http://www.compiledthoughts.com/2011/01/aspnet-mvc-razor-partial-views-with.html](http://www.compiledthoughts.com/2011/01/aspnet-mvc-razor-partial-views-with.html)

# delphi - 如何在 Delphi TCanvas 中引入半透明矩形？

> ID：13374487
> 
> 赞同：1
> 
> 时间：2012-11-14T07:15:57.840
> 
> 标签：delphi, transparency

我有一个用 Delphi 7 编写的绘图软件的源代码。代码很漂亮而且很大。使用该软件绘制的所有内容都是实心的，没有透明度。我尝试阅读大部分代码，发现用于绘图的主要组件是 TCanvas。是否有任何简单的方法来设置 TCanvas 以便允许透明度？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T07:28:12.053

透明度不是画布的问题，而是绘画的问题。如果这是您的问题，那么除了分层窗口之外，没有其他方法可以使 wincontrol 真正透明，但您可以在每个画布上以透明方式进行绘制。例如

```
Canvas.Draw(0,0,png1);
Canvas.Draw(0,0,png2); 
```

如果你想做透明的简单绘画，你可以使用 GDI+，可以从[http://www.progdigy.com/?page_id=7获得](http://www.progdigy.com/?page_id=7)

这将是一个示例，如何在没有附加库的情况下绘制透明选择

```
unit Unit3;
// 20121108 by Thomas Wassermann
interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, ExtCtrls, jpeg;

type
  TForm3 = class(TForm)
    Image1: TImage;
    PaintBox1: TPaintBox;
    procedure FormCreate(Sender: TObject);
    procedure PaintBox1Paint(Sender: TObject);
    procedure PaintBox1MouseDown(Sender: TObject; Button: TMouseButton; Shift: TShiftState; X, Y: Integer);
    procedure PaintBox1MouseMove(Sender: TObject; Shift: TShiftState; X, Y: Integer);
  private
    { Private-Deklarationen }
    FDownPoint, FCurrentPoint: TPoint;
  public
    { Public-Deklarationen }
  end;

var
  Form3: TForm3;

implementation

uses Math;
{$R *.dfm}

procedure TForm3.FormCreate(Sender: TObject);
begin
  PaintBox1.BringToFront;
end;

type
  pRGBQuadArray = ^TRGBQuadArray;
  TRGBQuadArray = ARRAY [0 .. $EFFFFFF] OF TRGBQuad;

Procedure SetAlpha(bmp: TBitMap; Alpha: Byte; R: TRect);
var
  pscanLine32: pRGBQuadArray;
  i, j: Integer;
begin
  bmp.PixelFormat := pf32Bit;
  bmp.HandleType := bmDIB;
  bmp.ignorepalette := true;
  bmp.alphaformat := afDefined;
  for i := 0 to bmp.Height - 1 do
  begin
    pscanLine32 := bmp.Scanline[i];
    for j := 0 to bmp.Width - 1 do
    begin
      if (j >= R.Left) and (j <= R.Right) and (i >= R.Top) and (i <= R.Bottom) then
      begin
        pscanLine32[j].rgbReserved := 0;
        pscanLine32[j].rgbBlue := 0;
        pscanLine32[j].rgbRed := 0;
        pscanLine32[j].rgbGreen := 0;
      end
      else
      begin
        pscanLine32[j].rgbReserved := Alpha;
        pscanLine32[j].rgbBlue := Alpha;
        pscanLine32[j].rgbRed := Alpha;
        pscanLine32[j].rgbGreen := Alpha;
      end;
    end;
  end;
end;

procedure TForm3.PaintBox1MouseDown(Sender: TObject; Button: TMouseButton; Shift: TShiftState; X, Y: Integer);
begin
  FDownPoint.X := X;
  FDownPoint.Y := Y;
  FCurrentPoint := FDownPoint;
  PaintBox1.Invalidate;
end;

procedure TForm3.PaintBox1MouseMove(Sender: TObject; Shift: TShiftState; X, Y: Integer);
begin
  if ssLeft in Shift then
  begin
    FCurrentPoint.X := X;
    FCurrentPoint.Y := Y;
    PaintBox1.Invalidate;
  end;
end;

procedure TForm3.PaintBox1Paint(Sender: TObject);
var
  bmp: TBitMap;
  SelRect: TRect;
begin
  bmp := TBitMap.Create;
  try
    bmp.Width := PaintBox1.Width;
    bmp.Height := PaintBox1.Height;
    if (FCurrentPoint.X = FDownPoint.X) and (FCurrentPoint.Y = FDownPoint.Y) then
      SelRect := PaintBox1.BoundsRect
    else
    begin
      SelRect.Left := Min(FCurrentPoint.X, FDownPoint.X);
      SelRect.Top := Min(FCurrentPoint.Y, FDownPoint.Y);
      SelRect.Right := Max(FCurrentPoint.X, FDownPoint.X);
      SelRect.Bottom := Max(FCurrentPoint.Y, FDownPoint.Y);
    end;
    SetAlpha(bmp, 140, SelRect);
    PaintBox1.Canvas.Draw(0, 0, bmp);
  finally
    bmp.Free;
  end;
end;

end. 
```

# encryption - 如何禁用openssl引擎？

> ID：13374489
> 
> 赞同：1
> 
> 时间：2012-11-14T07:16:06.077
> 
> 标签：encryption, openssl, centos, aes

我正在尝试比较使用和不使用英特尔 AES-NI 引擎的 openssl aes 加密性能。我使用的是 CentOS6.3，它的 openssl 已经实现了 Intel AES-NI 引擎。这意味着我的测试用例

（一些命令如

```
./openssl speed -evp aes-128-cbc -multi 32 
```

)

已经被 aesni 引擎加速。

我想禁用 aesni 引擎来比较加速引擎，但我不知道如何禁用 aesni 引擎。

谁能告诉我如何禁用引擎？非常感谢：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-26T07:49:47.960

您可以设置一个环境变量来关闭 NI：

OPENSSL_ia32cap="~0x200000200000000"

更多详细信息：[https ://mjanja.ch/2013/11/disabling-aes-ni-on-linux-openssl/](https://mjanja.ch/2013/11/disabling-aes-ni-on-linux-openssl/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-08T13:08:07.077

~~您可以通过卸载 aesni_intel 内核模块来禁用 AES-NI：~~这只会禁用内核使用 AES-NI，而不是用户进程使用。

```
rmmod aesni_intel 
```

# c - 我可以命名一个与 typedef 结构名称同名的变量吗？

> ID：13374497
> 
> 赞同：10
> 
> 时间：2012-11-14T07:16:56.620
> 
> 标签：c, gcc

这是结构声明代码。

```
struct list_el {
    int val;
    struct list_el * next;
};

typedef struct list_el item; 
```

当我编写这样的函数时，编译器会出错。它说`cur undeclared before first use`。

```
bool delete(item* item)
{
    assert(item != NULL);

    item* cur = NULL;
    cur = head;
    item* prev = NULL;
    while (cur) {
        if (cur == item) {
            if (prev == NULL) {
                head = item->next;
            } else {
                prev->next = item->next;
            }
            free(item);
            return true;
        }

        prev = cur;
        cur = cur->next;
    }
    return false;
} 
```

`typedef`在我查阅参考资料后，它说的~~结果~~有点像`#define`. 它只是在编译时进行替换。这是无法编译代码的原因吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-14T07:19:50.873

在这段代码中：

```
bool delete(item* item)
{
    item *cur = NULL; 
```

第三行`item`中的 the 被认为是变量的名称`item`（函数的参数），而不是类型。因此，第三行看起来好像是一个`item`与未定义变量相乘的表达式`cur`，这会导致问题；其余的表达也是假的。

如果这不是您想要的，请不要为类型和变量使用相同的名称。即使您不混淆自己和编译器，您也会混淆其他人。

* * *

*现在*应该从您的参考列表中删除哪个参考来源说`typedef`并且“相同” ！如果它不能区分两个根本不同的结构，那是很危险的，因为你不知道它何时会误导你（但这是一种误导你的情况）。`#define`

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T07:28:29.493

typedef 只是现有类型的新名称。定义由预处理器处理，而 typedef 由 C 编译器本身处理。[[从这个链接](http://bytes.com/topic/c/answers/634947-difference-between-typedef-define-c) 复制]

检查这个问题：[typedef 和 #define 在 c 中是否相同？](https://stackoverflow.com/questions/1666353/is-typedef-and-define-the-same-in-c)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T07:25:31.560

`typedef`不完全一样`#define`

以下是示例的区别：

```
#define cptr1 char*

typedef char* cptr2; 
```

在代码中：

```
 int main()
            {
             cptr1 c1,c2; // first case : 
        // here c1 will be pointer to char but c2 is only char as cptr 
   // is directly replaced by char* by preprocessor
            cptr2 c3,c4; // second case :
      // here c3 and c4 both are pointers to char 
            } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T07:38:55.823

您应该`-Wshadow`在编译代码时使用。然后，gcc 会告诉你哪里错了。:-) 如下：
`declaration of ‘item’ shadows a global declaration [-Wshadow]`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-14T07:40:08.877

Jonathan Leffler 回答了你的问题。

我只想补充一点：如果你用 C++ 编写代码，你不需要 typedef，所以你可以像这样实现你的列表：

```
struct list_el {
    int val;
    list_el *next;
};

bool delete_element(list_el *item)
{
    list_el *cur = NULL;
    ...
} 
```*

# python - 如何找到要传递的值以取消选中复选框？

> ID：13374501
> 
> 赞同：1
> 
> 时间：2012-11-14T07:17:11.857
> 
> 标签：python, post

如何传递 url 并取消选中 post 请求中的复选框。

HTML 如下所示：

```
<input type="checkbox" name="encodeURL" ID="encodeURL" checked="checked"> 
```

我正在使用[requests](http://docs.python-requests.org/en/latest/user/quickstart/#passing-parameters-in-urls)，一个 3rd 方 python 库，如下所示：

```
payload = {'u': 'http://www.google.com', 'encodeURL': '0'}
r = requests.post('http://www.website.com/', data=payload) 
```

到目前为止，将 'encodeURL' 设置为 '0'、'unchecked'、'' 和 0 不会在未选中复选框的情况下发布请求。如何找到传递给“encodeURL”以取消选中复选框的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T08:07:01.680

**总结 - TL/DR**

取消选中一个框 -在有效负载中**排除**它

```
payload = {'u': 'http://www.google.com'}
r = requests.post('http://www.website.com/', data=payload) 
```

选中一个框 -**将**其包含在有效负载中

```
payload = {'u': 'http://www.google.com', 'allowCookies': 'on'}
r = requests.post('http://www.website.com/', data=payload) 
```

**解释**

需要将 html 标记（在您的示例中默认设置复选框）与完全正交的服务器端行为区分开来。您显然想要做的是在您提交带有未选中复选框的表单时模仿浏览器的行为。在这种情况下，服务器不会收到*任何* `encodeURL`参数，只是从请求中省略它。

另请参阅[HTML 规范](http://www.w3.org/TR/REC-html40/interact/forms.html#checkbox)

> 提交表单时，只有“on”复选框控件才能[成功](http://www.w3.org/TR/REC-html40/interact/forms.html#successful-controls)。

**更新**

在使用 TamperData 插件调查您的特殊情况后，我发现它可能与限速处理 cookie 的方式有关，因此这不是请求库的错误，只是站点特性。这段代码似乎工作：

```
s = requests.session()
s.get('http://speed-limit.info/index.php')  # getting the cookies
response = s.post('http://speed-limit.info/includes/process.php?action=update', 
                  data={'u': 'stackoverflow.com', 'allowCookies': 'on'},
                  allow_redirects=True) 
```

然后`encodeURL`在响应中未选中（我希望，这就是你的意思）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-14T07:22:53.943

// 查看

```
document.getElementById("encodeURL").checked = true; 
```

// 取消选中

```
document.getElementById("encodeURL").checked = false; 
```

jQuery (1.6+):

// 查看

```
$("#encodeURL").prop("checked", true); 
```

// 取消选中

```
$("#encodeURL").prop("checked", false); 
```

# python - Python Cmd 模块在双引号字符串中启用制表符完成

> ID：13374506
> 
> 赞同：1
> 
> 时间：2012-11-14T07:17:27.727
> 
> 标签：python, python-2.7, cmd, tab-completion

我目前正在使用 Cmd/Cmd2 模块编写应用程序。

对于某个命令，我需要引用字符串来分隔某些参数值。

```
(Cmd) command "This is an argument" argument 04 
```

但是，我似乎无法使用以双引号开头的字符串来完成制表符的工作。例如

```
command This<tab> 
```

将自动完成

```
command This is an argument 
```

然而，

```
command "This<tab> 
```

不会自动完成任何内容。有没有人有任何解决方法的想法？

谢谢！

编辑：NVM，它确实支持引号......似乎我的代码中其他地方有一个错误。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T07:50:58.047

这里有一些很好的信息：[How to make a python, command-line program autocomplete absolute things NOT interpreter](https://stackoverflow.com/questions/187621/how-to-make-a-python-command-line-program-autocomplete-arbitrary-things-not-int)

# java - 在 cocos2d for android 中将孩子转换为屏幕空间

> ID：13374508
> 
> 赞同：0
> 
> 时间：2012-11-14T07:17:38.290
> 
> 标签：java, android, cocos2d-iphone

我是一名安卓开发者...

目前我有 2 张图片，ImageA 和 ImageB。ImageB 是 ImageA 的孩子

假设 ImageA 位置在 (100, 100)；那么ImageB的局部位置是(10, 0)；

所以我想要做的是如何检索 ImageB 的屏幕位置，它会返回 (110, 100) 而不是 (10, 0)？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T10:46:10.907

在 Objective-C 中，你会这样做：

```
[image convertToWorldSpace:image.position]; 
```

我假设 cocos2d-android 有相同的方法，当然语法会有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T16:16:38.893

您还可以通过添加父母和孩子的位置来获得孩子在屏幕上的正确位置

```
ImageA.getPosition().x+ImageB.getPosition().x 
```

# android - 渲染立方体

> ID：13374515
> 
> 赞同：2
> 
> 时间：2012-11-14T07:18:51.670
> 
> 标签：android, opengl-es-2.0

我使用对象导出器从 Blender 获取立方体模型。由于某种原因，我无法渲染立方体 - 这可能是我缺乏对视图和投影矩阵的理解。你能指出我的错误吗？

但是，使用相同的渲染器渲染一个简单的三角形就可以了`0.0f, 0.49f, 0.0f, -0.49f, 0.0f, 0.0f, 0.49f, 0.0f, 0.0f`。

```
public class CubeRenderer implements Renderer {

public float xAngle = 0;
public float yAngle = 0;

    public CubeRenderer() {
        cubeBuffer = ByteBuffer.allocateDirect(CubeModel.VERTICES.length * 8)
                .order(ByteOrder.nativeOrder()).asDoubleBuffer();
        cubeBuffer.put(CubeModel.VERTICES).position(0);
    }

@Override
public void onDrawFrame(GL10 arg0) {
    GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT | GLES20.GL_DEPTH_BUFFER_BIT);
    GLES20.glUseProgram(iProgramHandle);
    cubeBuffer.position(0);
    GLES20.glVertexAttribPointer(iPositionHandle, 3, GLES20.GL_FLOAT, false, 0,
            cubeBuffer);
    GLES20.glEnableVertexAttribArray(iPositionHandle);
    Matrix.setIdentityM(m_fIdentity, 0);
    Matrix.rotateM(m_fIdentity, 0, -xAngle, 0, 1, 0);
    Matrix.rotateM(m_fIdentity, 0, -yAngle, 1, 0, 0);

    Matrix.multiplyMM(m_MVPMatrix, 0, m_fViewMatrix, 0, m_fIdentity, 0);

    Matrix.multiplyMM(m_MVPMatrix, 0, m_fProjMatrix, 0, m_MVPMatrix, 0);

    GLES20.glUniformMatrix4fv(iMVPMatrixHandle, 1, false, m_MVPMatrix, 0);

    GLES20.glDrawArrays(GLES20.GL_TRIANGLES, 0, CubeModel.VERTICES_COUNT);
}

@Override
public void onSurfaceChanged(GL10 arg0, int width, int height) {
    GLES20.glViewport(0, 0, width, height);
    float ratio = (float) width / height;
    Matrix.frustumM(m_fProjMatrix, 0, -ratio, ratio, -1.0f, 1.0f, 1.0f, 10.0f);
}

@Override
public void onSurfaceCreated(GL10 arg0, EGLConfig arg1) {
    GLES20.glClearColor(0.5f, 0.5f, 0.5f, 1);
    GLES20.glEnable(GLES20.GL_DEPTH_TEST);
    GLES20.glFrontFace(GLES20.GL_CCW);

    Matrix.setLookAtM(m_fViewMatrix, 0, 0.0f, 3.0f, 5.5f, 0.0f, 0.0f, -10.0f, 0.0f, 1.0f, 0.0f);

    iProgramHandle = Utils.LoadProgram(CubeModel.VERTEX_SHADER_CODE, CubeModel.FRAGMENT_SHADER_CODE);
    iColorHandle = GLES20.glGetAttribLocation(iProgramHandle, "a_color");
    iPositionHandle = GLES20.glGetAttribLocation(iProgramHandle, "a_position");
    iMVPMatrixHandle = GLES20.glGetUniformLocation(iProgramHandle, "u_MVPMatrix");
}

}

public class CubeModel {

    public final static String VERTEX_SHADER_CODE = "attribute vec4 a_position;\n"
            + "attribute vec4 a_color;" + "uniform mat4 u_MVPMatrix;\n"
            + "varying vec4 v_color;" 
            + "void main()" + "{"
            + "v_color = a_color;"
            + "gl_Position = u_MVPMatrix * a_position;" + 
            "}";

    public final static String FRAGMENT_SHADER_CODE = "precision mediump float;"
            + "varying vec4 v_color;" + "void main()" + "{"
            + "gl_FragColor = vec4 ( 1.0, 0.0, 0.0, 1.0 );" + "}";

    public final static int VERTICES_COUNT = 36;

    public final static double[] VERTICES = new double[]{
      // f 1 2 3 4
      0.499999812500094, -0.499999750000125, -0.499999875000062,
      0.499999812500094, -0.499999750000125, 0.499999625000187,
      -0.499999687500156, -0.499999750000125, 0.499999625000187,
      // f 1 2 3 4
      0.499999812500094, -0.499999750000125, -0.499999875000062,
      -0.499999687500156, -0.499999750000125, -0.499999875000062,
      -0.499999687500156, -0.499999750000125, 0.499999625000187,
      // f 5 8 7 6
      0.499999812500094, 0.499999750000125, -0.499999375000312,
      -0.499999687500156, 0.499999750000125, -0.499999875000062,
      -0.499999687500156, 0.499999750000125, 0.499999625000187,
      // f 5 8 7 6
      0.499999812500094, 0.499999750000125, -0.499999375000312,
      0.499999312500344, 0.499999750000125, 0.500000124999937,
      -0.499999687500156, 0.499999750000125, 0.499999625000187,
      // f 1 5 6 2
      0.499999812500094, -0.499999750000125, -0.499999875000062,
      0.499999812500094, 0.499999750000125, -0.499999375000312,
      0.499999312500344, 0.499999750000125, 0.500000124999937,
      // f 1 5 6 2
      0.499999812500094, -0.499999750000125, -0.499999875000062,
      0.499999812500094, -0.499999750000125, 0.499999625000187,
      0.499999312500344, 0.499999750000125, 0.500000124999937,
      // f 2 6 7 3
      0.499999812500094, -0.499999750000125, 0.499999625000187,
      0.499999312500344, 0.499999750000125, 0.500000124999937,
      -0.499999687500156, 0.499999750000125, 0.499999625000187,
      // f 2 6 7 3
      0.499999812500094, -0.499999750000125, 0.499999625000187,
      -0.499999687500156, -0.499999750000125, 0.499999625000187,
      -0.499999687500156, 0.499999750000125, 0.499999625000187,
      // f 3 7 8 4
      -0.499999687500156, -0.499999750000125, 0.499999625000187,
      -0.499999687500156, 0.499999750000125, 0.499999625000187,
      -0.499999687500156, 0.499999750000125, -0.499999875000062,
      // f 3 7 8 4
      -0.499999687500156, -0.499999750000125, 0.499999625000187,
      -0.499999687500156, -0.499999750000125, -0.499999875000062,
      -0.499999687500156, 0.499999750000125, -0.499999875000062,
      // f 5 1 4 8
      0.499999812500094, 0.499999750000125, -0.499999375000312,
      0.499999812500094, -0.499999750000125, -0.499999875000062,
      -0.499999687500156, -0.499999750000125, -0.499999875000062,
      // f 5 1 4 8
      0.499999812500094, 0.499999750000125, -0.499999375000312,
      -0.499999687500156, 0.499999750000125, -0.499999875000062,
      -0.499999687500156, -0.499999750000125, -0.499999875000062,
    };
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T07:37:05.033

你有一个`double`缓冲区，你告诉 OpenGL 它是一个 GL_FLOAT 的缓冲区，也许这是个问题？

您可能想改用`float`缓冲区。

# php - Symfony2 直接从控制器去锚点

> ID：13374521
> 
> 赞同：0
> 
> 时间：2012-11-14T07:19:29.120
> 
> 标签：php, symfony, anchor

通过 SO 搜索，但解决方案涉及重定向，这是我无法做到的（因为我需要保持提交的操作的表单值不变）。

现在我有这个动作。

```
/**
 * @Template()
 */
public function someAction() {
    // ...
    return array(
        'param' => $whatever,
        'anchor' => 'someAnchor'
    );     
} 
```

你如何让这个动作`someAnchor`直接去，即不是去[http://example.com/some/route/some](http://example.com/some/route/some)，而是去[http://example.com/some/route/some#someAnchor](http://example.com/some/route/some#someAnchor)？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T07:30:05.007

转到特定锚点可以通过
1) HTTP 标头 - 位置
2) 锚点标记
2) JavaScript

对于您的情况，您只有最后一个选择。

**Sol**
页面加载后，用锚点更改 URL。

# php - 正则表达式 - 匹配字符串之间和任何地方的字符

> ID：13374523
> 
> 赞同：1
> 
> 时间：2012-11-14T07:19:41.817
> 
> 标签：php, regex

```
@name "@new other content" "@" @here and here@ 
```

我想匹配所有的“ **@** ”，不包括引号之间的那些。

我试过：

```
(?!\")\@(?!\") 
```

它部分工作，不匹配“@”但匹配“@new 其他内容”。

我在 PHP 中使用“preg_replace”。

谢谢你的帮助。

更新：

在这种情况下，我只想匹配 @ on: `@name, @here, here@`...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T07:24:34.080

如果“@”总是直接在“之后，那么您可以使用

```
(?<!\")\@ 
```

在这一点上你`(?!\")\@(?!\")`错了，它必须是一个否定的后向断言（`(?<!...)`）。如果“@”后面直接跟一个“.

如果“@”可以在引号之间的任何位置，那么 php 中的正则表达式是不可能的。

假设报价总是平衡的，你可以试试这个

```
[^"\s]*@[^"\s]*(?=[^"]*(?:"[^"]*"[^"]*)*$) 
```

[在 Regexr 上](http://regexr.com?32q1d)查看

当前面有偶数个 " 时，这只是匹配包含 @ 的子字符串。

**请注意：**当字符串中的任何位置存在不匹配的引号时，它将失败。

# xpages - XPAGES - Richtext 字段中的问题

> ID：13374527
> 
> 赞同：0
> 
> 时间：2012-11-14T07:19:51.880
> 
> 标签：xpages, xpages-extlib, xpages-ssjs

Richtext 字段中的问题。

我有一个带有 5 个富文本字段的表单，并将这些字段绑定在带有字段上传控件的 XPage 中。当我在 2 个富文本字段中上传相同的文件时，会显示错误消息“项目已存在”。如何解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T07:37:59.123

您是否也将每个文件上传控件绑定到每个字段（使用 value 属性）？

```
<xp:fileUpload id="fileUpload1" value="#{document.field1}"></xp:fileUpload> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T21:17:26.963

您是否尝试过使用 fileUpload 重命名功能？

```
<xp:fileUpload... useUploadname="false" filename="fileName1.txt"></xp:fileUpload> 
```

通过这种方式，您可以定义问题是否真的存在于相同的文件名中。

# objective-c - ASIHTTPRequest 错误不断出现

> ID：13374530
> 
> 赞同：0
> 
> 时间：2012-11-14T07:20:09.173
> 
> 标签：objective-c, ios, json, request, asihttprequest

我不知道为什么，但我所做的一切都不会帮助解决这个问题。我只是无法从服务器获取 JSON 数据。

这是我得到的编码 NSString：

```
http%253A%252F%252Fwww.doctors.co.il%252Fmobile%252Fforum%252Fforum-4863%253Fpage%253D12%252F 
```

这是我的代码：

```
- (NSString *)urlencode {
    NSMutableString *output = [NSMutableString string];
    const unsigned char *source = (const unsigned char *)[self UTF8String];
    int sourceLen = strlen((const char *)source);
    for (int i = 0; i < sourceLen; ++i) {
        const unsigned char thisChar = source[i];
        if (thisChar == ' '){
            [output appendString:@"+"];
        } else if (thisChar == '.' || thisChar == '-' || thisChar == '_' || thisChar == '~' ||
                   (thisChar >= 'a' && thisChar <= 'z') ||
                   (thisChar >= 'A' && thisChar <= 'Z') ||
                   (thisChar >= '0' && thisChar <= '9')) {
            [output appendFormat:@"%c", thisChar];
        } else {
            [output appendFormat:@"%%%02X", thisChar];
        }
    }
    return output;
}

- (void)startLoadingApplicationDataOf
{
    NSString *raw = @"http://www.doctors.co.il/mobile/forum/forum-4863?page=12/";
    NSString *safestring = [raw urlencode];
    NSURL *requestURL = [NSURL URLWithString:safestring];
    [self startRequest:requestURL];
}

- (void)startRequest:(NSURL *)requestURL
{
    ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:requestURL];
    [request setDidFinishSelector:@selector(requestCompleted:)];
    [request setDidFailSelector:@selector(requestError:)];
    [request setDelegate:self];
    [request startAsynchronous];
    [request setTimeOutSeconds:20.0f];
} 
```

我究竟做错了什么？在返回 JSON 的其他网址上，它运行良好，但在这个我不断收到此错误：

```
Failed to load data with error: Error Domain=ASIHTTPRequestErrorDomain Code=6 "Unable to start HTTP connection" UserInfo=0x8bc72b0 {NSLocalizedDescription=Unable to start HTTP connection} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T08:46:42.507

你已经对你的 url 进行了 url 编码，并且不再有一个有效的方案（http:// 消失了，剩下的是`http%25`），它也不会加载到 web 浏览器中，更不用说 http 库了。您可能打算对查询参数进行 URL 编码。有关详细信息，请参阅[http://en.wikipedia.org/wiki/Percent-encoding](http://en.wikipedia.org/wiki/Percent-encoding)。

# syntax-highlighting - Pycharm utils.py 没有得到语法高亮

> ID：13374533
> 
> 赞同：67
> 
> 时间：2012-11-14T07:20:13.883
> 
> 标签：syntax-highlighting, pycharm

我有几个 django 项目和几个不同的文件 name `utils.py`，但是 pycharm 将它们视为`.txt`没有语法突出显示或任何其他类型解析的简单文件，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：193
> 
> 时间：2012-11-14T07:31:43.013

请看`File`| `Settings`（`Preferences`在 Mac 上）| `Editor`| **文件类型**。

查找映射到**文本**类型或**按内容类型自动检测文件类型的**文件名。

删除不正确的映射，它将解决问题。

如果在 IDE 设置中仍然找不到错误的映射，请在[配置目录](https://www.jetbrains.com/help/idea/directories-used-by-the-ide-to-store-settings-caches-plugins-and-logs.html#config-directory)`options/filetypes.xml`中找到该文件。关闭 IDE 并编辑此文件以删除不正确的映射或删除此文件以将所有文件类型重置为默认值。

[![文本文件](../Images/5e603d1160f9e7e666f02ac2e3199d86.png)](https://i.stack.imgur.com/vS3Oy.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-02-10T07:28:14.657

正如 CrazyCoder 回答的那样，我的文件也出现了意外关联。就我而言，它是“按内容自动检测文件类型”。您可以尝试将文件添加到所需的文件类型（例如 Python），PyCharm 会自动尝试移动关联。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-03-31T20:23:54.723

仅供参考，重新关联文件类型的快速操作将在**IntelliJ IDEA 2021.2**中项目工具窗口的上下文菜单中提供（EAP 应在 2021 年 5 月左右公开提供）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-09T17:35:29.083

就我而言，我必须右键单击有问题的文件（django 迁移）并选择`Mark as Python`. 我`Mark as Plain Text`之前可能误点击了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-31T09:58:00.217

我实际上通过转到**项目**部分解决了这个问题，然后通过右键单击特定文件单击**覆盖文件类型。**然后我从可用文件类型列表中选择文件类型。

那行得通

# php - PHP如何获得确切的argv（当前命令的确切参数）？

> ID：13374535
> 
> 赞同：1
> 
> 时间：2012-11-14T07:20:35.210
> 
> 标签：php, shell, argv

$argv 数组包含*几乎*相同的值，我找不到确切的值。我的意思是特殊符号的所有转义/引用都消失了。因此，我不能在不重新处理的情况下将相同的参数传递给另一个脚本（或简单地记录调用的确切命令），这是我想避免的无用代码。

这是一个测试php文件：

```
<?php
var_dump($_SERVER["argv"]); 
```

示范：

```
[denis@mypc ~]$ php test.php key="val space" key2=val\ space
array(3) {
  [0]=>
  string(8) "test.php"
  [1]=>
  string(13) "key=val space"
  [2]=>
  string(14) "key2=val space"
} 
```

所以如果我再使用 join(" ", $argv) 我会得到：

```
test.php key=val space key2=val space 
```

这不是同一个调用（包含 4 个参数，而不是 2 个）。

再说一遍：理想情况下，我需要得到我正在执行的完全相同的命令。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T07:49:45.623

你必须像这样处理你的论点

```
$arguments = $argv;
array_shift($arguments);
foreach($arguments as $value) {
    $pieces = explode('=',$value);
    if(count($pieces) >= 2) {
        $real_key = $pieces[0];
        array_shift($pieces);
        $real_value = implode('=', $pieces);
        $real_arguments[$real_key] = $real_value;
    }
} 
```

该数组`$real_arguments`包含进程值

# nginx - 升级 Ubuntu 后 php5-fpm 无法启动

> ID：13374543
> 
> 赞同：0
> 
> 时间：2012-11-14T07:21:22.390
> 
> 标签：nginx, php, ubuntu-12.10

周末我将笔记本电脑从 Kubuntu 12.04 升级到 12.10，一切似乎都很好，直到我重新开始工作。

笔记本电脑是通过 php5-fpm 运行 Nginx 和 php 的 webdev 机器，但现在似乎 php5-fpm 无法启动。当我运行 /etc/init.d/php5-fpm restart 时，我只收到一条消息，提示失败。我没有在 syslog 或 /var/log/fpm-php.www.log 中收到任何消息来提示正在发生的事情。我正在运行 ps 以检查是否确实没有运行 PHP 进程。我也尝试将listen参数从127.0.0.1更改为listen = /var/run/php5-fpm.sock

任何人都可以建议一些事情来解决这个问题吗？

php 版本 5.4.8；php5-fpm 版本 5.4.8

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T22:08:06.877

我不会说我解决了这个问题，但我已经解决了。我用我的 Debian 6 生产服务器替换了整个 /etc/php5 目录，现在一切正常。*差异*在整个文件中显示了许多差异，但没有什么是明显的。如果有机会，我将通过每个差异来解决关键问题。

# c - 使用dirent循环遍历c目录中的html文件

> ID：13374545
> 
> 赞同：0
> 
> 时间：2012-11-14T07:21:26.360
> 
> 标签：c, file, directory-structure

我正在尝试用c编写一个程序，该程序接受一个目录并循环遍历目录中的文件。我计划对文件进行一些处理并以新名称重新保存它们。我使用 dirent 结构来获取目录内容，但是当我尝试从 dirent 中获取 FILE * 时出现问题。

```
 1 #include <unistd.h>
 2 #include <sys/types.h>
 3 #include <dirent.h>
 4 #include <stdio.h>
 5 #include <string.h>
 6 #include <sys/fcntl.h>
 7 #include <stdlib.h>
 8 #include <sys/stat.h>
 9 #include <errno.h>
 13 char parentName[256];
 14 
 15 void listdir(const char *name, int level)
 16 {
 17     DIR *dir;
 18     struct dirent *entry;
 19 
 20     if (!(dir = opendir(name)))
 21         return;
 22     if (!(entry = readdir(dir))){
 23         closedir(dir);
 24         return;
 25     }
 26 
 27     do {
 28         if (entry->d_type == DT_DIR) {
 29                 printf("Don't give me a directory!!");
 30         }
 31         else{
 32                 FILE *thisFile;
 33                 if(!(thisFile = fopen(entry->d_name, "r"))){
 34                         printf("Error");
 35                 }
 36                 struct stat buf0;
 37                 fstat(fileno(thisFile), &buf0);
 38                 off_t size = buf0.st_size;
 39                 printf("size = %d\n",(int) size);
 40                 printf("Made it here first");
 41                 char *buf1 = (char*) malloc(101);
 42                 printf("Made it here");
 43                 fgets(buf1,100,thisFile);
 55                 printf("%s",buf1);
 56         }
 57     } while ((entry = readdir(dir)));
 58     closedir(dir);
 59 }
 60 
 61 int main(int argc, char* argv[])
 62 {
 63         if (argc == 0)  listdir(".", 0);
 64         else listdir((char*)argv[1],0);
 65     return 0;
 66 } 
```

程序输出

大小 = 12292
分段错误：11

如果我删除第 39 行，它只是段错误。（此外，该大小与文件大小（以字节、字符或字为单位）不接近。）请帮忙，谢谢！

:)

编辑：包括#includes

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T07:40:47.437

我看到三个问题：

1.  `argc`当您不提供任何参数时，是 1 而不是 0。所以，`main()`改为：

    `if (argc == 1) listdir(".", 0);`

2.  失败时`fopen()`，您仍然尝试处理该文件。添加一个`else`或`continue`循环：

    `if(!(thisFile = fopen(entry->d_name, "r"))){`
    `printf("Error");`
    `continue;`
    `}`

3.  你有内存泄漏。你分配`buf1`，但你从来没有`free()`。

# graphics - DXT2/3 和 DXT4/5 纹理格式有什么区别？

> ID：13374549
> 
> 赞同：4
> 
> 时间：2012-11-14T07:21:49.793
> 
> 标签：graphics, 3d, textures, game-engine, direct3d

我阅读了一些关于 DXTn 和 BCN 纹理压缩的文章，并学习了如何对这些格式进行编码。但是我还是不知道DXT2和DXT3格式或者DXT4和DXT5格式有什么区别，我猜这些格式的区别是一样的。

在 D3D SDK 的文档中，它说：

> DXT2 和 DXT3 的区别在于，在 DXT2 格式中，假设颜色数据已经预乘了 alpha。在 DXT3 格式中，假设颜色没有预乘 alpha。这两种格式是必需的，因为在大多数情况下，在使用纹理时，仅检查数据不足以确定颜色值是否已乘以 alpha。因为在运行时需要此信息，所以使用两个 FOURCC 代码来区分这些情况。但是，用于这两种格式的数据和插值方法是相同的。

这是否意味着：如果我们有一个颜色为 RGB 127,127,127 且 alpha 0 的像素，那么在 DXT2 中，它实际上会存储 RGB 0,0,0，因为 127 乘以 alpha 0？

如果它是正确的，我们在实际游戏开发中能得到什么好处？在我看来，这是完全没有必要的。

此外，BC2 和 BC3 格式发生了什么变化？据我所知，DXT2/3 映射到 BC2，DXT4/5 映射到 BC3，因此不再存在区别。是不是被搁置了？为什么？

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T14:52:20.137

据我所知，DXT2 & 3 和 DXT4 & 5 之间确实没有*物理*差异——GPU 以相同的方式对它们进行解码。根据文档中的引用，我怀疑唯一的原因是向开发人员提示纹理是否已被预乘，从而知道要使用哪种帧缓冲区混合模式，即。(1, 1-SrcAlpha) 与 (SrcAlpha, 1-SrcAlpha)。

# ios - 搜索效果不佳（使用storyBoard、coreData）

> ID：13374557
> 
> 赞同：0
> 
> 时间：2012-11-14T07:22:39.573
> 
> 标签：ios, search, core-data, storyboard, uisearchbar

我添加了搜索栏跟随教程，但由于某种原因，搜索不显示结果。

注意：我在第 2 行添加了“self tableView”以避免错误。也许这就是问题所在？还是IF的问题？

**混帐：[https ://github.com/dennis87/git_bookList](https://github.com/dennis87/git_bookList)**

我认为问题出在这段代码中：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    //cell create
    if (nil == cell)
    {
        UITableViewCell *cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault
                                                        reuseIdentifier:CellIdentifier];
    }

    if (tableView == self.searchDisplayController.searchResultsTableView)
    {
        NSLog(@"Configuring cell to show search results");
        Books *book = [[self searchResults]objectAtIndex:indexPath.row];
        [[cell textLabel]setText:[book title]];
    }
    else
    {
        NSLog(@"Configuring cell to show normal data");
        Books *book = [[self fetchResultsController]objectAtIndexPath:indexPath];
        [[cell textLabel]setText:[book title]];
    }
    return cell;
} 
```

我尝试放置 NSlog 并得到这个 NSLog 从未打印过，所以问题可能出在 IF 上？我做错了什么？

```
- (void)filterContentForSearchText:(NSString*)searchText scope:(NSString*)scope
{
    NSLog(@"Previous Search Results were removed.");
    [self.searchResults removeAllObjects];

    for (Books *book in [self.fetchResultsController fetchedObjects])
    {
        if ([scope isEqualToString:@"All"] || [book.title isEqualToString:scope])
        {
            NSLog(@"entered");
            NSComparisonResult result = [book.title compare:searchText
                                                   options:(NSCaseInsensitiveSearch|NSDiacriticInsensitiveSearch)
                                                     range:NSMakeRange(0, [searchText length])];
            if (result == NSOrderedSame)
            {
                NSLog(@"Adding book.title '%@' to searchResults as it begins with search text '%@'", book.title, searchText);
                [self.searchResults addObject:book];
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T09:33:47.573

有几个问题。

1.  `self.searchDisplayController`是`nil`因为您没有在情节提要中设置该出口。按住 Ctrl 键从“Books Table View Controller”拖动到“Search Display Controller”并选择“searchDisplayController”插座。

2.  您的`filterContentForSearchText`方法检查 的值`scope`，但那是`nil`因为您没有在搜索栏中定义任何范围。

3.  `numberOfSectionsInTableView`应该返回`1`搜索结果表视图。

如果您解决了这些问题，您应该能够看到一些搜索结果。

**备注：**这条线

```
UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath]; 
```

对我来说似乎很可疑。`self.tableView`即使对于搜索结果表视图，您也要求将单元格出列。我在 SO 上的某个地方看到了这个作为使用带有搜索显示的原型单元格的方法，它可能是正确的，但我有一点疑问。

*如果正确*，则不需要以下内容`if (nil == cell) { ... }`，因为该方法总是从原型返回一个单元格。

您还应该注意，在 `if (nil == cell) { ... }`块内，您将值分配给局部变量`cell`，而不是外部范围的变量。

# windows-8 - 如何将广告添加到 ListView

> ID：13374567
> 
> 赞同：0
> 
> 时间：2012-11-14T07:23:20.560
> 
> 标签：windows-8, winjs

您如何将广告插入 ListView。我可以有条件地呈现我的项目模板并显示一个添加，但我不想用广告替换项目。我也可以在我的数据源中放置一个占位符，但是我必须在几个地方考虑​​那个不同的项目。还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T08:10:38.183

WinJS.Binding.List 的行为类似于数组。因此，假设您有一个包含 10 个项目的列表，并且您希望在索引“3”处动态地投放广告。

假设您已经定义了一个名为“list”的变量，即 WinJS.Binding.List。你会做

```
list.splice(3, 0, {ADVERTISEMENT OBJECT HERE}); 
```

这应该会自动为您的 listView 设置动画以弹出新元素。如果它没有动画，请尝试这些[http://msdn.microsoft.com/en-us/library/windows/apps/br229780.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/br229780.aspx)之一，您可能想要“createAddToListAnimation”。在 WinJS 中制作动画非常容易。

我猜你的广告对象看起来像 {message: "Join XXX today"} 或类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T15:39:23.907

这些确实是您需要执行此操作的两种方法——List View 控件没有提供其他机制来更改其可见内容。

如果您有分组数据，那么您可以将*组标题*作为广告；但同样，您必须更改您的数据。

# java - 显示自动完成列表

> ID：13374568
> 
> 赞同：1
> 
> 时间：2012-11-14T07:23:24.103
> 
> 标签：java, selenium

> **可能重复：**
> [硒可以处理自动完成吗？](https://stackoverflow.com/questions/663034/can-selenium-handle-autocomplete)

如何在 eclipse 中`Autocomplete`使用 selenium 工具测试软件应用程序时显示列表？`javacode`

# puppet - 使用 Puppet 安装 MongoDb

> ID：13374571
> 
> 赞同：2
> 
> 时间：2012-11-14T07:23:44.257
> 
> 标签：puppet

我是 Puppet 的新手，所以也许你会发现我的问题有点愚蠢......所以，我正在寻找可以在我的机器上安装和运行 Mongodb 2.2 的 puppet 配方。通过谷歌搜索，我找到了这个模块[http://forge.puppetlabs.com/puppetlabs/mongodb](http://forge.puppetlabs.com/puppetlabs/mongodb)但我不明白我该怎么做？它说我必须先在 puppet 节点上安装模块。究竟是什么意思？比方说，我有一组必须通过 puppet 配置的机器。为了达到这个目标，我必须在 puppet 食谱中添加什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-26T13:01:53.520

如果有人可能对安装 MongoDB 的最新版本感兴趣，这对我来说效果很好。在撰写本文时，最新的稳定版本是**MongoDB 3.0.3**。

首先通过 puppet [apt 模块](https://forge.puppetlabs.com/puppetlabs/apt)更新您的操作系统存储库（如果您使用的是 Debian 或 Ubuntu 发行版）。根据您的发行版和版本更改以下数据。查看此处获取 MongoDB 官方存储库信息：[http ://docs.mongodb.org/manual/administration/install-on-linux/#recommended](http://docs.mongodb.org/manual/administration/install-on-linux/#recommended)

```
# $::lsbdistcodename should contain what you usually get
# with the `lsb_release -sc` command
$server_lsbdistcodename = downcase($::lsbdistcodename)

apt::source { 'mongodb-org-3.0':
    location    => 'http://repo.mongodb.org/apt/debian',
    release     => "${server_lsbdistcodename}/mongodb-org/3.0",
    repos       => 'main',
    key         => '7F0CEB10',
    key_server  => 'keyserver.ubuntu.com',
    include_src => false
} 
```

然后`mongodb::globals`正确设置类以确保您获得**MongoDB 3**。我正在使用的 MongoDB puppet 模块就是[这个](https://forge.puppetlabs.com/puppetlabs/mongodb)。

```
class { 'mongodb::globals':
    manage_package_repo => false, # disable the 10gen repository
    server_package_name => 'mongodb-org',
    service_name        => 'mongod',
    version             => '3.0.3',
}->
class { '::mongodb::server': } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-21T07:42:45.103

使用 puppet 安装 mongodb 并不像看起来那么容易。获取官方 Puppet Labs 模块 v0.8.0 来安装 mongodb 2.6.3 有点困难。你最终得到一个关于**mongodb-10gen=2.6.3 not being found**的恰当错误。已经有问题和补丁，但尚未发布。

所以这就是你需要做的：

```
git clone https://github.com/puppetlabs/puppetlabs-mongodb.git 
```

然后使用以下 puppet 配置：

```
class { '::mongodb::globals':
  manage_package_repo => true,
  server_package_name => 'mongodb-org',
  version => '2.6.3'
}->
class { '::mongodb::server': } 
```

这对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T23:02:59.473

如果您正在独立运行 puppet，则您已经安装了 puppet gem 并拥有`puppet`可执行文件。要安装模块，请运行`puppet module install puppetlabs/mongodb`. 模块安装后，您可以简单地在节点定义中包含 mongodb 模块

```
node 'myhost' {
    include mongodb
} 
```

如果要运行需要访问模块的多个节点，则必须设置 puppetmaster 并安装节点。有关详细信息，请参阅 [基本代理/主设置][1]。确保在 puppet.conf 中启用了 pluginsync=true，以便模块可以访问远程代理。

然后 puppetmaster 需要一个文件，通常`site.pp`用它应该配置的节点来定义。最后，在要运行 mongodb 的每个节点上包含 mongodb 模块，您应该可以启动并运行。

# php - 如何动态加载 Kohana3 的 404 自定义页面？

> ID：13374572
> 
> 赞同：0
> 
> 时间：2012-11-14T07:23:49.450
> 
> 标签：php, kohana-3, custom-error-pages, kohana-3.2

感谢 mdskinner，我使用了[how-to-setup-a-custom-404-page-for-a-kohana-v3-app的解决方案。](https://stackoverflow.com/questions/4463862/how-to-setup-a-custom-404-page-for-a-kohana-v3-app)所以，我的工作代码是这样的：

```
Kohana_Exception::$error_view = 'kohana/404';//bootstrap.php

and the view file path is system/views/kohana/404.php 
```

不幸的是，404 页面是静态页面。但是，我想像在任何其他页面上一样动态加载页脚 - 使用控制器和视图。404自定义页面可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T19:23:56.470

在您的`index.php`中，您在请求执行和回显之间放置了一个 try/catch 块，如下所示

```
$request = Request::factory();

try
{
  $response = $request->execute();
}
catch (Exception $exc)
{
  if ($exc instanceof HTTP_Exception && $exc->getCode() === 404)
  {
     $response = Request::factory('your404route')->execute()->status(404);  
  } else {
    throw $exc;
  }
}

echo
  $response
  ->send_headers()
  ->body(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T11:01:23.987

是的，你可以轻松地。请使用 3.2 的官方指南 - [http://kohanaframework.org/3.2/guide/kohana/tutorials/error-pages](http://kohanaframework.org/3.2/guide/kohana/tutorials/error-pages)或来自 Lysender 的精彩博客文章 - [http://blog.lysender.com/2010/08/kohana-404 -pages/](http://blog.lysender.com/2010/08/kohana-404-pages/)（这实际上是针对 3.1 版本的，但是 3.2 和 3.1 之间的变化并没有那么大）。

# java - 打开一个新的数据库连接或保持连接打开直到过程完成是好的吗？

> ID：13374574
> 
> 赞同：2
> 
> 时间：2012-11-14T07:24:02.097
> 
> 标签：java, groovy, mybatis

我有 2 个数据库`old`& `new`，`old`数据库详细信息需要过滤/操作并存储到`new`.

> `OLD DB`

1.  我有大约 10000 个配置（数据库行）

2.  和 10000 个 BLOBS（xml 文件大小平均为 4MB）匹配上面的配置 ID

> `NEW DB`

1.  1 个新表将包含旧表中的过滤数据，但这次没有 BLOB 数据，而是绝对路径

2.  并根据配置提供一些建议

在这里，我编写了一个程序（对 DB 使用 Groovy 和 MyBatis），它获取所有可用的配置记录`OLD DB`并存储在类列表中，并且 DB 连接已关闭

为了也为每个配置 id 获取 BLOBS，建立一个新连接并保持打开很长时间

```
List<String> projectid
List<CSMConfigInfo> oldConfigs
List<ConfigInfo> newConfigs 
Map<String,CSMConfigInfo> oldConfigMap

SqlSession session = DatabaseConnectivity.getOldCSMDBSessionFactory().openSession()
/*  trying to batch execute based on project id */
    projectid.each {pid->
        logger.info "Initiating conversion for all configuration under $pid project id"
        oldConfigMap.each {k,v->
/*  Here I am keeping a DB connection open for a long time */           
            if(pid.equals(v)){                  
                createFromBlob(k,session)                   
            }
        }                       
        logger.info "Completed for $pid project id\n"           
    }

session.close() 
```

在逐个获取 BLOB 1 后，我创建了一个临时 xml 文件，该文件被解析以应用过滤器以插入`NEW DB`. 下面的代码您可以看到，根据 xml 是否可转换和可解析，打开了一个新连接`NEW DB`。这是一种好的做法，还是我需要`NEW DB`为所有 10000 条记录保持连接打开？

```
/* XML is converted to new format and is parsable */
def createFromBlob(CSMConfigInfo cfg,SqlSession oldCSMSession){
    .
    .

    if(xmlConverted&&xmlParsed){
        //DB Entries
        try{
            /* So now here I am opening a new connection for every old config record, which can be 10000 times too, depending on the filter */
            SqlSession sess = DatabaseConnectivity.getNewCSMSessionFactory().openSession()

            //New CSM Config
            makeDatabaseEntriesForConfiguration(newConfig,sess)
            //Fire Rules
            fireRules(newConfig,sess,newCSMRoot)

            sess.close()

        }
        catch(IOException e){
            logger.info "Exception with ${newConfig.getCfgId().toString()} while making DB entries for CONFIG_INFO"
        }
        logger.info "Config id: "+cfg.getCfgId().toString()+" completed successfully, took "+getElapsedTime(startTime)+ " time. $newabspath"
    }
    else{
        def errormsg = null
        if(!xmlConverted&&!xmlParsed)
            errormsg = "Error while CONVERSION & PARSING of config id "+cfg.getCfgId().toString()+", took "+getElapsedTime(startTime)+ " time."
        else if(!xmlConverted)
            errormsg = "Error while CONVERSION of config id "+cfg.getCfgId().toString()+", took "+getElapsedTime(startTime)+ " time."
        else if(!xmlParsed)
            errormsg = "Error while PARSING  of config id "+cfg.getCfgId().toString()+", took "+getElapsedTime(startTime)+ " time."
        logger.info errormsg
    }

    makeDatabaseEntriesForConvertStatus(csmConfigConvertStatus,oldCSMSession)
} 
```

这目前适用于 20 条记录，但我不确定它对所有 10000 条记录有何反应。请帮忙

**更新**

每个配置大约需要 3-6 秒

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T07:38:35.320

使用数据库连接池总是更有效，让容器在需要时管理建立和关闭该连接。创建一个连接，执行您的语句然后关闭该连接可以通过一个池来避免，该池将在为您提供要使用的连接之前进行预连接，并且在大多数情况下（您所描述的细节）不需要给出连接它可能已经连接了。

因此，是的，保持连接打开更有效，甚至更好地汇集您的连接......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T07:30:23.453

根据我的经验，在循环的每个循环中创建新连接时通常会产生开销。如果打开一个连接需要 0.1 秒，那么对于 10000 条记录，您的时间开销将是 1,000 秒（大约 17 分钟）。如果在超过 10,000 条记录时保持连接打开而不关闭它，您将节省 17 分钟。我认为您将希望节省 17 分钟以及关闭和重新创建连接 10,000 次所需的 CPU 资源。打开循环外的连接，并在循环后关闭它。

尝试修改方法`createFromBlob`，使其接受两个这样的会话；

`def createFromBlob(CSMConfigInfo cfg,SqlSession oldCSMSession, SqlSession newCSMSession){`

然后替换这个代码块；

```
 /* So now here I am opening a new connection for every old config record, which can be 10000 times too, depending on the filter */
        SqlSession sess = DatabaseConnectivity.getNewCSMSessionFactory().openSession()

        //New CSM Config
        makeDatabaseEntriesForConfiguration(newConfig,sess)
        //Fire Rules
        fireRules(newConfig,sess,newCSMRoot)

        sess.close() 
```

有了这个;

```
 //New CSM Config
        makeDatabaseEntriesForConfiguration(newConfig,newCSMSession)
        //Fire Rules
        fireRules(newConfig,newCSMSession,newCSMRoot) 
```

然后，您必须在开始循环之前创建传递新的 SqlSession，并将其传递给您修改过的方法（`createFromBlob`）

# c# - 文本框中选定的 dataGridView 单元格的值

> ID：13374575
> 
> 赞同：1
> 
> 时间：2012-11-14T07:24:14.220
> 
> 标签：c#, datagridview, textbox

我有一个windows窗体中的datagridview和文本框，当我点击datagridview的一个单元格时，值必须复制到文本框。

我收到一个错误：

> System.Windows.Forms.DataGridCell 不包含 RowIndex 的定义

我试过这段代码

```
void dataGridView1_Click(object sender, EventArgs e)
 {
      Txt_GangApproved.Text=dataGridView1.CurrentCell.RowIndex.Cells["NO_OF_GANGS_RQRD"].Value.ToString();
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T07:28:01.060

```
foreach (DataGridViewRow RW in dataGridView1.SelectedRows) {
    //Send the first cell value into textbox'
    Txt_GangApproved.Text = RW.Cells(0).Value.ToString;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T07:34:56.437

试试这个-

```
Txt_GangApproved.Text = dataGridView1.SelectedRows[0].Cells["NO_OF_GANGS_RQRD"].Value.ToString(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T07:46:27.067

您正在使用错误的事件来实现您想要的。不要使用**Click**事件 ，而是使用 dataGridView1 的**CellClick**事件并尝试以下代码：

```
private void dataGridView1_CellClick(object sender, DataGridViewCellEventArgs e)
{
    if(e.RowIndex >= 0 && e.ColumnIndex >= 0)  //to disable the row and column headers
    {
       Txt_GangApproved.Text = dataGridView1.Rows[e.RowIndex].Cells[e.ColumnIndex].Value.ToString();
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-06-20T09:13:45.793

这是 100% 的工作代码（使用 -CellClick- 事件处理程序）：

```
 private void dataGridView1_CellClick(object sender, DataGridViewCellEventArgs e)
    {
        textBox1.Text = dataGridView1.CurrentCell.Value.ToString();
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-12T06:33:31.603

当我的 DataGridView 的选择模式为 FullRowSelect 时，我有时会使用**SelectionChanged事件。**然后我们可以在事件中写一行，如：

```
Txt_GangApproved.Text = Convert.ToString(dataGridView1.CurrentRow.Cells["NO_OF_GANGS_RQRD"].Value); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-09T09:10:04.957

```
private void dataGRidView1_CellClick(object sender, DataGridViewCellEventArgs e)
    {
        if (e.RowIndex >= 0)
        {
            DataGridViewRow row = this.dataGridView1.Rows[e.RowIndex];
            string text = row.Cells[dataGridView1.CurrentCell.ColumnIndex].Value.ToString();
        }
    } 
```

# rally - LookbackAPI：用户故事何时畅通无阻？

> ID：13374582
> 
> 赞同：1
> 
> 时间：2012-11-14T07:25:04.550
> 
> 标签：rally

我正在对回溯 API 运行以下查询，以查找日期范围内未被阻止的故事，但我没有得到任何结果。我错过了一些明显的东西吗？没有返回错误、警告或结果。

下面是我从回溯 API 返回的生成查询：

```
 'GeneratedQuery' => {
                            'fields' => 'true',
                            'skip' => 0,
                            'limit' => 100,
                            'find' => {
                                        '_PreviousValues.Blocked' => 'true',
                                        '_TypeHierarchy' => -51038,
                                        'Blocked' => 'false',
                                        '_ValidFrom' => {
                                                          '$lte' => '2012-11-02T04:00:00.000Z',
                                                          '$gte' => '2012-07-01T04:00:00.000Z'
                                                        }
                                      }
                          }, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:39:27.000

当您传入布尔值时，您需要确保它们是纯真或假。如果您将它们作为字符串传递，它将不会按预期运行。对于 Number 类型的值也是如此。他们不应该有引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T03:51:55.630

好的，问题与“真”和“假”以及我使用 Perl 的事实有关。

我正在使用 Perl JSON 库，但我没有意识到您需要传入 JSON::true() 和 JSON::false() 来表示真假，而不是文字“真”和“假”。所以，实际上拉里是对的：它传递的是“真”而不是“真”。

# css - selectonemenu jsf上的属性

> ID：13374584
> 
> 赞同：1
> 
> 时间：2012-11-14T07:25:10.807
> 
> 标签：css, jsf-2, liferay, custom-component, renderer

我对标签 h:selectOneMenu 有点麻烦，我只想在选项中添加一些背景图片，例如用户头像。

遵循[h:selectOneMenu 中的样式选项 - by balusC](http://balusc.blogspot.com/2008/08/styling-options-in-hselectonemenu.html)

我曾尝试使用自己的样式 css 呈现选项。

```
<h:selectOneMenu id="dropListUser"
        value="#{myController.myUserObject.userid}">
    <f:attribute name="avatar" value="#{true}"></f:attribute>                           
    <f:attribute name="key" value="somthing"></f:attribute>
    <f:attribute name="height" value="32"></f:attribute>
    <f:attribute name="width" value="32"></f:attribute>
    <f:selectItems value="#{myController.listOfUsers}" var="item" itemLabel="#{item.username}" itemValue="#{item.userid}"/>
</h:selectOneMenu> 
```

它适用于高度、宽度和键，但使用 avatar（或任何包含带有 #{} 表达式的值的属性）服务器 bean 无法获取它。

尝试打印出所有键名：

```
Iterator itr = component.getAttributes().keySet().iterator();
        while(itr.hasNext()){
            System.out.println(itr.next().toString());
        } 
```

没有名称为 avatar 的键：

```
--------------------------------
height
javax.faces.component.VIEW_LOCATION_KEY
com.sun.faces.facelets.MARK_ID
key
width
width: 32 height: 32 style null?: true
-------------------------------- 
```

ps：顺便说一句，有没有人知道如何创建扩展 h:selectOneMenu 的自定义 taglib :-？

ps2：事实上，如果我能进入`myController.listOfUsers` 我`<f:selectItems value="#{myController.listOfUsers}" var="item" itemLabel="#{item.username}" itemValue="#{item.userid}"/>`的自定义渲染bean，它可能会更好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:21:50.620

Woof，我不知道为什么或如何，但是当尝试打印出所有键名时`component.getAttributes()`也`component.getAttributes().containsKey("avatar")`返回该头像不存在，但我真的可以获得头像值，我的问题解决了^^“只需删除检查的代码密钥存在与否

# java - 我们可以得到给定日期对象的模式吗

> ID：13374586
> 
> 赞同：0
> 
> 时间：2012-11-14T07:25:24.760
> 
> 标签：java, simpledateformat

如何获取`pattern`给定`date`对象的

我`Date`在我的方法中获取一个对象作为参数，我想知道日期的模式以将其转换为用户选择的时区。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T07:41:37.740

你误解了a是什么`Date`意思。自 Unix 时代以来，这*只是*几毫秒。它*没有*时区、日历或文本格式的概念。如果有帮助，可以把它想象成有点像`int`- an`int`不是十六进制、十进制或二进制 - 它只是某个范围内的数字。如果将“1a”解析为十六进制，则与将“26”解析为十进制的结果无法区分。也是如此`Date`。

当然，这在评论中已经有所解释，但您的回复是：

> 好的，但是当我得到已经设置格式的日期对象时，我想知道该格式。

...表明您并没有真正理解它。“已经设置格式”的概念在`Date`.

如果您需要应用特定格式，则应传递.`DateFormat`和`Date`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T07:44:53.153

您不能从日期对象本身但是（取决于您的确切要求）您可以使用

```
DateFormat.getDateTimeInstance() 
```

这将为您返回语言环境的默认样式和格式，但是就像我说的那样，这取决于您的要求...

另一种方法是更改​​您的方法签名以接受格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T07:45:28.530

你应该创建[`DateFormat`](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/DateFormat.html). `Date`对时区一无所知。

```
Date date = new Date(); 

DateFormat formatter = new SimpleDateFormat("dd MMM yyyy HH:mm:ss");   
// Set TimeZone
formatter.setTimeZone(TimeZone.getTimeZone("EST"));   

System.out.println(formatter.format(date));   

// Change timezone   
formatter.setTimeZone(TimeZone.getTimeZone("IST"));   

System.out.println(formatter.format(date)); 
```

# html - 利用图像的响应式菜单

> ID：13374590
> 
> 赞同：0
> 
> 时间：2012-11-14T07:25:58.517
> 
> 标签：html, css

我要创建的菜单是：

![导航](../Images/2b1aa61e9012be522c967ca6240d6a44.png)

菜单是中英文的。问题是@font-face 对汉字不实用，因为每种字体都超过 5mb。所以 - 我需要求助于图像。

所以 - 我的想法是：

*   是否有任何可扩展的图像替换技术？

*   如何从字体中提取字符以制作自定义字体？

谢谢，

罗伯特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T18:05:39.483

使用 cufon - [http://cufon.shoqolate.com/generate/](http://cufon.shoqolate.com/generate/)

它在 Javascript 中自动呈现文本图像，并且对于搜索引擎也是可读的。

# c# - 将会话值存储在 C# 中的数据表中

> ID：13374592
> 
> 赞同：0
> 
> 时间：2012-11-14T07:25:59.037
> 
> 标签：c#, asp.net

我创建了一个使用 Hashtable 存储多个值的会话。

```
string productCode = lblProductId.Text;
string mrp = lblPrice.Text;
string quantity = txtQuantity.Text;
Hashtable htPdt = new Hashtable();
htPdt.Add("pdtId", "" + productCode + "");
htPdt.Add("price", "" + mrp + "");
htPdt.Add("quantity", "" + quantity + "");
Session["bag101"] = htPdt; 
```

现在我想将此会话数据存储在数据表中。我该怎么做？

我正在使用此代码

```
Datatable DtbBag101= (Datatable)Session["bag101"]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T07:30:53.593

You can not cast hashtable to data table. You need to create datatable assign data to it and then save in session.

```
DataTable table = new DataTable();
table.Columns.Add("pdtId", typeof(int));
table.Columns.Add("price", typeof(double));
table.Columns.Add("quantity", typeof(double));

table.Rows.Add(1, 2, 3);    
Session["bag101"] = table; // Putting DataTable in Session

DataTable DtbBag101= (DataTable)Session["bag101"]; //Retrieving DataTable from Session 
```

# java - 如何访问对象中的对象？

> ID：13374595
> 
> 赞同：1
> 
> 时间：2012-11-14T07:26:16.537
> 
> 标签：java, oop, inheritance, stack

我正在尝试构建二十一点游戏。我已经创建了一个套牌，现在我想展示它。

我知道我做错了什么，因为我无法在 CardStack 类中访问 displayStack。另外，我有一种感觉，我没有正确地进行继承。我该如何解决这个问题？

这是我的代码：

```
public class CreateCardDeck {
    int deckSize = 52;
    CardStack cardStack = new CardStack(deckSize);

    public void CreateDeck() {
        String[] suit = {"clubs", "diamonds", "hearts", "spades"};
        int[] rank = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13};

        for (int i = 0; i < rank.length; i ++) {
            for (int j = 0; j < suit.length; j++) {
                cardStack.push(suit[j], rank[i]);
            }
        }
    }
} 
```

卡类：

```
class Card {
    String suit;
    int rank;

    Card(String suit, int rank) {
        this.suit = suit;
        this.rank = rank;
    }

    public String getSuit() {
        return suit;
    }

    public String getRank() {
        String nameTheRank;
        if (rank == 1)
            nameTheRank = "Ace";
        else if (rank == 11)
            nameTheRank = "Jack";
        else if (rank == 12)
            nameTheRank = "Queen";
        else if (rank == 13)
            nameTheRank = "King";
        else
            nameTheRank = String.valueOf(rank);
        return nameTheRank;
    }
} 
```

CardStack 类：

```
class CardStack {
    public void displayDeck() {
        for (int i = 0; i < stackArray.length; i ++)
            System.out.println(stackArray[i]);
    }
} 
```

主类：

```
public class MainClass {
    public static void main(String[] args) throws IOException {
        CreateCardDeck c = new CreateCardDeck();
        c.CreateDeck();
        // How to display my deck?
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T07:31:20.933

我会重新设计你的类型开始。`CreateCardDeck`听起来它应该是一个`createDeck`在一个`CardDeck`或可能只是`Card`类型中调用的静态方法。听起来花色和数字的知识也不应该成为该方法的一部分。卡片通常用作 Java 中枚举的演示 - 一个枚举用于值（从王牌到国王），一个用于花色。

想想拥有一个*实例*的`CreateCardDeck`真正含义——这对你来说真的有意义吗？感觉更像是动词（一种方法）而不是名词（一种类型）。

现在你*可以*有一个`CardDeckFactory`或类似的东西——但我不希望牌组成为对象状态的一部分；它只会由方法返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T07:33:17.253

你在找这个，即。扩展类`CreateCardDeck`并引用它的`cardStack`变量？

```
 class Card extends CreateCardDeck
 {
    public void displayDeck()
    {
        for (int i = 0; i < cardStack.size(); i ++)
            System.out.println(cardStack.get(i));
    }
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T07:45:46.897

让我们尽可能简单：你需要一张牌才能开始打牌，这样更好。
然后你需要一个甲板来储存你所有的卡。

所以你可以只有两个类：Deck 和 Card。当你创建一个套牌实例时，它会生成你需要玩的 52 张牌。

```
public class Card{}

public class Deck
{
    int deckSize = 52;
    // Here you certainly need a list or a stack to stock your card
    SomeContainer cardStack;

    public Deck()
    {
        String[] suit = {"clubs", "diamonds", "hearts", "spades"};
        int[] rank = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13};

        for (int i = 0; i < rank.length; i ++)
        {
            for (int j = 0; j < suit.length; j++)
            {
                cardStack.push(new Card(suit[j], rank[i]));
            }
        }
    }

    public void Display()
    {
        for (int i = 0; i < cardStack.length; i ++)
            System.out.println(cardStack[i]);
    }
}

public class MainClass 
{
    public static void main(String[] args) throws IOException
    {
        Deck deck = new Deck();
        deck.Display();
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T07:47:18.110

你没有显示你的 CardStack 类，也没有显示所有的 Card 类

基本上你应该有一个 showCards() 方法，而且在卡片本身中，实现代表卡片的 toString 会很有用：像这样：

假设您有一个卡片列表或数组：

```
public void showCards() {
   for (Card card : cards) {
       System.out.println(card);
   }
} 
```

并在卡片中：

```
public class Card {

   private String suit;
   private int rank;

   public String toString() {
       return rank + " of " + suit;
   }

   //...the rest of the code   
} 
```

在 CreateCardDeck 添加一个吸气剂：

```
public CardSTack getCardStack() {
    return cardStack; 
} 
```

然后在你的主要只是添加：

```
c.getCardStack().showCards(); 
```

# javascript - 检测给定页面使用的外部资源和文件大小

> ID：13374597
> 
> 赞同：0
> 
> 时间：2012-11-14T07:26:34.200
> 
> 标签：javascript, html, profiling

使用 JavaScript，我想检测网站正在使用多少 JavaScript、CSS 和图像。最重要的是，我想获取每个资产的文件大小。这可能吗？如果可以，你会怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T08:20:08.723

至于检测网站上使用的外部 javascript、css 和图像的数量，可以通过获取所有脚本、图像和样式标签，然后通过将文档域与资产域进行比较来检查它们是否是*外部的。*

至于使用 javascript 检查外部资源大小，这可能很难。即使您可以尝试使用 ajax 重新获取脚本和 css 文件以获取文件的内容（以估计其大小），但在估计图像大小时会出现问题。我猜可能会使用 html5 文件 api 或画布来了解图像的大小。

# android - Onclick 时出错，java.lang.IllegalStateException：无法执行活动的方法

> ID：13374599
> 
> 赞同：2
> 
> 时间：2012-11-14T07:26:42.197
> 
> 标签：android, onclick, undo-redo

每次单击撤消和重做时都会出错，我不知道为什么会出现此错误

```
java.lang.IllegalStateException: Could not execute method of the activity. 
```

谁能帮我解决这个问题。提前致谢。下面是我的代码及其错误日志

--绘图类

```
public class Draw extends Activity implements {

public static String filex;

private static final int SELECT_PICTURE = 1;

public static String selectedImagePath;
public static Bitmap cBitmap;

public static Integer resize;
public static Integer imageBackgroundEraser;
// Instance variables

public static Paint       mPaint;
private MaskFilter  mEmboss;
private MaskFilter  mBlur;
private MyView      mView;
private int mImageCount = 0;
private int mLastBg = 0;

public static Integer WW;
public static Integer WH;

private float BrushWidth; 
private int  thickness;
private int BrushColor;
public static int backgroundColor; 
float Mx1,My1;
float x,y;

@SuppressWarnings("deprecation")
@Override

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_draw);

    Display display = getWindowManager().getDefaultDisplay(); //***

    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_draw4_fun_main);

    Display display = getWindowManager().getDefaultDisplay(); //***

    WH = display.getHeight();  //***
    WW = display.getWidth();  //***

    final MyView myView = new MyView(this);
    frm_layout=(FrameLayout) findViewById(R.id.main_frame);
    frm_layout.addView(myView);

    setInitialPaint();
    backgroundColor = Color.WHITE;

}

private void setInitialPaint() {
    //bgColor = 0xFFFFFFFF; // default bg color white
    BrushWidth = 3;
    BrushColor = 0xFF000000; //**
    mPaint = new Paint();
    mPaint.setAntiAlias(true);
    mPaint.setDither(true);
    mPaint.setColor(BrushColor);
    mPaint.setStyle(Paint.Style.STROKE);
    mPaint.setStrokeJoin(Paint.Join.ROUND);
    mPaint.setStrokeCap(Paint.Cap.ROUND);
    mPaint.setStrokeWidth(BrushWidth);
    mPaint.setPathEffect(new CornerPathEffect(30) );
    //mEmboss = new EmbossMaskFilter(new float[] { 1, 1, 1 },0.4f, 6, 3.5f);

    //mBlur = new BlurMaskFilter(8, BlurMaskFilter.Blur.NORMAL);
}

public void onClick(View view){
    switch (view.getId()){
    case R.id.undoBtn:  
        mView.onClickUndo();
    break;

    case R.id.redoBtn:
        mView.onClickRedo();
    break;

    case R.id.saveBtn:
        File myDir=new File("/sdcard/Pictures/Draw");
        myDir.mkdirs();
        String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date(System.currentTimeMillis())); //***
        String fname = timeStamp + ".png";
        File file = new File (myDir, fname);
        System.out.println(file+"----> file");
        if (file.exists ()) file.delete ();
        saveAsPng(file);
    break;

    }
}

public void saveAsPng (File f)
{
    String fname = f.getAbsolutePath ();

    FileOutputStream fos = null;
    try {
        fos = new FileOutputStream (f);
        mView.mBitmap.compress (CompressFormat.PNG, 100, fos);  
        sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, Uri.parse("file://"+ Environment.getExternalStorageDirectory())));
        Toast.makeText (getApplicationContext(), "Saved " + fname, Toast.LENGTH_LONG).show ();
    } catch (Throwable ex) {
      Toast.makeText (getApplicationContext(), "Error: " + ex.getMessage (), Toast.LENGTH_LONG).show ();
      ex.printStackTrace ();
    }

} // end saveAsPng

} // end Main 
```

---MyView类

```
public class MyView extends View {

/**
 */
// Constants and variables
    private static final float MINP = 0.25f;
    private static final float MAXP = 0.75f;

    public static Bitmap  mBitmap;
    private Canvas  mCanvas;
    private Path    mPath;
    private Paint   mBitmapPaint;
    private ArrayList<Path> paths = new ArrayList<Path>();
    private ArrayList<Path> undonePaths = new ArrayList<Path>(); 

   // public int backgroundColor;

/**
 */

    public MyView(Context c) 
    {
        super(c);
        /*if (Draw.selectedImagePath == null) {*/
        setFocusable(true);
        setFocusableInTouchMode(true);      
            // Figure out how this works. Seems odd that we set up a canvas and a bitmap. 
            // I don't see how it connects to what shows on screen.    
            mBitmap = Bitmap.createBitmap(Draw4FunMain.WW, Draw4FunMain.WH, Bitmap.Config.ARGB_8888);
            mCanvas = new Canvas(mBitmap);
            mPath = new Path();
            mBitmapPaint = new Paint(Paint.DITHER_FLAG);
            // mCanvas.setBackgroundResource(0xFFFFFFFF);
            if (Draw.imageBackgroundEraser == null) {
                mCanvas.drawColor (Color.WHITE);
            } else {
                mCanvas.drawColor (Color.TRANSPARENT); 
            }
             mCanvas.drawColor(Color.TRANSPARENT);
    }

    public MyView (Context c, int color)
    {
        super(c);
        setFocusable(true);
        setFocusableInTouchMode(true);      
            mBitmap = Bitmap.createBitmap(Draw.WW, Draw.WH, Bitmap.Config.ARGB_8888);
            mCanvas = new Canvas(mBitmap);
            mPath = new Path();
            mBitmapPaint = new Paint(Paint.DITHER_FLAG);
            mCanvas.drawColor (color);

    }

/**
 */
// Methods

/**
 */
@Override protected void onSizeChanged(int w, int h, int oldw, int oldh) 
{
    super.onSizeChanged(w, h, oldw, oldh);
}

/**
 */
@Override protected void onDraw(Canvas canvas) 
{

         // canvas.drawColor(Color.TRANSPARENT);

          canvas.drawBitmap(mBitmap, 0, 0, null);

          for (Path p : paths){
              canvas.drawPath(p, Draw.mPaint);
              //System.out.println("p-->" + p);
             // System.out.println("Draw.mPaint-->" + Draw4FunMain.mPaint);
          }
          canvas.drawPath(mPath, Draw.mPaint);

}

/**
 */
    private float mX, mY;
    private static final float TOUCH_TOLERANCE = 4;

/**
 */
    private void touch_start(float x, float y) {
        mPath.reset(); //-------------------------
        mPath.moveTo(x, y);
        mX = x;
        mY = y;
    }
/**
 */
    private void touch_move(float x, float y) {
        float dx = Math.abs(x - mX);
        float dy = Math.abs(y - mY);
        if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
            mPath.quadTo(mX, mY, (x + mX)/2, (y + mY)/2);
            mX = x;
            mY = y;
        }
    }
/**
 */
    private void touch_up() {
        mPath.lineTo(mX, mY);
        // commit the path to our offscreen
        mCanvas.drawPath(mPath, Draw.mPaint);
        // kill this so we don't double draw
        mPath.reset();

        paths.add(mPath);
        mPath = new Path();
        System.out.println("path-->" + paths);  
        System.out.println("size-->" + paths.size());
    }

/**
 */
    public void onClickUndo () { 
        if (paths.size()>0) 
        { 
           undonePaths.add(paths.remove(paths.size()-1));
           invalidate();
         }
        else
        {

        }
         //toast the user 
    }

    public void onClickRedo (){
        if (undonePaths.size()>0) 
       { 
           paths.add(undonePaths.remove(undonePaths.size()-1)); 
           invalidate();
       } 
       else 
       {

       }
    }

@Override public boolean onTouchEvent(MotionEvent event) {
        float x = event.getX();
        float y = event.getY();

        switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
                touch_start(x, y);
                invalidate();
                break;
            case MotionEvent.ACTION_MOVE:
                touch_move(x, y);
                invalidate();
                break;
            case MotionEvent.ACTION_UP:
                touch_up();
                invalidate();
                break;
        }
        return true;
    }

} // end MyView 
```

错误 - - -

```
11-14 14:55:39.022: E/AndroidRuntime(1728): FATAL EXCEPTION: main
11-14 14:55:39.022: E/AndroidRuntime(1728): java.lang.IllegalStateException: Could not execute method of the activity
11-14 14:55:39.022: E/AndroidRuntime(1728):     at android.view.View$1.onClick(View.java:3591)
11-14 14:55:39.022: E/AndroidRuntime(1728):     at android.view.View.performClick(View.java:4084)
11-14 14:55:39.022: E/AndroidRuntime(1728):     at android.view.View$PerformClick.run(View.java:16966)
11-14 14:55:39.022: E/AndroidRuntime(1728):     at android.os.Handler.handleCallback(Handler.java:615)
11-14 14:55:39.022: E/AndroidRuntime(1728):     at android.os.Handler.dispatchMessage(Handler.java:92)
11-14 14:55:39.022: E/AndroidRuntime(1728):     at android.os.Looper.loop(Looper.java:137)
11-14 14:55:39.022: E/AndroidRuntime(1728):     at android.app.ActivityThread.main(ActivityThread.java:4899)
11-14 14:55:39.022: E/AndroidRuntime(1728):     at java.lang.reflect.Method.invokeNative(Native Method)
11-14 14:55:39.022: E/AndroidRuntime(1728):     at java.lang.reflect.Method.invoke(Method.java:511)
11-14 14:55:39.022: E/AndroidRuntime(1728):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
11-14 14:55:39.022: E/AndroidRuntime(1728):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
11-14 14:55:39.022: E/AndroidRuntime(1728):     at dalvik.system.NativeStart.main(Native Method)
11-14 14:55:39.022: E/AndroidRuntime(1728): Caused by: java.lang.reflect.InvocationTargetException
11-14 14:55:39.022: E/AndroidRuntime(1728):     at java.lang.reflect.Method.invokeNative(Native Method)
11-14 14:55:39.022: E/AndroidRuntime(1728):     at java.lang.reflect.Method.invoke(Method.java:511)
11-14 14:55:39.022: E/AndroidRuntime(1728):     at android.view.View$1.onClick(View.java:3586)
11-14 14:55:39.022: E/AndroidRuntime(1728):     ... 11 more
11-14 14:55:39.022: E/AndroidRuntime(1728): Caused by: java.lang.NullPointerException
11-14 14:55:39.022: E/AndroidRuntime(1728):     at com.draw.Draw4FunMain.onClick(Draw.java:246)
11-14 14:55:39.022: E/AndroidRuntime(1728):     ... 14 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T07:35:25.610

您的 logCat 在代码的第 246 行指出了 NullPointerException。我将假设这是这些行：

```
public void onClick(View view){
    switch (view.getId()){
    case R.id.undoBtn:  
        mView.onClickUndo();
    break;

    case R.id.redoBtn:
        mView.onClickRedo();
    break; 
```

问题是，你没有初始化`mView`. 在 中`onCreate`，您改为初始化一个局部变量`myView`。将该实例分配给`mView`应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T07:48:59.940

是的。我也认为 Paul-Jan 是正确的。以下行

```
final MyView myView = new MyView(this); 
```

在 Draw.java 中的 onCreate 方法应该被纠正。

```
myView = new MyView(this); 
```

# symfony - 使用 Symfony2 防止收音机小部件呈现标签

> ID：13374603
> 
> 赞同：0
> 
> 时间：2012-11-14T07:27:15.943
> 
> 标签：symfony, twig

我有这个表单元素，我想在没有标签的情况下呈现，但我找不到方法......

```
$builder
    ->add('gender', 'choice', array(
        'expanded'   => true,
        'choices'    => array(
            'Male' => 'm',
            'Female' => 'f',
            )
        ))
; 
```

请帮忙，这不起作用：

```
{% block choice_widget %}
    {% spaceless %}
        {% for child in form %}
            <input type="radio" value="{{ child.get('value') }}">
        {% endfor %}
    {% endspaceless %}
{% endblock choice_widget %} 
```

我越来越`Array to string conversion`

我想做的是基于图像的性别选择器，只需单击图像即可进行选择。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T09:25:18.090

使用表单组件时，永远不要自己渲染表单字段，始终依赖[表单文档](http://symfony.com/doc/current/book/forms.html#rendering-each-field-by-hand)`form_`中描述的助手。

在您的情况下，这应该有效：

```
{{ form_label(form.gender) }}
{{ form_errors(form.gender) }}

{% for choiceFormView in form.gender %}
    {{ form_widget(choiceFormView) }}
{% endfor %} 
```

# hibernate - 何时在 Hibernate 中使用 @Version 和 @Audited？

> ID：13374604
> 
> 赞同：37
> 
> 时间：2012-11-14T07:27:19.320
> 
> 标签：hibernate

有人可以帮我解决何时使用`@Version`和`@Audited`在 Hibernate 中的用例吗？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-11-14T07:37:28.540

`@Version`用于通过 Hibernate 实现[乐观锁定](http://docs.jboss.org/hibernate/orm/4.0/devguide/en-US/html/ch05.html)，这意味着没有两个事务同时覆盖数据而发生冲突。
如果两个线程同时读取数据，并且都尝试用不同的值更新同一行，Hibernate 使用该`@Version`字段来检查该行是否已经更新。
在提交之前，每个事务都会验证没有其他事务修改过它的数据。如果修改，最后一个事务会遇到“使用陈旧数据”错误。

`@Audited`用于对Hibernate [Envers](http://docs.jboss.org/envers/docs/index.html)的实体部分执行[审计功能](http://docs.jboss.org/envers/docs/index.html#migration)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-11-14T07:35:03.107

`@Version`- 用于实现乐观锁，见[*2.2.1.2。乐观锁定的版本控制*](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/#entity-mapping-entity)。当您不希望有很多并发写入并且不想为数据库锁定付出代价时，乐观锁定很有用。

`@Audited`- 来自[Envers API](http://docs.jboss.org/envers/docs/index.html)，可用于在单独的审计表中自动跟踪实体的更改。使用 Envers 保留某些实体的更改历史记录。

# sql-server-2008 - SQL Server - rename columns

> ID：13374605
> 
> 赞同：2
> 
> 时间：2012-11-14T07:27:23.313
> 
> 标签：sql-server-2008

I'm trying to rename a few columns within a table that's already created:

```
 USE AdventureWorks
  GO

  EXEC sp_RENAME 'registration.StudentID', 'Temp', 'COLUMN';
  GO 
```

But I'm getting this error message:

> *Either the parameter @objname is ambiguous or the claimed @objtype (COLUMN) is wrong.*

If I omit 'COLUMN', this error appears:

> *No item by the name of 'registration.StudentID' could be found in the current database 'AdventureWorks', given that @itemtype was input as '(null)'.*

I'm pretty sure that the `StudentID` column exists and has data in there. Can anyone help me out? Thanks!!!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T08:03:47.367

根据评论，这就是您所需要的。

```
USE registration;

EXEC sp_rename 'dbo.enrollment.StudentID', 'Temp', 'COLUMN'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T07:31:54.513

the correct call is

```
sp_RENAME 'TableName.[OldColumnName]' , '[NewColumnName]', 'COLUMN' 
```

so I think ur code should be

```
USE AdventureWorks
  GO
  EXEC sp_RENAME '[registration].StudentID', 'Temp', 'COLUMN';

  Go 
```

# iphone - NSArray Empty After Calling reloadData

> ID：13374606
> 
> 赞同：0
> 
> 时间：2012-11-14T07:27:26.580
> 
> 标签：iphone, uitableview, nsarray, automatic-ref-counting

I have a class that gets data from a repository and stuffs it into an NSArray:

**EpisodeRepository Class**

-(NSMutableArray *)getEpisodes {

```
NSMutableArray *episodes = [NSMutableArray array];

NSData *data = [self getDataFromAction:kGetEpisodesAction];
NSError *error = nil;
NSArray *json = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableContainers error:&error];

for (NSDictionary *d in json) {      
    Episode *episode = [self buildEpisodeFromJSONDictionary:d];
    [episodes addObject:episode];
}

return episodes;

} 
```

In my view controller, I keep a reference to the repo and the array of episodes, like so:

```
@interface VideoController : UITableViewController

@property (nonatomic, strong) NSArray *episodes;
@property (nonatomic, strong) EpisodeRepository *episodeRepo; 
```

In the implementation, what I want to happen is that every the view appears, refetch the data from the web services(in the EpisodeRepository) and reload the table view with the updated episodes. This works great the first time the tableview is populated. The problem is that when I call, cellForRowAtIndexPath, the episodes array is completely blank. It's not null, but there is no data whatsoever in it. The weird thing is that all the other tableView delegates realize that there is data in the array and act accordingly. What is special about cellForRowAtIndexPath and why would it possibly delete my entries in the array?

Here is the controller implementation:

```
-(id) initWithCoder:(NSCoder *)aDecoder {

self = [super initWithCoder:aDecoder];

if(self) {
    episodeRepo = [[EpisodeRepository alloc] init];
}

return self;

}

-(void)viewWillAppear:(BOOL)animated
{
    [self loadContent];
    [self.tableView reloadData];
    [super viewWillAppear:animated];
}

-(void) loadContent {    
    self.episodes = [self.episodeRepo getEpisodes];
    self.seasons = [self getSeasons:self.episodes];
    [self setUILoaded];
}

-(UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
  //episodes is an empty array here???
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:08:07.260

我找到了解决方案！事实证明，我的 App Delegate 中有 willSelectViewController 下的代码，用于在视图控制器之外分配数组的选项卡栏。吸取的教训：不要这样做！

# codeigniter - 当我未登录 Pyrocms 时，某些页面链接不起作用

> ID：13374614
> 
> 赞同：0
> 
> 时间：2012-11-14T07:28:14.287
> 
> 标签：codeigniter, redirect, content-management-system, pyrocms

当我登录并浏览从 CP 创建的页面时，我遇到了一个奇怪的问题。但是当我注销并转到同一页面时，它说页面丢失。问题是什么？此外，这只发生在那些我不使用任何标签来显示数据库表中的数据的页面上。它发生在关于使用页面等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T17:18:25.283

我发现了问题。使用访问选项我从默认更改为实时，现在它工作正常。

# php - Yii (with Rights) is logging out users only in some computers

> ID：13374615
> 
> 赞同：1
> 
> 时间：2012-11-14T07:28:17.843
> 
> 标签：php, session, cookies, yii, yii-extensions

I'm making a tutoring for students system in Yii 1.1.12 but I'm stuck in user session management.

I'm with other three guys in this. I'm using Rights for role management.

The problem is that two of the other guys are being logged out if a specific sequence of links is followed, but not me (neither the last guy).

The process is this: We have a login form (the default login form Yii gives you, but with db login) ![Login Form](../Images/fbdb8e6c834de8cba0178ff9edaa94f0.png)

Then the user is presented in a dashboard where he has a menu and in the main info, theres a link (is equal to one in the left menu) to an action.

![Dashboard](../Images/63d5599cd68dfbae15e81250af92d322.png)

If the user clicks on the link (the blue one in the image) in the main part, they go to that action.

![Tutor list](../Images/5f441da2dd979ab7406a71fbf8d6a33e.png)

Here we have a table with registered tutors (in a db table) with a link (it looks like a button but is CSS, the gray ones under the red ones) to an action for assign students to that tutor.

Suddenly, the system logs out the user asking for username and password again

![enter image description here](../Images/afee3894c9954fd443ddd0e45f4bc781.png)

As you can see in the variables values we have Yii::app->user->isGuest() as true when this happens (before this it is false).

The button links are built like this:

```
<td>
  <?php echo CHtml::link('Dar de baja', array('desactivar', 'id'=>$academic->id), array('class'=>'btn btn-mini btn-danger')); ?>
  <?php echo CHtml::link('Expediente', array('view', 'id'=>$academic->id), array('class'=>'btn btn-mini')); ?>
</td> 
```

And also the link in the second image is built that way:

```
<?php echo CHtml::link('Asignación e información de tutores', array('tutor/registered')); ?> 
```

The left menu is a zii.widgets.CMenu and the $menu is built with:

```
array('label'=>'Asignación e información de tutores', 'url'=>array('/tutor/registered')), 
```

The reason I'm explaining this is because this log out error only happens that way. If the user instead of choosing the blue link clicks the left menu item (both links looks the same) they dont get logged out.

**EDIT: The user is logged out also if he clicks the left menu item.**

Also, I don't get this error even if I click on the blue link, I tried in OSX with chrome, safari and firefox and Windows 8 with IE, even in Safari for iOS.

The two guys with that error used Windows with Chrome, Firefox and IE.

I thought it was an error with the action I was linking in the button but I changed it and still got the error.

I was thinking in a session issue or a cookie issue but I don't know what exactly to test, because I tested it in the same Browsers and didn't get the error.

Just to note, I'm using Rights module and we are testing the app in different locations (I can't go where the other two guys are to see if it has something to do with the ISP, but I don't think it is). Any suggestions?

# shell - Shell Scipt to Find and Replace a string pattern

> ID：13374616
> 
> 赞同：2
> 
> 时间：2012-11-14T07:28:24.147
> 
> 标签：shell, scripting

I need a shell script to replace a string pattern in multiple text files.

By pattern I mean like this occurance in multiple files:

```
CSRF=PG0U-8R3L-KLXT-7UWT-TSRS-IFLY-OI9Y-M75C
CSRF=X67S-3QHA-LNT8-D83N-5BS3-2WA4-7BDP-J1NQ
CSRF=TATJ-3QHA-LNT8-D83N-AGHJ-AGJD-7BDP-JGAJ
CSRF=DHJG-8R3L-AFJH-ASGJ-TSRS-ADGJ-OI9Y-AGHJ 
```

So in general its like CSRF=$$$$-$$$$-$$$$-$$$$-$$$$-$$$$-$$$$$-$$$$ where $=any alphanumeric

I already have the sed command to find and replace the old text with the new text. But here i am looking for the string pattern to search and replace.

The command I have is :

```
 oldtext="CSRF=$$$$-$$$$-$$$$-$$$$-$$$$-$$$$-$$$$$-$$$$"
    newtext="CSRF Replaced"    
    find -iname '*.txt' | xargs sed -i "s/$oldtext/$newtext/g" 
```

So my question is... How do I search for this CSRF String pattern???

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T07:31:37.350

I dont really understand what you are saying.Perhaps you are looking for this.

```
find -iname '*.txt' | xargs sed -i "s/^\(CSRF=\)$oldtext/\1 $newtext/g" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T07:35:57.793

```
oldtext="CSRF=([a-zA-Z0-9]{4}-){7}[a-zA-Z0-9]{4}" 
```

然后确保调用`sed -r`（在 Linux 上）或`sed -E`（在 BSD，例如 Mac OS X 上）使用扩展的正则表达式。

# git - git workflow branch / clone / stash / --orphan

> ID：13374624
> 
> 赞同：3
> 
> 时间：2012-11-14T07:29:09.143
> 
> 标签：git, git-branch, git-rebase, git-clone, git-workflow

I've recently dived into Git and maybe I'm over complicating this but I'm trying to figure out the best workflow for the following:

I have created a 'backbone' or 'base' of sorts for themes similar to 'bootstrap' grid based system, responsive etc. I want to keep that base across all themes and have files ontop that I modify from theme to theme. When the time comes to update the base I update across all themes, without affecting the theme files ontop.

eg.
theme.css   <-- Will change from theme to theme
theme.js    <-- Will change from theme to theme
[base]        <-- Files that will be used across all themes

What's the best way to do this with git? Do I have a single master repo and have multiple branches for the different themes that I'll never merge into the master?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:32:19.607

最好在分支中管理这些主题。

当基础更改（在 master 上）时，您可以在 master 上重新设置所有主题分支。
请参阅“ [Git：如何一次重新设置多个分支（具有相同的基本提交）？](https://stackoverflow.com/questions/866218/git-how-to-rebase-many-branches-with-the-same-base-commit-at-once) ”。

# c# - regex for validating time in asp.net

> ID：13374630
> 
> 赞同：1
> 
> 时间：2012-11-14T07:29:46.363
> 
> 标签：c#, asp.net

> **Possible Duplicate:**
> [Regular expression to validate valid time](https://stackoverflow.com/questions/884848/regular-expression-to-validate-valid-time)

i wrote this code for validating time in asp.net *

what are the errors if i use "[0-9]?[0-9]+:[0-9]+[0-9]+:[0-9]+[0-9]+" for hh:mm:ss format.Will it work for all cases?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T07:31:10.403

You may use [TimeSpan.TryParse](http://msdn.microsoft.com/en-us/library/dd987680.aspx) rather than regex to parse a string and see if you get `true` or `false`

```
TimeSpan tempTimeSpan;
if (TimeSpan.TryParse("12:22:33", out tempTimeSpan))
{
    //valid time
}
else
{
    //Invalid time
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T07:56:47.183

下面的正则表达式代码片段可能有助于验证日期和时间。这也照顾闰年。

```
^(?=\d)(?:(?:31(?!.(?:0?[2469]|11))|(?:30|29)(?!.0?2)|29(? =.0?2.(?:(?:(?:1[6-9]|[2-9]\d)?(?:0[48]|[2468][048]|[13579][ 26])|(?:(?:16|[2468][048]|[3579][26])00)))(?:\x20|$))|(?:2[0-8]| 1\d|0?[1-9]))([-./])(?:1[012]|0?[1-9])\1(?:1[6-9]|[2 -9]\d)?\d\d(?:(?=\x20\d)\x20|$))?(((0?[1-9]|1[012])(:[0- 5]\d){0,2}(\x20[AP]M))|([01]\d|2[0-3])(:[0-5]\d){1,2}) ?$
```

# python - Python。姜戈。持久的 socket.io 连接

> ID：13374632
> 
> 赞同：0
> 
> 时间：2012-11-14T07:29:55.493
> 
> 标签：python, django, socket.io

有没有办法从 django 后端连接到 socket.io 服务器并保持连接，就像 js 客户端一样？

像这样的代码：

```
from socketIO_client import SocketIO
from django.conf import settings

def trigger_socket():
   socket_client = SocketIO(settings.SIO_HOST, settings.SIO_PORT)
   socket_client.emit('cool_task', {}) 
```

工作正常，但在每个任务发出时都会打开连接。有什么办法可以避免吗？或者我错过了关于套接字的一些东西？

**UPD FYI**实际上，使用 socket.io 在服务器之间进行通信 - 是愚蠢的想法。将 tornadorpc / xmlrpclib 用于此类任务 - 仅将 socket.io 留在 js 客户端。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T08:36:02.727

简短的：

按照你描述的方式是不可能的。如果您想使用 django 连接到 socket.io 之类的东西，请查看[gevent.io](http://gevent-socketio.readthedocs.org/en/latest/)

详细的：

与传统的 Web 服务器一起部署时，由于进程/线程模型，Django 不适合处理长时间的连接任务。为了处理长时间的连接，你需要采用一些事件驱动的Web服务器，例如[gunicorn][2]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-20T10:36:52.183

有可能：

```
from socketIO_client import SocketIO
from django.conf import settings

def trigger_socket():
    with SocketIO(settings.SIO_HOST, settings.SIO_PORT) as socketIO:
        socketIO.emit('cool_task', {})
        socketIO.wait(seconds=0) 
```

# php - PHP display error on another page

> ID：13374634
> 
> 赞同：0
> 
> 时间：2012-11-14T07:30:00.880
> 
> 标签：php, error-handling

I'm having issues to send an occuring error to another page. I have already created the page the error will be sent to, and I've tried a header function. But that doesn't seem to work. Here is the php code that I am using for the page.

```
<?php

if(isset($_POST['username'], $_POST['password'])){

    //login the user here
     $connect = mysql_connect("","","")or die(mysql_error());
     mysql_select_db("")or die(mysql_error());

    $errors = array();

    $username = strip_tags(mysql_real_escape_string($_POST['username']));
    $password = strip_tags(mysql_real_escape_string($_POST['password']));

    if (empty($Regi_Username) || empty($Regi_password)) {
        $errors[] = 'All fields are requerid';

    } else {

    if (strlen($Regi_Username) > 25) {
        $errors[] = 'Username is to long';

    }

    if (strlen($password) > 25) {
        $errors[] = 'Password is to long';
    }
}

         $password = md5($_POST['password']);

         $loginquery = "SELECT * FROM regi WHERE username='$username' and password='$password'" or die(mysql_error());
         $result = mysql_query($loginquery);
         $count = mysql_num_rows($result);

         mysql_close();
         if($count==1){
            $seconds = 2000 + time();
            setcookie(loggedin, date("F jS - g:i a"), $seconds);
            header("location:member.php");
        } else {
           echo 'Wrong username and password please try agian.';
      }
     }
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T07:32:40.967

在您的 URL 中传递 GET 变量，例如..

```
header('Location:page.php?err=1');
exit; 
```

在另一页上使用这个

```
if(isset($_GET['err'] && $_GET['err'] == 1) {
   echo 'Error Occured';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T08:33:32.540

这是一种[基于会话的](http://php.net/manual/en/function.session-start.php)方法。这是将消息从一个页面传递到另一个页面的最佳方式，因为它们存储在用户的会话中（与每个用户相关的一段数据并存储在服务器端）而不是浏览器中（如 cookie 或 URL GET 参数，这很容易被破坏），因此操纵来自第 3 方的消息确实非常困难。

页面`process.php`：

```
<?php
// Very top of your page
session_start();
$_SESSION['errors'] = array();
// Do stuff now...
// ...
// Hey it's a X error!
$_SESSION['errors']['X'] = 'Message for X error';
// Continue doing stuff...
// ...
// OMG! It's a Y error now!
$_SESSION['errors']['Y'] = 'Message for Y error';
// Keep doing stuff till you're done...
// All right, process is finished. Any Errors?
if (count($_SESSION['errors']) > 0) {
    // It seems there's been any errors
    // time to redirect to error-displaying page
    header('Location: error-page.php');
    exit;
} 
```

页面`error-page.php`：

```
<?php
// Very top of your page
session_start();
// Let's check if there is any error stored in the session.
// In the case no errors found, it is better to redirect to another page...
// ...why anybody would end in this page if no errors were thrown?
if (!isset($_SESSION['errors']) || !is_array($_SESSION['errors']) || empty($_SESSION['errors'])) {
    header('Location: home.php');
    exit;
}
// If we reach this point it means there's at least an error
foreach ($_SESSION['errors'] as $errorCode => $errorMessage) {
    // Here we can display the errors...
    echo '<p>Error ', $errorCode, ': ', $errorMessage, '</p>', PHP_EOL;
}
// You can also do stuff only if a certain error is received
if (array_key_exists('X', $_SESSION['errors'])) {
    // Error `X` was thrown
    echo '<p>Oh no! It seems you suffered a X error!!</p>', PHP_EOL;
    echo '<a href="home.php">Click here to go back home.</a>', PHP_EOL;
}
// At the end you should to remove errors from the session
$_SESSION['errors'] = array();
// or
unset($_SESSION['errors']); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T08:23:41.470

你可以使用 Alien 的方法，但最好使用 Session：

```
// Assume you init the session already; Use json_encode since you use array for $errors
$_SESSION['errors_msg'] = json_encode($errors);
header("location:member.php");
// Remember to exit here after we call header-redirect
exit; 
```

此外，您当前的代码存在很多问题：

1.  使用盐对密码进行哈希处理
2.  在 mysql 上使用 mysqli
3.  过滤输入，转义输出
4.  ..阅读本主题中的其他建议..
5.  请阅读[http://www.phptherightway.com/](http://www.phptherightway.com/)。PHP 有很多正确的推荐（当然不是全部）。

# ios - What is the best practice to control multiple views?

> ID：13374635
> 
> 赞同：2
> 
> 时间：2012-11-14T07:30:02.423
> 
> 标签：ios, uiviewcontroller, storyboard

I have this view in the storyboard: ![view consist of fixed controls and controls that changes according to the type of controller](../Images/c9ba3529fd52c7337c9e7bc01b02472a.png)

as you can see there are some fixed controls, and others that change according to the type of screen. What do you think is better?

1- Same view controller for multiple screens. (more code to control views)

2- Add all controls in the same screen, then hiding and showing them by code? (messy code)

3- View controller for each screen. (replicated code)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T07:36:19.713

不要使用“窗口”这个词，这会导致对你想说的内容有不同的解释。使用“屏幕”或“屏幕部分”一词。在这种情况下，我会使用`UIViewControllers`. 要在此之间进行通信，请使用`KVO`或`NSNotificationCenter`（很可能是第二个）。还要确保没有直接将数据源放在`UIViewController`（如数组或字典）上。将数据源保存在其他所有`UIViewController`s（或任何类）都可以轻松访问的地方。你可以选择单身人士。

将数据源放在一边，而不是直接放在 上`UIViewController`，可以为您的代码提供更大的灵活性。如果您需要使用新的`UIViewController`，没有任何改变，他仍然可以从同一点请求资源。所以记住这一点。

* * *

**编辑 1**

> 数据源也在视图控制器内部，屏幕之间没有交互，是同一个屏幕，但是一些控件根据它的类型而变化，你觉得我现在该怎么办？

这种方法的问题是，如果您出于某种原因需要添加一个新`UIViewController`的，也使用相同的数据源，那么您现在该怎么办？我总是尝试尽可能地`UIViewController`从数据源中解耦。否则，如果应用程序发生变化（客户需求发生变化），您将来可能会遇到问题。同样，将数据源移动到适当的类，并使用单例访问它。

```
UIViewController <=> Singleton <=> Data Source 
```

> 所以现在你建议用多个屏幕制作多个视图控制器？

我建议 a`UIViewController`作为其他人的容器`UIViewControllers`。对我来说，边走边写屏幕比在一个地方做所有事情更有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T08:01:37.297

我肯定不会选择 3。这种方法最灵活！它很干净 => 好维护

# ios - Record audio over a live video

> ID：13374636
> 
> 赞同：2
> 
> 时间：2012-11-14T07:30:03.097
> 
> 标签：ios, ipad, audio-recording

I have a video file and I want to suppress the audio of the video file while playing and record my own audio through my iPad application. Can anyone suggest me the ways to achieve it?

# .net - 从 DataTable 或 XML 中查找特定项目

> ID：13374644
> 
> 赞同：0
> 
> 时间：2012-11-14T07:30:44.433
> 
> 标签：.net, xml, csv, datatable, c++-cli

嗨，我遇到了问题，我需要从 DataTable 中获取文本。我将 csv 文件读取到数据表中，现在想知道如何访问特定行 Ma Datatable 包含各种文本的翻译，并具有不同语言的列，例如

英语、德语、意大利语、法语、...

我需要得到的是英文文本的翻译。

我尝试了以下没有结果：

（csv 文件有一些重复，所以我删除了它们。）

```
printf("reading csv file...\n");
DataTable^ table = GetDataTable( L"LangTexts.csv", '|' );
DataSet^ data = gcnew DataSet("LANGS");
printf("removing duplicate rows...\n");
RemoveDuplicateRows( table, L"English" );
table->TableName = "LanguageText";
table->Namespace = "Nmspce";
printf("saving as XML\n");
data->WriteXml( "LangTexte.xml" );

table->PrimaryKey = gcnew array<DataColumn^> {table->Columns["English"]}; 
```

//不起作用，它说列不是唯一的（Zusätzliche Informationen：Diese Spalten haben momentan keine eindeutigen Werte。）

之后，我有一个看起来像这样的 xml 文件：

```
<?xml version="1.0" standalone="yes"?>
<Nmspce>
  <LanguageText xmlns="Nmspce">
    <English>Back</English>
    <Deutsch>Zurück</Deutsch>
    <Français>Retour</Français>
    <Svenska>Tillbaka</Svenska>
    <Português>voltar</Português>
    <Español>Volver</Español>
    <Slovensko>Nazaj</Slovensko>
    <Polski>Powrot</Polski>
    <Suomi>Takaisin</Suomi>
    <Nederlands />
    <Česky>Zpět</Česky>
    <Italiano>Indietro</Italiano>
    <Română>Înapoi</Română>
  </LanguageText>
.... 
```

我现在如何获取特定英语文本的德语文本？

我试过这个没有运气：

这不起作用，编译器不知道“来自”：

```
String ^strToGet = "Torque";
    String^ sDeutsch = ( From DataRow dr in table->Rows where safe_cast<String^>( table["English"] ) 
                          == strToGet select ( String^ )table["German"] )->FirstOrDefault(); 
```

这不起作用，filteredrows 数组为空：

```
array<DataRow^>^ filteredRows = table->Select( String::Format( "'{0}' like '%{1}%'", "English", strToGet) );
     String^ res;
     if(filteredRows != nullptr && filteredRows->Length > 0)
       res = cli::safe_cast<String^>(filteredRows[0]["Deutsch"]);
     else
       res= strToGet; 
```

这抱怨该表没有主键：

```
DataRow^ r = table->Rows->Find(strToGet);
if(r != nullptr)
{
   String^ sDe = cli::safe_cast<String^>(r["Deutsch"]);
} 
```

我该怎么做才能解决问题？或者你有更好的方法来处理来自 csv 文件的翻译列表吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T11:37:52.210

好的，很长一段时间后，我在这里想起了我自己的问题。只是为了向任何偶然发现此案的人提供反馈。

这一切都结束了：

**唯一**可行的是拥有一个**绝对没有重复**的列表。所以上面的代码有效，但源csv文件不能有所需“主键”列的重复条目。 之后使用 "RemoveDuplicateRows(table, L"English" );"**删除重复条目** **没有效果**。该索引之前已损坏。

我编写了一个不同的工具（exe），在将其导入到此代码之前，我从 csv 文件中删除了重复的行。这样做之后，一切都是文件。

# javascript - 谷歌地图按钮不显示

> ID：13374649
> 
> 赞同：-1
> 
> 时间：2012-11-14T07:31:23.053
> 
> 标签：javascript, google-maps, google-maps-api-3

我有谷歌地图的问题。当我第一次将 iframe 嵌入到 ipad 上的页面时，我在地图下看到了类似街景的按钮。当我将地图切换为从系统数据生成时，使用 javascript api 按钮进行渲染时消失了？

有没有办法再次显示它们，它只是需要添加到地图的选项还是按钮仅在使用 iframe 时才有效？

```
 var map;
               var service;
               var infowindow;

               function initializeMap() {
                   var slocation = new google.maps.LatLng(x,y);

                   map = new google.maps.Map(document.getElementById('map'), {
                       mapTypeId: google.maps.MapTypeId.ROADMAP,
                       center: slocation,
                       zoom: 15

                   });

                var infowindow = new google.maps.InfoWindow({
                    content: 'example content'
                });

                var marker = new google.maps.Marker({
                    position: slocation, 
                    map: map,
                    title: ' example title'
                });

                infowindow.open(map, marker);
               } 
```

我想要实现的按钮是[http://imageshack.us/photo/my-images/43/buttonsuv.png/](http://imageshack.us/photo/my-images/43/buttonsuv.png/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T08:14:12.203

在您的代码中，添加此选项`streetViewControl: true`

```
map = new google.maps.Map(document.getElementById('map'), {
       mapTypeId: google.maps.MapTypeId.ROADMAP,
       center: slocation,
       zoom: 15,
       streetViewControl: true
}); 
```

看看[这个](https://developers.google.com/maps/documentation/javascript/streetview)，它总结了所有的街景选项。

**更新**

问题更新后，我意识到您希望在街景图标上使用您的自定义图像。那是不可能的。

一种解决方法是在地图上定义一个自定义控件，并将事件与街景事件链接到它。我从来没有做过，但是你可能想看看[这个](https://developers.google.com/maps/documentation/javascript/controls#CustomControls)

# android - android检测触摸

> ID：13374654
> 
> 赞同：2
> 
> 时间：2012-11-14T07:31:53.560
> 
> 标签：android, touch

我正在做一个简单的游戏。当用户触摸屏幕时，增加一些变量。虽然没有，但什么也不做。我正在使用surfaceView onTouchEvent，但它不起作用，因为它只被调用一次。我怎样才能完成这样的功能？

```
@Override
public boolean onTouchEvent(MotionEvent event) {
    vehicle.vel_y -=0.2f;
    return super.onTouchEvent(event);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T08:13:05.780

阅读有关传递给[onTouchEvent](http://developer.android.com/reference/android/view/MotionEvent.html)方法的 MotionEvent 的信息。具体来说，看`ACTION_DOWN`和`ACTION_UP`。当指针触摸屏幕和离开屏幕时，您应该会收到运动事件。

除此之外，有趣的部分是弄清楚如何记录`ACTION_DOWN`和`ACTION_UP`事件之间的进展（=

如果您需要提示，您可以从查看以下内容开始：

> [使用处理程序重复事件](https://stackoverflow.com/questions/4284224/android-hold-button-to-repeat-action)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T07:49:10.397

在您的 XML 布局文件中，您应该将 SurfaceView 的 longClickable 属性设置为 true

```
android:longClickable="true" 
```

# magento - cannot view old ogone orders after new version installation

> ID：13374656
> 
> 赞同：1
> 
> 时间：2012-11-14T07:31:54.037
> 
> 标签：magento, magento-1.5

I recently upgraded a magento store from 1.3.2.4 to 1.5.0.1\. The 1.3.2.4 store used ogone as its payments handler. Once I upgraded magento to 1.5.0.1 I had to reinstall ogone but the previous version of ogone used Magento Connect 1.0 and the 1.5.0.1 need Magento Connect 2.0.

So, I had to install the new ogone module (that is compatible with 1.5.0.1 version of magento). The module installed successfully and I am able to process payments but the old orders are not viewable (through customer account and also admin) panel as I get an error Cannot retrieve payment method instance".

Please let me know how I can view the old orders in the system

Regards,

# scala - Scala 集合的 `map` 方法的类型推断 (2.10.0-RC2)

> ID：13374658
> 
> 赞同：0
> 
> 时间：2012-11-14T07:32:15.647
> 
> 标签：scala, type-inference

`p`当我这样做时，编译器告诉我“缺少参数类型” ：

```
case class MapResult(input: Any, output: Map[_ <: Any, Any]) {
  override def toString = output.map(p => input + " " + p._1 + " " + p._2 ).mkString("\n")
} 
```

然后它告诉我

```
identifier expected but string literal found.
[error]   override def toString = output.map(p: (Any, Any) => input + " " + p._1 + " " + p._2 ).mkString("\n")
                                                                      ^ 
```

对于以下内容：

```
case class MapResult(input: Any, output: Map[_ <: Any, Any]) {
      override def toString = output.map(p: (Any, Any) => input + " " + p._1 + " " + p._2 ).mkString("\n")
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T08:07:26.353

一旦在函数字面量中指定类型参数类型，就需要使用花括号而不是括号：

```
case class MapResult(input: Any, output: Map[_ <: Any, Any]) {
  override def toString = output.map{p: (Any, Any) => input + " " + p._1 + " " + p._2 }.mkString("\n")
} 
```

更新：您还可以将参数列表括在括号中，即使没有大括号，解析器也会感到高兴：

```
case class MapResult(input: Any, output: Map[_ <: Any, Any]) {
  override def toString = output.map( (p: (Any, Any)) => input + " " + p._1 + " " + p._2 ).mkString("\n")
} 
```

在这里您还可以使用模式匹配：

```
case class MapResult(input: Any, output: Map[_ <: Any, Any]) {
  override def toString = output.map{ case (k: Any, v: Any) => input + " " + k + " " + v }.mkString("\n")
} 
```

至于编译器为什么强制你在这里指定参数类型，老实说我也不知道。我无法在 scala 2.10-RC1 中重现它。

# winapi - 如何区分自动完成和文本输入

> ID：13374659
> 
> 赞同：0
> 
> 时间：2012-11-14T07:32:18.460
> 
> 标签：winapi, autocomplete

全部，是否可以区分在自动完成列表中选择字符串或仅通过键盘键入字符串？

谢谢你。

# sharepoint-2007 - 在已连接的 webpart（使用 sharepoint 2007）中，默认情况下应选择选项按钮

> ID：13374664
> 
> 赞同：0
> 
> 时间：2012-11-14T07:32:57.550
> 
> 标签：sharepoint-2007

我有一个连接到另一个的 Web 部件（提供一行）。它显示单选按钮，当正确单击该按钮时，该按钮将数据提供给第二个 Web 部件。

我可以默认选择此单选按钮，以便在页面加载后自动提供过滤器数据吗？

如果您发现任何与此相关的 jquery/javascript，请分享它，这将对我更有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T07:38:25.033

当您单击 jQuery 中的单选按钮时，也应该引发该事件：

```
$(document).ready(function() {

      $("input:radio[value='your-value-goes-here']").click();

}); 
```

如果您在页面上多次使用该值，请务必小心！如果可能，请使用 id 处理单选按钮：

```
$("#Your-Radio-Button-Id").click(); 
```

# json - ActionScript 3.0 中的 JSON 成员顺序

> ID：13374674
> 
> 赞同：1
> 
> 时间：2012-11-14T07:34:52.603
> 
> 标签：json, flash, actionscript, stringify

我正在使用内置功能在 Flash 应用程序中创建 JSON 字符串。

这里是我的源代码示例

```
objStr = JSON.stringify( 
        {
            version:"1.0",
            skin:"white",
            palette:{dataColor:"#0397d6",negativeDataColor:"#d40000",toolbarColor:"#056393"}
        }); 
```

我有个问题。每次我启动我的应用程序（不执行 createJSON 函数）时，结果我在 JSON 字符串中都有不同的成员顺序。例如：

```
{"version":"1.0","palette":{"negativeDataColor":"#d40000","dataColor":"#0397d6","toolbarColor":"#056393"},"skin":"white"} 
```

或者

```
{"palette":{"negativeDataColor":"#d40000","toolbarColor":"#056393","dataColor":"#0397d6"},"version":"1.0","skin":"white"} 
```

我该如何解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T10:39:26.943

JSON 对象是无序的，请参阅[JSON.org](http://json.org/)：

> JSON 建立在两种结构之上：
> 
> 1.  名称/值对的集合。在各种语言中，这被实现为对象、记录、结构、字典、哈希表、键控列表或关联数组。对象是一组**无序**的名称/值对
> 2.  值的有序列表。在大多数语言中，这被实现为数组、向量、列表或序列。数组是值的**有序**集合。

顺序真的无关紧要，因为您应该通过键检索值而不是迭代它们。

# asp-classic - 经典 ASP getPathName 和 getName 错误

> ID：13374677
> 
> 赞同：0
> 
> 时间：2012-11-14T07:34:56.033
> 
> 标签：asp-classic

我通常使用 PHP 开发网站。但是现在我必须使用 ASP Classic，因为我的客户已经有一个网站，然后我必须维护该网站。我已经将所有网站移至我的新主机。但是这段代码有错误：

`cPath=getPathName(Server.mappath(Request.ServerVariables("PATH_INFO")))`

错误信息是：

> Microsoft VBScript 运行时错误“800a000d”
> 
> 类型不匹配：'getPathName'

调用`getName`代码时显示一些错误。

请帮助我该怎么办。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T08:18:52.543

据我所知，经典的 ASP 或 VBScript 没有与 PHP`getPathName()`和函数等效的功能。`getName()`

我无法理解`getPathName()`给定字符串时的含义，实际上我认为它不存在，所以只需：

```
cPath = Server.MapPath(Request.ServerVariables("PATH_INFO")) 
```

该变量将包含当前正在执行的 ASP 文件的完整物理路径。

至于`getName()`你可以编写自定义函数：

```
Function GetOnlyName(filePath)
    Dim slashIndex
    slashIndex = InStrRev(filePath, "\")
    If slashIndex<1 Then
        slashIndex = InStrRev(filePath, "/")
    End If
    If slashIndex>0 Then
        ExtractFileName = Mid(filePath, slashIndex + 1, Len(filePath) - slashIndex + 1)
    Else  
        ExtractFileName = filePath
    End If
End Function 
```

然后像这样使用它：

```
cName = GetOnlyName(Server.MapPath(Request.ServerVariables("PATH_INFO"))) 
```

并且该变量将只包含 ASP 文件的名称。

作为记录，为了避免混淆类型不匹配错误，请**始终**将其放在脚本之上：

```
Option Explicit 
```

然后总是使用`Dim`语句声明所有变量，就像上面的函数一样。有了这个，尝试使用`getPathName`会给出更有意义的“变量未定义”错误。

# c# - EF 迁移中的自定义代码执行

> ID：13374681
> 
> 赞同：8
> 
> 时间：2012-11-14T07:35:31.240
> 
> 标签：c#, .net, entity-framework, ef-code-first, migration

在我们的项目中成功使用实体框架迁移。但是现在我遇到了一个特殊情况，我需要更新需要一些业务逻辑的表（作为 C# 代码位于我们的应用程序中）。因此，我尝试在迁移`Up`方法中生成一个线程，并使用业务逻辑进行此表更新。应用程序执行不需要此表更新，应在后台进行。

我这样做有点像这样：

```
public partial class MyMigration : DbMigration
{
  public override void Up()
  {
     // ... do some sql migration here ...

     // after executing the sql migrations custommethod should run
     // migration seems to wait until CustomMethod finished work
     new Thread(() => ExecuteCustomMethodDatabaseContext()).Start();
  }
} 
```

我希望该`Up`方法在启动线程后返回，并且 EF 将 MigrationHistory 中的迁移设置为完成。因此，应用程序可以启动，并且在后台某处更新表格。

但并非如此，迁移似乎在线程运行时运行（这需要很多时间）。

所以我的相应问题：

1.  在 DBmigrations 中执行自定义代码通常是一种好习惯吗？
2.  如果没有，在我的情况下，如何实现自定义代码执行的需要？（无需重写存储过程中的业务逻辑或在某种程度上）
3.  如果是，我做错了什么？如何在迁移中执行此代码而不阻塞它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T17:10:48.280

DbMigration 上的 Up 和 Down 方法只是建立了一个内存模型，该模型稍后会被转换为 SQL。执行自定义逻辑有两种选择：

1.  通过使用 Sql 方法，使用 T-SQL 在数据库服务器上执行您的逻辑。
2.  在迁移配置类（通常是 Migrations\Configuration.cs）的 Seed 方法中执行逻辑。在更新数据库期间应用了所有迁移后，将调用此方法

# python - Python删除行之间的输入/空格

> ID：13374682
> 
> 赞同：1
> 
> 时间：2012-11-14T07:35:37.237
> 
> 标签：python, space, enter

好的，所以我已经阅读了很多建议如何消除额外空间的帖子，但无论出于何种原因，我似乎无法将这些建议应用于我的系统，所以我在这里寻求您的帮助。

这些是我的代码的最后几行：

```
 for line in rline[start+5 : end] :
        words = line.split()
        word1 = int(words[1])
        print >>opennew, "%s%s" % (word1,line[30:]) 
```

新的“opennew”文件如下所示：

```
 1        0.876153    0.152889   -0.047464

    2        1.011880   -1.161641   -2.096289

    3        0.883419    1.558736    1.966913

    4        2.010367   -1.140725    1.053368 
```

虽然我真正想要的是：

```
 1        0.876153    0.152889   -0.047464
    2        1.011880   -1.161641   -2.096289
    3        0.883419    1.558736    1.966913
    4        2.010367   -1.140725    1.053368 
```

无论如何，我是否在代码中添加了一些东西来从我的输入中删除额外的（不需要的）输入/空间？

非常感谢您的帮助。

PS：（请不要问我为什么要拆分代码中的行，这是有目的的，将来会有应用程序（更好的）代码）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T07:38:40.690

尝试剥离换行符`line`：

```
line = line.rstrip("\n") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T07:42:50.273

您可以使用从每行删除尾随空格`line = line.rstrip()`或更改`print`语句以省略其自己的尾随换行符：

```
print >>opennew, "%s%s" % (word1,line[30:]),
#                                          ^ 
```

但是，由于`print`语句的复杂语法，最好使用`rstrip()`...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T07:44:54.047

正如@ThiefMaster 或@squiguy 建议的那样，但另一种方法是：

```
import sys
sys.stdout.write('%s%s' % (word1, line[30:])) 
```

虽然我可能会去`.rstrip`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T00:21:56.943

感谢大家的建议，根据 ThiefMaster 的回答，我发现我可以通过添加“-1”来消除行中的最后一个空格，而不是消除 Python 自己的换行符，这样问题就解决了

```
 print >>opennew, "%s%s" % (word1,line[30:-1]) 
```

我之前尝试过的另一种方法是

```
 opennew.write (str(word1) + (line[30:]) + "") 
```

最后的附加引号是消除额外（不需要的）输入/空间的引号。它对我有用，但老实说我不知道​​为什么，你知道那些额外的引号是做什么的吗？

谢谢

# css - 任何导致宽度问题的滑块

> ID：13374684
> 
> 赞同：0
> 
> 时间：2012-11-14T07:35:57.877
> 
> 标签：css, anythingslider

在我将anythingslider 放入我的网页之后，在我尝试调整幻灯片的宽度以匹配页面之后，页面最终是这样的 - > [http://i.imgur.com/5AlHR.png](http://i.imgur.com/5AlHR.png) 我试过弄乱使用任何滑块 CSS 和我自己的，但我不太确定我能做什么。有任何想法吗？

HTML：

```
 <div id = "bodyContent-container">
    <div id = "bodyContent">
         <div id = "bands-container">
                <div id = "bands">            
                    <img src="images/slide.jpg" width="960" height="300"/>
                    <img src="images/slide-2.jpg" width="960" height="300" />
                    <img src="images/slide-3.jpg" width="960" height="300"/>
                </div>
         </div>
     </div> 
</div> 
```

CSS：

```
div#bodyContent-container { 
        width:100%;
        height: 100%;
        min-height:1200px;
        background:#f3f3f3;
        margin: 0 auto;
        padding: 0;
  }
 div#bodyContent {
        width:960px;
        height:100%;
        min-height:1200px;
        margin: 0 auto;
         padding: 0;
        -webkit-box-shadow: 6px 0px 10px -7px #888, -6px 0px 10px -7px #888;
        -moz-box-shadow: 6px 0px 10px -7px #888, -6px 0px 10px -7px #888; /* Firefox 3.6 and earlier */
        box-shadow: 6px 0px 10px -7px #888, -6px 0px 10px -7px #888;
     padding-top: 250px;
   }
   div#bands-container {
         width: 960px;
         height:300px;
         margin: 0 auto;    
         padding: 0;
   }
   div#bands {
         width: 960px;
         height: 300px;
         margin: 0 auto;
         padding-right: 30px;   
   } 
```

网站页面：[http](http://andrewgu12.kodingen.com/graphicDesign) ://andrewgu12.kodingen.com/graphicDesign 谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T08:10:50.783

您在这里编辑最多：Minimalist Round 主题

原件：

```
/******************
  SET STYLING HERE
 ******************
 =================================
 Default state (no keyboard focus)
 ==================================*/
/* Overall Wrapper */
.anythingSlider-minimalist-round {
    margin: 0 auto;
    /* 30px right & left padding for the navigation arrows */
    padding: 0 30px;
} 
```

到 ：

```
/******************
  SET STYLING HERE
 ******************
 =================================
 Default state (no keyboard focus)
 ==================================*/
/* Overall Wrapper */
.anythingSlider-minimalist-round {
    margin: 0 auto;
    /* 30px right & left padding for the navigation arrows */
    padding: 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T08:02:41.163

... 现在

删除到您的**填充** `left`或`right` `padding:0 30px;`

**替换** `30px`成`0`

**样式表** `theme-minimalist-round.css` **行号：25**

**像这样做**

```
.anythingSlider-minimalist-round {
    margin: 0 auto;
    padding: 0 ;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T08:09:14.183

只需删除anythingSlider-minimalist-round 类的填充属性

# git - 如何将 E..H 提交移动到单独的存储库中？

> ID：13374686
> 
> 赞同：1
> 
> 时间：2012-11-14T07:36:13.207
> 
> 标签：git, dvcs

说，我有`Repo1`如下

```
special ->                      E ... F ... G ... H
                               /
master  ->  A ... B ... C ... D ... X ... Y ... Z 
```

我该如何`Repo2`开始`master`？`E`那是因为`Repo2`我以前根本不关心历史`E`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T09:22:54.690

如果您要保留的历史记录包含合并，最简单的方法可能是使用嫁接来临时切断不需要的历史记录，然后 filter-branch 创建一个具有该历史视图作为永久视图的分支。

```
cd /path/to/repo
git checkout -b newbranch special
git rev-parse E > .git/info/grafts
git filter-branch
rm .git/info/grafts 
```

这假设您目前没有任何移植物。由于移植物很少使用，无论如何在新的克隆中这样做可能是一个好主意，这应该不是问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T08:18:31.173

```
git checkout --orphan newbranch E
git commit -c E
git cherry-pick F..H
git init --bare /path/to/new/repo
git push /path/to/new/repo HEAD:master 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T07:52:48.540

简单明了的方法：检查 E 并制作工作目录的副本，但请确保不要携带 .git 目录。现在从那里初始化一个新的 git repo 并将其他提交移过来。`git format-patch`并且`git apply`是你的朋友。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T07:53:28.617

虽然[`git filter-branch`](http://git-scm.com/docs/git-filter-branch)可能涉及，[但本文](http://blog.briang.org/?p=217)给出了一个带有补丁的原始解决方案：

> 创建一堆补丁，如下所示：

```
git checkout find-ls
git format-patch 9758db3 # where find-ls branched 
```

> 如果你需要让你的新仓库有不同的结构，你可能需要破解补丁。我刚用过：

```
perl -pi -E 's|LEADING-DIR/||g' *.patch 
```

> 然后你可以应用补丁：

```
mv 0*.patch where/I/want/my/new/repo
cd where/I/want/my/new/repo
git am *.patch 
```

# objective-c - 请求 ASIHTTPRequest 或 AFNetworking 时在队列中添加操作

> ID：13374689
> 
> 赞同：6
> 
> 时间：2012-11-14T07:36:53.253
> 
> 标签：objective-c, ios, asihttprequest, afnetworking

我想在执行请求中添加操作。我阅读了有关 ASINetworkQueue 的信息，但它添加了所有操作并全部运行。但我想将操作添加到运行队列中。

这可能吗？使用 ASIHTTPRequest 或 AFNetworking 我不介意，只要我得到我打算做的事情。

# 编辑

当我尝试添加另一个请求时，它显示以下错误。

> [ASINetworkQueue addOperation:]：操作正在执行，无法入队'

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-04T07:45:33.227

从[苹果文档](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/NSOperationQueue_class/Reference/Reference.html#//apple_ref/occ/instm/NSOperationQueue/addOperation:)中`addOperation:`可以清楚地看出，您不能将正在执行的操作添加到`NSOperationQueue`.

这是那里提到的，

*一个操作对象一次最多只能在一个操作队列中，如果该操作已经在另一个队列中，则此方法会抛出 NSInvalidArgumentException 异常。同样，**如果操作当前正在执行或已经完成执行，则此方法会引发 NSInvalidArgumentException 异常。***

这是 的默认行为`NSOperationQueue`。您需要确保`NSOperation`在添加到队列之前没有执行。有各种属性，例如`isExecuting`,`isFinished`等等.. 来检查这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T07:59:55.773

您只需调用`addOperation`请求队列。对于`asi`它`ASiNetworkQueue`来说，它是否正在运行并不重要。

# java - 在 java (android) 中使用 XSD 模式读取 XML

> ID：13374693
> 
> 赞同：1
> 
> 时间：2012-11-14T07:37:04.533
> 
> 标签：java, android, xml, parsing, xsd

我从一个包含 XSD 模式定义的网络服务器接收到一个 XML 字符串，看起来像这样：

```
...
<xs:sequence>
   <xs:element name="" .../>
   <xs:element name="" .../>
   ...
</xs:sequence>

... 
```

属性名称在模式定义下方的字符串的 xml 部分中定义数据集的标签，如下所示：

```
...
<DataSet id="DataSet1">
   <name1>value</name1>
   <name2>value</name2>
   ...
</DataSet>
<DataSet id="DataSet2">
   <name1>value</name1>
   <name2>value</name2>
   ...
</DataSet>
... 
```

有人可以给我一个建议如何解析这个。

PS：定义名称的元素数量是可变的，并且每次都可能不同，因此这些标签不是静态的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T08:36:14.250

我想您不仅想解析它，还想在解析后对其进行处理（不幸的是，这种对“解析”一词的滥用正在变得普遍）。假设文件作为一个整体是格式良好的 XML（您没有说过），解析应该是微不足道的。处理完全取决于您要对数据执行的操作。例如，某些类型的处理可能需要模式信息，而其他类型可能不需要。

# parallel-processing - Pthread 程序总是运行得比平时慢

> ID：13374695
> 
> 赞同：0
> 
> 时间：2012-11-14T07:37:07.327
> 
> 标签：parallel-processing, pthreads

我使用命令在 Ubuntu 12.04 中构建

`g++ -pthread hello.cpp`

但我运行并行模式总是比正常慢。这是我的代码

```
#include <iostream>
#include <pthread.h>
#include <math.h>

using namespace std;

#define NUM_THREADS 4   
#define MAX_NUMBER 10000000

void *doSomething(void *param)
{
    int id = (int) param;
    int sum = 0;
    for (int i = 0; i < MAX_NUMBER; i++)
    {
        sum += sin(i) + cos(i) + tan(i);      // sum
    }
    return NULL;
}

void runNormal()
{
            // run in normal mode with NUM_THREADS times.
    for (int i = 0; i < NUM_THREADS; i++)
    {
        doSomething((void *) i);
    }
}

void runParallel()
{
    pthread_t threads[NUM_THREADS];
    pthread_attr_t attr;
    pthread_attr_init(&attr);
    pthread_attr_setdetachstate(&attr, PTHREAD_CREATE_JOINABLE);

    int rc, i;
    for (i = 0; i < NUM_THREADS; i++)
    {
        rc = pthread_create(&threads[i], &attr, doSomething, (void *) i);
        if (rc)
        {
            cout << "ERROR : can't create thread #" << i;
        }
    }

    pthread_attr_destroy(&attr);
    void *status;
    for (i = 0; i < NUM_THREADS; i++)
    {
        pthread_join(threads[i], &status);
    }
}

int main()
{
    int type;
    cout << "Choose type of run (1 - normal, 2 - parallel) : ";
    cin >> type;
    clock_t init, final;
    init = clock();
    if (type == 1)
    {
        runNormal();
    }
    else if (type == 2)
    {
        runParallel();
    }
    else
    {
        cout << "Your choice is wrong.";
    }
    final = clock();
    double duration = (double) (final - init) / CLOCKS_PER_SEC;
    cout << "Duration : " << duration << " seconds." << endl;

    pthread_exit(NULL);
    return 0;
} 
```

我用 4 个线程运行，因为我的膝盖有 4 个核心。我在系统监视器中看到，我意识到我的膝盖在并行模式下同时使用了 4 个核心，而在正常模式下只有 1 个核心，但正常模式的持续时间更短。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T08:00:27.530

请参阅答案[https://stackoverflow.com/a/2962914/1689451](https://stackoverflow.com/a/2962914/1689451)以了解`clock`多线程应用程序中的工作原理。

试试这样：

```
 struct timespec start, finish;
    double elapsed;
    clock_gettime(CLOCK_MONOTONIC, &start);
    if (type == 1)
    {
        runNormal();
    }
    else if (type == 2)
    {
        runParallel();
    }
    else
    {
        cout << "Your choice is wrong.";
    }
    clock_gettime(CLOCK_MONOTONIC, &finish);

    elapsed = (finish.tv_sec - start.tv_sec);
    elapsed += (finish.tv_nsec - start.tv_nsec) / 1000000000.0;
    cout << " Duration : " << elapsed << " seconds." << endl; 
```

为了完整起见，我这样构建它（文件名 par.cpp）：

```
make CXXFLAGS="-pthread -O3 -lrt" LDLIBS=-lrt -B par && ./par 
```

# macos - WebView 在 Mac OS 中加载缓慢

> ID：13374696
> 
> 赞同：3
> 
> 时间：2012-11-14T07:37:11.597
> 
> 标签：macos, email, webview, webkit

我在 Mac OS 上为 Mail.app 创建了插件。我正在使用 WebView 显示网页，一切都很好，但网页加载缓慢。

然后我创建了测试可可应用程序来比较加载时间。当测试应用程序加载页面的速度快了约 5 倍时，我感到很惊讶。

在开发人员栏中，我看到我的测试应用程序收到[304 代码](http://www.checkupdown.com/status/E304.html)，表明“请求的 URL 的资源没有更改，可以使用缓存的资源”。与测试应用程序相比，插件总是接收 200 个 http 代码并再次加载资源。

也许我应该指定在 webview 中使用缓存，或者我有一些捆绑权限问题。

在插件中，我尝试这样`SharedURLCache`指定

```
NSURLCache *cache = [[NSURLCache alloc] initWithMemoryCapacity:1024*1024*20
                                                  diskCapacity:1024*1024*5
                                                      diskPath:NSHomeDirectory()];

[NSURLCache setSharedURLCache:cache]; 
```

然后我尝试订阅`ResourceLoadDelegate`WebView 并像这样更改请求对象

```
- (NSURLRequest *)webView:(WebView *)sender resource:(id)identifier willSendRequest:(NSURLRequest *)request redirectResponse:(NSURLResponse *)redirectResponse fromDataSource:(WebDataSource *)dataSource
{
    if ([request cachePolicy] != NSURLRequestReturnCacheDataElseLoad)
    {
        return [NSURLRequest requestWithURL:[request URL]
                                cachePolicy:NSURLRequestReturnCacheDataElseLoad
                            timeoutInterval:[request timeoutInterval]];
    } else {
        return request;
    }

} 
```

我也尝试更改 WebView 上的属性

```
[[webView preferences] setUsesPageCache:YES];
[[webView preferences] setCacheModel:WebCacheModelPrimaryWebBrowser]; 
```

但这一切都不起作用。

感谢帮助。

# extjs - ExtJS 数字格式。小数点后3位

> ID：13374697
> 
> 赞同：4
> 
> 时间：2012-11-14T07:37:15.423
> 
> 标签：extjs

使用 ExtJS4.1，我将浮点数作为 JSON 响应。如何将浮点值格式化为小数点后 3 位。在下面找到示例。请帮忙。

```
enter code here

Example:

{ 
header: 'Total', 
sortable: true, 
dataIndex: 'total', 
field: { xtype: 'numberfield' }, 
renderer: this.onRenderCell 
}

onRenderCell : function(value, metaData, record, rowIndex,colIndex, store, view){
   Ext.util.Format.numberRenderer(value,'0.000');
   return value;            
}
------------------------------------------------------------------------ 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-14T07:44:56.343

您可以使用该[`number(v, format)`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.util.Format-method-number)功能，例如：

```
Ext.util.Format.number(1.23456, '0.000'); 
```

女巫会回来：

> “1.235”

（[`numberRenderer`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.util.Format-method-numberRenderer)你试过的女巫返回一个函数）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-22T12:51:20.370

此功能在版本 4.2.0.663 中完全错误...

当你做类似的事情时

```
Ext.util.Format.number("1.23456", '0,000') 
```

`1`相反，这`1,234`显然是错误的...

这是一个测试用例。如果我错了，请随时纠正我。 [http://jsfiddle.net/gT9jj/1/](http://jsfiddle.net/gT9jj/1/)

# android - 使用当前存在的元素填充 android 列表

> ID：13374701
> 
> 赞同：2
> 
> 时间：2012-11-14T07:37:31.760
> 
> 标签：android, listview

在我的应用程序中，我必须在列表视图中列出已安装的应用程序。应用程序在后台线程中获取已安装的应用程序。要求是即使未完成获取也希望填充列表。也就是说，如果 arraylist 中有一个条目，则显示带有该项目的 arraylist。这可能吗？请帮助我。在此先感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T08:27:52.563

首先，这只有在您使用循环在后台处理应用程序数据时才有可能。一篇大纲：

保存 App 信息的类：

```
Class AppData {
  public final Drawable icon;
  public final String   name;

  public AppData(Drawable i, String n){
     this.icon = i;
     this.name = n;
  }    
} 
```

AsynckTask 搜索应用程序：

```
AsyncTask<Void,AppData,Void> scanAppsTask = new AsyncTask<Void,AppData,Void>{

  @Override
  public Void doInBackground(Void... args){

     //--get list---
     List<ApplicationInfo> apps = mPm.getInstalledApplications(
            PackageManager.GET_UNINSTALLED_PACKAGES |
            PackageManager.GET_DISABLED_COMPONENTS);

     //--run a loop--
     for(ApplicationInfo appInfo : apps){

       AppData newFound;

       //---find app details, load app icon etc---

       publishProgress(newFound);

     }

     //---done---
     return null;
  }

  @Override
  public void onProgressUpdate(AppData... data){
    //---update list for every app found----
    myListAdapter.add(data[0]);
    myListAdapter.notifyDataSetChanged();
  }
}

scanAppsTask.execute(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T07:57:56.667

您可以动态地向/从适配器添加/删除项目`ListView`，所以是的，一旦有新项目可用，您就可以从后台线程中一个一个地填充项目列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T07:49:58.153

我正在开发一个类似的应用程序，我需要获取所有已安装的应用程序，甚至是内置应用程序。我用下面的代码做到了这一点，

```
TextView data;
    ImageView image1;
    LinearLayout holdlayout;
    View l1;
    private ArrayList results = new ArrayList();
    List<ResolveInfo> list;
    TextView result;
    String str="";
    Drawable icon;
      @Override
      public void onCreate(Bundle savedInstanceState) 
      {
          super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
            l1 = findViewById(R.id.Layout1);
        PackageManager pm = this.getPackageManager();
        Intent intent = new Intent(Intent.ACTION_MAIN, null);
        intent.addCategory(Intent.CATEGORY_LAUNCHER);
        list = pm.queryIntentActivities(intent, PackageManager.PERMISSION_GRANTED);
        for (ResolveInfo rInfo : list)
        {
            str = rInfo.activityInfo.applicationInfo.loadLabel(pm).toString() + "\n";
           results.add(rInfo.activityInfo.applicationInfo.loadLabel(pm).toString());
           Log.w("Installed Applications", rInfo.activityInfo.applicationInfo.loadLabel(pm).toString());
           icon =  rInfo.activityInfo.applicationInfo.loadIcon(pm);
           holdlayout = new LinearLayout(getApplicationContext());
            holdlayout.setOrientation(LinearLayout.HORIZONTAL);
            data = new TextView(getApplicationContext());
            data.setText(str);
            image1 = new ImageView(getApplicationContext());
            image1.setBackgroundDrawable(icon);
            ((ViewGroup) holdlayout).addView(image1);
            ((ViewGroup) holdlayout).addView(data);
            ((ViewGroup) l1).addView(holdlayout);

        }
      } 
```

如果您对此代码有任何问题，请告诉我。

# silverlight - 错误：Silverlight 应用程序代码中未处理的错误：1001

> ID：13374702
> 
> 赞同：3
> 
> 时间：2012-11-14T07:37:37.730
> 
> 标签：silverlight

请在 silverlight 中查看以下 xaml

```
<Grid>
        <ContentControl>
            <ContentControl.RenderTransform>
                <ScaleTransform ScaleX="50" ScaleY="50" />
            </ContentControl.RenderTransform>
            <Grid Height="400" Width="600">
              **//Here I have so many objects placed.**
            </Grid>
        </ContentControl>
</Grid> 
```

这里我用过`ScaleTransform ScaleX="50" ScaleY="50"`。对于 ScaleX 和 ScaleY 的较大值，应用程序给出以下错误。谁能告诉我为什么在 Silverlight 中会发生这种情况以及如何摆脱这种情况？

> 错误：Silverlight 应用程序代码中的未处理错误：1001
> 类别：RuntimeError
> 消息：AG_E_UNKNOWN_ERROR 方法名
> ：

# mysql - 从第二张表计算购买

> ID：13374705
> 
> 赞同：0
> 
> 时间：2012-11-14T07:38:01.423
> 
> 标签：mysql, sql

我想我只是没有看到所有树木中的森林......

a) 两个表：

*   用户（ID、用户名、...）
*   购买（ID、UserID、ItemID、....）

b）我想要一个查询，显示每个用户进行了多少购买..

c）这个查询：

```
SELECT user.*, COUNT(purchases.userid) AS Purchases  
FROM user, purchases  
WHERE user.id=purchases.user_id 
```

只给我一个结果......如果用户没有购买，如何获得 0？

非常感谢提前

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T07:46:48.657

```
SELECT u.ID, 
       u.UserName, 
       (SELECT COUNT(1) FROM Purchases p WHERE u.Id=p.User_Id) AS Purchases
FROM User u 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T07:42:29.517

像这样尝试：-

```
SELECT user.UserName, ISNULL(COUNT(purchases.userid),0) 
    AS Purchases1 FROM user AS user LEFT JOIN purchases AS purchases
    ON user.id=purchases.user_id
    Group by UserName 
```

# jquery - JQGrid 填充了空白行

> ID：13374715
> 
> 赞同：0
> 
> 时间：2012-11-14T07:38:40.333
> 
> 标签：jquery, jqgrid

我使用以下配置创建了网格

```
$.ajax({
        type: "POST",
        url: "populateAllRulesJson.action",
        data: "",
        dataType: "json",   
        success: function(result)
        {
             alert("SUCCESS ::: " + JSON.stringify(result.jSONResponseObject));
             data = JSON.stringify(result.jSONResponseObject);
             jQuery("#rulesTable").jqGrid({
                    url:"populateAllRulesJson.action",
                    datatype: "jsonstring", 
                    height: 'auto', 
                    width: 'auto', 
                    colNames:['Rule ID','Description', 'Geograph', 'Process', 'Rules Classification', 'Types', 'UDAC'], 
                    colModel:[ {name:'ruleID',index:'ruleID', width:65, sorttype:'int'}, 
                               {name:'description',index:'description', width:150}, 
                               {name:'geograph',index:'geograph', width:100},
                               {name:'process',index:'process', width:100},            
                               {name:'rulesClassification',index:'rulesClassification', width:100},
                               {name:'types',index:'types', width:100},
                               {name:'udac',index:'udac', width:100}
                             ], 
                    datastr : data,
                    jsonReader: { repeatitems: false },
                    rowNum:10, 
                    rowList : [10,20,30], 
                    loadonce:true, 
                    mtype: "GET", 
                    rownumbers: true, 
                    rownumWidth: 10, 
                    gridview: true, 
                    pager: '#rulesDivPager', 
                    sortname: 'ruleID', 
                    viewrecords: true, 
                    sortorder: "asc", 
                    caption: "Searching Rules ..."

                });
        },
        error: function(x, e)
        {
            alert(x.readyState + " "+ x.status +" "+ e.msg);
        }

}); 
```

我将以下 JSON 对象发送到网格。但是网格中填充了四个空白行。

```
{
"total":2,
"page":1,
"records":7,
"rows":[{"id":"1","cell":"{\"ruleID\":\"43\",\"description\":\"Images, text and voice over should synchronize as best as possible.\",\"geograph\":\"Yell US\",\"process\":\"Photomotion\",\"rulesClassification\":\"Image\",\"types\":\"New\",\"udac\":\"NPM\"}"},
{"id":"2","cell":"{\"ruleID\":\"48\",\"description\":\" For profile pages UDAC Mismatch in a Control sheet can be ignored.\",\"geograph\":\"Yell US\",\"process\":\"Profile Pages\",\"rulesClassification\":\"Copysheet\",\"types\":\"New\",\"udac\":\"NGP\"}"},
{"id":"3","cell":"{\"ruleID\":\"51\",\"description\":\" Ignore all requests for logo sized artwork in NSP ads.\",\"geograph\":\"Yell US\",\"process\":\"Profile Pages\",\"rulesClassification\":\"Logo\",\"types\":\"New\",\"udac\":\"NSP\"}"},
{"id":"4","cell":"{\"ruleID\":\"47\",\"description\":\" Irregular borders are not allowed in banner ads..\",\"geograph\":\"Yell US\",\"process\":\"Profile Pages\",\"rulesClassification\":\"Border\",\"types\":\"New\",\"udac\":\"MRB\"}"}
]} 
```

我在这个网格配置中犯了什么错误。请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T07:47:50.037

我认为您的主要错误是使用`cell`as *string*。你有

```
{"id":"1","cell":"{\"ruleID\":\"43\", ...}"}, 
```

代替

```
{"id":"1","cell":{"ruleID":"43", ...}}, 
```

第二个问题是您使用了一些非常奇怪的输入数据格式。一般来说，您可以使用`jsonReader`选项指定输入数据的格式。如果您不使用任何`jsonReader`默认值，将使用默认值（请参阅[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:retrieving_data#json_data)）。所以`cell`属性的值必须是项目**数组**：

```
{"id":"1","cell":["43", ...., "New","NPM"]}, 
```

您可以减少发送`"id"`（尤其是不相等的*虚拟值*）和在每行数据中`ruleID`发送固定文本的需要。`"cell"`在这种情况下，您可以`jsonReader: {cell: "", id: 0}`将数据指定为数组：

```
["43", ...., "New","NPM"] 
```

用法`id: 0`意味着数组的第一个元素指定唯一的 rowid。

或者，您可以`jsonReader: {repeatitems: false, id: "ruleID"}`将项目作为具有命名属性的对象使用和发送：

```
{"ruleID":"43", ....,"types":"New","udac":"NPM"} 
```

所以你有很多选择，但你当前的 JSON 数据格式肯定是错误的，你必须改变它。

此外，我认为你应该更好地使用`datatype: "json"`而不是`datatype: "jsonstring"`. 如果你确实使用`datatype: "jsonstring"`，你可以使用`datastr : result.jSONResponseObject`. `datastr`不能是 JSON 字符串。可能是对象。

最后一点：我建议你使用`loadError`回调。有关更多详细信息，请参阅[答案](https://stackoverflow.com/a/6969114/315935)。

# magento - 如何根据购物车页面上的常规价格计算总价和小计价？

> ID：13374718
> 
> 赞同：2
> 
> 时间：2012-11-14T07:38:54.903
> 
> 标签：magento, magento-1.7

我想修改 Magento 购物车页面上总计和小计的原始计算。我需要根据常规价格计算它们（没有适用于该价格的促销规则）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:41:31.033

终于找到了，它位于

**app/code/core/Mage/Sales/Model/Quote/Address/Total/Subtotal.php**在第 115 行

通过替换完成

*   $finalPrice = $product->getFinalPrice($quoteItem->getQty());

有了这个

*   $finalPrice = $product->getPrice($quoteItem->getQty());

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T10:38:30.087

使用`$_product->getPrice()`而不是`$_product->getFinalPrice()`.

您可以在以下位置找到更多信息：

*   `Mage_Catalog_Block_Product`
*   `Mage_Catalog_Model_Product`
*   `Mage_Catalog_Model_Product_Type_Price`

# javascript - 为什么这个 onMouseOut 事件不会在 Firefox 中触发？

> ID：13374723
> 
> 赞同：2
> 
> 时间：2012-11-14T07:39:20.640
> 
> 标签：javascript, html, css

我以前见过这个问题，但到目前为止还没有找到具体的答案。我有一个`onmouseout`事件几乎适用于除 Firefox 之外的所有东西。它甚至没有出现在 Firebug 中，这根本没有意义。

以下是有问题的代码行：

```
<div id="MarketBox3" class="MarketBox" style="top: 205px;">
<div id="TimeBox3Cont" class="TimeBox"><h3 ifirefoxd="TimeBox3" style="color: white; text-     shadow: 0px 0px 5px #000; letter-spacing: 1px; font-size: 12px;"></h3></div>
<div id="TimeBar3" class="TimeBar" style="left: 300px; width: 300px;" onmouseover="CheckOpen(3)" onmouseout="document.getElementById('intext3').innerText = 'bla bla'">
<div id="MarketName3" class="MarketName">
<div id="inbox3" style="position: absolute; top: -2px; height: 30px; width: 300px;">
<h3 id="intext3" style="color: white; text-shadow: 0px 0px 2px #000; letter-spacing: 1px; font-size: 16px;">Frankfurt - Germany</h3>
</div>
</div>
</div>
</div> 
```

任何人都可以对发生的事情有所了解吗？它实际上在除 Firefox 之外的所有应用中都可以正常工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T07:42:46.863

这工作得很好：

```
<div id="MarketBox3" class="MarketBox" style="top: 205px;">
<div id="TimeBox3Cont" class="TimeBox"><h3 id="TimeBox3" style="color: white; text-     shadow: 0px 0px 5px #000; letter-spacing: 1px; font-size: 12px;"></h3></div>
<div id="TimeBar3" class="TimeBar" style="left: 300px; width: 300px;" onmouseover="document.getElementById('intext3').innerText = '111'" onmouseout="document.getElementById('intext3').innerText = 'bla bla'">
<div id="MarketName3" class="MarketName">
<div id="inbox3" style="position: absolute; top: -2px; height: 30px; width: 300px;">
<h3 id="intext3" style="color: white; text-shadow: 0px 0px 2px #000; letter-spacing: 1px; font-size: 16px;">Frankfurt - Germany</h3>
</div>
</div>
</div>
</div> 
```

[JS Fiddle 上的演示](http://jsfiddle.net/WrT8D/4/)。

**您的CheckOpen()**函数可能有问题，

尝试

```
onmouseover="alert(1)"

onmouseout="alert(2)" 
```

代替

```
onmouseover="CheckOpen(3)" 
```

### 另一个建议

似乎[Firefox 对待**innerText**的方式与其他浏览器不同](https://stackoverflow.com/questions/1359469/innertext-works-in-ie-but-not-in-firefox)。

使用 javascript 库将消除此问题，因为它会自动处理浏览器行为的差异。

我尝试使用 jQuery，它工作正常。

```
<div id="MarketBox3" class="MarketBox" style="top: 205px;">
<div id="TimeBox3Cont" class="TimeBox"><h3 id="TimeBox3" style="color: white; text-     shadow: 0px 0px 5px #000; letter-spacing: 1px; font-size: 12px;"></h3></div>
<div id="TimeBar3" class="TimeBar" style="left: 300px; width: 300px;" onmouseover="javasript:function f(){ $('#intext3').text('bla bla');} f(); " onmouseout="javasript:function g(){ $('#intext3').text('1111');} g(); ">
<div id="MarketName3" class="MarketName">
<div id="inbox3" style="position: absolute; top: -2px; height: 30px; width: 300px;">
<h3 id="intext3" style="color: white; text-shadow: 0px 0px 2px #000; letter-spacing: 1px; font-size: 16px;">Frankfurt - Germany</h3>
</div>
</div>
</div>
</div> 
```

[JS Fiddle 上的演示](http://jsfiddle.net/WrT8D/28/)。

# integration-testing - Jacoco-IntegrationTests 代码覆盖率

> ID：13374725
> 
> 赞同：4
> 
> 时间：2012-11-14T07:39:42.457
> 
> 标签：integration-testing, code-coverage, emma, jacoco

我无法克服这个问题——我有 3 个 AB 和 C 类。

A 是一个集成测试类，它同时测试 B 类和 C 类。

B 和 C 是另一个包中的类（wrt 类 A）

现在，当我运行集成测试类 A 时，我希望代码覆盖率显示 B 和 C 的哪些部分被覆盖。我没有得到所需的输出。

我得到的输出是没有检测类。

所以这两个类没有测试覆盖率......如果我在 src/main/java 中与 A 所在的相同模块中编写示例代码......它会识别该类并对其进行检测。

为什么它不能对其包之外的类做同样的事情。

请帮助。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T09:09:39.060

这可能是由许多问题引起的：

**1.根据jacoco代理没有触发类**

您需要检查您的 B 类和 C 类是否已被 jacoco 代理触发。这可以通过生成 jacoco 报告并单击会话链接（右上角）来完成。

如果此处未列出您的 B 类或 C 类，则表示您的 jacoco 代理存在问题，并且它没有连接到触发 B / C 类的正确 JVM，或者没有触发 B / C 类中的代码.

**2\. 根据 jacoco 代理触发的类，但没有可用的源/类文件**

如果这里列出了你的 B 类或 C 类，但无法点击，则表示你的 B/C 类被 jacoco 代理触发并检测到，但无法链接。

请记住，在生成报告期间，jacoco 需要有可用的类文件和源文件才能生成报告。（如果您使用的是 maven，它需要 project.build.outputDirectory 中的类文件和 project.build.sourceDirectory 中的源代码

**3.根据jacoco代理触发的类，但可用的类文件错误**

如果您的 B 类或 C 类部署在应用服务器上，则应用服务器可能还会在部署期间检测这些类的字节码，从而造成本地项目中的类文件与由应用程序检测到的类文件不同的情况jacoco 代理（有关该主题的讨论，请参阅此主题：[https](https://groups.google.com/forum/?fromgroups=#!topic/jacoco/GjSlBoFTRrc) ://groups.google.com/forum/?fromgroups=#!topic/jacoco/GjSlBoFTRrc ）。在这种情况下，Jacoco 提供了一个 classdumpdir 参数，可以将其设置为一个文件夹，jacoco 将在其中转储它在测试运行期间检测到的类。您需要在报告生成期间使用这些类。

参考

*   [http://www.eclemma.org/jacoco/trunk/doc/agent.html](http://www.eclemma.org/jacoco/trunk/doc/agent.html)
*   [https://groups.google.com/forum/?fromgroups=#!topic/jacoco/GjSlBoFTRrc](https://groups.google.com/forum/?fromgroups=#!topic/jacoco/GjSlBoFTRrc)

# java - Java：从 HashMap 中读取可以改变它的状态吗？

> ID：13374726
> 
> 赞同：3
> 
> 时间：2012-11-14T07:39:46.677
> 
> 标签：java, hashmap, hashtable, state, livelock

对非同步的并发更新[`HashMap`](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)显然会导致活锁或其他数据损坏；为避免这种情况，应使用并发版本或实施同步机制。

[对HashMap.get()](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html#get%28java.lang.Object%29)的并发调用可以改变 HashMap 的状态，比如重新散列吗？

**更新：**

一些评论者想知道这个问题的实际方面，除了吹毛求疵的数据结构行为的理论乐趣。

如果`get()`不改变状态`HashMap`（并且不能因为另一个原因导致活锁），那么单个线程可以提前创建一个HashMap，然后多个线程可以同时读取它。如果并发读取不安全，我们需要`ConcurrentHashMap`对每个多线程访问，无论类型如何。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T07:48:04.007

来自[java 文档](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)：

> 如果多个线程同时访问一个哈希图，并且**至少有一个线程在结构上修改了该图**，则必须在外部进行同步。（结构修改是添加或删除一个或多个映射的任何操作；仅更改与实例已包含的键关联的值不是结构修改。）

这意味着并发`get()`很好，不会导致状态变化。

此外，您始终可以查看[源代码](http://www.docjar.com/html/api/java/util/HashMap.java.html)以获取有关其构建方式的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T07:45:24.907

Javadocs 通常定义什么是地图的结构修改。HashMap 声明这`get`不是会导致结构修改的操作。

但是，其他地图实现的行为不同。例如，[LinkedHashMap](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashMap.html)可以使用访问顺序，在这种情况下`get`是结构修改：

> 在按访问顺序链接的哈希映射中，仅使用 get 查询映射是一种结构修改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T07:45:44.070

如果你知道里面发生了什么`HashMap.get()`（这是`Map`接口的具体实现），你可以阅读实现的代码。

但是出于所有目的，您不应该关心该功能是如何实现的以及它的作用！唯一重要的是函数自己实现它的契约（API + 类/函数 javadocs）。未来的实现可能会发生变化，因此依赖它是不好的做法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T07:51:28.427

正如你所说，只有打电话`get()`肯定不会造成任何问题。但是，并发的非同步更新肯定会导致这种情况。在`get()`方法中，它只会在找到匹配项之前调用`hashcode()`成员的方法。在这种情况下不会进行更新。

# c++ - KDevelop - C++：如何开始跟踪一个简单的 main.cpp？

> ID：13374730
> 
> 赞同：0
> 
> 时间：2012-11-14T07:40:34.473
> 
> 标签：c++, kdevelop, debug-mode

我似乎无法在调试模式下运行简单的 hello world 应用程序。当我按下调试按钮时，应用程序会正常执行并结束，即使我在打印“hello world”的行上放置了一个断点。我还浏览了这个菜单：“运行 > 配置启动...”并选择了可执行文件。我还需要做什么才能进入调试模式吗？KDevelop 版本为 4.7.4 操作系统：Linux Mint

我还注意到 Run 菜单中的所有跟踪命令都被禁用（Step Over，Step Into，...）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T08:01:44.753

使用调试符号构建您的应用程序。

例如，如果您使用 cmake 添加`-DCMAKE_BUILD_TYPE=Debug`到您的 cmake 调用。（或者如果您在那里创建构建文件夹，则在 KDevelop 中选择它）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T09:42:02.353

这听起来像我遇到的问题。我已将尝试调试的 exe 的名称放在`debugger executable`我`debug`的`launch configuration`. 但是，此字段适用于调试器程序本身，例如`/usr/bin/gdb`.

# uitableview - TableViewController 中的 UISearchBar - 主/详细应用程序 Ipad

> ID：13374738
> 
> 赞同：1
> 
> 时间：2012-11-14T07:41:29.427
> 
> 标签：uitableview, xcode4.3, uisearchbar, master-detail

我正在使用主/详细应用程序，我想在主视图顶部添加一个搜索栏。
现在，在这类应用程序中众所周知，主视图实际上是一个 TableViewController，所以如果我在顶部添加一个搜索栏，并且在滚动时，搜索栏将自动消失。由于它不是 viewController 中的常规表格视图，因此我不能简单地将搜索栏从 tableViewController 中分离出来。我尝试了很多方法来尝试找到解决方案，但都没有奏效。
简而言之，我怎样才能在主/详细应用程序中将搜索栏固定在 tableViewController 的顶部。
任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:27:45.113

这种情况下的解决方案是......在创建视图并将 tableView 和搜索栏放入 MasterViewController.h 之后，我应该调用 UIViewController，而不是调用 UIViewController...以这种方式没有更多的崩溃，一切都会变得很好。希望它对将来的人有所帮助。

# solr - Solr - 复杂查询

> ID：13374739
> 
> 赞同：0
> 
> 时间：2012-11-14T07:41:31.553
> 
> 标签：solr

在我的应用程序中，我有几个搜索，如用户搜索、讨论搜索、博客搜索等。现在我还需要一个“全局搜索”，它应该会导致所有类型的搜索。我的问题是任何类型的搜索都有几个限制。

用户搜索：

```
 q=userLastName:*searchString*^9 userFirstName:*searchString*^10&fq=documentType:4 AND marketId:(281807 1950) 
```

讨论搜索：

```
q=userLastNameLowerBoost:*searchString*^6 userFirstNameLowerBoost:*searchString*^5 title:*searchString*&fq=(documentType:2 AND boardType:2 AND country:3028) OR (documentType:2 AND boardType:1) 
```

如何将这些查询合并到一个查询中？那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T08:43:59.297

我的查询示例只是查询的片段。如果我提供更多细节，那将超出讨论的范围。每个查询（用户、讨论、博客、..）都有几个字段和一些相等的字段。所有查询都有一个“fq”查询，这是问题所在。我通过 documentType (1=blog, 2=discussion,..) 进行限制，而且我必须根据不同的市场进行限制。

如果我合并两个查询，我会丢失结果。

例如

```
user search result = 60 results
     discussion search results = 10 results
     merge search results = 68 result
     --> 2 lost 
```

fq 查询：

```
(documentType:4 AND marketId:(1956 1960 ..and so on..)) OR (documentType:3 AND marketId:(1956 ..and so son..)) 
```

# android - 尝试打开压缩的 xml 文件时出现 FileNotFoundException

> ID：13374743
> 
> 赞同：0
> 
> 时间：2012-11-14T07:41:41.150
> 
> 标签：android, xml, gzip, filenotfoundexception

所以，我正在尝试这个教程：http: [//xjaphx.wordpress.com/2011/12/24/android-xml-adventure-parsing-xml-using-xpath/](http://xjaphx.wordpress.com/2011/12/24/android-xml-adventure-parsing-xml-using-xpath/) 它工作得很好。我试图将代码更改为适用于 gzip 压缩文件：

```
InputStream is = getResources().openRawResource(R.raw.data);
GZIPInputStream gz = new GZIPInputStream(is);
InputSource inputSrc = new InputSource(gz); 
```

但第一行抛出“java.io.FileNotFoundException：res/raw/data.xml.gz”。我还尝试清理项目并将文件放入资产文件夹并使用资产管理器打开它，但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T08:14:46.443

摆脱文件的扩展名。将其重命名为类似的`data_xml_gz`名称并像这样引用：

```
InputStream is = getResources().openRawResource(R.raw.data_xml_gz); 
```

# .net - .NET 程序中的分布式事务（MS-DTC 配置？！？）还是通过链接服务器在存储过程中？

> ID：13374744
> 
> 赞同：3
> 
> 时间：2012-11-14T07:41:43.037
> 
> 标签：.net, sql-server-2008, linked-server, msdtc, distributed-transactions

我们在不同的数据库服务器（MS SQL Server 2008）上有两个数据库。

我们需要在两张表中插入数据，两台数据库服务器各一张，而且都需要在一个事务中，所以我们需要一个分布式事务。

我们从 .NET 程序中插入数据，我认为这里有两个选择：

在 .NET 中使用 TransactionScope 类来启动分布式事务。这在测试环境中的我的开发机器上工作，但只有在我设置 DTC 以允许与网络通信之后。但是，.NET 应用程序最终将在客户端计算机上运行，​​并且他们可能没有在其操作系统上相应地设置 DTC。他们是“普通”用户，他们的机器上没有管理员。

所以我的第一个问题是：即使没有设置 DTC，我是否可以在计算机上使用 .NET 中的 TransactionScope 类 - 他们是否可以通过我的 .NET 程序以编程方式解决这个问题？

如果 .NET 方式不是一个选项，那么使用通过链接服务器构建分布式事务的存储过程是一个好主意吗？

谢谢大家的回复！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T08:14:58.587

我的建议是*不要*依赖客户端机器上的 DTC。DTC 在受控环境中非常有用，即在服务器上，这与 .NET 完全无关（如果您正在使用本机 COM/ADO，那将是真的）。尽管它在技术上可以工作，但很难在最终用户机器上以可靠的方式进行设置，而且您不希望将服务器事务性能与客户端机器/设置的行为紧密联系起来。

我建议您使用“面向服务”的方法，就像您建议的那样，创建一个外观存储过程，对客户端隐藏分布式工作。换句话说，为服务器到服务器的通信保留 DTC。

# awk - Gawk 和 systime()

> ID：13374745
> 
> 赞同：2
> 
> 时间：2012-11-14T07:41:44.153
> 
> 标签：awk

此命令计算秒数：

```
$ awk 'BEGIN{ "date -d \"12:50:57\" +%s" | getline; print }' 
1352893857 
```

如何对“strftime”和“systime()”做同样的事情？：

```
$ gawk 'BEGIN{print strftime("12:50:57", systime())}' 
12:50:57 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T08:08:46.210

你不能。该`strftime()`函数将仅格式化指定的时间戳，并且该`systime()`函数将仅返回当前时间戳。我认为您正在考虑该`mktime()`功能，但您需要知道年、月、日：

```
awk 'BEGIN { print mktime("2012 11 14 12 50 57") }' 
```

结果：

```
1352861457 
```

[您可以在此处](http://www.gnu.org/software/gawk/manual/html_node/Time-Functions.html)阅读有关`GNU awk`时间函数的更多信息。HTH。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T13:17:11.230

```
$ awk 'BEGIN{print mktime(strftime("%Y %m %d 12 50 57"))}'
1352919057
$ awk 'BEGIN{print mktime(strftime("%Y %m %d " gensub(/:/," ","g","12:50:57")))}'
1352919057 
```

# ant - Jenkins/Hudson JBoss 插件在启动后等待？

> ID：13374747
> 
> 赞同：0
> 
> 时间：2012-11-14T07:41:53.910
> 
> 标签：ant, jboss, jenkins, hudson

我正在通过 Jenkins JBoss 插件启动 JBoss 服务器。之后，我通过 Ant 目标执行一些 Selenium 测试。一些第一个 Selenium 测试由于超时而失败，我怀疑 Ant 测试目标是在 JBoss 启动后立即执行的，并且服务器没有正确完成启动。启动服务器大约需要 2 分钟。有没有办法在启动后设置等待时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-26T02:49:06.507

我遇到了类似的情况，我通过监视 server.log 来解决它。你可以找到我关于这个问题的博客文章。希望这有帮助。=)

[Linux – 等到使用 tail 和 sed 将特定模式写入日志](http://eureka.ykyuen.info/2013/10/22/linux-wait-until-a-specific-pattern-is-written-on-log-using-tail-and-sed/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T15:33:40.903

好吧，您可以`sleep`在 Ant 目标中添加一个命令。看起来像这样：

```
<sleep milliseconds="10"/> 
```

请参阅此处的文档：http: [//ant.apache.org/manual/Tasks/sleep.html](http://ant.apache.org/manual/Tasks/sleep.html)

# iphone - 将语音转换为文本

> ID：13374748
> 
> 赞同：1
> 
> 时间：2012-11-14T07:42:07.357
> 
> 标签：iphone, ios6, voice-recognition, speech-to-text

> **可能重复：**
> [iphone 的语音到文本 API？](https://stackoverflow.com/questions/3598549/speech-to-text-api-for-iphone)

目前，我正在开发一个应用程序，其中我使用 AvAudioRecorder 录制了语音。

它对我来说很好，但我也希望录制的语音也转换为文本和文本

自动保存到文本字段中。我很努力，但无法成功。我该如何解决

这个？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T07:57:36.210

AFAIK Google 和 Siri 以及 SoundHound 等其他声音识别应用程序通过将声音上传到服务器来完成此操作，然后服务器完成所有繁重的工作并将其作为文本（或任何需要的内容）返回到设备。

即使是 iPhone 上的听写也能做到这一点。

如果你能让它在设备上工作，我会印象深刻：D

# iphone - xib 和 SubUIView.class，如何将属性添加到该类中？

> ID：13374750
> 
> 赞同：-1
> 
> 时间：2012-11-14T07:42:40.210
> 
> 标签：iphone, ios, uiview, properties, xib

我创建了三个文件，有

```
MDActionBar.h,
MDActionBar.m,
MDActionBar.xib 
```

MDActionBar.h

```
#import <UIKit/UIKit.h>
@interface MDActionBar : UIView{
    NSString* _type;
}
@property (retain, nonatomic) IBOutlet UIButton *label_tips;    
@property (nonatomic,retain) NSString* type;
-(id)initWithFrame:(CGRect)frame;
@end 
```

MDActionBar.m

```
#import "MDActionBar.h"

@implementation MDActionBar
@synthesize type = _type;
-(id)initWithFrame:(CGRect)frame withType:(NSString*)itype{
    self = [super initWithFrame:frame];
    if (self) {
        [[NSBundle mainBundle] loadNibNamed:@"MDActionBar" owner:self options:nil];
        NSArray *theView =  [[NSBundle mainBundle] loadNibNamed:@"MDActionBar" owner:self options:nil];
        self = [theView objectAtIndex:0];
        self.frame = frame;
    }
} 
```

我像这样使用这个类：

```
MDActionBar* mdActionBar = [[[MDActionBar alloc]initWithFrame:UI_TOOLBAR_POSITION_DOWN withType:@"done"] autorelease];
mdActionBar.type = @"done"; 
```

似乎 MDActionBar.m 中没有名为“type”的属性，

```
NSLog(@"_type %@",self.type); 
```

它总是在控制台中显示 null 。

如果我加载一个 xib，而这个 xib 是一个 UIView，并且 UIView 中没有“类型”属性，那么它会打印 null ???

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T08:05:02.187

您在 init 中传递类型但从未设置类型。你需要把它存放在某个地方。在初始化

```
self.type = itype 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T08:00:25.943

将 xib 中的视图类从 UIView 更改为 MDActionBar

# php - yii 框架的 CRUD 生成器 (gii) 显示错误消息：“'Voucher' 必须从 CActiveRecord 扩展。”

> ID：13374754
> 
> 赞同：0
> 
> 时间：2012-11-14T07:42:57.770
> 
> 标签：php, crud, yii, gii

我正在尝试使用 gii 为我的凭证表生成 CRUD，我遵循简单的步骤，我总是通过这些步骤生成 CRUD，但这次使用“凭证”表显示一些意外的错误消息

> “凭证”必须从 CActiveRecord 扩展。

以下是我尝试生成 CRUD 的方式。

**第 1 步：模型生成：**

![模型生成](../Images/96dc1c621339dc95e728c2be6c00a4f8.png)

她生成的凭证模型位于 root/protected/models/Voucher.php

![凭证.php](../Images/595e488b78f583b4294519d8b893f9a7.png)

**第 2 步：CRUD 生成：**

![CRUD 生成](../Images/16ff97e3af650418ac3ceb4b1eee1669.png)

**解决方法：**

我尝试使用模型类的路径别名生成 CRUD，它可以工作，请查看下面的屏幕

![解决方法](../Images/9cb32df0121c118dd95049437493e0c0.png)

关于解决方法解决了这个问题，但我想知道为什么 CRUD 生成器没有像通常使用所有其他模型名称那样生成 CRUD。我注意到它仅针对“凭证”模型显示此错误，对于此特定模型，我必须采用上述解决方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T08:03:39.420

我注意到在 root/protected/components/ 文件夹中有一个名为“Voucher”的类导致上述问题。重命名并解决问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T06:39:14.847

由于另一个错误，我也注意到类名中有相同的名称。我更喜欢避免在 yii 中创建具有相同名称的类。

# android - 如何将谷歌地图添加到android api 8

> ID：13374755
> 
> 赞同：0
> 
> 时间：2012-11-14T07:43:02.563
> 
> 标签：android, google-maps

我需要扩展 MapActivity 以在我的 android 应用程序中创建地图视图。我正在使用 api 8。我注册了一个 Android Maps API 密钥。但是在类文件中我不能扩展 MapActivity。当我尝试在“SDK 和 AVD 管理器”中添加“第三方附加组件”时，出现一个名为“无法获取 URL [https://dl-ssl.google.com/android/repository/addons_list.xml](https://dl-ssl.google.com/android/repository/addons_list.xml)的错误，原因：找不到文件”出现。然后我尝试通过应用“http://dl-ssl.google.com/android/repository/repository.xml”和“https://dl-ssl.google.com/”来“添加附加站点 URL” android/repository/repository.xml" url，错误消息仍然显示。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T08:02:47.160

请检查您的 Android 项目是否使用 Google API（包括 Map Kit）作为构建 SDK。无需添加第三方附加组件或其他东西。

Android SDK 不包含 Maps Kit 和其他一些功能。Google API 包含 Android API，并通过 Map Kit 等更多功能对其进行了扩展。请查看以下链接以获取更多详细信息：[目标 google API 和目标 android 之间的区别](https://stackoverflow.com/questions/5914775/difference-between-target-google-apis-and-target-android)

BR，迈贝克

# sql - 如何处理 SQLite 表中的重复条目？

> ID：13374762
> 
> 赞同：1
> 
> 时间：2012-11-14T07:44:09.100
> 
> 标签：sql, sqlite

没有数据库设计经验。我有以下情况：一个有 5 个条目的表。

```
<DeviceIdentificationstr, data1, data2, data3.... data 5> 
```

一个表可以有多个设备信息。我设计了这样的东西：

```
create table mytable (
  sNo integer PRIMARY KEY,
  DeviceIdentificationStr TEXT,
  data1 integer,
  data2 TEXT, ....) 
```

考虑以下场景：

```
Record 1:    1, "Device1", "data1",  20, "data2", "data3"....
Record 2:    2, "Device2", "data1",  120, "data2", "data3"....
Record 3:    3, "Device2", "data1",  220, "data2", "data3"....
Record 4:    4, "Device1", "data1",  230, "data2", "data3".... 
```

在这里`Device1`并且`Device2`一直在重复。

有没有其他设计表格的方法？或者这是唯一的出路？

另外，我需要查询类似：：获取“Device1”的所有记录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T07:57:49.053

您可以执行所谓的规范化：创建另一个表`devices`：

```
CREATE TABLE devices (
    device_id INTEGER PRIMARY KEY,
    DeviceIdentificationStr TEXT,
    DeviceMemory INTEGER,
    -- add more fields that describe device properties...
); 
```

将第一个表更改为：

```
CREATE TABLE mytable (
    sNo INTEGER PRIMARY KEY,
    device_id INTEGER,
    data1 integer,
    data2 TEXT,
    ...
) 
```

现在，您可以使用连接来获取所需的信息，如下所示：

```
SELECT m.*,
    d.DeviceMemory,
    ...
FROM mytable m
    JOIN devices d USING (device_id)
WHERE d.DeviceIdentificationStr = 'mydevice' 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-14T07:51:36.297

首先，您必须使用[SELECT语句检查表中是否存在设备，然后使用](http://www.w3schools.com/sql/sql_select.asp)[UPDATE](http://www.w3schools.com/sql/sql_update.asp)语句更新该特定行。

# android - 制作定制的短网址

> ID：13374763
> 
> 赞同：0
> 
> 时间：2012-11-14T07:44:25.743
> 
> 标签：android

我想缩短我的网址，但希望以定制的方式。

我用这个

```
HttpClient client = new DefaultHttpClient();
        String urlTemplate = "http://tinyurl.com/api-create.php?url=%s";
        String uri = String.format(urlTemplate, URLEncoder.encode(l));
        HttpGet request = new HttpGet(uri);
        HttpResponse response = client.execute(request);
        HttpEntity entity = response.getEntity();
        InputStream in = entity.getContent();

        StatusLine statusLine = response.getStatusLine();
        int statusCode = statusLine.getStatusCode();
        if (statusCode == HttpStatus.SC_OK) {
        // TODO: Support other encodings
        String enc = "utf-8";
        Reader reader = new InputStreamReader(in, enc);
        BufferedReader bufferedReader = new BufferedReader(reader);
        String tinyUrl = bufferedReader.readLine(); 
```

但这给了我一个以 tinyurl 开头的链接，但我想要一个自定义 url，如“zaiff.co/mynum/mycode”。google ar 第三方是否有任何 api 可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T08:50:00.110

不确定这是一个合适的答案，但这里有一些 URL 缩短器通过其 API 正式提供别名（与 TinyURL 不同）：

*   [BudURL](http://www.rubydoc.info/gems/budurl/frames)（付费缩短服务）通过其 API 提供别名。
*   [is.gd](http://www.memset.com/tools/)允许`shorturl`参数显式指定您想要的名称。

# ruby - RUBY::URI 单独提供主机时。例如，URI.extract("www.google.com") ... 应将其视为 URL

> ID：13374774
> 
> 赞同：0
> 
> 时间：2012-11-14T07:45:10.867
> 
> 标签：ruby, uri

当我将“http://google.com”之类的文本传递给 URI 时，

```
urls = URI.extract('http://google.com', ['http', 'https'])
# ['http://google.com'] 
```

我找回了正确的 URL。我的问题是，即使我没有域但有主机通过，它仍然需要是链接而不是文本..

例如

```
urls = URI.extract('www.google.com', ['http', 'https'])
# [''] 
```

我不确定 URI.extract 是否适用于我的情况。

请建议是否有 URI.extract 的任何解决方法或任何其他更好/更干净的方法来完成这项工作。

谢谢是提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T08:14:59.823

您还可以按如下方式解析 URl：

```
url=URI.parse("http://www.google.com") 
```

了解更多关于[ruby​​-doc 的信息。](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/uri/rdoc/URI.html)

# sql - 如果一个字符串为空，则将 2 个字符串转换为浮动后无法获得结果

> ID：13374776
> 
> 赞同：0
> 
> 时间：2012-11-14T07:45:14.807
> 
> 标签：sql, sql-server-2005

这个问题是关于我以前的问题之一。你可以在[这里找到](https://stackoverflow.com/questions/13340190/replace-or-remove-characters-and-then-cast-to-decimal)

我正在尝试获取 2 个字符串的摘要。到目前为止，我管理的是：

```
CAST (replace((replace (p8.pa_value,'%','')),' ','') AS float (3,0)) +
CAST (replace((replace (p9.pa_value,'%','')),' ','') AS float (3,0)) as total_discount 
```

问题是当`p9.pa_value`or`p8.pa_value`为**空**（空）时，总和结果也为**空**

有没有办法得到正确的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T07:54:45.573

如果你想`NULL`用其他东西（比如一个空字符串）替换一个值，你可以使用`COALESCE`：

```
COALESCE(CAST (replace((replace (p8.pa_value,'%','')),' ','') AS float (3,0)),'') +
COALESCE(CAST (replace((replace (p9.pa_value,'%','')),' ','') AS float (3,0)),'') as total_discount 
```

[`COALESCE`](http://msdn.microsoft.com/en-us/library/ms190349.aspx)从其参数返回第一个非空表达式。您可以提供任意数量的参数。（有一个`ISNULL`类似的 Transact-SQL only 函数。不过我通常会推荐`COALESCE`，因为它是标准 SQL，接受多个参数，并执行正确的类型优先级）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T08:15:29.623

正如你所指出的；对 NULL 值的任何操作都会导致 NULL。因此，当 pa_value 之一为 NULL 时，结果也为 NULL。

[ISNULL](http://msdn.microsoft.com/en-us/library/ms184325%28v=sql.90%29.aspx)可用于检查 NULL 值并将其转换为您选择的其他值。所以查询可以重写为：

```
ISNULL(CAST (replace((replace (p8.pa_value,'%','')),' ','') AS float (3,0)), 0.0) +
ISNULL(CAST (replace((replace (p9.pa_value,'%','')),' ','') AS float (3,0)), 0.0) as total_discount 
```

# ruby-on-rails - Geokit 插件自动缩放级别计算

> ID：13374779
> 
> 赞同：0
> 
> 时间：2012-11-14T07:45:36.947
> 
> 标签：ruby-on-rails, google-maps, geokit

我在我的 rails 项目中使用 GEOKIT 插件。我想在地理图像中显示 10 个点。我的缩放级别遇到了问题。我的缩放级别完全取决于我的 10 点距离。如果距离很小，则缩放级别应该很高。和我相反的缩放级别需要很低。但问题是 10 点距离变化很大。现在我的问题是 GEOKIT 中是否有任何想法或方法可以根据距离自动计算缩放级别？
提前致谢 ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T16:19:01.390

好的。我已经完成了。这是 Mapping.rb 文件错误。

# sql - 如何在sql中定义一个变量而不是表名？

> ID：13374782
> 
> 赞同：1
> 
> 时间：2012-11-14T07:45:47.747
> 
> 标签：sql, sql-server

我有这个 SQL 查询：

```
delete from Main.dbo.ACTIVITY;
insert into Main.dbo.ACTIVITY
select * from MainTemp.dbo.ACTIVITY; 
```

我想在执行 for 之后为 10 个表执行该 SQL `ACTIVITY`。

有没有办法做到这一点？定义一个变量还是什么？

我在 SQL Server Management Studio 10 (= SQL Server 2008) 中运行查询

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T08:03:43.250

在这种情况下编写动态查询。下面的例子可能会给你一些想法

例如

```
Declare @tableNames table(Id int identity,TableNames Varchar(10))
Insert Into @tableNames Values('Table1'),('Table2'),('Table3'),('Table4')

Declare @query AS Varchar(max)
Declare @tblNames AS Varchar(max)
Declare @count AS int
Declare @i AS int = 1

Select @count = Count(*) from @tableNames

While(@i <=@count)

Begin
    Select @tblNames = TableNames from @tableNames Where Id = @i
    Set  @query = 'delete from ' + @tblNames 
    Set @query +=  '; insert into ' +  @tblNames
    Set @query +=  '; select * from ' +  @tblNames

    print @query --exec  @query 

    Set @i += 1
End 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T08:10:14.500

## 使用动态 SQL

```
declare @tablename sysname = N'ACTIVITY';
declare @sql  nvarchar(max);

set @sql = N'delete from Main.dbo.' + quotename(@tablename);
exec sp_executesql @sql;
set @sql = N'insert into Main.dbo.' + quotename(@tablename);
exec sp_executesql @sql;
set @sql = N'select * from Main.dbo.' + quotename(@tablename);
exec sp_executesql @sql; 
```

由于存在 SQL 注入风险，在处理动态 SQL 时使用[QUOTENAME](http://msdn.microsoft.com/en-us/library/ms176114.aspx)**非常重要。**动态 SQL 有利有弊，有关深入讨论，请参阅[动态 SQL 的诅咒和祝福](http://www.sommarskog.se/dynamic_sql.html)。

## 使用[SQLCMD 执行模式](http://msdn.microsoft.com/en-us/library/ms174187.aspx)

SSMS 和 SQLCMD 具有使用客户端变量替换的功能：

```
:setvar tablename Main.dbo.ACTIVITY
delete from $(tablename);
insert into $(tablename);
select * from $(tablename); 
```

SQLCMD 模式变量的亮点在于批量使用，因为变量可以通过[-v 参数](http://msdn.microsoft.com/en-us/library/ms162773.aspx)传入。例如：

```
c:\>for /f %i in (tablenames.txt) do sqlcmd -S <servername> -E -d <dbname> -v tablename=%i -Q "truncate table $(tablename)" 
```

请注意，在 SSMS 中，必须显式启用 SQLCMD 执行模式。

# java - 无法使用 RegEx 将字符串转换为 Java 中的列表...！

> ID：13374783
> 
> 赞同：0
> 
> 时间：2012-11-14T07:46:05.077
> 
> 标签：java

我正在尝试将以下字符串转换为 Java 中的列表，但将其作为单个对象，我需要四个单独的列表对象。

字符串：应用程序“xyz”窗口“abc”的按钮1 应用程序“xyz”窗口“abc”的按钮2 应用程序“xyz”窗口“abc”的按钮3 UI元素1的“完成”按钮应用程序“xyz”的窗口“abc”的滚动区域1

使用的Java代码：

```
List<String> items = Arrays.asList(resultObject.toString().split("\\s*,\\s*"));
List<String> formattedList = new ArrayList<String>();
for (String item : items) {
    formattedList.add(item);                        
} 
```

预期输出：类似于字符串，但在四个不同的列表对象中

```
item1 : button 1 of window "abc" of application process "xyz"
item2 :button 2 of window "abc" of application process "xyz"
item3: button 3 of window "abc" of application process "xyz"
item4 :button "Finish" of UI element 1 of scroll area 1 of window "abc" of application process "xyz" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T11:07:54.710

如果您的输入字符串是

> 应用程序“xyz”窗口“abc”的按钮1 应用程序“xyz”窗口“abc”的按钮2 应用程序“xyz”窗口“abc”的按钮3 滚动区域的UI元素1的“完成”按钮应用程序“xyz”窗口“abc”的1

那么你没有明确的字符串分隔符。最后一项与前三项不一致（模式不一样）。什么样的对象是`resultObject`什么，它产生什么？发布您的输入数据会很有帮助。

如果你想拆分上面的字符串，你可以试试这个：

```
String resultObject = new String("button 1 of window \"abc\" of application process \"xyz\" button 2 of window \"abc\" of application process \"xyz\" button 3 of window \"abc\" of application process \"xyz\" button \"Finish\" of UI element 1 of scroll area 1 of window \"abc\" of application process \"xyz\"");
String[] list = resultObject.toString().split("\"xyz\"");
for (String item : list) {                       
    System.out.println(item.trim());
} 
```

它输出：

```
button 1 of window "abc" of application process
button 2 of window "abc" of application process
button 3 of window "abc" of application process
button "Finish" of UI element 1 of scroll area 1 of window "abc" of application process 
```

或查看[此链接](http://ideone.com/LbIJyf)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T08:52:49.327

不知道它`resultObject`是如何构造的，但你真正需要的是一个`String.split("\\r?\\n")`.

顺便说一句，我认为你的正则表达式坏了，这就是为什么你在输出中得到一个元素（它不能在输入上匹配）。如果您将其更改为`\\s+`，它会将您的整个输入拆分为单词。这就是为什么你需要那里的端线。

# c# - GetSubKeyNames 函数在 C# 和 Visual Basic 中返回不同的子键

> ID：13374784
> 
> 赞同：0
> 
> 时间：2012-11-14T07:46:09.840
> 
> 标签：c#, vb.net, registry, registrykey

我正在使用 GetSubKeysNames 函数从 {HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Uninstall} 获取子项。但它返回不同的子键计数。在 C# 中返回 371 个子键，在 Visual Basic 中返回 61 个子键。我哪里错了？

这是一些代码和图片。

C＃

```
string[] deneme = unistallKey.GetSubKeyNames(); 
```

![在此处输入图像描述](../Images/111c8a35cfd51121f0b8be00cce8577e.png)

VB

```
Dim deneme() As String = UninstallKey.GetSubKeyNames 
```

![在此处输入图像描述](../Images/7cf9aab60d89fb05b52b361f702f75ae.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-28T11:24:14.987

我有同样的问题，使用下面的代码，问题就解决了。

```
 Dim rk1 As RegistryKey = Microsoft.Win32.RegistryKey.OpenBaseKey _
                                    (Microsoft.Win32.RegistryHive.LocalMachine, Microsoft.Win32.RegistryView.Registry64)
        Dim rk2 As RegistryKey = Microsoft.Win32.RegistryKey.OpenBaseKey _
                                    (Microsoft.Win32.RegistryHive.LocalMachine, Microsoft.Win32.RegistryView.Registry64)
        Dim rk3 As RegistryKey = Microsoft.Win32.RegistryKey.OpenBaseKey _
                                    (Microsoft.Win32.RegistryHive.LocalMachine, Microsoft.Win32.RegistryView.Registry64)

    rk1 = RegistryKey.OpenBaseKey(RegistryHive.LocalMachine, RegistryView.Registry64)

    regpath = "SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall"

    rk2 = rk1.OpenSubKey(regpath)

    For Each subk As String In rk2.GetSubKeyNames

        rk3 = rk2.OpenSubKey(subk, False)

        value = rk3.GetValue("DisplayName", "")

        If value <> "" Then
            includes = True
            If value.IndexOf("Hotfix") <> -1 Then includes = False
            If value.IndexOf("Security Update") <> -1 Then includes = False
            If value.IndexOf("Update for") <> -1 Then includes = False
            If value.IndexOf("Service Pack") <> -1 Then includes = False

            For vAtual = 0 To UBound(Softwares)
                If value = Softwares(vAtual) Then
                    includes = False
                End If
            Next

            If includes = True Then
                gridSoft.Rows.Add(value, rk3.GetValue("InstallDate", ""), rk3.GetValue("UninstallString", ""), rk3.GetValue("EstimatedSize", ""), rk3.GetValue("InstallLocation", ""), rk3.GetValue("Publisher", ""))
                Softwares(vCont) = value
                vCont = vCont + 1
            End If

        End If
    Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T13:49:09.390

可能是您的某些程序安装在 32 位以下，而有些则安装在 64 位以下。通过以下键枚举：

HKEY_LOCAL_MACHINE\Software\WOW6432node\

# haxe - Haxe 中的动态转换

> ID：13374790
> 
> 赞同：5
> 
> 时间：2012-11-14T07:46:52.113
> 
> 标签：haxe, dynamic-cast

**是否可以根据运行时可用的信息将变量转换为另一种类型？**

如果我有：

```
interface Foo
{
}

class Bar implements Foo
{
    public function new()
    {
    }
} 
```

我想做这样的事情（为了清楚起见，方法被简化）：

```
public static function dynamicCast<T : Foo>(target : Foo, cls : Class<T>) : T
{
    var ret : T = cast(pTarget, cls);
    return ret;
} 
```

我收到以下编译器错误：

```
Unexpected ) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T19:48:09.820

我在[官方 haxe 文档](http://haxe.org/ref/dynamic#unsafe-cast)中找到了答案。这里是：

```
public static function dynamicCast<T : Foo>(target : Foo, cls : Class<T>) : T
{
    if(Std.is(target, cls))
    {
        var ret : T = cast target;
        return ret;
    }
    return null;
} 
```

# java - 插入查询（mySQL-Netbeans）返回错误消息

> ID：13374792
> 
> 赞同：0
> 
> 时间：2012-11-14T07:47:07.360
> 
> 标签：java, mysql, netbeans, insert

我在 mySQL 中创建了下表（to_do） : td_id(int),td_day(int),td_month(int),td_year(int),to_do(varchar),td_done(boolean)

td_id 字段设置为自动递增模式

在 NetBeans 中运行以下代码时，我收到一条错误消息，提示“‘字段列表’中的未知列‘新年派对’”

有人能告诉我如何让代码工作吗？提前致谢。

```
 Connection conn1;

         try{
         Class.forName("com.mysql.jdbc.Driver"); 
                     String url = "jdbc:mysql://localhost:3306/myproject?" +
                               "user=root&password=abcd"; 
                     conn1 = DriverManager.getConnection(url); 
                     int datevar=31,monthar3=12,yearvar1=2012;
                   String data=”new year party”;

                     String strSQL = "INSERT INTO to_do(td_day,td_month,td_year,to_do,td_done) VALUES (“+datevar1+","+monthvar3+","+yearvar1+","+data+",0)";
                     Statement stmt1 = conn1.createStatement();
                     int StringrowsEffected = stmt1.executeUpdate(strSQL);

        conn1.close();
         }
         catch ( Exception e) { 
                       System.err.println("Got an exception! "); 
                       System.err.println(e.getMessage()); 
                       } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T07:49:40.817

字符串常量（因为您将查询字符串连接在一起，所以您的常量）需要在 SQL 中的任何地方与它们周围的单引号一起使用。您的查询在您尝试为该列插入值的点周围没有单引号`to_do`，因此它失败了。如果您可以看到新添加的引号，则正确的代码如下：

```
String strSQL = "INSERT INTO to_do(td_day,td_month,td_year,to_do,td_done) VALUES 
                (“+datevar1+","+monthvar3+","+yearvar1+", '"+data+"' ,0)"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T07:54:12.023

**假设只有数字字段**，您的第一个双引号 ( `VALUES (“+datevar1+`) 看起来不太好。请更正如下：

```
 String strSQL = "INSERT INTO to_do(td_day,td_month,td_year,to_do,td_done) 
                   VALUES ("+datevar1+","+monthvar3+","+yearvar1+","+data+",0)"; 
```

**如果任何字段是文本类型，**则也将相应的值用单引号 ( `'`) 括起来。

例如，如果`to_do`是文本类型，那么，

```
 String strSQL = "INSERT INTO to_do(td_day,td_month,td_year,to_do,td_done) 
                   VALUES ("+datevar1+","+monthvar3+","+yearvar1+",'"+data+"',0)"; 
```

# hibernate - 使用 HQL 进行休眠连接

> ID：13374794
> 
> 赞同：0
> 
> 时间：2012-11-14T07:47:15.297
> 
> 标签：hibernate, join, hql

我只需要 HQL 中的一个简单示例（无条件），其中我有两个表需要在“int”类型的列上与左外连接连接。我在后端有 Sybase。

我已经查看了很多地方（甚至在这个站点上）并包括[了文档](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html)，但没有发现它们对初次使用的用户太有用。

考虑我有表'First'和表'Second'，连接列'empID'为'int'。如何使用命名查询将外部联接 First 与 second 分开。还请指定是否需要对第一类和第二类的 hbm 文件进行任何其他映射更改。我相信这将有助于简化许多 Hibernate 新手的连接。

编辑：

empID 是一个肯定存在于表 First 中的值，可能存在也可能不存在于表 Second 中。它只是指一个员工。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T12:44:27.197

这是不可能的。仅当两个实体之间存在关联时才可能进行连接。

如果你有，你可以做你想做的事：

*   从 First 到 Employee 的 ManyToOne 或 OneToOne 关联
*   从 Employee 到 Second 的 OneToMany 或 OneToOne 关联

在这种情况下，查询看起来像

```
select first from First first
inner join fetch first.employee employee
left join fetch employee.second(s) second
where ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T13:03:59.047

```
select ... from First as f, Second as s where f.employee.Id = s.employee.Id 
```

# matlab - 在事件相关 fMRI 实验中提取受试者发声响应时间的自动化方法

> ID：13374804
> 
> 赞同：0
> 
> 时间：2012-11-14T07:47:54.107
> 
> 标签：matlab, response-time

我已经成功地从他们在 MRI 扫描仪中的反应中提取了参与者的明显文字阅读反应时间数据。这是我在 matlab [http://www.mathworks.in/matlabcentral/fileexchange/38761-function-to-calculate-reaction-time](http://www.mathworks.in/matlabcentral/fileexchange/38761-function-to-calculate-reaction-time)中编写的函数，但它仅在只有一个语音响应时才有效。当音频文件包含多个人类响应时，它会失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T09:20:36.717

我是否正确理解您识别这样的响应：

```
Step 1: Calculate the average signal height in the set 

Step 2: Find the place where the signal is sufficiently higher than the average 
```

在这种情况下，我建议如下：

```
Start with a small subset (startpoint is the startpoint of the original set)

Do Step 1 and Step 2 for the subset

If nothing is found, increase the subset size and do Step 1 and Step 2 again. 
```

# eclipse - 找不到缺少的 VC 2008 运行时可再发行包

> ID：13374805
> 
> 赞同：1
> 
> 时间：2012-11-14T07:47:57.440
> 
> 标签：eclipse, blackberry, windows-7-x64

我下载了eclipse并安装了eclipse的BlackBerry插件。

现在当我开始日食时：

> 找不到缺少的 Visual C++ 2008 运行时可再发行包。可以从以下位置安装所需的软件包：[MS VS2008 Redistributable Package](http://www.microsoft.com/en-us/download/details.aspx?id=29)。

我从给定的 url 下载/安装/（也重新启动 PC）它，但是当我启动 eclipse 时仍然显示警告。

PS我正在使用Windows 7 x64
PS我也尝试了MS VS2008 for x64，但启动时仍然显示警告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T09:25:39.577

问题来自使用 64 位 Eclipse。

根据这些知识库文章，Eclipse 的 Blackberry Java 插件需要 32 位 Java/Eclipse 才能正常运行 -

*   [不同 BlackBerry JDE 版本支持的 Java 版本](http://supportforums.blackberry.com/t5/Java-Development/Supported-versions-of-Java-for-different-BlackBerry-JDE-versions/ta-p/446034)
*   [调试时出错：找不到 RIMIDEWin32Util.dll。这是 IDE 的必需组件。](http://supportforums.blackberry.com/t5/Java-Development/Error-when-debugging-Cannot-find-RIMIDEWin32Util-dll-This-is-a/ta-p/444928)

您*可以*配置 64 位 Eclipse 以使用一些 ad-hockery 与 Blackberry Java 一起工作，但由于第二篇知识库文章中提到的问题，您将无法正确调试。最好改用 32 位版本的 Eclipse。

# xcode - 整数更新 4 次

> ID：13374809
> 
> 赞同：0
> 
> 时间：2012-11-14T07:48:07.623
> 
> 标签：xcode

我有一个整数，用于更改图像的大小。使用计时器

```
int tempnumber = 0; 
```

在我的方法中，我有

```
(void)countup
{
    mytime --;// increases intger by 1
    timerlbl.text = [NSString stringWithFormat:@"%i", mytime];//puts intger in label
    tempnumber=  tempnumber +8;    
    if (mytime == 0) { // if we run out of time return to main view
        tempnumber = 0;
    }
} 
```

这在第一次更新 8 时工作正常，
但我随后重置

```
(IBAction)reset:(id)sender {
   tempnumber = 0;
   tempnumberdisplay.text =  [NSString stringWithFormat:@"%i",myStore.tempnumber];
} 
```

并再次运行它增加 16 然后 32 然后 64 等等。

我做了一些搜索并尝试使用 nsuintger 但仍然是同样的问题

# server-side - 谷歌分析电子商务状态代码 200 OK 但交易未显示

> ID：13374810
> 
> 赞同：0
> 
> 时间：2012-11-14T07:48:16.950
> 
> 标签：server-side, google-analytics-api

出于多种原因，我不想将 Google Analytics javascript 代码用于我的交易，而是使用服务器端解决方案。我制作了一个 C# 函数，它向 Google 服务器发出 Web 请求。

当提出交易请求时，我得到以下信息：

```
responseUri: http://www.google-analytics.com/__utm.gif?
                                        utmwv=5.3.7
                                        &utms=1
                                        &utmn=7470436714
                                        &utmhn=www.fotofabriek.nl
                                        &utmsr1680x1050
                                        &utmvp=1680x1050
                                        &utmsc=32-bit
                                        &utmul=nl-NL
                                        &utmje=0
                                        &utmfl=11.5%r31
                                        &utmhid=4470327307
                                        &utmr=test
                                        &utmp=Winkelwagen
                                        &utmt=item&utmtid=7854
                                        &utmipc=fb0115
                                        &utmipn=Visitekaartjes
                                        &utmipr=12.97
                                        &utmiqt=3
                                        &utmiva=Visitekaartjes
                                        &utmac=UA-13256617-1

statucode: OK

responseUri: http://www.google-analytics.com/__utm.gif?
                                        utmwv=5.3.7
                                        &utms=0
                                        &utmn=1271427811
                                        &utmhn=www.fotofabriek.nl
                                        &utmsr1680x1050
                                        &utmvp=1680x1050
                                        &utmsc=32-bit
                                        &utmul=nl-NL
                                        &utmje=0
                                        &utmfl=11.5%r31
                                        &utmhid=0621675512
                                        &utmr=test
                                        &utmp=Winkelwagen
                                        &utmt=tran
                                        &utmtci=Groningen
                                        &utmtco=NL
                                        &utmtrg=
                                        &utmtid=7854
                                        &utmtst=fotofabriek
                                        &utmtsp=2.35
                                        &utmtto=27.64
                                        &utmttx=4.80
                                        &utmac=UA-13256617-1

statucode: OK 
```

这里出了什么问题？以上是对带有相应状态码的服务器发出的请求。我收到状态码 200 OK，但在 Analytics Ecommerce 中我的交易未显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T11:49:46.610

与此同时，我一直在尝试和尝试。然后我找到了解决方案。我错过了 cookiestring 的一些参数。

我已经为此制作了一个 C# 包装器，它将很快出现在 codeproject 上。当它是我将发布链接给那些可以使用它的人。

编辑：链接到源代码[http://www.codeproject.com/Articles/493455/Server-side-Google-Analytics-Transactions](http://www.codeproject.com/Articles/493455/Server-side-Google-Analytics-Transactions)

# c++ - SSE g++ 编译问题

> ID：13374811
> 
> 赞同：2
> 
> 时间：2012-11-14T07:48:30.023
> 
> 标签：c++, g++, sse

我正在尝试使用 SSE 内在函数。我制作了一个测试程序，只需将两个向量与四个 16 位元素相加。

```
#include <xmmintrin.h>
#include <iostream>
using namespace std;

void test_vec_add(){
  const int length = 4;
  float product[128*4]  __attribute__ ((aligned(16)));
  _m128 x = _mm_set_ps(1.0f,2.0f,3.0f,4.0f);
  _m128 y = _mm_set_ps(1.0f,2.0f,3.0f,4.0f);
  _m128 z = _mm_add_ps(x,y);
  _mm_store_ps(product,z);
}
int main(){
  test_vec_add();
} 
```

我正在编译这段代码

```
g++ -msse3 test_sse.cpp 
```

但是，我收到以下并发症错误

```
test_sse.cpp: In function ‘void test_vec_add()’:
test_sse.cpp:7:3: error: ‘_m128’ was not declared in this scope
test_sse.cpp:7:9: error: expected ‘;’ before ‘x’
test_sse.cpp:8:9: error: expected ‘;’ before ‘y’
test_sse.cpp:9:9: error: expected ‘;’ before ‘z’
test_sse.cpp:10:24: error: ‘z’ was not declared in this scope
test_sse.cpp: In function ‘int main()’:
test_sse.cpp:15:20: error: ‘test_vec_add’ was not declared in this scope 
```

这可能是一个非常愚蠢的错误，但我无法确定它在哪里。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T07:55:45.180

这是一个简单的错字。

诸如此类的类型`__m128`以两个下划线开头。诸如`_mm_store_ps`do 之类的函数仅以一个下划线开头。

# php - 使用 PHP 将 Amazon S3 上传到文件夹

> ID：13374812
> 
> 赞同：1
> 
> 时间：2012-11-14T07:48:47.070
> 
> 标签：php, amazon-s3

我正在尝试使用 PHP 上传文件，以便 Amazon S3 服务器。到目前为止，我只设法将文件上传到存储桶（我正在使用亚马逊的 php 类和 putObjectFile 方法）。问题是我无法上传到存储桶内的特定文件夹。假设我想在这里上传 - mybucket/folder 。该方法给出了一个错误，它无法解析 mybucket（但是，如果我尝试直接上传到 mybucket 它确实有效）。

任何帮助将非常感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T07:51:02.063

你应该尝试如下

```
$s3->create_object($bucket, 'folder/filename', $options) 
```

# java - 使用 JDBC 在 Apache Derby 数据库中执行批量插入时，出现语法错误：DERBY-PROPERTIES。我究竟做错了什么？

> ID：13374816
> 
> 赞同：0
> 
> 时间：2012-11-14T07:49:07.607
> 
> 标签：java, jdbc, derby

在尝试对大型分隔文本文件进行数据处理时，我决定使用数据库系统来完成这项工作，并提高速度。我需要我开发的程序来完成 6 个关键过程，以完成预期的目标。

1.  即时创建本地数据库
2.  创建一个包含未知数量的列或类型的表
3.  将分隔文件导入表格（根据需要重复 2 和 3）
4.  执行 SQL 查询以获取所需的记录
5.  将结果导出到另一个分隔的文本文件

我决定使用 Apache 的 Derby 数据库系统，因为它能够做 1 并且承诺能够做其他 4。

我创建数据库：

```
 String connectionName = "jdbc:derby:" + databaseName;

    if (createDatabase) {
        connectionName += ";create=true";
    }
    Class.forName("org.apache.derby.jdbc.ClientDriver").newInstance();
    connectionToDatabase = DriverManager.getConnection(connectionName); 
```

这可行，然后我从文件中获取第一条记录并获取字段数量以了解需要多少列：

```
 String statement = "CREATE TABLE " + tableName + " (";
    for (int i = 1; i <= tableAmount; i++) {
        statement += (char) (64 + i) + " VARCHAR(100)";
        if (i != tableAmount) {
            statement += ",";
        }
    }
    PreparedStatement pstmt = connectionToDatabase.prepareStatement(statement + ")");
    pstmt.executeUpdate();
    connectionToDatabase.commit(); 
```

这将按我选择的名称创建一个表（我尝试简单地创建一个名为“HELLO”的表）然后我尝试将文件导入到我创建的表中：

```
 try {

        String schemaName = "APP";
        String tableName = "HELLO";
        String fileName = "C:\\Hello.txt";
        String columnDelimiter = fieldDelimiter;
        String characterDelimiter = "";
        String codeset = "UTF-8";
        short replace = 0;

        Import.importTable(connectionToDatabase, schemaName, tableName, fileName,
                columnDelimiter, characterDelimiter, codeset,
                replace, false);
    } catch (SQLException e) {
        do {
            System.out.println("SQLState:" + e.getSQLState());
            System.out.println("Error Code:" + e.getErrorCode());
            System.out.println("Message:" + e.getMessage());
            Throwable t = e.getCause();
            while (t != null) {
                System.out.println("Cause:" + t);
                t = t.getCause();
            }
            e = e.getNextException();
            StackTraceElement st[] = e.getStackTrace();

            for (int i = 0; i < st.length; i++) {
                System.out.println("Stack Trace " + i + ":" + st[i]);
            }
        } while (e != null);
    }catch (Exception e) {
        System.err.println("Exception: " + e.getMessage());

    } 
```

但是当我运行它时，我得到的是：

```
Exception: Syntax error: DERBY-PROPERTIES 
```

我做错了什么，如果可能的话，我应该怎么做才能完成这项工作？

编辑：它在调用 Import.importTable 的行上出错。在修改我的错误输出后（上图），我现在得到以下输出：

```
SQLState:42X01
Error Code:30000
Message:Syntax error: DERBY-PROPERTIES.
Cause:java.sql.SQLException: Syntax error: DERBY-PROPERTIES.
Cause:ERROR 42X01: Syntax error: DERBY-PROPERTIES.
Stack Trace 0:org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(Unknown Source)
Stack Trace 1:org.apache.derby.impl.jdbc.Util.generateCsSQLException(Unknown Source)
Stack Trace 2:org.apache.derby.impl.jdbc.TransactionResourceImpl.wrapInSQLException(Unknown Source)
Stack Trace 3:org.apache.derby.impl.jdbc.TransactionResourceImpl.handleException(Unknown Source)
Stack Trace 4:org.apache.derby.impl.jdbc.EmbedConnection.handleException(Unknown Source)
Stack Trace 5:org.apache.derby.impl.jdbc.ConnectionChild.handleException(Unknown Source)
Stack Trace 6:org.apache.derby.impl.jdbc.EmbedPreparedStatement.<init>(Unknown Source)
Stack Trace 7:org.apache.derby.impl.jdbc.EmbedPreparedStatement20.<init>(Unknown Source)
Stack Trace 8:org.apache.derby.impl.jdbc.EmbedPreparedStatement30.<init>(Unknown Source)
Stack Trace 9:org.apache.derby.impl.jdbc.EmbedPreparedStatement40.<init>(Unknown Source)
Stack Trace 10:org.apache.derby.jdbc.Driver40.newEmbedPreparedStatement(Unknown Source)
Stack Trace 11:org.apache.derby.impl.jdbc.EmbedConnection.prepareStatement(Unknown Source)
Stack Trace 12:org.apache.derby.impl.jdbc.EmbedConnection.prepareStatement(Unknown Source)
Stack Trace 13:org.apache.derby.impl.load.Import.performImport(Unknown Source)
Stack Trace 14:org.apache.derby.impl.load.Import.importTable(Unknown Source)
Stack Trace 15:root.DatabaseManager.<init>(DatabaseManager.java:46)
Stack Trace 16:root.Startup.main(Startup.java:21) 
```

以下是我的 derby.log 的输出

```
Wed Nov 14 20:04:23 CST 2012:
Booting Derby version The Apache Software Foundation - Apache Derby - 10.9.1.0 - (1344872): instance a816c00e-013b-01cf-55d8-000000c58148 on database directory -omitted-  with class loader sun.misc.Launcher$AppClassLoader@1ba34f2 Loaded from file:/-omitted-/lib/derby.jar java.vendor=Sun Microsystems Inc. java.runtime.version=1.6.0_33-b05 user.dir=-omitted-
derby.system.home=null
Database Class Loader started - derby.database.classpath='' 
```

找出了问题：

*   我使用了错误的驱动程序：我使用的是客户端驱动程序而不是嵌入式驱动程序
*   我使用了不正确的功能。它可以进行一些编辑，但正确的是

    ```
    Statement s = connectionToDatabase.createStatement();
    s.execute("CALL SYSCS_UTIL.SYSCS_IMPORT_TABLE(null,'" + tableName
            + "','" + filePath + "','" + columnDelimiter
            + "',null,null,1)");
    connectionToDatabase.commit(); 
    ```

*   最后，最后一个问题是我使用的文本文件的最后一行没有下一行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T14:53:42.060

首先，您可以从异常中获取更多信息；方法如下：[http ://wiki.apache.org/db-derby/UnwindExceptionChain](http://wiki.apache.org/db-derby/UnwindExceptionChain)

其次，您应该在磁盘上找到您的“derby.log”文件；它将有更多关于出了什么问题的信息。

第三，一旦您弄清楚了您向数据库发出的确切语句，以及您在代码中的哪个位置发出了该语句，请使用该信息更新您的问题，我们可以提供更多帮助。

# asp.net-mvc-3 - 在一个视图 MVC3 中使用两个模型类

> ID：13374823
> 
> 赞同：1
> 
> 时间：2012-11-14T07:49:55.543
> 
> 标签：asp.net-mvc-3

这是场景。我制作了一个父模型类以在一个视图中使用两个模型类。这很好，但是当我尝试从数据库中获取记录时，我收到了这个错误。传入字典的模型项的类型为“PMS_V2.Models.Pension_info”，但该字典需要类型为“PMS_V2.Models.Parentmodel”的模型项。

**父模型.cs**

```
namespace PMS_V2.Models {
  // it  is the class of the parent model
  public class Parentmodel {
    // calling of pension info
    // for using foreach I have used ienumerable
    public IEnumerable<Pension_info> pension_infos { get; set; }
    //constructor
    public Parentmodel() {
      pension_infos = new List<Pension_info>();
    }
    // class of search
    public Search id { get; set; } // method to get id
  }
} 
```

**搜索.cshtml**

```
@model PMS_V2.Models.Parentmodel
@{
  ViewBag.Title = "Search";
}
<h2>Search</h2>
<p> Here Pensioner can check his records. Give your Pension_id in search query and get your details.</p>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript">  </script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")"    type="text/javascript"></script>
@using (Html.BeginForm()) {
  @Html.ValidationSummary(true)
  <fieldset>
    <legend>Pension_info</legend>
    <div class="editor-label">
      @Html.LabelFor(model => model.id, "Pension_no")
    </div>
    <div class="editor-field">
      @Html.TextBoxFor(model=>model.id)  // getting id from user..
      @Html.ValidationMessageFor(model=>model.id)
    </div>
    <p>
      <input type="submit" value="Search" />
    </p>
  </fieldset>
}
<table>
  @foreach (var item in  Model.pension_infos) {
  // model, I think the problem is here
    var i = 0;
    if (i == 0) {
      i++;
      <tr>
        <th>Pension_id</th>
        <th>Name</th>
        <th>P_month</th>
        <th>Amount</th>
      </tr>
    }
    <tr>
      <td>@Html.DisplayFor(modelItem => item.Pen_id)</td>
      <td>@Html.DisplayFor(modelItem => item.Pensioner.Name)</td>
      <td>@Html.DisplayFor(modelItem => item.P_month)</td>
      <td>@Html.DisplayFor(modelItem => item.Amount)</td>
    </tr>
  }
</table> 
```

**Pension_infoController.cs**

```
[HttpPost]
public ActionResult Search(string id) {
  var abc = from m in db.Pension_info
  // Linq query to get records
    where m.Pen_id == id
    select m;
    return View(abc.FirstOrDefault());
} 
```

请帮助我......我已经用谷歌搜索了很多......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T08:30:23.473

错误很简单，您正在强烈地键入您的视图，`Parentmodel`但将其传递给类型的 模型`Pension_info`尝试`Pension_info`将`Pension_info``Parentmodel`

```
[HttpPost]
public ActionResult Search(string id) {
  var abc = from m in db.Pension_info
  // Linq query to get records
    where m.Pen_id == id
    select m;
    Parentmodel _x = new Parentmodel();
    _x.pension_infos.ToList().Add(abc.FirstOrDefault());
    return View(_x);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-20T07:19:42.380

尝试这个

```
[HttpPost]
public ActionResult Search(string id)
{
    Parentmodel p = new Parentmodel();
    p.pension_infos = (from m in db.Pension_info where m.Pen_id == id select m)
                      .FirstOrDefault();
    return view(pension_infos);
} 
```

# java - Java Scanner 不等待输入

> ID：13374826
> 
> 赞同：5
> 
> 时间：2012-11-14T07:50:07.270
> 
> 标签：java, user-input, java.util.scanner

我这里有两个代码块。一个扫描仪正确地等待用户输入，而另一个扫描仪直接吹过它并调用`nextInt()`它返回一个`NoSuchElementException`. 这是有效的块：

```
public void startGame() {
   out.println("Player1: 1 for dumb player, 2 for smart player, 3 for human player.");
   Scanner scan = new Scanner(System.in);
   p = scan.nextInt();

   if (p == 1)
        p1 = new DumbPlayer("ONE");
   if (p == 2)
        p1 = new SmartPlayer("ONE");
   else 
       p1 = new HumanPlayer("ONE");

   out.println("Player2: 1 for dumb player, 2 for smart player, 3 for human player.");
   p = scan.nextInt();

   if (p == 1)
        p2 = new DumbPlayer("TWO");
   if (p == 2)
        p2 = new SmartPlayer("TWO");
   else 
        p2 = new HumanPlayer("TWO");

   scan.close(); 
```

这是没有的块：

```
public int findBestMove(Set<Integer> moves, Board b) {

    Set<Integer> set = new HashSet<Integer>();

    out.println("Player " +name+ ", select a column from 1-7: ");
    Scanner scan = new Scanner(System.in);  <--here it should wait for input, but does not!
    int move = scan.nextInt();   <-- NoSuchElementException
    scan.close();

    for (int x = 1; x <= 7; x++) {
        set.add(move);
        move += 7;
    }
    ....etc 
```

这两个都是独立的类，并且是从另一个类的主方法调用的。基本上`main()`调用`startGame()`，然后调用`findBestMove()`一些 Player 类的方法......这是非工作代码所在的位置。程序中是否存在不适合接受输入的情况？我的印象是，只要我想要用户输入，我就可以使用这种方法。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T07:53:37.047

`nextInt()`不会丢弃`\n`在流中，因此下一次调用什么也找不到。您必须使用`Scanner.skip("\n")`or手动跳过它`Scanner.nextLine()`

**编辑**在弄清楚“跳过`readInt()`”意味着代码抛出异常之后。在@Andreas 的帮助下，这是一个替代解决方案。在 java6 中添加了一个新的类[Console](http://docs.oracle.com/javase/6/docs/api/java/io/Console.html)来为 stdin 提供更好的接口。它返回一个不关心你关闭它的阅读器。所以下面的代码片段工作得很好：

```
 Scanner fi = new Scanner(System.console().reader());
    System.out.println(fi.nextInt());
    fi.close();

    fi = new Scanner(System.console().reader());
    System.out.println(fi.nextInt());
    fi.close(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-14T09:00:02.257

根据[java.util.Scanner javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html)，`Scanner.close()`如果此流实现`Closeable`接口，则关闭关联的流。`java.lang.System.in`是一个[InputStream](http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html)，它实现了`Closeable`接口。因此，在调用与关联的`Scanner.close()`a之后，流将关闭并且不再可用。`Scanner``System.in``System.in`

以下 SSCCE 对我有用。我从问题中删除了一些与实际问题无关的代码。请注意，使用这种方法，虽然它有效，但 Eclipse 会给我警告`"Resource leak: 'scan' is never closed"`，因此更好的解决方案是仅使用一个 Scanner 实例。

```
package com.example;

import java.util.Scanner;
import java.util.Set;
import static java.lang.System.out;

public class ScannerTest {
    int p = 0;
    String name = "Test";

    public void startGame() {
        out.println("Player1: 1 for dumb player, 2 for smart player, 3 for human player.");
        Scanner scan = new Scanner(System.in);
        p = scan.nextInt();

        out.println("Result1: " + p);

        out.println("Player2: 1 for dumb player, 2 for smart player, 3 for human player.");
        p = scan.nextInt();

        out.println("Result2: " + p);

        // scan.close();   // Do not close the Scanner to leave System.in open
    }

    public int findBestMove(Set<Integer> moves, Object /*Board*/ b) {
        out.println("Player " +name+ ", select a column from 1-7: ");
        Scanner scan = new Scanner(System.in);
        int move = scan.nextInt();
        // scan.close();   // Do not close the Scanner to leave System.in open

        out.println("Move: " + move);

        return 0;
    }

    public void run() {
        startGame();
        findBestMove(null, null);
    }

    public static void main(String[] args) {
        ScannerTest st = new ScannerTest();
        st.run();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T08:35:30.083

尝试使用`scan.reset();`而不是`scan.close()`. `scan.close()`正如 Denis Tulskiy 所说，将抛出 NoSuchElementException。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-09T02:21:08.883

我只花了大约 15 分钟来解决这个问题，我的问题与上述所有问题都不同。

代码很好，但我正在使用 Sublime Text 并在 Windows 上的 sublime 文本内的终端模拟器中运行它。这阻止了扫描仪实际上允许我尝试输入一些东西。

我使用 cmd 运行该应用程序，它运行良好。我希望这可以帮助别人。

# perl - 是否可以提供 find2perl mindepth 和 maxdepth 参数？

> ID：13374829
> 
> 赞同：0
> 
> 时间：2012-11-14T07:50:13.643
> 
> 标签：perl

我没有看到[`find2perl`](https://metacpan.org/module/find2perl)文档提到任何关于支持`-mindepth`和`-maxdepth`论点的内容。

下面的示例适用于[`find`](http://unixhelp.ed.ac.uk/CGI/man-cgi?find)：

```
$ find2perl . -mindepth 2 -maxdepth 2 -name "*txt" -type f
Unrecognized switch: -mindepth 
```

问题：

*   是否`find2perl`支持这样的功能？
*   如果是这样，我该如何指定`mindepth`和`maxdepth`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T17:37:57.900

[File::Find::Rule](https://metacpan.org/release/File-Find-Rule)有这些选项，它有一个命令行程序[findrule](https://metacpan.org/module/findrule)。

如果你想用 File::Find 来做，你可以通过检查文件的深度和设置深度来实现 maxdepth `$File::Find::prune`。mindepth 是类似的，但是你会提前从你的函数中返回。今天早上我感觉很懒，所以我会把编码留给其他人。

更新：其他人进行了编程，即 File::Find::Rule。 [这是他们使用的代码](https://metacpan.org/source/RCLAMP/File-Find-Rule-0.33/lib/File/Find/Rule.pm#L542)。

```
my $maxdepth = 2;
my $mindepth = 2;
my $topdir   = "something/something/something";
sub wanted {
    # figure out the relative path and depth
    my $relpath = $File::Find::name;
    $relpath =~ s{^\Q$topdir\E/?}{};
    my $depth = File::Spec->splitdir($relpath);

    defined $maxdepth && $depth >= $maxdepth
       and $File::Find::prune = 1;

    defined $mindepth && $depth < $mindepth
       and return;

    ...your code goes here...
}

find \&wanted, $topdir; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T16:27:50.493

我只是查看了 find2perl 和 File::Find 的源代码，它是 find2perl 使用的目录遍历器。目前既没有实现 mindepth 也没有实现 maxdepth。

File::Find 在遍历目录时显示轨道深度，在一个名为 $CdLvl 的变量中。您可以通过与 $CdLvl 进行比较来实现 mindepth 和 maxdepth。

# xml - 关于在 Xsl FOO 中完成的格式化

> ID：13374831
> 
> 赞同：0
> 
> 时间：2012-11-14T07:50:22.557
> 
> 标签：xml, xslt

我已经找到了问题的解决方案，要感谢你们所有人，因为没有你们及时的解决方案，并建议这是不可能实现的，非常感谢..！！

已经解决了这个问题，非常感谢..!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:59:48.470

试试这个属性`keep-with-next="always"

```
<fo:table-header>
   <fo:table-row keep-with-next="always">
         <fo:table-cell>
               <fo:block font-weight="bold"></fo:block>
          </fo:table-cell>
           <fo:table-cell>
              <fo:block text-align="left" space-after="4mm"
                  space-before="3mm" font-weight="bold">
                  <xsl:text>DEPARTMENT TOTALS</xsl:text>
               </fo:block>
           </fo:table-cell>
    </fo:table-row>
</fo:table-header> 
```

# wpf - 访问 wpf 中的内置样式

> ID：13374834
> 
> 赞同：0
> 
> 时间：2012-11-14T07:50:32.593
> 
> 标签：wpf, templates, button, styles

当我将按钮放在工具栏上时，它的样式会自动更改以匹配工具栏元素。

我从一个 ToggleButton 派生了我自己的类，现在如果我在工具栏上实例化一个，它看起来又像普通按钮了。如何访问 WPF 的内置模板，这样我就不必从头开始重新创建整个模板？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T08:28:44.290

显然 ToolBar 具有为某些控件定义的资源，包括`Button`和`ToggleButton`。这种样式，您可以在 ToolBar 的元数据中找到它们，应用于其目标类型的每个控件。所以你可以得到样式并自己应用它：

```
 <ToolBar>
        <my:CustomToggleButton 
            Height="100" Width="100" 
            Style="{StaticResource {x:Static ToolBar.ToggleButtonStyleKey}}" 
            Content="Press me!" />
    </ToolBar> 
```

如果您有很多按钮并且不想为每个按钮设置样式，则可以在自定义控件的代码隐藏中设置样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T08:24:36.843

您可以`style`像这样在自定义切换按钮上应用它，使其看起来像工具栏切换按钮 -

```
<local:LockableToggleButton LockToggle="True" Content="Test"
       Style="{StaticResource {x:Static ToolBar.ToggleButtonStyleKey}}"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T08:32:13.397

您可以使用和/或访问`OnApplyTemplate`覆盖中的更改模板。`VisualTreeHelper``LogicalTreeHeler`

# sql - log4j DB appender 抛出异常

> ID：13374847
> 
> 赞同：5
> 
> 时间：2012-11-14T07:51:54.073
> 
> 标签：sql, spring, log4j

我在 log4j.properties 文件中添加了一个 DB appender：

```
log4j.appender.DB=org.apache.log4j.jdbc.JDBCAppender
log4j.appender.DB.URL=jdbc:mysql://${db.url}/mydb
log4j.appender.DB.driver=com.mysql.jdbc.Driver
log4j.appender.DB.user=user
log4j.appender.DB.password=password
log4j.appender.DB.sql=INSERT INTO logs (Date, Logger, Priority, Message) VALUES ('%d', '%c', '%p', '%m')
log4j.appender.DB.layout=org.apache.log4j.PatternLayout
log4j.appender.DB.threshold=INFO 
```

这就是我的桌子的样子：

```
CREATE TABLE `logs` (
  `Id` bigint(20) NOT NULL AUTO_INCREMENT,
  `Date` varchar(30) NOT NULL,
  `Logger` varchar(128) NOT NULL,
  `Priority` varchar(10) NOT NULL,
  `Message` varchar(4096) NOT NULL,
  PRIMARY KEY (`Id`) 
```

部署应用程序后，在启动 tomcat 时，我看到此异常：

```
log4j:ERROR Failed to excute sql
com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '09:49:36,227, org.springframework.web.context.ContextLoader, INFO, Root WebAppli' at line 1
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:403)
    at com.mysql.jdbc.Util.getInstance(Util.java:378)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1031)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:957)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3361)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3295)
    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1852)
    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:1975)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2470)
    at com.mysql.jdbc.StatementImpl.executeUpdate(StatementImpl.java:1370)
    at com.mysql.jdbc.StatementImpl.executeUpdate(StatementImpl.java:1289)
    at org.apache.log4j.jdbc.JDBCAppender.execute(JDBCAppender.java:178)
    at org.apache.log4j.jdbc.JDBCAppender.flushBuffer(JDBCAppender.java:250)
    at org.apache.log4j.jdbc.JDBCAppender.append(JDBCAppender.java:146)
    at org.apache.log4j.AppenderSkeleton.doAppend(AppenderSkeleton.java:251)
    at org.apache.log4j.helpers.AppenderAttachableImpl.appendLoopOnAppenders(AppenderAttachableImpl.java:66)
    at org.apache.log4j.Category.callAppenders(Category.java:206)
    at org.apache.log4j.Category.forcedLog(Category.java:391)
    at org.apache.log4j.Category.log(Category.java:856)
    at org.slf4j.impl.Log4jLoggerAdapter.log(Log4jLoggerAdapter.java:597)
    at org.apache.commons.logging.impl.SLF4JLocationAwareLog.info(SLF4JLocationAwareLog.java:159)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:273)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4779)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5273)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:895)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:871)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:615)
    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:649)
    at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1585)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680) 
```

我在哪里错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-10T19:22:12.453

您需要替换所有可能导致 SQL 查询语法错误的特殊字符。请参阅sqlStatement 字段的 log4j [JDBCAppender JavaDoc ：](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/jdbc/JDBCAppender.html#sqlStatement)

> 存储提供给模式布局的字符串以转换为 SQL 语句，例如：插入 LogTable（线程、类、消息）值（“%t”、“%c”、“%m”）。小心你的消息中的引用！另请参阅 PatternLayout。

我建议您将自定义 DB appender 与准备好的语句一起使用。

# php - html之间传输数据

> ID：13374848
> 
> 赞同：1
> 
> 时间：2012-11-14T07:52:00.837
> 
> 标签：php, javascript, html

我有一个客户在他的网站上使用 joomla。客户通过 joomla 将一些数据输入到他的文章中（产品价格）。我需要一些简单的方法来获取这些数据到我的 HTML 页面。我可以将任何内容添加到他的 HTML 页面（java 脚本、PHP），我需要将数据传输到我的 HTML 页面。我的 HTML 页面是触发数据传输的页面。任何人都可以请让我朝着正确的方向前进如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T08:11:47.113

您当然可以使用以下步骤。如果您有两个参数并且它们的值是已知的（假设）5 和 10，那么您可以在单击它时创建一个按钮，打开下一页。所以你需要3样东西。

1.  设置为打开第二页的按钮。
2.  单击按钮时会触发 javascript 函数。
3.  一个 PHP 页面，您可以在其中检索变量并处理它们。

* * *

```
<form action = "nextpage.php" method = "post">
<input type = "hidden" name = "val2" value = "5"/>
<input type = "hidden" name = "val2" value = "10"/>
</form>
<a href = "javascript:nextpage()">Submit</a>
//Write a function to submit the form using javascript 
```

当需要发送一些数据，而这些数据在用户不知情的情况下发送时，您可以使用`input type as hidden`。这应该是 PHP 部分。

```
<?php
$var1 = $_POST['var1'];
$var2 = $_POST['var2'];
echo $var1.' '.$var2;
?> 
```

# php - 如何在 php 中销毁 session_id()？

> ID：13374850
> 
> 赞同：3
> 
> 时间：2012-11-14T07:52:05.663
> 
> 标签：php, session

> **可能重复：**
> [（PHP）如何正确销毁会话cookie？](https://stackoverflow.com/questions/2241769/php-how-to-destroy-the-session-cookie-correctly)

我正在用 PHP 做一个购物车。我`session_id()`用来识别个人用户。保存产品订单后，我需要销毁`session_id`. 我将如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T07:59:34.460

该`unset()`函数用于释放指定的会话变量：

```
if(isset($_SESSION['id']))
{
   unset($_SESSION['id']);
} 
```

您还可以通过调用`session_destroy()`函数完全销毁会话：

```
session_destroy(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T07:53:54.567

使用`session_regenerate_id()`. 它将更改会话 id，自动使旧的无效

为了进行良好的销毁，请在注销时使用以下命令：

```
session_start();
session_regenerate_id();
session_destroy(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T07:57:55.487

使用会话 ID 不是最好的方法（尽管您可以使用[`session_regenerate_id()`](http://php.net/manual/en/function.session-regenerate-id.php)创建新的会话 ID），因为如果用户注销，您会丢失购物车的内容（例如，他将开始准备工作订单并希望将其完成回家）。

更好、更灵活、更容易控制的是创建表：

```
CREATE TABLE carts (
    `id` INT,
    `user_id` INT
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T07:53:24.443

不知道你的意思，但这就是你破坏会话的方式

```
 unset( $_SESSION['id'] ) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T07:54:05.440

利用

```
session_regenerate_id(); 
```

反而。它将重新生成会话 ID。

查看更多信息： http: [//php.net/manual/en/function.session-regenerate-id.php](http://php.net/manual/en/function.session-regenerate-id.php)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-14T08:35:15.087

试试这个。。

page1.php

```
<?php
    session_start();
    $_SESSION['userID'] = 123;
?>
<a href="logout.php">Logout</a> 
```

注销.php

```
<?php
    session_start(); // start the session before using it
    session_destroy(); // delete the current session
    //$_SESSION['userID'] = 123;  // <---- NO LONGER EXISTS
    echo "Session destroyed!"; // inform the user of the changes
?> 
```

或者你可以只使用 session_destroy(); 在你的代码中

# ruby-on-rails - 渲染 twitter-bootstrap 搜索表单广告从中获取数据

> ID：13374856
> 
> 赞同：0
> 
> 时间：2012-11-14T07:52:31.437
> 
> 标签：ruby-on-rails, ajax

干杯，我需要通过单击按钮在我的应用程序主页上使用简单的引导搜索表单呈现部分视图。那么，如何正确地做到这一点呢？以及如何从搜索表单中获取查询？我是 Rails 和 AJAX 的新手，我被困住了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T08:28:08.917

在使用 Ajax截屏视频的[搜索、排序、分页中](http://railscasts.com/episodes/240-search-sort-paginate-with-ajax)获取战利品。

# java - 使用 Arrays.asList 的优缺点

> ID：13374857
> 
> 赞同：1
> 
> 时间：2012-11-14T07:52:32.480
> 
> 标签：java, arrays, collections

我想知道使用`Arrays.asList`. 在我的代码中使用它时遇到问题。

另外我想知道将数组转换为数组列表（集合）而不使用的最佳方法`Arrays.asList`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T08:02:59.710

要将数组转换为 ArrayList，我会这样做：

```
new ArrayList<T>(Arrays.asList(myArray)); 
```

您需要将列表包装在一个新的 ArrayList 中，否则您将无法添加任何元素，因为*asList()*返回的列表具有固定大小。因此，您在尝试添加元素时会收到 UnsupportedOperationException。

但如果您不喜欢上述方法，您可能也想这样做：

```
Collections.addAll(arraylist, array); 
```

**据我所知**，两者在性能方面都是等效的。

* * *

但更重要的是，使用第一种方法有什么问题？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T08:24:11.780

> 我想知道使用 Arrays.asList 的优缺点。

主要的“优点”是：

*   它不涉及复制数据，
*   您的列表将看到在支持数组中所做的任何更改（如果需要）

主要的“缺点”是：

*   您不能通过“asList”包装器添加或删除元素，
*   您的列表将看到对支持数组所做的任何更改（如果您不希望这样做）

（还有一个明显的限制：您不能应用于`asList`基元数组。但是无论如何转换基元数组并非易事......）

* * *

> 我想知道不使用 Arrays.asList 将数组转换为数组列表（集合）的最佳方法

不使用 aslist 将数组转换为列表的最简单方法是：

```
new ArrayList<T>(Arrays.asList(arrayOfT)) 
```

您可能会获得更好的性能：

```
ArrayList<T> list = new ArrayList<T>(arrayOfT.length);
Collections.addAll(list, arrayOfT); 
```

因为`ArrayList<T>(Collection<T>)`构造函数首先调用`toArray()`创建一个临时数组（至少在 Java 7 中是这样）。这意味着引擎盖下有一个额外的副本。

但最重要的是，仅使用比避免使用它的任何东西都`Arrays.asList`更*简单、更便宜。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T08:07:04.627

Arrays.asList 让您可以像查看列表一样查看数组。这意味着将来对数组的更改将影响列表，而对列表的将来更改会影响数组。这是好事还是坏事取决于您打算对 List 做什么，以及您希望它如何与数组相关联。

对于一次性使用，我肯定会选择 Arrays.asList。例如，List 有一个 toString 来显示内容，因此 System.out.println(Arrays.asList(myArray)) 可能很有用。

如果您想保留数组的快照，不受未来更改的影响，我仍然会使用 Arrays.asList，但随后会根据其结果创建一个新列表，如 @NNzz 的上一个答案所示。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-12-17T09:11:33.440

除了现有的答案，特别是@Stephen C 的一个很好的答案之外，还有一个问题`Arrays.asList`。

从***有效的Java***

* * *

`Arrays.asList`从来没有设计用于将多个参数收集到一个列表中，但是当 varargs 添加到平台时，对其进行改造似乎是个好主意。因此，可以执行以下操作：

```
List<String> homophones = Arrays.asList("to", ""too", "two"); 
```

这种用法有效，但启用它是一个大错误。

在 1.5 版之前，这是打印数组内容的常见习惯用法：

```
// Obsolete idiom to print an array!
System.out.println(Arrays.asList(myArray)); 
```

这个习惯用法是必要的，因为数组从 Object 继承了它们的`toString`实现，所以直接调用`toString`数组会产生一个无用的字符串，例如`[Ljava.lang.Integer;@3e25a5`. 该惯用语仅适用于对象引用类型的数组，但如果您不小心在基元数组上尝试了它，程序将无法编译。例如，这个程序：

```
public static void main(String[] args) {
    int[] digits = { 3, 1, 4, 1, 5, 9, 2, 6, 5, 4 };
    System.out.println(Arrays.asList(digits));
} 
```

将在 1.4 版中生成此错误消息：

> Va.java:6: 数组中的 asList(Object[]) 不能应用于 (int[]) System.out.println(Arrays.asList(digits));

[由于在 1.5 版中将 Arrays.asList](https://docs.oracle.com/javase/1.5.0/docs/api/java/util/Arrays.html#asList(T...))改造为 varargs 方法的不幸决定，该程序现在编译时不会出现错误或警告。

从好的方面来说，用于将数组转换为字符串的[Arrays.asList](https://docs.oracle.com/javase/1.5.0/docs/api/java/util/Arrays.html#asList(T...))惯用语现在已经过时，而当前的惯用语更加健壮。同样在 1.5 版中，为[Arrays](https://docs.oracle.com/javase/1.5.0/docs/api/java/util/Arrays.html)类提供了完整的[Arrays.toString](https://docs.oracle.com/javase/1.5.0/docs/api/java/util/Arrays.html#toString(int[]))方法（不是 varargs 方法！），专门设计用于将任何类型的数组转换为字符串。如果您使用[Arrays.toString](https://docs.oracle.com/javase/1.5.0/docs/api/java/util/Arrays.html#toString(int[]))代替[Arrays.asList](https://docs.oracle.com/javase/1.5.0/docs/api/java/util/Arrays.html#asList(T...))，程序会产生预期的结果：

```
// The right way to print an array
System.out.println(Arrays.toString(myArray)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-12T08:08:40.907

从 Java 8 开始，我认为创建新数组的最简单有效的方法是：

```
Stream.of(myArray).collect(Collectors.toList()); 
```

最好不要再使用

```
new ArrayList<>(Arrays.asList()); 
```

由于这是 2 倍的工作量，这会影响内存/性能下降

关于Arrays.asList，我想几乎所有人都已经解释清楚了。我想添加更多关于使用 Arrays.asList 的糟糕体验。这已经是很久以前的事了，所以在这一点上可能与某些部分无关。

在几年前的一个项目中，我总是使用 Arrays.asList，因为它更简单、更清晰的列表初始化。然后我所做的就是将 arrayList 传递给另一个方法，甚至是库。问题是某些库将 Arrays.ArrayList 视为 ArrayList。因此，当它尝试强制转换为 java.util.ArrayList 时会导致问题

```
List<String> arrayList = Arrays.asList(x);
ArrayList<String> arr = (ArrayList) arrayList; //this will cause error 
```

*   一些映射器（例如：dozer）无法更早地读取 Arrays.asList 的方法签名，因此映射将失败。

*   我还在某些库上发现了一些案例，当调用某些方法时它甚至会抛出 UnsupportedOperationException，我不知道为什么。

然后我们重构了所有代码以删除 Arrays.asList 并且不再使用它。

所以一次性使用，例如仅用于打印，它仍然可以接受，但最好不要使用它来传递价值/长时间使用。

# ios - 如何在 Interface Builder 中将 Subview 添加到 UIButton

> ID：13374860
> 
> 赞同：19
> 
> 时间：2012-11-14T07:52:41.270
> 
> 标签：ios, xcode, uibutton, interface-builder, subview

就像我说的，我在Interface Builder中添加了一个UIButton，我想添加一个UILabel、UIImageView作为按钮的子视图，但是我不能在IB中添加任何对象。有人知道该怎么做吗？非常感谢。

我可以使用代码来实现它，但我想在 IB 中实现它，所以我可以在任何我想要的类中使用它。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-14T08:11:40.983

我之前通过添加 UIView（而不是 UIButton）然后将 UIButton 和 UILabel 添加到 UIView 来完成此操作。UIButton 的点击仍然有效，并且您也有一个标签。你也可以像这样添加任何东西。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-08-23T21:21:27.530

我通常通过

1.  在 Interface Builder 中创建一个新的 UIView 并将其设置为您希望按钮具有的相同大小和位置
2.  将您的子视图添加到该 UIView
3.  在 Indentity Inspector 中将 UIView 的类设置为 UIButton

您的 UIView 现在的工作方式与 UIButton 完全一样

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T08:02:22.330

代替 UIButton，将 UILabel 和 UIImageView 添加到 UIView，然后向其添加点击动作。

**编辑1：**

更改突出显示的颜色效果很容易，使用以下代码：

```
- (void) onViewTap:(id)sender
{
    [UIView animateWithDuration:0.1
                          delay:0
                        options:UIViewAnimationOptionCurveEaseOut
                     animations:^{
                         _view.backgroundColor = [UIColor blueColor];
                     }

                     completion:^(BOOL finished){
                         _view.backgroundColor = [UIColor whiteColor];
                     }];

    //write tap actions below
}
- (void)viewDidLoad
{
    _view.userInteractionEnabled = YES;
    UITapGestureRecognizer* tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(onViewTap:)];
    [_view addGestureRecognizer:tap];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T08:07:25.307

制作您的 UIButton 自定义按钮，然后在其上添加 UILabel，然后您将从 UIButton 属性和操作中受益，希望这对您有所帮助

# php - 相对于另一个数组的值对数组元素进行分组

> ID：13374863
> 
> 赞同：0
> 
> 时间：2012-11-14T07:52:55.477
> 
> 标签：php, arrays, grouping

我知道这是一个简单的问题，但我没有成功找到答案，但是......

哪个是根据 PHP 中另一个数组的值对数组元素进行分组的最有效方法？

例子：

```
names = [antonio, luigi, marco, stefano, gennaro, pino, lorenzo];
surnames = [bianchi, rossi, rossi, brambilla, rossi, rossi, brambilla]; 
```

预期结果：

```
bianchi:
antonio

rossi: 
luigi, marco, gennaro, pino

brambilla:
stefano, lorenzo 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T07:58:42.527

听起来您实际上想要创建一个地图，其中地图的每个输出元素都是一个列表。尝试这样的事情：

```
<?php
function groupArrays($arrayToGroup, $arrayToGroupBy)
{
    if (count($arrayToGroup) != count($arrayToGroupBy))
        return null;

    $output = array();
    for ($i = 0; $i < count($arrayToGroupBy); $i++)
    {
        $key = $arrayToGroupBy[$i];
        $val = $arrayToGroup[$i];

        if (!isset($output[$key]))
            $output[$key] = array();

        array_push($output[$key], $val);
    }

    return $output;
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T08:15:32.033

尝试这个

```
foreach ($surnames as $key => $value) { 
  if (isset($result[$value])) { 
    if (!is_array($result[$value])) $result[$value] = (array) $result[$value]; 
    array_push($result[$value], $names[$key]);
  } 
  else 
  $result[$value]= $names[$key]; 
}
print_r($result); 
```

输出

```
Array (
    [bianchi] => antonio
    [rossi] => Array ( [0] => luigi, [1] => marco, [2] => gennaro, [3] => pino )
    [brambilla] => Array ( [0] => stefano, [1] => lorenzo )    
) 
```

否则

```
foreach ($surnames as $key => $value) { $result[$value][] = $names[$key]; } 
```

输出

```
Array (
    [bianchi] => Array ( [0] => antonio )
    [rossi] => Array ( [0] => luigi, [1] => marco, [2] => gennaro, [3] => pino )
    [brambilla] => Array ( [0] => stefano, [1] => lorenzo )    
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T08:09:03.373

我只是快速创建脚本，这是最快和可靠的方式：

```
<?php
$names = ['antonio', 'luigi', 'marco', 'stefano', 'gennaro', 'pino', 'lorenzo'];
$surnames = ['bianchi', 'rossi', 'rossi', 'brambilla', 'brambilla', 'brambilla', 'brambilla'];

$final = [];
foreach ($surnames as $index => $_sur) {
    // We don't check isset $names[$index] here
    $final[$_sur][] = $names[$index];
}

var_export($final); 
```

# facebook-javascript-sdk - 我可以通过 javascript api 从 Facebook 导入朋友的电子邮件地址或电话号码吗？

> ID：13374866
> 
> 赞同：0
> 
> 时间：2012-11-14T07:53:12.697
> 
> 标签：facebook-javascript-sdk, facebook-java-api

除了允许我的应用程序之外，它是否需要任何权限。我的代码如下..

FB.api({ 方法：'fql.query',

查询：'SELECT name,pic_square,birthday,sex,profile_url,website,email,email_hashes FROM user

WHERE uid='+friend.id },

```
 function(response) {

     alert("friends website:: "+response[0].website);

     alert("friends email :: "+response[0].email); 

     alert("friends email_hashes:: "+response[0].email_hashes[0]); 

     } } ); 
```

第一个警报返回正确的网站信息，但第二个和第三个警报是

给出 null 和 undefined/null （除了 email 一切正常，但不是 email

地址）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T09:51:43.257

不，您**无法**访问朋友的电子邮件地址——您只能在获得`email`许可的情况下获取当前应用用户的电子邮件地址。没有`friends_email`许可之类的东西。

用户电话号码再也无法通过 API 访问了**，**即使是您当前的用户也不行。如果您需要该信息，则必须让用户通过表格或其他方式自行将其提供给您。

# android - Android地图应用程序未在设备上显示任何地图

> ID：13374870
> 
> 赞同：-1
> 
> 时间：2012-11-14T07:53:31.290
> 
> 标签：android, android-mapview

这是我在指纹后得到的谷歌地图密钥`0o8CRg5BhPmqQB1pvyYZQNfJ2ZbpDMa6XFunRwA`

我把它放在`main.xml`文件里。应用程序在模拟器上运行良好并显示地图。但是当我在真实设备上部署它时，它没有显示任何地图。它只显示灰色背景而不是任何地图。我应该怎么办？

**main.xml 文件**

```
 <?xml version="1.0" encoding="utf-8"?>
<com.google.android.maps.MapView
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/mapView"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:clickable="true"
android:apiKey="0o8CRg5BhPmqQB1pvyYZQNfJ2ZbpDMa6XFunRwA"
android:enabled="true"
/> 
```

**清单文件**

```
 ?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.androidhive.googlemaps"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="8" />
 <uses-permission android:name="android.permission.INTERNET" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >

    <!--  Add Google Map Library -->
    <uses-library android:name="com.google.android.maps"   />

    <activity
        android:label="@string/app_name"
        android:name=".AndroidGoogleMapsActivity" >
        <intent-filter >
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
 </application>

 <!-- Allow to connect with internet -->

   </manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T09:13:13.177

您是否为在为设备创建 APK 文件时使用的调试证书和签名证书生成了密钥。如果您使用的是调试证书的密钥而不是生产签名证书的密钥，您将看到一个没有显示映射的灰色屏幕。

```
<com.google.android.maps.MapView 
        android:id="@+id/mapView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:enabled="true"
        android:clickable="true"
        android:apiKey="PUT-KEY-FOR-PRODUCTION-CERT-HERE"
        /> 
```

有关在此处生成调试和签名证书 api 密钥的更多信息：[https ://developers.google.com/maps/documentation/android/mapkey](https://developers.google.com/maps/documentation/android/mapkey)

# android - 如何使用android中的显示指标动态设置imageview的边距

> ID：13374871
> 
> 赞同：1
> 
> 时间：2012-11-14T07:53:35.807
> 
> 标签：android, android-layout

您好正在为所有尺寸做一个应用程序。在这里，如果在 xml 文件中获取 imageview，我将使用显示指标显示 imageview，我的代码适用于所有尺寸，但是如果我在那个时候动态地获取 imageview，同时给出边距，我会遇到异常，任何人都可以帮助我....

```
my code:

         ImageView I2=(ImageView)findViewById(R.id.caption);
                     captionbitmap=BitmapFactory.decodeStream(getResources().openRawResource(R.drawable.practise));

          captiondrwable = new BitmapDrawable(captionbitmap); 
             I2.setBackgroundDrawable(captiondrwable);
   RelativeLayout.LayoutParams layoutcap= (RelativeLayout.LayoutParams) I2.getLayoutParams();      
             layoutcap.height=(int)(50*(screenHeight/600));  
             layoutcap.width=(int)(80*(screenWidth/1024));
             layoutcap.topMargin=(int)(50*(screenHeight/600)); 
             layoutcap.leftMargin=(int)(15*(screenWidth/1024));
       // above   code working well for all sizes

            ImageView I2=new ImageView(this);

          captionbitmap=BitmapFactory.decodeStream(getResources().openRawResource(R.drawable.practise));

          captiondrwable = new BitmapDrawable(captionbitmap); 
             I2.setBackgroundDrawable(captiondrwable);
   RelativeLayout.LayoutParams layoutcap= (RelativeLayout.LayoutParams) I2.getLayoutParams();      
             layoutcap.height=(int)(50*(screenHeight/600));  
             layoutcap.width=(int)(80*(screenWidth/1024));
             layoutcap.topMargin=(int)(50*(screenHeight/600)); 
             layoutcap.leftMargin=(int)(15*(screenWidth/1024));

    // above imageview i gave dynamically that my code is not working so pls any one give me any        idea 
```

# jquery - jquery点击加载ext html

> ID：13374874
> 
> 赞同：0
> 
> 时间：2012-11-14T07:54:03.367
> 
> 标签：jquery, onload

嗨 jquery 大师我是新手，我遇到了一个非常困难的情况，你能帮我解决这个挑战吗，这对我来说非常重要，我被困在这里。这是场景：3页（索引，菜单，内容）索引包括菜单menu.php有一个链接现在我想点击这个链接并将content.php加载到index.php中的一个分区中. 那可能吗？我尝试了以下操作，但我错过了一些东西。

//这是index.php

```
<div>
<?php include 'menu.php'; ?>

 <p>load the content here:</p>
 <ol id="new-nav"></ol>
 </div>

 <script>
 $(document).ready(function(){         

 $("#test li").click(function (e) {

    // Stop the link from changing the page
    e.preventDefault();

    // Your jQuery code.

    $("#new-nav").load($(this).attr("href"));
 });

 });
 </script> 
```

//这是menu.php

```
 <div id="test">
 <li><a href="content.html">Content</a></li>
 </div> 
```

//content.html 是一个段落

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T08:04:19.490

您正在选择 li 并尝试获取它的 href 属性:-)

试试这个

```
$("#test li a:first").click(function (e) {

    // Stop the link from changing the page
    e.preventDefault();

    // Your jQuery code.

    $("#new-nav").load($(this).attr("href")); 
```

});

# jquery - 隐藏在另一个元素中的元素的实际高度

> ID：13374876
> 
> 赞同：0
> 
> 时间：2012-11-14T07:54:05.377
> 
> 标签：jquery, height, overflow, hidden

我有一个问题，但它只出现在Firefox。当我试图获取元素的高度时，它只返回元素的可见部分（在 Firefox 中，在其他浏览器中它返回整个元素高度）。

结构如下：

```
<ul class="slider">
   <li><div>//content</div></li>
   <li><div>//content</div></li>
   <li><div>//content</div></li>
   ...
</ul> 
```

我正在使用 caroufredsel 脚本进行轮播。我需要获取最高元素的高度来设置整个轮播的高度，因为当我尝试使用选项 height:"auto" 时它仍然不起作用。

所以我在问 - 如何获得由于溢出属性而部分隐藏的元素的真实高度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T07:56:54.647

尝试使用`outerHeight`而不是`height`看这个 - [http://dreamerslab.com/blog/en/get-hidden-elements-width-and-height-with-jquery/](http://dreamerslab.com/blog/en/get-hidden-elements-width-and-height-with-jquery/) - 它允许使用这样的结构：`$( '.hidden' ).actual( 'width' );`

# java - 使用 Java , Hibernate 进行数据库迁移

> ID：13374878
> 
> 赞同：0
> 
> 时间：2012-11-14T07:54:19.230
> 
> 标签：java, hibernate

我在 mysql 中有三个数据库，位于三个不同的服务器中。我想组合来自三台服务器的数据并合并为一个数据库。是否可以在 Hibernate 中执行操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T08:02:25.500

您应该使用您可以在[Toad](http://www.quest.com/toad-for-mysql/)社区版中找到的任何实用程序的导入/导出向导

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T08:08:38.603

您可以从 2 个数据库中一次读取 1 条/多条数据记录，并检查记录是否存在于第三个数据库中。如果没有，那就写吧。

根据您的内存限制，您可以尝试将主数据表作为一个集合保存在内存中，从所有 3 个数据库添加到它，并在表完成后将其写入

# java - 通过 JScrollPane 异常行为重新调度 MouseEvent

> ID：13374880
> 
> 赞同：2
> 
> 时间：2012-11-14T07:54:28.533
> 
> 标签：java, swing, mouseevent, jscrollpane, dispatchevent

我从这里修改了一些代码：[https ://stackoverflow.com/a/13357269/1360074](https://stackoverflow.com/a/13357269/1360074)

由于 JScrollPane 存在已知错误，没有将 MouseEvent 向上传递，因此我使用 FakeMouseListener 进行了解决。

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Component;
import java.awt.Container;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.LayoutManager;
import java.awt.Point;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import javax.swing.BorderFactory;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.SwingUtilities;

public class LostMouseEvent {
    private JPanel panel1;

public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {

        @Override
        public void run() {
    new LostMouseEvent();
        }
    });
}

public LostMouseEvent() {
    EventQueue.invokeLater(new Runnable() {
        @Override
        public void run() {
            JFrame frame = new JFrame();
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            frame.setLayout(new BorderLayout());

           panel1 = new JPanel() {
                @Override
                public Dimension getPreferredSize() {
                    return new Dimension(600, 400);
                }

            };
            JPanel panel2 = new JPanel() {
                @Override
                public Dimension getPreferredSize() {
                    return new Dimension(500, 300);
                }
            };
            JScrollPane pane = new JScrollPane(panel2);

            panel1.setBorder(BorderFactory.createLineBorder(Color.blue));
            panel2.setBorder(BorderFactory.createLineBorder(Color.green));

            panel1.setLayout(new CircleLayout());

            panel1.add(pane);
            frame.add(panel1);

            MouseListener rml = new RealMouseListener();
            panel1.addMouseListener(rml);

            MouseListener fml = new FakeMouseListener();
            pane.addMouseListener(fml);

            frame.pack();
            frame.setVisible(true);

        }
    });
}

private class RealMouseListener extends MouseAdapter {
    @Override
    public void mousePressed(MouseEvent me) {
        System.out.println(me);

        Point point = me.getPoint();

        System.out.println(panel1.getComponentAt(point));
        System.out.println(panel1.getComponent(0));
    }
}

private class FakeMouseListener extends MouseAdapter {
     @Override
     public void mousePressed(MouseEvent me) {
         panel1.dispatchEvent(me);
     }
}
} 
```

现在，如果单击边框旁边左侧的绿色边框内，我会得到：

```
java.awt.event.MouseEvent[MOUSE_PRESSED,(9,169),absolute(66,248),button=1,modifiers=Button1,extModifiers=Button1,clickCount=1] on javax.swing.JScrollPane[,49
LostMouseEvent$2$1[,0,0,600x400,layout=CircleLayout,alignmentX=0.0,alignmentY=0.0,border=javax.swing.border.LineBorder@633d51
javax.swing.JScrollPane[,49,49,503x303,layout=javax.swing.ScrollPaneLayout$UIResource,alignmentX=0.0,alignmentY=0.0, 
```

如果我点击中间，我会得到：

```
java.awt.event.MouseEvent[MOUSE_PRESSED,(247,147),absolute(304,226),button=1,modifiers=Button1,extModifiers=Button1,clickCount=1] on javax.swing.JScrollPane[,
    javax.swing.JScrollPane[,49,49,503x303,layout=javax.swing.ScrollPaneLayout$UIResource,alignmentX=0.0,alignmentY=0.0,border=javax.swing.plaf.metal.
    javax.swing.JScrollPane[,49,49,503x303,layout=javax.swing.ScrollPaneLayout$UIResource,alignmentX=0.0,alignmentY=0.0,border=javax.swing.plaf.metal. 
```

**这是为什么？重新派送时是否需要修改 MouseEvent 的坐标？**

CircleLayout 的代码是

```
 import java.awt.Component;
    import java.awt.Container;
    import java.awt.Dimension;
    import java.awt.LayoutManager;

    public class CircleLayout implements LayoutManager {
        private int heightGap;

    public CircleLayout () {
        heightGap = 0;
    }

    public CircleLayout (int heightGap) {
        this.heightGap = heightGap;
    }

    /**
    * Arranges the parent's Component objects in either an Ellipse or a Circle.
    * Ellipse is not yet implemented.
    */
    public void layoutContainer (Container parent) {
        int x, y, w, h, s, c;
        int childCompNum = parent.getComponentCount();

        int parentWidth = (int)parent.getSize().width;
        int parentHeight = (int)parent.getSize().height;

        int centerX = (int) (parentWidth / 2);
        int centerY = (int) (parentHeight / 2);

        double angleOffset = 0.5 * Math.PI;

        Component childComp = null;
        for (int i = 0; i < childCompNum; i++) {
            childComp = parent.getComponent(i);
            w = childComp.getPreferredSize().width;
            h = childComp.getPreferredSize().height;

            if (childCompNum == 1) {
                x = centerX - (int)w / 2;
                y = centerY - (int)h / 2;
            } else {
                c = (int) (centerX * Math.cos((2 * i * Math.PI + angleOffset) / childCompNum));
                s = (int) (centerY * Math.sin((2 * i * Math.PI + angleOffset) / childCompNum));

                x = c + centerX - (int)w / 2;
                y = s + centerY - (int)h / 2;

                if (x + w  > parentWidth) {x = (int)(parentWidth - w); }
                if (y + h + heightGap > parentHeight) {y = (int)(parentHeight - h -heightGap); }
                if (x < 0) {x = 0; }
                if (y < 0) {y = 0; }
            }

            childComp.setBounds(x, y, w, h);
        }
    }

    /** For compatibility with LayoutManager interface */
    public void addLayoutComponent (String name, Component comp) {}

    public Dimension preferredLayoutSize(Container target) {
        return target.getSize();
    }

    public Dimension minimumLayoutSize(Container target) {
        return target.getSize();
    }

    public void removeLayoutComponent(Component comp) {}
} 
```

**UPD：**我已将 FakeMouseListener 修改为

```
 public void mousePressed(MouseEvent me) {
         JScrollPane pane = (JScrollPane)me.getSource();
         MouseEvent newMe = SwingUtilities.convertMouseEvent(pane, me, pane.getViewport());
         panel1.dispatchEvent(me);
     } 
```

但有相同的行为。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T13:09:25.420

代码

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Point;
import java.awt.Rectangle;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import javax.swing.BorderFactory;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.SwingUtilities;

public class LostMouseEvent {

    private JPanel panel1;
    private JPanel panel2 = new JPanel();

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                LostMouseEvent lostMouseEvent = new LostMouseEvent();
            }
        });
    }

    public LostMouseEvent() {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                panel1 = new JPanel() {

                    private static final long serialVersionUID = 1L;

                    @Override
                    public Dimension getPreferredSize() {
                        return new Dimension(600, 400);
                    }
                };
                panel2 = new JPanel() {

                    private static final long serialVersionUID = 1L;

                    @Override
                    public Dimension getPreferredSize() {
                        return new Dimension(500, 300);
                    }
                };
                JScrollPane pane = new JScrollPane(panel2);
                panel1.setBorder(BorderFactory.createLineBorder(Color.blue));
                panel2.setBorder(BorderFactory.createLineBorder(Color.green));
                panel1.setLayout(new CircleLayout());
                panel1.add(pane);
                frame.add(panel1);
                MouseListener rml = new RealMouseListener();
                panel1.addMouseListener(rml);
                MouseListener fml = new FakeMouseListener();
                panel2.addMouseListener(fml);
                frame.pack();
                frame.setVisible(true);
            }
        });
    }

    private class RealMouseListener extends MouseAdapter {

        @Override
        public void mousePressed(MouseEvent me) {
            Rectangle rec = SwingUtilities.convertRectangle(panel2, panel2.getVisibleRect(), panel1);
            System.out.println(me);
            Point point = me.getPoint();
            System.out.println(panel1.getComponentAt(point));
            System.out.println(panel1.getComponent(0));
        }
    }

    private class FakeMouseListener extends MouseAdapter {

        @Override
        public void mousePressed(MouseEvent me) {
            JScrollPane pane = (JScrollPane) me.getSource();
            MouseEvent newMe = SwingUtilities.convertMouseEvent(pane, me, pane.getViewport());
            panel1.dispatchEvent(me);
        }
    }
} 
```

返回

> ```
>  Exception in thread "AWT-EventQueue-0" java.lang.ClassCastException:  AAA_Format.LostMouseEvent$2$2 cannot be 
> ```
> 
> 在 javax.swing.JComponent.processMouseEvent(JComponent.java: 3267) 在 java.awt.Component.processEvent(Component.java:6032) 在 java.awt.Container.processEvent(Container.java:2041) 在 java.awt.Component.dispatchEventImpl(Component.java:4630) 在 java. awt.Container.dispatchEventImpl(Container.java:2099) 在 java.awt.Component.dispatchEvent(Component.java:4460) 在 java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4577) 在 java.awt.LightweightDispatcher.processMouseEvent (Container.java:4235) 在 java.awt.LightweightDispatcher.dispatchEvent(Container.java:4168) 在 java.awt.Container.dispatchEventImpl(Container.java:2085) 在 java.awt.Window.dispatchEventImpl(Window.java:2478) 在 java.awt.Component.dispatchEvent(Component.java:4460) 在 java. awt.EventQueue.dispatchEvent(EventQueue.java:599) at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269) at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184) at java.awt.EventDispatchThread.pumpEventsForHierarchy (EventDispatchThread.java:174) 在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169) 在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161) 在 java.awt.EventDispatchThread.run(EventDispatchThread.java: 122)java:2085) 在 java.awt.Window.dispatchEventImpl(Window.java:2478) 在 java.awt.Component.dispatchEvent(Component.java:4460) 在 java.awt.EventQueue.dispatchEvent(EventQueue.java:599) 在java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269) 在 java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184) 在 java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174) 在 java.awt.EventDispatchThread .pumpEvents(EventDispatchThread.java:169) 在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161) 在 java.awt.EventDispatchThread.run(EventDispatchThread.java:122)java:2085) 在 java.awt.Window.dispatchEventImpl(Window.java:2478) 在 java.awt.Component.dispatchEvent(Component.java:4460) 在 java.awt.EventQueue.dispatchEvent(EventQueue.java:599) 在java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269) 在 java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184) 在 java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174) 在 java.awt.EventDispatchThread .pumpEvents(EventDispatchThread.java:169) 在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161) 在 java.awt.EventDispatchThread.run(EventDispatchThread.java:122)dispatchEvent(Component.java:4460) at java.awt.EventQueue.dispatchEvent(EventQueue.java:599) at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269) at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java :184) 在 java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174) 在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169) 在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161) 在 java .awt.EventDispatchThread.run(EventDispatchThread.java:122)dispatchEvent(Component.java:4460) at java.awt.EventQueue.dispatchEvent(EventQueue.java:599) at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269) at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java :184) 在 java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174) 在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169) 在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161) 在 java .awt.EventDispatchThread.run(EventDispatchThread.java:122)pumpEventsForFilter(EventDispatchThread.java:184) at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174) at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169) at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java :161) 在 java.awt.EventDispatchThread.run(EventDispatchThread.java:122)pumpEventsForFilter(EventDispatchThread.java:184) at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174) at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169) at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java :161) 在 java.awt.EventDispatchThread.run(EventDispatchThread.java:122)

编辑

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Point;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import javax.swing.BorderFactory;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.SwingUtilities;

public class LostMouseEvent {

    private JPanel panel1;

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new LostMouseEvent();
            }
        });
    }

    public LostMouseEvent() {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                panel1 = new JPanel() {
                    private static final long serialVersionUID = 1L;

                    @Override
                    public Dimension getPreferredSize() {
                        return new Dimension(600, 400);
                    }
                };
                JPanel panel2 = new JPanel() {
                    private static final long serialVersionUID = 1L;

                    @Override
                    public Dimension getPreferredSize() {
                        return new Dimension(500, 300);
                    }
                };
                JScrollPane pane = new JScrollPane(panel2);
                panel1.setBorder(BorderFactory.createLineBorder(Color.blue));
                panel2.setBorder(BorderFactory.createLineBorder(Color.green));
                panel1.setLayout(new CircleLayout());
                panel1.add(pane);
                frame.add(panel1);
                MouseListener rml = new RealMouseListener();
                panel1.addMouseListener(rml);
                MouseListener fml = new FakeMouseListener();
                pane.addMouseListener(fml);
                frame.pack();
                frame.setVisible(true);

            }
        });
    }

    private class RealMouseListener extends MouseAdapter {

        @Override
        public void mousePressed(MouseEvent me) {
            System.out.println(me);
            Point point = me.getPoint();
            System.out.println(me.getX());
            System.out.println(me.getXOnScreen());
            System.out.println(me.getY());
            System.out.println(me.getYOnScreen());
        }
    }

    private class FakeMouseListener extends MouseAdapter {

        @Override
        public void mousePressed(MouseEvent me) {
            JScrollPane pane = (JScrollPane) me.getSource();
            MouseEvent newMe = SwingUtilities.convertMouseEvent(pane.getViewport(), me, panel1);
            System.out.println(newMe.getX());
            System.out.println(newMe.getXOnScreen());
            System.out.println(newMe.getY());
            System.out.println(newMe.getYOnScreen());
            panel1.dispatchEvent(me);
        }
    }
} 
```

编辑 2

更合乎逻辑的可以在 FakeMouseListener 中替换，来自

```
JScrollPane pane = (JScrollPane) me.getSource(); 
MouseEvent newMe = SwingUtilities.convertMouseEvent(pane.getViewport(), me, panel1); 
```

到

```
JPanel panel2 = (JPanel) me.getSource(); 
MouseEvent newMe = SwingUtilities.convertMouseEvent(panel2, me, panel1); 
```

# php - 在 Woocommerce 中获取自定义产品属性

> ID：13374883
> 
> 赞同：94
> 
> 时间：2012-11-14T07:55:14.453
> 
> 标签：php, wordpress, woocommerce, product, custom-taxonomy

在 Woocommerce 中，我试图获取产品自定义属性值，但我失败得很惨，我什么也没得到。

所以我尝试了：

```
global $woocommerce, $post, $product;
$res = get_post_meta($product->id);
print_r(unserialize($res['_product_attributes'][0])); 
```

我得到了这个原始数据：

```
[pa_koostis] => Array
        (
            [name] => pa_koostis
            [value] => 
            [position] => 0
            [is_visible] => 1
            [is_variation] => 0
            [is_taxonomy] => 1
        ) 
```

我知道有一个值，因为它显示在属性部分，但我只是找不到一种方法来使用我的自定义代码显示它。

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2012-11-19T13:28:01.897

> **已编辑**：**自 Woocommerce 版本 3 以来**`woocommerce_get_product_terms`已弃用

 **正如[@datafeedr](https://stackoverflow.com/users/3352303/datafeedr)[在他的回答中](https://stackoverflow.com/a/22021045/3730754)所写的那样：

```
global $product;
$koostis = array_shift( wc_get_product_terms( $product->id, 'pa_koostis', array( 'fields' => 'names' ) ) ); 
```

甚至更紧凑：

```
global $product;
$koostis = $product->get_attribute( 'pa_koostis' ); 
```

* * *

原答案：

```
$result = array_shift(woocommerce_get_product_terms($product->id, 'pa_koostis', 'names')); 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2016-04-29T06:54:52.973

2018 年更新。您可以使用：

```
global $product;
echo wc_display_product_attributes( $product ); 
```

要自定义输出，复制`plugins/woocommerce/templates/single-product/product-attributes.php`并`themes/theme-child/woocommerce/single-product/product-attributes.php`修改它。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2014-09-21T15:20:32.070

2014 年 9 月：

```
$product->get_attribute( 'your_attr' ); 
```

您需要定义`$product`它是否不在页面上。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2012-11-14T13:15:07.600

您可以使用以下代码获取属性的单个值：

```
$pa_koostis_value = get_post_meta($product->id, 'pa_koostis', true); 
```

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2014-02-25T16:58:44.040

`woocommerce_get_product_terms()`现在（2014 年）已弃用。

改为使用`wc_get_product_terms()`。

例子：

```
global $product;
$koostis = array_shift( wc_get_product_terms( $product->id, 'pa_koostis', array( 'fields' => 'names' ) ) ); 
```

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2015-07-16T10:32:24.637

试试这个来获得一个属性名称=>属性值的数组：

```
global $product;

$formatted_attributes = array();

$attributes = $product->get_attributes();

foreach($attributes as $attr=>$attr_deets){

    $attribute_label = wc_attribute_label($attr);

    if ( isset( $attributes[ $attr ] ) || isset( $attributes[ 'pa_' . $attr ] ) ) {

        $attribute = isset( $attributes[ $attr ] ) ? $attributes[ $attr ] : $attributes[ 'pa_' . $attr ];

        if ( $attribute['is_taxonomy'] ) {

            $formatted_attributes[$attribute_label] = implode( ', ', wc_get_product_terms( $product->id, $attribute['name'], array( 'fields' => 'names' ) ) );

        } else {

            $formatted_attributes[$attribute_label] = $attribute['value'];
        }

    }
}

//print_r($formatted_attributes);

return $formatted_attributes; 
```

这有点低效，但可以解决问题。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2020-06-26T11:08:17.393

尽管@airdrumz 解决方案有效，但直接访问 ID 会导致很多错误，这不利于未来的兼容性。

但它引导我检查对象并创建这种 OOP 方法：

```
function myplug_get_prod_attrs() {
    // Enqueue scripts happens very early, global $product has not been created yet, neither has the post/loop
    global $product;
    $wc_attr_objs = $product->get_attributes();
    $prod_attrs = [];
    foreach ($wc_attr_objs as $wc_attr => $wc_term_objs) {
        $prod_attrs[$wc_attr] = [];
        $wc_terms = $wc_term_objs->get_terms();
        foreach ($wc_terms as $wc_term) {
            array_push($prod_attrs[$wc_attr], $wc_term->slug);
        }
    }
    return $prod_attrs;
} 
```

奖励，如果您在创建全局 $product 项目之前执行上述操作（例如在入队脚本期间），您可以自己制作：

```
 $product = wc_get_product(get_queried_object_id()); 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-11-27T12:31:20.917

“有什么想法可以同时获取所有属性吗？” 问题只是调用只有产品 id 的函数：

```
$array=get_post_meta($product->id); 
```

键是可选的，请参阅[http://codex.wordpress.org/Function_Reference/get_post_meta](http://codex.wordpress.org/Function_Reference/get_post_meta)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-08-21T06:15:12.250

使用下面的代码获取所有属性的详细信息

```
 global $wpdb;

    $attribute_taxonomies = $wpdb->get_results( "SELECT * FROM " . $wpdb->prefix . "woocommerce_attribute_taxonomies WHERE attribute_name != '' ORDER BY attribute_name ASC;" );
    set_transient( 'wc_attribute_taxonomies', $attribute_taxonomies );

    $attribute_taxonomies = array_filter( $attribute_taxonomies  ) ;

    prin_r($attribute_taxonomies); 
```**

# java - 在 JBoss AS7 上使用 web.xml 优雅地处理 NullPointerException

> ID：13374884
> 
> 赞同：3
> 
> 时间：2012-11-14T07:55:32.183
> 
> 标签：java, jsf, jboss, web.xml

我尝试使用 web.xml 中的以下代码段处理所有异常

```
<error-page>
  <exception-type>java.lang.Exception</exception-type>
  <location>/error.xhtml</location>
</error-page> 
```

但是，当 a`NullPointerException`发生时，它仍然会显示带有堆栈跟踪的默认 JBoss 错误页面。如何优雅地处理 NullpointerException？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T08:11:13.630

扩展`ExceptionHandlerFactory`和`ExceptionHandlerWrapper`在两个单独的类中。

**（MyExceptionHandlerFactory 和 MyExceptionHandlerWrapper）**

像这样注册您的自定义子类。

```
<factory>
    <exception-handler-factory>
        com.sample.exceptions.MyExceptionHandlerFactory
    </exception-handler-factory>
</factory> 
```

现在您可以在 MyExceptionHandlerWrapper 类的处理方法中处理每个异常。

这是来自 JSF Lead 本人的教程。

[优雅地处理 ViewExpiredException JSF2](http://weblogs.java.net/blog/edburns/archive/2009/09/03/dealing-gracefully-viewexpiredexception-jsf2)

# iphone - shouldAutorotateToInterfaceOrientation 不起作用

> ID：13374888
> 
> 赞同：0
> 
> 时间：2012-11-14T07:56:27.143
> 
> 标签：iphone, orientation

> **可能重复：**
> [从横向到纵向的问题 pushViewController](https://stackoverflow.com/questions/4822372/problem-pushviewcontroller-from-landscape-to-portrait)

在我的应用中，一些视图控制器支持横向和纵向，而一些只支持纵向。

我有 3 个视图控制器**FirstVC**、**SecondVC**和**ThirdVC**。我想 ：

*   **FirstVC**和**ThirdVC**支持横向和纵向
*   **SecondVC**应该只支持纵向。

为此，我：

*   `shouldAutorotateToInterfaceOrientation`在所有视图控制器中覆盖
*   返回**SecondVC**`UIInterfaceOrientationIsPortrait(interfaceOrientation);` _
***   在其他两个中返回 YES。**

 **当我从**FirstVC （横向模式）推动****SecondVC**时，我的 SecondView 没有转换为纵向，它仍然是横向的。但是当我将SecondVC旋转为纵向时，它会相应地旋转，并且在我旋转时会再次旋转，这次它保持在纵向并不会变为横向。

 **我希望我很清楚。

请问有人知道我在哪里做错了吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T08:18:07.350

看看这篇文章[从横向到纵向的问题 pushViewController](https://stackoverflow.com/questions/4822372/problem-pushviewcontroller-from-landscape-to-portrait)

你必须展示 VC Modally。****

# c# - 在c#的目录中以相同的顺序读取文本文件路径

> ID：13374889
> 
> 赞同：-1
> 
> 时间：2012-11-14T07:56:32.783
> 
> 标签：c#, c#-4.0

我有一个目录中的文本文件。文本文件在该目录中按名称排序。我想将那些具有相同顺序（按名称）的文本文件的路径读入数组。我正在使用以下代码：

```
string[] textpaths = Directory.GetFiles(filepath + "\\source", "*",    
SearchOption.AllDirectories); 
```

但是我得到的路径数组没有相同的目录顺序。有人可以帮忙吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T07:59:41.793

然后订购它们，有什么大不了的？

```
string[] textpaths = Directory.GetFiles(
    filepath + "\\source", 
    "*", 
    SearchOption.AllDirectories
    ).OrderBy(x => x.Name).ToArray(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T08:00:05.293

只需对结果数组进行排序：

```
IEnumerable<string> textpaths = Directory.GetFiles(
    Path.Combine(filepath, "source"), 
    "*",    
    SearchOption.AllDirectories
    ).OrderBy(f=>f); 
```

您也可以使用此语法，具体取决于您的个人喜好：

```
var textPaths = from file in Directory.GetFiles(Path.Combine(filepath, "source"), "*",  SearchOption.AllDirectories)
                order by file
                select file; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T08:07:46.170

您始终可以按顺序使用简单的 linq 查询对文件进行排序。

```
string[] textpaths = Directory.GetFiles(filepath + "\\source", "*",    
SearchOption.AllDirectories).OrderBy(x=>x).ToArray(); 
```

或者，您可以[DiretoryInfo.GetFiles](http://msdn.microsoft.com/en-us/library/ms143327.aspx)使用其他属性对其进行排序。

```
// Sort by full name  
string[] textpaths = new DirectoryInfo("c:\\test").GetFiles("*",    
SearchOption.AllDirectories).OrderBy(x=>x.FullName).Select(x=>x.FullName).ToArray();  

// Sort by creation time  
string[] textpaths = new DirectoryInfo("c:\\test").GetFiles("*",    
SearchOption.AllDirectories).OrderBy(x=>x.CreationTime).Select(x=>x.FullName).ToArray(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T08:00:21.587

.Net 不使用您在文件管理器中应用的排序。但是您可以手动订购文件：

```
IEnumerable<string> orderedPaths = textpaths.OrderBy(path => path); 
```

或在单个查询中：

```
IEnumerable<string> orderedPaths = 
   Directory.GetFiles(filepath + "\\source", "*", SearchOption.AllDirectories)
            .OrderBy(path => path); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T08:00:40.290

之后使用 linq 对数组进行排序

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-14T08:01:59.543

尝试

```
string[] textpaths = DirectoryInfo.GetFiles(filepath + "\\source", "*",SearchOption.AllDirectories);  
Array.Sort(textpaths , delegate(FileInfo f1, FileInfo f2) {
return f1.Name.CompareTo(f2.Name);
}); 
```

# jquery - getJSON 帮助 jQuery

> ID：13374896
> 
> 赞同：0
> 
> 时间：2012-11-14T07:57:24.233
> 
> 标签：jquery, json

所以我知道这段代码有效

```
$.getJSON('data/book.json', function(jd) {

         $('#stage').html('<p> id: ' + jd.data.productTypeList[0].id + '</p>');
         $('#stage').append('<p>name : ' + jd.data.productTypeList[0].name+ '</p>');
         $('#stage').append('<p> longName: ' + jd.data.productTypeList[0].longName+ '</p>');

}); 
```

问题是我正在尝试将其更新到此处并出现错误

```
var jqxhr = $.getJSON("data/book.json")
          .success(function(data, status, xhr) { 
            $.each(data, function(i,item){
              //create book for each item and then insert into the collection
              tmpItem=new Book({id:item.data.productTypeList[0].id,category:item.data.productTypeList[0].name,name:item.data.productTypeList[0].longName});
              self.add(tmpItem);
            });
            //dispatch customized event
            self.trigger("fetchCompleted:Books");
          })
          .error(function() { alert("error"); })
          .complete(function() {
                console.log("fetch complete + " + this);
          });
      } 
```

但我无法让它工作并不断收到 item.data 的错误未定义。

一旦我排序后，我计划将 0 更改为 i an，以便它将获取数组中的所有结果

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T08:03:58.770

你`$.each`错了。

1.  你们每个人都处理数据，而不是数据中的项目。
2.  您在 each 中再次询问“项目”，这是不可用的。

试试这个：

```
$.each(data.productTypeList, function(i, productType){
    // Use "productType" here, example:
    // new Book( { id: productType.id } )
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T08:04:05.247

在您喜欢的浏览器控制台中，在包含 item.data 的行上设置断点。

在那里，查看数据、i 和项目变量，并确保它们包含您期望的内容。

确定哪里出了问题并在那时修复它应该很容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T08:04:15.277

试试这个：

```
if (!('productTypeList' in data)) {
    //catch illegal response 
}
$.each(data.productTypeList, function(i,item){
    //create book for each item and then insert into the collection
    tmpItem=new Book({id:item[i].id,category:item[i].name,name:item[i].longName});
    self.add(tmpItem);
}); 
```

# android - 从 JSON 中获取一些数据

> ID：13374898
> 
> 赞同：0
> 
> 时间：2012-11-14T07:57:30.620
> 
> 标签：android, json

我需要一些帮助`JSON`。我得到`JSON`如下：

```
{
    "1": {
    "id": "1",
    "position": "1",
    "Category": {
        "id": "1",
        "position": "1",
        "created_at": "2012-10-24 15:42:47",
        "updated_at": "2012-11-13 13:46:25",
        "name": "ABCD"
                }
          }
 } 
```

我想从 field 获取所有数据**`Category`**。

我尝试这种方式：

```
JSONObject categoryObject = json.getJSONObject("Category"); 
```

但我得到错误：

**`no value for Category. How I can get data for Category field?`**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T08:00:39.497

```
JSONObject categoryObject = json.getJSONObject("1").getJSONObject("Category");  
categoryObject.get("id"); // return 1  
categoryObject.get("position"); // return 1   
categoryObject.get("name"); // return "ABCD" 
```

ETC

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T08:00:40.217

你应该做以下事情。

JSONObject json1 = json.getJSONObject("1");

JSONObject categoryObject = json1.getJSONObject("Category");

您可以在[网站上查看层次结构](http://json.parser.online.fr/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T08:10:53.383

```
try {
        String jsonString="{\"1\":{\"id\":\"1\",\"position\":\"1\",\"Category\":{\"id\":\"1\",\"position\":\"1\",\"created_at\":\"2012-10-24 15:42:47\",\"updated_at\":\"2012-11-13 13:46:25\",\"name\":\"ABCD\"}}}";
        JSONObject jsonObject=new JSONObject(jsonString);
        JSONObject jsonObject1= jsonObject.getJSONObject("1");

        String id=jsonObject1.getString("id");
        String position =jsonObject1.getString("position");

        JSONObject jsonObjectCategory= jsonObject1.getJSONObject("Category");

        String idCategory=jsonObjectCategory.getString("id");
        String positionCategory=jsonObjectCategory.getString("position");
        String createdAt=jsonObjectCategory.getString("created_at");
        String updatedAt=jsonObjectCategory.getString("updated_at");
        String name=jsonObjectCategory.getString("name");

        Log.e(getClass().getSimpleName(), "name="+name +"; created_at= "+createdAt);
    } catch (JSONException e) {
        e.printStackTrace();
    } 
```

# node.js - socket.io 不在 Azure 模拟器中运行

> ID：13374901
> 
> 赞同：0
> 
> 时间：2012-11-14T07:57:42.763
> 
> 标签：node.js, azure, socket.io

我尝试使用 Node.js 创建一个 Azure WorkerRole。这项工作没有任何问题。如果我添加 socket.io，如果我在模拟器中运行，Node.js 服务器不会启动。如果我用我的应用程序 JavaScript 文件启动 node.exe，它就可以工作。

首先我想，我没有复制 socket.io 模块，所以在 Emulator Node.js 中无法加载 socket.io 模块。但是我全部复制，如果缺少模块，显示的错误消息不是那个。

控制台上的错误消息如下所示：

```
...\node_modules\socket.io\lib\Manager.js:104
Server.on<'error', function(err) {
TypeError: Object 12345 has no method 'on' 
```

我的 Node.js 代码：

```
var port = process.env.port || 12345;
var io = require('socket.io').listen(port);
// start socket
io.sockets.on('connection', function (socket) {
    socket.emit('news', { hello: 'world' });

    // create new push session
    socket.on('cid', function (cid) {
        console.log(cid);
    });
});
console.log("Server running at port %d", port); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T08:39:28.093

使用`var port = parseInt(process.env.port) || 12345`. 根据[代码](https://github.com/LearnBoost/socket.io/blob/master/lib/socket.io.js)，第一个参数 to`listen`仅在其类型为时才被视为端口`number`，但您从环境中得到的是`string`.

# java - 将 Apache Shiro 安全库与基于 Dropwizard 的 JAX-RS 应用程序集成

> ID：13374919
> 
> 赞同：4
> 
> 时间：2012-11-14T07:59:48.610
> 
> 标签：java, rest, jax-rs, shiro, dropwizard

我正在尝试更改 Dropwizard 以支持 Shiro。

我已经阅读了文档并且有点困惑。我想将 Shiro 与表单登录身份验证和 Apache Shiro Annotations 结合使用。我认为我需要使用 Jersey Filters 来支持 Shiro。

这是在泽西岛支持 Shiro 注释而不是经典的 Shiro 过滤器方法的正确方法吗？

由于 Jersey 过滤器可以很好地访问带有注释的资源，因此使用注释对我来说似乎是完美的。

我宁愿不使用 AOP 方法，而且将 JAX-RS 与 JAX-RS 作为一个单独的模块进行动态集成可能真的很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-10T09:31:37.623

有人已经为您的要求创建了解决方案。

Shiro 与泽西岛。

[https://github.com/javajack/shiro-jersey](https://github.com/javajack/shiro-jersey)

用于 Dropwizard 的 Shiro [https://github.com/javajack/shiro-jdbi-realm](https://github.com/javajack/shiro-jdbi-realm)

Dropwizard Shiro Budle 示例 [https://github.com/javajack/dw-shiro-bundle](https://github.com/javajack/dw-shiro-bundle)

# android - 创建类对象时出错

> ID：13374921
> 
> 赞同：1
> 
> 时间：2012-11-14T07:59:49.933
> 
> 标签：android

我有我的 Spinner，它是 SpinnerAdapter 类的一个对象。我尝试创建对象但有一个错误我尝试解决它但我不能。

这是发生错误的图片：

![在此处输入图像描述](../Images/5f8d4338db227334dc91db8c3ce91d20.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T08:15:43.300

要么删除 import `android.widget.SpinnerAdapter`，要么将你的 Classname 更改为类似的东西`CustomAdapter`（你会看到实例化的对象将只是一个接口（应该是你的具体类），所以也要改变它）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T08:07:12.070

您的代码无法编译只是因为`SpinnerAdapter`它是一个接口，而且如您所知，您不能实例化一个接口。您应该使用实现`SpinnerAdapter`. [您可以在文档](http://developer.android.com/reference/android/widget/SpinnerAdapter.html)中找到更多信息。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T08:11:22.730

您的代码与标准 Android 接口[SpinnerAdapter](http://developer.android.com/reference/android/widget/SpinnerAdapter.html)存在命名冲突。为确保`SpinnerAdapter`使用您自己的类，请确保在其前面加上完整的包名称。摆脱`android.widget.SpinnerAdapter`进口也应该有效。

为避免任何和所有混淆，您可能只想更改您自己的适配器的名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T08:16:44.480

```
import android.widget.AdapterView.OnItemSelectedListener; 
```

请检查上面的导入。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T08:20:13.100

一个可以节省您时间的快捷方式：`CTRL + SHIFT + O`在 Eclipse 中（将在编辑器中组织当前文件的导入）。试试看，看看你的代码中还有什么需要修复的。

我喜欢的一个组合，而不是保存（当你习惯了它时打字真的很快）：

*   `CTRL + SHIFT + O`: 组织导入
*   `CTRL + SHIFT + F`: 格式代码
*   `CTRL + SHIFT + S`: 保存所有打开的文件

# android - 无法在我的 Android 应用中集成 AdMob 广告

> ID：13374924
> 
> 赞同：1
> 
> 时间：2012-11-14T07:59:55.730
> 
> 标签：android, admob

我一直按照 AdMob 网站（此处：https://developers.google.com/mobile-ads-sdk/docs/?hl=en）的说明进行操作，但仍然无法让广告正常工作，但似乎没有什么问题。

这是我的布局：

```
<RelativeLayout 
xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
android:orientation="vertical" 
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:soundEffectsEnabled="true"
android:id="@+id/mainLayout"
android:background="@drawable/bg_maple"
>
[...]

<com.google.ads.AdView android:id="@+id/adView"
                     android:layout_width="fill_parent"
                     android:layout_height="wrap_content"
                     android:layout_alignParentBottom="true"
                     ads:adUnitId="my real unit id from admob"
                     ads:adSize="BANNER"
                     ads:testDevices="TEST_EMULATOR, my real device id"
                     ads:loadAdOnCreate="true"/>
[...] 
```

在我的活动中：

```
public class Banner extends Activity {
      private AdView adView;

      @Override
      public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        // Create the adView
        adView = new AdView(this, AdSize.BANNER, "my real unit id from admob");

        // Lookup your LinearLayout assuming it's been given
        // the attribute android:id="@+id/mainLayout"
        RelativeLayout layout = (RelativeLayout)findViewById(R.id.mainLayout);

        // Add the adView to it
        layout.addView(adView);

        // Initiate a generic request to load it with an ad
        adView.loadAd(new AdRequest());

        AdRequest adRequest = new AdRequest();
        adRequest.addTestDevice(AdRequest.TEST_EMULATOR);
        adRequest.addTestDevice("Here I have my device ID");
      }

      @Override
      public void onDestroy() {
        if (adView != null) {
          adView.destroy();
        }
        super.onDestroy();
      }
    } 
```

感谢您提供任何帮助，我被卡住了，目前似乎无法看到问题所在。

注意：我的单位 ID 和设备 ID 都正确添加到代码中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T08:18:25.507

您正在使用两个单独的 AdView，第一个来自您的 xml，第二个来自代码。请尝试更改您的代码

```
public class Banner extends Activity {
      private AdView adView;

      @Override
      public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        // Create the adView
          adView = (AdView)this.findViewById(R.id.adView);

        // Lookup your LinearLayout assuming it's been given
        // the attribute android:id="@+id/mainLayout"
       // RelativeLayout layout = (RelativeLayout)findViewById(R.id.mainLayout);

        // Add the adView to it
        //layout.addView(adView);

        // Initiate a generic request to load it with an ad
        adView.loadAd(new AdRequest());

        AdRequest adRequest = new AdRequest();
        adRequest.addTestDevice(AdRequest.TEST_EMULATOR);
        adRequest.addTestDevice("Here I have my device ID");

      }

      @Override
      public void onDestroy() {
        if (adView != null) {
          adView.destroy();
        }
        super.onDestroy();
      }
    } 
```

# c# - 如何将构造函数注入与抽象类一起使用？

> ID：13374925
> 
> 赞同：1
> 
> 时间：2012-11-14T08:00:00.130
> 
> 标签：c#, .net, oop, design-patterns, dependency-injection

我一直在尝试学习依赖注入，但运行代码时出现 2 个错误：

1.  `DependencyInjection.Message.Sms()`必须声明一个主体，因为它没有标记为抽象、外部或部分。
2.  无法将类型隐式转换`DependencyInjection.IInterface`为 `DependencyInjection.MyClass`. 存在显式转换（您是否缺少演员表？）

下面的代码对 DI 来说是一个好的设计吗？

```
namespace DependencyInjection
{
    public interface IInterface
    {

    }

    public abstract class Message
    {
        public virtual void Sms();
    }

    public class MyClass : Message, IInterface
    {
        public override void Sms()
        {
            Console.WriteLine("Sms gönder.");
        }
    }

    public class ClassManager
    {
        private IInterface _myinterface;

        public MyClass Xyz
        {
            get { return _myinterface; }
            set { _myinterface = value; }
        }

        public ClassManager(IInterface myinterface)
        {
            _myinterface = myinterface;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T08:07:21.693

> 1) DependencyInjection.Message.Sms()' 必须声明一个主体，因为它没有标记为抽象、外部或部分

`abstract`在方法声明中添加关键字（并删除虚拟）：

```
public abstract void Sms(); 
```

> 2) 无法将类型“DependencyInjection.IInterface”隐式转换为“DependencyInjection.MyClass”。存在显式转换（您是否缺少演员表？）

```
private IInterface _myinterface;
public MyClass Xyz
{
    get { return _myinterface; }
    set { _myinterface = value; }
} 
```

`Xyz`具有 type 的 return-type`MyClass`但在`get`您返回`_myinterface`的是 type `IInterface`。

更改为以下内容：

```
public IInterface Xyz
{
    get { return _myinterface; }
    set { _myinterface = value; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T08:03:44.567

改变这个

```
public abstract class Message
{
    public virtual void Sms();
} 
```

对此

```
public abstract class Message
{
    public abstract void Sms();
} 
```

您要么给虚拟方法一个主体，就像这样

```
public virtual void Sms() { } 
```

或者你把它标记为抽象

```
public abstract void Sms(); 
```

编辑：

忘了第二个错误。改变这个

```
public MyClass Xyz
    {
        get { return _myinterface; }
        set { _myinterface = value; }
    } 
```

对此

```
public IInterface Xyz
    {
        get { return _myinterface; }
        set { _myinterface = value; }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T08:11:17.647

1.  您正在声明一个没有主体的虚拟方法。虚拟方法必须声明一个主体，该主体将作为该方法的默认实现。您可以将您的方法声明为`abstract`，这意味着派生类必须提供自己的实现：

    ```
    public abstract void Sms(); 
    ```

    或者您可以保持方法虚拟并在基类中提供默认实现：

    ```
    public virtual void Sms()
    {
        // Default or no implementation goes here.
    } 
    ```

2.  在以下代码中，您尝试转换`IInterface`为`MyClass`，这可能不是您想要的。

    ```
    public MyClass Xyz
    {
        get { return _myinterface; }
        set { _myinterface = value; }
    } 
    ```

    您可能希望返回`IInterface`：

    ```
    public IInterface Xyz
    {
        get { return _myinterface; }
        set { _myinterface = value; }
    } 
    ```

# python - 什么是不可排序的错误，为什么我不能比较列表中的值？

> ID：13374933
> 
> 赞同：0
> 
> 时间：2012-11-14T08:00:25.963
> 
> 标签：python, list, compare

我正在编写一个玩纸牌游戏的程序。每个玩家都有一套卡片，我已经让它随机处理好了。我需要它能够比较列表中的两个值并根据它们的整数值做一些事情。我编写的代码如下：

```
from random import *
def main():
    cards = [1,2,3,4,5,6,7,8,9,10,11,12]*4
    p1 = []
    p2 = []
    while len(cards) != 0:
        m = randint(0,len(cards))
        p1.append(cards[m-1])
        del cards[m-1]
        n = randint(0,len(cards))
        p2.append(cards[n-1])
        del cards[n-1]
    print(p1, p2)
    def game():
        if p1[0] > p2[0]:
            p1.append(p2[0])
            del p2[0]
        elif p2[0] > p1[0]:
            p2.append(p1[0])
            del p1[0]
        else:
            if len(p1) > len(p2):
                print(p1, p2)
                for i in range(1,len(p2)):
                    if int(p1[i]) > int(p2[i]):
                        p1.append(p2[0:i])
                        del p2[0:i]
                    if int(p2[i]) > int(p1[i]):
                        p2.append(p1[0:i])
                        del p1[0:i]
                    else:
                        continue
            else:
                print(p1, p2)
                for i in range(1,len(p2)):
                    if int(p1[i]) > int(p2[i]):
                        p1.append(p2[0:i])
                        del p2[0:i]
                    if int(p2[i]) > int(p1[i]):
                        p2.append(p1[0:i])
                        del p1[0:i]
                    else:
                        continue
    while len(p1) > 0 and len(p2) > 0:
         game()
    print("player 1 has", p1, " and player 2 has ", p2)
    if len(p1) == 0:
        print("Player 2 wins")
    elif len(p2) == 0:
        print("Player 1 wins")
    input("Press enter to exit") 
```

但是每次我运行它时，它都可以正常运行，直到打成平手。一旦它比较除前两个以​​外的任何值，它就会打印此错误：

```
Traceback (most recent call last):
  File "<pyshell#12>", line 1, in <module>
    main()
  File "C:\Users\Jesse\Documents\Jesse\homework\Computer Science\Programs\War.py", line       52, in main
    game()
  File "C:\Users\Jesse\Documents\Jesse\homework\Computer Science\Programs\War.py", line      32, in game
     if p1[i] > p2[i]:
 TypeError: unorderable types: int() > list() 
```

这是什么意思？比较前两个和其他两个有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T08:10:35.697

好像您正在使用 Python3。Python2 将允许您比较 int 和 list，但它不是很有用，并且会掩盖您在此处遇到的错误

我想也许你的意思是在`extend`这里使用

```
 p1.append(p2[0:i]) 
```

和这里

```
 p2.append(p1[0:i]) 
```

代替`append`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T08:19:01.560

一些杂项。提示（不过，您已经得到了直接问题的答案）：

```
m = randint(0,len(cards))
p1.append(cards[m-1])
del cards[m-1] 
```

你在这里为自己创造工作。模块中有一个方便的函数`random`称为`randrange`，这意味着您不必担心减去一个（顺便说一句，这可能意味着如果您得到 0，那么您将得到 -1，它是列表的最后一个元素，并导致问题（即，您正在修复甲板））...此外，`list`s 有一个方便的方法称为`pop`，它从列表中删除某个位置的元素，所以上面可能是：

```
p1.append(cards.pop(randrange(len(cards)))) 
```

但是，由于您正在处理卡片，因此有一个非常恰当地命名的方法（同样是随机的），称为`shuffle`：

```
from random import shuffle

cards = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11 ,12] # * 4
shuffle(cards)
# [3, 4, 11, 9, 6, 2, 12, 5, 8, 1, 10, 7] 
```

使用它，你可以做更少的“手工工作”，所以让我们来处理卡片......：

```
>>> p1hand, p2hand = cards[::2], cards[1::2]
>>> p1hand
[3, 11, 6, 12, 8, 10]
>>> p2hand
[4, 9, 2, 5, 1, 7] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T08:11:44.993

您遇到的问题来自此行（及其变体）：

```
p1.append(p2[0:i]) 
```

这样做是将列表中的一个切片附加`p2`到`p1`. 也就是说，它添加一个新列表作为现有列表的成员。当您尝试在一个列表中的整数和另一个列表中的子列表之间进行比较时，这会导致问题。

相反，您想使用`extend`which 将切片的成员添加到另一个列表的末尾。

```
p1.extend(p2[0:i]) # note that the 0 here is not necessary! 
```

这应该可以解决问题。

# c# - C#中如何区分Android、Win7用户代理

> ID：13374939
> 
> 赞同：0
> 
> 时间：2012-11-14T08:00:46.677
> 
> 标签：c#, browser

当他们访问我的网站时，我使用以下代码来区分它是否是Android设备。

```
public static bool IsAndroid()
{
    string userAgent = HttpContext.Current.Request
                       .UserAgent.ToLower(CultureInfo.CurrentCulture);
    if (userAgent.Contains("android"))
        return true;
    return false;
} 
```

但是，现在我不仅要检查Android，还要检查它是Win 7。那我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:31:04.930

您可能想查看 HttpContext.Current.Request.Browser 属性。该框架能够根据位于 %SystemRoot%\Microsoft.NET\Framework\versionNumber\Config\Browsers 中的多个配置文件分析用户代理标头。

正如 Paul-Jan 提到的，您可能会使用您的设备访问您的服务器并扩展这些配置文件。例如，也许您可​​以使用 Akamai 的统计数据来识别常见的用户代理标头，但我不确定它们是否提供这些信息。

另请参阅：http: [//msdn.microsoft.com/en-us/library/x3k2ssx2%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/x3k2ssx2%28v=vs.100%29.aspx)

# jsf - 如何将服务器端和客户端的 tabview 组件与 jsf 匹配？

> ID：13374940
> 
> 赞同：0
> 
> 时间：2012-11-14T08:00:46.260
> 
> 标签：jsf, primefaces

我有两个问题如下；

我的页面左侧有一个菜单和子菜单，页面中心有一个 Tabview。当单击 menuItem 时，我使用 javascript 将选项卡动态添加到 tabview，
但我无法从支持 bean 获取 tabview 的选项卡。在添加 javascript 之前，我只能阅读第一个选项卡。所以我想在服务器端和客户端同步匹配tabview。

我怎样才能做到这一点 ？

第二；当我关闭选项卡时，我在 onTabClos​​e 方法中使用 TabClos​​eEvent 但事件始终为空。可能会通过将 tabview 与服务器和客户端匹配来解决，我不知道。

代码如下。

请给我提意见。

谢谢..

xhtml代码：

```
<p:menuitem value="#{itemMenu.menuAck}" 
            action="#{MenuBean.OpenPage(itemMenu.pageName)}" 
            ajax="true"
            oncomplete="handleTabViewEvent(args);" />

<script type="text/javascript">
   function handleTabViewEvent(args) {
       alert('Add tab here..');
    }
</script> 
```

豆代码：

```
public void OpenPage(String pageName) {
     String s = "Divert to handleTabViewEvent function";
}

public void onTabClose(TabCloseEvent event) {  
     FacesContext context = FacesContext.getCurrentInstance();
     TabView tw = (TabView)context.getViewRoot().findComponent("centerForm:tw");
     String s = "I must delete tab here from tw which closed. 
                 But event does not give me tab information. It is always null. And tw has old values";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T11:47:06.410

> *我用javascript动态地将标签添加到tabview*

首先，这是完全错误的。

您需要使用 JSF 而不是 JS 添加选项卡。现在 JSF 完全不知道更改的客户端状态，并且永远不会知道新选项卡。任何解决方法最终只会比仅通过 JSF 而不是 JS 来实现更丑陋且更难维护。

### 也可以看看：

*   [如何在最后一个标签附近添加用于添加新标签的按钮？](https://stackoverflow.com/questions/11961692/how-to-add-button-for-adding-new-tabs-near-last-tab)
*   [当 UI 可以由 CSS、HTML、JavaScript、jQuery 实现时，JSF 需要什么？](https://stackoverflow.com/questions/4421839/what-is-the-need-of-jsf-when-ui-can-be-achieved-from-css-html-javascript-jquery/4424775#4424775)

# asp.net-mvc - 使用 DI 和不使用 EF 实现工作单元

> ID：13374943
> 
> 赞同：4
> 
> 时间：2012-11-14T08:00:51.033
> 
> 标签：asp.net-mvc, ado.net, castle-windsor, unit-of-work

我有 asp.net MVC 应用程序与城堡温莎作为 DI 和拦截器工作。

目前 Dapper 用于 ORM 映射，Dapper 是一个简单的对象到实体映射提供程序，它与 ADO .Net 连接、通用对象一起使用。

我们已经有了存储库和业务服务层，现在我想实现工作单元。

我知道 EF 具有自动事务功能，并且 SaveChanges() 使所有实体更改持久化。

有没有办法让非 EF 多层应用程序的工作单元？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T12:24:27.550

我认为您正在寻找某种 AOP。看看这个例子[http://www.sharpcrafters.com/solutions/transaction](http://www.sharpcrafters.com/solutions/transaction)。您可以使用该属性将您的方法与事务包装在一起，或者更好的是，您可以声明它将用于 BAL 中的所有方法，如下所示：

```
[assembly: TransactionScope( AttributeTargetTypes = "MyBALNamespace.*",
AttributeTargetTypeAttributes = MulticastAttributes.Public,
AttributeTargetMemberAttributes = MulticastAttributes.Public )] 
```

如此处所述：http: [//www.sharpcrafters.com/solutions/logging](http://www.sharpcrafters.com/solutions/logging)

**更新**

使用时`TransactionScope`，尽量避免不必要地将事务升级到 MSDTC。如果您在此期间打开了两个连接（甚至是同一个数据库），`TransactionScope`它将立即升级为 DTC，这会对性能产生影响（有时它会导致作用域处置出现不需要的异常）——这是 SQLServer2008 的行为。您应该在示波器期间仅使用一个连接，或者在打开另一个连接之前关闭第一个连接。

# jquery - JQuery淡入和同时加载

> ID：13374944
> 
> 赞同：0
> 
> 时间：2012-11-14T08:00:58.343
> 
> 标签：jquery, html, fadein

我目前正在使用 Jquery 加载功能来刷新页面的某些部分。仅当满足某些 db 参数时，调用的页面`load`才会向 div 输出一些内容。我的问题是，在输出某些内容的那一刻，“跳转”到了页面上。例如，它会移动上面/下面的内容以适应自己，但看起来很乱。

我想使用 Jquery fadeIn 来解决这个问题并让它很好地淡入，但无法弄清楚如何使用该`load`功能来做到这一点。

加载函数代码为

```
$('#divToLoadInto').load('refresh.php?value=1'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T08:05:15.603

你也可以试试这个：

```
$('#divToLoadInto').load('refresh.php?value=1', function() {
  $(this).fadeIn('slow');
}); 
```

这样，fadeIn 将在页面加载后执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T08:03:21.627

请尝试此代码，以确保加载和淡入是同时进行的。

```
 $('#divToLoadInto').load('refresh.php?value=1').fadeIn('slow'); 
```

另外，如果您希望淡入在加载之后，您可以使用如下回调函数：

```
$('#divToLoadInto').load('refresh.php?value=1', function() {
  $(this).fadeIn('slow');
}); 
```

在这种情况下，您在加载后进行淡入。看你想要的效果

使用 $.post

```
 //create a div with id divhidden and hide it
 $("#divhidden").hide();
 $.post('refresh.php?value=1',function(response) { // (added quotes)
         $("#divhidden").html(response);
    });

$('#divToLoadInto').append($("#divhidden").show('slow')); 
```

# expect - Unix 期望脚本：解析 HTTP 输出

> ID：13374948
> 
> 赞同：0
> 
> 时间：2012-11-14T08:01:28.760
> 
> 标签：expect

我有一个试图从 whatismyip 站点获取主页的期望脚本。我需要同时捕获 - 站点的 IP 和 HTTP 返回码：

```
#!/usr/bin/expect -f
set timeout -1
spawn telnet www.whatismyip.com 80
expect "Connected to www.whatismyip.com*"
set output $expect_out(0,string)
regexp {Connected to www\.whatismyip\.com.*?(\d+\.\d+\.\d+\.\d+)} $output match ip
send -- "GET / HTTP/1.0\n"
send -- "User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.4) Gecko/20070515 Firefox/2.0.0.4\n"
send -- "Host: www.whatismyip.com\n"
send -- "\n"
send -- "\n"
set output $expect_out(buffer)
regexp {.*HTTP/1.1 200 OK.*} $output match ret
puts $ip
puts $ret
expect eof
exit 0 
```

有两个问题。首先，我将 IP 截断为最后一个字符，并得到未找到变量 ret 的错误：

```
spawn telnet www.whatismyip.com 80
Trying 108.162.200.37...
Connected to www.whatismyip.com (108.162.200.37).
Escape character is '^]'.
108.162.200.3
can't read "ret": no such variable
    while executing
"puts $ret"
    (file "./t2" line 15) 
```

我尝试了所有方法和可能性，但无法同时纠正它们。请让我知道如何纠正这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:02:15.263

第一个问题：由于您无法控制 $expect_out 中的 * 内容（想象这些字符来得很慢，并注意“已连接到 www.whatismyip.com*”已经与“已连接到 www.whatismyip. com (108.16"。而是使用：

```
set myexpr {Connected to www\.whatismyip\.com.*?(\d+\.\d+\.\d+\.\d+)[^0-9]}; #Note the terminal condition!
expect {
   -re $myexpr {
         #now $expect_out(0,string) contains the right data to dig...
         regexp $myexpr $expect_out(0,string) match ip
   }
} 
```

第二个问题：注意表达式中`regexp {.*HTTP/1.1 200 OK.*} $output match ret`不包含括号，因此`$ret`即使输出包含该字符串也永远不会被填充，但我认为 $output 无论如何都是空的，为什么？

和第一个问题一样。想象一下字符来得很慢，在你这样做`set output $expect_out(buffer)`的时候还没有收到字符（脚本本身通常比通过网络传输数据要快得多，并且缓冲区在数据发送后立即设置，无需等待响应）。再次，使用期望：

```
expect {
   "HTTP/1.1 200 OK" { 
        #do some stuff here ...
   }
} 
```

# jquery - 在 jQuery Mobile 中添加指向可折叠列表头部的链接

> ID：13374955
> 
> 赞同：2
> 
> 时间：2012-11-14T08:02:17.003
> 
> 标签：jquery, jquery-ui, jquery-mobile

我正在尝试将可折叠列表与普通列表结合起来，例如：

```
Link 1 (header)
Link 2 (header)
List header
    Link 3
    Link 4
Link 5 (header)
List header
    Link 6
    Link 7
Link 8 (header) 
```

问题是当我将链接添加到标题时：

```
<h3>
    <a href="link.php">My link</a>
</h3> 
```

jQuery Mobile 把它变成了这样的东西：

```
<a href="#">
    <span class="ui-btn-inner>
        <span class="ui-btn-text">
            <a href="link.php" class="ui-link">My link</a>
        </span>
    </span>
</a> 
```

这不允许我想要发生的行为。我基本上想要一个混合列表，在同一顶层包含可折叠项目和链接。如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T12:55:51.167

好的，所以我发现了如何做到这一点，这是一个相当不错的解决方案。在可折叠块的 H3 内，只需像往常一样添加链接并给它一个自定义类名：

```
<div data-role="collapsible" data-allow-collapse="false">
    <h3>
        <a href="link.php" class="collapsible-header-link">My link</a>
    </h3>
</div> 
```

...然后使用 jQuery Mobile 的[changePage()](http://jquerymobile.com/test/docs/api/methods.html)函数触发给定 URL 的页面更改：

```
$("#my_page").live('pageinit', function (event) {
    $(".ui-collapsible-heading-toggle").bind("click", function (e) {
        var $link = $(this).find('.collapsible-header-link');
        if ($link.length > 0)
            $.mobile.changePage($link.attr('href'));
    });
}); 
```

您可以根据需要在任意数量的标题上添加此类链接，它将完美运行。希望这将有助于其他遇到此问题的人。干杯!

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-08T15:28:40.307

代码现在很旧，.live() 已弃用，现在我们必须使用：

```
$( document ).on( "pageinit", "#my_page", function( event ) {
$(".ui-collapsible-heading-toggle").bind("click", function (e) {
    var $link = $(this).find('.collapsible-header-link');
    if ($link.length > 0)
        $.mobile.changePage($link.attr('href'));
 });
}); 
```

对不起我的英语：D 干杯！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-27T14:00:02.937

这是当前不推荐使用的解决方案（*jQuery Mobile 1.4.5*）：

```
$( document ).on( "pagecreate", function( event ) {
  $(".ui-collapsible-heading-toggle").bind("click", function (e) {
    var $link = $(this).find('.collapsible-header-link');
    if ($link.length > 0)
        $.mobile.changePage($link.attr('href'));
  });
}); 
```

*Yamil Revilla*（使用`on('pageinit', ...`）和*ladu.luchian*（使用）的其他两个答案`live(...)`已被弃用，如上面的答案和/或评论中所述。

# wpf - DataGrid 通过滚动抛出 InvalidOperationException

> ID：13374957
> 
> 赞同：3
> 
> 时间：2012-11-14T08:02:23.323
> 
> 标签：wpf, exception, datagrid, scroll, invalidoperationexception

我想在 DataGrid 中显示文件的内容。（该文件包含超过 200,000 行）

用数据显示网格很快。

但是当我使用滚动条（向下滚动）时，我遇到了以下异常：

```
System.InvalidOperationException:
{"An ItemsControl is inconsistent with its items source.\n  See the inner exception for more information."} 
```

内部异常：

```
Information for developers (use Text Visualizer to read this):
This exception was thrown because the generator for control 'System.Windows.Controls.DataGrid Items.Count:0' with name '(unnamed)' has received sequence of CollectionChanged events that do not agree with the current state of the Items collection.  The following differences were detected:
  Accumulated count 0 is different from actual count 200000\.  [Accumulated count is (Count at last Reset + #Adds - #Removes since last Reset).]

One or more of the following sources may have raised the wrong events:
     System.Windows.Controls.ItemContainerGenerator
      System.Windows.Controls.ItemCollection
       System.Windows.Data.ListCollectionView
        System.Collections.Generic.List`1[[WpfApplication3.Entry, WpfApplication3, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]
(The starred sources are considered more likely to be the cause of the problem.)

The most common causes are (a) changing the collection or its Count without raising a corresponding event, and (b) raising an event with an incorrect index or item parameter.

The exception's stack trace describes how the inconsistencies were detected, not how they occurred.  To get a more timely exception, set the attached property 'PresentationTraceSources.TraceLevel' on the generator to value 'High' and rerun the scenario.  One way to do this is to run a command similar to the following:
   System.Diagnostics.PresentationTraceSources.SetTraceLevel(myItemsControl.ItemContainerGenerator, System.Diagnostics.PresentationTraceLevel.High)
from the Immediate window.  This causes the detection logic to run after every CollectionChanged event, so it will slow down the application. 
```

异常告诉它：“已收到与 Items 集合的当前状态不一致的 CollectionChanged 事件序列。”

那是代码：

**主窗口.xaml**

```
<Window x:Class="WpfApplication3.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:WpfApplication3="clr-namespace:WpfApplication3"
        Title="MainWindow" Height="350" Width="525">
    <Grid Name="Test">
        <WpfApplication3:Viewer x:Name="LogUC" />
    </Grid>
</Window> 
```

**主窗口.xaml.cs**

```
public partial class MainWindow
{
    public MainWindow()
    {
        InitializeComponent();
        Test.DataContext = this;

        LogUC.Loaded += LogUcOnLoaded;
    }

    private void LogUcOnLoaded(object sender, RoutedEventArgs routedEventArgs)
    {
        LogUC.Test();
    }
} 
```

**查看器.xaml**

```
<UserControl x:Class="WpfApplication3.Viewer"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Height="300" Width="300">
    <Grid Name="Container">
        <DataGrid ItemsSource="{Binding Path=EntryCollection, Mode=OneTime}"
                  AutoGenerateColumns="False"
                  CanUserResizeColumns="True"
                  CanUserResizeRows="True"
                  CanUserAddRows="False"
                  CanUserDeleteRows="False"
                  IsReadOnly="True">
            <DataGrid.Columns>
                <DataGridTextColumn Binding="{Binding ErrorCode}" Header="" />
                <DataGridTextColumn Binding="{Binding Time}" Header="Time" />
                <DataGridTextColumn Binding="{Binding Content}" Header="Content" />
            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</UserControl> 
```

**查看器.xaml.cs**

```
public partial class Viewer : INotifyPropertyChanged
{
    public Viewer()
    {
        EntryCollection = new List<Entry>();
        InitializeComponent();
        Container.DataContext = this;
    }

    public List<Entry> EntryCollection { get; set; }

    internal void Test()
    {
        List<Entry> test = new List<Entry>();

        for (int i = 0; i < 200000; i++)
        {
            Entry entry = new Entry(){
                ErrorCode = 0,
                Time = DateTime.Now.ToString(),
                Content = "Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet."
            };
            test.Add(entry);
        }

        EntryCollection.AddRange(test);
        OnPropertyChanged("EntryCollection");
    }

    #region Implementation of INotifyPropertyChanged

    public event PropertyChangedEventHandler PropertyChanged;

    private void OnPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }

    #endregion Implementation of INotifyPropertyChanged
} 
```

**入口.cs**

```
public class Entry
{
    public int ErrorCode { get; set; }

    public string Time { get; set; }

    public string Content { get; set; }
} 
```

有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T11:25:37.360

我不确定为什么会发生这种情况，但我可以告诉你如何让它工作。

通过引发适当的事件，您似乎永远不会告诉 DataGrid EntryCollection 中的项目已更改。

`OnPropertyChanged("EntryCollection")`您在该方法中的调用`Test`无效，因为您`Mode=OneTime`在 DataGrid 绑定上进行了调用，并且由于`EntryCollection`对象是 a`List`而不是 a `ObservableCollection`，因此向其中添加项目不会引发任何事件来通知 DataGrid。

在我看来，你可以做两件事来解决这个问题。

1.  `EntryCollection`创建一个`ObservableCollection`，以便在添加/删除项目时通知 DataGrid 。然后您可以删除`OnPropertyChanged`呼叫，并且仍然有`Mode=OneTime`.

    ```
    public Viewer()
    {
        EntryCollection = new ObservableCollection<Entry>();
        InitializeComponent();
        Container.DataContext = this;
    }

    public ObservableCollection<Entry> EntryCollection { get; set; }

    internal void Test()
    {
        for (int i = 0; i < 200000; i++)
        {
            Entry entry = new Entry()
            {
                ErrorCode = 0,
                Time = DateTime.Now.ToString(),
                Content = "Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet."
            };

            EntryCollection.Add(entry);
        }
    } 
    ```

2.  不要将项目添加到`EntryCollection`，而是将其设置为新实例并引发`PropertyChanged`事件。这样做，您需要删除`Mode=OneTime`XAML 中的设置。

    ```
    public Viewer()
    {
        EntryCollection = new List<Entry>();    
        InitializeComponent();
        Container.DataContext = this;
    }

    public List<Entry> EntryCollection { get; set; }

    internal void Test()
    {
        List<Entry> test = new List<Entry>();

        for (int i = 0; i < 200000; i++)
        {
            Entry entry = new Entry()
            {
                ErrorCode = 0,
                Time = DateTime.Now.ToString(),
                Content = "Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet."
            };
            test.Add(entry);    
        }

        EntryCollection = test;
        OnPropertyChanged("EntryCollection");
    } 
    ```

# c# - 获取所有最新推文 c# 控制台应用程序

> ID：13374958
> 
> 赞同：0
> 
> 时间：2012-11-14T08:02:23.343
> 
> 标签：c#, twitter, console-application, linq-to-twitter

我怎样才能从公共时间线上至少获得 3200 条最新推文？这是我目前所做的，但它只返回我最新的 200 条推文。

无效GetUserTimeLine（TwitterContext ctx）{

```
 var statusTweets =
               from tweet in twitterCtx.Status
              where tweet.Type == StatusType.User &&
                    tweet.Count == 3200 &&
                    tweet.ScreenName == "abc" 
             select tweet;

            //PrintTweetsResults(statusTweets);
            foreach (var tweet in statusTweets)
            {
                Console.WriteLine(
                    "(" + tweet.StatusID + ")" +
                    "[" + tweet.User.ID + "]" +
                    tweet.User.Name + ", " +
                    tweet.Text + ", " +
                    tweet.CreatedAt);
            }

        // DEFINE FILE PATH NAME
            string dwnloadFilePath = @"C:\temp\Tweet.log";

        // CREATE AN EMPTY TEXT FILE
        FileStream fs1 = null;
        if (!File.Exists(dwnloadFilePath))
        {
            using (fs1 = File.Create(dwnloadFilePath)) ;
        }

        // WRITE DATA INTO TEXT FILE
        if (File.Exists(dwnloadFilePath))
        {
            using (StreamWriter sw = new StreamWriter(dwnloadFilePath))
            {

                statusTweets.ToList().ForEach(
            tweet => sw.Write(
            "{3}, Tweet ID: {2}, Tweet: {1}\n",
            tweet.User.Name, tweet.Text, tweet.StatusID, tweet.CreatedAt));

            }
        }
        Console.ReadLine();
    } 
```

有人可以启发我吗？

谢谢，10e5x

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T08:11:20.247

虽然您可以获取时间线中最后 3200 条推文中的任何一条，但您只能以 200 条为一组获取它们（有关更多详细信息，请参阅[twitter api](https://dev.twitter.com/docs/working-with-timelines)。）

处理完指定最大 id 值和计数的前 200 个条目后，您需要重新查询，其中最大 id 是您已处理的一组推文中的最低 id。

# google-sheets - 如何在 Google 电子表格中更改之前获取单元格的值？

> ID：13374963
> 
> 赞同：0
> 
> 时间：2012-11-14T08:02:31.287
> 
> 标签：google-sheets, google-spreadsheet-api

在退出单元格之前，似乎不会触发此功能，因为我得到的值是更改后的值。我需要更改前的值，但实际上只有在编辑了特定列时才需要它。

谢谢

```
function onEdit() {
  var s = SpreadsheetApp.getActiveSheet();
  var r = s.getActiveCell();
  var columnNum = r.getColumn(); 
  var msg;

  if (columnNum == 11) {

    var dateCell = s.getRange(r.getRow(), 11); 
    var v=dateCell.getValue();
    msg = 'Value= ' + v;
    Browser.msgBox (msg);

    //dateCell.setValue(v);

  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-11-09T14:18:54.663

这是一个非常古老的问题，但如果其他人需要答案，使用事件对象获取任何已编辑单元格的旧值和新值都很容易：

```
function onEdit(e) {
  let oldValue = e.oldValue;
  let newValue = e.value;
  console.log("The range's old value was: " + oldValue + ", and the updated value is: " + newValue);
} 
```

以下是[Google 表格事件对象](https://developers.google.com/apps-script/guides/triggers/events)的可访问属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T11:12:30.477

@AdamL 无论如何以编程方式访问电子表格修订历史？

抱歉，这超出了我的菜鸟能力，但我的问题可能为 A B 问题的解决方法提供了线索。

@AB 另一个可能的解决方法您可以设置基于时间的触发器来填充 2 个数组。来自您检查编辑的列中当前数据的 1 个数组，以及来自相同数据的先前快照的 1 个数组。然后通过使用循环测试自上次触发事件以来是否有任何值发生变化，您可以确定哪些值/值已更改（如果有）如果您的测试值已更改，则推送 rowNumber() 和 colNumber() 并getValue() 将相同数据的先前实例和当前实例添加到新数组中，还包括时间戳 new Date()。让这个新的数组数据填充新的工作表或电子表格。

如果与您的 onEdit 函数结合使用，您将能够看到值更改之前和之后，以及它们发生的大致时间。

基于时间的触发器可以设置为每分钟、每小时等运行一次

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T23:16:21.667

据我所知，在编辑之前捕获单元格的值仍然是不可能的。

您可能想[在问题跟踪器上为这个问题加注](http://code.google.com/p/google-apps-script-issues/issues/detail?id=200&q=onedit&colspec=Stars%20Opened%20ID%20Type%20Status%20Summary%20Component%20Owner)星标；它目前被视为中等优先级的增强请求。

# language-agnostic - 为什么 ||= 不是一个有效的运算符？

> ID：13374970
> 
> 赞同：3
> 
> 时间：2012-11-14T08:03:11.503
> 
> 标签：language-agnostic, programming-languages

为什么 C 没有 ||= 运算符或任何其他语言？是有一些技术原因，还是语言美学？

*编辑*显然 Perl 和 Ruby 有这个，我问的时候不知道。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T17:24:09.037

在 C 语言中，这个运算符完全是无稽之谈。考虑以下示例：

```
char ind = 0;
ind |= 1;
ind |= 0;
// ind is still 1 
```

这正是要做的事情`||=`。对于所有不可转换为 bool 的类型，这无论如何都是愚蠢的。我错过了什么吗？

在所有其他没有类型推断的编程语言中，此运算符仅对布尔值有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T17:11:55.470

我冒昧地猜测它没有包含在 c 中（与 |= 不同），因为在 99% 的情况下它不会产生很多收益。|| 是一个布尔运算符。虽然语言中的布尔值是零而不是零，但对整数或 true 指针的赋值实际上应该是什么。1, -1, 42? 它引入了非常多的歧义，并没有太多好处。

# mysql - 在另一个多对多表中引用多对多表中的一行是一个坏主意吗

> ID：13374971
> 
> 赞同：1
> 
> 时间：2012-11-14T08:03:13.220
> 
> 标签：mysql, sql, database-design, many-to-many

如果我有类似这样的架构：

```
TABLE 1  
id  
column  
other_column  
etc

TABLE 2  
id  
table1_id  
some_other_table_id 
```

像这样添加第三个表是个好主意：

```
TABLE 3  
id  
table2_id  
row_from_another_table_id 
```

**编辑：**
为了让事情更清楚，考虑这样的模式：

```
EVENTS  
id  
name  
other_stuff 

RANGES  
id  
time_from  
time_to  
max_people  
etc

EVENTS_PLACES  
id  
event_id  
place_id 
```

我想做的是为事件定义一个时间范围。但是特定地点的特定事件（`EVENTS_PLACES`）可以“覆盖”这个范围。一个事件也可以有多个范围。

我希望这让这个问题现在更清楚一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T10:15:02.567

我一直认为多对多关系违反了[Boyce-Codd 范式](http://en.wikipedia.org/wiki/Boyce%E2%80%93Codd_normal_form)，因此违反了良好的关系数据库模式。

因此，事实上，将数据与链接表相关联是实现 BCNF 所必需的，因此是好的。如果避免数据更新异常是好的。

* * *

转到您提供的特定模式示例。我认为您想要这些逻辑表（或实体），

```
-----------------------
EventClass
-----------------------
Id
Name
... Other attributes common to every instance
-
-----------------------
TimeSlot
-----------------------
Id
Start
End
-
-----------------------
Place
-----------------------
Id
Name
Address
MaxAttendance
... etc
-
----------------------
EventInstance
-----------------------
Id
EventClassId
TimeSlotId
PlaceId
PresenterName
...Other attributes specific to the instance 
```

`EventInstance`是 和 之间的关系，`EventClass`任何特定于 的属性都应该存储在该实体上。相关事件组共有的任何属性都应存储在该属性上。`TimeSlot``Place``EventInstance``EventClass`

* * *

这都是[数据库规范化](http://en.wikipedia.org/wiki/Database_normalization)的问题，一般来说，数据越规范化越好。然而，当性能受到关注时，存在妥协的情况，如果所需的数据以输出格式存储，它确实使选择查询更简单、更快，尽管更新可能是地狱。

我会建议通过正确的 Indecies、[Materialized Views](http://www.fromdual.com/mysql-materialized-views)和 Indecies on [Materialized Views](http://www.fromdual.com/mysql-materialized-views)来抵消妥协的情况，您可以获得两全其美的效果。完全规范化数据的可维护性与性能速度。虽然，它确实需要一些技巧和考虑才能使架构正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T10:45:06.427

因此，您在两个具有属性的表之间有一个关系，并且您有一个具有更多属性的该关系的子类。这很少见，但可能。

假设在您的一夫多妻异性交友网站中，一个或多个女人实体与一个或多个男人有关系。这两个表可以与联结表Relationship 耦合。现在他们中的一些人结婚了，你认为这是一种特殊的关系。所以Marriage是Relationship的子类，Marriage表有Relationship表中id的引用。

当然，用另一种方式解决这种情况可能更简单，例如在男人和女人之间简单地有两个连接表。但是在某些情况下，您肯定希望扩展联结表中的关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T12:52:32.590

另一种选择是在 TABLE2 中添加一列，描述“事物”之间连接的性质。例如，一个 PERSON 表和一个 RELATIONSHIPS 表，您在第一个表中建模您的“对象”，然后在几秒钟内建模“链接”，例如

```
+---------+---------+-------+--------+
| link_id | from_id | to_id |  type  |
+---------+---------+-------+--------+
|       1 |       2 |     3 | Mother |
|       2 |       8 |     3 | Sister |
+---------+---------+-------+--------+ 
```

使用适当的索引，这意味着您可以执行诸如查找给定人的所有关系或查找所有有姐妹的人等操作。这是一个简单的示例，但是当 from_id 和 to_id 可以是不同的类型时，它开始变得有趣对象即不仅仅是人。

过去，我在使用非常通用的模式时使用过这种方法，该模式聚合来自各种其他来源的数据并且必须灵活。显然，在灵活性和速度、查询复杂性之间需要权衡取舍。您必须决定它是否对您的情况有用。

# android - 在 BroadcastReceiver 的 Activity 中调用方法

> ID：13374972
> 
> 赞同：1
> 
> 时间：2012-11-14T08:03:15.107
> 
> 标签：android, broadcastreceiver

我在BroadcastReceiver的onReceive(）中将context转入一个Specific Activity，比如`MyActivity ma = (MyActivity) context;`。我想在Activity中调用一个方法，但是当我转context的时候，却出现了这个错误：`ClassCastException error`。之前在另一个项目中，我把服务转过来没有问题。为什么会报错？</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T08:22:18.933

因为方法 [（文档）](http://developer.android.com/reference/android/content/BroadcastReceiver.html#onReceive%28android.content.Context,%20android.content.Intent%29)`context`中的变量是. （我认为，您不能将其转换为，因为接收器正在应用程序上下文中运行。）`onReceive``The Context in which the receiver is running``activity`

`handlers`您可以通过或通过广播自定义意图来组织应用程序组件之间的通信。

# c# - 如何从客户端回调方法获取服务器端点地址（wcf 双工合约）

> ID：13374974
> 
> 赞同：0
> 
> 时间：2012-11-14T08:03:29.060
> 
> 标签：c#, wcf

我有一个双工 WCF 合同，我想从客户端回调方法获取服务器端点地址（我使用单个客户端和许多服务器，所以我想知道哪个服务器响应我）。有没有办法从 OperationContext 中获取它？

```
public class CallbackService : IServiceCallback
    {
        public void OnSuccess()
        {
            string endpoint = OperationContext.Current.?
            MessageBox.Show(string.Format("Process on {0} successfully finished!", endpoint));
        }
    } 
```

我看到了[这个问题](https://stackoverflow.com/questions/6262025/obtaining-ip-address-of-callback-channel-in-wcf)并尝试了解决方案，但它的响应对我来说毫无意义：“fe80::1845:e7eb:abbb:77aa%13”。

这就是我想要得到的：

```
<endpoint address="http://localhost:5678/WinFormsHoster/wsDual"> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:20:26.093

那是正确的地址，您使用的是 IPv6。

# c# - 在C#中使用streamreader来保存文本

> ID：13374975
> 
> 赞同：0
> 
> 时间：2012-11-14T08:03:34.483
> 
> 标签：c#, text-files, streamreader

我在 C# 中使用 streamreader，我的目标是用它读取一个文本文件，它必须过滤掉标签之间的文本（如`<Test> </Test>` 或`<Name> </Name>`）并获取标签的名称，如（测试或名称），然后将其保存到一个字符串稍后使用的标签名称。我已经在互联网上搜索了几天，但找不到任何东西，而且我对 C# 没有太多经验，但希望有人可以帮助我。该文件本身是一个 .txt 文件

这是我到目前为止的代码：

```
class Program
    {
        static void Main(string[] args)
        {

            using (StreamReader sr = new StreamReader(@"C:\testfile.txt"))
            {

                String line;
                // Read line by line
                while ((line = sr.ReadLine()) != null)
                {
                    Console.WriteLine(line);

                }
            }
            Console.ReadKey();
        }

    } 
```

例如，预期输出是一个字符串，其中 name = 纯文本中名称标签之间的所有内容，然后 test = 纯文本中测试标签之间的所有内容。对不起我的英语不好，但我希望有人可以帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T08:21:52.303

您可以使用 XmlDocument

```
 XmlDocument Info_Document = new XmlDocument();
        Info_Document.Load(@"D:\saraxml.txt");
        XmlNodeList xmlnodelist = Info_Document.GetElementsByTagName("Name");//finding all nodes called "Name"
            foreach (XmlNode c in xmlnodelist)
            {
               string _name=c.InnerText;
            } 
```

* * *

对于这个文件：

```
<test>
<Name> h0</Name>

<Name> h1</Name>

<Name> h2</Name>

<Name> h3</Name>

<Name> h4</Name>

<Name> h5</Name>
</test> 
```

* * *

我有：

h0

h1

h2

h3

h4

h5

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T08:21:18.497

如果文件是 HTML，可以使用[HTML Agility 包](http://htmlagilitypack.codeplex.com/) 解析文件，然后通过标签名查询结果。这比正则表达式更受欢迎，因为它可以更好地处理所有复杂性，例如嵌套标签、结构不佳的 html 等。[尝试使用正则表达式解析 HTML 可能会导致精神错乱](https://stackoverflow.com/a/1732454/1158522)。

如果是纯 XML，那么您可以以类似的方式使用[XMLDocument 。](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx)

否则，您将需要编写一个自定义解析器，这是一个更加复杂和耗时的企业。

如果您的文件符合常规语法，则可以构建递归下降解析器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T08:15:53.827

我建议您使用正则表达式来过滤文本：

[http://msdn.microsoft.com/fr-fr/library/system.text.regularexpressions.regex.aspx](http://msdn.microsoft.com/fr-fr/library/system.text.regularexpressions.regex.aspx)

此处提供了一个示例：

[http://www.dotnetperls.com/remove-html-tags](http://www.dotnetperls.com/remove-html-tags)

# c++ - c ++：按值复制到函数参数在vs2012中产生两个对象

> ID：13374984
> 
> 赞同：23
> 
> 时间：2012-11-14T08:04:07.960
> 
> 标签：c++, visual-c++, gcc, visual-studio-2012, gcc4.7

这是在 g++ 4.7 和 vs2012 (cl17) 中产生不同输出的代码。

```
#include <iostream>

using namespace std;

class A
{
public:
    A() { cout << "1" << endl; }
    ~A() { cout << "2" << endl; }
};

class B : public A
{
public:
    B() { cout << "3" << endl; }
    ~B() { cout << "4" << endl; }
};

void func(A a) {}

int main()
{
    B b;
    func(b);
    return 0;
} 
```

**GCC 输出是`13242`，而 cl 输出`132242`。**

为什么 cl 编译器`A`在堆栈上创建副本时会生成第二个对象，目的是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T08:40:45.280

这似乎是一个编译器错误。
C++ 标准不使用术语**对象切片**，您将类型的对象传递`B`给接收类型参数的函数`A`。编译器将应用通常的重载决议来找到合适的匹配。在这种情况下：
Base 类`A` 具有编译器提供的复制构造函数，它将引用`A`并且在没有其他转换函数的情况下这是最佳匹配并且应该由编译器使用。

请注意，如果有更好的转换可用，它将被使用。例如：如果除了复制构造函数之外`A`还有一个构造函数，那么将使用这个构造函数，而不是复制构造函数。`A::A( B const& )`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T12:58:39.630

C++ 编译器会在以下情况下合成默认的复制构造函数。（来自 C++ 对象模型内部）

1.  当类包含存在复制构造函数的类的成员对象时。
2.  当类派生自存在复制构造函数的基类时。
3.  当类声明一个或多个虚函数时
4.  当类派生自一个或多个基类是虚拟的继承链时。

我们可以看到 A 类不在这 4 种情况下。所以 cl 不要为它合成默认的复制构造函数。也许这就是构造和销毁 2 个临时 A 对象的原因。

从 disassemly 窗口中，我们可以看到以下代码，没有调用 A::A。：

```
B b;
00B317F8  lea         ecx,[b]  
00B317FB  call        B::B (0B31650h)  
00B31800  mov         dword ptr [ebp-4],0  
func(b);
00B31807  mov         al,byte ptr [ebp-12h]  
00B3180A  mov         byte ptr [ebp-13h],al  
00B3180D  mov         byte ptr [ebp-4],1  
00B31811  movzx       ecx,byte ptr [ebp-13h]  
00B31815  push        ecx  
00B31816  call        func (0B31730h) 
```

但是，如果我们将析构函数设为虚拟。我们会得到下面的反汇编代码，我们可以看到 A::A 被调用了。然后结果如预期的那样，只创建了 1 个对象。

```
B b;
00331898  lea         ecx,[b]  
0033189B  call        B::B (03316A0h)  
003318A0  mov         dword ptr [ebp-4],0  
func(b);
003318A7  push        ecx  
003318A8  mov         ecx,esp  
003318AA  mov         dword ptr [ebp-1Ch],esp  
003318AD  lea         eax,[b]  
003318B0  push        eax  
003318B1  call        A::A (0331900h)  
003318B6  mov         dword ptr [ebp-20h],eax  
003318B9  call        func (03317D0h) 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-11-14T08:14:53.917

您遇到了编译器的错误。

正确的功能解释如下：

* * *

该函数`func`需要创建对象的副本（但要注意切片）。

所以，会发生什么：

```
int main()
{
    // create object B, which first creates the base object A
    B b;
    // create object A, using this copy constructor : A( const B& )
    func(b);
} 
```

当复制构造的对象 A 在调用结束时被销毁时，会进行额外的 ~A()`func`调用。

# java - Java：是否有使用静态易失变量的正确方法？

> ID：13374988
> 
> 赞同：4
> 
> 时间：2012-11-14T08:04:23.980
> 
> 标签：java, concurrency

我想要一个可以从不同线程读取/写入的标志，而不会出现任何脏值问题。是否足以使其静态易变？

```
static volatile boolean flag; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T08:24:38.597

不，如果您需要这样的操作，这还不够：

```
volatile int v = 0;

Thread 1:
v++;

Thread 2:
v--; 
```

理想情况下，当您执行上述代码时，您希望 v=0，但这是真正发生的事情（复合动作）：

```
Thread 1:
r1 = v;
r2 = r1 + 1;
v = r2;

Thread 2:
r3 = v;
r4 = r3 - 1;
v = r4; 
```

两个线程将分别给出 1 和 -1 的值。资料来源： [易失性并不意味着原子性！](http://jeremymanson.blogspot.com/2007/08/volatile-does-not-mean-atomic.html)

如果您需要在多线程场景中保证一致的结果，您应该使用 Java 中的 Atomic 类，正如@Eng.Fouad 指出的那样。

在布尔值的情况下，AtomicBoolean 类的比较和设置比使用 volatile 更有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T08:42:25.067

这很诱人，但要避免使用这样的代码。

在一个简单的场景中，这似乎可行，因为`boolean`不允许任何数学运算（您只能为其赋值）。但是你很少有简单的案例。最终，您将需要

```
if(flag) {
    flag = false;
} 
```

这段代码有时会中断。因此，正如其他答案所建议的，您应该使用`java.util.concurrent.Atomic`* 类。

# objective-c - jsonkit 用户定义的问题和弧限制尝试从目标 c 导入它

> ID：13374995
> 
> 赞同：1
> 
> 时间：2012-11-14T08:05:14.610
> 
> 标签：objective-c, xcode, jsonkit

所以这是我第一次尝试使用 jsonkit。我一直在寻找过去一个小时，找不到任何安装说明，所以我只是尝试复制和粘贴文件，然后将它们添加到 xcode 项目中，然后导入它们。但是当我编译它时会抛出十几个错误，这通常会对它有 ARC 限制。这些错误之一是这样的：

> JSONKit 不支持 Objective-C 自动引用计数

话虽如此，我是否需要遵循任何具体说明才能正确编译？或者也许指出我正确的方向？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T08:06:35.533

发生这种情况是因为您在 ARC 代码中混合了非弧代码，这就是为什么会出现此错误。您可以使用我的以下想法，它工作正常，过去使用过相同的。

嘿，您只需在of下设置一个即可禁用`ARC`。`JSON classes``flag``Build Phases``App setting`

标志是

```
 -fno-objc-arc 
```

如下图描述了如何做到这一点的方式。

![见下图……！！！ 小心](../Images/dfdce24412f023461244e63a9ecee26d.png)

它会与魅力一起工作..!!!!

# iphone - 如何制作像 Glympse iphone 应用程序这样的介绍屏幕

> ID：13374998
> 
> 赞同：2
> 
> 时间：2012-11-14T08:05:31.437
> 
> 标签：iphone, ios, glympse

当您第一次启动[Glympse](https://itunes.apple.com/us/app/glympse-share-location-friends/id330316698?mt=8) iphone 应用程序时，Glympse 会显示一个介绍屏幕。当你从上到下滚动屏幕时，它会动态改变内容，动画非常流畅。您还可以在设置菜单中重播此介绍。

我想知道如何在 iphone 中构建这样的屏幕位置感知动画页面。我什至想知道这个屏幕是使用html5 + css3构建的吗？就像[这个页面](http://www.inception-explained.com/)一样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T23:21:33.697

以下是我实现介绍序列的方式：

由于 UIScrollViewDelegate 没有为我提供滚动视图内容的实际显示坐标，我创建了一个派生自 UIScrollView 的新类并覆盖了[setContentOffset](http://developer.apple.com/library/ios/documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html#//apple_ref/occ/instm/UIScrollView/setContentOffset%3aanimated%3a)。我还定义了一个委托协议，它在调用 setContentOffset 时触发，并通知侦听器传递给 setContentOffset 方法的 contentOffset 值。 *（理想情况下，这应该是 iOS 的 UIScrollViewDelegate 委托的一部分）*。

委托的实现者现在能够在滚动发生时接收实际的内容偏移量。当视图滚动显示不同的内容时，我会根据 contentOffset 的垂直坐标触发动画。这些触发器在垂直点（Y 值）数组中定义，每个垂直点与两个函数调用相关联，其中动画 UI 元素进出视图。

当 contentOffset Y 值大于触发点时，我将特定的 UI 元素动画化到视图中并将动画设置为“触发”。动画通常是使用[基于块的动画](http://developer.apple.com/library/ios/#documentation/windowsviews/conceptual/viewpg_iphoneos/animatingviews/animatingviews.html)淡入或调整大小。当 Y 值小于触发点并且之前已触发过动画时，我使用不同的动画（例如淡出）将对象设置为动画，并将其标记为“未触发”

这是确定 UI 元素是否可见的关键计算：

```
 CGPoint point = [contentOffset CGPointValue];
    CGFloat visible = _scrollView.bounds.size.height + point.y;

    if ( _triggers[ndx].y < visible )
    {
        if ( !_triggers[ndx].triggered )
        {
            _triggers[ndx].triggered = true;
            // call trigger's function to animate item into view
        }
    }
    else
    {
        if (_triggers[ndx].triggered)
        {
            _triggers[ndx].triggered = false;
            // call trigger's function to animate item out of view
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T09:21:32.413

看看这有多流畅，它不是 HTML5，而是[`CABasicAnimation`](https://developer.apple.com/library/iOS/#documentation/GraphicsImaging/Reference/CABasicAnimation_class/Introduction/Introduction.html)由[`UIScrollViewDelegate`](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIScrollViewDelegate_Protocol/Reference/UIScrollViewDelegate.html).

从阅读[Core Animation 编程指南简介](https://developer.apple.com/library/iOS/#documentation/Cocoa/Conceptual/CoreAnimation_guide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40004514)和[Core Animation Cookbook开始](https://developer.apple.com/library/iOS/#documentation/GraphicsImaging/Conceptual/CoreAnimation_Cookbook/Introduction/Introduction.html#//apple_ref/doc/uid/TP40005406)