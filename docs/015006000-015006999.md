# StackOverflow 问答 15006000-15006999

# javascript - 带滚动的圆形滑块 (jquery+css3)

> ID：15006000
> 
> 赞同：3
> 
> 时间：2013-02-21T15:28:19.183
> 
> 标签：javascript, jquery, css, scroll

用滚动制作一个圆形滑块。[http://magart.com.ua/circle/](http://magart.com.ua/circle/)在 Mozilla 中测试！

有一个问题，如果你只是刷新页面，一切都会顺利进行。（您必须滚动并刷新页面才能看到它）。在 Mozilla 中测试！但是如果滚动，就会出现粗糙度。如何解决问题？

部分代码：

```
myDiv.scroll(function () { 
    $newh=$('#wrapper_sl').height()+$(this).scrollTop(); //eternal scroll
    $('#wrapper_sl').height($newh); //eternal scroll
    var $nower=(($(this).scrollTop()+$start_pr)/$skorost)+$ugol*8;
    for (var ink=0, len = $kolvo; ink < len; ink++)
    {
    $rad=((ink)*$ugol+$nower);
    $deg=$rad*360/(2*Math.PI)+270;

    $(ImgDiv[ink]).offset({top: Math.cos(($rad))*$size_dug+$smes_y, left: Math.sin(-($rad))*($size_dug)+$smes_x }).css({'transform':'skewX(-'+$deg+'deg) rotateX('+$deg+'deg)'});
    };
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T15:42:35.583

尝试给 css3 过渡一些时间。

```
transition: all 0.5s;
-webkit-transition: all 0.5s;
-moz-transition: all 0.5s; 
```

另请注意，永恒滚动部分会增加包装器的高度，因此每次滚动后，旋转速度都会增加。尝试保持 wrapper 的高度不变，并在每次滚动后将 scrolltop 设置为 0。

- 编辑

我希望这可以帮助你。[在jsFiddle](http://jsfiddle.net/tRkqS/9/embedded/result/)中查看演示

```
$(function () {
    rotate();
    myDiv.bind('scroll.rot', rotate);
    myDiv.bind('scroll', $.debounce(250, function () {
        $start_pr += $(this).scrollTop();
        $(this).scrollTop(0);
    }));
});

function rotate() {
    $.debounce(250, true, function () {});
    var $nower = (($(this).scrollTop() + $start_pr) / $skorost) + $ugol * 8;
    for (var ink = 0, len = $kolvo; ink < len; ink++) {
        $rad = ((ink) * $ugol + $nower);
        $deg = $rad * 360 / (2 * Math.PI) + 270;

        $('#info').html(
            '$rad: ' + $rad +
            '<br/>$deg: ' + $deg);

        $(ImgDiv[ink]).offset({
            top: Math.cos(($rad)) * $size_dug + $smes_y,
            left: Math.sin(-($rad)) * ($size_dug) + $smes_x
        }).css({
            'transform': 'skewX(-' + $deg + 'deg) rotateX(' + $deg + 'deg)'
        });
    };
} 
```

这是[jsFiddle中的源代码](http://jsfiddle.net/tRkqS/9/)

# javascript - 在 innerHTML 中插入注释

> ID：15006001
> 
> 赞同：1
> 
> 时间：2013-02-21T15:28:29.427
> 
> 标签：javascript, dom

我正在尝试在 innerHTML 中插入 HTML 注释，但它在 IE8 中不接受。FF 工作正常。

```
<html>
<head>
    <title>testing</title>
    <script language="javascript">
    function testcmt() {
        var el2 = document.createElement("div");
        el2.innerHTML = "<!--Sample--><p>Sample</p>";
        alert( el2.innerHTML );
    }
    </script>

</head>
<body id="BodyID">
    <h2>Test</h2>
    <input type="button" value="Sample" onmousedown="testcmt(); return false">
</body> 
```

IE 只显示`<p>Sample</p>`，评论不见了。任何指针？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T15:42:45.117

您很可能应该使用[document.createComment](https://developer.mozilla.org/en-US/docs/DOM/document.createComment)：

```
function testcmt() {
    var el2 = document.createElement("div");
    el2.setAttribute('id', 'oxe_rem_now' + '232323232323');
    el2.appendChild(document.createComment('text for comment'));
    var p = document.createElement("p");
    p.innerText = "Sample";
    el2.appendChild(p);
    alert(el2.innerHTML);
} 
```

[样本](http://jsfiddle.net/mwFd8/)

# jquery - 来自javascript调用的Bootstrap ScrollSpy不起作用

> ID：15006003
> 
> 赞同：1
> 
> 时间：2013-02-21T15:28:31.423
> 
> 标签：jquery, twitter-bootstrap

我正在建立一个基于引导程序的网站，目前我遇到了问题。如果我打电话`data-attributes`：

```
<body  data-target=".navbar" data-spy="scroll"  data-offset="200"> 
```

Scrollspy 确实有效。

但是如果我使用 javascript

```
$('.navbar').scrollspy({offset:200}); 
```

这不起作用！

我也已经尝试动态设置属性：

```
$("body").data("target", ".navbar");
$("body").data("spy", "scroll");
$("body").data("offset", "200"); 
```

至今没有结果。

我认为javascript调用缺少一些东西。如果 $('.navbar') 是目标，我可以在哪里设置间谍对象（主体）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T15:46:17.743

通过 JavaScript 调用 scrollspy 时，指定 body 标记（或另一个带有滚动条的元素）并作为选项传入目标导航。

```
$('body').scrollspy({ target: '.navbar' }); 
```

*我不确定为什么引导文档说 $('#navbar').scrollspy()。这是非常具有误导性的。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T13:30:00.607

有不同的方法可以做到这一点，看看这是否对你有帮助：http: [//jsfiddle.net/panchroma/Tgghc/](http://jsfiddle.net/panchroma/Tgghc/)

使用数据属性，重要的位包括您要监视的 div 中的数据间谍详细信息：

```
<div id="nav-wrapper" data-spy="affix" data-offset-top="200">
..... 
```

然后在你的 CSS 中定义你想要在这个 div 被附加时发生的事情，例如：

```
#nav-wrapper.affix {
top: 0;
width: 100%
} 
```

由于附加的 div 会从正常流程中移除，因此有时您需要稍微播放一下，这样附加的行为才不会导致主要内容的跳转。

祝你好运！

# visual-studio-2010 - TFS：无法从 TFS 获取 Phonegap 解决方案

> ID：15006009
> 
> 赞同：1
> 
> 时间：2013-02-21T15:28:38.250
> 
> 标签：visual-studio-2010, cordova, tfs

我无法从 TFS 分发我的 Phonegap 解决方案。

问题是当我创建解决方案***（成功构建运行）***并能够成功将其上传到 TFS 时，项目运行良好，但是当其他开发人员获得解决方案时，它在构建时总是返回错误。

这是我的共同开发者收到的错误
![这是我的共同开发者收到的错误](../Images/ed58529e4762e3f38e073bf7ea1bc3a9.png)

我在用：

1.  电话间隙 2.4.0
2.  视窗电话 7.8 SDK
3.  视觉工作室 2010

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T17:03:08.720

根据[这个答案](https://stackoverflow.com/a/10310718/606602)，在项目文件夹中找到 CordovaSourceDictionary.xml 并检查它是否是只读的。如果是这样，使其可写。

# javafx - JavaFX WebView 浏览器

> ID：15006013
> 
> 赞同：2
> 
> 时间：2013-02-21T15:28:50.400
> 
> 标签：javafx

```
package webviewbrowser;

import java.util.List;
import javafx.application.Application;
import javafx.beans.value.ChangeListener;
import javafx.beans.value.ObservableValue;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.geometry.HPos;
import javafx.geometry.Insets;
import javafx.geometry.VPos;
import javafx.scene.Node;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.control.TextField;
import javafx.scene.layout.ColumnConstraints;
import javafx.scene.layout.GridPane;
import javafx.scene.layout.Pane;
import javafx.scene.layout.Priority;
import javafx.scene.layout.VBox;
import javafx.scene.web.WebEngine;
import javafx.scene.web.WebView;
import javafx.stage.Stage;

public class WebViewBrowser extends Application {

    @Override public void start(Stage primaryStage) throws Exception {
        Pane root = new WebViewPane();
        primaryStage.setScene(new Scene(root, 1024, 768));
        primaryStage.show();
    }
    public static void main(String[] args) {
        launch(args);
    }

    /**
     * Create a resizable WebView pane
     */
    public class WebViewPane extends Pane {

        public WebViewPane() {
            VBox.setVgrow(this, Priority.ALWAYS);
            setMaxWidth(Double.MAX_VALUE);
            setMaxHeight(Double.MAX_VALUE);

            WebView view = new WebView();
            view.setMinSize(500, 400);
            view.setPrefSize(500, 400);
            final WebEngine eng = view.getEngine();
            eng.load("http://www.google.com");
            final TextField locationField = new TextField("http://www.google.com");
            locationField.setMaxHeight(Double.MAX_VALUE);
            Button goButton = new Button("Go");
            goButton.setDefaultButton(true);
            EventHandler<ActionEvent> goAction = new EventHandler<ActionEvent>() {
                @Override public void handle(ActionEvent event) {
                    eng.load(locationField.getText().startsWith("http://") ? locationField.getText() :
                            "http://" + locationField.getText());
                }
            };
            goButton.setOnAction(goAction);
            locationField.setOnAction(goAction);
            eng.locationProperty().addListener(new ChangeListener<String>() {
                @Override public void changed(ObservableValue<? extends String> observable, String oldValue, String newValue) {
                    locationField.setText(newValue);
                }
            });
            GridPane grid = new GridPane();
            grid.setVgap(5);
            grid.setHgap(5);
            GridPane.setConstraints(locationField, 0, 0, 1, 1, HPos.CENTER, VPos.CENTER, Priority.ALWAYS, Priority.SOMETIMES);
            GridPane.setConstraints(goButton,1,0);
            GridPane.setConstraints(view, 0, 1, 2, 1, HPos.CENTER, VPos.CENTER, Priority.ALWAYS, Priority.ALWAYS);
            grid.getColumnConstraints().addAll(
                    new ColumnConstraints(100, 100, Double.MAX_VALUE, Priority.ALWAYS, HPos.CENTER, true),
                    new ColumnConstraints(40, 40, 40, Priority.NEVER, HPos.CENTER, true)
            );
            grid.getChildren().addAll(locationField, goButton, view);
            getChildren().add(grid);
        }

        @Override protected void layoutChildren() {
            List<Node> managed = getManagedChildren();
            double width = getWidth();
            double height = getHeight();
            double top = getInsets().getTop();
            double right = getInsets().getRight();
            double left = getInsets().getLeft();
            double bottom = getInsets().getBottom();
            for (int i = 0; i < managed.size(); i++) {
                Node child = managed.get(i);
                layoutInArea(child, left, top,
                               width - left - right, height - top - bottom,
                               0, Insets.EMPTY, true, true, HPos.CENTER, VPos.CENTER);
            }
        }
    }
} 
```

这是我的代码。有人可以帮我添加一个“停止”按钮以停止加载页面，添加选项卡以加载多个页面并将 Adob​​e Flash Player 安装到我的浏览器，以便我可以访问 Youtube(www.youtube.com)。

谢谢你帮助我。

我正在使用 Netbeans。当我运行我的应用程序时，这就是结果。

```
ant -f C:\\Users\\user\\Documents\\NetBeansProjects\\WebViewBrowser jfxsa-run
init:
Deleting: C:\Users\user\Documents\NetBeansProjects\WebViewBrowser\build\built-jar.properties
deps-jar:
Updating property file: C:\Users\user\Documents\NetBeansProjects\WebViewBrowser\build\built-jar.properties
compile:
Detected JavaFX Ant API version 1.2
Launching <fx:jar> task from C:\Program Files\Java\jdk1.7.0_09\lib\ant-javafx.jar
Launching <fx:deploy> task from C:\Program Files\Java\jdk1.7.0_09\lib\ant-javafx.jar
jfx-deployment:
jar:
run:
Device "Intel(R) HD Graphics Family" (\\.\DISPLAY1) initialization failed : 
WARNING: bad driver version detected, device disabled. Please update your driver to at least version 8.15.10.2302 
```

有人可以告诉我为什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T22:46:17.727

> 添加选项卡以加载多个页面

Willow[浏览器](http://code.google.com/p/willow-browser/)是一个选项卡式 JavaFX 浏览器示例项目 - 查看它以了解如何完成。

> 添加“停止”按钮以停止加载页面，

您可以尝试`webView.getEngine().getLoadWorker().cancel();`在按钮的操作处理程序中执行。我不确定 WebEngine 是否会尊重取消请求。

> 将 Adob​​e Flash Player 安装到我的浏览器

您不能 - WebView 不支持 Flash 等插件。

> 访问 Youtube

使用 YouTube 的 html5 兼容视频播放界面，而不是基于 Flash 的界面。

我创建了一些[示例代码来在 WebView 中播放 YouTube 视频](https://gist.github.com/jewelsea/1437374)。

> 警告：检测到错误的驱动程序版本，设备已禁用。请将您的驱动程序更新到至少版本 8.15.10.2302

您的显示驱动程序已过期并且不符合使用 JavaFX 的最低要求 - 您应该将其更新到较新的版本。

# c# - SMO 中的连接超时

> ID：15006015
> 
> 赞同：4
> 
> 时间：2013-02-21T15:28:53.053
> 
> 标签：c#, primary-key, smo

我正在将大量行插入数据库并尝试在其上建立主键。如果我立即创建表并建立一个键，即使使用 SQLBulkCopy 命令，插入数据的时间也是 10 倍。所以这不是一个可行的选择。我现在要做的是插入数据，全部插入后，使用 SMO 创建主键。问题是，即使连接字符串中的超时设置为 0，我仍然在 alter() 命令上收到超时异常。关于如何解决这个问题的任何想法？

```
connectionString.ConnectTimeout = 0;

ServerConnection scon = null;
using (SqlConnection conn = new SqlConnection(connectionString.ConnectionString))
{
    conn.Open();
    try
    {
        scon = new ServerConnection(conn);
        Console.WriteLine("Server Connection Timeout: " + scon.ConnectTimeout);
        Server serv = new Server(scon);
        Database db = serv.Databases[connectionString.InitialCatalog];
        Table table = db.Tables[tableName];
        Index i = new Index(table, "pk_" + table.Name);
        i.IndexKeyType = IndexKeyType.DriPrimaryKey;
        foreach (String s in PrimaryKey)
        {
            i.IndexedColumns.Add(new IndexedColumn(i, s.Trim()));
        }
        table.Indexes.Add(i);
        table.Alter();
        scon.Disconnect();
    }
    finally
    {
        conn.Close();
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T16:48:49.570

显然 ServerConnection 也有一个语句超时。SMO 充满了这些隐藏的超时。包括 SQLBulkCopy。但是，感谢@Derek 指出这一点。答案是你必须设置 StatementTimeout = 0。我现在正在测试它，但它似乎是答案。

[如何设置命令超时](https://stackoverflow.com/questions/10511984/how-to-set-commandtimeout)

[http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.management.common.serverconnection.statementtimeout.aspx](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.management.common.serverconnection.statementtimeout.aspx)

# objective-c - SDWebImage 3 和 iOS 5.1 下标编译错误

> ID：15006020
> 
> 赞同：1
> 
> 时间：2013-02-21T15:29:06.393
> 
> 标签：objective-c, ios5, sdwebimage

根据[关于](https://github.com/rs/SDWebImage)SDWebImage 3 的 SDWebImage 支持 iOS 5.0（*“SDWebImage 的 3.0 版本不完全向后兼容 2.0，需要 iOS 5.0 最低部署版本”*）。

但是，我在编译它时遇到问题。我将它与 Cocoapods 一起添加到我的 iOS 5.1 项目中。

我收到一个抱怨下标语法的编译错误，可以通过[向 NSObject 添加一个类别以在 .pch 文件中有下标来解决，正如 Jeff Wolski 在这里所建议的那样](https://stackoverflow.com/questions/11425976/compiler-error-expected-method-not-found-when-using-subscript-on-nsarray)。

具体错误是

> 在“NSArray *”类型的对象上未找到读取数组元素的预期方法

它在多个地方都有编译错误，一个例子是在 SDImageCache.m 中的 initWithNamespace 方法中：

> NSArray *paths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES); _diskCachePath = [paths[0] stringByAppendingPathComponent:fullNamespace];

虽然我能够使用 Jeff Woski 解决方案进行编译，但我担心 SDWebImage 3 并不真正支持 iOS 5.x，并且在编译时我可能会在运行时遇到更多问题。

SDWebImage 3 是否支持 iOS 5.x？还有其他方法可以解决编译问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T22:33:39.063

对于任何可能来寻找此信息的人。Jeff Wolski 的解决方案似乎是合适的。我一直在广泛使用它，因此它似乎没有任何问题。

**更新：**

请注意，该应用程序的 base-sdk 不是 iOS 6.0。部署目标可以是 iOS 5.0，但 SDK 必须是 6.0 才能工作。

使用正确的 base-sdk 没有必要做任何变通方法。

# python - 这是 WSGI 应用程序的一个好的 python 多线程模式吗？

> ID：15006026
> 
> 赞同：3
> 
> 时间：2013-02-21T15:29:28.770
> 
> 标签：python, multithreading, design-patterns, wsgi

这是一个好的多线程模式吗？它有效，但它是如此简单，以至于我怀疑一定有一些隐藏的陷阱。我想在 WSGI 应用程序中使用它来获取异步 URL。

我受到[GAE Asynchronous Requests](https://developers.google.com/appengine/docs/python/urlfetch/asynchronousrequests)的启发。

```
import datetime
import time
import threading

start_time = datetime.datetime.now()

def func(value):
    print 'START: {} {}'.format(value, datetime.datetime.now())
    time.sleep(5)
    print 'END: {} {}'.format(value, datetime.datetime.now())
    return str(value) * 10

class MyThread(threading.Thread):
    def __init__(self, func, args=(), kwargs={}):
        super(MyThread, self).__init__()
        self.func = func
        self.args = args
        self.kwargs = kwargs
        self.result = None

    def run(self):
        self.result = self.func(*self.args, **self.kwargs)

    def get_result(self):
        self.join()
        return self.result

def run_async(*args, **kwargs):
    t = MyThread(*args, **kwargs)
    t.start()
    return t

# This will be called inside WSGI request handler only:

t1 = run_async(func=func, args=(1,))
t2 = run_async(func=func, args=(2,))
t3 = run_async(func=func, args=(3,))

print '\n'
print 'Do other stuff...'
print '\n'

print t1.get_result()
print t2.get_result()
print t3.get_result()

print '=' * 70
print 'Duration: {}'.format(datetime.datetime.now() - start_time) 
```

输出是：

```
START: 1 2013-02-21 16:15:51.918112
START: 2 2013-02-21 16:15:51.918642
START: 3 2013-02-21 16:15:51.919138

Do other stuff...

END: 1 2013-02-21 16:15:56.918900
1111111111
END: 2 2013-02-21 16:15:56.924068
2222222222
END: 3 2013-02-21 16:15:56.924465
3333333333 
```

# microdata - 嵌套在产品中的优惠（带有 priceSpecification）引发警告

> ID：15006029
> 
> 赞同：3
> 
> 时间：2013-02-21T15:29:34.550
> 
> 标签：microdata, schema.org

将具有 priceSpecification 的 Offer 嵌套在 Product中会在 Google Rich Snippets 测试工具中引发*不完整的微数据警告。*

这个

```
<div itemscope itemtype="http://schema.org/Product">
    <h1 itemprop="name">1984 Vintage Selection Cabernet Sauvignon</h1>
    <p itemprop="description">Cabernet Sauvignon.</p>
    <div itemprop="offers" itemscope itemtype="http://schema.org/Offer">
        <p itemprop="priceSpecification" itemscope itemtype="http://schema.org/priceSpecification">Prices start at 
        <meta itemprop="priceCurrency" content="GBP" />£<span itemprop="price">0.71</span> (per bottle)</p>
        <meta itemprop="validThrough" content="2013-09-01" />
    </div>
</div> 
```

在 google 丰富网页摘要测试工具中引发以下警告： *警告：schema.org 的微数据不完整。*

如果我将优惠移到产品之外：

```
<div itemscope itemtype="http://schema.org/Product">
    <h1 itemprop="name">1984 Vintage Selection Cabernet Sauvignon</h1>
    <p itemprop="description">Cabernet Sauvignon.</p>
</div>
<div itemprop="offers" itemscope itemtype="http://schema.org/Offer">
    <p itemprop="priceSpecification" itemscope itemtype="http://schema.org/priceSpecification">Prices start at 
    <meta itemprop="priceCurrency" content="GBP" />£<span itemprop="price">0.71</span> (per bottle)</p>
    <meta itemprop="validThrough" content="2013-09-01" />
</div> 
```

那么警告不再抛出，但这似乎没有意义，因为优惠未链接到它适用的产品。

schema.org 上的所有示例都将 Offer 嵌套在 Product 中，但是，它们都没有使用 priceSpecification。我只能找到一篇博文，其中 Offer 没有嵌套在 Product 中：[http](http://seolobster.de/richsnippets-schema-org-products-update) ://seolobster.de/richsnippets-schema-org-products-update 。这并不能让我有信心在现场环境中使用。

哪个是对的？特别是如果您提供多个优惠？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-18T14:43:02.597

我有同样的问题，我只是通过艰苦的试验和错误才弄清楚：问题是，即使*price*是*priceSpecification*模式的一部分，它*仍然*需要在常规*offer*的*priceSpecification*元标记之外定义！

 *我需要*priceSpecification*因为我们显示的价格包括和不包括增值税，现在我不知道如何实施这个！如果我必须在*offer*中定义价格，我如何判断它是否包含增值税？*valueAddedTaxIncluded*不是*报价*模式的一部分！*一个只包含valueAddedTaxIncluded=true*的空 div ？好的，那么我如何在没有增值税的情况下实施其他价格呢？这将在报价中定义两次价格，这是不可能的！

此外，为什么 schema.org 和 getschema.org 在涉及示例代码以及如何正确实现任何给定模式时如此无用？如果你想让人们采用一些花哨的新技术——告诉他们怎么做！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T19:01:43.393

根据您的示例，我认为您不需要使用单独的 priceSpecification 属性。相反，您可以直接将 price 和 priceCurrency 属性添加到 Offer，如下例所示。

```
<div itemscope itemtype="http://schema.org/Product">
  <h1 itemprop="name">1984 Vintage Selection Cabernet Sauvignon</h1>
  <p itemprop="description">Cabernet Sauvignon.</p>
  <div itemprop="offers" itemscope itemtype="http://schema.org/Offer">
    Prices start at <meta itemprop="priceCurrency" content="GBP" />£
    <span itemprop="price">0.71</span> (per bottle)
  </div>    
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-01T11:23:23.957

如前所述，报价也需要价格标签。标签测试器允许的一种解决方案是将数据添加为元标签，如下所示：

```
<meta itemprop="price" content="79" /> 
```

我不确定谷歌是否会解析并显示这一点。*

# php - 在 2.5 上显示购物车中的商品数量？

> ID：15006030
> 
> 赞同：0
> 
> 时间：2013-02-21T15:29:34.987
> 
> 标签：php, joomla, virtuemart

我正在使用下面的代码根据购物车中的商品数量显示一个数字。如果有 1 个项目，则生成数字 1，显示 2 个项目和 2 等等。

问题是它显示了 id 为 [1] 的产品的数量。如何更改它以使其适用于所有产品 ID？

```
<?php $array = unserialize($_SESSION['__vm']['vmcart']); 
$amount = $array->products[1]->amount;
if ($amount != 0){ echo $amount; } else { echo 0; } ?> 
```

[1] 是产品 ID。我如何将其更改为接受所有产品 ID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T15:36:17.120

您想循环浏览所有产品吗？就像是 ...

```
<?php 
    $array = unserialize($_SESSION['__vm']['vmcart']); 
    foreach($array->products as $product){
        $amount = $product->amount;
        if ($amount != 0){ echo $amount; } else { echo 0; } 
    }
?> 
```

添加所有产品...

```
<?php 
    $array = unserialize($_SESSION['__vm']['vmcart']); 
    $total = 0;
    foreach($array->products as $product){
        $total += $product->amount;
    }
    echo "Total Products: " . $total;
?> 
```

# javascript - Yii添加类错误时是否有函数回调可用

> ID：15006032
> 
> 赞同：0
> 
> 时间：2013-02-21T15:29:43.310
> 
> 标签：javascript, jquery, yii, transitions

我正在使用 Yii 构建一些表单。我想完善它在客户端验证中提供的用户体验。 `'enableClientValidation'=>true,` 添加类错误时，我目前正在使用 CSS 转换来动画显示错误消息的方式。

```
.new_events .bookingError {
    display: block !important;
    width: 243px;
    position: relative;
    margin: -36px 0px 0px 312px;
    font-size: 1.3em;
    color: red;
    z-index: 0;
        -webkit-transition: all 1s ease-in-out;
        -moz-transition: all 1s ease-in-out;
        -o-transition: all 1s ease-in-out;
        transition: all 1s ease-in-out;
}
.new_events .error .bookingError {
    margin: 0px 0px 0px 312px;
} 
```

美好的。但我真的很想在这些动画上支持 IE，我想到的唯一方法是在 YII 添加或切换 .error 之后以某种方式使用回调，然后对其进行 animate({},XX) .. 那里有什么灯吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T09:44:32.560

Yii 使用纯 jQuery 来执行此操作，您要查找的代码在 jquery.yiiactiveform.js 中，即 updateInput 函数。我在这一点上看到的唯一解决方案是编写自己的 javascript，例如添加一个额外的触发器调用：

```
$(input).trigger('cssErrorClassAdded') 
```

默认情况下，yii 有一个 packages.php 指向所有不同的插件（在框架中的 /web/js/ 下）。添加包含您自己的 php 文件并覆盖“yiiactiveform”包以指向您的版本的派生 CClientScript 文件相当容易。

# windows - Windows Phone：如何获取堆栈面板内图像标签的图像源值？

> ID：15006033
> 
> 赞同：0
> 
> 时间：2013-02-21T15:29:43.870
> 
> 标签：windows, windows-phone-7

我有一些堆栈面板。每个堆栈面板都有一个图像标签。代码如下所示：

```
....
<StackPanel>
     <Image Source="/Puzzle15;component/Images/Themes/Easy/p5.png" Tag="5"/>
</StackPanel>

<StackPanel>
     <Image Source="/Puzzle15;component/Images/Themes/Easy/p6.png" Tag="6"/>
</StackPanel>

<StackPanel>
     <Image Source="/Puzzle15;component/Images/Themes/Easy/p7.png" Tag="7"/>
</StackPanel>
... 
```

我想通过使用代码获取图像源值

```
for(int i = 0; i <= 14; i++)
{
    String s = ((Image)((StackPanel)ContentPanel.Children[i]).Children[0]).Source.ToString();
    MessageBox.Show(s);
} 
```

结果显示“System.Windows.Media.Imaging.BitmapImage”

你能告诉我获取源值的方法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T15:39:12.210

```
var bms = ((Image)((StackPanel)ContentPanel.Children[i])
          .Children[0]).Source as BitmapImage;
var addy = bms.UriSource.ToString(); 
```

顺便说一句，您这样做的方式与 WPF（以及 silverlight、WP、Modern UI 等）编程是对立的。我强烈建议您阅读一些教程，了解“视图模型”的含义以及如何使用绑定。你最终会过得更好。

# sql - SQL 根据其他行删除重复行

> ID：15006039
> 
> 赞同：3
> 
> 时间：2013-02-21T15:29:58.997
> 
> 标签：sql, oracle, duplicates

我有两个表（一个显示发送给客户的所有程序的记录，另一个显示用户对其执行操作的所有程序的记录）。我的最终目标是计算发送给用户的那些程序中有多少被执行了。我现在有办法做到这一点，但有一个问题。程序可能会在一天内多次发送给用户（我将使用 20 个为例）。如果用户在 24 小时内对该程序采取了行动，我不希望它算作 19 个未执行的程序和 1 个已执行的程序。我希望它算作 1 对 0 失败的程序执行。

包含发送给客户的程序的表需要被过滤掉，以便发送给客户的每个程序每 24 小时只显示一次。

我的解决方案是有一个“窗口”类型的东西，这样一旦将程序发送给客户，它就会为该客户“锁定”24 小时，因此它不会出现在我的“发送给客户的程序”查询中多次.

我有一张这样的桌子：

```
Customer    Time    Program
-----------------------------------
1           8:05    a
1           10:30   a
1           11:30   a
1           12:30   b
1           1:25    a
2           9:38    b
2           10:38   c
2           1:36    c
2           2:40    c
2           3:41    b
.
.
. 
```

我想获得一个表（查询，而不是删除），在特定时间范围内删除每个客户的重复程序（令人困惑！我知道）

这是我想要的（例如 3 小时的时间范围）：

```
Customer    Time    Program
-----------------------------------
1           8:05    a
1           11:30   a
1           12:30   b
2           9:38    b
2           10:38   c
2           2:40    c
2           3:41    b
.
.
. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T15:34:03.287

尝试这个：

```
select *
from t
where not exists (select 1 from t t2
                  where t2.customer = t.customer and
                        t2.program = t.program and
                        t2.time - t.time < 3.0/24 and
                        t2.time > t.time
                 ) 
```

日期时间算术取决于数据库，但这适用于其中的许多数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T17:07:55.890

我认为您的意思可以（仅）通过递归查询来解决。这是一个解决方案：

```
WITH cte AS
  ( SELECT 
        customer, program, time,
        ROW_NUMBER() 
            OVER (PARTITION BY customer, program
                  ORDER BY time)
          AS rn, 
        MIN(time) 
            OVER (PARTITION BY customer, program
                  ORDER BY time 
                  RANGE BETWEEN 3.0/24 FOLLOWING 
                            AND UNBOUNDED FOLLOWING)
          AS next_time
    FROM a
  )

SELECT 
    customer, time, program
FROM 
    cte
START WITH rn = 1
CONNECT BY PRIOR customer = customer
       AND PRIOR program = program
       AND PRIOR next_time = time
ORDER BY 
    customer, time, program ; 
```

您也可以替换`MIN(time)`为`FIRST_VALUE(time)`上面并获得相同的结果。它可能更有效。

在**[SQL-Fiddle测试](http://sqlfiddle.com/#!4/14cd6/1)**

大桌子上的效率可能不会很好。您可以尝试使用较小的数据集运行查询。

你至少应该添加这个索引，所以它会进行索引扫描：

```
CREATE INDEX ix                -- choose a name for the index
  ON tableX                    -- the table name
  (customer, program, time) ; 
```

您也可以跳过最终排序或更改它，使其更类似于使用的索引：

```
ORDER BY 
    customer, program, time ; 
```

# html - 如何根据设备显示/隐藏内容

> ID：15006040
> 
> 赞同：2
> 
> 时间：2013-02-21T15:30:02.273
> 
> 标签：html, css, email, media

我正在寻找一种基于客户打开电子邮件的设备来显示/隐藏电子邮件通讯内容的方法。

我目前在 head 部分中有这段代码：

```
 @media only screen and (max-width: 480px) {
  #mobile { display: block; }  /* show it on small screens */
#normal { display: none; }   /* hide it elsewhere */
}

@media only screen and (min-width: 481px) {
  #mobile { display: none; }   /* hide it elsewhere */
  #normal { display: block; }  /* show it on large screens */
} 
```

随着：

```
<div id="mobile">content</div> or <div id="normal">content1<div> 
```

如果我将它用于网络，这很好用，我可以缩放我的浏览器窗口，内容会根据窗口的宽度出现/消失，但是一旦我通过我们的电子邮件系统发送测试，它就可以在移动设备上正常工作，但会崩溃在桌面 (Gmail) 上。

因为这是一封电子邮件，所以我不能使用 javascript，所以它都需要是 html/css。

我做错了什么或遗漏了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-26T22:18:15.183

我感觉到你的痛苦。在 html 电子邮件时事通讯中显示和隐藏内容让我很困惑！

```
/* Hide on Desktop */

.hide-desktop { 
    /* non-gmail */
    display: none; 

    /* gmail */
    font-size: 0; 
    max-height: 0; 
    line-height: 0; 

    /* outlook */
    mso-hide: all;

    /* optional, required only if you're using padding */
    padding: 0; 

}
@media (max-width: 480px) {
    .hide-desktop {
        display: block !important;
        font-size: 12px !important;
        max-height: none !important;
        line-height: 1.5 !important;
    }
}

/* Hide on Mobile */

@media (max-width: 480px) {
    .hide-mobile {
        display: none;
        max-height: 0; 
    }
} 
```

**注意**：不要忘记内联`.hide-desktop`规则，即在媒体查询之外。

因此，使用媒体查询和一些技巧，我们可以为桌面做一个看涨的 hide all，然后撤消它的媒体查询。相反，由于移动客户端对媒体查询有很好的支持，我们可以单独使用媒体查询隐藏移动内容。离群值 gmail 只是获得桌面视图——这很不幸，但仍然可以使用。

# build - 每次我构建 Jekyll 站点时，Mac 终端都会写这些行

> ID：15006043
> 
> 赞同：1
> 
> 时间：2013-02-21T15:30:11.173
> 
> 标签：build, terminal, jekyll

每次我通过终端（Mac）使用 Jekyll 构建我的网站时，一切正常，但这些行显示：

```
[2013-02-21 16:17:38] INFO  WEBrick 1.3.1
[2013-02-21 16:17:38] INFO  ruby 1.8.7 (2012-02-08) [universal-darwin11.0]
[2013-02-21 16:18:38] INFO  WEBrick::HTTPServer#start: pid=897 port=4000 
```

然后我无法输入任何东西——显示了灰色的小方块，但没有像往常一样显示我的计算机名称，后跟分号。如果我想再次输入内容，我需要使用以下消息关闭/重新打开终端窗口：

“关闭此窗口将终止正在运行的进程：登录、bash、ruby。”

请注意，我不是终端专家；-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:49:56.400

您使用什么命令来构建站点？您在这 3 行中看到的是正在运行并为您的站点提供服务的本地网络服务器。如果您正在运行`jekyll --server`，您将获得此网络服务器；在浏览器中打开`localhost:4000`，您将看到您的网站。

如果您只想生成站点，只需在`jekyll`没有`--server`标志的情况下运行。

在终端中，您可以通过按 Ctrl-C 取消任何正在运行的进程，例如网络服务器。这样，如果您不小心运行了错误的命令，就不需要关闭窗口。

# wordpress - Wordpress 和使用 wp_query 并希望增加循环中的帖子数量

> ID：15006045
> 
> 赞同：-2
> 
> 时间：2013-02-21T15:30:13.723
> 
> 标签：wordpress

我想我遗漏了一些非常明显的东西，但我仍在学习 Wordpress 的架构，而且我正在画一个空白。

一个朋友给了我一个空白主题来练习。主主页索引循环如下所示，带有分页。我想将每页结果从当前值（10）增加到更大的值（50）。

我搜索了 Wordpress.org，浏览了 wp_query 等。人。无济于事。

```
<div id="content">
    <?php /* Top post navigation */ ?>
    <?php global $wp_query; $total_pages = $wp_query->max_num_pages; if ( $total_pages > 1 ) { ?>

    <?php } ?>

    <?php /* The Loop — with comments! */ ?>
    <?php while ( have_posts() ) : the_post() ?>

    <?php /* Create a div with a unique ID thanks to the_ID() and semantic classes with post_class() */ ?>
                    <div id="post-<?php the_ID(); ?>" <?php post_class(); ?>>
    <?php /* an h2 title */ ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:06:00.917

我很确定这是正确的，但我不在一个可以测试它的地方。
在全局 $wp_query 之后，您可以通过添加参数让它知道您希望查询的详细程度。

```
<?php global $wp_query; 

$wp_query = new WP_Query('posts_per_page=50');

$total_pages = $wp_query->max_num_pages;  if ( $total_pages > 1 ) { ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:09:11.810

尝试：

```
query_posts('posts_per_page=50'); 
```

如果你想使用 $wp_query，post_per_page 应该可以用作参数。

# c++ - 使用 SWIG 将自定义 C++ 异常动态地重新抛出为 Python 异常

> ID：15006048
> 
> 赞同：23
> 
> 时间：2013-02-21T15:30:35.513
> 
> 标签：c++, python, exception, reflection, swig

**情况**

我想使用 SWIG 为 C++ API 创建 Python 语言绑定。某些 API 函数可能会引发异常。C++ 应用程序具有自定义异常的层次结构，如下例所示：

```
std::exception
  -> API::Exception
    -> API::NetworkException
      -> API::TimeoutException
      -> API::UnreachableException
    -> API::InvalidAddressException 
```

所需的行为如下：

1.  所有异常类型都应该有一个匹配的 Python 类作为***wrapper***。这些包装类应该是***有效的 Python 异常***。

2.  当 API 调用引发***C++ 异常***时，应将其***捕获***。***应抛出***相应的***Python 异常***（即捕获的 C++ 异常的包装类）。

**   这应该是一个动态过程：Python***异常类型是在运行时决定的***，仅基于捕获的 C++ 异常的运行时类型。这样，无需在 SWIG 接口文件中描述完整的异常层次结构。* 

 ***问题和疑问**

1.  包装类没有 Python 例外。

    虽然 SWIG 为所有自定义异常创建包装类（就像任何其他类一样），但这些类不是 Python 异常。基本异常的包装器（`API::Exception`在示例中）扩展`Object`而不是`BaseException`Python 类，Python 中的所有异常都应从该类派生。

    此外，似乎不可能让 SWIG 手动添加父类。请注意，当通过使用 SWIG 和 Java 时，这是可能的`%typemap(javabase)`（有关详细信息，请参阅[SWIG 文档](http://www.swig.org/Doc2.0/Java.html#Java_code_typemaps)）。

2.  [Python C API](http://docs.python.org/2/c-api/)如何抛出用户定义的异常？

    从 Python C API 引发 Python 异常的最常见方法是调用`PyErr_SetString` [[reference]](http://docs.python.org/2/c-api/exceptions.html#PyErr_SetString)。这也显示在下面的演示应用程序中。

    但这对于 Python 的标准（内置）异常来说只是微不足道的，因为对它们的引用存储在Python C API的全局变量 [ [reference ] 中。](http://docs.python.org/2/c-api/exceptions.html#standard-exceptions)

    我知道有一种方法`PyErr_NewException` [[reference]](http://docs.python.org/2/c-api/exceptions.html#PyErr_NewException)可以获取对自定义异常的引用，但我没有得到这个工作。

3.  [Python C API](http://docs.python.org/2/c-api/)如何在运行时评估 C++ 类型，然后通过名称找到相应的 Python 包装类？

    我假设可以通过Python C API的[反射部分在运行时按名称搜索 Python 类。](http://docs.python.org/2/c-api/reflection.html)这是要走的路吗？它在实践中是如何完成的？

**演示应用**

为了解决这个问题，我创建了一个微型 C++ API，其中包含一个计算数字阶乘的函数。它有一个最小的自定义异常层次结构，只包含一个类`TooBigException`。

请注意，此异常充当一般问题中的基本异常，应用程序应使用它的任何子类。这意味着解决方案只能使用捕获的异常的动态（即运行时）类型在 Python 中重新抛出它（见下文）。

演示应用程序的完整源代码如下：

```
// File: numbers.h
namespace numbers {
int fact(int n);
}

// File: numbers.cpp
#include "TooBigException.h"
namespace numbers {
int fact(int n) {
    if (n > 10) throw TooBigException("Value too big", n);
    else if (n <= 1) return 1;
    else return n*fact(n-1);
}
}

// File: TooBigException.h
namespace numbers {
class TooBigException: public std::exception {
public:
    explicit TooBigException(const std::string & inMessage,
                             const int inValue);
    virtual ~TooBigException() throw() {}
    virtual const char* what() const throw();
    const std::string & message() const;
    const int value() const;
private:
    std::string mMessage;
    int mValue;
};
}

// File: TooBigException.cpp
#include "TooBigException.h"
namespace numbers {
TooBigException::TooBigException(const std::string & inMessage, const int inValue):
    std::exception(),
    mMessage(inMessage),
    mValue(inValue)
{
}
const char* TooBigException::what() const throw(){
    return mMessage.c_str();
}
const std::string & TooBigException::message() const {
    return mMessage;
}
const int TooBigException::value() const {
    return mValue;
}
} 
```

要获取 Python 绑定，我使用以下 SWIG 接口文件：

```
// File: numbers.i
%module numbers
%include "stl.i"
%include "exception.i"

%{
#define SWIG_FILE_WITH_INIT
#include "TooBigException.h"
#include "numbers.h"
%}

%exception {
    try {
        $action
    }
    catch (const numbers::TooBigException & e) {
        // This catches any self-defined exception in the exception hierarchy,
        // because they all derive from this base class. 
        <TODO>
    }
    catch (const std::exception & e)
    {
        SWIG_exception(SWIG_RuntimeError, (std::string("C++ std::exception: ") + e.what()).c_str());
    }
    catch (...)
    {
        SWIG_exception(SWIG_UnknownError, "C++ anonymous exception");
    }
}

%include "TooBigException.h"
%include "numbers.h" 
```

因此，对 API 的每次调用都由 try-catch 块包装。我们的基本类型的第一个异常被捕获和处理。然后使用 SWIG 异常库捕获并重新抛出所有其他异常。

请注意，任何子类都`numbers::TooBigException`被捕获，并且***应该抛出它们的动态（即运行时）类型***的包装器，而不是它们的静态（即编译时）类型的包装器，这总是`TooBigException`！

该项目可以通过在 Linux 机器上执行以下命令轻松构建：

```
$ swig -c++ -python numbers.i
$ g++ -fPIC -shared TooBigException.cpp numbers.cpp numbers_wrap.cxx \
    -I/usr/include/python2.7 -o _numbers.so 
```

**当前实施**

我当前的实现仍然（成功地）抛出了一个固定的标准 Python 异常。然后将上面的代码`<TODO>`替换为：

```
PyErr_SetString(PyExc_Exception, (std::string("C++ self-defined exception ") + e.what()).c_str());
return NULL; 
```

这在 Python 中给出了以下（预期的）行为：

```
>>> import numbers
>>> fact(11)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
Exception: C++ self-defined exception Value too big 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-22T13:54:45.880

看起来有人已经在 swig-user 列表上回答了你的基本问题......

```
%exception {
  try {
    $action
  } catch (MyException &_e) {
    SWIG_Python_Raise(SWIG_NewPointerObj(
            (new MyException(static_cast<const MyException& >(_e))),  
            SWIGTYPE_p_MyException,SWIG_POINTER_OWN),
        "MyException", SWIGTYPE_p_MyException); 
    SWIG_fail;
  } 
} 
```

我相信，这确实假设您已经为异常类生成了包装器。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-03T00:51:08.257

层次结构示例

```
std::exception
  -> API::Exception
    -> API::NetworkException
      -> API::TimeoutException
      -> API::UnreachableException
    -> API::InvalidAddressException 
```

例子.i：

```
%module example
%include "stl.i"
%include "exception.i"

%{
#define SWIG_FILE_WITH_INIT
#include "example.cpp"
%}

%{

#define CATCH_PE(Namespace,Exception) \
    catch(const Namespace::Exception &e) \
    { \
       SWIG_Python_Raise(SWIG_NewPointerObj(new Namespace::Exception(e), \
            SWIGTYPE_p_##Namespace##__##Exception,SWIG_POINTER_OWN), \
            #Exception, SWIGTYPE_p_##Namespace##__##Exception); \
       SWIG_fail; \
    } \
/**/

// should be in "derived first" order
#define FOR_EACH_EXCEPTION(ACTION) \
   ACTION(API,UnreachableException) \
   ACTION(API,TimeoutException) \
   ACTION(API,InvalidAddressException) \
   ACTION(API,NetworkException) \
   ACTION(API,Exception) \
/**/
// In order to remove macros, need traits:
// http://swig.10945.n7.nabble.com/traits-based-access-to-swig-type-info-td12315.html
%}

%exception {
    try {
        $action
    }
    FOR_EACH_EXCEPTION(CATCH_PE)
    catch (const std::exception & e)
    {
        SWIG_exception(SWIG_RuntimeError, (std::string("C++ std::exception: ") + e.what()).c_str());
    }
    catch (...)
    {
        SWIG_exception(SWIG_UnknownError, "C++ anonymous exception");
    }
}

%include "example.cpp" 
```

例子.cpp：

```
#include <exception>
#include <stdexcept>

namespace API
{
    struct Exception: std::exception
    {
        virtual const char* what() const throw()
        {
            return "It is API::Exception";
        }
    };
    struct NetworkException: Exception
    {
        virtual const char* what() const throw()
        {
            return "It is API::NetworkException";
        }
    };
    struct TimeoutException: NetworkException
    {
        virtual const char* what() const throw()
        {
            return "It is API::TimeoutException";
        }
    };
    struct UnreachableException: NetworkException
    {
        virtual const char* what() const throw()
        {
            return "It is API::UnreachableException";
        }
    };
    struct InvalidAddressException: Exception
    {
        virtual const char* what() const throw()
        {
            return "It is API::InvalidAddressException";
        }
    };

    inline void select(int i)
    {
        switch(i)
        {
            case 0: throw Exception();
            case 1: throw NetworkException();
            case 2: throw TimeoutException();
            case 3: throw UnreachableException();
            case 4: throw InvalidAddressException();
            default: throw std::runtime_error("It is std::runtime_error");
        }
    }
} 
```

建造：

```
swig -c++ -python example.i &&
g++ -fPIC -shared -lpython2.7 example.cpp example_wrap.cxx -I/usr/include/python2.7 -o _example.so 
```

测试.py：

```
#!/usr/bin/env python2.7

from exceptions import BaseException
from example import *

def catch(i):
    try:
        select(i)
    except UnreachableException as e:
        print "Caught UnreachableException"
        print e.what()
        print e
    except TimeoutException as e:
        print "Caught TimeoutException"
        print e.what()
        print e
    except InvalidAddressException as e:
        print "Caught InvalidAddressException"
        print e.what()
        print e
    except NetworkException as e:
        print "Caught NetworkException"
        print e.what()
        print e
    except Exception as e:
        print "Caught Exception"
        print e.what()
        print e
    except BaseException as e:
        print "Caught BaseException"
        print str(e)
    print "_"*16

for i in xrange(6):
    catch(i) 
```

输出是：

```
Caught Exception
It is API::Exception
<example.Exception; proxy of <Swig Object of type 'API::Exception *' at 0x7f9f54a02120> >
________________
Caught NetworkException
It is API::NetworkException
<example.NetworkException; proxy of <Swig Object of type 'API::NetworkException *' at 0x7f9f54a02120> >
________________
Caught TimeoutException
It is API::TimeoutException
<example.TimeoutException; proxy of <Swig Object of type 'API::TimeoutException *' at 0x7f9f54a02120> >
________________
Caught UnreachableException
It is API::UnreachableException
<example.UnreachableException; proxy of <Swig Object of type 'API::UnreachableException *' at 0x7f9f54a02120> >
________________
Caught InvalidAddressException
It is API::InvalidAddressException
<example.InvalidAddressException; proxy of <Swig Object of type 'API::InvalidAddressException *' at 0x7f9f54a02120> >
________________
Caught BaseException
C++ std::exception: It is std::runtime_error
________________ 
```

基于[maillist 中的答案](http://swig.10945.n7.nabble.com/Dynamically-rethrowing-self-defined-C-exceptions-as-Python-exceptions-tp13087p13089.html)。*

# python - 替换字符串中的未知值

> ID：15006053
> 
> 赞同：1
> 
> 时间：2013-02-21T15:30:46.887
> 
> 标签：python, python-3.x

我正在运行一个将一堆信息转储到目录中的文件的进程。我稍后运行相同的过程并对目录进行比较以查看发生了什么变化。由于内存地址，我得到了一堆错误的更改。

例如：

1.  运行 1 给出

    ```
    0xb7390dd0 
    ```

2.  运行 2 给出

    ```
    0xb73909c8 
    ```

我希望能够忽略内存地址不同的事实？实现这一目标的最佳方法是什么？

我不能使用`.replace()`，因为我事先不知道地址是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T15:37:22.340

您可以创建一个正则表达式来匹配值的模式并替换匹配的值

```
>>> pattern = r'0x\w{8}'
>>> matcher = re.compile(pattern)
>>> matcher.match('0xb73909c8: has the error')
<_sre.SRE_Match object at 0x01E25288>
>>> matcher.match('0xb73909c8: has the error').group()
'0xb73909c8' 
```

那么你可以做

```
>>> '0xb73909c8: has the error'.replace(matcher.match('0xb73909c8: has the error').group(), 'Address')
'Address: has the error' 
```

# wxpython - 如何在wxPython上控制面板正方形的背景颜色？

> ID：15006056
> 
> 赞同：0
> 
> 时间：2013-02-21T15:30:50.570
> 
> 标签：wxpython

所以我正在从头开始编写代码，我只需要放置一个灰色背景的静态文本（不变）。我可以用`.ForegroundColour`但不能用`BackgroundColour`

这是代码

```
s_text2 = wx.StaticText(self.panel1, -1, "\n\n\nStop\n\n\n", (x1size+30,10)) 
s_text2.SetBackgroundColour('grey') 
```

有什么想法吗？

是的，这是一个简短的示例

```
import wx

class Prototype(wx.Frame):
     def __init__(self, parent, title):
        wx.Frame.__init__(self, None, size=(550,300))

        self.InitUI()
        self.Centre()
        self.Show()
    #define User Interface
    def InitUI(self):
        self.panel1 = wx.Panel(self, -1)
        self.sizer = wx.BoxSizer() #Main window sizer
        self.sizer.Add(self.panel1, 1, flag=wx.EXPAND)

        self.hbox = wx.BoxSizer(wx.HORIZONTAL)
        self.panel1.SetSizer(self.hbox)

        #Static Text
        s_text1 = wx.StaticText(self.panel1, -1, "Hello World!", (10,5)) #top text
        self.s_text2 = wx.StaticText(self.panel1, -1, "\n\n\nStop\n\n\n", (300,10)) #top text
        self.s_text2.SetBackgroundColour("blue")
if __name__ == '__main__':
    app = wx.App()
    Prototype(None, title='')
    app.MainLoop() 
```

`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:30:03.440

这对我有用：

```
import wx

class MainWindow(wx.Frame):
    def __init__(self, *args, **kwargs):
        wx.Frame.__init__(self, *args, **kwargs)

        self.panel = wx.Panel(self)
        self.text = wx.StaticText(self.panel, label="Test")
        self.text.SetBackgroundColour("gray")
        self.text.SetForegroundColour(wx.WHITE)

        self.sizer = wx.BoxSizer()
        self.sizer.Add(self.text)

        self.panel.SetSizerAndFit(self.sizer)  
        self.Show()

app = wx.App(False)
win = MainWindow(None)
app.MainLoop() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T20:36:27.803

如果您使用 wxGTK 端口，则静态文本可能无法具有背景颜色，因为它们不是真正的小部件。相反，它们只是直接在父对象上绘制，并且活动主题可以对是否使用背景颜色产生一些影响。

wx.lib.stattext 中有一个通用类，它是一个真正的小部件，因此您可以使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T20:30:47.937

我刚刚解决了，谢谢大家尝试

```
import wx

class Prototype(wx.Frame):
    def __init__(self, parent, title):
        wx.Frame.__init__(self, None, size=(550,300))

        self.InitUI()
        self.Centre()
        self.Show()
    #define User Interface
    def InitUI(self):
        self.panel1 = wx.Panel(self, -1)

        #Static Text
        s_text1 = wx.StaticText(self.panel1, -1, "Hello World!", (10,5)) #top text
        self.s_text2 = wx.TextCtrl(self.panel1, style=wx.TE_READONLY | wx.NO_BORDER, pos=(300,10)) #top text
        self.s_text2.AppendText("gray")
        self.s_text2.SetBackgroundColour("gray")
if __name__ == '__main__':
    app = wx.App()
    Prototype(None, title='')
    app.MainLoop() 
```

# android - 如何从Activity调用外部类的方法？

> ID：15006057
> 
> 赞同：0
> 
> 时间：2013-02-21T15:30:53.477
> 
> 标签：android, sqlite

首先让您知道我是 Android 新手。

试图创建多个类来处理数据库表操作。创建了一个数据库助手，如下所示：

```
 public class WSDatabaseHelper extends SQLiteOpenHelper {

        private static final String DATABASE_NAME = "wsemp";
        private static final int DATABASE_VERSION = 5;

        public WSDatabaseHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase database) {
            .............
        }

        @Override
    public void onUpgrade(SQLiteDatabase database, int oldVersion, int newVersion) {
            ................
        }
    } 
```

创建了一个类来处理数据库表操作：

```
public class CustomerBean {
    private WSDatabaseHelper database;

    @Override
    public boolean onCreate() {
        database = new WSDatabaseHelper(getContext());
        return false;
    }

public boolean insertObject(valObj) {
    SQLiteDatabase db = database.getWritableDatabase();
    db.insert(.......);
    }
} 
```

但是现在我不确定如何从我的活动或会话文件中调用这个 insertObject 函数。我试过 CustomerBean.isnertObject(obj) 但它要求将方法更改为静态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T15:45:54.153

这种情况下调用方法有两种方式

1.  创建类的对象并调用方法

    ```
     // Create object
     CustomerBean customerBean = new CustomerBean();

     // call the method
     customerBean.insertObject(<insert object here>); 
    ```

2.  使方法静态并从类名中调用它

    ```
    // In CustomerBean class
    public static boolean insertObject(valObj) {
       SQLiteDatabase db = database.getWritableDatabase();
       db.insert(.......);
    }

    //In WSDatabaseHelper class
    CustomerBean.insertObject(<object name here>); 
    ```

这里要纠正的更多事情是在**CustomerBean**类中你已经写了

```
 @Override
   public boolean onCreate() {
     database = new WSDatabaseHelper(getContext());
     return false;
   } 
```

这是不正确的。Android Activity 类的 onCreate() 方法，只有当您的类扩展**Activity**类时，您才能为该方法**添加 @Override注解**

 **希望对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T15:38:20.003

将`static`修饰符添加到您的方法中。然后你应该能够在类之间访问它。**

# c# - 将模型从视图传递到控制器的问题

> ID：15006062
> 
> 赞同：0
> 
> 时间：2013-02-21T15:31:08.867
> 
> 标签：c#, unit-testing, asp.net-mvc-4

我将我的`Checkout`视图与我想传递给我的`Purchase`控制器以绑定到我的`Purchase`视图的模型绑定。在它被传递的那一刻，该值为空。

我究竟做错了什么？

结帐视图：

```
@model List<BasketModels.Product>

@using (Html.BeginForm("Purchased", "Basket", FormMethod.Post))
{

// problem here
    <input type="submit" value="Purchase"/>
} 
```

采购控制器：

```
[HttpPost]
        public ActionResult Purchased(List<BasketModels.Product> products) 
```

产品模式：

```
public class BasketModels
    {
        public class Product
        {
            public int ID { get; set; }
            public string Name { get; set; }
            public string Description { get; set; }

            [DisplayFormat(DataFormatString = "{0:N}", ApplyFormatInEditMode = true)]
            public decimal UnitPrice { get; set; }

            public string ImageURL { get; set; }

            [Display(Name = "Quantity")]
            public int Quantity { get; set; }

            public int Stock { get; set; }

            [DisplayFormat(DataFormatString = "{0:N}", ApplyFormatInEditMode = true)]
            public decimal Price { get; set; }

            [DisplayFormat(DataFormatString = "{0:N}", ApplyFormatInEditMode = true)]
            public decimal TotalPrice { get; set; }
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:43:36.953

我使用以下方法对其进行了测试，并且可以正常工作。

结帐视图

```
@model ProjectName.Models.BasketModels.Product

@using (Html.BeginForm("Purchased", "Basket", FormMethod.Post))
{
    @Html.TextBoxFor(m=>m.Description)
    <input type="submit" value="Purchase"/>
} 
```

外购控制器

```
[HttpPost]
public ActionResult Purchased(BasketModels.Product products)
{
     return View();
} 
```

我意识到您可能仍希望将其绑定为列表。在那种情况下，我几天来一直试图弄清楚如何做到这一点，但我没有解决方案。`List<string>`作品。`List<model>`才不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T12:03:55.513

您可以使用 @Html.HiddenFor(x=>x.modelPropery) 快速而肮脏的路线。这是对您的 DisplayFor 的补充。

# r - ddply 和 colwise - 将其他列作为参数传递

> ID：15006064
> 
> 赞同：2
> 
> 时间：2013-02-21T15:31:10.820
> 
> 标签：r, plyr

我想按组计算一堆变量的加权平均值，所以 ddply 和 colwise 似乎是一个合乎逻辑的选择。我的代码是：

```
library(plyr)

j.parms.by.meas <- ddply(j.subgroups, 
                         .(measure),
                         colwise(weighted.mean, 
                                 .(ee.eer, ee.iplv, sf.per.tstat, kwh.per.sf,
                                   ee.kw.per.sf, ee.kwh.per.sf, efficiency,
                                   motor.eff, ee.lpd, inc.cost), 
                                   j.subgroups$unit.qty)) 
```

但是，我收到以下错误：

```
Error in weighted.mean.default(X[[1L]], ...) : 
  'x' and 'w' must have the same length 
```

看来我将 unit.qty 的整个向量传递给加权平均函数，而不是按照我的意图将 unit.qty 的向量传递给分组变量的子集。有没有一种简单的方法可以将 ddply 生成的子集向量作为参数传递给 ddply 中的指定函数？

以下是一些示例数据 - 请注意，并非所有变量都应为所有度量填充：

```
 measure ee.eer ee.iplv sf.per.tstat kwh.per.sf ee.kw.per.sf ee.kwh.per.sf efficiency motor.eff ee.lpd   inc.cost  unit.qty
9813  High Performance Glazing     NA      NA           NA         NA    0.0004788      1.634573         NA        NA     NA   3.177014    817.00
9814  High Performance Glazing     NA      NA           NA         NA    0.0016200      6.031441         NA        NA     NA   0.889816   5051.00
9815  High Performance Glazing     NA      NA           NA         NA    0.0011559      4.607375         NA        NA     NA   1.502042    836.00
9816  High Performance Glazing     NA      NA           NA         NA    0.0006050      2.286861         NA        NA     NA   1.041064   4027.00
9817  High Performance Glazing     NA      NA           NA         NA    0.0008772      3.574747         NA        NA     NA   2.436068 173610.00
9818  High Performance Glazing     NA      NA           NA         NA    0.0010797      4.288593         NA        NA     NA   1.373322   5328.00
9819  High Performance Glazing     NA      NA           NA         NA    0.0010797      4.288593         NA        NA     NA   1.373322   5668.00
9820  High Performance Glazing     NA      NA           NA         NA    0.0010797      4.288593         NA        NA     NA   1.373322    150.00
9821  High Performance Glazing     NA      NA           NA         NA    0.0012480      4.887974         NA        NA     NA   1.190700  33735.40
9822  High Performance Glazing     NA      NA           NA         NA    0.0014988      6.041895         NA        NA     NA   2.081282   3879.50
9823  High Performance Glazing     NA      NA           NA         NA    0.0012100      4.736534         NA        NA     NA   1.126340     69.70
9824  High Performance Glazing     NA      NA           NA         NA    0.0010308      4.307727         NA        NA     NA   2.693508   1356.03
9825  High Performance Glazing     NA      NA           NA         NA    0.0009654      3.810419         NA        NA     NA   1.180242   1832.00
9826  High Performance Glazing     NA      NA           NA         NA    0.0009654      3.810419         NA        NA     NA   1.180242   2748.00
9827  High Performance Glazing     NA      NA           NA         NA    0.0011123      4.275836         NA        NA     NA   0.493198   1722.90
9828  High Performance Glazing     NA      NA           NA         NA    0.0008511      3.332246         NA        NA     NA   0.987162   1850.00
9829  High Performance Glazing     NA      NA           NA         NA    0.0011237      4.651937         NA        NA     NA   2.382166    224.00
9830  High Performance Glazing     NA      NA           NA         NA    0.0010797      4.288593         NA        NA     NA   1.373322    819.00
9831  High Performance Glazing     NA      NA           NA         NA    0.0014532      6.323424         NA        NA     NA   3.401468   3934.00
9832  High Performance Glazing     NA      NA           NA         NA    0.0011559      4.607375         NA        NA     NA   1.502042   9351.00
10329                  >150 HP     NA      NA           NA         NA           NA            NA        NaN 0.9496114     NA 117.631768    900.00
10330                  >150 HP     NA      NA           NA         NA           NA            NA       0.95 0.9500000     NA 117.631768   1246.00
10331                  >150 HP     NA      NA           NA         NA           NA            NA        NaN 0.9496114     NA 117.631768    265.00
10332                  >150 HP     NA      NA           NA         NA           NA            NA        NaN 0.9496114     NA 117.631768    308.00
10333                  >150 HP     NA      NA           NA         NA           NA            NA        NaN 0.9496114     NA 117.631768    500.00
10334                  >150 HP     NA      NA           NA         NA           NA            NA        NaN 0.9496114     NA 117.631768    335.00
10335                  >150 HP     NA      NA           NA         NA           NA            NA        NaN 0.9496114     NA 117.631768    550.00
10336                  >150 HP     NA      NA           NA         NA           NA            NA       0.95 0.9500000     NA 117.631768    433.00
10337                  >150 HP     NA      NA           NA         NA           NA            NA        NaN 0.9496114     NA 117.631768    676.00
10338                  >150 HP     NA      NA           NA         NA           NA            NA        NaN 0.9496114     NA 117.631768    800.00
10339                  >150 HP     NA      NA           NA         NA           NA            NA       0.95 0.9500000     NA 117.631768    350.00
10340                  >150 HP     NA      NA           NA         NA           NA            NA        NaN 0.9496114     NA 117.631768    750.00
10341                  >150 HP     NA      NA           NA         NA           NA            NA        NaN 0.9496114     NA 117.631768    200.00
10342                  >150 HP     NA      NA           NA         NA           NA            NA       0.95 0.9500000     NA 117.631768   1200.00
10343                  >150 HP     NA      NA           NA         NA           NA            NA        NaN 0.9496114     NA 117.631768    600.00
10344                  >150 HP     NA      NA           NA         NA           NA            NA       0.95 0.9500000     NA 117.631768    433.00
10345                  >150 HP     NA      NA           NA         NA           NA            NA       0.95 0.9500000     NA 117.631768    500.00
10346                  >150 HP     NA      NA           NA         NA           NA            NA        NaN 0.9496114     NA 117.631768    600.00
10347                  >150 HP     NA      NA           NA         NA           NA            NA        NaN 0.9496114     NA 117.631768   4988.00
10348                  >150 HP     NA      NA           NA         NA           NA            NA       0.95 0.9500000     NA 117.631768    250.00 
```

这是来自 dput 的相同数据的转储：

```
structure(list(measure = structure(c(122L, 122L, 122L, 122L, 
122L, 122L, 122L, 122L, 122L, 122L, 122L, 122L, 122L, 122L, 122L, 
122L, 122L, 122L, 122L, 122L, 124L, 124L, 124L, 124L, 124L, 124L, 
124L, 124L, 124L, 124L, 124L, 124L, 124L, 124L, 124L, 124L, 124L, 
124L, 124L, 124L), .Label = c("(2) 4-lamp 4ft T5HO replacing 1000W MH", 
"(2) 6-lamp 4ft T8 replacing 1000W MH", "2-foot lamp", "2-lamp 4ft T5HO replacing 150W HPS", 
"2-lamp 4ft T5HO replacing 150W MH", "2-lamp 4ft T5HO replacing 175W HPS", 
"2-lamp 4ft T5HO replacing 175W MH", "2-lamp 4ft T8 replacing 150W HPS", 
"2-lamp 4ft T8 replacing 175W HPS", "2-lamp 4ft T8 replacing 175W MH", 
"3-foot lamp", "3-lamp 4ft T5HO replacing 250W HPS", "3-lamp 4ft T5HO replacing 250W MH", 
"4-foot lamp", "4-lamp 4ft T5HO replacing 400W HPS", "4-lamp 4ft T5HO replacing 400W MH", 
"4-lamp 4ft T8 replacing 250W HPS", "4-lamp 4ft T8 replacing 250W MH", 
"6-lamp 4ft T5HO replacing 400W HPS", "6-lamp 4ft T5HO replacing 400W MH", 
"6-lamp 4ft T5HO replacing 750W MH", "6-lamp 4ft T8 replacing 400W HPS", 
"6-lamp 4ft T8 replacing 400W MH", "8-foot lamp", "Automotive Facility", 
"Cold Cathode Fluorecent Lamps 3 w", "Cold Cathode Fluorecent Lamps 5 w", 
"Cold Cathode Fluorecent Lamps 8 w", "Compact flourescent Lamps 13 w Hardwired", 
"Compact flourescent Lamps 14 w Hardwired", "Compact flourescent Lamps 14 w Screw-In", 
"Compact flourescent Lamps 15 w Screw-In", "Compact flourescent Lamps 18 w Hardwired", 
"Compact flourescent Lamps 18 w Screw-In", "Compact flourescent Lamps 20 w Screw-In", 
"Compact flourescent Lamps 23 w Hardwired", "Compact flourescent Lamps 23 w Screw-In", 
"Compact flourescent Lamps 26 w Hardwired", "Compact flourescent Lamps 26 w Screw-In", 
"Compact flourescent Lamps 27 w Hardwired", "Compact flourescent Lamps 27 w Screw-In", 
"Compact flourescent Lamps 32 w Hardwired", "Compact flourescent Lamps 7 w Hardwired", 
"Compact flourescent Lamps 7 w Screw-In", "Compact flourescent Lamps 84 w Hardwired", 
"Court House", "Daylighting Controls", "Dining: Bar Lounge/Leisure", 
"Dining: Cafeteria/Fast Food", "Dining: Family", "Dormitory", 
"Exercise Center", "Exit Signs (Electroluminescent replaceing inc.)", 
"Exit Signs (Electroluminescent replacing CFLs)", "Exit Signs (LED replacing CFL)", 
"Exit Signs (LED replacing incandescent)", "Health Care Clinic", 
"Hospital", "Hotel", "Induction Lighting replacing >=100W and <=200W HPS", 
"Induction Lighting replacing >=70W and <=200W MH", "Induction Lighting replacing >200W and <=250W MH", 
"Induction Lighting replacing >200W and <=400W HPS", "LED Channel Lights", 
"LED traffic lights - Green 12\" - 120V", "LED traffic lights - Green 12\" - 12V", 
"LED traffic lights - Green 8\" - 120V", "LED traffic lights - Green 8\" - 12V", 
"LED traffic lights - Red 12\" - 120V", "LED traffic lights - Red 8\" - 120V", 
"Library", "Manufacturing Facility", "Museum", "Occupancy Sensors", 
"Office", "Parking Garage", "Performing Arts Theater", "Police/Fire Station", 
"Retail (Other Than Mall)", "School/University", "Specialty CFL 14 w Screw-In", 
"Specialty CFL 15 w Screw-In", "Specialty CFL 18 w Screw-In", 
"Specialty CFL 23 w Screw-In", "Specialty CFL 27 w Screw-In", 
"Specialty CFL 7 w Screw-In", "Warehouse", "Workshop", "(2) 4-lamp 4ft T5HO replacing 750W MH", 
"2-lamp 4ft T8 replacing 150W MH", "3-lamp 4ft T8 replacing 250W MH", 
"4-lamp 2ft T5HO replacing 150W MH", "LED Lamps NO Reflector", 
"LED Lamps W/ Reflector", "MR-16 LED Lamps", "Pedestrian W/ countdown", 
"Refrigerated Case LED Lamps NO motion Sensors", "Refrigerated Case LED Lamps W/ motion Sensors", 
"Religious Building", "< 150 Tons", "<= 65 kBtu/h", "> 12 kBtu/h", 
"> 7 and <= 9 kBtu/h", "> 9 and <= 12 kBtu/h", ">= 135 and < 240 kBtu/h", 
">= 150 Tons", ">= 150 Tons and < 300 Tons", ">= 240 kBtu/h", 
">= 300 Tons", ">= 65 and < 135 kBtu/h", "Advanced Diagnostic Tune Up (ADTU) 11-19.9 tons", 
"Advanced Diagnostic Tune Up (ADTU) 20-25 tons", "Advanced Diagnostic Tune Up (ADTU) 4-6 tons", 
"Advanced Diagnostic Tune Up (ADTU) 6-10.9 tons", "Outside Air Economizers", 
"Phase I", "Phase II - Duct Seal", "Programmable Thermostat", 
"Duct Test and Repair (DTR) 11-19.9 tons", "Duct Test and Repair (DTR) 2-6 tons", 
"Duct Test and Repair (DTR) 6-10.9 tons", "High Performance Glazing", 
"Shade Screen", ">150 HP", "1 HP", "1.5 HP", "10 HP", "100 HP", 
"125 HP", "15 HP", "150 HP", "2 HP", "20 HP", "25 HP", "3 HP", 
"30 HP", "40 HP", "5 HP", "50 HP", "60 HP", "7.5 HP", "75 HP", 
"Anti-Sweat Heater Controls", "Beverage Machine Controls", "HiE Compressor - Walk In Cooler", 
"HiE Ice Makers - Air-Cooled - 1001 to 1500lbs", "HiE Ice Makers - Air-Cooled - 101 to 200lbs", 
"HiE Ice Makers - Air-Cooled - 201 to 300lbs", "HiE Ice Makers - Air-Cooled - 301 to 400lbs", 
"HiE Ice Makers - Air-Cooled - 401 to 500lbs", "HiE Ice Makers - Air-Cooled - 501 to 1000lbs", 
"HiE Ice Makers - Water-Cooled - 1001 to 2000lbs", "HiE Ice Makers - Water-Cooled - 101 to 200lbs", 
"HiE Ice Makers - Water-Cooled - 401 to 500lbs", "HiE Ice Makers - Water-Cooled - 501 to 1000lbs", 
"High-Efficiency Evaporator Fan Motors (EC)", "High-Efficiency Evaporator Fan Motors (PSC)", 
"High-Efficiency Freezer (1 Door)", "High-Efficiency Freezer (2 Door)", 
"High-Efficiency Freezer (3 Door)", "High-Efficiency Refrigerator (1 Door)", 
"High-Efficiency Refrigerator (2 Door)", "High-Efficiency Refrigerator (3 Door)", 
"Night Covers", "Snack Machine Controls", "Strip Curtains on Walk-Ins", 
"Computer Power Management - Desktop", "Floating Head Controls", 
"HiE Condenser", "Reach-in Cooler Controls", "CO Sensor / on-off / Office", 
"CO Sensor / VAV / Office", "K-12 School", "Retail", "Dual Technology", 
"Electric or Pneumatic T-Stat", "Existing EMS System", "Integrated Lighting Control", 
"Misc"), class = "factor"), ee.eer = c(NA_real_, NA_real_, NA_real_, 
NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, 
NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, 
NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, 
NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, 
NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, 
NA_real_, NA_real_), ee.iplv = c(NA_real_, NA_real_, NA_real_, 
NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, 
NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, 
NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, 
NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, 
NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, 
NA_real_, NA_real_), sf.per.tstat = c(NA_real_, NA_real_, NA_real_, 
NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, 
NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, 
NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, 
NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, 
NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, 
NA_real_, NA_real_), kwh.per.sf = c(NA_real_, NA_real_, NA_real_, 
NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, 
NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, 
NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, 
NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, 
NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, 
NA_real_, NA_real_), ee.kw.per.sf = c(0.0004788, 0.00162, 0.0011559, 
0.000605, 0.0008772, 0.0010797, 0.0010797, 0.0010797, 0.001248, 
0.0014988, 0.00121, 0.0010308, 0.0009654, 0.0009654, 0.0011123, 
0.0008511, 0.0011237, 0.0010797, 0.0014532, 0.0011559, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA), ee.kwh.per.sf = c(1.63457252, 6.0314408, 4.60737506, 
2.2868612, 3.57474668, 4.28859278, 4.28859278, 4.28859278, 4.8879738, 
6.04189532, 4.736534, 4.30772732, 3.81041936, 3.81041936, 4.27583642, 
3.33224594, 4.65193678, 4.28859278, 6.32342408, 4.60737506, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA), efficiency = c(NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NaN, 0.95, NaN, NaN, 
NaN, NaN, NaN, 0.95, NaN, NaN, 0.95, NaN, NaN, 0.95, NaN, 0.95, 
0.95, NaN, NaN, 0.95), motor.eff = c(NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 0.949611437971035, 
0.95, 0.949611437971035, 0.949611437971035, 0.949611437971035, 
0.949611437971035, 0.949611437971035, 0.95, 0.949611437971035, 
0.949611437971035, 0.95, 0.949611437971035, 0.949611437971035, 
0.95, 0.949611437971035, 0.95, 0.95, 0.949611437971035, 0.949611437971035, 
0.95), ee.lpd = c(NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, 
NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, 
NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, 
NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, 
NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, 
NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, NA_real_, NA_real_
), inc.cost = c(3.177014, 0.889816, 1.502042, 1.041064, 2.436068, 
1.373322, 1.373322, 1.373322, 1.1907, 2.081282, 1.12634, 2.693508, 
1.180242, 1.180242, 0.493198, 0.987162, 2.382166, 1.373322, 3.401468, 
1.502042, 117.631768103245, 117.631768103245, 117.631768103245, 
117.631768103245, 117.631768103245, 117.631768103245, 117.631768103245, 
117.631768103245, 117.631768103245, 117.631768103245, 117.631768103245, 
117.631768103245, 117.631768103245, 117.631768103245, 117.631768103245, 
117.631768103245, 117.631768103245, 117.631768103245, 117.631768103245, 
117.631768103245), unit.qty = c(817, 5051, 836, 4027, 173610, 
5328, 5668, 150, 33735.4, 3879.5, 69.7, 1356.03, 1832, 2748, 
1722.9, 1850, 224, 819, 3934, 9351, 900, 1246, 265, 308, 500, 
335, 550, 433, 676, 800, 350, 750, 200, 1200, 600, 433, 500, 
600, 4988, 250)), .Names = c("measure", "ee.eer", "ee.iplv", 
"sf.per.tstat", "kwh.per.sf", "ee.kw.per.sf", "ee.kwh.per.sf", 
"efficiency", "motor.eff", "ee.lpd", "inc.cost", "unit.qty"), row.names = c(9813L, 
9814L, 9815L, 9816L, 9817L, 9818L, 9819L, 9820L, 9821L, 9822L, 
9823L, 9824L, 9825L, 9826L, 9827L, 9828L, 9829L, 9830L, 9831L, 
9832L, 10329L, 10330L, 10331L, 10332L, 10333L, 10334L, 10335L, 
10336L, 10337L, 10338L, 10339L, 10340L, 10341L, 10342L, 10343L, 
10344L, 10345L, 10346L, 10347L, 10348L), class = "data.frame") 
```

这是我的最终代码，基于 Didzis Elferts 的回答。感谢您的输入！

```
j.parms.by.meas <- ddply(j.subgroups, 
                         .(measure),
                         function(x) {
                           apply(x[c('ee.eer', 'ee.iplv', 'sf.per.tstat',
                                     'kwh.per.sf', 'ee.kw.per.sf',
                                     'efficiency', 'motor.eff', 'ee.lpd',
                                     'inc.cost')],
                                 2,weighted.mean, x$unit.qty, na.rm=T)
                         }) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T16:54:13.527

你可以`numcolwise`在这里使用

```
ddply(j.subgroups, .(measure),function(x){
  w <- x$unit.qty
  numcolwise(weighted.mean)(x[,-12],w)
})

                  measure ee.eer ee.iplv sf.per.tstat kwh.per.sf ee.kw.per.sf ee.kwh.per.sf efficiency motor.eff ee.lpd   inc.cost
1 High Performance Glazing     NA      NA           NA         NA  0.000977688      3.934811         NA        NA     NA   2.100755
2                  >150 HP     NA      NA           NA         NA           NA            NA        NaN 0.9497194     NA 117.631768 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T16:47:48.720

一种解决方案是`colwise()`用`apply()`函数替换。在这种情况下，数据除以变量`measure`，然后将函数应用于每个子样本。这`x`只是子样本之一，现在`x$unit.qty`可以使用。还添加`na.rm=TRUE`了您的`NA`值，但这可以删除。

```
ddply(j.subgroups, 
  .(measure),function(x)
  apply(x[,2:11],2,weighted.mean,x$unit.qty,na.rm=TRUE))

                   measure ee.eer ee.iplv sf.per.tstat kwh.per.sf ee.kw.per.sf ee.kwh.per.sf
1 High Performance Glazing    NaN     NaN          NaN        NaN  0.000977688      3.934811
2                  >150 HP    NaN     NaN          NaN        NaN          NaN           NaN
  efficiency motor.eff ee.lpd   inc.cost
1        NaN       NaN    NaN   2.100755
2       0.95 0.9497194    NaN 117.631768 
```

# java - 用骆驼写文件并设置 chmod

> ID：15006065
> 
> 赞同：1
> 
> 时间：2013-02-21T15:31:11.457
> 
> 标签：java, file, apache-camel, chmod

Camel FTP 组件允许在存储的文件上**设置 chmod**属性（参见[Apache Camel: FTP2 ）。](http://camel.apache.org/ftp2.html)有没有办法对**骆驼文件组件**做同样的事情？

类似的东西`from("somewhere").to("file:foo.txt?chmod=666")`。

如果没有，你知道用骆驼做这件事的*好方法吗？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T22:06:51.413

使用 chmod 样式的 FTP 权限非常简单。文件的许可并不是那么简单（所有文件系统和操作系统实现都在那里）。据我所知，Camel 文件端点中没有类似的东西。

但是，如果您知道部署平台，则可以使用[exec 组件](http://camel.apache.org/exec.html)`chmod 666 myfile.txt`在路由或路由策略中进行调用，比如在创建它之后。java中有一些直接的方法，但是没有黄金方法可以做到这一点，至少不是平台无关的。看看这个 SO[如何在 java 中设置 umask？](https://stackoverflow.com/questions/3175303/how-can-i-set-the-umask-from-within-java).

# css - 用 position:fixed 定位 div 的底部

> ID：15006068
> 
> 赞同：0
> 
> 时间：2013-02-21T15:31:15.063
> 
> 标签：css

我有一个包含动态内容的 div，我想将其放置在距视口顶部 500px 的位置。使用

```
position:fixed;
top:500px 
```

定位 div 的顶部，但我怎样才能实现从顶部定位 div 500 px 的底部？

这是一个例子：![http://i.stack.imgur.com/us6op.gif](../Images/892c3c7a060d3b3f69cbfeaa50e2b4a1.png)

PS：

```
position:fixed; 
bottom: 12345px 
```

不是我要找的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T15:43:51.120

您可以通过将内容放入另一个 div 然后将其绝对定位到固定 div 的底部来实现它，如下所示：http: [//jsfiddle.net/JDq9C/](http://jsfiddle.net/JDq9C/)

**html**

```
<div id="fixed">
    <div id="dynamic">
        blah blah
    </div>
</div> 
```

**css**

```
#fixed {position:fixed; top:500px; left:0;}
#dynamic {position:absolute; bottom:0;} 
```

# php - 如何将 HTML“块”解析为每个非空标签的表格布局？

> ID：15006070
> 
> 赞同：0
> 
> 时间：2013-02-21T15:31:23.087
> 
> 标签：php, html, regex, parsing, dom

**更新：（**事情更复杂，包括**blocks**，我从一开始就没有解释，但我知道这应该适用于正则表达式或其他东西）

如何将 HTML 块解析为每个非空标签的表格布局？例如，这个 HTML：

```
<p class="block1">
    <span class="styleclass2">
        <span class="styleclass25">
            <strong>
                <u></u>Some Text Here
            </strong>
            <br>
        </span>
    </span>
    <span class="styleclass5">
        <u>
            <a href="http://www.example.com">www.example.com</a>
        </u>
    </span>
    <br>
    <span class="styleclass24">Some Text Here</span>
</p>
<p class="block2">
    <span class="styleclass2">
        <span class="styleclass25">
            <strong>
                <u></u>Some Text Here2
            </strong>
            <br>
        </span>
    </span>
    <span class="styleclass5">
        <u>
            <a href="http://www.example2.com">www.example2.com</a>
        </u>
    </span>
    <br>
    <span class="styleclass24">Some Text Here2</span>
</p> 
```

并制作这些：

```
<table>
    <tr>
        <td>Some Text Here</td>
        <td>www.example.com</td>
        <td>Some Text Here</td>
    </tr>
    <tr>
        <td>Some Text Here2</td>
        <td>www.example2.com</td>
        <td>Some Text Here2</td>
    </tr>
</table> 
```

主要思想是如何对这些块进行分组，以便为​​找到的每个块排成一行……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T15:39:10.853

正则表达式很神奇，试试这个：

```
<?php
$string = '<p class="styleclass1">
    <span class="styleclass2">
        <span class="styleclass25">
            <strong>
                <u>Some Text Here</u>
            </strong>
            <br>
        </span>
    </span>
    <span class="styleclass5">
        <u>
            <a href="http://www.example.com">www.example.com</a>
        </u>
    </span>
    <br>
    <span class="styleclass24">Some Text Here</span>
</p>';

$result = preg_match_all("/<\w+.*?>(.*?)<\/\w+>/", $string, $matches);

echo '<pre>';
print_r($matches);
echo '</pre>';

$output = '<table style="border: 1px solid #000;">';

foreach ($matches[1] as $key => $value) {
    $output .= '<tr>';
    $output .= '<td>'.$value.'</td>';
    $output .= '</tr>';
}

$output .= '</table>';

echo $output;
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T15:37:46.810

大杂烩代码:)

```
$html = <<<HERE
<p class="styleclass1">
    <span class="styleclass2">
        <span class="styleclass25">
            <strong>
                <u>Some Text Here</u>
            </strong>
            <br>
        </span>
    </span>
    <span class="styleclass5">
        <u>
            <a href="http://www.example.com">www.example.com</a>
        </u>
    </span>
    <br>
    <span class="styleclass24">Some Text Here</span>
</p>
HERE;
preg_match_all('#>(.+)<#sU', $html, $matches);
if(isset($matches[1]))
{
    echo '<table border="1">';
    foreach($matches[1] as $val)
    {
        $val = trim($val);
        if(!empty($val))
            echo '<tr><td>' . $val . '</td></tr>';
    }
    echo '</table>';
} 
```

# iphone - 获取当前正在使用的 UIKeyBoardType？或者当 UIKeyboardType 改变时捕获

> ID：15006074
> 
> 赞同：1
> 
> 时间：2013-02-21T15:31:51.333
> 
> 标签：iphone, ios, objective-c, uikeyboardtype

在我的应用程序中，我在后台（NSOperationQueue）进行了一些搜索，一旦完成并在主队列的 UITableView 中显示结果，但 UIKeyboardType 总是被重置。

用户更改后如何获取当前的 UIKeyboardType？

我尝试在搜索之前将类型存储在变量中，但正在执行搜索的 textField 并未返回可见的实际键盘类型，而是返回默认设置为的 UIKeyboardType。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T12:38:20.960

这是我为解决我的问题所做的。我检查了他们在搜索字段中输入的最后一个字符，并根据它确定了 UIKeyboardType：

```
if ([searchText length]>0) {
        NSRange nond = [[searchText substringFromIndex:[searchText length]-1] rangeOfCharacterFromSet:[[NSCharacterSet lowercaseLetterCharacterSet] invertedSet]];
        if (NSNotFound == nond.location) {
            self.currentKeyboardType = UIKeyboardTypeDefault;
        } else {
            self.currentKeyboardType = UIKeyboardTypeNumberPad;
        }
    } 
```

然后在搜索完成后，我将 UIKeyboardType 设置为这个值。在我看来，默认情况下，我的应用程序会根据我为 UISearchBar 文本字段设置的默认键盘切换回键盘。这对我很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T15:33:31.277

您可以使用`textField.keyboardType`并获取文本字段的键盘类型...

# c++ - 使用数组减去数字 - C++

> ID：15006080
> 
> 赞同：0
> 
> 时间：2013-02-21T15:31:59.040
> 
> 标签：c++, arrays, logic

我想使用数组计算两个数字之间的差异（比如说`v`and `n`，so `v-n`）（不要问我为什么要这样做）。每个数字的数组按以下方式制作：

*   `v`它们的容量是和之间的最大数字的位数`n`（=`q`在代码中）
*   `vArray[i]`=除前导零外`i`的第一个数字`v`以填充整个数组
*   `nArray[i]`= -除前导零外`i`的第一个数字`n`以填充整个数组

例如，然后选择`v`= 10 和`n`= 2，

```
vArray = [1,0]
nArray = [0,-2] 
```

所以我写了这段代码来计算`sum`将等于差的数字的数组（`sum = [0,9]`对于上面的例子）：

```
long r = 0;
for (int i = q-1 ; i > -1; i--){
    sum[i] = vArray[i] + nArray[i];
    if (sum[i] < 0){
        r = floor(sum[i]/10);
        sum[i-1] -= r;
        sum[i] = sum[i]+10;
    }else{
        r = 0;
    }

    NSLog(@"%li",sum[i]);
} 
```

问题是 sum 数组不等于它应该是什么。对于同一个例子，`sum = [1,8]`代码中的问题是什么？

注意：`vArray`并且`nArray`正确生成。

编辑：一些例子和预期的结果

```
 v =  |    n =   |  vArray =   |     nArray=    |    sum=
    25   |    9     |    [2,5]    |      [0,9]     |    [1,6]
    105  |    10    |   [1,0,5]   |     [0,1,0]    |   [0,9,5]
   1956  |   132    |  [1,9,5,6]  |    [0,1,3,2]   |  [1,8,2,4]
  369375 |   6593   |[3,6,9,3,7,5]|  [0,0,6,5,9,3] |[3,6,2,7,8,2] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T16:13:35.607

我相信我了解数据结构，因为您使用的是*大整数*表示。

给定数字：1234

你的 V 数组是：[1, 2, 3, 4]。

添加所有数字（又名总和），我不明白你为什么要这样做，是：

```
int digit_sum = 0;
for (int i = 0;  i < 4; i++)
{
    digit_sum += v[i];
} 
```

要将表示转换为“正常”，请尝试以下操作：

```
int value = 0;
for (int i = 0; i < 4; ++i)
{
  value = (value * 10) + v[i];
} 
```

要执行减法，您必须像手动执行这些步骤一样执行这些步骤。此外，您还需要第二个号码。

**编辑 1：链接到大数减法**
这可能会有所帮助：
[C](https://stackoverflow.com/questions/1316940/big-number-subtraction-in-c)
[C++ 大数算术中的大数减法](https://stackoverflow.com/questions/12430339/c-large-number-arithmetic)

# windows - 溢出时如何查看Windows线程的当前堆栈大小

> ID：15006083
> 
> 赞同：3
> 
> 时间：2013-02-21T15:32:01.300
> 
> 标签：windows, multithreading, iis, stack

我有一个进程在从 IIS 进程中运行时溢出堆栈，但在单独运行时工作正常。我怀疑它本身会获得默认的 1MB 堆栈，但在 IIS 中会少一些。

为了避免弄乱 IIS 工作进程，我在 IIS 进程中使用子线程来分配更大的堆栈，但我怀疑根据文档（[http://msdn.microsoft ），线程创建的堆栈大小参数被忽略了.com/en-us/library/ms149581.aspx](http://msdn.microsoft.com/en-us/library/ms149581.aspx)）

当堆栈溢出时，我可以在调试器中查看暂停的进程，但我如何找出实际分配的堆栈有多大？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T15:32:01.300

答案如下。

在调试器中，在伪寄存器 TIB 上添加一个监视 ( [http://msdn.microsoft.com/en-us/library/aa232399(v=vs.60).aspx](http://msdn.microsoft.com/en-us/library/aa232399(v=vs.60).aspx) )

现在取这个值并在内存窗口中显示那个地址。从第二个 4 字节字中减去第三个 4 字节字，记住使用小端字节序。 [http://en.wikipedia.org/wiki/Win32_Thread_Information_Block](http://en.wikipedia.org/wiki/Win32_Thread_Information_Block)

# angularjs - 注入控制器给空对象AngularJS

> ID：15006084
> 
> 赞同：2
> 
> 时间：2013-02-21T15:32:02.553
> 
> 标签：angularjs

我有一个 AngularJS 应用程序，我正在尝试测试。问题是，每当我尝试注入控制器时，它都会给我一个空对象。

```
beforeEach( inject(function($rootScope, $controller) {
   console.log($controller) // {}
   scope = $rootScope.$new();
   ctrl = $controller('MenuCtrl', {
     $scope: scope
   });
   console.log(ctrl) // {}
})); 
```

我在 JsFiddle 中附上了我的设置示例和一些评论，我非常感谢一些帮助来解决这个问题。

[小提琴](http://jsfiddle.net/kimpettersen/tLAW5/7/)

***编辑***：我也尝试过这样做：

~~beforeEach(angular.mock.module('Controllers'));~~

然后我得到：错误：没有模块：控制器

***这解决了这个问题：***

beforeEach(angular.mock.module('controllers'));

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T22:10:59.813

感谢[Angular 邮件列表](https://groups.google.com/d/topic/angular/G8c5UaALcWQ/discussion) 中的 Peter Bacon Darwin 找到了解决方案。我试图调用`changeView()`控制器。但是，具有此功能的是范围而不是控制器。

再次感谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T17:38:55.637

根据您的代码，

```
var Controllers = angular.module('controllers', []); 
```

你的测试配置

```
beforeEach(angular.mock.module('Controllers')); 
```

应该改为

```
beforeEach(angular.mock.module('controllers')); 
```

使用小写的“C”，因为这是该模块的实际名称。您也可以使用`myApp`，因为它取决于`controllers`.

# javascript - Javascript 用户输入验证

> ID：15006085
> 
> 赞同：0
> 
> 时间：2013-02-21T15:32:02.477
> 
> 标签：javascript

我是一个javascript新手。我正在尝试根据他们输入的“客户 ID”创建到客户开发站点的 Web 重定向。

这是我到目前为止所拥有的，你会看到我正在完全倒退。

我想重定向到新标签页中的 URL。但是，如果他们输入了错误的客户 ID，则会弹出一个警报“对不起，再试一次。” 以我的方式添加警报后，无论他们是否输入正确的“代码”，我都会弹出一个窗口。

```
<head>
<script>

function validateCode()
{
var codeTextBox = document.getElementById("codeTextBox").value;

if (codeTextBox == 'C1')
{
    window.location.href = "http://www.client1.com";
} 
if (codeTextBox == 'C2')
{
    window.location.href = "http://www.client2.com";
} 
if (codeTextBox == 'C3')
{
    window.location.href = "http://www.client3.com";
} 
if (codeTextBox == 'C4')
{
    window.location.href = "http://www.client4.com";
}  else {
    alert('Sorry, try again.');
    }

}

</script>
 </head>

 <body>
 Enter User ID: 
 <input type="text" name="codeTextBox" id="codeTextBox" />
 <input type="submit" name="Submit" value="Submit" onclick="validateCode()" />
 </body> 
```

对我放松点:)谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T15:38:39.500

尝试使用“else if”来检查 C2/C3/C4。或者，您可以研究如何使用 switch 语句。（查看所有其他答案。）

JavaScript 并不总是按照你期望的顺序做事。在这里，您期望立即重定向到新页面，但它希望首先完成代码，因此只要代码不是 C4，就会发生警报。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T15:39:19.173

使用 switch case，这里是如何在您的代码中使用的示例。休息你完成它。

```
function validateCode(){
  var codeTextBox = document.getElementById("codeTextBox").value;

  switch(codeTextBox){
     case 'C1':
        window.location.href = "http://www.client1.com";
        break;
     case 'C2':
        window.location.href = "http://www.client2.com";
        break;
     ...
     ...
     ...
     default:
       alert('Sorry, try again.'); 
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T15:45:58.800

我认为这更简单:)

```
var redirectUrls = {c1: 'c1.com', c2: 'c2.com', c3: 'c3.com' };

if (codeTextBox in redirectUrls) {
  window.location.href = redirectUrls[codeTextBox];      
} else { 
  alert('Sorry, try again.');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T15:36:56.160

```
if (codeTextBox == 'C1')
{
    window.location.href = "http://www.client1.com";
} 
else if (codeTextBox == 'C2')
{
    window.location.href = "http://www.client2.com";
} 
else if (codeTextBox == 'C3')
{
    window.location.href = "http://www.client3.com";
} 
else if (codeTextBox == 'C4')
{
    window.location.href = "http://www.client4.com";
}  
else {
    alert('Sorry, try again.');
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T15:37:55.760

尝试这个：

```
<head>
<script>

function validateCode(){
  var codeTextBox = document.getElementById("codeTextBox").value;

  if (codeTextBox == 'C1')
  {
      window.location.href = "http://www.client1.com";
  } 
  else if (codeTextBox == 'C2')
  {
      window.location.href = "http://www.client2.com";
  } 
  else if (codeTextBox == 'C3')
  {
      window.location.href = "http://www.client3.com";
  } 
  else if (codeTextBox == 'C4')
  {
      window.location.href = "http://www.client4.com";
  }  
  else 
  {
      alert('Sorry, try again.');
  }

}

</script>
</head>

 <body>
   Enter User ID: 
   <input type="text" name="codeTextBox" id="codeTextBox" />
   <input type="submit" name="Submit" value="Submit" onclick="validateCode()" />
</body> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-21T15:38:16.770

问题是 if 是独立的，因此即使值为“C1”，最后一个 if 的“else”仍将被执行。

你可以这样做：

```
if (codeTextBox == 'C1')
{
    window.location.href = "http://www.client1.com";
} 
else if (codeTextBox == 'C2')
{
    window.location.href = "http://www.client2.com";
} 
else if (codeTextBox == 'C3')
{
    window.location.href = "http://www.client3.com";
} 
else if (codeTextBox == 'C4')
{
    window.location.href = "http://www.client4.com";
}  
else 
{
    alert('Sorry, try again.');
} 
```

或使用开关

```
switch(codeTextBox )
{
case 'C1':
  window.location.href = "http://www.client1.com";
  break;
.
.
.

default:
  alert('Sorry, try again.');
} 
```

# javascript - Flowplayer 无法静音或循环播放视频

> ID：15006087
> 
> 赞同：1
> 
> 时间：2013-02-21T15:32:06.773
> 
> 标签：javascript, video, flowplayer

Flowplayer 拒绝识别循环播放视频的代码。

它也不允许我删除暂停暂停功能或静音视频的音量。

```
<div style="width:100%;height:100%;margin:0;"
id="player"></div>
<!-- this script block will install Flowplayer inside previous DIV tag -->
<script>
flowplayer(
"player",
"http://releases.flowplayer.org/swf/flowplayer-3.2.16.swf", {
clip: {
url: "http://pseudo01.hddn.com/vod/demo.flowplayervod/flowplayer-700.flv",
autoPlay: true,
autoBuffering: true,
onBegin: function () {
this.setVolume(0);
}
},
play: {
opacity: 0.0,
label: null,
// label text; by default there is no text
replayLabel: null,
// label text at end of video clip
},
// disable default controls
plugins: {controls: null},
// prevent pausing
onBeforePause: function() {
return false;
},
// make the video loop
onBeforeFinish: function() {
return false;
}
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-17T11:52:22.833

在您的代码的帮助下，我得到了我的帮助，但我添加了 de loop 选项：

```
// make the video loop
loop: true,
onBeforeFinish: function() {
return false;
}
}); 
```

希望能帮助到你。

# itextsharp - 撰写 PdfPTable 时的 Y 位置

> ID：15006090
> 
> 赞同：0
> 
> 时间：2013-02-21T15:32:10.310
> 
> 标签：itextsharp

我正在通过 ItextSharp 构建一个 pdfptable，但我需要知道，当我添加单元格时，我在页面中的 Y 位置。单元格具有可变高度。我需要知道它以避免你在表中放置一个新的“中断标题”，如果这会出现在最后一个表行上，因为它应该出现在一个新页面上（根据客户请求）。我尝试了 writer.getverticalPosition() 但在组成表格时似乎不可靠。

有没有办法知道它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T15:57:33.323

你的问题有矛盾。让我解释什么没有意义。

您创建一个`PdfPTable`，假设您有一个名为`table`. 当您将单元格添加到 时`table`，对象会增长。大量数据存储在内存中。

现在你说：我想在添加单元格时知道页面上行的 Y 位置。

哪一页？甚至可能没有页面？只要您构建`table`对象，就没有页面，没有 Y 位置。当添加到宽度为 400pt 的页面时，一个表格的高度可能为 200pt。*当添加到宽度为 200pt 的页面时，同一个表格*的高度可能为 400pt。直到您将`table`对象添加到 a`Document`中，表格才会得到它的形状。

如果您想确保“标题”不是页面上的最后一行，您应该将表格分成较小的部分。创建一个子表并将其添加到文档中。现在使用`getVerticalPosition()`并检查还剩多少空间。如果下一个子表的前 X 行没有足够的空间，则移动到 a`newPage()`并在那里添加下一个表，否则在当前页面上添加表。

如果您正确定义宽度，没有人会看到您添加了多个表格：看起来好像您添加了一个大表格而不是不同的小表格。如果您不知道如何计算子表中的行高，请注意您需要定义表的总宽度并锁定宽度。由于上面解释的原因，如果没有任何关于表格宽度的信息，任何软件都无法计算表格的高度。

# c# - 打开子窗口时如何检查浏览器后退按钮是否被点击？

> ID：15006093
> 
> 赞同：0
> 
> 时间：2013-02-21T15:32:15.517
> 
> 标签：c#, javascript, asp.net, vb.net

我必须在我们的应用程序中解决一个问题，如果打开子窗口并且用户单击浏览器后退按钮，我需要重定向到询问用户名和密码的页面。
我们有 400 个 aspx 页面，所以我只需要在母版页中进行修改。我有如下代码

```
function initPage(){
    checkback();
} 
```

该函数用外部 javascript 文件编写并在 Master Page 中使用。
checkback 函数包含如下代码

```
if (document.forms[0].cprotection.value=='1')   
{

   document.forms[0].pagecode.value=0;     
   document.forms[0].act.value='backpressed';
   document.forms[0].submit()
} 
```

上面的代码适用于父窗口，但如果我打开子窗口则不行。
backpressed 是用于签入类文件以重定向到询问用户名和密码的页面的关键字。请帮我解决这个问题。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T21:46:00.283

您可以在加载子窗口时向会话添加一个变量，如果用户单击返回，您将检查会话以查看子窗口添加到会话的变量是否在任何页面加载函数中都没有，如果它被加载通常，如果它没有重定向到登录页面。

# apache - Mercurial 推送——新分支。中止：授权失败

> ID：15006096
> 
> 赞同：0
> 
> 时间：2013-02-21T15:32:17.913
> 
> 标签：apache, mercurial, repository

[我遇到了与Mercurial 推送](https://stackoverflow.com/questions/946745/mercurial-push-abort-authorization-failed)相同的问题，中止：授权失败，但是我无法控制任何权限。我能够从网络浏览器访问存储库，并且 hg 传出成功。我也尝试过不更改密码就重置我的密码。

命令：

```
$ hg push --new-branch --debug --traceback -f > pushlog.log
Traceback (most recent call last):
File "/usr/lib/python2.7/dist-packages/mercurial/dispatch.py", line 87, in _runcatch
  return _dispatch(req)
File "/usr/lib/python2.7/dist-packages/mercurial/dispatch.py", line 684, in _dispatch
  cmdpats, cmdoptions)
File "/usr/lib/python2.7/dist-packages/mercurial/dispatch.py", line 466, in runcommand
  ret = _runcommand(ui, options, cmd, d)
File "/usr/lib/python2.7/dist-packages/mercurial/dispatch.py", line 738, in _runcommand
  return checkargs()
File "/usr/lib/python2.7/dist-packages/mercurial/dispatch.py", line 692, in checkargs
  return cmdfunc()
File "/usr/lib/python2.7/dist-packages/mercurial/dispatch.py", line 681, in <lambda>
  d = lambda: util.checksignature(func)(ui, *args, **cmdoptions)
File "/usr/lib/python2.7/dist-packages/mercurial/util.py", line 458, in check
  return func(*args, **kwargs)
File "/usr/lib/python2.7/dist-packages/mercurial/commands.py", line 4333, in push
  if not c.sub(s).push(opts.get('force')):
File "/usr/lib/python2.7/dist-packages/mercurial/subrepo.py", line 524, in push
  return self._repo.push(other, force)
File "/usr/lib/python2.7/dist-packages/mercurial/localrepo.py", line 1535, in push
  ret = remote.unbundle(cg, remote_heads, 'push')
File "/usr/lib/python2.7/dist-packages/mercurial/wireproto.py", line 300, in unbundle
  ret, output = self._callpush("unbundle", cg, heads=heads)
File "/usr/lib/python2.7/dist-packages/mercurial/httprepo.py", line 199, in _callpush
  r = self._call(cmd, data=fp, headers=headers, **args)
File "/usr/lib/python2.7/dist-packages/mercurial/httprepo.py", line 169, in _call
  fp = self._callstream(cmd, **args)
File "/usr/lib/python2.7/dist-packages/mercurial/httprepo.py", line 120, in _callstream
  raise util.Abort(_('authorization failed'))
Abort: authorization failed
abort: authorization failed 
```

日志：

```
pushing to https://host/hg/myProject
using https://host/hg/myProject
sending capabilities command
using auth.TR.* for authentication
host certificate matched fingerprint 

f4:57:8a:83:46:9a:d1:eb:7a:c6:58:ac:dd:ea:ed:36:42:ee:2c:56
using auth.TR.* for authentication
http auth: user wilson.droter, password ********
using auth.TR.* for authentication
host certificate matched fingerprint f4:57:8a:83:46:9a:d1:eb:7a:c6:58:ac:dd:ea:ed:36:42:ee:2c:56
pushing subrepo subProject to http://host/hg/subProject
using http://host/hg/subProject
sending capabilities command
using auth.TR.* for authentication
host certificate matched fingerprint f4:57:8a:83:46:9a:d1:eb:7a:c6:58:ac:dd:ea:ed:36:42:ee:2c:56
using auth.TR.* for authentication
http auth: user wilson.droter, password ********
using auth.TR.* for authentication
mercurial.int.thomsonreuters.com certificate matched fingerprint f4:57:8a:83:46:9a:d1:eb:7a:c6:58:ac:dd:ea:ed:36:42:ee:2c:56
query 1; heads
sending batch command
using auth.TR.* for authentication
http auth: user wilson.droter, password ********
using auth.TR.* for authentication
host certificate matched fingerprint f4:57:8a:83:46:9a:d1:eb:7a:c6:58:ac:dd:ea:ed:36:42:ee:2c:56
searching for changes
all remote heads known locally
2 changesets found
list of changesets:
877b46d2cc15a8d0a5ea3a6879a5eea14af87c0f
52cabd379e04b56af0d44ba3d3673764d6de9b9e
bundling: 1/2 changesets (50.00%)
bundling: 2/2 changesets (100.00%)
bundling: 1/2 manifests (50.00%)
bundling: 2/2 manifests (100.00%)
bundling: py_util/hadoop/hadoop.conf 1/50 files (2.00%)
bundling: py_util/hadoop/hadoop_archive.log 2/50 files (4.00%)
bundling: py_util/hadoop/lib/antlr-runtime-3.2.jar 3/50 files (6.00%)
bundling: py_util/hadoop/lib/asm-3.2.jar 4/50 files (8.00%)
bundling: py_util/hadoop/lib/avro-1.7.1.cloudera.2.jar 5/50 files (10.00%)
bundling: py_util/hadoop/lib/commons-beanutils-1.7.0.jar 6/50 files (12.00%)
bundling: py_util/hadoop/lib/commons-beanutils-core-1.8.0.jar 7/50 files (14.00%)
bundling: py_util/hadoop/lib/commons-cli-1.2.jar 8/50 files (16.00%)
bundling: py_util/hadoop/lib/commons-codec-1.4.jar 9/50 files (18.00%)
bundling: py_util/hadoop/lib/commons-collections-3.2.1.jar 10/50 files (20.00%)
bundling: py_util/hadoop/lib/commons-configuration-1.6.jar 11/50 files (22.00%)
bundling: py_util/hadoop/lib/commons-digester-1.8.jar 12/50 files (24.00%)
bundling: py_util/hadoop/lib/commons-el-1.0.jar 13/50 files (26.00%)
bundling: py_util/hadoop/lib/commons-io-2.1.jar 14/50 files (28.00%)
bundling: py_util/hadoop/lib/commons-lang-2.5.jar 15/50 files (30.00%)
bundling: py_util/hadoop/lib/commons-logging-1.1.1.jar 16/50 files (32.00%)
bundling: py_util/hadoop/lib/commons-math-2.1.jar 17/50 files (34.00%)
bundling: py_util/hadoop/lib/commons-net-3.1.jar 18/50 files (36.00%)
bundling: py_util/hadoop/lib/guava-11.0.2.jar 19/50 files (38.00%)
bundling: py_util/hadoop/lib/hadoop-auth-2.0.0-cdh4.1.2.jar 20/50 files (40.00%)
bundling: py_util/hadoop/lib/hadoop-common-2.0.0-cdh4.1.2.jar 21/50 files (42.00%)
bundling: py_util/hadoop/lib/hadoop-core-2.0.0-mr1-cdh4.1.2.jar 22/50 files (44.00%)
bundling: py_util/hadoop/lib/hadoop-hdfs-2.0.0-cdh4.1.2.jar 23/50 files (46.00%)
bundling: py_util/hadoop/lib/hadoop_archive.log 24/50 files (48.00%)
bundling: py_util/hadoop/lib/hsqldb-1.8.0.10.jar 25/50 files (50.00%)
bundling: py_util/hadoop/lib/jackson-core-asl-1.8.8.jar 26/50 files (52.00%)
bundling: py_util/hadoop/lib/jackson-mapper-asl-1.8.8.jar 27/50 files (54.00%)
bundling: py_util/hadoop/lib/jasper-runtime-5.5.23.jar 28/50 files (56.00%)
bundling: py_util/hadoop/lib/jersey-core-1.8.jar 29/50 files (58.00%)
bundling: py_util/hadoop/lib/jersey-server-1.8.jar 30/50 files (60.00%)
bundling: py_util/hadoop/lib/jetty-6.1.26.cloudera.2.jar 31/50 files (62.00%)
bundling: py_util/hadoop/lib/jetty-util-6.1.26.cloudera.2.jar 32/50 files (64.00%)
bundling: py_util/hadoop/lib/jline-0.9.94.jar 33/50 files (66.00%)
bundling: py_util/hadoop/lib/jsch-0.1.42.jar 34/50 files (68.00%)
bundling: py_util/hadoop/lib/jsp-api-2.1.jar 35/50 files (70.00%)
bundling: py_util/hadoop/lib/jsr305-1.3.9.jar 36/50 files (72.00%)
bundling: py_util/hadoop/lib/junit-4.8.2.jar 37/50 files (74.00%)
bundling: py_util/hadoop/lib/log4j-1.2.17.jar 38/50 files (76.00%)
bundling: py_util/hadoop/lib/mockito-all-1.8.5.jar 39/50 files (78.00%)
bundling: py_util/hadoop/lib/paranamer-2.3.jar 40/50 files (80.00%)
bundling: py_util/hadoop/lib/pig-0.10.0-cdh4.1.2.jar 41/50 files (82.00%)
bundling: py_util/hadoop/lib/protobuf-java-2.4.0a.jar 42/50 files (84.00%)
bundling: py_util/hadoop/lib/servlet-api-2.5.jar 43/50 files (86.00%)
bundling: py_util/hadoop/lib/slf4j-api-1.6.1.jar 44/50 files (88.00%)
bundling: py_util/hadoop/lib/slf4j-log4j12-1.6.1.jar 45/50 files (90.00%)
bundling: py_util/hadoop/lib/snappy-java-1.0.4.1.jar 46/50 files (92.00%)
bundling: py_util/hadoop/lib/xmlenc-0.52.jar 47/50 files (94.00%)
bundling: py_util/hadoop/lib/zookeeper-3.4.3-cdh4.1.2.jar 48/50 files (96.00%)
bundling: py_util/hadoop/run_pig.py 49/50 files (98.00%)
bundling: py_util/hadoop/run_pig.py.orig 50/50 files (100.00%)
sending unbundle command
sending 23785866 bytes
using auth.TR.* for authentication
sending: 64/46456 kb (0.14%)
...
sending: 23228/46456 kb (50.00%)
http auth: user wilson.droter, password ********
using auth.TR.* for authentication
mercurial.int.thomsonreuters.com certificate matched fingerprint f4:57:8a:83:46:9a:d1:eb:7a:c6:58:ac:dd:ea:ed:36:42:ee:2c:56
sending: 23292/46456 kb (50.14%)
...
sending: 46456/46456 kb (100.00%) 
```

推送适用于对文本文件的小改动。我认为问题在于添加文件。我需要更改权限还是有其他解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T22:46:08.200

您需要更改权限。您对已存在的文件具有写入权限`.hg/store/...`，这就是您可以更改该文件的原因，但可能没有对`.hg/store`目录本身的写入权限，因此您无法创建新文件。

您需要确保该服务器上的用户或组对存储库目录中的所有文件和目录具有 rwx 访问权限。如果是让您进入的群组访问权限，她可能还需要设置粘性群组位。

# iphone - 用于构建应用程序等新闻的 iOS 工具包/框架/组件

> ID：15006097
> 
> 赞同：0
> 
> 时间：2013-02-21T15:32:22.093
> 
> 标签：iphone, ios, rss

是否有某种开源（或商业）工具包、框架或 iOS 组件可以简化为新闻类网站制作 iPhone 应用程序的过程？

我知道有在线服务可以从您的博客（Wordpress、Blogger 等）创建原生 iPhone 应用程序，但我们有一个自定义构建的新闻站点，我们需要一个原生 iPhone 应用程序。是否有一些很酷的东西，某种框架或工具包可以为您提供基本设置，如数据获取、缓存、分类和根据原生 iOS UIKit 元素的通用 UI？还是从头到尾自己动手的唯一方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T15:38:09.763

据我所知，有几个 SDK 可以让您使用 html、css 和 javascript 创建完整的应用程序。

*   电话间隙（[http://phonegap.com/](http://phonegap.com/)）
*   科尔多瓦 ( [http://cordova.apache.org/](http://cordova.apache.org/) )

# android - ANDROID - 当我调用 sendBroadcast 检查网络时崩溃

> ID：15006105
> 
> 赞同：0
> 
> 时间：2013-02-21T15:32:51.643
> 
> 标签：android, crash, broadcastreceiver, android-broadcast

我有一个广播来检查网络，当网络改变状态时，我用 onNetworkActivated() 或 onNetworkInactivated() 通知我的活动：

```
public class NetworkBroadcastReceiver extends BroadcastReceiver
{
    private OnNetworkListener currentActivity = null;

    public NetworkBroadcastReceiver(FragmentActivity activity)
    {
        try
        {
            currentActivity = (OnNetworkListener) activity;
        }
        catch (ClassCastException e)
        {
            throw new ClassCastException(activity.toString() + " doit implémenter OnNetworkListener");
        }
    }

    @Override
    public void onReceive(Context context, Intent intent)
    {
        ConnectivityManager connectivity = (ConnectivityManager)  
                    context.getSystemService(Context.CONNECTIVITY_SERVICE);

        if (connectivity == null)
        {
            currentActivity.onNetworkInactivated();
            return;
        }
        else 
        {
            NetworkInfo info = connectivity.getActiveNetworkInfo();
            if (info != null && info.getState() == NetworkInfo.State.CONNECTED)
            {
                 currentActivity.onNetworkActivated();
                 return;
            }
        }
        currentActivity.onNetworkInactivated();
    }

    public interface OnNetworkListener
    {
        public void onNetworkActivated();
        public void onNetworkInactivated();
    }
} 
```

在我的Activity中，当我因为各种原因需要第一次调用sendBroadcast，但是Android crash :s

```
public class Earthquake extends FragmentActivity implements OnNetworkListener
{
    private FragmentManager fragmentManager;
    private NetworkBroadcastReceiver networkbroadcastreceiver;

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        fragmentManager = getSupportFragmentManager();
        networkbroadcastreceiver = new NetworkBroadcastReceiver(Earthquake.this);
        this.registerReceiver(networkbroadcastreceiver, new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION));
        this.sendBroadcast(new Intent(ConnectivityManager.CONNECTIVITY_ACTION));
    }

    @Override
    protected void onDestroy()
    {
        this.unregisterReceiver(networkbroadcastreceiver);
        super.onDestroy();
    }

    public void onNetworkActivated()
    {
        Log.e("onNetworkActivated", "onNetworkActivated");
    }

    public void onNetworkInactivated()
    {
        Log.e("onNetworkInactivated", "onNetworkInactivated");
    }
} 
```

问题是什么 ？

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-03T16:14:35.393

[https://stackoverflow.com/a/17906435/2201919](https://stackoverflow.com/a/17906435/2201919)[来自](https://stackoverflow.com/users/529691/joxtraex) @JoxTraex

您无权发送此广播。如果应用程序可以发送此广播，那么这可能会导致设备出现问题。这是受保护的系统广播。

请以不同的方式解决您的问题。

参考：http: [//developer.android.com/reference/android/net/ConnectivityManager.html](http://developer.android.com/reference/android/net/ConnectivityManager.html)

请注意，只有少数方法使用该操作。这意味着您无法发送此广播。

# ssis - 如何使 SSIS 包看起来像 DTS

> ID：15006108
> 
> 赞同：0
> 
> 时间：2013-02-21T15:33:04.230
> 
> 标签：ssis, dts

我想知道是否有办法运行 SSIS 包，除了在 IDE 中逐步监控进度。

为了更好地解释这一点，当您运行一个包含 5 个步骤的 DTS 包时，该过程会显示每个步骤、当前正在运行的步骤、哪些步骤失败/成功等等。

有没有办法用 SSIS 包做到这一点。

我尝试运行一个执行 2 个 SSIS 包和 2 个 T-SQL 语句的 SQL 作业，但是，该作业只显示作业正在运行，没有关于它在做什么或它在哪一步等的详细信息。

提前感谢您在此主题上提供的任何帮助。

罗宾

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:42:15.287

您是否尝试过日志记录？包日志应该能够为您提供有关包的大量信息，例如组件运行时间、成功/失败等。如果您想在 GUI 端查看它，那么恐怕您将不得不运行它在 BIDS 中，当您考虑生产环境时，这并不是最优的。

# php - 学习mysql插入返回语法错误

> ID：15006109
> 
> 赞同：1
> 
> 时间：2013-02-21T15:33:10.507
> 
> 标签：php, mysql, sql, database, mysqli

我正在尝试为用户创建一个简单的插入语句......但它出错了......我只尝试了值并且它有效，它必须与我在插入语句中处理数组的方式有关？

有任何想法吗？

```
 if ($new_user_data) {
                    $mysqli->query("INSERT INTO users (user_name, user_year, user_sex, user_pic, user_level, user_password, user_email)
                                    VALUES ( ". $new_user_data['user_name'] .",". $new_user_data['user_year'] .",". $new_user_data['user_sex'] .",". $new_user_data['user_pic'] .",1,". $new_user_data['user_password'] .",". $new_user_data['user_email'] ." )");
                    print_r($mysqli->error);
                } 
```

错误：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '@gmail.coms )' at line 2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T15:34:12.150

您需要将字符串用引号括起来：

```
$mysqli->query("INSERT INTO users (user_name, user_year, user_sex, user_pic, user_level, user_password, user_email)
                VALUES ( '". $new_user_data['user_name'] ."','". $new_user_data['user_year'] ."','". $new_user_data['user_sex'] ."','". $new_user_data['user_pic'] ."',1,'". $new_user_data['user_password'] ."','". $new_user_data['user_email'] ." )'"); 
```

我知道我看不到你所有的代码，但看起来你对 SQL 注入很开放。

# c# - 实体对象的虚拟列表为空，如何初始化？

> ID：15006110
> 
> 赞同：1
> 
> 时间：2013-02-21T15:33:16.333
> 
> 标签：c#, entity-framework-5

我有两个 Entities`BlogPost`和`Tag`，我希望能够添加/检索`Tag`与 each 关联的 s列表，以及与 each 关联的 s`BlogPost`列表。`BlogPost``Tag`

从理论上讲，这应该没问题，因为会有一个表格将它们通过to`BlogPostTags`链接在一起。`BlogPostId``TagId`

我遇到的问题是当我尝试将`Tag`s 添加到 new`BlogPost`时，该`BlogPost.Tags`属性为空。

如何初始化列表，甚至只是一个空列表，以便我可以将`Tag`s 添加到它？

```
public class BlogPost
{
    public int BlogPostId { get; set; }
    public string BlogTitle { get; set; }
    public string BlogContent { get; set; }

    public virtual List<Tag> Tags { get; set; }
}

public class Tag
{
    public int TagId { get; set; }
    public string TagName { get; set; }

    public virtual List<BlogPost> BlogPosts { get; set; }
} 
```

在某处创建标签，如下所示：

```
Tag tag1 = context.Tags.Create();
tag1.TagName = "test1";
context.Tags.Add(tag1);
context.SaveChanges(); 
```

然后我希望能够将它们添加到新的`BlogPost`：

```
BlogPost post = context.BlogPosts.Create();
post.BlogTitle = "Test post";
post.BlogContent = "this is a test blog and as such lorem bacon.";
post.DatePosted = DateTime.Now;
post.Tags.Add(tag1);
context.BlogPosts.Add(post);
context.SaveChanges(); 
```

但`post.Tags`抛出`Object reference not set to an instance of an object`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T15:36:03.897

在构造函数中初始化列表

```
public class BlogPost
{
    public int BlogPostId { get; set; }
    public string BlogTitle { get; set; }
    public string BlogContent { get; set; }

    public virtual List<Tag> Tags { get; set; }
    public BlogPost()
    {
        Tags = new List<Tag>();
    }
} 
```

和其他班级一样

```
public class Tag
{
    public int TagId { get; set; }
    public string TagName { get; set; }

    public virtual List<BlogPost> BlogPosts { get; set; }

    public Tag()
    {
        BlogPosts = new List<BlogPost>();
    }
} 
```

# css - 在同一条“线”上左右缩进的理想方式？

> ID：15006118
> 
> 赞同：1
> 
> 时间：2013-02-21T15:33:55.693
> 
> 标签：css, html

所以我在标题中有两件事，即h1中的图像和导航。这是 HTML 的简化版本：

```
<header>
  <h1><img src="../img/logo.png"></a></h1>
  <nav>
    <ul>
      <li>blahblah</li>
    </ul>
  </nav>
</header> 
```

我想让 h1 元素向左移动，导航向右移动。我只是给标题一个宽度，并像这样绝对定位 h1 和 nav：

```
header {height: 120px;}
h1 {position:absolute; left: 0;top:0;}
nav {position:absolute; right:0; top:0;} 
```

它有效，但我觉得它有点不雅。还有其他更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T15:36:53.090

是的，您应该能够在没有定位的情况下左右浮动它们。

```
header {
   height: 120px;
}
h1 {
   float: left;
}
nav {
   float: right;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T15:37:26.753

通常你只是`float`在它们各自的角落里的元素，比如

```
header { overflow:auto; }
header h1 { float: left; }
header nav { float: right; } 
```

`overflow`用于让 header 保持元素周围的高度，但在某些情况下可以将其删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T15:38:56.047

CSS 的 Float 属性允许您将元素浮动到右侧或左侧，但如果您希望缩进元素，则可能需要使用

```
text-indent: 10px; 
```

您可以将其添加到类中，并将此类添加到需要缩进的任何元素中

# dhtmlx - 在时间轴中过滤事件会停止在 DHTMLX 中绘制新事件

> ID：15006121
> 
> 赞同：0
> 
> 时间：2013-02-21T15:34:06.440
> 
> 标签：dhtmlx

我使用过滤时的 dhtmlxscheduler 时间线

```
scheduler.filter_timeline = scheduler.filter_month = scheduler.filter_day = scheduler.filter_week = function(id, event) {
        // display event only if its type is set to true in filters obj
        if (rules[event.user_id]) {
                return true;
        }

        // default, do not display event
        return false;
}; 
```

拖动动画（绘制节点/会话）不起作用。
如果您查看 DHTMLX_scheduler 示例，您将看到创建新事件无法正常工作。
/samples/09_api/09_filtering_events.html

我正在使用 Trace Skin 。每件事都运作良好。连灯箱都在加载。主要问题是当我使用此语句 filter_timeline 然后时间轴绘制停止绘制事件时。（它也可以创建它，但它就像透明一样）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T10:16:57.187

这不是调度程序本身的错误，而是示例写得不好在示例代码中，更新下一行

代码：全选

```
if (filters[event.type]) { 
```

作为

代码：全选

```
if (filters[event.type] || event.type==scheduler.undefined) { 
```

当事件刚刚创建时，它还没有定义类型，所以它被之前的逻辑过滤掉了

# php - 一起使用 (int) 和 (double) 来截断小数时出错

> ID：15006126
> 
> 赞同：5
> 
> 时间：2013-02-21T15:34:26.783
> 
> 标签：php, floating-point, int, double, floating-point-precision

当我将 (int) 与 (double) 一起使用时，有时它无法正常工作。
查看 PHP 代码示例：

我需要留下 2 个小数并删除其他...

**我知道 number_format(); 功能但我不能使用它。因为它是四舍五入的数字**

`number_format(24.299,2);`
输出：24.30
我需要：24.29

```
<?php

$str="158.2";

echo (double)$str; // Output: 158.2
echo (double)$str*100; // Output: 15820
echo (int)((double)$str*100); // Output: 15819 <-WHY? It Must To Be 15820, Why 15819? 
echo ((int)((double)$str*100)/100); // Output: 158.19
?> 
```

我需要在数字中保留两位小数，并在不四舍五入的情况下减少其他小数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T15:57:44.313

由于浮点精度（例如，参见这个问题：[PHP - Floating Number Precision](https://stackoverflow.com/questions/3726721/php-math-precision/3726761)），`158.2 * 100`不*完全是* `15820`，而是类似于`15819.99999999`.

现在`(int)`是用于类型转换，**而不是用于舍入**，并且该点之后的任何数字都被切掉。

> 我需要在数字中保留两位小数，并在不四舍五入的情况下减少其他小数。

这很简单：

```
number_format($str, 2); 
```

**更新**

`number_format` *做*圆，所以它有点复杂：

```
bcmul($str,100,0)/100 
```

[`bcmul`](http://php.net/bcmul)以任意精度相乘，在本例中为 0。结果：

```
bcmul(158.2,100,0)/100 == 158.2
bcmul(24.299,100,0)/100 == 24.29 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T15:47:19.697

这不能回答为什么会发生这种情况的问题（它可能是一个精确错误），但要解决您的问题，请尝试使用`$foo = sprintf("%.2f", (float)$str);`.

例子：

```
$str = "158.2";
$num = (double)$str;
print sprintf("%.2f", $num); 
```

编辑：事实上，是的，这是一个精度问题。（在 C++ 中）通过打印 158.2 到 20 个小数位，我得到“158.19999999999998863132”的输出。这是浮点/双精度值的固有问题。`echo sprintf("%.20f", $var);`在 PHP 中使用也可以看到同样的效果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T15:47:50.563

首先，PHP 是一种允许您[键入 juggle](http://php.net/manual/en/language.types.type-juggling.php)的语言。这意味着您不需要 the`(int)`或 the`(double)`来做您想做的事情。

```
<?php
$str="158.2"; //could also do $str = 158.2
echo $str; // Ouput: 158.2
echo $str * 100; //Output: 15820
echo number_format($str, 2); //Output: 158.20
echo number_format(($str*100)/100, 2); //Output: 158.20
?> 
```

使用该`number_format`命令以您想要的方式格式化您的数字。

更多[在这里](http://php.net/manual/en/function.number-format.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T15:55:38.423

切勿将未知分数转换为整数，请参阅[http://www.php.net/manual/en/language.types.integer.php](http://www.php.net/manual/en/language.types.integer.php)上的手册。 `(int) ( (0.1+0.7) * 10 );`将导致 7，而不是预期的 8。从浮点数转换为整数将始终向下舍入 - 您可能还想检查运算符优先级[http://php.net/manual/en/language.operators.precedence.php](http://php.net/manual/en/language.operators.precedence.php)。

解决方案：在你投之前计算你的分数。`$fStr = (float) $str; $iStr = (int) $fStr;`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T15:57:21.083

固定的。

```
 function cutDecimals($number,$decimal){
        $_str=(string)$number;
        if(strpos($_str,".")!==false){
            $dotPosition=strpos($_str,".")+1;
            $_numCount=strpos($_str,".");
            $_decimal=strlen($_str)-$dotPosition;

            if($_decimal<$decimal) return (double)$_str;
            else return (double)substr($_str,0,$_numCount+$decimal+1);
        }else return (double)$_str;
    }

    echo cutDecimals("158.099909865",2)."<br />";
    echo cutDecimals("14.02",2)."<br />";
    echo cutDecimals("41.12566",2)."<br />";
    echo cutDecimals("1.981",2)."<br />";
    echo cutDecimals("0.4111",2)."<br />";
    echo cutDecimals("144.2",2)."<br />";
    echo cutDecimals("55.000000",2)."<br />";
    echo cutDecimals("1456115.499811445121",2)."<br />";

?> 
```

# proxy - Castle Windsor 组件激活器的预期生活方式是什么？

> ID：15006128
> 
> 赞同：0
> 
> 时间：2013-02-21T15:34:31.150
> 
> 标签：proxy, castle-windsor, castle, activator

我正在使用 Castle Windsor 和 DynamicProxy 从头开始​​实现持久性延迟加载（我知道 NHibernate 可能是一个选项等）。我已经实现了一个自定义组件激活器来始终将我的业务类实例化为代理。我发现当从类本身内部调用类方法时，没有使用使用拦截器时自动创建的默认 mixin 代理，这是一个问题。所以我继承了 DefaultComponentActivator 并覆盖了 CreateInstance() 我正在调用 CreateClassProxy() 来获取一个从业务类继承的代理，这在这方面工作正常。

现在我希望我的这个 'ProxyComponentActivator' 激活器只被 Castle 实例化一次，但正在为每个类类型创建一个新实例。那是对的吗？

目前的注册是这样的：

```
public void Install(
   IWindsorContainer container,
   Castle.MicroKernel.SubSystems.Configuration.IConfigurationStore store) {
    container.Register( 
        Classes
            .FromAssemblyContaining(typeof(OneOfMyBusinessClasses))
            .InNamespace(typeof(OneOfMyBusinessClasses).Namespace)
            .WithService.DefaultInterfaces()
            .Configure(reg => reg.Activator<ProxyComponentActivator>())
            .LifestyleTransient(),
        etc.
    );
); 
```

激活器实现如下：

```
public class ProxyComponentActivator : DefaultComponentActivator
{
    protected Castle.DynamicProxy.ProxyGenerator ProxyGenerator { get; set; }
    protected PersistenceInterceptor PersistenceInterceptor { get; set; }

    public ProxyComponentActivator(ComponentModel model, Castle.MicroKernel.IKernelInternal kernel, ComponentInstanceDelegate onCreation, ComponentInstanceDelegate onDestruction)
        : base(model, kernel, onCreation, onDestruction)
    {
        this.ProxyGenerator = kernel.Resolve<Castle.DynamicProxy.ProxyGenerator>();
        this.PersistenceInterceptor = kernel.Resolve<PersistenceInterceptor>();
    }

    protected override object CreateInstance(CreationContext context, ConstructorCandidate constructor, object[] arguments) //, Type[] signature)
    {
        object instance;

        Type implType = this.Model.Implementation;

        ProxyGenerationOptions p = new ProxyGenerationOptions();

        IPersistent ip = new Persistent();
        p.AddMixinInstance(ip);

        try
        {          
            instance = this.ProxyGenerator.CreateClassProxy(implType, null, p, arguments, this.PersistenceInterceptor);                
        }
        catch
        {
            throw new ComponentActivatorException("ComponentActivator: could not proxy " + implType.FullName, Model);
        }

        return instance;
    }
} 
```

我也尝试过像这样注册激活器，但无济于事......

```
Component.For<ProxyComponentActivator>()
.ImplementedBy<ProxyComponentActivator>()
.LifestyleSingleton() 
```

在此先感谢您的帮助，路易斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T02:38:28.253

Windsor 中的每个组件都会有自己的激活器实例

# java - 通过 Java 中的注解值获取枚举值

> ID：15006132
> 
> 赞同：1
> 
> 时间：2013-02-21T15:34:42.440
> 
> 标签：java, enums, annotations

我正在尝试使用与枚举值关联的注释字符串值，以获得对关联枚举值的引用。

我最终陷入了中途......目前我有以下开发代码：

注释代码：

```
public @interface MyCustomAnnotation{
    String value();
} 
```

枚举代​​码：

```
public enum MyEnum{
    @MyCustomAnnotation("v1")
    VALUE1,
    @MyCustomAnnotation("v2")
    VALUE2,
    @MyCustomAnnotation("v3")
    VALUE3,
} 
```

使用枚举注解：

```
String matchString = "v1";
MyEnum myEnumToMatch;

// First obtain all available annotation values
for(Annotation annotation : (MyEnum.class).getAnnotations()){
    // Determine whether our String to match on is an annotation value against
    // any of the enum values
    if(((MyCustomAnnotation)annotation).value() == matchString){
        // A matching annotation value has been found
        // I need to obtain a reference to the corrext Enum value based on
            // this annotation value
        for(MyEnum myEnum : MyEnum.values()){
            // Perhaps iterate the enum values and obtain the individual
                    // annotation value - if this matches then assign this as the
                    // value.
            // I can't find a way to do this - any ideas?
            myEnumToMatch = ??
        }
    }
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T15:38:40.293

在枚举中有一个字段会更容易，如下所示：

```
public enum MyEnum {
    VALUE1("v1"),
    VALUE2("v2"),
    VALUE3("v3");

    private String displayValue;

    private MyEnum(string s) {
        this.displayValue = s;
    }

    public String getDisplayValue() {
        return displayValue;
    }
} 
```

然后在您的匹配循环中，您只需循环`MyEnum.values()`并查找具有正确 displayValue 的那个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T15:43:59.007

我完全同意@MichaelMyers 的观​​点，即最好为枚举添加一个值，而不是使用注释。但是，下面的代码应该可以帮助您了解注释是如何附加到枚举值的。

```
@Retention(RetentionPolicy.RUNTIME)
public @interface MyAnno {
    String value();
}

public enum Example {
    @MyAnno("v1")   FOO, 
    @MyAnno("v2")   BAR, 
    @MyAnno("v3")   BAZ
}

public static void main(String[] argv)
throws Exception {
    for (Field field : Example.class.getDeclaredFields()) {
        System.out.println(field.getName());
        for (Annotation anno : field.getAnnotations()) {
            if (anno instanceof MyAnno) {
                MyAnno myAnno = (MyAnno)anno;
                System.out.println("   anno = " + myAnno.value());
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T15:54:14.517

枚举常量是`enum`类的常规字段，因此您必须通过反射访问它们：

```
for (Field enumValue : MyEnum.class.getDeclaredFields()) {
    MyAnnotation annotation = enumValue.getAnnotation(MyAnnotation.class);
    if (annotation != null) {
        System.out.printf("Field '%s' is annotated with @MyAnnotation with value '%s'\n",
                enumValue.getName(),
                annotation.value());
    } else {
        System.out.printf("Field '%s' is not annotated with @MyAnnotation\n", enumValue.getName());
    }
} 
```

请注意，这还将包括一个名为的内部字段`$VALUES`，其中包含一个包含所有枚举值的数组。您可以使用例如过滤掉它`if (enumValue.isSynthethic()) { ... }`。

# java - spring secruity 3.1：登录后，不重定向到欢迎页面

> ID：15006135
> 
> 赞同：1
> 
> 时间：2013-02-21T15:34:56.160
> 
> 标签：java, spring-mvc, spring-security

以下是我的安全配置：

```
 <security:http pattern="/login.*" security="none"/>
      <security:http realm="myrealm">
            <security:intercept-url pattern="/" access="ROLE_USER,ROLE_ADMIN,ROLE_GROUPADMIN,ROLE_GROUP,ROLE_LOCMGR"/>
            <security:intercept-url pattern="/*jsp" access="ROLE_USER,ROLE_ADMIN,ROLE_GROUPADMIN,ROLE_GROUP,ROLE_LOCMGR"/>
            <security:intercept-url pattern="/welcome.do" access="ROLE_ADMIN,ROLE_HD,ROLE_GROUPADMIN,ROLE_GROUP,ROLE_LOCMGR,ROLE_USER,ROLE_SCANNER"/>
            <security:intercept-url pattern="/*do"   access="ROLE_ADMIN,ROLE_GROUPADMIN,ROLE_GROUP,ROLE_LOCMGR,ROLE_USER"/>
            <security:form-login login-page="/login.do" 
                 default-target-url="/welcome.do" 
                 always-use-default-target="true"
                 authentication-failure-url="/login.do?login_error=1"/>
            <security:logout logout-success-url="/login.do" />
            <security:http-basic/>
            <security:anonymous />
     </security:http>

    <bean id="authProvider" class="AuthenticationProvider">
    </bean>     
    <security:authentication-manager alias="authenticationManager">  
        <security:authentication-provider ref="authProvider"/>
    </security:authentication-manager> 
```

我可以看到登录页面，输入凭据并提交后，它没有重定向并刷新相同的登录页面。在调试模式下我可以看到：`Authenticated SCOTT on local database` 我收到错误登录密码的错误消息..并且重置密码或忘记密码链接也有效并重定向。但是，不是欢迎页面

此时它失败了，当我调试时，主体具有 role_admin 权限，并且密码具有正确的值。但是，在这个调用`newAuth`之后有空值！`UsernamePasswordAuthenticationToken`

```
Authentication newAuth = new UsernamePasswordAuthenticationToken(principal, password); 
```

编辑：它试图通过身份验证管理器，因为在我的配置中，我正在使用 `authentication-manager`并且`UsernamePasswordAuthenticationToken`方法需要 3 个参数。

```
UsernamePasswordAuthenticationToken(object principal, object credentials, collection authorities); 
```

这将解决问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:54:08.270

`UsernamePasswordAuthenticationToken``Authentication Manager`由于配置的原因，试图通过，`UsernamePasswordAuthenticationToken`方法需要 3 个参数。

```
UsernamePasswordAuthenticationToken(object principal, object credentials, collection authorities); 
```

通过传递第三个参数`authorities`经理感到满意`:)`并让用户通过！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:08:15.447

我猜发生的情况是，在成功登录后，浏览器实际上被重定向到`/welcome.do`，但经过身份验证的用户无权查看该页面，因此它被发送回登录页面。仔细检查（例如，通过启用调试级别日志记录）用户是否确实拥有下列权限之一：

```
 <security:intercept-url pattern="/welcome.do" access="ROLE_ADMIN,ROLE_HD,ROLE_GROUPADMIN,ROLE_GROUP,ROLE_LOCMGR,ROLE_USER,ROLE_SCANNER"/> 
```

# http-live-streaming - .m3u8 播放列表文件可以引用其他 .m3u8 播放列表文件吗？

> ID：15006136
> 
> 赞同：3
> 
> 时间：2013-02-21T15:34:58.737
> 
> 标签：http-live-streaming

我知道 EXT-X-STREAM-INF 标签提供了一种链接到另一个播放列表文件的机制，但这似乎是为了支持同一流的变体编码（在较低或较高带宽下）。我想做的是返回一个引用实际.ts 文件的播放列表，但播放列表中的最后一个引用是“下一个”.m3u8。

我想要这个的原因是我可以使用这种机制来构建一个无状态的 HLS 服务器，它不一定提供“实时”流（因为播放列表 URL 可以编码关于流中 WHERE 的信息）。知道哪些玩家支持这个（iOS 支持吗？）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T22:19:34.860

是的他们可以。包含其他 m3u8 的主 m3u8 称为变体播放列表 m3u8。但是为什么我们需要一个变体播放列表呢？- 用于存储同一流的各种比特率

我使用了 mac 应用商店中的“One Click m3u8”应用程序——它创建了变体播放列表以及儿童 m3u8。不需要 ffmpeg 或 mediafilesegmenter。

[如何在 youtube 上播放视频](https://www.youtube.com/watch?v=ik1VRrACy3s)

[网站](http://www.nacentApps.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T17:29:25.927

规范草案（从草案 10 开始）不支持它。

# types - 是否可以有一个数据框，其中单元格包含列表？

> ID：15006145
> 
> 赞同：-1
> 
> 时间：2013-02-21T15:35:20.043
> 
> 标签：types, dataframe, cell, pandas

我们可以将数据框想象成一个表格。不同的单元格包含不同类型的值（整数、实数、字符串）。我想知道是否有可能有一个数据框，其中一些单元格包含列表（或者，或者，系列）。

**添加**

我在`groupby`操作的背景下对这个问题感兴趣。如果我们将此操作应用于数据帧，结果我们不会得到另一个数据帧。我想知道为什么不。为什么不拥有另一个将列表作为某些单元格的值的数据框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T15:39:39.977

是的：

```
In [1]: df = pd.DataFrame([[list('ABC')]])

In [2]: df
Out[2]: 
           0
0  [A, B, C] 
```

*注意：此列的 dtype 是`object`.*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T18:28:13.700

这就是您所说的关于 groupby 和列表​​的内容吗？

```
In [21]: df
Out[21]:
   0  1
0  a  0
1  b  1
2  a  2
3  b  3
4  a  4
5  b  5
6  a  6
7  b  7
8  a  8
9  b  9

In [22]: df.groupby(0).agg(lambda x: x.tolist())
Out[22]:
                 1
0
a  [0, 2, 4, 6, 8]
b  [1, 3, 5, 7, 9] 
```

# google-maps - 谷歌地理编码中视口和边界之间的区别

> ID：15006148
> 
> 赞同：12
> 
> 时间：2013-02-21T15:35:29.857
> 
> 标签：google-maps, geocoding, viewport, google-geocoding-api

谷歌地理编码api中的视口和边界矩形有什么区别？

对于大国（美国、俄罗斯），视口与边界不同（加拿大的示例请求：[http](http://maps.googleapis.com/maps/api/geocode/xml?address=Canada&sensor=false) ://maps.googleapis.com/maps/api/geocode/xml?address=Canada&sensor=false ，但对于较小的国家、地区和城市他们是平等的。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2016-11-04T06:35:24.110

**视口**包含用于显示返回结果的推荐视口，指定为定义视口边界框西南角和东北角的两个纬度、经度值。通常，当向用户显示结果时，视口用于框定结果。

**Bounds**存储可以完全包含返回结果的边界框。请注意，这些边界可能与推荐的视口不匹配。（例如，旧金山包括 Farallon 岛，从技术上讲，它们是城市的一部分，但可能不应该在视口中返回）

欲了解更多信息：[https ://developers.google.com/maps/documentation/geocoding/intro#Results](https://developers.google.com/maps/documentation/geocoding/intro#Results)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-21T15:43:12.517

我认为，如果大国的视口和边界不一样，仅仅是因为它们无法以默认缩放显示。因此，当前视图的边界是正确的，但不会显示整个国家/地区。

对于视口，它只是显示整个国家的最低限度。

希望我回答你的问题。

# android - 如何实现这样的布局？

> ID：15006150
> 
> 赞同：-1
> 
> 时间：2013-02-21T15:35:35.923
> 
> 标签：android, android-layout

这种布局中的照片可以左右滑动，并且滑动应该是“智能的”，就像在照片之间切换而不是像水平滚动照片一样。

我想到的2个实现：

1.  Horizo​​ntalScrollView（但滑动是愚蠢的）
2.  ViewPager（但没有办法看到相邻的照片）

所以，基本上我需要一个 ViewPager 来显示可以显示相邻照片的照片。有没有一个强大的解决方案？

![布局](../Images/f54331ff2c9cc0fe952fe7c088813eb8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:05:12.907

我使用[TwoWayView](https://github.com/lucasr/twoway-view)来实现我的布局。它比 Horizo​​ntalView 更好，因为它重用了视图（如 ListView）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T15:40:43.583

对于很酷的滑动动作 viewpager 是最好的。而且你不会有记忆问题。但我不知道如何使视图寻呼机成为列表视图的一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T15:47:23.293

如果您有最终数量的项目，则可以使用自 api 16 以来已弃用但完全符合您需要的[Android Gallery 小部件](http://developer.android.com/reference/android/widget/Gallery.html)，主要问题是它无法在适配器内重用图库项目。

你也可以试试这个： [水平列表视图](http://www.dev-smart.com/archives/34)

# android - HttpClient错误处理Android

> ID：15006161
> 
> 赞同：1
> 
> 时间：2013-02-21T15:36:18.803
> 
> 标签：android, httpclient

我像这样向服务器发送请求

```
public HttpResponse post(String URN, String entity) throws IOException {
    HttpPost httpPost = new HttpPost(URL + URN);
    httpPost.setHeader("Content-type", "application/json");
    httpPost.setHeader("Accept", "application/json");
    httpPost.setEntity(new StringEntity(entity, HTTP.UTF_8));
    return httpClient.execute(httpPost, httpContext);
} 
```

要创建一个新帐户，电话号码会发送到服务器并进行验证。如果数字无效，则返回 400 BAD REQUEST 错误。

在来自服务器的响应中，内容中会返回一个 JSON 对象。这包含返回 400 错误的原因的详细信息。典型的 JSON 响应如下所示

```
{"dev_message": "The number 93015205229804 isn't a valid mobile number.", "user_message": "Invalid phone number", "error_code": 108} 
```

当返回 400 错误时，execute 方法会引发 IOException。如果自动抛出错误，我该如何从 HttpResponse 获取消息？

# jquery - 我的 url 哈希是否定义为 jquery 数据？

> ID：15006162
> 
> 赞同：0
> 
> 时间：2013-02-21T15:36:25.243
> 
> 标签：jquery

我正在触发基于 url 中传递的哈希的 javascript。

但是，如果哈希不是我期望的，我不想触发。

预期的哈希列表是使用`data-category`属性定义的。

我如何获得这些数据的数组，以便查看我的哈希是否在数组中？

这是给我的 HTML：

```
 <div class="filter_padder" id="nav_channels">
        <div class="filter_wrapper" style="max-width:650px;">
            <div class="filter selected" data-category="cat-all">ALL</div>
            <div class="filter" data-category="MusicWorld">MusicWorld</div>
            <div class="filter" data-category="Awards">Awards</div>
            <div class="filter" data-category="MX">Exchange</div>
            <div class="filter last-child" data-category="Com">Community</div>
            <div class="clear"></div>
        </div>
    </div> 
```

Javascript：

```
// set any hash in the url to a variable
var hash = location.hash.replace('#', '');

// see if my hash is expected (would like to handle this dynamically)
if(hash === (cat_all|Awards|MX|Com)) {
  doSomething();
} 
```

但我不知道如何动态构建要与“哈希”进行比较的元素列表。我认为是这样的：

```
$('#nav_channels').data('category'); 
```

但不能让它发挥作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T15:41:22.603

试试这个 ：

```
var hash = location.hash.replace('#', '');
if( $('.filter[data-category="'+hash+'"]').length ) { 
  doSomething();
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T15:43:17.317

您可以像这样将值放入数组中：

```
var cats = $('[data-category]').map(function() {
    return $(this).data('category');
}).get(); 
```

# jquery - CSS 过渡不适用于 DOM 操作

> ID：15006164
> 
> 赞同：2
> 
> 时间：2013-02-21T15:36:30.137
> 
> 标签：jquery, css, dom, css-transitions

假设我有一些定义了`left`style 属性的块，并且`transition`为该属性定义了：

```
<div id="caret" class="caret" style="left: 20px"></div>

.caret {
    transition: left 0.3s;
} 
```

好的，现在当我更改`left`via时，`$.css()`一切都完美过渡：

```
$('#caret').css('left', '100px'); 
```

但是当我在 DOM 中将块从一个地方移动到另一个地方然后 change`left`时，没有任何过渡，它只是立即跳转到给定值：

```
$('#caret').appendTo('#container').css('left', '50px'); 
```

然而，如果我稍等片刻`left`再改变，过渡又回来了。感觉需要一些时间来准备。

我创建了一个简单的展示来演示这个问题：http: [//jsfiddle.net/L624m/2/](http://jsfiddle.net/L624m/2/)

那么，为什么会这样呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:13:23.983

问题是您的 JavaScript 代码，在典型的浏览器中，不会让 DOM 首先创建新元素，因此样式实际上将直接应用于新元素，根本不会导致过渡。

添加元素后，您必须“中断” JavaScript 并让 DOM 首先注意到新元素；通常这是通过使用`setTimeout`0ms 间隔来完成的，例如：

```
setTimeout(function(){
    caret.css('left', left === '20px' ? '100px' : '20px');
},0); 
```

因此，由于`setTimeout`，浏览器总是会在 DOM 中真正进行更改**后将**`left`样式更改排队，而不是自己排队。

# windows - 用于设置变量的多个 for 循环，但只有第一个产生效果

> ID：15006167
> 
> 赞同：0
> 
> 时间：2013-02-21T15:36:37.220
> 
> 标签：windows, batch-file

这是我的 Windows 批处理文件：

```
FOR /F %%a IN ('git rev-parse --abbrev-ref HEAD') DO SET branchName = %%a
FOR /F %%a IN ('git rev-list --max-count^=1 %branchName%') DO SET localCommitId = %%a
FOR /F %%a IN ('git rev-list --max-count^=1 origin/%branchName%') DO SET remoteCommitId = %%a

@ECHO branchName = %branchName%
@ECHO localCommitId = %localCommitId%
@ECHO remoteCommitId = %remoteCommitId% 
```

这是我运行它时看到的输出：

```
>FOR /F %a IN ('git rev-parse --abbrev-ref HEAD') DO SET branchName = %a

>SET branchName = develop

>FOR /F %a IN ('git rev-list --max-count=1 develop') DO SET localCommitId = %a

>SET localCommitId = e4375fa4753b3956e1454020a812cc7591cf606e

>FOR /F %a IN ('git rev-list --max-count=1 origin/develop') DO SET remoteCommitId = %a

>SET remoteCommitId = e4375fa4753b3956e1454020a812cc7591cf606e

branchName = develop
localCommitId =
remoteCommitId = 
```

尽管打印的命令将它们设置为非空字符串，但我不明白为什么`localCommitId`并且是空的。`remoteCommitId``SET`

我猜`git`命令的功能与问题无关，因为如果我将它们替换为`ver`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T17:01:07.170

我也将添加一点解释。如果您键入`set branch`，您会看到`branchName = develop`. 意味着该变量实际上会被调用`%branchName %`并给出值`develop`

更正了下面的代码。

```
FOR /F %%a IN ('git rev-parse --abbrev-ref HEAD') DO SET branchName=%%a
FOR /F %%a IN ('git rev-list --max-count^=1 %branchName%') DO SET localCommitId=%%a
FOR /F %%a IN ('git rev-list --max-count^=1 origin/%branchName%') DO SET remoteCommitId=%%a

@ECHO branchName = %branchName%
@ECHO localCommitId = %localCommitId%
@ECHO remoteCommitId = %remoteCommitId% 
```

# entity-framework - 替换父项并将子项链接到它后保存 ObjectContext 时出错

> ID：15006171
> 
> 赞同：3
> 
> 时间：2013-02-21T15:36:47.133
> 
> 标签：entity-framework, sqlite, foreign-keys, system.data.sqlite

在我的应用程序中，该界面允许用户在实体框架模型中创建和删除实体。所有更改都添加到 中`ObjectContext`，并且仅在用户选择“保存”时才保存。

我的问题最好通过以下简单示例提出：

我在两个实体类型之间有一个外键关系，我将在这里调用`Parent`它`Child`。在 SQLite 中，数据库声明如下：

```
CREATE TABLE Parents   (ID INTEGER PRIMARY KEY);

CREATE TABLE Children  
(
    ID INTEGER PRIMARY KEY,
    ParentID INTEGER NOT NULL 
        CONSTRAINT FK_ChildrenToParents REFERENCES [Parents](ID) 
            ON DELETE CASCADE ON UPDATE CASCADE
) 
```

然后我在该数据库上构建一个实体框架模型，并对它执行以下操作（参见下面的代码）：

1.  创建一个`Parent`
2.  节省
3.  删除`Parent`
4.  创建一个`Parent`与原始 ID 号相同的新
5.  创建一个`Child`并为其提供新`Parent`的 ID 号
6.  保存（失败）

```
demoDBEntities entities = new demoDBEntities();

Parent originalParent = new Parent { ID = 1 };
entities.Parents.AddObject(originalParent);

entities.SaveChanges(); // First Save

entities.Parents.DeleteObject(originalParent);

Parent newParent = new Parent { ID = 1 };
entities.Parents.AddObject(newParent);
Child newChild = new Child { ID = 2, ParentID = 1 };
entities.Children.AddObject(newChild);

entities.SaveChanges(); // Second Save 
```

我在第二次调用时收到以下错误`SaveChanges()`：

`"Unable to insert or update an entity because the principal end of the 'demoDBModel.FK_Children_0_0' relationship is deleted."`

似乎问题在于实体框架将新`Child`项目链接到`originalParent`项目，然后将其删除并被`newParent`项目替换。这可能听起来很自负，但在我的应用程序中很自然地发生。

我有什么办法可以解决这个问题吗？

PS：我知道重复使用数据库条目的 ID 号是不好的做法 - 但是，在我的情况下，ID 号是资产号，理论上可以重复使用。也就是说，如果客户端创建了一个 faulty `Parent`，然后删除它，重新创建它，然后创建`Child`项目，则通常会发生上述情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T22:42:34.130

除了设置外键属性`ParentID`，您可以尝试设置导航属性之一（您必须至少有一个）并仅使用一次调用`AddObject`将完整的对象图添加到上下文中：

任何一个：

```
//...
entities.Parents.DeleteObject(originalParent);

Child newChild = new Child { ID = 2 };
Parent newParent = new Parent { ID = 1, Children = new List<Child>{ newChild } };
entities.Parents.AddObject(newParent);

entities.SaveChanges(); 
```

或者：

```
//...
entities.Parents.DeleteObject(originalParent);

Parent newParent = new Parent { ID = 1 };
Child newChild = new Child { ID = 2, Parent = newParent };
entities.Children.AddObject(newChild);

entities.SaveChanges(); 
```

# javascript - 显示 JSON 返回的错误消息

> ID：15006178
> 
> 赞同：4
> 
> 时间：2013-02-21T15:37:01.403
> 
> 标签：javascript, jquery, asp.net, asp.net-mvc, asp.net-mvc-4

我需要显示***Json***返回的消息。

在控制器中，抛出异常并在 catch 块中捕获。我正在返回故障错误消息。

在***Ajax***中，*成功*部分总是执行。但如果是我的***webservice***出错，我不想正常执行；相反，我想显示一条错误消息。

我怎样才能做到这一点？

我的代码如下：

## 控制器

```
[HttpPost]
public JsonResult DeleteClientRecord()
{

    bool result = true;
    try
    {
        result = ClientCRUDCollection.DeleteClient(deleteClientId);

    }
    catch (Exception ex)
    {

        return Json(ex.Message, JsonRequestBehavior.AllowGet);
    }

    return Json(new { result }, JsonRequestBehavior.AllowGet);
} 
```

## AJAX 调用

```
$("#YesDelete").click(function () {
    $.ajax({
        type: "POST",
        async: false,
        url: "/Client/DeleteClientRecord",
        dataType: "json",
        error: function (request) {
            alert(request.responseText);
            event.preventDefault();
        },
        success: function (result) {
            // if error from webservice I want to differentiate here somehow
            $("#Update_" + id).parents("tr").remove();
            $('#myClientDeleteContainer').dialog('close');
            return false;
        }
    });

}); 
```

请任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-21T15:42:40.390

```
[HttpPost]
public JsonResult DeleteClientRecord()

{

         bool result = true;
         try
         {
            result = ClientCRUDCollection.DeleteClient(deleteClientId);
         }
         catch (Exception ex)
         {
            return Json(new { Success="False", responseText=ex.Message});
         }

    return Json(new { result }, JsonRequestBehavior.AllowGet);

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-09T08:28:11.630

要显示错误消息，您应该在 AJAX 调用中的成功范围之后添加错误范围，如下所示：

```
$("#YesDelete").click(function () {
    $.ajax({
        type: "POST",
        async: false,
        url: "/Client/DeleteClientRecord",
        dataType: "json",
        error: function (request) {
            alert(request.responseText);
            event.preventDefault();
        },
        success: function (result) {
            // if error from webservice I want to differentiate here somehow
            $("#Update_" + id).parents("tr").remove();
            $('#myClientDeleteContainer').dialog('close');
            return false;
        }
        error: function (xhr) {alert(JSON.parse(xhr.responseText).Message); }
    });
}); 
```

# c# - 处理后台线程中使用的位图

> ID：15006179
> 
> 赞同：0
> 
> 时间：2013-02-21T15:37:09.187
> 
> 标签：c#, multithreading, bitmap, dispose, emgucv

我需要知道如何正确处理位图，以免出现内存泄漏。我在 BackgroundWorker 中抓取视频并将其分配给 PictureBox，如下所示：

```
private void bwVideo_ReadCamera(object sender, DoWorkEventArgs e)
{
  Bitmap temp = null;
  while (true)
  {
    Image<Bgr, Byte> frame = logitec.QueryFrame();
    if (temp != null)
      temp.Dispose();
    temp = frame.ToBitmap();
    pictureBox2.Image = temp;
   }
} 
```

问题是我仍然得到这个代码的“内存不足异常”。我尝试使用 BackgroundWorker ReportProgress 释放 pictureBox2.Image 变量，并在上面的代码中等待 dispose 完成（您需要与 gui 同步才能在 PictureBox 图像上调用 dispose）。我还尝试使用在 Image 和 Bitmap 之间共享数据的 Image 类的“Bitmap”属性。

所以我的问题是，在这种情况下，处理我的图像的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:15:02.093

您的声明可能应该有一个 using 语句`Image<Bgr, Byte>`。请参阅[文档](http://www.emgu.com/wiki/index.php/Working_with_Images#Automatic_Garbage_Collection)。

# ruby-on-rails - ZenTest 错误阻止自动测试运行

> ID：15006181
> 
> 赞同：3
> 
> 时间：2013-02-21T15:37:12.993
> 
> 标签：ruby-on-rails, autotest, zentest

我之前已将 ZenTest 添加到我的 gemfile 以运行自动测试。在这种情况下，我四次收到以下错误：

```
saasbook@saasbook:~/Documents/github/LocalSupport$ bundle exec autotest
Invalid gemspec in [/usr/local/lib/ruby/gems/1.9.1/specifications/ZenTest-4.9.0.gemspec]: Illformed requirement ["< 2.1, >= 1.8"] 
```

我搜索了这个错误，并在 ZenTest 的 github repo 中找到了一些讨论：

[https://github.com/seattlerb/zentest/issues/29](https://github.com/seattlerb/zentest/issues/29) [https://github.com/seattlerb/zentest/issues/32](https://github.com/seattlerb/zentest/issues/32) [https://github.com/seattlerb/zentest/issues/33](https://github.com/seattlerb/zentest/issues/33)

我已经听从了那里的一些建议，卸载并重新安装了 ZenTest，但没有任何乐趣。我在 ubuntu 上运行 ruby​​ 1.9.2p290（2011-07-09 修订版 32553）[i686-linux]

我的整个应用程序都在这里可用：

[https://github.com/tansaku/LocalSupport](https://github.com/tansaku/LocalSupport)

例如，您可以查看我的 GemFile：

[https://github.com/tansaku/LocalSupport/blob/master/Gemfile](https://github.com/tansaku/LocalSupport/blob/master/Gemfile)

有任何想法吗？

提前谢谢了

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T15:42:37.893

刚刚通过编辑解决了这个问题

/usr/local/lib/ruby/gems/1.9.1/specifications/ZenTest-4.9.0.gemspec

所以指定 ruby​​gems 版本的行现在是这样的：

```
 s.required_rubygems_version = Gem::Requirement.new("< 2.1") if s.respond_to? :required_rubygems_version= 
```

现在一切正常...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-21T16:58:23.570

升级 ruby​​gems 并重新安装 ZenTest（根据 Sam 写的）解决了我的问题，但它给我带来了另一个问题：

```
/Users/neo/.rvm/gems/ruby-1.9.2-p320/gems/bundler-1.2.3/lib/bundler/rubygems_integration.rb:187:in `stub_source_index170': uninitialized constant Gem::SourceIndex (NameError) 
```

我想做的任何事情，从运行自动测试到启动 rails 服务器，它都会给我这个错误。经过一番搜索，我找到[了这个](https://stackoverflow.com/questions/15079182/cant-run-rails-server-after-accidentally-running-gem-update-system)页面。rubygems 的最新版本似乎有一些错误，所以你不应该将它升级到最新版本，而是将它升级到更稳定的版本，如 1.8.24 。

# .net - 管理一个 VS 扩展对另一个扩展的依赖

> ID：15006182
> 
> 赞同：1
> 
> 时间：2013-02-21T15:37:14.353
> 
> 标签：.net, visual-studio-2012, nuget, vsix

我编写了一个 VS2012 扩展供内部使用，它简化了从当前加载的解决方案中包含的 nuspecs 发布和更新任何 nuget 包的过程。

我从官方包源中引用了 Nuget.Core 来执行此操作，添加了对官方 nuget 扩展的扩展级别依赖项，然后将我对 Nuget.Core 程序集的本地引用标记为*不*包含在 VSIX 中。

这一切都很好，直到昨天更新了 nuget - 现在我的扩展根本无法工作，因为它无法加载此核心程序集的旧版本（版本号总是更改）。

我刚刚尝试从 nuget 获取新版本，但尚未发布。

所以我面临着几个选择：

*   再次释放扩展，绑定重定向到较新版本
*   从 nuget 扩展的安装位置引用 DLL

但是这些似乎都不理想，因为我不想在更新 nuget 时继续重建和发布我的包！同样，我不想使用扩展部署我的程序集副本，因为它可能会停止主 nuget 扩展的工作。

有人给我其他选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T10:33:36.240

由于您的扩展确实依赖于 Nuget，我想每次发布新版本扩展的最佳选择。

关于VS可扩展性本身，据我所知，有一种方法可以使用ServiceProvider在扩展之间进行通信。您可以共享您的服务，也可以获取共享的服务。因此，如果 Nuget 提供任何服务，您可以尝试通过它们使用它。

请检查[ServiceProvider 类](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.data.framework.serviceprovider.aspx)的文档作为一个策略点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T10:38:05.650

您需要使用您开发它的依赖项的精确版本来分发您的软件。不能期望用户拥有它们。

阿法克，这是常态。为什么它会破坏任何东西？试试看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T11:29:19.973

[我将这个问题发给了 Luan Nguyen](https://twitter.com/RealLordZoltan/status/304616284446916610)，他在 Nuget 产品中工作。

正如您从那里的响应链中看到的那样，解决方案**不是**直接引用 Nuget.Core，因为它不受支持。Nuget 提供了一些服务提供商来执行一些 Nuget 操作，但不是我想要的东西。

因此，我最终遵循了他的建议——从 codeplex 中获取 Nuget 源并构建程序集的本地副本（具有不同的身份，因此它不会干扰 nugget 扩展）。

如果将新的包功能添加到 Nuget，我必须保持更新，但如果更新扩展，它将继续工作。

另一种选择是将本地 Nuget.Core 合并到扩展中；但是它是一个 WPF 程序集，它们不能被合并。我本可以创建一个标准的卫星程序集，然后我可以将 Nuget.Core 合并到其中。

# php - 在准备好的语句中获取按类别分组的行的 COUNT 和 SUM

> ID：15006183
> 
> 赞同：0
> 
> 时间：2013-02-21T15:37:21.477
> 
> 标签：php, sql, count, group-by, prepared-statement

我有以下准备好的语句，它返回为特定类别找到的行：

```
if ($stmt = $mysqli->prepare("SELECT Work,Amount from work_times where Category=?")) {
    $stmt->bind_param("s", $category);
    $stmt->execute();
    $stmt->store_result();
    $stmt->bind_result($work,$amount);

    while ($stmt->fetch()) {
    echo $work.": &pound;".$amount." each<br>";
    } 
```

我想做的是调整它以按“工作”列和“金额”列对行进行分组，为每个组返回一行，每个行/组都有一个 SUM 和计数，以便我可以输出像这样的东西：

**5**次咨询会议，每次**50**英镑：**250 英镑**

2013 年 2 月 1 日 2013 年2 月
8 日 2013年 2 月
15 日 2013年 2 月
22 日 2013 年
3 月 1 日

**3**次治疗，每次**40**英镑：**120 英镑**

2013 年 2月 2 日 2013 年 2 月
9 日 2013年 2 月
16 日

**2 次**治疗，每次**20**英镑：**40 英镑**

2013 年 2 月3 日 2013 年 2 月
10 日

其中每行中的粗体文本对应于：组中的行数、金额（对于每个会话）和组中每行的金额值的总和。我希望这很清楚！

我不确定如何调整上面的陈述来实现这一点。

**以上将是下表的结果：**

```
ID | Work                | Amount

1  | Therapy Session     | £40     | 2013-02-02
2  | Consultancy Session | £50     | 2013-02-01
3  | Therapy Session     | £20     | 2013-02-03
4  | Consultancy Session | £50     | 2013-02-08
5  | Consultancy Session | £50     | 2013-02-15
6  | Therapy Session     | £40     | 2013-02-09
7  | Consultancy Session | £50     | 2013-02-22
8  | Therapy Session     | £40     | 2013-02-16
9  | Therapy Session     | £20     | 2013-02-10
10 | Consultancy Session | £50     | 2013-03-01 
```

按行数对组进行排序，如上面的输出所示，理想情况下是我正在寻找的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T15:55:52.773

这应该有效：

```
SELECT `Work`, COUNT(*) AS sessions, SUM(`Amount`) AS Total
FROM work_times
GROUP BY `Work`, `Amount` 
```

**结果**

```
| 工作 | 会议 | 总计 |
------------------------------------------
| 顾问会议 | 5 | 250 |
| 治疗会议 | 2 | 40 |
| 治疗会议 | 3 | 120 |
```

[查看演示](http://sqlfiddle.com/#!2/29b2c/1)

# jquery - jQuery Validate 插件在 IE 中失败

> ID：15006185
> 
> 赞同：1
> 
> 时间：2013-02-21T15:37:23.140
> 
> 标签：jquery, internet-explorer, jquery-validate

我有一个使用 jQuery 验证的表单。该表单在除 IE 之外的所有浏览器中都能完美运行（无论 IE 版本如何）。我已经阅读了其他几篇关于让它工作的帖子，但它们没有帮助。他们中的一些人提到去掉尾随逗号；我试过了，但没有用。任何帮助将不胜感激。

这是我的验证码：

```
<script>
$(document).ajaxStop(function(){
  setTimeout("window.location = 'index.php'",60000);
});
        $.validator.addMethod("zero", function(input, element) {
        return ! input || input.match(/^[0]/);
}, "This field must start with a zero");
        $("#studentid").validate({
            debug: false,
            rules: {
                id: {required: true, zero: true}
            },
            messages: {
                id: {required: "Please enter the student's ID number.", zero: "Student ID must start with a zero."}
            },                 
            submitHandler: function(form) {

      $.ajax({
          url: 'tutoring.php',
          type: 'POST',
          data: $("#studentid").serialize(),         
          success: function(data) {
        $("#id").val("");
        $("#results").empty();
        $("#results").append(data);
        }
      });

      return false;
   }
});

</script> 
```

这是我的 HTmL：

```
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript" src="http://ajax.microsoft.com/ajax/jquery.validate/1.7/jquery.validate.min.js"></script>
<style type="text/css">
label.error {
  width: 350px;
  display: inline;
  color: red;
}
</style>
</head>

<div align="center">
  <h1>Welcome to the Ojeda Middle School Tutoring Website</h1>
</div>
<p>You can use this page to view tutoring information for the current week.</p>
<p>Please enter a student ID number below then click Submit.</p>
<form id='studentid' class='studentid' action='' method='get'>
  <p>
    <label for="id">Student ID:</label>
    <input type="text" name="id" id="id" /><br>
    <button id='submit' class='submit'>Submit</button>
  </p>
</form>
<p>
<div id="results"></div> 
```

我什至尝试尽可能简化验证代码。简化后它仍然适用于除 IE 之外的所有浏览器。

简化验证码：

```
<script>
$(document).ajaxStop(function(){
  setTimeout("window.location = 'index.php'",60000);
});

        $("#studentid").validate({
            debug: false,
            rules: {
                id: {required: true}
            },
            messages: {
                id: {required: "Please enter the student's ID number."}
            },                 

});

</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T15:50:39.583

你的代码：

```
$.validator.addMethod("zero", function(input, element) { ... });
$("#studentid").validate({
    // options
}); 
```

您应该将您的代码包装在一个准备好的 DOM 中，并且它按照下面的演示工作。

```
$(document).ready(function() {

    $.validator.addMethod("zero", function(input, element) { ... });
    $("#studentid").validate({ // <-- initialize the plugin once
        // options
    });

}); 
```

**工作演示：http: [//jsfiddle.net/HNK6w/](http://jsfiddle.net/HNK6w/)**

如您所见，它在 Windows 7 上的 Internet Explorer 9 中运行...

![在此处输入图像描述](../Images/52b2e42902b2a563222d262867f174ae.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T15:40:27.200

IE 不能很好地使用额外的逗号。

请注意消息属性后的额外逗号。删除它即可获胜。

```
$("#studentid").validate({
        debug: false,
        rules: {
            id: {required: true}
        },
        messages: {
            id: {required: "Please enter the student's ID number."}
        },  <-------------------- 
```

# jquery - Jquery重新排序html元素

> ID：15006186
> 
> 赞同：-1
> 
> 时间：2013-02-21T15:37:23.687
> 
> 标签：jquery, html, sorting

我有 5 个 html 元素

```
<a href="#"><img src="image1.jpg" /></a>
<a href="#"><img src="image2.jpg" /></a>
<a href="#"><img src="image3.jpg" /></a>
<a href="#"><img src="image4.jpg" /></a>
<a href="#"><img src="image5.jpg" /></a> 
```

我想重新订购

```
<a href="#"><img src="image5.jpg" /></a>
<a href="#"><img src="image1.jpg" /></a>
<a href="#"><img src="image2.jpg" /></a>
<a href="#"><img src="image3.jpg" /></a>
<a href="#"><img src="image4.jpg" /></a> 
```

我如何使用 jquery 来实现这一点（如果可能，不要使用插件）。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T15:53:09.453

假设你有这个 HTML：

```
 <div id=parent>
   <a href="#"><img src="image5.jpg" /></a>
   <a href="#"><img src="image1.jpg" /></a>
   <a href="#"><img src="image2.jpg" /></a>
   <a href="#"><img src="image3.jpg" /></a>
   <a href="#"><img src="image4.jpg" /></a>
  </div> 
```

并且您想按图像的 src 排序，那么您可以这样做：

```
function compareStrings(a,b) {
  if (a>b) return 1;
  else if (a<b) return -1;
  return 0;
}
$('#parent').append($('a').detach().sort(function(a,b){
  return compareStrings($('img',a).attr('src'), $('img',b).attr('src'));
})); 
```

[示范](http://jsbin.com/ogudox/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T15:39:03.053

我建议：

```
$('img').last().parent().insertBefore($('img').first().parent()); 
```

尽管*没有*关于重新排序的具体标准的信息，但很难提供一个特别有用的解决方案。

以上假设您要根据图像元素重新排序元素（因为这是最明显索引/编号的元素），但是要`a`改用：

```
$('a').last().insertBefore($(this).prevAll(':last')); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-05T01:28:01.120

我发现这段代码运行良好（不是我的）：博客文章：http: [//james.padolsey.com/javascript/sorting-elements-with-jquery/](http://james.padolsey.com/javascript/sorting-elements-with-jquery/)
来源 ： http: [//github.com/padolsey/jQuery-Plugins /tree/master/sortElements/](http://github.com/padolsey/jQuery-Plugins/tree/master/sortElements/)

示例：（转述自博客）

```
<ul>
    <li>Banana</li>
    <li>Carrot</li>
    <li>Apple</li>
</ul> 
```

包含库，然后运行：

```
$('li').sortElements(function(a, b){
    return $(a).text() > $(b).text() ? 1 : -1;
}); 
```

结果：

```
<ul>
    <li>Apple</li>
    <li>Banana</li>
    <li>Carrot</li>
</ul> 
```

# php - 是否安装了“Mumble”

> ID：15006187
> 
> 赞同：0
> 
> 时间：2013-02-21T15:37:25.210
> 
> 标签：php, checkout

我有一个指向“mumble url”的链接，例如“mumble://mumble-4.verygames.n ...”。当用户喃喃自语时，程序会自行启动并请求登录名和密码以将他连接到服务器，这就是我想要的。问题是当用户没有安装 mumble 时，.. url 没有指向任何地方并且用户得到一个错误页面。如何检查是否安装了 mumble ？

我已经尝试了 file_exists 和一些 fopen php 脚本，但事实是我不知道如何检查它。

任何想法，任何答案？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T15:49:37.970

Mumble 充当用户系统上的**自定义协议处理程序。**PHP 不是确定它是否安装在系统上的方法。您需要记住 PHP 是一种服务器端技术。`file_exists()`将始终查看您服务器的硬盘驱动器。

Javascript 将是在客户端测试此类内容的方法。不幸的是，没有简单的跨浏览器方法可以做到这一点。以下两个 Stackoverflow 问题很好地解释了这一点：

*   [如何检查是否支持自定义协议](https://stackoverflow.com/questions/2872090/how-to-check-if-a-custom-protocol-supported)
*   [如何检测浏览器的协议处理程序？](https://stackoverflow.com/questions/836777/how-to-detect-browsers-protocol-handlers)

环顾四周，有人尝试创建跨浏览器检测脚本，也许值得一看：[http ://www.rajeshsegu.com/2012/09/browser-detect-custom-protocols/](http://www.rajeshsegu.com/2012/09/browser-detect-custom-protocols/)

# git - Git：确保从分支 A 拉到 B

> ID：15006188
> 
> 赞同：0
> 
> 时间：2013-02-21T15:37:26.400
> 
> 标签：git

我知道如何手动从分支 A 拉到另一个名称 B 的分支：

```
git pull <remote> A:B 
```

这会将远程分支 A 拉到 B。很容易做到！

但我想确保类似

```
git pull <remote> A 
```

不会合并到我的本地分支 A（它也存在于本地，因为在我的情况下它是主分支）。因此，我必须将我的分支 B 直接引用到远程分支 A。

这可能吗？

附录：

对于所有有同样问题的人。确保您的 .git/config 有这样的部分：

```
[branch "B"]
    remote = <yourremote>
    merge = refs/heads/A 
```

这意味着：签出分支 B 后的“git pull”将远程分支 A 合并到 B。您可以轻松地将此示例转移到您的问题中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:29:19.167

您可以使用`git branch --set-upstream B origin/A`更改上游分支。

然后你可以使用`git pull origin A`或者只是`git pull`将最新的代码合并到`B`.

你需要在分行做以上所有的事情`B`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T15:44:08.223

我不确定我是否完全理解您的问题，但听起来您想将远程分支 A 拉到本地 A 之外的另一个分支中？

如果是这样，那么当您可以将远程 A 拉入您当前所在的任何分支时，它将合并这些更改。因此，在本地分支 C 中拉分支 A 会将分支 A 与您的本地分支 C 合并。

不过，我确定我误解了这个问题——你能澄清一下吗？谢谢！

# google-maps - Sencha Touch 2：Google Maps Directions Route 不会显示

> ID：15006193
> 
> 赞同：1
> 
> 时间：2013-02-21T15:37:34.523
> 
> 标签：google-maps, sencha-touch-2

我正在使用视图在地图上显示一个位置，并在其下方有一个小表单来获取用户地址（如果他们想要方向）。地图最初按我的意愿呈现。有一个控制器可以处理点击按钮并使用路线更新显示。我可以看到它正在成功检索路线信息。它只是不更新​​显示来显示它。我错过了什么？

这是视图：

```
var tcmlatlng = new google.maps.LatLng(38.898748, -77.037684);
Ext.define('VisitTCMIndy.view.Directions',{
extend: 'Ext.Panel',
requires: [
    'Ext.form.Panel',
    'Ext.Map'
],
config: {
    layout: 'vbox',
    items: [
        {
            xtype: 'map',
            useCurrentLocation: false,
            flex: 3,
            mapOptions: {
                center: tcmlatlng,
                zoom: 15,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            },
            listeners: {
                maprender: function(map,gmap,options){
                    var homemarker = new google.maps.Marker({
                        position: tcmlatlng,
                        map: gmap
                    });
                }
            }

        },
        {
            xtype: 'formpanel',
            id: 'directionsform',
            flex: 1,
            items:[
                {
                    xtype: 'textfield',
                    name: 'address',
                    label: 'Address',
                },
                {
                    xtype: 'button',
                    ui:'action',
                    text: 'Get Directions'
                }
            ]
        }
    ]
}
}); 
```

这是控制器

```
Ext.define('VisitTCMIndy.controller.Directions',{
extend: 'Ext.app.Controller',
config: {
    control: {
        dButton: {
            tap: 'loaddirections'
        }
    },
    refs: {
        dButton: '#directionsform button[ui=action]',
        tcmmap:'map',
        addfield:'textfield[name=address]'
    }
},

loaddirections: function(dbutton){
    console.log('loaddirections');
    var gmap = this.getTcmmap();
    var directionsDisplay = new google.maps.DirectionsRenderer();
    var directionsService = new google.maps.DirectionsService();
    directionsDisplay.setMap(gmap.map);
    var tcmadd = "1600 Pennsylvania Ave, Washington, DC";
    var originadd = this.getAddfield().getValue();

    var request = {
        origin: originadd,
        destination: tcmadd,
        travelMode: google.maps.TravelMode.DRIVING
    };

    directionsService.route(request, function(result, status){
        console.log(status);
        if(status = google.maps.DirectionsStatus.OK){
            console.log(result);
            directionsDisplay.setDirections(result);
        }
    });
}
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T16:20:39.930

我错误地引用了地图。我试图直接引用它而不是使用 getter。所以无论你在哪里看到“gmap.map”，它都应该是“gmap.getMap()”。

# multidimensional-array - 从角到中心的二维数组遍历

> ID：15006203
> 
> 赞同：0
> 
> 时间：2013-02-21T15:37:46.850
> 
> 标签：multidimensional-array

在给定的 2D 正方形 (n*n) 偶数大小数组中，我想从起始角遍历到其中心。下面是更多信息的图像。

![在此处输入图像描述](../Images/e665dada860c32546b1235878b1092fe.png)

我的算法是从角落开始，维护两个全局变量，并`currentX`运行`currentY`一个`loop`直到到达中心。下面是我的伪代码-`currentX``currentY`

```
x=0
y=0
currentX=0
currentY=0
while(currentX != centerX and currentY != centerY){
currentX=travel_in_x_plus_direction(x,n);
currenty=travel_in_y_plus_direction(y,n);
currentX=travel_in_x_minux_direction(currentX,x);
currentY=travel_in_y_minux_direction(currentY,y-1);
n--;
x--;
y--;
}

The function travel_in_x_plus_direction(currentX) traverse the array starting from currentX till x and returns the final value of x. The same concept applies for rest of the functions also. 
```

这是正确的方法吗？有没有更好的方法以同样的方式遍历它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T04:43:26.830

**伪代码**“使用编程语言的结构约定，但旨在供人类阅读而不是机器阅读。” ( [http://en.wikipedia.org/wiki/Pseudocode](http://en.wikipedia.org/wiki/Pseudocode) ) 我建议编写符合此定义的伪代码将对您大有裨益，并帮助您思考如何解决问题。

**你的算法**

似乎表明你是

*   检查你是否在你的目标“END”，如果你不是
    *   向右移
    *   下移
    *   向左移动
    *   提升

这意味着您将永远无法到达任何地方。

**解决方案的起点**

我的容器大小为 n*n，因此最初边界为 n*n，如果我穿过一个单独的正方形，它将成为边界的一部分。

路径很简单，首先向右移动，然后在遇到障碍时改变方向。方向顺序是右、下、左、上的顺序，直到达到目标。

```
HorizontalMax = n (the right wall)
HorizontalMin = 0 (the left wall)
VerticalMax = n (the bottom wall)
VerticalMin = 0 (the top wall)

While not at goal
  While not at right boundary or goal
    Move right
  Increment VerticalMin (you just moved along the top wall)
  While not at bottom boundary or goal
    Move down
  Decrement HorizontalMax (you just moved along the right wall)
  While not at left boundary or goal
    Move left
  Decrement VerticalMax (you just moved along the bottom wall)
  While not at top boundary or goal
    Move up
  Increment HorizontalMin (you just moved along the left wall)
End 
```

# javascript - 获取具有相同类的多个输入字段的值并添加到 javascript 对象中

> ID：15006208
> 
> 赞同：4
> 
> 时间：2013-02-21T15:37:55.443
> 
> 标签：javascript, jquery, html

我面临以下问题：

```
<input title="1" type="text" class="email">
<input title="2" type="text" class="email">
<input title="3" type="text" class="email"> 
```

以上是我的 html，我试图在其中抓取每个输入框的电子邮件并将其存储在一个以标题为键的对象中。

这是我的 JavaScript 目前的样子

```
var emailObj = {};
$("input[class=email]").each(function() {

    var id = $(this).attr("title");
    var email = $(this).val()

    emailObj[id] = email;
}); 
```

目前，console.log 仅显示添加到对象的最后一个值，如下所示。

```
Object { 3="a@a.com"} 
```

我的预期结果**应该**如下所示

```
Object { 1="a@a.com", 2="b@b.com", 3="c@c.com"} 
```

有人可以为我解释一下这个问题吗？

感谢您的阅读，问候。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-21T16:21:44.393

[您的代码没有](http://jsfiddle.net/4BWMP/3/)问题。我建议你把它写成实用方法

```
function getValues(selector){
  var tempValues = {};
  $(selector).each(function(){
     var th= $(this);
     tempValues[th.attr('title')] = th.val();
   });
  return tempValues;
}

var values = getValues('.email'); 
```

或者如果您希望将值放入数组中

```
$('.email').map( function(){return $(this).val(); }).get(); 
```

`.get()`会将其转换为常规数组。

您编写的代码绝对正确。但是当我加载它时它返回 null，因为在执行时，文本框中没有值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T15:45:00.930

你`taskArray`实际上是一个[对象](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object)，而不是一个数组。

用这个替换`var taskArray = {}`应该可以解决问题：

```
var taskArray = new Array(); 
```

**编辑：**再想一想，你已经拥有的是完全有效的！

我正在编辑我的答案以回应我在评论中所说的话：您需要使用控制台进行调试：

在`.each()`, put: `console.log(id);`- 预期结果将是“1”、“2”、“3” - 如果只是“3”，则可能意味着您的其他输入无论出于何种原因都没有被拾取。如果这是结果，请在分配值后打印出对象：`console.log(emailObj[id]);`。

# r - 如何在 R 中生成从数字到颜色的映射？

> ID：15006211
> 
> 赞同：9
> 
> 时间：2013-02-21T15:38:09.217
> 
> 标签：r, colors

在 R 中，我可以轻松生成颜色渐变，例如 colorRampPalette。以下产生从蓝色到红色的五种颜色序列：

```
> mypal <- colorRampPalette( c( "blue", "red" ) )( 5 )
> mypal
[1] "#0000FF" "#3F00BF" "#7F007F" "#BF003F" "#FF0000" 
```

如何在此调色板上轻松映射数字向量？比如说，我有一个 0 到 10 之间的数字向量，如下所示：

```
x <- c( 1, 9, 8.5, 3, 3.4, 6.2 ) 
```

我想要一个函数，比如说`map2color`，当我运行时`map2color( mypal, x )`，我得到

```
#0000FF, #FF0000, #FF0000, #3F00BF, #3F00BF, #BF003F 
```

我通常会执行以下操作

```
mypalette[ findInterval( x, seq( 0, 10, length.out= 6 ), rightmost.closed= T ) ] 
```

但也许有更好的解决方案OOB，自动为数字向量生成色标。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-09-11T19:12:45.320

这是一个 map2color 函数：

```
map2color<-function(x,pal,limits=NULL){
    if(is.null(limits)) limits=range(x)
    pal[findInterval(x,seq(limits[1],limits[2],length.out=length(pal)+1), all.inside=TRUE)]
}

 map2color(0:11,rainbow(200),limits=c(1,10))
[1] "#FF0000FF" "#FF0000FF" "#FFA800FF" "#ADFF00FF" "#05FF00FF" "#00FFA3FF"
[7] "#00ABFFFF" "#0003FFFF" "#A600FFFF" "#FF00B0FF" "#FF0008FF" "#FF0008FF"
 map2color(0:11,rainbow(200))
[1] "#FF0000FF" "#FF8A00FF" "#EBFF00FF" "#61FF00FF" "#00FF29FF" "#00FFB3FF"
[7] "#00BAFFFF" "#0030FFFF" "#5900FFFF" "#E300FFFF" "#FF0091FF" "#FF0008FF"

mypal <- colorRampPalette( c( "blue", "red" ) )( 5 )
x <- c( 1, 9, 8.5, 3, 3.4, 6.2 )
map2color(x,mypal)
"#0000FF" "#FF0000" "#FF0000" "#3F00BF" "#3F00BF" "#BF003F" 
```

我需要这样的东西来创建一个在不同数据样本中保持一致的颜色渐变，所以我添加了一个 xlim 参数。感谢您在问题中提醒 findInterval 函数。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-21T16:01:35.077

我在 R-Forge 上的配色方案包是这样做的：

[https://r-forge.r-project.org/projects/colourscheme/](https://r-forge.r-project.org/projects/colourscheme/)

它的主要目的是创建将数值（不仅仅是整数颜色数字）映射到颜色的函数。小插图是安装后最好的文档。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-03-15T18:04:24.037

我能想到的最简单的事情是将变量 x 离散化`cut`，然后使用结果因子来索引调色板，例如`heat.colors`或`cm.colors`

```
f <- function(x,n=10){
    heat.colors(n)[cut(x,n)]
} 
```

有关调色板的更多详细信息，请参阅`?heat.colors`。

这个函数会给你对应的颜色向量与`x`不同的粒度成正比`n`。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-21T15:49:37.343

你可以试试

```
> colorRampPalette(c('blue', 'red'))(length(x))[rank(x)]
[1] "#0000FF" "#FF0000" "#CC0032" "#3300CC" "#660099" "#990065" 
```

# java - Java 中的关键字高亮问题（使用 System.out）

> ID：15006213
> 
> 赞同：0
> 
> 时间：2013-02-21T15:38:13.243
> 
> 标签：java, console, system.out

我一直在修改一个简单的 Java Swing 控制台，我决定为关键字添加一种突出显示的形式（通过为标记行旁边的区域着色）。当我通过搜索关键字“Exception”引发错误时，它可以正常工作，但是当我使用其中的关键字执行 System.out.println 时，它会突出显示所有内容。我认为该字符串以某种方式与所有已输入的字符串组合，这是导致此错误的原因，但我无法修复它。

这是一个屏幕截图：

![在此处输入图像描述](../Images/e47b78d138949efeb9963b4534d797c5.png)

不应突出显示文本“Hello World 2”和“Lets throw an error on this console”。

```
// Edited by Jeff B
// A simple Java Console for your application (Swing version)
// Requires Java 1.1.5 or higher
//
// Disclaimer the use of this source is at your own risk. 
//
// Permision to use and distribute into your own applications
//
// RJHM van den Bergh , rvdb@comweb.nl

import java.io.*;
import java.util.ArrayList;
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

class textAreaC extends JTextArea {
    int rowCount;
    int rowHeight;
    ArrayList<Point> exPoint = new ArrayList<Point>();

    public textAreaC() {
        rowHeight = this.getRowHeight();
    }

    public void paint(Graphics g) {
        super.paint(g);
        g.setColor(Color.red);
        for (int i = 0; i < exPoint.size(); i++) {
            g.fillRect(3, exPoint.get(i).x * rowHeight, 10, exPoint.get(i).y
                    * rowHeight);
        }
    }

    public void append(String str) {
        int rows = str.split("\r\n|\r|\n").length;
        if (str.contains("Exception")) {
            //System.out.println("This was the string: " + str + "It has " + rows + "rows" + " End String");
            exPoint.add(new Point(rowCount, rows));
        }
        rowCount += rows;
        super.append(str);

    }
}

public class Console extends WindowAdapter implements WindowListener,
        ActionListener, Runnable {
    private JFrame frame;
    private textAreaC textArea;
    private Thread reader;
    private Thread reader2;
    private boolean quit;

    private final PipedInputStream pin = new PipedInputStream();
    private final PipedInputStream pin2 = new PipedInputStream();

    Thread errorThrower; // just for testing (Throws an Exception at this Console

    public Console() {
        // create all components and add them
        frame = new JFrame("Java Console");
        Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
        Dimension frameSize = new Dimension((int) (screenSize.width / 2),
                (int) (screenSize.height / 2));
        int x = (int) (frameSize.width / 2);
        int y = (int) (frameSize.height / 2);
        frame.setBounds(x, y, frameSize.width, frameSize.height);

        textArea = new textAreaC();
        textArea.setEditable(false);
        textArea.setMargin(new Insets(3, 20, 3, 3));
        JButton button = new JButton("clear");
        frame.getContentPane().setLayout(new BorderLayout());
        frame.getContentPane().add(new JScrollPane(textArea),
                BorderLayout.CENTER);
        frame.getContentPane().add(button, BorderLayout.SOUTH);
        frame.setVisible(true);
        frame.addWindowListener(this);
        button.addActionListener(this);

        try {
            PipedOutputStream pout = new PipedOutputStream(this.pin);
            System.setOut(new PrintStream(pout, true));
        } catch (java.io.IOException io) {
            textArea.append("Couldn't redirect STDOUT to this console\n"
                    + io.getMessage());
        } catch (SecurityException se) {
            textArea.append("Couldn't redirect STDOUT to this console\n"
                    + se.getMessage());
        }

        try {
            PipedOutputStream pout2 = new PipedOutputStream(this.pin2);
            System.setErr(new PrintStream(pout2, true));
        } catch (java.io.IOException io) {
            textArea.append("Couldn't redirect STDERR to this console\n"
                    + io.getMessage());
        } catch (SecurityException se) {
            textArea.append("Couldn't redirect STDERR to this console\n"
                    + se.getMessage());
        }

        quit = false; // signals the Threads that they should exit

        // Starting two seperate threads to read from the PipedInputStreams             
        //
        reader = new Thread(this);
        reader.setDaemon(true);
        reader.start();
        //
        reader2 = new Thread(this);
        reader2.setDaemon(true);
        reader2.start();

        // testing part
        // you may omit this part for your application
        // 
        //System.out.println("Test me please Exception\n testing 123");
        System.out.flush();
        System.out.println("Hello World 2");

        System.out.println("\nLets throw an error on this console");
        errorThrower = new Thread(this);
        errorThrower.setDaemon(true);
        errorThrower.start();
    }

    public synchronized void windowClosed(WindowEvent evt) {
        quit = true;
        this.notifyAll(); // stop all threads
        try {
            reader.join(1000);
            pin.close();
        } catch (Exception e) {
        }
        try {
            reader2.join(1000);
            pin2.close();
        } catch (Exception e) {
        }
        System.exit(0);
    }

    public synchronized void windowClosing(WindowEvent evt) {
        frame.setVisible(false); // default behaviour of JFrame 
        frame.dispose();
    }

    public synchronized void actionPerformed(ActionEvent evt) {
        textArea.setText("");
    }

    public synchronized void run() {
        try {
            while (Thread.currentThread() == reader) {
                try {
                    this.wait(100);
                } catch (InterruptedException ie) {
                }
                if (pin.available() != 0) {
                    String input = this.readLine(pin);
                    textArea.append(input);
                    //System.out.println(input.split("\r\n|\r|\n").length);
                }
                if (quit)
                    return;
            }

            while (Thread.currentThread() == reader2) {
                try {
                    this.wait(100);
                } catch (InterruptedException ie) {
                }
                if (pin2.available() != 0) {
                    String input = this.readLine(pin2);
                    textArea.append(input);
                }
                if (quit)
                    return;
            }
        } catch (Exception e) {
            textArea.append("\nConsole reports an Internal error.");
            textArea.append("The error is: " + e);
        }

        // just for testing (Throw a Nullpointer after 1 second)
        if (Thread.currentThread() == errorThrower) {
            try {
                this.wait(1000);
            } catch (InterruptedException ie) {
            }
            throw new NullPointerException(
                    "Application test: throwing an NullPointerException It should arrive at the console");
        }
    }

    public synchronized String readLine(PipedInputStream in) throws IOException {
        String input = "";
        do {
            int available = in.available();
            if (available == 0)
                break;
            byte b[] = new byte[available];
            in.read(b);
            input = input + new String(b, 0, b.length);
        } while (!input.endsWith("\n") && !input.endsWith("\r\n") && !quit);
        return input;
    }

    public static void main(String[] arg) {
        new Console(); // create console with not reference 
    }
} 
```

我一直在做一些测试，看看这个打印输出： ![在此处输入图像描述](../Images/7a25ac40cc13dbff7a8dec282ea5202f.png)

要复制这一点，请在 reader(1) 中添加 System.out.prinln 语句并将输入附加到字符串的末尾。这就是我的prinlns的样子：

```
System.out.println("There should be a string before me.");
System.out.flush();
System.out.println("Test me please Exception");
System.out.flush();
System.out.println("Test print 2");
System.out.flush();
System.out.println("Test print 3");
System.out.flush();
System.out.println("Test me please Exception 2");
System.out.flush();
System.out.println("Exception here lololol");
System.out.flush();
System.out.println("Hello World 2");
System.out.flush(); 
```

我的读者看起来像这样：

```
if (pin.available()!=0)
    {

        String input=this.readLine(pin);
        System.out.println("this was printed by the thread second " + input);
        textArea.append(input);
        //System.out.println(input.split("\r\n|\r|\n").length);
    }
if (quit) return; 
```

它将所有这些prinlns视为一个输入，这是java正在做的事情，还是我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:07:27.573

使用 HTML 进行输出，这更容易。就像第一个文本`<html>`一样（非常松散的 HTML）。或者设置内容类型。追加行，`<br>`依此类推。

它更灵活。

* * *

你做了两个多行字符串的附加。取行数将使字符串中的所有行变为红色。也许这个次优版本更像你想要的。

```
@Override
public void append(String str) {
    String[] lines = str.split("\r\n|\r|\n");
    int rows = lines.length;
    for (String line : lines) {
        super.append(line + "\n");
        if (line.contains("Exception")) {
            exPoint.add(new Point(rowCount, 1)); // 1 line
        }
        ++rowCount;
    }
} 
```

# php - 计日 PHP 中的错误 (?)

> ID：15006223
> 
> 赞同：-1
> 
> 时间：2013-02-21T15:38:39.357
> 
> 标签：php, date, datetime, date-math

```
<?php
$date1 = "2002-1-1";
$date2 = "2021-12-31";
$deff = abs(strtotime($date2) - strtotime($date1));
$daycount = $deff / (60 * 60 * 24);
echo $daycount;
?> 
```

当我试图计算 20 年的天数时，为什么答案是 7304 而不是 7300？

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T15:41:00.120

为此使用日期时间：

```
$datetime1 = new DateTime("2002-1-1");
$datetime2 = new DateTime("2021-12-31");
$interval  = $datetime1->diff($datetime2);
$elapsed   = $interval->format('%a days');
echo $elapsed; 
```

[看到它在行动](http://codepad.viper-7.com/ifrhkZ)

**参考**

*   [约会时间](http://www.php.net/manual/en/class.datetime.php)
*   [日期间隔](http://www.php.net/manual/en/class.dateinterval.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T15:42:39.700

亲，答案是：

> 从并包括： 2002 年 1 月 1 日，星期二
> 
> 至，但不包括：2021 年 12 月 31 日，星期五
> 
> 从开始日期到结束日期是 7304 天，但不包括结束日期。

你忘了加上**闰年**。那是**额外的四天**！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T15:41:42.617

你的代码是正确的。这就是两天之间的天数。不要忘记闰年。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T15:41:03.067

你忘记了闰年。

# iphone - 自定义 UICollectionView 布局

> ID：15006226
> 
> 赞同：0
> 
> 时间：2013-02-21T15:38:47.783
> 
> 标签：iphone, ios, uikit, uicollectionview, uicollectionviewlayout

我需要实现的 UICollectionView 布局包含三个部分，一个在另一个垂直下方，每个部分都可以水平滚动。

第 1 部分：1 2 3 4 5 ....................

第 2 部分：1 2 3 4 5 ....................

第 3 部分：1 2 3 4 5 ....................

由于 UICollectionView 只有一个滚动视图，因此所有部分一次滚动，但一次不滚动。所以我觉得自定义布局在这种情况下无济于事。请对其他可能的实现有所了解。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T15:43:08.977

一个`UITableView`有 3 行。每个带有`UICollectionView`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T15:43:12.353

`UITableView`带有三个自定义的a 怎么样，`UITableViewCell`每个自定义都包含一个`UICollectionView`？

# django - Django 1.5 和新用户模型：第三方应用程序呢？

> ID：15006228
> 
> 赞同：1
> 
> 时间：2013-02-21T15:38:51.570
> 
> 标签：django, django-models

我正在开发站点上进行一些测试，目前使用**Django 1.4**。大多数 Django 用户都知道 Django 1.5 为用户模型带来了更多的灵活性。

我正在做的项目在`auth.User`模型上使用猴子补丁，效果很好。这增加了我每次使用的有用方法。

为了兼容性，我没有在 User 模型上添加任何数据库字段，我的代码只涉及这个：

```
User.__bases__ += (UserPlus,)
User.__unicode__ = UserPlus.__unicode__
UserPlusManager().contribute_to_class(User, 'objects') 
```

`UserPlusManager`作为 的子类`UserManager`。

现在，想象一下我想切换到新的用户模型。我已经有很多应用程序`INSTALLED_APPS`，其中一些在未维护的存储库中，并且模型的字段与 auth.User 相关联。对于这种配置，我没有看到任何明显的策略。

那么，考虑到这一点，升级到**Django 1.5**真的可取吗？如果是这样，我应该采取什么步骤？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T16:21:47.043

如果 Django 中的结构发生变化，任何利用该结构的第三方应用程序都必须做出相应的反应。如果您的项目依赖于不兼容 1.5 的第三方应用程序，您应该等到它们兼容后再升级您的项目。

# java - 在java中删除包含关键字的句子

> ID：15006236
> 
> 赞同：0
> 
> 时间：2013-02-21T15:39:08.107
> 
> 标签：java

我一直在网上和这里搜索如何删除包含一两个单词的行，但我在 java 上找不到任何东西。这是我现在拥有的代码：

```
try {
  BufferedReader reader = new BufferedReader(new FileReader("Readfile.txt"));
  String line = reader.readLine();
  while(line !=null)
  {
    for(int i = 0 ; i<newarray.length;i++){
      if(line.contains(newarray[i])){
        System.out.println(line);
      }
    }
    line=reader.readLine();
  }
} catch (Exception ex) {
  System.out.println(ex.getMessage());
} 
```

它从文本文件中读取句子，但在打印出来之前，我想删除一些包含关键字的句子，例如 fun。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T15:47:42.867

像这样的东西：

```
//BufferedReader stuff etc.
List<String> words = new ArrayList<String>();
words.add("fun");
words.add("something");

String line;
while( (line = br.readLine()) != null)
{
   boolean found = false;
   for(String word: words)
   {
       if(line.contains(word))
       {
           found = true;
           break;
       }
   }

   if(found) continue;
   System.out.println(line);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T15:58:23.160

```
if(line.contains(newarray[i])){
    line = line.replace("fun" ,"");
    System.out.println(line);
  } 
```

试试这个，它会在打印之前删除单词。

# java - 如何在 Web 应用程序中使用复制表单窗口，就像在 google gmail 中的图像副本一样

> ID：15006240
> 
> 赞同：2
> 
> 时间：2013-02-21T15:39:15.050
> 
> 标签：java, javascript, image, flash, web-applications

在 gmail 中，您可以使用粘贴选项直接从 Windows 剪贴板粘贴图像。我的明显问题是：如何做到这一点。

我找到了使用 Flash 代码复制文本的技术，但这不是我想要的。这个想法是我在窗口中复制图像或文本，然后将其粘贴到勾选系统中的简单文本编辑器中。

它必须全自动工作，以便查看数据是否是文本并关闭在标签内，如果是图像，它必须在`<img>`标签内。像这样`<img src="rawimagedata" title="filename.jpg" />`

有人提示或更好的脚本示例。不管你是使用 flash 还是 java，它都对我有用。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T15:55:50.070

你必须用Java对其进行编码

```
 byte[] byteArray = new byte[102400];
 base64String = Base64.encode(byteArray); 
```

byteArray 是图片，使用 Base64.encode 函数，您可以获得必须在下面输入的字符串

更多信息见：[https ://stackoverflow.com/a/10226133/1667829](https://stackoverflow.com/a/10226133/1667829)

然后你可以像这样展示它：

```
<div>
    <p>Taken from wikpedia</p>
    <img src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAUA
AAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO
    9TXL0Y4OHwAAAABJRU5ErkJggg==" alt="Red dot" />
</div> 
```

[http://jsfiddle.net/hpP45/](http://jsfiddle.net/hpP45/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T09:34:12.147

我找到了一种获取仅适用于 Google chrome 的图像的方法。我正忙于开发一个也适用于 Firefox 的版本。

以灵感形式：[http ://strd6.com/2011/09/html5-javascript-pasting-image-data-in-chrome/](http://strd6.com/2011/09/html5-javascript-pasting-image-data-in-chrome/)

```
<!DOCTYPE html>
<html>
    <head>
        <title>test</title>
        <script src="jquery.js" type="text/javascript"></script>
        <script>
// Created by STRd6
// MIT License
// jquery.paste_image_reader.js
(function() {
  (function($) {
    var defaults;
    $.event.fix = (function(originalFix) {
      return function(event) {
        event = originalFix.apply(this, arguments);
        if (event.type.indexOf('copy') === 0 || event.type.indexOf('paste') === 0) {
          event.clipboardData = event.originalEvent.clipboardData;
        }
        return event;
      };
    })($.event.fix);
    defaults = {
      callback: $.noop,
      matchType: /image.*/
    };
    return $.fn.pasteImageReader = function(options) {
      if (typeof options === "function") {
        options = {
          callback: options
        };
      }
      options = $.extend({}, defaults, options);
      return this.each(function() {
        var $this, element;
        element = this;
        $this = $(this);
        return $this.bind('paste', function(event) {
          var clipboardData, found;
          found = false;
          clipboardData = event.clipboardData;
          return Array.prototype.forEach.call(clipboardData.types, function(type, i) {
            var file, reader;
            if (found) {
              return;
            }
            if (type.match(options.matchType) || clipboardData.items[i].type.match(options.matchType)) {
              file = clipboardData.items[i].getAsFile();
              reader = new FileReader();
              reader.onload = function(evt) {
                return options.callback.call(element, {
                  dataURL: evt.target.result,
                  event: evt,
                  file: file,
                  name: file.name
                });
              };
              reader.readAsDataURL(file);
              return found = true;
            }
          });
        });
      });
    };
  })(jQuery);
}).call(this);

jQuery("html").pasteImageReader(function(results) {
  var dataURL, filename;
  filename = results.filename, dataURL = results.dataURL;

  jQuery('#deze').html('<img src="' + dataURL + '" />');
});
</script>
        <style>
            #deze{
                height:400px;
                width:400px;
                border:2px solid red;
            }
        </style>
    </head>
    <body>
        <div id="deze">testdiv</div>

    </body>
</html> 
```

笔记：

在这个例子中，创建者覆盖了 $ sing，你不能再像这样使用 jquery： $('#deze')

# java - 小程序中的多个代码库

> ID：15006241
> 
> 赞同：4
> 
> 时间：2013-02-21T15:39:18.697
> 
> 标签：java, applet, codebase

好的，所以当谈到 Java 小程序时，我完全是新手，所以请原谅我缺乏知识。是否可以在同一个小程序中运行多个代码库位置？基本上，我有一个小程序启动并运行，它的源是来自外部域的类文件，我要为其付费订阅，但我还想通过创建自己的类文件来添加自己的功能。

问题是一组类文件将位于我无法编辑访问的域中，而我创建的类文档将存储在我自己的域中。

这是可以做到的吗？还是小程序只能从一个代码库位置访问 java 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T13:18:22.303

是的 - 您可以在您的 applet-tag 中指定多个 JAR 文件：

```
<applet codebase ="." code="myMainClass.class" archive="archive1.jar,archive2.jar,archive3.jar" height="640" width="480"/> 
```

请在此处找到详细信息

[http://docs.oracle.com/javase/1.4.2/docs/guide/misc/applet.html](http://docs.oracle.com/javase/1.4.2/docs/guide/misc/applet.html)

**ARCHIVE = archiveList archiveList** **中的档案用“,”隔开。**

希望这可以帮助！:-)

问候

克里斯托弗

# c# - VS2010 中的文本相关装饰：它们有时显示在不正确的位置

> ID：15006251
> 
> 赞同：0
> 
> 时间：2013-02-21T15:39:40.227
> 
> 标签：c#, visual-studio, plugins, positioning, adornment

你是我唯一的希望。我到处搜索，找不到任何可以帮助我解决这个问题的东西。

我为 Visual Studio (2010) 做了一个简单的代码标记插件。它只是找到要突出显示的代码的某些部分（通过正则表达式），从找到的匹配项中创建 Spans，然后为它们创建 Rectangle 装饰（在文本的背景中），随文本滚动。所有这些都是在 view.LayoutChanged 事件的实现中完成的。它工作正常......但......不是每次！**有时标记会移动不同的距离（主要是向上或向下）**，然后在滚动文本时保持这些不正确的位置。我不知道为什么以及何时发生这种情况。我只能发现以下几点：

*   您可以通过非常快速且积极地上下拖动代码编辑器窗口的垂直滚动条来重现此错误（将一些标记从其正确位置移动）（但有时它也会修复位置......）
*   您无法通过编辑放置标记的行（甚至标记的文本）来修复标记的位置
*   您可以通过删除和恢复放置标记代码的代码块的结尾“}”来修复标记的位置（这会导致整个代码块被重新格式化）
*   当位置计算不正确（视图是 WpfTextView 类）并且几何“g”（见下文）也得到负 Bounds.Top 时，view.ViewportTop 为负数**。**（您可以通过将一个 VS 附加到另一个并设置断点来测试它）

这是我的一段代码，它计算位置并创建标记（LayoutChanged 事件）：

```
Geometry g = textViewLines.GetMarkerGeometry(span);
if (g != null)
{
    GeometryDrawing drawing = new GeometryDrawing(_brush, _pen, g);
    drawing.Freeze();

    DrawingImage drawingImage = new DrawingImage(drawing);
    drawingImage.Freeze();

    Image image = new Image();
    image.Source = drawingImage;

    //Align the image with the top of the bounds of the text geometry
    Canvas.SetLeft(image, g.Bounds.Left);
    Canvas.SetTop(image, g.Bounds.Top);

    //_layer.AddAdornment(AdornmentPositioningBehavior.TextRelative, span, null, image, null);

    Rect rect = new Rect(g.Bounds.Location, g.Bounds.Size);
    Rectangle marker = new Rectangle();
    marker.Margin = new Thickness(rect.X - 3, rect.Y - 2, 0, 0);
    marker.Width = rect.Width + 6; marker.Height = rect.Height + 4;
    marker.Fill = new SolidColorBrush(mark);
    marker.RadiusX = marker.RadiusY = 5;
    marker.Stroke = new SolidColorBrush(color);
    _layer.AddAdornment(AdornmentPositioningBehavior.TextRelative, span, null, marker, null);
} 
```

这基本上是用于创建装饰的 MSDN 示例，我在这里没有做任何魔术。

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-27T17:30:20.017

我有同样的问题。如果你使用

`_layer.AddAdornment(AdornmentPositioningBehavior.TextRelative,...);`

不止一次你必须插入

```
Canvas.SetLeft(image, g.Bounds.Left);
Canvas.SetTop(image, g.Bounds.Top); 
```

以前每次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-19T18:27:35.813

我刚刚花了一整天的时间在类似的问题上。

除了跨度移动问题之外，还有很多未记录的极端案例。更糟糕的是，似乎经过验证的解决方案往往会中断 VS 版本（尤其是从 roslyn 和 VS2015 开始）。我最喜欢的是以下内容：如果您在多行注释中多次按 Enter，则偶尔会删除装饰。好笑！

所以，唯一可行的方法是：不要试图超越 VS 编辑器，它会欺骗你。

相反，从 roslyn's 借用代码[`AdornmentManager<T>`](http://source.roslyn.codeplex.com/#Microsoft.CodeAnalysis.EditorFeatures/Implementation/LineSeparators/AdornmentManager.cs,306)。它包含了很多我不得不重新发明的技巧，甚至更多我从未怀疑过的技巧，但它确实有效。您需要做的就是替换下面的代码

```
// add the visual to the adornment layer. 
```

与您的（该部分是重构为可覆盖方法的良好候选者）。

PS我知道我有点晚了:)希望这可以为另一个可怜的灵魂节省一些时间。

# excel - excel：获取当前图表的索引

> ID：15006252
> 
> 赞同：2
> 
> 时间：2013-02-21T15:39:40.527
> 
> 标签：excel, vba, charts

我创建了一个新图表

```
Sheets("DatenFilledChart").Select
ActiveSheet.Shapes.AddChart.Select
ActiveChart.ChartType = xlArea
ActiveChart.SetSourceData Source:=Range("DatenFilledChart!$B$4:$B$1004")
ActiveChart.SeriesCollection(1).XValues = "=DatenFilledChart!$A$4:$A$1004"
ActiveChart.SeriesCollection(1).Name = "=DatenFilledChart!$B$1" 
```

为了使用当前图表，我想保存它的索引

```
indexOfChart = ActiveChart.Index 
```

然而，这失败了

> 方法 Index 对对象 _Chart 无效

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T16:01:27.097

尝试使用这个：

```
indexOfChart = Shapes.Count 
```

代替

```
indexOfChart = ActiveChart.Index 
```

`Index`属性不适用于 Charts 集合：

> **索引属性**
> 
> **Tab**对象在**Tabs**集合中的位置或**Page**对象在**Pages**集合中的位置。

阅读更多：http: [//msdn.microsoft.com/en-us/library/office/ff194426.aspx](http://msdn.microsoft.com/en-us/library/office/ff194426.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-06T17:48:22.040

索引是 ChartObject 类的一个属性。

Chart 是 ChartObject 类的成员。

因此，当您使用 Chart 对象时，您必须像这样在层次结构中提升一个级别：

```
indexOfChart = ActiveChart.Parent.Index 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T18:29:02.060

由于`AddChart`返回对添加对象的引用，最简单的方法就是使用该引用......

```
Sub tester()
    Dim co As Shape

    Set co = Sheet1.Shapes.AddChart()
    With co.Chart
        .ChartType = xlArea
        .SetSourceData Source:=Range("Sheet1!$A$1:$B$5")
        .SeriesCollection(1).Name = "Testing"
        'etc etc
    End With
End Sub 
```

# php - SmartyBC 中的 PHP Foreach。智能模板

> ID：15006254
> 
> 赞同：0
> 
> 时间：2013-02-21T15:39:43.527
> 
> 标签：php, foreach, smarty

我对 Smarty 比较陌生，似乎无法弄清楚这一点。

在我的 php 控制器中，我实例化一个类“产品”，我需要显示它的次数。例如，如果我的页面上有 5 个不同的项目，我将实例化“产品”5 次。然后我创建一个包含这些的数组。它是这样的：（我的对象充满了产品的信息）。

代码：

`$product_array = array ( 0 => Object1, 1 => Object2); etc.`

然后我将该数组分配给 smarty 变量 {$product_array}。在我的 .tpl 中，我会循环显示产品。那时我需要将 $products_array[0] 或 {$products_array.0} 分配给另一个变量 $products ，该变量将显示我需要的有关产品的所有信息。然后它将再次循环并显示 {$products_array.1} 等等。

然而，这似乎是不可能的，因为我尝试以任何方式实现这一目标（我什至尝试对我使用 {php} 羞耻）我似乎无法弄清楚。我收到此错误：无法将类 Product 的对象转换为字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T15:46:53.093

`{php}`我很确定你不能在标签中混入聪明的东西。但问题是为什么要这样做？为什么不创建所有产品并将它们放入一个数组中，然后将其分配给 smarty 并以 smarty 语法对其进行循环呢？

```
{php}
    $accesories = $GLOBALS['accessories'];
    $products = array();
    foreach($accesories as $k => $v)
    {
        var_dump($instantProduct = new Product($accesories[$k], TRUE));
        $products[$k] = new Product($accesories[$k], TRUE);
    }

    $smarty->assign('products', $products);
{/php}

// now loop and conditions in smarty 
```

这就是说你现在真的应该解决这个问题并将这个逻辑移动到你用作“控制器”的任何东西中。它可能会揭示您的设计中更普遍的问题，您将不得不以一种或另一种方式解决这些问题。

# javascript - _events 是什么，它的用途是什么？

> ID：15006256
> 
> 赞同：1
> 
> 时间：2013-02-21T15:39:47.813
> 
> 标签：javascript, backbone.js

搜索[主干](http://backbonejs.org/docs/backbone.html#section-17)我看到它被使用了 12 次并且总是附加到`this`Backbone.Events 的内部。

它只是 Backbone.Events 的一个属性吗？如果是这样，为什么它有下划线前缀？

这有什么用途？

```
on: function(name, callback, context) {
      if (!(eventsApi(this, 'on', name, [callback, context]) && callback)) return this;
      this._events || (this._events = {});
      var list = this._events[name] || (this._events[name] = []);
      list.push({callback: callback, context: context, ctx: context || this});
      return this;
    }, 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T15:42:58.543

下划线表示应将其视为私有财产。 `_events`是 Backbone.Events 使用的事件回调映射。

添加到 javascript 对象的任何属性或方法都是公共的。下划线是一种广泛使用的约定，表明属性/方法不能在对象之外使用。

这是一个解释它的经典链接：http: [//javascript.crockford.com/private.html](http://javascript.crockford.com/private.html)

# hibernate - 如何实现 Subqueries.rowCount(DetachedCriteria dc)

> ID：15006257
> 
> 赞同：1
> 
> 时间：2013-02-21T15:39:52.243
> 
> 标签：hibernate, subquery, detachedcriteria

当 DetachedCrieria 有投影时，如何获取 DetachedCriteria 结果集的行数？对于 HQL：

select count(*) from (select name, sum(grade) from score group by name)。

对于hibernate，如何实现Subqueries.rowCount(DetachedCriteria dc)？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:19:49.420

如果你想要的只是计数，为什么不直接执行

```
select count(name) from score group by name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T00:43:38.417

我有同样的问题......我想出了以下解决方案并且它有效：

```
myCriteria.setProjection(Projections.sqlProjection("count(*) as count from ( select distinct id , {alias}.enteredDate  ", new String[] { "count" }, new Type[] { StandardBasicTypes.LONG }));

// this is needed to close the parentheses opened in the Projection
myCriteria.add(Restrictions.sqlRestriction(" 1=1)")); 
```

# ruby-on-rails - 在 Ruby 哈希中提取 `Moped::BSON::Document` 属性

> ID：15006259
> 
> 赞同：4
> 
> 时间：2013-02-21T15:39:58.420
> 
> 标签：ruby-on-rails, ruby, mongoid

在 Mongoid 3.0.21 中，如何将所有模型的属性作为纯 Ruby 获取`Hash`？

调用`#attributes`或`#raw_attributes`返回`Moped::BSON::Document`。虽然它实际上延伸`Hash`，~~几种哈希方法无法按预期工作。特别是`#except`返回 unmodified `self`，而不是去掉给定键的散列~~.

**更新**：`Moped::BSON::Document`正确继承`Hash`. 我试图用符号而不是字符串来命名属性，这就是为什么`#except`不起作用。很快：做`except('pictures')`，不做`except(:pictures)`。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-21T15:52:33.477

```
Hash[e.attributes] 
```

其中 e 是您的模型实例

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-28T21:07:50.620

我很抱歉碰到这么老的东西，但我想把这个留给我自己和所有未来遇到同样问题的人。我正在使用 Mongoid ORM for Rails，它在内部使用 Moped 与 MongoDB 交互。

这个 gem 现在为我节省了数小时手动将内容转换为`Hash`or的`HashWithIndifferentAccess`时间：[https](https://github.com/mindscratch/mongoid-indifferent-access) ://github.com/mindscratch/mongoid-indifferent-access 。

本质上，它似乎有某种预返回钩子，可以自动将来自 MongoDB 的所有文档转换为 type `HashWithIndifferentAccess`。

不是在这方面寻找积分。只是想把它留在这里，因为它是这个问题的最高谷歌结果，它让我免于发疯。

# iis - URL 重写 IIS - 从一个路径映射到另一个

> ID：15006264
> 
> 赞同：1
> 
> 时间：2013-02-21T15:40:14.490
> 
> 标签：iis, iis-7, url-rewriting

我正在使用 IIS 7 中的 URL 重写

我想要的行为是当有人输入

[http://localhost/销售]

他们被重定向到 [http://localhost/SalesDemo]

但他们仍然在浏览器 URL 中看到 [http://localhost/Sales]

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:27:21.717

实现这一目标的最佳方法是在 URL Rewrite Module中使用[Rewrite Maps 。](http://www.iis.net/learn/extensions/url-rewrite-module/using-rewrite-maps-in-url-rewrite-module)

或者，您可以将`rewrite`部分添加到您的`web.config`文件中。

`Web.config`例子：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.webServer>
        <rewrite>
            <rules>
                <rule name="Rewrite rule">
                    <match url="^Sales$" />
                    <action type="Rewrite" url="SalesDemo" />
                </rule>
            </rules>
        </rewrite>

    </system.webServer>
</configuration> 
```

请注意，如果您仍想在浏览器中查看，则操作类型必须是`Rewrite`（而不是）。`Redirect``/Sales`

我希望这会有所帮助。

# mysql - 部分还原

> ID：15006265
> 
> 赞同：0
> 
> 时间：2013-02-21T15:40:18.360
> 
> 标签：mysql

是否可以从完整备份或并行数据库中恢复，只有某些具有原始 ID 的记录？

假设记录是从特定日期删除的，是否可以在不恢复整个表的情况下恢复这些记录？

所以要清楚地说，我在备份或并行数据库中仍有 500 - 720 条记录，但该表在备份后添加了新记录，所以也不想丢失它们。因此，只想将记录 500 - 720 及其原始 ID 重新插入当前表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T15:54:53.737

如果您有数据库的副本，那将是最简单和最快捷的方法 - 使用您需要的行创建表的副本：

```
CREATE TABLE table2
AS
SELECT * FROM table1
WHERE  table1.ID BETWEEN 500 AND 720 
```

然后用 mysqldump 转储 table2：

```
mysqldump -u -p thedatabase table2 > table2_dump.sql 
```

并将转储发送到主数据库，在使用临时数据库时运行转储，并使用以下命令插入丢失的记录：

```
INSERT INTO table1
SELECT *
FROM   temp_db.table2 
```

如果您没有丢失记录的数据库副本，只是备份，那么我认为您无法进行这种选择性恢复。如果您只有整个数据库的单个转储文件，那么您必须将完整副本恢复到临时数据库，并以与我上面描述的方式类似的方式插入丢失的记录，但使用 where 子句在插入。

# c - C：获取某个字符之前的子字符串

> ID：15006269
> 
> 赞同：21
> 
> 时间：2013-02-21T15:40:27.440
> 
> 标签：c, string, char

例如，我有这个字符串：`10.10.10.10/16`

我想从该 IP 中删除掩码并获得：`10.10.10.10`

怎么可能做到这一点？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-21T15:43:24.740

以下是您在 C++ 中的操作方式（当我回答时，问题被标记为 C++）：

```
#include <string>
#include <iostream>

std::string process(std::string const& s)
{
    std::string::size_type pos = s.find('/');
    if (pos != std::string::npos)
    {
        return s.substr(0, pos);
    }
    else
    {
        return s;
    }
}

int main(){

    std::string s = process("10.10.10.10/16");
    std::cout << s;
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-02-21T15:47:03.363

只需在斜线的位置放一个 0

```
#include <string.h> /* for strchr() */

char address[] = "10.10.10.10/10";
char *p = strchr(address, '/');
if (!p)
{
    /* deal with error: / not present" */
    ;
}
else
{
   *p = 0;
} 
```

我不知道这是否适用于 C++

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-21T15:43:09.157

```
char* pos = strstr(IP,"/"); //IP: the original string
char [16]newIP;
memcpy(newIP,IP,pos-IP);   //not guarenteed to be safe, check value of pos first 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T15:48:57.933

我看到这是在 C 中，所以我猜你的“字符串”是“char *”？
如果是这样，您可以使用一个小函数来交替字符串并在特定字符处“剪切”它：

```
void cutAtChar(char* str, char c)
{
    //valid parameter
    if (!str) return;

    //find the char you want or the end of the string.
    while (*char != '\0' && *char != c) char++;

    //make that location the end of the string (if it wasn't already).
    *char = '\0';
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-10T18:52:53.900

C++ 中的示例

```
#include <iostream>
using namespace std;

int main() 
{
    std::string addrWithMask("10.0.1.11/10");
    std::size_t pos = addrWithMask.find("/");
    std::string addr = addrWithMask.substr(0,pos);
    std::cout << addr << std::endl;
    return 0;
 } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-21T15:47:33.373

[c](/questions/tagged/c "show questions tagged 'c'")中的示例

```
char ipmask[] = "10.10.10.10/16";
char ip[sizeof(ipmask)];
char *slash;
strcpy(ip, ipmask);
slash = strchr(ip, '/');
if (slash != 0)
    *slash = 0; 
```

# c# - GridView 中的链接 (a) 有问题？

> ID：15006271
> 
> 赞同：1
> 
> 时间：2013-02-21T15:40:27.840
> 
> 标签：c#, asp.net

我的网格视图中有一个 (a)，但它无法编译：

```
 <asp:GridView ID="gvProjects" runat="server" OnSorting="gvProjects_Sorting"
            AutoGenerateColumns="False" CssClass="table table-hover table-striped"
            GridLines="None">
            <Columns>
                <asp:TemplateField HeaderText="Title" SortExpression="ProjectTitle">
                    <ItemTemplate>
                           <a href="#myModal" id="remove_emp_btn" onclick="go('projectFrame','ProjectViewFrame.aspx?id=<%# Eval("ProjectID") %>')" 
                               runat="server" data-toggle="modal">'<%# Eval("ProjectTitle") %>'</a>
                    </ItemTemplate>
                </asp:TemplateField> 
```

我是被迫使用asp控件还是代码有问题？

谢谢

它说服务器标签格式不正确。

问题似乎是：

```
 onclick="go('projectFrame','ProjectViewFrame.aspx?id=<%# Eval("ProjectID") %>')" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T15:46:08.693

您应该将属性的所有内容包装`onclick`在服务器标签中，并且可以删除`<%# %>`该属性。`runat="server"`此外，必须转义双引号字符：

```
<asp:GridView ID="gvProjects" runat="server" OnSorting="gvProjects_Sorting"
AutoGenerateColumns="False" CssClass="table table-hover table-striped"
GridLines="None">
<Columns>
    <asp:TemplateField HeaderText="Title" SortExpression="ProjectTitle">
        <ItemTemplate>
           <a href="#myModal" id="A1" onclick='<%# "go(\"projectFrame\", \"ProjectViewFrame.aspx?id=" + Eval("ProjectID").ToString() + "\" )" %>'
                    data-toggle="modal">'<%# Eval("ProjectTitle") %>'</a>
        </ItemTemplate>
    </asp:TemplateField> 
```

选择：

使用 Eval 方法的第二个参数来格式化字符串使标记更易于阅读。

```
 <a href="#myModal" id="remove_emp_btn" onclick='<%# Eval("ProjectID", "go(\"projectFrame\", \"ProjectViewFrame.aspx?id={0}\")") %>'
                data-toggle="modal">'<%# Eval("ProjectTitle") %>'</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T15:46:21.887

我从来没有把 eval 放在文本中间的运气。我经常采用这种方式渲染：

```
"<%= "go('projectFrame','ProjectViewFrame.aspx?id=" + (string)Eval("ProjectID") %>" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T15:48:51.080

使用 <%# %> 语法并删除 runat=server：

```
 <a href="#myModal" id="remove_emp_btn"  OnSorting="gvProjects_Sorting"
                           onclick='<%# "go('projectFrame','ProjectViewFrame.aspx?id=" + Eval("ProjectID").ToString() + ")" %>'
                               data-toggle="modal">'<%# Eval("ProjectTitle") %>'</a> 
```

# visual-c++ - 什么是 msvcr80!_NLG_Return？

> ID：15006272
> 
> 赞同：2
> 
> 时间：2013-02-21T15:40:29.883
> 
> 标签：visual-c++, windbg, stack-trace, crash-dumps, msvcrt

我的一个崩溃转储中有以下调用堆栈：

```
ChildEBP RetAddr  Args to Child              
1ac5f400 74e68ed7 1ac5feb4 1ac5f6d8 1ac5f420 mfc80u!ATL::CSimpleStringT<wchar_t,1>::GetString (FPO: [0,0,0]) (CONV: thiscall) [f:\dd\vctools\vc7libs\ship\atlmfc\include\atlsimpstr.h @ 548]
1ac5fec0 6e8c818e 19850020 06b11c25 00000000 msvcr80!_NLG_Return (FPO: [Uses EBP] [3,0,4]) [F:\dd\vctools\crt_bld\SELF_X86\crt\prebuild\eh\i386\lowhelpr.asm @ 73]
1ac5ff48 74e429bb 068be410 06b11cdd 00000000 mfc80u!_AfxThreadEntry+0xf2 (CONV: stdcall) [f:\dd\vctools\vc7libs\ship\atlmfc\src\mfc\thrdcore.cpp @ 109]
1ac5ff80 74e42a47 00000000 76833677 18f8c190 msvcr80!_callthreadstartex+0x1b (FPO: [Non-Fpo]) (CONV: cdecl) [f:\dd\vctools\crt_bld\self_x86\crt\src\threadex.c @ 348]
1ac5ff88 76833677 18f8c190 1ac5ffd4 77569f02 msvcr80!_threadstartex+0x66 (FPO: [1,0,4]) (CONV: stdcall) [f:\dd\vctools\crt_bld\self_x86\crt\src\threadex.c @ 326]
1ac5ff94 77569f02 18f8c190 4f59c6d6 00000000 kernel32!BaseThreadInitThunk+0xe (FPO: [Non-Fpo])
1ac5ffd4 77569ed5 74e429e1 18f8c190 00000000 ntdll!__RtlUserThreadStart+0x70 (FPO: [Non-Fpo])
1ac5ffec 00000000 74e429e1 18f8c190 00000000 ntdll!_RtlUserThreadStart+0x1b (FPO: [Non-Fpo]) 
```

现在，从这个调用堆栈看起来很清楚的是，它是应用程序中以`AfxBeginThread`: 开头的线程之一，因此`_AfxThreadEntry`在调用堆栈上。查看我的 VS2005 安装文件夹的 thrdcore.cpp 的第 109 行，我还可以看到这是调用线程过程的行：

```
// C:\Program Files (x86)\Microsoft Visual Studio 8\VC\atlmfc\src\mfc\thrdcore.cpp
107 if (pThread->m_pfnThreadProc != NULL)
108 {
109     nResult = (*pThread->m_pfnThreadProc)(pThread->m_pThreadParams);
110     ASSERT_VALID(pThread);
111 } 
```

现在这一切看起来都不错，但是上面两行对我来说没有任何意义——好吧，在字符串操作中出现了某种形式的崩溃......`!analyze -v`输出：

```
FAILURE_BUCKET_ID:  INVALID_POINTER_READ_c0000005_mfc80u.dll!ATL::CSimpleStringT_wchar_t,1_::GetString

BUCKET_ID:  APPLICATION_FAULT_INVALID_POINTER_READ_mfc80u!ATL::CSimpleStringT_wchar_t,1_::GetString+0 
```

这看起来确实很可疑，因为看看这个函数，那里似乎没有任何访问冲突。

仍然知道什么`msvcr80!_NLG_Return`可能会帮助我更接近实际问题是什么......？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T17:22:28.823

这表明您从析构函数中抛出了异常。用 查找`s-d esp l100000 1003f`。

# c - 读取和解码 jpg 图片

> ID：15006274
> 
> 赞同：-3
> 
> 时间：2013-02-21T15:40:35.613
> 
> 标签：c, jpeg

我有一个 1990 年左右编写的旧程序，但经过多次修改。2005 年左右，我开始使用 Apple Computer 的 PixOps.c 程序来读取不同类型的图片文件。

在我改用 Apple 的新系统 Mountain Lion 之前，它一直运行良好。现在我得到了几个错误。不幸的是，PixOps 使用了许多 Mountain Lion 中不再提供的例程。

谁能帮我找到一个 C 例程来从文件中读取 JPEG 图像，解码它们并将它们存储在一个简单的位图中？我的程序处理图片，然后程序在屏幕上绘制新图片。之后，我还想将新图片作为 JPEG 图片写回文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T15:42:53.583

您应该考虑使用库。JPEG 的标准称为[libjpeg](http://www.ijg.org/)。它适用于大多数典型的操作系统，包括 Mac OS X。

该项目也在 SourceForge 上，[在这里](http://libjpeg.sourceforge.net/)。

# java - 如果上游作业停止，如何杀死下游作业？

> ID：15006278
> 
> 赞同：2
> 
> 时间：2013-02-21T15:40:48.797
> 
> 标签：java, python, jenkins, jenkins-plugins

我有一个动态触发许多下游作业的父作业。

我使用python代码生成要触发的作业列表，将其写入属性文件，使用EnvInject插件注入文件，然后使用带有作业列表变量（逗号分隔）变量的“参数化触发器插件”来启动作业（如果有人知道更简单的方法，我也很想听听！）。

它工作得很好，除了杀死父作业时，触发的作业继续运行，我希望它们在杀死父作业时也死掉。

有没有插件或方法来实现这个？也许是在工作被杀死时调用的钩子？

编辑：对不起，我不清楚我的意思是“杀死”这份工作。我的意思是单击 Jenkins gui 中的红色“x”按钮，而不是 Unix 信号。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T16:09:33.917

与其终止工作，不如让另一个工作以编程方式终止所有必需的工作。您可以重用相同的属性文件来了解要终止的所有作业。您可以使用 groovy 脚本来终止作业。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T18:36:49.423

要在进程中捕获 SIGTERM，您可以使用以下代码（特定于 unix）：

```
import signal

def kill_children(*args, **kwargs):
    # some code that uses the stored list of children procs to kill them

signal.signal(signal.SIGTERM, kill_children) 
```

进程可以接收许多其他信号。SIGKILL 在您的情况下是最明显的。因此，只需找出杀死父母并处理它的信号即可。

# java - 单元测试 void 方法，其中包含随后续操作改变状态的依赖项

> ID：15006282
> 
> 赞同：0
> 
> 时间：2013-02-21T15:40:59.797
> 
> 标签：java, unit-testing, junit, tdd, mockito

当依赖项更改传递的引用的状态时，我无法对 void 方法进行单元测试并模拟依赖项。我知道可以在 void 方法上观察到副作用，也可以观察到行为，但我很难将这些准则应用于此代码。那里有类似的问题，但我找不到任何处理后续本地更改状态的内容。我正在使用 JUnit 和 Mockito ...这是我正在谈论的代码的人为版本：

```
@Mock
MergingObject mergingObject;

@Override
public void process(Foo foo1) {
    Foo foo2 = getAnInstanceOfFoo(); // private
    Foo foo3 = mergingObject.merge(foo1, foo2); // public
    foo1.copySomeValues(foo3);
} 
```

这里的难题是我是否为 MergingObject 对象创建了一个模拟。当我们模拟对象时，我期望的状态变化会消失，因为 merge(...) 操作永远不会被调用。我可以尝试验证是否使用 foo1 和 foo2 的正确实例调用了 merge(...)，但随后的 copySomeValues(...) 调用仍会引发 NullPointerException。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T15:50:18.467

除非我误解了您，否则您将 mergingObject 设置为模拟，但您没有设置模拟的行为。您需要告诉模拟的 mergingObject 当 .merge 被调用时，返回一些东西。那东西可以是任何你喜欢的东西，你可以验证从 process() 返回的对象是同一个对象。

您可以使用 mockito 中的存根语法设置行为。我从来没有使用过mockito，但看看这个网站是这样的

```
when(mergingObject.merge(something, somethingelse).return(new Foo()); 
```

您需要注意如何为某事和其他事指定参数，以便它们与您的 foo1 和 foo2 匹配

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T21:21:09.743

我从您发布的内容中注意到的是，您正在测试什么以及为什么要测试的内容还很不清楚。

鉴于 Merge 已被委托给另一个类，该类将拥有自己的一组测试。我会创建一个 foo1 和一个 foo3 来测试 CopySomeValues。合并根本不会出现。

# javascript - 默认情况下，Javascript 函数是否通过引用或值返回对象？

> ID：15006287
> 
> 赞同：26
> 
> 时间：2013-02-21T15:41:20.507
> 
> 标签：javascript, node.js

我在函数外部定义了一个对象，在全局范围内。该对象不作为参数传递给函数，但函数会修改它并返回修改后的对象。

我想知道的是，如果函数返回对象的副本，还是原始的全局对象？

另外，将该对象作为参数传递给函数会有所不同，因为对象是通过引用传递给函数的吗？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-02-21T16:03:33.360

每当您返回一个对象时，您就是在返回对该对象的引用。同样，当你传递一个对象时，你传递的是一个引用。但是，将对象作为参数传入*可能*与仅在全局范围内更改对象不同，如这些示例所示。这是因为对对象的引用本身是按值传递的。

如果您要更改对象的成员，那么无论是将其作为参数传入还是仅更新全局对象都没有区别。无论哪种方式，您都在使用同一个对象。

示例 1：

```
var object = {foo:'original'};

function changeObject() {
    object.foo = 'changed';
    return object;
}

console.log(changeObject()); // outputs {foo:'changed'}
console.log(object); // outputs {foo:'changed'} 
```

示例 2：

```
var object = {foo:'original'};

function changeArgument(object) {
    object.foo = 'changed';
    return object;
}

console.log(changeArgument(object));  // outputs {foo:'changed'}
console.log(object);  // outputs {foo:'changed'} 
```

另一方面，如果您使用新对象覆盖该对象，则如果您对参数执行此更改将不会持续存在，但如果您对全局对象执行此更改将持续存在。那是因为参数按值传递对对象的引用。一旦你用一个新对象的引用替换了这个值，你就不再谈论同一个对象了。

示例 3：

```
var object = {foo:'original'};

function replaceObject() {
    object = {foo:'changed'};
    return object;
}

console.log(replaceObject()); // outputs {foo:'changed'}
console.log(object); // outputs {foo:'changed'} 
```

示例 4：

```
var object = {foo:'original'};

function replaceArgument(object) {
    object = {foo:'changed'};
    return object;
}

console.log(replaceArgument(object)); // outputs {foo:'changed'}
console.log(object); // outputs {foo:'original'} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-10-07T16:09:43.330

可能是迟到的评论，但这是任何语言的典型挑战。在堆上创建并通过引用而不是原语（按值）传递的对象。我认为问题的根源是共享实例与唯一实例，以避免不受欢迎的影响。例如，我们调用一个函数来获取一个模板（对象）以供新用户添加到集合中，或者想要清除来自不同模块的取消事件的表单以重新开始。它易于理解且易于忽略..测试用例通常不涵盖所有使用排列

健全性清单：

这里是共享实例：

```
var bigo = {
    usr: { name: 'steven' },
    bigi: function () {
        return this.usr;
    }
};   
var outA = bigo.bigi();
var outB = bigo.bigi();

print(outA.name); // => steven
print(outB.name); // => steven

outA.name = 'ilan'; // change value

print(outA.name); // => ilan
print(outB.name); // => ilan 
```

非共享实例：

```
var bigo = {
    bigi: function () {
        var user = { name: 'steven' };
        return user;
    }
};   

var outA = bigo.bigi();
var outB = bigo.bigi();

print(outA.name); // => steven
print(outB.name); // => steven

outA.name = 'ilan'; // change value

print(outA.name); // => ilan
print(outB.name); // => steven 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T15:43:20.573

> 我想知道的是，如果函数返回对象的副本，还是原始的全局对象？

实际上，您只需要在 JavaScript 中处理对对象的引用。甚至`var foo = {}`只是将新对象的引用分配给`foo`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T15:44:16.093

如果对象在函数之外，则不需要“返回”它。如果您在函数中修改对象，它将更新对象本身。然后您可以根据需要在其他函数中引用新更新的对象。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-21T15:56:54.617

从您的问题来看，这就是我认为您的代码的外观（或多或少）：

```
var o = {};

function f() {
    o.prop = true;
    return o;
} 
```

1.  在这种情况下，全局变量`o`引用一个对象。
2.  当你修改`o`你修改任何`o`引用。因此它修改了原始对象。
3.  当您返回时，`o`您将返回对原始对象的引用。

将对象传递给函数会导致对原始对象的引用被传递。因此，任何修改都会影响原始对象。例如：

```
var o = {};

f(o);

console.log(o.prop); // true

function f(o) {
    o.prop = true;
} 
```

# android - 将行插入 Sqlite DB(Android)

> ID：15006291
> 
> 赞同：1
> 
> 时间：2013-02-21T15:41:28.967
> 
> 标签：android, database, sqlite, sql-insert

我有表“日志”：

```
private static final String DATABASE_CREATE = 
            "create table if not exists logs (_id integer primary key autoincrement, "+ "date datetime, city text, " + "type text, log text, nick text);"; 
```

以及插入日志的方法：

```
public long insertLog(String city, int type, String log, String nick) {

        SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
        Date date = new Date();

        ContentValues initialValues = new ContentValues();

        initialValues.put(KEY_DATE, dateFormat.format(date));
        initialValues.put(KEY_CITY, city);
        initialValues.put(KEY_TYPE, type);
        initialValues.put(KEY_LOG, log);
        initialValues.put(KEY_NICK, nick);

        return db.insert(DATABASE_TABLE, null, initialValues);

    } 
```

每次我尝试插入日志时，我都没有例外。方法每次返回“1”。但是当我用 sqliteviewer 查看我的桌子时，我发现它是空的。这个问题可能是什么原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T15:46:56.020

像这样创建表

```
private static final String DATABASE_CREATE = 
            "create table if not exists logs (_id integer primary key autoincrement,date text, city text, type text, log text, nick text);"; 
```

& 插入像这样

```
public long insertLog(String city, int type, String log, String nick) {

        SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
        Date date = new Date();

        ContentValues initialValues = new ContentValues();

         // convert date to string
        String dateString = dateFormat.format(date);

        initialValues.put(KEY_DATE,dateString);
        initialValues.put(KEY_CITY, city);
        initialValues.put(KEY_TYPE, type);
        initialValues.put(KEY_LOG, log);
        initialValues.put(KEY_NICK, nick);

        return db.insert(DATABASE_TABLE, null, initialValues);

    } 
```

**编辑：**

调用这个方法

```
 db.open();
         db.insertLog(....);
         db.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-05T12:10:47.790

**完整的例子** [在这里](http://www.freakyjolly.com/android-sqlite-how-to-insert-rows-in-database/)

在**DataBaseHelper**中定义基本配置后，使用**db**对象使用以下方法插入行

```
// method to insert a record in Table
public static String insertEntry(String user_name, String user_phone, String user_email)
{

    try {

        ContentValues newValues = new ContentValues();
        // Assign values for each column.
        newValues.put("user_name", user_name);
        newValues.put("user_phone", user_phone);
        newValues.put("user_email", user_email);

        // Insert the row into your table
        db = dbHelper.getWritableDatabase();
        long result=db.insert(TABLE_NAME, null, newValues);
        toast("User Info Saved! Total Row Count is "+getRowCount());
        db.close();

    }catch(Exception ex) {
    }
    return "ok";
} 
```

# c# - 来自 Directory 方法的 C# GetFiles 函数

> ID：15006292
> 
> 赞同：1
> 
> 时间：2013-02-21T15:41:31.323
> 
> 标签：c#, coding-style, getfiles

我正在使用 Directory.GetFiles(string,string) 来查找特定文件类型的所有文件。如果我有两种不同类型的文件名称相同但扩展名不同，是否可以保证填充的这些文件列表绝对匹配？

例如）

**伪代码**

> ```
>  List1 -> getfiles(dir,filetype2)
>  List2 -> getfiles(dir,filetype2) 
> ```

清单 1 和清单 2 会保证完全相同的匹配文件吗？我相信它会，但想知道在任何情况下它们会有所不同吗？

**正确案例**

> ```
>  List1[4] is "2esDSd.filetype1"
>  List2[4] is "2esDSd.filetype2" 
> ```

**错误案例**

> ```
>  List1[4] is "3esDSd.filetype1"
>  List2[4] is "2esDSd.filetype2" 
> ```

我知道我总是可以编写另一层额外的验证或排序，因为仍然可能有不正确的输入。但是想知道是一种很好的做法，或者考虑到内部功能的工作原理，是否不需要做/验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T15:49:23.220

如果文件系统确实包含匹配的文件，您只能“保证”这一点。在这种情况下，最好确保按字母顺序获取文件名，如下所示：

**伪代码**

```
List1 -> getfiles(dir,filetype2).OrderBy(x => x.FileName).ToList();
List2 -> getfiles(dir,filetype2).OrderBy(x => x.FileName).ToList(); 
```

但是，就像我说的那样，这取决于存在的正确文件，以及您的文件过滤器（例如“*.jpg”）与目录中没有双胞胎的任何文件不匹配。

一个更强大的解决方案是只检索您想要的两种文件类型的所有文件，然后自己搜索结果之间的匹配项，如下所示：

**伪代码**

```
for each filename f1 in List1
    get matchine file name f2 in List2
    if it exists, add (f1, f2) to results 
```

然后结果是具有匹配文件名的 2 元组列表。

# c# - C#图形计算图像并保留它

> ID：15006293
> 
> 赞同：0
> 
> 时间：2013-02-21T15:41:32.180
> 
> 标签：c#, graphics, paint

我已经看到，绘制两个图像非常耗时，所以我想尽可能减少绘制这些图像。我使用图片编辑并覆盖了 ondraw 事件。在这里，我添加了以下部分，但它最终变成了黑色图像。我确实想检查一下，我是否需要画画。此检查有效。然后我绘制背景并将其覆盖在另一个背景上，我想将其存储为图像并将其作为我的控件的背景。

如果我不重绘背景，我只需调用：

`g.Clear(Color.Transparent);`

在我的图片编辑绘画事件中。

我有什么问题吗？

此致，

帕特里克

```
//Recalculate the background
if (redrawBackground)
{
    g.FillRectangle(Brushes.White, 0, 0, backGroundImage.Width, backGroundImage.Height);
    g.Clear(Color.White);
    //this is drawn without aspect ration. The matrix is stored, since drawing images is expensive
    GenerateTransformation(g, false);

    g.DrawImageUnscaled(backGroundImage, new Rectangle(0, 0, backGroundImage.Width, backGroundImage.Height));
    lastTransformation = g.Transform;

    GenerateTransformation(g, true);

    g.DrawImage(foreGroundImage, new Rectangle(0, 0, backGroundImage.Width, backGroundImage.Height));
    lastTransformationAspect = g.Transform;
    //Save bitmap as background
    Bitmap bmp = new Bitmap(backGroundImage.Width, backGroundImage.Height, e.Graphics);
    //Trick the background by a new image
    pictureEdit.Image = bmp;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T15:59:29.390

您的代码 ( `new Bitmap(backGroundImage.Width, backGroundImage.Height, e.Graphics);` ) 不会将图像复制到位图；它仅将 Graphics 对象与位图相关联。

尝试这个：

```
Bitmap bmp = new Bitmap(width, height);
Graphics g = Graphics.FromImage(bmp);
g.DrawSomething(); // This draws to the bitmap 
```

# python - 如何在 iPython 笔记本中预览大熊猫 DataFrame 的一部分？

> ID：15006298
> 
> 赞同：46
> 
> 时间：2013-02-21T15:42:05.437
> 
> 标签：python, pandas, dataframe, ipython, ipython-notebook

我刚开始在 IPython Notebook 中使用 pandas 并遇到以下问题：当`DataFrame`从 CSV 文件中读取的内容很小时，IPython Notebook 会以漂亮的表格视图显示它。当`DataFrame`很大时，输出如下：

```
In [27]:

evaluation = readCSV("evaluation_MO_without_VNS_quality.csv").filter(["solver", "instance", "runtime", "objective"])

In [37]:

evaluation

Out[37]:

<class 'pandas.core.frame.DataFrame'>
Int64Index: 333 entries, 0 to 332
Data columns:
solver       333  non-null values
instance     333  non-null values
runtime      333  non-null values
objective    333  non-null values
dtypes: int64(1), object(3) 
```

我希望将数据框的一小部分视为表格，以确保其格式正确。我有什么选择？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2014-09-21T13:09:56.510

```
df.head(5) # will print out the first 5 rows
df.tail(5) # will print out the 5 last rows 
```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2013-02-21T15:50:02.550

在这种情况下，如果`DataFrame`长但不太宽，您可以简单地对其进行切片：

```
>>> df = pd.DataFrame({"A": range(1000), "B": range(1000)})
>>> df
<class 'pandas.core.frame.DataFrame'>
Int64Index: 1000 entries, 0 to 999
Data columns:
A    1000  non-null values
B    1000  non-null values
dtypes: int64(2)
>>> df[:5]
   A  B
0  0  0
1  1  1
2  2  2
3  3  3
4  4  4 
```

# ix 已弃用。

如果它既宽又长，我倾向于使用`.ix`：

```
>>> df = pd.DataFrame({i: range(1000) for i in range(100)})
>>> df.ix[:5, :10]
   0   1   2   3   4   5   6   7   8   9   10
0   0   0   0   0   0   0   0   0   0   0   0
1   1   1   1   1   1   1   1   1   1   1   1
2   2   2   2   2   2   2   2   2   2   2   2
3   3   3   3   3   3   3   3   3   3   3   3
4   4   4   4   4   4   4   4   4   4   4   4
5   5   5   5   5   5   5   5   5   5   5   5 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-04-03T11:49:52.807

我编写了一个方法来显示数据的四个角，并为数据框添加猴子补丁来做到这一点：

```
def _sw(df, up_rows=10, down_rows=5, left_cols=4, right_cols=3, return_df=False):
    ''' display df data at four corners
        A,B (up_pt)
        C,D (down_pt)
        parameters : up_rows=10, down_rows=5, left_cols=4, right_cols=3
        usage:
            df = pd.DataFrame(np.random.randn(20,10), columns=list('ABCDEFGHIJKLMN')[0:10])
            df.sw(5,2,3,2)
            df1 = df.set_index(['A','B'], drop=True, inplace=False)
            df1.sw(5,2,3,2)
    '''
    #pd.set_printoptions(max_columns = 80, max_rows = 40)
    ncol, nrow = len(df.columns), len(df)

    # handle columns
    if ncol <= (left_cols + right_cols) :
        up_pt = df.ix[0:up_rows, :]         # screen width can contain all columns
        down_pt = df.ix[-down_rows:, :]
    else:                                   # screen width can not contain all columns
        pt_a = df.ix[0:up_rows,  0:left_cols]
        pt_b = df.ix[0:up_rows,  -right_cols:]
        pt_c = df[-down_rows:].ix[:,0:left_cols]
        pt_d = df[-down_rows:].ix[:,-right_cols:]

        up_pt   = pt_a.join(pt_b, how='inner')
        down_pt = pt_c.join(pt_d, how='inner')
        up_pt.insert(left_cols, '..', '..')
        down_pt.insert(left_cols, '..', '..')

    overlap_qty = len(up_pt) + len(down_pt) - len(df)
    down_pt = down_pt.drop(down_pt.index[range(overlap_qty)]) # remove overlap rows

    dt_str_list = down_pt.to_string().split('\n') # transfer down_pt to string list

    # Display up part data
    print up_pt

    start_row = (1 if df.index.names[0] is None else 2) # start from 1 if without index

    # Display omit line if screen height is not enought to display all rows
    if overlap_qty < 0:
        print "." * len(dt_str_list[start_row])

    # Display down part data row by row
    for line in dt_str_list[start_row:]:
        print line

    # Display foot note
    print "\n"
    print "Index :",df.index.names
    print "Column:",",".join(list(df.columns.values))
    print "row: %d    col: %d"%(len(df), len(df.columns))
    print "\n"

    return (df if return_df else None)
DataFrame.sw = _sw  #add a method to DataFrame class 
```

这是示例：

```
>>> df = pd.DataFrame(np.random.randn(20,10), columns=list('ABCDEFGHIJKLMN')[0:10])

>>> df.sw()
         A       B       C       D  ..       H       I       J
0  -0.8166  0.0102  0.0215 -0.0307  .. -0.0820  1.2727  0.6395
1   1.0659 -1.0102 -1.3960  0.4700  ..  1.0999  1.1222 -1.2476
2   0.4347  1.5423  0.5710 -0.5439  ..  0.2491 -0.0725  2.0645
3  -1.5952 -1.4959  2.2697 -1.1004  .. -1.9614  0.6488 -0.6190
4  -1.4426 -0.8622  0.0942 -0.1977  .. -0.7802 -1.1774  1.9682
5   1.2526 -0.2694  0.4841 -0.7568  ..  0.2481  0.3608 -0.7342
6   0.2108  2.5181  1.3631  0.4375  .. -0.1266  1.0572  0.3654
7  -1.0617 -0.4743 -1.7399 -1.4123  .. -1.0398 -1.4703 -0.9466
8  -0.5682 -1.3323 -0.6992  1.7737  ..  0.6152  0.9269  2.1854
9   0.2361  0.4873 -1.1278 -0.2251  ..  1.4232  2.1212  2.9180
10  2.0034  0.5454 -2.6337  0.1556  ..  0.0016 -1.6128 -0.8093
..............................................................
15  1.4091  0.3540 -1.3498 -1.0490  ..  0.9328  0.3668  1.3948
16  0.4528 -0.3183  0.4308 -0.1818  ..  0.1295  1.2268  0.1365
17 -0.7093  1.3991  0.9501  2.1227  .. -1.5296  1.1908  0.0318
18  1.7101  0.5962  0.8948  1.5606  .. -0.6862  0.9558 -0.5514
19  1.0329 -1.2308 -0.6896 -0.5112  ..  0.2719  1.1478 -0.1459

Index : [None]
Column: A,B,C,D,E,F,G,H,I,J
row: 20    col: 10

>>> df.sw(4,2,3,4)
        A       B       C  ..       G       H       I       J
0 -0.8166  0.0102  0.0215  ..  0.3671 -0.0820  1.2727  0.6395
1  1.0659 -1.0102 -1.3960  ..  1.0984  1.0999  1.1222 -1.2476
2  0.4347  1.5423  0.5710  ..  1.6675  0.2491 -0.0725  2.0645
3 -1.5952 -1.4959  2.2697  ..  0.4856 -1.9614  0.6488 -0.6190
4 -1.4426 -0.8622  0.0942  .. -0.0947 -0.7802 -1.1774  1.9682
..............................................................
18  1.7101  0.5962  0.8948  .. -0.8592 -0.6862  0.9558 -0.5514
19  1.0329 -1.2308 -0.6896  .. -0.3954  0.2719  1.1478 -0.1459

Index : [None]
Column: A,B,C,D,E,F,G,H,I,J
row: 20    col: 10 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-05-21T18:13:52.693

这是预览大表而不使其运行得太宽的快速方法：

显示功能：

```
# display large dataframes in an html iframe
def ldf_display(df, lines=500):
    txt = ("<iframe " +
           "srcdoc='" + df.head(lines).to_html() + "' " +
           "width=1000 height=500>" +
           "</iframe>")

    return IPython.display.HTML(txt) 
```

现在只需在任何单元格中运行它：

```
ldf_display(large_dataframe) 
```

这会将数据框转换为 html，然后将其显示在 iframe 中。优点是您可以控制输出大小并具有易于访问的滚动条。

为我的目的工作，也许它会帮助别人。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-05-15T13:48:57.747

要查看 DataFrame 的前 n 行：

```
df.head(n) # (n=5 by default) 
```

要查看最后 n 行：

```
df.tail(n) 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2018-08-08T15:51:04.517

此行将允许您查看所有行（最多为您设置为“max_rows”的数量），而没有任何行被打印输出中通常出现在头尾之间的点（“.....”）隐藏.

```
pd.options.display.max_rows = 500 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-10-07T08:20:02.393

你可以只使用`nrows`. 例如

```
pd.read_csv('data.csv',nrows=6) 
```

将显示前 6 行`data.csv`。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-01-24T04:20:53.200

更新一个以生成字符串，并适应 Pandas0.13+

```
def _sw2(df, up_rows=5, down_rows=3, left_cols=4, right_cols=2, return_df=False):
    """ return df data display string at four corners
        A,B (up_pt)
        C,D (down_pt)
        parameters : up_rows=10, down_rows=5, left_cols=4, right_cols=3
        usage:
            df = pd.DataFrame(np.random.randn(20,10), columns=list('ABCDEFGHIJKLMN')[0:10])
            df.sw(5,2,3,2)
            df1 = df.set_index(['A','B'], drop=True, inplace=False)
            df1.sw(5,2,3,2)
    """

    #pd.set_printoptions(max_columns = 80, max_rows = 40)
    nrow, ncol = df.shape #ncol, nrow = len(df.columns), len(df)

    # handle columns
    if ncol <= (left_cols + right_cols) :
        up_pt = df.ix[0:up_rows, :]         # screen width can contain all columns
        down_pt = df.ix[-down_rows:, :]
    else:                                   # screen width can not contain all columns
        pt_a = df.ix[0:up_rows,  0:left_cols]
        pt_b = df.ix[0:up_rows,  -right_cols:]
        pt_c = df[-down_rows:].ix[:,0:left_cols]
        pt_d = df[-down_rows:].ix[:,-right_cols:]

        up_pt   = pt_a.join(pt_b, how='inner')
        down_pt = pt_c.join(pt_d, how='inner')
        up_pt.insert(left_cols, '..', '..')
        down_pt.insert(left_cols, '..', '..')

    overlap_qty = len(up_pt) + len(down_pt) - len(df)
    down_pt = down_pt.drop(down_pt.index[range(overlap_qty)]) # remove overlap rows

    dt_str_list = down_pt.to_string().split('\n') # transfer down_pt to string list

    # Display up part data
    ds = up_pt.__str__()
    #get rid of ending part of Pandas0.13+ display string by finding the last 3 '\n', ugly though
    Display_str = ds[0:ds[0:ds[0:ds.rfind('\n')].rfind('\n')].rfind('\n')] #refer to http://stackoverflow.com/questions/4664850/find-all-occurrences-of-a-substring-in-python

    start_row = (1 if df.index.names[0] is None else 2) # start from 1 if without index

    # Display omit line if screen height is not enought to display all rows
    if overlap_qty < 0:
        Display_str += "\n"
        Display_str += "." * len(dt_str_list[start_row])
        Display_str += "\n"

    # Display down part data row by row
    for line in dt_str_list[start_row:]:
        Display_str += "\n"
        Display_str += line

    # Display foot note
    Display_str += "\n\n"
    Display_str += "Index : %s\n"%str(df.index.names)

    col_name_list = list(df.columns.values)
    if ncol < 10:
        col_name_str = ", ".join(col_name_list)
    else:
        col_name_str = ", ".join(col_name_list[0:7]) + ' ... ' + ", ".join(col_name_list[-2:])
    Display_str = Display_str + "Column: " + col_name_str + "\n"
    Display_str = Display_str + "row: %d   col: %d"%(nrow, ncol) + "    "

    dty_dict={} #simulate defaultdict
    for k,g in itertools.groupby(list(df.dtypes.values)): #http://stackoverflow.com/questions/13565248/grouping-the-same-recurring-items-that-occur-in-a-row-from-list/13565414#13565414
        try:
            dty_dict[k] = dty_dict[k] + len(list(g))
        except:
            dty_dict[k] = len(list(g))

    for key in dty_dict:
        Display_str += "{0}: {1}   ".format(key, dty_dict[key])

    Display_str += "\n\n"

    return (df if return_df else Display_str) 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-09-02T04:42:52.443

为了只查看您可以使用的前几个条目，pandas head 函数用作

```
dataframe.head(any number)        // default is 5
dataframe.head(n=value) 
```

或者你也可以为此目的进行切片，这也可以得到相同的结果，

```
dataframe[:n] 
```

为了查看最后几个条目，您可以以类似的方式使用 pandas tail()，

```
dataframe.tail(any number)        // default is 5
dataframe.tail(n=value) 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-11-16T04:07:12.263

在 Python 中，pandas 提供 head() 和 tail() 分别打印头尾数据。

```
import pandas as pd
train = pd.read_csv('file_name')
train.head() # it will print 5 head row data as default value is 5
train.head(n) # it will print n head row data
train.tail() #it will print 5 tail row data as default value is 5
train.tail(n) #it will print n tail row data 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-08-23T05:48:26.327

我发现以下方法对 DataFrame 进行采样是最有效的：

```
print(df[A:B]) ## 'A' and 'B' are the first and last records in range 
```

例如，`print(df[10:15])`将从您的数据集中打印第 10 行到第 15 行（含）。

# java - Netty 连接重试

> ID：15006303
> 
> 赞同：2
> 
> 时间：2013-02-21T15:42:30.743
> 
> 标签：java, netty

在 Netty 中重试连接

我正在构建一个客户端套接字系统。要求是： 第一次尝试连接到远程服务器 当第一次尝试失败时，继续尝试直到服务器在线。

我想知道netty中是否有这样的功能可以做到这一点，或者我怎样才能最好地解决这个问题。

非常感谢

这是我正在努力的代码片段：

```
protected void connect() throws Exception {

        this.bootstrap = new ClientBootstrap(new NioClientSocketChannelFactory(
                Executors.newCachedThreadPool(),
                Executors.newCachedThreadPool()));

        // Configure the event pipeline factory.
        bootstrap.setPipelineFactory(new SmpPipelineFactory());

        bootstrap.setOption("writeBufferHighWaterMark", 10 * 64 * 1024);
        bootstrap.setOption("sendBufferSize", 1048576); 
        bootstrap.setOption("receiveBufferSize", 1048576);
        bootstrap.setOption("tcpNoDelay", true);
        bootstrap.setOption("keepAlive", true);
        // Make a new connection.
        final ChannelFuture connectFuture = bootstrap
                .connect(new InetSocketAddress(config.getRemoteAddr(), config
                        .getRemotePort()));

        channel = connectFuture.getChannel();
        connectFuture.addListener(new ChannelFutureListener() {

            @Override
            public void operationComplete(ChannelFuture future)
                    throws Exception {
                if (connectFuture.isSuccess()) {
                    // Connection attempt succeeded:
                    // Begin to accept incoming traffic.
                    channel.setReadable(true);
                } else {
                    // Close the connection if the connection attempt has
                    // failed.
                    channel.close();
                    logger.info("Unable to Connect to the Remote Socket server");                   
                }

            }
        });
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T16:54:31.107

假设 netty 3.x 最简单的例子是：

```
// Configure the client.
ClientBootstrap bootstrap = new ClientBootstrap(
        new NioClientSocketChannelFactory(
                Executors.newCachedThreadPool(),
                Executors.newCachedThreadPool()));

ChannelFuture future = null;

while (true)
{
    future = bootstrap.connect(new InetSocketAddress("127.0.0.1", 80));
    future.awaitUninterruptibly();
    if (future.isSuccess()) 
    {
        break;
    }
} 
```

显然，您希望对设置最大尝试次数等的循环有自己的逻辑。Netty 4.x 的引导程序略有不同，但逻辑是相同的。这也是同步的、阻塞的和忽略的`InterruptedException`；在真正的应用程序中，您可能会向 注册 a`ChannelFutureListener`并`Future`在完成时收到通知`Future`。

**在 OP 编辑​​问题后添加：**

你有一个`ChannelFutureListener`正在收到通知。如果您想然后重试连接，您将不得不让该侦听器持有对引导程序的引用，或者与您的主线程通信回连接尝试失败并让它重试操作。如果您让侦听器执行此操作（这是最简单的方法），请注意您需要限制重试次数以防止无限递归 - 它是在 Netty 工作线程的上下文中执行的。如果您再次用尽重试，您需要将其传达回您的主线程；你可以通过一个 volatile 变量来做到这一点，或者可以使用观察者模式。

在处理异步时，您确实必须同时考虑。有很多方法可以剥那只猫的皮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T14:47:10.660

谢谢布赖恩·罗奇。连接的变量是易失的，可以在代码或进一步处理之外访问。

```
final InetSocketAddress sockAddr = new InetSocketAddress(
                config.getRemoteAddr(), config.getRemotePort());
    final ChannelFuture connectFuture = bootstrap
            .connect(sockAddr);

    channel = connectFuture.getChannel();
    connectFuture.addListener(new ChannelFutureListener() {

        @Override
        public void operationComplete(ChannelFuture future)
                throws Exception {
            if (future.isSuccess()) {
                // Connection attempt succeeded:
                // Begin to accept incoming traffic.
                channel.setReadable(true);
                connected = true;
            } else {
                // Close the connection if the connection attempt has
                // failed.
                channel.close();                    
                if(!connected){
                    logger.debug("Attempt to connect within " + ((double)frequency/(double)1000) + " seconds");
                    try {
                        Thread.sleep(frequency);
                    } catch (InterruptedException e) {
                        logger.error(e.getMessage());
                    }   
                    bootstrap.connect(sockAddr).addListener(this);                                          
                }
            }

        }
    }); 
```

# android - 如何在主/细节流中完成片段？

> ID：15006315
> 
> 赞同：0
> 
> 时间：2013-02-21T15:42:54.490
> 
> 标签：android, android-fragments, master-detail, activity-finish

我不知道如何以正确的方式做到这一点。我有一个主/详细信息流，现在我在需要完成它的详细信息中执行一个操作，但是当然，详细信息片段应该不知道它是由单窗格活动还是双窗格活动包裹。

那么我该怎么做呢？我正在考虑两个活动都将实现的回调，并且单个窗格将自行完成并因此完成片段，而双窗格只会弹出片段。

这是一个好主意吗？有来自细节片段的回调？这不是很多开销吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T15:53:00.130

不，它不是开销。这是正确的方式。

**或者**在你的`DetailFragment`：

```
if (getActivity() instanseOf SinglePaneActivity){
    getActivity().finish(); 
}else{ 
    getActivity().getFragmentManager().popBackStack();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T15:50:40.147

> 现在我在需要完成它的细节中执行一个动作

对于主/细节模式来说，这是不寻常的流程。通常，细节会一直存在，直到用户点击主列表中的其他内容。不过，我可以看到您建议的对正在查看的项目进行删除操作的流程。

> 我正在考虑两个活动都将实现的回调，并且单个窗格将自行完成并因此完成片段，而双窗格只会弹出片段。

这是一个很好的答案。

> 这不是很多开销吗？

不。定义一个接口，托管您的片段的所有活动都必须实现。您可以考虑使用契约模式来帮助强制执行：

```
import android.app.Activity;
import com.actionbarsherlock.app.SherlockFragment;

// from https://gist.github.com/2621173

public abstract class ContractFragment<T> extends SherlockFragment {
  private T mContract;

  @SuppressWarnings("unchecked")
  @Override
  public void onAttach(Activity activity) {
    try {
      mContract=(T)activity;
    }
    catch (ClassCastException e) {
      throw new IllegalStateException(activity.getClass()
                                              .getSimpleName()
          + " does not implement "
          + getClass().getSimpleName()
          + "'s contract interface.", e);
    }
    super.onAttach(activity);
  }

  @Override
  public void onDetach() {
    super.onDetach();
    mContract=null;
  }

  public final T getContract() {
    return mContract;
  }
} 
```

（代码基于ActionBarSherlock[的 Jake Wharton 的要点）](https://gist.github.com/2621173)

这里，`T`是接口的名称。您的片段将从 this 继承并调用`getContract()`以检索您调用回调方法的接口实现对象。运行时开销最多只有几十条指令——您无需担心。

# java - 是否可以将.exe文件转换为java文件

> ID：15006317
> 
> 赞同：-2
> 
> 时间：2013-02-21T15:42:59.807
> 
> 标签：java

是否可以将 .exe 文件转换为 java 文件？如何为我的 exe 文件提供安全性，因为我的远程数据库服务器密码在我的一个 java 文件中。我不希望其他人也查看该 .class 文件。

我不希望其他人在我的 exe 文件中查看 jar 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T15:46:46.087

不，您不能将 exe 转换为 java 文件（我认为您的意思是 jar 文件）。有诸如可执行 jar 之类的东西，但我认为这不是你在说的。

您要求将本机代码从 EXE 转换为 java 代码，这告诉我您并不完全了解 java 的工作原理。

查看这些问题，它们提出了类似的问题

[如何将 exe 文件转换为 .jar 文件？](https://stackoverflow.com/questions/7760126/how-to-convert-exe-file-to-jar-file)

# iphone - 使用自定义键盘调用 textFieldShouldReturn

> ID：15006318
> 
> 赞同：1
> 
> 时间：2013-02-21T15:43:01.137
> 
> 标签：iphone, ios, objective-c, xcode, ipad

我有一个自定义键盘，它设置了一个 UITextInput 委托，用于将文本发送到当前文本字段。但我还需要发送一个“返回”按钮来调用 textFieldShouldReturn 方法，据我所知，UITextInput 不允许这样做。（除非返回键有某种特定字符？）

那么究竟如何将“return”按键值传递给文本字段以触发 textFieldShouldReturn？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T15:46:45.200

返回键的特定字符是`\n`将其添加到字符串的末尾会将光标放在下一行...

*然后实际调用 textFieldShouldReturn 方法，如果您出于某种原因仍想这样做，您只需像调用任何方法一样调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T15:46:36.913

你应该实现这个：

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField {
    [textField resignFirstResponder];
    return NO;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T16:15:38.660

You're headed in the wrong direction here, because you're already using a custom keyboard. That should eliminate you from needing to use a UITextFieldDelegate to solve the problem of return key detection.

textFieldShouldReturn: is a delegate method of the UITextField used to detect when the user presses the return key. If you didn't have this method, you'd have to use textField:shouldChangeCharactersInRange:replacementString: to detect the newline character from a normal UIKeyboard, which would be a pain in the butt.

But if you have a particular button on your keyboard that should do something special, just wire that button up to your IBAction method directly.

So something like this:

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField {
   [self returnKeyPressed:textField];
   return NO;
}

- (IBAction)returnKeyPressed:(id)sender {
   // Do whatever you want done
} 
```

If you wire your custom key to returnKeyPressed:, both a hardware keyboard and your virtual custom keyboard would end up in returnKeyPressed: and the behavior would be consistent.

You probably would want to define a small protocol to make sure your delegates support returnKeyPressed: in addition to the UITextFieldDelegate methods.

# php - 删除帐户后关闭会话

> ID：15006319
> 
> 赞同：2
> 
> 时间：2013-02-21T15:43:03.460
> 
> 标签：php, sql, security, session

我创建的许多网站都将用户数据存储在会话中以便快速访问。问题是，如果管理员选择删除或禁用用户的帐户，只要他们有会话 cookie，他们在技术上仍然是“登录”。

虽然有一些变通解决方案，例如在用户进行任何更改之前对用户进行数据库检查或在登录验证功能中添加数据库检查，但这些都没有我想要的效率。

所以我的问题是，有没有办法根据存储在所述会话中的数据（如用户 ID）从另一个用户关闭一个用户的会话？如果不是，什么时候在内部使用会话数据而不进行数据库验证会被认为是不安全的？

我应该注意到，这个问题是在假设我将使用内置的 $_SESSION 变量而不是某种自定义数据库实现的前提下提出的，因为数据库会话很容易追踪。

我试图避免使用数据库，因为在本地服务器上保存会话数据比每次我想访问会话数据时增加连接到外部数据库的延迟要高效得多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T15:45:23.473

你试过`session_destroy`吗？

[会话销毁](http://php.net/manual/en/function.session-destroy.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T16:12:38.043

尝试使用以下实现您正在寻找的东西：

*   获取所有会话：[PHP 中的 $_SESSION 列表](https://stackoverflow.com/questions/1248008/session-list-in-php)

*   如何终止特定会话：[如何销毁特定 PHP 会话](https://stackoverflow.com/questions/6730123/how-to-destroy-a-specific-php-session)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T15:45:13.253

您可以[`session_destroy`](http://php.net/manual/en/function.session-destroy.php)在流程结束时使用，但此外：

> 为了完全终止会话，例如注销用户，还必须取消设置会话 ID [并且] 然后必须删除会话 cookie。

[作为旁注：关于 PHP 文档的一个“好”的事情是你绝对会笑。]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T15:58:19.953

你不能在别人他的电脑上破坏会话...... 如果您真的想这样做，您应该检查每个页面是否该帐户仍然可用..或其他一些解决方法..

# php - 用于验证日期的 W3CDTF 规范正则表达式

> ID：15006325
> 
> 赞同：1
> 
> 时间：2013-02-21T15:43:18.123
> 
> 标签：php, regex, validation, date

我根据[W3 规范](http://www.w3.org/TR/NOTE-datetime)检查日期是否有效：

```
/(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2})(:(\d{2}))?(?:([-+])(\d{2}):?(\d{2})|(Z))?/ 
```

接受以下格式：

```
 Year:
      YYYY (eg 1997)
   Year and month:
      YYYY-MM (eg 1997-07)
   Complete date:
      YYYY-MM-DD (eg 1997-07-16)
   Complete date plus hours and minutes:
      YYYY-MM-DDThh:mmTZD (eg 1997-07-16T19:20+01:00)
   Complete date plus hours, minutes and seconds:
      YYYY-MM-DDThh:mm:ssTZD (eg 1997-07-16T19:20:30+01:00)
   Complete date plus hours, minutes, seconds and a decimal fraction of a
second
      YYYY-MM-DDThh:mm:ss.sTZD (eg 1997-07-16T19:20:30.45+01:00) 
```

`2005-04-05`从不匹配，我无法为我的生活弄明白。根据模式，它应该匹配。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T15:53:36.497

考虑使用 OR 类型的方法来构建它，然后如果你愿意，可以通过查看来简化：

```
(\d{4})|(\d{4}-\d{2})|(\d{4}-\d{2}-\d{2})|(\d{4}-\d{2}-\d{2}T\d{2}(:\d{2}){1,2}[-+]\d{2}:\d{2}) 
```

此外，这不是检查日期的有效数字，如果您将其模块化，可以很容易地完成它，逐步进行。日期的示例可能如下所示：

```
\d{4}-(([0]{0,1}[\d])|(1[0-2]))-(([0-2]{0,1}[\d])|(3[01])) 
```

请注意，这假设只有 4 位数的年份，并且任何 4 位数的年份都可以。它还允许将 01 和 1 作为单个数字的月份和日期数字。为了清楚起见，还有一些额外的括号。

# linux - 如何设置节点服务器以便可以使用 git 推送更新？

> ID：15006330
> 
> 赞同：0
> 
> 时间：2013-02-21T15:43:22.177
> 
> 标签：linux, git, node.js

如果我托管我自己的 node.js 服务器，我将如何制作它以便我可以像在 Heroku 上一样将更新推送到代码？

我希望能够将我的源代码托管在与我的节点应用程序相同的服务器上，然后每当我推送更新时，它将使用更新的代码重新启动节点应用程序。我该怎么做呢？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:01:29.827

你应该使用 git`post-receive`钩子。

从[文档中](http://git-scm.com/book/en/Customizing-Git-Git-Hooks)：

> 该`post-receive`钩子在整个过程完成后运行，可用于更新其他服务或通知用户。

您的脚本可能类似于

*   停止您的节点应用程序
*   将新文件复制到旧文件上
*   重启节点应用

请注意，您的脚本不应花费很长时间才能运行

> 此脚本无法停止推送过程，但客户端在完成之前不会断开连接；所以，当你尝试做任何可能需要很长时间的事情时要小心。

# matlab - MATLAB：如何在没有循环的情况下计算（上）子矩阵

> ID：15006334
> 
> 赞同：2
> 
> 时间：2013-02-21T15:43:34.557
> 
> 标签：matlab, loops, for-loop, matrix, submatrix

我想将矩阵按列拆分为 3 段并对其进行计算（`mean()`）。有没有办法在没有for循环的情况下获得这个，就像我在这个提供的示例中所做的那样？

```
M = [2 4 9; 50 50 200; 30 0 0];
M = [M 10*M]
N = length(M);
seg = 3 % split in lets say 3 parts
segLen = round(N/seg)
segBeg = (((1:seg)-1) * segLen)+1  % start indices
segEnd = segBeg + segLen -1        % end indices

for i = 1: length(segBeg)
    mean(M(:,segBeg(i):segEnd(i)),2)
end 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T16:11:36.983

跳出框框思考：使用第三维：

```
r=reshape(M,size(M,1),segLen,[])
squeeze(mean(r,2)) 
```

第一行产生一个 3d 数组，第一个矩阵位于`r(:,:,1)`，第二个矩阵位于`r(:,:,2)`，...（如果列数不能被 整除，则使用`M(:,1:seg*segLen)`instread of ）。 生成一个 nrows-by-1-by-数组，再次从中生成一个 nrows-by-矩阵。`M``segLen``mean(r,2)``seg``squeeze``seg`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T15:59:09.797

你可以[`arrayfun`](http://www.mathworks.de/de/help/matlab/ref/arrayfun.html)一起使用[`cell2mat`](http://www.mathworks.de/de/help/matlab/ref/cell2mat.html)

```
result = cell2mat(arrayfun(@(x,y) mean(M(:,x:y),2), segBeg, segEnd,...
   'UniformOutput', false)) 
```

这导致

```
result =

   1.0e+03 *

    0.0030    0.0145    0.0650
    0.0500    0.3500    1.2500
    0.0150    0.1500         0 
```

其中每一列代表一个子矩阵的平均值。

另一个使用的解决方案[`blockproc`](http://www.mathworks.de/de/help/images/ref/blockproc.html)（就像@DennisJaheruddin 在评论中建议的那样）可能看起来像这样

```
myFun = @(x) mean(x.data,2);

result2 = blockproc(M, [N, segLen], myFun) 
```

这也导致

```
result2 =

   1.0e+03 *

    0.0030    0.0145    0.0650
    0.0500    0.3500    1.2500
    0.0150    0.1500         0 
```

请注意，如果标志设置为，`blockproc`则可以利用并行处理，即`'UseParallel'``true``result2 = blockproc(M, [N, segLen], myFun, 'UseParallel', true)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T15:56:45.897

你可以为你的例子做

```
mean1 = mean(M(:,1:segLen))
mean2 = mean(M(:,segLen+1:N-segLen-1))
mean3 = mean(M(:,N-segLen:end)) 
```

# hibernate - Spring Roo+Security：在 Spring MVC 中防止嗅探

> ID：15006340
> 
> 赞同：0
> 
> 时间：2013-02-21T15:43:51.013
> 
> 标签：hibernate, spring-mvc, spring-security, spring-roo

我有一个 Table `Role`，我有一个`User`带有密码和一个角色引用的表格。

我现在的问题是：任何人都可以查看和更改用户的角色。

有什么方法可以防止`user.password`Roo-Script 通过 spring-security 访问？

# wpf - WPF 仅数字文本框 - 用事件或命令处理它？

> ID：15006342
> 
> 赞同：2
> 
> 时间：2013-02-21T15:43:53.240
> 
> 标签：wpf, mvvm, mvvm-light

我正在尝试创建一个`TextBox`只允许数字字符和小数点的。我在编写代码时不需要帮助，但在概念上需要帮助。我`MVVM`用来设计`WPF`应用程序，但不确定是使用事件还是事件到命令。

我已经阅读了有关此主题的几种不同观点：

*   *`MVVM`（我发现这有点极端，有些人称之为“适得其反”，但它维护*了`View`. 为防止这种情况，请使用[MVVM Light Library](http://mvvmlight.codeplex.com/)。简而言之，将事件转换为命令，以便在`ViewModel`.
*   *（第二个论点不支持（可能过度）“纯度” `MVVM`）*：并非所有事情都必须在 中处理，`ViewModel`并且可以创建`Events`来处理某些`UI`要求。

由于简单，我更倾向于[第二种选择](https://stackoverflow.com/questions/1268552/how-do-i-get-a-textbox-to-only-accept-numeric-input-in-wpf)，正如我之前所说，第一种选择似乎有点极端。在我的特定情况下（仅创建一个数字`TextBox`），大多数人会更喜欢上述选项还是我没有发现的选项？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T16:01:01.107

您应该将其作为 .cs 文件中的事件处理。您正在尝试在控件中添加功能。就像 TextBox 中的文本一样。它们都在 .cs 文件中处理。ViewModel 负责保存基于该数据的数据和行为，而不是用于控制的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:19:20.290

这应该直接在 View 中处理，而不是涉及 ViewModel，但没有必要重新发明轮子。

根据您的确切数字要求，使用扩展 WPF 工具包中的 DoubleUpDown 或 IntegerUpDown 等控件（可通过 NUGet 获得）

# sitecore - 如何在不打开工作箱的情况下在页面编辑器中使用工作流命令？

> ID：15006345
> 
> 赞同：2
> 
> 时间：2013-02-21T15:43:59.757
> 
> 标签：sitecore, sitecore6

我在 Sitecore 中为我的内容项设置了一个基本工作流程，工作流程状态包括草稿、等待批准和已批准（继续自动发布）。在内容编辑器中，您可以使用审阅选项卡来操作工作流程中的命令，以便我可以从功能区提交。

开箱即用的 sitecore 是否有一个选项可以在页面编辑器中执行此操作而无需打开工作箱？

理想情况下，我希望在页面编辑器功能区中有提交命令操作。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T08:23:57.513

我不知道您使用的是哪个版本的**Sitecore**，但我建议您将解决方案更新到最新版本（**Sitecore 6.6 update 3**）。它确实在页面编辑器功能区下的通知栏中有**提交**/**批准**/**拒绝命令（见附件截图）。**

![Sitecore 6.6 更新 3 - 页面编辑器中的提交按钮](../Images/3559b186ed7312f72026e6b4a51ad273.png)

![Sitecore 6.6 更新 3 - 页面编辑器中的批准和拒绝按钮](../Images/1b0855009561bd0cbf638622e37f0730.png)

# vbscript - 如何在 Windows 2008 Server 中获取群集的 IP 地址

> ID：15006351
> 
> 赞同：-1
> 
> 时间：2013-02-21T15:44:12.063
> 
> 标签：vbscript, wmi, cluster-computing

我创建了一个 vbscript 从服务器获取一堆系统信息，我需要获取的一件事是服务器的 IP 地址。显然我只得到了“心跳IP地址”，这不是我需要的。

有没有一种方法可以让我使用 vbscript 与 wmi 绑定并获取 ip 地址，我假设是私有的。

我试过这个 WMI 类 [http://msdn.microsoft.com/en-us/library/windows/desktop/aa371441(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa371441(v=vs.85).aspx)

这是我所拥有的

```
Option Explicit
'On Error Resume Next

Dim strIPAddress,objItem,colItems,objWMISrvc,strComputer,objAddr

strComputer = "."
Set objWMISrvc = GetObject("winmgmts:{impersonationLevel=impersonate}!\\" & strComputer & "\root\cimv2")

getIPAddress

Sub getIPAddress()
  'Check if system is a cluster'
  strIPAddress = ""
  Set colItems = objWMISrvc.ExecQuery("SELECT * FROM MSCluster_Network")
  If Err.Number <> 0 Then
    For Each objItem in colItems
      'strIPAddress = "IP Address: " & objItem.
      For i = 0 to UBound(objItem.IPv4Addresses)
         strIPAddress = "IP Address (" & i & "): " & objItem.IPv4Addresses(i)
      Next
    Next
  End If
'############################################################
' These are all commented because this is how I WAS getting 
' the ip address but it only returned the heartbeat. 
' I will still be using this if I can somehow tell if a server is a cluster or not.
'If strIPAddress = "" Then
''  Dim i
  '' Set colItems = objWMISrvc.ExecQuery("SELECT * FROM Win32_NetworkAdapterConfiguration")
   'For Each objItem in colItems
    ''  If Not IsNull(objItem.IPAddress) Then
     ''    strIPAddress = objItem.IPAddress(0)
      ''   'For i = 0 to UBound(objItem.IPAddress)
       '' ' '   strIPAddress = strIPAddress & " | " & objItem.IPAddress(i)
        '' Next
     '' End If 
   'Next
'End If

WScript.Echo strIPAddress

End Sub 
```

当我的客户端在他们的集群服务器上运行它时，它提供了一个空的 msgbox，因此它没有提取 IP 地址。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:19:30.623

首先，您需要`mscluster`命名空间，而不是`cimv2`命名空间。

```
Set cluster = GetObject("winmgmts://./root/mscluster") 
```

第二，你需要的地址**是什么？**一个集群通常有多个具有不同 IP 地址范围的网络。该类[`MSCluster_Network`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa371441%28v=vs.85%29.aspx)允许您枚举网络及其网络地址：

```
For Each nw In cluster.ExecQuery("SELECT * FROM MSCluster_Network")
  WScript.Echo nw.Name & vbTab & nw.Address
Next 
```

输出应该是这样的（注意`0`最后一个八位字节中的，它是网络地址，而不是实际的主机地址）：

```
iSCSI   192.168.26.0
Live Migration  192.168.25.0
Management      192.168.23.0
Heartbeat       192.168.24.0 
```

如果您想要单个集群成员的 IP 地址，可以通过[`MSCluster_NetworkInterface`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa371442%28v=vs.85%29.aspx)类获取它们：

```
hostname = "foobar"

For Each iface In cluster.ExecQuery("SELECT * FROM MSCluster_NetworkInterface")
  If Left(iface.Name, Len(hostname)) = hostname Then
    WScript.Echo iface.Name & vbTab & iface.Address
  End If
Next 
```

应该产生这样的输出：

```
foobar - iSCSI-0     192.168.26.17
foobar - Live Migration      192.168.25.23
foobar - Management  192.168.23.42
foobar - Heartbeat   192.168.24.13 
```

# javascript - javascript 的 Google API 客户端是否与 Closure 高级模式编译兼容？

> ID：15006352
> 
> 赞同：1
> 
> 时间：2013-02-21T15:44:12.620
> 
> 标签：javascript, google-closure, clojurescript

大多数情况下，标题说明了一切，但我在图书馆的[文档](http://code.google.com/p/google-api-javascript-client/wiki/GettingStarted)中找不到任何答案。

具体来说，我可以使用 Clojurescript 中的所述库吗？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T10:15:32.870

简短的回答：是的，你可以。

您应该使用[externs](http://lukevanderhart.com/2011/09/30/using-javascript-and-clojurescript.html "使用 Javascript 和 Clojurescript")来描述您想要使用的函数，然后在您的 clojurescript 代码中使用 (:import ..) 让编译器知道您指的是一个 javascript 库。

您不需要为 Google API 客户端做任何特别的事情，同样的原则适用于使用任何 javascript 库（[另请参阅](https://stackoverflow.com/questions/6953820/how-do-i-add-my-own-javascript-libs-to-clojurescript)）。

# sql-server - SQL Server 奇怪的重复键错误

> ID：15006356
> 
> 赞同：1
> 
> 时间：2013-02-21T15:44:26.217
> 
> 标签：sql-server, sql-server-2008-r2

在 SQL Server 2008 R2 中，我有一个简单的表，其中包含以下列定义：

```
Id (PK ,int , not null)
MeterId (FK , int ,not null)
InstallDate(DateTime, not null)
Image(NVarCharMax, null)
Number (int , not null)
Comments(NVarChar(300), null) 
```

并且`Id`列设置为`Identity`。

当我运行时：

```
insert into Transmitters (MeterId, Number, InstallDate)
  values (952, 777 , '2013-02-21') 
```

我收到重复键错误。

没有其他 id 为 777 的发射器，

有一个 id 为 952 的仪表。

这开始发生在我的数据库的多个表中。

任何建议都将是最受重视的。

整个表格脚本是：

```
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [dbo].[Transmitters](
    [Id] [int] IDENTITY(1,1) NOT NULL,
    [MeterId] [int] NOT NULL,
    [InstallDate] [datetime] NOT NULL,
    [Image] [nvarchar](max) NULL,
    [Number] [int] NOT NULL,
    [Comments] [nvarchar](300) NULL,
 CONSTRAINT [PK_Transmitters] PRIMARY KEY CLUSTERED 
(
    [Id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

GO

ALTER TABLE [dbo].[Transmitters]  WITH CHECK ADD  CONSTRAINT [FK_Transmitter_Meter] FOREIGN KEY([MeterId])
REFERENCES [dbo].[Meter] ([Id])
GO

ALTER TABLE [dbo].[Transmitters] CHECK CONSTRAINT [FK_Transmitter_Meter]
GO 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:07:32.893

好的，谢谢你们最有帮助的人。

我使用以下方法检查了我的身份当前值：

```
USE Name_Of_The_DB
GO
DBCC CHECKIDENT (‘Name_Of_The_Table’)
GO 
```

某些行的 Id 值高于当前标识确实是问题的原因。

然后我插入了一行来更新当前的标识值：

```
set identity_insert YourTable ON

--Insert my row

set identity_insert YourTable OFF 
```

谢谢 ：）

# c# - 有什么方法可以让字典存储价值而不是指向价值？

> ID：15006357
> 
> 赞同：0
> 
> 时间：2013-02-21T15:44:29.590
> 
> 标签：c#, dictionary

所以我有一本字典：

```
var tableVars = new Dictionary<string, TableDLL.tableObject>(); 
```

和 tableObject 类：

```
public class tableObject
    {
        public string Name { get; set; }
        public string Type { get; set; }
        public string Value { get; set; }
        public string Default { get; set; }
    } 
```

我经历了这个循环：

```
var obj = new TableDLL.tableObject();
        foreach (XmlNode nodes in root.ChildNodes)
        {
            obj.Value = nodes.InnerText;
            tableVars.Add(nodes.Name, obj);
        } 
```

循环完成后，我有 65 个不同的`Dictionary`条目，但它们都指向`obj`循环中的最后一个。获取`Dictionary`存储值的最佳方法是什么，而不是简单地指向它（因此随着对 的更改而改变`obj`）？我必须`TableDLL.tableObject`为每个`Dictionary`条目制作一个新条目吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T15:46:43.030

将创建移动`obj`到循环中：

```
 foreach (XmlNode nodes in root.ChildNodes)
    {
        var obj = new TableDLL.tableObject();
        obj.Value = nodes.InnerText;
        tableVars.Add(nodes.Name, obj);
    } 
```

否则，您将多次添加*相同的对象。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T15:46:52.063

您只创建一个对象并`Value`使用最后一个节点不断更新。通过更正，您将使用适当的`Value`.

这个：

```
 var obj = new TableDLL.tableObject();
    foreach (XmlNode nodes in root.ChildNodes)
    {
        obj.Value = nodes.InnerText;
        tableVars.Add(nodes.Name, obj);
    } 
```

应该是这样的：

```
 foreach (XmlNode nodes in root.ChildNodes)
    {
        var obj = new TableDLL.tableObject();
        obj.Value = nodes.InnerText;
        tableVars.Add(nodes.Name, obj);
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T15:46:50.737

您只需在循环中创建它：

```
foreach (XmlNode nodes in root.ChildNodes)
{
    var obj = new TableDLL.tableObject();
    obj.Value = nodes.InnerText;
    tableVars.Add(nodes.Name, obj);
} 
```

否则，您总是添加相同的对象。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-21T15:50:36.280

您只创建了 1 个对象，因此列表不可能有 65 个不同的对象。

基本上，你所做的是：

1.  拿一个盒子。
2.  把东西放进盒子里。
3.  现在用另一个东西代替那个东西。

您还没有创建新容器，只是更改了现有容器的内容。

像这样做：

```
 foreach (XmlNode nodes in root.ChildNodes)
    {
        var obj = new TableDLL.tableObject();
        obj.Value = nodes.InnerText;
        tableVars.Add(nodes.Name, obj);
    } 
```

区别在于：

1.  拿一个盒子。
2.  把东西放进盒子里。
3.  **现在拿一个新盒子。**
4.  把其他东西放在新盒子里
5.  ETC...

如果您想要 65 个`tableObject`对象，则需要调用`new tableObject();`65 次。否则，您只是在重用原始对象。

如果您需要，请随时询问更多信息。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-21T15:49:15.833

`tableObject`每次循环创建一个新副本。

```
 foreach (XmlNode nodes in root.ChildNodes)
    {
        var obj = new TableDLL.tableObject();
        obj.Value = nodes.InnerText;
        tableVars.Add(nodes.Name, obj);
    } 
```

# django - 批量存储和提供静态内容的最佳方式

> ID：15006362
> 
> 赞同：1
> 
> 时间：2013-02-21T15:44:35.970
> 
> 标签：django, caching, nginx, varnish, django-flatpages

我有一个生成静态页面的应用程序。说大约 10 个 html 页面/分钟。这些页面将提供给用户。在服务器端，我使用[Django作为](https://www.djangoproject.com/)[Gunicorn](http://gunicorn.org/)的开发框架来运行我的应用服务器，我使用[Nginx](http://wiki.nginx.org/Main)作为“反向代理”。

**有了这个堆栈，我对我的存储和服务内容**设计毫无疑问。我也不确定，如果我的方法会导致我现在无法猜测的任何性能损失。所以这是我对此的看法：

## 贮存

我正在考虑一个基于平面文件的系统来存储内容。它将根据时间戳存储，以便我将来可以清除/删除它们以防内容过期或不需要。所以典型文件的路径看起来像`/var/www/project/content/timestamp/file/path`.

我还检查了 Django [Flatpages](https://docs.djangoproject.com/en/dev/ref/contrib/flatpages/)（Django 中提供的应用程序），它允许使用管理面板和 API 轻松维护平面页面。但这看起来更有希望，

*   固定页数和 `(for me, it's huge and varying)`
*   如果您对页面有任何编辑要求。`(I don't need this)`

## 服务

为了提供内容，我计划通过 Nginx 公开“/var/www/content/”文件夹，以便**Nginx**可以直接提供该内容，而不会受到应用服务器的任何延迟。以防万一，我看到任何性能下降。我可以使用像[Varnish](https://www.varnish-cache.org/)这样的静态文件缓存引擎。

任何建议或想法都会有所帮助。谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T15:46:41.293

我可能会将这些静态文件存储到 S3 的责任转移到 S3 上，并通过 CloudFront 提供服务。

# c - 压缩算法

> ID：15006366
> 
> 赞同：-1
> 
> 时间：2013-02-21T15:44:50.420
> 
> 标签：c, compression, binaryfiles

我正在研究一种压缩算法，其中我们必须用 C 编写代码。该程序获取一个文件并删除每个字符中的最高有效位，并将压缩文本存储在另一个文件中。我编写了一个名为 compress 的函数，如下所示。释放 out_buf 时出现段错误。任何帮助将是一个很大的乐趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T15:50:34.667

您关闭 out_fd 两次，所以第二次当然是无效的文件描述符。但更重要的是，您需要检查 sizeof() 的使用，这与查找动态分配缓冲区的缓冲区大小不同（sizeof 返回指针的大小，而不是缓冲区）。您没有显示调用代码，但是在传入的缓冲区上使用 strcat() 也总是值得一看（调用者传递的缓冲区是否足够大以容纳结果？）。

无论如何，这应该足以让你重新开始......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T15:51:35.520

你关闭了两次相同的文件描述符

```
 close(out_fd);

  if ( close(out_fd) == -1 )
    oops("Error closing output file", ""); 
```

只需删除第一个`close(out_fd)`

分段错误是因为您移动了 out_buf 指针。如果要将值放在他的 malloc 区域内，请使用另一个临时指针并将其移动通过此内存区域。

像这样：

```
unsigned char *out_buf = malloc(5400000*7/8);
unsigned char *tmp_buf = out_buf; 
```

然后`*out_buf++`用`*tmp_buf++`;

也改变`out_buf`里面的写调用`tmp_buf`

# android - 点击弹跳按钮

> ID：15006369
> 
> 赞同：8
> 
> 时间：2013-02-21T15:45:07.070
> 
> 标签：android, android-animation, android-button

有人知道是否有任何 xml 动画可以使按钮弹跳几秒钟。如果你可以分享一些例子......

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-21T16:34:49.540

这是一个使用 ObjectAnimator 的简单方法。如果您希望它在蜂窝之前工作，您可以使用相同的语法并使用[视图动画](http://developer.android.com/guide/topics/graphics/view-animation.html)来完成，或者使用[NineOldAndroids。](http://nineoldandroids.com/)

```
ObjectAnimator animY = ObjectAnimator.ofFloat(button, "translationY", -100f, 0f);
animY.setDuration(1000);//1sec
animY.setInterpolator(new BounceInterpolator());
animY.setRepeatCount(numRepeats);
animY.start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T15:48:46.063

[在这里](http://android-developers.blogspot.ca/2011/05/introducing-viewpropertyanimator.html)查看一些使用ViewPropertyAnimator的[示例](http://developer.android.com/reference/android/view/ViewPropertyAnimator.html)动画。如果你想在 HoneyComb 下面的 API 上使用它，你应该尝试使用[NineOldAndroids](http://nineoldandroids.com/)，它是 HoneyComb 动画的一个端口来降低 API。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-26T12:31:05.030

```
 <set xmlns:android="http://schemas.android.com/apk/res/android"
    android:fillAfter="true"
    android:interpolator="@android:anim/bounce_interpolator">

    <scale
        android:duration="500"
        android:fromXScale="0.5"
        android:toXScale="1.0"
        android:fromYScale="0.5"
        android:toYScale="1.0"
        android:pivotX="50%"
        android:pivotY="50%" />
</set> 
```

上面的动画代码放在 anim 文件夹中，并使用 java 代码将其设置为任何视图：

```
Animation animation = AnimationUtils.loadAnimation(this,R.anim.bounce);
textview.startAnimation(animation); 
```

# c - 整页 Malloc

> ID：15006372
> 
> 赞同：5
> 
> 时间：2013-02-21T15:45:15.463
> 
> 标签：c, memory, malloc, page-size

我试图通过一次使用整个页面来优化我的程序的内存分配。

我正在像这样抓取页面大小：`sysconf(_SC_PAGESIZE);`然后计算适合这样页面的元素总数：`elements=pageSize/sizeof(Node);`

我在想，当我真正去 malloc 我的记忆时，我会使用`malloc(elements*sizeof(Node));` 它似乎 sifeof(Node) 的乘法和除法会抵消，但是对于整数除法，我不认为是这种情况。

这是一次 malloc 整个页面的最佳方式吗？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T16:37:47.387

该`malloc`函数没有任何页面大小的概念。除非您分配的页面也与页面边界对齐，否则您不会从`malloc`以这种方式调用中获得任何好处。尽可能多的元素，不要`malloc`再担心微优化几乎肯定不会给你带来任何好处的东西。

是的，Linux 内核一直在做这样的事情。有两个原因：

1.  您不想分配比页面更大的块，因为这会显着增加分配失败的风险。
2.  内核分配是按页进行的，而不是像 C 库那样一次性分配大量内存，然后将其拆分为小组件。

如果您真的想分配页面大小的内存量，请使用结果`sysconf(_SC_PAGESIZE)`作为您的大小参数。但几乎可以肯定，您的分配跨越了两页。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-21T17:01:12.663

您的计算`elements=pageSize/sizeof(Node);`不考虑`malloc()`添加到由`malloc()`. 在许多情况下，`malloc()`将返回一个可能至少在`min(sizeof(double),2 * sizeof(void *))`边界上对齐的内存块（顺便说一句，32 字节变得非常普遍......）。如果`malloc()`在页面上对齐一个内存块，添加它的块（带填充），然后写入完整页面大小的数据，最后一个字节离开第一页：所以你最终会使用 2 页。

想要一整页，只为你，不用担心浪费内存，不使用`mmap()`/`VirtualAlloc()`评论中的建议？给你：

```
int ret;
void *ptr = NULL;
size_t page_size = sysconf(_SC_PAGESIZE);

ret = posix_memalign(&ptr, page_size, page_size);
if (ret != 0 || ptr == NULL) {
    fprintf(stderr, "posix_memalign failed: %s\n", strerror(ret));
} 
```

顺便说一句，这可能与微优化有关。你可能还没有检查你`Node`的缓存线的大小倍数，也没有检查如何提高缓存局部性，也没有找到减少内存碎片的方法。所以你可能走错了路：首先让它工作，分析，优化你的算法，分析，最后一个选项进行微优化。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-03-21T16:35:16.497

C11 标准添加了[aligned_alloc](http://en.cppreference.com/w/c/memory/aligned_alloc)调用，因此您可以执行以下操作：

```
#include <stdlib.h>
#include <unistd.h>

void *alloc_page( void )
{
    long page_size = sysconf( _SC_PAGESIZE );  /* arguably could be a constant, #define, etc. */

    return ( page_size > 0 ? aligned_alloc( page_size, page_size ) : NULL );
} 
```

正如其他人指出的那样，这种方法的问题在于，标准分配调用的实现通常会增加一些记账开销，这些开销存储在分配的内存之前。因此，这种分配通常会跨越两页：返回的页面供您使用，以及分配器簿记使用的另一页的最后。

这意味着当您释放或重新分配此内存时，它可能需要触摸两页而不仅仅是一页。此外，如果您以这种方式分配全部或大部分内存，那么您可能会“浪费”大量虚拟内存，因为在操作系统级别分配给您的进程的大约一半页面只会用于分配器的簿记中的一小部分.

通常很难说这些问题有多重要，但最好以某种方式避免它们。不幸的是，我还没有想出一个干净、简单、便携的方法来做到这一点。

===============================

附录：如果您可以动态计算出 malloc 的内存开销并假设它始终是恒定的，那么要求更少通常会给我们想要的东西吗？

```
#include <stdlib.h>
#include <unistd.h>

/* decent default guesses (e.g. - Linux x64) */

static size_t Page_Size       = 4096;
static size_t Malloc_Overhead = 32;

/* call once at beginning of program (i.e. - single thread, no allocs yet) */

int alloc_page_init( void )  
{
    int     ret       = -1;
    long    page_size = sysconf( _SC_PAGESIZE );
    char   *p1        = malloc( 1 );
    char   *p2        = malloc( 1 );
    size_t  malloc_overhead;

    if ( page_size <= 0 || p1 == NULL || p2 == NULL )
        goto FAIL;

    malloc_overhead = ( size_t ) ( p2 > p1 ? p2 - p1 : p1 - p2 );  /* non-standard pointer math */

    if ( malloc_overhead > 64 || malloc_overhead >= page_size )
        goto FAIL;

    Page_Size       = page_size;
    Malloc_Overhead = malloc_overhead;
    ret             = 0;

FAIL:
    if ( p1 )
        free( p1 );

    if ( p2 )
        free( p2 );

    return ret;
}

void *alloc_page( void )
{
    return aligned_alloc( Page_Size - Malloc_Overhead, Page_Size - Malloc_Overhead );
} 
```

回答：可能不是，因为例如，“作为“由实现支持”要求的示例，POSIX 函数 posix_memalign 接受任何对齐方式，它是 2 的幂和 sizeof(void *) 的倍数，并且基于 POSIX aligned_alloc 的实现继承了这些要求。”

上面的代码可能不会要求对齐是 2 的幂，因此在大多数平台上可能会失败。

对于标准分配函数的典型实现来说，这似乎是一个不可避免的问题。因此，最好只根据页面大小对齐和分配，并可能支付分配器记账驻留在另一个页面上的代价，或者使用诸如 mmap 之类的操作系统特定调用来避免此问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T18:44:23.193

`malloc`该标准甚至没有提供页面大小概念的保证。但是，当请求的分配大小为页面大小（或更大）的数量级时，malloc 实现分配整个页面的情况并不少见。

要求分配恰好等于页面大小（或页面大小的倍数）并自己细分它当然没有什么害处，尽管这是一些额外的工作。至少在某些机器/编译器/库组合上，您可能确实得到了您想要的行为。但你也可能不会。如果您绝对需要页面大小的分配和/​​或页面对齐的内存，则必须调用特定于操作系统的 API 来获取它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-03-21T17:09:42.460

如果您的问题是关于如何分配整个内存页面：使用`mmap()`，而不是`malloc()`.
*原因：*
`malloc()`必须总是在每次分配中添加一些元数据，所以如果你这样做`malloc(4096)`肯定会分配不止一个页面。`mmap()`另一方面，是**内核的**API，用于将页面映射到您的地址空间。这是`malloc()`在引擎盖下使用的东西。

如果您的问题是关于正确的舍入：四舍五入`a`到倍数的常用技巧`N`是说`rounded = (a + N-1)/N*N;`. 通过`N-1`首先添加，您可以确保除法在所有情况下都会四舍五入。如果`a`已经是 的倍数`N`，则相加`N-1`无效；在所有其他情况下，你得到的比 with 多一个`rounded = a/N*N;`。

# java - GWT StoreFilterField - 自动过滤器

> ID：15006376
> 
> 赞同：0
> 
> 时间：2013-02-21T15:45:25.710
> 
> 标签：java, gwt, event-handling, widget, gxt

我想在文本字段中过滤没有类型的树，但是在触发事件时。我尝试像这样子类化 StoreFilterField：

```
class MyStoreFilter<M extends ModelData> extends StoreFilterField<M>{
public MyStoreFilter() {
            super();
        }

        public void startFilter(){
            super.onFilter();
        }

        @Override
        protected boolean doSelect(Store<M> store, M parent, M record,
                String property, String filter) {
            String name = record.get("name");
            name = name.toLowerCase();
            if (name.startsWith(filter.toLowerCase())) 
                return true;
            else
                return false;
        }

    }; 
```

当我想过滤我的树时：

```
MyStoreFilter<ModelData> f=new MyStoreFilter<ModelData>();
f.setRawValue(myText);
f.bind(store);
f.startFilter(); 
```

但不起作用，我的过滤器显示了我树的所有项目。怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:14:52.907

我解决了自己添加这个构造函数的问题：

```
public MyStoreFilter(String f)  {
    filtro=f;
    setAutoValidate(true);
    setValidateOnBlur(false);
    setTriggerStyle("x-form-clear-trigger");
    filter = new StoreFilter<M>() {
      public boolean select(Store<M> store, M parent, M model, String property) {
        String v = filtro;
        return doSelect(store, parent, model, property, v);
      }
    };
} 
```

# jquery - 不显眼的验证：如何在将文本框内容验证为数字之前运行 javascript？

> ID：15006377
> 
> 赞同：1
> 
> 时间：2013-02-21T15:45:28.967
> 
> 标签：jquery, unobtrusive-validation

我有一个由扫描仪填充的文本框，它插入额外的空格、换行符、制表符等。我需要在触发验证之前清理它们。我的代码：

```
[Integer(ErrorMessage = "Survey ID must be a number.")]
public long? SurveyRecipientID { get; set; }

@Html.ValidationMessageFor(m => m.SurveyRecipientID)
@Html.LabelFor(m => m.SurveyRecipientID, "Survey ID")
@Html.TextBoxFor(m => m.SurveyRecipientID) 
```

# c# - AccessibleName 属性的 WPF 等效项

> ID：15006379
> 
> 赞同：6
> 
> 时间：2013-02-21T15:45:47.810
> 
> 标签：c#, wpf, accessibility

[`Control.AccessibleName`在 WinForms 应用程序中，可以使用属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.accessiblename.aspx)为可访问性客户端命名控件。

WPF 控件缺少此属性，所以我想知道如何为 WPF 应用程序中的控件提供可访问的名称。

* * *

我已经阅读了文档，我知道这一切都随着改变了，`UIA`但我仍然找不到改变这个属性的方法。如[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/gg712258.aspx)中所述，有两个必需的属性：

*   姓名
*   自动化 ID

我能找到`Automation ID`但找不到名字。它藏在哪里？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-23T03:50:11.930

[`AutomationProperties.Name`](http://msdn.microsoft.com/en-us/library/system.windows.automation.automationproperties.name%28v=vs.95%29.aspx)是您要查找的附加属性。

您可以直接在 XAML 中指定它：

```
<object AutomationProperties.Name="name" .../> 
```

或者在 AutomationProperties 上使用 getter/setter：

```
using System.Windows.Automation;
...
AutomationProperties.SetName(control, "name"); 
```

...或者...

```
control.SetValue(AutomationProperties.NameProperty, "name"); 
```

# php - 替代 readfile()

> ID：15006380
> 
> 赞同：2
> 
> 时间：2013-02-21T15:45:53.403
> 
> 标签：php, amazon-s3, amazon-ec2, readfile

我目前正在使用以下代码从我的 Amazon S3 帐户下载文件。

```
if(isset($_POST['file_name'])) {
$bucket = $_POST['bucket'];
$fname = $_POST['file_name'];
$accessKey = 'AKIAIEHFBME6F5Q62FTQ';
$secretKey = '<REMOVED>';
$file_type = pathinfo($fname, PATHINFO_EXTENSION);

$mp3_url = el_s3_getTemporaryMP3Link($accessKey, $secretKey, $bucket, $fname);    
$zip_url = el_s3_getTemporaryZipLink($accessKey, $secretKey, $bucket, $fname);

if ($file_type === "mp3") {
    header('Content-type: audio/mpeg3');
    header('Content-Disposition: attachment; filename="themixtapesite_'.$fname.'"');
    readfile($mp3_url);
    exit();
} else if ($file_type === "zip") {
    header('Content-type: application/zip');
    header('Content-Disposition: attachment; filename="themixtapesite_'.$fname.'"');
    readfile($zip_url);
    exit();
} else {
    echo "Sorry, File does not exist";
} 
```

}

如您所见，它检查文件扩展名是什么，然后将相关的 url 传递给`read file()`

我使用 S3 的全部目的是减轻我的 EC2 服务器负载。但是，似乎使用这种方法来下载文件，它通过 EC2 服务器从 S3 中提取文件（通过 iStat 监控服务器负载显示下载文件时活动增加）。

有没有另一种方法可以直接从 S3 下载文件，而不是通过 EC2 服务器？

更新：只是一个快速更新——我使用的是 Nginx 而不是 apache，所以如果有人想建议的话，没有 .htaccess。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:54:53.393

如果您有可公开访问的网址或签名网址。您可以使用位置重定向将其直接传递给客户端。

`header('Location: ' . $myUrl);`

# tomcat - ColdFusion 10 服务器端重定向

> ID：15006387
> 
> 赞同：1
> 
> 时间：2013-02-21T15:46:08.950
> 
> 标签：tomcat, iis, iis-7, coldfusion, coldfusion-10

我正在将应用程序从 ColdFusion 9 移动到 ColdFusion 10，并且我在服务器端重定向时遇到了一些奇怪的行为`getPageContext().forward()`。该应用程序使用 Halicon IIS 重写模块 ( [http://www.isapirewrite.com/](http://www.isapirewrite.com/) ) 部署在 IIS 上。在 CF9 中，尝试将服务器端重定向到类似 url 的`local.site.com/article/monday`工作正常。（网址由 url rewrites 重写以实际转到类似的`local.site.com/index.cfm?page=article&title=monday`内容。但是在 CF10 中，我不确定发生了什么，但我的页面都以`//index.cf`. 的形式出现。对正在发生的事情有什么想法吗？

# virtualhost - 如何为本地计算机设置自定义网站名称而不是 IP 地址？

> ID：15006397
> 
> 赞同：0
> 
> 时间：2013-02-21T15:46:30.140
> 
> 标签：virtualhost

我可以通过设置 /etc/host 和 /private/etc/apache2/extra/httpd-vhosts.conf 文件将 url 指向我计算机中的目录。例如，当我在计算机中键入 sample-app.com 时，/Users/azad/works/sample-app.com 文件夹下的网站正在运行。

当有人在同一本地网络中的另一台计算机上键入 sample-app.com 时，我想显示位于我计算机上的同一网站。这可能吗？

顺便说一句，我无法访问本地网络中的任何计算机，也无法进行任何配置。

Mac 10.7.5（我使用的是 mac，但如果 windows 更适合这个目的，我也可以使用 windows），PHP 5.3，Apache 2.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T15:50:22.453

如果您想在 Windows 上完成此操作，请使用您要指向该 sample-app.com URL 的计算机上的 hosts 文件，将您的 IP 地址映射到您希望其工作的所有计算机中的该 URL。然后确保您的 HTTP 服务器配置为在该主机名下为端口 80 提供该网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T15:53:13.963

由于您无法配置本地网络，因此处理这种情况的最佳方法是使用网站域的 DNS 服务器配置主机名，例如 dev.sample-app.com，它指向本地 IP 地址 (看它是如何在本地网络上）托管网站的计算机。然后，这将允许本地网络上的其他计算机输入此主机名来访问网站。

如果您控制了本地网络的 DNS 服务器或控制了代理（如果他们有代理），那么当然还有其他选择。

**更新：** 由于您在评论中提到您可以控制 DNS 服务器，因此您可以通过以下方式通过 DNS 服务器实现目标。`sample-app.com`首先，为DNS 服务器添加一个正向查找区域。其次，将区域的默认主机配置为指向提供网站内容的计算机。`sample-app.com`现在，当用户进入其 Web 浏览器时，客户端计算机将解析本地 IP 。如果您需要继续访问 sample-app.com 上的其他主机，您可能想尝试在 serverfault 上询问它。

# c# - AutoCompleteBox 从 HttpWebRequest 加载数据

> ID：15006398
> 
> 赞同：0
> 
> 时间：2013-02-21T15:46:30.587
> 
> 标签：c#, windows-phone-7, silverlight-toolkit, autocompletebox

我想必须`AutoCompleteBox`通过服务器上的请求来完成地址。我有这个方法来填充我的 AutoCompleteBox：

```
private async void getNearStreets()
        {
            if (acbAddress.Text.Length > 2)
            {
                ApiRequest request = new ApiRequest("hintAddress", new HintAddress(appSettings.InstanceId, acbAddress.Text, appSettings.SmsCode));
                var postData = JsonConvert.SerializeObject(request);
                var response = await HttpHelper.SendRequestGetResponse(postData);
                ApiResponseTest apiResponse = (ApiResponseTest)JsonConvert.DeserializeObject<ApiResponseTest>(response);
                var wordList = this.Resources["autoCompleteWordList"] as AutoCompleteWordList;
                wordList.Clear();
                foreach (var adresa in apiResponse.data.result)
                {
                    HintAddressResponse adrResponse = (HintAddressResponse)JsonConvert.DeserializeObject<HintAddressResponse>(adresa.ToString());
                    wordList.Add(adrResponse.street);
                }
            }
        } 
```

这是我的课：

```
public class AutoCompleteWordList : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;
    private ObservableCollection<string> _listOfAddresses;
    public ObservableCollection<string> ListOfAddresses
    {
        get { return _listOfAddresses; }
        set
        {
            _listOfAddresses = value;
            if (PropertyChanged != null)
                PropertyChanged(this, new PropertyChangedEventArgs("ListOfAddresses"));
        }
    }

    public AutoCompleteWordList()
    {
        ListOfAddresses = new ObservableCollection<string>();
    }

    public void Add(string address)
    {
        ListOfAddresses.Add(address);

    }

    public void Clear()
    {
        ListOfAddresses.Clear();
    }
} 
```

并查看：

```
<phone:PhoneApplicationPage.Resources>
    <data:AutoCompleteWordList x:Key="autoCompleteWordList" />
</phone:PhoneApplicationPage.Resources>

<toolkit:AutoCompleteBox x:Name="acbAddress" VerticalAlignment="Top"
                             ItemsSource="{Binding Source={StaticResource autoCompleteWordList}, Path=ListOfAddresses}" 
                             TextChanged="acbAddress_TextChanged"/> 
```

我的问题是我正在下载数据，我将它们添加到集合中，但 DropDownDialog 没有出现。我想我必须提醒我有新数据，但我不知道如何。感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:09:24.577

当我第一次查看 msdn 时，我错过了 PopulateComplete 方法。但这是我需要的，当我在我的方法结束时添加它时它可以工作。

# c++ - C++：列表迭代器与向量迭代器

> ID：15006403
> 
> 赞同：2
> 
> 时间：2013-02-21T15:46:41.987
> 
> 标签：c++, stl, iterator, containers

我认为迭代器对象的想法是您可以将其类似地应用于 C++ 容器类。但是，当我尝试遍历列表对象时，我尝试使用

```
for(list<int>::iterator it = obj.begin(); it < obj.end(); it++){
    // some code
} 
```

我得到了一个错误。为什么这不起作用？为什么它会起作用`vector::iterator`？仅仅是因为list的实现是双向链表吗？我认为迭代器对象抽象了通过容器移动的概念，从而允许它在操作上是相同的，无论是对于向量还是列表。

我真的很感激澄清。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T15:48:16.257

这不起作用，因为与`std::vector`迭代器不同，`std::list`迭代器不是随机访问的——它们是顺序的。您需要`!=`在它们上使用：

```
for(list<int>::iterator it = obj.begin(); it != obj.end(); it++) 
```

通常，当您希望覆盖整个范围时，最好在所有迭代器上使用“不等于”，即使这些迭代器允许比较`<`和`>`。还有一个支持`!=`在常规`for`循环中使用的论点，因为它为您提供了最强的[*后置条件*](http://en.wikipedia.org/wiki/Postcondition)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T15:49:15.693

您必须进行比较，`!=`因为列表迭代器以随机顺序分散在所有内存中。

采用：`for(list<int>::iterator it = obj.begin(); it != obj.end(); it++)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T15:49:31.033

那是因为`list`不支持*随机访问*迭代器，而只支持*前向*迭代器。因此，`operator <`没有为 a 的迭代器定义`list`。您必须`operator !=`用于不等式比较。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T15:49:56.963

运算符算术，包括排序比较运算符（如`<`），仅为随机访问迭代器定义。如果您将代码更改为 use `!=`，它将起作用（假设`obj`是 a `list<int>`）：

```
for(list<int>::iterator it = obj.begin(); it != obj.end(); it++){
    // some code
} 
```

# magento - Magento：使用自定义电子邮件模板更改发送状态

> ID：15006405
> 
> 赞同：3
> 
> 时间：2013-02-21T15:46:45.277
> 
> 标签：magento, magento-1.9

我正在对 Magento 的 PayPal 扩展进行一些改进，并且我已设置模块在订单状态更改后向客户发送电子邮件。我已将以下代码用于 PayPal 订单控制器中的每个不同状态：

```
$order->sendOrderUpdateEmail();
$order->setEmailSent(true); 
```

我想为每个状态发送自定义电子邮件模板，例如，当订单被取消时，客户会收到以下消息：*“亲爱的客户，我们通知您，您的订单 #123456 已因某种原因被取消......”* . 如何使用上述设置 Magento 的功能发送电子邮件，调用我为该特定案例创建的自定义模板？是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T16:01:26.373

发送您的自定义电子邮件模板的示例：

```
public function sendCustomMail()
{
    $emailTemplate  = Mage::getModel('core/email_template');
    $emailTemplate->loadDefault('custom_template_name');
    $emailTemplate->setTemplateSubject('my subject here');
    // Load from magento config..
    $email = Mage::getStoreConfig('trans_email/ident_general/email');
    $name = Mage::getStoreConfig('trans_email/ident_general/name');

    $emailTemplate->setSenderName($name );
    $emailTemplate->setSenderEmail($email);

    // Add some custom variables here to pass into the template.
    $emailTemplateVariables['username']  = ' something';
    $emailTemplateVariables['store_url'] = Mage::getBaseUrl(Mage_Core_Model_Store::URL_TYPE_WEB);
    $emailTemplate->send('customer@domain.com', 'name...', $emailTemplateVariables);
} 
```

您还需要将自定义模板添加到模块配置中

**配置文件**

```
<config>
    ...
    <global>
        ...
        <template>
            <email>
                <custom_template_name module="Namespace_Module">
                    <label>Custom Template</label>
                    <file>mycustomtemplate.html</file>
                    <type>html</type>
                </custom_template_name>
            </email>
        </template>
    </global>
</config> 
```

然后，您可以与其他人一起添加您的自定义电子邮件模板

**/app/locale/en_US/template/email/mycustomtemplate.html**

```
<h1>Dear {{var username}}</h1>
<p>bla bla </p>
<div>{{var storename}} ({{var store_url}})</div> 
```

# c++ - 如何在 Win32 c++ 应用程序中将 OpenCV 显示窗口添加为另一个窗口的子窗口？

> ID：15006409
> 
> 赞同：4
> 
> 时间：2013-02-21T15:46:50.363
> 
> 标签：c++, opencv, win32gui

我有一个帧抓取器（Silicon Software），我设法使用 OpenCV 从内存缓冲区中的指针显示抓取的图像。

现在我想创建一个应用程序（Win32）并将 openCV 窗口作为主应用程序窗口的子窗口。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T11:12:55.730

我找到了答案，太简单了。就几行代码。这里是 ：

```
cv::namedWindow("test",cv::WINDOW_AUTOSIZE);                        
hWnd2 = (HWND) cvGetWindowHandle("test"); 
hParent = ::GetParent(hWnd2);       
::SetParent(hWnd2, hParent); 
::ShowWindow(hParent, SW_HIDE); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T17:06:11.070

如果您想要自己的窗口，最好跳过整个 highgui 的内容，并自己进行 blitting。

看看 cvShowImage() 的 src，highgui/src/window_w32.cpp,l 1384，看看，他们在这里做什么

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T10:47:25.483

不知道“子窗口”的确切含义，但您可以从 OpenCV 的 IplImage 格式中获取像素信息，并将其转换为您的窗口所需的任何格式。

# php - iframe xss 保护不同域

> ID：15006415
> 
> 赞同：0
> 
> 时间：2013-02-21T15:47:02.457
> 
> 标签：php, javascript, html, xss

几天前我发现了这个网站：[http](http://hsmaker.com/) ://hsmaker.com/ 我注意到它适用于任何 http 网站（我检查了大约 50 个常见网站）。它将 url 的内容提取到 iframe 中，然后，我假设它操纵 DOM 对象添加一些 js 运动效果。

我想做同样的事情（一个更有用的应用程序），但这种行为不应该被禁止吗？我的意思是我之前已经尝试过操作 dom 对象，但是下面的代码对我不起作用（但他可以获取 http google.com - NOT https）：

```
<!DOCTYPE html>
<html>
    <head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    </head>
    <body>
        <iframe style="width:100%; height:800px;" src="http://www.google.com"></iframe>
    </body>
</html> 
```

PS 如果目标网站在 https 上，整个故事会改变吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T15:59:32.040

hsmaker.com 没有使用 iframe，它们充当代理。

像 google 这样的网站不能在 iframe 中运行的原因是因为它们已`x-frame-option`设置为`forbidden`.

不，即使使用 https，它仍然可以工作。

# java - Java 在方法调用中声明一个字符串数组

> ID：15006416
> 
> 赞同：1
> 
> 时间：2013-02-21T15:47:03.387
> 
> 标签：java, string, methods

我试图在方法调用中声明一个字符串数组，如下所示：

```
if (emailYaml.keySet().containsAll(new String[]{"mailto","subject","text"})) 
```

我不完全确定这是否是最好的方法（我对编程很陌生），但无论如何 Eclipse 告诉我：

```
The method containsAll(Collection<?>) in the type Set<String> is not applicable for the arguments (String[]) 
```

有人可以帮忙解决吗？

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T15:50:21.473

数组不是`Collection`. 将其转换`List`为例如，然后将其传递给`containsAll`：

```
.containsAll(Arrays.asList(new String[] {"mailto", "subject", "text"})) 
```

甚至更简单，因为`asList`将 vararg 作为参数：

```
.containsAll(Arrays.asList("mailto", "subject", "text")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T15:48:44.727

包含所有接受的集合。

从[文档](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)：

```
containsAll(Collection<?> c) 
```

试试这个：

```
if (emailYaml.keySet().containsAll(Arrays.asList("mailto","subject","text")) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T15:48:45.970

[`containsAll()`](http://docs.oracle.com/javase/6/docs/api/java/util/Collection.html#containsAll%28java.util.Collection%29)期望 a`Collection`并且您正在传递一个数组，因此您的编译器会抱怨。

```
if (emailYaml.keySet().containsAll(Arrays.asList(new String[]
  {"mailto","subject","text"}))) 
```

# apache - 在 Mac osx 或 windows 上安装 ESI（用于 localhost 测试）

> ID：15006422
> 
> 赞同：1
> 
> 时间：2013-02-21T15:47:15.167
> 
> 标签：apache, include, akamai, esi

希望一些服务器端专家可以回答这个问题或为我指明正确的方向。

我们在公司网站设置中使用 Akamai。因此，“ESI”文件被广泛使用。

我在 Mac osx 上安装了带有 bitnami 软件包的“mamp”。如何在我的 apache 之上添加 esi 功能？

许多谷歌搜索表明也许 squid 代理或清漆代理可以允许此功能。这是对的吗？当没有域名并且没有实时公开的东西，只有我自己的机器时，我可以在“本地主机”的情况下使用这些吗？

欣赏任何见解。也许我在谷歌上搜索错了。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-07T22:13:59.760

是的，您应该可以为此使用 Varnish。虽然 Varnish 不支持您可以使用 Akamai 的 ESI 处理进行的所有自定义标签，但直接的标准 ESI 标签可以工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-21T23:12:24.103

如果您需要使用更多的 ESI 语言而不仅仅是包含（HTTP 标头、ESI 变量等），我建议在本地 VM 上使用 Akamai 的[ESI 测试服务器。](http://www.akamai.com/html/support/esi.html)

# javascript - 通过设置 JQuery-UI 范围滑块的值来触发事件

> ID：15006423
> 
> 赞同：0
> 
> 时间：2013-02-21T15:47:17.557
> 
> 标签：javascript, jquery, jquery-ui, uislider, rangeslider

我用以下行设置了我的范围滑块的两个值：`$('...').slider( 'values', [ 0, 10000 ] );`现在我遇到了问题，该行触发了两次`change( event, ui )`- 事件。有没有一种只能触发一次的解决方法？或者我可以使用/创建其他事件来解决问题吗？

我只是想避免发送两次大量数据的ajax请求

感谢您的回复！

彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:31:49.650

这里有一篇文章：在[不触发更改事件的情况下设置滑块值](http://forum.jquery.com/topic/setting-a-sliders-value-without-triggering-the-change-event)

如果在脚本中设置值时应用类似的内容，则可以在更改处理程序之外并在设置滑块值之后调用 ajax 请求。

# makefile - 如何阻止 GNU make 创建“安装”

> ID：15006427
> 
> 赞同：0
> 
> 时间：2013-02-21T15:47:20.847
> 
> 标签：makefile

我注意到，如果你有一个 Makefile，即使是一个空文件，如果你有一个名为“install.sh”的文件，调用“make install”会导致 make 将“install.sh”复制到“install”并设置其权限. 我怎样才能防止这种情况发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T17:08:32.883

用期权看涨`make`期权`-r`，即`make -r install`。这将禁用预定义规则。

**编辑**

当然，您也可以只覆盖 shell 规则。只需添加

```
 %: %.sh
      # empty line 
```

到你的`Makefile`.

# groovy - 制作 Java 库“Groovy”

> ID：15006428
> 
> 赞同：6
> 
> 时间：2013-02-21T15:47:21.547
> 
> 标签：groovy

我爱上了 Groovy 并尝试越来越多地使用它。现在我必须使用 Oracle Forms Jdapi 库。使用这个库时，你会写很多这样的代码：

```
JdapiIterator progIterator = getWorkForm().getProgramUnits();
while(progIterator.hasNext()) {
    ProgramUnit currProgUnit = (ProgramUnit) progIterator.next();
    ...
} 
```

当然我想写

```
getWorkForm().programUnits.each {
    ...
} 
```

但是，我从来没有为现有的 Java 库编写过 Groovy 接口，因此需要一些帮助。我知道[Groovy 2.0 的扩展方法](http://groovy.codehaus.org/Groovy+2.0+release+notes#Groovy20releasenotes-Extensionmodules)，但在这种情况下，我正在考虑一个在不同命名空间中具有相同名称的类，它只委托给我想要保留的函数。

提供功能的最佳方法是什么，以及`each`适用于集合的所有其他闭包？如果您指出我正确的方向，我将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T17:37:58.680

您需要提供的唯一方法就是`iterator()`方法。然后，您将免费获得所有 Groovy 对象迭代方法（`each()`、`find()`、`any()`、`every()`、`collect()`、 ...）！

# image - 无损JPEG文件写入

> ID：15006430
> 
> 赞同：4
> 
> 时间：2013-02-21T15:47:27.567
> 
> 标签：image, image-processing, jpeg, lossless-compression

我有一个关于 JPEG 文件写入的问题。假设我有一个 PNG 文件 example.png，我想将文件格式更改为 JPEG，而不会丢失任何信息。目前，我有两个解决方案：

*   解决方案 1：使用 MATLAB 执行文件格式转换

    我 = imread('example.png');

    imwrite(I,'example.jpg','Mode','无损');

    II = imread('example.jpg');

    不同 = I-II;

    最大（不同（:)）

    此解决方案可以生成无损 JPEG 文件。但是，这种解决方案的问题是可能会丢失原始图像中的某些信息，例如 DPI 分辨率。此外，IrfanView 和 Windows Paint 等流行的图像查看器无法查看生成的输出图像。

*   解决方案 2：使用 IrfanView 软件。使用 IrfanView 程序的“另存为”功能，我们可以非常轻松地更改文件格式。但是，虽然我在保存 JPEG 文件时设置了“最佳质量 100”选项，但输出图像也显示出一些信息丢失。对于所有像素，这两个图像之间的差异并非为零。

因此，我想知道我应该怎么做才能解决这个问题。任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-01-21T22:56:28.593

这个问题没有解决方案（截至 2018 年）。

如果您希望 JPEG 文件在大多数图像查看器中可用，则无法避免使用有损压缩。

普遍支持的 JPEG 版本基于 DCT 压缩，根据定义，它执行的转换和舍入会导致一些精度损失。

很少支持另一种无损 JPEG 压缩方法 JPEG-LS。

还有 JPEG-XT 扩展，它是有损图像 + 层的组合，用于重建无损原件。它在 JPEG 图像查看器中正常失败，但它甚至更新，我不知道它是否已在任何地方实现。

如果您真的需要无损，请使用PNG。使用 JPEG，您可以获得的最佳效果是 RGB 颜色空间中质量 = 100（实际上不是 100%）的最小损耗 JPEG。

# asp.net-mvc - 在 Asp.net MVC 中将值从视图传递到控制器

> ID：15006434
> 
> 赞同：1
> 
> 时间：2013-02-21T15:47:37.343
> 
> 标签：asp.net-mvc, view, viewbag

我正在尝试将消息传递给另一个视图（实际上是相同的控制器）我可以做得很好，但是对我来说有问题..

我是网络新手，看起来不太好..

![问题](../Images/f26fd9da4e2e8fa72c8f81745350a37b.png)

这里是我的 c# 代码

```
if (createStatus == MembershipCreateStatus.Success)
{        
     string registrationMessage = "You have registered successfully";

     return RedirectToAction("KurumsalGiris", new { message = registrationMessage }); 
}

[AllowAnonymous] //sonradan eklendi
public ActionResult KurumsalGiris(string message="")
{

    if (User.Identity.IsAuthenticated)
        return Content("Zaten giriş yapmışsınız");

    ViewBag.RegistrationMessage = message;

    return View();
} 
```

这里是 html 方面

```
@model E_Cv.Models.LogOnModel

@{
    ViewBag.Title = "Kurumsal Giriş";
}

<h2>Kurumsal Giriş</h2>

<h2>@ViewBag.RegistrationMessage</h2>

<p>
  Please enter your user name and password.
  @Html.ActionLink("Yeni Kurum Kaydı", "KurumsalKayit")
   if you don't have an account.
</p> 
```

所以我不知道如何以不同的方式将值传递给另一个视图。我不想在地址栏上显示这种消息并且用户必须更改它。

其次，我可以用“获取”方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T15:56:27.927

你为什么不只是返回一个不同的视图而不是重定向？事实上，首先发布的代码应该发布到一个控制器，该控制器返回一个成功登录的视图。

事实上，如果用户刚刚登录，您为什么要重定向到要求用户登录的页面？

其他可能的选项包括加密 URL 中的字符串，或者只是在 URL 中传递一个标志，控制器将其转换为相应的字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T16:01:55.903

您要做的不是返回 RedirectToAction，而是直接返回 View：（第二个参数是模型，您可以使用相同的模型类 E_Cv.Models.LogOnModel 向其添加 RegistrationMessage 属性）

```
return View("<name of the view>",
   new E_Cv.Models.LogOnModel {
     RegistrationMessage = "You have registered successfully"
   }); 
```

或像您所做的那样将数据保留在 ViewBag 中：

```
ViewBag.RegistrationMessage = "You have registered successfully";
return View("<name of the view>"); 
```

关于您的最后一个问题，如果您的 URL 中显示消息，您正在使用 GET 方法，如果您返回视图而不是重定向，它将避免在 URL 中显示任何内容

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T16:02:05.353

您应该在这种情况下使用 TempData

```
if (createStatus == MembershipCreateStatus.Success)
{        
    TempData["Message"] = "You have registered successfully";

    return RedirectToAction("KurumsalGiris"); 
} 
```

然后在你看来

```
@if (TempData["Message"] != null) 
{
    <h2>@TempData["Message"]</h2>
} 
```

或者，如果您想在控制器中执行此操作，只需保持您的视图与当前相同并在控制器中设置 ViewBag.RegistrationMessage

```
ViewBag.RegistrationMessage = TempData["Message"]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T15:56:34.837

如果问题是如何在不使用查询字符串的情况下在控制器之间传递数据，那么一个选项是 Session 对象。

```
if (createStatus == MembershipCreateStatus.Success)
{        
    Session["Message"] = "You have registered successfully";

    return RedirectToAction("KurumsalGiris"); 
}

[AllowAnonymous] //sonradan eklendi
public ActionResult KurumsalGiris(string message="")
{
    if (User.Identity.IsAuthenticated)
        return Content("Zaten giriş yapmışsınız");

    ViewBag.RegistrationMessage = (string) Session["Message"];

    return View();
} 
```

但是，我同意下面的@Jonathan Wood 的观点，这不一定是解决您试图解决的特定问题的最佳方法。尽管如此，作为一种通用技术，它还是值得了解的。

# javascript - 如何使用 js 文件显示希腊语

> ID：15006436
> 
> 赞同：0
> 
> 时间：2013-02-21T15:47:41.673
> 
> 标签：javascript

我在“function.js”中有这个函数：

```
test{  
    contents = '<html><head><title>Υπολογισμός Φ.Π.Α</title></head><body bgcolor="beige">' + "Το αρχικό ποσό που έδωσες είναι : " + axia + " euro." + '<br><br>' + "Το ποσό του Φ.Π.Α " + foros + "%" + " είναι : " +
         teliko_apotelesma.toFixed(3) + " euro." + "<br> <br>" +
        "Η  τιμή του προϊόντος  χωρίς το Φ.Π.Α " + foros + "%" + " είναι  : " + posoxorisfpa.toFixed(2) + " euro." + '<a href="javascript:window.close()"><br><br><img src=image/Close1.png><br><br></img></a>'
      + '<hr size=5 width=100% color=red >' + '</body></html>'
    options = "toolbar=1,status=1,menubar=1,scrollbars=1,resizable=1,width=600,height=300";
    newwindow = window.open("", "mywindow", options);
    newwindow.document.write(contents);
} 
```

我为 file1.html 调用此函数，窗口已打开，但显示如下：

```
�� ������ ���� ��� ������ ����� : 110 euro. 
```

正确显示的是希腊语：

```
Το αρχικό ποσό που έδωσες είναι : 118 euro 
```

如果我将函数`test`放在`<head>`“file1.html”中，则输出是正确的。

为什么我有这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T15:49:38.590

我假设您没有以 UTF-8 格式保存 js 文件，因此存在问题。

使用任何编辑器并使用 UTF-8 保存它（如果可以选择不带 BOM）。

# asp.net - 必须声明标量变量“@Image”。将图像保存到数据库时出错

> ID：15006438
> 
> 赞同：2
> 
> 时间：2013-02-21T15:47:43.000
> 
> 标签：asp.net, sql, image, save

我目前正在尝试使用以下代码将图像保存到我的数据库中：

```
byte[] myimage = new byte[FileUpload1.PostedFile.ContentLength];
HttpPostedFile Image = FileUpload1.PostedFile;
Image.InputStream.Read(myimage, 0, (int)FileUpload1.PostedFile.ContentLength);

string id = txtScanId.Text;

cmd1.CommandText = "INSERT INTO TABLE(AssetImage) VALUES (@Image)";
cmd1.Connection = con1;
con1.Open();
cmd1.ExecuteNonQuery(); 
```

但我收到错误：

> *必须声明标量变量“@Image”*

谁能帮忙，我已经做了6个小时了！

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T15:49:36.387

您声明了一个参数，但尚未为其提供值。为了正确执行代码，请在调用之前在参数上设置一个值`ExecuteNonQuery()`。

```
cmd1.Parameters.AddWithValue("@image", myimage);
cmd1.ExecuteNonQuery(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T15:55:07.040

你也可以使用下面的代码希望它会工作

```
cmd1.Parameters.AddWithValue("@image",DbType.VARBINARY).Value= myimage; 
```

# c# - PdfStamper 改变 MemoryStream 的大小

> ID：15006439
> 
> 赞同：0
> 
> 时间：2013-02-21T15:47:46.307
> 
> 标签：c#, .net, itextsharp, memorystream

在磁盘上有一个 498kb 的 PDF。我正在将其读入 MemoryStream 中，当在调试器中查看时，它报告的大小为 508978。然后使用阅读器和压模，输出 MemoryStream 的大小为 15。当流输出到磁盘时，PDF 是不可读的。

```
MemoryStream inputStream = new MemoryStream();
MemoryStream outputStream = new MemoryStream();

FileStream fs = File.OpenRead(@"e:\O1.pdf");           
inputStream.SetLength(fs.Length);
fs.Read(inputStream.GetBuffer(), 0, (int)fs.Length);
inputStream.Seek(0, SeekOrigin.Begin);

PdfReader reader = new PdfReader(inputStream);
PdfStamper stamper = new PdfStamper(reader, outputStream);
stamper.Writer.CloseStream = false;

AcroFields fields = reader.AcroFields;
foreach (String key in fields.Fields.Keys)
{
if (String.Equals(key, @"ReportID")) { stamper.AcroFields.SetField(@"ReportID", "Fred Bloggs");   }
}

stamper.Close();
Byte[] bytes = (Byte[])outputStream.ToArray();
File.WriteAllBytes(@"e:\O2.pdf", bytes); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T16:06:28.893

您的代码片段不完整，因此很难回答您的问题。

你让人们猜测你的问题。

**第一个猜测：**

你有一个 10 KB 的 PDF，当你用 阅读它时`PdfReader`，你突然使用了 100 KB。你很惊讶。怎么会这样？

答案很简单：10 KB 的 PDF 被压缩。当`PdfReader`开始使用它时，它会创建对象（需要内存）并解压缩数据（需要更多内存）。

**第二种猜测：**

你有一个`PdfReader`对象，你用它来创建一个`PdfStamper`对象。您忘记关闭压模。突然，您有一个非常小的文件，PDF 查看器会告诉您：这不是真正的 PDF。怎么来的？

您犯了许多不阅读文档的人所犯的错误。在您关闭压模之前，您正在处理的文件`PdfStamper`并未完全写入。

**第三个猜测：**

你有一个`PdfReader`对象，你用它来创建一个`PdfStamper`对象。您无需对压模做任何事情，只需将其关闭即可。您很惊讶生成的 PDF 与原始 PDF 的大小不同。

*   尺寸更小：iText 有时会丢弃未使用的对象，并以不同的方式重新排序对象。这是典型的 PDF 库。
*   大小更大：即使您没有添加任何内容，文件大小也会增加，例如当原始文档完全压缩时（PDF 1.5 和更高版本）。默认情况下，`PdfStamper`不会创建压缩的外部参照流（除非您指示 PdfStamper 压缩外部参照）。

如果这些答案都不适用，我建议您重新表述您的问题。如果没有，您将面临版主关闭它的风险。

# c# - TypeDescriptor.GetConverter(typeof(string)) 无法转换为我的自定义类型

> ID：15006441
> 
> 赞同：1
> 
> 时间：2013-02-21T15:47:49.863
> 
> 标签：c#, type-conversion, typeconverter

我正在使用一些第三方代码，它们使用 TypeConverters 将对象“转换”为指定为泛型参数的类型。

第 3 方代码获取字符串类型转换器，并期望通过该转换器进行所有转换，例如

```
var typeConverter = TypeDescriptor.GetConverter(typeof(string)); 
```

我已经为它编写了一个自定义类型和类型转换器（并使用 TypeDescriptor 属性注册了它），但它没有被第 3 方代码使用，它在调用时失败`typeConverter.CanConvertTo(MyCustomType)`

直到今天，我只在抽象中遇到过 TypeConverters，我见过提到它们，但从未构建或使用过。

有谁知道我在这里做错了什么？

我的 - 减少 - 代码

```
using System;
using System.ComponentModel;

namespace IoNoddy
{
[TypeConverter(typeof(TypeConverterForMyCustomType))]
public class MyCustomType
{
    public Guid Guid { get; private set; }
    public MyCustomType(Guid guid)
    {
        Guid = guid;
    }
    public static MyCustomType Parse(string value)
    {
        return new MyCustomType(Guid.Parse(value));
    }
}

public class TypeConverterForMyCustomType
    : TypeConverter
{
    public override bool CanConvertFrom(ITypeDescriptorContext context, Type sourceType)
    {
        return ((sourceType == typeof(string)) || base.CanConvertFrom(context, sourceType));
    }
    public override object ConvertFrom(ITypeDescriptorContext context, System.Globalization.CultureInfo culture, object value)
    {
        string strValue;
        if ((strValue = value as string) != null)
            try
            {
                return MyCustomType.Parse(strValue);
            }
            catch (FormatException ex)
            {
                throw new FormatException(string.Format("ConvertInvalidPrimitive: Could not convert {0} to MyCustomType", value), ex);
            }
        return base.ConvertFrom(context, culture, value);
    }
}
}

static void Main(string[] args)
{
    // Analogous to what 3rd party code is doing: 
    var typeConverter = TypeDescriptor.GetConverter(typeof(string));
    // writes "Am I convertible? false"
    Console.WriteLine("Am I convertible? {0}",  typeConverter.CanConvertTo(typeof(MyCustomType))); 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T17:11:57.673

你检查 CanConvertTo 所以添加到你的转换器：

```
 public override bool CanConvertTo(ITypeDescriptorContext context, Type destinationType)
    {
        return (destinationType == typeof(MyCustomType)) || base.CanConvertTo(context, destinationType);
    } 
```

到某个地方：

```
 public static void Register<T, TC>() where TC : TypeConverter
    {
        Attribute[] attr = new Attribute[1];
        TypeConverterAttribute vConv = new TypeConverterAttribute(typeof(TC));
        attr[0] = vConv;
        TypeDescriptor.AddAttributes(typeof(T), attr);
    } 
```

并主要：

```
Register<string, TypeConverterForMyCustomType>();            
var typeConverter = TypeDescriptor.GetConverter(typeof(string)); 
```

在那之后你的样品应该起作用。

# android - jTwitter for android 的授权错误

> ID：15006443
> 
> 赞同：0
> 
> 时间：2013-02-21T15:47:56.467
> 
> 标签：android, twitter, signpost, jtwitter

我在我的 android 应用程序中使用 jTwitter 库。直到前天一切正常。但是今天出现异常“服务提供商响应错误：301”。请帮助我。

这是堆栈跟踪：

```
02-21 21:07:27.258: E/AndroidRuntime(4013): FATAL EXCEPTION: AsyncTask #1
02-21 21:07:27.258: E/AndroidRuntime(4013): java.lang.RuntimeException: An error occured while executing doInBackground()
02-21 21:07:27.258: E/AndroidRuntime(4013):     at android.os.AsyncTask$3.done(AsyncTask.java:299)
02-21 21:07:27.258: E/AndroidRuntime(4013):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
02-21 21:07:27.258: E/AndroidRuntime(4013):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
02-21 21:07:27.258: E/AndroidRuntime(4013):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
02-21 21:07:27.258: E/AndroidRuntime(4013):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
02-21 21:07:27.258: E/AndroidRuntime(4013):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
02-21 21:07:27.258: E/AndroidRuntime(4013):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
02-21 21:07:27.258: E/AndroidRuntime(4013):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
02-21 21:07:27.258: E/AndroidRuntime(4013):     at java.lang.Thread.run(Thread.java:856)
02-21 21:07:27.258: E/AndroidRuntime(4013): Caused by: winterwell.jtwitter.TwitterException: oauth.signpost.exception.OAuthCommunicationException: Communication with the service provider failed: Service provider responded in error: 301 (Moved Permanently)
02-21 21:07:27.258: E/AndroidRuntime(4013):     at winterwell.jtwitter.OAuthSignpostClient.authorizeUrl(OAuthSignpostClient.java:307)
02-21 21:07:27.258: E/AndroidRuntime(4013):     at com.example.retrieve.contacts.twitter.MainActivity$MyTask.doInBackground(MainActivity.java:363)
02-21 21:07:27.258: E/AndroidRuntime(4013):     at com.example.retrieve.contacts.twitter.MainActivity$MyTask.doInBackground(MainActivity.java:1)
02-21 21:07:27.258: E/AndroidRuntime(4013):     at android.os.AsyncTask$2.call(AsyncTask.java:287)
02-21 21:07:27.258: E/AndroidRuntime(4013):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
02-21 21:07:27.258: E/AndroidRuntime(4013):     ... 5 more
02-21 21:07:27.258: E/AndroidRuntime(4013): Caused by: oauth.signpost.exception.OAuthCommunicationException: Communication with the service provider failed: Service provider responded in error: 301 (Moved Permanently)
02-21 21:07:27.258: E/AndroidRuntime(4013):     at oauth.signpost.AbstractOAuthProvider.retrieveToken(AbstractOAuthProvider.java:214)
02-21 21:07:27.258: E/AndroidRuntime(4013):     at oauth.signpost.AbstractOAuthProvider.retrieveRequestToken(AbstractOAuthProvider.java:69)
02-21 21:07:27.258: E/AndroidRuntime(4013):     at winterwell.jtwitter.OAuthSignpostClient.authorizeUrl(OAuthSignpostClient.java:303)
02-21 21:07:27.258: E/AndroidRuntime(4013):     ... 9 more
02-21 21:07:27.258: E/AndroidRuntime(4013): Caused by: oauth.signpost.exception.OAuthCommunicationException: Service provider responded in error: 301 (Moved Permanently)
02-21 21:07:27.258: E/AndroidRuntime(4013):     at oauth.signpost.AbstractOAuthProvider.handleUnexpectedResponse(AbstractOAuthProvider.java:241)
02-21 21:07:27.258: E/AndroidRuntime(4013):     at oauth.signpost.AbstractOAuthProvider.retrieveToken(AbstractOAuthProvider.java:189) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T11:42:48.447

Twitter 改变了他们的 API。这是对 oauth url 的一个微不足道但令人讨厌的更改。

这已在最新版本的 JTwitter (2.7) 中得到修复——您可以从[JTwitter 网页下载](http://www.winterwell.com/software/jtwitter.php)

# cassandra - 在 Cassandra 实例之间传送快照/sstables

> ID：15006445
> 
> 赞同：0
> 
> 时间：2013-02-21T15:47:59.823
> 
> 标签：cassandra

当我在 Cassandra 中截断列族时，它将与实时 sstable 建立硬链接，然后继续。是否可以将这些快照 sstables 移动到一个完全独立的 Cassandra 集群？我想要相同的模式，但它应该存储从我的主集群中删除的东西（可能具有较低的复制因子等）

这些方面的东西是否可能/可取/实用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T17:42:32.850

事实证明，在稍微重新排列 sstables 文件结构之后，使用`sstableloader`或JMX 调用确实是可能的。`bulkLoad`

# java - Java中多线程飞行控制程序的结构

> ID：15006448
> 
> 赞同：0
> 
> 时间：2013-02-21T15:48:21.610
> 
> 标签：java, multithreading, buffer, producer-consumer

我必须用 Java 编写一个程序，从 CSV 文件中获取飞行数据并模拟飞行；即使用一个线程来改变每个航班的状态。以下是项目页面中更具体的描述：

编写一个程序来管理有关许多航空公司和机场的航班状态的信息流。航空公司监视器、事件生成器和机场状态监视器将使用提供的 CSV 文件根据每日航班时间表进行初始化。时间表包括在一天中最繁忙的时间下午 4 点至 5 点起飞的航班。

现在，这里是我必须实现的所有线程的描述：

**Airline Monitor 线程：**为每个航空公司启动一个线程，以接收和发布对由所涉及的出发和到达城市表示的线程的更改。例如，如果从 BHM 到 DCA 的 244 航班延误，则将延误发布到 BHM 和 DCA 航班状态监视器。

**机场航班状态监控线程：**为每个机场启动一个线程并监控该机场的所有航班。每个机场都会收到来自每个航空公司的航班事件，因为它们是生成的。每个线程都会将机场的当前航班状态发布到到达和离开文件中。

**Flight Event Generator 线程：**启动单个线程来生成航班变更，包括延误、登机、左登机口、起飞、降落和登机口。

我的问题本质上很简单。我正在努力为该程序找到一个好的起点和结构。它应该只是一个贯穿整个线程的主文件吗？或者我应该实现一个面向对象的结构，每种类型的线程都有类？

最后，显然这是生产者-消费者问题的一个复杂实例。我选择使用循环缓冲区来存储需要在线程之间传递的航班信息。是否可以举例说明如何针对此类问题（但不是专门针对此问题）实现循环缓冲区？谢谢！

**编辑：**我不必设计整个机场系统；这特别是一个多线程项目。考虑 CSV 文件中的以下行：

```
1,sw,mdw,mco,1600,:50 
```

这指定这是西南航空公司当天的第一班航班，从芝加哥中途岛飞往奥兰多，于 1600 小时（下午 4:00）起飞，飞行时间为 50 分钟。我不需要机场和航班课程；这些是由 CSV 中的这些数据模拟的。我只是不确定如何处理“西南”航空公司线程、“mdw”和“mco”机场线程以及航班事件生成器线程，以及它们应该如何交互。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:06:18.120

看看文档。您将在那里找到与并发相关的所有 API 组件：http: [//docs.oracle.com/javase/7/docs/api/java/util/concurrent/package-summary.html](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/package-summary.html)

为了阅读文件，我建议使用渠道： [http ://docs.oracle.com/javase/7/docs/api/index.html?java/util/concurrent/package-summary.html](http://docs.oracle.com/javase/7/docs/api/index.html?java/util/concurrent/package-summary.html)

# asp.net-mvc - 错误：无法加载文件或程序集“Oracle.ManagedDataAccessDTC”或其依赖项之一

> ID：15006449
> 
> 赞同：5
> 
> 时间：2013-02-21T15:48:23.607
> 
> 标签：asp.net-mvc, oracle, reference, .net-assembly, odp.net

# 背景

*   我有一个包含控制台项目和 MVC4 Webapp 的解决方案。
*   两者都引用 Oracle.ManagedDataAccess（托管 ODP.NET 数据访问提供程序）。参考是同一个文件。
*   两者都没有引用 Oracle.ManagedDataAccess DTC。
*   在 VS 配置管理器中，平台被列为所有配置选项的“任何 CPU”。
*   两者的平台目标都是“任何 CPU”

# 问题

控制台应用程序执行得非常好。

当我尝试使用 MVC4 应用程序时，我看到：

```
Could not load file or assembly 'Oracle.ManagedDataAccessDTC' or one of its dependencies. An attempt was made to load a program with an incorrect format.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.BadImageFormatException: Could not load file or assembly 'Oracle.ManagedDataAccessDTC' or one of its dependencies. An attempt was made to load a program with an incorrect format.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Assembly Load Trace: The following information can be helpful to determine why the assembly 'Oracle.ManagedDataAccessDTC' could not be loaded.

    === Pre-bind state information ===
    LOG: User = [Redacted]\killesj1
    LOG: DisplayName = Oracle.ManagedDataAccessDTC
     (Partial)
    WRN: Partial binding information was supplied for an assembly:
    WRN: Assembly Name: Oracle.ManagedDataAccessDTC | Domain ID: 13
    WRN: A partial bind occurs when only part of the assembly display name is provided.
    WRN: This might result in the binder loading an incorrect assembly.
    WRN: It is recommended to provide a fully specified textual identity for the assembly,
    WRN: that consists of the simple name, version, culture, and public key token.
    WRN: See whitepaper http://go.microsoft.com/fwlink/?LinkId=109270 for more information and common solutions to this issue.
    LOG: Appbase = file:///C:/Users/killesj1/Repositories/PEApps/src/app/PEApps.Web/
    LOG: Initial PrivatePath = C:\Users\killesj1\Repositories\PEApps\src\app\PEApps.Web\bin
    Calling assembly : (Unknown).
    ===
    LOG: This bind starts in default load context.
    LOG: Using application configuration file: C:\Users\killesj1\Repositories\PEApps\src\app\PEApps.Web\web.config
    LOG: Using host configuration file: C:\Users\killesj1\Documents\IISExpress\config\aspnet.config
    LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework\v4.0.30319\config\machine.config.
    LOG: Policy not being applied to reference at this time (private, custom, partial, or location-based assembly bind).
    LOG: Attempting download of new URL file:///C:/Users/killesj1/AppData/Local/Temp/Temporary ASP.NET Files/root/e17fc384/1ed8df51/Oracle.ManagedDataAccessDTC.DLL.
    LOG: Attempting download of new URL file:///C:/Users/killesj1/AppData/Local/Temp/Temporary ASP.NET Files/root/e17fc384/1ed8df51/Oracle.ManagedDataAccessDTC/Oracle.ManagedDataAccessDTC.DLL.
    LOG: Attempting download of new URL file:///C:/Users/killesj1/Repositories/PEApps/src/app/PEApps.Web/bin/Oracle.ManagedDataAccessDTC.DLL.
    ERR: Failed to complete setup of assembly (hr = 0x8007000b). Probing terminated. 
```

我应该注意，我知道这是 Oracle.ManagedDataAccess DLL 的 32 位和 64 位版本之间的位问题。

但是，为什么针对相同 DLL 并使用相同设置编译的两个项目在工作方面会产生不同的结果？

## 到目前为止，我已经尝试...

*   从 IIS Express 切换到 Cassini 只是为了好玩……同样的问题
*   试图使控制台应用程序以同样的方式失败......到目前为止它没有。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T01:02:33.043

根据您的 PrivatePath (C:\Users\killesj1\Repositories\PEApps\src\app\PEApps.Web\bin) 以及随后在该私有路径中对 Oracle.ManagedDataAccessDTC.DLL 的绑定尝试，您拥有 ODP DTC 的副本应用程序的“bin”目录中的程序集。虽然您没有在此处显示，但输出的 Stack Trace 部分应该显示对 LoadAllAssembliesFromAppDomainBinDirectory 的调用。该方法将尝试加载应用程序的“bin”目录中的所有 .dll 文件。在您的情况下，您在 ODP DTC 程序集的位数和执行过程方面存在不匹配（您已经注意到您知道此类问题）。

您在控制台应用程序中看不到此问题的原因是，此类应用程序不会调用 LoadAllAssembliesFromAppDomainBinDirectory 方法（或类似方法）来“预加载”程序集。

至于 ODP DTC 程序集是如何进入应用程序的 bin 目录的，也许您无意中包含了对它的引用并将“Copy Local”设置为“True”。或者您可能将 ODP DTC 程序集文件添加到项目中并将“复制到输出目录”设置为“真”。该文件也有可能被手动复制到目录中。换句话说，文件如何在目录中结束有多种可能性。

# jquery - jquery颜色交换在IE中不起作用

> ID：15006450
> 
> 赞同：0
> 
> 时间：2013-02-21T15:48:26.203
> 
> 标签：jquery, css, internet-explorer

我有一个简单的 jQuery 脚本来替换大表行的 bgcolors 值。但是它在 IE 6 - 9 中不起作用。

这是我的代码：

```
<script type="text/javascript" >
$(document).ready(function() {

    // Swap all blue tr bg colors to red and grey shades 

    $('tr[bgcolor=#9BB9FB]').attr('bgcolor','#E6B8B7');
    $('tr[bgcolor=#B9CBFD]').attr('bgcolor','#F2DCDB');
    $('tr[bgcolor=#B6D3FC]').attr('bgcolor','#F2DCDB');
    $('tr[bgcolor=#015B91]').attr('bgcolor','#E6B8B7');
    $('tr[bgcolor=#8EBCFD]').attr('bgcolor','#B5B5B5');
    $('tr[bgcolor=#015B91 ]').attr('bgcolor','#e6b8b7');

});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T15:53:56.753

你有没有尝试过这样的事情？或者使用分类而不是设置属性？

var p = $("tr[bgcolor=#9BB9FB]").css("背景色", "黄色"); p.css("背景色", "#E6B8B7");

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T15:53:26.133

试试下面的代码：

```
<script type="text/javascript" >
        $(document).ready(function() {

        // Swapp All Blue tr bg colros to red and grey shades 

        $('tr[bgcolor=#9BB9FB]').css("background-color",'#E6B8B7');
        $('tr[bgcolor=#B9CBFD]').css("background-color",'#F2DCDB');
        $('tr[bgcolor=#B6D3FC]').css("background-color",'#F2DCDB');
        $('tr[bgcolor=#015B91]').css("background-color",'#E6B8B7');
        $('tr[bgcolor=#8EBCFD]').css("background-color",'#B5B5B5');
        $('tr[bgcolor=#015B91 ]').css("background-color",'#e6b8b7');

     });
     </script> 
```

# bash - 用于在文件上添加扩展名的 Shell 脚本

> ID：15006451
> 
> 赞同：0
> 
> 时间：2013-02-21T15:48:29.537
> 
> 标签：bash

需要这方面的帮助想要一个将参数作为目录接收的脚本，浏览那些目录以在找到的每个文件上添加正确的扩展名，或者如果它是一个目录添加 .aaa 作为扩展名文件没有任何扩展名，我必须使用命令文件来确定文件类型（文件没有扩展名）谢谢

```
#!/bin/sh
for dir in "$@"; do
    for file in "$dir"/*;
    do    
        if [[ -d $file ]]
        then
            ext=dir
        else
            file -i * | egrep 'avi|txt|jpeg|pst'
        fi
        if [file eq avi]
            ext=avi
        else
            if [file eq txt]
                ext=txt
            else
                if [file eq jpeg]
                    ext=jpeg
                fi
    done
done 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:12:59.673

你的意思可能是这样的：

```
for dir in "$@"
do
    for file in "$dir"/*
    do
        ftype=$(file -i "$file")
        unset ext
        case $ftype in
            *directory*) ext=aaa
                         ;;
            *avi*) ext=avi
                   ;;
            *text*) ext=txt
                   ;;
            *jpeg*) ext=jpeg 
                    ;;
            *ps*) ext=ps
                  ;;
            *) echo "File '$ftype' not recognised for file $file" >&2
               continue
               ;;
        esac                                                           
        echo "Renaming '$file' to '$file.$ext'"
        mv "$file" "$file.$ext"
    done
done 
```

请注意，不需要`egrep`,`file`也可以报告目录，因此不需要`-d`测试。

编辑： `egrep`在原始发布的问题中。添加`unset`

# mpi - 在 MPI_Comm_Spawn 调用之后，我如何知道所有子进程是否已完成？

> ID：15006452
> 
> 赞同：1
> 
> 时间：2013-02-21T15:48:36.663
> 
> 标签：mpi

在 MPI 中，如果我使用 MPI_Comm_Spawn 生成子进程，则主进程会执行生成。现在孩子们开始做一些工作。如何通知主进程和其他父级进程子级已完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T17:34:58.153

考虑为您的二进制程序编写一个包装器。与其直接生成程序，不如生成包装器的实例，包装器将依次启动二进制文件，等待它完成，然后与生成器进程通信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-20T08:05:32.097

正如 suszterpatt 建议的那样，我用包装程序解决了同样的问题。

让 master 是调用的程序`MPI_Comm_spawn`，slave 是你想要在不修改其代码的情况下生成的程序，而 wrapper 是包装程序。

让我们考虑一下您的从站本身就是一个 mpi 程序，需要自己的通信器与自己通信（因为您在评论中说过）。

*   master 使用`MPI_Comm_spawn`.
*   wrapper 执行从属二进制文件（可能带有`system`）。但是没有任何 MPI 调用（否则从站将不会获得 MPI 上下文）。
*   slave 获取从 MPI_Comm_spawn 创建的 MPI 上下文并完成其工作
*   当从站完成时，包装器向主站发出从站结束的信号。

我不能保证我的解决方案符合 MPI 标准，但它适用于具有 Linux 环境的集群上的 OpenMPI 1.10。它尝试使用二进制包装器并编写文件以在主从之间进行通信。

# scala - 在 Scala 测试中的 Scala 列表上使用“包含”匹配器

> ID：15006454
> 
> 赞同：3
> 
> 时间：2013-02-21T15:48:39.617
> 
> 标签：scala, scala-collections, scalatest

我正在尝试检查案例类列表是否包含一个特定实例，但是当我尝试这样做时，出现以下错误：

```
[info] Compiling 1 Scala source to /home/matt/Documents/transledge/app/target/scala-2.9.2/test-classes...
[error] /home/matt/Documents/transledge/app/src/test/scala/com/transledge/drewes/parser_suite.scala:40: overloaded method value should with alternatives:
[error]   (notWord: ParserSuite.this.NotWord)ParserSuite.this.ResultOfNotWordForSeq[com.transledge.Instruction,List[com.transledge.Instruction]] <and>
[error]   (haveWord: ParserSuite.this.HaveWord)ParserSuite.this.ResultOfHaveWordForSeq[com.transledge.Instruction] <and>
[error]   (beWord: ParserSuite.this.BeWord)ParserSuite.this.ResultOfBeWordForAnyRef[List[com.transledge.Instruction]] <and>
[error]   (rightMatcher: org.scalatest.matchers.Matcher[List[com.transledge.Instruction]])Unit
[error]  cannot be applied to (org.scalatest.matchers.Matcher[Traversable[com.transledge.AddNode]])
[error]       parsing(square_node, input) should contain(AddNode("foo"))
[error]                                   ^
[error] one error found
[error] (test:compile) Compilation failed
[error] Total time: 3 s, completed 21-Feb-2013 15:15:04 
```

有问题的测试套件是：

```
import org.scalatest.FunSpec
import scala.util.parsing.combinator._
import com.transledge.drewes.{Parser => DrewesParser}
import com.transledge._
import org.scalatest.matchers.ShouldMatchers

class ParserSuite extends DrewesParser with FunSpec with ShouldMatchers {

  def parsing[A](parser: Parser[A], input: String): A = parse(parser, input).get

  // snipping other tests

  describe("square_node") {
    val input = """\squarenode{foo}(1cm, 2cm)"""
    it("should create a node") {
      parsing(square_node, input) should contain(AddNode("foo")) // Line 40
    }
  }
} 
```

`AddNode`/的定义`Instruction`非常基本：

```
package com.transledge

abstract class Instruction
case class AddNode(id: String) extends Instruction 
```

这是解析器的简化定义：

```
package com.transledge.drewes
import scala.util.parsing.combinator._
import com.transledge._

trait Parser extends RegexParsers {
  def node_id: Parser[String] = "[a-zA-Z\\-_:0-9]+".r
  def node_name: Parser[String] = ("{" ~> node_id <~ "}") | node_id

  def point: Parser[String] = "[^,()]+".r
  def position: Parser[(String, String)] = "(" ~> point ~ "," ~ point <~ ")" ^^ { case a ~ "," ~ b => (a.trim, b.trim) }

  def square_node: Parser[List[Instruction]] = "\\squarenode" ~> node_name ~ position ^^ { case name ~ position => List(AddNode(name)) }

} 
```

我对此的理解是，Scala 编译器应该使用该变体`should(rightMatcher: Matcher[List[T]])`，但正在获取一个实例`Traversable`而不是 a `List`，并且作为包含`Traversable`的特征，不能在预期的地方使用。`List``Traversable``List`

那么如何检查列表是否包含该元素？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T22:39:12.573

这是其实现方式的简化图：

```
trait Matcher[T]

implicit class ListShouldWrapper[T](a:List[T]) {
  def should(rightMatcher: Matcher[List[T]]): Unit = ???
}

object contain {
  def apply[T](expectedElement: T): Matcher[GenTraversable[T]] = ???
} 
```

如果您使用以下方法测试该实现：

```
val x:List[Int] = ???
x should contain(3) 
```

您将收到一个编译错误，告诉您`GenTraversable`已找到并且`List`是必需的。如果我们像下面这样实现它，实现可能会更好。请注意，这不是实际的解决方案，因为这只是一些孤立的代码。

```
trait Matcher[T]

implicit class AnyToShould[T](a: T) {
  def should(a: Matcher[T]) = ???
}

def contain[C[_] <: Traversable[_], T](x:T):Matcher[C[T]] = ??? 
```

这个问题是可以解决的，所以我建议你提交一个错误（甚至可以自己创建一个补丁）。为了能够现在继续，您有几个选择：

*   更改返回类型`def square_node: Parser[List[Instruction]]`
*   自己提供一个`contain`返回“正确”类型的方法`Matcher`
*   使用另一个 Scala 规范库

# android - 如何设置一个按钮永久启用？

> ID：15006459
> 
> 赞同：0
> 
> 时间：2013-02-21T15:48:47.523
> 
> 标签：android

我想知道如何设置一个按钮永久启用，这样每次我退出应用程序时，它仍然处于启用状态。在我的应用程序中有 2 个活动。Activity1 有 2 个按钮。当您单击第一个按钮时，您将进入具有按钮的 Activity 2。当您单击活动 2 上的该按钮时，您将返回到活动 1，然后活动 1 上的第二个按钮将被设置启用。

我试过这个，但每次它启用一个按钮时，它都不会永久设置它。

首先我创建 AppPreferences 类

```
public class AppPreferences {
      private static final String APP_SHARED_PREFS = "com.aydabtu.BroadcastSMS_preferences"; //  Name of the file -.xml
         private SharedPreferences appSharedPrefs;
         private Editor prefsEditor;

         public AppPreferences(Context context)
         {
             this.appSharedPrefs = context.getSharedPreferences(APP_SHARED_PREFS, Activity.MODE_PRIVATE);
             this.prefsEditor = appSharedPrefs.edit();
         }

         public boolean getOnOrOff() {
             return appSharedPrefs.getBoolean("get_on_or_off", false);

         }

         public void setOnOrOFF(Boolean text) {
             prefsEditor.putBoolean("get_on_or_off", text);
             prefsEditor.commit();
         }
} 
```

然后在我的按钮上我设置了这个代码

```
AppPreferences appPrefs = new AppPreferences(getApplicationContext());
    Button page2 = (Button) findViewById(R.id.button2);

    Intent intent2=getIntent();
    String isEnabled2 = intent2.getStringExtra("isEnabled2");
    if(isEnabled2==null||isEnabled2.equals("disabled")){
            page2.setEnabled(false);
    }
    else{
            page2.setEnabled(appPrefs.getOnOrOff());
            appPrefs.setOnOrOFF(true);
    }

    page2.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {

            Intent myIntent = new Intent(view.getContext(), p3.class);
            startActivityForResult(myIntent, 0);

        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T15:55:03.283

当您从后台 onResume() 恢复您的应用程序时，将按钮的活动状态设置为启用。

这是来自 Google 的快速参考：http: [//developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)

# zend-framework - 用于 utf8 字符的 zend 框架 slug 创建器

> ID：15006461
> 
> 赞同：1
> 
> 时间：2013-02-21T15:48:50.143
> 
> 标签：zend-framework, slug

我想创建一个 SEO 友好的 url，所以经过一些研究，我想出了创建 slug 并使用路由器做一些事情。但是，似乎互联网上的 slug 创建者只支持英文字母字符。所以，我需要一个更好的越南字母表创建者。

谁有插件，或者给我一个建议？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T15:57:21.700

您可以扩展现有的 Slugifier 以规范越南语字符。

来自[Django 上下文中的类似帖子](https://stackoverflow.com/a/2072623/739373)：

> 一个简单的版本是：
> 
> ```
> vietnamese_map = {
>     ord(u'ư'): 'u',
>     ord(u'ơ'): 'o',
>     ord(u'á'): 'a',
>     ord(u'n'): 'n',
>     ord(u'h'): 'h',
>     ord(u'ữ'): 'u',
>     ord(u'n'): 'n',
>     ord(u'g'): 'g',
>     ord(u'v'): 'v',
>     ord(u'i'): 'i',
>     ord(u'ê'): 'e',
>     ord(u'n'): 'n',
>     ord(u'k'): 'k',
>     ord(u'ẹ'): 'e',
>     ord(u'o'): 'o',
> } 
> ```
> 
> 然后你可以打电话：
> 
> ```
> print u"những-viên-kẹo".translate(vietnamese_map) To get:
> 
> u"nhung-vien-keo" 
> ```

但当然，您需要用 PHP 编写它。

如果您不想扩展内置的 slugifier，Boris Guery`Bgy_Filter_Slugify`对我来说效果很好：

[https://github.com/borisguery/bgylibrary/blob/master/library/Bgy/Filter/Slugify.php](https://github.com/borisguery/bgylibrary/blob/master/library/Bgy/Filter/Slugify.php)

您还可以提取 WordPress 使用的 slugification 代码，如果这对您来说仍然不够健壮的话。

**编辑：**

WordPress 代码[可能已经处理](https://stackoverflow.com/a/3371799/739373)了将重音字符转换为对应的拉丁文。

例如，[这里](http://core.trac.wordpress.org/browser/tags/3.5.1/wp-includes/formatting.php#L607)`remove_accents`是它们的功能。

# c# - 在 C# 中访问 android 设备的麦克风

> ID：15006464
> 
> 赞同：2
> 
> 时间：2013-02-21T15:48:55.150
> 
> 标签：c#, android, monodevelop, voice-recording

抱歉，如果这已在某处得到解答，到目前为止我还没有找到我需要的东西。

我需要在 c# 中访问 android 设备上的麦克风来录制和播放语音。

我该怎么做呢？如果有人可以提供对我是初学者非常有用的示例。我正在使用 monodevelop 创建应用程序。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T16:17:21.147

通过 Android 上的 C#，我猜你的意思是 Xamarin(?)。

Xamarin 网站有一个[使用音频](http://docs.xamarin.com/guides/android/application_fundamentals/working_with_audio)页面，其中包含有关如何使用应用程序中的各种音频 API（例如 MediaPlayer 和 MediaRecorder）的信息，包括一些示例代码。

# oracle - DBMS_SCHEDULER 日历语法

> ID：15006468
> 
> 赞同：1
> 
> 时间：2013-02-21T15:49:06.150
> 
> 标签：oracle, syntax, scheduler

我是新手`DBMS_SCHEDULER`，在阅读了 Oracle 的文档后，我想知道是否有人可以检查我的语法以了解重复间隔？

**每天凌晨 3 点**

```
FREQ=DAILY;BYHOUR=3 
```

**周日，凌晨 3 点**

```
FREQ=WEEKLY;BYDAY=SUN;BYHOUR=3 
```

**月初，凌晨三点**

```
FREQ=MONTHLY;BYMONTHDAY=1;BYHOUR=3 
```

**每季度（1 月、4 月、7 月、10 月开始），凌晨 3 点**

```
FREQ=YEARLY;BYDATE=0101,0401,0701,1001;BYHOUR=3 
```

**每年 8 月 1 日凌晨 3 点**

```
FREQ=YEARLY;BYDATE=0801;BYHOUR=3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T16:15:28.147

你的间隔是模糊的，因此可能不会在你期望的时候开始。

例如，假设您`dbms_scheduler.create_job` 在`16:09:12`. 您的重复间隔`FREQ=DAILY;BYHOUR=3`意味着该工作将在`03:09:12`第二天开始。所以实际上你得到了你所要求的。

如果您希望工作在凌晨 3 点整开始，那么

```
freq=DAILY;byhour=3; byminute=0; bysecond=0; 
```

您的所有示例也是如此。虽然你有什么是好的，但它们只精确到小时，Oracle 会从提交时间中选择分钟和秒。

# mongodb - 将 Grails 与 Mongo DB 一起使用时是否存在连接泄漏

> ID：15006469
> 
> 赞同：1
> 
> 时间：2013-02-21T15:49:10.113
> 
> 标签：mongodb, grails

我只是按照以下链接使用 grails 和 Mongo db 构建示例应用程序。

[http://etcpe9.wordpress.com/2012/01/28/beginning-grails-2-0-with-mongodb/](http://etcpe9.wordpress.com/2012/01/28/beginning-grails-2-0-with-mongodb/)

但是每次我创建一个新人时，我都可以在 mongod shell XX connection now open 中看到以下内容。

我不确定这是否意味着连接泄漏？

```
Thu Feb 21 21:04:06 [initandlisten] connection accepted from 127.0.0.1:50526 #22
 (1 connection now open)
Thu Feb 21 21:04:27 [initandlisten] connection accepted from 127.0.0.1:50527 #23
 (2 connections now open)
Thu Feb 21 21:04:27 [initandlisten] connection accepted from 127.0.0.1:50528 #24
 (3 connections now open)
Thu Feb 21 21:04:36 [initandlisten] connection accepted from 127.0.0.1:50531 #25
 (4 connections now open)
Thu Feb 21 21:04:36 [initandlisten] connection accepted from 127.0.0.1:50532 #26
 (5 connections now open)
Thu Feb 21 21:04:48 [initandlisten] connection accepted from 127.0.0.1:50533 #27
 (6 connections now open)
Thu Feb 21 21:04:53 [initandlisten] connection accepted from 127.0.0.1:50534 #28
 (7 connections now open)
Thu Feb 21 21:04:59 [initandlisten] connection accepted from 127.0.0.1:50535 #29
 (8 connections now open)
Thu Feb 21 21:05:04 [initandlisten] connection accepted from 127.0.0.1:50536 #30
 (9 connections now open)
Thu Feb 21 21:05:10 [initandlisten] connection accepted from 127.0.0.1:50537 #31
 (10 connections now open) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T16:11:39.870

不，这是维护连接池的 mongodb 驱动程序，因此它可以重用连接。

# mysql - 如何在特定条件下返回“位”值？

> ID：15006471
> 
> 赞同：0
> 
> 时间：2013-02-21T15:49:11.383
> 
> 标签：mysql, if-statement

在让用户将新数据输入表之前，我正在尝试验证 UserLog 表的最新记录。

例如，

```
User_ID      Login_Time       Logout_Time
215       2013/02/02 08:59  2013/02/02 18:05
215       2013/02/03 08:58  2013/02/03 18:02
215       2013/02/04 08:59       NULL 
```

假设今天是 2013 年 2 月 5 日，系统我希望该系统显示一条错误消息，因为用户昨天忘记了注销，2013 年 2 月 4 日。我可以在一个 SELECT 查询中完成所有过程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T15:51:41.810

像这样的东西？

```
SELECT IFNULL(Logout_Time, 0) AS bit
FROM log
WHERE User_ID = 215
ORDER BY Login_Time DESC
LIMIT 1 
```

或者

```
SELECT CASE 
         WHEN logout_time IS NULL THEN "you didn't log out" 
         ELSE "you logged out" 
       end AS message 
... 
```

# javascript - 有两个独立的 JavaScript 充当一个吗？

> ID：15006477
> 
> 赞同：0
> 
> 时间：2013-02-21T15:49:18.113
> 
> 标签：javascript, class, jquery-animate, mouseover, mouseout

在我的 HTML 中，我有几张这样的图片：

```
<img class="gallery_left" id="left4" src="assets/community/fall_regionals/img01.png" /> 
```

图像有一个类和一个 ID。我还有用于类 gallery_left 和 ID left4 的 JavaScript：

```
$(function() {

    $('img.gallery_left').mouseover(function(){

        $(this).animate({
    borderWidth: '10px',
    width: '750px',
    height: '500px',
    marginLeft: '1px',
    zIndex: '15'}, 'default');

    });

    $('img.gallery_left').mouseout(function(){

        $(this).animate({
    borderWidth: '4px',
    width: '300px',
    height: '200px',
    marginLeft: '1px',
    zIndex: '0'}, 'default');

    });

    $('#left4').mouseover(function(){

        $(this).animate({
    marginTop: '105px'}, 'default');

    });

    $('#left4').mouseout(function(){

        $(this).animate({
    marginTop: '261px'}, 'default');

        });

    }); 
```

我发现首先执行类gallery_left 的JavaScript，然后执行ID left4。在某些情况下，它们会同时执行（或至少看起来），但是在鼠标移出时，图像将在 90% 的时间在一个动作（类）中缩小，然后在另一个动作（ID）中向下移动。我发现这对我的许多图像来说都是一个大问题。有没有办法可以稍微清理一下以使其更无问题？此外，建议只为每个单独的图像创建一个特定的类以“组合”这两个单独的动作是不可能的，因为那将是太多的类。任何帮助表示赞赏！谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T15:59:19.157

试试这个：[**现场演示**](http://jsfiddle.net/sWm6w/)

```
$(function() {
    var margin_top;

    $('img').mouseover(function(){
        if($(this).hasClass('gallery_left')) {
            if($(this).attr('id') == "left4") {
                margin_top = '105px';
            } else {
                $(this).css('marginTop');
            }

            $(this).animate({
                borderWidth: '10px',
                width: '750px',
                height: '500px',
                marginLeft: '1px',
                zIndex: '15',
                marginTop: margin_top,
            }, 
            'default');
        } else if($(this).hasClass('gallery_right')) {
            if($(this).attr('id') == "right6") {
                margin_top = '105px';
            } else {
                $(this).css('marginTop');
            }

            $(this).animate({
                borderWidth: '10px',
                width: '750px',
                height: '500px',
                marginLeft: '199px',
                zIndex: '15',
                marginTop: margin_top,
            }, 
            'default');
        }
    });

    $('img').mouseout(function(){
        if($(this).hasClass('gallery_left')) {
            if($(this).attr('id') == "left4") {
                margin_top = '261px';
            } else {
                $(this).css('marginTop');
            }

            $(this).animate({
                borderWidth: '4px',
                width: '300px',
                height: '200px',
                marginLeft: '1px',
                zIndex: '0',
                marginTop: margin_top,
            }, 
            'default');
        } else if($(this).hasClass('gallery_right')) {
            if($(this).attr('id') == "right6") {
                margin_top = '261px';
            } else {
                $(this).css('marginTop');
            }

            $(this).animate({
                borderWidth: '4px',
                width: '300px',
                height: '200px',
                marginLeft: '661px',
                zIndex: '0',
                marginTop: margin_top,
            }, 
            'default');
        }
    });
}); 
```

# java - test.timeoutSecs 属性令人困惑，并且没有给出一致的结果

> ID：15006492
> 
> 赞同：2
> 
> 时间：2013-02-21T15:49:59.600
> 
> 标签：java, testing, junit, mule

我已经开始为我的 Mule 流和处理器编写测试用例。

作为其中的一部分，我尝试在“setUp”方法中设置属性“mule.test.timeoutSecs”，以确保我的每个测试方法都不会花费更多时间。

但这显示了一些令人困惑的结果。

我已将该属性设置为 3 秒。

第一个测试方法运行了超过 9 秒，但仍然成功。

第二种方法是在 3000 毫秒后超时。

第三个测试方法失败抛出异常

```
org.mule.retry.RetryPolicyExhaustedException: Could not create Transport. Reason: javax.management.InstanceAlreadyExistsException: org.apache.activemq:BrokerName=localhost,Type=Broker
at org.mule.retry.policies.AbstractPolicyTemplate.execute(AbstractPolicyTemplate.java:105)
.....
Caused by: javax.jms.JMSException: Could not create Transport. Reason: javax.management.InstanceAlreadyExistsException: 
```

第四种方法是在 3000 毫秒后超时。

如果我在这里遗漏任何东西，请告知。

下图显示了测试摘要以及每个测试方法所用的时间。

![我的测试运行快照](../Images/135f786a9e98d0323c8338d248fea1a1.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T17:46:50.320

在测试类构造函数或静态方法中使用`org.mule.tck.junit4.FunctionalTestCase`set时。`mule.test.timeoutSecs``@BeforeClass`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T16:50:26.867

Eclipse 将花费在设置/拆卸上的时间包含在该测试中花费的时间中。如果您有`@Before`/ `@After`，它将包含在测试时间中。因此，如果您的设置需要很长时间进行第一次测试，则将包括在内。

但是，超时仅适用于测试方法本身，而不适用于`@Before`/ `@After`。

此外，IIRC 如果您有`BeforeClass`/`AfterClass`这将包含在时间中（但仅适用于第一次/最后一次测试）。

要对此进行测试，在您的测试中，您可以添加以下行：

```
@Test public void testMe() {
  long now = new Date().getTime();

  // test
  System.out.println("time taken =" + (new Date().getTime() - now) + " millis");
} 
```

这将告诉您所花费的时间是否真的在`@Before`/`@After`中。

# sql - 将 IDENTITY 插入添加到视图

> ID：15006493
> 
> 赞同：0
> 
> 时间：2013-02-21T15:49:59.987
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我正在滚动自己的立方体，我有一张看起来像的桌子

```
drug_class      drug_name
h3b             drug x
h4b             drug y
h2f             drug z 
```

这些列不是主键，可以为表中的每条记录重复 N 次。我想为我的多维数据集制作一个维度，并且想知道是否可以将身份插入到类似的视图中

```
create view [My Dimension] as
select distinct drugID int identity,drug_class,drug_name
from myTable 
```

我知道我可以得到一个不同的列表并将身份插入到表中，但我想知道是否有办法通过视图来做到这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T15:56:01.953

最简单的方法是使用[`row_number()`](http://msdn.microsoft.com/en-us/library/ms186734.aspx)为每一行创建唯一的 id：

```
create view [My Dimension] as
select 
  row_number() over(order by drug_class) drugid,
  drug_class,
  drug_name
from yourtable 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/effa6/1)

# iphone - 删除表格视图单元格但显示“无效行数”

> ID：15006494
> 
> 赞同：1
> 
> 时间：2013-02-21T15:50:02.557
> 
> 标签：iphone, ios, uitableview, core-data

我的 tableview 数据源来自一个数组，它从托管对象上下文的 executeFetchRequest 方法中获取数据。在 commitEditingStyle 委托中，我收到了这个错误：

```
Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Invalid update: invalid number of rows in section 0\.  The number of rows contained in an existing section after the update (1) must be equal to the number of rows contained in that section before the update (1), 
```

代表：

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        [self.managedOjbectContext deleteObject:[self.myEvents objectAtIndex:indexPath.row]];
        [self.tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
        [self.tableView reloadData];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T15:53:35.437

您应该从 NSArray 中删除该条目，然后重新加载 tableView，这样就不会出现不一致...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T15:55:07.240

错误说明了一切，您删除了一行，但您的代表仍然说它在那里。

我的猜测是你没有从`self.myEvents`. 从托管上下文中删除对象不会将其从数组中删除。

假设`self.myEvents`是一个`NSMutableArray*`

```
[self.myEvents removeObjectAtIndex:indexPath.row] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T15:57:07.903

尝试使用 `[tableView beginUpdates];`和`[tableView endUpdates];`不要`reloadData`这样使用

```
[tableView beginUpdates];
if (editingStyle == UITableViewCellEditingStyleDelete) {
        [self.managedOjbectContext deleteObject:[self.myEvents objectAtIndex:indexPath.row]];
        [self.tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];

    }
[tableView endUpdates]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T15:59:02.403

为什么不封装 and 之间的删除和`[self.tableView beginUpdates]`所有`[self.tableView endUpdates]`？

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        [self.tableView beginUpdates];
        [self.managedOjbectContext deleteObject:[self.myEvents objectAtIndex:indexPath.row]];
        [self.tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
        [self.tableView endUpdates];
    }

} 
```

根据：[Apple 的 Table View 编程指南](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/ManageInsertDeleteRow/ManageInsertDeleteRow.html#//apple_ref/doc/uid/TP40007451-CH10-SW1)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T20:25:50.200

如果您从 TableView 中删除一个单元格，则需要更新您的数据源以识别这些更改。

有一个名为 numberOfRowsInSection 的方法：此方法返回表格视图应显示的单元格数。它很可能使用数组或其他类型的数据结构。您需要确保该数组与对表视图本身所做的任何更改保持同步。如果您告诉表视图删除视图，您还需要更新表视图的支持数据以反映更改。

# jquery - jQuery sorting divs within two columns

> ID：15006497
> 
> 赞同：0
> 
> 时间：2013-02-21T15:50:06.713
> 
> 标签：jquery, html, multiple-columns

I have a main list with two columns. Within these columns, each div has multiple classes, when you select one of those classes, I want to order the columns so they are even. Here's an example of what I'm starting with:

```
<div class="left">
  <div class="dot blue">blue one</div>
  <div class="dot red">red one</div>
  <div class="dot orange">orange one</div>
  <div class="dot red">red two</div>
  <div class="dot red">red three</div>
</div>
<div class="right">
  <div class="dot red">red four</div>
  <div class="dot blue">blue two</div>
  <div class="dot blue">blue three</div>
  <div class="dot blue">blue four</div>
  <div class="dot orange">orange two</div>
</div> 
```

After clicking a toggling button that I have for "red", I want to hide everything except the red dots, but sort the red ones evenly between the two columns. I can hide everything correctly, but not sure how to make the four red divs even between the "left" and "right" divs. Here's the output I would like to have:

```
<div class="left">
  <div class="dot red">red one</div>
  <div class="dot red">red two</div>
</div>
<div class="right">
  <div class="dot red">red three</div>
  <div class="dot red">red four</div>
</div> 
```

Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:09:27.597

Move all the `.red`s to the left, then find the halfway point and move the second half of the group back to the right:

```
$('.left,.right').find('.dot:not(.red)').hide(); /* or .remove() */
var $red = $('.left,.right').find('.dot.red').appendTo('.left');
var len = Math.round($red.length/2);
$('.left .dot.red:gt('+(len-1)+')').appendTo('.right'); /* :gt is zero-based */ 
```

[http://jsfiddle.net/mblase75/nnhBp/](http://jsfiddle.net/mblase75/nnhBp/)

[http://api.jquery.com/gt-selector](http://api.jquery.com/gt-selector)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:10:28.333

You could use

```
$(function(){
    var dots = $('.dot'),
        left = $('.left'),
        right = $('.right');

    $('button').on('click', function(){
        var filter = $(this).data('filter'); // here you define which class to remain (on demo i have added a data-filter attribute on the buttons)
        var filtered = dots.detach().filter('.' + filter),
            half = Math.ceil(filtered.length / 2);

        filtered.each(function(index){
            var target = left;
            if (index >= half){
                target = right;
            }
            $(this).appendTo( target );
        });

    });
}); 
```

**Demo at** [http://jsfiddle.net/hnaUK/1/](http://jsfiddle.net/hnaUK/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T17:19:18.873

I know you got some options but I worked on this for a bit and figured I'd share mine too:

This is my jQuery:

```
 $(document).ready(function () {
        $("button").click(function () {
            var classVal = "." + $(this).val();

            $(".dot").hide();
            $(classVal).show();

            var halfOf = ($(classVal).length / 2)-1;

            $(classVal).appendTo(".left");
            $(classVal+":gt('"+halfOf+"')").appendTo(".right");
        });                
    }); 
```

Here is the HTML, all the same but I had to add the buttons you talked about:

```
<div class="left">
    <div class="dot blue">blue one</div>
    <div class="dot red">red one</div>
    <div class="dot orange">orange one</div>
    <div class="dot red">red two</div>
    <div class="dot red">red three</div>
</div>
<div class="right">
    <div class="dot red">red four</div>
    <div class="dot blue">blue two</div>
    <div class="dot blue">blue three</div>
    <div class="dot blue">blue four</div>
    <div class="dot orange">orange two</div>
</div>
<div id="controls">
    <button value="red" type="button">Red</button>
    <button value="blue" type="button">Blue</button>
    <button value="orange" type="button">Orange</button>
</div> 
```

And then some simple CSS:

```
.left {
    float: left;
    border: 1px solid #000000;
}
.right {
    float: left;
    border: 1px solid #000000;
}
#controls {
    clear: both;
} 
```

Along with the fiddle:

[http://jsfiddle.net/CTCPZ/](http://jsfiddle.net/CTCPZ/)

# node.js - 从 Heroku 打开 SSH

> ID：15006506
> 
> 赞同：0
> 
> 时间：2013-02-21T15:50:37.970
> 
> 标签：node.js, heroku, scp

我在 Heroku 上部署了一个定期将文件上传到 ssh 服务器的工作人员。它写在 Node.js 上，它确实：

```
require('child_process').exec('scp -i id_rsa myfile.txt myuser@myserver.com:updated.txt', function() { ... }); 
```

为了连接到服务器，存储库有一个 *id_rsa* 文件，其私钥比*myserver.com*授权的私钥。我已经在两台计算机上对其进行了测试（与*myserver.com*没有密钥交换）并且它可以工作，但是当我将它上传到 Heroku 时，它 scp 输出：

```
Host key verification failed. 
```

为什么？

## 笔记

我也试过而不是执行*scp*：

```
cat file.txt | ssh [myuser]@[myserver] "cat > updated.txt" 
```

同样的问题。

## 更新

执行*ssh -v ...*它输出：

```
[...]
debug1: read_passphrase: can't open /dev/tty: No such device or address
Host key verification failed.
[...] 
```

我无法在 Heroku 上访问 tty？

这是 repo 上的所有文件：

# main.js

```
require('child_process').exec('scp -i id_rsa file.txt [myuser]@[myserver]:updated.txt', function(error, stdout, stderr) {
    if (error)
        console.error('FAILED', stderr.toString());
    console.log('OUTPUT', stdout.toString());
}); 
```

# id_rsa

```
-----BEGIN RSA PRIVATE KEY-----
[censored]
-----END RSA PRIVATE KEY----- 
```

# 包.json

```
{
    "name": "exta",
    "version": "0.0.1",
    "engines": { "node": "0.6.x" }
} 
```

# 档案

```
worker: node main 
```

# 文件.txt

```
Testing 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T16:37:42.827

发现问题，不是在 RSA 密钥上，而是在服务器密钥上。

第一次在两台计算机之间建立 SSH 连接时，SSH 要求您将服务器的密钥添加到*~/.ssh/known_hosts*以执行此操作，它会尝试将其提示到 tty。因为我已经在我的计算机上接受了我的服务器密钥，所以当我在本地测试它时并没有发生这种情况。

由于我不确定如何命令我的程序将密钥添加到*~/.shh/known_hosts*我已经欺骗 SSH 添加密钥而不询问：

```
ssh -i id_rsa -o -o StrictHostKeyChecking=no [myuser]@[myserver] 
```

由于我不想接触 Heroku 的环境，我还要求 ssh 将密钥存储在*/dev/null*上，因此没有任何修改：

```
ssh -i id_rsa -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no [myuser]@[myserver] 
```

而且......它的工作原理！:D

# asp.net - ASP.NET 自定义复合控件模板中的 Linkbutton 失去其 ViewState

> ID：15006510
> 
> 赞同：0
> 
> 时间：2013-02-21T15:50:40.480
> 
> 标签：asp.net, templates, controls, viewstate, composite

我制作了一个 ASP.NET 自定义复合控件，它有一个 ItemTemplate 的子控件。它基于 RssFeed ( [http://msdn.microsoft.com/en-us/library/aa479322.aspx](http://msdn.microsoft.com/en-us/library/aa479322.aspx)） 例子。该模板有一个链接按钮，它将命令名和命令参数绑定到数据源中的属性。回发时，命令名和命令参数为空，并且链接按钮的文本在回发渲染后消失。这让我相信链接按钮正在失去它的视图状态。自定义复合控件覆盖 CreateChildControls 并创建其子项。模板在 contentplaceholder 中实例化，并启用其视图状态。表示项目的控件正在继承通用 html 控件并使用“div”标记。它也启用了视图状态。当数据绑定时，复合控件 trackviewstate 被调用。有谁知道为什么链接按钮失去了它的视图状态？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T12:16:09.747

我发现了我犯的错误。当我创建我的子项时，我将它们添加到他们的父项中。然后我对它们进行数据绑定，但问题是它们的父级没有添加到控件层次结构中，因此从未打开 ViewState 跟踪。

# python - 带有外键的模型

> ID：15006511
> 
> 赞同：4
> 
> 时间：2013-02-21T15:50:46.053
> 
> 标签：python, django

```
class Data(models.Model):
    title = models.CharField(max_length=255)
    slug = models.SlugField()

class Photo(models.Model):
    photo = models.ImageField(upload_to='img')
    data = models.ForeignKey(Data) 
```

表格.py：

```
class DataForm(ModelForm):
    class Meta:
        model = Data 
```

如何添加到此表单照片上传？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T16:07:02.700

至少有两种可能的答案：

A. 使用两个表单并将它们发布到同一个视图。首先持久化`Data`对象，然后创建`Photo`对象而不将其提交到数据库，将数据属性分配给`data`实例，然后调用`.save()`实例`photo`（下面提供示例）。

B. 使用内联模型表单集：[https ://docs.djangoproject.com/en/dev/topics/forms/modelforms/#inline-formsets](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#inline-formsets)

[编辑]

```
class Data(models.Model):
    title = models.CharField(max_length=255)
    slug = models.SlugField()

class Photo(models.Model):
    photo = models.ImageField(upload_to='img')
    data = models.ForeignKey(Data)

class DataForm(forms.ModelForm):
    class Meta:
        model = Data

class PhotoForm(forms.ModelForm):
    class Meta:
        model = Photo
        exclude = ('data',)

def your_view(request):
    data_form = DataForm(request.POST or None)
    photo_form = PhotoForm(request.POST or None, request.FILES or None)

    if request.method == 'POST':
        if data_form.is_valid() and photo_form.is_valid():
            data = data_form.save()
            photo = photo_form.save(commit=False)
            photo.data = data
            photo.save()
            # do something else here, like a redirect to another view.
    return render(request, 'your-template.html',
        {'data_form': data_form, 'photo_form': photo_form}) 
```

确保您的表单使用：`multipart/form-data`作为编码类型，否则`request.FILES`将为空。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T16:08:21.483

手动添加`ImageField`到 Form 并覆盖`save`方法以创建照片：

```
class DataForm(ModelForm):
    class Meta:
        model = Data
    photo = forms.ImageField()

    def save(self, *arg, **kwargs):
        data = super(DataForm, self).save(*arg, **kwargs)
        if 'photo' in self.data :
           Photo.objects.create(
              photo=self.data['photo'],
              data=data
           )
        return data 
```

# angularjs - AngularJS 中的指令在加载时触发 $watch 回调函数

> ID：15006515
> 
> 赞同：2
> 
> 时间：2013-02-21T15:51:06.550
> 
> 标签：angularjs, angularjs-directive

我有以下指令：

```
 leafletDirective = angular.module("leaflet-directive", [])
  leafletDirective.directive "leaflet", ($http, $log)  ->
    restrict: "E"
    replace: true
    transclude: true
    template: "<div id=\"map\"></div>"
    scope:
      origin: "=origin"
      points: "=points"
      shape: "=shape"
      clearmarkers: "=clearmarkers"
      markers: "=markers"
    link: (scope, element, attrs, ctrl) ->

      scope.origin = [40.094882122321145, -3.8232421874999996]
      scope.points = []
      scope.shape = []
      #create a CloudMade tile layer and add it to the map
      @map = L.map(attrs.id,
                  center: scope.origin
                  zoom: 5
      )
      L.tileLayer("http://{s}.tile.cloudmade.com/57cbb6ca8cac418dbb1a402586df4528/997/256/{z}/{x}/{y}.png",
                maxZoom: 18
      ).addTo @map

      #add markers dynamically
      updateMarkers = (pts) =>
        console.log "loading markers"
        scope.markers = []
        for p of pts
          lat = pts[p].lat
          lng = pts[p].lng
          latLng = new L.LatLng(lat,lng)
          marker = new L.marker(latLng).addTo(@map)
          scope.markers.push(marker)
        return scope.markers

      #/// Add Polygon
      updateShape = (points) ->
        console.log "loading shape"

      #///Watch for point changes///##
      scope.$watch attrs.points,( (value) ->
        updateMarkers value
      ), true

      #//Watch For Shape Changes///###
      scope.$watch attrs.shape,( (value) ->
        updateShape value
      ), true 
```

我发现在页面上加载我的观察者

```
 #///Watch for point changes///##
      scope.$watch attrs.points,( (value) ->
        updateMarkers value
      ), true

      #//Watch For Shape Changes///###
      scope.$watch attrs.shape,( (value) ->
        updateShape value
      ), true 
```

正在加载...我从它们加载的功能中看到这些消息。这是关闭的，因为两个 attrs 都没有改变。

这就是我加载 Angular 的方式：

```
app = angular.module("WhereToMeet", ["leaflet-directive"])

@MapCtrl = ($scope) ->

  $scope.clicked = ->
    $scope.points.push(
      {lat: 1, lng: 2}, {lat: 40.094882122321145, lng: -3.8232421874999996}
    )

  $scope.clear = ->
    $scope.clearmarkers($scope.markers)

  $scope.makeShape = ->
    $scope.shape = []
    $scope.shape = ["1"] 
```

我不知道为什么它会在页面加载时加载。数据不变。除非 - 它只是被创建会这样做 - 我需要绕过。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T20:33:12.057

> 在观察者注册到作用域后，监听器 fn 被异步调用（通过 $evalAsync）来初始化观察者。在极少数情况下，这是不可取的，因为当 watchExpression 的结果没有改变时调用了侦听器。要在侦听器 fn 中检测这种情况，您可以比较 newVal 和 oldVal。如果这两个值相同（===），则由于初始化而调用了侦听器。--[范围#$watch](http://docs.angularjs.org/api/ng.$rootScope.Scope#$watch)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-22T16:32:41.543

我已将我的 $watch 语句简化为：

```
scope.$watch('someVar', function(newVal) {
  if (newVal) {
    // now, it's time to do something with scope.someVar
  }
}); 
```

# vb.net - 我的方法、验证和插入代码中有一个谜

> ID：15006516
> 
> 赞同：0
> 
> 时间：2013-02-21T15:51:07.227
> 
> 标签：vb.net, if-statement, sqlcommand

这是我的插入代码：

```
Dim _cmd as new SQLCommand()

Private Sub _btAdd_ANA_GRUPO_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles _btAdd_ANA_GRUPO.Click

    _resultCMD = 0

    'Por cada linha da grid analises
    For Ro = 0 To DataGrid_AnaEXT.Rows.Count - 1

        If DataGrid_AnaEXT.Rows(Ro).Cells("Selected").Value = 1 Then

            _cmd.Parameters.Clear() ' here i clear because i use the _cmd other sections

           '**enigma**'
           _query = "INSERT into dbo.tbl_ENC_GRUPO_ANA_LINHA VALUES( @idG, @idAna, @sigla, @nomeA, @_ck )"  / If i put the query string here ,the INSERT does nothing

            'Dim _cmd As New SqlCommand - I tried to declare here but same problem

            _cmd.Parameters.Add("@idG", SqlDbType.Int).Value = _dgvGruposA.CurrentRow.Cells("ID_GRUPO_ANA").Value
            _cmd.Parameters.Add("@idAna", SqlDbType.Char).Value = Trim(DataGrid_AnaEXT.Rows(Ro).Cells("ANA_ID").Value.ToString())
            _cmd.Parameters.Add("@sigla", SqlDbType.VarChar).Value = Trim(DataGrid_AnaEXT.Rows(Ro).Cells("ANA_SIGLA").Value.ToString())
            _cmd.Parameters.Add("@nomeA", SqlDbType.VarChar).Value = _selectAnaNome(Trim(DataGrid_AnaEXT.Rows(Ro).Cells("ANA_ID").Value.ToString()))
            _cmd.Parameters.Add("@_ck", SqlDbType.Bit).Value = DataGrid_AnaEXT.Rows(Ro).Cells("Selected").Value

            'Here i check if and ID exist in destination table "_checkAnaNoGrupo" , to not duplicate

            If _checkAnaNoGrupo(_dgvGruposA.CurrentRow.Cells("ID_GRUPO_ANA").Value, (DataGrid_AnaEXT.Rows(Ro).Cells("ANA_ID").Value.ToString)) = False Then

                _query = "INSERT into dbo.tbl_ENC_GRUPO_ANA_LINHA VALUES( @idG, @idAna, @sigla, @nomeA, @_ck )"

                _cmd.Connection = _con.connect
                _cmd.CommandText = _query
                _cmd.CommandType = CommandType.Text

                Try
                    _con.connect.Open()
                    _resultCMD = _resultCMD + _cmd.ExecuteNonQuery()
                    _con.connect.Close()

                Catch ex As Exception
                    _con.connect.Close()
                    MessageBox.Show("Erro Linha : " & ex.Message & " !")

                End Try

            End If

        End If
    Next

    If _resultCMD > 0 Then
        MessageBox.Show("Adicionou : " & _resultCMD _
                        & " análises ao Grupo : " & _dgvGruposA.CurrentRow.Cells("NOME_G").Value & " !")
    End If

    _selectAnaLinhaG(CInt(_dgvGruposA.CurrentRow.Cells(0).Value))

End sub 
```

这是验证是否存在的函数——它工作正常

```
Public Function _checkAnaNoGrupo(ByVal _grupoA As Integer, ByVal _codAna As String) As Boolean

    _tabCheckAnaNoGrupo() 

    Dim _ck As Boolean = False

    For Each _tRow As DataRow In _tabCheckAnaNoGrupo.Rows
        If _tRow("FK_ID_GRUPO_ANA").ToString.Contains(_grupoA) And _tRow("ID_ANA").ToString.Contains(_codAna) Then
            _ck = True
        Else
            _ck = False
        End If
    Next

    Return _ck

End Function 
```

在这里，我将 SQL 表中的数据放入 DataTable：

```
 Public Function _tabCheckAnaNoGrupo() As DataTable

    Dim _tabCKana As New DataTable

    _query = "SELECT * FROM dbo.tbl_ENC_GRUPO_ANA_LINHA"

    _adapt.SelectCommand = New SqlCommand(_query, _con.connect)

    _adapt.Fill(_tabCKana)

    Return _tabCKana

End Function 
```

我的问题是：如果我运行这样的代码，插入语句可以正常工作，但重复行。

但是，如果我使用放置在“**谜**”中的 _query 运行代码（见 UP），则 INSERT 什么也不做。没有错误 - 没有

我希望你能帮助我，可能是一个愚蠢的错误，但已经尝试了几种方法，结果总是一样的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T14:32:54.413

好的！我发现了问题并修复了它。

在我的函数中检查是否存在

```
Public Function _checkAnaNoGrupo(ByVal _grupoA As Integer, ByVal _codAna As String) As Boolean

    _tabCheckAnaNoGrupo()

    Dim _ck As Boolean = False

    For Each _tRow As DataRow In _tabCheckAnaNoGrupo.Rows
        If _tRow("FK_ID_GRUPO_ANA").ToString.Contains(_grupoA) And _tRow("ID_ANA").ToString.Contains(_codAna) Then
**ck = True**

**Return _ck**

**Exit Function**

'i exit the function when he found a match, else will do the for , and the _ck value will be always false.
'So when find the first match exit the function and return TRUE

        Else
            _ck = False
        End If
    Next

    Return _ck

End Function 
```

我的谜团已解决

# java - 小困惑：为什么会出现空指针异常？

> ID：15006517
> 
> 赞同：3
> 
> 时间：2013-02-21T15:51:11.067
> 
> 标签：java, nullpointerexception, puzzle

## 介绍

我被困在这个问题上几分钟。所以，它可能会帮助其他人，这是一个有趣的错误。但是解决第一个问题让我想到了另一个问题。

* * *

## 第一个谜题：

**考虑以下代码：**

```
public void setValue(ValueWrapper valueWrapper) {

        if (anotherValueWrapper == null) {
            anotherValueWrapper = new AnotherValueWrapper();
        }

        anotherValueWrapper.setValue(valueWrapper == null ? null : valueWrapper.getValue());
    } 
```

**事实 ：**

*   这段代码编译
*   getter 和 setter 是标准（没有比返回字段或设置更多的代码）

**问题**

在执行过程中，有一种情况是代码失败并返回空指针异常。

**第一个难题是：这段代码什么时候会导致 NullPointerException？**

*不要看第二个问题，因为如果你没有找到第一个问题，那就是剧透。*

* * *

## 第二个问题

好的，你找到它（或者可能没有）：问题是当 AnotherValueWrapper 是这样写的：

```
public class AnotherValueWrapper {
  private long value;

  public long getValue() { return value; }

  public void setValue(long value) { this.value = value; }
} 
```

和价值包装器：

```
public class ValueWrapper {
  private Long value;

  public Long getValue() { return value; }

  public void setValue(Long value) { this.value = value; }
} 
```

第二个问题来了：

如果我写：

```
anotherValueWrapper.setValue(null); 
```

或者

```
anotherValueWrapper.setValue(valueWrapper == null ? "test": valueWrapper.getValue()); 
```

if 由于`anotherValueWrapper.setValue`需要原始（长）而不是`Long`（对象）而无法编译。

但是这段代码编译：

```
anotherValueWrapper.setValue(valueWrapper == null ? null : valueWrapper.getValue()); 
```

为什么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T16:03:38.107

当您执行 setValue(null) 或 setValue("test") 时，它会显式传入一个 Object 和一个 String 类，并且它们与原始类型 long 不匹配。

但是，传入对象类型 Long 是可以的，因为 Java 的自动装箱功能会自动在原始类型及其对象包装器之间进行转换。当您将 Long 对象传递给 anotherValueWrapper 的 setValue() 方法时，它会在底层执行 Long 的 longValue() 方法，如果 Long 对象为 null，它将导致 NullPointerException。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T15:57:40.010

和

```
anotherValueWrapper.setValue(valueWrapper == null ? null : valueWrapper.getValue()); 
```

`null`确实是`Long`尝试自动装箱`long`并因此引发空指针异常的类型

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T15:55:54.750

因为`Long`和`String`不能互换，但是`Long`和`null`是..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T15:56:19.043

```
anotherValueWrapper.setValue(null); 
```

无法编译，因为您无法将原语设置为 null。AnotherValueWrapper 使用 long - 一种原语 - 用于“值”字段。

```
anotherValueWrapper.setValue(valueWrapper == null ? "test": valueWrapper.getValue()); 
```

无法编译，因为“test”是一个字符串，因此不能分配给 long 变量。

# jquery - JQuery 自动完成内联（如萤火虫）

> ID：15006519
> 
> 赞同：1
> 
> 时间：2013-02-21T15:51:15.120
> 
> 标签：jquery, firebug, inline

我知道 JQuery 自动完成插件，但这些插件会在键入文本下方的下拉列表中为您提供答案。是否有一种方法或插件可以让您拥有类似于 Firebug（在键入 CSS 时）或 Google Developer Tools 的自动完成功能，其中答案与他们输入的文本内联提供给用户？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T16:01:11.947

插件[`inlineComplete()`](http://pburke.de/jquery-inlinecomplete-inline-auto-complete-for-text-input/)应满足您的要求：

[http://pburke.de/jquery-inlinecomplete-inline-auto-complete-for-text-input/](http://pburke.de/jquery-inlinecomplete-inline-auto-complete-for-text-input/)

```
var termListUrls = ["facebook.com", "apple.de", "google.de", "www.golem.de", "golem.de"];

$('[name=autocomplete_urls]').inlineComplete({
    submitOnReturn: true,
    terms: termListUrls
}); 
```

***现场演示**： http: [//pburke.de/jquery/inlinecomplete/](http://pburke.de/jquery/inlinecomplete/)*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-30T15:08:59.260

经过一段时间寻找与 ajax（数据库访问）内联的自动完成功能后，我决定编写一个。希望结果可以帮助[http://plugins.jquery.com/tryonline/](http://plugins.jquery.com/tryonline/)

# asp.net - asp.net c# Active Directory 响应时间慢

> ID：15006520
> 
> 赞同：0
> 
> 时间：2013-02-21T15:51:14.740
> 
> 标签：asp.net, performance, activedirectorymembership

我设法编写了一个自定义成员资格提供程序，它将 Active Directory 与 SQL Server 上的某些功能混合在一起。大约一个月以来，当我调用“UserPrincipal.FindByIdentity”从 AD 检索一些用户信息时，我承认使用这个工具响应时间很慢。每个 SamAccountName 的响应时间大约为 5 秒，这里我们说的是大约 30 个 AD 用户。

尽管如此，登录时间很快，角色查询也不错（不是很快，但可以忍受）。

域控制器和 Web 服务器在防火墙上启用了正确的端口（尽管 Web 服务器位于 DMZ 中），没有明显的延迟。

DNS 解析在所有网络中都很快。

有人遇到过类似的问题吗？

在此先感谢，V。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T10:07:59.703

我可以回答我自己的问题。问题似乎是我过度使用了 AD 上的连接。每个动作过去都会调用 principalcontext，这会减慢一切。

该死的我和我的虫子:)

无论如何感谢大家:)

# javascript - 比较javascript中的时间范围

> ID：15006527
> 
> 赞同：0
> 
> 时间：2013-02-21T15:51:28.027
> 
> 标签：javascript, validation, datetime

我需要验证用户选择的时间，开始日期必须大于上午 6 点且小于结束日期，不能超过第二天凌晨 2 点。

虽然我没有日期作为输入，但我认为我应该将日期附加到选择的时间以进行比较，这是实现它的最佳方法还是有更聪明的方法？

这是我到目前为止能想到的

```
function compareTimes(start,end){
    var t1 = new date();
    var t2 = new date();

    var starttime = t1 + " " + start;
    if (end >= '00:00'){
        t2.setDate(t2.getDate()+1);
    } 
    var endtime = t2 + " " + end;
    if(Date.parse ( endtime ) > Date.parse ( starttime )){
        alert ("greater than");
        return true
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:29:35.943

试试这个库。差异功能应该适合您。 [http://momentjs.com](http://momentjs.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T17:27:13.977

下面的函数将一个时间字符串（如您提供的时间字符串）附加到日期，并将其作为新的 Date 对象返回。如果您没有通过日期，它将使用今天的日期。

```
function setDateTime(timeString, date) {
    var result = (date ? new Date(date) : new Date())
    ,   match = /(\d+):(\d+)/.exec(timeString)
    ;
    result.setHours(Number(match[1]), Number(match[2]), 0, 0);
    return result;
} 
```

一旦你得到了你的`startDate = setDateTime(start);`和你的`endDate = setDateTime(end);`，你就可以使用[getHours](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getHours)方法来确定它是在凌晨 2 点之前还是下午 6 点之后。

注意，您可能应该检查小时是否 < 6，因此，请在其中添加一天（`endDate.setDate(endDate.getDate() + 1);`，否则您的结束日期将早于您的开始日期。:-)

# sql - 错误报告：SQL 错误：外键值没有匹配的主键值。完全困惑

> ID：15006528
> 
> 赞同：2
> 
> 时间：2013-02-21T15:51:30.333
> 
> 标签：sql, database, oracle

我可以肯定地说我是 SQL 新手，因此在编写将数据插入表的代码时，我收到了一个错误报告，我似乎无法理解它的含义，因此我希望有人可能会能够告诉我我犯了什么愚蠢的错误并消除了很多压力^.^

这是我得到的错误代码：

> 错误报告：SQL 错误：ORA-02291：违反完整性约束 (H.VENDOR_ID_FK) - 未找到父键 02291\. 00000 - “违反完整性约束 (%s.%s) - 未找到父键” *原因：外键value 没有匹配的主键值。*操作：删除外键或添加匹配的主键。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:08:22.317

如果我运行所有这些，我会在此之前遇到几个错误，我现在将跳过这些错误......反对这个 FK 的第一个似乎是：

```
INSERT INTO parts_order VALUES
        (2
        ,2
        ,95115995
        ,'Delivered'
        ,'04/dec/2012'
        ,'01/jan/2013'
        ,'20/dec/2012'
        ,'Handler Pro'
        ); 
```

最好将列放在插入子句中，这样您就可以看到哪些行（`INSERT INTO parts_order (order_id, job_id, vendor_id, ...) VALUES (4, 4, 95115995, ...)`即未来。最好不要依赖隐式日期转换（即使用`to_char('05/jan/2013', 'DD/mon/YYYY')`.

无论如何......它抱怨的约束是`VENDOR_ID_FK`，我们可以在表定义中看到：

```
CREATE TABLE parts_order
( order_id NUMBER(11)   
    CONSTRAINT order_id_pk  PRIMARY KEY
  ,job_id NUMBER(11)    
    CONSTRAINT job_id_fk REFERENCES maintenance(job_id)
  ,vendor_id    NUMBER(11)  
    CONSTRAINT vendor_id_fk REFERENCES parts_vendor(part_vendor_id)
  ,parts_status VARCHAR2(20)
  ,date_ordered DATE
  ,date_arrived DATE
  ,date_delivery_due    DATE
  ,part_name VARCHAR2(20) 
    CONSTRAINT part_name_nn NOT NULL); 
```

……反对`parts_vendor(part_vendor_id)`。错误的意思是`vendor_id`您插入的 , , 在父表中`95115995`不存在- 这是真的，`parts_vendor`您只插入带有,和.`part_vendor_id``1``2``3``4`

约束按预期工作 - 它阻止您在没有“父”的情况下放入“子”记录。您需要`parts_vendor`为 ID 创建一条记录`95115995`，或者将`vendor_id`您尝试插入的值更改为`parts_order`已经存在的值。

# simplemembership - SimpleMembership - 有人让它对 n 层友好吗？

> ID：15006532
> 
> 赞同：17
> 
> 时间：2013-02-21T15:51:38.707
> 
> 标签：simplemembership

我们被告知，“SimpleMembership”是asp.net 成员/角色管理的未来。MVC4“互联网应用程序”模板使用 SimpleMembership 实现账户管理。但是，它的实现方式将所有应用程序层合并为 1。

让我感到震惊的是，在他们为使用 MVC 正确分层应用程序所做的所有工作之后，我们得到了这种用于没有 DI、使用 WebMatrix DLL 和完全缺乏 SoC 的会员资格的“前进之路”的粗制滥造实现。特别是 SimpleMembershipInitialization 的 ActionFilterAttribute - 它继承自 MVC 属性并直接调用 EF DBContext。

我意识到我很懒惰，但是有没有人使用 SimpleMembership 做了一个“正确的”模板，这意味着我可以在我的应用程序中拥有适当的分隔层，并且在我的 MVC 应用程序中没有 EF DBContext 引用？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-01T16:40:42.097

One of powerful concepts of SimpleMembership is that you can customize the user profile to fit your application needs, as [discussed in this article](http://kevin-junghans.blogspot.com/2013/01/seeding-customizing-aspnet-mvc.html). For example, you may want to [add email confirmation to your registration process](http://kevin-junghans.blogspot.com/2013/02/adding-email-confirmation-to.html) which will require storing the user's email address in the user profile. In the previous membership/role management for ASP.NET this was very ugly to implement and added properties were stored in a blob. Yuck!

So what does this have to do with your question on making SimpleMembership n-tier friendly? While I agree that what the template generates is not n-tier friendly I would also state that most real MVC applications of any complexity will require customizing SimpleMembership, and therefore will require making a tier or layer that is specific to the application requirements anyway. Stated another way, creating a reusable tier for SimpleMembership would only be useful in the most basic MVC apps.

Personally I have come to the conclusion that what is generated by the Internet template in regards to SimpleMembership will almost always be modified. As the [first article I referenced](http://kevin-junghans.blogspot.com/2013/01/seeding-customizing-aspnet-mvc.html) points out the first part of customization is getting rid of the SimplemembershipInitialization attribute, which is just a lazy way of initializing SimpleMembership in the event the developer is not using forms authentication. And often you will want to move the DBContext used by SimpleMembership into the DBContext for the rest of your application. User profiles are often tightly integrated with the rest of the application domain.

And since we are on the subject of SoC and ASP.NET security, I would argue that ASP.NET was never very good at this. For forms authentication you use an Authorize attribute on your controllers and/or actions which takes a role as a parameter. This forces the application developer to think about security design while designing the application domain. You have to determine what roles the application will have up front, and heaven forbid they change later because now you have to go through all of those attributes and update them accordingly. I have started to use a custom authorize attribute that takes as parameters a resource name and an operation type (ex: read, write, execute...). Then I can map roles to resource/operations in a database so that it can change easily, or even allow an administrator to make changes to how roles are implemented in the application. Microsoft is taking the same approach with [ClaimsPrincipalPermissionAttribute](http://msdn.microsoft.com/en-us/library/microsoft.identitymodel.claims.claimsprincipalpermissionattribute.aspx) now that they have incorporated [WIF](http://support.microsoft.com/kb/974405) into .NET 4.5.

**Updated 3/8/2013**

I have created an open source project on [CodePlex called SimpleSecurity](https://simplesecurity.codeplex.com/releases/view/103133) that decouples SimpleMembership from the MVC application. You can [read about it here](http://kevin-junghans.blogspot.com/2013/03/decoupling-simplemembership-from-your.html). I still think developers will most likely want to modify SimpleSecurity but since this is open source they can. We will see if this is something we can evolve to be a reusable and better SimpleMembership.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-03T23:55:17.123

我认为您的问题更多地与 SoC 相关，而不是 n 层架构（正如@klatzib 所指出的，这更多的是关于层之间的物理分离）。

我认为成员资格提供程序中的逻辑不应归类为业务逻辑，因为它们不包含应用程序或客户端特定的代码。事实上，提供者模型的想法是它履行一个通用合同，而不管它使用的上下文。开发人员常犯的一个错误是在应用程序特定的业务逻辑中进行扩展`MembershipProvider`和栓接，而这些业务逻辑应该存在于更高层中。如果这就是您想通过替代设计实现的目标，那么这是错误的方法。提供程序是 .NET 框架的插件，应该完全从代码中抽象出来。它们当然不应该包含您的应用程序域，并且您应该很少需要扩展它们。

以另一种方式解决您的问题，是否`SimpleMembershipProvider`禁止在应用程序设计甚至 n 层架构中使用 SoC？不，它没有。MVC4 模板是为简单而构建的，但`ActionFilter`用于初始化提供程序的不是成员实现的一部分，您可以以任何您认为合适的方式自由初始化提供程序（我更喜欢从 DI 容器工厂方法进行此调用）。事实上`SimpleMembershipProvider`，因为根本不直接依赖 EF，所以可以在您的 Web 应用程序中删除对 EF DbContext 的引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-01T22:08:16.183

接受的答案不正确，即不是 N-Tier。成员数据访问和业务逻辑发生在同一层。仅仅因为代码在不同的程序集中并不意味着它不在同一层。

如果没有到数据访问层的某种传输机制，这不是 N 层。

解决方案是继承和覆盖 WebMatrix SimpleMembershipProvider 类，以便可以在单独的主机上执行其数据访问调用。

我建议使用 dotPeek 查看 SimpleMembershipProvider，以便您知道在覆盖中要做什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T07:03:40.290

正是我想要的（几乎）。只是希望它没有绑定到实体框架，因为我希望让 Kevin 的 n 层解决方案与 Dapper ORM 一起工作:(

# java - 导出到 jar 时如何在 Eclipse 中分离 .java 文件

> ID：15006533
> 
> 赞同：0
> 
> 时间：2013-02-21T15:51:40.843
> 
> 标签：java, eclipse, jar, javac

我想知道如何使用包含所有源文件的文件夹同时将 java 项目导出到 .jar，所以我不会将类文件和 .java 文件混合在一起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:36:39.720

您可以通过右键单击要导出的选定项目 `Export --> Jar File`并检查以下选项来实现此目的。

![在此处输入图像描述](../Images/db475c5b586d054bcf1d90b3a5d28cf2.png)

然后点击完成。

# php - 如何从多维数组中计算数组中的总数

> ID：15006537
> 
> 赞同：0
> 
> 时间：2013-02-21T15:51:54.360
> 
> 标签：php, arrays, multidimensional-array

我有一个来自报告的数组。

该报告的信息类似于：

```
157479877294,OBSOLETE_ORDER,obelisk,19/01/2013 01:42pm
191532426695,WRONG_PERFORMANCE,g3t1,19/01/2013 01:56pm
159523681637,WRONG_PERFORMANCE,g3t1,19/01/2013 01:57pm
176481653889,WRONG_PERFORMANCE,g4t1,19/01/2013 01:57pm
167479810401,WRONG_PERFORMANCE,g4t1,19/01/2013 02:00pm
172485359309,WRONG_PERFORMANCE,g4t2,19/01/2013 02:02pm
125485358802,WRONG_PERFORMANCE,g4t2,19/01/2013 02:02pm
172485359309,DAY_LIMIT_EXCEEDED,obelisk,19/01/2013 02:03pm
125485358802,DAY_LIMIT_EXCEEDED,obelisk,19/01/2013 02:03pm 
```

我需要做的是获取每种错误类型的总数和位置，因此第一个错误是：'OBSOLETE_ORDER' 和位置：'obelisk'。我尝试了多种方法，但我能想到的最好方法是多维数组：

```
$error_handle = fopen("$reportUrl", "r");
while (!feof($error_handle) )
   {
      $line_of_text = fgetcsv($error_handle, 1024);
      $errorName = $line_of_text[1];
      $scannerName = $line_of_text[2];
      if($errorName != "SCAN_RESULT" && $errorName != "" && $scannerName != "SCAN_LOGIN" && $scannerName != "")
          {
              $errorsArray["$errorName"]["$scannerName"]++;
          }
   }
fclose($error_handle);
print_r($errorsArray); 
```

给了我以下内容：

```
Array ( [OBSOLETE_ORDER] => Array ( [obelisk] => 1 ) [WRONG_PERFORMANCE] => Array ( [g3t1] => 2 [g4t1] => 2 [g4t2] => 2 ) [DAY_LIMIT_EXCEEDED] => Array ( [obelisk] => 2 ) ) 
```

这太棒了......除了我如何把它分开添加到我的 sql 数据库中？！（我有兴趣在数组所在的键下获取该键的键和总数）

然后将其添加到表中

-errors- (index)id_errors id_event id_access_scanner id_errors_type total_errors

-errors_type- (index)id_errors_type name_errors_type

-access_scanner- (index)id_access_scanner id_portal name_access_scanner

请帮忙！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:48:33.717

多维数组超出了您的需要。采取的方法是创建自己的字符串（`$arrayKey`在我的示例中）以用作组合扫描仪名称和错误的数组键，以便您可以获得计数。

```
//this is the array containing all the report lines, each as an array
$lines_of_text;

//this is going to be our output array
$errorScannerArray = array();

//this variable holds the array key that we're going to generate from each line
$arrayKey = null;

foreach($lines_of_text as $line_of_text)
{
    //the array key is a combination of the scanner name and the error name
    //the tilde is included to attempt to prevent possible (rare) collisions
    $arrayKey = trim($line_of_text[1]).'~'.trim($line_of_text[2]);

    //if the array key exists, increase the count by 1
    //if it doesn't exist, set the count to 1
    if(array_key_exists($arrayKey, $errorScannerArray))
    {
        $errorScannerArray[$arrayKey]++;
    }
    else
    {
        $errorScannerArray[$arrayKey] = 1;
    }
}

//clean up
unset($line_of_text);
unset($arrayKey);
unset($lines_of_text);

//displaying the result
foreach($errorScannerArray as $errorScanner => $count)
{
    //we can explode the string hash to get the separate error and scanner names
    $names = explode('~', $errorScanner);
    $errorName = $names[0];
    $scannerName = $names[1];

    echo 'Scanner '.$scannerName.' experienced error '.$errorName.' '.$count.' times'."\n";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T00:18:33.343

为了查看每个结果，我只做了以下操作：

```
foreach ($errorsArray as $errorName=>$info)
    {
        foreach ($info as $scannerName=>$total)
            {
                print "$errorName -> $scannerName = $total </br>";
            }
    } 
```

现在只需将其连接到 sql

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T17:03:34.800

使用您编辑的问题，这个更简单的循环将为您工作，您只需将数据插入循环内的数据库中，而不是回显它：

```
$errorsArray = Array (
        [OBSOLETE_ORDER] => Array (
                                    [obelisk] => 1 
                                )
        [WRONG_PERFORMANCE] => Array (
                                    [g3t1] => 2 
                                    [g4t1] => 2 
                                    [g4t2] => 2 
                                ) 
        [DAY_LIMIT_EXCEEDED] => Array ( 
                                    [obelisk] => 2 
                                ) 
    )

foreach($errorsArray as $row => $errors) {
    foreach($errors as $error => $count) {
        echo $row;  // 'OBSOLETE_ORDER'
        echo $error;    // 'obelisk'
        echo $count;    // 1
        // insert into database here
    }
} 
```

* * *

旧答案您只需要一个新数组来保存您需要的信息，理想情况下是一个计数。我假设正确的数据格式是：

```
$report = [
  ['157479877294','OBSOLETE_ORDER','obelisk','19/01/2013 01:42pm'],
  ['191532426695','WRONG_PERFORMANCE','g3t1','19/01/2013 01:56pm'],
  ['159523681637','WRONG_PERFORMANCE','g3t1','19/01/2013 01:57pm'],
  ['176481653889','WRONG_PERFORMANCE','g4t1','19/01/2013 01:57pm'],
  .....
];

foreach($report as $array) {
  $errorName = $array[1];
  $scannerName = $array[2];
  if(exists($errorsArray[$errorName][$scannerName])) {
    $errorsArray[$errorName][$scannerName] = $errorsArray[$errorName][$scannerName] + 1;
  }
  else {
    $errorsArray[$errorName][$scannerName] = 1;
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T17:04:18.367

```
$list = array();
foreach ($lines as $line) {
    $values = explode(',' $line);
    $error = $values[1];
    $scanner = $values[2];
    if (!isset($list[$error])) {
         $list[$error] = array();
    }
    if (!isset($list[$error][$scanner])) {
         $list[$error][$scanner] = 1;
    } else {
         $list[$error][$scanner]++;
    }
} 
```

# php - PHP：如何从函数返回多维数组

> ID：15006541
> 
> 赞同：0
> 
> 时间：2013-02-21T15:52:01.640
> 
> 标签：php, arrays, multidimensional-array, return-value

我的代码类似于；

```
function myFunc() {
    $myArry = array();
    $myArry[1]['first'] = "First";
    $myArry[1]['second'] = "Second";
    $myArry[2]['first'] = "First";
    $myArry[2]['second'] = "Second";
    $myArry[3]['first'] = "First";
    $myArry[3]['second'] = "Second";
    echo "before return: ".count($myArry);
    return $myArry;
}

// main code
$returnedArry = array(myFunc());
echo "after return: ".count($returnedArry); 
```

输出：

```
before return: 3
after return: 1 
```

这里发生了什么，有人可以解释一下吗？还有，我该怎么办？

谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T15:52:57.893

```
$returnedArry = array(myFunc()); 
```

那行代码正在将您的数组放入另一个数组中。由于它是该数组中唯一的元素，因此计数为 1。您真正想要的是：

```
$returnedArry = myFunc(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T15:57:27.223

您将返回的值包装`$myArry`在一个新数组中，因此它是`$returnedArry`.

```
 $returnedArray = array(
           array(
              0 => array(
                      'first' => "First",
                      'second' => "Second"
                   ),
              1 => ...
              2 => ...
          )
    ) 
```

要产生您正在寻找的结果：

```
 $returnedArray = myFunc(); 
```

将来，您可以使用`print_r`或`var_dump`帮助向您展示这些数组中的内容。

# playframework - 播放2.1，直到服务器重新启动才能访问上传的图像

> ID：15006542
> 
> 赞同：0
> 
> 时间：2013-02-21T15:52:10.490
> 
> 标签：playframework, playframework-2.1

我制作了一个用于上传将文件保存到播放子目录的图像的表单`/public/images/`

例如`/public/images/test.jpg`，此处保存的图像可以通过以下方式访问`http://example.com/assets/images/test.jpg`

浏览器指示此链接已损坏，直到我重置播放服务器，然后它才允许我访问最近上传的图像。

当我使用“运行”命令在开发模式下运行播放服务器时，无需进行此类重置即可上传和访问图像。

在`/conf/routes`我有

```
GET        /assets/*file        controllers.Assets.at(path="/public", file) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:40:12.487

我在 Google 线程上找到了一些信息 - [https://groups.google.com/forum/?fromgroups=#!topic/play-framework/3_H_YmxzQUo](https://groups.google.com/forum/?fromgroups=#!topic/play-framework/3_H_YmxzQUo)

显然 Play 的设计目的不是我描述的那样，但我可以编写自己的控制器来让它工作，为此我添加了`/conf/router`

```
GET     /assets/images/upload/:file_name        controllers.ServeImage.at(file_name) 
```

并创造了`/controllers/ServeImage.java`

```
package controllers;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import org.apache.commons.io.IOUtils;
import play.mvc.Controller;
import play.mvc.Result;

public class ServeImage extends Controller
{
    public static Result at(String filename)
    {
        response().setContentType("image");     
        byte[] i_file = null;

        try
        {
            i_file = IOUtils.toByteArray(new FileInputStream(new File("public/images/upload/"+filename)));
        } catch (FileNotFoundException e)
        {
            // return 404
        } catch (IOException e)
        {
            // return 404           
        }

        return ok(i_file);
    }   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-23T08:39:10.093

我遇到了同样的问题。令人惊讶的是，玩游戏并不容易做到这一点。这是一个相关的控制器，它在 imagescalr 库的帮助下从外部路径提供缩略图。

```
package controllers;

import java.awt.image.BufferedImage;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.IOException;
import org.apache.commons.io.output.ByteArrayOutputStream;
import play.mvc.Controller;
import play.mvc.Result;
import play.Play;

import javax.imageio.*;
import static org.imgscalr.Scalr.*;

public class ServeThumbnail extends Controller {
    public static Result at(String filename) {
        response().setContentType("image");
        ByteArrayOutputStream img_stream = null;
        try {
            File file = new File(Play.application().configuration().getString("home_dir") + "/pictures/"+filename);
            BufferedImage thumbnail = createThumbnail(ImageIO.read(file));
            img_stream = new ByteArrayOutputStream();
            ImageIO.write(thumbnail, "jpg", img_stream);
        } catch (FileNotFoundException e) {
            return badRequest("image not found");
        } catch (IOException e) {
            return badRequest("image not found");
        }
        return ok(img_stream.toByteArray());
    }

    public static BufferedImage createThumbnail(BufferedImage img) {
        img = resize(img, Method.ULTRA_QUALITY, 125, OP_ANTIALIAS, OP_BRIGHTER);
        return pad(img, 4);
    }
} 
```

# javascript - 每个 AngularJS 控制器一个脚本标签？

> ID：15006543
> 
> 赞同：2
> 
> 时间：2013-02-21T15:52:16.947
> 
> 标签：javascript, angularjs, modularity

刚开始使用angularjs。这真的很棒。我想让我的应用程序尽可能模块化。我的问题：每个 angularjs 控制器（服务等）我应该有一个脚本标签吗？有没有办法根据需要从服务器加载我的角度控制器（服务等）？Angular以某种方式做到了？我错过了什么吗？

**更新**

也许我还没有说清楚。我希望每个 angularjs 控制器（服务等）有一个 javascript 文件。就像我每个 nodejs 模块服务器端有一个文件一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:25:43.140

我建议你以角种子项目为起点。[你可以在Github](https://github.com/angular/angular-seed)上找到它。

> 这个项目是一个典型的 AngularJS web 应用程序的应用程序框架。您可以使用它来快速引导您的 angular webapp 项目和这些项目的开发环境。

这是他们建议为 controllers.js 文件采用的样式：

```
'use strict';

/* Controllers */

function MyCtrl1() {}
MyCtrl1.$inject = [];

function MyCtrl2() {
}
MyCtrl2.$inject = []; 
```

我还建议将这种方法用于开发环境。您可以在部署到生产环境时压缩并加入文件。

# sockets - 当应该有 FD_READ 时接收 FD_CLOSE

> ID：15006544
> 
> 赞同：1
> 
> 时间：2013-02-21T15:52:22.620
> 
> 标签：sockets, tcp, winsock2

我的一个客户工作站上有一个奇怪的问题。我有一个简单的应用程序，通过网络在两个端点之间交换一些数据。

基本上交易是这样的：

1.  客户端 A 侦听传入连接
2.  客户端 B 连接到 A 并发送一些数据
3.  客户端 A 读取此数据以进行进一步处理

现在奇怪的是客户端 A 没有接收到全部数据（有时它是缓冲区的一部分，有时它是空的）。

A客户端使用WSAEventSelect函数，等待FD_READ读取B发送的数据，等待FD_CLOSE检测断开连接。

通常（除了这个特定的客户端之外，每次都会发出 FD_READ 信号，处理数据，然后发出 FD_CLOSE 信号，一切都很好，但在这里，FD_READ 我收到了 FD_CLOSE。

有人能告诉我这是怎么可能的吗？另一件事是该程序运行了大约一年，然后突然崩溃了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T23:29:46.417

> 现在奇怪的是客户端 A 没有接收到全部数据（有时它是缓冲区的一部分，有时它是空的）。

这并不奇怪，这就是 TCP 的工作原理，只是在阻塞模式下您永远不会收到零字节。

> 通常（除了这个特定的客户端之外，每次）都会发出 FD_READ 信号，处理数据，然后发出 FD_CLOSE 信号，一切都很好，但在这里，FD_READ 我收到了 FD_CLOSE。

请注意，FD_READ 可以发出任意次数的信号，而不仅仅是一次。您不能保证在一次阅读中收到完整的消息。

> 有人能告诉我这是怎么可能的吗？

客户端已关闭连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-22T15:19:57.813

引用[http://msdn.microsoft.com/en-us/library/windows/desktop/ms741576%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms741576%28v=vs.85%29.aspx)

“应用程序应在收到 FD_CLOSE 后检查剩余数据，以避免丢失数据的任何可能性。”

因此，如果与 FD_CLOSE 通知相关的错误代码为 0，您应该检查是否还有数据要读取，这可能是您丢失数据的位置。

如果错误代码不是 0，则说明有错误，丢失的数据可能会丢失。

# c# - 填充基本属性的最佳方法是什么？

> ID：15006545
> 
> 赞同：-2
> 
> 时间：2013-02-21T15:52:22.760
> 
> 标签：c#, inheritance

我想知道是否有人可以帮助我填充派生类的基本属性的最佳方法。我想使用一种方法来填充基的属性，无论是使用基还是子。

这是我要问的一个例子：

```
public class Parent
{
     public string Id {get; set;}
}

public class Child : Parent
{
     public string Name {get; set;}
}

public Parent GetParent(int ID)
{
     Parent myParent = new Parent();
//Lookup and populate
return Parent;
}

public Child GetChild(string name)
{
Child myChild = new Child();

//Use the GetParent method to populate base items
//and then  
//Lookup and populate Child properties

return myChild;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T15:57:59.047

我想你可能有点过于复杂了。看看这段代码，它使用继承和构造函数来初始化对象：

```
public class Parent
{
    public string Id {get; set;}

    public Parent(string id)
    {
        Id = id;
    }
}

public class Child : Parent
{
    public string Name {get; set;}

    public Child(string id, string name) : base(id) // <-- call base constructor
    {
        Name = name;
    }
} 
```

它使用构造函数进行初始化，使用[base 关键字](http://msdn.microsoft.com/en-us/library/hfw7t1ce%28v=vs.100%29.aspx)从派生类调用父构造函数。除非你真的需要一个工厂方法来构造你的对象，否则我会朝这个方向发展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T15:55:03.123

如果您不想在`constructor`.

注意：`constructor`并不总是被调用，特别是如果使用某些序列化器对类型进行反序列化。

```
public class Parent
{

     public string Id {get; set;}

     public virtual void InitPorperties() {
        //init properties of base
     }

}

public class Child : Base {

    public override void InitProperties() {
        //init Child properties
        base.InitProperties();
    }
} 
```

在此之后，您可以像这样使用它：

```
public Parent GetParent(int ID)
{
     var myParent = new Parent();
     parent.InitProperties();
     return myParent;
}

public Parent GetChild(int ID)
{
     var  child= new Child();
     child.InitProperties();
     return child;
} 
```

就像它有硬币的另一面一样：调用者必须调用`InitProperties`方法才能正确初始化对象。

如果您不关心序列化/反序列化，请坚持使用构造函数，实际上在每种类型的 ctor 中调用此方法（`Parent`, `Child`）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T15:58:18.223

如果您不想使用标准方式

```
 Child myChild = new Child();
    myChild.Name = "name";
    myChild.Id = "1"; 
```

您可以像这样通过构造函数填充它们。

```
 public class Parent
    {
        public Parent(string id)
        {
            Id = id;
        }

        public string Id { get; set; }
    }

    public class Child : Parent
    {
        public Child(string id, string name)
            : base(id)
        {
            name = Name;
        }

        public string Name { get; set; }
    } 
```

而当你不思念它

```
 Child myChild = new Child("1", "name"); 
```

在我看来，这是一种非常巧妙的方法。

# quickbase - 通过表名获取 dbid

> ID：15006547
> 
> 赞同：1
> 
> 时间：2013-02-21T15:52:25.447
> 
> 标签：quickbase

据我所知，所有 QuickBase API 调用都使用以下语法调用：`http://<quickbase>/db/<dbid>?`

有没有办法在不导航到 QuickBase 中的数据库表的情况下获取 dbid 字段？

如果上述方法不可行，除了创建另一个存储您想要的表的 ID 的表之外，还有其他人会推荐什么吗？

使用后一种方法，我相信我只需要存储一个 dbid 并可以删除其余的（我相信仍然需要用户输入，但比要求他们更改代码要好）。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T18:31:13.507

**[API_GetSchema](http://www.quickbase.com/api-guide/getschema.html)**将返回 dbid 列表。

```
https://www.quickbase.com/db/<yourApplicationId>?act=API_GetSchema&apptoken=<yourApplicationTokenId>&fmt=flat 
```

# android - 从 AsyncTask 返回 JSON 数组

> ID：15006548
> 
> 赞同：2
> 
> 时间：2013-02-21T15:52:26.147
> 
> 标签：android, android-asynctask

我有一个获取 JSON 数组的 AsyncTask。我将如何返回 JSON 数组，如下所示：

```
JSONArray channels = new Json().execute(foo, bar);package com.example.tvrplayer; 
```

Eclips告诉我我不能这样做，应该是：

```
AsyncTask<Object, Integer, JSONArray> channels = new Json().execute("http://192.168.2.136:8080/rest/channel/"+ linkid +"/"+ username, "GET"); 
```

Json 异步类：

```
public class Json extends AsyncTask<Object, Integer, JSONArray> {

    Json(){
        super();
    }

    @Override
    protected JSONArray doInBackground(Object... params) {
        // Log.i("JSON",url);
        String url = (String) params[0];
        String method = (String) params[1];
        InputStream is = null;
        String result = "";
        JSONArray jsonObject = null;

        // HTTP
        try {
            HttpClient httpclient = new DefaultHttpClient(); // for port 80 requests!
            if ( method == "GET") {
                HttpGet httpget = new HttpGet(url);
                HttpResponse response = httpclient.execute(httpget);
                HttpEntity entity = response.getEntity();
                is = entity.getContent();
            } else if (method == "POST") {
                HttpPost httppost = new HttpPost(url);
                HttpResponse response = httpclient.execute(httppost);
                HttpEntity entity = response.getEntity();
                is = entity.getContent();
            }

        } catch(Exception e) {
            Log.e("JSON - 1 -", e.toString());
            return null;
        }

        // Read response to string
        try {           
            BufferedReader reader = new BufferedReader(new InputStreamReader(is,"utf-8"),8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            result = sb.toString();    
//          result = result.substring(1,result.length()-1);
//          Log.d("JSON result",result);
        } catch(Exception e) {
            Log.e("JSON - 2 -", e.toString());
            return null;
        }

        // Convert string to object
        try {
            jsonObject = new JSONArray(result);            
        } catch(JSONException e) {
            Log.e("JSON - 3 -", e.toString());
            return null;
        }
        return jsonObject;
    }
    @Override
    protected void onPostExecute(JSONArray result)
    {
        super.onPostExecute(result);
        final Message msg = new Message();
        msg.obj = result;
    }
} 
```

这就是我想要完成的：

```
JSONArray channels = new Json().execute("http://192.168.2.136:8080/rest/channel/"+ linkid +"/"+ username, "GET");
        try {
            for (int i=0; i < channels.length(); i++) { 
                JSONObject channel_data = channels.getJSONObject(i);
                String channelID = channel_data.getString("ChannelID").toLowerCase();
                JSONArray json = new Json().execute("http://192.168.2.136:8080/rest/program/"+ linkid +"/"+ username +"/" + channelID, "GET"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T15:59:16.957

你不是`return`从`AsyncTask`. 您在收工之前指示`AsyncTask`要做的事情，但它不会`return`对您有任何帮助。这就是为什么它被称为“异步”：你不等待它，它不等你。

例如，将此代码与`SyncTask`：

```
result = SyncTask();
label.setText(result); 
```

这意味着在完成之前**不会执行**`setText()`该行并产生一个. 是同步的。相反，使用异步，您可以：**`SyncTask()``result`**

 **```
new AsyncTask() {
    @Override
    void onPostExecute(result) {
        label.setText(result)
    }
}.start() 
```

这带来了一个全新[的麻烦世界](http://blogactivity.wordpress.com/2011/09/01/proper-use-of-asynctask/)。我建议您看一下`Loaders`，它们的工作方式类似，但提供了更强大的抽象。

另外，我告诉你这个事实意味着有很多事情你不明白。您可能想在 Google 上搜索相关文档、教程或文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T16:01:36.380

您不必从 ASyncTask 返回任何内容

```
@Override
protected void onPostExecute(JSONArray result)
{
    super.onPostExecute(result);
    channels = result
    //<here you can use channels to integrate with other code>
} 
```

这里通道将被声明为类变量

```
 JSONArray channels; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T15:59:59.793

Asynctask 中的 execute(Runnable runnable) 返回 void。

在 onPostExecute() 中分配您的结果，如下所示：

渠道=结果；做某事（频道）**

# perl - 如何使用反引号捕获 time(1) 的经过时间输出？

> ID：15006551
> 
> 赞同：3
> 
> 时间：2013-02-21T15:52:29.463
> 
> 标签：perl, time

我正在尝试[`time`](http://www.kernel.org/doc/man-pages/online/pages/man1/time.1.html)使用以下命令获取输出。我唯一想要的是得到经过的时间，但我什么也没得到。

```
$result = `/usr/bin/time -f %e "./"$PROG > /dev/null`;
print $result; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T16:24:54.920

所需的重定向有点棘手。

```
my $result = `/usr/bin/time -f %e "./"$PROG 2>&1 >/dev/null`; 
```

`time`在标准错误（文件描述符 2）上输出其测量值，但 Perl 反引号捕获标准*输出*（文件描述符 1）。将上面的重定向序列解读为“先将标准错误发送到标准输出的目的地，然后丢弃原来的标准输出”。</p>

[如何`STDERR`从外部命令](http://perldoc.perl.org/perlfaq8.html#How-can-I-capture-STDERR-from-an-external-command%3f)中捕获？Perl FAQ 中解决了您所看到的问题。

> 要捕获命令`STDERR`但丢弃它`STDOUT`：
> 
> ```
> $output = `cmd 2>&1 1>/dev/null`;           # either with backticks
> $pid = open(PH, "cmd 2>&1 1>/dev/null |");  # or with an open pipe
> while (<PH>) { }                            #    plus a read 
> ```
> 
> … 在所有这些示例中，排序都很重要。这是因为 shell 严格按照从左到右的顺序处理文件描述符重定向。
> 
> ```
> system("prog args 1>tmpfile 2>&1");
> system("prog args 2>&1 1>tmpfile"); 
> ```
> 
> 第一个命令将标准输出和标准错误都发送到临时文件。第二个命令在那里只发送旧的标准输出，旧的标准错误显示在旧的标准输出上。

请注意，`$result`它将包含一个尾随换行符，您可以将其删除，`chomp`如

```
chomp $result; 
```

或全部在一行中

```
chomp(my $result = `/usr/bin/time -f %e "./"$PROG 2>&1 >/dev/null`); 
```

# mysql - 如何在shell脚本中检查mysql查询的空结果

> ID：15006552
> 
> 赞同：0
> 
> 时间：2013-02-21T15:52:30.313
> 
> 标签：mysql, shell

我如何在shell脚本中检查mysql查询结果是否为空，例如在以下情况下，如果可能，在其他情况下，感谢您的帮助

```
 value2=`mysql -uroot -proot -Dproject_ivr_db -rN --execute "SELECT AcctualFormat FROM
 meritlist_date wHERE Discipline='phd' AND  FeeSubmissionDate='$value'"` 
```

# javascript - 使用javascript发布到表单时如何打开新窗口？

> ID：15006553
> 
> 赞同：1
> 
> 时间：2013-02-21T15:52:31.050
> 
> 标签：javascript

我有一个像这样的表格：

```
 <form method="post" action="task.cfm" name="lookup" id="lookup">
        <input type="hidden" name="action" value="">
        <input type="hidden" name="emailAddress" value="">
    </form> 
```

我正在使用此链接发布到此表单：

```
<a href="javascript:document.lookup.action.value='search';document.lookup.emailAddress.value='<cfoutput>#VARIABLES.decryptedEmailAddress#</cfoutput>';document.lookup.submit();">View User details</a> 
```

该链接有效，但我试图让它在新窗口中打开。target="_blank" 在这种情况下不起作用。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T15:56:14.707

将 target 属性添加到您的表单中：

```
<form method="post" action="task.cfm" name="lookup" id="lookup" target="_blank">
   <input type="hidden" name="action" value="">
   <input type="hidden" name="emailAddress" value="">
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T15:56:55.493

您是否将 target="_blank" 属性放在锚点或表单标签上？尝试将其放在表单标签上。

# git - git：合并分支并使用有意义的合并提交消息？

> ID：15006554
> 
> 赞同：33
> 
> 时间：2013-02-21T15:52:32.420
> 
> 标签：git, version-control, branching-and-merging

在我将功能分支合并回主分支后，我通常需要默认进行合并提交。但我想在此提交中使用来自我的功能分支的原始提交消息，而不是“合并分支 XXX”。

我该怎么做？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2015-10-15T16:36:49.817

只需将`-m`参数传递给`merge`命令：

```
$ git merge other-branch -m "Commit Message" 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-02-21T16:05:56.030

你基本上有两个选择。

**简单的解决方案：不要合并，Rebase**
Rebase 你的分支在主分支之上，解决冲突，然后合并。由于您将拥有直接的历史记录，因此您将能够快进以合并，这不会创建任何*合并提交*。

```
git checkout feature
git rebase main
# Resolve conflict if there is
git checkout main
git merge feature 
```

**第二个选项： Rebase -i**
您可以在合并后编辑您的历史记录（**在**您推送到远程之前）。您可以使用 rebase 交互模式来管理它。

```
git checkout main
git merge feature
#You merge and resolve conflict
git rebase -i <sha of the commit before the merge> 
```

然后，您将进入一个带有提交列表的交互式 shell，例如：

```
pick 73c991e Create progress bar module
pick b8a0b83 merge branch feature
pick 2120f47 Add user form
pick 70c55e4 Quiz prototype system 
```

您只需要添加`squash`或`s`代替`pick`：

```
pick 73c991e Create progress bar module
pick b8a0b83 merge branch feature
s 2120f47 Add user form
pick 70c55e4 Quiz prototype system 
```

该命令将挤压在一起`b8a0b83`并且`2120f47`. 下一步将是一个提交文本编辑器，您可以在其中合并两个提交消息，现在由您来正确编辑它们以仅保留原始消息。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-07-29T08:32:25.360

如果提交已经完成，您只需[修改](https://help.github.com/en/github/committing-changes-to-your-project/changing-a-commit-message)提交。

如果在提交之前，请在下面的示例中使用`git merge`like：

```
$ git checkout mainBranch
$ git merge featureBranch --squash --no-commit 
```

您可能需要解决冲突。

这种方法避免了自动提交，所有文件都留在索引上；因此，您可以使用任何您想要的提交消息来提交代码。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-22T18:31:14.763

我发现在合并提交之后。我可以添加一个修正提交“git ci --amend”来更改提交消息，这正是我所要求的。我会接受我自己的答案作为正确答案。

Simon Boudrias 和 ranendra 给出了相关的答案，这些答案也以不同的方式有效。所以我投票给他们。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-02-21T16:07:26.673

当 master 和本地分支中有不同的变更集时，*git会自动为**合并*创建一个额外的提交。要阻止此类额外提交的发生，您可以在将分支合并到 master 之前重新调整分支中的 master *。*

```
$ git pull(in master which retrieves the new changes>
$ git checkout <local_branch>
$ git rebase master 
$ git checkout master
$ git merge local_branch. 
```

# java - String.replace() 不起作用

> ID：15006555
> 
> 赞同：3
> 
> 时间：2013-02-21T15:52:33.353
> 
> 标签：java, string, replace

我拥有的是一个字符串数组，它是从我正在阅读的 .csv 文件中创建的。然后我想解析我要用于 ' 字符的值并将其替换为 \' 因为我将其输出到 javascript 文件。

这是我为此使用的代码：

```
while ((thisLine = myInput.readLine()) != null) {
        String[] line = thisLine.split("\t");                       
            if(line[4].indexOf("'") > -1){
                System.out.println(line[4]);
                line[4] = line[4].replace("'", "\'");
                System.out.println(line[4]);
            }               
            brand.add(line[4]);         
} 
```

但是，这是行不通的。替换后，我得到了相同的字符串。

这是因为字符串数组有问题吗？

我很感激在这件事上的任何帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-21T15:53:38.480

试试这样：

```
line[4] = line[4].replace("'", "\\'"); 
```

反斜杠必须“转义”。

如果`line[4] = line[4].replace("'", "\'");`零件`\'`被转换为只是`'`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-21T15:53:55.813

您违反了`"'"`与 相同的事实`"\'"`。它们是相同的字符串（单个字符，只是一个撇号）- 转义是*为了*允许`'\''`.

你要：

```
line[4] = line[4].replace("'", "\\'"); 
```

所以现在你正在转义反斜杠，而不是撇号。所以你用反斜杠然后撇号替换撇号，这就是你想要的。

有关在字符和字符串文字中转义的详细信息，请参阅[JLS 第 3.10.6 节。](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.6)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T15:55:40.047

你应该添加反斜杠\这样的东西

```
line[4] = line[4].replace("'", "\\'"); 
```

因为一个左斜杠 \ 是转义字符

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T15:54:50.350

您的问题看起来像是一个逃生问题。尝试 \\ 替换单个反斜杠。

# irc - IRC - 如何仅在频道上禁用邀请？

> ID：15006561
> 
> 赞同：3
> 
> 时间：2013-02-21T15:53:02.200
> 
> 标签：irc

我已经创建并注册了一个 IRC 频道，这样我可以在重新进入时恢复频道操作员状态。但是，今天我注意到来自服务器的这条消息：

> 无法加入#my-custom-channel（频道仅限邀请）。

我收到此消息的部分原因是 XChat 中的自动加入频道功能在我的用户昵称身份验证成功之前尝试加入频道（因此服务器不承认我是频道操作员）。成功通过服务器身份验证并恢复频道工作正常，但我想让频道公开。

我可以使用哪个 ChanServ 命令（或其他命令）来禁用仅在 IRC 频道上的邀请，以便任何人都可以加入？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T15:56:21.473

要删除频道上的仅限邀请模式，请尝试以下命令

`/mode #channelname -i`

您必须在频道中拥有操作员权限才能执行此操作。

根据 IRC 服务器提供的服务，您可能需要通过 ChanServ 删除仅限邀请才能使更改永久生效，当然这取决于您首先如何设置模式。

查看 ChanServ 帮助菜单以获取有关通道命令的更多信息。

`/msg ChanServ help`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T15:58:22.583

这应该做的工作

```
/mode #CHANNELNAME -i 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T15:58:03.643

如果您是频道操作员，您可以输入

```
/mode #channelname -i 
```

删除邀请标志

# php - 前端登录：重定向到用户创建的帖子

> ID：15006565
> 
> 赞同：1
> 
> 时间：2013-02-21T15:53:12.417
> 
> 标签：php, jquery, wordpress, forms

是否可以将前端登录的用户重定向到他们创建的帖子？如果有怎么办？

我在前端有下面的表格，它非常适合让人们登录，但并没有完全达到我想要的效果。

我创建了一个前端注册流程，它创建了一个新用户和一个帖子，并将某些详细信息填写到该帖子中。完成该过程后，他们将被发送到他们刚刚创建的帖子，然后允许他们在前端编辑所有详细信息。这对于第一次注册的人来说非常有效，但对于已经注册并想要登录的人，我无法完全实现我想要的。

当他们在下面的表格中填写详细信息时，我希望它重定向到他们注册时创建的帖子，这可能吗？

用户只能创建**一个**帖子...充当个人资料。所以我希望他们能够登录并被重定向到他们的个人资料。

如果有帮助，用户名与帖子标题相同（用户名是个人公司名称，也是帖子的名称）。例如，用户名 = 我的公司。帖子标题 = 我的公司。

```
 <?php if (!(current_user_can('level_0'))){ ?>   
                <form action="<?php echo get_option('home'); ?>/wp-login.php" method="post" id="login-form">
                    <p style="color:black!IMPORTANT;">Please login.</p>
                    <!--[if !(IE)]><!-->
                        <input type="text" placeholder="Username" name="log" id="log" value="<?php echo wp_specialchars(stripslashes($user_login), 1) ?>" />
                    <!--<![endif]-->
                    <!--[if (gte IE 6)]>
                        <input type="text" name="log" id="log" value="Username" />
                    <![endif]-->
                    <!--[if !(IE)]><!-->
                        <input type="password" placeholder="Password" name="pwd" id="pwd" />
                    <!--<![endif]-->
                    <!--[if (gte IE 6)]>
                        <input type="password" value="Password" name="pwd" id="pwd" />
                    <![endif]-->    
                    <p style="clear:both;width:115px;font-size:14px!IMPORTANT;float:left;">
                        <input style="width:14%!IMPORTANT;" name="rememberme" id="rememberme" type="checkbox" checked="checked" value="forever" /> Remember me
                    </p>

                    <input type="hidden" name="redirect_to" value="<?php echo $_SERVER['REQUEST_URI']; ?>" />
                    <p style="float:right;">
                        <a style="font-size:14px!IMPORTANT;" href="<?php echo get_option('home'); ?>/wp-login.php?action=lostpassword">Recover password</a>
                    </p>                                
                    <input style="margin-left:80px;float:left;" type="submit" name="submit" value="LOGIN" class="login-button" />                               
                </form>
                <div class="clear"></div>
            <?php } else { ?>
                <p>
                    You are currently logged in, would you like to <a href="<?php echo wp_logout_url($_SERVER['REQUEST_URI']); ?>">logout</a>?
                </p>
            <?php } ?> 
```

我猜下面...

我需要对用户名（在上面的表格中输入）做一些事情，然后将其与任何帖子的作者匹配，如果匹配则将它们发送到该页面......所有这些都在提交上面的表单之前。这需要在隐藏字段之前完成，因此可以将用户名字段输入隐藏输入值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T16:04:43.143

因为一个用户只能有**一个**帖子，你肯定有一个链接或方法来检测它，比如存储在数据库中的东西。您可以做的是在测试凭据是否正确时，找到链接，然后覆盖重定向。您甚至不需要在用户登录之前知道链接并将其隐藏，这是不可能的。

例子：

```
<?php
   ...get variables...;
   if( isValidUser()){
      $var = db->getUserPostId();
      $redirect = "posts.php?pid=".$var;
      header("Location: $redirect");
   else
      .. show error and go back..
?> 
```

**编辑：** javascript示例

```
<script>
    function onSubmit(){
        document.forms["login"]["redirect_to"].value = document.forms["login"]["log"].value;
    }
</script>
<form name="login" action="test.php" method="post" onsubmit="onSubmit()">
    <input type="text" name="log">
    <input type="password" placeholder="Password" name="pwd" id="pwd" />
    <input type="hidden" name="redirect_to" value="start">
    <input type="submit" name="submit" value="Login">
</form> 
```

该示例将在提交表单之前更改隐藏字段的值。您可以根据需要构建链接，该示例仅使用用户名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:02:24.470

当然这是可能的。`$_SERVER`您可以使用 php 的方法获取当前页面的 url 。这是一个教程 - **[PHP：如何获取当前页面 URL](http://webcheatsheet.com/PHP/get_current_page_url.php)**

然后你可以将这个数据传入到登录表单页面使用`GET`方法，这样登录页面（包含登录表单）就可以捕捉到这个url。然后，您可以将此 url 数据作为隐藏字段包含在登录表单中，或者作为操作目标 php 文件（如`<form method="post" action="target.php?targeturl=someurl.com/somepage"`）的一部分，其中表单的目标脚本文件可以读取此 url。然后处理完登录数据后，处理脚本可以将浏览器重定向到目标url。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T16:17:03.790

解决您的问题的简单方法是，一旦用户重定向到特定页面，例如，编辑帖子页面或编辑个人资料页面。您需要按会话保存页面的 URL。

```
$_SESSION['refpage'] = getPageUrl(); // this is your function that will return a current page url. 
```

After the user logged-in, you check if the session $_SESSION['refpage'] is exist, if found then redirect him e.g redirect("location:".$_SESSION['refpage'])

# php - 在wordpress中的url末尾添加额外的代码？

> ID：15006569
> 
> 赞同：0
> 
> 时间：2013-02-21T15:53:24.157
> 
> 标签：php, wordpress, wordpress-theming

我正在使用 Wordpress CMS 制作网站，但我遇到了 Wordpress 的 url 创建问题。

当我点击页面链接时，页面 url 如下所示：

```
http://example.com/page/?ID=603# 
```

一段时间后，页面 url 看起来像这样：

```
http://example.com/page/?ID=603#.USY_Xx1HI1M 
```

我不明白如何`.USY_Xx1HI1M`在网址末尾添加此代码。

所以小伙伴们，如果你有解决这个问题的方法，请与我分享。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-25T00:34:11.837

有两种方法可以从 URL 中删除哈希标记。

1）在脚本中，有一个属性控制是否显示主题标签。只需设置'hashAddressBar：false'

2) 为按钮生成代码时，有一个单选按钮显示“跟踪用户何时通过复制您的 URL 共享”，因此只需取消选中此选项，它就不会为 URL 生成 hast 标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-17T11:53:23.390

如果您使用 addthis，请仔细检查您是否已设置`data_track_clickback`为`data_track_addressbar`false，您可以在此处阅读更多信息：[https ://www.addthis.com/academy/removing-hashtags-anchors-and-tracking-codes-from-your-urls /](https://www.addthis.com/academy/removing-hashtags-anchors-and-tracking-codes-from-your-urls/)

# ios - 编辑事件不起作用

> ID：15006571
> 
> 赞同：1
> 
> 时间：2013-02-21T15:53:27.210
> 
> 标签：ios

我正在尝试获取某个文件的路径
，然后在 webview 中打开它。所以我需要用 '%20' 替换每个空格

```
NSString *test=@"filename";
NSString *finalPath12 = [test stringByAppendingString:@".pdf"];

NSString *path1 = [[NSBundle mainBundle] bundlePath];
NSString *finalPath1 = [path1 stringByAppendingPathComponent:finalPath12];

NSString *file =@"file://";
NSString *htmlfilename1 = [file stringByAppendingString:finalPath1];

NSString *pathtofile = [htmlfilename1 stringByReplacingOccurrencesOfString:@" " withString:@"%20"]; 
```

除 @"%20" 之外的任何字符串都在工作。

这非常适用于示例：

> NSString *pathtofile = [htmlfilename1 stringByReplacingOccurrencesOfString:@" " withString:@"string"];

但我需要@"%20"。我错过了什么？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T15:55:14.110

已经有`[NSString stringByAddingPercentEscapesUsingEncoding:]`（[参考](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/stringByAddingPercentEscapesUsingEncoding%3a)）用于这个目的。

但是，在您的情况下，由于您需要一个 URL，您可以将问题中的所有行替换为：

```
NSURL *url = [[NSBundle mainBundle] urlForResource:@"filename" withExtension:@"pdf"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T15:55:56.257

你需要使用`@"%%20"`.

因为第一个 % 被视为转义/野生字符。

或使用

```
stringByAddingPercentEscapesUsingEncoding: 
```

# asp.net-mvc - 使 URL 语言特定（通过路由）

> ID：15006572
> 
> 赞同：11
> 
> 时间：2013-02-21T15:53:28.227
> 
> 标签：asp.net-mvc, localization, asp.net-mvc-routing, globalization

很难找到这个特定问题的答案，所以在这里弹出它：

我们希望建立完全特定于语言的网址，这意味着

> www.mysite.com/EN
> 
> www.mysite.com/DE

这是在 RouteConfig 中完成的

```
url: "{language}/{controller}/{action}/{id}" 
```

但接下来是棘手的部分：

> www.mysite.com/EN/Categories
> 
> www.mysite.com/DE/Kategorien

即使控制器名称以多种语言出现，但指向同一个控制器。这甚至可能吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-21T16:36:22.470

好吧，这是部分可能的（仅限语言部分）。不同语言的控制器名称绝对是一个有趣的点，但我认为很难做到这一点。想想像阿拉伯语和希伯来语这样的比迪语会是什么样子。在不同的语言中使用控制器可能是一个好主意，但你会给自己造成严重破坏，我相信你必须改变底层的 MVC 结构才能实现这一点。

语言更改部分很容易，可以像下面这样完成。

你可能想看的是全球化。基本上语言部分对应于当前线程 UI 文化。您需要的是以下内容：

1.  定义一条路线，如下所示：

    ```
    var lang = System.Threading.Thread.CurrentThread.CurrentUICulture.Name;

    routes.MapRoute(
        name: "Default",
        url: "{language}/{controller}/{action}/{id}",
        defaults: new { language = lang, controller = "Home", 
                        action = "Index", id = UrlParameter.Optional }
     ); 
    ```

2.  `Application_AcquireRequestState`像这样注册并定义它：

    ```
    protected void Application_AcquireRequestState()
    {
        var routes = RouteTable.Routes;

        var httpContext = Request.RequestContext.HttpContext;
        if (httpContext == null) return;

        var routeData = routes.GetRouteData(httpContext);

        var language = routeData.Values["language"] as string;
        var cultureInfo = new CultureInfo(language);

        System.Threading.Thread.CurrentThread.CurrentCulture = cultureInfo;
        System.Threading.Thread.CurrentThread.CurrentUICulture = cultureInfo;
    } 
    ```

    尽管`CurrentUICulture`您需要切换语言从资源文件加载信息，但您也应该将 ; 更改`CurrentCulture`为相同的`CultureInfo`；

3.  最后，确保您有相应的资源文件和备用资源文件。

我使用`Name`了属性，`CultureInfo`所以您的德语将是 de-DE、English en-US 等。这应该可以解决问题。

如果您需要更多信息，我可以上传一个示例 MVC 项目供您检查。

更新：做你想做的一种粗略的方法是将路线段的顺序反转为如下所示：

```
routes.MapRoute(
    name: "NewDefault",
    url: "{language}/{id}/{action}/{controller}",
    defaults: new { language = lang, controller = "Home", action = "Index", id = "Category"}
); 
```

这样您就可以发出以下请求[http://www.your_url.com/de/Kategorien](http://www.your_url.com/de/Kategorien)。在这种情况下，类别映射到`id`而不是控制器。您的控制器使用英语或德语（取决于您如何命名），但用户会看到不同的语言。在后台，您的视图可能是这样的：

```
public ActionResult Index(string id, string categoryName)
{
    // Fetch data based on category name (categoryName)
    return View();
} 
```

您可以将其他信息作为参数传递，但您需要调整您的路线，使其看起来像：{language}/{category}/{subcategory}/{action}/{controller}

只要知道从长远来看这可能会成为颈部疼痛，如果您尝试这样做，请确保将其记录好。

# java - 在内存中存储等距网格的最佳方法是什么？

> ID：15006581
> 
> 赞同：0
> 
> 时间：2013-02-21T15:53:47.243
> 
> 标签：java, isometric

作为学习经验，我正在尝试使用 Java+ObenGL 制作一个回合制策略游戏，并且我从正方形作为地形图块开始。现在我决定我宁愿有一个等距视角，自从我一直在和自己争论如何在内存中表示这些瓷砖的坐标。

我看到两种选择：

1.  X 和 Y 轴穿过菱形顶点的二维数组，在渲染网格上形成一条直线。

2.  一个二维数组，其中 X 和 Y 轴跟随单元格的侧面（就像您对矩形的普通网格所做的那样），而不是顶点，从而在渲染网格中产生对角轴。

在这些情况下通常会做什么？这个比那个好吗？我有没有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:12:13.317

显示模式和数据是两个不同的东西。如果每个单元格中都有值，则二维数组很好。对于显示，找出当前可见的网格部分并相应地访问数组。通过简单的 2d 自上而下视图，您可以在网格和阵列之间进行直接映射。从另一个角度来看，您需要进行一些投影。

# erlang - 在erlang中的两个表之间更改数据

> ID：15006582
> 
> 赞同：0
> 
> 时间：2013-02-21T15:53:51.760
> 
> 标签：erlang

我有这个表：

```
 -record(person, {id, firstname, lastname}).
  -record(person_backup, {id, firstname, lastname}). 
```

我创建表 person_backup ：

```
 create_backup()
    mnesia:create_table(person_backup,[{disc_copies, [node()]},{attributes, record_info(fields, person)},
        {record_name, person}]). 
```

我也有这个功能：

```
create_table_increment()->
    mnesia:create_table(my_auto_inc,[{type,set}]). 
```

**我想通过一些修改将数据从 person 传输到 person_backup ：**

例如，如果表人有：

```
13  asma   chabani
14  nawel  jirard
15  ahme   bahri 
```

表 person_backup 变成：

```
1  asma   chabani
2  nawel  jirard
3  ahme   bahri 
```

我尝试使用此代码：

```
test()->

        Match=#person{_ = '_'},                               %Will match all records
    Fun = fun() ->
              List = mnesia:match_object(Match),
              lists:foreach(fun(X) ->
        NextKey = mnesia:dirty_update_counter(my_auto_inc,lastrec,1),

                              Update = X#person_backup{id=NextKey,firstname = #person.firstname,lastname=#person.lastname},
                                mnesia:write(Update)
                            end, List)
          end,
    mnesia:transaction(Fun). 
```

但是当我测试我有这个错误：

```
1> model:test().
 {aborted,{combine_error,my_auto_inc,update_counter}} 
```

我也尝试使用此代码：

测试2（）->

```
 Match=#person{_ = '_'},                               %Will match all records
Fun = fun() ->
          List = mnesia:match_object(Match),
          lists:foreach(fun(X) ->
                                NextKey = mnesia:dirty_update_counter(my_auto_inc,lastrec,1),

                           Update = X#person_backup{id=NextKey,firstname = #person.firstname,lastname=#person.lastname},
                            mnesia:write(Update)
                        end, List)
      end,
mnesia:transaction(Fun). 
```

并显示此错误：

```
model:test2().
{aborted,{{badrecord,person_backup},
          [{model,'-test2/0-fun-0-',1},
           {lists,foreach,2},
           {mnesia_tm,apply_fun,3},
           {mnesia_tm,execute_transaction,5},
           {erl_eval,do_apply,5},
           {shell,exprs,6},
           {shell,eval_exprs,6},
           {shell,eval_loop,3}]}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T16:52:28.903

您已经使用记录 person 创建了 person_backup 表，并且在写入它时您正在使用 person_backup 记录，这会导致错误。

# ios - 如何在 iOS 的“弹出”窗口中打开 .nib 文件？

> ID：15006586
> 
> 赞同：1
> 
> 时间：2013-02-21T15:53:57.053
> 
> 标签：ios, popup, nib, popupwindow

我的应用程序中有一个 .nib 文件，我想将它作为“弹出”窗口显示给用户。

我想要这样的结果：

![在此处输入图像描述](../Images/aa412200756247ef05e54e9d36c9f5f2.png)

在这里，您可以看到一个带有 X 用于关闭的空“弹出”窗口。准确地说，这是一个[MT 弹出窗口](http://www.touch-code-magazine.com/showing-a-popup-window-in-ios-class-for-download/)，但遗憾的是，您只能使用 html 而不能使用视图加载它，例如 .nib 文件。

有谁知道我如何创建这样的弹出窗口来显示 .nib 文件或准备好第 3 方解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:05:03.253

自定义 UIView 是您想​​要的我的朋友。

所以创建一个具有超级 UIView 的类。

创建一个objective-c 类调用。例如我叫我*的 CustomView*

你的标题（.h）

```
#import <UIKit/UIKit.h>

@interface CustomView : UIView

@end 
```

你的类（.m）#import“CustomView.h”

```
@implementation CustomView

- (id)initWithFrame:(CGRect)frame
{ 
    self = [super initWithFrame:frame];
    if (self) {
    // Initialization code
    [self loadNib];
    }
    return self;
}

- (void) loadNib
{
    NSArray * subviewArray = [[NSBundle mainBundle] loadNibNamed:@"MyNib" owner:self options:nil];
    UIView * mainView = [subviewArray objectAtIndex:0];

    [self addSubview:mainView];

}
- (IBAction)close:(id)sender{
     [self removeFromSuperview];
}
@end 
```

现在在您的 ViewController 调用中并添加您的自定义视图。您很多人都希望在 IBAction（按钮单击等）中使用它。

```
 CGRect frame = CGRectMake(10,10,300, 460);
 CustomView *view = [[CustomView alloc] initWithFrame:frame]; 
 [self.view addSubview:view]; 
```

当您的自定义视图添加到您的主视图时，它将加载笔尖。

编辑：让 x 关闭它。在您的 customView 中有一个 IBACTION 并说 [self removeFromSuperView]; 您可能希望设置一个与您的控制器通信的委托，以便在关闭视图等时执行某些操作。

想要一个能够点击关闭的自定义视图来关闭它，创建一个`UIView`放在`UITapGestureRecognizer`它上面来关闭你的自定义视图并将它放在你的自定义视图下面并覆盖整个屏幕。

希望这可以帮助，

BooRanger

# algorithm - 分析快速排序算法

> ID：15006587
> 
> 赞同：1
> 
> 时间：2013-02-21T15:53:57.740
> 
> 标签：algorithm, quicksort

我正在关注 YouTube 上关于快速排序的麻省理工学院讲座。我得到了大部分的想法，但我对他所说的算术系列在以下几点感到困惑：

最坏情况：T(n) = T(n-1) + Theta(n)

他问：“那等于什么？”

然后他说它等于 Theta(n^2)

为什么它等于 Theta(n^2) 而不是 Theta(n)？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T15:55:06.380

它是[算术级数的总和，](http://en.wikipedia.org/wiki/Arithmetic_progression#Sum) `T(n) = T(n-1) + n = n + n-1 + n-2 + ... + 1 = n(n+1)/2`在`Theta(n^2)`

您也可以通过归纳得到它，假设`Theta(n)`代表`n`（为简单起见，可以使用相同的方法进行修改）：

```
Hypothesis: T(n) = n(n+1)/2
Base: T(1) = 1*2/2 = 1
Step: 
T(n) = T(n-1) + n <= (*) (n-1)*n/2 + n = 
     = (n^2 -n)/2 + 2n/2 = (n^2-n + 2n)/2 =
     =  (n^2 +n) /2 = n(n+1)/2
(*) induction hypothesis 
```

这向我们展示了`T(n) = n(n+1)/2`确实在`Theta(n^2)`.

# iis - Windows 2003 服务器 IIS 应用程序。只能使用 URL 中的 IP 地址访问

> ID：15006590
> 
> 赞同：0
> 
> 时间：2013-02-21T15:54:07.107
> 
> 标签：iis, windows-server-2003, http-status-code-401

我对在 Windows 2003 Server IIS 中实现的 Web 应用程序有疑问。

我的机器不在域中。

例如，如果我输入 IP 地址

```
**http://192.168.1.210:5555/App** 
```

我被要求提供我的域凭据 DOMAIN\USER1 并且我正确登录。

但是，如果我输入服务器名称，

```
http://WEBSERVER:5555/App, I get: 
```

HTTP 错误 401.1 - 未经授权：访问被拒绝 -> 使用 Internet Explorer 7，尽管我被要求提供凭据。

错误 338 (net::ERR_INVALID_AUTH_CREDENTIALS) -> 直接使用 Chrome，不询问凭据。

我应该检查 IIS 中的任何设置吗？

谢谢！

# javascript - 在 Cloudmade 和 Android 中使用 Polymaps

> ID：15006591
> 
> 赞同：1
> 
> 时间：2013-02-21T15:54:09.960
> 
> 标签：javascript, android, svg, maps, gis

我们正在尝试使用 Polymaps 并且有几个问题：

1.  它似乎调用 Cloudmade 来获取地图图像。Cloudmade 是否永远免费提供这些图像？这些可以免费下载吗？

2.  如果我们想将地图图像的来源从 Cloudmade 替换为 Tilemill，有可能吗？

3.  此外，Polymaps 使用 SVG，这是否意味着地图不会在 Android 2.3 上显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T12:48:11.080

关于问题 1，瓷砖是 25 美元/百万美元，每个日历月的前 50 万块是免费的。因此，对于一个刚刚起步的应用来说，它实际上是免费的。您将需要自己的 apikey，并且应该尝试在样式编辑器中获取您想要的样式。

# python - 在 Python 代码块中获取 myvim.vim 文件的绝对路径

> ID：15006593
> 
> 赞同：1
> 
> 时间：2013-02-21T15:54:12.680
> 
> 标签：python, vim

我正在尝试编写一个在其中使用 Python 代码块的 vim 插件。我想在我的 python 代码块中获取`myvim.vim`( ) 的完整路径。`/home/myusername/.vim/bundle/myvim/plugin/myvim.vim`不幸的是，您无法通过在文件中使用`__file__`as 来获取路径。`.py`我不能使用`vim.command(':pwd')`任何一个，因为它只会打印调用插件函数的位置的路径。

**我的vim**

```
function! Myvim()

python << EOF
import vim

vim_path = "full myvim.vim path here"
print vim_path

EOF

endfunction 
```

## 编辑

@actionshrimp，我正在尝试这个：

**我的vim**

```
function! Myvim()
    let s:curfile = expand("<sfile>")
    let s:curfiledir = fnamemodify(s:curfile, ":h")

python << EOF
import vim

py vim_path = vim.eval('expand("<sfile>")')
print vim_path

EOF

endfunction 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T16:02:55.373

你可以`<sfile>`用来获取当前执行的 vimscript 的路径，像这样：

```
let s:curfile = expand("<sfile>")
let s:curfiledir = fnamemodify(s:curfile, ":h") 
```

要将其传递给 python，您应该能够使用：

```
py vim_path = vim.eval('expand("<sfile>")') 
```

或者如果您设置了变量：

```
py vim_path = vim.eval('s:curfile') 
```

为了清楚起见，这里有一个完整的例子（保存为 'D:\tmp\test.vim'）：

```
python << EOF
import vim

vim_path = vim.eval('expand("<sfile>")')
print vim_path

EOF 
```

当我打开它并输入`:so %`它时，它会在底部显示“D:\tmp\test.vim”。

# java - Spring - 服务层方法通用与特定

> ID：15006599
> 
> 赞同：2
> 
> 时间：2013-02-21T15:54:34.620
> 
> 标签：java, spring, service, layer

我目前正在开发一个应用程序，我可以在其中看到以下内容：

*   控制器 A : service.getSession(userId, Status.Started);
*   控制器 B：service.getSession(userId, Status.Done);

（其中 Status 表示可能状态的枚举）

*   服务：getSession(Long id, Status status);

我觉得不对，因为要访问控制器 A 的用户具有某些角色，而用户访问 B 其他人，应该有 2 种服务方法：

*   getSessionReady（长 id）；
*   getSessionClosed(长 id);

这样做我可以清楚地使用 Spring 安全性并确保正确的角色访问正确的服务方法。它让我创建了两种方法，但它更容易保护应用程序，服务层的目标实际上是限制访问以限制逻辑错误，对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:13:06.393

是的。您使服务层（或任何类，实际上）越通用，它增加的价值就越少。

您希望您的服务层限制访问并确保只有有效的调用才能进入域。

还有，方法多也不是坏事！只要它们有意义，请随意。通常，带有触发不同行为的额外参数的方法是代码异味，应该分开。

# django - django 数据库重新连接不同的用户

> ID：15006603
> 
> 赞同：3
> 
> 时间：2013-02-21T15:54:48.333
> 
> 标签：django, database-connection, user-management

这样做的背景是，我想要限制用户管理，而不是让前端应用程序完全访问数据库（用户表的创建是由后端进程完成的）。应该只允许前端访问当前登录用户有权读取的表。这样做的原因是，前端的安全问题不应该暴露对整个数据库的访问权限，而只会在最坏的情况下暴露给当前用户的东西，而我可以随机从数据库中读取而不会打扰后端进程。

因此，我希望 Django 模型与给定用户连接，而不是 settings.py 中对 django 数据库具有全局访问权限的用户。

在不覆盖核心数据库连接的情况下，这是否可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T11:39:29.937

从 Django 1.2 或更高版本开始，您可以在 settings.py 中定义多个数据库。虽然我从来没有用它来指向同一个数据库，但我看不出有任何理由你不能定义到同一个数据库但使用不同用户凭据的多个连接。

然后，您可以根据数据库路由器中的登录用户（或未登录用户，视情况而定）决定使用哪个连接

文档在[这里](https://docs.djangoproject.com/en/dev/topics/db/multi-db/)。

我发现他们选择使用名为“auth”的应用程序作为示例令人困惑，但它只是一个和其他应用程序一样的应用程序，所以不要混淆认为它与 auth 有任何关系，即使在你的情况下它也是如此会的。

# sas - 如何通过 proc tabulate 在 sas 中显示变量值？

> ID：15006604
> 
> 赞同：1
> 
> 时间：2013-02-21T15:54:50.200
> 
> 标签：sas

如何管理 proc 表格以显示具有缺失值而不是其统计数据的变量的值？谢谢！

例如，我想显示 sym 的值。它取值“x”或缺失值。我该怎么做？

示例代码：

```
data test;
input tx mod bm $ yr sym $;
datalines;
1   1   a   0   x
1   2   a   0   x
1   3   a   0   x
2   1   a   0   x
2   2   a   0   x
2   3   a   0   x
3   1   a   0   
3   2   a   0   
3   3   a   0   x
1   1   b   0   x
1   2   b   0   
1   3   b   0   
1   4   b   0   
1   5   b   0   
2   1   b   0   
2   2   b   0   
2   3   b   0   
2   4   b   0   
2   5   b   0   
3   1   b   0   x
3   2   b   0   
3   3   b   0   
1   1   c   0   
1   2   c   0   x
1   3   c   0   
2   1   c   0   
2   2   c   0   
2   3   c   0   
3   1   c   0   
3   2   c   0   
3   3   c   0   
1   3   a   1   x
2   3   a   1   
3   3   a   1   
1   3   b   1   
2   3   b   1   
3   3   b   1   
1   3   c   1   x
2   3   c   1   
3   3   c   1   
;
run;

proc tabulate data=test;
class yr bm tx mod ;
var sym;
table yr*bm, tx*mod;
run; 
```

![我希望决赛桌是这样的。 谢谢！](../Images/8890e95cc4da47d891b6e8f7a107b577.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T20:44:12.513

```
proc tabulate data=test;
class tx mod bm  yr sym;
table yr*bm, tx*mod*sym*n;
run; 
```

这为每个 SYM=x 提供了一个（因为 n=missing）。这隐藏了 SYM=missing 的行，因此您错过了示例表中的一些值。（您可以使用轻松定义 1 = 'x' 的格式来格式化列）。

```
proc tabulate data=test;
class tx mod bm  yr;
class sym /missing;
table yr*bm, tx*mod*sym=' '*n;
run; 
```

这为您提供了 4 个主要变量的所有组合，但包括缺少的符号作为它们自己的列。

如果你也想吃蛋糕，那么你需要将 SYM 重新定义为一个数字变量，这样你就可以将它用作 VAR。

```
proc format;
invalue ISYM
x=1
;
value FSYM
1='x';
quit;

data test;
infile datalines truncover;
input tx mod bm $ yr sym :ISYM.;
format sym FSYM.;
datalines;
1   1   a   0   x
1   2   a   0   x
1   3   a   0   x
... more lines ...
;
run;

proc tabulate data=test;
class tx mod bm  yr;
var sym;
table yr*bm, tx*mod*sym*sum*f=FSYM.;
run; 
```

所有这些都假设这些是唯一的组合行。如果你开始有多个 yr*bm*tx*mod，你会在这里遇到问题，因为这不会给你预期的结果（总和 1+1+1=3 不会给你一个'x'）。

# php - ipn监听器贝宝

> ID：15006606
> 
> 赞同：0
> 
> 时间：2013-02-21T15:54:51.723
> 
> 标签：php, paypal-ipn

我正在开发简单的购物车，一个问题是让我疯狂的 IPN 侦听器无法正常工作

当我付款时，我会被重定向回感谢页面，并且这些值会被打印出来。

`thankyou.php`下面的那些帖子打印出来了，还有很多帖子变量。

```
[address_status] => confirmed

[payment_status] => Completed

[payer_status] => verified 
```

问题在于我的 IPN 侦听器无法正常工作。

```
<input type="hidden" name="notify_url" value="http://mysqlphp.uphero.com/paypal_ipn.php"> 
```

**这是下面我的 paypal_ipn.php 上的脚本：**

```
// Check to see there are posted variables coming into the script

    if ($_SERVER['REQUEST_METHOD'] != "POST") 
    die ("No Post Variables"); ------> 

// Initialize the $req variable and add CMD key value pair

    $req = 'cmd=_notify-validate';
    // Read the post from PayPal
    foreach ($_POST as $key => $value) {
        $value = urlencode(stripslashes($value));
        $req .= "&$key=$value";
    }

    $url = "https://www.sandbox.paypal.com/cgi-bin/webscr";

    $curl_result=$curl_err='';

    $ch = curl_init();

    curl_setopt($ch, CURLOPT_URL,$url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $req);
    curl_setopt($ch, CURLOPT_HTTPHEADER, array("Content-Type: application/x-www-form-urlencoded", "Content-Length: " . strlen($req)));
    curl_setopt($ch, CURLOPT_HEADER , 0);   
    curl_setopt($ch, CURLOPT_VERBOSE, 1);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
    curl_setopt($ch, CURLOPT_TIMEOUT, 30);
    $curl_result = @curl_exec($ch);
    $curl_err = curl_error($ch);
    curl_close($ch);

    $req = str_replace("&", "\n", $req); 

// Check that the result verifies and sending email before doing anything i just wanted to make sure that this script is working but i don't receive an email

    if (strpos($curl_result, "VERIFIED") !== false) {
        $req .= "\n\nPaypal Verified OK";
        mail("eagleeyes26@hotmail.com", "IPN interaction verified", "$req", "eagleeyes26@hotmail.com" );

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-18T11:20:34.710

我找到了这个解决方案

[http://microlabs.altervista.org/paypal-ipn-listener/](http://microlabs.altervista.org/paypal-ipn-listener/)

并且工作正常，具有附带下载购买的自动电子邮件，意大利语网站，但您可以在页脚中翻译

# c++ - 将字符串转换为 char* 时出现内存分配错误

> ID：15006608
> 
> 赞同：1
> 
> 时间：2013-02-21T15:54:55.163
> 
> 标签：c++, memory

我需要一些帮助来找出内存分配错误。我不断收到此错误：

> 错误：无法分配内存。

...当`fList`在以下代码中很大时：

```
for (unsigned int ii=0; ii<fList.size(); ii++) {

    char *fName = new char[fList[ii].length() + 1];
    strcpy(fName, fList[ii].c_str());
    err = xInitFile(fName, ii+1);
    if(err != 0) {
        cout << "FOOBAR" << endl;
    }               
    delete[] fName;
} 
```

`fList`是一个`std::vector<std::string>`。

该函数`xInitFile`是一个 C 共享库函数，原型如下：

```
int xInitFile(char *fName, int fHandle) 
```

如果`fList`很小，那么一切运行良好。我很确定问题在于我如何将字符串转换为 a `char *`，但我不知道如何解决它。据我所知，`fName`总是被删除，所以它似乎不是内存泄漏。运行代码时，我的内存使用量也没有飙升。

编辑：

注释掉`err = xInitFile(fName, ii+1);`可以消除错误。这意味着分配错误发生在`xInitFile`，对吗？我没想过早点尝试这个，因为我认为问题出在我的代码中（b/c 我是 C++ 新手）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:01:33.360

出于某种原因，它可能不受欢迎，但我倾向于尝试`strdup`.

```
char *fName = strdup( fList[ii].c_str() ); 
```

搭配

```
free(fName); 
```

# ms-access - OpenArgs 在表单中打开子表单？

> ID：15006617
> 
> 赞同：1
> 
> 时间：2013-02-21T15:55:09.610
> 
> 标签：ms-access, null, command, subform

我有一个带有表单的 Access 数据库，一旦双击 EmployeeID，它就会打开另一个表单，其中包含一个包含员工信息的子表单。我使用此代码从原始表单中获取 EmployeeID...

```
myID = CInt(Me.OpenArgs) 
```

我在我的辅助表单和其中包含的子表单上使用此字符串，但是，它没有获取 EmployeeID。主窗体有这个双击事件的代码......

```
Private Sub EmployeeID_DblClick(cancel As Integer)
Dim myID As Variant 
myID = Me.EmployeeID

DoCmd.OpenForm "subformEmployeeInfo",,,,,,myID
DoCmd.OpenForm "frm_EmployeeInformation",,,,,,myID
End Sub 
```

当我单步执行代码时，我注意到我的 ID 在 OpenForm 命令上，但是当它切换到子表单代码时，我收到“无效使用 Null”错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:28:56.243

使用子表单，您可以参考 Parent OpenArgs，：

```
ID= Me.Parent.OpenArgs 
```

这些是子窗体所在窗体的 OpenArgs。

# wpf - 如何使用 Properties.Resources 中的图像从 WPF 中的代码隐藏动态更改图像源？

> ID：15006618
> 
> 赞同：9
> 
> 时间：2013-02-21T15:55:10.293
> 
> 标签：wpf, imagesource

我有一个 WPF 应用程序需要向用户提供有关内部状态的反馈。设计是有三个图像，分别称为红色、黄色和绿色。根据状态，一次显示其中一张图像。以下是要点：

*   这三个图像位于代码隐藏的 Properties.Resources 中
*   一次只显示一张图像。
*   状态更改来自代码隐藏中的过程，而不是来自用户。
*   我想绑定一个图像控件，以便我可以从代码隐藏中更改图像。

我假设我需要一个图像转换器来将 JPG 图像更改为图像源，例如：

* * *

```
[ValueConversion(typeof(System.Drawing.Bitmap), typeof(ImageSource))]
public class BitmapToImageSourceConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        var bmp = value as System.Drawing.Bitmap;
        if (bmp == null)
            return null;
        return System.Windows.Interop.Imaging.CreateBitmapSourceFromHBitmap(
                    bmp.GetHbitmap(),
                    IntPtr.Zero,
                    Int32Rect.Empty,
                    BitmapSizeOptions.FromEmptyOptions());
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotSupportedException();
    }
} 
```

* * *

我希望在初始化期间转换一次图像并保留图像源列表。我还假设我需要一个依赖属性来将控件绑定到，但我不确定如何使用此图像源列表进行设置：

* * *

```
 // Dependancy Property for the North Image
    public static readonly DependencyProperty NorthImagePathProperty
        = DependencyProperty.Register(
            "NorthImagePath",
            typeof(ImageSource),
            typeof(MainWindow),
            new PropertyMetadata("**Don't know what goes here!!!**"));

    // Property wrapper for the dependancy property
    public ImageSource NorthImagePath
    {
        get { return (ImageSource)GetValue(NorthImagePathProperty); }
        set { SetValue(NorthImagePathProperty, value); }
    } 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-21T17:06:56.033

尽管 WPF 项目中的图像资源会在 中生成`System.Drawing.Bitmap`属性，但您可以直接从该资源`Resources.Designer.cs`创建一个。[`BitmapImage`](http://msdn.microsoft.com/en-us/library/ms619218.aspx)您只需要将镜像文件的[Build Action](http://msdn.microsoft.com/en-us/library/0c6xyb66.aspx)`Resource`设置为（而不是默认的`None`）。

如果您的 Visual Studio 项目的文件夹中有一个文件`Red.jpg`，则`Resources`创建一个`BitmapImage`如下所示的文件。它使用[WPF Pack Uri](http://msdn.microsoft.com/en-us/library/aa970069.aspx)。

```
var uri = new Uri("pack://application:,,,/Resources/Red.jpg");
var bitmap = new BitmapImage(uri); 
```

如果您[`Image`](http://msdn.microsoft.com/en-us/library/ms610982.aspx)在 XAML 中的某处声明了一个控件，如下所示：

```
<Image x:Name="image"/> 
```

您可以`Source`在后面的代码中简单地将图像的属性设置为您的 BitmapImage：

```
image.Source = bitmap; 
```

* * *

如果您更喜欢`Source`通过绑定来设置属性，您可以创建一个`string`返回图像 URI 的属性。该字符串将由WPF`BitmapImage`中的内置程序自动转换为 a 。[`TypeConverter`](http://msdn.microsoft.com/en-us/library/system.componentmodel.typeconverter.aspx)

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        DataContext = this;
        ImageUri = "pack://application:,,,/Resources/Red.jpg";
    }

    public static readonly DependencyProperty ImageUriProperty =
        DependencyProperty.Register("ImageUri", typeof(string), typeof(MainWindow));

    public string ImageUri
    {
        get { return (string)GetValue(ImageUriProperty); }
        set { SetValue(ImageUriProperty, value); }
    }
} 
```

在 XAML 中，您可以像这样绑定到该属性：

```
<Image Source="{Binding ImageUri}"/> 
```

* * *

当然，您也可以将属性声明为类型`ImageSource`

```
public static readonly DependencyProperty ImageProperty =
    DependencyProperty.Register("Image", typeof(ImageSource), typeof(MainWindow));

public ImageSource Image
{
    get { return (ImageSource)GetValue(ImageProperty); }
    set { SetValue(ImageProperty, value); }
} 
```

并以相同的方式绑定：

```
<Image Source="{Binding Image}"/> 
```

现在您可以预加载您的图像并根据需要将它们放入属性中：

```
private ImageSource imageRed =
    new BitmapImage(new Uri("pack://application:,,,/Resources/Red.jpg"));
private ImageSource imageBlue =
    new BitmapImage(new Uri("pack://application:,,,/Resources/Blue.jpg"));
...
Image = imageBlue; 
```

* * *

更新：毕竟，您的图像不需要是 Visual Studio 项目中的资源。您可以只添加一个项目文件夹，将图像文件放入该文件夹并将其构建操作设置为`Resource`. 例如，如果您调用文件夹`Images`，则 URI 将是`pack://application:,,,/Images/Red.jpg`。

# asp.net - Jquery 滑块在 aspx 页面中不起作用，但在 HTML 中可以正常工作

> ID：15006620
> 
> 赞同：1
> 
> 时间：2013-02-21T15:55:17.617
> 
> 标签：asp.net, jquery-ui, jquery, jquery-plugins, jquery-slider

场景：在一个 asp.net 站点中，我们在 ASPX 页面上有 3 个 jquery 滑块。

三个滑块（可以在下面的 jsfiddle 链接中看到）是 a）价格 b）变体 c）相关项目（它在选项卡内）

JSfiddle 链接如下。

[http://jsfiddle.net/DfKwy/5/](http://jsfiddle.net/DfKwy/5/)

第三个滑块（相关项目滑块）正在产生问题，例如上一个和下一个箭头按钮不滑动，并且当此滑块存在时，其他滑块不滑动（用户看不到上一个/下一个按钮） .

我刚刚从 aspx 页面中获取了 html/script/css 并将它们放入 jsfiddle 中，一切似乎都在工作。然而，在现场 asp.net 上它不起作用。我已将 asp.net 设为面向公众，我也可以共享网址。

aspx页面使用updatePanel、ajax。即使在我的 jsfiddle 示例中，我也评论了一些脚本块。

请帮助进一步调试。

PS：出于某种原因，我无法在不发布代码的情况下提交此问题。请检查上面的 jsfiddle 链接以获取完整的代码。下面的代码只有几行，并不完整。

```
 <div>
    <input type="hidden" name="__EVENTTARGET" id="__EVENTTARGET" value="" />
    <input type="hidden" name="__EVENTARGUMENT" id="__EVENTARGUMENT" value="" />
    <input type="hidden" name="__LASTFOCUS" id="__LASTFOCUS" value="" />

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T09:16:54.043

也许还有其他脚本/代码行会影响您想要的结果？也许您引用了冲突的 jquery 版本，例如？

请看链接。

[jquery-1.2.6.min.js 和 jquery-1.4.2 之间的冲突](https://stackoverflow.com/questions/5243677/conflict-between-jquery-1-2-6-min-js-and-jquery-1-4-2)

# windows-phone-7 - Windows Phone - 文本框的第一行

> ID：15006621
> 
> 赞同：2
> 
> 时间：2013-02-21T15:55:20.927
> 
> 标签：windows-phone-7, windows-phone-8, newline, windows-phone

我创建了以下代码来获取字符串的第一行：

```
string firstline = test.Substring(0, test.IndexOf(Environment.NewLine)); 
```

这不起作用，因为 XAML 文本框使用 \r 来表示换行符，但 Environment.NewLine 是 \r\n。

WindowsPhone/XAML 中是否有为 NewLine 定义的常量字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T16:58:57.450

Try splitting on "\r", I found an example in the answer [here](https://stackoverflow.com/questions/7665171/breaking-apart-a-textblock-into-strings-at-a-new-line).

Hope this helps!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T18:46:19.990

你的代码很好。您是否将**MultiLine**属性设置为**true**？

**Environment.NewLine**为非 Unix 平台定义
一个包含“ **\r\n ”的字符串，或者为 Unix 平台定义一个包含“\** **n** ”的字符串。

希望能帮助到你。

# python - 不均匀的字符线分割

> ID：15006622
> 
> 赞同：0
> 
> 时间：2013-02-21T15:55:31.560
> 
> 标签：python, split, delimiter

我在构建之前使用的一些代码时遇到问题。我有一个输入文件，每行包含 6 条数据。问题是，并不总是有空格用作分隔符来分割每一行，我还想以 4/4/4/8/8/4 个字符的不均匀步长分割行，即：

```
'   0   0 -16-50.6123 115.393   2' 
```

将被拆分为 (0,0,-16,-50.6123,115.393,2)。然后我使用这些数据形成一个字典，其中键是前三个数字 [0,0,-16] 的数组，返回值是最后三个数字 [-50.6123,115.393,2] 的数组。

当我的数据总是用空格分隔时（我无法更改，因为它来自其他地方），我之前使用的代码如下。有没有一种很好的方法来修改我已经必须适应新的不均匀分割行的代码。

谢谢！

```
def formatter(lines):
    for line in lines:
        if not line.strip(): continue
        yield [to_float(item) for item in line.split()]

dct1 = {}
with open('test.txt') as f1:
    for row in formatter(f1):
        dct1[tuple(row[:3])] = row[3:6] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:19:01.617

如果您知道切片宽度，我只需将线切成切片即可。这应该给你一个想法：

```
my_string ='   0   0 -16-50.6123 115.393   2'
widths=[4,4,4,8,8,4]
my_start=0
my_end=0
for w in widths:
     my_end+=w
     print my_string[my_start:my_end] #or do whatever you want
     my_start+=w 
```

输出：

```
 0
   0
 -16
-50.6123
 115.393
   2 
```

# c++ - 如何在不使用任何库的情况下在 C/C++ 中实现简单的 Signal/Slot 机制？

> ID：15006626
> 
> 赞同：0
> 
> 时间：2013-02-21T15:55:48.513
> 
> 标签：c++, callback, signals, signals-slots, type-safety

我是 gtkmm 之类的 GUI 编程新手。我在 libsigc++ 上苦苦挣扎，但我不知道

*   信号/槽的含义是什么？
*   我们如何在不使用 C/C++ 中的 sigc 和 Qt 的情况下创建它？
*   类型安全回调的含义是什么？

# c# - 用户界面无法更新

> ID：15006631
> 
> 赞同：2
> 
> 时间：2013-02-21T15:55:58.197
> 
> 标签：c#, .net, wpf, multithreading, visual-studio-2010

我有一个资源繁重的方法，需要几秒钟才能执行。因此，我决定在任务中调用它，以便在执行任务时显示等待图标。

我所做的称为`imgLoading.Visibility = Visibility.Visible`创建任务之前，然后创建任务。任务完成后，我会调用`imgLoading.Visibility = Visibility.Collapsed;`.

出于某种原因，图像永远不会崩溃并无限期地保持可见。这是一个非常奇怪的问题，很容易重现。这是我得到的所有代码，我真的看不出我做错了什么：

```
imgLoading.Visibility = Visibility.Visible;

var validityTask = Task.Factory.StartNew(() => ExpensiveMethod(param1,param2));

                        validityTask.ContinueWith((previousTask) =>
                        {
                            bool isvalid = validityTask.Result;

                            if (isvalid)
                            {
                                //Do something to UI
                            }
                            else
                            {
                                //DO something to UI
                            }

                            imgLoading.Visibility = Visibility.Collapsed;

                        }, TaskScheduler.FromCurrentSynchronizationContext()); 
```

如代码所示，我试图`imgLoading`在执行任务时显示图像，并在任务完成时隐藏图标。使用此当前代码，即使在任务完成后图标仍然可见。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T21:56:06.620

一段时间后，我设法解决了这个问题。在此处发布此内容，以防将来可能对某人有所帮助。我的问题是该街区显然根本没有进入。解决方案是从任务中删除所有 UI 代码，它起作用了 :)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-21T20:55:33.763

与其读取 的`Result`属性`validityTask`，不如从 读取它`previousTask`。

[这是](http://msdn.microsoft.com/en-us/library/ee372288.aspx)MSDN 上一个示例的链接，显示了`Result`以这种方式继续访问该属性。

# javascript - 由于脚本过多，网站字体和 javascript 运行缓慢

> ID：15006641
> 
> 赞同：1
> 
> 时间：2013-02-21T15:56:28.877
> 
> 标签：javascript, performance, font-face, head

我有一个网站需要很长时间才能加载其字体工具包样式，以及一些其他运行有趣的脚本。发生这种情况是因为我的脚本都在我的部分混乱，但我担心我对这些脚本的了解不够，无法正确清理我的文件。任何人都可以尝试建议我可以做一些事情来清理它并提高我的网站的速度和功能，特别是在更快地加载字体文本的情况下？任何示例或具体的参考资料都会很棒——我完全不知道这些脚本到底发生了什么。这是我发生的事情：

```
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=0.3"> 
    <meta name="google-translate-customization" content="d378d0a5e57245bf-c2ed76fd752675aa-g7014305900f205ae-13"></meta>

    <title>{embed:title}</title>
    <style type="text/css" media="screen">
         @import url("/common/css/all.css");
         @import url("/common/font_face/stylesheet.css");
         @import url("/common/css/jcf.css");
    </style>

    <script type="text/javascript" src="/common/js/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="/common/js/jquery.main.js"></script>

    <!--fancybox script starts here-->  
    <script type="text/javascript" src="/common/js/fancybox/lib/jquery.mousewheel-3.0.6.pack.js"></script>  
    <script type="text/javascript" src="/common/js/fancybox/source/jquery.fancybox.js?v=2.0.6"></script>
    <link rel="stylesheet" type="text/css" href="/common/js/fancybox/source/jquery.fancybox.css?v=2.0.6" media="screen" />
    <link rel="stylesheet" href="/common/js/fancybox/source/helpers/jquery.fancybox-buttons.css?v=1.0.2" type="text/css" media="screen" />
    <script type="text/javascript" src="/common/js/fancybox/source/helpers/jquery.fancybox-buttons.js?v=1.0.2"></script>
    <script type="text/javascript" src="/common/js/fancybox/source/helpers/jquery.fancybox-media.js?v=1.0.0"></script>
    <link rel="stylesheet" href="/common/js/fancybox/source/helpers/jquery.fancybox-thumbs.css?v=2.0.6" type="text/css" media="screen" />
    <script type="text/javascript" src="/common/js/fancybox/source/helpers/jquery.fancybox-thumbs.js?v=2.0.6"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            // fancybox for html pages
            $(".fancylink").fancybox({
                'height' : '100%',
                'autoScale' : false,
                'transitionIn' : 'none',
                'transitionOut' : 'none',
                'type' : 'iframe'
             });
             $(".fancylinksm").fancybox({
                'height' : 'auto',
                'autoScale' : false,
                'transitionIn' : 'none',
                'transitionOut' : 'none',
                'type' : 'iframe'
             });

             // fancybox for vimeo
             $(".vimeo").fancybox({
                width: 781,
                height: 440,
                type: 'iframe',
                fitToView : false,
                wrapCSS : 'fancybox-nav-video'
             });

             $('.fancybox').fancybox({
                padding : 0,
                openEffect  : 'elastic'
             });

             $(".fancybox").fancybox({
                wrapCSS    : 'fancybox-custom',
                closeClick : true,
                helpers : {
                   overlay : {
                      css : {
                         'background-color' : '#000'
                      }
                   },
                   thumbs : {
                      width : 50,
                      height : 50
                   }
                }
            });
         });
       $("a[href$='.jpg'],a[href$='.jpeg'],a[href$='.png'],a[href$='.gif']").attr('rel', 'gallery').fancybox();      
    </script>
    <!--fancybox script ends here-->
    <link rel="shortcut icon" href="/common/images/cut-and-paste-logo.ico" type="image/x-icon" />
</head> 
```

* * *

**更新的代码** 我将所有脚本编译成一个'compiled.js'文件并将所有@import 调用更改为s，但是它仍然没有使我的字体加载速度更快。这是新的部分：

```
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=0.3"> 
    <meta name="google-translate-customization" content="d378d0a5e57245bf-c2ed76fd752675aa-g7014305900f205ae-13"></meta>

    <!-- meta data goes here -->
    <title>{embed:title}</title>

    <link rel='stylesheet' type='text/css' href='/common/font_face/stylesheet.css'>
    <link rel='stylesheet' type='text/css' href='/common/css/all.css'>
    <link rel='stylesheet' type='text/css' href='/common/css/jcf.css'>
    <link rel="stylesheet" type="text/css" href="/common/css/jquery.fancybox.css?v=2.0.6" media="screen" />
    <link rel="stylesheet" href="/common/css/jquery.fancybox-buttons.css?v=1.0.2" type="text/css" media="screen" />
    <link rel="stylesheet" href="/common/css/jquery.fancybox-thumbs.css?v=2.0.6" type="text/css" media="screen" />
    <link rel="shortcut icon" href="/common/images/characterized_logo_16x16.ico" type="image/x-icon" />
    <!--[if lt IE 9]><link rel="stylesheet" type="text/css" href="css/ie.css" media="screen"/><![endif]-->  

    <script type="text/javascript" src="/common/js/compiled.js"></script>
</head> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:03:11.367

您应该将这些 @import 语句更改为链接标签，它会影响某些浏览器的性能。 [http://www.stevesouders.com/blog/2009/04/09/dont-use-import/](http://www.stevesouders.com/blog/2009/04/09/dont-use-import/)

理想情况下，您希望将所有这些 JS 文件连接到一个请求中。你可以使用像谷歌闭包编译器这样的工具来做到这一点： [https](https://developers.google.com/closure/compiler/)
://developers.google.com/closure/compiler/ 所以你运行类似：

```
cd C:\path\to\src
java -jar C:\compiler.jar --js=jquery.main.js --js=jquery-1.8.3.js --js=fancybox\lib\jquery.mousewheel-3.0.6.pack.js --js_output_file=all.min.js 
```

这是一些关于使用 JS 引导加载程序来防止阻塞的阅读： [http ://www.nczonline.net/blog/2009/07/28/the-best-way-to-load-external-javascript/](http://www.nczonline.net/blog/2009/07/28/the-best-way-to-load-external-javascript/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T16:03:46.627

优化我的脚本后，一切都运行得更快了一点，但并不完美。作为一个实验，在我的主 CSS 文件中，我删除了对所有 @font-faces 的调用（大约有 10 个）。

**我删除了这些：**

```
@font-face {
font-family: 'TradeGothicLTStdCnNo.18Ob';
src: url('../fonts/tradegothicltstd-cn18obl-webfont.eot');
src: url('../fonts/tradegothicltstd-cn18obl-webfont.eot?#iefix') format('embedded-opentype'),
url('../fonts/tradegothicltstd-cn18obl-webfont.woff') format('woff'),
url('../fonts/tradegothicltstd-cn18obl-webfont.ttf') format('truetype'),
url('../fonts/tradegothicltstd-cn18obl-webfont.svg#TradeGothicLTStdCnNo.18Ob') format('svg');
font-weight: normal;
font-style: normal;
} 
```

**但我仍然在我的标题中调用这个字体 css**

```
<link rel='stylesheet' type='text/css' href='/font_face/stylesheet.css'> 
```

完成此操作后，一切都在多个浏览器中顺利、快速地运行。看起来@font-face 是这里的真正问题。我仍然通过 java 脚本提取我的字体，所以我的所有自定义字体都没有滞后。

# css - Angular ng-show 在 IE7/8 中不起作用

> ID：15006644
> 
> 赞同：2
> 
> 时间：2013-02-21T15:56:34.823
> 
> 标签：css, ajax, internet-explorer-8, internet-explorer-7, angularjs

我正在尝试根据 AJAX 调用完成的时间，使用 ng-show 有条件地显示/隐藏两个 div，并在 $scope 中使用布尔值。基本上，具有以下布局：

```
<div id="div1" ng-show="!loadingData">
   <!--Some markup here-->
</div>
<div id="loadingMessage" ng-show="loadingData">
   Loading...
</div> 
```

引发更改的函数包含以下内容：

```
$scope.loadingData=true;

var promise = dao.doAjaxGet("url");

promise.then(function(data){
  //Hide loading message
  $scope.loadingData=false;
}); 
```

AJAX 调用运行正常，这在 Chrome、Safari、Firefox 中运行良好，但不是我们需要支持的两个 IE 版本——IE7 和 IE8。无论呼叫处于何种状态，加载消息都保持隐藏状态，div1 保持可见。有人可以就此提出建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-27T22:40:07.767

如果您`console.log`的控制器中有，请摆脱它。它有助于让事情在 IE8 中工作，例如 ng-hide

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T16:31:00.740

原来这是与缓存相关的。Chrome 和 IE 都在第一次调用后缓存 ajax 调用。我已经设法通过引入 ajax 调用配置来解决 chrome 中的问题，`cache:false`但这在 IE 中似乎没有效果。如果有人对此有进一步的信息，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-29T21:16:34.443

这是一个完全可用的 Angular ie7 模板。使用非常旧的 Angular，但可以使用

我的 HTML 文件 https://cdn.jsdelivr.net/bootstrap/3.3.6/css/bootstrap.min.css'>

```
<!--[if lte IE 8]>
    <script type="text/javascript">
        // IE7 fix   for missing  
        if (!window.console) {
            var console = {
                log: function() {},
                warn: function() {},
                error: function() {},
                time: function() {},
                timeEnd: function() {}
            }
        }
    </script>

    <script src="https://cdn.jsdelivr.net/json2/0.2/json2.js"></script>
<![endif]-->
<!--[if lte IE 9]>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/es5.shim/4.5.7/es5-shim.js"></script>
<![endif]-->
<script type="text/javascript" src="https://cdn.jsdelivr.net/html5shiv/3.7.3/html5shiv.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/angularjs/1.1.5/angular.js"></script>

<script>
    /**
   * Main AngularJS Web Application
   */
    var app = angular.module('myapp', []);
    app.controller('MyPageCtrl', pageController);

    function pageController($scope) {

        $scope.languages = [
            { 'Id': 1, 'Name': 'French' },
            { 'Id': 1, 'Name': 'German' },
        ];
    };

</script>
</head>
 <body ng-controller="MyPageCtrl">

<div class="col-xs-12">
    <select name="languagesDropDown" id="languagesDropDown" class="form-control" style="width: 200px;">
        <option ng-repeat="language in languages" value="{{language.Id}}">{{language.Name}}</option>
    </select>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-08T14:44:10.143

我遇到了同样的问题，即`ng-show`不能在 Internet Explorer 中工作。

[官方 ngShow AngularJS 文档](https://docs.angularjs.org/api/ng/directive/ngShow)提到了这一点，并为此提供了一些解决方法。

（我将复制粘贴该链接中提到的文本，以防该链接已过期或由于某种原因无法使用）

> 当使用`ngShow`和/或`ngHide`在元素之间切换时，可能会出现要显示的元素和要隐藏的元素在很短的时间内可见。
> 
> 这通常在包含模块时发生`ngAnimate`，但没有为`ngShow`/定义实际动画`ngHide`。Internet Explorer 比其他浏览器更容易受到影响。
> 
> 有几种方法可以缓解这个问题：
> 
> *   禁用受影响元素上的动画。
> *   使用`ngIf`or`ngSwitch`代替`ngShow`/ `ngHide`。
> *   使用特殊的 CSS 选择器对受影响的元素`ng-hide.ng-hide-animate`进行设置或类似设置。`{display: none}`
> *   使用`ng-class="{'ng-hide': expression}`代替代替`ngShow`/ `ngHide`。
> *   在受影响的元素上定义动画。

第二个建议（替换`ng-show`为`ng-if`）对我有用。所以在你的情况下，你可以考虑使用这个 -

```
<div id="div1" ng-if="!loadingData">
  <!--Some markup here-->
</div>
<div id="loadingMessage" ng-if="loadingData">
  Loading...
</div> 
```

# windows - 只能通过修改注册表来安装驱动吗？

> ID：15006650
> 
> 赞同：0
> 
> 时间：2013-02-21T15:56:47.580
> 
> 标签：windows, installation, registry, kernel, driver

据我所知，安装内核驱动程序至少有四种方法：

1.  通过SetupXXX；

2.  通过服务经理；

3.  通过INF文件；

4.  通过注册表；

假设我有一个 minifilter 驱动程序，我只是想知道以下安装步骤是否有效？

步骤 1\. 将 MyDriver.sys 复制到

> %SystemRoot%\system32\drivers\

步骤 2\. 添加一个名为的子`mydriver`项

> HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\services

步骤 3\. 在子键下添加一些值，如`Start`, `Type`, `Tag`, `Group`, `Altitude`,`ImagePath`等`mydriver`；

Step 4\. 将Start值设置为0，即告诉OS在启动时加载MyDriver.sys；

步骤 5\. 重新启动。

我的问题是：这种方法有缺点吗？

# html - ImageButton 和 Input type="image" 边框仅在悬停时出现

> ID：15006652
> 
> 赞同：3
> 
> 时间：2013-02-21T15:56:55.077
> 
> 标签：html, css, imagebutton

当您将鼠标悬停在`input type='image'`边框上时，会出现边框，然后在离开图像时消失。但不仅仅是能见度，它的间距也丢失了。我希望我的图像保持在静态位置，但仍然受益于出现的边框。因此我只希望它改变颜色。是否可以在悬停之前使边框出现？这是我试图避免的图像抖动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T16:05:59.880

在图像上设置边框宽度，但没有颜色，然后在悬停时设置颜色。这将确保图像周围始终有一个固定宽度的边框，因此不会在悬停时移动图像位置。

```
input[type="image"]
{
   border:solid 3px transparent;
}

input[type="image"]:hover
{
   border-color:#ff0;
} 
```

***现场演示：http:** [//jsfiddle.net/rAPds/](http://jsfiddle.net/rAPds/)*

# mule - 定时 Mule Web 服务客户端流程

> ID：15006654
> 
> 赞同：0
> 
> 时间：2013-02-21T15:57:01.017
> 
> 标签：mule, mule-studio

我已经在论坛上搜索了这个问题的答案。我发现了一个几乎相同的问题，尽管答案让我仍然想知道。

在这里找到了几乎相同的帖子：

[Mule - 安排流程以使用 Web 服务](https://stackoverflow.com/questions/12029203/mule-schedule-a-flow-to-consume-a-web-service/15005665#15005665)

这张海报说明了我遇到的问题。

我也是 Mule 的新手，并且正在尝试做同样的事情。我没有意识到我需要一个有效载荷，因为我认为操作规范本质上是有效载荷。

请注意，我有一个包含 cxf:jaxws-client 的流，并且该客户端指定了服务的 URL 和操作“listTest”。

为了实际执行服务请求，我还需要指定哪些其他有效负载？

我试图向事件生成器添加一个虚拟有效负载（如参考帖子中所建议的那样），但这并没有什么不同。

当我执行 mule 应用程序并监视“测试审计员 Web 服务”（使用 wireshark）时，我看到 wsdl 发出了四个请求，我看到 wsdl 返回了，但我实际上没有看到 listTest 操作被调用。

我的流程是：

```
 <http:connector name="HTTP_HTTPS" cookieSpec="netscape"
    validateConnections="true" sendBufferSize="0" receiveBufferSize="0"
    receiveBacklog="0" clientSoTimeout="10000" serverSoTimeout="10000"
    socketSoLinger="0" doc:name="HTTP\HTTPS" />
    <flow name="TestAuditorClient_CheckerFlow1" doc:name="TestAuditorClient_CheckerFlow1">
    <quartz:outbound-endpoint jobName="GetTestList"
        repeatInterval="10000" responseTimeout="10000" doc:name="Quartz">
        <quartz:event-generator-job jobGroupName="GetTestList" />
    </quartz:outbound-endpoint>
    <cxf:jaxws-client operation="listTest"
        clientClass="server.TestService_Service" port="TestServicePort"
        wsdlLocation="http://192.168.66.7:8080/TestAuditorWebApp/TestService?wsdl"
        doc:name="SOAPY" />
    <outbound-endpoint
        address="http://192.168.66.7:8080/TestAuditorWebApp/TestService"
        doc:name="HTTP" />
    <logger message="Received HTTP Response #[payload]" level="INFO"
        doc:name="Logger" />
    <!-- <outbound-endpoint exchange-pattern="request-response" address="http://192.168.66.17:8080/TestAuditorWebApp/TestService" 
        doc:name="HTTP"/> -->
    <file:outbound-endpoint path="C:\tmp"
        outputPattern="#[function:datestamp:dd-MM-yy]_#[function:systime].txt"
        responseTimeout="10000" doc:name="Output File" />
</flow> 
```

我不仅是 mule 的新手，而且是堆栈溢出的新手。因此，如果我有更好的方法来提出相关问题，请提出建议并原谅。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:49:11.187

除了 Quartz，您可以使用`poll`消息处理器来生成`ListTest`您需要的实例。

假设这个类 FQDN 是`server.TestService.ListTest`（你没有告诉），下面应该工作：

```
<flow name="TestAuditorClient_CheckerFlow1">
  <poll frequency="10000">
    <set-payload value="#[lt=new server.TestService.ListTest(); lt.aField='aValue'; lt]" />
  </poll>
... 
```

请注意如何直接从创建 POJO 的表达式中设置 POJO 的值。

# javascript - 尝试使用 Three.js + ColladaLoader.js 实现 WebGL 查看器

> ID：15006656
> 
> 赞同：0
> 
> 时间：2013-02-21T15:57:02.633
> 
> 标签：javascript, django, three.js, webgl, collada

我正在尝试使用three.js + colladaloader.js 实现WebGl 查看器，但是在尝试导入和查看我自己的collada 对象时遇到了一些问题。我可以正确加载示例，但是在向其中添加我自己的模型时（不更改代码）我得到一个

> 无法转换外观类型的变换 WebGLRenderingContext：GL 错误：GL_INVALID_OPERATION：glDrawElements：尝试访问属性 0 中超出范围的顶点

任何想法如何让我自己的模型工作

我应该补充一点，我的 ColladaLoader.js 是此处托管的修补版本[https://raw.github.com/jihoonl/three.js/6e5a02427f2b9626a3fccc9c09d8654cc02d2109/examples/js/loaders/ColladaLoader.js](https://raw.github.com/jihoonl/three.js/6e5a02427f2b9626a3fccc9c09d8654cc02d2109/examples/js/loaders/ColladaLoader.js)

这是我要加载的模型：http: [//sketchup.google.com/3dwarehouse/details ?mid=bad38a0b2a3d753c8857d6b1c783b210&ct=mdsa&prevstart=0](http://sketchup.google.com/3dwarehouse/details?mid=bad38a0b2a3d753c8857d6b1c783b210&ct=mdsa&prevstart=0)

这是我的代码：

```
<script>

    if ( ! Detector.webgl ) Detector.addGetWebGLMessage();

    var container, stats;

    var camera, scene, renderer, objects;
    var particleLight, pointLight;
    var dae, skin;

    var loader = new THREE.ColladaLoader();
    loader.options.convertUpAxis = true;
    loader.load( '/site_media/models/model.dae', function ( collada ) {

        dae = collada.scene;
        skin = collada.skins[ 0 ];

        dae.scale.x = dae.scale.y = dae.scale.z = 0.002;
        dae.updateMatrix();

        init();
        animate();

    } );

    function init() {

        container = document.createElement( 'div' );
        document.body.appendChild( container );

        camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 2000 );
        camera.position.set( 2, 2, 3 );

        scene = new THREE.Scene();

        // Grid

        var size = 14, step = 1;

        var geometry = new THREE.Geometry();
        var material = new THREE.LineBasicMaterial( { color: 0x303030 } );

        for ( var i = - size; i <= size; i += step ) {

            geometry.vertices.push( new THREE.Vector3( - size, - 0.04, i ) );
            geometry.vertices.push( new THREE.Vector3(   size, - 0.04, i ) );

            geometry.vertices.push( new THREE.Vector3( i, - 0.04, - size ) );
            geometry.vertices.push( new THREE.Vector3( i, - 0.04,   size ) );

        }

        var line = new THREE.Line( geometry, material, THREE.LinePieces );
        scene.add( line );

        // Add the COLLADA

        scene.add( dae );

        particleLight = new THREE.Mesh( new THREE.SphereGeometry( 4, 8, 8 ), new THREE.MeshBasicMaterial( { color: 0xffffff } ) );
        scene.add( particleLight );

        // Lights

        scene.add( new THREE.AmbientLight( 0xcccccc ) );

        var directionalLight = new THREE.DirectionalLight(/*Math.random() * 0xffffff*/0xeeeeee );
        directionalLight.position.x = Math.random() - 0.5;
        directionalLight.position.y = Math.random() - 0.5;
        directionalLight.position.z = Math.random() - 0.5;
        directionalLight.position.normalize();
        scene.add( directionalLight );

        pointLight = new THREE.PointLight( 0xffffff, 4 );
        pointLight.position = particleLight.position;
        scene.add( pointLight );

        renderer = new THREE.WebGLRenderer();
        renderer.setSize( window.innerWidth, window.innerHeight );

        container.appendChild( renderer.domElement );

        stats = new Stats();
        stats.domElement.style.position = 'absolute';
        stats.domElement.style.top = '0px';
        container.appendChild( stats.domElement );

        //

        window.addEventListener( 'resize', onWindowResize, false );

    }

    function onWindowResize() {

        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();

        renderer.setSize( window.innerWidth, window.innerHeight );

    }

    //

    var t = 0;
    var clock = new THREE.Clock();

    function animate() {

        var delta = clock.getDelta();

        requestAnimationFrame( animate );

        if ( t > 1 ) t = 0;

        if ( skin ) {

            // guess this can be done smarter...

            // (Indeed, there are way more frames than needed and interpolation is not used at all
            //  could be something like - one morph per each skinning pose keyframe, or even less,
            //  animation could be resampled, morphing interpolation handles sparse keyframes quite well.
            //  Simple animation cycles like this look ok with 10-15 frames instead of 100 ;)

            for ( var i = 0; i < skin.morphTargetInfluences.length; i++ ) {

                skin.morphTargetInfluences[ i ] = 0;

            }

            skin.morphTargetInfluences[ Math.floor( t * 30 ) ] = 1;

            t += delta;

        }

        render();
        stats.update();

    }

    function render() {

        var timer = Date.now() * 0.0005;

        camera.position.x = Math.cos( timer ) * 10;
        camera.position.y = 2;
        camera.position.z = Math.sin( timer ) * 10;

        camera.lookAt( scene.position );

        particleLight.position.x = Math.sin( timer * 4 ) * 3009;
        particleLight.position.y = Math.cos( timer * 5 ) * 4000;
        particleLight.position.z = Math.cos( timer * 4 ) * 3009;

        renderer.render( scene, camera );

    }

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:58:26.370

通过使我的纹理更大来修复它（并将其放在与我的模型相同的文件夹中并重命名为与我的模型相同的名称）看起来 ColladaLoader.js 出于某种原因不加载小纹理

另一件事有一个错误[https://github.com/mrdoob/three.js/issues/3106](https://github.com/mrdoob/three.js/issues/3106)但这是修复[https://raw.github.com/jihoonl/three.js/6e5a02427f2b9626a3fccc9c09d8654cc02d2109/examples/js/ loaders/ColladaLoader.js](https://raw.github.com/jihoonl/three.js/6e5a02427f2b9626a3fccc9c09d8654cc02d2109/examples/js/loaders/ColladaLoader.js)，如果没有这个修复它似乎不起作用

# javascript - jQuery插件中忽略的setTimeout时间间隔

> ID：15006658
> 
> 赞同：1
> 
> 时间：2013-02-21T15:57:06.003
> 
> 标签：javascript, jquery, jquery-plugins, timeout

我在谷歌上搜索并遇到了许多类似的问题，人们试图在 jQuery 插件中设置超时但我正在努力寻找答案，这不是一个懒惰的帖子。

我试图在调用动画以隐藏某些内容时实现延迟，例如，如果用户将鼠标悬停在某个区域上，则会有更多内容进入视图并隐藏原始内容。然后，当用户在 2 秒后将鼠标移开时，将返回原始内容。

动画按预期工作，尽管忽略了超时。这是我无法理解的！

对代码的任何帮助将一如既往地不胜感激！

这是简化的代码，专注于动画，但我保留了插件结构：-

```
;(function($){
$.fn.extend({         
    pluginName: function(options) {
        // - Settings list and the default values           
        var defaults = {
            width: this.css('width'),
        };

        var options = $.extend({}, defaults, options);   

        return this.each(function() {

        // --  Globals
            var o = options;    
            var timeoutID;

        function deceptionAnimate(display) {
            if(display == 1) {
                obj.clearQueue().animate({
                                        'top': 0,
                                        'left': -o.width 
                                        }, o.interval, o.easing);               
            } else if(display == 0) {
                obj.clearQueue().animate({
                                        'top': 0,
                                        'left': 0
                                        }, o.interval, o.easing)                
            } 
        }

        function delaydeceptionAnimate () {
            timeoutID = window.setTimeout(deceptionAnimate(0), 2000);
        }

        // ---- Initiate
        function init() {   
                        // ----- Animate

                        $(document).on(o.eventTrigger, wrapperID, function() {
                            deceptionAnimate(1);
                        });
                        $(document).on('mouseout', wrapperID, function() {
                            delaydeceptionAnimate(0);
                        });     
        }       
        // Call
        init();

        });
    }
});
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T15:59:24.853

```
window.setTimeout(deceptionAnimate(0), 2000); 
```

您正在使用参数*调用* ，然后将其返回值 ( )作为要调用的函数传递给。`deceptionAnimate``0``null``setTimeout`

在这种特殊情况下，您可以`deceptionAnimte`像这样重写：

```
function deceptionAnimate(display) {
    if( display) { /* code to show box */ }
    else { /* code to hide box */ }
} 
```

然后使用这个：

```
window.setTimeout(deceptionAnimate, 2000); 
```

但在更一般的情况下，要将参数传递给要延迟的函数，请使用匿名函数：

```
window.setTimeout(function() {deceptionAnimate(0);}, 2000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:06:59.260

您需要注意如何编写超时函数调用。在这里，您实际上是在调用 delayDeceptionAnimate 而不是将其作为函数属性传递给 setTimeout 函数。

尝试像这样重写该块：

```
function delaydeceptionAnimate () {
    timeoutID = window.setTimeout(function() {
        deceptionAnimate(0);
        }, 2000);
} 
```

这样，您将传递一个回调函数，然后调用 delayDeceptionAnimate 函数！

# c - 字符数组下标警告

> ID：15006660
> 
> 赞同：6
> 
> 时间：2013-02-21T15:57:13.137
> 
> 标签：c, arrays, gcc, warnings, subscript

当我在本例中使用 char 数组下标时：

```
int main(){
    char pos=0;
    int array[100]={};

    for(pos=0;pos<100;pos++)
        printf("%i\n", array[pos]);

    return 0;
} 
```

我收到警告说我正在使用 char 数组下标：

> 警告：数组下标的类型为 'char' [-Wchar-subscripts]

没关系，因为我启用了这个警告。

GCC 手册说：

> -Wchar-subscripts 如果数组下标的类型为“char”，则发出警告。这是错误的常见原因，因为程序员经常忘记这种类型是在某些机器上签名的。此警告由 -Wall 启用。

所以这个警告应该防止使用负数组索引。我的问题是，为什么这个警告只在 char 上有效，而不在其他有符号类型上有效？

谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T16:00:42.137

这是因为`int`总是签名。

`char`不必。

`char`可以签名或未签名，具体取决于实现。（有三种不同的类型 - `char`, `signed char`, `unsigned char`）

*但问题是什么？我只能使用 0 到 127 之间的值。这会默默地伤害我吗？*

哦，是的，它可以。

```
//depending on signedess of char, this will
//either be correct loop,
//or loop infinitely and write all over the memory
char an_array[50+1];
for(char i = 50; i >= 0; i--)
{
    an_array[i] = i;
    // if char is unsigned, the i variable can be never < 0
    // and this will loop infinitely
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T15:59:36.393

简单地说，它抱怨你的索引是 type `character`。

只需转换`pos`为an `int`，警告就会消失。

至于为什么会出现这个警告，你自己说了。`char`数据类型只能处理 0 - 255（如果无符号）甚至 127（如果有符号）的值。对于普通数组，这是一个相当少的数字，您可能会很快忘记该`signed`位并意外访问数组位置 -128（通过实际访问数组元素 128）。

只要您的数组小于 127，就可以了，您可以忽略警告，但老实说……内存占用中的这三个额外字节不会使您的应用程序效率低下，不是吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-11T02:48:21.933

因为本机`char`可以是未签名的或已签名的。

请注意，使用负下标是完全合法的。例如：

```
int arr[10];
int *ptr = arr[5]; 
```

现在我可以使用`ptr[-1]`相当于`arr[4]`. 如果`char`在实现中碰巧是无符号的，它永远不会是负值。

# jquery - 选择的jQuery：选择的大小

> ID：15006666
> 
> 赞同：3
> 
> 时间：2013-02-21T15:57:27.330
> 
> 标签：jquery, html, jquery-chosen

我正在使用带有搜索下拉列表的 [jQuery selected plugin][1]，我想将滚动条中显示的选项数量设置为只有 2。但它显示了 10 个选项。任何想法 ？

查询：

> $(".select").chosen();

我在选择标签中将属性大小设置为 2，但什么也没发生

```
 <select data-placeholder="Choisir équipe..." class="select" name="Equipe_sup" id="Equipe_sup" style="width:350px;" tabindex="2" size="2"></select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:17:26.083

一种解决方案使用`size="2"`你的`<select id="select" name="name" title="test" size="2">test</select>` 并尝试这个[http://harvesthq.github.com/chosen/](http://harvesthq.github.com/chosen/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-30T09:43:07.970

使用元素的最大高度功能来限制所选下拉列表中显示元素的限制

```
$('#id').css("max-height","127px"); // this will display 5 elements 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-27T05:02:58.647

使用此代码，我希望会成功：

```
$(".chosen-select").chosen({width: "100%"}); 
```

# sql - 我应该暂时禁用外键约束吗？如何？

> ID：15006669
> 
> 赞同：11
> 
> 时间：2013-02-21T15:57:39.103
> 
> 标签：sql, database, postgresql, foreign-keys

我有两张桌子：

```
person:
    id serial primary key,
    name varchar(64) not null

task:
    tenant_id   integer not null references person (id) on delete cascade,
    customer_id integer not null references person (id) on delete restrict 
```

（他们有比这更多的列，但其余的与问题无关。）

问题是，我想在删除`task`租户时级联删除它`person`。但是当租户和客户是同一个人时，`customer_id`外键约束会限制删除。

我的问题有两个部分：

1.  暂时禁用第二个外键是我唯一的选择吗？
2.  如果是这样，那么我该如何在 PostgreSQL 中做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-21T17:56:53.690

实际上，您创建了一个规则相互矛盾的*竞争条件。*

我的第一个冲动是检查[`DEFERRED`](http://www.postgresql.org/docs/current/interactive/sql-set-constraints.html)约束是否有帮助。但它*没有任何区别是有道理的。*

我发现脚本中**首先出现`CREATE TABLE`**的 FK 约束是这场比赛的获胜者。如果`ON DELETE CASCADE`先到，则级联删除，如果`ON DELETE RESTRICT`先到，则中止操作。

考虑[**SQL Fiddle**](http://sqlfiddle.com/#!12/09465/5)上的演示。

这似乎与`oid`目录表中的较小值相关[`pg_constraint`](http://www.postgresql.org/docs/current/interactive/catalog-pg-constraint.html)：

```
SELECT oid, * FROM pg_constraint WHERE conrelid = 'task'::regclass 
```

但是您的反馈表明，这不是原因。也许[`pg_attribute.attnum`](http://www.postgresql.org/docs/current/interactive/catalog-pg-attribute.html)决定比赛。无论哪种方式，只要它没有记录在案的行为，您就不能依靠它在下一个主要版本中保持这种状态。可能值得在 pgsql-general@postgresql.org 上发布一个问题。

与所有这些无关，您需要考虑其他行：即使`CASCADE`将通过`task`同时具有`tenant_id`并`customer_id`指向a 的行`person`，如果任何行仅`customer_id`引用，它仍然会受到限制`person`。
另一个演示此案例的[SQL Fiddle 。](http://sqlfiddle.com/#!12/f9e67/1)

### 如何禁用约束？

你最好的选择是放弃并重新创建它。在事务中执行所有操作，以确保您不会破坏参照完整性。

```
BEGIN;

ALTER TABLE task DROP CONSTRAINT task_customer_id_fkey;

DELETE FROM person WHERE id = 3;

ALTER TABLE task ADD CONSTRAINT task_customer_id_fkey
FOREIGN KEY (customer_id) REFERENCES person (id) ON DELETE RESTRICT;

COMMIT; 
```

这会独占锁定表，不适合在多用户环境中进行日常使用。

我怎么知道约束的*名称？*我从`pg_constraint`上面演示的。使用显式约束名称开头可能更容易：

```
CREATE TEMP TABLE task (
    customer_id integer NOT NULL
   ,tenant_id integer NOT NULL REFERENCES person (id) ON DELETE CASCADE
   ,CONSTRAINT task_customer_id_fkey FOREIGN KEY (customer_id)
    REFERENCES person (id) ON DELETE RESTRICT
); 
```

* * *

还有

```
ALTER TABLE task DISABLE trigger ALL; 
```

[更多的手册在这里](http://www.postgresql.org/docs/current/interactive/sql-altertable.html)。但这会禁用*所有*触发器。我没有运气尝试仅禁用系统创建的触发器来实现单个 FK 约束。

[其他替代方法是使用触发器](http://www.postgresql.org/docs/current/interactive/sql-createtrigger.html)或[规则](http://www.postgresql.org/docs/current/interactive/sql-createrule.html)来实施您的制度。这可以正常工作，但这些执行不如外键严格。

# python - 扭曲的 TCP 到 IRC

> ID：15006678
> 
> 赞同：1
> 
> 时间：2013-02-21T15:58:02.263
> 
> 标签：python, twisted

我正在努力让我扭曲的 IRC 机器人将发送到 TCP 服务器的数据回显到 IRC 通道。

我目前所做的是让 TCP 服务器将所有消息附加到一个列表中，然后每次调用 IRC 机器人的 RecievedData 函数时，它都会检查是否有消息并显示它们。

为了改进这一点，我想告诉新闻消息在队列中，它现在必须显示它们。

这是到目前为止的代码

Main.py：https://gist.github.com/anonymous/5005624 [_](https://gist.github.com/anonymous/5005624)

ircbot.py：https://gist.github.com/anonymous/dae18fe12792a6a8dd4d [_](https://gist.github.com/anonymous/dae18fe12792a6a8dd4d)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T17:36:04.160

这个问题很像[Twisted FAQ 中回答的问题之一](http://twistedmatrix.com/trac/wiki/FrequentlyAskedQuestions#HowdoImakeinputononeconnectionresultinoutputonanother)。

本质上，更改您的工厂，以便`Echo`它创建的实例可以以某种方式访问​​ - 作为一个全局，如果你喜欢（全局不好，不要使用它们） - 然后在数据到达时调用它的方法（而不是调用`append`方法名单`messages`）。

# wpf - 如何设置用户控件的高度和宽度

> ID：15006682
> 
> 赞同：2
> 
> 时间：2013-02-21T15:58:14.237
> 
> 标签：wpf, xaml, height, width

我在用户控件中设置高度和宽度时遇到问题。我创建了一个新的 WPF 应用程序，它会自动创建 MainWindow.xaml。代码如下所示：

```
//MainWindow.xaml
<Window x:Class="Project.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>

    </Grid>
</Window>

//MainWindow.cs
namespace Project
{
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }
    }
} 
```

我更改了代码，以便使用 UserControl 而不是 Window，如下所示：

```
//MainWindow.xaml
<UserControl x:Class="Project.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Height="350" Width="525">
    <Grid>

    </Grid>
</UserControl>

//MainWindow.cs
namespace Project
{
    public partial class MainWindow : UserControl
    {
        public MainWindow()
        {
            InitializeComponent();
        }
    }
} 
```

为什么不设置高度或宽度？不可能那么难。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T18:51:43.880

第二个示例中的代码甚至不应该编译，因为您在代码隐藏（Window）中指定了不同的基类作为 XAML（UserControl）。

假设您将代码隐藏更改为 UserControl（或什么都没有，因为它实际上只会从 XAML 中获取）大小应该从您在 XAML 中设置的内容中获取，但仅作为初始默认值。要在某处实际显示您的控件，并且将创建实例，可能在 XAML 中，但也可能来自代码。这些实例中的每一个都将使用您在此处设置的宽度和高度创建，但在任何时候都可以覆盖它们：

```
<local:MainWindow Width="25" Height="100"/> 
```

那时您设置的值现在已经消失了。根据控件实例周围的情况，布局系统中还可以发生许多不同的交互。包含 Panel 或其他元素，以及 Alignment、Margin 和各种其他设置可能会影响控件的实际呈现大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:05:00.657

（如果我犯了命名错误，请原谅，我还在学习 WPF。如果我对此有误，请纠正我。）

UserControls 需要以某种形式的容器（StackPanel、Grid、Window、...）添加。这些容器是通常设置布局的容器，其中大多数确实考虑了其子元素的设置宽度/高度。但是，如果没有包含父级，则子级无法正确设置其布局。

如果您考虑一下，如果不在窗口中，您希望如何向用户显示用户控件（与按钮处于同一级别（尽管是一个非常复杂的按钮））？

当然，能够为每个 UserControl 创建单独的文件当然很好，但最后，您总是必须将它加载到一个窗口中（如果我错了，请纠正我）。

因此，与其删除主窗口，为什么不在单独的文件中创建一个**新的 UserControl 呢？**

# android - 位置传感器融合代码

> ID：15006684
> 
> 赞同：4
> 
> 时间：2013-02-21T15:58:19.500
> 
> 标签：android, gps, kalman-filter

我正在为我正在做的一点虚拟现实 POC 寻找户外定位。我想用 GPS 和 IMU 传感器控制游戏角色的运动（不是用 IMU 完成的旋转）。

我需要融合 GPS 和 ACC 传感器以尽可能减少延迟和错误。周围有没有这样的融合，还是我必须从头开始发明它？

该代码将用于此开源项目[https://github.com/AndersMalmgren/FreePIE](https://github.com/AndersMalmgren/FreePIE)

**编辑：** 这篇文章建议卡尔曼[http://www.codeproject.com/Articles/326657/KalmanDemo](http://www.codeproject.com/Articles/326657/KalmanDemo) 但是这里的人建议加速度计的误差太大，它不会工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T11:35:47.393

您当然不必从头开始“发明”它 - GPS/INS 融合是文学中很好的话题。仅有两本书：

*   法雷尔： http: [//books.google.de/books/about/The_Global_Positioning_System_Inertial_N.html ?id=fW4foWASY6wC&redir_esc=y](http://books.google.de/books/about/The_Global_Positioning_System_Inertial_N.html?id=fW4foWASY6wC&redir_esc=y)
*   格罗夫斯：[http](https://rads.stackoverflow.com/amzn/click/com/1580532551) ://www.amazon.com/Principles-Multi-Sensor-Integrated-Navigation-Applications/dp/1580532551 ）。

正如其他人指出的那样（例如[Android 的 Kalman Filter](https://stackoverflow.com/questions/2839090/kalman-filter-for-android)），Java / for Android 中也有 Kalman 滤波器的实现。

在您的特定情况下，卡尔曼滤波的问题是需要满足实现卡尔曼滤波器的几个要求*。从理论上讲，您需要确保噪声（未建模的测量误差）始终为[白色](http://en.wikipedia.org/wiki/White_noise)且不相关。问题是您没有从内部接收器（大致可以认为是白色的）获得原始 GPS 测量值，而是已经过滤的解决方案（它肯定表现出时间相关性）。

另一个问题是，在卡尔曼滤波器中，您需要进行一些调整，即您需要设置测量噪声等参数。这些参数取决于所用传感器的质量——因此它们在不同设备之间有所不同。这可能会降低您在某些设备上的估计质量。

话虽如此，可能有几种解决方案：

*   使用**速度来推断**位置更新之间的位置。（我没有在 Android 上做过这个，但[这个问题](https://stackoverflow.com/questions/4811920/why-getspeed-always-return-0-on-android)可能有助于获得速度。）如果用户的速度变化不是太频繁（与位置更新频率相比），这在大多数情况下应该工作得很好。

*   **实现一个完整的卡尔曼滤波器**：如上面引用的书籍所述，将绝对位置测量与加速度计相结合是很常见的，即使使用廉价的 MEMS 级惯性传感器也是如此。为了减少 Acc 传感器引起的误差，请在卡尔曼滤波器状态向量中估计这些误差。通常，卡尔曼滤波器在一个滤波器中估计位置、速度、姿态和 Acc/Gyro 偏差。如果你想假设它们已经足够了解，你可以放弃姿态和陀螺仪。即使您的传感器可能会出现更多错误，但估计偏差通常足以在位置更新之间进行估计。

    实现一个完整的卡尔曼滤波器也可能意味着您考虑测量的时间相关性，例如使用称为施密特卡尔曼滤波器的技术（参见上面引用的书籍）。这也可能意味着您使用自适应卡尔曼滤波来估计滤波器的一些参数，以考虑不同设备中的不同传感器。但是请注意，此类事情需要一点导航领域的经验：实现通常很容易 - 只需几行矩阵运算，但调整可能很耗时。但这并不意味着你不应该尝试！

*   **仅使用**上述滤波器的偏差估计：使用估计的 Acc 偏差，您可以通过加速度计测量值外推速度来改进第一种方法（用速度外推位置）。

*从理论的角度来看 - 你总是可以忽略理论而只是尝试。有时它仍然可以工作:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-20T14:28:15.807

我知道这有点晚了，但是我有一个开源项目，其中包含用于 Java 的卡尔曼滤波和 Rauch-Tung-Striebel 平滑（向后卡尔曼）。如果您的过程模型和/或测量模型是非线性的，则还支持扩展和无味过滤和平滑。

[https://github.com/karnstrand/Kalman4J](https://github.com/karnstrand/Kalman4J)

Lycka 直到 Anders！:-)

# fullcalendar - 带有谷歌日历的完整日历

> ID：15006685
> 
> 赞同：0
> 
> 时间：2013-02-21T15:58:20.203
> 
> 标签：fullcalendar

我正在尝试在我的网站上实现完整的日历。我让日历正常工作，谷歌日历提供后端数据。我有几个问题：

1.  如何将议程周，议程日添加到视图中（我从文档中不明白），以便在日历加载时我在顶部有 3 个按钮？

2.  有没有办法让用户不点击日历事件，因为它会打开一个包含事件详细信息的谷歌日历页面。我希望用户只需将鼠标悬停在事件上即可获取事件详细信息。最好不要向用户显示谷歌日历界面，而只是在后端使用它来输入日历数据。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:09:28.607

1）您需要在标题中包含要显示的视图选项。像这样的东西：

```
header: {
  left: 'prev,next today',
  center: 'title',
  right: 'month,agendaWeek,agendaDay'
} 
```

2）您可以使用`eventClick`回调中断事件的点击事件。在这里，您可以将事件定向到弹出窗口或返回`false`。您可以将`eventMouseover`回调用于悬停。检查这些链接以获取有关这些回调的文档 - [eventClick](http://arshaw.com/fullcalendar/docs/mouse/eventClick/)和[eventMouseOver](http://arshaw.com/fullcalendar/docs/mouse/eventMouseover/)

希望这可以帮助！

# css - 清除输入边框，恢复默认

> ID：15006687
> 
> 赞同：0
> 
> 时间：2013-02-21T15:58:20.900
> 
> 标签：css

所以有人应用了以下样式：

```
select, input[type="text"], input[type="password"] {
    border: 1px solid #999999 !important;
} 
```

为什么他们这样做我永远不会知道。但是现在我需要删除上面的边框，即返回到标准浏览器特定的文本框边框，但只在几个地方。*我知道，我知道，这看起来很奇怪*，但我正在做我被告知的事情。

什么 CSS 会**恢复**上面设置的边框？

我试过了

```
border:;
border:auto; 
```

都不工作！

只是为了澄清，**我不能只删除 css style**。如果可能的话，我需要覆盖它！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:03:15.297

有什么理由不能像 user2063626 建议的那样删除代码行吗？

如果不这样做：

```
select, input[type="text"], input[type="password"] {
    border: none !important;
} 
```

编辑：

将 a 添加`:not`到您的 css 选择器中，这样它就不会选择您想要独处的输入。

```
select:not(#yourinput), input[type="text"]:not(#yourinput), input[type="password"]:not(#yourinput) {
    border: 1px solid #999999 !important;
} 
```

编辑2：

您最好的选择是添加一个类，或者使用更具体的选择器（`#div select`而不是 just `select`）。这样，css 只针对您想要的那些，而不影响您可能添加的任何新的。

或者，如果它更容易，只需添加一个类，或者在`select`您不想拥有样式的对象上使用更具体的选择器，然后对其应用默认样式。

[您可以在mozilla.org](http://mxr.mozilla.org/mozilla-release/source/layout/style/forms.css?force=1)上找到默认样式，只需搜索`select`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:01:26.487

只需将以下类添加到您的 css 并放入您不希望有边框的输入。

```
input.noBorder{
      border: 0 !important;
} 
```

# javascript - 希望使用 javascript 将网页另存为文本文件

> ID：15006691
> 
> 赞同：2
> 
> 时间：2013-02-21T15:58:25.763
> 
> 标签：javascript, jscript

这是一个有很多文字的体育网站，我稍后会根据兴趣对文字进行排序。

我遇到的唯一代码是：

```
<html>
<body>
<script language="JScript">
<!--
function open()

{
    var result = string.Empty;
    using (var webClient = new System.Net.WebClient())

    result = webClient.DownloadString("http://some.url");

    var myObject, afile;
    myObject = new ActiveXObject("Scripting.FileSystemObject");
    afile = myObject.OpenTextFile("F:\\sports.txt", 8, true, 0);
    afile.write (result);
    afile.close();
}
-->
</script>
Open a text stream for the file sport.txt

<form name="myForm">
<input type="Button" value="Open File" onClick='open()'>
</form>
</body>
</html> 
```

任何帮助将不胜感激，如果需要，我也可以用其他语言写作。请指导我！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T18:37:20.513

您发布的代码什么都不做，因为它不是有效的 JS 代码。由于问题如此不明确，答案可能不是您所要求的。

我不确定您真正想要保存的内容是整个页面源还是浏览器呈现的可见文本。此外，您没有指定将在哪个环境中运行您的脚本，是在 Web 浏览器中还是在 WSH 中？

我将发布这两种情况的示例代码（页面源/文本）。我会尽我最大的努力用 JScript 编写其中的至少一个。但是，对我来说，用 VBScript 编写更容易，正如你所说，这不是问题，我的第二个示例代码将在 VBS 中。

要获取 html 源代码 (.JS)：

```
var url = 'http://some.url'; // set your page url here
with (new ActiveXObject("Microsoft.XmlHttp")) {
    open('GET', url, false);
    send('');
    var data = responseText;
    with (new ActiveXObject("ADODB.Stream")) {
        Open();
        Type = 2; // adTypeText
        Charset = 'utf-8'; // specify correct encoding
        WriteText(data);
        SaveToFile("page.html", 2);
        Close();
    }
} 
```

要获得可见/渲染文本 (.VBS)：

```
Dim url: url = "http://some.url" 'set your page url here'
With WScript.CreateObject("InternetExplorer.Application", "IE_")
    .Visible = False
    .Navigate url
    Do
        WScript.Sleep 100
    Loop While .ReadyState < 4 And .Busy
    Dim data: data = .Document.Body.innerText
    With CreateObject("ADODB.Stream")
        .Open
        .Type     = 2 'adTypeText'
        .Position = 0
        .Charset  = "utf-8"
        .WriteText data
        .SaveToFile "output.txt", 2
        .Close
    End With
    .Quit
End With 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T17:23:28.990

如果您想编写自己的实用程序脚本来获取页面内容并将其下载到文件中，并且您想用 JavaScript 编写它，您可以使用 Node.js。

[http://nodejs.org/](http://nodejs.org/)

如果您只需要一个命令行工具来执行此操作，请使用[wget](http://www.gnu.org/software/wget/)。

这两个选项都可以在许多平台上运行。

# php - 在单引号内传递变量

> ID：15006693
> 
> 赞同：0
> 
> 时间：2013-02-21T15:58:29.993
> 
> 标签：php, quotes, strftime

有人可以请教我一点吗？我不知道如何将变量传递给 strftime 之类的函数。

例如：

```
$day = '%a';
echo strftime('$day', time()); 
```

我不知道如何使变量不作为文字传递。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T16:00:32.753

对于此示例，您根本不需要引号：

```
echo strftime($day, time()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T16:00:22.223

使用双引号而不是单引号，一切都应该没问题。

# java - 当我尝试通过服务窗口将 oracle 10g 与 netbeans7.2 连接时出现错误

> ID：15006696
> 
> 赞同：0
> 
> 时间：2013-02-21T15:58:50.233
> 
> 标签：java, oracle10g

我收到一个错误：-

> 无法使用 oracle.jdbc.OracleDriver 建立与 jdbc:oracle:thin:@localhost:1521:orcl 的连接（Io 异常：网络适配器无法建立连接）

请帮我。
并指导我做什么，因为我需要在我的网络项目中使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T17:42:18.827

尝试以下任何解决方案

```
1\. If the network port is not open, or it is blocked by a firewall, you can try TELNET.
2\. If DB listener is not running or is binding to a different network interface, you can try either TELNET or else use Oracle client tools to connect.
3\. If again the problem persists, you may please start the listener through command prompt (lsnrctl start) 
```

# c# - 在队列中播放 .wav 文件

> ID：15006698
> 
> 赞同：1
> 
> 时间：2013-02-21T15:59:00.600
> 
> 标签：c#, .net, multithreading, queue, wav

尝试在线程安全队列中播放 .wav 文件。任何线程都可以随机触发调用，但必须按顺序播放。问题是当我`Play(string[] files)`用 3 个文件名（目前从 UI 线程测试）调用时，最后一个文件播放了 3 次，而第一个文件从未播放过。看不出这是什么原因造成的..？

希望提供更简单的方法来执行此操作，但主要想知道为什么这不起作用。

```
public class Audio
{
    static ActionQueue actionQueue;
    public static string MediaFolder { get; set; }
    private static object syncroot = new object();

    static Audio()
    {
        actionQueue = new ActionQueue();
    }

    /// <summary>
    /// Plays .wav in async queue. 
    /// </summary>
    /// <param name="fileName"></param>
    public static void Play(string fileName)
    { 
        actionQueue.Add(() => PlaySound(fileName));
    }

    public static void Play(string[] files)
    {
        Console.WriteLine("ID0: " + Thread.CurrentThread.ManagedThreadId);
        foreach (string f in files.ToList())
        {
            Console.WriteLine("Queue file: " + f);
            actionQueue.Add(() => PlaySound(f));
        }
    }

    private static void PlaySound(string f)
    {
        Console.WriteLine("ID1: " + Thread.CurrentThread.ManagedThreadId);

        var fileName = f;

        Console.WriteLine("Play queue: " + fileName);

        fileName = Path.Combine(MediaFolder, fileName);

        if (!Path.HasExtension(fileName))
            fileName = fileName + ".wav";

        if (!File.Exists(fileName)) return;
        string ext = Path.GetExtension(fileName);
        if (ext != ".wav") return;

        Console.WriteLine("Playing: " + fileName);

        SoundPlayer player = new SoundPlayer(fileName);
        player.PlaySync();
    }
}

public class ActionQueue
{
    private  BlockingCollection<Action> persisterQueue = new BlockingCollection<Action>();     

    public  ActionQueue( )
    { 
        var thread = new Thread(ProcessWorkQueue);
        thread.IsBackground = true;
        thread.Start();
    }

    private   void ProcessWorkQueue()
    {
        while (true)
        {
            var nextWork = persisterQueue.Take(); 
            nextWork();  
        }
    }

    public  void Add(Action action)
    { 
        persisterQueue.Add(action ); 
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T16:06:19.707

这是经典[的闭包捕获循环变量](https://stackoverflow.com/questions/271440/c-sharp-captured-variable-in-loop)问题。

您需要复制循环变量，即

```
 foreach (string f in files.ToList())
    {
        var copy = f;
        Console.WriteLine("Queue file: " + f);
        actionQueue.Add(() => PlaySound(copy));
    } 
```

传递给您的代表的原因是`actionQueue`在循环完成之前不会执行。当然，到那个时候，变量的`f`值已经改变了。

# php - 我正在尝试从即将被弃用的 mysql 语句转到 sqli 准备好的语句，我做错了什么？

> ID：15006700
> 
> 赞同：0
> 
> 时间：2013-02-21T15:59:03.753
> 
> 标签：php, mysql, prepared-statement

这是我的PHP：

```
 $db = new mysqli($db_host, $db_user, $db_pass, $db_database);

    if (mysqli_connect_errno()) {
        echo "Could not connect to database.";
    }

    // On first connect to database, create a user to hold data for users not logged in
    $stmt = $db->prepare("SELECT id FROM users WHERE id = ?");
    $stmt->bind_param("i" , 1);
    $stmt->execute();

    if ($stmt->num_rows == 0) {
        $stmt = $db->prepare("INSERT INTO users (id, username, email, password) VALUES (?, ?, ?, ?");
        $stmt->bind_param("isss", 1, "anonymous", "anonymous", password_hash("noidentity", PASSWORD_BCRYPT));
        $stmt->execute();
    } 
```

但是当它运行时，我得到这个错误：

致命错误：无法通过引用传递参数 2

它指向我拥有的那条线`$stmt->bind_param("i" , 1);`

我不确定我做错了什么。

另外，如果我想将连续字段的值设置为比当前值高 1，我该如何使用准备好的语句来做到这一点？

例如：`UPDATE users SET wins = wins + 1 WHERE id = ?`将 wins 设置为某个值是一个值，所以我认为它应该与准备好的语句一起使用，但我是否认为“wins + 1”是一个字符串，并将其包含在准备好的语句中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T16:02:25.177

所有参数`bind_param`（除了第一个）必须是通过引用传递的变量，您不能只传递文字值，例如`1`, `"anonymous"`...

如果要插入的值是这样固定的，那么使用根本没有意义`bind_param`，因为将它们放在查询中是完全安全的：

```
$stmt = $bd->prepare("INSERT INTO users (id, username, email, password) VALUES (1, 'anonymous',...)"); 
```

但是，通常您需要将这些参数放入变量中，例如：

```
$params = Array(1,"anonymous","anonymous",password_hash("noidentity",PASSWORD_BCRYPT));
$stmt->bind_param("isss",$params[0],$params[1],$params[2],$params[3]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:12:54.160

```
$param = 1;
$stmt->bind_param("i" , $param); 
```

因为不能在绑定中传递值，只能传递参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T16:28:43.247

这就是为什么我更喜欢 PDO 而不是 Mysqli。

在 PDO 中，您不需要绑定任何东西，您只需将值传递给`execute()`并且可以按值传递它们，这样您就可以使用文字和表达式。

```
$stmt = $pdo->prepare("INSERT INTO users (id, username, email, password) 
    VALUES (?, ?, ?, ?");

$status = $stmt->execute(array(1, "anonymous", "anonymous", 
    password_hash("noidentity", PASSWORD_BCRYPT)); 
```

当然在每次prepare() 和execute() 之后检查是否成功。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-21T16:10:17.740

这段代码在逻辑上是有缺陷的：

```
if (mysqli_connect_errno()) {
    echo "Could not connect to database.";
} 
```

如果*没有*错误，此函数将返回`0`aka `false`，更不用说这不会导致脚本退出或跳过查询执行。您应该将其更改为：

```
$db = new mysqli($db_host, $db_user, $db_pass, $db_database)
if( $db->connect_error ) {
    echo "Could not connect to database.\n" .
        "Err: " . $db->connect_errno() . "\n" . $db->connect_error();
    // die/exit/return error/throw exception, or...
} else {
    // query prep/execution here
} 
```

您还混合了 OO 和程序调用，我不知道这在执行方面是否重要，但它令人困惑。

# ssrs-2008 - CRM 2011 自定义报告 rsProcessAborted System.TimeoutException

> ID：15006701
> 
> 赞同：2
> 
> 时间：2013-02-21T15:59:08.323
> 
> 标签：ssrs-2008, dynamics-crm-2011, timeoutexception

我在 CRM 2011 中遇到自定义报告问题。

我正在 BIDS 中创建一个基于 FetchXML 的报告，其中预览工作没有问题。然后我将 RDL 文件上传到 CRM。

当我运行报告时，我得到一个 rsProcessingAborted 错误（这里没有太多信息）。我尝试通过报告服务器页面运行相同的报告。在这里，至少我得到了一个非常详细的异常消息：

> Microsoft.Crm.CrmException：发生意外错误。System.TimeoutException：发送到 net.tcp://scrmq01/CrmSandboxSdkListener-w3wp 的请求操作在配置的超时 (00:02:00) 内未收到回复。分配给此操作的时间可能是较长超时的一部分。这可能是因为服务仍在处理操作，或者因为服务无法发送回复消息。请考虑增加操作超时（通过将通道/代理转换为 IContextChannel 并设置 OperationTimeout 属性）并确保服务能够连接到客户端。
> 
> 一个意料之外的问题发生了。这个发送到 net.tcp://scrmq01/CrmSandboxSdkListener-w3wp 的请求操作在配置的超时 (00:02:00) 内没有收到回复。分配给此操作的时间可能是较长超时的一部分。这可能是因为服务仍在处理操作，或者因为服务无法发送回复消息。请考虑增加操作超时（通过将通道/代理转换为 IContextChannel 并设置 OperationTimeout 属性）并确保服务能够连接到客户端。

如果我设置了过滤器，该报告在 CRM 上可以完美运行。比如说，只有过去 7 天的数据。

因此，我的报告返回的数据量似乎导致超时。我已将 Reports 网页上的 Timeout 设置更改为“No timeout”，并将 OLEDBTimeout 注册键增加到更大的值，但均无济于事。

有谁知道这个 CrmSandboxSdkListener 超时可以在哪里更改。

# c# - 确定类型等价

> ID：15006704
> 
> 赞同：7
> 
> 时间：2013-02-21T15:59:11.493
> 
> 标签：c#, types, interface

是否可以在 C# 中（我使用的是 .Net 4.5，但更一般地询问）来确定泛型类型的两个实现是否在功能上等效？

作为需求的一个例子，假设我有一个`IMapper`接口定义为：

```
public interface IMapper<TTo, TFrom>
{
    TTo MapFrom(TFrom obj);
    TFrom MapFrom(TTo obj);
} 
```

我的理想实现是：

```
public class MyMapper : IMapper <A, B>
{
    A MapFrom(B obj) {...}
    B MapFrom(A obj) {...}
} 
```

这在*功能上等同*于：

```
public class MyEquivalentMapper : IMapper <B, A>
{
    B MapFrom(A obj) {...}
    A MapFrom(B obj) {...}
} 
```

但是编译器（正确地）将它们识别为不同的类型。有没有办法告诉编译器将这两种类型视为等效（甚至可以互换）？

我也看过这个：

```
public interface ISingleMapper<out TTo, in TFrom>
{
    TTo MapFrom(TFrom obj);
}
public class MyAlternateMapper :
    ISingleMapper<A, B>,
    ISingleMapper<B, A>
{
    A MapFrom(B obj) {...}
    B MapFrom(A obj) {...}
} 
```

但我发现我无法正确识别抽象，因此我可以在不创建“中间人”接口的情况下注入（到构造函数等）具体类：

```
public interface IBidirectionalMapper<TTo, TFrom> :
    ISingleMapper<TTo, TFrom>,
    ISingleMapper<TFrom, TTo>
{
    TTo MapFrom(TFrom obj);
    TFrom MapFrom(TTo obj);
}
public class MyAlternateMapper : IBidirectionalMapper<A, B>
{
    A MapFrom(B obj) {...}
    B MapFrom(A obj) {...}
} 
```

我认为“中间人”方法更“正确”，但我不想创建一个多余的类型。此外，它仍然存在交换类型参数会创建两种不同但*功能等效*的类型的问题。

有没有更好的方法来实现我的目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:24:40.200

鉴于此定义：

```
public interface IMapper<out TTo, in TFrom>
{
    TTo MapFrom(TFrom obj);
    TFrom MapFrom(TTo obj);
} 
```

由于不对称的协变/逆变泛型参数，类型`IMapper<A, B>`和`IMapper<B, A>`实际上并不等效。但是，忽略这一点...

您可以尝试以下方法（尽管当 A 和 B 具有相同类型时这可能会出现问题）。

```
//Represents an oriented one-way mapper
public interface IDirectionalMapper<A, B>
{
    B Map(A obj);
}

//Represents an oriented two-way mapper
public interface IBidirectionalMapper<A, B>
    : IDirectionalMapper<A, B>, IDirectionalMapper<B, A>
{
}

//Represents an unoriented two-way mapper
public interface IUndirectedMapper<A, B>
    : IBidirectionalMapper<A, B>, IBidirectionalMapper<B, A>
{
} 
```

现在，例如，您可以`IUndirectedMapper<int, string>`在代码中定义某个位置，然后将其用作 a`IBidirectionalMapper<int, string>`和 a `IBidirectionalMapper<string, int>`。

## 编辑

这些定义为您提供了以下三个错误。

`IBidirectionalMapper<A,B>`不能同时实现`IDirectionalMapper<A,B>`，`IDirectionalMapper<B,A>`因为它们可能会针对某些类型参数替换统一

看起来这种方法不起作用，对不起。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T20:47:02.087

您可以拥有一个同时进行两种翻译的映射器，但只是让它定向，因为在您的情况下，总是有一个“我的对象”和“数据库对象”配对。

```
interface IDbTypeModel<T, TDb>
{
    T FromDb(TDb dbObj);
    TDb ToDb(T obj);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T21:04:33.170

没有办法表达 a`IGenericInterface<T,U>`应该被认为等同于a 的概念`IGenericInterface<U,T>`，因为这些接口的方法将被不同地绑定。例如，如果一个类实现了这样的接口

```
MyClass<T,U> : IGenericInterface<T,U>
{
  public T Convert(U param) { Console.WriteLine("U to T"); }
  public U Convert(T param) { Console.WriteLine("T to U"); }
} 
```

调用哪个函数的选择取决于 T 和 U 的角色。如果执行以下操作：

```
MyClass2<T,U>
{

  ... inside some method
    T myT;
    U myU;
    IGenericInterface<T,U> myThing = new MyClass<T,U>();
     myT = myThing.Convert(myU);
} 
```

上面的`Convert`方法将绑定到输出“U to T”的方法，即使在`MyClass2<Foo,Foo>`两个类型相同的情况下也是如此。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T21:18:20.193

真的不清楚你所说的“等价”是什么意思。如果您的意思是两种类型是等效的，因为它们具有相同的成员并且成员具有相同的签名，那么您可以使用反射来确定：

```
 public class TypeComparer : IEqualityComparer<MemberInfo>
    {
        public bool Equals(MemberInfo x, MemberInfo y)
        {
            return x.ToString() == y.ToString();
        }

        public int GetHashCode(MemberInfo obj)
        {
            return obj.GetHashCode();
        }
    }

    public static bool AreTypesEqual(Type type1, Type type2)
    {
        return type1.GetMembers().
            SequenceEqual(type2.GetMembers(), new TypeComparer());
    } 
```

如果成员的顺序无关紧要：

```
 public static bool AreTypesEqual2(Type type1, Type type2)
    {
        return type1.GetMembers().OrderBy(e=>e.ToString()).
            SequenceEqual(type2.GetMembers().OrderBy(e=>e.ToString()), new TypeComparer());
    } 
```

# javascript - 如何在 JavaScript 中使用带有 JIRA REST API 的基本身份验证？

> ID：15006705
> 
> 赞同：10
> 
> 时间：2013-02-21T15:59:13.923
> 
> 标签：javascript, authentication, curl, jira, basic-authentication

我正在为智能电视创建一个 JavaScript 应用程序，以在电视上显示仪表板。我使用 JIRA REST API 获取仪表板列表。我用于此的网址是：

```
jira/rest/api/2/dashboard?startAt=&maxResults= 
```

之后我创建了一个墙板，如下所示在电视上显示它们：

```
jira/plugins/servlet/Wallboard/?dashboardId=&os_username=&os_password= 
```

由于`os_username`and `os_password`，JIRA 知道我已通过身份验证并获得正确的列表。这个列表是我从一开始就需要的，但是因为我用参数调用了上面的 url，`os_username`它`os_password`确实得到了正确的列表

但是在电视启动/我第一次获得带有 JIRA 的仪表板列表时，没有人经过身份验证，因此它需要一个随机列表，而不是我需要获取的列表。

有一些方法可以使用以下命令在 JIRA 中进行身份验证：

```
curl -D- -u fred:fred -X GET -H "Content-Type: application/json"         http://example.com/rest/api/2/issue/createmeta 
```

但我不知道如何在 JavaScript 中使用该命令。

所以谁能告诉我如何在 JIRA 中使用基本身份验证进行身份验证，非常重要的是它必须是 JAVASCRIPT。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-22T11:48:01.787

你从[这里](https://developer.atlassian.com/display/JIRADEV/JIRA+REST+API+Example+-+Basic+Authentication)得到这个，我想。那么在同一页面上，它解释了如何“自己做”。我将“翻译”您需要执行的步骤，以便设法在 JS 中执行相同的请求。

1.  请求方法应该是**GET**
2.  您应该有 2 个标题：[Authorization Header 和 Content-Type Header](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)。您的 Content-type 标头应如下所示： **“Content-Type: application/json”**

对于授权标头：

1.  构建格式为**username:password的字符串**
2.  [Base64](http://en.wikipedia.org/wiki/Base64)编码字符串（使用[window.btoa()](https://developer.mozilla.org/en-US/docs/DOM/window.btoa)和[window.atob()](https://developer.mozilla.org/en-US/docs/DOM/window.atob)） -*你实际上不需要第二个，但我把它放在那里供参考*
3.  提供内容为“Basic”的“Authorization”标头，后跟编码字符串。例如，字符串“fred:fred”在 base64 中编码为“ZnJlZDpmcmVk”，因此您的授权标头应如下所示： **“授权：基本 ZnJlZDpmcmVk”**

因此，最后您需要使用提供的两个标头发出 GET 请求，并且您应该获得授权。另外**请注意 Base64 是可逆转**的，而不是加密功能。是编码。请求当然会通过 HTTPS，但如果 SSL 被破坏，Base64 编码的字符串可能会被反转。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-11-27T13:04:34.577

如果您有自己的 JIRA 实例，您应该将您的站点列入白名单，以便首先为您的域启用 CORS：

> 如果您是 JIRA 服务器客户，只需转到 JIRA 管理的“白名单”部分并添加您希望从中请求资源的域。

否则，您的请求将以错误结束，因为它违反了浏览器的同源策略 ( [http://enable-cors.org/](http://enable-cors.org/) )。

**重要提示**：如果您使用 JIRA on demand/云，您将无法使用纯 JavaScript/客户端代码通过基本身份验证成功访问 API。这是出于[安全原因](https://jira.atlassian.com/browse/JRA-30371)，不幸的是，Atlassian 团队似乎还没有提供解决方案。解决这个问题的一种解决方案是在您的服务器上设置一个代理，它将您的 JavaScript 请求从浏览器转发到实际的 JIRA 实例。

为了避免由于代码中的错误而可能出现的任何问题，我强烈建议您首先尝试使用 CURL 访问 JIRA API：

```
 curl -D- -X GET -H "Authorization: Basic %BASE64-CREDENTIDALS%" -H "Content-Type: application/json" "https://webjets.atlassian.net/rest/api/2/issue/WJ-333" 
```

请注意，您必须将 %BASE64-CREDENTIDALS% 替换为您的实际 Base64 编码用户/密码对。重要的是要知道，这仅适用于 JIRA 用户名，不适用于 JIRA 用户电子邮件地址。这可能会令人困惑，因为通常您也可以使用电子邮件地址登录 JIRA，但无法使用 API。

将您的域列入白名单后，您就可以开始了 -使用以下详细信息构建**GET请求：**

1.  添加内容类型标头：`Content-Type: application/json`
2.  **通过第一个Base64**编码的用户名和密码添加基本身份验证标头：

    `var authCode = window.btoa( user + ":" + password ); var authHeader = "Authorization: Basic " + authCode;`

3.  在 JIRA API 端点 URL 上执行请求，例如：

    `[https://%PROJECT%.atlassian.net/rest/api/2/issue/%ISSUE-ID%](https://%PROJECT%.atlassian.net/rest/api/2/issue/%ISSUE-ID%)`

有关如何使用 jQuery执行请求的方法，请参阅 StackOverflow 问题“[如何将 Basic Auth 与 jQuery 和 AJAX 一起使用？ ”。](https://stackoverflow.com/questions/5507234/how-to-use-basic-auth-and-jquery-and-ajax)

**安全注意事项**：请注意，授权码不是加密值，而是编码。请注意您存储或提供它的位置！

# linux - mailx 功能不工作

> ID：15006711
> 
> 赞同：1
> 
> 时间：2013-02-21T15:59:30.657
> 
> 标签：linux, email, unix, mailx

我正在尝试使用 mailx 功能向我的个人电子邮件地址发送电子邮件。但我从未收到过电子邮件。有人可以帮我吗？下面是我的命令。

```
PRI_EMAIL_SUBJECT="Some Blah Blah"
PRI_EMAIL_ADDRESS="bobby.teja@gmail.com"
PRI_EMAIL_BODY="$PRI_SETS_RAN_SUCSFL_CNT no. of sets ran successfully."

echo "Sending e-mail"
mailx -s $PRI_EMAIL_SUBJECT $PRI_EMAIL_ADDRESS < $PRI_EMAIL_BODY
echo 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-20T19:06:38.220

您不能重定向字符串。 `mailx <$FOO`展开变量`FOO`并尝试找到一个这样命名的文件。但是由于您（大概）没有名为的文件`3 no. of sets ran successfully.`，因此您会收到重定向错误，并且命令会失败。

要实际将变量的内容作为电子邮件发送，请尝试

```
echo "$PRI_EMAIL_BODY" | mailx 
```

（或者可能使用此处的文档）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:47:17.807

这非常有效。

```
 echo "something" | mailx -v -s "subject" recipient@somewhere.com 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T16:25:32.093

使用 mailx 的 -d 选项进行调试输出。这可能表明邮件传输存在问题。

```
mailx -d -s $PRI_EMAIL_SUBJECT $PRI_EMAIL_ADDRESS < $PRI_EMAIL_BODY 
```

# c# - AES 使用 OpenSSL 加密，使用 C# .Net 解密

> ID：15006717
> 
> 赞同：1
> 
> 时间：2013-02-21T15:59:56.003
> 
> 标签：c#, openssl, aes

我需要知道如何在 AES-OpenSSL 中加密消息并在 .NET（C# 或 VB）中解密，或者知道 AES-OPENSSL 和 AES-.NET 之间的区别

谢谢！

***VB.NET 中的代码***：

```
Public Function AES_Decrypt(ByVal prm_key As String, ByVal prm_iv As String, ByVal prm_text_to_decrypt As String)

    Dim sEncryptedString As String = prm_text_to_decrypt

    Dim myRijndael As New RijndaelManaged
    myRijndael.Padding = PaddingMode.Zeros
    myRijndael.Mode = CipherMode.CBC
    myRijndael.KeySize = 256
    myRijndael.BlockSize = 256

    Dim key() As Byte
    Dim IV() As Byte

    key = System.Text.Encoding.ASCII.GetBytes(prm_key)
    IV = System.Text.Encoding.ASCII.GetBytes(prm_iv)

    Dim decryptor As ICryptoTransform = myRijndael.CreateDecryptor(key, IV)

    Dim sEncrypted As Byte() = Convert.FromBase64String(sEncryptedString)

    Dim fromEncrypt() As Byte = New Byte(sEncrypted.Length) {}

    Dim msDecrypt As New MemoryStream(sEncrypted)
    Dim csDecrypt As New CryptoStream(msDecrypt, decryptor, CryptoStreamMode.Read)

    csDecrypt.Read(fromEncrypt, 0, fromEncrypt.Length)

    Return (System.Text.Encoding.ASCII.GetString(fromEncrypt))

End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-20T14:03:47.247

在您的评论中，您要求一种在 C# 中加密和在 OpenSSL 中解密的方法。这是[C# 中 EVP_BytesToKey 的一个很好的实现](https://stackoverflow.com/questions/8008253/c-sharp-version-of-openssl-evp-bytestokey-method)。

现在您只需要在 C# 中生成一个随机字节数组，然后将这些函数（OpenSSL 端的 EVP 和 C# 中的第二个）与您的通用随机字节数组一起使用。

但请注意，**您必须使用相同的哈希算法**：在给定的链接中，使用了 MD5。您可能必须将其更改为 SHA1，具体取决于 EVP_BytesToKey 正在使用的一个（或相反）。同样，您必须根据需要调整帖子中给出的 Derive 算法中的密钥和 iv 大小，此处为 32 和 32。

希望有帮助。

编辑1：我忘了。正如 owlstead 在他的评论中所说，Rijndael 允许您使用 256 位的块大小。但是，**AES 块大小始终固定为 128 位**，因此您的块大小*必须*是 128 位，而您的 iv 必须是 16 字节。

当您想使用盐时，也有一个问题。OpenSSL 在您的加密字节数组前面加上“Salt__”的 base64 加密和实际的 salt 数组。[你可以在这篇文章](http://deusty.blogspot.fr/2009/04/decrypting-openssl-aes-files-in-c.html)中找到一个例子。

编辑 2：[OpenSSL 1.1.0c 更改了](https://stackoverflow.com/q/39637388/608639)一些内部组件中使用的摘要算法。以前使用MD5，1.1.0改用SHA256。请注意，更改不会影响您`EVP_BytesToKey`和`openssl enc`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T20:54:49.087

AES 是 AES。有 NIST 测试向量可确保实现兼容，并且还指定了字节顺序。所以归结为选择正确的模式（例如，CBC 或经过身份验证的 GCM 模式）和填充模式（CBC 的 PKCS#7 和 GCM 的“无”）。选择正确的钥匙和 IV，您就可以上路了。请特别注意理解 AES 的输入，尤其是确保您理解编码和字符编码以及随机数生成。

# antlr4 - ANTLR4：在侦听器中获取特定规则的令牌列表

> ID：15006720
> 
> 赞同：6
> 
> 时间：2013-02-21T16:00:11.027
> 
> 标签：antlr4

我正在扩展 ANTLR4 中的侦听器，并且我想获取与解析器中的特定规则相关联的所有标记，有没有这样做的方法？

IE

```
myConfiguration: CONFIG EQUALS parameters ;
parameters: ALPHANUMERIC+

CONFIG: 'config' ;
ALPHANUMERIC: [a-zA-Z0-9] ; 
```

如何告诉我的听众在输入解析规则时查找值`CONFIG`和时间？`EQUALS``myConfiguration`

我可以使用某种 for 循环吗？

```
for( all tokens in this rule) {
    System.out.println(token.getText());
} 
```

我可以通过解析器类看到有一个标记列表，但我找不到与当前规则关联的标记列表。

我问这个的原因是为了避免重新输入我在侦听器和语法中需要的令牌名称。通过这样做，我可以检查是否已找到该特定规则中的每个令牌类型，而无需手动输入名称。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T18:33:06.720

这可能是您正在寻找的。

```
List<TerminalNode> terminalNodes = new ArrayList<TerminalNode>();
for (int i = 0; i < context.getChildCount(); i++) {
    if (context.getChild(i) instanceof TerminalNode) {
        terminalNodes.add((TerminalNode)context.getChild(i));
    }
} 
```

# maven - Tycho/Maven 的配置问题：“未配置 Tycho 构建扩展”

> ID：15006721
> 
> 赞同：5
> 
> 时间：2013-02-21T16:00:19.343
> 
> 标签：maven, tycho, maven-extension

我一直在关注 Vogella 的教程 ( [http://www.vogella.com/articles/EclipseTycho/article.html](http://www.vogella.com/articles/EclipseTycho/article.html) ) 使用 Tycho 为我的项目设置 Maven 构建环境。我的项目已经相当大了，有几个插件、功能和一个更新站点，但是我设法得到`mvn clean`并`mvn compile`正常工作，并一直遵循教程直到`mvn install`. 我现在面临的问题令人困惑。我一直收到以下错误：

```
[INFO] --- tycho-p2-director-plugin:0.16.0:materialize-products (materialize-products) @ parent ---
[DEBUG] Configuring mojo org.eclipse.tycho:tycho-p2-director-plugin:0.16.0:materialize-products from plugin realm ClassRealm[plugin>org.eclipse.tycho:tycho-p2-director-plugin:0.16.0, parent: sun.misc.Launcher$AppClassLoader@35ce36]
[DEBUG] Configuring mojo 'org.eclipse.tycho:tycho-p2-director-plugin:0.16.0:materialize-products' with basic configurator -->
[DEBUG]   (f) directorRuntime = internal
[DEBUG]   (f) installFeatures = true
[DEBUG]   (f) profile = DefaultProfile
[DEBUG]   (f) project = MavenProject: com.micrium.configbuilder:parent:1.1.0-SNAPSHOT @ C:\Documents and Settings\Thomas Sylvester\git\plugin-suite\com.micrium.configbuilder.tycho.master\pom.xml
[DEBUG]   (f) session = org.apache.maven.execution.MavenSession@1335332
[DEBUG]   (f) source = targetPlatform
[DEBUG] -- end configuration --
[INFO] No product definitions found. Nothing to do.
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary:
[INFO]
[INFO] parent ............................................ FAILURE [0.201s] 
```

从此堆栈跟踪中截取插件列表。他们都被跳过了。父母失败了。

```
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 37.735s
[INFO] Finished at: Thu Feb 21 06:42:47 PST 2013
[INFO] Final Memory: 65M/158M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.eclipse.tycho:tycho-p2-director-plugin:0.16.0:materialize-products (materialize-products) on project parent: Execution materialize-products of goal org.eclipse.tycho:tycho-p2-director-plugin:0.16.0:materialize-products failed: Tycho build extension not configured for MavenProject: com.micrium.configbuilder:parent:1.1.0-SNAPSHOT @ C:\Documents and Settings\Erika Redmark\git\plugin-suite\com.micrium.configbuilder.tycho.master\pom.xml -> [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.eclipse.tycho:tycho-p2-director-plugin:0.16.0:materialize-products (materialize-products) on project parent: Execution materialize-products of goal org.eclipse.tycho:tycho-p2-director-plugin:0.16.0:materialize-products failed: Tycho build extension not configured for MavenProject: com.micrium.configbuilder:parent:1.1.0-SNAPSHOT @ C:\Documents and Settings\Erika Redmark\git\plugin-suite\com.micrium.configbuilder.tycho.master\pom.xml
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:225)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
        at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
        at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
        at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: org.apache.maven.plugin.PluginExecutionException: Execution materialize-products of goal org.eclipse.tycho:tycho-p2-director-plug
in:0.16.0:materialize-products failed: Tycho build extension not configured for MavenProject: com.micrium.configbuilder:parent:1.1.0-SNAPSHO
T @ C:\Documents and Settings\Erika Redmark\git\plugin-suite\com.micrium.configbuilder.tycho.master\pom.xml
        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:110)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
        ... 19 more
Caused by: java.lang.IllegalStateException: Tycho build extension not configured for MavenProject: com.micrium.configbuilder:parent:1.1.0-SN
APSHOT @ C:\Documents and Settings\Erika Redmark\git\plugin-suite\com.micrium.configbuilder.tycho.master\pom.xml
        at org.eclipse.tycho.core.utils.TychoProjectUtils.getTargetPlatform(TychoProjectUtils.java:63)
        at org.eclipse.tycho.p2.facade.RepositoryReferenceTool.addTargetPlatformRepository(RepositoryReferenceTool.java:116)
        at org.eclipse.tycho.p2.facade.RepositoryReferenceTool.getVisibleRepositories(RepositoryReferenceTool.java:97)
        at org.eclipse.tycho.plugins.p2.director.DirectorMojo.getTargetPlatformRepositories(DirectorMojo.java:167)
        at org.eclipse.tycho.plugins.p2.director.DirectorMojo.getSourceRepositories(DirectorMojo.java:145)
        at org.eclipse.tycho.plugins.p2.director.DirectorMojo.execute(DirectorMojo.java:93)
        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
        ... 20 more
[ERROR]
[ERROR]
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginExecutionException 
```

我看到原因的根源是目标平台以某种方式未定义。[但是当我在 Eclipse wiki ( http://wiki.eclipse.org/Tycho/Target_Platform](http://wiki.eclipse.org/Tycho/Target_Platform) )上查找目标平台时，它指出：

> 为了允许 Tycho 解决项目对来自特定 p2 存储库的任何内容的依赖关系，请将该存储库添加到 POM 的部分...就目标平台而言，这意味着以这种方式指定的 p2 存储库的全部内容成为目标平台的一部分。

我的 POM 中有该部分。事实上，这是我父 POM 的全部内容（根据教程在单独的通用项目中定义）。我只省略了所有模块的声明：

```
<?xml version="1.0" encoding="UTF-8"?>
<project>
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.micrium.configbuilder</groupId>
    <artifactId>parent</artifactId>
    <version>1.1.0-SNAPSHOT</version>
    <packaging>pom</packaging>
    <modules>
        ... bunch of modules ...
    </modules>

    <properties>
        <tycho-version>0.16.0</tycho-version>
    </properties>

    <repositories>
        <repository>
            <id>helios</id>
            <layout>p2</layout>
            <url>http://download.eclipse.org/releases/helios</url>
        </repository>
    </repositories>

    <build>
        <plugins>

            <plugin>
                <groupId>org.eclipse.tycho</groupId>
                <artifactId>tycho-maven-plugin</artifactId>
                <version>0.16.0</version>
                <extensions>true</extensions>
            </plugin>
            <plugin>
                <groupId>org.eclipse.tycho</groupId>
                <artifactId>tycho-p2-director-plugin</artifactId>
                <version>0.16.0</version>
                <executions>
                    <execution>
                        <id>materialize-products</id>
                        <goals>
                            <goal>materialize-products</goal>
                        </goals>
                    </execution>
                    <execution>
                        <id>archive-products</id>
                        <goals>
                            <goal>archive-products</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>

    </build>

</project> 
```

我错过了什么吗？我似乎已经将文档地址定义为目标平台。我什至看到了正确的问题吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-21T16:51:35.000

问题是你试图`tycho-p2-director-plugin`在你的父 POM 中执行。这是行不通的——插件只能在`eclipse-repository`打包类型的模块中执行。将配置`tycho-p2-director-plugin`配置移动到您的`eclipse-repository`模块中将解决此处描述的问题。

不幸的是，在这种情况下，第谷并没有给出好的错误信息。它声明“未配置 Tycho 构建扩展”，但实际上它已配置但并未针对包装类型执行`pom`。

# android - android中的上下文是什么？

> ID：15006722
> 
> 赞同：-3
> 
> 时间：2013-02-21T16:00:20.730
> 
> 标签：android

`getApplicationContext()`为什么我们真的需要在某些元素中传递上下文以及, `getBaseContext()`,之间有什么区别`MainActivity.this`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:04:44.500

这个问题被问了好几次了。

请看这个问题：[什么是Android中的上下文？](https://stackoverflow.com/q/3572463/1820695)和接受的答案：[https ://stackoverflow.com/a/3572553/1820695](https://stackoverflow.com/a/3572553/1820695)

有关各种`Context`访问器方法（`getApplicationContext()`、`getBaseContext()`、`this`in`Activity`等）之间的差异，请参阅以下问题：[Android - 获取 Context 的各种方法之间有什么区别？](https://stackoverflow.com/q/1026973/1820695)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:06:32.973

如果我们按照文档进行

> 与有关应用程序环境的全局信息的接口。这是一个抽象类，其实现由Android系统提供。它允许访问特定于应用程序的资源和类，以及向上调用应用程序级操作，例如启动活动、广播和接收意图等。

简单来说，它是应用程序/对象当前状态的上下文。它让新创建的对象了解正在发生的事情。通常，您调用它来获取有关程序另一部分（活动、包/应用程序）的信息

有关 getApplicationContext() 和 getBaseContext() 之间的区别，请参阅[此](https://stackoverflow.com/questions/10641144/difference-between-getcontext-getapplicationcontext-getbasecontext-g)

# javascript - if then 语句 javascript

> ID：15006723
> 
> 赞同：0
> 
> 时间：2013-02-21T16:00:21.513
> 
> 标签：javascript, if-statement

我试图在 javascript 中执行“if/then”语句，但“then”命令被忽略。关于为什么的任何想法？

具体来说，我希望验证表单是否两个文本框不为空，一旦验证，我希望出现 DIV ID = section2。

```
function checkanswers() {
    var fdet = document.wastheform;

    if (fdet.question_type[0].checked) {
        var elements = new Array("name","address");
        var elements_name = new Array("name", "address");
        for (var i = 0; i < elements.length; i++) {
            if ($("#" + elements[i]).val() == "") {
                err = "Please enter " + elements_name[i] + "";
                alert(err);
                return false;
            }
        }
        $("#section2").show();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:04:40.773

您的问题意味着您想要一个 if/then 行为（在 Javascript 中，这更恰当地称为 if/else 语句），但是您构建代码的方式没有“then”。下面是 if 语句的工作方式：

```
if ( condition )
{
    // do something if the condition is true
}
else
{
    // do something if the condition is false
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:07:55.767

我假设您的“然后”是 div 的显示。在这种情况下，我会做这样的事情：

```
function checkanswers() {
    var fdet = document.wastheform;

    if (fdet.question_type[0].checked) {
        if(withoutValue("#name")) {
            alert("Please enter name")
        }
        else if(withoutValue("#address")) {
            alert("Please enter address")
        } else {
            $("#section2").show();
        }

    }
}

function withoutValue(selector) {
    return $(selector).val() === "";
} 
```

那是你要找的吗？

# login - 自动将用户登录到 Google

> ID：15006725
> 
> 赞同：0
> 
> 时间：2013-02-21T16:00:22.270
> 
> 标签：login, google-oauth

我正在尝试将用户登录到 Google 日历，而无需用户输入其姓名和密码。我已经成功设置了 OATH，并且可以通过 PHP 脚本操作他们的日历。但我需要做的是运行一个脚本，然后以某种方式创建一个链接供用户单击以获取访问权限。

请参阅下面示例 php copde 中的第 1 步到第 5 步。这基本上是日历示例中的 simple.php 代码。

我可能会误解工作流程，但就是这样。1) 创建身份验证 URL 2) 获取代码并使用令牌回叫自己 3) 设置令牌 4) 使用此令牌访问日历 5) 使用令牌授予对日历的访问权限 - 这是执行的部分不行

/**示例 PHP 代码******* *** ** *** ****** /***

 ***```
require_once '../phplibs/gApi/Google_Client.php';
require_once '../phplibs/gApi/contrib/Google_CalendarService.php';
session_start();

$client = new Google_Client();
$client->setApplicationName("Google Calendar PHP Starter Application");

 $client->setClientId('xxxxxxxxxxxxxxxxxxxxxx');
 $client->setClientSecret('xxxxxxxxxxxxxxxxxxxxxxx');
 $client->setRedirectUri(xxxxxxxxxxxxxxxxxxxxxxxxxx'); // The redirect is this same script
 $client->setDeveloperKey('xxxxxxxxxxxxxxxxx');
$cal = new Google_CalendarService($client);

if (isset($_GET['logout'])) {
  unset($_SESSION['token']);
}

if (isset($_GET['code'])) {
  //Step 2
  //I have been called back with the code
  // so use this to create a token
  $client->authenticate($_GET['code']);
  $_SESSION['token'] = $client->getAccessToken();
  header('Location: http://' . $_SERVER['HTTP_HOST'] . $_SERVER['PHP_SELF']);
}

if (isset($_SESSION['token'])) {
  // Step 3
  // I have been called back by the redirect in step 2
  // but now with an access token
  $client->setAccessToken($_SESSION['token']);
}

if ($client->getAccessToken()) {

  //Step 4
  // My token exists so now I can work on the users calanders
  // I dont want to do this but it does work so proves the auth worked ok
    $calList = $cal->calendarList->listCalendarList();
   //print "<h1>Calendar List</h1><pre>" . print_r($calList, true) . "</pre>";

   //Not sure why this happens again as we have a token
    $_SESSION['token'] = $client->getAccessToken();

   // Step 5
   // This is really want I want to do, I want to open the users calendar in a iframe or full page
   // However if the user is not logged in they get redirected to the Google login page
   // I was expecting that as the token was set this should work.

   header('Location: https://www.google.com/calendar/render');
  // echo(' <iframe src="https://www.google.com/calendar/embed?src=calendar%40wokingham-theatre.org.uk&ctz=Europe/London" style="border: 0" width="800" height="600" frameborder="0" scrolling="no"></iframe>');

} else {
  //Step 1  
  $authUrl = $client->createAuthUrl();
  print "<a class='login' href='$authUrl'> Connect to the Google calendar without me having to enter my name and password </a>"; 
```***

# java - 空格不匹配

> ID：15006726
> 
> 赞同：1
> 
> 时间：2013-02-21T16:00:25.607
> 
> 标签：java, regex, space

当我运行时：

```
String line = "  test";
Pattern indentationPattern = Pattern.compile("^[\\s]+");
Matcher indentationMatcher = indentationPattern.matcher(line);

if (indentationMatcher.matches()) {
    System.out.println("Got match!");

    int indent = indentationMatcher.group(0).length();
    System.out.println("Size of match: " + indent);
} else {
    System.out.println("No match! :(");
} 
```

我没有比赛。这里发生了什么？我在[http://www.regexplanet.com/advanced/java/index.html](http://www.regexplanet.com/advanced/java/index.html)在线测试了正则表达式，这似乎是专门为在 Java 中测试正则表达式而设计的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T16:04:00.677

改了几处，看评论：

```
String line = "  test";
Pattern indentationPattern = Pattern.compile("^(\\s+)"); // changed regex
Matcher indentationMatcher = indentationPattern.matcher(line);

if (indentationMatcher.find()) {   // used find() instead of matches()
    System.out.println("Got match!");

    int indent = indentationMatcher.group(1).length(); // group 1 instead of 0
    System.out.println("Size of match: " + indent);
} else {
    System.out.println("No match! :(");
} 
```

输出：

```
Got match!
Size of match: 2 
```

上述变化的原因：

`find()`尝试在输入中找到模式并`true`在找到时给出。也可以多次使用，例如`while (matcher.find()) { ... }`从输入中查找所有匹配项。

`matches()`尝试将完整输入与模式匹配，并且仅`true`在完整输入与正则表达式匹配时给出。

整个模式是第0组，第一个捕获组的内容是第1`()`组。在这种情况下没有区别，因为在捕获组之外，只有行的开头`^`，其长度/宽度为0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T16:03:34.303

[`Matcher#matches`](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Matcher.html#matches%28%29) *自动锚*定给定的模式，这意味着首先它与它`"^[\\s]+"`完全相同`"[\\s]+"`。因此，要匹配您的输入，只需使用`"[\\s]+.*"`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T16:12:20.120

`Matcher.matches()`尝试匹配整个字符串，但您的模式只匹配空格而不匹配其他内容。尝试

```
Pattern indentationPattern = Pattern.compile("(\\s+).*") 
```

反而。如果模式匹配，`group(1)`则将包含前导空格。如果您还对其余字符感兴趣，则必须添加另一个捕获组。

# google-chrome-extension - Chrome 扩展，每次安装的唯一 ID，用于分析

> ID：15006729
> 
> 赞同：3
> 
> 时间：2013-02-21T16:00:35.490
> 
> 标签：google-chrome-extension, analytics, mixpanel

我想跟踪我正在构建的 chrome 扩展上的事件。所以我想为每个用户都有一个唯一的标识符。

我不想要有关用户的任何信息，只是我希望将所有这些事件组合在一起。

有没有解决这个问题的好方法，无需 ping 服务器。或者我会只使用一个非常长的随机字符串，因此另一个用户获得相同字符串的可能性很低。

我正在使用 segment.io 的 analytics.js 包与 mixpanel 集成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-23T11:21:19.840

You can generate an id upon extension install/update. You can then use this value as your unique id. Something like this should work (put it in your background page):

```
chrome.runtime.onInstalled.addListener(function(info){
    //    
    // info.reason should contain either "install" or "update"

    var sessionId = localStorage.getItem("session-id");

    if(!sessionId){
      localStorage.setItem("session-id", "random-session-id");
    }
}); 
```

More info on onInstalled is here: [https://developer.chrome.com/extensions/runtime#event-onInstalled](https://developer.chrome.com/extensions/runtime#event-onInstalled). NB: it fires on install, extension update and Chrome update.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T20:08:18.837

不知道为什么 Mixpanel 被标记在这个问题上，但既然是这样，我会提到[Mixpanel jslib](https://cdn.mxpnl.com/libs/mixpanel-2.2.js)解决了这个问题。

如果您在不识别用户的情况下发送事件，jslib 会根据时间`Math.random()`、和浏览器特征自动生成 UUID。此数据存储在 cookie 中。

# css - 我可以将父选择器用于多类元素吗？

> ID：15006740
> 
> 赞同：-1
> 
> 时间：2013-02-21T16:01:04.130
> 
> 标签：css, sass

我正在将一些 css 文件转换为 Sass。但是，[文档](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#referencing_parent_selectors_)对一件事有点不清楚，我可以`&`像这样使用父参考吗：

**.css**

```
.class {
  background:red;
}

.class.otherclass{
  background:green;
} 
```

**.scss**

```
.class {
  background:red;

  &.otherclass{
    background:green;
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:03:58.850

是的你可以

[这是相关文档](http://thesassway.com/intermediate/referencing-parent-selectors-using-ampersand)。

# php - 检索保存在 PHP 会话中的项目

> ID：15006744
> 
> 赞同：1
> 
> 时间：2013-02-21T16:01:06.457
> 
> 标签：php, session, cart

我有一个 PHP 代码可以将商品添加到购物车，如下所示：

```
if (is_array($_SESSION['cart']['itemId']))
        {
    $max=count($_SESSION['cart']);
    $_SESSION['cart'][$max]['itemId']=$pid;
    $_SESSION['cart']['itemId']['qty']= $_SESSION['cart']['itemId']['qty'] + $q;
    $max=count($_SESSION['cart']);
        }
else
        {
    $_SESSION['cart']=array();
    $_SESSION['cart'][0]['itemId']=$pid;
    $_SESSION['cart']['itemId']['qty'] = $q;
    $max=count($_SESSION['cart']);
        } 
```

然后我尝试显示添加到购物车的项目，如下所示：

```
if(is_array($_SESSION['cart']))
        {
       $max=count($_SESSION['cart']);
       for($i=0;$i<$max;$i++)
                   {
                $pid=$_SESSION['cart'][$i]['itemId'];
        $q=$_SESSION['cart'][$i]['qty'];
        if($q==0) continue;
    $query2 = $con -> prepare("SELECT * FROM item_descr WHERE id_item = :idItem");
    $query2-> bindValue (':idItem',$pid); 
```

但是，我的任何物品都没有加载。你知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:10:31.813

您的会话对象“购物车”具有不同的元素

见
$_SESSION['cart'][$max]['itemId']​​=$pid;
$_SESSION['cart']['itemId']​​['qty']= $_SESSION['cart']['itemId']​​['qty'] + $q;
在上面两行 $max 和 'itemId' 是不同的，所以你不能像数组一样访问它们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:02:12.503

您需要在 PHP 文件的开头初始化会话：

```
<?php

session_start(); 
```

[见手册](http://www.php.net/manual/en/book.session.php)

# iphone - 加载 TableViewController 时出现 NSInvalidArgumentException

> ID：15006745
> 
> 赞同：1
> 
> 时间：2013-02-21T16:01:06.897
> 
> 标签：iphone, ios, objective-c, xcode, cocoa-touch

我在 a 上有一个按钮`ViewController`来加载`TableViewController`. 按钮后面的代码是：

```
- (IBAction)loadSearchView:(id)sender {

SearchTableViewController *searchVC = [[SearchTableViewController alloc] initWithStyle:UITableViewStylePlain];
[[self navigationController] pushViewController:searchVC animated:YES]; } 
```

加载时`TableViewController`，应用程序崩溃并出现以下错误：

> 2013-02-21 15:22:19.460 MyMusicLibrary[4159:c07]-[UITableView dequeueReusableCellWithIdentifier:forIndexPath:]：无法识别的选择器发送到实例 0x7aa0800 2013-02-21 15:22:19.462 MyMusicLibrary[4159:c07] *** 终止应用程序由于未捕获的异常'NSInvalidArgumentException'，原因是： ' - [UITableView的dequeueReusableCellWithIdentifier：forIndexPath：]：无法识别的选择发送到实例0x7aa0800' ***第一掷调用堆栈：（0x14b5022 0xeb5cd6 0x14b6cbd 0x141bed0 0x141bcb2 0x3279 0xb2c54 0xb33ce 0x9ecbd 0xad6f1 0x56d21 0x14b6e42 0x1d86679 0x1d90579 0x1d154f7 0x1d173f6 0x1d16ad0 0x148999e 0x1420640 0x13ec4c6 0x13ebd84 0x13ebc9b 0x139e7d8 0x139e88a 0x18626 0x1fdd 0x1f05) 终止调用抛出异常

它试图在加载 TableViewController 时运行的代码是：

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    // Configure the cell...
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    [[cell textLabel] setText:[NSString stringWithFormat:@"Cell %i", [indexPath row]]];

    return cell;
} 
```

numberOfSectionsInTableView 和 numberOfRowsInSection 设置如下：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{

    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    // Return the number of rows in the section.
    return 10;
} 
```

但是，当这些都设置为 0 时，会加载表格视图。任何人都可以帮忙吗？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:05:36.680

只使用

```
 dequeueReusableCellWithIdentifier:@"Cellidentifier" 
```

像这样

```
UITableViewCell *cell = [tableView   dequeueReusableCellWithIdentifier:@"Cellidentifier"]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-21T16:09:18.913

没有可用的 tableview 方法`- (id)dequeueReusableCellWithIdentifier: forIndexPath:` ，您只需要传递标识符

```
- (id)dequeueReusableCellWithIdentifier: 
```

# c# - 为什么静态会在编译时隐藏被覆盖的方法？

> ID：15006746
> 
> 赞同：4
> 
> 时间：2013-02-21T16:01:12.190
> 
> 标签：c#

鉴于：

```
class BaseClass
{
    public virtual void M(int x) 
    { 

    }
}

class Derived : BaseClass
{
    public override void M(int x)
    {
        base.M(x);
    }

    static void M(object x)
    {

    }

    static void Main()
    {
        var d = new Derived();
        d.M(0);
    }
} 
```

错误：

> 无法使用实例引用访问成员“Derived.M(object)”；改为使用类型名称来限定它

查看 C# 4.0 规范第 7.4 节（成员查找），第一个要点如下：

> 对类型 T 中具有 K 个类型参数的名称 N 的成员查找处理如下：
> 
> [...] 包含 override 修饰符的成员被排除在 [名为 N 的可访问成员] 的集合中

由此我得出结论，覆盖`Derived.M`不再可访问。相反，编译器必须引用`BaseClass.M`.

但是，这并不能解释为什么添加静态`Derived.M`会突然导致编译错误。编译器现在只能看到静态成员 `Derived.M`并断定该成员是无效调用。如果我删除静态`Derived.M`然后编译成功。

为什么会这样？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T16:10:10.327

以下步骤似乎发生了，并且是编译器错误的原因：

*   第 1 步：由于 7.4 中的部分。你引用的实例版本`M`被删除，只留下编译器的静态版本。静态的参数类型是`object`，兼容`int`. 方法名称也匹配。
*   第二步：成员查找完成，因为找到了匹配的方法（正确的名称，兼容的参数），不需要上继承链。
*   第 3 步：仅现在检查方法是实例方法还是静态方法。

我不能真正引用规范中的一句话来证明这一点，但是第 7.4 节（成员查找）和第 3.5 节（可访问性）都没有谈论与实例的对比，所以我认为在做的时候*根本*`static`没有考虑到这个事实成员查找。

 *§7.4 中的相关部分似乎是：

> 对类型 T 中具有 K 个类型参数的名称 N 的成员查找处理如下：
> 
> *   首先，确定一组名为 N 的可访问成员：
>     [...]
>     该集合由 T 中名为 N 的所有可访问（第 3.5 节）成员组成，包括继承成员和对象中名为 N 的可访问成员。如果 T 是构造类型，则通过替换类型参数获得成员集，如 §10.3.2 中所述。包含覆盖修饰符的成员将从集合中排除。

我理解这部分的方式就像上面解释的那样：它将返回实例方法和静态方法，然后删除实例方法，因为它具有`override`修饰符。
此时只剩下静态方法。

它以这样的方式结束：

> 最后，[...]，确定查找的结果：
> 如果集合仅包含方法，那么这组方法就是查找的结果。

因此，结果是静态方法。

显然，此问题仅发生在您具有类层次结构并且派生类之一声明具有相同名称和兼容参数的静态方法的情况下。

将这样的静态方法添加到现有类是一种情况，其中简单地向类添加一些东西仍然是一项*重大更改*。

尽管我很确定您知道如何解决编译器错误，但我仍然会陈述它，以获得完整的答案：
使用任何基类作为变量的编译时类型。运行时类型仍然可以是派生类型，这不是问题：

```
BaseClass d          = new Derived();
// ^                         ^
// compile time type        runtime type 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T18:37:39.850

丹尼尔的回答是正确的；相关规则的简要总结是：

*   派生较多的类中的方法总是被认为比派生较少的类中的方法更好
*   覆盖方法被认为是首先声明它们的类中的方法，而不是覆盖它们的类
*   解决哪个方法（如果有）是“最好的”发生*在*检查接收器是否是实例并且方法是静态的之前。（以及在检查泛型类型参数约束之前。）

最后一条规则有点奇怪，但确实有些道理。有关此特定规则的扩展讨论，请参阅我在硬装注释 C# 4 规范的第 290 页和第 291 页上的评论和 nikov 的评论。

此外，有关此规则与规则相交的有趣极端情况的分析`Color Color`，请参见

[http://blogs.msdn.com/b/ericlippert/archive/2009/07/06/color-color.aspx](http://blogs.msdn.com/b/ericlippert/archive/2009/07/06/color-color.aspx)*

# html - 将 iFrame 的左边缘对齐到 -100？

> ID：15006750
> 
> 赞同：1
> 
> 时间：2013-02-21T16:01:24.307
> 
> 标签：html, css, iframe

我有一个`iframe`放置在我的身体。但是，我想正常地将它的左边缘对齐到 -100px，然后在悬停时将它移动到 0px。但是，我找不到这样做的方法。我尝试使用 CSS：

```
.cnetBox {
    left:-100px;
    width:200px;
    height:200px;
    opacity:.5;
    transition: opacity .25s ease-in-out;
   -moz-transition: opacity .25s ease-in-out;
   -webkit-transition: opacity .25s ease-in-out;
}

    .cnetBox:hover {
        left:0px;
        width:90%;
        height:500px;
        opacity:1;
    } 
```

然后在体内：

```
<iframe src="http://www.cnet.com" height="200" width="200" class="cnetBox">
  <p>Your browser does not support iframes.</p>
</iframe> 
```

但什么也没有发生。iframe 仍然仅在 0px 处与左边缘对齐。如何将左边缘设置为-100px？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T16:05:48.090

为了让 CSS `left`、`top`等影响元素的位置，它必须有一个`position`集合。

根据 HTML 的结构，您需要一个值`relative`或`absolute`

在这里查看：http: [//jsfiddle.net/VAqTt/](http://jsfiddle.net/VAqTt/)

**文档和相关阅读**

*   `position`MDN 上的CSS - [https://developer.mozilla.org/en-US/docs/CSS/position](https://developer.mozilla.org/en-US/docs/CSS/position)
*   `top`MDN 上的CSS - [https://developer.mozilla.org/en-US/docs/CSS/left](https://developer.mozilla.org/en-US/docs/CSS/left)
*   *MDN 上的“视觉格式化模型”* - [https://developer.mozilla.org/en-US/docs/CSS/Visual_formatting_model](https://developer.mozilla.org/en-US/docs/CSS/Visual_formatting_model)
*   alistapart 上的“CSS 定位 101”*- [http://alistapart.com/article/css-positioning-101](http://alistapart.com/article/css-positioning-101)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T16:06:41.617

添加`position:absolute;`到您的`.cnetBox CSS`

小提琴：http: [//jsfiddle.net/RYh7U/101/](http://jsfiddle.net/RYh7U/101/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T16:04:10.100

您只需要添加`position: relative`到您的`.cnetBox`.

您的`iframe`（与所有其他元素一样）`static`默认情况下具有其位置，因此提供任何位置值都将无效。这篇[CSS Tricks](http://css-tricks.com/absolute-relative-fixed-positioining-how-do-they-differ/)文章很好地解释了这些差异，而不会过于冗长。

或者，如果由于某种原因您需要`iframe`保持静态，然后换掉`left`，`margin-left`您将实现几乎相同的目标。

# openshift - Openshift：在 ubuntu 10.04 中安装 rhc 客户端工具时出错

> ID：15006756
> 
> 赞同：1
> 
> 时间：2013-02-21T16:01:32.543
> 
> 标签：openshift, ubuntu-10.04, openshift-client-tools

我正在使用 Ubunto 10.04。
我已经安装了 Git、Ruby 1.8 和 rhc 客户端工具。
rhc gem 位于**[/var/lib/gems/1.8/bin]**目录中。
但是当我在控制台中应用任何命令时，它会生成错误消息。
![安慰](../Images/73e7986a7a557d3f43ee9f3d2afa6982.png)

我先安装了 git，然后我安装了另一个组件，如 Ruby 和 rhc 客户端工具，为此我遇到了错误。
我已经看到有关 PATH 变量的问题，但是我正在从**[/var/lib/gems/1.8/bin]**目录应用命令
然后不需要设置 PATH 变量（我认为）
我已经更新了 Ruby 和 rhc 客户端
如何解决它?
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T14:43:46.300

如果 /var/lib/gems/1.8/bin 不在您的 PATH 中，如果您在该目录中，则需要运行“./rhc”。如果你将它添加到你的 PATH 中，你将能够在没有 ./ 的情况下运行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T20:22:14.177

听起来您没有`rhc`正确安装。我会尝试运行`sudo gem install rhc`。

我喜欢 10.04，但我认为它带有一个相当旧的 RubyGems 版本。您可能需要更新到较新的版本。

以下是一些特定于 Ubuntu 的附加安装说明： [https ://openshift.redhat.com/community/developers/rhc-client-tools-install#ubuntu](https://openshift.redhat.com/community/developers/rhc-client-tools-install#ubuntu)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-24T23:56:15.477

我遇到了同样的问题，解决我的问题是：

*   键入命令“ **sudo su** ”（输入您的密码）

*   键入命令“ **gem install rhc** ”

现在，您将能够使用命令“ **rhc setup** ”或来自 openshift 的任何其他命令。

# tfs - 完全归档一个 TFS2012 项目

> ID：15006762
> 
> 赞同：4
> 
> 时间：2013-02-21T16:01:48.937
> 
> 标签：tfs, backup, tfsbuild

在 TFS 2012 中，完全归档 TFS 项目的最佳实践是什么？我们的 TFS 数据库变得非常大，我们需要开始存档（当然我们不想丢失任何东西）。

我想从 TFS 服务器中取出一个废弃的项目，并将它的所有文件及其历史记录、工作项和构建定义完全备份到*外部驱动器，然后从 TFS 服务器中删除所有这些。*

如果需要重新激活一个废弃的项目，我想将该驱动器带到 TFS 服务器以恢复该项目（及其所有文件及其历史记录、工作项、构建定义和 sharpoint 站点），即使原始集合和用户即使我们在此期间升级到更新版本的 TFS，该项目也不再存在，理想情况下也是如此。

微软在 TFS 中处理这种情况的想法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T16:21:41.913

这是一个很难执行的场景，但官方的方法是拆分项目集合，然后分离包含要归档的项目的集合。

为此，请克隆项目集合，从原始项目中删除要存档的项目，从克隆中删除要保留的所有项目，然后分离克隆以进行存储。

当您需要对旧项目进行再水化时，您可以将其附加为新项目集合，拆分后将其合并回旧项目集合中确实很难。

[拆分过程在 MSDN 上进行了说明](http://msdn.microsoft.com/en-us/library/vstudio/dd936158.aspx)。

或者，您可以使用[Team Foundation Server 集成工具/平台](http://tfsintegration.codeplex.com/)将项目同步到干净的团队项目并进行备份。您还可以使用这些工具将项目重新集成到旧项目集合中。

**重要的提示**

由于构建定义链接到项目集合，而不是项目，因此备份/恢复它们并不是很简单。在执行还原过程时，可能还需要重新创建任何实验室管理设置。

此外，任何跨团队项目链接的工作项链接，或跨团队项目的分支/合并都将与此过程断开连接。

# testing - Spock/Geb 测试污染

> ID：15006763
> 
> 赞同：1
> 
> 时间：2013-02-21T16:01:51.150
> 
> 标签：testing, grails, cookies, spock, geb

我得到了某种测试污染。当我单独运行失败的测试时，它们通过了。当我一起运行它们时，我得到了错误。错误与数据库无关。我无法理解错误。例如：页面：

```
errorModule (wait: true) { module ErrorModule } 
```

errorModule: 静态内容 = { 错误（必填：false）{ $("h3.error") } }

规格：

```
assert page.errorModule 
```

给出异常：org.openqa.selenium.NoSuchElementException：无法定位元素：{"method":"tag name","selector":"html"}

我不明白，因为模块的内容不是必需的。另外，另一个测试的污染会导致这种情况吗？我的测试太多了，无法列出。

我唯一的想法是不是由我的程序设置的 cookie。有一堆奇怪的名称，如“ba743b”、“kvcd”、“kn_ai”等，具有神秘的值，如“1361461306476”和“1.1361461306.1.1.utmcsr=(direct)|utmccn=(direct)| utmcmd=（无）”。有谁知道这些 cookie 可能来自哪里以及如何在测试结束时清除它们？这还重要吗？它们不是会话 cookie，它们有过期日期。我不知道如何删除这些我认为不是我的代码创建的 cookie。但这可能与此无关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:50:34.797

你使用 Firefox 来执行你的测试吗？切换页面后是否发生错误？

如果是这样，那么当 Firefox 驱动程序返回控制权以测试代码同时仍在（重新）加载页面时，您可能会遇到错误。`at()`当标题为空字符串时，该错误有时也会出现在检查中。我倾向于在抛出异常的行之前添加对`at()`/的调用。`verifyAt()`这是一个肮脏的黑客，但我想不出更好的东西，而且它似乎总是有效。

# c# - 文化日期时间变化

> ID：15006764
> 
> 赞同：2
> 
> 时间：2013-02-21T16:01:52.440
> 
> 标签：c#, vsto

我有一个执行邮件合并和其他操作的 VSTO 应用程序。

邮件合并数据库是一个 Excel 数据库，其中一些`DateTime`字段存储为 (dd/MM/YYYY)（例如 29/04/2012）。我的问题是在 Excel 中日期看起来不错，但在 Word 中它以其他格式显示（MM/dd/yyyy）（例如 2012 年 4 月 29 日）。当尝试在我的 VSTO 应用程序上获取此日期时，它会引发转换错误，指示字符串的格式错误。

所有这些都发生在同一台机器上。如果我将 VSTO 中的文化信息更改为 en-US，它可以正常工作。

```
// This way fails 
edictoActual.FechaEdicto = Convert.ToDateTime(fields(fieldFechaEdicto).value); 

// This way Works
IFormatProvider Formato = new System.Globalization.CultureInfo("en-US", true);
edictoActual.FechaEdicto = Convert.ToDateTime(fields(fieldFechaEdicto).value,Formato); 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T16:16:06.957

```
string DateString = "29/04/2012"; //DateString needs to be replaced with your fields value as a string
var dateLength = DateString.Length;
IFormatProvider culture = new CultureInfo("en-US", true);
DateTime dateVal;
switch (dateLength)
{
     case 8:
        {
          dateVal = DateTime.ParseExact(DateString, "M/d/yyyy", culture);
            break;
        }
    case 9:
        {
            // he you can add your own additional if(){} condition to check if date value Day has a length of 2 
            // if so then you know that the date is in m/dd/yyyy format
            // otherwise you know it's in mm/d/yyyy but 
            dateVal = DateTime.ParseExact(DateString, "M/dd/yyyy", culture);
            break;
        }
    case 10:
        {
            dateVal = DateTime.ParseExact(DateString, "MM/dd/yyyy", culture);
            //or change the above to look like the following 
            //dateVal = DateTime.ParseExact(DateString, "dd/MM/yyyy", culture);
            break;
        }

} 
```

# ruby-on-rails - 无法停止 Rails 3 中的延迟作业

> ID：15006768
> 
> 赞同：0
> 
> 时间：2013-02-21T16:02:11.207
> 
> 标签：ruby-on-rails, delayed-job

我在日志中看到delayed_job 一直在运行，我无法让它停止。我已经尝试过 'rake jobs:clear' 无济于事。

日志如下所示：

```
 Delayed::Backend::ActiveRecord::Job Load (1.2ms)  
 UPDATE "delayed_jobs" SET locked_at = '2013-02-21 16:01:18.602988', locked_by = 'host:computer.local pid:2343' WHERE id IN (SELECT id FROM "delayed_jobs" WHERE ((run_at <= '2013-02-21 16:01:18.602333' AND (locked_at IS NULL OR locked_at < '2013-02-21 12:01:18.602367') OR locked_by = 'host:computer.local pid:2343') AND failed_at IS NULL) ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING * 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:39:02.090

你需要杀死它：

```
 pkill -9 -f delayed_job 
```

`rake jobs:clear`将清除`queue`. 它不会停止`delayed_job`.

# java - 如何使用 Xtend 连接到 MySQL 数据库。

> ID：15006770
> 
> 赞同：0
> 
> 时间：2013-02-21T16:02:13.997
> 
> 标签：java, mysql, xtend

我正在尝试将一些 java 代码重写为 Xtend，但是我遇到了一个问题。我想连接到一个mysql数据库。

```
try {

  Class.forName("com.mysql.jdbc.Driver");
}catch(Exception e){
} 
```

上面的代码片段在 Java 中工作。但是我正在尝试学习 Xtend 并弄清楚 Class.forName 应该如何在 Extend 中完成。Xtend 似乎找不到“类”或方法“forName”

我从 Eclipse 收到的错误消息是“此表达式在此上下文中是不允许的，因为它不会引起任何副作用。

任何人都知道我做错了什么。连接数据库的 Xtend 语法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:27:44.617

调用静态方法的语法是`Class::forName("com.mysql.jdbc.Driver")`. 请参阅文档以了解其他语法提示以熟悉 Xtend。

# python - chr 用于 Python 中的非 ASCII 字符

> ID：15006771
> 
> 赞同：10
> 
> 时间：2013-02-21T16:02:20.203
> 
> 标签：python, unicode

我正在尝试通过字符串列表实现搜索，在无法使用类似的上下文中`str.startswith`（如果您对此感到好奇，我正在查询应用引擎数据存储。）我想看看对于每个具有特定前缀的字符串，假设为 'py'。

我有比较运算符可供我使用，所以我想我可以按如下方式实现。

```
#pseudo code
search = "py"
search_strings_where(s > search, s < chr(ord(search[0]) + 1) 
```

应该是在搜索查询的`chr(ord(search[0]) + 1)`第一个字符之后按字典顺序排列的字符。

问题是这行不通。举个例子`ord(u"‰")`，它返回 8240。但是再次将其放入`chr`会引发错误。

```
ValueError: chr() arg not in range(256) 
```

我怎么能解决这个问题？

编辑刚刚发现了unichr，检查这是否有效。如果有，我会写一个答案。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-21T16:12:03.310

也许使用[unichr()](https://docs.python.org/2/library/functions.html#unichr)，此功能将起作用

# ruby - 将红宝石数组排序为字母数字

> ID：15006776
> 
> 赞同：2
> 
> 时间：2013-02-21T16:02:27.630
> 
> 标签：ruby, arrays, sorting

我正在尝试按长度和字母数字对 Ruby 中的数组进行排序：

所需的顺序是：

*   site.com?page=7
*   site.com?page=8
*   site.com?page=9
*   site.com?page=880

我一直在尝试 array.sort 和 sort！但他们似乎都没有成功，因为他们会将 880 放在 8 之后。

我将如何以最有效的方式做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T16:04:45.420

假设你有一个数组：

```
a = ["site.com?page=7", "site.com?page=8", "site.com?page=9", "site.com?page=880"] 
```

然后你可以这样做：

```
a = a.sort_by{|t| t.split(/page=/)[1].to_i} 
```

`to_i`简而言之，我使用自定义排序标准，该标准是将字符串按“page=”拆分，然后在第一次匹配后使用字符串的数值（ ）`page=`进行排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T16:10:54.217

您可以使用该`group_by`函数按长度`sort_by`对项目进行分组，并在组内按字母数字顺序对它们进行排序，最后将组展平：

```
list.group_by {|i| i.length}.sort_by{|i| i.first}.collect {|i| i.last.sort}.flatten 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-19T12:53:21.583

一个通用技巧是在对数组字符串进行排序之前使用固定的小数位数对数字进行零填充。

这可以通过以下代码轻松完成：

```
a = ["site.com?page=9","site.com?page=880""site.com?page=8","site.com?page=7"]

N = 5  # Maximum number of decimal places allowed

a.sort_by { |s| s.gsub(/(\d+)/) { |n| sprintf("%0#{N}d", n.to_i) } } 
```

除非字符串包含任何大于或等于 10^N 的数字，否则此方法效果很好。

# sql - 单表继承名冲突

> ID：15006778
> 
> 赞同：0
> 
> 时间：2013-02-21T16:02:28.387
> 
> 标签：sql, database-design

我一直在将 STI 用于名为 Journey 的表。人们将发布旅程请求/报价，因此鉴别器将是：驾驶员或乘客，这意味着将有愿意开车和搭乘其他乘客的人或只是搭便车的人（乘客）发布旅程。所以这两个会共享大部分属性（例如出发日期、来源、目的地等），但是由于发帖用户的类型，会有一些名称冲突。

例如，如果我是一名乘客，我可以指定我想和我的朋友一起旅行（因此，PassengerCount = 2，即我们寻找至少有 2 个可用座位的司机）。或者我可能会注意到，我想随身携带一些行李（因此 HaveLuggage = true，即我正在寻找可以带我行李的游乐设施）

另一方面，如果我是司机，我应该填写一个表格，我可以在其中指定可用座位的数量 (AvailableSeats)，并且我可能会注意到我不能运输行李 (TakesLuggage=false)。

如您所见，PassengerCount - AvailableSeats 和 HaveLuggage - TakesLuggage 列是相同的，只是它们的名称与海报的角度不同。

所以问题是，为了尽量减少混淆，我应该遵循什么命名约定？另外，拥有一张这样的桌子（STI）是个好主意吗？如果没有，您会推荐什么替代方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:19:47.807

不确定您是否需要过多担心命名约定...您已经获得了可区分的属性（类型）。可以在数据输出上添加标签，以根据您的喜好进行区分。例子：

```
Journey
   Type (integer) -- 1 = provider, 2 = consumer
   Passengers (integer)
   Luggage (bit / bool) -- 1 = yes, 0 = no 
```

至于命名约定：

```
SELECT "Driver", passengers as "Avaliable Seats", luggage as "Takes Luggage" WHERE type=1
UNION
SELECT "Passenger", passengers as "Passenger Count", luggage as "Have Luggage" WHERE type=2 
```

或者您可以在 SELECT 本身中使用控制语句（IF/CASE/etc）。

# android - Android 轮换问题

> ID：15006779
> 
> 赞同：2
> 
> 时间：2013-02-21T16:02:28.823
> 
> 标签：android

我有一个应用程序没有调用 onConfigurationChanged，但仅在一种特定情况下。我有 2 个活动，A 和 B。活动 A 有一个网格视图，我根据方向更改列数。使用 onConfigurationChanged 可以正常工作。

但是，如果我按照这些步骤操作，我不会得到 onConfigurationChanged()：

1.  活动 A，方向 1 -> 活动 B（仍然方向 1）
2.  在活动 B 中旋转设备（现在是 Orientation2）
3.  回到活动 A，现在在 Orientation2。onResume 被解雇了，我调整了布局。
4.  在活动 A 中，旋转回 Orientation1。什么都没有触发（onCreate、onResume、onConfigurationChanged...等）布局现在是错误的（列数设置为 Orientation2）。

在此之后，如果我在 Activity A 中继续旋转，其余的旋转将触发 onConfigurationChanged 并且布局会相应调整。这只是从另一项活动回来后的第一次轮换。不管我从哪个方向开始，结果都是一样的。

除了 onConfigurationChanged 我还应该看什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:06:14.887

onConfigurationChanged 只会在活动上下文（可见活动或片段）中触发。

不要更改 onConfigurationChanged 中的列数，而是在`res/layout`和`res/layout-land`文件夹中使用不同的布局。在 XML 中定义列数。这样你甚至不需要重写 onConfigurationChanged，Android 会为你处理脏活 :D

布局将`layout-land`用于横向，`layout`布局将用于纵向（或用作默认值）。

# ipa - 在哪里可以找到包含私有 API 的 ipa 文件？

> ID：15006785
> 
> 赞同：0
> 
> 时间：2013-02-21T16:02:41.360
> 
> 标签：ipa, iphone-privateapi

我想用 Private API 生成一个 ipa 文件来测试 private-api 识别工具是否有效。有人可以告诉我如何找到这样的文件吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:11:42.617

最简单的方法是自己构建一个。

只需将此代码放在 .h 或 .m 文件的顶部：

```
@interface UIDevice()
    -(float)_backlightLevel;
@end 
```

在代码调用中：

```
float a = [[UIDevice currentDevice] _backlightLevel];
NSLog(@"Backlight level %f", a); 
```

现在，您正在使用私有 API。

# ruby-on-rails - 用于散列的 Rails 平面参数

> ID：15006788
> 
> 赞同：1
> 
> 时间：2013-02-21T16:02:53.940
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, parameters, ruby-on-rails-3.2

我在 Rails 3 中有这个 POST**参数**（来自 Google 购物车脚本）。

```
{
"shopping-cart.items.item-1.item-name"=>"Item one",
"shopping-cart.items.item-1.item-description"=>"An item",
"shopping-cart.items.item-1.unit-price"=>"10",
"shopping-cart.items.item-1.unit-price.currency"=>"GBP",
"shopping-cart.items.item-1.quantity"=>"1",

"shopping-cart.items.item-2.item-name"=>"Item two",
"shopping-cart.items.item-2.item-description"=>"Another item",
"shopping-cart.items.item-2.unit-price"=>"12.5",
"shopping-cart.items.item-2.unit-price.currency"=>"GBP",
"shopping-cart.items.item-2.quantity"=>"3",

"shopping-cart.items.item-3.item-name"=>"Item three",
"shopping-cart.items.item-3.item-description"=>"Yet another item",
"shopping-cart.items.item-3.unit-price"=>"20",
"shopping-cart.items.item-3.unit-price.currency"=>"GBP",
"shopping-cart.items.item-3.quantity"=>"2",

"edit_url"=>"http://somerailsapp/store/buy",
"_charset_"=>"UTF-8",
"controller"=>"order",
"action"=>"process"
} 
```

将其转换为明显哈希的最有效方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:26:51.607

理想的方法是更改​​参数以反映您想要的结构。对于应该嵌套在哈希中的参数，例如`shopping-cart.items.item-1.item-name`，将参数的名称更改为`shopping-cart[items][item-1][item-name]`。然后，rails 将为您完成工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T18:05:44.430

试试这个：

```
params.map { |k,v| [k.split('.').reverse,v] }.map { |keys,val| keys.inject(val) { |val, e| { e => val }} }.inject({}) { |hsh, h| hsh.deep_merge(h) } 
```

这可能不是最佳方式，但是 - 除非我们谈论购物车中的数百万件商品 - 它仍然比单个数据库查询更快地完成这项工作。

对于您的示例参数，结果应该是：

```
{"shopping-cart"=>{"items"=>{"item-1"=>{"item-name"=>"Item one", "item-description"=>"An item", "unit-price"=>{"currency"=>"GBP"}, "quantity"=>"1"}, "item-2"=>{"item-name"=>"Item two", "item-description"=>"Another item", "unit-price"=>{"currency"=>"GBP"}, "quantity"=>"3"}, "item-3"=>{"item-name"=>"Item three", "item-description"=>"Yet another item", "unit-price"=>{"currency"=>"GBP"}, "quantity"=>"2"}}}, "edit_url"=>"http://somerailsapp/store/buy", "_charset_"=>"UTF-8", "controller"=>"order", "action"=>"process"} 
```

你也可以使用

```
k.split('.').reverse.map { |k| sanitize_key(k) } 
```

where`sanitize_key`去掉`item-`前缀和/或将项目编号更改为整数。

编辑：我刚刚注意到价格不见了 - 所以你可能想添加`'.amount'`以 . 结尾的键`unit-price`。不知何故，这个购物车哈希的结构并不健全......

享受！

# php - Chrome/IE 的 Codeigniter CSRF cookie 问题

> ID：15006791
> 
> 赞同：1
> 
> 时间：2013-02-21T16:03:00.157
> 
> 标签：php, codeigniter, cookies

我在使用 Chrome/IE 浏览器的会话 cookie 时遇到问题。

我有这个：

```
$config['csrf_expire'] = 77200; 
```

当值设置这么高时，我可以使用 chrome 或 IE 登录没有问题。这是 chrome 的 web kit 为 cookie 的过期时间返回的内容：'

日期：2013 年 2 月 21 日星期四 15:47:27 GMT 服务器：Apache expires=2013 年 2 月 22 日星期五 13:14:07 GMT；

但是，当该值设置得较低时，例如：

```
$config['csrf_expire'] = 7200; 
```

chrome webkit 返回：

过期=周四，2013 年 2 月 21 日 17:51:26 GMT

如您所见，在 cookie 到期之前有足够的时间，但它似乎立即到期，所以我无法登录。任何想法可能导致这种情况？

其他信息：使用 Codeigniter，问题仅在移动到新的开发服务器（机架空间云，Redhat）后才出现。只有少数机器受到影响，即一些用户可以使用 chrome 正常登录。

谢谢

# jsp - 用于 标签

> ID：15006793
> 
> 赞同：1
> 
> 时间：2013-02-21T16:03:12.083
> 
> 标签：jsp, jsp-tags

考虑我已将一个类声明为：

```
public class Calcultor{

public int cube(int n){return n*n;}

} 
```

现在下面的声明都一样吗？

1.  index.jsp：

    ```
    <jsp:useBean id=obj class="Calculator"/>
    <%
    int m=obj.cube(5);
    out.println("cube of 5 is "+m)
    %> 
    ```

2.  index.jsp：

    ```
    <%
    Calculator obj=new Calculator();
    int m=obj.cube(5);
    out.println("cube of 5 is "+m);
    %> 
    ```

如果两者相同，有什么优势？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-18T17:25:07.077

这是不一样的。jsp:useBean 将在某人之前创建的某个范围（请求、会话 ...）（servlet、框架、控制器等）中定位 Calculator 的实例，同时 scriptlet 创建一个新实例。

检查这个：

[http://docs.oracle.com/javaee/1.3/tutorial/doc/JSIntro11.html](http://docs.oracle.com/javaee/1.3/tutorial/doc/JSPIntro11.html)

顺便说一句，cube 的实现是错误的，应该是 return n*n*n

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:19:29.390

如果我们使用 usebean 标签，它会隐藏“java 编码”以获得类似 html 结构的代码感觉。它会给页面代码提供统一的外观......

第二个是在“jsp scriplet”内部，当我们想在 jsp 页面中编写 java 多条语句时使用它（在 mvc 架构中主要避免一起编写 biz 逻辑和视图）.... :-)

# powershell - 定义自定义属性集（使用 Add-Member？）以在 Select-Object 中使用

> ID：15006797
> 
> 赞同：3
> 
> 时间：2013-02-21T16:03:28.370
> 
> 标签：powershell, custom-object, pscustomobject

我尝试做的事情很简单：创建一个具有一些属性的自定义对象，然后定义属性（列）的“组”以在 Select-Object 中使用。让我澄清一下：

```
$props = @{"Mary"=1;"Jane"=2;"Frank"=3;"John"=5;"Brenda"=6}
$obj = New-Object PSObject $props 
```

我现在有一个带有一些虚假数据的自定义对象。我现在想做的是

```
$obj | select Male
$obj | select Female 
```

而我认为会做的伎俩是这样的：

```
$obj | Add-Member PropertySet "Male" @("Frank","John")
$obj | Add-Member PropertySet "Female" @("Mary","Jane","Brenda") 
```

它不起作用 - 我收到此错误：

```
Add-Member : Cannot convert the "System.Object[]" value of type 
"System.Object[]" to type "System.Collections.ObjectModel.Collection`1[System.String]". 
```

我想我应该提供另一种对象类型而不是我的数组 to `Add-Member`，但我不确定我应该如何做到这一点。

有人对此有经验吗？

重要提示：我在 Powershell 2 上，我在各种网站上读到它有一个不允许设置默认属性的错误。这不是我想做的——我想创建一个自定义属性集而不是默认属性集——但可能是这个错误也阻止了我得到我想要的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T16:37:38.433

你很亲密。问题是您没有正确创建对象。您需要在指定`-Property`属性哈希表之前指定参数。没有它，您只需创建一个哈希表。这有效：

```
$props = @{"Mary"=1;"Jane"=2;"Frank"=3;"John"=5;"Brenda"=6}
$obj = New-Object -TypeName PSObject -Property $props

$obj | Add-Member PropertySet "Male" @("Frank","John")
$obj | Add-Member PropertySet "Female" @("Mary","Jane","Brenda")

$obj | select male

Frank John
----- ----
    3    5 
```

为什么会这样？如果您阅读了`New-Object`使用`Get-help new-object`or的语法`Get-Command New-Object -Syntax`，您会看到对于普通的 .Net 类型，语法是：

```
New-Object [-TypeName] <String> [[-ArgumentList] <Object[]>] [-Property <IDictionary>] 
```

请注意，这`-ArgumentList`是第二个参数，`-Property`与您预期的不同。所以你的代码实际上做了：

```
$obj = New-Object -TypeName PSObject -ArgumentList $props 
```

代替：

```
$obj = New-Object PSObject -Property $props 
```

**编辑**上述解决方案仅适用于 PS3.0 。但它仍然有效，因为`-Property`在 PS2.0 中也需要该参数。在 PS2.0 中，您需要将 propertyset-array 转换为`string[]`(string-array) 而不是作为`object[]`默认数组的 object-array ( )。PS2.0的完整解决方案是：

```
$props = @{"Mary"=1;"Jane"=2;"Frank"=3;"John"=5;"Brenda"=6}
$obj = New-Object -TypeName PSObject -Property $props

$obj | Add-Member PropertySet "Male" ([string[]]@("Frank","John"))
$obj | Add-Member PropertySet "Female" ([string[]]@("Mary","Jane","Brenda"))

$obj | select male

Frank John
----- ----
    3    5 
```

# android - java.net.SocketException: sendto failed: EPIPE (Broken pipe) over a data connection to localhost

> ID：15006801
> 
> 赞同：8
> 
> 时间：2013-02-21T16:03:32.647
> 
> 标签：android, streaming, localhost, socketexception

在我的 Android 应用程序中，我想读取音频流并解析它的广播元数据。我在 NPR 项目中使用 StreamProxy 让它工作： [http://code.google.com/p/npr-android-app/source/browse/Npr/src/org/npr/android/news/StreamProxy.java? r=e4984187f45c39a54ea6c88f71197762dbe10e72](http://code.google.com/p/npr-android-app/source/browse/Npr/src/org/npr/android/news/StreamProxy.java?r=e4984187f45c39a54ea6c88f71197762dbe10e72)

问题是它不能通过数据连接工作。NPR也有同样的问题。

总而言之，这个代理作为本地 Web 服务器运行，在应用程序和远程流之间建立一个接口。它使用生成的自定义端口在 localhost 127.0.0.1 上运行。当服务器读取流数据时，它会将其复制到应用程序，您可以在[StreamProxy](http://code.google.com/p/npr-android-app/source/browse/Npr/src/org/npr/android/news/StreamProxy.java?r=e4984187f45c39a54ea6c88f71197762dbe10e72)的第 223 行读取：

```
client.getOutputStream().write(buff, 0, readBytes); 
```

但是，该行通过数据连接产生此异常：

```
java.net.SocketException: sendto failed: EPIPE (Broken pipe) 
```

我不是套接字和流媒体方面的专家。在这种情况下，我不明白 wifi 和数据连接之间有什么区别。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-01-06T17:48:52.220

以下是一些解决方案！

首先确保您的客户端与您尝试加入的服务器具有相同的版本。如果您没有相同的版本，您可以下载`MCNostalgia`并使用它来降级您的客户端。

更新 Java

如果您不想遇到任何不兼容问题，那么我建议您安装最新的 Java 运行时环境 ( `jre 7.0_05`)。在您这样做之前，建议您卸载其他以前的版本。如果您的操作系统在其中运行，`32bit`则仅安装`32bit`( `x86`) 版本。如果您有，请以这个精确的顺序`64bit`开始安装`64bit`，然后再安装。`32bit`

禁用不需要的网络主机

`Hamachi`并且`Virtual Box`可能是其中之一。它们可能会减慢或干扰您的连接。访问网络控制面板并单击“ `modify network cards`”（或类似内容）。右键单击您需要禁用的任何主机，然后单击禁用。

禁用防火墙

您可以在控制面板中访问防火墙设置并将其禁用。如果这不起作用，您也可以尝试禁用路由器的防火墙。如果这些都失败了，请尝试禁用您的防病毒软件（不建议使用这些选项，因为黑客很容易渗透到您的计算机中）。

这也适用于：

```
> Internal exception: java.net.SocketException: Software  caused
> connection abort: socket write error 
```

# c++ - 从用户输入c ++创建数组

> ID：15006804
> 
> 赞同：-1
> 
> 时间：2013-02-21T16:03:35.070
> 
> 标签：c++

我想从用户输入创建一个数组。用户输入将如下所示：

```
ID     Numbers
1 -3 2 -1 12 19 8
2  3 1 -3 2 19 5
3  7 4 1 7 9 3
4  9 12 4 6 -7 4 
```

所以有一个ID，然后是6个数字。我最多可以有 20 个 ID。起初我有类似的东西

```
struct Prog 
{
    unsigned int ID;
    signed int num_1;
    signed int num_2;
    signed int num_3;
    signed int num_4;
    signed int num_5;
    signed int num_6;
}; 
```

我使用以下命令在终端的单独函数中读取数据文件作为输入：

```
for (;;)
{
cin >> Temp.ID >> Temp.num_1 >> Temp.num_2 >> Temp.num_3 >> Temp.num_4 >> Temp.num_5 >> Temp.num_6;
} 
```

然而，问题是，当我试图找到这些 ID/数组的最小/最大值时，它变得非常混乱，因为有那么多不同的数组和元素。

所以现在我想做的是这样的：

```
struct Prog 
{
    unsigned int ID;
    static const int num_elements = 6;
    signed int numbers[num_elements];

}; 
```

然后稍后我可以通过执行 1 for 循环并使用 1 if 语句而不是之前的示例中的许多值来比较值，从而更容易找到最小/最大值。

我的问题是，我不确定如何获取上述新结构并读取顶部给定的数据文件并将它们存储在程序中以对其运行操作。任何帮助，将不胜感激。

谢谢。

编辑：不使用来自 std 的向量或来自 std 的 min/max。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:14:15.740

这是你想要的？

```
 for (;;)
{
cin >> Temp.ID >> Temp.numbers[0] >> Temp.numbers[1] >> Temp.numbers[2] >> Temp.numbers[3] >> Temp.numbers[4] >> Temp.numbers[5];
} 
```

也许

```
 while(1)
{
  cin >> Temp.ID;

  for(int i = 0; i<Temp.num_elements; i++)
  {
    cin >> Temp.number[i];
  } 
} 
```

不确定这是否回答了您的问题，但它至少为您提供了一些信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T16:36:28.297

首先，如果元素的数量可以改变，最简单的解决方案是使用`std::vector`：

```
struct Prog
{
    int id;
    std::vector<int> num;
}; 
```

其次，读取对象的常用方法是使用`>>`. 但是，在这种情况下，您没有真正的分隔符，因此任何 `operator>>`人都不知道在哪里停止。下一个最佳解决方案是拥有一个接受字符串的构造函数，并依靠您的客户端知道如何分隔输入。就像是：

```
Prog::Prog( std::string const& toParse )
{
    std::istringstream parser( toParse );
    parser >> id;
    if ( ! parser ) {
        throw std::runtime_error( "no id" );
    }
    int element;
    while ( parser >> element ) {
        num.push_back( element );
    }
    if ( ! parser.eof() ) {
        //  Format error, before running out of data
        throw std::runtime_error( "format error" );
    }
} 
```

由于这是一个构造函数，因此报告错误的唯一方法是异常。（它可能应该是`explicit`。）

最后，由于您可能想要创建多个，并且您的实际输入是面向行的：

```
std::string line;
int lineNumber = 0;
while ( std::getline( input, line ) ) {
    ++ lineNumber;
    try {
        data.push_back( Prog( line ) );
    } catch ( std::runtime_error const& error ) {
        std::cerr << error.what() << " (line " << lineNumber << ")\n";
    }
} 
```

因为你也不知道这里有多少，`data` 应该是一个`std::vector<Prog>`. （即使您确实知道预期有多少，我也会使用 `std::vector'。）

# iphone - 子 ViewController 内的 UIWebView 未加载

> ID：15006807
> 
> 赞同：0
> 
> 时间：2013-02-21T16:03:39.057
> 
> 标签：iphone, ios, uiwebview

我有一个 ViewController（带有 UIWebView）和一个 CreateEntryViewController（带有另一个 UIWebView）。当我更改为 CreateEntryViewController 时`[self presentViewController:vc2 animated:TRUE completion:nil];`。

在此负载上，我调用`-(void)updateView`执行以下操作的 an：

```
- (void)updateView {
    NSLog(@"CreateEntryViewController: updateView");
    AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
    if (appDelegate.session.isOpen) {
        NSString *urlAddress = @"http://google.com/";
        NSURL *url = [NSURL URLWithString:urlAddress];
        NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
        [createEntryWebView loadRequest:requestObj];
    }
} 
```

我可以确认显示了日志消息，因此调用了该函数，但我的 UIWebView 仍然为空 - 导致我相信它没有正确链接到`createEntryWebView`. 我已经以与在主 ViewController 中所做的相同方式对其进行了初始化（有效）。

我是 Objective C 和 iOS 开发的新手——有什么我可能错过的吗？代表？某物？

提前致谢， 卡斯帕

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T16:11:26.900

你添加`UIWebViewDelegate`到你的班级了吗？如果您`createEntryWebView`是一个，`IBOutlet`那么您应该确保它已正确连接，并且 IB 中的委托属性设置为`File's Owner`. 如果不是，`IBOutlet`请确保您初始化并将委托设置为`createEntryWebView`正确。

像这样的东西

```
createEntryWebView.delegate=self; 
```

要了解您的 webview 是否响应您的请求，请从`UIWebViewDelegate`

```
– webView:shouldStartLoadWithRequest:navigationType:
– webViewDidStartLoad:
– webViewDidFinishLoad:
– webView:didFailLoadWithError: 
```

# php - 从成员函数访问php私有数组

> ID：15006814
> 
> 赞同：0
> 
> 时间：2013-02-21T16:04:03.340
> 
> 标签：php, class

当我运行这段代码时，我只会打印出“in constructor”。

为什么我没有看到阵列被打印出来？

Apache 日志显示没有错误。PHP 语法检查器没有显示错误。

```
<?php
//---- User Class ----      
class User {
    private $list;

    function __construct() { 
        echo "in constructor";
        $this->$list = array(1, 2, 5);
        }

    function printAll() {
        print_r($this->$list);
    }

}   // end Class  

$foo = new User(); 
$foo->printAll();
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T16:05:14.670

一美元太多，试试这个

当我运行这段代码时，我只会打印出“in constructor”。

为什么我没有看到阵列被打印出来？

Apache 日志显示没有错误。PHP 语法检查器没有显示错误。

```
class User {
    private $list;

    function __construct() { 
        echo "in constructor";
        $this->list = array(1, 2, 5);
        }

    function printAll() {
        print_r($this->list);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-01T06:12:21.670

是的 $this->varname 是我们有时混淆的正确语法。

```
 class Cname {
    var $name;

     function setName($nam)
     {
         $this -> name = $nam;
     }
  } 
```

# java - Java如何将其他类的应用程序添加到gui类中

> ID：15006816
> 
> 赞同：0
> 
> 时间：2013-02-21T16:04:07.650
> 
> 标签：java, swing, user-interface

我的 Keypad 类是分开的，我想从另一个类（gui）运行它，所以我可以在我的 gui 类（一些 btn 等）中拥有我想要的任何东西，然后在我的 Keypad 底部。

当我尝试时，`Keypad kp = new Keypad();`我几乎得到了我想要的，但它们显示在不同的窗口中，我希望它们在同一个窗口中。

那是键盘类：

```
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;

public class KeypadWork extends JFrame implements ActionListener {

private JButton buttonR = new JButton("Reset");
private JButton button0 = new JButton("0");
private JButton buttonE = new JButton("Enter");

public KeypadWork() {
    setTitle("Keypad");

    setLayout(new GridLayout(4, 3, 2, 2));
    for (int i = 1; i < 10; i++) {
        addButton(new JButton(String.valueOf(i)));
    }

    addButton(buttonR);
    addButton(button0);
    addButton(buttonE);

    this.pack();
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setLocationRelativeTo(null);
    setResizable(false);
    setVisible(true);

}

private void addButton(JButton button) {
    button.addActionListener(this);
    add(button);
}

@Override
public void actionPerformed(ActionEvent e) {

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:19:16.457

这就是解决方案，谢谢@Alderath

> 如果您不希望`KeyPadWork`实例位于单独的窗口中，则不应将其设为`JFrame`. 如果您希望它在另一个窗口中，请`JPanel`改为扩展并使用普通 AWT方法将`KeyPadWork`实例添加到其他窗口。`JFrame``Container.add(Component)`

非常感谢！

# cookies - HTTP 请求中的唯一标识信息？

> ID：15006819
> 
> 赞同：2
> 
> 时间：2013-02-21T16:04:21.833
> 
> 标签：cookies, ip-address, mac-address

从咖啡店墙上的无线路由器的角度来看，我的电脑可以通过 HTTP 请求唯一标识吗？我认为它得到了我的 MAC 地址，不是吗？

下一个问题，从我发送 HTTP 请求的远程服务器的角度来看，我可以被唯一标识吗？在这种情况下，服务器没有得到我的 MAC 地址，但别人的 MAC 地址已经过去了，对吧？还有哪些其他信息可以使我的 HTTP 请求具有唯一性？IP 地址也无济于事，因为那只会将我缩小到我正在设置的咖啡店，对吧？而且我总是可以移动到不同的路由器。我想 cookie 可以在这里工作，但我们不能保证人们不会刷新他们的 cookie。我们离唯一可识别性有多近？可以使用什么策略。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T12:55:12.613

您最好的选择是 HTTP 标头，您可以在[此列表中](http://mobiforge.com/developing/blog/useful-x-headers)获取一些已经存在的标头。我不知道您要实现什么目标，但我想您想为每个用户创建一个标识符。所以你有两个选择，在路由器或网关或客户端上实现它。

# drupal-7 - 在 ctools popup drupal 7 中获取对未定义函数 webform_component_edit_form_validate 的错误调用

> ID：15006820
> 
> 赞同：0
> 
> 时间：2013-02-21T16:04:37.870
> 
> 标签：drupal-7, drupal-webform, drupal-ctools

我正在使用 webform 模块来创建表单。我要求不要自定义 webform_component_edit_form。所以我改变了 webform_component_edit_form。**在这种形式中，我添加了带有#ajax 属性的选择元素。当我在 url 中打开它时，这工作正常。但是当我在 ctools 中打开这个表单时，我得到了错误**

```
Call to undefined function webform_component_edit_form_validate() in ../includes/form.inc 
```

webform_component_edit_form_validate 我写在 webform/includeedes/webform.components.inc

任何人都可以建议我在哪里做错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T08:42:07.323

我用

```
module_load_include('inc', 'webform', '/includes/webform.components'); 
```

在我的模块上方。现在它工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T05:30:57.287

它存在于 webform/includes/webform.components.inc 中，所以它可能没有被包含，因为您正在将它与表单更改集成。

尝试将此添加到您正在修改的表单项上方的表单更改中。

```
require_once drupal_get_path('module', 'webform') . '/includes/webform.components.inc'; 
```

# mysql - MySQL查询 - 如何在一张表中按 2 行排序

> ID：15006821
> 
> 赞同：-1
> 
> 时间：2013-02-21T16:04:39.023
> 
> 标签：mysql, wordpress

我正在使用 MySQL Server 5.x，并且我有一个存储站点帖子数据的帖子表。有时帖子可以是父帖子的子帖子，在这种情况下，表格记录了帖子父的 ID 号。

该表有一个 ID 字段（ bigint ）、一个 post_parent 字段（也是 bigint ）、一个标题和内容。

示例数据可能如下所示

```
ID  post_parent  title    content
----------------------------------------------
1                test     testing post content
2                test2    more test content
3   1            test3    post 1 is my parent
4   2            test4    post 2 is my parent
5                tes5     test content post 5
6   2            test6    post 2 is my parent 
```

因此，我想查询表中的 X 条记录，并按帖子 ID 对结果进行排序，该帖子的子级与父级分组，结果如下所示：

```
ID  post_parent  title    content
----------------------------------------------
1                test     testing post content
3   1            test3    page 1 is my parent
2                test2    more test content
4   2            test4    page 2 is my parent
6   2            test6    post 2 is my parent
5                test5    test content post 5 
```

因此，根据给出的答案显然我可以使用这样的东西：

SELECT ID, post_parent, title, content FROM myTable ORDER BY COALESCE(post_parent, ID), ID

但是，我需要在这里添加另一个转折。假设表中有 16000 条记录以某种随机顺序排列，这意味着后 100 条记录（例如记录 101 - 200 ）可能都是后孩子，但我总是想返回孩子的父母总是返回的结果这些孩子。因此，对于上述查询，如果我使用“limit 100, 25”，我最终会得到只有没有父母的孩子的结果。我怎样才能避免这种情况，并让相关的父母总是带着孩子正确地返回？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T16:11:33.177

```
SELECT ID, post_parent, title, content
FROM myTable
ORDER BY COALESCE(post_parent, ID), ID 
```

[SQL 小提琴示例](http://www.sqlfiddle.com/#!2/58fc6/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T16:11:32.740

像这样的东西应该使用`CASE`：

```
SELECT *
FROM YourTable
ORDER BY 
  CASE WHEN post_parent IS NOT NULL THEN post_parent ELSE Id END 
```

[样品小提琴](http://sqlfiddle.com/#!2/6e03c/4)

# ruby-on-rails - 跳过与 simple_form 关联的包装器

> ID：15006822
> 
> 赞同：14
> 
> 时间：2013-02-21T16:04:40.540
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, simple-form

我正在使用 simple_form，我想知道在处理关联选择时是否可以跳过任何包装器 div。

谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-04-23T02:06:16.697

如果您使用类似的东西，`f.association :product`您可以像这样删除生成的标签和包装器：`f.association :product, label: false, wrapper: false`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-21T16:23:37.090

[https://github.com/plataformatec/simple_form#stripping-away-all-wrapper-divs](https://github.com/plataformatec/simple_form#stripping-away-all-wrapper-divs)

> SimpleForm 还允许您剥离使用通常 f.input 生成的字段周围的所有 div 包装器。实现这一点的最简单方法是使用 f.input_field。

例子：

```
simple_form_for @user do |f|
  f.input_field :name
end 
```

产生：

```
<input class="string required" id="user_name" maxlength="100"
   name="user[name]" size="100" type="text" value="Carlos" /> 
```

要查看实际的 RDocs，请在此处查看它们 - [http://rubydoc.info/github/plataformatec/simple_form/master/SimpleForm/FormBuilder:input_field](http://rubydoc.info/github/plataformatec/simple_form/master/SimpleForm/FormBuilder:input_field)

**或者 ...**

做类似的事情

```
config.wrappers :small do |b|
  b.use :placeholder
  b.use :label_input
end 
```

并以这种方式使用它：

```
# Specifying to whole form
simple_form_for @user, wrapper: :small do |f|
  f.input :name
end 
```

[https://github.com/plataformatec/simple_form#configuration](https://github.com/plataformatec/simple_form#configuration)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T21:46:55.357

在haml中使用[collection_select](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-collection_select)：

```
= f.collection_select :position_id, Position.all, :id, :name, {}, { class: 'span3' } 
```

此示例假设您有一个位置模型，并希望在它生成的模型上添加`span3`一个类`<select>`

# python - python cx_oracle删除stmt错误

> ID：15006827
> 
> 赞同：0
> 
> 时间：2013-02-21T16:04:50.613
> 
> 标签：python, oracle

我正在尝试在 try except 块中从表中删除特定行，但出现以下错误

```
 self.returnvals['ERROR_CD']   = error.code
AttributeError: 'str' object has no attribute 'code' 
```

代码：

```
try:
    # code deleting from a table
except cx_Oracle.DatabaseError, ex:
    error, = ex.args    
    self.conn.rollback()
    self.returnerr['ID']    = 0
    self.returnerr['ERROR_CD']   = error.code
    self.returnerr['ERROR_MSG']  = error.message
    self.returnerr['TABLE_NAME'] = self.debug_val 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-21T16:09:50.817

您的异常处理已损坏。您在 try 块中抛出了某种错误 oracle 数据库错误，看到它会很有用，但是代码中的行

```
 self.returnerr['ERROR_CD']   = error.code 
```

正在抛出您报告的错误，因为“错误”对象只是一个字符串并且没有`.code`属性。

还...

```
delete from a table 
```

看起来不像您正在尝试的实际 DML。你为什么不发布实际的 DELETE 语句，也许我们可以看看是否有语法错误。如果这是您的文字代码，则需要阅读文档。我相信它应该看起来更像：

```
import cx_Oracle as db
conn = db.connection()
cur = conn.cursor()
cur.execute("DELETE FROM TABLE WHERE somecolumn = someval")
conn.commit()
conn.close 
```

# c# - 带掌上电脑的红外线指令

> ID：15006829
> 
> 赞同：0
> 
> 时间：2013-02-21T16:04:56.387
> 
> 标签：c#, windows-mobile-6, pocketpc, infrared

我有一个红外遥控器，我想用我的 PPC 替换它。我的 Mitac P550 有一个红外串行端口，但我不知道如何检索和重新发送字节序列.....这是否可以使用 .net 的 SerialPort 组件获取数据？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T19:18:41.120

您需要编写两 (2) 个方法并将它们安装在通信的每一端：**发送**和**接收**。

一个通用的**发送**例程将向某个在给定**端口**号上监听的**主机发送一条****消息。**这是一个简单的例子：

 ****```
public static void Send(string message, string host, int port) {
  if (!String.IsNullOrEmpty(message)) {
    if (port < 80) {
      port = DEF_PORT;
    }
    Byte[] data = Encoding.ASCII.GetBytes(message);
    using (var client = new TcpClient(host, port)) {
      var stream = client.GetStream();
      stream.Write(data, 0, data.Length);
      stream.Close();
      client.Close();
    }
  }
} 
```

一个通用的**Receive**例程需要知道要监听的**端口**号，并且应该返回它接收到的**数据。**这是一个简单的例子：

```
public static string Receive(int port) {
  string data = null;
  listener = new TcpListener(IPAddress.Any, port);
  listener.Start();
  using (var client = listener.AcceptTcpClient()) { // waits until data is avaiable
    int MAX = client.ReceiveBufferSize;
    var stream = client.GetStream();
    Byte[] buffer = new Byte[MAX];
    int len = stream.Read(buffer, 0, MAX);
    if (0 < len) {
      data = Encoding.UTF8.GetString(buffer, 0, len);
    }
    stream.Close();
    client.Close();
  }
  return data;
} 
```

这是我用于此的完整类代码：

```
using System;
using System.Net;
using System.Net.Sockets;
using System.Text;
using System.Windows.Forms;

namespace AcpMobile5 {

  class TestClass1 : Form {

    public const int DEF_PORT = 8000;
    private static TcpListener listener;

    public static string Receive(int port) {
      string data = null;
      listener = new TcpListener(IPAddress.Any, port);
      listener.Start();
      using (var client = listener.AcceptTcpClient()) { // waits until data is avaiable
        int MAX = client.ReceiveBufferSize;
        var stream = client.GetStream();
        Byte[] buffer = new Byte[MAX];
        int len = stream.Read(buffer, 0, MAX);
        if (0 < len) {
          data = Encoding.UTF8.GetString(buffer, 0, len);
        }
        stream.Close();
        client.Close();
      }
      return data;
    }

    public static void Send(string message, string host, int port) {
      if (!String.IsNullOrEmpty(message)) {
        if (port < 80) {
          port = DEF_PORT;
        }
        Byte[] data = Encoding.ASCII.GetBytes(message);
        using (var client = new TcpClient(host, port)) {
          var stream = client.GetStream();
          stream.Write(data, 0, data.Length);
          stream.Close();
          client.Close();
        }
      }
    }

  }

} 
```****

# c# - Google 协议缓冲区 - protobuf-net 反序列化无法正常工作

> ID：15006833
> 
> 赞同：4
> 
> 时间：2013-02-21T16:05:05.120
> 
> 标签：c#, serialization, protobuf-net, protocol-buffers

我在成功反序列化已使用预编译的 protobuff 序列化程序类序列化的字节数组时遇到了困难`ModelSerializer`。使用它，我定义的数据模型中的类的序列化和反序列化`MyData`在我序列化到文件并从文件反序列化到`MyData`.

不过，我还有一个要求，就是序列化为`MyData`字节数组，反序列化字节数组为`MyData`. 下面是调用的基本类`MyDataConverter`，它有 2 个静态方法，一个用于转换`MyData`为字节数组，另一个用于将字节数组转换为`MyData`.

我可以成功序列化为`MyData`字节数组并将其写入`MemoryStream`. 但是，当我反序列化字节数组时，我确实得到了 的非空实例`MyData`，但其中的所有数据都丢失了（默认为零，或`null`自定义类型的值）。

我可能在这里出错了吗？请注意，我确实使用了类似的代码来成功序列化到文件并从文件反序列化，因此 MyModel 和预编译的 ModelSerializer 可能都没有问题。但如果有必要，我可以在这里粘贴一些信息。

```
public class MyDataConverter
{
    public static byte [] MyDataToBytes (MyData myData)
    {
        MemoryStream stream = new MemoryStream();
        ModelSerializer serializer = new ModelSerializer();

        serializer.Serialize (stream, myData);
        byte [] bytes = stream.ToArray();
        Stream.Close();

        return bytes;
    }

    public static MyData BytesToMyData (byte [] bytes)
    {
        MyData myData = null;

        MemoryStream stream = new MemoryStream();
        stream.Write (bytes, 0, bytes.Length);

        ModelSerializer serializer = new ModelSerializer();

        myData = (MyData) serializer.Deserialize (stream, myData, typeof (MyData));
        stream.Close();

        return myData;
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-21T16:08:08.910

这就是问题：

```
MemoryStream stream = new MemoryStream();
stream.Write (bytes, 0, bytes.Length);

ModelSerializer serializer = new ModelSerializer();
myData = (MyData) serializer.Deserialize (stream, myData, typeof (MyData)); 
```

当您尝试反序列化时，您仍然处于流的*末尾*。之后您可以从头开始，但更改代码以将字节数组传递给构造函数会更简单：

```
MemoryStream stream = new MemoryStream(bytes, false);        
ModelSerializer serializer = new ModelSerializer();
myData = (MyData) serializer.Deserialize (stream, myData, typeof (MyData)); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-05-20T19:02:44.280

我们可以将像 List 这样的对象列表作为输入传递给序列化器吗？

# iphone - iOS Quartz 2D 图形填充不规则形状模糊

> ID：15006838
> 
> 赞同：-2
> 
> 时间：2013-02-21T16:05:12.887
> 
> 标签：iphone, ios, ipad, core-graphics

我在视网膜显示器上使用 Core Graphics 绘制不规则形状。我通过创建一个包含 5 到 10 个随机点的 UIBezierPath 来做到这一点。在 drawRect 中，我描边路径并使用纯红色填充它。

我的问题是我绘图中的对角线似乎并不清晰。

我已经尝试过抗锯齿，但如果有的话，这会让它看起来更糟。我已经尝试过不同的线宽，不是抚摸，不是填充，但我似乎无法得到一条非常清晰的对角线。

为了比较，我在 Photoshop 中创建了一个类似的形状（使用类似的大小）并将其保存为 PNG。如果我在 iOS 上显示该 PNG，它看起来会更清晰。

我该怎么做才能使我在代码中创建的形状看起来清晰？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:28:03.703

确保您`CGPoint`的 ' 被四舍五入到最接近的整数值。

# wordpress - 如何预览 Woocommerce 的电子邮件模板

> ID：15006841
> 
> 赞同：9
> 
> 时间：2013-02-21T16:05:18.100
> 
> 标签：wordpress, email, templates, preview, woocommerce

我似乎找不到预览 Woocommerce 不同电子邮件模板的选项。在 Woocommerce 的管理部分，有一个链接可以预览客户的“已收到订单”电子邮件。但我想编辑和预览发送给管理员的“已收到订单”电子邮件。

我已经尝试过 WP Better 电子邮件插件和 WP 电子邮件模板插件，但它们没有为 Woocommerce 的所有不同电子邮件提供预览按钮。

不能通过下订单来预览电子邮件模板，因为下订单和收到管理员电子邮件之间有十分钟的延迟。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-05-27T12:14:21.503

我最终创建了一个通过 admin-ajax.php 脚本执行的小函数，例如

```
https://example.org/wp-admin/admin-ajax.php?action=previewemail&file=emails/customer-processing-order.php&order=180 
```

功能：

*   将全局变量设置为参数`$order`中指定的 id 的顺序`order`
*   加载参数中指定的电子邮件模板`file`。

这是代码（您必须将其添加到新插件或某些现有 php 中）：

```
/**
 * Open a preview e-mail.
 *
 * @return null
 */
function preview_email()
{
    global $order;

    $filename = $_GET['file'];
    $orderId  = $_GET['order'];

    $order    = new WC_Order($orderId);

    include $filename;

    return null;
}

add_action('wp_ajax_previewemail', 'preview_email'); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-11-21T23:28:01.607

使用内置 woo 函数修改上述答案的版本。好处是它会同时查看您的主题和默认插件模板路径。

```
/**
 * Open a preview e-mail.
 *
 * @return null
 */
function previewEmail() {

    if (is_admin()) {
        $default_path = WC()->plugin_path() . '/templates/';

        $files = scandir($default_path . 'emails');
        $exclude = array( '.', '..', 'email-header.php', 'email-footer.php','plain' );
        $list = array_diff($files,$exclude);
        ?><form method="get" action="<?php echo site_url(); ?>/wp-admin/admin-ajax.php">
<input type="hidden" name="order" value="2055">
<input type="hidden" name="action" value="previewemail">
        <select name="file">
        <?php
        foreach( $list as $item ){ ?>
            <option value="<?php echo $item; ?>"><?php echo str_replace('.php', '', $item); ?></option>
        <?php } ?>
        </select><input type="submit" value="Go"></form><?php
        global $order;
        $order = new WC_Order($_GET['order']);
        wc_get_template( 'emails/email-header.php', array( 'order' => $order ) );

        wc_get_template( 'emails/'.$_GET['file'], array( 'order' => $order ) );
        wc_get_template( 'emails/email-footer.php', array( 'order' => $order ) );

    }
    return null; 
}

add_action('wp_ajax_previewemail', 'previewEmail'); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-04-15T10:49:16.293

我提出了一个可能满足您需求的解决方案（插件），尽管它仅适用于默认的可用电子邮件模板，这是由于 WooCommerce 管理电子邮件的性质所致。[Github](https://github.com/digamber89/woocommerce-preview-emails)

[WordPress 回购](https://wordpress.org/plugins/woo-preview-emails/)

# android - AudioRecord read() 返回奇怪的值

> ID：15006843
> 
> 赞同：1
> 
> 时间：2013-02-21T16:05:29.463
> 
> 标签：android, audio-capture

我正在尝试通过以下代码从麦克风读取原始数据：

```
 short buffer[] = new short[AudioRecord.getMinBufferSize(8000,
                    AudioFormat.CHANNEL_IN_MONO,
                    AudioFormat.ENCODING_PCM_16BIT)];
            Log.d("O_o",""+buffer.length);
            AudioRecord rec = new AudioRecord(
                    MediaRecorder.AudioSource.MIC, 8000,
                    AudioFormat.CHANNEL_IN_MONO,
                    AudioFormat.ENCODING_PCM_16BIT, buffer.length);

            rec.startRecording();
            int read = rec.read(buffer, 0, buffer.length);
            for (int i = 0; i < read; i++) {
                Log.d("O_o",i+" "+buffer[i]);
            }
            rec.stop();
            rec.release(); 
```

但缓冲区总是充满 257 个值。怎么了 ？

**UDP：**看起来像我的初始值。在循环中调用 read() 会导致正常值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T00:39:37.710

你绝对应该看看[这个问题+答案](https://stackoverflow.com/questions/11151414/recording-with-audiorecord-on-android-speeds-up-the-audio)。它显示了一些可以大大改进您的代码的代码。

基本上，您的问题是您正在尝试同步阅读它。音频过程通常必须异步实现，并且您将在任何时候获得 256 字节大小的音频块。

# angularjs - $locationChangeSuccess 和 $locationChangeStart 有什么区别？

> ID：15006849
> 
> 赞同：25
> 
> 时间：2013-02-21T16:05:39.727
> 
> 标签：angularjs, window.location

`$locationChangeSuccess`和有什么区别`$locationChangeStart`？

它们都是与`window.location`.

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-02-21T16:25:50.420

当`$locationChangeStart`AngularJS 开始根据通过`$location`服务 ( `$location.path()`, `$location.search()`) 完成的突变更新浏览器的位置时，会触发 。

应用程序可能会监听`$locationChangeStart`事件并调用`preventDefault()`它。在这种情况下，第二个事件 ( `$locationChangeSuccess`) 将不会广播。

简而言之：`$locationChangeStart`在位置更新时触发。`$locationChangeSuccess`如果第一个动作没有被阻止，则紧随其后。

源代码的相关位在这里： [https ://github.com/angular/angular.js/blob/2508b47c1a34dfc834f8fde858574f81af4d287e/src/ng/location.js#L598](https://github.com/angular/angular.js/blob/2508b47c1a34dfc834f8fde858574f81af4d287e/src/ng/location.js#L598)

# magento - Magento 在管理员中删除重新索引栏

> ID：15006854
> 
> 赞同：1
> 
> 时间：2013-02-21T16:05:49.933
> 
> 标签：magento, reindex

我有一个 API 脚本可以更新 Magento 中的价格并进行重新索引。这种情况每分钟都会发生。因此，当发生这种情况时，您可以在后端看到“一个或多个索引不是最新的”。

有没有办法可以轻松地从后端删除这个栏？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:30:05.873

你可能可以通过 CSS 做到这一点，但老实说，我不得不质疑每分钟更新一次价格的动机。除非您拥有 5 种产品，否则在带宽和 CPU 时间方面这将是非常昂贵的。

# python - python中的“列表索引超出范围”

> ID：15006855
> 
> 赞同：0
> 
> 时间：2013-02-21T16:05:50.207
> 
> 标签：python

我在 python 中有一个代码来索引包含阿拉伯语单词的文本文件。我在英文文本上测试了代码，它运行良好，但是当我测试阿拉伯文时它给了我一个错误。注意：文本文件以 unicode 编码而非 ANSI 编码保存。

这是我的代码：

```
from whoosh import fields, index
import os.path
import csv
import codecs
from whoosh.qparser import QueryParser

# This list associates a name with each position in a row
columns = ["juza","chapter","verse","voc"]

schema = fields.Schema(juza=fields.NUMERIC,
                       chapter=fields.NUMERIC,
                       verse=fields.NUMERIC,
                       voc=fields.TEXT)

# Create the Whoosh index
indexname = "indexdir"
if not os.path.exists(indexname):
  os.mkdir(indexname)
ix = index.create_in(indexname, schema)

# Open a writer for the index
with ix.writer() as writer:
  with open("h.txt", 'r') as txtfile:
    lines=txtfile.readlines()

    # Read each row in the file
    for i in lines:

      # Create a dictionary to hold the document values for this row
      doc = {}
      thisline=i.split()
      u=0

      # Read the values for the row enumerated like
      # (0, "juza"), (1, "chapter"), etc.
      for w in thisline: 
        # Get the field name from the "columns" list
          fieldname = columns[u]
          u+=1
          #if isinstance(w, basestring):
          #     w = unicode(w)
          doc[fieldname] = w
      # Pass the dictionary to the add_document method
      writer.add_document(**doc)
with ix.searcher() as searcher:
    query = QueryParser("voc", ix.schema).parse(u"بسم")
    results = searcher.search(query)
    print(len(results))
    print(results[1]) 
```

然后错误是：

```
Traceback (most recent call last):
  File "C:\Python27\yarab.py", line 38, in <module>
    fieldname = columns[u]
IndexError: list index out of range 
```

这是文件的示例：

```
1   1   1   كتاب
1   1   2   قرأ
1   1   3   لعب
1   1   4   كتاب 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:35:02.777

虽然我看不出有什么明显的错误，但我会确保你是[为 error 设计的](http://en.wikipedia.org/wiki/Error-tolerant_design)。确保您发现任何 split() 返回的元素数量超过预期的情况并及时处理（例如打印和终止）。看起来您可能正在处理格式错误的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-24T12:58:54.523

您错过了脚本中的 Unicode 标头。第一行应该是：

# 编码：utf-8

还可以使用 unicode 编码打开文件：

```
import codecs 
with codecs.open("s.txt",encoding='utf-8') as txtfile: 
```

# java - 将密钥发送到 App Engine 端点

> ID：15006859
> 
> 赞同：2
> 
> 时间：2013-02-21T16:06:07.423
> 
> 标签：java, google-app-engine, google-cloud-endpoints

我试图向包含密钥的 Google App Engine Endpoints 发送一个对象。但是该对象不能被反序列化。这是我得到的错误：

```
java.io.IOException:     com.google.appengine.repackaged.org.codehaus.jackson.map.JsonMappingException: 
(was java.lang.NullPointerException) 
(through reference chain:
Form["identity"]->FormsIdentity["user"]->User["key"]->com.google.appengine.api.datastore.Key["appId"]) 
```

这是我发送的对象：

```
 "identity":{
    "user":
    {
       "key" : {
              "kind" : "User",
              "appId" : "no_app_id",
              "id" : "1",
              "complete" : true,
              "namespace" : ""
            },
      "googleID" : "8493582",
      "emailAddress" : "xxxxx@gmail.com",
      "credential" : "xxxx@gmail.com"
    },
    "deviceID":"4234o34i523534"
} 
```

但我只收到前端的错误，因为端点内的代码已执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-20T17:16:14.343

当 key 被序列化为 json 时，它会尝试从 Key.class 调用 getAppId()

```
 public String getAppId() {
    return appIdNamespace.getAppId();
  } 
```

如您所见，此 getter 尝试访问 appIdnamespace，在您的情况下可能为 null。appIdnamespace 不能不显式设置，但它是在您使用 KeyFactory 创建密钥时或在数据存储区持久化对象之后生成的。

由于您没有发布返回此身份对象的方法的代码，我不确定为什么您的用户密钥没有设置 appIdnamespace，但我的猜测是您没有返回已持久化的对象或者密钥没有正确创建。

# html - 的语义意义 没有 或者 ?

> ID：15006861
> 
> 赞同：2
> 
> 时间：2013-02-21T16:06:13.863
> 
> 标签：html, list, semantics, listitem

我网站的 h1 也是“home”链接，所以很明显我把它放在了 nav 标签中。导航中的其他链接最初放在无序列表中，如下所示：

```
 <nav>
      <h1><a href="#" class="active">Site Name</a></h1>
      <ul>
         <li><a href="#">Nav Item 1</a>
         <li><a href="#">Nav Item 2</a>
         <li><a href="#">Nav Item 3</a>
       </ul>
    </nav> 
```

标准，对吧？您可以想象，在子页面上，导航保持不变，但“活动”类被应用于相关的导航项。

这就是问题所在。在移动屏幕宽度下，导航压缩到下拉菜单中，其中“活动”链接是下拉菜单上方显示的唯一链接。在 h1 是活动链接的主页上这很好，但似乎我的 CSS 在子页面上会变得非常混乱。

我注意到一些受人尊敬的前端开发人员使用没有有序/无序列表的列表项。这些人高度重视语义，所以我想知道他们可能在想......

所以我被困住了。将我的 h1 放在 ul 中似乎是错误的，但这似乎也是错误的：

```
 <nav>
      <li><h1><a href="#" class="active">Site Name</a></h1></li>
      <li><a href="">Nav Item 1</a></li>
      <li><a href="">Nav Item 1</a></li>
    </nav> 
```

我知道我几乎可以通过任何方式标记 HTML 来了解我想要实现的目标，但我希望尽可能在语义上做到这一点，同时避免 CSS/JS 噩梦/或任何黑客攻击。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T16:07:34.350

[标准很明确](http://www.w3.org/TR/html-markup/li.html)：

> 允许的父元素：
> 
> ul, ol, 菜单

应避免任何其他用途，因为浏览器很可能不支持它。

规范禁止它的事实意味着没有公认的语义，除了每个开发人员为自己使用而发明的语义。

# java - Struts2：更新地图内“对象列表”的值

> ID：15006868
> 
> 赞同：6
> 
> 时间：2013-02-21T16:06:31.907
> 
> 标签：java, collections, struts2, treemap, ognl

有一个对象`ObjectA`有一个列表`ObjectB`。`TreeMap`里面有一个`ObjectB`。这`TreeMap`有一个`String`作为键和`List`另一个对象的一个`ObjectC`​​作为值。this `TreeMap`and `list`inside 已在`jsp`使用`s:iterator`and时显示，`s:textfield`并且它正在正确显示。即 s:textfield 中的“值”是正确的。现在，修改文本字段时出现问题。我们如何在动作类的 ObjectC 中捕获修改后的值？使用此处给出的代码，键（“Key1”）出现在操作中，但值为 null。

**Java 代码**

```
public class ObjectA implements Serializable {
private Integer attr1;
private List<ObjectB> objB;
//...getters and setters....
public class ObjectB implements Serializable {
private Integer attr11;
private TreeMap<String,List<ObjectC>> allPlainFields;
// ...getters and setters....
public class ObjectC implements Serializable {
private Integer attr111;
public String attr112;
// ...getters and setters.... 
```

**JSP 代码**

```
<s:iterator value="objA.objB" var="currentObjB" status="currentGroupStatus">

  <s:iterator value="#currentObjB.allPlainFields" var="parentMap" status="headerStatus">
     <s:iterator value="#parentMap.value" var="fieldList" status="fieldStatus">

       <s:textfield  name="objA.objB[%{#currentGroupStatus.index}].allPlainFields['%{#parentMap.key}'][%{#fieldStatus.index}].attr112"/>

</s:iterator>                       

 </s:iterator> 
```

**呈现的 HTML：** `<input type="text" id="review-act1_objA_objB_0__allPlainFields_'Key1'__6__attr112" value="Correct Value" name="objA.objB[0].allPlainFields['Key1'][0].attr112">`

**eclipse的“变量”视图中的对象结构显示**：

```
objA    Object A  (id=955)  
objB    ArrayList<E>  (id=966)  
    elementData Object[10]  (id=967)    
        [0] ObjectB  (id=968)   
            allPlainFields  TreeMap<K,V>  (id=972)  
                comparator  null    
                descendingMap   null    
                entrySet    TreeMap$EntrySet  (id=979)  
                keySet  null    
                modCount    1   
                navigableKeySet null    
                root    TreeMap$Entry<K,V>  (id=980)    
                size    1   
                values  null    

        [1] ObjectB  (id=969)   
        [2] ObjectB  (id=970)   
        [3] ObjectB  (id=971)   
        [4] null    
        [5] null    
        [6] null    
        [7] null    
        [8] null    
        [9] null    
    modCount    4   
    size    4 
```

****在 Eclipse“变量”视图中，allPlainFields 的值为**：** {Key1=}

**编辑（2013 年 2 月 27 日）**：

试过这个但没有用。这些值出现在 jsp 上，但在提交时，它们不会起作用：

在`Action`课堂上：

```
private TreeMap<String,ObjectCList> testTreeMap = new TreeMap<String,ObjectCList>();
//get,set and setting two keys in map "mykey1" and "mykey2" 
```

在`ObjectCList`课堂上：

```
private ArrayList<ObjectC> paramMdlList;
 //default constructor, get, set 
```

在`JSP`：

```
<s:form id="test-map" method="post">
<s:iterator value="testTreeMap" var="pMap" status="hStatus">
     <li><label><s:property value="%{#pMap.key}" /></label> 
        <s:iterator value="%{#pMap.value.paramMdlList}" var="pList" status="innerStatus">
            <s:textfield name="testTreeMap['%{#pMap.key}'].paramMdlList[%{#innerStatus.index}].attr111"/>
            <s:textfield name="testTreeMap['%{#pMap.key}'].paramMdlList[%{#innerStatus.index}].attr112"/> 

        </s:iterator>

    </li>

</s:iterator>
<s:submit value=" " type='button' id="btnh1" action="saveTreeMap">
            <span>Save TreeMap</span>
</s:submit>
</s:form> 
```

提交表单时，会调用`updateTreeMap`的方法。[地图按此处](https://stackoverflow.com/questions/46898/how-do-i-iterate-over-each-entry-in-a-map)`action`所述打印：

```
public String updateTreeMap(){

    for (Map.Entry<String, ObjectCList> entry : testTreeMap.entrySet())
    {
        System.out.println(entry.getKey() + "/" + entry.getValue());
    }

    return SUCCESS; 
```

}

什么是“打印”：mykey1/mykey2/ 即**空值**

**下面的屏幕显示了来自 jsp 的值** ![屏幕显示值来自 jsp](../Images/c8bb117017a64ed1e64a204d3f6e0560.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T09:37:11.017

根据您的最新更新。如果您使用的是`TreeMap`Struts2，则无法正确确定其中的元素类型。将声明`testTreeMap`from更改`TreeMap`为`Map`。

```
private Map<String,ObjectCList> testTreeMap = new TreeMap<String,ObjectCList>(); 
```

或者`testTreeMap`用`com.opensymphony.xwork2.util.Element`注解来告诉Struts2 map里面的元素是什么类型。

```
@Element(value = ObjectCList.class)
private TreeMap<String,ObjectCList> testTreeMap = new TreeMap<String,ObjectCList>(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-21T17:59:10.933

我变得好奇并做了其他实验。

我发现`List`s 中`List`的 s 和`Map`s 中`Map`的 s（以及所有插值）都没有声明为接口（`List`, `Map`），或者它们的实现（`ArrayList`, `HashMap`, `TreeMap`）都没有被`XWork Converter`.

所有的测试用例都失败了。

也许这是我的错，如果是这样的话，我们真的需要一些`OGNL`专家，因为在整个网络上都没有谈论这个。

然后我尝试了我非常确定会起作用的方法：以纯粹的方式将这些信息封装在**自定义对象**`OOP`中。

它奏效了:)

代替

```
private ArrayList<ArrayList<String>> outerObjects; 
```

你可以在你的**动作中使用**

```
private ArrayList<OuterObject> outerObjects; 

/* GETTERS AND SETTERS */
public ArrayList<OuterObject> getOuterObjects() {
    return outerObjects;
}
public void setOuterObjects(ArrayList<OuterObject> outerObjects) {
    this.outerObjects = outerObjects;
} 
```

**外部对象**定义：

```
/* ELSEWHERE IN YOUR PROJECT... */
public class OuterObject{
    private ArrayList<InnerObject> innerObjects;

    /* GETTERS AND SETTERS */
    public ArrayList<InnerObject> getInnerObjects() {
        return innerObjects;
    }
    public void setInnerObjects(ArrayList<InnerObject> innerObjects) {
        this.innerObjects = innerObjects;
    }       
} 
```

内部**对象**定义：

```
public class InnerObject{
    String innerField;

    /* GETTERS AND SETTERS */       
    public String getInnerField() {         
        return innerField;
    }
    public void setInnerField(String innerField) {
        this.innerField = innerField;
    }

} 
```

**Action**的可选**execute()**方法来测试预设值：

 **```
 InnerObject innerObj1 = new InnerObject();
        innerObj1.setInnerField("Inner Value 1");

        ArrayList<InnerObject> innerObjArrayList = new ArrayList<InnerObject>();
        innerObjArrayList.add(innerObj1);

        OuterObject outerObj1 = new OuterObject();      
        outerObj1.setInnerObjects(innerObjArrayList);

        outerObjects = new ArrayList<OuterObject>();
        outerObjects.add(outerObj1); 
```

**JSP**：_

```
 <s:form>
        <s:textfield name="outerObjects[0].innerObjects[0].innerField" />
        <s:submit/>
    </s:form> 
```

（迭代时，只需使用`[%{#stat.index}]`for `List`s 和`['%{#stat.index}']`for `Map`s）

相同的解决方案适用于每一种可迭代的结构（可能除了需要调用方法的`Guava`东西）。`.create()`

当然，这并不是在每种情况下都很方便，在您的示例中，您已经拥有一个巨大的结构~~，这几乎会使它翻倍~~，但它可以工作，它是 OOP，您的 OGNL 会更清晰（因为名称），但似乎是唯一的方法。

注意：类必须是真正的独立类，而不是自动装配对象失败的`Inner Classes`另一种情况。`OGNL`

希望有帮助

* * *

**编辑**

那么你所需要的，只是多了一层：

改变这个：

```
private TreeMap<String,List<ObjectC>> allPlainFields; 
```

对此

```
private TreeMap<String,ObjectX> allPlainFields; 
```

并创建一个`ObjectX`包含私有字段的`List<ObjectC>`.

它会起作用的。**

# javascript - 使用 JavaScript 创建动态信用卡下拉菜单

> ID：15006875
> 
> 赞同：0
> 
> 时间：2013-02-21T16:06:51.320
> 
> 标签：javascript, jquery, drop-down-menu, for-loop

我正在尝试创建一个动态下拉列表，该下拉列表将占用当前年份并再迭代 15 年，因此我不必继续更新信用卡年份下拉字段。我已经成功构建了 for 循环，但似乎无法弄清楚如何将其放入 select 标记中。

任何帮助都会很棒！

这是迭代日期的 for 循环。这是我的[CodePen](http://www.codepen.io/jbatzel1Development/pen/kebpn)

```
var date = new Date().getFullYear();
var length = date + 16;

for(var i = date; i < length; i++){
  document.write("<br/>" + i + "<br/>");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:17:56.737

好吧，你肯定想得到类似下面的结果，对吧？

```
<select>
    <option value="2013">2013</option>
    <option value="2014">2014</option>
    <!-- ... -->
    <option value="2027">2027</option>
</select> 
```

因此，您应该`<option>`在循环中创建元素，并将它们放入`<select>`元素中。有点像这样：

```
var year = new Date().getFullYear(),
    $select = $('select').empty()  // be sure to select the proper, ahem, select
    ;

for(var i = 0; i < 15; i++) {
    $('<option>')          // creates an <option> element
        .val(year + i)     // sets its value
        .text(year + i)    // sets the text inside
        .appendTo($select) // puts it into your <select>
    ;
} 
```

我的脚本中有几点需要优化（有利于一次性添加所有元素，而不是一个一个地添加；考虑创建一个模板并只是克隆，而不是让 jQuery 解析你的 HTML 字符串；等等），但我会留给你.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:13:09.483

仅使用纯 JavaScript：

```
var date = new Date().getFullYear(),
    sel = document.getElementById('select'),
    prop = 'textContent' in document.createElement() ? 'textContent' : 'innerText',
    opt;

for (var i = 0, len = 16; i < len; i++) {
    opt = document.createElement('option');
    opt.value = date + i;
    opt[prop] = date + i;
    sel.appendChild(opt);
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/5xfjQ/1/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T16:28:10.630

正如 Richard Neil Ilagan 所说，您应该创建`<option>`元素并将它们附加到您的`<select>`元素中。这是一个没有jQuery的解决方案

```
var select = document.getElementById("select");
var startYear = new Date().getFullYear();
var option, currentYear;

for(var i = 0; i <= 15; i++) {
  currentYear = startYear + i;

  option = document.createElement("option");
  option.setAttribute("value", currentYear);
  option.appendChild(document.createTextNode(currentYear));

  select.appendChild(option);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T16:10:24.230

```
var date = new Date().getFullYear();
var length = date + 16;

var select = $("#select");
select.empty();
for(var i = date; i < length; i++){
  select.append($('<option></option>').val(i).html(i));
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T16:11:53.177

不使用 jquery 它看起来像这样

```
 var options = "";
 for(var i = date; i < length; i++){
     options += "<option value='"+ i +"'>" + i + "<option/>";
 }
 document.getElementById('select').innerHTML = options; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-21T16:14:08.037

在这里你有，我也建议你使用 javascript 框架，例如 JQuery。

```
var date = new Date().getFullYear();

var length = date + 16;

document.getElementById('select').innerHTML = '';

for(var i = date; i < length; i++){

  document.getElementById('select').innerHTML += '<option value="'+i+'">'+i+'</option>';

} 
```

# c# - HttpRuntime.Cache - 获取条目的 CreationTime

> ID：15006876
> 
> 赞同：0
> 
> 时间：2013-02-21T16:06:52.210
> 
> 标签：c#, reflection, httpruntime.cache

我有一个小 CMS，它正在使用从数据库呈现的 Razor 视图。在您更改其中一页之前，一切正常。

由于页面被分配到一个虚拟路径，MVC 或`RazorViewEngine`将缓存视图，这是完全有意义的。

但是，如果有人进行更改，我想清除此特定视图的缓存。我也想在渲染页面之前清除缓存。所以我的想法是`DateTime`在数据库中的我的视图中添加一个“更新”信息（这个字段无论如何都在那里，因为它是我们表中的标准字段之一），然后将此日期与条目的 CreateTime 进行比较`HttpRuntime.Cache`。我可以看到 VisualStudio 有一个 CreationTime，但我对反射没有那么经验来达到这个值。

另外，正如我所听说的，反射不是很快，如果每次渲染页面时我都必须这样做，它会减慢页面速度。

所以我的问题是，1\. 有人可以帮助我从具有反射的条目中获取 CreationTime，`HttpRuntime.Cache`还是 2\. 有人知道更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T12:42:52.010

我在 MVC 框架的错误位置，我追求的是 Cache `VirtualPathProvider`，我找到了我必须覆盖的方法。对于那些面临同样问题的人。

*   `GetCacheDependency`
*   `GetFileHash`

# java - 在调用 Future.get() 之前中断线程

> ID：15006882
> 
> 赞同：2
> 
> 时间：2013-02-21T16:07:11.733
> 
> 标签：java, multithreading, interrupt, future

我正在尝试编写一个集成测试，导致`InterruptedException`从生产代码中引发一个：

```
@Test
public void test() {
    productionObject = new ProductionObject(
            com.google.common.util.concurrent.MoreExecutors.sameThreadExecutor());
    Thread.currentThread().interrupt();
    assertThat(productionObject.execute(), equalTo(defaultResponse));
} 
```

Inside`productionObject`的实现：

```
try {
    for (Future<T> future : executorService.invokeAll(tasks))) {
        results.add(future.get());
    }
    return results;
} catch (InterruptedException e) {
    Thread.currentThread().interrupt(); // preserve interrupt flag
    return defaultResponse;
} 
```

在里面`AbstractQueuedSynchronizer.acquireSharedInterruptibly()`我看到：

```
 if (Thread.interrupted())
        throw new InterruptedException(); 
```

所以我希望这个测试能够始终如一地通过。

我在我们的构建服务器中看到了这个失败（`results`返回而不是`defaultResponse`）。我一直无法在本地重现故障，在一段时间（真实）循环中运行测试，并通过运行带有软件渲染的 glxgears 来模拟更高的负载;-) 任何人都可以发现我的错误，给我一些关于在哪里看的建议，或建议可以帮助我的工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:11:23.603

奇怪的。我以与您相同的方式阅读代码。我懂了：

1.  `FutureTask.get()`来电`Sync.get()`。我假设我们正在处理`FutureTask`这里。
2.  `Sync.get()`来电`Sync.innerGet()`
3.  `Sync.innerGet()`来电`acquireSharedInterruptibly(0)`；
4.  其中有代码：

    ```
    if (Thread.interrupted())
        throw new InterruptedException(); 
    ```

我认为这总是会抛出。也许存在某种竞争条件，所以线程还不知道它已被中断？您是否尝试在中断线程后休眠 100 毫秒？

我刚刚在我的多 CPU Mac 上运行了以下测试，它从未失败，所以它看起来不像是竞争条件——至少对于我的架构和 JRE 版本 1.6.0_41。

```
for (long i = 0; i < 10000000; i++) {
    Thread.currentThread().interrupt();
    assertTrue(Thread.interrupted());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:15:30.900

在这种情况下使用`sameThreadExecutor()`实际上可能会适得其反，因为中断可能会发生在其中一项任务中。否则代码看起来很好。尝试使用启动实际的其他线程并让其中一个任务等待足够长的时间等待您的中断。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T10:38:44.207

我通过从内部`Callable`而不是从测试方法本身中断线程来“修复”这个问题。这使得中断更接近于调用`acquireSharedInterruptibly()`。

我只能想象代码路径上的某个地方有时会清除中断标志（可能是由 JUnit 或 Maven surefire，它们并行执行测试方法）。我可能只是减少了竞争条件的可能性，而不是修复它：-/

# java - SWT：防止树通过双击扩展？

> ID：15006888
> 
> 赞同：1
> 
> 时间：2013-02-21T16:07:30.017
> 
> 标签：java, tree, swt

我对 SWT 树有疑问。我的情况是这样的：我有一个 SWT 树，其中包含许多 TreeItems（日志条目），其中也包含 TreeItems。这些日志条目的消息很长，根本无法在 TreeColumns 中显示。所以我的想法是：向树中添加一个侦听器，它会通过 DoubleClick 打开一个新对话框，其中显示条目的详细信息。到现在为止还挺好。如果我双击一个项目，它可以工作。但是：如果我双击父项，它将展开（这很好），但是我的双击监听器也处于活动状态，并且对话框将打开。这不是我想要的。

因此，该问题有两种解决方案：1）防止树通过双击自动展开/折叠并自行实现该方法或2）识别项目已展开并且必须中止事件。

我真的不知道怎么做 1 或 2。你们知道吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T22:35:32.910

如果你正在使用`TreeViewer`，你可以利用`IOpenListener`

```
treeViewer.addOpenListener(new IOpenListener() {

      @Override
      public void open(OpenEvent event) {
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-04T08:17:10.553

我发现上面的答案是相当虚假的。以下对我有用：

```
treeViewer.getControl().addListener(SWT.MeasureItem, new Listener(){
    @Override
    public void handleEvent(Event event) {
    }}); 
```

我知道，这没有任何意义；有关问题的真正原因的解释，以及上述问题的修复原因，请参阅 Eclipse 社区论坛中的讨论：[禁用 Treeviewer 双击展开/折叠](http://www.eclipse.org/forums/index.php/t/257325/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T14:49:15.480

还有另一种效果更好的解决方案。

'sambi reddy' 的解决方案的问题是，双击阻止了树的扩展，但单击左侧的十字也阻止了树的扩展。

我的解决方案（效果很好）很简单：我添加了一个 TreeListener，它监听树的展开/折叠，并从 MouseDoubleClick-Listener 中删除了展开/折叠实现。

没有 JFace TreeViewer - 它工作正常。

# python - 如何打包一个 Python 应用程序以便于访问模块

> ID：15006891
> 
> 赞同：0
> 
> 时间：2013-02-21T16:07:40.673
> 
> 标签：python

我有一个 python 应用程序，其中包含几个打包在不同目录中的模块。

我想要的是能够定义根目录（或其他）并能够从那里调用包——django 的工作方式。我无法获得有关这方面的非常有用的信息，非常欢迎任何建议

我的结构如下：

`/main`

```
 dir1

         __init__.py

         subdir2

             __init__.py

             module1.py

             module2.py

         subdir3

             __init__.py

             module3.py

             module4.py 
```

我希望能够从`module3.py`:-执行以下操作`from dir1.subdir2.module1 import *`并且能够`from dir1.subdir3.module3 import something`从`module1.py`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T21:46:54.870

你应该`/main`在你的`PYTHONPATH`环境变量中有。或者在你的主程序中你做：

```
import sys
sys.path.insert(0, '/main') 
```

但是，如果您正在运行最新版本的 python，您应该考虑使用`from ..subdir3.module3 import something`in进行相对导入`module1.py`

# hibernate - java - 如何使应用程序与Java Web服务器上的应用程序同步离线条目？

> ID：15006892
> 
> 赞同：0
> 
> 时间：2013-02-21T16:07:41.093
> 
> 标签：hibernate, jakarta-ee, synchronization, vaadin, java-server

**> 我需要使用java技术制作web系统，但考虑到

> 互联网断开连接问题。我还需要制作该系统的桌面版本......用户可以在其中输入系统。我的要求是，如果用户在工作日结束时单击按钮或执行任何类型的功能，并且用户在过去一天所做的所有条目都应在线更新 Web 系统。用户不应在网络系统上再次输入。**

我不知道如何使用 java 技术来实现这个功能......

我在开发这个 Web 系统时使用了 Java Hibernate 和 Java Vaadin 框架。

***请帮助我。提前致谢。:)***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T19:52:02.310

Vaadin 是一个客户端-服务器框架。您的业​​务代码在服务器端运行。因此，您需要连接到服务器。Vaadin TouchKit 插件支持离线模式，主要用于移动应用程序，而不是大量/大量视图。更多信息[在这里](https://vaadin.com/blog/-/blogs/offline-mode-in-vaadin-apps-absurd-joke-or-a-real-solution)。TouchKit 与谷歌浏览器配合得很好，所以你可以试一试。

# .htaccess - 我可以在 htaccess 中指定通配符或正则表达式作为目录吗？

> ID：15006894
> 
> 赞同：1
> 
> 时间：2013-02-21T16:07:44.747
> 
> 标签：.htaccess

我们有很多很多网站，所有这些网站都包含一个“客户/上传文件夹”。我们必须允许上传，但要阻止任何 GIF 文件，以及关闭文件夹中的 PHP，如下所示。问题是，每个文件夹都需要一个条目，还是可以使用通配符/正则表达式？

```
<VirtualHost *:80>
    <Directory /customer/uploadsfolder>
        deny from all
        <Files ~ "^\w+\.(gif)$">
            order deny,allow
            allow from all
        </Files>  
        <IfModule mod_php5.c>
            php_flag engine off
        </IfModule>      
    </Directory>
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:09:08.290

是的，使用 LocationMatch（或“Location ~”）。

```
<LocationMatch "\/customer\/uploadsfolder\/.*\.(php|gif)">
  order allow,deny
  deny from all
</LocationMatch> 
```

# ios - UIScrollView：拾取滚动中间滑动

> ID：15006896
> 
> 赞同：0
> 
> 时间：2013-02-21T16:08:05.497
> 
> 标签：ios, uiscrollview, touchesbegan

我正在尝试向视图添加一个滚动视图，并在手指已经按下屏幕时立即启动它的滚动。到目前为止，我正在单击一个使滚动视图出现在其顶部的按钮……这意味着我单击，然后必须抬起手指，然后将其放回原处以开始滚动。

即使触摸已经发生，是否有让滚动视图开始滚动？还是将按钮保存的触摸一出现就传递给滚动视图，以便拖动？或者一旦滚动视图开始，可能会完全伪造触摸的开始？

# sql - sql-server 2008，表之间的差异

> ID：15006901
> 
> 赞同：0
> 
> 时间：2013-02-21T16:08:30.323
> 
> 标签：sql, database, sql-server-2008

sql-server 2008中以下3个有什么区别？

```
#Table_name
##Table_name
@Table_name 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:12:29.120

来自[MSDN：Database Identifiers](http://msdn.microsoft.com/en-us/library/ms175874.aspx)（重新格式化以更好地适应问题）。

标识符开头的某些符号在 SQL Server 中具有特殊含义。

*   **@**：以 at 符号开头的常规标识符始终表示局部变量或参数，不能用作任何其他类型对象的名称。
*   **#**：以数字符号开头的标识符表示临时表或过程。
*   **##**：以双数字符号 (##) 开头的标识符表示全局临时对象。尽管可以使用数字符号或双数字符号字符来开始其他类型对象的名称，但我们不推荐这种做法。
*   **@@**：某些 Transact-SQL 函数的名称以双 at 符号 (@@) 开头。为避免与这些函数混淆，您不应使用以@@ 开头的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:11:59.863

看到这个问题

[https://stackoverflow.com/a/64891/886591](https://stackoverflow.com/a/64891/886591)

```
#table = temp table tied to the spid
##table = global temp table
@table = table variable 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T16:19:22.583

**#table_name -**本地临时表

*   它仅在用户会话或创建临时表的过程期间存在
*   当用户注销或创建表的过程完成时，本地临时表丢失

**##table_name -**全局临时表

*   它在用户会话期间存在
*   当最后一个引用该表的用户会话断开时，全局临时表丢失

**@Table_name -**表变量 - 它也仅在用户会话期间存在

`Temp Table and Table Variable`— 两者都是在 TempDB 而不是内存中创建的

# javascript - Ember.js返回路由时无法在路径中找到视图

> ID：15006904
> 
> 赞同：1
> 
> 时间：2013-02-21T16:08:32.370
> 
> 标签：javascript, ember.js

我有一个简单的示例 ember.js 应用程序，我想在索引模板上包含一个视图。

这适用于初始渲染。

当我链接到第二条路线并返回到原始路线时，我收到错误**无法在路径“App.testView”找到视图**

示例代码：[JSFiddle](http://jsfiddle.net/4z3AH/6/)

HTML 页面...

```
<div id="test"></div>

<script type="text/x-handlebars">
    <h1>Test Layout</h1>
    {{outlet}}        
</script>

<script type="text/x-handlebars" data-template-name="index">
    <h2>Index Template</h2>
    <p>{{#linkTo test}}test route{{/linkTo}}</p>
    <div>{{view App.testView}}</div>    
</script>

<script type="text/x-handlebars" data-template-name="test">
    <h2>Test Template</h2>
    <p>{{#linkTo index}}index route{{/linkTo}}</p>        
</script>

<script type="text/x-handlebars" data-template-name="testview">
    <p>Test View</p>
</script> 
```

Javascript...

```
window.App = Ember.Application.create();

App.Router.map(function() {
    this.route("test");
});

App.testView = Ember.View.create({
    templateName: 'testview'
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T16:33:53.330

[修复了 JSFiddle](http://jsfiddle.net/4z3AH/12/)

使用`Ember.View.extend`代替`Ember.View.create`将解决此问题。

根据帮助器的[Ember API](http://emberjs.com/api/classes/Ember.Handlebars.helpers.html#method_view)，`{{view}}`您需要将其传递给类，而不是实例。助手将创建一个新的实例`View`并插入它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:26:32.283

能够识别的一个简单语法错误是未添加路径属性。用这个更新代码 Router.map()

```
App.Router.map(function() {
    this.route("test",{path:"/"});
}); 
```

# python - 如何使用 gluLookAt() 修改 OpenGL 的透视图？

> ID：15006905
> 
> 赞同：1
> 
> 时间：2013-02-21T16:08:33.313
> 
> 标签：python, opengl

我想更改查看我创建的模型的角度。我环顾四周，发现了 gluLookAt() 函数，我认为它做了我不想做的事情。但是，我完全不知道如何使用 gluLookAt()。我将它弹出到下面的代码中，但我似乎无法让它正常运行。无论如何，我的代码（python）：

```
#!/usr/bin/env python

from OpenGL.GL import *
from OpenGL.GLU import *

import pygame

def pyramid():

    #draw a pyramid here

def cube():

    #draw a cube here

class mainClass():
    def mainMethod(self):   
        from sys import exit

        print ("Initalizing...")

        resolution = (400, 300)

        pygame.init()
        screen = pygame.display.set_mode(resolution, pygame.OPENGL|pygame.DOUBLEBUF)

        self.xPer, self.yPer, self.zPer = 0, 0, 0
        print ("Doing GL stuff...")
        glViewport(self.xPer, self.yPer, resolution[0], resolution[1])

        glMatrixMode(GL_PROJECTION)
        glLoadIdentity()
        gluPerspective(45.0, float(resolution[0]) / resolution[1], 0.1, 1000.0)#Distance, 

        glMatrixMode(GL_MODELVIEW)
        glLoadIdentity()

        print ("More GL stuff...")
        glEnable(GL_DEPTH_TEST)

        #glHint(GL_PERSPECTIVE_CORRECTION_HINT, GL_NICEST)

        glShadeModel(GL_SMOOTH)
        glClearColor(0.0, 0.0, 0.0, 0.0)

        print ("Minor details...")
        clock = pygame.time.Clock()

        rot_tri = 0
        rot_quad = 0

        print ("Mainloop...")
        while True:

            for event in pygame.event.get():

                if event.type == pygame.QUIT:
                    pygame.quit()
                    exit()
                if event.type == pygame.KEYDOWN:
                    if event.key == pygame.K_ESCAPE:
                        pygame.quit()
                        exit()
                    elif event.key == pygame.K_a:
                        self.xPer += 50

                    elif event.key == pygame.K_d:
                        self.xPer -= 50
                        #glViewport(self.xPer, self.yPer, resolution[0], resolution[1])
                    elif event.key == pygame.K_w:
                        self.yPer -= 50
                        #glViewport(self.xPer, self.yPer, resolution[0], resolution[1])
                    elif event.key == pygame.K_s:
                        self.yPer += 50
                        #glViewport(self.xPer, self.yPer, resolution[0], resolution[1])
                    elif event.key == pygame.K_f:
                        self.zPer += 50
                    elif event.key == pygame.K_v:
                        self.zPer -= 50

            glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT);

            glMatrixMode(GL_MODELVIEW);
            glLoadIdentity()
            gluLookAt(10, 10, 10, self.xPer, self.yPer, self.zPer, 0, 1, -1);

            glLoadIdentity()
            glTranslatef(-1.5, 0.0, -6.0)
            glRotatef(rot_tri, 0.0, 1.0, 0.0)
            pyramid()

            glLoadIdentity()
            glTranslate(1.5, 0.0, -6.0)
            glRotatef(rot_quad, 1.0, 0.0, 0.0)
            cube()

            rot_tri += 2.0
            rot_quad -= 1.5

            pygame.display.set_caption("hello_opengl.py FPS: %i" % clock.get_fps())

            pygame.display.flip()
            clock.tick()

t = mainClass()
t.mainMethod() 
```

我想要这段代码做的就是修改我查看一些旋转金字塔和立方体的角度。谁能解释如何修改此代码以使用 gluLookAt()？

PS：是否有一个很好的页面来解释 OpenGL（矩阵、3d 数学、glLoadIdentity() 所做的任何事情等）？我可以编写代码，但我不知道我在做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T23:41:19.397

你完全错过了`gluLookAt`. 您必须在当前矩阵上调用一次，然后*不要*清理它并修改它，以便相应地绘制另一个对象。

当你这样做时：

```
glMatrixMode(GL_MODELVIEW);
glLoadIdentity();
gluLookAt(10, 10, 10, ...); // <-- this line has no effect
glLoadIdentity(); 
```

`gluLookAt`函数`glRotate`和`glTranslate`函数一样。

# javascript - setInterval Interval 是如何管理的？

> ID：15006908
> 
> 赞同：0
> 
> 时间：2013-02-21T16:08:48.787
> 
> 标签：javascript, setinterval

如果我使用 setInterval 函数每 X 秒调用一次异步 JavaScript 函数，间隔将在上一次执行完成后等待 X 秒还是在上一次执行被调用后等待 X 秒？例如，如果我显示呼叫的时间线是：

0 秒：setInterval(funcX, 10000)
10 秒：funcX - 需要 3 秒执行 20 秒：funcX

或者

0 秒：setInterval(funcX, 10000)
10 秒：funcX - 需要 3 秒执行 23 秒：funcX

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T16:11:20.870

取自[Mozilla 文档](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)：

> 重复调用函数或执行代码片段，每次调用该函数之间有固定的时间延迟。

因此，它是每 X 秒。但是如果函数的执行时间超过 X 秒，那么线程将被锁定并在空闲时执行。

有关[JavaScript](http://en.wikipedia.org/wiki/JavaScript)计时的更多信息，我推荐 John Resig 的文章*[How JavaScript Timers Work](http://ejohn.org/blog/how-javascript-timers-work/)*。

* * *

如果您希望它在函数执行后 X 秒，请在函数`setTimeout()`末尾使用并调用它：

```
runFunc();

function runFunc(){
   //code here....
   setTimeout(runFunc, 3000);
} 
```

这将导致无限递归， emulating `setInterval()`，但只有在当前函数完成执行后才开始 X 秒延迟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:17:14.317

如果函数实际执行需要 3 秒，那么您就有严重的问题。

这与您并不特别相关，因为您使用的是[Ajax](http://en.wikipedia.org/wiki/Ajax_%28programming%29)，并且实际的 Ajax 调用实际上应该是即时的。

如果您希望在间隔再次继续*之前*完成 Ajax 调用，这`setInterval`是不可取的。改为使用`setTimeout`。

```
function atTime() {
    ajax().done(function () { setTimeout(atTime, 10000); });
}
atTime(); 
```

# javascript - 无法在表格内显示无显示

> ID：15006909
> 
> 赞同：0
> 
> 时间：2013-02-21T16:08:52.613
> 
> 标签：javascript, html, forms, html-table

我遇到了 style.display 的问题。

当我更改数字但它不起作用时，我想显示一个提交框（在表格内）。

这是代码：

```
<head>
<script>
function changedisp(Section){  
    if (Section.style.display=="none"){  
        Section.style.display=""  
    }  
    else{  
    Section.style.display="none"  
    }  
}  
function raisenumber(s,s1) {
    var x;
    x = document.getElementById(s).innerHTML;
    document.getElementById(s).innerHTML = x*1 + 1;
    changedisp(s1);
}
</script>
</head>

<body>
<table>
    <tr>
        <th><b>ID</b></th>
        <th><b>number</b></th>
        <th><b>buttoon</b></th>
        <th><b>submit</b></th>
    </tr>
    <form action="modifica_inventario.php" method="post">
    <tr>
        <td> <b id="cell1A">item number1</b></td>
        <td> <b id="cell2A">10</b></td>
        <td> <button id="cell3A" type="button" onClick=raisenumber("cell2A","cell4A")>+1</button></td>
        <td> <b id="cell4A" style="display: none;"> <input type="submit" value="submit"/></b> &nbsp </td>  
    </tr>
    <tr>
        <td> <b id="cell1B">item number1</b></td>
        <td> <b id="cell2B">10</b></td>
        <td> <button id="cell3B" type="button" onClick=raisenumber("cell2B","cell4B")>+1</button></td>
        <td> <b id="cell4B" style="display: none;"> <input type="submit" value="submit"/></b> &nbsp </td>  
    </tr>
    </form>
</table>
</body> 
```

好吧，我不知道为什么每次按下按钮时它都不会打开和关闭提交按钮...

我也尝试更换

```
changedisp(s1); 
```

经过

```
s1.style.display=""; 
```

对此有何评论？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T01:55:18.273

您需要将您尝试隐藏和显示的实际元素传递给您的 changedisp 函数。在您的代码中，您只是传递元素的 ID 名称。尝试这个...

```
function raisenumber(s,s1) {
    var x;
    x = document.getElementById(s).innerHTML;
    document.getElementById(s).innerHTML = x*1 + 1;
    changedisp(document.getElementById(s1));
} 
```

notice`changedisp(document.getElementById(s1));`传递实际元素而不仅仅是 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:11:12.710

您需要将其显式设置为显示类型：

```
Section.style.display="inline"; 
```

或内联块，或块，或任何你想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T16:11:15.230

A`<B>`默认为 display:inline，因此尝试设置为“inline”而不是空字符串“”。

# azure - 在工作角色中使用 librets(PInvoke)

> ID：15006914
> 
> 赞同：1
> 
> 时间：2013-02-21T16:09:05.543
> 
> 标签：azure, pinvoke, azure-worker-roles

我正在尝试创建一个工作角色以使用 librets.net 从 RETS 服务器下载数据。librets.net 是 C++ 库 librets 的包装器。我尝试了 32 位和 64 位版本并按照这篇文章进行操作，但没有成功。我仍然收到 **BadImageFormatException**

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T16:15:54.817

`BadImageFormatExceptions` are almost **always** a 32 bit/64 bit incompatibility; If I were a betting man, I'd say you are binding the wrong version based on your `Platform` configuration in Visual Studio.

*   Choosing "Any CPU" will result in an assembly that will be JITted into a 64 bit version when loaded into a 64 bit process and a 32 bit version when loaded into a 32 bit process

*   Choosing "x86" will always result in a 32 bit assembly

I'd be willing to bet you've got:

*   "Any CPU" selected
*   A 64 bit computer
*   A 32-bit only version of the C++ library

Try switching everything over to 32 bit first; `x86` for Platform, use the 32 bit version of the library, etc.

# java - 在两个 JTable 中选择多个项目

> ID：15006917
> 
> 赞同：1
> 
> 时间：2013-02-21T16:09:07.413
> 
> 标签：java, swing, jtable

有谁知道我将如何选择一行`JTable`，然后突出显示另一行`JTable`？

```
ListSelectionListener[] listeners = leftJTable.getListeners(ListSelectionListener.class); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T03:49:59.633

是的，两个表可以共享相同的`ListSelectionModel`：

```
JTable left = new JTable(...);
JTable right = new JTable(...);
right.setSelectionModel(left.getSelectionModel()); 
```

# fortran - Intel Fortran -- 检查边界不给出行号

> ID：15006921
> 
> 赞同：9
> 
> 时间：2013-02-21T16:09:16.160
> 
> 标签：fortran, command-line-arguments, intel-fortran

我`ifort`在 mpi 环境中使用 intel fortran 编译器 ()。事实证明，当我使用 flags 编译时，我的代码出现了缓冲区溢出`-g -O2 -check bounds`。运行一段时间后，我收到以下消息：

```
forrtl: severe (408): fort: (2): Subscript #1 of the array XX has value 4 which is greater than the upper bound of 3

Image            PC                Routine            Line        Source             
program.exe      00000000006E757E  Unknown               Unknown  Unknown
program.exe      00000000006E6016  Unknown               Unknown  Unknown
program.exe      00000000006905B2  Unknown               Unknown  Unknown
program.exe      0000000000642E6B  Unknown               Unknown  Unknown
program.exe      0000000000643381  Unknown               Unknown  Unknown
program.exe      00000000005F33FB  Unknown               Unknown  Unknown
program.exe      00000000004139E7  Unknown               Unknown  Unknown
program.exe      000000000040A6B4  Unknown               Unknown  Unknown
program.exe      0000000000409D2C  Unknown               Unknown  Unknown
libc.so.6        000000380D61ECDD  Unknown               Unknown  Unknown
program.exe      0000000000409C29  Unknown               Unknown  Unknown 
```

这太好了——我现在知道我已经超支了`XX`，但是在哪里呢？使用`gfortran`,`-fbounds-check`会给我一个文件和行号。有什么办法可以得到`ifort`吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T19:19:52.867

标志可以`-traceback`与 Intel 和 Portland Group Fortran 编译器一起使用，以请求在目标文件中生成附加信息，以进行行和源回溯。当在运行时发生严重错误时，程序将尝试报告发生错误的行号和源文件，以及来自进行调用的父过程的行号和源文件。

gfortran 的等效标志是`-fbacktrace`.

# php - .htaccess 用短 url 重写（重定向器）

> ID：15006924
> 
> 赞同：0
> 
> 时间：2013-02-21T16:09:24.353
> 
> 标签：php, .htaccess, mod-rewrite

我有一个问题

```
RewriteEngine on 
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteCond %{REQUEST_FILENAME}\.php -f 
RewriteRule ^(.*)$ $1.php 
```

我的想法：

```
http://redir.com/? to execute redir.php
http://redir.com or http://redir.com/ to execute index.php 
```

如何制作htaccess？

tnx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:45:45.993

以下重写规则会将[http://redir.com?blah](http://redir.com?blah)重写为[http://redir.com/test.php](http://redir.com/test.php)。

这意味着在访问 http://redir.com 时[将](http://redir.com/test.php)执行 http://redir.com/test.php 而不是正常的[http://redir.com/index.php](http://redir.com) **，**[但](http://redir.com/index.php)前提是设置了查询字符串。**`?blah`**

 **```
<IfModule mod_rewrite.c>

RewriteEngine on

RewriteCond %{QUERY_STRING} ^blah$
RewriteRule ^index.php$ test.php [L,NC,QSA]

</IfModule> 
```**

# android - 当我将 android.permission.UPDATE_DEVICE_STATS 添加到我的 app.error 发生

> ID：15006929
> 
> 赞同：3
> 
> 时间：2013-02-21T16:09:42.907
> 
> 标签：android, android-permissions

我开发了一个需要获得`android.permission.UPDATE_DEVICE_STATS`许可的应用程序。但是，当我将此权限添加到我的应用程序的 AndroidMainfest.xml 文件时，我收到此错误：

“权限仅授予系统应用程序”

我该怎么做才能将我的应用程序更改为系统应用程序？有没有其他方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T16:11:51.173

最重要的是要知道：系统应用程序只能由已植根设备的人运行。这意味着如果您没有根设备，您将无法测试和运行自己的应用程序。

您可以通过在 AndroidManifest.xml 中设置 sharedUserId 来声明您的应用程序作为系统应用程序运行

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="[your package name]"
        android:sharedUserId="android.uid.system"> 
```

否则，您必须使用系统密钥签署您的应用程序，请参阅此线程[如何使用系统权限编译 Android 应用程序](https://stackoverflow.com/questions/3598662/how-to-compile-android-application-with-system-permissions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:11:44.300

> 我该怎么做才能将我的应用程序更改为系统应用程序。

构建您自己的固件（即 ROM 模块）并使用与该固件相同的签名密钥对您的应用程序进行签名。

或者，由于这是一个签名或系统权限，您可以根您的设备并在系统分区上安装 APK。

# mysql - MySQL INNODB 的性能非常差

> ID：15006933
> 
> 赞同：1
> 
> 时间：2013-02-21T16:09:58.013
> 
> 标签：mysql

最近我的 mysql 5.5.27 一直表现很差。我已经更改了配置中的几乎所有内容，以尝试看看它是否会在没有运气的情况下有所作为。我不断锁定表，每张表达到 6-9 个锁。我的选择查询永远需要 300 秒到 1200 秒。

**将所有内容移至 PasteBin，因为它超过了 30k 个字符** [http://pastebin.com/bP7jMd97](http://pastebin.com/bP7jMd97)

**系统活动**

90%`UPDATES`和`INSERTS` 10%`SELECT`

我的慢查询日志已备份。下面我有我的mysql信息。请让我知道是否有任何我应该添加的内容会有所帮助。

```
Server version          5.5.27-log
Protocol version        10
Connection              XX.xx.xxx via TCP/IP
TCP port                3306
Uptime:                 21 hours 39 min 40 sec

Uptime: 78246  Threads: 125  Questions: 6764445  Slow queries: 25  Opens: 1382  Flush tables: 2  Open tables: 22  Queries per second avg: 86.451 
```

**显示打开的表格**

```
+----------+---------------+--------+-------------+
| Database | Table         | In_use | Name_locked |
+----------+---------------+--------+-------------+
| aridb   | ek            |      0 |           0 |
| aridb   | ey            |      0 |           0 |
| aridb   | ts            |      4 |           0 |
| aridb   | tts           |      6 |           0 |
| aridb   | tg            |      0 |           0 |
| aridb   | tgle          |      2 |           0 |
| aridb   | ts            |      5 |           0 |
| aridb   | tg2           |      1 |           0 |
| aridb   | bts           |      0 |           0 |
+---------+--------------+-------+------------+ 
```

我碰壁了，需要一些指导。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T09:19:40.417

通过查看您的日志，问题似乎（我很确定您已经知道）是由于存在大量锁，因为数据量正在更新/选择/插入并且可能同时发生.

如果不首先了解您未提供的大量信息（例如表的大小、模式、硬件、配置、拓扑等），就很难给出性能提示——所以无论如何，这样一个广泛的问题可能不是最好的地方！

我会尽可能地保持我的回答通用，但可能要查看或尝试的事情是：

1.  运行[解释](http://dev.mysql.com/doc/refman/5.5/en/explain.html)选择查询并确保它们有选择地查找数据而不是执行全表扫描或浪费大量数据
2.  让服务器执行它的插入和更新，但创建一个用于报告的[只读副本](http://dev.mysql.com/doc/refman/5.5/en/replication.html)，这样数据就不会被锁定
3.  如果您一次更新多行，请考虑[使用提供的限制进行更新，](http://dev.mysql.com/doc/refman/5.0/en/update.html)以阻止如此多的数据被锁定
4.  如果可以，请[延迟插入](http://dev.mysql.com/doc/refman/5.5/en/insert-delayed.html)以减轻压力
5.  查看硬件修复（例如固态磁盘）以获得 IO 性能和更多内存，以便更多索引/数据可以保存在内存中或拥有更大的缓冲区

# database - 检查博客应用程序的数据库设计

> ID：15006935
> 
> 赞同：1
> 
> 时间：2013-02-21T16:10:01.543
> 
> 标签：database, foreign-keys, relational-database, primary-key, normalization

我正在创建一个博客应用程序 - 多个用户可以在其中发布、分享和喜欢博客。

我已经创建了数据库的大纲，但我不确定它是否正确。尽管阅读了外键，但我不明白如何处理外键。

有人可以帮我解决这些问题。我心中的一些问题是：-

```
- should the articles(blogs) details be stored in both 'Table Articles' and 'Table Share' at the time a user publishes an article. Will this help me in writing a php script in showing only the latest and shared articles on top of the page

- should articleid be stored in all tables? 
```

以下是我的数据库的概要

**用户**

*表用户*

```
-userid
-email
-name
-password
-date_of_registration 
```

**文章**

文章有标题和描述。后来我有计划添加图像，但不是现在。用户可以在注册或登录后发布文章。最新文章显示在页面顶部（与共享文章一起）。

*表文章*

```
-articleid
-userid
-title
-description
-datetime 
```

**注释**

用户应该可以评论其他用户的文章+发帖的人也应该可以评论

*表格注释*

```
-commentid
-articleid
-userid
-comment
-datetime 
```

**分享**

用户应该能够分享他们喜欢的文章。发表文章的人不能再次分享。如果一篇文章已被分享，则它应该位于所有文章（以及最新文章）之上。

*表共享*

```
-articleid
-userid (the person who shared it)
-datetime 
```

**喜欢**

用户应该能够喜欢任何文章。

*表喜欢*

```
-articleid
-userid (the person who clicked on the like button) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:05:13.947

1.  确保您散列用户密码并存储盐。

2.  选择一个通用的日期命名方案。“行动”_at 是一个很好的选择。例如，“registered_at”或“created_at”。您应该在单词之间使用下划线以获得最大的兼容性和易读性。

3.  您确定用户需要登录才能发表评论吗？许多博客系统只允许人们评论一个电子邮件地址。不允许评论线程？

4.  您可以将“created_at”字段添加到类似表中。确保您在 article_id 和 user_id 上都有一个主键

5.  共享如何运作？他们与谁分享？

否则，一个好的开始！

# python - Matlab检查数据库中的值

> ID：15006936
> 
> 赞同：3
> 
> 时间：2013-02-21T16:10:03.213
> 
> 标签：python, sql, matlab, postgresql

我在 Python 中有以下布尔语句：

```
db_connection.query(
   'select storage_time from traces where id=' + trace_id
).dictresult()[0]['storage_time'] == None 
```

它基本上检查是否有值`storage_time`，我想在 Matlab 中做同样的事情，但我找不到任何与 None 等效的东西。

你能帮帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-07-22T13:46:29.223

相当于 Python 中的 None 值是 NULL。而且由于您通过 Matlab 数据库工具箱连接到您的数据库，您需要指定从数据库中检索的 NULL 值如何在 Matlab 中呈现。这可以通过从 Matlab 数据库工具箱中`'NullNumberRead'` 调用函数来设置。`setdbprefs`例如，您可以这样做

```
setdbprefs('NullNumberRead','NaN') 
```

或者

```
setdbprefs('NullNumberRead','0') 
```

不幸的是，不能保证通过这种方式指定的 NULL 表示值不会与作为查询结果获得的真实非 NULL 值混淆（在这种情况下，您自己有责任保证查询始终不包含NaNs 或零，分别在其结果中的非 NULL 值中）。但是，如果您必须连接到 PostgreSQL，据我所知，至少存在一个 Matlab 和 PostgreSQL 连接器，它以完全一致的方式尊重 NULL。这是一个高性能 PostgreSQL 客户端库[PgMex](http://pgmex.alliedtesting.com/)。

在 PostgreSQL 中，值本身和值元素都可以为 NULL（对于数组类型）。这使得 Matlab 中 NULL 的表示没有预期的那么简单。

为了说明 PgMex 在 Matlab 中用来表示 NULL 的方式，让我们考虑以下示例。假设您必须检索一个查询的结果，该查询返回一个具有两个元组`myfield`的类型字段。`float8[]`并假设`myfield`第一个元组的值本身等于 NULL，而第二个元组的相应值等于`{0,NULL,NaN}`。结果如下（我们假设`connect`下面第一个命令的参数已正确更正，并且其字段中包含 type 的表已`mytable`存在 于相应的数据库中）：`myfield``float8[]`

```
% Create the database connection
dbConn=com.allied.pgmex.pgmexec('connect',[...
    'host=<yourhost> dbname=<yourdb> port=<yourport> '...
    'user=<your_postgres_username> password=<your_postgres_password>']);

pgResult=com.allied.pgmex.pgmexec('exec',dbConn,...
    'select myfield from mytable'); % perform the query

SMyField=com.allied.pgmex.pgmexec('getf',pgResult,...
    '%float8[]',0); % retrieve the results 
```

这`SMyField`是一个具有三个字段的结构`valueVec`：`isNullVec`和`isValueNullVec`。 `isValueNullVec`等于列逻辑数组`[true;false]`，即第一个元组的整个值等于 NULL，而第二个元组的值本身不等于 NULL。`isNullVec`等于以下列单元格数组： `{[];[false,true,false]}`. 通过这种方式，可以指示只有作为第二`myfield`个元组的值的数组的第二个元素是 NULL。最后，`valueVec`等于列元胞数组`{[];[0 0 NaN]}`。与此数组的第二个元素相比，只有第二个单元格的第一个和第三个元素是相关的。这是因为`isNullVec`清楚地表明第二个元素是 NULL，所以这个零值无关紧要（为每个特定的数据类型选择一些默认值）。

关于您的示例，Matlab 中的相应代码可能如下（我们假设`dbConn`上面获得的代码已经存在，并且下面的查询是正确的`storage_time`，类型字段`timestamp`和变量 trace_id 已经定义）：

```
pgResult=com.allied.pgmex.pgmexec('exec',dbConn,...
    ['select storage_time from traces where id=' + trace_id]); % perform the query
SStorageTime=com.allied.pgmex.pgmexec('getf',pgResult,...
    '%timestamp',0); % retrieve the results
% check that the value for the first tuple is not NULL
isStorageTime=~SStorageTime.isValueNullVec(1); 
```

因此，仅检查就足够了`isValueNullVec`。

[编辑： PgMex](http://pgmex.alliedtesting.com/)有免费的学术许可证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T20:30:37.023

MATLAB 的数据库工具箱具有如何处理 NULL 值的首选项。根据这些设置，您可以获得不同的值。有关详细信息，请参阅[SETDBPREFS](http://www.mathworks.com/help/database/ug/setdbprefs.html#bq42vl0)。您也可以[在 GUI 中更改首选项](http://www.mathworks.com/help/database/ug/working-with-preferences.html)。

默认情况下，如果您将数据读取为数字，您将获得 NaN，如果您读取为字符串，则会获得“NULL”字符串。[在第一种情况下，使用ISNAN](http://www.mathworks.com/help/matlab/ref/isnan.html)函数检查 NaN 。

```
null_idx = isnan(fetcheddata); 
```

对于字符串使用[STRCMP](http://www.mathworks.com/help/matlab/ref/strcmp.html)：

```
null_idx= strcmp(upper(fetcheddata), 'NULL'); 
```

此外，如果您以元胞数组的形式获取数据，您可能需要使用 CELLFUN 处理它们或使用[CELL2MAT](http://www.mathworks.com/help/matlab/ref/cell2mat.html)[转换](http://www.mathworks.com/help/matlab/ref/cellfun.html)为矩阵。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T16:38:54.500

如果您使用此查询，您可以检查`True`or `False`in 而不是 None：

```
trace_id_exists = db_connection.query("""\
    select exists (
        select 1
        from traces
        where id = %s
        ) "exists"
    """ % trace_id
).dictresult()[0]['exists']

if trace_id_exists:
    ... 
```

您还可以返回其他值，例如 1 或 0。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T16:38:14.473

Matlab的习语通常是使用`isempty()`函数。

```
isempty(somefunction(someargument)) 
```

`true`如果返回`somefunction(someargument)`任何空结果，则返回，`false`否则返回。

我没有太多使用 Matlab DB 工具箱，所以我不确定你的 Python 语句的完整翻译是什么。

# caching - 如何在 django-tastypie 资源中缓存脱水方法？

> ID：15006937
> 
> 赞同：0
> 
> 时间：2013-02-21T16:10:04.250
> 
> 标签：caching, django-cache, tastypie

我正在使用 django-tastypie 为模型制作资源。

你能告诉我如何缓存我的 ArtistResource 的脱水方法吗？我应该提供哪些额外的 django 设置来使用缓存？

非常感谢。我以前从未使用过缓存，所以我对此感到气馁。

```
class ArtistResource(DehydrateImageMixin, SearchableResource):
    class Meta:        
        filtering = {
            "id": ALL_WITH_RELATIONS,
        }
        queryset = Artist.objects.all()
        resource_name = 'artist'
        allowed_methods = ['get']

    def dehydrate(self, bundle):
        bundle = super(ArtistResource, self).dehydrate(bundle)
        count_tracks = bundle.obj.audio_tracks.count()
        bundle.data['count_tracks'] = ungettext(
            '%(count)d %(track)s', '%(count)d %(track)s', count_tracks
        ) % {'count': count_tracks, 'track': 'track'}
        return bundle 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:14:38.607

请参考这个文档。这个很清楚

[http://django-tastypie.readthedocs.org/en/latest/caching.html](http://django-tastypie.readthedocs.org/en/latest/caching.html)

只需添加

`cache = SimpleCache(timeout=10)`到你的元做缓存..

# sql - SQL 查询删除所需的行

> ID：15006939
> 
> 赞同：0
> 
> 时间：2013-02-21T16:10:06.213
> 
> 标签：sql, sql-server, tsql

我有这个查询。它创建了一个日历，用于比较与 DOS 之间的医疗索赔，以计算不同的天数。

当我运行它时，我似乎删除了一些没有出现在我的结果中的行。

谁能明白为什么这些行不会在此查询中计算在内？

```
ICN 从服务日期到服务日期 详细信息状态代码
12345 20121102 12:00:00 20121103 12:00:00
12345 20121102 12:00:00 20121103 12:00:00
12345 20121102 12:00:00 20121103 12:00:00
12345 20121102 12:00:00 20121103 12:00:00
12345 20121102 12:00:00 20121103 12:00:00
12345 20121102 12:00:00 20121103 12:00:00
12345 20121102 12:00:00 20121103 12:00:00
12345 20121102 12:00:00 20121103 12:00:00
```

```
CREATE TABLE #Calendar1(Dt DATETIME NOT NULL PRIMARY KEY);
;WITH cte AS
(
    SELECT CAST('20120101' AS DATETIME) AS c 
    UNION ALL
    SELECT DATEADD(dd,1,c) FROM cte 
    WHERE c < '20131231'
)
INSERT INTO #Calendar1 SELECT c FROM cte OPTION  (MAXRECURSION 1);

SELECT
    ICN,
    COUNT(DISTINCT Dt) AS Days
FROM
    AllOPBYDOS s
    INNER JOIN #Calendar1 c ON
        s.[from Date of service] >= c.Dt AND s.[to Date of service] < c.Dt+1
--Where [Detail Status Code] = 'p'

GROUP BY
    ICN; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:14:19.227

当我在 SQL Server 2008 上运行日历查询时，它只产生一行。我想你想要：

```
INSERT INTO #Calendar1 SELECT c FROM cte OPTION  (MAXRECURSION 0); 
```

对于删除的行，您确定它们在日历范围内有日期吗？您可能应该进行左外连接并检查极端情况：

```
SELECT ICN, COUNT(DISTINCT Dt) AS Days,
       sum(case when [from Date of service] not between const.mindt and const.maxdt or
                     [to Date of service] not between const.mindt and const.maxdt
                then 1
                else 0
           end) as OutOfRangeRecords
FROM AllOPBYDOS s left outer JOIN
     #Calendar1 c
     ON s.[from Date of service] >= c.Dt AND s.[to Date of service] < c.Dt+1 cross join
     (select MAX(dt) as maxdt, MIN(dt) as mindt from #Calendar1) const
GROUP BY ICN; 
```

# antlr - 在范围和语法错误中使用浮点数？

> ID：15006944
> 
> 赞同：2
> 
> 时间：2013-02-21T16:10:19.063
> 
> 标签：antlr, antlr3

我正在尝试使用 ANTLR 将 LALR 语法转换为 LL，但遇到了一些问题。到目前为止，我认为将表达式转换为自上而下的方法对我来说是直截了当的。问题是当我在浮点数中包含 Range (1..10) 和 (1.0..10.0) 时。

我尝试使用此处找到的答案，但不知何故，它甚至无法正确运行我的代码，更不用说解决一系列浮点数，即（float..float）。 [ANTLR 中的浮点文字和范围参数](https://stackoverflow.com/questions/8639783/float-literal-and-range-parameter-in-antlr)

附件是我的语法示例，它只关注这个问题。

```
grammar Test;

options {
  language = Java;
  output = AST;
}

parse: 'in' rangeExpression ';'
     ;

rangeExpression : expression ('..' expression)?
                ;

expression : addingExpression (('=='|'!='|'<='|'<'|'>='|'>') addingExpression)*
           ;

addingExpression : multiplyingExpression (('+'|'-') multiplyingExpression)*
                 ;

multiplyingExpression : unaryExpression 
                        (('*'|'/'|'div') unaryExpression)*
                      ;

unaryExpression: ('+'|'-')* primitiveElement;   

primitiveElement : literalExpression
                 | id ('.' id)?
                 | '(' expression ')'
                 ;  

literalExpression : NUMBER
                  | BOOLEAN_LITERAL
                  | 'infinity'
                  ;              

id : IDENTIFIER
   ;

// L E X I C A L   R U L E S    
Range
 : '..'
 ;

NUMBER 
    : (DIGITS Range) => DIGITS          {$type=DIGITS;} 
    | (FloatLiteral) => FloatLiteral    {$type=FloatLiteral;}
    | DIGITS                            {$type=DIGITS;}
    ;   

// fragments
fragment FloatLiteral : Float;
fragment Float
 : DIGITS ( options {greedy = true; } : '.' DIGIT* EXPONENT?)
 | '.' DIGITS EXPONENT?
 | DIGITS EXPONENT
 ;

BOOLEAN_LITERAL : 'false' 
                | 'true'
                ;

IDENTIFIER : LETTER (LETTER | DIGIT)*;

WS  :   ( ' '
        | '\t'
        | '\r'
        | '\n'
        ) {$channel=HIDDEN;}
    ;
fragment LETTER : ('a'..'z' | 'A'..'Z' | '_') ;
fragment DIGITS: DIGIT+;
fragment DIGIT : '0'..'9';
fragment EXPONENT : ('e'|'E') ('+'|'-')? ('0'..'9')+ ; 
```

它甚至不服用的任何原因：

```
in 10; 
```

或者

```
in 10.0; 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T17:32:09.283

以下几点是不正确的：

*   您永远不会匹配规则`FloatLiteral`中的a`literalExpression`
*   在你的每一个选择中，`NUMBER`你都在改变令牌的类型，因此`NUMBER`永远不会创建一个令牌

像这样的东西应该适用于`11..22`和`1.1..2.2`：

```
...

literalExpression : INT
                  | BOOLEAN_LITERAL
                  | FLOAT
                  | 'infinity'
                  ;              

id : IDENTIFIER
   ;

// L E X I C A L   R U L E S    
Range
 : '..'
 ;

INT 
    : (DIGITS Range)=> DIGITS
    | DIGITS (('.' DIGITS EXPONENT? | EXPONENT) {$type=FLOAT;})?
    ; 

BOOLEAN_LITERAL : 'false' 
                | 'true'
                ;

IDENTIFIER : LETTER (LETTER | DIGIT)*;

WS  :   ( ' '
        | '\t'
        | '\r'
        | '\n'
        ) {$channel=HIDDEN;}
    ;
fragment LETTER : ('a'..'z' | 'A'..'Z' | '_') ;
fragment DIGITS: DIGIT+;
fragment DIGIT : '0'..'9';
fragment EXPONENT : ('e'|'E') ('+'|'-')? ('0'..'9')+ ;
fragment FLOAT : ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T17:58:06.147

关于处理的问题`(1.0 .. 10.0)`：

请注意，解析器规则`primitiveElement`将替代定义为`'(' expression ')'`，但规则`expression`永远无法到达规则`rangeExpression`。

考虑重新定义`expression`，`rangeExpression`像这样：

```
expression : rangeExpression
           ;

rangeExpression : compExpression ('..' compExpression)?
                ;

compExpression : addingExpression (('=='|'!='|'<='|'<'|'>='|'>') addingExpression)*
               ; 
```

这确保了`expression`规则位于所有形式的表达式之上，并且将在括号中按预期工作。

# javascript - JavaScript - 结束播放视频

> ID：15006945
> 
> 赞同：0
> 
> 时间：2013-02-21T16:10:20.547
> 
> 标签：javascript, jquery

我需要能够创建一个基本上说的 if 语句：

```
if (var video == end)
{
playVideo('videoname');
} 
```

我在想它实际上可能必须在一个循环中，所以一旦视频结束它就会移动到下一个，但是使用这个 if 语句它只会执行一次。

我只有 c++ 方面的经验（4 个月），而 JavaScript 有点不同。我正在为网站使用全屏背景播放器，代码如下：

HTML 初始化 JS

```
<script>
    $(document).ready(function() {
        $('dl').toggle();
        $('h2').bind('click', function(event) {
            event.preventDefault();
            $(this).next('dl').slideToggle(500, function() {
                $('.video-background').videobackground('resize');
            });
        });
        $('body').prepend('<div class="video-background"></div>');
        $('.video-background').videobackground({
            videoSource: [['video/video-1.mp4'],
                ['video/video-1.webm'], 
                ['video/video-1.flv'], 
                ['video/video-1.wmv'], 
                ['video/video-1.mov'], 
                ['video/video-1.ogv']], 
                controlPosition: '.video-control-test',
            poster: '',
            loadedCallback: function() {
                $(this).videobackground('');
            }
        });
    });
</script> 
```

JavaScript 文件

```
/*!
 * jQuery Video Background plugin
 * https://github.com/georgepaterson/jquery-videobackground
 *
 * Copyright 2012, George Paterson
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 */
(function ($, document, window) {
    /*
     * Resize function.
     * Triggered if the boolean setting 'resize' is true.
     * It will resize the video background based on a resize event initiated on the browser window.
     *
     */
    "use strict";
    function resize(that) {
        var documentHeight = $(document).height(),
            windowHeight = $(window).height();
        if (that.settings.resizeTo === 'window') {
            $(that).css('height', windowHeight);
        } else {
            if (windowHeight >= documentHeight) {
                $(that).css('height', windowHeight);
            } else {
                $(that).css('height', documentHeight);
            }
        }
    }
    /*
     * Preload function.
     * Allows for HTML and JavaScript designated in settings to be used while the video is preloading.
     *
     */
    function preload(that) {
        $(that.controlbox).append(that.settings.preloadHtml);
        if (that.settings.preloadCallback) {
            (that.settings.preloadCallback).call(that);
        }
    }
    /*
     * Play function.
     * Can either be called through the default control interface or directly through the public method.
     * Will set the video to play or pause depending on existing state.
     * Requires the video to be loaded. 
     *
     */
    function play(that) {
        var video = that.find('video').get(0),
            controller;
        if (that.settings.controlPosition) {
            controller = $(that.settings.controlPosition).find('.ui-video-background-play a');
        } else {
            controller = that.find('.ui-video-background-play a');
        }
        if (video.paused) {
            video.play();
            controller.toggleClass('ui-icon-pause ui-icon-play').text(that.settings.controlText[1]);
        } else {
            if (video.ended) {
                video.play();
                controller.toggleClass('ui-icon-pause ui-icon-play').text(that.settings.controlText[1]);
            } else {
                video.pause();
                controller.toggleClass('ui-icon-pause ui-icon-play').text(that.settings.controlText[0]);
            }
        }
    }
    /*
     * Mute function.
     * Can either be called through the default control interface or directly through the public method.
     * Will set the video to mute or unmute depending on existing state.
     * Requires the video to be loaded.
     *
     */
    function mute(that) {
        var video = that.find('video').get(0),
            controller;
        if (that.settings.controlPosition) {
            controller = $(that.settings.controlPosition).find('.ui-video-background-mute a');
        } else {
            controller = that.find('.ui-video-background-mute a');
        }
        if (video.volume === 0) {
            video.volume = 1;
            controller.toggleClass('ui-icon-volume-on ui-icon-volume-off').text(that.settings.controlText[2]);
        } else {
            video.volume = 0;
            controller.toggleClass('ui-icon-volume-on ui-icon-volume-off').text(that.settings.controlText[3]);
        }
    }
    /*
     * Loaded events function.
     * When the video is loaded we have some default HTML and JavaScript to trigger.    
     *
     */
    function loadedEvents(that) {
        /*
         * Trigger the resize method based if the browser is resized.
         *
         */
        if (that.settings.resize) {
            $(window).on('resize', function () {
                resize(that);
            });
        }
        /*
         * Default play/pause control   
         *
         */
        that.controls.find('.ui-video-background-play a').on('click', function (event) {
            event.preventDefault();
            play(that);
        });
        /*
         * Default mute/unmute control  
         *
         */
        that.controls.find('.ui-video-background-mute a').on('click', function (event) {
            event.preventDefault();
            mute(that);
        });
        /*
         * Firefox doesn't currently use the loop attribute.
         * Loop bound to the video ended event.
         *
         */
        if (that.settings.loop) {
            that.find('video').on('ended', function () {
                $(this).get(0).play();
                $(this).toggleClass('paused').text(that.settings.controlText[1]);
            });
        }
    }
    /*
     * Loaded function.
     * Allows for HTML and JavaScript designated in settings to be used when the video is loaded.
     *
     */
    function loaded(that) {
        $(that.controlbox).html(that.controls);
        loadedEvents(that);
        if (that.settings.loadedCallback) {
            (that.settings.loadedCallback).call(that);
        }
    }
    /*
     * Public methods accessible through a string declaration equal to the method name.
     *
     */
    var methods = {
        /*
         * Default initiating public method.
         * It will created the video background, default video controls and initiate associated events. 
         *
         */
        init: function (options) {
            return this.each(function () {
                var that = $(this),
                    compiledSource = '',
                    attributes = '',
                    data = that.data('video-options'),
                    image,
                    isArray;
                if (document.createElement('video').canPlayType) {
                    that.settings = $.extend(true, {}, $.fn.videobackground.defaults, data, options);
                    if (!that.settings.initialised) {
                        that.settings.initialised = true;
                        /*
                         * If the resize option is set.
                         * Set the height of the container to be the height of the document
                         * The video can expand in to the space using min-height: 100%;
                         *
                         */
                        if (that.settings.resize) {
                            resize(that);
                        }
                        /*
                         * Compile the different HTML5 video attributes.    
                         *
                         */
                        $.each(that.settings.videoSource, function () {
                            isArray = Object.prototype.toString.call(this) === '[object Array]';
                            if (isArray && this[1] !== undefined) {
                                compiledSource = compiledSource + '<source src="' + this[0] + '" type="' + this[1] + '">';
                            } else {
                                if (isArray) {
                                    compiledSource = compiledSource + '<source src="' + this[0] + '">';
                                } else {
                                    compiledSource = compiledSource + '<source src="' + this + '">';
                                }
                            }
                        });
                        attributes = attributes + 'preload="' + that.settings.preload + '"';
                        if (that.settings.poster) {
                            attributes = attributes + ' poster="' + that.settings.poster + '"';
                        }
                        if (that.settings.autoplay) {
                            attributes = attributes + ' autoplay="autoplay"';
                        }
                        if (that.settings.loop) {
                            attributes = attributes + ' loop="loop"';
                        }
                        $(that).html('<video ' + attributes + '>' + compiledSource + '</video>');
                        /*
                         * Append the control box either to the supplied that or the video background that. 
                         *
                         */
                        that.controlbox = $('<div class="ui-video-background ui-widget ui-widget-content ui-corner-all"></div>');
                        if (that.settings.controlPosition) {
                            $(that.settings.controlPosition).append(that.controlbox);
                        } else {
                            $(that).append(that.controlbox);
                        }
                        /*
                         *  HTML string for the video controls.' + that.settings.controlText[2] + '
                         *' + that.settings.controlText[1] + '
                         */
                        that.controls = $('<ul class="ui-video-background-controls"><li class="ui-video-background-play">'
                            + '<a class="ui-icon ui-icon-pause" href="#"></a>'
                            + '</li><li class="ui-video-background-mute">'
                            + '<a class="ui-icon ui-icon-volume-on" href="#"></a>'
                            + '</li></ul>');
                        /*
                         * Test for HTML or JavaScript function that should be triggered while the video is attempting to load.
                         * The canplaythrough event signals when when the video can play through to the end without disruption.
                         * We use this to determine when the video is ready to play.
                         * When this happens preloaded HTML and JavaSCript should be replaced with loaded HTML and JavaSCript.
                         *
                         */
                        if (that.settings.preloadHtml || that.settings.preloadCallback) {
                            preload(that);
                            that.find('video').on('canplaythrough', function () {
                                /*
                                 * Chrome doesn't currently using the autoplay attribute.
                                 * Autoplay initiated through JavaScript.
                                 *
                                 */
                                if (that.settings.autoplay) {
                                    that.find('video').get(0).play();
                                }
                                loaded(that);
                            });
                        } else {
                            that.find('video').on('canplaythrough', function () {
                                /*
                                 * Chrome doesn't currently using the autoplay attribute.
                                 * Autoplay initiated through JavaScript.
                                 *
                                 */
                                if (that.settings.autoplay) {
                                    that.find('video').get(0).play();
                                }
                                loaded(that);
                            });
                        }
                        that.data('video-options', that.settings);
                    }
                } else {
                    that.settings = $.extend(true, {}, $.fn.videobackground.defaults, data, options);
                    if (!that.settings.initialised) {
                        that.settings.initialised = true;
                        if (that.settings.poster) {
                            image = $('<img class="ui-video-background-poster" src="' + that.settings.poster + '">');
                            that.append(image);
                        }
                        that.data('video-options', that.settings);
                    }
                }
            });
        },
        /*
         * Play public method.
         * When attached to a video background it will trigger the associated video to play or pause.
         * The event it triggeres is dependant on the existing state of the video.
         * This method can be triggered from an event on a external that.
         * If the that has a unique controlPosition this will have to be declared.
         * Requires the video to be loaded first.
         *
         */
        play: function (options) {
            return this.each(function () {
                var that = $(this),
                    data = that.data('video-options');
                that.settings = $.extend(true, {}, data, options);
                if (that.settings.initialised) {
                    play(that);
                    that.data('video-options', that.settings);
                }
            });
        },
        /*
         * Mute public method.
         * When attached to a video background it will trigger the associated video to mute or unmute.
         * The event it triggeres is dependant on the existing state of the video.
         * This method can be triggered from an event on a external that.
         * If the that has a unique controlPosition this will have to be declared.
         * Requires the video to be loaded first.
         *
         */
        mute: function (options) {
            return this.each(function () {
                var that = $(this),
                    data = that.data('video-options');
                that.settings = $.extend(true, {}, data, options);
                if (that.settings.initialised) {
                    mute(that);
                    that.data('video-options', that.settings);
                }
            });
        },
        /*
         * Resize public method.
         * When invoked will resize the video background to the height of the document or window.
         * The video background height affects the height of the document.
         * Affecting the video background's ability to negatively resize.  
         *
         */
        resize: function (options) {
            return this.each(function () {
                var that = $(this),
                    data = that.data('video-options');
                that.settings = $.extend(true, {}, data, options);
                if (that.settings.initialised) {
                    resize(that);
                    that.data('video-options', that.settings);
                }
            });
        },
        /*
         * Destroy public method.
         * Will unbind event listeners and remove HTML created by the plugin.
         * If the that has a unique controlPosition this will have to be declared.
         *
         */
        destroy: function (options) {
            return this.each(function () {
                var that = $(this),
                    data = that.data('video-options');
                that.settings = $.extend(true, {}, data, options);
                if (that.settings.initialised) {
                    that.settings.initialised = false;
                    if (document.createElement('video').canPlayType) {
                        that.find('video').off('ended');
                        if (that.settings.controlPosition) {
                            $(that.settings.controlPosition).find('.ui-video-background-mute a').off('click');
                            $(that.settings.controlPosition).find('.ui-video-background-play a').off('click');
                        } else {
                            that.find('.ui-video-background-mute a').off('click');
                            that.find('.ui-video-background-play a').off('click');
                        }
                        $(window).off('resize');
                        that.find('video').off('canplaythrough');
                        if (that.settings.controlPosition) {
                            $(that.settings.controlPosition).find('.ui-video-background').remove();
                        } else {
                            that.find('.ui-video-background').remove();
                        }
                        $('video', that).remove();
                    } else {
                        if (that.settings.poster) {
                            that.find('.ui-video-background-poster').remove();
                        }
                    }
                    that.removeData('video-options');
                }
            });
        }
    };
    /*
     * The video background namespace.
     * The gate way for the plugin. 
     *
     */
    $.fn.videobackground = function (method) {
        /*
         * Allow for method calling.
         * If not a method initialise the plugin.
         *
         */
        if (!this.length) {
            return this;
        }
        if (methods[method]) {
            return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));
        }
        if (typeof method === 'object' || !method) {
            return methods.init.apply(this, arguments);
        }
        $.error('Method ' +  method + ' does not exist on jQuery.videobackground');
    };
    /*
     * Default options, can be extend by options passed to the function.
     *
     */
    $.fn.videobackground.defaults = {
        videoSource: [],
        poster: null,
        autoplay: true,
        preload: 'none',
        loop: false,a
        controlPosition: null,
        resize: true,
        preloadHtml: '',
        preloadCallback: null,
        loadedCallback: null,
    };
}(jQuery, document, window)); 
```

我正在尝试一些事情：

```
function nextvid(that)
{
    if (var video==ended)
        {

        }

} 
```

我只是不知道要使用哪些函数和变量！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:28:22.170

在每个视频上绑定到`ended`事件。就像是

```
$('#videoElm').bind("ended",function(e){
     playNext();
}) 
```

## 更新

更新了代码以反映评论[http://jsfiddle.net/joshK/EcqJ3/7/](http://jsfiddle.net/joshK/EcqJ3/7/)

```
var videoSources = [//array of sources to use in the loop
   ["http://www.w3schools.com/html/mov_bbb.mp4","http://www.w3schools.com/html/mov_bbb.oog"],
   ["http://www.w3schools.com/html/movie.mp4","http://www.w3schools.com/html/movie.wmv"]
];

var videoPtr = 0;//keeps count which video we are upto

$(function () {
   $('body').prepend('<div class="video-background"></div>');
   videoLooper();
});
function videoLooper(){
   if(videoPtr >= videoSources.length){//if we got to the last video
      videoPtr = 0;//reset to first video
   }

   $(".video-background").videobackground({
      videoSource: videoSources[videoPtr++],
      controlPosition: '.video-control-test',
      poster: '',
      loadedCallback: function () {
         var that = $(this);
         $(this).find("video").on("ended",function(){
            that.videobackground('destroy');
            videoLooper();
          });
          $(this).videobackground('');
      }
  });
} 
```

# symfony - 如何在 Symfony2 的监听器中获取 %secret% 参数？

> ID：15006947
> 
> 赞同：2
> 
> 时间：2013-02-21T16:10:21.977
> 
> 标签：symfony, parameters

我正在使用 Symfony 2.1.7 并且我已经覆盖`UsernamePasswordFormAuthenticationListener`了用于登录目的的类。我想`parameters.yml`在这个监听器类中获取 symfony 的 secret 参数（设置在 中）的值。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T22:25:08.227

在声明侦听器（ service.yml |xml ）的地方，您可以将容器添加为构造函数参数，然后从容器中调用

```
$container->getParameter('secret'); 
```

或者其他选项是，您可以在声明中使用 %secret% 传递参数本身

# joomla - 从 json 数组 joomla 中获取不同的日期

> ID：15006948
> 
> 赞同：0
> 
> 时间：2013-02-21T16:10:22.457
> 
> 标签：joomla, joomla2.5

我的组件将 json 数组保存在数据库中：

所以我想从所有领域获得不同的日期。

数据库字段包含如下值：

a:3:{i:0;s:16:"2013-02-24 00:00";i:1;s:16:"2013-02-23 00:00";i:2;s:16 :"2013-02-22 00:00";}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T00:28:56.043

您所拥有的是序列化数据，而不是 json 编码。我不相信有一种方法可以使用 mysql 查询从数据库中获取日期（因此大多数人建议您不要以序列化甚至 json 形式存储数据）。

您可能希望从数据库中获取数据（使用 $query 变量是您需要从数据库中获取数据的查询。由于我不知道您的数据库是什么样的，所以我不打算编写询问）

```
$rows = JFactory::getDbo()->setQuery($query)->loadObjectList();

foreach ($rows as $row) {
    $dates = unserialize($row->date_column);
    // do something with the $dates variable, which is now an array of the three dates.
} 
```

# javascript - $.ajax 请求总是 401（未经授权）

> ID：15006953
> 
> 赞同：1
> 
> 时间：2013-02-21T16:10:32.127
> 
> 标签：javascript, jquery

我正在尝试将[Kippt API](https://kippt.com/developers/)与 $.ajax 一起使用。

当我使用

```
curl -X GET -H "X-Kippt-Username:graph1ZzLle" -H "X-Kippt-API-Token:mytoken" https://kippt.com/api/clips/ 
```

一切运行良好，我收到了 JSON 响应。

但是，当涉及到将 jQuery 与此脚本一起使用时：

```
<script type="text/javascript">
var username = "graph1ZzLle";
var token = "*******";

$(document).ready(function() {
    $.ajax({
        url: "https://kippt.com/api/clips/?list=all&include_data=list&limit=10",
        type: 'GET',
        dataType: 'jsonp',
        async: false,
        beforeSend: function(xhr) {
            xhr.setRequestHeader('X-Kippt-Username', username)
            xhr.setRequestHeader('X-Kippt-API-Token', token)
        },
        success: function(data) {

            for(var i = 0; i < data.objects.length; i++) {

                var row = $("<tr/>");
                var date = new Date(data.objects[i]["created"] * 1000); //js works in milliseconds

                $("<td/>").text(date.toLocaleDateString()).appendTo(row);
                $("<td/>").text(data.objects[i]["list"]["title"]).appendTo(row);
                $("<td/>").append("<a href=" + data.objects[i]["url"] + " >" + data.objects[i]["title"] + "</a>").appendTo(row);

                if(data.objects[i]["notes"]) {
                    $("<td/>").text(data.objects[i]["notes"]).appendTo(row);
                } else {
                    $("<td/>").text("-----").appendTo(row);
                }

                row.appendTo("#kippt");
            }
        },
    });
});
</script> 
```

我总是遇到 401（未经授权）错误。我确定我使用了正确的用户名和令牌。到底是怎么回事 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T16:18:17.687

您不能使用 JSONP 数据类型设置标头。JSONP 请求是通过将`<script>`标签插入到文档中创建的，并将 src 设置为目标位置，并且由于您无法使用标签传递标头，因此您的标头设置将被忽略。

要么使用 CORS 和 JSON，要么使用为您获取数据的服务器端代理。

# java - 为包含具有相同分隔符的其他字符的字符串拆分带有分隔符的字符串

> ID：15006954
> 
> 赞同：1
> 
> 时间：2013-02-21T16:10:33.780
> 
> 标签：java, regex, split, stringtokenizer

我正在尝试拆分一个字符串，例如：“@WWP2-@POLUXDATAWWP3-TTTTTW@K826”以在执行代码段时提取@WWP2-@POLUXDATAWWP3-TTTTTW 和 826 个字符串：

```
String expression = "@WWP2-@POLUXDATAWWP3-TTTTTW@K826";
        StringTokenizer tokenizer = new StringTokenizer(expression, "@K");
            if (tokenizer.countTokens() > 0) {
                while (tokenizer.hasMoreTokens()) {
                    System.out.println(tokenizer.nextToken());
                }
            } 
```

同时期望结果是

WWP2-POLUXDATAWWP3-TTTTTW
826

我越来越：

WWP2-
POLUXDATAWWP3-TTTTTW
826

关于如何获得确切的两个字符串的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T16:17:50.603

```
 String[] str = expression.split("@K");
    System.out.println(Arrays.toString(str)); 
```

试试 String#split("@K");

输出：

```
[@WWP2-@POLUXDATAWWP3-TTTTTW, 826] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:20:10.913

```
String expression = "@WWP2-@POLUXDATAWWP3-TTTTTW@K826";

String [] strArr = expression.split("@K");

for( int i = 0; i < strArr.length; i++ ) {
    System.out.println( strArr[i] );
} 
```

将`StringTokenizer`字符串拆分为分隔符字符串中的所有单个字符，即 on`@` *和* `K`。

另请参阅[为什么不推荐使用 StringTokenizer？](https://stackoverflow.com/questions/6983856/why-is-stringtokenizer-deprecated).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T16:24:27.987

`StringTokenizer`如果它包含多个字符，将使用给定的分隔符参数作为一组字符。在您的情况下，它会将您的字符串拆分为`@`和`K`，而`K`不一定要遵循`@`。

# jsf - JSF 中的自定义 Facelet 组件

> ID：15006955
> 
> 赞同：5
> 
> 时间：2013-02-21T16:10:47.657
> 
> 标签：jsf, jsf-2, facelets

是否可以创建自定义 JSF 核心 Facelet 组件。之类`<custom:composition>`的`<ui:composition>`, 或`<custom:include>`for`<ui:include>` 如果有人能告诉我所涉及的步骤，那将很有帮助。

提前致谢，

考沙尔

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-21T16:45:10.503

它本质上是标签处理程序。即从[`TagHandler`](http://docs.oracle.com/javaee/7/api/javax/faces/view/facelets/TagHandler.html).

这是一个 Hello World 标记处理程序。

`com.example.HelloTagHandler`

```
public class HelloTagHandler extends TagHandler {

    public HelloTagHandler(TagConfig config) {
        super(config);
    }

    @Override
    public void apply(FaceletContext context, UIComponent parent) throws IOException {
        // Do your job here. This example dynamically adds another component to the parent.
        if (ComponentHandler.isNew(parent)) {
            UIOutput child = new HtmlOutputText();
            child.setValue("Hello World");
            parent.getChildren().add(child);
        }

        nextHandler.apply(context, parent); // Delegate job further to first next tag in tree hierarchy.
    }

} 
```

`/WEB-INF/my.taglib.xml`

```
<?xml version="1.0" encoding="UTF-8"?>
<facelet-taglib
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facelettaglibrary_2_0.xsd"
    version="2.0"
>
    <namespace>http://example.com/my</namespace>
    <tag>
        <tag-name>hello</tag-name>
        <handler-class>com.example.HelloTagHandler</handler-class>
    </tag>
</facelet-taglib> 
```

`/WEB-INF/web.xml``my.taglib.xml`（注意：当在`/META-INF`JAR 文件的文件夹中时，这部分不是强制性的，`/WEB-INF/lib`就像 JSF 组件库一样）：

```
<context-param>
    <param-name>javax.faces.FACELETS_LIBRARIES</param-name>
    <param-value>/WEB-INF/my.taglib.xml</param-value>
</context-param> 
```

用途`/some.xhtml`

```
<html ... xmlns:my="http://example.com/my">
...
<my:hello /> 
```

要查看 和 的 Mojarra 实现的源代码[`<ui:composition>`](http://grepcode.com/file/repo1.maven.org/maven2/org.glassfish/javax.faces/2.2.11/com/sun/faces/facelets/tag/ui/CompositionHandler.java/)，[`<ui:include>`](http://grepcode.com/file/repo1.maven.org/maven2/org.glassfish/javax.faces/2.2.11/com/sun/faces/facelets/tag/ui/IncludeHandler.java)请单击链接。

### 也可以看看：

*   [何时使用 <ui:include>、标记文件、复合组件和/或自定义组件？](https://stackoverflow.com/questions/6822000/when-to-use-uiinclude-tag-files-composite-components-and-or-custom-componen)

# java - 如何在java中识别数组中的多数成员

> ID：15006956
> 
> 赞同：-1
> 
> 时间：2013-02-21T16:10:48.047
> 
> 标签：java, arrays, integer

我有一个整数数组，并且有一个或多个元素具有相同的整数值。我想确定其他整数中的多数整数值。这是如何实现的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T16:27:49.460

我不确定您是否正在寻找“最佳”解决方案，但是下面的代码有效。

方法：

```
public static Integer majority(int[] array) {
    Map<Integer, Integer> count = new HashMap<Integer, Integer>();
    for (int number : array) {
        if (count.containsKey(number)) {
        count.put(number, count.get(number) + 1);
        } else {
        count.put(number, 1);
        }
    }
    Integer majority = null;
    Integer majorityCount = null;
    for (Integer key : count.keySet()) {
        if (count.get(key) > array.length / 2) {
        majority = key;
        majorityCount = count.get(key);
        }
    }
    return majority;
} 
```

这是测试运行器：

```
public static void main(String[] args) {
    int[] array = {0, 1, 3, 4, 2, 1, 0, 0, 0, 10, 10, 0, 0};
    int[] array1 = {0, 1, 3, 4, 2, 1, 0, 0, 0, 0, 0};
    System.out.println(majority(array));
    System.out.println(majority(array1));
} 
```

和输出

```
null
0 
```

我希望这就是你要找的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T16:43:40.767

下面的代码将告诉您多数整数是什么以及它在数组中出现的次数。显然我没有考虑优化解决方案，因为它没有被问到。

```
 int array[] = new int[10];

    array[0] = 0;
    array[1] = 9;
    array[2] = 1;
    array[3] = 2;
    array[4] = 3;
    array[5] = 6;
    array[6] = 7;
    array[7] = 8;
    array[8] = 5;
    array[9] = 4;

    HashMap map = new HashMap();

    int majorInt = 0;
    int maxCounter = 0;
    boolean majorIntFound = false;

    for (int i = 0; i < array.length; i++) {
        Integer counter = (Integer) map.get(array[i]);

        if (counter != null) {
            majorIntFound = true;
            int counterInt = counter.intValue();

            map.put(array[i], ++counterInt);

            if (counterInt > maxCounter) {
                maxCounter = counterInt;
                majorInt = array[i];
            }

        } else {
            map.put(array[i], new Integer(1));
        }

    }
    if (majorIntFound)
        System.out.println(" Majority  int is: " + majorInt + "  counter: " + maxCounter);
    else
        System.out.println("No majority Int"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T16:48:42.983

我想你想要这样的东西？

```
import java.util.Random;
public class Majority{
    public static void main(String [] args){

        int [] random = new int[100];
        Random r = new Random();
        for (int i : random){
            int j = r.nextInt(21);
            random[i] = j;
        }

        int majority = 0, currentCount = 0, highestCount = 0;
        for (int i : random){
            for (int j : random){
                if(random[i] == random[j])
                    currentCount++;
            }       
            if(currentCount > highestCount){
                majority = random[i];
                highestCount = currentCount;
            }
        }
        System.out.print("The majority number is: " + majority);
    }
} 
```

# javascript - 如何创建在 3-D 查看器中单击模型时出现的名称标签？

> ID：15006957
> 
> 赞同：0
> 
> 时间：2013-02-21T16:10:48.970
> 
> 标签：javascript, three.js, webgl

我使用three.js 将单个STL 结构加载到我的3-D 查看器中，并且我希望能够在我的3-D 查看器中单击单个结构，并且该特定结构的名称标签出现在onMouseClick 或onMouseOver 上。

我认为它与该特定对象的坐标点有关，或者可能只是该对象的总表面积，然后使用 onMouseClick eventHandler 创建一个窗口，但我不确定。

有没有我可以看的示例或开源代码？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T22:22:14.460

检查示例文件夹中的任何碰撞检测示例。可能 webgl_interactive_cubes.html 是你所追求的：http: [//mrdoob.github.com/three.js/examples/webgl_interactive_cubes.html](http://mrdoob.github.com/three.js/examples/webgl_interactive_cubes.html)

这将向您展示如何找到鼠标后面的元素。

如果您想更多地了解事物内部的工作原理，我还写了一篇关于使用three.js 挑选对象的教程：http: [//soledadpenades.com/articles/three-js-tutorials/object-picking/](http://soledadpenades.com/articles/three-js-tutorials/object-picking/)

然后——你已经知道鼠标在 mousemove 或 mouseclick 事件中的位置——只需创建一个 span 或类似的东西，并使用 css 的 left 和 top 属性将它放在那个位置，例如

# java - 杰克逊排除子类字段

> ID：15006963
> 
> 赞同：1
> 
> 时间：2013-02-21T16:10:58.850
> 
> 标签：java, json, jackson

鉴于以下 POJO：

```
class A {
 private String name;
 private String desc;
 private List<A> subclasses;
} 
```

我会通过从子类中排除字段 desc` 来生成那种 json：

```
{
 name : "aname"
 desc: "adesc",
 subclasses : [{
      name : "aname"
 },{
      name : "anotherame"
 }]
} 
```

或者来自父类而不是子类的字段

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T16:11:45.533

要排除字段，请使用`@JsonIgnore`注释。多看这里——

[http://forum.springsource.org/showthread.php?92684-Exclude-bean-field-from-JSON-response](http://forum.springsource.org/showthread.php?92684-Exclude-bean-field-from-JSON-response)

和这里 -

[http://jackson.codehaus.org/1.0.0/javadoc/org/codehaus/jackson/annotate/JsonIgnore.html](http://jackson.codehaus.org/1.0.0/javadoc/org/codehaus/jackson/annotate/JsonIgnore.html)

# android - 如何正确更新 AppWidget？

> ID：15006966
> 
> 赞同：6
> 
> 时间：2013-02-21T16:11:03.603
> 
> 标签：android, android-widget, int, updates, android-appwidget

我是 android 的菜鸟，我在更新 appwidget 时遇到问题。这是一个新闻小部件，每 20 秒显示不同的文本。初始化小部件时，让文本正确切换和显示没有问题。但是，每 30 分钟更新一次小部件后，我的 widgetID int 数组会保留更新之前存在的 int。因此，每次更新后，小部件都会显示旧数据和新数据。在更新过程中是否有清除旧数据的小部件 ID int 数组。任何帮助是极大的赞赏。

我的代码：

```
allWidgetIds2 = appWidgetManager.getAppWidgetIds(thisWidget); 
```

在小部件中切换文本的方法。这最初工作正常，但更新后显示旧数据和新数据......

```
 public void updateStory() {

    tickerheadline = RssReader.rssheadline.get(storyCounter);
    tickerstory = RssReader.rssstory.get(storyCounter);
    remoteViews.setTextViewText(R.id.headline, tickerheadline );
    remoteViews.setTextViewText(R.id.story, tickerstory );
    if (storyCounter==RssReader.rssheadline.size()-1){
        storyCounter = 0;
        storyCounter++;
    }else{
        storyCounter++;
    }
    appWidgetManager.updateAppWidget(allWidgetIds, remoteViews); 
    //Log.e("Widget", allWidgetIds.toString());
    mHandler.postDelayed(new Runnable() { 
         public void run() { 
           updateStory(); 
         } } ,20000);  }

} 
```

编辑

```
public void updateStory() {
    //Added
    appWidgetManager = AppWidgetManager.getInstance(this.getApplicationContext());
    ComponentName thisWidget = new ComponentName(getApplicationContext(),MyWidgetProvider.class);
    remoteViews = new RemoteViews(this.getApplicationContext().getPackageName(),R.layout.widget1);    

    tickerheadline = RssReader.rssheadline.get(storyCounter);
    tickerstory = RssReader.rssstory.get(storyCounter);
    remoteViews.setTextViewText(R.id.headline, tickerheadline );
    remoteViews.setTextViewText(R.id.story, tickerstory );
    if (storyCounter==RssReader.rssheadline.size()-1){
        storyCounter = 0;
        storyCounter++;
    }else{
        storyCounter++;
    }

    appWidgetManager.updateAppWidget(thisWidget, remoteViews); 

    //appWidgetManager.updateAppWidget(allWidgetIds, remoteViews); 
    //Log.e("Widget", allWidgetIds.toString());
    mHandler.postDelayed(new Runnable() { 
         public void run() { 
           updateStory(); 
         } } ,20000);  }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:43:32.663

尽管在更新等方面您可以非常聪明地使用 android 中的 AppWidgets，但最简单的方法是每次刷新时重新构建小部件内容。由于您仅每 30 分钟刷新一次，因此没有太多理由担心 CPU 使用率。

因此，我建议每次使用标准方法触发更新时进行标准重建。您上面的代码虽然看起来正确，但实际上并不强制更新，从头开始更干净。一旦它起作用了，那么如果你能让它更轻量级，请告诉我如何！

```
// You need to provide:
// myContext - the Context it is being run in.
// R.layout.widget - the xml layout of the widget
// All the content to put in it (duh!)
// Widget.class - the class for the widget

RemoteViews rv= new RemoteViews(myContext.getPackageName(), R.layout.widget);
rv.setXXXXXXX // as per normal using most recent data set.
AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(myContext);
// If you know the App Widget Id use this:
appWidgetManager.updateAppWidget(appWidgetId, rv);
// Or to update all your widgets with the same contents:
ComponentName projectWidget = new ComponentName(myContext, Widget.class);
appWidgetManager.updateAppWidget(projectWidget, rv); 
```

通常最简单的方法（在我看来）是将其包装在 WidgetUpdater.class 中，您可以从服务调用或直接使用时间警报调用。使用 onUpdate 通常是一个坏主意，因为它会强制手机进入全功率模式并且不是很可控。我从来没有设法让它工作。做这样的事情要好得多：

```
 Intent myIntent = // As per your onUpdate Code
    alarmPendingIntent = PendingIntent.getService(context, 0, myIntent, PendingIntent.FLAG_ONE_SHOT);

    // ... using the alarm manager mechanism.
AlarmManager alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);
    alarmManager.set(AlarmManager.RTC_WAKEUP, nextUpdateTimeMillis, alarmPendingIntent); 
```

# php - 阻止对文件的直接脚本访问

> ID：15006972
> 
> 赞同：5
> 
> 时间：2013-02-21T16:11:23.357
> 
> 标签：php, security

目前我这样做：

在一个文件中，我们称之为`file_one.php`，我有

```
define( 'ROOT', realpath( dirname( __FILE__ ) ) );

require_once( ROOTPATH . '/file_two.php' ); 
```

然后`file_two.php`我在顶部有这个：

```
if ( ! defined( 'ROOT' ) )
    exit; 
```

因此，只有在定义时`file_two.php`才能访问的内容，这发生在. 如果您尝试直接访问它将无法正常工作，对吗？这种方法有什么缺陷吗？`ROOT``file_one.php``file_two.php`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:17:27.377

就像你说的那样。如果有人直接在浏览器中输入 /../../file_two.php 它就会退出。当文件独立加载时，没有包含，ROOT 没有定义。

请记住，在 PHP 中，一个文件包含其他文件和其他文件，并且最后几乎只有一个文件。因此，如果您的直接访问变量未在检查之前的某处定义，它将不允许访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T16:21:44.563

将 John Conde 的评论转换为答案：

确保无法在浏览器中访问文件的最佳方法是将其放在 webroot 之外。

您应该有一个名为`www`或`public_html`类似的文件夹，其中包含您网站的文件。好吧，在包含它的文件夹中，您可以放置​​一个`includes`文件夹并在其中放置仅脚本访问的文件。这样，它们就完全无法从 Web 访问，但脚本仍然可以访问它们。

# cmake - cmake 禁止查找包并手动设置路径

> ID：15006974
> 
> 赞同：1
> 
> 时间：2013-02-21T16:11:25.737
> 
> 标签：cmake, include-path

我目前正在为应用程序的多个实例自动化我的安装过程。此应用程序`cmake`用于构建和使用一些不`findModule.cmake`存在文件的库。因为我可以找到一个很好的示例，如何为现有库（例如 OpenCascade）生成 findModule.cmake 文件。手动设置构建过程时，可以轻松调整`ccmake`. 由于我想自动执行此操作，因此我正在寻找一种通过将选项传递给`cmake`命令行来执行此操作的方法。以下是我尝试为 OpenCascade 实现这一目标的方法：

```
cmake -DOCC_FOUND:INTERNAL=TRUE -DOCC_INCLUDE_DIR:PATH=/usr/include/opencascade -DOCC_LIBRARY:FILEPATH=/usr/lib/libTKernel.so -DCMAKE_BUILD_TYPE:STRING=Release .. 
```

不幸的是，这不起作用。由于构建选项依赖于构建，因此传递先前配置的`CMakeCache.txt`文件不起作用。感谢您提出任何建议以实现我正在尝试做的事情。

# c# - .NET 框架的 DataVisualization.Charting.StatisticFormula.Mean() 与仅创建列表、枚举、求和和除法相比效率如何？

> ID：15006987
> 
> 赞同：0
> 
> 时间：2013-02-21T16:11:50.853
> 
> 标签：c#, performance, mean

我尝试使用 ILSpy 查看`System.Windows.Forms.DataVisualization.dll`该函数`System.Windows.Forms.DataVisualization.Charting.StatisticFormula.Mean()`，但它似乎无法呈现内容。

我很好奇，这个函数在产生平均值方面是否比简单地编写我自己的平均值函数更有效，[如下所示](http://www.java2s.com/Code/CSharp/Development-Class/StatisticalfunctionsMean.htm)：

```
 public static double Mean(this IEnumerable<double> values)
    {
        double sum = 0;
        int count = 0;

        foreach(double d in values)
        {
            sum += d;
            count++;
        }

        return sum / count;
    } 
```

我很可能会与 300 万或更多的会员打交道。

**[更新]**

在测试期间，LINQ`IEnumerable.Average()`在我的旧双核工作站上似乎非常高效，`List<int>`在 0.0011471 秒内处理了 87000 个成员。这比我想象的要高效得多：

```
var s3 = Stopwatch.StartNew();
double average1 = DaySampleValues.Average();
s3.Stop();
TimeSpan totaltime = s3.Elapsed; // = 0.0011471 seconds 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:42:31.347

平均是一种`O(n)`操作，因此您可能无法在 C# 中对其进行优化。您可以*尝试*将其并行化：

```
values.AsParallel().Average(); 
```

但是并行化的开销可能超过同时运行多个线程的好处。

唯一的其他优化是将`count`测量替换为调用`values.Count()`. 如果底层数据结构是 a `List`or `Array`then `Count()`will be`O(1)`并且可能会为您节省一些计算时间。

无论如何，获得真实答案的唯一方法就是对其进行*测量*。尝试每种方式，看看哪个更快。如果可能，请在不同的系统架构上尝试它们，以了解多核、更多内存等的好处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:32:24.750

还是不能使用 LINQ .Average()？

# jquery - jQuery addClass 用于子元素的交替级别

> ID：15006989
> 
> 赞同：0
> 
> 时间：2013-02-21T16:11:56.113
> 
> 标签：jquery

说我有这个 html

```
<div class="details">
    <div class="details">
        <div class="details">
            <div class="details"></div>
            <div class="details"></div>
        </div>        
        <div class="details">
            <div class="details"></div>
            <div class="details"></div>
        </div>
    </div>
</div> 
```

在不知道我将拥有多少级别的情况下，有没有办法可以将一个班级添加到每个其他级别？

这将是期望的结果：

```
<div class="details">
    <div class="details alternate">
        <div class="details">
            <div class="details alternate"></div>
            <div class="details alternate"></div>
        </div>        
        <div class="details">
            <div class="details alternate"></div>
            <div class="details alternate"></div>
        </div>
    </div>
</div> 
```

编辑我知道这样的问题是不受欢迎的，因为我似乎没有尝试过任何事情。但我不知道要寻找什么

**更新** 更新了 html 以显示同一级别上可能有多个详细信息 div

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T16:18:00.253

这可行，尽管将`alternate`课程放在第一级和随后的奇数级，而不是第二级和偶数级：

```
$('.details').addClass(function() {
    if (!$(this.parentNode).hasClass('alternate')) {
         return 'alternate';
    }
}); 
```

您可以使用它来标记偶数和奇数级别：

```
$('.details').addClass(function() {
    return $(this.parentNode).hasClass('odd') ? 'even' : 'odd';
}); 
```

见[http://jsfiddle.net/P4ggZ/2/](http://jsfiddle.net/P4ggZ/2/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T16:18:29.543

您可以使用`.details`每个元素的父级数量，如果是偶数，则应用`.alternate`该类

```
$('.details').filter(function(){
    return ($(this).parents('.details').length % 2) === 0;
}).addClass('alternate'); 
```

**演示在** [http://jsfiddle.net/Ltn2j/1/](http://jsfiddle.net/Ltn2j/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T16:13:51.147

**1）纯CSS解决方案：**

我想你的级别数有最大值，所以你可以使用

```
body > .details { }
body > .details > .details { }
body > .details > .details  > .details { }
... 
```

但如果样式很大，这可能会变得很重。在这种情况下，您最好使用允许 mixins 构建您的 css 的格式（例如[less](http://lesscss.org/)）。

**2）jQuery解决方案（以下问题编辑）：**

如果你想在 jQuery 中添加样式，你可以这样做

```
function changeChilds($elems, depth) {
   if (!$elems.length) return;
   if (depth%2) $elems.addClass('alternate');
   changeChilds($elems.children('.details'), depth+1);
}
changeChilds($('body > .details'), 0); 
```

[示范](http://jsbin.com/ageweq/1/edit)

# c# - Bootstrap 模态关闭按钮不会导致回发

> ID：15006991
> 
> 赞同：2
> 
> 时间：2013-02-21T16:11:58.193
> 
> 标签：c#, javascript, asp.net

我有一个 boostrap 模式，这里是关闭它的按钮：

```
 <div class="modal-footer">
 <asp:Button ID="btnClose" CssClass="btn" runat="server" Text="Close" data-dismiss="modal" aria-hidden="true" />
 </div> 
```

按钮和模式表单嵌套在更新面板中。但它不会触发回发，因此更新面板不会做它的事情。如果我删除数据关闭，那么它不会关闭模式。

我能做什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-12T17:55:19.317

您可以像在示例中一样使用 ASP 按钮

```
<div class="modal-footer">
     <asp:Button ID="btnClose" CssClass="btn" runat="server" Text="Close" data-dismiss="modal" aria-hidden="true" />
</div> 
```

试试*UseSubmitBehavior="false"*

```
<div class="modal-footer">
   <asp:Button ID="btnClose" CssClass="btn" runat="server" Text="Close" data-dismiss="modal" aria-hidden="true" UseSubmitBehavior="false" />
</div> 
```

这将关闭模式并触发回发

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T00:30:19.383

Data-dismiss 是基于 javascript 的，只是隐藏了模式。如果您希望关闭按钮回发，则需要使用 OnClick 属性并在代码隐藏中添加一个方法来处理它：

```
<asp:Button ID="btnClose" CssClass="btn" runat="server" Text="Close" data-dismiss="modal" aria-hidden="true" OnClick="YourMethodNameGoesHere"/> 
```

然后在你的代码隐藏......做一些事情：

```
protected void YourMethodNameGoesHere()
{
    // Do stuff
} 
```