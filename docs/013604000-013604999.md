# StackOverflow 问答 13604000-13604999

# lwuit - codenameone theme.res 错误

> ID：13604000
> 
> 赞同：1
> 
> 时间：2012-11-28T11:27:48.233
> 
> 标签：lwuit, codenameone

我在某些设备（例如三星）中部署 Codenameone 应用程序时遇到问题。

我试图在没有“theme.res”文件的情况下以手动模式创建应用程序。我手动添加了一个表单并在没有操作系统的三星设备上运行它（只支持 MIDP 2.0）并且它运行成功。

我尝试将一些表单添加到“theme.res”文件并使用它（你知道，使用它非常简单）。所以在那之后我在三星设备上运行它，我得到了错误。

他们之间有什么不同？

为什么它不能与“theme.res”文件一起运行？有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:19:45.120

在获取资源之前尝试执行 Display.init(this)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T14:27:46.610

尝试使用项目“/resource.es”的 src 文件中的正确路径加载

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T06:36:55.570

有些设备无法运行代号one 或lwuit 设计的应用程序。您应该使用 codenameone 或 lwuit 主题对您的所有设计进行硬编码。

或者您可以在代号向导中选择手动模板来开发您的应用程序。

# c# - Lotus Note PassThruHTML

> ID：13604002
> 
> 赞同：1
> 
> 时间：2012-11-28T11:27:53.617
> 
> 标签：c#, lotus-notes, lotus-domino

我正在尝试在“domino”dll（编程语言：C#）的帮助下使用 LOTUS NOTES 发送电子邮件。

我想将邮件签名附加到电子邮件正文中。我希望为签名添加一个.jpg。我还有其他电子邮件正文格式。因此，我决定使用 HTML 进行样式设置和附加签名。浏览网页后发现 NotesRichTextStyle 中有一个属性`PassThruHTML`。[根据此链接](http://web.ita.doc.gov/help/help7_designer.nsf/b3266a3c17f9bb7085256b870069c0a9/72be04b1c1a3add18525704a0040fd69?OpenDocument)可以为其赋予的合法值为(-1)、(0)、(255)。

问题是，当我设置 (-1) 时，应用会弹出一条消息，提示“样式值必须为 True、False 或 STYLE_NO_CHANGE（对于 Java 是 YES、NO 或 MAYBE）”。

但是在 c sharp 代码中，它只接受 int 值，而不接受弹出窗口中给出的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T05:36:02.100

以下是 Ken Pespisa 的参考链接给出的答案的 C# 代码。

```
NotesSession LNSession = new NotesSession();
NotesDatabase LNDatabase = null;
NotesDocument LNDocument;
NotesMIMEEntity LNBody;
NotesStream LNStream;
NotesMIMEHeader LNHeader;

try
{
    LNSession.Initialize(txtPassword.Text);
    LNDatabase = LNSession.GetDatabase(txtServer.Text, txtUserName.Text, false);
    LNStream = LNSession.CreateStream();
    LNSession.ConvertMime = false;

    //Create an email
    LNDocument = LNDatabase.CreateDocument();
    LNDocument.ReplaceItemValue("Form", "Memo");
    LNBody = LNDocument.CreateMIMEEntity();

    LNHeader = LNBody.CreateHeader("Subject");
    LNHeader.SetHeaderVal("Add your subject here");

    LNHeader = LNBody.CreateHeader("To");
    LNHeader.SetHeaderVal("Give your recipient email address");

    LNStream.WriteText("<html>");
    LNStream.WriteText("<body bgcolor=\"blue\" text=\"white\">");
    LNStream.WriteText("<table border=\"2\">");
    LNStream.WriteText("<tr>");
    LNStream.WriteText("<td>Hello World!</td>");
    LNStream.WriteText("</tr>");
    LNStream.WriteText("</table>");
    LNStream.WriteText("</body>");
    LNStream.WriteText("</html>");
    LNBody.SetContentFromText(LNStream, "text/HTML;charset=UTF-8", MIME_ENCODING.ENC_IDENTITY_7BIT);
    LNDocument.Send(false);
}
catch (Exception e)
{
    MessageBox.Show(e.Message);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T15:10:53.440

如果您只是发送电子邮件，您应该查看`NotesMimeEntity`课程，并查看此网站以获取示例： [http ://www-01.ibm.com/support/docview.wss?uid=swg21098323](http://www-01.ibm.com/support/docview.wss?uid=swg21098323)

PassThruHTML 对您没有多大帮助，除非您在通过 Domino 查看 Notes 文档或表单时尝试在浏览器中显示自定义 HTML。

# c++ - Java 的 split() 的 c++ 等价物是什么？

> ID：13604003
> 
> 赞同：1
> 
> 时间：2012-11-28T11:27:57.710
> 
> 标签：c++, parsing

我正在尝试从文本文件中读取数据值并将它们存储在数据结构中。我可以在 Java 中相当简单地实现这样的事情，但我不确定如何最好地解决这个问题。

一行数据`x, y, sigma`就像`1.1 1.2 1.3`. 我知道如何使用 c++ 将整行变成一个字符串，`getline(myFile, string)`但我不确定这是否是正确的方法，或者是否是，从那里去哪里。是否可以拆分行然后将拆分的字符串解析为`double`值？

我的数据结构如下所示：

```
struct datapoint {
   double x;
   double y;
   double sigma;
   double weight;
   double xSquared;
   double xy;
}; 
```

我的问题是：

有没有办法将数字解析为结构，其中`.txt`文件的每一行都是`struct`一个数组`datapoint`？

如果没有直接方法，在 c++ 中是否有 Java`split()`和`Double.parseDouble(string)`方法的等价物？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T11:31:47.027

只是阅读它们

```
std::cin >> x >> y >> sigma >> weight >> xSquared >> xy; 
```

可能是解决您问题的最简单方法...

但是，如果您真的需要进行拆分，请查看此处：[http ://www.cplusplus.com/faq/sequences/strings/split/](http://www.cplusplus.com/faq/sequences/strings/split/)

# javascript - Jquery & Joomla 无故故障

> ID：13604007
> 
> 赞同：3
> 
> 时间：2012-11-28T11:28:08.463
> 
> 标签：javascript, jquery, html, joomla

我正在尝试制作一个不错的幻灯片框来首先对文章进行评分，然后关闭评分框以查看视频。我在 Joomla 上执行此操作并使用此代码稍作编辑：http: [//jsfiddle.net/AetnV/72/](http://jsfiddle.net/AetnV/72/)

这是我的代码版本：（问题出在静态 html 页面（非 joomla）上，它运行良好，但在 Joomla 上却不行与其他主题相同。

```
 <script type='text/javascript' src='http://code.jquery.com/jquery-1.5.2.js'></script>

  <link rel="stylesheet" type="text/css" href="/css/normalize.css">
  <link rel="stylesheet" type="text/css" href="/css/result-light.css">

  <style type='text/css'>
    * { margin: 0; padding: 0; outline: none; }

body { background: #CCC; margin: 0; padding: 0; font: 10px normal Arial, Helvetica, sans-serif; }

/*--Main Image Area--*/
.main_image {
    margin: 20px 0 0 20px; width: 650px; height: 400px;
    float: left;  background: white; position: relative;  overflow: hidden;
    color: #fff;

    moz-box-shadow: 0px 0px 4px #666; 
    -webkit-box-shadow: 0px 0px 4px #666; 
    box-shadow: 0px 0px 4px #666;
}

.main_image h2 { font-size: 2em; font-weight: normal; margin: 0 0 5px; padding: 10px; }
.main_image p  { font-size: 1.2em; padding: 10px; margin: 0; line-height: 1.6em; }
.main_image .desc  { position: absolute; bottom: 0; left: 0; width: 100%; display: none;}
.main_image .block { height: 410px; width: 100%; background: #111; border-top: 1px solid #000; }
.main_image a.collapse {
    background: black; height: 30px; width: 650px;
    position: absolute; top: -30px; right: 0px;
    font: normal 12px arial; color: white; text-align: center;
}
.main_image a.show { background-position: left bottom; } 
  </style>

<script type='text/javascript'>//<![CDATA[ 
$(window).load(function(){
$(document).ready(function() {

    //Show Banner
    $(".main_image .desc").show(); //Show Banner
    $(".main_image .block").animate({ opacity: 1 }, 1 ); //Set Opacity

    //Toggle Teaser
    $("a.collapse").click(function(){
        $(this).next().slideToggle();
        $(this).toggleClass("show");
    });

});//Close Function  
});//]]>  

</script>

  <div class="main_image">
<br><br><br><br><br><br>
<center><img src="http://upload.macromedia.com/exchange/flash/previews/300x200_200x200.jpg" width=205" height="205"></a></center>
    <div class="desc" style="display: block; ">
        <a href="#" class="collapse show">Click Me!</a>
        <div class="block" style="opacity: 1; display: none; ">

            <center><br><br><br><iframe width="420" height="315" src="http://www.youtube.com/embed/AxcM3nCsglA" frameborder="0" allowfullscreen></iframe></iframe>
            </center>
        </div>
    </div>
</div> 
```

任何帮助是极大的赞赏。谢谢

*另外，如果您有更好的方法来建议做我想做的事情，请告诉我。这是我的第一次尝试，我想将其设置为 2div，并且 onclick 一个会与另一个重叠，但我害怕蜘蛛会认为它的隐藏文本等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:27:27.017

尝试使用以下内容：

```
$document = JFactory::getDocument(); 
$js = ' $(document).ready(function() {

            $(".main_image .desc").show();
            $(".main_image .block").animate({ opacity: 0.85 }, 1 );

            $("a.collapse").click(function(){
                $(this).next().slideToggle();
                $(this).toggleClass("show");
            });

         }); ';
$document->addScriptDeclaration($js); 
```

如果`$document = JFactory::getDocument();`已被使用，请将其删除。

如果`$doc = JFactory::getDocument();`正在使用，则在上面的代码中，更改为：

`$doc->addScriptDeclaration($js);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T11:37:57.223

而不是这个代码 -

```
<script type='text/javascript'>//<![CDATA[ 
$(window).load(function(){
$(document).ready(function() {

    //Show Banner
    $(".main_image .desc").show(); //Show Banner
    $(".main_image .block").animate({ opacity: 1 }, 1 ); //Set Opacity

    //Toggle Teaser
    $("a.collapse").click(function(){
        $(this).next().slideToggle();
        $(this).toggleClass("show");
    });

});//Close Function  
});//]]>  

</script> 
```

试试这个-

```
<script type='text/javascript'>//<![CDATA[ 
var $j = jQuery.noConflict();
$(window).load(function(){

});//]]>  
$j(document).ready(function() {

    //Show Banner
    $j(".main_image .desc").show(); //Show Banner
    $j(".main_image .block").animate({ opacity: 1 }, 1 ); //Set Opacity

    //Toggle Teaser
    $j("a.collapse").click(function(){
        $j(this).next().slideToggle();
        $j(this).toggleClass("show");
    });

});//Close Function  
</script> 
```

# javascript - 为什么 this 的属性不能在闭包的私有函数中直接访问？

> ID：13604012
> 
> 赞同：3
> 
> 时间：2012-11-28T11:28:24.180
> 
> 标签：javascript, closures, language-design

在我自己对[解释用 JSON 编写的代码的 JavaScript VM](https://codereview.stackexchange.com/questions/18997/a-javascript-vm-that-interprets-code-written-in-json)的回答中，我指出不能在“私有”函数中访问 JavaScript 闭包的“公共”属性。

该帖子中给出的示例是

```
function anobject(){
    var privatefunction = function(){
        //publicfunction(); //wrong; you have no access to it
        console.log(this); //refer to the global object, not the object creating
    };
    this.publicfunction = function(){
        console.log(this); //refer to the object creating
    }
} 
```

我认为原因是某些向后兼容性问题`privatefunction`必须属于全局对象。所以 public 函数只是一个匿名函数，它分配给 的属性`this`。这解释了为什么调用`publicfunction`会失败，因为它需要`this`首先引用。

但是，以下修复仍然无效：

```
function anobject(){
    var privatefunction = function(){
        //publicfunction(); //wrong; you have no access to it
        console.log(this); //refer to the object creating
    }.bind(this);
    this.publicfunction = function(){
        console.log(this); //refer to the object creating
    }
} 
```

正如我明确指定`privatefunction`应该与创建的对象绑定一样，调用`publicfunction`应该可以工作，但不能。我必须执行以下操作：

```
function anobject(){
    var privatefunction = function(){
        this.publicfunction();
        console.log(this); //refer to the object creating
    }.bind(this);
    this.publicfunction = function(){
        console.log(this); //refer to the object creating
    }
} 
```

另一个解决方法（我使用的方式）如下：

```
function anobject(){
    var privatefunction = function(){
        publicfunction();
        console.log(this); //refer to the object creating
    };
    var publicfunction = function(){
        console.log(this); //refer to the object creating
    }
    this.publicfunction = publicfunction;
} 
```

现在是问题部分。这种行为背后的原因是什么？`this`通过在没有明确说明的情况下禁用 access 的属性来试图避免什么？

更新：问题的主要部分是：当解释器在范围链中找不到名称时，为什么不应该查看`this`属性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T12:52:24.920

这里的问题是引用`this`是由函数/方法的调用者决定的，例如：

```
function anobject(){
    // here "this" is the object
    var privatefunction = function(){
        // here "this" is the object **that called privatefunction()**
    };
    this.publicfunction = function(){
        // this method will always be called by the object, so "this" is the object
    }
} 
```

为了实现你想要的，你也可以试试这个：

```
function anobject(){
    var that = this;
    var privatefunction = function(){
        [do what you like using "that"]
    };
    this.publicfunction = function(){
        [here you can use "this" directly, or "that"]
    }
} 
```

另请参阅 javascript 作用域的工作原理，此处[是 JavaScript 中变量的作用域是什么？](https://stackoverflow.com/questions/500431/javascript-variable-scope)并在网络上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T13:27:28.063

在第二个示例中，`publicfunction()`作为对象的**属性**`this`被删除：

```
this.publicfunction = function(){
    console.log(this);
} 
```

因此，此函数不能通过其名称直接访问`publicfunction()`，并且与上下文无关。该函数实际上并不属于任何上下文，而是属于*它作为属性的对象*。

在您的示例中，当`privatefunction()`调用时`publicfunction()`，这会引发错误，因为没有函数声明为具有 name的**变量**`publicfunction()`，而**不是**因为`this`的属性不可访问：

```
function anobject(){
    var privatefunction = function(){
        //publicfunction(); // You cannot call publicfunction() because there is
                            // no function defined with this name
    }.bind(this);
    this.publicfunction = function(){
        console.log(this);
    }
} 
```

看这个例子，`publicfunction()`即使在以下范围内也无法访问`anobject()`：

```
function anobject(){
    this.publicfunction = function() {
        console.log(this);
    }
    // publicfunction(); // Wrong because publicfunction()
                         // was not defined as a variable
} 
```

但是，如果在 的上下文中`publicfunction()`定义为**变量**`anobject()`，则可以通过其名称访问该函数。例如，您可以简单地`function publicfunction()`在以下闭包中声明`anobject()`：

```
function anobject(){
    function publicfunction() {
        console.log(this);
    }
    publicfunction(); // You can access publicfunction() here
} 
```

但在这种情况下，`publicfunction()`在 的执行上下文之外无法访问`anobject()`，因此可以将其视为“私有”函数：

```
var a = new anobject();
if(typeof a.publicfunction === 'undefined')
    console.log('Public function is undefined outside of anobject()'); 
```

因此，这就是我们使用`this`关键字声明的原因`publicfunction()`：它使它可以在 的上下文之外访问`anobject()`，但这样做只将此函数定义为的**属性**。`anobject()`

因此，访问此函数的唯一方法是调用`this.publicfunction()`：

```
function anobject(){
    var privatefunction = function(){
        this.publicfunction();
        console.log(this);
    }.bind(this);
    this.publicfunction = function(){
        console.log(this);
   }
} 
```

`this`有关关键字的更多详细信息： [“this”关键字在函数中如何工作？](https://stackoverflow.com/questions/133973/how-does-this-keyword-work-within-a-javascript-object-literal)

JavaScript 中的变量与属性：http: [//javascriptweblog.wordpress.com/2010/08/09/variables-vs-properties-in-javascript/](http://javascriptweblog.wordpress.com/2010/08/09/variables-vs-properties-in-javascript/)

# c# - OpenCL 静态 C++ 文档

> ID：13604013
> 
> 赞同：5
> 
> 时间：2012-11-28T11:28:30.773
> 
> 标签：c#, c++, opencl, gpgpu

我已经用 OpenCL 试验了好几天了，我正在使用 AMD 的 SDK，现在我可以并行运行一个简单的内核，并将输入/输出传递给它/从它传递输入/输出。
我不得不说，虽然我对缺乏适当的文档感到非常失望，但 CUDA 似乎比 OpenCL 成熟得多，但我不能使用 CUDA，因为我没有 nVidia 并且我想要可移植的代码。

我已经读到 AMD 的 OpenCL SDK 现在支持“静态 C++”扩展，它允许您拥有一些用于编写内核的 C++ 功能，例如继承和将类实例从主机传递到设备。但是我找不到任何文档或任何示例。

## 简而言之，我的问题是：

在哪里可以找到有关使用 OpenCL 的静态 C++ 扩展的文档？
一个额外的问题是，我在哪里可以找到 C++ 包装器（1.2 而**不是 1.1**） 的正确文档，
一个超级额外的 (:P) 问题是，OpenCL 1.2 是否有任何完整/成熟的 C# 包装器？到目前为止，我发现 OpenCL.NET 工作正常，但它又没有文档，所以我必须查看 OpenCL C 参考并尝试在 C# 中找到等效的

感谢您阅读本文，我知道这有点含糊，我想要的只是一个易于使用且带有适当文档的 OpenCL SDK（当然 C 除外，我讨厌使用纯 C）。

# mercurial - hg log 的时间 --date

> ID：13604015
> 
> 赞同：0
> 
> 时间：2012-11-28T11:28:45.250
> 
> 标签：mercurial

我使用以下命令为一些存储库（在所有本地存储库将其更改推送到的远程服务器上）生成 hg 日志：

```
hg log -R "path-to-repo" -b somebranch --date "$YESTERDAY to $TODAY" 
```

在哪里 ：

```
YESTERDAY=$(date +%Y-%m-%d -d "yesterday")
TODAY=$(date +%Y-%m-%d) 
```

例如，这可能是：

```
hg log -R "path-to-repo" -b somebranch --date "2012-11-27 to 2012-11-28" 
```

但是在指定 --date 时，生成的日志在什么时间开始：时：分：秒？End 将是执行命令的时间。

我问的原因是当我在 10:00 运行上述日志时日志是空的，但是当我在 11:10 运行它时它发现了变化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T11:50:40.903

您忘记了本地时区：没有 TZ for mercurial 的日期是一些预定义的时区（可能是 GMT）

顺便说一句，hg log 的“从昨天开始”（没有与 TZ 相关的头痛）是静态行`--date "-1"`

日志示例，当提交者不是来自我的本地 TZ 时

```
hg log --date "2012-11-04" --template "{date|date}\n"
Sat Nov 03 22:36:13 2012 -0400
Sat Nov 03 22:22:43 2012 -0400
Sat Nov 03 19:25:13 2012 -0400
Sat Nov 03 19:20:52 2012 -0400
Sat Nov 03 19:20:39 2012 -0400
Sat Nov 03 19:14:17 2012 -0400
Sat Nov 03 19:12:08 2012 -0400
Sat Nov 03 19:11:50 2012 -0400 
```

# vbscript - 使用 VBScript 从文件中发布 base64 编码的 textarea 数据

> ID：13604016
> 
> 赞同：-1
> 
> 时间：2012-11-28T11:28:45.627
> 
> 标签：vbscript

我尝试使用 VBScript 将一些数据发布到 PHP 脚本，但是我做错了...

```
Dim objStream
Set objStream = CreateObject("ADODB.Stream")
objStream.Type = adTypeBinary
objStream.Open()
objStream.LoadFromFile("base64.txt")
objDocElem.nodeTypedValue = objStream.Read()

Set objHTTP = CreateObject("Microsoft.XMLHTTP")
objHTTP.open "POST", "http://mysite.com/data.php", False
objHTTP.setRequestHeader "Content-Type", "application/x-www-form-urlencoded"
objHTTP.send "data=" + objDocElem.text
'MsgBox objHTTP.responseText
Set objHTTP = Nothing
Set objStream = Nothing 
```

> C:\Documents and Settings\User\Desktop\data\test.vbe(3, 1) ADODB.Stream : 参数类型错误、超出可接受范围或相互冲突。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-28T12:38:01.887

自己解决了。

```
Dim TextArea
Set oFSO = CreateObject("Scripting.FileSystemObject")
Set TextFile = oFSO.OpenTextFile("base64.txt", 1)
TextArea = ""
Do Until TextFile.AtEndOfStream
    TextArea = TextArea & TextFile.ReadLine & vbNewLine
Loop
TextFile.Close

Set objHTTP = CreateObject("Microsoft.XMLHTTP")
objHTTP.open "POST", "http://mysite.com/data.php", False
objHTTP.setRequestHeader "Content-Type", "application/x-www-form-urlencoded"
objHTTP.send "data=" + TextArea
Set oFSO = Nothing
Set TextFile = Nothing
Set objHTTP = Nothing 
```

# c# - Kendo UI 网格隐藏具有零值的列

> ID：13604020
> 
> 赞同：5
> 
> 时间：2012-11-28T11:29:03.863
> 
> 标签：c#, kendo-ui

我想在我的剑道网格中隐藏那些列（包含整数值），其中所有单元格都包含“0”值。解决方案容易吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T11:53:04.510

您可以通过[hideColumn](http://docs.kendoui.com/api/web/grid#hidecolumn)方法隐藏列。您可以使用数据源的[data](http://docs.kendoui.com/api/framework/datasource#data)方法获取网格绑定到的数据。然后遍历它以查找是否所有记录都包含零。这是一个简单的例子：

```
var grid = $("#grid").data("kendoGrid");
var data = grid.dataSource.data();

var allZeroes = true;

for (var i = 0; i < data.length; i++) {
    // say the name of the field to which the column is bound is "foo"
    if (data[i].foo != 0) { 
       allZeroes = false;

       break;
    }
}

if (allZeroes) {
   grid.hideColumn("foo");
} 
```

# hadoop - 使用 cassandra 和 pig 进行数据清理

> ID：13604024
> 
> 赞同：1
> 
> 时间：2012-11-28T11:29:14.223
> 
> 标签：hadoop, cassandra, apache-pig, datastax-enterprise

我有两组数据，我想在 Pig 中进行比较。两者都具有相同的唯一 ID，第二组数据中的名称随机更改。逻辑如下：

*   加载 empl1 原始数据
*   加载 empl2 原始数据
*   选择“名称不同”和“emplno 相等”的行

我已经做好了：

```
A1=  LOAD 'cassandra://employees_pig1/employees_cf' USING CassandraStorage() AS (key, columns: bag {T: tuple(name, value)});

B1=  LOAD 'cassandra://employees_pig2/employees_cf' USING CassandraStorage() AS (key, columns: bag {T: tuple(name, value)});

A2 = FOREACH A1 GENERATE key, FLATTEN(columns);

B2 = FOREACH B1 GENERATE key as key2, FLATTEN(columns); 
```

呵呵，不能在论坛发图。这是说明 A2、B2 的链接 [https://picasaweb.google.com/lh/photo/SU3QgKsbA4nmq83cdnhiVdMTjNZETYmyPJy0liipFm0?feat=directlink](https://picasaweb.google.com/lh/photo/SU3QgKsbA4nmq83cdnhiVdMTjNZETYmyPJy0liipFm0?feat=directlink)

现在需要一些帮助，我是否正确地接近这个？

```
C1 = join A2 by key, B2 by key2;

D1= filter C1 by A2.key==B2.key2 -- cannot do a A2.first_name!=B2.first_name; 
```

想做 *选择行，其中“名称不相同”和“emplno 相等”*但不完全确定如何。请给个建议。

感谢你

更新： - 而不是加入我做了一个 cogroup C3= COGROUP A2 by key, B2 by key2;

[https://picasaweb.google.com/lh/photo/_lkEqW4BvIgbnZSHKDCJGNMTjNZETYmyPJy0liipFm0?feat=directlink](https://picasaweb.google.com/lh/photo/_lkEqW4BvIgbnZSHKDCJGNMTjNZETYmyPJy0liipFm0?feat=directlink)

接下来，我正在考虑做

```
D1= FOREACH C3 GENERATE group, A2.first_name as fn1, B2.first_name as fn2 
```

该组返回所需的结果（即empno），但'A2.first_name，B2.first_name'不正确。需要知道如何访问 A2 和 B2 包/元组中的数据。

然后我就可以通过 fn1==fn2 进行过滤。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T04:00:07.077

**解决了 ：）**

步骤： - 下载 pygmalion [https://github.com/jeromatron/pygmalion/downloads](https://github.com/jeromatron/pygmalion/downloads)

快速测试：

```
register '/usr/share/dse/pygmalion/pygmalion-1.0.0.jar';
define FromCassandraBag org.pygmalion.udf.FromCassandraBag();
define ToCassandraBag org.pygmalion.udf.ToCassandraBag();

A1=  LOAD 'cassandra://employees_pig1/employees_cf' USING CassandraStorage() AS (key,
columns: bag {T: tuple(name, value)});
B1=  LOAD 'cassandra://employees_pig2/employees_cf' USING CassandraStorage() AS (key, 
columns: bag {T: tuple(name, value)});

A2 = foreach A1 generate key,
flatten(org.pygmalion.udf.FromCassandraBag('first_name', columns))
as (first_name: chararray);

B2 = foreach B1 generate key,
flatten(org.pygmalion.udf.FromCassandraBag('first_name', columns))
as (first_name: chararray);

C1 = join A2 by key, B2 by key;
D1= filter C1 BY A2::first_name != B2::first_name; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T19:34:16.033

By doing a `JOIN` (at least, an inner join, which is what you have done above), you already take care of ensuring that the `emplno`s from `A` and `B` are equal. Then all you have to do is filter by whether the `name`s are the same.

```
C1 = join A2 by key, B2 by key;
D1 = filter C1 by A2::name != B2::name; 
```

# android - 带有 Mockito 或 Easy Mock 的机器人

> ID：13604025
> 
> 赞同：4
> 
> 时间：2012-11-28T11:29:15.850
> 
> 标签：android, mockito, robotium, easymock

我是 Android 测试的新手，如果你们中的一些人能帮助我，我将不胜感激。我使用robotium 作为自动化测试框架（到目前为止还不错），但我不知道如何使用mockito 或Easy Mock 在我的测试中添加一些模拟。我真的坚持这一点。有人可以给我一些简单的例子来说明如何实现这一目标吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T23:25:49.510

**简答/意见**

我不推荐使用 Mockito 进行 Android 单元测试。Android 环境感觉太复杂而无法模拟。Android 单元测试的基本方法是在模拟器中运行它们。因此许多容器类已经存在并且不需要被模拟。

**长答案**

我对 Android 单元测试的世界也比较陌生。我长期编写服务器端单元测试，发现 Mockito 是简化单元测试的最佳工具之一。Mockito 在模拟复杂对象的行为方面非常有帮助。这有助于打破您的被测代码可能对容器（例如 servlet 容器或 OSGI 容器）或其他复杂协作者（例如数据库连接类）的依赖。

当您的容器/协作者具有明确定义的接口时，这种模拟效果很好。

几个月前，我决定在 Android 开发中尝试 Mockito。我发现如果你至少有 1.9.5 和 dexmaker，Mockito 确实可以工作。Dexmaker 为 Android 的 Dalvik VM 处理运行时字节码生成。

我在第一次测试中尝试的第一件事是模拟*android.content.Context*，我发现这很难。首先我尝试只模拟我直接调用的方法，但后来我发现这些调用到其他依赖于应用程序资源的方法中，......最终模拟变得如此复杂以至于它破坏了最初使用 Mockito 的目的地方。

所以我放弃并开始使用 Android 单元测试辅助类（AndroidTestCase，ActivityUnitTestCase，...）。我很沮丧，因为我现在不得不依赖模拟器，这意味着测试执行缓慢。也许 Mockito 在这种类型的测试中仍然占有一席之地。它可能对模拟诸如外部数据源之类的东西很有用。

无论如何，这只是我的 2 美分。

# javascript - JQuery - 重置计数时再次绑定（）

> ID：13604027
> 
> 赞同：2
> 
> 时间：2012-11-28T11:29:27.467
> 
> 标签：javascript, jquery

在我的游戏中，我想确保开始按钮每次出现时只单击一次以停止它多次加载该功能。

如果计数大于零，我编写了一些代码来计算点击和取消绑定。

```
var oneClick = 0;
$(".start-btn-wrapper").bind("click", function () {
    oneClick++;
        if (oneClick > 0) {
        $(this).unbind("click");
    }
        newGame();
}); 
```

这很好用，但我需要一种方法来重新绑定它，以便下次它出现时（当点击restart-btn 时），所以我写了这个来重置计数。

```
$(".restart-btn").click(function () {
    resetGame();
    oneClick = 0;

}); 
```

出于某种原因，这不起作用，我正在寻找 SO 的解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T11:31:46.470

您没有再次绑定，只是更改了 oneClick，它甚至没有作为事件处理程序进行测试，`$(".start-btn-wrapper")`不再绑定。

但是，与其取消绑定/重新绑定成本高昂，不如直接测试`oneClick`：

```
$(".start-btn-wrapper").bind("click", function () {
    if (oneClick++ > 0) return;
    newGame();
} 
```

请注意，如果您只需要两个状态，则布尔值会更清晰：

```
var clickable = true;
$(".start-btn-wrapper").bind("click", function () {
    if (!clickable) return;
    newGame();
    clickable = false;
}
$(".restart-btn").click(function () {
    resetGame();
    clickable = true;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T11:34:22.963

jQuery 有一个内建的方法来实现这个用途。这是[`.one()`](http://api.jquery.com/one/)

所以你所要做的就是

```
$(".start-btn-wrapper").one('click',newGame); 
```

并重新启动

```
$(".restart-btn").click(function () {
    resetGame();
    $(".start-btn-wrapper").one('click',newGame);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T11:34:00.653

简单的

```
var oneClick = 0;
$(".start-btn-wrapper").bind("click", function () {

        if (oneClick > 0) {
        return false;
    }
        oneClick++;
        newGame();
});

$(".restart-btn").click(function () {
    resetGame();
    oneClick = 0;

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T11:34:45.300

```
var oneClick = 0;

function clickHandler() {
    oneClick++;
        if (oneClick > 0) {
        $(".start-btn-wrapper").unbind("click");
    }
        newGame();
}

$(".start-btn-wrapper").bind("click", clickHandler);

$(".restart-btn").click(function () {
    resetGame();
    oneClick = 0;

    $(".start-btn-wrapper").bind("click", clickHandler);
}); 
```

# knockout.js - knockout.js 异步绑定更新

> ID：13604035
> 
> 赞同：0
> 
> 时间：2012-11-28T11:29:53.353
> 
> 标签：knockout.js, xmlhttprequest

我使用 Knockout 在我的 javascript 视图模型中有此代码。一切都按设计工作，除了当我的异步调用的回调返回时，我正在努力让两种方式的绑定更新工作。请参阅下面的代码。

```
var ViewModel = function (counterparty, scenario) {
this.counterparty = ko.observable(counterparty);
this.scenario = ko.observable(scenario);
this.choice = ko.computed(function () {
    // Knockout tracks dependencies automatically. 
    //It knows that fullName depends on firstName and lastName, 
    //because these get called when evaluating fullName.        
    return this.counterparty() + " " + this.scenario();
}, this);

this.loginResult = ko.observable("");
// Do an asynchronous request to a rest service
var xmlhttp = new XMLHttpRequest();
var url = 'http://someloginurl';
xmlhttp.open('GET', url, true, 'user', 'pass');
xmlhttp.send(null);

xmlhttp.onreadystatechange = function() {
    if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
        var response = xmlhttp.responseXML;
        this.loginResult = "Logged In To RNS Successfully";
    } else {
        // wait for the call to complete
    }
};
this.availableCountries = ko.observableArray([
    new Country("UK", 20000),
    new Country("France", 30000)]);
this.selectedCountry = ko.observable();

};
var Country =
function(name, population) {
    this.countryName = name;
    this.countryPopulation = population;
};

ko.applyBindings(new ViewModel("", "")); 
```

所以我需要这段代码来更新在 html 中为 this.loginResult 显示新值的绑定......但这没有发生，我不知道为什么......

我以为这一行 this.loginResult = ko.observable(""); 应该确保该值是“双向绑定”，但似乎不是..有人知道为什么这不会更新吗？

html标签如下：

```
<p><span data-bind="value: loginResult"> </span></p>

if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
        var response = xmlhttp.responseXML;
        this.loginResult = "Logged In To RNS Successfully";
    } else {
        // wait for the call to complete
    } 
```

好的 - 我解决了这个问题..解决方案是稍微重构代码..

首先将变量声明为可观察的

```
// Do an asynchronous request to a rest service
this.loginResult = ko.observable('');
var url = 'someurl';

then refactor the method and pass in the variable so that its defined.
runAsyncRequest(url, this.loginResult);

function runAsyncRequest(url, loginResult) {
var xmlhttp = new XMLHttpRequest();
xmlhttp.open('GET', url, true, 'user', 'pass');
xmlhttp.send(null);
xmlhttp.onreadystatechange = function () {
    if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
        var response = xmlhttp.responseXML;
        loginResult('Logged In To RNS Successfully');
    } else {
        // wait for the call to complete
    }
}; 
```

}

然后一切顺利，绑定更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T11:48:19.723

要在 observable 中设置值，请使用

```
this.loginResult("Logged In To RNS Successfully"); 
```

如果没有括号，您将一个字符串变量分配给 loginResult，而不是用数据填充它。

从可观察的文档：（http://knockoutjs.com/documentation/observables.html）

> 要将新值写入可观察对象，请调用可观察对象并将新值作为参数传递。例如，调用 myViewModel.personName('Mary') 会将名称值更改为 'Mary'。

# javascript - 从 youtube 视频生成音频波形

> ID：13604039
> 
> 赞同：7
> 
> 时间：2012-11-28T11:30:00.860
> 
> 标签：javascript, audio, youtube, waveform

有谁知道是否可以使用 Javascript 从 youtube 播放器中播放的视频中渲染音频波形？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-06-24T09:31:53.507

在客户端，不可能将音频与视频数据隔离开来。您需要获取原始音频数据，然后才能使用 WebAudio API 处理它（例如显示它）。

有一些服务器端解决方案（从视频中提取音频，将其发回等），但这是不合法的，因为它写在 youtube 的 TOS 中：（[https://developers.google.com/youtube/terms?hl =fr](https://developers.google.com/youtube/terms?hl=fr) )

**您不得：**

> 分离、隔离或修改通过 YouTube API 提供的任何 YouTube > 视听内容的音频或视频组件；
> 
> 单独宣传通过 YouTube API 提供的任何 YouTube 视听 > 内容的音频或视频组件；

*有关更多详细信息，请参阅此问题：* [是否有仅提供音频的 Youtube API？](https://stackoverflow.com/questions/26548884/is-there-a-youtube-api-that-gives-only-audio)

# jquery - $ 和 $.fn 有什么区别？

> ID：13604040
> 
> 赞同：3
> 
> 时间：2012-11-28T11:30:01.913
> 
> 标签：jquery

`$`我很好奇，不知道和之间的区别`$.fn`？任何人都可以向我详细解释一下吗？又是什么`$.fn`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T11:31:44.033

`$`是一个函数（特别是指向`jQuery`函数的变量——别名）。`$.fn`是该函数的一个属性，它指向`init`jQuery 用来创建实例的内部函数的原型，正如我们在 jQuery 代码中看到的那样：

```
jQuery.fn.init.prototype = jQuery.fn; 
```

（这是当前未压缩的 jQuery 文件 v1.8.3 的第 289 行。）

`$.fn`是否存在以便向其添加属性很容易。当您创建 jQuery 对象时，它们具有这些属性，因为 JavaScript 的原型继承。最常见的添加属性当然是做事的函数（jQuery 插件）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-28T11:37:27.673

$.fn 是包含所有 $() 函数的对象（$ 原型）。因此，如果您在 $.fn 上定义一个函数，则使用 $() 创建的每个 jQuery 集合都可以访问您的函数。使用这种方法创建 jQuery 插件，例如：

定义：

`$.fn.myPlugin = function(){...}`

用法：

`$(selector).myPlugin();`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T11:31:51.463

该`fn`属性是该属性的别名`prototype`。

`jQuery`标识符（或`$`）只是一个构造函数，所有用它创建的实例都继承自构造函数的原型。

请参阅问题：[jQuery.fn 是什么意思？](https://stackoverflow.com/questions/4083351/what-does-jquery-fn-mean)有关详细示例

# google-places-api - 使用 Google Places api 搜索我的位置

> ID：13604041
> 
> 赞同：0
> 
> 时间：2012-11-28T11:30:06.157
> 
> 标签：google-places-api

我已经使用 google place api 在 google 地方添加了 100 个位置。现在我想知道我添加到 google 地方的位置数量。所以我的问题是，谷歌是否提供了只显示我用我的 api 密钥添加的位置数量的 api？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T02:58:26.333

如果不保留您自己添加的地点的计数，目前这是不可能的。如果您认为这将是一个有用的功能，请添加[Places API - Feature Request](http://code.google.com/p/gmaps-api-issues/issues/entry?template=Places%20API%20-%20Feature%20Request)。

# android - Android：Sherlock Tabs 和 ActionBar 自定义

> ID：13604050
> 
> 赞同：0
> 
> 时间：2012-11-28T11:30:25.813
> 
> 标签：android, actionbarsherlock

我需要一些有关操作栏和选项卡视图自定义的帮助。我使用 Sherlock ActionBar lib 并尝试将自定义选项卡/操作栏样式与 Theme.Sherlock 作为父项绑定到我的活动。但是它不起作用，没有错误，但没有任何改变。我究竟做错了什么？

这是我的风格：（至少更改背景颜色）：

```
<style name="AppBaseTheme" parent="Theme.Sherlock">
    <!--
        Theme customizations available in newer API levels can go in
        res/values-vXX/styles.xml, while customizations related to
        backward-compatibility can go here.
    -->
</style>

<!-- Application theme. -->
<style name="AppTheme" parent="AppBaseTheme">

    <!-- All customizations that are NOT specific to a particular API-level can go here. -->
    <item name="android:actionBarStyle">@style/MyActionBar</item>
    <item name="actionBarStyle">@style/MyActionBar</item>
    <item name="android:actionBarTabBarStyle">@style/MyActionBarTabBar</item>
    <item name="actionBarTabBarStyle">@style/MyActionBarTabBar</item>
    <item name="android:actionBarTabStyle">@style/MyActionBarTab</item>
    <item name="actionBarTabStyle">@style/MyActionBarTab</item>
</style>

<style name="MyActionBar" parent="Widget.Sherlock.ActionBar">
    <item name="android:background">@android:color/white</item>
</style>

<style name="MyActionBarTabBar" parent="Widget.Sherlock.ActionBar.TabBar">
    <item name="android:background">@android:color/black</item>
    <item name="android:layout_height">wrap_content</item>
    <item name="android:layout_width">match_parent</item>
</style>

<style name="MyActionBarTab" parent="Widget.Sherlock.ActionBar.TabView">
    <item name="android:background">@android:color/white</item>
    <item name="android:layout_height">wrap_content</item>
    <item name="android:layout_width">wrap_content</item>
</style> 
```

那是我的清单：

```
<application
    android:icon="@drawable/ic_launcher"
    android:logo="@drawable/abs__ic_go"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".FragmentTabsPager"
        android:label="@string/app_name"
        android:theme="@style/AppTHeme">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

我尝试分别使用 CUstomTabs 和 Theme.Styled(for ActionBar) 样式，但没有结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:51:55.740

```
<style name="Widget.Sherlock.ActionBar.TabView" parent="Widget.Sherlock.ActionBar.TabView"> 
```

您不应该为您正在扩展的父样式使用相同的名称。android应该如何知道选择哪一个？

一个有效的名称将是一个包含您的主题名称以供识别的名称：

```
<style name="AppTheme.ActionBar.TabView" parent="Widget.Sherlock.ActionBar.TabView"> 
```

# sql-server - 如何使用不带条件的日期时间

> ID：13604053
> 
> 赞同：0
> 
> 时间：2012-11-28T11:30:34.337
> 
> 标签：sql-server, conditional-statements, notin

我只需要显示日期时间选择。但在表文件TA 中显示所有日期时间。

**这段代码：**

```
SELECT *
FROM filesTA tf
WHERE NOT tf.EmpNo 
IN (
SELECT lr.EmployeeRun
FROM LeaveRecord lr
WHERE lr.StartDate = '2012-10-01'
) 
```

**输出：**

```
EmpNo | ChkDate | ChkIn | ChkOut
00001 | 2012-10-01 00:00:00.000 | 2012-10-01 07:21:00.000 | 2012-10-01 12:21:00.000
00002 | 2012-10-01 00:00:00.000 | 2012-10-01 08:13:00.000 | 2012-10-01 19:55:00.000
00003 | 2012-10-15 00:00:00.000 | 2012-10-15 07:06:00.000 | 2012-10-15 20:12:00.000
00004 | 2012-10-22 00:00:00.000 | 2012-10-22 07:12:00.000 | 2012-10-22 19:15:00.000 
```

**我需要输出：**

```
EmpNo | ChkDate | ChkIn | ChkOut
00001 | 2012-10-01 00:00:00.000 | 2012-10-01 07:21:00.000 | 2012-10-01 12:21:00.000
00002 | 2012-10-01 00:00:00.000 | 2012-10-01 08:13:00.000 | 2012-10-01 19:55:00.000 
```

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T11:33:14.830

```
SELECT *
FROM filesTA tf
WHERE  tf.EmpNo NOT
IN (
SELECT lr.EmployeeRun
FROM LeaveRecord lr
WHERE lr.StartDate = '2012-10-01'
) 
```

# magento - 管理类别未保存

> ID：13604054
> 
> 赞同：0
> 
> 时间：2012-11-28T11:30:53.913
> 
> 标签：magento

我对管理类别有疑问。当我尝试更改已创建的类别“名称”时，它无法更改且未保存到数据库中，并在控制台中出现以下错误。但是，当我创建新类别时，它会被保存并且不会产生上述错误。当我编辑已经创建的旧类别时，问题就出现了。 当我在控制台中看到 POST?Ajax=true 时，响应以 javascript 的形式给出如下 它返回空值作为响应。

`"NetworkError: 403 Forbidden - [http://www.test.com/index.php/admin/catalog_category/save/key/9487ff918e8f40544635df5359718b53/id/41/?isAjax=true](http://www.test.com/index.php/admin/catalog_category/save/key/9487ff918e8f40544635df5359718b53/id/41/?isAjax=true)"`

`parent.updateContent("http://www.test.com/index.php/admin/catalog_category/edit/id/41/key/f437a3f3555a03e0f9f7750af5b4fb6c/", {}, true);`

请帮我.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T18:23:51.537

可能是您的 mod_security 导致 403 错误。

尝试在 Magento 根目录中的 .htaccess 文件顶部添加以下内容：

```
SecFilterEngine Off
SecFilterScanPOST Off 
```

如果这不起作用，则更容易确定我检查您的 apache 错误日志的确切原因。这些日志将使您更深入地了解您收到 403 错误的原因。

# javascript - Chrome 扩展程序：CRX 文件无法正常工作

> ID：13604055
> 
> 赞同：0
> 
> 时间：2012-11-28T11:30:53.047
> 
> 标签：javascript, google-chrome-extension

我正在尝试安装我的扩展的 CRX 版本，但它没有在地址栏上的扩展按钮上加载一些图像文件。我什至放了 try/catch，但它也没有给出任何错误。Developer/Unpack 版本运行良好。

我在做什么错？我猜我的所有图像文件都没有压缩在 CRX 文件中。不幸的是，我无法提取 CRX 内容，因为重命名为 .ZIP 不允许我在 MacoSX 上解压缩

我通过拖到扩展页面来安装 CRX。我如何测试这个问题？

代码如下：

**清单.jsonn**

```
{
  "name": "Domain Colors",
  "version": "1.0",
  "manifest_version": 2,
  "description": "Change Button Color for domains.",
  "content_scripts": [
    {
      "matches": ["http://*/*","https://*/*"],
      "js": ["script.js"]
    }
  ],
  "permissions": [
  "tabs", "http://*/*"
],
  "browser_action": {
    "default_title": "Colry",
    "default_icon": "blue.png"
  },
  "background": {
    "scripts": ["background41.js"]
    }
} 
```

**脚本.js**

```
alert("Testing Version..Wait for a while");
var request = new XMLHttpRequest();
if (request == null)
{
        alert("Unable to create request");
}
else
{
    try
    {
        var timestamp = new Date().getTime(); //to avoid cache ajax calls
        var randomnumber=Math.floor(Math.random()*11);
        timestamp = timestamp * randomnumber;
        var _domain = document.domain;
        _domain = _domain.replace("www.","");
        var url = "http://xxxxnet/xxx/xxx.asp?xx="+_domain+"&ts="+timestamp;
        request.onreadystatechange = function()
        {
            //request.setRequestHeader('Cache-Control', 'no-cache');
            //request.setRequestHeader('Pragma', 'no-cache');
            if(request.readyState == 4)
            {
                LDResponse(request.responseText);
            }
        }
        request.open("GET", url, true);
        request.send(null);
    }
    catch(e){
        alert('An error has occurred in AJAX Call: '+e.message)
    }
}

function LDResponse(response)
{
    var json = JSON.parse(response);
    alert(response);
    var msg = document.domain+","+json["buttonColour"]+","+json["buttonTip"];
    chrome.extension.sendMessage(msg);
} 
```

**背景文件**

```
var currentUrl = "";
var currentColor = "";
var currentTip = "";

chrome.tabs.onUpdated.addListener(function(tabId, changeInfo) {
    if (changeInfo.status === 'loading')
    {
        chrome.browserAction.setIcon({
            path:'chrome-extension://lkhgldilknhpmdodeblhnbniahbjcdcm/gray.png',
            tabId:tabId
        });
        chrome.extension.onMessage.addListener(function(message, sender)
        {
            try
            {
                var stuff = message.split(",");
                currentUrl = stuff[0];
                currentUrl = currentUrl.replace("www.","");
                currentColor = stuff[1];
                currentTip = stuff[2];
            }
            catch(e)
            {
                alert('An error in onMessage method: '+e.message)
            }
        });
    }
    else if (changeInfo.status === 'complete')
    {
        try
        {
           chrome.browserAction.setIcon({
            path:'chrome-extension://lkhgldilknhpmdodeblhnbniahbjcdcm/'+currentColor+".png",
            tabId:tabId
            });

            chrome.browserAction.setTitle({
              tabId:tabId,
              title:currentTip
            });
        }
        catch(e)
        {
            alert('An error in Complete method: '+e.message)
        }

    }
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T11:47:52.873

替换`path:'chrome-extension://lkhgldilknhpmdodeblhnbniahbjcdcm/'+currentColor+".png`为`path: chrome.extension.getURL("currentColor.png")`使其工作。

您的运行时扩展 id 不是`lkhgldilknhpmdodeblhnbniahbjcdcm`，因此要使用动态生成的内容，您应该使用[`chrome.extension.getURL()`](https://developer.chrome.com/extensions/extension.html#method-getURL)

# java - CR4E Crystal Reports 保存修改后的 ChartObject

> ID：13604056
> 
> 赞同：1
> 
> 时间：2012-11-28T11:30:55.313
> 
> 标签：java, charts, crystal-reports

我正在尝试使用 Java 以编程方式修改 Crystal Report 中的图表。然后 java 将报告提供给查看器。删除项目有效，修改无效。

```
//Experiment : Can we programatically modify a chart?
            ReportDefController rdc = reportClientDocument.getReportDefController();
            ReportObjectController roc = rdc.getReportObjectController();
            ReportObjects ros = roc.getReportObjectsByKind(ReportObjectKind.chart);

            logger.debug("There are " + ros.size() + " chart items");
            IChartObject ro = null;
            IChartObject ro_original = null;
            ISection iSection = null;
            for (int i = 0; i <ros.size(); i++){
                ro = (IChartObject)ros.get(i);
                ro_original = (IChartObject)ros.get(i);
                String rn = ro.getName();
                ChartStyle cs = (ChartStyle) ro.getChartStyle();
                cs.setEnableDataAxisAutoRange(false);
                cs.setEnableShowLegend(false);
                cs.setEnableDepthEffect(true);
                cs.setIsVertical(true);
                cs.setDataAxisMinValue(-2.0);
                cs.setDataAxisMaxValue(100.0);
                Double minVal = (Double)cs.getDataAxisMinValue();
                Double maxVal = (Double)cs.getDataAxisMaxValue();
                boolean d = cs.getEnableDepthEffect();
                boolean l = cs.getEnableShowLegend();
                boolean a = cs.getEnableDataAxisAutoRange();
                boolean v = cs.getIsVertical();
                ro.setChartStyle(cs);
                int sectionCode = ro.getSectionCode();
                iSection = rdc.getReportDefinition().getDetailArea().getSections().getSection(0);
                try
                {
                    //roc.modify((IChartObject)ros.get(i), ro);
                    rdc.modifyChartObject((IChartObject)ros.get(i), ro);
                    reportClientDocument.refreshReportDocument();
                    reportClientDocument.save();
                } catch (ReportSDKException e){
                    writer.println("Couldn't modify graph");
                    e.printStackTrace();
                }
                logger.debug("Chart named "+rn + " With Min Val " + minVal + " and Max Val " + maxVal +" with depth " + d + " and legend " + l + " autorange " + a + " Vertical " + v);
            } 
```

我尝试了 ReportObjectController 的 modify 方法和 ReportDefController 的 modifychartobject 方法，并尝试了 refreshReportDocument 和 save 以尝试获取要更新的内容，但没有任何反应。Logger 显示值正在按照您的预期进行更新。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:08:29.810

我的错误是没有在...克隆对象

```
ro = (IChartObject)ros.get(i) 
```

...所以它应该读...

```
ro = (IChartObject)ros.get(i).clone(false) 
```

..以便..

```
roc.modify((IChartObject)ros.get(i), ro) 
```

..现在可以工作了。希望这可以帮助其他人拥有类似的乐趣和游戏。

# database - 如何在外部企业库配置文件中指定实体框架代码优先连接字符串

> ID：13604062
> 
> 赞同：4
> 
> 时间：2012-11-28T11:31:07.173
> 
> 标签：database, entity-framework, connection-string, enterprise-library, code-first

我正在创建一个 WPF 应用程序，具有经典架构：UI 层、业务逻辑层和基础架构层。我决定将配置拆分为两个文件：app.config 文件，包含常见的应用程序配置，以及 dll.config，包含在 DbContext 中用于域模型存储的连接字符串。第二个 .config 文件应该贴在业务逻辑 DLL 上，而第一个文件贴在相应的 UI 可执行文件上（会有更多的 UI 有它自己的配置）。

应用程序配置：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <configSections>
    <section name="enterpriseLibrary.ConfigurationSource" type="Microsoft.Practices.EnterpriseLibrary.Common.Configuration.ConfigurationSourceSection, Microsoft.Practices.EnterpriseLibrary.Common, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" requirePermission="true" />
  </configSections>

  <enterpriseLibrary.ConfigurationSource selectedSource="Winter DAL Configuration">
    <sources>
      <add name="Winter DAL Configuration" type="Microsoft.Practices.EnterpriseLibrary.Common.Configuration.FileConfigurationSource, Microsoft.Practices.EnterpriseLibrary.Common, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
        filePath="dll.config" />
    </sources>
  </enterpriseLibrary.ConfigurationSource> 
</configuration> 
```

dll.config：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <configSections>
    <section name="dataConfiguration" type="Microsoft.Practices.EnterpriseLibrary.Data.Configuration.DatabaseSettings, Microsoft.Practices.EnterpriseLibrary.Data, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" requirePermission="true" />
  </configSections>
  <dataConfiguration defaultDatabase="WinterContext" />
  <connectionStrings>
    <add name="WinterContext" connectionString="Data Source=Winter.sdf"
      providerName="System.Data.SqlServerCe.4.0" />
  </connectionStrings>
</configuration> 
```

现在，当我启动应用程序时，DbContext 抛出一个异常，说它找不到具有指定名称的连接字符串。如果我将连接字符串从 dll.config 移动到 app.config - 一切正常。

也许我必须以某种方式显式加载配置？或者？..我做错了什么？

提前谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T11:13:10.070

根据提供的配置文件，Entity Framework 在启动项目中查找 root 的 app.config 并没有找到 EF 内容。特别是连接字符串。当您第一次使用 UF 时，它可能会在模型项目中创建此类条目。使用 EF5.0 的 IM 对实体部分的剪切和粘贴非常小心。

```
<configuration>
 <configSections>
<!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
<section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
</configSections>
<startup>
  <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
</startup>
<entityFramework>
 <defaultConnectionFactory type="System.Data.Entity.Infrastructure.LocalDbConnectionFactory, EntityFramework">
   <parameters>
     <parameter value="v11.0" />
   </parameters>
 </defaultConnectionFactory>
</entityFramework>
<connectionStrings>

<add name="CONTEXT_NAME_HERE"
     providerName="System.Data.SqlClient"
     connectionString="Data Source=YOURDB_SERVER;Initial Catalog=YOUR_DBNAME;Integrated Security=True;MultipleActiveResultSets=True;App=EntityFramework" />

</connectionStrings>
</configuration> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T11:50:21.170

我希望我理解你的问题，你想将你的 app.configs 结构化为层次结构，这是有效的，在非常常见的 Web 应用程序中，让 .net 帮助你进行合并的最简单方法是指定应用程序的区域。在所有需要绑定的配置中配置，在内部配置中，您可以覆盖这些值，直到获得最后一个，例如：

根应用程序配置

```
<configuration>
<commonCollection>
    <add key="first"  value="1" />
    <add key="second" value="2" />
    <add key="third"  value="3" />
</commonCollection>
</configuration> 
```

内部应用配置

```
<configuration>
<commonCollection>
    <remove key="first" />        
    <add key="first"  value="10" />
</commonCollection>
</configuration> 
```

结果：

根应用程序配置

```
first : 1
second: 2
third: 3 
```

内部应用配置

```
first: 10
second: 2
third: 3 
```

***编辑***

对于您的 EF 上下文，在构造函数中设置连接字符串：

```
 public MyContextDB() :base("name=DefaultConnection")
 {
 //other initializers
 } 
```

希望能帮助到你，

# php - 多个表上的多个选择选项mysql查询

> ID：13604068
> 
> 赞同：1
> 
> 时间：2012-11-28T11:31:20.573
> 
> 标签：php, mysql

我正在尝试构建一个取决于表单的选定选项的查询。我想我已经完成了这个，但不认为它看起来像我想象的那样高效（如果我给你看脚本，你会认为阅读圣经不会花这么长时间）。我想看看你们中是否有人愿意提出任何想法以提高效率。

用户必须选择两件事：

首先，他们想要显示什么样的发票（albaran），（paid（pagado），open（pte），不开票（sin factura），所有这些（todos））。其次，发票（albaran）指的是哪个客户（特定的一个或全部（todos））。发票和客户是共享 ref_cliente 列的两个不同的 mysql 表

所有这些都是在 page1.php 中选择的，当表单被填写并使用 post 方法发送时，页面重新加载“激活”带有数组 $_POST 加载的脚本。

感谢您的时间和兴趣！

**编辑问题以添加 OP 的表模式**

`TABLE clientes (columns: ref_cliente, nombre, nif)` `TABLE facturas (columns: ref_factura, ref_cliente, estado)`

`estado`是一个 varchar 列，指示发票是否已支付、未支付或未开具。（布尔效果）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:26:49.830

正如 bonCodigo 所说，如果您显示表模式，它可能更容易提供帮助......但是，我会尝试一下。

我将使用两个参数“status”和“client”进行设置，然后必须根据这些参数的值构建 SQL。我正在使用 PDO

喜欢：

```
$sql="SELECT * from invoices i, clients c where c.ref_cliente=i.ref_cliente";
$params=array();
if($_POST['status']!='todos'){
   $sql.=' and i.status=?';
   $params[]=$_POST['status'];
}
if($_POST['clients']!='todos'){
   $sql.=' and c.ref_cliente=?';
   $params[]=$_POST['clients'];
}
$sqlh=$dbh->prepare($sql); // $dbh must be set up, see the PDO-documentation
$sqlh->execute($params); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T01:28:58.230

好吧，看看下面的代码片段。正如 Morten Sickel 所说，我们试图为您提供一些帮助。顺便说一句，您`NIF`指的是 numéro d'identification 财务吗？不应该`varchar`吗？我已经相应地创建了，请输入您需要的正确详细信息和类型。

**参考：**

## [SQLFIDDLE](http://sqlfiddle.com/#!2/da1bb/14)

在上面的示例中，我根据表单的下拉选择放置了您提到的多个简单查询。例如，基于客户的已付发票、基于客户的未付发票、计算每个客户的所有已付、未付的每个客户、显示每个客户的所有发票（已付、未付）等...

**MySQL 查询：**

```
//-- show todos facturas/cliente
SELECT c.*,f.*
FROM clientes c, facturas f
WHERE c.ref_cliente = f.ref_cliente
ORDER BY c.ref_cliente
;

//-- show pagado(paid) facturas/cliente
SELECT c.*,f.*
FROM clientes c, facturas f
WHERE c.ref_cliente = f.ref_cliente
AND f.estado = 'Paid'
ORDER BY c.ref_cliente
;

//-- show pte(open/unpaid) facturas/cliente
SELECT c.*,f.*
FROM clientes c, facturas f
WHERE c.ref_cliente = f.ref_cliente
AND f.estado = 'NotPaid'
ORDER BY c.ref_cliente
;

//-- count number of paid, unpaid facturas/cliente
SELECT c.*, 
COUNT(CASE WHEN f.estado = 'Paid'
THEN f.ref_cliente END) AS PAID,
COUNT(CASE WHEN f.estado = 'NotPaid'
THEN f.ref_cliente END) AS NOTPAID
FROM clientes c, facturas f
WHERE c.ref_cliente=f.ref_cliente
GROUP BY c.ref_cliente
;

//-- with a group concat to show paid/open facturas/cliente
SELECT c.*, 
GROUP_CONCAT(CASE WHEN f.estado = 'Paid'
THEN f.ref_factura END) AS PAID,
GROUP_CONCAT(CASE WHEN f.estado = 'NotPaid'
THEN f.ref_factura END) AS UNPAID
FROM clientes c, facturas f
WHERE c.ref_cliente=f.ref_cliente
GROUP BY f.ref_cliente
; 
```

**结果：**对于上面的每个查询。

```
REF_CLIENTE     NOMBRE  NIF         REF_FACTURA     ESTADO
1               428     57432844Z   1001A           Paid
1               428     57432844Z   1005D           NotPaid
2               418     67832814K   1002B           NotPaid
2               418     67832814K   1001B           NotPaid
2               418     67832814K   1002A           Paid
3               438     87932854F   1001C           Paid
4               448     97232834S   1003A           Paid

REF_CLIENTE     NOMBRE  NIF         REF_FACTURA     ESTADO
1               428     57432844Z   1001A           Paid
2               418     67832814K   1002A           Paid
3               438     87932854F   1001C           Paid
4               448     97232834S   1003A           Paid

REF_CLIENTE     NOMBRE  NIF         REF_FACTURA     ESTADO
1               428     57432844Z   1005D           NotPaid
2               418     67832814K   1002B           NotPaid
2               418     67832814K   1001B           NotPaid

//-- count number of paid, unpaid facturas/cliente
REF_CLIENTE     NOMBRE  NIF         PAID    NOTPAID
1               428     57432844Z   1       1
2               418     67832814K   1       2
3               438     87932854F   1       0
4               448     97232834S   1       0

//-- with a group concat to show paid/open facturas/cliente
REF_CLIENTE     NOMBRE  NIF         PAID    UNPAID
1               428     57432844Z   1001A   1005D
2               418     67832814K   1002A   1002B,1001B
3               438     87932854F   1001C   (null)
4               448     97232834S   1003A   (null) 
```

PS：对不起，我不是特别使用`PHP`，因此您需要将查询放入正确的`PHP`语法中。诸如`estado`和之类的参数`ref_cliente`可能是您从表单的下拉/文本字段中传递的，以通过 sql 触发数据库。**MortenSickel**似乎可以帮助您：P

# php - 群发邮件phpmailer的问题

> ID：13604069
> 
> 赞同：0
> 
> 时间：2012-11-28T11:31:24.153
> 
> 标签：php, email, smtp, phpmailer

我有一个已经开始发送邮件的工作邮件脚本。我们需要向大约 5,000 个电子邮件地址发送一封电子邮件。不过我有一些问题。

1.) 发送速度非常慢。我猜是嵌入？图片有 300+kb 大，它应该像那样减慢发送速度吗？邮件每分钟发送 3 封电子邮件。如果我们要将电子邮件发送给 5000 个收件人，这将花费大量时间。代码是这样的：

```
$mail->AddEmbeddedImage("rocks.png", "my-attach", "rocks.png");
$mail->Body = 'Embedded Image: <img src="cid:my-attach"> 
```

2.) 我们已经注册了一个 smtp，它不会限制我们每天发送 100 封电子邮件。这有点像随用随付，它会跟踪发送的消息。当我检查日志时，有重复的消息。有一些收件人被发送了两次，奇怪的是它只是尝试发送两次邮件然后移动到下一个电子邮件地址。问题在于它消耗了我们对 smtp 服务的限制，并且还在邮件中添加了太多队列，这使得发送时间更长。我的发送代码是这样的：

```
if(isset($fromaddress)){
do{
$mail->AddAddress($row['email']);
$mail->Send();
$mail->ClearAddresses();
}
while ($row = mysql_fetch_array ($result));
} 
```

我的查询类似于：

```
SELECT * from email where id > 200 
```

您可能想知道我的查询。由于连接问题，我需要从超时的地方发送邮件，所以我创建了一个 id 列，并将该数字指定为邮件发送到的最后一个电子邮件地址的 id。我不知道这是否明智，但这就是我目前所拥有的。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T11:34:17.467

1.  根据 PHPMailer 的构建方式，是的，它可能会减慢它的速度。原因很简单：如果您将邮件作为附件发送，则邮件调用必须知道邮件的确切字节大小。它通过准备它来做到这一点，其中包括完整地读取图像。这对一封电子邮件来说是一个很小的延迟，但如果它必须做 5000 次......考虑排队和工作人员方法。

2.  在数据库中添加一个字段，调用它`mailSent`，输入 BIT。每次发送一个，将其设置为 1 对应的行。要选择电子邮件，`SELECT * FROM mails WHERE mailSent='0' LIMIT 100`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T11:41:05.870

我不确定这是否是您问题第 2 部分的答案，但是您是否有充分的理由使用 do-while 循环而不是 while？

根据我对您的代码的了解，第一次迭代将尝试`$row['email']`在 $row 设置之前添加一个电子邮件地址？

就像是：

```
while ($row = mysql_fetch_array($result)) {
    $mail->AddAddress($row['email']);
    //etc
} 
```

应该对你更好。

不确定这是否应该是评论而不是答案，但无论如何我还不能发表评论。

# c# - 一种使用 EmailComposeTask 确定电子邮件是否成功发送的方法

> ID：13604072
> 
> 赞同：0
> 
> 时间：2012-11-28T11:31:37.803
> 
> 标签：c#, windows-phone-7, windows-phone-7.1, windows-phone

我在用`EmailComposeTask`在 Windows Phone 中使用本机电子邮件应用程序。

疑问是如何判断邮件是否发送成功？因为我们没有 Completed 事件`EmailComposeTask`。

我使用 c# 执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T12:19:37.117

不幸的是，没有办法。由于 EmailComposeTask 没有公开完成的处理程序，因此无法知道用户是否发送了邮件，更不用说邮件是否发送成功了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T10:27:55.897

据我所知，没有办法确定电子邮件是否发送成功。唯一的方法就是检查收件箱。

# c++ - 在 C++ 中将 cron 规则转换为纪元时间戳

> ID：13604083
> 
> 赞同：0
> 
> 时间：2012-11-28T11:32:01.660
> 
> 标签：c++, datetime, cron, timestamp, epoch

我有一堆 cron 规则（比如 */10 0 0 0 0，*/10 2 3 * *），我需要将它们转换为纪元时间戳格式（UINT32）。我知道 cron 规则可以映射到一组有限的时间点（规则中没有星号）或无限的时间点（规则中至少有一个星号），所以要求简单的 1:1 转换是没有意义的以任何实际形式。

我唯一的要求是在当前时间计算该 cron 规则下一次出现的纪元时间戳

关于如何在 C++ 中这样做的任何建议？

# jquery - chrome中的jQuery可拖动助手故障

> ID：13604085
> 
> 赞同：2
> 
> 时间：2012-11-28T11:32:22.587
> 
> 标签：jquery, clone, draggable, helper

我尝试了我所知道的一切来解决这个问题，但没有成功。我的网站完全在 IE 和 FF 中运行。在 Chrome 中有一个小故障 - 没有理由。

我有两张桌子。一个源表和一个目标表。我正在将表行 (tr) 从源拖到目标或在目标表内。当我开始拖动该行时，它被一个**自制的助手**克隆以自由拖动它。

```
helper: function(event){
/* HERE IS THE PROBLEM */
   return $('<div class="dragged-row"><table></table></div>')
          .find('table').append($(event.target).closest('tr').clone().addClass("dragged-row")).end();
}, 
```

（我从网上得到这个代码）

当我改用助手“克隆”时，问题就消失了，但我的课程没有应用（紫色背景色）。

**我在[http://jsfiddle.net/jt3LX/上创建了一个最小化的示例](http://jsfiddle.net/jt3LX/)**

您可以拖动一行。如果你开始拖动，两条线都会变成紫色（这是需要的）。但是在 chrome 中，表格的第一行变得越来越大（为什么？？？？）。

您能否帮助我解决以下一种（或两种）可能性：

*   找到另一种方法使源的背景为紫色，
*   找出“第一行变大”的问题——故障。

非常感谢，迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:41:07.457

请改用此行：`return $(this).addClass("dragged-row").clone();`

[http://jsfiddle.net/jt3LX/2/](http://jsfiddle.net/jt3LX/2/)

```
 $(".drag tr").not(".tableHead").draggable({
        helper: function(event){
            /* HERE IS THE PROBLEM */
            return $(this).addClass("dragged-row").clone();
        },
        start: function(event, ui){
            $(this).css("background-color", "#aaaaff");

            c.tr = this;
            c.helper = ui.helper;
        },
        stop: function(event, ui){
            $(this).css("background-color", '');

            c.tr = null;
            c.helper = null;
        }
    }); 
```

在 FF、IE9 和 Chrome 上测试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T13:10:47.327

你说的要求是：

*   找到另一种方法使源的背景为紫色，
*   找出“第一行变大”的问题——故障。

小提琴解决方案：http: [//jsfiddle.net/jt3LX/6/](http://jsfiddle.net/jt3LX/6/)

对于你的第一点`i am guessing`，你`want to make background color of purple when drop happens.`

所以你必须在这部分代码做：

```
stop: function(event, ui){
            $(this).css("background-color", '#aaaaff'); // give purple color code here

            c.tr = null;
            c.helper = null;
        } 
```

并且最大的问题是我看到您没有为表格指定宽度，这使得在执行拖动和克隆进入图片时宽度达到最大。

所以为此我只是给表格一些宽度：

```
.main, .dropTable{position:relative; width:606px;} 
```

现在没有发生如此大的拖拽tr。

我希望你在寻求这种解决方案，我猜这会对你有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T05:27:33.683

我在 Chrome 24 中运行良好。您使用的是哪个版本的 chrome？您可以升级到最新版本的 chrome 并让我知道您是否遇到问题？

# c++ - 哪些 Boost 库是仅头文件？

> ID：13604090
> 
> 赞同：64
> 
> 时间：2012-11-28T11:32:48.000
> 
> 标签：c++, boost

哪些 Boost 库是仅头文件？哪些需要构建库？

这样的清单存在吗？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-11-28T11:36:49.190

需要构建的库列表在[此处](http://www.boost.org/doc/libs/release/more/getting_started/unix-variants.html#header-only-libraries)用于类 Unix 系统，[此处](http://www.boost.org/doc/libs/release/more/getting_started/windows.html#header-only-libraries)用于 Windows。

对于当前版本 1.58，两者是相同的：

*   Boost.Chrono
*   Boost.Context
*   Boost.文件系统
*   Boost.GraphParallel
*   Boost.IOStreams
*   Boost.Locale
*   Boost.MPI
*   Boost.ProgramOptions
*   Boost.Python
*   升压正则表达式
*   Boost.序列化
*   升压信号
*   升压系统
*   Boost.Thread
*   升压定时器
*   升压波

一些库具有可选的单独编译的二进制文件：

*   Boost.DateTime
*   Boost.Graph
*   Boost.Math
*   Boost.Random
*   Boost.Test
*   升压异常

请注意，某些库可能依赖于这些库（例如，Asio 依赖于注释中指出的 System），因此即使您想要的库不在列表中，您仍可能需要构建一些东西。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2018-06-09T17:13:26.180

实际上，甚至`./bootstrap.sh --show-libraries`有些不正确，因为某些库依赖于列出的库。

可以使用 Boost [BCP](https://www.boost.org/doc/libs/1_67_0/tools/bcp/doc/html/index.html "bcp")工具获取仅标头库的列表，在每个库上启动该工具并删除那些链接任何二进制文件的库。这就是*[How To Build Header Only Boost](https://github.com/ki11roy/header_only_boost)*中所做的。

对于 Boost 1.67.0，结果列表是：

```
accumulators
align
any
array
assert
assign
bind
callable_traits
circular_buffer
compatibility
concept_check
config
container_hash
conversion
convert
core
crc
detail
disjoint_sets
dynamic_bitset
endian
foreach
format
function
functional
function_types
fusion
geometry
gil
hana
heap
hof
icl
integer
interprocess
intrusive
io
iterator
lambda
lexical_cast
locale
local_function
logic
metaparse
move
mp11
mpl
msm
multi_array
multi_index
optional
phoenix
poly_collection
polygon
predef
preprocessor
property_tree
proto
ptr_container
qvm
ratio
rational
scope_exit
signals2
smart_ptr
sort
static_assert
throw_exception
tokenizer
tti
tuple
type_index
typeof
type_traits
units
unordered
utility
uuid
variant
vmd
winapi
xpressive 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-09-21T13:13:03.227

我认为上面的列表并不准确，即使它来自官方文档。见[https://svn.boost.org/trac10/ticket/13222](https://svn.boost.org/trac10/ticket/13222)

相反，您可以查询需要构建的库列表：

```
>    ./bootstrap.sh --show-libraries

   The Boost libraries requiring separate building and installation are:

    atomic
    chrono
    container
    context
    coroutine
    date_time
    exception
    fiber
    filesystem
    graph
    graph_parallel
    iostreams
    locale
    log
    math
    metaparse
    mpi
    program_options
    python
    random
    regex
    serialization
    signals
    stacktrace
    system
    test
    thread
    timer
    type_erasure
    wave 
```

*注意*：在 Windows 上，您必须调用 `bootstrap.bat`构建“b2”，然后调用`b2 --show-libraries`。

# actionscript-3 - 在多个movieclip 内更改movieclip 属性，它的alpha

> ID：13604092
> 
> 赞同：1
> 
> 时间：2012-11-28T11:32:54.517
> 
> 标签：actionscript-3, flash

我有一个在另一个movieclip 里面的movieclip，它也在另一个movieclip 里面

SniperGun.Sniper.SniperScope.MC_ScopeEdge。

我将 MC_ScopeEdge 的 alpha 设置为白色的 50%，但是当我运行我的 flash 应用程序时，它变成了全白，而不是半透明的白色。但是当我将 alpha 更改为 0% 时，它会显示一个完全透明的白色影片剪辑。

我也尝试放置一个代码来改变movieclip的alpha

```
ScopeEdgeColorEffect();
function ScopeEdgeColorEffect():void{
    stop();
    MC_ScopeEdge.alpha = 50;
} 
```

但还是一样的效果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T11:54:17.663

alpha 的有效值是 0（完全透明）到 1（完全不透明）。尝试 alpha = 0.5 以获得半透明。

# objective-c - 检查应用程序是否安装在 /Application 目录中

> ID：13604095
> 
> 赞同：1
> 
> 时间：2012-11-28T11:32:59.617
> 
> 标签：objective-c, macos, cocoa

有没有办法检查应用程序是否已安装并从 /Application 启动？*我在登录工作区的启动仅在应用程序安装在 /Application 目录中时才有效。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T12:27:52.613

您应该能够使用以下命令来获取可执行文件的路径

```
[[NSBundle mainBundle] executablePath] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T12:26:04.100

以下代码应返回可执行文件的完整路径：

```
[[[NSProcessInfo processInfo] arguments] objectAtIndex:0] 
```

然后检查它是否属于 /Applications

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T12:37:47.640

检查任何应用程序..

```
CFURLRef appURL = NULL;
OSStatus result = LSFindApplicationForInfo (kLSUnknownCreator,
                                            CFSTR("com.yourdomain.theapp"), //App bundle id.
                                            NULL,                      
                                            NULL,                      
                                            &appURL);
switch(result)
{
    case noErr:
        NSLog(@"Found my app@: %@",appURL);
        break;
    case kLSApplicationNotFoundErr:
        NSLog(@"App not found");
        break;
    default:
        NSLog(@"an error occurred: %d",result);
        break;          
}

if(appURL)
    CFRelease(appURL); 
```

# javascript - SetInterval 在 Firefox 中看不到函数

> ID：13604099
> 
> 赞同：0
> 
> 时间：2012-11-28T11:33:14.363
> 
> 标签：javascript, firefox, setinterval

我对 JavaScript 很陌生，所以如果这是一个愚蠢的问题，请原谅我。我正在使用下面的代码来让一个图像滑到屏幕上，然后再一个接一个地出现另外 2 个图像。这适用于 Chrome 和 IE 7-9。不幸的是，在 Firefox 上我收到一条错误消息：

> move 未定义 [ mover = setInterval(move, 1000); ]

我的代码：

```
//define variables
var mover = 0
var bubble1move = 0
var bubble2move = 0

if(mover != 0)
{//interval is finished
    function move ()
    {   
        console.log("moving")
        clearInterval(mover)
        var moving_img = document.getElementById("i_sliding_image")
        var left = 0
        function frame() 
        {       
            left -= 2  // update parameters
            moving_img.style.left = left + 'px'// show frame
            if (left == -274) // check finish condition
            {
                clearInterval(id)                   
                bubble1move = setInterval(function() {bubble1()}, 2000);
            }
        }
        var id = setInterval(frame, 10) // draw every 10ms
    }       
}
if(bubble1move != 0)
{//interval is finished
    function bubble1()
    {
        clearInterval(bubble1move);     
        document.getElementById("img-bubble1").style.zIndex = "1";
        bubble2move = setInterval(function() {bubble2()}, 2000);
    }
}
if(bubble2move != 0)
{//interval is finished
    function bubble2()
    {
        clearInterval(bubble2move)
        var vBubble2 = document.getElementById("img-bubble2").style
        vBubble2.zIndex = "1";
    }
}
window.onload = function initialiser()
{
    mover = setInterval(move, 1000);//initial time to animation
} 
```

所有 getElementByIds 都在获取包含图像的 div 标签。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T11:39:43.577

看起来您在 js 开始时将您的移动变量初始化为 0 并且您的 if 语句仅声明函数 if `mover != 0`。`mover = 1;`在 if 语句之外初始化或使用您的函数（推荐）。你只是想`move()`在它存在之前打电话

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T11:41:03.070

将您的功能移到`if`. 没有理由让它在`if`. 由于 Firefox 解释函数的方式（与其他浏览器不同），它在 Firefox 上不起作用。

有关更多信息，请参阅[此问题](https://stackoverflow.com/questions/4069100/why-cant-i-use-a-javascript-function-before-its-definition-inside-a-try-block)。

感谢@freakish 的链接。

# javascript - 是否有使用扩展器的 knockout.js 屏蔽输入插件？

> ID：13604103
> 
> 赞同：17
> 
> 时间：2012-11-28T11:33:17.357
> 
> 标签：javascript, knockout.js, maskedinput

我看过这篇[文章](https://stackoverflow.com/questions/9160446/is-it-possible-to-use-knockoutjs-with-a-masked-input)- 它显示了一种可能的解决方案。但我希望有一种更优雅的方式来进行屏蔽输入。

它还应该与淘汰赛验证插件（或扩展它）很好地配合。

有谁知道那里有类似的项目吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-10T13:15:01.130

如果您想在 Knockout 中使用出色的[Masked Input 插件](http://digitalbush.com/projects/masked-input-plugin/)，编写基本的自定义绑定而不是扩展程序非常容易。

```
ko.bindingHandlers.masked = {
    init: function(element, valueAccessor, allBindingsAccessor) {
        var mask = allBindingsAccessor().mask || {};
        $(element).mask(mask);
        ko.utils.registerEventHandler(element, 'focusout', function() {
            var observable = valueAccessor();
            observable($(element).val());
        });
    }, 
    update: function (element, valueAccessor) {
        var value = ko.utils.unwrapObservable(valueAccessor());
        $(element).val(value);
    }
}; 
```

然后在您的 HTML 中：

```
<input type="text" data-bind="masked: dateValue, mask: '99/99/9999'" />
<input type="text" data-bind="masked: ssnValue, mask: '999-99-9999'" /> 
```

等等各种面具。这样，您可以将掩码直接放在数据绑定中，并且具有很大的灵活性。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-05-11T21:55:36.857

干得好，稻米人。为了使用 Masked Input Plugin 的“占位符”属性，我使用了您的代码并对其进行了一些扩展：

```
 ko.bindingHandlers.masked = {
        init: function (element, valueAccessor, allBindingsAccessor) {
            var mask = allBindingsAccessor().mask || {};
            var placeholder = allBindingsAccessor().placeholder;
            if (placeholder) {
                $(element).mask(mask, { placeholder: placeholder });
            } else {
                $(element).mask(mask);
            }
            ko.utils.registerEventHandler(element, "blur", function () {
                var observable = valueAccessor();
                observable($(element).val());
            });
        },
        update: function (element, valueAccessor) {
            var value = ko.utils.unwrapObservable(valueAccessor());
            $(element).val(value);
        }
    }; 
```

带占位符的 HTML：

```
 <input id="DOB" type="text" size="12" maxlength="8" data-bind="masked: BirthDate, mask: '99/99/9999', placeholder: 'mm/dd/yyyy', valueUpdate: 'input'"/> 
```

没有占位符的 HTML：

```
 <input id="DOB" type="text" size="12" maxlength="8" data-bind="masked: BirthDate, mask: '99/99/9999', valueUpdate: 'input'"/> 
```

KO 绑定无论哪种方式都有效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T13:03:17.800

只需从该链接中的答案中获取代码并将其放入扩展器中（随意编写，可能有错误）

```
ko.extenders.masked = function(observable, options) {
    return ko.computed({
        read: function() {
            return '$' + this.observable().toFixed(2);
        },
        write: function(value) {
            // Strip out unwanted characters, parse as float, then write the raw data back to the underlying observable
            value = parseFloat(value.replace( /[^\.\d]/g , ""));
            observable(isNaN(value) ? 0 : value); // Write to underlying storage
        }
    });
}; 
```

编辑：您可能希望将掩码作为选项提供，而不是将其硬编码为美元等

**更新：** 如果您想使用 riceboyler 答案中的掩码插件，但可以使用扩展器

```
ko.extenders.mask = function(observable, mask) {
    observable.mask = mask;
    return observable;
}

var orgValueInit = ko.bindingHandlers.value.init;
ko.bindingHandlers.value.init = function(element, valueAccessor) {
    var mask = valueAccessor().mask;
    if(mask) {
        $(element).mask(mask);
    }

    orgValueInit.apply(this, arguments);
} 
```

[http://jsfiddle.net/rTK6G/](http://jsfiddle.net/rTK6G/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-06-14T16:25:23.793

我尝试使用第一个答案，但它不适用于 ko.validation 插件。我的验证错误没有显示出来。

我想要更直观的 ko binder。这是我的解决方案。我正在使用 jquery.inputmask 插件。如果没有输入值，我也会清除视图模型上的属性。

```
 ko.bindingHandlers.mask = {
        init: function (element, valueAccessor, allBindingsAccessor, viewModel,     bindingContext) {
            var mask = valueAccessor() || {};
            $(element).inputmask({ "mask": mask, 'autoUnmask': false });
            ko.utils.registerEventHandler(element, 'focusout', function () {
                var value = $(element).inputmask('unmaskedvalue');            
                if (!value) {
                    viewModel[$(element).attr("id")]("");                
                }
            });
        }
    }; 
```

这是用法：

```
<input type="text" data-bind="value: FEIN, mask: '99-9999999'" id="FEIN" > 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-07T13:50:55.280

你可以使用这个自制的解决方案，非常适合我：

我的 Binding 淘汰赛电话蒙面来自网络，我添加了一些托管语言并从不同的事件中更新。我也基本使用这个 js 库：[https ://plugins.jquery.com/maskedinput/](https://plugins.jquery.com/maskedinput/)

您可以在我的绑定中看到术语“allBindingsAccessor().mask”，这是来自库 maskedinput

```
 ko.bindingHandlers.masked = {
    init: function (element, valueAccessor, allBindingsAccessor) {
        var mask = allBindingsAccessor().mask || {},
        getCaretPosition,
        setCaretPosition;

        // Permet d'obtenir la position du curseur
        getCaretPosition = function getCaretPosition(element) {
            // Initialise la position
            var caretPos = 0, sel;

            // IE 
            if (document.selection) {
                // Donne le focus à l'élément
                element.focus();
                // Afin d'obtenir la position du curseur
                sel = document.selection.createRange();
                // On place le curseur à 0
                sel.moveStart('character', -element.value.length);
                caretPos = sel.text.length;
            }
                // Firefox 
            else if (element.selectionStart || element.selectionStart === '0') {
                caretPos = element.selectionStart;
            }
            return (caretPos);
        };

        // Permet de définir la position du curseur en fonction d'une position donnée
        setCaretPosition = function setCaretPosition(element, pos) {
            var range;
            if (element.setSelectionRange) {
                element.focus();
                element.setSelectionRange(pos, pos);
            }
            else if (element.createTextRange) {
                range = element.createTextRange();
                range.collapse(true);
                range.moveEnd('character', pos);
                range.moveStart('character', pos);
                range.select();
            }
        };

        // Définition du masque inséré dans le champ
        if (configSvc.culture === "fr-FR") {
            // Cas francais
            $(element).mask("99/99/9999", { placeholder: "JJ/MM/AAAA" });
        }
        else {
            // Cas anglophone
            $(element).mask("99/99/9999", { placeholder: "MM/DD/YYYY" });
        }

        // On capte l'événement d'appuie sur une touche 
        ko.utils.registerEventHandler(element, 'keypress', function () {
            var observable = valueAccessor(),
                position;
            // Afin de résoudre le pb de déplacement du curseur a la fin du mask lors de la mise à jour de l'observable knockout
            if ($(element).val().length === 10) {
                // On récupère la dernière position
                position = getCaretPosition(this);
                // On met à jour la valeur de l'obersable (en cas de sauvegarde) 
                observable($(element).val());
                // On force la position du curseur apres mise à jour de l'observable à la derniere position récupéré
                setCaretPosition(this, position);
            }
        });

        // On capte l'événement de perte de focus pour mettre l'obersable à jour
        ko.utils.registerEventHandler(element, 'blur', function () {
            var observable = valueAccessor();
            observable($(element).val());
        });

        // On capte l'événement change pour mettre l'obersable à jour
        ko.utils.registerEventHandler(element, 'change', function () {
            var observable = valueAccessor();
            observable($(element).val());
        });
    },
    update: function (element, valueAccessor) {
        var value = ko.utils.unwrapObservable(valueAccessor());
        $(element).val(value);
    }

}; 
```

在我的 html 页面中，我使用了这个可观察到的“掩码”：

```
<input type="text" id="head-birthDate" class="form-control" data-bind="masked: birthDate" /> 
```

最后在我的 js 中：

birthDate 只是一个可观察的

```
this.birthDate = ko.observable(); 
```

# ios - 将 Git 存储库克隆到 iPhone

> ID：13604104
> 
> 赞同：-1
> 
> 时间：2012-11-28T11:33:21.070
> 
> 标签：ios, git

我想开发一个执行`git clone`命令的 iOS 应用程序，基本上可以在手机上获取存储库。在那之后，唯一的命令就是`git fetch`我会定期更新文件。在这 2 个命令之后，不再需要任何其他命令。只是对文件进行本地解析。

我的问题是我可以在 iOS 上做到这一点吗？我在 ubuntu 上有一个类似的应用程序，使用 'git .....' 命令很容易做到

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:45:09.033

您无法在 ios 上启动其他应用程序/进程，因此您无法调用 git 可执行文件。

但是有 libgit2 - ac 静态库，您可以在 ios 应用程序中使用它来使用 git：请参阅[http://libgit2.github.com](http://libgit2.github.com)

有一个 objC 包装器可以轻松使用：请参阅[https://github.com/libgit2/objective-git](https://github.com/libgit2/objective-git)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-30T19:51:35.280

[您可以通过iSH 应用程序](https://ish.app/)在 iOS 上使用 Git 。

也就是说，您可以安装应用程序，使用 安装 Git `apk add git`，然后就可以开始了。

这可能对您没有直接用处，但我在这里写这篇文章是因为这是我在 Google 上搜索“how to `git push`/ `git pull`on iPhone”时的第一次点击

# php - 我应该如何在服务器端实现 GCM 推送过程？

> ID：13604105
> 
> 赞同：0
> 
> 时间：2012-11-28T11:33:23.707
> 
> 标签：php, android, google-cloud-messaging, throttling

我目前正在为 android 开发 GCM 并使用 PHP 实现服务器代码。现在，我的代码如下所示：

```
$url = 'https://android.googleapis.com/gcm/send';
$registrationIDs = array('device1', 'device2');//device ids from database.

$fields = array(
                'registration_ids'  => $registrationIDs,
                'data'              => array( "message" => $message ),
                );

$headers = array( 
                    'Authorization: key=' . $apiKey,
                    'Content-Type: application/json'
                );

// Open connection
$ch = curl_init();

// Execute post
$result = curl_exec($ch);

// Close connection
curl_close($ch); 
```

当我执行时，结果如下：

```
{
  "multicast_id": 5407120473654582795,
  "success": 1,
  "failure": 1,
  "canonical_ids": 1,
  "results": [
    {
      "registration_id": "skjdfhksdfgksudghldshfgkdjfghdiugf",
      "message_id": "0:1354101888763222%14c0e050f9fd7ecd"
    },
    {
      "error": "MismatchSenderId"
    }
  ]
} 
```

GCM页面上有注释：

> *   如果消息已创建，但结果返回了规范注册 ID，则需要将当前注册 ID 替换为规范注册 ID。
> *   如果返回的错误是 NotRegistered，则需要删除该注册 ID，因为该应用程序已从设备上卸载。

我的问题是：

1.  根据服务器输出，我有 1 个规范结果。但是，我不确定它属于哪个设备。**我如何确定它？**
2.  基于问题（1），我知道我可以一次将设备发送到 GCM 一个。但是，这又提出了另一个问题。**如果我有数百万台设备怎么办？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:01:07.527

基于此页面上的信息[GCM 架构概述](http://developer.android.com/guide/google/gcm/gcm.html)

它是数组中第一个需要将其 regid 替换为“skjdfhksdfgksudghldshfgkdjfghdiugf”的元素。数组中的第二个元素是彻底失败。

数以百万计的设备？- 不！高达 1000 ? - 是的

在同一页上是

**registration_ids** 一个字符串数组，其中包含接收消息的设备列表（注册 ID）。它必须包含至少 1 个且**最多 1000 个**注册 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T17:17:44.210

[您可以在GCM 高级主题页面](http://developer.android.com/google/gcm/adv.html#canonical)上阅读有关规范 ID 的更多信息：

> 如果稍后您尝试使用不同的注册 ID 发送消息，GCM 将照常处理请求，但它将在响应的 registration_id 字段中包含规范注册 ID。确保使用此规范 ID 替换存储在您服务器中的注册 ID，因为最终您使用的 ID 将停止工作。

您还可以在“[响应格式](http://developer.android.com/google/gcm/gcm.html#response)”部分阅读更多信息。

如果您要向数百万台设备发送消息，则必须使用 JSON 以 1000 个注册 ID 块的形式发送消息。Google 文档提供了以下作为发送到六台设备的示例：

```
{ "data": {
    "score": "5x1",
    "time": "15:10"
  },
  "registration_ids": ["4", "8", "15", "16", "23", "42"]
} 
```

# java - 使用 try/catch 进行最终变量赋值

> ID：13604111
> 
> 赞同：82
> 
> 时间：2012-11-28T11:33:47.333
> 
> 标签：java, final

`final`因为我相信这是一种很好的编程习惯，所以如果打算只编写一次，我会制作所有（本地或实例）变量。

但是，我注意到，当变量赋值可能引发异常时，您不能将所述变量设为最终变量：

```
final int x;
try {
    x = Integer.parseInt("someinput");
}
catch(NumberFormatException e) {
    x = 42;  // Compiler error: The final local variable x may already have been assigned
} 
```

有没有办法在不使用临时变量的情况下做到这一点？（或者这不是最终修饰符的正确位置吗？）

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-11-28T11:38:30.637

一种方法是引入一个（非`final`）临时变量，但您说您不想这样做。

另一种方法是将代码的两个分支移动到一个函数中：

```
final int x = getValue();

private int getValue() {
  try {
    return Integer.parseInt("someinput");
  }
  catch(NumberFormatException e) {
    return 42;
  }
} 
```

这是否实用取决于确切的用例。

总而言之，只要`x`是一个适当范围的局部变量，最实用的通用方法可能是将其保留为非`final`.

另一方面，如果`x`是成员变量，我的建议是`final`在初始化期间使用非临时变量：

```
public class C {
  private final int x;
  public C() {
    int x_val;
    try {
      x_val = Integer.parseInt("someinput");
    }
    catch(NumberFormatException e) {
      x_val = 42;
    }
    this.x = x_val;
  }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-28T11:39:21.100

不，这不是正确的地方，假设你在 try 和 catch 块中有超过 1 个语句，第一个语句说：x = 42。在其他一些语句之后，try 块失败，它转到 catch 块，你的说 x = 30。现在你定义了 x 两次。

# joomla - Joomla忘记密码电子邮件：添加用户名

> ID：13604113
> 
> 赞同：0
> 
> 时间：2012-11-28T11:34:00.510
> 
> 标签：joomla, joomla1.5

如何将用户名发送给 Joomla PASSWORD_RESET_CONFIRMATION_EMAIL_TEXT 中的用户？

Joomla“忘记密码”过程会向用户发送一封包含令牌的电子邮件。然后，他们可以使用电子邮件中的 URL 转到“确认您的帐户”页面。但是在这里他们需要输入他们的用户名和令牌。如果用户忘记了他们的密码，他们不太可能记住他们的用户名。因此，我想在电子邮件中显示用户名，以便用户轻松重置忘记的密码。

该网站使用 Joomla 1.5.23。

谢谢。

编辑以添加更多信息：我已经看到有关相同问题的此项目： [忘记密码的电子邮件配置](https://stackoverflow.com/questions/13232811/email-message-configuration-for-forgot-password)

但这会添加`$fromname`到电子邮件中；这就是已发送电子邮件中显示的站点名称。它不是用户名。所以我不相信这是解决方案。

所以我认为我需要在 components/com_user/models/reset.php 中进行类似的编辑，以将用户名包含在此行的电子邮件消息中（大约第 256 行）：

```
$body = JText::sprintf('PASSWORD_RESET_CONFIRMATION_EMAIL_TEXT', $sitename, $token, $url); 
```

只是添加`$username`（文件前面提到的）不会显示任何内容。

然后我会修改语言以引用以下文件中的用户名变量：

```
language/en-GB/en-GB.com_user.ini 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:35:53.240

首先，我知道这不是您的问题的一部分，但请升级到 Joomla 1.5.26，它是 1.5 系列的最新版本。

然后尝试将以下内容添加到函数中：

```
$user =& JFactory::getUser();
$user2 = $user->username; 
```

然后改变`$body`用这个替换变量：

```
$body = JText::sprintf('PASSWORD_RESET_CONFIRMATION_EMAIL_TEXT', $sitename, $user2, $token, $url); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:21:46.373

您正在尝试在忘记的电子邮件中添加用户名？那么你可以试试这个。

你可以找到一些与此类似的行。在重置模型中。

```
$user =& JFactory::getUser();

here the $user object the current requested user email(if exists).
The you will get all the details of that user by using this object.

like $user->username,$user->email etc. 
```

这不能解决您的问题，那么您应该尝试自定义查询，使用请求的电子邮件 ID（唯一）从 jos_users 获取用户的详细信息。

希望这会有所帮助..

# android - 在 appwidget 中调整自定义视图大小的问题，无法确定 android 上的实际大小 appwidget，尤其是在平板电脑上

> ID：13604116
> 
> 赞同：1
> 
> 时间：2012-11-28T11:34:03.167
> 
> 标签：android, size, width, android-appwidget

我正在设计一个 AppWidget，我遇到了这样的问题：我在 xml 中定义

```
android:minWidth ="296dp"
android:minHeight="146dp" 
```

这意味着我的小部件的 4x2 单元格大小。
在我的程序代码中，我通过在画布上绘制文本和图形来创建自定义视图。为了正确缩放我的自定义视图，我必须知道我的 appwidget 在主屏幕上的位置的边界尺寸。我找不到任何有用的信息来确定主屏幕上的实际 appwidget 大小（所有资源都告诉过 - “你不能！” - 真的是这样吗？）所以我使用`android:minWidth`and估计了我的 appwidget 大小`android:minHeight="146dp"`。

问题是我无法在我用于测试的所有设备上正确显示我的小部件，尤其是与平板电脑有关的设备。
我已经阅读了[https://developer.android.com/guide/practices/ui_guidelines/widget_design.html](https://developer.android.com/guide/practices/ui_guidelines/widget_design.html)和其他官方文档，但我无法得出正确的结论。

1 - 我找到了两个公式来确定一个单元格的大小：

```
1)minWidth or minHeight = 70 * n - 30       and
2)minWidth or minHeight = 74 * n - 2 
```

我使用了第二个并确定它非常适用于普通手机（不适用于三星 Galaxy Tab），但官方提供使用第一个。如果我在手机上使用第一个它也可以工作，但是我有一个较小的小部件组件（大小小部件组件 - 我在画布上绘制的文本、矩形等），因此 appwidget 的外观比第二个更差案子。

在平板电脑的情况下，我的自定义视图的右侧/左侧有一个空白区域，并且考虑到我的小部件布局（我有自定义小部件和两个按钮），它看起来很糟糕。我认为平板电脑上出现空白是因为 appwidget 的实际宽度和估计宽度不匹配。

如何计算在平板电脑上看起来合适的尺寸小部件？

2 - 我无法使用 9-patch 资源，因为我以编程方式创建视图。我尝试在布局小部件中使用 android:scaleType

```
<ImageView
        android:id="@+id/custom_view"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:adjustViewBounds="true"
        android:scaleType="fitXY"
        android:clickable="true"
        android:contentDescription="@string/image_description" /> 
```

但是，例如，在摩托罗拉 Xoom 中，我的 appwidget 在拉伸自定义视图后的外观很糟糕。

3 - 我发现 Android 设备本身会调整小部件的大小，但我无法安静地理解这种调整大小的逻辑。

毕竟，在我的情况下，如何为手机和平板电脑设计 appwidget 大小？我会非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-28T09:15:13.823

我认为这是不可能的——我的应用小部件也有同样的问题。相反，您可以创建不同版本的应用小部件（即 1x4、2x3 等），但我知道这不是您真正想要的。在应用程序小部件中完成的缩放，例如 TextView 内的文本（即使使用 sp）似乎超出了我们在 appwidgets 中的控制范围。

# javascript - 如何在 HTML 页面中正确存储 HTML 模板？

> ID：13604128
> 
> 赞同：12
> 
> 时间：2012-11-28T11:34:38.857
> 
> 标签：javascript, mustache

我有一些小的模板字符串，它们将通过 Mustache.js 在同一页面上呈现。我不需要为模板创建单独的 html 文件。

用于存储模板的选项：

1.  存储在 javascript 变量中：Hackish 多行字符串，大量转义引号。

2.  存储为隐藏 div 的 innerHTML。

我尝试了方法#2，但它似乎无法正常工作。

小提琴：http: [//jsfiddle.net/RHwnq/2/](http://jsfiddle.net/RHwnq/2/)

```
<html>
<head></head>
<body>
<div id='templates' class='hide' align="">
         <div id='tableTemplate'>
            <table class="table">
                 {{#name_list}}
                  <tr><td> {{name}} </td></tr>
                {{/name_list}}
            </table>
         </div>
</div>

<script>
 var template = $('#tableTemplate').html();
 console.log(template);
</script>

</body>
</html> 
```

这记录：

```
{{#name_list}}
  {{name}} 
{{/name_list}}
<table class="table"><tbody><tr><td></td></tr></tbody></table> 
```

代替 ：

```
 <table class="table">
                     {{#name_list}}
                      <tr><td> {{name}} </td></tr>
                    {{/name_list}}
  </table> 
```

这可能是由于浏览器的一些标记更正。在 HTML 页面中存储 HTML 模板还有哪些其他好的技巧？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-28T11:46:44.870

我将它们存储在脚本标签中，因此它们不会被渲染，如下所示：

```
<script id="abc-template" type="text/html">
    <h1>{{name}}</h1>
</script> 
```

然后，您可以像这样引用它们：

```
var template = $('#abc-template').html();
var html = Mustache.to_html(template, data);
$('#abc-div').html(html); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-28T11:47:18.207

使用`<script>`标签非常适合：

```
<script id="tableTemplate" type="text/html">
  <table class="table">
    {{#name_list}}
    <tr><td> {{name}} </td></tr>
    {{/name_list}}
  </table>
</script> 
```

它实际上是一个插入式替代品，它将与您的`var template = $('#tableTemplate').html();`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-17T18:17:30.753

根据您的 IDE，您可能会或可能不会在`<script></script>`块中获得 HTML 语法突出显示。我`div`像你一样使用一个块，但是添加

```
#templates {display: none;} 
```

到 CSS。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-19T09:35:36.690

我会使用 HTML“模板”标签。

`<template id="tmp">Some HTML here</template>`

看这个例子：

[https://jsfiddle.net/cityremade/xwLht8vc/](https://jsfiddle.net/cityremade/xwLht8vc/)

# eclipse - Eclipse 无法打开 java me 透视图

> ID：13604132
> 
> 赞同：0
> 
> 时间：2012-11-28T11:34:52.007
> 
> 标签：eclipse, java-me

我想学java我。我已经到以下站点下载所需的内容。我的 Eclipse 版本是[Juno](http://www.oracle.com/technetwork/java/javame/javamobile/download/sdk/index.html)。

我做了以下事情：

```
Eclipse Juno
The Oracle Java ME SDK requires the MTJ toolkit, but it is not bundled with Juno and it must be installed manually. Therefore, install MTJ toolkit first.

    Go to Help > Install New Software.
    In the "Work with" field, enter this URL: http://download.eclipse.org/releases/indigo
    Click Add. When the plugins are discovered, open the Mobile and Device Development Tools hierarchy and check Mobile Tools for Java Examples, Mobile Tools for Java SDK, and Mobile Tools for Java Examples. Click Next. On the installation screen select all plugins and click Finish.
    A Juno plugin named org.eclipse.jetty.server_(version).jar conflicts with the MTJ libraries when the plugin version is higher than 6\. If it is you must prevent it from loading by changing its name so the Jar file is not parsed. For example, change it to: org.eclipse.jetty.server.old
    To open the device selector, select Window > Open Perspective > Other and select Java ME. 
```

MTJ 与还需要安装的 3 个软件包一起安装：

*   Java 示例的移动工具
*   Java SDK 移动工具
*   Java 示例的移动工具

当我选择：`Window`> `Open Perspective`>`Other` 没有 Java ME 选项。有谁知道为什么没有显示该选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T11:20:28.970

我不知道确切原因，但`MTJ`不运行[`Juno`](http://www.eclipse.org/juno/). 如果你喜欢`Eclipse`用[`Indigo`](http://www.eclipse.org/indigo/).
你考虑过使用[`NetBeans`](http://netbeans.org/downloads/)吗？

# android - Android 开发：需要从“联系人”上下文更改本地

> ID：13604134
> 
> 赞同：2
> 
> 时间：2012-11-28T11:35:00.027
> 
> 标签：android, local, contact

我是一名 Java 开发人员，但我是 android sdk 的新手...

我想制作一个应用程序，当您向联系人发送消息时更改键盘/本地/字典/预测......使用短信或 Whatsapp 或其他......

我的目标是制作一个应用程序，您可以在其中将语言与特定联系人匹配。

如果我想向 Ernesto 发送消息，区域设置将自动更改为我在我的应用程序中定义的语言（这里是西班牙语）......约翰（英语）和弗朗索瓦（法语）也是如此

如果没有为联系人定义语言...使用默认系统区域设置...

有没有人可以帮助我开始？

谢谢

# c++ - int64_t 的定义

> ID：13604137
> 
> 赞同：84
> 
> 时间：2012-11-28T11:35:13.590
> 
> 标签：c++, c, integer, long-integer

我是 C/C++ 新手，所以我有几个关于基本类型的问题：

a) 你能解释一下`int64_t`和`long`( `long int`) 之间的区别吗？据我了解，两者都是 64 位整数。有什么理由选择一个而不是另一个吗？

b) 我试图在网上查找 的定义`int64_t`，但没有成功。有没有我需要咨询这些问题的权威来源？

c）对于`int64_t`用于编译的代码，我目前包括`<iostream>`，这对我来说没有多大意义。是否还有其他提供声明的包含`int64_t`？

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-11-28T11:38:18.413

> a) 你能解释一下`int64_t`和`long`( `long int`) 之间的区别吗？据我了解，两者都是 64 位整数。有什么理由选择一个而不是另一个吗？

前者是有符号整数类型，*正好是*64 位。后者是*至少*32 位的有符号整数类型。

> b) 我试图在网上查找 的定义`int64_t`，但没有成功。有没有我需要咨询这些问题的权威来源？

[http://cppreference.com](http://cppreference.com)在这里介绍：[http](http://en.cppreference.com/w/cpp/types/integer) ://en.cppreference.com/w/cpp/types/integer 。然而，权威来源是[C++ 标准](https://stackoverflow.com/questions/81656/where-do-i-find-the-current-c-or-c-standard-documents)（这个特定的位可以在 §18.4 整数类型 [cstdint] 中找到）。

> c) 对于`int64_t`用于编译的代码，我包括`<iostream>`，这对我来说没有多大意义。是否还有其他提供声明的包含`int64_t`？

它在`<cstdint>`or中`<cinttypes>`（在命名空间下`std`）或在`<stdint.h>`or中`<inttypes.h>`（在全局命名空间中）声明。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-28T11:38:18.643

`int64_t`C99 标准保证在实现它的平台上*正好是*64 位宽，对于`long`至少 32 位的 a 没有这样的保证，所以它可能更多。

> §7.18.1.3 精确宽度整数类型 1 typedef 名称 intN_t 指定宽度为 N 、无填充位和二进制补码表示的有符号整数类型。因此，int8_t 表示宽度正好为 8 位的有符号整数类型。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-28T11:38:46.340

`int64_t``typedef`你能`<stdint.h>`在C中找到吗

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-28T11:37:59.173

int64_t 在任何平台上都应该是 64 位宽（因此得名），而 long 在不同平台上可以有不同的长度。特别是，sizeof(long) 通常为 4，即。32 位。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-02-25T09:24:09.637

我的 2 美分，从当前实现的观点和 k8 (x86_64) 架构上的 SWIG 用户。

# Linux

首先`long long`和`long int`是不同的类型，但是`sizeof(long long) == sizeof(long int) == sizeof(int64_t)`

## 海合会

首先尝试查找编译器在哪里以及如何定义 int64_t 和 uint64_t

```
grepc -rn "typedef.*INT64_TYPE" /lib/gcc
/lib/gcc/x86_64-linux-gnu/9/include/stdint-gcc.h:43:typedef __INT64_TYPE__ int64_t;
/lib/gcc/x86_64-linux-gnu/9/include/stdint-gcc.h:55:typedef __UINT64_TYPE__ uint64_t; 
```

所以我们需要找到这个编译器宏定义

```
gcc -dM -E -x c /dev/null | grep __INT64                 
#define __INT64_C(c) c ## L
#define __INT64_MAX__ 0x7fffffffffffffffL
#define __INT64_TYPE__ long int

gcc -dM -E -x c++ /dev/null | grep __INT64
#define __INT64_C(c) c ## L
#define __INT64_MAX__ 0x7fffffffffffffffL
#define __INT64_TYPE__ long int 
```

## 铛

```
clang -dM -E -x c++ /dev/null | grep INT64_TYPE
#define __INT64_TYPE__ long int
#define __UINT64_TYPE__ long unsigned int 
```

Clang，GNU 编译器：
`-dM`转储宏列表。
`-E`将结果打印到标准输出而不是文件。
`-x c`并`-x c++`在使用没有文件扩展名的文件时选择编程语言，例如`/dev/null`

参考：[https ://web.archive.org/web/20190803041507/http://nadeausoftware.com/articles/2011/12/c_c_tip_how_list_compiler_predefined_macros](https://web.archive.org/web/20190803041507/http://nadeausoftware.com/articles/2011/12/c_c_tip_how_list_compiler_predefined_macros)

注意：对于 swig 用户，在 Linux x86_64 上使用`-DSWIGWORDSIZE64`

# 苹果系统

在 Catalina 10.15 IIRC 上

## 铛

```
clang -dM -E -x c++ /dev/null | grep INT64_TYPE
#define __INT64_TYPE__ long long int
#define __UINT64_TYPE__ long long unsigned int 
```

Clang：
`-dM`转储宏列表。
`-E`将结果打印到标准输出而不是文件。
`-x c`并`-x c++`在使用没有文件扩展名的文件时选择编程语言，例如`/dev/null`

参考：[https ://web.archive.org/web/20190803041507/http://nadeausoftware.com/articles/2011/12/c_c_tip_how_list_compiler_predefined_macros](https://web.archive.org/web/20190803041507/http://nadeausoftware.com/articles/2011/12/c_c_tip_how_list_compiler_predefined_macros)

注意：对于 swig 用户，在 macOS x86_64**上不要**使用`-DSWIGWORDSIZE64`

# 视觉工作室 2019

首先 `sizeof(long int) == 4`和`sizeof(long long) == 8`

在`stdint.h`我们有：

```
#if _VCRT_COMPILER_PREPROCESSOR

typedef signed char        int8_t;
typedef short              int16_t;
typedef int                int32_t;
typedef long long          int64_t;
typedef unsigned char      uint8_t;
typedef unsigned short     uint16_t;
typedef unsigned int       uint32_t;
typedef unsigned long long uint64_t; 
```

注意：对于 swig 用户，在 windows x86_64**上不要**使用`-DSWIGWORDSIZE64`

# SWIG 东西

首先查看 [https://github.com/swig/swig/blob/3a329566f8ae6210a610012ecd60f6455229fe77/Lib/stdint.i#L20-L24](https://github.com/swig/swig/blob/3a329566f8ae6210a610012ecd60f6455229fe77/Lib/stdint.i#L20-L24)以便您可以使用`SWIGWORDSIZE64`但...

现在不好了：[SWIG Java](https://github.com/swig/swig/blob/3a329566f8ae6210a610012ecd60f6455229fe77/Lib/java/java.swg#L74-L77)和[SWIG CSHARP](https://github.com/swig/swig/blob/1e36f51346d95f8b9848e682c2eb986e9cb9b4f4/Lib/csharp/csharp.swg#L117-L120)不考虑它

所以你可能想使用

```
#if defined(SWIGJAVA)
#if defined(SWIGWORDSIZE64)
%define PRIMITIVE_TYPEMAP(NEW_TYPE, TYPE)
%clear NEW_TYPE;
%clear NEW_TYPE *;
%clear NEW_TYPE &;
%clear const NEW_TYPE &;
%apply TYPE { NEW_TYPE };
%apply TYPE * { NEW_TYPE * };
%apply TYPE & { NEW_TYPE & };
%apply const TYPE & { const NEW_TYPE & };
%enddef // PRIMITIVE_TYPEMAP
PRIMITIVE_TYPEMAP(long int, long long);
PRIMITIVE_TYPEMAP(unsigned long int, long long);
#undef PRIMITIVE_TYPEMAP
#endif // defined(SWIGWORDSIZE64)
#endif // defined(SWIGJAVA) 
```

和

```
#if defined(SWIGCSHARP)
#if defined(SWIGWORDSIZE64)
%define PRIMITIVE_TYPEMAP(NEW_TYPE, TYPE)
%clear NEW_TYPE;
%clear NEW_TYPE *;
%clear NEW_TYPE &;
%clear const NEW_TYPE &;
%apply TYPE { NEW_TYPE };
%apply TYPE * { NEW_TYPE * };
%apply TYPE & { NEW_TYPE & };
%apply const TYPE & { const NEW_TYPE & };
%enddef // PRIMITIVE_TYPEMAP
PRIMITIVE_TYPEMAP(long int, long long);
PRIMITIVE_TYPEMAP(unsigned long int, unsigned long long);
#undef PRIMITIVE_TYPEMAP
#endif // defined(SWIGWORDSIZE64)
#endif // defined(SWIGCSHARP) 
```

所以`int64_t`aka`long int`将绑定到`long`Linux 上的 Java/C#...

# android - 在应用程序产品列表未出现在开发者控制台的 apk 下

> ID：13604138
> 
> 赞同：1
> 
> 时间：2012-11-28T11:35:13.720
> 
> 标签：android

Hiii，对每个人......当我将我的 .apk 上传到 Google Play 开发者控制台时，我在测试应用程序购买时被困住了。我在未发布的 .apk 下没有获得“应用内产品”链接。我读过很多文档，但我很困惑。任何建议都会非常有帮助。提前致谢。

# java - Android 开发：如何通过 https 创建网络登录

> ID：13604139
> 
> 赞同：-8
> 
> 时间：2012-11-28T11:35:23.557
> 
> 标签：java, android, https, port

我在网上搜索过，但无济于事，我没有找到问题的答案。

我需要我的 android 应用程序连接到我的网络服务器。

例子`https://SERVER-ADDRESS:PORT/`

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:38:04.790

```
try{
String url = "https://SERVER-ADDRESS:PORT/site/login?username=" + user + "&password=" + password;
HttpParams params = new BasicHttpParams();
        HttpConnectionParams.setConnectionTimeout(params, 1000 * 60 * 2);
        HttpConnectionParams.setSoTimeout(params, 0);
        HttpClient httpClient = new DefaultHttpClient(params);

        //prepare the HTTP GET call 
        HttpGet httpget = new HttpGet(url);
        //get the response entity
        HttpEntity entity = httpClient.execute(httpget).getEntity();

        if (entity != null) {
            //get the response content as a string
            String response = EntityUtils.toString(entity);
            //consume the entity
            entity.consumeContent();

            // When HttpClient instance is no longer needed, shut down the connection manager to ensure immediate deallocation of all system resources
            httpClient.getConnectionManager().shutdown();
           }
    }catch (Exception e) {
        e.printStackTrace();
    } 
```

# twitter-bootstrap - 引导弹出窗口，图像作为内容

> ID：13604144
> 
> 赞同：33
> 
> 时间：2012-11-28T11:35:43.647
> 
> 标签：twitter-bootstrap, popover

我正在尝试这样做：

```
$("a[rel=popover]").popover({
    html:       true,
    trigger:    'hover',
    content:    '<img src="'+$(this).data('img')+'" />'
}); 
```

但它不起作用，因为 $(this).data('img') 不起作用。

为什么我这样做，我在 data-content 属性中与模板和 html 有冲突。因此，我将图像源放在 data-img 属性中，并喜欢将其抓取并放入 img 元素中。

我已经尝试过了，但效果不完全：

```
$("a[rel=popover_img]").popover({
    html:       true,
    trigger:    'hover',
    content:    '<img src="#" id="popover_img" />'
}).hover(function(){
    $('#popover_img').attr('src',$(this).data('img'));
}); 
```

我希望有人可以帮助我:)

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-11-28T18:42:09.037

就目前而言，您`this`正在引用当前范围，而您希望引用 Popover 实例附加到的元素。这只需将您拥有的表达式包装`content`在一个函数中即可完成：

```
$('a[rel=popover]').popover({
  html: true,
  trigger: 'hover',
  content: function () {
    return '<img src="'+$(this).data('img') + '" />';
  }
}); 
```

见演示：

## [普朗克](http://embed.plnkr.co/nhlFPz)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-01-05T22:41:15.250

merv 提出的替代方案，为简单起见，您可以将许多 jquery 属性嵌入到 html 中，并使 jquery 轻量化，例如

```
<a href="#" data-toggle="popover" title="Popover Header" data-html="true" data-content="<img src='http://localhost:15249/img1.jpg' width='200' />">Toggle popover</a> 
```

并通过 jquery 调用弹出框

```
$('["popover"]').popover() 
```

使用这种方式的注意点，data-html应该设置为true，否则图片不会被解释为html而是文本

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-02-21T21:37:24.547

试试这个

[html]

```
<a href="#"><i class="menu-icon fa fa-picture-o fa-3x" data-rel="popover" title="<strong>Hi, I'm Popover</strong>" data-placement="top" data-content="<img src='https://www.google.co.id/images/branding/googlelogo/2x/googlelogo_color_272x92dp.png' width=50% height=50%>"></i></a> 
```

[javascript]

```
$(document).ready(function() {
$('[data-rel=popover]').popover({
  html: true,
  trigger: "hover"
}); 
```

})

[检查一下] [https://jsfiddle.net/j4qptkzr/20/](https://jsfiddle.net/j4qptkzr/20/)

# android - 在清单中使用“uses-sdk”时无法将文件保存在 SD 卡中

> ID：13604145
> 
> 赞同：1
> 
> 时间：2012-11-28T11:35:44.870
> 
> 标签：android

当我尝试将文件存储在 sdcard 中时，我正在创建一个应用程序来录制语音

```
<uses-sdk android:minSdkVersion="8" 
```

它给了我错误“没有这样的文件或目录”，但是当我从清单中注释掉“uses-sdk”部分时，它工作正常。我不确定实际问题是什么，但似乎是由于在清单中设置了 sdk-version。我也尝试增加/减少 minSdkVersion，但仍然是同样的错误。

下面是错误日志。

```
 11-28 15:53:54.887: W/System.err(5935): java.io.FileNotFoundException: /mnt/sdcard/Recorder/voicemail.3gp (No such file or directory)
11-28 15:53:54.897: W/System.err(5935):     at org.apache.harmony.luni.platform.OSFileSystem.open(Native Method)
11-28 15:53:54.897: W/System.err(5935):     at dalvik.system.BlockGuard$WrappedFileSystem.open(BlockGuard.java:232)
11-28 15:53:54.897: W/System.err(5935):     at java.io.FileOutputStream.<init>(FileOutputStream.java:94)
11-28 15:53:54.897: W/System.err(5935):     at java.io.FileOutputStream.<init>(FileOutputStream.java:165)
11-28 15:53:54.897: W/System.err(5935):     at java.io.FileOutputStream.<init>(FileOutputStream.java:144)
11-28 15:53:54.897: W/System.err(5935):     at android.media.MediaRecorder.prepare(MediaRecorder.java:540)
11-28 15:53:54.897: W/System.err(5935):     at com.abc.SendVoiceMailFragment.startRecording(SendVoiceMailFragment.java:96)
11-28 15:53:54.897: W/System.err(5935):     at com.abc.SendVoiceMailFragment.access$0(SendVoiceMailFragment.java:84)
11-28 15:53:54.897: W/System.err(5935):     at com.abc.SendVoiceMailFragment$3.onClick(SendVoiceMailFragment.java:59)
11-28 15:53:54.897: W/System.err(5935):     at android.view.View.performClick(View.java:2532)
11-28 15:53:54.897: W/System.err(5935):     at android.view.View$PerformClick.run(View.java:9293)
11-28 15:53:54.897: W/System.err(5935):     at android.os.Handler.handleCallback(Handler.java:587)
11-28 15:53:54.897: W/System.err(5935):     at android.os.Handler.dispatchMessage(Handler.java:92)
11-28 15:53:54.897: W/System.err(5935):     at android.os.Looper.loop(Looper.java:150)
11-28 15:53:54.897: W/System.err(5935):     at android.app.ActivityThread.main(ActivityThread.java:4277)
11-28 15:53:54.897: W/System.err(5935):     at java.lang.reflect.Method.invokeNative(Native Method)
11-28 15:53:54.897: W/System.err(5935):     at java.lang.reflect.Method.invoke(Method.java:507)
11-28 15:53:54.897: W/System.err(5935):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
11-28 15:53:54.897: W/System.err(5935):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
11-28 15:53:54.897: W/System.err(5935):     at dalvik.system.NativeStart.main(Native Method) 
```

**编辑** 这是我的清单文件

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    package="com.abc"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" /> 

    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" >
    </uses-permission>
    <uses-permission
        android:name="android.permission.INTERNET"
        android:protectionLevel="normal" >
    </uses-permission>
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" >
    </uses-permission>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" >
    </uses-permission>
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" >
    </uses-permission>
    <uses-permission android:name="android.permission.GET_ACCOUNTS" >
    </uses-permission>
    <uses-permission android:name="android.permission.USE_CREDENTIALS" >
    </uses-permission>
    <uses-permission android:name="android.permission.MANAGE_ACCOUNTS" >
    </uses-permission>
    <uses-permission android:name="android.permission.AUTHENTICATE_ACCOUNTS" >
    </uses-permission>
    <uses-permission android:name="android.permission.CAMERA" >
    </uses-permission>
    <uses-permission android:name="android.permission.SEND_SMS" >
    </uses-permission>
    <uses-permission android:name="android.permission.RECORD_AUDIO" >
    </uses-permission>
    <uses-permission android:name="androd.permission.WRITE_EXTERNAL_STORAGE" />

    <supports-screens
        android:anyDensity="true"
        android:largeScreens="false"
        android:normalScreens="true"
        android:smallScreens="true" />

    <application
        android:debuggable="true"
        android:icon="@drawable/icon"
        android:label="@string/app_name"
        android:theme="@style/tab_name" >
        <activity
            android:name=".SplashScreen"
            android:icon="@drawable/icon"
            android:label="@string/app_name"
            android:screenOrientation="portrait"
            android:theme="@android:style/Theme.NoTitleBar" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>    
</manifest> 
```

**我创建文件的代码**

```
private String getFilename(){
        String filepath = Environment.getExternalStorageDirectory().getPath();
        File file = new File(filepath,AUDIO_RECORDER_FOLDER);

        if(!file.exists()){
            file.mkdirs();
        }

        return (file.getAbsolutePath() + "/" + AUDIO_FILE_NAME + ".3gp");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:41:48.617

您是否创建了存储文件的文件夹？（使用`mkdirs()`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T14:35:45.387

在清单中执行您正在执行的操作的正确方法是：

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" /> <!-- You need a target 
```

这部分也应该在`<uses-sdk>`标签之后：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

# actionscript-3 - 如何通过使用变换手势拖动转盘来控制影片剪辑？

> ID：13604147
> 
> 赞同：1
> 
> 时间：2012-11-28T11:35:46.707
> 
> 标签：actionscript-3, rotation, gesture, movieclip

我有一个使用旋转 TransformGestureEvent 顺时针旋转 120 度和逆时针旋转 120 度的表盘。

旋转此转盘时，我希望它控制影片剪辑。在顺时针旋转拨盘时拖动影片剪辑，然后在逆时针旋转拨盘时反转影片剪辑。我希望影片剪辑跟随拨盘的拖动，在拖动拨盘时停止和开始。

这是我到目前为止所拥有的，但它似乎只是将影片剪辑转到最后一帧然后停止？

```
 import flash.display.MovieClip;
    var dial_mc:MovieClip;
    var knobs_mc:MovieClip;
    var maxRotation:Number = 120;

    var knobFrame:int = knobs_mc.currentFrame;
    var offset:Number = 0;
    var percent:Number = 0;

    knobs_mc.stop();

    Multitouch.inputMode = MultitouchInputMode.GESTURE;

    dial_mc.addEventListener(TransformGestureEvent.GESTURE_ROTATE, rotateDial);

    function rotateDial(e:TransformGestureEvent):void
    {
dial_mc.rotation +=  e.rotation;
if (dial_mc.rotation > maxRotation)
{
    dial_mc.rotation = maxRotation;
}
if (dial_mc.rotation < 0)
{
    dial_mc.rotation = 0;
}
dial_mc.addEventListener(TransformGestureEvent.GESTURE_ROTATE, drag);
offset = e.rotation;
if (e.phase == GesturePhase.END)
{
    knobFrame = knobs_mc.currentFrame;

}

function drag(e:TransformGestureEvent):void
{

    percent =  (e.rotation - offset)/knobs_mc.rotation;

    var frame:int = Math.round(percent * knobs_mc.totalFrames) + knobFrame;

    while (frame > knobs_mc.totalFrames)
    {
        frame -=  knobs_mc.totalFrames;
    }

    while (frame <= 0)
    {
        frame +=  knobs_mc.totalFrames;
    }

    knobs_mc.gotoAndStop(frame);
}
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:20:35.753

您必须调整数学以映射从 -120 到 120 到 0 到 240 的角度。这样，当您尝试转到一个帧时，您可以获得完整的范围。我假设帧 1 - 120 的表盘指向左侧。

另一种方法是完全抛弃框架，直接使用角度旋转表盘。

# iphone - 如何在目标c中调用带参数的长方法

> ID：13604150
> 
> 赞同：1
> 
> 时间：2012-11-28T11:35:59.833
> 
> 标签：iphone, ipad, uipageviewcontroller

我如何在目标 c 中手动调用以下方法。我需要这个，因为我的按钮在另一个类中，它必须调用另一个类的方法。该方法是我需要调用的委托方法。任何人都可以指导我。

提前致谢。

这是我需要在 A 类中调用的方法。

```
- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerAfterViewController:(UIViewController *)viewController
{
int index = [self.VControllers indexOfObject:viewController];
if (index + 1 < [self.VControllers count])
{
    return [self.VControllers objectAtIndex:index + 1];
}
return nil;
} 
```

B类：

```
-(void)next
 {
exampleViewController *vc = [[exampleViewController alloc]init];
[vc pageViewController:vc.pageViewController viewControllerAfterViewController:vc.view];
} 
```

我需要的是通过这种方法移动下一个视图控制器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:39:45.907

[实例名称pageViewController：upvc viewControllerAfterViewController：uvw]；

其中 instanceName 是包含此方法的类的实例，upvc 是您传递的 UIPageViewController 参数，uvw 是您传递的 UIViewController 参数。

如果你想对返回的 UIViewController 做点什么：

UIViewController *vc = [instanceName pageViewController: upvc viewControllerAfterViewController: uvw];

如果你想从一个按钮调用它，你必须声明一个处理按钮内部事件的 IBAction 方法。您可以从 IBAction 调用此方法。所以在你的 .h 中声明 IBAction

```
-(IBAction) buttonPressed: (id) sender; 
```

并在 .m 中像这样实现

```
-(IBAction) buttonPressed: (id) sender
{
     UIViewController *vc = [instanceName pageViewController: upvc viewControllerAfterViewController: uvw];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T11:43:17.943

您可以像调用其他函数一样手动调用函数

在B类

```
#import "ClassA.h" 
```

并使其对象

```
ClassA *classA_Object = [[ClassA alloc] init];

UIViewController *ViewController = [classA_Object pageViewController:classA_Object.yourPageViewController viewControllerAfterViewController:classA_Object.view]; 
```

根据您的代码，您可以将其称为。

```
[self next] 
```

和

```
-(void)next
 {
exampleViewController *vc = [[exampleViewController alloc]init];
[vc pageViewController:nil viewControllerAfterViewController:vc.view];
} 
```

# android - 检索由另一个布局定义的视图的位置

> ID：13604151
> 
> 赞同：1
> 
> 时间：2012-11-28T11:36:02.673
> 
> 标签：android, android-layout, animation, position, android-animation

我在屏幕的右上角（或任何地方）有一个视图。我想将此视图动画到某个位置。该位置由另一个 xml 布局定义。如何确定视图在其他布局中的坐标，以便将其设置为动画到这个位置？

背景：假设视图显示了一个放置在右上角的计算器。当用户点击这个计算器视图时，它应该被动画到一个更当前的地方。在这个动画之后，当前片段被替换为包含完全相同的视图（和其他视图）以及计算器逻辑的 CalculatorFragment。目标是将计算器动画到 CalculatorFragment 的 xml 布局定义的确切位置。这样就可以创建一个“无缝”的 FragmentTransition。

提出这个问题的另一种方式可能是“如何在不显示在屏幕上的情况下找出视图的位置？”
到目前为止，最有希望的方法是这个（但我只得到零作为坐标）：

```
View fragmentView = getActivity().getLayoutInflater().inflate(R.layout.fragment_calculator, null);
View calc = fragmentView.findViewById(R.id.includeCalculator);
int[] coords = new int[2];
calc.getLocationInWindow(coords);
pictureframe.setAnimateToX(coords[0]);
pictureframe.setAnimateToY(coords[1]);

Log.v(TAG, "X: " + coords[0] + " Y: " + coords[1]); 
```

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:07:51.817

您可以将其写入 res 文件夹的 anim 文件夹内的 xml 文件中，而不是使用另一个 XML 文件来定位您想要为视图设置动画的任何位置。

你可以使用加载动画 -

```
android.view.animation.Animation animation = AnimationUtils.loadAnimatio
(getApplicationContext(),R.anim.translate); 
```

翻译.xml：

```
android:fromXDelta="50%p" 
android:fromYDelta="100%p" 
android:toXDelta="0%p" 
android:toYDelta="0%p" 
android:duration="10" 
android:fillAfter="true" />

</set> 
```

您可以根据需要调整 X 和 y 位置。

# image - 单击返回按钮产品页面时，Magento 重新加载问题 ipad 类别页面

> ID：13604152
> 
> 赞同：1
> 
> 时间：2012-11-28T11:36:08.187
> 
> 标签：image, performance, magento

在以下情况下，我们的商店遇到问题：

您在类别页面并单击到产品页面。单击浏览器中的后退按钮后，类别页面不会重新加载。在类别页面上，我们将鼠标悬停在图像上。

这样，类别页面上的图像就会在 iPad 和 iphone 上消失。这仅适用于我们的一个模板，而另一个模板则可以正常工作。

有人可以让我知道是否有控制器或其他东西可以做到这一点。

亲切的问候，

科恩·沃尔斯特拉

# python - 如何退出异常循环，但不重新引发每个异常类型？

> ID：13604155
> 
> 赞同：3
> 
> 时间：2012-11-28T11:36:22.103
> 
> 标签：python, exception-handling

我有一个要终止的循环`KeyboardInterrupt`：

```
while True:
    try:
        do_stuff()
    except KeyboardInterrupt:
        cleanup()
        break
    except Exception as e:
        cleanup()
        raise e 
```

这很好用，但`cleanup()`对我来说双重似乎很不干净。我不喜欢重复的代码。我尝试使用上下文管理器，但这引入了很多不必要的复杂性，并且文件大小几乎翻了一番。

有没有更简洁的方式来表达我的意图？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T11:39:07.160

您可以`BaseException`同时使用

```
try:
   do_stuff():
except BaseException as e:
    cleanup()
    if isinstance(e, KeyboardInterruption):
        break
    raise e 
```

此外，您可以使用 only`raise`代替`raise e`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-28T11:39:08.130

`finally`关键字正是您要查找的内容。[关于错误和异常的文档](http://docs.python.org/2/tutorial/errors.html#defining-clean-up-actions)解释了它的用法。

> finally 子句总是在离开 try 语句之前执行，无论是否发生异常

* * *

如果清理只应该在离开循环时发生，我建议交换循环和 try ：

```
try:
    while True:
        do_stuff()
except KeyboardInterrupt:
    pass
finally:
    cleanup() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T11:39:34.590

听起来你想要这个`finally`子句：

```
while True:
  try:
    do_stuff()
  except KeyboardInterrupt:
    break
  finally:
    cleanup() 
```

`cleanup()`将始终调用，无论是否引发或捕获异常。

# php - 如何在 CodeIgniter 的 db 活动记录中使 like() 方法不区分大小写？

> ID：13604157
> 
> 赞同：4
> 
> 时间：2012-11-28T11:36:32.693
> 
> 标签：php, codeigniter

例如，如果我有这些变量：

```
$variable1 = "ABCDEFG";
$variable2 = "AbCDefG"; 
```

和 db 中的内容如下：

```
ABCDEFG
IJKLMNO
PQRSTUV
... 
```

如果我尝试像这样使用 like() 方法：

```
function get_users()
{

    $q = $this->db->select('*')
                  ->from('users')
                  ->order_by('created asc')
                  ->like('username', $variable1)
                  ->get();
    return $q;

} 
```

结果就OK了，从数据库中找到**ABCDEFG**记录。

但是，如果我通过大写和小写的 $variable2 结果将是无：

```
function get_users()
{

    $q = $this->db->select('*')
                  ->from('users')
                  ->order_by('created asc')
                  ->like('username', $variable2)
                  ->get();
    return $q;

} 
```

，这是错误的，因为我需要忽略它是小写还是大写。

如何解决这个问题？

顺便提一句。我的数据库排序规则是**utf8_general_ci**

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-28T11:46:04.900

试试这个：

```
function get_users()
{

    $q = $this->db->select('*')
                  ->from('users')
                  ->order_by('created asc')
                  ->like('LOWER(username)', strtolower($variable2))
                  ->get();
    return $q;

} 
```

# c++ - gdb 在多态方法上设置断点

> ID：13604173
> 
> 赞同：0
> 
> 时间：2012-11-28T11:37:25.830
> 
> 标签：c++, gdb, breakpoints

是否可以在方法和所有将覆盖它的方法上设置断点？

考虑以下代码：

```
struct Foo {
    virtual void a();
};

struct Bar : public Foo {
  virtual void a();
}; 
```

是否可以使用 rbreak 以外的单个命令在两个“a”方法上设置断点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T17:54:38.800

不幸的是，现在在 gdb 中没有办法做到这一点。

我认为这将是一个很好的补充。但是，使用起来会非常昂贵。gdb 必须读取 debuginfo 中的所有类型以查找 Foo 的子类。

# javascript - 从 jQuery 函数调用 coffeescript 函数

> ID：13604175
> 
> 赞同：0
> 
> 时间：2012-11-28T11:37:27.297
> 
> 标签：javascript, jquery, function, coffeescript

我有两个文件：第一个是纯 jQuery，第二个是 Coffeescript

jQuery 文件：

```
$(document).ready(function(){
    checkPrice();
}); 
```

咖啡脚本文件：

```
$ ->
   checkPrice = ->
     alert("OK"); 
```

我收到以下错误：“未处理的错误：未定义的变量：checkPrice”

在模板中，它们以相反的方向包含：coffeescript 文件，然后是 jquery 文件。

有没有办法让他们一起工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T11:55:12.157

好的。知道了。

checkPrice 应该被声明为全局，所以在咖啡脚本文件中我有：

```
window.checkPrice =->
  alert("OK"); 
```

现在它起作用了！

无论如何，感谢所有在那里帮助我的人。

# android - HttpClient.execute 出现错误

> ID：13604176
> 
> 赞同：0
> 
> 时间：2012-11-28T11:37:33.310
> 
> 标签：android, wifi, httpresponse

我试着解决这个问题，但我就是想不通。我是 android 的程序，并且有从服务器获取数据的类。如果我连接到 WiFi，一切正常，但如果我关闭 WiFi 到移动连接，它只能在少数手机上工作。（适用于 Galaxy Note，不适用于 Galaxy Nexus 和 Galaxy 2）

代码很简单：

```
public void execute(DSRESTCommand command) throws DBXException {
    HttpClient client = null;

    HttpUriRequest method = CreateRequest(command);
    client = getHttpClient();
    HttpResponse response = client.execute(method);
    setSessionIdentifier(response);
    throwExceptionIfNeeded(response)
    String s = EntityUtils.toString(response.getEntity()); 
```

我在调试模式下对此进行了测试，结果证明它在工作时`client`和`command`不工作时是相同的。

我在调试模式下看到的唯一不同是`response` （和 Galaxy Note 上的）字符串 s whit WiFi 看起来像：

```
 {"result":["Cube tree loaded ...  size: 3657",[60,63,120,109,108,32,118,... 
```

关闭 WiFi 它看起来像：

```
<?xml version="1.0"?>
<!DOCTYPE wml PUBLIC "-//WAPFORUM//DTD WML 1.1//EN" "http://www.wapforum.org/DTD/wml_1.1.xml">

<wml>
    <card id="FEHLER" title="ERROR">
       <p>
        The requested item could not be loaded <br/>
        Wrong MIME-Type
       <do type="prev" label="back">
           <prev/>
       </do>

       </p>
      </card>
</wml> 
```

谁能知道为什么会这样？请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T15:14:06.157

我发现我的问题有问题。我会把它发布给那些有类似问题的人。

原来是移动设置中的问题。我所要做的就是从手机中的 APN 中删除代理

# python - Python：如何检查参数的类型是按值传递还是按引用传递？

> ID：13604180
> 
> 赞同：-1
> 
> 时间：2012-11-28T11:37:46.150
> 
> 标签：python, types, pass-by-reference, pass-by-value

似乎原子类型（int、string、...）是按值传递的，而所有其他类型（对象、指向函数的指针、指向方法的指针，...）都是通过引用传递的。

检查变量是按值传递还是按引用传递的最佳方法是什么？

```
isinstance(input_, float) or isinstance(input_, basestring) or <...> 
```

似乎很不雅。

我需要它的原因如下：我有一个包装 wx.Button 的类，如果 args/kwargs 是按值传递的类型，则不会考虑在其他对象中更新它们的值。所以一些检查将是有益的

```
class PalpyButton(wx.Button):        
    def __init__(self, parent, btnLabel, handler, successMsg = None, args = (), kwargs = {}):
        super(PalpyButton, self).__init__(parent, -1, btnLabel)
        self.handler = handler
        self.successMsg = successMsg
        parent.Bind(wx.EVT_BUTTON, lambda event: self.onClick(event, *args, **kwargs), self)
    def onClick(self, event, *args, **kwargs):
        try:
            self.handler(*args, **kwargs)
            if self.successMsg != None:
                if hasattr(self.successMsg, '__call__'):
                    showInfoMessageBox(self.successMsg())
                else:
                    showInfoMessageBox(self.successMsg)
        except BaseException, detail:
            showErrorMessageBox(detail) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-28T11:41:34.173

这个问题不成立。无论类型、值、操作系统、月相等如何，*一切都以完全相同的方式传递。*

是否最好将这种参数传递风格描述为按值传递、按引用传递或其他方式，还有待商榷（尽管请注意，使用“按值/引用传递”需要“值”/“引用”的非标准定义”，这是其他术语（例如“通过对象”）的主要推理）。在这里没关系。它总是一样的。

**编辑：**就您的示例而言， 的语义`handler`不会根据参数类型而改变。要么分配给变量（AKA 名称）：

```
def my_handler(x):
    x = <whatever> 
```

...但`my_handler(<anything>)`不会更改参数所指的对象（如果您传入局部变量、对象属性、更复杂表达式的结果或其他任何内容，都无关紧要）。顺便说一句，*一切*都是对象，您的人为区分（“原子”，“指向函数的指针”）毫无意义。

或者，该函数（尝试）更改*对象的值*（例如，向集合添加/删除项目，更改对象属性，调用更改某些可以间接观察到的状态的方法）。如果对象不支持它（例如调用不存在的方法），这可能会引发异常，但这会发生在任何访问中，而不仅仅是突变。如果对象的值确实改变了，这*总是通过**每个*可见的*对该对象的引用。由于在许多情况下会创建对现有对象的新引用（例如参数传递、变量赋值、属性赋值等），您可以通过在一个地方更改其值并在另一个地方观察更改来观察对象不会被复制. 这适用于所有对象（同样，前提是您可以更改对象的值）。*

 *现在，一些对象是不可变的，这（根据定义）意味着你不能改变它们的值，因此不能以这种方式观察对象“共享”（你可以用其他方式观察它）。这并不意味着赋值根据可变性具有不同的语义（它没有），它只是意味着你可以用可变对象做一些你不能用不可变对象做的事情。您可以对两者执行的操作对两者都一样。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-28T12:25:51.527

如果您确实需要更改传递给您的变量的值，则可以将其包装在数组中以在过程中实现按引用传递：

```
def increaseInt(i_var):
  i_var[0] += 1

i_ref = [42]
increase(i_ref)
print i_ref[0]  # will print 43 
```

在某些情况下，这可能是解决像您这样的问题的（有问题的）解决方案。

但总的来说，所有值在 Python 中都是通过引用传递的（在某种意义上，没有创建副本）；有些值是不可变的（如整数、字符串、元组……）。您可能会对为参数变量分配一个新值感到困惑——这绝对不会改变之前参数变量中的值，它只是用一个新值覆盖它（因此删除了对原始值的额外引用）。这就是为什么上面的例子没有分配任何`i_var`东西给`i_var[0]`.*

# c# - 我将 azure 与多个 Web 角色和 1 个缓存服务器一起使用。当我更改对象的属性时，缓存的对象会在缓存服务器中自动更新吗

> ID：13604186
> 
> 赞同：1
> 
> 时间：2012-11-28T11:38:05.057
> 
> 标签：c#, caching, azure

我有这个代码

```
 Microsoft.ApplicationServer.Caching.DataCache cache;
...
    User user = (User)cache["cacheKey"];
    user.Name = "NewUserName"; 
```

缓存的用户对象会自动更新吗？或者我需要调用清除缓存并将新值放入缓存中。

它会应用于所有网络角色，还是我做错了什么。我需要能够编辑缓存的对象，并且此更改应适用于两个 azure web 角色

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T11:58:39.653

在MSDN上查看[here](http://msdn.microsoft.com/en-us/library/microsoft.applicationserver.caching.datacache.item%28v=azure.10%29.aspx)和[here](http://msdn.microsoft.com/en-us/library/ee790944%28v=azure.10%29.aspx)`user`之后，我相信将是缓存对象的反序列化，实际上是您的本地克隆。

所以不，您不会更新实际的缓存对象。进行更改后，您将必须更新缓存的对象。使用任一，

```
cache.Put("cacheKey", user); 
```

或者

```
cache["cacheKey"] = user; 
```

# actionscript-3 - Away3D 材质中的奇怪线条

> ID：13604196
> 
> 赞同：2
> 
> 时间：2012-11-28T11:38:50.110
> 
> 标签：actionscript-3, 3d, away3d

我正在尝试获取对象具有的原始材质并添加场景中的定向光：

```
protected function onMeshComplete(event:AssetEvent):void {

    if (event.asset.assetType == AssetType.MESH) {
        myMesh = event.asset as Mesh;
        for each (var m:SubMesh in myMesh.subMeshes){
            var mat:MaterialBase = m.material;
            mat.lightPicker = staticLightPicker;
            m.material = mat;
        }
    }

} 
```

结果，不出所料，我有了原始材质和定向光。但我的问题是我有一些奇怪的线条，如下图所示。

![在此处输入图像描述](../Images/cf861a3de1c5f989c2469de0eeddcd59.png)

是我的代码有问题吗？Away3D代码？还是3D模型？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T13:49:58.067

正如 Fabrice Closier 向我解释的那样，解决方法是对材料使用 repeat:true。以下是他给出的完整答案：

> 这并不奇怪。这是因为您的模型的 uv 值低于或超过 0-1。您需要将 repeat:true 设置为您的材料。您看到的线条是被拉伸的地图像素（在本例中为默认引擎位图数据）。

[链接在这里。](http://away3d.com/forum/viewthread/3578/)

谢谢你，法布里斯，非常感谢！

# awk - 修改文本中的数字值

> ID：13604201
> 
> 赞同：1
> 
> 时间：2012-11-28T11:39:03.313
> 
> 标签：awk

我有一个文本进来

```
A1:B2.C3.D4.E5
A2:B7.C10.D0.E9
A0:B1.C9.D4.E8 
```

我想知道如何将其更改为

```
A1:B2.C1.D4.E5
A2:B7.C8.D0.E9
A0:B1.C7.D4.E8 
```

使用 awk。第一个问题是多重分隔符。其次，如何获得 C-Value 和 Decrement 2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T11:56:27.600

awk 解决方案：

```
$ awk -F"." '{$2=substr($2,0,1)""substr($2,2)-2;}1' OFS="." file
A1:B2.C1.D4.E5
A2:B7.C8.D0.E9
A0:B1.C7.D4.E8 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T12:02:57.843

我想知道 awk 正则表达式是否可以完成这项工作，但显然，awk 无法捕获模式。这就是为什么我建议 perl 解决方案：

```
$ cat data.txt 
A1:B2.C3.D4.E5
A2:B7.C10.D0.E9
A0:B1.C9.D4.E8
$ perl -pe 's/C([0-9]+)/"C" . ($1-2)/ge;' data.txt
A1:B2.C1.D4.E5
A2:B7.C8.D0.E9
A0:B1.C7.D4.E8 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T12:21:08.107

诚然，我可能会使用`substr()`Guru 显示的功能来完成此操作：

```
awk 'BEGIN { FS=OFS="." } { $2 = substr($2,0,1) substr($2,2) - 2 }1' file 
```

我也很喜欢 Aif 使用 Perl 的回答，可能只是多一点。越短越甜，不是吗？但是，`GNU awk`可以捕获模式。就是这样：

```
awk 'BEGIN { FS=OFS="." } match($2, /(C)(.*)/, a) { $2 = a[1] a[2] - 2}1' file 
```

# c# - 拨号使用 wininet.dll Windows API 问题 (C#)

> ID：13604208
> 
> 赞同：1
> 
> 时间：2012-11-28T11:39:10.973
> 
> 标签：c#, winapi, wininet, dial-up

我在 wininet.dll 上调用以下函数以联机（C# pinvoke）：

```
[DllImport("wininet.dll", SetLastError = true, CharSet = CharSet.Auto)]
static extern int InternetDial(IntPtr hWndParent, string pszEntryName,
                                   int dwFlags, ref int lpdwConnection,
                                   int ReservedValue);

 public static bool GetOnline()
 {
        int connectionID = 0;
        InternetDial(IntPtr.Zero, "DefaultDialUp", INTERNET_AUTODIAL_FORCE_UNATTENDED, ref connectionID, 0);
        return (connectionID != 0);
 } 
```

问题是当拨号过程中发生错误时，例如硬件故障，
Windows显示一个阻止对话框询问用户如何进行，
并且我的功能被卡住，直到用户导致对话框关闭：
![在此处输入图像描述](../Images/8e44ccd171b31a2acfec18000102c915.png) 应该部署此代码在自动系统上，所以这对我来说是一个主要问题......

我正在寻找一种方法来抑制 Windows API 级别的错误对话框。

在此先感谢，艾坦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:24:03.907

我设法找到了解决这个问题的方法，但它非常讨厌，
仍然欢迎更好的解决方案......

```
 const int WM_CLOSE = 0x10;
    const int INTERNET_AUTODIAL_FORCE_UNATTENDED = 0x2;

    [DllImport("User32.dll", EntryPoint = "PostMessage")]
    public static extern int PostMessage(int hWnd, int Msg, IntPtr wParam, IntPtr lParam);

    [DllImport("wininet.dll", SetLastError = true, CharSet = CharSet.Auto)]
    static extern int InternetDial(IntPtr hWndParent, string pszEntryName, int dwFlags, ref int lpdwConnection, int ReservedValue);

        public static bool GetOnline()
        {
            connectionID = 0;
            Form f = null;
            var t = new Thread((ParameterizedThreadStart)delegate
            {
                f = new Form();                
                InternetDial(f.Handle, "DefaultDialUp", INTERNET_AUTODIAL_FORCE_UNATTENDED, ref connectionID, 0);
            });
            t.Start();
            t.Join(23000); //wait 23 seconds before closing the window
            f.Invoke((EventHandler)delegate {
                PostMessage(f.Handle.ToInt32(), WM_CLOSE, IntPtr.Zero, IntPtr.Zero);            
            });
            t.Join();            
            return (connectionID != 0);            
        } 
```

# xml - @XmlRootElement 覆盖 Web 服务中的 @WebResult

> ID：13604210
> 
> 赞同：1
> 
> 时间：2012-11-28T11:39:26.037
> 
> 标签：xml, jakarta-ee, entity, jax-ws, websphere-8

我有一个用 @XmlRootElement 注释的实体

```
@XmlRootElement(name = "Customer")
@XmlAccessorType(XmlAccessType.PROPERTY)
@XmlType(propOrder = { "id", "name", "surname", "type" })
@Entity
public class Customer extends AbstractEntity {

@Id
private long id;
private String name;
private String surname;
private Type type;

public ResponseDTO() {
    this("Default", "Default");
}

public ResponseDTO(String name, String surname) {
    this.name = name;
    this.surname = surname;
    this.type = new Type("120");
}

@XmlElement(name = "id")
public Long getId() {
    return this.id;
}

public void setId(Long id) {
    this.id = id;
}

@XmlElement(name = "name")
public String getName() {
    return name;
}

public void setName(String name) {
    this.name = name;
}

@XmlElement(name = "surname")
public String getSurname() {
    return surname;
}

public void setSurname(String surname) {
    this.surname = surname;
}

@XmlElement(name = "type")
public Type getType() {
    return type;
}

public void setType(Type type) {
    this.type = type;
}
} 
```

在 Web 服务响应中使用实体时，名称会覆盖带有名称`@XmlRootElement(name="Customer")`的 soap 响应的默认根元素。当我添加它时，它仍然会用名称覆盖它。`<return></return>``@XmlRootElement(name="Customer")``@WebResult(name="Cust")`

```
@Remote
@WebService
public interface CustomerWS{

  @WebMethod(operationName="getCustomerByNumber")
  @WebResult(name = "Cust")
  public Customer getCustomerByNumber(@WebParam(name="customerNumber") Long customerNumber);
} 
```

为什么会发生这种情况？

# tridion - 创建新的 PublisherException 时如何获取 Tridion LocalizableMessage 的资源名称？

> ID：13604213
> 
> 赞同：4
> 
> 时间：2012-11-28T11:39:30.763
> 
> 标签：tridion

当存在某种条件时，我需要停止发布页面，例如，如果页面名称包含使用事件系统的“一个”。此外，其他页面应继续发布。

我正在考虑使用 PublisherException 而不是通用异常。

问题是我不知道 LocalizableMessage 的资源名称。有任何想法吗？

```
if (item.Title.ToString().Contains("one"))
{
     Localization.LocalizableMessage errResource = new Localization.LocalizableMessage("error");
     throw new PublisherException(errResource, new Exception("Can't get there from here!"));
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T12:21:10.663

事件系统可以停止发布，但没有中间地带，当您抛出异常时，它会停止整个事务。

就像 Puntero 提到的那样，如果您想从 Publish Transaction 中删除一个项目，这就是[Custom Resolver](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/concept_753C261063AD4B9CA5E4F50BD4FD48E9)的用武之地。从这里您无法与 Publish Transaction 进行通信，但您可以访问 Tridion Logger (eventlog)：

```
Tridion.Logging.Logger.Write("your message string", "MyResolver", LoggingCategory.General, TraceEventType.Information); 
```

关于事件系统中的 LocalizableMessage，您应该能够执行以下操作：

```
throw new PublisherException(new LocalizableMessage(Properties.Resources.ResourceManager, "PagePublishErrorMessage")); 
```

resourceName 指向您在项目中拥有的字符串资源的名称。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T12:06:36.083

我同意@Puntero，如果您希望发布操作中的其他页面通过，您应该使用解析器而不是事件处理程序。

我试图发出警告以提醒用户有一项未解决，但失败了。但这里可能有一些对您有用的提示/想法：[在 SDL Tridion 2011 发布期间提高“警告”状态](https://stackoverflow.com/questions/9894802/raising-a-warning-status-during-sdl-tridion-2011-publishing)

最后，我可以让任何事情正常工作的唯一方法是设置“允许 X 失败”，然后在模板中进行检查，并在那里引发错误。这将被视为渲染失败，并允许发布者继续发布事务中的下一个项目。

至于消息？您想显示什么信息？

# c# - 如何在 MySQL 数据库中插入数据？

> ID：13604216
> 
> 赞同：6
> 
> 时间：2012-11-28T11:39:40.623
> 
> 标签：c#, asp.net, mysql, database, insert

我有一个 ASP.NET 应用程序和一个 MySQL 数据库。我想写一个类来插入、删除和显示数据库中的数据。我有一个到数据库的连接，但我无法在数据库中插入数据。

我的班级插入方法：

```
public string CreateEntry(string Connectionstring, string mitarbeiter)
{
    connection = new MySqlConnection(Connectionstring);
    try
    {
        var command = connection.CreateCommand();
        command.CommandText = "INSERT INTO tb_mitarbeiter (Vorname) VALUES ('tom')";
        connection.Open();
        return "Mitarbeiter wurde angelegt";
    }
    catch (Exception ex)
    {
        return ex.Message;
    }
    finally
    {
        connection.Close();
    }
} 
```

`Connectionstring`是正确的。我没有收到错误，但数据库中没有数据。

我的表名：tb_mitarbeiter 列：ID 和 Vorname

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-28T11:42:15.457

你应该简单地执行命令

```
....
MySqlCommand command = connection.CreateCommand();
command.CommandText = "INSERT INTO tb_mitarbeiter (Vorname) VALUES ('tom')";
connection.Open();
command.ExecuteNonQuery();
.... 
```

我想这`mitarbeiter`是应该在数据库中设置的真实值。
如果是这种情况，请记住使用参数来插入/更新您的数据

```
MySqlCommand command = connection.CreateCommand();
command.CommandText = "INSERT INTO tb_mitarbeiter (Vorname) VALUES (?name)";
command.Parameters.AddWithValue("?name", mitarbeiter);
connection.Open();
command.ExecuteNonQuery(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-28T12:17:13.877

您忘记通过调用 command.ExecuteNonQuery() 来执行命令。这就是我通常会这样做的方式：

```
public string CreateEntry(string connectionString, string valueToInsert)
{
    var stringToReturn = "";

    try
    {
        using(var connection = new MySqlConnection(connectionString))
        {
            //Open connection
            connection.Open();

            //Compose query using sql parameters
            var sqlCommand = "INSERT INTO table_name (field_name) VALUES (@valueToInsert)";

            //Create mysql command and pass sql query
            using(var command = new MySqlCommand(sqlCommand, connection))
            {
                command.Parameters.AddWithValue("@valueToInsert", valueToInsert);
                command.ExecuteNonQuery();
            }           

            stringToReturn ="Success Message";
        }
    }
    catch(exception ex)
    {
        stringToReturn = "Error Message: " + ex.Message;
    }

    return stringToReturn;
} 
```

有几个关键的事情要记住：

1.  用 using 包裹一次性物品。在 MySqlConnection 的情况下，它会在超出范围时正确关闭并处理连接。
2.  在查询中传递值时使用 SQL 参数。这将避免 SQL 注入，并且更容易维护。
3.  就个人而言，我喜欢在一个函数中有一个退出点。在此示例中，“stringToReturn”变量保存函数执行成功或失败时返回的值。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-28T11:50:11.850

要进行插入/更新/删除，您应该添加

```
connection.Open();
command.ExecuteNonQuery(); 
```

对于 select () 来显示来自数据库的数据使用：

```
connection.Open();
command.ExecuteReader(); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-05-06T01:28:07.790

{
string MyConnection2 = "datasource=localhost;port=3306;username=root;password=1234";

```
 string Query = "insert into DBname.TableName(id,Name,First_Name,Age,Address) values('" +this.IdTextBox.Text+ "','" +this.NameTextBox.Text+ "','" +this.FirstnameTextBox.Text+ "','" +this.AgeTextBox.Text+ "','" +this.AddressTextBox.Text+ "');";  

        MySqlConnection MyConn2 = new MySqlConnection(MyConnection2);  

        MySqlCommand MyCommand2 = new MySqlCommand(Query, MyConn2);  
        MySqlDataReader MyReader2;  
        MyConn2.Open();  
        MyReader2 = MyCommand2.ExecuteReader();     
        MessageBox.Show("Save Data");  
        while (MyReader2.Read())  
        {                     
        }  
        MyConn2.Close();  
    }  
    catch (Exception ex)  
    {   
        MessageBox.Show(ex.Message);  
  } 
```

}

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-28T11:42:30.120

您没有执行命令使用[SqlCommand.ExecuteNonQuery](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx)

```
try
{
        MySqlCommand command = connection.CreateCommand();
        command.CommandText = "INSERT INTO tb_mitarbeiter (Vorname) VALUES ('tom')";
        connection.Open();
        command.ExecuteNonQuery();
        return "Mitarbeiter wurde angelegt";
 }
 catch (Exception ex)
 {
      return ex.Message;
 }
 finally
 {
       connection.Close();
 } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-28T11:42:46.040

你错过了写这个： -

```
 ....
 connection.Open();
 command.ExecuteNonQuery();
 .... 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-29T06:53:17.563

您还可以使用 Sql 参数来防止 Sql Injection

```
try
{
    MySqlCommand command = connection.CreateCommand();

    command.CommandText = @"INSERT INTO `tb_mitarbeiter` (`Vorname`) VALUES (@tom)";
     command.Parameters.AddWithValue("@tom", tom);
     connection.Open();
     command.ExecuteNonQuery();

     return "Mitarbeiter wurde angelegt";
}
catch (Exception ex)
{
     return ex.Message;
}
finally
{
    command.Dispose();
    command.Close(); 
    connection.Close();
} 
```

# php - CkEditor - 如何将 html 从数据库解析为格式

> ID：13604223
> 
> 赞同：0
> 
> 时间：2012-11-28T11:39:46.707
> 
> 标签：php, javascript, ckeditor

我在 CakePHP 2.x 中使用 Ckeditor 3.1 版

我可以让编辑器加载和替换文本区域。HTML 使用 HTML 格式标记保存到数据库，如下所示：

```
<p>
<strong>&lt;p&gt; This is a test&lt;/p&gt; </strong></p> 
```

当我将它插入 CkEditor 时，我会在编辑器屏幕中看到以下内容：

```
<p> <strong>&lt;p&gt; This is a test&lt;/p&gt; </strong></p> 
```

如果我在设置 CkEditor 之前使用 html_entity_decode 我会在编辑器屏幕中得到这个：

```
<p> <strong><p> This is a test</p> </strong></p> 
```

这就是我在 edit.ctp Cake 视图中加载编辑器的方式：

```
$bio = $this->data['Club']['bio'];  
echo $this->Cksource->ckeditor('Club.bio', array('value'=>$bio) ); 
```

如何强制 CkEditor 解析传入的 HTML，以便对其进行格式化而不显示 HTML 标签？

编辑：我已经手动覆盖了 Cake Helper，以便输出的 Javascript 看起来像这样：

```
CKEDITOR.replace('data[Club][bio]',
                    {
                        entities: false,
                        basicEntities: false,
                        entities_greek: false,
                        entities_latin: false,
                        htmlDecodeOutput: true
                    }
                ); 
```

我认为，适当的表单字段正在转换为 ckeditor 实例，因此第一个参数是正确的。我也尝试过更新 config.js 没有任何运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T11:44:35.223

```
 CKEDITOR.replace(elemId,
    {
        entities: false,
        basicEntities: false,
        entities_greek: false,
        entities_latin: false,
        htmlDecodeOutput:true,
    }
    ); 
```

希望您已将此添加到您的代码中。否则请试试这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T14:44:21.570

谢谢哈利 - 你帮助设置。我不得不调整 Cake 的东西，让 Javascript 看起来像你说的那样。

无论如何，这对我有用：

```
$bio = $this->data['Club']['bio'];  
$bio = html_entity_decode($bio);
$bio = preg_replace( '/\s+/', ' ', $bio );

$events['instanceReady'] = "function (ev) {
            console.log(ev.editor);
            ev.editor.setData( '$bio' );
        }";

echo $this->Cksource->ckeditor('Club.bio', array(
                    'value'=>$bio, 
                    'config'=>array(
                        'entities'=>false,
                        'basicEntities'=>false,
                        'entities_greek'=>false,
                        'entities_latin'=>false, 
                            'htmlDecodeOutput'=>false), 
                    'events'=>$events
                    ) 
                ); 
```

我想在回显编辑器时没有必要输入值。

尝试 setData（“意外的非法标签”）时，我不断收到 Javascript 错误，这就是为什么我去掉多余的空格 - 这解决了这个问题。

# java - 尝试执行 restclient 请求时找不到合适的 HttpMessageConverter

> ID：13604224
> 
> 赞同：9
> 
> 时间：2012-11-28T11:39:51.517
> 
> 标签：java, android

我正在尝试使用`Spring for Android rest client`, 来发送数据`http post`，以避免创建和解析 json 数据。

从他们的[手册](http://static.springsource.org/spring-android/docs/1.0.x/reference/htmlsingle/#d4e426)中，他们有以下方法：

```
restTemplate.postForObject(url, m, String.class) 
```

调用该方法后，我得到以下异常：

```
No suitable HttpMessageConverter found when trying to execute restclient request 
```

我的活动代码片段是：

```
RestTemplate restTemplate = new RestTemplate();
restTemplate.getMessageConverters().add(new MappingJacksonHttpMessageConverter());
restTemplate.getMessageConverters().add(new StringHttpMessageConverter());
Message m = new Message();
m.setLibrary("1");
m.setPassword("1395");
m.setUserName("1395");
String result = restTemplate.postForObject(url, m, String.class); 
```

消息对象是：

```
public class Message {
    private String UserName, Password, Library;

    public String getUserName() {
        return UserName;
    }

    public void setUserName(String userName) {
        UserName = userName;
    }

    public String getPassword() {
        return Password;
    }

    public void setPassword(String password) {
        Password = password;
    }

    public String getLibrary() {
        return Library;
    }

    public void setLibrary(String library) {
        Library = library;
    }
} 
```

为什么不能呢`convert the Message object to JSON`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-03-24T20:31:52.570

发生这种情况可能有几个不同的原因。就我而言，我已经连接了 RestTemplate，但仍然出现此错误。事实证明，我不得不添加对“jackson-databind”的依赖：

```
<dependency>
    <groupId>com.fasterxml.jackson.core</groupId>
    <artifactId>jackson-databind</artifactId>
</dependency> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-28T11:57:55.190

看起来您还没有添加`Message`-specific `HttpMessageConverter`。`HttpMessageConverter`是一个`interface`。您需要创建一个实现该类`HttpMessageConverter<Message>`的实例并将该类的实例添加到`RestTemplate`通过的类`restTemplate.getMessageConverters().add(new MyMessageConverter());`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-09T15:49:53.637

您的代码总体上看起来不错。也许这是一个版本问题。检查您是否使用 Jackson 2，如果是，请将转换器更改为`MappingJackson2HttpMessageConverter`.

不需要像`HttpMessageConverter<Message>`.

在一个侧节点上：Java 约定是使用小写的变量名。因此，对于其他 Java 开发人员来说，这样做会更具可读性：

```
private String library;

public void setLibrary(String library) {
    this.library = library;
} 
```

# iphone - 我想在 tableview 或任何其他替代方案之后的下一个视图上获取 indexpath.row

> ID：13604225
> 
> 赞同：1
> 
> 时间：2012-11-28T11:39:54.530
> 
> 标签：iphone, xcode, uitableview, ios5

我正在制作使用表格视图播放音频的应用程序

选择特定行后，它会在下一个视图中播放音频，但它不能解决我的问题

因为希望它在关闭视图后停止并返回表视图

所以我想要一种在下一个视图上播放歌曲的方法，它在关闭视图后停止

或者，

如果我可以在下一个视图中访问特定行（indexpathy.row）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T11:46:29.023

只是属性将原始 no 或 int 值合成到下一个视图，如下所示..

```
@interface NextViewController : UIViewController{
     int rowNo;
}
@property (nonatomic, assign) int rowNo; 
```

并在 .m 文件中合成，如下所示...

```
@synthesize rowNo; 
```

并且当您当时推送到 nextview 时，像这样设置此属性

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NextViewController *objNextViewController = [[NextViewController alloc]initWithNibName:@"NextViewController" bundle:nil];
   objNextViewController.rowNo = indexPath.row;
    [self.navigationController pushViewController:objNextViewController animated:YES];
    [NextViewController release];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T11:44:48.557

只需在下一个视图的类中获取一个变量，然后在选择单元格时将 indexpath.row 的值传递给它。由于此变量已选择行的值，因此您可以在下一个视图中访问此值。

# android - Android：在 tabhost 类中调用 Invokeservice() 时出现空指针异常

> ID：13604226
> 
> 赞同：0
> 
> 时间：2012-11-28T11:40:08.503
> 
> 标签：android, service, android-tabhost, runtime-error

我正在研究如何在 tabhost 活动中绑定服务

我有一个名为 Remoteserviceconnection 的依赖项目，我在 tabhost 子活动中调用 inokeservice()

正如我所说，我有一个带有三个子活动的 tabhost 活动，我想在子活动中绑定一个服务，我得到了 nul 指针异常。

我浏览了这两个链接仍然没有任何想法

[使用基类活动将多个活动（选项卡）绑定到服务](https://stackoverflow.com/questions/8687305/binding-multiple-activitiestabs-to-a-service-using-a-base-class-activity)

[http://code.google.com/p/android/issues/detail?id=2483](http://code.google.com/p/android/issues/detail?id=2483)

我的项目中有 4 项活动

1) TabBarExample.java 2) FirstTab.java 3) SecondTab.java 4) ThirdTab.java

我到底做错了什么？

任何帮助总是很感激，谢谢

这是我的代码，我在这个 java 文件中遇到错误，

FirstTab.java

```
 public class FirstTab extends Activity {
protected static final String TAG = "HvacActivity";
/** Called when the activity is first created. */
private IMyRemoteService remoteService;
private boolean started = false;
private RemoteServiceConnection conn = null;
private Handler serviceHandler;

private static int speed;
private static int hvactemp;
private static int hvacTemppass;
private Task myTask = new Task();
private ImageView fanimgview;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.hvac);

    if(started == false )
    startService();
    bindService();
    System.gc();

    serviceHandler = new Handler();
    serviceHandler.postDelayed(myTask, 1000L);

}

class RemoteServiceConnection implements ServiceConnection {
    // static final int hvactemp = 0;

    public void onServiceConnected(ComponentName className,
            IBinder boundService) {
        remoteService = IMyRemoteService.Stub
                .asInterface((IBinder) boundService);
        Log.d(getClass().getSimpleName(), "onServiceConnected()");
    }

    public void onServiceDisconnected(ComponentName className) {
        remoteService = null;
        // updateServiceStatus();
        Log.d(getClass().getSimpleName(), "onServiceDisconnected");
    }
};

private void startService() {
    if (started) {
        // Toast.makeText(CarHome.this, "Service already started",
        // Toast.LENGTH_SHORT).show();
    } else {
        Intent i = new Intent();
        i.setClassName("com.msat.home.clusterservices",
                "com.msat.home.clusterservices.RemoteService");
        startService(i);
        started = true;
        updateServiceStatus();
        Log.d(getClass().getSimpleName(), "startService()");
    }

}

private void stopService() {
    if (!started) {
        // drivertmpcount.setText(Integer.toString(hvactemp)); //
        // Toast.makeText(CarHome.this, "Service not yet started",
        // Toast.LENGTH_SHORT).show();
    } else {
        Intent i = new Intent();
        i.setClassName("com.msat.home.clusterservices",
                "com.msat.home.clusterservices.RemoteService");
        stopService(i);
        started = false;
        updateServiceStatus();
        Log.d(getClass().getSimpleName(), "stopService()");
    }
}

private void bindService() {
    if (conn == null) {
        conn = new RemoteServiceConnection();
        Intent i = new Intent();
        i.setClassName("com.msat.home.clusterservices",
                "com.msat.home.clusterservices.RemoteService");
        bindService(i, conn, Context.BIND_AUTO_CREATE);
        updateServiceStatus();
        Log.d(getClass().getSimpleName(), "bindService()");
    } else {
        // Toast.makeText(CarHome.this,
        // "Cannot bind - service already bound",
        // Toast.LENGTH_SHORT).show();
    }
}

private void releaseService() {
    if (conn != null) {
        unbindService(conn);
        conn = null;
        updateServiceStatus();
        Log.d(getClass().getSimpleName(), "releaseService()");
    } else {
        // Toast.makeText(CarHome.this, "Cannot unbind - service not bound",
        // Toast.LENGTH_SHORT).show();
    }
}

private void invokeService() { // getting ERROR here

    if (conn == null) {
        // Toast.makeText(CarHome.this, "Cannot invoke - service not bound",
        // Toast.LENGTH_SHORT).show();
    } else {
        try {
            System.out.println(remoteService);

            final TextView drivertmpcount = (TextView) findViewById(R.id.curtempcount);
            // final TextView tempcountpass = (TextView)
            // findViewById(R.id.tempcountpass);

            hvactemp = remoteService.getHvacTemp();  // getting ERROR here
            hvacTemppass = remoteService.getHvacTemppass();
            System.out.println("Raghav hvac" + hvactemp);

            System.out.println("jaydeep speed" + speed);
            // rpm_text.setText(rpm);

            drivertmpcount.setText(Integer.toString(hvactemp));
            // tempcountpass.setText(Integer.toString(hvacTemppass));

            Log.d(getClass().getSimpleName(), "invokeService()");
        } catch (RemoteException re) {
            Log.e(getClass().getSimpleName(), "RemoteException");
        }
    }
}

private void updateServiceStatus() {
    String bindStatus = conn == null ? "unbound" : "bound";
    String startStatus = started ? "started" : "not started";
    String statusText = "Service status: " + bindStatus + "," + startStatus;
    // TextView t = (TextView)findViewById( R.id.serviceStatus);
    // t.setText( statusText );
    System.out.println("Jaydeep : " + statusText);
}

protected void onDestroy() {
    super.onDestroy();

    releaseService();
    Log.d(getClass().getSimpleName(), "onDestroy()");
}

class Task implements Runnable {
    public void run() {
        invokeService();  // getting ERROR here

        // serviceHandler.postDelayed(this, 1000L);
        //Log.i(getClass().getSimpleName(),
        //      "Incrementing engineRPM in the run method");
    }

}

} 
```

LOGCAT 消息

```
 09-06 19:12:36.550: E/AndroidRuntime(14116): FATAL EXCEPTION: main
   09-06 19:12:36.550: E/AndroidRuntime(14116): java.lang.NullPointerException
   09-06 19:12:36.550: E/AndroidRuntime(14116):     at com.hvaccontroller.msat.FirstTab.invokeService(FirstTab.java:145)
   09-06 19:12:36.550: E/AndroidRuntime(14116):     at com.hvaccontroller.msat.FirstTab.access$1(FirstTab.java:132)
   09-06 19:12:36.550: E/AndroidRuntime(14116):     at com.hvaccontroller.msat.FirstTab$Task.run(FirstTab.java:180)
  09-06 19:12:36.550: E/AndroidRuntime(14116):  at android.os.Handler.handleCallback(Handler.java:587)
  09-06 19:12:36.550: E/AndroidRuntime(14116):  at android.os.Handler.dispatchMessage(Handler.java:92)
  09-06 19:12:36.550: E/AndroidRuntime(14116):  at android.os.Looper.loop(Looper.java:130)
  09-06 19:12:36.550: E/AndroidRuntime(14116):  at android.app.ActivityThread.main(ActivityThread.java:3686)
 09-06 19:12:36.550: E/AndroidRuntime(14116):   at java.lang.reflect.Method.invokeNative(Native Method)
 09-06 19:12:36.550: E/AndroidRuntime(14116):   at java.lang.reflect.Method.invoke(Method.java:507)
 09-06 19:12:36.550: E/AndroidRuntime(14116):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
 09-06 19:12:36.550: E/AndroidRuntime(14116):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
 09-06 19:12:36.550: E/AndroidRuntime(14116):   at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T11:43:40.503

`remoteService`对象就在这`null`行代码`hvactemp = remoteService.getHvacTemp();`中。

看起来您期望该服务将在 1 秒内连接。因为您在调用 1 秒后调用了 invokeService() `bindService`。在您的任务中检查`remoteService`对象是否为空。如果对象不为空，则调用该`invokeService()`方法，如果对象是`null`则注册另一个回调，如下所示：

```
class Task implements Runnable {
    public void run() {
        if(remoteService !=null){
        invokeService();  // getting ERROR here
         } else{
           serviceHandler.postDelayed(this, 1000L);
         }
        //Log.i(getClass().getSimpleName(),
        //      "Incrementing engineRPM in the run method");
    } 
```

}

编辑1：

或者你可以调用你可以`invokeService()`从方法中调用`onServiceConnected()`方法以避免异常

# ios - 带有 NavigationController 的 iOS 6 方向

> ID：13604228
> 
> 赞同：1
> 
> 时间：2012-11-28T11:40:38.733
> 
> 标签：ios, uinavigationcontroller, ios6, orientation

我目前正在开发一个适用于 iOS 5 和 iOS 6 的应用程序。除了 1 之外，我的大多数视图都是纵向的。

**RotationNavigationController** : Main`UINavigationController`覆盖`supportedInterfaceOrientation`和`shouldAutorotate`。

**PageViewController**：推入 RotationNavigationController 并仅以纵向显示。

**ImageViewController**：在 PageViewController 之后推送。用 显示`UIInterfaceOrientationMaskAllButUpsideDown`。

这是我`ImageViewController`的`ViewDidLoad`

```
- (void)viewDidLoad
{
   // currentMask is the value returned by supportedInterfaceOrientation
   [(RotationNavigationController*)self.navigationController setCurrentMask:UIInterfaceOrientationMaskAllButUpsideDown];
   [(RotationNavigationController*)self.navigationController setShouldAutorotate:YES];
} 
```

当我`popViewController`从横向的 ImageViewController 中返回时，我也以横向模式返回到 PageViewController，而 PageViewController 仅支持纵向。

当然，我将 ImageViewController 中的蒙版重置`viewWillDisappear`为 Portrait。

有没有办法让 PageViewController 保持纵向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T13:49:36.627

感谢您提供链接 emrys57。我在那里找到了解决方案，最后它很简单：

在 RotationNavigationController 中，只需添加以下方法：

```
- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return UIInterfaceOrientationPortrait;
} 
```

# wordpress - 将菜单项添加到 wordpress 的仪表板菜单

> ID：13604229
> 
> 赞同：3
> 
> 时间：2012-11-28T11:40:43.470
> 
> 标签：wordpress, menu, menuitem

我正在尝试使用以下语法在仪表板上添加菜单项：

`<?php add_menu_page( $page_title, $menu_title, $capability, $menu_slug, $function, $icon_url, $position ); ?>`

但是，我很困惑在哪里添加这段代码。

是否将它添加到我的主题的 functions.php 或我的插件的 functions.php ？

或者以 admin 身份在 wordpress 的仪表板上添加自定义菜单项的任何其他方式？

我想添加自定义菜单项，如下图所示：![add_custom_menu_item](../Images/5cb89f9c93ede2e771981ca950153d8c.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-28T12:25:22.937

您在屏幕截图中看到的是[Custom Post Type](http://codex.wordpress.org/Post_Types#Custom_Types)的屏幕。在文档中，您将找到有关如何添加此类屏幕的示例代码。

关于放置代码的位置 - 这取决于。您希望能够在其他主题中使用此自定义帖子类型，还是仅在此主题中需要它？

如果您也想在其他主题中使用它，请将代码放入插件的代码中。

如果你只想在这个主题中使用它，把它放在你的主题的`functions.php`.

如果您仍想添加自定义菜单页面，您将[在此处](http://codex.wordpress.org/Function_Reference/add_menu_page#Examples)找到有关使用此功能的正确方法的示例。您应该注意的是，调用`add_menu_page()`应该在操作上运行的函数内完成`admin_menu`。

这是使用 WP 3.4.2 的示例工作代码

```
function register_custom_menu_page() {
    add_menu_page('custom menu title', 'custom menu', 'add_users', 'custompage', '_custom_menu_page', null, 6); 
}
add_action('admin_menu', 'register_custom_menu_page');

function _custom_menu_page(){
   echo "Admin Page Test";  
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-04-30T12:13:54.303

这是一个完美的答案。

```
add_action( 'init', 'create_post_type' );
function create_post_type() {
    register_post_type( 'acme_product',
        array(
            'labels' => array(
                'name' => __( 'Products' ),
                'singular_name' => __( 'Product' )
            ),
        'public' => true,
        'has_archive' => true,
        )
    );
} 
```

# ruby-on-rails-3 - 参数未传递给控制器 Rails3 + coffeescript + ajax

> ID：13604232
> 
> 赞同：1
> 
> 时间：2012-11-28T11:40:48.443
> 
> 标签：ruby-on-rails-3, jquery, controller, coffeescript

我正在尝试使用 Rails3 和咖啡脚本实现排序列表。[我之前遇到了路由问题，在您的慷慨帮助下](https://stackoverflow.com/questions/13603330/ajax-update-with-coffeescript-rails3/13603389#13603389)能够解决它，所以现在我遇到了另一个问题，我的数据参数没有传递到服务器，

以下是我的看法

```
#index.html.erb 
<h1>Listing books</h1>
<ul id="books"> <% @books.each do |book| %>
  <li class="book<%= book.id %>"><span class="handle">[drag]</span><%= book.name %></li>
<% end %></ul>
<%= link_to 'New book', new_book_path %> 
```

以下是我的 books.js.coffee 文件

```
jQuery ->
  $('#books').sortable
    axis: 'y'
    handle: '.handle'
    update: ->
      $.post('/books/sort', $(this).data('#books'), $(this).sortable('serialize')) 
```

以下是我的控制器

```
#books_controller.rb
def sort
  @books = Book.all
  @books.each do |book|
    book.position = params['book'].index(book.id.to_s) + 1
    book.save
  end

  render :nothing => true
end 
```

这是我得到的错误

```
Served asset /jquery.js - 304 Not Modified (0ms)

Started POST "/books/sort" for 127.0.0.1 at 2012-11-28 17:03:25 +0530
Processing by BooksController#sort as */*
  Book Load (0.2ms)  SELECT "books".* FROM "books" 
Completed 500 Internal Server Error in 2ms

NoMethodError (undefined method `index' for nil:NilClass):
  app/controllers/books_controller.rb:14:in `block in sort'
  app/controllers/books_controller.rb:13:in `each'
  app/controllers/books_controller.rb:13:in `sort'

  Rendered /home/sameera/.rvm/gems/ruby-1.9.2-p290/gems/actionpack-3.2.9/lib/action_dispatch/middleware/templates/rescues/_trace.erb (40.8ms)
  Rendered /home/sameera/.rvm/gems/ruby-1.9.2-p290/gems/actionpack-3.2.9/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /home/sameera/.rvm/gems/ruby-1.9.2-p290/gems/actionpack-3.2.9/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (47.7ms) 
```

所以当我说`p params`，我明白`{"action"=>"sort", "controller"=>"books"}`了，所以它没有一个名为“book”的参数，因此给出了一个 nil 错误，有人可以帮助我吗？

任何帮助将不胜感激

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T22:35:21.190

你这里有几件事出了问题。首先，您的[`$.post`](http://api.jquery.com/jQuery.post/)论点有点混乱：

```
$.post('/books/sort', $(this).data('#books'), $(this).sortable('serialize')) 
```

`$.post`想要第二个参数中的数据，所以就是这样：

```
$.post('/books/sort', $(this).sortable('serialize')) 
```

更有意义。

Sortable 的[`serialize`方法](http://api.jqueryui.com/sortable/#method-serialize)希望 DOM`id`属性具有特定的形式：

> 默认情况下，它通过查看格式中每个项目的 id 来工作`"setname_number"`，并吐出一个像`"setname[]=number&setname[]=number"`.

在您的 Rails 控制器中，您需要一组书籍 ID，`params[:book]`因此您想`book[]=id&book[]=id&...`访问您的服务器。这意味着您希望您`<li>`的 s 看起来更像这样：

```
<li id="book_<%= book.id %>"> 
```

或者您可以`class`通过包含下划线来保留使用属性：

```
<li class="book_<%= book.id %>"> 
```

然后告诉`serialize`看`class`：

```
$(this).sortable('serialize', attribute: 'class') 
```

您还应该使用该`expression`选项并单独保留 HTML：

```
$(this).sortable('serialize', attribute: class, expression: /(book)(.+)/) 
```

还有其他几种安排方式，请参阅[可排序文档](http://api.jqueryui.com/sortable/#method-serialize)以获取更多详细信息。

# javascript - jQuery 和 Zoomooz.js 的冲突：animate & zoomTarget 同时出现

> ID：13604233
> 
> 赞同：5
> 
> 时间：2012-11-28T11:40:50.090
> 
> 标签：javascript, jquery, jquery-animate, zoomooz

我正在做一个心理学研究项目，所以我真的是 JavaScript 的初学者。不过，我必须完成这项工作，而且非常具体。

我想在点击时放大页面的一个元素（书籍封面），同时在它旁边打开额外的内容（一些文本），我希望能够离开（关闭文本并缩小) 一键点击。

到目前为止，我设法使用[zoomooz.js](http://janne.aukia.com/zoomooz/)轻松完成缩放部分，其余部分使用 jQuery。我的书封面和我的文本页面（每个 div）在一个更大的 div（“容器”）中彼此重叠。当容器被点击时，封面和文字会变成动画：一个在左边，另一个在右边。单击容器并使用 stopPropagation 时，它们会在中间重新组合在一起，按计划将文本隐藏在封面后面。

现在我的问题是，当我在为我的 div 设置动画时尝试使用 zoomooz 时，它们会发生冲突。那里的方式，放大，工作正常：同时缩放和动画。但是对于返回的方式，缩小，我无法让他们一起工作。Zoomooz 接手。我尝试手动编写 zoomooz 代码，但我不知道自己在做什么——我只是觉得它与某处的“stopPropagation”有关。

下面是我的模型/测试页面，它包含所有内容，应该让事情更清楚。如果有人能帮我一把，我会很高兴。非常感谢。

```
<!DOCTYPE html>
<html>
<head>
  <style>
  div#main {background:yellow;z-index:1;}
  div#container {position:relative;
    width:232px;height:152px;border:2px dotted black;
    background:#eee;margin:0 auto;z-index:10;}
  div.cover {z-index:30;position:absolute;left:58px;
    background:blue;width:116px;height:152px}
  div.text {z-index:20;position:absolute;left:58px;
    background:green;width:116px;height:152px}
  p {font-size:0.3em;}
  </style>

<script src="http://code.jquery.com/jquery-latest.js"></script>
 <!-- ZOOMOOZ-->
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js" type="text/javascript"></script>
 <script src="jquery.zoomooz.min.js"></script>
 <script type="text/javascript" src="src/js/jquery.zoomooz-helpers.js"></script>
 <script type="text/javascript" src="src/js/jquery.zoomooz-anim.js"></script>
 <script type="text/javascript" src="src/js/jquery.zoomooz-core.js"></script>
 <script type="text/javascript" src="src/js/jquery.zoomooz-zoomTarget.js"></script>
 <script type="text/javascript" src="src/js/jquery.zoomooz-zoomContainer.js"></script>
 <script type="text/javascript" src="src/js/purecssmatrix.js"></script>
 <script type="text/javascript" src="src/js/sylvester.src.stripped.js"></script>

</head>
<body>
<div id="main">
 <div id="container"> <!--ADD A class="zoomTarget" TO HAVE THE ZOOMING WORKING FINE BUT ONLY ONE WAY -->
  <div class="text">
   <p>aefpize gfo hzefoihze fozeoifhzeaefpize gfo hzefoihze fozeoifhzeaefpize gfo hzefoihze fozeoifhzeaefpize gfo hzefoihze fozeoifhzeaefpize gfo hzefoihze fozeoifhzeaefpize gfo hzefoihze fozeoifhze</p>
   <p>aefpize gfo hzefoihze fozeoifhzeaefpize gfo hzefoihze fozeoifhzeaefpize gfo hzefoihze fozeoifhzeaefpize gfo hzefoihze fozeoifhzeaefpize gfo hzefoihze fozeoifhzeaefpize gfo hzefoihze fozeoifhze</p>
   <p>aefpize gfo hzefoihze fozeoifhzeaefpize gfo hzefoihze fozeoifhzeaefpize gfo hzefoihze fozeoifhzeaefpize gfo hzefoihze fozeoifhzeaefpize gfo hzefoihze fozeoifhzeaefpize gfo hzefoihze fozeoifhze</p>
  </div>
  <div class="cover">
  </div>
 </div>
 </div>
</div>

<!-- script COVER + CONTENTS-->
<script>
$(document).ready(function() {
  $("#container").click(function(e) {
    $(".cover").animate({left: '0px'});
    $(".text").animate({left: '116px'});
     e.stopPropagation();
  });
  $(document).click(function() {
    $(".cover").animate({left: '58px'});
    $(".text").animate({left: '58px'});
  });
});
</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T21:36:44.040

I got it!

Pretty simple, in fact. To zoom out, I had to order zooming to the body. See the "zooming out" coding by itself:

```
<script>
 $(document).click(function() {
     $('body').zoomTo({targetsize:0.75, duration:600});
  });
</script> 
```

And as an example for more intricated use, the whole set of functions together:

```
<script>
$(document).ready(function() {
 $(".cover").click(function(e) {
  $(this).animate({left: '0px'});
  $(this).siblings(".text").animate({left: '116px'});
  $(this).parent().siblings().fadeOut();
  $(this).parent().zoomTo({targetsize:0.75, duration:600});
   e.stopPropagation();
  });
 $(document).click(function() {
  $(".cover").animate({left: '58px'});
  $(".text").animate({left: '58px'});
  $(".container").fadeIn();
  $('body').zoomTo({targetsize:0.75, duration:600});
  });
});
</script> 
```

# php - 如何测试 memcache 是否在 php 中运行，而无需从缓存中保存和加载相同的对象

> ID：13604237
> 
> 赞同：4
> 
> 时间：2012-11-28T11:41:03.043
> 
> 标签：php, sqlite, caching, memcached

我想测试 memcache 是否正在运行，不仅仅是测试是否加载了扩展，而是测试 memcache 是否实际可用并在服务器上运行。除了实际将测试对象保存到缓存并检索它之外，还有其他方法吗？

我正在考虑根据可用性为我的缓存使用不同的存储选项，从 memcached 到 sqlite 到文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T11:42:57.960

你知道`memcache`需要服务器，对吗？如果是这样，您为什么不尝试连接到它并监视它的返回值`connect()`呢？`FALSE`如果无法连接到提供的任何服务器，则返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T11:56:05.547

正如 user1800246 指出的那样，您可以检查[Memcache::connect](http://www.php.net/manual/en/memcache.connect.php)的返回变量：

```
$memcache = new Memcache;
$connect = $memcache->connect('localhost', 11211);

if(!$connect){
     throw new Exception('Could not connect to Memcached');
} 
```

# ajax - 在 MVC3 项目中使用自定义表单身份验证的 Ajax

> ID：13604246
> 
> 赞同：0
> 
> 时间：2012-11-28T11:41:38.560
> 
> 标签：ajax, asp.net-mvc-3, form-authentication

我有一个带有自定义表单身份验证的 MVC3 项目。我的身份验证工作正常（我使用“HttpContext.Current.User.Identity.IsAuthenticated”属性以确保它正常工作）

我在我的表单中使用了 Ajax：

```
$(document).ready(function () {
    $.ajax({
        url: '/MyPages/MyControllerFunction',
        type: 'POST',
        success: function (result) { $('#MyJavaTemplate').tmpl(result).appendTo('#MyHtmlTable'); },
        error: function (result) {
            $('#errorDisplay').html(result.responseText);
        }
    })
}); 
```

当我到达这个页面时（并且 ajax 应该调用这个控制器的函数）我得到这个错误：

**HTTP 错误 404.0 - 未找到 您要查找的资源已被删除、名称已更改或暂时不可用。**

我的控制器功能：

```
[HttpPost]
    public ActionResult MyControllerFunction()
    {
        var MyEntity = MyBusinessLogic.GetByID(1);
        return Json(MyEntity);
    } 
```

（我也尝试添加 [Authorized] 属性，但没有帮助）

当我通过ajax调用控制器的函数时，它只会发生在我身上。在我更改我的程序以使用表单身份验证之前，这一切都有效。就好像用户没有经过身份验证（即使它是）

应该怎么解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:56:48.570

我认为您在该控制器操作上指定了 GET，应该是 POST

```
[AcceptVerbs(HttpVerbs.Post)]
public JsonResult MyControllerFunction() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T09:22:59.543

我找到了解决方案！

在这里： [使用 jQuery 在 MVC3 中调用操作时出现 404](https://stackoverflow.com/questions/11164584/getting-404s-when-calling-actions-in-mvc3-with-jquery)

我所要做的就是改变：

```
url: '/MyPages/MyControllerFunction' 
```

到网址：'@Url.Action("MyControllerFunction","MyPages")'

# java - 系统上有多个 JRE

> ID：13604252
> 
> 赞同：1
> 
> 时间：2012-11-28T11:41:55.953
> 
> 标签：java

我正在使用安装了多个版本的 JRE 的 Windows 机器。

如果我运行一个 Eclipse RCP 应用程序，它将使用哪个版本的 JRE，最新的 JRE 版本还是下面提到的`JAVA_HOME`那个`Environment Variables -> System Variables`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T11:54:44.010

在`eclipse.ini`Eclipse 安装目录的文件中，可以添加以下行：

```
-vm
C:/Java/jdk1.7.0_09_x64/jre/bin/server/jvm.dll 
```

当然，调整您希望 Eclipse 使用的 JDK/JRE 的路径。

[编辑] 重新阅读您的问题，我注意到您提到“*和 eclipse RCP 应用程序*”，所以您的意思可能不是 Eclipse。那时的答案可能会有所不同。我建议您添加更多标签（并改进主题）以更好地反映您的问题范围。

[编辑] 从快速研究来看，Eclipse RPC 应用程序似乎也使用了一个 .ini 文件（我磁盘上的 Eclipse 内存分析器就是这种情况），所以我上面的技巧可能会奏效......它可能取决于您也想使用的启动器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T12:03:46.237

`JAVA_HOME`默认情况下，Eclipse 将在定义的 VM 中执行。

但是您可以更改 JRE/JDK，程序在 Eclipse > Windows > Preferences > Java > Installed JREs 下执行/编译。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T19:44:40.087

它必须首先使用操作系统路径中可用的默认 JRE，除非您通过在 .ini 文件中指定 -vm arg 来覆盖它。

# javascript - 将对象数组转换为数组对象：Javascript

> ID：13604253
> 
> 赞同：1
> 
> 时间：2012-11-28T11:42:03.283
> 
> 标签：javascript, jquery

```
obj = {'a':['hello', 'hie'], 'b':['World', 'India']} 
```

到

```
array = [{'a':'hello','b':'World'}, {'a':'hie','b':'India'}] 
```

使用 JQuery 转换此转换或任何用于此转换的内置方法的最佳方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T11:53:29.700

试试这个代码，

```
obj = {'a':['hello', 'hie'], 'b':['World', 'India']}
var key = Object.keys(obj);
array = [];
for (var i = 0; i < obj['a'].length; i++){
  o = {}
  for (k in key){
    o[key[k]] = obj[key[k]][i]
  }
  array.push(o)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T12:02:55.270

```
var obj = {'a':['hello', 'hie'], 'b':['World', 'India']};

var array = [];
for (var prop in obj)
    for (var i=0; i<obj[prop].length; i++) {
        var o = array[i] || (array[i] = {});
        o[prop] = obj[prop][i];
    } 
```

不需要 jQuery。使用 jQuery，它可能看起来像这样：

```
var array = [];
$.each(obj, function(prop) {
    $.each(this, function(i) {
        var o = array[i] || (array[i] = {});
        o[prop] = this;
    });
}); 
```

*   速度较慢且可读性较差。不使用。

# python - 在编译阶段之前无法启动 exec-maven-plugin

> ID：13604255
> 
> 赞同：1
> 
> 时间：2012-11-28T11:42:06.970
> 
> 标签：python, maven, maven-plugin, exec-maven-plugin

我想将附加文本写入 Java 资源文件（将两个 .java 文件合并为一个）。我为此编写了一个 python 脚本。

我还想使用 Maven 自动化这些步骤（组合文件、编译、打包）。我是 Maven 的新手，我发现它`exec-maven-plugin`可以运行 python 脚本。

我尝试设置`<phase>process-resources</phase>`为在编译之前尝试使其启动，但 Eclipse 抱怨说`Plugin execution not covered by lifecycle configuration: org.codehaus.mojo:exec-maven-plugin:1.2.1:exec (execution: default, phase: process-resources)`

下面是我的 exec-maven-plugin 的 pom：

```
 <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>exec-maven-plugin</artifactId>
        <version>1.2.1</version>
        <executions>
            <execution>
                <phase>process-resources</phase> <!-- Eclipse complains an error here -->
                <goals>
                    <goal>exec</goal>
                </goals>
            </execution>
        </executions>
        <configuration>
            <executable>python</executable>
            <workingDirectory>src/main/python</workingDirectory>
            <arguments>
                <argument>combine.py</argument>
            </arguments> 
        </configuration>
    </plugin> 
```

任何人都知道我该如何实现这个目的？非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T07:30:15.377

这是 Eclipse M2e 插件技巧。`Sachin Shekhar R`是对的，但是对于像我这样的新手来说，答案还不够清楚。这是我的理解：

请参阅[http://wiki.eclipse.org/M2E_plugin_execution_not_covered](http://wiki.eclipse.org/M2E_plugin_execution_not_covered)。
在 Eclipse M2e 中有两种方法可以做到这一点。

1.  `Sachin Shekhar R`使用答案中列出的代码。请注意，这段代码必须在`<pluginManagement><plugins>`并且`<pluginManagement>`必须在里面`<plugins>`。示例代码：</p>

    ```
    <build>
    <plugins>
                <plugin>
                   <!-- plugins here-->
                </plugin>
    </plugins>
    <pluginManagement>
        <plugins>
            <plugin>
                <groupId>org.eclipse.m2e</groupId>
                <artifactId>lifecycle-mapping</artifactId>
                <version>1.0.0</version>
                <configuration>
                    <lifecycleMappingMetadata>
                        <pluginExecutions>
                            <pluginExecution>
                                <pluginExecutionFilter>
                                    <groupId>org.codehaus.mojo</groupId>
                                    <artifactId>exec-maven-plugin</artifactId>
                                    <versionRange>[1.2.1,)</versionRange>
                                    <goals>
                                        <goal>exec</goal>
                                    </goals>
                                </pluginExecutionFilter>
                                <action>
                                    <ignore/>
                                </action>
                            </pluginExecution>
                        </pluginExecutions>
                    </lifecycleMappingMetadata>
                </configuration>
            </plugin>
        </plugins>
    </pluginManagement>
    </build> 
    ```

    这仅适用于项目。

2.  使用 Eclipse M2e 插件的“快速修复”功能。它存在于 1.0 版本之后。`Problems`在选项卡中找到错误。右键单击它，选择“快速修复”。会弹出一个快速修复窗口，选择第二个选项`Mark goal exec as ignored in Eclipse build in Eclipse references (experimental)`。
    此方法会将上述代码写入`<lifecycleMappingMetadata>`到生命周期映射的工作区配置文件中，`workspace/.metadata/.plugins/org.eclipse.m2e.core/lifecycle-mapping-metadata.xml`
    这适用于整个工作区

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T11:50:09.440

我们有类似的代码生成下

```
<execution>
    <phase>generate-sources</phase>
    <goals>
        <goal>java</goal>
    </goals>
</execution> 
```

在插件下，我们还有额外的条目以避免日食抱怨

```
 <plugin>
                <groupId>org.eclipse.m2e</groupId>
                <artifactId>lifecycle-mapping</artifactId>
                <version>1.0.0</version>
                <configuration>
                    <lifecycleMappingMetadata>
                        <pluginExecutions>
                            <pluginExecution>
                                <pluginExecutionFilter>
                                    <groupId>
                                        org.codehaus.mojo
                                    </groupId>
                                    <artifactId>
                                        exec-maven-plugin
                                    </artifactId>
                                    <versionRange>
                                        [1.2.1,)
                                    </versionRange>
                                    <goals>
                                        <goal>java</goal>
                                    </goals>
                                </pluginExecutionFilter>
                                <action>
                                    <ignore></ignore>
                                </action>
                            </pluginExecution></pluginExecutions>
                    </lifecycleMappingMetadata>
                </configuration>
            </plugin> 
```

来自 GWT 源代码的用于生命周期映射的实时示例 -`http://code.google.com/searchframe#T04cSGC7sWI/trunk/samples/expenses/pom.xml`

参考说明 - stackoverflow.com/questions/6352208/how-to-solve-plugin-execution-not-covered-by-lifecycle-configuration-for-srin

# python - 如何防止级联对象的 pre_delete？

> ID：13604256
> 
> 赞同：0
> 
> 时间：2012-11-28T11:42:11.743
> 
> 标签：python, django

考虑这个[models.py](https://github.com/jpic/django_test/blob/delete_with_m2m_through/test_app/models.py)：

```
from django.db import models
from django.db.models import signals

class CannotRemoveLastAdmin(Exception):
    def __init__(self, env):
        super(CannotRemoveLastAdmin, self).__init__(
            u'Cannot remove the last admin of environment "%s"' % env)

class Environment(models.Model):
    name = models.CharField(max_length=100, unique=True)
    users = models.ManyToManyField('auth.user', through='UserEnvironment')

    def __unicode__(self):
        return self.name

class UserEnvironment(models.Model):
    environment = models.ForeignKey('Environment')
    user = models.ForeignKey('auth.user')
    is_admin = models.BooleanField()
    default = models.BooleanField()
    creation_datetime = models.DateTimeField(auto_now_add=True)

def admin_required_delete(sender, instance, **kwargs):
    if not instance.is_admin:
        return

    admins = UserEnvironment.objects.filter(environment=instance.environment,
        is_admin=True).exclude(pk=instance.pk).count()

    if not admins:
        raise CannotRemoveLastAdmin(instance)
signals.pre_delete.connect(admin_required_delete, sender=UserEnvironment) 
```

我无法删除任何环境，因为发送了 UserEnvironment pre_save 信号：

```
<<< jpic@zen!7953 G:delete_with_m2m_through jpic_so_env
>>> ./manage.py shell_plus
From 'admin' autoload: LogEntry
From 'auth' autoload: Permission, Group, User
From 'contenttypes' autoload: ContentType
From 'sessions' autoload: Session
From 'sites' autoload: Site
From 'account' autoload: Account, SignupCode, SignupCodeResult, EmailAddress, EmailConfirmation, AccountDeletion
From 'profiles' autoload: Profile
From 'test_app' autoload: Environment, UserEnvironment
Python 2.7.3 (default, Apr 24 2012, 00:06:13) 
[GCC 4.7.0 20120414 (prerelease)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
(InteractiveConsole)
>>> Environment.objects.all().delete()
Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File "/tmp/jpic_so_env/lib/python2.7/site-packages/django/db/models/query.py", line 514, in delete
    collector.delete()
  File "/tmp/jpic_so_env/lib/python2.7/site-packages/django/db/models/deletion.py", line 61, in decorated
    func(self, *args, **kwargs)
  File "/tmp/jpic_so_env/lib/python2.7/site-packages/django/db/models/deletion.py", line 239, in delete
    sender=model, instance=obj, using=self.using
  File "/tmp/jpic_so_env/lib/python2.7/site-packages/django/dispatch/dispatcher.py", line 172, in send
    response = receiver(signal=self, sender=sender, **named)
  File "/tmp/so_test_project/test_app/models.py", line 35, in admin_required_delete
    raise CannotRemoveLastAdmin(instance)
CannotRemoveLastAdmin: Cannot remove the last admin of environment "UserEnvironment object"
>>> 
```

我确实想保留这个例外，CannotRemoveLastAdmin，**除非**环境被删除。

您可以通过粘贴安全地重现此问题：

```
cd /tmp
rm -rf jpic_so_env jpic_so_test_project
virtualenv jpic_so_env
source jpic_so_env/bin/activate
git clone https://github.com/jpic/django_test.git -b delete_with_m2m_through jpic_so_test_project
cd so_test_project
git checkout delete_with_m2m_through
pip install django
pip install -r requirements.txt
./manage.py shell_plus 
```

并运行：

```
Environment.objects.all().delete() 
```

这只是作为`setUp()`问题运行测试所必需的`Environment.objects.all().delete()`，所以我宁愿不要用额外的字段来混淆我的模型`marked_for_delete`......

快乐的黑客攻击，并提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:01:19.253

如果你想在你的模型上强制执行这样的策略，你必须以某种方式标记环境，否则你将永远无法删除一个。

如果您真的不喜欢marked_for_delete 选项，您可能会滥用环境名称字段（通过设置特殊值）作为解决方法。这对我来说似乎更骇人听闻。

# core-data - 核心数据：XML 数据库可能损坏的情况

> ID：13604266
> 
> 赞同：0
> 
> 时间：2012-11-28T11:42:38.453
> 
> 标签：core-data

我从核心数据中得到一个错误，即无法解析值“”。该值属于**双**精度类型的非可选实体属性，默认值为 0。

什么会导致此类数据损坏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:25:37.337

我认为您的问题“什么可能导致此类数据损坏”的答案是“故障”。

核心数据只会在需要时获取属性。这是一项功能，而不是错误，因为它有助于在后台有效地管理内存和性能。但是，如果您使用由核心数据获取返回的构造（例如具有获取结果的数组）并构造 XLM，则可以想象错误没有被填充（即核心数据不会去持久存储来获取故障数据自动）。

你观察到一旦你明确地称之为关系，一切都在那里，`children = entity.children`这证实了这个论点。

所以-不，不是访问观察者，而是错误导致您的数据丢失。

# zend-framework - 编辑用户后更新 Zend_Auth 存储

> ID：13604267
> 
> 赞同：3
> 
> 时间：2012-11-28T11:42:44.120
> 
> 标签：zend-framework, zend-auth

我使用 Zend_Auth 对用户进行身份验证，然后将他们的详细信息存储在默认的 Zend_Auth 会话中。这意味着当用户编辑他的详细信息时，这些更改不会反映在应用程序中，直到他重新进行身份验证。

我想避免这个问题：

1.  当用户登录时，我们只将他的存储`user ID`在`Zend_Auth`会话中
2.  在每个请求中，我们在一个`preDispatch()`钩子中从数据库中获取用户的详细信息，使用在会话`user ID`中登录时存储的信息：`Zend_Auth`

    ```
    class Plugin_Auth extends Zend_Controller_Plugin_Abstract
    {

        public function preDispatch(Zend_Controller_Request_Abstract $request)
        {
            if ($auth->hasIdentity())
            {
                $id = $auth->getIdentity()->id;

                $userModel = new Model_User();

                $user = $userModel->fetchOne($id);

                // Where do I store this user object ???
            }

        }
    } 
    ```

3.  问题是：我在哪里存储这个`User`对象？我认为我们不应该为此使用会话，因为会话的目标是持久化数据。但是不需要持久性，因为我们在每次请求时都从数据库中重新获取数据。只有`user ID`必须是持久的。`User`将对象存储在`Zend_Registry`此处是一种选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:05:57.740

我认为示例将是最好的解释如何将新的身份验证详细信息写入**Zend_Auth**存储对象：

```
$userDetails = array('foo' => 'bar');
$storage = new Zend_Auth_Storage_Session();
// set sorage for Zend_Auth
Zend_Auth::getInstance()->setStorage($storage);
// write data to the storage
Zend_Auth::getInstance()->getStorage()->write($userDetails);
// read data from storage
var_dump(Zend_Auth::getInstance()->getStorage()->read());
// edit user's data
$userDetails = array('foo' => 'bar', 'foo', 'bar');
// write new data to storage
Zend_Auth::getInstance()->getStorage()->write($userDetails);
// read new written data from storage
var_dump(Zend_Auth::getInstance()->getStorage()->read()); 
```

我认为这解释了如何设置**Zend_Auth**存储，并在以后更改它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T08:19:39.120

用于`Zend_Session_Namespace`存储对象。它可以是临时的，也可以是永久的，只要你愿意。

Zend_Auth 已经在后台使用它作为它的默认存储机制，使用`Zend_Auth`.

```
class Plugin_Auth extends Zend_Controller_Plugin_Abstract
{
    public function preDispatch(Zend_Controller_Request_Abstract $request)
    {
        $session = new Zend_Session_Namespace('user');//instantiate session namespace
        if ($auth->hasIdentity())
        {
            $id = $auth->getIdentity()->id;

            $userModel = new Model_User();

            $user = $userModel->fetchOne($id);

            $session->user = $user;//store the object can be recalled anywhere
        }
    }
} 
```

当然，Zend_Registry 也可以正常工作，而且一如既往地由您选择。您甚至可能会发现将此功能构建到您的身份验证适配器中是合适的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-09T13:20:40.270

我相信在您的情况下使用 Zend_Registry 很好。

# websphere - java.lang.NoSuchMethodError: org/apache/http/conn/ssl/SSLSocketFactory

> ID：13604272
> 
> 赞同：0
> 
> 时间：2012-11-28T11:43:00.213
> 
> 标签：websphere

我已经安装了我的应用程序并重新启动`WAS 8.5`，我看到下面的异常`SystemOut.log`，因为它在`WAS 7`.

```
java.lang.NoSuchMethodError: org/apache/http/conn/ssl/SSLSocketFactory.<init>(Ljava/lang/String;Ljava/security/KeyStore;Ljava/lang/String;Ljava/security/KeyStore;Ljava/security/SecureRandom;Lorg/apache/http/conn/ssl/X509HostnameVerifier;)V 
```

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T02:52:15.957

我猜您正在部署并尝试使用一个版本的 Apache HttpClient，但 WebSphere 在其库中包含不同的版本。如果您可以使用包含 WebSphere 的版本，那将是最简单的，但如果您需要使用特定版本，您可以将 WebSphere 类加载器策略更改为 PARENT_LAST。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-12-18T03:41:42.123

websphere8 /WebSphere/AppServer/plugins/com.ibm.ws.prereq.jaxrs.jar 有包 org.http.* com.ibm.ws.prereq.jaxrs.jar 和 HttpClient.jar 冲突！

更改类加载器命令无效，因为 websphere 启动时已加载 com.ibm.ws.prereq.jaxrs.jar！

您可以将 HttpClient 包从 org.http.* 更改为 net.test.* 以避免冲突

ps： [http ://www.ibm.com/developerworks/cn/websphere/library/techarticles/1108_jiangwk_classloader/1108_jiangwk_classloader.html](http://www.ibm.com/developerworks/cn/websphere/library/techarticles/1108_jiangwk_classloader/1108_jiangwk_classloader.html)

# c++ - 如何解决 - 语法错误：缺少 ';' 在'<'之前

> ID：13604279
> 
> 赞同：-3
> 
> 时间：2012-11-28T11:43:23.513
> 
> 标签：c++, list, syntax, linked-list

我收到了这个错误，它似乎对谷歌搜索来说太模糊了，所以我把它交给你了！我正在尝试创建一个包含 Account 对象的链表对象。

```
#include "Customer.h"
#include "LinkedList.h"
#include "Account.h"
#include "Mortgage.h"
#include "CurrentAcc.h"
#include "JuniorAcc.h"
#include "transaction.h"

#include <iostream>
#include <string>

using namespace std;

string name;
string address;
string telNo;
char gender;
string dateOfBirth;
list<Account> accList;  // Error
list<Mortgage> mortList;  //Error 
```

我觉得我没有正确声明我的链接列表，但想不出其他方法。

我觉得下一段代码是由于我的错误声明造成的。

```
void Customer::openCurrentAccount(int numb, double bal, int cl, string type, double Interest){
Current acc(numb,bal,cl,type,Interest); //Error - Expression must have class type.
accList.add(acc);
} 
```

这是我的链接列表类 .h 文件的创建。

```
#pragma once

#include <iostream>
using namespace std;

template <class T>
class node;

template <class T>

class list
{

public:
list() { head = tail = NULL; }
~list();
void add(T &obj);
T remove(int ID);
void print(ostream &out);
T search(int ID);

private:
node<T> *head, *tail;
};

template <class T>
class node 
```

{ public: node() {next = NULL;} //private: T 数据；节点*下一个；};

```
template <class T>
list<T>::~list()
{
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T11:54:23.130

您正在定义自己`list`在全局命名空间中调用的类，并将`using namespace std;`其头文件放入以将整个标准库转储到全局命名空间中。这意味着您`list`在全局命名空间中有两个可用的模板，这将导致歧义并因此编译错误。

你应该：

*   避免放入`using namespace std;`源文件
*   永远不要把它放在头文件中，因为它会对使用该头文件的任何人造成命名空间污染
*   避免将自己的声明放在全局命名空间中
*   避免给自己的声明与标准库中的东西同名
*   使用标准库设施而不是编写自己的版本。

# jquery - 带有流畅推特引导的可折叠侧边栏

> ID：13604285
> 
> 赞同：23
> 
> 时间：2012-11-28T11:43:39.323
> 
> 标签：jquery, css, twitter-bootstrap, sidebar

我正在寻找一个 CSS 解决方案来创建一个按钮来使用 twitter 引导程序打开和关闭侧边栏。

我想要人们在他们的网页上拥有的那些小图标之一，它在侧边栏关闭时看起来像一个拉动标签，然后在侧边栏被拉出时跟随侧边栏 - 这有名字吗？

我创建了一个 toggleSidebar 图标链接来执行此操作，但我有两个问题：

1.  我无法使用 float: left 或 display: inline-block 让它与侧边栏一起浮动
2.  已修复，它会创建一个自己的列...我希望它浮动在主要内容之上。

的HTML：

```
<div class="container-fluid">
  <div class="row-fluid">
    <div id="sidebar" class="span3 scrollDiv" style="display: none;">
      <!--Sidebar content-->
    </div>
    <div id="content" class="span12">
      <!--Main content-->
    </div>
    <a id="toggleSidebar" href="#" class="toggles"><i class="icon-chevron-right"></i></a>
  </div>
</div> 
```

的CSS：

```
#toggleSidebar {
  /* float: left; */
  /* display:inline-block; */
  position:fixed;
  display:block;
  left:0;
  top:45px;
  color:#779DD7;
  padding:2px 4px;
} 
```

的JavaScript：

```
function sidebar(panels) {
  if (panels === 1) {
    $('#content').removeClass('span9');
    $('#content').addClass('span12 no-sidebar');
    $('#sidebar').hide();
  } else if (panels === 2) {
    $('#content').removeClass('span12 no-sidebar');
    $('#content').addClass('span9');
    $('#sidebar').show();
  }
}

$('#toggleSidebar').click(function() {
  if ($.asm.panels === 1) {
    $('#toggleSidebar i').addClass('icon-chevron-left');
    $('#toggleSidebar i').removeClass('icon-chevron-right');
    return sidebar(2);
  } else {
    $('#toggleSidebar i').removeClass('icon-chevron-left');
    $('#toggleSidebar i').addClass('icon-chevron-right');
    return sidebar(1);
  }
}) 
```

一个工作示例：http: [//jsfiddle.net/amorris/dmyTR/](http://jsfiddle.net/amorris/dmyTR/)

对于我的生活，我在网上找不到一个例子 - 但这是我所追求的快速绘图： ![拉杆](../Images/5d1b5be4eda9f479f38fc86af973a989.png)

这有点像@http : [//simplerealtytheme.com/plugins/pullout-widgets/](http://simplerealtytheme.com/plugins/pullout-widgets/)的效果- 看起来他们正在使用 display: block; 明确：两者；然后将拉片绝对定位在 div 内，右侧位置为负。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-19T19:17:09.523

我想这就是你想要的，看[这里](http://jsfiddle.net/Trufa/dmyTR/36/show/)。

相关代码是这样的：

```
#content {
    float:left;
}

#mapCanvas img {
    max-width: none;
}

#maincont{
    margin-top: 42px;
}

#toggleSidebar {
    float:left;
    color:#779DD7;
    padding:2px 4px;
}

#sidebar{
    float:left;   
} 
```

请确认那是您的想法！

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-12-19T19:36:46.340

这是你的想法吗？

[http://jsfiddle.net/dmyTR/37/](http://jsfiddle.net/dmyTR/37/)

基本上，而不是 .hide() 和 .show(); 你动画它的位置。

```
 // to hide 
  $('#sidebar').animate({
        left: -180,
  });

  // to show
  $('#sidebar').animate({
        left: 20,
  }); 
```

我从 .container-fluid 中删除了#sidebar，因为它不是容器的一部分。我还将#toggleSidebar 放在#sidebar 中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-14T19:25:11.180

这是我绘制的动画侧抽屉，需要很少的引导修改：http: [//zombiehippie.github.io/Side-drawer/](http://zombiehippie.github.io/Side-drawer/)

```
@media screen and (max-width: 768px) {
    /* this is container is moved to the side if class is added*/
    .side-collapse-container{
        width:100%;
        position:relative;
        left:0;
        transition:left .4s;
    }
    /* toggled when navbar is out */
    .side-collapse-container.out{
        left:200px;
    }
    .side-collapse {
        /* need top to keep from overlapping fixed header*/
        top:50px;
        bottom:0;
        left:0;
        width:200px;
        position:fixed;
        overflow:hidden;
        /* transition animates the element */
        transition:width .4s;
    }
    /* toggled when navbar is in */
    .side-collapse.in {
        width:0;
    }
} 
```

使用样式的固定导航栏`.side-collapse`允许我们将栏固定到屏幕边缘。

在标头之后添加`.side-collapse-container`到容器允许内容在打开时转移。

一些脚本将点击事件附加到`[data-toggle=]`选择器。

```
$(document).ready(function() {   
    var sideslider = $('[data-toggle=collapse-side]');
    var sel = sideslider.attr('data-target');
    var sel2 = sideslider.attr('data-target-2');
    sideslider.click(function(event){
        $(sel).toggleClass('in');
        $(sel2).toggleClass('out');
    });
}); 
```

查看 github 页面获取源 html 或 jam。

HTML 源 [https://github.com/ZombieHippie/Side-drawer/tree/gh-pages](https://github.com/ZombieHippie/Side-drawer/tree/gh-pages)

# sql - SQL 从另一个表中选择平均值

> ID：13604289
> 
> 赞同：4
> 
> 时间：2012-11-28T11:43:42.937
> 
> 标签：sql, select, average

我花了很多时间来构建这个选择，但我无法解决它。我有 2 张桌子。第一个表称为 car 并具有 PK（主键）id_car 和另一个列名称等。第二个表称为 rating 并具有列 id_rating (PK)、id_car (FK) 和 rating_value (integer)。正如您所怀疑的那样，一辆车可以有不止一个咆哮。我想选择所有汽车，我想知道每辆车的平均评分。最后，我想按这个平均降序对结果进行排序。我正在尝试这样的事情：

```
 SELECT id_car, name, average
    FROM car C, rating R 
    WHERE C.id_car = R.id_car 
    ORDER BY (average) (
        SELECT AVG(rating_value) AS average 
        FROM rating R
        WHERE C.id_car = R.id_car) 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T11:48:13.997

对于`SQL Server`; 我也建议你使用`JOIN`而不是`WHERE table1, table2..`

```
SELECT C.id_car, name, AVG(rating_value) AS average
FROM car C JOIN rating R 
      ON C.id_car = R.id_car
GROUP By C.id_car, name
ORDER BY average DESC 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T11:49:07.807

这实现了聚合函数`AVG()`，然后是`GROUP BY`汽车 ID 和名称：

```
select c.id_car, c.name, avg(r.rating_value) aver
from car c
left join rating r
  on c.id_car = r.id_car
group by c.id_car, c.name
order by aver desc 
```

使用 a[`LEFT JOIN`](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)将包括结果中的所有汽车，即使是尚未评级的汽车。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T11:48:31.460

```
SELECT C.name, AVG(R.rating_value)
FROM car C, rating R 
WHERE C.id_car = R.id_car
GROUP BY C.name
ORDER BY AVG(R.rating_value) DESC 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T11:49:58.103

```
 SELECT c.id_car, c.name,avg(r.rating_value) as rating   
FROM car c
 join  rating r 
 on c.id_car = r.id_car   
group by r.id_car 
order by rating 
```

# c++ - Windows Api 多线程消息

> ID：13604290
> 
> 赞同：2
> 
> 时间：2012-11-28T11:43:49.620
> 
> 标签：c++, multithreading, winapi

我只是好奇如何在不使用 Windows API WaitFor* 函数的情况下实现多线程，该函数在线程返回之前停止程序。如果线程阻止主应用程序调整大小或移动等，那么使用线程有什么意义？

是否有任何形式的带有线程的 Windows 消息传递，这将允许我调用我的线程函数然后返回，并在线程完成运行时处理线程的返回值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T11:53:51.213

如果您希望您的 UI 线程知道任务线程何时完成它的任务，那么您可以让您的任务线程将（自定义 - WM_USER 及更高版本）消息发布到您的主窗口（连同线程 ID 和句柄）。并且主窗口的window proc可以知道一个特定的任务线程已经完成了它的任务。这样，UI 线程就不必在线程对象上主动等待（使用 WaitFor*）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T11:53:03.887

您可以使用`MsgWaitForMultipleObjectsEx`等待线程完成并同时处理消息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T11:50:28.493

看看 std::thread、boost::thread、just::thread，对于 c++ 的一般多线程。

但是关于 Windows 消息传递 win32 和 MFC，MSDN**明确**指出**它不是多线程，它是单线程**。（如果使用多线程，则会出现未定义的行为）

对于在主应用程序窗口线程之外的其他线程中发出的异步消息，您应该使用 ::PostMessage()，它将在单线程窗口的单线程消息泵中插入消息事件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T11:58:01.010

[`WaitForSingleObject`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687032%28v=vs.85%29.aspx)可以是非阻塞的，只需将零超时作为第二个参数传递：

```
// Check is thread has been finished
if(::WaitForSingleObject(threadHandle, 0) == WAIT_OBJECT_0)
{
   // Process results
   ...
} 
```

您将需要定期检查此情况，例如在计时器上或在消息循环中处理任何消息之后。

或者你可以使用[`MsgWaitForMultipleObjectsEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684245%28v=vs.85%29.aspx). 当调用线程消息队列中发生一些消息/输入事件时，它将解除阻塞并返回。

正如其他答案所提到的，还有另一种方法 - 使用 Windows 异步发布消息来表示线程已完成其工作。这种方式有缺点 - 工作线程必须知道要向其发布消息的目标窗口或线程。这种依赖性使设计复杂化，并引发了有关检查线程/窗口生命周期的问题。为避免`PostMessage(HWND_BROADCAST,...)`这种情况，可以使用消息广播（），但这对您的情况来说太过分了，我不推荐它。

# iphone - 向 UIView 添加 ActivityIndi cator

> ID：13604292
> 
> 赞同：0
> 
> 时间：2012-11-28T11:44:03.777
> 
> 标签：iphone, xcode, uiactivityindicatorview

我需要向`activityIndicator`UIView 添加一个。我有一个按钮，当单击该按钮时，它必须开始制作动画。实际上，当单击按钮时，会从休息服务接收一些数据并完成解析，然后将其填充。`UITableView`但是活动指示器没有动画..

```
- (void)viewDidLoad
{
    [super viewDidLoad];

  UIActivityIndicatorView *activityIndicator = [[UIActivityIndicatorView alloc] 
                                                  initWithFrame:CGRectMake(0.0f, 0.0f, 20.0f, 20.0f)];
    [activityIndicator setActivityIndicatorViewStyle:UIActivityIndicatorViewStyleGray];

    [self.view addSubview:activityIndicator];
}
-(IBAction)switchtoGetProviders
{
   [activityIndicator startAnimating];
 NSURL *urlString= [NSString stringWithFormat:@"http://230.32.232.32/services/service.svc/Xml"];  
        NSMutableURLRequest *request=[[[NSMutableURLRequest alloc] init]autorelease];
..............//calling data from service url 

} 
```

在接收到分配给 的全部数据后`UITableView`。

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T11:57:53.283

您不能在一个函数/方法中启动和停止活动指示器。

有两种方法可以做到这一点。

如果请求是异步的，那么您需要在单击按钮时启动活动指示器并在收到响应时停止。

但是如果请求是同步的，那么就不可能在一个函数中启动和停止活动。为此，您需要在按钮单击时启动动画，并为发送同步请求创建单独的方法，并使用 [self performSelector:] 方法调用该方法。最后你需要停止动画。

更新：

```
-(IBAction)switchtoGetProviders
{
   [activityIndicator startAnimating];
   [self performSelector:@selector(startRequest) withObject:nil afterDelay:0];
}
- (void)startRequest 
{
   NSURL *urlString= [NSString stringWithFormat:@"http://230.32.232.32/services/service.svc/Xml"];  
        NSMutableURLRequest *request=[[[NSMutableURLRequest alloc] init]autorelease];
..............//calling data from service url 

  [activityIndicator stopAnimating];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T11:48:33.873

您应该将 activityIndi​​cator 定义为属性，在您的代码中将其作为局部变量。
将其定义为属性后，将赋值行更改为：

```
self.activityIndicator = [[UIActivityIndicatorView alloc] initWithFrame:CGRectMake(0.0f, 0.0f, 20.0f, 20.0f)]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T11:48:35.480

这可能是因为您在主线程上同时进行 Web 服务调用和更新 UI。您必须使用 GCD 或分离另一个线程来进行 Web 服务调用。

使用它来分离一个新线程

```
[NSThread detachNewThreadSelector:@selector(callWebserviceMethod:) toTarget:self withObject:nil]; 
```

在您的代码中

```
-(IBAction)switchtoGetProviders
{
    [activityIndicator startAnimating];
     [NSThread detachNewThreadSelector:@selector(callWebserviceMethod:) toTarget:self withObject:nil];
}

-(void)callWebserviceMethod
{

    NSURL *urlString= [NSString stringWithFormat:@"http://230.32.232.32/services/service.svc/Xml"];  
    NSMutableURLRequest *request=[[[NSMutableURLRequest alloc] init]autorelease];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T11:48:48.163

只需在 .h 文件中添加这一行

```
UIActivityIndicatorView *spinningWheel; 
```

并在`viewWillAppear`方法中添加此代码..

```
 spinningWheel = [[UIActivityIndicatorView alloc] initWithFrame:CGRectMake(120, 200, 25.0, 25.0)];

    spinningWheel.activityIndicatorViewStyle = UIActivityIndicatorViewStyleWhiteLarge;///UIActivityIndicatorViewStyleGray also use this if background white
    [self.view addSubview:spinningWheel];

-(IBAction)switchtoGetProviders
{
   [spinningWheel startAnimating];
 NSURL *urlString= [NSString stringWithFormat:@"http://230.32.232.32/services/service.svc/Xml"];  
        NSMutableURLRequest *request=[[[NSMutableURLRequest alloc] init]autorelease];
..............//calling data from service url 

} 
```

当你得到数据或响应时，像下面这样停止动画..

```
 [spinningWheel stopAnimating]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T11:49:02.217

您需要在后台线程中从 Web 服务获取数据，因为在主线程上调用它会导致 UI 挂起

[看到这个](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-28T11:49:09.193

您已在 viewDidLoad 方法中声明了 UIActivityIndi​​catorView *activityIndi​​cator，因此它是仅对该函数可见的本地对象，您需要在头文件或 .m 中的类类别中声明它。当您在 .h 中声明 activityIndi​​cator 实例时，您将能够在您的类中访问它。您可以将其作为属性，也可以只在 .h 中声明，然后在 viewDidLoad 方法中初始化而不重新声明。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-28T11:49:33.507

只需这样做，在.h文件中声明它意味着可以轻松声明

**。H**

```
@interface yourViewController : UIViewController
{
    IBOutlet UIActivityIndicatorView *activityIndicator;
} 
```

**.m**

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    activityIndicator = [[UIActivityIndicatorView alloc]initWithFrame:CGRectMake(143, 220, 37, 37)];
    activityIndicator.activityIndicatorViewStyle = UIActivityIndicatorViewStyleWhiteLarge;
    activityIndicator.color = [UIColor blackColor];
    [self.view addSubview:activityIndicator];
}  

-(IBAction)switchtoGetProviders
{
   [activityIndicator startAnimating];

 NSURL *urlString= [NSString stringWithFormat:@"http://230.32.232.32/services/service.svc/Xml"];  
        NSMutableURLRequest *request=[[[NSMutableURLRequest alloc] init]autorelease];
..............//calling data from service url 

} 
```

# javascript - JQUERY - 自调整导航

> ID：13604295
> 
> 赞同：1
> 
> 时间：2012-11-28T11:44:13.777
> 
> 标签：javascript, jquery, css, navigation

所以我建立了一个导航菜单，它调整每个 li 的大小以适应 js 菜单的整个宽度。

```
$(function() {

    changeWidth(500);

    function changeWidth(menuWidth){
        var menuItems = $('#menu li').size();
        var itemWidth = (menuWidth/menuItems)-2;

        $('#menu').css({'width': menuWidth +'px'});
        $('#menu a').css({'width': itemWidth +'px'});
    }
}); 
```

这里设置得很好[http://jsfiddle.net/MZ2wt/](http://jsfiddle.net/MZ2wt/)

我想知道是否有办法将宽度设置为 100%，而不必声明绝对宽度（目前为 500px）？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T11:50:18.267

这是一个更好的小提琴：http: [//jsfiddle.net/MZ2wt/2/](http://jsfiddle.net/MZ2wt/2/)

实际上，它所做的只是获取`<body>`宽度并对此进行判断。但是请记住，如果您的元素不是`body`. 因此，如果我是你，我会传递对你正在调整大小并调用的元素的引用，`$(this).parent().width()`而不是`$("body").width()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T11:50:45.013

在 CSS 中将菜单设置为 100%。然后更改您的函数，使其测量菜单的宽度，然后调整`<li>`元素的大小以适应测量的宽度。

您还可以更改设置宽度的位置以使用该`width()`方法而不是该`css()`方法，这样您就不必将宽度连接到`px`末尾的字符串中

您还可以添加一个调整大小处理程序，在调整窗口大小时调用您的函数......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T11:58:46.640

查看 jsFiddle，您希望 LI 的宽度等于 UL 的宽度除以 LI 的数量吗？

我已经更新了你的 jsFiddle。基本上，我已将 LI 设置为向左浮动而不是内联显示。内联元素不能设置宽度。我已将 LI 设置为具有文本对齐中心，并从 A 左侧移除浮动并将其放在 LI 上。

[http://jsfiddle.net/MZ2wt/13/](http://jsfiddle.net/MZ2wt/13/)

```
$(function() {
    var lis = $('#menu ul li');
    lis.css('width', ($('#menu ul').outerWidth() / lis.length) + 'px');
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T12:02:56.520

你可以在这里做类似的 [演示](http://jsfiddle.net/MZ2wt/14/)

> $（函数（）{
> 
> ```
> changeWidth(100);// could be setted in CSS
> 
> function changeWidth(menuWidth){
>     $('#menu').css({'width': menuWidth +'%'});
>     var menuWidth =  $('#menu').width();
>     var menuItems = $('#menu li').size();
>     var itemWidth = (menuWidth/menuItems)-2;
> 
>    $('#menu a').css({'width': itemWidth +'px'});
> } }); 
> ```

添加一个监听器来调整窗口大小也可能很有趣。​</p>

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T11:52:27.203

```
.codropsmenu1{
    width:100%;
    padding:3px;
    height:30px;
    background-color:#282828;
} 
```

在 codropsmenu1 类上添加宽度：100% 并且不为菜单设置宽度

```
$(function() {

    changeWidth();

    function changeWidth(){
        var menuItems = $('#menu li').size();
        var menuWidth = $('#menu').width();
        //alert(menuWidth);
        var itemWidth = (menuWidth/menuItems)-2;

        //$('#menu').css({'width': menuWidth +'px'});
        $('#menu a').css({'width': itemWidth +'px'});
    }
}); 
```

# c# - 在 c# 中使用 DefaultView.RowFilter 处理日期时间列中的空值

> ID：13604298
> 
> 赞同：0
> 
> 时间：2012-11-28T11:44:27.253
> 
> 标签：c#, datetime, datatable, null, rowfilter

将 xml 中的内容读取到具有日期列的数据表中，然后`DefaultView.RowFilter`使用特定条件过滤数据表。它适用于除日期在列中具有空值的条件之外的条件，例如。

```
dt.DefaultView.RowFilter =" StartOn  <=#" + Convert.ToDateTime(dtpToStart.Text) + "#" 
```

`if StartOn (date field)`包含它显示以下错误消息的任何空值

> 无法对和 执行`'>='`操作。`System.String``System.DateTime`

我尝试使用 `"isnull(StartOn ,'11/11/2012')<=#"+ Convert.ToDateTime(dtpToStart.Text) +"#"` 但没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T15:26:42.457

在范围比较之前检查 NULL。

例如：

```
dt.DefaultView.RowFilter ="StartOn IS NOT NULL AND StartOn <=#" + Convert.ToDateTime(dtpToStart.Text) + "#" 
```

# email - Gmail 应用 (Android) 上的响应式电子邮件

> ID：13604300
> 
> 赞同：15
> 
> 时间：2012-11-28T11:44:30.467
> 
> 标签：email, gmail, responsive-design, html-email

我创建了一个响应式电子邮件模板，该模板适用于所有网络客户端、所有版本的 Outlook、Apple 邮件、雷鸟、iOS、HTC 的“邮件”应用程序以及几乎所有其他内容（除了 Lotus Notes）。

不适用于 Android 上的 Gmail 应用程序。我很确定这是因为 gmail 去掉了标题中的所有 css（包含媒体查询），所以它显示标准的网络版本，但窗口是移动大小，所以它显示大约 300 像素的电子邮件的一半。反正有没有强制它使用媒体查询？失败了有没有办法改变视口？最好的后备选择是什么？

谢谢！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-28T17:36:36.213

没有使用媒体查询的解决方法，因为它们不能被内联。不幸的是，Gmail 没有关于响应式电子邮件的解决方案（假设响应式=媒体查询）。

以下是替代方案：

1.  **流体布局**- 基于百分比的布局 - 通常是 100% 的单列电子邮件。您可以添加 max-width 变通方法来限制其在桌面上的宽度。这是所有主要客户 100% 支持的，在我看来是 HTML 电子邮件的最佳技术。
2.  **对齐的表格**- 这比响应更“自适应”。与浮动 div 相同。表格中的HTML`align="left"`属性在主要电子邮件客户端中的工作更加一致，因为`float`支持有限。
3.  **保持在左侧**- 只需将所有重要内容设计在左侧即可。设备将始终显示最左侧的 300 左右像素，因此拆分列、文本左侧、图像右侧布局可能是合适的。

[您可以在此处](https://stackoverflow.com/questions/2229822/best-practices-considerations-when-writing-html-emails/21437734#21437734)找到几个流体和浮动/对齐的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-02T12:41:35.633

您可以使用此处看到的技术强制电子邮件保持在 Gmail 应用程序的桌面宽度。这不是一个出色的解决方案，因为一切都非常小，而且肯定没有响应（恰恰相反）。

但至少它会阻止你的布局被破坏。

诀窍是添加

```
<div style="display: none; white-space: nowrap; line-height: 0; color: #ffffff;">
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
</div> 
```

到电子邮件的最广泛部分

[https://css-tricks.com/override-gmail-mobile-optimized-email/](https://css-tricks.com/override-gmail-mobile-optimized-email/)

# objective-c - 从输入流读取 iOS 错误

> ID：13604304
> 
> 赞同：0
> 
> 时间：2012-11-28T11:44:39.577
> 
> 标签：objective-c, ios

我有一个函数，它使用从网络输入流中读取字节

```
long count = [inputstream read:buffer maxlength:no_of_bytes_to_read]; 
```

我调用了这个函数两次。它第一次工作，但第二次我的缓冲区最后有一些不可读的字符替换了我的原始数据。

但是当我在这个读取函数上设置一个断点并慢慢跨过时，它会读取准确的数据
可能是什么原因？

# wpf - 在wpf的侧父窗口中移动子窗口

> ID：13604306
> 
> 赞同：0
> 
> 时间：2012-11-28T11:44:52.683
> 
> 标签：wpf, c#-4.0

```
private void Window_LocationChanged(object sender, EventArgs e)
{

    if (this.Left < this.Owner.Left)
        this.Left = this.Owner.Left;

    if (this.Top < this.Owner.Top)
        this.Top = this.Owner.Top;

} 
```

如您所见，上面编写的代码，但我无法在桌面的底部和右侧移动时限制窗口。因为我没有找到任何属性。

Like this.Right or this.Bottom

请建议是否有人实施了相同的。

谢谢马达夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:55:24.603

this.Right 将是：

```
this.Left + this.Width 
```

this.Bottom 是：

```
this.Top + this.Height 
```

因此，与您在上面编写的代码行等效的代码行，但右侧和底部将是：

```
if (this.Left + this.Width > this.Owner.Left + this.Owner.Width)
    this.Left = this.Owner.Left + this.Owner.Width - this.Width;

if (this.Top + this.Height > this.Owner.Top + this.Owner.Height)
    this.Top = this.Owner.Top + this.Owner.Height - this.Height; 
```

# user-interface - 可通过 GUI 按钮控制的第一人称角色控制器

> ID：13604309
> 
> 赞同：0
> 
> 时间：2012-11-28T11:45:00.407
> 
> 标签：user-interface, controller, unity3d, frame-rate

我一直不走运在我无法找到的呋喃问题上寻找解决方案。我需要弄清楚如何让经典的第一人称角色由 GUI 按钮（箭头）而不是休闲的 WASD 风格控制

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T13:16:33.583

如果您指的是键盘上的箭头键，则默认情况下它适用于“字符控制器”包中的 Unity FPS 控制器。

如果你还没有使用这个包，你可以通过选择 Assets -> Import package -> Character Controller 来导入它。

如果您指的是屏幕控件中的 GUI 按钮，我强烈建议您不要这样做。因为要单击这些按钮中的任何一个，您必须将鼠标移动到该位置，然后您无法控制 FPS 控制器移动的方向。

# qt - QML：如何在 Pathview 中获取当前项目

> ID：13604311
> 
> 赞同：2
> 
> 时间：2012-11-28T11:45:06.710
> 
> 标签：qt, qml, qt-quick

我想知道如何在 Pathview 中获取当前项目。

我们确实有 iscurrentItem 属性，但如果可能的话，我们如何使用它。通过我目前的实现，我得到了当前索引，但没有得到该索引处项目的值

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T12:45:07.650

如果您定义了**preferredHighlightBegin**和**preferredHighlightEnd**属性，您可以使用**childAt**函数来获取当前项目：

```
//example for vertical path
view.childAt(0, view.height * (preferredHighlightEnd + preferredHighlightBegin) / 2.0); 
```

还有另一种方法，您可以迭代 PathView 的所有子项并找出哪个子项是当前项：

```
for(var i = 0; i < view.children.length; ++i)
{
  if(view.children[i].PathView.isCurrentItem){
    console.log(i + " is current item")
    //view.children[i] is your current item here
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T14:54:26.343

在您的委托项目中，您可以设置一个更新路径自定义属性的连接：

```
PathView {
  id: myPathView

  // ...

  property Item currentItem
  delegate: pathDelegate
}

Component {
  id: pathDelegate

  Item {
    id: delegateItem

    // ...

    Connection {
      target: myPathView
      onCurrentIndexChanged: {
        if (myPathView.currentIndex === delegateItem.index) {
          myPathView.currentItem = delegateItem;
        }
      }
    }

  }

} 
```

效率不高，但确实有效。

# deployment - 使用 Ant 使用引用的 jar 部署 JavaFX 2 应用程序

> ID：13604313
> 
> 赞同：7
> 
> 时间：2012-11-28T11:45:13.557
> 
> 标签：deployment, ant, javafx-2, executable-jar

我已经编写了一个 JavaFx 2 应用程序（在 Windows 平台上使用 Eclipse），现在我想将它部署到一个“可点击”的 jar 文件中。*我的应用程序使用来自单独 jar 文件的资源代码（在 Eclipse 中，此资源代码是来自 JavaFx 应用程序项目的单独项目）*。

使用我的 Ant build.xml，我为应用程序和资源代码编译了代码并创建了两个 jar 文件：

1.  **fxdemo.jar** - 我的 JavaFx 应用程序代码的 jar
2.  **guifw.jar** - JavaFx 应用程序引用的资源代码的 jar。

作为最后一步（我认为），使用 JavaFX Ant 任务，我想将这两个 jar 文件捆绑到启动我的 JavaFX 应用程序的“可点击”jar 中。**我尝试使用以下来自我的build.xml**的摘录来做到这一点。

```
<target name="deployFx" depends="fxdemo.jar" description="Releases FxDemo">
    <taskdef resource="com/sun/javafx/tools/ant/antlib.xml"      
              uri="javafx:com.sun.javafx.tools.ant"
              classpath=".:${fxgui.javaHome}\lib\ant-javafx.jar"/>

    <copy file="${fxgui.lib_guifw_path}" tofile="delivery/lib/guifw.jar"/>          

    <fx:application id="FxDemoGUI" name="Fx Demo GUI" MainClass="com.demo.main.MainGUI"/>

    <fx:resources id="jars">
        <fx:fileset dir="delivery/lib" includes="fxdemo.jar"/>
        <fx:fileset dir="delivery/lib" includes="guifw.jar"/>
    </fx:resources>

    <fx:jar destfile="deploy/fxDemoGui.jar">
        <!-- Define what to launch  -->
        <fx:application refid="FxDemoGUI"/>

        <fx:platform javafx="2.1+">
            <fx:jvmarg value="-Xms32m"/>
            <fx:jvmarg value="-Xmx32m"/>
            <property name="com.util.fxguifw.setup" value="com/util/fxguifw/demo/demo.properties"/>
            <property name="user.language" value="en"/>
            <property name="user.country" value="GB"/>
            <property name="CSS_ID" value="NIGHT"/>
        </fx:platform>

        <fx:resources>
            <fx:fileset dir="delivery/lib" includes="fxdemo.jar"/>
            <fx:fileset dir="delivery/lib" includes="guifw.jar"/>
        </fx:resources>

        <manifest>
            <attribute name="Implementation-Vendor" value="${fxgui.vendor}"/>
            <attribute name="Implementation-Title" value="${fxgui.title}"/>
            <attribute name="Implementation-Version" value="1.0"/>
        </manifest>

        <fileset dir="delivery"/>

    </fx:jar> 
```

*但是，之后当我尝试启动应用程序（通过单击 jar 或使用java -jar appname.jar*从命令行启动）时，似乎应用程序找不到 Main 类：

**JavaFX 启动器错误**

**找不到类：com.demo.main.MainGUI**

```
C:\Program Files\Java\jdk1.7.0_09\bin>java -jar C:\MEKMAN\Clearcase_Views\wmarekm_ss_gambau\amb_c2_prototype\javafx\prototypeGUI\deploy\fxDemoGui.jar
java.lang.ClassNotFoundException: com.demo.main.MainGUI
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:264)
    at com.javafx.main.Main.getAppClass(Main.java:506)
    at com.javafx.main.Main.launchApp(Main.java:622)
    at com.javafx.main.Main.main(Main.java:805) 
```

当我研究创建的 MANIFEST.MF（在创建的 jar 文件中）时，它看起来和我预期的差不多。

```
Manifest-Version: 1.0
JavaFX-Version: 2.1+
implementation-vendor: MyVendor
implementation-title: MyfirstJavaFxDeploy
implementation-version: 1.0
JavaFX-Application-Class:com.demo.main.MainGUI
JavaFX-Class-Path: fxdemo.jar guifw.jar
Created-By: JavaFXPackager
Main-Class: com/javafx/main/Main 
```

...但是话又说回来，它不起作用，很明显我做错了什么。

我还尝试通过添加包括类目录（两个 Eclipse/项目中的每一个的输出文件夹）：

```
<fileset dir="../guifw/classes"/>
<fileset dir="classes"/> 
```

然后，启动器*确实*找到了我的主类 (com.demo.main.MainGUI) 但无法正确运行，因为它缺少我试图指定的**-D 参数：**

```
<property name="com.util.fxguifw.setup" value="com/util/fxguifw/demo/demo.properties"/> 
```

所以，如果你已经读到这里，我的问题是：

1.  *为什么启动器在引用的 jar (fxdemo.jar) 中找不到我的主类？*
2.  *在为应用程序指定我的 -D 参数时，我做错了什么？*

此致

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T13:09:14.927

我在@Anders Petersson 的链接中研究/测试了帖子（**2012-apr-12 03:32 ）中提出的修复：**

[**来自@Anders Petersson 的链接**](https://forums.oracle.com/forums/thread.jspa?messageID=10270666)

据我所知，这是一种解决方法，可以在生成的 jar 文件 ( **fxDemoGui.jar** ) 中取消任何使用的 jar 文件（在我的情况下为 guifw.jar 和 demofx.jar），就像从我的两个 Eclipse 项目（如问题中所述）。

我将示例调整为我的 build.xml 并在稍微添加后让它工作：

```
<target name="dist" depends="fxdemo.jar">

    <taskdef resource="com/sun/javafx/tools/ant/antlib.xml"      
                              uri="javafx:com.sun.javafx.tools.ant"
                              classpath=".:${fxgui.javaHome}\lib\ant-javafx.jar"/>

    <copy file="${fxgui.lib_guifw_path}" tofile="delivery/lib/guifw.jar"/>

    <fx:jar destfile="predeploy/fxDemoGui.jar">
        <!-- ADDITION -> Adds the Launcher's Main class to the resulting jar (com.javafx.main.Main)! -->
        <fx:application id="FxDemoGUI"
                        name="Fx Demo GUI"
                        mainClass="com.demo.main.MainGUI"/>

        <fileset dir="delivery"/>
    </fx:jar>
</target> 
```

在示例中的***dist*** -target 中，我必须添加：

```
<fx:application id="FxDemoGUI"
                name="Fx Demo GUI"
                mainClass="com.demo.main.MainGUI"/> 
```

没有它，生成的 jar 文件没有必要的**com.javafx.main.Main** -class，因此无法启动。

所以，这个解决**方案为我的问题 1 提供了一个有用的解决方法）**

*尽管如此，如果有人提出如何在生成的 jar/文件中保持 jar 文件完整的解决方案，我将不胜感激。*

# java - 我应该在什么范围内保留什么

> ID：13604314
> 
> 赞同：0
> 
> 时间：2012-11-28T11:45:14.920
> 
> 标签：java, jsf, jsf-2, javabeans

我正在使用 JSF 2.0 和 MySQL 创建新网站。下面是我所拥有的。

**注意**在每个表格中，我只考虑 1-2 个字段，仅用于说明目的。实际上，我将根据要求有很多领域。

我有n个申请人。

```
ApplicantDataTable
+++++++++++++++++++
 appId     PK
 appName
+++++++++++++++++++ 
```

每个申请人都会有很多项目。

```
ProjectDataTable
+++++++++++++++++++
 proId     PK
 proName
 appId     FK
+++++++++++++++++++ 
```

每个项目都会有很多阶段，每个阶段我都需要输入数据。

```
stage1datatable
+++++++++++++++++++
 stg001id   PK 
 proId      FK
 stg001name
+++++++++++++++++++

stage2datatable
+++++++++++++++++++
 stg002id   PK 
 proId      FK
 stg002name
+++++++++++++++++++ 
```

在申请人屏幕中，我将有申请人名单。单击此按钮后，我将获得该申请人的项目列表。一旦我点击它，我将看到第 1 阶段屏幕，在第 1 阶段屏幕中，在底部我将有第 2、3、4 阶段等的链接。

我看到我必须在所有阶段都使用 ProjectId 和 appId，所以我不确定我是否应该保留在会话范围内具有 projectId 和 appId 的 bean？有人可以建议我如何在 Java 中构造 bean 吗？

任何建议都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T20:44:33.920

理想情况下，会话范围将适用于您的用例，即将两个 id 存储在会话范围中，但实际上，这可能是矫枉过正。如果两个 id 都将被处理（因此可用于在范围中重新存储），您可以将它们保留在[flash 范围](http://mkblog.exadel.com/2010/07/learning-jsf2-using-flash-scope/)中。在每个目标页面上，您都可以访问这些 id，如果您在下一个请求中需要它们，只需将它们重新存储在同一范围内即可。这样，就不会浪费了。使用该`putNow()`方法保证请求完成后变量可用。

与您的问题无关，我不禁注意到您的数据模型中存在一些问题

1.  `appName`为什么要跨两个表复制变量？看起来像一些不必要的非规范化

2.  为每个项目阶段创建一个表会在不久的将来带来问题。除非您绝对确定您的项目阶段永远不会超过 2 或 3，否则我强烈建议您将所有项目阶段合并到一个表中，然后`project_stage_id`在该表中添加作为字段。使用唯一键约束和触发器的组合来确保不会发生重复，并且每个项目的项目阶段 ID 是顺序的（如果这是要求的话）

# generics - Seq.iter 比本机映射慢：任何通用解决方案？

> ID：13604316
> 
> 赞同：2
> 
> 时间：2012-11-28T11:45:28.617
> 
> 标签：generics, compiler-construction, f#, inline, functor

这个问题之前已经出现过，John Palmer 回答了它的原因： [为什么 Seq.iter 和 Seq.map 这么慢？](https://stackoverflow.com/questions/10874557/why-is-seq-iter-and-seq-map-so-much-slower)

```
let ar = Array.zeroCreate<int> (64*1024*1024)
#time
//Real: 00:00:00.171, CPU: 00:00:00.171, GC gen0: 0, gen1: 0, gen2: 0
for i in 0 .. ar.Length - 1 do
    ar.[i] <- ar.[i]*3

//Real: 00:00:00.327, CPU: 00:00:00.328, GC gen0: 0, gen1: 0, gen2: 0
ar |> Array.iteri(fun i _ -> ar.[i] <- ar.[i]*3)

//Real: 00:00:02.249, CPU: 00:00:02.250, GC gen0: 0, gen1: 0, gen2: 0
ar |> Seq.iteri(fun i _ -> ar.[i] <- ar.[i]*3) 
```

我想知道是否有某种“内联”或其他通用机制可以映射，比如将序列映射到（它最后知道的？）具体类型以加速这些行为。例如，在这里我有静态保证我将遍历一个数组。

您知道理论上存在对此的满意解决方案吗？（会有什么花哨的名字？）

是否有一些语言可以很好地承认和解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T10:11:52.550

确实，您在 F# 中没有更高种类的类型，但您仍然可以使用内联函数并模拟一些 Typeclass 行为。通过定义 Functor，您可以获得原生映射的通用解决方案：

```
type Fmap = Fmap with
    static member ($) (_Functor:Fmap, x:List<_> ) = fun f -> List.map    f x  
    static member ($) (_Functor:Fmap, x:array<_>) = fun f -> Array.map   f x
    static member ($) (_Functor:Fmap, x:_ [,]   ) = fun f -> Array2D.map f x
    static member ($) (_Functor:Fmap, x:_ [,,]  ) = fun f -> Array3D.map f x
    static member ($) (_Functor:Fmap, x:_ [,,,] ) = fun f ->
        Array4D.init (x.GetLength 0) (x.GetLength 1) (x.GetLength 2) (x.GetLength 3) (fun a b c d -> f x.[a,b,c,d])

let inline fmap f x = (Fmap $ x) f 
```

以 fmap 为例，这个函数是内联的，它将接受重载中定义的任何类型，并且它的执行速度与直接调用函数一样快（这实际上是在幕后发生的）。要进行迭代，您可以使用 fmap 并丢弃结果，在您的情况下，您可能希望定义类似 fmapi 的内容以提供可用的索引。

请记住，您应该始终使用具体类型调用这些函数，如果您传递 Seq<'a> 它将失败，您不应该混合两种方法：子类型和临时多态性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T05:41:40.793

> 您知道理论上存在对此的满意解决方案吗？（会有什么花哨的名字？）

你不能吃你的蛋糕。

> 是否有一些语言可以很好地承认和解决这个问题？

F# 承认了这个问题并很好地解决了它。您可以像 F# 一样拥有清晰的性能配置文件和快速编译，也可以拥有不可预知的性能配置文件和缓慢的编译，这是由于大量复杂的编译器装载了针对此类特殊情况的优化通道。F# 选择了前一种（务实的）解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T17:02:23.517

因为`iter`您可以检查集合的类型并分派到最佳实现。您遇到问题的地方是 with `map`，需要返回`T<'b>`一些`T<'a>`. 这需要 F# 不直接支持的更高种类的类型。`map`这是一个说明问题的尝试：

```
module AnySeq =
  let map<'a, 'b, 'c, 'd when 'a :> seq<'b> and 'd :> seq<'c>> (f: 'b -> 'c) (s: 'a) : 'd =
    let (!) x = unbox (box x)
    let tyDef = s.GetType().GetGenericTypeDefinition()
    if tyDef = typedefof<list<_>> then !(List.map f !s)
    elif tyDef = typedefof<array<_>> then !(Array.map f !s)
    else !(Seq.map f !s) 
```

如果您尝试使用它将 an 转换`int list`为`float list`：

```
let ints = List.init 10000000 id
let floats = ints |> AnySeq.map float 
```

你得到一个值限制错误：

> 'floats' 值已被推断为具有泛型类型 val floats : '_a when '_a :> seq

如果您向 中添加类型注释，它会起作用`floats`，但是您还没有完成任何事情。

# c++ - 无法创建顶点缓冲区

> ID：13604319
> 
> 赞同：1
> 
> 时间：2012-11-28T11:45:40.597
> 
> 标签：c++, windows-phone-8, directx-11, vertex-buffer

我有一个带有 DirectX 组件的 Windows Phone 8 C#/XAML 项目。我正在尝试渲染一些粒子。我创建了一个顶点缓冲区，我看到它进入了要创建的函数，但是当它到达更新顶点缓冲区时，缓冲区为 NULL。我还没有释放缓冲区。你知道为什么会这样吗？任何输出消息有帮助吗？谢谢。

我的输出窗口上的打印输出和错误：

```
'TaskHost.exe' (Win32): Loaded '\Device\HarddiskVolume4\Windows\System32\d3d11_1SDKLayers.dll'. Cannot find or open the PDB file.
D3D11 WARNING: ID3D11Texture2D::SetPrivateData: Existing private data of same name with different size found! [ STATE_SETTING WARNING #55: SETPRIVATEDATA_CHANGINGPARAMS]
Create vertex buffer
D3D11 WARNING: ID3D11DeviceContext::DrawIndexed: The Pixel Shader unit expects a Sampler to be set at Slot 0, but none is bound. This is perfectly valid, as a NULL Sampler maps to default Sampler state. However, the developer may not want to rely on the defaults.  [ EXECUTION WARNING #352: DEVICE_DRAW_SAMPLER_NOT_SET]
The thread 0xb64 has exited with code 0 (0x0).
m_vertexBuffer is null
D3D11 WARNING: ID3D11DeviceContext::DrawIndexed: The Pixel Shader unit expects a Sampler to be set at Slot 0, but none is bound. This is perfectly valid, as a NULL Sampler maps to default Sampler state. However, the developer may not want to rely on the defaults.  [ EXECUTION WARNING #352: DEVICE_DRAW_SAMPLER_NOT_SET]
m_vertexBuffer is null 
```

在 CreateDeviceResources 中，我调用了 CreateVertexShader、CreateInputLayout、CreatePixelShader、CreateBuffer。然后我开始创建采样器和顶点缓冲区，代码如下：

```
 auto createCubeTask = (createPSTask && createVSTask).then([this] () {

        // Create a texture sampler state description.
        D3D11_SAMPLER_DESC samplerDesc;
        samplerDesc.Filter = D3D11_FILTER_MIN_MAG_MIP_LINEAR;
        samplerDesc.AddressU = D3D11_TEXTURE_ADDRESS_WRAP;
        samplerDesc.AddressV = D3D11_TEXTURE_ADDRESS_WRAP;
        samplerDesc.AddressW = D3D11_TEXTURE_ADDRESS_WRAP;
        samplerDesc.MipLODBias = 0.0f;
        samplerDesc.MaxAnisotropy = 1;
        samplerDesc.ComparisonFunc = D3D11_COMPARISON_ALWAYS;
        samplerDesc.BorderColor[0] = 0;
        samplerDesc.BorderColor[1] = 0;
        samplerDesc.BorderColor[2] = 0;
        samplerDesc.BorderColor[3] = 0;
        samplerDesc.MinLOD = 0;
        samplerDesc.MaxLOD = D3D11_FLOAT32_MAX;

        // Create the texture sampler state.
        HRESULT result = m_d3dDevice->CreateSamplerState(&samplerDesc, &m_sampleState);
        if(FAILED(result))
        {
            OutputDebugString(L"Can't CreateSamplerState");
        }

        //InitParticleSystem();

        // Set the maximum number of vertices in the vertex array.
        m_vertexCount = m_maxParticles * 6;

        // Set the maximum number of indices in the index array.
        m_indexCount = m_vertexCount;

        // Create the vertex array for the particles that will be rendered.
        m_vertices = new VertexType[m_vertexCount];
        if(!m_vertices)
        {
            OutputDebugString(L"Can't create the vertex array for the particles that will be rendered.");
        }
        else
        {
            // Initialize vertex array to zeros at first.
            int sizeOfVertexType = sizeof(VertexType);
            int totalSizeVertex = sizeOfVertexType * m_vertexCount;
            memset(m_vertices, 0, totalSizeVertex);
            D3D11_SUBRESOURCE_DATA vertexBufferData = {0};
            vertexBufferData.pSysMem = m_vertices;
            vertexBufferData.SysMemPitch = 0;
            vertexBufferData.SysMemSlicePitch = 0;

            int sizeOfMVertices = sizeof(m_vertices);
            CD3D11_BUFFER_DESC vertexBufferDesc(
                totalSizeVertex,            // byteWidth
                D3D11_BIND_VERTEX_BUFFER,   // bindFlags
                D3D11_USAGE_DYNAMIC,        // D3D11_USAGE usage = D3D11_USAGE_DEFAULT
                D3D11_CPU_ACCESS_WRITE,     // cpuaccessFlags
                0,                          // miscFlags
                0                           // structureByteStride
                );

            OutputDebugString(L"Create vertex buffer\n");

            DX::ThrowIfFailed(
                m_d3dDevice->CreateBuffer(
                    &vertexBufferDesc,
                    &vertexBufferData,
                    &m_vertexBuffer
                    )
                );
        }

        unsigned long* indices = new unsigned long[m_indexCount];
        if(!indices)
        {
            OutputDebugString(L"Can't create the index array.");
        }
        else
        {
            // Initialize the index array.
            for(int i=0; i<m_indexCount; i++)
            {
                indices[i] = i;
            }

            // Set up the description of the static index buffer.
            // Create the index array.
            D3D11_BUFFER_DESC indexBufferDesc;
            indexBufferDesc.Usage = D3D11_USAGE_DEFAULT;
            indexBufferDesc.ByteWidth = sizeof(unsigned long) * m_indexCount;
            indexBufferDesc.BindFlags = D3D11_BIND_INDEX_BUFFER;
            indexBufferDesc.CPUAccessFlags = 0;
            indexBufferDesc.MiscFlags = 0;
            indexBufferDesc.StructureByteStride = 0;

            // Give the subresource structure a pointer to the index data.
            D3D11_SUBRESOURCE_DATA indexData;       
            indexData.pSysMem = indices;
            indexData.SysMemPitch = 0;
            indexData.SysMemSlicePitch = 0;

            // Create the index buffer.
            DX::ThrowIfFailed(
                m_d3dDevice->CreateBuffer(
                    &indexBufferDesc,
                    &indexData,
                    &m_indexBuffer
                    )
                );

            // Release the index array since it is no longer needed.
            delete [] indices;
            indices = 0;

        }

    });

    createCubeTask.then([this] () {     
        m_loadingComplete = true;
    });
} 
```

我的顶点是位置、纹理和颜色：

```
struct VertexType
{
    DirectX::XMFLOAT3 position;
    DirectX::XMFLOAT2 texture;
    DirectX::XMFLOAT4 color;

};

Microsoft::WRL::ComPtr<ID3D11SamplerState> m_sampleState;
VertexType* m_vertices;
Microsoft::WRL::ComPtr<ID3D11Buffer> m_vertexBuffer;

const D3D11_INPUT_ELEMENT_DESC vertexDesc[] = 
{
    { "POSITION", 0, DXGI_FORMAT_R32G32B32_FLOAT, 0, 0,  D3D11_INPUT_PER_VERTEX_DATA, 0 },
    { "TEXCOORD", 0, DXGI_FORMAT_R32G32_FLOAT, 0, D3D11_APPEND_ALIGNED_ELEMENT, D3D11_INPUT_PER_VERTEX_DATA, 0 },
    { "COLOR",    0, DXGI_FORMAT_R32G32B32A32_FLOAT, 0, D3D11_APPEND_ALIGNED_ELEMENT, D3D11_INPUT_PER_VERTEX_DATA, 0 },
}; 
```

顶点着色器.HLSL：

```
cbuffer ModelViewProjectionConstantBuffer : register(b0)
{
    matrix model;
    matrix view;
    matrix projection;
};

struct VertexInputType
{
    float4 position : POSITION;
    float2 tex : TEXCOORD0;
    float4 color : COLOR;
};

struct PixelInputType
{
    float4 position : SV_POSITION;
    float2 tex : TEXCOORD0;
    float4 color : COLOR;
};

PixelInputType main(VertexInputType input)
{
    PixelInputType output;    
    // Change the position vector to be 4 units for proper matrix calculations.
    input.position.w = 1.0f;
    // Calculate the position of the vertex against the world, view, and projection matrices.
    output.position = mul(input.position, model);
    output.position = mul(output.position, view);
    output.position = mul(output.position, projection);

    // Store the texture coordinates for the pixel shader.
    output.tex = input.tex;

    // Store the particle color for the pixel shader. 
    output.color = input.color;

    return output;
} 
```

调用后： m_d3dDevice->CreateBuffer(&vertexBufferDesc, &vertexBufferData, &m_vertexBuffer) m_vertexBuffer 不为空。

但是当我到达我的 Update() 函数时，m_vertexBuffer 为 NULL！

```
D3D11_MAPPED_SUBRESOURCE mappedResource;    
if (m_vertexBuffer == nullptr)
{
    OutputDebugString(L"m_vertexBuffer is null\n");
}
else
{

    // Lock the vertex buffer.
    DX::ThrowIfFailed(m_d3dContext->Map(m_vertexBuffer.Get(), 0, D3D11_MAP_WRITE_DISCARD, 0, &mappedResource));

    // Get a pointer to the data in the vertex buffer.
    VertexType * verticesPtr = (VertexType*)mappedResource.pData;

    //// Copy the data into the vertex buffer.
    int sizeOfVertices = sizeof(VertexType) * m_vertexCount;
    memcpy(verticesPtr, (void*)m_vertices, sizeOfVertices);

    //// Unlock the vertex buffer.
    m_d3dContext->Unmap(m_vertexBuffer.Get(), 0);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T18:02:13.227

关于采样器，您需要将其分配给您的像素着色器。

m_d3dContext.Get()->PSSetSamplers(0,1,&m_sampleState);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T09:01:44.817

当我去渲染它时，我对 m_vertexBuffer 进行了错误的调用。这修复了 m_vertexBuffer 为空的错误。

以前的：

```
m_d3dContext.Get()->IASetVertexBuffers(0, 1, &m_vertexBuffer, &stride, &offset); 
```

使固定：

```
m_d3dContext.Get()->IASetVertexBuffers(0, 1, m_vertexBuffer.GetAddressOf(), &stride, &offset); 
```

但是，它并不能修复采样器状态的错误：

> DrawIndexed：像素着色器单元期望采样器设置在插槽 0

# jquery - 从 HTTPS 向 HTTP 发送请求并获得响应

> ID：13604321
> 
> 赞同：1
> 
> 时间：2012-11-28T11:45:43.920
> 
> 标签：jquery, https, httpresponse

我有一个使用 HTTPS 连接的网站。它运行一个用于将视频上传到 HTTP 服务器的 PHP 脚本，并在成功上传时服务器返回一个密钥作为响应。请求可以成功完成，但由于协议不匹配，它没有得到任何响应。请求和响应一切都是通过 AJAX 完成的。

上传视频后，Google Chrome 控制台显示错误：

```
The page at about:blank displayed insecure content from http://remote-server.com
[blocked] The page at https://www.my-site.com/ 
```

我试过使用`header('Access-Control-Allow-Origin: *')`但它不起作用。

我也尝试过使用“https://”提出请求，但 Chrome 控制台说`Unsafe JavaScript attempt to access frame with URL data:text/html,chromewebdata from frame with URL https://www.my-site.com/. Domains, protocols and ports must match.`

如何从 HTTPS 连接向 HTTP 发送请求并获得响应。

# r - 通过非 NA 值合并两个向量

> ID：13604322
> 
> 赞同：11
> 
> 时间：2012-11-28T11:45:46.933
> 
> 标签：r, vector, na

> **可能重复：**
> [逐个元素组合两个向量](https://stackoverflow.com/questions/12511476/combining-two-vectors-element-by-element)

我有两个向量

```
d = c(1, 2, NA, NA)
c = c(NA, NA, 1, NA) 
```

如何获得将非 NA 组合如下的输出？

```
[1] 1 2  1 NA 
```

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-28T12:41:00.063

```
pmin(d, c, na.rm = TRUE) 
```

会成功的。

```
[1]  1  2  1 NA 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-28T11:53:25.703

你问的有点含糊。例如，如果两个元素都不是 NA，会发生什么？

无论如何，这是一种可以提供所需结果的方法：

```
##Don't name things c - it's confusing.
d1 = c(1,2,NA,NA)
d2 = c(NA,NA,1,NA)

d1[is.na(d1)] = d2[is.na(d1)] 
```

这使：

```
R> d1
[1]  1  2  1 NA 
```

# chef-infra - 未找到食谱：Chef Solo

> ID：13604331
> 
> 赞同：4
> 
> 时间：2012-11-28T11:46:08.710
> 
> 标签：chef-infra, cookbook

我从 Chef 社区下载了食谱“oc-java-master”，现在我尝试使用已安装在 Windows Server 2008 上的 chef-solo 运行它。

经过大量的谷歌搜索和 stackoverflow 支持后，我能够获取定义运行列表的 JSON 文件。但是下面的错误在过去的 4-5 个小时里一直困扰着我，我完全一无所知。

> [2012-11-28T11:33:28+00:00] 致命：Chef::Exceptions::CookbookNotFound：Cookbook java 未找到。如果您从另一本食谱加载 java，请确保在元数据中配置依赖项

如果有人可以查看食谱并建议我一些解决方案，我将不胜感激。食谱的 URL 在[这里](https://github.com/cookbooks/oc-java)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T15:12:40.023

一些东西。

使用 Chef Solo，您必须提前告诉它更多信息，以便它找到食谱。

1.  它需要知道用于运行的运行列表（和节点属性，如果有的话）。`-j`这是与选项一起传递的“json 文件” 。

2.  它需要知道食谱的路径。您可以使用该选项从远程 tarball 下载它们`-r`，并让它处理其余部分，或者您必须编写一个带有该`cookbook_path`值的配置文件并取消归档您要在该目录中使用的说明书。这是`c:\var\chef\cookbooks`默认设置。

此外，[Opscode Chef 社区站点](http://community.opscode.com/)与 GitHub 上的“Cookbooks”组织不同。

[Opscode 的 Java 食谱](http://community.opscode.com/cookbooks/java)不适用于 Windows。您需要自己编写或找到另一个可以编写的。

最后，Chef[邮件列表](http://lists.opscode.com)和[IRC 频道](http://community.opscode.com/chat/chef)是快速获得 Chef 帮助的最佳方式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-16T07:46:09.037

您需要在 metadata.rb 文件中添加一行。取决于您的问题的“cookbookname”转到 oc-java-master 的元数据文件并写入

取决于“java”

请验证cookbook java 是否存在于您的cookbook 路径中

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-09-09T14:15:07.270

在我的情况下，我使用 Vagrant 和 chef_solo 提供者。似乎目标厨师节点（在我的情况下是 Vagrant 托管 VM）上的文件夹 /tmp/vagrant-chef/a0544031e745d8ec23aa205c03bf9231 是此提供程序缓存食谱的地方。由于某种原因，此文件夹为空，导致 chef_solo 找不到任何食谱。也许它是空的，因为我打断了一次执行（只是猜测）。

我完全删除了 /tmp/vagrant-chef，然后执行“vagran reoad”，然后执行“vagrant provision”命令。这创建了 /tmp/vagrant-chef/a0544031e745d8ec23aa205c03bf9231/cookbooks 树的新副本，这一次一切正常，我不再得到“找不到食谱”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-02T04:24:27.987

1.  Chef 需要一个配置文件，但会接受命令行上的选项来代替配置文件。
2.  它期望配置文件驻留在**/etc/chef**

或者给你自己的solo.rb文件

```
chef-solo --config ~/.chef/solo.rb --override-runlist 'recipe[your-app]' 
```

其中 solo.rb 具有以下内容：

```
cookbook_path ENV['HOME'] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-03T23:18:08.350

我遇到了几乎完全相同的问题，尽管除了您在上面看到的内容之外，我的解决方案还有其他问题。就我而言，我从安装 ChefDK 的盒子中手动复制了食谱。我从

c:\users[user].berkshelf\cookbooks 目录

到我打算运行厨师客户端的目标机器。我最初尝试运行 chef-zero 时遇到问题，所以我尝试了 chef-solo 并设置了一个带有运行列表的 .json 文件和一个 solo.rb 文件，如您在上面看到的那样通过，但仍然出现错误。

事实证明，这个问题是由于每本复制的食谱都在名称中嵌入了版本。从名称中删除版本后，它会从solo.rb 中指定的路径中找到确切的版本。

在我的情况下，问题不是找到食谱，而是找到与依赖项中指定的名称完全相同的食谱（没有版本）。

# javascript - KineticJS 动画通过更新自定义形状

> ID：13604333
> 
> 赞同：0
> 
> 时间：2012-11-28T11:46:16.397
> 
> 标签：javascript, html, html5-canvas, kineticjs

我现在有一个自定义形状，这个形状由一个全局变量控制。因此，我假设我只需要更改这个全局变量`frame.time`，删除旧形状，然后创建新形状。

但是，它似乎不起作用。以下是简化的代码。

```
<script>
  var toControlShape;
  var myDrawFunction(context) {
    // toControlShape will be used here. 
  }

  window.onload = function() {
    var stage = new Kinetic.Stage({...});
    var layer = new Kinetic.Layer();

    var myShape = new Kinetic.Shape({
      drawFunc: myDrawFunction,
      ...
    });

    layer.add(myShape);
    stage.add(layer);

    var animation = new Kinetic.Animation(function(frame) {
      toControlShape = someFunction(frame.time);
      myShape.remove();
      myShape = new Kinetic.Shape({
        drawFunc: myDrawFunction,
        ...
      });
      layer.add(myShape);
    }, layer);

    animation.start();
  };
</script> 
```

形状正确显示为其初始状态。但是没有动画。

我对 Javascript 和 HTML5 很陌生。所以这段代码中可能有很多反模式。向我指出它们也是值得赞赏的。

完整的代码在 jsFiddle[上](http://jsfiddle.net/4R843/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T07:38:22.740

我认为你做错了。从文档：

*   “Kinetic.Animation 在每个动画帧中修改形状的位置。”

所以我认为你应该停止删除形状，而只是更新形状。那么它应该可能动画部分适合你。

html ---

```
<!DOCTYPE html>

<html>
    <head>
        <title>Strath</title>
        <meta http-equiv="X-UA-Compatible" content="IE=9" />
    <script  type="text/javascript" src="kinetic-v4.1.2.min.js"></script>

    <script src="fiddle.js"></script>
        <style type="text/css">

        </style>
    </head>
    <body>

<div id="PureHTML5"></div>
      </body>
</html> 
```

js---

```
 var segsToSkip = 0;
      var triangle;
      window.onload = function() {
        var stage = new Kinetic.Stage({
          container: "PureHTML5",
          width: 300,
          height: 300
        });
        var layer = new Kinetic.Layer();

        /*
         * create a triangle shape by defining a
         * drawing function which draws a triangle
         */
        var box = new Kinetic.Shape({
          drawFunc: myDrawFunction,
          stroke: "white",
          strokeWidth: 8
        });
        var bbox= new Kinetic.Rect({
            x:10,
            y:10,
            width:10,
            height:10,
            fill: 'green'
        });

          triangle = new Kinetic.Shape({
        drawFunc: function(context) {
          context.beginPath();
          context.moveTo(10, 10);
          context.lineTo(20, 80);
          context.quadraticCurveTo(30, 10, 26, 17);
          context.closePath();
          context.stroke();  

        },
        fill: '#00D2FF',
        stroke: 'black',
        strokeWidth: 4
      }); 
        layer.add(bbox);
        // add the triangle shape to the layer
        layer.add(box);
        layer.add(triangle);
        // add the layer to the stage
        stage.add(layer);

         var animation = new Kinetic.Animation(function(frame) {
            console.log(frame.time);
             var newSegsToSkip = Math.round(frame.time / 200);
                  triangle.setX(newSegsToSkip);
         triangle.setDrawFunc(function(context) {
          context.beginPath();
          context.moveTo(newSegsToSkip, 10);
          context.lineTo(newSegsToSkip+20, 80);
          context.quadraticCurveTo(30, 10, 26, 17);
          context.closePath();
          context.stroke();  
                 });
             }, layer);

         var animation2 = new Kinetic.Animation(function(frame) {
            var newSegsToSkip = Math.round(frame.time / 200);
            if (newSegsToSkip == segsToSkip) return;
            else {
                segsToSkip = newSegsToSkip;
                box.remove();
                box = new Kinetic.Shape({
                  drawFunc: myDrawFunction,
                  stroke: "black",
                  strokeWidth: 8
                });
                layer.add(box);
            }
        }, layer);
        animation.start();
           animation2.start();
      };

var myDrawFunction = function(context) {
    var x = 50;
    var y = 50;
    var width = 200;
    var height = 200;
    var radius = 20;
    var dashedLength = 6;
    var segsToDraw = 58;

    context.beginPath();

    context.drawDashedBox(x, y, width, height, radius, dashedLength, segsToSkip, segsToDraw);

    context.closePath();
    //   context.stroke();  
    //this.fill(context);
    this.stroke(context);
}

var CP = window.CanvasRenderingContext2D && CanvasRenderingContext2D.prototype;
CP.drawDashedBox = function(x, y, width, height, radius, dashedLength, segsToSkip, segsToDraw) {
    // init
    var env = getStratEnvForRCBox(x, y, width, height, radius, dashedLength, segsToSkip, segsToDraw);

    // 'right'->'upper-right'->'down'->'bottom-right'->'left'->'bottom-left'->'up'->'upper-left'->'right'->...
    while (env.segsToDraw > 0) {
        console.log('drawing direction: ', env.direction, 'segsToDraw:', env.segsToDraw);
        env.putToConsole();
        if (env.direction == 'right') {
            env = drawDashedLineNew(env, x + width - radius, y + height, dashedLength, this);
            env.direction = 'bottom-right';
        }
        else if (env.direction == 'upper-right') {
            env = drawDashedArcNew(env, x + width - radius, y + radius, radius, 0, Math.PI / 2, dashedLength, this);    
            env.direction = 'left';
        }
        else if (env.direction == 'down') {
            env = drawDashedLineNew(env, x, y + height - radius, dashedLength, this);
            env.direction = 'bottom-left';
        }
        else if (env.direction == 'bottom-right') {
            env = drawDashedArcNew(env, x + width - radius, y + height - radius, radius, 3 * Math.PI / 2, 2 * Math.PI, dashedLength, this);
            env.direction = 'up';
        }
        else if (env.direction == 'left') {
            env = drawDashedLineNew(env, x + radius, y, dashedLength, this);
            env.direction = 'upper-left';
        }
        else if (env.direction == 'bottom-left') {
            env = drawDashedArcNew(env, x + radius, y + height - radius, radius, Math.PI, 3 * Math.PI / 2, dashedLength, this);
            env.direction = 'right';
        }
        else if (env.direction == 'up') {
            env = drawDashedLineNew(env, x + width, y + radius, dashedLength, this);
            env.direction = 'upper-right';
        }
        else if (env.direction == 'upper-left') {
            env = drawDashedArcNew(env, x + radius, y + radius, radius, Math.PI / 2, Math.PI, dashedLength, this);
            env.direction = 'down';
        }
    }
}

function getStratEnvForRCBox(x, y, width, height, radius, dashLength, segsToSkip, segsToDraw) {
    var direction = 'right';
    var startX, startY;
    if (direction == 'down') {
        startX = x; startY = y + radius;
    } else if (direction == 'right') {
        startX = x + radius; startY = y + height;
    } else if (direction == 'up') {
        startX = x + width; startY = y + height - radius;
    } else if (direction == 'left') {
        startX = x + width - radius; startY = y;
    }
    var env = new Environment(startX, startY, 'gap', 0, direction, segsToSkip, segsToDraw);
    return env;
}

function drawDashedLineNew(env, endX, endY, dashedLength, context) {
    var dx = (endX - env.x), dy = (endY - env.y);
    var angle = Math.atan2(dy, dx);
    console.log('drawing line: angle =', angle, ' , ', env.gapOrDash, ' =', env.remainingLengthFromLastDraw);

    var fromX = env.x, fromY = env.y;
    // deal with remining
    // we start loop from a fresh dash
    if (env.gapOrDash == 'dash') {
        // check if we need to skip
        if (env.segsToSkip > 0) {
            env.segsToSkip --;
        } else {
            context.moveTo(env.x, env.y);
            context.lineTo(env.x + env.remainingLengthFromLastDraw * Math.cos(angle), env.y + env.remainingLengthFromLastDraw * Math.sin(angle));
            // check if we quit
            env.segsToDraw --;
            if (env.segsToDraw == 0) return env;
        }

        // a full gap
        fromX = env.x + (env.remainingLengthFromLastDraw + dashedLength) * Math.cos(angle);
        fromY = env.y + (env.remainingLengthFromLastDraw + dashedLength) * Math.sin(angle);
    } else if (env.gapOrDash == 'gap') {
        fromX = env.x + env.remainingLengthFromLastDraw * Math.cos(angle);
        fromY = env.y + env.remainingLengthFromLastDraw * Math.sin(angle);
    }

    var length = (endX - fromX) / Math.cos(angle);
    if (endX - fromX == 0) length = Math.abs(endY - fromY);
    var n = length / dashedLength;
    var draw = true;
    var x = fromX, y = fromY;
    context.moveTo(x, y);
    for (var i = 0; i < n; i++) {
        x += dashedLength * Math.cos(angle);
        y += dashedLength * Math.sin(angle);
        if (draw) {
            // check if we need to skip
            if (env.segsToSkip > 0) {
                env.segsToSkip --;
            } else {
                context.lineTo(x,y);

                // check if we quit
                env.segsToDraw --;
                if (env.segsToDraw == 0) return env;
            }
        } else context.moveTo(x, y);
        draw = !draw;
    }

    // deal with remaining
    if (draw) {
        // check if we need to skip
        if (env.segsToSkip > 0) {
            env.segsToSkip --;
        } else
            context.lineTo(endX, endY);
    }
    env.x = endX;
    env.y = endY;
    draw ? env.gapOrDash = 'dash' : env.gapOrDash = 'gap';
    env.remainingLengthFromLastDraw = dashedLength - (endX - x) / Math.cos(angle);

    return env;
}

function drawDashedArcNew(env, x, y, radius, startAngle, endAngle, dashedLength, context) {
    var points = [];
    var n = radius * Math.PI * 2/ dashedLength;
    var stepAngle = Math.PI * 2 / n;

    // deal with remaining
    var angle = Math.asin(env.remainingLengthFromLastDraw / 2 / radius) * 2;
    if (env.gapOrDash == 'dash') {
        var angle = Math.asin(env.remainingLengthFromLastDraw / 2 / radius) * 2;
        points.push({
            x : (Math.cos(startAngle) * radius) + x,
            y : - (Math.sin(startAngle) * radius) + y,
            ex : (Math.cos(startAngle + angle) * radius) + x,
            ey : - (Math.sin(startAngle + angle) * radius) + y
        });

        startAngle += stepAngle + angle;
    } else {
        startAngle += angle;
    }

    var draw = true;
    while(startAngle + stepAngle <= endAngle) {
        if (draw) {
            points.push({
            x : (Math.cos(startAngle) * radius) + x,
            y : - (Math.sin(startAngle) * radius) + y,
            ex : (Math.cos(startAngle + stepAngle) * radius) + x,
            ey : - (Math.sin(startAngle + stepAngle) * radius) + y
            });    
        }

        startAngle += stepAngle;
        draw = !draw;
    }

    // deal with the remaining
    var endX = (Math.cos(endAngle) * radius) + x;
    var endY = - (Math.sin(endAngle) * radius) + y;
    //console.log('drawing arc: end-x:', endX, ',end-y:', endY);
    if (draw) {
        points.push({
            x : (Math.cos(startAngle) * radius) + x,
            y : - (Math.sin(startAngle) * radius) + y,
            ex : endX,
            ey : endY
        });
    }
    env.x = endX;
    env.y = endY;
    draw ? env.gapOrDash = 'dash' : env.gapOrDash = 'gap';
    env.remainingLengthFromLastDraw = dashedLength - radius * Math.sin( (endAngle - startAngle) / 2) * 2;

    for(p = 0; p < points.length; p++){
        //console.log('draw arc seg: from(', points[p].x, ',', points[p].y, ') to (', points[p].ex, ',', points[p].ey, ')');
        // check if we need to skip
        if (env.segsToSkip > 0) {
            env.segsToSkip --;
        } else {
            context.moveTo(points[p].x, points[p].y);
            context.lineTo(points[p].ex, points[p].ey);

            // check if we quit
            env.segsToDraw --;
            if (env.segsToDraw == 0) return env;
        }
    }

    return env;
}

function Environment(x, y, gapOrDash, remainingLengthFromLastDraw, direction, segsToSkip, segsToDraw) {
    this.x = x;
    this.y = y;
    this.gapOrDash = gapOrDash;
    this.remainingLengthFromLastDraw = remainingLengthFromLastDraw;
    this.direction = direction;
    this.segsToSkip = segsToSkip;
    this.segsToDraw = segsToDraw;
}
Environment.prototype.putToConsole = function() {
    //console.log('Environment:');
    //console.log('x:', this.x, ',y:', this.y, 'direction:', this.direction);
    //console.log('toSkip:', this.segsToSkip, 'toDraw:', this.segsToDraw);
} 
```

# css - 如何避免悬停在菜单项上影响右侧的菜单项

> ID：13604335
> 
> 赞同：1
> 
> 时间：2012-11-28T11:46:15.167
> 
> 标签：css, hover

我有一个非常简单的水平菜单。我想在悬停时字体变粗。问题是当我进行悬停时，文本变为粗体，但右侧的所有菜单项都向右切换了几个像素。希望有人可以帮助我了解如何避免这种情况。谢谢你。

小提琴：：http : [//jsfiddle.net/QKBUS/](http://jsfiddle.net/QKBUS/)

HTML：

```
<div id="header">
  <ul id="menu">
    <li class="bouton_gauche"><a href="">agenda</a></li>
    <li class="bouton_gauche"><a href="">messagerie</a></li>
    <li class="bouton_gauche"><a href="">communautée</a></li>
    <li class="bouton_gauche"><a id="btn-deconnexion" href="">déconnexion</a></li>
    <li class="bouton_droite"><a href="">[logo]</a></li>
  </ul>
</div>​ 
```

CSS：

```
ul#menu { 
list-style-type : none; 
}

li.bouton_gauche {
float : left;
margin-right:15px;
}

li.bouton_droite {
float : right;
}

ul#menu a{
text-decoration: none;
}

ul#menu a:hover{
font-weight: bold;
}​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T12:17:34.890

如果你坚持... [http://jsfiddle.net/thirtydot/QKBUS/18/](http://jsfiddle.net/thirtydot/QKBUS/18/)

添加`text-align: center`到`ul#menu`，然后使用这个 JavaScript（使用 jQuery）：

```
$('#header li a').each(function() {
    var temp = $(this).hide().clone().appendTo($(this).parent()).css('font-weight', 'bold').show();
    $(this).show().parent().width(temp.width());
    temp.remove();
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T12:06:21.980

通过为列表项提供固定宽度可以轻松避免上述情况，但这会使第一个与其他项看起来太不一样，因此您将不得不为第一个使用不同的宽度。

# mysql - 在mysql中插入随机id

> ID：13604336
> 
> 赞同：0
> 
> 时间：2012-11-28T11:46:17.647
> 
> 标签：mysql

我有一个名为学生的表，其中有一列名为 student_id。该列目前为空，是否有一个函数会自动生成一个随机ID，并为每条记录插入到表中。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T11:49:11.440

我建议使用[UUID()](http://dev.mysql.com/doc/refman/5.0/en/miscellaneous-functions.html#function_uuid)函数。

```
INSERT INTO my_table VALES (UUID(), ...); 
```

或者（在你的情况下）：

```
UPDATE students SET student_id = UUID(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T11:49:58.517

您可以尝试使用 [`UUID()`](http://dev.mysql.com/doc/refman/5.0/en/miscellaneous-functions.html#function_uuid)来创建一个独特的价值，例如

```
 .... Values(UUID(), "TestUUID"); 
```

# python - python中多线程应用程序中的分段错误错误

> ID：13604338
> 
> 赞同：2
> 
> 时间：2012-11-28T11:46:27.757
> 
> 标签：python, multithreading, mysql-python

我在 python 中有一个多线程应用程序，其中我创建了多个生产者线程，它们从数据库中提取数据。数据以块的形式提取。因此，线程创建具有限制值的 sql 语句的部分保持在锁定中。为了让线程同时执行查询，query() 函数保持在锁之外。然后结果获取部分再次被锁定。下面是代码片段：

```
with UserAgent.lock:
    sqlGeoTarget = "call sp_ax_ari_select_user_agent_list('0'," + str(self.chunkStart) + "," + str(self.chunkSize) + ",1);"
    self.chunkStart += self.chunkSize

self.dbObj.query(sqlGeoTarget)
print "query executed. Processing data now..."+sqlGeoTarget

with UserAgent.lock:
    result = self.dbObj.fetchAll()
    self.dbObj.dbCursor.close() 
```

但是这段代码会产生致命错误`segmentation fault (core dumped)`。因为如果我把所有代码都加锁，它执行得很好。我在获取数据后显式关闭游标，当再次触发 query() 函数时重新打开游标。

这段代码在一个名为的类中`UserAgent`，它是一个名为 的类的共享资源`Producer`。因此，数据库对象是共享的。所以问题区域 99% 一定是因为 db 对象是共享的同时命中查询和关闭游标然后必须弄乱结果集。但是那么如何解决这个问题并实现并发的db查询执行呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T11:57:40.527

不要跨线程重用连接。而是为每个线程创建一个新连接。

来自 MySQLdb 用户指南：

> MySQL 协议不能同时使用同一个连接处理多个线程。一些早期版本的 MySQLdb 利用锁定来实现 2 的线程安全性。虽然使用标准 Cursor 类（使用`mysql_store_result()`）实现这一点并不难，但 SSCursor （使用`mysql_use_result()`; 使用后者你必须确保所有行在执行另一个查询之前已经读取了。添加事务使情况更加复杂，因为事务在游标执行查询时开始，但在`COMMIT`或时结束`ROLLBACK`由 Connection 对象执行。除了在查询执行期间无法共享之外，两个线程在事务进行时根本无法共享连接。这使代码过于复杂，以至于不值得。
> 
> 这样做的一般结果是：**不要在线程之间共享连接**。这真的不值得你或我的努力，最终可能会损害性能，因为 MySQL 服务器为每个连接运行一个单独的线程。您当然可以做一些事情，例如在池中缓存连接，并一次将这些连接提供给一个线程。如果你让两个线程同时使用一个连接，MySQL 客户端库可能会崩溃并死掉。你被警告了。

强调我的。

请改用[线程本地存储](https://stackoverflow.com/q/1408171)或[专用连接池库](http://packages.python.org/PySQLPool/)。

# web-services - 无法在 Salesforce 的 apex Web 服务标注中设置标题

> ID：13604343
> 
> 赞同：1
> 
> 时间：2012-11-28T11:46:56.027
> 
> 标签：web-services, amazon-web-services, salesforce, apex-code

我目前正在尝试在 Salesforce 中调用亚马逊产品零售网络服务。

[正如我在 Salesforce 中从 WSDL 生成 Apex 代码时遇到 WSDL 解析错误](https://stackoverflow.com/questions/13580059/getting-wsdl-parse-error-while-generating-apex-code-from-wsdl-in-salesforce)中提到的

我最初无法生成顶点存根类，但我按照@Ballinger 建议的方法创建了顶点类。我编写了一个顶点类来使用该存根并设置请求参数。我写的类如下

```
public class AmazonProductStubNew
{
 public static void getResults()
 { 
        System.Debug(' getResults start ');
        AmazonWS.AWSECommerceServicePortUS stub = new AmazonWS.AWSECommerceServicePortUS();

        stub.inputHttpHeaders_x = new Map<String,String>();
        stub.inputHttpHeaders_x.put('AWSAccessKeyId','MyAmazonAWSAccessKeyId');
        stub.inputHttpHeaders_x.put('Timestamp','2012-11-28T12:11:30Z');
        stub.inputHttpHeaders_x.put('Signature','Encrypted Secret Code');
        String MarketplaceDomain = '';
        String AWSAccessKeyId = 'MyAmazonAWSAccessKeyId';
        String AssociateTag = '';
        String XMLEscaping = '';
        String Validate = '';
        AmazonWS.ItemSearchRequest Shared = new AmazonWS.ItemSearchRequest();
        Shared.SearchIndex = 'DVD';
        AmazonWS.ItemSearchRequest[] Request = new AmazonWS.ItemSearchRequest[1];
        Request[0] = new AmazonWS.ItemSearchRequest();
        Request[0].Title = 'Inception';
        AmazonWS.ItemSearchResponse_element response = stub.ItemSearch(MarketplaceDomain,AWSAccessKeyId,AssociateTag,XMLEscaping,Validate,Shared,Request);
        AmazonWS.Items_element[] localItems = response.Items;
        System.Debug(localItems[0].TotalResults);
 }
 } 
```

即使我已将 HTTP 标头添加到存根，我也没有在 XML 请求消息中得到它 XML 请求如下

```
<?xml version="1.0" encoding="UTF-8"?>
<env:Envelope xmlns:env="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<env:Header />
<env:Body>
<ItemSearch xmlns="http://webservices.amazon.com/AWSECommerceService/2011-08-01">
<MarketplaceDomain>
</MarketplaceDomain>
<AWSAccessKeyId>MyAWSAccessKeyId</AWSAccessKeyId>
<AssociateTag></AssociateTag>
<XMLEscaping></XMLEscaping>
<Validate></Validate>
<Shared><SearchIndex>DVD</SearchIndex></Shared>
<Request><Title>Inception</Title>
</Request></ItemSearch>
</env:Body></env:Envelope> 
```

由于 SOAP 请求中没有标头，因此存在 SOAP 错误，要求来自 Amazon Server 的签名。

如您所见，我是 Salesforce Apex 的新手。我按照中的步骤

[http://www.salesforce.com/us/developer/docs/apexcode/index_Left.htm#StartTopic=Content/apex_web_services_wsdl2apex.htm#http_header_support](http://www.salesforce.com/us/developer/docs/apexcode/index_Left.htm#StartTopic=Content/apex_web_services_wsdl2apex.htm#http_header_support)

设置标题。

关于为什么没有添加标题的任何想法？

PS 我手动添加了标题并在 SOAP UI 中进行了尝试，我得到了正确的响应。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T19:28:06.133

我认为您使用了错误的功能:)（问题确实令人困惑）。

SOAP（或通常是 HTTP）通信包括发送标头和实际消息（如果您愿意，可以使用有效负载）。标头是短文本，消息通常是巨大的 XML。

您的代码正在设置[HTTP 标头](http://en.wikipedia.org/wiki/List_of_HTTP_header_fields)（用于 Web 通信以进行身份​​验证、提供有关您的浏览器的信息、首选语言、设置 cookie、返回状态代码（如 404 页面未找到...）...）请不要对“for傻瓜”，但我意识到维基百科的文章有点太多了，这可能更简单： http: [//net.tutsplus.com/tutorials/other/http-headers-for-dummies/](http://net.tutsplus.com/tutorials/other/http-headers-for-dummies/)

我怀疑亚马逊的网络服务想要的只是`<env:Header>...</env:Header>`标签内的一些字段？只需检查生成的顶点代码是否存在名为“Header”的子类（您也可以搜索“Signature”之类的变量名称。这将是一个完全疯狂的猜测，但我认为您必须编写类似的内容：

```
AmazonWS.AWSECommerceServicePortUS stub = new AmazonWS.AWSECommerceServicePortUS();
AmazonWS.Header h = new AmazonWS.Header();
h.AWSAccessKeyId = 'MyAmazonAWSAccessKeyId';
h.Timestamp = '2012-11-28T12:11:30Z';
h.Signature = 'Encrypted Secret Code';
stub.Header = h; // plug it into the request

// create and plug other required tags
AmazonWS.ItemSearchRequest Shared = new AmazonWS.ItemSearchRequest();
Shared.SearchIndex = 'DVD';
AmazonWS.ItemSearchRequest[] Request = new AmazonWS.ItemSearchRequest[1];
Request[0] = new AmazonWS.ItemSearchRequest();
Request[0].Title = 'Inception';
// ... 
```

现在，为了使它更加混乱，您可能仍然必须使用 HTTP 标头，有一个特殊的标头，称为[SOAPAction](http://www.oreillynet.com/xml/blog/2002/11/unraveling_the_mystery_of_soap.html)。但一般来说，我相信您将数据放在 XML 中，而不是放在 http 标头中。

* * *

有趣的是，我已经从[http://aws.amazon.com/code/Product-Advertising-API/2478](http://aws.amazon.com/code/Product-Advertising-API/2478)下载了 Java 示例，如果我阅读正确，他们会在 URL（端点）中传递签名，而不是在 XML 中。可能是因为它是一种 REST GET 方法（如果您可以访问该 API，它可以为您节省很多头发，SOAP 很笨重）。

# macos - 在 OSX 中显示全尺寸的相机原始文件

> ID：13604344
> 
> 赞同：2
> 
> 时间：2012-11-28T11:46:56.763
> 
> 标签：macos, nsdata, nsimage, cgimage

这几个月来一直让我发疯：我有一个小应用程序可以预览相机原始图像。由于有问题的文件可能非常大并且存储在缓慢的网络驱动器上，我想为用户提供一个停止加载图像的机会。

我很方便地找到了这个线程：

[在 NSOperation 中取消 NSData initWithContentsOfURL](https://stackoverflow.com/questions/9117332/cancel-nsdata-initwithcontentsofurl-in-nsoperation/9117373#comment18601134_9117373)

并且正在使用 Nick 非常方便的方法来缓存数据并能够在中途发出取消请求。

无论如何，一旦我有了我使用的数据：

```
NSImage *sourceImage = [[NSImage alloc]initWithData:data]; 
```

查看 Nikon .NEF 文件时会出现问题；`sourceImage`仅返回缩略图而不是完整大小。显示佳能 .CR2 文件，事实上，任何其他 .TIFF 和 .JPEG 似乎都很好，并且`sourceImage`是预期的大小。我检查了正在加载的数据量（使用`NSLog`和`[data length]`），似乎所有尼康文件的 12mb 都存在`-initWithData:`

如果我使用

```
NSImage *sourceImage = [[NSImage alloc]initWithContentsOfURL:myNEFURL]; 
```

然后我得到尼康文件的全尺寸图像，但应用程序当然会阻塞。

因此，在四处寻找开始感觉像是我一生的事情之后，我想我知道问题与尼康的元数据有关，指出文件的 DPI 是 300，而佳能等人是 72。

我希望一个解决方案是懒惰地访问文件：

```
NSImage*tempImg = [[NSImage alloc] initByReferencingURL:myNEFURL]; 
```

并在这里和其他地方看到了类似的帖子，我发现了一个简单的常见答案

```
[sourceImage setSize:tempImg.size]; 
```

但当然，这只是将小缩略图的大小调整到 3000x2000 左右。

我一直在搞乱以下内容，希望他们能提供一种从 .NEF 获得全局的方法：

```
CGImageSourceRef isr = CGImageSourceCreateWithData((__bridge CFDataRef)data, NULL);
CGImageRef isrRef = CGImageSourceCreateImageAtIndex(isr, 0, NULL); 
```

和

```
NSBitmapImageRep *bitMapIR = [[NSBitmapImageRep alloc] initWithData:data]; 
```

但是检查这些尺寸会显示相似的缩略图宽度和高度。实际上，`isrRef`返回的缩略图更小，小 4.2 倍。或许值得注意的是 300 / 72 == 4.2，因此`isrRef`考虑到 DPI（可能）已经观察到的图像上的 DPI。

请！有人可以[很好地]让我摆脱痛苦并帮助我从加载的数据中获取全尺寸图像吗？！？！目前，我正在使用对文件扩展名不区分大小写的搜索对 NEF 文件进行特殊处理，然后使用阻止方法加载 URL。我必须对应用程序阻止进行打击，从长远来看，搜索不可能是万无一失的。

顺便说一句：这实际上是操作系统中的错误吗？看起来`NSImage's -initWithData:`，`-initWithContentsOfURL:`方法使用不同的引擎来实际渲染图像。假设`-initWithURL:`简单地加载数据然后被渲染就像它已经被呈现给类一样是不合理的`-initWithData:`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T09:28:02.937

这是一个错误 - 在我进行 DTS 时确认。显然我需要提交错误报告。目前唯一的方法是使用 NSURL 方法。而不是检查文件扩展名，我可能应该遍历元字典并检查制造商的“尼康”条目，虽然......

# java - Oracle 和 Subversion 的集成

> ID：13604345
> 
> 赞同：3
> 
> 时间：2012-11-28T11:47:05.683
> 
> 标签：java, database, svn, version-control, oracle11g

我正在与 8 个开发人员一起管理一个基于 java、subversion 和 svn 的基于 Web 的项目。不幸的是，修改数据库更改是该项目的一个大问题。在我们的例子中，每个用户都可能更新表格而忘记将更改脚本放在 svn 中。因此，我们需要花费大量时间来查看和调试由于未更新的表或视图而引发的问题。

所以，我想知道，oracle 11g 是否有任何方法、工具或插件可以将所有数据库更改作为脚本保存在某个地方，例如在 svn 上？

**编辑 1：**从整个数据库中获取转储并不能解决我的问题，因为在真实环境中我无法丢弃客户数据并返回新的转储。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T11:59:06.437

我认为这正是你所需要的。一个开源数据库变更管理系统。液化石油气。 [http://www.liquibase.org/](http://www.liquibase.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T06:20:04.847

不要存储更改脚本，只存储删除和重新创建所有对象的脚本。开发人员应该在本地实例上更改和运行这些脚本，运行自动化单元测试，然后签入他们的更改。

从头开始重建比不断运行更改脚本要好得多*。*在每个人都可以轻松地从头开始重建整个系统之前，您永远无法控制您的应用程序。

（我假设您询问的是关于主干上的开发，您有很多小改动。对于重大升级，例如从 1.1 版移动到 1.2 版，您仍然需要使用更改脚本来帮助保存数据。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T12:38:54.410

根据[Oracle 的说法，比 Liquibase 更便宜、更糟糕的解决方案：只导出模式](https://stackoverflow.com/questions/4049657/oracle-exporting-only-schema)主题，可以是提交后挂钩，这

*   `expdp ... DUMPFILE=file.dmp CONTENT=METADATA_ONLY`进入目录，这是 WC 或存储库中的特殊位置
*   提交这个文件.dmp

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T15:16:40.757

维护数据库更改有两个方面。一种，正如您所提到的，以脚本的形式，可以应用于旧模式以升级它。然而，这是答案的一部分，因为开发人员很难查看脚本、解析它们并弄清楚最近的模式更改如何影响他们的工作。

因此，除了更改脚本之外，我建议您还将数据库元数据的人类可读版本签入文本文件中。[SchemaCrawler](http://schemacrawler.sourceforge.net/)就是为此目的而设计的一个免费工具，它以一种旨在区分的格式生成丰富的元数据信息。我发现，如果您将数据库元数据作为一个夜间过程来自动签入模式元数据，那么随着时间的推移，数据库元数据的更改就会变得可追溯。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-11-12T15:34:51.723

请试试这个工具：[www.dbapply.com](https://www.dbapply.com)

它具有用于从 Subversion 存储库手动部署脚本的 GUI 和用于持续集成的命令行界面。

支持颠覆分支。

可以在 Windows 和 Linux 上工作（您需要 JRE 8）。

# c# - 为什么从 IEnumerable 继承的 .Net 类在 COM 中不可见 GetEnumerator ?

> ID：13604349
> 
> 赞同：3
> 
> 时间：2012-11-28T11:47:25.540
> 
> 标签：c#, .net, com, ienumerable

我目前正在尝试使 C# API 在 COM 中可见，并且我目前坚持使非泛型`GetEnumerator`方法在 COM 中对于也继承的类可见`IEnumerable<T>`。如果我在 上实现另一种方法`ITestIEnumerable`，它是可见的。我还发现`GetEnumerator`从列表派生的类上可以看到非泛型方法。

我真的不明白为什么这不起作用，这似乎是继承的类的特例`IEnumerable<T>`。有没有办法将它暴露给 COM，以便我可以在 VB6 中使用 For Each 构造？

例如

```
[ClassInterface(ClassInterfaceType.AutoDual)]
[ProgId("Test")]
[Guid("1aa2bdec-0530-44e8-b62d-b75914a6de22")]
public class TestIEnumerable : ITestIEnumerable
{
    #region IEnumerable<Item> Members

    [ComVisible(false)]
    public IEnumerator<Item> GetEnumerator()
    {
        return _collection.GetEnumerator();
    }

    #endregion

    #region ITestIEnumerable Members

    [DispId(-4)]
    [ComVisible(true)]
    IEnumerator ITestIEnumerable.GetEnumerator()
    {
        return _collection.GetEnumerator();
    }

    #endregion

    #region IEnumerable Members

    [DispId(-4)]
    [ComVisible(true)]
    IEnumerator IEnumerable.GetEnumerator()
    {
        return _collection.GetEnumerator();
    }

    #endregion
}

[InterfaceType(ComInterfaceType.InterfaceIsDual)]
[Guid("187f3fed-9d4a-4a52-9a7c-a2fdeb56b9fa")]
[ComImport]
public interface ITestIEnumerable : IEnumerable<Item>
{
    [DispId(-4)]
    [ComVisible(true)]
    new IEnumerator GetEnumerator();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T11:58:09.497

您不能拥有多个具有相同签名的同名公共方法。因此，您的两个`GetEnumerator`方法正在使用显式接口实现来实现：

```
IEnumerator ITestIEnumerable.GetEnumerator()
{
} 
```

因此，它们被视为私有成员——它甚至对其他 .NET 代码不可见，除非该代码将您的`TestIEnumerable`对象转换为`ITestIEnumerable`.

因此，决定`GetEnumerator()`您希望公开哪一种方法，并将其公开：

```
public IEnumerator GetEnumerator()
{
} 
```

并将通用转换为显式实现：

```
IEnumerator<Item> IEnumerable<Item>.GetEnumerator()
{
} 
```

# javascript - 服务调用后按列排序表

> ID：13604353
> 
> 赞同：0
> 
> 时间：2012-11-28T11:47:50.177
> 
> 标签：javascript, jquery, html, ajax, model-view-controller

加载后有什么方法可以对下表进行排序？ ![在此处输入图像描述](../Images/dfc217d31df1312106939d740808a534.png)

我正在使用 google api 来获取距离矩阵，但我希望表格按距离排序。但是，这必须在对 google 的服务调用完成后完成。

当服务完成时，我将只使用一个加载图标，然后在完成后显示表格。

HTML：

```
<table class="table">
    @foreach (var item in Model.res)
    {
        <tr>
            <td class="nameWidth">› <a href="@Url.Action("resDetails", "FindLocation", new { id = @item.Id }, null)"><b>@item.Name</b></a></td>
            <td style="width: 24%">
                <div data-name="@item.Name" data-address="@item.Address @item.City" class="distance">
                    Loading...
                </div>
            </td>
            <td><a class="takeMeThere" id="mapButton" onclick="findDirections('@item.Address @item.City')">KART</a></td>
        </tr>
    }
</table>

<script>
       calculateDistance();

function calculateDistance()
{
    $(".distance").each(function ()
    {
        var name = $(this).data("name");
        var adr = $(this).data("address");
        if (name != null && adr != null)
            getDistance(adr, name, $(this));
    });
}

function getDistance(address, name, obj)
{
    var origin = new google.maps.LatLng(userLat, userLong);
    if (userLat == 0 || userLong == 0) console.log("Klarte ikke hente din posisjon");
    var service = new google.maps.DistanceMatrixService();

    service.getDistanceMatrix(
    {
        origins: [origin],
        destinations: [address],
        travelMode: google.maps.TravelMode.DRIVING,
        avoidHighways: false,
        avoidTolls: false
    }, function (response, status)
    {
        var distance = response.rows[0].elements[0].distance;
        if (distance) obj.html(distance.text);
        else obj.html("Ikke funnet");
    });
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:10:31.213

我想您可以在所有内联距离请求完成后处理该事件，然后您有一个完整的表格要排序。

您可以使用一些 iQuery 插件进行就地表排序，例如：[tablesorter](http://tablesorter.com/docs/)或，在[另一个答案](https://stackoverflow.com/questions/3160277/jquery-table-sort)`sortElements`中提到。

如果您不想使用插件，只需编写一个排序函数并将表行作为对象输入其中，然后将表体替换为从排序数组生成的行。像这样（不使用 jQuery），用于按任何列排序：

```
var objectArrayIndex = 0;
var myObjectArray = new Array();

init($(your_table_selector));
myObjectSort(myObjectArray,objectArrayIndex,sortColumn);

function myObject() {
    for (var i = 0; i<myObject.arguments.length; i++)
        this['n' + i] = myObject.arguments[i];
}

function init(tab) {
  var obj;
  var r, c, e;
  for (r = 0; r < tab.rows.length; ++r) {
    for (c = 0; c < tab.rows[r].cells.length; ++c) {
      e = tab.rows[r].cells[c];
      if(c == 0) {
        myObjectArray[objectArrayIndex] = new myObject(e.innerHTML);
        obj = myObjectArray[objectArrayIndex++];
      }
      else {
        obj['n' + c] = e.innerHTML;
      }
    }
  }
}

function myObjectSort(arrayName,length,column) {
  // your preferred sorting algoritm run against arrayName['n'+column]
} 
```

# debugging - 黑莓的调试问题

> ID：13604354
> 
> 赞同：0
> 
> 时间：2012-11-28T11:47:50.650
> 
> 标签：debugging, blackberry, java-me

我想将客户日志消息打印到日志文件。我在我的 BlackBerry 应用程序主方法中使用了以下代码片段。

```
EventLogger.register(0xaa21388c0c6ee7a7L, TAG, EventLogger.VIEWER_STRING);

String myName = "AnujaAroshA";

if (EventLogger.logEvent(0xaa21388c0c6ee7a7L, myName.getBytes())) {
    System.out.println(" #### Log Successful!");
} 
```

当我的应用程序在真实设备上运行时，它会在控制台上打印“*记录成功”消息。*真实设备使用 USB 电缆连接到我的 PC。

然后我尝试使用如下命令行将日志消息复制到文本文件中。

```
javaloader eventlog > log.txt 
```

运行此设备后，设备会冻结以及命令行。我正在使用 Eclipse 和 Windows 7 操作系统进行开发。

当我拔下设备并重新连接并运行相同的命令时，它将生成带有一些日志的文件。但是在那个日志文件中我找不到**0xaa21388c0c6ee7a7L**这是我的应用程序 GUID。

我在哪里犯了错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T05:34:32.750

GUID 用于有效地表示要与事件记录器一起使用的标记。使用 javaloader 时，它将使用您在向事件记录器注册 GUID 时设置的标记格式化日志条目。所以你不会看到 GUID 值，你只会看到 TAG。确保您的 TAG 是唯一的。

# syncfusion - 我们如何将同步融合图保存为流并从数据库中加载流

> ID：13604358
> 
> 赞同：0
> 
> 时间：2012-11-28T11:47:58.817
> 
> 标签：syncfusion

我正在使用同步融合图。在该图中，我想从数据库加载流，并且我想将流保存到数据库。他提供了示例项目，但这对我不起作用。链接是

```
 http://www.syncfusion.com/support/forums/diagram-mvc/105418/How-to-display-sample-diagram-using-entities-model-in-aspnet-mvc3-razor-view. 
```

谁能告诉我错误是什么，我该如何纠正。希望你能理解我的问题。

问候， 斯里尼瓦斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T02:26:57.310

当您尝试运行 Syncfusion 提供的示例时，您是否收到任何错误消息？如果是这样，您可以在此处或 Syncfusion 论坛上发布它们。

如果您需要论坛帖子中提到的补丁，我们已经在您的帐户下创建了一个支持事件，补丁将提供给您。

# c# - 从类名定义 XmlElement

> ID：13604359
> 
> 赞同：0
> 
> 时间：2012-11-28T11:48:01.190
> 
> 标签：c#, xml, serialization

我正在尝试编写一个通用包装器来将通用对象列表序列化为一个 xml 文件，除了元素采用基类的名称而不是继承的类名之外，它一切正常。有没有办法让它显示继承类的名称？

例如..

```
public class ObjectList
{
 [XmlElement("I want my inherited class here but it shows the base class object")]
 public List<Base> Items
 {
      get { return items; }
 }
}

public class Inherited : Base
{
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:27:21.993

原来这样做的唯一方法是设置覆盖

```
 Type type = list.Items.First().GetType();
  string root = type.Name + "s";

  XmlElementAttribute myAttribute = new XmlElementAttribute();
  myAttribute.ElementName = type.Name;

  XmlAttributes attribs = new XmlAttributes();
  attribs.XmlElements.Add(myAttribute);

  XmlAttributeOverrides myOverride = new XmlAttributeOverrides();

   myOverride.Add(typeof(ObjectList), "Items", attribs);

   XmlWriter xmlw = XmlWriter.Create(fileName);
   XmlSerializer writer = new XmlSerializer(
                typeof(ObjectList), 
                myOverride, 
                new Type[] { type }, 
                null,
                null); 
```

# ruby - 由于缺少 libmysql，在 Windows 上安装 mysql-2.9.0 gem 失败

> ID：13604362
> 
> 赞同：3
> 
> 时间：2012-11-28T11:48:13.823
> 
> 标签：ruby, mysql-connector

我正在尝试在 Windows Server 2003 上安装 Redmine 2.1.4。为了让它工作，我需要安装`activerecord-mysql-adapter`gem，而这又似乎依赖于`mysql-2.9.0.gem`. 我已经从[ruby​​gems](http://rubygems.org/gems/mysql)下载了后者并执行了：

```
gem install mysql-2.9.0.gem 
```

给出以下输出：

```
C:\>gem install mysql-2.9.0.gem
Temporarily enhancing PATH to include DevKit...
Building native extensions.  This could take a while...
ERROR:  Error installing mysql-2.9.0.gem:
        ERROR: Failed to build gem native extension.

        C:/Ruby193/bin/ruby.exe extconf.rb
checking for main() in -llibmysql... no
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
        --with-opt-dir
        --without-opt-dir
        --with-opt-include
        --without-opt-include=${opt-dir}/include
        --with-opt-lib
        --without-opt-lib=${opt-dir}/lib
        --with-make-prog
        --without-make-prog
        --srcdir=.
        --curdir
        --ruby=C:/Ruby193/bin/ruby
        --with-mysql-dir
        --without-mysql-dir
        --with-mysql-include
        --without-mysql-include=${mysql-dir}/include
        --with-mysql-lib
        --without-mysql-lib=${mysql-dir}/lib
        --with-libmysqllib
        --without-libmysqllib

Gem files will remain installed in C:/Ruby193/lib/ruby/gems/1.9.1/gems/mysql-2.9.0 for inspection.
Results logged to C:/Ruby193/lib/ruby/gems/1.9.1/gems/mysql-2.9.0/ext/mysql_api/gem_make.out 
```

我猜，一种可能性是我缺少 MySQL C 连接器库。我已经从[http://dev.mysql.com/downloads/connector/c/](http://dev.mysql.com/downloads/connector/c/)`mysql-connector-c-6.0.2-win32.msi`下载了两者，但是两个安装程序都退出了： `mysql-connector-c-6.0.2-win32-vs2005.msi`![在此处输入图像描述](../Images/23232f82fb6a16feeefec500913c8c1e.png)

我也尝试复制`C:\Program Files\MySQL\MySQL Server 5.1\lib\debug\libmysql.dll`到`C:\Ruby193\bin`，但也没有解决 mysql-2.9.0.gem 安装问题。

我还能尝试什么？

**编辑**

从我认为的日志中，Ruby 正在寻找 $RUBY_HOME\lib，而不是 $RUBY_HOME\bin 下的库，如问题中提到的一些来源中所发现的。所以将 libmysql 从 $MySQL_HOME\lib 移动到 $RUBY_HOME\lib 有一点帮助，但现在 Ruby 找不到其他一些库和头文件。所以我猜，我需要使用如下选项：

```
C:\>gem install mysql-2.9.0.gem --platform=ruby --with-opt-lib="C:/Program Files/MySQL/MySQL Server 5.1/lib" --with-opt-include="C:/Program Files/MySQL/MySQL Server 5.1/include" 
```

这也不起作用（可能是因为路径中有空格）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-28T13:27:48.837

尝试使用来自[http://dev.mysql.com/downloads/connector/c/](http://dev.mysql.com/downloads/connector/c/)的没有安装程序版本的连接器，并在根文件夹或没有任何空间的文件夹路径中提取内容，然后尝试安装 mysql gem

**例子**

```
gem install mysql --platform=ruby -- --with-mysql-dir=C:/mysql-connector-c-noinstall-6.0.2-win32 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T19:37:27.113

我已经发布了带有预编译二进制文件的`ruby`mysql gem 2.9.0 版。`x86-mingw32`

如果您让 RubyGems 确定正确的平台，它会自动`x86-mingw32`为您安装平台 gem，这将避免编译过程。

安装后，它将向您显示一组说明，指示您下载 MySQL Connector/C 并将其 DLL 放置在正确的位置：

```
C:\Users\Luis>gem install mysql
Fetching: mysql-2.9.0-x86-mingw32.gem (100%)

======================================================================================================

  You've installed the binary version of mysql.
  It was built using MySQL Connector/C version 6.0.2.
  It's recommended to use the exact same version to avoid potential issues.

  At the time of building this gem, the necessary DLL files where available
  in the following URL:

  http://dev.mysql.com/get/Downloads/Connector-C/mysql-connector-c-noinstall-6.0.2-win32.zip/from/pick

  You can put the lib\libmysql.dll available in this package to your Ruby bin directory.
  E.g. C:\Ruby\bin

======================================================================================================

Successfully installed mysql-2.9.0-x86-mingw32
1 gem installed 
```

如果您只需要连接到已经运行的 MySQL 版本，则无需下载或安装 MySQL。

RubyGems 和 Bundler 都会自动检测正确的平台并安装正确的预编译二进制文件，而无需您自己编译它们。

如果您在代理后面，请使用`--http-proxy`参数`gem install`（请参阅帮助）或设置`HTTP_PROXY`环境变量。

希望有帮助。

# objective-c - startAnimating 在按钮按下的 IBAction 内不起作用

> ID：13604363
> 
> 赞同：0
> 
> 时间：2012-11-28T11:48:18.567
> 
> 标签：objective-c, cocoa-touch, uiactivityindicatorview

我有一个奇怪的问题。我有一个按钮，按下按钮我正在做

以下

```
- (IBAction)btnPressed:(id)sender {

    [ _spinner startAnimating];//where _spinner is a ActivityIndicator

    [self showResult];

}

-(void) showResult{

    sleep(10);

    resultText.text=@"Hi..Sorry.It has been a long wait";

} 
```

但是微调器永远不会开始动画，即使调用了 showResult 方法

适当地。我觉得这很奇怪。当我将 [_spinner startAnimating] 放入 viewDidLoad

它完美无缺。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T11:54:26.943

在主线程上调用 sleep 方法导致 UI 挂起，这就是您看不到活动指示器的原因

一种方法：

```
- (IBAction)actionbuton:(id)sender {

    [_activity startAnimating];

    [self performSelectorInBackground:@selector(backgroundProcess) withObject:nil];
}

- (void) backgroundProcess{

    sleep(4);
    [self performSelectorOnMainThread:@selector(processingDone) withObject:nil waitUntilDone:NO];
}

- (void) processingDone{

    [_activity stopAnimating];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T12:06:48.867

1.  首先在按钮按下方法中启动您的活动。

2.  然后在计时器中调用您的 showResult 方法后。

3.  我认为这将解决您的问题。

4.  还要从 showResult 中删除 Sleep。

# javascript - 检查待处理呼叫

> ID：13604365
> 
> 赞同：3
> 
> 时间：2012-11-28T11:48:20.020
> 
> 标签：javascript

我想知道是否有任何方法可以检查是否有任何挂起的调用将在某个时候执行，例如来自 AJAX 请求的回调或计时器（`setTimeout`）。

类似于检查运行 JavaScript 的引擎的整个堆栈。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-11T08:11:37.937

考虑到 AJAX 回调依赖于服务器响应（成功、失败），您无法定义它们是否等待调用，直到实际调用它们。

但这里有一个想法是如何实现这种检查的`setTimeout`（也许`setInterval`）：

```
window.timeoutsRegistry = [];

window.oldSetTimeout = window.setTimeout;

window.setTimeout = function(func, delay) {
    var tId = window.oldSetTimeout(function() {
        try {
            func();
        }
        catch (exception) {
            //Do Error Handling
        }
    }, delay);

    var startedAt = (+new Date);

    window.timeoutsRegistry[tId] = {
        id: tId,
        callback: func,
        delay: delay,
        startedAt: startedAt,
        isPending: function () {
            var now = (+new Date);

            return ((startedAt + delay) > now);
        }
    };
};

for(var i =0; i < 10; i++) {
    setTimeout(function() {
        1+1;
    }, 200000);
}

console.log(window.timeoutsRegistry);

var pending = window.timeoutsRegistry.filter(function(element) {
    return element.isPending();
});

console.log(pending); 
```

一些注意事项：

*   `filter`并非所有浏览器都支持该方法
*   [如何覆盖全局函数](https://stackoverflow.com/questions/3815296/overriding-a-global-function-in-javascript)
*   [`+new Date`做什么](https://stackoverflow.com/questions/221294/how-do-you-get-a-timestamp-in-javascript)
*   [一个相关的问题（只是思考的食物）](https://stackoverflow.com/questions/2814919/does-the-browser-keep-track-of-active-timer-ids)

# jquery - 使用 AJAX 加载 jQuery 背景滑块

> ID：13604372
> 
> 赞同：3
> 
> 时间：2012-11-28T11:48:37.047
> 
> 标签：jquery, ajax

我需要创建一个无需刷新页面即可传播内部链接的网站。导航将保持不变。内容将通过 jQuery .load() 加载。

除了无法通过 AJAX 加载全屏背景的 jQuery 插件外，一切正常。每个页面都有一组不同的背景。我正在使用 [拉斯维加斯背景 jQuery 插件][1]。

我所做的是将触发插件的函数放在通过 AJAX 加载的#content 中。像这样的东西：

```
<div id="#content"> <!--Loaded via AJAX -->

<script>
    $.vegas({
        src:'images/anImageforThisPage.jpg',
        fade:2000
    });
</script>

   <!-- OTHER CONTENT -->
</div> 
```

但是不行，每次点击链接，只加载内容，背景本身还是anImageforThisPage.jpg而不是ImageforAnotherPage.jpg

我不太确定它为什么会这样并且正在寻找解决方案。我知道 .load() 允许回调函数，试过了，还是一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:09:04.630

您的 javascript 需要包含在脚本标签中。

```
<div id="#content"> <!--Loaded via AJAX -->
    <script type="text/javascript">
    $.vegas({
        src:'images/anImageforThisPage.jpg',
        fade:2000
    });
    </script>
   <!-- OTHER CONTENT -->
</div> 
```

# c# - 试图做到这一点，以便当我单击 Windows 窗体按钮时，会出现文本文件中的数字

> ID：13604374
> 
> 赞同：0
> 
> 时间：2012-11-28T11:48:39.257
> 
> 标签：c#, winforms

这是下面的代码，我确定有一种简单的方法可以做到这一点，但我对此并不陌生并且正在苦苦挣扎。如何让 textBoxLatitude.Text 显示项目 [0]？

```
namespace GPSCalculator
    {
        public partial class Form1 : Form
        {
            public Form1()
            {
                InitializeComponent();
                List<float> inputList = new List<float>();
                TextReader tr = new StreamReader("c:/users/tom/documents/visual studio 2010/Projects/DistanceCalculator3/DistanceCalculator3/TextFile1.txt");
                String input = Convert.ToString(tr.ReadToEnd());
                String[] items = input.Split(',');

            }

            private void buttonNext_Click(object sender, EventArgs e)
            {

                textBoxLatitude.Text = (items[0]);

            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T11:51:42.383

items 当前是一个局部变量..需要使它成为一个类变量

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T11:51:29.790

将项目数组移动到类字段。

```
public partial class Form1 : Form
{
    private String[] items; // now items available for all class members

    public Form1()
    {
        InitializeComponent();
        List<float> inputList = new List<float>();
        TextReader tr = new StreamReader(path_to_file);
        String input = Convert.ToString(tr.ReadToEnd());
        items = input.Split(',');
    }

    private void buttonNext_Click(object sender, EventArgs e)
    {
        textBoxLatitude.Text = items[0];
    }
} 
```

此外，我相信您想在每次单击按钮时显示下一个项目。然后，您还需要项目索引字段。

```
public partial class Form1 : Form
{
    private String[] items; // now items available for all class members
    private int currentIndex = 0;

    public Form1()
    {
        InitializeComponent();
        // use using statement to close file automatically
        // ReadToEnd() returns string, so you can use it without conversion
        using(TextReader tr = new StreamReader(path_to_file))
              items = tr.ReadToEnd().Split(',');    
    }

    private void buttonNext_Click(object sender, EventArgs e)
    {
        if (currentIndex < items.Length - 1)
        {
            textBoxLatitude.Text = items[currentIndex];
            currentIndex++
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T11:52:37.503

将数组移到函数外。这将使整个班级都可以使用它。

```
namespace GPSCalculator
{
    public partial class Form1 : Form
    {
        String[] items;

        public Form1()
        {
            InitializeComponent();
            List<float> inputList = new List<float>();
            TextReader tr = new StreamReader("c:/users/tom/documents/visual studio 2010/Projects/DistanceCalculator3/DistanceCalculator3/TextFile1.txt");
            String input = Convert.ToString(tr.ReadToEnd());
            items = input.Split(',');
        }

        private void buttonNext_Click(object sender, EventArgs e)
        {

            textBoxLatitude.Text = (items[0]);

        }
    }
} 
```

# c++ - 为什么 NetUserGetInfo 不给我用户主目录？

> ID：13604376
> 
> 赞同：0
> 
> 时间：2012-11-28T11:48:40.807
> 
> 标签：c++, windows, winapi, active-directory

我在我的 c++ 项目中使用 netusergetinfo 函数。

该功能工作正常。

但它不能给主目录值。它是空值。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T11:51:23.150

您可以使用`SHGetKnownFolderPath`函数 (with `FOLDERID_Profile`) 获取指定用户的配置文件目录。

# tomcat - tomcat7-maven-plugin 自定义 server.xml

> ID：13604377
> 
> 赞同：1
> 
> 时间：2012-11-28T11:48:44.233
> 
> 标签：tomcat, maven, maven-3

我正在尝试将 tomcat7-maven-plugin:run 与自定义 server.xml 一起使用，其中包含我需要启用的领域。如文档中所述，我曾经`<serverXml />`指向我的文件。但是，我的应用程序不会被加载。插件文档声明我需要手动为我的应用程序配置上下文。

我该怎么做呢？我不确定要为 docBase 等放什么。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T09:26:35.740

你能检查这个示例 pom [http://svn.apache.org/repos/asf/tomcat/maven-plugin/trunk/tomcat7-maven-plugin/src/test/resources/deploy-war-project/pom.xml](http://svn.apache.org/repos/asf/tomcat/maven-plugin/trunk/tomcat7-maven-plugin/src/test/resources/deploy-war-project/pom.xml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-03T20:14:37.990

如果您只需要更改领域，那么不要`server.xml`使用`context.xml`您的领域：

```
<Context>
  <Realm className="org.apache.catalina.realm.MemoryRealm" />
</Context> 
```

将你的tomcat maven插件指向那个`context.xml`：

```
<plugin>
  <groupId>org.apache.tomcat.maven</groupId>
  <artifactId>tomcat6-maven-plugin</artifactId>
  <version>2.0</version>
  ...
  <configuration>
    ...
    <contextFile>tomcat/context.xml</contextFile>
    ...
  </configuration>
</plugin> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-13T09:31:45.947

当我遇到以下问题时，我已经使用从下载的 tomcat 分发中获取的参考配置了自定义 server.xml，并更新了端口号等。 [嵌入式 tomcat 自定义 server.xml 配置问题](https://stackoverflow.com/questions/23101945/run-tomcat-and-deploy-project-with-own-server-xml) ***注意：它仅适用于 2.1 版但不适用于 2.2 版的 tomcat7-maven-plugin 工件***

找到我的 pom.xml 和 server.xml

```
 <project>
  ...
  <packaging>war or pom</packaging>
  ...
  <build>
    ...
    <plugins>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>${java-version}</source>
                    <target>${java-version}</target>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-war-plugin</artifactId>
                <configuration>
                    <warName>secured-sample-webapp</warName>
                    <webResources>
                        <resource>
                            <directory>src/main/webapp</directory>
                            <filtering>true</filtering>
                            <includes>
                                <include>**/*.tag</include>
                                <include>**/*.jsp</include>
                            </includes>
                        </resource>
                        <resource>
                            <directory>src/main/webapp</directory>
                            <filtering>false</filtering>
                            <excludes>
                                <exclude>**/*.tag</exclude>
                                <exclude>**/*.jsp</exclude>
                            </excludes>
                        </resource>
                    </webResources>
                    <packagingExcludes>less/**</packagingExcludes>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-dependency-plugin</artifactId>
                <executions>
                    <execution>
                        <id>install</id>
                        <phase>install</phase>
                        <goals>
                            <goal>sources</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>

            <plugin>
                    <groupId>org.apache.tomcat.maven</groupId>
                    <artifactId>tomcat7-maven-plugin</artifactId>
                    <version>2.1</version>
                    <executions>
                      <execution>
                        <id>tomcat-run</id> 
                        <goals>
                          <goal>exec-war-only</goal>
                        </goals>
                        <phase>package</phase>
                        <configuration>
                          <path>/secured-sample-webapp</path>
                          <warDirectory>target/secured-sample-webapp</warDirectory>
                          <!-- optional, needed only if you want to use a preconfigured server.xml file -->
                          <serverXml>src/main/tomcatconf/server.xml</serverXml>
                          <!-- optional values which can be configurable -->
                          <attachArtifactClassifier>exec-war</attachArtifactClassifier>
                          <attachArtifactClassifierType>jar</attachArtifactClassifierType>
                          <finalName>secured-sample-webapp-exec.jar</finalName>
                          <enableNaming>true</enableNaming>
                        </configuration>
                      </execution>
                    </executions>
               </plugin>
      ...
    </plugins>
    ...
  </build>
  ...
</project> 
```

和 Server.xml

```
 <Server port="8005" shutdown="SHUTDOWN">
  <!--  <Listener className="org.apache.catalina.startup.VersionLoggerListener" /> -->
  <!-- Security listener. Documentation at /docs/config/listeners.html
  <Listener className="org.apache.catalina.security.SecurityListener" />
  -->
  ...
  <Service>
  ...
  <Engine>
  ...
  <Host name="localhost"  appBase="webapps"
            unpackWARs="true" autoDeploy="true">

             <Context docBase="../../secured-sample-webapp" path="/secured-sample-webapp" reloadable="true" />

        <!-- SingleSignOn valve, share authentication between web applications
             Documentation at: /docs/config/valve.html -->
        <!--
        <Valve className="org.apache.catalina.authenticator.SingleSignOn" />
        -->

        <!-- Access log processes all example.
             Documentation at: /docs/config/valve.html
             Note: The pattern used is equivalent to using pattern="common" -->
        <Valve className="org.apache.catalina.valves.AccessLogValve" directory="logs"
               prefix="localhost_access_log." suffix=".txt"
               pattern="%h %l %u %t &quot;%r&quot; %s %b" />

      </Host>

    </Engine>
  </Service>
</Server> 
```

# html - 文本对齐不在同一行上工作

> ID：13604381
> 
> 赞同：0
> 
> 时间：2012-11-28T11:48:53.310
> 
> 标签：html, css

我是新手，我对代码不太了解。我想要一个块左侧的链接和右侧的另一个链接。我正在使用以下命令。两者都在正确的一边，但在新线上。我在 css 中给出了正确的代码，但我认为一些 html 代码有问题。请让我知道下面的错误。

```
 <div class="more">
       <span><a href="http://www.fe.com/discuss">See More</a></span>
       </div>
       <div class="placeadhere">
       <span><a href="http://www.fe.com/posting.php?mode=post&f=16">Place Ad Here</a></span>
       </div> 
```

我的 CSS 是

```
.more {
font-size:11px;
text-align:right;
margin:5px 0 10px 0; 
```

}

```
.placeadhere {
font-size:11px;
text-align:left;
margin:5px 0 10px 0; 
```

}

图像是 ![在此处输入图像描述](../Images/2088d8823d590de1e8b126cf47e823d7.png)

非常感谢您的回答解决了我的问题...爱您和 SOF..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:51:56.613

我认为问题是你的CSS。你也应该粘贴它。

```
<div class="more" style="width:auto; float: left;">
       <span><a href="http://www.fedri.com/discuss">See More</a></span>
</div>
<div class="placeadhere" style="width:auto; float: right;">
       <span><a href="http://www.fedri.com/posting.php?mode=post&f=16">Place Ad Here</a></span>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T11:56:29.437

Div 是**块**元素，将占据整个宽度。将 div 指定为**内联**，以便它只占用所需的宽度。或者，您可以将 div 的定位设为绝对并根据需要浮动它们。

```
.more {
 display: inline;
    float: left;
    font-size: 11px;
    margin: 5px 0 10px;
    text-align: right;
}

.placeadhere {
 display: inline;
    float: right;
    font-size: 11px;
    margin: 5px 0 10px;
    text-align: left;
} 
```

请参阅工作小提琴 - [http://jsfiddle.net/bkgJT/](http://jsfiddle.net/bkgJT/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T11:56:52.523

您可以在[http://cssdeck.com/labs/tztgz6hy/0的工作中看到这一点](http://cssdeck.com/labs/tztgz6hy/0)

我在你的整个 HTML 片段周围添加了一个额外的 div，它应该看起来像

```
<div class="main">
    <div class="more">
        <span>
            <a href="http://www.fedri.com/discuss">See More</a>
        </span>
    </div>
    <div class="placeadhere">
        <span>
            <a href="http://www.fedri.com/posting.php?mode=post&f=16">Place Ad Here</a>
        </span>
    </div>
</div> 
```

和 CSS

```
.more {
font-size:11px;
text-align:right;
margin:5px 0 10px 0;
}
.placeadhere {
font-size:11px;
text-align:left;
margin:5px 0 10px 0;
}
.main .more{float:left;}
.main .placeadhere{float:right;} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T11:57:21.923

使用此自定义您的 div 宽度

```
<div style="width:somevalue">
        <div class="more">
         <span><a href="http://www.fedri.com/discuss">See More</a></span>
       </div>
       <div class="placeadhere" style="float:right;">
        <span><a href="http://www.fedri.com/posting.php?mode=post&f=16">Place Ad Here</a></span>
       </div>
   </div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T11:58:54.530

只需添加`float`

```
.more {
font-size:11px;
text-align:right;
margin:5px 0 10px 0; float:right
}

.placeadhere {
font-size:11px;
text-align:left;
margin:5px 0 10px 0; float:left
}​ 
```

**[演示](http://jsfiddle.net/Nd79a/)**

# intellij-idea - 为什么 IDEA 将 JavaDoc 显示为错误？

> ID：13604387
> 
> 赞同：18
> 
> 时间：2012-11-28T11:49:12.763
> 
> 标签：intellij-idea

```
/**
     * @param string
     * @throws ApplicationException
     */ 
```

IDEA 突出显示“字符串”并告诉“未找到文档”。为什么呢？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-28T12:03:17.537

为param写一些文档`string`或者调整**声明有Javadoc问题**检查设置，这样这样的问题就不会报了：

![声明有 Javadoc 问题](../Images/bd0b5ea69340da95871dd2f8174c8f86.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-10-30T05:26:15.913

我的开发工具是`Android Studio`，遇到你这样的问题。
你只是这样做。

来自`File`=>`Settings`

[![在此处输入图像描述](../Images/7590a8686853f9c98e9cf944d271a937.png)](https://i.stack.imgur.com/guEXV.png)

# delphi - 如何使用 TIdIMAP4 登录 Gmail 帐户并获取邮箱中的邮件数量？

> ID：13604389
> 
> 赞同：8
> 
> 时间：2012-11-28T11:49:18.147
> 
> 标签：delphi, delphi-xe2, imap, indy

如何`INBOX`使用组件登录到 Gmail 帐户并获取邮箱中的邮件数量`TIdIMAP4`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-28T12:34:00.327

要获取 Gmail 收件箱中的邮件总数，您需要首先使用您的凭据连接到 Gmail IMAP 服务器，选择 Gmail 的收件箱邮箱，然后为该选定邮箱读取[`TotalMsgs`](http://www.indyproject.org/docsite/html/TIdMailBox_TotalMsgs.html)属性值。

在代码中它可能如下所示（此代码需要 OpenSSL，所以不要忘记将`libeay32.dll`和`ssleay32.dll`库放在对您的项目可见的路径；您可以下载不同版本和平台的 Indy 的 OpenSSL 库[`from here`](http://indy.fulgan.com/SSL/)）：

```
uses
  IdIMAP4, IdSSLOpenSSL, IdExplicitTLSClientServerBase;

function GetGmailMessageCount(const UserName, Password: string): Integer;
var
  IMAPClient: TIdIMAP4;
  OpenSSLHandler: TIdSSLIOHandlerSocketOpenSSL;
begin
  Result := 0;
  IMAPClient := TIdIMAP4.Create(nil);
  try
    OpenSSLHandler := TIdSSLIOHandlerSocketOpenSSL.Create(nil);
    try
      OpenSSLHandler.SSLOptions.Method := sslvSSLv3;
      IMAPClient.IOHandler := OpenSSLHandler;
      IMAPClient.Host := 'imap.gmail.com';
      IMAPClient.Port := 993;
      IMAPClient.UseTLS := utUseImplicitTLS;
      IMAPClient.Username := UserName;
      IMAPClient.Password := Password;
      IMAPClient.Connect;
      try
        if IMAPClient.SelectMailBox('INBOX') then
          Result := IMAPClient.MailBox.TotalMsgs;
      finally
        IMAPClient.Disconnect;
      end;
    finally
      OpenSSLHandler.Free;
    end;
  finally
    IMAPClient.Free;
  end;
end;

procedure TForm1.ConnectButtonClick(Sender: TObject);
begin
  ShowMessage('Total count of messages in inbox: ' +
    IntToStr(GetGmailMessageCount('UserName@gmail.com', 'Password')));
end; 
```

You may optionally download a [`demo project`](http://code.google.com/p/projects-stackoverflow-tlama/downloads/detail?name=13604389.ZIP) which includes [`OpenSSL v1.0.1c`](http://indy.fulgan.com/SSL/openssl-1.0.1c-i386-win32.zip) libraries for i386 platform for 32-bit applications (compiled in Delphi 2009).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-11T22:17:09.850

kwadratens, you need to use

OpenSSLHandler.SSLOptions.Method := sslvTLSv1;

# javascript - javascript - 将表单上的所有字段设为必填

> ID：13604391
> 
> 赞同：0
> 
> 时间：2012-11-28T11:49:18.800
> 
> 标签：javascript, dynamics-crm-2011

我希望能够遍历表单上的所有字段，并在一些 javascript 中使它们成为必需的。我已经能够做类似的事情来使它们被禁用并用 检索它们`var controls = Xrm.Page.ui.controls.get();`，但是我知道设置要求级别我需要获取属性而不是 UI 控件，如何一次获取所有属性以便我可以循环通过它们？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T16:01:36.410

几乎完全从[CRM SDK](http://msdn.microsoft.com/en-us/library/gg334409.aspx#BKMK_setRequiredLevel)复制：

```
function MakeAllAttributesRequired() {
    var attributes = Xrm.Page.data.entity.attributes.get();
    for (var i in attributes) {
        attributes[i].setRequiredLevel("required");
    }
} 
```

# java - JTabbedPane 按钮获取窗格

> ID：13604396
> 
> 赞同：0
> 
> 时间：2012-11-28T11:49:36.247
> 
> 标签：java, swing, jtabbedpane

我有一个带有按钮的 JTappedPane，我想关闭该选项卡。我这样做是这样的：

```
jTabbedPane1.addTab(title, null, panel, null);

JPanel pnl = new JPanel();
    JButton close = new JButton();
    try {
        Image img = ImageIO.read(getClass().getResource("x.png"));
        close.setIcon(new ImageIcon(img));
      } catch (IOException ex) {
          ex.printStackTrace();
      }
    close.setPreferredSize(new Dimension(10, 10));
    close.setBorderPainted(false);
    close.addActionListener(new java.awt.event.ActionListener(){

        public void actionPerformed(ActionEvent evt) {
                    //TODO CLOSE THE TAP WHEN BUTTON IS PRESSED

                }

        }});
    JLabel lab = new JLabel(s);

     pnl.setOpaque(false);
     pnl.add(lab);
      pnl.add(close);

jTabbedPane1.setTabComponentAt(jTabbedPane1.getTabCount() - 1, pnl); 
```

我正在尝试在已按下按钮的选项卡上获取选项卡的标题。我以为我可以做类似 close.getContaining() 的事情来返回它所在的选项卡，但我错了。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T12:33:27.023

如果我理解正确，您希望找到将按钮的父级作为 tabComponent 的选项卡的索引：

```
public void actionPerformed(ActionEvent evt) {
    JComponent source = (JComponent) evt.getSource();
    Container tabComponent = source.getParent();
    int tabIndex = jTabbedPane1.indexOfTabComponent(tabComponent);
    jTabbedPane1.removeTabAt(tabIndex);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T11:57:14.153

你可以简单地写：

```
jTabbedPane1.removeTabAt(jTabbedPane1.getSelectedIndex()); 
```

# android - android asynctask NetworkOnMainThreadException

> ID：13604397
> 
> 赞同：2
> 
> 时间：2012-11-28T11:49:38.673
> 
> 标签：android, sockets, android-asynctask

我正在尝试使用套接字在android中编写服务器/客户端应用程序，并且我处理客户端套接字`AsyncTask`（服务器不是android，只是普通的java）。当我尝试从服务器读取时出现异常。我发现当我`android:targetSdkVersion="16"`从 android manifest 中删除时，异常消失了，我可以从服务器读取。

我不明白这是为什么？谁能帮我澄清一下？我也很难理解 asynctask 方法`doInBackground`和我自己的方法之间的关系。是否`conhandler.execute()`运行`doInBackground()` 然后等到我调用其他方法？感谢帮助。

```
public class ConnectionHandler extends AsyncTask<Void, Void, Void>{

public static String serverip = "10.0.2.2";
public static int serverport = 5000;
Socket s;
PrintWriter out;
BufferedReader in;

protected Void doInBackground(Void... params) {
    try {
        s = new Socket(serverip, serverport);
        Log.i("AsyncTank", "doInBackgoung: Created Socket");
    }...
    if (s.isConnected()) {
    try {
        in = new BufferedReader(new InputStreamReader(s.getInputStream()));
        out = new PrintWriter(s.getOutputStream(), true);
        Log.i("AsyncTank", "doInBackgoung: Socket created, Streams assigned");

    } ....
 }

public void writeToStream(String message) {
 try {
     if (s.isConnected()){
        out.println(message);
    } else {
        Log.i("AsynkTask", "writeToStream : Cannot write to stream, Socket is closed");
    }
    } catch (Exception e) {
    Log.i("AsynkTask", "writeToStream : Writing failed");
   }  
 }

 public String readFromStream() {
try {
    if (s.isConnected()) {
        Log.i("AsynkTask", "readFromStream : Reading message");
        String ret=in.readLine();
        Log.i("AsynkTask", "readFromStream : read "+ret);
        return ret;
    } else {
        Log.i("AsynkTask", "readFromStream : Cannot Read, Socket is closed");
    }
} catch (Exception e) {
    Log.i("AsynkTask", "readFromStream : Reading failed"+e.getClass());
}
return null;
}
} 
```

这是我的主要活动

```
 public class MainActivity extends Activity {
private EditText view_email;
private EditText view_password;
TextView result;
ConnectionHandler conhandler;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    conhandler = new ConnectionHandler();
    conhandler.execute();       
    }

public void register(View view) {
     view_email= (EditText) findViewById(R.id.email);
    view_password = (EditText) findViewById(R.id.password);
    String email=view_email.getText().toString();
    String password=view_password.getText().toString();
    conhandler.writeToStream("register");
    conhandler.writeToStream(email);
    conhandler.writeToStream(password);
    String res=conhandler.readFromStream(); //here's the exception
    result=(TextView) findViewById(R.id.result);
    result.setText(res);
 }
 } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-28T12:03:04.660

这个问题有两个解决方案。

1）不要在主 UIThread 中编写网络调用，为此使用异步任务。

2) 在 setContentView(R.layout.activity_main); 之后将以下代码写入 MainActivity 文件；

```
if (android.os.Build.VERSION.SDK_INT > 9) {
    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
    StrictMode.setThreadPolicy(policy);
} 
```

并将下面的 import 语句放入您的 java 文件中。

```
import android.os.StrictMode; 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-28T11:55:56.493

> ```
>  android.os.NetworkOnMainThreadException 
> ```

这个错误来自**HoneyComb（3.0 或更高版本）。**

**如文档所述，您无法在其主线程上执行网络操作。**要解决这个问题，您必须使用处理程序或异步任务。AFAIK 没有其他方法可以做到这一点。

您可以查看此内容以了解更多详细信息[为什么 ICS 会导致您的应用程序崩溃](http://www.androiddesignpatterns.com/2012/06/app-force-close-honeycomb-ics.html)

尝试使用下面的代码片段

```
new Thread(){
    public void run(){
        //do your Code Here    
    }
}.start(); 
```

# javascript - 使用 Javascript 和 JQuery 从本地文本文件中读取地图数据

> ID：13604399
> 
> 赞同：1
> 
> 时间：2012-11-28T11:49:42.120
> 
> 标签：javascript, jquery, html, map, text-files

我正在尝试用 HTML5 制作游戏，并且正在尝试通过 JavaScript 从文本文件将地图级别加载到游戏中。我已经查看了一些问题，但由于某种原因代码无法正常工作。有人可以看看并告诉我是否有任何明显的东西吗？

```
$.get('js/mapFile.txt',function(data){
    alert();
    var perLine=data.split('\n');
    var myVars=[];
    for(i=0;i<perLine.length;i++)
    {
    var line=perLine[i].split(',');
    myVars[i]={
        'time':line[0],
        'event':line[1],
        'color':line[2],
        'type':line[3]
        }
    }
    document.getElementById("test").innerHTML = "" + myVars[0].time + "Jimmy";
}); 
```

顺便说一句，这只是演示代码，当我让校长工作时我会调整它

# android - Android 活动流程和向上/向后导航

> ID：13604402
> 
> 赞同：1
> 
> 时间：2012-11-28T11:49:55.043
> 
> 标签：android

我正在开发一个有 4 个活动的 Android 应用程序：

A -> B -> C -> D

当我从 A 到 B、从 B 到 C 或从 C 到 D 时，我在 Intent 中添加了一些额外内容。

我想这样的导航非常简单：不需要重新定义后退按钮，对于“向上”操作栏按钮，一个简单的“完成（）”将是正确的方法（？）

现在，问题是从A，我也可以直接到D。仍然不需要重新定义后退按钮，它会回到A，这就是我想要的，但是对于“向上”按钮，它必须去到 C，然后从 C，向上将导致 B，...

这样做的正确方法是什么？

感谢您的回答

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:00:14.020

一种方法是实际上拥有相同的堆栈，但使用附加功能来执行切换。

例如：当您想从 A -> D 转到 A->B->C->D 并使用意图来处理您是否想简单地绕过活动或显示它时。与此相反的用户结果意图也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T12:07:00.070

为了显式控制各种活动之间的流程，当我通过启动一个新活动来响应用户输入时，我会调用`finish()`每个活动：

```
startActivity(intentForNewActivity);
finish(); 
```

这导致原始 Activity 的该实例被破坏。在每个活动中，我都会创建一个 Intent 来启动我想要返回的活动。然后写：

```
@Override public void onBackPressed() {
    startActivity(intentWhereIWantToGoNext);
    finish();
} 
```

我最初在这里写道，我在 onStop() 中调用了 finish()，它在应用程序保持运行时确实有效，但如果应用程序因任何原因停止，则不会给出所需的结果。很抱歉造成混乱，并感谢 PravinCG，虽然他的评论并不完全正确，但至少让我思考得更仔细了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T12:10:13.260

将以下代码放在最后一个括号之前。

```
@Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();
        finish();
    } 
```

# zend-form - 使用依赖项 + zend 框架 2 以 zend 形式调用模型

> ID：13604406
> 
> 赞同：0
> 
> 时间：2012-11-28T11:50:01.340
> 
> 标签：zend-form, zend-framework2

我正在尝试以 zend 形式获取我的类别模型，以便使用 zend 框架 2 处理选择元素。

经过大量代码搜索后，我发现我可以注入或提取依赖项。

遵循我在 module.php 中所做的代码

我想要 CategoryForm.php 中的 categoryTable.php(model) 文件

```
public function getServiceConfig()
{
    return array(
        'factories' => array(
            'Category\Model\CategoryTable' =>  function($sm) {
                $tableGateway = $sm->get('CategoryTableGateway');
                $table = new CategoryTable($tableGateway);
                //echo "<pre>";print_r($table);echo "</pre>";
                return $table;
            },
            'CategoryTableGateway' => function ($sm) {
                $dbAdapter = $sm->get('Zend\Db\Adapter\Adapter');
                $resultSetPrototype = new ResultSet();
                $resultSetPrototype->setArrayObjectPrototype(new Category());
                return new TableGateway('Of_Restaurants_Category', $dbAdapter, null, $resultSetPrototype);
            },
            'Category\Form\CategoryForm' => function ($sm) {
                $service = $sm->get('Category\Model\CategoryTable');
                $form    = new Form;
                $form->setService($service);
                return $form;
            }
        ),
    );
} 
```

然后我将以下代码放入我的控制器中。

```
 $form = $this->getServiceLocator()->get("Category\Form\CategoryForm"); 
```

然后我将以下代码放入我的 CategoryForm.php

```
public function getCategoryTable()
{
    if (!$this->categoryTable) {

        $sm = $this->getServiceLocator();

        $this->categoryTable = $sm->get('Category\Model\CategoryTable');
    }
    return $this->categoryTable;
} 
```

然后我像这样在同一个文件中调用它

```
public function __construct($name = null)
{

   parent::__construct('category');
   echo "<pre>";print_r($this->getCategoryTable());die;

   .... other code 
```

我发现了这个错误

```
Fatal error: Call to undefined method Category\Form\CategoryForm::getServiceLocator() in D:\wamp\www\zendapp\module\Category\src\Category\Form\CategoryForm.php on line 120 
```

请帮忙。我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T04:47:36.930

我找到了解决方案

第1步

这是我的 module.php 代码

```
public function getServiceConfig()
{
    return array(
        'invokables' => array(

            'Category\Form\CategoryForm' => 'Category\Form\CategoryForm',

        ),
        'factories' => array(
            'Category\Model\CategoryTable' =>  function($sm) {
                $tableGateway = $sm->get('CategoryTableGateway');
                $table = new CategoryTable($tableGateway);
                //echo "<pre>";print_r($table);echo "</pre>";
                return $table;
            },
            'CategoryTableGateway' => function ($sm) {
                $dbAdapter = $sm->get('Zend\Db\Adapter\Adapter');
                $resultSetPrototype = new ResultSet();
                $resultSetPrototype->setArrayObjectPrototype(new Category());
                return new TableGateway('Of_Restaurants_Category', $dbAdapter, null, $resultSetPrototype);
            },
        ),
    );
} 
```

第2步

然后在控制器中我做了这个改变

```
 // $form = new CategoryForm();
  // Service locator now injected
  $form = $this->getServiceLocator()->get('Category\Form\CategoryForm'); 
```

步骤：3

然后在我的 categoryForm.php 中我做了以下更改

```
 use Zend\ServiceManager\ServiceManager;
 use Zend\ServiceManager\ServiceManagerAwareInterface; 
```

受保护的 $serviceManager;

```
public function getCategoryTable()
{
    if (!$this->categoryTable) {
        $sm = $this->getServiceManager();
        $this->categoryTable = $sm->get('Category\Model\CategoryTable');
    }
    return $this->categoryTable;
}

protected function getCatList()
{

    $groups = $this->getCategoryTable()->fetchAll();
    return $groups;
}

public function getServiceManager()
{
    if ( is_null($this->serviceManager) ) {
        throw new Exception('The ServiceManager has not been set.');
    }

    return $this->serviceManager;
}

public function setServiceManager(ServiceManager $serviceManager)
{
    $this->serviceManager = $serviceManager;
    // Call the init function of the form once the service manager is set
    $this->init();
    return $this;
} 
public function __construct($name = null) // constructor I finished immediately
{
    parent::__construct('category');
} 
```

我添加 INIT() 函数来获取 servicemanager

```
public function init()
{
   $this->setAttribute('method', 'post');
   $options = array();
    foreach ($this->getCatList() as $cat) {
        $options[$cat->id] = $cat->title;
    }

    $this->add(array(
         'type' => 'Zend\Form\Element\Select',
         'name' => 'parent_id',
         'options' => array(
             'label' => 'Parent Category',
             'empty_option' => 'Please choose Parent Category',
              'value_options' => $options,
         ),

    ));
} 
```

希望这会帮助谁是新的ZF2。

# java - 替换特定位置的子字符串

> ID：13604407
> 
> 赞同：3
> 
> 时间：2012-11-28T11:50:04.633
> 
> 标签：java

```
String date = "2012-11-28 12:30:30"; 
```

我想`2012-11-28 12:00:00`使用以下`String.replace`方法替换日期：

```
String replacedDate = date.replace(date.substring(14, 19), "00:00"); 
```

它工作正常，但如果日期是：

```
String date = "2012-11-28 18:18:18"; 
```

使用上述方法，结果将是`2012-11-28 00:00:28`，但我希望输出是`2012-11-28 18:00:00`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T11:53:36.393

您不需要在`String.replace`此处使用该方法。如果您知道要替换的确切索引并且确定它们将始终相同，那么您可以使用子字符串和字符串连接：

```
String date = "2012-11-28 12:30:30";
date = date.substring(0, 14) + "00:00"; 
```

在线查看它：[ideone](http://ideone.com/0vpJKu)

注意：如果您的字符串确实代表日期，请考虑使用类型变量`Date`而不是`String`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-28T11:54:44.100

您可以使用忽略分钟和秒的日期解析器，而不是直接操作字符串：

```
String s = "2012-11-28 12:30:30";
//skip the minutes, seconds
Date date = new SimpleDateFormat("yyyy-MM-dd HH").parse(s); 

String result = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss").format(date);
System.out.println("result = " + result); 
```

奖励：如果日期不是预期的格式，你会得到一个有用的例外

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T11:54:35.090

这是一个日期/时间。通过将上述内容解析为合适的日期/时间对象并使用与日期/时间相关的方法对其进行操作来处理它*。*这样您就不必依赖子字符串/正则表达式等，也不会冒创建无效日期/时间参考的风险。

例如，使用[SimpleDateFormat](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)和[Calendar](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html)或[Joda-Time](http://joda-time.sourceforge.net/)以获得更直观和强大的 API。

目前你有一个*字符串*类型的系统，而不是一个*强*类型的系统。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T12:01:11.837

你也可以要求第一个'：'然后添加“00:00”

```
String date="2012-11-28 18:18:18";
int i = date.indexOf(':');
String format = date.substring(0,i+1) + "00:00"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T12:03:00.620

我认为您的解决方案不起作用，因为 replace 方法具有此签名

```
public String replace(char oldChar, char newChar) 
```

不是

```
public String replace(String oldChar, String newChar) 
```

这个答案是为了理解问题，解决它，考虑其他很好的答案！

# c# - 列表插入后更新值

> ID：13604417
> 
> 赞同：0
> 
> 时间：2012-11-28T11:50:35.140
> 
> 标签：c#, linq

我有一个问题，我想将一个值更新到要添加到列表中的元素。

使用通用示例：-

我有一个模型对象：-

```
public class Model
{
    public int ModelProperty1 { get; set; }

    public int ModelProperty2 { get; set; }

    public int ModelPropertyStatus { get; set; }
} 
```

我有一个 DTO 对象：-

```
 public class DTO
{
    public int DTOProperty1 { get; set; }

    public int DTOProperty2 { get; set; }

    public int DTOPropertyStatus { get; set; }
} 
```

现在，在我的控制器中，我有一个添加模型对象的列表：-

```
List<Model> _listOfModel = new List<Model>(); 
```

其次，我创建了一个映射方法来映射我的模型和 DTO

```
 private Model MapDTOToModel(DTO dto)
    {
        return new Model
        {
            ModelProperty1 = dto.DTOProperty1,
            ModelProperty2 = dto.DTOProperty2
        };
    } 
```

来到我的问题：-我想要这样的事情：-//我想要一段代码在插入到//列表后更新我的 ModelPropertyStatus

```
 _listOfModel.Add(new Model() { ModelPropertyStatus = 1 }); 
```

//这是我要转换的一段代码：-

```
 Model model = new Model();
        model.ModelPropertyStatus = 1;
        _listOfModel.Add(MapDTOToModel(model)); 
```

具体来说（更新）我想要这样的东西： -

```
_listOfModel.Add(MapDTOToModel() { ModelPropertyStatus = 1 }); 
```

有什么建议么？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:13:05.683

您正在寻找[`ObservableCollection`](http://msdn.microsoft.com/en-us/library/ms668604.aspx)：

> 表示一个动态数据集合，它在添加、删除项目或刷新整个列表时提供通知。

* * *

这是一个例子：

```
public class Model
{
    public int ModelProperty1 { get; set; }
    public int ModelProperty2 { get; set; }
    public int ModelPropertyStatus { get; set; }
}

void Main()
{
    ObservableCollection<Model> _listOfModel = new ObservableCollection<Model>();
    _listOfModel.CollectionChanged += (s, o) =>
    {
        foreach (var m in o.NewItems)
            ((Model)m).ModelPropertyStatus = 1;
    };

    var model = new Model();

    Console.WriteLine("Before add: " + model.ModelPropertyStatus.ToString());

    _listOfModel.Add(model);

    Console.WriteLine("After add: " + model.ModelPropertyStatus.ToString());
} 
```

输出：

> 添加前：0
> 添加后：1

* * *

如您所见，使用该`CollectionChanged`事件，属性在插入期间得到更新。

# c# - 如何将图像放入 jEditable 占位符？

> ID：13604421
> 
> 赞同：1
> 
> 时间：2012-11-28T11:50:45.677
> 
> 标签：c#, .net, image, placeholder, jeditable

占位符中的图像显示，但是当我单击它时 -`<img/>`在 jEditable 输入中获得了一些标签。任何人都知道如何删除它？

```
 $(document).ready(function () {
    $('#Video3').editable(function (value, settings) {
        companyName(value, "Video3");
        return value;
    },
        {
            cancel: 'Cancel',
            submit: 'OK',
            style: 'inherit',
            tooltip: 'Add video',
            placeholder: '<img class="placeholder"  alt="edit" src="/UserControlsAdmin/ExhibitorZone/img/Add_Video.png" />"
            });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T13:05:01.187

我检查了[源代码](http://www.appelsiini.net/projects/jeditable/jquery.jeditable.js)，[第 167 行](https://github.com/tuupola/jquery_jeditable/blob/master/jquery.jeditable.js#L167)删除占位符的内容，如果它等于`settings.placeholder`

```
/* Remove placeholder text, replace is here because of IE. */
if ($(this).html().toLowerCase().replace(/(;|"|\/)/g, '') == settings.placeholder.toLowerCase().replace(/(;|"|\/)/g, ''))
{
    $(this).html('');
} 
```

如果要删除 img 标签，可以在之后添加此代码

```
if ($(this).html().toLowerCase().indexOf('img') > -1)
{
     $(this).html('');
} 
```

# image - cakephp 图片上传错误（仅在第二张图片中发生）

> ID：13604422
> 
> 赞同：2
> 
> 时间：2012-11-28T11:50:48.063
> 
> 标签：image, cakephp, upload

```
function package_edit($id = null) {
    $this->layout = 'admin';
    $this->loadModel('Package');
    $this->Package->id = $id;
    if (empty($this->data)) {
        $this->data = $this->Package->read();
    } else {
        if(!empty ($this->request->data)) {
        $package_data = $this->request->data['Package'];
        $image = array();
        $formimage = array('images','images1');
        $image = array($package_data['images'],$package_data['images1']);
        $file = $this->uploadFiles('img/package', $image,$formimage);
print_r($file); /* check file upload */
        if(!isset($file['urls'])) { 
            $this->Session->setFlash(implode($file['errors']));
        } else {
            for($i=0; $i < count($file['urls']); $i++) {
        $package_data[$formimage[$i]] = $file['urls'][$formimage[$i]];
            }
        }
    }   
    if($package_data['images']['error'] == 4) {
    unset($package_data['images']);
    }
    if($package_data['images1']['error'] == 4) {
    unset($package_data['images1']);
    }
    if ($this->Package->save($package_data)) {
        $this->Session->setFlash('Your package has been updated.');
        $this->redirect(array('action'=>'package_list'));
        } else {
            $this->Session->setFlash('Your package Not updated.');
            $this->redirect(array('action'=>'package_list'));   
        }
    }
} 
```

这是我的代码，在这种情况下我上传了两张图片：

*   如果我无法上传任何图像，编辑功能可以正常工作
*   如果我更新第一个图像，它可以正常工作
*   最后，如果我不更新第一张图片，我只会更新第二张图片，它会显示错误

错误：

```
Array ( 
   [price] => 25 
   [no_of_peeks] => 22 
   [package_title] => gfhgfh 
   [package_desc] => gfhhgfgfh 
   [featured] => 0 
   [images] =>  
   [images1] =>  
      Array ( 
         [name] => itunes_gift_card_hack.jpg 
         [type] => image/jpeg 
         [tmp_name] => /tmp/phpBrIadh 
         [error] => 0 
         [size] => 84925 
       ) 
    ) 
```

请帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:26:10.563

```
$file = $this->uploadFiles('img/package', $image,$formimage);
print_r($file); 
```

在该行中，您的 uploadFiles 组件看起来需要一组图像。由于`$package_data['images']`它是空`$package_data['images1']`的并且包含图像数据，如果它是空的，则应该取消设置图像的第一个数组索引。该组件可能会在它到达一个空的数组值时立即终止。

如果您在保存功能之前将其粘贴到您的问题中，这也会有所帮助，`pr($package_data);` 以便我们可以看到传递给uploadFiles的数据。或者`pr($files);`在您发送到uploadFile 组件之后。

# c# - 在网格中显示信息

> ID：13604427
> 
> 赞同：0
> 
> 时间：2012-11-28T11:51:19.187
> 
> 标签：c#, .net, visual-studio-2012

我有一个按钮，如果我点击它，它会在游戏服务器上检索玩家信息。我需要想办法在网格中显示它。

当我做一个 Console.Write(sendRConCommand("players"))

这将输出到我的控制台：

```
Players on server:
[#] [IP Address]:[Port] [Ping] [GUID] [Name]
--------------------------------------------------
0   XXX.XXX.XXX.XXX:XXXX    46   xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx(OK) [FF]Otto
1   XXX.XXX.XXX.XXX:XXXX   109  xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx(OK) [BBC] Emma Watson
2   XXX.XXX.XXX.XXX:XXXX      46   xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx(OK) [FF]Miikka
3   XXX.XXX.XXX.XXX:XXXX   46   xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx(OK) Bops
4   XXX.XXX.XXX.XXX:XXXX      32   xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx(OK) [BBC] Wesley Snipes
5   XXX.XXX.XXX.XXX:XXXX    31   xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx(OK) Pierre
6   XXX.XXX.XXX.XXX:XXXX     46   xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx(OK) bertrand
7   XXX.XXX.XXX.XXX:XXXX     -1   xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx(OK) SIGGI (Lobby)
8   XXX.XXX.XXX.XXX:XXXX    47   xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx(OK) Min (Lobby)
9   XXX.XXX.XXX.XXX:XXXX     32   xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx(OK) Frostpwnz
10  XXX.XXX.XXX.XXX:XXXX   31   xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx(OK) Zulu BASSA (Lobby)
11  XXX.XXX.XXX.XXX:XXXX     31   xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx(OK) Zardock (Lobby)
14  XXX.XXX.XXX.XXX:XXXX    63   xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx(OK) plbmas
(13 players in total) 
```

我需要弄清楚如何在网格中显示这些信息，以及显示列标题。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T11:57:04.030

这将取决于它如何从游戏服务器传回......如果它来自一个字符串，那么这需要解析（拆分）然后排列成您的网格处理的格式..

如果它的 DataGridView (winform) 那么数据源接受一个列表<>..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T11:58:23.423

您可以使用 string.Format 指定宽度，如下所示：

```
string.Format("{0,-10}{1,-10}", "column1", "column2"); 
```

其中负数是左对齐的值。见这里：http: [//msdn.microsoft.com/en-us/library/fht0f5be.aspx](http://msdn.microsoft.com/en-us/library/fht0f5be.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T12:16:06.213

您需要将文本转换为数据结构。目前它都是文本，所以它只会显示在一列中。

我建议，您根据回车拆分数据，然后为每个玩家行（从第 3 行开始）拆分列。以下是粗略的代码大纲，根据需要进行编辑。

```
 // Setup Datatable to hold the information
        DataTable dt = new DataTable();
        dt.Columns.AddRange(new DataColumn[] {
            new DataColumn("Number", typeof(int)), 
            new DataColumn("IP Address", typeof(string)),
            new DataColumn("Ping", typeof(int)),
            new DataColumn("GUID", typeof(string)),
            new DataColumn("Name", typeof(string))
        });

        // Get info            
        string info = sendRConCommand("players");

        // Split Rows
        string[] infoRows = info.Split(new string[] { Environment.NewLine }, StringSplitOptions.None);
        int start = 3; // ignore first 3 lines
        while (start < infoRows.Length - 1) // Ignore last line
        {
            // Split row on spaces, and remove anything that is an empty space
            string[] row = infoRows[start].Split(new string[] { " " }, StringSplitOptions.RemoveEmptyEntries);
            DataRow dr = dt.NewRow();
            dr["Number"] = int.Parse(row[0].ToString());
            dr["IP Address"] = row[1].ToString();
            dr["Ping"] = int.Parse(row[2].ToString());
            dr["GUID"] = row[3].ToString();
            int nameItem = 4;
            while (nameItem < row.Length)
            {   // Names can have spaces, so we need to merge
                dr["Name"] += " " + row[nameItem].ToString();
                nameItem++;
            }
            dr["Name"] = dr["Name"].ToString().Trim(); // Trim any leading spaces
            dt.Rows.Add(dr);
            start++;
        }

        // Job Done
        mygridview.DataSource = dt; 
```

`mygridview`你的网格在哪里。

我已将其全部放入数据表中，但自定义对象、列表等也可以。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T12:05:59.160

好的，如果您想要 WPF 网格，请执行以下操作：

放`DataGrid`一张表格。将 DataGrid 的`AutoGenerateColumns`属性设置为`True`.

在代码隐藏集中`dataGrid.ItemsSource = playerInfo`（列表数组）

# wpf - 将 dataTemplate 绑定到外部数据源

> ID：13604431
> 
> 赞同：0
> 
> 时间：2012-11-28T11:51:30.523
> 
> 标签：wpf, xaml, nhibernate, data-binding

我有这个数据模板：

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:Model="clr-namespace:Effectus.Model"
xmlns:Controls="clr-namespace:Microsoft.Windows.Controls;assembly=WPFToolkit"
>

<DataTemplate DataType="{x:Type Model:ToDoAction}">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition/>
            <ColumnDefinition/>
        </Grid.ColumnDefinitions>

        <TextBlock Text="Title" 
                   Grid.Row="0" Grid.Column="0"/>
        <TextBox Text="{Binding Path=Title}"
                   IsEnabled="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}},Path=DataContext.AllowEditing.Value}"
                   Grid.Row="0" Grid.Column="1"/>

        <TextBlock Text="Content" 
                   Grid.Row="1" Grid.Column="0"/>
        <TextBox Text="{Binding Path=Content}"
            IsEnabled="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}},Path=DataContext.AllowEditing.Value}"
            AcceptsReturn="True"
            MinHeight="100"
            Grid.Row="2" Grid.ColumnSpan="2"/>

        <TextBlock Text="Owner"
                   Grid.Row="6" Grid.Column="0"/>
        <ComboBox SelectedItem="{Binding Path=Owner}" DisplayMemberPath="Username" SelectedValuePath="Username"
                  ItemsSource="{Binding Converter={StaticResource EnumValuesConverter}, ConverterParameter={x:Type Model:Status}}"
                  IsEnabled="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}},Path=DataContext.AllowEditing.Value}"
                  Grid.Row="6" Grid.Column="1"/>

    </Grid>
</DataTemplate> 
```

在最后一部分中，您可以看到一个 TextBlock，其 Text 为“Owner”，然后是一个 ComboBox。只是为了给您提供上下文，这是我目前正在开发的 ToDo 应用程序的一小部分（我正在尝试进入 MVVM）。我使用的 XAML 是 ToDoAction 对象的 DataTemplate。我希望所有用户都填写“所有者”组合框。我可以通过 NHibernate 从 DB 获取它们，但我对如何将 DataTemplate 绑定到我的 DataSource （在我的情况下是 Nhibernate Session，但我觉得这更普遍）没有最模糊的想法。请给点小建议好吗？非常感谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:07:17.230

有多种方法可以处理它，比如我从未使用过的[ObjectDataProvider 。](http://msdn.microsoft.com/en-us/library/system.windows.data.objectdataprovider.aspx)但我认为最简单和最快的方法是使用单例。

```
public sealed class UserList
{
    public ObservableCollection<User> Users {get; private set;}

    public static UserList Instance
    {
        get{return sInstance;}
    }

    private static UserList sInstance = new UserList();
} 
```

您可以像往常一样更新和修改用户列表，并且必须绑定到此集合。

```
ItemsSource="{Binding Source={x:Static my:UserList.Instance}, Path=Users} 
```

# c# - Windows 窗体中 VCL 的 CustomControl 等效项

> ID：13604434
> 
> 赞同：0
> 
> 时间：2012-11-28T11:51:40.640
> 
> 标签：c#, winforms, custom-controls

Delphi 的VCL 有一个非常有用的类，CustomControl。该类是Control的直接基类，相当于C#WF的UserControl。

对于不熟悉 VCL 的人来说，CustomControl 与 Control 差别不大；主要区别在于大部分财产都受到保护；在实现新控件时，开发人员可以决定要发布哪些控件，哪些应保持隐藏。

我正在为 Windows 窗体开发自己的控件，并且我想隐藏一些属性和事件。例如，我不想公开 MouseDown 事件——相反，我允许捕获对控件元素的单击。

Windows 窗体中是否有等效于 VCL 的 CustomControl？如果没有，我如何在我的控件中隐藏不需要的公共属性和事件？

* * *

**回应答案：**

这不是安全问题，而是代码*优雅*问题。在 Delphi 中，我可以从 CustomControl 派生，保留 OnMouseDown 事件受保护（如在 C# 中受保护），然后对控件的用户说：

> 您不能使用 OnMouseDown，因为没有。如果您想对用户单击控件做出反应，只需使用 OnElementClicked - 您甚至可以获得有关单击了哪个元素及其状态的详细信息。

我可以按照 Hans Passant 的建议禁用调用 MouseDown 事件，但是我必须在控件的用户手册中包含以下内容：

> 请*不要*使用 MouseDown 事件，因为我已经覆盖了 OnMouseDown 方法，因此它不会调用 MouseDown 事件。这是因为控件的逻辑是这样设计的，您应该使用 OnElementClicked 而不是 OnMouseDown。请*不要*因为 MouseDown 不起作用而批评控件。请*不要将*其报告为错误，因为它是设计使然。请*不要*在论坛上发布消息或创建博客条目来解释如何通过继承类并手动调用 MouseDown 事件来解决 MouseDown 问题，因为它会破坏控件的逻辑。请*不要*……该死的，告诉过你！

如果有人真的继承了我的控制权——我假设他知道他在做什么（也因为一个人也可以访问我的控制权的内部逻辑）。但如果有人只是使用我的控件，我只会给他这些属性、事件和方法，我确信它们会按设计工作。

我希望它能解释我的动机:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:22:18.953

我认为 Delphi 所做的隐藏，你所要求的，和使它不可访问之间有一个根本的区别。隐藏很简单，只需重复声明并应用属性即可：

```
using System;
using System.ComponentModel;
using System.Windows.Forms;

class MyControl : Control {
    [Browsable(false), EditorBrowsable(EditorBrowsableState.Never)]
    private new event MouseEventHandler MouseDown;
} 
```

这会阻止事件显示在“属性”窗口中，它不会显示在 IntelliSense 下拉列表中，并且当他尝试在代码中分配事件时会生成编译错误。

然而，不能绝对保证客户端程序员无论如何都无法绕过限制。例如，通过强制转换或覆盖您的类。但最终的后门是实现 IMessageFilter 接口，对此你无能为力。*因此，如果以优雅*为目标，这应该已经足够好了。

# c++ - 无法访问 CBitmap 位

> ID：13604438
> 
> 赞同：1
> 
> 时间：2012-11-28T11:51:50.063
> 
> 标签：c++, mfc

我试图将 CBitmap 转换为 DIB，但它在控制台应用程序中不起作用我如何获得设备上下文？SetDIBColorTable 和 GetDIBits 都不起作用

```
 BITMAP bimapInfo;
 m_bmBitmap->GetBitmap(&bimapInfo);
 HDC hScrDC = ::GetDC(NULL);
 HDC hMemDC = NULL;
 hMemDC = ::CreateCompatibleDC(hScrDC); 
 //HGDIOBJ oldbmp = ::SelectObject(hMemDC,b); 
 BITMAP bmp;
 const DWORD dwcBihSize = sizeof(BITMAPINFOHEADER);
 BITMAPINFOHEADER bi;
 //GetObject(b,sizeof(tagBITMAP),&bmp);
 long dwSize = dwcBihSize +(pow(2.0,bimapInfo.bmBitsPixel)) * sizeof(RGBQUAD) + ((bmp.bmBitsPixel * width) * height);
 LPBITMAPINFO pDIB ;
 output(dwSize);
pDIB = (LPBITMAPINFO)new BYTE[dwSize];
pDIB->bmiHeader.biSize = dwcBihSize;
pDIB->bmiHeader.biWidth = width;
pDIB->bmiHeader.biHeight = height;
pDIB->bmiHeader.biBitCount = bimapInfo.bmBitsPixel;
pDIB->bmiHeader.biPlanes = 1;
pDIB->bmiHeader.biCompression = BI_RGB;
pDIB->bmiHeader.biXPelsPerMeter = 1000;
pDIB->bmiHeader.biYPelsPerMeter = 1000;
pDIB->bmiHeader.biClrUsed = 0;
pDIB->bmiHeader.biClrImportant = 0;
LPRGBQUAD lpColors =(LPRGBQUAD)(pDIB+pDIB->bmiHeader.biSize);
output((int)lpColors);
int dibCols = pow(2.0,pDIB->bmiHeader.biBitCount);
output(dibCols);
SetDIBColorTable(hMemDC,0,dibCols,lpColors);
output(dibCols);
void* bitArray = pDIB + pDIB->bmiHeader.biSize+dibCols *sizeof(RGBQUAD);
int sizeOfBitArray = dwSize - pDIB->bmiHeader.biSize+dibCols *sizeof(RGBQUAD);
 for(int i=0;i<dibCols;i++)
 {
    lpColors[i].rgbRed=0;
    lpColors[i].rgbBlue=0;
    lpColors[i].rgbGreen=0;
    lpColors[i].rgbReserved=0;
 } 
 output(SetDIBColorTable(hMemDC,0,dibCols,lpColors));
 int depth =bmp.bmBitsPixel == 1 ? IPL_DEPTH_1U : IPL_DEPTH_8U;
 int nChannels = 3;
 IplImage* image= cvCreateImage(cvSize(width,height),depth,3);
 output(GetDIBits(hMemDC,b,0,height,bitArray,pDIB,DIB_RGB_COLORS));
 image->imageData = (char*)bitArray;
 cvSaveImage("c:\img.jpg",image); 
```

我试图将 CBitmap 转换为 DIB，但它在控制台应用程序中不起作用我如何获得设备上下文？SetDIBColorTable 和 GetDIBits 都不起作用

# xcode - XCode 显示旧警告

> ID：13604440
> 
> 赞同：1
> 
> 时间：2012-11-28T11:51:52.357
> 
> 标签：xcode, svn, warnings

我有一个带有 restkit 集成的 xcode 项目。在 Restkit 使用中，有一些不推荐使用的函数调用 - 并且 xcode 显示了一堆警告，例如：Thiss API... is depreceted

因此，我将它们更改为较新的，并且所有警告都消失了。然而，今天从 svn 更新后，我所有旧警告都回来了，但没有旧代码行。Xcode 指出不存在的错误。

我试图清理项目等，没有任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:59:47.303

尝试恢复 .xcodeproj 文件。实际上可能发生的是，收到这些警告的人也必须提交所有项目设置。由于您进行了更新，因此您恢复了这些设置。所以首先从 svn 还原 .xcodeproj 文件。然后使用新设置提交

# jquery - 将格式标记添加到文本框值

> ID：13604444
> 
> 赞同：0
> 
> 时间：2012-11-28T11:52:00.260
> 
> 标签：jquery

在我的表单中，我希望允许用户格式化文本并添加列表等（基本的 html 功能，而不必知道 html）。

以粗体按钮为例：

```
<div class="goBold button">B</div>
<input type="text" name="txtMessage" />
<script>
$(".goBold").click(function() {
    formatText("bold");
});

function formatText(formatType)
{
    var input = $("#txtMessage");
    var text = input.val();
    var ss = input[0].selectionStart;
    var se = input[0].selectionEnd;

    if (formatType == "bold")
    {
        if (ss == se)
        {
            // there's no text in the textbox, so just write in the tags
            input.val(text + "[b][/b]");
        }
        else
        {
            // surround the highlighted text with the tags
            input.val(text.substr(0, ss) + "[b]" + text.substr(ss, se) + "[/b]" + text.substring(se, text.length));
        }
    }
}
</script> 
```

虽然所有这些都有效，但有一个小问题：

让我们假设这个文本框的文本值为

> 敏捷的红狐跳过懒惰的棕色狗。这是英语中唯一使用所有 26 个字母的句子

突出显示单词`all 26 letters`后，单击粗体按钮会将文本包装在标签中，但它还会添加选择后存在的文本的第二个副本。

我不确定这是为什么，有人可以在这里提供任何见解吗？

蒂亚:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:04:24.100

substr 需要两个参数 - start 和**length**。您使用第二个参数作为结束位置而不是长度。

```
text.substr(0, ss) + "[b]" + text.substr(ss, se-ss) + "[/b]" + text.substring(se) 
```

上面的代码将正确定位 [b] 标签。

或者，substring（而不是 substr）采用 start 和 end 参数而不是 start 和 length

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T12:03:47.687

你应该`substring`在任何地方使用：

```
input.val(text.substring(0, ss) + 
          "[b]" + text.substring(ss, se) + "[/b]" + 
          text.substring(se, text.length)); 
```

（顺便说一句，您的选择器应该是`$("input[name=txtMessage]")`- 它没有 id）。

# android - 如何在 Galaxy Nexus10 模拟器中启用 DayDream 功能？

> ID：13604447
> 
> 赞同：2
> 
> 时间：2012-11-28T11:52:14.473
> 
> 标签：android, android-emulator, android-4.2-jelly-bean

我使用最新的 ADT(21) 和 SDK 工具为 Nexus 10 制作了 android 模拟器。

我知道在 Android JellyBean 4.2 中有一个名为 DayDream 的新功能。我想在我拥有的 Nexus10 模拟器中访问它。但不知道如何。

我没有在里面选择**Daydream**`Settings -> Display`。

**如何在模拟器中启用和使用它？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T12:53:54.377

这是我需要做的：

**第一步：**启动设置应用程序，滚动到底部，然后点击关于手机。

**第二步：**屏幕中间是安卓版本的列表。点击这个项目，直到你看到一个果冻豆出现在你的屏幕上。然后，您可以点击并按住巨型果冻豆，直到您的设备振动。然后，您应该会看到交互式 bean 漂浮在整个屏幕上。是的，你可以扔掉它们。来吧，试试看。

**第三步：**完成后，BeanFlinger Daydream 将被解锁。您可以通过转至设置 > 显示 > Daydream 找到 Daydream 选项。

希望它对所有面临同样问题的用户有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-27T06:39:13.420

我也有同样的问题，我之前做的是4.2.1版本的模拟器。我将其更改为 4.3，现在它对我有用。

# php - Yii：每次用户登录时都会重置returnurl

> ID：13604448
> 
> 赞同：1
> 
> 时间：2012-11-28T11:52:16.863
> 
> 标签：php, session, yii

我在用着

```
Yii::app()->user->setReturnUrl($url); 
```

设置返回 url 并在用户成功登录后设置。

但是当会话超时并且用户重新登录时，它不会获取先前设置的 URL。我通过使用获取 URL

```
$returnurl = Yii::app()->user->getReturnUrl(); 
```

但它返回的不是设置的默认 URL。

似乎每次用户登录时returnurl都会完全重置。

有什么我想念的吗？

Yii 框架：1.1.10

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T19:12:07.943

我建议阅读这个[问题](https://stackoverflow.com/questions/13270875/using-yii-returnurl-on-nginx-server/14913929 "问题")的答案，实际问题是 getReturnUrl() 将 returnUrl 设置为默认值，因此您应该在需要登录的每个操作之前手动设置 returnUrl 并且您应该通过扩展 CWebUser 并覆盖 loginRequired 函数来做到这一点。

# android - Android 自定义字体

> ID：13604450
> 
> 赞同：1
> 
> 时间：2012-11-28T11:52:29.627
> 
> 标签：android, typeface

嗨，我`Typeface`在我的应用程序中使用自定义，代码如下：

```
public Typeface font;
//Activity on create:
 font = Typeface.createFromAsset(getAssets(),"DINOT-Medium.otf");

TextView tv = (TextView)vi.findViewById(R.id.textView1);
tv.setTypeface(font); 
```

问题是一段时间后它会出现问题：无法再阅读文本，只能看到正方形。你知道为什么会这样吗？如何修复？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T12:12:29.567

像这样创建自定义`TextView`：

```
public class DINOTMediumTextView extends TextView {

    public DINOTMediumTextView(Context context) {
        super(context);
        setCustomFont(context);
    }

    public DINOTMediumTextView(Context context, AttributeSet attrs) {
        super(context, attrs);
        setCustomFont(context);
    }

    public DINOTMediumTextView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        setCustomFont(context);
    }

    private void setCustomFont(Context context) {
        Typeface tf = Typeface.createFromAsset(context.getAssets(), "fonts/DINOT-Medium.otf");
        setTypeface(tf);
    }
} 
```

将字体文件放入`assets/fonts/`（**在资产文件夹中创建一个文件夹**）

然后在您的布局 xml 中：

```
<com.yourapp.views.DINOTMediumTextView 
   android:id="blabla"
   android:layout_width="match_parent"
   android:layout_height="wrap_content" /> 
```

`com.yourapp.views`是包含您的`DINOTMediumTextView`类的包的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T11:56:52.270

在 Mobiletuts+ 上有非常好的 Android 文本格式教程。快速提示：[自定义 Android 字体](http://mobile.tutsplus.com/tutorials/android/customize-android-fonts/)

编辑：现在自己测试了。这是解决方案。您可以使用名为 fonts 的子文件夹，但它必须位于 assets 文件夹而不是 res 文件夹中。所以

```
assets/fonts 
```

还要确保字体结尾我的意思是字体文件本身的结尾都是小写的。换句话说，它不应该是 myFont.TTF 而是 myFont.ttf

# wix - 如果文件版本发生变化，安排重新启动

> ID：13604451
> 
> 赞同：3
> 
> 时间：2012-11-28T11:52:31.413
> 
> 标签：wix, windows-installer, wix3.5

我有一个安装驱动程序的 MSI 软件包，但是卸载驱动程序需要重新启动。我为此安排了一个标准自定义操作（`scheduleReboot`）之后`InstallFinilize`，效果很好。

现在，我只想在替换“驱动程序”文件时安排重启。有没有办法确定“已安装的文件版本”和“要安装的文件版本”并基于同情心，如果有变化，安排重启。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T23:18:22.763

在某些情况下，Windows Installer 可以确定是否需要[重新启动系统](http://msdn.microsoft.com/En-US/Library/Windows/Desktop/10117d2c-c2c8-456f-9fce-a89c2d69d3c1)。例如，[ScheduleReboot 操作](http://msdn.microsoft.com/En-US/Library/Windows/Desktop/36f24f57-f1f0-4eca-9b6d-1b25fb73fa96)可用于强制安装程序在安装需要重新启动的驱动程序后提示重新启动。如果安装程序尝试替换正在使用的文件，即使没有使用 ScheduleReboot，它也会自动提示用户重新启动。ForceReboot[操作](http://msdn.microsoft.com/En-US/Library/Windows/Desktop/e1bcdd59-8cbc-46f7-b908-c8cbc2ea0539)必须始终与条件语句一起使用，以便安装程序仅在必要时触发重新启动。例如，可能仅在替换特定文件或安装特定组件时才需要重新启动。

每个产品安装都是唯一的，可能需要自定义操作来确定是否需要重新启动。Windows 安装程序数据库中有一些表格，您可以使用这些表格[搜索现有应用程序、文件、注册表条目或 .ini 文件条目](http://msdn.microsoft.com/En-US/Library/Windows/Desktop/a78ca652-c730-4231-80f2-60cf0bad5b02)并设置属性。

注意：当[替换现有文件](http://msdn.microsoft.com/En-US/Library/Windows/Desktop/8be734c7-4f16-4f54-93db-bb8efb1ea6da)时，Windows Installer 会在尝试安装任何组件的文件之前确定组件的密钥文件是否已经安装。如果安装程序在目标位置找到与安装的组件的密钥文件同名的文件，它会比较两个密钥文件的版本、日期和语言，并使用文件版本控制规则来确定是否安装由包裹。如果安装程序根据密钥文件确定需要替换组件，则它使用每个已安装文件的文件版本控制规则来确定是否替换文件。

# php - ZF - 检查请求是否从另一个动作转发

> ID：13604458
> 
> 赞同：1
> 
> 时间：2012-11-28T11:52:43.823
> 
> 标签：php, zend-framework, zend-controller

我正在使用 Zend Framework 并提出将请求转发到同一控制器中的另一个操作的情况。

> 我将请求从*create*转发到*save*。我想要做的是检查（从saveAction）请求是转发还是直接请求（不使用任何额外的变量或参数）

`init()`每次转发都会触发两次功能（一次用于*创建*，一次用于*保存*），最好也检查一下`init()`。

```
class Cms_UserController extends Zend_Controller_Action {

    public function init() {
        parent::init();

        // some code here
    }

    public function createAction() {

        if (!$this->getRequest()->isPost()) {
            // forwarding to cms/user/save
            return $this->_forward('save');
        }

        // do some stuff for POST request
    }

    public function saveAction() {
        // I want to check whether the request is
        // forwarded from 'createAction' or from any action
        // or a direct request to cms/user/save
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T12:42:39.627

希望对你有帮助：

```
public function lastAction(){
    $request=$this->getRequest()->getParams();
    $request['action']; //you can get corresponding actions here
}
public function testAction(){
    return $this->_forward('last');
} 
```

# java - Spring AMQP - 重复消息

> ID：13604469
> 
> 赞同：3
> 
> 时间：2012-11-28T11:53:33.567
> 
> 标签：java, rabbitmq, amqp, spring-amqp

我正在处理一个大容量流 ~ 每秒 500+ 条消息，使用具有 10 个并发消费者的 SimpleMessageListenerContainer 从 Spring AMQP+Rabbit 消耗数据，我必须每 15 分钟对 Db 进行一些检查并重新加载某些属性以进行处理，这是通过石英触发器完成的，该触发器每 15 分钟触发一次，停止 SimplelistenerContainer，完成必要的工作并再次启动 Container。

当应用程序启动时一切正常，当触发器触发并且容器重新启动时，我看到多次传递相同的消息，这会导致很多重复。消费者没有抛出任何异常。

**消息监听器**

```
 class RoundRobinQueueListener implements MessageListener {

@Override
public void onMessage(Message message) { //do processing
     }

  } 
```

**在应用启动期间设置并行消费者并启动消费者**

```
final SimpleMessageListenerContainer messageListenerContainer = new SimpleMessageListenerContainer(connectionFactory);
       RoundRobinQueueListener roundRobinListener = RoundRobinQueueListener.class.newInstance();
        messageListenerContainer.setQueueNames(queueName);
        messageListenerContainer.setMessageListener(roundRobinListener);
        messageListenerContainer.setConcurrentConsumers(10);
        messageListenerContainer.setChannelTransacted(true); 
```

**石英触发器**

```
 void execute(JobExecutionContext context) throws JobExecutionException {
    messageListenerContainer.stop()
    //Do db task, other processing
    messageListenerContainer.start()
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:04:07.720

看起来您的消息现在已被消费者确认。如果您没有使用自动确认模式，则需要自己确认消息（这也可以在[SimpleMessageListenerContainer](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/jms/listener/AbstractMessageListenerContainer.html)中配置）。否则，代理会假定消息未成功处理并尝试再次传递它。

# jquery - jquery datepicker 到日期

> ID：13604473
> 
> 赞同：0
> 
> 时间：2012-11-28T11:53:58.183
> 
> 标签：jquery, jquery-ui

我正在使用 jquery datepicker [http://jqueryui.com/datepicker/#default](http://jqueryui.com/datepicker/#default)。我必须输入像从和到日期这样的字段。所以迄今为止，起始日期应该作为日期选择器中的最小值出现。

```
<input class="user-reg-input fl" type="text" name="Duration_From[]" id="Duration_From1" value="" maxlength="25" style="width:117px;" />
<input class="user-reg-input fl" type="text" name="Duration_To[]" id="Duration_To1" value="" maxlength="25" style="width:117px;" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:16:32.880

```
$(function() { 
$( "#Duration_From1" ).datepicker({
    showOn: "both",
    buttonImage: CONTEXT_PATH + "/images/icon_calendar.png",
    buttonImageOnly: true,
    minDate: new Date(),
    dateFormat: 'dd/mm/yy',
    onSelect: function(dateText,inst){
        $( "#Duration_To1" ).datepicker("option","minDate",new Date(inst.currentYear,inst.currentMonth,parseInt(inst.currentDay)));
        $( "#Duration_To1" ).val(dateText);
    }
}); 
}); 
```

这是我项目中的一个工作代码片段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T12:14:16.027

You can try [this](http://jsfiddle.net/arunpjohny/sEDXw/).

```
<input class="user-reg-input fl dt-from" type="text" name="Duration_From[]" id="Duration_From1" value="" maxlength="25" style="width:117px;" />
<input class="user-reg-input fl dt-to" type="text" name="Duration_To[]" id="Duration_To1" value="" maxlength="25" style="width:117px;" />

$('.user-reg-input').datepicker();

$('.user-reg-input.dt-from').on('change', function(el){
    console.log($(el.currentTarget).next())
    $(el.currentTarget).next().datepicker('option', 'minDate', $(el.currentTarget).val())
}) 
```

# c++ - 使用 void 指针

> ID：13604474
> 
> 赞同：0
> 
> 时间：2012-11-28T11:54:01.587
> 
> 标签：c++, void-pointers

鉴于以下情况，根据某些条件，我的数据可能属于不同类型。

```
class myClass {
public:
    myclass() {
        if (condition1) {
          bool boolValue = false;
          data = boolValue;
        } else if (condition2) {
          int intValue = 0;
          data = intValue;
        } else if (condition3) {
          unsigned int unsignedIntValue = 0;
          data = unsignedIntValue;
        } else if (condition4) {
          long longValue = 0;
          data = longValue;
        } else if (condition5) {
          double doubleValue = 0.0;
          data = doubleValue;
        } else if (condition6) {
          float floatValue = 0.0;
          data = floatValue;
        } else if (condition7) {
          char *buffer = new char[10];
          data = buffer;
        }
    }

    void* getData() const { return data; }

private:
    void *data;
} 
```

碰巧，我的 void 指针指向的值严格在每个语句中。因此，使用 getData() 返回的内容可能无效。如果我确实得到了数据，那只是因为我指向的内存位置还没有被覆盖。

我想出的解决方案是这样的：

```
class myClass {
public:
    myclass() {
        if (condition1) {
          boolValue = false;
          data = boolValue;
        } else if (condition2) {
          intValue = 0;
          data = intValue;
        } else if (condition3) {
          unsignedIntValue = 0;
          data = unsignedIntValue;
        } else if (condition4) {
          longValue = 0;
          data = longValue;
        } else if (condition5) {
          doubleValue = 0.0;
          data = doubleValue;
        } else if (condition6) {
          floatValue = 0.0;
          data = floatValue;
        } else if (condition7) {
          buffer = new char[10];
          data = buffer;
        }
    }

    void* getData() const { return data; }

private:
    void *data;
    bool boolValue;
    int intValue;
    unsigned int unsignedIntValue;
    long longValue;
    double doubleValue;
    float floatValue;
    char *buffer;
} 
```

我在想必须有一种更优雅的方式来做到这一点。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:14:44.097

您可以使用联合在内存中保存一些位，然后使用指针转换从联合中获取值：

```
#include<iostream>
using namespace std;

class myClass {
public:
    myClass(char *str){
        data.str = str;
    }
    myClass(double d){
        data.d = d;
    }
    myClass(float f){
        data.f = f;
    }

    void *getData() { return (void*)&data; }
private:
    union {
        double d;
        float f;
        char *str;
    } data;
};

int main(){
    myClass c(2.0);
    cout << *(double*)c.getData() << endl;

    myClass f(3.0f);
    cout << *(float*)f.getData() << endl;

    myClass s("test");
    cout << *(char**)s.getData() << endl;

    system("pause");
}

/* prints
2
3
test
*/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T12:29:41.443

如果您在创建对象后不需要更改数据的类型，那么您可以使用模板类：

```
template <typename T>
class myBaseClass {
public:
    // Declare common functions here.
    T getData()
    { return data; }

protected:
    T data;

protected:
    // Disallow constructing instances of this class outside the child classes.
    myBaseClass(T val) : data(val) { }
};

template <typename T>
class myClass: public myBaseClass<T> {
public:
    myClass() : myBaseClass<T>(0) { }
}; 
```

然后你专攻`char*`：

```
template <>
class myClass<char*>: public myBaseClass<char*> {
public:
    myClass() : myBaseClass(new char[10]) { }
}; 
```

然后，您可以像这样创建实例：

```
myClass<int> a;
myClass<float> b;
myClass<char*> c;
// etc.
int i = a.getData();
float f = b.getData();
char* str = c.getData(); 
```

# bash - 如何关闭geany终端

> ID：13604476
> 
> 赞同：5
> 
> 时间：2012-11-28T11:54:15.007
> 
> 标签：bash, ubuntu, geany

每当一个程序在用 geany 执行时完成运行，终端就不会关闭。geany 终端等待按键关闭。如何更改此行为并使其在程序结束时自动关闭？有我可以写的脚本吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T22:51:01.813

这不是一个真正的答案，而更像是一个替代建议。在较新版本的 Geany 中，您可以告诉它在虚拟终端仿真中运行程序，即底部的终端选项卡（设置 -> 终端 -> 在 VTE 中运行程序）。

这样，程序启动得更快（无需先启动终端），您仍然可以看到程序生成的输出（堆栈跟踪异常！），并且焦点/光标也保留在编辑器窗口中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-15T09:36:26.547

我实际上找到了一种在终端中做你想做的事情的方法，而不是使用 Geany 的 VTE。这样做的好处是您可以同时运行多个脚本（或多次运行一个脚本），而 VTE 一次只执行一个脚本（至少对我来说是这样）。

只需转到构建-> 设置构建命令。最后一种选项是“执行命令”。标准选项是`python "%f"`。只需添加`&& exit`使其显示为 `python "%f" && exit`.

这样，如果程序没有给您错误代码，终端窗口将在完成后立即关闭。如果是这样，将显示错误消息并保持窗口打开。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-09T03:25:14.140

pohly 答案的一个变体对我有用：在 Build -> Set Build Commands -> Execute commands 我替换`"./%e"`为`"./%e" && exit`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-02T04:06:08.653

最好这样，让终端停留片刻，以便我们可以看到结果，以防万一

```
python "%f" && sleep 20 && exit 
```

# ruby-on-rails - Ruby/Rails + Resque 抛出“连接超时”错误

> ID：13604487
> 
> 赞同：0
> 
> 时间：2012-11-28T11:54:52.880
> 
> 标签：ruby-on-rails, resque

我有一个使用 Resque 的 Ruby Rails 应用程序。

Resuqe 守护程序在运行一段时间后因错误而崩溃。我的第一个猜测是守护进程访问 MySQL 数据库的频率不够高（几个小时），所以我每 5 分钟触发一次访问数据库的队列项。但我仍然得到：

```
rake aborted!
Connection timed out
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/redis-3.0.2/lib/redis/client.rb:204:in `rescue in io'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/redis-3.0.2/lib/redis/client.rb:202:in `io'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/redis-3.0.2/lib/redis/client.rb:210:in `read'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/redis-3.0.2/lib/redis/client.rb:84:in `block in call'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/redis-3.0.2/lib/redis/client.rb:183:in `block (2 levels) in process'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/redis-3.0.2/lib/redis/client.rb:287:in `ensure_connected'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/redis-3.0.2/lib/redis/client.rb:173:in `block in process'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/redis-3.0.2/lib/redis/client.rb:248:in `logging'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/redis-3.0.2/lib/redis/client.rb:172:in `process'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/redis-3.0.2/lib/redis/client.rb:84:in `call'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/redis-3.0.2/lib/redis.rb:715:in `block in get'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/redis-3.0.2/lib/redis.rb:36:in `block in synchronize'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/redis-3.0.2/lib/redis.rb:36:in `synchronize'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/redis-3.0.2/lib/redis.rb:714:in `get'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/redis-namespace-1.2.1/lib/redis/namespace.rb:257:in `method_missing'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/resque-1.23.0/lib/resque/worker.rb:517:in `job'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/resque-1.23.0/lib/resque/worker.rb:450:in `unregister_worker'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/resque-1.23.0/lib/resque/worker.rb:169:in `rescue in work'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/resque-1.23.0/lib/resque/worker.rb:129:in `work'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/resque-1.23.0/lib/resque/tasks.rb:36:in `block (2 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `eval'
/usr/local/rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `<main>'
Tasks: TOP => resque:work
(See full trace by running task with --trace) 
```

我在我的方法中放置了一些日志文件输出，当触发任何异步任务时会调用该方法，但看起来连接超时是在不执行我的任何应用程序代码时发生的。

然后去哪儿？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T09:45:25.747

根据这里的日志，redis的连接丢失了，不是mysql。

# java - GC 和 FontData 获取字体高度有什么区别？

> ID：13604492
> 
> 赞同：7
> 
> 时间：2012-11-28T11:55:20.010
> 
> 标签：java, fonts, swt, font-size

这解释了字体度量 ![在此处输入图像描述](../Images/a532abdfa07f8675a5c731a1a5c9daf0.png)

我认为我们可以像这样在 SWT 中获得“字体高度”；

```
GC gc = new GC(label);
System.out.println( gc.textExtent(label.getText()) );
System.out.println( label.getFont().getFontData()[0].getHeight() ); 
```

为什么这两个输出不一样？哪一个是正确的字符串高度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T11:58:15.160

`GC#textExtent()`返回以*像素*为单位的范围，`FontData`以字体*点*为单位返回。这里的单位不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T19:40:56.333

用于`FontMetrics.getHeight()`获取以像素为单位的高度。

```
FontMetrics fontMetrics = gc.getFontMetrics() 
```

# visual-c++ - 如何使用 MFC 在 WinCE 6.0 应用程序中生成文本文件？

> ID：13604493
> 
> 赞同：1
> 
> 时间：2012-11-28T11:55:20.667
> 
> 标签：visual-c++, mfc, windows-ce

我正在尝试通过我的代码创建一个文本文件。该文件已创建，但其扩展名不同（不是 .txt）。然后在搜索时我开始知道这可能是因为 MFC 运行时。

我在我的 C:\program Files\Windows CE 工具\SDK 中搜索了 MFC 运行时，但我无法在那里找到 MFC 文件夹。我应该怎么办？我应该从哪里包含 MFC 运行时？

这是我正在使用的文本文件生成代码：

```
 void CFormRight::OnBnClickedButtonTextfile()
 {
    CFile File;
    char cFileAddr[100] = {"My Device\\Label.txt"};
    File.Open((LPCTSTR)cFileAddr, CFile::modeCreate | CFile::typeBinary |CFile::modeWrite | CFile::shareDenyNone);
    File.Write("Hello World", 15);
    File.Close();       
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:01:27.230

如果您只是在寻找 DLL，请尝试在此处查看您的开发机器：

`%PROGRAM_FILES%\Microsoft Visual Studio 9.0\VC\ce\dll`

这为您提供了实际的库。可以通过多种方式将它们包含在 OS 映像中。通常，您会将它们添加到您的平台或项目 BIB 文件中。

尽管如此，我认为这并不能解决您的文件扩展名问题。如果您正在创建一个文件并且它显示出来，只是没有扩展名，那么它与 MFC 是否存在无关，它与您的代码或您确定没有扩展名的方式有关（资源管理器中是否打开了“隐藏文件扩展名”？）。为了解决这个问题，我们需要查看代码。

** 编辑 **

Windows CE 严重偏向 Unicode。几乎所有 Win32 API 都只暴露了 Unicode 变体，因此您的代码也应该倾向于 Unicode，这意味着您传递的最终在 API 调用中传递的字符串应该是 Unicode。

其次，当它抱怨时，你不应该忽略编译器。我敢打赌，您在那里的演员表是由于编译器投诉，这是不正确的。如果您的原始代码是这样的（请注意第一个参数缺少强制转换）：

```
File.Open(cFileAddr, CFile::modeCreate | CFile::typeBinary |
                     CFile::modeWrite | CFile::shareDenyNone); 
```

然后你会得到一个编译器错误：

`error C2664: 'CFile::Open' : cannot convert parameter 1 from 'char [100]' to 'LPCTSTR'`

那是因为在 Windows CE 下，`Open`正在寻找一个宽 (Unicode) 字符串。你有一个 ANSI 字符串。您不能像以前那样通过简单的直接转换将 ANSI 转换为 Unicode。是的，编译器会停止抱怨，但它会产生不良行为。您也可以将 an`int`转换为 a `char[]`，但这并不意味着它适用于 API。

因此，将您的代码更改为使用宽字符串，一切都会正常工作：

```
CFile File;
CFileException ex;
wchar_t cFileAddr[100] = TEXT("My Device\\Label.txt");
if(!File.Open(cFileAddr, CFile::modeCreate | CFile::typeBinary | 
                     CFile::modeWrite | CFile::shareDenyNone))
{
    wchar_t error[1024];
    ex.GetErrorMessage(error, 1024);
    cout << "Error opening file: ";
    cout << error;
    return;
}

File.Write("ID Technologies", 15);
File.Close(); 
```

注意使用`wchar_t`，使用宏进行初始化`TEXT`，以及调用中缺少强制`Open`转换。

**编辑 2**

我在上面的代码中添加了错误处理，但实际上你应该学习[阅读文档](http://msdn.microsoft.com/ja-jp/library/aa522514.aspx)以及如何调试。这是一个非常基本的使用场景，知道如何查找错误至关重要。

# c# - 与 WebProxy 的 Web 服务连接

> ID：13604495
> 
> 赞同：1
> 
> 时间：2012-11-28T11:55:24.833
> 
> 标签：c#, .net, web-services, proxy

我有一个网络服务连接，可以选择添加代理详细信息。这工作正常。但是，当代理不仅是地址，而是带有文件名的地址时，它似乎会失败......例如；

```
myproxy.com/proxypac.asp 
```

最后似乎是这个文件名给我带来了问题。我正在初始化我的 WebProxy；

```
System.Net.WebProxy wp = new System.Net.WebProxy(location.ProxyAddress, location.ProxyPort); 
```

任何人都可以提供任何指示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:06:52.567

你有没有尝试过 ：

```
WebProxy proxy = new WebProxy(@"http://myproxy.com/proxypac.asp"); 
```

或者

```
WebProxy proxy = WebRequest.GetSystemWebProxy(); 
```

一种解决方法是打开您的文件并检查其内容以查看您获得的代理地址和端口。

如果您下载`myproxy.com/proxypac.asp`文件，它应该如下所示：

```
 function FindProxyForURL(url, host) {
      // our local URLs from the domains below example.com don't need a proxy:
      if (shExpMatch(url,"*.example.com/*")) {return "DIRECT";}
      if (shExpMatch(url, "*.example.com:*/*")) {return "DIRECT";}

      // URLs within this network are accessed through 
      // port 8080 on fastproxy.example.com:
      if (isInNet(host, "10.0.0.0",  "255.255.248.0"))    {
         return "PROXY fastproxy.example.com:8080";
      }

      // All other requests go through port 8080 of proxy.example.com.
      // should that fail to respond, go directly to the WWW:
      return "PROXY proxy.example.com:8080; DIRECT";
   } 
```

# python - 长字符串的别名

> ID：13604497
> 
> 赞同：2
> 
> 时间：2012-11-28T11:55:30.243
> 
> 标签：python

> **可能重复：**
> [如何使用 Python 制作唯一的短 URL？](https://stackoverflow.com/questions/1497504/how-to-make-unique-short-url-with-python)

我正在寻找一种方法，将磁盘上文件的路径缩短为固定长度的字符串，以便我可以通过它的绝对路径或通过这个别名来访问它。

我一直在研究使用 UUID 作为具有别名的所有路径的字典的键，但我发现它们太长并且希望它在 5-10 个字符之间。我也一直在研究散列，并考虑将实际路径散列成一些有用的字符串，我可以直接用作别名，然后将值存储在磁盘上的表中。我在散列领域非常新鲜，但据我了解，然后可以通过简单地重新散列路径然后将密钥输入表中来获取密钥，而不需要将它完全加载到内存中。或从磁盘完全读取。

最终目标是，在我的自定义浏览器中，能够使用以下命令指向同一个文件：

```
"/root/folder1/folder2/folder3/file.png" and e.g. "MTEzNDUy" 
```

可能的字典看起来像这样，注意固定长度的键。

```
{"MSFjak5m": "/root/folder1/folder2/file.png",
"sofkAkfg": "/root/file.exe",
"ASg5OFA3": "/root/file2.so",
"fFAgeEGH": "/root/file5.so"} 
```

在磁盘上有一个查找表是可以接受的，但如果我可以简单地将路径压缩成这样的别名，那就更好了。最好的解决方案是让表能够直接使用散列来查找一个值，而不是必须存储键/值对，因为这似乎意味着我会做一个散列来获取别名，然后字典基于该键执行另一个哈希以查找值..如果我错了，请纠正我。

条目数约为 100 000，所有操作最好保留在 Python 下。

谢谢

**编辑**
使用 MD5 哈希编码并使用部分结果作为键执行了一些测试。我发现使用前 4 个字符给我每 600 个条目大约 1 个的碰撞率。使用前 5 个给我的碰撞率为 1/40 000。

这些条目将一次创建一个，在正常操作下以大约 5 个/天的速率创建，在高峰时段的最大速率为 100 个/天，永远不会超过最多 1 000 000 个条目。

考虑到这一点，我很可能会通过将它与已经存储的内容进行比较来检查我得到的哈希的唯一性，然后简单地处理它，A：警告用户无法创建路径并且他必须选择另一个名称，或 B：增加散列中允许的字符数，直到找到唯一的散列。在这一点上，其中任何一个似乎都可以接受。

（旁注，根据存储的哈希表检查哈希是否违背了使用哈希函数的目的？）

Windows 上的测试代码。仅针对文件夹进行测试，我的驱动器上有大约 50 000 个。

```
import hashlib
from random import shuffle

def shuffle_string(word):
    word = list(word)
    shuffle(word)
    return ''.join(word)

tests = 10
chars = 5
_entries = 0
_hashes = {}
for test in xrange(tests):
    for path, _d, _f in os.walk('c:/'):

        unique_path = "%s%i" % (path, test)
        key = hashlib.md5(unique_path).digest().encode('base64').strip()[:chars]
        _hashes[key] = unique_path
        _entries += 1

total_collisions = _entries-len(_hashes)

print "%s Entries \nTests: %s\nChars: %s" % (_entries, tests, chars)
if total_collisions:
    average_collisions = total_collisions / float(tests)
    odds = _entries / float(average_collisions)
    print "%s collisions per %s entries" % (average_collisions, _entries)
    print "odds: 1 in %s" % odds

    if odds: 
        print "chance: %s%%" % (1 / (_entries / float(average_collisions)))
else:
    print "No collisions occured" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:03:04.460

考虑使用[`hashlib`](http://docs.python.org/2/library/hashlib.html)标准模块来计算字符串的哈希并将一对存储`{hash: string}`到您的`dict`.

# c# - 在 asp.net mvc 3 中发布错误消息

> ID：13604501
> 
> 赞同：0
> 
> 时间：2012-11-28T11:55:44.537
> 
> 标签：c#, asp.net-mvc-3, entity-framework

我的 asp.net mvc 应用程序中有这两种操作方法：

```
 public ActionResult Edit(int id)
    {
        cpd_certificates cpd_certificates = db.Certificate.Find(id);

        return View(cpd_certificates);
    }

    //
    // POST: /Home/Edit/5

   [HttpPost]
    public ActionResult Edit(cpd_certificates cpd_certificates)
    {
        if (ModelState.IsValid)
        {
            db.Entry(cpd_certificates).State = EntityState.Modified;
            db.SaveChanges();
            return RedirectToAction("Details");
        }

        return View(cpd_certificates);
    } 
```

这是参数的传递方式：

```
 @Html.ActionLink("Edit", "Edit", new {   id=item.CertificateNo  }) 
```

下面是我的观点的一部分，它调用了上面的这两种方法：

```
@model IEnumerable<onlineCPD.Models.cpd_certificates>
<table>
<tr>
    <th>
        QuizNo
    </th>
    <th>
        Received
    </th>
@foreach (var item in Model) {
<tr>
    <td>
        @Html.DisplayFor(modelItem => item.QuizNo)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.Received)
    </td>
  <td>
        @Html.ActionLink("Edit", "Edit", new {   id=item.CertificateNo  })
</td>
}

</table> 
```

这是我的路线：

```
public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        );

    } 
```

这是我的详细信息方法的部分代码。

```
public ActionResult Details(string sortOrder, string currentFilter, string searchString, int? page, int id)
        {
var certificateDetails = db.Certificate.Where(p => p.ID == id);
 return View(certificateDetails.ToPagedList(pageNumber, pageSize)); 
```

现在，当我单击保存时，出现此错误：

> 参数字典包含方法'System.Web.Mvc.ActionResult Details（System.String，System.String，System.String，System.Nullable'的不可空类型'System.Int32'的参数'id'的空条目1 [System.Int32]，Int32)'在'onlineCPD.Controllers.HomeController'中。可选参数必须是引用类型、可空类型或声明为可选参数。参数名称：参数

我想在我的帖子中传递一个参数，但是我该怎么做，有人可以解释一下，因为我只是在这里没有经验。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T13:32:09.157

你应该修复`Edit`这样的方法：

```
[HttpPost]
public ActionResult Edit(cpd_certificates cpd_certificates)
{
    if (ModelState.IsValid)
    {
        db.Entry(cpd_certificates).State = EntityState.Modified;
        db.SaveChanges();
        return RedirectToAction("Details", new { id = cpd_certificates.id });
    }

    return View(cpd_certificates);
} 
```

在您的操作链接中执行以下操作：

```
 @Html.ActionLink("Edit", "Edit", new {   id=item.QuizNo  }) 
```

或者尝试更改详细信息签名以获得可接受的 id 可为空值，如下所示：

```
Details(string sortOrder, string currentFilter, string searchString, int? page, int? id) 
```

# sql-server-2008 - 横向报告中的页码

> ID：13604502
> 
> 赞同：4
> 
> 时间：2012-11-28T11:55:46.320
> 
> 标签：sql-server-2008, reporting-services, report, ssrs-2008

请考虑此自定义报告：

![报告布局](../Images/799cc6e8fba084cd22ea6936c880eec7.png)

我想在所有页面上自动生成该页码。我有一些横向页面。我想将页码放在页脚中，但是在横向报告中对此有疑问，因为横向报告中的页脚位于页面底部而不是页面右侧，因此我应该将页码放在正文部分。

如何在正文部分放置页码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T11:07:36.853

除非你有创意，否则我认为这是不可能的。

目前手头没有程序，我希望这可以开始一些思考。

尝试在您的数据中添加一个 exrta 列，计算行数，并每隔 x 行强制分页。如果可行，您可以使用一些格式来使其在视觉上正确。

哇祝你好运！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-07T14:21:05.830

这篇文章可能有点用：[确定SSRS中的页码](http://www.easkills.com/ssrs/determinepagenumberinssrs20052008)

> ### 确定 SSRS 中的页码
> 
> 此方法利用 SQL Server 的新排名功能，可用于您的 SQL 报告以确定报告正文中的页码，也可能根据该信息隐藏/显示列。
> 
> 在以下情况下使用此方法：
> 
> 1.  您对页面上显示的记录数有预设限制
> 2.  您有分组，每个组都显示在自己的页面上
> 3.  可以准确计算每页的记录数

[文章](http://www.easkills.com/ssrs/determinepagenumberinssrs20052008)中的解决方案使用了SQL中的Ranking Functions，值得一看，看看它是否适用。

> 所以我提到有 3 个场景可以为你工作。我将举例说明如何做每一个，让你的创造力来做剩下的。这将作为我们的示例销售表：

```
name     sales_amount    group_name  Scenario #1     Scenario #2     Scenario#3
A        10              A1          1               1               1
B        20              A1          1               1               1
C        30              A1          2               1               1
D        30              A2          2               2               1
E        40              A3          3               3               2
F        40              A3          3               3               2
G        50              A4          4               4               2
H        60              A5          4               5               2 
```

* * *

> **场景#1：**
> 
> 您有一个预设的 # 条记录放置在每个页面上：这是您的 SQL 查询的样子：

```
DECLARE @rows_per_page INT
SET @rows_per_page = 2
SELECT
 employee.name
 ,page = (Row_Number() OVER ( ORDER BY employee.sales_amount ) / @rows_per_page)
FROM
 employee 
```

> 然后，在 SSRS 中，您可以在 tablix (SSRS 2008) 中创建父组，并设置选项以中断“组的每个实例之间”。（SSRS 2008 中的分页符选项卡）

* * *

> **场景#2：**
> 
> 您有分组，每个组都显示在自己的页面上

```
SELECT
 employee.name
 ,page = Dense_Rank() OVER ( ORDER BY employee.group_name )
FROM
 employee 
```

> 在您的 SSRS 报告中，在表/矩阵/tablix 的组属性上，设置选项以中断“组的每个实例之间”。（SSRS 2008 中的分页符选项卡）

* * *

> **场景#3：**
> 
> 您可以准确计算每页上的记录数如果您可以准确计算每页上的记录数，那么使用与＃1类似的方法将变得很容易。在示例中，该数字是每页 4 条记录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T21:16:00.600

**使用此：** [在 SSRS 中访问报表正文中的页码](https://stackoverflow.com/questions/4758793/access-page-number-in-report-body-ssrs)

**或者这个：** [http ://social.msdn.microsoft.com/forums/en-US/tfsreporting/thread/b901c9b4-320e-4fbc-afa9-495d5566c168/](http://social.msdn.microsoft.com/forums/en-US/tfsreporting/thread/b901c9b4-320e-4fbc-afa9-495d5566c168/)

您只需要为报告创建自定义代码，然后在您想要的位置引用该代码（从第二个链接引用）：

在“数据”或“布局”选项卡视图处于活动状态时，选择“报告”->“报告属性” 在“报告属性”对话框中选择“代码”选项卡 在“自定义代码：”中添加新函数以获取页码：

```
Public Function PageNumber() as String
     Dim str as String
     str = Me.Report.Globals!PageNumber.ToString()
     Return str
End Function

Public Function TotalPages() as String
     Dim str as String
     str = Me.Report.Globals!TotalPages.ToString()
     Return str
End Function 
```

像这样使用它：

```
="Page " + Code.PageNumber() + " of " + Code.TotalPages() 
```

# iphone - UINavigation 视图和 UITabbar 视图在 iOS6 中的颠倒方向不起作用？

> ID：13604503
> 
> 赞同：16
> 
> 时间：2012-11-28T11:55:50.057
> 
> 标签：iphone, uinavigationcontroller, ios6, uiinterfaceorientation

我在 ios 6 中创建了一个带有导航视图的应用程序。我还在应用程序摘要中设置了所有方向选项，甚至使用了

```
 -(BOOL) shouldAutoRotate 
```

和

```
-(NSUInteger) supportedInterfaceOrientaion 
```

我的视图控制器中的方法。当我运行我的应用程序时，方向工作正常，除了颠倒。我应该怎么做才能支持颠倒。

添加 UITabBar 控制器时，我也面临同样的问题。

请分享你的想法。

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-17T05:46:14.940

海我找到了解决我的问题的方法

**解决方案：** 对于包含 UINavigation 控制器的应用程序，我只是为 UINavigation 控制器类创建了一个类别，并定义了这些方法

```
-(BOOL) shouldAutorotate{
    return YES;
}

-(NSUInteger) supportedInterfaceOrientations{

    return UIInterfaceOrientationMaskAll;
} 
```

添加后，我的应用程序支持所有方向。

同样，我也为 UITabBar 控制器做了。通过为 UITabBar 控制器创建类别，这也对我有用。

谢谢你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T12:08:56.957

电话应用程序传统上不支持倒置（为什么要将手机倒置？） - 默认项目将支持纵向和横向选项，但不支持倒置。

在 Xcode 的项目信息查看器中更改它，你应该没问题。有支持的方向的可视化表示，倒置将被取消选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-16T17:15:54.013

我认为 NSUserDefault 的解决方案是不完整的：

来自：[https ://developer.apple.com/library/ios/qa/qa1688/_index.html](https://developer.apple.com/library/ios/qa/qa1688/_index.html)

> 注意：在修改 UIKit 类（如 UINavigationController）的旋转行为时，您应该始终喜欢子类化而不是类别。因为其他类可能依赖于 UIKit 容器视图控制器的现有行为，一个类别引入的更改可能会导致意外行为。

所以我认为最好的解决方案是创建一个子类并添加：

```
-(BOOL) shouldAutorotate{
     return YES;
}

-(NSUInteger) supportedInterfaceOrientations{

     return UIInterfaceOrientationMaskAll;
} 
```

# android - 显示 ActionBarSherlock SearchView 始终展开

> ID：13604506
> 
> 赞同：7
> 
> 时间：2012-11-28T11:55:58.017
> 
> 标签：android, actionbarsherlock, searchview

我需要显示 SearchView 始终展开并在 ActionBar 中再显示一个按钮，以便用户快速访问 Search Activity 中的搜索字符串。
我的活动有这个菜单布局：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/action_search"
        android:title="@string/action_search"
        android:icon="@drawable/ic_action_search"
        android:showAsAction="always"
        android:actionViewClass="com.actionbarsherlock.widget.SearchView"/>
    <item android:id="@+id/action_configure"
        android:title="@string/action_configure"
        android:icon="@android:drawable/ic_menu_preferences"
        android:showAsAction="always" />
</menu> 
```

在 Search 活动类中，我将 ActionBar 配置如下：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getSupportMenuInflater().inflate(R.menu.search, menu);
    SearchManager searchManager = (SearchManager) getSystemService(Context.SEARCH_SERVICE);
    SearchView searchView = (SearchView)menu.findItem(R.id.action_search).getActionView();
    searchView.setSearchableInfo(searchManager.getSearchableInfo(getComponentName()));
    searchView.setIconifiedByDefault(false);
    searchView.setSubmitButtonEnabled(false);
return true;
} 
```

问题是，如果我这样做，`searchView.setIconifiedByDefault(false);`我会看到这张照片：
![在此处输入图像描述](../Images/3c3bd7880953534dedbc09052db52b45.png)

您会注意到没有第二个菜单项。在这里，如果我设置 android:showAsAction="always|collapseActionView"，它会默认折叠，但我现在可以看到第二项：
![在此处输入图像描述](../Images/f3694fd71460317ecf5fd28eaaf2f69a.png)
在上图中，我已经按下了搜索图标

有两个问题我想不通：

1.  如何**始终**显示两个元素：扩展搜索视图和配置操作图标？
2.  如何摆脱这个丑陋的第二个搜索图标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-20T16:37:49.080

我设法通过使用来解决这个问题

```
mySearchView.setIconfied(false); 
```

而不是 setIconifiedByDefault()

PS我正在使用android.support.v7.widget.SearchView

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-15T16:40:51.507

这是我隐藏内部搜索图标的解决方案。

在您管理主题的 styles.xml 中，将以下内容添加到 application_theme 部分（通常在 base_theme 下方）

```
<!--Application Theme-->
<style name="application_theme" parent="application_base_theme">
    <item name="searchViewSearchIcon">@android:color/transparent</item>
    <item name="searchViewCloseIcon">@android:color/transparent</item>
</style> 
```

这会强制操作栏搜索小部件中出现的所有搜索图标都是透明且不可见的。

不过，它们仍会占用文本字段中的空间，在图标曾经所在的左侧创建一个不可见的边距。如果要解决此问题，则必须改为使用自己的类扩展 com.actionbarsherlock.widget.SearchView 并添加以下内容：

```
ImageView searchHintIcon = (ImageView) findViewById(R.id.abs__search_mag_icon);
searchHintIcon.setVisibility(View.GONE); 
```

我会将它添加到构造函数中，但也会覆盖 setIconified 和 setIconifiedByDefault 并将其包含在其中。这将强制它在您展开操作视图时隐藏图标。

要在操作栏中显示其他图标，请尝试设置：

```
android:showAsAction="collapseActionView|ifRoom" 
```

当操作栏中有足够的空间时，这应该会导致搜索栏扩展，而不是完全迫使它们离开栏。

高温高压

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-08T04:57:31.743

我解决两个元素显示的方法是为 SearchView 设置一个特定的宽度。

```
FrameLayout.LayoutParams lp = new FrameLayout.LayoutParams(350, FrameLayout.LayoutParams.WRAP_CONTENT);
searchView.setLayoutParams(lp); 
```

我正在使用的代码是：

**res/menu/main.xml**

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
    <item
        android:id="@+id/search"
        android:actionViewClass="com.actionbarsherlock.widget.SearchView"
        android:showAsAction="always"
        android:title="@string/action_search"/>
    <item
        android:id="@+id/settings"
        android:showAsAction="ifRoom"
        android:onClick="startSettingsActivity"
        android:title="@string/action_settings"/>
</menu> 
```

在我的**活动中**

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getSupportMenuInflater().inflate(R.menu.main, menu);
    MenuItem searchViewItem = menu.findItem(R.id.search);
    SearchView searchView = (SearchView) searchViewItem.getActionView();
    FrameLayout.LayoutParams lp = new FrameLayout.LayoutParams(350, FrameLayout.LayoutParams.WRAP_CONTENT);
    searchView.setLayoutParams(lp);

    searchView.setIconifiedByDefault(false);
    searchView.setSubmitButtonEnabled(false);

    return true;
}

public void startQuickSearchActivity(MenuItem menuItem){
    startActivity(new Intent(this, QuickSearchActivity_.class));
} 
```

# c# - 使用 Newtonsoft 解析 JSON

> ID：13604507
> 
> 赞同：1
> 
> 时间：2012-11-28T11:56:04.627
> 
> 标签：c#, json, json.net

问题是 JSON 格式如下：

```
{"think":{"median":1.24531,"test":6.2342}} 
```

这就是服务器输出的样子，当我尝试解析它时，我得到错误，因为值不在引号内。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:02:18.500

它们是*双打*的，不应该在引号内。这有效：

```
var str = @"{""think"":{""median"":1.24531,""test"":6.2342}}";
dynamic dyn = JsonConvert.DeserializeObject(str);
Console.WriteLine((double)dyn.think.median); 
```

# c++ - 找到与给定 3D 线正交的距离为 d 的点

> ID：13604514
> 
> 赞同：2
> 
> 时间：2012-11-28T11:56:29.557
> 
> 标签：c++, math, vector, 3d, geometry

> 我想找到远离已知距离（比如 d）的点（比如 P）的坐标。情况是：我想要位于一条线 (3d) 上的点，该线垂直于另一个给定线段 (3d) 并穿过该给定线段的一端（比如 A）。因此，我知道给定线段的 2 个端点（也是沿线的向量）以及距离 d 和垂直线的向量。垂线通过的点 C 也是已知的。我正在`vector3`上课和 line3 课。

解决这个问题的方法很难弄清楚，所以请在这方面帮助我。

是的，因为那条线上有 2 个点在相反方向，我正在寻找点 (P)，它更接近点 C（而不是 Q）。

先感谢您

![在此处输入图像描述](../Images/03b0a338bf9a187082e4a963cf6d2f8b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T12:35:49.870

找到方向向量，然后将其乘以`d`然后添加到起点：

```
Vector A, C;
float d = 100;

Vector dir = C - A;
dir.normalize();
dir *= d;
Vector P = A + dir; 
```

# php - 带有 PHP 5.4 的 APC

> ID：13604515
> 
> 赞同：0
> 
> 时间：2012-11-28T11:56:30.323
> 
> 标签：php, centos, apc

我在使用`APC`with 时遇到了一些问题`PHP`。我已经安装`PHP 5.4.9`在我的`CentOS 5.5`服务器机器上。之后使用`pecl`我安装了`APC 3.1.9`. 然后`apc.ini`进行了配置，之后，我尝试了加载`php -m`哪些列表模块。`apc`

为了检查 apc 配置，我还尝试`php -r "phpinfo();"|grep apc`了生成和输出如下

```
 Additional .ini files parsed => /etc/php.d/apc.ini,
apc
apc.cache_by_default => On => On
apc.canonicalize => On => On
apc.coredump_unmap => Off => Off
apc.enable_cli => Off => Off
apc.enabled => On => On
apc.file_md5 => Off => Off
apc.file_update_protection => 2 => 2
apc.filters => no value => no value
apc.gc_ttl => 3600 => 3600
apc.include_once_override => Off => Off
apc.lazy_classes => Off => Off
apc.lazy_functions => Off => Off
apc.max_file_size => 10M => 10M
apc.mmap_file_mask => no value => no value
apc.num_files_hint => 1000 => 1000
apc.preload_path => no value => no value
apc.report_autofilter => Off => Off
apc.rfc1867 => Off => Off
apc.rfc1867_freq => 0 => 0
apc.rfc1867_name => APC_UPLOAD_PROGRESS => APC_UPLOAD_PROGRESS
apc.rfc1867_prefix => upload_ => upload_
apc.rfc1867_ttl => 3600 => 3600
apc.serializer => default => default
apc.shm_segments => 1 => 1
apc.shm_size => 64M => 64M
apc.shm_strings_buffer => 4M => 4M
apc.slam_defense => On => On
apc.stat => On => On
apc.stat_ctime => Off => Off
apc.ttl => 0 => 0
apc.use_request_time => On => On
apc.user_entries_hint => 4096 => 4096
apc.user_ttl => 0 => 0
apc.write_lock => On => On 
```

我在下面的代码中尝试使用`apc_store,apc_fetch`etc

```
<?php
error_reporting(E_ALL);
ini_set('display_errors','true');
flush();
//phpinfo();
echo "Stored in APC";
apc_store('KEY_a','data-stored',0);
$data = apc_fetch('a',$stats);
echo "Retreivin data: $data status:($stats)"
?> 
```

这给我一个错误：`Fatal error: Call to undefined function apc_store() in /usr/local/apache2/htdocs/test.php on line 7`

这就是我所做的一切，有人发现我所做的有什么问题吗？我怎样才能让这个东西正常工作。？我尝试了许多解决方案，包括重新安装。受够了尝试。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T19:08:01.933

您是否在**命令行或浏览器**中运行了测试？

如果它在命令行中，它将无法工作，因为它已关闭。

```
apc.enable_cli => Off 
```

如果您在**浏览器**上运行测试，请检查`phpinfo`浏览器并检查其配置是否正确。

# android - 4.0.3 r3 的sources.zip

> ID：13604521
> 
> 赞同：2
> 
> 时间：2012-11-28T11:56:46.300
> 
> 标签：android

我正在尝试获取 android 版本 4.0.3 的 sources.zip。我下载`com.android.ide.eclipse.source_16.0.0.201112171909` 了其中包含`3, 4, 5, 6, 7, 8, 9, 10, 14`

我在找 15 所以我可以把它放进`sources.zip`去`C:\Program Files (x86)\Android\android-sdk\platforms\android-15`

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T12:06:13.157

我不太清楚你的问题，但你可以从[谷歌源代码中获取所有源代码](http://grepcode.com/project/repository.grepcode.com/java/ext/com.google.android/android/)

对于您的特定源代码，`4.0.3 r3`您可以从[4.0.3 r3 源代码下载](http://grepcode.com/snapshot/repository.grepcode.com/java/ext/com.google.android/android/4.0.3_r1/)

**编辑：**

你只需要从我给你的第二个链接下载源文件夹。

**`android-4.0.3_r1-sources.jar`**你会得到像下载它这样的jar文件

将其放在 Android-15 文件夹中。

现在，当您在“活动”上按 F3 时，您将显示**`Activity.class`**文件以及**`Attach Source Code`**通过单击它的按钮，您将要求输入 jar 文件的路径。把路径放在这里，就是`../android-15-->android-4.0.3_r1-sources.jar`这样。之后，您将看到 Activity 类的内部编码。

**还要确保您放置与应用程序目标版本相同版本的 Jar 文件**

希望它会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T12:05:31.917

在你的 Eclipse 中打开 Android SDK Manager，你可以在那里下载 15 个版本。

# ios - 如何为图像添加渐变？

> ID：13604525
> 
> 赞同：-2
> 
> 时间：2012-11-28T11:56:50.557
> 
> 标签：ios, uitableview, uiimageview

我正在从网络 (last.fm) 中检索图像，并将它们用作 iOS 应用程序中视图的背景。

如何为这些图像添加渐变，使它们从上到下逐渐变暗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T13:29:56.127

您可以`CAGradientLayer`将此效果用作图像视图的子层，其中包含您为每个轨道下载的图像。这样，您只需处理一次效果，而不是每次图像更改时。

```
#import <QuartzCore/CAGradientLayer.h>

CAGradientLayer *gradient = [CAGradientLayer layer];
[gradient setFrame:myImageView.bounds];
[gradient setColors:[NSArray arrayWithObjects:
                     (id)[[UIColor colorWithRed:0.0f green:0.0f blue:0.0f alpha:0.8f] CGColor],
                     (id)[[UIColor clearColor] CGColor],
                     (id)[[UIColor colorWithRed:0.0f green:0.0f blue:0.0f alpha:0.8f] CGColor],
                     nil]];
[[myImageView layer] addSublayer:gradient]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-28T11:58:54.533

只需使用图像编辑器为您的图像添加渐变

![Photoshop](../Images/24cf2b9866b6f4cc4d50d7e25b4932d4.png)

# css - CSS !important 对 XUL 元素没有影响

> ID：13604528
> 
> 赞同：2
> 
> 时间：2012-11-28T11:56:54.373
> 
> 标签：css, xul

我正在为 Intranet 应用程序使用 XUL 进行试验。

我遇到了一个 CSS 问题，样式中的 where 和 !important 指令对类为“error”的文本框元素没有任何影响。

```
textbox.error {
background-color: #F00 !important;
} 
```

仅当我添加 -moz-appearance: none; 它开始工作，但它丢失了该元素的所有样式。

有没有办法只重载 background-color 属性（在这种情况下）？

我希望我的应用程序具有原生外观，所以这是非常不理想的。

谢谢

- 编辑 -

这是 XUL 结构：

```
<?xml version="1.0"?>
<?xml-stylesheet href="/_backend/views/css/xul.css" type="text/css"?>

<window
id="workorders-edit-window"
title="{$title}"
orient="horizontal"
width="500"
height="400"
xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

<vbox flex="1" orient="vertical">

    <groupbox>
        <caption label="Osnovne informacije"/>

        <hbox flex="5">
            <vbox>
                <label control="ref" value="Št. delovnega naloga"/>
                <textbox id="ref" size="10" value="" class="error"/>
            </vbox>
        </hbox>

    </groupbox>

</vbox>

</window> 
```

和CSS：

```
@import url(chrome://global/skin/);

textbox.error {
background-color: #F00;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T18:22:08.060

不幸的是，这就是系统的工作方式。如果您想要原生样式，那么系统将设置许多属性 - 您不能覆盖这些属性。如果您通过禁用本机样式，`-moz-appearance: none`那么您将必须定义通常开箱即用的所有属性。

但是，有时您可以通过使用其他 CSS 属性来实现所需的效果，这些属性不是由本机样式确定的。我自己并没有想出解决方案，而是查找了[findbar 代码](http://hg.mozilla.org/mozilla-central/file/6c23f41b0747/toolkit/themes/winstripe/global/findBar.css#l104)在做什么。事实证明，该[`box-shadow`属性](https://developer.mozilla.org/en-US/docs/CSS/box-shadow)可以在这里使用：

```
textbox.error {
  box-shadow: 0 0 0 1em #f00 inset;
} 
```

# c# - 禁用自定义控件中滚动条的焦点

> ID：13604529
> 
> 赞同：0
> 
> 时间：2012-11-28T11:56:54.943
> 
> 标签：c#, winforms, focus, scrollbar

我在 Windows 窗体中编写了一个自定义控件。我动态创建一个垂直滚动条并捕捉其值的变化。

目前，滚动条是唯一可以获取焦点的控件，所以我的控件充当面板：它将焦点转移到滚动条。当用户使用滚动条时，所有进一步的键盘事件都被传递给它，而不是控制本身。

我希望完全禁用滚动条的焦点并在控件本身中实现适当的行为（例如向上翻页、向下翻页、主页、结束等）。我找到了一个名为“CanFocus”的属性，但不幸的是它是只读的。

如何禁用滚动条的聚焦功能？我知道，我可以实现 Focus 事件并将焦点手动转移到控件，但也许 WF 库中有现成的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T10:21:23.863

感谢 Łukasz O. 的帮助。

解决方案：

```
public class MyVScrollBar : VScrollBar
{
    public MyVScrollBar()
    {
        SetStyle(ControlStyles.Selectable, false);
    }
} 
```

* * *

```
public partial class UserControl1 : UserControl
{
    protected override void OnKeyDown(KeyEventArgs e)
    {
        MessageBox.Show("KeyDown: " + e.KeyCode.ToString());
        base.OnKeyDown(e);
    }

    protected override bool IsInputKey(Keys keyData)
    {
        if (keyData == Keys.Up || keyData == Keys.Down || keyData == Keys.Left || keyData == Keys.Right)
            return true;
        else
            return base.IsInputKey(keyData);
    }

    public UserControl1()
    {
        SetStyle(ControlStyles.Selectable, true);

        InitializeComponent();
    }

} 
```

# wordpress - 如何在 wordpress 中创建问答面板？

> ID：13604530
> 
> 赞同：0
> 
> 时间：2012-11-28T11:56:57.073
> 
> 标签：wordpress

我是 wordpress 的新手，我正在解决我应该采用哪种方式。

我有一个 wordpress 网站，其中必须存储一些问题，这些问题将来自另一个网站的`GET`方法。

1.  问题应存储在数据库表中。
2.  我可以从管理面板访问问题
3.  我可以回答问题，答案将存储在数据库表中
4.  答案也应该在`GET`方法中发送到另一个网站

我如何做到这一点？我发现`custom_post_type`了很多其他的东西。但我正在修复如何逐步接近。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:19:59.277

我建议您研究以下文档并继续针对您实际遇到问题的每个步骤提出不同的问题。

*   [HTTP API](http://codex.wordpress.org/HTTP_API)
*   [XML-RPC 支持](http://codex.wordpress.org/XML-RPC_Support)
*   [通过电子邮件发布](http://codex.wordpress.org/Post_to_your_blog_using_email)

# azure - Vault 后面的 Windows Server 2008 R2 的服务总线 1.0

> ID：13604532
> 
> 赞同：0
> 
> 时间：2012-11-28T11:57:04.107
> 
> 标签：azure, servicebus

我正在开发 Service Bus 1.0 消息传递组件。为此，我使用的是使用 Vault 隔离的本地 Windows Server 2008 R2（之后称为 WS2008R2）机器，并且我的笔记本电脑连接到此 Vault。我可以 ping WS2008R2 机器并且能够执行 RDP。WS2008R2 机器与我的笔记本电脑不在同一个域中。WS2008R2 使用代理服务器连接到互联网，并且网站访问限制到位。

首先，我正在执行[此处](http://www.darkside.co.za/archive/2012/11/18/connect-service-bus-windows-remote-machine.aspx)提供的服务总线 1.0 示例代码。我的问题是带下划线的代码抛出异常：

```
//Set up the queue
QueueDescription queue;
if (namespaceManager.QueueExists(QueueName)) 
```

---------------------异常日志---------

System.UnauthorizedAccessException 未处理 HResult=-2147024891 消息=令牌提供程序在访问“https://machine.domain:9355/ServiceBusDefaultNamespace/$STS/OAuth/”时无法提供安全令牌。令牌提供者返回消息：'

* * *

以下 HTML 是从上述异常生成的。上述异常返回 html 内容。

该页面无法显示

根据您的公司访问策略，访问此网站 ([https//] machine.domain /) 已被阻止。

如果您有任何疑问，请联系您的公司网络管理员并提供如下所示的代码。

**通知代码：**

```
(1, POLICY, BLOCK-CONNECT, 0x04124770, 1354100172.373, QAAAAAAAAAAAAAAAyf8AAf8AAAD/AAAAAAAAAAAAAAA=,(https//)machine.domain/) 
```

我无法解决此问题。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T00:27:13.530

当网关进程无法为令牌中的用户获取令牌时，将返回该错误。当网关运行的帐户（默认情况下，运行安装程序的用户）与调用者位于不同的域时，通常会出现这种情况。

您能检查一下您使用哪些凭据在此行上创建令牌提供程序吗？

```
var tokenProvider = TokenProvider.CreateOAuthTokenProvider(connBuilder.StsEndpoints, new NetworkCredential("SBUser", "P@ssword1", ServerFQDN)); 
```

鉴于您在环境中提到的限制，请确保您传递的是服务器机器知道的帐户（本地帐户，或来自服务器机器所属域的帐户），而不是来自客户端机器域的帐户。

# c++ - 我如何理解链表？

> ID：13604535
> 
> 赞同：4
> 
> 时间：2012-11-28T11:57:14.000
> 
> 标签：c++, linked-list

我试图了解它们是如何工作的，但我遇到了很多困难。是否有人愿意直观地解释它们，或者提供他们认为对刚开始接触该主题的人有用的资源？

所以假设我有这个：

```
struct node
{
   int nodeNum;
   nodes *next;
} 
```

要创建“头”节点，我会执行以下操作：`node *head = new node;`这样我的链表现在看起来像![在此处输入图像描述](../Images/494a1af3443049cde7e9aa00a4b8d326.png). 分配后：

```
head->nodeNum = 10;
head->next = NULL; 
```

我们有![在此处输入图像描述](../Images/8a3c73d41c4454189ebbbfe3829c3d2d.png)。现在，如果我想写一个插入节点的函数，我可以写：

```
void insert(node *previousNode, int num)
{
    previousNode = new node;
    previousNode->nodeNum = num;
    previousNode->next = NULL;
} 
```

所以如果我要这样做，比如说，`insert(head, 20);`我的新列表看起来像![在此处输入图像描述](../Images/6c6ae98dcbfa6ff90120350fe9922792.png)？

如果一切正确，我如何使用此信息从列表中搜索和/或删除节点？例如，遍历节点并不像所描述的那样直观`head = head->next;`。这是如何运作的？

您可以提供任何使该主题更易于理解的建议都会很棒。感谢大家的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T12:08:32.370

您的插入功能无法正常工作；它只是创建一个新节点而不将其添加到列表中，并在函数返回时丢失它（导致内存泄漏）：

```
head -> 10 -> NULL     becomes    head -> 10 -> NULL
                                  (lost)  20 -> NULL 
```

相反，它应该将列表的旧尾部链接到新节点，并在旧节点之后插入新节点：

```
void insert(node * prev, int num) {
    node * new_node = new node;
    new_node->nodeNum = num;
    new_node->next = prev->next;  // add the old tail after the new node
    prev->next = new_node;        // add the new node after the old node
}

insert(head, 20); // insert 20 after the head
// head -> 10 -> NULL   becomes    head -> 20 -> 10 -> NULL 
```

> 如何使用此信息从列表中搜索和/或删除节点？

要进行迭代，您需要维护自己的指向正在查看的元素的指针；这从 开始`head`，然后跟随`next`指针直到它到达末尾（即为`next`空）：

```
for (node * n = head; n; n = n->next) {
    if (n->nodeNum == 20) {
        std::cout << "Found node 20!\n";
        break;
    }
} 
```

要从单链表中删除一个节点，您需要一个指向该节点之前的指针以更新其`next`指针：

```
void remove_next(node * prev) {
    if (prev->next) {
        node * next = prev->next->next;  // Get the tail after the removed node
        delete prev->next;
        prev->next = next;               // Add the tail after the remaining node
    }
}

remove_next(head);
// head -> 20 -> 10 -> NULL    becomes    head -> 10 -> NULL 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T12:11:56.507

你的问题在这里：

```
void insert(node *previousNode, int num)
{
previousNode = new node;
previousNode->nodeNum = num;
previousNode->next = NULL;
}

insert(head, 20); 
```

这就是这段代码的作用： `previousNode = new node;`创建一个指向节点的指针并将该指针分配给previousNode。PreviousNode 最初是一个复制头，现在它指向新的东西。您现在将值分配给新节点。换句话说，插入的这种实现不会插入。

你想做的更像是：

```
void better_insert(node *previousNode, int num)
{
    node *post_node = new node;    #create a brand new pointer to a brand new node
    post_node->nodeNum = num;      #give it a number
    post_node->next = previousNode->next; #we want previousNode to be behind new node
    previousNode->next = post_node;     
} 
```

它的作用是：在创建一个新节点并用新指针指向它之后，我们给它一个数字。接下来是理清指针指向的位置......

假设我们在链表中挥动一些节点。所有小写​​字母都是指针，好吗？

```
a->next = b 
```

现在说我们希望节点`x`在 之后`a`，并且有数字 10... 我们调用 `better_insert(a, 10)

`post_node`指向一个新节点（我们的节点 x），并被分配 10.cool...

我们想要：

```
a->next = x
x->next = b 
```

我们有：

```
a->next = b
x->next = null 
```

该函数的最后两行只是随机播放内容，直到符合要求

所以更详细...

我们有：

```
a->next = b
x->next = null 
```

所以我们叫：

```
post_node->next = previousNode->next; #we want previousNode to be behind new node 
```

现在我们有： a->next = b x->next = b

现在我们调用：

```
previousNode->next = post_node; 
```

我们最终得到：

```
a->next = x
x->next = b 
```

或者换句话说：

```
a->next = x
a->next->next = b 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T12:09:33.730

您需要在代码中使用更多变量。一个`insert`操作修改*两个*节点。需要将前一个节点更改为指向新节点，并且需要创建新节点并使其指向前一个节点之后的节点（可能为NULL，也可能不是NULL）。

```
void insert(node *previousNode, int num)
{
    node *newnode = new node;
    newnode->nodeNum = num;
    newnode->next = previousNode->next;
    previousNode->next = newnode;
} 
```

要遍历列表，您需要跟踪“当前节点”，您可以将其从一个节点更改为下一个节点：

```
while (currentNode != 0) {
    do_something_with(currentNode);
    currentNode = currentNode->next;
} 
```

当然，如果`do_something_with`删除该节点，那么之后您将无法继续前进。此外，要从单链表中删除一个节点，您需要一个指向它*之前*的节点的指针。因此，在这种情况下，您的循环可能会跟踪两个节点，当前节点和先前节点，而不仅仅是一个节点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T12:06:48.930

您使用的术语让您感到困惑。希望这个类比不会让你更加困惑。从本质上讲，将链表想象成一组可怕的门口，一旦你进入一个门口，它就会在你身后关闭，你只能看到那个房间里的东西或去下一个房间。从这个走廊的外面，你只知道入口在哪里，不知道里面是什么。

所以，从你的链表结构之外，你所知道的只是入口，一些指针`ll_node *head;`。里面`head`是一些数据和指向链表中下一个节点的指针。遍历该链表就像从走廊的入口开始，`head`一次进入一个走廊，直到找到您要查找的节点一样简单。

```
ll_node *current_location = head;
while (current_location != NULL)
{
   // if we are at the node that you were hoping to reach, exit.
   if (current_location->nodeNum == target_data_im_looking_for)
   {
      break;
   }
   // this isn't the node you're looking for, go to the next one.
   current_location = current_location->next;
} 
```

类似地，插入节点应该遍历到链表的末尾（直到`current_location->next == NULL`），并将最后一个元素的 next 指针替换为`ll_node`您创建的新元素的内存位置。我不会为你实现它，所以你有机会学习，但这里有足够的东西可以到达你想去的地方。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-28T12:14:27.357

通常，链表的节点不包含其编号。它通常由一个数据和一个指向下一个节点的指针组成。此外，您应该让您的代码没有拼写错误。

```
typedef Data int;

struct node
{
   Data data; // some Data
   node *next;   // pointer to the next node
} 
```

通常，您也不希望在指定节点之后出现新节点，而是希望列表。`void insert(node *previousNode, int num)`签名建议您在某个指定的前一个节点之后想要新节点。

从技术上讲，您可以通过三种方式将新节点添加到列表中。到列表的开头或结尾或中间的某个位置。添加到开头是最快和最简单的。

```
void insert(Data num)
{
    node* tmp = new node;  //make a new node
    tmp->data = num;       //fill in data
    tmp->next = head;      //set the next element of new one to be the current head
    head = tmp;            //set new element as the head
} 
```

这样，您就可以在列表前面放置一个新元素。你总是从头到尾遍历一个单向链表。

```
void print_all()
{
   node* current = head;      // start at head
   while(current != NULL){    // while element exists
     cout << current->data << ' ';   //print its data
     current = current->next; //move to the next one
   }
} 
```

当您有带有数据框和箭头的图片时，很容易理解`node* next`。

这是初学者。您需要修改`insert`函数以处理列表最初为空的特殊情况。即`head == NULL`。

此外，我强烈鼓励您尝试以面向对象的方式实现它。编写`class List`使用`struct node`.

```
class List {
  private:
    node* head;
  public:
    List();
    void insert(data);
    void print_all();
} 
```

尝试实现这些功能。根据我的经验，当你以这种方式做事时，它有助于组织你对数据结构和容器的思考，而且它更像是 C++ 的方式来做这样的事情。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-28T12:17:22.683

在您上面提到的列表中，您的信息很少，即 nodeNum。你应该在其中保留更多的离子化。例如，在值为 nodeNum = 10 的节点上，应该有一些您想从该节点获取的其他信息。所以当用户调用

```
node* search(node *head,int num){
      node *temp = head;//copy node reference into temp variable
      while (temp != NULL){
            if (temp->nodeNum == num){
               return temp;
            }
            temp = temp->next;
      }

} 
```

您可以使用 node 获取该节点中的数据

```
 res = search(head,10); 
```

用于删除

```
bool delete(node *head,int num){
      node *temp = head;//copy node reference into template
      node *prev = NULL;
      bool isDelete = false;
      while (temp != NULL){
            if (temp->nodeNum == num){
               break;
            }else
               prev = temp;
               temp = temp->next;
            }
      }
      if (temp != NULL){
          prev-> next = temp->next;//maintain list
          delete temp;
          isDelete = true;
      }
      return  isDelete;
} 
```

# maven - Jenkins Linux master 和 Windows slave：Maven 构建配置

> ID：13604539
> 
> 赞同：0
> 
> 时间：2012-11-28T11:57:35.293
> 
> 标签：maven, jenkins, master-slave

我在我们的网络中有一个为 Maven 构建配置的 Linux Jenkins master。为了提高性能，我决定在 Windows 机器上配置 Jenkins slave（我目前没有另一个 Linux 服务器）。我已经成功添加了基于 Windows 的从站，但有几个问题对我来说仍然不清楚：

1.  Windows 从机是否需要自己的 Maven 实例？如果是，如何在从属配置中进行设置？

2.  我可以将我的构建配置为能够在 Linux 主机和 Windows 从机上运行吗？

    例如，项目配置包含一个带有“*目标和选项*：`clean install -s /opt/hudson_home/m2-settings-bwa.xml -P -abgabe`”的构建部分。不幸的是，XML 文件的路径在 Windows 中无效。那么我应该如何配置 Linux 和 Windows 环境（和项目）呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T05:13:39.400

1.  maven实例是指maven安装吗？如果是这样 - 不。Jenkins 会将它需要的 maven jar 动态复制到从站。

2.  您可能能够为您描述的场景找到解决方法（也许使用复制到从属插件将文件复制到工作区），但值得问问自己是否真的想要生成 Windows 构建和 Lunix 的相同工作-内置软件。是的，Java 代码应该在任何地方运行，但也有例外......

# php - PHP 5.3 中的枚举

> ID：13604540
> 
> 赞同：-3
> 
> 时间：2012-11-28T11:57:36.730
> 
> 标签：php, enums, constants

在 PHP 5.3 之前，我使用以下自制函数来创建枚举：

```
function enum()
{
    for($enums = func_get_args(), $enum = reset($enums), $i = 1; $enum; $enum = next($enums), ++$i)
    {
        if(defined($enum)) throw new Exception($enum.' is already defined.');
        else define($enum, $i);
    }

} // enum() 
```

进而 ：

```
enum('CONST0', 'CONST1', 'CONST2', ...); 
```

使用 php 5.3，我可以使用 const 而不是 define 来从命名空间中受益。有没有办法可以修改此函数以使其使用 const 关键字？

此外，我只使用 5.3 来使我的代码看起来更干净，如果必须对性能产生影响（即使用 eval 或类似的东西），我会坚持使用旧定义。

我已经看过这个问题：[PHP and Enumerations](https://stackoverflow.com/questions/254514/php-and-enums)但我没有找到我要找的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:05:32.957

您不能`const`有条件地使用关键字[[请参阅这个投票率很高的答案](https://stackoverflow.com/questions/2447791/define-vs-const)]。

`__get`如果你想命名你的常量，最好的方法是让它们成为一个类的静态字段，`__set`如果你需要的话，可以利用魔法。

编辑：当然，在静态上下文中没有魔术设置器/获取器，无论如何您都可以提供灵活的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T12:16:13.707

我将尝试回答您的问题：*有没有办法可以修改此函数以使其使用 const 关键字？*

**简短的回答**：没有

**长答案**：是的，你可以，但只能以一种非常尴尬的方式：

```
<?php
function enum() {
    for($enums = func_get_args(), $enum = reset($enums), $i = 1; $enum; $enum = next($enums), ++$i) {
        eval('const ' . $enum . ' = ' . $i . ';');
    }
}

enum('CONST0', 'CONST1', 'CONST2'); 
```

[在http://3v4l.org/ontRN](http://3v4l.org/ontRN)上测试

# asp.net - 单击并刷新计时器时，按钮边框仍为蓝色 ASP .NET

> ID：13604544
> 
> 赞同：0
> 
> 时间：2012-11-28T11:57:40.213
> 
> 标签：asp.net, .net, button, timer, border

我有按钮数组，每个边框颜色都表示某种状态（**蓝色=活动按钮；绿色=普通按钮，红色=“火”**）。每个按钮代表硬件上的一个传感器。

按钮位于某些 UpdatePanel 中，其中 Timer 设置为**1500 毫秒**刷新。当计时器超时并被称为 Tick 事件时，页面加载事件被调用，我将颜色设置为按钮，因此着火的按钮设置为红色，正常的按钮设置为绿色，活动的按钮设置为蓝色。一切都很好，直到我单击某个调用单击事件的按钮，其中单击的按钮边框变为蓝色。我认为现在调用 Tick 事件时，这个单击的按钮现在应该失去蓝色边框颜色，并且它设置为默认绿色。但它保持蓝色，即使我把它放在火上（所以在下一个 Tick 事件之后它应该是红色的）它保持蓝色。有人可以帮助解决这个问题吗？

```
 protected void Page_Load(object sender, EventArgs e)
    {
        //Here is condition which checks if is exist Session['ActiveSensor']
        if (Session["ActiveSensor"] == null)
        {
            Session.Add("ActiveSensor", "A1");
            Session.Add("LastActiveSensorIndex", "0");
        }
        //==================================================================
        Sensors = new SensorNetwork();
        sensor_buttons = new Button[Sensors.SensorNet.Length];
        int i = 0;
        foreach (Sensor sensor in Sensors.SensorNet)
        {
           sensor_buttons[i] = new Button();
            sensor_buttons[i].ID = Convert.ToString(i); 
            sensor_buttons[i].BackColor = sensor.Temperature.TemperatureColor;
            sensor_buttons[i].Text = Math.Round(sensor.Temperature.CelsiusTemperature, 2).ToString() + "°C";
            sensor_buttons[i].Click += new EventHandler(sensor_Click);
            sensor_buttons[i].BorderWidth=2;

            if (sensor.Valid == false)
            {
                sensor_buttons[i].Enabled = false;
            }
            else {
                sensor_buttons[i].Enabled = true;
            }
            if (sensor.Fire == true)
            {
                sensor_buttons[i].BorderColor = System.Drawing.Color.DarkRed;
            }
            else {
                sensor_buttons[i].BorderColor = System.Drawing.Color.ForestGreen;
            }

            if (sensor.SensorID == Session["ActiveSensor"].ToString() && sensor.Fire==false) {
                sensor_buttons[i].BorderColor = System.Drawing.Color.LightSkyBlue;
                Session.Add("LastActiveSensorIndex", i.ToString());   
            }

            UpdatePanel2.ContentTemplateContainer.Controls.Add(sensor_buttons[i]);
            i++;
        }
    }

protected void sensor_Click(object sender, EventArgs e)
    {
        var ClickedButton =(Button)sender;
        Sensor NewSensor=Sensors.SensorNet[Convert.ToInt32(ClickedButton.ID)];

        ClickedButton.BorderColor = System.Drawing.Color.LightSkyBlue; //This button stays blue even if the Tick is called
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:23:59.097

解决了，它保持蓝色的原因是所有按钮都有

```
sensor_buttons[i].EnableViewState = true; 
```

这导致该服务器记住按钮的先前状态。

# mysql - MySql：创建视图 JOIN 从子表中获取最大值和最小值

> ID：13604555
> 
> 赞同：1
> 
> 时间：2012-11-28T11:58:23.610
> 
> 标签：mysql, join, view, aggregate-functions

说，我有一个名为“成员”的表

```
 id     name
 ===================
    a      John
    b      Frank 
```

会员有'login_activities'

```
 id     login_time     gol     member
==========================================
    1      2012-10-01      99      a
    2      2012-10-01     125      b
    3      2012-11-01     255      a
    4      2012-11-02     111      b
    5      2012-11-07     101      a 
```

我想创建一个视图，其中包含有关成员第一次登录和最后一次登录的信息，以及仅来自上次登录的“gol”值。

是否可以？

我尝试了很多方法。我的尝试之一：

```
CREATE VIEW   view_firstlast
     AS
          SELECT
               MIN(a.login_time) as first_login,
               MAX(a.login_time) as last_login,
               a.gol,
               b.name
          FROM
               login_activities a
                   JOIN member b ON a.member = b.id
          GROUP BY
               a.member 
```

它没有得到正确的结果。'gol' 值来自第一次登录。这该怎么做？

* * *

这里有一些重要的东西：**MySQL 不允许在创建视图中进行子查询**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T12:08:52.950

你几乎在那里。您有登录时间，但我也会使用它并获取最后一个登录 ID，以简化重新加入登录活动表与尝试在用户和日期/时间字段上进行连接，因为我希望在ID 的主键，不一定在 (member, login_time) 上——但是，对于使用按成员分组的日期的最小/最大值的查询，我肯定会在 (member, login_time) 上有一个索引以进行优化。

```
SELECT
      m.Name,
      PreQuery.First_Login,
      PreQuery.Last_Login,
      LA2.GOL
   from
      ( select
              LA.member,
              MIN(LA.login_time) as first_login,
              MAX(LA.login_time) as last_login,
              MAX(LA.ID) as LastLoginID
          FROM
              login_activities LA
          group by
              LA.member ) PreQuery
        JOIN member M
           ON PreQuery.member = M.id
        JOIN login_activities LA2
           ON PreQuery.LastLoginID = LA2.id 
```

然后，由于上述工作，但由于 MySQL 如何实现视图而失败，您可能需要使用两个视图来完成，这样

```
create view MemberFirstLastOnly
as 
select
      LA.member,
      MIN(LA.login_time) as first_login,
      MAX(LA.login_time) as last_login,
      MAX(LA.ID) as LastLoginID
   FROM
      login_activities LA
   group by
      LA.member 
```

然后另一个

```
create view MemberLastFirstFinal
as
    SELECT
          m.Name,
          MFLO.First_Login,
          MFLO.Last_Login,
          LA2.GOL
       from
          MemberFirstLastOnly MFLO
            JOIN member M
               ON PreQuery.member = M.id
            JOIN login_activities LA2
               ON PreQuery.LastLoginID = LA2.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T12:00:47.000

试试这个：

```
CREATE VIEW   view_firstlast
     AS
          SELECT
               MIN(a.login_time) AS first_login,
               MAX(a.login_time) AS last_login,
               a.gol,
               b.name
          FROM member b 
               LEFT JOIN login_activities a
                   a.member = b.id
          GROUP BY
               b.member 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T12:56:40.670

您需要再次加入 login_activities 表，但使用 mysql 的一个特殊功能，该功能允许您获取整行 fir 另一列的 max/min：

```
CREATE VIEW view_firstlast AS
SELECT
    MIN(a.login_time) as first_login,
    MAX(a.login_time) as last_login,
    c.gol,
    b.name
FROM login_activities a
JOIN member b ON a.member = b.id
JOIN (
    SELECT * FROM (
        SELECT gol, member
        FROM login_activities
        ORDER BY login_time desc) x
    GROUP BY member) c ON c.member = b.member
GROUP BY a.member 
```

# java - Java：如何从其他控制器设置 JavaFX 中标签的值

> ID：13604556
> 
> 赞同：1
> 
> 时间：2012-11-28T11:58:25.143
> 
> 标签：java, javafx-2

我想从登录屏幕设置标签的文本，当另一个屏幕出现时，标签的文本会显示。

为此，我执行以下操作：

**登录控制器：**

```
public class LoginController {    

    @FXML
    private Label label;
    @FXML
    private TextField login_txtf_user_id,login_password_field;
    @FXML
    public Database_Connection dbc1;
    @FXML
    public String userid;

    @FXML
    private void LoginButtonAction(ActionEvent event) throws Exception {
        dbc1=new Database_Connection();
        dbc1.query();

        if(dbc1.login().equals(login_txtf_user_id.getText().trim())){  
            userid=login_txtf_user_id.getText();                 
            Parent root1=FXMLLoader.load(getClass().getResource("Main.fxml"));
            Label lblData= (Label) root1.lookup("#lblData");
            lblData.setText(userid);
            FormLoader fml=new FormLoader("Main.fxml");
            fml.show(event);                 
        }           
    }       
} 
```

**表单加载器类：**

```
public class FormLoader {

    String url;

    public FormLoader(String fxmlFile){
        this.url=fxmlFile;
    }

    public void show(ActionEvent event) throws Exception{
        Node node=(Node) event.getSource();
        Stage stage=(Stage) node.getScene().getWindow();
        Parent root = FXMLLoader.load(getClass().getResource(url));/* Exception */
        Scene scene = new Scene(root);
        stage.setScene(scene);
        stage.show();
    }
} 
```

**主控制器：**

```
public class MainController {

    @FXML
    private Label lblData,lbl_custo_name, lbl_bill_no, lbl_amount, lbl_txn_id, lbl_date, lbl_hyperlink, login_lbl_info;
    @FXML
    private Hyperlink hyper_payment_confirmation, hyper_cancel_payment_confirmation, hyper_valid_bill;
    @FXML
    public TextField login_txtf_user_id,txtf_custo_name, txtf_bill_no, txtf_amount, txtf_txn_id, txtf_date;
    @FXML
    private Button login_btn_login,btn_save;
    @FXML
    public Database_Connection wdb,wdb1;
    public String abc;

    public void usr_id(String usr){
        abc=usr;
    }

    @FXML
    protected void saveButtonAction(ActionEvent event) throws Exception {
    //      LoginController root=new LoginController();           
      wdb.query("Insert into WASA.BILL_DETAILS values ('"+txtf_bill_no.getText()+"','"+txtf_txn_id.getText()+"','"+txtf_custo_name.getText()+"',"+txtf_amount.getText()+")");
    //      wdb.query("Insert into WASA.TXN_DETAILS values ('"+txtf_txn_id.getText()+"','"+usr+"',6,'Khulna','"+txtf_date.getText()+"')");
      txtf_bill_no.setText(null);
      txtf_txn_id.setText(null);
      txtf_custo_name.setText(null);
      txtf_amount.setText(null);
      txtf_date.setText(null);               
    }

    @FXML
    private void hyper_payment_confirmation(ActionEvent event) throws Exception{
        lbl_hyperlink.setText("Payment Confirmation");
        lbl_hyperlink.setVisible(true);
        lbl_custo_name.setVisible(true);
        lbl_bill_no.setVisible(true);
        lbl_amount.setVisible(true);
        lbl_txn_id.setVisible(true);
        lbl_date.setVisible(true);

        txtf_date.setVisible(true);
        txtf_custo_name.setVisible(true);
        txtf_bill_no.setVisible(true);
        txtf_amount.setVisible(true);
        txtf_txn_id.setVisible(true);

        lblData.setVisible(true);    
    }
} 
```

但是在加载`main.fxml`标签后只显示**"Label"**。

# list - 更新 Haskell 中的关联列表

> ID：13604558
> 
> 赞同：1
> 
> 时间：2012-11-28T11:58:35.297
> 
> 标签：list, haskell, tuples

我有一组简单的状态，如下所示：

```
st1 = [("x", 2), ("y", 3), ("z", 3)] 
```

我想在程序运行时更新它，因为值会改变。我有这样的更新代码：

```
update str val st = (str, val) : foldr step [] st where
    step x acc
        | fst x == str = acc
        | otherwise = x:acc 
```

我想做一个这样的分配函数：

```
assign (str, val) env = update str val env 
```

我遇到的问题是，由于 Haskell 没有副作用，我更新的列表不会保持更新。关于如何做到这一点的任何想法或建议？

如果我输入解释器

```
let st2 = update "x" 1 st1 
```

然后保存新的状态。

我想要这个功能来做到这一点：

```
update "x"  1 st1

Before:   [("x",1),("y",3),("z",3)]

After:    [("y",1),("x",2),("z",3)] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T12:37:23.957

正如您已经提到的，您不能在 Haskell 中产生副作用。相反，您可能有多个`let`表达式（或任何其他类型的定义）。

```
let st2 = update "x" 1 st1
let st3 = update "y" 2 st2 
```

虽然有一种方法称为[State Monad](http://www.haskell.org/haskellwiki/State_Monad)，但我现在不建议深入研究它，因为这个概念并不简单，相反，我建议开始阅读一些 haskell 教程或书籍，你肯定会遇到本教程后面章节中的状态单子。或者甚至比这两种选择更好，自己发明状态单子（这比听起来容易）！

# c# - 从共享点列表中检索附件的 url

> ID：13604559
> 
> 赞同：0
> 
> 时间：2012-11-28T11:58:38.337
> 
> 标签：c#, sharepoint-2010

伙计们即时使用 spquery 对象从列表中检索一些项目并填充中继器。我需要获取附件的网址。我已将 IncludeAttachmentUrls 设置为 true，但我不确定要在中继器中使用的字段名称。

```
 SPWeb Web = SPContext.Current.Web;
     SPList List = Web.Lists["LinksList"];

     SPQuery Query = new SPQuery();
     Query.Query = "<OrderBy><FieldRef Name='Title' Ascending='False' /></OrderBy>";
     Query.IncludeAttachmentUrls = true;

     RPTLinks.DataSource = List.GetItems(Query).GetDataTable();
     RPTLinks.DataBind(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T17:13:42.860

该属性被调用`Attachments`，但需要额外的操作来获取每个属性的完整 url。在 SharePoint StackExchange 上查看这个[问题。](https://sharepoint.stackexchange.com/questions/32077/how-do-i-get-the-url-for-attachments-on-an-splistitem-using-c/32080#32080)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T12:57:21.560

我希望这可能对您有所帮助，它不是一个功能齐全/经过测试的解决方案，但它可能会给您带来指导：

foreach 循环和 oItem.url 是我在 CAML 查询后最常使用的。

```
 SPList List = Web.Lists["LinksList"];

     SPQuery Query = new SPQuery();
     Query.Query = "<OrderBy><FieldRef Name='Title' Ascending='False' /></OrderBy>"
ArrayList values = new ArrayList();

foreach (SPListItem oItem in oList.GetItems(Query))
{
values.Add(oItem.Url);

// You might need to add extra code here to get the full path if you need to such as spweb url etc..

}
RPTLinks.DataSource = values;

RPTLinks.DataBind(); 
```

# android - 如何使布局保持在软键盘之上

> ID：13604570
> 
> 赞同：-1
> 
> 时间：2012-11-28T11:59:05.877
> 
> 标签：android, layout, android-softkeyboard

我有一个应用程序，其中有一个带有 textview 的布局。现在，使用 android:windowSoftInputMode="adjustPan" 时发生的情况是，当键盘打开时整个屏幕都会上升。但视图被减半。那是没有键盘的图像： ![在此处输入图像描述](../Images/6f855e8e4db51f855ffb5c6f4b3337a6.png)

那就是键盘打开： ![在此处输入图像描述](../Images/ecfd2075de2f9b65050d8a8c24178514.png)

如您所见，文本框已被剪切。我希望它像 facebook：关闭键盘： ![在此处输入图像描述](../Images/392535d64050adb4346c4f847c24f64f.png)

开启键盘： ![在此处输入图像描述](../Images/d07db4376a3150a168b8b9a211080617.png)

我该怎么办？在 Facebook 中，整个布局都在键盘上方。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:30:04.890

使用相对布局作为你的根布局并使用

> android:layout_alignParentBottom="true"

到您的子视图以使其使用软键盘向上滑动

以下是示例代码。

```
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@android:color/background_light">
    <Button
        android:text="Add Contact"
        android:id="@+id/addContact"
        android:layout_alignParentTop="true"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"></Button>

    <EditText
        android:id="@+id/searchEditText"
        android:layout_below="@id/addContact"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="5dp"
        android:layout_marginBottom="5dp"
        android:hint="Search" />
    <ExpandableListView
        android:layout_below="@id/searchEditText"
        android:layout_above="@+id/selection_layout"
        android:id="@+id/contactList"
        android:layout_width="fill_parent"
        android:layout_height="0px"
        ></ExpandableListView>
    <LinearLayout
        android:id="@+id/selection_layout"
        android:layout_alignParentBottom="true"
        android:orientation="horizontal"
        android:gravity="center"
        android:background="@drawable/black_white_gradient"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content">
        <Button
            android:layout_width="80dp"
            android:layout_height="wrap_content"
            android:id="@+id/ok"
            android:text="Ok" />
        <Button
            android:layout_width="80dp"
            android:layout_height="wrap_content"
            android:id="@+id/cancel"
            android:text="Cancel" />
    </LinearLayout>
</RelativeLayout> 
```

# php - 使用 facebook-php-sdk 从 facebook 导入

> ID：13604571
> 
> 赞同：0
> 
> 时间：2012-11-28T11:59:09.683
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

我用了很长时间来从 Facebook 检索照片

```
$this->facebook=new Facebook(array(
     'appId' => $appId,
     'secret' => $fbSecret,
     'cookie' => true
));

$this->facebook->getUser() // gives info of current user. 
```

现在从 10 月 25 日起停止工作，知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:25:11.750

请验证您的 app_id 和 app_secret 是否正确。

如果您再次遇到此问题，则可能已过期。更新您的 Facebook 应用程序 ID 和密钥。

为了验证您的令牌过期 - 试试这个链接[https://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)

有关应用 ID 验证的更多详细信息 -[如何验证 Facebook 应用 ID](https://stackoverflow.com/questions/6650107/how-to-validate-facebook-app-id)

# sql-server - 可写数据网格中的计算列

> ID：13604572
> 
> 赞同：0
> 
> 时间：2012-11-28T11:59:18.357
> 
> 标签：sql-server, vb.net

我在 VB.NET 项目中有一个数据网格，该项目目前直接绑定到绑定源，因此更改直接写入数据集中的底层单个表。

我想添加一个计算列 - 链接表上的记录计数 - 同时保持将数据直接输入到网格中的能力，如果我使用查询来获取当前字段以及计算列，我会丢失。

谁能指出我这样做的最佳方法？一如既往的感激...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T01:03:20.537

我已经对其进行了排序——数据集设计器中查询中的 SQL 子选择允许我进行所需的计数，同时使其他字段可写。

# javascript - 如何在一个请求中从linkedin获取所有类型的更新

> ID：13604573
> 
> 赞同：1
> 
> 时间：2012-11-28T11:59:17.977
> 
> 标签：javascript, jquery, ajax, request, linkedin

我想获取有关状态、共享、连接等的用户更新。链接提供不同的更新类型 [https://developer.linkedin.com/documents/network-update-types](https://developer.linkedin.com/documents/network-update-types)

每次更新都需要单独的请求。如何在单个请求中获取所有类型的更新

# selenium - Selenium - isElementPresent 返回 true 但无法单击元素

> ID：13604579
> 
> 赞同：0
> 
> 时间：2012-11-28T11:59:36.050
> 
> 标签：selenium, webdriver

我有一个场景可以从叠加层中单击“X”图标。**当我使用selenium.isElementPresent("//img[@src='close.jpg']")**检查元素时；它返回真实。但是当我执行**selenium.click("//img[contains(@src,'close.jpg')]")** ; 操作它会引发异常“元素当前不可见，因此可能无法与之交互”。

尝试了所有类型的 xpath，但无法解决问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T12:42:30.080

首先尝试使用几种方法：

```
public boolean isElementPresent(By selector)
   {
       return driver.findElements(selector).size()>0;
   }

    public boolean isElementVisible(By selector){
        return driver.findElement(selector).isDisplayed();
    } 
```

那么如果您的页面没有被强制呈现，请尝试使用一些等待机制：

```
Thread.sleep(1000);

driver.manage().timeouts().implicitlyWait(2,TimeUnit.SECONDS); 
```

和***fluentWait***机制：。

```
 public WebElement fluentWait(final By locator){
            Wait<WebDriver> wait = new FluentWait<WebDriver>(driver)
                    .withTimeout(30, TimeUnit.SECONDS)
                    .pollingEvery(5, TimeUnit.SECONDS)
            .ignoring(org.openqa.selenium.NoSuchElementException.class);
            WebElement foo = wait.until(
                    new Function<WebDriver, WebElement>() {
                        public WebElement apply(WebDriver driver) {
                            return driver.findElement(locator);
                        }
                    }
            );
            return  foo;              }     ;
    fluentWait(By.xpath(..blablabla...)).click(); 
```

您还可以进行 jsCode 注入：1）如果支持 jQuery

```
String cssSelector="blablabla";
JavascriptExecutor js = (JavascriptExecutor) driver;
        StringBuilder stringBuilder = new StringBuilder();
        stringBuilder.append("var x = $(\'"+cssSelector+"\');");
        stringBuilder.append("x.click();");
        js.executeScript(stringBuilder.toString()); 
```

2）通过DOM模型定位需要的元素：例如

```
String js="document.getElementsByTagName('div')[34].click();"
jsCodeExecution(js);
public void jsCodeExecution(String jsCode){
        JavascriptExecutor js = (JavascriptExecutor) driver;
        StringBuilder stringBuilder = new StringBuilder();
        stringBuilder.append(jsCode);
        js.executeScript(stringBuilder.toString());
    } 
```

也尝试一步一步调试，看看问题出在哪里。希望它可以帮助你。

此外，我建议您在 firepath 中验证您找到的 css 选择器和 xpath 验证（firefox 中的 firebug 插件）： ![在此处输入图像描述](../Images/3a0816c9ce5f96ecfc2987150a225a0f.png)

# jquery - 具有不同功能和目标选择器的一个元素上的多个 jQuery 事件

> ID：13604582
> 
> 赞同：3
> 
> 时间：2012-11-28T11:59:43.707
> 
> 标签：jquery, event-handling, live, function-calls

有没有办法结合这两种在jQuery中处理事件附件的方法？

```
$('selector').on({
    mouseenter: function() {},
    mouseleave: function() {},
    mousedown:  function() {},
    mouseup:    function() {}
}); 
```

我更喜欢以前的方法，但需要类似以下的方法来处理“实时”事件（问题是如果处理程序之间有注释，这将不起作用）：

```
$(document).on('mouseenter', 'selector1', function(){})
           .on('mouseleave', 'selector2', function(){})
           .on('mousedown',  'selector3', function(){})
           .on('mouseup',    'selector4', function(){}); 
```

但是，是否有解决方法可以做到这一点？：

```
$(document).on({
    mouseenter: 'selector1': function() {},
    mouseleave: 'selector2': function() {},
    mousedown:  'selector3': function() {},
    mouseup:    'selector4': function() {}
}); 
```

**更新**

我最终得到了这个简单的`on`-wrapper 函数：[https ://gist.github.com/4191657](https://gist.github.com/4191657)

用法很简单：

```
$(document).act(
    ['mouseenter', 'selector1', function() {}],
    ['mouseleave', 'selector2', function() {}],
    ['mousedown', 'selector3', function() {}],
    ['mouseup', 'selector4', function() {}]
); 
```

对此有何建议或改进？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T12:02:47.780

查看该[`.on()`方法](http://api.jquery.com/on/)的 jQuery 文档。当您使用您在第一个示例中使用的事件映射版本时，您可以将选择器作为第二个参数传递：

```
$(document).on({
    mouseenter: function() {},
    mouseleave: function() {},
    mousedown: function() {},
    mouseup: function() {}
}, "selector"); 
```

这假设您希望对所有这些事件使用相同的选择器。如果它可能不同，您最好的选择可能是将调用链接到`.on()`：

```
$(document).on('mouseenter', 'selector1', function(){})
           .on('mouseleave', 'selector2', function(){})
           // ...etc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-04T18:01:09.380

我已经设法改进了您的包装函数，以便在定义事件时可以使用对象而不是数组。以类似的方式 Meteor.js 是如何做到的。

```
// inspired by https://gist.github.com/yckart/4191657
// This code allows you to use more easy to read syntax to define events in jQuery
// Usage:
// $(document).events({
//  'click, .target-selector': function() {
//      //your function to trigger when target selector is clicked
//  }
// });

;(function($) {
    $.fn.events = function() {
        var argumentsObject = arguments[0];
        return this.each(function() {   
            for (var propertyName in argumentsObject) {
                if (argumentsObject.hasOwnProperty(propertyName)) {
                    var argumentsToPass = propertyName.split(", ");
                    argumentsToPass.push(argumentsObject[propertyName]);
                    $(this).on(argumentsToPass[0], argumentsToPass[1], argumentsToPass[2]);
                }
            }
        });
    };
})(jQuery); 
```

# typo3 - t3lib_browseLinksHook 和自定义链接格式

> ID：13604584
> 
> 赞同：0
> 
> 时间：2012-11-28T11:59:57.430
> 
> 标签：typo3

我正在尝试为 RTE 浏览链接窗口创建一个新选项卡，目的是允许链接到网络共享上的文件。使用外部链接是行不通的，因为 TYPO3 会自动`http://<domain>/typo3`添加到链接前面。

我在自定义选项卡中遇到了同样的问题。例如，当进入`\\<share>\<file>`时，链接最终成为`http://<domain>/typo3/\\<share>\<file>`.

钩子类：

```
class Tx_Test_Hooks_NetworkFolderTree implements t3lib_browseLinksHook
{
  public function init($browseLinks, $additionalParameters)
  {
    $this->browseLinks = &$browseLinks;
  }

  public function getTab($linkSelectorAction)
  {
    global $BE_USER, $LANG;

    $content = '
      <form action="" name="lurlform" id="lurlform">
        <table border="0" cellpadding="2" cellspacing="1" id="typo3-linkURL">
          <tr>
        <td>URL:</td>
        <td><input type="text" name="lurl"'.$this->browseLinks->doc->formWidth(20).' value="" /> '.
        '<input type="submit" value="set" onclick="browse_links_setHref(document.lurlform.lurl.value); browse_links_setAdditionalValue(\'data-htmlarea-external\', \'1\'); return link_current();" /></td>
          </tr>
        </table>
      </form>';

    $content .= $this->browseLinks->addAttributesForm();

    return $content;
  }

  public function parseCurrentUrl($href, $siteUrl, $info)
  {
    if( preg_match('/^([a-z]\:[\/\\\]|\\\{2})/', $href, $matchData) ) $info['act'] = 'unc';

    return $info;
  }

  public function modifyMenuDefinition($menuDefinition)
  {
    global $LANG;

    return array_merge($menuDefinition, array(
                'unc'   => array(
                'isActive'  => ($this->browseLinks->act == 'unc'),
                'label'     =>  'Network file',
                'url'       =>  '#',
                'addParams' =>  'onclick="jumpToUrl(\''.htmlspecialchars('?act=unc&mode='.$this->browseLinks->mode.'&bparams='.$this->browseLinks->bparams).'\');return false;"'
            )
        )
    );
  }

  public function addAllowedItems($currentlyAllowedItems)
  {
    return array_merge($currentlyAllowedItems, array('unc'));
  }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T08:14:30.953

发现了问题。通过 PHP 进行的检查`parse_url`会返回有关 url 的信息数组。如果缺少架构（这里就是这种情况），`http://`则附加。

# php - 从 foreach 循环中删除会话数组变量

> ID：13604585
> 
> 赞同：0
> 
> 时间：2012-11-28T12:00:06.420
> 
> 标签：php, mysql

我试图编写一个代码，我可以从会话数组中删除变量

这是我的代码

索引.php

```
 <?php
        if(isset($_POST['add']))
            {
            $_SESSION['temp'][]=$_POST['rfield'];   
            $_SESSION['scol_id'][]=$_POST['scol_id'];  

            }
       if(isset($_SESSION['temp']))
        {
            ?>
            <table width="100%" border="0" class = "table">
            <?php
            $x=0;
           foreach($_SESSION['temp'] as $temp)
            { 
                ?>
        <tr><td>
        <?php echo $temp; ?> 
        </td>
        <td><a href="removerf.php?id=<?php echo $x; ?>" rel="tooltip" title="remove" class="link"><i class="icon-remove"></i></a></td>
        </tr>
        <?php
            $x++;
            }
        ?>
        </table>
        <?php
        }
        ?> 
```

removerf.php

```
 <?php
    session_start();

    unset($_SESSION['temp'][$_GET['id']]);

    header("location:reportmaker.php");

    ?> 
```

我的代码的问题是有时它可以删除变量，有时它不能

由于某些奇怪的原因，它也无法删除数组的第一个变量

我错过了什么吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:04:22.977

我不会依赖 $x 是正确的数组键。你可以试试这个吗？

```
<?php
if(isset($_POST['add']))
{
    $_SESSION['temp'][]=$_POST['rfield'];   
    $_SESSION['scol_id'][]=$_POST['scol_id'];  
}
if(isset($_SESSION['temp']))
{
    ?>
    <table width="100%" border="0" class = "table">
    <?php
    foreach($_SESSION['temp'] as $key => $temp)
    { 
    ?>
        <tr><td>
        <?php echo $temp; ?> 
        </td>
        <td><a href="removerf.php?id=<?php echo $key; ?>" rel="tooltip" title="remove" class="link"><i class="icon-remove"></i></a></td>
        </tr>
    <?php
    }
?>
</table>
<?php
}
?> 
```

每当您从临时数组中删除一个键时，依赖 $x 作为数组键都会导致问题。如果您的临时数组是：

```
array(
    0 => 'foo',
    1 => 'bar'
) 
```

如果从数组中删除 0，$x 仍然会从 0 开始，即使数组键 0 不存在。即您正在假设您的数组中当前存在的数组键。

关于foreach：

```
foreach($myArray as $arrayKey => $arrayValue){
     //$arrayKey is the array key of the element / index
     //$arrayValue is the actual element that is stored.
} 
```

# vbscript - 如何在文件中仅搜索和替换确切的字符串大小写

> ID：13604586
> 
> 赞同：0
> 
> 时间：2012-11-28T12:00:08.653
> 
> 标签：vbscript, batch-file, batch-rename

我有一个“在文件中搜索和替换”脚本有效，但不是我期望的那样。它有两个问题：

*   如果旧文本后面有更多字符串，它会更改`oldtext`with `newtext`regadless：我想避免这种情况！

我正在从包含以下内容的批处理文件中调用该脚本：

> cscript replace.vbs file.txt 你好世界

假设 file.txt 包含：

```
house
abc.hellowide.use
abc.hello.use
hello
hellonurse 
```

我希望脚本将文件更改为：

```
house
abc.hellowide.use
abc.world.use
wolrd
hellonurse 
```

目前，脚本会导致不需要的更改，如下所示：

```
house
abc.worldwide.use
abc.world.use
wolrd
worldnurse 
```

我希望只替换确切的旧文本。

*   如何使脚本从脚本运行的根目录下递归子文件夹？

到目前为止，这是我的脚本：

```
Const ForReading = 1
Const ForWriting = 2

strFileName = Wscript.Arguments(0)
strOldText = Wscript.Arguments(1)
strNewText = Wscript.Arguments(2)

Set objFSO = CreateObject("Scripting.FileSystemObject")

Set objFile = objFSO.OpenTextFile(strFileName, ForReading)
strText = objFile.ReadAll
objFile.Close

strNewText = Replace(strText, strOldText, strNewText,1,1000,1)

Set objFile = objFSO.OpenTextFile(strFileName, ForWriting)
objFile.WriteLine strNewText
objFile.Close 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:19:31.353

字符串（或标记或参数）是由空格或双引号分隔的单词，而不是点。那么**abc.hello.use**不是 3 个词，它是一个完整的词，所以很难做到随心所欲。

试试这个，但它不适用于**. *词*。**：

```
@echo off

:: By Elektro H@cker

Set "FILE=%~1"
Set "WORD_BEFORE=%~2"
Set "WORD_AFTER=%~3"

For /F "Tokens=*" %%# in ('Type "%FILE%"') do (
    Call :Replacer %%# 
    Call Set "Final_Line=%%FINAL_LINE:%FILE% %WORD_AFTER% %WORD_AFTER% =%%"
    call Echo %%FINAL_LINE:~1%%>>".\Output.txt"
    Call Set "Final_Line="
)

:Replacer
For %%@ in (%*) do ( 
    IF "%%@" EQU "%WORD_BEFORE%" (
        Call Set "Final_Line=%%FINAL_LINE%% %WORD_AFTER%"
    ) ELSE (
        Call Set "Final_Line=%%FINAL_LINE%% %%@"
    )
)
GOTO:EOF 
```

对于任何其他文本操作，您可以使用我的 Batch 子例程：

```
@Echo OFF

:: TEXT MANIPULATOR ROUTINE v0.1
:: by Elektro H@cker

REM USE:
::TEXTMAN [ACTION] [IN LINE (Optional)] [FILE] [TEXT (Optional)]

REM ACTIONS:
REM 
REM  AL  = ADD_LEFT           * Add text to the beginning of a line
REM  AR  = ADD_RIGHT          * Add text to the end of a line
REM  E   = ERASE              * Delete a line
REM  I   = INSERT             * Add a empty line (Or a line with text)
REM  RL  = REPLACE_LINE       * Replace a line
REM  RS  = REPLACE_STRING     * Replace words of a line
REM  RSA = REPLACE_STRING_ALL * Replace words of all line
REM  C+  = CHARACTER_PLUS     * Delete the first "X" characters in all lines
REM  C-  = CHARACTER_LESS     * Delete the last  "X" characters in all lines
REM  L+  = LINE_PLUS          * Cut the first "X" lines
REM  L-  = LINE_LESS          * Cut the last  "X" lines

REM EXAMPLES:

:: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: ::
::
:: Deletes the line 3
:: Call :TEXTMAN E 3 "Test.txt"
::
:: Add a phrase to the beginning of line 3
:: Call :TEXTMAN AL 3 "Test.txt" "Elektro H@cker"
::
:: Add a phrase to the end of line 3
:: Call :TEXTMAN AR 3 "Test.txt" "Elektro H@cker"
::
:: Add a empty line at line 3
:: Call :TEXTMAN I 3 "Test.txt"
:: 
:: Add a line with a word at line 3
:: Call :TEXTMAN I 3 "Test.txt" "Elektro H@cker"
::
:: Replaces the line 3 with "Elektro H@cker"
:: Call :TEXTMAN RL 3 "Test.txt" "Elektro H@cker"
::
:: Replaces the words "Elektro" to "H@cker" in line 3
:: Call :TEXTMAN RS 3 "Test.txt" "Elektro" "H@cker"
::
:: Replaces the words "Elektro" to "H@cker" in all lines
:: Call :TEXTMAN RSA "Test.txt" "Elektro" "H@cker"
::
:: Deletes the first 3 characters in all lines
:: Call :TEXTMAN C+ 3 "Test.txt"
::
:: Deletes the last 3 characters in all lines
:: Call :TEXTMAN C- 3 "Test.txt"
::
:: Deletes the first 3 lines
:: Call :TEXTMAN L+ 3 "Test.txt"
::
:: Deletes the last 3 lines
:: Call :TEXTMAN L- 3 "Test.txt"
::
:: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: ::

:TEXTMAN
(SET /A "A=0", "LINE=0", "TOTAL_LINES=0")  &  (CALL :%~1 %* || (ECHO Parametro incorrecto & Exit /B 1)) & (GOTO:EOF)
:AL
(For /F "usebackq tokens=*" %%@ in ("%~3") DO (Call Set /A "LINE+=1" && (CMD /C "IF NOT "%%LINE%%" EQU "%~2" (Echo %%@ >> "%~nx3.NEW") ELSE (Echo %~4%%@ >> "%~nx3.NEW")"))) && (CALL :RENAMER "%~3") & (GOTO:EOF)
:AR
(For /F "usebackq tokens=*" %%@ in ("%~3") DO (Call Set /A "LINE+=1" && (CMD /C "IF NOT "%%LINE%%" EQU "%~2" (Echo %%@ >> "%~nx3.NEW") ELSE (Echo %%@%~4 >> "%~nx3.NEW")"))) && (CALL :RENAMER "%~3") & (GOTO:EOF)
:E
(For /F "usebackq tokens=*" %%@ in ("%~3") DO (Call Set /A "LINE+=1" && (CMD /C "IF NOT "%%LINE%%" EQU "%~2" (Echo %%@ >> "%~nx3.NEW")"))) && (CALL :RENAMER "%~3") & (GOTO:EOF)
:I
(For /F "usebackq tokens=*" %%@ in ("%~3") DO (Call Set /A "LINE+=1" && (CMD /C "IF     "%%LINE%%" EQU "%~2" (IF NOT "%~4" EQU "" (Echo %~4 >> "%~nx3.NEW") ELSE (Echo. >> "%~nx3.NEW"))" & Echo %%@ >> "%~nx3.NEW"))) && (CALL :RENAMER "%~3") & (GOTO:EOF)
:RL
(For /F "usebackq tokens=*" %%@ in ("%~3") DO (Call Set /A "LINE+=1" && (CMD /C "IF NOT "%%LINE%%" EQU "%~2" (Echo %%@ >> "%~nx3.NEW") ELSE (Echo %~4 >> "%~nx3.NEW")"))) && (CALL :RENAMER "%~3") & (GOTO:EOF)
:RS
(For /F "usebackq tokens=*" %%@ in ("%~3") DO (Call Set /A "LINE+=1" && (CMD /C "IF NOT "%%LINE%%" EQU "%~2" (Echo %%@ >> "%~nx3.NEW") ELSE (CALL SET "STRING=%%@" && CALL ECHO %%STRING:%~4=%~5%% >> "%~nx3.NEW")"))) && (CALL :RENAMER "%~3") & (GOTO:EOF)
:RSA
(For /F "usebackq tokens=*" %%@ in ("%~2") DO (CALL SET "STRING=%%@" && (CALL ECHO %%STRING:%~3=%~4%% >> "%~2.NEW"))) && (CALL :RENAMER "%~2") & (GOTO:EOF)
:C+
(For /F "usebackq tokens=*" %%@ in ("%~3") DO (Call Set   "LINE=%%@" && (CALL ECHO %%LINE:~%~2%% >>    "%~nx3.NEW"))) && (CALL :RENAMER "%~3") & (GOTO:EOF)
:C-
(For /F "usebackq tokens=*" %%@ in ("%~3") DO (Call Set   "LINE=%%@" && (CALL ECHO %%LINE:~0,-%~2%% >> "%~nx3.NEW"))) && (CALL :RENAMER "%~3") & (GOTO:EOF)
:L+
(Call SET /A "A=%~2-1") && (Call TYPE "%~3" | @MORE +%%A%% > "%~nx3.NEW") && (CALL :RENAMER "%~3") & (GOTO:EOF)
:L-
(FOR /F %%X IN ('TYPE "%~3"') DO (CALL SET /A "TOTAL_LINES+=1")) & (CALL SET /A "TOTAL_LINES-=%~2-1") & (For /F "usebackq tokens=*" %%@ in ("%~3") DO (Call Set /A "LINE+=1" & Call echo " %%LINE%%!!| FINDSTR " %%TOTAL_LINES%% " && CALL :RENAMER "%~3" && GOTO:EOF || (Echo %%@ >> "%~nx3.NEW")))
:RENAMER
(REN "%~1" "%~nx1.BAK") & (MOVE /Y "%~nx1.BAK" "%TEMP%\" >NUL) & (REN "%~nx1.NEW" "%~nx1") & (GOTO:EOF) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T13:40:56.640

只有当“hello”是一个单词时，您才可以使用正则表达式将“hello”替换为“world”。与此匹配的正则表达式是：`\bhello\b`. 它将匹配`hello`and`abc.hello.use`但不匹配`hellonurse`and `abc.hellowide.use`。

这可能是您的脚本：

```
Const ForReading = 1
Const ForWriting = 2

Dim re
Set re = new regexp

strFileName = Wscript.Arguments(0)
strOldText = Wscript.Arguments(1)
strNewText = Wscript.Arguments(2)

Set objFSO = CreateObject("Scripting.FileSystemObject")

Set objFile = objFSO.OpenTextFile(strFileName, ForReading)
strText = objFile.ReadAll
objFile.Close

re.Pattern = "\b" + strOldText + "\b"
re.Global = True
re.Multiline = True

strNewText = re.Replace(strText, strNewText)

Set objFile = objFSO.OpenTextFile(strFileName, ForWriting)
objFile.WriteLine strNewText
objFile.Close 
```

那么您可以这样调用它，使其替换当前文件夹和子文件夹中的所有 *.txt 文件：

```
for /r %a in (*.txt) do @cscript replace.vbs "%a" hello world 
```

（还有一些问题需要修复，例如在 Arguments(1) 或 Arguments(2) 中包含特殊字符）

# html - 引用服务器 HTML 文件时未找到文件异常

> ID：13604588
> 
> 赞同：-1
> 
> 时间：2012-11-28T12:00:13.317
> 
> 标签：html, xml, xhtml, xml-parsing, doctype

`<?xml version="1.0"?> <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "file:///aaa/bbb/vvv/sss/dtd/htmlentities.dtd">`

上面的代码来自 UNIX 服务器上的 html 文件。我的应用程序通过解析使用这个 html 文件。现在我通过创建一个本地工作空间来运行我的应用程序，我需要从我的服务器中删除所有 html 文件。html 文件具有 DTD 位于某个目录的引用。当我尝试运行该应用程序时，它给了我一个“FileNotFoundException”，所以我将它从我的服务器复制到我的本地环境。如何引用该 DTD 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:24:04.857

请检查 DTD 文件的相对路径，否则尝试使用绝对路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T12:59:55.433

只需更改“file:///”的路径以指向 dtd 的本地副本。

# php - php中的交换（扭曲）多维数组

> ID：13604590
> 
> 赞同：0
> 
> 时间：2012-11-28T12:00:18.613
> 
> 标签：php, arrays, sorting, multidimensional-array

我想将二维数组“扭曲”“90°”..

让我解释一下。

我有一个这样的数组：

```
array(
    array( adam , brad , chris , david ),
    array( 21   , 23   , 22    , 26    )
) 
```

我想把它转换成这样的东西：

```
array(
    array( adam  , 21 ),
    array( brad  , 23 ),
    array( chris , 22 ),
    array( david , 26 )
) 
```

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T12:06:38.323

虽然我会在那里抛出一个 foreach ：

```
$array = array(
    array('adam', 'brad', 'chris', 'david'),
    array(21, 23, 22, 26)
);

$final_array = array();
foreach ($array[0] as $k => $v)
{
    $final_array[] = array($array[0][$k], $array[1][$k]);
}

print_r($final_array); 
```

在对此的评论有些混乱之后，有人指出您可以将代码缩小为：

```
foreach ($array[0] as $k => $v)
{
    $final_array[] = array($v, $array[1][$k]);
} 
```

谢谢斯坦

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T12:04:48.847

像这样的东西应该工作：

```
// Your array stored as $arr

$newArr = array();
for ($i = 0;$i < count($arr[0]); $i++) {
    $newArr[] = array($arr[0][$i],$arr[1][$i]);
} 
```

编辑：你标记排序，但数组已经排序，你也想排序吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-25T20:37:09.360

这是关联数组（一种二维数组）：

```
// Take array like ([0] => ('key1' => 'value1', 'key2' => 'value2'), [1] => ('key1' => 'value45', 'key2' => 'value3'))
// and transform it to like ('key1' => ([0] => 'value1', [1] => 'value45'), 'key2' => ([0] => 'value2', [1] => 'value3'))
function array_twist(array $array) {
    $number_of_rows = count($array);
    $twisted_array = array();
    for ($i = 0; $i < $number_of_rows; ++$i) {
        $fields = array_keys($array[$i]);
        foreach ($fields as $field) {
            $data = $array[$i][$field];
            if ($data != '') {
                $twisted_array[$field][] = $data;
            }
         }
     }
   return $twisted_array;
} 
```

# iphone - 从外部 XIB 中的按钮创建 segue

> ID：13604591
> 
> 赞同：1
> 
> 时间：2012-11-28T12:00:17.890
> 
> 标签：iphone, objective-c, ios

我有一个`UITableViewCell`设计在外部笔尖上的按钮。我想知道如何通过这个按钮在情节提要编辑器上创建一个视图。

我对这一切有点陌生，所以如果你能解释这个过程，我将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T12:24:06.490

你不能完全这样做。假设将保存自定义单元格的表格视图位于情节提要中的视图控制器中，您可以创建从该控制器到目标控制器的转场并为转场命名。然后，当点击单元格的按钮时，让它告诉其控制器调用`performSegueWithIdentifier:sender:`.

# git - 通过 ssh 和 buildbot 使用 git 子模块

> ID：13604592
> 
> 赞同：1
> 
> 时间：2012-11-28T12:00:44.410
> 
> 标签：git, ssh, git-submodules, buildbot

我有一个 git 存储库，其中包含与不同的外部 git 服务器链接的子模块。如何为每个子模块和用户传递 ssh 身份验证？我可以为 Buildbot 中的每个子模块设置单独的选项吗？

我可以自动签出必要分支上的每个子模块吗？我可以一次查看根更改日志，还可以查看每个子模块的更改日志吗？

# android - 使用单选按钮触发方法

> ID：13604594
> 
> 赞同：0
> 
> 时间：2012-11-28T12:00:50.983
> 
> 标签：android, radiobuttonfor

请帮助我了解如何在选中单选按钮后使用单选按钮执行方法，这是我的代码：

```
 if (RadioButton1.isChecked()){
                    UpdateResultsnewk();
                }else if (RadioButton2.isChecked()) {
                     UpdateResultsoldk();
                }

        public void UpdateResultsnewk(){
        int results1 = 100 + 10;
        Textview1.setText(results);

    }

 public void UpdateResultsoldk(){
    int results2 = 100 - 10;
    Textview2.setText(results);
 } 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:12:29.640

Here is the code you need:

```
yourRadioGroup.setOnCheckedChangeListener(new OnCheckedChangeListener() {

    @Override
    public void onCheckedChanged(RadioGroup group, int checkedId) {
        if(checkedId == yourRadioButtonWhichShouldBeChecked.getId()) {
            yourMethodWhichShouldBeCalled();
        }
    }
}); 
```

# ruby - 你如何在最近的空格处截断一个句子？

> ID：13604597
> 
> 赞同：1
> 
> 时间：2012-11-28T12:01:03.347
> 
> 标签：ruby

我们有一个句子和一个字符限制。如果句子超过字符限制，我们想截断它，但只在空格处，而不是在单词中间。

这是我们目前所拥有的：

```
 def shortened_headline(max_length)
    return @headline unless @headline.length > max_length
    @headline[0..max_length]
  end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T12:05:53.617

修剪标题后，您可以使用`rindex`从数组或字符串的右侧查找某些内容的索引。

就像是：

```
sub_length=@headline[0..max_length].rindex(' ') 
```

将为您提供标题中最后一个空格的位置。如果您想在字符串中找到最后一个非字母数字字符，也可以将它与正则表达式一起使用，这样您就可以在最后一个空格或标点符号处打断。

[更多关于 rindex 的信息。](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-rindex)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T12:10:46.430

Rails 用各种方便的方法扩展了这个`String`类，其中一个`truncate`方法可以传递一个`:separator`选项。即使您不使用 Rails，您也可以简单地复制它们的实现。请参阅文档

[http://api.rubyonrails.org/classes/String.html#method-i-truncate](http://api.rubyonrails.org/classes/String.html#method-i-truncate)

（可以点击“show source”查看实际实现）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T12:06:26.657

您应该使用[String#index](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-index)。它找到字符串第一次出现的索引，它还接受和偏移。

**注意：此实现在 max_length****之后**的第一个空格中剪切字符串（我刚刚意识到，这可能不是您想要的）。如果您需要在 max_length 之前削减第一个空格，请参阅@glenatron 的答案。

```
def shortened_headline(headline, max_length)
  return headline if headline.length < max_length

  space_pos = headline.index(' ', max_length)
  headline[0..space_pos-1]
end

h = 'How do you truncate a sentence at the nearest space?'

h[0..4] # => "How d"
shortened_headline(h, 5) # => "How do"

h[0..10] # => "How do you "
shortened_headline(h, 10) # => "How do you"

h[0..15] # => "How do you trunc"
shortened_headline(h, 15) # => "How do you truncate" 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-28T16:30:30.493

看看 ActiveSupport 的字符串核心扩展，特别是[`truncate`](http://guides.rubyonrails.org/active_support_core_extensions.html#truncate)方法。

从文档：

```
The method truncate returns a copy of its receiver truncated after a given length:

    "Oh dear! Oh dear! I shall be late!".truncate(20)
    # => "Oh dear! Oh dear!..." 
```

像这样访问它：

```
irb(main):001:0> require 'active_support/core_ext/string/filters'
irb(main):002:0> 'how now brown cow'.truncate(10)
=> "how now..." 
```

如果您不想要额外的装饰，该`truncate`方法可以关闭省略号。

ActiveSupport 不久前被重构，允许我们挑选我们想要的功能，而无需拉入完整的库。它充满了善良。[核心扩展页面](http://guides.rubyonrails.org/active_support_core_extensions.html)有更多信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T13:02:33.863

```
@headline[/.{,#{max_length}}(?: |\z)/] 
```

# javascript - JQuery 创建 HTML 无法正常工作

> ID：13604598
> 
> 赞同：0
> 
> 时间：2012-11-28T12:01:06.067
> 
> 标签：javascript, jquery, html

我正在尝试使用 JQuery 创建 HTML。我有一个创建 HTML 表的 JQuery 脚本：

```
$('<table>').attr('cellspacing', '5').addClass('blocksTable')
        .append('<tbody><tr><td>Name</td>')
        .append('<td><input type="text" value="" name="textBlockNames" class="textField"/></td></tr>')

        .append('<tr><td>Locale</td>')
        .append('<td><input type="text" value="" name="textBlockLocales" class="textField"/></td></tr>')

        .append('<tr><td>Content</td>')
        .append('<td><input type="text" value="" name="textBlockContents" class="textField"/></td></tr></tbody>')

        .append('</table>')
        .appendTo($("#idParentBlocksTable")); 
```

但是表格是这样生成的：

```
<table class="blocksTable" cellspacing="5">
    <tbody>
        <tr>
            <td>Name</td>
        </tr>
        <tr>
            <td>Locale</td>
        </tr>
        <tr>
            <td>Content</td>
        </tr>
    </tbody>
    <td>
        <input class="textField" type="text" name="textBlockNames" value="">
    </td>
    <td>
        <input class="textField" type="text" name="textBlockLocales" value="">
    </td>
    <td>
        <input class="textField" type="text" name="textBlockContents" value="">
    </td>
</table> 
```

虽然它应该像这样生成：

```
<table class="blocksTable" cellspacing="5">
    <tbody>
        <tr>
            <td> Name </td>
            <td>
                <input class="textField" type="text" name="textBlockNames" value="">
            </td>
        </tr>
        <tr>
            <td> Locale </td>
            <td>
                <input class="textField" type="text" name="textBlockLocales" value="">
            </td>
        </tr>
        <tr>
            <td> Content </td>
            <td>
                <input class="textField" type="text" name="textBlockContents" value="">
            </td>
        </tr>
    </tbody>
</table> 
```

我在这里做错了什么？我不知道如何更清楚地解释问题，所以我在这里输入任何内容，因为系统不允许我提交问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T12:02:34.600

当你打电话时

```
.append('<tbody><tr><td>Name</td>') 
```

jQuery 不会更改页面的 HTML 源代码，而是添加**一个（或多个）DOM 节点**。所以 HTML 是自动修复的（这里的行和单元格是关闭的）

您应该做的是构建一些 HTML 字符串并附加它：

```
var html = '<tbody><tr><td>Name</td>'
html += '<td><input type="text" value="" name="tex"'...
...
html += '</tbody>';
$('<table>').attr('cellspacing', '5').addClass('blocksTable').append(html); 
```

请注意，将元素附加到 DOM 的成本很高。您应该更喜欢构建一个大的 HTML 字符串并附加一次，而不是附加许多小元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T12:07:59.400

当你做一个，

```
.append('<tbody><tr><td>Name</td>') 
```

它被附加到`table`,

当你这样做时，

```
.append('<td><input type="text" value="" name="textBlockNames" class="textField"/></td></tr>') 
```

它不会附加到`td`上下文仍然存在的情况下`table`，

您可以尝试做的是一次创建所有 html 并将其附加在一起。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T12:08:15.897

前两个调用`.append()`附加到*同一个*元素（即`<table>`）。解决这个问题的一种方法是`<tbody>`单独创建然后附加到它：

```
var $body = $('<tbody></tbody>').appendTo($('<table>').attr('cellspacing', '5').addClass('blocksTable'));
$body
    .append('<tr><td>Name</td>')
    .append('<td><input type="text" value="" name="textBlockNames" class="textField"/></td></tr>')

    //...etc. 
```

# sql - 如何从有条件的两个表中检索数据总和

> ID：13604609
> 
> 赞同：1
> 
> 时间：2012-11-28T12:01:28.733
> 
> 标签：sql, sql-server, sql-server-2008

我有两个如下表

书

```
id TID reserveddate fee1 fee2 fee3 Noofplayers total
-------------------------------------
1   11  2012-11-25 100  200  300      3        800
2   12  2012-11-25 100  200  300      3        800
3   13  2012-11-28 200  100  200      1        500 
```

球员

```
 TID  fee1 fee2 
-------------------------------------
  11  100  200  
  11  100  200  
  11  100  200 
  12  100  200  
  12  100  200
  12  100  200
  13  200  100 
```

现在我想用 Reserveddate 分组从两个表中检索数据。

我有一个疑问，

```
select sum(b.fee1)+sum(b.fee2)+sum(a.fee3) as total 
from Players b,book a where a.TID = b.TID  and a.ReservedDate ='25-nov-2012' 
group by a.ReservedDate 
```

以上查询在 sum(fee3) 添加 3(noofplayers) 次我想添加一个时间表。

您能否根据客户要求更新查询...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:39:03.593

我相信这会奏效，总共有 2400 个：

```
select  sum(b.fee1_fee2_totalPerPlayer) + sum(a.fee3) as total 
from    book a
join    (
            select  TID,
                    sum(fee1) + sum(fee2) 
                        as fee1_fee2_totalPerPlayer
            from    Players
            group   by TID
        ) b on
        a.TID = b.TID
where   a.ReservedDate ='2012-11-25' 
group by a.ReservedDate 
```

以下是总数的计算方式：

对于 TID=11：300（Players.fee1 的总和）+ 600（Players.fee2 的总和）= 900

对于 TID=12：300（Players.fee1 的总和）+ 600（Players.fee2 的总和）= 900

900 + 900 = 1800

1800 + 600（日期“2012-11-25”的 Book.fee3 总和）= 2400

这是一个例子：**[SQL Fiddle](http://sqlfiddle.com/#!2/b9079/2/0)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T12:10:04.273

所以你想`SUM`每天？您可以将 CTE 与`SUM(...)OVER`：

```
WITH CTE AS
(
   SELECT b.id, b.TID AS bTID, b.reserveddate, b.fee1, b.fee2, b.fee3, b.Noofplayers
     ,    p.TID AS pTID,  p.fee1 AS pFee1, p.fee2 AS pFee2
     ,    SUM(b.fee1 + b.fee2 + a.fee3) OVER (PARTITION BY DATEADD(day, DATEDIFF(dd, 0, ReservedDate), 0)) As total
     ,    DATEADD(day, DATEDIFF(dd, 0, ReservedDate), 0) AS ReservedDateDay
   FROM Book b INNER JOIN Players p ON b.TID=p.TID
)
SELECT total FROM CTE WHERE ReservedDateDay='20121125'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T12:12:31.360

如果您确定*noofplayers*是*玩家*表中的条目数，您可以简单地将 fee3 的*总和*除以*noofplayer*

 *```
select sum(b.fee1)+sum(b.fee2)+(sum(a.fee3)/noofplayer) as total 
from Players b,book a where a.TID = b.TID  and a.ReservedDate ='25-nov-2012' 
group by a.ReservedDate 
```

如果您不确定*noofplayer*是否正确，您可以过滤同一记录上的玩家表，例如

```
select sum(b.fee1)+sum(b.fee2)+sum(a.fee3) as total 
from book a 
join (select distinct TID, fee1, fee3 from players) as b
on a.TID = b.TID
where  a.ReservedDate ='25-nov-2012' 
group by a.ReservedDate 
```*

# python - 如何拟合闭合轮廓？

> ID：13604611
> 
> 赞同：1
> 
> 时间：2012-11-28T12:01:45.267
> 
> 标签：python, numpy, plot, scipy, curve-fitting

我有一个代表闭合轮廓（带噪声）的数据：

```
contour = [(x1, y1), (x2, y2), ...] 
```

有没有简单的方法来拟合轮廓？有[numpy.polyfit](http://docs.scipy.org/doc/numpy/reference/generated/numpy.polyfit.html)。但是如果 x 值重复并且需要一些努力来确定多项式的适当次数，它就会失败。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T23:11:55.647

从一个点到您要拟合的轮廓的距离是极坐标中以该点为中心的角度的周期函数。该函数可以表示为正弦（或余弦）函数的组合，可以通过傅里叶变换精确计算。实际上，根据[Parseval 定理](http://en.wikipedia.org/wiki/Parseval%27s_theorem)，通过截断到前 N 个函数的傅立叶变换计算的线性组合*最*适合那些 N 个函数。

要在实践中使用它，请选择一个中心点（可能是轮廓的重心），将轮廓转换为极坐标，并计算距中心点的距离的傅里叶变换。拟合轮廓由前几个傅立叶系数给出。

剩下的一个问题是转换为极坐标的轮廓在等距角处没有距离值。这就是[不规则采样](http://www.math.ucdavis.edu/~strohmer/research/sampling/irsampl.html)问题。由于您可能有相当高的样本密度，因此您可以通过使用两个最近点之间的线性插值到均匀间隔的角度，或者（取决于您的数据）用一个小窗口进行平均来非常简单地解决这个问题。大多数其他不规则采样的解决方案在这里要复杂得多且不必要。

**编辑：**示例代码，作品：

```
import numpy, scipy, scipy.ndimage, scipy.interpolate, numpy.fft, math

# create simple square
img = numpy.zeros( (10, 10) )
img[1:9, 1:9] = 1
img[2:8, 2:8] = 0

# find contour
x, y = numpy.nonzero(img)

# find center point and conver to polar coords
x0, y0 = numpy.mean(x), numpy.mean(y)
C = (x - x0) + 1j * (y - y0)
angles = numpy.angle(C)
distances = numpy.absolute(C)
sortidx = numpy.argsort( angles )
angles = angles[ sortidx ]
distances = distances[ sortidx ]

# copy first and last elements with angles wrapped around
# this is needed so can interpolate over full range -pi to pi
angles = numpy.hstack(([ angles[-1] - 2*math.pi ], angles, [ angles[0] + 2*math.pi ]))
distances = numpy.hstack(([distances[-1]], distances, [distances[0]]))

# interpolate to evenly spaced angles
f = scipy.interpolate.interp1d(angles, distances)
angles_uniform = scipy.linspace(-math.pi, math.pi, num=100, endpoint=False) 
distances_uniform = f(angles_uniform)

# fft and inverse fft
fft_coeffs = numpy.fft.rfft(distances_uniform)
# zero out all but lowest 10 coefficients
fft_coeffs[11:] = 0
distances_fit = numpy.fft.irfft(fft_coeffs)

# plot results
import matplotlib.pyplot as plt
plt.polar(angles, distances)
plt.polar(angles_uniform, distances_uniform)
plt.polar(angles_uniform, distances_fit)
plt.show() 
```

PS 有一种特殊情况可能需要注意，当轮廓非凸（重入）的程度足够大时，沿某个角度穿过所选中心点的某些光线与其相交两次。在这种情况下，选择不同的中心点可能会有所帮助。在极端情况下，可能没有不具有此属性的中心点（如果您的轮廓看起来[像这样](http://en.wikipedia.org/wiki/File:Triskele-Symbol1.svg)）。在这种情况下，您仍然可以使用上述方法来标记或限制您拥有的形状，但这不是适合其本身的合适方法。这种方法适用于拟合像土豆一样的“块状”椭圆，而不是像椒盐卷饼这样的“扭曲”椭圆：)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T12:41:43.980

如果您修复多项式次数，您可以简单地使用**scipy.optimize中的****minimumsq**函数

 **假设您生成了一个简单的圆圈。我将它分成它的 x 和 y 分量

```
data = [ [cos(t)+0.1*randn(),sin(t)+0.1*randn()] for t in rand(100)*2*np.pi ]
contour = array(data)
x,y = contour.T 
```

编写一个简单的函数，在给定多项式系数的情况下评估每个点与 0 的差异。我们将曲线拟合为以原点为中心的圆。

```
def f(coef):
    a = coef
    return a*x**2+a*y**2-1 
```

我们可以简单地使用 leastsq 函数来找到最佳系数。

```
from scipy.optimize import leastsq
initial_guess = [0.1,0.1]
coef = leastsq(f,initial_guess)[0]
# coef = array([ 0.92811554]) 
```

我只取返回元组的第一个元素，因为 minimumsq 返回了很多我们不需要的其他信息。

如果您需要拟合更复杂的多项式，例如具有通用中心的椭圆，您可以简单地使用更复杂的函数：

```
def f(coef):
    a,b,cx,cy = coef
    return a*(x-cx)**2+b*(y-cy)**2-1

initial_guess = [0.1,0.1,0.0,0.0]
coef = leastsq(f,initial_guess)[0]
# coef = array([ 0.92624664,  0.93672577,  0.00531   ,  0.01269507]) 
```

### 编辑：

如果由于某种原因您需要估计拟合参数的不确定性，您可以从结果的协方差矩阵中获取此信息：

```
res = leastsq(f,initial_guess,full_output=True)
coef = res[0]
cov  = res[1]
#cov = array([[ 0.02537329, -0.00970796, -0.00065069,  0.00045027],
#             [-0.00970796,  0.03157025,  0.0006394 ,  0.00207787],
#             [-0.00065069,  0.0006394 ,  0.00535228, -0.00053483],
#             [ 0.00045027,  0.00207787, -0.00053483,  0.00618327]])

uncert = sqrt(diag(cov))
# uncert = array([ 0.15928997,  0.17768018,  0.07315927,  0.07863377]) 
```

协方差矩阵的对角线是每个参数的方差，所以不确定性是它的平方根

查看[http://www.scipy.org/Cookbook/FittingData](http://www.scipy.org/Cookbook/FittingData)以获取有关拟合程序的更多信息。

我使用了 leastsq 而不是更容易使用的 curve_fit 函数的原因是，curve_fit 需要形式为显式的函数`y = f(x)`，并且并非每个隐式多项式都可以转换为该形式（或者更好的是，几乎没有有趣的隐式多项式完全）**

# objective-c - 核心音频：明明一包=4字节，怎么可能一包=一字节

> ID：13604612
> 
> 赞同：3
> 
> 时间：2012-11-28T12:01:49.557
> 
> 标签：objective-c, ios, c, core-audio, packet

我正在*[学习核心音频](http://www.informit.com/store/learning-core-audio-a-hands-on-guide-to-audio-programming-9780321636843)*中的核心音频转换服务，我被他们的[示例代码](http://www.informit.com/store/learning-core-audio-a-hands-on-guide-to-audio-programming-9780321636843)中的这个示例所震惊：

```
while(1)
{
    // wrap the destination buffer in an AudioBufferList
    AudioBufferList convertedData;
    convertedData.mNumberBuffers = 1;
    convertedData.mBuffers[0].mNumberChannels = mySettings->outputFormat.mChannelsPerFrame;
    convertedData.mBuffers[0].mDataByteSize = outputBufferSize;
    convertedData.mBuffers[0].mData = outputBuffer;

    UInt32 frameCount = packetsPerBuffer;

    // read from the extaudiofile
    CheckResult(ExtAudioFileRead(mySettings->inputFile,
                                 &frameCount,
                                 &convertedData),
                "Couldn't read from input file");

    if (frameCount == 0) {
        printf ("done reading from file");
        return;
    }

    // write the converted data to the output file
    CheckResult (AudioFileWritePackets(mySettings->outputFile,
                                       FALSE,
                                       frameCount,
                                       NULL,
                                       outputFilePacketPosition / mySettings->outputFormat.mBytesPerPacket, 
                                       &frameCount,
                                       convertedData.mBuffers[0].mData),
                 "Couldn't write packets to file");

    // advance the output file write location
    outputFilePacketPosition += (frameCount * mySettings->outputFormat.mBytesPerPacket);
} 
```

请注意如何`frameCount`定义为`packetsPerBuffer`..`packetsPerBuffer`在这里定义：

```
UInt32 outputBufferSize = 32 * 1024; // 32 KB is a good starting point
UInt32 sizePerPacket = mySettings->outputFormat.mBytesPerPacket;    
UInt32 packetsPerBuffer = outputBufferSize / sizePerPacket; 
```

难倒我的部分`AudioFileWritePackets`被称为..在[文档](https://developer.apple.com/library/mac/#documentation/MusicAudio/Reference/AudioFileConvertRef/Reference/reference.html#//apple_ref/c/func/AudioFileWritePackets)AudioFileWritePackets 第三和第五个参数定义为：

**inNumBytes** *正在写入的音频数据的字节数。*

**ioNumPackets** *在输入上，一个指向要写入的数据包数量的指针。在输出时，指向实际写入的数据包数量的指针。*

然而在代码中，两个参数都给出了 frameCount .. 这怎么可能？我知道 PCM 数据 1 帧 = 1 个数据包：

```
// define the ouput format. AudioConverter requires that one of the data formats be LPCM
audioConverterSettings.outputFormat.mSampleRate = 44100.0;
audioConverterSettings.outputFormat.mFormatID = kAudioFormatLinearPCM;
audioConverterSettings.outputFormat.mFormatFlags = kAudioFormatFlagIsBigEndian | kAudioFormatFlagIsSignedInteger | kAudioFormatFlagIsPacked;
audioConverterSettings.outputFormat.mBytesPerPacket = 4;
audioConverterSettings.outputFormat.mFramesPerPacket = 1;
audioConverterSettings.outputFormat.mBytesPerFrame = 4;
audioConverterSettings.outputFormat.mChannelsPerFrame = 2;
audioConverterSettings.outputFormat.mBitsPerChannel = 16; 
```

但相同的 lPCM 格式也清楚地表明每个数据包有 4 个字节（= 每帧 4 个字节）..

那么这是如何工作的呢？（这同样适用于同一章中使用`AudioConverterFillComplexBuffer`代替的另一个示例`ExtAudioFileRead`，并使用数据包而不是帧..但它是同一回事）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T16:12:36.993

我认为你是对的，根据`AudioFile.h`头文件中的定义，`AudioFileWritePackets`应该将正在写入的音频数据的字节数作为第三个参数，并且在那个 Learning Core Audio 示例中，`framecount`变量定义为数据包的数量，而不是字节数。

我尝试了这些示例，并得到了完全相同的输出`(framecount * 4)`，`0`甚至`-1`作为`AudioFileWritePackets`函数调用的第三个参数。所以对我来说，该函数似乎与 .h 文件中定义的不完全一样（不需要第三个参数），并且在那个例子中，本书的作者也没有注意到这个错误——我可能是虽然错了。

# javascript - 如何找到一组单选按钮的值？

> ID：13604613
> 
> 赞同：1
> 
> 时间：2012-11-28T12:01:53.210
> 
> 标签：javascript, html, radio-button

我有一个函数循环遍历表单并查找每个元素的值，例如复选框、输入字段等，因为它循环遍历此表单的标签，它将它们添加到字符串中，例如，如果我有一个选择带有多个选项标签的标签，它将获取选择标签的值，方便选择标签的当前选择值，并将其添加到字符串中。

问题是，单选按钮似乎在它们存储当前值的表单中没有位置。我知道单选按钮是按名称分组的，但是如何在不使用单选按钮标签的 id 的情况下找出选择了哪个单选按钮？此外，我的表单将有几个不同的单选按钮组，并且必须能够在我单击提交后单独检索每个单选按钮组的值。

这是一个示例单选按钮表单

```
 <form id="radioTestForm">
        <input type="radio" name="group1" value="cows">1</input>
        <input type="radio" name="group1" value="ducks">2</input>
        <input type="button" onclick="radioTest()" value="submit"></input>
    </form> 
```

最后一点，我不能为此使用 jquery，它必须在 javascript 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T12:06:59.917

```
function getRadioValue()
{
    for (var i = 0; i < document.getElementsByName('group1').length; i++)
    {
        if (document.getElementsByName('group1')[i].checked)
        {
            return document.getElementsByName('group1')[i].value;
        }
    }
} 
```

**[工作演示](http://jsfiddle.net/NRn6F/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T12:09:04.437

假设这是你的表格

```
<form name="form1">
Apple <input type="radio" name="fruit" checked value="apple" >
Orange <input type="radio" name="fruit" value="orange" >
Apricot <input type="radio" name="fruit" value="apricot" >
</form>

<input type="button" onclick="whichFruit()" value="Choose a fruit"> 
```

您将检测到如下选择的单选按钮

```
function wichFruit()
{
  var element = document.form1.fruit;
  for (var i=0; i < element.length; i++)
  {
    if (element[i].checked)
    {
      var fruit = element[i].value;
      break;
    }
  }
} 
```

# clearcase - 当人们可以在他们的 clearcase 中配置远程副本时，为什么需要 CCRC 工具？

> ID：13604614
> 
> 赞同：1
> 
> 时间：2012-11-28T12:01:53.347
> 
> 标签：clearcase, clearcase-ucm, clearcase-remote-client

我们有多个副本，我们正在配置我们的 clearcase 许可证服务器。

有时人们甚至会配置为远程副本。

但是最近我们在北美的团队成员想要访问我们的透明箱内容（我们在印度有复制品），所以有人建议使用 CCRC。

当地理距离增加时，会影响性能吗？这就是人们去CCRC的原因吗？

为什么需要 CCRC 工具？

我们正在使用 Clearcase UCM。CCRC是否支持deliver和rebase操作？是否可以同时使用 CCRC 进行动态和快照视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T12:19:25.617

CCRC 工具主要是因为许可成本问题而被采用的；）

主要区别在于副本之间没有定期同步，因为 CCRC 是使用 CCRC 服务器更新 Web 视图的轻客户端（这里没有副本）。
网络负载实际上随着 CCRC 降低（与多工具同步相反）。

但是，这意味着您将只使用**web 视图**，它们是“通过 WAN”的快照视图：不再有动态视图。
他们的视图工作区存储在 CCRC 服务器上。另请参阅“[关于 ClearCase 视图（在 CCRC 中）](https://publib.boulder.ibm.com/infocenter/cchelp/v7r1m0/index.jsp?topic=/com.ibm.rational.clearcase.ccrc.help.doc/topics/c_ccview.htm) ”。
而且您没有`cleartool`CLI（不过，您的 CCRC CLI 稍微不完整：[rcleartool](http://www-01.ibm.com/support/docview.wss?uid=swg21594728)，带有 CCRC 8.0）。

UCM（几乎）受支持：交付和变基。
例如，[CCRC7.1 提供了 Enhanced Rebase and Deliver preview](https://publib.boulder.ibm.com/infocenter/cchelp/v7r1m0/topic/com.ibm.rational.clearcase.relnotes.doc/topics/c_cc_relnotes_features_71.htm#ccfeatures__ccrc_rebase_deliver)。

正如[昨天提到的](http://www.ibm.com/developerworks/forums/thread.jspa?messageID=14913512&tstart=0#14913512)：

> 我想您会发现 ClearTeam Explorer 的最终计划是它将（最终）取代所有 ClearCase GUI。
> 因此，虽然它没有完成所有其他 GUI 所做的所有事情，但它在 8.0 中确实比 CCRC 在 7.1.x 中所做的更多。
> 因此，虽然对于某些管理用例，您现在不能完全没有富客户端，但它确实可以满足最终用户的大部分需求。
> 
> 我想说的是让用户尝试一下，看看它是否适合他们的需求。
> 
> ClearTeam Explorer 还不能完全替代所有 ClearCase GUI。这是一项正在进行的工作。命令也可以这样说`rcleartool`。

# java - JScrollPane 调整监听器和 scrollRectToVisible

> ID：13604617
> 
> 赞同：1
> 
> 时间：2012-11-28T12:02:07.393
> 
> 标签：java, swing, jscrollpane, jscrollbar, jviewport

我需要从`JScrollPane`用户滚动它时开始处理事件。[这里](https://stackoverflow.com/questions/6561246/scroll-event-of-a-jscrollpane)建议使用`addAdjustmentListener`to`JViewport`或 Vertical/Horizo​​ntalScrollBar 。

有什么区别，我应该选择哪种方法？

我也想用`scrollRectToVisible`同样的方法`JScrollPane`，我应该期待`AdjustmentListener`为这种方法工作吗？

另外我想知道是否`scrollRectToVisible`尝试进行最小滚动以使所需的矩形可见还是尝试使其在中间可见`JViewport`？

**UPD：**要求：

1) 有一个 JScrollPane 和一个 JPanel，其中有许多 JLabel(ImageIcon)，所以其中一些是不可见的。

2）当网络事件发生时，我需要向用户显示其中一个 JLabel（使其可见）。如果我最初不可见，则 JScrollPane 应自动滚动。这就是我提到的原因`scrollRectToVisible`。

3) 在带有 ImageIcon 的 JLabel 上方，我需要显示一条消息，解释这个元素发生了什么。由于 JLayeredPane 的层次结构更高，消息目前被实现为另一个带有浮动的 JLabel。现在的问题是，如果用户滚动 JScrollPane，浮动的 JLabel 应该相应地移动到相应的 JLabel(ImageIcon) 之上。

**UDP2：SSCCE**

我还没有实现浮动 JLabel，但我已经不喜欢索引为 11 的标签的反应，`scrollRectToVisible`因为它被裁剪了一半。

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.event.AdjustmentEvent;
import java.awt.event.AdjustmentListener;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.util.ArrayList;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.SwingUtilities;

public class JScrollPaneTest {
    protected ArrayList<JLabel> labels = new ArrayList<JLabel>();

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new JScrollPaneTest();
            }
        });
    }

    public JScrollPaneTest() {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());

                JPanel panel1 = new JPanel ();

                panel1.setLayout(new GridBagLayout());
                GridBagConstraints gbc = new GridBagConstraints();

                for (int i = 0; i < 20; i++) {
                    JLabel label = new JLabel("  | Label" + i + " |  ");
                    panel1.add(label, gbc);
                    labels.add(label);
                }

                panel1.addMouseListener(new MouseAdapter(){
                    public void mousePressed (MouseEvent me) {
                        JLabel label = labels.get(11);
                        label.scrollRectToVisible(label.getBounds());
                    }
                });

                JScrollPane pane = new JScrollPane(panel1) {
                    private static final long serialVersionUID = 1L;

                    @Override
                    public Dimension getPreferredSize() {
                        return new Dimension(600, 400);
                    }
                };

                pane.getHorizontalScrollBar().addAdjustmentListener(new AdjustmentListener() {
                    @Override
                    public void adjustmentValueChanged(AdjustmentEvent e) {
                        System.out.println("adjustmentValueChanged: " + e);
                    }
                });

                frame.getContentPane().add(pane);

                frame.pack();
                frame.setVisible(true);
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T13:39:06.057

部分答案（评论中的代码只是......并注意到我在评论中写错了;-)

scrollRectToVisible 方法在调用它的组件的坐标系中采用一个 Rectangle。要滚动一个孩子使其完全可见，基本上有两个选项（使用*其中一个*）：

```
// either call on child with zero offset
child.scrollRectToVisible(new Rectangle(child.getSize());
// or call on child's parent with child bounds
child.getParent().scrollRectToVisible(child.getBounds()); 
```

# java - 如何在运行时加载和初始化一个类/jar/...，即使它不在类路径中？

> ID：13604620
> 
> 赞同：-2
> 
> 时间：2012-11-28T12:02:12.463
> 
> 标签：java, url, reflection, classloader

我想初始化一个在编译期间未知的类（但实现了一个已知的接口）。

所以我尝试了这样的事情：

```
Class<?> cls = class.foreName("NotKnown",true,ClassLoader.getSystemClassLoader()); 
```

它在 Eclipse 中工作，但作为一个可运行的 jar 文件，我发现这不起作用，因为它不会加载一个不在你的 classPath 中的类。

我怎样才能使它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:25:56.603

您需要创建新的类加载器，该类加载器将从新类所在的文件夹中加载类：

```
ClassLoader cl = new URLClassLoader(new URL[] { ... });
Class<?> cls = cl.loadClass("NotKnown"); 
```

即如果你有一个类`foo.bar.Baz`并且它被编译为`/someFolder/foo/bar/Baz.class`，你应该使用`new File("/someFolder").toURI().toURL()`一个文件夹来加载你的类。

# authentication - ServiceStack AuthFeature.HtmlRedirect 被忽略

> ID：13604625
> 
> 赞同：1
> 
> 时间：2012-11-28T12:02:27.690
> 
> 标签：authentication, servicestack

当我设置身份验证功能重定向属性时，当我访问安全页面时它不会被应用。例如，我将身份验证功能设置为重定向以使用自定义登录页面。

```
authFeature.HtmlRedirect = "http://localhost/SimpleService/login"; 
```

但是，如果我使用安全控制器，则永远不会应用此重定向，它始终使用服务堆栈默认值**"/login"**。它使用的重定向甚至不包括 SimpleService 的原始站点名称。下面的示例控制器。

```
[Authenticate]
public class PrivateController : ControllerBase
{
    public ViewResult SecurePage()
    {
        return View();
    }
} 
```

我还尝试覆盖 Authenticate 属性上的重定向，但无济于事。有没有人知道我可能做错了什么？

```
[Authenticate(HtmlRedirect = "http://localhost/SimpleService/login")]
public class PrivateController : ControllerBase
{
    public ViewResult SecurePage()
    {
        return View();
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T10:41:11.330

我遇到了与上面相同的问题。我发现的一种解决方法是覆盖基本控制器中的 LoginRedirectUrl。这对我有用。

例如

```
public override string LoginRedirectUrl
{
    get
    {
        return "/Account/Login?redirect={0}";
    }
} 
```

# c# - C# Linq OrderBy 过滤空值或空值到最后

> ID：13604630
> 
> 赞同：30
> 
> 时间：2012-11-28T12:02:53.850
> 
> 标签：c#, linq, expression

我尝试制作我的自定义 orderby 扩展方法，我成功地处理了我的代码，但另外我想在结果中最后列出 null 或空或零值，任何人都可以帮助我解决这个问题吗？

这是我对 orderby 的扩展方法

```
 public static IQueryable<T> OrderBy<T>(this IQueryable<T> q, string SortField, bool isAsc)
    {
        //var nullExpr = Expression.Constant(null, typeof(T));
        var param = Expression.Parameter(typeof(T), "p");
        var prop = Expression.Property(param, SortField);
        var exp = Expression.Lambda(prop, param);
        string method = isAsc ? "OrderBy" : "OrderByDescending";
        Type[] types = new Type[] { q.ElementType, exp.Body.Type };
        var mce = Expression.Call(typeof(Queryable), method, types, q.Expression, exp);
        return q.Provider.CreateQuery<T>(mce);
    } 
```

提前致谢

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2014-03-21T06:26:32.903

最简单的方法是使用

```
OrderBy(e => String.IsNullOrEmpty(e.TeamName) 
```

这不需要任何扩展方法或自定义`IComparer`实现等。

```
var entries = repository.Race.Where(e => e.EventId == id)
                      .OrderBy(e => String.IsNullOrEmpty(e.TeamName))
                      .ThenBy(e => e.LastName)
                      .ThenBy(e => e.FirstName); 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-02-01T08:02:21.713

不使用扩展方法....

在使用默认值之前创建自定义`IComparer<string>`以检查空值`String.Compare`。如果使用标准字符串比较，第一次检查将返回 -1 而不是 1 或 1 而不是 -1。

```
/// <summary>
/// Returns -1 instead of 1 if y is IsNullOrEmpty when x is Not.
/// </summary>
public class EmptyStringsAreLast : IComparer<string>
{
    public int Compare(string x, string y)
        {
            if (String.IsNullOrEmpty(y) && !String.IsNullOrEmpty(x))
            {
                return -1;
            }
            else if (!String.IsNullOrEmpty(y) && String.IsNullOrEmpty(x))
            {
                return 1;
            }
            else
            {
                return String.Compare(x, y);
            }
        }
 } 
```

`EmptyStringsAreLast`将您的比较器传递给`OrderBy`Lambda 表达式。在此解决方案中，参加比赛的团队应按字母顺序显示，但非附属比赛条目应出现在最后。

```
var entries = repository.Race.Where(e => e.EventId == id)
                          .OrderBy(e => e.TeamName, new EmptyStringsAreLast())
                          .ThenBy(e => e.LastName)
                          .ThenBy(e => e.FirstName); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-06-21T21:47:59.043

这个答案可能是您最初寻找的 - 使用您的通用扩展方法：

```
 public static IQueryable<T> OrderByFieldNullsLast<T>(this IQueryable<T> q, string SortField, bool Ascending)
    {
        //We are rebuilding .OrderByDescending(p => p.SortField.HasValue).ThenBy(p => p.SortField)
        //i.e. sort first by whether sortfield has a value, then by sortfield asc or sortfield desc

        //create the expression tree that represents the generic parameter to the predicate
        var param = Expression.Parameter(typeof(T), "p");

        //create an expression tree that represents the expression p=>p.SortField.HasValue 
        var prop = Expression.Property(param, SortField);
        var hasValue = Expression.Property(prop, "HasValue");
        var exp = Expression.Lambda(hasValue, param);

        string method = "OrderByDescending";
        Type[] types = new Type[] { q.ElementType, exp.Body.Type };
        var orderByCallExpression = Expression.Call(typeof(Queryable), method, types, q.Expression, exp);

        //now do the ThenBy bit,sending in the above expression to the Expression.Call
        exp = Expression.Lambda(prop, param);
        types = new Type[] { q.ElementType, exp.Body.Type };
        method = Ascending ? "ThenBy" : "ThenByDescending";
        var ThenByCallExpression = Expression.Call(typeof(Queryable), method, types,orderByCallExpression, exp);

        return q.Provider.CreateQuery<T>(ThenByCallExpression);
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-03T16:53:33.987

基于[Dave Anson 的](https://stackoverflow.com/users/2031774/dave-anson)回答，您可以使用[Comparer.Create()](https://msdn.microsoft.com/en-CA/library/hh737198(v=vs.110).aspx)从 lambda 创建 Comparer。`unsorted`这是一个按其`myString`字符串字段排序的示例，`null`最后出现或空字符串。

```
var sorted = unsorted.OrderBy(x => x.myString, Comparer<string>.Create((x, y) => { 
             if ( string.IsNullOrEmpty(y) && !string.IsNullOrEmpty(x)) return -1;
        else if (!string.IsNullOrEmpty(y) &&  string.IsNullOrEmpty(x)) return +1;
        else return string.Compare(x, y);
    })) 
```

（把它们放在第一位，切换`1`常量上的符号）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-15T11:49:52.660

这个对我有用：

```
 private static IQueryable<T> GetOrderQuery<T>(this IQueryable<T> q, BaseFilterCollection filter)
    {
        q = q.OrderBy(GetExpression<T>(filter.SortField));

        var param = Expression.Parameter(typeof(T), "p");
        var prop = Expression.Property(param, filter.SortField);
        var exp = Expression.Lambda(prop, param);
        string method = filter.SortDirection == SortDirectionType.Asc ? "ThenBy" : "ThenByDescending";
        Type[] types = { q.ElementType, exp.Body.Type };
        var rs = Expression.Call(typeof(Queryable), method, types, q.Expression, exp);
        return q.Provider.CreateQuery<T>(rs);
    }

    private static Expression<Func<T, bool>> GetExpression<T>(string sortField)
    {
        ParameterExpression param = Expression.Parameter(typeof(T), "p");
        Expression prop = Expression.Property(param, sortField);

        var info = typeof(T).GetProperty(sortField, BindingFlags.IgnoreCase | BindingFlags.Public | BindingFlags.Instance);
        Expression exp = Expression.Equal(prop, info.PropertyType.IsValueType 
            ? Expression.Constant(Activator.CreateInstance(info.PropertyType)) 
            : Expression.Constant(null));

        return Expression.Lambda<Func<T, bool>>(exp, param);
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-01T17:45:02.570

你不需要复杂化，最简单的方法是做这样的事情：

```
YourList.OrderByDescending(x => string.IsNullOrEmpty(x.value) 
```

使用 OrderByDescending 或 OrderBy 取决于您是想在开头还是最后看到空字符串。

问候

# html - 覆盖表格行样式

> ID：13604639
> 
> 赞同：1
> 
> 时间：2012-11-28T12:03:09.047
> 
> 标签：html, css

我的 CSS 文件中有：

```
.my_table tr {
    background:#BBBBBB;
} 
```

和

```
.my_table tr .hover_style {
    background:#AAAAAA;
} 
```

在我的 HTML 中，我的表的所有行都带有 hover_style：

```
<table class='my_table'>
    <tr class='hover_style'>
    ...
    </tr>
</table> 
```

但所有行都有**#BBBBBB**颜色，但我预计会覆盖颜色**#AAAAAA**；

我哪里错了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T12:04:33.727

你的悬停风格有一个空间。

```
.my_table tr.hover_style {
    background:#AAAAAA;
} 
```

编辑：如果您在选择器之后有一个空格，它将为所有定义了 hover_style 的后代设置样式。在这种情况下，您所说的是“样式化所有具有类 hover_style 的 my_table 表行后代”。您想要的是没有空格，它将为 .my_table 下具有类名 hover_style 的所有 td 行设置样式。

# sql - SQL 查询：如何重新排列输出（转置？）

> ID：13604643
> 
> 赞同：2
> 
> 时间：2012-11-28T12:03:40.277
> 
> 标签：sql, sql-server, tsql, pivot, transpose

我有一个来自 SQL Server 的结果集，如下所示：

```
Zone        M1      M2  M3  M4  M5  M6  M7
NORTH       6233    17743   2   6233    6717    7369    7369
SOUTH       12440   20017   7   8057    9724    13418   13418
WEST        33736   30532   5   2184    2056    1944    1944
EAST        3944    14584   2   728     953     970     970
CENTRAL     6233    3636    2   6233    6717    6825    6825 
```

但我想要它以下列方式：

```
M       NORTH   SOUTH   WEST    EAST    CENTRAL
M1      6233    12440   33736   3944    6233
M2      17743   20017   30532   14584   3636
M3      2       7       5       2       2
M4      .... 
```

这该怎么做？

否则，我怎样才能以这种格式获得它：

```
Zone    M   Value
EAST    M1  6322
WEST    M1  27387
EAST    M2  2345
.... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T14:36:25.980

要获得结果，您需要做的是一个两步的过程，分别实现函数`UNPIVOT`和`PIVOT`函数。

第一步是`UNPIVOT`数据，这需要您的多个列`M1`，`M2`等，并将它们转换为具有值和列名的两列：

```
select zone, value, col
from data
unpivot
(
  value
  for col in ([M1], [M2], [M3], 
              [M4], [M5], [M6], [M7])
) unpiv; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/16b8f/3)

执行完`UNPIVOT`之后，您可以将 应用于`PIVOT`列`Zone`：

```
select *
from
(
  select zone, value, col
  from data
  unpivot
  (
    value
    for col in ([M1], [M2], [M3], 
                [M4], [M5], [M6], [M7])
  ) unpiv
) src
pivot
(
  sum(value)
  for zone in ([North], [South], [West], [East], [Central])
) piv; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/16b8f/4)

现在，如果您无权访问`PIVOT`and`UNPIVOT`函数，则可以使用 a `UNION ALL`for the`UNPIVOT`和带有 a 的聚合函数`CASE`来复制`PIVOT`：

```
select col,
  sum(case when zone='North' then value end) North,
  sum(case when zone='South' then value end) South,
  sum(case when zone='West' then value end) West,
  sum(case when zone='East' then value end) East,
  sum(case when zone='Central' then value end) Central
from
(
  select zone, M1 value, 'M1' col
  from data
  union all
  select zone, M2 value, 'M2' col
  from data
  union all
  select zone, M3 value, 'M3' col
  from data
  union all
  select zone, M4 value, 'M4' col
  from data
  union all
  select zone, M5 value, 'M5' col
  from data
  union all
  select zone, M6 value, 'M6' col
  from data
  union all
  select zone, M7 value, 'M7' col
  from data
) un
group by col 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/5cebc/1)

最后，如果您有未知数量的列要取消转置或转置，那么您可以使用它的动态版本：

```
DECLARE @colsUnpivot AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX),
    @colsPivot as  NVARCHAR(MAX)

select @colsUnpivot = stuff((select ','+quotename(C.name)
         from sys.columns as C
         where C.object_id = object_id('data') and
               C.name not in ('zone')
         for xml path('')), 1, 1, '')

select @colsPivot = STUFF((SELECT  distinct ',' 
                      + quotename(Zone)
                    from data
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query 
  = 'select *
     from
     (
        select zone, value, col
        from data
        unpivot
        (
          value
          for col in ('+ @colsunpivot +')
        ) u
      ) unpiv
      pivot
      (
        max(value)
        for zone in ('+ @colspivot +')
      ) p'

exec(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/16b8f/7)

所有版本都将产生相同的结果。

结果：

```
| COL | CENTRAL |  EAST | NORTH | SOUTH |  WEST |
-------------------------------------------------
|  M1 |    6233 |  3944 |  6233 | 12440 | 33736 |
|  M2 |    3636 | 14584 | 17743 | 20017 | 30532 |
|  M3 |       2 |     2 |     2 |     7 |     5 |
|  M4 |    6233 |   728 |  6233 |  8057 |  2184 |
|  M5 |    6717 |   953 |  6717 |  9724 |  2056 |
|  M6 |    6825 |   970 |  7369 | 13418 |  1944 |
|  M7 |    6825 |   970 |  7369 | 13418 |  1944 | 
```

# javascript - 如何将网站连接到 WCF 服务

> ID：13604646
> 
> 赞同：3
> 
> 时间：2012-11-28T12:03:43.257
> 
> 标签：javascript, wcf

我有一个简单的单页 HTML 网站来获取用户输入和一个 WCF 服务，它接受用户输入并根据输入返回一个字符串列表。

我真的很感激任何将两者联系在一起的指导。只能通过httpBinding和JSON序列化来完成吗？在这种情况下，JSON 是最佳实践吗？

如果是这样，我如何调用该服务？我需要任何服务器端脚本还是客户端的javascript足够？

如果是这样，我如何捕获并输出服务的返回？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T12:06:18.107

通常我使用[Ajax Enabled Wcf Service](http://www.4guysfromrolla.com/articles/111710-1.aspx)，在这种情况下使用 Json 。这对我很有效

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T15:36:25.820

大多数情况下，当您创建 WCF 服务、定义绑定、端点、合同、托管服务和分发客户端时，系统过于不必要的复杂性，而您可以简单地使用[ASP.NET 页面方法 + jQuery](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/)甚至获得摆脱 ScriptManagers。

您可以直接从任何 .html 文件调用 Page Method，您只需要在服务器上有一个单独的 aspx 文件，用户甚至可能不知道它的存在。该方法可以在单个字符串值中返回您的字符串，用任何类似逗号的符号分隔，稍后由 JS 处理。

您使用页面方法有很大的优势，因为该服务内置于 asp.net Web 应用程序中，每次您必须修改服务时，您都无需进行繁重、耗时的机械手工工作。如果你有一个 asp.net 网络应用程序并遵循 KISS 原则，我强烈建议你使用页面方法。

# maven - Jenkins-Sonar-Maven 集成问题

> ID：13604649
> 
> 赞同：1
> 
> 时间：2012-11-28T12:03:48.050
> 
> 标签：maven, maven-2, jenkins, continuous-integration, sonarqube

我一直在尝试将 Sonar 与我们的 Jenkins 持续集成系统集成。我已经为 Jenkins 安装了声纳插件并对其进行了配置（指定了数据库、数据库用户名和密码等）。我还将 sonar-maven-plugin 版本指定为 1.0-beta-2。

除了这个插件配置，我还添加了一个构建后操作来在我的 maven 项目上运行 Sonar。但是每次 Jenkins 尝试执行 sonar:sonar 目标时，它都会失败并出现以下错误。

请帮助我解决这个问题。

谢谢

```
[INFO] Building prof
[INFO]    task-segment: [org.codehaus.mojo:sonar-maven-plugin:1.0-beta-2:sonar] (aggregator-style)
[INFO] ------------------------------------------------------------------------
[INFO] [sonar:sonar {execution: default-cli}]
[INFO] Sonar host: http://inmqbs:9000
[INFO] Sonar version: 3.3.2
[INFO] Execute: org.codehaus.sonar:sonar-maven-plugin:3.3.2:sonar
Downloading: http://troop:8081/nexus/content/groups/platform//org/codehaus/sonar/sonar-maven-   plugin/3.3.2/sonar-maven-plugin-3.3.2.pom
[INFO] Unable to find resource 'org.codehaus.sonar:sonar-maven-plugin:pom:3.3.2' in repository troop-maven-releases (http://troop:8081/nexus/content/groups/platform/)
Downloading: http://troop:8081/nexus/content/groups/platform//org/codehaus/sonar/sonar-maven-plugin/3.3.2/sonar-maven-plugin-3.3.2.pom
[INFO] Unable to find resource 'org.codehaus.sonar:sonar-maven-plugin:pom:3.3.2' in repository  central (http://repo1.maven.org/maven2)
Downloading: http://troop:8081/nexus/content/groups/platform//org/codehaus/sonar/sonar-maven-plugin/3.3.2/sonar-maven-plugin-3.3.2.pom
[INFO] Unable to find resource 'org.codehaus.sonar:sonar-maven-plugin:pom:3.3.2' in repository troop-maven-releases (http://troop:8081/nexus/content/groups/platform/)
Downloading: http://troop:8081/nexus/content/groups/platform//org/codehaus/sonar/sonar-maven-plugin/3.3.2/sonar-maven-plugin-3.3.2.pom
[INFO] Unable to find resource 'org.codehaus.sonar:sonar-maven-plugin:pom:3.3.2' in repository central (http://repo1.maven.org/maven2)
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Can not execute Sonar

Embedded error: Unable to build project for plugin 'org.codehaus.sonar:sonar-maven-plugin':  POM 'org.codehaus.sonar:sonar-maven-plugin' not found in repository: Unable to download the artifact from any repository

  org.codehaus.sonar:sonar-maven-plugin:pom:3.3.2

  from the specified remote repositories:
  internal-repository (http://troop:8081/nexus/content/groups/platform/)

  for project org.codehaus.sonar:sonar-maven-plugin
[INFO] ------------------------------------------------------------------------
[INFO] Trace
org.apache.maven.lifecycle.LifecycleExecutionException: Can not execute Sonar
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals  (DefaultLifecycleExecutor.java:719)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeStandaloneGoal (DefaultLifecycleExecutor.java:569)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal (DefaultLifecycleExecutor.java:539)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:387)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:284)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:180)
at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:328)
at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:138)
at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)
at org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:60)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)
at org.codehaus.classworlds.Launcher.main(Launcher.java:375)
Caused by: org.apache.maven.plugin.MojoExecutionException: Can not execute Sonar
at org.codehaus.mojo.sonar.Bootstraper.executeMojo(Bootstraper.java:103)
at org.codehaus.mojo.sonar.Bootstraper.start(Bootstraper.java:79)
at org.codehaus.mojo.sonar.SonarMojo.execute(SonarMojo.java:88)
at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:490)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals (DefaultLifecycleExecutor.java:694)
... 17 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T12:33:26.023

问题显然来自您的 Nexus 存储库或您在 POM/settings.xml 文件/Jenkins 设置中进行的某些特定配置。您应该联系处理此“http://troop:8081”Nexus 实例的人员以了解如何处理您的问题。

顺便说一句，没有必要强制 sonar-maven-plugin 插件的版本：这只会给你带来麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T13:33:53.867

你使用什么数据库？，如果它默认为 derby 数据库，那么只允许来自本地主机的连接，因此声纳和詹金斯应该在同一台机器上运行。如果这是问题，我可以提供进一步的指导，但简而言之，要么更改数据库，要么更改 derby 连接属性，或者在声纳和詹金斯机器之间提供 ssh 隧道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-04T10:12:48.093

在您的配置中使用 **sonar-maven-plugin 2.0-beta-1** 而不是**sonar-maven-plugin:1.0-beta-2**

# java - Java BC1.47：需要从 CMSSignedData 对象中提取签名者的 X509CertificateObject

> ID：13604650
> 
> 赞同：1
> 
> 时间：2012-11-28T12:03:50.340
> 
> 标签：java, x509certificate, bouncycastle, pkcs#7

我正在尝试使用 java Bouncy Castle 1.47 从 CMSSignedData 对象中提取签名者的 X509CertificateObject。到目前为止，我只能提取一个 org.bouncycastle.asn1.x509.Certificate 对象。如何从中获得 X509CertificateObject？非常感谢！

```
public static X509CertificateObject extractSignersCert(CMSSignedData cmsSignedData)
    throws Exception
{
    SignerInformationStore signerInfoStore;
    SignerInformation signerInfo;
    Store certStore;
    Collection certCollection;
    X509CertificateHolder x509CertHolder;
    X509Certificate cert;
    X509CertificateObject certObj;
    JcaX509CertificateConverter certConverter;

    signerInfoStore = cmsSignedData.getSignerInfos();
    signerInfo = (SignerInformation) signerInfoStore.getSigners().iterator().next();

    certStore = cmsSignedData.getCertificates();
    certCollection = certStore.getMatches(signerInfo.getSID());
    x509CertHolder = (X509CertificateHolder) certCollection.iterator().next();

    certConverter = new JcaX509CertificateConverter();
    certConverter.setProvider("BC");

    cert = certConverter.getCertificate(x509CertHolder);
    certObj = (X509CertificateObject) cert;

    return certObj;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T11:49:57.150

终于根据这篇[文章](https://stackoverflow.com/a/8960906/1740926)找到了解决方案。诀窍是使用 JcaX509CertificateConverter() 并将其与 X509CertificateHolder 一起提供，您可以从 CMSSignedData 轻松获得。工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:40:51.177

您可以使用此方法。

```
/**
 * Get all x509 certificates from p7s File(.p7s or .p7b) Base64 format
 * @param p7sFileName
 * @return list of x509 certificates
 */
public static ArrayList<X509Certificate> getCertificates(final String p7sFileName){

    final ArrayList<X509Certificate> certListResult = new ArrayList<X509Certificate>();

    try {

        BufferedReader br = new BufferedReader(new FileReader(p7sFileName));
        StringBuilder str = new StringBuilder();
        br.readLine();
        while(br.ready()){

            String s = br.readLine();
            if(s.startsWith("-----END PKCS7-----"))
                break;
            else str.append(s);

        }

        byte[] data = Base64.decode(str.toString().getBytes());

        CMSSignedData s = new CMSSignedData(data);
        Store   certStore = s.getCertificates();

        JcaX509CertificateConverter converter = new JcaX509CertificateConverter();

        @SuppressWarnings("unchecked")
        ArrayList<X509CertificateHolder> certificateHolders = (ArrayList<X509CertificateHolder>)certStore.getMatches(null); 

        for(X509CertificateHolder holder: certificateHolders){

                X509Certificate cert = converter.getCertificate(holder);
                certListResult.add(cert);

            }

    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (CMSException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (CertificateException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return certListResult;

} 
```

# php - 在 PHP 中使用带有键的数组内爆

> ID：13604651
> 
> 赞同：0
> 
> 时间：2012-11-28T12:03:56.577
> 
> 标签：php, arrays, csv

我需要在 PHP 中将数组写入 .csv 文件。

示例数组：

```
$array = array(
    "name" => "John",
    "surname" => "Doe",
    "email" => "nowhere@nowhere.com"
); 
```

通过使用`implode(",", $array)`，我得到这样的结果：
`John,Doe,nowhere@nowhere.com`

但是，我还需要将每个元素的键写入文件。

所需的输出是这样的：
`name:John,surname:Doe,email:nowhere@nowhere.com`

我将如何实现这一目标？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-28T12:06:43.657

试试这个代码：

```
$out = $sep = '';
foreach( $array as $key => $value ) {
    $out .= $sep . $key . ':' . $value;
    $sep = ',';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T12:06:41.730

```
$csv = "";

foreach($array as $key => $data)
{
    // be sure to add " in your csv
    $csv .= '"'.$key.':'.$data.'",';
}

// and add a new line at the end
$csv .= "\n";

echo $csv; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-01T22:52:34.353

上面的答案在末尾输出一个逗号。为了纠正这个问题，我使用以下函数：

```
$array = array(
    "name" => "John",
    "surname" => "Doe",
    "email" => "nowhere@nowhere.com"
);
function implodeKV($glueKV, $gluePair, $KVarray){
    $t = array();
    foreach($KVarray as $key=>$val) {
        $t[] = $key . $glueKV . $val;
    }
    return implode($gluePair, $t);
}

echo implodeKV( ':' , ',' , $array);
// outputs  name:John,surname:Doe,email:nowhere@nowhere.com 
```

[http://phpassist.com/2dde2#2](http://phpassist.com/2dde2#2)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-17T17:53:59.610

如果您使用的是 PHP 5.3+，那么匿名函数可以使您的代码更简洁，尽管简单的 for 循环具有最佳性能。（`array_walk`虽然使用接近！）

我用几种不同的方法（使用 PHP 5.4.33）运行了一些测试：

```
function makeArray(&$a) {
    $a = array();
    for($i = 0; $i < 100000; $i++) {
        $a[rand()] = rand();
    }
    return $a;
}

makeArray($array);
$before = microtime(true);
$result = implode(
    ",", 
    array_map(
        function($k, $v) {
            return "$k:$v";
        }, 
        array_keys($array), 
        $array
    )
);
$after = microtime(true);
$dur = $after - $before;
echo "Array Map w/ anonymous function: {$dur}s<br>";

makeArray($array);
$before = microtime(true);
function kv_func($k, $v) {
    return "$k:$v";
}
$result = implode(
    ",", 
    array_map(
        "kv_func", 
        array_keys($array), 
        $array
    )
);
$after = microtime(true);
$dur = $after - $before;
echo "Array Map w/ function: {$dur}s<br>";

makeArray($array);
$before = microtime(true);
array_walk(
    $array,
    function(&$v, $k) {
        $v = "$k:$v";
    }
);
$result = implode(
    ",", 
    $array
);
$after = microtime(true);
$dur = $after - $before;
echo "Array Walk w/ anonymous function: {$dur}s<br>";

makeArray($array);
$before = microtime(true);
$ff = true;
$sep = ",";
$out = "";
foreach($array as $key => $val) {
    if($ff) $ff = false;
    else $out .= $sep;
    $out .= "$key:$val";
}
$after = microtime(true);
$dur = $after - $before;
echo "Foreach loop w/ loop flag: {$dur}s<br>";

makeArray($array);
$before = microtime(true);
$out = "";
foreach($array as $key => $val) {
    $out .= "$key:$val,";
}
$out = substr($out, 0, -1);
$after = microtime(true);
$dur = $after - $before;
echo "Foreach loop + substr: {$dur}s<br>"; 
```

结果：

```
Array Map w/ anonymous function: 0.13117909431458s
Array Map w/ function: 0.13743591308594s // slower than anonymous
Array Walk w/ anonymous function: 0.065797805786133s // close second
Foreach loop w/ loop flag: 0.042901992797852s // fastest
Foreach loop + substr: 0.043946027755737s // comparable to the above 
```

只是为了踢球，我尝试了 for 循环而没有更正尾随逗号。它实际上没有任何影响：

```
Foreach loop w/ trailing comma: 0.044748067855835s 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-28T12:31:30.103

```
<?php
$array = array(
"name" => "John",
"surname" => "Doe",
"email" => "nowhere@nowhere.com"
);
foreach( $array as $key=>$data ) {
$output .= $comma . $key . ':' . $data;
$comma = ',';
}

echo $output;

?> 
```

# java - Android通过.net webservices发送推送通知

> ID：13604652
> 
> 赞同：14
> 
> 时间：2012-11-28T12:03:57.797
> 
> 标签：java, web-services, google-cloud-messaging, android-ksoap2, android-webservice

我正在使用以下网络服务从 Android 发送推送通知。当我第一次调用这个网络服务时，它需要很长时间，并且推送通知没有在 Android 设备上传递。它仅在从 Android 调用时发生。它可以完美地用作 Web 服务。

```
[WebMethod]

    public string SendGcm(String serviceKey,String registrationId ,string message) {
        WebClient wc=new WebClient();
        wc.Headers.Add("Authorization", "key=" + serviceKey);
        NameValueCollection nameValues=new NameValueCollection
            {
                {"registration_id", registrationId},
                {"collapse_key", Guid.NewGuid().ToString()},
                {"data.payload", message}
            };

        var resp=wc.UploadValues("https://android.googleapis.com/gcm/send",
                    nameValues);

        var respMessage = Encoding.Default.GetString(resp);
                return respMessage;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-19T07:51:56.070

用这个 - ：

```
 public void MakeNotificationForAndroid(string DeviceToken, string Body, string Sound, string CustomFrom, string CustomeMsg)
        {
            String DeviceID = "";

            DeviceID = DeviceToken;
            WebRequest tRequest;
            tRequest = WebRequest.Create("https://android.googleapis.com/gcm/send");
            tRequest.Method = "post";
            tRequest.ContentType = "application/x-www-form-urlencoded";
            tRequest.Headers.Add(string.Format("Authorization: key={0}", "AIzaSyBX1gD47uiVp0W_UjNxhwtVsQCNJYfg5vI"));

            String collaspeKey = Guid.NewGuid().ToString("n");
            //String postData=string.Format("registration_id={0}&data.payload={1}&collapse_key={2}", DeviceID, "Pickup Message", collaspeKey);
            String postData = string.Format("registration_id={0}&data.message={1}&collapse_key={2}&data.sound={3}&data.type={4}", DeviceID, Body, collaspeKey, Sound, CustomeMsg);

            Byte[] byteArray = Encoding.UTF8.GetBytes(postData);
            tRequest.ContentLength = byteArray.Length;

            Stream dataStream = tRequest.GetRequestStream();
            dataStream.Write(byteArray, 0, byteArray.Length);
            dataStream.Close();

            WebResponse tResponse = tRequest.GetResponse();

            dataStream = tResponse.GetResponseStream();

            StreamReader tReader = new StreamReader(dataStream);

            String sResponseFromServer = tReader.ReadToEnd();

            tReader.Close();
            dataStream.Close();
            tResponse.Close();
        } 
```

# javascript - 告诉 AngularJs 通过依赖注入返回一个新实例

> ID：13604655
> 
> 赞同：22
> 
> 时间：2012-11-28T12:04:07.890
> 
> 标签：javascript, angularjs

用例很简单：我有两个控制器共享相同的依赖项`MyService`。该服务处于某种状态，让我们坐下`myVariable`。如果我从 设置它`ControllerOne`，那么它也会被`ControllerTwo`.

我想要的是每个控制器都有它自己的实例`MyService`，这样`myVariable`每个控制器都可以更改它而不影响另一个。

换句话说 - 我希望**新实例**由依赖注入返回，**而不是 singleton**。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-28T16:59:57.290

不像你希望的那样直接。服务实例是在第一次被注入器检索并由注入器维护时创建的……换句话说，它们总是单例的。[神奇的地方发生在这里](https://github.com/angular/angular.js/blob/master/src/auto/injector.js)，特别是看看这个`provider`函数，它将提供者实例放在 providerCache 对象中。

但是不要失去希望，如果您选择了，您可以轻松地为要在服务中共享的任何内容添加构造函数：

```
app.factory('myService', [function() {
     var i = 1;

     function Foo() {
        this.bar = "I'm Foo " + i++;
     };

     return {
          Foo: Foo
     };
}]);

app.controller('Ctrl1', function($scope, myService) {
  $scope.foo = new myService.Foo();
  console.log($scope.foo.bar) //I'm Foo 1
});

app.controller('Ctrl2', function($scope, myService) {
  $scope.foo = new myService.Foo();
  console.log($scope.foo.bar) //I'm Foo 2
}); 
```

编辑：正如 OP 所指出的，还有[$injector.instantiate](http://docs.angularjs.org/api/AUTO.%24injector)，您可以使用它在控制器之外调用 JavaScript 构造函数。我不确定这里的可测试性意味着什么，但它确实为您提供了另一种注入代码的方法，该代码将为您构建一个新对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-04T23:38:09.447

模块化 JavaScript 代码有很多通用选项，但如果你想做一些完全依赖 AngularJS 的事情，这种模式可以工作：

1）首先定义要多次注入的类：

```
function MyClass() {
  // ...
}

MyClass.prototype.memberMethod = function() {
  // ...
} 
```

2) 接下来，使构造函数可用作常量：

```
angular.module('myModule').constant('MyClass', MyClass); 
```

3) 最后，使用工厂模式创建类的命名、可注入实例：

```
angular.module('myOtherModule', ['myModule']).factory('instanceOfMyClass', [
   'MyClass', 
   function(MyClass) { return new MyClass(); }
]); 
```

# javascript - jquery自动填充/自动完成没有下拉

> ID：13604656
> 
> 赞同：0
> 
> 时间：2012-11-28T12:04:18.543
> 
> 标签：javascript, jquery, autocomplete, autofill

我正在尝试对输入元素实现“自动填充”功能。

基本上，它接受一个范围（2000 - 20012）的 4 位数年份作为输入。我想知道当用户键入年份的第一个数字时，是否可以让输入自动填充（类似于 Chrome 的 URL 窗格在键入您之前键入的内容时）。

例如，当用户键入“2”时，输入应自动填充，例如 2000。然后，用户可以使用“向上”和“向下”箭头来循环显示年份。自动填充不应基于以前的搜索，而应以上述方式工作。此外，它不应该有下拉菜单。

我已经搜索和搜索，但只找到带有下拉菜单的自动完成功能，但没有自动填充功能。我还尝试了`<input type="number" />`上下循环部分，但它没有自动填充功能，并且在 Firefox 中不起作用。

有没有一个jQuery解决方案？

**后期编辑：**

我找到了 dateEntry 插件，但我找不到让它将年份显示为 4 位数的方法。尝试了各种日期格式，例如`'Y'`, `'yyyy'`，`'/Y'`但还没有运气。有谁知道正确的格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:27:21.447

**我敢肯定它并不完美。但这可以给你一个开始：**

```
 <div id="wrapper" style="border:1px solid #333;width:200px;max-width:200px;overflow:hidden;display:block;">
        <div contenteditable="true" id="myTxt" onfocus="$(this).attr('style','padding-left:5px;min-width:20px;border:none;width:auto;display:inline;')" onblur="$(this).attr('style','width;auto;display:inline;');" style="padding-left:5px;min-width:20px;border:none;width:auto;display:inline;"></div>
        <input type="text" id="suggestions" placeholder="" onfocus="$(this).prev().focus();updateValue(this);" style="border:none; solid;width:auto;"/>
    </div>

<script type="text/javascript" src="jquery.js" ></script>
<script type="text/javascript">
function updateValue(element){
     var value = $(element).attr('placeholder');
     $('#myTxt').html( $('#myTxt').html() +value);
     $(element).attr('placeholder','');
}
$(document).bind('keyup', function(){
    showSuggesstions($('#myTxt'));
});
function showSuggesstions(element) {
    var list='';        
    var value = $(element).text();
    if(!value)
        return;
    if(value.length==4){
        $('#suggestions').attr('placeholder','');
        return;
    }
    for(var val=2000; val< 3000; val++){
        if( (val+'').indexOf(value) == 0){
            list = (val+'').substring(value.length, val.length);
            break;
        }
    }
    $('#suggestions').attr('placeholder', list);
}
</script> 
```

# networking - 点对点聊天理论

> ID：13604661
> 
> 赞同：4
> 
> 时间：2012-11-28T12:04:25.657
> 
> 标签：networking, network-programming, chat, p2p

使用加密编程点对点聊天的最佳方式是什么。SSL 对 p2p 有用吗，因为客户端没有威瑞信签名的证书，...？是否可以在没有主服务器的情况下编写这样的聊天程序来告诉客户端他们聊天伙伴的 IP？

我真的很想编写这样一个聊天程序，因为在所有这些隐私问题的时候，我想要一个我真正可以信任的程序。我有一些网络编程经验，但只有客户端<->服务器。

我不想要任何代码，只是点对点聊天的理论部分（如Skype）。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T06:02:20.127

首先，您可以在两端强制使用自签名证书，或者您甚至可以使用“预共享密钥”而不是证书进行身份验证。预共享密钥应该被所有相关方提前知道。

其次，SSL 是一种加密机制，因此它与通信模型（即客户端/服务器与 p2p 的设计）无关。

最后，如果您的两个 p2p 节点都有公共或实时 ip，并且每个节点都知道对方的，那么您不需要任何类型的中央服务器。这里真正的问题是，在实践中，大多数机器都在使用 NAT 和私有 ip 的防火墙后面。所以你需要某种机制来穿越 NAT，确定公共 ip 和端口，以便成功到达目标机器。

看看下面的[SO question](https://stackoverflow.com/a/13334629/986760)，它是我写的答案。它提到了一些常见的 p2p 应用程序使用的技术，例如 skype（对 skype 协议的了解是有限的，因为它是专有的）、gtalk 以及其他基于 XMPP 的聊天应用程序。

# uninstallation - Inno 安装程序卸载

> ID：13604662
> 
> 赞同：0
> 
> 时间：2012-11-28T12:04:27.703
> 
> 标签：uninstallation

这是我的情况，如下所示：我有三个文件：file1.txt、file2.txt 和 file3.exe

1.  我想将其中三个放入 C:\Program Files 的目录中，运行 file3.exe 并创建一个卸载程序以通过双击卸载所有内容。

2.  当我双击卸载程序时，file3.exe 将被卸载，并且所有文件都将从该目录中删除。

我刚迈出第一步，我该怎么做才能迈出第二步？先谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-09T07:15:03.120

您可以使用以下 inno setup 的代码片段，

```
[Files]
Source: "file3.exe"; DestDir: "{app}"; Flags: ignoreversion
Source: "file1.txt"; DestDir: "{app}"; Flags: ignoreversion
Source: "file2.txt"; DestDir: "{app}"; Flags: ignoreversion

[Run]
Filename: "{app}\file3.exe"; Description: "{cm:LaunchProgram,{#StringChange(MyAppName, '&',   '&&')}}"; Flags: nowait postinstall skipifsilent 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T04:27:43.077

[这](http://www.codeproject.com/Articles/31454/How-To-Make-Your-Application-Delete-Itself-Immedia)是一个很好的解决方案

或者我使用了这个：创建一个可执行文件，它可以创建一个批处理文件，该文件将卸载应用程序并自行删除

# assembly - 什么是十六进制的NULL

> ID：13604664
> 
> 赞同：7
> 
> 时间：2012-11-28T12:04:35.383
> 
> 标签：assembly, powerpc

我必须在汇编程序中调试 C 应用程序。我想知道一个寄存器是否包含一个 `NULL`. 我需要它的十六进制值。

笔记：

我使用 PPC

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T12:06:45.993

Null 为`00`十六进制。

请参考： [http ://www.asciitable.com/](http://www.asciitable.com/)

# git - Git 克隆因“refs/heads/master 未指向有效对象”而失败

> ID：13604669
> 
> 赞同：2
> 
> 时间：2012-11-28T12:04:50.197
> 
> 标签：git, git-clone

```
C:\Users\xxx\temp>git clone D:\userdata\Dropbox\gitrepo\main.git
Cloning into 'main'...
error: unable to find 0fb6364a712239ae87e4abb35e155a04e960c788
error: refs/heads/master does not point to a valid object!
done.
error: Trying to write ref HEAD with nonexistent object 0fb6364a712239ae87e4abb3
5e155a04e960c788
fatal: Cannot update the ref 'HEAD'.
fatal: The remote end hung up unexpectedly 
```

我的 git repo 存储在 Dropbox 中，在我自己的计算机上这个命令工作正常，但在另一台计算机上它给了我上述错误。有任何想法吗？（当然回购是同步的）

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T07:25:30.330

这个问题的根本原因是由于写权限，Dropbox 没有完全同步我的 repo，而不是 Git 问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-05-23T02:16:48.850

也许你没有编写 git 文件的权限。

# android - 确定应用程序是处于前台还是后台还是已终止状态

> ID：13604676
> 
> 赞同：0
> 
> 时间：2012-11-28T12:05:19.923
> 
> 标签：android, android-intent, android-c2dm, google-cloud-messaging

我想在使用 GCM 通知方法收到通知时检查我的 android 应用程序是否处于后台、前台或已终止状态。这是根据应用程序的状态做不同的操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:33:26.050

最简单的选择是重载在每个[状态更改](http://developer.android.com/reference/android/app/Activity.html)时运行的不同活动方法。从那里您可以在 gcm 通知方法中读取该变量，并采取相应措施。

# python - 在组中存储数据的问题

> ID：13604679
> 
> 赞同：0
> 
> 时间：2012-11-28T12:05:23.783
> 
> 标签：python, django

我从管理面板创建了一个*“通用”组。*

现在我想当一个新用户注册到我的应用程序时，它会*默认分配给这个组*并存储在`user_id`and`group_id`的中间表`auth_user`中`auth_group`。

其实我自己试过这个并得到错误。

编辑

```
def signup(request, template="accounts/account_signup.html"):
    """
    Signup form.
    """
    profile_form = get_profile_form()
    form = profile_form(request.POST or None)
    #return render_to_response('test.html',{'q':email},context_instance=RequestContext(request))
    if request.method == "POST" and form.is_valid():
        new_user = form.save()
    group_id=Group.objects.get(id=1)
    group_id.groups.add(new_user)
    #group = User_Groups(user=new _user,group=1)
    #group.save()
    last_inserted_id = User.objects.order_by('-id')[0]
    value_email = last_inserted_id.email
    ............... 
```

错误

> “组”对象没有属性“组”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:13:37.053

首先，这将帮助您了解您遇到的错误

```
group_id = Group.objects.get(id=1) 
```

在这里，`group_id`成为模型的一个实例`Group`。 `Group`并且它的实例有属性`name`, 和`permissions`。

```
group_id.groups.add(new_user) 
```

是胡说八道。`groups`是`User`and not的一个属性`Group`。将 group_id 替换为 new_user ：

```
new_user.groups.add(group_id) 
```

这会将 group_id（应该命名为 group）添加到 new_user 所属的组列表中。

# java - 通过 System.setProperty 设置内存怎么没有影响？

> ID：13604681
> 
> 赞同：0
> 
> 时间：2012-11-28T12:05:25.940
> 
> 标签：java, jvm

```
import java.io.*;
import java.util.*;
public class ReadPropertiesFile {       
    public static void main(String[] args)throws Throwable{                
        Properties prop = new Properties();                
        prop.load(new FileInputStream(
            "C:\\Windows\\Sun\\Java\\Deployment\\deployment.properties"));
        String Xmx = prop.getProperty("deployment.javaws.jre.0.args",
                                      "This is Default"); 
        if(Xmx!="This is Default")
        {
            System.setProperty("javaplugin.vm.options","\"Xmx\"");
        }
        long maxMemory = Runtime.getRuntime().maxMemory();
        System.out.println("JVM maxMemory also equals to maximum heap size of JVM: "
                                         + maxMemory);
    }
} 
```

它应该打印`maxMemory around 96MB(for 2 gb RAM)`when 没有指定的值`deployment.properties AND 512MB`when 明确提到`deployment.javaws.jre.0.args=-Xmx512m.But in both case i am getting the result 259522560`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T12:09:47.230

Hotspot Java 实现的 JVM 内存参数只能在 JVM 启动/启动时通过命令行选项设置。在 JVM 启动之前或之后在系统属性中设置它们将无效。

您尝试做的事情根本行不通。

当*任何*Java 代码能够运行时，更改堆大小设置*为时已晚。*无论您是使用`java`命令、使用 web start、使用 applet 运行器、使用浏览器中的嵌入式 JVM ...*或任何其他方式*运行代码，都是一样的。

# java - 我可以在循环或其他情况下动态创建新方法吗

> ID：13604684
> 
> 赞同：0
> 
> 时间：2012-11-28T12:05:40.847
> 
> 标签：java, loops, methods

在学校我们要做一个程序，就是你输入个人信息，比如姓名、年龄等。您有一个按钮用于保存信息，一个按钮用于输入信息。

我这样保存这些信息：

*   Person.name = Name.getText();
*   Person.age = age.getText();
*   Person.sex = sex.getText();

然后我有一个方法。它获取并保存此信息。因为只有一个按钮可以保存信息。你能为每个你拯救的新人制定新的方法吗？您是否应该循环执行。每次按下都会循环出新方法？如何。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:09:24.463

每次要保存 Person 数据时，您都不需要“制作新方法”。关键是创建一个动态的方法，这意味着您必须有权访问 Person 类/数据并按照您的定义进行操作： person.setName(name.getText());

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T12:27:16.620

每次保存时都不需要新方法，您需要一个新的 Person 对象。按下保存时调用的方法应该接受 Person 作为参数。所以按下保存它会创建一个新的 Person 对象并像你已经做的那样填充它，Person.name = Name.getText();, Person.age = age.getText(); 等等。然后将该填充的 Person 对象传递给一个方法，该方法具有保存它的所有代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T12:59:29.360

您不需要每次都创建新方法，您只需创建一个名为`Person`并将其属性定义为的类`Name`，`Age`并`Sex`创建访问此变量并设置此变量的方法，如下所示：

```
class Person{
   String Name="";
   String Age="";
   String Sex="";

   public String getName(){
    return Name;
   }

   public String setName(String Name){
    this.Name=Name;
   }

   public String getAge(){
    return Age;
   }

   public String setAge(String Age){
    this.Age=Age;
   }

   public String getSex(){
    return Name;
   }

   public String setName(String Sex){
    this.Sex=Sex;
   }

} 
```

您可以通过将此类的对象设置为以下方式来访问此方法和变量`Person`：

```
Class UsePerson{
  public static void main(String ar[]){
    Person p=new Person();
    p.setName("ABC");   //Here You set the Name of the person
    String name=p.getName();   //Here you'll get the name of Person

  }
} 
```

# c++ - 从命令行运行本机 VS2012/C++ 64 位单元测试

> ID：13604691
> 
> 赞同：15
> 
> 时间：2012-11-28T12:05:59.523
> 
> 标签：c++, unit-testing, dll, mstest, native

我正在尝试从命令行运行单元测试。我尝试使用以下命令使用 mstest.exe 程序：

```
E:\VS Projects\...\>"C:\Program Files (x86)\Microsoft Visual Studio 11.0\
    Common7\IDE\MSTest.exe" /testcontainer:mytest.dll 
    /testsettings:"E:\VS Projects\...\Local.testsettings" 
```

mstest 程序的响应是：

```
Microsoft (R) Test Execution Command Line Tool Version 11.0.50727.1
Copyright (c) Microsoft Corporation. All rights reserved.

Loading E:\VS Projects\...\Local.testsettings...
Loading mytest.dll...
mytest.dll
Unable to load the test container 'mytest.dll' or one of its 
dependencies. If you build your test project assembly as a 64 bit assembly, 
it cannot be loaded. When you build your test project assembly, select "Any 
CPU" for the platform. To run your tests in 64 bit mode on a 64 bit 
processor, you must change your test settings in the Hosts tab to run your 
tests in a 32 bit process. Error details: Could not load file or assembly 
'file:///E:\VS Projects\...\mytest.dll' or one of its dependencies. The 
module was expected to contain an assembly manifest. 
```

Local.testsettings 确实包含测试应在 64 位环境中运行的信息。

我可以猜到，mstest 需要一个程序集而不是本机测试项目，这就是它失败的原因。如果是这样，我如何从命令行运行*本机*测试？在另一种情况下，我应该如何配置 mstest 才能正常工作？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-29T10:24:34.283

感谢汉斯·帕桑特的指导。

解决方案是使用：

C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\CommonExtensions\Microsoft\TestWindow\vstest.console.exe

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-27T01:59:18.030

另一种选择是安装`Catch2`，它允许您从命令提示符将单元测试项目作为 exe 运行并显示结果：

[https://github.com/catchorg/Catch2](https://github.com/catchorg/Catch2)

```
C:\Projects\T9Predict\T9PredictTests\Debug\> T2PredictTests.exe
T2PredictTests.exe

C:\Projects\T9Predict\T9PredictTests\T2PredictTests.cpp(33): FAILED!
  REQUIRE( result[0] == "hello" )
with expansion:
  "" == "hello
===============================================================================
test cases: 2 | 1 passed | 1 failed
assertions: 2 | 1 passed | 1 failed 
```

# java - 选项卡 URL 操作特定选项卡 url 更新

> ID：13604693
> 
> 赞同：0
> 
> 时间：2012-11-28T12:06:11.443
> 
> 标签：java, javascript, jsp

我可以这样做吗？

我有 2 个选项卡说 T1 和 T2，三个 URL 说 U1、U2 和 U3 最初，U1 在 T1 中打开，在某些点击操作中，U2 在 T2 中打开。在 T2 中浏览 U2 时，我可以在 U2 页面中放置一个按钮，以便单击它会在 T1 中打开 U3（假设 T1 仍处于打开状态，如果它已关闭，则为新选项卡 T3）？

我在 JSP 环境中工作。任何使用 javascript/java 的逻辑都可以。

**添加：**

有什么方法可以访问 U2 页面（在 T2 选项卡中打开）的代码（Javascript 或 JSP）内的 URL U1（在 T1 中打开）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:20:02.413

如果您使用 JavaScript 打开新窗口，您可以提供一个窗口名称，以便以后重新使用该窗口。

# symfony - 未在奏鸣曲包中定义的实体管理器

> ID：13604695
> 
> 赞同：0
> 
> 时间：2012-11-28T12:06:16.603
> 
> 标签：symfony, sonata-admin

我已经集成了奏鸣曲管理包。然后我成功地集成了奏鸣曲新闻包。然后我创建了一个自定义包。我想使用奏鸣曲包将此包配置为我的 CMS 包。我可以在管理部分显示我的 CMS 包，但是当我尝试编辑或添加新项目时，我收到一个错误：

> 没有为 Fcse\CmsBundle\Entity\Book 500 类定义实体管理器
> 
> 内部服务器错误 - RuntimeException

当我运行命令时，书是我的实体

```
app/console doctrine:schema:update --force 
```

书表也没有创建。我在配置中遗漏了什么吗？

我的配置文件很大。我正在发布我的 cms 捆绑包的代码。

```
fcse_cms:
    title:        Sonata Project
    link:         http://local.demo
    description:  Cool bundles on top of Symfony2
    salt:         'secureToken'
    class:
       book:       Fcse\CmsBundle\Entity\Book

    admin:
        book:
            class:       Fcse\CmsBundle\Admin\BookAdmin
            controller:  SonataAdminBundle:CRUD
            translation: CmsBundle

doctrine:
    orm:
        entity_managers:
            default:
                #metadata_cache_driver: apc
                #query_cache_driver: apc
                #result_cache_driver: apc
                mappings:
                     FcseCmsBundle: ~ 
```

我在 app/config.yml 中导入这个文件。

# c++ - 富文本编辑器--创建和维护项目符号列表的问题

> ID：13604700
> 
> 赞同：0
> 
> 时间：2012-11-28T12:06:27.700
> 
> 标签：c++, visual-c++, mfc, richedit, ui-design

我在丰富的编辑控件中创建了一个项目符号列表，但我面临以下问题，我试图按顺序告诉你。

1.  按子弹按钮生成子弹。
2.  项目符号列表/段落将像 MS word 一样开始。
3.  保存文档。
4.  重新加载相同的文档 --> 现在它的行为很奇怪。由于用户无法删除项目符号，它增加了对项目符号的保​​护，也不会维护段落，用户需要再次单击项目符号按钮才能开始项目符号段落。

***见下面的代码：***

# 代码示例

```
 PARAFORMAT Pfm;
    richedit->GetParaFormat(Pfm);
Pfm.cbSize = sizeof(PARAFORMAT);
Pfm.dwMask = PFM_NUMBERING;

Pfm.wNumbering = PFN_BULLET;

richedit->SetParaFormat(Pfm);
richedit->SetFocus(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T06:36:28.800

1.  如果您使用的是 Document View Arch，请尝试此代码

    ```
    PARAFORMAT Pfm = this->GetParaFormatSelection();
    Pfm.cbSize = sizeof(PARAFORMAT);
    Pfm.dwMask = PFM_NUMBERING;

    Pfm.wNumbering = PFN_BULLET;

    this->SetParaFormat(Pfm);
    this->SetFocus(); 
    ```

2.  如果您使用 Control，请将您的文档保存为 RTF 格式。这将使您的项目符号结构保持原样。富文本框理解 RTF 格式，可以按原样读取和保存文档。

# java - 如何在 Java 8 中定义一个将 lambda 作为参数的方法？

> ID：13604703
> 
> 赞同：430
> 
> 时间：2012-11-28T12:06:32.190
> 
> 标签：java, lambda, java-8

在 Java 8 中，方法可以创建为 Lambda 表达式，并且可以通过引用传递（在后台做一些工作）。网上有很多关于创建 lambda 并将其与方法一起使用的示例，但没有关于如何制作将 lambda 作为参数的方法的示例。它的语法是什么？

```
MyClass.method((a, b) -> a+b);

class MyClass{
  //How do I define this method?
  static int method(Lambda l){
    return l(5, 10);
  }
} 
```

* * *

## 回答 #1

> 赞同：290
> 
> 时间：2012-11-28T12:09:03.720

Lambda 纯粹是一个调用站点构造：lambda 的接收者不需要知道涉及到 Lambda，而是接受具有适当方法的接口。

换句话说，您定义或使用一个功能接口（即具有单个方法的接口），它可以准确地接受并返回您想要的内容。

为此，Java 8 附带了一组常用的接口类型[`java.util.function`](http://docs.oracle.com/javase/8/docs/api/java/util/function/package-summary.html)（感谢[Maurice Naftalin](https://stackoverflow.com/users/1859863/maurice-naftalin)对 JavaDoc 的提示）。

对于这个特定的用例，[`java.util.function.IntBinaryOperator`](http://docs.oracle.com/javase/8/docs/api/java/util/function/IntBinaryOperator.html)只有[一个`int applyAsInt(int left, int right)`方法](http://docs.oracle.com/javase/8/docs/api/java/util/function/IntBinaryOperator.html#applyAsInt-int-int-)，所以你可以这样写`method`：

```
static int method(IntBinaryOperator op){
    return op.applyAsInt(5, 10);
} 
```

但是您也可以定义自己的接口并像这样使用它：

```
public interface TwoArgIntOperator {
    public int op(int a, int b);
}

//elsewhere:
static int method(TwoArgIntOperator operator) {
    return operator.op(5, 10);
} 
```

然后使用 lambda 作为参数调用该方法：

```
public static void main(String[] args) {
    TwoArgIntOperator addTwoInts = (a, b) -> a + b;
    int result = method(addTwoInts);
    System.out.println("Result: " + result);
} 
```

使用您自己的界面的好处是您可以使用更清楚地表明意图的名称。

* * *

## 回答 #2

> 赞同：72
> 
> 时间：2014-03-19T15:28:46.983

要使用 Lambda 表达式，您需要创建自己的函数式接口或使用 Java 函数式接口进行需要两个整数并作为值返回的操作。[整数二元运算符](https://docs.oracle.com/javase/8/docs/api/java/util/function/IntBinaryOperator.html)

**使用用户定义的功能接口**

```
interface TwoArgInterface {

    public int operation(int a, int b);
}

public class MyClass {

    public static void main(String javalatte[]) {
        // this is lambda expression
        TwoArgInterface plusOperation = (a, b) -> a + b;
        System.out.println("Sum of 10,34 : " + plusOperation.operation(10, 34));

    }
} 
```

**使用Java功能接口**

```
import java.util.function.IntBinaryOperator;

public class MyClass1 {

    static void main(String javalatte[]) {
        // this is lambda expression
        IntBinaryOperator plusOperation = (a, b) -> a + b;
        System.out.println("Sum of 10,34 : " + plusOperation.applyAsInt(10, 34));

    }
} 
```

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2015-05-27T03:19:32.710

**对于不超过 2 个参数的函数，您可以在不定义自己的接口的情况下传递它们。例如，**

```
class Klass {
  static List<String> foo(Integer a, String b) { ... }
}

class MyClass{

  static List<String> method(BiFunction<Integer, String, List<String>> fn){
    return fn.apply(5, "FooBar");
  }
}

List<String> lStr = MyClass.method((a, b) -> Klass.foo((Integer) a, (String) b)); 
```

其中**`BiFunction<Integer, String, List<String>>`**，`Integer`和`String`是它的参数，并且`List<String>`是它的返回类型。

对于只有一个参数的函数，您可以使用**`Function<T, R>`**，其中**`T`**是它的参数类型，**`R`**是它的返回值类型。有关 Java 已经提供的所有接口， 请参阅此[页面。](https://docs.oracle.com/javase/8/docs/api/java/util/function/package-summary.html)

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2018-11-19T15:32:05.417

对我来说，最有意义的解决方案是定义一个`Callback`接口：

```
interface Callback {
    void call();
} 
```

然后将其用作要调用的函数中的参数：

```
void somewhereInYourCode() {
    method(() -> {
        // You've passed a lambda!
        // method() is done, do whatever you want here.
    });
}

void method(Callback callback) {
    // Do what you have to do
    // ...

    // Don't forget to notify the caller once you're done
    callback.call();
} 
```

## 虽然只是一个精度

lambda 不是一个特殊的接口、类或任何你可以自己声明的东西。`Lambda`只是赋予`() -> {}`特殊语法的名称，它在将单方法接口作为参数传递时具有更好的可读性。它旨在取代这个：

```
method(new Callback() {
    @Override
    public void call() {
        // Classic interface implementation, lot of useless boilerplate code.
        // method() is done, do whatever you want here.
    }
}); 
```

所以在上面的例子中，`Callback`不是lambda，它**只是**一个常规接口；`lambda`是您可以用来实现它的快捷语法的名称。

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2012-11-28T12:59:24.073

有一个支持 Lambda 的 Java 8 JavaDocs 的公共 Web 可访问版本，链接自[http://lambdafaq.org/lambda-resources](http://lambdafaq.org/lambda-resources)。（这显然应该是对 Joachim Sauer 的回答的评论，但我无法使用我需要添加评论的信誉点进入我的 SO 帐户。） lambdafaq 网站（我维护它）回答了这个问题以及许多其他 Java -lambda 问题。

注意 这个答案是在 Java 8 GA 文档[公开](https://docs.oracle.com/javase/8/docs/api/)之前编写的。不过，我已经离开了，因为[Lambda 常见问题解答](http://lambdafaq.org)可能对学习 Java 8 中引入的功能的人仍然有用。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2015-08-11T17:09:31.110

Lambda 表达式可以作为参数传递。要将 lambda 表达式作为参数传递，参数的类型（接收 lambda 表达式作为参数）必须是函数式接口类型。

如果有功能接口——

```
interface IMyFunc {
   boolean test(int num);
} 
```

并且有一个过滤器方法，它仅在大于 5 时才将 int 添加到列表中。请注意，过滤器方法具有功能接口 IMyFunc 作为参数之一。在这种情况下，lambda 表达式可以作为方法参数的参数传递。

```
public class LambdaDemo {
    public static List<Integer> filter(IMyFunc testNum, List<Integer> listItems) {
        List<Integer> result = new ArrayList<Integer>();
        for(Integer item: listItems) {
            if(testNum.test(item)) {
                result.add(item);
            }
        }
        return result;
    }
    public static void main(String[] args) {
        List<Integer> myList = new ArrayList<Integer>();
        myList.add(1);
        myList.add(4);
        myList.add(6);
        myList.add(7);
        // calling filter method with a lambda expression
        // as one of the param
        Collection<Integer> values = filter(n -> n > 5, myList);

        System.out.println("Filtered values " + values);
    }
} 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2018-08-19T19:07:16.347

对于任何正在谷歌搜索的人，一个好方法是使用`java.util.function.BiConsumer`. 前任：

```
Import java.util.function.Consumer
public Class Main {
    public static void runLambda(BiConsumer<Integer, Integer> lambda) {
        lambda.accept(102, 54)
    }

    public static void main(String[] args) {
        runLambda((int1, int2) -> System.out.println(int1 + " + " + int2 + " = " + (int1 + int2)));
    } 
```

输出将是：166

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2018-06-04T09:56:14.610

Lambda 不是一个对象，而是一个功能接口。使用@FuntionalInterface 作为注解可以定义尽可能多的功能接口

```
@FuntionalInterface
public interface SumLambdaExpression {
     public int do(int a, int b);
}

public class MyClass {
     public static void main(String [] args) {
          SumLambdaExpression s = (a,b)->a+b;
          lambdaArgFunction(s);
     }

     public static void lambdaArgFunction(SumLambdaExpression s) {
          System.out.println("Output : "+s.do(2,5));
     }
} 
```

输出如下

```
Output : 7 
```

Lambda 表达式的基本概念是定义您自己的逻辑但已经定义了参数。因此，在上面的代码中，您可以将 do 函数的定义从添加到任何其他定义，但您的参数限制为 2。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2019-10-22T15:54:43.740

您可以使用上面提到的功能接口。下面是一些例子

```
Function<Integer, Integer> f1 = num->(num*2+1);
System.out.println(f1.apply(10));

Predicate<Integer> f2= num->(num > 10);
System.out.println(f2.test(10));
System.out.println(f2.test(11));

Supplier<Integer> f3= ()-> 100;
System.out.println(f3.get()); 
```

希望能帮助到你

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2019-05-10T07:32:25.067

基本上，要将 lamda 表达式作为参数传递，我们需要一个可以保存它的类型。就像我们在原始**int**或 Integer 类中保存的整数值一样。Java 没有单独的 lamda 表达式类型，而是使用接口作为保存参数的类型。但是那个接口应该是一个**功能接口**。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2018-04-20T05:46:21.270

嗯，这很容易。lambda 表达式的目的是实现功能接口。它是只有一种方法的接口。[这是关于预定义和遗留功能接口的很棒的文章。](http://www.baeldung.com/java-8-functional-interfaces)

无论如何，如果你想实现自己的功能接口，那就去做吧。仅举一个简单的例子：

```
public interface MyFunctionalInterface {
    String makeIt(String s);
} 
```

所以让我们创建一个类，我们将在其中创建一个方法，该方法接受*MyFunctionalInterface*的类型：

```
public class Main {

    static void printIt(String s, MyFunctionalInterface f) {
        System.out.println(f.makeIt(s));
    }

    public static void main(String[] args) {

    }
} 
```

*您应该做的最后一件事是将MyFunctionalInterface*的实现传递给我们定义的方法：

```
public class Main {

    static void printIt(String s, MyFunctionalInterface f) {
        System.out.println(f.makeIt(s));
    }

    public static void main(String[] args) {
        printIt("Java", s -> s + " is Awesome");
    }
} 
```

就是这样！

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-04-20T08:21:45.110

请执行下列操作 ..

您已经声明`method(lambda l)` 了您要做的就是创建一个具有名称的接口`lambda`并声明一个抽象方法

```
public int add(int a,int b); 
```

方法名称在这里无关紧要..

所以当你调用`MyClass.method( (a,b)->a+b)` 这个实现时，这个实现 `(a,b)->a+b`将被注入到你的接口添加方法中。所以每当你调用`l.add`它时，它都会采用这个实现并执行 加法`a`和返回。- 基本上这就是 lambda 所做的..`b``return l.add(2,3)``5`

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-01-27T03:24:41.817

以下是 C# 处理此问题的大致方式（但表示为 Java 代码）。像这样的东西几乎可以满足您的所有需求：

```
import static org.util.function.Functions.*;

public class Test {

    public static void main(String[] args)
    {
        Test.invoke((a, b) -> a + b);       
    }

    public static void invoke(Func2<Integer, Integer, Integer> func)
    {
        System.out.println(func.apply(5, 6));
    }
} 
```

* * *

```
package org.util.function;

public interface Functions {

    //Actions:
    public interface Action {
        public void apply();
    }

    public interface Action1<T1> {
        public void apply(T1 arg1);
    }

    public interface Action2<T1, T2> {
        public void apply(T1 arg1, T2 arg2);
    }

    public interface Action3<T1, T2, T3> {
        public void apply(T1 arg1, T2 arg2, T3 arg3);
    }

    public interface Action4<T1, T2, T3, T4> {
        public void apply(T1 arg1, T2 arg2, T3 arg3, T4 arg4);
    }

    public interface Action5<T1, T2, T3, T4, T5> {
        public void apply(T1 arg1, T2 arg2, T3 arg3, T4 arg4, T5 arg5);
    }

    public interface Action6<T1, T2, T3, T4, T5, T6> {
        public void apply(T1 arg1, T2 arg2, T3 arg3, T4 arg4, T5 arg5, T6 arg6);
    }

    public interface Action7<T1, T2, T3, T4, T5, T6, T7> {
        public void apply(T1 arg1, T2 arg2, T3 arg3, T4 arg4, T5 arg5, T6 arg6, T7 arg7);
    }

    public interface Action8<T1, T2, T3, T4, T5, T6, T7, T8> {
        public void apply(T1 arg1, T2 arg2, T3 arg3, T4 arg4, T5 arg5, T6 arg6, T7 arg7, T8 arg8);
    }

    //Functions:
    public interface Func<TResult> {
        public TResult apply();
    }

    public interface Func1<T1, TResult> {
        public TResult apply(T1 arg1);
    }

    public interface Func2<T1, T2, TResult> {
        public TResult apply(T1 arg1, T2 arg2);
    }

    public interface Func3<T1, T2, T3, TResult> {
        public TResult apply(T1 arg1, T2 arg2, T3 arg3);
    }

    public interface Func4<T1, T2, T3, T4, TResult> {
        public TResult apply(T1 arg1, T2 arg2, T3 arg3, T4 arg4);
    }

    public interface Func5<T1, T2, T3, T4, T5, TResult> {
        public TResult apply(T1 arg1, T2 arg2, T3 arg3, T4 arg4, T5 arg5);
    }

    public interface Func6<T1, T2, T3, T4, T5, T6, TResult> {
        public TResult apply(T1 arg1, T2 arg2, T3 arg3, T4 arg4, T5 arg5, T6 arg6);
    }

    public interface Func7<T1, T2, T3, T4, T5, T6, T7, TResult> {
        public TResult apply(T1 arg1, T2 arg2, T3 arg3, T4 arg4, T5 arg5, T6 arg6, T7 arg7);
    }

    public interface Func8<T1, T2, T3, T4, T5, T6, T7, T8, TResult> {
        public TResult apply(T1 arg1, T2 arg2, T3 arg3, T4 arg4, T5 arg5, T6 arg6, T7 arg7, T8 arg8);
    }
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-08-17T12:08:00.503

**如果您使用 Java 和 Kotlin 语言（就像我们在 Android 开发中所做的那样），您可以传递 lambda 函数而无需定义任何额外的接口：**

```
import kotlin.jvm.functions.Function0;
import kotlin.jvm.functions.Function1;
import kotlin.jvm.functions.Function2;

void foo(Function0<Boolean> param1) //for zero param
{
    param1.invoke();
}

void foo1(Function1<Integer, Boolean> param1) //for one param
{
    param1.invoke(1);
}

void foo2(Function2<Integer, Boolean, Boolean> param1) //for two param
{
    param1.invoke(1, true);
}

//how to call
void main() 
{
    foo(() -> {
        return true;
    });

    foo1((var1) -> {
        return true;
    });

    foo2((var1, var2) -> {
        return true;
    });

} 
```

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2021-10-14T15:54:14.680

一旦方法由接口实现，您可以将方法设置为参数。

* * *

## 回答 #16

> 赞同：-2
> 
> 时间：2017-03-13T23:35:15.403

使用 lambda 作为参数具有灵活性。它支持java中的函数式编程。基本语法是

> 参数-> method_body

以下是一种方法，您可以定义一个以功能接口（使用 lambda）作为参数的方法。一种。如果您希望定义在功能接口内声明的方法，例如，**功能接口**作为参数/参数提供给从调用的方法`main()`

```
@FunctionalInterface
interface FInterface{
    int callMeLambda(String temp);
}

class ConcreteClass{

    void funcUsesAnonymousOrLambda(FInterface fi){
        System.out.println("===Executing method arg instantiated with Lambda==="));
    }

    public static void main(){
        // calls a method having FInterface as an argument.
        funcUsesAnonymousOrLambda(new FInterface() {

            int callMeLambda(String temp){ //define callMeLambda(){} here..
                return 0;
            }
        }
    }

/***********Can be replaced by Lambda below*********/
        funcUsesAnonymousOrLambda( (x) -> {
            return 0; //(1)
        }

    } 
```

> F接口 fi = (x) -> { return 0; };
> 
> funcUsesAnonymousOrLambda(fi);
> 
> 从上面可以看出，如何用接口替换 lambda 表达式。

上面解释了 lambda 表达式的一个特定用法，还有更多。参考 [lambda 中的 Java 8 lambda 不能从外部 lambda 修改变量](https://stackoverflow.com/questions/23451579/java-8-lambda-within-a-lambda-cant-modify-variable-from-outer-lambda)

# mysql - 在 UNION 之后创建一列具有相同名称的列

> ID：13604709
> 
> 赞同：2
> 
> 时间：2012-11-28T12:06:45.077
> 
> 标签：mysql, sql

我有两张桌子：

```
Table1
id | col1 | col2 | other_id
---------------------------
1  | val1 | val2 | 2
2  | val3 | val4 | 3

Table2
id | col3 | other_id
--------------------
1  | val5 | 4 
```

我想以这种方式加入这两个表：

```
id | col1 | col2 | col3 | other_id
-----------------------------------
1  | val1 | val2 | NULL | 2
2  | val3 | val4 | NULL | 3
1  | NULL | NULL | val5 | 4 
```

我创建了这个 SQL 查询：

```
(
SELECT * FROM table1 AS M LEFT JOIN table2 AS D ON M.other_id = D.other_id
)
UNION
(
SELECT * FROM table1 AS M RIGHT JOIN table2 AS D ON M.other_id = D.other_id
) 
```

结果：

```
id   | col1 | col2 | other_id | id   | col3 | other_id
------------------------------------------------------
1    | val1 | val2 | 2        | NULL | NULL | NULL
2    | val3 | val4 | 3        | NULL | NULL | NULL
NULL | NULL | NULL | NULL     | 1    | val5 | 4 
```

但我得到多个具有相同标签的列。我不想使用别名，只需加入具有相同名称的列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T12:16:57.253

您可以使用`UNION ALL`它，只需为两个表中都不存在的列放置占位符：

```
select t1.id, t1.col1, t1.col2, null col3, t1.other_id
from table1 t1
union all
select t2.id, null col1, null col2, t2.col3, t2.other_id
from table2 t2 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/6213d/6)

结果：

```
| ID |   COL1 |   COL2 |   COL3 | OTHER_ID |
--------------------------------------------
|  1 |   val1 |   val2 | (null) |        2 |
|  2 |   val3 |   val4 | (null) |        3 |
|  1 | (null) | (null) |   val5 |        4 | 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T12:22:52.987

如果您想在不使用*alias*的情况下实现此目的，则必须手动使用每一列。

```
(SELECT M.ID,M.Col1,M.Col2,D.Col3,M.Other_ID 
   FROM table1 AS M 
   LEFT JOIN table2 AS D 
   ON M.other_id = D.other_id)
UNION
(SELECT D.ID,M.Col1,M.Col2,D.Col3,D.Other_ID 
   FROM table1 AS M 
   RIGHT JOIN table2 AS D 
   ON M.other_id = D.other_id); 
```

### [看到这个 SQLFiddle](http://sqlfiddle.com/#!2/6d566/18)

结果

```
| ID |   COL1 |   COL2 |   COL3 | OTHER_ID |
--------------------------------------------
|  1 |   val1 |   val2 | (null) |        2 |
|  2 |   val3 |   val4 | (null) |        3 |
|  1 | (null) | (null) |   val5 |        4 | 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T12:16:05.243

```
SELECT id, col1, col2, ''  col3, other_id
FROM table1 

UNION

SELECT id, '' col1 , '' col2, col3, other_id 
FROM table2 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-28T12:09:58.760

Union 希望这些表具有相同的字段。您可以放置​​“人工”字段来做到这一点

# c# - 在可移植类库中实现自定义异常

> ID：13604713
> 
> 赞同：18
> 
> 时间：2012-11-28T12:06:48.807
> 
> 标签：c#, .net, exception, windows-store-apps, portable-class-library

在为 .NET 设计自定义异常时，MSDN 提供了[这些指南](http://msdn.microsoft.com/en-us/library/ms229064.aspx)。特别是，指南规定了一个自定义例外：

*   应该是可序列化的，即用属性实现`ISerializable`和装饰，并且`[Serializable]`
*   应该实现（反）序列化构造函数，即`protected CustomException(SerializationInfo info, StreamingContext context)`.

但是，在可[移植类库](http://msdn.microsoft.com/en-us/library/gg597391.aspx)中`SerializableAttribute`，`ISerializable`和`SerializationInfo`都不支持。

我应该如何在同时针对 .NET Framework 和一个或多个平台的可移植类库中充分设计自定义异常？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-28T12:36:32.473

基本上，忽略该指导 - 这是针对完整的 .NET，不适用于可移植类库项目。事实上，如果我们看一下（比如说）[Silverlight](http://msdn.microsoft.com/en-us/library/system.exception(v=vs.95).aspx)（包括 WP7），我们会看到：

```
[ClassInterfaceAttribute(ClassInterfaceType.None)]
[ComVisibleAttribute(true)]
public class Exception 
```

坦率地说，该要求的主要消费者是*远程处理*……而且现在的需求并不大。

# sql-server - SQL Server 数据库还原错误：指定的转换无效。(SqlManagerUI)

> ID：13604720
> 
> 赞同：93
> 
> 时间：2012-11-28T12:07:02.160
> 
> 标签：sql-server, sql-server-2008, database-restore

我将 SQL Server 2008 R2 Standard（版本 10.50.1600.1）用于我的生产网站，将带有高级服务的 SQL Server Express 版本（v10.50.1600.1）用于我的本地主机作为数据库。

几天前我的 SQL Server 崩溃了，我不得不在我的本地主机上安装一个新的 2008 R2 Express 版本。当我恢复从 Express 版本中获取的一些旧版本时它工作正常，但是当我尝试从`.bak`从生产服务器获取的文件中恢复数据库时，它会导致以下错误：

> *错误：指定的强制转换无效。(SqlManagerUI)*

当我尝试使用命令恢复数据库时

```
Use Master
Go
RESTORE DATABASE Publications
FROM DISK = 'C:\Publications.bak'
WITH MOVE 'Publications' TO 'C:\Program Files\Microsoft SQL Server\MSSQL10_50.SQLEXPRESS2008R2\MSSQL\DATA\Publications.mdf',--adjust path
MOVE 'AlPublications_log' TO 'C:\Program Files\Microsoft SQL Server\MSSQL10_50.SQLEXPRESS2008R2\MSSQL\DATA\Publications.ldf' 
```

它会产生不同的错误

> *消息 3154，级别 16，状态 4，第 1 行
> 备份集包含一个数据库的备份，而不是现有的“出版物”数据库。
> 消息 3013，级别 16，状态 1，第 1 行
> RESTORE DATABASE 异常终止。*

我已经交叉检查了版本。它们似乎都与我匹配，如下图所示

以前我能够将数据库从标准版本恢复到快速版本，但现在它失败了。我删除了数据库并尝试重新创建它。那也失败了。

我不确定我做错了什么。我将不胜感激在这方面的帮助

**问题已解决**，因为 .bak 文件似乎已损坏。当我尝试使用不同的文件时，它起作用了。

* * *

## 回答 #1

> 赞同：164
> 
> 时间：2013-10-14T03:38:22.850

可能是因为将 SQL Server 2012 版本的备份文件还原到 SQL Server 2008 R2 甚至更低。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-11-28T12:20:34.097

GUI 有时会变化无常。使用 T-SQL 时遇到的错误是因为您试图覆盖现有数据库，但未指定覆盖/替换现有数据库。以下可能有效：

```
Use Master
Go
RESTORE DATABASE Publications
  FROM DISK = 'C:\Publications_backup_2012_10_15_010004_5648316.bak'
  WITH 
    MOVE 'Publications' TO 'C:\Program Files\Microsoft SQL Server\MSSQL10_50.SQLEXPRESS2008R2\MSSQL\DATA\Publications.mdf',--adjust path
    MOVE 'Publications_log' TO 'C:\Program Files\Microsoft SQL Server\MSSQL10_50.SQLEXPRESS2008R2\MSSQL\DATA\Publications.ldf'
, REPLACE -- Add REPLACE to specify the existing database which should be overwritten. 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-07-10T16:20:56.690

最后得到这个错误在恢复中消失。出于沮丧，我转向了 SQL2012，但我想这可能仍然适用于 2008R2。我不得不使用逻辑名称：

```
RESTORE FILELISTONLY
FROM DISK = ‘location of your.bak file’ 
```

从那里我`MOVE`使用逻辑名称运行了一个恢复语句。

```
RESTORE DATABASE database1
FROM DISK = '\\database path\database.bak'
WITH
MOVE 'File_Data' TO 'E:\location\database.mdf',
MOVE 'File_DOCS' TO 'E:\location\database_1.ndf',
MOVE 'file' TO 'E:\location\database_2.ndf',
MOVE 'file' TO 'E:\location\database_3.ndf',
MOVE 'file_Log' TO 'E:\location\database.ldf' 
```

当它完成恢复时，我几乎高兴地哭了。

祝你好运！

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-06-20T10:08:21.120

以下可能是此问题的 2 个原因：

1.  在 SQL 2012 上进行的备份和还原 Headeronly 是在 SQL 2008 R2 中完成的

2.  备份媒体已损坏。

如果我们运行下面的命令，我们总是可以找到实际的错误：

```
restore headeronly
from disk = 'C:\Users\Public\Database.bak' 
```

在 quot 中给出数据库文件的完整位置

希望能帮助到你

# c# - 比较 2 个表的列名，如果不存在则添加

> ID：13604723
> 
> 赞同：0
> 
> 时间：2012-11-28T12:07:17.107
> 
> 标签：c#, datatable, compare, two-columns

我有一个关于比较 2 个表的问题。如果表 1 中不包含表 2 中的列名，请添加具有值的列。所以我用我的代码做到了，但不知道为什么它给了我列已经属于tables1的错误。我在这里做错了什么？有没有更好的方法呢？

示例，表 1：

```
Name   LastName
a       aa
b       bb 
```

表2：

```
Name    Product
s       dd
a       ss 
```

结果：

```
Name   LastName    Product
a       aa         dd
b       bb         ss 
```

我的代码：

```
 for (int i = 0; i < excelTb2.Columns.Count; i++)
                {
                    for (int j = 0; j < Temp.Columns.Count; j++ )
                    {
                        if (Temp.Columns[j].ColumnName.ToString() != excelTb2.Columns[i].ColumnName.ToString())
                        {
                            excelTb2.Columns.Add(Temp.Columns[j].ColumnName.ToString());

                            for (int ok = 0; ok < 2; ok++)
                            {
                                excelTb2.Rows[ok][Temp.Columns[j].ColumnName] = Temp.Rows[ok][j];
                            }

                        }
                    }
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:15:28.327

您可以使用此`Merge`方法合并两个模式`DataTables`并在行索引上连接数据（如果两个表都包含一列，则 table1 的数据将按要求获取）：

```
public static DataTable MergeOnRowIndex(DataTable table1, DataTable table2)
{
    var data = table1.AsEnumerable()
        .Select((r, i) => new
        {
            Row1 = r,
            Row2 = i >= table2.Rows.Count ? null : table2.Rows[i]
        });
    DataTable table3 = new DataTable();
    foreach (DataColumn col in table1.Columns)
    {
        table3.Columns.Add(col.ColumnName, col.DataType);
    }
    foreach(DataColumn col in table2.Columns)
        if(!table3.Columns.Contains(col.ColumnName))
            table3.Columns.Add(col.ColumnName, col.DataType);

    if(data.Any())
    {
        foreach(var x in data)
        {
            var newRow = table3.Rows.Add();
            for (int i = 0; i < table1.Columns.Count; i++)
            {
                newRow[i] = x.Row1.ItemArray[i];
            }
            if (x.Row2 != null)
            {
                for (int i = table1.Columns.Count; i < table3.Columns.Count; i++)
                {
                    DataColumn currentColumn = table3.Columns[i];
                    newRow[currentColumn.ColumnName] = x.Row2[currentColumn.ColumnName];
                }
            }
        }
    }
    return table3;
} 
```

在这里，我使用该方法在您的示例数据上获得了您想要的结果：

```
var table = new DataTable();
table.Columns.Add("Name");
table.Columns.Add("LastName");
var otherTable = new DataTable();
otherTable.Columns.Add("Name");
otherTable.Columns.Add("Product");
table.Rows.Add("a","aa");
table.Rows.Add("b","bb");
otherTable.Rows.Add("s","dd");
otherTable.Rows.Add("a","ss");

DataTable result = MergeOnRowIndex(table, otherTable); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T12:37:33.960

列是一个集合。您可以使用 Contains 检查列名是否已存在

```
for (int j = 0; j < Temp.Columns.Count; j++ )
{
    if(!excelTb2.Columns.Contains(Temp.Columns[j].ColumnName))
    {
        excelTb2.Columns.Add(Temp.Columns[j].ColumnName.ToString());
        ...
    }
} 
```

This will remove the need of the nested loop that is the main cause of the error you get

# java - Java中用于纬度和经度的任何Java API

> ID：13604724
> 
> 赞同：0
> 
> 时间：2012-11-28T12:07:26.060
> 
> 标签：java, api, latitude-longitude

我正在寻找可以帮助我找到具有给定纬度和经度的城市/国家的 Java API？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T12:14:12.550

This API endpoint below should do this for you.

[https://developers.google.com/maps/documentation/geocoding/#ReverseGeocoding](https://developers.google.com/maps/documentation/geocoding/#ReverseGeocoding)

you can specify the format either as XML or JSON, then parse with either a JSON parser (GSON, Jackson etc) or an XML parser (SAX, DOM...)

# android - Android，如何替换路径中的斜杠

> ID：13604727
> 
> 赞同：1
> 
> 时间：2012-11-28T12:07:32.767
> 
> 标签：android

我有一个图像路径：`"UploadFile\\/UserProfile\\/Female.jpg"`。如何`"\\/"`替换`"/"`？我努力了 ：

1.  `replaceAll("\\/","/")`
2.  `replaceAll("\\\\/","/")`

代码：

```
adapter_profilepic = objUser.getProfilePicture().replaceAll("\\/","/"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:16:26.467

[这有效](http://ideone.com/GjrfYU)：

```
String src = "UploadFile\\/UserProfile\\/Female.jpg";
src = src.replaceAll("\\\\/","/");
System.out.println(src); 
```

输出：

```
UploadFile/UserProfile/Female.jpg 
```

你说你试过了，但再检查一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T12:22:06.100

根据[文档](http://developer.android.com/reference/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)，您的字符串用作`regular expression`. 为什么你不使用[replace](http://developer.android.com/reference/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29)：

```
String adapter_profilepic = objUser.getProfilePicture().replace("\\\\/","/"); 
```

# php - 在php中每页回显一定数量的结果

> ID：13604731
> 
> 赞同：0
> 
> 时间：2012-11-28T12:07:51.327
> 
> 标签：php, sql-server

我有一个查询和循环，根据 id 显示产品。在这种情况下，子类别 ID。代码如下：

```
<div id="categoryproducts">

  <?php
    $productsGet = mssql_query("SELECT * FROM Products WHERE SubCatID = ".$_GET['scid']."");
    while ($echoProds = mssql_fetch_array($productsGet)) {
                            ?>
    <div class="productbox">
       <div class="productboximg">
         <a href="product.php?pid=<?php echo $echoProds['ProductID']; ?>&cid=<?php echo $_GET['cid']; ?>"><img src="<?php echo $echoProds['ProdThumb']; ?>" height="58" width="70" alt="" /></a>
       </div>
    <div class="productboxdtl">
       <h3><a href="product.php?pid=<?php echo $echoProds['ProductID']; ?>&cid=<?php echo $_GET['cid']; ?>"><?php echo $echoProds['Title']; ?></a></h3>
       <p><?php echo $echoProds['Synopsis']; ?></p>
    </div>
      <div class="productboxprc">
        Price &nbsp; <strong>&pound;<?php echo $echoProds['Price']; ?></strong>
      </div>
    <div class="productboxmore">
       <a href="product.php?pid=<?php echo $echoProds['ProductID']; ?>&cid=<?php echo $_GET['cid']; ?>"></a>
    </div>
   </div>
   <?php
    }
   ?>
   <div id="shoplistpagesbot" class="shoplistpages">
    Results Pages: 1 <a href="productlist.php">2</a> [<a href="productlist.php?scid=<?php echo $_GET['scid']; ?>&cid=<?php echo $_GET['cid']; ?>" class="a1">Next &raquo;</a>]
   </div> 
```

我不确定如何在每页显示一定数量的产品，如图所示，有一种在页面之间进行更改的机制，我需要以某种方式编写代码，在一定数量的产品之后，例如 5 个，其余部分显示在下一个页。

谁能建议如何做到这一点？或者指出我应该研究哪些功能的正确方向。

抱歉，如果不是很清楚，我是 PHP 新手。我使用的数据库是 MS SQL 不是 MySQL

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:16:57.043

```
$pagenumber = $_GET['pagenumber'];
$recordsperpage = 30;
$first = ($pagenumber*$recordperpage)-$recordperpage;
$last = $pagenumber*$recordsperpage;
$productsGet = mysql_query("SELECT * FROM Products WHERE SubCatID = '".$_GET['scid']."' LIMIT $first,$last"); 
```

将其放在页面顶部并在链接中传递 GET 参数，例如 browse.php?pagenumber=1;

您可以通过将记录集中的总行数除以 $recordsperpage 变量来计算页数。

然后只需使用一个简单的 for 循环来输出导航链接，例如：

```
for($i = 1; $i <= $totalpages; $i++) {
echo "<a href='browse.php?pagenumber=$i'>$i</a>";
} 
```

其中 $totalpages 是将记录集中的总行数除以 $recordsperpage 变量的结果。

希望这可以帮助

这是针对 MS SQL 的：

```
SELECT TOP 10 *
FROM (SELECT TOP 20 * FROM products ORDER BY ID) as T
ORDER BY ID DESC 
```

这里基本上是从前 20 名中以相反的顺序选择前 10 名记录。因此，您将获得记录集中的第二个 10。

将 10 替换为每页的记录数，将 20 替换为上面的 $last 变量。

希望这可以清除它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T12:27:57.310

取决于您使用的 MSSQL 版本。

我不是 MSSQL 的用户，但显然 SQL Server 2000 使用该`TOP`命令，而 SQL Server 2005 使用该`BETWEEN`命令。谷歌搜索应该为您提供几个教程，但我假设您使用的是 2005 版本。

要返回页码上的项目`$page_number`，一般算法是：

```
// The most common way to specify which page to display is a GET variable. There
// are others ways and if you'd prefer them, just set $page_number to get the
// number from there instead. Don't forget to filter all data from the GET array
// as a user may try to insert harmful data, such as XSS attacks.
$page_number = $_GET['page'];
$scid = $_GET['scid'];
// Calculate the range of items to display.
$min = $page_number * $items_per_page;
$max = $min + $items_per_page;
$sql = "SELECT * FROM Products WHERE SubCatID = \"{$scid}\" BETWEEN {$min} AND {$max}"; 
```

要获取剩余的项目数，您需要一个单独的数据库查询来返回项目总数。

```
$sql = "SELECT COUNT(*) FROM Products WHERE SubCatID = \"{$scid}\"";
// Using the same $max as before as it is the number of items on the page plus
// total items on previous pages, but we'll redefine it here just in case.
$max = ($page_number * $items_per_page) + $items_per_page;
// Assume that $total_rows is the number returned from executing the count query.
$remaining_items = $total_rows - $max; 
```

现在生成所有其他页面的链接。

```
$current_page = $_GET['page'];
$total_pages = $total_rows / $items_per_page;
if($current_page != 1) {
    $previous = $current_page - 1;
    echo "<a href=\"example.com/your/script.php?page={$previous}\" title=\"Previous Page\">Previous</a>";
}
for($i = 1; $i <= $total_pages; $i++) {
    echo "<a href=\"example.com/your/script.php?page={$i}\" title=\"Page {$i}\">{$i}</a>";
}
if($current_page != $total_pages) {
    $next = $current_page + 1;
    echo "<a href=\"example.com/your/script.php?page={$next}\" title=\"Next Page\">Next</a>";
} 
```

# r - 在 R 中读取有向图

> ID：13604732
> 
> 赞同：5
> 
> 时间：2012-11-28T12:07:52.923
> 
> 标签：r, graph, path, igraph

我无法阅读/创建有向图。我按照我在[这里](http://www.ats.ucla.edu/stat/r/faq/snplot.htm)找到的步骤进行操作。

这是我的文本文件*graph.txt*：

```
1 2
1 3
2 5
3 4
3 5
4 5
5 6
5 10
6 7
7 8
7 9
7 12
8 9
9 10
9 11
9 12
10 11
11 7
11 12 
```

现在我读了这个*graph.txt*：

```
library("igraph")
xlist<-read.graph("graph.txt", format="edgelist") 
```

然后我绘制它：

```
plot(xlist) 
```

但这不是我读入 xlist 的图表：

![http://i.imgur.com/dubQh.png](../Images/ee1ec72d945aa4603b5ff801faec3dd3.png)

如您所见，在 1->2、1->3、5->10 等之间没有边。如何正确读取有向图？

完成此操作后，如何显示两个节点之间的所有最短路径？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T13:04:53.323

这对我来说似乎很好用：

```
 xlist<-read.table("graph.txt")
 xlist <- graph.data.frame(xlist)
 plot(xlist) 
```

注意更改节点并将它们从零向上索引（不是在下面的@Sacha Epskamp 评论中`R`的最新更新中）。`igraph`使用：

```
plot(xlist, vertex.label= V(xlist)$name) 
```

你会看到你想要的名字。即1和2之间的边缘。

绘制最短路径的一种方法是使用`get.all.shortest.paths`，然后使用它来对图形进行子集化并对其进行过度绘制。有关我绘制生成树的类似示例，请参阅我[对这个问题的回答。](https://stackoverflow.com/a/13439030/1317221)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-29T00:20:32.640

错误的原因是边缘列表文件（即 format `"edgelist"`）从零开始对顶点进行编号。这在所有 igraph 版本中都是相同的，即使最近的 R igraph 包从一个开始编号顶点。

原因是我们希望 R igraph 与 Python igraph 和 C igraph 保持一致，就文件格式而言。即由 Python igraph 编写的文件（在本例中为边列表文件）被 R igraph 和 Python igraph 以相同的方式解释。从零开始的编号是文件格式的一个属性。

如果您已经有一个边列表文件，它以 1 开始对顶点进行编号，那不是 igraph`edgelist`文件格式，您需要通过简单地从每个顶点 id 中减去一个来转换它。

`scan()`一种解决方法是使用or `read.table()`(`scan()`更快，如果您有大文件，这可能很重要)读取文件，然后`graph()`直接调用。在这种情况下，您不需要减一，因为在 R igraph 中，顶点 ID 是从一开始编号的。

# java - BufferedReader 未按预期工作

> ID：13604734
> 
> 赞同：1
> 
> 时间：2012-11-28T12:07:59.523
> 
> 标签：java, bufferedreader

在这一行“ bufferedReader.readLine(); ”之后，下面的代码没有完全执行。当我执行系统命令而不提及远程 PC 的 IPAddress 时，该程序工作正常。

```
class Test    
{       
public static void main(String arg[])    
{    
     Process p;    
     Runtime runTime;    
     String process = null;    
     try {    
        runTime = Runtime.getRuntime();    
        p = runTime.exec("sc \\xx.xx.xx.xx query gpsvc");      // For Windows    
        InputStream inputStream = p.getInputStream();    
        InputStreamReader inputStreamReader = new InputStreamReader(inputStream);    
        BufferedReader bufferedReader = new BufferedReader(inputStreamReader);    
        String line = bufferedReader.readLine();    
        process = "&";    
        while (line != null) {    
            line = bufferedReader.readLine();    
            process += line + "&";    
        }    
        StringTokenizer st = new StringTokenizer(proc, "&");    
        System.out.println("token size "+st.countTokens());    
        while (st.hasMoreTokens()) {        
            String testData = st.nextToken();    
        bufferedReader.close();    
        inputStreamReader.close();    
        inputStream.close();    
        }    

     } catch (IOException e) {    
       System.out.println("Exception arise during the read Processes");    
       e.printStackTrace();    
     }    

}    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:26:26.087

检查你的命令里面的`exec`方法

`p = runTime.exec("sc \\xx.xx.xx.xx query gpsvc");`

此处的语法错误，如果您从命令提示符执行此操作，您将收到以下问题提示。

```
Would you like to see help for the QUERY and QUERYEX commands? [ y | n ]: 
```

并且在您输入 y 或 n 之前程序不会返回。由于程序没有终止，您将无法读取控制台输出，这就是您的程序卡住的原因`String line = bufferedReader.readLine();`

# c - 我可以实现哪些基本的 C 库函数来练习和提高我的 C 技能？

> ID：13604736
> 
> 赞同：4
> 
> 时间：2012-11-28T12:08:12.720
> 
> 标签：c, libc

我知道这听起来有点主观，但我想在 C 中实现基本的库函数，以便更好地理解 C（主要是指针）并提高我的技能，因为我只是一个初学者（在 C 和编程中） ）。

我还发现它很有用，因为您可以更好地了解幕后发生的事情以及这些基本功能是如何工作的。

我可以实现哪些基本的 C 库函数？我正在寻找简单的，例如，`strcpy`不太复杂（我只是一个初学者）但仍然需要一些思考。`atoi``strstr`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T12:11:09.843

字符串功能总是具有挑战性（并且是必需的）。尝试将字符串拆分为标记、连接字符串、替换字符串中的字符串。相信我，在那之后你不仅会成为一个更好的 C 程序员，你也会喜欢开源库！（和 C++ STL ..）祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T13:10:16.840

实现后`strtok()`，您可能希望使用`qsort()`其函数指针切换到下一个级别。

# c# - 如何在 WPF 中的 Popup 控件顶部获取消息框？

> ID：13604738
> 
> 赞同：4
> 
> 时间：2012-11-28T12:08:30.290
> 
> 标签：c#, wpf

我们正在显示来自弹出控件的错误消息。消息框即将出现，但它出现在弹出控件的后面。我如何使弹出窗口返回或消息框出现在前面。它与 MVVM 一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:11:53.280

我认为您对此无能为力。

看看[WPF Popup ZOrder](https://stackoverflow.com/questions/1267349/wpf-popup-zorder)

建议的解决方案是实现您自己的弹出控件而不是使用内置的控件，并且只需提高其 Z 索引，以便它出现在您想要的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T12:14:47.560

[https://gist.github.com/903202](https://gist.github.com/903202) .. 只需使用使用现有弹出控件创建的弹出窗口即可。

# android - android webview flash 全屏

> ID：13604740
> 
> 赞同：1
> 
> 时间：2012-11-28T12:08:34.687
> 
> 标签：android, flash, webview, fullscreen

在我的应用程序中有`WebView`嵌入式 Flash 播放器，我需要以全屏模式运行它。

由于尝试进入全屏模式时应用程序开始下降，因此我描述了：

```
mWebView.setWebChromeClient (new WebChromeClient ()); 
```

应用程序停止下降，但`WebView`丢失（变得透明？）

任何想法如何解决这一问题？可能需要`WebView`再次关注。帮助

ps安卓是4.0

# c++ - C/C++：使用适配器模式是否有性能损失？

> ID：13604750
> 
> 赞同：1
> 
> 时间：2012-11-28T12:09:04.290
> 
> 标签：c++, oop, design-patterns, adapter

我在 C++ 项目中使用用 C 编写的[高性能/并行图形库。](http://www.cc.gatech.edu/stinger/index.php)它提供了一个结构`stinger`（图形数据结构）和类似的操作

```
int stinger_insert_edge_pair (struct stinger *G,
                          int64_t type, int64_t from, int64_t to,
                          double weight, int64_t timestamp) { .... } 
```

然而，大多数时候，我不想指定时间戳、权重或类型。默认参数会很好。此外，类似 OOP 的界面会很好：`G->insertEdge(u, v)`而不是`insert_edge_pair(G, u, v, ...)`.

所以我正在考虑创建一个看起来像的**适配器**类

```
class Graph {

protected:

    stinger* stingerG;

public:

    /** default parameters ***/

    double defaultEdgeWeight = 1.0;

    /** methods **/

    Graph(stinger* stingerG);

     virtual void insertEdge(node u, node v, double weight=defaultEdgeWeight);

   }; 
```

该方法`insertEdge(...)`只需`stinger_insert_edge_pair(this->stingerG, ...)`使用适当的参数调用。

但是，性能是这里的一个关键方面。使用这样的适配器类有什么性能损失？与使用“裸”库相比，我是否应该期望性能下降？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:17:02.973

虚函数*通常*不能内联，因此函数调用会产生相同数量的开销（将参数推送到堆栈上，可能会中断管道和缓存等）。在实践中，例行函数调用非常快——大约为时钟周期。确定这是否合适的唯一方法是在您自己的应用程序上进行**测试。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T12:19:08.367

如果您使用琐碎`inline`的方法，编译器应在调用时内联它们，因此不会有任何性能损失。但是请注意，您不应该为此使用虚函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T12:19:26.073

如果您的 insertEgde 只是转发对 stinger_insert_edge_pair 的调用，那么（很可能）在对 stinger_insert_edge_pair 的普通调用和 g->insertEdge 之间生成的代码没有区别（前提是您删除了虚拟说明符）。比较通过普通调用和适配器调用生成的汇编代码可以公平地了解适配器带来的开销。

insertEdge 必须是虚拟的吗？您是否打算拥有 Graph 的子类？但同样，与函数执行本身的实际成本相比，虚函数调用的成本几乎可以忽略不计。

# f# - 为 fsharp 编译器构建 DEB 包

> ID：13604751
> 
> 赞同：1
> 
> 时间：2012-11-28T12:09:06.380
> 
> 标签：f#, deb

我想在我的 Debian 系统上安装[来自 Github 的 fsharp 编译器](http://fsharp.github.com/fsharp/)，通常的方法是先创建一个 deb 包然后安装它（这样以后可以卸载它等等）。实现这一目标的最简单方法是什么？如何使用的所有示例都`dh_make`假设您有一个适当命名的源 tar.gz，而我没有。我还需要为 autogen 脚本使用一些前缀：

```
./autogen.sh --prefix=/usr 
```

我不确定这是否会使任务变得更加困难。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T07:03:08.483

这实际上应该很容易通过二进制包实现——这也是跨平台的，因为 F# 编译器本身是用 F# 编写的。编译器本身是相当独立的，只依赖于几个 BCL 库。有在 Mono 上运行的版本。

比安装编译器更重要的是与您平台的构建系统的集成。Microsoft`Microsoft.FSharp.targets`为 MSBuild 提供了一个文件，我不知道这是否适用于 Mono 的[xBuild](http://www.mono-project.com/Microsoft.Build)。

我整理了[一篇博客文章](http://jorudolph.wordpress.com/2012/11/01/f-3-0-on-appharbor/)，解释了在哪里可以找到构成 F# 编译器的各个位，以及如何将它们打包以在只有 .NET 和 MSBuild（在我的情况下为 AppHarbor）的平台上编译，您可能会发现这很有帮助.

# c++ - 为什么类中的 initializer_list 不清除“const std::initializer_list & li”？

> ID：13604752
> 
> 赞同：2
> 
> 时间：2012-11-28T12:09:06.920
> 
> 标签：c++, c++11

> **可能重复：**
> [initializer_list 和移动语义](https://stackoverflow.com/questions/8193102/initializer-list-and-move-semantics)

环境：Linux，g++-4.7

我使用 std::vector 和我自己的一个类来测试它。而且我发现在使用std::initializer_list构造向量的时候，其实是调用了自定义类的拷贝构造函数来制作临时对象。因此，我认为它确实效率低下，我使用“const std::initializer_list & li”来替换它。

为什么它在 STL 库中很常见？例如：

```
// This is in STL: stl_vector.h
vector(initializer_list<value_type> __l, const allocator_type & __a = allocator_type())
//... 
```

是不是真的有什么东西跳过了我的脑海？

我的测试代码如下所示：

```
#include <iostream>
#include <vector>
#include <initializer_list>

class Test
{
public:
    Test(const Test & t) : v(t.v) {
        std::cout << "Copy Cons" << std::endl;
    }
    Test(Test && t) : v(std::move(t.v)) {
        std::cout << "MC" << std::endl;
    }
    Test(int val) : v(val) {}
private:
    int v;
};

int main()
{
    std::vector<Test> vv({Test(0), Test(1), Test(2)});

    return 0;
}//main 
```

它的输出：

```
Copy Cons
Copy Cons
Copy Cons 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T12:56:37.347

如果您仔细查看第一条评论中提供的链接，您将了解复制发生的原因：

1.  当你定义一个 initializer_list 时，编译器会将该列表的内容塞入一块内存中。然后，initializer_list 仅包含两个指向该内存块的开始和结束的指针。
2.  将列表复制到构造函数中时，仅复制指针。
3.  当向量分配了自己的内存时，它会将您的对象从列表的 chunk'o'mem 复制到它自己的内存中。那是您看到复制ctor的地方，而不是复制列表本身的地方。

您可以看到名为initializer lis 的语法元素，即花括号和逗号分隔值列表，作为编译器将该列表的内容放入只读内存块的指令。`std::initializer_list`只不过是该块的一对迭代器。

# c# - c# socket send // 将 udp 多播绑定到未选择的网络接口

> ID：13604757
> 
> 赞同：0
> 
> 时间：2012-11-28T12:09:25.247
> 
> 标签：c#, sockets, udp, ip-address, multicast

您好，我的 PC 上有 2 个网络适配器，并希望将 udp 多播发送到所选网络接口上的组 239.0.0.222 端口 9050。但它仅适用于第一个接口，在选择另一个NIC时没有发送数据。

localIP 是来自所选适配器的本地 IP

发件人代码：

```
 IPAddress localIP = getLocalIpAddress();
 IPAddress multicastaddress = IPAddress.Parse("239.0.0.222");
 IPEndPoint remoteep = new IPEndPoint(multicastaddress, 9050);
 UdpClient udpclient = new UdpClient(9050);
 MulticastOption mcastOpt = new MulticastOption(multicastaddress,localIP);

 udpclient.Client.SetSocketOption(SocketOptionLevel.IP, SocketOptionName.AddMembership, mcastOpt);
 udpclient.Send(data, data.Length, remoteep); 
```

EDIT1：
适配器本地 IP 的代码：

```
NetworkInterface.GetAllNetworkInterfaces()[adapterIndex].GetIPProperties().UnicastAddresses[0].Address; 
```

EDIT2,5：
还尝试了两者都使用相同的 reuslt Wireshark 向我显示第二个适配器上多播组的正确加入

```
udpclient.JoinMulticastGroup(multicastaddress);
udpclient.Client.Bind(remoteep); 
```

EDIT3：
我现在在另一台 PC 上尝试过，但同样的问题再次发生，适配器 1 运行，在所有其他 PC 上没有发送任何内容。
我尝试的另一件事是在 windows xp 配置中切换前两个适配器的顺序，然后新的第一个适配器再次工作，但新的第二个不发送任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-05T20:07:11.860

我认为这个人有答案，您必须遍历网络接口并找到支持多播的接口。

[http://windowsasusual.blogspot.ru/2013/01/socket-option-multicast-interface.html](http://windowsasusual.blogspot.ru/2013/01/socket-option-multicast-interface.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-01T14:46:04.703

默认情况下，只有第一个适配器加入给定的多播组。从操作系统的角度来看，这是绝对相关的，因为无论适配器使用多播流，该组都将提供相同的内容。如果您打算在每个适配器上侦听多播，则必须遍历它们并在每个适配器上放置适当的套接字选项：

```
NetworkInterface[] nics = NetworkInterface.GetAllNetworkInterfaces();
foreach (NetworkInterface adapter in nics)
{
  IPInterfaceProperties ip_properties = adapter.GetIPProperties();
  if (!adapter.GetIPProperties().MulticastAddresses.Any())
    continue; // most of VPN adapters will be skipped
  if (!adapter.SupportsMulticast)
    continue; // multicast is meaningless for this type of connection
  if (OperationalStatus.Up != adapter.OperationalStatus)
    continue; // this adapter is off or not connected
  IPv4InterfaceProperties p = adapter.GetIPProperties().GetIPv4Properties();
  if (null == p)
    continue; // IPv4 is not configured on this adapter
  my_sock.SetSocketOption(SocketOptionLevel.IP, SocketOptionName.MulticastInterface, (int)IPAddress.HostToNetworkOrder(p.Index));
} 
```

PS 是的，我是@lukebuehler 提到的“这个人”：http: [//windowsasusual.blogspot.ru/2013/01/socket-option-multicast-interface.html](http://windowsasusual.blogspot.ru/2013/01/socket-option-multicast-interface.html)

# jquery - 如何在不使用任何插件的情况下使用 jquery 在 ASP.Net MVC3 中拖放表格行？

> ID：13604761
> 
> 赞同：0
> 
> 时间：2012-11-28T12:09:35.437
> 
> 标签：jquery, asp.net-mvc-3

我在我的 ASP.Net MVC3 项目中使用数据表插件。在这里，我必须实现行重新排序。我使用“jQuery.dataTables.rowReordering.js”插件来实现它。对于 ui 它工作正常，但它未能调用服务器端函数。

```
<script type="text/javascript">
    $(document).ready(function () {
        $('#myDataTable').dataTable().rowReordering({sURL: "/AdminArea/UpdateOrder" });
    });
</script> 
```

我的控制器代码是

```
public ActionResult Index()
 {
   return View(db.AdminAreas.ToList());
 }

public void UpdateOrder(int id, int fromPosition, int toPosition, string direction)
{
} 
```

看法

```
<table id="myDataTable">
<thead>
    <tr>
        <th>
            OrderNo
        </th>        
        <th>
            SubArea
        </th>
        <th>
            Description
        </th>        

    </tr>
</thead>
 <tbody>
@{
    if (@ViewData["SubAreaForArea"] != null)
    {
        IEnumerable<GridDragAndDrop.Models.SubAreaForAdmin> subarea = ViewData["SubAreaForArea"] as IEnumerable<GridDragAndDrop.Models.SubAreaForAdmin>;

        foreach (var item in subarea)
        {
            <tr class="order">
                <td>
                    @Html.DisplayFor(modelItem =>item.OrderNo)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.SubArea)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Description)
                </td>
            </tr>
        }
    }
}
</tbody>
</table> 
```

我找不到问题。所以请帮助我使用jquery实现行拖放。更新后的订单也将在数据库中更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:23:54.527

您应该将**Updateorder**函数更改为

```
public void UpdateOrder(int id, string fromPosition, string toPosition, string direction) 
```

因为 jQuery 数据表实现了 mime 类型的 AJAX 功能`("text")`

# javascript - 将 div 传递给 jquery 函数并获取其 innerhtml

> ID：13604763
> 
> 赞同：2
> 
> 时间：2012-11-28T12:09:43.417
> 
> 标签：javascript, jquery, asp.net

我有一个打印 div 内容的功能。让我分享我的 aspx 标记。

```
<div>
<div id="printarea" runat="server">
</div>
<asp:Button ID="btnPrint" runat="server" Text="Print Div" OnClick="btnPrint_Click" /> 
```

在 OnClick 事件中，innerhtml 被设置为 div 打印区域。代码是：

```
 protected void btnPrint_Click(object sender, EventArgs e)
    {

        string divText = GenerateInPatientBill();// "content you want to print";
        printarea.InnerHtml = divText;

        ScriptManager.RegisterStartupScript(this, Page.GetType(), "script", "PrintDiv(" + printarea.ClientID + ");", true);
    } 
```

我需要将 printarea div 的 clientid 传递给 javascript 函数并打印出来。使用的javascript函数是

```
 function PrintDiv(printarea1) {
    alert($("#" + printarea1 + ""));
    var printContent = $("#" + printarea1 + "").html();
    alert(printContent);
    var popupWin = window.open('', '_blank', 'width=300,height=400,location=no,left=200px');
    popupWin.document.open();
    popupWin.document.write(printContent);
    popupWin.document.close();
    popupWin.focus();
    popupWin.print();
    popupWin.close();
} 
```

在第 2 行出现 javascript 语法错误。请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:17:01.210

试试下面的代码。

```
function printDiv(DivIdToPrint) 
{ 
  var divToPrint= document.getElementById('DivIdToPrint'); 
  var newWin=window.open('','Print-Window','width=100,height=100'); 
  newWin.document.open(); 
  newWin.document.write('<html><body onload="window.print()">'+divToPrint.innerHTML+'</body></html>'); 
  newWin.document.close(); 
  setTimeout(function(){newWin.close();},10); 
} 
```

此 JavaScript 将打开一个包含 div 内容的新窗口，打印它，然后关闭该窗口。最后一行，这是必须在那里设置超时，否则在 IE 窗口将在打印发生之前关闭。

否则你可以使用[jQuery 插件](http://projects.erikzaadi.com/jQueryPlugins/jQuery.printElement/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T12:15:53.740

printContent 在新打开的窗口中不可用，因此您收到此错误。要解决此问题，您应该简单地将 div 内容或标记传递给新打开的窗口，然后打印

# javascript - 我可以从 Facebook 应用程序中获取用户的手机号码吗？

> ID：13604768
> 
> 赞同：0
> 
> 时间：2012-11-28T12:10:01.230
> 
> 标签：javascript, facebook-graph-api, facebook-javascript-sdk

[在这里](https://developers.facebook.com/blog/post/2011/01/14/platform-updates--new-user-object-fields--edge-remove-event-and-more/)我得到了用户手机号码的文件，但我无法获得手机号码，我请求[了这个 URL](https://graph.facebook.com/me?fields=address,mobile_phone&access_token=ACCESS_TOKEN)但无法获得用户的手机号码，有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:23:11.640

最初移动#隐私是由用户决定的，现在如果它出现在用户的个人资料中，您可以在收到电子邮件时获取它//不是“只有我”..etc//它必须是公开的，，尝试做你在公众号上的作品//

你必须在 facebook 上查看开发者委员会

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T12:47:20.460

首先，您的 field 参数中的两个值现在都不适用于 Graph API。其次，由于隐私问题，Facebook 已删除对用户电话号码的任何访问权限，如果您的应用程序具有用户的 user_location 权限，则您可以获得用户的位置和家乡。[您可以在此处](http://developers.facebook.com/docs/reference/api/user/)阅读有关可用用户数据以及访问这些数据所需的权限的信息。

# android - LinearLayout 中 ImageView 的内联列表

> ID：13604769
> 
> 赞同：0
> 
> 时间：2012-11-28T12:10:02.033
> 
> 标签：android, android-layout

这是一个例子：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content">

    <TextView
        android:id="@+id/myText"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

     <LinearLayout
        android:id="@+id/imageList" 
        android:layout_below="@+id/myText"
        android:layout_height="match_parent"
        android:layout_width="match_parent">

        <!-- Here come ImageViews -->

      </LinearLayout>

</RelativeLayout> 
```

我将 ImageViews 动态**添加到 LinearLayout**，但是当图像过多时，不会返回新行。

*   使用 LinearLayout 甚至可能吗？（带**重量**，**方向**......）
*   如果不是，我应该为此做什么样的架构？

这是我膨胀到 LinearLayout 的 ImageView ：

```
<ImageView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/image"
    android:layout_width="60dp"
    android:layout_height="60dp" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:14:38.183

您正在寻找一个名为 GridView 的控件。

此外，LinearLayout 的默认方向是水平的。你需要设置属性

```
android:orientation="vertical" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T12:16:14.590

这是可能的。我在以前的公司工作时已经实现了这一点。不幸的是，我没有那个演示项目。我只会给你一些步骤。

第 1 步：查找用于运行应用程序的设备的宽度和高度。

第 2 步：继续跟踪计数，因为已经在布局中插入了多少图像。

第 3 步：在您的设备宽度 = 计数 *（图像视图的宽度）时添加新行（我使用的是表格布局，所以添加了一个新行。您可以在具有垂直方向的主线性布局中生成水平方向的线性布局）

希望对实施有帮助

# security - 在 cookie 上使用 signed_request 进行 Facebook 服务器端身份验证是否安全？

> ID：13604775
> 
> 赞同：1
> 
> 时间：2012-11-28T12:10:24.733
> 
> 标签：security, cookies, facebook-javascript-sdk, oauth-2.0, facebook-authentication

又一个 Facebook 登录问题。

我正在构建一个使用 Facebook javascript 身份验证和登录的单页网站。我不希望任何页面重新加载，并希望用户随时登录 Facebook。登录 facebook 会改变我的本地视图（使用backbone.js），但不应该刷新页面。虽然页面没有刷新，但我想让服务器端（抛出 REST api）“知道”用户的 uid

我以前使用过服务器端身份验证，但希望只使用客户端身份验证。（出于各种原因）

基本上我遵循[http://developers.facebook.com/blog/post/534/](http://developers.facebook.com/blog/post/534/)但我的服务器是 node.js

这就是我看到流程的方式：（使用restful API）

```
 1\. User enter site
  2\. FB JS SDK login/authenticate user
     a. FB SDK has obtained access_token (valid for an hour)
     b. signed request is saved in cookie data (fbsr_<app id>) 
  3\. Browser issue any REST API call to Server 
     a. server looks into cookie to identify uid
         Parse the signed_request
         Validates sigend_request with application secret
         identify uid from parsed signed_request
     b. if needed to store long live access token 
         Server exchange code for tokenA
         Server exchange tokenA for longed lived access token (valid for 2 month - fb_exchange_token) 
```

问题：

1.  为什么我不应该将访问令牌从客户端移动到服务器而不是signed_request？
2.  这个流程安全吗？
3.  这是好习惯吗？

谢谢

# c# - 设置任务管理器文件名

> ID：13604777
> 
> 赞同：1
> 
> 时间：2012-11-28T12:10:39.613
> 
> 标签：c#, .net

> **可能重复：**
> [在任务管理器的应用程序选项卡中设置应用程序名称](https://stackoverflow.com/questions/1365789/set-application-name-in-task-managers-applications-tab)

似乎我们可以在任务管理器中为某些应用程序使用不同的名称。

WPF应用程序如何做到这一点？

> 即Visual Studio exe文件是“devenv.exe”，你可以在任务管理器下看到它，比如“Microsoft Visual Studio 2012（32位）”

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T12:28:06.343

行。我找到了。

它是“程序集信息”下的“标题”字段。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T12:42:37.537

这很容易做到。任务管理器从文件版本资源中读取它，这是嵌入到程序中的非托管资源。.NET 中的等价物是 FileVersionInfo.FileDescription 属性。

非托管资源由 C# 编译器使用 /win32res 编译选项嵌入。在 C# 程序中至少应该有 3 个，版本信息，声明它与 UAC 兼容的清单和图标。如果您自己没有指定它，那么 IDE 会自动生成它。它使用 AssemblyInfo.cs 中指定的 [assembly:] 属性，在这种情况下，[AssemblyTitle] 属性很重要。

最简单的设置方法是使用 Project + Properties、Compile 选项卡、Assembly Information 按钮、Title 字段。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T12:16:21.480

假设您使用 Visual Studio，我相信它的 Project>Properties>Application>Assembly name

# c# - Funq 将现有对象作为参数传递

> ID：13604782
> 
> 赞同：1
> 
> 时间：2012-11-28T12:11:00.033
> 
> 标签：c#, dependency-injection, servicestack, funq

我只知道如何`Register`和`Resolve`新的实例。但是，我不确定如何将现有对象作为参数传递给我想要解析的实例。

Q1：

```
interface IPerson {
  person FindAnOtherPerson();
  void MakeFriends();
}
class Person : IPerson {
  private List<Person> _people;
  //...
  void MakeFriends() {
    var peter = FindAnOtherPerson(); //from _people 
    var rel = new Relationship(this, peter); //build a relationship
    //how to pass params? something like Resolve<IRelationship>(this, peter)?
  }
  //...
} 
```

Q2：

```
interface IParent { }
interface IChild { }
class Parent : IParent {
  private IChild _child;
  public Parent() {
    _child = new Child(this); //parent knows child    
    //With DI, how do I resolve child and pass 'this' to child?
  }
}
class Child : IChild {
  private IParent _parent;
  public Child(IParent p) { //child knows parent
    _parent = p; 
  }
} 
```

我想了一会儿，但没有足够的脑汁来解决它。请帮忙谢谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:45:40.157

在我看来，您正在尝试对实体使用依赖注入。这不是最常见的做法，因为与他们可能使用的长期服务相比，系统中可能会有很多人，而且他们的寿命很短。这些服务（例如`IFriendFinder`和`IFriendMaker`）将使用容器来解析。

更多信息在这里：[为什么不使用 IoC 容器来解决实体/业务对象的依赖关系？](https://stackoverflow.com/questions/4835046/why-not-use-an-ioc-container-to-resolve-dependencies-for-entities-business-objec)

# excel - 根据前一个工作日筛选 Excel 数据透视表

> ID：13604784
> 
> 赞同：-1
> 
> 时间：2012-11-28T12:11:10.977
> 
> 标签：excel, pivot, pivot-table

我想根据前一个工作日过滤 Excel 数据透视表。我目前为“昨天”动态过滤它，但这在星期一没有帮助。这可以做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T08:59:42.380

我可以看到解决此问题的唯一方法是编写一个修改数据透视表中日期过滤器的宏。在宏中，您可以轻松检查昨天是否是周末以避免它们。您可以通过开始宏录制、手动更改日期、停止宏录制，然后打开宏代码源来熟悉您需要的代码。然后修改它以分析日期，并将结果代码绑定到某个按钮。完毕。

# java - 如何在flex中将子mxml值调用到主mxml中？

> ID：13604785
> 
> 赞同：0
> 
> 时间：2012-11-28T12:11:12.810
> 
> 标签：java, apache-flex, mxml, blazeds

实际上，在我的 Flex 示例应用程序中，主 mxml 称为`Demo.mxml`.. 在主 mxml 文件中有登录按钮，当我们单击登录按钮`Login.mxml`文件时称为

```
protected function button2_clickHandler(event:MouseEvent):void
        {

            PopUpManager.createPopUp(this,Login);
        } 
```

在 Login.mxml 文件中使用 java.. 进行一些身份验证

```
public var userService:UserService = new UserService();
        [Bindable] public var userVO:UserVO = new UserVO();

        protected function loginUser(event:MouseEvent):void
        {

            var rpcAuthenticateUser:AsyncToken = userService.authenticateUser(userid_id.text, password_id.text);
            rpcAuthenticateUser.addResponder(new mx.rpc.Responder(handle_authenticate_success, handler_failure));

        }
........

 userVO=userService.getUser();
...... 
```

一切都在 Login.mxml 文件中正确完成现在我得到了价值。

```
How to get userVO object in Demo.mxml file ? 
```

实际上我正在尝试，但它给出了一些 Null 值......请帮助我

```
Thanks in Advance... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:14:09.127

创建一个作为单例的模型类[请参阅我的关于制作单例的答案](https://stackoverflow.com/questions/13318290/as3-singleton-implementations/13318889#13318889)。

然后在你的 Demo.mxml

```
[Bindable] public var model:MyModel = MyModel.getInstance(); 
```

然后在您的登录表单中

```
public var model:MyModel = MyModel.getInstance(); 
```

然后当您从服务获得响应时：

```
model.userVO = userService.getUser(); 
```

现在在您的 Demo.mxml 中，userVO 现在已在那里填充并可用。

# apache-flex - AIR 移动应用程序：使用来自不同机器的相同 p12 证书

> ID：13604786
> 
> 赞同：0
> 
> 时间：2012-11-28T12:11:16.197
> 
> 标签：apache-flex, air, flex4, flex4.5

我正在为我的 android 移动应用程序使用这个 .p12 自签名证书。我可以在家中的一台机器上使用此证书，它会在 Google Play 商店中完美地更新我的应用程序。

但是当我尝试在另一台机器上使用相同的 .p12 时，Google Play 不接受我的应用程序抱怨它没有使用相同的密钥。

那么，是否可以在不同的机器上使用相同的 .p12 文件？除了这个 .p12 文件，我还需要什么吗？

注意：我现在买不起各个公司颁发的数字证书。

谢谢。

![在此处输入图像描述](../Images/24291d5b7e36192c9b575a652f213c7f.png)

# windows-ce - WinCE 6.0 中的文本转语音

> ID：13604787
> 
> 赞同：0
> 
> 时间：2012-11-28T12:11:18.643
> 
> 标签：windows-ce, text-to-speech

如何在 WinCE 6.0 中实现文本转语音？我可以使用 Microsoft 语音 API (SAPI) 吗？

我更喜欢 C#，但欢迎使用其他语言的任何示例。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:55:02.870

SAPI 在 Windows CE 中是“支持”的，但实际上并没有功能。没有声音被包括在内，所以这真的不是一个可行的解决方案。

您可以尝试让开源[eSpeak](http://sourceforge.net/projects/espeak/)之类的东西正常工作。我从未尝试过，我不知道他们是否已将其移植到 CE，但它具有完整的源代码，因此可能值得研究。

如果您想要使用托管代码支持的东西，[Chant](http://www.chant.net/Products/DeveloperWorkbench/requirements.aspx)是一种我知道可行的商业选项。

# javascript - 禁用详细信息/摘要

> ID：13604788
> 
> 赞同：10
> 
> 时间：2012-11-28T12:11:27.180
> 
> 标签：javascript, html, css

当我将新`details`标签与 a 结合使用时，`summary`我想禁用生成的输入。我以为

```
<details open disabled> 
```

可以做到这一点，但遗憾的是它不起作用。

如何禁用详细信息元素？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2020-08-01T15:59:45.340

一个非常简单的方法是只使用 CSS。如果您愿意，您仍然可以使用该`disabled`属性或将其改为 a 。`class`设置为时的[`pointer-events`](https://developer.mozilla.org/en-US/docs/Web/CSS/pointer-events)声明`none`使`summary`标签对鼠标不可见（标签下方的元素因此可以点击。）添加`tabindex="-1"`到`summary`禁用的标签中以消除键盘焦点。

```
<details open disabled>
  <summary tabindex="-1">click here: [disabled]</summary>
  <p>content</p>
</details>

<details open class="disabled">
  <summary tabindex="-1">click here: .disabled</summary>
  <p>content</p>
</details>

<details open>
  <summary>click here: NOT disabled</summary>
  <p>content</p>
</details>

<style>
  details[disabled] summary,
  details.disabled summary {
    pointer-events: none; /* prevents click events */
    user-select: none; /* prevents text selection */
  }
</style> 
```

[https://codepen.io/joelnagy/pen/MWKNGGp](https://codepen.io/joelnagy/pen/MWKNGGp)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-28T12:36:34.207

`disabled`您可以在元素上设置一个单击处理程序，而不是使用不存在的属性，`<details>`并从那里阻止默认事件行为。快速而肮脏的方法是：

```
<details open onclick="return false">
    <summary>Click here</summary>
    <p>content</p>
</details> 
```

正确的方法是使用`addEventListener`：

```
<details id="mydetails" open>
    <summary>Click here</summary>
    <p>content</p>
</details>

<script>
document.getElementById('mydetails').addEventListener('click', function(e) {
    e.preventDefault();
});
</script> 
```

[http://jsfiddle.net/L8HUZ/1/](http://jsfiddle.net/L8HUZ/1/)

要解决您在评论中提到的焦点问题，请将其添加`tabindex="-1"`为属性`<summary>`以防止其获得键盘焦点。请注意，我不确定这是否适用于每个浏览器，`focus`即使使用该属性，点击仍会触发事件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-28T12:37:17.700

我想您可以返回 false 以防止默认行为：

```
<details open="" onclick="return false;">
<p>Hello</p></details> 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2017-01-09T21:53:59.647

```
<details class="mydetails" open>
<summary>Click here</summary>
<p>content</p></details>

$(".mydetails").click(function(event) {event.preventDefault();}); 
```

# google-app-engine - Javascript 文件 (nocache.js) 未上传到 gwt 项目的 appengine

> ID：13604789
> 
> 赞同：0
> 
> 时间：2012-11-28T12:11:28.820
> 
> 标签：google-app-engine, gwt, google-plugin-eclipse

我创建了一个要上传到 Appengine 的 GWT 项目。它编译和上传没有错误[http://chicbustracker.appspot.com/](http://chicbustracker.appspot.com/)。问题是 nocache.js 文件丢失。该项目在开发模式下运行良好，我尝试使用相同的 src 文件设置一个新项目，但出现相同的错误。我还注意到 favicon.ico 也不见了。我现在这可能是信息很少的方式，但我什至现在都不知道在哪里看。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T19:02:18.087

我终于弄清楚了问题所在。我的 javascript 文件所在的文件夹都是小写字母，而且上传文件似乎区分大小写。我更改了 jscript 文件的名称和包含它的文件夹，现在它可以工作了。不过很奇怪。

# android - 如何在单选按钮和复选框的右侧显示图像

> ID：13604792
> 
> 赞同：0
> 
> 时间：2012-11-28T12:11:45.840
> 
> 标签：android

我正在谈论多项选择测试。

我有一些图像作为单选和多项选择的答案。

```
<radio button or checkbox here>  <image here> 
```

`programatically`我需要将图像添加到可绘制文件夹中的单选按钮或复选框的右侧

如何实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T12:15:15.813

在你的 xml 文件中试试这个..

```
<RadioButton
        android:drawableRight="@drawable/icon"
        android:id="@+id/radioButton1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"></RadioButton> 
```

编辑

对不起..

可能你正在寻找这个..

```
RadioButton rb = (RadioButton) findViewById(R.id.radioButton1);
        Drawable d = getResources().getDrawable(R.drawable.icon);
        rb.setCompoundDrawables(null, null, d, null); 
```

# google-app-engine - 从 Python Webapp2 App Engine 中的函数访问 self.request.get()

> ID：13604795
> 
> 赞同：0
> 
> 时间：2012-11-28T12:11:52.143
> 
> 标签：google-app-engine, webapp2

我试图通过将 POST 变量获取和验证移出到一个函数来干燥我的 webapp2.RequestHandlers。

self.request.get 在处理程序之外的函数中不起作用。如何从函数访问 POST 变量？

```
class my_form(webapp2.RequestHandler):
    def post(self):      
        fieldvalidation('field1', 'string')

def fieldvalidation(fieldname, validationoptions):
   x = self.request.get(fieldname)  # <<< does not work outside of class my_form
   ....... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:56:38.267

您必须将 self 或 self.request 传递给该函数。

```
class my_form(webapp2.RequestHandler):
    def post(self):      
        fieldvalidation(self.request)

def fieldvalidation(request):
   x = request.get(fieldname)  # <<< get the fieldname from the request object 
```

# windows-8 - 如何在 Win 8 Metro 风格应用程序中更新超过 5 个项目的动态磁贴

> ID：13604797
> 
> 赞同：1
> 
> 时间：2012-11-28T12:12:00.343
> 
> 标签：windows-8

在我的 Windows 8 Metro 风格应用程序中，我将从数据库中获取超过 5 条的记录，并将这些记录放在一个集合中。因此，在完成显示前 5 个项目后，我需要在第一次迭代中更新我的前 5 个记录，我需要显示接下来的 5 个项目或已存储在集合中的剩余项目。我正在使用 C# 和 Xaml 执行此操作。

请提供一些代码或建议来执行此操作。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:25:09.953

MSDN 文档对此非常有用：

[http://msdn.microsoft.com/en-us/library/windows/apps/hh465429.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh465429.aspx)

请注意，您可以根据需要排队任意数量的项目，但实际上只有最后 5 个项目会循环显示。如果您与标记通知保持一致，则磁贴将始终显示 5 个最新的。

# android - 从 xml 代码中删除/删除后显示 Edittext 上的 RequestFocus

> ID：13604798
> 
> 赞同：1
> 
> 时间：2012-11-28T12:12:01.580
> 
> 标签：android

`<requestfocus />`我在 xml 中为我的 android 2.2 应用程序的 edittext 小部件定义了一个标签。后来，我删除了`<requestfocus />`标签，但定义edittext的活动仍然显示软android键盘。我重新设计了代码，类似于另一个`<requestfocus />`从未出现过的活动，但这个 edittext 活动仍然会抛出软 android 键盘。

关于如何阻止这种行为的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:20:53.503

在您的活动中添加此代码

```
this.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN); 
```

# objective-c - 如何在 iOS 中按顺序播放视频 - Objective C

> ID：13604799
> 
> 赞同：0
> 
> 时间：2012-11-28T12:12:02.903
> 
> 标签：objective-c, xcode, ios5, xcode4.5

我有一个默认的媒体播放器，我想依次播放视频。我该怎么做？有什么简单的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:21:19.243

`MPMoviePlayer`在for中添加观察者`MPMoviePlayerPlaybackDidFinishNotification`

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(myMovieFinished:) name:MPMoviePlayerPlaybackDidFinishNotification object:yourMPMoviePlayerObject];

-(void)myMovieFinished:(NSNotification*)aNotification
{
    MPMoviePlayerController *moviePlayer = [aNotification object];
    //maintain index of video in this method as each time video URL will be different
    [moviePlayer setContentURL:nextVideoURLhere];
    [moviePlayer play];
} 
```

不需要时删除：

```
[[NSNotificationCenter defaultCenter] removeObserver:self name:MPMoviePlayerDidFinishNotification object:yourMPMoviePlayerObject]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T12:28:47.257

维护一个包含所有要播放的视频列表的数组。先将歌曲分配给播放器，歌曲完成后就可以这样调用了。这只是一个例子。

```
[[NSNotificationCenter defaultCenter] addObserver:self 
    selector:@selector(playbackStateChanged) 
    name: MPMoviePlayerPlaybackDidFinishNotification object:nil]; 
```

然后在该方法中释放以前的播放器并为新播放器分配新歌曲。对 all 重复相同的操作。

# adobe - Adobe CQ 构建过程

> ID：13604800
> 
> 赞同：0
> 
> 时间：2012-11-28T12:12:04.853
> 
> 标签：adobe, aem

Adobe CQ5有多少种编译运行方式？

我知道使用 Apache Maven，但是在我们的项目中，他们没有遵循 Maven 架构，还有其他方法可以构建和编译。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:42:47.377

CQ5 以编译后的 JAR 文件的形式交付，因此我理解您的问题是“编译和运行 Adob​​e CQ5 应用程序的方法有哪些？”

除了[Eclipse/Maven 组合](http://dev.day.com/docs/en/cq/current/developing/developmenttools/developing_with_eclipse.html)之外，您还可以使用基于 Web 的[CRXDE Lite](http://dev.day.com/docs/en/cq/current/core/developing/development_tools/developing_with_crxde_lite.html)工具、[IntelliJ](http://dev.day.com/docs/en/cq/current/core/how_to/setting_up_an_intellij.html)和/或 CRXDE 桌面工具。我的技术主管也喜欢使用 NetBeans。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T07:24:29.453

您的自定义应用程序 Java 代码可以通过 Felix 控制台（带有包含 OSGi 标头的清单文件的 JAR 文件）部署为 OSGi 包，并且您的组件渲染脚本可能依赖于所述代码（所有内容都位于 /apps 目录下）只是一个 Vault 包（包含特定元数据文件的 zip 文件；您可以创建一个包并打开它以查看需要哪些文件），您也可以使用**Ant**之类的构建工具真正组合一个部署包。

当然，我认为如果您可以设置 Maven/Eclipse，那么走这条路会更好。

*   关于蚂蚁：[http ://ant.apache.org/](http://ant.apache.org/)
*   关于 OSGi 包：[http ://en.wikipedia.org/wiki/OSGi#Bundles](http://en.wikipedia.org/wiki/OSGi#Bundles)
*   关于 CQ 中的包：http: [//dev.day.com/docs/en/crx/current/how_to/package_manager.html](http://dev.day.com/docs/en/crx/current/how_to/package_manager.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T07:51:03.767

将 Java 代码集成到 CQ5 中的标准方法是通过 OSGi 包，它可以使用任何合适的工具构建，它们没有什么特别之处。OSGi 包只是一个 java jar 文件，在 MANIFEST.MF 中有一些额外的头文件，所以在紧要关头，您甚至可以使用文本编辑器以及 javac 和 jar 工具来构建它们。

CQ5 应用程序还使用存储在 CRX 内容存储库中的脚本和内容，如果您没有外部工具，则可以使用 HTTP 请求或 CQ5 的 CRXDE 资源管理器创建该内容，并使用 CQ5 的包管理器打包该内容。

各种 Maven 插件有助于使这更容易，但它们不是构建 CQ5 应用程序所必需的。

# android - 我想发送一个用户名并传递给一个 url 但程序有错误

> ID：13604801
> 
> 赞同：0
> 
> 时间：2012-11-28T12:12:07.037
> 
> 标签：android, url, android-asynctask, runtime-error

我想连接到一个 url 并将用户名和密码发送到 url，然后我得到 url 的响应。我阅读[了这个](http://developer.android.com/reference/java/net/HttpURLConnection.html)文档并使用了`GET`方法。但是当我运行程序时，程序已经停止。为什么？

GetFromURL.java：

```
@SuppressLint("NewApi")
class GetFromURL extends AsyncTask<String,Void, String> {
InputStream is = null;
@Override
protected String doInBackground(String... urls) {

    URL url=null;
    String response=null;
    String parameters=null;
    OutputStreamWriter request=null;

    try {
        url = new URL("http://www.authentication.com/login.php");//This is not real URL.
    } catch (MalformedURLException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();

    }

    try {
        HttpURLConnection urlConnection=(HttpURLConnection)url.openConnection();
        urlConnection.setDoOutput(true);
        //setRequestProperty();
        urlConnection.setRequestMethod("GET");
        request=new OutputStreamWriter(urlConnection.getOutputStream());
        request.write(parameters);
        InputStreamReader inStream=new InputStreamReader(urlConnection.getInputStream());
        response=convertStreamToString(inStream);
        inStream.close();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();

    }
    return response;
}
private static String convertStreamToString(InputStreamReader is) {
    BufferedReader reader = new BufferedReader(is);
    StringBuilder sb = new StringBuilder();

    String line ="";
    try {
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
    } catch (IOException e) {
        e.printStackTrace();

    } finally {
        try {
            is.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    return sb.toString();
}
} 
```

MainActivity.java：

```
public class MainActivity extends Activity {

String user=null;
String pass=null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    EditText user_id;
    EditText pass_id;
    Button button;

    user_id=(EditText)findViewById(R.id.user_id);
    pass_id=(EditText)findViewById(R.id.pass);
    button=(Button)findViewById(R.id.button_click);
    user=user_id.getText().toString();
    pass=pass_id.getText().toString();

    button.setOnClickListener(onClickListener);       

}
private OnClickListener onClickListener=new OnClickListener(){
    public void onClick(View v){
          AsyncTask<String, Void, String> async;
          String result="test";
          async=new GetFromURL().execute("U="+user+"&K="+pass);
            try {
                result = async.get();
                Log.i("RESULT", result);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (ExecutionException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }       
    }
};
} 
```

例外：

```
11-28 14:55:48.757: I/catch2(19663): of main
11-28 14:55:48.757: W/System.err(19663): java.util.concurrent.ExecutionException: java.lang.NullPointerException
 11-28 14:55:48.757: W/System.err(19663):   at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:223)
 11-28 14:55:48.765: W/System.err(19663):   at java.util.concurrent.FutureTask.get(FutureTask.java:82)
 11-28 14:55:48.765: W/System.err(19663):   at android.os.AsyncTask.get(AsyncTask.java:462)
11-28 14:55:48.765: W/System.err(19663):    at org.example.reward.MainActivity$1.onClick(MainActivity.java:75)
 11-28 14:55:48.765: W/System.err(19663):   at android.view.View.performClick(View.java:3480)
11-28 14:55:48.765: W/dalvikvm(19663): threadid=11: thread exiting with uncaught exception (group=0x40a4a1f8)
11-28 14:55:48.765: W/System.err(19663):    at android.view.View$PerformClick.run(View.java:13983)
11-28 14:55:48.765: W/System.err(19663):    at android.os.Handler.handleCallback(Handler.java:605)
11-28 14:55:48.765: W/System.err(19663):    at android.os.Handler.dispatchMessage(Handler.java:92)
11-28 14:55:48.765: W/System.err(19663):    at android.os.Looper.loop(Looper.java:137)
11-28 14:55:48.765: W/System.err(19663):    at android.app.ActivityThread.main(ActivityThread.java:4340)
11-28 14:55:48.765: W/System.err(19663):    at java.lang.reflect.Method.invokeNative(Native Method)
11-28 14:55:48.765: W/System.err(19663):    at java.lang.reflect.Method.invoke(Method.java:511)
11-28 14:55:48.772: W/System.err(19663):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
11-28 14:55:48.772: W/System.err(19663):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
11-28 14:55:48.772: W/System.err(19663):    at dalvik.system.NativeStart.main(Native Method)
11-28 14:55:48.772: W/System.err(19663): Caused by: java.lang.NullPointerException
11-28 14:55:48.772: W/System.err(19663):    at java.io.Writer.write(Writer.java:141)
11-28 14:55:48.772: W/System.err(19663):    at org.example.reward.GetFromURL.doInBackground(GetFromURL.java:59)
 11-28 14:55:48.772: W/System.err(19663):   at org.example.reward.GetFromURL.doInBackground(GetFromURL.java:1)
 11-28 14:55:48.772: W/System.err(19663):   at android.os.AsyncTask$2.call(AsyncTask.java:264)
 11-28 14:55:48.772: W/System.err(19663):   at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
 11-28 14:55:48.772: W/System.err(19663):   at java.util.concurrent.FutureTask.run(FutureTask.java:137)
11-28 14:55:48.772: W/System.err(19663):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
11-28 14:55:48.772: W/System.err(19663):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
11-28 14:55:48.772: W/System.err(19663):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
11-28 14:55:48.772: W/System.err(19663):    at java.lang.Thread.run(Thread.java:856)
11-28 14:55:48.772: E/AndroidRuntime(19663): FATAL EXCEPTION: AsyncTask #1
11-28 14:55:48.772: E/AndroidRuntime(19663): java.lang.RuntimeException: An error occured while executing doInBackground()
11-28 14:55:48.772: E/AndroidRuntime(19663):    at android.os.AsyncTask$3.done(AsyncTask.java:278)
11-28 14:55:48.772: E/AndroidRuntime(19663):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
11-28 14:55:48.772: E/AndroidRuntime(19663):    at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
11-28 14:55:48.772: E/AndroidRuntime(19663):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
11-28 14:55:48.772: E/AndroidRuntime(19663):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
11-28 14:55:48.772: E/AndroidRuntime(19663):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
11-28 14:55:48.772: E/AndroidRuntime(19663):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
11-28 14:55:48.772: E/AndroidRuntime(19663):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
11-28 14:55:48.772: E/AndroidRuntime(19663):    at java.lang.Thread.run(Thread.java:856)
11-28 14:55:48.772: E/AndroidRuntime(19663): Caused by: java.lang.NullPointerException
11-28 14:55:48.772: E/AndroidRuntime(19663):    at java.io.Writer.write(Writer.java:141)
11-28 14:55:48.772: E/AndroidRuntime(19663):    at org.example.reward.GetFromURL.doInBackground(GetFromURL.java:59)
11-28 14:55:48.772: E/AndroidRuntime(19663):    at org.example.reward.GetFromURL.doInBackground(GetFromURL.java:1)
11-28 14:55:48.772: E/AndroidRuntime(19663):    at android.os.AsyncTask$2.call(AsyncTask.java:264)
11-28 14:55:48.772: E/AndroidRuntime(19663):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
11-28 14:55:48.772: E/AndroidRuntime(19663):    ... 5 more
11-28 14:55:49.265: D/OpenGLRenderer(19663): Flushing caches (mode 0)
11-28 14:55:49.796: D/OpenGLRenderer(19663): Flushing caches (mode 1)
11-28 14:55:50.140: I/Process(19663): Sending signal. PID: 19663 SIG: 9
11-28 15:01:52.538: D/libEGL(19852): loaded /system/lib/egl/libGLES_android.so
11-28 15:01:52.538: D/libEGL(19852): loaded /vendor/lib/egl/libEGL_POWERVR_SGX540_120.so
11-28 15:01:52.554: D/libEGL(19852): loaded /vendor/lib/egl/libGLESv1_CM_POWERVR_SGX540_120.so
11-28 15:01:52.561: D/libEGL(19852): loaded /vendor/lib/egl/libGLESv2_POWERVR_SGX540_120.so
11-28 15:01:52.726: D/OpenGLRenderer(19852): Enabling debug mode 0
11-28 15:02:08.827: D/dalvikvm(19852): GC_CONCURRENT freed 157K, 2% free 14304K/14535K, paused 3ms+1ms
11-28 15:02:09.991: I/catch2(19852): of main
11-28 15:02:09.991: W/System.err(19852): java.util.concurrent.ExecutionException: java.lang.NullPointerException
11-28 15:02:09.999: W/System.err(19852):    at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:223)
11-28 15:02:09.999: W/System.err(19852):    at java.util.concurrent.FutureTask.get(FutureTask.java:82)
11-28 15:02:09.999: W/System.err(19852):    at android.os.AsyncTask.get(AsyncTask.java:462)
11-28 15:02:09.999: W/System.err(19852):    at org.example.reward.MainActivity$1.onClick(MainActivity.java:75)
11-28 15:02:09.999: W/System.err(19852):    at android.view.View.performClick(View.java:3480)
11-28 15:02:09.999: W/System.err(19852):    at android.view.View$PerformClick.run(View.java:13983)
11-28 15:02:09.999: W/System.err(19852):    at android.os.Handler.handleCallback(Handler.java:605)
11-28 15:02:09.999: W/System.err(19852):    at android.os.Handler.dispatchMessage(Handler.java:92)
11-28 15:02:09.999: W/System.err(19852):    at android.os.Looper.loop(Looper.java:137)
11-28 15:02:09.999: W/System.err(19852):    at android.app.ActivityThread.main(ActivityThread.java:4340)
11-28 15:02:09.999: W/System.err(19852):    at java .lang.reflect.Method.invokeNative(Native Method)
11-28 15:02:09.999: W/System.err(19852):    at java.lang.reflect.Method.invoke(Method.java:511)
11-28 15:02:09.999: W/System.err(19852):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
11-28 15:02:09.999: W/System.err(19852):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
11-28 15:02:09.999: W/System.err(19852):    at dalvik.system.NativeStart.main(Native Method)
11-28 15:02:09.999: W/System.err(19852): Caused by: java.lang.NullPointerException
11-28 15:02:09.999: W/System.err(19852):    at java.io.Writer.write(Writer.java:141)
11-28 15:02:09.999: W/System.err(19852):    at org.example.reward.GetFromURL.doInBackground(GetFromURL.java:59)
11-28 15:02:09.999: W/System.err(19852):    at org.example.reward.GetFromURL.doInBackground(GetFromURL.java:1)
11-28 15:02:09.999: W/System.err(19852):    at android.os.AsyncTask$2.call(AsyncTask.java:264)
11-28 15:02:09.999: W/System.err(19852):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
11-28 15:02:09.999: W/System.err(19852):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
11-28 15:02:09.999: W/System.err(19852):    at   android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
11-28 15:02:09.999: W/System.err(19852):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
11-28 15:02:09.999: W/System.err(19852):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
11-28 15:02:09.999: W/System.err(19852):    at java.lang.Thread.run(Thread.java:856)
11-28 15:02:10.007: W/dalvikvm(19852): threadid=12: thread exiting with uncaught exception (group=0x40a4a1f8)
11-28 15:02:10.015: E/AndroidRuntime(19852): FATAL EXCEPTION: AsyncTask #1
11-28 15:02:10.015: E/AndroidRuntime(19852): java.lang.RuntimeException: An error occured while executing doInBackground()
11-28 15:02:10.015: E/AndroidRuntime(19852):    at android.os.AsyncTask$3.done(AsyncTask.java:278)
11-28 15:02:10.015: E/AndroidRuntime(19852):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
11-28 15:02:10.015: E/AndroidRuntime(19852):    at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
11-28 15:02:10.015: E/AndroidRuntime(19852):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
11-28 15:02:10.015: E/AndroidRuntime(19852):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
11-28 15:02:10.015: E/AndroidRuntime(19852):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
11-28 15:02:10.015: E/AndroidRuntime(19852):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
11-28 15:02:10.015: E/AndroidRuntime(19852):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
11-28 15:02:10.015: E/AndroidRuntime(19852):    at java.lang.Thread.run(Thread.java:856)
11-28 15:02:10.015: E/AndroidRuntime(19852): Caused by: java.lang.NullPointerException
11-28 15:02:10.015: E/AndroidRuntime(19852):    at java.io.Writer.write(Writer.java:141)
11-28 15:02:10.015: E/AndroidRuntime(19852):    at org.example.reward.GetFromURL.doInBackground(GetFromURL.java:59)
11-28 15:02:10.015: E/AndroidRuntime(19852):    at org.example.reward.GetFromURL.doInBackground(GetFromURL.java:1)
11-28 15:02:10.015: E/AndroidRuntime(19852):    at android.os.AsyncTask$2.call(AsyncTask.java:264)
11-28 15:02:10.015: E/AndroidRuntime(19852):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
11-28 15:02:10.015: E/AndroidRuntime(19852):    ... 5 more
11-28 15:02:10.249: D/OpenGLRenderer(19852): Flushing caches (mode 0)
11-28 15:02:10.788: D/OpenGLRenderer(19852): Flushing caches (mode 1)
11-28 15:02:12.163: I/Process(19852): Sending signal. PID: 19852 SIG: 9 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:14:07.470

You are passing a **null** variable to the function `write`..

```
request.write(parameters); 
```

# perl - 填充散列的散列 perl

> ID：13604802
> 
> 赞同：3
> 
> 时间：2012-11-28T12:12:09.393
> 
> 标签：perl, hash

我有以下哈希值：

```
my %MacroA = ('Category' => {}, 'Item' => {}, 'Description' => {}, 'Score' => {}); 
```

我想要的是遍历一个文件，然后将新元素添加到不同的哈希中。假设该行包含“布局”，我每次看到它时都想将其存储在“类别”中

我所做的是：

```
while (my $line = <$file>) {                                        

if ($line =~ /\b(layout)\b,/) { 
foreach my $categories (keys $MacroA{'Category'}) {
    $MacroA{Category} = $1;
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T12:22:49.913

您的问题非常令人困惑，但您的问题似乎是因为您正在`keys`参考而不是哈希。较新的 perls 确实支持这一点，但您可能使用的是旧版本。

在您的示例中`$MacroA{'Category'}`返回哈希*引用*，而不是哈希。您使用 , 初始化了散列`'Category' => {}`，并且`{}`是对空匿名散列的引用。

要将散列引用转换为散列，请使用`%{ ... }`符号；在这种情况下，你会写`keys %{ $MacroA{'Category'} }`. 是的，这很难看，这就是为什么 Perl 被更改为支持`keys`引用。

但是请注意，您的下一行是`$MacroA{Category} = $1;`将引用替换为 中的任何内容`$1`，可能是字符串`"layout"`。这不是参考，所以下一次 while 循环时，你的脚本会崩溃。您可能想要做一个多级哈希，类似`$MacroA{Category}{$1} = $file`或类似的东西，这取决于您想要在哈希中建立什么数据，但目前还不清楚您想要实现什么。另一个建议散列数组的答案可能是您想要的。在这种情况下，如果使用较旧的 perl，则符号`@{ ... }`会将数组引用转换为可以与 一起使用的数组`push`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T14:40:29.767

看起来你正在尝试做一种命名列的事情，在这里。这很简单，如果你知道怎么做的话。

从您对 Peter 的评论开始（“[我] 想要将每一行的“布局”存储到“描述”），这就是这段代码允许你做的事情：*存储*它。

因为我看到的散列的主要情况是记录本身，所以这是该*演示*使用的唯一散列。它将它们存储在一个数组中。我真的不明白你想如何从你的例子中索引它们。而且您似乎对如何处理它们有些困惑。`'layout'`当然，处理其中包含的每一行然后将其存储为“类别”字段并不是很有用 。

```
use strict;
use warnings;

my @columns = qw<field1 field2 field3 field4>;
my @list;
my $fh = \*::DATA;
my $header = <$fh>;
if ( substr( $header, 0, 1 ) eq '#' ) {
    ( $header ) = $header =~ m/#(.*)/;
    $header =~ s/\s+$//; 
    @columns = split /,\s*/, $header;
}
else { 
    seek( $fh, 0, 0 ); # go back
}

# optional statement to capitalize field names
@columns = map { ucfirst } @columns;

while ( my $line = <$fh> ) { 
    next unless $line =~ m/^\s*layout\b/;
    $line =~ s/\s*$//;
    # store fields by hash slice in the tip of the array
    @{ $list[@list] }{ @columns } = split /,\s*/, $line;
}

__DATA__
#category, item, description, score 
layout,f.4,Macro placement clearance,pass 
layout,f.14,No area congestion,pass 
layout,f.17,placement collar diode,fail 
layout,f.18,placement collar buffer,pass 
layout,f.26,tie connection,fail 
layout,f.28,CTS allowed cell,fail 
layout,f.29,CTS allowed layed,pass 
layout,f.31,Clock De-cap cell,fail 
layout,f.33,Clock non default rule,fail 
```

虽然它不是你想要的一切，但将记录复制到数组中是“处理它”的*简单*模型，我们可以这样做：

```
my %by_item;
while ( my $line = <$fh> ) { 
    next unless $line =~ m/^\s*layout\b/;
    $line =~ s/\s*$//;
    my %h;
    @h{ @columns } = split /,\s*/, $line;
    $by_item{ $h{Item} } = \%h;
    ### OR 
    # push @{ $by_item{ $h{Item} } }, %h;
} 
```

你也可以这样做：

```
my %by_field;
...
$by_field{Item}{ $h{Item} }               
    = $by_field{Description}{ $h{Description} } 
    = \%h
    ; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T12:20:33.160

我认为您需要一个数组散列：

```
my %MacroA = ('Category' => [], 'Item' => [], 'Description' => [], 'Score' => []);

while (my $line = <$file>) {                                        

if ($line =~ /\b(layout)\b,/) { 
foreach my $categories (keys $MacroA{'Category'}) {
    push $MacroA{Category}, $1;
}
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T12:26:55.340

你的问题令人困惑。只需将“布局”添加到 Category 键很简单，不涉及循环：

```
while (my $line = <$file>) {                                        
    if ($line =~ /\blayout\b,/) { 
        $MacroA{Category} = 'layout';
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-28T17:04:22.383

下面是一个完整的程序，分成不同的块。要运行它，请将答案复制并粘贴到名为 的文件`populate`中，但要删除本段等注释部分。

几乎所有 Perl 程序（尤其是当您还是初学者时）都应该从

```
#! /usr/bin/env perl

use strict;
use warnings; 
```

第一行告诉系统如何执行你的程序。启用`strict`和`warnings`pragmata 将帮助您避免常见错误，并帮助解释您的程序在您看到令人惊讶的行为的情况下正在做什么。

根据您的问题，您想要的数据结构是哈希数组。数组的每个“行”或元素将对应于输入文件中的一行，并具有以下形式

```
# { Category => '...', Item => '...', Description => '...', Score => '...' } 
```

该程序还将从输入中读取列名。

该代码使用 Perl 的“菱形运算符”来读取每一行输入。[`chomp`](http://perldoc.perl.org/functions/chomp.html)如果存在，则删除尾随换行符。

如果该行告诉我们标题名称（*即*，它以 开头`#`），我们将每个字段存储在`@columns`. 该[`ucfirst`](http://perldoc.perl.org/functions/ucfirst.html)位可能不熟悉：它是**字符串**的**第一个****字符**。因为有几个列名，我们使用来应用到每一个。**[`map`](http://perldoc.perl.org/functions/map.html)`ucfirst`**

 **否则，该线代表一个数据行。我们[`split`](http://perldoc.perl.org/functions/split.html)将行插入以逗号分隔的字段并将它们加载到新的哈希中。该[`push`](http://perldoc.perl.org/functions/push.html)行将引用（在哈希之前使用反斜杠创建）添加到`@MacroA`.

```
my @MacroA;
my @columns;
while (<>) {
  chomp;

  if (s/^#//) {                               # / fix Stack Overflow coloring
    @columns = map ucfirst, split /\s*,\s*/;  # / ditto
  }
  else {
    my %row;
    @row{@columns} = split /,/;
    push @MacroA, \%row;
  }
} 
```

请注意，上面的拆分是天真的。要处理一般 CSV 输入，请使用[CPAN 上的 CSV 模块](http://search.cpan.org/search?query=csv&mode=all)之一。

[Data::Dumper](http://search.cpan.org/perldoc?Data%3A%3ADumper)模块可用于快速打印复杂数据结构的内容。把它放在你的调试工具包里。

```
use Data::Dumper;
$Data::Dumper::Indent = $Data::Dumper::Terse = 1;
print Dumper \@MacroA;

__END__ 
```

`input`给定一个包含以下内容的文件

```
#category, item, description, score
layout,f.4,宏放置间隙,pass
布局,f.14,无区域拥堵,通过
布局，f.17，放置领二极管，失败
布局，f.18，放置领缓冲区，通过
布局，f.26，领带连接，失败
布局，f.28，CTS 允许单元格，失败
布局，f.29，CTS 允许铺设，通过
布局，f.31，时钟去电容单元，失败
布局，f.33，时钟非默认规则，失败
```

下面是一个示例运行。

```
$ perl 填充输入
[
  {
    '分数' => '通过',
    '项目' => 'f.4',
    '描述' => '宏放置间隙',
    '类别' => '布局'
  },
  {
    '分数' => '通过',
    '项目' => 'f.14',
    '描述' => '没有区域拥堵',
    '类别' => '布局'
  },
  {
    '得分' => '失败',
    '项目' => 'f.17',
    '描述' => '安置领二极管',
    '类别' => '布局'
  },
  {
    '分数' => '通过',
    '项目' => 'f.18',
    '描述' => '放置领缓冲区',
    '类别' => '布局'
  },
  {
    '得分' => '失败',
    '项目' => 'f.26',
    '描述' => '领带连接',
    '类别' => '布局'
  },
  {
    '得分' => '失败',
    '项目' => 'f.28',
    '描述' => 'CTS 允许的单元格',
    '类别' => '布局'
  },
  {
    '分数' => '通过',
    '项目' => 'f.29',
    '描述' => 'CTS 允许铺设',
    '类别' => '布局'
  },
  {
    '得分' => '失败',
    '项目' => 'f.31',
    'Description' => 'Clock De-cap cell',
    '类别' => '布局'
  },
  {
    '得分' => '失败',
    '项目' => 'f.33',
    '描述' => '时钟非默认规则',
    '类别' => '布局'
  }
]
```**

# javascript - how to allow only -Ve or +Ve values in text box using regex in javascript

> ID：13604804
> 
> 赞同：0
> 
> 时间：2012-11-28T12:12:10.270
> 
> 标签：javascript, regex

How to allow the user input to be only `-Ve or +Ve`

using java script.

I have tried something as follows but it is not allowing any value in the text box to be entered.

```
function rhFactor(txtBoxObj)
{  
   var pve = "+ve";
   var nve = "-ve";
    var ve = false;
    if( validTxtBoxObj(txtBoxObj))
    {
        if(pve == txtBoxObj.value || nve == txtBoxObj.value )
        {
            ve = true;
        }

        if(ve == false)
        {
           // alert('Allowed RH Factors - +ve,-ve');
            txtBoxObj.value="";
        }
        return false;
    }
    return true;
} 
```

This is how i called

```
onkeyup="rhFactor(this)" 
```

UPDATE :

```
function validTxtBoxObj(txtBoxObj)
{
    if(txtBoxObj != null) return true;
    return false
} 
```

Please help me to get this work.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:22:10.797

尝试以下操作：

```
if( validTxtBoxObj(txtBoxObj))
    {
        hasve = txtBoxObj.value.indexOf(pve) != -1 || txtBoxObj.value.indexOf(nve) != -1;
        if(hasve && parseInt(txtBoxObj.value.replace(pve,'').replace(nve,''),10)+'' != 'NaN' )
        {
            ve = true;
        } else {
           // alert('Allowed RH Factors - +ve,-ve');
            txtBoxObj.value="";
           ve = false;
        }
        return ve;
    } 
```

但是正如 Bergi 所指出的，您必须在用户完成输入后运行上述验证，例如提交或单击事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T12:18:57.243

正如您所写，您*只允许在 text box 中使用 -Ve 或 +Ve 值*。这不包括诸如`+`or之类的值`+V`，您在键入时需要（并且您挂上`keyup`）。粘贴整个值 ( `Ctrl+V`) 应该可以。

相反，检查`change`事件的有效性 - 当用户完成输入并转向下一个元素时。

[jsfiddle.net 上的演示](http://jsfiddle.net/ncW74/2/)

# windows-runtime - MDI type Application For Windows Store Apps

> ID：13604805
> 
> 赞同：1
> 
> 时间：2012-11-28T12:12:13.030
> 
> 标签：windows-runtime, windows-store-apps, winrt-xaml, winjs, mdi

Is it possible to implement a windows store/metro app that represents something like a MDI(Multiple Document Interface) style application? If so what are possible approaches I can follow? I am new to the WinRT environment.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T19:44:11.800

经典 MDI 已在很大程度上被 Web 浏览器中的选项卡式界面所取代。Metro 应用程序通常不使用这些，因为没有内置控件，而 GridView 是处理类似问题的方法。也就是说，您仍然可以获得 Chrome 和 IE 的 Metro 版本，它们可以执行全屏选项卡，您可以从中获得灵感，然后您可以创建一个类似于 Zune 软件的选项卡式界面，它基本上是 TabControl 的一个改良版。

根据您在 WinRT（HTML5、WinJS、XAML、DirectX 等）中用于 UI 开发的语言和框架，您当然会以不同的方式实现它。

在 XAML 中，您可以使用带有 RadioButtons 的水平方向 StackPanel，将 TextRadioButtonStyle 用于选项卡并根据所需的效果 - 使用 GridView/ScrollViewer（带有 Horizo​​ntalScrollViewerStyle）/FlipView/ContentControl/Frame/Grid 或任何其他内容呈现器来显示您的文档。如果您确实需要在屏幕上显示多个文档 - 您可以使用带有 GridSplitter 的 Grid（没有开箱即用的 GridSplitter，但 WinRT XAML Toolkit 库中有一个 CustomGridSplitter），实现您自己的 Windows 或执行类似的自定义操作Toolbox 应用程序 - 一切都取决于您想要实现的目标。

# sql-server - How to create an ejb entity with double primary keys?

> ID：13604806
> 
> 赞同：0
> 
> 时间：2012-11-28T12:12:16.383
> 
> 标签：sql-server, netbeans, ejb, ejb-3.0

I am having a problem while creating an entity of a related table (I'm using MS SQL Server and Enterprise Application in NetBeans IDE 7.2 - EJB3)

My database includes:

*   Projects table: primary key: projectId (int)
*   Users table: primary key: username (String)
*   UserProject table:
    *   projectId (FK reference table Projects)
    *   username (FK reference table Users)
    *   ... and some other field ...
    *   primary key: projectId and username (double PK)

When I create entity classes from Database, the class UserProjectPK is automatically created. Here is the class UserProject:

```
public class UserProject implements Serializable {
    @JoinColumn(name = "projectId", referencedColumnName = "projectId", insertable = false, updatable = false)
    @ManyToOne(optional = false)
    private Projects projects;

    @JoinColumn(name = "invitedLeader", referencedColumnName = "username")
    @ManyToOne
    private Users invitedLeader;

    @JoinColumn(name = "username", referencedColumnName = "username", insertable = false, updatable = false)
    @ManyToOne(optional = false)
    private Users users;
    private static final long serialVersionUID = 1L;

    @EmbeddedId
    protected UserProjectPK userProjectPK;

    @Size(max = 30)
    @Column(name = "position")
    private String position;

    @Column(name = "startDate")
    @Temporal(TemporalType.TIMESTAMP)
    private Date startDate;

    @Basic(optional = false)
    @NotNull
    @Column(name = "confirmed")
    private boolean confirmed;

    //getter and setter function 
```

I tried to create a new UserProject entity in UserProjectFacade (Session bean for Entity class):

```
public boolean join(Projects project, Users user, Users invitedLeader, String position, Date startDate) {
    UserProject newUserProject = new UserProject();
    UserProjectPK newUserProjectPK = new UserProjectPK(user.getUsername(), project.getProjectId());
    newUserProject.setUserProjectPK(newUserProjectPK);
    newUserProject.setProjects(project);
    newUserProject.setUsers(user);
    newUserProject.setInvitedLeader(invitedLeader);
    newUserProject.setPosition(position);
    newUserProject.setStartDate(startDate);
    if (invitedLeader == user) {
        newUserProject.setConfirmed(true);
    } else {
        newUserProject.setConfirmed(false);
    }
    try {
        create(newUserProject);
        return true;
    } catch (Exception e) {}
    return false;
} 
```

And when I run the function, the GlassFish Server reports the following errors:

```
WARNING: EJB5184:A system exception occurred during an invocation on EJB UserProjectFacade, method: public boolean ass2.session.UserProjectFacade.join(ass2.entity.Projects,ass2.entity.Users,ass2.entity.Users,java.lang.String,java.util.Date)
WARNING: javax.ejb.EJBException
at com.sun.ejb.containers.BaseContainer.processSystemException(BaseContainer.java:5215)
at com.sun.ejb.containers.BaseContainer.completeNewTx(BaseContainer.java:5113)
at com.sun.ejb.containers.BaseContainer.postInvokeTx(BaseContainer.java:4901)
at com.sun.ejb.containers.BaseContainer.postInvoke(BaseContainer.java:2045)
at com.sun.ejb.containers.BaseContainer.postInvoke(BaseContainer.java:1994)
at com.sun.ejb.containers.EJBLocalObjectInvocationHandler.invoke(EJBLocalObjectInvocationHandler.java:222)
at com.sun.ejb.containers.EJBLocalObjectInvocationHandlerDelegate.invoke(EJBLocalObjectInvocationHandlerDelegate.java:89)
at $Proxy379.join(Unknown Source)
at ass2.UserProjectSessionStub.join(UserProjectSessionStub.java:35)
at org.apache.jsp.createProject_jsp._jspService(createProject_jsp.java:118)
at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:111)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:411)
at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:473)
at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:377)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.NullPointerException
at ass2.session.UserProjectFacade.join(UserProjectFacade.java:37)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.glassfish.ejb.security.application.EJBSecurityManager.runMethod(EJBSecurityManager.java:1052)
at org.glassfish.ejb.security.application.EJBSecurityManager.invoke(EJBSecurityManager.java:1124)
at com.sun.ejb.containers.BaseContainer.invokeBeanMethod(BaseContainer.java:5388)
at com.sun.ejb.EjbInvocation.invokeBeanMethod(EjbInvocation.java:619)
at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
at com.sun.ejb.EjbInvocation.proceed(EjbInvocation.java:571)
at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.doAround(SystemInterceptorProxy.java:162)
at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.aroundInvoke(SystemInterceptorProxy.java:144)
at sun.reflect.GeneratedMethodAccessor97.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at com.sun.ejb.containers.interceptors.AroundInvokeInterceptor.intercept(InterceptorManager.java:861)
at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
at com.sun.ejb.containers.interceptors.InterceptorManager.intercept(InterceptorManager.java:370)
at com.sun.ejb.containers.BaseContainer.__intercept(BaseContainer.java:5360)
at com.sun.ejb.containers.BaseContainer.intercept(BaseContainer.java:5348)
at com.sun.ejb.containers.EJBLocalObjectInvocationHandler.invoke(EJBLocalObjectInvocationHandler.java:214)
... 34 more 
```

I'm new to EJB3 so I don't know how to handle this. Please help me (asap). Thank you a lot!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T21:32:44.530

Stacktrace 揭示了问题出在哪里：

```
...
Caused by: java.lang.NullPointerException
at ass2.session.UserProjectFacade.join(UserProjectFacade.java:37) 
```

检查你`UserProjectFacade`班级的第 37 行，你会得到答案。顺便问一下，你确定在这一行

```
..
if (invitedLeader == user) {
.. 
```

你想比较参考而不是他们的主键？

# iphone - Capture panorama image from iPhone camera in ios6

> ID：13604808
> 
> 赞同：3
> 
> 时间：2012-11-28T12:12:18.977
> 
> 标签：iphone, objective-c, ios, ios6, panoramas

Is there any way to programatically create a panorama image using iPhone camera ? like in iOS 6 capture panorama image feature.

Any idea how it's work or API on it, which is help me.Thanks in advance

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T05:31:25.110

如上所述，Apple 没有这方面的 API，但是有开源全景项目，请查看这个问题：[360° ios 全景库](https://stackoverflow.com/questions/3763978/360-panorama-libraries-for-ios)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T15:54:49.183

这不可能。Apple 尚未向开发人员提供 API。只有相机应用程序具有此功能。是的，这是重复的。

干杯!

# mysql - 在不折叠 NULL 值的情况下计算 MySQL 中的不同值

> ID：13604814
> 
> 赞同：5
> 
> 时间：2012-11-28T12:12:39.407
> 
> 标签：mysql, sql, count, null, aggregate-functions

我有`a`两个字段的表：`id`(PK) 和`f`.

考虑以下记录：

```
id | f
1  | NULL
2  | 'foo'
3  | 'bar'
4  | NULL
5  | 'foo'
6  | 'baz' 
```

我想检索并计算所有具有不同`f`值的记录，包括每条记录`WHERE f IS NULL`。给定这个条件，查询应该返回除 #5 之外的所有记录，因为相同的值已经包含在集合中，并且总计数为 5。

我用来检索所有记录的查询如下所示：

`SELECT CASE WHEN EXISTS (SELECT id FROM a a2 WHERE a2.f = a.f AND a.id < a2.id) THEN 1 END AS not_distinct FROM a HAVING not_distinct IS NULL`

如果可以改进此查询，我欢迎任何反馈。无论如何，主要问题是计数。显然`COUNT(*)`在这里添加 a 无济于事，我完全不知道如何在过滤后计算记录。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-28T13:18:09.760

有一种非常简单的方法可能对您有用：

```
select count(distinct ifnull(f, id))
from a 
```

请注意，此查询假定 f 值绝不是 id 值，并且根据样本数据和经验，这是合理的。

### 编辑：

我想了想，还有一个更*简单*的方法：

```
select count(distinct f) + sum(f is null) from a; 
```

你可以看到[在 sqlfiddle 上运行](http://www.sqlfiddle.com/#!2/b64ee/15)

这是有效的，因为`distinct`丢弃空值，并`sum(condition)`计算条件为 true 的次数，因为在 mysql 中 true is`1`和 false is `0`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-28T12:51:56.737

`NOT EXISTS`在`WHERE`子句中使用：

```
SELECT count(*)
FROM   a
WHERE  NOT EXISTS (SELECT * FROM a a2 WHERE a2.f = a.f AND a2.id < a.id); 
```

通过这种方式，您还可以获得实际行 - 如果您需要的数量超过实际数量：

```
SELECT *
FROM   a
WHERE  NOT EXISTS (SELECT * FROM a a2 WHERE a2.f = a.f AND a2.id < a.id) 
```

`=`操作员确保包含*所有*行`f IS NULL`。你的查询中已经有了。

[-> sqlfiddle](http://www.sqlfiddle.com/#!2/b64ee/13)

这些都不起作用：

```
SELECT DISTINCT f FROM a;

SELECT * FROM a GROUP BY f; 
```

..因为两者都会折叠`NULL`值，而您想要

> 每个记录 WHERE f 为 NULL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-18T14:16:58.733

```
 UPDATE comments SET view =     
                              (SELECT COUNT(DISTINCT browser, ip, ifnull(user_id, 0)) 
                              FROM counters WHERE item_type=comments.item_type )
    WHERE id=1 
```

# ajax - Testing ajax jasmine sinon

> ID：13604816
> 
> 赞同：1
> 
> 时间：2012-11-28T12:12:44.327
> 
> 标签：ajax, jasmine, sinon

```
describe('Ajax', function () {
  beforeEach(function () {
    // Instantiate module and reference it with this.testUser
    this.testUser = new TestUser();
    // Reference sinon.spy with this.spySetToken
    this.spySetToken = sinon.spy(this.testUser, 'setToken');
  });
  afterEach(function () {
    this.spySetToken.restore();
  });
  it('Does it respond with that data', function () {
    // Wrap $.ajax method and invoke success callback from ajax passing it a 'string'.
    sinon.stub($, 'ajax').yieldsTo('success', 'Custom response string');
    // test to see if my method that's inside the success callback is called with the string
    expect(this.spySetToken.toHaveBeenCalledWith('Custom response string');
  });

}); 
```

I'm getting 'Expected Function to be called'.

How do I test Ajax success methods successfully?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:11:23.487

好吧，我之前会使用 sinon.fakeServer 但我没有意识到它会触发原始 ajax 调用的成功。

所以解决方案是这样做：

```
beforeEach(function () {
  var server = sinon.fakeServer.create();
  this.server.respondWith(
    "GET",
    "/the/url" // This should marry up to the url being tested i believe
    [200, {"Content-Type":"application/json"},
    '{response:"json"}']
  );
};

it('should set my model', function () {
  this.server.respond();
  expect(myModel.get('property').toEqual(');
} 
```

Sinon.server 将触发功能中的 ajax 调用成功，以便您可以测试成功方法中可能具有的任何功能。

# c# - sql server current_timestamp vs c# datetime.now

> ID：13604820
> 
> 赞同：3
> 
> 时间：2012-11-28T12:13:02.697
> 
> 标签：c#, .net, sql-server, datetime, nunit

Could be different the way sql server gets the current time and the way the c# compiler gets it??

I have a trigger in a sql server table, where in each update the updateDatetime column will be updated to the current date time.

I get this current date time with `current_timestamp`

I have also a c# code which connects to this database and using native sql updates the table, after this the trigger will be created.

The thing is that I am running a test in NUnit where I do an update, and then I retrieve the altered row. If I compare the updatedDatetime with the current one at the beginning of the test they are different. I do this with `DateTime.UtcNow`

The difference it's just by milliseconds, but the funny thing is that the one from the beginning of the test happens after the one from the trigger! Which it makes no sense.

Here some code to illustrate what I am saying

```
 DateTime dateTimeBefore = DateTime.UtcNow;

                // Act
                bookDao.Update(book);

                // Assert
                alteredBook = bookDao.GetByKey(bookingDao);

                Console.WriteLine("dateTimeBefore: {0} - {1}", dateTimeBefore, dateTimeBefore.Millisecond);
                Console.WriteLine("UpdateDateTime: {0} - {1}", alteredBook.UpdatedDateTime, alteredBook.UpdatedDateTime.Millisecond);

                Assert.IsTrue(alteredBook.UpdatedDateTime >= dateTimeBefore); 
```

this would be the trigger

`update Book set UpdatedDatetime = current_timestamp from inserted where inserted.Id = Booking.Booking.Id`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:54:00.653

current_time “源自运行 SQL Server 实例的计算机的操作系统”，datetime.now 也是如此。如果您的单元测试在 nunit 和您的 sql server 实例在另一台机器上运行的机器上运行，则这两个值的比较结果取决于每台机器的本地时间设置。

而且，此外，即使在同一台机器上，两个值（sql server datetime 类型的 current_timestamp 和 datetime.now）具有不同的精度 -[从 DateTime 转换为 SqlDateTime 是不准确的](https://stackoverflow.com/questions/10117570/converting-from-datetime-to-sqldatetime-is-inaccurate)

# java - dicom applet viewer

> ID：13604823
> 
> 赞同：0
> 
> 时间：2012-11-28T12:13:12.797
> 
> 标签：java, applet, dicom, appletviewer

I am looking for an opensource appletviewer.Idea is using Java webstart i want to download the appletviewer (with the help of JNLP config) along with the specific dicom file [dynamic content w.r.t user/patient] in my webapplication,so that end users will have access to see their dicom files in web application.

If anyone have come across on this kindly let me know. Thanks in advance for your support.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T12:24:28.160

作为[PixelMed DICOM Java Toolkit](http://pixelmed.com/)的一部分，David Clunie 开发了许多[演示小​​程序](http://www.dclunie.com/pixelmed/software/webstart/)，其中包括一个 DICOM 图像查看器，可以从[这里](http://www.dclunie.com/pixelmed/software/webstart/DicomImageViewer.html)访问其 JNLP 文件。PixelMed Java DICOM Toolkit 及其子组件在 BSD 许可下可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T10:01:41.000

你试过[Weasis](http://www.dcm4che.org/confluence/display/WEA/Home)吗？

它是一个基于 Java web start 的查看器。我们在 Linux 和 Windows 工作站上使用它，我发现它是一个出色的轻量级 Dicom 查看器。

# ssis - How to get total count of records in flat file in ssis

> ID：13604824
> 
> 赞同：0
> 
> 时间：2012-11-28T12:13:19.350
> 
> 标签：ssis

i need to create a job which has varying number of columns (datatype also changes) as flat file source and load data into falt file destination. I need to get the Row count of the records in the last row of the flat file destination.

Note: today i receive input file with 25 columns i need to get the row count as 25, tomorrow i receive with 50 cloumns where i need to get the row count as 50\.

How to create a flat file source which has varying number of columns every time.

# xcode - Corrupt Xcode project? - A valid provisioning profile for this executable was not found

> ID：13604825
> 
> 赞同：0
> 
> 时间：2012-11-28T12:13:20.707
> 
> 标签：xcode

So, i've read all the questions with no results.

I've also created a new Xcode project to test my provisioning/cert setup. Compile and runs on device just fine.

I'm beginning to think my Xcode project is somehow corrupt now? I did read that somewhere on here but can't find the reference now.

Assuming it is corrupt, what's the best way to resolve? Can I repair or should I just create a new Xcode project and start fresh?

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:31:18.273

经过一整天的故障排除后，我刚刚解决了这个问题。

我所做的是回滚到以前工作的项目，并提取`.xcodeproj`. 有了这些文件，我去了我最近的项目（损坏）并用`.xcodeproj`旧文件替换了包。

讨厌，但工作就像一个魅力。希望它可以帮助别人。

# algorithm - fitting 2d polygons

> ID：13604826
> 
> 赞同：3
> 
> 时间：2012-11-28T12:13:24.397
> 
> 标签：algorithm

First of all I want to describe my problem: I have two 2D polygons (two sets of 2D point coordinates, polygonA and polygonB). I do not know if these two polygons collide or what is the distance between them. Moreover one of the polygons, say polygonA, is fixed, e.g. it is not allowed to translate or rotate it. Now I want to compute a position of polygonB such that 1\. polygonA and polygonB do not collide 2\. the summed squared distance between polygonA and polygonB is minimal In other words: I am looking for a position where polygonB "perfectly" lies on polygonA. Is there anybody who knows such an algorithm? Any ideas? Thank you very much for your help! Pia

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:20:18.730

如果您要确定 polyB 是否完全位于 polyA 内，您需要做的就是确保 polyB 的所有边界点都位于 polyA 内。根据您的需要，您应该使用奇偶规则或非零缠绕规则来测试它。如果您只是尝试测试部分重叠，您只需要一个顶点位于另一个多边形内，在这种情况下，奇偶偶数或非零仍然是可行的方法。

# database - SQL Server: sharding a table..if that makes any sense

> ID：13604827
> 
> 赞同：0
> 
> 时间：2012-11-28T12:13:36.450
> 
> 标签：database, sql-server-2005

Just recently I noticed the total rows in one of my tables to be a staggering 1.2 million (it might not be amusing to some of you... but yes this is my first time having see such large number of rows)

So coming back to my point, the table is called `UserMaster` and now using SQL Server Management Studio, when I do a simple

```
select * from Usermaster 
```

it takes 25 minutes to fetch all the rows!

I know I could resort to indexes to speed up my query, but out of curiosity, is there any other way to sort this issue.... I did my googling before posting this is here and I came across the term *Database Sharding* which sounded quite relevant to my problem.

I mean, the way we could divide the original database into more than one, based on say, country and then changing the application code to identify which database to hit based on the country of the user so that the load gets divided and the query will in turn run faster..

Can someone suggest remedies on the same line, for my problem (if possible) ??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:50:57.683

数据库分片是一项非常费力的任务。只需创建正确的索引。这很容易，而且正是它们的用途。

分片用于跨服务器分发数据和负载。如果不需要，请添加索引。

# umbraco - RTL support in textstring property in Umbraco

> ID：13604831
> 
> 赞同：0
> 
> 时间：2012-11-28T12:14:01.007
> 
> 标签：umbraco

I am building a multilingual site and I need support for both LTR and RTL (Arabic) languages. I have managed to find a way to include an alternative CSS to create a RTL version for the tinyMCE control (rich text).

What is the equivalent solution when the property if a simple string (textstring)? How can I define a RTL field? I am talking about the backend (Umbraco)

Thanks,

Themos

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T17:27:47.490

据我所知，没有一种使文档类型属性 RTL 的内置方法。但是，您可以“滚动您拥有”数据类型，然后将它们包含在您的文档类型中。

[这篇文章](http://www.nibble.be/?p=50)是一个很好的起点，即使它已经有好几年了。另外，[这里](http://www.oshyn.com/_blog/Web_Content_Management/post/Custom_DataTypes_in_Umbraco/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T04:39:44.917

我想出的制作 RTL 文本字符串的最佳方法是创建一个新的富文本编辑器 (tinyMCE) 数据类型，将其与 RTL 样式表相关联，并使高度更小，使其“看起来”像文本字符串而不是丰富的文本域。

# php - 表单提交时在php中结合strip_tags和mysql_real_escape_string

> ID：13604832
> 
> 赞同：2
> 
> 时间：2012-11-28T12:14:05.527
> 
> 标签：php

> **可能重复：**
> [mysql_real_escape_string() 是否完全防止 SQL 注入？](https://stackoverflow.com/questions/1220182/does-mysql-real-escape-string-fully-protect-against-sql-injection)

在我的页面中，我创建了一个表单，我想做的是在 php 编码中发布字段值时，我想同时使用`strip_tags`和`mysql_real_escap_string`as ：

```
$res = stript_tags(mysql_real_escape_string($_POST['name'])); 
```

上述编码对于安全提交输入字段名称是否正确，或者在提交时会产生任何问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T12:20:49.937

就其本身而言，这应该可以正常工作。但就个人而言，我建议您*根本不要*使用`mysql_real_escape_string`。我相信我认为您正在使用`mysql_*`已弃用的扩展是正确的。帮自己一个忙，切换到`PDO`或`mysqli_*`，最好是 PDO。

这些是更现代的扩展，支持*准备好的语句，*
[请在此处查看我的答案](https://stackoverflow.com/questions/13108695/do-i-need-to-use-following-function-for-string-escaping-in-php/13108751#13108751)以获得几个链接。此外，请参阅[Bobby 表](http://www.bobby-tables.com)，了解为什么准备好的语句比手动转义数据更安全。

正如@phant0m 所说：使用`mysql_real_escape_string`并非完全证明（请参阅他评论中的链接）。使用函数时也有一些陷阱`strip_tags`，尤其是`stripslashes`：当你处理数据时，在某些时候，数据包含类似的东西并不是不可想象的`Foo\'s Bar`，并且，正如文档所说：

> 如果打开了magic_quotes_sybase，则不会删除反斜杠，而是将两个撇号替换为一个。

试着弄清楚结果`stripslashes(mysql_real_escape_string($data));`会是什么......

使用时`strip_tags`，重要的是要注意*允许的标签*将**保留它们的属性**，其中可能包含斜杠、冒号、分号、破折号、引号和您不希望看到的各种其他字符会弄乱您的查询...
更多可能的问题和`strip_tags`，看看[这个帖子](https://stackoverflow.com/questions/585358/security-of-strip-tags-and-mysqli-real-escape-string?rq=1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T12:23:13.110

首先：[mysql_real_escape_string](http://php.net/manual/en/function.mysql-real-escape-string.php)函数将***有助于***防止 SQL 注入（在一定程度上），但这并不是保护数据库的**最佳**方法。当不正确使用不同的连接字符集时，该函数存在已知漏洞，更重要的是，**不再推荐使用**mysql 函数。引用 PHP.net：

> 不鼓励使用此扩展程序。

防止 SQL 注入的最好方法是使用[准备好的语句](http://en.wikipedia.org/wiki/Prepared_statement)。要使用准备好的语句，您应该切换到[PDO](http://php.net/manual/en/book.pdo.php)对象或[mysqli](http://php.net/manual/en/book.mysqli.php)。

其次，你不应该真的在输入上使用[strip_tags 。](http://php.net/manual/en/function.strip-tags.php)为什么？因为如果用户在标签内输入一些内容，那么您将体验到[数据完整性](http://en.wikipedia.org/wiki/Data_integrity)的损失。就个人而言，我认为 strip_tags 应该只用于输出。即当您显示用户输入的数据时。

第三，strip_tags 不会防范所有 XSS 攻击。个人而言，用于防范 XSS；我会选择类似的东西：

```
echo htmlspecialchars($stringToOutput, ENT_QUOTES, 'UTF-8'); 
```

[htmlspecialchars](http://php.net/manual/en/function.htmlspecialchars.php)会将所有特殊字符转换为其相关的 HTML 实体。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T12:20:35.047

您发布的代码将起作用。但是，最好在*可能的最晚时刻*对字符串进行转义。这将使您的变量保持干净，因为您不想在实际查询之前使用转义字符串。

一个例子：

```
$query = "SELECT * FROM tablename WHERE column1 = '". mysql_real_escape_string($_POST['name']) ."'"; 
```

另请注意，不再维护 mysql_* 函数 - 您可以使用[mysqli_*](http://php.net/manual/en/book.mysqli.php)代替，但最好的方法是使用[PDO准备好的语句](http://php.net/manual/en/book.pdo.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T12:22:03.313

您应该考虑为此使用一些框架，而不是手动进行。查看[Zend_Db](http://framework.zend.com/manual/1.12/en/zend.db.html)或[PDO](http://php.net/manual/en/book.pdo.php)（阅读准备好的语句）。

PDO 的一个例子：

```
$dsn = 'mysql:dbname=testdb;host=127.0.0.1';
$user = 'dbuser';
$password = 'dbpass';
try {
    $dbh = new PDO($dsn, $user, $password);
} catch (PDOException $e) {
    echo 'Connection failed: ' . $e->getMessage();
}
$st = $dbh->prepare( '
    INSERT INTO fruits( name, colour )
    VALUES( :name, ":colour" )
';
$st->execute( array( ':name' => 'Apple', ':colour' => 'red' ) ); 
```

# jsf-2 - PrimeFaces 向导：在步骤更改时更新其他组件

> ID：13604838
> 
> 赞同：1
> 
> 时间：2012-11-28T12:14:35.580
> 
> 标签：jsf-2, primefaces, wizard

我`p:wizard`在`p:dialog`组件中有 PrimeFaces。我正在为下一步/上一步使用自定义按钮：

```
<p:commandButton value="Weiter" onclick="wiz.next()"> 
```

我想更改包含向导的对话框元素，在我的情况下是对话框标题：

```
<p:dialog id="dialogRespWizard"
        header="#{wizardBean.header}" 
```

我已将代码更改为：

```
<p:commandButton value="Weiter" onclick="wiz.next()" update="dialogRespWizard"> 
```

但是在选择下一步后，整个对话框都消失了。

那么，如何在步骤更改时刷新“周围”向导？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T16:34:43.257

**关于你的问题：**

对话框消失是因为您更新了**整个**对话框（意味着整个对话框元素将从 HTML 页面中删除，并将被从服务器接收到的新对话框 HTML 元素替换），这是有意的。如果您想更新对话框中的某些**内容**，您需要在对话框中创建某种*XXXpanel*并更新该 XXXpanel（包装 HTML 对话框元素将是相同的，只是对话框的内容被替换为从服务器接收到的新内容):

```
<p:dialog id="dialogWizard" header="something">
  <p:outputPanel id="outputPanelWizard">
    // a lot of stuff which needs to get updated
  </p:outputPanel>
  <p:commandButton .... update="outputPanelWizard" />
</p:dialog> 
```

...并且您的对话框不会再次隐藏。因此，您需要将标题放入您已经完成的*方面，朝着正确的方向迈出一步。*

**对于您的自我回答问题**：

出现“闪烁”是因为您使用了**onclick**和**update**。一旦用户单击*p:commandButton ，就会执行**Onclick*。但是*更新*有时会在周期的后期发生（当浏览器收到来自服务器的响应时）。因此，向导使用*wiz.next()*进行切换，然后*更新*发生在对话框标题上。您可以只使用**oncomplete**而不是**onclick ，并且在浏览器接收到来自服务器的响应以及对话框***更新*后将发生切换-> 不再“闪烁”。其他一些解决方案也存在，例如

 *******不要在 p:commandButton 上使用 onclick/oncomplete/update，而是使用 RequestContext 处理*动作*/*actionListener**中*的所有内容，如此处所示RequestContext [Showcase](http://www.primefaces.org/showcase-labs/ui/requestContext.jsf#j_idt27%3aj_idt30)。

```
this.header = "my new header";
context.execute("wiz.next();"); 
context.update("outputPanelWizard"); 
```

优点是恕我直言，您可以评估表单（用户输入）并切换到*wiz.next()*是否适用。当用户输入不满意时，您可以留在同一页面上，只是不要调用*wiz.next()*。同样适用于标头，您可以根据用户输入更新支持 bean 中的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T07:45:21.780

因此，我通过将标头移动到**facet**来解决这个问题。在方面，我可以使用带有任意 id 的**outputText**，并在向导操作之后通过 id 更新这个组件。

```
<p:dialog id="dialogWizard">
<f:facet name="header">
  <h:outputText id="dialogHeader" value="#{wizard.header}" />
</f:facet>

<p:commandButton value="Weiter" onclick="wiz.next()" update="dialogHeader"> 
```

此解决方案的唯一问题是步骤更改后标题的可见“闪烁”。对话框内容首先更改，然后在标题更改片刻之后，用户可以看到这种不同意。*******

# flash - Embedded Flash : extra resource, force a particular URL Is it possible to specify the Domain for extra resource for the flash object? I have a page with tag and a flash obj. The issue i 问问题 问问题 2012-11-28T12:14:39.543 69 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. Is it possible to specify the Domain for extra resource for the flash object? I have a page with tag and a flash obj. The issue is that the flash app try to access to some extra resource (images, mp3, etc.) and because it is Embedded in ad index.php with MVC model it is pointing to the wrong URL. Details: swf is hosted in BASE_URL/media/ swf point to -> BASE_URL/index.php/files/... Files are hosted in BASE_URL/media/files/ Any way to force the flash to point to a particular dir. without changing the .swf code and so directly in the tag ? If you are trying to determine if polyB lies completely within polyA, all you need to do is ensure all the boundary points of polyB lie within polyA. Depending on what you want, either the Even-Odd Rule or the Non-Zero Winding Rule is what you should use to test that. If you are only trying to test a partial overlap, all you need is for one of the verticies to lie within the other polygon, in that case, Even-Odd or Non-Zero is still the way to go. flashmodel-view-controller 4 1 回答 1 This answer is useful 0 解决了。 可以使用标签base的属性来解决这个问题 参考： http ://helpx.adobe.com/flash/kb/flash-object-embed-tag-attributes.html 于 2012-11-28T12:32:35.650 回答 Related 2 php - HTML mySQL 表单不起作用 2 javascript - 可调整大小的遏制不适合我 2 mysql - 分组查询中相同字段值计数的 MySQL 结果 0 javascript - Jquery Modal窗口表单 - 一次提交提交两个表单 1 c++ - 错误：向量下标超出范围。1201线 1 jquery - 将 keyCode == 13 绑定到每个 Div.Form 提交 0 python - Django 管理员：“强制转换为 Unicode：需要字符串或缓冲区，找到 int” 2 c++ - C++ - 如何编写和读取包含对象的结构？（写入和读取二进制） 2 java - 某个值在 hastable 中出现的次数 1 datetime - 如何在python中的两个deltatime之间添加 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：13604840
> 
> 赞同：0
> 
> 时间：
> 
> 标签：flash, model-view-controller

Is it possible to specify the Domain for extra resource for the flash object?

I have a page with `<OBJECT>` tag and a flash obj.

The issue is that the flash app try to access to some extra resource (images, mp3, etc.) and because it is Embedded in ad index.php with MVC model it is pointing to the wrong URL.

**Details:**

1.  swf is hosted in `BASE_URL/media/`
2.  swf point to -> `BASE_URL/index.php/files/...`
3.  Files are hosted in `BASE_URL/media/files/`

Any way to force the flash to point to a particular dir. without changing the .swf code and so directly in the `<OBJECT>` tag ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:32:35.650

解决了。

可以使用标签`base`的属性来解决这个问题`<OBJECT>`

参考： [http ://helpx.adobe.com/flash/kb/flash-object-embed-tag-attributes.html](http://helpx.adobe.com/flash/kb/flash-object-embed-tag-attributes.html)

# mysql - 如何在 mysql 中舍入到 3d.p

> ID：13604844
> 
> 赞同：1
> 
> 时间：2012-11-28T12:15:08.973
> 
> 标签：mysql

在 MySql 中，我有一个名为 price 的列。我想通过将每个价格四舍五入到小数点后 3 位来更新价格数字。执行此操作的正确 mysql 函数是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:20:58.847

你可以这样： -

```
 SELECT FORMAT(12324.2573, 3); 
```

或者

```
SELECT FORMAT(price, 3); 
```

或者

```
select round(price,3) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T12:25:54.490

尝试使用 [Format()](http://dev.mysql.com/doc/refman/5.1/en/string-functions.html#function_format)

```
 Select Format (price ,3) from TableName ; 
```

# c# - 具有多个 Windows Media Player 控件实例的应用程序崩溃

> ID：13604846
> 
> 赞同：1
> 
> 时间：2012-11-28T12:15:18.073
> 
> 标签：c#, .net, winforms, wmplib

我有一个包含多个 Windows Media Player COM 控件实例的表单。播放电影一段时间后，它崩溃了。我得到一个对话框窗口，它告诉应用程序存在问题，它将被关闭。错误报告包含有关导致错误的模块的信息，它的名称是 lavvideo.ax 可能是某种编解码器问题，但我还是想捕捉这个异常。可能吗？try/catch 块不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:34:41.527

在本机代码 COM 或 pInvoke 中发生的异常无法从 .NET 运行时环境中捕获。COM 不支持将异常从被调用者（可以用任何语言实现）传播到调用者，原因是异常引发和捕获机制需要被调用者和调用者双方的参与或支持，因为 COM 是不可能的语言（C# 或 C++）不可知。

只是为了完整起见，我想说一个进程外 COM 对象将有助于使您的应用程序免于崩溃并意识到 COM 对象崩溃并可能重新实例化它们。在大多数 COM 对象实现中，进程外 COM 对象实例化经常失败（由于假设和捷径） - 啊，位置透明度在哪里？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-30T22:47:01.653

Windows Media Player ActiveX 控件是一个 COM 组件，仅当您嵌入到您的 dot net 应用程序时才在进程内。这个 COM 组件可以传回 COM 异常——我将它与最多 8 个 AxWindowsMediaPlayer 对象的初始化一起使用，在我的 C# 应用程序中没有任何问题。我实例化这样的实例：

```
 axWMPn[zi] = new AxWindowsMediaPlayer();
   ((ISupportInitialize)(axWMPn[zi])).BeginInit();
   axWMPn[zi].Name = "Zone " + zi;     // this would be the Zone name passed
   axWMPn[zi].Tag = "Z" + zi;  // this is a "Z" and the Zone index
   axWMPn[zi].Location = loc;
   axWMPn[zi].Size = sz;
   Controls.Add(axWMPn[zi]);
   ((ISupportInitialize)(axWMPn[zi])).EndInit(); 
```

您应该能够使用类似于以下的 try catch 来捕获大多数 COM 错误：

```
 private void playVideo(string file)
    {
        int tc6 = 0;

        try
        {
            axWMPn[0].URL = file;
        }
        catch (System.Runtime.InteropServices.COMException comEx)
        {
            Console.WriteLine("playVideo COMException 0: " + comEx.Source + "  -- " + comEx.Message);
        } 
```

我可以毫无问题地同时向这些 AxWMP 实例播放视频和静态数据 - 许多文件设置为循环播放，有些文件通过各种方式手动控制。

# c# - 使用 LINQ 更新数据表

> ID：13604848
> 
> 赞同：2
> 
> 时间：2012-11-28T12:15:20.307
> 
> 标签：c#, asp.net, visual-studio-2010, linq

我有两个具有相同标识列的数据表。我想用另一个表中的其他列值更新一个表中的一个列值。例如：

这是两张表：

表格1：

```
 ID         Name           Amount
     ------      -------        ---------
        1          AA             0
        2          BB             0
        3          CC             0 
```

表2：

```
 ID        Amount
     ------    ---------
        1        5000
        2        6000
        3        7000 
```

我想要的数据表应该是这样的：

所需表：

```
 ID         Name           Amount
     ------      -------        ---------
        1          AA             5000
        2          BB             6000
        3          CC             7000 
```

我不想使用 for 循环。如何使用 LINQ 实现此结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T05:10:03.167

此处将 Table1 视为“DTTable1”，将 Table2 视为 DTTable2：

```
DTTable1.AsEnumerable().Join(DTTable2.AsEnumerable(), 
                     dt1_Row => dt1_Row.ItemArray[0],
                     dt2_Row => dt2_Row.ItemArray[0],
                     (dt1_Row, dt2_Row) => new { dt1_Row, dt2_Row }).ToList() 
                     .ForEach(o => o.dt1_Row.SetField(2, o.dt2_Row.ItemArray[1])); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-13T15:09:39.023

我只是在这里发布这个以供将来参考....

如果您想使用来自 dtblToUpdateFrom 的值更新 dtblToUpdate 但您需要加入多个列，那么这似乎可行：

```
dtblToUpdate.Rows.Cast<DataRow>().Join(dtblToUpdateFrom.Rows.Cast<DataRow>(),
            r1 => new { p1 = r1["ColToJoinOn1"], p2 = r1["ColToJoinOn2"] },
            r2 => new { p1 = r2["ColToJoinOn1"], p2 = r2["ColToJoinOn2"] },
            (r1, r2) => new { r1, r2 }).ToList()
            .ForEach(o => o.r1.SetField("ColToUpdate", o.r2["ColToUpdateFrom"])); 
```

如果这有什么问题，请告诉我。

更新：

这是一些测试代码，表明它可以工作：

```
 DataTable dtblToUpdate = new DataTable();
        dtblToUpdate.Columns.AddRange(new DataColumn[]{new DataColumn("ColToJoinOn1"), new DataColumn("ColToJoinOn2"), new DataColumn("ColToUpdate")});
        dtblToUpdate.Rows.Add("1", "1", "nothing");
        dtblToUpdate.Rows.Add("2", "1", "nothing");
        dtblToUpdate.Rows.Add("3", "1", "nothing");

        DataTable dtblToUpdateFrom = new DataTable();
        dtblToUpdateFrom.Columns.AddRange(new DataColumn[]{new DataColumn("ColToJoinOn1"), new DataColumn("ColToJoinOn2"), new DataColumn("ColToUpdateFrom")});
        dtblToUpdateFrom.Rows.Add("1", "1", "something");
        dtblToUpdateFrom.Rows.Add("2", "1", "something");
        dtblToUpdateFrom.Rows.Add("3", "2", "something"); //Won't be updated since ColToJoinOn2 does not match in dtlbToUpdate

        Console.WriteLine("dtblToUpdate before update:");
        foreach(DataRow drow in dtblToUpdate.Rows)
        {
            Console.WriteLine(drow["ColToJoinOn1"].ToString() + "." + drow["ColToJoinOn2"].ToString() + " - " + drow["ColToUpdate"].ToString());
        }

        dtblToUpdate.Rows.Cast<DataRow>().Join(dtblToUpdateFrom.Rows.Cast<DataRow>(),
        r1 => new { p1 = r1["ColToJoinOn1"], p2 = r1["ColToJoinOn2"] },
        r2 => new { p1 = r2["ColToJoinOn1"], p2 = r2["ColToJoinOn2"] },
        (r1, r2) => new { r1, r2 }).ToList()
        .ForEach(o => o.r1.SetField("ColToUpdate", o.r2["ColToUpdateFrom"]));

        Console.WriteLine("dtblToUpdate after update:");
        foreach(DataRow drow in dtblToUpdate.Rows)
        {
            Console.WriteLine(drow["ColToJoinOn1"].ToString() + "." + drow["ColToJoinOn2"].ToString() + " - " + drow["ColToUpdate"].ToString());
        } 
```

输出：

```
dtblToUpdate before update:
1.1 - nothing
2.1 - nothing
3.1 - nothing
dtblToUpdate after update:
1.1 - something
2.1 - something
3.1 - nothing 
```

此外，当一个表缺少金额列时，请参阅此帖子以获取另一种选择。您可以在一列上连接表并获得一个新的 DataTable，其中包含两个表之间的所有唯一列： [如何在 c# 中左外连接两个 DataTable？](https://stackoverflow.com/questions/17684448/how-to-left-outer-join-two-datatables-in-c/17705602#17705602)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-02T08:08:24.713

我不喜欢我在网上看到的任何例子，所以这是我的例子

```
 DataTable dt = new DataTable();
        dt.Columns.Add("Year");
        dt.Columns.Add("Month");
        dt.Columns.Add("Views");
        for (int year = 2011; year < 2015; year++)
        {
            for (int month = 1; month < 13; month++)
            {
                DataRow newRow = dt.NewRow();
                newRow[0] = year;
                newRow[1] = month;
                newRow[2] = 0;
                dt.Rows.Add(newRow);
            }
        }

        dataGridView1.DataSource = dt;

        //if using Lambda 
        //var test = dt.AsEnumerable().Where(x => x.Field<string>("Year") == "2013" && x.Field<string>("Month") == "2").ToList();

        var test = (from x in dt.AsEnumerable()
                    where x.Field<string>("Year") == "2013"
                    where x.Field<string>("Month") == "2"
                    select x).ToList();

         var records = from p in dt.AsEnumerable()
                            where p.Field<string>("Year") == "2013" && p.Field<string>("Month") == "2"
                            select new
                            {
                                Views = p.Field<string>("Views")//,
                                //Month = p.Field<string>("Month")
                            };
                        foreach (var record in records)
                        {
                            //Console.WriteLine(string.Format("{0}. {1}  ({2})", record.Views, record.Month, record.Views));
                            thisCount = Convert.ToInt32(record.Views);
                            thisCount++;
                        }
        test[0][2] = thisCount.ToString();

        dt.AcceptChanges();

        //if writing to sql use  dt.SubmitChanges() instead 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-28T12:26:44.143

您可以使用连接语句：

```
from item1 in table1
join item2 in table2 on item1.ID equals item2.ID
select new YourType { ID = item1.ID, Name = item1.Name, Amount = item2.Amount } 
```

# javascript - 从地理编码循环外部访问数组

> ID：13604851
> 
> 赞同：2
> 
> 时间：2012-11-28T12:15:33.640
> 
> 标签：javascript, google-maps, google-maps-api-3, geocoding

我已设法对多达 10 个地址进行地理编码并向地图添加标记，但我需要在地理编码 (codeAddress) 函数之外访问地理编码结果。我以为我可以将结果推送到全局变量数组（userLat，userLng）。使用警报我可以看到循环确实将结果添加到函数内的数组中，但该数组在函数之外是没有价值的。

附带说明一下，地理编码不成功的警报应返回地址“i”，具体取决于哪个地址有问题，但仅显示循环的最后一个地址值。

也许问题是相关的？我认为这可能与我对嵌套函数缺乏了解有关。

我希望这很清楚。提前感谢您的帮助！

```
 function codeAddress() {

    var useradd = [];
    var geocoder = new google.maps.Geocoder();
    var howmany = parseFloat(document.getElementById("howmany").value);

    for (var i=0; i<howmany; i++) {
        useradd[i] = document.getElementById('address['+i+']').value;
        geocoder.geocode( {address: useradd[i]}, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
                userLat.push(parseFloat(results[0].geometry.location.lat()));
                userLng.push(parseFloat(results[0].geometry.location.lng()));
                var marker = new google.maps.Marker({
                    map: map,
                    position: results[0].geometry.location
                });
            } 
            else {
                alert('Address ' + i + ' was not successfully located for the following reason: ' + status);
            }
        });
    };
} 
```

编辑：

我不确定我是否理解正确，但已经提取了回调函数并创建了一个由地理编码器调用的新函数。但是问题仍然存在，并且变量 userLat 和 userLng 没有在循环之外进行。有什么建议么？

函数代码地址（）{

```
function callBack() {
    return function(results, status){
        if (status == google.maps.GeocoderStatus.OK) {
        userLat.push(parseFloat(results[0].geometry.location.lat()));
        userLng.push(parseFloat(results[0].geometry.location.lng()));
                var marker = new google.maps.Marker({
                    map: map,
                    position: results[0].geometry.location
                });
        } 
        else {
            alert('Address ' + i + ' was not successfully located for the following reason: ' + status);
        }
    }
}    

    var userLat = [];
            var userLng = [];
    var useradd = [];
    var geocoder = new google.maps.Geocoder();
    var howmany = parseFloat(document.getElementById("howmany").value);

    for (var i=0; i<howmany; i++) {
        useradd[i] = document.getElementById('address['+i+']').value;
        geocoder.geocode({address: useradd[i]}, callBack());
    };
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:27:15.967

当您的`codeAddress`函数返回时，`geocoder.geocode`它仍在执行其工作，即*异步*。完成`geocoder.geocode`后，它将调用它的回调，您将其作为匿名函数传递。

我建议的解决方案是使回调函数成为 的参数`codeAddress`，并从该回调（或从回调内部调用的其他函数）中执行您需要的任何操作，而不是使用全局变量方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T12:29:16.807

这都是关于 Javascript 中的范围。如果要访问函数之外的变量，则必须在函数范围之外声明和创建变量，然后更新它们。

在函数范围之外声明的变量将在脚本中的其他任何地方可用。

```
 var def = "bombshell";
 function changer(){
     def = "changed value";
 }
 changer();
 alert(def); 
```

在这里看到它 - [http://jsfiddle.net/daveheward/kWn8b/](http://jsfiddle.net/daveheward/kWn8b/)

# wpf - 无论如何 WPF 验证规则更新

> ID：13604856
> 
> 赞同：1
> 
> 时间：2012-11-28T12:15:52.867
> 
> 标签：wpf, validation, binding

我的视图上有一个文本框，它有一个验证规则：

```
public class EmptyStringRule : ValidationRule
{
    public override ValidationResult Validate(object value, System.Globalization.CultureInfo cultureInfo)
    {
       if(String.IsNullOrEmpty(value.ToString()))
           return new ValidationResult(true,"String Cannot be empty");
        return new ValidationResult(true,null);
    }
} 
```

当输入一个空字符串时。绑定属性未更新，文本框标记为红色。我需要更新源，但仍将标记保留在文本框周围。（输入稍后由 EF 再次验证）。

我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T13:16:08.597

您可以通过将验证规则的 ValidationStep 属性设置为“UpdatedValue”来做到这一点：

```
<Binding.ValidationRules>
    <c:EmptyStringRule ValidationStep="UpdatedValue"/>
</Binding.ValidationRules> 
```

请注意，这会导致将 BindingExpression 传递给验证规则类，而不是实际的字段值，因此您必须相应地修改验证规则，以查询更新字段的值。（在我的示例中，绑定的字符串属性称为 MyViewModel.MyStringProperty）：

```
public class EmptyStringRule : ValidationRule
{
    public override ValidationResult Validate(object value, System.Globalization.CultureInfo cultureInfo)
    {
        var be = value as BindingExpression;
        if (be != null)
        {
            var item = be.DataItem as MyViewModel;
            if (item != null)
            {
                if (String.IsNullOrEmpty(item.MyStringProperty))
                {
                    return new ValidationResult(false, "String Cannot be empty");
                }
            }
        }
        return new ValidationResult(true, null);
    }
} 
```

通过这种设置，当文本设置为空时，它实际上应该对 MyStringProperty 进行更新，但仍会进行验证。

# list - LWUIT 列表不可滚动

> ID：13604859
> 
> 赞同：1
> 
> 时间：2012-11-28T12:16:00.037
> 
> 标签：list, lwuit, lwuit-list, lwuit-scroll

LWUIT 中是否有任何方法可以创建不可滚动的列表？

没有办法允许做那件事。有可能吗？

我把它添加`List`到一个`Container`not Scrollable 中并将它添加`Container`到另一个 Scrollable `Container`，但我不喜欢这个解决方案。

还有比上述更好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:57:09.613

您可能需要另一个组件，而不是不可滚动的列表，通常我扩展一个按钮组件并将其多次添加到容器中。该按钮具有列表项的优点，因为您可以单击，如果您希望父容器滚动它也可以。

# javascript - FB.Event.subscribe 在 fb:like 帖子墙对话关闭后做出响应

> ID：13604861
> 
> 赞同：1
> 
> 时间：2012-11-28T12:16:04.580
> 
> 标签：javascript, facebook-like, facebook-javascript-sdk

我有这个 fb:like 按钮...

当喜欢按钮被喜欢时，我正在重定向/响应。使用 FB.Event.subscribe...

```
FB.init();
jQuery(document).ready(function() {
    FB.Event.subscribe("edge.create", function(href) {
        var data = { action: "virallocker", myID: "'.$my_id.'"};
        jQuery.post("viral-lock.class.php", data, function(response) {
            if (virallocker_use) location.reload();                 
        }); 
    });
}); 
```

看看当你点击一个“喜欢按钮”时会发生什么标准 - 帖子墙对话框出现......

[http://i.imgur.com/8NJKA.jpg](http://i.imgur.com/8NJKA.jpg)

现在我遇到的问题是 location.reload(); 在 javascript 中，在“发布到墙上”对话框完成或关闭之前触发。

`location.reload();`单击 Like 按钮时运行。

我的问题是，有人可以帮我调整脚本，以便在“贴到墙”对话关闭或发布后运行响应，而不是单击“喜欢”按钮。

在“喜欢”按钮上查看我的问题... [http://goo.gl/9efLZ](http://goo.gl/9efLZ)

也张贴在这里[www.javascriptquestions.com](http://www.javascriptquestions.com/question/showChronoLoggedIn/id/50)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-14T04:25:30.793

当你点击“Like”时，Facebook 不会让你自动提交到墙上。用户必须自己写一些东西并发布。我所做的是让用户等待 15 秒，同时在点击“赞”之后，他们有足够的时间发表评论和链接到他们的墙。

所以代替 location.reload(); 放置 StartTheCounter(); 这应该可以解决问题。

```
// Start The counter
// At what number shall the countdown counter start?
CounterStart = 15;

// This function CustomAction() can be modified to do 
// whatever you want done every second.

function CustomAction() {
    document.getElementById('counter').innerHTML = 'You\'ll be automatically redirected </br> within ' + CounterStart + ' seconds.';
} // end of function CustomAction()

// end of JavaScript customization

function Decrement() {
    CounterStart--;
    CustomAction();
    if(CounterStart <= 0) { 

    //alert('Timer reached 0'); 
    window.location.href = "http://www.domain.com/new-location.php";

    }
    else { setTimeout('Decrement()',1000); }
}

function StartTheCounter() {
    setTimeout('Decrement()',1000);
} 
```

# media-player - 如何在 Silverlight 中播放大型流媒体视频？

> ID：13604864
> 
> 赞同：1
> 
> 时间：2012-11-28T12:16:08.727
> 
> 标签：media-player, silverlight-5.0

在我的 XAML 文件中，我有：

```
<MediaElement x:Name="mediaElement" AutoPlay="True"  Stretch="Uniform" Width="493" Height="270"  CacheMode="BitmapCache" /> 
```

在代码隐藏文件中：

```
mediaElement.Source = new Uri("https://12.mp4"); 
```

这适用于小于 50MB 的文件。但大文件可能需要 20-30 分钟才能播放。如何获得更快的流媒体？

我期待像 YouTube 这样的播放器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T09:46:02.243

我认为您想要类似（该项目以前称为）SMF：[https ://smf.codeplex.com/](https://smf.codeplex.com/)

它是各种媒体播放器的官方解决方案。

# jquery - jquery ajax重定向成功或取消回调后不调用

> ID：13604874
> 
> 赞同：3
> 
> 时间：2012-11-28T12:16:25.900
> 
> 标签：jquery, ajax, redirect, cross-domain, single-sign-on

以下 ajax 调用对我来说很好用：

```
$.ajax({
    url:"/" + destination,
    type:"POST",
    dataType:"json",
    data:collectedData,
    success: successFunction,
    error:errorFunction
}); 
```

但是，只要遵循重定向，就不会调用成功或错误处理程序。我还注意到重定向中缺少 X-Request-With: XmlHttpRequestHeader。重定向是跨域的，除了最后一个，它将重定向到同一个来源。例如：

```
request to     |   response
sameDomain     |   302 redirect to sso server (diffrent domain)
sso server     |   302 redirect to sso server
sso server     |   302 redirect to sameDomain
sameDomain     |   200 including valid json data 
```

我正在使用 Firefox 16

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:24:34.477

使用[JSOP](http://en.wikipedia.org/wiki/JSONP)

```
$.ajax({
     url:"/" + destination,
     dataType: 'jsonp', // Notice! JSONP <-- P (lowercase)
     data:collectedData,
     success:function(json){
         // do stuff with json (in this case an array)
         alert("Success");
     },
     error:function(){
         alert("Error");
     },
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T12:21:31.350

尝试像这样更改您的代码

```
$.ajax({
    url:"/" + destination,
    type:"POST",
    dataType:"json",
    data:collectedData,
    success: function(data){},
    error:function(data){}
}); 
```

# vb.net - 将列表中的项目与字符串进行比较，然后删除另一个项目

> ID：13604877
> 
> 赞同：1
> 
> 时间：2012-11-28T12:16:43.860
> 
> 标签：vb.net

我正在尝试使用项目的索引将列表中的项目与字符串进行比较。但是，代码并没有做它应该做的事情。它应该删除列表中的另一个项目。

这是代码：

```
If (result.Count = 12) Then
    If (result.item(2) = "US") Then
        result.Remove(7)
    End If
    TextBox8.Text = result(11)
Else
    result.Remove(11)
    TextBox8.Text = ""
End If 
```

根据结果​​，索引 (2) 中包含“US”一词，但由于某种原因它无法正常工作并且没有删除其他项目。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:42:31.843

我试过你的代码。所以你有一个错误：

TextBox8.Text = result(11) '索引超出范围

这是合乎逻辑的，因为您有 12 个项目（索引从 0 到 11）。您删除了索引号 7。
所以现在您有 11 个项目（索引 0 到 10）。您无法从 11 中获取值。
实际的删除工作完美。你有什么问题？if的第二部分：

```
 Else
        result.Remove(11)
        TextBox8.Text = ""
    End If 
```

仅当 result.count <>12 时才有效，这也有问题，因为如果 result.Count =5 你不能删除（11）。
也许最好说出你想要达到的目标。

***附言。我想象你的清单是这样的：

```
 Dim result As New List(Of String)
    For i = 0 To 11
        result.Insert(i, i.ToString)
    Next
    result(2) = "US" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T13:24:49.400

正如 Dan Puzey 所指出的，该`Remove`方法从列表中删除了给定的对象。因此，当您调用 时`Remove(7)`，它不会从列表中删除第七个项目，而是从列表中删除数字 7 本身。我怀疑你实际上想要做的是删除第七个元素（无论碰巧是什么对象），在这种情况下你想改为调用`RemoveAt(7)`.

# objective-c - 如何在ios中裁剪音频

> ID：13604879
> 
> 赞同：1
> 
> 时间：2012-11-28T12:16:48.823
> 
> 标签：objective-c, ios, xcode, audio-recording, avplayer

我想知道如何裁剪语音和音频的某些部分，并使用 Objective-C 代码将它们放在一个文件中。

我应该使用 C++ 库吗？

想将avaudiorecorder转换为数据并选择一些部分。

# vba - 打开消息并选择文本

> ID：13604891
> 
> 赞同：2
> 
> 时间：2012-11-28T12:17:19.117
> 
> 标签：vba, outlook

我已使用此代码在新窗口中打开所选消息：

> Dim olApp 作为 Outlook.Application
> 
> 将消息调暗为对象
> 
> 设置 olApp = Outlook.Application
> 
> 设置 Msg = olApp.ActiveExplorer.Selection.Item(1)
> 
> 消息显示

我现在想去body里面选择body里面的文字“ERROR”，然后留待人工处理。

我实际上知道此文本出现的行号（还有更多代码）。但我的问题是如何到达邮件正文，转到行，选择文本 - 然后离开例程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-26T13:37:57.283

尝试使用 Word。未经测试的代码

```
Sub SearchString()
Dim myInspector As Outlook.Inspector
Dim myObject As Object
Dim myItem As Outlook.MailItem
Dim myDoc As Word.Document

Dim strItem As String

Set myInspector = Application.ActiveInspector
Set myObject = myInspector.CurrentItem

'The active inspector is displaying a mail item.
If myObject.MessageClass = "IPM.Note" And _
    myInspector.IsWordMail = True Then
    Set myItem = myInspector.CurrentItem
    'Grab the body of the message using a Word Document object.
    Set myDoc = myInspector.WordEditor
    myDoc.Range.Find.ClearFormatting
    Set mySelection = myDoc.Application.Selection
    With mySelection.Find
        .Text = "ERROR"
    End With
    If mySelection.Find.Execute = False Then
       MsgBox "There is no ERROR in this message."
    End If
End If
End Sub 
```

改编自[http://blogs.msdn.com/b/officedevdocs/archive/2011/03/15/how-to-search-for-a-string-in-an-email-message-and-automate-a-回复包含字符串的.aspx](http://blogs.msdn.com/b/officedevdocs/archive/2011/03/15/how-to-search-for-a-string-in-an-email-message-and-automate-a-reply-that-contains-the-string.aspx)

# android - 具有缩放功能的自定义可滚动视图

> ID：13604895
> 
> 赞同：1
> 
> 时间：2012-11-28T12:17:31.480
> 
> 标签：android, android-view, android-scroll

我想实现一个视图，作为更大内容区域的视口。用户应该能够水平和垂直滚动并通过捏合进行缩放。将其视为`MapView`, 而不是自定义绘制的内容而不是地图。

有没有可以用作基础的组件？（Android 的`ScrollView`类不起作用，因为它们只允许沿单个轴滚动）。

# asp.net-mvc - Backbone.js 和 asp MVC 的区别

> ID：13604901
> 
> 赞同：0
> 
> 时间：2012-11-28T12:17:55.493
> 
> 标签：asp.net-mvc, backbone.js

我正在开始一个新项目，我想知道什么是最好的堆栈。我对骨干网和asp MVC都没有什么经验。

考虑到性能和用户体验，我会更好地创建一个主干项目并通过 ajax 调用和使用模板来呈现我的数据，还是我最好使用 asp MVC。

这两者之间的主要区别是什么，应该决定使用哪一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:15:28.607

正如其他人所说，您正在将香蕉与苹果进行比较（它们非常不同） - 但如果您决定走微软路线，您可以创建一个新项目，该项目可以使用 MVC 提供网页服务，也可以使用 Web API 提供服务数据/资源请求。这样，您就可以使用最能满足您所从事任务需求的任何技术。

我目前正在这样做。某些页面（如 .NET 成员资格）通过 ASP.NET 和 MVC 作为网页提供。有些页面只是静态 html，并使用 KnockoutJs（类似于 Backbone，但更简单）和来自 Web API 的 JSON 数据的 AJAX 请求。

[Pluralsight](http://www.pluralsight.com/training)提供有关骨干网、ASP.NET MVC 和 KnockoutJs 的课程——这可能是您入门的快速方法吗？还有很多免费课程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T12:30:06.560

ASP.NET MVC 是一种通过 MVC 模式开发业务 Web 应用程序的服务器端技术，而骨干网是一个用于实现 MVVM 设计模式的客户端库，它独立于任何服务器端编程技术`ASP.NET , PHP , JSP`，例如......但你可以加入这两个设计响应式业务 Web 应用程序的技术。

# javascript - CKEDITOR 3.6：如何根据某些条件从工具栏配置中删除“锚”插件。？

> ID：13604902
> 
> 赞同：1
> 
> 时间：2012-11-28T12:18:01.410
> 
> 标签：javascript, ckeditor

> 我正在使用 CKEDITOR 3.6。

我想根据某些条件从工具栏配置中删除“锚”插件。我正在添加工具栏值，如下所示。

```
var isAnchor="False";
config.toolbar = 'MyconfigTool';

 switch (toolbarType) {
    case "formatLink":
        config.toolbar_MyconfigTool= [
            ['Cut', 'Copy', 'Paste', 'PasteText', 'PasteFromWord', '-', 'Undo', 'Redo'],
            ['Link', 'Unlink', 'Anchor']
            ]
            break;
    case "findLink":
        config.toolbar_MyconfigTool= [
            ['Find', 'Replace', '-', 'SelectAll'],
            ['Link', 'Unlink', 'Anchor']
            ]
            break;
            } 
```

现在我想从该工具栏中删除添加的“锚”插件，如果`isAnchor='false'`. 我怎样才能做到这一点。

我尝试了以下但我无法成功

```
 if(isAnchor== 'False'){

    config.removePlugins = 'Anchor';

} 
```

而且我不想再次重建该工具栏。我只想删除那个添加的插件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T19:15:38.107

你不能只是“重建”工具栏。您将不得不非常糟糕地破解源代码才能实现这一目标。通常，必须使用新的工具栏配置重新初始化整个编辑器。

# javascript - 试图在 JavaScript 中擦除 Soltar 生成的图像

> ID：13604906
> 
> 赞同：3
> 
> 时间：2012-11-28T12:18:18.167
> 
> 标签：javascript

我正在尝试在画布中做一个简单的拖放游戏。问题是在完成放置后我无法擦除图像或将可见性更改为隐藏。

```
function iniciar() {

    origen = document.querySelectorAll('#barra > img');
    for(var i=0; i<origen.length; i++) {
        origen[i].addEventListener('dragstart', arrastrar);
        origen[i].addEventListener('dragend', finalizado);
    }

    origenDos = document.getElementById("lienzo");
    for(var i=0; i<origenDos.length; i++) {
        origenDos[i].addEventListener('dragstart', arrastrar);
        origenDos[i].addEventListener('dragend', finalizado);
    }

    destino = document.getElementById("lienzo");

    destino.addEventListener('dragenter', entrando);
    destino.addEventListener('dragleave', saliendo);
    destino.addEventListener('dragover', function(e){e.preventDefault();});
    destino.addEventListener('drop', soltar);

    miLienzo = destino.getContext('2d');

    var imagen=new Image();
    imagen.src="imagenes/zombie1.png";
    miLienzo.drawImage(imagen, 0, 0);

    miLienzo.beginPath();
    miLienzo.arc(440,330,50,Math.PI*2,false);
    miLienzo.stroke();
    miLienzo.beginPath();
    miLienzo.arc(190,360,75,Math.PI*2,false);
    miLienzo.stroke();
    miLienzo.beginPath();
    miLienzo.arc(330,260,75,Math.PI*2,false);
    miLienzo.stroke();

}

function imagenS(e){
miImagen=e.target;
lienzo.drawImage(miImagen,0,0);

}

function arrastrar (e) {
    elemento = e.target;
    e.dataTransfer.setData('Text',elemento.getAttribute('id'));
    e.dataTransfer.setDragImage(e.target,32,32);
}

function soltar(e){

    e.preventDefault();
    var id=e.dataTransfer.getData("Text");
    var elemento=document.getElementById(id);

    var posx=e.pageX-destino.offsetLeft-32;
    var posy=e.pageY-destino.offsetTop-32;

    if (((((posx+32)-330)*((posx+32)-330) + ((posy+32)-260)*((posy+32)-260)) < 5625 ) && (elemento.id=="hacha")) {
        alert("escenario1:sobreviviste");

        destino.style.background= 'url('+'imagenes/fondo2.png'+')';

    visibilidad1=0;
    visibilidad2=1;
    visibilidad3=0;

    var imagen=new Image();
    imagen.src="imagenes/zombie2.png";
    miLienzo.globalAlpha=visibilidad2;
    miLienzo.drawImage(imagen, 0, 0);

    } else {
        alert("escenario1:estas muerto");
    }

    if (((((posx+32)-190)*((posx+32)-190) + ((posy+32)-360)*((posy+32)-360)) < 5625 ) && (elemento.id=="motor")) {
        alert("escenario2:sobreviviste");
        destino.style.background= 'url('+'imagenes/fondo3.png'+')';

    visibilidad1=0;
    visibilidad2=0;
    visibilidad3=1;

    var imagen=new Image();
    imagen.src="imagenes/zombie3.png";
    miLienzo.globalAlpha=visibilidad3;
    miLienzo.drawImage(imagen, 0, 0);

    } else {
        alert("escenario2:estas muerto");
    }

    if (((((posx+32)-440)*((posx+32)-440) + ((posy+32)-330)*((posy+32)-330)) < 1963 ) && (elemento.id=="sniper")) {
        alert("escenario3:sobreviviste");

        destino.style.background= 'url('+'imagenes/fondo1.png'+')';

    visibilidad1=1;
    visibilidad2=0;
    visibilidad3=0;

    var imagen=new Image();
    imagen.src="imagenes/zombie1.png";
    miLienzo.globalAlpha=visibilidad1;
    miLienzo.drawImage(imagen, 0, 0);

    } else {
        alert("escenario3:estas muerto");
    }

}

function finalizado (e) {
    e.preventDefault();

}

function entrando (e){
    e.preventDefault();

}

function saliendo (e) {
    e.preventDefault();

}

window.addEventListener("load", iniciar); 
```

我会很感激你的帮助谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:24:58.623

要清除画布的某个区域，您可以使用`fillRect`当前背景颜色覆盖一个区域，也可以使用`clearRect`擦除该区域中的所有内容，留下一个透明的正方形。

现在，当您执行此操作时，您需要确保通常不会重绘的任何对象都不会被这些函数调用中的任何一个剪裁。如果是，您还需要重新绘制它们。如果性能不是问题，请考虑清除画布的整个区域，并在更新位置重新绘制所有对象。

# jquery - slideUp 上的 jQuery Firefox 问题

> ID：13604909
> 
> 赞同：2
> 
> 时间：2012-11-28T12:18:36.880
> 
> 标签：jquery, firefox, height, slidedown, slideup

我有一个简单的功能，可以通过向上滑动隐藏 div 标签。当我调用该函数时，在 Firefox 上效果正常发生，但此 div 的高度在效果期间保持不变。

在 Chrome 和 IE 上，高度与动画一起流动，这是应该发生的。

div 有一个定义的高度，当我想向下滑动显示 div 时，问题不会发生。

# delphi - Delphi GMap 方向标记替换

> ID：13604911
> 
> 赞同：0
> 
> 时间：2012-11-28T12:18:40.863
> 
> 标签：delphi, google-maps, google-maps-markers, map-directions, gmlib

我在双击（起点/终点）的 2 个预定义标记之间有一个方向。

当我更改先前 dblclicked 标记之一的位置时，我还想更改方向（起点或终点）。（就像方向标记一样）。

有没有办法用地图上已经存在的方向标记替换方向标记？

注意：`DirectionsRender.SuppressMarkers := true`;

# java - 为什么在 Arquillian 测试中没有调用 @PostConstruct

> ID：13604914
> 
> 赞同：3
> 
> 时间：2012-11-28T12:18:44.573
> 
> 标签：java, jakarta-ee, cdi, jboss-arquillian

因为`@BeforeClass`回调不适用于 arquillian 测试，所以我尝试在`@PostConstruct`测试的回调中初始化一些字段。部署中有一个`beans.xml`，我也尝试添加`@Startup`注释和无参数构造函数，但没有效果。尽管 CDI 正在工作，并且正在为测试的其他领域执行所有注入，但`@PostConstruct`没有被调用。我错过了什么吗？

我正在`Arquillian 1.0.0.Final`使用`JBoss 7.1.1.Final`. 我不是在寻找解决方法 - 我可以使用`@Before`回调。但这显然不是最理想的，因为我只需要为所有测试初始化​​一次值。更重要的是，观察到的行为似乎与我对 CDI 的理解相矛盾。

这是我的测试要点：

```
 @RunWith(Arquillian.class)
    public class UploadResetterTest {

        @Deployment
        public static Archive<?> createTestArchive() {

            return ShrinkWrap
                    .create(WebArchive.class, "uploadResetTest.war")
                    .addPackages(true, "my.package")
                    .addAsWebInfResource(EmptyAsset.INSTANCE, "beans.xml");
        }

        Map<String, String> predicates = new HashMap<String, String>();

        @Inject
        Logger log;

        @PostConstruct
        public void postConstruct() {
            log.info("postconstruct");

            // here I am trying to fill the map
            predicates.put("type", UploadTypes.TALLY.toString());
        }

        @Test
        public void testResetTallies() throws Exception {

           // here the map is still empty
            predicates.get("type");
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T14:00:00.987

`@PostConstruct` would not be invoked for a test class instance used in an Arquillian test. While Arquillian performs non-contextual CDI injection into the injection points of a test class instance, it is not responsible for constructing the instance itself (JUnit or TestNG does this), and neither is construction of the test class instance managed by the CDI container or any other service container (this explains why `@PostConstruct` is ignored).

You're best bet therefore is to use `@Before`. You do raise a good point though, and it might be worth investigating whether the JUnit and TestNG runners provide hooks so that CDI or other DI providers can manage or hook into the test instance lifecycle.

# google-chrome - 在 Chrome 中永久应用额外的 CSS

> ID：13604915
> 
> 赞同：0
> 
> 时间：2012-11-28T12:18:45.150
> 
> 标签：google-chrome

因此，在 Chrome 中，例如，当我在 Facebook 上时，我可以检查某个元素（带有赞助广告的 div 就是一个很好的例子）并对其应用额外的 CSS。假设我将应用于`display: none;`该元素。无广告！迷人的。

但是当我重新加载页面时，额外的 CSS 被删除了。有没有办法让 Chrome “加载”一个额外的样式表并始终应用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:18:54.287

我认为你最好的选择是找到一个现有的扩展来为特定页面加载自定义 js/css。快速搜索一下：[https](https://chrome.google.com/webstore/detail/jscript-tricks/odialddippdmebbfbflcneemfdglimod?utm_source=chrome-ntp-icon) ://chrome.google.com/webstore/detail/jscript-tricks/odialddippdmebbfbflcneemfdglimod?utm_source=chrome-ntp-icon 。我敢肯定还有其他人。

# c# - S3 多部分上传异常

> ID：13604916
> 
> 赞同：1
> 
> 时间：2012-11-28T12:18:51.327
> 
> 标签：c#, stream, amazon-s3

使用 S3-MultiPartAPI 我得到一个异常：

> "{"您建议的上传文件小于允许的最小大小"}"

我用 2 个 11MB 和 7MB 的文件对此进行了测试。使用 1MB，它可以毫无问题地工作。

> FileStream fs = new FileStream(foo, FileAccess.ReadWrite);
> 
> fs.CopyTo(new S3Tools.S3CopyMemoryStream("bar", new byte[Buffersize + Buffersize/2], transferUtility));

我将配置实用程序Config.MinSizeBeforePartUpload 设置为2。

```
public class S3CopyMemoryStream : MemoryStream
    {
        private string _key;
        private byte[] _buffer;
        private S3TransferUtility _transferUtility;
        public StartUploadS3CopyFileStreamEvent StartUploadS3FileStreamEvent { get; set; }

        public int WriteCount { get; private set; }
        public bool EndOfPart { get; private set; }
        public bool InitiatingPart { get; private set; }
        public string UploadPartId { get; set; }
        public List<PartETag> PartETagCollection { get; set; }

        public S3CopyMemoryStream WithS3CopyFileStreamEvent(StartUploadS3CopyFileStreamEvent doing)
        {
            S3CopyMemoryStream s3CopyStream = new S3CopyMemoryStream(this._key, this._buffer, this._transferUtility);

            s3CopyStream.StartUploadS3FileStreamEvent = new S3CopyMemoryStream.StartUploadS3CopyFileStreamEvent(CreateMultiPartS3Blob);

            return s3CopyStream;
        }

        public S3CopyMemoryStream(string key, byte[] buffer, S3TransferUtility transferUtility)
            : base(buffer)
        {
            InitiatingPart = true;
            EndOfPart = false;
            WriteCount = 1;
            PartETagCollection = new List<PartETag>();
            QueueWithIncompleteParts = new Queue<int>();

            _buffer = buffer;
            _key = key;
            _transferUtility = transferUtility;
        }

        public delegate void StartUploadS3CopyFileStreamEvent(S3TransferUtility transferUtility, string key, S3CopyMemoryStream stream);          

        public override bool CanSeek
        {
            get { return false; }
        }

        public override void Write(byte[] array, int offset, int count)
        {
            base.Write(array, offset, count);

            if(Position >= Buffersize)
            {
                if (WriteCount > 1)
                    InitiatingPart = false;
                StartUploadS3FileStreamEvent.Invoke(_transferUtility, _key, this);

                WriteCount++;
                base.Flush();
                base.Seek(0, SeekOrigin.Begin);
                base.Flush();

            }              
        }

        public override void Close()
        {
            if(WriteCount > 1)
                InitiatingPart = false;

            EndOfPart = true;
            StartUploadS3FileStreamEvent.Invoke(_transferUtility, _key, this);
            base.Close();
        }

    } 
```

这是上传事件。在这一行中，我得到了例外。

> CompleteMultipartUploadResponse completeMultipartUploadResponse = transferUtility.S3Client.CompleteMultipartUpload(completeMultipartUploadRequest);

```
 static internal void CreateMultiPartS3Blob(S3TransferUtility transferUtility, string key, S3CopyMemoryStream stream)
    {

        if (stream.InitiatingPart)
        {
            InitiateMultipartUploadRequest initiateMultipartUploadRequest =
                new InitiateMultipartUploadRequest()
                    .WithBucketName(transferUtility.BucketName)
                    .WithKey(key);

            InitiateMultipartUploadResponse initiateResponse =
                transferUtility.S3Client.InitiateMultipartUpload(initiateMultipartUploadRequest);
            stream.UploadPartId = initiateResponse.UploadId;

        }

            UploadPartRequest uploadPartRequest =
                new UploadPartRequest()
                    .WithBucketName(transferUtility.BucketName)
                    .WithKey(key)
                    .WithPartNumber(stream.WriteCount)
                    .WithPartSize(stream.Position)
                    .WithUploadId(stream.UploadPartId)
                    .WithInputStream(stream) as UploadPartRequest;

            UploadPartResponse response = transferUtility.S3Client.UploadPart(uploadPartRequest);
            PartETag etag = new PartETag(response.PartNumber, response.ETag);
            stream.PartETagCollection.Add(etag);

        if (stream.EndOfPart)
        {

            CompleteMultipartUploadRequest completeMultipartUploadRequest =
                new CompleteMultipartUploadRequest()
                    .WithBucketName(transferUtility.BucketName)
                    .WithKey(key)
                    .WithPartETags(stream.PartETagCollection)
                    .WithUploadId(stream.UploadPartId);

            CompleteMultipartUploadResponse completeMultipartUploadResponse =
                transferUtility.S3Client.CompleteMultipartUpload(completeMultipartUploadRequest);
            string loc = completeMultipartUploadResponse.Location;

        }

    } 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:28:13.033

请求使用来自当前位置的流，因此我必须在上传之前将位置设置为零。

先想后发.. *g

问候

# html - CSS sprite on small in Chrome

> ID：13604917
> 
> 赞同：0
> 
> 时间：2012-11-28T12:18:51.133
> 
> 标签：html, css, google-chrome, webkit, chromium

我在 Chromium 中有一个烦人的问题。

这是代码：

```
<input type="button" class="expand_bt" value=" ">

.expand_bt {
    background: url('../img/actions_btns.jpg') -2340px -542px no-repeat;
    height: 24px;
    width: 26px;
    border: none;
    cursor: pointer;
} 
```

它在 Chromium 中没有显示，在 Firefox 中一切正常。但是这个：

```
<input class="btn_save" value=" " id="save_general" type="button">

.btn_save {
    background: url('../img/actions_btns.jpg') -178px -550px no-repeat;
    height: 38px;
    width: 122px;
    border: none;
    cursor: pointer;
} 
```

两者都工作得很好。逻辑在哪里？我错过了什么？感谢您的关注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T15:05:28.403

缓存问题。我不得不直接去图像位置和 ctrl+shift+r。不知道为什么 Chromium 没有从包含页面的缓存中刷新图像。

# c++ - 将 OpenGL 代码从 C++ 移植到 Python

> ID：13604920
> 
> 赞同：3
> 
> 时间：2012-11-28T12:19:05.500
> 
> 标签：c++, python, opengl, wxpython, pyopengl

我已经用 C++ / OpenGL 编写了一个游戏，并且应该将其移植到 Python。

经过在线研究，我发现 2.7 版 Python 的 PyOpenGL 3.0.2 和 WxPython 2.8.12.1 绑定适用于 Python / OpenGL 编程。

如果这是开始将我的 C++ 游戏移植到的正确组合，你能建议我吗？

如果有任何其他简单的方法可以完成此移植，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:38:43.010

你看过 wxPython 的内置功能了吗？见[http://wiki.wxpython.org/GLCanvas](http://wiki.wxpython.org/GLCanvas)

还有这个配方似乎结合了openGL Python包装器和wx：[http ://code.activestate.com/recipes/325392-use-wxpythonopengl-to-draw-a-sphere/](http://code.activestate.com/recipes/325392-use-wxpythonopengl-to-draw-a-sphere/)

# svn - SVN：文件不会更新

> ID：13604922
> 
> 赞同：-1
> 
> 时间：2012-11-28T12:19:18.340
> 
> 标签：svn

是否可以在 SVN 中运行

```
svn update
svn diff 
```

并从 svn diff 获得输出，而不会在更新阶段发生任何冲突？

特别是，我在 svn 目录中有一个空文件。在服务器上，它是一个又长又复杂的文件。svn diff-ing 告诉我这个文件中的所有行都被删除了；然而，svn 更新没有任何改变。我应该怎么做才能恢复文件和所有其他类似的文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T12:29:54.433

鉴于您没有使用 Subversion 的术语，很难理解您的问题，但是如果您想丢弃工作副本中未提交的更改，您需要使用[revert](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.revert.html)子命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T18:15:14.403

回答你问题的第一部分（也是更一般的）：是的。

您可以在本地机器上进行一些文件修改，比如说在文件的开头。可以`update`合并一些更改，比如说在文件末尾。如果这两个区域不重叠，您将不会遇到任何冲突。尽管如此，您的更改仍未提交，因此`diff`'ing 文件仍会显示它们，并且随后`commit`会提交它们，当然。

# geolocation - 在 QooxDoo 手机中使用 GeoLocation GeoPosition

> ID：13604924
> 
> 赞同：1
> 
> 时间：2012-11-28T12:19:23.557
> 
> 标签：geolocation, qooxdoo, geopositioning

我有一个要使用地理位置的移动应用程序。我的问题是我不明白如何将 lat / lon 分配给 Application.js 中的属性，因此我可以将其他页面绑定到它。

当我将位置绑定到 Application.js 中的 latLon 属性时，得到：004930 断言错误！位置不是 qx.bom.GeoLocation[99-0] 上的数据 (qx.event.type.Data) 事件。：应为“qx.event.type.Data”，但找到“qx.event.type.GeoPosition”！

我尝试了一些变体，但我无法绑定到该属性。

到目前为止，我可以调试该位置：

```
 var loginPage = new sgmobile.page.Login();
  manager.addDetail(loginPage);

  loginPage.addListener("appear", function(evvt) {
    this.__getPosition();
  }, this);

  loginPage.show();

 ................

__getPosition : function() {
  var geoLocation = qx.bom.GeoLocation.getInstance();
  var pos = geoLocation.getCurrentPosition();
  geoLocation.addListener("position", this.__applyPosition);
},

__applyPosition : function(position) {
  this.latlon = {
    "lat" : position.getLatitude(),
    "lon" : position.getLongitude()
  }
  this.debug("latlon: " + qx.lang.Json.stringify(this.latlon));
}, 
```

我还复制了邮件列表。

最好的问候， 亚历克斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T14:18:32.357

数据绑定要求数据事件是可绑定的。由于 GeoLocation 事件不是数据事件，默认情况下它是不可绑定的。如果您想要绑定，我建议您将属性添加到您想要绑定的应用程序中，并使用事件侦听器手动将这些属性与地理位置事件连接起来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T14:35:22.377

在我看到马丁的回答之前，我找到了自己喜欢分享的解决方案。它看起来效率不高，但是使用对象作为属性我无法获得绑定到属性属性的输入。阅读马丁的回答，我走对了。

希望这对其他 qooxdoo 移动新手有所帮助。

我将 Application.js 更改为：

```
lat: {
  check : "Number",
  nullable : true,
  init : null,
  event : "changeLat"
},
lon: {
  check : "Number",
  nullable : true,
  init : null,
  event : "changeLon"
},

__applyPosition : function(positionEvent) {
  this.debug("lat: " + positionEvent.getLatitude() + " lon: " + positionEvent.getLongitude());
  this.setLat( positionEvent.getLatitude() );
  this.setLon( positionEvent.getLongitude() );
}, 
```

我将'lat'和'lon'属性绑定到reportPage中的相应属性，如下所示：

```
 this.bind("lon", reportPage, "lon");
  this.bind("lat", reportPage, "lat"); 
```

为了完整性；相关的reportPage代码：

```
 var lat = new  qx.ui.mobile.form.NumberField();
    lat.setEnabled(false);
    form.add(lat, "latitude");

    var lon = new  qx.ui.mobile.form.NumberField();
    lon.setEnabled(false);
    form.add(lon, "longtitude");

    this.bind('lat', lat, 'value');
    this.bind('lon', lon, 'value');

    ..............
properties: {
  lat: {
    check : "Number",
    nullable : true,
    init : null,
    event : "changeLat"
  },
  lon: {
    check : "Number",
    nullable : true,
    init : null,
    event : "changeLon"
  }
} 
```

# c++ - 基本 boost:pyton 程序中的未定义参考

> ID：13604926
> 
> 赞同：5
> 
> 时间：2012-11-28T12:19:24.737
> 
> 标签：c++, python, boost, embed, boost-python

我想开始使用 boost:python 在我的 C++ 程序中嵌入 python，但是我已经遇到了这个简单代码的问题：

```
#include <boost/python.hpp> //boost libraries
#include <Python.h> //python libraries

using namespace boost::python;

int main()
{
    Py_Initialize();

    object main_module = import("__main__");
    object main_namespace = main_module.attr("__dict__");

    return 0;
} 
```

我刚刚启动解释器并导入主模块，但编译器已经遇到了问题：

```
/home/i7941878/Code/pythonTest/main.cpp:-1: error: undefined reference to `boost::python::detail::str_base::str_base(char const*)'

/home/i7941878/Code/pythonTest/main.cpp:-1: error: undefined reference to `boost::python::import(boost::python::str)'

/home/i7941878/Code/pythonTest/main.cpp:-1: error: undefined reference to `boost::python::api::getattr(boost::python::api::object const&, char const*)' 
```

我不知道为什么会收到这些错误。我很确定 boost:python 是正确构建的。

谁能启发我？

我正在使用 QT creator 来构建和编译。如果我使用 G++ 编译，`-I/usr/include -I/usr/include/python2.6 main.cpp`我会得到：

```
/tmp/ccI8x97b.o: In function `main':
main.cpp:(.text+0xc): undefined reference to `Py_Initialize'
main.cpp:(.text+0x30): undefined reference to `boost::python::import(boost::python::str)'
/tmp/ccI8x97b.o: In function `boost::python::api::object::object()':
main.cpp:(.text._ZN5boost6python3api6objectC2Ev[_ZN5boost6python3api6objectC5Ev]+0xd): undefined reference to `_Py_NoneStruct'
/tmp/ccI8x97b.o: In function `boost::python::api::const_attribute_policies::get(boost::python::api::object const&, char const*)':
main.cpp:(.text._ZN5boost6python3api24const_attribute_policies3getERKNS1_6objectEPKc[boost::python::api::const_attribute_policies::get(boost::python::api::object const&, char const*)]+0x26): undefined reference to `boost::python::api::getattr(boost::python::api::object const&, char const*)'
/tmp/ccI8x97b.o: In function `boost::python::str::str(char const*)':
main.cpp:(.text._ZN5boost6python3strC2EPKc[_ZN5boost6python3strC5EPKc]+0x1f): undefined reference to `boost::python::detail::str_base::str_base(char const*)'
collect2: ld returned 1 exit status 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T12:25:02.143

我认为我们确实需要您编译代码的方式。您是否指定了提升包括？

```
g++ code.cpp -lboost_python -lboost_system 
```

# ruby-on-rails - 按关联 created_at 排序，如果没有关联，则按自己的 created_at 排序

> ID：13604931
> 
> 赞同：0
> 
> 时间：2012-11-28T12:19:39.080
> 
> 标签：ruby-on-rails, sorting, associations

我的组模型有_many 帖子，帖子有_many 评论。

当我在组中显示帖子时，我想按最近评论的 created at 排序，如果帖子上有任何评论，或者按帖子本身的 created_at 排序。

因此，如果旧帖子有新评论，它会跳回列表顶部。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T12:32:42.483

我会坚持一种不同的方法：你的`Comment belongs_to :post`并`belongs_to`接受`:touch`选项。将其设置为`true`，您的帖子`updated_at`将根据评论的修改自动更新。这样您就可以自由地显示您的帖子，按他们的顺序排列`updated_at`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T12:34:35.730

您可以将 commented_at:datetime 列添加到 posts 表中，然后将 before_create 回调添加到 Post 模型：

```
before_create :set_default_commented_at

def set_default_commented_at
  self.commented_at ||= Time.now
end 
```

并将 :touch 添加到 Comment 模型的 belongs_to 关联中：

```
belongs_to :post, touch: :commented_at 
```

毕竟，您将能够通过 commented_at 列订购。

# .net - 使用 ThreadPool 发送邮件（效率低）

> ID：13604932
> 
> 赞同：0
> 
> 时间：2012-11-28T12:19:47.543
> 
> 标签：.net, vb.net, email, threadpool, windows-forms-designer

我想快速发送电子邮件，我使用线程池。但是，我计算了使用线程池发送十封电子邮件所花费的时间和发送十封电子邮件串行所花费的时间（在每个循环中）并且时间是相同的。我的代码有什么问题？

我的线程池代码：

```
private sub mymethod()
    addr.Add("first address")
    addr.Add("second address")
    addr.Add("third address")

    addr.Add("tenth address")

    ThreadPool.SetMaxThreads(20, 20)
    ThreadPool.SetMinThreads(15, 15)

    start = Date.Now.TimeOfDay.TotalSeconds
    For Each add As Object In addr

        ThreadPool.QueueUserWorkItem(AddressOf SendMail, add) 

    Next
   End Sub

     Private Sub SendMail(ByVal add As Object)
    If add Is Nothing Then
        Throw New ArgumentException("Empty arg!!")
    End If

    Dim client As SmtpClient = New SmtpClient()
    client.Host = "smtp.gmail.com"
    client.Port = "587"
    client.Credentials = New System.Net.NetworkCredential("address", "password")
    client.EnableSsl = True

    Using Mail As New MailMessage
        Mail.Subject = "test"
        Mail.To.Add(add)
        Mail.From = New MailAddress("address")
        Mail.Body = "body"
        client.ServicePoint.MaxIdleTime = 1 

        Try
            client.Send(Mail)
        Catch ex As SmtpException
        Finally
             count += 1
            SendCompleted() 
        End Try
    End Using

End Sub

 Private Sub SendCompleted()

    If Me.InvokeRequired Then
        Me.Invoke(New Action(AddressOf SendCompleted))
        Return
    End If

    If (count = addr.Count) Then

        end_ = Date.Now.TimeOfDay.TotalSeconds

        label1.Text = (end_ - start)
    End If

End Sub 
```

# android - 用于 android 和 asmx Web 服务的文件传输 phonegap。http状态500和错误代码1

> ID：13604933
> 
> 赞同：3
> 
> 时间：2012-11-28T12:19:48.050
> 
> 标签：android, cordova, asmx

使用 phonegap FileTransfer 上传和 webservice asmx 时出现错误

这是phonegap的代码

```
 function uploadNow(){           
       //alert(imgURI);
       var options = new FileUploadOptions();

       options.fileKey = "file";
       //options.fileName = imgURI.substr(imgURI.lastIndexOf('/') + 1);
       options.fileName = "face-275.jpg";
       options.mimeType = "image/jpeg";
       //alert(options.fileName);

       var params = new Object();
       params.value1 = "test";
       params.value2 = "param";
       options.params = params;

       var ft = new FileTransfer();
       ft.upload("file:///mnt/sdcard/Merabu Survey/Picture/face-275.jpg",
          "http://192.168.0.231/mservice/MainService.asmx/UploadService", 
          win, fail,  options); 
```

这是我的 asmx 代码

```
[WebMethod]
        public string UploadService()
        {
            //string rootPathRemote = ConfigurationManager.AppSettings["UploadedFilesPath"].TrimEnd('/', '\\') + "/";
            //string rootPhysicalPathRemote = rootPathRemote + "\\";
            int fileCount = 0;

            fileCount = HttpContext.Current.Request.Files.Count;
            for (int i = 0; i < fileCount; i++)
            {
                HttpPostedFile file = HttpContext.Current.Request.Files[i];
                string fileName = HttpContext.Current.Request.Files[i].FileName;
                if (!fileName.EndsWith(".jpg"))
                {
                    fileName += ".jpg";
                }
                string sourceFilePath = Path.Combine("F:\\Live Website\\upload", fileName);
                file.SaveAs(sourceFilePath);
            }
            return "test";
        } 
```

我从我的 adb 日志聊天中收到 http 状态 500 和错误代码 1 的错误。我已经将我的网络服务域添加到白名单。有谁知道如何解决这个问题？

# php - 如何从方法内部设置实例变量并将变量名称设置为与其值相同

> ID：13604934
> 
> 赞同：0
> 
> 时间：2012-11-28T12:19:51.740
> 
> 标签：php, oop, scope

如何从方法内部设置实例变量并将变量名称设置为与其值相同？描述在代码中 - 查看从 1 到 4 的步骤。

我知道我可以使用`$$variable`但如何使用新名称使其成为实例变量？

```
class Control
{
  //2\. i pass the name of class and make a new object 
  function model($object)
  {
    // 3\. I create here variable with the name i set. so now it should be 
   // accessible as $HomeModel but how to make it accessible for other methods. 

    $$object=new $object(); 
  }
}

class HomeController extends Control
{
  //THIS IS START
  public function __construct()
  {
    // 1\. when i set the name here ['HomeModel'] and run class method model 
    $this->model('HomeModel');

    //4\. and use it ie. here 
    $data=$this->HomeModel->getData();
  }
}

class HomeModel 
{
  public function getData()
  {
  echo "data";
  }
}

$x = new HomeController(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:42:03.107

应该：

```
class Control
{
  //2\. i pass the name of class and make a new object 
  function model($object)
  {
    // 3\. i want to create here an instance variable with the name i set
    $this->{$object} = new $object();
  }
} 
```

# c++ - C++ 中与模板相关的句法元素的名称分类

> ID：13604936
> 
> 赞同：0
> 
> 时间：2012-11-28T12:20:11.537
> 
> 标签：c++, templates

我一直在仔细研究 C++ 中的模板，我发现似乎没有一套严格的术语来清楚地识别和区分/消除使用模板时可能出现的每个句法元素，这很有挑战性。

例如，Josuttis 和 Vandevoorde 经常参考（和首选）的关于模板的书《[C++ 模板：完整指南》](http://amzn.com/0201734842)是一本出色的书——但即使是那本书也没有明确指出涉及模板的每个句法元素的严格术语。相反，从上下文中可以清楚地看到含义。

考虑下面这个简单的例子，我相信它突出了涉及模板的 11 个不同的相关句法组件。

```
#include <iostream>
#include <vector>

template
    <
        typename 

            M1, // <-- (1) "Primary template declaration template parameter
                //          identifier"

        typename M2 // ditto

    > // <-- (2) (entire <...> syntactic element) "Primary template declaration
      //                                           template parameter list"

class Foo
{

    // <-- (3) "Primary class template definition"

};

template
    <
        typename

            T1, // <-- (4) "Template specialization declaration template
                //          parameter identifier"

        typename A1, typename M2 // ditto

    > // <-- (5) (entire <...> syntactic element) "Template specialization
      //                                           declaration template
      //                                           parameter list"

class Foo
    <

        std::vector<T1, A1> &, // <-- (6) "Template specialization
                               //          declaration TEMPLATE PARAMETER
                               //          SPECIALIZATION ARGUMENT"
                               //          (?)

        M2

    > // <-- (7) (entire <> syntactic element) "Template specialization
      //                                        declaration TEMPLATE PARAMETER
      //                                        SPECIALIZATION ARGUMENT LIST"
      //                                        (?)

{

    // <-- (8) "Template specialization class definition"

};

int main()
{
    Foo
        <

            std::vector<int> &, // <-- (9) "Template class instantiation
                                //          template parameter"
                                //          (?) 

            int // diito

        > // <-- (10) (entire <> syntactic element) "Template class
          //                                         instantiation template
          //                                         parameter list"
          //                                         (?)

    f; // <-- (11) "Template class instantiation instance variable name"

} 
```

在代码示例中，我指出了 11 个不同的与模板相关的句法元素，并为每个元素提供了我建议的严格分类标签。

我怀疑我为这些元素中的大多数使用了正确的分类标识符（但如果我错了，请纠正我）。

然而，句法项 (6)、(7)、(9) 和 (10) 是棘手的——例如，在 (6) 和 (7) 的情况下，存在模板特化的情况，其中对of 尖括号`<>`出现*两次*，因此在用于指示出现在这两个非常不同的尖括号对的尖括号之间的参数（参数？）的标识符中必须存在分类区别。模板*实例化*(9) 和 (10) 涉及尖括号的*另一种*使用，因此出现在这些括号内的参数也必须有自己的识别分类标识符。

也许，在这个问题中，我使用了适当的严格术语，但我想知道：

1.  有没有比我用过的更简单严谨的术语？

2.  我是否在识别标签中使用了无关和/或不必要的词？

3.  我的识别标签中是否*缺少单词？*

4.  我使用的识别标签是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:45:00.963

我认为您不需要过多关注模板参数，它们在任何地方都扮演着相同的角色。一些非常重要的术语，其中一些您没有提到：

`template<typename T> struct foo;`是主模板的声明。
`template<typename T> struct foo<T*>;`是部分专业化的声明。
`template<> struct foo<int>;`是显式特化的声明。

当遇到诸如变量定义之类的东西时，*有时*需要`foo<double> f;`对适当的特化进行实例化。特别是，如果声明了明确的特化，则不需要它。非正式地，隐式实例化的过程是对以下内容的重写：

 *```
template<typename T> struct foo {
    void bar();
};
template<typename T> void foo<T>::bar() {} 
```

对此：

```
template<typename T> struct foo;

template<> struct foo<double> {
    void bar();
};
template<> void foo<double>::bar() {} 
```

也可以在任何给定的 TU 中请求实例化，这称为显式实例化：

```
// explicit instantiation declaration, C++11
extern template class foo<double>;
// explicit instantiation definition
template class foo<double>;

// can also instantiate a member of the template more specifically:
template void foo<double>::bar(); 
```

顾名思义，显式实例化定义是一种保证模板（以及，如果适用的话，它的所有成员）被实例化的方法。显式实例化声明有点相反——它们抑制隐式实例化，而是使用匹配的显式实例化定义产生的实例化。显式实例化功能的总体意图是为程序提供“引导”编译器以帮助缩短编译时间的方法。

我不会评论显式实例化的实现质量——事实上，请注意显式实例化声明是最近添加的。我认为您可以在 C++ 上花费大量时间，而无需遇到或需要任何一个特性。

也许令人困惑的是，实际上很多人会非正式地使用术语“模板实例化”而不是“模板专业化”。为了澄清，以下都是模板特化：`std::deque<int>`,`std::less<T*>`和`std::vector<bool>`（当然不是同一个类模板！）。并非所有模板专业化的使用或提及都会触发或引用模板实例化。我认为不需要知道何时或是否触发模板实例化这一事实是模板的一个方便的特性。

实际上有一个东西叫做实例化点：

```
// Declare template
template<typename T> struct foo;

// Use template and mention template specialization
// but no instantiation is required here!
typedef foo<int> F;

// Point of instantiation of foo<int>
// an actual definition of foo<int> is needed here
F f; 
```

（虽然我在这里只使用了类模板，但我所描述的所有内容都适用于整个模板，包括函数模板。）*

# mysql - 我如何使用mysql从数据库中获取这些？

> ID：13604938
> 
> 赞同：1
> 
> 时间：2012-11-28T12:20:12.497
> 
> 标签：mysql, sql, select, substring

我有一张桌子，上面有like did 和patientid。这里做的是医生ID，病人ID是给病人的。

现在我必须根据医生检索记录。

这里的查询是患者​​ ID，例如 12/2456。这里的 12 表示 2012 年。

我怎样才能拿起所有只有 12 （年）的 id 行？

可以这样捡吗？

桌子就像

```
did pid 
101 12/3492
101 12/6789 
```

现在需要像这样的输出

```
did pid 
101 3492
101 6789 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:23:24.323

试试这个：

```
select did , substring_index(pid ,'/',-1) pid from table 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T12:27:46.650

我认为这会有所帮助

```
select did,SUBSTRING_INDEX(patient id, '/', -1) pid
from table_name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T12:33:12.793

或者，您可以像这样构建函数：

```
SELECT did, RIGHT(pid, LENGTH(pid) - LOCATE('/',pid)) pid
FROM Table 
```

# html - 订购两列，避免跳到新行

> ID：13604941
> 
> 赞同：2
> 
> 时间：2012-11-28T12:20:28.793
> 
> 标签：html, css, two-columns

我正在尝试创建一个显示标签和相应文本（可能是多行）的页面，但我没有从标签中获取行和同一行中的文本。

HTML 代码：

```
 <label for='name'>Name:</label>
 <div class='input' id='name'> Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum.
</div>
<label>Date:</label>
<div class='input' id='date'> 10.10.2012 </div>

<label>Sum:</label>
<div class='input' id='sum'>ABC </div> 
```

CSS：

```
label {

width:150px
float: left;

}

.input{
margin-left:150px
} 
```

这是[JSFiddle](http://jsfiddle.net/EfaRA/2/)链接

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T12:25:42.760

`;`后缺少分号`width:150px`

纠正它。有用

**[演示](http://jsfiddle.net/EfaRA/4/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T12:32:00.790

失踪 ”;” 在 150px 和 clear 之后：都在 div 之后

```
 label {
        width:150px;
        float: left;
        display: block;
        border: 1px solid red;   
    }
    .input{
        margin-left:150px;
    }

    br {
       display: block;
       clear: both;
    } 
```

[http://jsfiddle.net/DGolub/msvVc/1/](http://jsfiddle.net/DGolub/msvVc/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T12:27:12.500

`;`之后你迷失了自己的风格`width:150px`

试试这个：[JS Bin](http://jsbin.com/izijeh/1/edit)

```
label {
  width:150px;
  float: left;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T12:22:37.520

试试这个：

```
.input{
  display:inline
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T12:22:50.723

放入：`display:block;`_`.input`

```
.input{
margin-left:150px;
display: block;
} 
```

# iphone - 从 iPhone 中的照片中获取图像

> ID：13604944
> 
> 赞同：-3
> 
> 时间：2012-11-28T12:20:30.087
> 
> 标签：iphone, objective-c, ios

我想按名称从 iphone 中的图库中获取图像.. 就像我在图库 one.png、two.png、three.png 中有 10 张照片等等。我想使用两个.png。我怎样才能得到那个图像。并在我的 UIImageView 中使用它。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T12:36:21.020

`imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)`

在这个方法中写

```
UIImage *image = [info objectForKey:UIImagePickerControllerOriginalImage];
[ImageViewName setImage:image];
[picker1 dismissViewControllerAnimated:YES completion:nil]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T12:49:07.213

要从照片库中挑选图像，您可以使用[UIImagePickerController](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html)。

如果你有图片的assetlibrary url，那么你可以使用以下代码：

```
typedef void (^ALAssetsLibraryAssetForURLResultBlock)(ALAsset *asset);
typedef void (^ALAssetsLibraryAccessFailureBlock)(NSError *error);    

ALAssetsLibraryAssetForURLResultBlock resultblock = ^(ALAsset *myasset)
{
    ALAssetRepresentation *rep = [myasset defaultRepresentation];
    CGImageRef iref = [myasset aspectRatioThumbnail];

    UIImage *images;
    if (iref) 
    {
        images = [UIImage imageWithCGImage:iref scale:[rep scale] orientation:(UIImageOrientation)[rep orientation]];
    }
    else
    {
        images = [UIImage imageNamed:@"Noimagey.png"];
    }
    dispatch_async(dispatch_get_main_queue(), ^{
            yourImageView.contentMode = UIViewContentModeScaleAspectFit;
            [yourImageView setImage:images];

            });
};

ALAssetsLibraryAccessFailureBlock failureblock  = ^(NSError *myerror)
{
    UIImage *images = [UIImage imageNamed:@"Nofile.png"];
    dispatch_async(dispatch_get_main_queue(), ^{

        [yourImageView setImage:images];

        });

};    

NSURL *asseturl = [NSURL URLWithString:yourAssetUrl];
ALAssetsLibrary* assetslibrary = [[ALAssetsLibrary alloc] init];
[assetslibrary assetForURL:asseturl resultBlock:resultblock failureBlock:failureblock]; 
```

如果您使用资产库来挑选图像，请始终记住：

1.  **这是一个异步过程**
2.  **始终从资产块将图像绑定到主线程中的 imageView**

# eclipse - Eclipse 自动完成（模板函数）

> ID：13604948
> 
> 赞同：0
> 
> 时间：2012-11-28T12:20:36.037
> 
> 标签：eclipse

我喜欢在 Eclipse 中使用自动完成功能，它在大多数情况下都能正常工作。

但是，在模板函数中：

```
template <class T> int existeEmPilha (const stack<**T**> &stack1, const T &v1){

stack1.(...) //it does not complete
} 
```

但它在这种情况下工作正常：

```
template <class T> int existeEmPilha (const stack<**int**> &stack1, const T &v1){

stack1.(...) //auto-complete appears with functions like size(), pop(), etc...
} 
```

我需要做模板功能，我想在这样做时使用自动完成功能。可能吗？

我正在使用 Eclipse Juno SR1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:39:44.290

为了使新的功能模板继续 Eclipse > Preferences... > Java > Editor > Templates

您将在那里看到已定义的模板集。您可以通过按新建... 按钮来添加新模板。

为了编写方法的模式，请检查现有方法模式的描述方式。例如，您的方法可能被描述为：

```
public void stack1() {
    ${cursor}
} 
```

# android - 在 Opengles 2.0 中在平滑着色到平面着色之间切换

> ID：13604951
> 
> 赞同：0
> 
> 时间：2012-11-28T12:20:54.853
> 
> 标签：android, opengl-es-2.0, normals, glsles

我正在使用 opengles 2.0 为 android 中的 3d 应用程序绘制一些模型，但那些

盒状模型看起来太光滑，阴影平滑，我需要球体模型的阴影平滑。

我将 3d 模型导出到 .OBJ 文件中，并从搅拌机中获得平滑的阴影。

现在我的 3d 模型结构有

每个顶点法线。

使用顶点索引数组绘制模型。

由于我的模型的法线是每个顶点的法线，我处理这个问题的计划是创建一个每个面

正常并将我的所有绘图方法重建为不使用顶点索引数组导致它无法执行。

我不想做这个计划，因为顶点索引数组消耗的内存更少。

有没有办法用顶点索引数组使平面平滑，以便像函数一样使用插值变化或其他方式的中间值来制作 GLSL？

感谢您的帮助，并为我糟糕的英语感到抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T16:19:59.100

我也为此苦苦挣扎-您绝对可以更改管道以生成确切的面部法线并将它们传递给您的管道，然后在照明计算中使用它。

或者您可以在模型本身的 Blender（或任何其他 3D 程序）中完成这项工作 - 复制您想要平坦的顶点，以便每个面都有自己的顶点，并且当不连接到其他面时，它们的顶点法线将是面法线（带有平滑或平坦的阴影）。最初有 6 个顶点的立方体将变成 4*6=24 个顶点，具有相同的 6 个四边形面，但每个顶点的顶点法线将与四边形的面法线完全对齐。

最终结果是一样的，需要将更多顶点传递到管道中，但我喜欢模型中的解决方案，因为它允许您在模型中混合您想要平滑和平坦阴影的位置。

我想在搅拌机中甚至可能有一个脚本来自动化这个。这是一篇关于 Blender 在做什么以及为什么可编程管道中没有平面着色[的松散相关文章。](http://www.blender.org/forum/viewtopic.php?p=99457&sid=32cff5cfd0d7931b26eb3cd9810416c1)

# syntax - Scilab 语法：如何在不使用中间变量的情况下进行转置和重塑？

> ID：13604961
> 
> 赞同：3
> 
> 时间：2012-11-28T12:21:17.857
> 
> 标签：syntax, scilab

让我们以矩阵 A 为例：

```
-->A = [1 2 3; 4 5 6]
 A  =

    1\.    2\.    3\.  
    4\.    5\.    6\. 
```

我可以转置这个矩阵：

```
-->A'
 ans  =

    1\.    4\.  
    2\.    5\.  
    3\.    6\. 
```

...我可以将此矩阵重塑为单列：

```
-->A(:)
 ans  =

    1\.  
    4\.  
    2\.  
    5\.  
    3\.  
    6\. 
```

...但我不能在一行中或不使用中间变量进行转置和重塑：

```
-->A'(:)
     !--error 276 
Missing operator, comma, or semicolon.

-->B = A'; B(:)
 ans  =

    1\.  
    2\.  
    3\.  
    4\.  
    5\.  
    6\. 
```

有没有办法在没有中间变量的情况下做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T17:50:01.663

尽管转置运算符似乎没有与`(:)`语法等效的关键字：[矩阵](http://help.scilab.org/docs/5.3.1/en_US/matrix.html)。

因此，等效于`A(:)`将`matrix(A,1,-1)`您重塑为 1 列和“多少”行（-1 参数）。因此，如果您`A'`输入它，您将获得所需顺序的行向量

```
-->matrix(A',1,-1)
 ans  =

    1\.    2\.    3\.    4\.    5\.    6. 
```

这也适用于共轭转置运算符 ( `A.'`)。

# ruby-on-rails - 将 RABL 的输出存储为 ActiveRecord 属性

> ID：13604972
> 
> 赞同：0
> 
> 时间：2012-11-28T12:22:05.400
> 
> 标签：ruby-on-rails, rabl

在使用 RABL 模板渲染后，我需要将 JSON 对象存储为 ActiveRecord 属性。我怎样才能做到这一点？

一个简单的例子是

```
MyModel.my_data = <output from the RABL template> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T21:42:36.960

查看[https://github.com/nesquena/rabl#rendering-templates-directly](https://github.com/nesquena/rabl#rendering-templates-directly)

```
Rabl::Renderer.json(@model, 'model/show') 
```

这应该可以解决问题。

# if-statement - 批处理文件中的错误“..unexpected at this time batch file”

> ID：13604974
> 
> 赞同：2
> 
> 时间：2012-11-28T12:22:06.337
> 
> 标签：if-statement, batch-file

我在批处理文件中有一个代码，它给出了一个错误：

```
56 was unexpected at this time 
```

在`if condition (if %fileSize% == 9363)`

我的代码是：

```
for %%F in ("site_data.csv") 

   do set "fileSize=%%~zF" 

   if %fileSize% == 9363 
   (
      pause
      set sum2=%TIME:~3,2% 

      echo sum2=%sum2%
      pause

      if /f %sum2% gtr %sum1% 
      (
         goto :p3
      )

      goto :p2
   ) 
```

我不明白这是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T12:41:30.157

“/F”参数不存在，请查看命令帮助：

```
IF /? 
```

您给出的示例代码中不存在 SUM1 变量，因此这可能是另一个问题。

尝试这个：

```
@Echo OFF
for %%F in ("site_data.csv") do (set "fileSize=%%~zF") 

IF %fileSize% EQU 9363 (set /A sum2=%TIME:~3,2%)
if %sum2% gtr %sum1% (goto :p3) ELSE (goto :p2) 
```

# visual-studio-2010 - VS 2010 中的断点不起作用且模块未加载 dll 文件

> ID：13604978
> 
> 赞同：6
> 
> 时间：2012-11-28T12:22:30.580
> 
> 标签：visual-studio-2010, breakpoints

我正在使用 VS 2010 专业版 [64bit - Windows 7]，在我的解决方案中，我有 3 个类库项目和 1 个 wcf 服务项目。所有这些 dll 都在我的 WPF 应用程序中引用。在过去的 1 年里，它运行良好，我能够调试所有引用的项目。但是从昨天开始，调试一下子就不起作用了。

当我在 wcf 项目中的一个类上放置断点时，它说断点无法命中，因为源文件与....等不同。

当我在 Debug --> Windows ---> Modules 窗口中检查时，所有这些项目 dll 都没有在那里看到，并且说没有 pdb 文件可用？？？

但是在 WPF bin\Debug 文件夹中，我有所有引用的 dll 和它们的 pdb。

可能是什么问题呢 ？

即使我也无法调试 wpf 项目。为了获得断点或调试，每次我必须清理解决方案或项目然后再次重建它。然后我将能够调试 WPF 项目。

在引用 dll 的情况下，我删除了 dll 并再次添加了新编译的 dll 并将该 pdb 文件复制到 wpf 项目 exe 文件夹中。还是没用！！！！

我已经更改了 Debug 和 Options [禁用和启用 Just my code 选项等] 中的选项。但它仍然无法正常工作。

这不仅仅是我的问题。我的一位同事也有这个问题，我们从 TFS 获取了整个最新的解决方案代码。所以我将本地代码路径更改为一个新文件夹，并再次从 TFS 获取最新代码。问题依旧存在！！

我能够运行该应用程序。但是调试不起作用。在 WPF 项目中，所有这些 dll 都被正确引用。

谁能帮助我们？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T13:38:50.690

我想我没有足够的评论来询问细节，所以这可能会也可能不会解决你的问题，但我会解决它。此外，似乎还有其他关于此的问题。所以我会先检查一下，看看它们是否有帮助。

这个问题是通过添加配置来告诉程序在调试期间使用哪个版本的框架来解决的。 [为什么 VS2010 调试器不会在我的断点处停止？](https://stackoverflow.com/questions/3551413/why-doesnt-vs2010-debugger-stop-at-my-breakpoints?rq=1)

[为什么 Visual Studio 2008 会跳过我的断点？](https://stackoverflow.com/questions/656344/why-does-visual-studio-2008-skip-over-my-break-points?rq=1)

如果这些没有帮助，我会试一试。

> 当我在 wcf 项目中的一个类上放置断点时，它说断点无法命中，因为源文件与....等不同。

这听起来可能是以下问题之一：

1.  远程调试和 Visual Studio 不知道从哪里加载符号或它们已过时
2.  需要清理和重建（您似乎正在这样做）
3.  您正在运行 WCF 服务的服务器未获取更新的 DLL 和 PDB 文件。如果是 IIS Express，请尝试在构建之间终止进程。

此外，请确保您是在调试模式而不是发布模式下构建的。虽然构建发布模式将生成 PDB 文件（如果设置为允许您调试应用程序），但代码也可能会被优化，这可能会导致断点丢失。

# java - 如何处理会话范围内的多选项卡数据

> ID：13604979
> 
> 赞同：1
> 
> 时间：2012-11-28T12:22:29.530
> 
> 标签：java, jsf, jsf-2, tabs

我正在使用 JSF 2.0 创建网站，其中我在会话 bean 中进行了一些工作。一切正常，但是当我在另一个选项卡中打开同一站点或右键单击并说在新选项卡中打开时会出现问题。

假设我有用户列表，点击用户名，我会看到所有用户的详细信息。现在，如果我右键单击并说在新选项卡中打开，我会在选项卡 A 中看到用户 A 的详细信息。我对用户 B 执行相同操作。我知道我的 bean 在会话 bean 中，如果我刷新选项卡 A，我最后单击用户 B , 我会看到用户 B 的数据。

我想知道，当我在新标签页中打开同一个站点或右键单击并以在新标签页中打开时如何开始新会话？

**注意**：根据[BalusC 的回答](https://stackoverflow.com/questions/13565321/session-scope-bean-how-to-handle-multi-user-data)，我应该使用**View Scope**，但是我的编程会有很多变化。因此，对于这个网站，我正在考虑使用任何其他替代方式，当我在新选项卡中打开同一个站点时，我可以开始新会话。

如果我在另一个浏览器中打开同一个站点，我会看到新会话。有什么方法可以在同一个浏览器中启动新会话？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T12:45:03.957

无论如何，最好使用视图范围。为每个标签创建一个会话相当困难且容易出错，而且您会立即失去真正的会话。

# php - 使用正则表达式拆分带有条件的字符串

> ID：13604986
> 
> 赞同：0
> 
> 时间：2012-11-28T12:23:03.510
> 
> 标签：php, regex, string, split

我有一个这样的字符串

> 阿卡布达比夫

现在我想把它分成一个序列'a'，'b'，任何字符都跟在字符串'ab'之后，就像这样

```
Array
(
    [0] => a
    [1] => b
    [2] => c
    [3] => a
    [4] => b
    [5] => d
    [6] => a
    [7] => b
    [8] => eaf
) 
```

我目前的尝试是

```
$string = "abcabdabeaf";
$split = preg_split("/((?<=a)b)/", $string, -1, PREG_SPLIT_DELIM_CAPTURE);
print_r($split); 
```

但结果是

```
Array
(
    [0] => a
    [1] => b
    [2] => ca
    [3] => b
    [4] => da
    [5] => b
    [6] => eaf
) 
```

可以用正则表达式这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:30:33.063

为什么要使用正则表达式？`explode()`就在你的小巷里。

```
<?php $k = "abcabdefabcabcgfgdgdfabde";
var_dump(explode("ab",$k));
?> 
```

如果您的字符串以 ab 开头，您将得到一个空元素。要补救它，只需`array_shift`数组！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T12:50:42.260

就我个人而言，我发现从匹配而不是拆分的角度考虑这个问题更容易：

1.  匹配 a（如果后面跟着 b）
2.  匹配 b（如果它跟在 a 后面）
3.  匹配任何其他内容，直到遇到 'ab' 或字符串结尾

在代码中：

```
preg_match_all('/a(?=b)|(?<=a)b|.*?(?=ab|$)/', $s, $matches);
// note that $matches[0] has an empty array element at the end 
```

这也可以，尽管比我想要的更冗长：

```
$final = array(); $first = true;
foreach (explode('ab', $s) as $part) {
        if ($first) {
                $first = false;
        } else {
                $final[] = 'a';
                $final[] = 'b';
        }
        $final[] = $part;
} 
```

# ruby-on-rails - 如何从rails中的api更新用户模型？

> ID：13604988
> 
> 赞同：0
> 
> 时间：2012-11-28T12:23:07.617
> 
> 标签：ruby-on-rails, ruby-on-rails-3, json, api

我是 Rails 新手，我想从服务器为 iPhone 应用程序生成 json 响应。我有用户模型，他们可以在使用令牌登录后获取当前用户信息

> curl -H 'Content-Type: application/json' -H 'Accept: application/json' -X GET htt://localhost:3000/profile.json -d "{"user" : { "auth_token" : "asjyWYeyVHDJrg746h “}}”

这提供了用户信息，同样如何通过传递要更改的值来编辑或更新用户。请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:36:07.577

看[葡萄](https://github.com/intridea/grape)。另请阅读`respond_to :json`

# actionscript-3 - Microphone.names 未提供正确的麦克风列表

> ID：13604989
> 
> 赞同：0
> 
> 时间：2012-11-28T12:23:08.743
> 
> 标签：actionscript-3, flash

我正在编写一个在 AS3 中使用麦克风的程序。我想将选定的麦克风信息保存在“cookie”中，这样​​如果用户多次访问该页面，他就不必一次又一次地选择麦克风。

我注意到 Firefox 和 Explorer 为我提供了正确的可用麦克风列表`Microphone.names`，但 Chrome 没有。有谁知道为什么？

如果要重现错误，可以按照以下步骤操作：

1.  将 USB 麦克风连接到您的计算机。
2.  运行显示`Microphone.names`列表的 Flash 程序。
3.  拔下 USB 麦克风。
4.  再次运行 flash 程序，你会看到即使 USB mic 断开连接，它仍然显示在麦克风列表中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T18:54:45.783

Pepper Flash 是[Adob​​e 和 Google](http://blogs.adobe.com/flashplayer/2012/02/adobe-and-google-partnering-for-flash-player-on-linux.html)为让 Flash 播放器在 Linux 平台上保持活力而做出的努力。默认情况下，所有操作系统上的所有最新版本的 Chrome 都使用它。

不幸的是，Pepper Flash 存在很多问题。我注意到 Mac 和 Windows 平台上有一些关于网络摄像头和麦克风的错误。其他人已经看到了各种视频游戏的问题。

当有人报告仅在 Chrome 中出现的 Flash 问题时，Pepper Flash 似乎总是罪魁祸首。

幸运的是，如果您没有运行 Linux，您仍然可以在 Chrome 上安装常规的 Flash Player 插件（“netscape”插件）（或者您可能已经安装了一个）。Pepper Flash 可以通过访问 url：chrome://plugins 在 Chrome 中禁用。

# c++ - 使用 Opencv 检测文本上的角点

> ID：13604990
> 
> 赞同：2
> 
> 时间：2012-11-28T12:23:08.807
> 
> 标签：c++, opencv, image-processing

我需要关于 opencv 图像处理的帮助，我有一种梯形图要处理，所以我需要扭曲透视，这很容易做到，但我需要在这张图像上提取源点。注意，图像只有一个文本，在这个例子中我画了红线来显示我需要得到的东西。我需要检测角点（在示例中标有蓝点）。

![在此处输入图像描述](../Images/28347a225ba9c169da20a45189f0f04b.png)

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T12:48:30.613

[您可以通过执行边界框技术](http://felix.abecassis.me/2011/10/opencv-bounding-box-skew-angle/)来隔离图像内的文本，角点将由`vertices`变量存储：

```
cv::Point2f vertices[4];
box.points(vertices); 
```

并且您将能够通过访问它们的 X、Y 坐标来操作它们：

```
std::cout << "Point 1: " << vertices[0].x << "," << vertices[0].y << std::endl;
std::cout << "Point 2: " << vertices[1].x << "," << vertices[1].y << std::endl;
std::cout << "Point 3: " << vertices[2].x << "," << vertices[2].y << std::endl;
std::cout << "Point 4: " << vertices[3].x << "," << vertices[3].y << std::endl; 
```

我分享的链接提供了该技术的完整实现。*这是您正在寻找的机器人！*

# linq - 在两个自定义列表之间搜索特定项目

> ID：13604996
> 
> 赞同：-1
> 
> 时间：2012-11-28T12:23:42.387
> 
> 标签：linq

我有 2 个类型列表`List<Course>`

*   `List<Course> courseTakenFilterListByStatus`
*   `List<Course> TakenCoursesNotApplied`

我想查找列表`courseTakenFilterListByStatus.Id`中是否存在`TakenCoursesNotApplied`。然后我需要将布尔属性更新`IsRequired`为`TRUE`. 如果该值不存在，则应将属性设置为`False`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:48:41.333

我不明白它与linq有什么关系。

你不能只做以下事情：

```
foreach (Course course in courseTakenFilterListByStatus){

      // Possibility 1
      course.IsRequired = TakenCoursesNotApplied.Contains(course);
      // Possibility 2
      course.IsRequired = TakenCoursesNotApplied.Any(c => c.Id == course.Id);

} 
```

不知道我是否理解正确的逻辑。可能你必须否定分配。HTH 托比

# linux - systemtap tcp 连接脚本错误

> ID：13604997
> 
> 赞同：0
> 
> 时间：2012-11-28T12:23:44.757
> 
> 标签：linux, systemtap

我正在尝试运行此脚本，但它没有显示任何 tcp 连接任何想法？操作系统：centos 6.3

```
#! /usr/bin/env stap

probe begin {
  printf("%6s %16s %6s %6s %16s\n",
         "UID", "CMD", "PID", "PORT", "IP_SOURCE")
}

probe kernel.function("tcp_accept").return?,
      kernel.function("inet_csk_accept").return? {
  sock = $return
  if (sock != 0)
    printf("%6d %16s %6d %6d %16s\n", uid(), execname(), pid(),
           inet_get_local_port(sock), inet_get_ip_source(sock))
} 
```

**输出：**

```
[root@server src]# ./tcp_con.stp 
   Missing separate debuginfos, use: debuginfo-install kernel-2.6.32-279.1.1.el6.centos.plus.x86_64 
   UID              CMD    PID   PORT        IP_SOURCE 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T13:47:45.910

按照 systemtap 的建议安装 kernel-debuginfo。两个 kernel.function() 探测后的问号让 stap 悄悄地放弃这两个。

# c# - 基于 xmlElement 的 xml 节点编辑

> ID：13604998
> 
> 赞同：5
> 
> 时间：2012-11-28T12:23:44.843
> 
> 标签：c#, asp.net, xml

我尝试了两种方法，但它们都没有工作..第一种方法::

```
string filepath = Server.MapPath[this is not a link]("XMLFile2.xml");
XmlDocument xdoc = new XmlDocument();
                xdoc.Load(filepath);

                XmlNode root = xdoc.DocumentElement;
                XmlNode idNode = root.SelectSingleNode("/students/student/id");
if (idNode.Value == 9.ToString())
                    {
                        var nodeOfStudent = xdoc.SelectNodes("/students/student[@id='9']");
                        nodeOfStudent[1].InnerXml = TextBox_firstname.Text;
                        nodeOfStudent[2].InnerXml = TextBox_lastname.Text;
                        nodeOfStudent[3].InnerXml = TextBox_dob.Text;
                        nodeOfStudent[4].InnerXml = TextBox_class.Text;
                        nodeOfStudent[5].InnerXml = TextBox_section.Text;
                        nodeOfStudent[6].InnerXml = TextBox_telephone.Text;

                    } 
```

第二种方式::

```
string filepath = Server.MapPath("XMLFile2.xml");
                XmlDocument xdoc = new XmlDocument();
                xdoc.Load(filepath);

                XmlNode root = xdoc.DocumentElement;
                XmlNode idNode = root.SelectSingleNode("/students/student/id");

xdoc.SelectSingleNode("/students/student[@id='10']/firstname").InnerXml = TextBox_firstname.Text;
                        xdoc.DocumentElement.AppendChild(firstname);
                        xdoc.SelectSingleNode("/students/student[@id='10']/lastname").InnerXml = TextBox_firstname.Text;
                        xdoc.SelectSingleNode("/students/student[@id='10']/dob").InnerXml = TextBox_firstname.Text;
                        xdoc.SelectSingleNode("/students/student[@id='10']/class").InnerXml = TextBox_firstname.Text;
                        xdoc.SelectSingleNode("/students/student[@id='10']/section").InnerXml = TextBox_firstname.Text;
                        xdoc.SelectSingleNode("/students/student[@id='10']/telephone").InnerXml = TextBox_firstname.Text;

                        xdoc.Save(filepath); 
```

有什么问题我没有看到...我的 xml 文件如下所示::

```
<students>
  <student>
    <id>1</id>
    <first_name>ahmad</first_name>
    <last_name>hani</last_name>
    <DOB>12/5/1998</DOB>
    <class>sixth</class>
    <section>A</section>
    <telephone>06555632</telephone>
  </student>  
</students> 
```

我使用查询字符串从位于另一个页面的gridView中加载值，使用“QueryString”....

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:36:41.023

您可以使用 Linq to xml 轻松完成此操作：

```
int id = 9;
XDocument xdoc = XDocument.Load(filepath);
var student = xdoc.Descendants("student")
                  .Where(s => (int)s.Element("id") == id)
                  .SingleOrDefault();

if (student != null)
{
    student.Element("first_name").Value = TextBox_firstname.Text;
    student.Element("last_name").Value = TextBox_lastname.Text;
    student.Element("DOB").Value = TextBox_dob.Text;
    student.Element("class").Value = TextBox_class.Text;
    // etc
}

xdoc.Save(filepath); 
```

# mongodb - MongoDB 一个复合索引与多个单字段索引

> ID：13604999
> 
> 赞同：5
> 
> 时间：2012-11-28T12:23:45.513
> 
> 标签：mongodb, indexing

我有一组照片。可以从其他一些集合（事件、新闻、帖子等）中引用它们（一对多）

我可以像这样创建参考：

```
db.photos.insert({ parent:{ collection: 'events', id: 12345 }})
db.photos.insert({ parent:{ collection: 'events', id: 54321 }})
//or just DBRef
db.photos.ensureIndex({parent:1}) 
```

或者

```
db.photos.insert({ post_id: 12345 })
db.photos.insert({ event_id: 54321 })

db.photos.ensureIndex({post_id:1}, {sparse: true})
db.photos.ensureIndex({event_id:1}, {sparse: true}) 
```

在第一种情况下，我们有一个大的复合索引在第二种情况下——一些较小的索引

每种方法的优缺点是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-11-05T11:18:43.533

首先，检查哪个字段的命中数。其次，创建一个具有最大命中字段的复合索引。第三，创建一个具有最小命中字段的复合索引。

注意：如果一次命中大量字段而不是使用复合索引。其他情况会创建单一索引。