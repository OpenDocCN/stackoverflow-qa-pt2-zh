# StackOverflow 问答 16065000-16065999

# java - 对象矩阵 = 数组 - Oracle 网站示例上的数组反射教程有什么问题

> ID：16065000
> 
> 赞同：4
> 
> 时间：2013-04-17T16:08:15.843
> 
> 标签：java, reflection, multidimensional-array

我正在尝试遵循Oracle 网站上的[这个数组反射教程](http://docs.oracle.com/javase/tutorial/reflect/special/arraySetGet.html)，但这似乎不起作用。由于这是 Oracle 自己的文档，我只是想知道我是否做错了什么：

```
Object matrix = Array.newInstance(int.class, 2);
Object row0 = Array.newInstance(int.class, 2);
Object row1 = Array.newInstance(int.class, 2);

Array.setInt(row0, 0, 1);
Array.setInt(row0, 1, 2);
Array.setInt(row1, 0, 3);
Array.setInt(row1, 1, 4);

Array.set(matrix, 0, row0); // <- This throws IllegalArgumentException
Array.set(matrix, 1, row1); 
```

现在，我知道在 Java 中，二维数组基本上只是嵌套数组，所以理论上它应该可以工作。我错过了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T16:21:22.173

我猜甲骨文网站上的代码是错误的

它应该是

```
 Object matrix = Array.newInstance(int.class, 2, 2); 
```

编码

```
 Object matrix = Array.newInstance(int.class, 2); 
```

创建一个大小为 2 的数组，但数组对象必须是**int.class。**

完整代码为：

```
import java.lang.reflect.Array;

import static java.lang.System.out;

public class CreateMatrix {
    public static void main(String... args) {
        Object matrix = Array.newInstance(int.class, 2, 2);//var arg was wrong in docs?
        Object row0 = Array.newInstance(int.class, 2);
        Object row1 = Array.newInstance(int.class, 2);

        Array.setInt(row0, 0, 1);
        Array.setInt(row0, 1, 2);
        Array.setInt(row1, 0, 3);
        Array.setInt(row1, 1, 4);

        Array.set(matrix, 0, row0);
        Array.set(matrix, 1, row1);

        for (int i = 0; i < 2; i++)
            for (int j = 0; j < 2; j++)
                out.format("matrix[%d][%d] = %d%n", i, j, ((int[][]) matrix)[i][j]);
    }
} 
```

# java - jar文件的问题

> ID：16065001
> 
> 赞同：2
> 
> 时间：2013-04-17T16:08:20.120
> 
> 标签：java, jar, classpath, manifest, java-3d

问题不在于创建 jar 文件，而是使其工作。因为我使用 Java 3D，所以我需要 jar 文件来获取 Java 3D 类，但我似乎无法让它工作。我已经正确设置了类路径，我还尝试在清单 txt 中设置类路径

```
Class-Path: C:\Program Files\Java\Java3D\1.5.2\lib\ext\j3dcore.jar;C:\Program Files\Java\Java3D\1.5.2\lib\ext\j3dutils.jar;C:\Program Files\Java\Java3D\1.5.2\lib\ext\vecmath.jar;C:\Users\Censored\Documents\NetBeansProjects\Java24\build\classes\Game\Main.class 
```

我不知道我是否在清单文件中做错了，因为当我在`Class-Path:`收到此错误后按两次 Enter 时：

```
Error: Could not find or load main class Main 
```

`Class-Path:`但是，如果我在收到此错误后不按 Enter 键：

```
Exception in thread "main" java.lang.NoClassDefFoundError: javax/media/j3d/Canvas3D 
```

还是我在主要方法中做错了什么？

这是我的漏洞代码：

```
import com.sun.j3d.utils.geometry.Sphere;
import com.sun.j3d.utils.universe.SimpleUniverse;
import java.awt.*;
import java.awt.event.*;
import javax.media.j3d.*;
import javax.swing.*;
import javax.vecmath.*;

public class Main extends JFrame implements ActionListener{
    private Image image;
    private Timer timer;
    private BallJump ball;
    private ThisPanel panel;
    private boolean inMenu = true;

    public static void main(String[] args){
        Main m = new Main();
    }

    public Main(){
        setFocusable(true);
        ImageIcon ii = new ImageIcon("Ball Jump.png");
        panel = new ThisPanel();
        ball = new BallJump();
        image = ii.getImage();
        timer = new Timer(5,this);
        timer.start();
        setSize(600,600);
        add(panel);
        setVisible(true);
        setLocationRelativeTo(null);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }

    public void actionPerformed(ActionEvent e){
        setVisible(true);
        repaint();
    }

    private class ThisPanel extends JPanel{

        public ThisPanel(){
            InputMap im = getInputMap(WHEN_IN_FOCUSED_WINDOW);
            ActionMap am = getActionMap();

            im.put(KeyStroke.getKeyStroke(KeyEvent.VK_SPACE, 0, false), "pressed");
            im.put(KeyStroke.getKeyStroke(KeyEvent.VK_SPACE, 0, true), "released");

            am.put("pressed", new AbstractAction() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    if(inMenu == true){
                        inMenu = false;
                        remove(panel);
                        ball.setAlive(true);
                        add(ball);            
                        setVisible(true); 
                    }

                    if (ball.isAlive() != true){ 
                        setSize(600,600);                     
                        setVisible(true);
                        repaint();
                        remove(ball);
                        ball = new BallJump();
                        add(ball); 
                        repaint();
                    } 
                }
            });

            am.put("released", new AbstractAction() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    if(inMenu == true){
                        inMenu = false;
                        remove(panel);
                        ball.setAlive(true);
                        add(ball);            
                        setVisible(true); 
                    }

                    if (ball.isAlive() != true){ 
                        remove(ball);
                        ball = new BallJump();
                        add(ball);
                        setVisible(true);
                        repaint();    
                    }
                }
            });

            setFocusable(true);
            requestFocusInWindow();        
        }

        public Dimension getPreferredSize() {
            return new Dimension(600, 600);
        }

        @Override
        public void paintComponent(Graphics g){
            super.paintComponent(g);
            if(inMenu == true){         
                Graphics2D g2D = (Graphics2D) g;
                g2D.drawImage(image, 0, 0, this);
            }    
        }
    }
}

class BallJump extends JPanel implements ActionListener,KeyListener{
    private TransformGroup objTrans,objTrans2, objTrans3, objTrans4, objTrans5, objTrans6, objTrans7;
    private Transform3D trans = new Transform3D();
    private BranchGroup objRoot = new BranchGroup();
    private BranchGroup objRoot2 = new BranchGroup();
    private BranchGroup objRoot3 = new BranchGroup();
    private BranchGroup objRoot4 = new BranchGroup();
    private BranchGroup objRoot5 = new BranchGroup();
    private BranchGroup objRoot6 = new BranchGroup();
    private BranchGroup objRoot7 = new BranchGroup();
    private SimpleUniverse u;
    private Canvas3D c;
    private BranchGroup scene, scene2, scene3, scene4, scene5, scene6, scene7;
    private Sphere sphere, sphere2, sphere3, sphere4, sphere5, sphere6, sphere7;
    private float height = 0.0f, sign = 1.0f, xloc = 0.0f;
    private float height2 = 0.0f, sign2 = -1.0f;
    private float rightX, right, rightDx, leftX, left, leftDx, rightX2, leftX2;
    private boolean isAlive = true;
    private JLabel scoreLabel;
    private JLabel label;
    private int score = 0;
    private Timer timer;
    private boolean isEndscreen = true;

    public boolean isAlive(){
        return isAlive;
    }

    public void setAlive(boolean isAlive){
        this.isAlive = isAlive;
    }

    public BranchGroup createSceneGraph(){
        Color3f ambientColourRSphere = new Color3f(0.6f,0.0f,0.0f);
        Color3f emissiveColourRSphere = new Color3f(0.0f,0.0f,0.0f);
        Color3f diffuseColourRSphere = new Color3f(0.8f,0.0f,0.4f);
        Color3f specularColourRSphere = new Color3f(0.3f,0.0f,0.0f);
        float shininessRSphere = 20.0f;
        Appearance redSphereApp = new Appearance();
        redSphereApp.setMaterial(new Material(ambientColourRSphere,emissiveColourRSphere,
                             diffuseColourRSphere,specularColourRSphere,shininessRSphere));
        objRoot.setCapability(BranchGroup.ALLOW_DETACH);
        objTrans = new TransformGroup();
        objTrans.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        objRoot.addChild(objTrans);
        sphere = new Sphere(0.15f,redSphereApp);
        objTrans = new TransformGroup();
        objTrans.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        Transform3D pos1 = new Transform3D();
        pos1.setTranslation(new Vector3f(0.0f,0.0f,0.0f));
        objTrans.setTransform(pos1);
        objTrans.addChild(sphere);
        objRoot.addChild(objTrans);
        BoundingSphere bounds = new BoundingSphere
                (new Point3d(0.0,0.0,0.0),100.0);
        Color3f light1Color = new Color3f(0.2f,0.2f,1.0f);
        Vector3f light1Direction = new Vector3f(+4.0f,-7.0f,-12.0f);
        DirectionalLight light1 = new DirectionalLight
                (light1Color,light1Direction);
        light1.setInfluencingBounds(bounds);
        objRoot.addChild(light1);
        Color3f ambientColor = new Color3f(1.0f,1.0f,1.0f);
        AmbientLight ambientLightNode = new AmbientLight(ambientColor);
        ambientLightNode.setInfluencingBounds(bounds);
        objRoot.addChild(ambientLightNode); 
        Color3f bgColor = new Color3f(0.0f, 0.2f, 1.0f);
        Background bg = new Background(bgColor);
        bg.setApplicationBounds(bounds);
        objRoot.addChild(bg);
        return objRoot;
    }

    public BranchGroup createSceneGraph2(){
        objRoot2.setCapability(BranchGroup.ALLOW_DETACH);
        objTrans2 = new TransformGroup();
        objTrans2.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        objRoot2.addChild(objTrans2);
        sphere2 = new Sphere(0.18f);
        objTrans2 = new TransformGroup();
        objTrans2.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        Transform3D pos1 = new Transform3D();
        pos1.setTranslation(new Vector3f(0.0f,0.0f,0.0f));
        objTrans2.setTransform(pos1);
        objTrans2.addChild(sphere2);
        objRoot2.addChild(objTrans2);
        return objRoot2;
    }

    public BranchGroup createSceneGraph3(){
        objRoot3.setCapability(BranchGroup.ALLOW_DETACH);
        objTrans3 = new TransformGroup();
        objTrans3.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        objRoot3.addChild(objTrans3);
        sphere3 = new Sphere(0.18f);
        objTrans3 = new TransformGroup();
        objTrans3.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        Transform3D pos1 = new Transform3D();
        pos1.setTranslation(new Vector3f(0.0f,0.0f,0.0f));
        objTrans3.setTransform(pos1);
        objTrans3.addChild(sphere3);
        objRoot3.addChild(objTrans3);
        return objRoot3;
    }

    public BranchGroup createSceneGraph4(){
        objRoot4.setCapability(BranchGroup.ALLOW_DETACH);
        objTrans4 = new TransformGroup();
        objTrans4.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        objRoot4.addChild(objTrans4);
        sphere4 = new Sphere(0.45f);
        objTrans4 = new TransformGroup();
        objTrans4.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        Transform3D pos1 = new Transform3D();
        pos1.setTranslation(new Vector3f(0.0f,0.0f,0.0f));
        objTrans4.setTransform(pos1);
        objTrans4.addChild(sphere4);
        objRoot4.addChild(objTrans4);
        return objRoot4;
    }

    public BranchGroup createSceneGraph5(){
        objRoot5.setCapability(BranchGroup.ALLOW_DETACH);
        objTrans5 = new TransformGroup();
        objTrans5.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        objRoot5.addChild(objTrans5);
        sphere5 = new Sphere(0.45f);
        objTrans5 = new TransformGroup();
        objTrans5.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        Transform3D pos1 = new Transform3D();
        pos1.setTranslation(new Vector3f(0.0f,0.0f,0.0f));
        objTrans5.setTransform(pos1);
        objTrans5.addChild(sphere5);
        objRoot5.addChild(objTrans5);
        return objRoot5;
    }

    public BranchGroup createSceneGraph6(){
        objRoot6.setCapability(BranchGroup.ALLOW_DETACH);
        objTrans6 = new TransformGroup();
        objTrans6.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        objRoot6.addChild(objTrans6);
        sphere6 = new Sphere(0.18f);
        objTrans6 = new TransformGroup();
        objTrans6.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        Transform3D pos1 = new Transform3D();
        pos1.setTranslation(new Vector3f(0.0f,0.0f,0.0f));
        objTrans6.setTransform(pos1);
        objTrans6.addChild(sphere6);
        objRoot6.addChild(objTrans6);
        return objRoot6;
    }

    public BranchGroup createSceneGraph7(){
        objRoot7.setCapability(BranchGroup.ALLOW_DETACH);
        objTrans7 = new TransformGroup();
        objTrans7.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        objRoot7.addChild(objTrans7);
        sphere7 = new Sphere(0.18f);
        objTrans7 = new TransformGroup();
        objTrans7.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        Transform3D pos1 = new Transform3D();
        pos1.setTranslation(new Vector3f(0.0f,0.0f,0.0f));
        objTrans7.setTransform(pos1);
        objTrans7.addChild(sphere7);
        objRoot7.addChild(objTrans7);
        return objRoot7;
    }

    BallJump(){
        setFocusable(true);
        setLayout(new BorderLayout());
        setVisible(true);
        GraphicsConfiguration config = SimpleUniverse.getPreferredConfiguration();
        c = new Canvas3D(config);
        Color color = new Color(0.0f, 0.2f, 1.0f);
        setBackground(color);
        scoreLabel = new JLabel("Score: " + score);     
        scoreLabel.setBackground(color);       
        add(BorderLayout.PAGE_START,scoreLabel);
        add("Center",c);
        c.addKeyListener(this);
        c.setSize(585,560);
        timer = new Timer(60,this);
        timer.setInitialDelay(100);
        timer.start();
        scene = createSceneGraph();
        scene2 = createSceneGraph2();
        scene3 = createSceneGraph3();
        scene4 = createSceneGraph4();
        scene5 = createSceneGraph5();
        scene6 = createSceneGraph6();
        scene7 = createSceneGraph7();
        u = new SimpleUniverse(c);
        u.getViewingPlatform().setNominalViewingTransform();
        u.addBranchGraph(scene);
        u.addBranchGraph(scene2);
        u.addBranchGraph(scene3);
        u.addBranchGraph(scene4);
        u.addBranchGraph(scene5);
        u.addBranchGraph(scene6);
        u.addBranchGraph(scene7);
        float randomSpawn1 = (float) Math.random() * -3.7f + -4.1f;
        float randomSpawn2 = (float) Math.random() * 2.5f + 3.1f; 
        float randomSpawn3 = (float) Math.random() * -2.7f + -5.1f;
        float randomSpawn4 = (float) Math.random() * 2.5f + 4.1f; 
        float randomSpawn5 = (float) Math.random() * -5.7f + -15.1f;
        float randomSpawn6 = (float) Math.random() * 5.7f + 18.1f; 
        rightX = randomSpawn2;
        right = randomSpawn4;
        leftX = randomSpawn1;
        left = randomSpawn3;
        rightX2 = randomSpawn6;
        leftX2 = randomSpawn5;
        rightDx = -.05f;
        leftDx = .05f;  
    }

    public void keyPressed(KeyEvent e){
        if(e.getKeyChar() == 'd'|e.getKeyChar() == 'D'|e.getKeyCode() == e.VK_RIGHT){
            xloc = xloc + .1f;
        }

        if(e.getKeyChar() == 'a'|e.getKeyChar() == 'A'|e.getKeyCode() == e.VK_LEFT){
            xloc = xloc - .1f;
        }
    }    

    public void keyReleased(KeyEvent e){

    }

    public void keyTyped(KeyEvent e){

    }

    public void actionPerformed(ActionEvent e){
        height += .1f * sign;
        if(Math.abs(height * 2) >= 1)
            sign = -1.0f * sign;
        height2 += .1f * sign2;
        if(Math.abs(height2 * 2) >= 1)
            sign2 = -1.0f * sign2;
        Vector3d vec;
        int thing = 1;
        int thing2 = 2;
        if(height < -.4f){
          vec = new Vector3d(1.0,.7,1.0);
        }else{
          vec = new Vector3d(1.0,1.0,1.0);
          thing = 2;
        }
        trans.setScale(vec);
        trans.setTranslation(new Vector3f(xloc,height - .15f,0.0f));
        objTrans.setTransform(trans);
        if(height < -.10f){
          vec = new Vector3d(1.0,1.0,1.0);
          thing2 = 1;
        }
        if(height < -.4f){
          trans.setScale(new Vector3d(1.0,1.0,1.0));
        }
        if(score >= 1000){
            rightDx = -.06f;
            leftDx = .06f; 
        }
        if(score >= 2000){
            rightDx = -.07f;
            leftDx = .07f; 
        }
        if(score >= 4000){
            rightDx = -.08f;
            leftDx = .08f; 
        }
        if(score >= 5000){
            rightDx = -.09f;
            leftDx = .09f; 
        }
        if(score >= 10000){
            rightDx = -.1f;
            leftDx = .1f; 
        }
        if(score >= 15000){
            rightDx = -.12f;
            leftDx = .12f; 
        }
        Vector3f vector = new Vector3f(rightX += rightDx,-.7f,0.0f);
        trans.setTranslation(vector);
        objTrans2.setTransform(trans);
        Vector3f vector2 = new Vector3f(leftX += leftDx,-.7f,0.0f);
        trans.setTranslation(vector2);
        objTrans3.setTransform(trans);
        Vector3f vector3 = new Vector3f(rightX2 += rightDx,-.4f,0.0f);
        trans.setTranslation(vector3);
        objTrans4.setTransform(trans);
        Vector3f vector4 = new Vector3f(leftX2 += leftDx,-.4f,0.0f);
        trans.setTranslation(vector4);
        objTrans5.setTransform(trans);
        Vector3f vector5 = new Vector3f(right += rightDx,-.7f,0.0f);
        trans.setTranslation(vector5);
        objTrans6.setTransform(trans);
        Vector3f vector6 = new Vector3f(left += leftDx,-.7f,0.0f);
        trans.setTranslation(vector6);
        objTrans7.setTransform(trans);
        float leftXDistance = vector2.x - xloc - .22f;
        float leftXDistancez = vector6.x - xloc - .22f;
        float leftXDistance2 = vector4.x - xloc;
        float yDistance2 = -.5f - height;
        float xDistance2 = vector3.x - xloc;
        float xDistance = vector.x - xloc + .22f;
        float yDistance = -.7f - height;
        float xDistance3 = vector5.x - xloc + .22f;
        double leftdistance = Math.sqrt((leftXDistance * leftXDistance) + (yDistance * yDistance));
        double leftdistancez = Math.sqrt((leftXDistancez * leftXDistancez) + (yDistance * yDistance));
        double leftdistance2 = Math.sqrt((leftXDistance2 * leftXDistance2) + (yDistance2 * yDistance2));
        double distance2 = Math.sqrt((xDistance2 * xDistance2) + (yDistance2 * yDistance2));
        double distance = Math.sqrt((xDistance * xDistance) + (yDistance * yDistance));
        double distance3 = Math.sqrt((xDistance3 * xDistance3) + (yDistance * yDistance));
        if(distance < vec.x / 2 + .09f){
            if(thing == 2){     
                score += 100;
                scoreLabel.setText("Score: " + score);
                float randomSpawn = (float) Math.random() * 2.5f + 3.1f;
                rightX = randomSpawn;
                trans.setTranslation(vector);
                objTrans2.setTransform(trans);
            }
            if(thing == 1){
                objRoot.detach();
                setAlive(false);
                isAlive = false;
                isEndscreen = false;
            }
        }
        if(leftdistance < vec.x / 2 + .09f){
            if(thing == 2){      
                score += 100;
                scoreLabel.setText("Score: " + score);
                float randomSpawn = (float) Math.random() * -2.7f + -3.3f;
                leftX = randomSpawn;
                trans.setTranslation(vector2);
                objTrans3.setTransform(trans);
            }
            if(thing == 1){
                objRoot.detach();
                setAlive(false);
                isAlive = false;
                isEndscreen = false;
            }
        }
        if(leftdistancez < vec.x / 2 + .09f){
            if(thing == 2){  
                score += 100;
                scoreLabel.setText("Score: " + score);
                float randomSpawn = (float) Math.random() * -2.5f + -3.1f;
                left = randomSpawn;
                trans.setTranslation(vector6);
                objTrans7.setTransform(trans);
            }
            if(thing == 1){
                objRoot.detach();
                setAlive(false);
                isAlive = false;
                isEndscreen = false;
            }
        }
        if(leftdistance2 < vec.x / 2 + .09f){
            if(thing == 2){  
                score += 200;
                scoreLabel.setText("Score: " + score);
                float randomSpawn = (float) Math.random() * -4.5f + -12.1f;
                leftX2 = randomSpawn;
                trans.setTranslation(vector4);
                objTrans5.setTransform(trans);
            }
            if(thing == 1){
                objRoot.detach();
                setAlive(false);
                isAlive = false;
                isEndscreen = false;
            }
        }
        if(distance2 < vec.x / 2 + .09f){
            if(thing == 2){ 
                score += 200;
                scoreLabel.setText("Score: " + score);
                float randomSpawn = (float) Math.random() * 4.5f + 15.1f;
                rightX2 = randomSpawn;
                trans.setTranslation(vector3);
                objTrans4.setTransform(trans);
            }
            if(thing == 1){
                objRoot.detach();
                setAlive(false);
                isAlive = false;
                isEndscreen = false;
            }
        }
        if(distance3 < vec.x / 2 + .09f){
            if(thing == 2){
                score += 100;
                scoreLabel.setText("Score: " + score);
                float randomSpawn = (float) Math.random() * 2.5f + 3.1f;
                right = randomSpawn;
                trans.setTranslation(vector5);
                objTrans6.setTransform(trans);
            }
            if(thing == 1){
                objRoot.detach();
                isAlive = false;
                isEndscreen = false;
            }
        }
        if(rightX < -1.5f){
            float randomSpawn = (float) Math.random() * 1.5f + 2.1f;
            rightX = randomSpawn;
            trans.setTranslation(vector);
            objTrans2.setTransform(trans);
        }
        if(leftX > 1.5f){
            float randomSpawn = (float) Math.random() * -1.5f + -2.1f;
            leftX = randomSpawn;
            trans.setTranslation(vector2);
            objTrans3.setTransform(trans);
        }
        if(right < -1.5f){
            float randomSpawn = (float) Math.random() * 1.5f + 2.1f;
            right = randomSpawn;
            trans.setTranslation(vector);
            objTrans2.setTransform(trans);
        }
        if(left > 1.5f){
            float randomSpawn = (float) Math.random() * -1.5f + -2.1f;
            left = randomSpawn;
            trans.setTranslation(vector2);
            objTrans3.setTransform(trans);
        }
        if(rightX2 < -1.5f){
            float randomSpawn = (float) Math.random() * 1.5f + 2.1f;
            rightX2 = randomSpawn;
            trans.setTranslation(vector3);
            objTrans4.setTransform(trans);
        }
        if(leftX2 > 1.5f){
            float randomSpawn = (float) Math.random() * -1.5f + -2.1f;
            leftX2 = randomSpawn;
            trans.setTranslation(vector4);
            objTrans5.setTransform(trans);
        }
        if(xloc > .8f){
            xloc = .8f;
        }
        if(xloc < -.8f){
            xloc = -.8f;
        }
        if(!isAlive && !isEndscreen){
            endScreen();
            timer.stop();
            score = 0;
        }
    }

    public void endScreen(){
        isEndscreen = true;
        remove(scoreLabel);
        remove(c);
        setVisible(true);
        setLayout(new BorderLayout(1,1));
        Font font = new Font("Helvatica",Font.BOLD,24);
        label = new JLabel("      Your Score: " + score);  
        JLabel label2 = new JLabel("Press Space To Restart");
        label2.setFont(font);
        label.setFont(font);
        setBackground(Color.white);    
        add(BorderLayout.NORTH,label);
        add(BorderLayout.CENTER,label2);
        repaint();
    }
} 
```

这是我的清单 txt：

```
Main-Class: Main
Class-Path: C:\Program Files\Java\Java3D\1.5.2\lib\ext\j3dcore.jar;C:\Program Files\Java\Java3D\1.5.2\lib\ext\j3dutils.jar;C:\Program Files\Java\Java3D\1.5.2\lib\ext\vecmath.jar;C:\Users\Censored\Documents\NetBeansProjects\Java24\build\classes\Game\Main.class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T01:10:57.513

我刚刚遇到了这个问题，我认为它与包名称有关。尝试将您的主类名称更改为不带空格的包名称

# javascript - 停止渲染或冻结指定 DOM 元素的视图

> ID：16065008
> 
> 赞同：1
> 
> 时间：2013-04-17T16:08:31.920
> 
> 标签：javascript

我喜欢在更改值以防止闪烁时停止渲染指定的 dom 元素。这可能吗 ？我可以使用 html2canvas 创建一个屏幕截图并在我更改 DOM 时显示它，但在我看来这有点矫枉过正。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:11:27.320

分离元素，更改它，然后重新连接它。

```
function makeChanges(elem,changes) {
    var p = elem.parentNode, n = elem.nextSibling;
    p.removeChild(elem);
    changes(elem); // changes is a function containing the changing of values
    p.insertBefore(elem,n);
} 
```

# twitter - 如何使用 Twitter OAuth API 获取下一页的 Twitter 结果？

> ID：16065011
> 
> 赞同：1
> 
> 时间：2013-04-17T16:08:45.997
> 
> 标签：twitter, twitter-oauth

我正在使用 twitter 誓言 API，并获得搜索查询的第一页结果。但是我想获取所有页面，那么如何使用 API 进行迭代以获取下一页？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T17:46:26.410

Twitter 已经从他们的 API 中移除了对分页的支持，转而支持指定搜索范围的查询参数。这是他们博客中的相关片段：

“当前支持光标或使用 since_id 和 max_id 的所有方法都将通过“页面”参数删除对“经典”分页的支持。有关更多信息，请参阅[使用时间线](https://dev.twitter.com/docs/working-with-timelines)。”

来源：[https ://dev.twitter.com/blog/api-housekeeping](https://dev.twitter.com/blog/api-housekeeping)

# r - 如何衡量我对 R 的使用情况？

> ID：16065012
> 
> 赞同：0
> 
> 时间：2013-04-17T16:08:49.420
> 
> 标签：r

我正在为 uni 写一份年度报告，其中我想详细说明我对 R 的使用在过去一年中是如何增加的。我正在寻找可以用来描述我对 R 的使用情况的指标。一些可能的指标来描述使用情况：

*   历史代码行数
*   错误数
*   使用程序花费的时间
*   特定函数被调用的次数
*   制作的地块数

所以我的问题是：我可以从 R 中提取上述任何内容，还是可以提取任何其他可以证明我使用 R 的指标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T13:10:49.670

首先，我不确定这个问题是否适合 Stack Overflow。其次，我认为您确定的指标并不适合。让我们看看您目前入围的那些：

*   **历史代码行数**

    您对代码进行了很多调整。它们积累在你的历史中。你的历史现在有很多行代码。这是否积极反映了您对 R 的使用？或者，您喜欢在 R 中编写如下代码：

    ```
    temp <- 0
    for (i in 1:10) {
      temp <- temp + i
    }
    print(temp) 
    ```

    而熟悉 R 的人只会写`sum(1:10)`. 一条线对五条线。我们真的可以说行数是一个很好的指标吗？

*   **错误数**

    也许这有一些优点。但是你会以某种方式对错误进行分类吗？遗失或错位的括号是否可以原谅？如果没有发出错误或警告，但 R 的行为方式可能出乎您的意料，从而导致意外结果（例如，假设`numeric(0)`和`factor(0)`行为方式相同） ，该怎么办？请参阅[此处](https://stackoverflow.com/questions/1535021/whats-the-biggest-r-gotcha-youve-run-across)了解一些 R 陷阱，其中一些不会提供任何错误指示，但肯定会导致错误分析。他们将如何使用该指标进行分析？

*   **使用该程序的小时数**

    再次，值得商榷。你如何衡量小时数？花时间编码？计算机花在处理代码上的时间？你花了时间弄清楚如何编程你的问题？

*   **特定函数被调用的次数**

    *我根本*不明白这个指标。`vapply`是否更晦涩的功能会获得更高的权重（例如，如果您是使用其他 schmucks的人中的一员，您是否会因为使用*更安全（有时更快）而*`sapply`获得奖励积分？）`vapply`

**   **制作的地块数**

    对不起，但同样，我根本不理解这个指标。首先，并非所有地块都是平等创建的！数据可视化领域有几个人觉得很多软件破坏了数据可视化，因为某些软件（特别是一个非常流行的电子表格程序）使人们可以轻松快速地制作花哨的图表。使用 R，默认情况下它们不那么花哨，但这本身并不能使它变得*更好*。因此，如果您只是在没有其他质量评估标准的情况下测量生成的地块数量，那么我不确定这个指标有什么用处。* 

 *而且，从您的评论到您的问题：

*   **实际上......堆栈溢出声誉点可能和任何东西一样好！**

    嗯...我真正*使用R 的**唯一*一次是回答有关 Stack Overflow 的问题（不幸的是，这是真的）。同时，我在这里几乎所有的声望点都来自我在 R 标签中回答的问题。当然，这里有一些用户我真的很信任，但有时，我什至不信任自己，所以我不知道这是否是你使用 R 的一个很好的指标。

     *许多用户还抱怨 Stack Overflow 投票完全古怪，所以我不确定您是否真的可以使用“声誉”作为衡量技能的有效标准。例如，这里的普通用户一直在讨论，“简单”问题的答案很快就会被投票（因为它们很容易验证，通常甚至不需要运行代码），而“复杂”问题的答案不会产生投票与回答问题所付出的努力成正比。恰当的例子：为什么我有一个“大师”徽章来回答本质上是一个重新排序的数据版本，在谷歌上只需两分钟就可以轻松获得。我对这个答案并不特别*自豪*，而且它当然没有说明我对 R 的“使用”。* 

 ** * *

现在，为了使它有资格作为一个答案，而不仅仅是对您的问题本身的扩展评论，我认为最有效但不确定如何衡量它的最重要的事情就是*您*的活跃程度R社区。有很多方法可以参与 R，从编写或贡献包、提交错误报告、举办研讨会以帮助其他人切换到 R，等等。

我并不是建议你需要像这里的其他几位人那样写一本书，或者成为一个拥有下划线追随者崇拜的传奇包开发人员，但你可以采取一些小步骤。例如，虽然我是一名写作老师，但我为学生举办了研讨会并写了一些“入门技巧”，只是为了向他们介绍使用 R，因此他们可以考虑将它添加到他们的工具包中。这里的许多其他用户定期发布关于他们使用 R 的经验的博客，而且，由于这是社区的一部分，他们在此过程中学到了很多东西。

最后，还有几个想法：

*   @PaulHiemstra 在他的评论中建议您可以“提及您在 R 中所做的编程工作的百分比”。我会将这个概念扩展如下：（1）尝试衡量您的整体工作有多少是在 R 和与 R 互补的工具中完成的（比如 Sweave/knitr/LaTeX 等显而易见的工具），以及（2）尝试衡量*使用*R 对提高你的整体技能有多大影响（逻辑是好的编程通常伴随着逻辑思维、仔细的组织、良好的文档等等）。

*   与上一点相关，试着看看你对 R 的使用是如何随时间变化的。您的行为是否已从手动重做相同的步骤变为编写函数？然后，您是否回过头来调整这些功能，以便更广泛地使用它们，而不是解决*您*在给定时间点遇到的特定问题？这些都是非常重要的变化，特别是如果你从头开始使用该语言，它们可能比你在问题中提出的想法更有意义。

因此，总而言之，您在问题中确定的许多容易量化的事情可能会导致非常无意义的分析。我觉得你所做的定性投入会更有价值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T13:15:38.360

另一个指标：获取一个旧的和复杂的（不知道有没有）代码并从 0 开始重做。使用计算时间的差异作为指标。**

# c - Piplining - 在两个程序之间发送字符串

> ID：16065014
> 
> 赞同：2
> 
> 时间：2013-04-17T16:08:50.920
> 
> 标签：c, pipe

我一直在阅读有关流水线的内容并阅读了这个主题 - [如何使用管道在两个程序之间发送简单的字符串？](https://stackoverflow.com/questions/2784500/how-to-send-a-simple-string-between-two-programs-using-pipes)

我读了@jschmier 的答案（第一个）-我想知道它实际上是如何工作的？程序 writer.c 和 reader.c 必须同时运行吗？如果他们这样做了，那么 reader.c 如何“通知” writer.c 发送了一个字符串？

这些问题大多是理论上的，但我真的很想知道流水线是如何工作的。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:22:11.177

```
Do the programs writer.c and reader.c have to run simultaneously ? 
```

他们是这样。

```
If they does , how reader.c is "informed" that writer.c has sent a string? 
```

这两个程序都打开一个特殊的`pipe`设备：`"/tmp/myfifo`. 一个用于阅读，另一个用于书写。内核负责在它们之间传输数据。

请注意，管道实际上*需要*并发读写，因为内部缓冲区非常小，并且在没有一个活动的情况下会阻塞另一个活动。

它是如何工作的：如果为了简化，*写入*管道的数据从进程空间进入内核并进入*读取器*进程。通常开发人员会尝试使用非阻塞调用，因为在一个进程繁忙的情况下阻塞程序执行是不可接受的。

有关管道的更多信息，您可以阅读有关该主题的 Linux 文档：http: [//linux.die.net/man/7/pipe](http://linux.die.net/man/7/pipe)

# sql - 在带有 JOIN 的闭包表上运行 SELECT 查询？

> ID：16065016
> 
> 赞同：0
> 
> 时间：2013-04-17T16:08:56.887
> 
> 标签：sql, hierarchical-data, transitive-closure-table

我设置了一个应用程序，其中包含附加到帖子的嵌套评论。我决定使用[闭包表](http://www.slideshare.net/billkarwin/models-for-hierarchical-data)方法（幻灯片 40）来发表评论，因为硬盘空间是多么便宜，而查询和管理树结构似乎多么容易。但是，我遇到了一个问题。我似乎无法弄清楚如何根据帖子 ID 而不是祖先 ID（幻灯片 49）获取树路径。

我的数据库结构如下所示：

```
table: comment_paths
--------------------
parent_id (fk on comments.id)
child_id  (fk on comments.id)
depth

table: comments
---------------
id
parent_id (fk on comments.id)
post_id   (fk on posts.id)
text

table: posts
---------------
id
name 
```

如果我事先知道 parent_id，就像在幻灯片中一样，抓取树很简单：

```
SELECT c.*, p.*
FROM comments AS c
JOIN comment_paths AS p
ON c.id = p.child_id
WHERE p.parent_id = 1 
```

`parent_id`但是，我事先不知道；我只知道`post_id`. 数据库的设置方式，与帖子关联的树不止一棵：

```
 [post]
-----------------------------------------
[comment]       [comment]       [comment]   depth: 0
    |                               |
 [reply]                         [reply]    depth: 1
  |   |
 [r] [r]                                    depth: 2 
```

我最初的解决方案是这样的查询：

```
SELECT c.*, p.*
FROM comments AS c
JOIN comment_paths AS p
ON c.id = p.child_id
WHERE p.parent_id IN
    (SELECT id FROM comments WHERE parent_id IS NULL AND post_id = 6) 
```

它返回正确的数据，但我觉得这样的嵌套 SELECT 是不正确的。有一个更好的方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T17:09:29.703

我实在想不出更好的办法。我要做的唯一改变是使用 EXISTS 而不是 IN：

```
SELECT c.*, p.*
FROM comments AS c
JOIN comment_paths AS p
ON c.id = p.child_id
WHERE EXISTS
(SELECT * FROM comments c2 WHERE p.parent_id = c2.id AND c2.parent_id IS NULL AND c2.post_id = 6) 
```

我很想看看是否真的有更好的方法。

更新：

我不确定您使用的是什么 RDMS。但是，如果递归查询可用，我认为您可以完全摆脱 comments_path 表：

```
;with cte as(
select c.*, 0 as depth
from comments c
where c.post_id = 6 and c.parent_id is null
union all
select c.*, cte.depth + 1
from comments c
join cte on c.parent_id = cte.id)

select * from cte 
```

# angularjs - 在 AngularJS 上使用 $inject 时出现奇怪的异常

> ID：16065019
> 
> 赞同：0
> 
> 时间：2013-04-17T16:09:16.147
> 
> 标签：angularjs

我有一个需要访问服务的控制器。如果我只是简单地将服务作为参数添加到我的控制器的构造函数中，它工作得很好，但是如果我尝试用 $inject 注释参数，这样我以后在最小化 javascript 时不会遇到问题，我得到以下异常：“无法读取未定义的属性‘用户’”

一切仍然正常，但我不明白异常来自哪里。

该服务的代码是：

```
var myAppServices = angular.module('myApp.services', []);
myAppServices.factory('User', function(){
        var user = {
            name:"anonymous",
            id: -1,
            authorized:false
        };
        return user;
    }); 
```

控制器看起来像这样：

```
function MainController($rootScope, $location, User){
    $rootScope.$on("$routeChangeStart", function (event, current, previous){
        console.log(User);
        if(User.authorized === false &&  current.templateUrl !== 'partials/partial1.html'){
            console.log("returning false")
            $location.path('/view1');
            return false;
        }
    });

}
MainController.$inject['$rootScope', '$location', 'User']; 
```

异常在上面调用 $inject 注释的最后一行代码中引发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:39:31.917

您缺少一个`=`：

```
MainController.$inject = ['$rootScope', '$location', 'User']; 
```

# maven - 用于演示的复杂 Maven 依赖关系

> ID：16065021
> 
> 赞同：1
> 
> 时间：2013-04-17T16:09:19.077
> 
> 标签：maven

我必须演示一下 Maven 的好处。我试图找到一个具有多级传递依赖的复杂依赖，以真正展示该工具的依赖管理方面的强大功能。

依赖项应该在 Maven 中央存储库中，因为我想让演示尽可能简单。

有人能推荐一个合适的吗？（越复杂越好。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:15:50.077

`hibernate-core`看起来很复杂：

```
[INFO] +- org.hibernate:hibernate-core:jar:4.2.0.Final:compile
[INFO] |  +- antlr:antlr:jar:2.7.7:compile
[INFO] |  +- org.jboss.logging:jboss-logging:jar:3.1.0.GA:compile
[INFO] |  +- org.jboss.spec.javax.transaction:jboss-transaction-api_1.1_spec:jar:1.0.0.Final:compile
[INFO] |  +- dom4j:dom4j:jar:1.6.1:compile
[INFO] |  +- org.hibernate.javax.persistence:hibernate-jpa-2.0-api:jar:1.0.1.Final:compile
[INFO] |  +- org.javassist:javassist:jar:3.15.0-GA:compile
[INFO] |  \- org.hibernate.common:hibernate-commons-annotations:jar:4.0.1.Final:compile 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T16:17:16.843

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">

<modelVersion>4.0.0</modelVersion>

<groupId>it.unitn.margonar</groupId>

<artifactId>SpringMavenJPA</artifactId>

<version>0.0.1-SNAPSHOT</version>

<dependencies>

<dependency>

<groupId>org.hibernate</groupId>

<artifactId>hibernate-core</artifactId>

<version>4.1.8.Final</version>

</dependency>

<dependency>

<groupId>org.springframework</groupId>

<artifactId>spring-core</artifactId>

<version>3.1.3.RELEASE</version>

</dependency>

<dependency>

<groupId>org.springframework</groupId>

<artifactId>spring-orm</artifactId>

<version>3.1.3.RELEASE</version>

</dependency>

<dependency>

<groupId>org.springframework</groupId>

<artifactId>spring-beans</artifactId>

<version>3.1.3.RELEASE</version>

</dependency>

<dependency>

<groupId>postgresql</groupId>

<artifactId>postgresql</artifactId>

<version>9.1-901-1.jdbc4</version>

</dependency>

<dependency>

<groupId>org.springframework</groupId>

<artifactId>spring-test</artifactId>

<version>3.1.3.RELEASE</version>

</dependency>

<dependency>

<groupId>commons-dbcp</groupId>

<artifactId>commons-dbcp</artifactId>

<version>20030825.184428</version>

</dependency>

<dependency>

<groupId>commons-pool</groupId>

<artifactId>commons-pool</artifactId>

<version>20030825.183949</version>

</dependency>

<dependency>

<groupId>org.hibernate</groupId>

<artifactId>hibernate-entitymanager</artifactId>

<version>4.1.8.Final</version>

</dependency>

</dependencies>

</project> 
```

# java - 如何从给定编号的文件中读取一行？

> ID：16065022
> 
> 赞同：0
> 
> 时间：2013-04-17T16:09:19.630
> 
> 标签：java, file, readfile

我有一个包含 100 行的文件，
每行包含一个标签
我需要获取标签值，因为它的等级是 TagVertex 类的“id”

```
 public abstract class Vertex <T>{

         String vertexId ;// example Tag1

         T vertexValue ;

         public  abstract  T computeVertexValue();
} 
```

```
 public class TagVertex extends Vertex<String> {

      @Override
      public String computeVertexValue() {
       // How to get the String from my file?
         return null;
} 
```

T试试这个，但它不起作用

```
public static void main(String args[]) {
  File source //

  int i=90;

  int j=0;

  String s = null;

  try {
    Scanner scanner = new Scanner(source);

    while (scanner.hasNextLine()) {
        if (j==i) s= scanner.nextLine();

         else j++;
    }

} catch (FileNotFoundException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}

System.out.println(s);
  }} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:49:57.530

尽管有一种使用 BufferedReader 跳过字符的方法，但我认为没有一种内置方法可以跳过整行。

```
BufferedReader bf = new BufferedReader(new FileReader("MyFile.txt"));

for(int i = 1; i < myVertex.vertexId; i++){
    bf.readLine();
}

String n = bf.readLine();
if(n != null){
    System.out.println(n);
} 
```

不过我认为可能有更好的主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T16:28:20.727

This is command u can use to read from file:

```
BufferedReader bf = new BufferedReader(new FileReader("filename")); 
```

This will read the file to the buffer. Now, for reading each line u should use a while loop and read each line into string. Like:

```
String str;
while((str = bf.readLine()) != null){
//handle each line untill the end of file which will be null and quit the loop
} 
```

# c# - 使用 DateTime.Now 插入值时 SqlDateTime 溢出

> ID：16065028
> 
> 赞同：15
> 
> 时间：2013-04-17T16:09:48.400
> 
> 标签：c#, sql, linq

最近我在尝试做时遇到了非常奇怪的错误`db.SubmitChanges()`：

> SqlDateTime 溢出。必须介于 1753 年 1 月 1 日上午 12:00:00 和 9999 年 12 月 31 日晚上 11:59:59 之间。

关键是，我只使用`DateTime.Now`在我的对象中设置属性，并且在调用`Response.Write(DateTime.Now.ToString());`它之后显示`17-04-2013 18:03:13`它应该是。

它以前没有发生，现在该功能总是中断。我完全一无所知 - 我的 SQL 服务器上的日期似乎没问题。

什么可能导致它？

**编辑**

我认为这没有帮助（IMO 出现任何错误太简单了），但这是我的功能：

```
public bool ReportLogIn(int UserID, string IP, int Succeed ... ) {
    A_UserLoginHistory Report = new A_UserLoginHistory();

    Report.IP = IP;
    Report.UserID = UserID;
    Report.Status = Succeed;
    Report.Date = DateTime.Now; //the only DateTime field
    ...

    try {
        db.A_UserLoginRegistry.InsertOnSubmit(Report);
        db.SubmitChanges();
        return true;
    } catch (Exception e) {
        ErrorLog.AddError(e.ToString());
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T09:10:36.387

实际上问题是 `SQL DateTime`=/= `C# Datetime`

你需要改变两件事

*   数据库将字段类型从更改`DateTime`为`DateTime2`

*   查询您需要明确

    ```
    SqlCommand cmd = new SqlCommand("insertsomeDate", conn);
    cmd.CommandType = CommandType.StoredProcedure;
    cmd.Parameters.Add("@newDate", SqlDbType.DateTime2).Value = yourDate; //<- as example 
    ```

[您可以在此处](https://stackoverflow.com/a/1334193/1993545)、[此处](https://stackoverflow.com/a/12364243/1993545)和[此处](https://stackoverflow.com/questions/15566210/sqldatetime-overflow-exception-c-net)找到更多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T20:00:54.063

最有可能的是您忘记初始化日期字段 - 您确定已将它们全部设置并没有添加新的吗？当我向 DBML 添加一个新的日期字段时，我通常会得到这个，因为它试图插入 01/01/0001 00:00:00

如果这没有帮助，请在执行 DB.SubmitChanges 之前在 DB.Log 上设置一个 New StringWriter，然后检查 DB.Log.ToString（可以在调试器中执行）。这应该向您显示查询和所有参数（在底部），以便您可以看到匹配导致问题的参数。

有助于解决此类问题的另一件事是使用 DB.GetChangeSet() 在 SubmitChanges 调用之前检查哪些记录和被插入/更新（无法想象删除可能会导致这种情况）

# php - 使用 Ajax 获取行号 onclick

> ID：16065035
> 
> 赞同：1
> 
> 时间：2013-04-17T16:10:13.793
> 
> 标签：php, ajax

我穿了下面的代码和它的工作。但是我想要行号，当一个行被点击（希望 Ajax 没问题）并将它传递给同一页面中的一个 php 代码。我尝试了 javascript 它工作，但不是我想要的方式。如果它在 Ajax 中更好。任何帮助都会感激不尽:)

```
if(isset($_POST['search'])){
$search=mysqli_query($con,"SELECT * FROM bus_fares WHERE route_no='$_POST[route_no]'");
$num_rows = mysqli_num_rows($search);
$search1=mysqli_query($con,"SELECT fare FROM fare  limit $num_rows ");
$x = 0;
echo" <table  id='my_table'><tr><th>Fare Stage</th>
            <th>Location</th>
            <th>Fare</th>
        </tr>";

while($row=mysqli_fetch_assoc($search) and $row1=mysqli_fetch_assoc($search1)){
echo"<tr>";
echo"<td>".$x."</td>";
echo"<td>".$row['location']."</td>";
echo"<td>".$row1['fare']."</td>";
echo"</tr>";
$x++;
}
echo"</table>"; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:16:11.243

而不是`echo"<tr>";`做：

```
echo "<tr id='row_".$row['id']."'>"; 
```

然后当单击 tr 时，只需在脚本标签内使用 jQuery 进行检索（确保`$(this)[0].id`包含[jQuery](http://www.jquery.com) [，](http://www.jquery.com)它是一个强大的 JS 库，请在谷歌上搜索以获取更多信息）：

```
<script>
$("#my_table").on("click", "tr", function(){
  alert($(this)[0].id.replace("row_", ""));
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T16:20:11.947

您真正想要的不仅是在表中存储可视数据，而且还存储某种元数据。有几种方法可以实现这一点。

**方法#1：（ab）使用`id`or`class`属性：**

生成的 HTML 如下所示：

```
<!-- example with the id-attribute: -->
<tr id="mysql_row_1"> ... </tr>
<tr id="mysql_row_2"> ... </tr>

<!-- example with the class-attribute: -->
<tr class="mysql_row_1"> ... </tr>
<tr class="mysql_row_2"> ... </tr> 
```

这都会生成有效的 HTML，但是您会滥用属性标签来实现它们未实现的目的，这通常被认为是不好的。想象一下，如果您必须存储多个值。你可以分配多个类，但是你会被 id-tag 卡住。因此：不要这样做！

您必须像这样更改代码才能实现此解决方案：（我假设您希望将 的值`$x`作为行号。）

```
while ($row=mysqli_fetch_assoc($search) and $row1=mysqli_fetch_assoc($search1)) {
    echo '<tr class="mysql_row_'.$x.'" onclick="getRowNumber()">';
    echo "<td>".$x."</td>";
    echo "<td>".$row['location']."</td>";
    echo "<td>".$row1['fare']."</td>";
    echo "</tr>";
    $x++;
} 
```

javascript部分：

```
function getRowNumber() {
    var rowNumber = this.className.replace("mysql_row_",""); // fetches the classname and removes the extra-strings
    alert(rowNumber);  // alerts "1", "2", ...
} 
```

**方法#2：使用`data-*`属性：**

此解决方案适用于 HTML5。*如果有的话，请添加有关兼容性的其他信息。*

您的 HTML 代码将如下所示：

```
<tr data-mysql_row_number="1" onclick="getRowNumber()"> .... </tr>
<tr data-mysql_row_number="2" onclick="getRowNumber()"> .... </tr> 
```

和修改后的javascript：

```
function getRowNumber() {
    alert(this.getAttribute("data-mysql_row_number")); // alerts "1", "2", ...
} 
```

这也会生成完全有效的 HTML(5) 代码，并允许您存储无限量的信息，因为您可以指定任意数量的`data-*`属性。

**方法#3：使用不可见`<input>`字段：**

生成的 HTML 代码：

```
<tr onclick="getRowNumber()">
    <td>
        Normal content of this field
        <input type="hidden" name="mysql_row_number" value="1"/>
    </td>
</tr> 
```

以及用于获取值的 JS 代码：

```
function getRowNumber() {
    var rowNumber = this.getElementsByName('mysql_row_number')[0].value;
    alert(rowNumber); // alerts "1", "2", ...
} 
```

这也产生了有效的 HTML，但在我看来在语义上并不正确，因为`<input>`字段内的数据是某种松散的并且没有直接连接到行。另外，您可以创建多个`<input>`具有相同名称的字段。

*   我会建议方法 #2 ( `data-*`)，因为这是最灵活的解决方案，并且使用了旨在存储元数据的属性。
*   方法 #1 在所有（较旧的）浏览器中最可靠，因为它们都支持通过 JS 访问`id`or`class`属性，只要您保持`id`标签唯一。
*   方法#3 对于旧版浏览器也非常可靠。

# php - 卷曲和相对路径

> ID：16065036
> 
> 赞同：1
> 
> 时间：2013-04-17T16:10:14.513
> 
> 标签：php, curl, relative-path

我正在使用此脚本来抓取网站：

```
<?php
$url = "http://www.nu.nl";

$ch = curl_init($url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$curl_scraped_page = curl_exec($ch);
curl_close($ch);

echo $curl_scraped_page;
?> 
```

输出在 head 部分的 javascript、css 文件中显示错误的域。所以我尝试用以下方法修复它：

```
$url = preg_replace("/<head>/i", "<head><base href='$url' />", $url, 1); 
```

不起作用，任何想法为什么？我什么也看不出来。

[例子](http://phpfiddle.org/main/code/wyj-g5a)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:17:37.283

如何使用正确的变量？`$curl_scraped_page`是您的页面和`$url`您的网址...但您传递`$url`给`preg_replace`.

```
$curl_scraped_page = preg_replace("/<head>/i", "<head><base href='$url' />", $curl_scraped_page, 1); 
```

# asp.net - 如何将属性值拆分为两行？

> ID：16065040
> 
> 赞同：-1
> 
> 时间：2013-04-17T16:10:22.160
> 
> 标签：asp.net, html

我有一个 asp.net 应用程序，我想将如下一行拆分为两行（我想手动换行）

```
<table style="border: thin solid #808080; padding: 3px 5px 7px 5px; vertical-align:top; margin-left: auto; margin-right: auto;"> 
```

理想情况下，我希望看到这样的东西：

```
<table style="border: thin solid #808080; padding: 3px 5px 7px 5px; "
                + "vertical-align:top; margin-left: auto; margin-right: auto;"> 
```

但是当然 + 运算符在这里不起作用。

有没有办法完成这个任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T16:13:11.360

您不需要操作员。空格和换行符将被忽略。

```
<table style="border: thin solid #808080; padding: 3px 5px 7px 5px;
              vertical-align:top; margin-left: auto; margin-right: auto;"> 
```

您应该考虑使用 CSS 文件而不是内联样式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T16:12:12.417

将样式移动到 css 文件或样式标签中。给表一个类名并以这种方式引用它。完毕。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T16:13:16.893

在 Visual Studio Hit: [Ctrl + K + D](http://www.faircom.com/ace/enl_26_vstips_t.php)中，它会自动格式化您的标记并将内联样式拆分为两行。

但是，我建议将 CSS 分离到外部样式表中，甚至将其放在`<style>`页眉内的标签中。

```
<style type="text/css">
    table { border: thin solid #808080; padding: 3px 5px 7px 5px; vertical-align:top; margin-left: auto; margin-right: auto; }
</style> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T16:13:05.083

不要使用内联样式。在其上放置一个 CSS 类并在`<style>`块或外部 CSS 文件中定义样式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T16:13:12.590

如果您主要关心的是样式的长度，为什么不直接使用样式表呢？

```
<table class="myStyle"> 
```

..比..更具可读性

```
<table style="border: thin solid #808080; padding: 3px 5px 7px 5px; vertical-align:top; margin-left: auto; margin-right: auto;"> 
```

# xtext - 如何实现 xText 的代沟模式？

> ID：16065041
> 
> 赞同：2
> 
> 时间：2013-04-17T16:10:22.363
> 
> 标签：xtext, xtend

目前我正在修改一个使用 xText 解析自定义 DSL 的项目。我想为生成的类添加功能，但不幸的是我未能实现代沟模式。我以这篇文章为基础：

[http://heikobehrens.net/2009/04/23/generation-gap-pattern/](http://heikobehrens.net/2009/04/23/generation-gap-pattern/)

我的问题是我们使用了很多片段来定制 org.eclipse.xtext.generator.Generator。看来我不能为 org.eclipse.xpand2.Generator 重用这些片段。

所以总而言之：

*   如何实现 xtext 生成器的代沟模式
*   **或者**我如何将片段与 xpand2-Generator 一起使用
*   **或者**是否有第三种解决方案允许我使用片段并实现代沟模式？

研究完这件事后，我彻底糊涂了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T16:31:05.830

本文中描述的代沟模式几乎适用于任何通用代码生成框架。Xtext 也不例外。

除此之外，Xtext 提供了另一个很好的解决方案来填补代沟。这是 Xbase。但是 Xbase 迫使您与 java 紧密集成，所以这并不总是一种选择。

考虑以下步骤，将代沟模式添加到现有的 Xtext 项目中：

*   找到带有间隙的生成文件（使用您要手动编写的代码片段）。让它成为例如 MyClass。
*   改变发电机，使
    *   生成的文件被重命名为 AbstractMyClass。
    *   abstract 关键字被添加到 AbstractMyClass 类定义中。
    *   差距被转移到一个单一的方法。
    *   为间隙生成一个抽象方法。
    *   从生成的代码中调用抽象方法。
*   手动添加“MyClass extends AbstractMyClass”并实现抽象间隙方法

如果您对某些 Xtend2 代码有具体问题，请在此处或 Xtend 论坛中发布问题。

# mysql - MySQL触发器更新另一个表中的特定行

> ID：16065045
> 
> 赞同：1
> 
> 时间：2013-04-17T16:10:41.300
> 
> 标签：mysql, triggers

这是我第一次尝试创建触发器，因此非常感谢任何帮助。我有两个看起来像这样的表：

喜欢（用户名，comment_id）用户（用户名，密码，积分）

我正在尝试创建一个触发器，以便当用户喜欢评论（喜欢中的新条目）时，该用户的点值增加 1。这是我尝试过的：

```
DELIMITER $$
create trigger update_points
after insert on likes
for each row
begin
    SET @username = new.username;
    UPDATE user
    SET points = points + 1
    WHERE username = @username

end$$ 
```

我不断收到 MySQL 错误。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:26:27.027

我认为你最后错过了一个 DELIMITER 电话。还有一个分号：

```
DELIMITER $$
create trigger update_points after insert on likes
for each row begin
SET @username = new.username;
UPDATE user SET points = points + 1 WHERE username = @username;
end$$
DELIMITER ; 
```

# php - PHP - 从 Web 表单更新 MySQL 表中的每一行

> ID：16065046
> 
> 赞同：0
> 
> 时间：2013-04-17T16:10:45.363
> 
> 标签：php, mysql, sql-update

我用多行数据填充了一个 Web 表单。我需要更新一些字段，因此我将值放入文本字​​段中。MySQL查询是：

```
SELECT * FROM results WHERE EventID = %s AND CompNo = %s", GetSQLValueString($colname_rsResults, "int"),GetSQLValueString($colname2_rsResults, "int")); 
```

EventID 和 CompNo 在 URL 中传递。

假设结果是 50 行。我希望能够更新名称字段（例如，更正拼写），单击一个按钮并让代码使用任何新值更新数据库。大多数值不会改变并不重要，因为这是一个非常罕见的操作。

我曾经能够在 ASP 中做到这一点，但我似乎无法在 PHP 中做到这一点。

这是我正在使用的代码，我认为这是完全错误的！

```
if ((isset($_POST["JM_update"])) && ($_POST["JM_update"] == "form1")) { 

    $i = 0;
    $j = $totalRows_rsResults;

    while($i < $j)

    $resultID=$_GET['ResultID'];
    $vDelete=$_GET['Del'];
    if ($vDelete == 1) { 
    $delSQL = sprintf("DELETE FROM Results WHERE ResultID=$resultID");
    mysql_query($delSQL,$connFeisResults);
    } else {
    $name=$_GET['Name'];
    $qual=$_GET['Qual'];
    $updateSQL = sprintf("UPDATE results SET Name = ".$name{$i}.", Qual = ".$qual[$i]." WHERE ResultID=$resultID");
    mysql_query($updateSQL, $connFeisResults);  

    $i++;

    }
    } 
```

每行末尾还有一个复选框，用于检查我是否需要删除该记录。那也不行！！

我正在使用 Dreamweaver CS6 并尝试调整更新行为等。

有什么想法吗？提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:30:21.447

看起来您在 while 语句之后缺少一个左大括号。

- 更新

另外，检查您的 sprintf 语句——它们看起来有问题，并且它们看起来像是将原始的“$resultID”写入 SQL 字符串，而不是其中的值。

在此处查看如何操作：[http ://www.talkphp.com/general/1062-securing-your-mysql-queries-sprintf.html](http://www.talkphp.com/general/1062-securing-your-mysql-queries-sprintf.html)

# c# - 动态 MenuItem 中的“System.Windows.Data 错误：4”

> ID：16065047
> 
> 赞同：6
> 
> 时间：2013-04-17T16:10:48.700
> 
> 标签：c#, wpf, user-interface

我有一个 WPF MenuControl，我在运行时向其中添加了几个菜单项。如果您有兴趣了解，原因是我们从数据库中读取数据，需要根据返回的数据创建 MenuItems。我们有我要说的是复杂的菜单样式（至少阅读起来很复杂:)）。现在，当我添加菜单项时，我在 Visual Studio 的调试窗口中不断收到此错误：

```
System.Windows.Data Error: 4 : Cannot find source for binding with reference     'RelativeSource FindAncestor, AncestorType='System.Windows.Controls.ItemsControl',  AncestorLevel='1''. BindingExpression:Path=HorizontalContentAlignment; DataItem=null;  target element is 'MenuItem' (Name=''); target property is 'HorizontalContentAlignment'  (type 'HorizontalAlignment')

System.Windows.Data Error: 4 : Cannot find source for binding with reference 'RelativeSource FindAncestor, AncestorType='System.Windows.Controls.ItemsControl', AncestorLevel='1''. BindingExpression:Path=VerticalContentAlignment; DataItem=null; target element is 'MenuItem' (Name=''); target property is 'VerticalContentAlignment' (type 'VerticalAlignment') 
```

根据添加的 MenuItems 的数量，我猜这两个重复了几次。我注意到的另一个奇怪的行为是，在调试窗口中出现这些错误之后，MenuControl 会自行下拉（打开），只需将鼠标移到它上面（而不是像通常那样单击它）。所以，我想一个与另一个有关。

任何想法发生了什么？MenuControlCode 相当长，但如果需要，我也可以发布它。

这是 MenuControl 的 XAML 代码。之后，在代码中，我只使用“PrincipalMenu”并根据需要向其中添加 MenuItems：

```
<UserControl x:Class="EOGMapControl.MainPropertyGUI.MenuControl"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="41" d:DesignWidth="380">
<UserControl.Resources>
    <SolidColorBrush x:Key="HighlightedBackgroundBrush" Color="#FFDEDEDE" />
    <SolidColorBrush x:Key="MenuBackgroundBrush" Color="White" />
    <SolidColorBrush x:Key="NormalBorderBrush" Color="#FFE5DFDF" />
    <SolidColorBrush x:Key="SolidMenuFontBrush" Color="Black" />
    <SolidColorBrush x:Key="HighlightedText" Color="White" />
    <SolidColorBrush x:Key="menuItemBrush" Color="#FFB7B7B7" />
    <SolidColorBrush x:Key="WindowBackgroundBrush" Color="#FFF" />
    <SolidColorBrush x:Key="SolidBorderBrush" Color="#888" />
    <Style x:Key="{x:Type Menu}" TargetType="{x:Type Menu}">
        <Setter Property="OverridesDefaultStyle" Value="True"/>
        <Setter Property="SnapsToDevicePixels" Value="True"/>
        <Setter Property="Height" Value="25"/>
        <Setter Property="Foreground" Value="{StaticResource SolidMenuFontBrush}"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type Menu}">
                    <Border
        Background="{StaticResource MenuBackgroundBrush}"
        BorderBrush="{StaticResource MenuBackgroundBrush}"
        BorderThickness="1">
                        <StackPanel ClipToBounds="True" Orientation="Horizontal" IsItemsHost="True"/>
                    </Border>

                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style x:Key="{x:Type MenuItem}" TargetType="{x:Type MenuItem}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type MenuItem}">
                    <Border x:Name="Border"
              Background="{TemplateBinding Background}"
              BorderBrush="{TemplateBinding BorderBrush}"
              BorderThickness="0">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition x:Name="Col0" MinWidth="17" Width="Auto" SharedSizeGroup="MenuItemIconColumnGroup"/>
                                <ColumnDefinition Width="Auto" SharedSizeGroup="MenuTextColumnGroup"/>
                                <ColumnDefinition Width="Auto" SharedSizeGroup="MenuItemIGTColumnGroup"/>
                                <ColumnDefinition x:Name="Col3" Width="14"/>
                            </Grid.ColumnDefinitions>

                            <!-- ContentPresenter to show an Icon if needed -->
                            <ContentPresenter Grid.Column="0" Margin="4,0,6,0" x:Name="Icon" VerticalAlignment="Center" ContentSource="Icon"/>

                            <!-- Glyph is a checkmark if needed for a checkable menu -->
                            <Grid Grid.Column="0" Visibility="Hidden" Margin="4,0,6,0" x:Name="GlyphPanel" VerticalAlignment="Center">
                                <Path x:Name="GlyphPanelpath" VerticalAlignment="Center" Fill="{TemplateBinding Foreground}" Data="M0,2 L0,4.8 L2.5,7.4 L7.1,2.8 L7.1,0 L2.5,4.6 z" FlowDirection="LeftToRight"/>
                            </Grid>

                            <!-- Content for the menu text etc -->
                            <ContentPresenter Grid.Column="1"
                            Margin="{TemplateBinding Padding}"
                            x:Name="HeaderHost"
                            RecognizesAccessKey="True"
                            ContentSource="Header"/>

                            <!-- Content for the menu IGT -->
                            <ContentPresenter Grid.Column="2"
                            Margin="8,1,8,1"
                            x:Name="IGTHost"
                            ContentSource="InputGestureText"
                            VerticalAlignment="Center"/>

                            <!-- Arrow drawn path which points to the next level of the menu -->
                            <Grid Grid.Column="3" Margin="4,0,6,0" x:Name="ArrowPanel" VerticalAlignment="Center">
                                <Path x:Name="ArrowPanelPath" HorizontalAlignment="Right" VerticalAlignment="Center" Fill="{TemplateBinding Foreground}" Data="M0,0 L0,8 L4,4 z"/>
                            </Grid>
                            <!--IsOpen="{Binding Path=IsSubmenuOpen, RelativeSource={RelativeSource TemplatedParent}}"
                            PopupAnimation="{DynamicResource {x:Static SystemParameters.MenuPopupAnimationKey}}"
                            -->
                            <!-- The Popup is the body of the menu which expands down or across depending on the level of the item -->
                            <Popup  Placement="Right" IsOpen="{TemplateBinding IsSubmenuOpen}" x:Name="SubMenuPopup"  Focusable="false" PopupAnimation="Fade">
                                <Border x:Name="SubMenuBorder" SnapsToDevicePixels="True" Background="{StaticResource WindowBackgroundBrush}"  BorderBrush="{StaticResource SolidBorderBrush}" BorderThickness="1" Padding="2,2,2,2">
                                    <Grid x:Name="SubMenu" Grid.IsSharedSizeScope="True">
                                        <!--StackPanel holds children of the menu. This is set by IsItemsHost=True-->
                                        <StackPanel IsItemsHost="True" KeyboardNavigation.DirectionalNavigation="Cycle"/>
                                        <!--<ScrollViewer CanContentScroll="True">
                                            <StackPanel IsItemsHost="True" KeyboardNavigation.DirectionalNavigation="Cycle" />
                                        </ScrollViewer>-->
                                    </Grid>
                                </Border>
                            </Popup>
                        </Grid>
                    </Border>

                    <!-- These triggers re-configure the four arrangements of MenuItem to show different levels of menu via Role -->
                    <ControlTemplate.Triggers>

                        <!-- Role = TopLevelItem :  this is a child menu item from the top level without any child items-->
                        <Trigger Property="Role" Value="TopLevelItem">
                            <Setter Property="Padding" Value="6,1,6,1"/>
                            <Setter Property="Visibility" Value="Collapsed" TargetName="ArrowPanel"/>
                        </Trigger>

                        <!-- Role = SubMenuHeader : this is a child menu item which does not have children -->
                        <Trigger Property="Role" Value="SubmenuHeader">
                            <Setter Property="DockPanel.Dock" Value="Top"/>
                            <Setter Property="Padding" Value="0,2,0,2"/>
                        </Trigger>

                        <!-- Role = SubMenuItem : this is a child menu item which has children-->
                        <Trigger Property="Role" Value="SubmenuItem">
                            <Setter Property="DockPanel.Dock" Value="Top"/>
                            <Setter Property="Padding" Value="0,2,0,2"/>
                            <Setter Property="Visibility" Value="Collapsed" TargetName="ArrowPanel"/>
                        </Trigger>

                        <Trigger Property="IsSuspendingPopupAnimation" Value="true">
                            <Setter Property="PopupAnimation" Value="None" TargetName="SubMenuPopup"/>
                        </Trigger>

                        <!-- If no Icon is present the we collapse the Icon Content -->
                        <Trigger Property="Icon" Value="{x:Null}">
                            <Setter Property="Visibility" Value="Collapsed" TargetName="Icon"/>
                        </Trigger>

                        <!-- The GlyphPanel contains the CheckMark -->
                        <Trigger Property="IsChecked" Value="true">
                            <Setter Property="Visibility" Value="Visible" TargetName="GlyphPanel"/>
                            <Setter Property="Visibility" Value="Collapsed" TargetName="Icon"/>
                        </Trigger>

                        <!-- Using the system colors for the Menu Highlight and IsEnabled-->
                        <Trigger Property="IsHighlighted" Value="true">
                            <Setter Property="Background" Value="{StaticResource HighlightedBackgroundBrush}" TargetName="Border"/>
                            <Setter Property="Foreground" Value="{StaticResource HighlightedText}"/>
                            <Setter Property="BorderBrush" Value="{StaticResource NormalBorderBrush}" TargetName="Border"/>
                        </Trigger>
                        <Trigger Property="IsHighlighted" Value="false">
                            <Setter Property="Background" Value="{StaticResource MenuBackgroundBrush}" TargetName="Border"/>
                            <Setter Property="Foreground" Value="{StaticResource SolidMenuFontBrush}"/>
                            <Setter Property="BorderBrush" Value="{StaticResource MenuBackgroundBrush}" TargetName="Border"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="false">
                            <Setter Property="Foreground" Value="LightGray"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</UserControl.Resources>
<UserControl.Foreground>
    <SolidColorBrush />
</UserControl.Foreground>
<Grid Height="24" Width="250" HorizontalAlignment="Left">
    <Grid.Background>
        <SolidColorBrush />
    </Grid.Background>
    <Menu Name="PrincipalMenu" Margin="0,0,-100,0">
    </Menu>
</Grid> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-15T12:04:54.443

请参考以下链接：

[http://www.codeproject.com/Tips/124556/How-to-suppress-the-System-Windows-Data-Error-warn](http://www.codeproject.com/Tips/124556/How-to-suppress-the-System-Windows-Data-Error-warn)

解决方案是，在类的构造函数中将数据绑定源开关级别设置为关键。

```
public TestSample() //constructor of the class
{
   InitializeComponent();

   System.Diagnostics.PresentationTraceSources.DataBindingSource.Switch.Level =    System.Diagnostics.SourceLevels.Critical;

} 
```

# yaml - yaml中可以使用通配符吗？

> ID：16065048
> 
> 赞同：1
> 
> 时间：2013-04-17T16:10:54.443
> 
> 标签：yaml

我正在建立一个使用 Pogo 的自动部署系统。它将加密包的密码短语存储在 yaml 文件中。但是我遇到了一个问题，尽管包名在 yaml 文件中并带有正确的密码短语，但由于包名附加了版本号，因此没有被拾取。

例如，yaml 文件将如下所示：

```
somesoftwarepackage: apassphrase 
```

在自动部署期间，实际安装的包名称将类似于：

```
somesoftwarepackage-1.0.23 
```

然后部署在那个时候冻结，等待密码。

是否可以在 yaml 中使用通配符，以便我可以放置通用包名称但不必指定（然后不断更新）特定版本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T05:48:02.550

我认为答案是否定的，YAML 不能进行字符串连接或任何其他数据生成或操作。

最接近变量或通配符的是锚点，它更像是先前指定数据的别名。我想你可以做这样的事情：

```
pkg_name: &name my_pkg
pkg_version: &version 1.0.23
pkg_fullname: [ *name, '-', *version ] 
```

这样您至少已经记录了包名称格式 ( `${name}-${version}`)，并操作`pkg_fullname`为单个字符串（例如，`''.join(pkg_fullname)`在 Python 中）。但使用原始数据进行这些操作可能同样容易。

# algorithm - 人工智能中高级规划的算法

> ID：16065057
> 
> 赞同：4
> 
> 时间：2013-04-17T16:11:11.803
> 
> 标签：algorithm, graph, artificial-intelligence, planning

我目前正在从事一个人工智能项目，其中代理需要将盒子从其原始位置推拉到某个目标位置。然后，该项目将扩展为包括多个代理，因此我们有一个主管负责创建“高级”目标，而代理负责实际的实现。

在实践中，目前，主管应该决定将箱子放在球门位置的顺序。事实上，将一个盒子放在它的目标位置可能会阻塞通往另一个目标的路径。

我们解决这个问题的第一个方法是尝试考虑“切割位置”。如果某个位置将可行走空间分成两个子集，其中一个是我们的代理，另一个是一个或多个目标，那么它就是一个切割位置。例如，考虑以下级别，其中“x”是代理，“A”和“B”是框，“a”和“b”是各自的目标位置：

```
+++++++++++++++++++++++++++++++++++++++++
x                        a             b+
+++++   +++++++++++++++++++++++++++++++++
    +AB +
    +++++ 
```

在这种情况下，目标“a”的位置是一个切割位置，因为如果将一个盒子放在那里，那么代理将无法到达目标“b”。

您能否建议一种快速算法来计算切入位置，并且可能会返回每个切入位置阻挡的目标数量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T17:40:46.193

您所说的网格词的切割位置在一般图形中称为*切割顶点*或*关节点。*来自[维基百科](http://en.wikipedia.org/wiki/Cut_vertex)：

> 具体来说，切割顶点是其移除会增加连通分量数量的任何顶点。

在同一篇文章中更进一步：

> 由 John Hopcroft 和 Robert Tarjan (1973) [1] 提出的用于计算连通无向图中的双连通分量的经典顺序算法以线性时间运行，并且基于深度优先搜索。该算法也被概述为算法介绍（第 2 版和第 3 版）的问题 22-2。

确定了双连通分量后，确定关节点应该很容易：包含在多个双连通分量中的所有节点都是关节点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T16:31:30.193

您可以将该区域放入无向图中，其中每个节点是地图的一个位置，如果位置彼此相邻，则两个节点连接。然后，您可以在图表上标记那些“切割位置”，并查看切割位置上的框会阻塞的所有路径。

# python - 使用 python 和 pygame 使用 cx_freeze 制作 .exe 时遇到问题，包括附加文件

> ID：16065060
> 
> 赞同：0
> 
> 时间：2013-04-17T16:11:23.467
> 
> 标签：python, pygame, cx-freeze

我在使用 cx_Freeze 创建 .exe 文件时遇到问题。我正在尝试使用[这个](http://pastebin.com/kRFX0QEf "这个")Pygame 游戏，它需要一些 .png、.gif 和 .ogg 才能运行。我尝试使用命令行和 setup.py 仅编译一个简单的 Python（没有 pygame 或其他文件），但都没有成功，我有点死了。

我已经安装了 cx_Freeze 并检查了它是否与 IDLE 中的“import cx_freeze”一起使用，不会引发错误。我在 Windows 7 上使用 Python 3.3，并为我的 python 版本使用正确版本的 pygame 和 cx_freeze。

谁能帮我创建这个.exe？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T18:47:29.800

要在您的文件中包含文件，您`.exe`应该编写一个`setup.py`类似于以下内容的文件：

```
from cx_Freeze import setup, Executable

exe=Executable(
     script="file.py",
     base="Win32Gui",
     icon="Icon.ico"
     )
includefiles=["file.ogg","file.png",etc]
includes=[]
excludes=[]
packages=[]
setup(

     version = "0.0",
     description = "No Description",
     author = "Name",
     name = "App name",
     options = {'build_exe': {'excludes':excludes,'packages':packages,'include_files':includefiles}},
     executables = [exe]
     ) 
```

# mysql - 正确使用计数

> ID：16065061
> 
> 赞同：0
> 
> 时间：2013-04-17T16:11:26.867
> 
> 标签：mysql

我只想计算所有子评论以及所有属于画廊的图像中的所有喜欢。

```
SELECT Count(Message.id) AS subCount, 
       Count(likes.id), 
       Image.id, 
       Image.date_created, 
       Image.likes, 
       Image.path 
FROM   images AS Image 
       LEFT JOIN messages AS Message 
              ON ( Message.object_id = Image.id 
                   AND Message.msg_type = 16 ) 
       LEFT JOIN likes AS Likes 
              ON ( likes.object_id = Image.id 
                   AND likes.object_type = 3 ) 
WHERE  Image.gallery_id = 31 
```

当我使用计数时，它只返回 1 行。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T16:13:19.640

你需要一个`GROUP BY`：

```
SELECT Count(Message.id) AS subCount, 
       Count(likes.id), 
       Image.id, 
       Image.date_created, 
       Image.likes, 
       Image.path 
FROM   images AS Image 
       LEFT JOIN messages AS Message 
              ON ( Message.object_id = Image.id 
                   AND Message.msg_type = 16 ) 
       LEFT JOIN likes AS Likes 
              ON ( likes.object_id = Image.id 
                   AND likes.object_type = 3 ) 
WHERE  Image.gallery_id = 31 
GROUP  BY Image.id, 
          Image.date_created, 
          Image.likes, 
          Image.path 
```

# .htaccess - 从 https 重定向到 http，但某些 URI 除外

> ID：16065065
> 
> 赞同：1
> 
> 时间：2013-04-17T16:11:29.083
> 
> 标签：.htaccess, redirect, https, uri

所以我目前遇到的问题是我们的整个网站都是使用 https 进行索引的。我们想使用 .htaccess 重定向到 http。问题是我们需要几个 URI 才能仍然使用 https，我不确定如何编写 URI 的异常

我知道如果我们的网站像 www.example.com/account.php 这样运行，但我们的网站网址像 www.example.com/index.php?l=account

```
# Turn SSL on for account
RewriteCond %{HTTPS} off
RewriteCond %{SCRIPT_FILENAME} \/account\.php [NC]
RewriteRule ^(.*)$ https://%{HTTP_HOST}/$1 [R=301,L] 
```

我该如何解决这个问题，任何指导将不胜感激。

谢谢

编辑！

所以下面的这段代码我已经工作了，但我想再做一个我似乎无法工作的例外，我还希望根 (index.php) 只使用 http。

我尝试使用...

```
RewriteCond %{REQUEST_URI} !^/index.php 
```

但这没有用

```
# invoke rewrite engine
RewriteEngine On
RewriteBase /

RewriteCond %{https} off
RewriteCond %{QUERY_STRING} !^l=product_detail
RewriteCond %{QUERY_STRING} !^l=product_list
RewriteCond %{QUERY_STRING} !^l=page_view
RewriteRule ^(.*)$ https://%{HTTP_HOST}/development/$1 [R=301,L] 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:46:36.343

Try

```
RewriteCond %{HTTPS} on
RewriteCond %{REQUEST_URI} !^/account.php 
RewriteCond %{QUERY_STRING} !^l=account
RewriteRule ^(.*)$ http://%{HTTP_HOST}/$1 [R=301,L]

RewriteCond %{HTTPS} off
RewriteCond %{REQUEST_URI} ^/account.php [OR]
RewriteCond %{QUERY_STRING} ^l=account
RewriteRule ^(.*)$ https://%{HTTP_HOST}/$1 [R=301,L] 
```

# python - 使用 peewee 插入 MySQL 表会引发“未知列”异常

> ID：16065066
> 
> 赞同：5
> 
> 时间：2013-04-17T16:11:30.227
> 
> 标签：python, mysql, peewee

我有以下脚本：

```
from peewee import *

db = MySQLDatabase('database', user='root')

class BaseModel(Model):
    class Meta:
        database = db

class Locations(BaseModel):
    location_id = PrimaryKeyField()
    location_name = CharField()

class Units(BaseModel):
    unit_id = PrimaryKeyField()
    unit_num = IntegerField()
    location_id = ForeignKeyField(Locations, related_name='units')

db.connect()

for location in Locations.select():
    for pod_num in range (1, 9):
        unit = Units.create(unit_num=pod_num, location_id=location.location_id) 
```

表位置有几行，表单元是空的。当我尝试启动它时，我不断收到异常：

```
(1054, "Unknown column 'location_id_id' in 'field list'") 
```

我究竟做错了什么？

这是用于创建表的 SQL 脚本的一部分：

```
CREATE  TABLE IF NOT EXISTS `database`.`units` (
  `unit_id` INT UNSIGNED NOT NULL AUTO_INCREMENT ,
  `unit_num` TINYINT UNSIGNED NOT NULL ,
  `location_id` INT UNSIGNED NOT NULL ,
  PRIMARY KEY (`unit_id`) ,
  UNIQUE INDEX `ID_UNIQUE` (`unit_id` ASC) ,
  INDEX `location_idx` (`location_id` ASC) ,
  CONSTRAINT `location_id`
    FOREIGN KEY (`location_id` )
    REFERENCES `database`.`locations` (`location_id` )
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB; 
```

先感谢您！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-20T17:08:53.787

如果要显式指定列，请使用`db_column`：

```
class Units(BaseModel):
    unit_id = PrimaryKeyField()
    unit_num = IntegerField()
    location_id = ForeignKeyField(Locations, db_column='location_id', related_name='units') 
```

这是记录在案： http: [//peewee.readthedocs.org/en/latest/peewee/models.html#field-types-table](http://peewee.readthedocs.org/en/latest/peewee/models.html#field-types-table)

# sql - 来自另一个表的 Oracle CONCAT

> ID：16065072
> 
> 赞同：0
> 
> 时间：2013-04-17T16:11:58.547
> 
> 标签：sql, oracle, concat

```
UPDATE table1 t1 
SET t1.value_1 = CONCAT(t2.value_2,t1.value_1) 
WHERE t1.id = t2.t1_id AND t1.id = '0123'; 
```

任何人都可以帮助我如何执行上述查询吗？
基本上我需要取表 1 中的值并将表 2 中的值作为前缀。除了查询不知道 t2 是什么的明显问题外，一切似乎都很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T17:09:07.850

像这样的东西

```
update  ( select t1.value_1, t2.value_2 
          from table1 t1, table2 t2 
          where t2.id = t1.id 
            and t1.id = '0123' )
set value_1 = value_1 || value_2 
```

您需要确保 table2 具有唯一的 id 键约束，否则它将不起作用。

# svn - SVN 找不到 Hooks 文件夹

> ID：16065073
> 
> 赞同：1
> 
> 时间：2013-04-17T16:11:58.853
> 
> 标签：svn, tortoisesvn

我正在使用 tfs2svn 将我们的 Team Foundation Server 迁移到 svn。我遇到了以下问题：

![在此处输入图像描述](https://i.stack.imgur.com/SbkC8.png)

从在线研究来看，我似乎需要创建一个名为“pre-revprop-change”的批处理文件，其中包含和退出代码 0 并将其放在我的本地存储库“钩子”文件夹中。但是，我在 repo 或 .svn 文件夹中没有看到 hooks 文件夹。如果我通过 Windows 资源管理器浏览，是否应该看到 hooks 文件夹？我似乎找不到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T16:19:25.197

回购！=工作副本。如果它有一个`.svn`文件夹，它就是一个工作副本。您需要在 Windows 资源管理器中打开**存储库**（而不是在 TortoiseSVN 存储库浏览器中）。它应该如下所示：

*   会议
*   D b
*   格式
*   挂钩
*   锁
*   自述文件.txt
*   svn.ico

**编辑：**我从未使用过 tfs2svn，但我在 tfs2svn 项目页面中找到了[屏幕截图](http://sourceforge.net/projects/tfs2svn/)，并且该程序具有非常突出的“SVN 目标设置”部分和“SVN 存储库”字段。虽然它是一个 URL，但它应该是一个很好的提示，可以很好地提示 repo 的位置。

# javascript - HTML5 JQuery Mobile - iOS 抖动必填字段

> ID：16065074
> 
> 赞同：0
> 
> 时间：2013-04-17T16:12:01.097
> 
> 标签：javascript, ios, html, jquery-mobile, user-interface

我在屏幕上有一些用户需要输入的字段。当用户没有输入值时，我如何摇动这些必填字段？

我正在为 iOS 混合应用程序使用 JQuery Mobile。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:42:16.570

当用户提交表单时，您可以检查必填字段并使用 JQuery 摇动动画来摇动它们。

```
// this event is fired when form is submitted
$("#form_id").submit(function () {

    var name = $("#form_id #name_input").val();

    if (!(name)) {
        $("#form_id #name_input").effect("shake", { times:3 }, 300);
    } else {
        // form input is valid, do whatever you want
    }

    // you might need to return false to prevent default submit actions
    return false;
} 
```

Jquery 文档：[http ://docs.jquery.com/UI/Effects/Shake](http://docs.jquery.com/UI/Effects/Shake)

# ember.js - Ember.js：在 hasMany 关系中显示项目

> ID：16065075
> 
> 赞同：1
> 
> 时间：2013-04-17T16:12:04.503
> 
> 标签：ember.js, ember-data, ember-router

鉴于这些模型：

```
App.TransportDocument = DS.Model.extend
  number: DS.attr 'string'
  date: DS.attr 'string'
  printable_url: DS.attr 'string'
  transport_document_rows: DS.hasMany('App.TransportDocumentRow')

App.TransportDocumentRow = DS.Model.extend
  product_name: DS.attr 'string'
  quantity: DS.attr 'number'
  measure: DS.attr 'string'
  transport_document: DS.belongsTo('App.TransportDocument') 
```

这是我的路线：

```
App.TransportDocumentsRoute = Ember.Route.extend
  model: -> App.TransportDocument.find()

App.TransportDocumentRoute = Ember.Route.extend
  model: (params)-> App.TransportDocument.find(params.transport_document_id)

App.TransportDocumentRowRoute = Ember.Route.extend
  model: -> App.TransportDocumentRow.find() 
```

我有一个车把模板：

```
{{#each transport_document in controller}}
  td_id: {{transport_document.id}}
  {{#each transport_document_row in transport_document.transport_document_rows}}
    row_id: {{id}}
  {{/each}}
{{/each}} 
```

我希望我的结果是：

```
td_id: 1 row_id: 1 row_id: 2 row_id: 3
td_id: 2 row_id: 3 row_id: 4 row_id: 5
td_id: 3 row_id: 8 row_id: 7 row_id: 6 
```

但是是：

```
td_id: 1 row_id: row_id: row_id:
td_id: 2 row_id: row_id: row_id:
td_id: 3 row_id: row_id: row_id: 
```

这是我的服务器对 /transport_documents 的响应

```
{"transport_documents":
  [
    {"id":1,"number":"11","date":"17/04/2013","cause":"Conto lavorazione","transport_document_row_ids":[3,2,1],"transport_document_rows":    
      [
        {"transport_document_row":{"id":3,"transport_document_id":1,"product_name":"suola puzzle verde","quantity":"1","measure":"pz","}},
        {"transport_document_row":{"id":2,"transport_document_id":1,"product_name":"lacci rossi","quantity":"2","measure":"pz"}},
        {"transport_document_row":{"id":1,"transport_document_id":1,"product_name":"Rotolo di tela","quantity":"50","measure":"m"}}
      ]},
    {"id":2,"number":"2","date":"18/04/2013","cause":"Conto lavorazione","transport_document_row_ids":[6,5,4],"transport_document_rows":
      [
        {"transport_document_row":{"id":6,"transport_document_id":2,"product_name":"suola puzzle verde","quantity":"1","measure":"pz"}},
        {"transport_document_row":{"id":5,"transport_document_id":2,"product_name":"lacci rossi","quantity":"2","measure":"pz"}},
        {"transport_document_row":{"id":4,"transport_document_id":2,"product_name":"Rotolo di tela","quantity":"50","measure":"m",}}
      ]},
    {"id":3,"number":"3","date":"19/04/2013","cause":"Conto lavorazione","transport_document_row_ids":[9,8,7],"transport_document_rows":
      [
        {"transport_document_row":{"id":9,"transport_document_id":3,"product_name":"suola puzzle verde","quantity":"1","measure":"pz"}},
        {"transport_document_row":{"id":8,"transport_document_id":3,"product_name":"lacci rossi","quantity":"2","measure":"pz"}},
        {"transport_document_row":{"id":7,"transport_document_id":3,"product_name":"Rotolo di tela","quantity":"50","measure":"m"}}]} 
```

我想我在路线上做错了（我在哪里定义查询以查找该文档的所有行？）但我不确定。在指南中找不到类似的东西

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T19:06:00.867

按照惯例，默认代码 in[`Route#serialize`](http://emberjs.com/api/classes/Ember.Route.html#method_serialize)将返回一个包含模型 id 的对象，但是属性名称不是`id`，而是模型名称和 id 的组合，在您的情况下，它应该是`transport_document_id`。

该`serialize`方法返回的对象将作为参数传递给[`Route#model`](http://emberjs.com/api/classes/Ember.Route.html#method_model). [这在路由指南](http://emberjs.com/guides/routing/specifying-a-routes-model/#toc_dynamic-models)中也有说明。

您的路线应该类似于以下内容：

```
App.TransportDocumentRoute = Ember.Route.extend
  model: (params)-> 
    App.TransportDocument.find(params.transport_document_id) 
```

或者您可以覆盖`serialize`您的路线以提供不同的参数名称。[您可以在此处](https://stackoverflow.com/questions/15925953/ember-router-how-to-use-transitionto/15938988#15938988)找到序列化的不同实现示例。

* * *

至于查询，可以类似下面的过滤：

```
App.TransportDocumentRowRoute = Ember.Route.extend
  model: (params) -> App.store.filter App.TransportDocumentRow, (row) ->
    # might have to implement Route#serialize to also provide the 
    # transport_document_id property in this route
    row.get 'transport_document_id' == params.transport_document_id 
```

但是，这只会过滤您存储的记录。如果尚未获取行记录，您还必须触发 GET 来获取它们。

顺便说一句，对不起，如果语法不是 100%。我真的不会说咖啡:)

# php - 根据发布日期在 RSS 提要中提取项目

> ID：16065076
> 
> 赞同：0
> 
> 时间：2013-04-17T16:12:05.387
> 
> 标签：php, rss

我正在从 BBC 体育网站提取 RSS 源，该网站显示如下项目：

```
<item> 
  <title>VIDEO: Warnock on why he left Leeds</title>  
  <description>Dan Walker is joined for this week's Focus Forum by Neil Warnock, who discusses his departure from Leeds United earlier this month.</description>  
  <link>http://www.bbc.co.uk/sport/0/football/22136090</link>  
  <guid isPermaLink="false">http://www.bbc.co.uk/sport/0/football/22136090</guid>  
  <pubDate>Tue, 16 Apr 2013 08:27:55 GMT</pubDate>  
  <media:thumbnail width="66" height="49" url="http://news.bbcimg.co.uk/media/images/66985000/png/_66985898_warnock.png"/>  
  <media:thumbnail width="144" height="81" url="http://news.bbcimg.co.uk/media/images/66985000/png/_66985900_warnock.png"/> 
</item> 
```

我只想拉7天前已经发布的项目。到目前为止，我有：

```
<?php
  $cnt=0;
foreach($rss->channel->item as $item){
    if ($cnt==100) {
      break;
    }
foreach($rss->entry as $item) {
   if ($item->published) > "") {
  print_r($item);
   }
?> 
```

对第二次 foreach 非常不确定，逐页搜索此网站以找到答案，但没有运气！

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:24:04.903

您应该将 RSS 提要中的值转换为 DateTime 对象，然后使用比较器

在这里查看示例#2：http: [//php.net/manual/en/datetime.diff.php](http://php.net/manual/en/datetime.diff.php)

# compilation - 从 SalesForce 企业 WSDL 构建 WSC jar 文件的问题

> ID：16065077
> 
> 赞同：0
> 
> 时间：2013-04-17T16:12:07.070
> 
> 标签：compilation, wsdl, salesforce, wsc

如[这些说明](http://wiki.developerforce.com/page/Introduction_to_the_Force.com_Web_Services_Connector)中所述，我下载了我的组织的`enterprise.wsdl`文件，`wsc-23.jar`从[Web 服务连接器下载页面下载](http://code.google.com/p/sfdc-wsc/downloads/list)，并从包含两个下载文件的目录中运行以下命令：

```
java -classpath wsc-23.jar com.sforce.ws.tools.wsdlc enterprise.wsdl enterprise.jar 
```

这产生了这个输出：

```
[WSC23][wsdlc.run:348]Created temp dir: C:\Users\myName\AppData\Local\Temp\wsd
lc-temp-215798849-dir
[WSC23][wsdlc.<init>:110]Generating Java files from schema ...
[WSC23][wsdlc.<init>:110]Generated 290 java files.
[WSC23][wsdlc.compileTypes:298]Compiling to target default...
cannot find symbol
  symbol:   class RecordType
  location: package com.sforce.soap.enterprise.sobject
cannot find symbol
  symbol:   class RecordType
  location: package com.sforce.soap.enterprise.sobject
cannot find symbol
  symbol:   class RecordType
  location: package com.sforce.soap.enterprise.sobject
cannot find symbol
  symbol:   class RecordType
  location: package com.sforce.soap.enterprise.sobject
cannot find symbol
  symbol:   class RecordType
  location: package com.sforce.soap.enterprise.sobject
Error: Compilation failed 
```

为什么类`RecordType`导致编译失败？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T18:24:10.980

作为我们在上面评论中讨论的问题的解决方法，尝试手动将`RecordType`复杂类型添加到您的 WSDL。这是它的样子：

```
<complexType name="RecordType">
    <complexContent>
        <extension base="ens:sObject">
            <sequence>
            <element name="BusinessProcessId" nillable="true" minOccurs="0" type="tns:ID"/>
            <element name="CreatedBy" nillable="true" minOccurs="0" type="ens:User"/>
            <element name="CreatedById" nillable="true" minOccurs="0" type="tns:ID"/>
            <element name="CreatedDate" nillable="true" minOccurs="0" type="xsd:dateTime"/>
            <element name="Description" nillable="true" minOccurs="0" type="xsd:string"/>
            <element name="DeveloperName" nillable="true" minOccurs="0" type="xsd:string"/>
            <element name="IsActive" nillable="true" minOccurs="0" type="xsd:boolean"/>
            <element name="IsPersonType" nillable="true" minOccurs="0" type="xsd:boolean"/>
            <element name="LastModifiedBy" nillable="true" minOccurs="0" type="ens:User"/>
            <element name="LastModifiedById" nillable="true" minOccurs="0" type="tns:ID"/>
            <element name="LastModifiedDate" nillable="true" minOccurs="0" type="xsd:dateTime"/>
            <element name="Localization" nillable="true" minOccurs="0" type="tns:QueryResult"/>
            <element name="Name" nillable="true" minOccurs="0" type="xsd:string"/>
            <element name="NamespacePrefix" nillable="true" minOccurs="0" type="xsd:string"/>
            <element name="SobjectType" nillable="true" minOccurs="0" type="xsd:string"/>
            <element name="SystemModstamp" nillable="true" minOccurs="0" type="xsd:dateTime"/>
            </sequence>
        </extension>
    </complexContent>
</complexType> 
```

正如我上面提到的，这听起来像是 WSDL 生成中的一个错误，所以我建议也向 SFDC Support 提交一张票。

# .net - 并行任务不等待

> ID：16065083
> 
> 赞同：0
> 
> 时间：2013-04-17T16:12:35.193
> 
> 标签：.net, .net-4.0, task-parallel-library

我正在尝试使用 .NET 4.0 任务并行库，但在任务等待方面遇到了一些问题。基本上，我想遍历一个列表，并创建一个任务来为每个项目调用一个 web 服务方法，并行执行它们，然后等待所有任务完成。

我已经尝试过 WaitAll 以及 Wait for all tasks one-by-one 模式，但似乎都不起作用。Web 服务可能都被并行触发，但它似乎并没有等待 Web 服务响应，所以任务跳过等待并完成。

我在这里缺少什么吗？

```
foreach (Item currentItem in ItemList)
{

 // create task for webservice call.
 Task<Item> itemTask = Task.Factory.StartNew(() =>
        {
          Item result = Utilities.UpdateItem(currentItem);
          return result;

        });

        // add to the task list.
        taskList.Add(itemTask);

}

// create task array
Task[] taskArray = taskList.ToArray();
//wait for tasks to complete
Task.WaitAll(taskArray); 
```

我还尝试了以下方法，作为 WaitAll 的替代方法

```
// wait for all tasks, one-by-one pattern
while (taskList.Count > 0)
{
    Task<Item>[] tasks = taskList.ToArray();
    int index = Task.WaitAny(tasks);

    var result = tasks[index].Result;

    taskList.RemoveAt(index);
} 
```

对静态方法的调用，基本上是基于修改对象并返回它`Utilities.UpdateItem`的顺序 Web 服务调用构建结果。`Item`我发现所有任务都排队等候，然后我期望等待 Web 服务调用需要相当长的时间，在调用返回之前，这些任务似乎相对较快地完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:44:18.170

我已经针对我的网络服务运行了您的代码，但我无法重现*“任务跳过等待并完成”*

它正在等待所有 3 个等待点的完成（编辑前还有更多），单独和组合尝试过：

*   `Task.WaitAll(taskArray);`
*   `int index = Task.WaitAny(tasks)`;
*   `var result = tasks[index].Result;`

# android - 未经请求的用户登录 Facebook for Android SDK

> ID：16065102
> 
> 赞同：1
> 
> 时间：2013-04-17T16:13:25.563
> 
> 标签：android, facebook-android-sdk

可观察到的行为如下：

*   打开身份验证活动
*   使用 facebook sdk 按钮登录
*   注销（关闭会话）
*   杀死应用程序
*   打开应用
*   再次打开身份验证活动
*   Facebook 自动登录用户，只需打开活动

一些代码 - 来自身份验证活动：

```
 // Facebook callback
    private Session.StatusCallback callback = new Session.StatusCallback() {
        @Override
        public void call(Session session, SessionState state, Exception exception) {
            onSessionStateChange(session, state, exception);
        }
    };
    // Facebook Helper
    private UiLifecycleHelper uiHelper;
    ...
    protected void onCreate(Bundle savedInstanceState) {
    ...
        fbAuthBtn = (LoginButton) findViewById(R.id.fbAuthButton);
        fbAuthBtn.setApplicationId(getString(R.string.fb_app_id));

        uiHelper = new UiLifecycleHelper(this, callback);
        uiHelper.onCreate(savedInstanceState);
    ...
    }
    ...
    /**
     * Facebook session state changed
    */
    public void onSessionStateChange(Session session, SessionState state, Exception exception) {
      if (state.isOpened()) {
        // Logged In
        if (User.getInstance().authenticationType != UserAuthenticationMethod.FACEBOOK) {
            showProgress();

            FacebookAuthenticator fbAuth = new FacebookAuthenticator(this, handlerFacebook);
            fbAuth.authenticate();
            }
       } else if (state.isClosed()) {
        // Logged Out
        User.getInstance().logout();
       }
    } 
```

我实现注销如下：

```
public void logout() {
    ...
    // Logout Facebook
    Session fbSession = Session.getActiveSession();
    if (fbSession != null) {
        fbSession.close();
    }
    ...
} 
```

那么，如何使我的注销永久化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:56:31.893

我不知道“永久”到底是什么意思，但就我而言，我发现这五行代码运行良好：

```
Session session = Session.getActiveSession();
if (session != null){
    session.closeAndClearTokenInformation();
    Session.setActiveSession(null)
} 
```

closeAndClearTokenInformation *()*方法清除与 Facebook 会话相关的任何持久令牌缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T16:04:03.763

知道了！因为我正在登录，在与注销不同的活动中，如果我从未打开我登录的活动，则当我注销时，facebook Session 为空。这意味着注销代码没有运行（因为 fbSession ==null)，因此会话保持打开状态。

解决方案是在您需要恢复会话状态时使用 UiLifecycleHelper。

# javascript - NaN 显然是一个数字，或者是吗？

> ID：16065108
> 
> 赞同：0
> 
> 时间：2013-04-17T16:13:54.953
> 
> 标签：javascript, nan

我这里有点麻烦。我检查以确保我的变量只用数字定义，但代码仍然不是数字返回。有人知道我在做什么错吗？

下面的代码：

```
//declare vars and/or constants
var endString = "Total cost per night is $";
var viewCost;
var discount;

//input vars
pplCount = prompt("How many people will be staying?");
discYes = prompt("Do you have an AAA discount?");
viewYes = prompt("Do you want a room with a view?");

//if variables

if(pplCount === "1" || pplCount === "2" && discYes === "Yes" && viewYes === "Yes") {
discount = 50 * 0.15;
roomCost = 50;
roomCost = +roomCost - discount + viewCost;
viewCost = (+roomCost * 0.10);
document.write(endString + roomCost);
}else if(pplCount === "3" || pplCount === "4" && discYes === "Yes" && viewYes === "Yes") {
discount = 60 * 0.10;
roomCost = 60;
roomCost = roomCost - discount + viewCost;
viewCost = (roomCost * 0.10);
document.write(endString + roomCost);
}
else if(pplCount === "5" || pplCount === "6" && discYes === "Yes" && viewYes === "Yes") {
discount = 70 * 0.05;
roomCost = 70;
roomCost = roomCost - discount + viewCost;
viewCost = (roomCost * 0.10);
document.write(endString + roomCost);
}

else if(pplCount === "1" || pplCount === "2" && discYes === "No" && viewYes === "Yes") {
discount = 50 * 0.15;
roomCost = 50;
roomCost = roomCost + viewCost;
viewCost = (roomCost * 0.10);
document.write(endString + roomCost);
}
else if(pplCount === "3" || pplCount === "4" && discYes === "No" && viewYes === "Yes") {
discount = 60 * 0.10;
roomCost = 60;
roomCost = roomCost + viewCost;
viewCost = (roomCost * 0.10);
document.write(endString + roomCost);
}
else if(pplCount === "5" || pplCount === "6" && discYes === "No" && viewYes === "Yes") {
discount = 70 * 0.05;
roomCost = 70;
roomCost = roomCost + viewCost;
viewCost = (roomCost * 0.10);
document.write(endString + roomCost);
}

else if(pplCount === "1" || pplCount === "2" && discYes === "No" && viewYes === "No") {
discount = 50 * 0.15;
roomCost = 50;
viewCost = (roomCost * 0.10);
document.write(endString + roomCost);
}
else if(pplCount === "3" || pplCount === "4" && discYes === "No" && viewYes === "No") {
discount = 60 * 0.10;
roomCost = 60;
viewCost = (roomCost * 0.10);
document.write(endString + roomCost);
}
else if(pplCount === "5" || pplCount === "6" && discYes === "No" && viewYes === "No") {
discount = 70 * 0.05;
roomCost = 70;
viewCost = (roomCost * 0.10);
document.write(endString + roomCost);
}

else if(pplCount === "1" || pplCount === "2" && discYes === "Yes" && viewYes === "No") {
discount = 50 * 0.15;
roomCost = 50;
roomCost = roomCost - discount;
viewCost = (roomCost * 0.10);
document.write(endString + roomCost);
}
else if(pplCount === "3" || pplCount === "4" && discYes === "Yes" && viewYes === "No") {
discount = 60 * 0.10;
roomCost = 60;
roomCost = roomCost - discount;
viewCost = (roomCost * 0.10);
document.write(endString + roomCost);
}
else if(pplCount === "5" || pplCount === "6" && discYes === "Yes" && viewYes === "No") {
discount = 70 * 0.05;
roomCost = 70;
roomCost = roomCost - discount;
viewCost = (roomCost * 0.10);
document.write(endString + roomCost);
} 
```

是因为我定义了 roomCost 两次吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T16:16:02.513

`NaN`是当`Number`操作给出无效结果时得到的结果（不是数字）

喜欢：

```
5 - "a"
5 + NaN
parseInt("a", 10)
5 + undefined 
```

`NaN`从某种意义上说是*有毒*的，任何`NaN`作为操作数的操作也会返回`NaN`。找出你的坏操作在哪里。

看了一眼你的代码，我发现你使用的是字符串而不是数字。用于`parseInt()`将字符串转换为正确的数字。确保验证您的输入，如果`parseInt`返回`NaN`给出错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T16:19:25.150

忽略你在这里做的其他顽皮的东西，你`viewCost`在几个地方使用而没有先定义它。（这*不是一个数字*。）

将前几行更改为以下内容可以解决问题：

```
//declare vars and/or constants
var endString = "Total cost per night is $";
var viewCost = 0;
var discount = 0; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T16:18:16.667

```
var viewCost; // <---defined, but not assigned to

roomCost = +roomCost - discount + viewCost;
                                  ^^^^^^^^ 
```

在您第一次运行时，您只声明了变量，但尚未分配给它：

# c# - 将 C 结构移植到 C#

> ID：16065110
> 
> 赞同：2
> 
> 时间：2013-04-17T16:14:06.037
> 
> 标签：c#, c, pinvoke

我正在将 C 代码移植到 C#，但我有一些疑问。

考虑这个结构：

```
typedef struct
{
  uint32_t       w;
  uint32_t       h;
  uint32_t       f_cc;
  uint32_t       st;
  unsigned char *pl[4];
  int32_t        strd[4];
  void         (*done)(void *thisobj);
  void          *e_cc;
  uint32_t       rsrvd2;
  uint32_t       rsrvd3;
} f_tt; 
```

我已经这样做了，但它不起作用（可能是因为它是错误的 :-/ ）：

```
[StructLayout(LayoutKind.Sequential, Pack = 1)]
public struct f_tt
{
    public uint w;
    public uint h;
    public uint f_cc;
    public uint st;
    [MarshalAs(UnmanagedType.ByValArray, SizeConst = 4)]
    public Byte[] pl;
    [MarshalAs(UnmanagedType.ByValArray, SizeConst = 4)]
    public int[] strd;
    public delegate void done(IntPtr thisobj);
    public delegate void e_cc();
    public uint rsrvd2;
    public uint rsrvd3;
} 
```

有人可以告诉我如何做这个 ic# 吗？

```
 void         (*done)(void *thisobj);
  void          *e_cc; 
```

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T16:28:10.543

Before we come to the delegates, I suspect that you are wrong to pack the struct. It's very unusual to do so. Only do that if you find the pack `#pragma` in the C code.

The `e_cc` field is not a function pointer. It's just a void pointer. In C# that is `IntPtr`.

The `pl` member is an array of 4 pointers. I'm not quite sure what they contain, but for sure you can marshal that like this:

```
[MarshalAs(UnmanagedType.ByValArray, SizeConst = 4)]
public IntPtr[] pl; 
```

That leaves you with manual intervention to populate the array, or read its contents. It's possible that could be done by the marshaller, but without knowing the semantics of the interop, I can't say how to do that.

As for `done`, you should declare the delegate outside the struct. Like this:

```
[UnmanagedFunctionPointer(CallingConvention.Cdecl)]
public delegate void doneDelegate(IntPtr thisobj); 
```

Here I am assuming that the calling convention is `cdecl` since there's nothing in the C code to say otherwise.

Putting it all together you have:

```
[UnmanagedFunctionPointer(CallingConvention.Cdecl)]
public delegate void doneFunc(IntPtr thisobj);

[StructLayout(LayoutKind.Sequential)]
public struct f_tt
{
    public uint w;
    public uint h;
    public uint f_cc;
    public uint st;
    [MarshalAs(UnmanagedType.ByValArray, SizeConst = 4)]
    public IntPtr[] pl;
    [MarshalAs(UnmanagedType.ByValArray, SizeConst = 4)]
    public int[] strd;
    public doneDelegate done;
    public IntPtr e_cc;
    public uint rsrvd2;
    public uint rsrvd3;
} 
```

# ruby - 如果数组未正确定义，为什么 ruby irb 变得不可用

> ID：16065114
> 
> 赞同：-2
> 
> 时间：2013-04-17T16:14:27.353
> 
> 标签：ruby, irb

如果数组定义不正确，似乎会使 irb 无法使用。或者是吗？

请参见下面的示例：

```
irb(main):003:0> set = ['a]
irb(main):004:1'
irb(main):005:1' g
irb(main):006:1' q
irb(main):007:1' '
irb(main):008:1> set
irb(main):009:1> puts 'hello'
irb(main):010:1>
irb(main):011:1*
irb(main):012:1* '
irb(main):013:1' '
irb(main):014:1> '
irb(main):015:1' '
irb(main):016:1> "
irb(main):017:1" "
irb(main):018:1> puts "hello"
irb(main):019:1> ^C
irb(main):019:0>
irb(main):020:0*
irb(main):021:0* ^C
irb(main):021:0> exit 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:16:13.493

发生这种情况是因为您忘记了开头的第一个引号。它将将该报价添加到下一个输入中。按下`ctrl-C`并重试。那应该解决它。

如果这没有帮助，试试`ctrl-D`这将向 irb 发送 EOF。见：[http ://en.wikipedia.org/wiki/End-of-file](http://en.wikipedia.org/wiki/End-of-file)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T16:17:44.013

当您没有关闭单引号字符串时，`irb`开始将后面的所有内容（*包括 close-array`]`*）视为该字符串的一部分。

要返回有效的提示，您需要

1.  关闭字符串和数组 - 即匹配`'`然后`]`; 或者
2.  按 Ctrl-C，这会使您脱离上下文

看到提示中的最后一个数字在`1`您的格式错误的字符串之后更改为`0`Ctrl-C 之后？这就是嵌套深度。如果它为 0，那么您将回到 itb 的主要上下文中。

# symfony - 获取 config.yml 的当前用户

> ID：16065115
> 
> 赞同：1
> 
> 时间：2013-04-17T16:14:39.940
> 
> 标签：symfony, swiftmailer

我正在做一个项目，我们希望 sendmail 将所有电子邮件发送给当前登录的用户。我知道我们可以在代码中做到这一点，但它有点难看。

我想做的是在 config_xxx.yml 中引用当前登录的用户，即

```
快速邮件：
    交付地址：security.context.user
```

现在当然这不起作用，但我想知道是否有办法做到这一点。

谢谢你的帮助，Q

# php - "之间的区别 当我开始学习 php 时，我了解到当我想调用 php 时，我需要将 php 代码放在这段代码之间，<?php ?>但我也看到了这一点，<? ?>所以我坚持使用第二个选项。 它们两者之间有什么区别吗，因为最近我看到在一台机器上，第二个选项不起作用，而第一个选项起作用，这让我很困惑。 <

> ID：16065116
> 
> 赞同：-2
> 
> 时间：2013-04-17T16:14:45.190
> 
> 标签：php

当我开始学习 php 时，我了解到当我想调用 php 时，我需要将 php 代码放在这段代码之间，`<?php ?>`但我也看到了这一点，`<? ?>`所以我坚持使用第二个选项。

它们两者之间有什么区别吗，因为最近我看到在一台机器上，第二个选项不起作用，而第一个选项起作用，这让我很困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:18:30.400

`<?`不鼓励使用短标签，因为它需要启用特定的 php.ini 设置。我遇到了一些`<?`禁用的共享服务器。因此，您应该尝试`<?php`改用。

您还可以[查看文档](http://php.net/manual/en/language.basic-syntax.phptags.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T16:18:38.803

除了需要的配置设置之外，没有其他区别

在此处查看详细信息： [http ://www.php.net/manual/en/language.basic-syntax.phptags.php](http://www.php.net/manual/en/language.basic-syntax.phptags.php)

# javascript - knockout.js 是否支持 html 元素之间的绑定？

> ID：16065117
> 
> 赞同：0
> 
> 时间：2013-04-17T16:14:47.457
> 
> 标签：javascript, knockout.js

knockout.js 是否支持在没有视图模型的情况下绑定 bettwen html 元素，例如 Silverlight/Wpf 元素绑定？

示例：我有一个表单，我想根据一个字段（复选框）的值显示/隐藏字段。

有没有一种简单的方法可以让淘汰赛或纯javascript更直接？

我正在尝试实现一种基于数据属性的可重用方式，但它开始变得繁琐，我开始想知道淘汰赛是否是使其可重用的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:28:22.417

没有 ViewModel 就无法做到这一点，但可以使用计算变量做到这一点：

```
//In your view model
this.showFormElement = ko.computed(function(){
    if(this.checkboxValueiswhatIwant()){
        return true;
    }
    return false;
}, this); 
```

然后在你的html中：

```
<form [id, classes, etc..]>
    <input type="checkbox" data-bind="checked: checkboxValueiswhatIwant" />
    <input type="input" data-bind="visible: showFormElement" />
</form> 
```

出于普遍的好奇，您如何在没有视图模型的情况下使用淘汰赛？

如果你以某种方式使用它，为什么？

# c# - 在 SignalR 和 Rx 中管理共享退订

> ID：16065121
> 
> 赞同：1
> 
> 时间：2013-04-17T16:15:12.603
> 
> 标签：c#, signalr, system.reactive, signalr.client

在我们的客户端应用程序中，我们通过 SignalR.Client 发送和接收实时事件。从服务器订阅事件是通过 SignalR 完成的。在大多数情况下，订阅事件通过 SignalR 客户端发送到 SignalR 集线器，然后使用响应式扩展，将响应此类事件的应用程序部分订阅正确的 IObservable。

然而，我们现在有一些情况，同一个 observable 共享多个观察者。处理对可观察对象的每个内部订阅都很好，但我想在处理最后一个观察者后取消订阅服务器上的给定事件。我曾考虑为所有这些订阅使用单独的连接，但在这个特定的网络环境中，在连接变为活动状态之前存在相当长的延迟。

例如，客户端应用程序具有组件 A、B 和 C，它们都希望附加到从服务器接收的 SomeEvent。一旦其中任何一个变为活动状态，如果它是第一个活动的，则应用程序应订阅远程 SignalR 集线器上的事件。当其中任何一个变为活动状态时，它应该使用 Rx 在内部订阅我们已经实现的可观察集合中的相关可观察对象（如果不存在则添加一个）。当 A、B 或 C 变为非活动状态时，它显然应该处置其 IDisposable 订阅。*如果*它是剩下的最后一个，它*也*应该从 SignalR 集线器服务器退订。

 ***Tl;dr**：我想做一个托管取消订阅，看看离开的观察者是否是最后一个，并且此时仅在服务器集线器上取消订阅。有没有一种有效的方法来计算 IObservable 的“活”观察者的数量？或者其他更好的方法来实现所有这些？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T00:26:08.883

`.Publish().RefCount()`完全符合您的描述。只要确保对每个订阅都使用相同的 observable，否则 ref 计数将不起作用。*

# javascript - FireBreath：如何安全地向用户显示确认对话框？

> ID：16065131
> 
> 赞同：0
> 
> 时间：2013-04-17T16:15:36.950
> 
> 标签：javascript, c++, browser, npapi, firebreath

我正在开发一个 FireBreath NPAPI 插件，在某些情况下它必须搜索用户的文件系统。

为了通知用户并避免恶意使用插件，我想向用户显示一个确认对话框，允许他接受或拒绝任务。

到目前为止，我设法显示了经典的 Javascript`window.confirm`对话框，但它远非安全：

```
bool MyPlugin::confirm( std::string msg ) {
    FB::DOM::WindowPtr window = m_host->getDOMWindow();
    FB::JSObjectPtr obj = window->getProperty<FB::JSObjectPtr>("window");
    return obj->Invoke("confirm", FB::variant_list_of( msg )).convert_cast<bool>();
} 
```

恶意用户可以重载该`window.confirm`函数以始终返回 true。我想到的一种解决方案是检查该功能是否确实是浏览器的原生功能：

```
// Make sure the function is valid native function and not a hack 
FB::variant f = obj->GetProperty("confirm");
FB::JSObjectPtr fPtr = f.convert_cast<FB::JSObjectPtr>();
std::string fType = fPtr->Invoke("toString", FB::variant_list_of( msg )).convert_cast<std::string>();
// Look for [native code] in fType 
```

但再次，恶意用户可能会超载`window.confirm.toString`和/或`Function.prototype.toString()`以伪造响应。（所以这个解决方案：[Detect if function is native to browser](https://stackoverflow.com/questions/6598945/detect-if-function-is-native-to-browser) is not really safe）

因此我想问你，你知道任何跨平台（OSX、Linux 和 Windows）的方式来显示一个不能以任何方式被黑客入侵的确认对话框吗？**或者**是否可以通过 FireBreath 直接访问的本机功能`window.confirm`？

我知道 QT 或 wxWidgets 是一种选择，但这确实是我最后的选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T23:22:53.130

不，几乎没有任何方法可以以跨平台的方式安全地做到这一点。可能我会在每个平台上弹出一个系统确认对话框。

（您可能需要在单独的线程上执行此操作，因为在大多数浏览器中阻塞主线程是插件终止的理由）

我可以给您的最接近示例的是我用于执行文件/文件夹打开对话框的代码，[您可以在 gist 中找到该](https://gist.github.com/taxilian/1368648)代码。

# c++ - Windows Phone 8 上的 Perl

> ID：16065134
> 
> 赞同：2
> 
> 时间：2013-04-17T16:15:39.480
> 
> 标签：c++, c, perl, windows-phone-8, windows-phone

我想知道是否已经有 Windows Phone 8 端口或 Perl 实现或其他允许我在 Windows Phone 8 上运行 Perl 应用程序的东西？如果您知道 Windows RT 的类似内容，它可能也应该在这里工作。我知道这可以为 Python 完成：http: [//www.codeproject.com/Articles/515115/compiling-python-for-windows-phone-8](http://www.codeproject.com/Articles/515115/compiling-python-for-windows-phone-8)或者我认为通过 IronPython。

此外，将基于 C 的 Python 移植到确实支持本机代码的 Windows Phone 8 是多么实用。

# clojure - clojure 编译器生成的字节码中的“public static {}”是什么意思？

> ID：16065135
> 
> 赞同：2
> 
> 时间：2013-04-17T16:15:40.353
> 
> 标签：clojure, clojure-java-interop

当我在 clojure 中生成一个类时（通过*gen-class*），我通过*javap*检查得到以下定义：

```
public class foo.bar extends java.lang.Object implements java.io.Serializable{
    public final java.lang.Object state;
    public static {};
    public foo.bar();
    ...
} 
```

我想知道构造**public static {}**是什么意思，因为我以前从未见过这样的东西……</p>

有人可以启发我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T16:25:10.203

如果您查看 javap (with `javap -c ...`) 的完整输出，您会发现它只是 clojure 编译器在一流访问之前执行的一堆代码。通常它是稍后使用[的变量的实习，](https://github.com/clojure/clojure/blob/master/src/jvm/clojure/lang/Var.java#L162)依此类推。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T16:17:29.663

静态部分包含在静态类初始化期间（在创建类的任何实例之前）运行的代码。

想一想在 Clojure 中具有带有副作用的命名空间级代码——这些副作用会在任何人需要或使用命名空间时立即发生，即使它们实际上并未调用任何函数。这是一个可比的情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T16:22:27.950

听起来像是类上的静态初始化块。

您可以使用该块来初始化该类的所有静态变量。但是，在此之前我从未见过“公共”限定词。

在 Java 中试试这个，这样你就可以看到调用的顺序

```
public class StaticTest {

  { 
    System.out.println("Anonymous Block.");
  }

  static {
    //probably equivalent to that public {} you see on your code.
    System.out.println("Static Block.");
  }

  public StaticTest() {
     System.out.println("Constructor.");
  }

  public static void main(String[] args) {

    StaticTest test = new StaticTest() {
            {
                System.out.println("Anonymous block in instance.");
            }
    };
  }
} 
```

当您执行此操作时，它会打印以下内容：

```
> $ java StaticTest 
> Static Block. 
> Anonymous Block. 
> Constructor.
> Anonymous block in instance. 
```

# c# - 在实体框架中加载孙子

> ID：16065140
> 
> 赞同：1
> 
> 时间：2013-04-17T16:15:54.853
> 
> 标签：c#, .net, entity-framework

我有一个以下实体层次结构

```
 class ClassA {
  ICollection<ClassB> classBs { get; set; }
  }
  class ClassB {
     ClassC classC { get; set; }
     ClassD classD { get; set; }
  }
  class ClassC { 
  }
  class ClassD { 
  } 
```

我希望当我加载 classA 的实例时，所有相关的 classB 实例及其相关的 ClassC 和 classD 实例都应该被填充。在我的存储库中编写的代码类似于：

```
 context.ClassAs.Include(c => c.classBs) 
```

这将返回 classB 的所有相关实例，但 classB 有 classC 和 ClassD，它们不会被填充。我在网上查看了一些资源，但没有显示如何急切加载这种简单的层次结构。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T16:17:01.793

一种解决方案是使用`Select`仅包含您要加载的子项的子项，例如

```
context.ClassAs
       .Include(c => c.classBs.Select(c=>c.ClassC))
       .Include(c => c.classBs.Select(d=>d.ClassD)) 
```

# c# - 在商业聊天室中计算信用的正确方法是什么？

> ID：16065143
> 
> 赞同：0
> 
> 时间：2013-04-17T16:16:04.790
> 
> 标签：c#, asp.net-mvc, algorithm, signalr

我正在开发一个项目，让用户可以在私人聊天室与专家聊天。用户购买积分与专家聊天，他们将在每次聊天结束时根据他们交谈的分钟数付费。每个专家每分钟聊天都有不同的信用率。

计时器在聊天会话开始时开始计数，并定期通知用户他们在聊天室上花费的总时间和当前聊天会话的当前总积分。这些计算必须在服务器端进行并保存在数据库中。顺便说一句，专家可以暂停/恢复聊天会话。

* * *

这是一个简单的场景......
用户当前拥有：10 积分
“专家 A”需要 2 积分/每分钟

```
CurrentTime Event       Timer       Credit 
```

*   10:40 聊天开始 `00:01 min` `2credits`
*   10:41 他们在聊天 `00:02 mins` `4credits`
*   10:42 闲置专家 `00:02 mins` `4credits`（聊天暂停）
*   10:45 专家上线`00:02 mins` `4credits`（继续聊天）
*   10:46 他们在聊天 `00:03 mins` `6credits`
*   10:46 客户结束会话 `00:04 mins` `8credits`

客户将被收取 8 个学分。他还有 2 个学分。

> 聊天会话将在新的一分钟开始收费，将根据分钟进行计算，秒数将被省略。

* * *

我的问题是如何在服务器端以正确的方式为当前正在谈论的每个聊天会话进行这些计算？

我目前的做法是；

> 服务器端计时器每 15 秒计时一次，获取当前聊天会话，
> 
> 对于每个聊天会话：如果聊天会话没有暂停，则将会话的时间跨度增加 15 秒，然后计算当前会话的总积分，如果用户即将用完积分，则通知他，如果他已经运行没有信用，然后结束当前的聊天会话。将这些事务保存到数据库。更新聊天会话客户端。

但是这种方法存在一些缺陷。例如，如果聊天会话现在开始并且计时器在 2 秒内滴答作响，那么它会在当前聊天会话的总时间跨度上增加 15 秒，因此它会计算错误。如果我减少计时器的滴答间隔，那么当前可能有 500 个正在交谈的聊天会话，并且计时器滴答间隔将不足以在 10 秒内计算每个聊天会话的信用。

有没有更好的方法来处理这个？欢迎所有建议。

顺便说一句，我正在使用 Asp.net MVC4 C# 和 Signalr 来处理实时聊天。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:35:01.177

我认为你不能批量执行你的操作是很重要的。正如您所说，您会遇到如何充电的精确度问题。而且我相信您已经意识到快速扩展成为一个问题。让它全部由事件驱动要好得多。

正如我在评论中建议的那样，其中一部分需要简单地计算准确使用的时间。这很容易 - 存储开始时间（或专家的开始时间，取决于您的偏好），然后从结束时间中减去它，并相应地计费。

这可能带来的问题：

*   *结束时间是什么时候？* 那是聊天程序通过会话超时、专家结束或用户结束关闭的时间。根据您的计费结构，我建议在这种情况下使结束时间也包括会话暂停。为了计算成本，可以离散地计算每个开始-暂停迭代（尽管理想情况下，它们会在计费摘要中组合在一起）。您可以在每次发送消息时检查用户是否仍有信用。
*   *空闲时间呢？我们如何解释用户在消息之间的空闲时间超过他们的时间？* 应该没关系，真的。下次发送消息时，您可以告诉他们他们已过期。他们可能会因为花了几分钟输入一条不会发送的消息而感到恼火，但有一些方法可以避免这种情况。
    *   如果您每次发送消息时都检查帐单，则很容易注意到它们何时用尽，并发出警告。
    *   这是一种完全不同的计费方式：一旦会话开始，您的服务器可以根据费率和余额计算会话可以持续多长时间。除非在此之前有停止或暂停事件，否则您确切知道他们何时会用完信用，并且如果从暂停中恢复，您可以根据剩余时间重新计算。

我实际上建议你做的是基于最后一个要点。在会话开始或恢复时，根据信用计算会话何时到期。将会话保持在按到期时间排序的有序列表中。然后，您的服务器端很容易 - 检查时间是否在任何会话到期时间之后。如果是，则推送结束通知。

在重新阅读您的要求时，我的想法可能对您的需要过于被动。一个问题是所有计算都在服务器端有多重要？我会提倡客户端保持会话计时器和成本计算器运行，这样用户就可以在没有客户端/服务器流量的情况下看到它。不过，服务器本身仍将负责计费方面。

否则，如果您必须推送时间和余额通知，我仍然会在个人基础上完成，而不是批量操作。您可以更新每条消息并为每次聊天添加计时器。每次有消息时重置计时器，否则，当计时器触发时，发送时间和余额更新。或者，如果您没有那么多计时器的资源，请对排序列表执行相同的想法 - 每次有活动时更新列表，并在最后一次活动时间 + 15 秒时对其进行排序。列表顶部的那些可能需要推送时间和余额更新。

无论如何，我会专注于发送时间和平衡每条消息的想法，并找到一种方法让它从那里开始工作。

# java - Java Scanner vs Matcher - 正则表达式，Matcher 有效，Scanner 无效

> ID：16065144
> 
> 赞同：8
> 
> 时间：2013-04-17T16:16:05.430
> 
> 标签：java, regex, matcher

为什么第一个区块有效，而第二个区块无效？

```
int numberOfDigits = 2;
Pattern p = Pattern.compile("[01]{"+numberOfDigits+"}");
Matcher m = p.matcher("101100101011010011111000");
while(m.find()){
    System.out.println(m.group());
} 
```

第 2 座

```
Scanner scannerSegment = new Scanner("101100101011010011111000");
   while(scannerSegment.hasNext(p)){
    String segment = scannerSegment.next(p);
        System.out.println(segment);

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T16:39:32.920

`Scanner`不是使用其`hasNext(Pattern pattern)`方法检索模式的适当实用程序。它将检查**下一个完整令牌**是否具有请求的模式。

[Java API](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#hasNext%28%29)是最好的文档。

部分摘录：

```
hasNext() : Returns true if the next complete token matches the specified 
pattern. A complete token is prefixed and postfixed by input that matches 
the delimiter pattern.` 
```

因此，如果您将输入更改为由空格或任何其他分隔符分隔（在定义对象后必须设置其他分隔符`Scanner`），它将起作用。所以这应该有效（对于当前模式）：

```
Scanner scannerSegment = new Scanner("10 11 00 10 10 11 01 00 11 11 10 00"); 
```

即使这样也可以（对于当前模式）：

```
Scanner scannerSegment = new Scanner("10,11,00,10,10,11,01,00,11,11,10,00");
scannerSegment.useDelimiter(","); 
```

编辑：[扫描器](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html)使用分隔符模式将其输入分解为标记，默认情况下匹配空格。

# android - Android 4.0 及更高版本 OMX-IL 硬件解码来自 Native 端

> ID：16065147
> 
> 赞同：0
> 
> 时间：2013-04-17T16:16:09.590
> 
> 标签：android, stagefright

是否可以在 Android 4.1 及更高版本中使用 Android 本机代码和 OMX-IL（甚至可能使用 stagefright）进行硬件解码（也许您会建议创建 OMXCodec 的实例）。但我想从客户端应用程序完成我自己的表面分配和处理。OMXCodec::Create 需要一个 ANativeWindow 但我想绕过它并只使用一个解码函数，在那里我将传递一个缓冲区/eglSurface 并获取解码的帧输出。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:34:40.417

在 JellyBean 中，我觉得你可以使用`MediaCodec`对象来实现帧的解码。您可以参考[http://androidxref.com/4.2.2_r1/xref/frameworks/av/cmds/stagefright/SimplePlayer.cpp#316](http://androidxref.com/4.2.2_r1/xref/frameworks/av/cmds/stagefright/SimplePlayer.cpp#316)`SimplePlayer`中的实现，它为您开发程序提供了很好的参考。

# web-applications - ehCache 在哈德逊不起作用

> ID：16065151
> 
> 赞同：0
> 
> 时间：2013-04-17T16:16:12.160
> 
> 标签：web-applications, jenkins, hudson, ehcache

我正在使用 spring mvc 和**ehCache**开发一个 java webapp 。我可以使用 tomcat 或 jetty 很好地部署它。我有 2 个 maven 项目，一个 webapp/war 和一个集成测试。我希望 hudson 作业在启动 webapp 作为集成测试生命周期的一部分后运行集成测试。

但是，当我尝试将它作为 hudson 工作的一部分启动时，我得到一个例外说

```
java.lang.NoSuchMethodError: net.sf.ehcache.Cache.getAll(Ljava/util/Collection;)Ljava/util/Map; 
```

我的集成测试 POM 具有以下功能：

```
<build>
  <plugins>
    <plugin>
      <groupId>org.codehaus.cargo</groupId>
      <artifactId>cargo-maven2-plugin</artifactId>
      <version>1.2.2</version>
      <configuration>
        <container>
          <containerId>jetty7x</containerId>
          <type>embedded</type>
        </container>
        <configuration>
          <type>standalone</type>
          <properties>
            <cargo.servlet.port>8040</cargo.servlet.port>
          </properties>
          <deployables>
            <deployable>
              <groupId>${project.groupId}</groupId>
              <artifactId>webapp</artifactId>
              <type>war</type>
              <pingURL>http://localhost:8040/context/status</pingURL>
              <properties>
                <context>context</context>
              </properties>
            </deployable>
          </deployables>
        </configuration>
      </configuration>
      <executions>
        <execution>
          <id>start-server</id>
          <phase>pre-integration-test</phase>
          <goals>
            <goal>start</goal>
          </goals>
        </execution>
        <execution>
          <id>stop-server</id>
          <phase>post-integration-test</phase>
          <goals>
            <goal>stop</goal>
          </goals>
        </execution>
      </executions>
    </plugin>
    <plugin>
      <artifactId>maven-failsafe-plugin</artifactId>
      <version>2.12</version>
      <dependencies>
        <dependency>
          <groupId>org.apache.maven.surefire</groupId>
          <artifactId>surefire-junit47</artifactId>
          <version>2.12</version>
        </dependency>
      </dependencies>
      <configuration></configuration>
      <executions>
        <execution>
          <goals>
            <goal>integration-test</goal>
          </goals>
          <configuration>
            <includes>
              <include>**/*.class</include>
            </includes>
            <skipTests>false</skipTests>
          </configuration>
        </execution>
        <execution>
          <id>verify</id>
          <goals>
            <goal>verify</goal>
          </goals>
        </execution>
      </executions>
    </plugin>
  </plugins>
</build> 
```

以及失败的代码行：

```
@Named("statGroupDto")
@Repository
@Transactional
public class CachedStatGroupDaoImpl implements StatGroupDao {
  @Inject
  public CachedStatGroupDaoImpl(@Named("cacheManager") final org.springframework.cache.CacheManager cacheManager) {
    this.cacheManager = (EhCacheCacheManager) cacheManager;
 statsGroupCacheCache =  (EhCacheCache) this.cacheManager.getCache("statsCache");
            statsGroupCache = (Cache) statsGroupCacheCache.getNativeCache();
    @Override
    public Collection<StatGroup> getAll() {
      Map<Object, Element> allElements = statsGroupCache.getAll(statsGroupCache.getKeys()); 
```

它在我的开发机器和生产环境中启动并运行良好，但是当 hudson 尝试运行集成测试时，它无法启动 Web 服务。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:34:06.520

既然 hudson 在 Jetty 中运行，我怀疑它使用了错误的类。[请参阅http://cargo.codehaus.org/Embedded+Container](http://cargo.codehaus.org/Embedded+Container)的缺点部分

# c# - 使用 javascript/jquery (jqgrid) 维护滚动条位置

> ID：16065152
> 
> 赞同：0
> 
> 时间：2013-04-17T16:16:12.823
> 
> 标签：c#, javascript, jquery, jqgrid

我在维护`scroll position`我的`jqgrid`.

这是我的程序的目标：

1.  首先，我单击该行。
2.  单击该行后，将弹出一个表单。
3.  更新记录后，用户将关闭表单。
4.  jqgrid 将重新加载。
5.  jqgrid重新加载后，会选择“最后选择的项目”

我对这些步骤没有问题 (1-5)

我的问题是，如果我有大量行，例如 500 行。它将在 jgrid 的一侧显示滚动条。

我想要做的是使用 Javascript 或 jQuery 保持滚动条的滚动位置。我该怎么做呢？

我尝试在 loadcomplete 事件中使用它

```
var scrollPosition = 0;
                scrollPosition = jQuery("#jqgrid").closest(".ui-jqgrid-bdiv").scrollTop(scrollPosition);
                jQuery("#jqgrid").closest(".ui-jqgrid-bdiv").scrollTop(scrollPosition); 
```

但它并没有给我滚动位置的值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:38:05.457

看 。[这个文件](http://jsfiddle.net/yx2aK/)基于[这篇文章](http://www.abeautifulsite.net/blog/2010/01/smoothly-scroll-to-an-element-without-a-jquery-plugin/)

```
<input type="submit" id="button"/>
<div id="div1"> </div>

$("#button").click(function() {
 $('html, body').animate({
              scrollTop: $("#div1").offset().top
 }, 2000);
 }); 
```

# c++ - 从文件中获取数据并将元素输出到表中

> ID：16065156
> 
> 赞同：1
> 
> 时间：2013-04-17T16:16:21.137
> 
> 标签：c++, visual-c++

我得到一个包含 24 个人的运动数据的数据文件。活动分为两轮。文件的前 48 行给出了第一轮的数据，后 48 行给出了第二轮的数据。该文件如下所示：

阿兹林，尼尔 2.3 6.0 5.0 6.7 7.8 5.6 8.9 7.6

巴贝奇，查尔斯 2.3 5.6 6.5 7.6 8.7 7.8 5.4 4.5

伯克斯，亚瑟 2.8 4.5 5.4 6.6 7.7 8.8 5.6 6.5

克里克，弗朗西斯 1.6 6.5 6.5 6.5 7.3 7.5 7.8 5.6

居里，玛丽 2.9 9.4 9.5 9.2 8.0 5.6 9.0 9.8

戴尔·内尔 1.0 2.3 2.3 2.3 2.3 3.4 3.4 3.4

爱因斯坦，阿尔伯特 1.5 5.0 5.0 5.0 5.0 5.0 5.0 5.0

富兰克林，罗莎琳 2.0 7.8 7.8 7.6 7.5 8.0 6.7 7.6

海森堡，维尔纳 2.2 8.2 8.1 8.0 8.5 8.6 8.3 9.0

霍夫施塔特，道格拉斯 1.8 9.3 9.0 9.2 8.4 7.8 8.0 5.6

克里格，多萝西 3.0 7.6 7.8 8.7 5.9 6.4 7.1 8.0

米德，玛格丽特 2.7 8.0 8.0 7.8 6.5 7.4 8.2 5.9

明斯基，马文 2.7 7.8 6.8 7.1 7.4 5.6 4.9 5.7

牛顿，艾萨克 2.3 9.0 9.1 9.0 9.2 9.2 9.0 8.9

奥尔森，凯瑟琳 2.6 7.8 9.1 8.4 8.4 8.2 8.4 7.6

帕斯卡，布莱斯 3.0 4.5 6.4 8.0 5.6 7.5 6.5 8.0

Pylyshyn, Zenon 2.8 8.6 7.9 9.0 6.9 7.3 6.9 7.0

萨根，卡尔 2.5 7.8 9.0 8.7 8.6 4.6 7.6 8.0

薛定谔，欧文 2.7 8.0 7.8 8.0 9.0 6.7 8.7 6.5

图灵，艾伦 2.5 7.8 8.0 8.0 7.9 7.3 7.6 7.6

范艾伦，詹姆斯 2.7 6.9 7.0 7.0 7.2 6.7 7.0 8.0

冯诺依曼，约翰 3.0 7.8 8.9 9.0 8.7 9.0 7.9 9.2

沃森，詹姆斯 2.8 9.6 9.7 9.7 9.0 9.5 9.7 9.0

威姆斯芯片 2.5 7.8 7.8 7.6 7.5 7.8 8.0 6.7

阿兹林，尼尔 2.1 6.0 5.0 6.5 7.8 5.6 8.8 7.6

巴贝奇，查尔斯 2.3 5.4 6.5 7.6 8.7 7.2 5.4 5.5

伯克斯，亚瑟 2.7 4.1 5.4 5.6 7.8 8.2 5.6 6.5

克里克，弗朗西斯 1.5 7.5 6.4 6.5 7.2 7.5 7.5 6.6

居里，玛丽 2.8 9.5 9.1 9.2 8.4 5.6 9.3 9.7

戴尔内尔 2.0 3.3 3.3 3.3 2.3 3.1 3.0 4.4

爱因斯坦，阿尔伯特 2.5 5.1 5.2 5.3 5.4 5.5 5.6 5.7

富兰克林，罗莎琳 3.0 7.8 7.7 7.1 7.5 8.2 6.7 7.6

海森堡，维尔纳 2.5 8.2 8.4 8.0 8.7 8.7 8.1 9.0

霍夫施塔特，道格拉斯 2.8 9.1 9.0 9.1 8.4 6.8 8.0 6.6

克里格，多萝西 3.0 7.4 7.1 7.7 6.9 6.4 7.1 8.0

米德，玛格丽特 2.8 8.1 8.0 7.1 6.5 6.4 8.2 5.9

明斯基，马文 2.1 7.8 7.8 7.1 7.4 7.6 5.9 5.7

牛顿，艾萨克 2.3 8.0 9.0 9.0 9.2 8.2 9.0 8.9

奥尔森，凯瑟琳 2.0 6.8 9.1 8.4 8.0 8.2 8.4 7.6

帕斯卡，布莱斯 3.0 5.5 6.4 8.1 5.6 7.4 6.5 7.0

Pylyshyn, Zenon 2.7 8.6 6.9 9.0 6.5 7.3 8.9 7.0

萨根，卡尔 3.0 6.8 9.0 8.2 8.6 5.6 7.6 8.0

薛定谔，欧文 1.7 8.0 6.8 8.5 9.0 7.7 8.7 6.5

图灵，艾伦 2.4 7.7 8.1 8.2 7.3 7.3 7.6 7.6

范艾伦，詹姆斯 2.7 7.9 7.0 6.0 7.2 8.7 7.0 8.0

冯诺依曼，约翰 3.0 7.1 8.9 9.0 7.7 9.0 8.9 9.2

沃森，詹姆斯 2.1 8.6 9.8 9.8 9.0 9.1 9.7 9.0

威姆斯芯片 2.7 6.8 7.3 7.6 6.5 7.8 8.0 6.2

该数据继续为所有 24 人提供，然后在第二轮以不同的分值重复。人名后面的第一个数字是难度级别，接下来的7个数字是分数。我正在尝试从文件中获取这些数据并将其设置为以下格式：

人名 第 1 轮：难度级别 第 2 轮：难度级别

所以上述数据的表格看起来像这样：

阿津，尼尔

第一轮：2.3 6.0 5.0 6.7 7.8 5.6 8.9 7.6

第二轮：2.1 6.0 5.0 6.5 7.8 5.6 8.8 7.6

巴贝奇，查尔斯

第一轮：2.3 5.6 6.5 7.6 8.7 7.8 5.4 4.5

第二轮：2.3 5.4 6.5 7.6 8.7 7.2 5.4 5.5

以此类推所有 24 人。这是我的代码，但它只是直接读取文件：

```
// I have already opened the file!
while (inFile)
{
   string name;
   getline(inFile,name);
   cout << name << endl;
} 
```

谁能提供一些关于我如何对这些数据进行某种格式化的见解？

**编辑**

我得到了以下数据结构可供使用

```
const int numRounds = 2;
const int numScores = 7;
const int numDivers = 24;

// 1D array for storing difficulty of dives on each round
typedef double DifficultyList[numRounds];

// 2D array of dive scores
typedef double ScoreTable[numRounds][numScores];

// struct to store info for one diver 
struct DiverRecord
{
    string name; // persons name
    double totalScore, // total score for both rounds
        diveTotal; // total on current round
    DifficultyList diff; // difficulty on all dives (1X2 array)
    ScoreTable scores; // scores for all rounds (2X7 array)
};

// array of structs of diver records
typedef DiverRecord DiverList [numDivers]; 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:40:09.583

您的格式是基于行的，所以第一个任务是读取行

```
string line;
// read lines until EOF
while (getline(inFile, line))
{
} 
```

一旦你有了这条线，下一个任务就是*解析*每一行以提取你想要的数据，简单的方法（对于这个任务应该足够好）是使用 istringstream。

```
#include <string>
#include <fstream>
#include <sstream>

string line;
// read lines until EOF
while (getline(inFile, line))
{
    // put the line into an istringstream
    istringstream buf(line);
    // read the surname and first name from the istringstream
    string surname, first_name;
    buf >> surname >> first_name;
    // read the scores until end of the line
    double score;
    while (buf >> score)
    {
        ...
    }
} 
```

无论如何，我不完全确定您的文件格式。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T16:23:29.277

这是关于格式化输入。

如果您真的更喜欢 C++，请查看[std::ifstream](http://www.cplusplus.com/reference/fstream/ifstream/)的方向。有关一般流信息，请参阅[本](http://www.tenouk.com/Module18.html)[教程](http://www.cplusplus.com/doc/tutorial/files/)，有关格式的信息，请参阅本教程。

这里还有[与您类似的问题，](https://stackoverflow.com/questions/745897/reading-parts-of-an-input-file)有很多有用的帖子。

对于此类任务，我通常使用 C 标准文件输入和`fscanf()`函数 ( )。`man 3 fscanf`我编码得更快。

# macos - OSX 上在 root 和用户之间切换的 Bash 脚本

> ID：16065158
> 
> 赞同：0
> 
> 时间：2013-04-17T16:16:26.393
> 
> 标签：macos, bash, rvm

我正在尝试编写一个脚本来安装 rvm。为此，脚本以 root (sudo setup.sh) 身份运行，其中 setup.sh 调用安装 rvm 的下标。但是，为了安装 rvm 我需要成为用户，所以我想从 root 切换为用户。我这样做：

在 setup.sh 中：

```
# Do some stuff as root

# Install rvm
sudo -u $SUDO_USER source path/to/rvm_install/script
sudo -u install_rvm 
```

但是，当我这样做时，我从 bash 收到此错误：

```
sudo: source: command not found 
```

如果我这样做，`which source`我将一无所获，无论是 root 还是 $SUDO_USER。但是，例如，我可以毫无错误地获取 .bash_profile。而且，我可以 man source 并且有一本手册，所以我知道该 source 已安装。

如何切换到 $SUDO_USER 并且仍然让 bash 识别我的下标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T19:57:55.393

`type source`会告诉你这`source`是一个内置的shell，而不是一个外部命令。Shell builtins 只能在 shell 中使用，不能通过外部工具，如`sudo`.

如果你想执行你的下标并丢弃任何环境变量集，你可以这样做

```
sudo -u $SUDO_USER bash path/to/rvm_install/script 
```

如果 install_rvm 命令需要在 path/to/rvm_install/script 中定义的变量或函数，您可以使用

```
sudo -u $SUDO_USER bash -c 'source path/to/rvm_install/script; install_rvm' 
```

# python - 在不使用 osascript 或 appscript 的情况下从 Python 调用 AppleScript？

> ID：16065162
> 
> 赞同：16
> 
> 时间：2013-04-17T16:16:43.373
> 
> 标签：python, macos, applescript

有什么方法可以在不使用`osascript`命令行实用程序或[appscript](http://appscript.sourceforge.net/)的情况下从 python 执行（并获得结果）AppleScript 代码（我真的不想使用（我认为？），因为[它不再被开发/支持/推荐](http://appscript.sourceforge.net/status.html))?

理由：在[我刚刚发布的另一个问题中](https://stackoverflow.com/questions/16064957/how-to-check-in-applescript-if-an-app-is-running-without-launching-it-via-osa)，我描述了我在运行一些 AppleScript 时遇到的一种奇怪/不受欢迎的行为`osascript`。因为我实际上是从 python 脚本调用它，所以我想知道是否有办法`osascript`完全路由，因为这似乎是问题所在 - 但 appscript（显而易见的选择？）现在看起来有风险......

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-17T17:16:50.697

您可以使用 PyObjC 桥：

```
>>> from Foundation import *
>>> s = NSAppleScript.alloc().initWithSource_("tell app \"Finder\" to activate")
>>> s.executeAndReturnError_(None) 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-04-19T09:36:14.470

PyPI 是你的朋友...

[http://pypi.python.org/pypi/py-applescript](http://pypi.python.org/pypi/py-applescript)

例子：

```
import applescript

scpt = applescript.AppleScript('''
    on run {arg1, arg2}
        say arg1 & " " & arg2
    end run

    on foo()
        return "bar"
    end foo

    on Baz(x, y)
        return x * y
    end bar
''')

print(scpt.run('Hello', 'World')) #-> None
print(scpt.call('foo')) #-> "bar"
print(scpt.call('Baz', 3, 5)) #-> 15 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-05-05T17:56:21.003

如果希望在您的 python 代码中执行[“自动化的 Javascript”](https://github.com/JXA-Cookbook/JXA-Cookbook)（applescript 的继任者），请执行以下操作：

```
script = None

def compileScript():
    from OSAKit import OSAScript, OSALanguage

    scriptPath = "path/to/file.jxa"
    scriptContents = open(scriptPath, mode="r").read()
    javascriptLanguage = OSALanguage.languageForName_("JavaScript")

    script = OSAScript.alloc().initWithSource_language_(scriptContents, javascriptLanguage)
    (success, err) = script.compileAndReturnError_(None)

    # should only occur if jxa is incorrectly written
    if not success:
        raise Exception("error compiling jxa script")

    return script

def execute():
    # use a global variable to cache the compiled script for performance
    global script
    if not script:
        script = compileScript()

    (result, err) = script.executeAndReturnError_(None)

    if err:
        # example error structure:
        # {
        #     NSLocalizedDescription = "Error: Error: Can't get object.";
        #     NSLocalizedFailureReason = "Error: Error: Can't get object.";
        #     OSAScriptErrorBriefMessageKey = "Error: Error: Can't get object.";
        #     OSAScriptErrorMessageKey = "Error: Error: Can't get object.";
        #     OSAScriptErrorNumberKey = "-1728";
        #     OSAScriptErrorRangeKey = "NSRange: {0, 0}";
        # }

        raise Exception("jxa error: {}".format(err["NSLocalizedDescription"]))

    # assumes your jxa script returns JSON
    return json.loads(result.stringValue()) 
```

# jquery - 将焦点重新应用于替换的 DOM 元素

> ID：16065163
> 
> 赞同：1
> 
> 时间：2013-04-17T16:16:45.203
> 
> 标签：jquery, ruby-on-rails, ajax, ruby-on-rails-3, ujs

在我的应用程序中，许多 DOM 元素使用[jquery-ujs](https://github.com/rails/jquery-ujs/)。这在大多数情况下都很好。

有时，我有一个表单元素在获得焦点时被替换。我希望能够为用户持续关注。

我尝试了以下方法，但问题是 jquery 似乎将新节点视为完全一样，而不是它正在替换的节点的精确副本：

```
$(document).on('ajax:beforeSend',function(){
    window.focussed = $("*:focus");
});
$(document).on('ajax:complete',function(){
    window.focussed.focus();
}); 
```

理想情况下，我可以在不添加标记的情况下实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:08:44.473

如果元素被新节点替换，那么关注保存在 window.focussed 中的元素将不会做任何事情。如果他们有相同的 id，你可以这样做：

```
$(document).on('ajax:beforeSend',function(){
    window.focusedId = $("*:focus").prop("id");
});
$(document).on('ajax:complete',function(){
    $(window.focusedId).focus();
}); 
```

# php - 检索图像文件中设置的 PHP 会话

> ID：16065168
> 
> 赞同：0
> 
> 时间：2013-04-17T16:16:58.527
> 
> 标签：php, image, session

我有一个发送到 PHP 页面进行处理的 HTML 表单。我需要在表单中添加验证码。我无法将 HTML 页面更改为 PHP，因此在 captcha.php 页面中设置了一个会话，该页面输出为图像。当页面加载会话变量时，我无法在进程 PHP 页面中检索此会话，会话为空。有人可以帮忙吗？

在 captcha.php 中设置会话的代码：

```
session_start(); // start a session
$image = imagecreate(50, 20); //create blank image (width, height)
$bgcolor = imagecolorallocate($image, 0, 0, 0); //add background color with RGB.
$textcolor = imagecolorallocate($image, 255, 255, 255); //add text/code color with RGB.
$code = rand(1000, 9999); //create a random number between 1000 and 9999
$_SESSION['code'] = $code; //add the random number to session 'code'
imagestring($image, 10, 8, 3, $_SESSION['code'], $textcolor); //create image with all the settings above.
header ("Content-type: image/png"); // define image type
imagepng($image); //display image as PNG 
```

PHP进程页面：

```
session_start();

print_r($_SESSION); 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:19:43.397

尝试

```
print_r($_SESSION['code']); 
```

# android - Android/Eclipse：在虚拟设备/真手机上启动应用程序

> ID：16065171
> 
> 赞同：0
> 
> 时间：2013-04-17T16:17:05.623
> 
> 标签：android, eclipse

使用eclipse，当我在android虚拟设备上启动我的应用程序时，它真的很慢，因为“ANDROID_”被写入但应用程序从未执行（在它被写入之前没有找到DNS服务器，所以我添加了-dns-server 8.8.8.8,8.8 .4.4 在窗口首选项中）

另一个问题是当我将我的设备（alcatel onetouch）连接到我的计算机时。我在alcatel的网站上下载了驱动，但是当我想上传pilot并选择我下载的文件夹时，写着“pilot not found”而且我的手机无法被Eclipse识别

编辑：当我在控制台中的“Android SDK/platform-tools”文件夹中编写命令“adb devices”时，我只得到虚拟设备的引用，而不是我的手机......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T05:57:16.227

第一次启动模拟器可能需要几分钟，所以请耐心等待。但是之后您可以在重新启动应用程序时让它运行，然后它通常会在几秒钟后执行。

# android - 通过 Xamarin 和 C# 使用和构建 3rd 方控件

> ID：16065172
> 
> 赞同：1
> 
> 时间：2013-04-17T16:17:10.997
> 
> 标签：android, ios, xamarin.ios, xamarin

Xamarin 似乎是一个非常好的开发跨平台应用程序的平台，尽管我脑海中浮现了一些非常明显的问题，我无法使用我有限的 google-foo 技能得到一个像样的答案。我想知道这里的专家是否可以就以下问题给我一个合理的建议：

1.  在开发我的应用程序时，我想保持在原始开发和 3rd 方组件之间进行选择的自由。这是我可以使用 Xamarin 做的事情吗？（假设第 3 方控件通常用于原生开发生态系统。）

2.  是否可以使用 Xamarin 开发可供其他本机操作系统应用程序开发人员使用/使用的控件？

3.  Xamarin 在适应原生平台的变化方面是快速还是草率？基本上，在新的 iOS 或 Android 版本中的新功能渗透到 Xamarin 之前，典型的交付周期是多少。（这是我使用和发布更新的提前时间开始的地方。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T20:57:21.097

1.  您当然可以使用 3rd 方组件，Xamarin 有一个[新的组件存储](http://components.xamarin.com/)，用于在 Xamarin Studio 中分发这些组件，您还可以在新版本发布时在 Visual Studio 中使用 NuGet。如果您碰巧找到要使用的 Objective-C 或 java 库，您还可以绑定本机库。

2.  您当然可以通过组件商店为其他 Xamarin 开发人员执行此操作。然而，将 C# 控件分发给本地开发人员可能并不容易，因为他们必须加载 Mono 运行时才能使用您的控件。

3.  他们的速度非常快，事实上，他们在 Apple 发布 iOS 6 的同一天推出了[MonoTouch 6.0 。](http://blog.xamarin.com/xamarin-releases-same-day-support-for-ios-6/)

# html - Stick Footer 不再适用于复杂的液体设计

> ID：16065180
> 
> 赞同：1
> 
> 时间：2013-04-17T16:17:36.843
> 
> 标签：html, css

我有一个液体设计，它有顶部、内容和页脚三个主要部分。

顶部有一个固定大小的标志，带有标题和导航栏，应该填满页面的剩余右侧。

内容部分将徽标下方的空间留空，并有两列应均匀填充剩余空间（每列 50%）。

页脚应该贴在页面底部，句号！

我可以让这些部分单独工作，但是当我尝试将它们组合成一页时，如果列的内容是“长”的，页脚将不会停留下来。显然我错过了一些东西，但这里的其他人也看不到它。

```
<!DOCTYPE html>
<html>
<head>
    <title>Final Design</title>
    <meta name="generator" content="BBEdit 9.6" />
    <link href="final.css" rel="stylesheet">
</head>
<body>

<div id="wrap">
    <div id="totalContentWrap">
      <div id="topContentWrap">
          <div id="logo">
              Logo goes here.
          </div>
          <div id="topContent">
              <div id="heading">
                  Heading goes here.
              </div>
              <div id="navbar">
                  Navbar goes here.
              </div>
          </div>
      </div>
      <div id="contentWrap">
          <div id="blank">
              Nothing goes here.
          </div>
          <div id="mainContent">
              <div id="contentLeft">
                      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas sed dui enim. Aenean mattis massa nec quam viverra ut consectetur turpis lobortis. Aliquam vitae elit erat, ac iaculis nunc. Maecenas fringilla ornare blandit. Nunc fermentum bibendum mattis. Curabitur elementum commodo volutpat. Ut dapibus odio sit amet leo euismod in viverra mi cursus. Quisque commodo velit accumsan lorem sagittis dignissim fermentum nisl dapibus. Praesent in augue sem, id viverra enim.
                      </p>
                      <p>Fusce scelerisque, ante in lacinia cursus, sem nulla suscipit magna, at posuere magna tellus sit amet erat. Vivamus erat enim, elementum sed molestie id, mollis eu dolor. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Pellentesque interdum rutrum nisl in aliquet. Nunc bibendum eros non purus gravida venenatis. Duis dictum commodo lorem non sodales. Nunc mattis hendrerit suscipit. Fusce lacinia, mauris a iaculis pharetra, ante massa bibendum augue, nec tempor quam tortor id dolor. Mauris aliquam, nibh vel viverra venenatis, risus sapien ultrices lorem, ac suscipit lacus lorem quis urna. Vestibulum id tortor urna. Cras at mi a dolor aliquam auctor id imperdiet odio. Phasellus sollicitudin iaculis nisl, eget lacinia felis porttitor ac. Nulla congue laoreet rutrum.
                      </p>
                      <p>Donec condimentum viverra faucibus. Aliquam iaculis scelerisque eros ut imperdiet. In odio risus, eleifend nec viverra porttitor, laoreet ut dui. Fusce posuere mauris a nulla fringilla tristique a ac libero. Donec in eros quis orci cursus pharetra. Nam eu odio sed orci molestie ultricies ac quis felis. Nullam hendrerit, elit sit amet scelerisque porttitor, ligula enim feugiat dolor, quis scelerisque libero libero in nulla. Phasellus hendrerit, sapien id rhoncus accumsan, neque arcu auctor orci, ac luctus nibh ipsum quis risus.
                      </p>
                      <p>Morbi nulla ligula, feugiat sit amet tincidunt sed, cursus a mi. Aenean aliquam tortor quis nisl convallis nec elementum mauris tempor. Aenean non laoreet magna. Phasellus at dolor magna. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Nulla luctus fringilla mi posuere tempus. Quisque in dolor id nulla vestibulum posuere et sed purus. In lacus sapien, porta id pellentesque sed, iaculis vitae arcu. Etiam rutrum, ante eu tristique consectetur, augue nulla ultrices turpis, quis hendrerit velit quam non massa. Sed vitae eros ac nisl gravida pretium eu tempor mi. Vivamus tristique leo ac augue auctor interdum. In sit amet leo nisi. Fusce a sem leo. Suspendisse at odio neque. Donec consectetur libero vel ipsum dignissim sed vulputate nisi pretium. Morbi in diam lacus, vel mollis libero.
                      </p>
                      <p>Etiam fermentum commodo euismod. Mauris lacinia imperdiet augue, sit amet lacinia tortor placerat vel. Suspendisse pretium, est ac rutrum volutpat, arcu dui fermentum nisl, ac laoreet lectus est et ligula. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Nulla convallis, tellus sit amet bibendum dictum, nisl tortor facilisis ligula, at tempor nisl nibh et diam. Sed elementum rhoncus posuere. Pellentesque libero odio, placerat non laoreet vitae, fermentum id mi.
                      </p>
                      <p>Duis vitae erat massa, in consectetur velit. Duis quis ipsum sit amet dolor dignissim iaculis non vitae nibh. Quisque sed sapien sapien, et fringilla eros. Suspendisse porta nisi ut felis sodales eu adipiscing enim volutpat. Nulla porta mauris vitae metus viverra mollis. Nam condimentum elementum augue sed posuere. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Aenean mi lorem, feugiat blandit vestibulum vel, ornare at neque. Fusce nec elit vel ante sollicitudin imperdiet quis non eros. Curabitur sed commodo lectus. Maecenas vitae aliquam lectus. Ut quis diam non dui tempor consectetur. Curabitur vel turpis dui. Aenean gravida porta enim, ut congue lectus ornare a.
                      </p>
              </div>
              <div id="contentRight">
                      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas sed dui enim. Aenean mattis massa nec quam viverra ut consectetur turpis lobortis. Aliquam vitae elit erat, ac iaculis nunc. Maecenas fringilla ornare blandit. Nunc fermentum bibendum mattis. Curabitur elementum commodo volutpat. Ut dapibus odio sit amet leo euismod in viverra mi cursus. Quisque commodo velit accumsan lorem sagittis dignissim fermentum nisl dapibus. Praesent in augue sem, id viverra enim.
                      </p>
                      <p>Fusce scelerisque, ante in lacinia cursus, sem nulla suscipit magna, at posuere magna tellus sit amet erat. Vivamus erat enim, elementum sed molestie id, mollis eu dolor. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Pellentesque interdum rutrum nisl in aliquet. Nunc bibendum eros non purus gravida venenatis. Duis dictum commodo lorem non sodales. Nunc mattis hendrerit suscipit. Fusce lacinia, mauris a iaculis pharetra, ante massa bibendum augue, nec tempor quam tortor id dolor. Mauris aliquam, nibh vel viverra venenatis, risus sapien ultrices lorem, ac suscipit lacus lorem quis urna. Vestibulum id tortor urna. Cras at mi a dolor aliquam auctor id imperdiet odio. Phasellus sollicitudin iaculis nisl, eget lacinia felis porttitor ac. Nulla congue laoreet rutrum.
                      </p>
                      <p>Donec condimentum viverra faucibus. Aliquam iaculis scelerisque eros ut imperdiet. In odio risus, eleifend nec viverra porttitor, laoreet ut dui. Fusce posuere mauris a nulla fringilla tristique a ac libero. Donec in eros quis orci cursus pharetra. Nam eu odio sed orci molestie ultricies ac quis felis. Nullam hendrerit, elit sit amet scelerisque porttitor, ligula enim feugiat dolor, quis scelerisque libero libero in nulla. Phasellus hendrerit, sapien id rhoncus accumsan, neque arcu auctor orci, ac luctus nibh ipsum quis risus.
                      </p>
                      <p>Morbi nulla ligula, feugiat sit amet tincidunt sed, cursus a mi. Aenean aliquam tortor quis nisl convallis nec elementum mauris tempor. Aenean non laoreet magna. Phasellus at dolor magna. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Nulla luctus fringilla mi posuere tempus. Quisque in dolor id nulla vestibulum posuere et sed purus. In lacus sapien, porta id pellentesque sed, iaculis vitae arcu. Etiam rutrum, ante eu tristique consectetur, augue nulla ultrices turpis, quis hendrerit velit quam non massa. Sed vitae eros ac nisl gravida pretium eu tempor mi. Vivamus tristique leo ac augue auctor interdum. In sit amet leo nisi. Fusce a sem leo. Suspendisse at odio neque. Donec consectetur libero vel ipsum dignissim sed vulputate nisi pretium. Morbi in diam lacus, vel mollis libero.
                      </p>
                      <p>Etiam fermentum commodo euismod. Mauris lacinia imperdiet augue, sit amet lacinia tortor placerat vel. Suspendisse pretium, est ac rutrum volutpat, arcu dui fermentum nisl, ac laoreet lectus est et ligula. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Nulla convallis, tellus sit amet bibendum dictum, nisl tortor facilisis ligula, at tempor nisl nibh et diam. Sed elementum rhoncus posuere. Pellentesque libero odio, placerat non laoreet vitae, fermentum id mi.
                      </p>
                      <p>Duis vitae erat massa, in consectetur velit. Duis quis ipsum sit amet dolor dignissim iaculis non vitae nibh. Quisque sed sapien sapien, et fringilla eros. Suspendisse porta nisi ut felis sodales eu adipiscing enim volutpat. Nulla porta mauris vitae metus viverra mollis. Nam condimentum elementum augue sed posuere. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Aenean mi lorem, feugiat blandit vestibulum vel, ornare at neque. Fusce nec elit vel ante sollicitudin imperdiet quis non eros. Curabitur sed commodo lectus. Maecenas vitae aliquam lectus. Ut quis diam non dui tempor consectetur. Curabitur vel turpis dui. Aenean gravida porta enim, ut congue lectus ornare a.
                      </p>
              </div>
          </div>
      </div>
  </div>
</div>
<div id="footer">
    Footer goes here.
</div>

</body>
</html>

* {margin:0;padding:0;} 

html, body {
    height: 100%;
}

#wrap {
    min-height: 100%;
}

#topContentWrap {
    position: relative;
    top: 0px;
    left: 0px;
    width: 100%
    height: auto;
}

#logo {
    position: absolute;
    top: 0px;
    left: 0px;
    min-height: 140px;
    width: 140px;
    background-color: purple;
}

#topContent {
    position: absolute;
    top: 0px;
    left: 140px;
    right: 0px;
    height: auto;
    background-color: blue;
}

#heading {
    position: relative;
    top: 0px;
    left: 0px;
    height: 92px;
    width: auto;
    border:2px dashed green;
}

#navbar {
    position: relative;
    top: 0px;
    left: 0px;
    height: 40px;
    border:2px dashed red;
    z-index: 1;
}

#totalContentWrap {
    //position: absolute;
    overflow:auto;
    padding-bottom: 100px;                  /* must be same height as the footer */
    top: 220px;
    left: 140px;
    height: 1000px;
    background-color: lightblue;
}

#contentWrap {
    position: absolute;
    overflow:clip;
    top: 140px;
    left: 0px;
    width: 100%;
    /*padding-bottom: 100px;                    /* must be same height as the footer */
    background-color: yellow;
}

#mainContent {
    position: absolute;
    top: 0px;
    left: 140px;
    right: 0px;
    height: auto;
    padding-bottom: 100px;                  /* must be same height as the footer */
    background-color: green;
}

#blank {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 140px;                           /* must be same width as the logo */
    background-color: orange;
    z-index: 3;
}

#contentLeft {
    position: absolute;
    top: 0px;
    left: 0px;
    height: 100%;
    width: 50%;
    background-color: purple;
    z-index: 2;
}

#contentRight {
    position: relative;
    top: 0px;
    left: 50%;
    height: 100%;
    width: 50%;
    background-color: blue;
}

#footer {
    position: relative;
    margin-top: -100px; /* negative value of footer height */
    height: 100px;
    clear:both;
    background-color: orange;
} 

p {
    text-indent:30px;
    padding-bottom: 20px;
    padding-left:  20px;
    padding-right: 20px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:59:23.397

你的代码对我来说太乱了，所以我重写了它，让你更好地理解发生了什么。基本上有一些小建议不要深入研究这样的问题：

- 您不需要为您的 DIV 声明每个位置，只需让默认位置（即`static`）完成他的工作。

- 如果需要，也尝试使用相对位置构建您的站点（尤其是使用流畅的布局），除非绝对/固定位置是绝对必要的。[**你可以在这里**](http://www.w3.org/TR/CSS2/visuren.html#propdef-position)了解`position`属性的定义[](http://www.w3.org/TR/CSS2/visuren.html#propdef-position)

 **- 巧妙地嵌套您的 div 并使用边距和浮动来避免/允许空白空间。

- 尽量保持你的代码简洁明了。

如您所见，遵循这些小预防措施后，CSS 变得更加轻松和易于理解：

```
 body, html {
    margin:0;
    height:100%;
}
p {
    padding:15px;
}
#headerwrap {
    width:100%;
    height:140px;
    background-color: red;
}
#logo {
    height:140px;
    width:140px;
    background-color:pink;
    float:left;
}
#heading {
    height:100px;
}
#navbar {
    height:40px;
    background-color:green;
}
#heading, #navbar {
    float:left;
    width:calc(100% - 140px);
}
#middlewrap {
    margin-left:140px;
    min-height: 100%;
    height: auto !important;
    height: 100%;
    margin-bottom:-100px;
}
#firstcol, #secondcol {
    width:50%;
    float:left;
}
#firstcol {
    background-color:yellow;
}
#secondcol {
    background-color:blue;
}
#pushdown{
    height:100px;
    clear:both;
    display:block;
}
#footerwrap {
    height:100px;
    background-color: green;
} 
```

我还对您的 HTML 结构进行了一些小修改。[**您可以在THIS FIDDLE**](http://jsfiddle.net/MQUf3/2/)
中看到整个项目。 干杯。[](http://jsfiddle.net/MQUf3/2/)**

# c++ - 将 std::vector 转换为 NumPy 数组而不复制数据

> ID：16065183
> 
> 赞同：15
> 
> 时间：2013-04-17T16:17:38.203
> 
> 标签：c++, python, numpy, swig

我有一个 C++ 库，它目前有一些方法，其中返回一个`std::vector`定义的类似

```
public:
  const std::vector<uint32_t>& getValues() const; 
```

我目前正在使用 SWIG 为 Python 包装整个库，到目前为止效果很好。

SWIG`getValues()`很好地包装了这个函数，以便它返回一个 Python 元组。问题出在我的 Python 端代码中，我想将其转换为 NumPy 数组。当然，我可以通过以下方式做到这一点：

```
my_array = np.array(my_object.getValues(), dtype='uint32') 
```

但这会导致原始向量中的所有条目首先由 SWIG 复制到 Python 元组中，然后由我再次复制到 numpy 数组中。由于这个向量可能非常大，我宁愿避免制作这两个副本，并希望有一种方法让 SWIG 在内存中的原始向量数据周围创建一个 numpy.array 包装器。

我已经阅读了[numpy.i](http://docs.scipy.org/doc/numpy/reference/swig.interface-file.html)的文档，但明确提到不支持输出数组，因为它们似乎是在 C 样式数组而不是 C++ 向量的假设下工作的。

numpy.array 的底层数据结构和 C++ std::vector 一样只是一个 C 风格的数组，所以我希望在内存中访问相同的数据是可行的。

有什么方法可以让 SWIG 返回一个不复制原始数据的 numpy.array ？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-17T17:58:23.963

显然，将 C++ 向量“转换”为（C）数组是微不足道的，请参阅这个问题的答案：[How to convert vector to array in C++](https://stackoverflow.com/questions/2923272/how-to-convert-vector-to-array-c)

接下来，您可以创建一个 numpy 数组，该数组将使用该 C 数组而无需复制，请参阅[此处的讨论](https://groups.google.com/forum/?fromgroups=#!topic/cython-users/Ubh2nG0_R9g)，或 google 查找`PyArray_SimpleNewFromData`.

我不希望 SWIG 自动为您完成所有这些工作，相反，您可能应该`getValues`自己为您的函数编写一个包装器，例如`getValuesAsNumPyArray`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-05-22T19:09:39.407

似乎`PyArray_SimpleNewFromData`需要您自己进行内存管理；如果内存管理已经在 C++ 端处理了，也就是说，Python 不负责内存，你可以使用`np.asarray`来获取一个与 C++ 向量共享内存的 numpy 数组，如下所示：

```
from libcpp.vector cimport vector
import numpy as np
cdef vector[double] vec
vec.push_back(1)
vec.push_back(2)
cdef double *vec_ptr = &vec[0]    # get hold of data array underlying vec; also vec.data() if you have C++11
cdef double[::1] vec_view = <double[:vec.size()]>vec_ptr    # cast to typed memory view
vec_npr = np.asarray(vec_view)    # get numpy array from memory view
print(vec_npr)    # array([1.0, 2.0]) 
```

Kurt Smith 的 Cython 书第 10 章中的“包装 C 和 C++ 数组”部分提供了很好的示例。另请参阅[官方用户指南中对 Numpy 的强制转换](http://docs.cython.org/en/latest/src/userguide/memoryviews.html#coercion-to-numpy)。

# ios - UITextField 在数组中找到最佳匹配字符串

> ID：16065188
> 
> 赞同：0
> 
> 时间：2013-04-17T16:17:52.467
> 
> 标签：ios, algorithm, nsstring, nsmutablearray, uitextfield

例如我有字符串数组：

```
@"demo_1"
@"123"
@"demo_some_text"
@"demo"
@"demo_123"
@"simple_111" 
```

在文本字段中，我输入文本：@“de”。此@“演示”中的最佳匹配。我有这样的方法：

```
NSString *substring = @"de";
    for(NSString *demo in arrayWithStrings)
                {
                    NSRange substringRange = [demo rangeOfString:substring];
                    if (substringRange.location == 0)
                    {
                        foundString = demo;
                    }
                } 
```

但它返回@“demo_123”字符串..你能帮我吗？我的案例字符串必须是@“demo”。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T16:46:38.973

我知道两个用于自动完成文本字段的 github 项目。我不知道他们的匹配标准是什么，但他们可能会提供一些灵感：[https](https://github.com/hoteltonight/HTAutocompleteTextField) ://github.com/hoteltonight/HTAutocompleteTextField和[https://github.com/doat/DOAutocompleteTextField](https://github.com/doat/DOAutocompleteTextField)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T16:33:42.710

这实际上取决于您要如何匹配。

```
NSArray *array = [NSArray arrayWithObjects:@"demo_1",@"123",@"demo_some_text",@"demo",@"demo_123", @"simple_111", nil];
NSArray *sorted = [array sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)];
NSString *substring = @"de";
for(NSString *demo in sorted)
{
    NSRange substringRange = [demo rangeOfString:substring];
    if (substringRange.location == 0)
    {
        NSLog(@"%@", demo);
        break;
    }
} 
```

我这样做。首先，您对数组进行排序并找到匹配项。

# ios - 使 Xcode 目标保持最新

> ID：16065193
> 
> 赞同：2
> 
> 时间：2013-04-17T16:18:22.443
> 
> 标签：ios, xcode, project, diff, target

我有一个带有两个目标的 Xcode 项目，一个用于我的发布版本，一个用于 beta 测试。两个目标之间的唯一*有意*区别是 Bundle 名称和 Id，因此 beta 测试人员可以同时安装 release 和 beta 版本而不会发生冲突和混淆（我也在考虑使用不同的图标）。

我无法让这两个目标保持最新状态；例如，当我将一个新库添加到一个目标时，我有时会忘记单击复选框以将其添加到另一个目标。

是否有一种简单的方法可以*自动*（或多或少地）使两个目标在源代码和库内容等设置方面保持同步？也许有一种工具可以对设置进行基本的比较（它们似乎在一个主文件中，所以传统的文件比较工具无济于事）。或者是否有更好的方法来维护如上所述的 beta 版本的设置？

（我使用 Xcode 4.5.2 进行越狱 iOS 开发——所以我不需要担心任何 App Store 问题。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:38:55.697

就我而言，我最终只是删除了测试版的目标并为发布版制作了目标的副本（我懒得从问题评论中寻求@ilmiac 的有用建议）。由于重要的设置（Bundle name 和 Id）都存储在 Info.plist 文件中，所以我只需要在复制后更改 Info.plist 文件的位置即可。为了将更改保持在最低限度，我将满足于将应用程序命名为“ *AppName* copy”（Xcode 为重复目标提供的默认名称）而不是“ *AppName* beta”（对于捆绑目录名称也是如此）。

# git - Git 合并我已经推送到远程源的提交

> ID：16065194
> 
> 赞同：0
> 
> 时间：2013-04-17T16:18:25.440
> 
> 标签：git, merge

我刚刚在我的 git 存储库上提交了一个提交并将其发送到远程源。我所做的提交中当然存在语法错误。在本地修复语法错误的最佳方法是什么，然后将其与我的最后一次提交合并，以便阅读远程提交的人不必查看两个提交，而是查看一个/干净的提交？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:25:44.827

不。上游的人可能已经取消了你的提交，而你正在寻找一种重写历史的方法，所以看起来你从未成功过。这会让他们的客户感到困惑。

也就是说，如果您确定没有人会拉动，或者您可以通知每个拥有您正在做的事情的人，您可以这样做：

1.  在本地修复您的错误
2.  `git add`你的固定文件
3.  `git commit --amend`在上一次提交中包含您的修复
4.  `git push -f`强行覆盖遥控器的历史记录。

自从您的推送中断后拉出的任何人都需要`git pull -f`覆盖他们的客户。

# php - 返回匹配随机数量的动态条件的结果

> ID：16065198
> 
> 赞同：2
> 
> 时间：2013-04-17T16:18:38.053
> 
> 标签：php, sql

首先，我有一个数组，它通过 switch 语句传递，以匹配每个值的正则表达式，然后根据它是否匹配执行查询。我的问题是，如果数组包含 1 个或多个与正则表达式之一匹配的值，我想要定义的查询来过滤为该数组执行的任何过去或未来查询的结果，我正在考虑 INTERSECT SQL 命令但不能想想这将如何实现，因为我不知道将匹配多少个案例，而且我不想添加大量 if/else 语句。

到目前为止，这是我的代码示例：

```
$dataArray = explode(',', $data)
$query = mysqli->prepare("SELECT * FROM table WHERE ? Like ?")
foreach ($dataArray as $key => $value) {
    switch ($value) {
        case preg_match('/(^abcd)/', $value):
            $query->bind_param("ss", $var1, $var2);
            break;

... More cases ...

        default:
            $query = bind_param("ss", $var3, $var4);;
            break;
    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:37:07.890

我不认为你可以`prepare`查询这样的要求。您将不得不生成临时查询（或至少它的`WHERE`一部分）。

喜欢：

```
$conditions = array();

foreach ($dataArray as $key => $value)
{
    if (preg_match('/(^abcd)/', $value))
    {
        $conditions[] = "$var1 LIKE $var2";
    }

    if (preg_match('/(^efgh)/', $value))
    {
        $conditions[] = "$var3 LIKE $var4";
    }

    ...
}

$sql = "SELECT * FROM table WHERE " . implode(" AND ", $conditions); 
```

我不确定你是否允许一个`$value`匹配多个模式。另外我不知道，如果你想使用`$key`的东西。

# c# - 非常耗费资源的 Windows Phone 8 后台任务

> ID：16065199
> 
> 赞同：0
> 
> 时间：2013-04-17T16:18:38.447
> 
> 标签：c#, c++, background, windows-phone-8, windows-phone

如果我能获得在 Windows Phone 8 的后台运行资源密集型任务的正确权限，是否有可能以任何方式？我的应用程序需要通过蓝牙与外部设备通信，可能需要几个小时，然后发送指令。这些指令是从必须加载到内存中的大型 3d 模型创建的。因此，我需要 100 兆的内存。我知道限制是最多 10 分钟和 11mb 的 RAM。

有没有办法做到这一点？

PS。如果我将指令保存到大容量存储中，RAM 的东西可能是可以绕过的，但需要付出很多努力。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T04:55:03.083

不幸的是没有。

这些限制是操作系统施加的限制，无法绕过。

# c# - 在 Lambda 中按首字母搜索

> ID：16065203
> 
> 赞同：0
> 
> 时间：2013-04-17T16:18:50.903
> 
> 标签：c#, linq-to-sql, lambda

我想设置一个按钮，当我按下它时，它将获取文本框中的字符串，并在以该字符串或字符开头的数据表上的**某个字段上查找所有记录。**然后在 Listbox 或 DataGridViewer 中显示结果

这是我已经实现的一小段代码，但我无法继续

```
 private void button3_Click(object sender, EventArgs e)
    {
        MyLinqDataContext MyData = new MyLinqDataContext();
        MyList myLambda =  MyData.MyLists.First(lambda => lambda.First_Name.StartsWith(TxtFirstName.Text));

    } 
```

提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T16:28:16.397

1) `First` in linq, returns a single record. you will want to use `Where` to return a list.

2) `Where` in linq will return a collection of type `IEnumerable<T>`. You will either need to call `.ToList()` on it afterwards, or use `var` as the type.

3) You shouldn't need to create a new data context to run this against, as long as you have the original table in a queryable format.

final code, by example

```
private void button3_Click(object sender, EventArgs e)
{
    var myLambda =  MyDataTable.AsEnumerable().Where(lambda => lambda.Field<string>("First_Name").StartsWith(TxtFirstName.Text));
    //var should be of the type IEnumerable<DataRow>

    //from here, we can use this var as the DataSource for another display
    resultsBox.DataSource = myLambda;
    //assuming resultsBox can interpret a datarow correctly.  
    //You may need to select First_Name only, or some other data, out of the returned values.
} 
```

Alternatively, using the data context

```
private void button3_Click(object sender, EventArgs e)
{
    MyLinqDataContext MyData = new MyLinqDataContext();
    var myLambda =  MyData.MyLists.Where(lambda => lambda.First_Name.StartsWith(TxtFirstName.Text));

    resultsBox.DataSource = myLambda;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T16:22:38.310

如果你想找到你不想使用的所有记录你`.First()`想使用`.Where()`所以

```
private void button3_Click(object sender, EventArgs e)
{
    MyLinqDataContext MyData = new MyLinqDataContext();
    MyList myLambda =  MyData.MyLists.Where(lambda => lambda.First_Name.StartsWith(TxtFirstName.Text[0].ToString()));
} 
```

上面使用字符串 [0] 的第一个索引来检索第一个字符。

# .htaccess - 我可以使用 htaccess 为特定的引用域添加文件吗

> ID：16065205
> 
> 赞同：1
> 
> 时间：2013-04-17T16:18:56.040
> 
> 标签：.htaccess, referrer

我知道您可以通过 htaccess 通过以下方式添加文件：

`php_value auto_prepend_file prepend.php`

我想知道是否可以根据引用域列表来这样做。

因此，如果引用域是`domain1.com`, `somedomain2.com`, `whatever3.com`, 等...文件将被前置。

谢谢，

# dynamics-crm - Microsoft Dynamic CRM 插件调试

> ID：16065206
> 
> 赞同：2
> 
> 时间：2013-04-17T16:19:06.793
> 
> 标签：dynamics-crm, crm

我正在为 MS Dynamic CRM 编写插件。当 CRM 服务器位于远程计算机上时，是否可以调试我的插件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T17:58:42.760

在高层次上，您需要执行以下操作：

1.  将您的 .DLL 复制到 CRM Server\server\bin\assembly 文件夹中
2.  为“磁盘部署”注册插件
3.  安装和配置 Visual Studio 远程调试器
4.  从 Visual Studio 附加到远程调试器
5.  触发事件

可以在此处找到深入的解释： [如何远程调试 Dynamics CRM 插件和工作流程序集](http://weblogs.asp.net/pabloperalta/archive/2010/12/01/how-to-remote-debug-dynamics-crm-plugins-and-workflow-assemblies.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-21T20:09:26.820

以下是 MS Dynamics CRM 2011 的列表：

1.  在调试模式下构建插件
2.  注册您的插件（请记住，如果您的插件项目基于其他自定义 dll-s，您必须将它们与 IlMerge 合并为一个 dll - 无论哪种方式，您将在输出中拥有一个 dll 和一个 pdb 文件文件夹）
3.  使用插件注册工具注册插件。（不要忘记步骤）
4.  在服务器上以管理员身份启动 msvsmon（如果可以从[这里下载）](http://www.microsoft.com/en-us/download/details.aspx?id=40781)
5.  将 pdb 文件复制到 C:\Program Files\Microsoft Dynamics CRM\server\bin\assembly 文件夹
6.  做一个 iisreset
7.  打开服务器会话（从浏览器连接到 CRM）
8.  从 Visual Studio 连接到远程调试器（w3wp 是您必须连接的服务，如果有多个服务会话，请连接到所有服务会话）
9.  触发您注册的插件。

多次完美地为 mw 工作。（请确保在您调试它时没有其他人尝试使用同一服务器，因为在您发布代码之前服务器不会响应。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-31T07:34:19.953

这是调试动态 crm 插件的最佳分步方法。

[http://guruprasadcrm.blogspot.com/2011/11/how-to-debug-crm-2011-online-plugin.html](http://guruprasadcrm.blogspot.com/2011/11/how-to-debug-crm-2011-online-plugin.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T19:48:38.790

如果无法安装和使用 Visual Studio 远程调试器（大多数生产系统都是这种情况），您可以使用 Plugin-Profiler。

它将收集信息，使您能够在本地调试插件（功能有限，因为它基本上是插件执行的重播）。

请参阅[分析插件性能](http://msdn.microsoft.com/en-us/library/hh372952.aspx)

这假设您使用的是 Dynamics CRM 2011

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-17T18:14:46.003

Here is one another guide how to debug the plugins:

[http://inogic.com/blog/?p=61](http://inogic.com/blog/?p=61)

# php - 限制 SQL 结果的数量

> ID：16065208
> 
> 赞同：0
> 
> 时间：2013-04-17T16:19:21.210
> 
> 标签：php, jquery

所以基本上我有一个`load.php`页面，它接收一个位置变量并使用它从表格中显示该位置的 6 个结果......但我看到某处有一个错误，因为什么都没有返回......你们能帮忙吗？

这是代码：

```
 <?php 

error_reporting(0);
session_start();
include '../upload/connect.php';

$start = $_POST['start'];
$id = $_POST['id'];

$sql = mysql_query("SELECT * FROM comments WHERE id='".$id."' ORDER by id DESC LIMIT ".$start." , 6 ") or die(mysql_error());
while ($display = mysql_fetch_assoc($sql))
{
    ?>
    <div id="comments">
    <table>
    <tr>
    <td rowspan="2"><img src="../pic/logo.png" width="100px" /></td>
    <td valign="top"><p style="width:700px;font-family:'Lucida Sans Unicode', 'Lucida Grande', sans-serif;font-size:13px;color:rgba(255,255,255,0.5);">&nbsp;&nbsp;&nbsp;&nbsp;Postat de <?php echo $display['user']; ?> la <?php echo $display['date']; ?> </p></td></td>
    </tr>
    <tr>
    <td width="90%" valign="top"><p style="width:700px;font-family:'Lucida Sans Unicode', 'Lucida Grande', sans-serif;font-size:13px;color:white;">&nbsp;&nbsp;&nbsp;&nbsp;<?php echo $display['comment']; ?></p>
    </tr>
    </table>
    </div>
    <?php
}

?> 
```

和jQuery：

```
var st = 6;// start position...
    var div_height = $("#mighty_holder").height()/2- 50;
    var doc_scroll = $(document).scrollTop();
    function loadthem (k)
    {
        $.post('../core/load.php',{start: k , id: <?php echo json_encode($id); ?>},
                function(result){
                    $("#comment_holder").append(result);
            }); 
    }

    $(document).scroll(function(){
        if ($("#mighty_holder").height()/2- 50 < $(document).scrollTop())
        {
            loadthem(st);   
            st = parseInt(st) + 7;
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:27:55.027

In your Javascript code, you initialize `var st = 6` send `6` to `start`. Then in the `scroll` function it is passed as parameter to the `loadthem` function resulting in `6` being send as `start: k` in the AJAX POST request to the PHP page. It recovered as `$start = $_POST['start']` and inserted in the query like `6` resulting in `LIMIT 6, 6`. Which will not return any result from the query.

You probably meant to initialize `st` to `0`.

On a side note: to prevent SQL injections I suggest you to perform an `int` cast on both `$_POST['id']` and `$_POST['start']`, assuming they should be both numeric values:

```
$start = (int) $_POST['start'];
$id = (int) $_POST['id']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T16:27:56.637

This is your mistake

```
var st = 6;// start position... 
```

st should be 0\. In your case you have `LIMIT 6, 6`. I am guessing you want `LIMIT 0, 6`

# permissions - 如何仅允许 SharePoint Server 2013 中的 FBA 用户访问子站点？

> ID：16065213
> 
> 赞同：1
> 
> 时间：2013-04-17T16:19:39.547
> 
> 标签：permissions, forms-authentication, sharepoint-2013

我在 SharePoint 2013 的主页下有一个名为 Home 的站点和名为 Tutorials 的子站点，如下所示：

1.  家
2.  主页/教程

教程子站点具有唯一的站点权限。

我已经为基于表单的身份验证实现了 Codeplex 的 FBA 包，它运行良好。我希望一些 FBA 用户只允许访问教程子站点，但不允许访问父主页站点。这适用于 AD 用户，但不适用于 FBA 用户。仅当 FBA 用户在父站点中具有权限时，子站点才可用。如果 FBA 用户已从父站点中删除，并且他/她仍在子站点中，则无法访问。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-30T06:08:34.380

我遇到了同样的问题。我还可以通过将用户添加到 Sharepoint 2013 中的 Style Resource Readers 组来解决此问题。问题一定是用户无权访问母版页。将用户添加到该组并没有授予用户访问任何更高级别站点的权限，只有子站点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-29T23:58:58.823

1.3.4 版本修复了 FBA 用户除非存在于根站点，否则无法添加到子站点的问题。 [链接到 FBA 包发布](http://sharepoint2013fba.codeplex.com/releases/view/120338)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-02T01:41:42.487

我还没有找到解决这个问题的“真正”解决方案，但我知道它与网站集母版页库有关。基本上，FBA 用户可以访问网站，但不能访问用于呈现 SharePoint 页面的网站集母版页库中的资源。

我尝试在网站集库上授予唯一权限，然后将其关闭（再次从父网站继承），然后，不知何故，我可以让 FBA 用户查看子网站。我不知道这是否会坚持下去，但我认为它可能对你有用。如果没有，至少您知道问题的原因是什么，并且可以提出适合您的权限解决方案。

更新：它也可以是从父站点中的列表链接的站点资产。例如，创建新子站点时从父站点继承的徽标。将其更改为指向子站点而不是父站点中的资产应该可以解决问题。

# dart - 我需要在使用之前将我的 Dart 包发布到 pub.dartlang.org 吗？

> ID：16065217
> 
> 赞同：11
> 
> 时间：2013-04-17T16:19:47.543
> 
> 标签：dart, dart-pub

使用 java/gradle 我可能依赖 mavenCentral 和 mavenLocal 并将我自己的库发布到 mavenLocal。

Dart 是如何做到的？

即我有多个项目依赖于一些私有库。

正如我所见，“pub publish”只能发布到中央仓库。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-17T16:47:13.237

如果您只想在本地使用一个包，则无需全部“发布”。（而且我不确定这甚至意味着什么。）相反，您可以只使用[路径依赖项](http://pub.dartlang.org/doc/dependencies.html#path-packages)来依赖它。

如果你有一些本地包`foo`并且你想从另一个本地包中使用它`bar`，在`bar`的 pubspec 中，只需添加：

```
dependencies:
  foo:
    path: path/to/bar 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-18T04:35:10.733

鲍勃所说的。

此外，如果您需要公司内的多个开发人员都共享同一个内部包，您可以使用 pub 对 git 依赖项的支持。

如果您将内部包推送到本地/内部 git 服务器，则所有开发人员都可以访问它。

这是一个例子：

```
dependencies:
  foo:
    git: git://your.internal.server/package.git 
```

# shell - 通过 SSH 执行大量命令

> ID：16065218
> 
> 赞同：1
> 
> 时间：2013-04-17T16:19:48.350
> 
> 标签：shell, ssh

好的，所以我有一个脚本需要通过 SSH 执行一堆命令，但是如果提供的目标是本地路径而不是主机名，我还想允许它在本地运行相同的命令。

现在我可以轻松地确定我是否在本地操作，但我有一组非常复杂的命令要运行，远远超过直接作为参数提供给 ssh 的范围。

我想做的是：

```
if [ -n "$HOST" ]
    then
        ssh "$HOST"
fi

# Run some commands
# exit 
```

但是，有一些明显的问题，例如我如何传递适当的变量并退出，而不会导致脚本在本地定位时提前结束。所以我不确定这是否可能，有没有办法使用实际远程运行的普通 shell 命令来执行上述操作？

如果没有，另一种方法是让我提取我需要运行到他们自己的 shell 脚本中的命令，并确保我的 ssh 命令复制 shell 脚本（如果它不存在）然后运行它，但我我也不知道该怎么做？我熟悉基本的 unix 命令，但不是这样的！

无论如何，如果可能的话，我将不胜感激有关最佳方法的任何建议，并提供详细示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T19:41:22.447

信任实际上不是问题，因为我已经为无密码 SSH 设置了公钥身份验证。

无论如何，似乎我最好的选择是将命令提取到 shell 脚本中并根据需要将其发送到服务器。也就是说，我认为这里的文档也可能允许我在不发送脚本的情况下执行此操作，尽管在需要时发送脚本可能是我所需工作负载的更有效选择。

这是我对此处文档的想法的示例：

```
if [ -n "$HOST" ]; then ssh "$HOST" <<- 'REMOTE_SESSION'; fi

    # Some commands

if [ -n "$HOST" ]; then REMOTE_SESSION; fi 
```

主要困难是确保远程会话“块”中的命令结构正确，因为如果打开 SSH 连接，任何标准输入和标准输出都将位于远程服务器上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T16:50:44.490

看看远程shell。 [http://en.wikipedia.org/wiki/Remote_Shell](http://en.wikipedia.org/wiki/Remote_Shell)虽然有一些问题，比如如何处理安全问题。将密码存储在纯文本文件中不是您想要的。您还需要在计算机之间建立某种信任。如果您使用的是 linux/unix，请查看您的本地手册页。

# php - CakePHP 登录和重定向

> ID：16065221
> 
> 赞同：0
> 
> 时间：2013-04-17T16:20:03.870
> 
> 标签：php, cakephp, login

我正在尝试为我的网络应用程序创建一个 API，允许移动应用程序更新我的数据库。我的控制器中有要执行的代码，例如：

```
www.mysite.com/projects/doSomething 
```

doSomething 函数根据移动应用程序通过 POST 请求发送的信息执行一些代码。

问题是我想让它尽可能安全，所以我为移动应用程序创建了一个用户。

如何通过 POST 请求发送登录信息、登录用户并执行 doSomething 功能？PS 我正在使用 cakePHP Auth 功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:27:45.413

您必须根据通过 POST 请求提供的凭据进行查找，然后当您找到用户时，您可以使用手册[本节](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#manually-logging-users-in)中的代码手动登录，例如：

```
public function register() {
    if ($this->User->save($this->request->data)) {
        $id = $this->User->id;
        $this->request->data['User'] = array_merge($this->request->data['User'], array('id' => $id));
        $this->Auth->login($this->request->data['User']); // logging the newly registered user here
        $this->redirect('/users/home');
    }
} 
```

# ruby-on-rails - Rails - 我想允许用户只更改他们的个人资料

> ID：16065222
> 
> 赞同：0
> 
> 时间：2013-04-17T16:20:04.743
> 
> 标签：ruby-on-rails

我有以下表格：用户、员工、联系人。员工和联系人 belongs_to 用户和用户 has_one 联系人或 has_one 员工。创建新联系人或员工时，我让他们的模型创建一个新用户。

我希望联系人（最终用户）能够编辑自己的联系人记录。所以，我有以下链接：

```
<li><%= link_to "Edit Profile", edit_contact_path(current_user.contact) %></li> 
```

这带来了他们的记录，他们可以编辑它。但是，我不希望他们能够用另一个 contacts.id 重新输入 url 并编辑他们的记录。

我尝试了以下方法，但并没有阻止它们：

```
<% if current_user.contact = @contact %>
 <%= render 'form' %>
<% end %> 
```

仅供参考 - 我还允许管理员使用以下代码编辑联系人记录：

```
<% if current_user.admin? %>
  <%= render 'form' %>
<% end %> 
```

进一步解释 - 网址如下所示：

```
http://localhost:5000/contacts/4/edit 
```

如果你用 6 代替 4，它仍然会带来那个记录。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T16:24:11.140

首先，我认为您可能缺少一个`=`标志。

```
<% if current_user.contact == @contact %>
 <%= render 'form' %>
<% end %> 
```

其次，在`contacts#edit`行动上做类似的事情

```
if current_user.contact != @contact
  flash[:error] = "you've been naughty"
 # also its recommended to record such an abuse attempt by logging or something
else
 # do rest here
end 
```

您还可以使用[cancan](https://github.com/ryanb/cancan)或其他授权 gem 之类的东西做更多事情（例如，如果您只想允许特定用户编辑联系人，而不仅仅是`current_user`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-22T10:13:16.683

步骤 #1 创建一个方法

```
def check_contact
if current_user.id != @contact.id
redirect_to root_path, alert: "Opps! you're not authorized to edit this "
end
end 
```

步骤 #2 在控制器顶部创建一个回调

```
before_action :check_contact, only: [:edit, :update] 
```

方法 #2 您可能只是在 check_contact 方法中进行了一些更改，例如

```
 def check_contact
if current_user.contact != @contact
redirect_to root_path, alert: "Opps! you're not authorized to edit this "
end
end 
```

然后在控制器名称下在控制器顶部回调

```
before_action :check_contact, only: [:edit, :update] 
```

# python - 如何在 Python 中从文件中调用函数？

> ID：16065224
> 
> 赞同：0
> 
> 时间：2013-04-17T16:20:07.690
> 
> 标签：python, windows, module, python-idle

我对 Python 很陌生。我最近了解到，我们可以将所有定义的函数存储在一个文件中，并在需要时调用它们。我在 Windows 上使用空闲。

我应该将包含所有函数的 .py 文件存储在哪里，以便可以从 Idle 访问它们，我应该如何调用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T16:22:59.747

```
Some Folder
|
  - my_funcs.py
|
  - other.py 
```

其他.py

```
from my_funcs import somefunc
somefunc("An Argument") 
```

my_funcs.py

```
def somefunc(s):
    print "SomeFunction:%s"%s 
```

然后运行 ​​other.py

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T16:22:58.957

该文件必须在您的 PYTHONPATH 上。您需要在您的环境中进行设置。例如，如果您的文件是：

```
C:/path/to/myfile.py 
```

然后你需要确保它`C:/path/to`在 PYTHONPATH 上。然后，在另一个脚本中，您可以通过以下方式导入`myfile`：

```
import myfile 
```

现在您可以使用以下`func`定义的函数 ( ) `myfile`：

```
myfile.func() 
```

# oracle - 在 weblogic/oracle 中为 JDBC 池指定默认模式

> ID：16065230
> 
> 赞同：12
> 
> 时间：2013-04-17T16:20:26.337
> 
> 标签：oracle, jdbc, weblogic

我们为多个项目使用同一个用户，我希望为不同的连接池使用不同的默认模式。有没有办法在 weblogic JDBC 配置中指定默认模式？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-17T16:29:18.363

好的，我自己想通了：

如果你去**Data Source** -> **Configuration** -> **Connection Pool** -> 点击**Advanced**，

那里`Init SQL`将执行新创建的物理数据库连接的初始化，我们可以放：

`SQL ALTER SESSION SET CURRENT_SCHEMA=animals`

制作默认架构。

# python - 向后多对多 Django 查询

> ID：16065233
> 
> 赞同：0
> 
> 时间：2013-04-17T16:20:51.460
> 
> 标签：python, django, django-rest-framework

```
class tags(models.Model):
    """ This is the tag model """
    tag = models.CharField(max_length=15)               # Tag name
    tagDescription = models.TextField()                 # Tag Description
    tagSlug = models.CharField(max_length=400)          # Extra info can be added to the existing tag using this field
    createdAt = models.DateTimeField(auto_now_add=True) # Time at which tag is created
    updatedAt = models.DateTimeField(auto_now=True)     # Time at which tag is updated

class stores(models.Model):
    """ This is the store model """
    storeName = models.CharField(max_length=15)                                          # Store Name
    storeDescription = models.TextField()                                                # Store Description
    storeURL = models.URLField()                                                         # Store URL
    storePopularityNumber = models.IntegerField(choices=PRIORITY_CHOICES,default=2)                # Store Popularity Number  
    storeImage = models.ImageField(upload_to="images")                                   # Store Image 
    storeSlug = models.CharField(max_length=400)                                         # This is the text you see in the URL
    createdAt = models.DateTimeField(auto_now_add=True)                                  # Time at which store is created
    updatedAt = models.DateTimeField(auto_now=True)                                      # Time at which store is updated
    storeTags = models.ManyToManyField(tags)                                             # All the tags associated with the store 
```

我想找出与特定标签相关的所有商店。 `for t in tags.objects.all(): print ([str(a.storeName) for a in t.stores_set.all()])` 通过使用上面的for循环，我可以获得与所有商店相关的所有标签......但实际上我正在使用Django rest-frameWork......现在我有一个使用序列化程序返回相关商店名称的视图到商店...

```
class tagList(generics.ListAPIView,APIView):

    serializer_class = getAllTagsDetailSerializer

    def get_queryset(self):
        key = self.request.QUERY_PARAMS.get('appKey', None)
        getTagName = self.request.QUERY_PARAMS.get('tagName', None)
        keyData = app.objects.filter(appKey=key).exists()    
        try:
            if keyData == True:

                return tags.objects.filter(tag=getTagName)
            else:
                raise exceptions.PermissionDenied
        except app.DoesNotExist:
            pass

`class getAllStoresDetailSerializer(serializers.ModelSerializer):
    storeImage = serializers.Field(source='imageURL')
    storeTags =serializers.Field(source='StoreTags')

    class Meta:
        model = stores
        fields = ('storeName','storeDescription','storeURL',
                    'storePopularityNumber','storeImage','storeTags',
                    'storeSlug','createdAt','updatedAt'
                 )`

class getAllTagsDetailSerializer(serializers.ModelSerializer):
    tagStores = RelatedField(Many=True)
    class Meta:
        model = tags
        fields = ('tagStores'                   
                    ) 
```

但这不起作用...有人可以帮我吗...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:26:09.683

很简单，用你的标签：

```
tag.store_set.all() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T16:26:27.440

```
t = Tag.objects.get(pk=1)
stores = t.stores_set.all() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T08:41:43.197

我找到了解决方案...

这是处理获取请求的类...

```
class tagList(generics.ListAPIView,APIView):
    model = tags
    serializer_class = getAllTagsDetailSerializer

    def get_queryset(self):
        key = self.request.QUERY_PARAMS.get('appKey', None)
        getTagName = self.request.QUERY_PARAMS.get('tagName', None)
        keyData = app.objects.filter(appKey=key).exists()    
        try:
            if keyData == True:
                return tags.objects.filter(tag=getTagName)
            else:
                raise exceptions.PermissionDenied
        except app.DoesNotExist:
            pass 
```

这个序列化器类：

```
class getAllTagsDetailSerializer(serializers.ModelSerializer):
    tagStores = serializers.Field(source='getAllStoreNames')

    class Meta:
        model = tags
        fields = ('tagStores') 
```

这是我的标签模型：

```
class tags(models.Model):
    """ This is the tag model """
    tag = models.CharField(max_length=15)               # Tag name
    tagDescription = models.TextField()                 # Tag Description
    tagSlug = models.CharField(max_length=400)          # Extra info can be added to the existing tag using this field
    createdAt = models.DateTimeField(auto_now_add=True) # Time at which tag is created
    updatedAt = models.DateTimeField(auto_now=True)     # Time at which tag is updated

    def __unicode__(self):
        """Method to display string correctly"""
        return unicode(self.tag)

    def getAllStoreNames(self):

        for t in tags.objects.filter(tag=self.tag):      
            return  ([str(a.storeName) for a in t.stores_set.all()])

    class Meta:
        """Meta class to control display Behavior of the Model name """
        verbose_name_plural = "Tags" 
```

如果有人想知道，让我解释一下...在我的类 tagList 中，我设置了一个由 return 设置的查询，`tags.objects.filter(tag=getTagName)`它将根据指定的 tagName 过滤掉所有商店的名称...然后它转到我所在的序列化程序类正在设置`tagStores = serializers.Field(source='getAllStoreNames')`然后它读取字段值并调用`getAllStoreNames`标签模型内部的标签模型，它返回与商店相关的标签的名称......如果有人知道更有效的解决方案，请分享......

# javascript - 如何获取视图区域的当前国家？

> ID：16065235
> 
> 赞同：0
> 
> 时间：2013-04-17T16:20:59.323
> 
> 标签：javascript, jquery, google-maps, country

以下部分代码为我提供了设置我的标记（不可拖动）的国家......</p>

```
for (var i = 0; i < results[0].address_components.length; i++) {
  if (results[0].address_components[i].types[0] == "country") {
     clientPositionMarkerCountry = results[0].address_components[i].long_name;
  }
} 
```

当用户移动到另一个国家（例如，在这个国家或任何其他国家旁边）时，我想获得他所在的视图区域的当前国家（或者如果可能的话，可能是当前国家）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T03:20:15.713

您是否正在寻找这样的东西：

[http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linktoB.html?lat=43.797409&lng=27.904508&zoom=6&type=m&filename=http://www.geocodezip.com/geoxml3_test/world_countries_kml.xml](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linktoB.html?lat=43.797409&lng=27.904508&zoom=6&type=m&filename=http://www.geocodezip.com/geoxml3_test/world_countries_kml.xml)

使用[geoxml3](https://code.google.com/p/geoxml3/)呈现 KML 文件。检测在视口中可见的国家多边形并将它们显示在边栏中。

# php - 限制产品列表中产品名称的字符数

> ID：16065238
> 
> 赞同：0
> 
> 时间：2013-04-17T16:21:08.217
> 
> 标签：php, list, magento, product

我正在尝试限制产品列表中产品名称的字符。我找到了这段代码：

```
// define the maximum length of the product name here
$maxLength = 10;
$productName = $_helper->productAttribute($_product, $_product->getName(), 'name');
echo substr($productName, 0, $maxLength); 
```

在我的主题中，我有以下代码：

```
 <h2 class="product-name"><a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->stripTags($_product->getName(), null, true) ?>"><?php echo $_helper->productAttribute($_product, $_product->getName(), 'name') ?></a></h2> 
```

我把它改成这样：

```
<h2 class="product-name"><a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->stripTags($_product->getName(), null, true) ?>"><?php $maxLength = 10;$productName = $_helper->productAttribute($_product, $_product->getName(), 'name');
echo substr($productName, 0, $maxLength);) ?></a></h2> 
```

我得到一个解析器错误。有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T17:49:03.510

当您遇到解析错误时，通常最好先在代码中添加换行符和缩进，因为它可以更清晰地概述您可能做错了什么。

在这种情况下，RS的回答指出了一个额外的括号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T17:49:57.870

```
<h2 class="product-name">
  <a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->stripTags($_product->getName(), null, true) ?>">
     <?php 
        $maxLength = 10;
        $productName = $_helper->productAttribute($_product, $_product->getName(), 'name');
        echo substr($productName, 0, $maxLength);)
     ?>                                      -----^
 </a>
</h2> 
```

应该

> echo substr($productName, 0, $maxLength);

你也可以使用`Mage::helper('core/string')->truncate($productName, $maxLength);`

# java - Guice 无界泛型绑定

> ID：16065239
> 
> 赞同：2
> 
> 时间：2013-04-17T16:21:10.700
> 
> 标签：java, generics, guice

我想提供通用实例而不在模块实现中明确说明通用参数。

假设我有一个非常优化的 Map 实现，并希望每个人都使用它。

```
class MyVeryOptimizedHashMap<K, V> implements Map<K, V> {} 
```

我知道，以下用法不是最好的设计模式，但就示例而言，这是一个有效的要求：

```
class SomeInjectee {
  @Inject
  private Map<String, Integer> myMap;
} 
```

要将此实例绑定到我选择的提供程序，请执行以下模块声明：

```
class GenericMapModule extends AbstractModule {
  protected void configure() {
    bind(new TypeLiteral<Map<String, Integer>>() {}).toProvider(new TypeLiteral<Provider<MyVeryOptimizedHashMap<String, Integer>>>() {});
  }
} 
```

问题是我必须明确声明泛型类型参数，我不可能对所有可能的类型都这样做：

```
class SomeOtherInjectee{
  @Inject
  private Map<SomeUnknownKey, Long> myMap;
} 
```

这解决了我的问题，但不是很优雅：

```
class GenericModule extends AbstractModule {
  protected void configure() {
    bind(new TypeLiteral<Map<?, ?>>() {}).toProvider(new Provider<Map<?,?>>() {
      public Map<?, ?> get() {
        return new MyVeryOptimizedHashMap();
      }
    });
  }
}

class SomeOtherInjectee {
  private Map<SomeUnknownKey, Long> myMap;

  @Inject
  void setMap(Map<?, ?> mapInstance) {
    myMap = (Map<SomeUnknownKey, Long>) mapInstance;
  }
} 
```

我正在寻找的是这样的：

```
class GenericModule extends AbstractModule {
  protected void configure() {
    bind(TypeLiteral.anyGenericVariant(Map.class)).toProvider(new TypeLiteral<Provider<MyVeryOptimizedHashMap>>(){});        
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:51:28.187

如果适用于您的情况，我会尝试使用静态实用程序方法。

```
class SomeOtherInjectee {
    private Map<SomeUnknownKey, Long> myMap = newOptimizedMap(); 
```

如果这不适用，那么正如您所见，Guice 在泛型方面非常精确，即每个泛型变体代表一个唯一的绑定。因此，anyGenericVariant 实际上必须列出所有可能的变体并提前进行绑定。疯狂的。

在这种情况下，您可以做的是使用 TypeListener 注册自定义注入。它看起来像

```
class SomeOtherInjectee {
    @InjectOptimizedMap private Map<SomeUnknownKey, Long> myMap; 
```

或您制作的任何自定义注入注释。

有关如何进行自定义注入[的完整示例和说明](http://code.google.com/p/google-guice/wiki/CustomInjections)，请参见此处。

# iphone - iOS 6 MFMessageComposeViewController 缺少消息正文文本字段

> ID：16065240
> 
> 赞同：0
> 
> 时间：2013-04-17T16:21:14.623
> 
> 标签：iphone, ios, ios6

我似乎对内置的消息编辑器有问题。我正在尝试通过 MFMessageComposeViewController 发送短信，其他一切似乎都工作正常，但在作曲家打开后消息文本字段丢失（我可以看到收件人）。

这可能是一个错误吗？我在使用 6.1.3 的 iPhone 5。

我如何称呼作曲家：

```
MFMessageComposeViewController *controller = [[MFMessageComposeViewController alloc] init];
if([MFMessageComposeViewController canSendText])
    {
        NSString* phoneNumber = [selectedContact getSMSPhoneNumber];
        if(![phoneNumber isEqualToString: @"[None]"]){
            controller.body = @"Dude this is some text";
            controller.recipients = [NSArray arrayWithObjects: phoneNumber, nil];
            controller.messageComposeDelegate = self;
            [self presentViewController:controller animated:YES completion:nil];
        }else{
            // Not yet implemented
        }
    } 
```

MFMessageComposeViewControllerDelegate：

```
- (void)messageComposeViewController:(MFMessageComposeViewController *)controller didFinishWithResult:(MessageComposeResult)result
{
    switch (result) {
        case MessageComposeResultCancelled:
            NSLog(@"Cancelled");
            break;
        case MessageComposeResultFailed:
            [self showErrorAlert];
            break;
        case MessageComposeResultSent:

            break;
        default:
            break;
    }

    [self dismissViewControllerAnimated:YES completion: nil];
} 
```

先感谢您

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-17T16:39:30.027

也许您可以测试它是否有效，使用此代码设置身体

```
NSString *emailBody = @"Your string";
[controller setMessageBody:emailBody isHTML:NO]; 
```

# powershell - 按显示名称而不是 ID 备份 GPO - powershell

> ID：16065241
> 
> 赞同：4
> 
> 时间：2013-04-17T16:21:20.590
> 
> 标签：powershell, powershell-2.0

我想用他们的名字而不是他们的 ID 来备份 GPO。目前我有：

```
$GPO_Temp_Backup = get-gpo -all -domain $domain

Foreach ($GPO in $GPO_Temp_Backup) {

$GPOBackup = Backup GPO -name $GPO.DisplayName -path ($Current_Drive + $GPO_Backup_Location) -Domain $domain;
write-host $GPO.DisplayName
} 
```

我可以根据需要发布脚本的任何其他部分，但大多数缺失的变量值对于这个问题应该无关紧要。截至目前，它仍将 GPO 备份为他们的 ID

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T20:00:39.800

所以我决定稍微改变一下代码，这样我就可以调试发生了什么。我添加了`writeout $GPOBackup`和`writeout $GPO`。有趣的是，这与我看到的相似。（示例取自 Microsoft 页面）

`writeout $GPOBackup`为我提供：

```
C:\PS>
Backup-Gpo -Name TestGPO -Path C:\GpoBackups -Comment "Weekly Backup"
DisplayName     : TestGPO
GpoId           : 35c12ab3-956c-45d5-973b-46b17d225f47
Id              : 2b509d4e-40f5-4337-82f7-458584555d0c
BackupDirectory : C:\GpoBackups
CreationTime    : 2/25/2009 8:48:19 PM
DomainName      : contoso.com
Comment         : Weekly Backup 
```

`writeout $GPO`为我提供：

```
Id: 35c12ab3-956c-45d5-973b-46b17d225f47
DisplayName : TestGPO
Path: cn={35c12ab3-956c-45d5-973b-46b17d225f47} 
```

正如您在第一个输出中看到的那样，有一个 GpoId 和一个 Id。第二个命令的输出突然将 Id 更改为最初的 GpoID。当`backup-gpo`命令保存 GPO 时，它会使用您从第一个代码块收到的 Id 来保存它。然后 Id 更改为`GpoId`. 我不知道为什么会发生这种情况，但无论如何，一旦我弄清楚了这一点，对我的修复就很简单了。以下代码允许我`backup GPOs`作为`DisplayName`

```
Foreach ($GPO in $GPO_Temp_Backup) {
$GPOBackup = Backup-GPO -name $GPO.DisplayName -path ($Current_drive + $GPO_Backup_Location + "\" + "{" + $GPO.Id + "}") -domain $domain
rename-item -path ($Current_drive + $GPO_Backup_Location + "\" + "{" + $GPOBackup.Id + "}") -newname $GPO.DisplayName
}
$oldfilename = ($Current_drive + $GPO_Backup_Location + "\" + "{" + $GPOBackup.Id + "}")
write $oldfilename 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-15T21:00:40.633

这是我编写的一个小脚本，用于备份域中的所有 GPO。这利用了 Backup-GPO 创建的 manifest.xml 文件来解决 Id 问题：

```
[CmdletBinding()]
param(
    [parameter()]
    [ValidateScript({Test-Path $_ -PathType Container})]
    [string]$Path = 'C:\GroupPolicy'
)

Get-GPO -All | Backup-GPO -Path $Path -Comment ('Backup taken: {0}' -f (Get-Date -Format G))
[xml]$manifest = Get-Content (Join-Path $Path 'manifest.xml')
foreach ($gpBackup in $manifest.Backups.BackupInst) {
    Rename-Item -Path (Join-Path $Path $gpBackup.Id.InnerText) -NewName ($gpBackup.GPODisplayName.InnerText -replace '[:\\/]','')
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T18:43:03.867

我想你可能只是使用 $gpobackup.id 来获取 guid，将其转换为文件夹路径，然后简单地使用重命名。例子：

```
$GPOBackup = Backup-GPO -name $GPO.DisplayName -path ($Current_Drive + $GPO_Backup_Location) -Domain $domain;
$guidpath = $($Current_Drive + $GPO_Backup_Location + '{' + $x.id.tostring() + '}' )
$newpath = $($Current_Drive + $GPO_Backup_Location + $GPOBackup.DisplayName)
rename-item -Path $guidpath -newname $newpath 
```

# javascript - 当用户滚动时，jQuery 窗口滚动停止触发

> ID：16065242
> 
> 赞同：0
> 
> 时间：2013-04-17T16:21:21.510
> 
> 标签：javascript, jquery, performance

当用户向下滚动一定数量的像素时，我会修复标题。但是，有没有办法在用户满足逻辑后停止调用窗口滚动函数呢？我认为这对性能不利。查看我的控制台截图（[http://d.pr/i/OHDX](http://d.pr/i/OHDX)）

```
$window.scroll(function() {
    if ($window.scrollTop() > 100) {
        $('.header').addClass('fixed');
        console.log('fix header'); 
    }
    else {
        $('.header').removeClass('fixed');
        console.log('unfix header'); 
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T16:23:25.787

您必须不断检查滚动位置。我假设您想在用户滚动回 100 时取消修复它？

您当前的实现在性能方面很好。您可以添加的一件事是检查该类是否尚未添加，或者保持切换以便您*知道*该类是否存在（而不是检查）。

```
$window.scroll((function() {
    var fixed = false, elem;
    return function () {
        var should_fix = $window.scrollTop() > 100;
        elem = elem || $('.header');
        if (should_fix !== fixed) {
            if (should_fix) {
                elem.addClass('fixed');
                console.log('fix header'); 
            } else {
                elem.removeClass('fixed');
                console.log('unfix header'); 
            }
            fixed = should_fix;
        }
    };
}()) // immediate invocation, because it's awesome 
```

# ruby-on-rails - Ruby 范围：case 语句中的运算符

> ID：16065244
> 
> 赞同：7
> 
> 时间：2013-04-17T16:21:28.163
> 
> 标签：ruby-on-rails, ruby

我想检查 my_number 是否在某个范围内，包括较高的值。

在 IF 语句中，我只需使用 "x > 100 && x <= 500"

但是在 Ruby 案例（开关）中我应该怎么做？

## 使用：

```
case my_number
when my_number <= 500
    puts "correct"
end 
```

不起作用。

### 笔记：

标准范围不包括 my_number 正好为 500 的情况，并且我不想添加第二个“when”，因为我必须编写 double Content

```
case my_number
# between 100 and 500
when 100..500
    puts "Correct, do something"
when 500
    puts "Correct, do something again"
end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T16:24:49.327

它应该像你说的那样工作。以下`case`构造*包含*值 500。

```
case my_number
# between 100 and 500
when 100..500
    puts "Correct, do something"
end 
```

所以：

```
case 500
  when 100..500
    puts "Yep"
end 
```

将返回`Yep`

**或者，如果值正好是**500 ，您想执行单独的操作吗？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-26T13:56:24.167

```
when -Float::INFINITY..0 
```

会做的伎俩:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T16:40:10.473

你可以这样做：

```
(1..500).include? x 
```

这也被称为`member?`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-15T11:39:06.037

这是一种根据需要`case`捕获的方法`"x > 100 && x <= 500`：封闭范围内的值，其中不包括起始值并包含结束值。此外，还显示了捕获之前和之后的范围。

```
case my_number
when ..100;         puts '≤100'
when   100..500;    puts '>100 and ≤500'
when        500..;  puts '>500'
end 
```

**说明：**

*   有一个末端的范围从`-Infinity`相应的开始。去`Infinity`。这是[在 Ruby 2.6 中引入的](https://developer.squareup.com/blog/rubys-new-infinite-range-syntax-0/)。
*   范围`x..y`包括结束值，范围`x...y`不包括结束值。
*   所有范围都包括起始值。`when`要创建没有起始值的范围的等价物，您可以在前面的情况中捕获起始值。这就是第二种`when`情况等同于您的`"x > 100 && x <= 500`eventhough的方式`(100..500).include? 100`。第三种情况类似。

# spotify - 自制的 Spotify 应用程序在重启后消失

> ID：16065247
> 
> 赞同：1
> 
> 时间：2013-04-17T16:21:31.890
> 
> 标签：spotify

我刚刚开始开发我的第一个 Spotify 应用程序。我设法让它工作，我还可以将它添加为“收藏夹”，以便它出现在菜单中的应用程序下。

但是每次我重新启动 Spotify 它都会消失！有人有解决方案吗？

我还尝试添加 Spotify Apps Tutorial 应用程序并使其成为最爱，但它也不断消失。

一年多前[在这里](https://stackoverflow.com/questions/10059013/custom-app-disappears-after-spotify-restart/)发布了同样的问题，但没有完整的答案，所以我认为现在有人可能有解决方案！

此致

比约恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T19:58:32.123

现在的行为与以前相同——因为应用程序列表在您的帐户中同步（即，将应用程序添加到您在一台机器上的收藏夹中，它会显示在登录到您帐户的另一台机器上），捆绑 ID 是'不在 App Finder 中的内容不会被保存。

# mysql - sequelize 上急切加载的关联

> ID：16065251
> 
> 赞同：0
> 
> 时间：2013-04-17T16:21:44.963
> 
> 标签：mysql, node.js, sequelize.js

我有以下实体：

```
var Group = sequelize.define("Group", { name: Sequelize.STRING });
var Course = sequelize.define("Course", { name: Sequelize.STRING });
var GroupHasCourse = sequelize.define("GroupHasCourse", { name: Sequelize.STRING });
var Student = sequelize.define("Group", {   name: Sequelize.STRING }); 
```

以及以下关联：

```
Course.hasMany(GroupHasCourse, { as: "GroupsOnCourses"});
Group.hasMany(GroupHasCourse, { as: "CoursesOnGroups"});
GroupHasCourse.hasMany(Student, { as: "Students"}); 
```

两个问题：

1.  这是在小组-课程关系之间建立联系以使学生进入主题的最佳方式吗？
2.  我正在执行以下查询：

    ```
    Course.findAll({include:[{model:GroupHasCourse, as:"GroupsOnCourses"}]}).success(function(courses){
        // courses[0].groupsOnCourses[0].GroupId
    }) 
    ```

    我怎样才能得到那个查询中的左连接，所以我不需要做另一个查询

    ```
    Group.find(courses[0].groupsOnCourses[0].GroupId) 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T18:20:52.827

您是否需要连接表以获取更多数据，或者您只是连接 Corse 和 Group？如果你只想连接它们，你可以这样做：

```
Course.hasMany(Group)
Group.hasMany(Course) 
```

这将自动为您创建连接表。如果你想要这种方式，你的下一个将是，你等待 Sequelize 1.6.1 的第一个 alpha/beta/whatever，它将支持多对多关联的急切加载。该版本将在一周内提供。

问候，斯德波尔德

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T05:25:37.567

所以这已经适用于 1.6.0：

```
var Sequelize = require('sequelize')
var sequelize = new Sequelize('sequelize_test', 'root')

var Group = sequelize.define("Group", { name: Sequelize.STRING })
var Course = sequelize.define("Course", { name: Sequelize.STRING })
var GroupHasCourse = sequelize.define("GroupHasCourse", { name: Sequelize.STRING })
var Student = sequelize.define("Group", {   name: Sequelize.STRING })

Course.hasMany(GroupHasCourse, { as: "GroupsOnCourses"})
Group.hasMany(GroupHasCourse, { as: "CoursesOnGroups"})
GroupHasCourse.hasMany(Student, { as: "Students"}).belongsTo(Group).belongsTo(Course)

sequelize.sync({ force: true }).success(function() {
  Group.create({ name: 'group' }).success(function(group) {
    Course.create({ name: 'course' }).success(function(course) {
      GroupHasCourse.create({ name: 'bla' }).success(function(groupHasCourse) {
        groupHasCourse.setGroup(group).success(function() {
          groupHasCourse.setCourse(course).success(function() {
            GroupHasCourse.findAll({
              include: [ Group, Course ]
            }).success(function(groupHasCourses) {
              console.log(groupHasCourses[0].values)
            })
          })
        })
      })
    })
  })
}) 
```

# asp.net - 如果弹出窗口 radWindow 已关闭，我如何在父级中确定？

> ID：16065252
> 
> 赞同：3
> 
> 时间：2013-04-17T16:21:47.587
> 
> 标签：asp.net, telerik, popupwindow, radwindow

我有一个应用程序，用户单击父窗口上的按钮以显示弹出窗口。当用户关闭弹出窗口时，我如何确定（在父窗口代码隐藏中）用户已经关闭了弹出窗口？

这是关闭弹出窗口的代码：

```
<script language="javascript" type="text/javascript">
function closeWin() {
    GetRadWindow().Close();
}  
</script>

<asp:Button ID="btnClose" runat="server" Text="Close" 
OnClientClick="closeWin();return false;" onclick="btnClose_Click"/> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T16:33:00.633

RadWindowManager 和 RadWindow 都有 onClientClose 事件。

一旦 RadWindow 关闭，`OnClientClose`就会被调用。然后，您可以通过 Ajax 或完整的回传调用父页面的代码。

## 父页面

```
<telerik:RadWindowManager .... OnClientClose="clientClose">         
</telerik:RadWindowManager>
OR
<telerik:RadWindow ... OnClientClose="clientClose">
</telerik:RadWindow>

<telerik:RadAjaxManager ... ID="RadAjaxManager1" 
    OnAjaxRequest="RadAjaxManager1_AjaxRequest">
</telerik:RadAjaxManager> 
```

## 父页面内的脚本

```
function clientClose(oWnd, args) {
   // Optional arguments passed from RadWidow
   var arg = args.get_argument(); 

   // Here the example for ajax post back using RadAjaxManager
   $find("<%= RadAjaxManager1.ClientID %>").ajaxRequest(arg);
} 
```

## 父页面代码后面

```
protected void RadAjaxManager1_AjaxRequest(object sender, AjaxRequestEventArgs e)
{
   // Argument passed by child window. It is an optional.
   if (e.Argument == "xxx")
   {
      // Do something
   }
} 
```

## 更新：从子窗口收集返回参数

```
<script language="javascript" type="text/javascript">
function closeWin(arg) {
    GetRadWindow().Close(arg);
}  
</script>

<asp:Button ID="btnClose" runat="server" Text="Close" 
OnClientClick="closeWin('something');return false;" onclick="btnClose_Click"/> 
```

# c# - 验证共享点 Web 服务错误

> ID：16065253
> 
> 赞同：0
> 
> 时间：2013-04-17T16:21:54.627
> 
> 标签：c#, web-services, visual-studio, sharepoint

我正在尝试针对 authentication.asmx Web 服务进行身份验证。

在 Visual Studio 中，我右键单击我的项目并单击“添加服务引用”。

我在地址中输入以下内容：

```
https://my-domain.com/sp/testsite/_vti_bin/Authentication.asmx 
```

然后单击“开始”按钮。然后我收到以下错误。我可以通过浏览器访问网络服务而没有任何问题，所以不确定我做错了什么。

```
The document at the url https://my-domain.com/sp/testsite/_vti_bin/Authentication.asmx was not recognized as a known document type.
The error message from each known type may help you fix the problem:
- Report from 'https://my-domain.com/sp/testsite/_vti_bin/Authentication.asmx' is 'The document format is not recognized (the content type is 'text/html; charset=utf-8').'.
- Report from 'DISCO Document' is 'There was an error downloading 'https://my-domain.com/_vti_bin/Authentication.asmx?disco'.'.
  - The request failed with HTTP status 404: Not Found.
- Report from 'WSDL Document' is 'The document format is not recognized (the content type is 'text/html; charset=utf-8').'.
- Report from 'XML Schema' is 'The document format is not recognized (the content type is 'text/html; charset=utf-8').'.
Metadata contains a reference that cannot be resolved: 'https://my-domain.com/sp/testsite/_vti_bin/Authentication.asmx'.
Metadata contains a reference that cannot be resolved: 'https://my-domain.com/sp/testsite/_vti_bin/Authentication.asmx'.
If the service is defined in the current solution, try building the solution and adding the service reference again. 
```

# sharepoint - sharepoint 子站点 SPWeb.AllUsers 和 SPWeb.SiteUsers 之间的区别？

> ID：16065255
> 
> 赞同：1
> 
> 时间：2013-04-17T16:22:04.847
> 
> 标签：sharepoint, sharepoint-2010

基于 MS：

**SPWeb.AllUsers 获取用户对象的集合，这些用户对象代表作为站点成员或作为站点中域组的经过身份验证的成员浏览到站点的所有用户。**

注意“**浏览到**”这个词

**SPWeb.SiteUsers 获取属于网站集的所有用户的集合。**

我的问题是：这是否意味着 SiteUsers 是网站集中所有子网站的 AllUsers 的组合？这意味着，仅包括**作为站点中域组的经过身份验证的成员浏览到站点的人**？或者，它包括尚未浏览的用户？

如果我想获取所有用户，**包括站点成员并且有权浏览站点作为站点中域组的经过身份验证的成员，该**怎么做？这是否意味着我们必须获取AD中的所有组，然后检查该组是否具有该站点的权限？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T02:34:40.803

检查此链接[users-vs-allusers-vs-siteusers](http://snahta.blogspot.ca/2008/12/users-vs-allusers-vs-siteusers.html)

站点用户 > 所有用户 > 用户

用户 => 明确向站点提供用户权限
AllUsers => 通过某些组成员身份访问该站点的用户 + 用户
SiteUsers => 所有子站点的所有用户 + 网站集管理员

# magento - 将订单项添加到 Magento 中的订单网格

> ID：16065256
> 
> 赞同：1
> 
> 时间：2013-04-17T16:22:09.817
> 
> 标签：magento

我正在尝试使用 Grid.php 将订购的产品添加到管理员中的订单网格。

```
app\code\core\Mage\Adminhtml\Block\Sales\Order\Grid.php 
```

我还向此视图添加了另一个客户属性。当我添加产品列表时，找到的订单数量总是设置为一个，它不会让我转到下一页订单。

![在此处输入图像描述](https://i.stack.imgur.com/jwYDo.png)

这是我设法添加的代码。

```
protected function _prepareCollection()
{
    $collection = Mage::getResourceModel($this->_getCollectionClass());
    $collection->getSelect()->join('sales_flat_order_item', '`sales_flat_order_item`.order_id=`main_table`.entity_id', array('name'  => new Zend_Db_Expr('group_concat(`sales_flat_order_item`.name SEPARATOR ", ")')));
    $collection->getSelect()->group('entity_id');
    $collection->getSelect()->joinLeft(
                array('cev' => 'customer_entity_varchar'),
                '(main_table.customer_id = cev.entity_id AND cev.attribute_id = 141 AND main_table.customer_id IS NOT NULL)',
                array(
                    'admin_number' => 'cev.value',
                )
            );

    $this->setCollection($collection);
    return parent::_prepareCollection();
}

   $this->addColumn('admin_number', array(
            'header' => Mage::helper('sales')->__('Admin Number'),
            'filter_index' => 'cev.value',
            'index' => 'admin_number'
    ));

$this->addColumn('name', array(
        'header'    => Mage::helper('Sales')->__('Products'),
        'width'     => '100px',
        'index'     => 'name',
        'type'        => 'text',

    )); 
```

希望有人能帮我看看有什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-28T10:22:00.753

```
 protected function _prepareCollection()
        {
    $userArray = Mage::getSingleton('admin/session')->getData();
    $user = Mage::getSingleton('admin/session');
    $userId = $user->getUser()->getUserId();

    $connection = Mage::getSingleton('core/resource')->getConnection('core_read');
    $sql        = "Select * from sales_flat_order_grid as sss, junaidbhura_jbmarketplace_products as vitem, sales_flat_order_item as item WHERE vitem.product_id = item.product_id and sss.entity_id = item.order_id and vitem.user_id = $userId";
    $rows       = $connection->fetchAll($sql); //fetchRow($sql), fetchOne($sql),...
    //Zend_Debug::dump($rows);
    $pk = 0;
    foreach($rows as $value){
    $pkorder[] = $rows[$pk]['order_id'];
    $pk++;
    }

    //print_r( $pkorder);

    //print_r($userId);
    //die;

            $collection = Mage::getResourceModel($this->_getCollectionClass());
            if($userId == 1 ){ }else{
            $collection->addFieldToFilter('entity_id', array('in' => array( $pkorder )));
            }
            $this->setCollection($collection);
            return parent::_prepareCollection();
        } 
```

# c# - 序列化类时出现 NetDispatcherFaultException

> ID：16065257
> 
> 赞同：0
> 
> 时间：2013-04-17T16:22:10.200
> 
> 标签：c#, .net, wcf

我有这个课程：

```
public class Container
{
  public IEventQueue GetEventQueue(){returns a DerivedEventQueue}
}

ComVisible(true), ComDefaultInterface(typeof(IEventQueue ))]
   [ClassInterface(ClassInterfaceType.None)]
   [Guid("XXX-XXX-XXX-XXX")]
   [ProgId("XXXX")]
   [DataContract]
   [KnownType(typeof(DerivedEventQueue))]
   public EventQueue: IEventQueue
   {
      public MyEvent GetEvent(){...}
   }

 [DataContract]
 [KnownType(typeof(DerivedEventQueue))] //doesnt matter if I have this line or not, I got the same error
//[System.Serializable]
  public class DerivedEventQueue: EventQueue, IEventSink
  {
   ...
  } 
```

当我调用 GetEventQueue 时，出现以下异常：

System.ServiceModel.Dispatcher.NetDispatcherFaultException：格式化程序在尝试反序列化消息时抛出异常：尝试反序列化参数 XXXX:GetEventQueueResult 时出错。InnerException 消息是 'Element 'XXXX:GetEventQueueResult' 包含 'XXX:DerivedEventQueue' 数据协定的数据。反序列化器不知道映射到该合约的任何类型。将与“DerivedEventQueue”对应的类型添加到已知类型列表中 - 例如，通过使用 KnownTypeAttribute 属性或将其添加到传递给 DataContractSerializer 的已知类型列表中。有关更多详细信息，请参阅 InnerException。---> System.Runtime.Serialization.SerializationException：元素'XXXX：GetEventQueueResult'包含'XXXX：的数据：DerivedEventQueue 的数据合约。反序列化器不知道映射到该合约的任何类型。将与“DerivedEventQueue”对应的类型添加到已知类型列表中 - 例如，通过使用 KnownTypeAttribute 属性或将其添加到传递给 DataContractSerializer 的已知类型列表中。

DerivedEventQueue 在基类的 KnownType 属性中，所以我不知道为什么会出现这个异常。谁能告诉我为什么我会得到这个例外？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:10:50.697

我很想在服务级别上添加已知类型的 aytribite。

另外，我认为错误来自您返回的接口，因为 wcf 不知道如何反序列化它。

有关已知类型的更多详细信息，另请参见[http://msdn.microsoft.com/en-us/library/ms730167.aspx](http://msdn.microsoft.com/en-us/library/ms730167.aspx)

# r - 如何限制 R 中自定义函数中的输入值？

> ID：16065259
> 
> 赞同：0
> 
> 时间：2013-04-17T16:20:26.263
> 
> 标签：r, function

我写了一个定制的em算法函数。我要估计三个参数。这三个参数都在0到1之间，加起来等于1。所以我想我只需要在我的函数中放两个参数，alpha和beta，第三个参数就是1-alpha-beta。我的问题是如何让函数知道这两个输入只能取 0 到 1 之间的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T01:29:50.533

我不太清楚所讨论的函数是依赖于这些值（alpha，beta）还是返回它们......

可以这么简单吗：

```
fun1 <- function(a,b){
    if(a<=0 | b<=0) warning("value of a or b <=0")
    if(a>=1 | b>=1) warning("value of a or b >=1")
### function does something
    a1 <- a
    b1 <- b
    return(c(a1,b1,(1-a1-b1)))
    } 
```

在这里，您在运行函数之前检查输入。

该功能仍将运行，但会警告用户，例如

```
> fun1(0.25,0.5)
[1] 0.25 0.50 0.25 
```

但

```
> fun1(1.25,-0.5)
[1]  1.25 -0.50  0.25
Warning messages:
1: In fun1(1.25, -0.5) : value of a or b <=0
2: In fun1(1.25, -0.5) : value of a or b >=1 
```

查看`?stop`是否要因输入值而停止执行并返回错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-17T06:35:35.247

如果您没有使用`mixtools`实现 EM（期望最大化）算法的 R 包之一，那么您的问题实际上与 R 无关。

您必须对如何限制参数值做出算法决定，`alpha`并且`beta`. 正如[Paul Hiemstra](https://stackoverflow.com/users/1033808/paul-hiemstra)建议的那样，您可能正在寻找所谓的*constrained optimization 。*该决定将取决于您尝试解决的问题的统计（或数学或物理等）含义。

如果您处于初学者级别，我建议您从最简单和最严格的方法开始：在迭代过程中，如果您的参数超出允许的区间，请将其值设置为相应的限制。像这样的东西：

```
alpha = min(1, max(0, alpha)) 
```

# c# - 在 DataRow 元素中更改 Datetime 对象的格式

> ID：16065263
> 
> 赞同：0
> 
> 时间：2013-04-17T16:22:34.243
> 
> 标签：c#, .net, sql-server, ms-access

我创建了一个 DataRow 数组：OBrienData from a data table build from a access 数据库。我想将其内容映射到另一个 DataRow 数组 NewClientData，该数组最终将映射到 mssql 数据库。请不要指出还有其他方法可以从 Access 映射到 Mssql，因为我正在这样做作为练习。一切正常，直到我开始映射 Datetime 对象。我得到一个 sql 溢出错误。当我查看时，我看到访问中的日期时间对象的格式与我对 mssql 数据库所需的格式不同。

```
string dateString,format="u";                                                                     
NewCaseData[i]["Date_Opened"] = DateTime.ParseExact(OBrienData[z]["Date opened"].ToString(), format,System.Globalization.CultureInfo.InvariantCulture);
NewCaseData[i]["Date_Closed"] = String.Format("{0:u}", OBrienData[z]["Date closed"]); 
```

所以我尝试了上面的代码。ParseExact 给出了一个错误：“字符串无效”并且 string.format 根本没有改变？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:59:17.927

我最初收到一个 sql 溢出错误。当我检查 ms 数据库中的数据时，我发现一些数据已损坏，null 等。所以我在 post: 7054782 中使用了 try parse 方法来验证每个值并正常复制或设置为 datetime.now 或 dbnull 值。

# objective-c - UITableview 中的核心数据对象在更新对象时消失

> ID：16065266
> 
> 赞同：1
> 
> 时间：2013-04-17T16:22:38.580
> 
> 标签：objective-c, core-data, nsfetchedresultscontroller

我有这个与更新我的 NSManagedObject 相关的奇怪问题。当我尝试更新其属性之一时，它会在 UITableview 中消失，并且只有在我从核心数据重新获取时才会再次消失。我认为这是由我如何在另一个线程中获取我的实体的内容引起的，如下所示：

```
[[[DataManager sharedInstance] backgroundManagedObjectContext] performBlock:^{

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    fetchRequest.entity = [NSEntityDescription entityForName:@"Ret" inManagedObjectContext:[[DataManager sharedInstance] backgroundManagedObjectContext]];

    fetchRequest.predicate = [NSPredicate predicateWithFormat:@"menu.name == %@ ", self.menu.name];

    fetchRequest.resultType = NSManagedObjectIDResultType;

    NSArray *results =  [[[DataManager sharedInstance] backgroundManagedObjectContext] executeFetchRequest:fetchRequest error:nil];

    NSLog(@"%@", [NSThread currentThread]);
    dispatch_async(dispatch_get_main_queue(), ^{

        [self loadWithObjectIDs:results];
        [_theTableview reloadData];

    });

}]; 
```

这是在 viewDidAppear 方法中触发的。

然后我的 NSFetchResultsController 方法在主线程上更新 UI：

```
-(void)loadWithObjectIDs:(NSArray *)objectsIDs {

    _theManagedObjectContext = [[DataManager sharedInstance] mainManagedObjectContext];

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    fetchRequest.entity = [NSEntityDescription entityForName:@"Ret" inManagedObjectContext:_theManagedObjectContext];

   fetchRequest.predicate = [NSPredicate predicateWithFormat:@"SELF IN %@ ", objectsIDs];

    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"name" ascending:YES];
    fetchRequest.sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor, nil];

    [NSFetchedResultsController deleteCacheWithName:@"dishes"];
    self.fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:_theManagedObjectContext sectionNameKeyPath:nil cacheName:@"dishes"];
    _fetchedResultsController.delegate = self;

    NSError *error = nil;   

    if (![_fetchedResultsController performFetch:&error]) {
        NSLog(@"Fetch Failed");

    }

    NSArray *contentsOfFetch = _fetchedResultsController.fetchedObjects;

} 
```

然后在另一个连接到我的 UITableViewCell 中的按钮的方法中，我更新了我的 NSMangedObject 的属性：

```
-(void)addTC:(UIButton *)sender {

   //sender.tag equals indexPath.row
   NSIndexPath *ip = [NSIndexPath indexPathForRow:sender.tag inSection:0];

    Ret *ret = (Ret*)[_fetchedResultsController objectAtIndexPath:ip];

   //The Cell disappears if I use this code to update my attribute. 

   NSInteger amountToUpdate = ret.amount.intValue;
    amountToUpdate++;
    ret.amount = [NSNumber numberWithInt:amount];

    /*Method to Save Main Context: includes:  
    NSError *error = nil;
    if (![context save:&error]) {

    }*/

    [self saveCurrentContext:_theManagedObjectContext];

  } 
```

当我更新其属性时，我将如何解决这个小问题，以便 NSManagedObject 在我的 UITableview 中不会消失？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:54:43.793

我认为在您的设置中使用获取的结果控制器 (FRC) 作为表视图数据源没有任何优势。FRC 对于自动更新表视图的更改跟踪很有用。但这不适用于这里，因为实际的获取是在后台线程上完成的，并且获取的对象被传递（通过对象 id）到主线程。

*如果托管对象 id 是临时 id*，也可能存在问题。如果对象被保存，则 id 会更改（成为永久 id）。这可以解释为什么该对象会从表格视图中消失。

因此，您可以尝试的一件事是`obtainPermanentIDsForObjects:`在将 id 传递给主线程之前调用后台线程中的所有对象。

或者，您可以只执行一个简单的 fetch

```
self.dataSourceArray = [_theManagedObjectContext executeFetchRequest:fetchRequest error:&error];
[self.tableView reloadData]; 
```

并将此数组用作表视图数据源。在这种情况下，如果您修改对象，`reload/insert/deleteRowsAtIndexPaths`则必须在必要时调用。

# python - 以追加模式写入python中的新行

> ID：16065268
> 
> 赞同：1
> 
> 时间：2013-04-17T16:22:44.477
> 
> 标签：python, file-io, append, newline

如何在 python 中为现有文件追加新行？

我的代码是：

```
 status_done="Completed"
        f = open("%s\%s%s" % (path,self.filename,filelog_ext),"a")
        data=("%s \r" % status_done)        
        f.writelines(data) 
```

我试过 \r ， \n ，两者都 \r\n 都不起作用，它总是附加到现有行的末尾

这是它给我的输出：

第 1 行：[http://www.md5.com 已完成](http://www.md5.comCompleted)

我希望 Completed 在新行上，即：

第 1 行：[http ://www.md5.com](http://www.md5.com)

第2行：已完成

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T16:24:22.630

怎么样

```
data="\r\n%s" % status_done  
f.write(data) 
```

作为进一步的解释，您在“完成”之后添加换行符......这只是将换行符移动到您的字符串之前，以便您的字符串出现在换行符上

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-15T21:20:40.383

你也可以使用

```
with open("File.txt", "ab") as myfile: 
```

“ab”将使其以二进制模式附加，其中包括转义的行字符。

# boost - boost build：运行“bjam install”后未创建“lib”目录

> ID：16065275
> 
> 赞同：3
> 
> 时间：2013-04-17T16:23:08.107
> 
> 标签：boost

我用这些命令构建了 boost：

`bootstrap`

`b2 --toolset=msvc --build-type=complete architecture=x86 address-model=64 stage`

之后`boost`构建，但其中没有`lib`文件夹。要创建`lib`我尝试运行的文件夹

`bjam install`

但这无济于事。我应该运行什么命令来创建`lib`文件夹？

**upd**我已经使用此命令成功安装了库，`bjam --prefix=. install`但由于某种原因，并非所有库都已安装，而仅安装了“libboost * .lib”......现在的问题是为什么我在文件夹中有“libboost * .lib”文件`lib`但`*.dll`文件缺失..

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-17T18:44:55.630

Boost有一个`libs`文件夹，而不是`lib`文件夹。目标文件存储在`bin.v2/libs/library_name/compiler_name/build/(debug or release)/link-static/threading-multi`. Boost 不使用 DLL，但它使用目标文件。这些在构建时通过使用 bjam/b2 与您的程序链接。另外，您使用的是什么编译器，您是否在 user-config.jam 中对其进行了配置？此外，保存引导程序的目录应包含以下目录：`bin.v2, boost, doc, libs, more, stage, status, tools`.

# apache - 在 Play 框架 2.1 上集成 Apache Shiro

> ID：16065276
> 
> 赞同：1
> 
> 时间：2013-04-17T16:23:14.330
> 
> 标签：apache, frameworks, playframework-2.1, shiro

我正在尝试将 Apache Shiro 集成到 Play framework 2.1 我正在使用一个支持 play framework 2.0的开源项目（[https://github.com/wsargent/play-shiro ）](https://github.com/wsargent/play-shiro)

我试图将此应用程序从 play 2.0 迁移到 2.1，但是在编译项目时我不断收到这些错误...

有谁知道如何处理这个错误？

```
[play-shiro] $ compile
[info] Updating {file:/Users/shai/Documents/Projects/opensource/play-shiro/}play-shiro...
[info] Done updating.                                                        
[info] Compiling 13 Scala sources and 1 Java source to /Users/shai/Documents/Projects/opensource/play-shiro/target/scala-2.10/classes...
[error] /Users/shai/Documents/Projects/opensource/play-shiro/app/views/login.scala.html:0: not found: type Flash
[error] /Users/shai/Documents/Projects/opensource/play-shiro/app/views/login.scala.html:1: not found: type Flash
[error] @(form: Form[(String,String)])(implicit flash: Flash)
[error]                                               ^
[error] /Users/shai/Documents/Projects/opensource/play-shiro/app/controllers/Login.scala:36: type mismatch;
[error]  found   : play.api.data.Form[(String, String)]
[error]  required: play.data.Form[(String, String)]
[error]     Ok(html.login(loginForm))
[error]                   ^
[error] /Users/shai/Documents/Projects/opensource/play-shiro/app/controllers/Login.scala:44: type mismatch;
[error]  found   : play.api.data.Form[(String, String)]
[error]  required: play.data.Form[(String, String)]
[error]       formWithErrors => { BadRequest(html.login(formWithErrors)) },
[error]                                                 ^
[error] /Users/shai/Documents/Projects/opensource/play-shiro/app/views/register.scala.html:0: not found: type Flash
[error] /Users/shai/Documents/Projects/opensource/play-shiro/app/views/register.scala.html:1: not found: type Flash
[error] @(form: Form[(String,String)])(implicit flash: Flash)
[error]                                               ^
[error] /Users/shai/Documents/Projects/opensource/play-shiro/app/controllers/Register.scala:30: type mismatch;
[error]  found   : play.api.data.Form[(String, String)]
[error]  required: play.data.Form[(String, String)]
[error]     Ok(html.register(registerForm))
[error]                      ^
[error] /Users/shai/Documents/Projects/opensource/play-shiro/app/controllers/Register.scala:37: type mismatch;
[error]  found   : play.api.data.Form[(String, String)]
[error]  required: play.data.Form[(String, String)]
[error]           BadRequest(html.login(formWithErrors))
[error]                                 ^
[error] /Users/shai/Documents/Projects/opensource/play-shiro/app/views/login.scala.html:19: value map is not a member of play.data.validation.ValidationError
[error]             @form.globalError.map { error =>
[error]                               ^
[error] /Users/shai/Documents/Projects/opensource/play-shiro/app/views/login.scala.html:53: not found: type Flash
[error] /Users/shai/Documents/Projects/opensource/play-shiro/app/views/login.scala.html:55: not found: type Flash
[error] /Users/shai/Documents/Projects/opensource/play-shiro/app/views/register.scala.html:18: value map is not a member of play.data.validation.ValidationError
[error]   @form.globalError.map { error =>
[error]                     ^
[error] /Users/shai/Documents/Projects/opensource/play-shiro/app/views/register.scala.html:51: not found: type Flash
[error] /Users/shai/Documents/Projects/opensource/play-shiro/app/views/register.scala.html:53: not found: type Flash
[error] 14 errors found
[error] (compile:compile) Compilation failed
[error] Total time: 3 s, completed Apr 17, 2013 7:00:42 PM
[play-shiro] $ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T08:37:29.010

我已将代码升级到 2.1，但请考虑改用 Play Authenticate 或 SecureSocial。此代码从未打算成为生产质量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T12:58:13.297

从 Play 升级后！2.0 玩！2.1，你有没有运行过以下命令？

```
play clean
play clean-files
play compile 
```

这通常是那些编译问题的原因。

如果问题仍然存在，请查看[迁移指南](http://www.playframework.com/documentation/2.1.0/Migration)以检查您是否确实遵循了所有必需的步骤。

# xml - 使用 Xdocument 按名称获取 xml 元素的值

> ID：16065281
> 
> 赞同：2
> 
> 时间：2013-04-17T16:23:38.007
> 
> 标签：xml, linq-to-xml

我有以下xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<video contenttype="asf" fileextension=".wmv" hascontent="no" lang="en-GB" length="430" pid="45202118763477" sid="">
    <lastmodified timestamp="1366113600000">
        Tue, 16 Apr 2013 12:00:00 +0000
    </lastmodified>
    <links/>
    <keywords/>
    <slides/>
    <copyright>
        Copyright owned by original broadcaster
    </copyright>
    <title>
        BBC News
    </title>
    <comment>
        The latest news updates from around the world.
    </comment>
    <author>
        BBC World Sv_
    </author>
    <email/>
    <captioning/>
    <extendeddata>
        <data name="keepOriginal">
            0
        </data>
        <data name="keepTranscoded">
            0
        </data>
        <data name="realStartTime">
            1366113604
        </data>
        <data name="scheduledStartTime">
            1366113600
        </data>
        <data name="broadcastLength">
            360
        </data>
        <data name="broadcastChannel">
            BBC World Sv_
        </data>
        <data name="paddingUsed">
            0
        </data>
        <data name="transcodingSpec"/>
        <data name="transcoding">
            succeeded
        </data>
        <data name="transcodingProfile">
            -b 2.35M -a 128k --debug  --primary-format mp4 --podcast &quot;-l 270 -b 400 -R 48 -B 64&quot; --keep-files true
        </data>
        <data name="transcoderDetails">
            ver 1.58.2.5, 2013-04-16  13:08:08 up 42 days, 12:00,  0 users,  load average: 0.35, 0.13, 0.07, OS20031 212.70.71.204
        </data>
        <data name="originalFilename">
            /var/lib/etvd/mpegts/BBC World Sv_/BBC News (16-Apr-2013 13.00).emcast
        </data>
        <data name="originalRecordingTime">
            created 2013-04-16 , last modified 2013-04-16 : recording lasted 0s
        </data>
        <data name="primaryFormat">
            mp4
        </data>
        <data name="doXml">
            True
        </data>
        <data name="doFiles">
            True
        </data>
    </extendeddata>
    <categories>
        <category name="em:podcast">
            mp4
        </category>
    </categories>
</video> 
```

使用 XDocument，我可以进入`<extendeddata>`返回所有数据节点和值的精细的后代，但是我如何根据数据属性的名称专门获取一个值？因此，例如，我想进入一个特定的元素，例如：`<data-name="realStartTime">1366113604</data>`1366113604 作为我想退出的值。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:12:21.257

您需要基本上过滤您想要的一个元素。一旦你调用`Descendants`了 ，你就有了一个元素的集合，你需要过滤那些具有`name`值为 的属性的元素`realStartTime`。这是实现这一目标的一种方法：

```
var realStartTime =
    xdoc.Descendants("data")
        .Single(x => x.Attribute("name").Value == "realStartTime")
        .Value
        .Trim(); 
```

的值`realStartTime`将是`1366113604`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T17:12:26.860

获取`extendeddata`元素后，您需要像这样过滤属性`data`上的子元素`name`

```
var doc = XDocument.Parse(...);

var result = doc.Descendants("extendeddata")
    .Elements()
    .Single(x => x.Attribute("name") != null && x.Attribute("name").Value == "realStartTime")
    .Value; 
```

# java - Android主页按钮，计时器问题

> ID：16065287
> 
> 赞同：0
> 
> 时间：2013-04-17T16:24:14.630
> 
> 标签：java, android, hide, android-homebutton

每次按下主页按钮后运行应用程序时，我的应用程序似乎都会重新启动。该应用程序有一个`Timer`需要在按下主页按钮后继续。如果打开，我会覆盖后退按钮以最小化应用程序`Timer`，有没有办法使用主页按钮来做到这一点？

我`onResume()`现在是这样的：

```
@Override
public void onResume() {
    super.onResume();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:27:51.853

> The App has a Timer() which needs to continue once the Home button is pressed.

I suggest a different approach: log the time the Timer started and simply recreate the Timer in `onResume()`. This way you don't have to worry about the app being killed, running the Timer in a service, etc. If you want a task to be run while the app is paused, setup a AlarmManager event in `onPause()`.

* * *

> I override the Back button to Minimise the app if the Timer() is on, is there a way to do this with the Home button?

To address this specifically, you can use [`onUserLeaveHint()`](http://developer.android.com/reference/android/app/Activity.html#onUserLeaveHint%28%29) or the generalized `onPause()`.

# mysql - 从名称列生成 slug 名称列的简单方法？

> ID：16065288
> 
> 赞同：10
> 
> 时间：2013-04-17T16:24:20.177
> 
> 标签：mysql, sql

`db_products`桌子：

```
| ID | Name         |
| 40 | Foo Bar!~~~~ | 
```

我想生成一个 slug 名称列：

```
| ID | Name         | Slug_Name |
| 40 | Foo Bar!~~~~ | foo-bar   | 
```

这实际上可以通过 SQL 完成吗？还是我需要使用不同的语言编写脚本？

编辑：我正在使用这个函数在 PHP 中生成 slug：

```
function toSlug($string,$space="-") {
    if (function_exists('iconv')) {
        $string = @iconv('UTF-8', 'ASCII//TRANSLIT', $string);
    }
    $string = preg_replace("/[^a-zA-Z0-9 -]/", "", $string);
    $string = strtolower($string);
    $string = str_replace(" ", $space, $string);
    return $string;
} 
```

到目前为止，我的 SQL 技能相当基础。

`ALTER TABLE db_products ADD Slug_Name VARCHAR`

如何循环遍历每一行并设置`Slug_Name = toSlug(Name)`但在 SQL 中？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-07-06T11:36:54.780

这是一个使用单个查询的简单解决方案：

```
UPDATE `my_table` SET alias = lower(name),
alias = replace(alias, '.', ' '),
alias = replace(alias, '\'', '-'),
alias = replace(alias,'š','s'),
alias = replace(alias,'Ð','Dj'),
alias = replace(alias,'ž','z'),
alias = replace(alias,'Þ','B'),
alias = replace(alias,'ß','Ss'),
alias = replace(alias,'à','a'),
alias = replace(alias,'á','a'),
alias = replace(alias,'â','a'),
alias = replace(alias,'ã','a'),
alias = replace(alias,'ä','a'),
alias = replace(alias,'å','a'),
alias = replace(alias,'æ','a'),
alias = replace(alias,'ç','c'),
alias = replace(alias,'è','e'),
alias = replace(alias,'é','e'),
alias = replace(alias,'ê','e'),
alias = replace(alias,'ë','e'),
alias = replace(alias,'ì','i'),
alias = replace(alias,'í','i'),
alias = replace(alias,'î','i'),
alias = replace(alias,'ï','i'),
alias = replace(alias,'ð','o'),
alias = replace(alias,'ñ','n'),
alias = replace(alias,'ò','o'),
alias = replace(alias,'ó','o'),
alias = replace(alias,'ô','o'),
alias = replace(alias,'õ','o'),
alias = replace(alias,'ö','o'),
alias = replace(alias,'ø','o'),
alias = replace(alias,'ù','u'),
alias = replace(alias,'ú','u'),
alias = replace(alias,'û','u'),
alias = replace(alias,'ý','y'),
alias = replace(alias,'ý','y'),
alias = replace(alias,'þ','b'),
alias = replace(alias,'ÿ','y'),
alias = replace(alias,'ƒ','f'),
alias = replace(alias, 'œ', 'oe'),
alias = replace(alias, '€', 'euro'),
alias = replace(alias, '$', 'dollars'),
alias = replace(alias, '£', ''),
alias = trim(alias),
alias = replace(alias, ' ', '-'),
alias = replace(alias, '--', '-') ; 
```

在这个例子中：

*   'my_table' 是表的名称，
*   'name' 是原始字段
*   “别名”是我的 slug 字段的名称

希望能帮助到你 ！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T16:30:45.410

您当然可以使用 MySQL 进行字符串替换。[官方文档](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_replace)列出了很多您可能会觉得有用的字符串函数。

```
SELECT REPLACE('Foo Bar!~~~~', '~', '');
SELECT LOWER('Foo Bar!'); 
```

我还看到了这篇关于在 MySQL 中使用正则表达式的[博文。](http://techras.wordpress.com/2011/06/02/regex-replace-for-mysql/)

更新：我提到的博客文章的详细信息：

所以我建议创建一个函数来进行正则表达式替换：

```
DELIMITER $$
FUNCTION `regex_replace`(pattern varchar(1000),replacement varchar(1000),original varchar(1000))
RETURNS varchar(1000)
DETERMINISTIC
BEGIN
DECLARE temp VARCHAR(1000);
DECLARE ch VARCHAR(1);
DECLARE i INT;
SET i = 1;
SET temp = original;
IF original REGEXP pattern THEN
    SET temp = "";
    loop_label: LOOP
    IF i>CHAR_LENGTH(original) THEN
        LEAVE loop_label;
    END IF;
    SET ch = SUBSTRING(original,i,1);
    IF NOT ch REGEXP pattern THEN
        SET temp = CONCAT(temp,ch);
    ELSE
        SET temp = CONCAT(temp,replacement);
    END IF;
    SET i=i+1;
END LOOP;
END IF;
RETURN temp;
END$$
DELIMITER ; 
```

然后类似于以下内容

```
SELECT regex_replace('[^a-zA-Z0-9]+', '', '%$&?/’|test><+-,][)(' ) 
```

如果您对这种方法不满意，您可以随时使用 replace 运行一些更新调用

```
update db_products set Slug_Name = replace(Name, '~', ''); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-25T16:32:11.783

我对 Erwan Dupeux-Maire 的回答进行了一些编辑，以解决我在我的`name`领域中缺少的一些字符：'、'、'&' 和 '/'

```
UPDATE `table` SET slug = lower(name),
slug = replace(slug, '.', ''),
slug = replace(slug, '\'', '-'),
slug = replace(slug, '/', '-'),
slug = replace(slug,'š','s'),
slug = replace(slug,'Ð','Dj'),
slug = replace(slug,'ž','z'),
slug = replace(slug,'Þ','B'),
slug = replace(slug,'ß','Ss'),
slug = replace(slug,'à','a'),
slug = replace(slug,'á','a'),
slug = replace(slug,'â','a'),
slug = replace(slug,'ã','a'),
slug = replace(slug,'ä','a'),
slug = replace(slug,'å','a'),
slug = replace(slug,'æ','a'),
slug = replace(slug,'ç','c'),
slug = replace(slug,'è','e'),
slug = replace(slug,'é','e'),
slug = replace(slug,'ê','e'),
slug = replace(slug,'ë','e'),
slug = replace(slug,'ì','i'),
slug = replace(slug,'í','i'),
slug = replace(slug,'î','i'),
slug = replace(slug,'ï','i'),
slug = replace(slug,'ð','o'),
slug = replace(slug,'ñ','n'),
slug = replace(slug,'ò','o'),
slug = replace(slug,'ó','o'),
slug = replace(slug,'ô','o'),
slug = replace(slug,'õ','o'),
slug = replace(slug,'ö','o'),
slug = replace(slug,'ø','o'),
slug = replace(slug,'ù','u'),
slug = replace(slug,'ú','u'),
slug = replace(slug,'û','u'),
slug = replace(slug,'ý','y'),
slug = replace(slug,'ý','y'),
slug = replace(slug,'þ','b'),
slug = replace(slug,'ÿ','y'),
slug = replace(slug,'ƒ','f'),
slug = replace(slug, 'œ', 'oe'),
slug = replace(slug, '€', 'euro'),
slug = replace(slug, '$', 'dollars'),
slug = replace(slug, '£', ''),
slug = trim(slug),
slug = replace(slug, ',', ''),
slug = replace(slug, '&', ''),
slug = replace(slug, ' ', '-'),
slug = replace(slug, '--', '-'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-05-05T14:12:57.860

更改您的**tbl_name**和**field_name**和**slug** _field_name

```
SELECT field_name,
 REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(
 REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(
 REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(
 LOWER(TRIM(field_name)), ':', ''), ')', ''), '(', ''), ',', ''), '\\', ''), '\/', ''), '\"', ''), '?', ''), '\'', ''), '&', ''), '!', ''), '.', ''), ' ', '-'), '--', '-'), '--', '-')
AS `slug_field_name`
FROM tbl_name 
```

对于测试“**你的字符串**”结果**your-string**：

```
SELECT
 REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(
 REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(
 REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(
 LOWER(TRIM('Your String')), ':', ''), ')', ''), '(', ''), ',', ''), '\\', ''), '\/', ''), '\"', ''), '?', ''), '\'', ''), '&', ''), '!', ''), '.', ''), ' ', '-'), '--', '-'), '--', '-')
AS `slug_test` 
```

*对于特殊字符*：

附加一个**[REPLACE(]**和一个**[, ':', '')]**

例如，此字符串中的**ö字符“** **Hallo schöne Welt** ”

结果是“ **hallo-schone-welt** ”

```
SELECT
 REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(
 REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(
 REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(
 REPLACE(
 LOWER(TRIM('Hallo schöne Welt')), 'ö', 'o'), ':', ''), ')', ''), '(', ''), ',', ''), '\\', ''), '\/', ''), '\"', ''), '?', ''), '\'', ''), '&', ''), '!', ''), '.', ''), ' ', '-'), '--', '-'), '--', '-')
AS `slug_test` 
```

# python - XML 转换成 cfg 文件

> ID：16065292
> 
> 赞同：1
> 
> 时间：2013-04-17T16:24:32.653
> 
> 标签：python, python-2.7

我有一个看起来像这样的 XML 文件。

```
<settings>
    <setting id="auto_backup" value="false" />
    <setting id="exitonbackspace" value="true" />
    <setting id="hidemousepointer" value="true" />
    <setting id="nb_backup_files" value="10" />
    <setting id="refreshonload" value="true" />
    <setting id="screen2" value="false" />
    <setting id="show_batch" value="true" />
    <setting id="show_log" value="true" />
</settings> 
```

我想在 XML 上运行一个 python 脚本，它将信息提取到一个 cfg 文件中。所以它看起来像这样。

```
auto_backup=false
exitonbackspace=true
nb_backupfiles=10
refreshonload=true
screen2=false
show_batch=true
show_log 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:54:02.787

```
#!/usr/bin/env python2.7

import sys, lxml.etree

tree = lxml.etree.parse(sys.stdin)

for el in tree.findall('setting'):
    print el.attrib['id'], '=', el.attrib['value'] 
```

像这样的东西。从标准输入转换为输出，所以你可以，假设它是`script.py`：

```
cat settings.xml | ./script.py >> settings.cfg 
```

# mysql - 语法错误：按前 5 名和其他分组结果

> ID：16065294
> 
> 赞同：0
> 
> 时间：2013-04-17T16:24:35.107
> 
> 标签：mysql, group-by, max

所以我不知道我是否违反了任何规则，但我对我之前未回答的一个问题感到非常沮丧：

[按（前 5 名）计数和（所有其他）计数分组](https://stackoverflow.com/questions/15531942/group-by-count-of-top-5-count-of-all-other)

我只需要一些帮助来修复以下 synatx 错误（尝试运行下面的代码，作为解决方案提供给我）：

***“您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册，以获取在 '@rank := 0) WHERE desktopcases.Labels NOT LIKE 'ANDdeskcases.Labels NOT LIKE' 附近使用的正确语法第 14 行"***

我没有得到最初提供解决方案的任何人的回应。我想像他们一样熟练的人需要 2 分钟才能找到简单的解决方法，但是唉……无线电沉默随之而来。任何帮助将不胜感激！:)

谢谢！

```
 SELECT

IF(rank = 6, "Other", sub.Labels)AS Label,
 SUM(sub.CaseCount)AS ResolvedCases
FROM
    (
        SELECT

        IF(@Rank < 6 ,@Rank := @Rank + 1, @Rank)AS Rank,
        deskcases.Labels,
        COUNT(deskcases.Labels)AS CaseCount
    FROM
        deskcases,
        (SELECT @rank := 0)AS IgnoreAlias
    WHERE
        deskcases.Labels NOT LIKE ''
    AND deskcases.Labels NOT LIKE '%SPAM%'
    AND deskcases.Labels NOT LIKE '%Online Orders%'
    AND deskcases.`Case Status` LIKE 'Resolved'
    AND deskcases.`Created At` > CURDATE()- INTERVAL 30 DAY
    GROUP BY
        deskcases.Labels
    ORDER BY
        CaseCount DESC
    )sub
GROUP BY
    sub.rank ASC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:41:03.610

我从来没有像你那样做过连接，但如果你只是用逗号分隔表格，它应该可以工作。此外，任何子查询都应该分配一个别名，即使从未使用过......

```
from
   deskcases,
   ( select @rank := 0) as IgnoreAlias
where ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T16:38:54.373

很难猜出您在这里的意图是什么，但您似乎正在尝试加入一个表达式，这是不合法的。

查看[http://dev.mysql.com/doc/refman/5.0/en/join.html](http://dev.mysql.com/doc/refman/5.0/en/join.html)（或您的 MySQL 版本的等价物） - 您会看到您需要加入一个表或表因子。

# java - 无法使用 from-view-id 找到匹配的导航案例

> ID：16065296
> 
> 赞同：0
> 
> 时间：2013-04-17T16:24:49.607
> 
> 标签：java, jsf

我有一个控制器，在这个控制器中我从数据库中得到了一些结果

这是我得到结果的功能

```
 public DataModel getFts() {

        this.session = HibernateUtil.getSessionFactory().getCurrentSession();

        List<FinancialTransactions> ftList = null;
        try {
            org.hibernate.Transaction tx = session.beginTransaction();
            Query q = session.createQuery("from FinancialTransactions where Date='" + beginDate + "'");
            ftList = (List<FinancialTransactions>) q.list();
        } catch (Exception e) {
            e.printStackTrace();
        }

        return ftDataModel = new ListDataModel(ftList);
    } 
```

这个控制器的名字是 ftController

在jsf中

```
 <h:form styleClass="jsfcrud_list_form">
                <h:dataTable value="#{ftController.ftDataModel}" var="item" border="0" cellpadding="2" cellspacing="0" rowClasses="jsfcrud_odd_row,jsfcrud_even_row" rules="all" style="border:solid 1px">
                    <h:column>
                        <f:facet name="header">
                            <h:outputText value="Title"/>
                        </f:facet>
                        <h:outputText value="#{item.id}"/>
                    </h:column>
                </h:dataTable>
                <br/>
                 <h:commandButton type="submit" action="#{ftController. getFts()}"  id="searchButton"  value="Search"  />
            </h:form> 
```

我有上面的代码。这个jsf的名字是financialTransactions，但它给出了以下错误：

```
Unable to find matching navigation case with from-view-id '/financialTransactions.xhtml' for action '#{ftController. getFts()}' with outcome 'javax.faces.model.ListDataModel@32ee7cee' 
```

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T20:23:17.270

基本上，**JSF**期望**导航结果**作为方法返回。您必须在 JSF 中区分 getter 和 action 方法。

*   getter 返回一些内容以显示在您实际呈现的页面中。

*   一个动作方法可以在你的 bean 中执行一些动作并返回一个
    导航结果作为一个`String`，或者如果你想保留当前页面，或者为`void`空。`String`

您将 getter 方法作为操作方法调用，JSF 期望您返回导航结果，但它找到了一个`javax.faces.model.ListDataModel`Object。

查看更多关于[JSF 2 中的隐式导航的](http://www.mkyong.com/jsf2/implicit-navigation-in-jsf-2-0/)信息。

看起来你想要的是加载一个考虑搜索参数的列表。然后你可以做的是调用一个真正的动作方法：

```
<h:commandButton value="Search" action="#{ftController.loadFts}" /> 
```

Where`loadFts`方法将在您的列表中加载搜索结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-05T08:43:05.693

在 commandButton 的 action 属性中，需要返回导航字符串，可能是逻辑结果字符串或隐式导航字符串（直接是您要导航到的下一页的名称）。但是在这里，您的操作方法正在返回一个`DataModel`对象，该对象`toString()`对 JSF 的导航模型没有任何意义。给出要导航到的 JSF 文件的名称。

# javascript - Jquery 在 MVC 下拉列表中更改选定值

> ID：16065298
> 
> 赞同：0
> 
> 时间：2013-04-17T16:25:01.357
> 
> 标签：javascript, jquery, asp.net-mvc, html.dropdownlistfor, selectedvalue

我一直在搜索互联网并阅读了很多不同的方法来做到这一点，但由于某种原因，它们都不适合我。这里一定有我遗漏的东西。我要做的是在选中复选框时使用特定的选定值更新下拉列表。

用于选择的 HTML

```
 <select data-hands-jqui-props="{&quot;header&quot;:true,&quot;height&quot;:175,&quot;minWidth&quot;:225,&quot;classes&quot;:&quot;&quot;,&quot;checkAllText&quot;:&quot;Check all&quot;,&quot;uncheckAllText&quot;:&quot;Uncheck all&quot;,&quot;noneSelectedText&quot;:&quot;Select option&quot;,&quot;selectedText&quot;:&quot;# selected&quot;,&quot;selectedList&quot;:1,&quot;autoOpen&quot;:false,&quot;multiple&quot;:false,&quot;disabled&quot;:false,&quot;handsOnCreate&quot;:null}" data-hands-jqui-type="multiselect" data-val="true" data-val-date="The field  must be a date." id="SundayOpen" name="SundayOpen"><option value=""></option>
<option value="4/17/2013 12:00:00 AM">12:00 AM</option>
<option value="4/17/2013 12:15:00 AM">12:15 AM</option>
<option value="4/17/2013 12:30:00 AM">12:30 AM</option>
<option value="4/17/2013 12:45:00 AM">12:45 AM</option>
<option value="4/17/2013 1:00:00 AM">1:00 AM</option>
<option value="4/17/2013 1:15:00 AM">1:15 AM</option>
<option value="4/17/2013 1:30:00 AM">1:30 AM</option>
<option value="4/17/2013 1:45:00 AM">1:45 AM</option>
<option value="4/17/2013 2:00:00 AM">2:00 AM</option>
<option value="4/17/2013 2:15:00 AM">2:15 AM</option>
<option value="4/17/2013 2:30:00 AM">2:30 AM</option>
<option value="4/17/2013 2:45:00 AM">2:45 AM</option>
<option value="4/17/2013 3:00:00 AM">3:00 AM</option>
<option value="4/17/2013 3:15:00 AM">3:15 AM</option>
<option value="4/17/2013 3:30:00 AM">3:30 AM</option>
<option value="4/17/2013 3:45:00 AM">3:45 AM</option>
<option value="4/17/2013 4:00:00 AM">4:00 AM</option>
<option value="4/17/2013 4:15:00 AM">4:15 AM</option>
<option value="4/17/2013 4:30:00 AM">4:30 AM</option>
<option value="4/17/2013 4:45:00 AM">4:45 AM</option>
<option value="4/17/2013 5:00:00 AM">5:00 AM</option>
<option value="4/17/2013 5:15:00 AM">5:15 AM</option>
<option value="4/17/2013 5:30:00 AM">5:30 AM</option>
<option value="4/17/2013 5:45:00 AM">5:45 AM</option>
<option value="4/17/2013 6:00:00 AM">6:00 AM</option>
<option value="4/17/2013 6:15:00 AM">6:15 AM</option>
<option value="4/17/2013 6:30:00 AM">6:30 AM</option>
<option value="4/17/2013 6:45:00 AM">6:45 AM</option>
<option value="4/17/2013 7:00:00 AM">7:00 AM</option>
<option value="4/17/2013 7:15:00 AM">7:15 AM</option>
<option value="4/17/2013 7:30:00 AM">7:30 AM</option>
<option value="4/17/2013 7:45:00 AM">7:45 AM</option>
<option value="4/17/2013 8:00:00 AM">8:00 AM</option>
<option value="4/17/2013 8:15:00 AM">8:15 AM</option>
<option value="4/17/2013 8:30:00 AM">8:30 AM</option>
<option value="4/17/2013 8:45:00 AM">8:45 AM</option>
<option value="4/17/2013 9:00:00 AM">9:00 AM</option>
<option value="4/17/2013 9:15:00 AM">9:15 AM</option>
<option value="4/17/2013 9:30:00 AM">9:30 AM</option>
<option value="4/17/2013 9:45:00 AM">9:45 AM</option>
<option value="4/17/2013 10:00:00 AM">10:00 AM</option>
<option value="4/17/2013 10:15:00 AM">10:15 AM</option>
<option value="4/17/2013 10:30:00 AM">10:30 AM</option>
<option value="4/17/2013 10:45:00 AM">10:45 AM</option>
<option value="4/17/2013 11:00:00 AM">11:00 AM</option>
<option value="4/17/2013 11:15:00 AM">11:15 AM</option>
<option value="4/17/2013 11:30:00 AM">11:30 AM</option>
<option value="4/17/2013 11:45:00 AM">11:45 AM</option>
<option value="4/17/2013 12:00:00 PM">12:00 PM</option>
<option value="4/17/2013 12:15:00 PM">12:15 PM</option>
<option value="4/17/2013 12:30:00 PM">12:30 PM</option>
<option value="4/17/2013 12:45:00 PM">12:45 PM</option>
<option value="4/17/2013 1:00:00 PM">1:00 PM</option>
<option value="4/17/2013 1:15:00 PM">1:15 PM</option>
<option value="4/17/2013 1:30:00 PM">1:30 PM</option>
<option value="4/17/2013 1:45:00 PM">1:45 PM</option>
<option value="4/17/2013 2:00:00 PM">2:00 PM</option>
<option value="4/17/2013 2:15:00 PM">2:15 PM</option>
<option value="4/17/2013 2:30:00 PM">2:30 PM</option>
<option value="4/17/2013 2:45:00 PM">2:45 PM</option>
<option value="4/17/2013 3:00:00 PM">3:00 PM</option>
<option value="4/17/2013 3:15:00 PM">3:15 PM</option>
<option value="4/17/2013 3:30:00 PM">3:30 PM</option>
<option value="4/17/2013 3:45:00 PM">3:45 PM</option>
<option value="4/17/2013 4:00:00 PM">4:00 PM</option>
<option value="4/17/2013 4:15:00 PM">4:15 PM</option>
<option value="4/17/2013 4:30:00 PM">4:30 PM</option>
<option value="4/17/2013 4:45:00 PM">4:45 PM</option>
<option value="4/17/2013 5:00:00 PM">5:00 PM</option>
<option value="4/17/2013 5:15:00 PM">5:15 PM</option>
<option value="4/17/2013 5:30:00 PM">5:30 PM</option>
<option value="4/17/2013 5:45:00 PM">5:45 PM</option>
<option value="4/17/2013 6:00:00 PM">6:00 PM</option>
<option value="4/17/2013 6:15:00 PM">6:15 PM</option>
<option value="4/17/2013 6:30:00 PM">6:30 PM</option>
<option value="4/17/2013 6:45:00 PM">6:45 PM</option>
<option value="4/17/2013 7:00:00 PM">7:00 PM</option>
<option value="4/17/2013 7:15:00 PM">7:15 PM</option>
<option value="4/17/2013 7:30:00 PM">7:30 PM</option>
<option value="4/17/2013 7:45:00 PM">7:45 PM</option>
<option value="4/17/2013 8:00:00 PM">8:00 PM</option>
<option value="4/17/2013 8:15:00 PM">8:15 PM</option>
<option value="4/17/2013 8:30:00 PM">8:30 PM</option>
<option value="4/17/2013 8:45:00 PM">8:45 PM</option>
<option value="4/17/2013 9:00:00 PM">9:00 PM</option>
<option value="4/17/2013 9:15:00 PM">9:15 PM</option>
<option value="4/17/2013 9:30:00 PM">9:30 PM</option>
<option value="4/17/2013 9:45:00 PM">9:45 PM</option>
<option value="4/17/2013 10:00:00 PM">10:00 PM</option>
<option value="4/17/2013 10:15:00 PM">10:15 PM</option>
<option value="4/17/2013 10:30:00 PM">10:30 PM</option>
<option value="4/17/2013 10:45:00 PM">10:45 PM</option>
<option value="4/17/2013 11:00:00 PM">11:00 PM</option>
<option value="4/17/2013 11:15:00 PM">11:15 PM</option>
<option value="4/17/2013 11:30:00 PM">11:30 PM</option>
<option value="4/17/2013 11:45:00 PM">11:45 PM</option>
</select> 
```

jQuery

```
 if (IsPreFillOn) {

        $("#SundayOpen option[value='4/17/2013 12:30:00 AM']").attr("selected","selected");
        alert($("#SundayOpen").val());
    } 
```

document.ready 未显示，但存在。有趣的是，警报显示了正确的值，但实际的下拉列表没有更新。

对可能发生的事情有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T17:14:26.917

我把它展示为工作：http: [//jsfiddle.net/KazeT/1/](http://jsfiddle.net/KazeT/1/)

但是，您应该使用 .prop 而不是 .attr 来设置属性。

```
 $("#SundayOpen option[value='4/17/2013 12:30:00 AM']").prop("selected","selected");
 alert($("#SundayOpen").val());`enter code here` 
```

但老实说，您只需这样做会容易得多：

```
$("#SundayOpen").val("4/17/2013 12:30:00 AM") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T16:34:24.640

试试这个：- [http://jsfiddle.net/5psSy/](http://jsfiddle.net/5psSy/)

```
$("#SundayOpen").val("4/17/2013 12:15:00 AM");
alert($("#SundayOpen").val()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T19:06:35.093

十分感谢你分享这些信息。事实证明，我们正在使用一个我没有意识到隐藏/制作更多级别的小部件工具，称为 Multiselect。如果有人来到这里并遇到同样的问题和同样的小部件......这就是答案：

```
 $("#SundayOpen").multiselect("widget").find("input[value='4/17/2013 12:00:00 AM']").each(function () {
            this.click();
        }); 
```

# java - 尝试在 tomcat 7/java ClassNotFoundException 中使用最初来自 tomcat 6/java 6 的 jar

> ID：16065299
> 
> 赞同：0
> 
> 时间：2013-04-17T16:25:01.700
> 
> 标签：java, tomcat, jar

我在 tomcat6/java6 项目中使用了以下类（来自 jar 文件）：ws.UserAuthenticationService

我创建了一个新的 java 项目（eclipse/tomcat7/java7）并将上面的 jar 添加到构建路径中。

当我尝试在代码中使用它（添加正确的导入）时，我在运行时遇到以下错误：

> 2013 年 4 月 17 日下午 7:13:22 org.apache.catalina.core.StandardWrapperValve 调用严重：Servlet.service() 用于 servlet [stdadmin.servlet.Controler] 在路径 [/stdadmin] 的上下文中抛出异常 [Servlet 执行抛出一个异常] 根本原因 java.lang.ClassNotFoundException: ws.UserAuthenticationService at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1676) at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java :1521) 在 stdadmin.servlet.Controler.userAuthenticated(Controler.java:116) 在 stdadmin.servlet.Controler.handleAuth(Controler.java:102) 在 stdadmin.servlet.Controler.forwardToMatchingJSP(Controler.java:65) 在 stdadmin .servlet.Controler.doPost(Controler.java:53) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:641) 在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304) 在 org.apache.catalina.core.ApplicationFilterChain.doFilter (ApplicationFilterChain.java:210) 在 org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164) 在 org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)。 catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462) at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164) at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java: 100) 在 org.apache.catalina.core 的 org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)。StandardEngineValve.invoke(StandardEngineValve.java:118) at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:395) at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:250) at org .apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188) at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302) at java.util.concurrent.ThreadPoolExecutor .runWorker(ThreadPoolExecutor.java:1110) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) 在 java.lang.Thread.run(Thread.java:722)java:250) at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188) at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302) at java .util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) 在 java.lang.Thread.run(Thread.java:722)java:250) at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188) at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302) at java .util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) 在 java.lang.Thread.run(Thread.java:722)

有没有办法知道***为什么***找不到类？在 java7 中使用 java6 jar 是否兼容？

# string - Shell 脚本变量操作

> ID：16065300
> 
> 赞同：0
> 
> 时间：2013-04-17T16:25:03.253
> 
> 标签：string, shell, variables, loops

我有这个脚本：

```
for f in "$@"
do
    q=${f#*Media/Music/}
    echo q
done 
```

我要做的就是设置`q`为`f`after `Media/Music/`。

但它只是没有回应。

如果我这样做，`echo "${f#*Media/Music/}"`那么它会给我我的结果。

为什么这不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:46:20.613

您应该使用 $ 或 ${} 来获取变量。

```
for f in "$@"
do
    q=${f#*Media/Music/}
    echo $q   # here use $q it'll work fine.
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T17:24:20.703

您需要添加 $ 来打印变量。它什么都不打印，因为默认情况下变量的值被初始化为 NULL。你需要使用

```
回声$q
```

代替

```
回声
```

# ios - 部分屏幕截图

> ID：16065306
> 
> 赞同：-3
> 
> 时间：2013-04-17T16:25:25.823
> 
> 标签：ios, objective-c

如果按下 UIButton，如何截取屏幕的一部分？我已经搜索了很多，但我找不到有效的答案。Xcode 一直在抱怨，谁能给我一个适用于 iOS 6 的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:30:15.160

我以前在小班下面写过这个。你可以利用它。后一个函数获取整个屏幕的截图（并且它是从苹果的指南中获得的，所以它绝对是安全的）。我添加的第一部分处理不同的比例（视网膜或常规）。愿它有所帮助。

```
#import "ScreenshotTaker.h"
#import <QuartzCore/QuartzCore.h>

@implementation ScreenshotTaker

+(UIImage *) captureRectOfScreen:(CGRect) rect
{
    UIImage *wholeScreen = [ScreenshotTaker screenshot];

    //Add status bar height
    rect.origin.y += UIInterfaceOrientationIsLandscape([UIApplication sharedApplication].statusBarOrientation) ? [[UIApplication sharedApplication] statusBarFrame].size.width : [[UIApplication sharedApplication] statusBarFrame].size.height;

    //NSLog(@"%@",NSStringFromCGSize([wholeScreen size]));

    CGFloat scale = wholeScreen.scale;

    rect.origin.x *= scale;
    rect.origin.y *= scale;
    rect.size.width *= scale;
    rect.size.height *= scale;

    UIImage *cropped = [UIImage imageWithCGImage:CGImageCreateWithImageInRect([wholeScreen CGImage], rect) scale:wholeScreen.scale orientation:wholeScreen.imageOrientation];

    //NSLog(@"Whole Screen Capt :%@ Scale: %f",NSStringFromCGSize([wholeScreen size]), wholeScreen.scale);
    //NSLog(@"Rect to Crop :%@ Cropped :%@",NSStringFromCGRect(rect), NSStringFromCGSize([cropped size]));

    return cropped;
}

+(UIImage *) screenshot
{
    // Create a graphics context with the target size
    // On iOS 4 and later, use UIGraphicsBeginImageContextWithOptions to take the scale into consideration
    // On iOS prior to 4, fall back to use UIGraphicsBeginImageContext
    CGSize imageSize = [[UIScreen mainScreen] bounds].size;
    if (NULL != UIGraphicsBeginImageContextWithOptions)
        UIGraphicsBeginImageContextWithOptions(imageSize, NO, 0);
    else
        UIGraphicsBeginImageContext(imageSize);

    CGContextRef context = UIGraphicsGetCurrentContext();

    // Iterate over every window from back to front
    for (UIWindow *window in [[UIApplication sharedApplication] windows])
    {
        if (![window respondsToSelector:@selector(screen)] || [window screen] == [UIScreen mainScreen])
        {
            // -renderInContext: renders in the coordinate space of the layer,
            // so we must first apply the layer's geometry to the graphics context
            CGContextSaveGState(context);
            // Center the context around the window's anchor point
            CGContextTranslateCTM(context, [window center].x, [window center].y);
            // Apply the window's transform about the anchor point
            CGContextConcatCTM(context, [window transform]);
            // Offset by the portion of the bounds left of and above the anchor point
            CGContextTranslateCTM(context,
                                  -[window bounds].size.width * [[window layer] anchorPoint].x,
                                  -[window bounds].size.height * [[window layer] anchorPoint].y);

            // Render the layer hierarchy to the current context
            [[window layer] renderInContext:context];

            // Restore the context
            CGContextRestoreGState(context);
        }
    }

    // Retrieve the screenshot image
    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();

    return image;
}

@end 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-17T17:52:35.387

要捕获一个特定视图：

```
UIView *theView = self.view;
CGSize imageSize = [theView bounds].size
UIGraphicsBeginImageContextWithOptions(imageSize, NO, 0);
CGContextRef context = UIGraphicsGetCurrentContext();
[[theView layer] renderInContext:context];
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

您现在可以保存生成的图像或对它做任何您想做的事情。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-04-17T16:35:11.263

您可以使用此代码（未经测试）：

```
UIGraphicsBeginImageContext(USE UR SCREEN PART);
[self.window.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
NSData * data = UIImagePNGRepresentation(image);
[data writeToFile:@"yourscreenshot.png" atomically:YES]; 
```

只需在 UIGraphicsBeginImageContext 括号中设置您的屏幕部件信息。

# scala - 为什么有这么多 Scala 集合视图类型？

> ID：16065314
> 
> 赞同：2
> 
> 时间：2013-04-17T16:25:50.227
> 
> 标签：scala, collections, lazy-evaluation

我是 Scala 的新手，所以我试图理解为什么对视图的调用会返回`IndexedSeqViewS`类似类的实例。为什么每个操作都需要一个不同的类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T16:35:42.063

因为每个视图转换器操作（即生成新视图的操作，如`map`或`filter`）`slice`都会创建一个以不同方式遍历底层集合的视图。请注意，这`IndexedSeqViewS`不是该集合类的实际名称 - 它是`toString`返回的美化名称。

例如，`Mapped`视图创建了底层集合的视图，使得底层集合的每个元素都以某种方式进行转换。

这需要重新定义`foreach`如下：

```
 trait Mapped[B] extends Transformed[B] {
    // ...
    def foreach[U](f: B => U) {
      for (x <- self)
        f(mapping(x))
    }
    // ...
  } 
```

视图需要在`Filtered`遍历时忽略一些元素：

```
 trait Filtered extends Transformed[A] {
    // ...
    def foreach[U](f: A => U) {
      for (x <- self)
        if (pred(x)) f(x)
    }
    // ...
  } 
```

由于集合具有基于继承的设计，要覆盖`foreach`（以及其他方法，如`apply`、`size`等）的定义，需要引入子类。在一些替代设计中，例如基于类型类的设计，可能必须引入单独的类型类来重新定义`foreach`特定类型的内容。

# c# - 重新抛出包装对象的异常

> ID：16065315
> 
> 赞同：3
> 
> 时间：2013-04-17T16:25:55.787
> 
> 标签：c#, .net, exception, exception-handling, try-catch

我`ConcurrentDictionary<TKey, TValue>`用来实现一个`ConcurrentSet<T>`.

```
public class ConcurrentSet<T> : ISet<T>
{
    private readonly ConcurrentDictionary<T, byte> collection;
} 
```

`ConcurrentDictionary<TKey, TValue>`不能包含具有空键的对。

```
// summary, param, returns...
/// <exception cref="ArgumentNullException">
///     <paramref name="item" /> is null.
/// </exception>
public bool Add(T item)
{
    // This throws an argument null exception if item is null.
    return this.collection.TryAdd(item, 0);
} 
```

那么，我应该，

```
if (item == null)
    throw new ArgumentNullException("item", "Item must not be null.");

return this.collection.TryAdd(item, 0); 
```

或者，我应该，

```
try
{
    return this.collection.TryAdd(item, 0);
}
catch (ArgumentNullException)
{
    throw new ArgumentNullException("item", "Item must not be null.");
} 
```

或者，我应该，

```
try
{
    return this.collection.TryAdd(item, 0);
}
catch (ArgumentNullException x)
{
    // I know, but I don't want to preserve the stack trace
    // back to the underlying dictionary, anyway.
    throw x;
} 
```

或者，我应该，

```
try
{
    return this.collection.TryAdd(item, 0);
}
catch (ArgumentNullException)
{
    // The thrown exception will have "key", instead of
    // "item" as the parameter's name, in this instance.
    throw;
} 
```

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T16:36:10.597

我会选择这个

```
public bool Add(T item)
{
    // This throws an argument null exception if item is null.
    return this.collection.TryAdd(item, 0);
} 
```

或这个

```
if (item == null)
    throw new ArgumentNullException("item", "Item must not be null.");

return this.collection.TryAdd(item, 0); 
```

这取决于您的班级是否关心是否有空值。

如果您执行 null 检查的唯一原因是避免将 null 传递给`TryAdd`，那么请不要费心检查。 `TryAdd`会做它自己的检查并抛出异常。

如果在某些时候您认为您可能使用允许 null 的不同集合，但您仍然希望您的集合没有 null，那么您应该检查自己。如果将来发生这种变化，这将为您提供保护。

参数的验证应该始终是方法所做的第一件事。如果参数无效，那么做任何其他事情都没有意义。

如果你打算用它做某事，你应该只捕获一个异常。如果您只是要重新抛出，或者创建一个等效的新表达式，那么不要费心去捕捉它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T16:43:45.687

我会说，你*应*该做什么取决于你想要的效果。您想吞下错误而不将其显示给用户吗？不要在 catch 框中重新抛出错误，但要包含 try-catch。您是否想要自定义错误消息，请进行`Item == null`检查。生成一个新的异常实例并没有多大用处，所以无论如何这都是相当的。

就其余部分而言..如果您没有记录错误，或者没有在上游特别处理它，那么在捕获错误后就不需要重新抛出错误。否则，这取决于个人风格以及您是否需要自定义错误消息。

我最喜欢的可能是`Item == null`使用自定义错误消息进行检查，但那是因为我喜欢自定义错误消息。我发现它们对我更有用，但请确保在*调用*此方法的事物周围存在错误处理，以便错误不会导致更上游的未处理异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T15:52:05.967

你应该做什么取决于你想记录你的班级做什么。如果您希望记录添加 null 项的尝试可能会以未指定的方式失败，那么只需直接进行调用并让任何异常冒泡。如果您希望记录您将返回一个`ArgumentNullException`等于`ParamName`并且`item`不希望依赖于`ConcurrentDictionary`它收到空键时的行为，那么您应该在将参数传递给`ConcurrentDictionary`. 如果您希望记录您的代码将抛出一个等于`ArgumentNullException`，但愿意依赖于验证其参数并抛出一个，*并且如果性能很关键*，另一种可能性是：`ParamName``item``ConcurrentDictionary``ArgumentException`

 *```
try
{
    return this.collection.TryAdd(item, 0);
}
catch (ArgumentNullException ex)
{
    if (ex.ParamName == "key" && item == null)
        throw new ArgumentNullException("item", "Item must not be null.");
    else
        throw;
} 
```

此代码避免了在参数不为 null 的情况下进行参数验证的任何额外成本（99.9999% 的情况下应该是这种情况），但仍将确保它仅`ArgumentNullException`在此类情况下声称是因预期原因发生异常；如果错误`ConcurrentDictionary`导致它意外地将 null 参数传递给它在内部调用的方法，即使它被赋予了要添加的非 null 项，上面的代码将确保原始异常堆栈跟踪不会丢失。请注意，另一种可能性可能是：

```
 if (ex.ParamName == "key" && item == null)
        throw new ArgumentNullException("item", "Item must not be null.");
    else
        throw new UnexpectedException(ex); // Probably a custom type 
```

基本思想是，如果 an出于某种原因而不是null 而`ArgumentNullException`逃脱，*则不*应由可能期望您提供 an 的代码捕获此类异常。`ConcurrentDictionary.Add``item`*`ArgumentNullException`*

 ** * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T16:35:43.983

在您的示例中，它们都太相似了，但我会选择第一个选项：

```
if (item == null)
    throw new ArgumentNullException("item", "Item must not be null."); 
```

因为它不需要 a`catch`并且看起来更紧凑。如果需求发生变化并且不会添加更多代码行，它还可以让您扩展条件，例如

```
if (item==null || item.Name == null)
    throw... 
```**

# authentication - 委托与联合身份验证

> ID：16065316
> 
> 赞同：1
> 
> 时间：2013-04-17T16:26:00.247
> 
> 标签：authentication, oauth, authorization, oauth-2.0, openid

我正在使用 Node.js 编写几个 Web 应用程序。在所有这些应用程序中，我需要身份验证和授权。我不想做的是在每个 Web 应用程序中处理身份验证和授权。

因此，我开始考虑使用委托和/或联合身份验证机制，并且到目前为止已经处理了 OpenID 和 OAuth(2)。

不过，我不确定我是否走在正确的轨道上。

我想要的是：

*   拥有一个集中的身份验证服务器（这可以同时使用 OpenID 和 OAuth）。
*   任何人都不应该进行身份验证（这显然是把我从 OpenID 推到 OAuth，因为我明确*不想*允许任何 OpenID 提供者，例如）。
*   我想启用联合：用户不仅应该能够针对我的集中式身份验证服务器进行身份验证，而且该服务器应该与一些预先选择的其他身份验证服务器进行联合（考虑将服务器与现有的 ActiveDirectory 集成）。我不确定 OAuth 是否可以做到这一点，是吗？
*   我希望我的 Web 应用程序只信任来自*我*的集中式服务器（或间接来自受信任的联合服务器之一）的令牌。这可能与 OAuth2 Bearer Tokens 吗？

很多问题......我知道我可以使用带有 WS-Trust 和 WS-Federation 的 SAML 来完成所有这些，但我会选择更轻量级的身份验证策略。

对此有任何想法、提示或建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T15:44:07.110

是的，你可以做到这一切。事实上，您可以通过任何协议（如 AD 或 LDAP 目录）将您的应用程序与任何身份提供者桥接。（这正是我们在[服务器](http://www.auth0.com)中所做的）。

由于您使用的是 node.js，我强烈建议您将优秀的[护照](http://passportjs.org/)中间件作为起点。

# c# - 如何在 C# 中以可下载的形式将大小不超过 (1 GB) 的 pdf 文件从服务器流式传输到客户端

> ID：16065320
> 
> 赞同：0
> 
> 时间：2013-04-17T16:26:17.267
> 
> 标签：c#, asp.net-mvc, file, stream, download

我在服务器上有一个 pdf 文件（可能高达几 GB）。我想将它发送给客户端，以便客户端可以在他的本地计算机上下载它。我想我需要在 C# 中使用 Stream 类从 Web 服务器获取数据。但我不确定 Stream 类是否对它可以流式传输的文件大小有限制？

另外，一旦我有了数据流，如何将其发送给客户，以便他可以将其下载到本地计算机上？我们可以在 C# 中做到这一点吗？或者换句话说，如何将此数据流转换为可下载的文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:35:56.430

应该注意的是，如果您使用 Web 服务器来发送文件，您可能不需要为它编写任何代码，Web 服务器具有内置的功能。

该类`Stream`支持缓冲，这是您需要使用的。这是一个简单的例子：

```
byte[] buffer = new byte[1024]; // 1 KB buffer
using(FileStream fs = new FileStream("file.pdf"))
using(MemoryStream ms = new MemoryStream()) // output the stream into memory, this is what you'll want to change for your purposes
{
    int read;
    while((read = fs.Read(buffer, 0, buffer.Length)) > 0)
    {
        ms.Write(buffer, 0, read);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T16:37:39.553

这个答案主要是关于从网络下载文件的客户端代码。

如果您需要服务器端代码 - ASP.Net MVC 已经有完美的方法 - [Controller.File](http://msdn.microsoft.com/en-us/library/dd492492%28v=vs.108%29.aspx)。

`Stream`类对数据的大小没有限制（并且有无限的流，例如`NetworkStream`）。个别实现可能对内部细节的大小有限制（即`MemoryStream`受单个托管内存块的最大大小限制 - 略低于 2GB）

2GB 以下的文件根本不需要任何特殊编码，由于整数溢出和对单个托管内存块的最大大小的限制（即，如果尝试将 4GB 保存到`MemoryStream`.

在大多数情况下，现有的类（如`FileStream`）和方法（如`Stream.CopyTo`）应该足以处理大文件。

还要检查现有的类[`WebClient.DownloadFile`](http://msdn.microsoft.com/en-US/library/ez801hhe%28v=vs.80%29.aspx)是否对您足够：

```
WebClient myWebClient = new WebClient();
myStringWebResource = remoteUri + fileName;
myWebClient.DownloadFile(myStringWebResource, fileName); 
```

# iphone - Facebook登录给我已经授权这个应用程序每次

> ID：16065327
> 
> 赞同：2
> 
> 时间：2013-04-17T16:26:33.530
> 
> 标签：iphone, ios, objective-c, facebook

我正在使用 Facebook SDK 进行 facebook 集成 .. 我有 uibutton 我用它来登录 facebook 并在 facebook 上分享详细信息

我正在使用 FBSession 登录

```
 [FBSession.activeSession openWithCompletionHandler:^(FBSession *session, FBSessionState state,NSError *error) { 
```

我可以登录 facebook .. 但是当我尝试分享时，即使用户已经授权，它也会进入授权页面。我不希望这个页面出现在第一次之外。如何确保每次用户想要在 Facebook 上分享时都不会出现此页面

在 plist 文件中我给出了正确的应用程序 ID 和 urlscheme fbappid 以及在我的 appdelegate 中我添加了 handleopenurl ，打开会话

![在此处输入图像描述](https://i.stack.imgur.com/vUD58.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T16:40:10.017

为了不被问到您是否要授权您的应用程序（尽管您已经获得授权），您必须重复使用旧令牌。您每次都在制作一个新的，因此 facebook API 会要求您确认。

**编辑：**
（@Slavco Petkovski 在评论中建议）

在使用之前验证您保存的访问令牌：

```
if (![FBSDKAccessToken currentAccessToken] ||
      [FBSDKAccessToken currentAccessToken].expirationDate.timeIntervalSince1970 < now.timeIntervalSince1970) {
    // initiate request for a new token
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T16:31:06.647

这是因为您已经在 facebook 上授予了此特定应用程序的权限。尝试使用新帐户，您将被要求提供权限。

**编辑**

尝试使用

```
`+ (BOOL)openActiveSessionWithReadPermissions:(NSArray*)readPermissions
                            allowLoginUI:(BOOL)allowLoginUI
                       completionHandler:(FBSessionStateHandler)handler;` 
```

使用completionHandler中的会话对象

# php - strip_tags 保留但剥离其属性

> ID：16065330
> 
> 赞同：0
> 
> 时间：2013-04-17T16:26:45.317
> 
> 标签：php, formatting, string-formatting, strip-tags

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:33:31.020

它应该完全按照您的意愿工作。

```
$text = '<a href="http://www.someplace.com">link</a> <others>stuff</others>';
echo strip_tags($text,"<a>"); 
```

我留下了完整的`<a>`标签：

```
<a href="http://www.someplace.com">link</a> stuff 
```

工作示例：http: [//3v4l.org/j1uE1](http://3v4l.org/j1uE1)

**更新**：使用您在更新问题中发布的代码，我在这里运行它，它仍然提供完整的`<a>`标签输出。属性没有被剥离。

[http://3v4l.org/tFQ4l](http://3v4l.org/tFQ4l)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T16:32:43.680

[strip_tags](http://php.net/manual/en/function.strip-tags.php)删除所有 html 元素或任何用`<>`.

从[手册](http://php.net/manual/en/function.strip-tags.php)：

> strip_tags — 从字符串中去除 HTML 和 PHP 标记

例子：

```
$text = '<p>Test paragraph.</p><!-- Comment --> <a href="#fragment">Other text</a>'; 
```

输出：

```
Test paragraph. Other text 
```

# php - 我的 curl 请求正在覆盖我的内容类型

> ID：16065332
> 
> 赞同：0
> 
> 时间：2013-04-17T16:27:07.887
> 
> 标签：php, curl

编辑：事实证明数据发送得很好，但是在 PHP 中查看正文无法正常工作。有关更多信息，请参阅我的答案。

我正在尝试将 json 数据发布到服务器。我只需要内容类型为 json 并且正文具有 json 格式的字符串。我的问题是内容类型保持为 text/html 并且无论我尝试什么，我都无法更改该内容类型。我阅读了许多堆栈溢出答案，它们似乎都应该工作，但它们没有。我的代码如下。

```
 $ch = curl_init($url);
  curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
  curl_setopt($ch, CURLOPT_HEADER, 1);
  curl_setopt($ch, CURLOPT_HTTPHEADER, array("Content-Type: application/json"));      
  curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "POST");
  curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($data));
  curl_exec($ch); 
```

在接收端，我只是打印 getallheaders 和 get_file_contents('file://phpinput')。

为什么我的内容类型没有正确通过？

如果有帮助，这是一个示例输出：

```
string 'HTTP/1.1 200 OK
Date: Wed, 17 Apr 2013 16:24:56 GMT
Server: Apache/2.2.22 (Unix) mod_ssl/2.2.22 OpenSSL/0.9.8r DAV/2 PHP/5.4.4
X-Powered-By: PHP/5.4.4
Content-Length: 71
Content-Type: text/html

Array{"level1a":{"level2":{"a":2,"b":3}},"level2b":["111","333","999"]}' (length=273) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T22:30:39.110

您需要创建两个 php 文件，一个客户端 (client.php) 和一个服务器 (server.php)。

服务器读取 json 请求并发送回 (json) 响应。您的客户端将 json 发送到服务器并读取响应。

您 server.php 需要在网络服务器上可用`http://localhost/server.php`。您可以从同一台服务器或其他服务器运行您的客户端`http://localhost/client.php`。您也可以从命令行运行客户端`php -f client.php`

服务器.php：

```
<?
// read json input
$input = json_decode(file_get_contents('php://input'));
$response = array('text'=>'Your name is: '.$input->{'name'});
header("Content-type: application/json");
// send response
echo json_encode($response);
exit; 
```

客户端.php：

```
<?
$data = array('name'=>'Jason'); // input
$ch = curl_init('http://localhost/server.php');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
curl_setopt($ch, CURLOPT_HEADER, 1);
curl_setopt($ch, CURLOPT_HTTPHEADER, array("Content-Type: application/json"));      
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "POST");
curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($data));
$result = curl_exec($ch);
curl_close($ch);
list($headers, $content) = explode("\r\n\r\n", $result, 2);
$php = json_decode($content);
echo 'Response: ' . $php->text;
// if you want to know
var_dump($headers);
exit; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T21:18:17.257

所以事实证明没有错。我不确定“数组”部分来自哪里，但我发布的 API 可以正常接收数据。我认为如果有人发布了一种方法来准确查看 curl 请求发送的内容，那就太好了，这样人们可以比我更容易地进行故障排除。

# mysql - MySQL 获取昨天的内容

> ID：16065334
> 
> 赞同：0
> 
> 时间：2013-04-17T16:27:19.930
> 
> 标签：mysql

我希望用户可以在个人资料页面上看到他们昨天上传的照片。

我这个对吗？

```
SELECT * FROM pictures WHERE userid = '$userid' AND DATE(pictureuploadeddate) = DATE_SUB(CURDATE(), INTERVAL 25 HOUR) ORDER BY uploaded DESC 
```

但仍然无法正常工作。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:28:46.557

尝试这个，

```
DATE(pictureuploadeddate) = CURDATE() - INTERVAL 1 DAY 
```

利用索引，

```
pictureuploadeddate >= CURDATE() - INTERVAL 1 DAY AND pictureuploadeddate < CURDATE() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T16:31:57.600

采取以下条件应该是可以的。

```
DATE_FORMAT(DATE(pictureuploadeddate), '%m-%d-%Y') = DATE_FORMAT(DATE_SUB(CURDATE(), INTERVAL 1 DAY), '%m-%d-%Y') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T16:37:28.100

你为什么使用`DATE(pictureuploadeddate)`不是`pictureuploadeddate`日期格式列？

我下面的解决方案假设“pictureuploadeddate”是一个日期类型的列。您可以简单地进行如下比较：

```
SELECT * FROM pictures WHERE userid = '$userid' AND pictureuploadeddate = ADDDATE(CURDATE(), -1) ORDER BY uploaded DESC 
```

`ADDDATE(CURDATE(), -1)`从今天减去 1 天返回昨天的日期。

# java - 任何生成类似于 YouTube 视频字符串的识别字符串的 Java 方法？

> ID：16065338
> 
> 赞同：4
> 
> 时间：2013-04-17T16:27:40.360
> 
> 标签：java, uniqueidentifier, identifier

YouTube 上的每个视频都有一个唯一的标识字符串，例如 1cru2fzUlEc。

是否有任何 Java 方法可以生成接近它的东西？关闭我的意思是字符串是唯一的，短的，并且使用数字和字母（区分大小写）。

我需要以与 YouTube 相同的方式使用这样的字符串：识别后端系统中的记录。我正在做一个 Java Web 应用程序。我不想使用[http://example.com?id=123](http://example.com?id=123)的方法。

我知道 Java 的 UUID 实现可以产生类似的结果，但与 YouTube 相比它太长了。

谢谢！

## 编辑1：

非常感谢大家的回复。您的所有输入都是有用的！似乎没有完美的解决方案。任何完美的东西（如果不是 UUID）都必须生成和检查（以避免重复）。我对吗？

我可以肯定地说 YouTube 在生成自己的 12 个字符的视频字符串时面临与我们 Java 人员相同的问题吗？

干杯!

## 编辑2：

我想使用全范围的字母数字字符，而不仅仅是十六进制数字。我将使用 Marcus Junius Brutus 的解决方案。我觉得它足够直观和安全。从理论上讲，我必须检查每个生成的字符串，但我不会这样做，因为每次检查都是另一个数据库调用。我将向生成的字符串 ID 的表字段添加唯一约束。我会让那个不幸的用户在他第一次生成记录时失败。他需要做的是返回表单再次填写并保存（希望不会因为重复的字符串值而第二次失败）。最初我将使用 12 个字符的字符串，并且可以在需要时轻松增加长度。

我打算将此解决方案用于与同一个后端数据库通信的分布式 Web 应用程序，这意味着同一个应用程序有多个 JVM。

这是我的解决方案，我希望它会奏效。

```
 String sampleAlphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
    Random random = new Random();
    char[] buf = new char[12];
    for (int i = 0 ; i < 12 ; i++)
        buf[i] = sampleAlphabet.charAt(random.nextInt(sampleAlphabet.length()));
    return new String(buf); 
```

谢谢大家的回复。它们都是可以接受的解决方案。我真的很感激。

最好的给你们！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-09T17:28:35.527

你为什么不试试这个？它满足您的所有需求。

[https://github.com/peet/hashids.java](https://github.com/peet/hashids.java)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T16:45:51.650

我认为最好的方法是生成一个带有数字和字母的随机字符串，在使用它之前，确保它不存在于您的数据库中。如果是这样，只需生成另一个并再次检查，等等......

您不太可能两次生成相同的字符串（但可能）。

或者如您所说，您可以使用 Java 的 UUID 实现，但我猜它有点长。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T16:45:44.943

您可以 Base64 编码自纪元以来的当前时间（以毫秒为单位）：

```
byte[] bytes = String.valueOf(System.currentTimeMillis()).getBytes();
String s = new sun.misc.BASE64Encoder().encode(bytes); 
```

有关演示，请参阅[https://ideone.com/f4cFy1 。](https://ideone.com/f4cFy1)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-17T16:49:15.517

UUID 是 128 位值的十六进制表示（插入“-”作为标点符号，就像逗号或空格在十进制表示中用作千位分隔符一样）。您可以像往常一样生成 UUID，然后将 128 位值转换为更紧凑的表示形式，例如[Base64](http://en.wikipedia.org/wiki/Base64)或[Ascii85](http://en.wikipedia.org/wiki/Ascii85)（又名 Base85），从而保留 UUID 的优点并缩短标识符。这将减少到 20 个字符（使用 Ascii85）；不像 YouTube 的 id 那样紧凑，但从 UUID 的 36 个字符中节省了大量资金。

如果这仍然太长，请生成较少数量的随机字节（使用好的 PRNG）并转换为 Ascii85。在 Ascii85 中，每四个字节的数据生成 5 个字符。

编辑：在之前的评论中，我建议使用 UUID 的哈希值。这是它的工作原理。

1.  确定要在代码中允许的字符。（假设它是 az、AZ 和 0-9，总共 62 个字符。）字符数是编码的基*b*。
2.  决定在 base - *b*编码中需要多少个字符*L。*计算可以用那么多字符表示的值的数量*n* = *b* ^(* L。*)
****   生成一个 128 位 UUID 值*v*。将此视为 0 和*N* = 2 ^(128)之间的数字。*   使用一个简单的散列函数（如[这里描述的函数）将](http://en.wikipedia.org/wiki/Hash_function#Hashing_uniformly_distributed_data)*v*散列为范围 [0, *n* ）的值*h*。例如，您可以使用*h* = floor(( *v* * *n* ) / *N* )。（如果*n* -等效地，*b* - 是 2 的幂，这只是一个二进制移位操作。）****   使用步骤 1 中选择的字符集将*h*转换为 base- *b表示。*******

 *** * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-17T16:47:53.697

如果您想生成任意字符（例如，全范围的字母数字，而不仅仅是十六进制数字）甚至篡改它们的频率，请使用您想要的示例字符创建一个数组，然后：

```
String sampleAlphabet = "whatever";
Random random = new Random();
char[] bf = new char[length];
for (int i = 0 ; i < length ; i++)
    buf[i] = sampleAlphabet.charAt(random.nextInt(sampleAlphabet.length());
return new String(bf); 
```

如果您愿意，可以使用[SecureRandom以提高安全性。](http://docs.oracle.com/javase/6/docs/api/java/security/SecureRandom.html)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-17T16:52:05.553

UUID 通常是十六进制格式的 128 位数字。

那么最大的 128 位数字是`2^128-12`. 如果以十六进制表示将变为 32 位字符长度`log(2^128)/log(16) = 32`

您可以定义一个自定义基数（例如包含 0-9、az 和 AZ），它将变为基数 (62) 10+26+26（在此基数中区分大小写！）。

所以最大的 128 位数字将成为`ceil(log(2^128)/log(62)) = 22`位数长度。

如果它仍然很大，那么您应该使用较小的数字（不是 128 位的）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-08-29T09:29:19.943

生成一个随机字符使用这个函数

```
public static String generateKey(int length) {
    String alphabet
            = new String("0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"); //9
    int n = alphabet.length();

    String result = new String();
    Random r = new Random();
    for (int i = 0; i < length; i++) {
        result = result + alphabet.charAt(r.nextInt(n));
    }
    return result;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-17T16:37:00.027

这是一个很好的方法来做你想做的事。`length`是你想要的 UUID 的长度。重要的是要注意，随着 UUID 的长度缩短，发生碰撞的机会也会增加（感谢 assylias 在评论中提到这一点）。在使用它之前，您绝对应该检查以确保它不存在于数据库中。如果是这样，那么只需生成另一个。

```
public String getUUID(int length)
{
    return UUID.randomUUID().toString().replaceAll("-", "").substring(0, length);
} 
```**

# android - 试图在android的gridview中更改字体大小

> ID：16065344
> 
> 赞同：3
> 
> 时间：2013-04-17T16:27:54.913
> 
> 标签：android, gridview, styles, font-size

我正在尝试在我的 android 应用程序中更改我的 gridview 的字体大小。

这是我制作gridview的代码：

```
GridView gridview = (GridView)findViewById(R.id.gridView);
        ArrayAdapter<String> arrayadapter = new ArrayAdapter<String>(
                this,
                R.layout.customstyle, 
                Rows );

        gridview.setNumColumns(14);
        gridview.setAdapter(arrayadapter); 
```

这是我的自定义样式 .xml 文档中的代码

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
     android:layout_height="match_parent"
     android:orientation="vertical" >

    <TextView
        android:id="@+id/grid_item_label"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="8dip" >
    </TextView>
</LinearLayout> 
```

当我尝试让它应用我的风格时，该程序当前崩溃，但它在使用标准样式时可以正常工作。所以有人可以帮我修复这个样式，这样我就可以设置字体大小谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T16:33:55.380

`ArrayAdapter`应该有 type 的资源 id `TextView`。

删除父级`LinearLayout`，您的布局应该像

像这样使用

**自定义样式.xml**

```
<?xml version="1.0" encoding="utf-8"?>
  <TextView
         xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/grid_item_label"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="8sp" >
    </TextView> 
```

用上面的替换您的自定义布局将解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T16:30:12.690

您可以像这样创建自己的自定义适配器：

```
public class MyAdapter extends BaseAdapter{

private Context mContext;
private String[] text = {};
private Integer[] mThumbIds = {};
public MyAdapter(Context c,String[] text)
{
    mContext = c;
    this.text = text;
}

public int getCount()
{
    return mThumbIds.length;
}

public Object getItem(int position)
{
    return position;
}

public long getItemId(int position)
{
    return position;
}

public View getView(int position, View convertView, ViewGroup parent)
{
    View myView = convertView;
    if (convertView == null)
    {
        LayoutInflater li = (LayoutInflater)mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        myView =li.inflate(R.layout.grid_item, null);
        TextView tv = (TextView)myView.findViewById(R.id.grid_itemTxt);
        tv.setText(text[position]);
    }
    return myView;
} 
```

**GridItem 布局**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id = "@+id/gridItem"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation= "vertical"
    android:gravity="center_horizontal" >

    <TextView 
        android:id="@+id/grid_itemTxt"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:textColor="#6075B2">
    </TextView>
</LinearLayout> 
```

然后在你的 onCreate() 方法上：

```
private GridView grid;
private String text[] = {"hello","world","here","is","a","grid","view"};
grid = (GridView)findViewById(R.id.yourGridLayoutXml);
grid.setAdapter(new MyAdapter(this, text)); 
```

**注意**：`MyAdapter`是一个扩展的 java 类`BaseAdataper`

# menu - Joomla 3: How to show the parent menu item as 'active'

> ID：16065346
> 
> 赞同：0
> 
> 时间：2013-04-17T16:28:00.787
> 
> 标签：menu, submenu, joomla3.0

I have 3 menu positions. Each one is a sub level of the other.

If a user clicks a top level menu the clicked item is shown as active. This is good.

But if the user clicks on a sub item, it only shows the sub item as active (and not the parent item under which it comes). Here's my problem...

I want to show the parent item as active along with the selected sub item. Is this possible?

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T12:36:46.280

使用`current`类而不是`active`类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-11T14:17:51.023

是的，这是可能的，甚至是默认的 Joomla 行为。

听起来您的子菜单项是“菜单项别名”、“外部 URL”或等效类型的实例，指向不同的菜单项，该菜单项可能属于不同的（和隐藏的）菜单。

即使浏览您的子菜单，最终的目标菜单项也绝对不是您父菜单的子菜单，因此 Joomla 不能将其视为“活动”。

据我所知，如果您希望浏览子菜单项将其父项显示为活动状态，则必须使它们实际上是父项和子项。

它解决了你的问题吗？

# asp.net - ASP.Net Cache object is not sharing between different PCs

> ID：16065351
> 
> 赞同：1
> 
> 时间：2013-04-17T16:28:03.990
> 
> 标签：asp.net, caching, web-applications

I have a ASP.Net 4.0 web application and I extract and put the data into the cache for 10 minutes by using the following code:

```
List<Student> students = new List<Student>();

if (System.Web.HttpRuntime.Cache["MyStudents"] != null)
{
    students = (List<students >)System.Web.HttpRuntime.Cache["MyStudents"];
    Response.Write("Get From Cache");
}
else
{
    students = MyClass.GetStudents();
    System.Web.HttpRuntime.Cache.Insert("MyStudents", students, null, DateTime.Now.AddMinutes(10), TimeSpan.Zero);
    Response.Write("Get From DB");
} 
```

It works only for the single user or PC. If I use another pc to browse the same page, it connects to the database at the first load. But it uses the cache for the next time. The problem is that it's not sharing the cache object between different session.

Could you pls advise me where I am doing wrong? Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:39:11.430

根据 MSDN[文档](http://msdn.microsoft.com/en-GB/library/4y13wyk9.aspx)，您需要使用`Cache.NoSlidingExpiration`而不是`TimeSpan.Zero`禁用滑动到期。

# javascript - jQuery click not firing in webkit browsers

> ID：16065353
> 
> 赞同：0
> 
> 时间：2013-04-17T16:28:06.927
> 
> 标签：javascript, jquery, webkit, onclick

I'm trying to have jQuery grab a handful of li elements based upon class.

Everything is running smoothly in FF and IE, however webkit browsers don't fire the click event. I've run the code through JSLint, it comes back valid, I also get no errors via the console in Chrome.

All code is viewable at [http://jsfiddle.net/Yq3d9/12/](http://jsfiddle.net/Yq3d9/12/)

```
$(document).ready(function () {
    $('#countryList option').click(function () {
        var myCountry;
        $('#countryList').change(function () {
            myCountry = $(this).val();
        }).change();
        $('#premier ul, #popular ul, #recommended ul, #supported ul').empty();
        $('.' + myCountry + '.Popular').clone().appendTo('#popular ul');
        $('.' + myCountry).not('.Premier, .Popular').clone().appendTo('#supported ul');
        $('#Display div, #premier ul, #popular ul, #supported ul').removeClass();
        $('#Display div').addClass(myCountry);
    });
    $('#expandButton').click(function () {
        $('#supportedWrapper').animate({
            height: ($('#supported').height() + 100)
        }, 1200);
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T16:32:02.517

**只**处理下拉菜单的`change`事件：

```
$(document).ready(function () {
    $('#countryList').change(function () {
        var myCountry = $(this).val();
        $('#premier ul, #popular ul, #recommended ul, #supported ul').empty();
        $('.' + myCountry + '.Popular').clone().appendTo('#popular ul');
        $('.' + myCountry).not('.Premier, .Popular').clone().appendTo('#supported ul');
        $('#Display div, #premier ul, #popular ul, #supported ul').removeClass();
        $('#Display div').addClass(myCountry);
    });
    $('#expandButton').click(function () {
        $('#supportedWrapper').animate({
            height: ($('#supported').height() + 100)
        }, 1200);
    });
}); 
```

**演示：http:** [//jsfiddle.net/XS5Bz/](http://jsfiddle.net/XS5Bz/)

我不确定您要对`<option>`单击的单个 s 做什么，但这不是必需的，并且`change`每次`<option>`单击 a 时您都会将一个新事件绑定到下拉列表...这是矫枉过正且不完全正确.

该`change`事件在您更改 selected 时发生`<option>`，因此它应该是您所需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T16:34:54.223

`change`只需将事件绑定到`<select>`元素就足够了，而不是获取当前值并触发更改的复杂方式。这是一个工作小提琴

[http://jsfiddle.net/Yq3d9/13/](http://jsfiddle.net/Yq3d9/13/)

# facebook - Invoke callback on liking

> ID：16065361
> 
> 赞同：0
> 
> 时间：2013-04-17T16:28:38.637
> 
> 标签：facebook

This code is totally from FB Development tutorial. In my html file:

```
<script>
window.fbAsyncInit = function() {
        FB.init({
            appId      : 'APP_ID', // App ID
            channelUrl : '//WWW.localhost:3000//channel.html', // Channel File
            status     : true, // check login status
            cookie     : true, // enable cookies to allow the server to access the session
            xfbml      : true  // parse XFBML
        })};

    (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/ru_RU/all.js#xfbml=1&appId=APP_ID";
    fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));

    FB.Event.subscribe('edge.create',
            function(response) {
                alert('You liked the URL: ' + response);
            }
    );
</script> 
```

As it is written in tutorial, Event subscribe should invoke alert each time button is clicked, but nothings happens. Basically, I want to start AJAX put each time button clicked and count likes

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:04:41.587

事件订阅者应该在初始化程序中，APP_ID 应该是字符串，在 localhost 上测试需要删除 WWW：

```
window.fbAsyncInit = function() {
        FB.init({
            appId      : 'APP_ID', // App ID
            channelUrl : '//localhost:3000/channel.html', // Channel File
            status     : true, // check login status
            cookie     : true, // enable cookies to allow the server to access the session
            xfbml      : true  // parse XFBML
        FB.Event.subscribe('edge.create',
            function(response) {
                alert('You liked the URL: ' + response);
            }

 })}; 
```

# python - python dict和PyQt小部件之间连接的最佳方式是什么？

> ID：16065362
> 
> 赞同：1
> 
> 时间：2013-04-17T16:28:40.293
> 
> 标签：python, pyqt, pyside

我有一个带有数千个键的巨型字典，其中一些键也是巨型字典，依此类推。

我也有很多带有它们的字段的小部件。

我需要的是在我的小部件上显示一些来自 dict 的首选（由我）值。但不仅显示：当在一个地方（小部件或字典）编辑值时，我需要在第二个地方自动更改它。

关键是，我需要做的非常简单和自动，因为有太多的值和太多的字段。

ps 请懂我帖子的人建议修正我的语法。我很抱歉。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T16:44:17.803

您可以基于[QAbstractItemModel](http://srinikom.github.io/pyside-docs/PySide/QtCore/QAbstractItemModel.html)派生自己的模型，该模型为您的 dict 提供接口，而无需复制值。然后你可以使用从[QTreeView](http://srinikom.github.io/pyside-docs/PySide/QtGui/QTreeView.html)或[QColumnView](http://srinikom.github.io/pyside-docs/PySide/QtGui/QColumnView.html)派生的东西来显示你的值。

# sql - TSQL关于日期的不等于运算符

> ID：16065364
> 
> 赞同：2
> 
> 时间：2013-04-17T16:28:46.057
> 
> 标签：sql, sql-server, tsql

```
SELECT * FROM TABLE_NAME
WHERE 
([DateOfLastTransaction] <> @p29) 
OR ([DateOfLastTransaction] <> @p30)

@p29='2012-11-30 00:00:00.000',  3 records
@p30='2012-04-17 00:00:00.000'  1 record 
```

我从 SQL 探查器获得查询并删除了不必要的位。删除 OR 和 @p30 参数返回 3 条记录。是“或”影响它吗？

我有 2 个日期的 4 条记录（需要排除），但我的查询不起作用。这是为什么？我在做一些非常愚蠢的事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T16:37:07.463

我相信您的意思是使用`AND`逻辑运算符。例如

```
SELECT *
FROM Table_Name
WHERE 
     [DateOfLastTransaction] != @p29
     AND [DateOfLastTransaction] != @p30 
```

一切都将与`OR`运算符一起返回，因为`[DateOfLastTransaction]`可能在第一个逻辑比较中合格，但在第二个逻辑比较中无效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T17:18:32.710

考虑这个陈述

```
SELECT * FROM TABLE_NAME
WHERE 
   [DateOfLastTransaction] <> @p29 
OR [DateOfLastTransaction] <> @p30 
```

除非 [DateOfLastTransaction] 为 null
或 @p29 = @p29 = [DateOfLastTransaction]
它将始终返回 true

如果日期不匹配
true 或 true 评估为 true

如果日期匹配 @p29
false 或 true 评估为 true

如果日期匹配 @p30
true 或 false 评估为 true

# javascript - 如何修改 javascript 函数以操作多个按钮？

> ID：16065367
> 
> 赞同：0
> 
> 时间：2013-04-17T16:28:52.110
> 
> 标签：javascript, html

我想在超过 1 个按钮上使用相同的 javascript 函数，但它不起作用。这是：

**HTML**

```
<a href="#" id="buton"><p> SOMETHING</p></a>
<a href="#" id="buton"><p> OTHERS</p></a>

<div id="link" style="display:none;">
    <h1>SOMETHING</h1>
</div>
<div id="link" style="display:none;">
    <h1>OTHERS</h1>
</div> 
```

和**JAVASCRIPT**

```
<script>
$('#buton').click(function() {
$('#link').toggle('slow', function() {
// Animation complete.
});
});
</script> 
```

所以在第一个按钮上它确实有效，但在第二个按钮（ OTHERS ）上它不起作用。为什么？我该如何解决？（我将在我的原始页面上使用超过 10 个按钮，所以请给我最好的想法）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T16:30:04.127

ID 必须是唯一的。

您应该尝试改用一个类。

**HTML**

```
<a href="#" class="buton" data-for="link1"><p> SOMETHING</p></a>
<a href="#" class="buton" data-for="link2"><p> OTHERS</p></a>

<div id="link1" style="display:none;">
    <h1>SOMETHING</h1>
</div>
<div id="link2" style="display:none;">
    <h1>OTHERS</h1>
</div> 
```

和**JAVASCRIPT**

```
<script>
$('.buton').click(function() {
  $('#'+this.getAttribute("data-for")).toggle('slow', function() {
    // Animation complete.
  });
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T16:30:07.280

在 HTML`id`中必须是唯一的。浏览器通过只返回一个结果来强制执行此操作`#link`。

您可以给他们不同`id`的 s 或使用一个类。

```
$("#link1,#link2,#link3").toggle(..) 
```

或者

```
$(".links").toggle(..) 
```

# java - SHA512客户端握手实现

> ID：16065370
> 
> 赞同：1
> 
> 时间：2013-04-17T16:28:59.230
> 
> 标签：java, python, api, hmac, sha512

我正在尝试制作一个与服务器 api 交互的 hmac 实现，而我必须使用的唯一示例是 python 片段。不幸的是，我从未接触过 python，而且我的 Java 有点生疏。

python示例代码包括函数：

```
handshake = str(hmac.new(secret, hash_data, sha512)) 
```

其中secret 是从连接的服务器检索到的解码散列，hash_data 是要发送的数据，sha512 是转换为Java 时的“MessageDigest”类型。

我只是想知道是否有与此功能等效的接近 Java。它似乎应该在 Java.Security 类中，但我无法找到 hmac 函数和实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T16:51:19.740

与密码学相关的 API 和函数存在于[javax.crypto](http://docs.oracle.com/javase/7/docs/api/javax/crypto/package-summary.html)中，而不是[java.security](http://docs.oracle.com/javase/7/docs/api/java/security/package-summary.html)中。

我不了解 Python，但鉴于您对所显示方法的描述和文档，您需要以下内容：

```
final Charset charset = Charset.forName("ASCII");
final String secret = "mykey";
final String data = "A message to be turned to gibberish";
final String algorithm = "HmacSHA512";

byte[] keyBytes = secret.getBytes(charset);
SecretKeySpec signingKey = new SecretKeySpec(keyBytes, algorithm);

Mac mac = Mac.getInstance(algorithm);
mac.init(signingKey);

byte[] hashed = mac.doFinal(data.getBytes(charset));
System.out.println(new String(hashed, charset)); 
```

该代码假定字节和字符串转换基于 ASCII（我相信 Python 默认使用它）。您很可能必须调整逻辑，但这是一个很好的起点。

# python - 不删除空值（Python）

> ID：16065372
> 
> 赞同：0
> 
> 时间：2013-04-17T16:29:14.067
> 
> 标签：python, string, python-3.x, null

为了处理多个 CSV 文件的内容，我必须从 string-list-elements 中过滤几个字符，尤其是 NULL 值。为此，我尝试了网络上的几种解决方案。其中之一是以下功能：

```
def removeNull(rawString):
    l = filter("\u0000", list(rawString))
    newString = ''.join(l)
    printUtil.printAll(newString, "\n")
    return newString 
```

但是，它总是给我`TypeError: 'str' object is not callable`，终止程序。更复杂的解决方案没有给我一个错误，但它们完全没有改变，NULL 值仍然存在。

`\u0000`此外，如果我用任何其他值进行交换，但是`None`（这不会导致任何更改），我会收到相同的错误消息。

希望有人可以为我解决这个问题，因为经过 4 或 5 个小时的反复试验，我已经没有想法了。

感谢您的回答和建议！

**解决问题：**

错误消息源于我用作`"\u0000"`内置过滤器功能的参数的事实。该特定问题的两个有效解决方案侧重于传递必要的功能：

```
l = filter(lambda x: x != '\u0000',rawString) 
```

或者

```
l = filter(lambda x:ord(x) != 0, list(rawString)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:31:20.957

`filter`期望第一个参数是一个*函数*（或者，更准确地说是 a `callable`）。然后它遍历第二个参数，将每个参数传递给函数。如果函数返回类似 False 的值，则会在输出中跳过它。

你可以试试：

```
l = filter(lambda x: x != '\u0000',rawString) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T16:31:07.930

```
l = filter(lambda x:ord(x) != 0, list(rawString)) 
```

应该工作得更好

让它更透明

```
def is_not_null(ch):
    return ch != u'\u0000'

print filter(is_not_null,list(rawString)) 
```

# asp.net - 错误：“AjaxControlToolkit”未定义但仅在 IIS 上

> ID：16065375
> 
> 赞同：1
> 
> 时间：2013-04-17T16:29:19.350
> 
> 标签：asp.net, visual-studio-2010, iis-7, ajaxcontroltoolkit

我有一个使用 AjaxControlToolkit 的 ASP.NET 应用程序。当我使用开发Web服务器从VS运行它并且在部署到测试服务器时也可以正常工作。现在我决定在我的计算机上使用 IIS 进行尝试。我在那里创建了虚拟目录并发布了站点。但是如果我从 IIS 运行它，我会收到以下错误：

![错误：“AjaxControlToolkit”未定义](https://i.stack.imgur.com/dxqz0.png)

相同的文件位于 bin 文件夹中，并且 AjaxControlToolkit.dll 在那里。

我想也许我需要更改 IIS 中的一些设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:01:52.870

IIS 和 VS 开发服务器之间的一大区别是，在 IIS 中，您的应用程序使用 AppPool Identity（网络服务）运行，而在 VS Studio 中，它使用您自己的帐户（可能是管理员）运行。“网络服务”应该是您 bin 文件夹上的阅读器。

通常你不应该在 IIS 中遇到问题，但只是为了确保检查你的文件夹安全性，将“Everyone”设置为阅读器只是为了检查。

您是否还检查过您的应用程序池目标框架？

如果您使用模拟，请确保您的模拟用户在 IIS_IUSRS 组中。

# java - 在jar文件夹中创建文件

> ID：16065376
> 
> 赞同：2
> 
> 时间：2013-04-17T16:29:25.920
> 
> 标签：java, jar, file-handling

我有一个 jar 文件**abc.jar ，它有一些特定的代码可以在同一个 jar 文件的名为** **temp**
的 文件夹中创建一个文件。 喜欢

 **```
createFile() 
```

现在我想将**abc.jar**包含到我的其他 Web 项目中。应该调用这个函数**createFile()**并相应地创建文件。
那么有没有办法在jar文件中创建文件。
我知道 jar 总是被压缩和只读的。
但是仍然有解决方法，对我有很大帮助。
:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:43:09.640

要*读取*中的文件`abc.jar`，您可以使用[`ClassLoader.getResource()`](http://docs.oracle.com/javase/6/docs/api/java/lang/ClassLoader.html#getResource%28java.lang.String%29)，但我不认为 Java 提供了类似的工具来将文件添加到 jar 中（出于安全目的）。

jar 文件只是一个 zip 文件，所以如果你真的需要，你可以将它解压缩到一个临时目录，添加文件，然后用你的新文件重新创建 jar。但是，我认为这不会达到您正在寻找的效果 - 您以这种方式添加到 jar 文件中的任何文件都对您的运行代码不可用，因为原始 jar（没有添加的文件）已经加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T16:40:43.740

您可以提取完整的 Jar，将文件添加到提取的目录结构中，然后从目录结构中重新创建 jar。

例如，您可以使用[ZipInputStream](http://docs.oracle.com/javase/6/docs/api/java/util/zip/ZipInputStream.html)和[ZipOutputStream](http://docs.oracle.com/javase/6/docs/api/java/util/zip/ZipOutputStream.html)来实现此目标。此外，与[ZipFile](http://docs.oracle.com/javase/6/docs/api/java/util/zip/ZipFile.html)和[ZipEntry](http://docs.oracle.com/javase/6/docs/api/java/util/zip/ZipEntry.html)相关的类可能会有所帮助。

据我所知，直接添加文件是不可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T17:01:31.493

看看 TrueVFS：[http](http://truevfs.net/) ://truevfs.net/ （或其前身 TrueZip [https://christian-schlichtherle.bitbucket.io/truezip/](https://christian-schlichtherle.bitbucket.io/truezip/)）。它提供对归档文件的虚拟文件系统访问。**

# android - 适用于所有屏幕尺寸的 Android 图形尺寸

> ID：16065377
> 
> 赞同：1
> 
> 时间：2013-04-17T16:29:32.657
> 
> 标签：android, image, graphics

所以我使用 Adob​​e Photoshop CS6 创建了一个大小为 1024 像素高 x 512 像素宽，分辨率为 320ppi 的背景图像。我选择了那个尺寸，因为我只是觉得它很好。我一直在阅读有关支持多种屏幕尺寸的 android 说明，但是一旦为我的应用程序创建了图像，我仍然对试图弄清楚我的下一步感到困惑。

我想支持所有屏幕尺寸，并且我知道我需要调整背景图像的大小以支持 ldpi、mdpi、hdpi 和 xdpi。如何确定我需要使用哪些像素值来调整图像大小以支持 ldpi、mdpi、hdpi 和 xdpi？此外，一旦调整了背景图像的大小，我必须为每个图像文件提供什么命名约定以将其放置在每个 ldpi-xdpi 文件夹中，并确保应用程序自动选择正确的图像以支持该屏幕尺寸和密度发射？我对 java 编程并不陌生，但在添加图像并在 android 应用程序中使用它们时我是新手。因此，如果可能，请提供分步指南，说明在设计图像时需要做什么以及如何将其实现到您的 android 应用程序中。

谢谢大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:28:25.667

这是一个简单的工具：[Resolute-it](http://www.filedropper.com/resolute-it)，我为我的办公室开发来处理这个问题。用法非常简单，如果您遇到困难，请告诉我。该软件需要 JDK 1.5 或更高版本。这将自动从您的原始作品生成适当的分辨率并将它们放置到适当的`res`文件夹中；如果不存在将创建（即假设`drawable-hdpi`不存在，将自动生成）。[编辑：上一个链接仅适用于 Mac OSX，您可以在此处](http://www.filedropper.com/resolute-it_1)获取 Mac 版本和原始 .jar/java 版本（双击它也可以在 Windows 和 Linux 上运行）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T17:31:47.640

（在我的评论中空间不足，因此在此处添加）您可能会发现[Asset Studio Tool](http://android-ui-utils.googlecode.com/hg/asset-studio/dist/icons-launcher.html)很有帮助。它将从您的原始艺术中生成所需的文件。您需要将 ldpi/mdpi/... 文件复制到 Eclipse 项目中相应的 res/drawable-lpdi、res/drawable-mdpi 等文件夹中。给定的图像在每个可绘制文件夹中将具有相同的文件名（例如 logo.png），但具有不同的分辨率。

当您的应用启动时，Android 会根据设备的屏幕特性自动选择合适的 ldpi/mdpi/... 图像。

# c - 长被截断的除法 - C

> ID：16065378
> 
> 赞同：0
> 
> 时间：2013-04-17T16:29:34.010
> 
> 标签：c, timing, division, truncation

我正在尝试使用该`gettimeofday()`功能对功能进行计时。我能够以微秒为单位获取时间，但是当尝试将其除以 a`long`以获取以秒为单位的时间时，我的值被截断为单个`integer`. 有没有人对为什么会发生这种情况有任何见解？我曾假设除以 a`long = 1000000.0`会防止这种截断。

功能时序：

```
struct timeval t1,t2;

gettimeofday(&t1, NULL);

// Computes C - C1 - using single thread
for (i=0; i < n; i++)
    for (j=0; j < p; j++)
    {
        C1[i][j]=0;
        for (k=0; k < m; k++)
            C1[i][j] += A[i][k]*B[k][j];
    }

gettimeofday(&t2, NULL); 
```

此处应用的部门：

```
long divider = 1000000.0;
long elapsed = ((t2.tv_sec - t1.tv_sec) * 1000000.0L) + (t2.tv_usec - t1.tv_usec);
elapsed = (elapsed/divider);

printf("Time in seconds: %ld seconds\n", elapsed); 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T16:35:49.447

`Long`是一个整数类型，意味着它不会保留小数，您可能想要使用`double`for`divider`和`elapsed`. 更多信息请访问[cplusplus.com](http://www.cplusplus.com/doc/tutorial/variables/)

请注意，您还需要`%lf`printf[值](http://www.cplusplus.com/reference/cstdio/printf/)。

**更正**：就像`%f`printf-format 显然[就足够了](https://stackoverflow.com/a/4264154/249237)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T16:41:31.953

`long`类型是整数类型。

问题是您正在尝试将您想要成为 a `float`（或 a `double`）的结果存储在 a 中`long`。

这里有两个问题：1-您的操作数永远不会转换为`float`/ `double`（编译器隐式转换），因此所有中间操作都返回 an`int`或 a `long`。2- 你的结果是 a `long`：即使你的操作数是`float`/ `double`，你的结果也会被转换为`long`。

你必须做的：使用`double`变量。

```
double divider = 1000000.0;
double elapsed = ((t2.tv_sec - t1.tv_sec) * 1000000.0) + (t2.tv_usec - t1.tv_usec);
elapsed = (elapsed/divider);

printf("Time in seconds: %5.5f seconds\n", elapsed); 
```

# java - Hibernate：映射来自另一个表列的值

> ID：16065379
> 
> 赞同：8
> 
> 时间：2013-04-17T16:29:38.843
> 
> 标签：java, hibernate

我有一个域实体，如下所示：

```
class Exch{
    private int id;
    private String val1;
    private String val2;

    @Column(name = "val1")        
    public String getVal1(){
        return val1;  
    }
    @Column(name = "val2")
    public String getVal2(){
        return val2;
    }
    @Column(name = "id")
    public int id(){
        return id;
    }
} 
```

和表：

交换

* * *

Exch_ID| VAL1 | VAL2

* * *

100000 | AAA | BBB

200000 | CCC | DDD

现在我有另一个表格，如下所示：

exch_extra

* * *

Exch_ID| VAL3 | VAL4

* * *

100000 | ZZZ| 年年

200000 | XXX| 乌乌乌

无论如何我可以将 exch_extra 表中的 val3 映射到 Entity Exch 而不创建额外的 Exch_extra 实体？

所以我可以拥有：

```
class Exch{
    private int id;
    private String val1;
    private String val2;
    private String val3;

    @Column(name = "val1")        
    public String getVal1(){
        return val1;  
    }
    @Column(name = "val2")
    public String getVal2(){
        return val2;
    }
    @ do something here so i can have val3 from exch_extra table
    public String val3(){
        return val3
    }

    @Column(name = "id")
    public int id(){
        return id;
    }
 } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-17T16:32:05.777

Hibernate 有一个`@SecondaryTable`注解，它可以帮助您将多个表映射到一个实体。

只需添加辅助表注释，连接列（在辅助表中）注释。

然后映射其他列，例如：

```
@Column(name="val3", table="table2")
private int val3; 
```

`table2`另一个表的名称在哪里。

# javascript - 难以在 iPhone/移动网站上选择单选按钮

> ID：16065381
> 
> 赞同：0
> 
> 时间：2013-04-17T16:29:47.380
> 
> 标签：javascript, iphone, css, mobile, user-experience

在我的移动网站上，我在网站的关键阶段有一个`Yes`或`No`单选按钮问题。

我收到一个奇怪的报告说，有时这些单选按钮很难在 iPhone 等支持触摸的设备上选择。

有趣的是，我亲眼目睹了用户在单选按钮周围刺穿并*最终*突出显示为被选中的情况。然后我自己拿了手机，并能够立即突出显示它。

触摸技术有问题吗？（如果有这样的事情）。我读过一些 iPhone 的触摸屏灵敏度有问题，但是如果我能够突出显示它，那么这就排除了手机的问题。

我想要的是单选按钮本身和标签周围的区域，这样如果用户触摸其中任何一个，就会选择单选按钮。这可能吗？

这是我当前的标记：

```
<input type="radio" name="del_standard_use_b_as_s" id="del_standard_use_b_as_s_yes" value="yes">
<label for="del_standard_use_b_as_s_yes" class="use_existing">Yes</label> 
```

这是单选按钮如何在手机上显示的屏幕截图。

![是/否单选按钮](https://i.stack.imgur.com/W5f4D.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T16:34:14.507

将标签包裹在输入周围并为标签添加一些填充。

# clojure - Clojure 中的线程安全文件写入

> ID：16065383
> 
> 赞同：3
> 
> 时间：2013-04-17T16:29:51.977
> 
> 标签：clojure

我正在玩线程安全文件写入，但我不知道为什么这段代码没有记录到文件中（基于代理部分：[http ://blakesmith.me/2012/05/25/understanding -clojure-concurrency-part-2.html](http://blakesmith.me/2012/05/25/understanding-clojure-concurrency-part-2.html) )

代码运行了所有正确的功能，但文件仍然是空的。我认为这是因为文件关闭没有以某种方式发生，但即使取消期货以强制关闭最后作为测试似乎也无济于事。

```
(defn write-out [out msg]
  (.write out msg)
  out)

(defn log [logger msg]
  (send logger write-out msg))

(defn close [logger]
  (send logger #(.close %)))

(defn go []
  (let [ofile (agent (clojure.java.io/writer "/tmp/log.test.txt" :append true))]
    (dotimes [x 10]
      (future (log ofile (str "Log A " x "\n"))))
    (close ofile)
    (shutdown-agents))) 
```

小红利问题：链接的帖子从未真正解释为什么我需要在写出结束时返回文件写入器指针。我知道你需要它，但我不知道为什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T16:40:30.177

也许你需要打电话`(.flush out)`？

您的函数需要返回`out`，以便代理在`defn`它收到的下一次调用中具有该值。写入文件本身就是一个副作用。

an 的典型示例用例`agent`是由多个线程“递增”（好吧，被新的递增值替换）的计数器。但是，在这种情况下，您不会增加计数器，而是写入`out`(`OutputStream`实例)。所以`out`必须返回，以便将其传递给下一个代理任务。

我发现有用的博文：http: [//lethain.com/a-couple-of-clojure-agent-examples/](http://lethain.com/a-couple-of-clojure-agent-examples/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T22:30:22.280

请注意，即使您按照另一个答案中的建议刷新文件，此代码的行为也是不确定的。例如，可能所有 10 个生成`futures`的对象在第一次被安排之前都需要一段时间，因此在它们开始之前，该`-main`函数已经`(close ofile)`在记录器上排队了一个操作：在这种情况下，所有写入尝试都将失败。事实上，甚至可能`shutdown-agents`在任何期货开始之前就已经被调用：那么他们的`send`任何行动都不会产生任何影响！

# r - 增加 R 图中点之间的距离

> ID：16065393
> 
> 赞同：0
> 
> 时间：2013-04-17T16:30:17.660
> 
> 标签：r, plot

下面的代码生成了一个图，其中一个点的大小与具有相同 x 和 y 值的案例数量成正比。如何增加点之间的空间，使它们不会相互交叉或相交？虽然下面的示例使用了假数据，但真实数据包含大约 200 个高度相交的点，因此很难感知每个单独的点。

谢谢，

苏菲亚

```
 x = seq(1:10)
    y = c(4,3.8,3.8,3.2,3.1,2.5,2,1.5,1.2,1.3)
    size = c(7,20,2,70,100,70,5,80,110,2)
    pdf("example.pdf")
    par(mar=c(5,5,1.8,1.8))
    plot(y ~ x, cex = sqrt(size), pch = 1,
         ylab="y",
         xlab = "x",ylim=c(0,4),
         cex.lab =1.8,cex.axis =1.3,
         lwd = .5,type= "p", col="grey60")
    dev.off() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:45:06.610

我会用`ggplot2`这个：

```
df = data.frame(x = seq(1:10), 
                y = c(4,3.8,3.8,3.2,3.1,2.5,2,1.5,1.2,1.3),
                size = c(7,20,2,70,100,70,5,80,110,2))

library(ggplot2)
ggplot(df, aes(x = x, y = y, size = size)) + geom_point() 
```

![在此处输入图像描述](https://i.stack.imgur.com/4AuAI.png)

`ggplot2`根据 中的值缩放地图的区域`size`，它不直接使用`size`as `cex`。因此，不存在重叠问题，无需手动调整`cex`.

# ios - 如何在 iOS 上绘制嵌套的径向渐变？

> ID：16065400
> 
> 赞同：3
> 
> 时间：2013-04-17T16:30:39.743
> 
> 标签：ios, objective-c, core-graphics, quartz-2d

我正在使用最新的 SDK 开发 iOS 5.0+ 应用程序。

我想做类似的事情

![图 8-6](https://developer.apple.com/library/ios/documentation/graphicsimaging/conceptual/drawingwithquartz2d/Art/torus.gif)

我想知道如何嵌套径向渐变。

这是我现在的代码：

```
- (void)drawLayer:(CALayer *)layer inContext:(CGContextRef)context
{
    _innerColor = [UIColor yellowColor];
    _outerColor = [UIColor redColor];

    CGContextSetAllowsAntialiasing(context, true);
    CGContextSetShouldAntialias(context, true);

    CGFloat graWidth = layer.frame.size.width / 2;
    CGFloat graHeight = layer.frame.size.height / 2;

    CGFloat firstGlossLocation = 0.0f;
    CGFloat outterPercent = 0.0f;

    if (_isUnSelected)
    {
        firstGlossLocation = 0.7f;
        outterPercent = graWidth * 0.0f;
    }
    else
    {
        firstGlossLocation = 0.0f;
        outterPercent = graWidth * 0.25f;
    }

    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();

    CGFloat iRed = 0.0, iGreen = 0.0, iBlue = 0.0, iAlpha =0.0;
    [_innerColor getRed:&iRed green:&iGreen blue:&iBlue alpha:&iAlpha];

    CGFloat oRed = 0.0, oGreen = 0.0, oBlue = 0.0, oAlpha =0.0;
    [_outerColor getRed:&oRed green:&oGreen blue:&oBlue alpha:&oAlpha];

    CGFloat gradientColors[] = {
        oRed, oGreen, oBlue, oAlpha,
        iRed, iGreen, iBlue, iAlpha
    };

    // We have to change first value when user taps over the Guage.
    // The second one must one to fill the entire Gauge.
    CGFloat glossLocations[] = {firstGlossLocation, 1};
    CGGradientRef ballGradient = CGGradientCreateWithColorComponents(colorSpace, gradientColors, glossLocations, 2);

    CGContextAddEllipseInRect(context, CGRectMake(0, 0, graWidth*2, graHeight*2));
    CGContextClip(context);

    CGPoint startPoint = CGPointMake(graWidth, graHeight);
    CGPoint endPoint = CGPointMake(graWidth, graHeight);
    CGContextDrawRadialGradient(context, ballGradient, startPoint, 0, endPoint, graWidth - outterPercent, kCGGradientDrawsAfterEndLocation);
    CGContextDrawPath(context, kCGPathStroke);
} 
```

我想在`_isUnSelected`is时绘制第二个渐变`NO`。

**你知道如何绘制第二个嵌套渐变吗？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T17:30:31.950

您不需要“第二个嵌套渐变”来绘制插图中显示的渐变。那是*一个*梯度。渐变可以在多个位置具有多种颜色，这就是我们在该插图中看到的。它似乎有四种颜色/点。

因此，当绘图需要更改时，只需将第一个渐变（简单的两点渐变）替换为第二个渐变（具有四种颜色/点），*反之亦然*。

# xcode - 无法导入为 `libraryname/header.h`

> ID：16065401
> 
> 赞同：1
> 
> 时间：2013-04-17T16:30:40.907
> 
> 标签：xcode

我一直遇到这个问题。我有一个库，它包含以下导入：

```
#include "libraryname/header.h" 
```

当我编译时，它说找不到文件。如果我手动删除对它的引用，`libraryname`它通常会起作用。

```
#include "header.h" 
```

但是，我经常使用的示例与原始包含一起工作得很好。我不明白有什么不同。我已经彻底比较了我的项目中的差异与构建设置等方面的差异，但无法找出差异是什么。

与`libraryname`文件夹结构无关，因为库的文件结构是：

```
/libraryname/src/header.h 
```

嵌套标题有什么区别？有什么积分吗？如何解决这个问题？

*我不确定这里的术语会阻碍开始寻找答案。很抱歉没有给出具体的例子，但我在 Objective-C 项目和 c 库以及带有 C++ 库的 C++ 项目中反复遇到这个问题。我肯定错过了什么！*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:36:01.243

您需要在 Target 的 Build Settings的**Header Search Paths字段中添加头文件的路径。**您正在使用的库的开发人员应该有关于您需要设置哪些内容以使其正常工作的说明。

# jquery - jquery - 历史记录时清除表单输入数据

> ID：16065407
> 
> 赞同：2
> 
> 时间：2013-04-17T16:30:56.340
> 
> 标签：jquery, url, history

我在此链接上为我的客户设置了 ipad Mini。 [http://www.messtudios.com/k/ginosnesconset/kiosk/mini/](http://www.messtudios.com/k/ginosnesconset/kiosk/mini/)

当客户提交电子邮件地址时，它会转到“请确认页面”，然后在 3 秒后返回历史记录。

问题是电子邮件地址仍在输入字段中 - 我们需要清除这一点，以便在传递 mini 时其他客户看不到该地址。

一个简单的 value = "" 不起作用，因为“history back”实际上并没有刷新页面。

我不能在 3 秒后使用重定向来刷新 URL，因为我有另一个自助服务终端，它在链接到不同 URL 的确认页面上使用相同的代码。

我的朋友说要对历史功能做点什么——而不是返回历史，他说要取回历史的 URL 并以某种方式重定向到那个..

任何人都可以帮忙吗？如果需要，我会做一个 jfiddle。

谢谢，-O

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T16:33:21.500

尝试将`autocomplete="off"`属性添加到输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T16:34:00.800

这可能是因为浏览器正在缓存表单。尝试通过在表单上设置 HTTP 标头或添加一些 META 标记来禁用缓存。看看[使用 <meta> 标签关闭所有浏览器中的缓存？](https://stackoverflow.com/questions/1341089/using-meta-tags-to-turn-off-caching-in-all-browsers)有关元标记的示例。

# c++ - 如何在 VC 6.0 中对结构数组进行排序

> ID：16065411
> 
> 赞同：0
> 
> 时间：2013-04-17T16:31:06.677
> 
> 标签：c++, arrays, sorting, structure, visual-c++-6

这就是问题所在。我已经定义了一个结构：

```
typedef struct {

        long t;
        long M;
        long double coeff;
} Info; 
```

我只能知道以下程序中结构的数量，因此我写道：

Info *p = (Info* ) malloc (sizeof(Info) * sum); （其中 sum 是一个长整数）

现在我想根据'coeff'按升序对结构数组进行排序。

我如何在 VC++6.0 中实现它？

多谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T16:37:09.507

将[std::sort](http://en.cppreference.com/w/cpp/algorithm/sort)与合适的比较函子一起使用：

```
bool cmp(const Info& lhs, const Info& rhs)
{
  return lhs.coeff < rhs.coeff;
} 
```

然后

```
#include <algorithm>

std::sort(p, p + sum, cmp); 
```

假设是指向包含对象`p`的数组的第一个元素的指针。`sum` `Info`

但在 C++ 中，您通常更喜欢`std::vector`动态分配的数组：

```
std::vector<Info> v(sum); // contains sum default constructed Infos 
```

然后

```
std::sort(v.begin(), v.end(), cmp); 
```

您也不需要`typedef`语法：

```
struct Info {
    long t;
    long M;
    long double coeff;
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T16:36:14.123

你可以实现一个比较函数然后调用std::sort。

```
bool comparator(const Info& p1, const Info& p2)
{
  return p1.coeff < p2.coeff;
} 
```

您还可以`<`在结构定义中重载运算符，而不是编写独立的比较函数。

然后调用 std::sort

```
std::sort(A, A+sum, comparator); 
```

假设这`A`是你的结构数组。

# php - ZF2 处理文件上传。如何访问上传的文件？

> ID：16065418
> 
> 赞同：3
> 
> 时间：2013-04-17T16:31:19.697
> 
> 标签：php, file-upload, zend-framework2

我在手册中看到了很多关于创建表单来上传文件的问题和信息。我已经能够设置一个表单来处理文件上传。下载文件后是否有任何基于 Zend 的代码来处理文件。

每个教程或手册参考似乎都有类似的内容：

```
if ($form->isValid()) {
    //
    // ...Save the form...
    //
} 
```

我可以使用原生 php 函数（如`move_uploaded_file`. 我是否遗漏了什么，或者 Zend 只是回退到使用临时文件名作为其他代码中的数据？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T17:22:05.740

说明书上有

[http://framework.zend.com/manual/2.1/en/modules/zend.form.file-upload.html](http://framework.zend.com/manual/2.1/en/modules/zend.form.file-upload.html)

```
// File: MyController.php

public function uploadFormAction()
{
    $form = new UploadForm('upload-form');

    if ($this->getRequest()->isPost()) {
        // Make certain to merge the files info!
        $post = array_merge_recursive(
            $this->getRequest()->getPost()->toArray(),
            $this->getRequest()->getFiles()->toArray()
        );

        $form->setData($post);
        if ($form->isValid()) {
            $data = $form->getData();
            // Form is valid, save the form!
            return $this->redirect()->toRoute('upload-form/success');
        }
    }

    return array('form' => $form);
} 
```

文件上传成功后，$form->getData() 将返回：

```
array(1) {
    ["image-file"] => array(5) {
        ["name"]     => string(11) "myimage.png"
        ["type"]     => string(9)  "image/png"
        ["tmp_name"] => string(22) "/private/tmp/phpgRXd58"
        ["error"]    => int(0)
        ["size"]     => int(14908679)
    }
} 
```

使用您从中获得的数组`$form->getData()`来处理上传的文件。

您还可以使用名为的过滤器设置目标并重命名它。

下面的链接对此有很好的解释：

[http://framework.zend.com/manual/2.1/en/modules/zend.filter.file.rename-upload.html#zend-filter-file-rename-upload](http://framework.zend.com/manual/2.1/en/modules/zend.filter.file.rename-upload.html#zend-filter-file-rename-upload)

希望这可以帮助。

# java - Play/Akka 与 Java OutputStreams 的集成

> ID：16065424
> 
> 赞同：4
> 
> 时间：2013-04-17T16:31:32.947
> 
> 标签：java, scala, playframework-2.0, akka, outputstream

我正在写剧本！应用程序公开了一个允许用户生成 PDF 报告的 REST API。我受到使用旧 Java API 进行实际报告生成的要求的限制。该库有一个方法`generate(OutputStream out, ...)`，即它需要一个`java.io.OutputStream`写入结果报告的位置。

我的问题是将它与 Play/Akka 集成以提供分块编码中的内容。为此，我需要创建一个`Enumerator[Array[Byte]]`以某种方式包含`OutputStream`来自 Java 库的内容。我想出了一个可行的解决方案，它使用`PipedOutputSteam`/ `PipedInputStream`duo 将库中的输出通过管道传输到 Enumerator，使用`Enumerator.fromStream`.

我想知道是否有更好的方法来实现这一点，但我似乎无法在 Akka 或 Play 中找到明确的示例！将 Enumerators 与 OutputStreams 集成的文档。我知道 Java 库的阻塞 IO 是设计更好解决方案的限制因素，但也许有一种更简洁的方法可以做到这一点。有什么想法吗？

**跟进**

假设我使用`Enumerator.outputStream`，将实际报告生成移动到另一个参与者（可能在另一台机器上）的安全方法是什么？例如，我猜测发送 OutputStream 是不安全的（并且只能在本地工作）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:26:41.633

Play 2.1 有以下方法：`Enumerator.outputStream(a: (OutputStream) ⇒ Unit): Enumerator[Array[Byte]]`这可能正是你想要的。

它的实现是专门使用其他 Play 2.1 类，所以如果你使用的是 Play 2.0，你需要做一些额外的挖掘来实现同样的事情。

# drupal - 使用 Acquia 创建本地 Drupal 站点 - 404 错误

> ID：16065427
> 
> 赞同：1
> 
> 时间：2013-04-17T16:31:41.113
> 
> 标签：drupal, http-status-code-404, local, acquia

我目前正在尝试使用 Acquia 创建我的 Drupal 站点的本地版本，并且我已经完成了完整的安装和导入过程。当我到达安装的 URL 时，主页显示得非常完美，但是每隔一个页面都会给我一个基本的 404 错误，告诉我该页面不存在于服务器上。

有没有人有任何过去的经验，她可以了解发生了什么？将不胜感激！

谢谢，格雷姆

# nhibernate - C# NHibernate 已连接但不返回数据且没有错误

> ID：16065434
> 
> 赞同：0
> 
> 时间：2013-04-17T16:32:09.953
> 
> 标签：nhibernate, data-retrieval

我在连接到 Intranet 的本地机器上运行了一个 C# Windows 应用程序。我使用 nHibernate 作为 ORM。我们在我们的网站上使用相同的 nHibernate ORM 设置。该网站使用 nHibernate ORM 适当地执行所有 CRUD 操作。但是，我的 Windows 应用程序没有检索任何数据。Session被初始化，Connection被连接，DB有数据。调用 .FindFirst() 或 .FindAllProposals() 时没有错误，只是没有返回数据。这是存储库对象及其连接状态的快照：

![在此处输入图像描述](https://i.stack.imgur.com/ym7da.png)

这是存储库类的代码片段：

```
public class ProposalRepository : NHRepository<Proposal>
{
    /// <summary>
    /// Queries the database for all Proposals.
    /// </summary>
    /// <returns>A list of Proposals sorted newest first.</returns>
    public IList<Proposal> FindAllProposals()
    {
        return FindAll(DetachedCriteria.For<Proposal>(),
                            new Order("CreateDate", false)).ToList<Proposal>();
    }
} 
```

它看起来是连接的、活跃的和开放的。任何想法为什么没有返回数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-02-12T19:23:17.413

您必须更改 hbm.xml 文件的构建操作。 [![在此处输入图像描述](https://i.stack.imgur.com/K2vdR.png)](https://i.stack.imgur.com/K2vdR.png)

# git-bash - Git Bash shell 找不到 java.exe

> ID：16065435
> 
> 赞同：3
> 
> 时间：2013-04-17T16:32:14.157
> 
> 标签：git-bash

尝试执行 java.exe 并得到可爱的错误

```
>> sh.exe": java.exe: command not found 
```

该命令在普通命令 shell 中工作。

我检查了两者的路径，它们几乎相同，bash 有一些预期的额外目录。我用`env |grep PATH`和`set PATH`分别检查...

```
where java.exe

C:\Windows\System32\java.exe

set PATH
Path=C:\Ruby193\bin;C:\Windows\system32;C:\Windows;

env |grep PATH
HOMEPATH=\
PATH=/c/Users/hooksc/bin:.:/usr/local/bin:/mingw/bin:/bin:/c/Ruby193/bin:/c/Windows/system32:/c/Windows: 
```

我想我错过了一些微妙的东西，有人有什么想法吗？

我已将路径摘录得更短，以使其更易于阅读......但是，java.exe 的源文件夹中至少有 1 个位于路径中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-13T18:31:32.860

Gitbash 寻找 %PATH% 变量。在你的 gitbash 类型上：

```
env | grep PATH 
```

并检查它是否包含您的 jdk 的 bin 目录的路径。如果没有，那么您必须自己添加路径。有关如何添加它的更多信息，请点击此链接：[http ://www.java.com/en/download/help/path.xml](http://www.java.com/en/download/help/path.xml)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-18T13:32:17.520

虽然修改系统 PATH 可能会解决您的问题，但它并不能解释为什么子进程看不到连接的用户 PATH。

我在使用 Git Bash 时遇到了同样的问题，最终发现这是由于我的用户 PATH 包含以下内容：%VPROJECT%..\bin; ...但我没有 VPROJECT 环境变量 - 不知何故，这导致用户 PATH 到系统 PATH 的连接对于子进程静默失败（尽管奇怪的是它并没有影响初始 bash shell，增加了查找的难度问题）。

我不知道这应该归咎于谁 - 这是 git-bash.exe、bash.exe 和 sh.exe 中的一个或多个没有应对。当然，无论添加该路径而不添加相应的环境变量（或者可能删除环境变量而不删除路径）。

# php - PHP Google API - 缺少范围

> ID：16065439
> 
> 赞同：2
> 
> 时间：2013-04-17T16:32:30.803
> 
> 标签：php, google-api, oauth-2.0, google-calendar-api, google-oauth

我正在使用以下内容，基于 Google 的日历示例应用程序，它运行良好。

```
 $client = new \Google_Client();
    $client->setApplicationName("Google Calendar PHP Starter Application");
    $client->setClientId('myclientid.apps.googleusercontent.com');
    $client->setClientSecret('mysecret');
    $client->setRedirectUri('http://localhost/admin/index.php?m=1&e=calendar');
    $client->setDeveloperKey('mykey');

    if (isset($_GET['code'])) {
        $client->authenticate($_GET['code']);
        $_SESSION['token'] = $client->getAccessToken();
        header('Location: http://' . $_SERVER['HTTP_HOST'] . $_SERVER['PHP_SELF']);
    }

    if (isset($_SESSION['token'])) {
        $client->setAccessToken($_SESSION['token']);
    }

    if (!$client->getAccessToken()) {
        $authUrl = $client->createAuthUrl();
        header('Location: ' . $authUrl);
    } 
```

但我得到：

```
Error: invalid_request
Missing required parameter: scope 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T17:49:34.050

设置 developerKey 后缺少此行

```
$cal = new \Google_CalendarService($client); 
```

我猜想从客户端获取日历服务的行为设定了范围。很合理。

# xcode - Xcode 如何在 Build Phases -> Compile Sources 中确定源文件的位置？

> ID：16065441
> 
> 赞同：1
> 
> 时间：2013-04-17T16:32:32.930
> 
> 标签：xcode, xcode4.6

当您将源文件添加到`Compiled Sources`目标的部分时，`Build Phase`它会在文件旁边以浅灰色描述每个文件的位置：

```
...in ../../shared_source/controllers 
```

Xcode 是如何创建这个字符串的？我遇到了一个“错误”的项目——似乎是一个相对于其他人的环境的目录，但不是我的。删除和重新添加源无济于事，任何清洁量也无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T04:12:08.770

将源添加到项目时，是否选中“将项目复制到目标组的文件夹”选项？如果您不这样做，XCode 只是从文件所在的任何位置提取引用，而不会实际将其复制到项目中。这工作正常，直到原始文件被移动。根据我的经验，您通常想复制。

# sas - 通过比较其他变量来创建新变量

> ID：16065443
> 
> 赞同：0
> 
> 时间：2013-04-17T16:32:37.393
> 
> 标签：sas

我有一个数据集，其中包含由不同的人/仪器做出的一系列不同维度的读数。它看起来像这样：

```
SUBJECT DIM1_1 DIM1_2 DIM1_3 DIM1_4 DIM1_5 DIM2_1 DIM2_2 DIM2_3 DIM3_1 DIM3_2
1       1      .      1      1      2      3      3      3      2      .
2       1      1      .      1      1      2      2      3      1      1
3       2      2      2      .      .      1      .      .      5      5
...     ...    ...    ...    ...    ...    ...    ...    ...    ...    ... 
```

我的真实数据集包含大约 190 个维度，每个维度最多包含 5 个度量

我必须遵守一组规则来为每个维度创建一个新变量：

*   如果同一维度中有 2 个不同的值（不包括缺失值），则新变量为缺失值。
*   如果所有值都相同（排除缺失值），则新变量采用相同的值。

我的新变量应如下所示：

```
SUBJECT  ...  DIM1_X DIM2_X DIM3_X
1        ...  .      3      2
2        ...  1      .      1
3        ...  2      1      5 
```

这里的问题是我对每个维度没有相同数量的度量。另外，我只能想出很多 IF（我的意思是很多，因为给定维度中的更多度量会增加比较次数），所以我想知道是否有一些更简单的方法来处理这个特定问题。

任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T17:35:15.917

最简单的方法是将其转置为垂直（每个 DIMx_y 一行），汇总，然后将您想要丢失的那些设置为丢失，然后重新转置（如果需要重新合并）。

```
data have;
input SUBJECT DIM1_1 DIM1_2 DIM1_3 DIM1_4 DIM1_5 DIM2_1 DIM2_2 DIM2_3 DIM3_1 DIM3_2;
datalines;
1       1      .      1      1      2      3      3      3      2      .
2       1      1      .      1      1      2      2      3      1      1
3       2      2      2      .      .      1      .      .      5      5
;;;;
run;

data have_pret;
set have;
array dim_data DIM:;
do _t = 1 to dim(dim_Data); *dim function is not related to the name - it gives # of vars in array;
 dim_Group = scan(vname(dim_data[_t]),1,'_');
 dim_num =  input(scan(vname(dim_data[_t]),2,'_'),BEST12.);
 dim_val=dim_data[_t];
 output;
end;
keep dim_group dim_num subject dim_val;
run; 

proc freq data=have_pret noprint;
by subject dim_group;
tables dim_val/out=want_pret(where=(not missing(dim_val)));
run;

data want_pret2;
set want_pret;
by subject dim_Group;
if percent ne 100 then dim_val=.;
idval = cats(dim_Group,'_X');
if last.dim_Group;
run;

proc transpose data=want_pret2 out=want;
by subject;
id idval;
var dim_val;
run; 
```

# highcharts - 具有相同值的许多 Y 刻度的 Highchart

> ID：16065445
> 
> 赞同：0
> 
> 时间：2013-04-17T16:32:49.740
> 
> 标签：highcharts

我们正在使用 highcharts 来构建折线图，但我们注意到以下奇怪的行为：当数据包含具有恒定值的“Y”时，图表会以许多具有相同值的刻度（传入数据中的相同值）来替换 Y 轴

这种行为是 highcharts 中的错误吗？我们该怎么做才能避免呢？

提前致谢。

〜穆尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T10:30:38.510

我假设您的意思是 yAxis，因此您可以使用最小/最大值或使用 tickPositoner / tickPositions。所有选项都记录在这里：[http ://api.highcharts.com/highcharts#xAxis.reversed](http://api.highcharts.com/highcharts#xAxis.reversed)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T01:57:04.450

*   我想我可以在 highcharts 版本 2.2.1（我们正在使用）和版本 2.2.4 中重现该错误（有关 jsfiddle 代码，请参见我上面的评论）

*   但是在highchart的最后一个稳定版本中，它似乎工作正常

# c# - 在 C# 或 Java 中将音频文件转换为文本

> ID：16065452
> 
> 赞同：-1
> 
> 时间：2013-04-17T16:33:19.710
> 
> 标签：c#, java, audio, text, speech-recognition

我需要将音频文件（将特定的 mp3 文件转换为简单文本），然后将该文本再次转换回 mp3，这是我的移动应用程序的功能之一，这可能吗？如果是，那么如何？请指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T16:39:50.227

您可以在此处找到音频到文本的答案[（第二篇文章）](https://stackoverflow.com/questions/3958342/convert-audio-to-text)

对于文本到音频，我会使用任何文本到语音。在 c# 中，您还可以使用 System.Speech。

# php - php 准备语句回显查询的结果

> ID：16065456
> 
> 赞同：0
> 
> 时间：2013-04-17T16:33:41.640
> 
> 标签：php, pdo, prepared-statement

只是为了让你们都知道，我开始学习 PDO 所以不要生我的气:)

当我使用 mysqli 时，我会这样做从查询中获取结果并回显一些内容：

```
$query2= "SELECT acess FROM statistic WHERE id_page IN(SELECT id FROM page WHERE title='".$registos1['title']."')";
        $result2 = mysqli_query($ligaBD,$query2);
        $registos2 = mysqli_fetch_array($result2);

        if($registos2['acess']==0){
            echo '<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>...</title></head><body>This page is private.</body></html>';exit; 
```

现在我试图在 PDO 上做到这一点，但如果它是这样的，我不舒尔：

```
$sql = "SELECT acess FROM statistic WHERE id_page IN(SELECT id FROM page WHERE title=?)";
        $stm = $ligaBD->prepare($sql);
        $stm->execute(array($acess));
        $stm->fetchColumn();

        if(($row = $stm->fetch(PDO::FETCH_ASSOC))){
            echo '<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Easy Page Builder</title></head><body>This page is private.</body></html>';exit;
        } 
```

这`if($registos2['acess']==0){`和这个一样`if(($row = $stm->fetch(PDO::FETCH_ASSOC))){`吗？

fetch(PDO::FETCH_ASSOC) 返回的值是多少？我已经读过它是布尔值，但如果这甚至是用于从查询中获取结果的正确代码，我不知道，就像我过去在使用 mysqli 时所做的那样。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:35:49.507

不，它没有。您错过了 PDO 代码中的一步。您获取一行，但不要查看您获取的内容。它应该更像：

```
 $stm->execute(array($acess));
    $row = $stm->fetch(PDO::FETCH_ASSOC);
    if ($row['access'] == 0) {
       ...
    } 
```

在编写代码时，您获取行结果，但在基本 if() 中使用该行结果。如果检索到数据，$row 将是一些非空数据，PHP 将其转换为布尔值 TRUE，这意味着您会收到“拒绝访问”消息。即使查询的实际结果显示“授予访问权限”，也会发生这种情况，因为您没有查看查询的结果数据，您只是在测试是否返回了任何数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T16:39:33.270

如果您只需要访问列中的数据，`fetchColumn()`就足够了。

```
/* The $columnIndex is the zero-based index of the `access` column */

$sql = "SELECT acess FROM statistic WHERE id_page IN(SELECT id FROM page WHERE title=?)";
$stm = $ligaBD->prepare($sql);
$stm->execute(array($acess));
$result = $stm->fetchColumn($columnIndex);

if($resut === 0){
        echo '<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Easy Page Builder</title></head><body>This page is private.</body></html>';exit;
} 
```

如果没有返回行或列`$result`具有此值，请记住。因此，您必须与运营商进行比较。`FALSE``0``access``===`

# haskell - 何时（何时不）定义一个 Monad

> ID：16065462
> 
> 赞同：14
> 
> 时间：2013-04-17T16:33:54.983
> 
> 标签：haskell, redis, riak

这是一个与为 Haskell 库定义自己的 Monad 实例的 API 设计实践相关的问题。定义 Monad 实例似乎是隔离 DSL 的好方法，例如`Par`monad 在 monad-par、hdph；`Process`在分布式进程中；`Eval`并行等...

我举了两个 haskell 库的例子，它们的目的是与数据库后端进行 IO。我举的例子是Riak IO 的[riak和 Redis IO 的](http://hackage.haskell.org/package/riak)[hedis](http://hackage.haskell.org/package/hedis)。

在 hedis 中，[定义](http://hackage.haskell.org/packages/archive/hedis/0.6.2/doc/html/Database-Redis.html#t:Redis)`Redis`了一个monad 。从那里，您使用 redis 运行 IO：

```
data Redis a -- instance Monad Redis
runRedis :: Connection -> Redis a -> IO a
class Monad m => MonadRedis m
class MonadRedis m => RedisCtx m f | m -> f
set :: RedisCtx m f => ByteString -> ByteString -> m (f Status)

example = do
  conn <- connect defaultConnectInfo
  runRedis conn $ do
    set "hello" "world"
    world <- get "hello"
    liftIO $ print world 
```

在 riak 中，情况有所不同：

```
create :: Client -> Int -> NominalDiffTime -> Int -> IO Pool
ping :: Connection -> IO ()
withConnection :: Pool -> (Connection -> IO a) -> IO a

example = do
  conn <- connect defaultClient
  ping conn 
```

文档`runRedis`说：*“runRedis 的每次调用都从连接池中获取一个网络连接并运行给定的 Redis 操作。因此，当池中的所有连接都在使用中时，对 runRedis 的调用可能会阻塞。”* . 然而，riak 包也实现了连接池。这是在 IO monad 之上没有额外的 monad 实例的情况下完成的：

```
create :: Client-> Int -> NominalDiffTime -> Int -> IO Pool
withConnection :: Pool -> (Connection -> IO a) -> IO a

exampleWithPool = do
  pool <- create defaultClient 1 0.5 1
  withConnection pool $ \conn -> ping conn 
```

所以，这两个包之间的类比归结为这两个功能：

```
runRedis       :: Connection -> Redis a -> IO a
withConnection :: Pool -> (Connection -> IO a) -> IO a 
```

据我所知，hedis 包引入了一个 monad`Redis`来使用 redis 封装 IO 操作`runRedis`。相比之下， riak 包`withConnection`只接受一个接受 a 的函数`Connection`，并在 IO monad 中执行它。

那么，定义自己的 Monad 实例和 Monad 堆栈的动机是什么？为什么 riak 和 redis 包的处理方法不同？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-18T01:45:39.940

对我来说，这完全是关于封装和保护用户免受未来实施变化的影响。正如凯西所指出的，这两者现在大致等价——基本上是一个`Reader Connection`单子。但是想象一下，在未来不确定的变化下，这些将如何表现。如果两个包最终都决定用户需要状态单子接口而不是阅读器怎么办？如果发生这种情况，riak 的`withConnection`函数将更改为这样的类型签名：

```
withConnection :: Pool -> (Connection -> IO (a, Connection)) -> IO a 
```

这将需要对用户代码进行彻底的更改。但是 Redis 包可以在不破坏用户的情况下实现这样的改变。

现在，有人可能会争辩说，这种假设场景非常不切实际，不需要您计划。在这两种特殊情况下，这可能是真的。但是所有项目都会随着时间的推移而发展，并且经常以不可预见的方式发展。定义自己的 monad 可以让你对用户隐藏内部实现细节，并提供一个在未来变化时更加稳定的接口。

当这样说时，有些人可能会得出结论，定义自己的 monad 是更好的方法。但我认为情况并非总是如此。（[镜头](http://hackage.haskell.org/package/lens)库可能是一个很好的反例。）定义一个新的单子是有成本的。如果您使用的是 monad 转换器，它可能会造成性能损失。在其他情况下，API 可能最终会变得更加冗长。Haskell 非常好，可以让您将语法保持在最小限度，在这种特殊情况下，差异不是很大——可能是一些`liftIO`用于 redis 的 's 和一些用于 riak 的 lambdas。

软件设计很少被切割和干燥。您很少能够自信地说出何时以及何时不定义自己的 monad。但是我们可以意识到所涉及的权衡，以帮助我们在遇到个别情况时对其进行评估。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T05:47:27.353

在这种情况下，我认为实施 monad 是一个错误。它要求 Java 开发人员实现各种设计模式只是为了拥有它们。

例如 hdbc 也适用于普通的 IO monad。

Monad for redis 库并没有带来任何有用的东西。它实现的唯一一件事就是摆脱一个函数参数（连接）。但是你要为它在 redis monad 中提升每个 IO 操作付出代价。

此外，如果您现在需要使用 2 个 redis 数据库，您将很难弄清楚要在哪里提升哪些操作:)

实现 monad 的唯一原因是创建一个新的 DSL。如您所见，hedis 没有创建新的 DSL。它的操作与任何其他数据库库完全一样。因此 hedis 中的单子是肤浅的，是不合理的。

# javascript - 如何根据上面的其他元素对齐元素

> ID：16065466
> 
> 赞同：0
> 
> 时间：2013-04-17T16:34:02.750
> 
> 标签：javascript, jquery, css

所以我有 20 个左右的标签，它们都有绝对位置。它们是根据我从 XML 获得的响应动态生成的，并且它们当前彼此相邻对齐。

如何将它们在每行上对齐为 4，但第 5 个标签正好在第一个标签下方，第 6 个标签在第二个标签下方，依此类推。每个标签都有不同的高度。通常，前 4 个不需要任何对齐。

这是结构：

```
<table>
  <tbody>
     <tr>
     <tr>
     <tr>
     ........
     <tr>
     <tr>
  </tbody>
</table> 
```

这是我的标签CSS：

```
.innerContent tr {
      background: none repeat scroll 0 0 #F3F3F3;
      border-radius: 5px 5px 5px 5px;    
      float: left;
      height: auto;
      margin: 0 5px 25px;
      padding: 0;
      position: absolute;
      transition: all 1s ease 0s;
      z-index: 5;
} 
```

我怀疑这可以用 CSS 来实现，所以我在想 JQuery。我尝试的一切都只是让它们全部重叠 4 乘 4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:54:04.497

正如我在上面的评论中提到的，我强烈建议不要使用 a `table`。您似乎没有使用表格数据填充它，因此您只是将其用作布局工具。对于你想做的事情，这是一个非常糟糕的工具。

由于您在上面提到了 Twitter Bootstrap，我建议您使用他们的[脚手架网格系统](http://twitter.github.io/bootstrap/scaffolding.html)。举一个非常基本的例子，看看这个[jsFiddle](http://jsfiddle.net/WqPqP/)我将如何处理这个问题。

为了完整起见，这是我在 jsFiddle 中使用的 HTML。这将每行排列 4 列，每列宽度为 220 像素（基于它们的容器宽度为 940 像素）。如果你想要一个不同的容器大小，你只需要稍微调整一下宽度。

当然，这需要使用 Bootstrap CSS：

```
<div class="row">
  <div class="span3">Hotel 1</div>
  <div class="span3">Hotel 2</div>
  <div class="span3">Hotel 3</div>
  <div class="span3">Hotel 4</div>
  <div class="span3">Hotel 5</div>
  <div class="span3">Hotel 6</div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T16:58:08.537

我认为你需要这样的东西：

**jQuery**

```
 $(document).ready(function () {
    $mt = $('<table>').attr('id', 'myTable');
    for (var y = 0; y < 5; y++) {
     var $row = $("<tr>").appendTo($mt);
        for (var x = 0; x < 4; x++) {
           $row.append($('<td/>').text(y * 4 + x + 1).appendTo($mt));
        }
         $mt.append($row);
      }
      $("#myTable").html($mt);
    }); 
```

**HTML**

```
<table id="myTable">
</table> 
```

**演示**

[http://jsfiddle.net/673tG/1/](http://jsfiddle.net/673tG/1/)

# javascript - 在不刷新页面的情况下更新变量 (JavaScript)

> ID：16065467
> 
> 赞同：-1
> 
> 时间：2013-04-17T16:34:07.397
> 
> 标签：javascript, variables, width, auto-update

好的，我对 JavaScript 的东西还很陌生，我需要一些帮助。

需要自动刷新的变量：

```
var width = document.body.clientWidth; 
```

所以基本上，我想根据文档的宽度做不同的事情。但是如何自动更新*width*的值？请仅使用 JavaScript，因为我还没有真正获得 jQuery。

提前致谢！:)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-17T16:36:27.613

JavaScript 是基于事件的，因此任何被执行的代码都是事件的结果。有许多事件，例如`mousemove`或`click`。

你需要弄清楚你想听哪些事件。可能与主体宽度变化有关，例如加载更多数据或一些动画。

# python - execfile() 不能可靠地用于修改函数的局部变量

> ID：16065468
> 
> 赞同：2
> 
> 时间：2013-04-17T16:34:11.823
> 
> 标签：python, function, global, local, execfile

python 文档指出“execfile() 不能可靠地用于修改函数的局部变量。” 在页面[http://docs.python.org/2/library/functions.html#execfile](http://docs.python.org/2/library/functions.html#execfile)

谁能提供有关此声明的更多详细信息？文档相当少。该语句似乎与“如果省略两个字典，则表达式在调用 execfile() 的环境中执行”非常矛盾。这也在文档中。在函数中使用 execfile 时是否存在特殊情况，然后 execfile 的行为类似于函数，因为它创建了一个新的范围级别？

如果我在函数中使用 execfile，例如

```
def testfun():
    execfile('thefile.py',globals())
    def testfun2():
        print a 
```

并且有由'thefile.py'中的命令创建的对象（例如对象'a'），我怎么知道它们是testfun的本地对象还是全局对象？那么，在函数 testfun2 中，'a' 会看起来是一个全局变量吗？如果我从 execfile 语句中省略 globals()，谁能更详细地解释为什么“thefile.py”中的命令创建的对象对“testfun”不可用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T16:45:29.673

在 Python 中，查找名称的方式在函数内部进行了高度优化。副作用之一是返回的映射`locals()`为您提供了函数内部本地名称的*副本*，并且更改该映射实际上不会影响函数：

```
def foo():
    a = 'spam'
    locals()['a'] = 'ham'
    print(a)              # prints 'spam' 
```

在内部，Python 使用操作码*通过 index*`LOAD_FAST`查找`a`当前帧中的名称，而不是较慢的，后者会查找本地名称（按名称），如果在第一个中找不到，则在映射中查找。*`LOAD_NAME``globals()`*

 *python 编译器只能为*编译时*`LOAD_FAST`已知的本地名称发出操作码；但是，如果您允许直接影响函数的本地人，那么您无法提前知道所有本地名称。使用范围名称（自由变量）的嵌套函数使事情变得更加复杂。*`locals()`*

 *在 Python 2 中，您可以通过在函数中使用语句来强制编译器关闭优化并`LOAD_NAME`始终使用：`exec`

```
def foo():
    a = 'spam'
    exec 'a == a'         # a noop, but just the presence of `exec` is important
    locals()['a'] = 'ham'
    print(a)              # prints 'ham' 
```

在 Python 3 中，`exec`已被替换`exec()`并且解决方法消失了。在 Python 3中，*所有*函数都进行了优化。

如果您没有遵循所有这些，那也没关系，但这就是为什么文档会稍微掩盖这一点的原因。这完全归功于大多数 Python 用户不需要了解的 CPython 编译器和解释器的实现细节；所有你需要知道的是，使用`locals()`来更改函数中的本地名称通常不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T16:52:38.477

本地人在 Python 中有点奇怪。常规局部变量通常通过字节码中的索引而不是名称访问（因为这样更快），但这意味着 Python 必须在编译时知道所有局部变量。这意味着您不能在运行时添加新的。

现在，如果你`exec`在函数中使用，在 Python 2.x 中，Python 知道不这样做，并回退到按名称访问局部变量的较慢方法，你可以以编程方式创建新变量。`execfile()`（这个技巧在 Python 3中`exec`被删除了。）你可能认为 Python 也会`execfile()`为`execfile`.运行时（毕竟可以重新分配）。

您的示例函数会发生什么？好吧，试试看吧！作为`execfile`状态的文档，如果您不传入本地字典，则将使用您作为全局变量传入的字典。您传入`globals()`（您的模块的真正全局变量），因此如果它分配给`a`，则`a`成为全局变量。

现在你可以尝试这样的事情：

```
def testfun():
    execfile('thefile.py')
    def testfun2():
        print a
    return testfun2
    exec "" 
```

最后的`exec`语句强制`testfun()`使用旧式的基于名称的局部变量。它甚至不必执行，因为它不在这里；它只需要在某处的功能中。

但这也不起作用，因为基于名称的局部变量不支持带有自由变量的嵌套函数（`a`在这种情况下）。该功能*还*要求 Python 在函数定义时了解所有局部变量。你甚至不能定义上面的函数——Python 不会让你定义的。

简而言之，尝试以编程方式处理局部变量是一种痛苦，并且文档是正确的：`execfile()`不能可靠地用于修改函数的局部变量。

一个更好的解决方案可能是`import`将文件作为一个模块。您可以在函数中执行此操作，然后以通常的方式访问模块中的值。

```
def testfun():
    import thefile
    print thefile.a 
```

如果您直到运行时才知道要导入的文件的名称，则可以`__import__`改用。此外，您可能需要修改`sys.path`以确保要从中导入的目录位于路径的第一个位置（然后可能会放回原处）。

您也可以只传入自己的字典`execfile`，然后使用等访问已执行文件中的变量`myVarsDict['a']`。**

# c# - DragEnter 事件问题

> ID：16065470
> 
> 赞同：0
> 
> 时间：2013-04-17T16:34:18.480
> 
> 标签：c#, .net, wpf

我只是在 WPF 上拖放**ZIP**`ListBox`文件。

之后，我将面临***打开*****的ZIP**文件。为什么？我根本没有要求打开它。

 *这是我的代码。

```
private void lbPackageList_DragEnter(object sender, DragEventArgs e)
{
    bool isCorrect = true;

    if (e.Data.GetDataPresent(DataFormats.FileDrop, true) == true)
    {
        string[] filenames = (string[])e.Data.GetData(DataFormats.FileDrop, true);
        foreach (string filename in filenames)
        {
            if (File.Exists(filename) == false)
            {
               isCorrect = false;
               break;
             }
            FileInfo info = new FileInfo(filename);
           if (info.Extension == ".zip") // It's correct
           {
              // OK  
           }
           else
           {
               isCorrect = false;
               break;
           }

     }
   }
   if (isCorrect == true)
        e.Effects = DragDropEffects.All;
   else
         e.Effects = DragDropEffects.None;
            e.Handled = true;
} 
```

任何线索为什么会发生？我们如何才能阻止它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:39:33.657

哇

我找到了答案

应该是这样的

```
string[] filenames = (string[])e.Data.GetData(DataFormats.FileDrop, false); 
```*

# php - 设置文件包含的基本应用程序路径

> ID：16065474
> 
> 赞同：1
> 
> 时间：2013-04-17T16:34:49.037
> 
> 标签：php, codeigniter, include, codeigniter-2

我在 StackOverflow 上阅读过类似的主题，但不幸的是没有人解决这个问题（或者我可能只是没有看正确的主题）。

我在视图中有以下内容`home.php`：

```
<?php include_once(echo base_url() .'/template/layout/header.php'); ?> 
```

现在我的结构是这样的：

```
/public_html
    /template
    /layout
       /header.php
       /footer.php 
```

该文件不包括在内，有人知道为什么吗？

**注意：**我已经设置`$config['base_url']`为`www.domain.com`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T22:11:17.363

根据文档`base_url()`：

> 此函数返回与 相同的内容`site_url()`，但不附加 index_page 或 url_suffix。

所以它应该返回`http://www.domain.com/`哪个是错误的`include_once()`

您要使用的是 CI 常量`APPPATH`：

```
<?php include_once(APPPATH . 'template/layout/header.php'); ?> 
```

如前所述，您应该将视图放在视图文件夹中并加载它们而不是包含它们。这是正确的 CI 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T16:37:52.180

你为什么不把你的观点放在下面`/application/views/`，然后像这样加载它们？

```
$this->load->file('application/views/layout');
$this->load->view('layout.php'); 
```

无论如何，您必须这样做：

```
<?php include_once(base_url().'/template/layout/header.php'); ?> 
```

并不是：

```
<?php include_once(echo base_url() .'/template/layout/header.php'); ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T02:36:26.240

```
<?php include_once(echo base_url() .'/template/layout/header.php'); ?> 
```

在这里，您做错了两件事。

1.  代码不应在 include_once 中有回显。所以你的代码应该是

> include_once(base_url() .'/template/layout/header.php');

1.  您正在尝试使用 url 而不是绝对路径加载文件。如果 php.ini allow_url_open 设置为关闭，则不能使用 base_url 包含文件（返回站点 url [http://www.domain.com/ ）。](http://www.domain.com/)

您可以使用 str_replace(SYSDIR.'/', '',BASEPATH) 获取到 base 的绝对路径

所以下面的代码将起作用：

```
$abs_path = str_replace(SYSDIR.'/', '',BASEPATH);
include_once($abs_path .'/template/layout/header.php'); 
```

正如上面 2 篇文章中所说，在 CI 中执行此操作的正确方法是将其放在视图文件夹中并使用 CI 加载功能加载它。

# html - 在 Wordpress 中嵌入 SWF 视频：许多失败之路

> ID：16065475
> 
> 赞同：0
> 
> 时间：2013-04-17T16:34:53.910
> 
> 标签：html, wordpress, object, embed, swfobject

我一直在用我认为很简单的问题绞尽脑汁和搜索栏：

我正在尝试将托管在与博客相同的服务器上的 SWF 文件添加到博客文章中。我需要它来自动播放并进行控制。我也试图避免使用嵌入元素，我读过它很不稳定。

使用 SWFobject 时，Wordpress 会破坏条件注释、删除部分代码、添加 embed 元素，有时还会更改尺寸。

我也尝试过使用 Wordpress Shortcode：它只做视频的超链接。我认为这是由于没有 oEmbed 支持，尽管我不确定。

有没有办法关闭 Wordpress 的对象/评论修饰？使用 Wordpress 和嵌入视频的最佳做法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:52:11.610

In case anyone out there is running into similiar issues:

I used JW Player free, which uses the `script` element in the post body to generate the swf code, bypassing wordpress's mangle tangle.

# python - 如何格式化符合 PEP8 的 python 断言语句？

> ID：16065482
> 
> 赞同：57
> 
> 时间：2013-04-17T16:35:17.793
> 
> 标签：python, assert, pep8

如何格式化符合 PEP8 的长断言语句？请忽略我的例子的人为性质。

```
def afunc(some_param_name):
    assert isinstance(some_param_name, SomeClassName), 'some_param_name must be an instance of SomeClassName, silly goose!' 
```

不能将它包装在括号中，因为这会改变 assert 语句的行为，因为它是关键字，而不是内置函数。

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-04-17T16:36:51.163

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-17T16:37:26.587

```
ERR_MESSAGE_01 = '''
Some really long error message
'''

assert condition(a,b), ERR_MESSAGE_01 
```

我是怎么做的……我认为这很好……

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-17T16:42:14.607

值得注意的是，可以用括号括起来，只是不是按照您的想法。

```
assert isinstance(some_param_name, 
                  SomeClassName), ('some_param_name must be an instance of '
                                   'SomeClassName, silly goose!') 
```

但是，我不认为它特别具有可读性。在某些情况下，它可能是正确的选择。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-08-11T14:32:42.967

[这在最大行长度](https://pep8.org/#maximum-line-length)部分末尾的 pep8 中进行了描述。

> 反斜杠有时可能仍然合适。例如，[...] 另一个这样的情况是断言语句。

所以 pep8 的建议是像 mgilsons 的第一个例子那样做，例如：

```
def afunc(some_param_name):
    assert isinstance(some_param_name, SomeClassName), \ 
           'some_param_name must be an instance of SomeClassName, silly goose!' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-17T16:44:41.400

```
def afunc(some_param_name):
    assert (isinstance(some_param_name, SomeClassName)
            ), 'some_param_name must be an instance of SomeClassName, silly goose!' 
```

这为您提供了 PEP 8 推荐的括号中隐含的行延续，而不会破坏断言行为。

或者：

```
def afunc(some_param_name):
    assert isinstance(some_param_name, SomeClassName), (
           'some_param_name must be an instance of SomeClassName, silly goose!') 
```

# wordpress - Fishpig Magento/Wordpress 集成 - 附加 WordPress 自定义菜单不会设置活动状态

> ID：16065483
> 
> 赞同：0
> 
> 时间：2013-04-17T16:35:27.263
> 
> 标签：wordpress, magento, fishpig

我在 Magento 商店中使用[Fishpigs Wordpress 集成模块。](http://fishpig.co.uk/wordpress-integration.html)当我将其设置为使用自定义 Wordpress 菜单（我在 Wordpress 中设置了一些类别层次结构）时，如果您单击链接并处于“活动”页面上，它不会添加任何活动状态。经过一番挖掘，*/app/code/community/Fishpig/Wordpress/Model/Menu/Item.php*有以下内容：

```
public function isItemActive()
{
    return false;
} 
```

所以看起来他们只是跳过了这一点？有人知道如何在这里设置活动状态吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-07T06:09:57.433

Replace the isItemActive function with following code in /app/code/community/Fishpig/Wordpress/Model/Menu/Item.php. This is working for me.

```
public function isItemActive() {
        $myblogUrl = Mage::helper('wordpress/abstract')->getBlogRoute();
        $mycurrentUrl = preg_replace('/\?.*/', '', Mage::helper('core/url')->getCurrentUrl());
        if (in_array($myblogUrl, explode("/", $mycurrentUrl))) {
            return true;
        } else {
            return false;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T09:22:37.557

好的，这似乎可以完成工作，有点解决方法，但是嘿！

```
public function isItemActive()
{
    $currurl = Mage::helper('core/url')->getCurrentUrl();
    $linkurl = $this->getUrl();
    if(strstr($linkurl, $currurl)){
        return true;
    }
    else {
        return false;
    }
} 
```

获取当前 url，获取博客 url，如果它们匹配，则将活动状态设置为 true。然后我使用了一些 jQuery 将父母的状态设置为活动，因为上面只设置了当前链接：

```
$('#nav li.nav-3 ul li.level1.active').parent().parent().addClass("active"); 
```

...其中 li.nav-3 是父博客链接

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-11T05:18:35.977

问题只是一个简单的失误。Magento 在所有 url 中使用“/”，因此 $currentUrl 永远不会匹配 $currentUrl。更正只是为了修剪“/”我知道响应较晚，但认为它可能对某人有所帮助。

```
public function isItemActive()
{
    $currentUrl = Mage::getUrl('*/*/*', array('_current' => true, '_use_rewrite' => true));

    if (strpos($currentUrl, '?') !== false) {
        $currentUrl = substr($currentUrl, 0, strpos($currentUrl, '?'));
    }

    return $currentUrl === rtrim($this->getUrl(), '/');
} 
```

# ssrs-2008 - 从 rdlc 报告中动态删除表

> ID：16065484
> 
> 赞同：0
> 
> 时间：2013-04-17T16:35:29.160
> 
> 标签：ssrs-2008, reportviewer, reporting-services, rdlc

我正在 VS2012 中创建一个 SSRS 报告。

在 Tablix 属性下，我可以使用使用布尔参数的表达式来显示或隐藏表格；但这在报告中留下了空白。

有什么办法可以删除桌子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:50:24.170

我认为这取决于报告布局和各种情况。我创建了最简单的案例：

![在此处输入图像描述](https://i.stack.imgur.com/PVS8n.png)

在设计器模式下，您可以看到报表中只有三个表，没有其他内容。中间表的可见性是基于参数的。在这种情况下，SSRS 确实会根据中间是否可见来移动最后一个表：

![在此处输入图像描述](https://i.stack.imgur.com/mRsIh.png)

![在此处输入图像描述](https://i.stack.imgur.com/DF4f5.png)

在这种情况下，您可能仍然有太多的空白显示。有多种解决方法。一个例子是将中间表嵌入到一个矩形中，该矩形延伸到最后一个表的顶部，然后将可见性表达式从表移动到矩形。在设计师中：

![在此处输入图像描述](https://i.stack.imgur.com/RpA35.png)

最终结果，看起来更好：

![在此处输入图像描述](https://i.stack.imgur.com/qah7X.png)

我想我想展示的只是 SSRS 有时会根据可见性移动事物，但您也可以使用 Rectangles 等工具应用额外的控制来控制可见性和布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T19:19:41.787

您可以调用子报表并根据变量确定不同的子报表。据我所知，您无法使用 SSRS 删除空间，它并非旨在删除空间，只需对占用空间的对象执行不同的操作。不幸的是，我什至不认为您可以动态调整对象的大小。但是，您可以作弊并制作两个子报表，一个带有假定的表格，另一个没有。然后，当您的变量被击中时，它会调用一个而不是另一个。由于子报表可以更改大小，因此这是一种欺骗系统语言限制的方法。它可能不适合您的需求，但它是一种理论上可以解决此问题的想法。

# file - PhoneGap 解析LocalFileSystemURI

> ID：16065494
> 
> 赞同：8
> 
> 时间：2013-04-17T16:36:00.120
> 
> 标签：file, cordova, copy, move

我正在尝试解决如下所示的文件系统 uri：

```
/var/mobile/Applications/9483756B-8D2A-42C5-8CF7-8D76AAA8FF2C/Shift.app/iqedata/5977e2e9239649d5a7e3b8a54719679f/06e2b8896e51472789fcc27575631f94.jpg 
```

任何人都可以告诉我如何在 PhoneGap 中解决这个 uri 并使用下面显示的方法获取 FileEntry 吗？

```
window.resolveLocalFileSystemURI(Url, resOnSuccess, resOnError); 
```

我试图在 uri 之前添加“file://”或“//”，但它不起作用。

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-17T20:34:01.220

PhoneGap 不会让您读取 [APP HASH]/Documents 或 [APP HASH]/tmp 文件夹之外的文件。除非您能找到一种方法来使用其中一个文件夹中的数据初始化您的应用程序，否则您将不得不以另一种方式获取数据。我发现下面的代码可以工作。基本上它将本地文件下载到您的临时文件夹中并为您提供文件条目。

```
window.requestFileSystem(LocalFileSystem.TEMPORARY, 0, function(fs){
    fs.root.getFile("temp", {create: true, exclusive: false},
      function(entry){
        fileTransfer.download(
                Url, // the filesystem uri you mentioned
                entry.fullPath,
                function(entry) {
                    // do what you want with the entry here
                    console.log("download complete: " + entry.fullPath);
                },
                function(error) {
                    console.log("error source " + error.source);
                    console.log("error target " + error.target);
                    console.log("error code " + error.code);
                },
                false,
                null
        );
    }, function(){
        alert("file create error");
    });
}, null); 
```

# jquery - 每 5 秒重新加载一次 jquery JSON

> ID：16065496
> 
> 赞同：0
> 
> 时间：2013-04-17T16:36:04.783
> 
> 标签：jquery, json

我正在尝试制作一个动态列表视图，它每 5 秒重新加载一次更改。它在第一次加载时完美加载，但我的 setinterval 工作不正常。它每 5 秒运行一次，但即使进行了更改，它也不会更新我的菜单？

这是我到目前为止得到的：

```
$(document).on('pageshow', function (){
    var userid=1;
    $.mobile.loading('show');
    $.getJSON("http://mypage.com/playermenu.php?callback=?&userid="+userid,          
        function(data){
            var content = []
            $.each(data , function(i,val){

                content.push(val.list);

            });

            $("#games").html(content.join(""));
            $('#games').listview('refresh');

            $.mobile.loading('hide');

        });
});

setInterval(function(){ 
    $.mobile.loading('show');
    $.getJSON("http://mypage.com/playermenu.php?callback=?&userid="+userid,          
        function(data){
            var content = []
            $.each(data , function(i,val){

                content.push(val.list);

            });

            $("#games").html(content.join(""));
            $('#games').listview('refresh');

            $.mobile.loading('hide');

        }); 
}, 5000); 
```

$.mobile.loading('show'); 5 秒后开始但没有到达 $.mobile.loading('hide');

任何帮助表示赞赏并提前感谢:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T16:43:55.837

`var user_id`与超时功能在不同的范围内。将超时放在文档就绪块中，问题就解决了。此外，请考虑重构代码以避免过多重复并提高可维护性。例如：

```
$(document).on('pageshow', function () {
    var userid = 1,
        url = 'http://mypage.com/playermenu.php?callback=?&userid=' + userid,
        callback = function (data) {
            var content = [];
            $.each(data, function (i, val) {
                content.push(val.list);
            });
            $('#games').html(content.join('')).listview('refresh');
            $.mobile.loading('hide');
        },
        fetchData = function () {
            $.mobile.loading('show');
            $.getJSON(url, callback);
        };
    fetchData();
    setInterval(fetchData, 5000);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T16:39:03.270

我认为您的 user_id 变量在 setInterval 的匿名函数中可能不可见。

# oauth-2.0 - OAuth2 不记名令牌是否已签名？

> ID：16065497
> 
> 赞同：2
> 
> 时间：2013-04-17T16:36:07.270
> 
> 标签：oauth-2.0, digital-signature, access-token

这可能是一个愚蠢或幼稚的问题，但是：OAuth2 不记名令牌是否已签名？

换句话说：消费者是否能够验证不记名令牌是否由特定的授权服务器颁发？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-07T20:42:49.753

没有。但是[正在努力解决这个问题。](https://stackoverflow.com/questions/12296017/) HTTPS 确保令牌被安全传输，但它不会告诉您是谁颁发了令牌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T05:14:03.650

实际上，您必须在 https 上使用 oauth，这将负责签名

# c# - 在 VS2012 中构建解决方案时出现 ALINK 错误

> ID：16065498
> 
> 赞同：0
> 
> 时间：2013-04-17T16:36:10.177
> 
> 标签：c#, asp.net-mvc, visual-studio-2012

嗨，我在第一次构建解决方案时遇到了 ALINK Build 错误，第二次一切正常。

```
Error   16  Metadata failure while creating assembly -- The process cannot access the file because it is being used by another process. 

C:\workspaces\ProjectPath\ALINK ProjectName 
```

它只是第一次发生我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2014-03-24T05:10:33.843

打开项目文件并删除带有新包含数据或与您的项目无关的标签。清理项目并构建项目。

# php - 传递给 Shop::__construct() 的 PHP OOP 参数 1 必须是

> ID：16065499
> 
> 赞同：0
> 
> 时间：2013-04-17T16:36:10.463
> 
> 标签：php, oop

这是我的第一个代码&有一个错误：

可捕获的致命错误：传递给 Shop::__construct() 的参数 1 必须是 Generator 的实例，没有给出，在第 7 行的 C:\xampp\htdocs\oop\config.php 中调用并在 C:\xampp\htdocs 中定义\oop\shop.class.php 在第 8 行

第 8 行：

```
 public function __construct(Generator $generator) 
```

我的代码：

```
class Shop
{
    private $generator;
    private $vates;

    public function __construct(Generator $generator)
    {
        $this->Generator = $generator;
        $this->vates = 'Connected with 250 vates!';
    }

    public function connect()
    {
        if ($this->Generator->isDown())
        {
            echo 'Sorry, the generator is down!';
        }
        else
        {
            echo 'Sucessfully', $this->vates;
        }
    }
} 
```

配置文件：

```
include("system.class.php");
include("shop.class.php");

$generator = new Generator;
$shop = new Shop; 
```

系统类

```
class Generator
{
    private $power = false;

    public function powerUp() 
    {
        $this->power = true;
        echo 'You powered up the generator';
    }
    public function shutDown()
    {
        $this->power = false;
        echo 'The generator slowly shutting down...';
    }

    public function isDown()
    {
        return $this->power;
    }
} 
```

我做错了什么？谢谢 ;）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T16:39:26.807

尝试这个：

```
include("system.class.php");
include("shop.class.php");

$generator = new Generator;
$shop = new Shop($generator); 
```

shop 类的构造签名是[类型提示](http://php.net/manual/en/language.oop5.typehinting.php)参数，这意味着您只能传入一个 Generator 对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T16:40:15.550

您没有将任何参数传递给构造函数：

```
$generator = new Generator();
$shop = new Shop($generator); 
```

# r - 使用R，是否可以获得不存在数据的频率表？

> ID：16065501
> 
> 赞同：1
> 
> 时间：2013-04-17T16:36:11.733
> 
> 标签：r, frequency

我正在制作一些人口统计表，包括种族、性别和种族。其中一张表是按种族（西班牙裔/非西班牙裔）划分的性别和种族的交叉表。到目前为止，研究中没有西班牙裔参与者，但需要制作该表并将其发送给相关方（即监管机构）。

但是，我无法为报告制作表格。显然，该表将全为零，但根本没有生成。似乎这是试图计算不存在的东西的限制......

我在下面包含了示例数据：

* * *

```
race.in <- read.table(
text = "race eth sex
b   n   f
b   n   f
b   n   f
w   n   f
w   n   m
w   n   m
a   n   m
a   n   m
a   n   f
ai  n   m
ai  n   f
ai  n   m", header = TRUE)

attach(race.in)

race.levels <- c("b", "w", "a", "ai", "nh") 
eth.levels  <- c("h", "n")  # hispanic , not hispanic
sex.levels  <- c("m", "f")

#  this table is fine
table(factor(race, levels = race.levels), factor(sex, levels = sex.levels) )

#  this table is fine
table(factor(eth, levels = eth.levels), factor(sex, levels = sex.levels) )

#  table of race and ethnicity by sex
by(race.in, sex, FUN = function(X)  table(factor(race, levels = race.levels), factor(eth, levels = eth.levels) ))  

#  produces NULL for table for levels of "h"
by(race.in, factor(eth, levels = eth.levels), FUN = function(X)  table(factor(race, levels = race.levels), factor(sex, levels = sex.levels) )) 
```

* * *

有没有办法产生一个零表？我知道这很愚蠢，但我们必须报告这一点，即使没有这组条件的数据......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T16:49:55.887

我不清楚为什么您不只是将变量考虑在内`data.frame`。这使得创建表格变得更加容易。

```
race.in$race <- factor(race.in$race, race.levels)
race.in$eth <- factor(race.in$eth, eth.levels)
race.in$sex <- factor(race.in$sex, sex.levels)
table(race.in)
table(race.in[c(1, 3, 2)])
# , , eth = h
# 
#     sex
# race m f
#   b  0 0
#   w  0 0
#   a  0 0
#   ai 0 0
#   nh 0 0
# 
# , , eth = n
# 
#     sex
# race m f
#   b  0 3
#   w  2 1
#   a  2 1
#   ai 2 1
#   nh 0 0 
```

* * *

您可能也有兴趣探索该`ftable`功能（对于“平面”表）。例如：

```
> ftable(x=race.in, row.vars=1, col.vars=2:3)
     eth h   n  
     sex m f m f
race            
b        0 0 0 3
w        0 0 2 1
a        0 0 2 1
ai       0 0 2 1
nh       0 0 0 0 
```

# ios - 如何在一个屏幕上添加多个核心绘图

> ID：16065505
> 
> 赞同：0
> 
> 时间：2013-04-17T16:36:32.770
> 
> 标签：ios, core-plot

好吧，我很难过。我正在尝试在我的 iOS 应用程序中使用 Core Plot 1.2，并且正在尝试将两个绘图添加到一个屏幕上。我的视图控制器代码如下。也有一个 NIB 文件，但它是空的 - 只是 UIView 中的默认视图。我创建了两个 CPTGraphHostingView 类型的子视图，将它们添加为 self.view 的 suvviews，然后创建图形。在下面的代码中，我什至注释掉了创建其中一个图表的方法，以查看是否可以显示一个图表，但我得到的只是一个空白的白色屏幕。

我正在使用一个简单的 X**2 函数来测试每个图的目的。

我究竟做错了什么？有没有更简单的方法可以将 2 个或 3 个单独的 XY 样式图放到一个屏幕上？

```
@interface SensorPlotSecondViewController : UIViewController <CPTPlotDataSource>
{
    CPTGraphHostingView *accelSubview;
    CPTGraphHostingView *gyroSubview;
    CPTGraphHostingView *magSubview;

    CPTXYGraph *accelGraph;
    CPTXYGraph *gyroGraph;
    CPTXYGraph *magGraph;
}

-(NSUInteger)numberOfRecordsForPlot:(CPTPlot *)plot;

-(NSNumber *)numberForPlot:(CPTPlot *)plot field:(NSUInteger)fieldEnum recordIndex:(NSUInteger)idx;

@end

@implementation SensorPlotSecondViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        self.title = NSLocalizedString(@"Second", @"Second");
        self.tabBarItem.image = [UIImage imageNamed:@"second"];

        CGRect frm1=CGRectMake(0,0,320,150);
        accelSubview=[[CPTGraphHostingView alloc] initWithFrame:frm1];
        [self.view addSubview:accelSubview];

        CGRect frm2=CGRectMake(0,150,320,150);
        gyroSubview=[[CPTGraphHostingView alloc] initWithFrame:frm2];
        [self.view addSubview:gyroSubview];

    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    [self createAccelGraph];

    //[self createGyroGraph];
}

-(void)createAccelGraph
{
    accelGraph = [[CPTXYGraph alloc] initWithFrame: accelSubview.bounds];

    //CPTTheme *theme=[CPTTheme themeNamed:kCPTPlainWhiteTheme];
    //[accelGraph applyTheme:theme];

    accelGraph.plotAreaFrame.borderLineStyle = nil;

    CPTGraphHostingView *hostingView = (CPTGraphHostingView *)accelSubview;
    hostingView.hostedGraph=accelGraph;
    accelGraph.paddingLeft = 0.0;
    accelGraph.paddingTop = 0.0;
    accelGraph.paddingRight = 0.0;
    accelGraph.paddingBottom = 0.0;

    //accelGraph.fill=nil;

    CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *)accelGraph.defaultPlotSpace;
    plotSpace.xRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(0)
                                                    length:CPTDecimalFromFloat(10)];
    plotSpace.yRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(0)
                                                    length:CPTDecimalFromFloat(30)];

    CPTMutableLineStyle *lineStyle = [CPTMutableLineStyle lineStyle];
    lineStyle.lineColor = [CPTColor blackColor];
    lineStyle.lineWidth = 2.0f;

    CPTXYAxisSet *axisSet = (CPTXYAxisSet *)accelGraph.axisSet;
    axisSet.xAxis.majorIntervalLength = CPTDecimalFromString(@"5");

    axisSet.xAxis.minorTicksPerInterval = 4;
    axisSet.xAxis.majorTickLineStyle = lineStyle;
    axisSet.xAxis.minorTickLineStyle = lineStyle;
    axisSet.xAxis.axisLineStyle = lineStyle;
    axisSet.xAxis.minorTickLength = 5.0f;
    axisSet.xAxis.majorTickLength = 7.0f;
    axisSet.xAxis.labelOffset = 3.0f;

    axisSet.xAxis.visibleAxisRange=[CPTPlotRange plotRangeWithLocation:CPTDecimalFromString(@"0") length:CPTDecimalFromString(@"10")];

    axisSet.yAxis.majorIntervalLength = CPTDecimalFromString(@"5");
    axisSet.yAxis.minorTicksPerInterval = 4;
    axisSet.yAxis.majorTickLineStyle = lineStyle;
    axisSet.yAxis.minorTickLineStyle = lineStyle;
    axisSet.yAxis.axisLineStyle = lineStyle;
    axisSet.yAxis.minorTickLength = 5.0f;
    axisSet.yAxis.majorTickLength = 7.0f;
    axisSet.yAxis.labelOffset = 3.0f;

    axisSet.yAxis.visibleAxisRange=[CPTPlotRange plotRangeWithLocation:CPTDecimalFromString(@"0") length:CPTDecimalFromString(@"25")];

    accelGraph.plotAreaFrame.paddingLeft = 40.0;
    accelGraph.plotAreaFrame.paddingTop = 80.0;
    accelGraph.plotAreaFrame.paddingRight = 40.0;
    accelGraph.plotAreaFrame.paddingBottom = 300.0;

    CPTScatterPlot *xSquaredPlot = [[[CPTScatterPlot alloc] initWithFrame:accelSubview.bounds] autorelease];
    //CPTScatterPlot *xSquaredPlot = [[[CPTScatterPlot alloc] init] autorelease];
    xSquaredPlot.identifier = @"X Squared Plot";

    CPTMutableLineStyle *dataLineStyle = [CPTMutableLineStyle lineStyle];
    dataLineStyle.lineWidth = 1.0f;
    dataLineStyle.lineColor = [CPTColor redColor];
    xSquaredPlot.dataLineStyle=dataLineStyle;
    xSquaredPlot.dataSource = self;

    [accelGraph addPlot:xSquaredPlot];

    CPTPlotSymbol *greenCirclePlotSymbol = [CPTPlotSymbol ellipsePlotSymbol];
    greenCirclePlotSymbol.fill = [CPTFill fillWithColor:[CPTColor greenColor]];
    greenCirclePlotSymbol.size = CGSizeMake(2.0, 2.0);
    //xSquaredPlot.defaultPlotSymbol = greenCirclePlotSymbol;
    xSquaredPlot.plotSymbol = greenCirclePlotSymbol;

    /****
     CPTScatterPlot *xInversePlot = [[[CPTScatterPlot alloc] init] autorelease];
     xInversePlot.identifier = @"X Inverse Plot";

     CPTMutableLineStyle *dataLineStyle2 = [CPTMutableLineStyle lineStyle];
     dataLineStyle2.lineWidth = 1.0f;
     dataLineStyle2.lineColor = [CPTColor blueColor];
     xInversePlot.dataLineStyle=dataLineStyle2;
     xInversePlot.dataSource = self;
     [accelGraph addPlot:xInversePlot];
     ****/

}

-(void)createGyroGraph
{
    gyroGraph = [[CPTXYGraph alloc] initWithFrame: gyroSubview.bounds];

    CPTTheme *theme=[CPTTheme themeNamed:kCPTPlainWhiteTheme];
    [gyroGraph applyTheme:theme];

    gyroGraph.plotAreaFrame.borderLineStyle = nil;

    CPTGraphHostingView *hostingView = (CPTGraphHostingView *)gyroSubview;
    hostingView.hostedGraph=gyroGraph;
    gyroGraph.paddingLeft = 0.0;
    gyroGraph.paddingTop = 0.0;
    gyroGraph.paddingRight = 0.0;
    gyroGraph.paddingBottom = 0.0;

    gyroGraph.fill=nil;

    CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *)gyroGraph.defaultPlotSpace;
    plotSpace.xRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(0)
                                                    length:CPTDecimalFromFloat(10)];
    plotSpace.yRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(0)
                                                    length:CPTDecimalFromFloat(30)];

    CPTMutableLineStyle *lineStyle = [CPTMutableLineStyle lineStyle];
    lineStyle.lineColor = [CPTColor blackColor];
    lineStyle.lineWidth = 2.0f;

    CPTXYAxisSet *axisSet = (CPTXYAxisSet *)gyroGraph.axisSet;
    axisSet.xAxis.majorIntervalLength = CPTDecimalFromString(@"5");

    axisSet.xAxis.minorTicksPerInterval = 4;
    axisSet.xAxis.majorTickLineStyle = lineStyle;
    axisSet.xAxis.minorTickLineStyle = lineStyle;
    axisSet.xAxis.axisLineStyle = lineStyle;
    axisSet.xAxis.minorTickLength = 5.0f;
    axisSet.xAxis.majorTickLength = 7.0f;
    axisSet.xAxis.labelOffset = 3.0f;

    axisSet.xAxis.visibleAxisRange=[CPTPlotRange plotRangeWithLocation:CPTDecimalFromString(@"0") length:CPTDecimalFromString(@"10")];

    axisSet.yAxis.majorIntervalLength = CPTDecimalFromString(@"5");
    axisSet.yAxis.minorTicksPerInterval = 4;
    axisSet.yAxis.majorTickLineStyle = lineStyle;
    axisSet.yAxis.minorTickLineStyle = lineStyle;
    axisSet.yAxis.axisLineStyle = lineStyle;
    axisSet.yAxis.minorTickLength = 5.0f;
    axisSet.yAxis.majorTickLength = 7.0f;
    axisSet.yAxis.labelOffset = 3.0f;

    axisSet.yAxis.visibleAxisRange=[CPTPlotRange plotRangeWithLocation:CPTDecimalFromString(@"0") length:CPTDecimalFromString(@"25")];

    gyroGraph.plotAreaFrame.paddingLeft = 40.0;
    gyroGraph.plotAreaFrame.paddingTop = 200.0;
    gyroGraph.plotAreaFrame.paddingRight = 40.0;
    gyroGraph.plotAreaFrame.paddingBottom = 150.0;

    CPTScatterPlot *xSquaredPlot = [[[CPTScatterPlot alloc] initWithFrame:gyroSubview.bounds] autorelease];
    //CPTScatterPlot *xSquaredPlot = [[[CPTScatterPlot alloc] init] autorelease];
    xSquaredPlot.identifier = @"X Squared Plot";

    CPTMutableLineStyle *dataLineStyle = [CPTMutableLineStyle lineStyle];
    dataLineStyle.lineWidth = 1.0f;
    dataLineStyle.lineColor = [CPTColor redColor];
    xSquaredPlot.dataLineStyle=dataLineStyle;
    xSquaredPlot.dataSource = self;

    [gyroGraph addPlot:xSquaredPlot];

    CPTPlotSymbol *greenCirclePlotSymbol = [CPTPlotSymbol ellipsePlotSymbol];
    greenCirclePlotSymbol.fill = [CPTFill fillWithColor:[CPTColor greenColor]];
    greenCirclePlotSymbol.size = CGSizeMake(2.0, 2.0);
    //xSquaredPlot.defaultPlotSymbol = greenCirclePlotSymbol;
    xSquaredPlot.plotSymbol = greenCirclePlotSymbol;

    /****
     CPTScatterPlot *xInversePlot = [[[CPTScatterPlot alloc] init] autorelease];
     xInversePlot.identifier = @"X Inverse Plot";

     CPTMutableLineStyle *dataLineStyle2 = [CPTMutableLineStyle lineStyle];
     dataLineStyle2.lineWidth = 1.0f;
     dataLineStyle2.lineColor = [CPTColor blueColor];
     xInversePlot.dataLineStyle=dataLineStyle2;
     xInversePlot.dataSource = self;
     [accelGraph addPlot:xInversePlot];
     ****/

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T01:42:53.033

您在绘图区域框架上的填充太大。该图只有 150 像素高，但您试图将绘图区域插入 380 像素，没有空间来绘制绘图。

# csv - 在 CMD 中获取文件和文件夹列表以表格格式

> ID：16065507
> 
> 赞同：0
> 
> 时间：2013-04-17T16:36:43.407
> 
> 标签：csv, batch-file, cmd, dir, filelist

我已经阅读[了这个帖子](https://stackoverflow.com/questions/9616631/get-list-of-files-to-table-format-in-cmd)，它有帮助，但没有回答我的具体问题。我希望有人能帮忙。

我正在尝试导出包含两列数据的 CSV 文件。第 1 列是实际文件名（带扩展名），第 2 列是文件位置的直接文件夹名称（没有任何路径信息）。我的问题是，这可能吗？下一个问题是，如何将其导出为包含两列信息的 CSV 文件？

这是一个很好的起点，除了它只有文件名（没有显示直接文件夹名称的第二列），而且这似乎不会返回到每个文件名的下一行。相反，这只是用逗号分隔而不返回新行。

你能建议这是否可行并提供一些想法吗？

```
 @echo off
<nul (
  for /f "eol=: delims=" %%F in ('dir /b /o:n') do set /p =""%%F","
) >fileList.csv 
```

谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T19:16:53.367

如果“立即文件夹名称”是指包含目录的名称，但没有该目录的路径，则：

```
@ECHO OFF
SETLOCAL
PUSHD "%~1"
FOR /f "delims=" %%i IN ("%cd%") DO SET directory=%%~nxi
(
FOR /f "delims=" %%i IN ('dir /b /a-d /on') DO (
 SETLOCAL enabledelayedexpansion
 ECHO "%%i","!directory!"
 endlocal
)
)>filelist.csv
POPD 
```

所需目录的路径名应作为第一个参数提供，必要时加引号。

本质上，切换到有问题的目录，找到并保存叶目录的名称，然后执行返回文件名的目录扫描。引用两者并用逗号输出。内部`setlocal`是允许至少一些愚蠢的目录名称。

* * *

编辑 20130422-1421Z

```
@ECHO OFF
SETLOCAL
PUSHD "%~1"
FOR /f "delims=" %%i IN ("%cd%") DO SET directory=%%~nxi
(
FOR /f "delims=" %%i IN ('dir /b /a-d /on') DO (
 SET fdate=%%~ti
 SETLOCAL enabledelayedexpansion
  ECHO "%%i","!directory!","!fdate:~0,10!"
 endlocal
)
)>filelist.csv
POPD 
```

编辑以将日期显示为第三个元素。报价保留 - 随意删除。如果需要日期和时间，请删除该`SET fdate`行并将其替换`"!fdate:~0,10!"`为`"%%~ti`

日期和时间格式 - 可以肯定的是，需要知道您使用的格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T19:29:15.393

如果您正在执行递归目录搜索，则只能在`for /f`循环中`%%F`使用`%%~nxF`. 这很容易。

更棘手的部分是从路径 ( `%%~pF`) 中抓取最后一个文件夹。不过，实际上也有一个简单的技巧。使用另一个循环来`for`获取`%%~nxI`. `%%~dpF`是的，`filename.ext`完整路径*是*尾随目录。

但是，这仅在目录不以尾部反斜杠结尾时才有效。由于`%%~dpF` *确实*以尾部反斜杠结尾，因此您只需在末尾添加一个点即可解决它。因此，`"c:\users\me\Desktop\"`您不会得到带有尾随点的`~nx`of 。`"c:\users\me\Desktop\."`

足够的解释。这是它是如何完成的。

```
@echo off

for /f "delims=" %%F in ('dir /s /b /o:n') do (
    for %%I in ("%%~dpF.") do echo "%%~nxF","%%~nxI"
) >filelist.csv 
```

# bash - 在 sed append 中插入前导回车

> ID：16065508
> 
> 赞同：2
> 
> 时间：2013-04-17T16:36:46.067
> 
> 标签：bash, sed

我正在尝试使用 sed 在字符串匹配后插入一些文本，但我无法在附加文本中使用前导回车符。我有 ...

```
sed -i "/^#Comment to append text after/a \n[$username.conn]\nipAddress=$ipAddr\nportNumber=$portNum" file 
```

我想在那个 3 行插入之前有一个回车，所以输出是......

```
#Comment to append text after

[$username.conn]
ipAddress=xxx.xxx.xxx.xxx
portNum=yyyy 
```

但是将 a`\n`放在 just 前面会`[$username.conn]`导致前导 n...

```
#Comment to append text after
n[$username.conn]
ipAddress=xxx.xxx.xxx.xxx
portNum=yyyy 
```

关于如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T16:46:39.657

我认为问题是由于对反斜杠的特殊处理`sed`：

```
sed "/^#Comment to append text after/a\\\n[$username.conn]\nipAddress=$ipAddr\nportNumber=$portNum" input 
```

或更清楚地说：

```
sed '/^#Comment to append text after/a \
\
['$username'.conn]\
ipAddress='$ipAddr'\
portNumber='"$portNum" input 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T16:45:19.673

我不知道为什么，但使用`\\n`（`\n`只是第一次）对我有用。

像这样：

sed -i "/^#Comment to append text after /a **\\n** [$username.conn]\nipAddress=$ipAddr\nportNumber=$portNum" /usr/Jas/conf/drp.ini

我在 gnu 的 sed commnad 上试过这个。

# javascript - 如何将键绑定（如空格）到整个视口？

> ID：16065509
> 
> 赞同：0
> 
> 时间：2013-04-17T16:36:46.463
> 
> 标签：javascript, angularjs, keyboard-shortcuts, angular-ui

我想设置一个键来响应我在页面上按下的任何位置，例如，它不绑定到单个输入。

我试图将它附加到按钮或 div 之类的元素上，但它根本不起作用。

```
<div ui-keypress=" { 32: 'test()' } "></div>
<button ui-keypress=" { 32: 'test()' }">Test</button> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T16:36:46.463

我已经找到了答案，将事件绑定到`<body>`允许在整个页面中跟踪一个键。

在我的例子中，我想捕获按键并在给定的控制器中处理它，但是需要在 body 标签上声明它让我前进了一点。我现在有一个主控制器，它有一个`emit`方法，这样我可以捕获事件并将其路由到某种事件总线。

然后，在子范围/控制器上，我可以捕获事件并检查是否有任何侦听器来处理该按键事件。我在[这个小提琴](http://jsfiddle.net/jayrmotta/LfvkE/2/)上写了一个例子。

```
"use strict";

angular.module('myApp', ['ui'])
    .controller('MainCtrl', function($scope) {
        $scope.emit = function($event) {
            $scope.$broadcast('keypress', $event);
        };
    })
    .controller('MyCtrl', function ($scope) {
        $scope.$on('keypress', function($event, event) {
            keypressListeners.forEach(function(listener) {
                if (listener.keyCode === event.keyCode)
                    listener.fn();
            });
        });

        $scope.test = function() {
            alert('Works fine!');
        };

        var keypressListeners = [{ keyCode : 32, fn : $scope.test }];
}); 
```

```
<body ng-app="myApp" ng-controller="MainCtrl" ui-keypress=" { 32: 'emit($event)' } " >
  <div ng-controller="MyCtrl"></div>
</body> 
```

我会很感激对此的评论和提示；D

# ruby-on-rails - Ruby分割字符串

> ID：16065511
> 
> 赞同：0
> 
> 时间：2013-04-17T16:36:46.567
> 
> 标签：ruby-on-rails, ruby

```
String = "Mod1:10022932,10828075,5946410,13321905,5491120,5030731|Mod2:22704455,22991440,22991464,21984312,21777721,21777723,21889761,21939852,23091478,22339903,23091485,22099714,21998260,22364832,21939858,21944274,21944226,22800221,22704443,21777728,21777719,21678184,21998265,21834900,21984331,22704454,21998261,21944214,21862610,21836482|Mod3:10828075,13321905,5491120,5946410,5030731,15806212,4100566,4787137,2625339,2408317,2646868,19612047,2646862,11983534,8591489,19612048,10249319,14220471,15806209,13330887,15075124,17656842,3056657,5086273|Mod4:10828075,5946410,13321905,5030731,5491120,4787137,4100566,15806212,2625339,3542205,2408317,2646862,2646868|Mod5:10022932;0.2512,10828075;0.2093,5030731;0.1465,5946410;0.1465,4787137;0.1465,2625339;0.0143,5491120;0.0143,13321905;0.0143,3542205;0.0143,15806212;0.0119,4100566;0.0119,19612047;0.0100,2408317;0.0100" 
```

我怎样才能把它拆分出来，以便我可以获得每个标题（Mod1，Mod2 ..）和属于每个标题的 ID。

这是我迄今为止尝试过的，它正在删除管道之后的所有内容，这是我不想要的。

```
mod_name = string.split(":")[0]
mod_ids = string.split(":")[1] #This gets me the ID's but also include the |Mod*
ids = mod_mod_ids.split("|").first.strip #Only returns Id's before the first "|" 
```

期望的输出：我需要将 mod_name 和 mod_ids 保存到它们各自的列中，

```
mod_name = #name ("Mod1...Mod2 etc) #string
mod_ids = #ids (All Ids after the ":" in Mod*:) #array 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:43:54.423

有几种方法可以做到这一点：

```
# This will split the string on "|" and ":" and will return:
#   %w( Mod1 id1 Mod2 id2 Mod3 id3 ... )
ids = string.split(/[|:]/)

# This will first split on "|", and for each string, split it again on ":" and returs:
#   [ %w(Mod1 id1), %w(Mod2 id2), %w(Mod3 id3), ... ]
ids = string.split("|").map { |str| str.split(":") } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T19:12:29.337

如果您想要一个哈希结果以便通过标题轻松访问，那么您可以这样做：

```
 str.split('|').inject({}){|h,x| k,v = x.split(':'); h[k] = v.split(','); h}

  => {
      "Mod1"=>["10022932", "10828075", "5946410", "13321905", "5491120", "5030731"], 
      "Mod2"=>["22704455", "22991440", "22991464", "21984312", "21777721", "21777723", "21889761", "21939852", "23091478", "22339903", "23091485", "22099714", "21998260", "22364832", "21939858", "21944274", "21944226", "22800221", "22704443", "21777728", "21777719", "21678184", "21998265", "21834900", "21984331", "22704454", "21998261", "21944214", "21862610", "21836482"], 
      "Mod3"=>["10828075", "13321905", "5491120", "5946410", "5030731", "15806212", "4100566", "4787137", "2625339", "2408317", "2646868", "19612047", "2646862", "11983534", "8591489", "19612048", "10249319", "14220471", "15806209", "13330887", "15075124", "17656842", "3056657", "5086273"], 
      "Mod4"=>["10828075", "5946410", "13321905", "5030731", "5491120", "4787137", "4100566", "15806212", "2625339", "3542205", "2408317", "2646862", "2646868"], 
      "Mod5"=>["10022932;0.2512", "10828075;0.2093", "5030731;0.1465", "5946410;0.1465", "4787137;0.1465", "2625339;0.0143", "5491120;0.0143", "13321905;0.0143", "3542205;0.0143", "15806212;0.0119", "4100566;0.0119", "19612047;0.0100", "2408317;0.0100"]
     } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T16:51:41.337

我认为这可以满足您的要求：

```
ids = string.split("|").map {|part| [part.split(":")[0], part.split(":")[1].split(/,|;/)]} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T18:08:44.757

感谢@tillerjs 的帮助，我最终使用了什么。

```
data = sting.split("|")
data.each do |mod|
   module_name = mod.split(":")[0]
   recommendations = mod.split(":")[1]
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T16:51:12.160

未经测试：

```
all_mods = {}
string.split("|").each do |fragment|
  mod_fragments = fragment.split(":")
  all_mods[mod_fragments[0]] = mod_fragments[1].split(",")
end 
```

# java - 为 Eclipse/Android 开发编译标志

> ID：16065514
> 
> 赞同：4
> 
> 时间：2013-04-17T16:37:05.113
> 
> 标签：java, android, eclipse, compiler-optimization

所以我试图弄清楚如何在 Eclipse 中设置编译标志，所以当我开发我的 Android 应用程序时，我可以进行特定的构建。示例我有一个基于 WebView 的应用程序，我希望能够构建一个具有不同 URL 的 QA 版本，`web.loadUrl("http://www.com");`我真的不希望有 2 个项目 QA 和 Release。我一直在研究一种基本自动化这个过程的方法。在编译和测试应用程序之前，我不想每次都去更改代码中的 URL。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T16:50:03.610

使 url 字符串可配置，例如通过属性文件，您可以借助 java [Properties](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html)轻松访问该文件。如果要更改 URL，请确保不需要重新编译应用程序。

```
Properties applicationConfiguration = new Properties();
applicationConfiguration.load(this.getClass().getResourceAsStream("application.properties"));
String url = applicationConfiguration.getProperty("my.url", "http://defaulurl.com"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T01:13:27.573

In `SDK Tools, Revision 17 (March 2012)`:

*   Added a feature that allows you to run some code only in debug mode. Builds now generate a class called BuildConfig containing a DEBUG constant that is automatically set according to your build type. You can check the (BuildConfig.DEBUG) constant in your code to run debug-only functions.

I find that the easiest way to accomplish what you want, is by checking the `BuildConfig.DEBUG` boolean.

The **DEBUG** boolean is always `true when developing`, only when you export a signed or unsigned apk, is it set to `false`. You can use it as:

```
if (BuildConfig.DEBUG) { // Developing
    myURL = "http://www.bing.com";
}

// Or the other way around:

if (!BuildConfig.DEBUG) { // Released (signed app)
    myURL = "http://www.google.com";
} 
```

# java - Java Character.valueOf('x')？

> ID：16065518
> 
> 赞同：1
> 
> 时间：2013-04-17T16:37:09.897
> 
> 标签：java, character

我只是好奇，但是在调用带有参数的方法时，在 Java 之间`'x'`和`Character.valueOf('x')`在 Java 之间有什么区别？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T16:38:37.347

`'x'`是一个字符原语

`Character.valueOf('x')`返回一个`Character`包含`x`

相关：[原始数据类型](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T16:42:02.963

Character.valueOf(char) 接受一个 char 并返回一个代表相同值的 Character 包装器实例。对其使用 toString() 会返回一个仅包含该单个字符的字符串。

# c# - 我如何检查网络连接以最快的方式获胜？

> ID：16065524
> 
> 赞同：2
> 
> 时间：2013-04-17T16:37:39.787
> 
> 标签：c#, visual-studio, windows-ce, smart-device

我正在为 Honeywell Dolphin 6100 开发一个应用程序，这是一款带有条形码扫描仪的移动计算机，它使用类似 Windows CE 5.0 的操作系统。

我想使用一个可以检查网络连接是否存在的功能，我尝试使用下面的代码，但它太慢了。

```
public static bool CheckForInternetConnection()
{
   string url = "http://www.Microsoft.com/";
   try
   {
       System.Net.WebRequest myRequest = System.Net.WebRequest.Create(url);
       System.Net.WebResponse myResponse = myRequest.GetResponse();
   }
   catch (System.Net.WebException)
   {
       return false;
   }
   return true;
} 
```

任何人都有一个更快的方法来做到这一点。我提到我在win7上使用VS2008

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T16:59:06.147

由于您没有对响应的内容做任何事情，因此实际上没有理由请求它，并等待所有这些数据的网络传输。您可能会尝试设置 myRequest.Method = "HEAD"，它只会返回标头（假设 Web 服务器支持它），但显然仍要验证您是否可以与远程 Web 服务器通信。

[http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.method.aspx](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.method.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T18:35:34.223

假设您的 .net 运行时版本可用，您可以调用静态[System.Net.NetworkInformation.GetIsNetworkAvailable()](http://msdn.microsoft.com/en-us/library/system.net.networkinformation.networkinterface.getisnetworkavailable%28v=vs.95%29.aspx)方法。在某些情况下，它会返回 true 并且您将无法路由到外部世界，但它会告诉您您的设备是否具有标记为已启动的网络接口。

# css - 尝试修复网站基于 CSS 的布局问题

> ID：16065528
> 
> 赞同：0
> 
> 时间：2013-04-17T16:38:06.830
> 
> 标签：css

我一直在为我的大学开发以下网站：http: [//www.ecu.edu/english/tpc](http://www.ecu.edu/english/tpc)并开发了您当前在访问时看到的布局。它在桌面上的浏览器中看起来不错，但我很难让它在较小的屏幕（如 iPhone）上变得灵活。我试图在几个地方调整最大宽度设置，但我没有运气。具体问题是顶部的两个水平菜单（在 HTML/CSS 中它们是导航和导航2）和右侧的内容（它们是侧边栏 div 中包含的 DT）似乎具有固定的大小，从而破坏了布局在较小的屏幕上。任何建议都非常感谢，完整的 CSS 可以在这里找到：http: [//jsfiddle.net/dSPdB/](http://jsfiddle.net/dSPdB/)

```
/* -------- Horizontal Navigation -------- */

#navigation {
    float: left;
    margin: .5em 0 0 0;
    position: relative;
    padding: .5em 0;
    text-transform: uppercase;
    background-color: #592a8a;
}

#navigation ul {
    text-align: center;
    padding: 0;
    margin: 0;
    list-style: none;
}

#navigation li {
    font-family: 'Noto Sans', sans-serif;
    display: inline;
    list-style: none;
    display: block;
    float: left;
    width: 11em;
    max-height: 2em;
    text-align: center;
    padding: .5em 0 0 0;
}

#navigation li:first-child {
    border-left: 0;
}

#navigation li:last-child {
    border-right: 0;
}

#navigation li a {
    color: #fff;
    text-decoration: none;
}

#navigation li a:hover {
    color: #fff;
    border: 0;
    text-decoration: underline;
}
/* --------------------------------------- */
/* -------- Navigation 2 -------- */

#navigation2 {
    float: left;
    margin: 0 0 0 0;
    position: relative;
    padding-left: 5.4em;
    text-transform: uppercase;
}

#navigation2 ul {
    text-align: center;
    padding: 0;
    margin: 0;
    list-style: none;
}

#navigation2 li {
    font-weight: bold;
    display: inline;
    list-style: none;
    display: block;
    float: left;
    max-width: 3em;
    max-height: 2em;
    text-align: center;
    padding: .5em 0 0 0;
    margin-right: 1em;
}

#navigation2 li:first-child {
    border-left: 0;
}

#navigation2 li:last-child {
    margin-right: 0;
}

#navigation2 li a {
    color: #fff;
    text-decoration: none;
}

#navigation2 li a:hover {
    color: #fff;
    border: 0;
    text-decoration: underline;
}
/* --------------------------------------- */ 
```

没关系媒体查询不起作用，我没有把它放在 CSS 的底部（呃！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:57:50.913

我建议您查看媒体查询。

媒体查询并不是那么难用。您仍然拥有常规 CSS，并在底部添加：

```
@media only screen and (max-device-width: 480px) {
    ...
} 
```

在花括号内，如果屏幕窄于 480 像素，您只需指定您想要的更改。

```
@media only screen and (max-device-width: 480px) {
    p {
        color: red;
    }
} 
```

这会将所有段落文本更改为红色，只要您将浏览器窗口设置为小于 480 像素。当然，这是一个有点傻的例子。大多数时候你更关心`width`或关注`display`某些元素。

在您的情况下，您可能希望在这些情况下定位导航 div 并让它们表现不同，即：

```
@media only screen and (max-device-width: 480px) {
    #navigation2 {
        float: none;
        clear: both;
    }
} 
```

请注意，以上可能不是您想要的。我只是做了一些虚拟的改变来展示什么是可能的。

# ruby - VimGolf 与 Ruby 2.0 兼容吗？

> ID：16065535
> 
> 赞同：1
> 
> 时间：2013-04-17T16:38:26.987
> 
> 标签：ruby, rvm

**我按照使用Ruby 2.0.0**的 VimGolf 安装说明进行操作，并从中获得了`command not found`成功。我切换到 1.9.3（通过 RVM）并做了同样的事情，它就像一个魅力。

VimGolf 是否与 Ruby 2.0 不兼容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:51:13.357

为我工作。你可能忘了做：

`gem install vimgolf`

在你切换到 Ruby 2.0 之后。

# java - Java webstart 在 Windows 上加载 linux swt jars

> ID：16065539
> 
> 赞同：0
> 
> 时间：2013-04-17T16:38:36.770
> 
> 标签：java, swt, java-web-start

我有一个使用 swt 作为界面的 java webstart 应用程序（并且包括 DJ Native Swing）。该应用程序在 Windows 上运行良好，直到我尝试将 linux 和 mac osx swt jar 添加到应用程序以支持这些平台。当从 netbeans 启动时，应用程序在 linux 下运行良好，只链接了正确的 jar，但是在任何平台上通过 java webstart 启动应用程序时，似乎加载了错误的 jar 文件。

这就是我在 launch.jnlp 中的内容（以及其他内容）：

```
<resources os="Windows" arch="x86">
    <j2se java-vm-args="-Xmx512m" version="1.5+"/>
    <jar href="lib/swt-win32-x86.jar"/>
    <nativelib href="lib/swt-win32-x86.jar"/>
</resources>

<resources os="Windows" arch="x86_64">
    <j2se java-vm-args="-Xmx512m" version="1.5+"/>
    <jar href="lib/swt-win32-x86_64.jar"/>
    <nativelib href="lib/swt-win32-x86_64.jar"/>
</resources>

<resources os="Windows" arch="amd64">
    <j2se java-vm-args="-Xmx512m" version="1.5+"/>
    <jar href="lib/swt-win32-x86_64.jar"/>
    <nativelib href="lib/swt-win32-x86_64.jar"/>
</resources>

<resources os="Linux" arch="i386">
    <j2se java-vm-args="-Xmx512m" version="1.5+"/>
    <jar href="lib/swt-linux-x86.jar"/>
    <nativelib href="lib/swt-linux-x86.jar"/>
</resources>

<resources os="Linux" arch="amd64">
    <j2se java-vm-args="-Xmx512m" version="1.5+"/>
    <jar href="lib/swt-linux-x86_64.jar"/>
    <nativelib href="lib/swt-linux-x86_64.jar"/>
</resources>

<resources os="Mac OS X" arch="x86_64">
    <j2se java-vm-args="-XstartOnFirstThread -Xmx512m" version="1.5+"/>
    <jar href="lib/swt-macos-x86_64.jar"/>
</resources>

<resources os="Mac OS X" arch="x86">
    <j2se java-vm-args="-XstartOnFirstThread -Xmx512m" version="1.5+"/>
    <jar href="lib/swt-macos.jar"/>
</resources> 
```

如果我理解正确，这应该会导致在 Windows（取决于拱门）上只加载 swt-win32-x86.jar。但是当我在 windows 7 64 位上启动应用程序时，但使用 32 位 jvm 时，我收到以下错误： NativeSwing [1]：原因：java.lang.UnsatisfiedLinkError：无法加载 SWT 库。原因： NativeSwing[1]：java.library.path 中没有 swt-gtk-4234 NativeSwing[1]：java.library.path 中没有 swt-gtk NativeSwing[1]：无法加载库：C:\Users\ dolf.swt\lib\win32\x86\swt-gtk-4234.dll NativeSwing[1]：无法加载库：C:\Users\dolf.swt\lib\win32\x86\swt-gtk.dll

当然，在 Windows 上找不到 swt-gtk，它应该只在 Linux 上需要。如果我在 java 的临时 Internet 文件查看器下检查 java 控制面板中的资源，我确实看到 java webstart 已经下载了 swt-linux-x86.jar 和 swt-win32-x86.jar。显然，java webstart 正在下载错误的 jar 文件。

我希望有人知道为什么会出错。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T09:36:55.863

我发现了问题所在。

在 Netbeans 中，我在“库”下链接了 swt jar 文件。我对这些东西在 netbeans/java 中的工作方式了解有限（我不是从问题中推断出来的 java 开发人员），但我想这会导致所有链接的 swt 库都被下载，无论 launch.jnlp 指定什么. 因此，错误平台上的错误 jar 文件。

构建时需要做的是从netbeans中的库列表中EXCLUDE swt jars，然后在jnlp文件中指定资源。这样，webstart 将仅下载在适用资源标签中找到的 swt jar。

如果您还需要对它们进行签名，请将以下部分添加到您的 build.xml，确保在签名开始之前将 swt jar 文件复制到 dist/lib 目录，因此 netbeans 会自动对它们进行签名（每个 jar 在dist/lib 目录已正常签名）。

```
<target name="-post-jar">
    <copy todir="${jnlp.dest.dir}/lib/">
        <fileset dir="${build.dir}/../lib/">
            <filename name="swt*.jar" />
        </fileset>
    </copy>

</target> 
```

# javascript - 如何将 HTML 页面调用到 div 部分中的 jQuery 选项卡菜单，保留所有功能？

> ID：16065541
> 
> 赞同：0
> 
> 时间：2013-04-17T16:38:37.310
> 
> 标签：javascript, jquery, html, css

我是 JavaScript 新手，需要一些帮助来弄清楚如何将它们组合在一起。我需要将我的 JavaScript 图像循环 html 页面放在我的 jQuery 菜单标签页上。这是我的 jQuery 代码：

```
 <!doctype html>
    <html lang="en">
    <head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness /jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
    <link rel="stylesheet" href="/resources/demos/style.css" />
    <script>
    $(function() {
    $( "#tabs" ).tabs();
    });
    </script>
    </head>
    <body>
    <div id="tabs">
    <ul>
    <li><a href="#home">Home</a></li>
    <li><a href="#about-me">About me</a></li>
    <li><a href="#contact-us">Contact us</a></li>
    <li><a href="#gallery">Gallery</a></li>
    </ul>
    <div id="home">
    <p>A short paragraph about Overcoming Obstacles.</p>
    </div>
    <div id="about-me">
    <p>A short paragraph about me.Banner advertisement that uses a JavaScript function to change the image every few seconds using three images.</p>
    </div>
    <div id="contact-us">
    <p>My contact details.</p>
    </div>
    <div id="gallery">
    <p>This is my gallery.</p>
    </div>
    </div>
    </body>
    </html> 
```

我需要帮助的部分是关于我的页面。我用页面描述创建了图像循环，它可以工作。我需要做的是调用About_me.html（名为Brunson_About_me_rotate2.html）到jQuery 菜单标签页的所有功能。但我只知道如何使用 HTML、CSS、JavaScript、jQuery，因为我只知道如何做。它不能用 Ajax、ASP、PHP 或 SPRY 来完成，因为我不知道如何使用它们，这对我来说已经够头疼的了。它必须与客户端一起工作，而不是服务器端。此外，这将进入 Dreamweaver 页面。

我试图将带有文本的循环代码放入选项卡菜单代码的关于我们部分，但这不起作用。或者，我尝试过：

```
 <? include("./Brunson_About_us_rotate2.html");?> 
```

（因为这就是文件名）试图在 jQuery 菜单页面 About us 中调用循环，但这也不起作用；我得到的只是一个空白页。我对这件事很陌生，我几乎不知道如何做到这一点；我花了 5 天时间才把这么多东西放在一起。我什至不知道有什么选择可以让它发挥作用。有人可以帮我弄清楚该怎么做吗？单击页面时，我只需要这两个页面正常工作即可。感谢您的时间。

在获得了几个选项之后，顺便感谢你们的帮助，但没有成功，我一直在研究代码，看看我能用它做什么。我正在发布代码，就像现在一样，几乎是它上传到网络后的样子。这是我到目前为止所拥有的：

```
 <!doctype html>
    <html lang="en">
    <head>
    <meta charset="utf-8" />
    <title>Brunson - Home</title>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness  /jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
    <link rel="stylesheet" href="/resources/demos/style.css" />
    <script>
    $(function() {
    $( "#tabs" ).tabs();
    });
    </script>
    </head>
    <body>
    <div id="tabs">
    <ul>
    <li><a href="#home">Home</a></li>
    <li><a href="#about">About</a></li>
    <li><a href="#contact">Contact</a></li>
    <li><a href="#gallery">Gallery</a></li>
    </ul>
    <div id="home">
    <p><h2>What is a Life Coach?</h2></p>
    <p>A life coach is someone who is an advocate for you in reaching a higher level of understanding<br /> 
    and being the best person you can be in whatever area of your life you decide you need improvement in.</p> 
    <p><h2>What does a Life Coach do?</h2></p>
    <p>A Life Coach assists you in identifying those areas in your life that you would like to change.<br /> 
    Once those areas are determined, the process of creating the life you truly can begin.</p>
    </div>
    <div id="about">
    <script type="text/javascript">
    var pictureArchive= ['image1.jpg','image2.jpg','image3.jpg'];

    window.onload=function() {
    var o=document.createElement('img');
    o.setAttribute('id', 'image');
    o.setAttribute('src', pictureArchive[0]);
    o.setAttribute('alt', '');
    document.body.appendChild(o);
    rotate(pictureArchive.length);
    }

    function rotate(idx) {
    if(idx>=pictureArchive.length) {
    idx=0;
        }
    document.getElementById('image').src=pictureArchive[idx++];
    timerID=setTimeout('rotate('+idx+')', 4000);
    }
    </script>
    <script>
    $(function() {
    $( "#tabs" ).tabs();
    });
    </script>
    <p>I became a Life Coach so I could reach more people and make changes in more lives than I was 
    able to do when I limited myself to my Alternative Therapies Business. By choosing to take the 
    limits I placed on myself off, I have created abundance in my life and create more value than I 
    was able to do before. The school I chose to get my Life Coach Certification from was QSCA because 
    they have the same beliefs that I do. Living the Universal Laws, living my life with integrity, 
    being the best that I can be, and ascending to higher levels of awareness and consciousness allows 
    me to help others overcome negative behaviors and limited thinking patterns. Helping others this 
    way allows me to create a reality that is past the negativeness we have been living with.</p>
    </div>
    <div id="contact">
    <p>My contact details. Form asking for name, email address, and a message. The form will have an unselected radio button array that includes a yes or no response. All fields required. Validation of all fields is a must. Email address must be present and match</p>
    <p>the criteria for a legitimate e-mail address (using regular expressions). The submit button must call a validation routine; and when the user has filled in all information correctly, the page will display a thank you message and clear the form. The ehank you message can be s separate page, or it can be displayed on the same page.</p>
    <p>Are you ready to make a change in your life right now? Yes No</p>
    </div>
    <div id="gallery">
    <p>Once you make a choice to make a change, old limiting beliefs seem to just fade away.</p>
    <p>As nature abhors a vacuum, unlimited beliefs seem to jump to the fore.</p>
    <p>Where once there was nothing but limits, suddenly everything is possible.</p>
    </div>
    </div>
    </body>
    </html> 
```

你给我的代码我得到的是一个空白页面，一个带有一个框的页面，它的窗口上下左右滚动，并且有一条错误消息，说 IE 无法打开网页，最后一个代码在浏览器页面上给了我那个代码。所以我开始尝试使用代码，看看我能做什么。我几乎有我需要的东西。是的，我确实意识到一些代码没有正确放置，但是当我正确放置它时，图像根本没有出现在任何页面上。

这种方式的唯一问题是图像在所有页面上；他们只是应该在关于页面上。我将在“联系”页面上放置一个联系表单，并在图库页面上放置 3 个淡出、移动和淡入的不同图像。最终，当我在记事本中完成编码并在浏览器中检查以确保它正常工作后，这个包含所有这些内容的“页面”将进入 Dreamweaver 中，该页面将附加美学、外部链接、时钟和然后上传。那么，有人对我接下来应该尝试什么有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:43:36.650

您的问题是，您使 php - 标签不正确。

```
<?php include("../Brunson_About_us_rotate2.html"); ?> 
```

而且您还必须放两点才能到达父目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T20:15:20.643

Ajax 似乎是一个非常简单的解决方案。
jQuery 已经拥有自己易于使用的 ajax 函数。
其中之一是`.load()` [http://api.jquery.com/load/](http://api.jquery.com/load/)

```
$('#about-me').load('../Brunson_About_us_rotate2.html'); 
```

另一种选择是`iframe`

```
<div id="about-me">
    <iframe src="../Brunson_About_us_rotate2.html"></iframe>
</div> 
```

[http://www.w3schools.com/tags/tag_iframe.asp](http://www.w3schools.com/tags/tag_iframe.asp)

# precompiled-headers - 用于 xcode 的 Gyp 预编译头文件

> ID：16065543
> 
> 赞同：3
> 
> 时间：2013-04-17T16:38:43.093
> 
> 标签：precompiled-headers, gyp

如何使用 gyp 为 xcode 指定预编译头文件，特别是使用 clang 的 xcode 4.6。

我只看到视觉工作室选项。

```
'msvs_precompiled_header': 'stdio.h',
'msvs_precompiled_source': 'precomp.c', 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T01:10:51.657

Gyp 很不错，但文档很糟糕。

万一有人遇到需要它的答案是：

```
'xcode_settings': {
  'GCC_PREFIX_HEADER': 'path/from/gyp/file/to/header.h',
  'GCC_PRECOMPILE_PREFIX_HEADER': 'YES',
}, 
```

另外值得注意的是，您可以在 xcode_settings 块中设置此页面中的几乎所有内容

[Xcode 构建设置参考](http://developer.apple.com/library/mac/#documentation/DeveloperTools/Reference/XcodeBuildSettingRef/1-Build_Setting_Reference/build_setting_ref.html)

# java - 触发 Http 请求的按钮的策略

> ID：16065544
> 
> 赞同：0
> 
> 时间：2013-04-17T16:38:49.670
> 
> 标签：java, android, intentservice

如果用户喜欢或不喜欢该特定资源，我有一个 Like 和 Dislike`Button`来`IntentService`更新服务器上资源的状态。no 避免通过单击任何按钮过多向服务器发送过多请求。我应该怎么办 ？

我想到的是在（数据库）中本地更新资源并在队列中附加一个意图以在 150 毫秒后触发服务。如果有匹配的意图，我会将其从队列中删除。还有什么可做的吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:41:35.983

您可以在 SharedPreferences 对象中保存带有最后一个事件时间戳的首选项。如果自您发送最后一个事件以来没有足够的时间过去，请不要尝试进行另一个呼叫。您按下按钮的方法将执行以下操作：

*   从 SharedPreferences 获取最后一个事件发送的时间戳
*   如果时间不够，什么也不做
*   否则拨打电话并更新 SharedPreferences 中的时间戳

# javascript - 从 Servlet 到 Jquery 的数组数组

> ID：16065553
> 
> 赞同：1
> 
> 时间：2013-04-17T16:39:18.920
> 
> 标签：javascript, jquery, servlets, web-applications, gson

我目前正在尝试让一个 servlet 向我的 javascript jquery 代码返回一个数组数组。我遇到的问题是，如果我想在 jQuery 中有一个数组数组，我不得不说

```
var derpArray[0] = new array(); 
```

这带来了一个问题，因为我可能不知道我将从服务器返回多少行。目前我正试图让我的 servlet 返回一个数组数组，分配给一个 javascript 变量，然后根据这些值创建一个表。任何提示将不胜感激。

下面是我的代码：

Java 小服务程序：

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

    String[][] sourceFiles = null;
    System.out.println("PING");

    try{
        sourceFiles = WebAppDB2Connector.getTopRows(5);
    }
    catch (Exception e)
    {
        SimpleLogger.logInfo("Error retrieving data..." + e.getMessage());
    }

    Gson gson = new Gson();
    String json = gson.toJson(sourceFiles);
    response.setContentType("application/json");
    response.setCharacterEncoding("UTF-8");
    response.getWriter().write(json);

    System.out.println("end");

} 
```

JavaScript：

window.onload = 加载；

函数加载（）{

```
$.getJSON("http://localhost:9194/MyWebApplication/SourceFile", function(sourceFileData) {

var table = $("<table></table>");
for (var i = 0; i < sourceFileData.length; i++) 
{
    var line = $("<tr></tr>");
    for (var j = 0; j < sourceFileData[i].length; j++)
    {
        line.append( $(cell).html('<td>' + sourceFileData[i][j] + '</td>'));
    }
    table.append(line);
}

table.appendTo( $("#sourceFileTable")); 
```

});

```
document.getElementById("test").innerHTML = "LOL"; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:42:33.517

**OP 添加 servlet 代码后**编辑。****

 **我怀疑你的 servlet 会起作用。如果是这样，那将是[巧合](http://pragprog.com/the-pragmatic-programmer/extracts/coincidence)。您可能需要某种 JSON 库来与您的 servlet 一起使用。[json.org/](http://json.org/)提供了一个简单的 JSON 库，它可能足以满足您的需求。对于更高级的功能，您可以查看[Jackson](http://jackson.codehaus.org/)或[JSONSimple](http://code.google.com/p/json-simple/)等库。

在前端，您还需要将逻辑作为回调添加到`get()`函数中，因为它是异步的（使用[getJSON](http://api.jquery.com/jQuery.getJSON/)可能会更好，因为您计划发回 JSON）。您需要增加内部循环中“sourceFileData”的索引，而不是将其硬编码为 0：

```
 $.getJSON("http://localhost:13839/MyWebApplication/SourceFile", function(sourceFileData) {

    var table = $("<table></table>");
    for (var i = 0; i < sourceFileData.length; i++) 
    {
        var line = $("<tr></tr>");
        for (var j = 0; j < sourceFileData[i].length; j++)
        {
            line.append( $(cell).html('<td> + sourceFileData[i][j] + '</td>'));
        }
        table.append(line);
    }

    table.appendTo( $("#sourceFileTable"));
}); 
```**

# asp.net-mvc - 即使我已登录，HtppWebRequest 也会将我重定向到登录

> ID：16065560
> 
> 赞同：0
> 
> 时间：2013-04-17T16:39:33.580
> 
> 标签：asp.net-mvc, asp.net-mvc-4, httpwebrequest, forms-authentication

我正在尝试做的事情：

1.  使用普通登录方法/页面登录到 Forms Auth MVC 网站
2.  在我登录并在主页上后，我想向控制器发送一个 ajax 请求-> 使用 HttpWebRequest 对象请求网页的操作。

问题是我得到的响应是登录页面。这意味着 HttpWebRequest 不尊重我实际登录到该网站的事实。

问题是我需要读取系统上的本地 cookie 并将它们与我的请求一起发送。下面的 cookie 容器是空的。所以，我所要求的只是一种用我机器上的任何 cookie 填充 CookieContainer 的方法。

```
 CookieContainer cookies = new CookieContainer();
        String URL = "http://mysite.com/pages/fakepage.aspx";
        HttpWebRequest webRequest = WebRequest.Create(URL) as HttpWebRequest;
        webRequest.AllowAutoRedirect = true;
        webRequest.CookieContainer = cookies;
        StreamReader responseReader = new StreamReader(webRequest.GetResponse().GetResponseStream());
        string responseData = responseReader.ReadToEnd(); 
```

上面的 responseData 包含登录页面:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:41:36.703

对于遇到相同问题的任何人，这是该问题的答案。如果您在下面注意到，我只是从 Request 对象中读取 cookie 并用它填充我的 CookieContainer。这可以解决所有问题！

```
 CookieContainer cookies = new CookieContainer();
    webRequest.CookieContainer = cookies;
    for(int i=0; i<Request.Cookies.Count; i++)
        webRequest.CookieContainer.Add(new Cookie(Request.Cookies[i].Name, Request.Cookies[i].Value, Request.Cookies[i].Path, FormsAuthentication.CookieDomain)); 
```

# java - 使用访问器/获取器可以更快吗？

> ID：16065562
> 
> 赞同：0
> 
> 时间：2013-04-17T16:39:37.727
> 
> 标签：java, performance, jvm-hotspot

**背景：**我打算将[我编写的库](https://github.com/hbf/miniball)从 C++ 移植到 Java。该代码处理大小为*n*的*d*维点列表，并且需要计算标量积等。我想让我的代码独立于点的存储格式，并为此目的引入了一个接口，

```
public interface PointSetAccessor
{
  float coord(int p, int c);
} 
```

这允许我获得第*p*个点 (0 ≤ *p* < *n ) 的第**c*个坐标 (0 ≤ *c* < *d* ) 。

 *****问题：**`points[p][c]`由于代码必须非常快，我想知道这`points`是否会降低性能，这与直接*访问*模式（*如*

令人惊讶的是，情况正好相反：代码（见下文*）*通过`PointSetAccessor`. （我使用它进行`time java -server -XX:+AggressiveOpts -cp bin Speedo`了测量，前者大约 14 秒，后者大约 11 秒。）

**问题：**知道为什么会这样吗？似乎 Hotspot 决定更积极地优化，或者在后一个版本中更自由地这样做？

**代码**（计算无意义）：

```
public class Speedo
{
  public interface PointSetAccessor
  {
    float coord(int p, int c);
  }

  public static final class ArrayPointSetAccessor implements PointSetAccessor
  {
    private final float[][] array;

    public ArrayPointSetAccessor(float[][] array)
    {
      this.array = array;
    }

    public float coord(int point, int dim)
    {
      return array[point][dim];
    }
  }

  public static void main(String[] args)
  {
    final int n = 50000;
    final int d = 10;

    // Generate n points in dimension d
    final java.util.Random r = new java.util.Random(314);
    final float[][] a = new float[n][d];
    for (int i = 0; i < n; ++i)
      for (int j = 0; j < d; ++j)
        a[i][j] = r.nextFloat();

    float result = 0.0f;
    if (true)
    {
      // Direct version
      for (int i = 0; i < n; i++)
        for (int j = i + 1; j < n; ++j)
        {
          float prod = 0.0f;
          for (int k = 0; k < d; ++k)
            prod += a[i][k] * a[j][k];
          result += prod;
        }
    }
    else
    {
      // Accessor-based version
      final PointSetAccessor ac = new ArrayPointSetAccessor(a);
      for (int i = 0; i < n; i++)
        for (int j = i + 1; j < n; ++j)
        {
          result += product(ac, d, i, j);
        }
    }
    System.out.println("result = " + result);
  }

  private final static float product(PointSetAccessor ac, int d, int i, int j)
  {
    float prod = 0.0f;
    for (int k = 0; k < d; ++k)
      prod += ac.coord(i, k) * ac.coord(j, k);
    return prod;
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T16:43:19.817

如此短的方法，如果它们很热（默认设置调用超过 10,000 次），将被热点内联，因此您应该不会注意到性能差异（您测量性能的方式忽略了许多影响，例如预热时间例如，这可能导致错误的结果）。

当运行您的代码并要求热点显示内联`-server -XX:+UnlockDiagnosticVMOptions -XX:+PrintCompilation -XX:+PrintInlining`的`coord`内容`product`时（

```
 76    1 %           javaapplication27.Speedo::main @ -2 (163 bytes)   made not entrant
 77    6             javaapplication27.Speedo$ArrayPointSetAccessor::coord (9 bytes)
 78    7             javaapplication27.Speedo::product (45 bytes)
                        @ 18   javaapplication27.Speedo$ArrayPointSetAccessor::coord (9 bytes)   inline (hot)
                        @ 27   javaapplication27.Speedo$ArrayPointSetAccessor::coord (9 bytes)   inline (hot)
 80    2 %           javaapplication27.Speedo::main @ 101 (163 bytes)
                        @ 118   javaapplication27.Speedo::product (45 bytes)   inline (hot)
                          @ 18   javaapplication27.Speedo$ArrayPointSetAccessor::coord (9 bytes)   inline (hot)
                          @ 27   javaapplication27.Speedo$ArrayPointSetAccessor::coord (9 bytes)   inline (hot) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T17:05:16.463

如果你真的担心性能，你应该调查一下摆脱二维数组（用一维数组代替它）会给你带来什么。

java 中的多维数组比大多数其他语言更昂贵，因为 java 将它们实现为数组数组（即 N 维，任何小于 N 的维都是对下一维的引用数组）。

对于您的 float[50000][10]，这意味着有一个包含 50000 个对 float[10] 的引用的数组。因为每个数组也是一个对象（带有几个字节的标题）。由于最后一个维度非常小（10），因此在内存使用方面开销很大（相反的情况下 float[10][50000] 的内存占用要小得多）。

尝试这样的内存布局：

```
public static final class ArrayPointSetAccessor implements PointSetAccessor {
    private final int dimSize;
    private final float[] array;

    public ArrayPointSetAccessor(float[] array, int dimSize) {
        this.dimSize = dimSize;
        this.array = array;
    }

    public float coord(int point, int dim) {
        return array[dim * dimSize + point];
    }
} 
```

我希望访问器在不平凡的情况下会花费一点性能（例如，当接口具有多个实现时）。但是无论如何都要使用访问器接口 - 灵活性和可维护性通常比性能的几个百分点更值得。***

# php - 使用三个表和一些空值的 SQL 连接查询

> ID：16065565
> 
> 赞同：1
> 
> 时间：2013-04-17T16:39:55.843
> 
> 标签：php, mysql

我在使用 PHP 查询的 mySQL 数据库中有三个表：

**球员**

```
player_id | player_name
-----------------------
1           Tom
2           Dick
3           Harry 
```

**游戏**

```
game_id | game_name
-------------------
1         Tennis
2         Cricket
3         Rugby 
```

**gamePlayerRel**

```
game_id | player_id
-------------------
1         2
1         3
2         3
3         2
3         3 
```

我想要一个查询，它将返回玩家 ID 和姓名以及他们玩的游戏。如果他们不玩游戏——就像 Tom (1) 的情况——那么我想要 id 和 name 以及 a `null`or`0`值。

**期望的结果**

```
player_id | player_name | game_id | game_name
---------------------------------------------
1           Tom           null      null
2           Dick          1         Tennis
2           Dick          3         Rugby
3           Harry         1         Tennis
3           Harry         2         Cricket
3           Harry         3         Rugby 
```

我能得到的最接近的是以下查询：

```
SELECT players.player_id, players.player_name, gamePlayerRel.game_id, games.game_name
FROM players
INNER JOIN gamePlayerRel
INNER JOIN games
ON players.player_id = gamePlayerRel.player_id
AND gamePlayerRel.game_id=games.game_id 
```

这很接近，只是它不返回分配给他们游戏的玩家的数据。在上面的例子中，结果是我想要的，除了 Tom (1) 和他的`null`值被排除在外。

我是这方面的超级菜鸟，所以如果我从错误的角度来看它，请说出来，如果你能提出一个查询，它会做我想做的事。

提前感谢您的任何帮助和建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T17:39:00.847

要返回您所展示的结果集，您实际上需要执行两个外部连接

```
SELECT players.player_id, players.player_name, gamePlayerRel.game_id, games.game_name
FROM players
    LEFT OUTER JOIN gamePlayerRel ON players.player_id = gamePlayerRel.player_id
    LEFT OUTER JOIN games ON gamePlayerRel.game_id=games.game_id 
```

在您的情况下，这应该可以正常工作，但是，我真正认为您正在尝试做的是游戏和 gamePlayerRel 之间的内部联接，然后是该虚拟表和玩家表之间的左外部联接。您可以通过以下方式完成此操作：

```
SELECT players.player_id, players.player_name, playerGames.game_id,      playerGames.game_name
FROM players
    LEFT OUTER JOIN (Select gameplayerRel.player_id, games.game_id, games.game_name  from games inner join gamePlayerRel on games.game_id = gamePlayerRel.game_id) playerGames
       on players.player_id = playerGames.player_id 
```

在您的情况下，您永远不需要这种替代语法，但有时事情会变得一团糟，因为两个左外连接方式在逻辑上并不完全等效。

这是一个显示查询[结果](http://sqlfiddle.com/#!8/da71e/2)的SQL Fiddle

我知道您使用的是 mysql，但这篇文章很好地解释了连接的细微差别，但它是为 MSSQL 编写的，尽管它应该同样适用于您。 [http://weblogs.sqlteam.com/jeffs/archive/2007/10/11/mixing-inner-outer-joins-sql.aspx](http://weblogs.sqlteam.com/jeffs/archive/2007/10/11/mixing-inner-outer-joins-sql.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T16:42:23.617

这应该可以解决问题

```
SELECT players.player_id, players.player_name, gamePlayerRel.game_id, games.game_name
FROM players
    INNER JOIN gamePlayerRel ON players.player_id = gamePlayerRel.player_id
    LEFT OUTER JOIN games ON gamePlayerRel.game_id=games.game_id 
```

您需要单独加入每张桌子，还需要`LEFT OUTER JOIN`为您的游戏桌使用 a。这将为 player/gamePlayerRel 表中的每场比赛至少引入一条记录。如果没有匹配，您将返回一个`NULL`值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T10:27:50.297

在 SO 的乐于助人的人向正确的方向轻推之后，我得到了一个查询，尽管我仍然不能 100% 确定它*为什么*会起作用。

```
SELECT players.player_id, players.player_name, gamePlayerRel.game_id, games.game_name
FROM players
INNER JOIN gamePlayerRel ON players.player_id = gamePlayerRel.player_id
LEFT OUTER JOIN games ON gamePlayerRel.game_id=games.game_id 
```

感谢那些评论的人。这个网站再次证明了我所发现的最有用的网站之一：）

# maven - 使用 maven 批量更新现有 jar 的 manifest.mf

> ID：16065570
> 
> 赞同：2
> 
> 时间：2013-04-17T16:40:09.010
> 
> 标签：maven, ant

我想在我的战争项目中的几个现有 jar 文件的 MANIFEST.MF 中添加一个自定义键/值对（这些 jar 不是项目依赖项）。

我已经可以使用 ant 任务打包/重新打包这些罐子了。

我阅读了“清单”任务，如何将该任务应用于文件集（如果有办法）？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-17T10:37:33.500

这是我在 StackOverflow 上的第一个答案。希望它适合你:)

我已经这样做了：

```
<target name="xxx.modifyManifests">
    <echo message="Modifying jar manifests to add trusted-library" />
    <apply executable="jar">
        <arg value="umf" />
        <arg line="${xxx.resources}/manifest/custom_manifest.mf" />
        <srcfile />
        <fileset dir="${xxx.target}/applets" includes="*.jar" />
    </apply>
</target> 
```

该调用是一个使用 maven-antrun-plugin 的简单调用：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-antrun-plugin</artifactId>
    <executions>
        <execution>
            <id>xxx.modifyManifests</id>
            <phase>compile</phase>
            <configuration>
                <target>
                    <property environment="windows" />
                    <property name="xxx.resources"
                        value="${project.build.directory}/../src/main/resources" />
                    <property name="xxx.target"
                        value="${project.build.directory}/${project.artifactId}-${project.version}" />
                    <ant antfile="${basedir}/build.xml">
                        <target name="xxx.modifyManifests" />
                    </ant>
                </target>
            </configuration>
            <goals>
                <goal>run</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

而我的 custom_manifest.mf 是这样的：

```
Trusted-Only: true
Trusted-Library: true 
```

# django - 基本 django 应用程序 - 应用程序设计问题

> ID：16065578
> 
> 赞同：0
> 
> 时间：2013-04-17T16:40:22.073
> 
> 标签：django

为了学习 Django，我制作了一个非常基本的应用程序，它执行以下操作：

1.  获取用户的登录信息（检查数据库中的 id 密码）。
2.  如果用户存在且密码正确，则为用户提供插入、删除或更新的选项。
3.  如果插入，用户可以将条目插入到公共表中。
4.  类似的删除或更新。

我正在巡航，但我只是卡住了。

我的登录页面是`/index/`。
插入/删除/更新选项位于`/application/`.
现在接下来，页面根据插入/删除/更新显示在`/application/action/`

现在的问题是，完成一次插入后，我想返回`/application`进行下一步操作。

但如果我这样做，我会收到此错误

`"Key 'userid' not found in <QueryDict: {}>"`

因此，视图需要`/application/`request.POST 中的用户 ID 和密码。

如何在不使用外部用户登录模块的情况下解决这个问题。我只是想要一个非常基本的登录系统来学习。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:45:08.163

Django 内置了用户[身份验证](https://docs.djangoproject.com/en/dev/topics/auth/)。我认为它不是外部的，因为它包含在 django.contrib 中。

如果您使用内置的用户身份验证和用户模型，则不必将 传递`userid`给每个视图。Django 将自动从会话中检索登录用户，并将其作为`request`对象的属性提供。

因此，使用内置用户和身份验证，登录用户后，您可以访问该用户

`request.user`

# javascript - 从数组中生成一个随机单词，然后将其打印到控制台登录 javascript 中的函数

> ID：16065579
> 
> 赞同：3
> 
> 时间：2013-04-17T16:40:22.980
> 
> 标签：javascript, arrays, function, console

我正在用javascript创建刽子手，我（我认为）成功地从函数中的数组生成了一个随机词，以检查它是否有效我试图将生成的词打印到控制台，但它似乎不是在这里工作是我的函数代码

```
 var word = function() //Random word is genereated from an array for the user to guess
{
  GameWordArray = new Array(7);
  GameWordArray[0] = "monitor";
  GameWordArray[1] = "program";
  GameWordArray[2] = "application";
  GameWordArray[3] = "keyboard";
  GameWordArray[4] = "javascript";
  GameWordArray[5] = "gaming";
  GameWordArray[6] = "network";
  randno = Math.floor(Math.random() * GameWordArray.length);
  document.write(GameWordArray[randno]);
  console.log(word);
} 
```

提前致谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T16:43:43.017

尝试以这种方式使用它：

```
var getRandomWord = (function () {
  var gameWordArray = [];
  gameWordArray.push("monitor");
  gameWordArray.push("program");
  gameWordArray.push("application");
  gameWordArray.push("keyboard");
  gameWordArray.push("javascript");
  gameWordArray.push("gaming");
  gameWordArray.push("network");
  return function () {
    var randNum, finalWord;
    randNum = Math.floor(Math.random() * gameWordArray.length);
    finalWord = gameWordArray[randNum];
    return finalWord;
  };
})(); 
```

**演示：http:** [//jsfiddle.net/bCEFA/1/](http://jsfiddle.net/bCEFA/1/)

与其声明一个具有预定义长度的数组，不如声明一个空数组并在其末尾添加值（使用`.push()`）。你也可以像这样声明数组：

```
var gameWordArray = ["monitor", "program", ...]; 
```

您正在尝试打印`word`（我将其重命名为`getRandomWord`），这是/是一个函数。您可能打算使用`console.log(gameWordArray[randno])`，它应该可以工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T16:47:28.070

这是关于[jsfiddle的示例](http://jsfiddle.net/Xotic750/k6Qxn/)

```
var words = ["monitor", "program", "application", "keyboard", "javascript", "gaming", "network"];

var word = words[Math.floor(Math.random() * words.length)];

console.log(word);

document.getElementById("word").textContent = word; 
```

并让它直接适合您提供的代码：

```
var getRandomWord = function () {
    return words[Math.floor(Math.random() * words.length)];
}; 
```

# count - 两个不同列中具有条件的数据的条件计数公式

> ID：16065580
> 
> 赞同：0
> 
> 时间：2013-04-17T16:40:25.953
> 
> 标签：count, countif

我的电子表格记录了每个客户遇到的情况以及他们在访问当天看到的员工。还有两列是他们是在同一天付款还是在他们的帐户余额上付款。我需要一个公式，不仅要计算员工看到的客户数量，还要计算当天付款的客户。

B 列的下拉列表中列出了员工的姓名缩写，因此我需要每个员工的公式。F 列是当日付款的列。

如果有帮助，每一行都会收集一系列信息：客户姓氏和名字、电话号码、帮助他们的员工、当天付款、账户付款余额和付款方式。我试图计算有多少客户进来并在同一天付款。出于佣金原因，我需要由员工将其分开。

我努力了：

```
=COUNTIF('1'!B:B,"BK") 
```

B 是员工姓名所在的列，`BK`是员工之一。这个公式计算任何行，`BK`我想要它做的只是计算“同一天”付款的行（这是 F 列）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-24T02:04:48.627

假设这是 Excel，因为您需要为许多员工提供答案，所以我强烈推荐使用数据透视表，因此您的列在 Row1 中标记`Employee`为 ROWS，而 VALUES 的“同一天”计数。

但是，如果您更喜欢公式，假设 ColumnF 包含`same day`表示同一天付款的员工示例`BK`：

```
=COUNTIFS(B:B,"BK",F:F,"same day") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-02T19:50:57.700

如果您只需要计算 F 列中有值（大于 0）的所有员工（因此 B 列不为空白），则可以使用：

```
=COUNTIFS($B:$B,"<>"&"",$F:$F,">"&0) 
```

或者以下将计算 F 列中所有非空白的单元格：

```
=COUNTIF($F:$F,"<>"&"") 
```

# api - Box API 和 OAuth

> ID：16065584
> 
> 赞同：-2
> 
> 时间：2013-04-17T16:40:31.613
> 
> 标签：api, oauth, box-api

我的问题是我们有一个桌面应用程序（即不是基于 Web 的），它需要与盒子 API 通信，据我所知，我可以告诉 OAuth 哪个盒子用于授权，这很难让这种情况发挥作用。

有没有人有一些示例 C# 代码来展示它是如何完成的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:25:27.760

这就是我如何做到这一点

1.  使用 WebBrowser 控件创建表单
2.  使用该表单，导航到 TokenProvider 上的“GetAuthorizationUrl”方法提供的 URL。由于我需要提供重定向 URL，因此我使用了与我们公司相关的网站。该网站实际上不会“处理”此重定向请求，但这没关系。
3.  输入我的盒子用户 ID/密码并允许访问后，浏览器控件将重定向到指定的 URL。嵌入在该 URL 中的是临时访问令牌。我在 WebBrowser 上有一个“文档完成”事件，所以我查看了 URL 是否包含字符串“code=”。
4.  解析 URL 以获取临时代码，然后我使用 TokenProvider 返回 OAuthToken。
5.  从 OAuthToken 我可以使用 [box-csharp-sdk-v2] 创建一个处理所有 Box API 调用的 BoxManager 对象。

老实说，它有点笨拙，但似乎有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-06T06:25:07.323

使用 Box API For Windows U 可以使用 JWT 身份验证，它基于 ClientId、Client Secret、Private key、Public Key 和 Enterprise key 生成令牌。

此令牌将提供在用户基本有两种类型的用户 1.Admin 2.App 用户

所以不需要登录参考文档： [https ://box-content.readme.io/docs/app-auth](https://box-content.readme.io/docs/app-auth)

Box Windows SDK [https://github.com/box/box-windows-sdk-v2](https://github.com/box/box-windows-sdk-v2)

# php - uploadify 上传功能响应应该如何

> ID：16065587
> 
> 赞同：0
> 
> 时间：2013-04-17T16:40:47.387
> 
> 标签：php, symfony, response, uploadify

这是我的uploadify onUploadSuccess 句柄：

```
'onUploadSuccess' : function(file,data,response) {
        ...
 }, 
```

我需要从上传功能将一些数据传递给这个功能，例如新的更新文件名。我在上传功能中的响应应该如何？我想传递 data.newName 字段并像这样得到它：

```
'onUploadSuccess' : function(file,data,response) {
        alert(data.newName);
 }, 
```

我在 php 端使用 symfony2。

# javascript - 将文本转换为表情符号 JS

> ID：16065588
> 
> 赞同：0
> 
> 时间：2013-04-17T16:40:50.913
> 
> 标签：javascript, chat, emoticons

我找到了这个脚本：（查找注释）

```
(function($){   
    $.fn.emotions = function(options){
        $this = $(this);
        var opts = $.extend({}, $.fn.emotions.defaults, options);
        return $this.each(function(i,obj){
            var o = $.meta ? $.extend({}, opts, $this.data()) : opts;                       
            var x = $(obj);
            // Entites Encode 
            var encoded = [];
            for(i=0; i<o.s.length; i++){
                encoded[i] = String(o.s[i]).replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;');
            }
            for(j=0; j<o.s.length; j++){
                var repls = x.html();
                if(repls.indexOf(o.s[j]) || repls.indexOf(encoded[j])){
                    var imgr = o.a+o.b[j]+"."+o.c;          
                    var rstr = "<img src='"+imgr+"' border='0' />"; 
                    x.html(repls.replace(o.s[j],rstr));
                    x.html(repls.replace(encoded[j],rstr));
                }
            }
        });
    }   
    // Defaults
    $.fn.emotions.defaults = {
        a : "images/emotions/",         // Emotions folder
        b : new Array("angel","colonthree","confused","cry","devil","frown","gasp","glasses","grin","grumpy","heart","kiki","kiss","pacman","smile","squint","sunglasses","tongue","unsure","upset","wink"),            // Emotions Type
        s : new Array("o:)",":3","o.O",":'(","3:)",":(",":O","8)",":D",">:(","<3","^_^",":*",":v",":)","-_-","8|",":p",":/",">:O",";)"),
        c : "gif"                   // Emotions Image format
    };
})(jQuery);

// Notes
// a - icon folder
// b - emotions name array
// c - image format
// x - current selector
// d - type of selector
// o - options 
```

该脚本将文本转换为情感。例如，`:)`=>![笑脸](https://i.stack.imgur.com/TPNsS.png)

当我这样调用函数时：

```
$("#chat").emotions(); 
```

一切正常，并`:)`变成：

```
<img src="images/emotions/smile.png" border="0" alt=""> 
```

但是当我像这样调用函数时：

```
$("#chat .chatText").emotions(); 
```

`:)`变成：

```
<img src="images&lt;img src='images&lt;img src='images&lt;img src='images&lt;img src='images&lt;img src='images&lt;img src='images&lt;img src='images/emotions&lt;img src='images/emotions/snowman.png' border='0' alt='' /&gt;.png' border='0' alt='' /&gt;emotions&lt;img src='images/emotions/watermelon.png' border='0' alt='' /&gt;.png' border='0' alt='' /&gt;emotions/can.png' border='0' alt='' /&gt;emotions/liquor.png' border='0' alt='' /&gt;emotions/blowkiss.png' border='0' alt='' /&gt;emotions&lt;img src='images/emotions/qq.png' border='0' alt='' /&gt;.png' border='0' alt='' /&gt;emotions&lt;img src='images/emotions/beauty.png' border='0' alt='' /&gt;.png' border='0' alt='' /&gt;emotions/smile.png" border="0" alt=""> 
```

我的 html 看起来像这样：

```
<div id="chat">
    <div class="message">
        <p>...</p>
        <p class="chatText">
            ...
        </p>
    </div>
    <div class="message">
        <p>...</p>
        <p class="chatText">
            ...
        </p>
    </div>
</div> 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:20:39.687

当我在[jsfiddle中尝试时对我有用](http://jsfiddle.net/Xotic750/BRAkE/)

```
<div id="chat">
    <div class="message">
        <p>...</p>
        <p class="chatText">
            ... :)
        </p>
    </div>
    <div class="message">
        <p>...</p>
        <p class="chatText">
            ... :)
        </p>
    </div>
</div>

(function($){   
    $.fn.emotions = function(options){
        $this = $(this);
        var opts = $.extend({}, $.fn.emotions.defaults, options);
        return $this.each(function(i,obj){
            var o = $.meta ? $.extend({}, opts, $this.data()) : opts;                       
            var x = $(obj);
            // Entites Encode 
            var encoded = [];
            for(i=0; i<o.s.length; i++){
                encoded[i] = String(o.s[i]).replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;');
            }
            for(j=0; j<o.s.length; j++){
                var repls = x.html();
                if(repls.indexOf(o.s[j]) || repls.indexOf(encoded[j])){
                    var imgr = o.a+o.b[j]+"."+o.c;          
                    var rstr = "<img src='"+imgr+"' border='0' />"; 
                    x.html(repls.replace(o.s[j],rstr));
                    x.html(repls.replace(encoded[j],rstr));
                }
            }
        });
    }   
    // Defaults
    $.fn.emotions.defaults = {
        a : "http://www.sherv.net/cm/emo/laughing/",         // Emotions folder
        b : ["crying-laughter-smiley-emoticon"],            // Emotions Type
        s : [":)"],
        c : "gif"                   // Emotions Image format
    };
})(jQuery);

// Notes
// a - icon folder
// b - emotions name array
// c - image format
// x - current selector
// d - type of selector
// o - options 

$("#chat .chatText").emotions(); 
```

# ssh - Tortoisesvn 不允许对存储库进行任何 SVN 操作

> ID：16065590
> 
> 赞同：1
> 
> 时间：2013-04-17T16:40:54.167
> 
> 标签：ssh, tortoisesvn

我在 Windows 7 机器上安装了 TortoiseSVN 1.6.17 64 位。我也在 Cygwin 下运行 subversion，即配置为使用 SSH 客户端乌龟。我能够从 Cygwin 命令行（例如提交、日志）执行 SVN 操作，那里的一切似乎都很正常。

当我尝试使用带有错误的乌龟时，尝试更新、记录、提交等失败...

> 提交失败（详细信息如下）：为了更好地调试 SSH 连接问题，请从 Subversion 配置文件的 [tunnels] 部分中的 'ssh' 中删除 -q 选项。网络连接意外关闭

我试图`-q`从 ssh 命令中删除我能找到的任何地方的选项（我的 .subversion 文件夹、cygwin/etc、乌龟的设置），但我似乎无法获得有关问题所在的更多信息。此机器上所有签出文件夹的行为都是相同的。我也什么都查不出来。Tortoise 可以与其他机器上的远程存储库一起正常工作。

我试图卸载/重新安装乌龟，但因为它记得历史，我认为有些东西被遗忘在某个地方。以前的版本是较旧的 32 位版本。在身份验证过程中似乎有些东西被破坏了，但我不知道它可能是什么。我尝试从缓存设置中删除存储库，并从我的 .ssh 文件夹中的 known_hosts 文件中删除远程计算机。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-05T14:26:10.380

我一直在与此作斗争-并遇到相同的错误，否则：

> 无法打开与 svn 的连接。主机不存在

我终于解决了：

转到 Tortoise 设置（可以在开始、程序文件等下找到 - 或运行`"C:\Program Files\TortoiseSVN\bin\TortoiseProc.exe" /command:settings`）

在网络选项卡上，底部标记为`SSH client`。我的设置为`"C:\Program Files (x86)\PuTTY\putty.exe"`

将 SSH 客户端设置为*TortoisePlink.exe*隐藏的`"C:\Program Files\TortoiseSVN\bin\TortoisePlink.exe"`位置或任何位置。

 *突然间一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T19:03:59.130

1.  SVN（客户端或服务器）不是，从来都不是，也不能是 SSH 客户端
2.  “Subversion 配置文件”，在错误消息中提到并被 TortoiseSVN（和其他*本地 Windows* Subversion 客户端）使用是 %APPDATA%\config
3.  **阅读[SVN 书](http://svnbook.red-bean.com/en/1.7/index.html)！***

# google-chrome - 当sqlite db中有数据时，Chrome WebSQL select不返回任何数据

> ID：16065592
> 
> 赞同：0
> 
> 时间：2013-04-17T16:40:57.943
> 
> 标签：google-chrome, extjs, extjs4, web-sql

我在我的 sqlite db 中有一个表（通过 websql 在我的 Web 应用程序中访问）`Parameter`，当我通过命令行访问它时，它有 79 行：

```
sqlite> select count(*) from Parameter;
79 
```

但是，当我通过我的 ExtJS WebSQL 应用程序进行调试并查看它的运行结果时

```
select * from Parameter; 
```

它什么也得不到。我已经调试知道这不是 ExtJS 问题，它可能无法正确处理 websql 结果。websql 结果没有记录。

关于如何更深入地调试 Chrome WebSQL 以了解为什么会发生这种情况的任何想法？有没有人见过这个？

# android - Android 性能 XML Drawable vs CSS3 vs 图片

> ID：16065595
> 
> 赞同：9
> 
> 时间：2013-04-17T16:40:59.163
> 
> 标签：android, performance, android-webview, android-drawable

我正在尝试在我的 Android 应用程序中创建一些自定义切换按钮。我希望它们看起来像下面这样：

![自定义切换按钮](https://i.stack.imgur.com/IJLUy.png)

在该图像中，75、39 和 AZ 处于“关闭”状态，37 处于“开启”状态。

所以我的问题是：

这是在 Android 中生成它们的最佳方法：

1.  带有边框、背景、边框半径的 XML 可绘制对象

2.  每个形状、状态和屏幕密度的一组 9 块图像，或

3.  使用 WebView 并使用 CSS3？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-25T15:02:43.277

好吧。我已经使用了 XML Drawable。这是我的解决方案：

```
<?xml version="1.0" encoding="UTF-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:state_checked="true">
        <layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
            <item 
                android:top="0dp" 
                android:bottom="2dp" 
                android:left="0dp" 
                android:right="0dp">

                <shape android:shape="rectangle">
                    <solid android:color="@color/toggle_border_dark" />
                    <corners 
                        android:topLeftRadius="20dp"
                        android:topRightRadius="20dp"
                        android:bottomRightRadius="30dp"
                        android:bottomLeftRadius="30dp" />
                </shape>
            </item>

            <item 
                android:top="2dp" 
                android:bottom="0dp" 
                android:left="0dp" 
                android:right="0dp">

                <shape android:shape="rectangle">
                    <solid android:color="@color/toggle_border_light" />
                    <corners 
                        android:topLeftRadius="30dp"
                        android:topRightRadius="30dp"
                        android:bottomRightRadius="20dp"
                        android:bottomLeftRadius="20dp" />
                </shape>
            </item>

            <item 
                android:top="1dp" 
                android:right="1dp" 
                android:left="1dp" 
                android:bottom="1dp">

                <shape android:shape="rectangle" >
                    <solid android:color="@color/toggle_bg_on" />
                    <corners 
                        android:topLeftRadius="20dp"
                        android:topRightRadius="20dp"
                        android:bottomRightRadius="20dp"
                        android:bottomLeftRadius="20dp" />
                </shape>
            </item>   
        </layer-list>
    </item> 
    <item>
        <layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
            <item 
                android:top="0dp" 
                android:bottom="2dp" 
                android:left="0dp" 
                android:right="0dp">

                <shape android:shape="rectangle">
                    <solid android:color="@color/toggle_border_light" />
                    <corners 
                        android:topLeftRadius="20dp"
                        android:topRightRadius="20dp"
                        android:bottomRightRadius="30dp"
                        android:bottomLeftRadius="30dp" />
                </shape>
            </item>

            <item 
                android:top="2dp" 
                android:bottom="0dp" 
                android:left="0dp" 
                android:right="0dp">

                <shape android:shape="rectangle">
                    <solid android:color="@color/toggle_border_dark" />
                    <corners 
                        android:topLeftRadius="30dp"
                        android:topRightRadius="30dp"
                        android:bottomRightRadius="20dp"
                        android:bottomLeftRadius="20dp" />
                </shape>
            </item>

            <item 
                android:top="1dp" 
                android:right="1dp" 
                android:left="1dp" 
                android:bottom="1dp">

                <shape android:shape="rectangle" >
                    <solid android:color="@color/toggle_bg_off" />
                    <corners 
                        android:topLeftRadius="20dp"
                        android:topRightRadius="20dp"
                        android:bottomRightRadius="20dp"
                        android:bottomLeftRadius="20dp" />
                </shape>
            </item>   
        </layer-list>
    </item>  
</selector> 
```

# django - 从 celerybeat 中删除未注册的任务

> ID：16065596
> 
> 赞同：2
> 
> 时间：2013-04-17T16:41:05.990
> 
> 标签：django, celery, celerybeat

当我试图弄清楚 celery 是如何工作的，或者更具体地说是它如何与 Django 一起工作时，我将[示例 CELERYBEAT_SCHEDULE 设置](http://docs.celeryproject.org/en/latest/userguide/periodic-tasks.html#entries)添加到我的设置文件中。它将 task.add 添加到我的任务队列中。我已经删除了该设置，但它一直在尝试添加该任务。我每天在哨兵中收到成千上万的错误报告，上面写着：

```
Received unregistered task of type u'tasks.add'.
The message has been ignored and discarded.

Did you remember to import the module containing this task?
Or maybe you are using relative imports?
More: http://docs.celeryq.org/en/latest/userguide/tasks.html#names

The full contents of the message body was:
{'utc': True, 'chord': None, 'args': [16, 16], 'retries': 0, 'expires': None, 'task': u'tasks.add', 'callbacks': None, 'errbacks': None, 'taskset': None, 'kwargs': {}, 'eta': None, 'id': '6d609a07-fbfa-4d6e-aa21-46e779c159c0'} (198b) 
```

如何让 celetbeat 停止尝试添加此任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:21:36.183

我在这里找到了我的答案[Stopping/Purging Periodic Tasks in Django-Celery](https://stackoverflow.com/questions/8230833/stopping-purging-periodic-tasks-in-django-celery)。我在周期性任务下的 Django Admin 中发现了流氓任务。虽然我已经看了十几次，但我一直在寻找 task.add 而不是“add-ever-30-seconds”。

删除定期任务记录后，我清除了我的 celery 队列：[Deleting all pending tasks in celery / rabbitmq](https://stackoverflow.com/questions/7149074/deleting-all-pending-tasks-in-celery-rabbitmq)

# html - html 5中子菜单的正确位置

> ID：16065597
> 
> 赞同：0
> 
> 时间：2013-04-17T16:41:08.447
> 
> 标签：html, css, drop-down-menu

我不能让我的子菜单直接悬停在正确的菜单下方，而是所有子菜单都悬停在同一位置。如何让我的子菜单正确悬停的任何帮助都会有很大帮助。

这是CSS代码：

```
menu {
    display:block;
    width:100%;
    height:25px;
    padding:0;
    float:right;
    margin-top:-45px;
    border-bottom:1px solid #999;
    border-top:1px solid #999;
}

menu ul {
    margin:0;
    display:block;
    padding:0;
    text-align:center;
    position:relative;
}
menu ul li{
    list-style-type:none;
    padding:15px;
    display:inline;
}

menu ul li a, menu ul li ul li a {
    text-decoration:none;
    color:#003;
    font-family:"Comic Sans MS", cursive;
    font-size:15px;
    display:inline-block;
    text-align:center;
    margin-top:4px;

}

menu ul li ul{
    display:none;
    position:absolute;
}

menu ul li:hover ul{
    display:block;
    background-color:#CCC;
    height:auto;
    width:120px;
    padding:0;
}

menu ul li ul li{
    clear:both;
} 
```

这是html代码：

```
<menu>
    <ul>
        <li><a href="#">MENU 1</a>
            <ul>
                <li><a href="#">SUBMENU 1</a></li>
                <li><a href="#">SUBMENU 2</a></li>
            </ul>
        </li>
        <li><a href="#">MENU 2</a>
            <ul>
                <li><a href="#">SUBMENU 1</a></li>
                <li><a href="#">SUBMENU 2</a></li>
            </ul>
        </li>    
        <li><a href="#">MENU 3</a>
            <ul>
                <li><a href="#">SUBMENU 1</a></li>
                <li><a href="#">SUBMENU 2</a></li>
            </ul>
        </li>
        <li><a href="#">MENU 4</a>
            <ul>
                <li><a href="#">SUBMENU 1</a></li>
                <li><a href="#">SUBMENU 2</a></li>
            </ul>
        </li>
    </ul>
</menu> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:44:41.143

```
menu ul li {
   position: relative;
}

menu ul li:hover > ul {
   display: block;
}

menu ul li > ul {
   position: absolute;
   bottom: 0;
   left: 0;

   display: none;
} 
```

这会将右侧的子菜单定位在列表项下。

# ruby-on-rails-3 - 本地主机的未初始化常量 DashboardController：访问站点区域时接受管理端

> ID：16065598
> 
> 赞同：7
> 
> 时间：2013-04-17T16:41:12.977
> 
> 标签：ruby-on-rails-3

您好，当我使用 localhost:3000 打开我的网站时，我遇到了“未初始化的常量 DashboardController”的问题。它向我显示了上述错误。它不允许我进入用户端。

我有很多管理员和用户的模型，所以我需要解决这个错误。

是这样....而且我已将 root :to => 'home/index' 定义为我的根文件，因此每当我在浏览器中写入 localhost 时，它都无法加载。

我已经为用户安装了设计，为管理员安装了活动管理员。

```
// for devise user session
controller :sessions do 
  get 'login' => :new
  post 'login' => :create
  delete 'logout' => :destroy
end

root :to => 'home#activity_list' //for localroot 
```

* * *

* * *

> 新问题及其答案：

* * *

如果您收到此错误，请执行此操作。

> Admin::DashboardController#index 处理为 HTML Completed 401 Unauthorized in 1ms

当您尝试打开 localhost:3000/admin 并重定向到 localhost:3000/usres/sign_in 时会出现这种情况

然后你可以添加这三行，所以复制这三行并粘贴到 config/initializers/active_admin.rb 中的文件底部（在 ActiveAdmin.setup 执行 |config| .... end 之后）。

```
 ActiveAdmin::BaseController.class_eval do
   skip_before_filter :authenticate_user!
 end 
```

其实我有

> before_action :authenticate_user！

在我的 application_controller 中。

只需打开 ActiveAdmin::BaseController 并将 skip_before_filter 放在那里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-04T09:58:59.860

在 routes.rb 中：

```
 root :to => 'frontpage#index' # MUST be before ActiveAdmin (as SSR said)

  devise_scope :users do # Must also be before ActiveAdmin
    root :to => "frontpage#index"
  end

  namespace :admin do
    root to: 'users#index' # if you want to be on user by default on the admin 
    #resources :dashboard <= Remove this line if you have it
  end

  devise_for :admin_users, ActiveAdmin::Devise.config
  ActiveAdmin.routes(self)
  devise_for :users, :controllers => {:omniauth_callbacks => 'omniauth_callbacks'}
  ActiveAdmin.routes(self) 
```

如果您有错误`uninitialized constant DashboardController`，只需删除所有内容`app/helpers/admin/`

* * *

另一种方法是在`is_admin`用户表中添加一列。

然后，将其添加到`initializers/active_admin.rb`：

```
config.authentication_method = :authenticate_admin_user!
config.current_user_method = :current_admin_user 
```

而这在`application_controller.rb`

```
def authenticate_admin_user!
  if !current_user.is_admin
    flash[:error] = "You must be admin to access this page."
    redirect_to root_path
    return
  end

end 
```

这样，您就不需要 admin_user 表。只需将 is_admin 从 0 更改为 1 即可让用户成为管理员。

# c - 在 ANSI C 中用 fread 读取整数

> ID：16065599
> 
> 赞同：2
> 
> 时间：2013-04-17T16:41:16.710
> 
> 标签：c, file-io, fread

我正在用 C 编写一个程序，我正在读取一个文本文件`fread`，但我无法正确读取整数。

文本文件中的值为`a`16，我得到的输出是：

```
 a= 538976288 
```

我使用了成功读取二进制文件的类似代码。我想了解在 c 中读取 ASCII 表的最佳方法是什么。

表格大小由文件顶部的整数给出。数据以空格分隔。

这是我写的简单代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main(int argc, char *argv[])
{
  int a, flag_fread;
  FILE * p_finput = NULL;
  char * filename = NULL;

  filename = malloc(sizeof(char) * (strlen(argv[1]) + 1));
  strncpy(filename, argv[1],strlen(argv[1]));
  filename[strlen(argv[1])] = '\0';

  p_finput = fopen(filename, "r");
  if (p_finput == NULL)
    {
      printf("couldn't open %s \n", filename);
      abort();
    }

  flag_fread = fread(&(a), sizeof(int), 1, p_finput);

  printf("a= %d \n", a);  

  fclose(p_finput);
  free(filename);
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T16:45:53.943

要读取以文本形式写入的值，您应该使用`fscanf`，如下所示：

`fscanf(p_finput, "%d", &a);`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T16:58:57.290

`fread`以原始二进制形式读取文件中的数据。例如，当数据以这种方式存储时，它会起作用`fwrite`。处理文本时，您可以使用`fscanf`，**但**建议不要使用它，因为它不进行任何边界检查，这可能会导致缓冲区溢出。

更好的做法是使用[`fgets`](http://www.cplusplus.com/reference/cstdio/fgets/)然后使用来读取文件[`sscanf`](http://www.cplusplus.com/reference/cstdio/sscanf/)以获取所需的值。例如：

```
char buffer[100];
int itemsScanned = 0;
if(fgets(buffer, 100, p_finput) != NULL){
    itemsScanned = sscanf(buffer, "%d", &a);
}
/* check itemsScanned & continue */ 
```

# ruby-on-rails - 已发送文件夹中的参数数量错误 1 对 0

> ID：16065601
> 
> 赞同：0
> 
> 时间：2013-04-17T16:41:29.870
> 
> 标签：ruby-on-rails

对于我的自定义收件箱消息系统，我正在设置已发送消息文件夹。我得到一个`wrong number of arguments (1 for 0)`. 该页面的标题是 MessagesController#index 中的 ArgumentError。我似乎无法正确定义方法。任何帮助将不胜感激，因为我尝试了一些事情，但似乎无法让它发挥作用。我确信这是一个正常的小修复，但我是 Rails 新手，所以我还不知道所有方法。

用户.rb：

```
 def received_messages
      Message.received_by(self)
    end

 def unread_messages?
   unread_message_count > 0 ? true : false
 end

 def sent_messages
   Message.sent_by(self)
 end 
```

消息.rb：

```
 class Message < ActiveRecord::Base
attr_accessible :subject, :body, :sender_id, :recipient_id, :read_at,:sender_deleted,:recipient_deleted
validates_presence_of :subject, :message => "Please enter message title"

belongs_to :sender,
:class_name => 'User',
:foreign_key => 'sender_id'
belongs_to :recipient,
:class_name => 'User',
:foreign_key => 'recipient_id'

# marks a message as deleted by either the sender or the recipient, which ever the user that was passed is.
# When both sender and recipient marks it deleted, it is destroyed.
def mark_message_deleted(id,user_id)
     self.sender_deleted = true if self.sender_id == user_id
     self.recipient_deleted = true if self.recipient_id == user_id
     (self.sender_deleted && self.recipient_deleted) ? self.destroy : self.save!
 end
# Read message and if it is read by recipient then mark it is read
def readingmessage
  self.read_at ||= Time.now
  save
end

# Based on if a message has been read by it's recipient returns true or false.
def read?
    self.read_at.nil? ? false : true
end

def self.received_by(user)
   where(:recipient_id => user.id)
 end

 def self.not_recipient_deleted
   where("recipient_deleted = ?", false)
 end

 def self.sent_by(user)
   user.messages.sent
 end 
```

结尾

消息控制器：

```
 def index
    if params[:mailbox] == "sent"
      @messages = @user.sent_messages
    elsif params[:mailbox] == "inbox"
      @messages = @user.received_messages
    #elsif params[:mailbox] == "archieved"
     # @messages = @user.archived_messages
    end
  end 
```

收件箱.html.erb：

```
<%= link_to "View Sent Messages", user_messages_path(current_user, :mailbox => :sent)%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:46:23.903

看起来您对 Message.sent_by 的定义不正确，请尝试：

```
 # message.rb
 def self.sent_by(user)
   Message.where(:sender_id => user.id)
 end 
```

# jquery - 将文本框的高度设置为标签文本的高度

> ID：16065602
> 
> 赞同：4
> 
> 时间：2013-04-17T16:41:30.400
> 
> 标签：jquery, html, css

有人可以为我提供一个示例，说明如何设置文本框的高度以适应随附标签的高度吗？如您所见，我在字段集中有我的标签和文本框。我的标签的文本可以是可变的，所以我不确定是否有 css 属性来处理它，或者它必须动态设置。我还应该提到，我的标签是在页面加载时动态填充的。我正在使用 Asp.net。

![http://postimg.org/image/am7xxwr1v/](https://i.stack.imgur.com/sT2z1.jpg)

```
<fieldset class="input">
<ol>
        <li>
            <asp:Label id="label1" AssociatedControlID="textField1" runat="server">Provide a brief description of the process used to build, monitor and maintain investment portfolios for this strategy.</asp:Label>
            <textarea ID="textField1" runat="server" cols="40" rows="4"></textarea>
        </li>
        <li>
            <asp:Label id="label2" AssociatedControlID="textField2" runat="server">What market anomaly or inefficiency are you trying to capture?</asp:Label>          
            <textarea ID="textField2" runat="server" cols="40" rows="4"></textarea>
        </li>
</ol>
</fieldset> 
```

```
fieldset.input
{
float:none;
clear:both;
width:97%;
border:1px solid #C0CED7;
padding:0;
}

fieldset.input ol 
{
list-style:none;
padding: 1em 1em 0;
}

fieldset.input li 
{
float:left;
clear:left;
width:100%;
padding-bottom:1em;
}

fieldset.input label 
{
float:left;
width:15em;
margin-right:3em;
text-align:left;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T16:52:54.897

您可以使用 jQuery 来完成。

```
$(document).ready(function() {
   var labelHeight = $('label').height();
   $('textarea').height(labelHeight);
}); 
```

这是 JSFiddle 示例 - [http://jsfiddle.net/XrcLy/1/](http://jsfiddle.net/XrcLy/1/)

# php - mysql查询插入3条重复记录

> ID：16065610
> 
> 赞同：0
> 
> 时间：2013-04-17T16:41:47.320
> 
> 标签：php, mysql

我正在使用以下代码将点击记录到视图表中，但是当我加载此页面时，MySQL 查询一次插入 3 行，因此 1 次点击意味着 3 次点击。我试图弄清楚，但无法获得任何运气。

```
 $width = 16;
    $height = 16;

    $id = 30

    $ip = $_SERVER['REMOTE_ADDR'];
    $user_agent = $_SERVER['HTTP_USER_AGENT'];

    //count views

    global $db;

    $sql = 'INSERT INTO '.DB_PREFIX.'views (invoice_id, ip, user_agent) 
                                               VALUES ("' . $id . '",
                                                "' . ip2long($ip) . '",
                                                "' . $user_agent . '")';

$db->query($sql);

//display image
header( "Content-type: image/png" );
$img = imagecreate($width, $height);
$background_color = imagecolorallocate($img, 238, 238, 238);
imagepng($img);
imagedestroy($img); 
```

如果我用简单的替换显示图像代码`echo "Successfully done!"`，问题就解决了，它只插入一行。

**mysql 行**

```
id     invoice_id    ip         user_agent    dnt
35     22           2058457116     Mozilla/5.0   2013-04-17 11:55:12
34     22           2058457116     Mozilla/5.0   2013-04-17 11:55:12
33     22           2058457116     Mozilla/5.0   2013-04-17 11:55:11 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T21:29:39.273

您能否告诉您用于测试的操作系统和浏览器。在 IOS 设备中尝试使用 safari 时，我曾经遇到过类似的问题。我的代码用于下载音频。对于所有操作系统，它都运行良好。但是对于 IOS 设备中的 safari，下载代码会被多次执行。请在其他浏览器上检查并让我们知道结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T20:19:30.683

您使用的是模板引擎还是某种形式的 CMS？例如，我之前尝试过 Drupal，由于系统的钩子功能，一个文件可能会被多次调用.. 与模板引擎相同。这可能是问题所在。此外，由于与“标头已发送”案例相关的错误，回显某些内容可能会阻止其他脚本运行。这就是为什么即使你最后做了一个 die() ，它仍然不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T18:43:54.620

脚本无法插入三行。

所以唯一的可能是脚本运行了 3 次。

我建议您检查 Web 服务器日志以了解对 URL 的访问。

# javascript - 如何防止 jQueryUI 的可拖动交互超过页面上的某个偏移量？

> ID：16065613
> 
> 赞同：1
> 
> 时间：2013-04-17T16:42:14.243
> 
> 标签：javascript, jquery, jquery-ui, draggable

我正在使用 jQuery UI（最新版本）。我们的页面上有一个类似于 jsfiddle 的分隔栏。它只能沿 x 轴拖动，但我们遇到的问题是让它停在某个点。

当栏到达窗口任一边缘的 250 像素以内时，我们希望它停止。我确实找到了这个“解决方案”，但它并不适合我们：

**在 jQueryUI 中的拖动事件中，调用 stopDragging()**：

```
function stopDragging() {

    console.log( $('#dragbar').offset().left );

    if ( $('#dragbar').offset().left < 250 )
    {
        $('#dragbar').trigger('mouseup');
    }
} 
```

但是，这会引发错误：

```
Uncaught TypeError: Cannot read property '0' of null 
```

此方法还释放鼠标在拖动条上的抓握。我希望这种行为是这样的，如果用户拖动到这一点，他们不能再拖动它 - 如果他们不释放点击并以另一种方式拖动，它仍然可以工作。

**更新**

有关示例，请参见此小提琴。拖动时，绿色和蓝色将相应调整大小。

[http://jsfiddle.net/U95hW/1/](http://jsfiddle.net/U95hW/1/)

**更新 2**

我创建这个小提琴是为了更接近最终结果。当我按照@ntgCleaner 的建议添加边距时，它会更改栏的位置。

[http://jsfiddle.net/U95hW/8/](http://jsfiddle.net/U95hW/8/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T19:00:01.060

**感谢 ntgCleaner**，我能够解决这个问题。我没有使用他的解决方案，但他确实让我朝着正确的方向前进。

在这里工作小提琴：http: [//jsfiddle.net/U95hW/87/](http://jsfiddle.net/U95hW/87/)

我所做的是使用`$.resizable()`. 这使我能够灵活地控制它可以走多小或多宽，同时选择我想要可拖动的边缘。

我能够将我的`dragbar`元素用作小部件的句柄，一切都很好！

感谢所有参与的人！

# html - 使用 CSS 将鼠标悬停在图像上时如何更改同一区域中的文本？

> ID：16065615
> 
> 赞同：3
> 
> 时间：2013-04-17T16:42:17.073
> 
> 标签：html, css

当我将鼠标悬停在图像上时，我想更改文本，但我无法解决这个问题。这个问题让我抓狂。每张图片都有不同的文字。将鼠标悬停在图像上时，该图像的文本将显示在文本框中。为了描述该主题，我在这里提供了一张图片：请参阅此[链接上的图片](http://i.imgur.com/YAJw1ee.png)

我在[JSFIDDLE](http://jsfiddle.net/tahsinabrar/X8dwn/2/)中提供了我的 HTML 和 CSS 代码， 还在这里提供了 HTML 和 CSS 代码：HTML 代码：

```
 <div id="tabbox">
            <div id="tab1">
                <img src="http://placehold.it/240X240">
                <div class="tabcontent">
                    <p>Text box to describe the images around when you hover over them, this description will change depending on what image you hover over.</p>

                </div>
            </div>

            <div id="tab2">
                <img src="http://placehold.it/240X240">
                <div class="tabcontent">
                    <p>Another text comes here for hover the mouse on the image.</p>
                </div>
            </div>
        </div> 
```

这里的 CSS 代码：

```
 #tabbox{
    width: 90%;
    height: 380px;
    position: relative;
    border: 2px solid #888;
}

#tabbox img{
    cursor: pointer;
    display: block;
    width: 240px;
    height: 240px;

}

.tabcontent{
    padding:10px 0 0 40px;
    background:#fff;
    border:1px solid #000;  
    left:0;
    top:40px;
    height:120px;
    display:block;
    margin-top:40px;
    transition: all 1.2s;
}

#tab1{
float: left;
}

#tab2 {
float: left;
left: 250px;
width: 480px;
}

#tab1.tabcontent{
            z-index:2;
            background:#fff;
        }

#tab1 img{
            z-index:3;
            width:240px;
            position:absolute;
            left:0;
            top:0;
            cursor:hand;
            background:#fff;

}

#tab2.tabcontent{
            z-index:1; 
            opacity:0;
        }

#tab2 img{
    width:220px;
    position:absolute;
    left:260px;
    top:0;
    cursor:hand;
    background: #ddd;
}

    #tabbox:hover img, #tabs:focus img, #tabs:active img{
        background:none;
        z-index:0;
        }

    #tabbox:hover .tabcontent, #tabs:focus .tabcontent, #tabs:active .tabcontent{
        z-index:0;
        opacity:0;
        -webkit-transition : opacity .75s ease-in;
        }

    #tab1:hover img,#tab1:focus img,#tab1:active img{z-index:4;background:#fff;}
    #tab1:hover .tabcontent,#tab1:focus .tabcontent,#tab1:active .tabcontent{   z-index:3;  background:#fff; opacity:1; -webkit-transition : opacity 500ms ease-in;}

    #tab2:hover img,#tab2:focus img,#tab2:active img{z-index:4;background:#fff;}
    #tab2:hover .tabcontent,#tab2:focus .tabcontent,#tab2:active .tabcontent{   z-index:3;  background:#fff; opacity:1; -webkit-transition : opacity 500ms ease-in;} 
```

如果你检查我的代码，你就会明白这个问题。请任何人帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T17:01:50.410

我认为您正在寻找的选择器是`#tab1:hover > .tabcontent`

尝试更新`.tabcontent`到

```
.tabcontent{
    display: none;
    position: absolute;
    padding:10px 0 0 40px;
    background:#fff;
    border:1px solid #000;  
    left:0;
    top:40px;
    height:120px;
    display:block;
    margin-top:40px;
    transition: all 1.2s;
} 
```

然后添加选择器

```
#tab1:hover > .tabcontent, #tab2:hover >.tabcontent
{
     display: block;
} 
```

这是一个修复布局的小提琴（我猜你想要的东西如何定位）以及更改ID 和选择器以`#tab1`实现更好的可伸缩性并需要更少的 CSS 选择器。为了简化，我删除了一些属性。 [http://jsfiddle.net/DLBPF/](http://jsfiddle.net/DLBPF/)`#tab2``.tab`

# meteor - 如何在 Meteor 中使用 sendEnrollmentEmail

> ID：16065621
> 
> 赞同：3
> 
> 时间：2013-04-17T16:42:36.603
> 
> 标签：meteor

关于文档`sendEnrollmentEmail`太短，我无法理解它是如何工作的。

我的代码无法创建新用户。它仅在控制台中打印电子邮件内容，并且电子邮件中的链接`http://localhost:3000/#/enroll-account/D4SGgWerKrdNfYrJW`仅重定向到`localhost:3000/`并且我找不到应该传递给`Accounts.resetPassword`文档所说的令牌。

```
Meteor.methods({
  createNewUser: function (username, email) {
    Meteor.call("validateUsername", username);
    Meteor.call("validateEmail", email);
    var userId = Accounts.createUser({username: username, email: email});
    Accounts.sendEnrollmentEmail(userId);
  }
}); 
```

有没有关于的例子`sendEnrollmentEmail`？谢谢 ：）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T06:38:46.027

你做的一切都是正确的。我试图让它工作，它对我来说很好。（您使用的是哪个版本的流星？）

```
if (Meteor.isServer) {    
  Meteor.methods({
  createNewUser: function (username, email) {
    // i recommend to create user with initial password otherwise it will be empty string
    var userId = Accounts.createUser({username: username, email: email, password: 'initialPassword'});
    Accounts.sendEnrollmentEmail(userId);
  }
  });
} 
```

之后我在控制台中收到“电子邮件”，单击链接打开我的浏览器，弹出“窗口”以更改密码

# linux - 内存访问期间任务会休眠吗？

> ID：16065635
> 
> 赞同：1
> 
> 时间：2013-04-17T16:43:48.093
> 
> 标签：linux, memory, sleep, schedule

我想这应该是一个编程问题。我只是想确保在当前的 Linux 调度程序中，任务在等待内存 IO 时会休眠（或出列）吗？也就是说，内存IO等待时间会不会算作这个任务的CPU占用时间呢？我很确定当磁盘 IO 出现页面错误时，任务将进入睡眠状态。但我不太确定内存访问。

# matlab - Matlab Codegen Eig 函数 - 这是一个错误吗？

> ID：16065641
> 
> 赞同：2
> 
> 时间：2013-04-17T16:44:00.817
> 
> 标签：matlab

考虑以下最小示例：

```
function CoderEigFail() %#codegen
A = [0 sqrt(2); sqrt(2) 0];
[B C] = eig(A) 
```

当我通过编译`codegen CoderEigFail.m`并运行它时，得到的矩阵 B 与运行原始 Matlab 文件时得到的矩阵 B 不同。特别是，对于 mex 文件，我得到 B = [1 1; -1 1]，而对于 Matlab 文件，我得到 B = [-0.7071 0.7071; 0.7071 0.7071]。我在 MacOSx Mountain Lion 上运行了 Matlab R2011a。

任何人都可以重现/解释这种行为吗？这是一个错误还是我在这里遗漏了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T18:20:11.263

不，这不是错误。

正如斯图尔特在对该问题的评论中指出的那样，特征向量通常是标准化的。这在 的文档中的注释中指出[`eig()`](http://www.mathworks.co.uk/help/matlab/ref/eig.html)。

编译版本的行为差异是“对于某些高级库函数”下的“[编译 MATLAB 代码后的预期行为差异”中记录的功能。](http://www.mathworks.co.uk/help/simulink/ug/expected-differences-in-behavior-after-compiling-your-matlab-code.html#bshop6t)

这种行为只是被承认但没有理由或解释。

# android - 如何在android项目中将一个jar捆绑到另一个jar中

> ID：16065642
> 
> 赞同：2
> 
> 时间：2013-04-17T16:44:03.627
> 
> 标签：android, eclipse, build, jar, android-library

我正在编写一个 android 库（没有资源），并计划将它作为 jar 分发。我的 library.jar 依赖于第三方库，比如：thirdParty_1.jar 和thirdParty_2.jar。我正在eclipse中构建library.jar。thirdParty_1.jar 和 thirdParty_2.jar 包含在构建路径中，并检查两者的导出顺序。当我将 library.jar 放在示例应用程序中时，它会给出运行时异常，即找不到第三方库中的类。

您知道将第三方库包装到您自己的 jar 中并将其作为独立 jar 分发的正确方法吗？

[更新] 我可以使用 Eclipse FatJar 插件创建一个 jar。这是将依赖项与 jar 一起发送的唯一方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-14T09:34:24.960

我已经设法使用 ant 的[`zip`](http://ant.apache.org/manual/Tasks/zip.html)任务来做到这一点`-post-build`。

编辑`build.xml`底部看起来像这样：

```
<!-- version-tag: custom -->
<import file="${sdk.dir}/tools/ant/build.xml" />
<target name="-post-build">
    <zip destfile="bin/my-library.jar">
        <zipgroupfileset dir="bin/" includes="classes.jar"/>
        <zipgroupfileset dir="libs/" includes="*.jar"/>
    </zip>
</target> 
```

我不确定 Eclipse 如何处理构建过程，因为我专门使用命令行 SDK 工具进行开发，但它可能会调用`ant debug`或`ant release`其他东西，所有这些都取决于`-post-build`目标。

# c++ - 如何在不设计的情况下将Qbutton添加到页面？

> ID：16065645
> 
> 赞同：0
> 
> 时间：2013-04-17T16:44:25.927
> 
> 标签：c++, qt, qt5

我是QT的新手。我开发了一个程序，需要`1024 line`每行有两个按钮、两个单选按钮和两个标签。我有两种方法。

1.  在设计器模式下，我拖放 2 * 1204 按钮、2 * 1024 标签和 2 * 1024 单选按钮，这是不合逻辑的。
2.  有一种方法可以在没有设计器模式和拖放的情况下将此小部件添加到页面，例如在运行时我单击一个按钮并在代码隐藏中将此小部件（标签、按钮、单选按钮）添加到页面或一些像这样的事情。

我在网络编程中做了第二种方式。这在QT中可能吗？或类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:00:42.760

您可以以编程方式创建小部件并通过布局调整它们的位置。例如，它可能看起来像这样：

```
QVBoxLayout *topLayout = new QVBoxLayout();

for (int lineNumber = 0; lineNumber < 1024; ++lineNumber)
{
    QWidget *oneLineWidget = new QWidget(this);
    QHBoxLayout *oneLineWidgetLayout = new QHBoxLayout();
    { //added these brackets just for the ease of reading.
        QLabel *labFirst = new QLabel(tr("first label"), oneLineWidget);
        QLabel *labSecond = new QLabel(tr("second label"), oneLineWidget);
        QPushButton *bFirst = new QPushButton(tr("first button"), oneLineWidget);
        QPushButton *bSecond = new QPushButton(tr("second button"), oneLineWidget);
        QRadioButton *rbFirst = new QRadioButton(tr("first radiobutton"), oneLineWidget);
        QRadioButton *rbSecond = new QRadioButton(tr("second radiobutton"), oneLineWidget);

        oneLineWidgetLayout->addWidget(labFirst);
        oneLineWidgetLayout->addWidget(labSecond);
        oneLineWidgetLayout->addWidget(bFirst);
        oneLineWidgetLayout->addWidget(bSecond);

        //lets put one radioButton under another. 
        QVBoxLayout *radioButtonsLayout = new QVBoxLayout();
        {
            radioButtonsLayout->addWidget(rbFirst);
            radioButtonsLayout->addWidget(rbSecond);
        }
        //and now we can combine layouts.
        oneLineWidgetLayout->addLayout(radioButtonsLayout);

    }
    oneLineWidget->setLayout(oneLineWidgetLayout);

    topLayout->addWidget(oneLineWidget);
}

this->setLayout(topLayout); 
```

您可以使用不同类型的布局（QBoxLayout、QGridLayout、QFormLayout 等）。您可以从[QLayout 文档](http://qt-project.org/doc/qt-4.8/qlayout.html)开始。有一个继承它的类列表。我希望它会有所帮助！：） 祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T17:25:23.230

您在 Qt Designer 中所做的一切最终都会转换为创建对象并将它们相互链接的 C++ 代码。

因此，获取该代码（查看生成的头文件）并将其放入 for 循环是非常简单的。或者甚至自己重新开始，创建三个按钮并将它们添加到布局中只是几行代码。

# git - git：使用 rebase -i 重放（大部分）历史，保持分支和合并结构完整

> ID：16065650
> 
> 赞同：2
> 
> 时间：2013-04-17T16:44:42.433
> 
> 标签：git

我的目标是使用 git bisect。我受到以下事实的阻碍，即显然接近引入我要纠正的问题的提交，我引入了另一个小错误，导致许多邻居提交无法测试。

这第二个错误是一个微不足道的错误。后来我更正了它几次提交。

我想做的是：

```
git checkout master
git checkout -b fully-testable-branch
git rebase -i initial-good-bisect-point 
```

然后从提交列表中删除引入第二个错误的提交。我期待并准备好处理代码和历史领域的一些冲突。

然后，如果一切顺利（它应该——这个项目中的大多数提交都是可测试的）我可以再次平分，这次在完全可测试分支的尖端和初始良好平分点之间，找到并研究问题提交，结帐大师，然后从那里开始。

如果历史是线性的，这会很好。（我以前做过。）然而， git rebase -i 所做的是线性化非线性历史。反过来，这会产生许多已经解决的冲突（通常不是我，通常是我在其他机器上，所以我的 rerere 缓存没有多大帮助）。这些冲突存在于我的程序的一部分中，既与我试图确定的错误无关，也与我已确定的次要错误有关。

我对不得不重新解决这些冲突并不感到兴奋。第一次做这项工作很乏味且容易出错！

那么，有没有办法让 git rebase -i 重放历史，包括分支和合并？还有另一个命令可以吗？我是否将这一切都错了，如果是这样，我应该尝试什么？

**编辑**：根据请求，这是历史的简化版本。

```
A-B-C-D-E--F-G-H-I-J-R-S-T
     \              /
      \            /
       α-N-M---P--- 
        \     /
         β   /
          \ /
           γ 
```

在 P 处解决了一些冲突，在 D 处创建了小错误。这段历史被扁平化为：

```
A-B'-C'-D'-E'-F'-α'-β'-γ'-N'-M'-P'-F'-G'-H'-I'-J'-Z' 
```

因此在回放历史时，在 N'、M' 和 P' 处存在冲突。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:18:18.177

要按照您的*要求*进行操作，我认为您需要分别重新设置每个分支的基础，然后重新进行合并。

在您的示例中（为简洁起见略微截断），您最终会得到以下内容：

```
 β'-----
          /       \
         α'-N'-...-P'
        /            \
       E'-F'-... -J'-R'-S'-T' [fully-testable-branch]
     /
A-B-C-D-E--F-G-H-I-J-R-S-T [master]
     \              /
      \            /
       α-N-M---P--- 
        \     /
         β --- 
```

（即，您可以在创建分支`J`，然后变基`E..J`到`C`，然后变基`α..P`到`E'`，然后合并`P'`到您的新分支创建`R'`，然后变基`S..T`到`R'`等等等等。

* * *

一种更简单的方法可能只是将您的还原存储在`D`某处（使用存储或仅保存补丁文件），然后将其应用于修复每个二等分的工作副本。

# objective-c - Objective-C：代码解释

> ID：16065651
> 
> 赞同：-4
> 
> 时间：2013-04-17T16:44:44.167
> 
> 标签：objective-c

我需要以下代码的代码解释：

```
AutoCompletePlaceType PlaceTypeFromDictionary(NSDictionary *placeDictionary)
{
    return [[placeDictionary objectForKey:@"types"] containsObject:@"establishment"] ? PlaceTypeEstablishment : PlaceTypeGeocode;
} 
```

从第一行开始...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T16:47:49.417

这是一个相对简单的*函数*¹，它分析 a `NSDictionary`，并产生^(两个)`AutoCompletePlaceType`值之一：

*   `PlaceTypeEstablishment`如果被调用的键处的字典元素`@"element"`包含一个值为 的字符串对象`@"establishment"`，并且
*   `PlaceTypeGeocode`如果键上没有元素调用`@"element"`，或者相应的集合不包含`@"establishment"`其值中的单词。

* * *

¹这是一个 C*函数*，而不是一个 Objective C*方法*。

²使用[三元条件运算符`? :`](http://en.wikipedia.org/wiki/?:#C)做出决定。

# javascript - 在网站内全屏显示和导航

> ID：16065652
> 
> 赞同：0
> 
> 时间：2013-04-17T16:44:47.743
> 
> 标签：javascript, jquery, fullscreen

我想以“全屏”模式显示我的网站。为此，我将这个脚本添加到我的网站：[https](https://github.com/sindresorhus/screenfull.js) ://github.com/sindresorhus/screenfull.js 。它允许我以“全屏”模式显示页面。

我上传了我的页脚以显示一个激活全屏模式的按钮。它工作得很好。

这是我的页脚：

```
 <li><a href="#" class="fullscreen">Full screen</a><br /></li> 
```

这是我的JS：

```
if (screenfull.enabled) {
            // Display the button if the browser is compatible 
    $('.fullscreen').show();
}

$('.fullscreen').toggle(function() {
    screenfull.request();
}, function() {
    screenfull.exit();
}); 
```

否则，当我单击链接（将用户重定向到另一个页面）时，“全屏”模式将被取消。有谁知道如何修理它？

是否可以在“全屏”模式下开发网站并允许用户在不退出此模式的情况下进行导航？我正在采取任何资源。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:55:51.490

根据我对这个库的了解，您需要将引导用户访问的页面放在 iframe 中，然后显示该 iframe。您指向的库有一个示例页面，其中包含如何全屏加载外部页面的示例。代码如下：

```
var iframe = document.createElement('iframe')
iframe.setAttribute('id', 'external-iframe');
iframe.setAttribute('src', 'http://bbc.com');
iframe.setAttribute('frameborder', 'no');
iframe.style.position = 'absolute';
iframe.style.top = '0';
iframe.style.right = '0';
iframe.style.bottom = '0';
iframe.style.left = '0';
iframe.style.width = '100%';
iframe.style.height = '100%';
$('#container').prepend(iframe);
document.body.style.overflow = 'hidden'; 
```

我从[http://sindresorhus.com/screenfull.js/](http://sindresorhus.com/screenfull.js/)的示例中直接提取了这段代码。

# unix - 如何在 shell 脚本中获取当前使用的剩余空间？

> ID：16065661
> 
> 赞同：1
> 
> 时间：2013-04-17T16:45:17.383
> 
> 标签：unix, ssh

好的，所以我正在编写一个 shell 脚本，如果可用空间不足，则需要删除文件，但是我不知道如何以考虑配额的方式检索剩余空间（如果已设置）。

例如，我可以使用 df 命令，但这似乎只检索文件系统的实际块使用情况，因此它会报告整个卷的总可用空间，即使用户的配额会阻止脚本使用那么多空间。

是否有我可以使用的命令来检索当前用户配额或卷的可用空间（以较低者为准）剩余的最小可用空间？

[编辑] 好的，所以看起来配额命令可以让我获得我需要的信息，我现在遇到的问题是从中获取有用的数据以获取所有可能的返回值。当在没有设置配额的情况下调用它时，它只会返回“none”，这意味着我需要深入研究 df 来获取大小。

任何人都可以帮助查询配额然后 df（如果需要）以获取当前使用情况和最大块大小（通过配额或卷，以最低/设置为准），以便我可以计算剩余空间量吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:55:11.927

您可以使用以下命令查找文件系统的占用情况，试一次看看。

```
df -k /*somedirectoryname 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-04T14:05:02.857

这是我最后想出的脚本；它应该相当可靠地返回文件系统的剩余空间（以字节为单位）或同一文件系统的用户剩余配额。查找正确的 /dev/foo 路径以供使用的`quota`过程并不像我想要的那样快速。

```
#!/bin/sh
freespace_remaining() {
    # Get remaining space on file-system
    fs=$(df -k "$1" | tail -1)
    free=$(echo "$fs" | awk '{ print $4 }')
    let 'free *= 1024'

    # Determine the device for the file-system
    device=
    mnt=$(echo "$fs" | awk '{ print $6 }')
    if [ "$cached_mnt" != "$mnt" ] 
        then
            cached_mnt="$mnt"

            mnts=$(mount)
            newmnt="$mnt"

            # Try to get a root mount point (for encrypted folders etc.)
            while [ -n "$newmnt" ] 
            do
                newmnt=$(echo "$mnts" | grep " on $mnt " | awk '{ print $1 }')
                [ "$newmnt" = "$mnt" ] && break

                if [ -n "$newmnt" ] 
                    then
                        device="$newmnt"
                        mnt=$(df "$newmnt" 2> /dev/null | tail -1 | awk '{print $6 }')

                        [ "$mnt" = "$device" -o "$mnt" = "$last" ] && break
                        last="$mnt"
                fi
            done

            cached_device="$device"
    fi

    # Lookup the user's quota for the target device (if any is set)
    quota=$(quota | grep "[\s]*$device")

    # Return the lower of the two values as remaining space
    if [ -n "$quota" ]
        then
            quota=$(echo "$quota" | awk '{ print $3 }')
            used=$(echo "$quota" | awk '{ print $2 }')

            let 'quota=(quota - used) * 1024'
            [ "$quota" -lt "$free" ] && free="$quota"
    fi
    echo "$free"
}

freespace_remaining "$1" 
```

希望它是如何工作的足够清楚，只需传入一个路径作为第一个（也是唯一一个）参数，它会返回剩余的可用空间，同时考虑当前用户的配额（如果有的话）。

# c# - 使用 c# 在 windows phone 应用程序中计数计时器

> ID：16065665
> 
> 赞同：1
> 
> 时间：2013-04-17T16:45:34.120
> 
> 标签：c#, windows-phone-7, timer, windows-phone-8, windows-phone

我已经使用下面的代码实现了计时器（或秒表）。我想知道是否有一种有效且标准的方法可以使用 c# 在 windows phone 中实现这一点。

任何建议，将不胜感激。

```
private void start_click()
{
    lhours = 0; lmins = 0; lsecs = 0; lmsecs = 0;
    myDispatcherTimer.Interval = new TimeSpan(0, 0, 0, 0, 1000); // 1000 Milliseconds 
    myDispatcherTimer.Tick += new EventHandler(Each_Tick);
    myDispatcherTimer.Start();
}
public void Each_Tick(object o, EventArgs sender)
{    
    lsecs = lsecs  + 1;
    if (lsecs > 59)
    {
        lsecs = 0;
        lmins = lmins + 1;
        if (lmins > 59)
        {
            lmins = 0;
            lhours = lhours + 1;
            if (lhours > 23)
            {
                lhours = 0;
                ldays = ldays + 1;
            }
        }
    }

    lblTimerDisplay.Text = ldays + ":" + lhours + ":" + lmins + ":" + lsecs + ":";
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T16:48:20.600

为什么不使用`Stopwatch`类？

```
System.Diagnostics.Stopwatch _sw = new System.Diagnostics.Stopwatch();
private void start_click()
{
    if (!_sw.IsRunning)
    {
        _sw.Start();
    }
    else
    {
        _sw.Stop();
        _sw.Reset();
    }
}
private void Each_Tick(object sender, EventArgs e)
{
    lblTimerDisplay.Text = _sw.Elapsed.ToString();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T23:23:47.630

另一种简单的方法是在初始化计时器时保存 DateTime.UtcNow，然后在刻度上从当前 DataTime.UtcNow 中减去它。

在定时器初始化：

```
DateTime startTime = DateTime.UtcNow; 
```

在滴答声上：

```
TimeSpan elapsedTime = DateTime.UtcNow - startTime; 
```

然后您可以使用 TimeSpan 参数来获取显示的天、小时、分钟和秒。

# java - 为什么这种方法会成为热点？

> ID：16065668
> 
> 赞同：9
> 
> 时间：2013-04-17T16:45:44.267
> 
> 标签：java, performance, optimization, visualvm

我正在写一个（简单！）线性代数库。在[矩阵乘法](http://en.wikipedia.org/wiki/Matrix_multiplication)的实现中，一个[VisualVM](http://visualvm.java.net/)性能样本告诉我，当乘以大型矩阵 (5k x 120k) 时，该算法在以下方法中花费了 85% 的时间（特别是“自身时间”）：

```
public double next() {
    double result;

    if(hasNext())
        result = vis[i++].next();
    else
        throw new IllegalStateException("No next value");

    return result;
} 
```

无需赘述（抱歉，我无法分享更多代码），此方法是`next()`矩阵的“迭代器”方法。*（你可以把这个方法所在的类想象*成一个行迭代器，它由存储在`vis`.该程序*在*这种方法上花费了大量时间。这种方法做的不多，为什么要花时间在这里呢？

 **以下是我要问的具体问题：

1.  我遇到了一些 VisualVM 的“陷阱”吗？例如，JIT 是否会以某种方式混淆 VisualVM，从而导致 VisualVM 将时间归因于错误的方法？
2.  为什么程序会花时间在这里？该方法只是没有做太多。特别是，我认为缓存效应不能解释这个问题，因为`vis`数组比被相乘的矩阵的数据要小得多。

如果它有用，这是我上面粘贴的方法的[jad反汇编：](http://en.wikipedia.org/wiki/JAD_%28JAva_Decompiler%29)

```
public double next()
{
    double result;
    if(hasNext())
//*   0    0:aload_0         
//*   1    1:invokevirtual   #88  <Method boolean hasNext()>
//*   2    4:ifeq            32
        result = vis[i++].next();
//    3    7:aload_0         
//    4    8:getfield        #42  <Field VectorIterator[] vis>
//    5   11:aload_0         
//    6   12:dup             
//    7   13:getfield        #28  <Field int i>
//    8   16:dup_x1          
//    9   17:iconst_1        
//   10   18:iadd            
//   11   19:putfield        #28  <Field int i>
//   12   22:aaload          
//   13   23:invokeinterface #72  <Method double VectorIterator.next()>
//   14   28:dstore_1        
    else
//*  15   29:goto            42
        throw new IllegalStateException("No next value");
//   16   32:new             #89  <Class IllegalStateException>
//   17   35:dup             
//   18   36:ldc1            #91  <String "No next value">
//   19   38:invokespecial   #93  <Method void IllegalStateException(String)>
//   20   41:athrow          
    return result;
//   21   42:dload_1         
//   22   43:dreturn         
} 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-19T21:30:01.750

我发现这个方法看起来像一个热点，因为 VisualVM 被指示在其分析中忽略来自 JRE 的方法。在那些“被忽略”的方法上花费的时间（表面上）被滚动到调用堆栈的最顶层非忽略条目的自身时间中。

下面是 VisualVM 中的设置屏幕，包括导致数据错误的“不配置包”设置。要调整“忽略类”设置，您必须 (1) 单击以红色突出显示的“设置”复选框，然后 (2) 调整以蓝色突出显示的类设置。

![VisualVM 设置屏幕](https://i.imgur.com/s0yFHEP.png)

根据你在做什么，至少不要忽略`java.*`and`javax.*`包可能是有意义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T22:04:55.630

忘记分析器。只需暂停这该死的东西几次并检查堆栈。如果 85% 的时间进入该例程，那么在每次暂停时，您将有 85% 的机会准确地看到它在该例程中的位置，以及它的确切来源。您甚至可以看到它在矩阵相乘过程中的位置。成千上万的样本不会告诉你这一点。

我自己的感觉是调用该函数，然后执行`hasNext`，然后`Next`对*每个元素*执行操作将比`i++`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T17:15:01.227

我从经验中不了解 VisualVM。

首先确定它是否检测字节码以收集统计信息。如果是这样，请不要再观望 - 检测一个简短的方法总是会过度膨胀其自身时间（测量时间和增加统计计数器比方法本身花费更多时间）。

但是迭代器总是有可能比计算本身消耗更多的时间。想象一下，只是总结一个矩阵。与调用方法、检查不变量并最终访问数组相比，将浮点值添加到局部 sum 变量所需的时间要少得多。**

# python - 检测零膨胀和过度分散计数数据中的异常值

> ID：16065671
> 
> 赞同：4
> 
> 时间：2013-04-17T16:45:51.180
> 
> 标签：python, r, model-fitting

我要提前感谢您考虑我的问题。

我有一个我天真地认为是一个相当直接的问题，它涉及对许多不同的计数数据集进行异常值检测。具体来说，我想确定一系列计数数据中的一个或多个值相对于分布中的其余计数是否高于或低于预期。

令人困惑的因素是我需要对 3,500 个分布执行此操作，其中一些可能适合零膨胀的过度分散泊松，而其他可能最适合负二项式或 ZINB，而还有一些可能是正态分布。出于这个原因，简单的 Z 分数或分布图不适用于大部分数据集。这是我要检测异常值的计数数据示例。

```
counts1=[1 1 1 0 2 1 1 0 0 1 1 1 1 1 0 0 0 0 1 2 1 1 2 1 1 1 1 0 0 1 0 1 1 1 1 0 0 0 0 0 1 2 1 1 1 1 1 1 0 1 1 2 0 0 0 1 0 1 2 1 1 0 2 1 1 1 0 0 1 0 0 0 2 0 1 1 0 2 1 0 1 1 0 0 2 1 0 1 1 1 1 2 0 3]

counts2=[0 1 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 1 1 0 0 0]

counts3=[14 13 14 14 14 14 13 14 14 14 14 14 15 14 14 14 14 14 14 15 14 13 14 14 15 12 13 17 13 14 14 14 14 15 14 14 13 14 13 14 14 14 14 13 14 14 14 15 15 14 14 14 14 14 15 14 1414 14 15 14 14 14 14 14 14 14 14 14 14 14 14 13 16]

counts4=[0 3 1.......] 
```

依此类推，最多可达 3500 个。

最初我认为我需要在 Python 或 R 中编写一个循环，将一组模型应用于每个分布，并根据 AIC 或其他（可能是 R 中的 fitdistrplus？）选择最佳拟合模型。然后我可以问给定分布的极端情况是什么（落在尾部的计数，例如“4”的计数是否会成为上述 counts1 分布中的异常值？）。但是，我不确定这是一个有效的策略，我想到可能有一种简单的方法来确定我不知道的计数数据中的异常值。考虑到我想要查看的分布数量，我进行了广泛的搜索，但没有发现任何适合我的问题的东西。

我的最终目标是使用统计上最合适的方法检测每个计数分布的计数显着增加或减少。

再次感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:38:43.403

该`outliers`软件包为此类测试提供了良好的设施。

```
library(outliers)

x <- c(rep(c(0,1),1000),3)
chisq.test.out(x)

    chi-squared test for outlier

data:  x
X-squared = 24.6668, p-value = 6.815e-07
alternative hypothesis: highest value 3 is an outlier

> system.time(rep(chisq.out.test(x),3500))
   user  system elapsed 
  0.004   0.000   0.002 
```

# html - 有什么区别 和 HTML Tag?

> ID：16065677
> 
> 赞同：52
> 
> 时间：2013-04-17T16:45:57.043
> 
> 标签：html, html4

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2013-04-17T16:48:09.327

不要去w3schools。请查看 w3c 文档以获取[pre](http://www.w3.org/TR/html401/struct/text.html#edef-PRE)和[code](http://www.w3.org/TR/html401/struct/text.html#edef-CODE)。

上一篇：

> PRE 元素告诉视觉用户代理，封闭的文本是“预格式化的”。处理预格式化文本时，可视化用户代理：
> 
> *   可能会留下完整的空白。
> *   可以使用固定间距字体渲染文本。
> *   可以禁用自动换行。
> *   不得禁用双向处理。

代码：

> 指定计算机代码的片段。

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2013-04-17T16:46:47.523

`<pre>`说“这个元素中的空白很重要”（因此新行和空格被渲染为新行和空格）。

`<code>`说“这是代码”。

除了作为 HTML 元素之外，它们没有任何共同之处。

> W3Schools 页面，看起来它们是一样的

W3Schools 经常是错误的，经常是过时的，并且经常教最坏的做法。如果他们声称这两个元素做同样的事情，那么这只是避开该网站的另一个原因。

# html - Remove file from HTML5 manifest

> ID：16065678
> 
> 赞同：0
> 
> 时间：2013-04-17T16:45:59.067
> 
> 标签：html, cache-manifest

If I remove a file reference from the HTML5 cache manifest, will the browser (mobile Chrome) remove the cached file at some point? I'm concerned about cache size as the files in question are PDFs.

As far as I know, there is no way to programmatically remove a specific file from the cache.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:18:37.577

是的，一旦它检测到清单文件已更改，它将下载新版本的应用程序缓存。如果您想避免再次下载 PDF 文件，则应确保[设置 HTTP 远期到期标头](http://developer.yahoo.com/performance/rules.html#expires)，以最大限度地提高从浏览器缓存重新加载它们的机会。

# c# - entityframework 已经有一个与此命令关联的打开的 DataReader 必须先关闭

> ID：16065684
> 
> 赞同：12
> 
> 时间：2013-04-17T16:46:23.240
> 
> 标签：c#, .net, entity-framework, linq-to-sql

我有以下代码从客户表中检索数据

```
var customers= context.CustomerEntities.Include("Addresses").Select(Mapper.Map).ToList(); 
```

映射器函数，将实体对象映射到业务对象，它看起来像这样

```
 internal static Customer Map(CustomerEntity entity)
    {
        if (entity == null)
            return null;

        return new Customer
        {
            Id = entity.Id,
            Name = entity.Name,
            Addresses = Map(entity.Addresses)

        };
    } 
```

现在，上面的代码运行良好。

但是，当我尝试这样做时：

```
var customers= context.CustomerEntities.Select(Mapper.Map).ToList(); 
```

我收到错误消息：`There is already an open DataReader associated with this Command which must be closed first`正在执行 Mapper 函数时。

现在我知道要解决这个问题，我必须`multipleactiveresultsets=True`在我的连接字符串中进行设置。我试过了，它确实解决了我的问题。

但是，当我运行 SQL 分析器时，从实体框架查询所有客户也会自动检索所有地址，即使我不需要它们。

除了必须设置之外还有解决方法`multipleactiveresultsets=True`吗？我不希望地址一直被延迟加载。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-17T16:51:20.383

我相信这是因为对于每个`Customer`select 语句都会导致再次读取数据库。你为什么不先做`ToList()`，然后应用映射（`Select`）类似：

```
var customers= context.CustomerEntities.ToList().Select(Mapper.Map); 
```

我相信这会首先带来数据，然后进行映射，您就不会遇到这个问题。

# javascript - 获取 Java 变量以引用表单输入

> ID：16065689
> 
> 赞同：0
> 
> 时间：2013-04-17T16:46:49.717
> 
> 标签：javascript, forms

我试图让 document.bmi.answer.value 等于 ans。但它没有出现。有人在我的代码中看到任何错误吗？

这是在我的脑海中：

```
<script type="text/javascript">
function calcbmi()
{
var hh = parseFloat(document.getElementByName('height').value);
var ww = parseFloat(document.getElementByName('weight').value);
var ans = (( ww / ( hh * hh ))*703);
document.getElementByName('answer').value = ans;
}
</script> 
```

这是在我的身体里：

```
<form name="bmi">
<p> Height <input type="text" name="height"></p>
<p> Weight <input type="text" name="weight"></p>
<p> BMI <input type="text" name="answer" value=""></p>
<input type="button" value="Calculate" onclick="calcbmi();">
</form> 
```

谢谢您的帮助！

这是我的整个代码，因为我的错误不在 javascript 或表单中。我不能为我的生活看到它虽然..

```
<!DOCTYPE HTML>
<html>
<head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script type="text/javascript">
function calcbmi()
{
var hh = parseFloat(document.getElementByName('height').value);
var ww = parseFloat(document.getElementByName('weight').value);
var ans = (( ww / ( hh * hh ))*703);
document.getElementByName('answer').value = ans;
}
</script>
</head>
<body>
<h1>Body Mass Index</h1>
<form name="bmi">
<p> Height <input type="text" name="height"></p>
<p> Weight <input type="text" name="weight"></p>
<p> BMI <input type="text" name="answer" value=""></p>
<input type="button" value="Calculate" onclick="calcbmi();">
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:59:42.303

您的 JavaScript 中有一个错误阻止它执行（这里[是一个演示](http://jsfiddle.net/kJpTP/5/)）

```
function calcbmi() {
    var hh = parseFloat(document.bmi.height.value);
    var ww = parseFloat(document.bmi.weight.value);
    var ans = (ww / (hh * hh)) * 703;
    document.bmi.answer.value = ans;
} 
```

删除多余的`)`，你应该很好

现在您已经更新了代码以修复括号，您已经引入了一个新错误，您想要的命令（假设您要使用 name 属性）是`.getElementsByName()`(not `.getElementByName()`)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T16:49:59.310

采用

```
document.getElementByName('answer').value = ans; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T16:50:07.287

您需要使用`document.getElementById()`来获取 HTML 元素的值，更改此：

```
document.bmi.answer.value = ans; 
```

到：

```
document.getElementById('answer').value = ans; 
```

这应该有效。

# c# - 选择一组行并更新或删除一些：SqlDataReader 或 SqlDataAdapter+DataSet

> ID：16065692
> 
> 赞同：2
> 
> 时间：2013-04-17T16:46:55.610
> 
> 标签：c#, sql-server, ado.net, sqldatareader, sqldataadapter

我是 ADO.net 的新手，我需要从 DB 中检索一组行，然后逐一迭代并有条件地将它们发送到可能`UPDATE`或`DELETE`从 DB 接收行的某些对象。从`SqlDataReader`文档中我没有正确理解它是如何工作的（它是从数据库中读取所有行还是仅读取其中一些行或一个接一个？）来自[MSDN](http://msdn.microsoft.com/en-us/library/ms254931.aspx)：

> 结果在查询执行时返回，并存储在客户端的网络缓冲区中，直到您使用 DataReader 的 Read 方法请求它们。

*   什么时候返回结果？期间`command.ExecuteReader()`还是期间`reader.Read()`？Result 的内容是什么 - 所有数据还是部分数据？
*   什么是本地机器上的“网络缓冲区”？
*   从哪里`Read`读取数据？来自数据库还是来自缓存？

是否会影响数据修改（`UPDATE`或`DELETE`）从下一个数据的数据库中检索？代码存根：

```
using (SqlConnection connection = new SqlConnection(connectionString))
using (SqlCommand command = new SqlCommand(queryString, connection))
{
    connection.Open();
    using (SqlDataReader reader = command.ExecuteReader());
    {
    while (reader.Read())
        {
            //ReadSingleRow...
        //Perform some checks and if TRUE send to a manager obeject whcih perform UPDATE or DELETE on this record
        }
    }
} 
```

或更好地`SqlDataAdapter`与`DataSet`或`DataTable`在这里一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T23:21:04.170

对于您所描述的，最好使用 SqlDataAdapter 和 DataTable - 它们被设计为服务器数据的“离线缓存”，它将跟踪所做的任何更改并可以在 SqlDataAdapter.Update() 时更新服务器的副本叫。

SqlDataReader 被设计为来自服务器的只进、只读数据流——您必须构建自己的逻辑来更新服务器。

要回答您的其他问题：

> 什么时候返回结果？

ExecuteReader() 完成时返回结果。根据您的看法，这些是部分结果或完整结果 - 服务器已完全执行查询并将所有结果发送给客户端，但客户端一次只处理一个数据包。

> 什么是本地机器上的“网络缓冲区”？

MSDN 所说的“网络缓冲区”是指一个 8Kb（或由“数据包大小”连接字符串关键字设置的任何大小）字节数组，用于存储从服务器读取的最新网络数据包。这是处理网络数据的应用程序的标准做法——您将一大块数据从网络复制到本地缓冲区，解析该数据，然后获取下一个块。

> Read 从哪里读取数据？来自数据库还是来自缓存？

Read() 处理来自网络缓冲区的数据，直到缓冲区中没有更多数据，然后它将从网络中读取下一个数据包到缓冲区，并继续处理。

# github - github页面仍在提供已删除的文件

> ID：16065693
> 
> 赞同：4
> 
> 时间：2013-04-17T16:46:59.093
> 
> 标签：github, github-pages

我的 github-pages 设置使用 Jekyll。我有`.gitignore`包括`_site`等在内的标准设置。

另外我在根目录下放了一些静态的html内容：

```
/
/index.html
/blah
/blah/index.html 
```

如果我访问我的`*.github.com`网站，它会`/index.html`正确运行。如果我访问`/blah/index.html`，那也符合预期。

但是，如果我随后删除`/blah`并推送到 github，则 github-pages 将继续提供`/blah/index.html`. 就好像它没有检测到删除`/blah`

如何追踪此内容的提供位置并强制清除提供的页面？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T17:15:52.277

GitHub 团队最终确认这是一个错误。然而，在他们的电子邮件回复中，既没有任何关于这个错误是否已经修复的消息，也没有我可以采取哪些措施来防止它在未来发生。

因此，如果您也遇到这种情况，可能只是联系支持人员

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T17:42:49.357

您可能需要清除浏览器缓存。以火狐为例

`Tools` `Clear Recent History` `Cache`

# python - Is it possible to create encoded base64 URL from Image object?

> ID：16065694
> 
> 赞同：13
> 
> 时间：2013-04-17T16:46:59.670
> 
> 标签：python, base64, python-imaging-library

I am looking to create base64 inline encoded data of images for display in a table using canvases. Python generates and creates the web page dynamically. As it stands python uses the Image module to create thumbnails. After all of the thumbnails are created Python then generates base64 data of each thumbnail and puts the b64 data into hidden spans on the user's webpage. A user then clicks check marks by each thumbnail relative to their interest. They then create a pdf file containing their selected images by clicking a generate pdf button. The JavaScript using jsPDF generates the hidden span b64 data to create the image files in the pdf file and then ultimately the pdf file.

I am looking to hopefully shave down Python script execution time and minimize some disk I/O operations by generating the base64 thumbnail data in memory while the script executes.

Here is an example of what I would like to accomplish.

```
import os, sys
import Image
size = 128, 128
    im = Image.open("/original/image/1.jpeg")
    im.thumbnail(size)
    thumb = base64.b64encode(im) 
```

This doesn't work sadly, get a TypeErorr -

```
TypeError: must be string or buffer, not instance 
```

Any thoughts on how to accomplish this?

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-17T17:47:27.330

You first need to save the image again in JPEG format; using the `im.tostring()` method would otherwise return raw image data that no browser would recognize:

```
from io import BytesIO  
output = BytesIO()
im.save(output, format='JPEG')
im_data = output.getvalue() 
```

This you can then encode to base64:

```
image_data = base64.b64encode(im_data)
if not isinstance(image_data, str):
    # Python 3, decode from bytes to string
    image_data = image_data.decode()
data_url = 'data:image/jpg;base64,' + image_data 
```

Here is one I made with this method:

```
data:image/jpg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0aHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL/2wBDAQkJCQwLDBgNDRgyIRwhMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjL/wAARCACAAIADASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD3+iiigAooooAKwde8Y6D4aQ/2nqEccuNwhU7pG/4CKx/iX4zfwd4eEtqEN/cv5cAb+Hj5nx3xx+JFfMF3fXN/dSXN1M808rbnkc5LE0mwPeNU+PGkwoRpmm3NxJ6zkRr+mTWK/wAfb8x4TRLYP6mViPyryq10XVL5A9rp11Mn96OFmH5gVfj8H+IWOP7GvR/2xap5l3HZnpNt8fbsSD7VokDJ38qYqf1Brp9D+Nfh7UW2ajHLpshOAW/eIf8AgQHH5V4o3gnxGASNGvDj0iNUbjSL6y/4+rO4g/66xMv86FJPZhys+u7HUbLU7fz7G7guYTxvhkDj8xVuvjzS9b1Tw9fLc6Zey28gI+43DezDuPY19QeB/EbeKfClpqciqs7ZSZU6B1OD+fX8apMR0dFFFMAooooAKKKKACiiigD5u+NuqzXvjo2DcQ2MKIg93UMT+o/Kt/wJ4As7LT4NR1O3Sa+lUSKkgysQ7cetYPju2Gq/G97OQBkea3Rgf7uxC36ZrvPGmsz6F4amubQhZiRGjldwTPfFcmIk9IR6m9KK1kzpkjQD5AMDtUoTHSvIPhl4s1XVNYS1ubme6DKzz+ZGAseD8u1h1/KvZVHNcc4OErM6Iy5ldDVHA45oeOCVTHKiujcFWXIP4VMi5GO9fPuqeLvENv4y1BXm1EXCShbaFMLEp3DKsuDuXGR2PQ1VODnsKU+U6H4meAbexs21rSIRHCp/0iFBwuf4l9B6itX4B30pXWLAsTEvlzKPRjkH+Q/Ku8vkN54YuUnjGZbVg6H1KmvNfgJME1vV4CeXt1cD/dbH/s1dmHm5KzOetFJ3R7zRRRXSYhRRRQAUUVyXi74iaH4PxDdyNPesu5baHBYD1b+6KAOtorxf/hoG36f8I/J/4FD/AOJqpffH6ZomWz0FUc9GluNwH4BRSA5bxNr0Fn8a7vVJRvgt7wI+OcBVCE/hj9K9aivdH1mwIFxZ3dpIvILqwI9xXzPcXE11dzXM775pnLux/iYnJqLNYVaPtNTSnU5D6dsU8PaOjCzfT7Td94q6gn61cbxFosX+s1iwX63Cf418sq3NSbiO9ZfVe7NPb+R9RJ4q8P4z/benf+BKf41HJrHhGa6S7lv9Ge4X7srSxlx+PWvmRJOeSalEhC9x9Kf1Vdxe28j3fxh8SdEsdHubXTrlLy9ljaNPK5RMjG4t049q8/8AgxqP2T4hW8RbC3UMkJ/LcP1UVw5y55yTU+j6nPoWt2ep265ltpVkUHocdj9a2p01TWhlObkfZVFeU2Hx30CaIfbrC+tpO4QLIv55B/Srcnxy8KoQEh1GT3EKj+bVqSel0Vg+G/GGi+KoGl0u63sn34nG10+o/rW9TArX9yLPT7m6K7hDE0mPXAzXxrqup3OralcX95KZLidy7sfWvrjxe0y+DtZNum+YWU21f+AGvjl+DSAA2DS76jzSHjvSAl3CkJqEHNPzQBID83pUvT3quDzT1bNAEoJGKeDUOcUoegCyHx7+opGcE8jn1qv5mO5ppk5wKALW1OTnA9KcCmKo7yKkWT6UAdD4W12Xw54lstSjJxDKN6A43IfvL+VfXKOJI1deQwyK+Ko23MtfZumKV0qzUnJECAn1+UUwLLKGUqQCDxg18w/Er4c33hnVJ760gMukzuWjeNSfJzzsb09jX1BSEBhgjIpgfDeDyKawNfap0HRjKZDpNiXPVvs6ZP44p8ui6VNEY5dMs3Q/wtApH8qVgPicCn4x1rqfiHokPh/x1qlhbIEgWQPEg6KrKGC/hux+FcuaQhueeKUdabRmgCdenpTgKiVvenhs0DApimgU8/N3rd8IaOmueKtN02XPlTzqsmOPl6t+gNAHPeW7thVJ9gKmWzuCceS+RzjbX2Xp+iaXpMCQ2On21tGnQRRAVeEaA5CDPrinYD5S8EeB9R8VaxFCsMkVmrZuLgr8qr6A+voK+rY4xFEka8KoAFOAA6DFLTAKKKKACiiigD5l+N8bL8Q5mOMNbxFcemMf0rzVq9J+Nu//AIWJcb8bfs8W3Hpt/wAc15sxqRDDzSCn96aRg0AKKeDUfHSnA+tAEymuu+Gz7PiForetwB+YIrkB9a634cjd4+0b/r5WgZ9Z0Ug6UtUAUUUUAMSRHGVYGnVwVvq1wmMOavJ4guFH3qm5XKdhSEgCuRPiWUdWFV5/EUjr980XDlPHfjfKJPH74TaBbRjP97rz/T8K80Ndv8UbtrzxZvZs7YEX+Z/rXEdaCRMZ5FNbg89DUgrs/hl4OtfGfio2d+zizghM8qocF8EALnt1/SgRwwb5sU8V6D8YvBemeEfEFgdIiMNpdwFvJLltrKcHBJzzkfrXn69KAHqea7r4VQ+b8Q9JXHR2bn2RjXDL1r0L4PIG+I2nn+6kp/8AIbUDPp+iiiqAKKKKAMCPw3EB8zUTeHUKnYwJrfozSsPmZ59qGh3cGWWI7fWsGXfCSH4r11lVlIIBB7Vi6l4YstQU8eWx7ilYdz5p+IwB1yFxg7rden+81cbwa988ZfCXU9ViWSxlhlmizsBbbuB7HNefN8H/ABuD/wAgXP8A28xf/FUEs4Va9C+D+qHSfGhkIzFJbsknsMqf6UkPwZ8aSMA2mxRj1a5j/oa9M8FfCNNI0yZtVn/0+fGfJOVjUds96AOF+O+pR6nrmkmFt0Mdu+D7luf6V5Wte8eLPhFq+ooBaTxXAQ5jLNtYexz/AI1wFx8I/GluxA0dpR6xyof/AGagDiV613Hwr83/AIWNpHlHne2f93Y2f0qsnww8ZF9v9g3WffaB+ea9i+GHwzl8LSNq2qsrag6bI4l5EIPXnue350wPUKKKKYBRRRQB/9k= 
```

Unfortunately the Markdown parser doesn't let me use this as an actual image, but you can see it in action in a snippet instead:

```
<img src="data:image/jpg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0aHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL/2wBDAQkJCQwLDBgNDRgyIRwhMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjL/wAARCACAAIADASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD3+iiigAooooAKwde8Y6D4aQ/2nqEccuNwhU7pG/4CKx/iX4zfwd4eEtqEN/cv5cAb+Hj5nx3xx+JFfMF3fXN/dSXN1M808rbnkc5LE0mwPeNU+PGkwoRpmm3NxJ6zkRr+mTWK/wAfb8x4TRLYP6mViPyryq10XVL5A9rp11Mn96OFmH5gVfj8H+IWOP7GvR/2xap5l3HZnpNt8fbsSD7VokDJ38qYqf1Brp9D+Nfh7UW2ajHLpshOAW/eIf8AgQHH5V4o3gnxGASNGvDj0iNUbjSL6y/4+rO4g/66xMv86FJPZhys+u7HUbLU7fz7G7guYTxvhkDj8xVuvjzS9b1Tw9fLc6Zey28gI+43DezDuPY19QeB/EbeKfClpqciqs7ZSZU6B1OD+fX8apMR0dFFFMAooooAKKKKACiiigD5u+NuqzXvjo2DcQ2MKIg93UMT+o/Kt/wJ4As7LT4NR1O3Sa+lUSKkgysQ7cetYPju2Gq/G97OQBkea3Rgf7uxC36ZrvPGmsz6F4amubQhZiRGjldwTPfFcmIk9IR6m9KK1kzpkjQD5AMDtUoTHSvIPhl4s1XVNYS1ubme6DKzz+ZGAseD8u1h1/KvZVHNcc4OErM6Iy5ldDVHA45oeOCVTHKiujcFWXIP4VMi5GO9fPuqeLvENv4y1BXm1EXCShbaFMLEp3DKsuDuXGR2PQ1VODnsKU+U6H4meAbexs21rSIRHCp/0iFBwuf4l9B6itX4B30pXWLAsTEvlzKPRjkH+Q/Ku8vkN54YuUnjGZbVg6H1KmvNfgJME1vV4CeXt1cD/dbH/s1dmHm5KzOetFJ3R7zRRRXSYhRRRQAUUVyXi74iaH4PxDdyNPesu5baHBYD1b+6KAOtorxf/hoG36f8I/J/4FD/AOJqpffH6ZomWz0FUc9GluNwH4BRSA5bxNr0Fn8a7vVJRvgt7wI+OcBVCE/hj9K9aivdH1mwIFxZ3dpIvILqwI9xXzPcXE11dzXM775pnLux/iYnJqLNYVaPtNTSnU5D6dsU8PaOjCzfT7Td94q6gn61cbxFosX+s1iwX63Cf418sq3NSbiO9ZfVe7NPb+R9RJ4q8P4z/benf+BKf41HJrHhGa6S7lv9Ge4X7srSxlx+PWvmRJOeSalEhC9x9Kf1Vdxe28j3fxh8SdEsdHubXTrlLy9ljaNPK5RMjG4t049q8/8AgxqP2T4hW8RbC3UMkJ/LcP1UVw5y55yTU+j6nPoWt2ep265ltpVkUHocdj9a2p01TWhlObkfZVFeU2Hx30CaIfbrC+tpO4QLIv55B/Srcnxy8KoQEh1GT3EKj+bVqSel0Vg+G/GGi+KoGl0u63sn34nG10+o/rW9TArX9yLPT7m6K7hDE0mPXAzXxrqup3OralcX95KZLidy7sfWvrjxe0y+DtZNum+YWU21f+AGvjl+DSAA2DS76jzSHjvSAl3CkJqEHNPzQBID83pUvT3quDzT1bNAEoJGKeDUOcUoegCyHx7+opGcE8jn1qv5mO5ppk5wKALW1OTnA9KcCmKo7yKkWT6UAdD4W12Xw54lstSjJxDKN6A43IfvL+VfXKOJI1deQwyK+Ko23MtfZumKV0qzUnJECAn1+UUwLLKGUqQCDxg18w/Er4c33hnVJ760gMukzuWjeNSfJzzsb09jX1BSEBhgjIpgfDeDyKawNfap0HRjKZDpNiXPVvs6ZP44p8ui6VNEY5dMs3Q/wtApH8qVgPicCn4x1rqfiHokPh/x1qlhbIEgWQPEg6KrKGC/hux+FcuaQhueeKUdabRmgCdenpTgKiVvenhs0DApimgU8/N3rd8IaOmueKtN02XPlTzqsmOPl6t+gNAHPeW7thVJ9gKmWzuCceS+RzjbX2Xp+iaXpMCQ2On21tGnQRRAVeEaA5CDPrinYD5S8EeB9R8VaxFCsMkVmrZuLgr8qr6A+voK+rY4xFEka8KoAFOAA6DFLTAKKKKACiiigD5l+N8bL8Q5mOMNbxFcemMf0rzVq9J+Nu//AIWJcb8bfs8W3Hpt/wAc15sxqRDDzSCn96aRg0AKKeDUfHSnA+tAEymuu+Gz7PiForetwB+YIrkB9a634cjd4+0b/r5WgZ9Z0Ug6UtUAUUUUAMSRHGVYGnVwVvq1wmMOavJ4guFH3qm5XKdhSEgCuRPiWUdWFV5/EUjr980XDlPHfjfKJPH74TaBbRjP97rz/T8K80Ndv8UbtrzxZvZs7YEX+Z/rXEdaCRMZ5FNbg89DUgrs/hl4OtfGfio2d+zizghM8qocF8EALnt1/SgRwwb5sU8V6D8YvBemeEfEFgdIiMNpdwFvJLltrKcHBJzzkfrXn69KAHqea7r4VQ+b8Q9JXHR2bn2RjXDL1r0L4PIG+I2nn+6kp/8AIbUDPp+iiiqAKKKKAMCPw3EB8zUTeHUKnYwJrfozSsPmZ59qGh3cGWWI7fWsGXfCSH4r11lVlIIBB7Vi6l4YstQU8eWx7ilYdz5p+IwB1yFxg7rden+81cbwa988ZfCXU9ViWSxlhlmizsBbbuB7HNefN8H/ABuD/wAgXP8A28xf/FUEs4Va9C+D+qHSfGhkIzFJbsknsMqf6UkPwZ8aSMA2mxRj1a5j/oa9M8FfCNNI0yZtVn/0+fGfJOVjUds96AOF+O+pR6nrmkmFt0Mdu+D7luf6V5Wte8eLPhFq+ooBaTxXAQ5jLNtYexz/AI1wFx8I/GluxA0dpR6xyof/AGagDiV613Hwr83/AIWNpHlHne2f93Y2f0qsnww8ZF9v9g3WffaB+ea9i+GHwzl8LSNq2qsrag6bI4l5EIPXnue350wPUKKKKYBRRRQB/9k="/>
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T16:51:19.687

```
 thumb = base64.b64encode(im.tostring()) 
```

我认为会工作

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-07-20T04:13:17.360

在 Python 3 中，您可能需要使用`BytesIO`：

```
from io import BytesIO

...

outputBuffer = BytesIO()
bg.save(outputBuffer, format='JPEG')
bgBase64Data = outputBuffer.getvalue()

# http://stackoverflow.com/q/16748083/2603230
return 'data:image/jpeg;base64,' + base64.b64encode(bgBase64Data).decode() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-26T03:25:58.807

当我保存到缓冲区时，我使用 PNG。对于 JPEG，numpy 数组有点不同。

```
import base64
import io

import numpy as np
from PIL import Image

image_path = 'dog.jpg'

img2 = np.array(Image.open(image_path))

# Numpy -> b64
buffered = io.BytesIO()
Image.fromarray(img2).save(buffered, format="PNG")
b64image = base64.b64encode(buffered.getvalue())

# b64 -> Numpy
img = np.array(Image.open(io.BytesIO(base64.b64decode(b64image))))

print(img.shape)
np.testing.assert_almost_equal(img, img2) 
```

请注意，它会更慢。

# javascript - Can a function be called in if region and checked whether the function returns true or false?

> ID：16065696
> 
> 赞同：-2
> 
> 时间：2013-04-17T16:47:06.047
> 
> 标签：javascript, html

I am using the code

```
 function highlight()
{
var field=document.forms["signin"]["username"].value;
if(field.length==0)
return false;
} 
```

I write another function

```
function check()
{
 if (highlight()==false;)
 {
alert('message');
 }
} 
```

Can i call the function that way in the if region and check whether the function returns false?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:49:22.840

当然可以。表达式将`hightlight()`被评估并变成它的返回值，然后继续`== false`检查。

我看到的主要问题是您`return false`来自`if`声明内部，但如果您不进入声明内部，您将永远不会返回任何内容。

一个什么都不返回的函数变成了`undefined`，这是错误的，它总是会从第二个`check`函数触发你的警报。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T16:51:19.843

您的函数返回`false`或`undefined`。两者`false`和`undefined`等于`false`，因此检查将始终为真。像这样修复它；

```
function highlight() {
    var field=document.forms["signin"]["username"].value;
    if(field.length==0)
         return false;
    else
        return true;
} 
```

或者，您可以使用`===`代替`==`，因为虽然 是真的`undefined == false`，但不是真的`undefined === false`。

# javascript - Dojo: TypeError: dojo.byId(...).attr is not a function

> ID：16065697
> 
> 赞同：2
> 
> 时间：2013-04-17T16:47:12.967
> 
> 标签：javascript, html, dojo

Weird, line one works fine but line 3 give me `TypeError: dojo.byId(...).attr is not a function`. There is hidden fields that hold all student pair that as `<input type="hidden" id="_hidden_studentname_{somestudentid}" value="aStudentName">`, here {somestudentid} only indicate it as student id variable. The purpose of this is try to get a student name by student id.

```
dojo.connect(dijit.byId('_studentId_id'), 'onChange', function (val) {
    var studentId=dijit.byId("_studentId_id").attr("value"); // line 1
    var id="_hidden_studentname_"+studentId;
    var studentName=dojo.byId(id).attr("value");             // line 3
    dojo.byId("_student_text").attr("value", studentName);
}); 
```

So dojo doesn't allow variable put in `dojo.byId()`? I am pretty sure the `<input type="hidden">` with that id does exist....

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T17:21:28.740

请注意您`dijit.byId`在第 1 行中的使用方式，但`dojo.byId`在第 3 行中使用。前者返回一个小部件（具有`attr`函数），而`dojo.byId`后者返回一个没有`attr`方法的 DOM 元素。

DOM 元素可以直接操作属性，因此您可以更新代码以使用`something.value = 'some other value';`.

```
dojo.connect(dijit.byId('_studentId_id'), 'onChange', function (val) {
    var studentId=dijit.byId("_studentId_id").attr("value"); // line 1
    var id="_hidden_studentname_"+studentId;
    var studentName=dojo.byId(id).value;             // line 3
    dojo.byId("_student_text").value =studentName;
}); 
```

# sql - SQL 查询在获取结果集时花费了可笑的时间

> ID：16065700
> 
> 赞同：0
> 
> 时间：2013-04-17T16:47:20.177
> 
> 标签：sql, db2

我一直致力于优化登陆页面的许多 SQL 查询，其中查询根据用户选择拼凑在一起并发送到 DB2 数据库。一切都运行得很好，许多查询接近或不到一秒。作为性能测试，我们最近在测试数据库中加载了大量数据。一张表乘以大约 20 倍，从 40k 左右的记录增加到 750k 记录。我们希望粗略模拟一年左右会出现的数据量。从那以后，一些查询进行了调整，但特别是一组查询受到了严重的打击，即包含 75 万条记录的表。查询本身有许多连接，但我发现将其减少以在单个表上选择/过滤仍然需要 30 多秒。

查询本身从表中选择大约十几个列，并根据几个条件进行过滤。远程快速的唯一方法是将其完全削减并严格缩小过滤条件，以大大简化过滤或大幅减少行数。那样它会在几秒钟内执行，但是任何复杂程度的分层都会像疯了一样延迟执行。解释计划没有帮助。它显示的成本远低于运行时建议的成本，远低于 100k。有了这些数字，您预计它会在 2 秒内运行。

索引已经到位，但我开始怀疑一个糟糕的索引是否真的让它窒息。要了解查询结构...

```
SELECT 
--12 or so fields
FROM
TABLE A
--A few joins
WHERE
A.FIELD1 is not null
AND a.FIELD2 IN (:param) --max 2 values here
AND (a.FIELD3 BETWEEN :date1 AND date2
(OR A.FIELD3 < :date3 AND A.FIELD4 IN ('ONE','TWO'))) 
```

我已经修改并删除了 OR 子句中的位，这仅有助于非常简单的查询。否则运行时间仍然太长而无法产生影响。Runstats/分布式统计是准确的。桌子刚刚重组，没有任何帮助。我希望有人可以在这里提供一些指示。

更新：运行分布式统计。SYSIBM.SYSCOLDIST 和 SYSCAT.COLDIST 都显示了表 A 的当前数据。查询仍在可怕地运行，并且需要很长时间才能获取结果。可能会有更好的差异，但还不足以显着。值得注意的是，调整过滤器以返回一个小的结果集执行得非常快。更改过滤器以返回更大的过滤器需要永远获取行。一些简单的内部连接似乎不会破坏运行时，但是任何远程大或复杂的东西都会完全破坏它。这是唯一表现出这种行为的表。还有其他 270 万行的运行速度比这更快。

Aaaand 我想我找到了问题所在。事实证明，数据加载将这些日期置于一周的范围内，因此即使触及该范围也会使数据集达到数十万行。犯罪。是时候让脚本获取该范围内的日期并在一年的空间中以更好的分布更新行了……

Aaaand 这不完全是问题所在。在数据加载之前将该日期范围设置为较宽的区域会产生大约 4.5k 的结果，这很好，但仍然需要大约 9 秒，3.5 秒用于获取结果集。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:54:41.640

过时的统计数据通常是查询缓慢的原因，尤其是当缺少索引不是问题时。

具有“低”成本的解释计划也支持这一点。

而您刚刚插入大量数据的事实使这成为一个非常合理的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T16:51:53.787

您是否尝试过将其作为UNION？如果要显示任何重复项，可以使用 UNION ALL。

```
SELECT --12 or so fields
FROM TABLE A
--A few joins
WHERE A.FIELD1 is not null
AND a.FIELD2 IN (:param) --max 2 values here
AND a.FIELD3 BETWEEN :date1 AND date2
UNION
SELECT --12 or so fields
FROM TABLE A
--A few joins
WHERE A.FIELD1 is not null
AND a.FIELD2 IN (:param) --max 2 values here
AND A.FIELD3 < :date3 
AND A.FIELD4 IN ('ONE','TWO') 
```

如果这不是更快，您可以发布您的解释计划吗？

# mysql - iOS - Proper formatting of timestamps between mySQL (apache) and iOS (NSDate)

> ID：16065701
> 
> 赞同：1
> 
> 时间：2013-04-17T16:47:21.113
> 
> 标签：mysql, ios, timezone, timestamp, nsdate

I am trying to pass a timestamp (yyyy-MM-dd HH:mm:ss) from mySQL (running on apache) to iOS. Currently, mysql is set to this timezone:

```
default-time-zone='+00:00' 
```

When I pass this timestamp down to iOS, I use this code to convert the string to an NSDate:

```
-(NSDate *)formatDateWithString:(NSString *)dateString{
     NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
     [dateFormatter setDateFormat:@"yyyy-MM-dd HH:mm:ss"];
     NSDate* date = [dateFormatter dateFromString:dateString];
     NSLog(@"Formatted Timestamp: %@ - Original Timestamp: %@", date,dateString);
     return date;
} 
```

This is the output for a mySQL timestamp of 2013-04-17 16:33:56:

```
Formatted Timestamp: 2013-04-17 23:33:56 +0000 - Original Timestamp: 2013-04-17 16:33:56 
```

Why is iOS adding 7 hours? (FYI - I am located in San Francisco, Ca so I am sure it has something to do with my timezone being PDT. Just not sure why it is being converted that way when I don't specify it to be).

It is important to use the most "universal" timestamp possible in my app as I may have users all over the world and don't want to fuss with a lot of conversions. I want to be able to store the timestamps in mySQL, then just compare the differences between the stored server timestamp and the current server timestamp. I would prefer to not have to use a web request to get the "server time" everytime I need to do a comparison if possible.

**UPDATE**

By adding this line of code to my dateFormatter, it seems that the two times are now matching correctly:

```
[dateFormatter setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]]; 
```

However, can anyone verify that it will always continue to match, regardless of the time of year? (i.e. Daylight Savings time, etc.)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T16:53:56.950

默认情况下，NSDateFormatter 设置为 localTimeZone。由于您的 dateString 没有时区信息，因此它计算了 localTimeZone 的时间。如果您知道 dateString 的时区是 UTC，那么您需要将其设置为 dateFormatter。

NSDate 表示绝对时间，表示可以随 timeZones 变化，但它是一个唯一值，不受夏令时的影响。

```
-(NSDate *)formatDateWithString:(NSString *)dateString{
     NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
     [dateFormatter setDateFormat:@"yyyy-MM-dd HH:mm:ss"];
     [dateFormatter setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];
     NSDate* date = [dateFormatter dateFromString:dateString];
     NSLog(@"Formatted Timestamp: %@ - Original Timestamp: %@", date,dateString);
     return date;
} 
```

# .net - 如何打包使用 DotNetZip 库创建的 SFX 文件而不破坏文件？

> ID：16065702
> 
> 赞同：1
> 
> 时间：2013-04-17T16:47:27.300
> 
> 标签：.net, vb.net, dotnetzip, winzip, sfx

我已经使用**DotNetZip**库创建了一个自我可执行文件，现在我将打包该 exe。

我已经用**UPX**、**BoxedAPP**、**.NET Shrink**和**IlMerge**进行了尝试，它们都破坏了 SFX 文件。

> 重要的：

我尝试打包 SFX 的原因是因为在右键单击 SFX 文件时，我会找到一种方法来避免**WinZip** / **WinRar** / **7Zip或其他提取选项**

我的意思是选项：“将**文件提取到...** ”、“**在此处提取文件...** ”等。

因此，对我来说，任何解释如何打包**DotNetZip SFX 的答案或解释如何在使用****DotNetZip**创建 SFX 时避免该选项的答案都是有效的。

谢谢你的阅读。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-03T10:51:52.240

在打包器（如 BoxxedApp Packer）的帮助下，您可以创建一个可执行文件，它可以在没有“将文件提取到...”、“在此处提取文件...”等选项的情况下运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T16:26:24.953

您是否通过 DotNetZip创建了*exe文件？*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-01T07:57:14.233

我也有同样的情况。正如你所描述的那样，我完全想要它，因为我现在使用的方式存在一些安全漏洞。

**1)**我已将 Winrar SFX 自动提取器 (exe) 作为资源添加到我的项目中。

**2）**我将exe写入后台的“秘密”隐藏目录，所有名称都令人困惑。

**3)**写入完成后，从该位置运行 SFX (exe)。

**4）**提取器将文件（在我的情况下为电影）以只读（临时）模式放置在目录中，然后运行该文件。

**5）**我的应用程序尝试删除exe（提取完成后会成功，否则exe仍在使用中）。

**6）**当人们关闭电影播放器​​时，临时电影将被立即删除。

您的方法的不同之处在于我现在尝试隐藏我的文件。如果人们知道该位置并且能够在删除之前检索 exe 文件，那么他们可以直接提取它而不是运行它......我希望我们能够从资源中运行 exe，而不是编写它到电脑，因此可能会将文件暴露给人们。

# php - PHP: How to remove duplicates from an array

> ID：16065705
> 
> 赞同：1
> 
> 时间：2013-04-17T16:47:37.673
> 
> 标签：php

I am trying to write a function that takes an array and removes the duplicates, returning the result as a comma separated string. After some Googling, I found its possible to do itwith a single line ( return implode(",",unique_array($arr)); ). However, that doesn't help me figure out was wrong with my original code. So perhaps you could tell me the logical errors in my original code that causes it to return all the values, including the duplicates?

Thank you! :-)

```
<?php

function GetUniqueValues($arr) {
  $x=0;
  foreach($arr as $i) {
    if(!in_array($i, $arr2)) {
      $arr2[x]=$i;
      $x++;
    }
  }

  $str = implode(",",$arr);

  return $str;
}

$arr = array(1,2,2,3,2,4,4,5,4,7,6,8,9);

echo GetUniqueValues($arr);

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:48:59.140

`$arr2[x]=$i;`应该是`$arr2[$x]=$i;`（缺失`$`）

打开错误报告并将其设置为报告所有错误和通知。PHP 会告诉你这些错误。

```
ini_set('display_errors', 1); 
error_reporting(E_ALL); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T16:49:16.527

```
 $arr2[x]=$i; 
```

这是错误的。你错过了一个`$`- 标志。应该：

```
 $arr2[$x]=$i; 
```

顺便提一句。你也可以这样做：

```
 $arr2[]=$i; 
```

# bash - 如何找到重复的 [s] 行 [s] 并将其删除？

> ID：16065707
> 
> 赞同：0
> 
> 时间：2013-04-17T16:47:48.387
> 
> 标签：bash, shell, nagios, nrpe

我必须在我的`nrpe.cfg`文件中附加这一行，在 200 多台服务器中：

```
command[check_utc]=/company/nrpe/libexec/check_utc.sh 
```

但是对于某些问题，有些机器不止一次有这条线。所以现在我想检查是否有不止一次并将其删除，只留下指定命令的一行。我需要在`shell`脚本中执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:34:06.523

**方法一：消除所有重复行**

```
 cat filename | sort | uniq > outfile
    mv outfile filename 
```

这些`|`字符将左侧命令的输出作为输入提供给右侧的命令。

该`cat`命令将文件内容读取到标准输出（屏幕或其他文件）

该`sort`命令按字母顺序对输出进行排序，这是在使用`uniq`...

该`uniq`命令消除相邻的重复值

将`> outfile`最后一步的输出写入名为“outfile”的文件

该`mv`命令将原始文件替换为新的数据文件 outfile

此方法将具有破坏性，因为它将删除任何类型的所有重复行，而不仅仅是您要删除的行。

**方法2：删除特定行的所有实例，然后重新添加一次**

```
 cat filename | sed 's/command\[check_utc\]\=\/company\/nrpe\/libexec\/check_utc.sh//' > outfile
    mv outfile filename 
```

该`sed`命令允许对特定字符串模式执行字符串替换。此类命令的格式是`sed 's/find/replace/'`在每一行中查找“find”的第一个实例并将其替换为“replace”。为了使它适用于每一行的每个实例，你在末尾添加“g”，即`sed 's/find/replace/g'`

这些`\`字符会导致`sed`按字面意思解释字符串中的特殊字符，否则这些字符会被误读为特殊指令。

上面的命令将完全删除该特定字符串的所有实例（将其替换为空），然后您需要编辑代码并将其重新添加一次

**方法3：删除所有实例，然后自动重新添加到文件末尾**

```
 cat filename | sed 's/command\[check_utc\]\=\/company\/nrpe\/libexec\/check_utc.sh//' > outfile
    mv outfile filename
    echo "command[check_utc]=/company/nrpe/libexec/check_utc.sh" >> filename 
```

这与上面的代码相同，但在删除字符串的所有实例后，您`echo`可以打印该行`>>`并将文本附加到文件名内容的末尾

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T16:57:26.523

如果线条不相邻，并且您不介意对它们进行排序，这将起作用。

```
$ cat foo.txt
wings of fire
this is a test
food that are killing you
this is a test 
```

结果

```
$ sort -u foo.txt
food that are killing you
this is a test
wings of fire 
```

# ruby - Ruby - 在 EC2 上远程连接到 Mongodb

> ID：16065711
> 
> 赞同：0
> 
> 时间：2013-04-17T16:47:54.153
> 
> 标签：ruby, mongodb, amazon-ec2

我已经超出 localhost 并且不知道如何远程连接到我的 EC2 服务器。 `MongoClient.new('ec2-XX-XX-XX-XX.compute-1.amazonaws.com', 27017, pool_timeout: 300)`不起作用，我见过的大多数文档都与设置集群有关。

即使不推荐：我什至编辑了安全参数以接受所有 TCP/UDP/ICMP 连接，但仍然收到`: Failed to connect to a master node at ec2-xx-xx-xx-xx.compute-1.amazonaws.com:27017 (Mongo::ConnectionFailure)`错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:41:47.407

您需要确保 mongodb 实例的安全组允许带有您的 ruby​​ 应用程序的实例连接到端口 27017。

# asp.net-mvc-3 - MVC 中的分页列表

> ID：16065713
> 
> 赞同：1
> 
> 时间：2013-04-17T16:47:58.300
> 
> 标签：asp.net-mvc-3, pagedlist

要执行分页，我遵循了这个方法 [http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/sorting-filtering-and-paging-with-the-entity-framework-在-an-asp-net-mvc-应用程序中](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application)

现在我要做的是通过从下拉列表中选择一个值来更改页面大小

```
 Page Sige :
           @{
             IList<SelectListItem> pageSizeList = new List<SelectListItem>();
             pageSizeList.Add(new SelectListItem { Text = "5", Value = "5", Selected = true });
             pageSizeList.Add(new SelectListItem { Text = "10", Value = "10" });
             pageSizeList.Add(new SelectListItem { Text = "15", Value = "15" });
             pageSizeList.Add(new SelectListItem { Text = "20", Value = "20" });
             pageSizeList.Add(new SelectListItem { Text = "25", Value = "25" });
             }
             @Html.DropDownListFor(per => per.PageSize, pageSizeList, new
             {
                @onchange = "location.href='/AdminSearchResult/AdminSearchResult?pageSizeInput=' + this.value;"
             }) 
```

从下拉列表中选择值后，我对排序和分页操作链接进行了一些更改。我加了一个bool参数isPageSort，如下

```
@Html.ActionLink("  Previous Page  ", "AdminSearchResult", new { page = Model.PageNumber - 1, sortOrder = ViewBag.CurrentSort, currentFilter = ViewBag.CurrentFilter, isSortPage = "true"  }) -------For paging

@Html.ActionLink("Last Name", "AdminSearchResult", new { sortOrder = ViewBag.LastNameSortParm, currentFilter = ViewBag.CurrentFilter, isSortPage = "true" }) ------For sorting 
```

基于这个 bool 参数，我将当前页面大小保存在会话中并检索以在我的控制器中保持页面大小。

```
[HttpGet]
    public ActionResult AdminSearchResult(string sortOrder, int? page, int pageSizeInput = 0,  bool isSortPage = false)
    {
        int pageSize = 5;         
        int pageNumber = 1;
        if (page != null)
            pageNumber = Convert.ToInt32(page);

        if (!isSortPage)
        {
            if (pageSizeInput != 0)
                pageSize = pageSizeInput;
            Session["pageSize"] = pageSize;
        }
        else
            pageSize = (int)Session["pageSize"];

        Session["sortOrder"] = sortOrder;
        Session["pageNumber"] = pageNumber;

        var userList = SortResult(sortOrder);

        return View(userList.ToPagedList(pageNumber, pageSize));
    } 
```

我想知道是否有更有效的方法来做同样的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-13T12:17:52.680

@dotnetBeginner您好，您可以在MVC中使用分页列表，它比这更灵活......

# objective-c - 文本字段值未显示在我的视图中

> ID：16065715
> 
> 赞同：2
> 
> 时间：2013-04-17T16:48:01.087
> 
> 标签：objective-c, xcode

我正在编写一个接收 OSC 消息的应用程序。这是[一个截图](http://i.stack.imgur.com/vBcCy.png)。

当我将突出显示的代码放入 receivedOSCMessage 方法（每次收到消息时调用）时，文本字段不会显示 my_textfield.text 的更新值，即使它确实在控制台中打印了正确的值。但是，如果我把它放在 ViewDidLoad 中，它就可以正常工作。可能是什么原因造成的？

编辑： receivedOSCMessage 是一个委托方法。

以下是 OSCMViewController.h 的内容：

```
#import <UIKit/UIKit.h>

@interface OSCMViewController : UIViewController
@property (retain, nonatomic) IBOutlet UITextField *my_textfield;

@end 
```

Edit2：在 nib 中创建的文本字段。

消息通过单独的应用程序手动发送。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:36:54.960

看起来该方法正在触发，并且消息的内容具有一个已成功表示为字符串的浮点数。您还指出，在设置文本字段的值时，您可以看到文本字段的内容`viewDidLoad`。

这是在视图准备好*之前*触发 receivedMessage 方法的有力证据。`viewDidLoad`要确认，请在和 中添加断点`receivedMessage`。我的猜测是你会`receivedMessage`首先看到断点。

另一种可能性是消息接收组件正在从主线程发送委托消息，并且您的 UI 更新会因此而丢失。尝试在 receivedOSCMessage 方法中将您的代码包装在这样的主线程块中......

```
 dispatch_async( dispatch_get_main_queue(), ^{
       // do the ui work here
       my_textfield.text = dat_string;
    }); 
```

# java - 正则表达式不会找到所有需要的项目

> ID：16065717
> 
> 赞同：0
> 
> 时间：2013-04-17T16:48:06.707
> 
> 标签：java, regex

嗨，我正在做一个价格检查器，它会从超市网站返回最便宜的商品名称和价格。代码中的大多数价格都采用 ...price:3.14... 格式，但有些价格只是 ...price:2...

这是已经输入示例搜索的网站，如果您愿意，请查看源代码 [http://www.tesco.ie/groceries/product/search/default.aspx?searchBox=ham](http://www.tesco.ie/groceries/product/search/default.aspx?searchBox=ham)

我的正则表达式通常会从源代码中提取 18/20 个项目，但是当它的价格仅为 1 位数时，arraylist 变得不同步。

我的问题是如何让正则表达式同时选择这两种类型并将它们添加到数组列表中以保持同步。

这是获取价格的正则表达式

String priceFinder = "price:(\d{1,3})(.\d{1,2})";

如果有帮助，这里是更多代码

```
 public static Product addProducts(String item)  throws Exception {

            //@SuppressWarnings("resource")

            productList.clear();
            item = checkCommonItems(item);
            item = item.replaceAll("\\s+", "%20");

            URL oracle = new URL("http://www.tesco.ie/groceries/product/search/default.aspx?searchBox="+item);
            BufferedReader in = new BufferedReader(new InputStreamReader(oracle.openStream()));

            String inputLine;
            String name, price;
            int productArrayNumber = 0;

            String nameFinder = "name:\"([\\w{1,15} ]*)";
            String priceFinder = "price:(\\d{1,3})(.\\d{1,2})";
            while ((inputLine = in.readLine()) != null){
                    Pattern namePattern = Pattern.compile(nameFinder);              
                    Matcher nameMatcher = namePattern.matcher(inputLine);
                    Pattern pricePattern = Pattern.compile(priceFinder);
                    Matcher priceMatcher = pricePattern.matcher(inputLine);

                    while(nameMatcher.find()){
                            exists = false;
                            name = nameMatcher.group(1);
                            for(int i = 0; i < productList.size();i++)
                            {
                                    Product productExists = productList.get(i);
                                    if(productExists.getProductName().equals(name))
                                    {
                                            exists = true;
                                    }                              
                            }
                            if(exists== false)
                            {

                                    Product productNew =new Product(name,null);
                                    productList.add(productNew);
                            }

                    }
                    while(priceMatcher.find() && productArrayNumber<productList.size()){
                            price = priceMatcher.group(1);
                            price = price + priceMatcher.group(2);
                            Product productEdit = (Product) productList.get(productArrayNumber);
                            productEdit.setProductPrice(price);    
                            productList.set(productArrayNumber, productEdit);              
                            productArrayNumber++;
                    }
            }
            Product cheapest = null;
            if(productList.size() != 0)
            {

                    cheapest = productList.get(0);
                    for (int a = 0; a < productList.size()-1; a++)
                    {
                        System.out.println(productList.get(a));
                            Double chpPrice = Double.parseDouble(cheapest.getProductPrice());
                            Double cmpPrice = 500.0;
                            if(productList.get(a).getProductPrice() != null)
                            {
                                    cmpPrice = Double.parseDouble(productList.get(a).getProductPrice());
                                    if(chpPrice > cmpPrice)
                                    {
                                            cheapest = productList.get(a);
                                    }
                            }
                    }
                    in.close();
            }

            return cheapest;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:53:27.673

我假设您的问题仅存在于正则表达式中，因为您声称它对于包含`.\\d{1,2}`部分的价格正常工作。您的问题可能是您没有转义`.`，因为它是正则表达式中的特殊字符。此外，`.\\d{1,2}`在将其添加到`price`.

尝试一下`price:(\\d{1,3}(\\.\\d{1,2})?)`并使用`price = priceMatcher.group(1);`

# jquery - 我添加了仅适用于第一个数据表页面的 jQuery 代码

> ID：16065724
> 
> 赞同：0
> 
> 时间：2013-04-17T16:48:20.523
> 
> 标签：jquery, pagination, datatables

我将我的书存放在一张桌子上，并尝试将它们显示在一张桌子上 [图片 - 标题 - 年份]。所以我使用了数据表。Datatables 为我的表添加了 Ajax 搜索和分页系统。
在我的应用程序中，当我将图像悬停时，它通常会显示一个工具提示。问题是仅适用于第一页。

```
<table class="display" id="example" >
<thead>
    <tr class="odd gradeU">
        <th>Cover</th>
        <th>Title</th>
        <th>Year</th>
    </tr>
</thead>
<tbody>
    <?php
$cmp=1;
while ($row = mysqli_fetch_assoc($result))
{
 if ($cmp%2==0) echo '<tr class="odd gradeX">';
 else echo '<tr class="even gradeX">';
 echo '
 <td>
    <img id="cover'.$cmp.'" src="./covers/'.$row["ISBN"].'.jpg"/>
 </td>   
 <td style="font-size:22px;font-weight:bold; color:blue;">'.
                htmlspecialchars_decode($row["title"]).'
     </td>
 <td>
    <div id="year'.$cmp.'" >'.
        $row["year"].'
    </div>
</td>
</tr>';
$cmp++;
}
?>
</tbody>
<tfoot>
    <tr class="odd gradeU">
        <th>Cover</th>
        <th>Title</th>
        <th>Year</th>
    </tr>
</tfoot>
 </table> 
```

javascript和css代码是：

```
<link rel="stylesheet" type="text/css" href="includes/demo_page.css" />
<link rel="stylesheet" type="text/css" href="includes/demo_table.css" />
<script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
<script type="text/javascript" language="javascript" src="includes/jquery.dataTables.min.js"></script>
<script type="text/javascript" charset="utf-8">
        $(document).ready(function() {
            $('#example').dataTable();
        } );

$("[id^='cover']").bind({
            'mouseover':
                function(){
                    var intermed=$(this).attr("id");
                    var str=intermed.replace("cover","");
                    //$('#'+intermed).text("0");
                    $('#popup'+str).show();
                    },
            'mouseout':
                function(){
                    var intermed=$(this).attr("id");
                    var str=intermed.replace("cover","");
                    setTimeout(
                        function(){
                            $('#popup'+str).hide();
                            }
                        ,3000);
                    }
            })    
</script> 
```

# highcharts - Highcharts 页脚间距

> ID：16065727
> 
> 赞同：4
> 
> 时间：2013-04-17T16:48:22.490
> 
> 标签：highcharts

使用 Highcharts 我想将页脚文本放在图表下方。我能看到的唯一方法是使用 credits 属性。但是对于长文本，它看起来局促。有没有办法设置学分以增加间距？

[http://jsfiddle.net/QbEvN/](http://jsfiddle.net/QbEvN/)

```
 credits: {
        position: {
            align: 'center'
        },
        text: 'this is some really long text that i am using as a footer',
        href: null
    }, 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T17:38:36.180

如果您决心利用页脚的信用选项。您可以根据需要使用以下选项来分隔它：

```
 chart: {
        marginBottom: 100 //space from axis to chart bottom
    },
    legend: {y: -20}, // position between axis and legend

    credits: {
        text: 'This is so super duper uper long text. Look at all this space!',
        position: {
            align: 'center',
            y: -5 // position of credits
        },
        style: {
            fontSize: '14pt' // you can style it!
        }
    }, 
```

[在这里](http://jsfiddle.net/jeAJN/)拉小提琴。

![在此处输入图像描述](https://i.stack.imgur.com/j3EQv.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T17:04:18.533

看一下标签元素：

[http://api.highcharts.com/highcharts#labels](http://api.highcharts.com/highcharts#labels)

您还可以调整图表的 marginBottom 以提供所需的空间。

# php - Zend_Controller_Router_Route_Regex 和分页问题

> ID：16065728
> 
> 赞同：0
> 
> 时间：2013-04-17T16:48:25.223
> 
> 标签：php, zend-framework, pagination

***我英语说得不好，很抱歉。***

编码。

路由器.ini：

```
routes.cat1.type = "Zend_Controller_Router_Route_Regex"
routes.cat1.route = "showcat/(\d+)-(\d+)"
routes.cat1.defaults.module = "default"
routes.cat1.defaults.controller = "category"
routes.cat1.defaults.action = "viewcategory"
routes.cat1.map.1 = "id1"
routes.cat1.map.2 = "page"
routes.cat1.reverse = "showcat/%d-%d" 
```

当我访问时：

```
showcat/6 
```

它返回错误：**指定的控制器无效（showcat）**

但是当我访问时：

```
showcat/6-1 
```

它工作正常。

当我添加以下路由器来解决上述问题时：

```
routes.cat2.type = "Zend_Controller_Router_Route_Regex"
routes.cat2.route = "showcat/(\d+)"
routes.cat2.defaults.module = "default"
routes.cat2.defaults.controller = "category"
routes.cat2.defaults.action = "viewcategory"
routes.cat2.map.1 = "id1"
routes.cat2.reverse = "showcat/%d" 
```

但分页不起作用。

谁能帮我解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T21:27:41.893

首先，我会使用正斜杠而不是破折号：

`routes.cat2.route = "showcat/(\d+)/(\d+)"`

但是，无论哪种情况，您的正则表达式都需要知道第二个语句是否不存在，所以：

`routes.cat2.route = "showcat/(\d+)(?:/(\d+))?"`

或者，用破折号：

`routes.cat2.route = "showcat/(\d+)(?:-(\d+))?"`

注意问号 - 表示该项目是否必须存在。

请记住为路由中的第二个参数设置默认值：

`routes.cat2.route.defaults.2 = 1`

# iphone - MPMusicPlayerController 随机歌曲

> ID：16065730
> 
> 赞同：-3
> 
> 时间：2013-04-17T16:48:29.967
> 
> 标签：iphone, ios, objective-c, cocoa-touch, mpmusicplayercontroller

我有这个代码用于选择和播放 ipod 歌曲

```
- (void)mediaPicker: (MPMediaPickerController *)mediaPicker didPickMediaItems:(MPMediaItemCollection *)mediaItemCollection{
[self dismissViewControllerAnimated:YES completion:nil];
[riproduttore setQueueWithItemCollection: mediaItemCollection];
[riproduttore play]; 
```

}

我如何在没有 pikerview 的情况下加载随机歌曲？

前任。rnd 1 到 100，结果 = 66，我可以在 ipod 库中播放索引为 66 的歌曲

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:58:38.180

尝试这样的事情：

```
MPMediaQuery* query = [MPMediaQuery songsQuery]; 
NSArray *songs = [query items];
MPMediaItem *randomTrack = [songs objectAtIndex:arc4random_uniform([songs count])];
// ... and then play with MPMediaPlayer, AVPlayer, etc. 
```

# svg - Createjs.Bitmap(SVG) 将像 Chrome 中的矢量一样缩放，但像 Firefox 中的位图一样缩放

> ID：16065739
> 
> 赞同：1
> 
> 时间：2013-04-17T16:49:24.190
> 
> 标签：svg, easeljs

大家好，
我最近开始研究 Canvas 和库。我为当前的项目选择了 EaselJs，但我遇到了一个奇怪的结果。

这是我到目前为止所做的：[测试页](http://s213926116.online.de/KeepCool/test2.html)

您可以使用鼠标滚轮放大和缩小。当我在 Chrome 中这样做时，图像将表现得像一个矢量，尽管它是我从 SVG 创建的 createjs.Bitmap。
在 Firefox 中它不会，我认为它应该是这样的。但是如果这样做会非常方便，并且由于某种原因它在 Chrome 中运行良好。

我认为在性能方面，这将是一个更好的解决方案，而不是使用那些会产生大量 JavaScript 代码的转换器将 SVG 转换为形状，尤其是因为形状已经非常复杂。

任何人都可以帮忙吗？

# android - 这个 Ninepatch 图像有什么问题？

> ID：16065753
> 
> 赞同：1
> 
> 时间：2013-04-17T16:50:23.040
> 
> 标签：android, nine-patch

我不明白，为什么这个 9patch 图像没有在我的 android 应用程序中设置为 Ninepatch。出于某种原因，它将其显示为常规 png 文件。

奇怪的是，draw9patch 工具和 Eclipse 内置 UI 设计器都正确显示了图像（它正在正确展开），但在 nexus 7 上却没有。

我附上图片。

![Google+ 按钮 9patch](https://i.stack.imgur.com/VXswp.png)

这不是文件名，因为 9patch 是使用 draw9patch 工具创建的，文件名是“ **google_button.9.png** ”

**这是 XML 代码**

```
<Button
            android:id="@+id/btn_googleplus"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal"
            android:background="@drawable/google_button"
            android:minWidth="300dp"
            android:text="@string/login_login_with_google"
            android:textColor="#ffffffff"
            android:textStyle="bold"
            android:textSize="19sp"
            android:layout_marginTop="15dp"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:57:39.543

看来 9-patch 不行，我简化成了这个。请试一试。当我使用 9-patches 时，我只放置顶部和左侧边缘标记；我想在 png 周围放置标记在某些时候会造成混乱。

![9 补丁图像更新](https://i.stack.imgur.com/C0eYI.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T17:07:35.733

确保它在 drawable-hdpi 中，否则它会重新缩放，并且一个像素黑色有时无法很好地缩放。对于此类图像，最好将它们用于所有 dpi

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T17:23:59.020

9patch 图像的背景是全透明的还是白色的？

API 指南说，

> 边框用于定义图像的可拉伸和静态区域。您可以通过在边框的左侧和顶部绘制一条（或多条）1 像素宽的黑线来指示可拉伸部分（其他边框像素应完全透明或白色）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-30T01:16:31.443

Lefteris，我发现本教程有助于理解为什么我在 Photoshop 中创建的 NinePatch 图像（图像和指南）存在问题：

[http://radleymarx.com/blog/simple-guide-to-9-patch/](http://radleymarx.com/blog/simple-guide-to-9-patch/)

具体来说，这一段：

> 您还应该记住，一像素轮廓的剩余区域必须完全透明。这包括图像的四个角——它们应该始终清晰。这可能是一个比你意识到的更大的问题。例如，如果您在 Photoshop 中缩放图像，它将添加抗锯齿像素，其中可能包括几乎不可见的像素，这也会导致图像失败*。如果您必须在 Photoshop 中缩放，请使用“重新采样图像”下拉菜单（位于“图像大小”弹出菜单的底部）中的“最近邻”设置来保持参考线的锐利边缘。

我发现首先在 Photoshop 中准备图像，然后使用 draw9patch 工具绘制指南是创建*工作*NinePatch 图像的最佳方式。该工具的好处是它会指出有问题的区域。如前所述，右侧和底部指南不是必需的，因为您可以通过将 1px 边框从您不想拉伸的顶部和左侧区域中轻松指定内容区域 - 以下是我需要放置的示例横幅屏幕的底部。我需要确保两个内容区域都没有延伸。此外，我还想确保左侧内容区域的左侧和右侧内容区域的右侧不会发生拉伸：

![在此处输入图像描述](https://i.stack.imgur.com/QUflJ.png)

希望这可以帮助。

# backbone.js - 为什么我的 Backbone 1.0.0 仅在 IE8 中无法从启用 CORS 的服务器跨域加载数据

> ID：16065754
> 
> 赞同：0
> 
> 时间：2013-04-17T16:50:27.857
> 
> 标签：backbone.js, internet-explorer-8, jsonp, cors

我构建了一个从域提供的 Backbone 1.0.0 应用程序：`beta.mydomain.com`. 此应用程序从仅 JSON 的 API 中获取数据，该 API 可通过`api.mydomain.com`.

由于这会导致浏览器跨域策略发挥作用，因此我完全为 CORS 请求打开了我的 API 服务器。每个请求的响应标头包括：

```
HTTP/1.1 200 OK
Access-Control-Allow-Origin: *
Access-Control-Allow-Methods: POST, PUT, GET, OPTIONS, DELETE 
```

对于我迄今为止测试的所有浏览器来说，这似乎已经足够了。但它在 IE8 中失败并出现“传输错误”。

下一步：JSONP。当我扩展同步并设置时，`options.dataType = "jsonp"`我在所有浏览器中都收到错误消息：

```
Uncaught SyntaxError: Unexpected token < 
```

我不知道在哪里，它来自哪里。有没有机会让 CORS 请求在 IE8 中工作，或者有什么方法可以“简单地”启用 JSONP，以便我的 Backbone 应用程序也可以在 IE8 中工作？

拼命地……菲利克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:53:11.590

这`Unexpected token <`通常表示 HTML 在您不期望的地方返回。在这种情况下通常会出现错误页面，因为 JSONP 需要一个小的脚本有效负载来执行/评估。

您可以在 Chrome 开发工具或 Firebug 的网络选项卡中检查 HTTP 响应的内容。如果您有权访问返回（或不返回）您的 JSON 或 HTML 的服务器，您还可以查看服务器日志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T17:02:28.833

Backbone.js 在后台使用 $.ajax，它本身使用 IE8 不支持跨域请求的 XMLHttpRequest 对象。

因此，您必须使用与 XMLHttpRequest 非常相似但用于 IE 和跨域请求的 XDomainRequest 对象。

不过，我自己也遇到了这个确切的问题，并编写了一个库来替代 Backbone 的同步，它会在后台自动处理所有 XDomainRequest 内容，因此您的其余代码无需更改即可与 IE7/8/ 一起使用9

[https://github.com/victorquinn/Backbone.CrossDomain](https://github.com/victorquinn/Backbone.CrossDomain)

只需在 Backbone.js 之后包含该库，您在 IE 上的 CORS 请求就会神奇地起作用。

# javascript - jquery 对话框小部件不保留父级

> ID：16065755
> 
> 赞同：2
> 
> 时间：2013-04-17T16:50:29.247
> 
> 标签：javascript, jquery, html, jquery-ui, jquery-ui-dialog

这是一个非常简单的脚本来说明我的观点。我想我只是做错了什么。 [http://jsfiddle.net/9qx2q/2/](http://jsfiddle.net/9qx2q/2/)

HTML

```
<form id='myForm'>
    <div class="panelClass"> 
        Here's my jquery panel
    </div>
</form> 
```

和脚本

```
//when the div is dialog'ed it's relocated to be a child of body?
$('.panelClass').dialog({
    //appendTo : '#myForm', // uncomment to see that this does not move the panel
    create : function(e, ui) {
        //$(this).dialog('widget').appendTo('#myForm'); //uncomment to see that this DOES move the panel
    }
}); 
```

输出

```
<body>
  <form id="myForm"></form>
  <div class="ui-dialog ui-widget ui-widget-content ui-corner-all ui-draggable ui-

resizable" style="outline: 0px; z-index: 1003; position: absolute; height: auto; width: 300px; top: 235px; left: 104px; display: block;" tabindex="-1" role="dialog" aria-labelledby="ui-id-1"><div class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix"><span id="ui-id-1" class="ui-dialog-title">&nbsp;</span><a href="#" class="ui-dialog-titlebar-close ui-corner-all" role="button"><span class="ui-icon ui-icon-closethick">close</span></a></div><div class="panelClass ui-dialog-content ui-widget-content" style="width: auto; min-height: 82px; height: auto;" scrolltop="0" scrollleft="0"> 
            Here's my jquery panel
        </div><div class="ui-resizable-handle ui-resizable-n" style="z-index: 1000;"></div><div class="ui-resizable-handle ui-resizable-e" style="z-index: 1000;"></div><div class="ui-resizable-handle ui-resizable-s" style="z-index: 1000;"></div><div class="ui-resizable-handle ui-resizable-w" style="z-index: 1000;"></div><div class="ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se ui-icon-grip-diagonal-se" style="z-index: 1000;"></div><div class="ui-resizable-handle ui-resizable-sw" style="z-index: 1000;"></div><div class="ui-resizable-handle ui-resizable-ne" style="z-index: 1000;"></div><div class="ui-resizable-handle ui-resizable-nw" style="z-index: 1000;"></div></div>
</body> 
```

您将从上面的示例中看到，表单元素现在是空的，面板是在表单之后创建的。当在面板上调用 .dialog() 时，面板将移动到 .dialog() 的末尾`<body>`。

基本上情况是这样的。我在表单中有一个面板。此面板需要在表单内，因为当它弹出时，它将具有需要在表单上维护的输入元素。（有时我们会弹出这些面板让用户提交更多信息等）。

虽然我确实有一个可行的解决方案，即通过更新 create 方法，但我真的不认为这应该首先移动元素......除非......我只是做错了什么。

任何建议将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T17:07:40.770

根据文档`appendTo`将添加到 jQuery UI 1.10.0 [http://api.jqueryui.com/dialog/#option-appendTo](http://api.jqueryui.com/dialog/#option-appendTo)

您面临的是 jQuery UI 对话框的默认行为，它将对话框附加在正文[http://bugs.jqueryui.com/ticket/7948](http://bugs.jqueryui.com/ticket/7948)的末尾，所以我认为这不是您的代码的问题.

目前唯一的解决方法是你现在在做什么`create`或`open`事件。

## 编辑

如果你愿意，你也可以看看这个我的答案：[Append jQuery UI dialog to its parent](https://stackoverflow.com/questions/13264201/append-jquery-ui-dialog-to-its-parent/16118392#16118392)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T16:59:03.727

假设您使用的是 HTML5，您可以将`form`属性设置为`<input>`与表单相关联，而无需在`<form>`标签中包含元素：

```
<input type="text" form="myForm"> 
```

# c++ - 文件之间的前向声明

> ID：16065761
> 
> 赞同：4
> 
> 时间：2013-04-17T16:51:08.153
> 
> 标签：c++, forward-declaration

全部：

我有两个文件：

主文件

```
#include <iostream>

using namespace std;

class A;

int main(){
    A a;
    a.disp();

    return 0;
} 
```

和 A.cpp

```
#include <iostream>
using namespace std;

class A{

    public:
    A(){}
    void disp(){ cout<<"this is A disp()"<<endl;}
}; 
```

我想知道为什么当我编译这两个文件时，它告诉我：

main.cpp：在函数'int main（）'中：main.cpp：8：4：错误：聚合'A a'类型不完整，无法定义

我认为是因为我不明白如何使用前向声明，所以有人可以告诉我该怎么做吗？

顺便说一句，我知道执行此操作的头文件方式，但我只想弄清楚这种前向声明方式。

最好的，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T16:54:58.687

由于您只是将它声明为一个类（即您没有告诉编译器该类包含什么），因此它无法为它创建内存（它不知道它需要多大）。

您*可以*做的是定义指向`A`类的指针：

```
int main(){
    A *a;
    // a->disp() is still invalid

    return 0;
} 
```

但你将无法用它做任何事情。

这正是标题的用途！

啊：

```
class A{
public:
    A(){}
    void disp();
}; 
```

A.cpp：

```
#include "A.h"
void A::disp(){
    cout<<"this is A disp()"<<endl;
} 
```

包含`a.h`在文件中后，您将能够按预期创建和使用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T16:54:02.887

`main`需要知道类的大小`A`，以及它有一个成员函数`disp()`。为此，必须有权访问类声明。将它放在一个文件中`A.h`（带有[包含保护](http://en.wikipedia.org/wiki/Include_guard)且*没有 using namespace std*），并将其包含在`main.cpp`.

文件`A.h`

```
#ifndef A_H_
#define A_H_

#include <iostream>

class A
{
    public:
    A(){}
    void disp() const { 
      std::cout<<"this is A disp()"<<std::endl;
    }
};

#endif 
```

主.cpp：

```
#include "A.h"

int main() { .... } 
```

请注意，您可以决定将实现`void A::disp()`放在`A.cpp`文件中而不是标题中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T16:56:52.213

当你只在另一个类声明中使用指向一个类的指针时，只需要一个前向声明。这意味着此时仅知道类的名称，但不知道其成员的定义或大小。类型不完整。

当您实际上想要使用成员变量或成员函数时，或者当类被自动变量或使用 new() 实例化时，或者类型被用来在另一个类中声明成员时。正常的类声明必须在该点之前完成，并且在该点必须知道类定义，因此必须在同一翻译单元中包含类定义。

一个有用的例子：前向声明通常用于规避循环类依赖/包含。如果一个类有第二类的成员，那么它也有第一类的成员。当一个包含另一个，另一个包含一个时，就会出现问题。当您只使用前向声明并将实际包含推迟到以后，不再有循环包含。

# android - 在“复杂”布局上滑动事件

> ID：16065762
> 
> 赞同：0
> 
> 时间：2013-04-17T16:51:09.677
> 
> 标签：android, swipe-gesture

我正在尝试在布局上实现滑动手势。这是xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<ViewSwitcher
    android:id="@+id/switcher"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/blister_background" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical"
        android:weightSum=".9" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:layout_weight=".3"
            android:orientation="horizontal"
            android:weightSum="1" >

            <ImageView
                android:id="@+id/imgOne"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:layout_weight=".5"
                android:src="@drawable/yellow" />

            <ImageView
                android:id="@+id/imgTwo"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:layout_weight=".5"
                android:src="@drawable/yellow" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:layout_weight=".3"
            android:orientation="horizontal"
            android:weightSum="1" >

            <ImageView
                android:id="@+id/imgThree"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:layout_weight=".5"
                android:src="@drawable/yellow" />

            <ImageView
                android:id="@+id/imgFour"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:layout_weight=".5"
                android:src="@drawable/yellow" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:layout_weight=".3"
            android:orientation="horizontal"
            android:weightSum="1" >

            <ImageView
                android:id="@+id/imgFive"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:layout_weight=".5"
                android:src="@drawable/yellow" />

            <ImageView
                android:id="@+id/imgSix"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:layout_weight=".5"
                android:src="@drawable/yellow" />
        </LinearLayout>
    </LinearLayout>
</ViewSwitcher>

</RelativeLayout> 
```

在 java 代码中，我为 设置了`setOnTouchListener`，`ViewSwitcher`返回由 . 返回的布尔值`GestureDetector`。所以我重写了该`onFling`方法，实际上它有效。唯一的问题是，如果我不触摸 Imageviews，它就可以工作。

ImageViews 正在监听该`onClick`事件。

那么，我怎样才能在 Imageviews 上滑动并仍然调用`onFling`方法中的代码呢？

我试图为`onTouchListener`他的 ImageViews 设置偶数，但他们不再捕捉到该`onCLick`事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:08:40.977

将`ViewSwitcher`布局作为**wrap_content**放置，如下所示：

```
<ViewSwitcher
    android:id="@+id/switcher"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/blister_background" > 
```

# r - 使用 R 包进行路由优化

> ID：16065771
> 
> 赞同：3
> 
> 时间：2013-04-17T16:51:24.617
> 
> 标签：r, optimization, vehicle-routing

我是 R 的新手。我正在尝试找出可用于物流优化问题的功能/包。例如，考虑到公司有 5 辆卡车，每辆卡车的最大运输量，我们如何才能最大化卡车运送货物的路线。容量为 500 盒，但无法达到最大限制。

请参阅下表，让您更清楚地了解我的示例问题。

```
TABLE 1\.  Current Set-up per Truck          
TruckNo  Current_Cap_Per_Truck   Max_Cap   Available_Space
      1                    500       500                 0
      2                    500       500                 0
      3                    300       500               200
      4                    300       500               200
      5                    300       500               200 
```

表 1 显示卡车 1 和 2 达到了最大容量，但卡车 3、4 和 5 各只装了 300 个箱子。如您所见，总共有 600 个盒子占用了可用空间。我在想也许我们可以调整 3、4 和 5 号卡车的负载，以便我们可以最大限度地提高每辆卡车的容量并最大限度地减少要使用的卡车数量。

有没有人有使用 R 包或函数来解决这类问题的经验？R 提供了几个优化包，但我不知道如何开始编写脚本。谢谢你。

# java - 如何在多个 PU 之间最好地共享实体类/DAO？

> ID：16065773
> 
> 赞同：1
> 
> 时间：2013-04-17T16:51:31.160
> 
> 标签：java, spring, jakarta-ee, jpa, architecture

让我们举一个基本的例子，假设我们有一个实体类

```
@Entity
public class User {
} 
```

以及用于处理数据的 DAO：

```
public interface UserDao {
    @Transactional
    public void changeUser(User user);
}

@Repository
public class UserDaoImpl implements UserDao {
    @PersistenceContext
    private EntityManager em;

    @Override
    public void changeUser(User user) {
        // ...
    }
} 
```

我们有一个主 Maven 项目，其中包含许多其他子项目，我们用于构建多个应用程序（WAR、JAR 等）。我们选择的框架是 Spring。

每个应用程序都需要上述实体/DAO，并且不需要每个应用程序自定义，一切都保持不变。每个应用程序都有自己的数据源/持久性单元/事务管理器。

如何在多个应用程序中最好地重用上述实体/DAO？实体需要持久保存在应用程序的数据库中，我们还需要重用应用程序的事务管理器。

你在类似的情况下做了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T21:59:12.753

我将创建包含实体和 DAO 的单独 Maven 模块（您甚至可以创建两个模块 - 一个用于实体，一个用于 DAO）。

该模块将作为依赖项添加到需要 DB 层的任何其他应用程序模块（EJB 或 WAR 模块）。在 Spring 配置中，您应该为数据源、持久性上下文、事务管理器等正确定义注入规则。这样，您将拥有具有不同配置的通用代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T23:25:09.697

我同意，模块化类是容易的部分；自动化配置查找/加载是棘手的部分。

我想可以为每个模块创建一个`applicationContext.xml`（在其中列出 bean、控制器等）并使用多重配置支持来加载它们。但由于显然我们不能将所有 XML 文件命名为相同，我建议如下：

主要项目`web.xml`：

```
 <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>classpath*:auto-appctx-*.xml</param-value>
    </context-param> 
```

还有一个 Maven/Ant 脚本，它会在打包每个模块/JAR 期间为 XML 文件添加时间戳，如下所示：

```
 <target name="copy-unique-appctx">
        <timestamp/>
        <copy src="src/resource/applicationContext.xml"
            dest="build/classes/auto-appctx-${timestamp}.xml"/>
    </target> 
```

请注意，这个 Ant 目标是“按记忆”键入的，目前还很粗略，需要更正（如果这个想法确实有效）。

# jquery - 收到参数后调用JSP并从Servlet返回数据

> ID：16065774
> 
> 赞同：0
> 
> 时间：2013-04-17T16:51:33.987
> 
> 标签：jquery, ajax, jsp, servlets

我在 Jquery 中调用 JSP 页面为

```
 onExpandRow: function(index,row){                    
                    height:160,  
                    border:true,  
                    cache:true,                          
                    href:'service.jsp?empNo='+empNo, 
```

在 service.jsp 中，我想将参数传递给 servlet 并以 JSON 格式返回数据。

JSP 代码片段

```
 $(document).ready(function(){
$.ajax({ url: "service.jsp",
        context: document.body,
        success: function(){
           $.get('myservlet?empNo=<%=request.getParameter("empNo")%>',
        function(data) { 
```

出于某种原因，这不起作用，但是如果我直接调用 service.jsp?empNp=JAMES，那么它会按我的预期工作。

当我在 Jquery 中单击一行时调用 service.jsp 时，如何以及从 servlet 获取值的最佳方法是什么？理想情况下，我想调用 service.jsp，只要调用 service.jsp，就想调用 servlet 并返回数据并显示结果。

任何帮助都是非常可观的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:00:54.820

我希望我理解正确，但要回答你的最后一个问题。这是我的：

第 1 步：在 JSP 中，您将参数的值存储在隐藏字段中

```
<input type="hidden" id="empNo" value="<%=request.getParameter("empNo")%>" /> 
```

第 2 步：在 document.ready 上对 myservlet 进行 ajax 调用：

```
 $(document).ready(function(){
$.ajax({ url: "myservlet",
        data : {empNo : $('#empNo')}
        success: function(data){
//handle the result returned in data          
        }
       }
   } 
```

# apache - 如何在使用 Nginx -> HAProxy -> Apache 的设置中提供静态内容？

> ID：16065775
> 
> 赞同：0
> 
> 时间：2013-04-17T16:51:37.563
> 
> 标签：apache, nginx, load-balancing, haproxy

在下面的堆栈设置中，我可以在哪里提供静态内容？（不能选择使用 CDN）。

我没有知道我应该把它们放在哪个服务器上（服务器 2 和 3，这意味着静态请求也将通过 HAProxy？）或者是否应该在第一个实例中提供静态请求（这样静态内容将从 Nginx 和存储在 server1) 中。

```
Nginx (server 1) - Nginx due to SSL
       \/
HAProxy (server 1)
   \/         \/
Server 2   Server 3
(Apache)   (Apache) 
```

一些额外的问题：

1.  Nginx 和 HAProxy 应该在不同的服务器上？
2.  Server2 和 Server3 应该在 :80 上有 Nginx，然后如果是静态的，则提供它，如果不是，则代理到同一服务器上的 Apache？

![堆](https://i.stack.imgur.com/kD9GF.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T20:32:43.293

我会将静态放置在服务器 #1 上，以使行程尽可能短。这样您就不必在服务器#2 和#3 上复制静态文件。

在与 nginx 相同的服务器上拥有负载均衡器根本不是问题。您可以单独使用 nginx 来实现简单的负载均衡器。

# coldfusion - ColdFusion：对所有表单输入字段使用 HTMLEditFormat 的最佳方式

> ID：16065782
> 
> 赞同：0
> 
> 时间：2013-04-17T16:51:58.757
> 
> 标签：coldfusion, coldfusion-8, cfml

我`HTMLEditFormat`对每个输入字段都有表单使用调用。有什么办法让我只能调用`HTMLEditFormat`一次函数，它会处理所有输入字段而不是将其添加到每个字段中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T19:53:02.330

以下将实现您的目标，但就像评论部分指出的那样，这可能不是您的最佳选择。

```
<cfset cleanForm = {}>
<cfloop list="#form.fieldnames#" index="i">
  <cfset cleanForm[i] = HTMLEditFormat(form[i])>
</cfloop> 
```

`form.firstName`您现在将引用而不是引用`cleanForm.firstName`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T19:46:35.240

不，您必须`HTMLEditFormat()`分别针对每个表单值应用该函数。但是，如果您当前正在为每个表单字段编写一行代码来执行此操作：

```
cleanFormData.firstName= HTMLEditFormat(form.firstName)
cleanFormData.lastName= HTMLEditFormat(form.lastName) 
```

您可以修改代码以利用所有这些表单值都在表单范围内的事实 - 这本质上是一个 ColdFusion 结构变量 - 您可以编写循环通过结构并应用于`HTMLEditFormat()`当前表单值的代码迭代。

# acl - OpenLDAP ACL 命令

> ID：16065785
> 
> 赞同：0
> 
> 时间：2013-04-17T16:52:09.277
> 
> 标签：acl, openldap

我在 slapd.conf 文件中有 3 个 ACL。

```
1\. access to attrs=userPassword
    filter="(&(objectClass=customAttributes)(!(statusCode=A)))"
    by * none

2\. access to attrs=userPassword
    filter="(&(objectClass=customAttributes)(statusCode=A))"
    by self =wx
    by * =x

3\. access to dn.subtree="dc=mycompany,dc=com"
    by self write
    by group.exact="cn=administrators,dc=mycompany,dc=com" write
    by group.exact="cn=applications,dc=mycompany,dc=com" read
    by * auth 
```

ACL 1 和 2 的目的是禁用状态代码不是 A 的任何用户。它工作正常。ACL 3 的目的是使`member`组成`administrators`为管理员，并使`member`组`applications`具有只读访问权限。其他所有人都必须进行身份验证。

如果我按上述顺序拥有 ACL，那么对于 ACL 3，我无法`userPassword`使用管理员帐户读取/编辑任何用户的字段。如果我在 1 和 2 之前有 ACL 3，则 ACL 1 和 2 不起作用。

我需要遵循 ACL 的任何特定顺序吗？这 3 个 ACL 可以合并为一个 ACL 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T23:12:42.767

我必须按如下方式更改 ACL 2

```
2\. access to attrs=userPassword
    filter="(&(objectClass=customAttributes)(statusCode=A))"
    by self =wx
    by group.exact="cn=administrators,dc=mycompany,dc=com" write
    by * =x 
```

`by * =x`原因：早期的 ACL 3 没有执行，因为我在 ACL 2 ( )中拥有其他所有内容的只读权限。

# ios - iOS：在 UIPanGestureRecognizer 事件中获取组件 ID

> ID：16065786
> 
> 赞同：0
> 
> 时间：2013-04-17T16:52:20.077
> 
> 标签：ios, uiviewcontroller, uipangesturerecognizer

在上一个[不成功的帖子之后](https://stackoverflow.com/questions/16060112/ios-wrong-effect-with-recognizer-view-center-cgpointmake/)，我想通过在调用 (UIPanGestureRecognizer *)recognizer) 方法时获取组件识别器的 ID 来尝试解决该问题的新方法。在我的代码下面：

```
- (IBAction)handlePan:(UIPanGestureRecognizer *)recognizer{

// Here, I want to get the ID of the recognizer eg: (a button.id)

} 
```

请问，我该怎么做才能捕获 ID 对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T17:24:42.517

我不知道您认为“id”是什么或它可能有什么好处。如果您想知道*该对象是否与**该*对象相同，只需将它们与相等运算符进行比较即可。

在`handlePan:`中，平移手势识别器是`recognizer`. 您可以从那里轻松获得的所有其他东西都是`recognizer`. 例如，正在平移的视图（被触摸的视图）是`recognizer.view`. 阅读 UIGestureRecognizer 文档（和 UIPanGestureRecognizer 文档）以获取完整列表。

当然，这是您的方法，因此如果您通过属性为自己提供了对其他信息的访问权限，则可以访问这些信息。例如，如果`self`是 MyViewController，那么您可以访问 MyViewController 的所有公共和私有属性。

# javascript - 安装 JQuery 时更改了哪些文件

> ID：16065793
> 
> 赞同：0
> 
> 时间：2013-04-17T16:52:34.590
> 
> 标签：javascript, jquery, css, web

你修改了哪些文件？

例如对于“Camera”和“RCarousel”，它们都带有自己的关联文件。我知道我必须将代码添加到一页.....但是该页是标题中信息的主文件吗？还是我只将代码添加到代码要去的页面？

您是否还修改了网站的任何现有 .css 页面，或者滑块的所有信息都是从它自己的关联文件中提取的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:01:22.793

您需要将脚本标签添加到需要插件的 html 页面。您可以在`head`or`body`标记中添加这些。添加标签的顺序很重要，例如，您必须在依赖 jquery 的任何插件或脚本之前包含 jQuery。

例如：

```
<html>
    <head>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
        <script src="myOtherPlugin.js"></script>
        ...other content...
    </head>
    <body>
         ...other content...
    </body>
</html> 
```

# c# - How to check if you try to copy old files by LINQ

> ID：16065796
> 
> 赞同：1
> 
> 时间：2013-04-17T16:52:49.303
> 
> 标签：c#, linq

I want to get answer if I can replace old files or not - if files are older I don't want to copy. The problem is - the count of files in every directory can be different.

I don't want to write many methods, just one simply LINQ query, but I am rather weak in LINQ.

I would like to return true or false using LINQ.

```
System.IO.FileInfo[] filesSource = new System.IO.DirectoryInfo(sources).GetFiles();  
System.IO.FileInfo[] filesTarget = new System.IO.DirectoryInfo(target).GetFiles();  

bool canCopy = ... 
    /* group - if file have the same name
       if can't match and group - simply ignore it */ ...
(x => x.Source.LastWriteTime < x.Target.LastWriteTime).Count() == 0; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:09:27.703

This is the best i can come up with

Linq Way :

```
System.IO.FileInfo[] filesSource = new System.IO.DirectoryInfo(source).GetFiles();
            System.IO.FileInfo[] filesTarget = new System.IO.DirectoryInfo(dest).GetFiles();

bool canCopy = !(from fileInfo in filesSource 
                 let tmp = filesTarget.FirstOrDefault(f => f.Name == fileInfo.Name) 
                 where tmp != null && tmp.LastWriteTime > fileInfo.LastWriteTime 
                 select fileInfo).Any(); 
```

Normal Way :

```
private static bool CanCopyAllFiles(string source, string dest)
{
    System.IO.FileInfo[] filesSource = new System.IO.DirectoryInfo(source).GetFiles();
    System.IO.FileInfo[] filesTarget = new System.IO.DirectoryInfo(dest).GetFiles();

    foreach (FileInfo fileInfo in filesSource)
    {
        FileInfo tmp = filesTarget.FirstOrDefault(f => f.Name == fileInfo.Name);
        if (tmp != null && tmp.LastWriteTime > fileInfo.LastWriteTime)
        {
            return false;
        }
    }
    return true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T17:20:50.643

So the first thing you need to do is to join the two collections of files. You need to match up each source file with it's destination file (if any). This is done with a `GroupJoin` (as opposed to a regular join as we want to return items with no matching destination item).

Once we've done the join then we can filter out the items that both have a destination file, and for which the destination file is more recent.

```
public static IEnumerable<FileInfo> FilesToCopy(DirectoryInfo source, DirectoryInfo target)
{
    return from sourceFile in source.GetFiles()
            join targetFile in target.GetFiles()
            on sourceFile.FullName equals targetFile.FullName
            into destinationFiles
            let targetFile = destinationFiles.FirstOrDefault()
            where !destinationFiles.Any() ||
                sourceFile.LastWriteTime > targetFile.LastWriteTime
            select sourceFile;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T17:15:33.233

If you are looking to do it in linq you can join your lists on name and then compare LastWriteTime between Source and Target...

```
 var filesToCopy = filesSource
            .GroupJoin(filesTarget, source => source.Name, target => target.Name,
                  (source, target) => new { Source = source, Target = target })
            .Where(x => !x.Target.Any() || x.Target.First().LastWriteTime < x.Source.LastWriteTime);
        foreach (var file in filesToCopy)
        {
            // copy file
        } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-17T17:03:14.157

Your question is not very clear but this copies files that are newer in the source

```
foreach (var target in from target in filesTarget from source in filesSource where target.LastWriteTime < source.LastWriteTime select target)
{
    // Copy
} 
```

# javascript - 我的功能没有返回

> ID：16065797
> 
> 赞同：0
> 
> 时间：2013-04-17T16:52:50.233
> 
> 标签：javascript, canvas, return

喂！满足条件时，我的函数没有返回（退出）。

```
var arrowReady = false;
var arrowImage = new Image();
var deg = 0;
arrowImage.onload = function () {
    arrowReady = true;
    function moveArrow() {
        setInterval(function() {
            ctx1.save();
            deg++;
            ctx1.rotate(deg * Math.PI / 180);
            // Here is  ^  the amount of degrees it turns.
            ctx1.clearRect(300, 200, 52, 310);
            ctx1.drawImage(arrowImage, 300, 100, 42, 300);
            ctx1.restore();
        }, 100);

        if (deg == 40) return;

    }
} 
```

据我了解，当 deg = 40 时，该功能应该停止。但是，事实并非如此。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T16:56:18.230

棘手的 javascript 在这里进行。`moveArrow`仅在文档加载时调用一次。是否返回不会阻止您的间隔运行。

您需要保存对间隔的引用：

```
var interval = setInterval(... 
```

然后在匿名`setInterval`函数内，当`deg ==40`你想要`clearInterval(interval)`阻止它运行时。

尝试这个：

```
var arrowReady = false;
var arrowImage = new Image();
var deg = 0;
arrowImage.onload = function () {
    arrowReady = true;
    function moveArrow() {
        var interval = setInterval(function() {
            if (deg == 40) {
              clearInterval(interval);
              return;
            }
            ctx1.save();
            deg++;
            ctx1.rotate(deg * Math.PI / 180);
            // Here is  ^  the amount of degrees it turns.
            ctx1.clearRect(300, 200, 52, 310);
            ctx1.drawImage(arrowImage, 300, 100, 42, 300);
            ctx1.restore();
        }, 100);

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T16:55:52.340

我不是 JavaScript 程序员，但您不需要指定要返回的值吗

例子`if (deg == 40) return deg;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T16:57:11.200

目前尚不清楚最后一个条件甚至应该做什么。它之后什么都没有，所以函数无论如何都会在那里停止执行。`deg == 40`无论如何，如果这是函数调用结束的地方，这有什么关系呢？

我敢肯定，更重要的是，所讨论的函数实际上并没有*改变*. `deg`所以在那条线上`deg`永远不会相等。`40`您正在做的是排队另一个函数以在以后运行（100 毫秒？）。在该函数排队后，控件*立即*转到该`if`语句（在其他函数运行之前）。

因此，在语句执行`deg`后，在完全不同的函数范围内进行修改。`if`

# jquery - Jquery 选项卡显示点击事件的子菜单

> ID：16065801
> 
> 赞同：0
> 
> 时间：2013-04-17T16:52:56.920
> 
> 标签：jquery

我有包含子菜单的选项卡。目前 sbu 菜单显示在悬停事件中，但我希望它显示在单击事件中。当我添加点击事件时，它不起作用。我发现每当用户点击主菜单页面时都会刷新。这是代码

```
<!DOCTYPE html>
     <html lang="en">
    <head>
       <title>jQuery Tabbed Navigation</title>

       <style type="text/css">
       * {margin:0;padding:0;}
       body {
           font-family: Georgia,serif;
           font-size:11px;
           line-height:18px;
           background-color:#f0f0f0;
       }
       a {
           color:#333;
           text-decoration:none;
       }
       #header {
           float:left;
           width:100%;
           height:139px;

           border-bottom:1px solid #4A7A97;
       }
       .menu {
           margin:75px auto 0;
           width:900px;
           position:relative;
           text-align: center;
       }
       #main_nav li {
           text-align:left;
           list-style:none;
           display:block;
           float:left;
       }
       #main_nav li a {
           background:#3D362D;
           padding:9px 12px;
           position:relative;
           color:#f4f4f4;
           text-transform: uppercase;
       }
       #main_nav li a.active, #main_nav .sub_nav li a {
           background:#578FB2;
           border-bottom: 1px solid #578FB2;
       }
       .sub_nav {
           display:none;
           text-align:left;
           position:absolute;
           top:35px;
           left:0px;
       }
       #main_nav .sub_nav li a:hover {
           text-decoration: underline;
       }
       </style>

       <script type="text/javascript" src="http://jqueryjs.googlecode.com/files/jquery-1.3.2.min.js"></script>
       <script type="text/javascript">
       $(document).ready(function(){
           $("#main_nav li a.main").click(function(){

               $("#main_nav li a.main").removeClass("active");
               $(this).addClass("active");
               $(this).queue(function() {                    
                   $(".sub_nav").fadeOut();
                   $(this).siblings(".sub_nav").fadeIn();
                   $(this).dequeue();
               });
           });
       });
       </script>

   </head>
   <body>

       <div id="wrapper">

           <div id="header">

               <div class="menu">
                   <ul id="main_nav">
                       <li><a href="" class="main">Home</a>
                           <ul class="sub_nav">
                               <li><a href="">SEO</a></li>
                               <li><a href="">WordPress</a></li>
                               <li><a href="">Rants</a></li>
                           </ul>
                       </li>
                       <li><a href="" class="main">Company</a>
                           <ul class="sub_nav">
                               <li><a href="">Browser Add-ons</a></li>
                               <li><a href="">Plug-ins</a></li>
                               <li><a href="">WordPress</a></li>
                           </ul>
                       </li>
                       <li><a href="" class="main">Clients</a>
                           <ul class="sub_nav">
                               <li><a href="">SEO Services</a></li>
                               <li><a href="">Web Analytics</a></li>
                           </ul>
                       </li>
                   </ul>
               </div>

           </div>

       </div>

   </body>
</html> 
```

我从其他博客复制了上面的代码。

任何建议都会有很大帮助

谢谢大家，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:55:12.193

使用`e.preventDefault()`：

```
 $(document).ready(function(){
           $("#main_nav li a.main").click(function(e){
               e.preventDefault();                 
               $("#main_nav li a.main").removeClass("active");
               $(this).addClass("active");
               $(this).queue(function() {                    
                   $(".sub_nav").fadeOut();
                   $(this).siblings(".sub_nav").fadeIn();
                   $(this).dequeue();
               });
           });
       }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T17:10:39.390

我认为你应该使用

```
 <a href="#"> 
```

在你的 html 中。

[编辑] 请查看[href vs. onclick 中的 JavaScript 函数以](https://stackoverflow.com/q/1070760/2115381)获取更多详细信息和更好的解决方案

# r - 闪亮服务器中缺少的软件包

> ID：16065805
> 
> 赞同：4
> 
> 时间：2013-04-17T16:53:13.103
> 
> 标签：r, shiny, shiny-server

我正在尝试使用闪亮创建一个 Web 应用程序。它需要我加载已安装在计算机上的软件包。例如：

```
## Contents ui.R:
library(shiny)
library(plyr)

shinyUI(pageWithSidebar(

  headerPanel("Hello Shiny!"),

  sidebarPanel(
    sliderInput("obs", 
                "Number of observations:", 
                min = 0, 
                max = 1000, 
                value = 500)
  ),

  mainPanel(
    plotOutput("distPlot")
  )
))

## Contents server.R:
library(shiny)
library(plyr)

shinyServer(function(input, output) {

  output$distPlot <- renderPlot({

    # generate an rnorm distribution and plot it
    dist <- rnorm(input$obs)
    hist(dist)
  })
}) 
```

如果我在本地运行它（使用`runApp`），这工作正常，但是当我尝试通过我的服务器（同一台计算机）运行它时，我收到`plyr`未安装包（或我尝试以这种方式使用的任何其他包）的错误。我怎么能在闪亮的服务器中使用额外的包？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-10-07T15:43:26.123

问题是 shiny-server 找不到您安装的软件包，因为它以不同的用户身份运行它们，称为`shiny`. 该用户是在安装闪亮服务器时创建的

解决此问题的最简单（也是最安全的恕我直言）方法是使用以下步骤以闪亮用户身份安装软件包。

1.  为用户设置密码`sudo passwd shiny`，现在输入并确认密码
2.  使用以下命令切换到闪亮帐户：`su - shiny`
3.  调用`R`使用`$ R`（不带 sudo）
4.  安装所需的包，在这种情况下：`install.packages("plyr")`

请注意，如果您在同一台机器上安装了 rstudio-server，那么您可以使用该界面执行步骤 2-4。只需转到相同的域/IP 并使用 :8787 作为 rstudio-server 接口，而不是使用 :3838 作为闪亮服务器。

改编自我[在这里](https://stackoverflow.com/a/32996405/1328355)的回答。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-17T16:56:32.850

比较`.libPaths()`两种情况下的输出并在服务器实例/您的脚本中进行相应调整。

例如，您可能在“您的”R 包目录中有服务器无法访问的包。在这种情况下，系统范围的软件包安装更可取——例如，Debian / Ubuntu 上的默认安装。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-12-05T16:33:11.117

这可能是一个不会弄乱系统库的解决方案。将以下代码放在`server.R`.

```
user <- unname(Sys.info()["user"])
if (user == "shiny") {

  # Set library locations
  .libPaths(c(
    "/path/to/your/own/library"
  )
  )

} 
```

这让 Shiny 可以优先查找安装在您自己的库中的包，并且还可以使您用于开发应用程序的包与部署应用程序时使用的包保持同步。

请注意，您可能需要调整库文件夹的权限，以便`shiny`用户正确查看。否则它将无法查看您指定的位置而不会出现任何错误消息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-04T07:11:00.223

我已经从 R 3.2 升级到 3.4 并遇到了同样的问题，然后我在 R/x86_64-pc-linux-gnu-library/ 中创建了一个名为 3.4 的文件夹，并从 3.2 文件夹中复制了所有内容（它已经在同一个位置）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-11T11:06:33.437

如果软件包安装在您的 R 库中。让它在闪亮服务器上运行的最简单方法是向闪亮指示包所在的库目录。类似的东西： `library(plyr, lib.loc="/usr/local/lib/R/site-library")`。如果您安装了 R-Studio，您可以使用以下命令查看目录`.libPaths()`

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-07-23T00:44:51.273

为什么需要 Plyr？您的代码中没有任何内容在使用它；但无论如何，您可以通过运行 R 在 Linux R 安装上安装软件包，然后 install.packages('plyr');

# c# - 结束脚本标记和 document.write 在 Visual Studio 中被标记

> ID：16065816
> 
> 赞同：2
> 
> 时间：2013-04-17T16:53:51.177
> 
> 标签：c#, javascript, asp.net

环境：Visual Studio 2008 SP1、ASP.NET 和 JavaScript

我正在尝试进行快速`document.write`测试，但是一旦我添加了脚本标签，Visual Studio 编辑器就会不喜欢它。具体来说，结束脚本标签？我一输入结束`</script>`标签就得到那些波浪线

```
<html><head></head><body>
    <script type='text/javascript'>
      document.write('<html><head><script></script></head><body></body></html>');
    </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T16:58:02.420

利用：

```
document.write('<html><head><script><\/script></head><body></body></html>');
Note the `\`, here ------------------^ 
```

另一种选择是拆分字符串，使其不是一个精确的标签：

```
document.write('<html><head><script></sc' + 'ript></head><body></body></html>'); 
```

这是一个解释为什么需要它的参考，以及其他选项：

*   [为什么用 document.write() 写 <script> 标签时要拆分它？](https://stackoverflow.com/questions/236073/why-split-the-script-tag-when-writing-it-with-document-write)

无论如何，您为什么要将整个文档写入`<body>`?

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T17:03:21.050

我对 Visual Studio 不熟悉，但我可以看出您的 HTML 体系结构存在一些错误，如果它已经在 HTML 文档中，则不应重新插入`<html><head><body>`，也尝试转义斜杠：

```
<html><head></head><body>
    <script type='text/javascript'>
      document.write('<script>alert("hello");<\/script>');
    </script>
</body>
</html> 
```

如果 alert hello 有效，那么你就在良好的轨道上

# ruby - 打破 DRY 的 Ruby 类

> ID：16065822
> 
> 赞同：1
> 
> 时间：2013-04-17T16:54:02.987
> 
> 标签：ruby, design-patterns

我有一些像这样的课程：

```
class Word
  def initialize (file_name)
    load_file(file_name)
  end

  def pick_first_word(score)
    #get first word
  end

  private
  def load_file(file_name)
    #load the file
  end
end

class MyClass < SomeOther
  def initialize (file_name)
    @word = Word.new(file_name)
  end
  def pick
    @word.pick_first_word
  end
  #some other code
end

dosomething = MyClass.new("words.txt")
dosomethingelse = MyClass.new("movies.txt") 
```

所以我有一个类`Word`可以读取文件并选择第一个单词。就像那样，我想要另一个类，比如`Movies`，它将有自己的`load_file`and实现`pick_first_word`。我希望这由我发送到的文件类型来控制`MyClass`。

**问题**

什么是更改`initialize`方法的好方法，`MyClass`以便它根据我发送的文件类型启动正确的类。我可以通过文件名上的 if/else 来做到这一点，但这似乎不太可扩展。

有没有比改变`initialize`方法更好的方法来做到这`MyClass`一点？

```
 def initialize (file_name)
    if (file_name == "word.txt")
      @word = Word.new(file_name)
    else
      @word = Movie.new(file_name)
  end 
```

这种实现似乎不是很有可扩展性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:46:12.333

It's all a matter of tradeoffs -- in this case, you want just enough complexity to handle a reasonable number of cases.

If there are only two options, I think that if statement looks just fine. A ['case' statement](http://www.skorks.com/2009/08/how-a-ruby-case-statement-works-and-what-you-can-do-with-it/) (aka a switch statement) can be DRYer, and you may want to explicitly say "movie.txt", e.g.

```
@word = (case file_name
  when "word.txt"
    Word
  when "movie.txt"
    Movie
  else
    raise "Unknown file name #{file_name}"
  end).new(file_name) 
```

or extract a `class_for_file_name` method if you don't like putting a case statement in parens, even though it's pretty fun.

If your set of polymorphic classes gets bigger, you might get more mileage out of a lookup table:

```
class_for_file_name = {
    "word.txt" => Word, 
    "movie.txt" => Movie, 
    "sandwich.txt" => Sandwich,
}
@word = class_for_file_name[file_name].new(file_name) 
```

And of course, maybe you're oversimplifying and you really want to switch on the file *extension*, not the file *name*, which you could get with `File.extname(file_name)`.

You could also get even fancier and ask each concrete class whether it handles this file name; this feels more OO -- it puts the knowledge about foos inside the Foo class -- but is arguably more complicated:

```
class Word
  def self.good_for? file_name
    file_name == "word.txt"
  end
end

class Movie
  def self.good_for? file_name
    file_name == "movie.txt"
  end
end

...

def class_for_file_name file_name
  [Word, Movie].detect{|k| k.good_for? file_name}
end 
```

BTW this problem more or less fits the design pattern called [Abstract Factory](http://en.wikipedia.org/wiki/Abstract_factory_pattern); you may want to look it up and see if any of its analyses inspire you.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-17T17:24:03.617

试试 FileMagic 库。

```
gem install ruby-filemagic 
```

例子：

```
require 'filemagic'
type = FileMagic.new.file file_name 
```

# button - Facebook 登录对话框 - “关闭”按钮不会触发回调

> ID：16065825
> 
> 赞同：1
> 
> 时间：2013-04-17T16:54:09.563
> 
> 标签：button, dialog, callback, facebook-login

我有这个问题。

我在我的 facebook 标签页中有这段代码，正如你所见，当用户来的时候我需要一些权限。问题是，当我单击“关闭”按钮时，FB.login 中的回调没有启动，FB 将其抛出到控制台：

*   Chrome：“未捕获的类型错误：无法读取未定义的属性 'e2e'”。
*   Firefox：“ea.result 未定义”

*行动*

![当用户单击“关闭”时，FB.login 中的回调不会启动](https://i.stack.imgur.com/ygAYu.png)

*代码*

```
...
<script src="//connect.facebook.net/en_US/all.js"></script>
</head>
<body>

<div id="fb-root"></div>
<script>
var api = new Object();
api.login = false;
api.width = 810;
api.height = 970;
function login() {
    FB.login(function(response) {
        if (response.authResponse) {
            // here it works when user click 'Go to app' button
            alert('Go to app');
        } else {
            // here is the problem, because this else doesn't start- 
            // -when user click 'Close' button
            alert('CLOSE'); 
        }
    }, {scope: 'email,user_birthday'}); 
}
function loginStatus(response) {
    if (response && response.status === 'connected') {
        // already auth
        api.login = true;
    } else {
        login();
    }
}
function sizeChangeCallback() {FB.Canvas.setSize({ width: api.width, height: api.height });}
window.fbAsyncInit = function() {
    FB.init({
        appId : '564323490269057',
        status : true,
        cookie : true, 
        xfbml : true
    });
    FB.Canvas.setSize({ width: api.width, height: api.height });
    FB.getLoginStatus(loginStatus);
}
(function(d, debug){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
     ref.parentNode.insertBefore(js, ref);
}(document, /*debug*/ false));
</script>

</body>
</html> 
```

# c++ - 通过 MCQ 考试，我们不确定为什么这个函数原型会失败

> ID：16065826
> 
> 赞同：0
> 
> 时间：2013-04-17T16:54:09.967
> 
> 标签：c++

大家好，最近的 MCQ 对我弄错的答案进行了检查。

函数 getSum 用于计算大小为大小的双精度数组 a[] 中大于给定输入值阈值的值的总和。下面显示了四个原型定义，以及如何从 main 调用函数。选择不会编译的选项，因为该函数根据其原型被错误地调用。

```
(c)
double getSum(const double a[], int size, double& threshold);

int main()
{
double a[5]=f10.0,11.0,9.9,12.0, 13.6g;

double sum;

sum=getSum(a, 5, 10.0); 
```

为什么这个函数原型会失败？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T16:56:14.273

由于尝试在第三个参数中传递非常量临时引用，它将失败。
[在这里](http://coliru.stacked-crooked.com/view?id=c7d11a94da2f3f8173b047799a5f3f80-50d9cfc8a1d350e7409e81e87c2653ba)您可以看到编译器输出。

# sql - PL/SQL，如何让触发器打印出特定的列行？

> ID：16065827
> 
> 赞同：0
> 
> 时间：2013-04-17T16:54:16.610
> 
> 标签：sql, oracle, plsql

在我的特殊情况下，我需要打印出每个薪水超过 100'000 的员工的“emp_id”和“薪水”。它只需要检查然后打印出来。

```
CREAT OR REPLACE TRIGGER idNumber
BEFORE 
CREATE OR REPLACE TRIGGER salary_trigger
AFTER INSERT or UPDATE OF salary, ON Employee
for each row
WHEN (salary > 100000)
DECLARE 
BEGIN 
if salary > 100000
THEN 
DBMS_OUT.PUT_LINE(salary, emp_id);
END;
/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:10:46.750

为什么是触发器？肯定只是

```
select emp_id, salary
from Employee
where salary > 100000; 
```

会做？

# c# - 仅为特定操作系统版本加载样式

> ID：16065829
> 
> 赞同：2
> 
> 时间：2013-04-17T16:54:22.773
> 
> 标签：c#, wpf, vb.net, xaml

我有这样的风格：

```
<Style TargetType="{x:Type Button}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type Button}">
               ...
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

默认情况下，它将应用于所有操作系统中的所有按钮，但我只想在用户使用 Windows 8 时应用它。

`Environment.OSVersion.Version`检查属性后，有什么方法可以从代码隐藏中激活样式？或者有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:56:47.130

我认为风格是基于主题的，不能基于操作系统版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T17:39:42.477

找到您的引导程序代码（在显示 XAML 之前执行的代码）并创建简单的开关，该开关将根据操作系统版本选择正确的 XAML 文件。

```
Uri uri = new Uri("/OS7.xaml", UriKind.Relative);
StreamResourceInfo info = Application.GetResourceStream(uri);
XamlReader reader = new System.Windows.Markup.XamlReader();
var dic = (ResourceDictionary)reader.LoadAsync(info.Stream);

//then locate ResourceDictionary throgh Application.Current.Resources
yourDictionary.MergedDictionaries.Add(dic); 
```

您还可以创建绑定到静态 OS 版本属性并切换 Button 模板的简单触发器，但它相当有限，因为您只能交换模板。它可能会帮助你；

```
 <Window.Resources>
                    <ControlTemplate x:Key="OS7" TargetType="Button">
                        <Border x:Name="Border" CornerRadius="2" BorderThickness="1" Background="blue" BorderBrush="blue">
                            <ContentPresenter Margin="2" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>

        <!-- DEFALT -->
        <Style TargetType="Button">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="Border" CornerRadius="2" BorderThickness="1" Background="red" BorderBrush="blue">
                            <ContentPresenter Margin="2" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>

            <Style.Triggers>
                <!-- Just an example. Replace IsMouseOver with DataTrigger and STATIC binding against OS version-->
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Template" Value="{StaticResource OS7}" />
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources> 
```

# proguard - 在类 org.w3c.dom.Node 中找不到引用的方法“java.lang.String lookupNamespaceURI(java.lang.String)”

> ID：16065830
> 
> 赞同：0
> 
> 时间：2013-04-17T16:54:26.657
> 
> 标签：proguard

我成功地使用 proguard 4.5.1 和 proguard-maven-plugin（未指定版本）在 JDK 6 平台上混淆我的 webapp。

当我升级到 JDK 7 平台时，我必须使用 proguard-maven-plugin 2.1.0-SNAPSHOT 升级到 proguard 4.8，在执行 proguard 期间我收到以下警告的两个实例，这会导致构建失败：

```
 [proguard] Warning: mypackage.MyClass: can't find referenced method 'java.lang.String lookupNamespaceURI(java.lang.String)' in class org.w3c.dom.Node 
```

我已经检查并确保 .../jdk1.7.0/jre/lib/rt.jar 被指定为库：

```
[proguard] Reading library jar [.../jdk1.7.0/jre/lib/rt.jar] 
```

我收到以下可能与我的问题有关的警告：

```
[proguard] Note: duplicate definition of library class [org.w3c.dom.Node] 
```

[此处](https://stackoverflow.com/questions/10283581/cant-find-referenced-method-in-class-with-proguard)发布了一个类似的问题，但它并不能帮助我解决我的问题。

关于如何找出哪个库具有重复定义以及如何解决此问题的任何提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T19:22:40.777

当我从我的项目中删除以下未使用的依赖项时，我的问题得到了解决：

```
 +- org.swinglabs:swingx-ws:jar:1.0:compile
|  |  +- xerces:xercesImpl:jar:2.8.1:compile
|  |  |  \- xml-apis:xml-apis:jar:1.3.03:compile 
```

我调试问题根源的方式如下。

1.  我查找了第一个警告“库类 [org.w3c.dom.Node] 的重复定义”，这是原始警告消息中提到的类。
2.  接下来，我向后搜索“Reading library jar”以查看哪个 jar 具有重复的定义。它是 xml-apis-1.3.03.jar
3.  然后我在项目上运行了 maven 的 depenency:tree 目标，以查看哪个 jar 拉入了 xml-apis-1.3.03.jar 依赖项。这是swingx-ws jar。

swingx-ws jar 最近被添加到项目中，幸好从未实际使用过。所以我所要做的就是删除它。如果我真的必须使用那个 jar，我怀疑我可以排除 xml-apis 依赖项并且仍然可以正常工作。

# java - 如何访问要由另一个 Activity 子类化的扩展 Activity 的类中的布局？

> ID：16065831
> 
> 赞同：0
> 
> 时间：2013-04-17T16:54:39.147
> 
> 标签：java, android, android-activity

我在我的 Android 应用程序中使用了 SideNavigationBar（除了 ActionBarSherlock），我对如何创建一个扩展 SherlockActivity 的类感到两难。

因为我所有的活动都有一个 SideNavigation 栏和一个类似主题的 ABS，所以我创建了 SherlockActivity 的通用子类来初始化 SideNavigation 和 ABS，这将在我的活动中保持不变，然后为我所有的独特活动扩展这个子类（主页、设置等）。因此，例如，HomeActivity 扩展了 ActionBarActivity，后者扩展了 SherlockActivity。ActionBarActivity 是我希望所有自定义 ABS 和初始化侧边栏的地方。

问题是我不知道如何从我的 ActionBarActivity 访问布局，这是必要的，因为这是我获得 SidenavigationBar（使用 findViewById）的地方。如果我在 HomeActivity 中执行此操作，我将在设置内容视图 (setContentView) 后使用 findViewById 访问布局，但由于我从未在 ActionBarActivity 中设置内容视图，我不太确定如何从布局中访问 SidenavigationBar .

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:07:35.687

> 但由于我从未在 ActionBarActivity 中设置内容视图，因此我不太确定如何从布局中访问 SidenavigationBar。

如果我理解您的问题，HomeActivity 会调用，`setContentView()`但您想访问其父 ActionBarActivity 中的布局？
然后只需在 ActionBarActivity 中创建一个新方法（也许`initSideNavigationBar()`）。这个新方法可以`findViewById()`像以前一样调用，只要你`setContentView()`在 HomeActivity 中调用它。

# java - 值只返回 0

> ID：16065833
> 
> 赞同：2
> 
> 时间：2013-04-17T16:54:40.923
> 
> 标签：java, arrays

我是一名编程新学生，我的大学正在教 Java。

我是从作业中做这个练习的，但不知道为什么它只返回 0。

在我决定在这里发帖之前，我在过去的几天里一直在看互联网。我在某处读到，如果我用它启动变量（i7 = 0），Java 永远不会更改值 0，但即使我更改为 i7 = 1，它也会返回 0，并且数组不再是 8 个索引，而是 7。 ，难道不应该在我用键盘输入数字的那一刻开始填充数组吗？也许我误解了什么？我怎样才能让它显示最小的数字？

谢谢！

//读取8个索引的数组并找到最小的数字

我有：

```
 int array1[] = new int[8];
    int i7;
    int smallest = array1[0];

    System.out.println("Type 8 numbers.");

    for (i7 = 0; i7 < array1.length; i7++)
    {
       array1[i7] = keyboard.nextInt();

       if (array1[i7] < array1[0])
       {
           smallest = array1[i7];
       }
    }
    System.out.println("The smallest number is " + smallest); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T16:57:49.390

您将 minimum 初始化为 array1[0] ，它仍未从用户输入初始化 - 即它以 0 开头。

现在，要解决上述问题，您可以与 array[0] 进行比较，而不是与中的最小`if`- 但这不是正确的解决方法。

```
int array1[] = new int[8];
int i7;
System.out.println("Type 8 numbers.");
array1[0] = keyboard.nextInt();

int smallest = array1[0]

for (i7 = 1; i7 < array1.length; i7++)
{
   array1[i7] = keyboard.nextInt();

   if (array1[i7] < smallest)
   {
       smallest = array1[i7];
   }
}
System.out.println("The smallest number is " + smallest); 
```

替代解决方案。

```
int array1[] = new int[8];
int i7;
int smallest;

System.out.println("Type 8 numbers.");

for (i7 = 0; i7 < array1.length; i7++)
{
   array1[i7] = keyboard.nextInt();

   if(i7 == 0)
   {
        smallest = array1[0];
   }
   else
   {
       if (array1[i7] < smallest)
       {
           smallest = array1[i7];
       }

   }
}
System.out.println("The smallest number is " + smallest); 
```

不过我更喜欢第一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T17:16:09.673

下面我用问题的位置或其原因注释了您的代码：

```
int array1[] = new int[8];  // create an array of 8 ints. all are initially 0.
int i7;
int smallest = array1[0]; // set smallest to 0.

System.out.println("Type 8 numbers.");

for (i7 = 0; i7 < array1.length; i7++)
{
   array1[i7] = keyboard.nextInt(); // potential problem, what is 'keyboard'?

   if (array1[i7] < array1[0]) // compare last read against first read
   {
       smallest = array1[i7];
   }
}
System.out.println("The smallest number is " + smallest); 
```

现在，这是我要解决的问题：

```
int array1[] = new int[8];  // create an array of 8 ints. all are initially 0.
int i7;
int smallest = Integer.MAX_VALUE;  // set the smallest to (2^31)-1; the largest int.

System.out.println("Type 8 numbers.");

for (i7 = 0; i7 < array1.length; i7++)
{
   array1[i7] = keyboard.nextInt();

   if (array1[i7] < smallest) // compare last read against current smallest
   {
       smallest = array1[i7];
   }
}
System.out.println("The smallest number is " + smallest); 
```

另一个潜在的来源或问题是您致电`keyboard.nextInt()`. 什么类别的对象`keyboard`？它可能在每次调用时返回 0。如果您在不提供`0`输入之一的情况下运行固定代码并且仍然获得`0`最小的代码，那么您就知道您的`keyboard.nextInt()`调用有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T16:56:39.450

`array1[i7] < array1[0]`总是执行完全相同的比较；你要`array1[i7] < smallest`

此外，`array1[0]`初始化后等于 0，因此`smallest`除非您输入负数，否则将始终等于 0。相反，初始化`smallest = Integer.MAX_VALUE`. 这将初始化`smallest`为可能的最大整数，因此您输入的任何数字（可能）都会更小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T17:01:19.830

您实际上并没有向用户询问数字吗？

尝试在您的通话之前添加此内容：

```
Scanner sc = new Scanner(System.in);

for(int z=0;z < 8;z++){
    array1[z] = new Integer(sc.nextLine()).intValue();
} 
```

# objective-c - 如何在 UIDatePicker 上禁用时间段？

> ID：16065837
> 
> 赞同：0
> 
> 时间：2013-04-17T16:55:00.550
> 
> 标签：objective-c, uidatepicker, nsdatecomponents

我正在开发一个应用程序，该应用程序涉及收集 2 个 UIDatePickers 的组件，一个用于时间，一个用于日期。如果可能，我希望从时间选择器中删除期间列 (AM/PM)。如果这不可能，我仍然无法找出哪个 NSDateComponent 或其他变量代表用于在代码中检索它的 Period 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:59:13.417

您可以设置该`locale`属性以删除 AM/PM，但这会给其他语言环境的用户带来不便，正如 @Wain 在评论中指出的那样。另外，我认为唯一不显示此的语言环境将显示 24 小时制（我可能错了。）

对于更全面的自定义，您可能希望制作自己的**UIPickerView**而不是**UIDatePicker**。[文档在](https://developer.apple.com/documentation/uikit/uipickerview)这里。

# android - 电晕。我无法从函数访问局部变量

> ID：16065839
> 
> 赞同：0
> 
> 时间：2013-04-17T16:55:06.173
> 
> 标签：android, lua, coronasdk

SDK Corona 我想执行 --> movboton:setSequence( "apretado" ) <-- 用于更改 ImageSheet 的序列。如果我在函数之外执行它但是当我从函数中尝试时它会起作用。我收到此错误“99：尝试索引全局 'movboton'（零值）”。

知道为什么吗？谢谢。

```
botonnormal = graphics.newImageSheet( "buttonstart.png", { width=340, height=338, numFrames=2 } )
botonapretado = graphics.newImageSheet ( "buttonstart.png", { width=340, height=338, numFrames=2 } )

local movboton
local seqBoton = {
    { name="normal", sheet=botonnormal, start=1, count=1, time=1000},
    { name="apretado", sheet=botonapretado, start=2, count=2, time=1100}
}

movboton = display.newSprite(botonnormal, seqBoton)
movboton.x = display.contentWidth / 2
movboton.y = display.contentHeight / 2
movboton.xScale = .5
movboton.yScale = .5 
```

如果我把代码放在这里，它可以工作，但是从我触摸屏时调用的函数中，它给了我 nil 错误。

movboton:setSequence("pretado")
movboton:play()

```
local function apretato(event)
    --print("apretado")
    if event.phase == "began" then
        print("start")
        --storyboard.gotoScene("game", "fade", 400)
        movboton:setSequence( "apretado" )
        movboton:play()
    end

end
function scene:enterScene(event)
   btninvisible:addEventListener( "touch", apretato )
end 
```

这是所有代码：

```
-- requerimientos

local storyboard = require("storyboard")
local scene = storyboard.newScene()

--Background

function scene:createScene(event)
    local screenGroup = self.view  

    local background = display.newImage("start.png")
    screenGroup:insert(background) 

    city2 = display.newImage("city2.png")
    city2:setReferencePoint(display.BottomLeftReferencePoint)
    city2.x = 0
    city2.y = 320
    screenGroup:insert(city2)  

    --PERSONAJE
    --Imagenes en forma de sheet
    botonnormal = graphics.newImageSheet( "buttonstart.png", { width=340, height=338, numFrames=2 } )
    botonapretado = graphics.newImageSheet ( "buttonstart.png", { width=340, height=338, numFrames=2 } )

    --Simulacion de andar del personaje
    local movboton
    local seqBoton = {
        { name="normal", sheet=botonnormal, start=1, count=1, time=1000},
        { name="apretado", sheet=botonapretado, start=2, count=2, time=1100}     --, loopCount =0
    }

    --Iniciamos
    movboton = display.newSprite(botonnormal, seqBoton)
    movboton.x = display.contentWidth / 2
    movboton.y = display.contentHeight / 2
    movboton.xScale = .5
    movboton.yScale = .5

    mybutton = display.newImage("button.png")
    mybutton.x = display.contentWidth /2
    mybutton.y = display.contentHeight -75
    mybutton.xScale = .3
    mybutton.yScale = .3

    btninvisible = display.newImage("botonopacityzero.png")
    btninvisible.x = display.contentWidth /2
    btninvisible.y = display.contentHeight /2
    btninvisible.xScale = .5
    btninvisible.yScale = .5
    btninvisible.alpha = 0.2 --opacidad

end

function start(event)
    if event.phase == "began" then
    --print("start")
    storyboard.gotoScene("game", "fade", 400)
end

end

local function apretato(event)
    --print("apretado")
    if event.phase == "began" then
        print("start")
        --storyboard.gotoScene("game", "fade", 400)
        movboton:setSequence( "apretado" )
        movboton:play()
    end

end

function scene:enterScene(event)

    --background:addEventListener("touch", start)

    mybutton:addEventListener( "touch", start )

    btninvisible:addEventListener( "touch", apretato )

end

function scene:exitScene(event)

    --background:removeEventListener("touch", start)
    mybutton:removeEventListener( "touch", start )
    --mybutton.destroy()

    mybutton:removeSelf()
    mybutton = nil

end

function scene:destroyScene(event)

end

scene:addEventListener("createScene", scene)
scene:addEventListener("enterScene", scene)
scene:addEventListener("exitScene", scene)
scene:addEventListener("destroyScene", scene)

return scene 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T20:12:21.717

据我所知，你从来没有设置`movboton`任何东西，所以`nil`当你尝试调用时自然是这样`movboton:setSequence( "apretado" )`。无论您将其放置在何处，我都看不到这样的调用会在此代码中起作用...

如果您需要更多帮助，请显示更多代码。如果有一个可行的情况和一个不可行的情况，则将两者都包括在内，以便我们进行比较。

* * *

以下代码在这两种情况下都存在吗？

```
movboton = display.newSprite(botonnormal, seqBoton)
movboton.x = display.contentWidth / 2
movboton.y = display.contentHeight / 2
movboton.xScale = .5
movboton.yScale = .5 
```

你原来的帖子里没有。如果没有该代码，您将收到错误消息。当您包含上面显示的代码时，它是否仍然失败并出现相同的错误？当您尝试运行它时，您能否完全按照文件中的内容显示整个代码？

* * *

好的，现在很清楚为什么会这样`nil`：

该`movboton`变量**`local`**在函数内部声明为`createScene`：

```
function scene:createScene(event)
    ...
    local movboton
    ...
end 
```

关键字告诉 Lua这个`local`变量只在上面的函数*内部可用。*这意味着如果您尝试`movboton`从该函数*之外*的任何地方访问，那么 Lua 将找不到它。就 Lua 而言，没有在代码块`movboton`之外命名的变量`createScene`。

你的行在`movboton:setSequence( "apretado" )`函数*之外*`createScene`，所以，再次，就 Lua 而言，`movboton`代码中的那个点没有变量，所以你得到了`nil`（没有任何意义）。

您需要做的是更改您的代码，以便`movboton`可以从您的`apretato`函数内部看到。最简单的方法是将`local movboton`线移到正下方`local scene = storyboard.newScene()`：

```
local storyboard = require("storyboard")
local scene = storyboard.newScene()
local movboton 
```

如果它是在那里声明的，那么它是在包含的范围内声明的`apretato`，这意味着`apretato`它将能够看到它。

[你可以在这里阅读更多关于Lua**作用域的信息。**](http://lua-users.org/wiki/ScopeTutorial)作用域是一个或多或少在所有编程语言中都非常重要的概念，因此值得花时间尝试了解它们的工作原理。

祝你好运 ：）

# php - 如何在 PHP 中将此逗号和分隔符分隔的字符串转换为有组织的数组？

> ID：16065841
> 
> 赞同：-1
> 
> 时间：2013-04-17T16:55:09.460
> 
> 标签：php

我正在寻找一种方法来转换这个字符串：

```
term:entertainment,taxonomy:category,term:lifestyle,taxonomy:category 
```

进入这个 PHP 数组（有组织，没有重复的分类）

```
Array ( [category] => entertainment,lifestyle ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:58:32.330

```
$splitted = explode(",", $string);
for ($i = 0; $i < count($splitted); $i+=2) {
    $result = explode(":",$splitted[$i])[1]; // (PHP 5.4 syntax)
    $key = explode(":",$splitted[$i+1])[1];
    if (isset($array[$key]))
        $array[$key] .= ",$result";
    else
        $array[$key] = $result;
} 
```

它首先按逗号拆分，然后将数据添加到按分号拆分的数组中。

（当您的字符串始终具有相同的形式时，这就足够了。）

# java - 使用 xstream 的 XmlArrayList 和 FilePersistenceStrategy 如何控制输出 xml 文件的名称？

> ID：16065842
> 
> 赞同：0
> 
> 时间：2013-04-17T16:55:09.853
> 
> 标签：java, xstream

使用 xstream 的 XmlArrayList 和 FilePersistenceStrategy 如何控制输出 xml 文件的名称？

目前文件被命名为：int@0.xml

我需要用业务可以理解的文件命名它们/

链接：http: [//x-stream.github.io/index.html](http://x-stream.github.io/index.html)

代码： PersistenceStrategy strategy = new FilePersistenceStrategy(new File("C:\workingTemp"));

List list = new XmlArrayList(strategy);

list.add(myObj)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:14:41.063

我不确定这是否是最佳选择，但我认为它会起作用。

`CustomeFilePersistenceStrategy`通过扩展`FilePersistenceStrategy`和覆盖方法创建自定义策略类，`getName`如下所示：

```
public class CustomeFilePersistenceStrategy extends FilePersistenceStrategy {
     public CustomeFilePersistenceStrategy(File baseDirectory) {
      super(baseDirectory);
     }

    @Override
    protected String getName(final Object key){
        //put desired file naming logic
        return "CustomFile.xml";
    }
} 
```

那么用法可能是：

```
 PersistenceStrategy strategy = 
               new CustomeFilePersistenceStrategy(new File("C:\workingTemp"));

 List list = new XmlArrayList(strategy); 
```

应该`CustomFile.xml`在输出文件夹中生成。

# fortran - gfortran，未定义的不可分类语句和格式标签

> ID：16065845
> 
> 赞同：0
> 
> 时间：2013-04-17T16:55:12.083
> 
> 标签：fortran, fortran90, gfortran

我有以下子例程，它使用 intel fortran 编译器编译，但不使用 gfortran 编译。这是子程序代码：

```
subroutine makepar
!----------------------------------------------------------------------
!                       WRITE A PARAMETER FILE                         
!----------------------------------------------------------------------
    integer, parameter :: lun=99
    open(lun,file='pixelplt2008.par',status='UNKNOWN')
    write(lun,10)
10  format(  &
    '',/, &
    '',/, &
    '                  Parameters for PIXELPLT2008',/, &
    '                  ***********************',/, &
    '',/, &
    'START OF PARAMETERS:',/, &
    'kb2d.out              -file with gridded data',/, &
    '1                     -column number for variable',/, &
    '-998  1.0e21          -data trimming limits',/, &
    'data.out              -file with data to plot',/, &
    '0 2 3 4 5 8.0         -columns for point id or label, x,y,z coords, variable, symbol size',/, &
    '0 10000               -xmin, xmax limits to plot if no grid file is plotted (limits taken from grid if a grid is plotted)',/, &
    '0 10000               -ymin, ymax limits to plot if no grid file is plotted (limits taken from grid if a grid is plotted)',/, &
    'poly.out              -file containing a polygon to trim grid within (data are not trimmed)',/, &
    '1 2 1 3.0             -columns for x and y coords, plot option (1=yes), lineweight for polygon',/, &
    '0 0 0.0 0.0 0 0       -background grid x and y spacing (0=dont plot the background grid), start x and y, azimuth, ticks around plot (1=yes)',/, &
    'pixelplt.ps           -file with PostScript output',/, &
    '1                     -realization number',/, &
    '100   50   100        -nx,xmn,xsiz',/, &
    '100   50   100        -ny,ymn,ysiz',/, &
    '1   .5   1            -nz, zmn, zsiz',/, &
    '1                     -vertical exageration (1=no exageration)',/, &
    '1                     -slice orientation: 1=XY, 2=XZ, 3=YZ  (set to -1,-2 or -3 to skip drawing the color bar)',/, &
    '1 -1.3                -slice number,tol: point data require a tol (i.e. plot +/- 1.3m from the center of the plotted slice) neg=plot all points',/, &
    'Porosity Well Data    -title ',/, &
    'East                  -X label',/, &
    'North                 -Y label',/, &
    '0                     -brightness of background(0=no change, 1=very bright, -1=very dark)',/, &
    '0                     -0=arithmetic, 1=log scaling',/, &
    '',/, &
    '',/, &
    'COLORBAR JET 2 16 5   -COLORBAR, keyword, type, min, max, number of labels (See below for how to plot custom or categorical)',/, &
    '0 0 0                 -rotate color bar (1=yes), xpos, ypos of color bar (+/- from the default positions)',/, &
    '0 3                   -type: 0=continuous 1=categorical, #of steps (type COLORBAR CUSTOM 5 above to use categorical or custom color bar)',/, &
    '7  2  Low             -colorcode, value OR category, label',/, &
    '9  8  Mid             -colorcode, value OR category, label',/, &
    '1  16 High            -colorcode, value OR category, label',/, &
    '',/, &
    '----------------------------------------------------------------------------',/, &
    '-EVERYTHING BELOW THIS LINE CAN BE REMOVED TO MAKE THE PAR FILE SHORTER!!!!!',/, &
    '----------------------------------------------------------------------------',/, &
    '',/, &
    'ADVANCED OPTIONS:  Dont change if you want to ignore',/, &
    '',/, &
    'CHANGE SHAPE OF DATA',/, &
    '1                        -0=use shape file, 1=all points plotted as circles, 2=squares, 3=triangles',/, &
    'data.out                 -file with indicators for which data are plotted as (circles 1, squares 2, triangles 3)',/, &
    '11                       -column for the indicators',/, &
    '0                        -plot a legend for these shapes (1=yes)',/, &
    '0 0                      -xpos, ypos of legend (+/- from the default position which is directly below the color bar)',/, &
    '1 0 1                    -include the circles, squares, triangels in the legend? (1=yes)',/, &
    'Well Data                -label for the circles',/, &
    'none                     -label for the squares',/, &
    'Clustered Data           -label for the triangles',/, &
    '',/, &
    'ADDITIONAL FILE:',/, &
    '0                        -option to paste a background grid from another file (1=yes)',/, &
    'outline.ps               -will write this file out on top of the grid, but below the data',/, &
    '',/, &
    '',/, &
    '--------------------------------------------------------------------------------------------------------------------',/, &
    '--------------------------------------------------------------------------------------------------------------------',/, &
    'Color Codes Plotting:',/, &
    '      1=red, 2=orange, 3=yellow, 4=light green, 5=green, 6=light blue,',/, &
    '      7=dark blue, 8=violet, 9=white, 10=black, 11=purple, 12=brown,',/, &
    '      13=pink, 14=intermediate green, 15=gray',/, &
    '',/, &
    'Colorbar usage',/, &
    '  Built in types specify: COLORBAR TYPE MIN MAX  NUMBER Of LABELS',/, &
    '  TYPE: HOT, JET, HSV, GRAY, COPPER, PINK',/, &
    '',/, &
    '  To use a custom color bar specify: COLORBAR CUSTOM NUMBER OF LABELS  and specify continous cutoffs below',/, &
    '  To use a categorical color bar specify: COLORBAR CUSTOM NUMBER OF LABELS  and specify categories below',/, &
    '',/, &
    '',/, &
    'Polygon',/, &
    '',/, &
    '  Trimming: if a polygon is input, the pixelplt will be trimmed inside it.',/, &
    '  Plot option: If set to 1, the trimming polygon will be plotted.',/, &
    '  Lineweight: light (1.0) to heavy (6.0)',/, &
    '  Set one of the column numbers to zero for no polygon or input a data file',/, &
    '    that does not exist.',/, &
    '',/, &
    'Background Grid',/, &
    '  Start Position: If no start x,y position, the grid defaults to the minimum of the pixelplt.',/, &
    '  Azimuth: Align the grid along an input azimuth angle in degrees',/, &
    '  Set spacing to zero for no background grid.',/, &
    '',/, &
    'Brightness Scaling',/, &
    '  May get an artifact if color is completly black',/, &
    '  Data that are overlayed on the background map are not dimmed or brightened so that they',/, &
    '  stand out over the background.',/, &
    '',/, &
    '',/, &
    '',/, &
    '',/, &
    '',/, &
    '',/, &
    '',/, &
    '',/)

    close(lun)
end subroutine makepar 
```

这段代码给了我以下错误：

```
 In file pixelplt2008.f90:1330

ound
    1
Error: Unexpected end of format string in format string at (1)
 In file pixelplt2008.f90:1331

    'pixelplt.ps           -file with PostScript output',/, &
   1
Error: Unclassifiable statement at (1)
 In file pixelplt2008.f90:1339

    'Porosity Well Data    -title ',/, &
   1
Error: Unclassifiable statement at (1)
 In file pixelplt2008.f90:1347

    '0 0 0                 -rotate color bar (1=yes), xpos, ypos of color bar (
   1
Error: Unclassifiable statement at (1)
 In file pixelplt2008.f90:1349

    '7  2  Low             -colorcode, value OR category, label',/, &
   1
Error: Unclassifiable statement at (1)
 In file pixelplt2008.f90:1313

    write(lun,10)
               1
Error: FORMAT label 10 at (1) not defined 
```

有什么想法可以让它用 gfortran 编译吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T17:45:30.120

符合标准的程序中的一行最多可以有 132 个自由源格式的字符。第一个错误指向一条长度较长的行（我没有查看第一个错误）。在那一点上，这条线被切断了，然后这句话就没有意义了。

显然，默认情况下，英特尔 Fortran 接受以这种方式不符合标准的程序，而 gfortran 默认情况下遵守标准行长。您可以通过选项让 gfortran 接受更长的行`-ffree-line-length-n`。从[手册](http://gcc.gnu.org/onlinedocs/gcc-4.8.0/gfortran/Fortran-Dialect-Options.html#Fortran-Dialect-Options)：

> -ffree-line-length-n
> 
> 在源文件中的典型自由格式行中设置忽略字符的列。默认值为 132。n 可能是“无”，这意味着整行都是有意义的。-ffree-line-length-0 与 -ffree-line-length-none 的含义相同。

# asp.net-mvc-3 - IValidatableObject 在 mvc 4 Web 应用程序中不起作用

> ID：16065847
> 
> 赞同：2
> 
> 时间：2013-04-17T16:55:14.103
> 
> 标签：asp.net-mvc-3, validation, asp.net-mvc-4, ivalidatableobject

所以我有一个正在注册用户和业务合作伙伴的网络应用程序。

这就是我的模型的样子

```
public class UserModel : IValidatableObject
{
   //here are some properties and methods that I am using in Validate method        

    public CompanyModel Company { get; set; } //this is user Company

    public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
    {       
         if (this.UserWithEmailExists())
             yield return new ValidationResult("Email already exists", new[] { "Email" });

         if (this.UserWithUsernameExists())
             yield return new ValidationResult("Username already exists", new[] { "Username" });
    }
}

public class CompanyModel : IValidatableObject
{
    //again here are some properties that i am using in Validate

    public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
    {
        if (this.Phone == null && this.Mobile == null)
            yield return new ValidationResult("The Phone field is required", new[] { "Phone" });
    }
}

//this is the model passed to the view
public sealed class RegistrationModel : UserModel, IValidatableObject
{
    public new IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
    {
        if (this.Password != this.PasswordValidation)
            yield return new ValidationResult("Ponovite prejšnji vnos", new[] { "PasswordValidation" });
    }
} 
```

问题是：当我提交表单时，CompanyModel 中的 Validate 被调用，并且 RegistrationModel 中的 Validate 也被调用。但我也想在 UserModel 中调用 Validate...

更新：我解决了第一个问题：这些是升级后的模型:)

```
public class UserModel : IValidatableObject
{
   //here are some properties and methods that I am using in Validate method        

    public CompanyModel Company { get; set; } //this is user Company

    public virtual IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
    {       
         if (this.UserWithEmailExists())
             yield return new ValidationResult("Email already exists", new[] { "Email" });

         if (this.UserWithUsernameExists())
             yield return new ValidationResult("Username already exists", new[] { "Username" });
    }
}

public class CompanyModel : IValidatableObject
{
    //again here are some properties that i am using in Validate

    public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
    {
        if (this.Phone == null && this.Mobile == null)
            yield return new ValidationResult("The Phone field is required", new[] { "Phone" });
    }
}

//this is the model passed to the view
public sealed class RegistrationModel : UserModel, IValidatableObject
{
    public override new IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
    {
        //this is needed so that UserModel validation executes
        foreach (var result in base.Validate(validationContext))
        {
            yield return result;
        }

        if (this.Password != this.PasswordValidation)
            yield return new ValidationResult("Ponovite prejšnji vnos", new[] { "PasswordValidation" });
    }
} 
```

现在验证工作正常。我只是不知道为什么 CompanyModel 中的 Validate 执行两次？？？。有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T17:17:58.117

当您覆盖基类中的方法时，不会显式调用该基类中的方法。您需要自己做，所以在**RegistrationModel**`Validate`的函数中，添加对**UserModel**基类中的函数的调用。**`Validate`**

 ****```
base.Validate(validationContext); 
```

但是，正如您`yield return`在验证器中使用的那样，这使`Validate`函数成为迭代器，因此必须对其进行迭代才能使一切正常工作。根据[这个问题](https://stackoverflow.com/questions/7057419/entity-framework-4-1-override-ienumerablevalidationresult-validate)，完整的解决方案是在您的`RegistrationModel.Validate`函数中使用此代码：

```
foreach (var result in base.Validate(validationContext))
{
    yield return result;
} 
```****

# c# - 如何将 .XML 文件发送到 MVC3 中的视图？

> ID：16065849
> 
> 赞同：-1
> 
> 时间：2013-04-17T16:55:33.237
> 
> 标签：c#, asp.net-mvc-3, web

我有 .XML 类型的照片库文件。我将其插入 App_Data。如何将其发送到在我的 MVC3 网站中查看。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:01:39.247

使用类型的 Model 使视图成为强类型`XDocument`

然后从控制器将文件加载到内存中。使用解析它`XDocument.Parse()`然后将`XDocument`实例传递给视图

# html - 如果插件不可用，HTML 替代方案

> ID：16065850
> 
> 赞同：1
> 
> 时间：2013-04-17T16:55:36.897
> 
> 标签：html, activexobject, browser-plugin

当浏览器插件不可用时，显示替代 HTML 的最佳做法是什么？我正在嵌入带有对象标签的插件，如下所示：

```
<object id="plugin0" type="application/x-myplugin"></object> 
```

这是一个未知插件在 Google Chrome 中显示的内容，但是我希望该解决方案适用于所有浏览器（即 FF 插件/Chrome 插件/IE ActiveX 对象）

![图像](https://i.stack.imgur.com/oyREx.png)

-脚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:00:51.360

如果您在谈论闪存，那么如果不支持闪存，您在对象标签中放置的任何内容都会显示出来。

下面是一个带有后备图像的 Flash 电影示例：

```
<object type="application/x-shockwave-flash data="yourmovie.swf" width="400" height="300">
<param name="movie" value="yourmovie.swf" />
<img src="noflash.gif" width="200" height="100" alt="" />
</object> 
```

我通常使用 javascript 测试插件并根据测试结果写入页面。

# java - 通过网络发送数据

> ID：16065851
> 
> 赞同：0
> 
> 时间：2013-04-17T16:55:40.287
> 
> 标签：java, network-programming

我想创建一个程序来模拟连接到网络的设备并通过特定端口发送信号。

该设备连接到网络并通过端口发送数据。在服务器（或计算机）上，我从 Lantronix 运行 CPR Manager v.4.3.0.1，它将 IP:PORT 与计算机上的虚拟 COM 端口相关联。我有一个监听 COM 端口并执行操作的 java 程序，这对设备非常有用。

我尝试使用 Socket 类编写一个 java 应用程序来执行连接，但它没有成功，在 CPR 端，它只在执行第一行时注册一个 Disconnect：

```
Socket socket = new Socket("192.168.1.160", 8888); 
```

我也尝试过使用 UDP 方法，但没有记录任何消息。

任何帮助将不胜感激。此外，如果 Java 没有可能的解决方案，那么任何其他语言都可以。

**编辑：**

这是我尝试发送数据的Java代码

```
 public static void main(String[] args){
    try{
      Socket socket = new Socket("192.168.1.160", 8888);

      if(socket.isConnected()){
          System.out.println("It is connected.");
          socket.setKeepAlive(true);
          System.out.println(socket.isBound());
      }else{
          System.out.println("It is not connected.");
      }
      PrintWriter out = new PrintWriter(socket.getOutputStream(), true);
      BufferedReader in =
              new BufferedReader(
                        new InputStreamReader(socket.getInputStream()));
      String msg = "32";
      for(int i = 0; i < 50; i++){
          out.println(msg);
      }

      //Receive a reversed message
      msg = in.readLine();
      System.out.println("Server : " + msg);

    }catch(Exception ioe){
      ioe.printStackTrace();
    }
  } 
```

谢谢。

**更新**

我与这些设备的一些人取得了联系，他们向我展示了一种通过 TCP/IP 连接直接通信的方法，该连接向那里发送 ASCII 命令协议。这将允许在每个级别进行更深入的控制。

所以，现在我正在编写一个可以使用这些协议进行通信的 java 程序。因为，我不再使用通信端口了，我想模拟波特率、数据位、停止位的东西。当我有一些有效的时候我会发布。

感谢所有的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:02:08.507

如果您使用的产品正在将流量转发到 COM 端口，您应该在 COM 端口而不是网络连接上进行侦听。套接字用于网络流量。一个快速的谷歌搜索为我找到了这个。 [如何使用 JAVA 向 COM PORT 发送数据？](https://stackoverflow.com/questions/900950/how-to-send-data-to-com-port-using-java)

也许这会有所帮助？

# html - 在正斜杠之后在 url 中使用波浪号

> ID：16065855
> 
> 赞同：1
> 
> 时间：2013-04-17T16:56:13.460
> 
> 标签：html, css, url

我在一些我正在更改的 HTML 代码中遇到了此表单的背景图像参考。

```
<a style="background: url('/~/media/Images/Shared/Logos/logo.png')" href="/">Home</a> 
```

我无法询问原作者，我不明白这里的波浪号是如何评估的。

如果 url 字符串以 "url('~/media/.....'" 开头，我理解它将是媒体用户的根目录（所以你最好确保在所有部署服务器上创建该用户），但是/ 前面的波浪号让我很困惑。

我所做的所有搜索都只是带回了主目录解释，但似乎并非如此。

[编辑] 这是现场网站的一部分，徽标正确显示，我只是不知道为什么。

[编辑 2] 该站点是使用 ASP.NET 构建的。

[编辑 3] 以上是来自站点上的视图/源的 url 的清理版本，而不是 ASP 代码。

[编辑 4] 对于那些可能好奇的人，这里是实际的工作 url。我在同一家公司工作，但在不同的部门工作，我正在使用 Java EE 构建一个内部支持工具，它借用了一些样式。我看到了“/~/....”，但想不出一个很好的理由。

```
http://business.hibu.co.uk/~/media/Images/Shared/Logos/logo.png 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T17:11:34.563

在 ASP.NET 中，波浪号表示应用程序的根（不一定是网站的根）。但它仅在某些情况下可用（服务器控件、数据绑定的控件，或者有时头部部分中的标签，如`script`或`link`）。

我不认为`a`常规正文中的标记会处理它，而且我认为 ASP.NET 不允许波浪号去任何地方，除了字符串的开头。

所以我猜你实际上只是有一个名为`~`. 在 Windows 中，我不认为波浪号有任何特殊含义，所以它不是用户的主目录或类似的东西 - 只是一个普通目录的时髦名称。

**编辑**

在阅读您的评论后，这是它在浏览器中呈现的方式，并且它正在工作，我几乎可以肯定`~`在您的 Web 服务器上调用了一个真正的目录。要么是这样，要么是某种 URL 重写正在进行，您需要查看 web.config 或 IIS 设置才能看到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T16:58:32.270

这很可能来自他们的本地机器，即他们的主目录。如果资产路径是从他们的开发机器复制的，它永远无法从远程服务器正确解析。

否则，它是相对于其服务器上主目录的路径。

# c# - Web API 中的路由/操作损坏

> ID：16065860
> 
> 赞同：1
> 
> 时间：2013-04-17T16:56:32.030
> 
> 标签：c#, c#-4.0, asp.net-web-api, asp.net-web-api-routing

我在 WebApiConfig.cs 中定义了我的默认路由：

```
 config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional, page = 20, offset = 0 }
        ); 
```

在我的控制器中，我有一个动作：

```
 // GET api/users
    [HttpGet]
    public IEnumerable<User> Get(string id, int page, int offset)
    {
        return id != null 
            ? new User[]{Get(id)} 
            : _userService.All().Skip(offset*page).Take(page);
    } 
```

我知道这是最近工作的，但现在我得到了臭名昭著的“在控制器'用户'上找不到与请求匹配的操作”错误。我似乎无法弄清楚（如果有的话）发生了什么变化。自从添加页面/偏移的默认值以来，我已经撤消了所有更改，但仍然没有。

有任何想法吗？

请求网址：`http://localhost/api/api/Users`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T17:15:01.680

这里参数 'id' 是可选的，但动作选择器希望在动作上为其指定一个默认值。

public IEnumerable Get(string id **= null** , int page, int offset)

另外关于网址，可能是一个错字，你的意思是`http://localhost/api/Users`而不是`http://localhost/**api/api**/Users`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T16:59:44.640

您尚未在路线中指定操作。您要么需要在`{action}`URL 中添加一个片段，要么在`default`对象中指定操作。

# php - 计算图像大小保持父 div 纵横比的逻辑

> ID：16065864
> 
> 赞同：2
> 
> 时间：2013-04-17T16:56:40.030
> 
> 标签：php, logic

让我用一个例子来解释。

```
Lets say I have an Image of size

960px X 668px

I have a div which holds this image. The div size is
154px X 75px 
```

这个 div 可以有任何可变的大小。

```
If we see that the aspect ratio of image and the aspect ratio of the div 
that holds image are different. 
```

我需要做的就是使用 PHP 调整和裁剪图像的大小，使其尽可能保持原始大小的最大高度和宽度，并保持包含该图像的 div 的纵横比。**我只需要一个逻辑来计算一个百分比**，该百分比应该乘以多少 DIV 宽度和高度，以便生成的大小更接近图像大小但不超过图像大小，并且纵横比将与 DIV 相同但不是形象。

谢谢莎米拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:20:52.107

好的，那么您需要检查是否将使用宽度比或高度比。

```
img.with / div.with = ratio_w
img.height / div.height = ratio_h 
```

然后，较高的比率是您需要使用的比率，以确保您的图像适合 div。

以你的例子，我们有

```
ratio_w = 960 / 154 = 6.2
ratio_h = 668 / 75 = 8.9 
```

`ratio_h`越高，`ratio_h`你的比例也越高

然后，为了适合您的 div，这里是调整大小的计算

```
960 / 8.9 = 108
668 / 8.9 = 75 
```

逻辑与其他值相同。

* * *

如果没有调整大小的问题，我建议检查这个 CSS 属性

```
background-size: contain; 
```

# design-patterns - 数据映射器在领域驱动设计模式中相互调用

> ID：16065865
> 
> 赞同：2
> 
> 时间：2013-04-17T16:56:40.223
> 
> 标签：design-patterns, domain-driven-design, datamapper

在我的项目中，我使用的是领域驱动设计模式。我有各种用于持久化模型对象的数据映射器。我的一些模型包含其他模型作为属性（例如，模型类 Book 包含一组模型类 Person 作为作者）。

```
Book
  |->string title
  |->Person[] authors 
```

每个模型都有一个对应的映射器（例如 Book_Mapper、Perspon_Mapper）。

在持久化模型对象时，一个映射器是否可以调用另一个映射器：

例如，当持久化 Book 对象时，我调用

```
Book_Mapper::Save(Book) 
```

调用

```
Person::Mapper(Person) 
```

这本书的每个作者？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T17:31:16.757

从 DDD 的角度来看，要解决有关[数据映射器](http://martinfowler.com/eaaCatalog/dataMapper.html)的问题，首先要稍微提炼一下您的模型并确定您的[聚合](http://devlicio.us/blogs/casey/archive/2009/02/16/ddd-aggregates-and-aggregate-roots.aspx)、实体和值对象，这一点很重要。

假设它`Book`是一个聚合，a`Person`是一个值对象。在这种情况下，不需要创建单独的映射器，`Person`因为它始终作为`Book`聚合的一部分持续存在，因此书籍的映射器也应该处理人的映射。事实上，为 person 创建一个单独的映射器可能会令人困惑。

然而，如果`Person`也是一个集合，那么最好`Book`仅通过 ID 引用作者。在这种情况下，持久化一本书时无需调用人员映射器。

# laravel - Laravel 查询优化

> ID：16065869
> 
> 赞同：0
> 
> 时间：2013-04-17T16:56:58.357
> 
> 标签：laravel

我在 laravel 中有一个查询：

```
 ...
$query = $model::group_by($model->table().'.'.$model::$key);
$selects = array(DB::raw($model->table().'.'.$model::$key));
...
$rows = $query->distinct()->get($selects); 
```

这工作正常，并为我提供了我需要的字段键，但问题是我需要获取所有列而不仅仅是键。

使用这个：

```
$selects = array(DB::raw($model->table().'.'.$model::$key), DB::raw($model->table().'.*')); 
```

不是一个选项，因为它不适用于 PostgreSQL，所以我曾经 `$rows` 获取其余列：

```
for ($i = 0; $i<count($rows); $i++)
{
    $rows[$i] = $model::find($rows[$i]->key);
} 
```

但是正如您所见，它的效率太低了，那么我该怎么做才能使它更快，更高效呢？

你可以在这里找到整个代码：[https ://gist.github.com/neo13/5390091](https://gist.github.com/neo13/5390091)

附言。我应该使用 join 但我不知道如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T21:31:14.393

只是不要将任何内容传递给 get() ，它将返回所有列。此外，密钥在表中可能是唯一的，所以我不完全理解为什么你需要分组。

```
$models = $model::group_by( $model->table() . '.'.  $model::$key )->get(); 
```

# mysql - 为什么第一次执行没有查询缓存的 mysql 查询比以后执行需要更长的时间？

> ID：16065873
> 
> 赞同：1
> 
> 时间：2013-04-17T16:57:15.273
> 
> 标签：mysql, database

我正在尝试优化表单的查询`SELECT SQL_NO_CACHE col FROM TABLE ..`。当我第一次连接到数据库并执行查询时，大约需要 9 秒。当我第二次执行查询时，几乎需要 0.1 秒。我将[SQL_NO_CACHE](http://dev.mysql.com/doc/refman/5.0/en/query-cache-in-select.html)放在查询中以确保 mysql 没有从缓存中读取结果。我的问题是为什么在连接到数据库（`mysql -uroot ...` ）之后第一次执行查询比后续执行花费的时间要长得多。查询的实际执行时间是多少？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T17:05:17.167

MySQL 可能需要一段时间来预热其内部缓存。请记住，`SQL_NO_CACHE`这意味着仅避免查询缓存。从性能的角度来看，索引缓存是最重要的。如果索引没有被读取，那么在第一次使用时会受到很大的惩罚。

如果您使用 InnoDB，您应该使用，请确保您的缓冲池足够大。大多数服务器应该分配至少几 GB 的内存。

# jsp - 在 Servlet 中，区分提交表单的两个按钮

> ID：16065875
> 
> 赞同：1
> 
> 时间：2013-04-17T16:57:23.387
> 
> 标签：jsp, servlets

在我的 jsp 中，我有两个提交表单的按钮。表单的操作重定向到一个 servlet。我想在我的 servlet 中知道按下了哪个按钮。有没有办法区分这两个按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:14:51.457

单击的提交按钮的名称包含在请求数据中。

所以：

```
<input type="submit" name="submit1"/>
<input type="submit" name="submit2"/> 
```

如果您要单击其中之一，那么您将有效地获得`submit1=`或`submit2=`作为请求中的查询参数。你只会得到被点击的那个，而不是另一个。您可以测试有效负载中的值是否存在，即使它没有与之关联的实际值。

# web-services - 通过 JAX-WS WebService 时截断的 Java 对象

> ID：16065876
> 
> 赞同：0
> 
> 时间：2013-04-17T16:57:25.577
> 
> 标签：web-services, jax-ws, marshalling, classcastexception

我目前正在开发一个在 Java 中使用 JAX-WS Web 服务的项目。全局主题是这样的：用户在本地创建一个对象，比如说一个**Agent**。他调用第一个**web 服务**并将其代理传递给 web 服务。Web 服务处理代理（修改其属性：例如生命点），并将其传递给另一个 Web 服务。此调用是从第一个 Web 服务发出的，因此用户在此过程中无事可做。

在一系列网络服务之后，用户检索已修改的代理。

我的项目的目的是设计 2 个部分：

*   指定前面描述的行为的*框架：webservices、代理和迁移过程*
*   使用我的框架的*演示应用程序。*主要区别在于添加了一个 GUI 和一个**扩展 Agent 的新类 Avatar**。所以迁移过程仍然是“由框架”完成的，使用代理对象。

以下代码显示了一个简单的示例，说明我如何调用我的 web 服务、托管我的 Avatar，然后从服务中检索代理：

```
// connection to the server
URL endpoint= new URL("http://SERVER/tomcat/KiwiBidonDynamique/ServiceWebBidonDeDadou?wsdl");
QName serviceName=new QName("http://avatar/","ServeurKiwiBidonService");
Service service = Service.create(endpoint, serviceName);
WebService port = service.getPort(WebService.class);

Avatar myAvatar = new Avatar(1, "Jack the Ripper");
port.hostAgent(myAvatar);

// some process on the service...

Avatar myAvatarTransformed = (Avatar) port.getAgent("AgentNumberOne"); 
```

当我这样做时，我在最后一行出现异常：

```
Exception in thread "main" java.lang.ClassCastException: agent.Agent cannot be cast to avatar.Avatar 
```

* * *

经过大量的日志阅读，我想原因是网络服务的工作方式。当被调用时，我在参数中给出的 Avatar 被编组在我的 JVM 中，然后在服务上解组，但**服务仅在解组时构造一个 Agent**。这样做，它会截断特定于 Avatar 的数据。然后，当我尝试从服务中检索我的代理时，它无法转换为 Avatar。

有没有办法在服务上作为代理处理时保留头像信息？我可以以某种方式编写自己的编组/解组吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T08:32:04.023

如果您的 Web 服务将 Agent 元素定义为传入数据，则不能将其解组为继承的类。我想可以编写自己的编组器，但这并不像听起来那么容易（我建议不要这样做）。要么为每个类编写一个单独的 WS（混乱），要么使传入的数据具有可以存储其他结构的元素，例如 type:any（也混乱）。事实上，WS 并不完全是 OO。

# globalization - 在 IResourceProvider 中未调用 Meta:resourcekey 的 GetObject

> ID：16065881
> 
> 赞同：0
> 
> 时间：2013-04-17T16:57:34.417
> 
> 标签：globalization, resx, resourceproviderfactory

我需要将站点的 .resx 文件移动到数据库并使用该`IResourceProvider`接口实现自定义资源提供程序。我已经按照以下示例进行操作：

[http://msdn.microsoft.com/en-us/library/system.web.compilation.iresourceprovider.aspx](http://msdn.microsoft.com/en-us/library/system.web.compilation.iresourceprovider.aspx)

当我打电话时：

```
this.GetLocalResourceObject("myResourceKey.Text") 
```

中的`GetObject`方法`IResourceProvider`被正确调用。

但是，整个站点都在使用`meta:resourcekey="myResourceKey"`所有标签的属性，并且`GetObject`没有为这些标签调用该方法。我可以看到没有其他方法`IResourceProvider`可以实现，是否有我遗漏的东西，或者是否有另一种方法可以将 .resx 数据移动到数据库而不对视图进行任何更改，即仍然继续使用`meta:resourcekey`属性。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T13:17:56.847

我发现有关本地化的 MSDN 文章缺乏信息。在以下位置查看 Rick Strahl 的自定义资源提供程序的实现：

[http://www.west-wind.com/presentations/wwdbResourceProvider/](http://www.west-wind.com/presentations/wwdbResourceProvider/)

和

[https://github.com/RickStrahl/Westwind.Globalization](https://github.com/RickStrahl/Westwind.Globalization)

他详细解释了他编写资源提供者的过程，这应该会给你一个好的开始

# jquery - activeadmin中的delete按钮失效了，送我去show

> ID：16065886
> 
> 赞同：8
> 
> 时间：2013-04-17T16:57:55.063
> 
> 标签：jquery, ruby-on-rails, activeadmin

问题是我无法从我的应用程序中删除任何内容。我删除了只留下公众、布局和管理员的视图。

```
<a rel="nofollow" data-method="delete" data-confirm="Are you sure you want to delete this?" href="/admin/actividades/34">Delete Actividade</a> 
```

应用程序/管理员/actividades

```
ActiveAdmin.register Actividade do
menu :label => "Actividades", :priority => 14

form :partial => "form"
actions :index, :show, :new, :create, :update, :edit, :destroy
index :title => "Actividades" do 
    column "Id", :id
    column "Nome",  :name
    column "Grupo", :grupo
    column "Actividade", :category
    column "Nome da imagem",  :image_file_name
    column "Video",  :video
    column "Criado a",  :created_at
    column "Atualizada a",  :updated_at
    default_actions

end 
```

结尾

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T22:37:41.150

Check your active_admin.js file, must have:

```
//= require jquery
//= require jquery_ujs 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-31T11:53:35.253

这对我有帮助（我的资产中有旧的 1.5.1 版本，但我认为你可以用任何你想要的替换它）

```
//= require jquery-1.5.1-min
//= require jquery_ujs
//= require bootstrap-datepicker 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-06T05:27:05.100

在 active_admin.js.coffee 中。

尝试：

```
#= require active_admin/base 
```

# c# - 播放在项目内具有相对路径的 wav 文件

> ID：16065890
> 
> 赞同：5
> 
> 时间：2013-04-17T16:58:20.813
> 
> 标签：c#, visual-studio-2012, wav, relative-path, soundplayer

我在相对路径和 wav 文件的复制方面遇到了一些问题。我有这个完美的简单代码：

```
SoundPlayer player = new SoundPlayer();
player.SoundLocation = @"C:\Users\Admin\Documents\Visual Studio 2012\Projects\TestProject\TestProject\Data\Sounds\car.wav";
player.Play(); 
```

我想以某种方式使用相对路径播放该文件，但我没有成功：

```
SoundPlayer player = new SoundPlayer();
player.SoundLocation = @"Data\Sounds\car.wav";
player.Play(); 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T17:00:45.977

`Data`目录在应用程序的根目录中吗？**您是否将目录内容复制为输出？**

如果是这样，你的意思是，`Data\Sounds\car.wav`？

哪个，如果从 Visual Studio 运行将在`[projectroot]\[release]\bin\Data\Sounds\car.wav`

如果在 bin 文件夹中看不到此目录，则需要确保选择了所有要复制到输出目录的文件（这将复制目录结构）。您可以通过单击项目中的文件并选择该文件作为输出来执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T17:19:02.100

毕竟使用绝对路径可能会更好。您可以从 exe 文件中获取根路径，然后将您的相对路径附加到它。像这样：

```
// getting root path
string rootLocation = typeof(Program).Assembly.Location;
// appending sound location
string fullPathToSound = Path.Combine(rootLocation, @"Data\Sounds\car.wav");
player.SoundLocation = fullPathToSound; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T17:11:51.230

[使用Path.GetFullPath("relativ/path")](http://msdn.microsoft.com/de-de/library/system.io.path.getfullpath.aspx)获取文件的完整路径

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-12T13:18:16.120

```
 //WindowsFormsApplication4.exe is name of name space this file name found in Debug file

 //you should copy your "sound.wav" into your Debug file

      string x = (Assembly.GetEntryAssembly().Location + "");
      x = x.Replace("WindowsFormsApplication4.exe", "sound.wav");
      SoundPlayer player1 = new SoundPlayer(x);
      player1.Play(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-07T13:05:03.660

这对我有用

```
System.Media.SoundPlayer player1 = new System.Media.SoundPlayer(Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location) + @"\1.wav"); 
```

# java - LinearGradientPaint 通过 val 获取颜色

> ID：16065891
> 
> 赞同：1
> 
> 时间：2013-04-17T16:58:25.910
> 
> 标签：java, colors, awt, linear-gradients

所以有一个问题涉及Java中的线性渐变，使用多种颜色。我希望在渐变的任何一点上获得 RGB 颜色。创建渐变和绘画很容易，我可以得到我设置的那些颜色的分数和颜色.....

我遇到的问题是我想在渐变的任何点获得 RGB 颜色。分解它，一个示例应用程序将是在一些 JPanel 中创建和显示渐变，大小为 255（maxSize=255（见下文））。根据所述 JPanel (maxSize) 的大小，插值会有所不同（maxSize 中的数字越大，插值越多）。我希望能够在渐变的任何位置获取 RGB 值，您几乎可以将其等同于能够执行以下操作...

根据渐变中的位置抓取 RGB 值

```
RGB_Values = p.getColorByGradientLocation(float locationInGradient); 
```

或者

根据特定值获取 RGB 值，介于 Point2D 开始和 Point2D 结束之间

```
RGB_Values = p.getColorByValue(float value); 
```

例如设置渐变代码

```
Point2D start = new Point2D.Float(0, 0);
Point2D end = new Point2D.Float(0, maxSize);
Color[] colors = {n number of colors};
dist[] = ((float) i / (float) colors.length); //equally distributes colors
p = new LinearGradientPaint(start, end, dist, colors, CycleMethod.NO_CYCLE); 
```

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T19:21:30.193

感谢 Nolo 的建议，帮助我找出一种方法来做到这一点。这仍在进行中，我可能会找到更好的方法来做到这一点，但现在这可行....

所以你需要将线性渐变绘制到面板上，然后将面板绘制到图像上（不显示它）。

```
BufferedImage bi = new BufferedImage(xSize, ySize, BufferedImage.TYPE_INT_RGB);
Graphics2D g = bi.createGraphics();
panel.print(g); 
```

您需要将图像和面板的宽度设置为 1，然后将高度设置为与渐变端匹配（为速度设置 1 宽度）。

要显示渐变，您可以从每行仅抓取 1 个像素，然后使用 image.getRGB(x,y) 结合位设置获取像素值，例如

```
int rgb = im.getRGB(0, i);
r = (rgb >> 16) & 0xFF;
g = (rgb >> 8) & 0xFF;
b = (rgb & 0xFF);
Color newC = new Color(r, g, b); 
```

如果您使用上述方法遍历图像高度，则可以获得您创建的渐变的所有颜色值。

:-)

# ios - 无法将文件从 Resources 文件夹复制到 Documents 文件夹

> ID：16065896
> 
> 赞同：0
> 
> 时间：2013-04-17T16:58:50.883
> 
> 标签：ios

![在此处输入图像描述](https://i.stack.imgur.com/T1FLs.png)

这是我的代码：

```
- (void)copyFileIfNeeded
{
    NSFileManager *fileManager= [NSFileManager defaultManager];
    NSError *error;
    NSString *filePath = [self getFile];
   BOOL success = [fileManager fileExistsAtPath:filePath];
   if ( !success )
   {
        NSString *defaultFilePath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"BQWDatabase.db"];
        success = [fileManager copyItemAtPath:defaultFilePath toPath:filePath error:&error];
    }
}

- (NSString *)getFile
{
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDir = [paths objectAtIndex:0];
    return [documentsDir stringByAppendingPathComponent:@"BQWDatabase.db"];

}

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.
    [self copyFileIfNeeded];

    return YES;
} 
```

但是 Documents 文件夹总是空的，我该如何解决这个问题？谢谢你。

编辑：

![在此处输入图像描述](https://i.stack.imgur.com/4vbTV.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:01:23.383

你确定它`BQWDatabase.db`包含在你的构建中吗？您可以通过在 XCode 中打开右侧窗格，选择顶部最左侧的图标，然后展开“Target Membership”来进行检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T17:16:51.593

我在自己的代码中做了非常相似的事情，除了我找到的默认文件如下：

```
NSString *defaultFilePath = [[[NSBundle mainBundle] pathForResource:@"BQWDatabase" ofType:@"db"]; 
```

不确定它是否有所作为

# magento - Magento 结账时价格翻倍 - sales_order_flat_quote_address

> ID：16065898
> 
> 赞同：5
> 
> 时间：2013-04-17T16:58:53.520
> 
> 标签：magento, magento-1.7, checkout

我们目前在 Magento Community 1.7 上遇到了一个问题，一些客户在结帐时的总数翻了一番。

调查表明，对于这些客户的报价，他们在 sales_order_flat_quote_address 表中有四个条目。该表看起来应该只包含两行，一行用于计费，一行用于运输。

我们很难理解为什么要创建四行，并且通过严格的测试无法找到问题的原因。

以下测试用例已顺利完成：

1) 创建报价，然后登录。登出。创建新报价，然后登录。

2) 确保客户没有以前的报价。登录。登出。添加产品。登录。

3）登录时创建报价。保持登录状态。访问单独的浏览器，添加产品，使用相同的客户帐户登录。

4）创建报价，登录。通过代理/新 IP 打开站点。添加产品。登录。

在上述所有情况下，问题都不会发生。

有没有人曾经有过或听说过这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-27T06:26:46.880

我们在企业 1.12 上遇到了这个问题。它很难追踪，我们与提供补丁的 magento 一起提出了它。

您是否在您的网站上使用 OneStepCheckout？或任何其他第 3 方模块？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-15T14:15:50.100

我们也遇到过同样的问题。

经过调查，我们确定这是已安装主题的问题。

为了确定这一点，我们执行了以下步骤：

1.  创建一个新的 Magento 实例。
2.  不要添加任何主题
3.  安装产品子集（甚至单个产品）进行测试。
4.  在结帐时检查价格。

我感觉主题开发人员使用了包含此错误的旧基本模板。当我发现更多信息时，将用更多信息更新这篇文章。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-11T08:40:00.100

我通过覆盖解决了重复地址的问题`Mage_Sales_Model_Quote::_beforeSave`

```
public function _beforeSave()
{
    $addresses = $this->getAllAddresses();
    if (count($addresses) > 2) {
      for($i = 2; $i < count($addresses); $i++) {
        $address = $addresses[$i];
        $address->isDeleted(true);
      }
    }

    parent::_beforeSave();
} 
```

该代码会删除任何导致购物车价格翻倍的重复地址。

归功于[https://web.archive.org/web/20161230082727/http://www.daveboyce.com/double-order-totals-in-magento/](https://web.archive.org/web/20161230082727/http://www.daveboyce.com/double-order-totals-in-magento/)的答案。

# c# - 清除功能区下拉 C# excel 插件 2010

> ID：16065902
> 
> 赞同：0
> 
> 时间：2013-04-17T16:59:05.537
> 
> 标签：c#, c#-4.0, excel-addins

我试图为我的问题找到解决方案。但是什么也找不到。我有 2 个下拉列表，当我更改第一个列表中的值时，我想清除并填充新值新列表。可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:23:17.223

很简单的解决方案

```
dropDown.Items.Clear(); 
```

# list - Scala - 可变 ListBuffer 或不可变列表可供选择？

> ID：16065904
> 
> 赞同：1
> 
> 时间：2013-04-17T16:59:08.107
> 
> 标签：list, scala, immutability

我正在编写一个简单的 scala 程序，它将计算定义大小的报价列表的移动平均值，比如 100。报价将以每秒大约 5-6 个报价的速度出现。

1）将引号保留在不可变的scala列表中是否很好，我猜每次引用出现时都会创建一个新列表？会不会占用太多不必要的内存？

或者

2）将引号保留在像 ListBuffer 这样的可变列表中是否很好，其中我将删除最旧的引号并在每次引用出现时推送新引号。

当前代码

```
package com.example.csv

import scala.io.Source
import scala.collection.mutable.ListBuffer

object CsvFileParser {
  val WINDOW_SIZE = 25;
  var quotes = ListBuffer(0.0);
  def main(args: Array[String]) = {
    val src = Source.fromFile("GBP_USD_Week1.csv");
    //drop header and split the comma separated tokens
    val iter = src.getLines().drop(1).map(_.split(","));
    // Sliding window reads ahead // remove it
    val index = 0;

    while(iter.hasNext) {
     processRecord(iter.next) 
    }
    src.close()
  }

  def processRecord(record: Array[String]) = {
    if(quotes.length < WINDOW_SIZE){
      quotes += record(4).toDouble; 
    }else {
      val movingAverage = quotes.sum / quotes.length
      quotes.map(_ + " ").foreach(print)
      println("\nMoving Average " + movingAverage)
      quotes = quotes.tail;
      quotes += record(4).toDouble;

    }
  }

  /*def simpleMovingAverage(values: ListBuffer[Double], period: Int): ListBuffer[Double] = {
      ListBuffer.fill(period - 1)(0.0) ++ (values.sliding(period).map(_.sum).map(_ / period))  
  }*/

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T17:45:53.370

这取决于您是否以相反的顺序保留项目。`List`s 将在开始时以恒定的时间附加元素（`::`不会创建一个全新的列表），而**s**`ListBuffer#+=`将在将其附加到列表的末尾时创建一个节点。

`List`使用和`ListBuffer`-- 在内部这些是相同的数据结构之间，性能差异或内存占用差异应该很小或没有差异。唯一的问题是您是否需要`reverse`最后的列表 - 如果需要，这将需要创建第二个列表，因此它可能会更慢。

在您的情况下，使用列表缓冲区的决定是正确的——您需要删除第一个元素，并附加到集合的另一侧，这是普通功能列表不允许您有效执行的操作。

但是，在您的代码中，您调用`tail`. `ListBuffer`这实际上会复制列表缓冲区的内容，而不是给你一个便宜的尾巴（`O(WINDOW_SIZE)`操作）。您应该调用`quotes.remove(0, 1)`来删除第一个条目——这只会改变当前缓冲区，一个`O(1)`操作。

对于非常快的报价到达，您可以考虑使用自定义数据结构——对于列表缓冲区，您将支付装箱成本。`5-6`但是，如果每秒有引号并且`WINDOW_SIZE`是 around `100`，您不必担心——即使调用`tail`列表缓冲区也应该是可以接受的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T17:52:52.713

Scala 中的不可变结构使用一种称为**结构共享**的技术。对于列表，Scaladocs 中也提到了它：

> 功能列表具有持久化和结构共享的特点，因此在某些场景下提供了可观的性能和空间消耗优势。

所以：

*   不可**变**列表将占用更多空间，但不会更多，并且会更好地与其他 Scla 构造融合
*   **可变**版本容易出现并发问题，会更快一点，使用的空间也少一点。

至于代码：

*   如果您使用可变结构，则可以摆脱 var，如果您想覆盖不可变结构，请保留它
*   具有返回列表而不是操作可变结构或具有全局变量的方法将被认为是好的样式
*   如果你像下面的代码片段那样处理文件，你不需要关闭文件，文件也会被同时处理

    def processLines(path: String) : Unit = for { line <- Source.fromFile("GBP_USD_Week1.csv").getLines.tail.par record <- line.split(",") } processRecord(record)

# clojure - 为什么我会选择不使用 clojure 1.5 reducers 功能？

> ID：16065910
> 
> 赞同：18
> 
> 时间：2013-04-17T16:59:45.877
> 
> 标签：clojure

我正在阅读 1.5 中引入的 clojure reducers，这里是：[https](https://github.com/clojure/clojure/blob/master/changes.md) ://github.com/clojure/clojure/blob/master/changes.md 。我的理解是，它们是对现有 map/filter/reduce 函数的性能增强。所以如果是这样的话，我想知道为什么它们在一个新的命名空间中，而不是简单地替换现有的 map/reduce/filter 实现。换句话说，我为什么*不*选择使用新的减速器功能？

编辑：

针对最初的两个答案，这里是一个澄清：

我将在这里引用发行说明：

> > Reducers 提供了一组用于处理集合的高性能函数。实际的折叠/减少算法是通过被减少的集合指定的。这允许每个集合定义最有效的方法来减少其内容。

这听起来不像新的 map/filter/reduce 函数本质上是并行的。例如，在发行说明中进一步说明：

> > 它包含一个新函数 fold，它是一个并行 reduce+combine

因此，除非发行说明写得不好，否则在我看来，有一个新函数 fold，它是并行的，而其他函数是特定于集合的实现，旨在为特定集合产生尽可能高的性能。我只是误读了这里的发行说明吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-17T17:38:35.743

*前言：你有问题，你将使用并行，现在问题二有你。*

从某种意义上说，它们是替代品（与普通的旧顺序图等相比）。并非所有操作都可以并行化（在许多情况下，操作必须至少是[关联](https://en.wikipedia.org/wiki/Associative_property)的，还要考虑惰性序列和迭代器）。此外，并非每个操作都可以有效地并行化（总是有一些协调开销，有时开销大于并行化增益）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-17T17:37:54.183

在某些情况下，它们不能替换旧的实现。例如，如果您有无限序列，或者您实际上需要对集合进行顺序处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T05:51:21.937

您可能决定不使用减速器的几个很好的理由：

*   您需要保持与 Clojure 1.4的**向后兼容性。**这使得在库代码中使用 reducer 变得很棘手，例如，您不知道您将使用哪个 Clojure 版本
*   在某些情况下，有**更好的选择**：例如，如果您正在处理数字数组，那么使用[core.matrix](https://github.com/mikera/matrix-api)之类的东西几乎肯定会更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T04:14:19.487

我发现 Rich Hickey 写的以下文章虽然仍然有些令人困惑，但为我清除了（一些）事情： http: [//clojure.com/blog/2012/05/08/reducers-a-library-and-model- for-collection-processing.html](http://clojure.com/blog/2012/05/08/reducers-a-library-and-model-for-collection-processing.html)

特别是总结：

> > 通过采用另一种将集合视为可简化而不是可排序事物的观点，我们可以获得一组互补的基本操作，这些操作在延迟与并行性之间进行权衡，同时保留相同的高级函数式编程模型。由于两个模型保持相同的形状，我们可以轻松地选择适合手头任务的模型。

# pandas - 熊猫回归计算一些标准错误的“南”？

> ID：16065912
> 
> 赞同：0
> 
> 时间：2013-04-17T16:59:59.127
> 
> 标签：pandas

我正在使用 pandas 在一个相当大的数据集上运行多元回归，该数据集具有约 40 个自变量。但是，对于其中一些变量，pandas 可以计算系数，但不能计算标准误差（因此不能计算 t-stat、p-value 等）。这是回归输出的一部分：

```
...
 var1      0.0000     0.0001       0.46     0.6488    -0.0002     0.0002
 var2     25.8603        nan        nan        nan        nan        nan
 var3      9.5578        nan        nan        nan        nan        nan
--------------------------------------------------------------------------------
 var4     -4.7974        nan        nan        nan        nan        nan
 var5      2.9619        nan        nan        nan        nan        nan
 var6      1.9343        nan        nan        nan        nan        nan
 var7    -24.8932        nan        nan        nan        nan        nan
 var8      4.7703        nan        nan        nan        nan        nan
--------------------------------------------------------------------------------
 var9    -16.0344        nan        nan        nan        nan        nan
 var10     5.8313        nan        nan        nan        nan        nan
 var11    -3.1322        nan        nan        nan        nan        nan
 var12     5.5747     1.4304       3.90     0.0001     2.7711     8.3784
 var13     4.0470     1.8455       2.19     0.0284     0.4299     7.6641
... 
```

请注意，所有带有 nan 的 var 都是二进制变量，但是在存在标准错误的变量中，有些是二进制的，有些是正常的连续变量。

以前有人经历过吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:08:50.037

认为我找到了答案：那些具有“nan”问题的二进制变量导致多重共线性（对于该集合中的一个虚拟变量，每个数据点都是 1）。删除这些虚拟变量之一解决了问题！没想到 pandas 仍然会尝试使用这些数据进行计算，但确实如此！

# windows - 如何将图标与自定义应用程序关联（使用 powershell 脚本注册）

> ID：16065913
> 
> 赞同：2
> 
> 时间：2013-04-17T17:00:08.493
> 
> 标签：windows, powershell, registry

我使用 cygwin 版本的 gvim 在 Windows 中编辑文件，为此我创建了一个 bat 脚本，它使用 cygwin 版本的 gvim（通过将路径转换为 ​​cygwin 格式）打开一个文件。我还编写了一个小型 powershell 脚本来将此 bat 脚本注册到 Windows 资源管理器，这样我就可以使用“打开方式”上下文菜单关联文件扩展名。这是脚本：

```
$ErrorActionPreference = "Stop"
$classes="hkcu:\software\classes"
$appid="cygwin.gvim"
$apps="$classes\applications"
$cmd='...SOMEDIRECTORY...\edit-gvim.bat'
$friendlyname='gVim (Cygwin)'
$icon='...ANOTHERDIRECTORY...\vim.ico'
$filetypes=@(".txt", ".ps1", ".sh", ".py", ".cs", ".cpp", ".c", ".rb",
    ".zsh", ".bash", ".vbox", ".xml", ".yml", ".yaml", ".bat")

if (test-path "$apps\$appid") {
  # cleanup
  remove-item -recurse "$apps\$appid"
}

# register open commands to know filetypes
new-item -path "$apps\$appid\shell\open\command" -value "$cmd `"%1`"" -force

# add a context menu item(edit with gVim) to every file in windows explorer
new-item -path "$classes\*\shell\Edit with $friendlyname\command" -value "$cmd `"%1`"" -force

# friendly name for the 'open with' dialog
new-itemproperty -path "$apps\$appid\shell\open" -name 'FriendlyAppName' -value $friendlyname

# register the icon
# FIXME this has no effect 
new-item -path "$apps\$appid\DefaultIcon" -value $icon -type expandstring

# register supported file extensions
new-item -path "$apps\$appid\SupportedTypes"
foreach ($ext in $filetypes) {
  new-itemproperty -path "$apps\$appid\SupportedTypes" -name $ext -PropertyType string -value ''
} 
```

除了“FIXME”注释下方的行之外，一切正常，这显然没有效果。我没有看到我提供的带有与 gvim 关联的应用程序的图标，而是看到了未知文件类型的 windows 默认图标。我在这里想念什么？

以下是我用来编写此脚本的一些资源：

*   [http://msdn.microsoft.com/en-us/library/windows/desktop/ee872121(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ee872121(v=vs.85).aspx)
*   [http://msdn.microsoft.com/en-us/library/cc144158(VS.85).aspx](http://msdn.microsoft.com/en-us/library/cc144158(VS.85).aspx)
*   [http://msdn.microsoft.com/en-us/library/windows/desktop/cc144101(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/cc144101(v=vs.85).aspx)
*   [创建注册表项以将文件扩展名与 C++ 中的应用程序相关联](https://stackoverflow.com/questions/1387769/create-registry-entry-to-associate-file-extension-with-application-in-c)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T03:43:07.407

我可能会犯错，但据我了解`DefaultIcon`is 的语法：

```
"Full path to a file,ordinal" 
```

当您想要指向 EXE 或 DLL 中的资源时，这很有用

```
C:\Program Files (x86)\PowerGUI\ScriptEditor.exe,1 
```

但是如果你想指向一个图标文件，你必须保持相同的语法：

```
[HKEY_CLASSES_ROOT\AcroExch.acrobatsecuritysettings.1\DefaultIcon]
@="C:\\Windows\\Installer\\{AC76BA86-7AD7-1036-7B44-A95000000001}\\PDFFile_8.ico,0" 
```

所以，在你的情况下，我会尝试：

```
$icon='...ANOTHERDIRECTORY...\vim.ico,0' 
```

或者

```
$icon='...ANOTHERDIRECTORY...\\vim.ico,0' 
```

* * *

已编辑

不要忘记重新启动 explroer.exe 以查看新图标。

# javascript - 无法使用 jquery datepicker 设置正确的日期

> ID：16065914
> 
> 赞同：0
> 
> 时间：2013-04-17T17:00:33.013
> 
> 标签：javascript, jquery, datepicker

这是我的问题，我有这个：

```
<script>$(function() {$( "#dataInizioBook" ).datepicker();});</script>
<input type="text" id="dataInizioBook" value="01/01/2013"/> 
```

当我单击输入文本时，日期选择器将显示另一个选择的日期。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:04:16.313

如果您的浏览器配置为使用不同的文化，请尝试此操作：

```
$(function() {$( "#dataInizioBook" ).datepicker({ dateFormat: 'dd/mm/yy' });}); 
```

# jquery - 使用 CSS3 animate 或 jQuery 将 div 向下滑动到可见区域

> ID：16065916
> 
> 赞同：0
> 
> 时间：2013-04-17T17:00:39.303
> 
> 标签：jquery, html, css, jquery-animate

我正在尝试创建一个图表，其中条形图在单击链接时向下滑动。我尝试过使用 jQuery，但没有任何反应。我的`#click_to_animate`对象是标准链接。据我了解，对象应从不显示的框外开始`overflow`，然后单击链接后，对象应向下凹陷，直到`margin-top`设置为 0。

HTML

```
<div class="graph-inner">
    <div class="inner-title">
        <h3 style="color:#666">0</h3><h4>n=28</h4>
    </div><!--/.inner-title-->
    <div class="graph-charts">
        <div class="bars">
            <div class="gb"><span class="graph-number"><h3>5</h3><h4>30</h4></span></div>
            <div class="bb"><span class="graph-number"><h3>6</h3><h4>56</h4></span></div>
            <div class="ob"><span class="graph-number"><h3>7</h3><h4>114</h4></span></div>
       </div><!--/.bars-->
    </div><!--/.graph-charts--> 
</div><!--/.graph-inner--> 
```

jQuery

```
$('#click_to_animate').click(function() {
    $('.gb').animate({
        marginTop:'0'
    }, 200);
})//end click 
```

CSS

```
.graph-charts {
    border-top:3px solid #666;
    width:600px;
    position:absolute;
    left:95px;
    top:173px;
    overflow:none;
    }    
.inner-title {
    position:absolute;
    margin-left:160px;
    top: 110px;
    }
.bars {
    display:block;
    position:relative;
    }
.gb {
    background-color: #009966;
    height: 295px;
    width:75px;
    position:absolute;
    left:190px;
    margin-top:-295px;
    -webkit-border-bottom-right-radius:.3em;
    -webkit-border-bottom-left-radius:.3em;
    -moz-border-radius-bottomright:.3em;
    -moz-border-radius-bottomleft:.3em;
    border-bottom-right-radius:.3em;
    border-bottom-left-radius:.3em;
    }
.bb {
    background-color: #3366cc;
    height: 100px;
    width:75px;
    position:absolute;
    left:310px;
    margin-top:-295px;
    -webkit-border-bottom-right-radius:.3em;
    -webkit-border-bottom-left-radius:.3em;
    -moz-border-radius-bottomright:.3em;
    -moz-border-radius-bottomleft:.3em;
    border-bottom-right-radius:.3em;
    border-bottom-left-radius:.3em;
    }
.ob {
    background-color: #cc6600;
    height: 100px;
    width:75px;
    position:absolute;
    left:430px;
    margin-top:-295px;
    -webkit-border-bottom-right-radius:.3em;
    -webkit-border-bottom-left-radius:.3em;
    -moz-border-radius-bottomright:.3em;
    -moz-border-radius-bottomleft:.3em;
    border-bottom-right-radius:.3em;
    border-bottom-left-radius:.3em;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:09:12.000

问题似乎出在您的`.graph-charts`css 类上。给它一个`height`并设置`overflow`为`hidden`not `none`（这是无效的）。

```
.graph-charts {
    border-top:3px solid #666;
    width:600px;
    height: 500px;
    position:absolute;
    left:95px;
    top:173px;
    overflow:hidden;
} 
```

这里的例子：[jsfiddle](http://jsfiddle.net/vyWLR/)

# debugging - HTML5 PhoneGap App 团队开发

> ID：16065920
> 
> 赞同：0
> 
> 时间：2013-04-17T17:00:45.727
> 
> 标签：debugging, mobile, cordova, remote-debugging

首先，我不知道这是否是提出这个问题的正确地方，但是，我看不到任何其他地方可以提出这个问题。

我想知道如何与另一位朋友一起开发移动 HTML5 应用程序（使用 PhoneGap），而无需在多台 PC 上拥有该项目的副本。

我能否以某种方式将代码托管在 FTP 服务器上，然后我们都可以处理它，例如在 Eclipse 上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T19:34:08.097

您需要考虑使用某种源代码控制系统。源代码控制有多种形式，但总的来说，它允许软件开发人员在许多服务器之间同步代码，并允许开发人员同时工作而不会破坏彼此的环境（想象一下我必须让一个组件离线数小时才能对其进行编码，但是其他人依靠它来完成工作）。

两种最常见的源代码控制解决方案是 SVN 和 Git。这两种方法都可以在 Mac/Linux/PC 上运行，并在网上进行了详尽的记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-09T13:03:08.230

我知道这已经晚了几个月，但请查看 Adob​​e 的 Phonegap Build。在云中构建和部署。它们还允许您分配开发团队。www.adobe.com/PhoneGap

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T17:16:22.053

> 无需在多台 PC 上拥有项目的副本。

这怎么可能？当想要查看本地计算机上的某些内容时，您必须在本地计算机上提供它。但我想我知道你在找什么，三个建议：

1.  使用基于云的 IDE。[例如， Cloud9](https://c9.io/)就是最好的之一。然而，所有这些都往往是缓慢和错误的。
2.  只需在您的计算机之间同步文件。最好的托管服务之一是[Dropbox](https://www.dropbox.com/)，或者您可以在自己的服务器上安装[ownCloud 。](http://owncloud.org/)
3.  使用版本控制系统。这对于软件开发来说很常见，因为您可以轻松地重现谁在何时以及为什么进行了更改。最好的选择是[git](http://git-scm.com/)和[Github](https://github.com/)进行托管。

# php - 在此脚本中使用 PDO

> ID：16065924
> 
> 赞同：4
> 
> 时间：2013-04-17T17:00:52.337
> 
> 标签：php, mysql, pdo

我正在尝试使用 PDO 重写此脚本：

从数据库中获取值

```
mysql_select_db($database_db_FPF, $db_FPF);
$query_rsWorksMenu = "SELECT works.year, GROUP_CONCAT(workstitle.title) as titulos, GROUP_CONCAT(workstitle.id_title) as links FROM works JOIN workstitle ON works.id_year =      workstitle.id_year GROUP BY works.year ORDER BY works.year DESC";
$rsWorksMenu = mysql_query($query_rsWorksMenu, $db_FPF) or die(mysql_error());
$row_rsWorksMenu = mysql_fetch_assoc($rsWorksMenu); 
```

显示值

```
 <ul>
        <?php do { ?>
        <li><span><?php echo $row_rsWorksMenu['year']; ?></span>
            <ul>
                <?php 
                 $titulos = explode(",", $row_rsWorksMenu['titulos']);
                 $links = explode(",", $row_rsWorksMenu['links']); 
                 foreach(array_combine($links, $titulos) as $link => $titulo){ 
                ?>
                <li><span><a href="works.php?id=<?php echo $link; ?>"><?php echo $titulo; ?></a></span></li>
                <?php } ?>
            </ul>
        </li>
        <?php }while ($row_rsWorksMenu = mysql_fetch_assoc($rsWorksMenu)); ?>
    </ul> 
```

到目前为止我得到了什么：

从数据库中获取值：

```
$stmt2 = $conn->prepare('SELECT works.year, GROUP_CONCAT(workstitle.title) as titulos, GROUP_CONCAT(workstitle.id_title) as links FROM works JOIN workstitle ON works.id_year = workstitle.id_year GROUP BY works.year ORDER BY works.year DESC');
$stmt2->execute();
$result2 = $stmt2->setFetchMode(PDO::FETCH_OBJ); 
```

显示值

```
 <ul>
        <?php do { ?>
        <li><span><?php echo $result2->year; ?></span>
            <ul>
                <?php 
                 $titulos = explode(",", $result2->titulos);
                 $links = explode(",", $result2->links); 
                 foreach(array_combine($links, $titulos) as $link => $titulo){ 
                ?>
                <li><span><a href="works.php?id=<?php echo $link; ?>"><?php echo $titulo; ?></a></span></li>
                <?php } ?>
            </ul>
        </li>
        <?php }while ($row_rsWorksMenu = mysql_fetch_assoc($rsWorksMenu)); ?>
    </ul> 
```

问题是我不知道如何处理这条线：

```
}while ($row_rsWorksMenu = mysql_fetch_assoc($rsWorksMenu)); 
```

**更新：**

我改变我的代码：

```
$stmt2 = $conn->prepare('...query...');
$stmt2->execute(); 
$result2 = $stmt2->fetchAll();

}while ($row_rsWorksMenu = $stmt2->fetchAll()); 
```

但什么也没有发生。

**更新 2**

我试试这段代码：

```
 <?php do { ?>
        <li><span><?php echo $result2->year; ?></span>
            <ul>
                <?php 
                 $titulos = explode(",", $result2->titulos);
                 $links = explode(",", $result2->links); 
                 foreach(array_combine($links, $titulos) as $link => $titulo){ 
                ?>
                <li><span><a href="works.php?id=<?php echo $link; ?>"><?php echo $titulo; ?></a></span></li>
                <?php } ?>
            </ul>
        </li>
        <?php }while($result2 = $stmt2->fetch()); ?> 
```

我的 DOM 显示了正确的`<li>`. 但没有价值观。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:32:25.013

最简单的方法是这样的：

```
$sql = 'SELECT name, color, calories FROM fruit ORDER BY name';
foreach ($conn->query($sql) as $row) {
    print $row['name'] . "\t";
    print $row['color'] . "\t";
    print $row['calories'] . "\n";
} 
```

PDO`query`方法返回一个`PDOStatement`您可以直接迭代的。

[http://www.php.net/manual/de/pdo.query.php](http://www.php.net/manual/de/pdo.query.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T19:18:09.560

完全放弃你的 while 循环。您也不需要单独准备语句，因为您的查询不使用任何查询参数。

改为这样做：

```
// Get all your DB results in one place
$rsWorksMenu = $conn->query($sql)->fetchAll(PDO::FETCH_OBJ); 
```

稍后，显示结果：

```
<?php if ($rsWorksMenu):?>
<ul>
<?php     foreach($rsWorksMenu as $r):
             $links_titulos = array_combine(
                explode(",", $r->titulos),
                explode(",", $r->links)
             );
?>
    <li><span><?=h($r->year)?></span>
<?php        if ($links_titulos):?>
        <ul>
<?php            foreach($links_titulos as $link => $titulo):?>
            <li><span><a href="works.php?id=<?=h(urlencode($link))?>"><?=h($titulo)?>a></span></li>
<?php            endforeach // $links_titulos?>
        </ul>
<?php        endif //$links_titulos?>
    </li>
<?php     endforeach // $rsWorksMenu?>
</ul>
<?php endif // $rsWorksMenu?> 
```

您还应该更改您的 sql 语句——如果您的任何链接或标题中有逗号，它将中断。（`GROUP_CONCAT`通常是一个坏主意）。

相反，收集未分组的值并将它们自己分组到一个 php 数组中，如下面的`get_worksmenu`函数所示：

```
<?php

function get_worksmenu(PDO $db) {
    $rsWorksMenu = array();
    $sql = 'SELECT works.year, workstitle.title AS titulos, workstitle.id_title AS links '
           .'FROM works INNER JOIN workstitle USING (id_year) ORDER BY year DESC';
    // Could this be a single-table query instead?
    //   SELECT id_year AS year, title AS titulos, id_title AS links
    //   FROM workstitle ORDER BY id_year DESC
    $rs = $db->query($sql);
    $rs->setFetchMode(PDO::FETCH_ASSOC);
    foreach ($rs as $r) {
        // calculating url here simplifies your display code
        // and makes it easy to change urls later
        $year = $r['year'];
        $r['url'] = '/works.php?id='.urlencode($r['links']);
        unset($r['year']);
        $result[$year][] = $r;
    }
    $rs->closeCursor();
    return $rsWorksMenu;
}
function h($s) {
    // escape a string for html
    return htmlspecialchars($s, ENT_QUOTES, 'UTF-8');
}

$rsWorksMenu = get_worksmenu($conn);

<?php if ($rsWorksMenu):?>
<ul>
<?php   foreach($rsWorksMenu as $year => $works):?>
  <li><span><?=h($year)?></span>
    <ul>
<?php       foreach($works as $work):?>
        <li><span><a href="<?=h($work['url'])?>"><?=h($work['titulos'])?></a></span></li>
<?php       endforeach //$work?>
    </ul>
<?php   
  </li>
<?php   endforeach // $rsWorksMenu?>
</ul>
<?php endif // $rsWorksMenu?> 
```

# android - 仅通过 Facebook、Twitter、短信 Android 分享

> ID：16065927
> 
> 赞同：0
> 
> 时间：2013-04-17T17:01:00.463
> 
> 标签：android, phonegap-plugins

我正在尝试使用下一个脚本与 Android 共享：

```
Intent sendIntent = new Intent(android.content.Intent.ACTION_SEND);
sendIntent.setType("text/plain");
sendIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, subject);
sendIntent.putExtra(android.content.Intent.EXTRA_TEXT, subject + text);
this.cordova.startActivityForResult(this, sendIntent, 0); 
```

此列表列出了安装在 Android 上的所有应用程序。

我如何定义要分享的应用程序：Facebook、Twitter、SMS？我可以定义一个订单吗？

此致，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T07:38:15.907

有很多插件可用于此。我在[https://github.com/phonegap/phonegap-plugins](https://github.com/phonegap/phonegap-plugins)上找到了一些东西。

希望这会奏效。

但是您需要正确执行相应插件的自述文件中提到的步骤。

# perl - Perl中删除数组元素的第一个字符

> ID：16065928
> 
> 赞同：1
> 
> 时间：2013-04-17T17:01:05.567
> 
> 标签：perl, hash, substr

我想从 Perl 脚本中的数组元素中删除第一个字符。

我有这行脚本：

```
@dash = split /\s+/, $dash; 
```

变量“破折号”是从我的文件的特定行中读取的：示例

```
21 A10 A11 A12 A13 .. 
```

然后我尝试将这些值推送到我的名为“flowers”的哈希中

```
for $i (1..$#dash) {
    push(@flowers, $line[$i]);
} 
```

这似乎适用于我在后续脚本行中需要的内容，但我发现`$dash`每个值前面都包含不需要的字符：

```
A10 A11 A12 A13 .. 
```

代替

```
10 11 12 13 ..... 
```

但我想`@flowers`包含：

```
10 11 12 13 .... 
```

在将第一个字符推送到我的哈希*之前*如何删除它（@flowers）

```
chop(@flowers); 
```

本来可以，但它只会砍掉最后一个字符。当我尝试使用

```
substr($dash, 0, 2) 
```

它确实产生`10`了，但所有其余的值`A11 A12 A13`都不再在 my `@flowers`.

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T17:05:27.057

这将对`@dash`数组的每个元素进行操作：

```
@dash = split /\s+/, $dash;
shift @dash;
@dash = map { substr($_, 1) } @dash; 
```

你`substr($dash, 0, 2)`是作为一个字符串在行上运行的，而不是它的每个元素。

而且，除非您需要索引进行其他操作：

```
push @flowers, @dash 
```

这将推动 on 的所有`@dash`元素`@flowers`。这看起来像你在做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T17:09:29.117

你需要某种循环，因为你想对`@dash`除第一个元素之外的每个元素做一些事情。`map`这里很方便。

```
my @flowers = map substr($dash[$_], 1), 1..$#dash; 
```

这是写作的简短方式

```
my @flowers;
for (1..$#dash) {
   push @flowers, substr($dash[$_], 1);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T17:50:59.117

为什么不只是更改拆分中的正则表达式？

```
split /\s+\D?/, $dash; 
```

如果您愿意，可以通过这种方式将它们添加到@flowers：

```
push( @flowers, split(/\s+\D?/, $dash) ); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T19:20:06.273

我建议您从 中提取所有数字序列`$dash`，如下所示：

```
my $dash = '21 A10 A11 A12 A13 .. ';

my @flowers = $dash =~ /\d+/g;
shift @flowers;

print "@flowers"; 
```

**输出**

```
10 11 12 13 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T17:48:10.390

这是一个可能的解决方案：

```
use strict;
use warnings;

my $dash = "21 A10 A11 A12 A13"; #test data
my @dash = split /\s+/, $dash; #split into @dash array
shift @dash; #delete first array value
$_ = substr($_,1) for @dash; #for each item in array, remove the first character
print "@dash\n"; #prints: 10 11 12 13 
```

# xslt - XSLT 翻译问题

> ID：16065930
> 
> 赞同：0
> 
> 时间：2013-04-17T17:01:09.893
> 
> 标签：xslt, xml-parsing

我是 XSLT 的新手，在弄清楚如何翻译以下内容时遇到了一些困难：

```
 <resource>
    <id>12345678</id>
    <attribute name="partID">12345678-222</attribute>
  </resource> 
```

至：

```
<Attributes Category="urn:oasis:names:tc:xacml:3.0:attribute-category:resource">
    <Attribute IncludeInResult="false" AttributeId="urn:oasis:names:tc:xacml:1.0:resource:resource-id">
       <AttributeValue DataType="http://www.w3.org/2001/XMLSchema#string">12345678</AttributeValue>
    </Attribute>
    <Attribute IncludeInResult="false" AttributeId="partID">
         <AttributeValue DataType="http://www.w3.org/2001/XMLSchema#string">12345678</AttributeValue>
     </Attribute>
</Attributes> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:22:41.107

像这样的简单样式表应该可以解决问题：

### 样式表

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" version="1.0" encoding="utf-8" indent="yes"/>

  <!-- Match <resource> elements -->
  <xsl:template match="resource">
    <!-- Create a new literal <Attributes> element -->
    <Attributes
      Category="urn:oasis:names:tc:xacml:3.0:attribute-category:resource">
      <!-- Apply the child elements of this element -->
      <xsl:apply-templates/>
    </Attributes>
  </xsl:template>

  <xsl:template match="id">
    <Attribute IncludeInResult="false"
       AttributeId="urn:oasis:names:tc:xacml:1.0:resource:resource-id">
      <AttributeValue DataType="http://www.w3.org/2001/XMLSchema#string">
        <!--
        Add the value of the text node of the original <id> element.
        That is, "12345678".
        -->
        <xsl:value-of select="."/>
      </AttributeValue>
    </Attribute>
  </xsl:template>

  <xsl:template match="attribute">
    <!--
    Use Attribute Value Templates to use the value of the @name attribute
    as the value of the @AttributeId attribute.

    See http://lenzconsulting.com/how-xslt-works/#attribute_value_templates
    -->
    <Attribute IncludeInResult="false" AttributeId="{@name}">
      <AttributeValue DataType="http://www.w3.org/2001/XMLSchema#string">
        <!--
        Use the substring before the hyphen as the value of this
        <AttributeValue> element (again, "12345678", omitting the
        "-222" part)
        -->
        <xsl:value-of select="substring-before(., '-')"/>
      </AttributeValue>
    </Attribute>
  </xsl:template>
</xsl:stylesheet> 
```

# javascript - 更改页面的 URL 参数

> ID：16065937
> 
> 赞同：2
> 
> 时间：2013-04-17T17:01:28.843
> 
> 标签：javascript, url, parameters, greasemonkey, tampermonkey

我想`&vhs=1`在浏览器上每个 YouTube 视频 URL 的末尾添加参数。我曾尝试使用以下脚本，但它陷入了一个循环（不断添加`&vhs=1` `&vhs=1...`）。

```
// ==UserScript==
// @name        Youtube Tape Mode
// @namespace   _pc
// @match       *://*.youtube.com/watch?*
// @run-at      document-start
// ==/UserScript==

var oldUrlPath  = window.location.pathname;

/*--- Test that "&vhs=1" is at end of URL, excepting any "hashes"
or searches.
*/
if ( ! /\&vhs=1$/.test (oldUrlPath) ) {

    var newURL  = window.location.protocol + "//"
                + window.location.hostname
                + oldUrlPath 
                + window.location.search.replace + "&vhs=1"
                + window.location.hash
            ;
    /*-- replace() puts the good page in the history instead of the
        bad page.
    */
    window.location.replace (newURL);
} 
```

谁能提供一些关于我如何为此目的编写脚本的见解和建议？我似乎无法弄清楚如何摆脱无限循环问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T21:40:39.437

该脚本正在*检查*但*设置*`pathname`URL的一部分。此外，它至少有一个语法问题。此外，使用而不是; 它更健壮和便携。*`search``host``hostname`*

 *所以你的脚本会是这样的：

```
// ==UserScript==
// @name        Youtube Tape Mode
// @match       *://*.youtube.com/watch?*
// @run-at      document-start
// @grant       none
// ==/UserScript==

var oldUrlSearch  = window.location.search;

/*--- Test that "&vhs=1" is at end of URL, excepting any "hashes"
or searches.
*/
if ( ! /\&vhs=1$/.test (oldUrlSearch) ) {

    var newURL  = window.location.protocol + "//"
                + window.location.host
                + window.location.pathname
                + oldUrlSearch + "&vhs=1"
                + window.location.hash
                ;
    /*-- replace() puts the good page in the history instead of the
        bad page.
    */
    window.location.replace (newURL);
} 
```

* * *

请注意，YouTube URL 的 URL`search`部分总是有一些东西，所以这段代码很好。对于其他网站，您可能需要进行额外检查并根据搜索最初是否为空白来添加`&vhs=1`或添加。`?vhs=1`*

# oauth - JWT 与 OAuth 有什么关系？

> ID：16065942
> 
> 赞同：1
> 
> 时间：2013-04-17T17:01:48.557
> 
> 标签：oauth, jwt

我最近偶然发现了 JSON Web Tokens (JWT)，据我了解，它们只是一种紧凑形式的令牌，可以轻松序列化（因为它是 JSON）。

现在，我的问题是：JWT 是否以任何形式与 OAuth 相关，或者它们是两个完全独立的概念？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T19:15:26.003

OAuth2 规范实际上并不要求使用 JWT，因为它将令牌视为不透明的，但它们是实现者使用的方便标准。如果您查看构建在 OAuth2 之上以提供身份验证系统的[OpenID Connect Specification](http://openid.net/connect/)，那么您会发现它确实明确使用了 JWT，例如在[ID Token](http://openid.net/specs/openid-connect-messages-1_0.html#id_token)的定义中。

JWT 还可以以标准方式支持签名和加密（请参阅随附的[JWE](https://datatracker.ietf.org/doc/html/draft-ietf-jose-json-web-encryption-10)和[JWS](https://datatracker.ietf.org/doc/html/draft-ietf-jose-json-web-signature-10)规范）。

# jquery - 使用 jquery 使用选择下拉列表填充多个列

> ID：16065945
> 
> 赞同：0
> 
> 时间：2013-04-17T17:01:52.810
> 
> 标签：jquery

最初创建表时，该表的第一行包含选择块中的类别列表，该列表使用底部显示的 jquery 填充。

```
<tr>
<td align="center">
<span id="catDisplay">
<select id="field1" name="field1">
   <option value="">--select--</option>
   <option value="27">$5.00 off (CAT 27)</option>
   <option value="52">$5.00 off Skip (CAT 52)</option>
</select>
</span>
</td>
<td align="left">
<button id="keywordAdd">+</button>
</td>
</tr> 
```

使用 .insertafter() 添加第二行。但它似乎并没有触发相同的 jquery。

```
<tr>
<td align="center">
<span id="catDisplay2">&nbsp;</span>
</td>
<td>
<span id="prodDisplay2">&nbsp;</span>
</td>
<td align="left">
<button id="keywordAdd">+</button>
<button id="keywordDelete">-</button>
</td>
</tr> 
```

这是jQuery：

```
$('span').each(function(){
  if ($(this).attr('id').match(/catDisplay/)) {
     $(this).load(
    'free_gift_backend.php',
    {   
      query       : "getAllCats"
    });  
  }
}); 
```

我也试过

```
$("span[id^=catDisplay]").load(
'free_gift_backend.php',
{ 
  query       : "getAllCats"
},
function(response, status, xhr) { 
   if (status != "error") { 
     $('#field1')
       .change(changeCat);
   }
}); 
```

这也不起作用。我做错了什么？

这是行添加逻辑：

```
$("#keywordAdd").live("click", function(event) {
   event.preventDefault();
   var  rowCount = $("#keywordTable tbody>tr").length + 1;
   // this should be the rowCount, but if someone has added 
   // after deleting from the middle, it will need to be changed.
   while ($("#catDisplay" + rowCount).exists()) {
       rowCount = rowCount + 1;
   }
   var  html = keywordRow(rowCount);
   $(html).insertAfter('#keywordTable tbody>tr:last');
   // $("#keywordTable tbody>tr #catDisplay" + rowCount).focus();
   var $newrow = $("#keywordTable tbody>tr #catDisplay" + rowCount);
   $newrow.focus();
   $newrow.load(
    'free_gift_backend.php',
    {
      query       : "getAllCats",
      rowCount :    rowCount
    } ,
    function(response, status, xhr) {
       if (status != "error") {
         $(this).children(0)
           .change(changeCat);
       }
    } );
  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T19:19:34.923

将“.load()”调用放在创建新行的“.live()”调用中似乎是解决我的问题的方法。我原以为 span.each 调用会起作用，但我想这不适用于动态添加的行（？）。

```
 $newrow.load(
        'free_gift_backend.php',
        {
          query       : "getAllCats",
          rowCount :    rowCount
        } ,
        function(response, status, xhr) {
           if (status != "error") {
             $(this).children(0)
               .change(changeCat);
           }
        } );
      }); 
```

# php - 如何根据之前的 URL 加载不同的样式表

> ID：16065947
> 
> 赞同：3
> 
> 时间：2013-04-17T17:02:00.323
> 
> 标签：php, css

我们的业务网络对每个场地和我们所有的在线预订都使用相同的 PHP 预订系统。目前，预订系统的风格非常平淡，而且我们所有的场馆都有自己的网站，有自己的风格，从网站点击“立即预订”并加载预订系统时没有连续性.

我想知道是否有一种方法可以在预订系统登录页面上放置一些 javascript，它可以加载外部样式表，具体取决于客户点击的 URL。

理想情况下像

```
<script language="javascript" type="text/javascript">
if(window.location.search.indexOf('example1.co.uk') === 0)
    document.write("<link rel=\"stylesheet\" type=\"text/css\" href=\"style1.css\" />");
</script>

<script language="javascript" type="text/javascript">
if(window.location.search.indexOf('example2.co.uk') === 0)
    document.write("<link rel=\"stylesheet\" type=\"text/css\" href=\"style2.css\" />");
</script> 
```

这似乎不起作用。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T17:14:22.397

如果我正确阅读了您的问题，您也应该控制场馆站点吗？如果是这种情况，请传递一个查询字符串，以从原始链接中识别您要使用的 CSS 表。

就像是：

```
<a href="http://booking_system.com/?css=1">Click to book</a> 
```

然后根据结果运行 php switch 语句就很简单了。

```
<?php
$css = $_GET['css'];

switch ($css) {
    case 1:
    echo '<link rel="stylesheet" type="text/css" href="style1.css" />';
    break;
    case 2:
    echo '<link rel="stylesheet" type="text/css" href="style2.css" />';
    break;
    default:
    echo '<link rel="stylesheet" type="text/css" href="default.css" />';
    break;
}
?> 
```

如果您必须更改预订系统站点上的页面，您甚至可以将 $css 存储在 PHP 会话中以保留它。

显然，这只有在您可以控制场馆网站上的链接时才有效，但它比事后试图获得推荐人更可预测和可靠。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T17:04:28.370

试试`document.referrer`。如果用户单击链接以访问当前页面，这将为您提供以前的浏览器 URL。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T17:09:07.537

您可以执行以下操作：

```
<?php
if($_SERVER['HTTP_REFERER'] == "example2.co.uk") {
    print("<link rel=\"stylesheet\" type=\"text/css\" href=\"style2.css\" />");
}
?> 
```

然后，您可以将上述代码转储到您网站的 <head> 部分。

# android - 检测虚拟键盘的类型-android

> ID：16065948
> 
> 赞同：-1
> 
> 时间：2013-04-17T17:02:02.990
> 
> 标签：android, android-softkeyboard, android-virtual-keyboard

我有一个 android 应用程序，它处理来自标准键盘的输入与 Swype 键盘给出的输入不同。有没有办法以编程方式找出当前正在使用的键盘？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-04-29T13:35:45.373

最好的方法是使用 InputDeviceId。

```
int[] devicesIds = InputDevice.getDeviceIds();
for (int deviceId : devicesIds) {
    //Check the device you want
    InputDevice device = InputDevice.getDevice(deviceId);
    //device.getName must to have virtual
    //That check the keyboard type
    device.getKeyboardType(); //returns an int
} 
```

参考：

[https://developer.android.com/reference/android/view/InputDevice.html#getKeyboardType%28%29](https://developer.android.com/reference/android/view/InputDevice.html#getKeyboardType%28%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-05-26T20:16:38.510

使用设置的安全静态内部类来获取默认键盘类型。

```
String defaultKeyboard = Settings.Secure.getString(context.getContentResolver(),
                    Settings.Secure.DEFAULT_INPUT_METHOD); 
```

返回类型将是一个以“/”分隔的字符串序列，因此将此字符串 wrt 拆分为斜杠以获取子字符串列表。该列表的第一个元素将为您提供默认键盘的包名称。

```
defaultKeyboard = defaultKeyboard.split("/")[0]; 
```

PS - 用 try catch 包装 Settings.Secure 调用的好习惯。

# powershell - Powershell：尝试连接数据库时远程安装失败

> ID：16065950
> 
> 赞同：2
> 
> 时间：2013-04-17T17:02:14.640
> 
> 标签：powershell, oracle11g, windows-server-2008-r2, remote-access, powershell-remoting

我已经为这个问题苦苦挣扎了几天。我尝试用谷歌搜索这个问题，但没有找到任何答案。

我正在尝试使用 powershell 在远程机器（VM）上安装 exe。该应用程序在安装时使用 oracle 和 mysql 检查与数据库的连接。我的 Powershell 脚本将安装文件复制到远程计算机。然后连接到机器并运行exe。它一直工作到检查数据库连接为止。

当我使用远程桌面连接并连接到远程计算机时，我可以运行 exe 并成功检查数据库连接并完成安装。我什至可以使用 powershell 从 VM 连接到我的 Box，并且它安装正确。

我假设它与远程机器权限有关，但我不确定。有谁知道为什么安装程序无法连接以及如何解决这个问题？

**机器规格、脚本和例外情况如下。**

我的 Box 正在运行**Windows 7 Professional SP1 x64**

**甲骨文版本：** 11.2.0

虚拟机正在运行**Windows Server 2008 R2 x64**

**甲骨文版本：** 11.2.0

```
#Copies required install files and file passed in as an argument to remote machine
Copy-Item -Path $source -Destination \\$computer\$destination\Install -Recurse -Force
Copy-Item -Path C:\$argument -Destination \\$computer\$destination -Recurse -Force

#Connect to remote machine
Enter-Pssession $computerIP -credential $cred

#Starts the install
(Start-Process -FilePath C:\Setup.exe -ArgumentList $arguments -Wait -Passthru).ExitCode 
```

日志返回**错误代码**-2147467259

**例外：**

*在 Oracle.DataAccess.Client.OracleException.HandleErrorHelper(Int32 errCode, OracleConnection conn, IntPtr opsErrCtx, OpoSqlValCtx* pOpoSqlValCtx, Object src, String procedure, Boolean bCheck) 在 Oracle.DataAccess.Client.OracleException.HandleError(Int32 errCode, OracleConnection conn, IntPtr opsErrCtx，对象 src) 在 Oracle.DataAccess.Client.OracleConnection.Open()*

不返回内部异常。

# r - 如何使用 tm 创建 *.docx 文件的语料库？

> ID：16065952
> 
> 赞同：2
> 
> 时间：2013-04-17T17:02:18.277
> 
> 标签：r, docx, tm

我有一个混合文件类型的 MS Word 文档集合。有些文件是 *.doc，有些是 *.docx。我正在学习使用`tm`，并且我（或多或少*）使用以下方法成功创建了一个由 *.doc 文件组成的语料库：

```
ex_eng <- Corpus(DirSource('~/R/expertise/corpus/english'), 
                 readerControl=list(reader=readDOC, 
                                    language='en_CA',
                                    load=TRUE)); 
```

此命令不处理 *.docx 文件。我假设我需要一个不同的读者。从[这篇文章中](http://cran.r-project.org/web/packages/tm/vignettes/extensions.pdf)，我了解到我可以自己编写（鉴于对我目前没有的 .docx 格式有很好的理解）。

readDOC 阅读器使用[antiword](http://www.winfield.demon.nl/index.html)来解析 *.doc 文件。是否有类似的应用程序可以解析 *.docx 文件？

或者更好的是，是否已经有一种使用 tm 创建 *.docx 文件语料库的标准方法？

* * *

* 或多或少，因为虽然文件进入并且是可读的，但对于每个文档，我都会收到以下警告：`In readLines(y, encoding = x$Encoding) : incomplete final line found on 'path/to/a/file.doc'`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T17:28:51.707

`.docx`文件是压缩的 XML 文件。如果你执行这个：

```
> uzfil <- unzip(file.choose()) 
```

然后`.docx`在你的目录中选择一个文件，你会得到：

```
> str(uzfil)
 chr [1:13] "./[Content_Types].xml" "./_rels/.rels" "./word/_rels/document.xml.rels" ...
> uzfil
 [1] "./[Content_Types].xml"          "./_rels/.rels"                  "./word/_rels/document.xml.rels"
 [4] "./word/document.xml"            "./word/theme/theme1.xml"        "./docProps/thumbnail.jpeg"     
 [7] "./word/settings.xml"            "./word/webSettings.xml"         "./word/styles.xml"             
[10] "./docProps/core.xml"            "./word/numbering.xml"           "./word/fontTable.xml"          
[13] "./docProps/app.xml" 
```

这也会以静默方式将所有这些文件解压缩到您的工作目录中。该`"./word/document.xml"`文件包含您要查找的单词，因此您可能可以使用 XML 包中的一种 XML 工具来阅读它们。我猜你会按照以下方式做一些事情：

```
 library(XML)
 xtext <-  xmlTreeParse(unz(uzfil[4]), useInternalNodes = TRUE) ) 
```

实际上，您可能需要将其保存到临时目录并将该路径添加到文件名“./word/document.xml”。

您可能希望在此答案中使用@GaborGrothendieck 提供的进一步步骤：[如何使用 R 从 CrossRef 中提取 xml 数据？](https://stackoverflow.com/questions/9951740/how-to-extract-xml-data-from-a-crossref-using-r)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T14:46:53.873

我最终使用[docx2txt](http://docx2txt.sourceforge.net/)将 .docx 文件转换为文本。然后我像这样从他们创建了一个语料库：

```
ex_eng <- Corpus(DirSource('~/R/expertise/corpus/english'), 
                 readerControl=list(reader=readPlain, 
                                    language='en_CA',
                                    load=TRUE)); 
```

我想我可能会破解 readDOC 阅读器，以便它可以根据需要使用 docx2txt 或 antiword，但这很有效。

# r - 在 ggplot 中制作图形的问题

> ID：16065956
> 
> 赞同：0
> 
> 时间：2013-04-17T17:02:31.320
> 
> 标签：r, ggplot2

我和ggplot一起工作。我想用 ggplot 设计一个图形。该图形有两个连续变量，但我想得到这样的图形：

![在此处输入图像描述](https://i.stack.imgur.com/ueBcn.png)

其中 x 和 y 是连续变量。我的问题是我无法让它在情节的线上显示圆圈。我希望该图对来自连续变量的每对观察值都有圆圈。例如，在附图中，它有一个圆圈表示对`(1,1)`和。有可能得到吗？（线条的颜色无关紧要。）`(2,2)``(3,3)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:08:14.660

```
# dummy data
dat <- data.frame(x = 1:5, y = 1:5)

ggplot(dat, aes(x,y,color=x)) + 
   geom_line(size=3) + 
   geom_point(size=10) + 
   scale_colour_continuous(low="blue",high="red") 
```

玩低/高会改变颜色。

通常，要删除图例，请使用`+ theme(legend.position="none")`

# javascript - 使用javascript获取相对于监视器的元素位置

> ID：16065958
> 
> 赞同：6
> 
> 时间：2013-04-17T17:02:38.120
> 
> 标签：javascript, jquery, html

有没有办法获得一个元素（比如说一个按钮）相对于整个监视器的位置，而不仅仅是我正在使用的页面？到目前为止我找到的所有解决方案都可以找到元素在页面上的位置，但我想知道我是否可以知道按钮在整个屏幕上的位置，而不仅仅是我的页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:14:03.823

包括任务栏：

```
window.screen.availHeight  
window.screen.availWidth 
```

不包括

```
window.screen.width   
window.screen.height 
```

在所有主要的移动设备上都支持，所以如果你知道任务栏的位置，它是一个简单的计算来找出差异......然后将它应用于 jquerys 偏移函数：

```
$('#myElement').offset().top   
$('#myElement').offset().left 
```

或原始js：

```
var myElement = document.getElementById('myElement');

myElement.offsetTop
myElement.offsetLeft 
```

希望这可以帮助！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T19:32:25.310

您无法知道浏览器在操作系统渲染中的位置。一些浏览器支持它，但不能保证它在任何地方都可以使用。在那些支持它的情况下，有多种你无法控制的边缘情况（比如多台显示器）

# html - 图像滑块超过 100% 宽度

> ID：16065959
> 
> 赞同：0
> 
> 时间：2013-04-17T17:02:47.220
> 
> 标签：html, css, slider

我有一个 100% 的页面宽度的图像滑块，这是我的代码：

```
.ei-slider{
    position: relative;
    width: 100%;
    max-width: 1920px;
    height: 400px;
    margin: 0 auto;
    border:2px #f36f25 dashed;
}
.ei-slider-loading{
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0px;
    left: 0px;
    z-index:999;
    background: rgba(0,0,0,0.9);
    color: #fff;
    text-align: center;
    line-height: 400px;
}
.ei-slider-large{
    height: 100%;
    width: 100%;
    position:relative;
    overflow: hidden;
}
.ei-slider-large li{
    position: absolute;
    top: 0px;
    left: 0px;
    overflow: hidden;
    height: 100%;
    width: 100%;
}
.ei-slider-large li img{
    width: 100%;
}
.ei-title{
    position: absolute;
    right: 50%;
    margin-right: 13%;
    top: 30%;
}
.ei-title h2, .ei-title h3{
    text-align: right;
}
.ei-title h2{
    font-size: 40px;
    line-height: 50px;
    font-family:Calibri;
    font-style: italic;
    color: #b5b5b5;
}
.ei-title h3{
    font-size: 70px;
    line-height: 70px;
    font-family:Calibri;
    text-transform: uppercase;
    color: #000;
}
.ei-slider-thumbs{
    height: 13px;
    margin: 0 auto;
    position: relative;
}
.ei-slider-thumbs li{
    position: relative;
    float: left;
    height: 100%;
}
.ei-slider-thumbs li.ei-slider-element{
    top: 0px;
    left: 0px;
    position: absolute;
    height: 100%;
    z-index: 10;
    text-indent: -9000px;
    background: #000;
    background: rgba(0,0,0,0.9);
}
.ei-slider-thumbs li a{
    display: block;
    text-indent: -9000px;
    background: #666 ;
    width: 100%;
    height: 100%;
    cursor: pointer;
    -webkit-box-shadow: 
        0px 1px 1px 0px rgba(0,0,0,0.3), 
        0px 1px 0px 1px rgba(255,255,255,0.5);
    -moz-box-shadow: 
        0px 1px 1px 0px rgba(0,0,0,0.3), 
        0px 1px 0px 1px rgba(255,255,255,0.5);
    box-shadow: 
        0px 1px 1px 0px rgba(0,0,0,0.3), 
        0px 1px 0px 1px rgba(255,255,255,0.5);
    -webkit-transition: background 0.2s ease;
    -moz-transition: background 0.2s ease;
    -o-transition: background 0.2s ease;
    -ms-transition: background 0.2s ease;
    transition: background 0.2s ease;
}
.ei-slider-thumbs li a:hover{
    background-color: #f0f0f0;
}
.ei-slider-thumbs li img{
    position: absolute;
    bottom: 50px;
    opacity: 0;
    z-index: 999;
    max-width: 100%;
    -webkit-transition: all 0.4s ease;
    -moz-transition: all 0.4s ease;
    -o-transition: all 0.4s ease;
    -ms-transition: all 0.4s ease;
    transition: all 0.4s ease;
    -webkit-box-reflect: 
        below 0px -webkit-gradient(
            linear, 
            left top, 
            left bottom, 
            from(transparent), 
            color-stop(50%, transparent), 
            to(rgba(255,255,255,0.3))
            );
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
}
.ei-slider-thumbs li:hover img{
    opacity: 1;
    bottom: 13px;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";
}
@media screen and (max-width: 830px) {
    .ei-title{
        position: absolute;
        right: 0px;
        margin-right: 0px;
        width: 100%;
        text-align: center;
        top: auto;
        bottom: 10px;
        background: #fff;
        background: rgba(255,255,255,0.9);
        padding: 5px 0;
    }
    .ei-title h2, .ei-title h3{
        text-align: center;
    }
    .ei-title h2{
        font-size: 20px;
        line-height: 24px;
    }
    .ei-title h3{
        font-size: 30px;
        line-height: 40px;
    }
} 
```

我不知道为什么，但是有一个我不想要的水平滚动条。

我还为此创建了一个小提琴，因此您可以看到 HTML 代码以及 CSS

小提琴在这里：http: [//jsfiddle.net/827kN/](http://jsfiddle.net/827kN/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:07:51.953

由于某种原因（我不完全理解），在我的浏览器（最新的 firefox）中，有一个 System 属性应用于内部 ul，它添加了 40px 的填充。

您可以修复它（并且可能尝试使用以下修改后的 css 来了解为什么要应用它

```
.ei-slider-large {
  -moz-padding-start: 0;//<<-- this is the offending style so setting it to 0 sorts out your problem
  height: 100%;
  overflow: hidden;
  position: relative;
  width: 100%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T17:14:33.053

我从上面的代码中看到了这两个原因。

1.  可能需要重置浏览器对元素的默认填充/边距（您可能已经完成或尚未完成）

    `* { margin: 0; padding: 0; }`

2.  你的元素有`width: 100%`但也有一个 2px 的边框 .. 这增加了它并超过了 100% 的宽度。

    这是一个使用插入框阴影的示例 - [http://jsfiddle.net/827kN/6/embedded/result/](http://jsfiddle.net/827kN/6/embedded/result/)

# android - JNI。不同 Android 操作系统版本之间的不同行为

> ID：16065960
> 
> 赞同：0
> 
> 时间：2013-04-17T17:02:53.140
> 
> 标签：android, android-ndk, java-native-interface, jnienv

我的应用程序运行以下代码：

```
void BmrDeviceInfo_convertToC(JNIEnv *pEnv, jobject jBmrDeviceInfo, BmrDeviceInfo& cBmrDeviceInfo){

__android_log_print(ANDROID_LOG_INFO, "BEAMER_JNI", "g_classBmrDeviceInfo is = %s", (g_classBmrDeviceInfo == NULL) ? "NULL" : "OK"); //g_classBmrDeviceInfo is initialize on JNI_OnLoad

jfieldID fieldName = pEnv->GetFieldID(g_classBmrDeviceInfo, "m_strName", "Ljava/lang/String;"); // OK for Android 4.2 and crash for Android 3.1 or less

..................................
} 
```

崩溃案例的 LogCat 输出：

```
04-17 16:28:44.118: I/BEAMER_JNI(446): g_classBmrDeviceInfo is = OK
04-17 16:28:44.118: W/dalvikvm(446): JNI WARNING: 0x4053dc70 is not a valid JNI reference
04-17 16:28:44.118: W/dalvikvm(446):              in Lcom/xxxxxxx/xxxxxx/controller/CoreController;.Init (Lcom/xxxxxxx/xxxxxx/listviews/DeviceInfo;Ljava/lang/String;)I (GetFieldID)
04-17 16:28:44.118: I/dalvikvm(446): "main" prio=5 tid=1 RUNNABLE
04-17 16:28:44.118: I/dalvikvm(446):   | group="main" sCount=0 dsCount=0 obj=0x4001f1a8 self=0xce48
04-17 16:28:44.118: I/dalvikvm(446):   | sysTid=446 nice=0 sched=0/0 cgrp=default handle=-1345006528
04-17 16:28:44.118: I/dalvikvm(446):   | schedstat=( 276745040 468907344 84 ) 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T21:06:08.883

接受对象的 JNI 函数需要本地或全局引用。在 ICS 之前，这些是原始指针，但在 ICS 中变为表索引系统。

您没有说使用什么版本来生成问题中的输出。十六进制值 0x4053dc70 看起来像一个原始指针，所以我假设这是前 ICS。查看错误消息，似乎`g_classBmrDeviceInfo`无效；出错的一种常见方法是未能使用`NewGlobalRef`将本地引用转换为全局引用。

一般来说，JNI 在 ICS 中变得*更加*严格，所以这在 4.x 中会成功但在 3.x 中失败是很奇怪的，除非你在玩弱全局变量。

# avr - 我不能在 LCD AVR 中写入整数

> ID：16065961
> 
> 赞同：0
> 
> 时间：2013-04-17T17:02:53.360
> 
> 标签：avr

我无法使用这些函数将整数写入 LCD ：S 它在屏幕上显示了一些奇怪的东西我刚刚添加了下面的函数！！！请帮我检查一下我添加了所有需要的东西

```
 my_delay(1000);
        LCDWriteStringXY(0,0,"Welcome..");
        my_delay(1000);
        LCDWriteStringXY(0,0,"Welcome...");
        my_delay(1000);
            LCDClear();
            LCDWriteStringXY(4,0,"Testing");
            LCDGotoXY(2,1);

            int m=952520;
            LCDWriteInt(m,6);//I can not write it!!!

void LCDWriteInt(int val,unsigned int field_length)
{

    char str[5]={0,0,0,0,0};
    int i=4,j=0;
    while(val)
    {
    str[i]=val%10;
    val=val/10;
    i--;
    }
    if(field_length==-1)
        while(str[j]==0) j++;
    else
        j=5-field_length;

    if(val<0) LCDData('-');
    for(i=j;i<5;i++)
    {
    LCDData(48+str[i]);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:33:49.283

我认为该函数是为 16 位整数编写的，其最大值为 65535（5 位 - 与 str[] 的长度相同）。你给它 6 位数的值，当它试图写入 str[5] 时，它首先超出字符串，然后产生 j = -1。

我的建议是要么使用较小的整数（仅限 16 位），要么编写另一个函数，就像你向我们展示的那样，对更大的值做同样的事情。

最后，我不知道 if(val<0) LCDData('-') 是否真的会正常工作，因为您在第一个 while 循环中覆盖了 'val'。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-31T14:31:23.213

使用 itoa 函数。这将帮助您将整数转换为字符串并在液晶显示器上显示。祝你好运！

# php - PHP：下层类从上层类访问公共函数

> ID：16065963
> 
> 赞同：0
> 
> 时间：2013-04-17T17:03:00.183
> 
> 标签：php, oop, scope, hierarchy

考虑以下代码：

```
class Upper {
    private $lower;
    function __construct($passme1, $passme2) {
        if(!class_exists("Lower")) {
            include 'path/to/file.php';
        }
        $this->lower = new Lower($passme1, $passme2);
    }
    //functions
    public function foo() {
        //queries database and returns user specific information
    }
} 
```

在链接文件中，我有Lower类：

```
class Lower {
    function __construct($passme1, $passme2) {
        //sort the passed variables out
    }
    public function bar() {
        //trying to access the public function foo of class Upper
    }
} 
```

我发现自己需要从 Lower 类的函数栏中访问 Upper 类的函数 foo。

这是可能吗？

谢谢你，
乔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T17:20:52.907

要从中访问`Upper::foo()`，`Lower::bar()`您必须将`$this`变量作为参数传递：

低年级：

```
public function bar (Upper $upper) {
    $upper->foo();
} 
```

在Upper类的一些方法中：

```
$this->lower->bar($this); 
```

* * *

Ps：如果您不需要访问`$this`in`Upper::foo()`您可能希望将方法声明为`static`然后执行 in `Lower::bar()`：

```
Upper::foo(); // calls static method foo of class Upper 
```

# objective-c - MBProgressHud 在导航栏上不起作用

> ID：16065973
> 
> 赞同：8
> 
> 时间：2013-04-17T17:03:57.707
> 
> 标签：objective-c, mbprogresshud

我在导航项中有一个按钮，它的动作是 BUTTON_ACTION。通过按下它，MBProgressHUD 被激活并且动作起作用。但是使屏幕“隐藏”的“dimBackground”在导航栏上不起作用，并且可以在 MBProgressHUD 期间再次按下该按钮。代码是：

```
 HUD = [[MBProgressHUD alloc] initWithView:self.view];
    [self.view addSubview:HUD];

    // Regiser for HUD callbacks so we can remove it from the window at the right time
    HUD.delegate = self;
    HUD.labelText=@"Buscando Bares...";
    HUD.dimBackground = YES;

    // Show the HUD while the provided method executes in a new thread
    [HUD showWhileExecuting:@selector(BUTTON_ACTION) onTarget:self withObject:nil animated:YES]; 
```

我尝试使用：

```
HUD = [[MBProgressHUD alloc] initWithView:self.navigationController.view];
        [self.navigationController.view addSubview:HUD]; 
```

有什么想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-17T17:11:27.647

要使 MBProgressHUD 显示在包括 UINavigationBar 在内的所有 UI 控件上方，您必须执行以下操作：

```
 HUD = [[MBProgressHUD alloc] initWithWindow:self.view.window];
 [self.view.window addSubview:HUD]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-28T12:46:58.170

@ararog 是对的，但做起来也很简单

```
 _progressHUD = [MBProgressHUD showHUDAddedTo:self.view.window animated:YES]; 
```

# mysql - 在 mysql 3.23 上为每个 ID 选择最大值

> ID：16065978
> 
> 赞同：0
> 
> 时间：2013-04-17T17:04:12.393
> 
> 标签：mysql, in-subquery

整个问题是由于`IN`子句中的子查询似乎不适用于 mysql 3.23。

这是table1的表结构：

```
|**idTable1**|**strDescription**|
|1           |blablabla         |
|2           |blablabla         | 
```

这是表2：

```
|**idTable2**|**idTable1**|**intVersion**|
|1           |1           |1             |
|2           |1           |8             |
|3           |2           |2             |
|4           |2           |3             | 
```

**我想要实现的目标：**

加入这两个表只是为了获得描述，但我只想要每行的 1 条记录，其中的最大版本是这样的：

```
|**idTable1**|**strDescription**|**idTable2**|**idTable1**|**intVersion**|
|1           |blablabla         |2           |1           |8             |
|2           |blablabla         |4           |2           |3             | 
```

这是我想出的：

```
SELECT table1.idTable1, strDescription, intVersion FROM table1 
INNER JOIN table2 ON table1.idTable1 = table2.idTable1 
WHERE (table1.idTable1, intVersion)
IN (SELECT idTable1, MAX(intVersion) FROM table2 GROUP BY idTable1) 
```

我已经在 2 个不同版本的 mysql 上测试了这个查询。我需要这个工作的一个是 3.23，这个查询工作的一个是 5.5。

有没有办法在 3.23 上实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:11:47.400

我无法测试此查询，但您可以尝试用 JOIN 替换 IN 子句：

```
SELECT
  table1.idTable1, table1.strDescription, table2.intVersion
FROM
  table1 INNER JOIN table2
  ON table1.idTable1 = table2.idTable1 INNER JOIN
  (SELECT idTable1, MAX(intVersion) maxVersion FROM table2 GROUP BY idTable1) mx
  ON table1.idTable1=mx.idTable1 AND table2.intVersion=mx.maxVersion 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T17:12:01.313

也许使用连接它会起作用（未经测试，我无权访问 3.23。） 理论：从按 IDtable1 分组的 Table2 中获取最大 intVersions，然后将其加入到结果中，这将过滤掉由于连接条件而导致的非最大值。

```
Select T1.IDTable1, T1.strDescription, T2.IDtable2, T2.idTable1, T2.intVersion
FROM Table1 T1 
INNER JOIN table2 T2 on T1.idTable1=T2.IDtable1
INNER JOIN table3 T3 on T3.idtable1 = T1.IDtable1 and T3.Intversion = t2.intVersion
(Select max(intVersion) intVersion, idtable2, idtable1 from table2 group by IDtable1) T3
GROUP BY IDtable1, strDescription, IDtable2, IdTable1 
```

# qt - 在 Qt GUI 主窗口中嵌入 PCL 查看器

> ID：16065984
> 
> 赞同：5
> 
> 时间：2013-04-17T17:04:30.880
> 
> 标签：qt, point-cloud-library

我正在尝试在 Windows 7 64 位机器上使用 QtCreator 开发用户界面。该用户界面将部署在 32 位 Windows 7 机器上，并将控制用于结构光应用的投影仪和相机。由于我无法控制的原因（与相机和投影仪 API 的兼容性），我将为此使用 MS VS 2010 32 位编译器。在尝试了几个星期后，我需要一起工作（Qt 4.8.4、QtCreator 和点云库），我现在面临一个小问题。

有没有办法可以将 PCL 点云查看器嵌入到我的主 Qt GUI 窗口中？问题是当我使用 PCL 查看器时，它会打开一个单独的窗口。我希望这个窗口嵌入到我的主窗口中，并且我仍然希望能够与它进行交互（旋转、平移、缩放等）。

正如您从我的帖子中可以看出的那样，我是 Qt/PCL/等方面的新手，因此任何使用最少代码的示例都将不胜感激。我已经对此进行了数周的研究，但我无法找到解决方案，尽管我觉得 Qt Widget 可能是要走的路。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T21:08:33.847

[您可以通过QVTKWidget](http://old.compucell3d.org/Documentation/class_q_v_t_k_widget.html)简单地使用 PCL 的[PCLVisualizer ，这](http://docs.pointclouds.org/trunk/classpcl_1_1visualization_1_1_p_c_l_visualizer.html)[在此处](http://pointclouds.org/documentation/tutorials/pcl_visualizer.php)进行了广泛描述。这是我目前正在运行的设置。所以你最终会按照以下（伪）代码的行做一些事情：

在您的标题中：

```
class PointCloudWidget : public QVTKWidget
{
    //Whatever comes before (constructor, methods, etc.)

private:

    pcl::visualization::PCLVisualizer m_visualizer;
}; 
```

在你的 cpp 中：

```
PointCloudWidget::PointCloudWidget(QWidget *parent) : QVTKWidget(parent)
{
    this->SetRenderWindow(m_visualizer.getRenderWindow());
} 
```

然后，您可以使用可视化工具来实现与 PCL 查看器相同的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-05T07:38:41.167

看看我放在[这里的那种最小代码（PCL Viewer with Qt GUI minimum code）](https://gist.github.com/Logrus/9988524)。有一些冗余，但我认为代码非常简单。

主要思想是将文件放在一个文件夹中，然后从 CMakeLists.txt（Qt cmake 向导）启动项目。

我`build`在项目目录中使用目录。（这很重要，因为在`pclwindow.cpp`我硬编码了生成文件的路径`#include "build/ui_pclwindow.h"`

如果应用程序构建，但崩溃，您可能需要添加一些依赖项（例如 Win 平台上的 dll 文件）

我希望它能给你快速简单的开始！

# javascript - 根据国家/地区更改横幅

> ID：16065988
> 
> 赞同：0
> 
> 时间：2013-04-17T17:04:41.443
> 
> 标签：javascript, jquery, google-maps, geolocation, detect

如果国家是印度，我想显示 india.jpg 并显示 srilanka.jpg 是国家是斯里兰卡。

**这检测到我的国家**

```
alert("Your location is: " + geoplugin_countryName() + ", " + geoplugin_region() + ", " + geoplugin_city()); 
```

印度的地理位置代码：22.512557、80.076350 SL 的地理位置代码：7.460518、80.783469

我如何动态放置它？请帮忙

Js 小提琴 - [http://jsfiddle.net/madhuri2987/KS4yy/2/](http://jsfiddle.net/madhuri2987/KS4yy/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:11:50.117

这是基于您的代码的一般想法。创建一个图像，检查国家名称并适当地更改图像的 src 属性。

```
jQuery( document ).ready( function( $ ) {
    var image = document.createElement('img'),
        country = geoplugin_countryName();
    if ( country === 'India' ) {
        image.src = 'location/of/image/india.jpg'
    } else if ( country === "Sri Lanka" ) {
        image.src = 'location/of/image/sri-lanka.jpg';
    } else {
        image.src = 'location/of/image/default.jpg';
    }
    $('#flag').html( image );
}); 
```

完整代码：http: [//jsfiddle.net/KS4yy/7/](http://jsfiddle.net/KS4yy/7/)

# asp.net - 没有 OnClick 事件的 Ajax 按钮导致回发

> ID：16065990
> 
> 赞同：0
> 
> 时间：2013-04-17T17:04:53.637
> 
> 标签：asp.net, ajax

我对 Ajax 完全陌生，没有接受过培训。我只是在复制同事的代码。我们有一个包含两个 Ajax 控件的页面：一个是我的同事编写的，一个是我编写的。除了一个项目外，一切都运行良好，而我的同事在另一个项目中受到他的关注，所以我需要弄清楚这一点。问题是我编写的 Ajax 控件弹出了一个带有两个按钮的 ListBox：关闭和选择。Select 按钮有一个 OnClick 事件并导致回发，正如预期的那样。但是，关闭按钮*不会*有一个 OnClick 事件，但仍会导致回发。对于我的同事编写的位于同一页面上的非常相似的 Ajax 控件，情况并非如此。代码如下。我同事的代码涉及到电子邮件模板；我的涉及电子邮件查找。对于我的生活，我看不出有什么不同。谁能告诉我为什么我的关闭按钮会导致 PostBack 而我的同事却不会？

```
<!--my co-worker's control-->
<tr>
        <td width="20%"><br /><div class="formtext">Email Template:</div></td>

 <td colspan="3"><br />
     <asp:Button ID="btn_ShowTemplate" runat="server" 
         Text="View/Edit Template"  />
        <ajax:ModalPopupExtender ID="mpTemplate" runat="server" PopupControlID="panelTemplate" TargetControlID="btn_ShowTemplate"
    CancelControlID="BtnTemplateClose" BackgroundCssClass="modalBackground">
</ajax:ModalPopupExtender>

 <asp:Panel ID="panelTemplate" runat="server" CssClass="modalPopupTemplate" align="center">
          <div class="formtext_modal">Litigation Hold Email Template <img src="images/v2/modal_email.png" alt="Email" /><br /></div>
          <cc1:Editor ID="TemplateEditor" runat="server" Width="675px" Height="400px" />
          <br />
    <asp:Button ID="BtnTemplateClose" runat="server" Text="Close" CssClass="btnMatterClose" />&nbsp;&nbsp;
    <asp:Button ID="btnTemplateSave" runat="server" Text="Save" CssClass="btnMatterSelect" OnClick="btnTemplateSave_Click" />
</asp:Panel></td>
  </tr>

<!--my control-->
<tr>
  <!-- email cc section -->
   <td>Email CC:<br /></td>
  <td colspan="3"><asp:Button ID="btnEmails" runat="server" Text="Lookup Email" />&nbsp;&nbsp;<asp:TextBox 
          ID="tbEmails" runat="server" Width="80%" ReadOnly="true"></asp:TextBox><br />
  <ajax:ModalPopupExtender ID="mpEmails" runat="server" PopupControlID="panelEmails" TargetControlID="btnEmails"
    CancelControlID="btnClose" BackgroundCssClass="modalBackground">
</ajax:ModalPopupExtender>
<asp:Panel ID="panelEmails" runat="server" CssClass="modalPopupAttorneys" align="center">
     <table align="center" width="100%">
     <tr>
        <td>
        <div class="formtext_modal">Email(s) Lookup <img src="images/v2/modal_search.png" alt="Search" /></div><br />
        <asp:Label ID="Label3" runat="server" Width="600px" CssClass="formtext" 
                Text="Add Employees to Email CC line"></asp:Label>
           <div  style="BORDER: thin solid; OVERFLOW: auto; WIDTH: 600px; HEIGHT: 140px">

              <asp:CheckBoxList  ID="cblEmails" runat="server" Width="600px" Height="140px"  SelectionMode="Multiple">
              </asp:CheckBoxList>
            </div>

       </td>  
     </tr> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T17:13:16.173

服务器端按钮总是会导致回发。解决它的一种方法是添加一个返回 false 的客户端单击函数。

```
OnClientClick="return false;" 
```

**编辑**

您的同事已`CancelControlID="BtnTemplateClose"`在`ModalPopupExtender`. 这就是压制帖子的原因。`btnClose`您还定义了 CancelControlID，但我在您发布的代码中的任何位置都找不到关闭按钮 ( )。您控件中的关闭按钮在哪里？如果您确保关闭按钮具有 ID `btnClose`，它很可能会像您同事的关闭按钮一样工作。

# treeview - 如何在两个 TreeTable ini jface 之间添加分隔符

> ID：16065991
> 
> 赞同：0
> 
> 时间：2013-04-17T17:05:04.947
> 
> 标签：treeview, jface

我使用可用的示例模板之一创建了一个 Eclipse 插件项目。我想让两个观众并排。我能够做到这一点。但问题是......没有这样的分隔符。它基本上看起来像这样：

```
TreeViewer1    TreeViewer2
  .              .
  ....comp1      ....Comp3
  .              .
  ....comp2      ....Comp4 
```

我想要这样的东西：

```
TreeViewer1  |  TreeViewer2
  .          |    .
  ....comp1  |    ....Comp3
  .          |    .
  ....comp2  |    ....Comp4 
```

我尝试添加'新标签（父，SWT.SEPARATOR | SWT.VERTICAL）；' 但是用户界面完全搞砸了。

这是代码

```
public void createPartControl(Composite parent) 
{
viewer = new TableViewer(parent, SWT.MULTI | SWT.H_SCROLL
        | SWT.V_SCROLL);
viewer.setContentProvider(new ViewContentProvider());
viewer.setLabelProvider(new ViewLabelProvider());
// Provide the input to the ContentProvider
viewer.setInput(new String[] {"One", "Two", "Three"});

new Label(parent, SWT.SEPARATOR | SWT.VERTICAL);

viewer2 = new TableViewer(parent, SWT.MULTI | SWT.H_SCROLL
        | SWT.V_SCROLL);
viewer2.setContentProvider(new ViewContentProvider());
viewer2.setLabelProvider(new ViewLabelProvider());
// Provide the input to the ContentProvider
viewer2.setInput(new String[] {"One", "Two", "Three"});

} 
```

![在此处输入图像描述](https://i.stack.imgur.com/l0kmC.png)请求你分享你的想法。

谢谢，帕万。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T19:13:03.323

您需要`LayoutData`在每个`Control`.

开始阅读这篇关于 SWT 中布局管理器的标准文章

[http://www.eclipse.org/articles/article.php?file=Article-Understanding-Layouts/index.html](http://www.eclipse.org/articles/article.php?file=Article-Understanding-Layouts/index.html)

# javascript - 替换\更改 RGBA JavaScript 中的 Alpha

> ID：16065998
> 
> 赞同：3
> 
> 时间：2013-04-17T17:05:37.193
> 
> 标签：javascript, regex, replace, rgba

我正在尝试更改 RGBA 中的 Alpha，由于某种原因，替换行为很奇怪，而不是导致：“rgba(30, 43, 2, A)”我最终得到：“A”。

这是代码：

```
var color="rgba(30, 43, 2, 0.498039)";
color = color.replace(/^.*,(.+)\)/gi,"A");
alert(color); 
```

[JS 小提琴演示](http://jsfiddle.net/365WR/)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-17T17:08:01.493

我不明白你的逻辑，但你可以这样做：

```
color = color.replace(/[\d\.]+\)$/g, 'A)') 
```

它匹配什么：

*   `[\d\.]+`:`.`和数字的组合
*   `\)`: 结束括号
*   `$`：字符串的结尾（如果您不想确保它是字符串的结尾，可以将其删除）

# java - 点列表+构造函数和方法问题

> ID：16065999
> 
> 赞同：1
> 
> 时间：2013-04-17T17:05:38.647
> 
> 标签：java, arraylist

所以对于这个项目，我希望输入一个包含多个点的数组。（没有具体数字）。我对如何处理方法和构造函数感到困惑，因为某些方法需要更改，例如获取 X 或 Y 值的平均值。我是否以正确的方式处理这个项目？我应该使用点列表的克隆，还是数组列表或什么...（请注意，我仅以 PolygonImpl 类的一部分为例，它们的功能都相似）类点包含：

```
public class Point {

private double x;
private double y;

public Point(double x, double y) {
    this.x = x;
    this.y = y;
}

public double getX() {
    return x;
}

public double getY() {
    return y;
}

public Point translate(double dx, double dy) {
    return new Point(x+dx, y+dy);
}

public double distanceTo(Point p) {
    return Math.sqrt((p.x - x)*(p.x -x) + (p.y-y)*(p.y-y));
} 
```

}

```
public class PolygonImpl implements Polygon {

private double xSum=0;
private double ySum=0;
private ArrayList<Point> points;
private Point[] pList;
private Point a;

PolygonImpl(Point[] pList) {

    this.pList = pList.clone();
    points = new ArrayList<Point>();

    for (int index = 0; index < pList.length; index++) {
           points.add(pList[index]);
       xSum += pList[index].getX();
       ySum += pList[index].getY();

    }
}

public Point getVertexAverage() {
     double xSum = 0;
     ArrayList<Point> vlist = new ArrayList<Point> ();
     double ySum = 0;
    for (int index = 0; index < vlist.size(); index++) {
         xSum = xSum + vlist.get(index).getX();
         ySum = ySum + vlist.get(index).getY();
        }

    return new Point(xSum/getNumSides(), ySum/getNumSides());
}

public int getNumSides() {
    return pList.length;
}

public void move(Point c) {
    Point newCentroid = new Point(a.getX()+ c.getX(), a.getY() +c.getY());

}

public void scale(double factor) {

 ArrayList<Point> points = new ArrayList<Point> ();

    for (int index = 0; index < pList.length; index++) {
        { double x = pList[index].getX() *factor;
          double y = pList[index].getY() * factor;
          Point a = new Point(x,y);
            points.add(index,a);

        }
    }
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:12:47.883

在这种情况下，我认为您不需要额外的 List 对象；它们是多余的。这是仅使用 pList 数组的代码。

```
public class PolygonImpl implements Polygon {

private double xSum=0;
private double ySum=0;
private Point[] pList;
private Point a;

    PolygonImpl(Point[] pList) {

        this.pList = pList.clone();

        for (int index = 0; index < pList.length; index++) {
           xSum += pList[index].getX();
           ySum += pList[index].getY();
        }
    }

    public Point getVertexAverage() {
         double xSum = 0;
         double ySum = 0;
        for (int index = 0; index < pList.length; index++) {
             xSum = xSum + pList[index].getX();
             ySum = ySum + pList[index].getY();
            }

        return new Point(xSum/getNumSides(), ySum/getNumSides());
    }

    public int getNumSides() {
        return pList.length;
    }

    public void move(Point c) {
        Point newCentroid = new Point(a.getX()+ c.getX(), a.getY() +c.getY());

    }

    public void scale(double factor) {
        for (int index = 0; index < pList.length; index++)
        {
            double x = pList[index].getX() *factor;
            double y = pList[index].getY() * factor;
            Point a = new Point(x,y);
            pList[index] = a;

        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T17:29:34.323

这里至少有三点需要指出。

首先是“克隆”和“复制”的区别。.clone 是浅拷贝；这意味着如果你改变了克隆，你也改变了原来的。

第二个是关于你对收藏的使用。由于多边形是点的集合，因此数组或 ArrayList 都是合适的，但是使用麻烦没有意义，或者，如果有，请仔细考虑它是否是一个好点，然后在内联文档为什么它很重要，否则它会以在你指的是另一个时使用一个的形式回来咬你。

三是范围。您的多边形类具有实例变量（xSum 和 ySum），它们被 getVertexAverage 中同名的变量所遮挡。它们在 getVertexAverage 中的使用方式本身是合适的；实例变量仅在您打算缓存总和时才有用，这变得更加可疑，因为更改点的每个操作都会使实例值无效。

实例值用于存储有关对象的数据（在这种情况下，点是合理的）；实例方法用于在给定状态（在本例中为平均值）对数据进行操作。

记住这一点，您现在可以理解 move 方法是如何未完成的:)